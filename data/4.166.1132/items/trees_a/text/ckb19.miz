environ
vocabularies TREES_1,FINSEQ_1,NUMBERS,SUBSET_1,ORDINAL4,XBOOLE_0,TARSKI,RELAT_1,XXREAL_0,ARYTM_3,TREES_2,FUNCT_1,TREES_A;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,CKB2,CKB11,CKB13;
definitions TARSKI,XBOOLE_0,TREES_1,TREES_2,RELAT_1,CKB2,CKB13;
theorems TARSKI,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,XBOOLE_0,XBOOLE_1,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes TREES_2;
registrations XBOOLE_0,RELSET_1,MEMBERED,FINSEQ_1,TREES_2,CKB10;
constructors XXREAL_0,NAT_1,MEMBERED,TREES_2,RELSET_1,FINSEQ_2,CKB2,CKB11,CKB13;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
reserve r for (FinSequence of ( NAT ));
reserve T for DecoratedTree;
reserve T1 for DecoratedTree;
theorem
Th18: (p in ( dom T ) implies (for q holds ((q in ( dom ( T with-replacement (p,T1) ) ) & q in { ( p ^ s ) where s is (Element of ( dom T1 )): s = s }) implies (ex r being (Element of ( dom T1 )) st (q = ( p ^ r ) & ( ( T with-replacement (p,T1) ) . q ) = ( T1 . r ))))))
proof
assume A1: p in ( dom T );
let q;
assume that
A2: q in ( dom ( T with-replacement (p,T1) ) )
and
A3: q in { ( p ^ s ) where s is (Element of ( dom T1 )): s = s };
per cases  by A1,A2,CKB15:1;
suppose A4: ((not p is_a_prefix_of q) & ( ( T with-replacement (p,T1) ) . q ) = ( T . q ));

(ex r being (Element of ( dom T1 )) st (q = ( p ^ r ) & r = r)) by A3;
hence thesis by A4,TREES_1:1;
end;
suppose (ex r st ((r in ( dom T1 ) & q = ( p ^ r )) & ( ( T with-replacement (p,T1) ) . q ) = ( T1 . r )));

hence thesis;
end;
end;
