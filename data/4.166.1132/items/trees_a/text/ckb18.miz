environ
vocabularies TREES_1,FINSEQ_1,NUMBERS,SUBSET_1,ORDINAL4,XBOOLE_0,TARSKI,RELAT_1,XXREAL_0,ARYTM_3,TREES_2,FUNCT_1,TREES_A;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,CKB2,CKB11,CKB13;
definitions TARSKI,XBOOLE_0,TREES_1,TREES_2,RELAT_1,CKB2,CKB13;
theorems TARSKI,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,XBOOLE_0,XBOOLE_1,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17;
schemes TREES_2;
registrations XBOOLE_0,RELSET_1,MEMBERED,FINSEQ_1,TREES_2,CKB10;
constructors XXREAL_0,NAT_1,MEMBERED,TREES_2,RELSET_1,FINSEQ_2,CKB2,CKB11,CKB13;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
reserve r for (FinSequence of ( NAT ));
reserve T for DecoratedTree;
reserve T1 for DecoratedTree;
reserve P for (AntiChain_of_Prefixes of ( dom T ));
theorem
Th17: (for q holds ((q in ( dom ( tree (T,P,T1) ) ) & q in { ( p ^ s ) where p is (Element of ( dom T )),s is (Element of ( dom T1 )): p in P }) implies (ex p9 being (Element of ( dom T )) st (ex r being (Element of ( dom T1 )) st ((q = ( p9 ^ r ) & p9 in P) & ( ( tree (T,P,T1) ) . q ) = ( T1 . r ))))))
proof
let q;
assume that
A1: q in ( dom ( tree (T,P,T1) ) )
and
A2: q in { ( p ^ s ) where p is (Element of ( dom T )),s is (Element of ( dom T1 )): p in P };
per cases  by A1,CKB14:1;
suppose A3: (for p holds (p in P implies ((not p is_a_prefix_of q) & ( ( tree (T,P,T1) ) . q ) = ( T . q ))));

consider p9 being (Element of ( dom T )),r being (Element of ( dom T1 )) such that A4: q = ( p9 ^ r ) and A5: p9 in P by A2;
now
assume ( ( tree (T,P,T1) ) . q ) <> ( T1 . r );
(not p9 is_a_prefix_of q) by A3,A5;
hence contradiction by A4,TREES_1:1;
end;
hence thesis by A4,A5;
end;
suppose (ex p st (ex r st (((p in P & r in ( dom T1 )) & q = ( p ^ r )) & ( ( tree (T,P,T1) ) . q ) = ( T1 . r ))));

then consider p,r such that A6: p in P and A7: r in ( dom T1 ) and A8: q = ( p ^ r ) and A9: ( ( tree (T,P,T1) ) . q ) = ( T1 . r );
consider p9 being (Element of ( dom T )),r9 being (Element of ( dom T1 )) such that A10: q = ( p9 ^ r9 ) and A11: p9 in P by A2;
now
assume A12: p <> p9;
p,p9 are_c=-comparable  by A8,A10,CKB1:1;
hence contradiction by A6,A11,A12,TREES_1:def 10;
end;
hence thesis by A6,A7,A8,A9;
end;
end;
