environ
vocabularies TREES_1,FINSEQ_1,NUMBERS,SUBSET_1,ORDINAL4,XBOOLE_0,TARSKI,RELAT_1,XXREAL_0,ARYTM_3,TREES_2,FUNCT_1,TREES_A;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,CKB2,CKB11,CKB13;
definitions TARSKI,XBOOLE_0,TREES_1,TREES_2,RELAT_1,CKB2,CKB13;
theorems TARSKI,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,XBOOLE_0,XBOOLE_1,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15;
schemes TREES_2;
registrations XBOOLE_0,RELSET_1,MEMBERED,FINSEQ_1,TREES_2,CKB10;
constructors XXREAL_0,NAT_1,MEMBERED,TREES_2,RELSET_1,FINSEQ_2,CKB2,CKB11,CKB13;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
reserve r for (FinSequence of ( NAT ));
reserve p9 for (FinSequence of ( NAT ));
reserve x for set;
reserve T for DecoratedTree;
reserve T1 for DecoratedTree;
reserve P for (AntiChain_of_Prefixes of ( dom T ));
theorem
Th15: (P <> ( {} ) implies (for q holds ((q in ( dom ( tree (T,P,T1) ) ) & q in { t1 where t1 is (Element of ( dom T )): (for p holds (p in P implies (not p is_a_prefix_of t1))) }) implies ( ( tree (T,P,T1) ) . q ) = ( T . q ))))
proof
assume A1: P <> ( {} );
let q;
assume that
A2: q in ( dom ( tree (T,P,T1) ) )
and
A3: q in { t1 where t1 is (Element of ( dom T )): (for p holds (p in P implies (not p is_a_prefix_of t1))) };
A4: (ex t9 being (Element of ( dom T )) st (t9 = q & (for p holds (p in P implies (not p is_a_prefix_of t9))))) by A3;
per cases  by A2,CKB14:1;
suppose A5: (for p holds (p in P implies ((not p is_a_prefix_of q) & ( ( tree (T,P,T1) ) . q ) = ( T . q ))));

consider x being set such that A6: x in P by A1,XBOOLE_0:def 1;
P c= ( dom T ) by TREES_1:def 11;
then reconsider x as (Element of ( dom T )) by A6;
(ex p9 st p9 = x);
hence thesis by A5,A6;
end;
suppose (ex p st (ex r st (((p in P & r in ( dom T1 )) & q = ( p ^ r )) & ( ( tree (T,P,T1) ) . q ) = ( T1 . r ))));

then consider p,r such that A7: p in P and r in ( dom T1 ) and A8: q = ( p ^ r ) and ( ( tree (T,P,T1) ) . q ) = ( T1 . r );
(not p is_a_prefix_of q) by A4,A7;
hence thesis by A8,TREES_1:1;
end;
end;
