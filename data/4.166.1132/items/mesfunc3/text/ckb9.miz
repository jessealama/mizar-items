environ
vocabularies NUMBERS,NAT_1,FUNCT_1,ZFMISC_1,FINSEQ_1,RELAT_1,CARD_3,ARYTM_3,SUBSET_1,XXREAL_0,TARSKI,XBOOLE_0,FINSEQ_2,ARYTM_1,PARTFUN1,BINOP_2,ORDINAL4,CARD_1,FUNCOP_1,PROB_1,MESFUNC2,FUNCT_3,SUPINF_2,PROB_2,MEASURE1,ORDINAL1,XXREAL_2,ORDINAL2,SUPINF_1,XREAL_0,MESFUNC1,VALUED_0,COMPLEX1,SETFAM_1,FINSET_1,FINSOP_1,SETWISEO,INTEGRA1,REAL_1,MESFUNC3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,REAL_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XREAL_0,SETWOP_2,FINSEQ_1,SETFAM_1,FUNCOP_1,FINSOP_1,FUNCT_3,FINSET_1,PROB_1,PROB_2,XXREAL_0,XXREAL_2,SUPINF_1,SUPINF_2,MEASURE1,FINSEQOP,FINSEQ_2,BINOP_1,SEQ_1,BINOP_2,RVSUM_1,EXTREAL1,MESFUNC1,MESFUNC2;
definitions TARSKI,XBOOLE_0,BINOP_1,SUPINF_2,MESFUNC1;
theorems MEASURE1,TARSKI,FUNCT_1,FUNCT_2,NAT_1,SUPINF_2,EXTREAL1,EXTREAL2,ZFMISC_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCOP_1,FINSEQ_4,PROB_2,FUNCT_3,XBOOLE_0,XBOOLE_1,RELAT_1,RVSUM_1,BINOP_2,MESFUNC2,MEASURE2,FINSOP_1,CARD_2,XREAL_1,XXREAL_0,ORDINAL1,NUMBERS,VALUED_1,XXREAL_2,VALUED_0,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8;
schemes FINSEQ_1,FINSEQ_2,NAT_1,PARTFUN1,BINOP_1;
registrations SUBSET_1,RELAT_1,ORDINAL1,FUNCT_2,NUMBERS,XXREAL_0,XREAL_0,NAT_1,BINOP_2,MEMBERED,FINSEQ_1,MEASURE1,FINSET_1,VALUED_0,CARD_1,CARD_3,XXREAL_3,RELSET_1;
constructors PARTFUN1,BINOP_1,SETWISEO,REAL_1,NAT_1,FINSEQOP,PROB_2,FINSOP_1,RVSUM_1,MEASURE3,MEASURE6,EXTREAL1,MESFUNC1,BINARITH,MESFUNC2,SEQ_1,BINOP_2,SUPINF_1,RELSET_1;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Th9: (for X being non  empty set holds (for S being (SigmaField of X) holds (for M being (sigma_Measure of S) holds (for F being (Finite_Sep_Sequence of S) holds ( M . ( union ( rng F ) ) ) = ( Sum ( M * F ) )))))
proof
let X being non  empty set;
let S being (SigmaField of X);
let M being (sigma_Measure of S);
let F being (Finite_Sep_Sequence of S);
reconsider F1 = ( M * F ) as (FinSequence of ( ExtREAL ));
consider f being (Function of ( NAT ),( ExtREAL )) such that A1: ( Sum F1 ) = ( f . ( len F1 ) ) and A2: ( f . ( 0 ) ) = ( 0. ) and A3: (for i being (Element of ( NAT )) holds (i < ( len F1 ) implies ( f . ( i + 1 ) ) = ( ( f . i ) + ( F1 . ( i + 1 ) ) ))) by EXTREAL1:def 2;
consider G being (Sep_Sequence of S) such that A4: ( union ( rng F ) ) = ( union ( rng G ) ) and A5: (for n being Nat holds (n in ( dom F ) implies ( F . n ) = ( G . n ))) and A6: (for m being Nat holds ((not m in ( dom F )) implies ( G . m ) = ( {} ))) by MESFUNC2:30;
defpred Q[ Nat ]
 means
($1 <= ( len F1 ) implies ( ( Ser ( M * G ) ) . $1 ) = ( f . $1 ));
reconsider G1 = ( M * G ) as (Num of (( rng ( M * G ) ) qua  countable non  empty (Subset of ( ExtREAL )))) by SUPINF_2:def 10;
A7: ( dom G ) = ( NAT ) by FUNCT_2:def 1;
A8: ( Ser ( M * G ) ) = ( Ser (( rng ( M * G ) ),G1) ) by SUPINF_2:def 15;
A9: (for i being Nat holds (i < ( len F1 ) implies ( ( Ser ( M * G ) ) . ( i + 1 ) ) = ( ( ( Ser ( M * G ) ) . i ) + ( F1 . ( i + 1 ) ) )))
proof
let i being Nat;
assume i < ( len F1 );
then (1 <= ( i + 1 ) & ( i + 1 ) <= ( len F1 )) by NAT_1:11,NAT_1:13;
then ( i + 1 ) in ( dom F1 ) by FINSEQ_3:25;
then A10: ( i + 1 ) in ( dom F ) by CKB8:1;
reconsider i as (Element of ( NAT )) by ORDINAL1:def 12;
( ( Ser ( M * G ) ) . ( i + 1 ) ) = ( ( ( Ser ( M * G ) ) . i ) + ( G1 . ( i + 1 ) ) ) by A8,SUPINF_2:def 11
.= ( ( ( Ser ( M * G ) ) . i ) + ( M . ( G . ( i + 1 ) ) ) ) by A7,FUNCT_1:13
.= ( ( ( Ser ( M * G ) ) . i ) + ( M . ( F . ( i + 1 ) ) ) ) by A5,A10;
hence thesis by A10,FUNCT_1:13;
end;
A11: (for k being Nat holds (Q[ k ] implies Q[ ( k + 1 ) ]))
proof
A12: (for i being Nat holds (i < ( len F1 ) implies ( f . ( i + 1 ) ) = ( ( f . i ) + ( F1 . ( i + 1 ) ) )))
proof
let i being Nat;
i in ( NAT ) by ORDINAL1:def 12;
hence thesis by A3;
end;
let k being Nat;
assume A13: Q[ k ];
assume ( k + 1 ) <= ( len F1 );
then A14: k < ( len F1 ) by NAT_1:13;
then ( ( Ser ( M * G ) ) . ( k + 1 ) ) = ( ( f . k ) + ( F1 . ( k + 1 ) ) ) by A9,A13;
hence thesis by A12,A14;
end;
defpred P[ Nat ]
 means
($1 >= ( len F1 ) implies ( ( Ser ( M * G ) ) . $1 ) = ( ( Ser ( M * G ) ) . ( len F1 ) ));
A15: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume A16: P[ k ];
assume A17: ( k + 1 ) >= ( len F1 );
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
now
per cases ;
case A18: k >= ( len F1 );
then ( k + 1 ) > ( len F1 ) by NAT_1:13;
then (not ( k + 1 ) in ( Seg ( len F1 ) )) by FINSEQ_1:1;
then (not ( k + 1 ) in ( dom F1 )) by FINSEQ_1:def 3;
then A19: (not ( k + 1 ) in ( dom F )) by CKB8:1;
A20: ( G1 . ( k + 1 ) ) = ( M . ( G . ( k + 1 ) ) ) by A7,FUNCT_1:13
.= ( M . ( {} ) ) by A6,A19
.= ( 0. ) by VALUED_0:def 19;
( ( Ser ( M * G ) ) . ( k + 1 ) ) = ( ( ( Ser ( M * G ) ) . ( len F1 ) ) + ( G1 . ( k + 1 ) ) ) by A8,A16,A18,SUPINF_2:def 11;
hence thesis by A20,XXREAL_3:4;
end;
case k < ( len F1 );
then ( k + 1 ) <= ( len F1 ) by NAT_1:13;
hence thesis by A17,XXREAL_0:1;
end;
end;
hence thesis;
end;
defpred P1[ Nat ]
 means
($1 < ( len F1 ) implies ( ( Ser ( M * G ) ) . ( ( len F1 ) - $1 ) ) <= ( ( Ser ( M * G ) ) . ( len F1 ) ));
A21: ( M * G ) is  nonnegative by MEASURE2:1;
A22: (for k being Nat holds (P1[ k ] implies P1[ ( k + 1 ) ]))
proof
let k being Nat;
assume A23: P1[ k ];
assume A24: ( k + 1 ) < ( len F1 );
then consider k9 being Nat such that A25: ( len F1 ) = ( ( k + 1 ) + k9 ) by NAT_1:10;
reconsider k9 as (Element of ( NAT )) by ORDINAL1:def 12;
(k <= ( k + 1 ) & ( ( Ser ( M * G ) ) . k9 ) <= ( ( Ser ( M * G ) ) . ( k9 + 1 ) )) by A21,NAT_1:11,SUPINF_2:40;
hence thesis by A23,A24,A25,XXREAL_0:2;
end;
(not ( 0 ) in ( Seg ( len F ) )) by FINSEQ_1:1;
then (not ( 0 ) in ( dom F )) by FINSEQ_1:def 3;
then A26: ( G . ( 0 ) ) = ( {} ) by A6;
( ( Ser ( M * G ) ) . ( 0 ) ) = ( G1 . ( 0 ) ) by A8,SUPINF_2:def 11;
then A27: ( ( Ser ( M * G ) ) . ( 0 ) ) = ( M . ( G . ( 0 ) ) ) by A7,FUNCT_1:13
.= ( 0. ) by A26,VALUED_0:def 19;
then A28: Q[ ( 0 ) ] by A2;
A29: (for k being Nat holds Q[ k ]) from NAT_1:sch 2(A28,A11);
A30: P1[ ( 0 ) ];
A31: (for i being Nat holds P1[ i ]) from NAT_1:sch 2(A30,A22);
A32: (for i being Nat holds (i < ( len F1 ) implies ( ( Ser ( M * G ) ) . i ) <= ( ( Ser ( M * G ) ) . ( len F1 ) )))
proof
let i being Nat;
A33: ( len F1 ) <= ( ( len F1 ) + i ) by NAT_1:11;
assume i < ( len F1 );
then consider k being Nat such that A34: ( len F1 ) = ( i + k ) by NAT_1:10;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
k = ( ( len F1 ) - i ) by A34;
then A35: k <= ( len F1 ) by A33,XREAL_1:20;
( ( Ser ( M * G ) ) . ( ( len F1 ) - k ) ) <= ( ( Ser ( M * G ) ) . ( len F1 ) )
proof
now
per cases  by A35,XXREAL_0:1;
case k = ( len F1 );
hence thesis by A27,A21,SUPINF_2:40;
end;
case k < ( len F1 );
hence thesis by A31;
end;
end;
hence thesis;
end;
hence thesis by A34;
end;
A36: P[ ( 0 ) ];
A37: (for k being Nat holds P[ k ]) from NAT_1:sch 2(A36,A15);
(for z being  ext-real number holds (z in ( rng ( Ser ( M * G ) ) ) implies z <= ( ( Ser ( M * G ) ) . ( len F1 ) )))
proof
let z being  ext-real number;
assume z in ( rng ( Ser ( M * G ) ) );
then consider n being set such that A38: n in ( dom ( Ser ( M * G ) ) ) and A39: z = ( ( Ser ( M * G ) ) . n ) by FUNCT_1:def 3;
reconsider n as (Element of ( NAT )) by A38;
now
per cases ;
case n < ( len F1 );
hence thesis by A32,A39;
end;
case n >= ( len F1 );
hence thesis by A37,A39;
end;
end;
hence thesis;
end;
then A40: ( ( Ser ( M * G ) ) . ( len F1 ) ) is (UpperBound of ( rng ( Ser ( M * G ) ) )) by XXREAL_2:def 1;
( dom ( Ser ( M * G ) ) ) = ( NAT ) by FUNCT_2:def 1;
then A41: ( ( Ser ( M * G ) ) . ( len F1 ) ) = ( sup ( rng ( Ser ( M * G ) ) ) ) by A40,FUNCT_1:3,XXREAL_2:55;
( M . ( union ( rng F ) ) ) = ( SUM ( M * G ) ) by A4,MEASURE1:def 6
.= ( sup ( rng ( Ser ( M * G ) ) ) );
hence thesis by A1,A29,A41;
end;
