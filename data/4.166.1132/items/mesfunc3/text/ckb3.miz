environ
vocabularies NUMBERS,NAT_1,FUNCT_1,ZFMISC_1,FINSEQ_1,RELAT_1,CARD_3,ARYTM_3,SUBSET_1,XXREAL_0,TARSKI,XBOOLE_0,FINSEQ_2,ARYTM_1,PARTFUN1,BINOP_2,ORDINAL4,CARD_1,FUNCOP_1,PROB_1,MESFUNC2,FUNCT_3,SUPINF_2,PROB_2,MEASURE1,ORDINAL1,XXREAL_2,ORDINAL2,SUPINF_1,XREAL_0,MESFUNC1,VALUED_0,COMPLEX1,SETFAM_1,FINSET_1,FINSOP_1,SETWISEO,INTEGRA1,REAL_1,MESFUNC3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,REAL_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XREAL_0,SETWOP_2,FINSEQ_1,SETFAM_1,FUNCOP_1,FINSOP_1,FUNCT_3,FINSET_1,PROB_1,PROB_2,XXREAL_0,XXREAL_2,SUPINF_1,SUPINF_2,MEASURE1,FINSEQOP,FINSEQ_2,BINOP_1,SEQ_1,BINOP_2,RVSUM_1,EXTREAL1,MESFUNC1,MESFUNC2;
definitions TARSKI,XBOOLE_0,BINOP_1,SUPINF_2,MESFUNC1;
theorems MEASURE1,TARSKI,FUNCT_1,FUNCT_2,NAT_1,SUPINF_2,EXTREAL1,EXTREAL2,ZFMISC_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCOP_1,FINSEQ_4,PROB_2,FUNCT_3,XBOOLE_0,XBOOLE_1,RELAT_1,RVSUM_1,BINOP_2,MESFUNC2,MEASURE2,FINSOP_1,CARD_2,XREAL_1,XXREAL_0,ORDINAL1,NUMBERS,VALUED_1,XXREAL_2,VALUED_0,XXREAL_3,CKB1,CKB2;
schemes FINSEQ_1,FINSEQ_2,NAT_1,PARTFUN1,BINOP_1;
registrations SUBSET_1,RELAT_1,ORDINAL1,FUNCT_2,NUMBERS,XXREAL_0,XREAL_0,NAT_1,BINOP_2,MEMBERED,FINSEQ_1,MEASURE1,FINSET_1,VALUED_0,CARD_1,CARD_3,XXREAL_3,RELSET_1;
constructors PARTFUN1,BINOP_1,SETWISEO,REAL_1,NAT_1,FINSEQOP,PROB_2,FINSOP_1,RVSUM_1,MEASURE3,MEASURE6,EXTREAL1,MESFUNC1,BINARITH,MESFUNC2,SEQ_1,BINOP_2,SUPINF_1,RELSET_1;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Th3: (for X being non empty set holds (for S being (SigmaField of X) holds (for f being (PartFunc of X,( ExtREAL )) holds (f is_simple_func_in S implies (ex F being (Finite_Sep_Sequence of S) st (ex a being (FinSequence of ( ExtREAL )) st (((( dom f ) = ( union ( rng F ) ) & ( dom F ) = ( dom a )) & (for n being Nat holds (n in ( dom F ) implies (for x being set holds (x in ( F . n ) implies ( f . x ) = ( a . n )))))) & (for x being set holds (x in ( dom f ) implies (ex ax being (FinSequence of ( ExtREAL )) st (( dom ax ) = ( dom a ) & (for n being Nat holds (n in ( dom ax ) implies ( ax . n ) = ( ( a . n ) * ( ( chi (( F . n ),X) ) . x ) ))))))))))))))
proof
let X being non empty set;
let S being (SigmaField of X);
let f being (PartFunc of X,( ExtREAL ));
assume f is_simple_func_in S;
then consider F being (Finite_Sep_Sequence of S) such that A1: ( dom f ) = ( union ( rng F ) ) and A2: (for n being Nat holds (for x,y being (Element of X) holds (((n in ( dom F ) & x in ( F . n )) & y in ( F . n )) implies ( f . x ) = ( f . y )))) by MESFUNC2:def 4;
defpred P[ Nat,(Element of ( ExtREAL )) ]
 means
(for x being set holds (x in ( F . $1 ) implies $2 = ( f . x )));
A3: (for k being Nat holds (k in ( Seg ( len F ) ) implies (ex y being (Element of ( ExtREAL )) st P[ k,y ])))
proof
let k being Nat;
assume k in ( Seg ( len F ) );
then A4: k in ( dom F ) by FINSEQ_1:def 3;
then A5: ( F . k ) in ( rng F ) by FUNCT_1:3;
now
per cases ;
case A6: ( F . k ) = ( {} );
take y = ( 0. );
(for x being set holds (x in ( F . k ) implies y = ( f . x ))) by A6;
hence thesis;
end;
case ( F . k ) <> ( {} );
then consider x1 being set such that A7: x1 in ( F . k ) by XBOOLE_0:def 1;
take y = ( f . x1 );
(for x being set holds (x in ( F . k ) implies y = ( f . x )))
proof
let x being set;
A8: ( rng F ) c= ( bool X ) by XBOOLE_1:1;
then reconsider x1 as (Element of X) by A5,A7;
assume A9: x in ( F . k );
then reconsider x as (Element of X) by A5,A8;
( f . x ) = ( f . x1 ) by A2,A4,A7,A9;
hence thesis;
end;
hence thesis;
end;
end;
hence thesis;
end;
consider a being (FinSequence of ( ExtREAL )) such that A10: (( dom a ) = ( Seg ( len F ) ) & (for k being Nat holds (k in ( Seg ( len F ) ) implies P[ k,( a . k ) ]))) from FINSEQ_1:sch 5(A3);
take F;
take a;
A11: (for x being set holds (x in ( dom f ) implies (ex ax being (FinSequence of ( ExtREAL )) st (( dom ax ) = ( dom a ) & (for n being Nat holds (n in ( dom ax ) implies ( ax . n ) = ( ( a . n ) * ( ( chi (( F . n ),X) ) . x ) )))))))
proof
let x being set;
assume x in ( dom f );
deffunc Q(Nat) = ( ( a . $1 ) * ( ( chi (( F . $1 ),X) ) . x ) );
consider ax being (FinSequence of ( ExtREAL )) such that A12: (( len ax ) = ( len F ) & (for k being Nat holds (k in ( dom ax ) implies ( ax . k ) = Q(k)))) from FINSEQ_2:sch 1;
take ax;
thus thesis by A10,A12,FINSEQ_1:def 3;
end;
(for n being Nat holds (n in ( dom F ) implies (for x being set holds (x in ( F . n ) implies ( a . n ) = ( f . x )))))
proof
let n being Nat;
assume n in ( dom F );
then n in ( Seg ( len F ) ) by FINSEQ_1:def 3;
hence thesis by A10;
end;
hence thesis by A1,A10,A11,FINSEQ_1:def 3;
end;
