environ
vocabularies NUMBERS,NAT_1,FUNCT_1,ZFMISC_1,FINSEQ_1,RELAT_1,CARD_3,ARYTM_3,SUBSET_1,XXREAL_0,TARSKI,XBOOLE_0,FINSEQ_2,ARYTM_1,PARTFUN1,BINOP_2,ORDINAL4,CARD_1,FUNCOP_1,PROB_1,MESFUNC2,FUNCT_3,SUPINF_2,PROB_2,MEASURE1,ORDINAL1,XXREAL_2,ORDINAL2,SUPINF_1,XREAL_0,MESFUNC1,VALUED_0,COMPLEX1,SETFAM_1,FINSET_1,FINSOP_1,SETWISEO,INTEGRA1,REAL_1,MESFUNC3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,REAL_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XREAL_0,SETWOP_2,FINSEQ_1,SETFAM_1,FUNCOP_1,FINSOP_1,FUNCT_3,FINSET_1,PROB_1,PROB_2,XXREAL_0,XXREAL_2,SUPINF_1,SUPINF_2,MEASURE1,FINSEQOP,FINSEQ_2,BINOP_1,SEQ_1,BINOP_2,RVSUM_1,EXTREAL1,MESFUNC1,MESFUNC2,CKB12;
definitions TARSKI,XBOOLE_0,BINOP_1,SUPINF_2,MESFUNC1,CKB12;
theorems MEASURE1,TARSKI,FUNCT_1,FUNCT_2,NAT_1,SUPINF_2,EXTREAL1,EXTREAL2,ZFMISC_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCOP_1,FINSEQ_4,PROB_2,FUNCT_3,XBOOLE_0,XBOOLE_1,RELAT_1,RVSUM_1,BINOP_2,MESFUNC2,MEASURE2,FINSOP_1,CARD_2,XREAL_1,XXREAL_0,ORDINAL1,NUMBERS,VALUED_1,XXREAL_2,VALUED_0,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes FINSEQ_1,FINSEQ_2,NAT_1,PARTFUN1,BINOP_1;
registrations SUBSET_1,RELAT_1,ORDINAL1,FUNCT_2,NUMBERS,XXREAL_0,XREAL_0,NAT_1,BINOP_2,MEMBERED,FINSEQ_1,MEASURE1,FINSET_1,VALUED_0,CARD_1,CARD_3,XXREAL_3,RELSET_1;
constructors PARTFUN1,BINOP_1,SETWISEO,REAL_1,NAT_1,FINSEQOP,PROB_2,FINSOP_1,RVSUM_1,MEASURE3,MEASURE6,EXTREAL1,MESFUNC1,BINARITH,MESFUNC2,SEQ_1,BINOP_2,SUPINF_1,RELSET_1,CKB12;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
(for X being non  empty set holds (for S being (SigmaField of X) holds (for f being (PartFunc of X,( ExtREAL )) holds (for F being (Finite_Sep_Sequence of S) holds (for a being (FinSequence of ( ExtREAL )) holds (for x being (Element of X) holds ((F,a are_Re-presentation_of f & x in ( dom f )) implies (ex ax being (FinSequence of ( ExtREAL )) st ((( dom ax ) = ( dom a ) & (for n being Nat holds (n in ( dom ax ) implies ( ax . n ) = ( ( a . n ) * ( ( chi (( F . n ),X) ) . x ) )))) & ( f . x ) = ( Sum ax ))))))))))
proof
let X being non  empty set;
let S being (SigmaField of X);
let f being (PartFunc of X,( ExtREAL ));
let F being (Finite_Sep_Sequence of S);
let a being (FinSequence of ( ExtREAL ));
let x being (Element of X);
assume that
A1: F,a are_Re-presentation_of f
and
A2: x in ( dom f );
A3: ( dom F ) = ( dom a ) by A1,CKB12:def 1;
deffunc F(Nat) = ( ( a . $1 ) * ( ( chi (( F . $1 ),X) ) . x ) );
consider ax being (FinSequence of ( ExtREAL )) such that A4: (( len ax ) = ( len a ) & (for j being Nat holds (j in ( dom ax ) implies ( ax . j ) = F(j)))) from FINSEQ_2:sch 1;
A5: ( dom ax ) = ( Seg ( len a ) ) by A4,FINSEQ_1:def 3;
A6: ( dom f ) = ( union ( rng F ) ) by A1,CKB12:def 1;
A7: ( f . x ) = ( Sum ax )
proof
consider Y being set such that A8: x in Y and A9: Y in ( rng F ) by A2,A6,TARSKI:def 4;
consider k being set such that A10: k in ( dom F ) and A11: Y = ( F . k ) by A9,FUNCT_1:def 3;
reconsider k as (Element of ( NAT )) by A10;
A12: k in ( Seg ( len a ) ) by A3,A10,FINSEQ_1:def 3;
then A13: ( len ax ) >= k by A4,FINSEQ_1:1;
A14: (for i being Nat holds ((i in ( Seg ( len ax ) ) & i <> k) implies ( ax . i ) = ( 0. )))
proof
let i being Nat;
assume that
A15: i in ( Seg ( len ax ) )
and
A16: i <> k;
( F . i ) misses ( F . k ) by A16,PROB_2:def 2;
then ( ( F . i ) /\ ( F . k ) ) = ( {} ) by XBOOLE_0:def 7;
then (not x in ( F . i )) by A8,A11,XBOOLE_0:def 4;
then A17: ( ( chi (( F . i ),X) ) . x ) = ( 0. ) by FUNCT_3:def 3;
( ax . i ) = ( ( a . i ) * ( ( chi (( F . i ),X) ) . x ) ) by A4,A5,A15;
hence thesis by A17;
end;
consider SA being (Function of ( NAT ),( ExtREAL )) such that A18: ( Sum ax ) = ( SA . ( len ax ) ) and A19: ( SA . ( 0 ) ) = ( 0. ) and A20: (for i being (Element of ( NAT )) holds (i < ( len ax ) implies ( SA . ( i + 1 ) ) = ( ( SA . i ) + ( ax . ( i + 1 ) ) ))) by EXTREAL1:def 2;
defpred P[ Nat ]
 means
($1 <= ( len ax ) implies (($1 < k implies ( SA . $1 ) = ( 0. )) & ($1 >= k implies ( SA . $1 ) = ( f . x ))));
A21: (for i being Nat holds ((i in ( Seg ( len ax ) ) & i = k) implies ( ax . i ) = ( f . x )))
proof
let i being Nat;
assume that
A22: i in ( Seg ( len ax ) )
and
A23: i = k;
( ( chi (( F . i ),X) ) . x ) = ( 1. ) by A8,A11,A23,FUNCT_3:def 3;
then ( ax . i ) = ( ( a . i ) * ( 1. ) ) by A4,A5,A22
.= ( a . i ) by XXREAL_3:81;
hence thesis by A1,A8,A10,A11,A23,CKB12:def 1;
end;
A24: (for i being Nat holds (P[ i ] implies P[ ( i + 1 ) ]))
proof
let i being Nat;
assume A25: P[ i ];
assume A26: ( i + 1 ) <= ( len ax );
reconsider i as (Element of ( NAT )) by ORDINAL1:def 12;
now
per cases ;
case A27: ( i + 1 ) < k;
A28: k <= ( len a ) by A12,FINSEQ_1:1;
A29: i <= ( i + 1 ) by NAT_1:11;
then i < k by A27,XXREAL_0:2;
then A30: i < ( len ax ) by A4,A28,XXREAL_0:2;
then (1 <= ( i + 1 ) & ( i + 1 ) <= ( len ax )) by NAT_1:11,NAT_1:13;
then A31: ( i + 1 ) in ( Seg ( len ax ) ) by FINSEQ_1:1;
( SA . ( i + 1 ) ) = ( ( 0. ) + ( ax . ( i + 1 ) ) ) by A20,A25,A27,A29,A30,XXREAL_0:2
.= ( ax . ( i + 1 ) ) by XXREAL_3:4
.= ( 0. ) by A14,A27,A31;
hence thesis by A27;
end;
case A32: ( i + 1 ) >= k;
now
per cases ;
case A33: k = ( i + 1 );
A34: k <= ( len a ) by A12,FINSEQ_1:1;
then i < ( len ax ) by A4,A33,NAT_1:13;
hence ( SA . ( i + 1 ) ) = ( ( SA . i ) + ( ax . ( i + 1 ) ) ) by A20
.= ( ax . k ) by A4,A25,A33,A34,NAT_1:13,XXREAL_3:4
.= ( f . x ) by A4,A12,A21;
end;
case k <> ( i + 1 );
then A35: k < ( i + 1 ) by A32,XXREAL_0:1;
1 <= ( i + 1 ) by NAT_1:11;
then A36: ( i + 1 ) in ( Seg ( len ax ) ) by A26,FINSEQ_1:1;
i < ( len ax ) by A26,NAT_1:13;
hence ( SA . ( i + 1 ) ) = ( ( SA . i ) + ( ax . ( i + 1 ) ) ) by A20
.= ( ( f . x ) + ( 0. ) ) by A14,A25,A26,A35,A36,NAT_1:13
.= ( f . x ) by XXREAL_3:4;
end;
end;
hence thesis by A32;
end;
end;
hence thesis;
end;
A37: P[ ( 0 ) ] by A12,A19,FINSEQ_1:1;
(for i being Nat holds P[ i ]) from NAT_1:sch 2(A37,A24);
hence thesis by A18,A13;
end;
take ax;
( dom ax ) = ( Seg ( len a ) ) by A4,FINSEQ_1:def 3;
hence thesis by A4,A7,FINSEQ_1:def 3;
end;
