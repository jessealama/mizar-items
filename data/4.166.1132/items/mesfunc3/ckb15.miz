environ
vocabularies NUMBERS,NAT_1,FUNCT_1,ZFMISC_1,FINSEQ_1,RELAT_1,CARD_3,ARYTM_3,SUBSET_1,XXREAL_0,TARSKI,XBOOLE_0,FINSEQ_2,ARYTM_1,PARTFUN1,BINOP_2,ORDINAL4,CARD_1,FUNCOP_1,PROB_1,MESFUNC2,FUNCT_3,SUPINF_2,PROB_2,MEASURE1,ORDINAL1,XXREAL_2,ORDINAL2,SUPINF_1,XREAL_0,MESFUNC1,VALUED_0,COMPLEX1,SETFAM_1,FINSET_1,FINSOP_1,SETWISEO,INTEGRA1,REAL_1,MESFUNC3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,REAL_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XREAL_0,SETWOP_2,FINSEQ_1,SETFAM_1,FUNCOP_1,FINSOP_1,FUNCT_3,FINSET_1,PROB_1,PROB_2,XXREAL_0,XXREAL_2,SUPINF_1,SUPINF_2,MEASURE1,FINSEQOP,FINSEQ_2,BINOP_1,SEQ_1,BINOP_2,RVSUM_1,EXTREAL1,MESFUNC1,MESFUNC2,CKB12;
definitions TARSKI,XBOOLE_0,BINOP_1,SUPINF_2,MESFUNC1,CKB12;
theorems MEASURE1,TARSKI,FUNCT_1,FUNCT_2,NAT_1,SUPINF_2,EXTREAL1,EXTREAL2,ZFMISC_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCOP_1,FINSEQ_4,PROB_2,FUNCT_3,XBOOLE_0,XBOOLE_1,RELAT_1,RVSUM_1,BINOP_2,MESFUNC2,MEASURE2,FINSOP_1,CARD_2,XREAL_1,XXREAL_0,ORDINAL1,NUMBERS,VALUED_1,XXREAL_2,VALUED_0,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
schemes FINSEQ_1,FINSEQ_2,NAT_1,PARTFUN1,BINOP_1;
registrations SUBSET_1,RELAT_1,ORDINAL1,FUNCT_2,NUMBERS,XXREAL_0,XREAL_0,NAT_1,BINOP_2,MEMBERED,FINSEQ_1,MEASURE1,FINSET_1,VALUED_0,CARD_1,CARD_3,XXREAL_3,RELSET_1;
constructors PARTFUN1,BINOP_1,SETWISEO,REAL_1,NAT_1,FINSEQOP,PROB_2,FINSOP_1,RVSUM_1,MEASURE3,MEASURE6,EXTREAL1,MESFUNC1,BINARITH,MESFUNC2,SEQ_1,BINOP_2,SUPINF_1,RELSET_1,CKB12;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Lm1: (for a being (FinSequence of ( ExtREAL )) holds (for p,N being (Element of ( ExtREAL )) holds ((N = ( len a ) & (for n being Nat holds (n in ( dom a ) implies ( a . n ) = p))) implies ( Sum a ) = ( N * p ))))
proof
defpred P[ Nat ]
 means
(for F being (FinSequence of ( ExtREAL )) holds (for p being (Element of ( ExtREAL )) holds (($1 = ( len F ) & (for n being Nat holds (n in ( dom F ) implies ( F . n ) = p))) implies (ex N being (Element of ( ExtREAL )) st (N = $1 & ( Sum F ) = ( N * p ))))));
let a being (FinSequence of ( ExtREAL ));
let p being (Element of ( ExtREAL )),N being (Element of ( ExtREAL ));
assume that
A1: N = ( len a )
and
A2: (for n being Nat holds (n in ( dom a ) implies ( a . n ) = p));
A3: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume A4: P[ k ];
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
(for F being (FinSequence of ( ExtREAL )) holds (for p being (Element of ( ExtREAL )) holds ((( k + 1 ) = ( len F ) & (for n being Nat holds (n in ( dom F ) implies ( F . n ) = p))) implies (ex N being (Element of ( ExtREAL )) st (N = ( k + 1 ) & ( Sum F ) = ( N * p ))))))
proof
let F being (FinSequence of ( ExtREAL ));
let p being (Element of ( ExtREAL ));
assume that
A5: ( k + 1 ) = ( len F )
and
A6: (for n being Nat holds (n in ( dom F ) implies ( F . n ) = p));
F <> ( {} ) by A5;
then consider G being FinSequence,v being set such that A7: F = ( G ^ <* v *> ) by FINSEQ_1:46;
reconsider G as (FinSequence of ( ExtREAL )) by A7,FINSEQ_1:36;
A8: ( k + 1 ) = ( ( len G ) + ( len <* v *> ) ) by A5,A7,FINSEQ_1:22
.= ( ( len G ) + 1 ) by FINSEQ_1:39;
( dom <* v *> ) = ( Seg 1 ) by FINSEQ_1:38;
then A9: 1 in ( dom <* v *> ) by FINSEQ_1:2,TARSKI:def 1;
1 <= ( k + 1 ) by NAT_1:11;
then A10: ( k + 1 ) in ( dom F ) by A5,FINSEQ_3:25;
v = ( <* v *> . 1 ) by FINSEQ_1:40
.= ( F . ( k + 1 ) ) by A7,A8,A9,FINSEQ_1:def 7
.= p by A6,A10;
then reconsider v as (Element of ( ExtREAL ));
consider g being (Function of ( NAT ),( ExtREAL )) such that A11: ( Sum G ) = ( g . ( len G ) ) and A12: ( g . ( 0 ) ) = ( 0. ) and A13: (for i being (Element of ( NAT )) holds (i < ( len G ) implies ( g . ( i + 1 ) ) = ( ( g . i ) + ( G . ( i + 1 ) ) ))) by EXTREAL1:def 2;
(for n being Nat holds (n in ( dom G ) implies ( G . n ) = p))
proof
let n being Nat;
A14: ( len G ) <= ( ( len G ) + 1 ) by NAT_1:11;
assume A15: n in ( dom G );
then n <= ( len G ) by FINSEQ_3:25;
then A16: n <= ( ( len G ) + 1 ) by A14,XXREAL_0:2;
A17: ( len F ) = ( ( len G ) + ( len <* v *> ) ) by A7,FINSEQ_1:22
.= ( ( len G ) + 1 ) by FINSEQ_1:39;
1 <= n by A15,FINSEQ_3:25;
then n in ( dom F ) by A16,A17,FINSEQ_3:25;
then ( F . n ) = p by A6;
hence thesis by A7,A15,FINSEQ_1:def 7;
end;
then consider N1 being (Element of ( ExtREAL )) such that A18: N1 = k and A19: ( Sum G ) = ( N1 * p ) by A4,A8;
consider f being (Function of ( NAT ),( ExtREAL )) such that A20: ( Sum F ) = ( f . ( len F ) ) and A21: ( f . ( 0 ) ) = ( 0. ) and A22: (for i being (Element of ( NAT )) holds (i < ( len F ) implies ( f . ( i + 1 ) ) = ( ( f . i ) + ( F . ( i + 1 ) ) ))) by EXTREAL1:def 2;
A23: (for k1 being Nat holds (k1 <= ( len G ) implies ( f . k1 ) = ( g . k1 )))
proof
defpred P2[ Nat ]
 means
($1 <= ( len G ) implies ( f . $1 ) = ( g . $1 ));
A24: (for k1 being Nat holds (P2[ k1 ] implies P2[ ( k1 + 1 ) ]))
proof
let k1 being Nat;
assume A25: P2[ k1 ];
reconsider k1 as (Element of ( NAT )) by ORDINAL1:def 12;
now
assume A26: ( k1 + 1 ) <= ( len G );
then A27: k1 < ( len G ) by NAT_1:13;
( len F ) = ( ( len G ) + ( len <* v *> ) ) by A7,FINSEQ_1:22
.= ( ( len G ) + 1 ) by FINSEQ_1:39;
then k1 < ( len F ) by A27,NAT_1:13;
then A28: ( f . ( k1 + 1 ) ) = ( ( f . k1 ) + ( F . ( k1 + 1 ) ) ) by A22;
1 <= ( k1 + 1 ) by NAT_1:11;
then A29: ( k1 + 1 ) in ( dom G ) by A26,FINSEQ_3:25;
(k1 <= ( k1 + 1 ) & ( g . ( k1 + 1 ) ) = ( ( g . k1 ) + ( G . ( k1 + 1 ) ) )) by A13,A27,NAT_1:11;
hence thesis by A7,A25,A28,A29,FINSEQ_1:def 7,XXREAL_0:2;
end;
hence thesis;
end;
A30: P2[ ( 0 ) ] by A21,A12;
(for k1 being Nat holds P2[ k1 ]) from NAT_1:sch 2(A30,A24);
hence thesis;
end;
take ( N1 + ( 1. ) );
k < ( len F ) by A5,NAT_1:13;
then ( Sum F ) = ( ( f . k ) + ( F . ( k + 1 ) ) ) by A5,A20,A22
.= ( ( g . k ) + ( F . ( k + 1 ) ) ) by A8,A23;
then ( Sum F ) = ( ( Sum G ) + p ) by A6,A8,A10,A11
.= ( ( N1 * p ) + ( ( 1. ) * p ) ) by A19,XXREAL_3:81;
hence thesis by A18,SUPINF_2:1,XXREAL_3:96;
end;
hence thesis;
end;
(for F being (FinSequence of ( ExtREAL )) holds (for p being (Element of ( ExtREAL )) holds ((( 0 ) = ( len F ) & (for n being Nat holds (n in ( dom F ) implies ( F . n ) = p))) implies (ex N being (Element of ( ExtREAL )) st (N = ( 0 ) & ( Sum F ) = ( N * p ))))))
proof
let F being (FinSequence of ( ExtREAL ));
let p being (Element of ( ExtREAL ));
assume that
A31: ( 0 ) = ( len F )
and
(for n being Nat holds (n in ( dom F ) implies ( F . n ) = p));
take ( 0. );
(ex f being (Function of ( NAT ),( ExtREAL )) st ((( Sum F ) = ( f . ( len F ) ) & ( f . ( 0 ) ) = ( 0. )) & (for i being (Element of ( NAT )) holds (i < ( len F ) implies ( f . ( i + 1 ) ) = ( ( f . i ) + ( F . ( i + 1 ) ) ))))) by EXTREAL1:def 2;
hence thesis by A31;
end;
then A32: P[ ( 0 ) ];
(for k being Nat holds P[ k ]) from NAT_1:sch 2(A32,A3);
then (ex N9 being (Element of ( ExtREAL )) st (N9 = ( len a ) & ( Sum a ) = ( N9 * p ))) by A2;
hence thesis by A1;
end;
