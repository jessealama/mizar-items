environ
vocabularies NUMBERS,NAT_1,XREAL_0,ORDINAL1,SUBSET_1,FINSEQ_2,PRE_TOPC,EUCLID,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,XBOOLE_0,TARSKI,FUNCT_2,CARD_1,ARYTM_1,ARYTM_3,REAL_1,PARTFUN1,ZFMISC_1,ORDINAL2,XXREAL_0,RLVECT_1,RLSUB_1,STRUCT_0,SUPINF_2,ALGSTR_0,REALSET1,MONOID_0,FUNCT_7,AFINSQ_1,RFINSEQ2,CLASSES1,RVSUM_1,COMPLEX1,SQUARE_1,REWRITE1,SETFAM_1,CARD_3,ORDINAL4,MATRIXR2,BINOP_2,XCMPLX_0,REAL_NS1,VALUED_1,RLVECT_2,MATRIX_7,FUNCOP_1,FUNCSDOM,RLVECT_3,FINSET_1,RLVECT_5,EUCLID_7;
notations XBOOLE_0,TARSKI,RELAT_1,FUNCT_1,RVSUM_1,RELSET_1,PARTFUN1,CARD_1,FUNCT_2,FUNCT_3,ORDINAL1,CLASSES1,NUMBERS,XREAL_0,SUBSET_1,COMPLEX1,FINSEQ_1,FINSEQ_2,VALUED_0,VALUED_1,SEQ_1,FINSET_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCSDOM,MONOID_0,PRE_TOPC,BINOP_2,RLVECT_1,EUCLID,SQUARE_1,XXREAL_0,SETFAM_1,RLSUB_1,RLVECT_2,RLVECT_3,REAL_1,NAT_1,NAT_D,MATRIXR2,ZFMISC_1,RLVECT_5,REALSET1,MATRIX_7,RFINSEQ2,FINSEQ_7,RUSUB_3,REAL_NS1,DOMAIN_1,RUSUB_4,FUNCOP_1,CKB8,CKB10,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46,CKB48,CKB49,CKB54,CKB61,CKB63,CKB69;
definitions TARSKI,SQUARE_1,FINSEQ_2,RVSUM_1,VALUED_1,RLVECT_1,RLVECT_3,BINOP_1,STRUCT_0,MONOID_0,ALGSTR_0,XBOOLE_0,FUNCSDOM,EUCLID,CKB10,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46,CKB48,CKB49,CKB61,CKB63;
theorems EUCLID,RVSUM_1,FINSEQ_2,FINSEQ_1,RFUNCT_1,FINSEQ_3,SQUARE_1,ABSVALUE,JORDAN2C,XREAL_1,XXREAL_0,FUNCOP_1,XCMPLX_1,SUBSET_1,XBOOLE_0,XBOOLE_1,EUCLID_2,TARSKI,EUCLID_4,ORDINAL1,CARD_1,SETFAM_1,REAL_NS1,RLVECT_2,RLVECT_3,PARTFUN1,FUNCT_1,RLVECT_1,NAT_1,RLSUB_1,STRUCT_0,RELAT_1,REALSET1,FUNCT_2,MATRIXR2,BINOP_2,FINSOP_1,ZFMISC_1,FUNCT_3,FINSEQ_4,MATRPROB,MATRIX_7,RFINSEQ2,INTEGRA2,FINSEQ_7,INT_5,EUCLIDLP,RLVECT_5,RUSUB_1,RUSUB_3,RUSUB_4,RLVECT_4,VALUED_0,XREAL_0,VALUED_1,CLASSES1,RELSET_1,FUNCSDOM,EULER_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB23,CKB24,CKB28,CKB29,CKB30,CKB36,CKB37,CKB40,CKB41,CKB42,CKB44,CKB46,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB77;
schemes NAT_1,CLASSES1,FUNCT_2,FINSEQ_1;
registrations REALSET1,FUNCT_1,MONOID_0,RELSET_1,NUMBERS,XREAL_0,STRUCT_0,FINSET_1,XXREAL_0,CARD_1,NAT_1,MEMBERED,FINSEQ_2,EUCLID,VALUED_0,FUNCT_2,SUBSET_1,XBOOLE_0,REAL_NS1,FINSEQ_1,RELAT_1,ZFMISC_1,CKB7,CKB22,CKB25,CKB26,CKB27,CKB31,CKB32,CKB33,CKB34,CKB35,CKB38,CKB39,CKB43,CKB45,CKB47,CKB65,CKB66,CKB67,CKB68,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76;
constructors REAL_1,SQUARE_1,BINOP_2,MONOID_0,SEQ_1,SETFAM_1,RLVECT_2,RLVECT_3,REAL_NS1,FUNCT_3,REALSET1,MATRIXR2,RLVECT_5,FINSOP_1,MATRIX_7,RFINSEQ2,SETWISEO,FINSEQ_7,RUSUB_3,RUSUB_4,NAT_D,CLASSES1,FUNCSDOM,RELSET_1,CKB8,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46,CKB48,CKB49,CKB54,CKB61,CKB63;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve j for Nat;
reserve n for Nat;
reserve f for  real-valued FinSequence;
theorem
Th37: (for n being (Element of ( NAT )) holds (for f being (FinSequence of ( REAL n )) holds (for g being (FinSequence of (the carrier of ( REAL-US n ))) holds (f = g implies ( Sum f ) = ( Sum g )))))
proof
let n being (Element of ( NAT ));
let f being (FinSequence of ( REAL n ));
let g being (FinSequence of (the carrier of ( REAL-US n )));
set V = ( REAL-US n );
assume A1: f = g;
now
per cases ;
case A2: ( len f ) > ( 0 );
set g2 = ( accum f );
A3: ( len f ) = ( len g2 ) by CKB48:def 1;
A4: ( f . 1 ) = ( g2 . 1 ) by CKB48:def 1;
A5: ( Sum f ) = ( g2 . ( len f ) ) by A2,CKB49:def 1;
deffunc F(set) = ( IFIN ($1,( ( len f ) + 1 ),( IFEQ ($1,( 0 ),( 0. V ),( g2 /. $1 )) ),( 0. V )) );
A6: (for x being set holds (x in ( NAT ) implies F(x) in (the carrier of V)))
proof
let x being set;
assume x in ( NAT );
then reconsider nx = x as (Element of ( NAT ));
per cases ;
suppose nx in ( ( len f ) + 1 );

then A7: F(x) = ( IFEQ (x,( 0 ),( 0. V ),( g2 /. nx )) ) by MATRIX_7:def 1;
per cases ;
suppose x = ( 0 );

then F(x) = ( 0. V ) by A7,FUNCOP_1:def 8;
hence F(x) in (the carrier of V);
end;
suppose A8: x <> ( 0 );

A9: (the carrier of V) = ( REAL n ) by REAL_NS1:def 6;
F(x) = ( g2 /. nx ) by A7,A8,FUNCOP_1:def 8;
hence F(x) in (the carrier of V) by A9;
end;
end;
suppose (not nx in ( ( len f ) + 1 ));

then F(x) = ( 0. V ) by MATRIX_7:def 1;
hence F(x) in (the carrier of V);
end;
end;
consider f3 being (Function of ( NAT ),(the carrier of V)) such that A10: (for x being set holds (x in ( NAT ) implies ( f3 . x ) = F(x))) from FUNCT_2:sch 2(A6);
A11: (for j being (Element of ( NAT )) holds (for v being (Element of V) holds ((j < ( len g ) & v = ( g . ( j + 1 ) )) implies ( f3 . ( j + 1 ) ) = ( ( f3 . j ) + v ))))
proof
let j being (Element of ( NAT ));
let v being (Element of V);
assume that
A12: j < ( len g )
and
A13: v = ( g . ( j + 1 ) );
A14: ( j + 1 ) <= ( len f ) by A1,A12,NAT_1:13;
per cases ;
suppose A15: j = ( 0 );

then ( j + 1 ) < ( ( len f ) + 1 ) by A2,XREAL_1:6;
then A16: ( j + 1 ) in ( ( len f ) + 1 ) by NAT_1:44;
A17: ( 0 ) in ( ( len f ) + 1 ) by NAT_1:44;
A18: ( f3 . j ) = ( IFIN (j,( ( len f ) + 1 ),( IFEQ (j,( 0 ),( 0. V ),( g2 /. j )) ),( 0. V )) ) by A10
.= ( IFEQ (j,( 0 ),( 0. V ),( g2 /. j )) ) by A15,A17,MATRIX_7:def 1
.= ( 0. V ) by A15,FUNCOP_1:def 8;
thus ( f3 . ( j + 1 ) ) = ( IFIN (( j + 1 ),( ( len f ) + 1 ),( IFEQ (( j + 1 ),( 0 ),( 0. V ),( g2 /. ( j + 1 ) )) ),( 0. V )) ) by A10
.= ( IFEQ (( j + 1 ),( 0 ),( 0. V ),( g2 /. ( j + 1 ) )) ) by A16,MATRIX_7:def 1
.= ( g2 /. 1 ) by A15,FUNCOP_1:def 8
.= ( g . ( j + 1 ) ) by A1,A3,A4,A14,A15,FINSEQ_4:15
.= ( ( f3 . j ) + v ) by A13,A18,RLVECT_1:4;
end;
suppose A19: j <> ( 0 );

( len f ) < ( ( len f ) + 1 ) by XREAL_1:29;
then j < ( ( len f ) + 1 ) by A1,A12,XXREAL_0:2;
then A20: j in ( ( len f ) + 1 ) by NAT_1:44;
A21: ( f3 . j ) = ( IFIN (j,( ( len f ) + 1 ),( IFEQ (j,( 0 ),( 0. V ),( g2 /. j )) ),( 0. V )) ) by A10
.= ( IFEQ (j,( 0 ),( 0. V ),( g2 /. j )) ) by A20,MATRIX_7:def 1
.= ( g2 /. j ) by A19,FUNCOP_1:def 8;
A22: ( ( 0 ) + 1 ) <= ( j + 1 ) by NAT_1:13;
A23: ( ( 0 ) + 1 ) <= j by A19,NAT_1:13;
( j + 1 ) < ( ( len f ) + 1 ) by A1,A12,XREAL_1:6;
then A24: ( j + 1 ) in ( ( len f ) + 1 ) by NAT_1:44;
thus ( f3 . ( j + 1 ) ) = ( IFIN (( j + 1 ),( ( len f ) + 1 ),( IFEQ (( j + 1 ),( 0 ),( 0. V ),( g2 /. ( j + 1 ) )) ),( 0. V )) ) by A10
.= ( IFEQ (( j + 1 ),( 0 ),( 0. V ),( g2 /. ( j + 1 ) )) ) by A24,MATRIX_7:def 1
.= ( g2 /. ( j + 1 ) ) by FUNCOP_1:def 8
.= ( g2 . ( j + 1 ) ) by A3,A14,A22,FINSEQ_4:15
.= ( ( g2 /. j ) + ( f /. ( j + 1 ) ) ) by A1,CKB48:def 1,A12,A23
.= ( ( f3 . j ) + v ) by A1,A13,A14,A22,A21,FINSEQ_4:15;
end;
end;
( len f ) < ( ( len f ) + 1 ) by XREAL_1:29;
then A25: ( len f ) in ( ( len f ) + 1 ) by NAT_1:44;
A26: ( ( 0 ) + 1 ) <= ( len f ) by A2,NAT_1:13;
A27: ( 0 ) in ( ( len f ) + 1 ) by NAT_1:44;
A28: ( f3 . ( 0 ) ) = ( IFIN (( 0 ),( ( len f ) + 1 ),( IFEQ (( 0 ),( 0 ),( 0. V ),( g2 /. ( 0 ) )) ),( 0. V )) ) by A10
.= ( IFEQ (( 0 ),( 0 ),( 0. V ),( g2 /. ( 0 ) )) ) by A27,MATRIX_7:def 1
.= ( 0. V ) by FUNCOP_1:def 8;
( f3 . ( len g ) ) = F(( len f )) by A1,A10
.= ( IFEQ (( len f ),( 0 ),( 0. V ),( g2 /. ( len f ) )) ) by A25,MATRIX_7:def 1
.= ( g2 /. ( len f ) ) by A2,FUNCOP_1:def 8
.= ( Sum f ) by A3,A5,A26,FINSEQ_4:15;
hence (ex f2 being (Function of ( NAT ),(the carrier of V)) st ((( Sum f ) = ( f2 . ( len g ) ) & ( f2 . ( 0 ) ) = ( 0. V )) & (for j being (Element of ( NAT )) holds (for v being (Element of V) holds ((j < ( len g ) & v = ( g . ( j + 1 ) )) implies ( f2 . ( j + 1 ) ) = ( ( f2 . j ) + v )))))) by A28,A11;
end;
case A29: ( len f ) <= ( 0 );
set f3 = ( ( NAT ) --> ( 0. V ) );
A30: (for j being (Element of ( NAT )) holds (for v being (Element of V) holds ((j < ( len g ) & v = ( g . ( j + 1 ) )) implies ( f3 . ( j + 1 ) ) = ( ( f3 . j ) + v )))) by A1,A29;
A31: ( f3 . ( len g ) ) = ( 0. V ) by FUNCOP_1:7
.= ( 0* n ) by REAL_NS1:def 6;
A32: ( f3 . ( 0 ) ) = ( 0. V ) by FUNCOP_1:7;
( Sum f ) = ( 0* n ) by A29,CKB49:def 1;
hence (ex f2 being (Function of ( NAT ),(the carrier of V)) st ((( Sum f ) = ( f2 . ( len g ) ) & ( f2 . ( 0 ) ) = ( 0. V )) & (for j being (Element of ( NAT )) holds (for v being (Element of V) holds ((j < ( len g ) & v = ( g . ( j + 1 ) )) implies ( f2 . ( j + 1 ) ) = ( ( f2 . j ) + v )))))) by A31,A32,A30;
end;
end;
hence ( Sum f ) = ( Sum g ) by RLVECT_1:def 12;
end;
