environ
vocabularies NUMBERS,NAT_1,XREAL_0,ORDINAL1,SUBSET_1,FINSEQ_2,PRE_TOPC,EUCLID,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,XBOOLE_0,TARSKI,FUNCT_2,CARD_1,ARYTM_1,ARYTM_3,REAL_1,PARTFUN1,ZFMISC_1,ORDINAL2,XXREAL_0,RLVECT_1,RLSUB_1,STRUCT_0,SUPINF_2,ALGSTR_0,REALSET1,MONOID_0,FUNCT_7,AFINSQ_1,RFINSEQ2,CLASSES1,RVSUM_1,COMPLEX1,SQUARE_1,REWRITE1,SETFAM_1,CARD_3,ORDINAL4,MATRIXR2,BINOP_2,XCMPLX_0,REAL_NS1,VALUED_1,RLVECT_2,MATRIX_7,FUNCOP_1,FUNCSDOM,RLVECT_3,FINSET_1,RLVECT_5,EUCLID_7;
notations XBOOLE_0,TARSKI,RELAT_1,FUNCT_1,RVSUM_1,RELSET_1,PARTFUN1,CARD_1,FUNCT_2,FUNCT_3,ORDINAL1,CLASSES1,NUMBERS,XREAL_0,SUBSET_1,COMPLEX1,FINSEQ_1,FINSEQ_2,VALUED_0,VALUED_1,SEQ_1,FINSET_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCSDOM,MONOID_0,PRE_TOPC,BINOP_2,RLVECT_1,EUCLID,SQUARE_1,XXREAL_0,SETFAM_1,RLSUB_1,RLVECT_2,RLVECT_3,REAL_1,NAT_1,NAT_D,MATRIXR2,ZFMISC_1,RLVECT_5,REALSET1,MATRIX_7,RFINSEQ2,FINSEQ_7,RUSUB_3,REAL_NS1,DOMAIN_1,RUSUB_4,FUNCOP_1,CKB8,CKB10,CKB15;
definitions TARSKI,SQUARE_1,FINSEQ_2,RVSUM_1,VALUED_1,RLVECT_1,RLVECT_3,BINOP_1,STRUCT_0,MONOID_0,ALGSTR_0,XBOOLE_0,FUNCSDOM,EUCLID,CKB10,CKB15;
theorems EUCLID,RVSUM_1,FINSEQ_2,FINSEQ_1,RFUNCT_1,FINSEQ_3,SQUARE_1,ABSVALUE,JORDAN2C,XREAL_1,XXREAL_0,FUNCOP_1,XCMPLX_1,SUBSET_1,XBOOLE_0,XBOOLE_1,EUCLID_2,TARSKI,EUCLID_4,ORDINAL1,CARD_1,SETFAM_1,REAL_NS1,RLVECT_2,RLVECT_3,PARTFUN1,FUNCT_1,RLVECT_1,NAT_1,RLSUB_1,STRUCT_0,RELAT_1,REALSET1,FUNCT_2,MATRIXR2,BINOP_2,FINSOP_1,ZFMISC_1,FUNCT_3,FINSEQ_4,MATRPROB,MATRIX_7,RFINSEQ2,INTEGRA2,FINSEQ_7,INT_5,EUCLIDLP,RLVECT_5,RUSUB_1,RUSUB_3,RUSUB_4,RLVECT_4,VALUED_0,XREAL_0,VALUED_1,CLASSES1,RELSET_1,FUNCSDOM,EULER_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes NAT_1,CLASSES1,FUNCT_2,FINSEQ_1;
registrations REALSET1,FUNCT_1,MONOID_0,RELSET_1,NUMBERS,XREAL_0,STRUCT_0,FINSET_1,XXREAL_0,CARD_1,NAT_1,MEMBERED,FINSEQ_2,EUCLID,VALUED_0,FUNCT_2,SUBSET_1,XBOOLE_0,REAL_NS1,FINSEQ_1,RELAT_1,ZFMISC_1,CKB7;
constructors REAL_1,SQUARE_1,BINOP_2,MONOID_0,SEQ_1,SETFAM_1,RLVECT_2,RLVECT_3,REAL_NS1,FUNCT_3,REALSET1,MATRIXR2,RLVECT_5,FINSOP_1,MATRIX_7,RFINSEQ2,SETWISEO,FINSEQ_7,RUSUB_3,RUSUB_4,NAT_D,CLASSES1,FUNCSDOM,RELSET_1,CKB8,CKB15;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve i for Nat;
theorem
Th15: (for h being (FinSequence of ( NAT )) holds (h is  one-to-one implies (ex h3 being (Permutation of ( dom h )) st (ex h2 being (FinSequence of ( NAT )) st (((h2 = ( h * h3 ) & h2 is  increasing) & ( dom h ) = ( dom h2 )) & ( rng h ) = ( rng h2 ))))))
proof
let h being (FinSequence of ( NAT ));
assume A1: h is  one-to-one;
per cases ;
suppose A2: ( dom h ) <> ( {} );

( rng h ) c= ( REAL ) by XBOOLE_1:1;
then reconsider hr = h as (FinSequence of ( REAL )) by FINSEQ_1:def 4;
A3: hr,( sort_a hr ) are_fiberwise_equipotent  by RFINSEQ2:def 6;
then consider H being Function such that A4: ( dom H ) = ( dom ( sort_a hr ) ) and A5: ( rng H ) = ( dom hr ) and A6: H is  one-to-one and A7: ( sort_a hr ) = ( hr * H ) by CLASSES1:77;
( rng ( sort_a hr ) ) = ( rng hr ) by A3,CLASSES1:75;
then reconsider h4 = ( sort_a hr ) as (FinSequence of ( NAT )) by FINSEQ_1:def 4;
A8: ( rng h ) = ( rng h4 ) by A5,A7,RELAT_1:28;
A9: ( dom h4 ) = ( Seg ( len h4 ) ) by FINSEQ_1:def 3;
(for i being Nat holds ((1 <= i & i < ( len h4 )) implies ( h4 . i ) < ( h4 . ( i + 1 ) )))
proof
let i being Nat;
assume that
A10: 1 <= i
and
A11: i < ( len h4 );
A12: ( i + 1 ) <= ( len h4 ) by A11,NAT_1:13;
A13: i in ( dom h4 ) by A9,A10,A11,FINSEQ_1:1;
1 < ( i + 1 ) by A10,XREAL_1:29;
then A14: ( i + 1 ) in ( dom h4 ) by A9,A12,FINSEQ_1:1;
A15: h4 is  one-to-one by A1,CKB19:1;
A16:now
assume ( h4 . i ) = ( h4 . ( i + 1 ) );
then i = ( i + 1 ) by A14,A13,A15,FUNCT_1:def 4;
hence contradiction;
end;
( h4 . i ) <= ( h4 . ( i + 1 ) ) by A14,A13,INTEGRA2:def 1;
hence ( h4 . i ) < ( h4 . ( i + 1 ) ) by A16,XXREAL_0:1;
end;
then A17: h4 is  increasing by CKB10:def 1;
( dom ( sort_a hr ) ) = ( dom hr ) by RFINSEQ2:31;
then reconsider H2 = H as (Function of ( dom h ),( dom h )) by A4,A5,FUNCT_2:1;
H2 is  onto by A5,FUNCT_2:def 3;
then reconsider h5 = H as (Permutation of ( dom h )) by A6;
A18: h4 = ( h * h5 ) by A7;
( dom h ) = ( dom h5 ) by A2,FUNCT_2:def 1
.= ( dom h4 ) by A4;
hence thesis by A18,A17,A8;
end;
suppose A19: ( dom h ) = ( {} );

then ( rng h ) = ( {} ) by RELAT_1:42;
then reconsider h5 = h as (Function of ( {} ),( {} )) by A19,FUNCT_2:1;
reconsider h22 = ( h * h5 ) as (FinSequence of ( NAT ));
h22 is  increasing;
hence thesis by A19,CKB17:1;
end;
end;
