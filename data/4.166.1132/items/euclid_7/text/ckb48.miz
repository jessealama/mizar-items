environ
vocabularies NUMBERS,NAT_1,XREAL_0,ORDINAL1,SUBSET_1,FINSEQ_2,PRE_TOPC,EUCLID,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,XBOOLE_0,TARSKI,FUNCT_2,CARD_1,ARYTM_1,ARYTM_3,REAL_1,PARTFUN1,ZFMISC_1,ORDINAL2,XXREAL_0,RLVECT_1,RLSUB_1,STRUCT_0,SUPINF_2,ALGSTR_0,REALSET1,MONOID_0,FUNCT_7,AFINSQ_1,RFINSEQ2,CLASSES1,RVSUM_1,COMPLEX1,SQUARE_1,REWRITE1,SETFAM_1,CARD_3,ORDINAL4,MATRIXR2,BINOP_2,XCMPLX_0,REAL_NS1,VALUED_1,RLVECT_2,MATRIX_7,FUNCOP_1,FUNCSDOM,RLVECT_3,FINSET_1,RLVECT_5,EUCLID_7;
notations XBOOLE_0,TARSKI,RELAT_1,FUNCT_1,RVSUM_1,RELSET_1,PARTFUN1,CARD_1,FUNCT_2,FUNCT_3,ORDINAL1,CLASSES1,NUMBERS,XREAL_0,SUBSET_1,COMPLEX1,FINSEQ_1,FINSEQ_2,VALUED_0,VALUED_1,SEQ_1,FINSET_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCSDOM,MONOID_0,PRE_TOPC,BINOP_2,RLVECT_1,EUCLID,SQUARE_1,XXREAL_0,SETFAM_1,RLSUB_1,RLVECT_2,RLVECT_3,REAL_1,NAT_1,NAT_D,MATRIXR2,ZFMISC_1,RLVECT_5,REALSET1,MATRIX_7,RFINSEQ2,FINSEQ_7,RUSUB_3,REAL_NS1,DOMAIN_1,RUSUB_4,FUNCOP_1,CKB8,CKB10,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46;
definitions TARSKI,SQUARE_1,FINSEQ_2,RVSUM_1,VALUED_1,RLVECT_1,RLVECT_3,BINOP_1,STRUCT_0,MONOID_0,ALGSTR_0,XBOOLE_0,FUNCSDOM,EUCLID,CKB10,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46;
theorems EUCLID,RVSUM_1,FINSEQ_2,FINSEQ_1,RFUNCT_1,FINSEQ_3,SQUARE_1,ABSVALUE,JORDAN2C,XREAL_1,XXREAL_0,FUNCOP_1,XCMPLX_1,SUBSET_1,XBOOLE_0,XBOOLE_1,EUCLID_2,TARSKI,EUCLID_4,ORDINAL1,CARD_1,SETFAM_1,REAL_NS1,RLVECT_2,RLVECT_3,PARTFUN1,FUNCT_1,RLVECT_1,NAT_1,RLSUB_1,STRUCT_0,RELAT_1,REALSET1,FUNCT_2,MATRIXR2,BINOP_2,FINSOP_1,ZFMISC_1,FUNCT_3,FINSEQ_4,MATRPROB,MATRIX_7,RFINSEQ2,INTEGRA2,FINSEQ_7,INT_5,EUCLIDLP,RLVECT_5,RUSUB_1,RUSUB_3,RUSUB_4,RLVECT_4,VALUED_0,XREAL_0,VALUED_1,CLASSES1,RELSET_1,FUNCSDOM,EULER_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB23,CKB24,CKB28,CKB29,CKB30,CKB36,CKB37,CKB40,CKB41,CKB42,CKB44,CKB46;
schemes NAT_1,CLASSES1,FUNCT_2,FINSEQ_1;
registrations REALSET1,FUNCT_1,MONOID_0,RELSET_1,NUMBERS,XREAL_0,STRUCT_0,FINSET_1,XXREAL_0,CARD_1,NAT_1,MEMBERED,FINSEQ_2,EUCLID,VALUED_0,FUNCT_2,SUBSET_1,XBOOLE_0,REAL_NS1,FINSEQ_1,RELAT_1,ZFMISC_1,CKB7,CKB22,CKB25,CKB26,CKB27,CKB31,CKB32,CKB33,CKB34,CKB35,CKB38,CKB39,CKB43,CKB45,CKB47;
constructors REAL_1,SQUARE_1,BINOP_2,MONOID_0,SEQ_1,SETFAM_1,RLVECT_2,RLVECT_3,REAL_NS1,FUNCT_3,REALSET1,MATRIXR2,RLVECT_5,FINSOP_1,MATRIX_7,RFINSEQ2,SETWISEO,FINSEQ_7,RUSUB_3,RUSUB_4,NAT_D,CLASSES1,FUNCSDOM,RELSET_1,CKB8,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve i for Nat;
reserve n for Nat;
reserve f for  real-valued FinSequence;
definition
let n being Nat;
let f being (FinSequence of ( REAL n ));
func accum f -> (FinSequence of ( REAL n )) means 
:Def10: ((( len f ) = ( len it ) & ( f . 1 ) = ( it . 1 )) & (for i being Nat holds ((1 <= i & i < ( len f )) implies ( it . ( i + 1 ) ) = ( ( it /. i ) + ( f /. ( i + 1 ) ) ))));
existence
proof
per cases ;
suppose A1: ( len f ) > ( 0 );

reconsider q = <* ( f /. 1 ) *> as (FinSequence of ( REAL n ));
A2: ( ( 0 ) + 1 ) <= ( len f ) by A1,NAT_1:13;
then ( f /. 1 ) = ( f . 1 ) by FINSEQ_4:15;
then A3: ( q . 1 ) = ( f . 1 ) by FINSEQ_1:40;
defpred P[ Nat ]
 means
(( $1 + 1 ) <= ( len f ) implies (ex g being (FinSequence of ( REAL n )) st ((( $1 + 1 ) = ( len g ) & ( f . 1 ) = ( g . 1 )) & (for i being Nat holds ((1 <= i & i < ( $1 + 1 )) implies ( g . ( i + 1 ) ) = ( ( g /. i ) + ( f /. ( i + 1 ) ) ))))));
A4: (for i being Nat holds ((1 <= i & i < ( ( 0 ) + 1 )) implies ( q . ( i + 1 ) ) = ( ( q /. i ) + ( f /. ( i + 1 ) ) )));
A5: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume A6: P[ k ];
now
per cases ;
case A7: ( ( k + 1 ) + 1 ) <= ( len f );
( k + 1 ) < ( ( k + 1 ) + 1 ) by XREAL_1:29;
then consider g being (FinSequence of ( REAL n )) such that A8: ( k + 1 ) = ( len g ) and A9: ( f . 1 ) = ( g . 1 ) and A10: (for i being Nat holds ((1 <= i & i < ( k + 1 )) implies ( g . ( i + 1 ) ) = ( ( g /. i ) + ( f /. ( i + 1 ) ) ))) by A6,A7,XXREAL_0:2;
reconsider g2 = ( g ^ <* ( ( g /. ( k + 1 ) ) + ( f /. ( ( k + 1 ) + 1 ) ) ) *> ) as (FinSequence of ( REAL n ));
A11: ( Seg ( len g ) ) = ( dom g ) by FINSEQ_1:def 3;
A12: ( len g2 ) = ( ( len g ) + ( len <* ( ( g /. ( k + 1 ) ) + ( f /. ( ( k + 1 ) + 1 ) ) ) *> ) ) by FINSEQ_1:22
.= ( ( k + 1 ) + 1 ) by A8,FINSEQ_1:40;
A13: (for i being Nat holds ((1 <= i & i < ( ( k + 1 ) + 1 )) implies ( g2 . ( i + 1 ) ) = ( ( g2 /. i ) + ( f /. ( i + 1 ) ) )))
proof
let i being Nat;
assume that
A14: 1 <= i
and
A15: i < ( ( k + 1 ) + 1 );
A16: i <= ( k + 1 ) by A15,NAT_1:13;
per cases  by A16,XXREAL_0:1;
suppose A17: i < ( k + 1 );

A18: 1 <= ( i + 1 ) by NAT_1:12;
( i + 1 ) <= ( k + 1 ) by A17,NAT_1:13;
then ( i + 1 ) in ( Seg ( len g ) ) by A8,A18,FINSEQ_1:1;
then A19: ( g2 . ( i + 1 ) ) = ( g . ( i + 1 ) ) by A11,FINSEQ_1:def 7;
i in ( Seg ( len g ) ) by A8,A14,A16,FINSEQ_1:1;
then A20: ( g2 . i ) = ( g . i ) by A11,FINSEQ_1:def 7;
A21: ( g /. i ) = ( g . i ) by A8,A14,A17,FINSEQ_4:15;
( g2 /. i ) = ( g2 . i ) by A12,A14,A15,FINSEQ_4:15;
hence thesis by A10,A14,A17,A19,A20,A21;
end;
suppose A22: i = ( k + 1 );

A23: ( g2 /. i ) = ( g2 . i ) by A12,A14,A15,FINSEQ_4:15;
i in ( Seg ( len g ) ) by A8,A14,A16,FINSEQ_1:1;
then A24: ( g . i ) = ( g2 . i ) by A11,FINSEQ_1:def 7;
( g /. i ) = ( g . i ) by A8,A14,A16,FINSEQ_4:15;
hence thesis by A8,A22,A24,A23,FINSEQ_1:42;
end;
end;
1 <= ( k + 1 ) by NAT_1:11;
then 1 in ( Seg ( len g ) ) by A8,FINSEQ_1:1;
then ( g2 . 1 ) = ( f . 1 ) by A9,A11,FINSEQ_1:def 7;
hence P[ ( k + 1 ) ] by A12,A13;
end;
case ( ( k + 1 ) + 1 ) > ( len f );
hence P[ ( k + 1 ) ];
end;
end;
hence P[ ( k + 1 ) ];
end;
( ( len f ) -' 1 ) = ( ( len f ) - 1 ) by A2,XREAL_1:233;
then A25: ( ( ( len f ) -' 1 ) + 1 ) = ( len f );
( len q ) = 1 by FINSEQ_1:40;
then A26: P[ ( 0 ) ] by A3,A4;
(for k being Nat holds P[ k ]) from NAT_1:sch 2(A26,A5);
hence thesis by A25;
end;
suppose A27: ( len f ) <= ( 0 );

take f;
thus (( len f ) = ( len f ) & ( f . 1 ) = ( f . 1 ));
let i being Nat;
thus thesis by A27;
end;
end;
uniqueness
proof
let g1 being (FinSequence of ( REAL n ));
let g2 being (FinSequence of ( REAL n ));
assume that
A28: ( len f ) = ( len g1 )
and
A29: ( f . 1 ) = ( g1 . 1 )
and
A30: (for i being Nat holds ((1 <= i & i < ( len f )) implies ( g1 . ( i + 1 ) ) = ( ( g1 /. i ) + ( f /. ( i + 1 ) ) )));
defpred P[ Nat ]
 means
((1 <= $1 & $1 <= ( len f )) implies ( g1 . $1 ) = ( g2 . $1 ));
assume that
A31: ( len f ) = ( len g2 )
and
A32: ( f . 1 ) = ( g2 . 1 )
and
A33: (for i being Nat holds ((1 <= i & i < ( len f )) implies ( g2 . ( i + 1 ) ) = ( ( g2 /. i ) + ( f /. ( i + 1 ) ) )));
A34: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume A35: P[ k ];
((1 <= ( k + 1 ) & ( k + 1 ) <= ( len f )) implies ( g1 . ( k + 1 ) ) = ( g2 . ( k + 1 ) ))
proof
assume that
1 <= ( k + 1 )
and
A36: ( k + 1 ) <= ( len f );
A37: k < ( k + 1 ) by XREAL_1:29;
then A38: k < ( len f ) by A36,XXREAL_0:2;
per cases ;
suppose A39: 1 <= k;

then A40: ( g2 . ( k + 1 ) ) = ( ( g2 /. k ) + ( f /. ( k + 1 ) ) ) by A33,A38;
A41: k <= ( len g2 ) by A31,A36,A37,XXREAL_0:2;
A42: ( g1 /. k ) = ( g1 . k ) by A28,A38,A39,FINSEQ_4:15;
( g1 . ( k + 1 ) ) = ( ( g1 /. k ) + ( f /. ( k + 1 ) ) ) by A30,A38,A39;
hence thesis by A35,A36,A37,A39,A40,A42,A41,FINSEQ_4:15,XXREAL_0:2;
end;
suppose 1 > k;

then ( ( 0 ) + 1 ) > k;
then k = ( 0 ) by NAT_1:13;
hence ( g1 . ( k + 1 ) ) = ( g2 . ( k + 1 ) ) by A29,A32;
end;
end;
hence P[ ( k + 1 ) ];
end;
A43: P[ ( 0 ) ];
(for k being Nat holds P[ k ]) from NAT_1:sch 2(A43,A34);
hence g1 = g2 by A28,A31,FINSEQ_1:14;
end;
end;
