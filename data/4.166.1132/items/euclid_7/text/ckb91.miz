environ
vocabularies NUMBERS,NAT_1,XREAL_0,ORDINAL1,SUBSET_1,FINSEQ_2,PRE_TOPC,EUCLID,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,XBOOLE_0,TARSKI,FUNCT_2,CARD_1,ARYTM_1,ARYTM_3,REAL_1,PARTFUN1,ZFMISC_1,ORDINAL2,XXREAL_0,RLVECT_1,RLSUB_1,STRUCT_0,SUPINF_2,ALGSTR_0,REALSET1,MONOID_0,FUNCT_7,AFINSQ_1,RFINSEQ2,CLASSES1,RVSUM_1,COMPLEX1,SQUARE_1,REWRITE1,SETFAM_1,CARD_3,ORDINAL4,MATRIXR2,BINOP_2,XCMPLX_0,REAL_NS1,VALUED_1,RLVECT_2,MATRIX_7,FUNCOP_1,FUNCSDOM,RLVECT_3,FINSET_1,RLVECT_5,EUCLID_7;
notations XBOOLE_0,TARSKI,RELAT_1,FUNCT_1,RVSUM_1,RELSET_1,PARTFUN1,CARD_1,FUNCT_2,FUNCT_3,ORDINAL1,CLASSES1,NUMBERS,XREAL_0,SUBSET_1,COMPLEX1,FINSEQ_1,FINSEQ_2,VALUED_0,VALUED_1,SEQ_1,FINSET_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCSDOM,MONOID_0,PRE_TOPC,BINOP_2,RLVECT_1,EUCLID,SQUARE_1,XXREAL_0,SETFAM_1,RLSUB_1,RLVECT_2,RLVECT_3,REAL_1,NAT_1,NAT_D,MATRIXR2,ZFMISC_1,RLVECT_5,REALSET1,MATRIX_7,RFINSEQ2,FINSEQ_7,RUSUB_3,REAL_NS1,DOMAIN_1,RUSUB_4,FUNCOP_1,CKB8,CKB10,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46,CKB48,CKB49,CKB54,CKB61,CKB63,CKB69;
definitions TARSKI,SQUARE_1,FINSEQ_2,RVSUM_1,VALUED_1,RLVECT_1,RLVECT_3,BINOP_1,STRUCT_0,MONOID_0,ALGSTR_0,XBOOLE_0,FUNCSDOM,EUCLID,CKB10,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46,CKB48,CKB49,CKB61,CKB63;
theorems EUCLID,RVSUM_1,FINSEQ_2,FINSEQ_1,RFUNCT_1,FINSEQ_3,SQUARE_1,ABSVALUE,JORDAN2C,XREAL_1,XXREAL_0,FUNCOP_1,XCMPLX_1,SUBSET_1,XBOOLE_0,XBOOLE_1,EUCLID_2,TARSKI,EUCLID_4,ORDINAL1,CARD_1,SETFAM_1,REAL_NS1,RLVECT_2,RLVECT_3,PARTFUN1,FUNCT_1,RLVECT_1,NAT_1,RLSUB_1,STRUCT_0,RELAT_1,REALSET1,FUNCT_2,MATRIXR2,BINOP_2,FINSOP_1,ZFMISC_1,FUNCT_3,FINSEQ_4,MATRPROB,MATRIX_7,RFINSEQ2,INTEGRA2,FINSEQ_7,INT_5,EUCLIDLP,RLVECT_5,RUSUB_1,RUSUB_3,RUSUB_4,RLVECT_4,VALUED_0,XREAL_0,VALUED_1,CLASSES1,RELSET_1,FUNCSDOM,EULER_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB23,CKB24,CKB28,CKB29,CKB30,CKB36,CKB37,CKB40,CKB41,CKB42,CKB44,CKB46,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB77,CKB78,CKB86,CKB87,CKB88,CKB89,CKB90;
schemes NAT_1,CLASSES1,FUNCT_2,FINSEQ_1;
registrations REALSET1,FUNCT_1,MONOID_0,RELSET_1,NUMBERS,XREAL_0,STRUCT_0,FINSET_1,XXREAL_0,CARD_1,NAT_1,MEMBERED,FINSEQ_2,EUCLID,VALUED_0,FUNCT_2,SUBSET_1,XBOOLE_0,REAL_NS1,FINSEQ_1,RELAT_1,ZFMISC_1,CKB7,CKB22,CKB25,CKB26,CKB27,CKB31,CKB32,CKB33,CKB34,CKB35,CKB38,CKB39,CKB43,CKB45,CKB47,CKB65,CKB66,CKB67,CKB68,CKB70,CKB71,CKB72,CKB79,CKB80,CKB81,CKB73,CKB74,CKB75,CKB76,CKB82,CKB83,CKB84,CKB85;
constructors REAL_1,SQUARE_1,BINOP_2,MONOID_0,SEQ_1,SETFAM_1,RLVECT_2,RLVECT_3,REAL_NS1,FUNCT_3,REALSET1,MATRIXR2,RLVECT_5,FINSOP_1,MATRIX_7,RFINSEQ2,SETWISEO,FINSEQ_7,RUSUB_3,RUSUB_4,NAT_D,CLASSES1,FUNCSDOM,RELSET_1,CKB8,CKB15,CKB21,CKB24,CKB30,CKB36,CKB37,CKB42,CKB46,CKB48,CKB49,CKB54,CKB61,CKB63;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve i for Nat;
reserve j for Nat;
reserve n for Nat;
reserve f for  real-valued FinSequence;
theorem
Th42: (for F being (FinSequence of (the carrier of ( RealVectSpace ( Seg n ) ))) holds (for Bn being (Subset of ( RealVectSpace ( Seg n ) )) holds (for v0 being (Element of ( RealVectSpace ( Seg n ) )) holds (for l being (Linear_Combination of Bn) holds ((((((F is  one-to-one & Bn is  R-orthogonal) & ( rng F ) = ( Carrier l )) & v0 in Bn) & j in ( dom ( l (#) F ) )) & v0 = ( F . j )) implies ( ( Euclid_scalar n ) . (v0,( Sum ( l (#) F ) )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ))))))
proof
let F being (FinSequence of (the carrier of ( RealVectSpace ( Seg n ) )));
let Bn being (Subset of ( RealVectSpace ( Seg n ) ));
let v0 being (Element of ( RealVectSpace ( Seg n ) ));
let l being (Linear_Combination of Bn);
assume that
A1: F is  one-to-one
and
A2: Bn is  R-orthogonal
and
A3: ( rng F ) = ( Carrier l )
and
A4: v0 in Bn
and
A5: j in ( dom ( l (#) F ) )
and
A6: v0 = ( F . j );
A7: ( len ( l (#) F ) ) = ( len F ) by RLVECT_2:def 7;
then A8: ( dom ( l (#) F ) ) = ( Seg ( len F ) ) by FINSEQ_1:def 3
.= ( dom F ) by FINSEQ_1:def 3;
reconsider F2 = ( l (#) F ) as (FinSequence of (the carrier of ( RealVectSpace ( Seg n ) )));
reconsider rv0 = v0 as (Element of ( REAL n )) by FINSEQ_2:93;
consider f being (Function of ( NAT ),(the carrier of ( RealVectSpace ( Seg n ) ))) such that A9: ( Sum F2 ) = ( f . ( len F2 ) ) and A10: ( f . ( 0 ) ) = ( 0. ( RealVectSpace ( Seg n ) ) ) and A11: (for j2 being (Element of ( NAT )) holds (for v being (Element of ( RealVectSpace ( Seg n ) )) holds ((j2 < ( len F2 ) & v = ( F2 . ( j2 + 1 ) )) implies ( f . ( j2 + 1 ) ) = ( ( f . j2 ) + v )))) by RLVECT_1:def 12;
defpred Q[ Nat ]
 means
(($1 >= j & $1 <= ( len F )) implies ( ( Euclid_scalar n ) . (v0,( f . $1 )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ));
defpred P[ Nat ]
 means
($1 < j implies ( ( Euclid_scalar n ) . (v0,( f . $1 )) ) = ( 0 ));
( ( Euclid_scalar n ) . (v0,( f . ( 0 ) )) ) = |( rv0,( 0* n ) )| by A10,REAL_NS1:def 5
.= ( 0 ) by EUCLID_4:18;
then A12: P[ ( 0 ) ];
A13: ( dom ( l (#) F ) ) = ( Seg ( len ( l (#) F ) ) ) by FINSEQ_1:def 3;
then A14: j <= ( len F ) by A5,A7,FINSEQ_1:1;
A15: ( Carrier l ) c= Bn by RLVECT_2:def 6;
A16: (for k being (Element of ( NAT )) holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
assume A17: P[ k ];
now
per cases ;
case A18: k < ( len F2 );
A19: 1 <= ( k + 1 ) by NAT_1:11;
( k + 1 ) <= ( len F2 ) by A18,NAT_1:13;
then ( k + 1 ) in ( Seg ( len F2 ) ) by A19,FINSEQ_1:1;
then ( k + 1 ) in ( dom F2 ) by FINSEQ_1:def 3;
then ( F2 . ( k + 1 ) ) in ( rng F2 ) by FUNCT_1:def 3;
then reconsider v = ( F2 . ( k + 1 ) ) as (Element of ( RealVectSpace ( Seg n ) ));
reconsider rv = v as (Element of ( REAL n )) by FINSEQ_2:93;
reconsider fk = ( f . k ) as (Element of ( REAL n )) by FINSEQ_2:93;
per cases ;
suppose A20: ( k + 1 ) < j;

A21: 1 <= ( k + 1 ) by NAT_1:11;
( k + 1 ) < ( len F ) by A14,A20,XXREAL_0:2;
then ( k + 1 ) in ( Seg ( len F ) ) by A21,FINSEQ_1:1;
then A22: ( k + 1 ) in ( dom F ) by FINSEQ_1:def 3;
then A23: ( F /. ( k + 1 ) ) = ( F . ( k + 1 ) ) by PARTFUN1:def 6;
then A24: rv0 <> ( F /. ( k + 1 ) ) by A1,A5,A6,A8,A20,A22,FUNCT_1:def 4;
k < ( k + 1 ) by XREAL_1:29;
then A25: |( rv0,fk )| = ( 0 ) by A17,A20,REAL_NS1:def 5,XXREAL_0:2;
reconsider fk1 = ( F /. ( k + 1 ) ) as (Element of ( REAL n )) by FINSEQ_2:93;
A26: |( rv0,( fk + rv ) )| = ( |( rv0,fk )| + |( rv0,rv )| ) by EUCLID_4:28;
A27: ( F /. ( k + 1 ) ) in ( rng F ) by A22,A23,FUNCT_1:def 3;
v = ( ( l . ( F /. ( k + 1 ) ) ) * ( F /. ( k + 1 ) ) ) by A8,A22,RLVECT_2:def 7;
then |( rv0,rv )| = ( ( l . ( F /. ( k + 1 ) ) ) * |( rv0,fk1 )| ) by EUCLID_4:22
.= ( ( l . ( F /. ( k + 1 ) ) ) * ( 0 ) ) by A2,A3,A4,A15,A27,A24,CKB21:def 1
.= ( 0 );
then ( ( Euclid_scalar n ) . (v0,( ( f . k ) + v )) ) = ( 0 ) by A25,A26,REAL_NS1:def 5;
hence P[ ( k + 1 ) ] by A11,A18;
end;
suppose ( k + 1 ) >= j;

hence P[ ( k + 1 ) ];
end;
end;
case A28: k >= ( len F2 );
( k + 1 ) > k by XREAL_1:29;
then ( k + 1 ) > ( len F2 ) by A28,XXREAL_0:2;
hence P[ ( k + 1 ) ] by A7,A14,XXREAL_0:2;
end;
end;
hence P[ ( k + 1 ) ];
end;
A29: (for i being (Element of ( NAT )) holds P[ i ]) from NAT_1:sch 1(A12,A16);
A30: (for i being Nat holds (i < j implies ( ( Euclid_scalar n ) . (v0,( f . i )) ) = ( 0 )))
proof
let i being Nat;
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
assume i < j;
then ( ( Euclid_scalar n ) . (v0,( f . i0 )) ) = ( 0 ) by A29;
hence ( ( Euclid_scalar n ) . (v0,( f . i )) ) = ( 0 );
end;
A31: (for k being (Element of ( NAT )) holds (Q[ k ] implies Q[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
assume A32: Q[ k ];
per cases ;
suppose ( k + 1 ) < j;

hence Q[ ( k + 1 ) ];
end;
suppose A33: ( k + 1 ) >= j;

per cases  by A33,XXREAL_0:1;
suppose A34: ( k + 1 ) > j;

per cases ;
suppose A35: ( k + 1 ) <= ( len F2 );

1 <= ( k + 1 ) by NAT_1:11;
then A36: ( k + 1 ) in ( Seg ( len F2 ) ) by A35,FINSEQ_1:1;
then A37: ( k + 1 ) in ( dom F ) by A7,FINSEQ_1:def 3;
then A38: ( F /. ( k + 1 ) ) = ( F . ( k + 1 ) ) by PARTFUN1:def 6;
then A39: ( F /. ( k + 1 ) ) in ( rng F ) by A37,FUNCT_1:def 3;
( k + 1 ) in ( dom F2 ) by A36,FINSEQ_1:def 3;
then ( F2 . ( k + 1 ) ) in ( rng F2 ) by FUNCT_1:def 3;
then reconsider v = ( F2 . ( k + 1 ) ) as (Element of ( RealVectSpace ( Seg n ) ));
reconsider rv = v as (Element of ( REAL n )) by FINSEQ_2:93;
reconsider fk1 = ( F /. ( k + 1 ) ) as (Element of ( REAL n )) by FINSEQ_2:93;
reconsider fk = ( f . k ) as (Element of ( REAL n )) by FINSEQ_2:93;
A40: |( rv0,( fk + rv ) )| = ( |( rv0,fk )| + |( rv0,rv )| ) by EUCLID_4:28;
A41: rv0 <> ( F /. ( k + 1 ) ) by A1,A5,A6,A8,A34,A37,A38,FUNCT_1:def 4;
v = ( ( l . ( F /. ( k + 1 ) ) ) * ( F /. ( k + 1 ) ) ) by A8,A37,RLVECT_2:def 7;
then A42: |( rv0,rv )| = ( ( l . ( F /. ( k + 1 ) ) ) * |( rv0,fk1 )| ) by EUCLID_4:22
.= ( ( l . ( F /. ( k + 1 ) ) ) * ( 0 ) ) by A2,A3,A4,A15,A39,A41,CKB21:def 1
.= ( 0 );
k < ( k + 1 ) by XREAL_1:29;
then A43: k < ( len F2 ) by A35,XXREAL_0:2;
then |( rv0,fk )| = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ) by A32,A34,NAT_1:13,REAL_NS1:def 5,RLVECT_2:def 7;
then ( ( Euclid_scalar n ) . (v0,( ( f . k ) + v )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ) by A40,A42,REAL_NS1:def 5;
hence Q[ ( k + 1 ) ] by A11,A43;
end;
suppose ( k + 1 ) > ( len F2 );

hence Q[ ( k + 1 ) ] by RLVECT_2:def 7;
end;
end;
suppose A44: ( k + 1 ) = j;

then ( F2 . ( k + 1 ) ) in ( rng F2 ) by A5,FUNCT_1:def 3;
then reconsider v = ( F2 . ( k + 1 ) ) as (Element of ( RealVectSpace ( Seg n ) ));
A45: v = ( ( l . ( F /. ( k + 1 ) ) ) * ( F /. ( k + 1 ) ) ) by A5,A44,RLVECT_2:def 7;
reconsider rv = v as (Element of ( REAL n )) by FINSEQ_2:93;
( k + 1 ) in ( dom F ) by A5,A13,A7,A44,FINSEQ_1:def 3;
then A46: |( rv0,rv )| = |( rv0,( ( l . ( F /. j ) ) * rv0 ) )| by A6,A44,A45,PARTFUN1:def 6
.= ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ) by REAL_NS1:def 5;
reconsider fk = ( f . k ) as (Element of ( REAL n )) by FINSEQ_2:93;
( ( Euclid_scalar n ) . (v0,( f . k )) ) = ( 0 ) by A30,A44,XREAL_1:29;
then A47: |( rv0,fk )| = ( 0 ) by REAL_NS1:def 5;
k < ( k + 1 ) by XREAL_1:29;
then A48: k < ( len F2 ) by A7,A14,A44,XXREAL_0:2;
|( rv0,( fk + rv ) )| = ( |( rv0,fk )| + |( rv0,rv )| ) by EUCLID_4:28;
then ( ( Euclid_scalar n ) . (v0,( ( f . k ) + v )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ) by A47,A46,REAL_NS1:def 5;
hence Q[ ( k + 1 ) ] by A11,A48;
end;
end;
end;
A49: Q[ ( 0 ) ] by A5,A13,FINSEQ_1:1;
A50: (for i being (Element of ( NAT )) holds Q[ i ]) from NAT_1:sch 1(A49,A31);
(for i being Nat holds ((i >= j & i <= ( len F )) implies ( ( Euclid_scalar n ) . (v0,( f . i )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) )))
proof
let i being Nat;
assume that
A51: i >= j
and
A52: i <= ( len F );
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
( ( Euclid_scalar n ) . (v0,( f . i0 )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) ) by A50,A51,A52;
hence ( ( Euclid_scalar n ) . (v0,( f . i )) ) = ( ( Euclid_scalar n ) . (v0,( ( l . ( F /. j ) ) * v0 )) );
end;
hence thesis by A9,A7,A14;
end;
