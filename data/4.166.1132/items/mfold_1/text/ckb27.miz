environ
vocabularies NUMBERS,SUBSET_1,XREAL_0,ORDINAL1,PRE_TOPC,EUCLID,ARYTM_1,ARYTM_3,SUPINF_2,XBOOLE_0,FUNCOP_1,ORDINAL2,TOPS_1,RCOMP_1,XXREAL_0,METRIC_1,TARSKI,STRUCT_0,REAL_1,COMPLEX1,SETFAM_1,PCOMPS_1,TOPS_2,T_0TOPSP,CONNSP_2,FUNCT_1,RELAT_1,CARD_1,SQUARE_1,TOPMETR,MEMBERED,XXREAL_1,XXREAL_2,WAYBEL23,COMPTS_1,RLVECT_3,NATTRA_1,ZFMISC_1,FRECHET,CARD_3,MFOLD_1,FUNCT_2;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,FUNCT_1,TOPS_2,RELAT_1,RELSET_1,PARTFUN1,FUNCT_2,ORDINAL1,NAT_1,NUMBERS,VALUED_0,VALUED_1,XCMPLX_0,XREAL_0,XXREAL_0,COMPLEX1,REAL_1,STRUCT_0,RVSUM_1,PRE_TOPC,METRIC_1,TOPREAL9,TOPS_1,ALGSTR_0,RLVECT_1,BORSUK_3,CONNSP_2,TSEP_1,METRIZTS,PCOMPS_1,COMPTS_1,EUCLID,SQUARE_1,TOPMETR,TMAP_1,XXREAL_1,MEMBERED,XXREAL_2,TOPREAL6,WAYBEL23,CANTOR_1,CARD_1,TDLAT_3,ZFMISC_1,CARD_3,YELLOW_8,FRECHET,CKB4,CKB9,CKB10,CKB21;
definitions TARSKI,XBOOLE_0,XREAL_0,XXREAL_2,XCMPLX_0,ALGSTR_0,STRUCT_0,RELAT_1,FUNCT_1,FUNCT_2,ORDINAL1,MEMBERED,PRE_TOPC,TOPS_2,T_0TOPSP,EUCLID,PCOMPS_1,TOPREAL9,SQUARE_1,ABSVALUE,TMAP_1,METRIZTS,FRECHET,YELLOW_8,WAYBEL23,CKB4,CKB9,CKB10,CKB21;
theorems TOPRNS_1,XREAL_0,TARSKI,FUNCT_2,EUCLID,XBOOLE_1,FUNCOP_1,JORDAN2C,XCMPLX_1,ABSVALUE,XXREAL_1,XXREAL_2,GOBOARD6,XREAL_1,RLVECT_1,ORDINAL1,ZFMISC_1,SETFAM_1,PRE_TOPC,TOPS_1,CONNSP_2,METRIZTS,PCOMPS_1,T_0TOPSP,YELLOW14,TOPGRP_1,XBOOLE_0,TSEP_1,BORSUK_3,TOPREAL9,BORSUK_4,RELAT_1,FUNCT_1,TOPALG_1,TOPS_2,JGRAPH_1,RELSET_1,SQUARE_1,EUCLID_2,XXREAL_0,JGRAPH_2,TOPMETR,TOPREAL3,JORDAN6,GOBOARD9,RCOMP_1,JORDAN,WAYBEL23,YELLOW12,MEMBERED,JGRAPH_3,JGRAPH_5,TDLAT_3,FRECHET,CARD_3,YELLOW_8,CKB2,CKB3,CKB4,CKB8,CKB9,CKB10,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB24,CKB25,CKB26;
schemes FUNCT_2,TREES_2;
registrations XBOOLE_0,XXREAL_0,XREAL_0,XCMPLX_0,SQUARE_1,NAT_1,MEMBERED,STRUCT_0,METRIC_1,MONOID_0,EUCLID,TOPALG_2,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,PRE_TOPC,TOPS_1,CARD_1,TSEP_1,TOPREAL9,PCOMPS_1,RLVECT_1,COMPLEX1,TMAP_1,COMPTS_1,TOPMETR,XXREAL_2,TOPREAL6,SPPOL_1,WAYBEL23,METRIZTS,RLVECT_3,TOPREAL1,YELLOW13,YELLOW_8,KURATO_2,SUBSET_1,RELSET_1,FUNCT_2,CKB1,CKB5,CKB6,CKB7,CKB11,CKB12,CKB22,CKB23;
constructors MONOID_0,TOPREAL9,TOPREALB,SQUARE_1,FUNCSDOM,TOPS_1,TSEP_1,BORSUK_3,METRIZTS,PCOMPS_1,RLVECT_1,COMPLEX1,COMPTS_1,XCMPLX_0,NAT_1,EUCLID,BINOP_2,TOPMETR,TMAP_1,MEMBERED,XXREAL_2,TOPREAL6,SEQ_1,WAYBEL23,CANTOR_1,TDLAT_3,FUNCT_2,YELLOW_8,FRECHET,SEQ_4,CKB4,CKB9,CKB10,CKB21;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
reserve n for  natural number;
reserve p for (Point of ( TOP-REAL n ));
reserve M for non  empty TopSpace;
registration
let n;
cluster n -locally_euclidean ->  first-countable for non  empty non  empty TopSpace;
correctness
proof
let M being non  empty TopSpace;
assume A1: M is n -locally_euclidean;
(for p being (Point of M) holds (ex B being (Basis of p) st B is  countable))
proof
let p being (Point of M);
consider U being (a_neighborhood of p) such that A2: U,( [#] ( TOP-REAL n ) ) are_homeomorphic  by A1,CKB26:1;
( M | U ),( ( TOP-REAL n ) | ( [#] ( TOP-REAL n ) ) ) are_homeomorphic  by A2,METRIZTS:def 1;
then ( M | U ),( the TopStruct of ( TOP-REAL n ) ) are_homeomorphic  by TSEP_1:93;
then consider f being (Function of ( M | U ),( the TopStruct of ( TOP-REAL n ) )) such that A3: f is  being_homeomorphism by T_0TOPSP:def 1;
A4: ((((( dom f ) = ( [#] ( M | U ) ) & ( rng f ) = ( [#] ( the TopStruct of ( TOP-REAL n ) ) )) & f is  one-to-one) & f is  continuous) & ( f " ) is  continuous) by A3,TOPS_2:def 5;
then A5: ( dom f ) = U by PRE_TOPC:def 5;
B2: f is  onto by A4,FUNCT_2:def 3;
A6: ( Int U ) c= U by TOPS_1:16;
A7: p in ( Int U ) by CONNSP_2:def 1;
A8: p in ( dom f ) by A7,A6,A5;
( f . p ) in ( rng f ) by A7,A6,A5,FUNCT_1:3;
then reconsider q = ( f . p ) as (Point of ( TOP-REAL n ));
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
( TOP-REAL n1 ) is  first-countable;
then consider B1 being (Basis of q) such that A9: B1 is  countable by FRECHET:def 2;
reconsider A = ( bool (the carrier of ( TOP-REAL n )) ) as non  empty set;
deffunc F(set) = ( ( ( f " ) .: $1 ) /\ ( Int U ) );
set B = { F(X) where X is (Element of A): X in B1 };
A10: ( card B1 ) c= ( omega ) by A9,CARD_3:def 14;
( card B ) c= ( card B1 ) from TREES_2:sch 2;
then A11: ( card B ) c= ( omega ) by A10,XBOOLE_1:1;
(for x being set holds (x in B implies x in ( bool (the carrier of M) )))
proof
let x being set;
assume x in B;
then consider X1 being (Element of A) such that A12: (x = F(X1) & X1 in B1);
thus x in ( bool (the carrier of M) ) by A12;
end;
then reconsider B as (Subset-Family of M) by TARSKI:def 3;
A13: (for P being (Subset of M) holds (P in B implies P is  open))
proof
let P being (Subset of M);
assume P in B;
then consider X1 being (Element of A) such that A14: (P = F(X1) & X1 in B1);
reconsider X1 as (Subset of ( the TopStruct of ( TOP-REAL n ) ));
reconsider X2 = X1 as (Subset of ( TOP-REAL n ));
X2 is  open by A14,YELLOW_8:12;
then X2 in (the topology of ( TOP-REAL n )) by PRE_TOPC:def 2;
then A15: X1 is  open by PRE_TOPC:def 2;
reconsider U1 = ( M | U ) as non  empty TopStruct by A7,A6;
reconsider g = ( f " ) as (Function of ( the TopStruct of ( TOP-REAL n ) ),U1);
A16: g is  being_homeomorphism by A3,TOPS_2:56;
A17: ( g .: X1 ) is  open by A15,A16,TOPGRP_1:25;
( g .: X1 ) in (the topology of ( M | U )) by A17,PRE_TOPC:def 2;
then consider Q being (Subset of M) such that A18: (Q in (the topology of M) & ( g .: X1 ) = ( Q /\ ( [#] ( M | U ) ) )) by PRE_TOPC:def 4;
( [#] ( M | U ) ) = U by PRE_TOPC:def 5;
then A19: P = ( Q /\ ( U /\ ( Int U ) ) ) by A18,A14,XBOOLE_1:16
.= ( Q /\ ( Int U ) ) by TOPS_1:16,XBOOLE_1:28;
Q is  open by A18,PRE_TOPC:def 2;
hence P is  open by A19;
end;
(for Y being set holds (Y in B implies p in Y))
proof
let Y being set;
assume Y in B;
then consider X1 being (Element of A) such that A20: (Y = F(X1) & X1 in B1);
reconsider g = f as Function;
[ p,( g . p ) ] in g by A7,A6,A5,FUNCT_1:def 2;
then [ q,p ] in ( g ~ ) by RELAT_1:def 7;
then [ q,p ] in ( g " ) by A4,FUNCT_1:def 5;
then A21: [ q,p ] in ( f " ) by B2,A4,TOPS_2:def 4;
q in X1 by A20,YELLOW_8:12;
then p in ( ( f " ) .: X1 ) by A21,RELAT_1:def 13;
hence p in Y by A20,A7,XBOOLE_0:def 4;
end;
then A22: p in ( Intersect B ) by SETFAM_1:43;
(for S being (Subset of M) holds ((S is  open & p in S) implies (ex V being (Subset of M) st (V in B & V c= S))))
proof
let S being (Subset of M);
assume A23: (S is  open & p in S);
set S1 = ( S /\ ( [#] ( M | U ) ) );
S in (the topology of M) by A23,PRE_TOPC:def 2;
then A24: S1 in (the topology of ( M | U )) by PRE_TOPC:def 4;
reconsider U1 = ( M | U ) as non  empty TopStruct by A7,A6;
reconsider S1 as (Subset of U1);
S1 is  open by A24,PRE_TOPC:def 2;
then A25: ( f .: S1 ) is  open by A3,TOPGRP_1:25;
reconsider S2 = ( f .: S1 ) as (Subset of ( TOP-REAL n ));
( f .: S1 ) in (the topology of ( the TopStruct of ( TOP-REAL n ) )) by A25,PRE_TOPC:def 2;
then A26: S2 is  open by PRE_TOPC:def 2;
reconsider g1 = f as Function;
A27: [ p,q ] in f by A7,A6,A5,FUNCT_1:def 2;
p in S1 by A8,A23,XBOOLE_0:def 4;
then A28: q in S2 by A27,RELAT_1:def 13;
consider W being (Subset of ( TOP-REAL n )) such that A29: (W in B1 & W c= S2) by A28,A26,YELLOW_8:13;
reconsider W as (Element of A);
set V = ( ( ( f " ) .: W ) /\ ( Int U ) );
reconsider V as (Subset of M);
take V;
thus V in B by A29;
A30: ( g1 " ) = ( f " ) by B2,A4,TOPS_2:def 4;
A31: ( ( f " ) .: ( f .: S1 ) ) = S1 by A30,A4,FUNCT_1:107;
A32: ( ( ( f " ) .: W ) /\ ( Int U ) ) c= ( ( f " ) .: W ) by XBOOLE_1:17;
A33: S1 c= S by XBOOLE_1:17;
( ( f " ) .: W ) c= ( ( f " ) .: ( f .: S1 ) ) by A29,RELAT_1:123;
then ( ( f " ) .: W ) c= S by A31,A33,XBOOLE_1:1;
hence V c= S by A32,XBOOLE_1:1;
end;
then reconsider B as (Basis of p) by A13,A22,TOPS_2:def 1,YELLOW_8:def 1;
take B;
thus B is  countable by A11,CARD_3:def 14;
end;
hence M is  first-countable by FRECHET:def 2;
end;
end;
