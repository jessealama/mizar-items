environ
vocabularies NUMBERS,PROB_1,MEASURE1,SUBSET_1,MESFUNC5,ORDINAL1,SUPINF_2,SERIES_1,FUNCT_1,NAT_1,ARYTM_3,CARD_1,CARD_3,VALUED_0,SEQ_2,ORDINAL2,XXREAL_0,RELAT_1,PROB_2,XBOOLE_0,TARSKI,FINSEQ_1,ZFMISC_1,FUNCOP_1,FUNCT_2,MEASURE7,SUPINF_1,NAGATA_2,MCART_1,FUNCT_7,XXREAL_2,XREAL_0,REAL_1,MEASURE4,PROB_3,SETLIM_2,ARYTM_1,SETLIM_1,EQREL_1,LATTICE5,MEASURE2,MEASURE8;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,XXREAL_0,XXREAL_2,XREAL_0,VALUED_0,REAL_1,RELAT_1,FUNCOP_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,NUMBERS,FINSEQ_1,SETFAM_1,RINFSUP2,MEASURE1,MEASURE2,MEASURE4,MESFUNC5,SUPINF_2,XXREAL_3,NAT_1,MESFUNC9,SUPINF_1,RECDEF_1,PROB_1,PROB_2,PROB_3,SETLIM_1,SETLIM_2,NAGATA_2,FUNCT_7,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB16,CKB17,CKB19,CKB21,CKB22,CKB23,CKB34,CKB35,CKB43,CKB45,CKB55;
definitions SUPINF_2,TARSKI,PROB_2,RINFSUP2,MESFUNC9,PROB_3,ALTCAT_2,CKB5,CKB9,CKB10,CKB13,CKB14,CKB17,CKB19,CKB21,CKB22,CKB23,CKB35,CKB55;
theorems ZFMISC_1,TARSKI,XBOOLE_0,PROB_1,MEASURE1,FUNCT_2,FUNCT_1,XBOOLE_1,PROB_3,FINSEQ_1,RELAT_1,MEASURE4,ORDINAL1,NAT_1,FUNCOP_1,SUPINF_2,XXREAL_2,PROB_4,MEASURE7,XXREAL_0,MEASURE6,FINSUB_1,CARD_3,RINFSUP2,MESFUNC9,VALUED_0,MESFUNC5,MONOID_1,MEASURE2,SETLIM_1,SETLIM_2,ABCMIZ_1,PROB_2,NAGATA_2,FUNCTOR1,FUNCT_7,XXREAL_3,XREAL_0,PARTFUN1,CKB1,CKB2,CKB3,CKB5,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB17,CKB18,CKB19,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58;
schemes FUNCT_2,NAT_1,BINOP_2,XBOOLE_0,SUBSET_1;
registrations MEMBERED,ORDINAL1,MEASURE1,XBOOLE_0,NUMBERS,XXREAL_0,VALUED_0,FUNCT_1,FUNCT_2,SUBSET_1,RELSET_1,MEASURE4,NAT_1,XXREAL_3,XREAL_0,PROB_3,CKB4,CKB6,CKB20;
constructors REAL_1,DOMAIN_1,KURATO_0,MESFUNC5,RINFSUP2,MESFUNC9,SUPINF_1,PROB_3,MEASURE7,RECDEF_1,SETLIM_2,SETLIM_1,NAGATA_2,FUNCT_7,ALTCAT_2,CKB5,CKB9,CKB10,CKB11,CKB13,CKB14,CKB16,CKB17,CKB19,CKB21,CKB22,CKB23,CKB34,CKB35,CKB43,CKB45,CKB55;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve X for set;
reserve F for (Field_Subset of X);
reserve M for (Measure of F);
reserve B for (Subset of X);
reserve seq for ExtREAL_sequence;
reserve n for  natural number;
reserve k for  natural number;
theorem
(for X being non  empty set holds (for F being (Field_Subset of X) holds (for m being (Measure of F) holds ((m is  completely-additive & (ex Aseq being (Set_Sequence of F) st ((for n being Nat holds ( m . ( Aseq . n ) ) < ( +infty )) & X = ( union ( rng Aseq ) )))) implies (for M being (sigma_Measure of ( sigma F )) holds (M is_extension_of m implies M = ( ( sigma_Meas ( C_Meas m ) ) | ( sigma F ) )))))))
proof
let X being non  empty set;
let F being (Field_Subset of X);
let m being (Measure of F);
A1: F c= ( sigma F ) by PROB_1:def 9;
assume m is  completely-additive;
then consider M1 being (sigma_Measure of ( sigma F )) such that A2: M1 is_extension_of m and A3: M1 = ( ( sigma_Meas ( C_Meas m ) ) | ( sigma F ) ) by CKB57:1;
assume (ex Aseq being (Set_Sequence of F) st ((for n being Nat holds ( m . ( Aseq . n ) ) < ( +infty )) & X = ( union ( rng Aseq ) )));
then consider Aseq being (Set_Sequence of F) such that A4: (for n being Nat holds ( m . ( Aseq . n ) ) < ( +infty )) and A5: X = ( union ( rng Aseq ) );
let M being (sigma_Measure of ( sigma F ));
reconsider Bseq = ( Partial_Union Aseq ) as (Set_Sequence of F) by CKB36:1;
assume A6: M is_extension_of m;
F c= ( sigma_Field ( C_Meas m ) ) by CKB41:1;
then A7: ( sigma F ) c= ( sigma_Field ( C_Meas m ) ) by PROB_1:def 9;
A8: (for B being (Subset of X) holds (B in ( sigma F ) implies ( M . B ) <= ( M1 . B )))
proof
let B being (Subset of X);
assume A9: B in ( sigma F );
A10: (for seq being (Covering of B,F) holds ( M . B ) <= ( SUM ( vol (m,seq) ) ))
proof
let seq being (Covering of B,F);
A11:now
let n being (Element of ( NAT ));
( seq . n ) in F;
hence ( seq . n ) in ( sigma F ) by A1;
end;
now
let y being set;
assume y in ( rng seq );
then consider x being set such that A12: x in ( NAT ) and A13: ( seq . x ) = y by FUNCT_2:11;
thus y in ( sigma F ) by A11,A12,A13;
end;
then ( rng seq ) c= ( sigma F ) by TARSKI:def 3;
then reconsider seq1 = seq as (SetSequence of ( sigma F )) by RELAT_1:def 19;
now
let y being set;
assume y in ( rng seq1 );
then consider x being set such that A14: x in ( NAT ) and A15: ( seq1 . x ) = y by FUNCT_2:11;
thus y in ( sigma F ) by A11,A14,A15;
end;
then A16: ( rng seq1 ) c= ( sigma F ) by TARSKI:def 3;
then reconsider Fseq = seq1 as (Function of ( NAT ),( sigma F )) by FUNCT_2:6;
B c= ( union ( rng seq1 ) ) by CKB10:def 1;
then (( Union seq1 ) in ( sigma F ) & B c= ( Union seq1 )) by CARD_3:def 4,PROB_1:17;
then A17: ( M . B ) <= ( M . ( Union seq1 ) ) by A9,MEASURE1:31;
(for n being set holds (n in ( NAT ) implies ( ( M * Fseq ) . n ) = ( ( vol (m,seq) ) . n )))
proof
let n being set;
assume A18: n in ( NAT );
then reconsider n1 = n as (Element of ( NAT ));
n1 in ( dom Fseq ) by A18,FUNCT_2:def 1;
then ( ( M * Fseq ) . n ) = ( M . ( Fseq . n1 ) ) by FUNCT_1:13
.= ( m . ( seq . n1 ) ) by A6,CKB55:def 1;
hence ( ( M * Fseq ) . n ) = ( ( vol (m,seq) ) . n ) by CKB14:def 1;
end;
then A19: ( SUM ( M * Fseq ) ) = ( SUM ( vol (m,seq) ) ) by FUNCT_2:12;
( rng Fseq ) is (N_Sub_set_fam of X) by MEASURE1:23;
then ( rng Fseq ) is (N_Measure_fam of ( sigma F )) by A16,MEASURE2:def 1;
then ( M . ( union ( rng Fseq ) ) ) <= ( SUM ( M * Fseq ) ) by MEASURE2:11;
then ( M . ( Union seq1 ) ) <= ( SUM ( vol (m,seq) ) ) by A19,CARD_3:def 4;
hence ( M . B ) <= ( SUM ( vol (m,seq) ) ) by A17,XXREAL_0:2;
end;
(for r being  ext-real number holds (r in ( Svc (m,B) ) implies ( M . B ) <= r))
proof
let r being  ext-real number;
assume r in ( Svc (m,B) );
then (ex seq being (Covering of B,F) st r = ( SUM ( vol (m,seq) ) )) by CKB19:def 1;
hence ( M . B ) <= r by A10;
end;
then ( M . B ) is (LowerBound of ( Svc (m,B) )) by XXREAL_2:def 2;
then ( M . B ) <= ( inf ( Svc (m,B) ) ) by XXREAL_2:def 4;
then ( M . B ) <= ( ( C_Meas m ) . B ) by CKB21:def 1;
then ( M . B ) <= ( ( sigma_Meas ( C_Meas m ) ) . B ) by A7,A9,MEASURE4:def 3;
hence ( M . B ) <= ( M1 . B ) by A3,A9,FUNCT_1:49;
end;
A20: (for B being set holds (((ex k being (Element of ( NAT )) st B c= ( Bseq . k )) & B in ( sigma F )) implies ( M . B ) = ( M1 . B )))
proof
let B being set;
assume (ex k being (Element of ( NAT )) st B c= ( Bseq . k ));
then consider k being (Element of ( NAT )) such that A21: B c= ( Bseq . k );
A22: ( M . ( Bseq . k ) ) = ( m . ( Bseq . k ) ) by A6,CKB55:def 1;
assume A23: B in ( sigma F );
then reconsider B9 = B as (Subset of X);
A24: (F c= ( sigma F ) & ( Bseq . k ) in F) by PROB_1:def 9;
then A25: ( ( Bseq . k ) \ B ) is (Element of ( sigma F )) by A23,PROB_1:6;
then ( M . ( ( Bseq . k ) \ B ) ) <= ( M . ( Bseq . k ) ) by A24,MEASURE1:31,XBOOLE_1:36;
then A26: ( M . ( ( Bseq . k ) \ B ) ) < ( +infty ) by A4,A22,CKB58:1,XXREAL_0:2;
( ( M . B ) + ( M . ( ( Bseq . k ) \ B ) ) ) = ( M . ( B \/ ( ( Bseq . k ) \ B ) ) ) by A23,A25,MEASURE1:30,XBOOLE_1:79;
then ( ( M . B ) + ( M . ( ( Bseq . k ) \ B ) ) ) = ( M . ( ( Bseq . k ) \/ B ) ) by XBOOLE_1:39;
then A27: ( ( M . B ) + ( M . ( ( Bseq . k ) \ B ) ) ) = ( M . ( Bseq . k ) ) by A21,XBOOLE_1:12;
( 0 ) <= ( M . ( ( Bseq . k ) \ B ) ) by SUPINF_2:51;
then A28: ( M . B ) = ( ( M . ( Bseq . k ) ) - ( M . ( ( Bseq . k ) \ B ) ) ) by A27,A26,XXREAL_3:28;
A29: ( M1 . ( Bseq . k ) ) = ( m . ( Bseq . k ) ) by A2,CKB55:def 1;
( ( M1 . B ) + ( M1 . ( ( Bseq . k ) \ B ) ) ) = ( M1 . ( B \/ ( ( Bseq . k ) \ B ) ) ) by A23,A25,MEASURE1:30,XBOOLE_1:79;
then ( ( M1 . B ) + ( M1 . ( ( Bseq . k ) \ B ) ) ) = ( M1 . ( ( Bseq . k ) \/ B ) ) by XBOOLE_1:39;
then A30: ( ( M1 . B ) + ( M1 . ( ( Bseq . k ) \ B ) ) ) = ( M1 . ( Bseq . k ) ) by A21,XBOOLE_1:12;
( M1 . ( ( Bseq . k ) \ B ) ) <= ( M1 . ( Bseq . k ) ) by A24,A25,MEASURE1:31,XBOOLE_1:36;
then A31: ( M1 . ( ( Bseq . k ) \ B ) ) < ( +infty ) by A4,A29,CKB58:1,XXREAL_0:2;
( 0 ) <= ( M1 . ( ( Bseq . k ) \ B ) ) by SUPINF_2:51;
then A32: ( M1 . B ) = ( ( M1 . ( Bseq . k ) ) - ( M1 . ( ( Bseq . k ) \ B ) ) ) by A30,A31,XXREAL_3:28;
( M . ( ( Bseq . k ) \ B ) ) <= ( M1 . ( ( Bseq . k ) \ B ) ) by A8,A23,A24,PROB_1:6;
then A33: ( ( M1 . ( Bseq . k ) ) - ( M1 . ( ( Bseq . k ) \ B ) ) ) <= ( ( M . ( Bseq . k ) ) - ( M . ( ( Bseq . k ) \ B ) ) ) by A29,A22,XXREAL_3:37;
( M . B9 ) <= ( M1 . B9 ) by A8,A23;
hence ( M . B ) = ( M1 . B ) by A28,A32,A33,XXREAL_0:1;
end;
(for B being set holds (B in ( sigma F ) implies ( M . B ) = ( M1 . B )))
proof
let B being set;
deffunc F1(set) = ( B /\ ( Bseq . $1 ) );
assume A34: B in ( sigma F );
then reconsider B9 = B as (Subset of X);
A35: (for n being set holds (n in ( NAT ) implies F1(n) in ( bool X )))
proof
let n being set;
assume n in ( NAT );
then ( Bseq . n ) in F by CKB9:def 1;
then ( ( Bseq . n ) /\ B ) c= ( X /\ X ) by A34,XBOOLE_1:27;
hence F1(n) in ( bool X );
end;
consider Cseq being (Function of ( NAT ),( bool X )) such that A36: (for n being set holds (n in ( NAT ) implies ( Cseq . n ) = F1(n))) from FUNCT_2:sch 2(A35);
reconsider Cseq as (SetSequence of X);
(for n,m being (Element of ( NAT )) holds (n <= m implies ( Cseq . n ) c= ( Cseq . m )))
proof
let n being (Element of ( NAT ));
let m being (Element of ( NAT ));
A37: Bseq is  non-descending by PROB_3:11;
assume n <= m;
then ( Bseq . n ) c= ( Bseq . m ) by A37,PROB_1:def 5;
then ( B /\ ( Bseq . n ) ) c= ( B /\ ( Bseq . m ) ) by XBOOLE_1:26;
then ( Cseq . n ) c= ( B /\ ( Bseq . m ) ) by A36;
hence ( Cseq . n ) c= ( Cseq . m ) by A36;
end;
then A38: Cseq is  non-descending by PROB_1:def 5;
now
let y being set;
assume y in ( rng Cseq );
then consider x being set such that A39: x in ( NAT ) and A40: ( Cseq . x ) = y by FUNCT_2:11;
reconsider x as (Element of ( NAT )) by A39;
( Bseq . x ) in F;
then ( ( Bseq . x ) /\ B ) in ( sigma F ) by A1,A34,MEASURE1:34;
hence y in ( sigma F ) by A36,A40;
end;
then ( rng Cseq ) c= ( sigma F ) by TARSKI:def 3;
then reconsider Cseq as (SetSequence of ( sigma F )) by RELAT_1:def 19;
(for n being set holds (n in ( NAT ) implies ( ( M1 * ( Partial_Union Cseq ) ) . n ) = ( ( M * ( Partial_Union Cseq ) ) . n )))
proof
let n being set;
assume n in ( NAT );
then reconsider n1 = n as (Element of ( NAT ));
A41:now
let x being set;
assume x in ( ( Partial_Union Cseq ) . n1 );
then consider k being Nat such that A42: k <= n1 and A43: x in ( Cseq . k ) by PROB_3:13;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
take k;
x in ( B /\ ( Bseq . k ) ) by A36,A43;
hence (k <= n1 & x in ( Bseq . k )) by A42,XBOOLE_0:def 4;
end;
AA: ( ( Partial_Union Cseq ) . n1 ) c= ( Bseq . n1 )
proof
let x being set;
assume x in ( ( Partial_Union Cseq ) . n1 );
then consider k being (Element of ( NAT )) such that A44: k <= n1 and A45: x in ( Bseq . k ) by A41;
Bseq is  non-descending by PROB_3:11;
then ( Bseq . k ) c= ( Bseq . n1 ) by A44,PROB_1:def 5;
hence x in ( Bseq . n1 ) by A45;
end;
XX: ( ( M1 * ( Partial_Union Cseq ) ) . n ) = ( M1 . ( ( Partial_Union Cseq ) . n1 ) ) by FUNCT_2:15;
YY: ( rng ( Partial_Union Cseq ) ) c= ( sigma F ) by RELAT_1:def 19;
( dom ( Partial_Union Cseq ) ) = ( NAT ) by PARTFUN1:def 2;
then ( ( Partial_Union Cseq ) . n1 ) in ( rng ( Partial_Union Cseq ) ) by FUNCT_1:3;
then ( ( M1 * ( Partial_Union Cseq ) ) . n ) = ( M . ( ( Partial_Union Cseq ) . n1 ) ) by XX,A20,AA,YY;
hence ( ( M1 * ( Partial_Union Cseq ) ) . n ) = ( ( M * ( Partial_Union Cseq ) ) . n ) by FUNCT_2:15;
end;
then A46: ( M1 * ( Partial_Union Cseq ) ) = ( M * ( Partial_Union Cseq ) ) by FUNCT_2:12;
(for n being (Element of ( NAT )) holds ( Cseq . n ) = ( B9 /\ ( Bseq . n ) )) by A36;
then Cseq = ( B9 (/\) Bseq ) by SETLIM_2:def 5;
then ( Union Cseq ) = ( B9 /\ ( Union Bseq ) ) by SETLIM_2:38;
then ( Union Cseq ) = ( B9 /\ ( Union Aseq ) ) by PROB_3:15;
then ( Union Cseq ) = ( B9 /\ X ) by A5,CARD_3:def 4;
then A47: B9 = ( Union Cseq ) by XBOOLE_1:28;
then B9 = ( lim Cseq ) by A38,SETLIM_1:63;
then ( M1 . B ) = ( lim ( M1 * Cseq ) ) by A38,CKB49:1;
then ( M1 . B ) = ( lim ( M * ( Partial_Union Cseq ) ) ) by A38,A46,PROB_4:19;
then ( M1 . B ) = ( lim ( M * Cseq ) ) by A38,PROB_4:19;
then ( M1 . B ) = ( M . ( lim Cseq ) ) by A38,CKB49:1;
hence ( M1 . B ) = ( M . B ) by A38,A47,SETLIM_1:63;
end;
hence thesis by A3,FUNCT_2:12;
end;
