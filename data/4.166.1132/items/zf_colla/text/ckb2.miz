environ
vocabularies XBOOLE_0,ORDINAL1,FUNCT_1,SUBSET_1,RELAT_1,TARSKI,ZF_LANG,ZF_MODEL,BVFUNC_2,CARD_1,XBOOLEAN,FUNCT_4,ARYTM_3,ZF_COLLA;
notations TARSKI,XBOOLE_0,SUBSET_1,XCMPLX_0,RELAT_1,FUNCT_1,ZF_LANG,NUMBERS,FUNCT_2,FUNCT_7,ORDINAL1,ZF_MODEL,CKB1;
definitions TARSKI,ORDINAL1,XBOOLE_0,CKB1;
theorems TARSKI,FUNCT_1,ZF_LANG,ZF_MODEL,ORDINAL1,ZFMISC_1,RELAT_1,XBOOLE_0,FUNCT_7,CKB1;
schemes TARSKI,CLASSES1,ORDINAL1,XBOOLE_0;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,MEMBERED,ZF_LANG,RELSET_1;
constructors NAT_1,MEMBERED,ZF_MODEL,FUNCT_7,CKB1;
requirements NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve E for non  empty set;
reserve A for Ordinal;
reserve B for Ordinal;
reserve C for Ordinal;
reserve L for T-Sequence;
reserve f for Function;
reserve d for (Element of E);
reserve d1 for (Element of E);
theorem
Th1: ( Collapse (E,A) ) = { d: (for d1 holds (d1 in d implies (ex B st (B in A & d1 in ( Collapse (E,B) ))))) }
proof
defpred P[ set,set ]
 means
(ex B st (B = $1 & $2 = ( Collapse (E,B) )));
deffunc H(T-Sequence) = { d: (for d1 holds (d1 in d implies (ex C st (C in ( dom $1 ) & d1 in ( union { ( $1 . C ) } ))))) };
deffunc F(Ordinal) = ( Collapse (E,$1) );
A1: (for x holds (x in A implies (ex y st P[ x,y ])))
proof
let x;
assume x in A;
then reconsider B = x as Ordinal;
take ( Collapse (E,B) );
take B;
thus thesis;
end;
consider f such that A2: (( dom f ) = A & (for x holds (x in A implies P[ x,( f . x ) ]))) from CLASSES1:sch 1(A1);
reconsider L = f as T-Sequence by A2,ORDINAL1:def 7;
A3:now
let A;
assume A in ( dom L );
then (ex B st (B = A & ( L . A ) = ( Collapse (E,B) ))) by A2;
hence ( L . A ) = F(A);
end;
A4: (for A holds (for x holds (x = F(A) iff (ex L st ((x = H(L) & ( dom L ) = A) & (for B holds (B in A implies ( L . B ) = H(( L | B ))))))))) by CKB1:def 1;
(for B holds (B in ( dom L ) implies ( L . B ) = H(( L | B )))) from ORDINAL1:sch 5(A4,A3);
then A5: ( Collapse (E,A) ) = { d: (for d1 holds (d1 in d implies (ex B st (B in ( dom L ) & d1 in ( union { ( L . B ) } ))))) } by A2,CKB1:def 1;
now
let x;
assume x in { d: (for d1 holds (d1 in d implies (ex B st (B in ( dom L ) & d1 in ( union { ( L . B ) } ))))) };
then consider d such that A6: x = d and A7: (for d1 holds (d1 in d implies (ex B st (B in ( dom L ) & d1 in ( union { ( L . B ) } )))));
(for d1 holds (d1 in d implies (ex B st (B in A & d1 in ( Collapse (E,B) )))))
proof
let d1;
assume d1 in d;
then consider B such that A8: B in ( dom L ) and A9: d1 in ( union { ( L . B ) } ) by A7;
take B;
thus B in A by A2,A8;
( L . B ) = ( Collapse (E,B) ) by A3,A8;
hence thesis by A9,ZFMISC_1:25;
end;
hence x in { d1: (for d holds (d in d1 implies (ex B st (B in A & d in ( Collapse (E,B) ))))) } by A6;
end;
hence ( Collapse (E,A) ) c= { d: (for d1 holds (d1 in d implies (ex B st (B in A & d1 in ( Collapse (E,B) ))))) } by A5,TARSKI:def 3;
let x;
assume x in { d1: (for d holds (d in d1 implies (ex B st (B in A & d in ( Collapse (E,B) ))))) };
then consider d1 such that A10: x = d1 and A11: (for d holds (d in d1 implies (ex B st (B in A & d in ( Collapse (E,B) )))));
(for d holds (d in d1 implies (ex B st (B in ( dom L ) & d in ( union { ( L . B ) } )))))
proof
let d;
assume d in d1;
then consider B such that A12: B in A and A13: d in ( Collapse (E,B) ) by A11;
take B;
thus B in ( dom L ) by A2,A12;
( L . B ) = ( Collapse (E,B) ) by A2,A3,A12;
hence thesis by A13,ZFMISC_1:25;
end;
hence thesis by A5,A10;
end;
