environ
vocabularies XBOOLE_0,ORDINAL1,FUNCT_1,SUBSET_1,RELAT_1,TARSKI,ZF_LANG,ZF_MODEL,BVFUNC_2,CARD_1,XBOOLEAN,FUNCT_4,ARYTM_3,ZF_COLLA;
notations TARSKI,XBOOLE_0,SUBSET_1,XCMPLX_0,RELAT_1,FUNCT_1,ZF_LANG,NUMBERS,FUNCT_2,FUNCT_7,ORDINAL1,ZF_MODEL,CKB1;
definitions TARSKI,ORDINAL1,XBOOLE_0,CKB1;
theorems TARSKI,FUNCT_1,ZF_LANG,ZF_MODEL,ORDINAL1,ZFMISC_1,RELAT_1,XBOOLE_0,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9;
schemes TARSKI,CLASSES1,ORDINAL1,XBOOLE_0;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,MEMBERED,ZF_LANG,RELSET_1;
constructors NAT_1,MEMBERED,ZF_MODEL,FUNCT_7,CKB1;
requirements NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve X for set;
reserve x for set;
reserve y for set;
reserve z for set;
reserve E for non  empty set;
reserve A for Ordinal;
reserve B for Ordinal;
reserve C for Ordinal;
reserve f for Function;
reserve f1 for Function;
reserve f2 for Function;
reserve h for Function;
reserve d for (Element of E);
reserve d1 for (Element of E);
reserve d9 for (Element of E);
theorem
Th9: (ex f st (( dom f ) = E & (for d holds ( f . d ) = ( f .: d ))))
proof
defpred Q[ Ordinal,Function,non  empty set ]
 means
(( dom $2 ) = ( Collapse ($3,$1) ) & (for d holds (d in ( Collapse ($3,$1) ) implies ( $2 . d ) = ( $2 .: d ))));
defpred TI[ Ordinal ]
 means
(for f1 holds (for f2 holds ((Q[ $1,f1,E ] & Q[ $1,f2,E ]) implies f1 = f2)));
defpred MAIN[ Ordinal ]
 means
(ex f st Q[ $1,f,E ]);
A1: ((A c= B & Q[ B,f,E ]) implies Q[ A,( f | ( Collapse (E,A) ) ),E ])
proof
assume that
A2: A c= B
and
A3: ( dom f ) = ( Collapse (E,B) )
and
A4: (for d holds (d in ( Collapse (E,B) ) implies ( f . d ) = ( f .: d )));
A5: ( Collapse (E,A) ) c= ( Collapse (E,B) ) by A2,CKB5:1;
thus ( dom ( f | ( Collapse (E,A) ) ) ) = ( Collapse (E,A) ) by A2,A3,CKB5:1,RELAT_1:62;
let d;
assume that
A6: d in ( Collapse (E,A) );
(x in ( f .: d ) implies x in ( ( f | ( Collapse (E,A) ) ) .: d ))
proof
A7: ( dom ( f | ( Collapse (E,A) ) ) ) = ( Collapse (E,A) ) by A2,A3,CKB5:1,RELAT_1:62;
assume x in ( f .: d );
then consider z such that A8: z in ( dom f ) and A9: z in d and A10: x = ( f . z ) by FUNCT_1:def 6;
( dom f ) c= E by A3,CKB8:1;
then reconsider d1 = z as (Element of E) by A8;
A11: d1 in ( Collapse (E,A) ) by A6,A9,CKB7:1;
then ( ( f | ( Collapse (E,A) ) ) . z ) = ( f . z ) by FUNCT_1:49;
hence thesis by A9,A10,A11,A7,FUNCT_1:def 6;
end;
then A12: ( f .: d ) c= ( ( f | ( Collapse (E,A) ) ) .: d ) by TARSKI:def 3;
( ( f | ( Collapse (E,A) ) ) .: d ) c= ( f .: d ) by RELAT_1:128;
then A13: ( f .: d ) = ( ( f | ( Collapse (E,A) ) ) .: d ) by A12,XBOOLE_0:def 10;
thus ( ( f | ( Collapse (E,A) ) ) . d ) = ( f . d ) by A6,FUNCT_1:49
.= ( ( f | ( Collapse (E,A) ) ) .: d ) by A4,A5,A6,A13;
end;
A14:now
let A;
assume that
A15: (for B holds (B in A implies TI[ B ]));
thus TI[ A ]
proof
let f1;
let f2;
assume that
A16: Q[ A,f1,E ]
and
A17: Q[ A,f2,E ];
now
let x;
assume that
A18: x in ( Collapse (E,A) );
( Collapse (E,A) ) c= E by CKB8:1;
then reconsider d = x as (Element of E) by A18;
A19: ( f1 .: d ) = ( f2 .: d )
proof
thus (y in ( f1 .: d ) implies y in ( f2 .: d ))
proof
assume y in ( f1 .: d );
then consider z such that A20: z in ( dom f1 ) and A21: z in d and A22: y = ( f1 . z ) by FUNCT_1:def 6;
( dom f1 ) c= E by A16,CKB8:1;
then reconsider d1 = z as (Element of E) by A20;
consider B such that A23: B in A and A24: d1 in ( Collapse (E,B) ) by A18,A21,CKB7:1;
B c= A by A23,ORDINAL1:def 2;
then (Q[ B,( f1 | ( Collapse (E,B) ) ),E ] & Q[ B,( f2 | ( Collapse (E,B) ) ),E ]) by A1,A16,A17;
then A25: ( f1 | ( Collapse (E,B) ) ) = ( f2 | ( Collapse (E,B) ) ) by A15,A23;
( f1 . d1 ) = ( ( f1 | ( Collapse (E,B) ) ) . d1 ) by A24,FUNCT_1:49
.= ( f2 . d1 ) by A24,A25,FUNCT_1:49;
hence thesis by A16,A17,A20,A21,A22,FUNCT_1:def 6;
end;

let y;
assume y in ( f2 .: d );
then consider z such that A26: z in ( dom f2 ) and A27: z in d and A28: y = ( f2 . z ) by FUNCT_1:def 6;
( dom f2 ) c= E by A17,CKB8:1;
then reconsider d1 = z as (Element of E) by A26;
consider B such that A29: B in A and A30: d1 in ( Collapse (E,B) ) by A18,A27,CKB7:1;
B c= A by A29,ORDINAL1:def 2;
then (Q[ B,( f1 | ( Collapse (E,B) ) ),E ] & Q[ B,( f2 | ( Collapse (E,B) ) ),E ]) by A1,A16,A17;
then A31: ( f1 | ( Collapse (E,B) ) ) = ( f2 | ( Collapse (E,B) ) ) by A15,A29;
( f1 . d1 ) = ( ( f1 | ( Collapse (E,B) ) ) . d1 ) by A30,FUNCT_1:49
.= ( f2 . d1 ) by A30,A31,FUNCT_1:49;
hence thesis by A16,A17,A26,A27,A28,FUNCT_1:def 6;
end;
( f1 . d ) = ( f1 .: d ) by A16,A18;
hence ( f1 . x ) = ( f2 . x ) by A17,A18,A19;
end;
hence thesis by A16,A17,FUNCT_1:2;
end;

end;
A32: (for A holds TI[ A ]) from ORDINAL1:sch 2(A14);
A33: (for A holds ((for B holds (B in A implies MAIN[ B ])) implies MAIN[ A ]))
proof
let A;
assume (for B holds (B in A implies (ex f st Q[ B,f,E ])));
defpred P[ set,set ]
 means
(ex d st (d = $1 & (for x holds (x in $2 iff (ex d1 st (ex B st (ex f st ((((d1 in d & B in A) & d1 in ( Collapse (E,B) )) & Q[ B,f,E ]) & x = ( f . d1 )))))))));
A34: (for x holds (x in ( Collapse (E,A) ) implies (ex y st P[ x,y ])))
proof
A35: ( Collapse (E,A) ) c= E by CKB8:1;
let x;
assume x in ( Collapse (E,A) );
then reconsider d = x as (Element of E) by A35;
defpred R[ set,set ]
 means
(ex B st (ex f st (((B in A & $1 in ( Collapse (E,B) )) & Q[ B,f,E ]) & $2 = ( f . $1 ))));
A36: (for x holds (for y holds (for z holds ((R[ x,y ] & R[ x,z ]) implies y = z))))
proof
let x;
let y;
let z;
given B1 being Ordinal,f1 such that
B1 in A
and
A37: x in ( Collapse (E,B1) )
and
A38: Q[ B1,f1,E ]
and
A39: y = ( f1 . x );

given B2 being Ordinal,f2 such that
B2 in A
and
A40: x in ( Collapse (E,B2) )
and
A41: Q[ B2,f2,E ]
and
A42: z = ( f2 . x );

A43:now
assume B2 c= B1;
then Q[ B2,( f1 | ( Collapse (E,B2) ) ),E ] by A1,A38;
then ( f1 | ( Collapse (E,B2) ) ) = f2 by A32,A41;
hence thesis by A39,A40,A42,FUNCT_1:49;
end;
now
assume B1 c= B2;
then Q[ B1,( f2 | ( Collapse (E,B1) ) ),E ] by A1,A41;
then ( f2 | ( Collapse (E,B1) ) ) = f1 by A32,A38;
hence thesis by A37,A39,A42,FUNCT_1:49;
end;
hence thesis by A43;
end;
consider X such that A44: (y in X iff (ex x st (x in d & R[ x,y ]))) from TARSKI:sch 1(A36);
take y = X;
take d;
thus d = x;
let x;
thus (x in y implies (ex d1 st (ex B st (ex f st ((((d1 in d & B in A) & d1 in ( Collapse (E,B) )) & Q[ B,f,E ]) & x = ( f . d1 ))))))
proof
assume x in y;
then consider y such that A45: y in d and A46: (ex B st (ex f st (((B in A & y in ( Collapse (E,B) )) & Q[ B,f,E ]) & x = ( f . y )))) by A44;
consider B,f such that A47: B in A and A48: y in ( Collapse (E,B) ) and A49: (Q[ B,f,E ] & x = ( f . y )) by A46;
( Collapse (E,B) ) c= E by CKB8:1;
then reconsider d1 = y as (Element of E) by A48;
take d1;
take B;
take f;
thus thesis by A45,A47,A48,A49;
end;

given d1,B,f such that
A50: ((((d1 in d & B in A) & d1 in ( Collapse (E,B) )) & Q[ B,f,E ]) & x = ( f . d1 ));

thus thesis by A44,A50;
end;
consider f such that A51: (( dom f ) = ( Collapse (E,A) ) & (for x holds (x in ( Collapse (E,A) ) implies P[ x,( f . x ) ]))) from CLASSES1:sch 1(A34);
defpred TI[ Ordinal ]
 means
($1 c= A implies Q[ $1,( f | ( Collapse (E,$1) ) ),E ]);
A52: (for B holds ((for C holds (C in B implies TI[ C ])) implies TI[ B ]))
proof
let B;
assume that
A53: (for C holds (C in B implies TI[ C ]));
assume A54: B c= A;
then A55: ( Collapse (E,B) ) c= ( Collapse (E,A) ) by CKB5:1;
thus A56: ( dom ( f | ( Collapse (E,B) ) ) ) = ( Collapse (E,B) ) by A51,A54,CKB5:1,RELAT_1:62;
let d;
assume A57: d in ( Collapse (E,B) );
then ( ( f | ( Collapse (E,B) ) ) . d ) = ( f . d ) by FUNCT_1:49;
then consider d9 such that A58: d9 = d and A59: (for x holds (x in ( ( f | ( Collapse (E,B) ) ) . d ) iff (ex d1 st (ex B st (ex f st ((((d1 in d9 & B in A) & d1 in ( Collapse (E,B) )) & Q[ B,f,E ]) & x = ( f . d1 ))))))) by A51,A55,A57;
set X = ( ( f | ( Collapse (E,B) ) ) . d );
A60: X c= ( ( f | ( Collapse (E,B) ) ) .: d )
proof
let x;
assume x in X;
then consider d1,C,h such that A61: d1 in d9 and C in A and A62: d1 in ( Collapse (E,C) ) and A63: Q[ C,h,E ] and A64: x = ( h . d1 ) by A59;
consider C9 being Ordinal such that A65: C9 in B and A66: d1 in ( Collapse (E,C9) ) by A57,A58,A61,CKB7:1;
A67: (for C holds (for h holds ((((C c= C9 & Q[ C,h,E ]) & d1 in ( Collapse (E,C) )) & x = ( h . d1 )) implies thesis)))
proof
let C;
let h;
assume that
A68: C c= C9
and
A69: Q[ C,h,E ]
and
A70: d1 in ( Collapse (E,C) )
and
A71: x = ( h . d1 );
A72: C in B by A65,A68,ORDINAL1:12;
then C c= A by A54,ORDINAL1:def 2;
then Q[ C,( f | ( Collapse (E,C) ) ),E ] by A53,A72;
then A73: ( f | ( Collapse (E,C) ) ) = h by A32,A69;
C c= B by A72,ORDINAL1:def 2;
then A74: ( Collapse (E,C) ) c= ( Collapse (E,B) ) by CKB5:1;
then ( f | ( Collapse (E,C) ) ) = ( ( f | ( Collapse (E,B) ) ) | ( Collapse (E,C) ) ) by FUNCT_1:51;
then ( h . d1 ) = ( ( f | ( Collapse (E,B) ) ) . d1 ) by A70,A73,FUNCT_1:49;
hence thesis by A56,A58,A61,A70,A71,A74,FUNCT_1:def 6;
end;
(C9 c= C implies thesis)
proof
assume C9 c= C;
then A75: Q[ C9,( h | ( Collapse (E,C9) ) ),E ] by A1,A63;
( h . d1 ) = ( ( h | ( Collapse (E,C9) ) ) . d1 ) by A66,FUNCT_1:49;
hence thesis by A64,A66,A67,A75;
end;
hence thesis by A62,A63,A64,A67;
end;
( ( f | ( Collapse (E,B) ) ) .: d ) c= X
proof
let x;
assume x in ( ( f | ( Collapse (E,B) ) ) .: d );
then consider y such that A76: y in ( dom ( f | ( Collapse (E,B) ) ) ) and A77: y in d and A78: x = ( ( f | ( Collapse (E,B) ) ) . y ) by FUNCT_1:def 6;
( Collapse (E,B) ) c= E by CKB8:1;
then reconsider d1 = y as (Element of E) by A56,A76;
consider C such that A79: C in B and A80: d1 in ( Collapse (E,C) ) by A57,A77,CKB7:1;
C c= B by A79,ORDINAL1:def 2;
then ( Collapse (E,C) ) c= ( Collapse (E,B) ) by CKB5:1;
then ( ( f | ( Collapse (E,B) ) ) | ( Collapse (E,C) ) ) = ( f | ( Collapse (E,C) ) ) by FUNCT_1:51;
then A81: ( ( f | ( Collapse (E,C) ) ) . y ) = ( ( f | ( Collapse (E,B) ) ) . y ) by A80,FUNCT_1:49;
C c= A by A54,A79,ORDINAL1:def 2;
then Q[ C,( f | ( Collapse (E,C) ) ),E ] by A53,A79;
hence thesis by A54,A58,A59,A77,A78,A79,A80,A81;
end;
hence thesis by A60,XBOOLE_0:def 10;
end;
A82: (for B holds TI[ B ]) from ORDINAL1:sch 2(A52);
take f;
( f | ( dom f ) ) = f by RELAT_1:68;
hence thesis by A51,A82;
end;
A83: MAIN[ A ] from ORDINAL1:sch 2(A33);
consider A such that A84: E = ( Collapse (E,A) ) by CKB9:1;
consider f such that A85: Q[ A,f,E ] by A83;
take f;
thus ( dom f ) = E by A84,A85;
let d;
thus thesis by A84,A85;
end;
