environ
vocabularies NUMBERS,REAL_1,SUBSET_1,SEQ_1,PARTFUN1,ARYTM_3,XXREAL_1,TARSKI,RELAT_1,ORDINAL2,FUNCT_1,FDIFF_1,CARD_1,RCOMP_1,XXREAL_2,XREAL_0,ORDINAL1,SEQ_4,XXREAL_0,XBOOLE_0,ARYTM_1,VALUED_0,SEQ_2,VALUED_1,FUNCT_2,FUNCOP_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,FUNCT_2,NUMBERS,XREAL_0,XXREAL_0,XXREAL_2,REAL_1,RELSET_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SEQ_4,PARTFUN1,PARTFUN2,RCOMP_1,FCONT_1,FDIFF_1;
definitions TARSKI,RFUNCT_2,XCMPLX_0;
theorems TARSKI,NAT_1,SEQ_1,SEQ_2,SEQ_4,PARTFUN2,RFUNCT_2,RCOMP_1,FCONT_1,FDIFF_1,ZFMISC_1,FUNCT_1,XREAL_0,XBOOLE_0,XBOOLE_1,XCMPLX_1,FUNCOP_1,XREAL_1,XXREAL_0,VALUED_1,XXREAL_2,XXREAL_1,FUNCT_2,VALUED_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
schemes SEQ_1;
registrations XBOOLE_0,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,RCOMP_1,FDIFF_1,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,FCONT_1,ORDINAL1;
constructors PARTFUN1,REAL_1,NAT_1,SEQ_2,SEQ_4,RCOMP_1,PARTFUN2,RFUNCT_2,FCONT_1,FDIFF_1,VALUED_1,SEQ_1,XXREAL_2,COMPLEX1,RELSET_1,BINOP_2;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve g for Real;
reserve r for Real;
reserve p for Real;
reserve x for Real;
reserve f1 for (PartFunc of ( REAL ),( REAL ));
reserve f2 for (PartFunc of ( REAL ),( REAL ));
theorem
(for p holds (for g holds (for f1 holds (for f2 holds (((f1 is_differentiable_on ]. p,g .[ & f2 is_differentiable_on ]. p,g .[) & (for x holds (x in ]. p,g .[ implies ( diff (f1,x) ) = ( diff (f2,x) )))) implies (( ( f1 - f2 ) | ]. p,g .[ ) is  constant & (ex r st (for x holds (x in ]. p,g .[ implies ( f1 . x ) = ( ( f2 . x ) + r ))))))))))
proof
let p;
let g;
let f1;
let f2;
assume that
A1: (f1 is_differentiable_on ]. p,g .[ & f2 is_differentiable_on ]. p,g .[)
and
A2: (for x holds (x in ]. p,g .[ implies ( diff (f1,x) ) = ( diff (f2,x) )));
reconsider Z = ]. p,g .[ as  open (Subset of ( REAL ));
(]. p,g .[ c= ( dom f1 ) & ]. p,g .[ c= ( dom f2 )) by A1,FDIFF_1:def 6;
then ]. p,g .[ c= ( ( dom f1 ) /\ ( dom f2 ) ) by XBOOLE_1:19;
then A3: ]. p,g .[ c= ( dom ( f1 - f2 ) ) by VALUED_1:12;
then A4: ( f1 - f2 ) is_differentiable_on Z by A1,FDIFF_1:19;
now
let x;
assume A5: x in ]. p,g .[;
hence ( diff (( f1 - f2 ),x) ) = ( ( ( f1 - f2 ) `| Z ) . x ) by A4,FDIFF_1:def 7
.= ( ( diff (f1,x) ) - ( diff (f2,x) ) ) by A1,A3,A5,FDIFF_1:19
.= ( ( diff (f1,x) ) - ( diff (f1,x) ) ) by A2,A5
.= ( 0 );
end;
hence ( ( f1 - f2 ) | ]. p,g .[ ) is  constant by A1,A3,CKB7:1,FDIFF_1:19;
then consider r such that A6: (for x holds (x in ( ]. p,g .[ /\ ( dom ( f1 - f2 ) ) ) implies ( ( f1 - f2 ) . x ) = r)) by PARTFUN2:57;
take r;
let x;
assume A7: x in ]. p,g .[;
then x in ( ]. p,g .[ /\ ( dom ( f1 - f2 ) ) ) by A3,XBOOLE_1:28;
then r = ( ( f1 - f2 ) . x ) by A6
.= ( ( f1 . x ) - ( f2 . x ) ) by A3,A7,VALUED_1:13;
hence thesis;
end;
