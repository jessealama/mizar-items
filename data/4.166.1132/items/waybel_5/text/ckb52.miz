environ
vocabularies WAYBEL_0,ORDINAL2,SUBSET_1,WAYBEL_3,CARD_FIL,XXREAL_0,TARSKI,XBOOLE_0,YELLOW_0,LATTICE3,LATTICES,YELLOW_2,WAYBEL_1,YELLOW_1,RELAT_1,FUNCT_1,STRUCT_0,REWRITE1,PBOOLE,FUNCOP_1,FUNCT_6,CARD_3,FINSEQ_4,ORDERS_2,YELLOW_6,CLASSES1,CLASSES2,ZFMISC_1,FUNCT_5,EQREL_1,FUNCT_2,FINSUB_1,FINSET_1,ORDERS_1,RELAT_2,LATTICE2,CAT_1,XBOOLEAN,PARTFUN1,MEMBER_1,SEQM_3,WAYBEL_5,CARD_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FINSET_1,FINSUB_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCT_4,FUNCT_5,FUNCT_6,FUNCOP_1,ORDERS_1,DOMAIN_1,STRUCT_0,ORDERS_2,LATTICE3,CARD_3,PBOOLE,PRALG_1,PRALG_2,MSUALG_3,CLASSES1,CLASSES2,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_1,WAYBEL_0,WAYBEL_3,YELLOW_6,CKB10,CKB11,CKB13,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB45;
definitions TARSKI,LATTICE3,BINOP_1,STRUCT_0,CKB25,CKB26;
theorems TARSKI,ZFMISC_1,FUNCT_1,FUNCT_2,FUNCT_5,CARD_3,ORDERS_2,LATTICE3,FUNCT_6,FUNCOP_1,PBOOLE,PRALG_1,PRALG_2,MSUALG_3,RELAT_1,FINSUB_1,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_1,WAYBEL_0,WAYBEL_3,CLASSES2,YELLOW_6,CLASSES1,RELSET_1,XBOOLE_0,XBOOLE_1,FUNCT_4,ORDERS_1,STRUCT_0,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB25,CKB26,CKB31,CKB32,CKB33,CKB34,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51;
schemes FUNCT_1,FUNCT_2,MSSUBFAM,DOMAIN_1,BINOP_1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,FUNCT_2,FUNCOP_1,FUNCT_4,FINSET_1,CARD_3,CLASSES2,PBOOLE,STRUCT_0,ORDERS_2,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_3,YELLOW_6,PRALG_1,CARD_1,ORDINAL1,CKB14,CKB15,CKB22,CKB35,CKB36;
constructors FINSUB_1,CLASSES1,CLASSES2,BORSUK_1,LATTICE3,PRALG_1,PRALG_2,MSUALG_3,ORDERS_3,WAYBEL_1,WAYBEL_3,YELLOW_6,CKB13,CKB23,CKB24,CKB25,CKB26,CKB45;
requirements SUBSET,BOOLE,NUMERALS;
begin
reserve x for set;
reserve y for set;
reserve i for set;
reserve L for  complete LATTICE;
reserve J for non empty set;
reserve K for non empty set;
reserve j for (Element of J);
theorem
Lm13: (L is  continuous implies (for J holds (for K holds (for F being (Function of [: J,K :],(the carrier of L)) holds (for X being (Subset of L) holds (X = { a where a is (Element of L): (ex f being  non-empty (ManySortedSet of J) st (f in ( Funcs (J,( Fin K )) ) & (ex G being (DoubleIndexedSet of f,L) st ((for j holds (for x holds (x in ( f . j ) implies ( ( G . j ) . x ) = ( F . (j,x) )))) & a = ( Inf ( Sups G ) ))))) } implies ( Inf ( Sups ( curry F ) ) ) = ( sup X )))))))
proof
assume A1: L is  continuous;
hereby
let J;
let K;
set FIK = { A where A is (Subset of K): (A is  finite & A <> ( {} )) };
set k = the (Element of K);
{ k } in FIK;
then reconsider FIK as non empty set;
let F being (Function of [: J,K :],(the carrier of L));
let X being (Subset of L);
set N = ( Funcs (J,FIK) );
deffunc F((Element of J),(Element of N)) = ( sup ( ( ( curry F ) . $1 ) .: ( $2 . $1 ) ) );
(ex H being (Function of [: J,N :],(the carrier of L)) st (for j being (Element of J) holds (for g being (Element of N) holds ( H . (j,g) ) = F(j,g)))) from BINOP_1:sch 4;
then consider H being (Function of [: J,N :],(the carrier of L)) such that A2: (for j holds (for g being (Element of N) holds ( H . (j,g) ) = ( sup ( ( ( curry F ) . j ) .: ( g . j ) ) )));
set cF = ( curry F );
set cH = ( curry H );
A3: (for j holds (((for Y being  finite (Subset of ( rng ( cF . j ) )) holds (Y <> ( {} ) implies  ex_sup_of Y,L)) & (for x being (Element of L) holds (x in ( rng ( cH . j ) ) implies (ex Y being  finite (Subset of ( rng ( cF . j ) )) st ( ex_sup_of Y,L & x = ( "\/" (Y,L) )))))) & (for Y being  finite (Subset of ( rng ( cF . j ) )) holds (Y <> ( {} ) implies ( "\/" (Y,L) ) in ( rng ( cH . j ) )))))
proof
let j;
set D = ( rng ( ( curry H ) . j ) );
set R = ( rng ( ( curry F ) . j ) );
set Hj = ( ( curry H ) . j );
set Fj = ( ( curry F ) . j );
thus (for Y being  finite (Subset of R) holds (Y <> ( {} ) implies  ex_sup_of Y,L)) by YELLOW_0:17;
thus (for x being (Element of L) holds (x in D implies (ex Y being  finite (Subset of R) st ( ex_sup_of Y,L & x = ( "\/" (Y,L) )))))
proof
let x being (Element of L);
assume x in D;
then consider g being set such that A4: g in ( dom Hj ) and A5: ( Hj . g ) = x by FUNCT_1:def 3;
reconsider g as (Element of N) by A4,CKB46:1;
( g . j ) in FIK;
then (ex A being (Subset of K) st ((A = ( g . j ) & A is  finite) & A <> ( {} )));
then reconsider Y = ( Fj .: ( g . j ) ) as  finite (Subset of R) by RELAT_1:111;
take Y;
x = ( H . (j,g) ) by A5,CKB46:1
.= ( sup ( Fj .: ( g . j ) ) ) by A2;
hence thesis by YELLOW_0:17;
end;

thus (for Y being  finite (Subset of R) holds (Y <> ( {} ) implies ( "\/" (Y,L) ) in D))
proof
let Y being  finite (Subset of R);
consider Z being set such that A6: Z c= ( dom Fj ) and A7: Z is  finite and A8: ( Fj .: Z ) = Y by ORDERS_1:85;
A9: Z c= K by A6,CKB46:1;
assume Y <> ( {} );
then Z <> ( {} ) by A8,RELAT_1:116;
then Z in FIK by A7,A9;
then A10: { Z } c= FIK by ZFMISC_1:31;
(( dom ( J --> Z ) ) = J & ( rng ( J --> Z ) ) = { Z }) by FUNCOP_1:8,FUNCOP_1:13;
then reconsider g = ( J --> Z ) as (Element of N) by A10,FUNCT_2:def 2;
A11: ( g . j ) = Z by FUNCOP_1:7;
g in N;
then A12: g in ( dom Hj ) by CKB46:1;
( Hj . g ) = ( H . (j,g) ) by CKB46:1
.= ( "\/" (Y,L) ) by A2,A8,A11;
hence thesis by A12,FUNCT_1:def 3;
end;

end;
(for j holds ( rng ( ( curry H ) . j ) ) is  directed)
proof
let j;
A13: (for Y being  finite (Subset of ( rng ( cF . j ) )) holds (Y <> ( {} ) implies ( "\/" (Y,L) ) in ( rng ( cH . j ) ))) by A3;
((for Y being  finite (Subset of ( rng ( cF . j ) )) holds (Y <> ( {} ) implies  ex_sup_of Y,L)) & (for x being (Element of L) holds (x in ( rng ( cH . j ) ) implies (ex Y being  finite (Subset of ( rng ( cF . j ) )) st ( ex_sup_of Y,L & x = ( "\/" (Y,L) )))))) by A3;
hence thesis by A13,WAYBEL_0:51;
end;
then A14: ( Inf ( Sups ( curry H ) ) ) = ( Sup ( Infs ( Frege ( curry H ) ) ) ) by A1,CKB41:1;
A15: (for j being set holds (j in ( dom ( curry F ) ) implies ( \\/ (( ( curry F ) . j ),L) ) = ( \\/ (( ( curry H ) . j ),L) )))
proof
let j9 being set;
assume j9 in ( dom ( curry F ) );
then reconsider j = j9 as (Element of J) by CKB46:1;
A16: ((for x being (Element of L) holds (x in ( rng ( cH . j ) ) implies (ex Y being  finite (Subset of ( rng ( cF . j ) )) st ( ex_sup_of Y,L & x = ( "\/" (Y,L) ))))) & (for Y being  finite (Subset of ( rng ( cF . j ) )) holds (Y <> ( {} ) implies ( "\/" (Y,L) ) in ( rng ( cH . j ) )))) by A3;
( ex_sup_of ( rng ( cF . j ) ),L & (for Y being  finite (Subset of ( rng ( cF . j ) )) holds (Y <> ( {} ) implies  ex_sup_of Y,L))) by YELLOW_0:17;
then ( sup ( rng ( cF . j ) ) ) = ( sup ( rng ( cH . j ) ) ) by A16,WAYBEL_0:54;
then ( Sup ( cF . j ) ) = ( sup ( rng ( cH . j ) ) ) by YELLOW_2:def 5;
hence thesis by YELLOW_2:def 5;
end;
assume A17: X = { a where a is (Element of L): (ex f being  non-empty (ManySortedSet of J) st (f in ( Funcs (J,( Fin K )) ) & (ex G being (DoubleIndexedSet of f,L) st ((for j holds (for x holds (x in ( f . j ) implies ( ( G . j ) . x ) = ( F . (j,x) )))) & a = ( Inf ( Sups G ) ))))) };
then A18: ( Inf ( Sups ( curry F ) ) ) >= ( sup X ) by CKB51:1;
A19: FIK c= ( Fin K )
proof
let x being set;
assume x in FIK;
then (ex A being (Subset of K) st ((x = A & A is  finite) & A <> ( {} )));
hence thesis by FINSUB_1:def 5;
end;
A20: (for h being  Function-yielding Function holds (h in ( product ( doms ( curry H ) ) ) implies ((((for j holds ((( ( ( Frege h ) . ( id J ) ) . j ) = ( ( h . j ) . j ) & ( h . j ) in N) & ( ( ( Frege h ) . ( id J ) ) . j ) is  finite non empty  finite non empty (Subset of K))) & ( ( Frege h ) . ( id J ) ) is  non-empty  non-empty (ManySortedSet of J)) & ( ( Frege h ) . ( id J ) ) in ( Funcs (J,FIK) )) & ( ( Frege h ) . ( id J ) ) in ( Funcs (J,( Fin K )) ))))
proof
let h being  Function-yielding Function;
set f = ( ( Frege h ) . ( id J ) );
assume h in ( product ( doms ( curry H ) ) );
then A21: h in ( dom ( Frege ( curry H ) ) ) by PARTFUN1:def 2;
then A22: ( dom h ) = ( dom ( curry H ) ) by CKB17:1
.= J by CKB46:1;
A23: (for x holds (x in ( dom ( doms h ) ) implies ( ( id J ) . x ) in ( ( doms h ) . x )))
proof
let x;
assume x in ( dom ( doms h ) );
then reconsider j = x as (Element of J) by A22,FUNCT_6:59;
( h . j ) in ( ( J --> N ) . j ) by A21,CKB21:1;
then ( h . j ) in N by FUNCOP_1:7;
then (ex g being Function st ((g = ( h . j ) & ( dom g ) = J) & ( rng g ) c= FIK)) by FUNCT_2:def 2;
then (( ( id J ) . j ) = j & ( ( doms h ) . j ) = J) by A22,FUNCT_1:18,FUNCT_6:22;
hence thesis;
end;
(( dom ( id J ) ) = J & ( dom ( doms h ) ) = ( dom h )) by FUNCT_1:17,FUNCT_6:59;
then ( id J ) in ( product ( doms h ) ) by A22,A23,CARD_3:9;
then A24: ( id J ) in ( dom ( Frege h ) ) by PARTFUN1:def 2;
then A25: ( dom f ) = J by A22,CKB17:1;
then reconsider f9 = f as (ManySortedSet of J) by PARTFUN1:def 2,RELAT_1:def 18;
thus A26: (for j holds ((( ( ( Frege h ) . ( id J ) ) . j ) = ( ( h . j ) . j ) & ( h . j ) in N) & ( ( ( Frege h ) . ( id J ) ) . j ) is  finite non empty  finite non empty (Subset of K)))
proof
let j;
thus A27: ( ( ( Frege h ) . ( id J ) ) . j ) = ( ( h . j ) . ( ( id J ) . j ) ) by A22,A24,CKB18:1
.= ( ( h . j ) . j ) by FUNCT_1:18;
( h . j ) in ( ( J --> N ) . j ) by A21,CKB21:1;
hence ( h . j ) in N by FUNCOP_1:7;
then consider g being Function such that A28: (g = ( h . j ) & ( dom g ) = J) and A29: ( rng g ) c= FIK by FUNCT_2:def 2;
( f . j ) in ( rng g ) by A27,A28,FUNCT_1:def 3;
then ( f . j ) in FIK by A29;
then (ex A being (Subset of K) st ((( f . j ) = A & A is  finite) & A <> ( {} )));
hence thesis;
end;

then (for j being set holds (j in J implies ( f9 . j ) is non empty));
hence f is  non-empty  non-empty (ManySortedSet of J) by PBOOLE:def 13;
A30: ( rng f ) c= FIK
proof
let y being set;
assume y in ( rng f );
then consider j being set such that A31: j in ( dom f ) and A32: y = ( f . j ) by FUNCT_1:def 3;
( f . j ) is  finite non empty  finite non empty (Subset of K) by A26,A25,A31;
hence thesis by A32;
end;
hence f in ( Funcs (J,FIK) ) by A25,FUNCT_2:def 2;
( rng f ) c= ( Fin K ) by A19,A30,XBOOLE_1:1;
hence thesis by A25,FUNCT_2:def 2;
end;
A33: (for h being (Element of ( product ( doms ( curry H ) ) )) holds ( Inf ( ( Frege ( curry H ) ) . h ) ) <= ( sup X ))
proof
defpred P[ set,set,set ]
 means
$1 = ( F . ($3,$2) );
let h being (Element of ( product ( doms ( curry H ) ) ));
h in ( product ( doms ( curry H ) ) );
then A34: h in ( dom ( Frege ( curry H ) ) ) by PARTFUN1:def 2;
(for x holds (x in ( dom h ) implies ( h . x ) is Function))
proof
let x;
assume A35: x in ( dom h );
( dom h ) = ( dom ( curry H ) ) by A34,CKB17:1
.= J by CKB46:1;
then reconsider j = x as (Element of J) by A35;
( h . j ) in ( ( J --> N ) . j ) by A34,CKB21:1;
then ( h . j ) in N by FUNCOP_1:7;
hence thesis;
end;
then reconsider h9 = h as  Function-yielding Function by FUNCOP_1:def 6;
reconsider f = ( ( Frege h9 ) . ( id J ) ) as  non-empty (ManySortedSet of J) by A20;
A36: (for j being set holds (j in J implies (for x holds (x in ( f . j ) implies (ex y st (y in ( ( J --> (the carrier of L) ) . j ) & P[ y,x,j ]))))))
proof
let i;
assume i in J;
then reconsider j = i as (Element of J);
let x;
assume A37: x in ( f . i );
( f . j ) is (Subset of K) by A20;
then reconsider k = x as (Element of K) by A37;
take y = ( F . [ j,k ] );
y in (the carrier of L);
hence thesis by FUNCOP_1:7;
end;
(ex G being (ManySortedFunction of f,( J --> (the carrier of L) )) st (for j being set holds (j in J implies (ex g being (Function of ( f . j ),( ( J --> (the carrier of L) ) . j )) st (g = ( G . j ) & (for x holds (x in ( f . j ) implies P[ ( g . x ),x,j ]))))))) from MSSUBFAM:sch 1(A36);
then consider G being (ManySortedFunction of f,( J --> (the carrier of L) )) such that A38: (for j being set holds (j in J implies (ex g being (Function of ( f . j ),( ( J --> (the carrier of L) ) . j )) st (g = ( G . j ) & (for x holds (x in ( f . j ) implies ( g . x ) = ( F . (j,x) )))))));
reconsider G as (DoubleIndexedSet of f,L);
A39: (for j holds (for x holds (x in ( f . j ) implies ( ( G . j ) . x ) = ( F . (j,x) ))))
proof
let j;
let x;
assume A40: x in ( f . j );
(ex g being (Function of ( f . j ),( ( J --> (the carrier of L) ) . j )) st (g = ( G . j ) & (for x holds (x in ( f . j ) implies ( g . x ) = ( F . (j,x) ))))) by A38;
hence thesis by A40;
end;
( Inf ( ( Frege ( curry H ) ) . h ) ) is_<=_than ( rng ( Sups G ) )
proof
let y being (Element of L);
assume y in ( rng ( Sups G ) );
then consider j such that A41: y = ( Sup ( G . j ) ) by CKB34:1;
j in J;
then A42: j in ( dom ( curry H ) ) by CKB46:1;
A43: ( ( ( curry F ) . j ) .: ( f . j ) ) c= ( rng ( G . j ) )
proof
let y being set;
assume y in ( ( ( curry F ) . j ) .: ( f . j ) );
then consider x being set such that A44: x in ( dom ( ( curry F ) . j ) ) and A45: x in ( f . j ) and A46: y = ( ( ( curry F ) . j ) . x ) by FUNCT_1:def 6;
reconsider k = x as (Element of K) by A44,CKB46:1;
A47: k in ( dom ( G . j ) ) by A45,FUNCT_2:def 1;
y = ( F . (j,k) ) by A46,CKB46:1
.= ( ( G . j ) . k ) by A39,A45;
hence thesis by A47,FUNCT_1:def 3;
end;
( ex_sup_of ( ( ( curry F ) . j ) .: ( f . j ) ),L &  ex_sup_of ( rng ( G . j ) ),L) by YELLOW_0:17;
then ( sup ( ( ( curry F ) . j ) .: ( f . j ) ) ) <= ( sup ( rng ( G . j ) ) ) by A43,YELLOW_0:34;
then A48: ( sup ( ( ( curry F ) . j ) .: ( f . j ) ) ) <= ( Sup ( G . j ) ) by YELLOW_2:def 5;
( h . j ) in ( ( J --> N ) . j ) by A34,CKB21:1;
then reconsider hj = ( h . j ) as (Element of N) by FUNCOP_1:7;
A49: ( Inf ( ( Frege ( curry H ) ) . h ) ) <= ( ( ( Frege ( curry H ) ) . h ) . j ) by YELLOW_2:53;
( sup ( ( ( curry F ) . j ) .: ( f . j ) ) ) = ( sup ( ( ( curry F ) . j ) .: ( hj . j ) ) ) by A20
.= ( H . (j,hj) ) by A2
.= ( ( ( curry H ) . j ) . ( h . j ) ) by CKB46:1
.= ( ( ( Frege ( curry H ) ) . h ) . j ) by A34,A42,CKB18:1;
hence ( Inf ( ( Frege ( curry H ) ) . h ) ) <= y by A41,A48,A49,ORDERS_2:3;
end;
then ( Inf ( ( Frege ( curry H ) ) . h ) ) <= ( inf ( rng ( Sups G ) ) ) by YELLOW_0:33;
then A50: ( Inf ( ( Frege ( curry H ) ) . h ) ) <= ( Inf ( Sups G ) ) by YELLOW_2:def 6;
f in ( Funcs (J,( Fin K )) ) by A20;
then ( Inf ( Sups G ) ) in X by A17,A39;
then ( Inf ( Sups G ) ) <= ( sup X ) by YELLOW_2:22;
hence thesis by A50,ORDERS_2:3;
end;
( rng ( Infs ( Frege ( curry H ) ) ) ) is_<=_than ( sup X )
proof
let x being (Element of L);
assume x in ( rng ( Infs ( Frege ( curry H ) ) ) );
then consider h being set such that A51: h in ( dom ( Frege ( curry H ) ) ) and A52: x = ( //\ (( ( Frege ( curry H ) ) . h ),L) ) by CKB33:1;
reconsider h as (Element of ( product ( doms ( curry H ) ) )) by A51,PARTFUN1:def 2;
( Inf ( ( Frege ( curry H ) ) . h ) ) <= ( sup X ) by A33;
hence thesis by A52;
end;
then A53: ( sup ( rng ( Infs ( Frege ( curry H ) ) ) ) ) <= ( sup X ) by YELLOW_0:32;
( dom ( curry F ) ) = J by CKB46:1
.= ( dom ( curry H ) ) by CKB46:1;
then ( Inf ( Sups ( curry F ) ) ) = ( Inf ( Sups ( curry H ) ) ) by A15,CKB31:1;
then ( Inf ( Sups ( curry F ) ) ) <= ( sup X ) by A14,A53,YELLOW_2:def 5;
hence ( Inf ( Sups ( curry F ) ) ) = ( sup X ) by A18,ORDERS_2:2;
end;
end;
