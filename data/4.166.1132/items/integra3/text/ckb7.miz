environ
vocabularies FINSEQ_1,ARYTM_1,INTEGRA1,RELAT_1,ORDINAL2,FUNCT_1,CARD_1,FUNCT_3,SEQ_2,JORDAN3,RFINSEQ,INTEGRA2,FDIFF_1,ARYTM_3,SEQ_4,CLASSES1,VALUED_0,XBOOLE_0,NUMBERS,MEASURE7,XREAL_0,REAL_1,SUBSET_1,XXREAL_2,ORDINAL1,XXREAL_0,NAT_1,TARSKI,ORDINAL4,COMPLEX1,CARD_3,XXREAL_1,PARTFUN1,SEQ_1,MEASURE5;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,NAT_D,RELAT_1,FUNCT_1,FUNCT_2,XXREAL_2,SEQ_4,VALUED_0,PARTFUN1,MEASURE6,FINSEQ_1,RFUNCT_1,RVSUM_1,INTEGRA1,SEQ_1,SEQ_2,FINSEQ_6,RCOMP_1,FDIFF_1,SQUARE_1,CLASSES1,RFINSEQ,MEASURE5,INTEGRA2,CKB3,CKB4;
definitions TARSKI,RVSUM_1,CKB3,CKB4;
theorems SEQ_4,SUBSET_1,PARTFUN1,INTEGRA1,RFUNCT_1,FUNCT_1,FINSEQ_1,RVSUM_1,SEQ_1,SEQ_2,FDIFF_1,ABSVALUE,NAT_1,RFINSEQ,TARSKI,FINSEQ_5,FINSEQ_3,FINSEQ_4,FINSEQ_6,INTEGRA2,RELAT_1,XREAL_0,FUNCT_2,XBOOLE_0,XBOOLE_1,XREAL_1,COMPLEX1,XXREAL_0,FINSOP_1,ORDINAL1,XXREAL_2,SEQM_3,CLASSES1,MEASURE5,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes FINSEQ_2,NAT_1,SEQ_1;
registrations XBOOLE_0,RELAT_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,SEQM_3,INTEGRA1,INTEGRA2,VALUED_0,FUNCT_2,FINSET_1,XXREAL_2,CARD_1,SEQ_2,MEASURE5;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,FINSOP_1,RFUNCT_1,FDIFF_1,RFINSEQ,BINARITH,MEASURE6,FINSEQ_6,INTEGRA2,SEQ_1,BINOP_2,XXREAL_2,NAT_D,RVSUM_1,CLASSES1,SEQ_4,RELSET_1,SEQ_2,CKB3,CKB4;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve a for Real;
reserve b for Real;
reserve x for Real;
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve A for non  empty  closed_interval (Subset of ( REAL ));
reserve D for (Division of A);
theorem
Th3: (x in A implies (ex j st (j in ( dom D ) & x in ( divset (D,j) ))))
proof
assume A1: x in A;
then A2: ( lower_bound A ) <= x by INTEGRA2:1;
A3: x <= ( upper_bound A ) by A1,INTEGRA2:1;
A4: ( rng D ) <> ( {} );
then A5: 1 in ( dom D ) by FINSEQ_3:32;
per cases ;
suppose x in ( rng D );

then consider j such that A6: j in ( dom D ) and A7: ( D . j ) = x by PARTFUN1:3;
x in ( divset (D,j) )
proof
per cases ;
suppose A8: j = 1;

A9: (ex a st (ex b st ((a <= b & a = ( lower_bound ( divset (D,j) ) )) & b = ( upper_bound ( divset (D,j) ) )))) by SEQ_4:11;
( upper_bound ( divset (D,j) ) ) = ( D . j ) by A6,A8,INTEGRA1:def 4;
hence thesis by A7,A9,INTEGRA2:1;
end;
suppose A10: j <> 1;

A11: (ex a st (ex b st ((a <= b & a = ( lower_bound ( divset (D,j) ) )) & b = ( upper_bound ( divset (D,j) ) )))) by SEQ_4:11;
( upper_bound ( divset (D,j) ) ) = ( D . j ) by A6,A10,INTEGRA1:def 4;
hence thesis by A7,A11,INTEGRA2:1;
end;
end;
hence thesis by A6;
end;
suppose A12: (not x in ( rng D ));

defpred MIN[ Nat ]
 means
(x < ( upper_bound ( divset (D,$1) ) ) & $1 in ( dom D ));
A13: ( len D ) in ( dom D ) by FINSEQ_5:6;
( upper_bound ( divset (D,( len D )) ) ) = ( D . ( len D ) )
proof
per cases ;
suppose ( len D ) = 1;

hence thesis by A13,INTEGRA1:def 4;
end;
suppose ( len D ) <> 1;

hence thesis by A13,INTEGRA1:def 4;
end;
end;
then A14: ( upper_bound ( divset (D,( len D )) ) ) = ( upper_bound A ) by INTEGRA1:def 2;
x <> ( upper_bound A )
proof
assume x = ( upper_bound A );
then x = ( D . ( len D ) ) by INTEGRA1:def 2;
hence contradiction by A12,A13,FUNCT_1:def 3;
end;
then x < ( upper_bound ( divset (D,( len D )) ) ) by A3,A14,XXREAL_0:1;
then A15: (ex k being Nat st MIN[ k ]) by A13;
consider k being Nat such that A16: (MIN[ k ] & (for n being Nat holds (MIN[ n ] implies k <= n))) from NAT_1:sch 5(A15);
defpred MAX[ Nat ]
 means
(x >= ( lower_bound ( divset (D,$1) ) ) & $1 in ( dom D ));
( lower_bound ( divset (D,1) ) ) = ( lower_bound A ) by A5,INTEGRA1:def 4;
then A17: (ex k being Nat st MAX[ k ]) by A2,A4,FINSEQ_3:32;
A18: (for k being Nat holds (MAX[ k ] implies k <= ( len D ))) by FINSEQ_3:25;
consider j being Nat such that A19: (MAX[ j ] & (for n being Nat holds (MAX[ n ] implies n <= j))) from NAT_1:sch 6(A18,A17);
k = j
proof
assume A20: k <> j;
per cases  by A20,XXREAL_0:1;
suppose A21: k < j;

A22: ( upper_bound ( divset (D,k) ) ) = ( D . k )
proof
per cases ;
suppose k = 1;

hence thesis by A16,INTEGRA1:def 4;
end;
suppose k <> 1;

hence thesis by A16,INTEGRA1:def 4;
end;
end;
A23: 1 <= k by A16,FINSEQ_3:25;
then ( D . ( j - 1 ) ) <= x by A19,A21,INTEGRA1:def 4;
then A24: ( D . ( j - 1 ) ) < ( D . k ) by A16,A22,XXREAL_0:2;
( j - 1 ) in ( dom D ) by A19,A21,A23,INTEGRA1:7;
then ( j - 1 ) < k by A16,A24,SEQ_4:137;
then j < ( k + 1 ) by XREAL_1:19;
hence contradiction by A21,NAT_1:13;
end;
suppose A25: k > j;

x < ( upper_bound ( divset (D,j) ) )
proof
A26: ( upper_bound ( divset (D,j) ) ) = ( D . j )
proof
per cases ;
suppose j = 1;

hence thesis by A19,INTEGRA1:def 4;
end;
suppose j <> 1;

hence thesis by A19,INTEGRA1:def 4;
end;
end;
assume A27: x >= ( upper_bound ( divset (D,j) ) );
A28: ( j + 1 ) <= k by A25,NAT_1:13;
A29: 1 <= j by A19,FINSEQ_3:25;
then A30: 1 <= ( j + 1 ) by NAT_1:13;
k <= ( len D ) by A16,FINSEQ_3:25;
then ( j + 1 ) <= ( len D ) by A28,XXREAL_0:2;
then A31: ( j + 1 ) in ( dom D ) by A30,FINSEQ_3:25;
( j + 1 ) > 1 by A29,NAT_1:13;
then ( lower_bound ( divset (D,( j + 1 )) ) ) = ( D . ( ( j + 1 ) - 1 ) ) by A31,INTEGRA1:def 4
.= ( D . j );
then ( j + 1 ) <= j by A19,A27,A26,A31;
hence contradiction by NAT_1:13;
end;
hence contradiction by A16,A19,A25;
end;
end;
then x in ( divset (D,k) ) by A16,A19,INTEGRA2:1;
hence thesis by A16;
end;
end;
