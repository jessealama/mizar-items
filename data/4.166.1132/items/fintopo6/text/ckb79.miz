environ
vocabularies NUMBERS,XBOOLE_0,ORDERS_2,SUBSET_1,RELAT_2,FIN_TOPO,TARSKI,CONNSP_1,PRE_TOPC,STRUCT_0,RELAT_1,RCOMP_1,FINSEQ_1,ORDINAL2,XXREAL_0,NAT_1,ARYTM_3,FUNCT_1,ORDINAL4,PARTFUN1,CARD_1,ARYTM_1,BORSUK_2,RFINSEQ,FINTOPO3,FINTOPO6;
notations TARSKI,XBOOLE_0,SUBSET_1,XCMPLX_0,NUMBERS,XXREAL_0,NAT_1,DOMAIN_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FINSEQ_1,STRUCT_0,ORDERS_2,FIN_TOPO,FINTOPO3,NAT_D,ENUMSET1,FINTOPO4,PRE_TOPC,RFINSEQ,CKB6,CKB11,CKB15,CKB36,CKB54,CKB56,CKB61,CKB68,CKB77;
definitions TARSKI,XBOOLE_0,STRUCT_0,SUBSET_1,FIN_TOPO,FINSEQ_1,CKB6,CKB11,CKB15,CKB36,CKB54,CKB56,CKB61,CKB68,CKB77;
theorems NAT_1,ZFMISC_1,FUNCT_1,FINSEQ_1,RELSET_1,XBOOLE_0,XBOOLE_1,FIN_TOPO,FINTOPO3,ENUMSET1,FINTOPO4,FINSEQ_6,JORDAN4,TARSKI,XREAL_1,SUBSET_1,PRE_TOPC,RFINSEQ,FINSEQ_3,FINSEQ_5,REVROT_1,ORDINAL1,XXREAL_0,PARTFUN1,XREAL_0,NAT_D,CKB2,CKB3,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB15,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB59,CKB60,CKB61,CKB63,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78;
schemes NAT_1,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,STRUCT_0,FIN_TOPO,CKB1,CKB4,CKB13,CKB14,CKB17,CKB35,CKB58,CKB62,CKB64;
constructors DOMAIN_1,NAT_1,EQREL_1,RFINSEQ,RFUNCT_3,NAT_D,FIN_TOPO,FINTOPO3,FINTOPO4,REAL_1,RELSET_1,CKB6,CKB11,CKB15,CKB36,CKB54,CKB56,CKB61,CKB68,CKB77;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve FT for non  empty RelStr;
reserve A for (Subset of FT);
theorem
(for g being (FinSequence of FT) holds (for A being (Subset of FT) holds (for x1,x2 being (Element of FT) holds (((g is_minimum_path_in A,x1,x2 & FT is  filled  symmetric) & x1 <> x2) implies (((for i being Nat holds ((1 < i & i < ( len g )) implies ( ( rng g ) /\ ( U_FT ( g /. i ) ) ) = { ( g . ( i -' 1 ) ),( g . i ),( g . ( i + 1 ) ) })) & ( ( rng g ) /\ ( U_FT ( g /. 1 ) ) ) = { ( g . 1 ),( g . 2 ) }) & ( ( rng g ) /\ ( U_FT ( g /. ( len g ) ) ) ) = { ( g . ( ( len g ) -' 1 ) ),( g . ( len g ) ) })))))
proof
let g being (FinSequence of FT);
let A being (Subset of FT);
let x1 being (Element of FT);
let x2 being (Element of FT);
assume that
A1: g is_minimum_path_in A,x1,x2
and
A2: FT is  filled  symmetric
and
A3: x1 <> x2;
A4: ( dom g ) = ( Seg ( len g ) ) by FINSEQ_1:def 3;
A5: g is  continuous by A1,CKB68:def 1;
then A6: 1 <= ( len g ) by CKB56:def 1;
then A7: ( len g ) in ( dom g ) by A4;
then A8: ( g . ( len g ) ) = ( g /. ( len g ) ) by PARTFUN1:def 6;
A9: g is  inv_continuous by A1,A2,CKB78:1;
then A10: 1 <= ( len g ) by CKB77:def 1;
thus (for i being Nat holds ((1 < i & i < ( len g )) implies ( ( rng g ) /\ ( U_FT ( g /. i ) ) ) = { ( g . ( i -' 1 ) ),( g . i ),( g . ( i + 1 ) ) }))
proof
let i being Nat;
assume that
A11: 1 < i
and
A12: i < ( len g );
A13: i in ( Seg ( len g ) ) by A11,A12,FINSEQ_1:1;
(1 < ( i + 1 ) & ( i + 1 ) <= ( len g )) by A11,A12,NAT_1:13;
then A14: ( i + 1 ) in ( Seg ( len g ) );
( i -' 1 ) <= i by NAT_D:35;
then A15: ( i -' 1 ) < ( len g ) by A12,XXREAL_0:2;
( 1 + 1 ) <= i by A11,NAT_1:13;
then A16: 1 <= ( i - 1 ) by XREAL_1:19;
then 1 <= ( i -' 1 ) by A11,XREAL_1:233;
then A17: ( i -' 1 ) in ( Seg ( len g ) ) by A15;
A18: ( ( i -' 1 ) + 1 ) = ( ( i - 1 ) + 1 ) by A11,XREAL_1:233
.= i;
thus ( ( rng g ) /\ ( U_FT ( g /. i ) ) ) = { ( g . ( i -' 1 ) ),( g . i ),( g . ( i + 1 ) ) }
proof
thus ( ( rng g ) /\ ( U_FT ( g /. i ) ) ) c= { ( g . ( i -' 1 ) ),( g . i ),( g . ( i + 1 ) ) }
proof
let x being set;
assume A19: x in ( ( rng g ) /\ ( U_FT ( g /. i ) ) );
then A20: x in ( U_FT ( g /. i ) ) by XBOOLE_0:def 4;
x in ( rng g ) by A19,XBOOLE_0:def 4;
then consider nx being set such that A21: nx in ( dom g ) and A22: x = ( g . nx ) by FUNCT_1:def 3;
reconsider j = nx as (Element of ( NAT )) by A21;
(i = ( j + 1 ) implies ( i - 1 ) = j);
then A23: (i = ( j + 1 ) implies ( i -' 1 ) = j) by A11,XREAL_1:233;
A24: ( g /. i ) = ( g . i ) by A4,A13,PARTFUN1:def 6;
(1 <= j & j <= ( len g )) by A4,A21,FINSEQ_1:1;
then ((j = i or i = ( j + 1 )) or j = ( i + 1 )) by A9,A11,A12,A20,A22,A24,CKB77:def 1;
hence thesis by A22,A23,ENUMSET1:def 1;
end;

let x being set;
A25: ( g . i ) = ( g /. i ) by A4,A13,PARTFUN1:def 6;
A26: ( g . ( i -' 1 ) ) = ( g /. ( i -' 1 ) ) by A4,A17,PARTFUN1:def 6;
assume A27: x in { ( g . ( i -' 1 ) ),( g . i ),( g . ( i + 1 ) ) };
per cases  by A27,ENUMSET1:def 1;
suppose A28: x = ( g . ( i -' 1 ) );

( g . i ) in ( U_FT ( g /. ( i -' 1 ) ) ) by A5,A16,A15,A18,A26,CKB56:def 1;
then A29: x in ( U_FT ( g /. i ) ) by A2,A25,A26,A28,FIN_TOPO:def 13;
x in ( rng g ) by A4,A17,A28,FUNCT_1:def 3;
hence thesis by A29,XBOOLE_0:def 4;
end;
suppose x = ( g . i );

then (x in ( rng g ) & x in ( U_FT ( g /. i ) )) by A2,A4,A13,A25,FIN_TOPO:def 4,FUNCT_1:def 3;
hence thesis by XBOOLE_0:def 4;
end;
suppose x = ( g . ( i + 1 ) );

then (x in ( rng g ) & x in ( U_FT ( g /. i ) )) by A5,A4,A11,A12,A14,A25,CKB56:def 1,FUNCT_1:def 3;
hence thesis by XBOOLE_0:def 4;
end;
end;

end;

(( g . 1 ) = x1 & ( g . ( len g ) ) = x2) by A1,CKB68:def 1;
then A30: 1 < ( len g ) by A3,A6,XXREAL_0:1;
then A31: ( 1 + 1 ) <= ( len g ) by NAT_1:13;
then A32: ( ( 1 + 1 ) - 1 ) <= ( ( len g ) - 1 ) by XREAL_1:13;
A33: 1 in ( dom g ) by A10,FINSEQ_3:25;
then A34: ( g . 1 ) = ( g /. 1 ) by PARTFUN1:def 6;
thus ( ( rng g ) /\ ( U_FT ( g /. 1 ) ) ) = { ( g . 1 ),( g . 2 ) }
proof
thus ( ( rng g ) /\ ( U_FT ( g /. 1 ) ) ) c= { ( g . 1 ),( g . 2 ) }
proof
let x being set;
assume A35: x in ( ( rng g ) /\ ( U_FT ( g /. 1 ) ) );
then A36: x in ( U_FT ( g /. 1 ) ) by XBOOLE_0:def 4;
x in ( rng g ) by A35,XBOOLE_0:def 4;
then consider y being set such that A37: y in ( dom g ) and A38: x = ( g . y ) by FUNCT_1:def 3;
reconsider j = y as (Element of ( NAT )) by A37;
A39: 1 <= j by A4,A37,FINSEQ_1:1;
j <= ( len g ) by A4,A37,FINSEQ_1:1;
then ((( 1 + 1 ) = j or 1 = j) or ( j + 1 ) = 1) by A9,A10,A34,A36,A38,A39,CKB77:def 1;
then (( 1 + 1 ) = j or 1 = j) by A39,XREAL_1:7;
hence thesis by A38,TARSKI:def 2;
end;

let x being set;
2 in ( dom g ) by A31,A4;
then A40: (x = ( g . 2 ) implies x in ( rng g )) by FUNCT_1:def 3;
assume A41: x in { ( g . 1 ),( g . 2 ) };
A42:now
per cases  by A41,TARSKI:def 2;
case x = ( g . 1 );
hence x in ( U_FT ( g /. 1 ) ) by A2,A34,FIN_TOPO:def 4;
end;
case A43: x = ( g . 2 );
then reconsider xx = x as (Element of FT) by A40;
xx = ( g . ( 1 + 1 ) ) by A43;
hence x in ( U_FT ( g /. 1 ) ) by A5,A30,A34,CKB56:def 1;
end;
end;
(x = ( g . 1 ) implies x in ( rng g )) by A33,FUNCT_1:def 3;
hence thesis by A40,A42,XBOOLE_0:def 4;
end;

( len g ) < ( ( len g ) + 1 ) by NAT_1:13;
then A44: ( ( len g ) - 1 ) < ( ( ( len g ) + 1 ) - 1 ) by XREAL_1:14;
then A45: ( ( len g ) -' 1 ) < ( len g ) by A10,XREAL_1:233;
A46: ( ( len g ) -' 1 ) = ( ( len g ) - 1 ) by A10,XREAL_1:233;
then A47: ( ( len g ) -' 1 ) in ( dom g ) by A32,A44,FINSEQ_3:25;
then A48: ( g . ( ( len g ) -' 1 ) ) = ( g /. ( ( len g ) -' 1 ) ) by PARTFUN1:def 6;
A49: 1 <= ( ( len g ) -' 1 ) by A10,A32,XREAL_1:233;
thus ( ( rng g ) /\ ( U_FT ( g /. ( len g ) ) ) ) = { ( g . ( ( len g ) -' 1 ) ),( g . ( len g ) ) }
proof
thus ( ( rng g ) /\ ( U_FT ( g /. ( len g ) ) ) ) c= { ( g . ( ( len g ) -' 1 ) ),( g . ( len g ) ) }
proof
let x being set;
assume A50: x in ( ( rng g ) /\ ( U_FT ( g /. ( len g ) ) ) );
then A51: x in ( U_FT ( g /. ( len g ) ) ) by XBOOLE_0:def 4;
x in ( rng g ) by A50,XBOOLE_0:def 4;
then consider y being set such that A52: y in ( dom g ) and A53: x = ( g . y ) by FUNCT_1:def 3;
reconsider ny = y as (Element of ( NAT )) by A52;
A54: ny <= ( len g ) by A4,A52,FINSEQ_1:1;
1 <= ny by A4,A52,FINSEQ_1:1;
then ((( ny + 1 ) = ( len g ) or ( ( len g ) + 1 ) = ny) or ( len g ) = ny) by A9,A10,A8,A51,A53,A54,CKB77:def 1;
then (ny = ( ( len g ) - 1 ) or ( len g ) = ny) by A54,NAT_1:13;
then (x = ( g . ( ( len g ) -' 1 ) ) or x = ( g . ( len g ) )) by A6,A53,XREAL_1:233;
hence thesis by TARSKI:def 2;
end;

let x being set;
A55: ( g . ( len g ) ) in ( U_FT ( g /. ( len g ) ) ) by A2,A8,FIN_TOPO:def 4;
( g . ( ( ( len g ) -' 1 ) + 1 ) ) in ( U_FT ( g /. ( ( len g ) -' 1 ) ) ) by A5,A49,A45,A48,CKB56:def 1;
then A56: ( g . ( ( len g ) -' 1 ) ) in ( U_FT ( g /. ( len g ) ) ) by A2,A8,A46,A48,FIN_TOPO:def 13;
assume x in { ( g . ( ( len g ) -' 1 ) ),( g . ( len g ) ) };
then A57: (x = ( g . ( ( len g ) -' 1 ) ) or x = ( g . ( len g ) )) by TARSKI:def 2;
then x in ( rng g ) by A7,A47,FUNCT_1:def 3;
hence thesis by A57,A55,A56,XBOOLE_0:def 4;
end;

end;
