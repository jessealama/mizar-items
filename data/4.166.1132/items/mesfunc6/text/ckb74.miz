environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,FUNCT_1,PARTFUN1,SUBSET_1,REAL_1,XREAL_0,ORDINAL1,NAT_1,COMPLEX1,MEASURE6,RELAT_1,MEASURE1,MESFUNC2,TARSKI,FINSEQ_1,XXREAL_0,ARYTM_3,ARYTM_1,VALUED_0,MESFUNC1,SETFAM_1,VALUED_1,RAT_1,RFUNCT_3,SUPINF_2,CARD_1,SUPINF_1,MESFUNC5,MESFUNC3,INT_1,ZFMISC_1,INTEGRA5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,DOMAIN_1,XREAL_0,REAL_1,RAT_1,NAT_1,NAT_D,FUNCT_1,RELSET_1,PARTFUN1,FINSEQ_1,VALUED_1,SUPINF_2,SEQ_1,COMPLEX1,XXREAL_0,RFUNCT_3,MEASURE6,FUNCT_2,SUPINF_1,MEASURE1,EXTREAL1,MESFUNC1,MESFUNC2,MESFUNC3,SETFAM_1,PROB_1,MESFUNC5,CKB12,CKB50;
definitions TARSKI,XBOOLE_0,SUPINF_2,RFUNCT_3,FINSEQ_1,MESFUNC5,MEASURE6,VALUED_1,CKB12,CKB50;
theorems MEASURE1,TARSKI,PARTFUN1,FUNCT_1,NAT_1,SUPINF_2,EXTREAL1,EXTREAL2,MESFUNC1,FINSEQ_1,ABSVALUE,PROB_1,XBOOLE_0,XBOOLE_1,MESFUNC2,MESFUNC3,XREAL_1,ZFMISC_1,MESFUNC5,XXREAL_0,RFUNCT_3,FUZZY_2,FINSUB_1,NAT_2,FINSEQ_3,FINSEQ_2,NAT_D,NUMBERS,VALUED_1,XXREAL_3,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73;
schemes FINSEQ_1,PARTFUN1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,RAT_1,MEMBERED,MEASURE1,VALUED_0;
constructors DOMAIN_1,REAL_1,SQUARE_1,NAT_D,MEASURE3,MEASURE6,EXTREAL1,MESFUNC1,EXTREAL2,BINARITH,MESFUNC2,MESFUNC3,MESFUNC5,SEQ_1,SUPINF_1,RELSET_1,CKB12,CKB50;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Lm1: (for X being non empty set holds (for S being (SigmaField of X) holds (for M being (sigma_Measure of S) holds (for f,g being (PartFunc of X,( REAL )) holds ((((f is_simple_func_in S & ( dom f ) <> ( {} )) & g is_simple_func_in S) & ( dom g ) = ( dom f )) implies (( f + g ) is_simple_func_in S & ( dom ( f + g ) ) <> ( {} )))))))
proof
let X being non empty set;
let S being (SigmaField of X);
let M being (sigma_Measure of S);
let f being (PartFunc of X,( REAL )),g being (PartFunc of X,( REAL ));
assume that
A1: f is_simple_func_in S
and
A2: ( dom f ) <> ( {} )
and
A3: g is_simple_func_in S
and
A4: ( dom g ) = ( dom f );
( R_EAL f ) is_simple_func_in S by A1,CKB51:1;
then consider F being (Finite_Sep_Sequence of S),a being (FinSequence of ( ExtREAL )) such that A5: F,a are_Re-presentation_of ( R_EAL f ) by MESFUNC3:12;
set la = ( len F );
A6: ( dom f ) = ( union ( rng F ) ) by A5,MESFUNC3:def 1;
( R_EAL g ) is_simple_func_in S by A3,CKB51:1;
then consider G being (Finite_Sep_Sequence of S),b being (FinSequence of ( ExtREAL )) such that A7: G,b are_Re-presentation_of ( R_EAL g ) by MESFUNC3:12;
set lb = ( len G );
A8: ( dom ( f + g ) ) = ( ( dom f ) /\ ( dom g ) ) by VALUED_1:def 1;
deffunc FG1(Nat) = ( ( F . ( ( ( $1 -' 1 ) div lb ) + 1 ) ) /\ ( G . ( ( ( $1 -' 1 ) mod lb ) + 1 ) ) );
consider FG being FinSequence such that A9: ( len FG ) = ( la * lb ) and A10: (for k being Nat holds (k in ( dom FG ) implies ( FG . k ) = FG1(k))) from FINSEQ_1:sch 2;
A11: ( dom FG ) = ( Seg ( la * lb ) ) by A9,FINSEQ_1:def 3;
now
reconsider la9 = la,lb9 = lb as  natural number;
let k being Nat;
set i = ( ( ( k -' 1 ) div lb ) + 1 );
set j = ( ( ( k -' 1 ) mod lb ) + 1 );
assume A12: k in ( dom FG );
then A13: k in ( Seg ( la * lb ) ) by A9,FINSEQ_1:def 3;
then A14: k <= ( la * lb ) by FINSEQ_1:1;
then ( k -' 1 ) <= ( ( la * lb ) -' 1 ) by NAT_D:42;
then A15: ( ( k -' 1 ) div lb ) <= ( ( ( la * lb ) -' 1 ) div lb ) by NAT_2:24;
1 <= k by A13,FINSEQ_1:1;
then A16: (lb9 divides ( la9 * lb9 ) & 1 <= ( la * lb )) by A14,NAT_D:def 3,XXREAL_0:2;
A17: lb <> ( 0 ) by A13,A14,FINSEQ_1:1;
then lb >= ( ( 0 ) + 1 ) by NAT_1:13;
then ( ( ( la9 * lb9 ) -' 1 ) div lb9 ) = ( ( ( la9 * lb9 ) div lb9 ) - 1 ) by A16,NAT_2:15;
then ( ( ( k -' 1 ) div lb ) + 1 ) <= ( ( la * lb ) div lb ) by A15,XREAL_1:19;
then (i >= ( ( 0 ) + 1 ) & i <= la) by A17,NAT_D:18,XREAL_1:6;
then i in ( Seg la );
then i in ( dom F ) by FINSEQ_1:def 3;
then A18: ( F . i ) in ( rng F ) by FUNCT_1:3;
( ( k -' 1 ) mod lb ) < lb by A17,NAT_D:1;
then (j >= ( ( 0 ) + 1 ) & j <= lb) by NAT_1:13;
then j in ( dom G ) by FINSEQ_3:25;
then ( G . j ) in ( rng G ) by FUNCT_1:3;
then ( ( F . i ) /\ ( G . j ) ) in S by A18,MEASURE1:34;
hence ( FG . k ) in S by A10,A12;
end;
then reconsider FG as (FinSequence of S) by FINSEQ_2:12;
(for k,l being Nat holds (((k in ( dom FG ) & l in ( dom FG )) & k <> l) implies ( FG . k ) misses ( FG . l )))
proof
reconsider la9 = la,lb9 = lb as  natural number;
let k being Nat,l being Nat;
assume that
A19: k in ( dom FG )
and
A20: l in ( dom FG )
and
A21: k <> l;
set j = ( ( ( k -' 1 ) mod lb ) + 1 );
set i = ( ( ( k -' 1 ) div lb ) + 1 );
A22: ( FG . k ) = ( ( F . i ) /\ ( G . j ) ) by A10,A19;
set m = ( ( ( l -' 1 ) mod lb ) + 1 );
set n = ( ( ( l -' 1 ) div lb ) + 1 );
A23: k in ( Seg ( la * lb ) ) by A9,A19,FINSEQ_1:def 3;
then A24: 1 <= k by FINSEQ_1:1;
then A25: lb <> ( 0 ) by A23,FINSEQ_1:1;
then ( ( k -' 1 ) mod lb ) < lb by NAT_D:1;
then (j >= ( ( 0 ) + 1 ) & j <= lb) by NAT_1:13;
then A26: j in ( dom G ) by FINSEQ_3:25;
A27: k <= ( la * lb ) by A23,FINSEQ_1:1;
then A28: (lb9 divides ( la9 * lb9 ) & 1 <= ( la * lb )) by A24,NAT_D:def 3,XXREAL_0:2;
lb >= ( ( 0 ) + 1 ) by A25,NAT_1:13;
then A29: ( ( ( la9 * lb9 ) -' 1 ) div lb9 ) = ( ( ( la9 * lb9 ) div lb9 ) - 1 ) by A28,NAT_2:15;
A30: l in ( Seg ( la * lb ) ) by A9,A20,FINSEQ_1:def 3;
then A31: 1 <= l by FINSEQ_1:1;
A32:now
( ( l -' 1 ) + 1 ) = ( ( ( ( n - 1 ) * lb ) + ( m - 1 ) ) + 1 ) by A25,NAT_D:2;
then A33: ( ( l - 1 ) + 1 ) = ( ( ( n - 1 ) * lb ) + m ) by A31,XREAL_1:233;
( ( k -' 1 ) + 1 ) = ( ( ( ( i - 1 ) * lb ) + ( j - 1 ) ) + 1 ) by A25,NAT_D:2;
then A34: ( ( k - 1 ) + 1 ) = ( ( ( i - 1 ) * lb ) + j ) by A24,XREAL_1:233;
assume (i = n & j = m);
hence contradiction by A21,A34,A33;
end;
( k -' 1 ) <= ( ( la * lb ) -' 1 ) by A27,NAT_D:42;
then ( ( k -' 1 ) div lb ) <= ( ( ( la * lb ) div lb ) - 1 ) by A29,NAT_2:24;
then ( ( ( k -' 1 ) div lb ) + 1 ) <= ( ( la * lb ) div lb ) by XREAL_1:19;
then (i >= ( ( 0 ) + 1 ) & i <= la) by A25,NAT_D:18,XREAL_1:6;
then i in ( Seg la );
then A35: i in ( dom F ) by FINSEQ_1:def 3;
( ( l -' 1 ) mod lb ) < lb by A25,NAT_D:1;
then (m >= ( ( 0 ) + 1 ) & m <= lb) by NAT_1:13;
then A36: m in ( dom G ) by FINSEQ_3:25;
l <= ( la * lb ) by A30,FINSEQ_1:1;
then ( l -' 1 ) <= ( ( la * lb ) -' 1 ) by NAT_D:42;
then ( ( l -' 1 ) div lb ) <= ( ( ( la * lb ) div lb ) - 1 ) by A29,NAT_2:24;
then ( ( ( l -' 1 ) div lb ) + 1 ) <= ( ( la * lb ) div lb ) by XREAL_1:19;
then (n >= ( ( 0 ) + 1 ) & n <= la) by A25,NAT_D:18,XREAL_1:6;
then n in ( Seg la );
then A37: n in ( dom F ) by FINSEQ_1:def 3;
per cases  by A32;
suppose A38: i <> n;

( ( FG . k ) /\ ( FG . l ) ) = ( ( ( F . i ) /\ ( G . j ) ) /\ ( ( F . n ) /\ ( G . m ) ) ) by A10,A20,A22;
then ( ( FG . k ) /\ ( FG . l ) ) = ( ( F . i ) /\ ( ( G . j ) /\ ( ( F . n ) /\ ( G . m ) ) ) ) by XBOOLE_1:16;
then ( ( FG . k ) /\ ( FG . l ) ) = ( ( F . i ) /\ ( ( F . n ) /\ ( ( G . j ) /\ ( G . m ) ) ) ) by XBOOLE_1:16;
then A39: ( ( FG . k ) /\ ( FG . l ) ) = ( ( ( F . i ) /\ ( F . n ) ) /\ ( ( G . j ) /\ ( G . m ) ) ) by XBOOLE_1:16;
( F . i ) misses ( F . n ) by A35,A37,A38,MESFUNC3:4;
then ( ( FG . k ) /\ ( FG . l ) ) = ( ( {} ) /\ ( ( G . j ) /\ ( G . m ) ) ) by A39,XBOOLE_0:def 7;
hence thesis by XBOOLE_0:def 7;
end;
suppose A40: j <> m;

( ( FG . k ) /\ ( FG . l ) ) = ( ( ( F . i ) /\ ( G . j ) ) /\ ( ( F . n ) /\ ( G . m ) ) ) by A10,A20,A22;
then ( ( FG . k ) /\ ( FG . l ) ) = ( ( F . i ) /\ ( ( G . j ) /\ ( ( F . n ) /\ ( G . m ) ) ) ) by XBOOLE_1:16;
then ( ( FG . k ) /\ ( FG . l ) ) = ( ( F . i ) /\ ( ( F . n ) /\ ( ( G . j ) /\ ( G . m ) ) ) ) by XBOOLE_1:16;
then A41: ( ( FG . k ) /\ ( FG . l ) ) = ( ( ( F . i ) /\ ( F . n ) ) /\ ( ( G . j ) /\ ( G . m ) ) ) by XBOOLE_1:16;
( G . j ) misses ( G . m ) by A26,A36,A40,MESFUNC3:4;
then ( ( FG . k ) /\ ( FG . l ) ) = ( ( ( F . i ) /\ ( F . n ) ) /\ ( {} ) ) by A41,XBOOLE_0:def 7;
hence thesis by XBOOLE_0:def 7;
end;
end;
then reconsider FG as (Finite_Sep_Sequence of S) by MESFUNC3:4;
A42: ( dom g ) = ( union ( rng G ) ) by A7,MESFUNC3:def 1;
A43: ( dom f ) = ( union ( rng FG ) )
proof
now
let z being set;
assume A44: z in ( dom f );
then consider Y being set such that A45: z in Y and A46: Y in ( rng F ) by A6,TARSKI:def 4;
consider i being Nat such that A47: i in ( dom F ) and A48: Y = ( F . i ) by A46,FINSEQ_2:10;
A49: i in ( Seg ( len F ) ) by A47,FINSEQ_1:def 3;
then 1 <= i by FINSEQ_1:1;
then consider i9 being Nat such that A50: i = ( 1 + i9 ) by NAT_1:10;
consider Z being set such that A51: z in Z and A52: Z in ( rng G ) by A4,A42,A44,TARSKI:def 4;
consider j being Nat such that A53: j in ( dom G ) and A54: Z = ( G . j ) by A52,FINSEQ_2:10;
A55: j in ( Seg ( len G ) ) by A53,FINSEQ_1:def 3;
then A56: 1 <= j by FINSEQ_1:1;
then consider j9 being Nat such that A57: j = ( 1 + j9 ) by NAT_1:10;
A58: j <= lb by A55,FINSEQ_1:1;
then A59: j9 < lb by A57,NAT_1:13;
reconsider k = ( ( ( i - 1 ) * lb ) + j ) as Nat by A50;
A60: k >= ( ( 0 ) + j ) by A50,XREAL_1:6;
then A61: ( k -' 1 ) = ( k - 1 ) by A56,XREAL_1:233,XXREAL_0:2
.= ( ( i9 * lb ) + j9 ) by A50,A57;
then A62: i = ( ( ( k -' 1 ) div lb ) + 1 ) by A50,A59,NAT_D:def 1;
i <= la by A49,FINSEQ_1:1;
then ( i - 1 ) <= ( la - 1 ) by XREAL_1:9;
then ( ( i - 1 ) * lb ) <= ( ( la - 1 ) * lb ) by XREAL_1:64;
then A63: k <= ( ( ( la - 1 ) * lb ) + j ) by XREAL_1:6;
( ( ( la - 1 ) * lb ) + j ) <= ( ( ( la - 1 ) * lb ) + lb ) by A58,XREAL_1:6;
then A64: k <= ( la * lb ) by A63,XXREAL_0:2;
k >= 1 by A56,A60,XXREAL_0:2;
then A65: k in ( Seg ( la * lb ) ) by A64,FINSEQ_1:1;
then k in ( dom FG ) by A9,FINSEQ_1:def 3;
then A66: ( FG . k ) in ( rng FG ) by FUNCT_1:def 3;
A67: j = ( ( ( k -' 1 ) mod lb ) + 1 ) by A57,A61,A59,NAT_D:def 2;
z in ( ( F . i ) /\ ( G . j ) ) by A45,A48,A51,A54,XBOOLE_0:def 4;
then z in ( FG . k ) by A10,A11,A62,A67,A65;
hence z in ( union ( rng FG ) ) by A66,TARSKI:def 4;
end;
hence ( dom f ) c= ( union ( rng FG ) ) by TARSKI:def 3;
reconsider la9 = la,lb9 = lb as  natural number;
let z being set;
assume z in ( union ( rng FG ) );
then consider Y being set such that A68: z in Y and A69: Y in ( rng FG ) by TARSKI:def 4;
consider k being Nat such that A70: k in ( dom FG ) and A71: Y = ( FG . k ) by A69,FINSEQ_2:10;
set j = ( ( ( k -' 1 ) mod lb ) + 1 );
set i = ( ( ( k -' 1 ) div lb ) + 1 );
A72: k in ( Seg ( len FG ) ) by A70,FINSEQ_1:def 3;
then A73: k <= ( la * lb ) by A9,FINSEQ_1:1;
then A74: lb <> ( 0 ) by A72,FINSEQ_1:1;
then A75: lb >= ( ( 0 ) + 1 ) by NAT_1:13;
1 <= k by A72,FINSEQ_1:1;
then (lb9 divides ( la9 * lb9 ) & 1 <= ( la * lb )) by A73,NAT_D:def 3,XXREAL_0:2;
then A76: ( ( ( la9 * lb9 ) -' 1 ) div lb9 ) = ( ( ( la9 * lb9 ) div lb9 ) - 1 ) by A75,NAT_2:15;
( k -' 1 ) <= ( ( la * lb ) -' 1 ) by A73,NAT_D:42;
then ( ( k -' 1 ) div lb ) <= ( ( ( la * lb ) div lb ) - 1 ) by A76,NAT_2:24;
then A77: i <= ( ( la * lb ) div lb ) by XREAL_1:19;
(i >= ( ( 0 ) + 1 ) & ( ( la * lb ) div lb ) = la) by A74,NAT_D:18,XREAL_1:6;
then i in ( Seg la ) by A77;
then i in ( dom F ) by FINSEQ_1:def 3;
then A78: ( F . i ) in ( rng F ) by FUNCT_1:def 3;
( FG . k ) = ( ( F . i ) /\ ( G . j ) ) by A10,A70;
then z in ( F . i ) by A68,A71,XBOOLE_0:def 4;
hence thesis by A6,A78,TARSKI:def 4;
end;
(for k being Nat holds (for x,y being (Element of X) holds (((k in ( dom FG ) & x in ( FG . k )) & y in ( FG . k )) implies ( ( f + g ) . x ) = ( ( f + g ) . y ))))
proof
reconsider la9 = la,lb9 = lb as  natural number;
let k being Nat;
let x being (Element of X),y being (Element of X);
assume that
A79: k in ( dom FG )
and
A80: x in ( FG . k )
and
A81: y in ( FG . k );
set i = ( ( ( k -' 1 ) div lb ) + 1 );
set j = ( ( ( k -' 1 ) mod lb ) + 1 );
A82: k in ( Seg ( len FG ) ) by A79,FINSEQ_1:def 3;
then A83: k <= ( la * lb ) by A9,FINSEQ_1:1;
then A84: ( k -' 1 ) <= ( ( la * lb ) -' 1 ) by NAT_D:42;
A85: lb <> ( 0 ) by A82,A83,FINSEQ_1:1;
then ( ( k -' 1 ) mod lb ) < lb by NAT_D:1;
then (j >= ( ( 0 ) + 1 ) & j <= lb) by NAT_1:13;
then j in ( Seg lb );
then A86: j in ( dom G ) by FINSEQ_1:def 3;
1 <= k by A82,FINSEQ_1:1;
then A87: (lb9 divides ( la9 * lb9 ) & 1 <= ( la * lb )) by A83,NAT_D:def 3,XXREAL_0:2;
lb >= ( ( 0 ) + 1 ) by A85,NAT_1:13;
then ( ( ( la9 * lb9 ) -' 1 ) div lb9 ) = ( ( ( la9 * lb9 ) div lb9 ) - 1 ) by A87,NAT_2:15;
then ( ( k -' 1 ) div lb ) <= ( ( ( la * lb ) div lb ) - 1 ) by A84,NAT_2:24;
then ( ( ( k -' 1 ) div lb ) + 1 ) <= ( ( la * lb ) div lb ) by XREAL_1:19;
then (i >= ( ( 0 ) + 1 ) & i <= la) by A85,NAT_D:18,XREAL_1:6;
then i in ( Seg la );
then A88: i in ( dom F ) by FINSEQ_1:def 3;
A89: ( FG . k ) = ( ( F . ( ( ( k -' 1 ) div lb ) + 1 ) ) /\ ( G . ( ( ( k -' 1 ) mod lb ) + 1 ) ) ) by A10,A79;
then x in ( G . j ) by A80,XBOOLE_0:def 4;
then A90: ( g . x ) = ( b . j ) by A7,A86,MESFUNC3:def 1;
y in ( G . j ) by A81,A89,XBOOLE_0:def 4;
then A91: ( g . y ) = ( b . j ) by A7,A86,MESFUNC3:def 1;
x in ( F . i ) by A80,A89,XBOOLE_0:def 4;
then ( f . x ) = ( a . i ) by A5,A88,MESFUNC3:def 1;
then A92: ( ( f . x ) + ( g . x ) ) = ( ( a . i ) + ( b . j ) ) by A90,SUPINF_2:1;
y in ( F . i ) by A81,A89,XBOOLE_0:def 4;
then A93: ( f . y ) = ( a . i ) by A5,A88,MESFUNC3:def 1;
A94: ( FG . k ) in ( rng FG ) by A79,FUNCT_1:def 3;
then x in ( dom ( f + g ) ) by A4,A43,A8,A80,TARSKI:def 4;
then ( ( f + g ) . x ) = ( ( a . i ) + ( b . j ) ) by A92,VALUED_1:def 1;
then A95: ( ( f + g ) . x ) = ( ( f . y ) + ( g . y ) ) by A93,A91,SUPINF_2:1;
y in ( dom ( f + g ) ) by A4,A43,A8,A81,A94,TARSKI:def 4;
hence thesis by A95,VALUED_1:def 1;
end;
hence ( f + g ) is_simple_func_in S by A4,A43,A8,CKB50:def 1;
thus thesis by A2,A4,A8;
end;
