environ
vocabularies XBOOLE_0,PBOOLE,STRUCT_0,MSUALG_1,SUBSET_1,PRALG_2,EQREL_1,FUNCT_1,CARD_3,RELAT_1,SETFAM_1,RLVECT_2,FUNCT_6,TARSKI,FUNCT_2,MARGREL1,UNIALG_2,FUNCT_5,FUNCOP_1,FINSEQ_4,FINSEQ_1,CARD_1,PARTFUN1,MSUALG_3,MEMBER_1,ARYTM_3,WELLORD1,PRALG_3;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,STRUCT_0,FUNCT_2,FUNCOP_1,EQREL_1,FINSEQ_1,FUNCT_5,FUNCT_6,CARD_3,NUMBERS,PBOOLE,MSUALG_1,MSUALG_3,PRALG_2,PRALG_1,MSUALG_2,CKB8,CKB28;
definitions XBOOLE_0,FUNCT_1,MSUALG_3,PRALG_2,PBOOLE,TARSKI,CKB8,CKB28;
theorems PBOOLE,FUNCT_1,EQREL_1,PRALG_2,MSUALG_1,MSUALG_3,FUNCT_2,CARD_3,TARSKI,FUNCOP_1,MSUALG_2,PRALG_1,FINSEQ_1,FUNCT_6,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,PARTFUN1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes PBOOLE,MSSUBFAM;
registrations XBOOLE_0,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCOP_1,EQREL_1,PBOOLE,STRUCT_0,MSUALG_1,PRALG_2,MSUALG_3,ORDINAL1,CARD_3,RELSET_1,FINSEQ_1,CKB1,CKB2,CKB13;
constructors SETFAM_1,EQREL_1,PRALG_1,PRALG_2,MSUALG_3,RELSET_1,FUNCT_5,CKB8,CKB28;
requirements BOOLE,SUBSET;
begin
reserve I for non empty set;
reserve S for non void non empty ManySortedSign;
reserve A for (MSAlgebra-Family of I,S);
reserve s for (SortSymbol of S);
theorem
Th29: (for U1 being  non-empty MSAlgebra over S holds (for F being (ManySortedFunction of I) holds ((for i being (Element of I) holds (ex F1 being (ManySortedFunction of U1,( A . i )) st (F1 = ( F . i ) & F1 is_homomorphism U1,( A . i )))) implies (for x being set holds (x in ( (the Sorts of U1) . s ) implies ( ( commute ( ( commute F ) . s ) ) . x ) in ( product ( Carrier (A,s) ) ))))))
proof
let U1 being  non-empty MSAlgebra over S;
set SU = (the Sorts of U1);
set SA = ( union { ( (the Sorts of ( A . i9 )) . s1 ) where i9 is (Element of I),s1 is (SortSymbol of S): (not contradiction) } );
let F being (ManySortedFunction of I);
assume that
A1: (for i being (Element of I) holds (ex F1 being (ManySortedFunction of U1,( A . i )) st (F1 = ( F . i ) & F1 is_homomorphism U1,( A . i ))));
( ( commute F ) . s ) in ( Funcs (I,( Funcs (( SU . s ),SA) )) ) by A1,CKB32:1;
then ( commute ( ( commute F ) . s ) ) in ( Funcs (( SU . s ),( Funcs (I,SA) )) ) by FUNCT_6:55;
then consider f9 being Function such that A2: f9 = ( commute ( ( commute F ) . s ) ) and A3: ( dom f9 ) = ( SU . s ) and A4: ( rng f9 ) c= ( Funcs (I,SA) ) by FUNCT_2:def 2;
let x being set;
assume that
A5: x in ( (the Sorts of U1) . s );
( f9 . x ) in ( rng f9 ) by A5,A3,FUNCT_1:def 3;
then consider f being Function such that A6: f = ( ( commute ( ( commute F ) . s ) ) . x ) and A7: ( dom f ) = I and ( rng f ) c= SA by A2,A4,FUNCT_2:def 2;
A8:now
let i1 being set;
assume i1 in ( dom ( Carrier (A,s) ) );
then reconsider i9 = i1 as (Element of I) by PARTFUN1:def 2;
consider F1 being (ManySortedFunction of U1,( A . i9 )) such that A9: F1 = ( F . i9 ) and F1 is_homomorphism U1,( A . i9 ) by A1;
x in ( dom ( F1 . s ) ) by A5,FUNCT_2:def 1;
then A10: ((ex U0 being MSAlgebra over S st (U0 = ( A . i9 ) & ( ( Carrier (A,s) ) . i9 ) = ( (the Sorts of U0) . s ))) & ( ( F1 . s ) . x ) in ( rng ( F1 . s ) )) by FUNCT_1:def 3,PRALG_2:def 9;
( f . i9 ) = ( ( F1 . s ) . x ) by A1,A5,A6,A9,CKB33:1;
hence ( ( ( commute ( ( commute F ) . s ) ) . x ) . i1 ) in ( ( Carrier (A,s) ) . i1 ) by A6,A10;
end;
( dom ( ( commute ( ( commute F ) . s ) ) . x ) ) = ( dom ( Carrier (A,s) ) ) by A6,A7,PARTFUN1:def 2;
hence thesis by A8,CARD_3:9;
end;
