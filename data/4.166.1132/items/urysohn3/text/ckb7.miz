environ
vocabularies NUMBERS,XBOOLE_0,PRE_TOPC,RCOMP_1,SUBSET_1,FUNCT_1,URYSOHN1,CARD_1,ZFMISC_1,STRUCT_0,TARSKI,ARYTM_3,PARTFUN1,SEQFUNC,RELAT_1,NEWTON,XXREAL_0,NAT_1,ARYTM_1,REAL_1,CARD_3,PROB_1,LIMFUNC1,SUPINF_1,TOPMETR,ORDINAL2,XXREAL_1,SUPINF_2,ORDINAL1,XXREAL_2,TMAP_1,METRIC_1,PCOMPS_1,XREAL_0,COMPLEX1,URYSOHN3;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,XXREAL_1,XXREAL_2,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,NEWTON,SUPINF_2,SEQ_1,TOPMETR,MEASURE6,PSCOMP_1,STRUCT_0,PRE_TOPC,COMPTS_1,TMAP_1,METRIC_1,PCOMPS_1,SEQFUNC,PROB_1,LIMFUNC1,SUPINF_1,URYSOHN1,CKB3,CKB6;
definitions PRE_TOPC,TARSKI,STRUCT_0,LIMFUNC1,PROB_1,CKB3;
theorems TARSKI,FUNCT_1,FUNCT_2,NAT_1,PCOMPS_1,PRE_TOPC,TOPS_1,TOPMETR,ABSVALUE,PARTFUN1,URYSOHN1,XREAL_0,RELSET_1,URYSOHN2,TMAP_1,METRIC_1,XBOOLE_0,XBOOLE_1,PREPOWER,XCMPLX_1,XREAL_1,PEPIN,NEWTON,XXREAL_0,SUBSET_1,ORDINAL1,NUMBERS,XXREAL_1,XXREAL_2,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5;
schemes NAT_1,FUNCT_2,RECDEF_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,PARTFUN1,NUMBERS,XXREAL_0,NAT_1,MEMBERED,STRUCT_0,PRE_TOPC,METRIC_1,URYSOHN1,TOPMETR,WAYBEL_3,BORSUK_4,BORSUK_6,VALUED_0,XREAL_0,FUNCT_1;
constructors REAL_1,NAT_1,PROB_1,LIMFUNC1,SEQFUNC,NEWTON,SUPINF_2,MEASURE5,MEASURE6,URYSOHN1,TMAP_1,WAYBEL_3,SEQ_1,BORSUK_4,PSCOMP_1,SUPINF_1,PCOMPS_1,BORSUK_6,WAYBEL_0,COMPTS_1,TOPREAL2,LATTICE3,MONOID_0,FUNCOP_1,CKB3,CKB6;
requirements NUMERALS,SUBSET,BOOLE,REAL,ARITHM;
begin
theorem
Th5: (for T being non empty  normal TopSpace holds (for A,B being  closed (Subset of T) holds ((A <> ( {} ) & A misses B) implies (ex F being (Functional_Sequence of ( DYADIC ),( bool (the carrier of T) )) st (for n being (Element of ( NAT )) holds (( F . n ) is (Drizzle of A,B,n) & (for r being (Element of ( dom ( F . n ) )) holds ( ( F . n ) . r ) = ( ( F . ( n + 1 ) ) . r ))))))))
proof
let T being non empty  normal TopSpace;
let A being  closed (Subset of T),B being  closed (Subset of T);
defpred P[ set ]
 means
(ex n being (Element of ( NAT )) st $1 is (Drizzle of A,B,n));
consider D being set such that A1: (for x being set holds (x in D iff (x in ( PFuncs (( DYADIC ),( bool (the carrier of T) )) ) & P[ x ]))) from XBOOLE_0:sch 1;
set S = the (Drizzle of A,B,( 0 ));
A2: S is (Element of ( PFuncs (( DYADIC ),( bool (the carrier of T) )) )) by CKB5:1;
then reconsider D as non empty set by A1;
reconsider S as (Element of D) by A1,A2;
defpred P1[ (Element of D),(Element of D) ]
 means
(ex xx,yy being (PartFunc of ( DYADIC ),( bool (the carrier of T) )) st ((((xx = $1 & yy = $2) & (ex k being (Element of ( NAT )) st xx is (Drizzle of A,B,k))) & (for k being (Element of ( NAT )) holds (xx is (Drizzle of A,B,k) implies yy is (Drizzle of A,B,( k + 1 ))))) & (for r being (Element of ( dom xx )) holds ( xx . r ) = ( yy . r ))));
defpred Q[ (Element of ( NAT )),(Element of D),(Element of D) ]
 means
P1[ $2,$3 ];
assume A3: (A <> ( {} ) & A misses B);
A4: (for n being (Element of ( NAT )) holds (for x being (Element of D) holds (ex y being (Element of D) st Q[ n,x,y ])))
proof
let n being (Element of ( NAT ));
let x being (Element of D);
consider s0 being (Element of ( NAT )) such that A5: x is (Drizzle of A,B,s0) by A1;
reconsider xx = x as (Drizzle of A,B,s0) by A5;
consider yy being (Drizzle of A,B,( s0 + 1 )) such that A6: (for r being (Element of ( dyadic ( s0 + 1 ) )) holds (r in ( dyadic s0 ) implies ( yy . r ) = ( xx . r ))) by A3,CKB4:1;
A7: (for r being (Element of ( dom xx )) holds ( xx . r ) = ( yy . r ))
proof
let r being (Element of ( dom xx ));
( dom xx ) = ( dyadic s0 ) by FUNCT_2:def 1;
then A8: r in ( dyadic s0 );
( dyadic s0 ) c= ( dyadic ( s0 + 1 ) ) by URYSOHN1:5;
hence thesis by A6,A8;
end;
A9: (for k being (Element of ( NAT )) holds (xx is (Drizzle of A,B,k) implies yy is (Drizzle of A,B,( k + 1 ))))
proof
let k being (Element of ( NAT ));
assume xx is (Drizzle of A,B,k);
then A10: ( dom xx ) = ( dyadic k ) by FUNCT_2:def 1;
k = s0
proof
assume A11: k <> s0;
per cases  by A11,XXREAL_0:1;
suppose A12: k < s0;

set o = ( 1 / ( 2 |^ s0 ) );
A13: (not o in ( dyadic k ))
proof
A14: ( 2 |^ k ) < ( 1 * ( 2 |^ s0 ) ) by A12,PEPIN:66;
assume o in ( dyadic k );
then consider i being (Element of ( NAT )) such that i <= ( 2 |^ k ) and A15: o = ( i / ( 2 |^ k ) ) by URYSOHN1:def 1;
A16: ( 0 ) < ( 2 |^ s0 ) by NEWTON:83;
( 0 ) < ( 2 |^ k ) by NEWTON:83;
then A17: ( 1 * ( 2 |^ k ) ) = ( i * ( 2 |^ s0 ) ) by A15,A16,XCMPLX_1:95;
then A18: i = ( ( 2 |^ k ) / ( 2 |^ s0 ) ) by A16,XCMPLX_1:89;
A19: (not (ex n being Nat st i = ( n + 1 )))
proof
given n being Nat such that
A20: i = ( n + 1 );

( ( n + 1 ) - 1 ) < ( 0 ) by A18,A14,A20,XREAL_1:49,XREAL_1:83;
hence thesis;
end;
i <> ( 0 ) by A17,NEWTON:83;
hence thesis by A19,NAT_1:6;
end;
1 <= ( 2 |^ s0 ) by PREPOWER:11;
then o in ( dyadic s0 ) by URYSOHN1:def 1;
hence thesis by A10,A13,FUNCT_2:def 1;
end;
suppose A21: s0 < k;

set o = ( 1 / ( 2 |^ k ) );
A22: (not o in ( dyadic s0 ))
proof
A23: ( 2 |^ s0 ) < ( 1 * ( 2 |^ k ) ) by A21,PEPIN:66;
assume o in ( dyadic s0 );
then consider i being (Element of ( NAT )) such that i <= ( 2 |^ s0 ) and A24: o = ( i / ( 2 |^ s0 ) ) by URYSOHN1:def 1;
A25: ( 0 ) < ( 2 |^ k ) by NEWTON:83;
( 0 ) < ( 2 |^ s0 ) by NEWTON:83;
then A26: ( 1 * ( 2 |^ s0 ) ) = ( i * ( 2 |^ k ) ) by A24,A25,XCMPLX_1:95;
then A27: i = ( ( 2 |^ s0 ) / ( 2 |^ k ) ) by A25,XCMPLX_1:89;
A28: (not (ex n being Nat st i = ( n + 1 )))
proof
given n being Nat such that
A29: i = ( n + 1 );

( ( n + 1 ) - 1 ) < ( 0 ) by A27,A23,A29,XREAL_1:49,XREAL_1:83;
hence thesis;
end;
i <> ( 0 ) by A26,NEWTON:83;
hence thesis by A28,NAT_1:6;
end;
1 <= ( 2 |^ k ) by PREPOWER:11;
then o in ( dyadic k ) by URYSOHN1:def 1;
hence thesis by A10,A22,FUNCT_2:def 1;
end;
end;
hence thesis;
end;
reconsider xx as (Element of ( PFuncs (( DYADIC ),( bool (the carrier of T) )) )) by CKB5:1;
reconsider xx as (Element of D);
A30: yy is (Element of ( PFuncs (( DYADIC ),( bool (the carrier of T) )) )) by CKB5:1;
then reconsider yy as (Element of D) by A1;
(ex y being (Element of D) st P1[ x,y ])
proof
take yy;
reconsider yy as (PartFunc of ( DYADIC ),( bool (the carrier of T) )) by A30,PARTFUN1:46;
reconsider xx as (PartFunc of ( DYADIC ),( bool (the carrier of T) )) by PARTFUN1:47;
take xx;
take yy;
thus thesis by A9,A7;
end;
then consider y being (Element of D) such that A31: P1[ x,y ];
take y;
thus thesis by A31;
end;
(ex F being (Function of ( NAT ),D) st (( F . ( 0 ) ) = S & (for n being (Element of ( NAT )) holds Q[ n,( F . n ),( F . ( n + 1 ) ) ]))) from RECDEF_1:sch 2(A4);
then consider F being (Function of ( NAT ),D) such that A32: ( F . ( 0 ) ) = S and A33: (for n being (Element of ( NAT )) holds P1[ ( F . n ),( F . ( n + 1 ) ) ]);
(for x being set holds (x in D implies x in ( PFuncs (( DYADIC ),( bool (the carrier of T) )) ))) by A1;
then (( rng F ) c= D & D c= ( PFuncs (( DYADIC ),( bool (the carrier of T) )) )) by RELAT_1:def 19,TARSKI:def 3;
then A34: (( dom F ) = ( NAT ) & ( rng F ) c= ( PFuncs (( DYADIC ),( bool (the carrier of T) )) )) by FUNCT_2:def 1,XBOOLE_1:1;
defpred R[ (Element of ( NAT )),(PartFunc of ( DYADIC ),( bool (the carrier of T) )),(PartFunc of ( DYADIC ),( bool (the carrier of T) )) ]
 means
(((($2 = ( F . $1 ) & $3 = ( F . ( $1 + 1 ) )) & (ex k being (Element of ( NAT )) st $2 is (Drizzle of A,B,k))) & (for k being (Element of ( NAT )) holds ($2 is (Drizzle of A,B,k) implies $3 is (Drizzle of A,B,( k + 1 ))))) & (for r being (Element of ( dom $2 )) holds ( $2 . r ) = ( $3 . r )));
reconsider F as (Functional_Sequence of ( DYADIC ),( bool (the carrier of T) )) by A34,FUNCT_2:def 1,RELSET_1:4;
defpred P[ (Element of ( NAT )) ]
 means
(( F . $1 ) is (Drizzle of A,B,$1) & (for r being (Element of ( dom ( F . $1 ) )) holds ( ( F . $1 ) . r ) = ( ( F . ( $1 + 1 ) ) . r )));
A35: (for n being (Element of ( NAT )) holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
assume A36: P[ n ];
(ex xx,yy being (PartFunc of ( DYADIC ),( bool (the carrier of T) )) st R[ n,xx,yy ]) by A33;
hence ( F . ( n + 1 ) ) is (Drizzle of A,B,( n + 1 )) by A36;
let r being (Element of ( dom ( F . ( n + 1 ) ) ));
(ex xx1,yy1 being (PartFunc of ( DYADIC ),( bool (the carrier of T) )) st R[ ( n + 1 ),xx1,yy1 ]) by A33;
hence thesis;
end;
take F;
(ex xx,yy being (PartFunc of ( DYADIC ),( bool (the carrier of T) )) st R[ ( 0 ),xx,yy ]) by A33;
then A37: P[ ( 0 ) ] by A32;
(for n being (Element of ( NAT )) holds P[ n ]) from NAT_1:sch 1(A37,A35);
hence thesis;
end;
