environ
vocabularies NUMBERS,XBOOLE_0,PRE_TOPC,RCOMP_1,SUBSET_1,FUNCT_1,URYSOHN1,CARD_1,ZFMISC_1,STRUCT_0,TARSKI,ARYTM_3,PARTFUN1,SEQFUNC,RELAT_1,NEWTON,XXREAL_0,NAT_1,ARYTM_1,REAL_1,CARD_3,PROB_1,LIMFUNC1,SUPINF_1,TOPMETR,ORDINAL2,XXREAL_1,SUPINF_2,ORDINAL1,XXREAL_2,TMAP_1,METRIC_1,PCOMPS_1,XREAL_0,COMPLEX1,URYSOHN3;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,XXREAL_1,XXREAL_2,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,NEWTON,SUPINF_2,SEQ_1,TOPMETR,MEASURE6,PSCOMP_1,STRUCT_0,PRE_TOPC,COMPTS_1,TMAP_1,METRIC_1,PCOMPS_1,SEQFUNC,PROB_1,LIMFUNC1,SUPINF_1,URYSOHN1,CKB3,CKB6,CKB8,CKB9,CKB16,CKB17,CKB20;
definitions PRE_TOPC,TARSKI,STRUCT_0,LIMFUNC1,PROB_1,CKB3,CKB8,CKB9,CKB16,CKB20;
theorems TARSKI,FUNCT_1,FUNCT_2,NAT_1,PCOMPS_1,PRE_TOPC,TOPS_1,TOPMETR,ABSVALUE,PARTFUN1,URYSOHN1,XREAL_0,RELSET_1,URYSOHN2,TMAP_1,METRIC_1,XBOOLE_0,XBOOLE_1,PREPOWER,XCMPLX_1,XREAL_1,PEPIN,NEWTON,XXREAL_0,SUBSET_1,ORDINAL1,NUMBERS,XXREAL_1,XXREAL_2,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18,CKB19,CKB20,CKB21;
schemes NAT_1,FUNCT_2,RECDEF_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,PARTFUN1,NUMBERS,XXREAL_0,NAT_1,MEMBERED,STRUCT_0,PRE_TOPC,METRIC_1,URYSOHN1,TOPMETR,WAYBEL_3,BORSUK_4,BORSUK_6,VALUED_0,XREAL_0,FUNCT_1;
constructors REAL_1,NAT_1,PROB_1,LIMFUNC1,SEQFUNC,NEWTON,SUPINF_2,MEASURE5,MEASURE6,URYSOHN1,TMAP_1,WAYBEL_3,SEQ_1,BORSUK_4,PSCOMP_1,SUPINF_1,PCOMPS_1,BORSUK_6,WAYBEL_0,COMPTS_1,TOPREAL2,LATTICE3,MONOID_0,FUNCOP_1,CKB3,CKB6,CKB8,CKB9,CKB16,CKB17,CKB20;
requirements NUMERALS,SUBSET,BOOLE,REAL,ARITHM;
begin
definition
let T being non empty TopSpace;
let A being (Subset of T);
let B being (Subset of T);
let R being (Rain of A,B);
func Thunder R -> (Function of T,( R^1 ))
means
:Def6: (for p being (Point of T) holds ((( Rainbow (p,R) ) = ( {} ) implies ( it . p ) = ( 0 )) & (for S being non empty (Subset of ( ExtREAL )) holds (S = ( Rainbow (p,R) ) implies ( it . p ) = ( sup S )))));
existence
proof
defpred P[ (Element of T),set ]
 means
((( Rainbow ($1,R) ) = ( {} ) implies $2 = ( 0 )) & (for S being non empty (Subset of ( ExtREAL )) holds (S = ( Rainbow ($1,R) ) implies $2 = ( sup S ))));
A1: (for x being (Element of T) holds (ex y being (Element of ( R^1 )) st P[ x,y ]))
proof
let x being (Element of T);
per cases ;
suppose A2: ( Rainbow (x,R) ) = ( {} );

reconsider y = ( 0 ) as (Element of ( R^1 )) by TOPMETR:17;
P[ x,y ] by A2;
hence thesis;
end;
suppose ( Rainbow (x,R) ) <> ( {} );

then reconsider S = ( Rainbow (x,R) ) as non empty (Subset of ( ExtREAL ));
reconsider e1 = 1 as R_eal by XXREAL_0:def 1;
consider q being set such that A3: q in S by XBOOLE_0:def 1;
reconsider q as R_eal by A3;
S c= ( DYADIC ) by CKB21:1;
then S c= [. ( 0. ),e1 .] by URYSOHN2:28,XBOOLE_1:1;
then A4: (( 0 ) <= ( inf S ) & ( sup S ) <= e1) by URYSOHN2:26;
(( inf S ) <= q & q <= ( sup S )) by A3,XXREAL_2:3,XXREAL_2:4;
then reconsider y = ( sup S ) as (Element of ( R^1 )) by A4,TOPMETR:17,XXREAL_0:45;
take y;
thus thesis;
end;
end;
(ex F being (Function of (the carrier of T),(the carrier of ( R^1 ))) st (for x being (Element of T) holds P[ x,( F . x ) ])) from FUNCT_2:sch 3(A1);
then consider F being (Function of T,( R^1 )) such that A5: (for x being (Element of T) holds P[ x,( F . x ) ]);
take F;
thus thesis by A5;
end;
uniqueness
proof
let G1 being (Function of T,( R^1 )),G2 being (Function of T,( R^1 ));
assume that
A1: (for p being (Point of T) holds ((( Rainbow (p,R) ) = ( {} ) implies ( G1 . p ) = ( 0 )) & (for S being non empty (Subset of ( ExtREAL )) holds (S = ( Rainbow (p,R) ) implies ( G1 . p ) = ( sup S )))))
and
A2: (for p being (Point of T) holds ((( Rainbow (p,R) ) = ( {} ) implies ( G2 . p ) = ( 0 )) & (for S being non empty (Subset of ( ExtREAL )) holds (S = ( Rainbow (p,R) ) implies ( G2 . p ) = ( sup S )))));
(for x being set holds (x in (the carrier of T) implies ( G1 . x ) = ( G2 . x )))
proof
let x being set;
assume x in (the carrier of T);
then reconsider x as (Point of T);
per cases ;
suppose A3: ( Rainbow (x,R) ) = ( {} );

then ( G1 . x ) = ( 0 ) by A1
.= ( G2 . x ) by A2,A3;
hence thesis;
end;
suppose ( Rainbow (x,R) ) <> ( {} );

then reconsider S = ( Rainbow (x,R) ) as non empty (Subset of ( ExtREAL ));
( G1 . x ) = ( sup S ) by A1
.= ( G2 . x ) by A2;
hence thesis;
end;
end;
hence thesis by FUNCT_2:12;
end;
end;
