environ
vocabularies NUMBERS,SUBSET_1,RLVECT_1,XBOOLE_0,ALGSTR_0,BINOP_1,FUNCT_1,ARYTM_3,RELAT_1,VECTSP_1,MESFUNC1,ALGSTR_1,SUPINF_2,SETWISEO,LATTICES,STRUCT_0,FUNCOP_1,ARYTM_1,FINSEQOP,FINSEQ_1,FINSEQ_2,TARSKI,RVSUM_1,ORDINAL4,XXREAL_0,NAT_1,CARD_3,FINSUB_1,FINSEQ_4,SETWOP_2,FINSET_1,CARD_1,ORDINAL1,PARTFUN1,FINSOP_1,GROUP_1,FVSUM_1;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,ORDINAL1,NAT_1,RELAT_1,FUNCT_1,STRUCT_0,ALGSTR_0,PARTFUN1,FUNCT_2,FINSEQ_1,FINSEQ_4,BINOP_1,FUNCOP_1,RLVECT_1,SETWISEO,FINSOP_1,FINSEQ_2,FINSEQOP,SETWOP_2,GROUP_1,ALGSTR_1,GROUP_4,VECTSP_1,FINSET_1,FINSUB_1,MATRIX_2,XXREAL_0,CKB14,CKB15,CKB23,CKB25,CKB31,CKB33,CKB45,CKB47,CKB65,CKB67,CKB77,CKB79;
definitions SETWISEO,ALGSTR_1,GROUP_4,RLVECT_1,ALGSTR_0,CKB14,CKB15,CKB23,CKB31,CKB45,CKB65,CKB77;
theorems FINSEQ_1,FINSEQ_2,TARSKI,FUNCT_1,FUNCT_2,NAT_1,BINOP_1,FINSEQOP,VECTSP_1,FUNCOP_1,SETWOP_2,RLVECT_1,RELAT_1,SETWISEO,FINSEQ_3,ZFMISC_1,FINSEQ_4,ALGSTR_1,FINSOP_1,GROUP_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,ORDINAL1,GROUP_4,XXREAL_0,PARTFUN1,CARD_1,CKB1,CKB2,CKB3,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90;
schemes NAT_1,FUNCT_2;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,FINSUB_1,XREAL_0,NAT_1,FINSEQ_1,FINSEQ_2,STRUCT_0,VECTSP_1,ALGSTR_1,CARD_1,GROUP_1,CKB4,CKB5,CKB6,CKB91;
constructors PARTFUN1,BINOP_1,SETWISEO,SQUARE_1,NAT_1,FINSEQOP,FINSEQ_4,FINSOP_1,SETWOP_2,ALGSTR_1,GROUP_4,MATRIX_2,RELSET_1,CKB14,CKB15,CKB23,CKB25,CKB31,CKB33,CKB45,CKB47,CKB65,CKB67,CKB77,CKB79;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
definition
let K being  Abelian  add-associative  right_zeroed  right_complementable non empty addLoopStr;
let p being (FinSequence of (the carrier of K));
redefine func Sum p
equals
( (the addF of K) $$ p );
compatibility
proof
set q = ( <*> (the carrier of K) );
deffunc F((Element of ( NAT ))) = ( (the addF of K) $$ ( p | $1 ) );
let s being (Element of K);
consider f being (Function of ( NAT ),(the carrier of K)) such that A1: (for i holds ( f . i ) = F(i)) from FUNCT_2:sch 4;
hereby
defpred P[ set,set ]
 means
(ex q being (FinSequence of (the carrier of K)) st (q = ( p * ( Sgm ( dom ( p | $1 ) ) ) ) & $2 = ( Sum q )));
assume A2: s = ( Sum p );
A3: (for x being (Element of ( Fin ( NAT ) )) holds (ex y being (Element of K) st P[ x,y ]))
proof
let B being (Element of ( Fin ( NAT ) ));
per cases ;
suppose A4: ( dom p ) = ( {} );

reconsider u = ( Sum ( <*> (the carrier of K) ) ) as (Element of K);
reconsider q = ( <*> (the carrier of K) ) as (FinSequence of (the carrier of K));
take u;
take q;
p = ( {} ) by A4;
hence q = ( p * ( Sgm ( dom ( p | B ) ) ) );
thus thesis;
end;
suppose ( dom p ) <> ( {} );

then reconsider domp = ( dom p ) as non empty set;
reconsider p9 = p as (Function of domp,(the carrier of K)) by FINSEQ_2:26;
A5: ( dom ( p | B ) ) c= ( dom p ) by RELAT_1:60;
reconsider pB = ( p | B ) as FinSubsequence;
( rng ( Sgm ( dom pB ) ) ) = ( dom pB ) by FINSEQ_1:50;
then reconsider p99 = ( Sgm ( dom ( p | B ) ) ) as (FinSequence of domp) by A5,FINSEQ_1:def 4;
reconsider q = ( p9 * p99 ) as (FinSequence of (the carrier of K));
reconsider u = ( Sum q ) as (Element of K);
take u;
take q;
thus thesis;
end;
end;
consider G being (Function of ( Fin ( NAT ) ),(the carrier of K)) such that A6: (for B being (Element of ( Fin ( NAT ) )) holds P[ B,( G . B ) ]) from FUNCT_2:sch 3(A3);
A7:now
let B9 being (Element of ( Fin ( NAT ) ));
assume that
B9 c= ( dom p )
and
B9 <> ( {} );
let x being (Element of ( NAT ));
set f2 = ( Sgm ( dom ( p | ( B9 \/ { x } ) ) ) );
set f3 = ( f2 -| x );
set f4 = ( f2 |-- x );
reconsider Y = ( ( finSeg ( len f2 ) ) \ ( f2 " { x } ) ) as  finite set;
A8: ( Seg ( len f2 ) ) = ( dom f2 ) by FINSEQ_1:def 3;
set R = ( rng ( f2 | Y ) );
set M = ( f2 * ( Sgm Y ) );
A9: ( rng ( Sgm Y ) ) = Y by FINSEQ_1:def 13;
( dom ( Sgm Y ) ) = ( finSeg ( card Y ) ) by FINSEQ_3:40;
then ( dom M ) = ( Seg ( card Y ) ) by A8,A9,RELAT_1:27;
then reconsider M as FinSequence by FINSEQ_1:def 2;
(( rng f2 ) c= ( NAT ) & ( rng M ) c= ( rng f2 )) by FINSEQ_1:def 4,RELAT_1:26;
then ( rng M ) c= ( NAT ) by XBOOLE_1:1;
then reconsider L = ( f2 * ( Sgm Y ) ) as (FinSequence of ( NAT )) by FINSEQ_1:def 4;
now
let y being set;
hereby
assume y in ( rng L );
then consider x being set such that A10: x in ( dom L ) and A11: y = ( L . x ) by FUNCT_1:def 3;
x in ( dom ( Sgm Y ) ) by A10,FUNCT_1:11;
then A12: ( ( Sgm Y ) . x ) in Y by A9,FUNCT_1:def 3;
y = ( f2 . ( ( Sgm Y ) . x ) ) by A10,A11,FUNCT_1:12;
hence y in R by A8,A12,FUNCT_1:50;
end;
assume y in R;
then consider x being set such that A13: x in ( dom ( f2 | Y ) ) and A14: y = ( ( f2 | Y ) . x ) by FUNCT_1:def 3;
A15: x in ( ( dom f2 ) /\ Y ) by A13,RELAT_1:61;
then A16: x in Y by XBOOLE_0:def 4;
then consider z being set such that A17: z in ( dom ( Sgm Y ) ) and A18: x = ( ( Sgm Y ) . z ) by A9,FUNCT_1:def 3;
x in ( dom f2 ) by A15,XBOOLE_0:def 4;
then A19: z in ( dom ( f2 * ( Sgm Y ) ) ) by A17,A18,FUNCT_1:11;
then ( L . z ) = ( f2 . ( ( Sgm Y ) . z ) ) by FUNCT_1:12
.= y by A14,A16,A18,FUNCT_1:49;
hence y in ( rng L ) by A19,FUNCT_1:def 3;
end;
then A20: ( rng L ) = R by TARSKI:1;
x in { x } by TARSKI:def 1;
then A21: x in ( B9 \/ { x } ) by XBOOLE_0:def 3;
( dom ( p | ( B9 \/ { x } ) ) ) = ( ( dom p ) /\ ( B9 \/ { x } ) ) by RELAT_1:61;
then ( dom ( p | ( B9 \/ { x } ) ) ) c= ( dom p ) by XBOOLE_1:17;
then A22: ( dom ( p | ( B9 \/ { x } ) ) ) c= ( Seg ( len p ) ) by FINSEQ_1:def 3;
reconsider pB9x = ( p | ( B9 \/ { x } ) ) as FinSubsequence;
( rng f2 ) c= ( Seg ( len p ) ) by A22,FINSEQ_1:def 13;
then A23: ( rng f2 ) c= ( dom p ) by FINSEQ_1:def 3;
R c= ( rng f2 ) by RELAT_1:70;
then R c= ( dom p ) by A23,XBOOLE_1:1;
then A24: R c= ( Seg ( len p ) ) by FINSEQ_1:def 3;
reconsider pp = ( p | ( B9 \/ { x } ) ) as FinSubsequence;
A25: ( dom ( p | B9 ) ) = ( ( dom p ) /\ B9 ) by RELAT_1:61;
A26:now
let l being  natural number,m being  natural number,k1 being  natural number,k2 being  natural number;
assume that
A27: 1 <= l
and
A28: l < m
and
A29: m <= ( len L )
and
A30: (k1 = ( L . l ) & k2 = ( L . m ));
l <= ( len L ) by A28,A29,XXREAL_0:2;
then A31: l in ( dom L ) by A27,FINSEQ_3:25;
then A32: ( L . l ) = ( f2 . ( ( Sgm Y ) . l ) ) by FUNCT_1:12;
A33: ( ( Sgm Y ) . l ) in ( dom f2 ) by A31,FUNCT_1:11;
1 <= m by A27,A28,XXREAL_0:2;
then A34: m in ( dom L ) by A29,FINSEQ_3:25;
then A35: ( L . m ) = ( f2 . ( ( Sgm Y ) . m ) ) by FUNCT_1:12;
m in ( dom ( Sgm Y ) ) by A34,FUNCT_1:11;
then A36: m <= ( len ( Sgm Y ) ) by FINSEQ_3:25;
A37: ( ( Sgm Y ) . m ) in ( dom f2 ) by A34,FUNCT_1:11;
reconsider l,m as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider K1 = ( ( Sgm Y ) . l ),K2 = ( ( Sgm Y ) . m ) as (Element of ( NAT )) by A33,A37;
A38: 1 <= K1 by A33,FINSEQ_3:25;
A39: K2 <= ( len f2 ) by A37,FINSEQ_3:25;
K1 < K2 by A27,A28,A36,FINSEQ_1:def 13;
hence k1 < k2 by A22,A30,A32,A35,A38,A39,FINSEQ_1:def 13;
end;
assume A40: x in ( ( dom p ) \ B9 );
then A41: x in ( dom p ) by XBOOLE_0:def 5;
then reconsider D = ( dom p ),E = ( rng p ) as non empty set by RELAT_1:42;
x in ( dom p ) by A40,XBOOLE_0:def 5;
then A42: { x } c= ( dom p ) by ZFMISC_1:31;
( p . x ) = ( p /. x ) by A41,PARTFUN1:def 6;
then reconsider px = ( p . x ) as (Element of K);
A43: ( dom <* px *> ) = ( Seg 1 ) by FINSEQ_1:38;
( rng <* x *> ) = { x } by FINSEQ_1:38;
then (( dom <* x *> ) = ( Seg 1 ) & ( rng <* x *> ) c= ( dom p )) by A41,FINSEQ_1:38,ZFMISC_1:31;
then A44: ( dom ( p * <* x *> ) ) = ( dom <* px *> ) by A43,RELAT_1:27;
A45:now
let e being set;
assume A46: e in ( dom <* px *> );
then A47: e = 1 by A43,FINSEQ_1:2,TARSKI:def 1;
thus ( ( p * <* x *> ) . e ) = ( p . ( <* x *> . e ) ) by A44,A46,FUNCT_1:12
.= ( p . x ) by A47,FINSEQ_1:40
.= ( <* px *> . e ) by A47,FINSEQ_1:40;
end;
reconsider x9 = x as (Element of D) by A40,XBOOLE_0:def 5;
reconsider p9 = p as (Function of D,E) by FUNCT_2:1;
A48: E c= (the carrier of K) by FINSEQ_1:def 4;
(not x in B9) by A40,XBOOLE_0:def 5;
then A49: (not x in ( dom ( p | B9 ) )) by A25,XBOOLE_0:def 4;
A50: ( rng ( Sgm ( dom pp ) ) ) = ( dom pp ) by FINSEQ_1:50;
then A51: ( rng f2 ) c= ( dom p ) by RELAT_1:60;
( dom pp ) = ( ( dom p ) /\ ( B9 \/ { x } ) ) by RELAT_1:61;
then A52: x in ( rng f2 ) by A50,A41,A21,XBOOLE_0:def 4;
then ( rng f4 ) c= ( rng f2 ) by FINSEQ_4:44;
then A53: ( rng f4 ) c= D by A51,XBOOLE_1:1;
( rng f3 ) c= ( rng f2 ) by A52,FINSEQ_4:39;
then ( rng f3 ) c= D by A51,XBOOLE_1:1;
then reconsider f39 = f3,f49 = f4 as (FinSequence of D) by A53,FINSEQ_1:def 4;
consider q2 being (FinSequence of (the carrier of K)) such that A54: q2 = ( p * ( Sgm ( dom ( p | ( B9 \/ { x } ) ) ) ) ) and A55: ( G . ( B9 \/ {. x .} ) ) = ( Sum q2 ) by A6;
reconsider p3 = ( p9 * f39 ),p4 = ( p9 * f49 ) as (FinSequence of E);
( rng p3 ) c= E by FINSEQ_1:def 4;
then A56: ( rng p3 ) c= (the carrier of K) by A48,XBOOLE_1:1;
( rng p4 ) c= E by FINSEQ_1:def 4;
then ( rng p4 ) c= (the carrier of K) by A48,XBOOLE_1:1;
then reconsider p3,p4 as (FinSequence of (the carrier of K)) by A56,FINSEQ_1:def 4;
consider q1 being (FinSequence of (the carrier of K)) such that A57: q1 = ( p * ( Sgm ( dom ( p | B9 ) ) ) ) and A58: ( G . B9 ) = ( Sum q1 ) by A6;
A59: f2 is  one-to-one by A22,FINSEQ_3:92;
( rng ( ( Sgm ( dom ( p | ( B9 \/ { x } ) ) ) ) | ( ( Seg ( len f2 ) ) \ ( f2 " { x } ) ) ) ) = ( ( Sgm ( dom ( p | ( B9 \/ { x } ) ) ) ) .: ( ( Seg ( len f2 ) ) \ ( f2 " { x } ) ) ) by RELAT_1:115
.= ( ( Sgm ( dom ( p | ( B9 \/ { x } ) ) ) ) .: ( ( dom f2 ) \ ( f2 " { x } ) ) ) by FINSEQ_1:def 3
.= ( ( ( Sgm ( dom ( p | ( B9 \/ { x } ) ) ) ) .: ( dom f2 ) ) \ { x } ) by SETWISEO:6
.= ( ( rng ( Sgm ( dom pB9x ) ) ) \ { x } ) by RELAT_1:113
.= ( ( dom ( p | ( B9 \/ { x } ) ) ) \ { x } ) by FINSEQ_1:50
.= ( ( ( dom p ) /\ ( B9 \/ { x } ) ) \ { x } ) by RELAT_1:61
.= ( ( ( ( dom p ) /\ B9 ) \/ ( ( dom p ) /\ { x } ) ) \ { x } ) by XBOOLE_1:23
.= ( ( ( ( dom p ) /\ B9 ) \/ { x } ) \ { x } ) by A42,XBOOLE_1:28
.= ( ( dom ( p | B9 ) ) \ { x } ) by A25,XBOOLE_1:40
.= ( dom ( p | B9 ) ) by A49,ZFMISC_1:57;
then ( Sgm ( dom ( p | B9 ) ) ) = ( f2 * ( Sgm ( ( Seg ( len f2 ) ) \ ( f2 " { x } ) ) ) ) by A24,A20,A26,FINSEQ_1:def 13
.= ( f2 * ( Sgm ( ( dom f2 ) \ ( f2 " { x } ) ) ) ) by FINSEQ_1:def 3
.= ( f2 - { x } ) by FINSEQ_3:def 1
.= ( f3 ^ f4 ) by A52,A59,FINSEQ_4:55;
then A60: q1 = ( p3 ^ p4 ) by A57,FINSEQOP:9;
q2 = ( p9 * ( ( f39 ^ <* x9 *> ) ^ f49 ) ) by A54,A52,FINSEQ_4:51
.= ( ( p9 * ( f39 ^ <* x9 *> ) ) ^ ( p9 * f49 ) ) by FINSEQOP:9
.= ( ( ( p9 * f39 ) ^ ( p9 * <* x9 *> ) ) ^ ( p9 * f49 ) ) by FINSEQOP:9
.= ( ( p3 ^ <* px *> ) ^ p4 ) by A44,A45,FUNCT_1:2;
hence ( G . ( B9 \/ { x } ) ) = ( ( Sum ( p3 ^ <* px *> ) ) + ( Sum p4 ) ) by A55,RLVECT_1:41
.= ( ( ( Sum p3 ) + ( Sum <* px *> ) ) + ( Sum p4 ) ) by RLVECT_1:41
.= ( ( ( Sum p3 ) + ( Sum p4 ) ) + ( Sum <* px *> ) ) by RLVECT_1:def 3
.= ( ( Sum q1 ) + ( Sum <* px *> ) ) by A60,RLVECT_1:41
.= ( (the addF of K) . (( Sum q1 ),px) ) by RLVECT_1:44
.= ( (the addF of K) . (( G . B9 ),( ( [#] (p,( the_unity_wrt (the addF of K) )) ) . x )) ) by A58,A41,SETWOP_2:20;
end;
A61:now
let x being (Element of ( NAT ));
consider q being (FinSequence of (the carrier of K)) such that A62: q = ( p * ( Sgm ( dom ( p | { x } ) ) ) ) and A63: ( G . {. x .} ) = ( Sum q ) by A6;
A64: ( {} ) c= ( Seg ( 0 ) );
per cases ;
suppose A65: (not x in ( dom p ));

then ( dom p ) misses { x } by ZFMISC_1:50;
then ( ( dom p ) /\ { x } ) = ( {} ) by XBOOLE_0:def 7;
then q = ( p * ( Sgm ( {} ) ) ) by A62,RELAT_1:61
.= ( p * ( {} ) ) by A64,FINSEQ_1:51
.= ( <*> (the carrier of K) );
hence ( G . { x } ) = ( 0. K ) by A63,RLVECT_1:43
.= ( the_unity_wrt (the addF of K) ) by CKB10:1
.= ( ( [#] (p,( the_unity_wrt (the addF of K) )) ) . x ) by A65,SETWOP_2:20;
end;
suppose A66: x in ( dom p );

then ( p . x ) = ( p /. x ) by PARTFUN1:def 6;
then reconsider px = ( p . x ) as (Element of K);
A67: ( dom <* px *> ) = ( Seg 1 ) by FINSEQ_1:38;
( rng <* x *> ) = { x } by FINSEQ_1:38;
then (( dom <* x *> ) = ( Seg 1 ) & ( rng <* x *> ) c= ( dom p )) by A66,FINSEQ_1:38,ZFMISC_1:31;
then A68: ( dom ( p * <* x *> ) ) = ( dom <* px *> ) by A67,RELAT_1:27;
A69:now
let e being set;
assume A70: e in ( dom <* px *> );
then A71: e = 1 by A67,FINSEQ_1:2,TARSKI:def 1;
thus ( ( p * <* x *> ) . e ) = ( p . ( <* x *> . e ) ) by A68,A70,FUNCT_1:12
.= ( p . x ) by A71,FINSEQ_1:40
.= ( <* px *> . e ) by A71,FINSEQ_1:40;
end;
A72: x <> ( 0 ) by A66,FINSEQ_3:25;
q = ( p * ( Sgm ( ( dom p ) /\ { x } ) ) ) by A62,RELAT_1:61
.= ( p * ( Sgm { x } ) ) by A66,ZFMISC_1:46
.= ( p * <* x *> ) by A72,FINSEQ_3:44
.= <* px *> by A68,A69,FUNCT_1:2;
hence ( G . { x } ) = px by A63,RLVECT_1:44
.= ( ( [#] (p,( the_unity_wrt (the addF of K) )) ) . x ) by A66,SETWOP_2:20;
end;
end;
A73:now
let e being (Element of K);
assume A74: e is_a_unity_wrt (the addF of K);
( 0. K ) is_a_unity_wrt (the addF of K) by CKB9:1;
then A75: e = ( 0. K ) by A74,BINOP_1:10;
A76: ( {} ) c= ( Seg ( 0 ) );
consider q being (FinSequence of (the carrier of K)) such that A77: q = ( p * ( Sgm ( dom ( p | (( {}. ( NAT ) ) qua set) ) ) ) ) and A78: ( G . ( {}. ( NAT ) ) ) = ( Sum q ) by A6;
q = ( p * ( Sgm ( dom ( {} ) ) ) ) by A77
.= ( p * ( {} ) ) by A76,FINSEQ_1:51
.= ( <*> (the carrier of K) );
hence e = ( G . ( {} ) ) by A78,A75,RLVECT_1:43;
end;
consider q1 being (FinSequence of (the carrier of K)) such that A79: q1 = ( p * ( Sgm ( dom ( p | ( dom p ) ) ) ) ) and A80: ( G . ( findom p ) ) = ( Sum q1 ) by A6;
A81: (the addF of K) is  having_a_unity by CKB11:1;
q1 = ( p * ( Sgm ( dom p ) ) ) by A79,RELAT_1:69
.= ( p * ( Sgm ( Seg ( len p ) ) ) ) by FINSEQ_1:def 3
.= ( p * ( idseq ( len p ) ) ) by FINSEQ_3:48
.= p by FINSEQ_2:54;
hence s = ( (the addF of K) $$ (( findom p ),( [#] (p,( the_unity_wrt (the addF of K) )) )) ) by A2,A81,A80,A73,A61,A7,SETWISEO:def 3
.= ( (the addF of K) $$ p ) by CKB11:1,SETWOP_2:def 2;
end;
A82: ( p | ( len p ) ) = ( p | ( Seg ( len p ) ) ) by FINSEQ_1:def 15
.= ( p | ( dom p ) ) by FINSEQ_1:def 3
.= p by RELAT_1:69;
A83:now
let j;
let a being (Element of K);
assume that
A84: j < ( len p )
and
A85: a = ( p . ( j + 1 ) );
A86: ( j + 1 ) <= ( len p ) by A84,NAT_1:13;
then A87: ( len ( p | ( j + 1 ) ) ) = ( j + 1 ) by FINSEQ_1:59;
j <= ( j + 1 ) by NAT_1:11;
then A88: ( Seg j ) c= ( Seg ( j + 1 ) ) by FINSEQ_1:5;
A89: ( p | j ) = ( p | ( Seg j ) ) by FINSEQ_1:def 15
.= ( ( p | ( Seg ( j + 1 ) ) ) | ( Seg j ) ) by A88,RELAT_1:74
.= ( ( p | ( j + 1 ) ) | ( Seg j ) ) by FINSEQ_1:def 15;
A90: 1 <= ( j + 1 ) by NAT_1:11;
then A91: ( j + 1 ) in ( dom ( p | ( j + 1 ) ) ) by A87,FINSEQ_3:25;
( j + 1 ) in ( dom p ) by A86,A90,FINSEQ_3:25;
then a = ( p /. ( j + 1 ) ) by A85,PARTFUN1:def 6
.= ( ( p | ( j + 1 ) ) /. ( j + 1 ) ) by A91,FINSEQ_4:70
.= ( ( p | ( j + 1 ) ) . ( j + 1 ) ) by A91,PARTFUN1:def 6;
then ( p | ( j + 1 ) ) = ( ( p | j ) ^ <* a *> ) by A87,A89,FINSEQ_3:55;
hence ( f . ( j + 1 ) ) = ( (the addF of K) $$ ( ( p | j ) ^ <* a *> ) ) by A1
.= ( (the addF of K) . (( (the addF of K) $$ ( p | j ) ),a) ) by CKB11:1,FINSOP_1:4
.= ( ( f . j ) + a ) by A1;
end;
( p | ( 0 ) ) = q;
then A92: ( f . ( 0 ) ) = ( (the addF of K) $$ q ) by A1
.= ( the_unity_wrt (the addF of K) ) by CKB11:1,FINSOP_1:10
.= ( 0. K ) by CKB10:1;
assume s = ( (the addF of K) $$ p );
then s = ( f . ( len p ) ) by A1,A82;
hence thesis by A92,A83,RLVECT_1:def 12;
end;
end;
