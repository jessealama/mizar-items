environ
vocabularies NUMBERS,NAT_1,SUBSET_1,FINSEQ_2,MATRIX_1,ARYTM_3,FINSEQ_1,TREES_1,RELAT_1,CARD_1,XXREAL_0,ZFMISC_1,XCMPLX_0,ORDINAL1,COMPLFLD,MATRIX_5,ARYTM_1,COMPLEX1,QC_LANG1,FUNCT_1,RVSUM_1,BINOP_2,TARSKI,XBOOLE_0,CARD_3,INCSP_1,FUNCOP_1,SETWISEO,ORDINAL4,PARTFUN1,MATRIXC1;
notations TARSKI,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,ZFMISC_1,NAT_1,NAT_D,PARTFUN1,BINOP_1,FUNCOP_1,FINSEQ_1,FINSEQOP,SEQ_4,COMPLEX1,RVSUM_1,FINSEQ_2,BINOP_2,ORDINAL1,MATRIX_5,MATRIX_1,MATRIX_3,MATRIX_4,RLVECT_1,COMPLSP2,SETWOP_2,COMPLFLD,STRUCT_0,GROUP_1,SEQ_1,CKB1,CKB17,CKB18,CKB19,CKB20,CKB21,CKB24,CKB27,CKB39,CKB58,CKB59;
definitions MATRIX_1,RVSUM_1,VALUED_1,CKB1,CKB17,CKB18,CKB19,CKB20,CKB21,CKB24,CKB39,CKB58,CKB59;
theorems FINSEQ_1,FUNCT_1,NAT_1,MATRIX_1,FINSEQ_2,COMPLEX1,BINOP_2,FINSEQ_3,XCMPLX_0,ZFMISC_1,SEQ_4,MATRIX_2,FINSEQOP,COMPLSP2,FUNCOP_1,FUNCT_2,FINSOP_1,SETWOP_2,FINSEQ_5,XREAL_1,MATRIX_3,COMPLFLD,MATRIX_4,MATRIX_5,NUMBERS,XBOOLE_1,ORDINAL1,PARTFUN1,XXREAL_0,XREAL_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61;
schemes MATRIX_1,FINSEQ_2,FINSEQ_1,FUNCT_2,NAT_1;
registrations XBOOLE_0,FUNCT_1,FUNCT_2,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,BINOP_2,MEMBERED,FINSEQ_2,COMPLFLD,MATRIX_1,VALUED_0,RELSET_1,CARD_1,FINSEQ_1;
constructors PARTFUN1,SETWISEO,XXREAL_0,NAT_1,FINSOP_1,BINARITH,MATRIX_3,MATRIX_4,MATRIX_5,SEQ_4,SEQ_1,BINOP_2,BINOP_1,RVSUM_1,NAT_D,RELSET_1,COMPLSP2,CKB1,CKB17,CKB18,CKB19,CKB20,CKB21,CKB24,CKB27,CKB39,CKB58,CKB59;
requirements NUMERALS,BOOLE,SUBSET,REAL,ARITHM;
begin
reserve i for Nat;
reserve j for Nat;
reserve n for Nat;
theorem
Th52: (for M being (Matrix of ( COMPLEX )) holds (( len M ) > ( 0 ) implies ( Sum ( LineSum M ) ) = ( Sum ( ColSum M ) )))
proof
defpred P[ Nat ]
 means
(for N being (Matrix of ( COMPLEX )) holds (( $1 + 1 ) = ( len N ) implies ( Sum ( LineSum N ) ) = ( Sum ( ColSum N ) )));
let M being (Matrix of ( COMPLEX ));
assume ( len M ) > ( 0 );
then ( ( 0 ) + 1 ) <= ( len M ) by NAT_1:8;
then ( ( ( 0 ) + 1 ) - 1 ) <= ( ( len M ) - 1 ) by XREAL_1:9;
then A1: ( ( len M ) -' 1 ) = ( ( len M ) - 1 ) by XREAL_0:def 2;
A2: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume A3: P[ k ];
(for N being (Matrix of ( COMPLEX )) holds (( ( k + 1 ) + 1 ) = ( len N ) implies ( Sum ( LineSum N ) ) = ( Sum ( ColSum N ) )))
proof
reconsider k1 = ( k + 1 ) as (Element of ( NAT ));
let N being (Matrix of ( COMPLEX ));
consider n such that A4: (for x being set holds (x in ( rng N ) implies (ex p being (FinSequence of ( COMPLEX )) st (x = p & ( len p ) = n)))) by MATRIX_1:9;
A5: ( rng ( N | k1 ) ) c= ( rng N ) by FINSEQ_5:19;
then (for x being set holds (x in ( rng ( N | k1 ) ) implies (ex p being (FinSequence of ( COMPLEX )) st (x = p & ( len p ) = n)))) by A4;
then reconsider N2 = ( N | k1 ) as (Matrix of ( COMPLEX )) by MATRIX_1:9;
set g1 = ( LineSum N2 );
consider n3 being Nat such that A6: (for x2 being set holds (x2 in ( rng N ) implies (ex s being FinSequence st (s = x2 & ( len s ) = n3)))) by MATRIX_1:def 1;
set f3 = ( LineSum N );
A7: ( len ( Line (N,( ( k + 1 ) + 1 )) ) ) = ( width N ) by MATRIX_1:def 7;
assume A8: ( ( k + 1 ) + 1 ) = ( len N );
then A9: ( len N2 ) = ( k + 1 ) by FINSEQ_1:59,NAT_1:11;
A10: ( len g1 ) = ( len N2 ) by CKB58:def 1
.= k1 by A8,FINSEQ_1:59,NAT_1:11;
( 1 + k ) >= 1 by NAT_1:11;
then A11: ( len N2 ) >= 1 by A8,FINSEQ_1:59,NAT_1:11;
then 1 in ( Seg ( len N2 ) ) by FINSEQ_1:1;
then 1 in ( dom N2 ) by FINSEQ_1:def 3;
then A12: ( N2 . 1 ) in ( rng N2 ) by FUNCT_1:3;
then (ex s3 being FinSequence st (s3 = ( N2 . 1 ) & ( len s3 ) = n3)) by A5,A6;
then A13: ( width N2 ) = n3 by A11,A12,MATRIX_1:def 3;
( len N ) >= 1 by A8,NAT_1:11;
then 1 in ( Seg ( len N ) ) by FINSEQ_1:1;
then A14: 1 in ( dom N ) by FINSEQ_1:def 3;
then A15: ( N . 1 ) in ( rng N ) by FUNCT_1:3;
A16: (ex s2 being FinSequence st (s2 = ( N . 1 ) & ( len s2 ) = n3)) by A6,A14,FUNCT_1:3;
then A17: ( width N2 ) = ( width N ) by A8,A15,A13,MATRIX_1:def 3;
( len f3 ) = ( k1 + 1 ) by A8,CKB58:def 1;
then A18: ( len ( f3 | k1 ) ) = ( len g1 ) by A10,FINSEQ_1:59,NAT_1:11;
A19: (for n being Nat holds ((1 <= n & n <= ( len ( f3 | k1 ) )) implies ( ( f3 | k1 ) . n ) = ( g1 . n )))
proof
let n being Nat;
assume that
A20: 1 <= n
and
A21: n <= ( len ( f3 | k1 ) );
A22: n <= ( k1 + 1 ) by A10,A18,A21,NAT_1:13;
then A23: n in ( Seg ( len N ) ) by A8,A20,FINSEQ_1:1;
A24: (for n1 being Nat holds ((1 <= n1 & n1 <= ( len ( Line (N,n) ) )) implies ( ( Line (N,n) ) . n1 ) = ( ( Line (N2,n) ) . n1 )))
proof
A25: ( N2 . n ) = ( N . n ) by A10,A18,A21,FINSEQ_3:112;
A26: n <= ( len N2 ) by A18,A21,CKB58:def 1;
let n1 being Nat;
assume that
A27: 1 <= n1
and
A28: n1 <= ( len ( Line (N,n) ) );
A29: n1 in ( Seg ( len ( Line (N,n) ) ) ) by A27,A28,FINSEQ_1:1;
then A30: n1 in ( Seg ( width N2 ) ) by A17,MATRIX_1:def 7;
A31: n1 in ( Seg ( width N ) ) by A29,MATRIX_1:def 7;
then n1 <= ( width N ) by FINSEQ_1:1;
then [ n,n1 ] in ( Indices N ) by A8,A20,A22,A27,CKB2:1;
then A32: (ex pn being (FinSequence of ( COMPLEX )) st (pn = ( N . n ) & ( N * (n,n1) ) = ( pn . n1 ))) by MATRIX_1:def 5;
n1 <= ( width N ) by A31,FINSEQ_1:1;
then n1 <= ( width N2 ) by A8,A15,A16,A13,MATRIX_1:def 3;
then A33: [ n,n1 ] in ( Indices N2 ) by A20,A27,A26,CKB2:1;
n1 in ( Seg ( width N ) ) by A29,MATRIX_1:def 7;
then ( ( Line (N,n) ) . n1 ) = ( N * (n,n1) ) by MATRIX_1:def 7
.= ( N2 * (n,n1) ) by A33,A32,A25,MATRIX_1:def 5
.= ( ( Line (N2,n) ) . n1 ) by A30,MATRIX_1:def 7;
hence thesis;
end;
( len ( Line (N,n) ) ) = ( width N ) by MATRIX_1:def 7
.= ( width N2 ) by A8,A15,A16,A13,MATRIX_1:def 3
.= ( len ( Line (N2,n) ) ) by MATRIX_1:def 7;
then A34: ( Line (N,n) ) = ( Line (N2,n) ) by A24,FINSEQ_1:14;
n in ( Seg ( len ( f3 | k1 ) ) ) by A20,A21,FINSEQ_1:1;
then n in ( dom ( f3 | k1 ) ) by FINSEQ_1:def 3;
then A35: n in ( dom ( f3 | ( Seg k1 ) ) ) by FINSEQ_1:def 15;
n in ( Seg k1 ) by A10,A18,A20,A21,FINSEQ_1:1;
then A36: n in ( Seg ( len N2 ) ) by A8,FINSEQ_1:59,NAT_1:11;
( ( f3 | k1 ) . n ) = ( ( f3 | ( Seg k1 ) ) . n ) by FINSEQ_1:def 15
.= ( ( LineSum N ) . n ) by A35,FUNCT_1:47
.= ( Sum ( Line (N2,n) ) ) by A23,A34,CKB58:def 1
.= ( g1 . n ) by A36,CKB58:def 1;
hence thesis;
end;
( len ( ColSum N2 ) ) = ( width N2 ) by CKB59:def 1;
then A37: ( len ( ( ColSum N2 ) + ( Line (N,( ( k + 1 ) + 1 )) ) ) ) = ( width N ) by A17,A7,COMPLSP2:6
.= ( len ( ColSum N ) ) by CKB59:def 1;
A38: ( len ( ColSum N2 ) ) = ( width N2 ) by CKB59:def 1
.= ( width N ) by A8,A15,A16,A13,MATRIX_1:def 3
.= ( len ( Line (N,( ( k + 1 ) + 1 )) ) ) by MATRIX_1:def 7;
A39: ( ( k + 1 ) + 1 ) in ( Seg ( len N ) ) by A8,FINSEQ_1:3;
then ( ( k + 1 ) + 1 ) in ( Seg ( len ( LineSum N ) ) ) by CKB58:def 1;
then A40: ( ( k + 1 ) + 1 ) in ( dom ( LineSum N ) ) by FINSEQ_1:def 3;
A41: ( len N ) >= ( k + 1 ) by A8,NAT_1:11;
A42: (for j holds ((1 <= j & j <= ( width N )) implies ( ( ( ColSum N2 ) . j ) + ( N * (( ( k + 1 ) + 1 ),j) ) ) = ( ( ColSum N ) . j )))
proof
let j;
assume that
A43: 1 <= j
and
A44: j <= ( width N );
set g = ( Col (N2,j) );
set f = ( Col (N,j) );
A45: k1 <= ( len f ) by A41,MATRIX_1:def 8;
A46: (for n being Nat holds ((1 <= n & n <= ( len ( f | k1 ) )) implies ( ( f | k1 ) . n ) = ( g . n )))
proof
let n being Nat;
assume that
A47: 1 <= n
and
A48: n <= ( len ( f | k1 ) );
A49: n <= k1 by A45,A48,FINSEQ_1:59;
then A50: ( N2 . n ) = ( N . n ) by FINSEQ_3:112;
n <= ( k1 + 1 ) by A49,NAT_1:13;
then n in ( Seg ( len N ) ) by A8,A47,FINSEQ_1:1;
then A51: n in ( dom N ) by FINSEQ_1:def 3;
n <= ( len N ) by A8,A49,NAT_1:13;
then [ n,j ] in ( Indices N ) by A43,A44,A47,CKB2:1;
then A52: (ex pn being (FinSequence of ( COMPLEX )) st (pn = ( N . n ) & ( N * (n,j) ) = ( pn . j ))) by MATRIX_1:def 5;
A53: j <= ( width N2 ) by A8,A15,A16,A13,A44,MATRIX_1:def 3;
n in ( Seg k1 ) by A47,A49,FINSEQ_1:1;
then A54: n in ( dom N2 ) by A9,FINSEQ_1:def 3;
n in ( Seg ( len ( f | k1 ) ) ) by A47,A48,FINSEQ_1:1;
then n in ( dom ( f | k1 ) ) by FINSEQ_1:def 3;
then A55: n in ( dom ( f | ( Seg k1 ) ) ) by FINSEQ_1:def 15;
n <= ( len N2 ) by A9,A45,A48,FINSEQ_1:59;
then A56: [ n,j ] in ( Indices N2 ) by A43,A47,A53,CKB2:1;
( ( f | k1 ) . n ) = ( ( f | ( Seg k1 ) ) . n ) by FINSEQ_1:def 15
.= ( ( Col (N,j) ) . n ) by A55,FUNCT_1:47
.= ( N * (n,j) ) by A51,MATRIX_1:def 8
.= ( N2 * (n,j) ) by A56,A52,A50,MATRIX_1:def 5
.= ( g . n ) by A54,MATRIX_1:def 8;
hence thesis;
end;
A57: ( ( k + 1 ) + 1 ) in ( Seg ( len N ) ) by A8,FINSEQ_1:4;
then A58: ( ( k + 1 ) + 1 ) in ( dom N ) by FINSEQ_1:def 3;
( len g ) = ( len N2 ) by MATRIX_1:def 8
.= k1 by A8,FINSEQ_1:59,NAT_1:11;
then A59: g = ( f | k1 ) by A45,A46,FINSEQ_1:14,FINSEQ_1:59;
A60: ( len ( Col (N,j) ) ) = ( len N ) by MATRIX_1:def 8;
( ( k + 1 ) + 1 ) in ( Seg ( len ( Col (N,j) ) ) ) by A57,MATRIX_1:def 8;
then A61: ( ( k + 1 ) + 1 ) in ( dom ( Col (N,j) ) ) by FINSEQ_1:def 3;
A62: j in ( Seg ( width N ) ) by A43,A44,FINSEQ_1:1;
then ( ( ( ColSum N2 ) . j ) + ( N * (( ( k + 1 ) + 1 ),j) ) ) = ( ( Sum ( Col (N2,j) ) ) + ( N * (( ( k + 1 ) + 1 ),j) ) ) by A17,CKB59:def 1
.= ( ( Sum ( Col (N2,j) ) ) + ( ( Col (N,j) ) . ( ( k + 1 ) + 1 ) ) ) by A58,MATRIX_1:def 8
.= ( ( Sum ( Col (N2,j) ) ) + ( ( Col (N,j) ) /. ( ( k + 1 ) + 1 ) ) ) by A61,PARTFUN1:def 6
.= ( Sum ( Col (N,j) ) ) by A8,A60,A59,CKB61:1
.= ( ( ColSum N ) . j ) by A62,CKB59:def 1;
hence thesis;
end;
A63: (for j being Nat holds ((1 <= j & j <= ( len ( ColSum N ) )) implies ( ( ( ColSum N2 ) + ( Line (N,( ( k + 1 ) + 1 )) ) ) . j ) = ( ( ColSum N ) . j )))
proof
let j being Nat;
assume that
A64: 1 <= j
and
A65: j <= ( len ( ColSum N ) );
j in ( Seg ( len ( ColSum N ) ) ) by A64,A65,FINSEQ_1:1;
then A66: j in ( Seg ( width N2 ) ) by A17,CKB59:def 1;
then A67: j <= ( width N ) by A17,FINSEQ_1:1;
j in ( Seg ( len ( ( ColSum N2 ) + ( Line (N,( ( k + 1 ) + 1 )) ) ) ) ) by A37,A64,A65,FINSEQ_1:1;
then j in ( dom ( ( ColSum N2 ) + ( Line (N,( ( k + 1 ) + 1 )) ) ) ) by FINSEQ_1:def 3;
then ( ( ( ColSum N2 ) + ( Line (N,( ( k + 1 ) + 1 )) ) ) . j ) = ( ( ( ColSum N2 ) . j ) + ( ( Line (N,( ( k + 1 ) + 1 )) ) . j ) ) by COMPLSP2:1
.= ( ( ( ColSum N2 ) . j ) + ( N * (( ( k + 1 ) + 1 ),j) ) ) by A17,A66,MATRIX_1:def 7
.= ( ( ColSum N ) . j ) by A42,A64,A67;
hence thesis;
end;
( len ( LineSum N ) ) = ( len N ) by CKB58:def 1;
then ( Sum ( LineSum N ) ) = ( ( Sum ( LineSum N2 ) ) + ( ( LineSum N ) /. ( ( k + 1 ) + 1 ) ) ) by A8,A18,A19,CKB61:1,FINSEQ_1:14
.= ( ( Sum ( LineSum N2 ) ) + ( ( LineSum N ) . ( ( k + 1 ) + 1 ) ) ) by A40,PARTFUN1:def 6
.= ( ( Sum ( ColSum N2 ) ) + ( ( LineSum N ) . ( ( k + 1 ) + 1 ) ) ) by A3,A9
.= ( ( Sum ( ColSum N2 ) ) + ( Sum ( Line (N,( ( k + 1 ) + 1 )) ) ) ) by A39,CKB58:def 1
.= ( Sum ( ( ColSum N2 ) + ( Line (N,( ( k + 1 ) + 1 )) ) ) ) by A38,CKB47:1
.= ( Sum ( ColSum N ) ) by A37,A63,FINSEQ_1:14;
hence thesis;
end;
hence thesis;
end;
(for N being (Matrix of ( COMPLEX )) holds (( ( 0 ) + 1 ) = ( len N ) implies ( Sum ( LineSum N ) ) = ( Sum ( ColSum N ) )))
proof
let N being (Matrix of ( COMPLEX ));
A68: ( len ( Line (N,1) ) ) = ( width N ) by MATRIX_1:def 7;
assume A69: ( ( 0 ) + 1 ) = ( len N );
then A70: 1 in ( Seg ( len N ) ) by FINSEQ_1:3;
A71: 1 in ( Seg 1 ) by FINSEQ_1:3;
A72: (for j being Nat holds ((1 <= j & j <= ( width N )) implies ( ( ColSum N ) . j ) = ( ( Line (N,1) ) . j )))
proof
A73: 1 in ( dom N ) by A69,A71,FINSEQ_1:def 3;
let j being Nat;
assume that
A74: 1 <= j
and
A75: j <= ( width N );
A76: ( len ( Col (N,j) ) ) = 1 by A69,MATRIX_1:def 8;
A77: j in ( Seg ( width N ) ) by A74,A75,FINSEQ_1:1;
then ( ( ColSum N ) . j ) = ( Sum ( Col (N,j) ) ) by CKB59:def 1
.= ( ( Col (N,j) ) . 1 ) by A76,CKB60:1
.= ( N * (1,j) ) by A73,MATRIX_1:def 8
.= ( ( Line (N,1) ) . j ) by A77,MATRIX_1:def 7;
hence thesis;
end;
A78: ( len ( LineSum N ) ) = 1 by A69,CKB58:def 1;
( len ( ColSum N ) ) = ( width N ) by CKB59:def 1;
then ( Sum ( ColSum N ) ) = ( Sum ( Line (N,1) ) ) by A68,A72,FINSEQ_1:14
.= ( ( LineSum N ) . 1 ) by A70,CKB58:def 1
.= ( Sum ( LineSum N ) ) by A78,CKB60:1;
hence thesis;
end;
then A79: P[ ( 0 ) ];
(for i holds P[ i ]) from NAT_1:sch 2(A79,A2);
then (( ( ( len M ) -' 1 ) + 1 ) = ( len M ) implies ( Sum ( LineSum M ) ) = ( Sum ( ColSum M ) ));
hence thesis by A1;
end;
