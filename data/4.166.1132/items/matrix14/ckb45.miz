environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,VECTSP_1,STRUCT_0,EUCLID,FINSEQ_1,FINSEQ_2,SUPINF_2,RELAT_1,ALGSTR_0,ARYTM_3,ARYTM_1,RVSUM_1,FUNCT_1,PARTFUN1,TARSKI,ZFMISC_1,NAT_1,XXREAL_0,GROUP_1,ORDINAL4,CARD_1,FVSUM_1,CARD_3,MATRIX_1,PRALG_1,MESFUNC1,MATRIX_6,TREES_1,MATRIXR2,AFINSQ_1,FUNCOP_1,QC_LANG1,FINSOP_1,INCSP_1,FUNCT_7,RFINSEQ,MATRIX_3,MATRIX14;
notations TARSKI,XBOOLE_0,SUBSET_1,XXREAL_0,RELAT_1,FUNCT_1,BINOP_1,ALGSTR_0,ZFMISC_1,MATRIX_1,FVSUM_1,PARTFUN1,FUNCT_3,NUMBERS,FINSEQ_7,FUNCT_2,FUNCOP_1,FINSEQ_1,STRUCT_0,GROUP_1,MATRIX_3,MATRIX_6,XCMPLX_0,NAT_1,NAT_D,VECTSP_1,FINSEQ_2,FINSOP_1,RFINSEQ,CKB1,CKB2,CKB10,CKB17,CKB27,CKB28;
definitions XBOOLE_0,MATRIX_1,ALGSTR_0,CKB1,CKB28;
theorems MATRIX_3,VECTSP_1,MATRIX_1,MATRIX_4,GROUP_1,FUNCT_1,FINSEQ_1,NAT_1,FINSEQ_7,FINSEQ_2,TARSKI,FINSOP_1,FVSUM_1,FUNCT_2,XBOOLE_0,ZFMISC_1,MATRIX_7,MATRIXR1,FINSEQ_3,XXREAL_0,ORDINAL1,FINSEQ_4,MATRIXR2,XREAL_1,FUNCOP_1,RLVECT_1,MATRIX_6,MATRIX12,POLYNOM1,PARTFUN1,NAT_D,CARD_1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44;
schemes NAT_1,MATRIX_1;
registrations FINSEQ_2,XREAL_0,NAT_1,FUNCOP_1,STRUCT_0,VECTSP_1,ORDINAL1,XXREAL_0,RELAT_1,CARD_1,FINSEQ_1;
constructors FUNCT_3,FINSEQ_7,SETWISEO,FINSOP_1,JORDAN3,RFINSEQ,INTEGRA2,MATRIX_6,POLYNOM1,NAT_D,RELSET_1,FVSUM_1,CKB1,CKB2,CKB27,CKB28;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve K for Field;
theorem
Th39: (for A being (Matrix of n,K) holds ((n > ( 0 ) & ( A * (1,1) ) <> ( 0. K )) implies (ex P being (Matrix of n,K) st (((P is  invertible & ( ( A * P ) * (1,1) ) = ( 1. K )) & (for j holds ((1 < j & j <= n) implies ( ( A * P ) * (1,j) ) = ( 0. K )))) & (for i holds (((1 < i & i <= n) & ( A * (i,1) ) = ( 0. K )) implies ( ( A * P ) * (i,1) ) = ( 0. K )))))))
proof
let A being (Matrix of n,K);
assume that
A1: n > ( 0 )
and
A2: ( A * (1,1) ) <> ( 0. K );
A3: ( ( 0 ) + 1 ) <= n by A1,NAT_1:13;
set a = ( A * (1,1) );
defpred P[ Nat,Nat,(Element of K) ]
 means
(($1 = 1 implies (($2 = 1 implies $3 = ( a " )) & ($2 <> 1 implies $3 = ( - ( ( a " ) * ( A * (1,$2) ) ) )))) & ($1 <> 1 implies (for i0 being (Element of ( NAT )) holds (i0 = $1 implies $3 = ( ( Base_FinSeq (K,n,i0) ) . $2 )))));
A4: (for i,j being Nat holds ([ i,j ] in [: ( Seg n ),( Seg n ) :] implies (ex x being (Element of K) st P[ i,j,x ])))
proof
let i being Nat,j being Nat;
reconsider i0 = i,j0 = j as (Element of ( NAT )) by ORDINAL1:def 12;
assume [ i,j ] in [: ( Seg n ),( Seg n ) :];
then j0 in ( Seg n ) by ZFMISC_1:87;
then A5: (1 <= j0 & j0 <= n) by FINSEQ_1:1;
per cases ;
suppose A6: i = 1;

per cases ;
suppose j = 1;

hence thesis by A6;
end;
suppose j <> 1;

hence thesis by A6;
end;
end;
suppose A7: i <> 1;

set x1 = ( ( Base_FinSeq (K,n,i0) ) /. j0 );
( len ( Base_FinSeq (K,n,i0) ) ) = n by CKB29:1;
then (for i1 being (Element of ( NAT )) holds (i1 = i implies x1 = ( ( Base_FinSeq (K,n,i1) ) . j ))) by A5,FINSEQ_4:15;
hence thesis by A7;
end;
end;
consider P0 being (Matrix of n,n,K) such that A12: (for i,j being Nat holds ([ i,j ] in ( Indices P0 ) implies P[ i,j,( P0 * (i,j) ) ])) from MATRIX_1:sch 2(A4);
A13: ( ( 0 ) + 1 ) <= n by A1,NAT_1:13;
A14: (for i holds ((1 < i & i <= n) implies ( P0 . i ) = ( Base_FinSeq (K,n,i) )))
proof
let i;
assume that
A15: 1 < i
and
A16: i <= n;
[ i,1 ] in ( Indices P0 ) by A13,A15,A16,MATRIX_1:37;
then consider p being (FinSequence of K) such that A17: p = ( P0 . i ) and ( P0 * (i,1) ) = ( p . 1 ) by MATRIX_1:def 5;
A18: (for j being Nat holds ((1 <= j & j <= n) implies ( p . j ) = ( ( Base_FinSeq (K,n,i) ) . j )))
proof
let j being Nat;
assume (1 <= j & j <= n);
then A19: [ i,j ] in ( Indices P0 ) by A15,A16,MATRIX_1:37;
then (ex p2 being (FinSequence of K) st (p2 = ( P0 . i ) & ( P0 * (i,j) ) = ( p2 . j ))) by MATRIX_1:def 5;
hence thesis by A12,A15,A17,A19;
end;
( len P0 ) = n by MATRIX_1:def 2;
then i in ( Seg ( len P0 ) ) by A15,A16,FINSEQ_1:1;
then i in ( dom P0 ) by FINSEQ_1:def 3;
then p in ( rng P0 ) by A17,FUNCT_1:def 3;
then A20: ( len p ) = n by MATRIX_1:def 2;
( len ( Base_FinSeq (K,n,i) ) ) = n by CKB29:1;
hence thesis by A17,A20,A18,FINSEQ_1:14;
end;
A21: ( len ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) ) = ( len ( Base_FinSeq (K,n,1) ) ) by MATRIXR1:16
.= n by CKB29:1;
A22: ( Indices P0 ) = [: ( Seg n ),( Seg n ) :] by MATRIX_1:24;
A23: ( len ( Base_FinSeq (K,n,1) ) ) = n by CKB29:1;
A24: [ 1,1 ] in ( Indices P0 ) by A13,MATRIX_1:37;
then A25: ( P0 * (1,1) ) = ( a " ) by A12;
then A26: P0 is  invertible by A1,A2,A14,CKB44:1;
A27: ( len P0 ) = n by MATRIX_1:24;
then A28: 1 in ( Seg ( len P0 ) ) by A13,FINSEQ_1:1;
A29: (for k being Nat holds ((1 <= k & k <= n) implies ( ( Col (P0,1) ) . k ) = ( ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) . k )))
proof
let k being Nat;
assume that
A30: 1 <= k
and
A31: k <= n;
A32: ( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A23,A30,A31,FINSEQ_4:15;
k in ( Seg n ) by A30,A31,FINSEQ_1:1;
then A33: k in ( dom ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) ) by A21,FINSEQ_1:def 3;
A34:now
assume A35: k <> 1;
thus ( ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) . k ) = ( ( a " ) * ( ( Base_FinSeq (K,n,1) ) /. k ) ) by A33,A32,FVSUM_1:50
.= ( ( a " ) * ( 0. K ) ) by A30,A31,A32,A35,CKB31:1
.= ( 0. K ) by VECTSP_1:6;
end;
k in ( Seg n ) by A30,A31,FINSEQ_1:1;
then A36: k in ( dom P0 ) by A27,FINSEQ_1:def 3;
A37:now
k in ( Seg n ) by A30,A31,FINSEQ_1:1;
then [ k,1 ] in ( Indices P0 ) by A27,A28,A22,ZFMISC_1:87;
then A38: (ex p being (FinSequence of K) st (p = ( P0 . k ) & ( P0 * (k,1) ) = ( p . 1 ))) by MATRIX_1:def 5;
assume A39: k <> 1;
then (k in ( NAT ) & 1 < k) by A30,ORDINAL1:def 12,XXREAL_0:1;
then ( P0 * (k,1) ) = ( ( Base_FinSeq (K,n,k) ) . 1 ) by A14,A31,A38
.= ( 0. K ) by A13,A39,CKB31:1;
hence ( ( Col (P0,1) ) . k ) = ( 0. K ) by A36,MATRIX_1:def 8;
end;
A40:now
assume A41: k = 1;
hence ( ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) . k ) = ( ( a " ) * ( ( Base_FinSeq (K,n,1) ) /. 1 ) ) by A33,A32,FVSUM_1:50
.= ( ( a " ) * ( 1. K ) ) by A31,A32,A41,CKB30:1
.= ( a " ) by VECTSP_1:def 6;
end;
1 <= n by A30,A31,XXREAL_0:2;
then 1 in ( dom P0 ) by A27,FINSEQ_3:25;
hence thesis by A25,A34,A40,A37,MATRIX_1:def 8;
end;
A42: ( len A ) = n by MATRIX_1:24;
then A43: 1 in ( Seg ( len A ) ) by A3,FINSEQ_1:1;
then A44: 1 in ( dom A ) by FINSEQ_1:def 3;
A45: ( width A ) = n by MATRIX_1:24;
then A46: ( len ( Line (A,1) ) ) = n by MATRIX_1:def 7;
then A47: 1 in ( dom ( Line (A,1) ) ) by A42,A43,FINSEQ_1:def 3;
A48: 1 in ( Seg ( width A ) ) by A45,A3,FINSEQ_1:1;
A49: (for i holds (((1 < i & i <= n) & ( A * (i,1) ) = ( 0. K )) implies ( ( A * P0 ) * (i,1) ) = ( 0. K )))
proof
set Q = A;
set P = P0;
let i;
assume that
A50: (1 < i & i <= n)
and
A51: ( A * (i,1) ) = ( 0. K );
A52: 1 <= n by A50,XXREAL_0:2;
reconsider p = ( Col (P,1) ),q = ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) as (FinSequence of K);
A53: ( len ( Col (P,1) ) ) = ( len P ) by MATRIX_1:def 8
.= n by MATRIX_1:24;
A54: ( len ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) ) = ( len ( Base_FinSeq (K,n,1) ) ) by MATRIXR1:16
.= n by CKB29:1;
A55: (for k being Nat holds ((1 <= k & k <= n) implies ( p . k ) = ( q . k )))
proof
let k being Nat;
assume that
A56: 1 <= k
and
A57: k <= n;
A58: ( len ( Base_FinSeq (K,n,1) ) ) = n by CKB29:1;
then A59: ( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A56,A57,FINSEQ_4:15;
k in ( dom P ) by A27,A56,A57,FINSEQ_3:25;
then A60: ( p . k ) = ( P * (k,1) ) by MATRIX_1:def 8;
k in ( dom ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) ) by A54,A56,A57,FINSEQ_3:25;
then A61: ( ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) . k ) = ( ( a " ) * ( ( Base_FinSeq (K,n,1) ) /. k ) ) by A59,FVSUM_1:50;
per cases  by A56,XXREAL_0:1;
suppose A62: 1 = k;

then ( q . k ) = ( ( a " ) * ( 1. K ) ) by A57,A59,A61,CKB30:1
.= ( a " ) by VECTSP_1:def 6;
hence thesis by A12,A24,A60,A62;
end;
suppose A63: 1 < k;

( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A56,A57,A58,FINSEQ_4:15;
then A64: ( ( a " ) * ( ( Base_FinSeq (K,n,1) ) /. k ) ) = ( ( a " ) * ( 0. K ) ) by A57,A63,CKB31:1
.= ( 0. K ) by VECTSP_1:6;
[ k,1 ] in ( Indices P ) by A52,A56,A57,MATRIX_1:37;
then A65: (ex p2 being (FinSequence of K) st (p2 = ( P . k ) & ( P * (k,1) ) = ( p2 . 1 ))) by MATRIX_1:def 5;
k in ( NAT ) by ORDINAL1:def 12;
then ( p . k ) = ( ( Base_FinSeq (K,n,k) ) . 1 ) by A14,A57,A60,A63,A65;
hence thesis by A52,A61,A63,A64,CKB31:1;
end;
end;
A66: ( width Q ) = n by MATRIX_1:24;
then A67: ( len ( Line (Q,i) ) ) = n by MATRIX_1:def 7;
then A68: ( ( Line (Q,i) ) /. 1 ) = ( ( Line (Q,i) ) . 1 ) by A3,FINSEQ_4:15
.= ( Q * (i,1) ) by A48,MATRIX_1:def 7;
[ i,1 ] in ( Indices ( Q * P ) ) by A50,A52,MATRIX_1:37;
hence ( ( Q * P ) * (i,1) ) = |( ( Line (Q,i) ),( Col (P,1) ) )| by A27,A66,MATRIX_3:def 4
.= |( ( Line (Q,i) ),( ( a " ) * ( Base_FinSeq (K,n,1) ) ) )| by A53,A54,A55,FINSEQ_1:14
.= ( ( a " ) * |( ( Line (Q,i) ),( Base_FinSeq (K,n,1) ) )| ) by A23,A67,CKB13:1
.= ( ( a " ) * ( Q * (i,1) ) ) by A3,A67,A68,CKB41:1
.= ( 0. K ) by A51,VECTSP_1:6;
end;
A69: (for j holds ((1 < j & j <= n) implies ( ( A * P0 ) * (1,j) ) = ( 0. K )))
proof
let j;
assume that
A70: 1 < j
and
A71: j <= n;
A72: ( len ( Base_FinSeq (K,n,j) ) ) = n by CKB29:1;
reconsider p = ( Col (P0,j) ),q = ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) + ( Base_FinSeq (K,n,j) ) ) as (FinSequence of K);
A73: ( len ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( Base_FinSeq (K,n,1) ) ) ) = ( len ( Base_FinSeq (K,n,1) ) ) by MATRIXR1:16
.= n by CKB29:1;
A74: ( len ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) ) = ( len ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( Base_FinSeq (K,n,1) ) ) ) by CKB8:1
.= ( len ( Base_FinSeq (K,n,1) ) ) by MATRIXR1:16
.= n by CKB29:1;
A75: [ 1,j ] in ( Indices P0 ) by A13,A70,A71,MATRIX_1:37;
A76: (for k being Nat holds ((1 <= k & k <= n) implies ( p . k ) = ( q . k )))
proof
A77: ( len ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( Base_FinSeq (K,n,1) ) ) ) = ( len ( Base_FinSeq (K,n,1) ) ) by MATRIXR1:16
.= n by CKB29:1;
let k being Nat;
assume that
A78: 1 <= k
and
A79: k <= n;
k in ( Seg n ) by A78,A79,FINSEQ_1:1;
then A80: k in ( dom ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( Base_FinSeq (K,n,1) ) ) ) by A73,FINSEQ_1:def 3;
( len ( Base_FinSeq (K,n,1) ) ) = n by CKB29:1;
then A81: ( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A78,A79,FINSEQ_4:15;
A82: ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) . k ) = ( ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( Base_FinSeq (K,n,1) ) ) . k ) by CKB8:1
.= ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( ( Base_FinSeq (K,n,1) ) /. k ) ) by A80,A81,FVSUM_1:50;
( len ( Base_FinSeq (K,n,1) ) ) = n by CKB29:1;
then A83: ( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A78,A79,FINSEQ_4:15;
k in ( dom P0 ) by A27,A78,A79,FINSEQ_3:25;
then A84: ( p . k ) = ( P0 * (k,j) ) by MATRIX_1:def 8;
per cases  by A78,XXREAL_0:1;
suppose A85: 1 = k;

k <= ( len ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) ) by A79,A77,CKB8:1;
then A86: ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) /. k ) = ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( ( Base_FinSeq (K,n,1) ) /. k ) ) by A78,A82,FINSEQ_4:15
.= ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( 1. K ) ) by A79,A83,A85,CKB30:1
.= ( - ( ( a " ) * ( A * (1,j) ) ) ) by VECTSP_1:def 6;
A87: ( p . k ) = ( - ( ( a " ) * ( A * (1,j) ) ) ) by A12,A70,A75,A84,A85;
( ( Base_FinSeq (K,n,j) ) /. k ) = ( ( Base_FinSeq (K,n,j) ) . k ) by A72,A78,A79,FINSEQ_4:15
.= ( 0. K ) by A70,A79,A85,CKB31:1;
then ( q . k ) = ( ( - ( ( a " ) * ( A * (1,j) ) ) ) + ( 0. K ) ) by A74,A72,A78,A79,A86,CKB7:1;
hence thesis by A87,RLVECT_1:4;
end;
suppose A88: 1 < k;

([ k,j ] in ( Indices P0 ) & k in ( NAT )) by A70,A71,A78,A79,MATRIX_1:37,ORDINAL1:def 12;
then A89: ( p . k ) = ( ( Base_FinSeq (K,n,k) ) . j ) by A12,A84,A88;
per cases ;
suppose A90: k <> j;

( len ( Base_FinSeq (K,n,1) ) ) = n by CKB29:1;
then ( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A78,A79,FINSEQ_4:15;
then A91: ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) . k ) = ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( 0. K ) ) by A79,A82,A88,CKB31:1
.= ( 0. K ) by VECTSP_1:6;
A92: ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) /. k ) = ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) . k ) by A74,A78,A79,FINSEQ_4:15;
A93: ( p . k ) = ( 0. K ) by A70,A71,A89,A90,CKB31:1;
( ( Base_FinSeq (K,n,j) ) /. k ) = ( ( Base_FinSeq (K,n,j) ) . k ) by A72,A78,A79,FINSEQ_4:15
.= ( 0. K ) by A78,A79,A90,CKB31:1;
then ( q . k ) = ( ( 0. K ) + ( 0. K ) ) by A74,A72,A78,A79,A92,A91,CKB7:1;
hence thesis by A93,RLVECT_1:4;
end;
suppose A94: k = j;

( len ( Base_FinSeq (K,n,1) ) ) = n by CKB29:1;
then ( ( Base_FinSeq (K,n,1) ) /. k ) = ( ( Base_FinSeq (K,n,1) ) . k ) by A78,A79,FINSEQ_4:15;
then A95: ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) . k ) = ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( 0. K ) ) by A79,A82,A88,CKB31:1
.= ( 0. K ) by VECTSP_1:6;
A96: ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) /. k ) = ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) . k ) by A74,A78,A79,FINSEQ_4:15;
A97: ( p . k ) = ( 1. K ) by A78,A79,A89,A94,CKB30:1;
( ( Base_FinSeq (K,n,j) ) /. k ) = ( ( Base_FinSeq (K,n,j) ) . k ) by A72,A78,A79,FINSEQ_4:15
.= ( 1. K ) by A78,A79,A94,CKB30:1;
then ( q . k ) = ( ( 0. K ) + ( 1. K ) ) by A74,A72,A78,A79,A96,A95,CKB7:1;
hence thesis by A97,RLVECT_1:4;
end;
end;
end;
A98: ( width A ) = n by MATRIX_1:24;
then A99: ( len ( Line (A,1) ) ) = n by MATRIX_1:def 7;
then A100: ( ( Line (A,1) ) /. 1 ) = ( ( Line (A,1) ) . 1 ) by A3,FINSEQ_4:15
.= a by A48,MATRIX_1:def 7;
A101: j in ( Seg n ) by A70,A71,FINSEQ_1:1;
A102: ( len ( Col (P0,j) ) ) = ( len P0 ) by MATRIX_1:def 8
.= n by MATRIX_1:24;
( len ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) + ( Base_FinSeq (K,n,j) ) ) ) = n by A74,A72,CKB4:1;
then A103: ( Col (P0,j) ) = ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) + ( Base_FinSeq (K,n,j) ) ) by A102,A76,FINSEQ_1:14;
A104: ( ( Line (A,1) ) /. j ) = ( ( Line (A,1) ) . j ) by A70,A71,A99,FINSEQ_4:15
.= ( A * (1,j) ) by A101,A98,MATRIX_1:def 7;
[ 1,j ] in ( Indices ( A * P0 ) ) by A13,A70,A71,MATRIX_1:37;
then ( ( A * P0 ) * (1,j) ) = |( ( Line (A,1) ),( Col (P0,j) ) )| by A27,A98,MATRIX_3:def 4
.= ( |( ( Line (A,1) ),( - ( ( ( a " ) * ( A * (1,j) ) ) * ( Base_FinSeq (K,n,1) ) ) ) )| + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by A46,A74,A72,A103,CKB14:1
.= ( |( ( Line (A,1) ),( ( - ( ( a " ) * ( A * (1,j) ) ) ) * ( Base_FinSeq (K,n,1) ) ) )| + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by CKB8:1
.= ( ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * |( ( Line (A,1) ),( Base_FinSeq (K,n,1) ) )| ) + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by A46,A23,CKB13:1
.= ( ( ( - ( ( a " ) * ( A * (1,j) ) ) ) * a ) + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by A46,A3,A100,CKB41:1
.= ( ( - ( ( ( a " ) * ( A * (1,j) ) ) * a ) ) + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by VECTSP_1:9
.= ( ( - ( ( A * (1,j) ) * ( ( a " ) * a ) ) ) + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by GROUP_1:def 3
.= ( ( - ( ( A * (1,j) ) * ( 1. K ) ) ) + |( ( Line (A,1) ),( Base_FinSeq (K,n,j) ) )| ) by A2,VECTSP_1:def 10
.= ( ( - ( ( A * (1,j) ) * ( 1. K ) ) ) + ( ( Line (A,1) ) /. j ) ) by A46,A70,A71,CKB41:1
.= ( ( - ( A * (1,j) ) ) + ( A * (1,j) ) ) by A104,VECTSP_1:def 6
.= ( 0. K ) by RLVECT_1:5;
hence thesis;
end;
A105: (( Indices A ) = [: ( Seg n ),( Seg n ) :] & ( Indices ( A * P0 ) ) = [: ( Seg n ),( Seg n ) :]) by MATRIX_1:24;
A106: ( len ( Col (P0,1) ) ) = ( len P0 ) by MATRIX_1:def 8
.= n by MATRIX_1:24;
( len ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) ) = ( len ( Base_FinSeq (K,n,1) ) ) by MATRIXR1:16
.= n by CKB29:1;
then A107: ( Col (P0,1) ) = ( ( a " ) * ( Base_FinSeq (K,n,1) ) ) by A106,A29,FINSEQ_1:14;
A108: ( len ( ( a " ) * ( Line (A,1) ) ) ) = ( len ( Line (A,1) ) ) by MATRIXR1:16
.= n by A45,MATRIX_1:def 7;
[ 1,1 ] in ( Indices A ) by A3,MATRIX_1:37;
then ( ( A * P0 ) * (1,1) ) = |( ( Line (A,1) ),( Col (P0,1) ) )| by A27,A45,A105,MATRIX_3:def 4
.= ( ( a " ) * |( ( Line (A,1) ),( Base_FinSeq (K,n,1) ) )| ) by A46,A23,A107,CKB13:1
.= ( ( a " ) * ( ( Line (A,1) ) /. 1 ) ) by A46,A3,CKB41:1
.= ( ( ( a " ) * ( Line (A,1) ) ) /. 1 ) by A47,POLYNOM1:def 1
.= ( ( ( a " ) * ( Line (A,1) ) ) . 1 ) by A3,A108,FINSEQ_4:15
.= ( ( a " ) * ( A * (1,1) ) ) by A48,A44,MATRIX12:3
.= ( 1. K ) by A2,VECTSP_1:def 10;
hence thesis by A26,A69,A49;
end;
