environ
vocabularies NUMBERS,RELAT_1,XBOOLE_0,ZFMISC_1,TARSKI,RELAT_2,STRUCT_0,FINSET_1,ORDERS_2,CARD_1,CAT_1,YELLOW_0,WELLORD1,NECKLA_2,NECKLACE,SUBSET_1,FUNCT_1,XXREAL_0,SEQM_3,REWRITE1,FINSEQ_1,NAT_1,ARYTM_3,FINSEQ_5,EQREL_1,MSUALG_5,CLASSES2,FUNCOP_1,FUNCT_4,ARYTM_1,NECKLA_3;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,ZFMISC_1,RELAT_1,RELAT_2,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,DOMAIN_1,STRUCT_0,ORDERS_2,WAYBEL_1,FUNCOP_1,CLASSES2,NECKLACE,WAYBEL_0,FUNCT_4,REWRITE1,FINSEQ_1,FINSEQ_5,EQREL_1,MSUALG_5,YELLOW_0,NECKLA_2,WELLORD1,CKB43,CKB44,CKB50,CKB51;
definitions XBOOLE_0,TARSKI,NECKLACE,RELAT_2,FUNCOP_1,WELLORD1,STRUCT_0,CKB44,CKB50,CKB51;
theorems RELSET_1,NECKLACE,XBOOLE_0,WAYBEL_0,YELLOW_0,FUNCT_1,FUNCT_2,ORDERS_2,RELAT_2,SUBSET_1,ZFMISC_1,XBOOLE_1,TARSKI,MCART_1,CLASSES2,CLASSES1,NECKLA_2,FUNCOP_1,ENUMSET1,RELAT_1,SYSREL,PARTFUN1,GROUP_6,CARD_2,REWRITE1,FINSEQ_1,FINSEQ_3,FINSEQ_5,NAT_1,EQREL_1,MSUALG_6,MSUALG_5,CARD_1,NAT_2,FUNCT_4,FUNCT_3,WAYBEL_1,YELLOW_6,REALSET1,XREAL_1,XXREAL_0,ORDINAL1,NAT_D,STRUCT_0,CKB1,CKB2,CKB3,CKB5,CKB7,CKB11,CKB21,CKB22,CKB23,CKB24,CKB25,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB47,CKB49,CKB50,CKB51,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65;
schemes NAT_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,CARD_1,FINSEQ_1,REALSET1,STRUCT_0,ORDERS_2,YELLOW_0,NECKLACE,NECKLA_2,ORDINAL1,FUNCT_4,RELSET_1,ZFMISC_1,CKB4,CKB6,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB26,CKB27,CKB37,CKB45,CKB46,CKB48,CKB52;
constructors XXREAL_0,NAT_1,EQREL_1,CLASSES1,TOLER_1,CLASSES2,FINSEQ_5,REWRITE1,REALSET2,MSUALG_5,ORDERS_3,WAYBEL_1,NECKLACE,NECKLA_2,RELSET_1,CKB44,CKB51;
requirements BOOLE,SUBSET,REAL,NUMERALS,ARITHM;
begin
theorem
(for G being non empty  strict  finite  irreflexive  symmetric RelStr holds ((G is  N-free & (the carrier of G) in ( FinSETS )) implies ( the RelStr of G ) in ( fin_RelStr_sp )))
proof
let R being non empty  strict  finite  irreflexive  symmetric RelStr;
defpred P[ Nat ]
 means
(for G being non empty  strict  finite  irreflexive  symmetric RelStr holds (((G is  N-free & ( card (the carrier of G) ) = $1) & (the carrier of G) in ( FinSETS )) implies ( the RelStr of G ) in ( fin_RelStr_sp )));
A1: (for n being Nat holds ((for k being Nat holds (k < n implies P[ k ])) implies P[ n ]))
proof
let n being Nat;
assume that
A2: (for k being Nat holds (k < n implies P[ k ]));
let G being non empty  strict  finite  irreflexive  symmetric RelStr;
set CG = ( ComplRelStr G );
assume that
A3: G is  N-free
and
A4: ( card (the carrier of G) ) = n
and
A5: (the carrier of G) in ( FinSETS );
per cases ;
suppose G is  trivial;

then (the carrier of G) is 1 -element;
then reconsider G as 1 -element RelStr by STRUCT_0:def 19;
( the RelStr of G ) in ( fin_RelStr_sp ) by A5,NECKLA_2:def 5;
hence thesis;
end;
suppose ((not G is  path-connected) & G is non trivial);

then consider G1 being non empty  strict  irreflexive  symmetric RelStr,G2 being non empty  strict  irreflexive  symmetric RelStr such that A6: (the carrier of G1) misses (the carrier of G2) and A7: ( the RelStr of G ) = ( union_of (G1,G2) ) by CKB55:1;
set cG1 = (the carrier of G1);
set cG2 = (the carrier of G2);
set R = ( the RelStr of G );
set cR = (the carrier of R);
A8: cR = ( cG1 \/ cG2 ) by A7,NECKLA_2:def 2;
then A9: ( card cG1 ) in ( card cR ) by A6,CKB57:1;
then reconsider G1 as non empty  strict  finite  irreflexive  symmetric RelStr by CARD_2:49;
reconsider cR as  finite set;
A10: ( card cG2 ) in ( card cR ) by A6,A8,CKB57:1;
then reconsider G2 as non empty  strict  finite  irreflexive  symmetric RelStr by CARD_2:49;
reconsider cG2 as  finite set by A10,CARD_2:49;
A11: ( card cG2 ) < ( card cR ) by A10,NAT_1:44;
G2 is  full  full (SubRelStr of G) by A6,A7,CKB24:1;
then A12: G2 is  N-free by A3,CKB40:1;
(the carrier of G2) in ( FinSETS ) by A5,A8,CLASSES1:3,CLASSES2:def 2,XBOOLE_1:7;
then A13: G2 in ( fin_RelStr_sp ) by A2,A4,A11,A12;
G1 is  full  full (SubRelStr of G) by A6,A7,CKB24:1;
then A14: G1 is  N-free by A3,CKB40:1;
reconsider cG1 as  finite set by A9,CARD_2:49;
A15: ( card cG1 ) < ( card cR ) by A9,NAT_1:44;
(the carrier of G1) in ( FinSETS ) by A5,A8,CLASSES1:3,CLASSES2:def 2,XBOOLE_1:7;
then G1 in ( fin_RelStr_sp ) by A2,A4,A15,A14;
hence thesis by A6,A7,A13,NECKLA_2:def 5;
end;
suppose ((not CG is  path-connected) & G is non trivial);

then consider G1 being non empty  strict  irreflexive  symmetric RelStr,G2 being non empty  strict  irreflexive  symmetric RelStr such that A16: (the carrier of G1) misses (the carrier of G2) and A17: ( the RelStr of G ) = ( sum_of (G1,G2) ) by CKB56:1;
set cG1 = (the carrier of G1);
set cG2 = (the carrier of G2);
set R = ( the RelStr of G );
set cR = (the carrier of R);
A18: cR = ( cG1 \/ cG2 ) by A17,NECKLA_2:def 3;
then A19: ( card cG1 ) in ( card cR ) by A16,CKB57:1;
then reconsider G1 as non empty  strict  finite  irreflexive  symmetric RelStr by CARD_2:49;
reconsider cR as  finite set;
A20: ( card cG2 ) in ( card cR ) by A16,A18,CKB57:1;
then reconsider G2 as non empty  strict  finite  irreflexive  symmetric RelStr by CARD_2:49;
reconsider cG2 as  finite set by A20,CARD_2:49;
A21: ( card cG2 ) < ( card cR ) by A20,NAT_1:44;
G2 is  full  full (SubRelStr of G) by A16,A17,CKB24:1;
then A22: G2 is  N-free by A3,CKB40:1;
(the carrier of G2) in ( FinSETS ) by A5,A18,CLASSES1:3,CLASSES2:def 2,XBOOLE_1:7;
then A23: G2 in ( fin_RelStr_sp ) by A2,A4,A21,A22;
G1 is  full  full (SubRelStr of G) by A16,A17,CKB24:1;
then A24: G1 is  N-free by A3,CKB40:1;
reconsider cG1 as  finite set by A19,CARD_2:49;
A25: ( card cG1 ) < ( card cR ) by A19,NAT_1:44;
(the carrier of G1) in ( FinSETS ) by A5,A18,CLASSES1:3,CLASSES2:def 2,XBOOLE_1:7;
then G1 in ( fin_RelStr_sp ) by A2,A4,A25,A24;
hence thesis by A16,A17,A23,NECKLA_2:def 5;
end;
suppose A26: ((G is non trivial & G is  path-connected) & CG is  path-connected);

consider x being set such that A27: x in (the carrier of G) by XBOOLE_0:def 1;
reconsider x as (Element of G) by A27;
set A = ( (the carrier of G) \ { x } );
A28: A c= (the carrier of G);
reconsider A as (Subset of G);
set R = ( subrelstr A );
reconsider R as non empty  finite  irreflexive  symmetric RelStr by A26,YELLOW_0:def 15;
A29: (the carrier of R) c= (the carrier of G) by A28,YELLOW_0:def 15;
( card A ) = ( ( card (the carrier of G) ) - ( card { x } ) ) by CARD_2:44;
then A30: ( card A ) = ( n - 1 ) by A4,CARD_2:42;
( n - 1 ) < ( ( n - 1 ) + 1 ) by XREAL_1:29;
then A31: ( card (the carrier of R) ) < n by A30,YELLOW_0:def 15;
R is  N-free by A3,CKB40:1;
then A32: R in ( fin_RelStr_sp ) by A2,A5,A31,A29,CLASSES1:3,CLASSES2:def 2;
thus thesis
proof
per cases  by A32,NECKLA_2:6;
suppose A33: R is  trivial  trivial RelStr;

(the carrier of R) is non empty;
then A34: A is non empty by YELLOW_0:def 15;
A is  trivial by A33,YELLOW_0:def 15;
then consider a being set such that A35: A = { a } by A34,ZFMISC_1:131;
A36: ( (the carrier of G) \/ { x } ) = (the carrier of G)
proof
thus ( (the carrier of G) \/ { x } ) c= (the carrier of G)
proof
let c being set;
assume c in ( (the carrier of G) \/ { x } );
then (c in (the carrier of G) or c in { x }) by XBOOLE_0:def 3;
hence thesis;
end;

let c being set;
assume c in (the carrier of G);
hence thesis by XBOOLE_0:def 3;
end;
( { a } \/ { x } ) = ( (the carrier of G) \/ { x } ) by A35,XBOOLE_1:39;
then ((the carrier of G) = { a,x } & a <> x) by A26,A36,ENUMSET1:1;
then ( card (the carrier of G) ) = 2 by CARD_2:57;
hence thesis by A5,CKB59:1;
end;
suppose (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( fin_RelStr_sp )) & R2 in ( fin_RelStr_sp )) & (R = ( union_of (R1,R2) ) or R = ( sum_of (R1,R2) ))));

then consider R1 being  strict RelStr,R2 being  strict RelStr such that A37: (the carrier of R1) misses (the carrier of R2) and A38: R1 in ( fin_RelStr_sp ) and A39: R2 in ( fin_RelStr_sp ) and A40: (R = ( union_of (R1,R2) ) or R = ( sum_of (R1,R2) ));
thus thesis
proof
per cases  by A40;
suppose A41: R = ( union_of (R1,R2) );

R2 is (SubRelStr of R) by A37,A40,CKB24:1;
then reconsider R2 as non empty (SubRelStr of G) by A39,NECKLA_2:4,YELLOW_6:7;
R1 is (SubRelStr of R) by A37,A40,CKB24:1;
then reconsider R1 as non empty (SubRelStr of G) by A38,NECKLA_2:4,YELLOW_6:7;
( subrelstr ( ( [#] G ) \ { x } ) ) = ( union_of (R1,R2) ) by A41;
then G embeds ( Necklace 4 ) by A26,A37,CKB65:1;
hence thesis by A3,NECKLA_2:def 1;
end;
suppose A42: R = ( sum_of (R1,R2) );

( ComplRelStr R2 ) is non empty
proof
assume (not thesis);
then R2 is  empty;
hence contradiction by A39,NECKLA_2:4;
end;
then reconsider R22 = ( ComplRelStr R2 ) as non empty RelStr;
( ComplRelStr R1 ) is non empty
proof
assume (not thesis);
then R1 is  empty;
hence contradiction by A38,NECKLA_2:4;
end;
then reconsider R11 = ( ComplRelStr R1 ) as non empty RelStr;
reconsider G9 = ( ComplRelStr G ) as non empty  irreflexive  symmetric RelStr;
reconsider x9 = x as (Element of G9) by NECKLACE:def 8;
A43: ((the carrier of R11) = (the carrier of R1) & (the carrier of R22) = (the carrier of R2)) by NECKLACE:def 8;
A44: ( ComplRelStr R ) = ( ComplRelStr ( subrelstr ( ( [#] G ) \ { x } ) ) )
.= ( subrelstr ( ( [#] G9 ) \ { x9 } ) ) by CKB36:1;
A45: G9 is  N-free by A3,CKB42:1;
A46: (( ComplRelStr G9 ) is  path-connected & G9 is non trivial) by A26,CKB32:1,NECKLACE:def 8;
( ComplRelStr R ) = ( union_of (( ComplRelStr R1 ),( ComplRelStr R2 )) ) by A37,A42,CKB34:1;
then G9 embeds ( Necklace 4 ) by A26,A37,A43,A46,A44,CKB65:1;
hence thesis by A45,NECKLA_2:def 1;
end;
end;

end;
end;

end;
end;
A47: (for k being Nat holds P[ k ]) from NAT_1:sch 4(A1);
( card (the carrier of R) ) is Nat;
hence thesis by A47;
end;
