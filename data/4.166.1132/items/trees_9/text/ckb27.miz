environ
vocabularies XBOOLE_0,TREES_3,SUBSET_1,FINSET_1,TREES_2,TREES_1,CARD_1,ARYTM_3,NAT_1,ORDINAL4,FINSEQ_1,ARYTM_1,RELAT_1,FUNCT_1,TARSKI,ORDINAL1,NUMBERS,XXREAL_0,ZFMISC_1,TREES_4,FUNCT_6,TREES_A,TREES_9,MCART_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_6,NAT_1,BINOP_1,FINSET_1,FINSEQ_1,FINSEQ_2,TREES_1,TREES_2,TREES_3,TREES_4,MCART_1,XXREAL_0,CKB1,CKB8,CKB9,CKB16,CKB18,CKB19;
definitions TARSKI,XBOOLE_0,FUNCT_1,TREES_2,TREES_3,TREES_4,BINOP_1,CKB9,CKB16,CKB18,CKB19;
theorems TARSKI,AXIOMS,ZFMISC_1,NAT_1,WELLORD2,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_3,CARD_1,CARD_2,FUNCT_6,TREES_1,TREES_2,TREES_3,TREES_4,RELSET_1,RELAT_1,XBOOLE_0,XBOOLE_1,FINSET_1,XREAL_1,XXREAL_0,ORDINAL1,FINSEQ_2,REALSET1,TREES_A,MCART_1,FINSEQ_6,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB16,CKB18,CKB19,CKB26;
schemes NAT_1,FUNCT_1,FINSEQ_1,CLASSES1,FUNCT_2,TREES_2,CKB25;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XREAL_0,FINSEQ_1,TREES_1,TREES_2,TREES_3,PRE_CIRC,CARD_1,ZFMISC_1,REALSET1,BINOP_1,SUBSET_1,RELSET_1,NAT_1,TREES_A,CKB2,CKB13,CKB14,CKB15,CKB17,CKB20,CKB21,CKB22,CKB23,CKB24;
constructors WELLORD2,XXREAL_0,XREAL_0,NAT_1,FINSEQ_2,TREES_4,RELSET_1,BINOP_1,FINSEQ_4,CKB1,CKB16,CKB18,CKB19;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
Lm4:now
let p being FinSequence;
let x being set;
assume x in ( rng p );
then consider y being set such that A1: y in ( dom p ) and A2: x = ( p . y ) by FUNCT_1:def 3;
(ex k being (Element of ( NAT )) st (y = ( k + 1 ) & k < ( len p ))) by A1,CKB3:1;
hence (ex k being (Element of ( NAT )) st (k < ( len p ) & x = ( p . ( k + 1 ) ))) by A2;
end;
definition
let t being  finite-branching Tree;
let p being (Element of t);
func p succ ->  one-to-one (FinSequence of t) means 
:Def5: ((( len it ) = ( card ( succ p ) ) & ( rng it ) = ( succ p )) & (for i being (Element of ( NAT )) holds (i < ( len it ) implies ( it . ( i + 1 ) ) = ( p ^ <* i *> ))));
existence
proof
deffunc U(Nat) = ( p ^ <* ( $1 - 1 ) *> );
consider q being FinSequence such that A1: (( len q ) = ( card ( succ p ) ) & (for i being Nat holds (i in ( dom q ) implies ( q . i ) = U(i)))) from FINSEQ_1:sch 2;
A2: q is  one-to-one
proof
let x1 being set;
let x2 being set;
assume A3: (x1 in ( dom q ) & x2 in ( dom q ));
then reconsider i1 = x1,i2 = x2 as (Element of ( NAT ));
A4: (( ( p ^ <* ( i1 - 1 ) *> ) . ( ( len p ) + 1 ) ) = ( i1 - 1 ) & ( ( p ^ <* ( i2 - 1 ) *> ) . ( ( len p ) + 1 ) ) = ( i2 - 1 )) by FINSEQ_1:42;
(( q . x1 ) = ( p ^ <* ( i1 - 1 ) *> ) & ( q . x2 ) = ( p ^ <* ( i2 - 1 ) *> )) by A1,A3;
hence thesis by A4;
end;
A5: (for i being (Element of ( NAT )) holds (i < ( len q ) implies ( q . ( i + 1 ) ) = ( p ^ <* i *> )))
proof
let i being (Element of ( NAT ));
assume i < ( len q );
then ( q . ( i + 1 ) ) = ( p ^ <* ( ( i + 1 ) - 1 ) *> ) by A1,CKB4:1;
hence thesis;
end;
A6: ( rng q ) c= ( succ p )
proof
let x being set;
assume x in ( rng q );
then consider k being (Element of ( NAT )) such that A7: k < ( len q ) and A8: x = ( q . ( k + 1 ) ) by Lm4;
x = ( p ^ <* k *> ) by A5,A7,A8;
hence thesis by A1,A7,CKB26:1;
end;
then reconsider q as  one-to-one (FinSequence of ( succ p )) by A2,FINSEQ_1:def 4;
take q;
thus (( len q ) = ( card ( succ p ) ) & ( rng q ) c= ( succ p )) by A1,A6;
thus ( succ p ) c= ( rng q )
proof
let x being set;
assume A9: x in ( succ p );
then consider n being (Element of ( NAT )) such that A10: x = ( p ^ <* n *> ) and ( p ^ <* n *> ) in t;
A11: n < ( card ( succ p ) ) by A9,A10,CKB26:1;
then ( q . ( n + 1 ) ) = x by A1,A5,A10;
hence thesis by A1,A11,CKB4:1;
end;

thus thesis by A5;
end;
uniqueness
proof
let q1 being  one-to-one (FinSequence of t);
let q2 being  one-to-one (FinSequence of t);
assume that
A12: ( len q1 ) = ( card ( succ p ) )
and
( rng q1 ) = ( succ p )
and
A13: (for i being (Element of ( NAT )) holds (i < ( len q1 ) implies ( q1 . ( i + 1 ) ) = ( p ^ <* i *> )))
and
A14: ( len q2 ) = ( card ( succ p ) )
and
( rng q2 ) = ( succ p )
and
A15: (for i being (Element of ( NAT )) holds (i < ( len q2 ) implies ( q2 . ( i + 1 ) ) = ( p ^ <* i *> )));
A16: ( dom q1 ) = ( Seg ( card ( succ p ) ) ) by A12,FINSEQ_1:def 3;
A17:now
let k being Nat;
assume k in ( Seg ( card ( succ p ) ) );
then consider n being (Element of ( NAT )) such that A18: (k = ( n + 1 ) & n < ( len q1 )) by A16,CKB3:1;
thus ( q1 . k ) = ( p ^ <* n *> ) by A13,A18
.= ( q2 . k ) by A12,A14,A15,A18;
end;
( dom q2 ) = ( Seg ( card ( succ p ) ) ) by A14,FINSEQ_1:def 3;
hence thesis by A16,A17,FINSEQ_1:13;
end;
end;
