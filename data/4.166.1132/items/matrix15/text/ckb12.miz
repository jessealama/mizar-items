environ
vocabularies NUMBERS,NAT_1,VECTSP_1,FREEALG,FINSET_1,SUBSET_1,MATRIX_1,TREES_1,FINSEQ_1,RELAT_1,XXREAL_0,INCSP_1,FVSUM_1,CARD_3,RVSUM_1,GROUP_1,ARYTM_1,SUPINF_2,FUNCT_1,ARYTM_3,CARD_1,XBOOLE_0,ALGSTR_0,ORDINAL4,STRUCT_0,FINSEQ_2,TARSKI,RLVECT_1,PARTFUN1,VALUED_1,ZFMISC_1,CLASSES1,XCMPLX_0,MATRIX_3,MATRIX13,LAPLACE,PRVECT_1,RLVECT_3,LMOD_7,QC_LANG1,RLSUB_1,MESFUNC1,PRE_POLY,MATRIX11,MATRIXR1,AFINSQ_1,MATRIX_2,FINSEQ_3,FUNCT_2,SETWISEO,FINSOP_1,RLVECT_2,RLVECT_5,FUNCOP_1,FUNCT_4,MATRIX_6,MATRIX15;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,SETWOP_2,FINSEQ_1,STRUCT_0,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,MATRIX_2,FVSUM_1,FINSOP_1,NAT_D,BINARITH,GROUP_4,MATRIX_3,MATRIX_6,MATRIX_7,FINSEQ_7,FUNCT_4,DOMAIN_1,MATRIX11,MEASURE6,PSCOMP_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,FINSEQOP,PRVECT_1,MATRIX13,PRE_POLY,MATRLIN,FUNCT_7,PNPROC_1,LAPLACE;
definitions TARSKI,XBOOLE_0,RLVECT_1,FINSEQ_1,FINSEQ_2,MATRIX_1,GROUP_4,MATRIX_3,MATRIX_7,VECTSP_4,RELAT_1,LAPLACE,MATRIX13,FVSUM_1,ALGSTR_0;
theorems CARD_1,CARD_2,CARD_FIN,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQOP,FINSOP_1,FRECHET,FUNCT_1,FUNCT_2,FUNCT_7,FUNCOP_1,FVSUM_1,GROUP_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_4,MATRIX_5,MATRIX_6,MATRIX_7,MATRIX11,MATRIX13,MATRIXR1,MATRIXR2,MATRLIN,NAT_1,ORDINAL1,PARTFUN1,PNPROC_1,RELAT_1,RLVECT_1,STIRL2_1,STRUCT_0,TARSKI,WELLORD2,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,NAT_D,PRE_POLY,MEASURE6,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11;
schemes FINSEQ_2,NAT_1,MATRIX_1;
registrations XBOOLE_0,FUNCT_1,FINSET_1,STRUCT_0,FVSUM_1,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,CARD_1,FUNCOP_1,SETFAM_1,FINSEQ_2,MATRLIN,MATRIX13,XREAL_0,PNPROC_1,VECTSP_9,VALUED_0,RELSET_1,PRVECT_1;
constructors SETWISEO,FINSOP_1,ALGSTR_1,FVSUM_1,XXREAL_0,GROUP_4,FINSEQ_7,WELLORD2,VECTSP_6,VECTSP_7,VECTSP_9,MATRIX_6,MATRIX_7,MATRIX11,MATRIX13,PNPROC_1,REALSET1,LAPLACE,BINOP_2,NAT_D,BINARITH,RELSET_1,PRE_POLY,PSCOMP_1;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve y for set;
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve K for Field;
reserve A for (Matrix of K);
theorem
Th10: (for P,Q,Q9 being  without_zero  finite (Subset of ( NAT )) holds ([: P,Q9 :] c= ( Indices A ) implies (for i holds (for j holds (((((i in ( ( dom A ) \ P ) & j in ( ( Seg ( width A ) ) \ Q )) & ( A * (i,j) ) <> ( 0. K )) & Q c= Q9) & ( ( Line (A,i) ) * ( Sgm Q9 ) ) = ( ( card Q9 ) |-> ( 0. K ) )) implies ( the_rank_of A ) > ( the_rank_of ( Segm (A,P,Q) ) ))))))
proof
let P being  without_zero  finite (Subset of ( NAT ));
let Q being  without_zero  finite (Subset of ( NAT ));
let R being  without_zero  finite (Subset of ( NAT ));
assume that
A1: [: P,R :] c= ( Indices A );
let i;
let j;
assume that
A2: i in ( ( dom A ) \ P )
and
A3: j in ( ( Seg ( width A ) ) \ Q )
and
A4: ( A * (i,j) ) <> ( 0. K )
and
A5: Q c= R
and
A6: ( ( Line (A,i) ) * ( Sgm R ) ) = ( ( card R ) |-> ( 0. K ) );
A7: ( dom A ) = ( Seg ( len A ) ) by FINSEQ_1:def 3;
then A8: i in ( Seg ( len A ) ) by A2,XBOOLE_0:def 5;
A9: [: P,Q :] c= [: P,R :] by A5,ZFMISC_1:95;
then A10: [: P,Q :] c= ( Indices A ) by A1,XBOOLE_1:1;
reconsider i0 = i,j0 = j as non  zero (Element of ( NAT )) by A2,A3,A7;
A11: j in ( Seg ( width A ) ) by A3,XBOOLE_0:def 5;
set S = ( Segm (A,P,Q) );
consider P9,Q9 being  without_zero  finite (Subset of ( NAT )) such that A12: [: P9,Q9 :] c= ( Indices S ) and A13: ( card P9 ) = ( card Q9 ) and A14: ( card P9 ) = ( the_rank_of S ) and A15: ( Det ( EqSegm (S,P9,Q9) ) ) <> ( 0. K ) by MATRIX13:def 4;
(P9 = ( {} ) iff Q9 = ( {} )) by A13;
then consider P2,Q2 being  without_zero  finite (Subset of ( NAT )) such that A16: P2 c= P and A17: Q2 c= Q and P2 = ( ( Sgm P ) .: P9 ) and Q2 = ( ( Sgm Q ) .: Q9 ) and A18: ( card P2 ) = ( card P9 ) and A19: ( card Q2 ) = ( card Q9 ) and A20: ( Segm (S,P9,Q9) ) = ( Segm (A,P2,Q2) ) by A12,MATRIX13:57;
set Q2j = ( Q2 \/ { j0 } );
set P2i = ( P2 \/ { i0 } );
set ESS = ( EqSegm (A,P2i,Q2j) );
set SS = ( Segm (A,P2i,Q2j) );
per cases ;
suppose [: P,Q :] = ( {} );

then (( card P ) = ( 0 ) or ( card Q ) = ( 0 )) by CARD_1:27,ZFMISC_1:90;
then A21: ( the_rank_of S ) = ( 0 ) by MATRIX13:77;
[ i,j ] in ( Indices A ) by A7,A8,A11,ZFMISC_1:87;
hence thesis by A4,A21,MATRIX13:94;
end;
suppose A22: [: P,Q :] <> ( {} );

then P c= ( dom A ) by A10,ZFMISC_1:114;
then A23: P2 c= ( dom A ) by A16,XBOOLE_1:1;
[: P,R :] <> ( {} ) by A9,A22,XBOOLE_1:3;
then A24: R c= ( Seg ( width A ) ) by A1,ZFMISC_1:114;
then A25: ( dom ( Sgm R ) ) = ( Seg ( card R ) ) by FINSEQ_3:40;
Q c= ( Seg ( width A ) ) by A10,A22,ZFMISC_1:114;
then A26: Q2 c= ( Seg ( width A ) ) by A17,XBOOLE_1:1;
A27: { j0 } c= ( Seg ( width A ) ) by A11,ZFMISC_1:31;
then A28: ( Sgm Q2j ) is  one-to-one by A26,FINSEQ_3:92,XBOOLE_1:8;
A29: Q2j c= ( Seg ( width A ) ) by A26,A27,XBOOLE_1:8;
then A30: ( rng ( Sgm Q2j ) ) = Q2j by FINSEQ_1:def 13;
A31: { i0 } c= ( dom A ) by A7,A8,ZFMISC_1:31;
then A32: P2i c= ( dom A ) by A23,XBOOLE_1:8;
then A33: [: P2i,Q2j :] c= ( Indices A ) by A29,ZFMISC_1:96;
A34: ( dom ( Sgm P2i ) ) = ( Seg ( card P2i ) ) by A7,A23,A31,FINSEQ_3:40,XBOOLE_1:8;
i in { i } by TARSKI:def 1;
then A35: i in P2i by XBOOLE_0:def 3;
A36: (not i in P2) by A2,A16,XBOOLE_0:def 5;
then A37: ( card P2i ) = ( ( card P2 ) + 1 ) by CARD_2:41;
then A38: ( ( card P2i ) -' 1 ) = ( card P9 ) by A18,NAT_D:34;
A39: (not j in Q2) by A3,A17,XBOOLE_0:def 5;
then A40: ( card Q2j ) = ( ( card Q2 ) + 1 ) by CARD_2:41;
then A41: ESS = SS by A13,A18,A19,A36,CARD_2:41,MATRIX13:def 3;
j in { j } by TARSKI:def 1;
then j in Q2j by XBOOLE_0:def 3;
then consider y such that A42: y in ( dom ( Sgm Q2j ) ) and A43: ( ( Sgm Q2j ) . y ) = j by A30,FUNCT_1:def 3;
( rng ( Sgm P2i ) ) = P2i by A7,A32,FINSEQ_1:def 13;
then consider x such that A44: x in ( dom ( Sgm P2i ) ) and A45: ( ( Sgm P2i ) . x ) = i by A35,FUNCT_1:def 3;
reconsider x,y as (Element of ( NAT )) by A44,A42;
( - ( 1_ K ) ) <> ( 0. K ) by VECTSP_1:28;
then A46: ( ( power K ) . (( - ( 1_ K ) ),( x + y )) ) <> ( 0. K ) by CKB4:1;
set L = ( LaplaceExpL (ESS,x) );
A47: ( dom L ) = ( Seg ( len L ) ) by FINSEQ_1:def 3
.= ( Seg ( card P2i ) ) by LAPLACE:def 7;
then A48: y in ( dom L ) by A13,A18,A19,A26,A27,A37,A40,A42,FINSEQ_3:40,XBOOLE_1:8;
A49: ( dom ( Sgm Q2j ) ) = ( Seg ( card Q2j ) ) by A26,A27,FINSEQ_3:40,XBOOLE_1:8;
then ( Delete (ESS,x,y) ) = ( EqSegm (A,( P2i \ { i } ),( Q2j \ { j } )) ) by A13,A18,A19,A37,A40,A34,A44,A45,A42,A43,MATRIX13:64
.= ( EqSegm (A,P2,( Q2j \ { j } )) ) by A36,ZFMISC_1:117
.= ( EqSegm (A,P2,Q2) ) by A39,ZFMISC_1:117
.= ( Segm (A,P2,Q2) ) by A13,A18,A19,MATRIX13:def 3
.= ( EqSegm (S,P9,Q9) ) by A13,A20,MATRIX13:def 3;
then A50: ( ( ( power K ) . (( - ( 1_ K ) ),( x + y )) ) * ( Det ( Delete (ESS,x,y) ) ) ) <> ( 0. K ) by A15,A38,A46,VECTSP_1:12;
A51: ( Indices ESS ) = [: ( Seg ( card P2i ) ),( Seg ( card P2i ) ) :] by MATRIX_1:24;
then A52: [ x,y ] in ( Indices ESS ) by A13,A18,A19,A37,A40,A34,A49,A44,A42,ZFMISC_1:87;
A53: ( rng ( Sgm R ) ) = R by A24,FINSEQ_1:def 13;
now
let k;
assume that
A54: k in ( dom L )
and
A55: k <> y;
( ( Sgm Q2j ) . k ) <> j by A13,A18,A19,A37,A40,A49,A28,A42,A43,A47,A54,A55,FUNCT_1:def 4;
then A56: (not ( ( Sgm Q2j ) . k ) in { j }) by TARSKI:def 1;
( ( Sgm Q2j ) . k ) in Q2j by A13,A18,A19,A37,A40,A30,A49,A47,A54,FUNCT_1:def 3;
then ( ( Sgm Q2j ) . k ) in Q2 by A56,XBOOLE_0:def 3;
then A57: ( ( Sgm Q2j ) . k ) in Q by A17;
then A58: ( ( Sgm Q2j ) . k ) in R by A5;
consider z being set such that A59: z in ( dom ( Sgm R ) ) and A60: ( ( Sgm R ) . z ) = ( ( Sgm Q2j ) . k ) by A5,A53,A57,FUNCT_1:def 3;
reconsider z as (Element of ( NAT )) by A59;
[ x,k ] in ( Indices ESS ) by A34,A44,A47,A51,A54,ZFMISC_1:87;
then ( ESS * (x,k) ) = ( A * (i,( ( Sgm Q2j ) . k )) ) by A45,A41,MATRIX13:def 1
.= ( ( Line (A,i) ) . ( ( Sgm R ) . z ) ) by A24,A60,A58,MATRIX_1:def 7
.= ( ( ( card R ) |-> ( 0. K ) ) . z ) by A6,A59,FUNCT_1:13
.= ( 0. K ) by A25,A59,FINSEQ_2:57;
hence ( L . k ) = ( ( 0. K ) * ( Cofactor (ESS,x,k) ) ) by A54,LAPLACE:def 7
.= ( 0. K ) by VECTSP_1:7;
end;
then A61: ( L . y ) = ( Sum L ) by A48,MATRIX_3:12
.= ( Det ESS ) by A34,A44,LAPLACE:25;
( L . y ) = ( ( SS * (x,y) ) * ( Cofactor (ESS,x,y) ) ) by A48,A41,LAPLACE:def 7
.= ( ( A * (i,j) ) * ( ( ( power K ) . (( - ( 1_ K ) ),( x + y )) ) * ( Det ( Delete (ESS,x,y) ) ) ) ) by A45,A43,A41,A52,MATRIX13:def 1;
then ( Det ESS ) <> ( 0. K ) by A4,A61,A50,VECTSP_1:12;
then ( the_rank_of A ) >= ( card P2i ) by A13,A18,A19,A37,A40,A33,MATRIX13:def 4;
hence thesis by A14,A18,A37,NAT_1:13;
end;
end;
