environ
vocabularies FINSEQ_8,ARYTM_1,RELAT_1,FINSEQ_1,FUNCT_1,FINSEQ_5,RFINSEQ,JORDAN3,ARYTM_3,NUMBERS,ORDINAL4,TARSKI,XBOOLE_0,XXREAL_0,CARD_1,SUBSET_1,NAT_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,RELAT_1,RFINSEQ,FINSEQ_1,FUNCT_1,FINSEQ_6,FINSEQ_5,CKB1,CKB5,CKB6;
definitions FINSEQ_1,CKB5;
theorems NAT_1,NAT_2,FINSEQ_1,FINSEQ_3,FINSEQ_5,FINSEQ_6,RFINSEQ,RELAT_1,XREAL_1,XBOOLE_1,XXREAL_0,ORDINAL1,XREAL_0,NAT_D,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12;
schemes NAT_1;
registrations RELSET_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,ORDINAL1,XBOOLE_0,CARD_1;
constructors SQUARE_1,NAT_1,RFINSEQ,NAT_D,FINSEQ_5,FINSEQ_6,REAL_1,CKB1,CKB5,CKB6;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
definition
let D being non  empty set;
let f being (FinSequence of D);
let g being (FinSequence of D);
func ovlpart (f,g) -> (FinSequence of D) means 
:Def2: (((( len it ) <= ( len g ) & it = ( smid (g,1,( len it )) )) & it = ( smid (f,( ( ( len f ) -' ( len it ) ) + 1 ),( len f )) )) & (for j being Nat holds ((j <= ( len g ) & ( smid (g,1,j) ) = ( smid (f,( ( ( len f ) -' j ) + 1 ),( len f )) )) implies j <= ( len it ))));
existence
proof
defpred P[ Nat ]
 means
($1 <= ( len g ) & ( smid (g,1,$1) ) = ( smid (f,( ( ( len f ) -' $1 ) + 1 ),( len f )) ));
A1: ( smid (g,1,( 0 )) ) = ( {} ) by CKB10:1;
( ( ( len f ) -' ( 0 ) ) + 1 ) = ( ( ( len f ) - ( 0 ) ) + 1 ) by XREAL_1:233
.= ( ( len f ) + 1 );
then ( smid (f,( ( ( len f ) -' ( 0 ) ) + 1 ),( len f )) ) = ( {} ) by CKB10:1,XREAL_1:29;
then A2: (ex m being Nat st P[ m ]) by A1;
A3: (for n being Nat holds (P[ n ] implies n <= ( len g )));
consider k being Nat such that A4: (P[ k ] & (for n being Nat holds (P[ n ] implies n <= k))) from NAT_1:sch 6(A3,A2);
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
set b = ( smid (g,1,k) );
now
per cases ;
case A5: k > ( 0 );
then A6: ( ( 0 ) + 1 ) <= k by NAT_1:13;
then A7: b = ( mid (g,1,k) ) by CKB7:1;
now
per cases ;
case ( len g ) > ( 0 );
then ( ( 0 ) + 1 ) <= ( len g ) by NAT_1:13;
hence ( len b ) = ( ( k -' 1 ) + 1 ) by A4,A6,A7,FINSEQ_6:118
.= ( ( k - 1 ) + 1 ) by A6,XREAL_1:233
.= k;
end;
case ( len g ) <= ( 0 );
hence contradiction by A4,A5;
end;
end;
hence ( len b ) = k;
end;
case A8: k <= ( 0 );
then A9: k = ( 0 );
b = ( {} ) by A8,CKB10:1;
hence ( len b ) = k by A9;
end;
end;
hence thesis by A4;
end;
uniqueness
proof
let a being (FinSequence of D);
let b being (FinSequence of D);
assume that
A10: ( len a ) <= ( len g )
and
A11: a = ( smid (g,1,( len a )) )
and
A12: a = ( smid (f,( ( ( len f ) -' ( len a ) ) + 1 ),( len f )) )
and
A13: (for j being Nat holds ((j <= ( len g ) & ( smid (g,1,j) ) = ( smid (f,( ( ( len f ) -' j ) + 1 ),( len f )) )) implies j <= ( len a )))
and
A14: ( len b ) <= ( len g )
and
A15: b = ( smid (g,1,( len b )) )
and
A16: b = ( smid (f,( ( ( len f ) -' ( len b ) ) + 1 ),( len f )) )
and
A17: (for j being Nat holds ((j <= ( len g ) & ( smid (g,1,j) ) = ( smid (f,( ( ( len f ) -' j ) + 1 ),( len f )) )) implies j <= ( len b )));
A18: ( len a ) <= ( len b ) by A10,A11,A12,A17;
( len b ) <= ( len a ) by A13,A14,A15,A16;
hence thesis by A11,A15,A18,XXREAL_0:1;
end;
end;
