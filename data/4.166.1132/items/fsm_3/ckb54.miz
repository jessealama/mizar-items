environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,AFINSQ_1,NAT_1,REWRITE3,XXREAL_0,ARYTM_3,CARD_1,FINSEQ_1,ORDINAL4,RELAT_1,FUNCT_1,FLANG_1,FSM_1,STRUCT_0,ZFMISC_1,TARSKI,FINSET_1,REWRITE2,PRELAMB,FSM_2,LANG1,REWRITE1,MCART_1,FSM_3;
notations CARD_1,TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,NAT_1,DOMAIN_1,FUNCT_1,RELSET_1,XXREAL_0,FINSET_1,AFINSQ_1,SUBSET_1,REWRITE1,CATALAN2,FLANG_1,STRUCT_0,NUMBERS,MCART_1,FINSEQ_1,REWRITE3,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39,CKB47;
definitions STRUCT_0,CKB13,CKB19,CKB22,CKB26,CKB29,CKB33,CKB37,CKB39,CKB47;
theorems AFINSQ_1,CARD_1,FLANG_1,FUNCT_1,NAT_1,ORDINAL1,RELAT_1,RELSET_1,REWRITE1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,FINSEQ_1,FINSEQ_3,FINSEQ_5,MCART_1,REWRITE3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB16,CKB17,CKB19,CKB22,CKB24,CKB26,CKB27,CKB29,CKB33,CKB35,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53;
schemes FINSEQ_1,FRAENKEL,NAT_1,RELSET_1;
registrations CARD_1,NAT_1,XREAL_0,XBOOLE_0,MEMBERED,XXREAL_0,STRUCT_0,SUBSET_1,REWRITE1,AFINSQ_1,RELAT_1,FINSET_1,FINSEQ_1,REWRITE3,CATALAN2,FUNCT_1,RELSET_1,CKB8,CKB14,CKB15,CKB18,CKB20,CKB21,CKB23,CKB25,CKB28,CKB30,CKB31,CKB32,CKB34,CKB36;
constructors XXREAL_0,NAT_1,MEMBERED,REWRITE1,FLANG_1,XREAL_0,REWRITE3,RELSET_1,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39,CKB47;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve X for set;
reserve E for non empty set;
reserve u for (Element of ( E ^omega ));
reserve v for (Element of ( E ^omega ));
reserve v1 for (Element of ( E ^omega ));
reserve v2 for (Element of ( E ^omega ));
reserve w for (Element of ( E ^omega ));
reserve k for Nat;
reserve TS for non empty transition-system over ( ( Lex E ) \/ { ( <%> E ) } );
theorem
Th32: ( w -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ w ) -succ_of (X,TS) ) }
proof
defpred P[ Nat ]
 means
(( len u ) <= $1 implies (for v holds ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ u ) -succ_of (X,TS) ) }));
A1: (not ( <%> E ) in ( rng ( dom (the Tran of ( _bool TS )) ) )) by CKB9:1;
A2: P[ ( 0 ) ]
proof
let u;
assume ( len u ) <= ( 0 );
then A3: u = ( <%> E );
let v;
reconsider vso = { ( v -succ_of (X,TS) ) } as (Subset of ( _bool TS )) by CKB13:def 1;
( u -succ_of (vso,( _bool TS )) ) = vso by A1,A3,REWRITE3:104;
hence thesis by A3,AFINSQ_1:29;
end;
A4:now
let k;
assume A5: P[ k ];
now
let u;
assume A6: ( len u ) <= ( k + 1 );
let v;
per cases ;
suppose A7: k = ( 0 );

per cases  by A6,A7,NAT_1:25;
suppose ( len u ) = ( 0 );

hence ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ u ) -succ_of (X,TS) ) } by A2;
end;
suppose A8: ( len u ) = 1;

A9:now
let x;
assume A10: x in { ( ( v ^ u ) -succ_of (X,TS) ) };
then reconsider P = x as (Element of ( _bool TS )) by CKB13:def 1;
x = ( ( v ^ u ) -succ_of (X,TS) ) by A10,TARSKI:def 1;
then x = ( u -succ_of (( v -succ_of (X,TS) ),TS) ) by CKB52:1;
then A11: ( v -succ_of (X,TS) ),u ==>* x,( _bool TS ) by A8,CKB17:1;
(( v -succ_of (X,TS) ) is (Element of ( _bool TS )) & ( v -succ_of (X,TS) ) in { ( v -succ_of (X,TS) ) }) by CKB13:def 1,TARSKI:def 1;
then P in ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) by A11,REWRITE3:103;
hence x in ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) );
end;
now
let x;
assume A12: x in ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) );
then reconsider P = x as (Element of ( _bool TS ));
consider Q being (Element of ( _bool TS )) such that A13: (Q in { ( v -succ_of (X,TS) ) } & Q,u ==>* P,( _bool TS )) by A12,REWRITE3:103;
(Q = ( v -succ_of (X,TS) ) & P = ( u -succ_of (Q,TS) )) by A8,A13,CKB17:1,TARSKI:def 1;
then P = ( ( v ^ u ) -succ_of (X,TS) ) by CKB52:1;
hence x in { ( ( v ^ u ) -succ_of (X,TS) ) } by TARSKI:def 1;
end;
hence ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ u ) -succ_of (X,TS) ) } by A9,TARSKI:1;
end;
end;
suppose A14: k <> ( 0 );

reconsider bTS = ( _bool TS ) as non empty transition-system over ( ( Lex E ) \/ { ( <%> E ) } ) by CKB53:1;
consider v1,v2 such that A15: ( len v1 ) <= k and A16: ( len v2 ) <= k and A17: u = ( v1 ^ v2 ) by A6,A14,CKB5:1;
A18: ( v1 -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ v1 ) -succ_of (X,TS) ) } by A5,A15;
A19: (the Tran of bTS) = (the Tran of ( _bool TS ));
then ( ( v1 ^ v2 ) -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = ( ( v1 ^ v2 ) -succ_of ({ ( v -succ_of (X,TS) ) },bTS) ) by REWRITE3:105
.= ( v2 -succ_of (( v1 -succ_of ({ ( v -succ_of (X,TS) ) },bTS) ),bTS) ) by CKB52:1
.= ( v2 -succ_of (( v1 -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ),bTS) ) by A19,REWRITE3:105
.= ( v2 -succ_of (( v1 -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ),( _bool TS )) ) by A19,REWRITE3:105
.= { ( ( ( v ^ v1 ) ^ v2 ) -succ_of (X,TS) ) } by A5,A16,A18
.= { ( ( v ^ ( v1 ^ v2 ) ) -succ_of (X,TS) ) } by AFINSQ_1:27;
hence ( u -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ u ) -succ_of (X,TS) ) } by A17;
end;
end;
hence P[ ( k + 1 ) ];
end;
(for k holds P[ k ]) from NAT_1:sch 2(A2,A4);
then (( len w ) <= ( len w ) implies ( w -succ_of ({ ( v -succ_of (X,TS) ) },( _bool TS )) ) = { ( ( v ^ w ) -succ_of (X,TS) ) });
hence thesis;
end;
