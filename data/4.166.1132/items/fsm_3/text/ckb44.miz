environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,AFINSQ_1,NAT_1,REWRITE3,XXREAL_0,ARYTM_3,CARD_1,FINSEQ_1,ORDINAL4,RELAT_1,FUNCT_1,FLANG_1,FSM_1,STRUCT_0,ZFMISC_1,TARSKI,FINSET_1,REWRITE2,PRELAMB,FSM_2,LANG1,REWRITE1,MCART_1,FSM_3;
notations CARD_1,TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,NAT_1,DOMAIN_1,FUNCT_1,RELSET_1,XXREAL_0,FINSET_1,AFINSQ_1,SUBSET_1,REWRITE1,CATALAN2,FLANG_1,STRUCT_0,NUMBERS,MCART_1,FINSEQ_1,REWRITE3,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39;
definitions STRUCT_0,CKB13,CKB19,CKB22,CKB26,CKB29,CKB33,CKB37,CKB39;
theorems AFINSQ_1,CARD_1,FLANG_1,FUNCT_1,NAT_1,ORDINAL1,RELAT_1,RELSET_1,REWRITE1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,FINSEQ_1,FINSEQ_3,FINSEQ_5,MCART_1,REWRITE3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB16,CKB17,CKB19,CKB22,CKB24,CKB26,CKB27,CKB29,CKB33,CKB35,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43;
schemes FINSEQ_1,FRAENKEL,NAT_1,RELSET_1;
registrations CARD_1,NAT_1,XREAL_0,XBOOLE_0,MEMBERED,XXREAL_0,STRUCT_0,SUBSET_1,REWRITE1,AFINSQ_1,RELAT_1,FINSET_1,FINSEQ_1,REWRITE3,CATALAN2,FUNCT_1,RELSET_1,CKB8,CKB14,CKB15,CKB18,CKB20,CKB21,CKB23,CKB25,CKB28,CKB30,CKB31,CKB32,CKB34,CKB36;
constructors XXREAL_0,NAT_1,MEMBERED,REWRITE1,FLANG_1,XREAL_0,REWRITE3,RELSET_1,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve E for non  empty set;
reserve e for (Element of E);
reserve u for (Element of ( E ^omega ));
reserve u1 for (Element of ( E ^omega ));
reserve v for (Element of ( E ^omega ));
reserve w for (Element of ( E ^omega ));
reserve F for (Subset of ( E ^omega ));
reserve A for non  empty automaton over F;
reserve p for (Element of A);
reserve q for (Element of A);
reserve TS for non  empty transition-system over ( ( Lex E ) \/ { ( <%> E ) } );
theorem
Th23: (for R being (RedSequence of ( ==>.-relation TS )) holds ((( ( R . 1 ) `2 ) = ( <% e %> ^ u ) & ( ( R . ( len R ) ) `2 ) = ( <%> E )) implies (( ( R . 2 ) `2 ) = ( <% e %> ^ u ) or ( ( R . 2 ) `2 ) = u)))
proof
let R being (RedSequence of ( ==>.-relation TS ));
assume that
A1: ( ( R . 1 ) `2 ) = ( <% e %> ^ u )
and
A2: ( ( R . ( len R ) ) `2 ) = ( <%> E );
( ( R . 1 ) `2 ) <> ( ( R . ( len R ) ) `2 ) by A1,A2,AFINSQ_1:30;
then ( len R ) >= ( 1 + 1 ) by NAT_1:8,NAT_1:25;
then (( rng R ) <> ( {} ) & ( 1 + 1 ) in ( dom R )) by FINSEQ_3:25;
then A3: [ ( R . 1 ),( R . 2 ) ] in ( ==>.-relation TS ) by FINSEQ_3:32,REWRITE1:def 2;
then consider p being (Element of TS),v being (Element of ( E ^omega )),q being (Element of TS),w such that A4: ( R . 1 ) = [ p,v ] and A5: ( R . 2 ) = [ q,w ] by REWRITE3:31;
p,v ==>. q,w,TS by A3,A4,A5,REWRITE3:def 4;
then consider u1 such that A6: p,u1 -->. q,TS and A7: v = ( u1 ^ w ) by REWRITE3:22;
A8: u1 in ( ( Lex E ) \/ { ( <%> E ) } ) by A6,REWRITE3:15;
per cases  by A8,XBOOLE_0:def 3;
suppose u1 in ( Lex E );

then ( len u1 ) = 1 by CKB10:1;
then consider f being (Element of E) such that A9: u1 = <% f %> and ( u1 . ( 0 ) ) = f by CKB4:1;
( ( R . 1 ) `2 ) = ( <% f %> ^ w ) by A4,A7,A9,MCART_1:7;
then u = w by A1,CKB6:1;
hence thesis by A5,MCART_1:7;
end;
suppose u1 in { ( <%> E ) };

then A10: u1 = ( <%> E ) by TARSKI:def 1;
(v = ( ( R . 1 ) `2 ) & w = ( ( R . 2 ) `2 )) by A4,A5,MCART_1:7;
hence thesis by A1,A7,A10,AFINSQ_1:29;
end;
end;
