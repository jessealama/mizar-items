environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,AFINSQ_1,NAT_1,REWRITE3,XXREAL_0,ARYTM_3,CARD_1,FINSEQ_1,ORDINAL4,RELAT_1,FUNCT_1,FLANG_1,FSM_1,STRUCT_0,ZFMISC_1,TARSKI,FINSET_1,REWRITE2,PRELAMB,FSM_2,LANG1,REWRITE1,MCART_1,FSM_3;
notations CARD_1,TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,NAT_1,DOMAIN_1,FUNCT_1,RELSET_1,XXREAL_0,FINSET_1,AFINSQ_1,SUBSET_1,REWRITE1,CATALAN2,FLANG_1,STRUCT_0,NUMBERS,MCART_1,FINSEQ_1,REWRITE3,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39,CKB47;
definitions STRUCT_0,CKB13,CKB19,CKB22,CKB26,CKB29,CKB33,CKB37,CKB39,CKB47;
theorems AFINSQ_1,CARD_1,FLANG_1,FUNCT_1,NAT_1,ORDINAL1,RELAT_1,RELSET_1,REWRITE1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,FINSEQ_1,FINSEQ_3,FINSEQ_5,MCART_1,REWRITE3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB16,CKB17,CKB19,CKB22,CKB24,CKB26,CKB27,CKB29,CKB33,CKB35,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
schemes FINSEQ_1,FRAENKEL,NAT_1,RELSET_1;
registrations CARD_1,NAT_1,XREAL_0,XBOOLE_0,MEMBERED,XXREAL_0,STRUCT_0,SUBSET_1,REWRITE1,AFINSQ_1,RELAT_1,FINSET_1,FINSEQ_1,REWRITE3,CATALAN2,FUNCT_1,RELSET_1,CKB8,CKB14,CKB15,CKB18,CKB20,CKB21,CKB23,CKB25,CKB28,CKB30,CKB31,CKB32,CKB34,CKB36;
constructors XXREAL_0,NAT_1,MEMBERED,REWRITE1,FLANG_1,XREAL_0,REWRITE3,RELSET_1,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39,CKB47;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve E for non empty set;
reserve u for (Element of ( E ^omega ));
reserve v for (Element of ( E ^omega ));
reserve l for Nat;
reserve TS for non empty transition-system over ( ( Lex E ) \/ { ( <%> E ) } );
theorem
Th29: (for p,q being (Element of TS) holds (p,( u ^ v ) ==>* q,TS implies (ex r being (Element of TS) st (p,u ==>* r,TS & r,v ==>* q,TS))))
proof
let p being (Element of TS),q being (Element of TS);
assume A1: p,( u ^ v ) ==>* q,TS;
then p,( u ^ v ) ==>* q,( <%> E ),TS by REWRITE3:def 7;
then ( ==>.-relation TS ) reduces [ p,( u ^ v ) ],[ q,( <%> E ) ] by REWRITE3:def 6;
then consider R being (RedSequence of ( ==>.-relation TS )) such that A2: ( R . 1 ) = [ p,( u ^ v ) ] and A3: ( R . ( len R ) ) = [ q,( <%> E ) ] by REWRITE1:def 3;
A4: ( ( R . ( len R ) ) `2 ) = ( <%> E ) by A3,MCART_1:7;
( ( R . 1 ) `2 ) = ( u ^ v ) by A2,MCART_1:7;
then consider l such that A5: l in ( dom R ) and A6: ( ( R . l ) `2 ) = v by A4,CKB46:1;
per cases ;
suppose A7: ( l + 1 ) in ( dom R );

then ( ( R . l ) `1 ) in TS by A5,REWRITE3:49;
then reconsider r = ( ( R . l ) `1 ) as (Element of TS) by STRUCT_0:def 5;
A8: ( R . l ) = [ r,v ] by A5,A6,A7,REWRITE3:48;
A9: l <= ( len R ) by A5,FINSEQ_3:25;
take r;
A10: (1 in ( dom R ) & 1 <= l) by A5,FINSEQ_3:25,FINSEQ_5:6;
reconsider l as (Element of ( NAT )) by ORDINAL1:def 12;
( ==>.-relation TS ) reduces ( R . 1 ),( R . l ) by A5,A10,REWRITE1:17;
then p,( u ^ v ) ==>* r,v,TS by A2,A8,REWRITE3:def 6;
then p,( u ^ v ) ==>* r,( ( <%> E ) ^ v ),TS by AFINSQ_1:29;
then p,u ==>* r,( <%> E ),TS by CKB50:1;
hence p,u ==>* r,TS by REWRITE3:def 7;
( ( 0 ) + 1 ) <= ( len R ) by NAT_1:13;
then ( len R ) in ( dom R ) by FINSEQ_3:25;
then ( ==>.-relation TS ) reduces ( R . l ),( R . ( len R ) ) by A5,A9,REWRITE1:17;
then r,v ==>* q,( <%> E ),TS by A3,A8,REWRITE3:def 6;
hence r,v ==>* q,TS by REWRITE3:def 7;
end;
suppose (not ( l + 1 ) in ( dom R ));

then A11: v = ( <%> E ) by A4,A5,A6,REWRITE3:3;
then p,u ==>* q,TS by A1,AFINSQ_1:29;
hence thesis by A11,REWRITE3:95;
end;
end;
