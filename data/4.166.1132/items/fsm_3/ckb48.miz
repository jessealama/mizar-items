environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,AFINSQ_1,NAT_1,REWRITE3,XXREAL_0,ARYTM_3,CARD_1,FINSEQ_1,ORDINAL4,RELAT_1,FUNCT_1,FLANG_1,FSM_1,STRUCT_0,ZFMISC_1,TARSKI,FINSET_1,REWRITE2,PRELAMB,FSM_2,LANG1,REWRITE1,MCART_1,FSM_3;
notations CARD_1,TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,NAT_1,DOMAIN_1,FUNCT_1,RELSET_1,XXREAL_0,FINSET_1,AFINSQ_1,SUBSET_1,REWRITE1,CATALAN2,FLANG_1,STRUCT_0,NUMBERS,MCART_1,FINSEQ_1,REWRITE3,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39,CKB47;
definitions STRUCT_0,CKB13,CKB19,CKB22,CKB26,CKB29,CKB33,CKB37,CKB39,CKB47;
theorems AFINSQ_1,CARD_1,FLANG_1,FUNCT_1,NAT_1,ORDINAL1,RELAT_1,RELSET_1,REWRITE1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,FINSEQ_1,FINSEQ_3,FINSEQ_5,MCART_1,REWRITE3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB16,CKB17,CKB19,CKB22,CKB24,CKB26,CKB27,CKB29,CKB33,CKB35,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47;
schemes FINSEQ_1,FRAENKEL,NAT_1,RELSET_1;
registrations CARD_1,NAT_1,XREAL_0,XBOOLE_0,MEMBERED,XXREAL_0,STRUCT_0,SUBSET_1,REWRITE1,AFINSQ_1,RELAT_1,FINSET_1,FINSEQ_1,REWRITE3,CATALAN2,FUNCT_1,RELSET_1,CKB8,CKB14,CKB15,CKB18,CKB20,CKB21,CKB23,CKB25,CKB28,CKB30,CKB31,CKB32,CKB34,CKB36;
constructors XXREAL_0,NAT_1,MEMBERED,REWRITE1,FLANG_1,XREAL_0,REWRITE3,RELSET_1,CKB13,CKB18,CKB19,CKB22,CKB26,CKB28,CKB29,CKB33,CKB37,CKB39,CKB47;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve E for non empty set;
reserve u for (Element of ( E ^omega ));
reserve u1 for (Element of ( E ^omega ));
reserve v for (Element of ( E ^omega ));
reserve v1 for (Element of ( E ^omega ));
reserve v2 for (Element of ( E ^omega ));
reserve w for (Element of ( E ^omega ));
reserve w2 for (Element of ( E ^omega ));
reserve k for Nat;
reserve TS for non empty transition-system over ( ( Lex E ) \/ { ( <%> E ) } );
theorem
Th26: (for p being (RedSequence of ( ==>.-relation TS )) holds ((( p . 1 ) = [ x,( u ^ w ) ] & ( p . ( len p ) ) = [ y,( v ^ w ) ]) implies (ex q being (RedSequence of ( ==>.-relation TS )) st (( q . 1 ) = [ x,u ] & ( q . ( len q ) ) = [ y,v ]))))
proof
let p being (RedSequence of ( ==>.-relation TS ));
assume that
A1: ( p . 1 ) = [ x,( u ^ w ) ]
and
A2: ( p . ( len p ) ) = [ y,( v ^ w ) ];
A3: ( len p ) >= ( ( 0 ) + 1 ) by NAT_1:13;
then 1 in ( dom p ) by FINSEQ_3:25;
then A4: ( dim2 (( p . 1 ),E) ) = ( ( p . 1 ) `2 ) by A1,REWRITE3:51
.= ( u ^ w ) by A1,MCART_1:7;
deffunc F(set) = [ ( ( p . $1 ) `1 ),( chop (( dim2 (( p . $1 ),E) ),w) ) ];
consider q being FinSequence such that A5: ( len q ) = ( len p ) and A6: (for k holds (k in ( dom q ) implies ( q . k ) = F(k))) from FINSEQ_1:sch 2;
A7: (for k being (Element of ( NAT )) holds ((k in ( dom q ) & ( k + 1 ) in ( dom q )) implies [ ( q . k ),( q . ( k + 1 ) ) ] in ( ==>.-relation TS )))
proof
let k being (Element of ( NAT ));
assume that
A8: k in ( dom q )
and
A9: ( k + 1 ) in ( dom q );
(1 <= k & k <= ( len q )) by A8,FINSEQ_3:25;
then A10: k in ( dom p ) by A5,FINSEQ_3:25;
then consider v1 such that A11: ( ( p . k ) `2 ) = ( v1 ^ ( v ^ w ) ) by A2,REWRITE3:52;
(1 <= ( k + 1 ) & ( k + 1 ) <= ( len q )) by A9,FINSEQ_3:25;
then A12: ( k + 1 ) in ( dom p ) by A5,FINSEQ_3:25;
then consider v2 such that A13: ( ( p . ( k + 1 ) ) `2 ) = ( v2 ^ ( v ^ w ) ) by A2,REWRITE3:52;
A14: [ ( p . k ),( p . ( k + 1 ) ) ] in ( ==>.-relation TS ) by A10,A12,REWRITE1:def 2;
then [ ( p . k ),[ ( ( p . ( k + 1 ) ) `1 ),( v2 ^ ( v ^ w ) ) ] ] in ( ==>.-relation TS ) by A10,A12,A13,REWRITE3:48;
then [ [ ( ( p . k ) `1 ),( v1 ^ ( v ^ w ) ) ],[ ( ( p . ( k + 1 ) ) `1 ),( v2 ^ ( v ^ w ) ) ] ] in ( ==>.-relation TS ) by A10,A12,A11,REWRITE3:48;
then ( ( p . k ) `1 ),( v1 ^ ( v ^ w ) ) ==>. ( ( p . ( k + 1 ) ) `1 ),( v2 ^ ( v ^ w ) ),TS by REWRITE3:def 4;
then consider u1 such that A15: ( ( p . k ) `1 ),u1 -->. ( ( p . ( k + 1 ) ) `1 ),TS and A16: ( v1 ^ ( v ^ w ) ) = ( u1 ^ ( v2 ^ ( v ^ w ) ) ) by REWRITE3:22;
A17: (ex r1 being (Element of TS) st (ex w1 being (Element of ( E ^omega )) st (ex r2 being (Element of TS) st (ex w2 st (( p . k ) = [ r1,w1 ] & ( p . ( k + 1 ) ) = [ r2,w2 ]))))) by A14,REWRITE3:31;
then ( dim2 (( p . ( k + 1 ) ),E) ) = ( v2 ^ ( v ^ w ) ) by A13,REWRITE3:def 5;
then A18: ( q . ( k + 1 ) ) = [ ( ( p . ( k + 1 ) ) `1 ),( chop (( v2 ^ ( v ^ w ) ),w) ) ] by A6,A9
.= [ ( ( p . ( k + 1 ) ) `1 ),( chop (( ( v2 ^ v ) ^ w ),w) ) ] by AFINSQ_1:27
.= [ ( ( p . ( k + 1 ) ) `1 ),( v2 ^ v ) ] by CKB47:def 1;
( ( v1 ^ v ) ^ w ) = ( u1 ^ ( v2 ^ ( v ^ w ) ) ) by A16,AFINSQ_1:27
.= ( ( u1 ^ v2 ) ^ ( v ^ w ) ) by AFINSQ_1:27
.= ( ( ( u1 ^ v2 ) ^ v ) ^ w ) by AFINSQ_1:27;
then ( v1 ^ v ) = ( ( u1 ^ v2 ) ^ v ) by AFINSQ_1:28
.= ( u1 ^ ( v2 ^ v ) ) by AFINSQ_1:27;
then A19: ( ( p . k ) `1 ),( v1 ^ v ) ==>. ( ( p . ( k + 1 ) ) `1 ),( v2 ^ v ),TS by A15,REWRITE3:def 3;
( dim2 (( p . k ),E) ) = ( v1 ^ ( v ^ w ) ) by A11,A17,REWRITE3:def 5;
then ( q . k ) = [ ( ( p . k ) `1 ),( chop (( v1 ^ ( v ^ w ) ),w) ) ] by A6,A8
.= [ ( ( p . k ) `1 ),( chop (( ( v1 ^ v ) ^ w ),w) ) ] by AFINSQ_1:27
.= [ ( ( p . k ) `1 ),( v1 ^ v ) ] by CKB47:def 1;
hence thesis by A19,A18,REWRITE3:def 4;
end;
( len p ) in ( dom p ) by A3,FINSEQ_3:25;
then A20: ( dim2 (( p . ( len p ) ),E) ) = ( ( p . ( len p ) ) `2 ) by A1,REWRITE3:51
.= ( v ^ w ) by A2,MCART_1:7;
reconsider q as (RedSequence of ( ==>.-relation TS )) by A5,A7,REWRITE1:def 2;
1 in ( dom q ) by A5,A3,FINSEQ_3:25;
then A21: ( q . 1 ) = [ ( ( p . 1 ) `1 ),( chop (( dim2 (( p . 1 ),E) ),w) ) ] by A6
.= [ x,( chop (( u ^ w ),w) ) ] by A1,A4,MCART_1:7
.= [ x,u ] by CKB47:def 1;
( len p ) in ( dom q ) by A5,A3,FINSEQ_3:25;
then ( q . ( len q ) ) = [ ( ( p . ( len p ) ) `1 ),( chop (( dim2 (( p . ( len p ) ),E) ),w) ) ] by A5,A6
.= [ y,( chop (( v ^ w ),w) ) ] by A2,A20,MCART_1:7
.= [ y,v ] by CKB47:def 1;
hence thesis by A21;
end;
