environ
vocabularies FUNCT_1,ARYTM_1,FINSEQ_1,RELAT_1,ORDINAL2,SEQ_1,SEQ_2,RCOMP_1,PARTFUN1,FDIFF_1,PDIFF_1,ARYTM_3,FCONT_1,PDIFF_2,PDIFF_3,PDIFF_5,NUMBERS,SUBSET_1,CARD_1,REAL_1,TARSKI,XXREAL_0,VALUED_1,CARD_3,FUNCT_2,ORDINAL1,XXREAL_1,XREAL_0,VALUED_0,NAT_1;
notations TARSKI,SUBSET_1,XXREAL_0,XCMPLX_0,XREAL_0,NAT_1,ORDINAL1,NUMBERS,REAL_1,VALUED_0,FUNCT_2,RELSET_1,PARTFUN1,VALUED_1,SEQ_1,SEQ_2,FINSEQ_1,RCOMP_1,EUCLID,FDIFF_1,FCONT_1,FINSEQ_2,PDIFF_1,PDIFF_2,PDIFF_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17;
definitions RCOMP_1,XBOOLE_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17;
theorems TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,RCOMP_1,SEQ_4,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RFUNCT_2,PARTFUN1,FDIFF_1,VALUED_1,XCMPLX_0,XCMPLX_1,FUNCT_2,VALUED_0,ORDINAL1,PDIFF_1,PDIFF_4,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17;
schemes SEQ_1;
registrations RELSET_1,XREAL_0,MEMBERED,FDIFF_1,FUNCT_2,NAT_1,NUMBERS,XXREAL_0,VALUED_0,VALUED_1,PDIFF_3,EUCLID;
constructors REAL_1,SEQ_2,RCOMP_1,FDIFF_1,SEQ_1,FCONT_1,PDIFF_1,PDIFF_2,COMPLEX1,RELSET_1,PDIFF_3,RVSUM_1,BINOP_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve x0 for Real;
reserve x1 for Real;
reserve y0 for Real;
reserve y1 for Real;
reserve z for Real;
reserve z0 for Real;
reserve z1 for Real;
reserve r for Real;
reserve r1 for Real;
reserve s for Real;
reserve p for Real;
reserve p1 for Real;
reserve u for (Element of ( REAL 3 ));
reserve n for (Element of ( NAT ));
reserve s1 for Real_Sequence;
reserve f for (PartFunc of ( REAL 3 ),( REAL ));
reserve R for REST;
reserve R1 for REST;
reserve L for LINEAR;
reserve L1 for LINEAR;
definition
let f being (PartFunc of ( REAL 3 ),( REAL ));
let u being (Element of ( REAL 3 ));
assume A1: f is_hpartial_differentiable`33_in u;
func hpartdiff33 (f,u) -> Real means 
:Def18: (ex x0,y0,z0 being Real st (u = <* x0,y0,z0 *> & (ex N being (Neighbourhood of z0) st (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (it = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))))))))));
existence
proof
consider x0,y0,z0 being Real such that A2: (u = <* x0,y0,z0 *> & (ex N being (Neighbourhood of z0) st (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) )))))))) by A1,CKB9:def 1;
consider N being (Neighbourhood of z0) such that A3: (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) )))))) by A2;
consider L,R such that A4: (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))) by A3;
consider r such that A5: (for p holds ( L . p ) = ( r * p )) by FDIFF_1:def 3;
take r;
( L . 1 ) = ( r * 1 ) by A5
.= r;
hence thesis by A2,A3,A4;
end;
uniqueness
proof
let r;
let s;
assume that
A6: (ex x0,y0,z0 being Real st (u = <* x0,y0,z0 *> & (ex N being (Neighbourhood of z0) st (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (r = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))))))))))
and
A7: (ex x0,y0,z0 being Real st (u = <* x0,y0,z0 *> & (ex N being (Neighbourhood of z0) st (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (s = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))))))))));
consider x0,y0,z0 being Real such that A8: (u = <* x0,y0,z0 *> & (ex N being (Neighbourhood of z0) st (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (r = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))))))))) by A6;
consider N being (Neighbourhood of z0) such that A9: (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (r = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))))))) by A8;
consider L,R such that A10: (r = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) )))) by A9;
consider x1,y1,z1 being Real such that A11: (u = <* x1,y1,z1 *> & (ex N being (Neighbourhood of z1) st (N c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (s = ( L . 1 ) & (for z holds (z in N implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z1 ) ) = ( ( L . ( z - z1 ) ) + ( R . ( z - z1 ) ) ))))))))) by A7;
consider N1 being (Neighbourhood of z1) such that A12: (N1 c= ( dom ( SVF1 (3,( pdiff1 (f,3) ),u) ) ) & (ex L st (ex R st (s = ( L . 1 ) & (for z holds (z in N1 implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z1 ) ) = ( ( L . ( z - z1 ) ) + ( R . ( z - z1 ) ) ))))))) by A11;
consider L1,R1 such that A13: (s = ( L1 . 1 ) & (for z holds (z in N1 implies ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z1 ) ) = ( ( L1 . ( z - z1 ) ) + ( R1 . ( z - z1 ) ) )))) by A12;
consider r1 such that A14: (for p holds ( L . p ) = ( r1 * p )) by FDIFF_1:def 3;
consider p1 such that A15: (for p holds ( L1 . p ) = ( p1 * p )) by FDIFF_1:def 3;
A16: r = ( r1 * 1 ) by A10,A14;
A17: s = ( p1 * 1 ) by A13,A15;
A18: ((x0 = x1 & y0 = y1) & z0 = z1) by A8,A11,FINSEQ_1:78;
A19:now
let z;
assume A20: (z in N & z in N1);
then ( ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z ) - ( ( SVF1 (3,( pdiff1 (f,3) ),u) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ) by A10;
then ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ) = ( ( L1 . ( z - z0 ) ) + ( R1 . ( z - z0 ) ) ) by A13,A18,A20;
then ( ( r1 * ( z - z0 ) ) + ( R . ( z - z0 ) ) ) = ( ( L1 . ( z - z0 ) ) + ( R1 . ( z - z0 ) ) ) by A14;
hence ( ( r * ( z - z0 ) ) + ( R . ( z - z0 ) ) ) = ( ( s * ( z - z0 ) ) + ( R1 . ( z - z0 ) ) ) by A15,A16,A17;
end;
consider N0 being (Neighbourhood of z0) such that A21: (N0 c= N & N0 c= N1) by A18,RCOMP_1:17;
consider g being  real number such that A22: (( 0 ) < g & N0 = ]. ( z0 - g ),( z0 + g ) .[) by RCOMP_1:def 6;
deffunc F((Element of ( NAT ))) = ( g / ( $1 + 2 ) );
consider s1 such that A23: (for n holds ( s1 . n ) = F(n)) from SEQ_1:sch 1;
now
let n;
( g / ( n + 2 ) ) <> ( 0 ) by A22,XREAL_1:139;
hence ( s1 . n ) <> ( 0 ) by A23;
end;
then A24: s1 is  non-zero by SEQ_1:5;
(s1 is  convergent & ( lim s1 ) = ( 0 )) by A23,SEQ_4:31;
then reconsider h = s1 as  convergent_to_0 Real_Sequence by A24,FDIFF_1:def 1;
A25: (for n holds (ex z st ((z in N & z in N1) & ( h . n ) = ( z - z0 ))))
proof
let n;
A26: ( g / ( n + 2 ) ) > ( 0 ) by A22,XREAL_1:139;
( ( 0 ) + 1 ) < ( ( n + 1 ) + 1 ) by XREAL_1:6;
then ( g / ( n + 2 ) ) < ( g / 1 ) by A22,XREAL_1:76;
then A27: ( z0 + ( g / ( n + 2 ) ) ) < ( z0 + g ) by XREAL_1:6;
( z0 + ( - g ) ) < ( z0 + ( g / ( n + 2 ) ) ) by A22,A26,XREAL_1:6;
then A28: ( z0 + ( g / ( n + 2 ) ) ) in ]. ( z0 - g ),( z0 + g ) .[ by A27;
take ( z0 + ( g / ( n + 2 ) ) );
thus thesis by A21,A22,A23,A28;
end;
A29:now
let n being Nat;
A30: n in ( NAT ) by ORDINAL1:def 12;
then (ex z st ((z in N & z in N1) & ( h . n ) = ( z - z0 ))) by A25;
then A31: ( ( r * ( h . n ) ) + ( R . ( h . n ) ) ) = ( ( s * ( h . n ) ) + ( R1 . ( h . n ) ) ) by A19;
h is  non-zero by FDIFF_1:def 1;
then A32: ( h . n ) <> ( 0 ) by A30,SEQ_1:5;
A33: ( ( ( r * ( h . n ) ) / ( h . n ) ) + ( ( R . ( h . n ) ) / ( h . n ) ) ) = ( ( ( s * ( h . n ) ) + ( R1 . ( h . n ) ) ) / ( h . n ) ) by A31,XCMPLX_1:62;
A34: ( ( r * ( h . n ) ) / ( h . n ) ) = ( r * ( ( h . n ) / ( h . n ) ) ) by XCMPLX_1:74
.= ( r * 1 ) by A32,XCMPLX_1:60
.= r;
( ( s * ( h . n ) ) / ( h . n ) ) = ( s * ( ( h . n ) / ( h . n ) ) ) by XCMPLX_1:74
.= ( s * 1 ) by A32,XCMPLX_1:60
.= s;
then A35: ( r + ( ( R . ( h . n ) ) / ( h . n ) ) ) = ( s + ( ( R1 . ( h . n ) ) / ( h . n ) ) ) by A33,A34,XCMPLX_1:62;
( dom R ) = ( REAL ) by PARTFUN1:def 2;
then A36: ( rng h ) c= ( dom R );
( dom R1 ) = ( REAL ) by PARTFUN1:def 2;
then A37: ( rng h ) c= ( dom R1 );
A38: ( ( R . ( h . n ) ) / ( h . n ) ) = ( ( R . ( h . n ) ) * ( ( h . n ) " ) ) by XCMPLX_0:def 9
.= ( ( R . ( h . n ) ) * ( ( h " ) . n ) ) by VALUED_1:10
.= ( ( ( R /* h ) . n ) * ( ( h " ) . n ) ) by A36,A30,FUNCT_2:108
.= ( ( ( h " ) (#) ( R /* h ) ) . n ) by VALUED_1:5;
( ( R1 . ( h . n ) ) / ( h . n ) ) = ( ( R1 . ( h . n ) ) * ( ( h . n ) " ) ) by XCMPLX_0:def 9
.= ( ( R1 . ( h . n ) ) * ( ( h " ) . n ) ) by VALUED_1:10
.= ( ( ( R1 /* h ) . n ) * ( ( h " ) . n ) ) by A37,A30,FUNCT_2:108
.= ( ( ( h " ) (#) ( R1 /* h ) ) . n ) by VALUED_1:5;
then r = ( s + ( ( ( ( h " ) (#) ( R1 /* h ) ) . n ) - ( ( ( h " ) (#) ( R /* h ) ) . n ) ) ) by A35,A38;
hence ( r - s ) = ( ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) . n ) by A30,RFUNCT_2:1;
end;
then A39: ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) is  constant by VALUED_0:def 18;
( ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) . 1 ) = ( r - s ) by A29;
then A40: ( lim ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) ) = ( r - s ) by A39,SEQ_4:25;
A41: (( ( h " ) (#) ( R /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R /* h ) ) ) = ( 0 )) by FDIFF_1:def 2;
(( ( h " ) (#) ( R1 /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R1 /* h ) ) ) = ( 0 )) by FDIFF_1:def 2;
then ( r - s ) = ( ( 0 ) - ( 0 ) ) by A40,A41,SEQ_2:12;
hence thesis;
end;
end;
