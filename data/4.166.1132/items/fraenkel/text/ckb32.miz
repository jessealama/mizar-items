environ
vocabularies XBOOLE_0,SUBSET_1,TARSKI,FUNCT_1,RELAT_1,FUNCT_2,ZFMISC_1,PARTFUN1,FINSET_1,MCART_1,FINSUB_1,SETWISEO;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,MCART_1,RELAT_1,FINSET_1,FINSUB_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,DOMAIN_1,SETWISEO;
definitions TARSKI,XBOOLE_0,FUNCT_1,BINOP_1;
theorems FINSET_1,ZFMISC_1,MCART_1,FUNCT_1,FUNCT_2,SETWISEO,FINSUB_1,RELAT_1,RELSET_1,WELLORD2,XBOOLE_0,XBOOLE_1,CKB9,CKB10,CKB11,CKB24,CKB25,CKB30;
schemes FUNCT_1,FUNCT_2,SETWISEO,DOMAIN_1,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB26,CKB27,CKB28,CKB29;
registrations SUBSET_1,RELAT_1,FINSET_1,FINSUB_1,RELSET_1,CKB31;
constructors PARTFUN1,BINOP_1,DOMAIN_1,FINSET_1,SETWISEO,RELSET_1;
requirements BOOLE,SUBSET;
begin
scheme ImFin { A() -> set,B() -> non empty set,X() -> set,Y() -> set,F(set) -> set } : { F(phi9) where phi9 is (Element of ( Funcs (A(),B()) )): ( phi9 .: X() ) c= Y() } is  finite
provided
A1: X() is  finite
and
A2: Y() is  finite
and
A3: (for phi,psi being (Element of ( Funcs (A(),B()) )) holds (( phi | X() ) = ( psi | X() ) implies F(phi) = F(psi)))
proof
defpred P[ set,set ]
 means
(for phi being (Element of ( Funcs (A(),B()) )) holds (( phi | X() ) = $1 implies $2 = F(phi)));
set Z = { F(phi9) where phi9 is (Element of ( Funcs (A(),B()) )): ( phi9 .: X() ) c= Y() };
set x = the (Element of Z);
A4: ( B() /\ Y() ) c= B() by XBOOLE_1:17;
assume A5: (not thesis);
then Z <> ( {} );
then x in Z;
then consider phi being (Element of ( Funcs (A(),B()) )) such that x = F(phi) and A6: ( phi .: X() ) c= Y();
now
assume ( B() /\ Y() ) = ( {} );
then A7: ( phi .: X() ) = ( {} ) by A6,XBOOLE_1:3,XBOOLE_1:19;
A() = ( dom phi ) by FUNCT_2:def 1;
then A() misses X() by A7,RELAT_1:118;
hence ( A() /\ X() ) = ( {} ) by XBOOLE_0:def 7;
end;
then reconsider FF = ( Funcs (( A() /\ X() ),( B() /\ Y() )) ),Z as non empty set by A5,FUNCT_2:8;
A8: ( B() /\ Y() ) c= Y() by XBOOLE_1:17;
A9: ( A() /\ X() ) c= A() by XBOOLE_1:17;
A10:now
let f being (Element of FF);
consider phi being (Element of ( Funcs (A(),B()) )) such that A11: ( phi | ( A() /\ X() ) ) = f by A9,A4,CKB24:1;
A12: ( phi | X() ) = f by A11,CKB25:1;
(ex g being Function st ((f = g & ( dom g ) = ( A() /\ X() )) & ( rng g ) c= ( B() /\ Y() ))) by FUNCT_2:def 2;
then ( rng ( phi | X() ) ) c= Y() by A8,A12,XBOOLE_1:1;
then ( phi .: X() ) c= Y() by RELAT_1:115;
then F(phi) in Z;
then reconsider g9 = F(phi) as (Element of Z);
take g = g9;
thus P[ f,g ] by A3,A12;
end;
consider F being (Function of FF,Z) such that A13: (for f being (Element of FF) holds P[ f,( F . f ) ]) from FUNCT_2:sch 3(A10);
Z c= ( F .: ( Funcs (( A() /\ X() ),( B() /\ Y() )) ) )
proof
let y being set;
assume y in Z;
then consider phi being (Element of ( Funcs (A(),B()) )) such that A14: y = F(phi) and A15: ( phi .: X() ) c= Y();
( rng ( phi | X() ) ) c= Y() by A15,RELAT_1:115;
then A16: ( rng ( phi | X() ) ) c= ( B() /\ Y() ) by XBOOLE_1:19;
A17: ( dom ( phi | X() ) ) = ( ( dom phi ) /\ X() ) by RELAT_1:61
.= ( A() /\ X() ) by FUNCT_2:def 1;
then reconsider x = ( phi | X() ) as (Element of ( Funcs (( A() /\ X() ),( B() /\ Y() )) )) by A16,FUNCT_2:def 2;
( phi | X() ) in ( Funcs (( A() /\ X() ),( B() /\ Y() )) ) by A17,A16,FUNCT_2:def 2;
then A18: x in ( dom F ) by FUNCT_2:def 1;
y = ( F . x ) by A13,A14;
hence thesis by A18,FUNCT_1:def 6;
end;
hence contradiction by A1,A2,A5;
end;
