environ
vocabularies XBOOLE_0,SUBSET_1,TARSKI,FUNCT_1,RELAT_1,FUNCT_2,ZFMISC_1,PARTFUN1,FINSET_1,MCART_1,FINSUB_1,SETWISEO;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,MCART_1,RELAT_1,FINSET_1,FINSUB_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,DOMAIN_1,SETWISEO;
definitions TARSKI,XBOOLE_0,FUNCT_1,BINOP_1;
theorems FINSET_1,ZFMISC_1,MCART_1,FUNCT_1,FUNCT_2,SETWISEO,FINSUB_1,RELAT_1,RELSET_1,WELLORD2,XBOOLE_0,XBOOLE_1,CKB9,CKB10,CKB11,CKB24,CKB25;
schemes FUNCT_1,FUNCT_2,SETWISEO,DOMAIN_1,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB26,CKB27;
registrations SUBSET_1,RELAT_1,FINSET_1,FINSUB_1,RELSET_1;
constructors PARTFUN1,BINOP_1,DOMAIN_1,FINSET_1,SETWISEO,RELSET_1;
requirements BOOLE,SUBSET;
begin
reserve B for non  empty set;
reserve A for set;
reserve x for set;
scheme Finiteness { A() -> non  empty set,B() -> (Element of ( Fin A() )),P[(Element of A()),(Element of A())] } : (for x being (Element of A()) holds (x in B() implies (ex y being (Element of A()) st ((y in B() & P[ y,x ]) & (for z being (Element of A()) holds ((z in B() & P[ z,y ]) implies P[ y,z ]))))))
provided
A1: (for x being (Element of A()) holds P[ x,x ])
and
A2: (for x,y,z being (Element of A()) holds ((P[ x,y ] & P[ y,z ]) implies P[ x,z ]))
proof
defpred R[ (Element of A()),(Element of ( Fin A() )) ]
 means
(ex y being (Element of A()) st ((y in $2 & P[ y,$1 ]) & (for z being (Element of A()) holds ((z in $2 & P[ z,y ]) implies P[ y,z ]))));
defpred Q[ (Element of ( Fin A() )) ]
 means
(for x being (Element of A()) holds (x in $1 implies R[ x,$1 ]));
A3:now
let B being (Element of ( Fin A() ));
let x being (Element of A());
assume A4: Q[ B ];
thus Q[ ( B \/ {. x .} ) ]
proof
let z being (Element of A());
assume that
A5: z in ( B \/ { x } );
now
per cases  by A5,SETWISEO:4;
suppose z in B;

then consider y being (Element of A()) such that A6: y in B and A7: P[ y,z ] and A8: (for x being (Element of A()) holds ((x in B & P[ x,y ]) implies P[ y,x ])) by A4;
now
per cases ;
case A9: P[ x,y ];
thus x in ( B \/ { x } ) by SETWISEO:4;
thus P[ x,z ] by A2,A7,A9;
let v being (Element of A());
assume that
A10: v in ( B \/ { x } )
and
A11: P[ v,x ];
A12:now
assume A13: v in B;
P[ v,y ] by A2,A9,A11;
then P[ y,v ] by A8,A13;
hence P[ x,v ] by A2,A9;
end;
(v in B or v = x) by A10,SETWISEO:4;
hence P[ x,v ] by A1,A12;
end;
case A14: (not P[ x,y ]);
thus y in ( B \/ { x } ) by A6,XBOOLE_0:def 3;
thus P[ y,z ] by A7;
let v being (Element of A());
assume that
A15: v in ( B \/ { x } )
and
A16: P[ v,y ];
(v in B or v = x) by A15,SETWISEO:4;
hence P[ y,v ] by A8,A14,A16;
end;
end;
hence thesis;
end;
suppose A17: z = x;

now
per cases ;
case (ex w being (Element of A()) st (w in B & P[ w,x ]));
then consider w being (Element of A()) such that A18: w in B and A19: P[ w,z ] by A17;
consider y being (Element of A()) such that A20: y in B and A21: P[ y,w ] and A22: (for x being (Element of A()) holds ((x in B & P[ x,y ]) implies P[ y,x ])) by A4,A18;
take u = y;
thus u in ( B \/ { x } ) by A20,XBOOLE_0:def 3;
thus P[ u,z ] by A2,A19,A21;
let v being (Element of A());
assume that
A23: v in ( B \/ { x } )
and
A24: P[ v,u ];
(v in B or v = x) by A23,SETWISEO:4;
hence P[ u,v ] by A2,A17,A19,A21,A22,A24;
end;
case A25: (for w being (Element of A()) holds (w in B implies (not P[ w,x ])));
thus x in ( B \/ { x } ) by SETWISEO:4;
thus A26: P[ x,x ] by A1;
let v being (Element of A());
assume that
A27: v in ( B \/ { x } )
and
A28: P[ v,x ];
(not v in B) by A25,A28;
hence P[ x,v ] by A26,A27,SETWISEO:4;
end;
end;
hence thesis by A17;
end;
end;
hence thesis;
end;

end;
A29: Q[ ( {}. A() ) ];
(for B being (Element of ( Fin A() )) holds Q[ B ]) from SETWISEO:sch 4(A29,A3);
hence thesis;
end;
