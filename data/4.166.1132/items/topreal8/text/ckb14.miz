environ
vocabularies NUMBERS,TARSKI,XBOOLE_0,ZFMISC_1,FUNCT_1,GOBOARD1,SUBSET_1,FINSEQ_1,ARYTM_3,XXREAL_0,FINSEQ_6,RELAT_1,PARTFUN1,FINSEQ_4,CARD_1,ORDINAL4,RFINSEQ,NAT_1,GRAPH_2,MATRIX_1,ARYTM_1,FINSEQ_5,EUCLID,RLTOPSP1,TOPREAL1,GOBOARD5,STRUCT_0,MCART_1,SETFAM_1,PRE_TOPC;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,NAT_D,SETFAM_1,FUNCT_1,PARTFUN1,FINSEQ_5,FINSEQ_6,RFINSEQ,GRAPH_2,MATRIX_1,RELSET_1,FINSEQ_1,ZFMISC_1,STRUCT_0,PRE_TOPC,RLTOPSP1,EUCLID,TOPREAL1,GOBOARD1,GOBOARD5,FINSEQ_4,XXREAL_0;
definitions FINSEQ_6,GOBOARD1,GOBOARD5,TOPREAL1,TARSKI;
theorems GRAPH_2,GOBOARD1,FINSEQ_3,NAT_1,FINSEQ_5,TOPREAL1,FINSEQ_1,TARSKI,FUNCT_1,FINSEQ_4,ZFMISC_1,PARTFUN2,FINSEQ_6,RELAT_1,RFINSEQ,INT_1,MSSCYC_1,REVROT_1,GOBOARD2,TOPREAL3,GOBOARD3,SPPOL_2,GOBOARD5,GOBOARD7,ENUMSET1,SETFAM_1,XBOOLE_0,XBOOLE_1,XREAL_1,CARD_1,XXREAL_0,ORDINAL1,PARTFUN1,NAT_D,SEQM_3,CKB1,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13;
registrations XBOOLE_0,ORDINAL1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,ZFMISC_1,FINSEQ_5,FINSEQ_6,STRUCT_0,SPPOL_2,GOBOARD9,SPRECT_1,REVROT_1,CARD_1,FUNCT_1,RELAT_1,EUCLID,CKB2,CKB3;
constructors PARTFUN1,SETFAM_1,XXREAL_0,REAL_1,NAT_1,COMPLEX1,FINSEQ_4,RFINSEQ,NAT_D,FINSEQ_5,REALSET2,GOBOARD1,GOBOARD5,GRAPH_2,SPRECT_1,RELSET_1,RLTOPSP1;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
theorem
Th12: (for D being non  empty set holds (for M being (Matrix of D) holds (for f being (FinSequence of D) holds (for g being non  empty (FinSequence of D) holds (((( f /. ( len f ) ) = ( g /. 1 ) & f is_sequence_on M) & g is_sequence_on M) implies ( f ^' g ) is_sequence_on M)))))
proof
let D being non  empty set;
let M being (Matrix of D);
let f being (FinSequence of D);
let g being non  empty (FinSequence of D);
assume that
A1: ( f /. ( len f ) ) = ( g /. 1 )
and
A2: f is_sequence_on M
and
A3: g is_sequence_on M;
A4: ( ( len ( f ^' g ) ) + 1 ) = ( ( len f ) + ( len g ) ) by GRAPH_2:13;
thus (for n holds (n in ( dom ( f ^' g ) ) implies (ex i st (ex j st ([ i,j ] in ( Indices M ) & ( ( f ^' g ) /. n ) = ( M * (i,j) ))))))
proof
let n;
assume that
A5: n in ( dom ( f ^' g ) );
per cases ;
suppose A6: n <= ( len f );

A7: 1 <= n by A5,FINSEQ_3:25;
then n in ( dom f ) by A6,FINSEQ_3:25;
then consider i,j such that A8: [ i,j ] in ( Indices M ) and A9: ( f /. n ) = ( M * (i,j) ) by A2,GOBOARD1:def 9;
take i;
take j;
thus [ i,j ] in ( Indices M ) by A8;
thus thesis by A6,A7,A9,GRAPH_2:57;
end;
suppose A10: n > ( len f );

then consider k being Nat such that A11: n = ( ( len f ) + k ) by NAT_1:10;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
A12: 1 <= ( k + 1 ) by NAT_1:11;
n <= ( len ( f ^' g ) ) by A5,FINSEQ_3:25;
then n < ( ( len f ) + ( len g ) ) by A4,NAT_1:13;
then A13: k < ( len g ) by A11,XREAL_1:6;
then ( k + 1 ) <= ( len g ) by NAT_1:13;
then ( k + 1 ) in ( dom g ) by A12,FINSEQ_3:25;
then consider i,j such that A14: [ i,j ] in ( Indices M ) and A15: ( g /. ( k + 1 ) ) = ( M * (i,j) ) by A3,GOBOARD1:def 9;
take i;
take j;
thus [ i,j ] in ( Indices M ) by A14;
( ( len f ) + 1 ) <= n by A10,NAT_1:13;
then 1 <= k by A11,XREAL_1:6;
hence thesis by A11,A13,A15,GRAPH_2:58;
end;
end;

let n;
assume that
A16: n in ( dom ( f ^' g ) )
and
A17: ( n + 1 ) in ( dom ( f ^' g ) );
let m;
let k;
let i;
let j;
assume that
A18: [ m,k ] in ( Indices M )
and
A19: [ i,j ] in ( Indices M )
and
A20: ( ( f ^' g ) /. n ) = ( M * (m,k) )
and
A21: ( ( f ^' g ) /. ( n + 1 ) ) = ( M * (i,j) );
per cases  by XXREAL_0:1;
suppose A22: n < ( len f );

then A23: ( n + 1 ) <= ( len f ) by NAT_1:13;
then A24: ( f /. ( n + 1 ) ) = ( M * (i,j) ) by A21,GRAPH_2:57,NAT_1:11;
A25: 1 <= n by A16,FINSEQ_3:25;
then A26: n in ( dom f ) by A22,FINSEQ_3:25;
1 <= ( n + 1 ) by NAT_1:11;
then A27: ( n + 1 ) in ( dom f ) by A23,FINSEQ_3:25;
( f /. n ) = ( M * (m,k) ) by A20,A22,A25,GRAPH_2:57;
hence thesis by A2,A18,A19,A26,A27,A24,GOBOARD1:def 9;
end;
suppose A28: n > ( len f );

then consider k0 being Nat such that A29: n = ( ( len f ) + k0 ) by NAT_1:10;
reconsider k0 as (Element of ( NAT )) by ORDINAL1:def 12;
A30: 1 <= ( k0 + 1 ) by NAT_1:11;
n <= ( len ( f ^' g ) ) by A16,FINSEQ_3:25;
then n < ( ( len f ) + ( len g ) ) by A4,NAT_1:13;
then A31: k0 < ( len g ) by A29,XREAL_1:6;
then ( k0 + 1 ) <= ( len g ) by NAT_1:13;
then A32: ( k0 + 1 ) in ( dom g ) by A30,FINSEQ_3:25;
A33: 1 <= ( ( k0 + 1 ) + 1 ) by NAT_1:11;
( n + 1 ) <= ( len ( f ^' g ) ) by A17,FINSEQ_3:25;
then ( ( len f ) + ( k0 + 1 ) ) < ( ( len f ) + ( len g ) ) by A4,A29,NAT_1:13;
then A34: ( k0 + 1 ) < ( len g ) by XREAL_1:6;
then ( ( k0 + 1 ) + 1 ) <= ( len g ) by NAT_1:13;
then A35: ( ( k0 + 1 ) + 1 ) in ( dom g ) by A33,FINSEQ_3:25;
( ( len f ) + 1 ) <= n by A28,NAT_1:13;
then 1 <= k0 by A29,XREAL_1:6;
then A36: ( g /. ( k0 + 1 ) ) = ( M * (m,k) ) by A20,A29,A31,GRAPH_2:58;
( g /. ( ( k0 + 1 ) + 1 ) ) = ( ( f ^' g ) /. ( ( len f ) + ( k0 + 1 ) ) ) by A34,GRAPH_2:58,NAT_1:11
.= ( M * (i,j) ) by A21,A29;
hence thesis by A3,A18,A19,A32,A35,A36,GOBOARD1:def 9;
end;
suppose A37: n = ( len f );

( n + 1 ) <= ( len ( f ^' g ) ) by A17,FINSEQ_3:25;
then ( ( len f ) + 1 ) < ( ( len f ) + ( len g ) ) by A4,A37,NAT_1:13;
then A38: 1 < ( len g ) by XREAL_1:6;
then ( 1 + 1 ) <= ( len g ) by NAT_1:13;
then A39: ( 1 + 1 ) in ( dom g ) by FINSEQ_3:25;
1 <= n by A16,FINSEQ_3:25;
then A40: ( g /. 1 ) = ( M * (m,k) ) by A1,A20,A37,GRAPH_2:57;
A41: 1 in ( dom g ) by FINSEQ_5:6;
( g /. ( 1 + 1 ) ) = ( M * (i,j) ) by A21,A37,A38,GRAPH_2:58;
hence thesis by A3,A18,A19,A40,A39,A41,GOBOARD1:def 9;
end;
end;
