environ
vocabularies NUMBERS,TARSKI,XBOOLE_0,ZFMISC_1,FUNCT_1,GOBOARD1,SUBSET_1,FINSEQ_1,ARYTM_3,XXREAL_0,FINSEQ_6,RELAT_1,PARTFUN1,FINSEQ_4,CARD_1,ORDINAL4,RFINSEQ,NAT_1,GRAPH_2,MATRIX_1,ARYTM_1,FINSEQ_5,EUCLID,RLTOPSP1,TOPREAL1,GOBOARD5,STRUCT_0,MCART_1,SETFAM_1,PRE_TOPC;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,NAT_D,SETFAM_1,FUNCT_1,PARTFUN1,FINSEQ_5,FINSEQ_6,RFINSEQ,GRAPH_2,MATRIX_1,RELSET_1,FINSEQ_1,ZFMISC_1,STRUCT_0,PRE_TOPC,RLTOPSP1,EUCLID,TOPREAL1,GOBOARD1,GOBOARD5,FINSEQ_4,XXREAL_0;
definitions FINSEQ_6,GOBOARD1,GOBOARD5,TOPREAL1,TARSKI;
theorems GRAPH_2,GOBOARD1,FINSEQ_3,NAT_1,FINSEQ_5,TOPREAL1,FINSEQ_1,TARSKI,FUNCT_1,FINSEQ_4,ZFMISC_1,PARTFUN2,FINSEQ_6,RELAT_1,RFINSEQ,INT_1,MSSCYC_1,REVROT_1,GOBOARD2,TOPREAL3,GOBOARD3,SPPOL_2,GOBOARD5,GOBOARD7,ENUMSET1,SETFAM_1,XBOOLE_0,XBOOLE_1,XREAL_1,CARD_1,XXREAL_0,ORDINAL1,PARTFUN1,NAT_D,SEQM_3,CKB1,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
registrations XBOOLE_0,ORDINAL1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,ZFMISC_1,FINSEQ_5,FINSEQ_6,STRUCT_0,SPPOL_2,GOBOARD9,SPRECT_1,REVROT_1,CARD_1,FUNCT_1,RELAT_1,EUCLID,CKB2,CKB3;
constructors PARTFUN1,SETFAM_1,XXREAL_0,REAL_1,NAT_1,COMPLEX1,FINSEQ_4,RFINSEQ,NAT_D,FINSEQ_5,REALSET2,GOBOARD1,GOBOARD5,GRAPH_2,SPRECT_1,RELSET_1,RLTOPSP1;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve i for (Element of ( NAT ));
theorem
Th27: (for f being  circular  unfolded  s.c.c. (FinSequence of ( TOP-REAL 2 )) holds (( len f ) > 4 implies ( ( LSeg (f,1) ) /\ ( L~ ( f /^ 1 ) ) ) = { ( f /. 1 ),( f /. 2 ) }))
proof
let f being  circular  unfolded  s.c.c. (FinSequence of ( TOP-REAL 2 ));
assume that
A1: ( len f ) > 4;
A2: ( 1 + 2 ) <= ( len f ) by A1,XXREAL_0:2;
set h2 = ( f /^ 1 );
A3: 1 <= ( len f ) by A1,XXREAL_0:2;
then A4: ( len h2 ) = ( ( len f ) - 1 ) by RFINSEQ:def 1;
then A5: ( ( len h2 ) + 1 ) = ( len f );
( len f ) > ( 3 + 1 ) by A1;
then A6: ( len h2 ) > ( 2 + 1 ) by A5,XREAL_1:6;
then A7: ( 1 + 1 ) <= ( len ( f /^ 1 ) ) by XXREAL_0:2;
set SFY = { ( LSeg (( f /^ 1 ),i) ): (1 < i & ( i + 1 ) < ( len ( f /^ 1 ) )) };
set Reszta = ( union SFY );
A8: ( ( ( len ( f /^ 1 ) ) -' 1 ) + 1 ) <= ( len ( f /^ 1 ) ) by A6,XREAL_1:235,XXREAL_0:2;
A9: 1 < ( len f ) by A1,XXREAL_0:2;
(for Z being set holds (Z in { ( {} ) } iff (ex X,Y being set st ((X in { ( LSeg (f,1) ) } & Y in SFY) & Z = ( X /\ Y )))))
proof
let Z being set;
thus (Z in { ( {} ) } implies (ex X,Y being set st ((X in { ( LSeg (f,1) ) } & Y in SFY) & Z = ( X /\ Y ))))
proof
assume A10: Z in { ( {} ) };
take X = ( LSeg (f,1) );
take Y = ( LSeg (f,( 2 + 1 )) );
thus X in { ( LSeg (f,1) ) } by TARSKI:def 1;
Y = ( LSeg (( f /^ 1 ),2) ) by A3,SPPOL_2:4;
hence Y in SFY by A6;
A11: ( 1 + 1 ) < 3;
( 3 + 1 ) < ( len f ) by A1;
then X misses Y by A11,GOBOARD5:def 4;
then ( X /\ Y ) = ( {} ) by XBOOLE_0:def 7;
hence Z = ( X /\ Y ) by A10,TARSKI:def 1;
end;

given X being set,Y being set such that
A12: X in { ( LSeg (f,1) ) }
and
A13: Y in SFY
and
A14: Z = ( X /\ Y );

A15: X = ( LSeg (f,1) ) by A12,TARSKI:def 1;
consider i such that A16: Y = ( LSeg (( f /^ 1 ),i) ) and A17: 1 < i and A18: ( i + 1 ) < ( len ( f /^ 1 ) ) by A13;
A19: ( 1 + 1 ) < ( i + 1 ) by A17,XREAL_1:6;
A20: ( ( i + 1 ) + 1 ) < ( len f ) by A5,A18,XREAL_1:6;
( LSeg (( f /^ 1 ),i) ) = ( LSeg (f,( i + 1 )) ) by A9,A17,SPPOL_2:4;
then X misses Y by A15,A16,A20,A19,GOBOARD5:def 4;
then Z = ( {} ) by A14,XBOOLE_0:def 7;
hence thesis by TARSKI:def 1;
end;
then ( INTERSECTION ({ ( LSeg (f,1) ) },SFY) ) = { ( {} ) } by SETFAM_1:def 5;
then A21: ( ( LSeg (f,1) ) /\ Reszta ) = ( union { ( {} ) } ) by SETFAM_1:25
.= ( {} ) by ZFMISC_1:25;
A22: ( L~ ( f /^ 1 ) ) c= ( ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) \/ Reszta )
proof
let u being set;
assume u in ( L~ ( f /^ 1 ) );
then consider e being set such that A23: u in e and A24: e in { ( LSeg (( f /^ 1 ),i) ): (1 <= i & ( i + 1 ) <= ( len ( f /^ 1 ) )) } by TARSKI:def 4;
consider i such that A25: e = ( LSeg (( f /^ 1 ),i) ) and A26: 1 <= i and A27: ( i + 1 ) <= ( len ( f /^ 1 ) ) by A24;
per cases  by A26,A27,XXREAL_0:1;
suppose i = 1;

then u in ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) by A23,A25,XBOOLE_0:def 3;
hence thesis by XBOOLE_0:def 3;
end;
suppose ( i + 1 ) = ( len ( f /^ 1 ) );

then i = ( ( len ( f /^ 1 ) ) -' 1 ) by NAT_D:34;
then u in ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) by A23,A25,XBOOLE_0:def 3;
hence thesis by XBOOLE_0:def 3;
end;
suppose (1 < i & ( i + 1 ) < ( len ( f /^ 1 ) ));

then e in SFY by A25;
then u in Reszta by A23,TARSKI:def 4;
hence thesis by XBOOLE_0:def 3;
end;
end;
A28: Reszta c= ( L~ ( f /^ 1 ) )
proof
let u being set;
assume u in Reszta;
then consider e being set such that A29: u in e and A30: e in SFY by TARSKI:def 4;
(ex i st ((e = ( LSeg (( f /^ 1 ),i) ) & 1 < i) & ( i + 1 ) < ( len ( f /^ 1 ) ))) by A30;
then e in { ( LSeg (( f /^ 1 ),i) ): (1 <= i & ( i + 1 ) <= ( len ( f /^ 1 ) )) };
hence thesis by A29,TARSKI:def 4;
end;
( 1 + ( ( len ( f /^ 1 ) ) -' 1 ) ) = ( len ( f /^ 1 ) ) by A6,XREAL_1:235,XXREAL_0:2
.= ( ( len f ) -' 1 ) by A1,A4,XREAL_1:233,XXREAL_0:2;
then A31: ( ( LSeg (f,1) ) /\ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) = ( ( LSeg (f,1) ) /\ ( LSeg (f,( ( len f ) -' 1 )) ) ) by A3,A7,NAT_D:55,SPPOL_2:4
.= { ( f /. 1 ) } by A1,REVROT_1:30;
( 1 + 1 ) <= ( len h2 ) by A6,NAT_1:13;
then ( LSeg (( f /^ 1 ),1) ) in { ( LSeg (( f /^ 1 ),i) ): (1 <= i & ( i + 1 ) <= ( len ( f /^ 1 ) )) };
then A32: ( LSeg (( f /^ 1 ),1) ) c= ( L~ ( f /^ 1 ) ) by ZFMISC_1:74;
A33: ( ( LSeg (f,1) ) /\ ( LSeg (( f /^ 1 ),1) ) ) = ( ( LSeg (f,1) ) /\ ( LSeg (f,( 1 + 1 )) ) ) by A3,SPPOL_2:4
.= { ( f /. ( 1 + 1 ) ) } by A2,TOPREAL1:def 6;
1 <= ( ( len ( f /^ 1 ) ) -' 1 ) by A7,NAT_D:55;
then ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) in { ( LSeg (( f /^ 1 ),i) ): (1 <= i & ( i + 1 ) <= ( len ( f /^ 1 ) )) } by A8;
then ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) c= ( L~ ( f /^ 1 ) ) by ZFMISC_1:74;
then ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) c= ( L~ ( f /^ 1 ) ) by A32,XBOOLE_1:8;
then ( ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) \/ Reszta ) c= ( L~ ( f /^ 1 ) ) by A28,XBOOLE_1:8;
then ( L~ ( f /^ 1 ) ) = ( ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) \/ Reszta ) by A22,XBOOLE_0:def 10;
hence ( ( LSeg (f,1) ) /\ ( L~ ( f /^ 1 ) ) ) = ( ( ( LSeg (f,1) ) /\ ( ( LSeg (( f /^ 1 ),1) ) \/ ( LSeg (( f /^ 1 ),( ( len ( f /^ 1 ) ) -' 1 )) ) ) ) \/ ( {} ) ) by A21,XBOOLE_1:23
.= ( { ( f /. 1 ) } \/ { ( f /. 2 ) } ) by A33,A31,XBOOLE_1:23
.= { ( f /. 1 ),( f /. 2 ) } by ENUMSET1:1;
end;
