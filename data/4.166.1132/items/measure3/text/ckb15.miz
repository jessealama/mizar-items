environ
vocabularies FUNCT_1,NUMBERS,SUBSET_1,SUPINF_2,XXREAL_0,ORDINAL1,RELAT_1,SUPINF_1,ORDINAL2,PROB_1,MEASURE2,MEASURE1,TARSKI,SETFAM_1,CARD_1,XBOOLE_0,ARYTM_3,NAT_1,ARYTM_1,REAL_1,XXREAL_2,ZFMISC_1,MEASURE3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XXREAL_0,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,REAL_1,NAT_1,SETFAM_1,PROB_1,XXREAL_2,SUPINF_1,SUPINF_2,MEASURE1,MEASURE2,CKB3,CKB4;
definitions TARSKI,XBOOLE_0,XXREAL_3;
theorems TARSKI,FUNCT_1,FUNCT_2,ZFMISC_1,NAT_1,SETFAM_1,SUPINF_2,MEASURE1,MEASURE2,PROB_2,XBOOLE_0,XBOOLE_1,XXREAL_0,PROB_1,FINSUB_1,ORDINAL1,XXREAL_2,VALUED_0,XXREAL_3,RELAT_1,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
schemes NAT_1,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,FUNCT_2,NUMBERS,XREAL_0,MEMBERED,MEASURE1,VALUED_0,XXREAL_3,RELSET_1;
constructors PARTFUN1,REAL_1,NAT_1,PROB_2,MEASURE1,MEASURE2,SUPINF_1,RELSET_1,CKB4;
requirements NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve X for set;
theorem
Th15: (for S being (SigmaField of X) holds (for M being (Measure of S) holds (for F being (Sep_Sequence of S) holds ( SUM ( M * F ) ) <= ( M . ( union ( rng F ) ) ))))
proof
let S being (SigmaField of X);
let M being (Measure of S);
let F being (Sep_Sequence of S);
set T = ( rng F );
consider G being (Function of ( NAT ),S) such that A1: ( G . ( 0 ) ) = ( F . ( 0 ) ) and A2: (for n being (Element of ( NAT )) holds ( G . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \/ ( G . n ) )) by MEASURE2:4;
( {} ) is (Subset of X) by XBOOLE_1:2;
then consider H being (Function of ( NAT ),( bool X )) such that A3: ( rng H ) = { ( union T ),( {} ) } and A4: ( H . ( 0 ) ) = ( union T ) and A5: (for n being (Element of ( NAT )) holds (( 0 ) < n implies ( H . n ) = ( {} ))) by MEASURE1:19;
( rng H ) c= S
proof
let a being set;
assume a in ( rng H );
then (a = ( union T ) or a = ( {} )) by A3,TARSKI:def 2;
hence thesis by PROB_1:4;
end;
then reconsider H as (Function of ( NAT ),S) by FUNCT_2:6;
defpred P[ (Element of ( NAT )) ]
 means
( ( Ser ( M * F ) ) . $1 ) = ( M . ( G . $1 ) );
A6: ( dom ( M * F ) ) = ( NAT ) by FUNCT_2:def 1;
A7: (for n being (Element of ( NAT )) holds ( ( G . n ) /\ ( F . ( n + 1 ) ) ) = ( {} ))
proof
let n being (Element of ( NAT ));
A8: (for n being (Element of ( NAT )) holds (for k being (Element of ( NAT )) holds (n < k implies ( ( G . n ) /\ ( F . k ) ) = ( {} ))))
proof
defpred P[ (Element of ( NAT )) ]
 means
(for k being (Element of ( NAT )) holds ($1 < k implies ( ( G . $1 ) /\ ( F . k ) ) = ( {} )));
A9: (for n being (Element of ( NAT )) holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
assume A10: (for k being (Element of ( NAT )) holds (n < k implies ( ( G . n ) /\ ( F . k ) ) = ( {} )));
let k being (Element of ( NAT ));
assume A11: ( n + 1 ) < k;
then A12: n < k by NAT_1:13;
( F . ( n + 1 ) ) misses ( F . k ) by A11,PROB_2:def 2;
then A13: ( ( F . ( n + 1 ) ) /\ ( F . k ) ) = ( {} ) by XBOOLE_0:def 7;
( ( G . ( n + 1 ) ) /\ ( F . k ) ) = ( ( ( F . ( n + 1 ) ) \/ ( G . n ) ) /\ ( F . k ) ) by A2
.= ( ( ( F . ( n + 1 ) ) /\ ( F . k ) ) \/ ( ( G . n ) /\ ( F . k ) ) ) by XBOOLE_1:23;
hence thesis by A10,A12,A13;
end;
A14: P[ ( 0 ) ]
proof
let k being (Element of ( NAT ));
assume ( 0 ) < k;
then ( F . ( 0 ) ) misses ( F . k ) by PROB_2:def 2;
hence thesis by A1,XBOOLE_0:def 7;
end;
thus (for n being (Element of ( NAT )) holds P[ n ]) from NAT_1:sch 1(A14,A9);
end;
n < ( n + 1 ) by NAT_1:13;
hence thesis by A8;
end;
A15: (for k being (Element of ( NAT )) holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
( ( G . k ) /\ ( F . ( k + 1 ) ) ) = ( {} ) by A7;
then A16: ( G . k ) misses ( F . ( k + 1 ) ) by XBOOLE_0:def 7;
assume ( ( Ser ( M * F ) ) . k ) = ( M . ( G . k ) );
then ( ( Ser ( M * F ) ) . ( k + 1 ) ) = ( ( M . ( G . k ) ) + ( ( M * F ) . ( k + 1 ) ) ) by SUPINF_2:44;
then ( ( Ser ( M * F ) ) . ( k + 1 ) ) = ( ( M . ( G . k ) ) + ( M . ( F . ( k + 1 ) ) ) ) by A6,FUNCT_1:12
.= ( M . ( ( F . ( k + 1 ) ) \/ ( G . k ) ) ) by A16,MEASURE1:def 3
.= ( M . ( G . ( k + 1 ) ) ) by A2;
hence thesis;
end;
( ( Ser ( M * F ) ) . ( 0 ) ) = ( ( M * F ) . ( 0 ) ) by SUPINF_2:44;
then A17: P[ ( 0 ) ] by A1,A6,FUNCT_1:12;
A18: (for n being (Element of ( NAT )) holds P[ n ]) from NAT_1:sch 1(A17,A15);
defpred P[ (Element of ( NAT )) ]
 means
( ( Ser ( M * H ) ) . $1 ) = ( M . ( union T ) );
A19: (for n being (Element of ( NAT )) holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
( 0 ) <= n by NAT_1:2;
then ( 0 ) < ( n + 1 ) by NAT_1:13;
then A20: ( H . ( n + 1 ) ) = ( {} ) by A5;
( dom ( M * H ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( M * H ) . ( n + 1 ) ) = ( M . ( {} ) ) by A20,FUNCT_1:12;
then A21: ( ( M * H ) . ( n + 1 ) ) = ( 0. ) by VALUED_0:def 19;
assume ( ( Ser ( M * H ) ) . n ) = ( M . ( union T ) );
then ( ( Ser ( M * H ) ) . ( n + 1 ) ) = ( ( M . ( union T ) ) + ( ( M * H ) . ( n + 1 ) ) ) by SUPINF_2:44;
hence thesis by A21,XXREAL_3:4;
end;
(( ( Ser ( M * H ) ) . ( 0 ) ) = ( ( M * H ) . ( 0 ) ) & ( dom ( M * H ) ) = ( NAT )) by FUNCT_2:def 1,SUPINF_2:44;
then A22: P[ ( 0 ) ] by A4,FUNCT_1:12;
A23: (for n being (Element of ( NAT )) holds P[ n ]) from NAT_1:sch 1(A22,A19);
A24: (for r being (Element of ( NAT )) holds (1 <= r implies ( ( M * H ) . r ) = ( 0. )))
proof
let r being (Element of ( NAT ));
assume 1 <= r;
then ( ( 0 ) + 1 ) <= r;
then ( 0 ) < r by NAT_1:13;
then A25: ( H . r ) = ( {} ) by A5;
( dom ( M * H ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( M * H ) . r ) = ( M . ( {} ) ) by A25,FUNCT_1:12;
hence thesis by VALUED_0:def 19;
end;
A26: (for n being (Element of ( NAT )) holds ( G . n ) c= ( union T ))
proof
defpred P[ (Element of ( NAT )) ]
 means
( G . $1 ) c= ( union T );
A27: (for n being (Element of ( NAT )) holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
assume A28: ( G . n ) c= ( union T );
(( G . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \/ ( G . n ) ) & ( F . ( n + 1 ) ) c= ( union T )) by A2,FUNCT_2:4,ZFMISC_1:74;
hence thesis by A28,XBOOLE_1:8;
end;
A29: P[ ( 0 ) ] by A1,FUNCT_2:4,ZFMISC_1:74;
thus (for n being (Element of ( NAT )) holds P[ n ]) from NAT_1:sch 1(A29,A27);
end;
A30: (for n being (Element of ( NAT )) holds ( ( Ser ( M * F ) ) . n ) <= ( ( Ser ( M * H ) ) . n ))
proof
let n being (Element of ( NAT ));
( ( Ser ( M * F ) ) . n ) = ( M . ( G . n ) ) by A18;
then ( ( Ser ( M * F ) ) . n ) <= ( M . ( union T ) ) by A26,MEASURE1:8;
hence thesis by A23;
end;
( M * H ) is  nonnegative by MEASURE1:25;
then ( SUM ( M * H ) ) = ( ( Ser ( M * H ) ) . 1 ) by A24,SUPINF_2:48;
then ( SUM ( M * H ) ) = ( M . ( union T ) ) by A23;
hence thesis by A30,CKB1:1;
end;
