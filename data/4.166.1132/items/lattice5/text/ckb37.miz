environ
vocabularies NUMBERS,FUNCT_1,FUNCOP_1,TARSKI,RELAT_1,FUNCT_6,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,ORDERS_2,LATTICE3,MSUALG_5,STRUCT_0,EQREL_1,PBOOLE,LATTICES,XXREAL_0,REWRITE1,SETFAM_1,RELAT_2,WAYBEL_0,GROUP_6,YELLOW_0,ORDINAL2,CAT_1,FINSEQ_1,ARYTM_3,ABIAN,FINSEQ_2,ARYTM_1,CARD_1,ORDINAL4,NAT_1,VALUED_0,FUNCT_2,MCART_1,PARTFUN1,LATTICE5;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_6,CARD_1,NUMBERS,XCMPLX_0,NAT_1,NAT_D,SETFAM_1,ORDINAL1,ORDINAL2,MCART_1,DOMAIN_1,PARTFUN1,FUNCOP_1,STRUCT_0,ORDERS_2,EQREL_1,MSUALG_5,FINSEQ_1,FINSEQ_2,SEQ_4,LATTICES,LATTICE3,BINOP_1,YELLOW_0,WAYBEL_0,YELLOW_2,ABIAN,XXREAL_0,CKB4,CKB13,CKB16,CKB18,CKB20,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB31,CKB32,CKB35;
definitions TARSKI,LATTICE3,FUNCOP_1,WAYBEL_0,XBOOLE_0,BINOP_1,FINSEQ_1,FINSEQ_2,CKB4,CKB13,CKB20,CKB23,CKB27,CKB28,CKB29,CKB32,CKB35;
theorems EQREL_1,RELAT_1,RELAT_2,FINSEQ_1,FINSEQ_2,MSUALG_5,ORDERS_2,TARSKI,ENUMSET1,ORDINAL1,ORDINAL3,WELLORD2,TREES_2,PARTFUN1,GRFUNC_1,FUNCT_6,MCART_1,FINSEQ_5,NAT_1,INT_1,BINOP_1,ZFMISC_1,FUNCT_1,FUNCT_2,FILTER_0,LATTICES,LATTICE3,YELLOW_0,YELLOW_2,YELLOW_3,YELLOW_5,WAYBEL_0,WAYBEL_1,WAYBEL_6,RELSET_1,CARD_1,FINSEQ_3,SETFAM_1,XBOOLE_0,XBOOLE_1,ORDERS_1,FUNCOP_1,XREAL_1,XXREAL_0,XXREAL_2,XREAL_0,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB32,CKB33,CKB34,CKB35;
schemes DOMAIN_1,FUNCT_2,RELSET_1,RECDEF_1,ORDINAL2,NAT_1,FINSEQ_1,CLASSES1,BINOP_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,PARTFUN1,FUNCOP_1,XREAL_0,CARD_1,MEMBERED,FINSEQ_1,ABIAN,STRUCT_0,LATTICES,LATTICE3,YELLOW_0,YELLOW_1,RELAT_1,XXREAL_2,RELSET_1,FINSEQ_2,FUNCT_1,CKB5,CKB14,CKB15,CKB17,CKB19,CKB30,CKB36;
constructors SETFAM_1,BINOP_1,DOMAIN_1,ORDINAL2,NAT_1,CLASSES1,SEQ_4,FINSOP_1,FUNCT_6,RFUNCT_3,BINARITH,ABIAN,LATTICE3,MSUALG_5,YELLOW_2,NAT_D,RELSET_1,CKB4,CKB20,CKB23,CKB26,CKB27,CKB28,CKB29,CKB32,CKB35;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve A for non  empty set;
reserve L for  lower-bounded LATTICE;
definition
let A;
let L;
let d being (BiFunction of A,L);
let q being (Element of [: A,A,(the carrier of L),(the carrier of L) :]);
func new_bi_fun (d,q) -> (BiFunction of ( new_set A ),L) means 
:Def11: (((((((((((for u,v being (Element of A) holds ( it . (u,v) ) = ( d . (u,v) )) & ( it . ({ A },{ A }) ) = ( Bottom L )) & ( it . ({ { A } },{ { A } }) ) = ( Bottom L )) & ( it . ({ { { A } } },{ { { A } } }) ) = ( Bottom L )) & ( it . ({ { A } },{ { { A } } }) ) = ( q `3 )) & ( it . ({ { { A } } },{ { A } }) ) = ( q `3 )) & ( it . ({ A },{ { A } }) ) = ( q `4 )) & ( it . ({ { A } },{ A }) ) = ( q `4 )) & ( it . ({ A },{ { { A } } }) ) = ( ( q `3 ) "\/" ( q `4 ) )) & ( it . ({ { { A } } },{ A }) ) = ( ( q `3 ) "\/" ( q `4 ) )) & (for u being (Element of A) holds (((((( it . (u,{ A }) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) ) & ( it . ({ A },u) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) )) & ( it . (u,{ { A } }) ) = ( ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) ) "\/" ( q `4 ) )) & ( it . ({ { A } },u) ) = ( ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) ) "\/" ( q `4 ) )) & ( it . (u,{ { { A } } }) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `4 ) )) & ( it . ({ { { A } } },u) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `4 ) ))));
existence
proof
reconsider a = ( q `3 ),b = ( q `4 ) as (Element of L);
set x = ( q `1 );
set y = ( q `2 );
defpred X[ (Element of ( new_set A )),(Element of ( new_set A )),(Element of L) ]
 means
(((((((((((($1 in A & $2 in A) implies $3 = ( d . ($1,$2) )) & ((($1 = { { A } } & $2 = { { { A } } }) or ($2 = { { A } } & $1 = { { { A } } })) implies $3 = a)) & ((($1 = { A } & $2 = { { A } }) or ($2 = { A } & $1 = { { A } })) implies $3 = b)) & ((($1 = { A } & $2 = { { { A } } }) or ($2 = { A } & $1 = { { { A } } })) implies $3 = ( a "\/" b ))) & (((($1 = { A } or $1 = { { A } }) or $1 = { { { A } } }) & $2 = $1) implies $3 = ( Bottom L ))) & (($1 in A & $2 = { A }) implies (ex p9 being (Element of A) st (p9 = $1 & $3 = ( ( d . (p9,x) ) "\/" a ))))) & (($1 in A & $2 = { { A } }) implies (ex p9 being (Element of A) st (p9 = $1 & $3 = ( ( ( d . (p9,x) ) "\/" a ) "\/" b ))))) & (($1 in A & $2 = { { { A } } }) implies (ex p9 being (Element of A) st (p9 = $1 & $3 = ( ( d . (p9,y) ) "\/" b ))))) & (($2 in A & $1 = { A }) implies (ex q9 being (Element of A) st (q9 = $2 & $3 = ( ( d . (q9,x) ) "\/" a ))))) & (($2 in A & $1 = { { A } }) implies (ex q9 being (Element of A) st (q9 = $2 & $3 = ( ( ( d . (q9,x) ) "\/" a ) "\/" b ))))) & (($2 in A & $1 = { { { A } } }) implies (ex q9 being (Element of A) st (q9 = $2 & $3 = ( ( d . (q9,y) ) "\/" b )))));
{ { A } } in { { A },{ { A } },{ { { A } } } } by ENUMSET1:def 1;
then A1: { { A } } in ( new_set A ) by XBOOLE_0:def 3;
A2: (for p,q being (Element of ( new_set A )) holds (ex r being (Element of L) st X[ p,q,r ]))
proof
let p being (Element of ( new_set A ));
let q being (Element of ( new_set A ));
A3: (p in A or p in { { A },{ { A } },{ { { A } } } }) by XBOOLE_0:def 3;
A4: (q in A or q in { { A },{ { A } },{ { { A } } } }) by XBOOLE_0:def 3;
A5: ((((p = { A } or p = { { A } }) or p = { { { A } } }) & p = q) iff (((p = { A } & q = { A }) or (p = { { A } } & q = { { A } })) or (p = { { { A } } } & q = { { { A } } })));
A6: (not { A } in A) by TARSKI:def 1;
A7: { { A } } <> { { { A } } }
proof
assume { { A } } = { { { A } } };
then { { A } } in { { A } } by TARSKI:def 1;
hence contradiction;
end;
A8: (not { { { A } } } in A)
proof
A9: { { A } } in { { { A } } } by TARSKI:def 1;
A10: (A in { A } & { A } in { { A } }) by TARSKI:def 1;
assume { { { A } } } in A;
hence contradiction by A10,A9,ORDINAL1:2;
end;
A11: { A } <> { { { A } } }
proof
assume { A } = { { { A } } };
then { { A } } in { A } by TARSKI:def 1;
hence contradiction by TARSKI:def 1;
end;
A12: (not { { A } } in A)
proof
A13: (A in { A } & { A } in { { A } }) by TARSKI:def 1;
assume { { A } } in A;
hence contradiction by A13,ORDINAL1:1;
end;
per cases  by A3,A4,A5,ENUMSET1:def 1;
suppose (p in A & q in A);

then reconsider p9 = p,q9 = q as (Element of A);
take ( d . (p9,q9) );
thus thesis by A6,A12,A8;
end;
suppose A14: ((p = { { A } } & q = { { { A } } }) or (q = { { A } } & p = { { { A } } }));

take a;
thus thesis by A7,A11,A12,A8,A14;
end;
suppose A15: ((p = { A } & q = { { A } }) or (q = { A } & p = { { A } }));

take b;
thus thesis by A7,A11,A12,A15,TARSKI:def 1;
end;
suppose A16: ((p = { A } & q = { { { A } } }) or (q = { A } & p = { { { A } } }));

take ( a "\/" b );
thus thesis by A7,A11,A8,A16,TARSKI:def 1;
end;
suppose A17: (((p = { A } or p = { { A } }) or p = { { { A } } }) & q = p);

take ( Bottom L );
thus thesis by A7,A11,A12,A8,A17,TARSKI:def 1;
end;
suppose A18: (p in A & q = { A });

then reconsider p9 = p as (Element of A);
take ( ( d . (p9,x) ) "\/" a );
thus thesis by A11,A12,A8,A18,TARSKI:def 1;
end;
suppose A19: (p in A & q = { { A } });

then reconsider p9 = p as (Element of A);
take ( ( ( d . (p9,x) ) "\/" a ) "\/" b );
thus thesis by A7,A12,A8,A19,TARSKI:def 1;
end;
suppose A20: (p in A & q = { { { A } } });

then reconsider p9 = p as (Element of A);
take ( ( d . (p9,y) ) "\/" b );
thus thesis by A7,A11,A12,A8,A20,TARSKI:def 1;
end;
suppose A21: (q in A & p = { A });

then reconsider q9 = q as (Element of A);
take ( ( d . (q9,x) ) "\/" a );
thus thesis by A11,A12,A8,A21,TARSKI:def 1;
end;
suppose A22: (q in A & p = { { A } });

then reconsider q9 = q as (Element of A);
take ( ( ( d . (q9,x) ) "\/" a ) "\/" b );
thus thesis by A7,A12,A8,A22,TARSKI:def 1;
end;
suppose A23: (q in A & p = { { { A } } });

then reconsider q9 = q as (Element of A);
take ( ( d . (q9,y) ) "\/" b );
thus thesis by A7,A11,A12,A8,A23,TARSKI:def 1;
end;
end;
consider f being (Function of [: ( new_set A ),( new_set A ) :],(the carrier of L)) such that A24: (for p,q being (Element of ( new_set A )) holds X[ p,q,( f . (p,q) ) ]) from BINOP_1:sch 3(A2);
{ { { A } } } in { { A },{ { A } },{ { { A } } } } by ENUMSET1:def 1;
then A25: { { { A } } } in ( new_set A ) by XBOOLE_0:def 3;
reconsider f as (BiFunction of ( new_set A ),L);
{ A } in { { A },{ { A } },{ { { A } } } } by ENUMSET1:def 1;
then A26: { A } in ( new_set A ) by XBOOLE_0:def 3;
A27: (for u being (Element of A) holds ((( f . ({ A },u) ) = ( ( d . (u,x) ) "\/" a ) & ( f . ({ { A } },u) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b )) & ( f . ({ { { A } } },u) ) = ( ( d . (u,y) ) "\/" b )))
proof
let u being (Element of A);
reconsider u9 = u as (Element of ( new_set A )) by XBOOLE_0:def 3;
(ex u1 being (Element of A) st (u1 = u9 & ( f . ({ A },u9) ) = ( ( d . (u1,x) ) "\/" a ))) by A26,A24;
hence ( f . ({ A },u) ) = ( ( d . (u,x) ) "\/" a );
(ex u2 being (Element of A) st (u2 = u9 & ( f . ({ { A } },u9) ) = ( ( ( d . (u2,x) ) "\/" a ) "\/" b ))) by A1,A24;
hence ( f . ({ { A } },u) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b );
(ex u3 being (Element of A) st (u3 = u9 & ( f . ({ { { A } } },u9) ) = ( ( d . (u3,y) ) "\/" b ))) by A25,A24;
hence thesis;
end;
take f;
A28: (for u,v being (Element of A) holds ( f . (u,v) ) = ( d . (u,v) ))
proof
let u being (Element of A);
let v being (Element of A);
reconsider u9 = u,v9 = v as (Element of ( new_set A )) by XBOOLE_0:def 3;
thus ( f . (u,v) ) = ( f . (u9,v9) )
.= ( d . (u,v) ) by A24;
end;
(for u being (Element of A) holds ((( f . (u,{ A }) ) = ( ( d . (u,x) ) "\/" a ) & ( f . (u,{ { A } }) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b )) & ( f . (u,{ { { A } } }) ) = ( ( d . (u,y) ) "\/" b )))
proof
let u being (Element of A);
reconsider u9 = u as (Element of ( new_set A )) by XBOOLE_0:def 3;
(ex u1 being (Element of A) st (u1 = u9 & ( f . (u9,{ A }) ) = ( ( d . (u1,x) ) "\/" a ))) by A26,A24;
hence ( f . (u,{ A }) ) = ( ( d . (u,x) ) "\/" a );
(ex u2 being (Element of A) st (u2 = u9 & ( f . (u9,{ { A } }) ) = ( ( ( d . (u2,x) ) "\/" a ) "\/" b ))) by A1,A24;
hence ( f . (u,{ { A } }) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b );
(ex u3 being (Element of A) st (u3 = u9 & ( f . (u9,{ { { A } } }) ) = ( ( d . (u3,y) ) "\/" b ))) by A25,A24;
hence thesis;
end;
hence thesis by A26,A1,A25,A24,A28,A27;
end;
uniqueness
proof
set x = ( q `1 );
set y = ( q `2 );
set a = ( q `3 );
set b = ( q `4 );
let f1 being (BiFunction of ( new_set A ),L);
let f2 being (BiFunction of ( new_set A ),L);
assume that
A29: (for u,v being (Element of A) holds ( f1 . (u,v) ) = ( d . (u,v) ))
and
A30: ( f1 . ({ A },{ A }) ) = ( Bottom L )
and
A31: ( f1 . ({ { A } },{ { A } }) ) = ( Bottom L )
and
A32: ( f1 . ({ { { A } } },{ { { A } } }) ) = ( Bottom L )
and
A33: ( f1 . ({ { A } },{ { { A } } }) ) = a
and
A34: ( f1 . ({ { { A } } },{ { A } }) ) = a
and
A35: ( f1 . ({ A },{ { A } }) ) = b
and
A36: ( f1 . ({ { A } },{ A }) ) = b
and
A37: ( f1 . ({ A },{ { { A } } }) ) = ( a "\/" b )
and
A38: ( f1 . ({ { { A } } },{ A }) ) = ( a "\/" b )
and
A39: (for u being (Element of A) holds (((((( f1 . (u,{ A }) ) = ( ( d . (u,x) ) "\/" a ) & ( f1 . ({ A },u) ) = ( ( d . (u,x) ) "\/" a )) & ( f1 . (u,{ { A } }) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b )) & ( f1 . ({ { A } },u) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b )) & ( f1 . (u,{ { { A } } }) ) = ( ( d . (u,y) ) "\/" b )) & ( f1 . ({ { { A } } },u) ) = ( ( d . (u,y) ) "\/" b )))
and
A40: (for u,v being (Element of A) holds ( f2 . (u,v) ) = ( d . (u,v) ))
and
A41: ( f2 . ({ A },{ A }) ) = ( Bottom L )
and
A42: ( f2 . ({ { A } },{ { A } }) ) = ( Bottom L )
and
A43: ( f2 . ({ { { A } } },{ { { A } } }) ) = ( Bottom L )
and
A44: ( f2 . ({ { A } },{ { { A } } }) ) = a
and
A45: ( f2 . ({ { { A } } },{ { A } }) ) = a
and
A46: ( f2 . ({ A },{ { A } }) ) = b
and
A47: ( f2 . ({ { A } },{ A }) ) = b
and
A48: ( f2 . ({ A },{ { { A } } }) ) = ( a "\/" b )
and
A49: ( f2 . ({ { { A } } },{ A }) ) = ( a "\/" b )
and
A50: (for u being (Element of A) holds (((((( f2 . (u,{ A }) ) = ( ( d . (u,x) ) "\/" a ) & ( f2 . ({ A },u) ) = ( ( d . (u,x) ) "\/" a )) & ( f2 . (u,{ { A } }) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b )) & ( f2 . ({ { A } },u) ) = ( ( ( d . (u,x) ) "\/" a ) "\/" b )) & ( f2 . (u,{ { { A } } }) ) = ( ( d . (u,y) ) "\/" b )) & ( f2 . ({ { { A } } },u) ) = ( ( d . (u,y) ) "\/" b )));
now
let p being (Element of ( new_set A ));
let q being (Element of ( new_set A ));
A51: (p in A or p in { { A },{ { A } },{ { { A } } } }) by XBOOLE_0:def 3;
A52: (q in A or q in { { A },{ { A } },{ { { A } } } }) by XBOOLE_0:def 3;
per cases  by A51,A52,ENUMSET1:def 1;
suppose A53: (p in A & q in A);

hence ( f1 . (p,q) ) = ( d . (p,q) ) by A29
.= ( f2 . (p,q) ) by A40,A53;
end;
suppose A54: (p in A & q = { A });

then reconsider p9 = p as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (p9,x) ) "\/" a ) by A39,A54
.= ( f2 . (p,q) ) by A50,A54;
end;
suppose A55: (p in A & q = { { A } });

then reconsider p9 = p as (Element of A);
thus ( f1 . (p,q) ) = ( ( ( d . (p9,x) ) "\/" a ) "\/" b ) by A39,A55
.= ( f2 . (p,q) ) by A50,A55;
end;
suppose A56: (p in A & q = { { { A } } });

then reconsider p9 = p as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (p9,y) ) "\/" b ) by A39,A56
.= ( f2 . (p,q) ) by A50,A56;
end;
suppose A57: (p = { A } & q in A);

then reconsider q9 = q as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (q9,x) ) "\/" a ) by A39,A57
.= ( f2 . (p,q) ) by A50,A57;
end;
suppose (p = { A } & q = { A });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A30,A41;
end;
suppose (p = { A } & q = { { A } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A35,A46;
end;
suppose (p = { A } & q = { { { A } } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A37,A48;
end;
suppose A58: (p = { { A } } & q in A);

then reconsider q9 = q as (Element of A);
thus ( f1 . (p,q) ) = ( ( ( d . (q9,x) ) "\/" a ) "\/" b ) by A39,A58
.= ( f2 . (p,q) ) by A50,A58;
end;
suppose (p = { { A } } & q = { A });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A36,A47;
end;
suppose (p = { { A } } & q = { { A } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A31,A42;
end;
suppose (p = { { A } } & q = { { { A } } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A33,A44;
end;
suppose A59: (p = { { { A } } } & q in A);

then reconsider q9 = q as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (q9,y) ) "\/" b ) by A39,A59
.= ( f2 . (p,q) ) by A50,A59;
end;
suppose (p = { { { A } } } & q = { A });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A38,A49;
end;
suppose (p = { { { A } } } & q = { { A } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A34,A45;
end;
suppose (p = { { { A } } } & q = { { { A } } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A32,A43;
end;
end;
hence f1 = f2 by BINOP_1:2;
end;
end;
