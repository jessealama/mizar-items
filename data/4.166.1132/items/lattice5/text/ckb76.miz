environ
vocabularies NUMBERS,FUNCT_1,FUNCOP_1,TARSKI,RELAT_1,FUNCT_6,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,ORDERS_2,LATTICE3,MSUALG_5,STRUCT_0,EQREL_1,PBOOLE,LATTICES,XXREAL_0,REWRITE1,SETFAM_1,RELAT_2,WAYBEL_0,GROUP_6,YELLOW_0,ORDINAL2,CAT_1,FINSEQ_1,ARYTM_3,ABIAN,FINSEQ_2,ARYTM_1,CARD_1,ORDINAL4,NAT_1,VALUED_0,FUNCT_2,MCART_1,PARTFUN1,LATTICE5;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_6,CARD_1,NUMBERS,XCMPLX_0,NAT_1,NAT_D,SETFAM_1,ORDINAL1,ORDINAL2,MCART_1,DOMAIN_1,PARTFUN1,FUNCOP_1,STRUCT_0,ORDERS_2,EQREL_1,MSUALG_5,FINSEQ_1,FINSEQ_2,SEQ_4,LATTICES,LATTICE3,BINOP_1,YELLOW_0,WAYBEL_0,YELLOW_2,ABIAN,XXREAL_0,CKB4,CKB13,CKB16,CKB18,CKB20,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB31,CKB32,CKB35,CKB37,CKB42,CKB44,CKB50,CKB51,CKB53,CKB54,CKB60,CKB67,CKB69,CKB70,CKB71,CKB73;
definitions TARSKI,LATTICE3,FUNCOP_1,WAYBEL_0,XBOOLE_0,BINOP_1,FINSEQ_1,FINSEQ_2,CKB4,CKB13,CKB20,CKB23,CKB27,CKB28,CKB29,CKB32,CKB35,CKB37,CKB42,CKB44,CKB50,CKB51,CKB53,CKB54,CKB67,CKB69,CKB71,CKB73;
theorems EQREL_1,RELAT_1,RELAT_2,FINSEQ_1,FINSEQ_2,MSUALG_5,ORDERS_2,TARSKI,ENUMSET1,ORDINAL1,ORDINAL3,WELLORD2,TREES_2,PARTFUN1,GRFUNC_1,FUNCT_6,MCART_1,FINSEQ_5,NAT_1,INT_1,BINOP_1,ZFMISC_1,FUNCT_1,FUNCT_2,FILTER_0,LATTICES,LATTICE3,YELLOW_0,YELLOW_2,YELLOW_3,YELLOW_5,WAYBEL_0,WAYBEL_1,WAYBEL_6,RELSET_1,CARD_1,FINSEQ_3,SETFAM_1,XBOOLE_0,XBOOLE_1,ORDERS_1,FUNCOP_1,XREAL_1,XXREAL_0,XXREAL_2,XREAL_0,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB32,CKB33,CKB34,CKB35,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB69,CKB71,CKB72,CKB73,CKB74,CKB75;
schemes DOMAIN_1,FUNCT_2,RELSET_1,RECDEF_1,ORDINAL2,NAT_1,FINSEQ_1,CLASSES1,BINOP_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,PARTFUN1,FUNCOP_1,XREAL_0,CARD_1,MEMBERED,FINSEQ_1,ABIAN,STRUCT_0,LATTICES,LATTICE3,YELLOW_0,YELLOW_1,RELAT_1,XXREAL_2,RELSET_1,FINSEQ_2,FUNCT_1,CKB5,CKB14,CKB15,CKB17,CKB19,CKB30,CKB36,CKB48,CKB68;
constructors SETFAM_1,BINOP_1,DOMAIN_1,ORDINAL2,NAT_1,CLASSES1,SEQ_4,FINSOP_1,FUNCT_6,RFUNCT_3,BINARITH,ABIAN,LATTICE3,MSUALG_5,YELLOW_2,NAT_D,RELSET_1,CKB4,CKB20,CKB23,CKB26,CKB27,CKB28,CKB29,CKB32,CKB35,CKB37,CKB42,CKB44,CKB50,CKB51,CKB53,CKB54,CKB60,CKB67,CKB69,CKB70,CKB71,CKB73;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve L for  lower-bounded LATTICE;
definition
let L;
func BasicDF L -> (distance_function of (the carrier of L),L) means 
:Def22: (for x,y being (Element of L) holds ((x <> y implies ( it . (x,y) ) = ( x "\/" y )) & (x = y implies ( it . (x,y) ) = ( Bottom L ))));
existence
proof
defpred X[ (Element of L),(Element of L),set ]
 means
(($1 = $2 implies $3 = ( Bottom L )) & ($1 <> $2 implies $3 = ( $1 "\/" $2 )));
set A = (the carrier of L);
A1: (for x,y being (Element of L) holds (ex z being (Element of L) st X[ x,y,z ]))
proof
let x being (Element of L);
let y being (Element of L);
per cases ;
suppose A2: x = y;

take ( Bottom L );
thus thesis by A2;
end;
suppose A3: x <> y;

take ( x "\/" y );
thus thesis by A3;
end;
end;
consider f being (Function of [: (the carrier of L),(the carrier of L) :],(the carrier of L)) such that A4: (for x,y being (Element of L) holds X[ x,y,( f . (x,y) ) ]) from BINOP_1:sch 3(A1);
reconsider f as (BiFunction of A,L);
A5: f is  zeroed
proof
let x being (Element of A);
thus thesis by A4;
end;
A6: f is  u.t.i.
proof
let x being (Element of A);
let y being (Element of A);
let z being (Element of A);
reconsider x9 = x,y9 = y,z9 = z as (Element of L);
per cases ;
suppose A7: x = z;

( ( f . (x,y) ) "\/" ( f . (y,z) ) ) >= ( Bottom L ) by YELLOW_0:44;
hence thesis by A4,A7;
end;
suppose A8: x <> z;

thus ( ( f . (x,y) ) "\/" ( f . (y,z) ) ) >= ( f . (x,z) )
proof
per cases ;
suppose A9: x = y;

( x9 "\/" z9 ) >= ( x9 "\/" z9 ) by ORDERS_2:1;
then ( f . (x,z) ) >= ( x9 "\/" z9 ) by A4,A8;
then ( ( Bottom L ) "\/" ( f . (x,z) ) ) >= ( x9 "\/" z9 ) by WAYBEL_1:3;
then ( ( f . (x,y) ) "\/" ( f . (y,z) ) ) >= ( x9 "\/" z9 ) by A4,A9;
hence thesis by A4,A8;
end;
suppose A10: x <> y;

( ( x9 "\/" y9 ) "\/" ( f . (y,z) ) ) >= ( x9 "\/" z9 )
proof
per cases ;
suppose A11: y = z;

( x9 "\/" y9 ) >= ( x9 "\/" y9 ) by ORDERS_2:1;
then ( ( Bottom L ) "\/" ( x9 "\/" y9 ) ) >= ( x9 "\/" z9 ) by A11,WAYBEL_1:3;
hence thesis by A4,A11;
end;
suppose A12: y <> z;

( ( x9 "\/" z9 ) "\/" y9 ) = ( ( x9 "\/" z9 ) "\/" ( y9 "\/" y9 ) ) by YELLOW_5:1
.= ( x9 "\/" ( z9 "\/" ( y9 "\/" y9 ) ) ) by LATTICE3:14
.= ( x9 "\/" ( y9 "\/" ( y9 "\/" z9 ) ) ) by LATTICE3:14
.= ( ( x9 "\/" y9 ) "\/" ( y9 "\/" z9 ) ) by LATTICE3:14;
then ( ( x9 "\/" y9 ) "\/" ( y9 "\/" z9 ) ) >= ( x9 "\/" z9 ) by YELLOW_0:22;
hence thesis by A4,A12;
end;
end;
then ( ( f . (x,y) ) "\/" ( f . (y,z) ) ) >= ( x9 "\/" z9 ) by A4,A10;
hence thesis by A4,A8;
end;
end;

end;
end;
f is  symmetric
proof
let x being (Element of A);
let y being (Element of A);
reconsider x9 = x,y9 = y as (Element of L);
per cases ;
suppose x = y;

hence thesis;
end;
suppose A13: x <> y;

hence ( f . (x,y) ) = ( y9 "\/" x9 ) by A4
.= ( f . (y,x) ) by A4,A13;
end;
end;
then reconsider f as (distance_function of A,L) by A5,A6;
take f;
thus thesis by A4;
end;
uniqueness
proof
let f1 being (distance_function of (the carrier of L),L);
let f2 being (distance_function of (the carrier of L),L);
assume that
A14: (for x,y being (Element of L) holds ((x <> y implies ( f1 . (x,y) ) = ( x "\/" y )) & (x = y implies ( f1 . (x,y) ) = ( Bottom L ))))
and
A15: (for x,y being (Element of L) holds ((x <> y implies ( f2 . (x,y) ) = ( x "\/" y )) & (x = y implies ( f2 . (x,y) ) = ( Bottom L ))));
A16: (for z being set holds (z in ( dom f1 ) implies ( f1 . z ) = ( f2 . z )))
proof
let z being set;
assume A17: z in ( dom f1 );
then consider x,y being set such that A18: z = [ x,y ] by RELAT_1:def 1;
reconsider x,y as (Element of L) by A17,A18,ZFMISC_1:87;
per cases ;
suppose A19: x = y;

thus ( f1 . z ) = ( f1 . (x,y) ) by A18
.= ( Bottom L ) by A14,A19
.= ( f2 . (x,y) ) by A15,A19
.= ( f2 . z ) by A18;
end;
suppose A20: x <> y;

thus ( f1 . z ) = ( f1 . (x,y) ) by A18
.= ( x "\/" y ) by A14,A20
.= ( f2 . (x,y) ) by A15,A20
.= ( f2 . z ) by A18;
end;
end;
( dom f1 ) = [: (the carrier of L),(the carrier of L) :] by FUNCT_2:def 1
.= ( dom f2 ) by FUNCT_2:def 1;
hence f1 = f2 by A16,FUNCT_1:2;
end;
end;
