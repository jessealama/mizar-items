environ
vocabularies NUMBERS,VECTSP_1,RLSUB_1,NAT_1,XBOOLE_0,STRUCT_0,SUBSET_1,RLVECT_2,FINSEQ_1,FUNCT_2,RELAT_1,CARD_3,VALUED_1,FUNCT_1,PARTFUN1,SUPINF_2,ORDINAL4,TARSKI,ARYTM_3,ARYTM_1,CLASSES1,FINSET_1,RLVECT_3,CARD_1,XXREAL_0,FINSEQ_4,RLVECT_5,RLSUB_2;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,DOMAIN_1,STRUCT_0,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,FINSEQ_1,FINSEQ_3,FINSEQ_4,CLASSES1,RLVECT_1,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_5,VECTSP_7,MATRLIN,XXREAL_0;
definitions TARSKI,SUBSET_1,STRUCT_0;
theorems TARSKI,ENUMSET1,SUBSET_1,NAT_1,CARD_1,CARD_2,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSET_1,RFINSEQ,RLVECT_1,VECTSP_1,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,MATRLIN,XBOOLE_0,XBOOLE_1,RLVECT_2,VECTSP_2,ZFMISC_1,XREAL_1,XXREAL_0,STRUCT_0,PARTFUN1,RELAT_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
schemes NAT_1,FINSEQ_1,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,VECTSP_1,VECTSP_7,MATRLIN,CARD_1,RELSET_1,CKB1,CKB13;
constructors FINSEQ_4,XXREAL_0,NAT_1,REALSET1,RFINSEQ,VECTSP_5,VECTSP_6,VECTSP_7,CLASSES1,MATRLIN,RELSET_1;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve GF for Field;
reserve V for (VectSp of GF);
reserve x for set;
theorem
Th22: (for A,B being  finite (Subset of V) holds (for v being (Vector of V) holds ((v in ( Lin ( A \/ B ) ) & (not v in ( Lin B ))) implies (ex w being (Vector of V) st (w in A & w in ( Lin ( ( ( A \/ B ) \ { w } ) \/ { v } ) ))))))
proof
let A being  finite (Subset of V);
let B being  finite (Subset of V);
let v being (Vector of V);
assume that
A1: v in ( Lin ( A \/ B ) )
and
A2: (not v in ( Lin B ));
consider L being (Linear_Combination of ( A \/ B )) such that A3: v = ( Sum L ) by A1,VECTSP_7:7;
v in { v } by TARSKI:def 1;
then v in ( Lin { v } ) by VECTSP_7:8;
then consider Lv being (Linear_Combination of { v }) such that A4: v = ( Sum Lv ) by VECTSP_7:7;
A5: ( Carrier L ) c= ( A \/ B ) by VECTSP_6:def 4;
now
assume A6: (for w being (Vector of V) holds (w in A implies ( L . w ) = ( 0. GF )));
now
let x being set;
assume that
A7: x in ( Carrier L )
and
A8: x in A;
(ex u being (Vector of V) st (x = u & ( L . u ) <> ( 0. GF ))) by A7,VECTSP_6:1;
hence contradiction by A6,A8;
end;
then ( Carrier L ) misses A by XBOOLE_0:3;
then ( Carrier L ) c= B by A5,XBOOLE_1:73;
then L is (Linear_Combination of B) by VECTSP_6:def 4;
hence contradiction by A2,A3,VECTSP_7:7;
end;
then consider w being (Vector of V) such that A9: w in A and A10: ( L . w ) <> ( 0. GF );
set a = ( L . w );
take w;
consider F being (FinSequence of (the carrier of V)) such that A11: F is  one-to-one and A12: ( rng F ) = ( Carrier L ) and A13: ( Sum L ) = ( Sum ( L (#) F ) ) by VECTSP_6:def 6;
A14: w in ( Carrier L ) by A10,VECTSP_6:1;
then reconsider Fw1 = ( F -| w ) as (FinSequence of (the carrier of V)) by A12,FINSEQ_4:41;
reconsider Fw2 = ( F |-- w ) as (FinSequence of (the carrier of V)) by A12,A14,FINSEQ_4:50;
A15: ( rng Fw1 ) misses ( rng Fw2 ) by A11,A12,A14,FINSEQ_4:57;
set Fw = ( Fw1 ^ Fw2 );
F just_once_values w by A11,A12,A14,FINSEQ_4:8;
then A16: Fw = ( F - { w } ) by FINSEQ_4:54;
then A17: ( rng Fw ) = ( ( Carrier L ) \ { w } ) by A12,FINSEQ_3:65;
F = ( ( ( F -| w ) ^ <* w *> ) ^ ( F |-- w ) ) by A12,A14,FINSEQ_4:51;
then F = ( Fw1 ^ ( <* w *> ^ Fw2 ) ) by FINSEQ_1:32;
then ( L (#) F ) = ( ( L (#) Fw1 ) ^ ( L (#) ( <* w *> ^ Fw2 ) ) ) by VECTSP_6:13
.= ( ( L (#) Fw1 ) ^ ( ( L (#) <* w *> ) ^ ( L (#) Fw2 ) ) ) by VECTSP_6:13
.= ( ( ( L (#) Fw1 ) ^ ( L (#) <* w *> ) ) ^ ( L (#) Fw2 ) ) by FINSEQ_1:32
.= ( ( ( L (#) Fw1 ) ^ <* ( a * w ) *> ) ^ ( L (#) Fw2 ) ) by VECTSP_6:10;
then A18: ( Sum ( L (#) F ) ) = ( Sum ( ( L (#) Fw1 ) ^ ( <* ( a * w ) *> ^ ( L (#) Fw2 ) ) ) ) by FINSEQ_1:32
.= ( ( Sum ( L (#) Fw1 ) ) + ( Sum ( <* ( a * w ) *> ^ ( L (#) Fw2 ) ) ) ) by RLVECT_1:41
.= ( ( Sum ( L (#) Fw1 ) ) + ( ( Sum <* ( a * w ) *> ) + ( Sum ( L (#) Fw2 ) ) ) ) by RLVECT_1:41
.= ( ( Sum ( L (#) Fw1 ) ) + ( ( Sum ( L (#) Fw2 ) ) + ( a * w ) ) ) by RLVECT_1:44
.= ( ( ( Sum ( L (#) Fw1 ) ) + ( Sum ( L (#) Fw2 ) ) ) + ( a * w ) ) by RLVECT_1:def 3
.= ( ( Sum ( ( L (#) Fw1 ) ^ ( L (#) Fw2 ) ) ) + ( a * w ) ) by RLVECT_1:41
.= ( ( Sum ( L (#) ( Fw1 ^ Fw2 ) ) ) + ( a * w ) ) by VECTSP_6:13;
consider K being (Linear_Combination of V) such that A19: ( Carrier K ) = ( ( rng Fw ) /\ ( Carrier L ) ) and A20: ( L (#) Fw ) = ( K (#) Fw ) by CKB6:1;
( rng Fw ) = ( ( rng F ) \ { w } ) by A16,FINSEQ_3:65;
then A21: ( Carrier K ) = ( rng Fw ) by A12,A19,XBOOLE_1:28;
A22: ( ( Carrier L ) \ { w } ) c= ( ( A \/ B ) \ { w } ) by A5,XBOOLE_1:33;
then reconsider K as (Linear_Combination of ( ( A \/ B ) \ { w } )) by A17,A21,VECTSP_6:def 4;
set LC = ( ( a " ) * ( ( - K ) + Lv ) );
( Carrier ( ( - K ) + Lv ) ) c= ( ( Carrier ( - K ) ) \/ ( Carrier Lv ) ) by VECTSP_6:23;
then A23: ( Carrier ( ( - K ) + Lv ) ) c= ( ( Carrier K ) \/ ( Carrier Lv ) ) by VECTSP_6:38;
( Carrier Lv ) c= { v } by VECTSP_6:def 4;
then ( ( Carrier K ) \/ ( Carrier Lv ) ) c= ( ( ( A \/ B ) \ { w } ) \/ { v } ) by A17,A21,A22,XBOOLE_1:13;
then (( Carrier ( ( a " ) * ( ( - K ) + Lv ) ) ) c= ( Carrier ( ( - K ) + Lv ) ) & ( Carrier ( ( - K ) + Lv ) ) c= ( ( ( A \/ B ) \ { w } ) \/ { v } )) by A23,VECTSP_6:28,XBOOLE_1:1;
then ( Carrier LC ) c= ( ( ( A \/ B ) \ { w } ) \/ { v } ) by XBOOLE_1:1;
then A24: LC is (Linear_Combination of ( ( ( A \/ B ) \ { w } ) \/ { v } )) by VECTSP_6:def 4;
(Fw1 is  one-to-one & Fw2 is  one-to-one) by A11,A12,A14,FINSEQ_4:52,FINSEQ_4:53;
then Fw is  one-to-one by A15,FINSEQ_3:91;
then ( Sum ( K (#) Fw ) ) = ( Sum K ) by A21,VECTSP_6:def 6;
then ( ( a " ) * v ) = ( ( ( a " ) * ( Sum K ) ) + ( ( a " ) * ( a * w ) ) ) by A3,A13,A18,A20,VECTSP_1:def 14
.= ( ( ( a " ) * ( Sum K ) ) + w ) by A10,VECTSP_1:20;
then w = ( ( ( a " ) * v ) - ( ( a " ) * ( Sum K ) ) ) by VECTSP_2:2
.= ( ( a " ) * ( v - ( Sum K ) ) ) by VECTSP_1:23
.= ( ( a " ) * ( ( - ( Sum K ) ) + v ) ) by RLVECT_1:def 11;
then w = ( ( a " ) * ( ( Sum ( - K ) ) + ( Sum Lv ) ) ) by A4,VECTSP_6:46
.= ( ( a " ) * ( Sum ( ( - K ) + Lv ) ) ) by VECTSP_6:44
.= ( Sum ( ( a " ) * ( ( - K ) + Lv ) ) ) by VECTSP_6:45;
hence thesis by A9,A24,VECTSP_7:7;
end;
