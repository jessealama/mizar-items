environ
vocabularies NUMBERS,SUBSET_1,XBOOLE_0,FINSEQ_1,XXREAL_0,FUNCT_1,RELAT_1,TARSKI,VALUED_0,CARD_1,ARYTM_3,ORDINAL1,CLASSES1,ZFMISC_1,ORDINAL2,FUNCOP_1,MCART_1,NAT_1,ORDINAL4,ARYTM_1,REAL_1,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,MCART_1,SUBSET_1,NUMBERS,XXREAL_0,REAL_1,NAT_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCOP_1,ORDINAL1,ORDINAL2,CLASSES1,FINSEQ_1,FUNCT_2,BINOP_1,DOMAIN_1,VALUED_0,CKB2;
definitions TARSKI,BINOP_1;
theorems TARSKI,NAT_1,FUNCT_1,FINSEQ_1,FUNCT_2,RELAT_1,XBOOLE_1,FUNCOP_1,XREAL_1,XXREAL_0,ORDINAL1,CLASSES1,ORDINAL2,XBOOLE_0,ZFMISC_1,MCART_1,PARTFUN1,CKB1;
schemes NAT_1,FUNCT_1,FINSEQ_1,BINOP_1,CLASSES1,ORDINAL1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,CARD_1,NUMBERS,RELSET_1,INT_1,XCMPLX_0,FINSEQ_1,VALUED_0;
constructors BINOP_1,DOMAIN_1,FUNCOP_1,XXREAL_0,REAL_1,NAT_1,FINSEQ_1,VALUED_0,CLASSES1,ORDINAL2,RELSET_1,CKB2;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve x for set;
reserve y for set;
reserve z for set;
reserve p for FinSequence;
scheme RecEx { A() -> set,P[set,set,set] } : (ex f being Function st ((( dom f ) = ( NAT ) & ( f . ( 0 ) ) = A()) & (for n being (Element of ( NAT )) holds P[ n,( f . n ),( f . ( n + 1 ) ) ])))
provided
A1: (for n being (Element of ( NAT )) holds (for x being set holds (ex y being set st P[ n,x,y ])))
proof
defpred Q[ set,set,set ]
 means
(ex O2 being Ordinal st ((O2 = $3 & (for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of $2 ) ) implies (ex Y being set st (Y c= ( Rank O2 ) & P[ n,X,Y ])))))) & (for O being Ordinal holds ((for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of $2 ) ) implies (ex Y being set st (Y c= ( Rank O ) & P[ n,X,Y ]))))) implies O2 c= O))));
A2: (for n being (Element of ( NAT )) holds (for x being set holds (ex y being set st Q[ n,x,y ])))
proof
defpred Y[ set,set ]
 means
(for m being (Element of ( NAT )) holds (ex y being set st (($2 is Ordinal & y c= ( Rank ( the_rank_of $2 ) )) & P[ m,$1,y ])));
let n being (Element of ( NAT ));
let x being set;
defpred X[ Ordinal ]
 means
(for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of x ) ) implies (ex Y being set st (Y c= ( Rank $1 ) & P[ n,X,Y ])))));
A3: (for x9 being set holds (x9 in ( bool ( Rank ( the_rank_of x ) ) ) implies (ex o being set st Y[ x9,o ])))
proof
let x9 being set;
assume x9 in ( bool ( Rank ( the_rank_of x ) ) );
defpred X[ set,set ]
 means
(ex y being set st (($2 is Ordinal & y c= ( Rank ( the_rank_of $2 ) )) & P[ $1,x9,y ]));
A4: (for e being set holds (e in ( NAT ) implies (ex u being set st X[ e,u ])))
proof
let i being set;
assume i in ( NAT );
then reconsider i9 = i as (Element of ( NAT ));
thus (ex o being set st (ex y being set st ((o is Ordinal & y c= ( Rank ( the_rank_of o ) )) & P[ i,x9,y ])))
proof
consider y being set such that A5: P[ i9,x9,y ] by A1;
take o = ( the_rank_of y );
take y;
thus o is Ordinal;
( the_rank_of ( the_rank_of y ) ) = ( the_rank_of y ) by CLASSES1:73;
hence y c= ( Rank ( the_rank_of o ) ) by CLASSES1:65;
thus thesis by A5;
end;

end;
consider h being Function such that A6: ( dom h ) = ( NAT ) and A7: (for i being set holds (i in ( NAT ) implies X[ i,( h . i ) ])) from CLASSES1:sch 1(A4);
take o = ( sup ( rng h ) );
thus (for m being (Element of ( NAT )) holds (ex y being set st ((o is Ordinal & y c= ( Rank ( the_rank_of o ) )) & P[ m,x9,y ])))
proof
let m being (Element of ( NAT ));
consider y being set such that A8: ( h . m ) is Ordinal and A9: y c= ( Rank ( the_rank_of ( h . m ) ) ) and A10: P[ m,x9,y ] by A7;
reconsider O = ( h . m ) as Ordinal by A8;
( h . m ) in ( rng h ) by A6,FUNCT_1:def 3;
then ( h . m ) in ( sup ( rng h ) ) by A8,ORDINAL2:19;
then ( h . m ) c= o by ORDINAL1:def 2;
then A11: ( Rank O ) c= ( Rank o ) by CLASSES1:37;
take y;
thus o is Ordinal;
y c= ( Rank O ) by A9,CLASSES1:73;
then y c= ( Rank o ) by A11,XBOOLE_1:1;
hence y c= ( Rank ( the_rank_of o ) ) by CLASSES1:73;
thus thesis by A10;
end;

end;
consider f being Function such that A12: ( dom f ) = ( bool ( Rank ( the_rank_of x ) ) ) and A13: (for x9 being set holds (x9 in ( bool ( Rank ( the_rank_of x ) ) ) implies Y[ x9,( f . x9 ) ])) from CLASSES1:sch 1(A3);
A14: (ex O being Ordinal st X[ O ])
proof
take O2 = ( sup ( rng f ) );
thus (for X being set holds (for m being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of x ) ) implies (ex Y being set st (Y c= ( Rank O2 ) & P[ m,X,Y ])))))
proof
let X being set;
let m being (Element of ( NAT ));
assume A15: X c= ( Rank ( the_rank_of x ) );
then consider Y being set such that A16: ( f . X ) is Ordinal and A17: Y c= ( Rank ( the_rank_of ( f . X ) ) ) and A18: P[ m,X,Y ] by A13;
reconsider O = ( f . X ) as Ordinal by A16;
( f . X ) in ( rng f ) by A12,A15,FUNCT_1:def 3;
then ( f . X ) in ( sup ( rng f ) ) by A16,ORDINAL2:19;
then ( f . X ) c= O2 by ORDINAL1:def 2;
then A19: ( Rank O ) c= ( Rank O2 ) by CLASSES1:37;
take Y;
( the_rank_of O ) = O by CLASSES1:73;
hence Y c= ( Rank O2 ) by A17,A19,XBOOLE_1:1;
thus thesis by A18;
end;

end;
consider O2 being Ordinal such that A20: (X[ O2 ] & (for O being Ordinal holds (X[ O ] implies O2 c= O))) from ORDINAL1:sch 1(A14);
take O2;
thus thesis by A20;
end;
A21: (for n being (Element of ( NAT )) holds (for x,y1,y2 being set holds ((Q[ n,x,y1 ] & Q[ n,x,y2 ]) implies y1 = y2)))
proof
let n being (Element of ( NAT ));
let x being set,y1 being set,y2 being set;
assume that
A22: Q[ n,x,y1 ]
and
A23: Q[ n,x,y2 ];
consider O2 being Ordinal such that A24: O2 = y2 and A25: ((for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of x ) ) implies (ex Y being set st (Y c= ( Rank O2 ) & P[ n,X,Y ]))))) & (for O being Ordinal holds ((for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of x ) ) implies (ex Y being set st (Y c= ( Rank O ) & P[ n,X,Y ]))))) implies O2 c= O))) by A23;
consider O1 being Ordinal such that A26: O1 = y1 and A27: ((for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of x ) ) implies (ex Y being set st (Y c= ( Rank O1 ) & P[ n,X,Y ]))))) & (for O being Ordinal holds ((for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of x ) ) implies (ex Y being set st (Y c= ( Rank O ) & P[ n,X,Y ]))))) implies O1 c= O))) by A22;
(O1 c= O2 & O2 c= O1) by A27,A25;
hence thesis by A26,A24,XBOOLE_0:def 10;
end;
(ex f being Function st ((( dom f ) = ( NAT ) & ( f . ( 0 ) ) = ( the_rank_of A() )) & (for n being (Element of ( NAT )) holds Q[ n,( f . n ),( f . ( n + 1 ) ) ])))
proof
deffunc S((Element of ( NAT ))) = { k: k <= $1 };
A28: (for p,q being Function holds (for k holds ((((( dom p ) = S(k) & ( dom q ) = S(( k + 1 ))) & ( p . ( 0 ) ) = ( q . ( 0 ) )) & (for n holds (n < k implies (Q[ n,( p . n ),( p . ( n + 1 ) ) ] & Q[ n,( q . n ),( q . ( n + 1 ) ) ])))) implies ( p . k ) = ( q . k ))))
proof
let p being Function,q being Function;
let k;
defpred Z[ (Element of ( NAT )) ]
 means
($1 <= k implies ( p . $1 ) = ( q . $1 ));
assume that
( dom p ) = S(k)
and
( dom q ) = S(( k + 1 ))
and
A29: ( p . ( 0 ) ) = ( q . ( 0 ) )
and
A30: (for n holds (n < k implies (Q[ n,( p . n ),( p . ( n + 1 ) ) ] & Q[ n,( q . n ),( q . ( n + 1 ) ) ])));
A31: (for n holds (Z[ n ] implies Z[ ( n + 1 ) ]))
proof
let n;
assume A32: (n <= k implies ( p . n ) = ( q . n ));
assume ( n + 1 ) <= k;
then A33: n < k by NAT_1:13;
then A34: Q[ n,( p . n ),( p . ( n + 1 ) ) ] by A30;
Q[ n,( p . n ),( q . ( n + 1 ) ) ] by A30,A32,A33;
hence thesis by A21,A34;
end;
A35: Z[ ( 0 ) ] by A29;
(for n holds Z[ n ]) from NAT_1:sch 1(A35,A31);
hence thesis;
end;
A36: (for n holds (ex p being Function st ((( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ])))))
proof
defpred Z[ (Element of ( NAT )) ]
 means
(ex p being Function st ((( dom p ) = S($1) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < $1 implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]))));
A37: (for n holds (Z[ n ] implies Z[ ( n + 1 ) ]))
proof
let n;
given p being Function such that
( dom p ) = S(n)
and
A38: ( p . ( 0 ) ) = ( the_rank_of A() )
and
A39: (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]));

consider z such that A40: Q[ n,( p . n ),z ] by A2;
defpred ST[ set,set ]
 means
(for k holds (k = $1 implies ((k <= n implies $2 = ( p . k )) & (k = ( n + 1 ) implies $2 = z))));
A41: (for x holds (x in S(( n + 1 )) implies (ex y st ST[ x,y ])))
proof
let x;
assume x in S(( n + 1 ));
then A42: (ex m st (m = x & m <= ( n + 1 )));
then reconsider t = x as (Element of ( NAT ));
A43: (t <= n implies thesis)
proof
assume A44: t <= n;
take ( p . x );
let k;
assume A45: k = x;
hence (k <= n implies ( p . x ) = ( p . k ));
assume k = ( n + 1 );
then ( n + 1 ) <= ( n + ( 0 ) ) by A44,A45;
hence thesis by XREAL_1:6;
end;
(t = ( n + 1 ) implies thesis)
proof
assume A46: t = ( n + 1 );
take z;
let k;
assume that
A47: k = x;
thus (k <= n implies z = ( p . k ))
proof
assume k <= n;
then ( n + 1 ) <= ( n + ( 0 ) ) by A46,A47;
hence thesis by XREAL_1:6;
end;

thus thesis;
end;
hence thesis by A42,A43,NAT_1:8;
end;
consider q being Function such that A48: (( dom q ) = S(( n + 1 )) & (for x holds (x in S(( n + 1 )) implies ST[ x,( q . x ) ]))) from CLASSES1:sch 1(A41);
take q;
thus ( dom q ) = S(( n + 1 )) by A48;
( 0 ) in S(( n + 1 ));
hence ( q . ( 0 ) ) = ( the_rank_of A() ) by A38,A48;
let k;
assume that
A49: k < ( n + 1 );
A50:now
A51: ( k + 1 ) <= ( n + 1 ) by A49,NAT_1:13;
assume k <> n;
then ( k + 1 ) <> ( n + 1 );
then A52: ( k + 1 ) <= n by A51,NAT_1:8;
then A53: k < n by NAT_1:13;
( k + 1 ) in S(( n + 1 )) by A51;
then A54: ( q . ( k + 1 ) ) = ( p . ( k + 1 ) ) by A48,A52;
k in S(( n + 1 )) by A49;
then ( p . k ) = ( q . k ) by A48,A53;
hence thesis by A39,A54,A53;
end;
now
assume A55: k = n;
then k <= ( n + 1 ) by NAT_1:11;
then k in S(( n + 1 ));
then A56: ( q . k ) = ( p . k ) by A48,A55;
( k + 1 ) in S(( n + 1 )) by A55;
then ( q . ( k + 1 ) ) = z by A48,A55;
hence thesis by A40,A55,A56;
end;
hence thesis by A50;
end;
A57: Z[ ( 0 ) ]
proof
set s = ( S(( 0 )) --> ( the_rank_of A() ) );
take s;
thus ( dom s ) = S(( 0 )) by FUNCOP_1:13;
( 0 ) in S(( 0 ));
hence ( s . ( 0 ) ) = ( the_rank_of A() ) by FUNCOP_1:7;
thus thesis;
end;
thus (for n holds Z[ n ]) from NAT_1:sch 1(A57,A37);
end;
(ex f being Function st (( dom f ) = ( NAT ) & (for n holds (ex p being Function st (((( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]))) & ( f . n ) = ( p . n ))))))
proof
defpred Z[ set,set ]
 means
(for n holds (n = $1 implies (ex p being Function st (((( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]))) & $2 = ( p . n )))));
A58: (for x holds (x in ( NAT ) implies (ex y st Z[ x,y ])))
proof
let x;
assume x in ( NAT );
then reconsider n = x as (Element of ( NAT ));
consider p being Function such that A59: ((( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]))) by A36;
take ( p . n );
let k;
assume that
A60: k = x;
take p;
thus thesis by A59,A60;
end;
consider f being Function such that A61: (( dom f ) = ( NAT ) & (for x holds (x in ( NAT ) implies Z[ x,( f . x ) ]))) from CLASSES1:sch 1(A58);
take f;
thus ( dom f ) = ( NAT ) by A61;
let n;
consider p being Function such that A62: (( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) and A63: (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ])) and A64: ( f . n ) = ( p . n ) by A61;
take p;
thus (( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) by A62;
thus (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ])) by A63;
thus thesis by A64;
end;
then consider f being Function such that A65: ( dom f ) = ( NAT ) and A66: (for n holds (ex p being Function st (((( dom p ) = S(n) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < n implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]))) & ( f . n ) = ( p . n ))));
take f;
thus ( dom f ) = ( NAT ) by A65;
(ex p being Function st (((( dom p ) = S(( 0 )) & ( p . ( 0 ) ) = ( the_rank_of A() )) & (for k holds (k < ( 0 ) implies Q[ k,( p . k ),( p . ( k + 1 ) ) ]))) & ( f . ( 0 ) ) = ( p . ( 0 ) ))) by A66;
hence ( f . ( 0 ) ) = ( the_rank_of A() );
let d being (Element of ( NAT ));
consider p being Function such that A67: ( dom p ) = S(( d + 1 )) and A68: ( p . ( 0 ) ) = ( the_rank_of A() ) and A69: (for k holds (k < ( d + 1 ) implies Q[ k,( p . k ),( p . ( k + 1 ) ) ])) and A70: ( f . ( d + 1 ) ) = ( p . ( d + 1 ) ) by A66;
consider q being Function such that A71: ( dom q ) = S(d) and A72: ( q . ( 0 ) ) = ( the_rank_of A() ) and A73: (for k holds (k < d implies Q[ k,( q . k ),( q . ( k + 1 ) ) ])) and A74: ( f . d ) = ( q . d ) by A66;
(((( dom p ) = S(( d + 1 )) & ( dom q ) = S(d)) & ( p . ( 0 ) ) = ( q . ( 0 ) )) & (for k holds (k < d implies (Q[ k,( q . k ),( q . ( k + 1 ) ) ] & Q[ k,( p . k ),( p . ( k + 1 ) ) ]))))
proof
thus ( dom p ) = S(( d + 1 )) by A67;
thus ( dom q ) = S(d) by A71;
thus ( p . ( 0 ) ) = ( q . ( 0 ) ) by A68,A72;
let k;
assume A75: k < d;
hence Q[ k,( q . k ),( q . ( k + 1 ) ) ] by A73;
d <= ( d + 1 ) by NAT_1:11;
then k < ( d + 1 ) by A75,XXREAL_0:2;
hence thesis by A69;
end;
then ( p . d ) = ( q . d ) by A28;
hence thesis by A69,A70,A74,XREAL_1:29;
end;
then consider g being Function such that A76: ( dom g ) = ( NAT ) and A77: ( g . ( 0 ) ) = ( the_rank_of A() ) and A78: (for n being (Element of ( NAT )) holds Q[ n,( g . n ),( g . ( n + 1 ) ) ]);
defpred X[ set,set ]
 means
(ex i being (Element of ( NAT )) st (((i = ( $1 `2 ) & P[ ( $1 `2 ),( $1 `1 ),( $2 `1 ) ]) & ( $2 `2 ) = ( i + 1 )) & (not (ex y being set st (P[ ( $1 `2 ),( $1 `1 ),y ] & ( the_rank_of y ) in ( the_rank_of ( $2 `1 ) ))))));
A79: (( [ A(),( 0 ) ] `1 ) = A() & ( [ A(),( 0 ) ] `2 ) = ( 0 )) by MCART_1:7;
set beta = ( sup ( rng g ) );
A80: (for x being set holds (x in [: ( Rank beta ),( NAT ) :] implies (ex u being set st X[ x,u ])))
proof
let x being set;
defpred X[ Ordinal ]
 means
(ex y being set st (y c= ( Rank $1 ) & P[ ( x `2 ),( x `1 ),y ]));
assume x in [: ( Rank beta ),( NAT ) :];
then consider a being set,b being set such that A81: a in ( Rank beta ) and A82: b in ( NAT ) and A83: x = [ a,b ] by ZFMISC_1:def 2;
reconsider b as (Element of ( NAT )) by A82;
A84: (( x `2 ) = b & ( x `1 ) = a) by A83,MCART_1:7;
( the_rank_of a ) in beta by A81,CLASSES1:66;
then consider alfa being Ordinal such that A85: alfa in ( rng g ) and A86: ( the_rank_of a ) c= alfa by ORDINAL2:21;
consider k being set such that A87: k in ( dom g ) and A88: alfa = ( g . k ) by A85,FUNCT_1:def 3;
reconsider k as (Element of ( NAT )) by A76,A87;
A89: Q[ k,alfa,( g . ( k + 1 ) ) ] by A78,A88;
then reconsider O2 = ( g . ( k + 1 ) ) as Ordinal;
a c= ( Rank alfa ) by A86,CLASSES1:65;
then a c= ( Rank ( the_rank_of alfa ) ) by CLASSES1:73;
then (ex y being set st (y c= ( Rank O2 ) & P[ ( x `2 ),( x `1 ),y ])) by A89,A84;
then A90: (ex O being Ordinal st X[ O ]);
consider O being Ordinal such that A91: X[ O ] and A92: (for O9 being Ordinal holds (X[ O9 ] implies O c= O9)) from ORDINAL1:sch 1(A90);
consider Y being set such that A93: Y c= ( Rank O ) and A94: P[ b,a,Y ] by A84,A91;
A95: ( the_rank_of Y ) c= O by A93,CLASSES1:65;
take u = [ Y,( b + 1 ) ];
take i = b;
thus i = ( x `2 ) by A83,MCART_1:7;
thus P[ ( x `2 ),( x `1 ),( u `1 ) ] by A84,A94,MCART_1:7;
thus ( u `2 ) = ( i + 1 ) by MCART_1:7;
given y being set such that
A96: P[ ( x `2 ),( x `1 ),y ]
and
A97: ( the_rank_of y ) in ( the_rank_of ( u `1 ) );

A98: y c= ( Rank ( the_rank_of y ) ) by CLASSES1:def 8;
( the_rank_of y ) in ( the_rank_of Y ) by A97,MCART_1:7;
hence contradiction by A92,A96,A95,A98,ORDINAL1:5;
end;
consider F being Function such that ( dom F ) = [: ( Rank beta ),( NAT ) :] and A99: (for x being set holds (x in [: ( Rank beta ),( NAT ) :] implies X[ x,( F . x ) ])) from CLASSES1:sch 1(A80);
deffunc U(Nat,set) = ( ( F . [ $2,$1 ] ) `1 );
consider f being Function such that A100: ( dom f ) = ( NAT ) and A101: ( f . ( 0 ) ) = A() and A102: (for n being Nat holds ( f . ( n + 1 ) ) = U(n,( f . n ))) from NAT_1:sch 11;
defpred X[ (Element of ( NAT )) ]
 means
( the_rank_of ( f . $1 ) ) in ( sup ( rng g ) );
( g . ( 0 ) ) in ( rng g ) by A76,FUNCT_1:def 3;
then A103: X[ ( 0 ) ] by A77,A101,ORDINAL2:19;
A104: (for n being (Element of ( NAT )) holds (X[ n ] implies X[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
assume A105: ( the_rank_of ( f . n ) ) in ( sup ( rng g ) );
then consider o1 being Ordinal such that A106: o1 in ( rng g ) and A107: ( the_rank_of ( f . n ) ) c= o1 by ORDINAL2:21;
( f . n ) in ( Rank ( sup ( rng g ) ) ) by A105,CLASSES1:66;
then A108: [ ( f . n ),n ] in [: ( Rank beta ),( NAT ) :] by ZFMISC_1:87;
consider m being set such that A109: m in ( dom g ) and A110: ( g . m ) = o1 by A106,FUNCT_1:def 3;
reconsider m as (Element of ( NAT )) by A76,A109;
consider o2 being Ordinal such that A111: o2 = ( g . ( m + 1 ) ) and A112: (for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of ( g . m ) ) ) implies (ex Y being set st (Y c= ( Rank o2 ) & P[ n,X,Y ]))))) and (for o being Ordinal holds ((for X being set holds (for n being (Element of ( NAT )) holds (X c= ( Rank ( the_rank_of ( g . m ) ) ) implies (ex Y being set st (Y c= ( Rank o ) & P[ n,X,Y ]))))) implies o2 c= o)) by A78;
( the_rank_of ( f . n ) ) c= ( the_rank_of ( g . m ) ) by A107,A110,CLASSES1:73;
then ( f . n ) c= ( Rank ( the_rank_of ( g . m ) ) ) by CLASSES1:65;
then consider YY being set such that A113: YY c= ( Rank o2 ) and A114: P[ n,( f . n ),YY ] by A112;
A115: ( the_rank_of YY ) c= o2 by A113,CLASSES1:65;
(( [ ( f . n ),n ] `1 ) = ( f . n ) & ( [ ( f . n ),n ] `2 ) = n) by MCART_1:7;
then (ex i being (Element of ( NAT )) st (((i = n & P[ n,( f . n ),( ( F . [ ( f . n ),n ] ) `1 ) ]) & ( ( F . [ ( f . n ),n ] ) `2 ) = ( i + 1 )) & (not (ex y being set st (P[ n,( f . n ),y ] & ( the_rank_of y ) in ( the_rank_of ( ( F . [ ( f . n ),n ] ) `1 ) )))))) by A99,A108;
then A116: ( the_rank_of ( ( F . [ ( f . n ),n ] ) `1 ) ) c= ( the_rank_of YY ) by A114,ORDINAL1:16;
( g . ( m + 1 ) ) in ( rng g ) by A76,FUNCT_1:def 3;
then A117: o2 in ( sup ( rng g ) ) by A111,ORDINAL2:19;
( f . ( n + 1 ) ) = ( ( F . [ ( f . n ),n ] ) `1 ) by A102;
hence thesis by A116,A115,A117,ORDINAL1:12,XBOOLE_1:1;
end;
A118: (for n being (Element of ( NAT )) holds X[ n ]) from NAT_1:sch 1(A103,A104);
defpred X[ (Element of ( NAT )) ]
 means
P[ $1,( f . $1 ),( f . ( $1 + 1 ) ) ];
A119: (for n being (Element of ( NAT )) holds (X[ n ] implies X[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
assume P[ n,( f . n ),( f . ( n + 1 ) ) ];
( the_rank_of ( f . ( n + 1 ) ) ) in ( sup ( rng g ) ) by A118;
then ( f . ( n + 1 ) ) in ( Rank ( sup ( rng g ) ) ) by CLASSES1:66;
then A120: [ ( f . ( n + 1 ) ),( n + 1 ) ] in [: ( Rank beta ),( NAT ) :] by ZFMISC_1:87;
(( [ ( f . ( n + 1 ) ),( n + 1 ) ] `1 ) = ( f . ( n + 1 ) ) & ( [ ( f . ( n + 1 ) ),( n + 1 ) ] `2 ) = ( n + 1 )) by MCART_1:7;
then (ex i being (Element of ( NAT )) st (((i = ( n + 1 ) & P[ ( n + 1 ),( f . ( n + 1 ) ),( ( F . [ ( f . ( n + 1 ) ),( n + 1 ) ] ) `1 ) ]) & ( ( F . [ ( f . ( n + 1 ) ),( n + 1 ) ] ) `2 ) = ( i + 1 )) & (not (ex y being set st (P[ ( n + 1 ),( f . ( n + 1 ) ),y ] & ( the_rank_of y ) in ( the_rank_of ( ( F . [ ( f . ( n + 1 ) ),( n + 1 ) ] ) `1 ) )))))) by A99,A120;
hence thesis by A102;
end;
take f;
thus ( dom f ) = ( NAT ) by A100;
thus ( f . ( 0 ) ) = A() by A101;
A() in ( Rank ( sup ( rng g ) ) ) by A101,A103,CLASSES1:66;
then [ A(),( 0 ) ] in [: ( Rank beta ),( NAT ) :] by ZFMISC_1:87;
then (ex i being (Element of ( NAT )) st (((i = ( [ A(),( 0 ) ] `2 ) & P[ ( 0 ),A(),( ( F . [ A(),( 0 ) ] ) `1 ) ]) & ( ( F . [ A(),( 0 ) ] ) `2 ) = ( i + 1 )) & (not (ex y being set st (P[ ( 0 ),A(),y ] & ( the_rank_of y ) in ( the_rank_of ( ( F . [ A(),( 0 ) ] ) `1 ) )))))) by A99,A79;
then A121: X[ ( 0 ) ] by A101,A102;
thus (for n being (Element of ( NAT )) holds X[ n ]) from NAT_1:sch 1(A121,A119);
end;
