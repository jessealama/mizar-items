environ
vocabularies UNIALG_1,NAT_1,XBOOLE_0,FINSEQ_1,ZFMISC_1,MCART_1,RELAT_1,FUNCT_1,FUNCT_2,PARTFUN1,FINSEQ_2,SUBSET_1,TARSKI,NUMBERS,STRUCT_0,CQC_SIM1,UNIALG_2,ORDINAL1,PBOOLE,FUNCOP_1,RLVECT_2,CARD_3,CARD_1,FINSEQ_4,FUNCT_5,PRALG_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,NAT_1,STRUCT_0,RELAT_1,FUNCT_1,FINSEQ_1,FUNCT_2,BINOP_1,FUNCOP_1,MCART_1,DOMAIN_1,PARTFUN1,FINSEQ_2,FUNCT_4,FUNCT_5,CARD_3,MARGREL1,DTCONSTR,UNIALG_1,UNIALG_2,PBOOLE,CKB1,CKB2,CKB3;
definitions TARSKI,UNIALG_1,UNIALG_2,FUNCT_1,PBOOLE,XBOOLE_0,BINOP_1,FINSEQ_2,FUNCOP_1,PARTFUN1,MARGREL1,CKB1,CKB2,CKB3;
theorems TARSKI,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,FUNCOP_1,UNIALG_1,DOMAIN_1,ZFMISC_1,MCART_1,UNIALG_2,FUNCT_2,PBOOLE,FUNCT_5,CARD_3,FUNCT_4,FINSEQ_3,RELAT_1,RELSET_1,ORDINAL1,XBOOLE_0,XBOOLE_1,MARGREL1,CARD_1,CKB1,CKB2,CKB3;
schemes FINSEQ_1,PARTFUN1,FUNCT_2,FUNCT_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,PARTFUN1,FUNCOP_1,FINSEQ_1,FINSEQ_2,CARD_3,PBOOLE,STRUCT_0,UNIALG_1,CARD_1,RELSET_1,MARGREL1;
constructors BINOP_1,DOMAIN_1,FUNCT_4,FUNCT_5,CARD_3,PBOOLE,UNIALG_2,DTCONSTR,STRUCT_0,RELSET_1,CKB1,CKB2,CKB3;
requirements BOOLE,SUBSET;
begin
reserve U1 for Universal_Algebra;
reserve U2 for Universal_Algebra;
reserve n for Nat;
reserve h1 for  homogeneous  quasi_total non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1));
reserve h2 for  homogeneous  quasi_total non empty (PartFunc of ( (the carrier of U2) * ),(the carrier of U2));
definition
let U1;
let U2;
assume A1: U1,U2 are_similar ;
func Opers (U1,U2) -> (PFuncFinSequence of [: (the carrier of U1),(the carrier of U2) :])
means
:Def4: (( len it ) = ( len (the charact of U1) ) & (for n holds (n in ( dom it ) implies (for h1 holds (for h2 holds ((h1 = ( (the charact of U1) . n ) & h2 = ( (the charact of U2) . n )) implies ( it . n ) = [[: h1,h2 :]]))))));
existence
proof
defpred P[ Nat,set ]
 means
(for h1 holds (for h2 holds ((h1 = ( (the charact of U1) . $1 ) & h2 = ( (the charact of U2) . $1 )) implies $2 = [[: h1,h2 :]])));
set l = ( len (the charact of U1) );
set c = [: (the carrier of U1),(the carrier of U2) :];
A2: ( dom (the charact of U2) ) = ( Seg ( len (the charact of U2) ) ) by FINSEQ_1:def 3;
A3: ( Seg l ) = ( dom (the charact of U1) ) by FINSEQ_1:def 3;
A4: (for m being Nat holds (m in ( Seg l ) implies (ex x being (Element of ( PFuncs (( c * ),c) )) st P[ m,x ])))
proof
let m being Nat;
assume A5: m in ( Seg l );
then reconsider f1 = ( (the charact of U1) . m ) as  homogeneous  quasi_total non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) by A3,MARGREL1:def 24,UNIALG_1:1;
( len (the charact of U1) ) = ( len (the charact of U2) ) by A1,UNIALG_2:1;
then reconsider f2 = ( (the charact of U2) . m ) as  homogeneous  quasi_total non empty (PartFunc of ( (the carrier of U2) * ),(the carrier of U2)) by A2,A5,MARGREL1:def 24,UNIALG_1:1;
reconsider F = [[: f1,f2 :]] as (Element of ( PFuncs (( c * ),c) )) by PARTFUN1:45;
take F;
let h1;
let h2;
assume (h1 = ( (the charact of U1) . m ) & h2 = ( (the charact of U2) . m ));
hence thesis;
end;
consider p being (FinSequence of ( PFuncs (( c * ),c) )) such that A6: ( dom p ) = ( Seg l ) and A7: (for m being Nat holds (m in ( Seg l ) implies P[ m,( p . m ) ])) from FINSEQ_1:sch 5(A4);
reconsider p as (PFuncFinSequence of c);
take p;
thus ( len p ) = ( len (the charact of U1) ) by A6,FINSEQ_1:def 3;
let n;
assume n in ( dom p );
hence thesis by A6,A7;
end;
uniqueness
proof
let x being (PFuncFinSequence of [: (the carrier of U1),(the carrier of U2) :]),y being (PFuncFinSequence of [: (the carrier of U1),(the carrier of U2) :]);
assume that
A8: ( len x ) = ( len (the charact of U1) )
and
A9: (for n holds (n in ( dom x ) implies (for h1 holds (for h2 holds ((h1 = ( (the charact of U1) . n ) & h2 = ( (the charact of U2) . n )) implies ( x . n ) = [[: h1,h2 :]])))))
and
A10: ( len y ) = ( len (the charact of U1) )
and
A11: (for n holds (n in ( dom y ) implies (for h1 holds (for h2 holds ((h1 = ( (the charact of U1) . n ) & h2 = ( (the charact of U2) . n )) implies ( y . n ) = [[: h1,h2 :]])))));
A12: ( dom x ) = ( Seg ( len (the charact of U1) ) ) by A8,FINSEQ_1:def 3;
now
let m being Nat;
assume A13: m in ( dom x );
then m in ( dom (the charact of U1) ) by A12,FINSEQ_1:def 3;
then reconsider h1 = ( (the charact of U1) . m ) as  homogeneous  quasi_total non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) by MARGREL1:def 24,UNIALG_1:1;
( Seg ( len (the charact of U2) ) ) = ( Seg ( len (the charact of U1) ) ) by A1,UNIALG_2:1;
then m in ( dom (the charact of U2) ) by A12,A13,FINSEQ_1:def 3;
then reconsider h2 = ( (the charact of U2) . m ) as  homogeneous  quasi_total non empty (PartFunc of ( (the carrier of U2) * ),(the carrier of U2)) by MARGREL1:def 24,UNIALG_1:1;
(m in ( dom y ) & ( x . m ) = [[: h1,h2 :]]) by A9,A10,A12,A13,FINSEQ_1:def 3;
hence ( x . m ) = ( y . m ) by A11;
end;
hence thesis by A8,A10,FINSEQ_2:9;
end;
end;
