environ
vocabularies NUMBERS,SUBSET_1,FINSEQ_1,EUCLID,SPRECT_2,RELAT_1,FINSEQ_5,FINSEQ_4,XXREAL_0,PARTFUN1,CARD_1,ARYTM_3,ARYTM_1,PRE_TOPC,TOPREAL1,JORDAN3,XBOOLE_0,FUNCT_1,GROUP_2,ORDINAL4,NAT_1,RLTOPSP1,TARSKI,RCOMP_1,SPPOL_1,FINSEQ_6,JORDAN9,PSCOMP_1,GRAPH_2,TOPREAL2,RELAT_2,MCART_1,GOBOARD1,JORDAN8,TREES_1,MATRIX_1,JORDAN1E;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_4,FINSEQ_5,MATRIX_1,FINSEQ_6,STRUCT_0,GRAPH_2,PRE_TOPC,TOPREAL2,CONNSP_1,COMPTS_1,RLTOPSP1,EUCLID,PSCOMP_1,SPRECT_2,GOBOARD1,TOPREAL1,SPPOL_1,JORDAN3,JORDAN8,JORDAN9,CKB8,CKB10;
definitions TARSKI,TOPREAL1,SPRECT_2,XBOOLE_0,PSCOMP_1,CKB8,CKB10;
theorems JORDAN8,PSCOMP_1,JORDAN1A,NAT_1,GOBOARD5,FINSEQ_1,FINSEQ_2,SPRECT_2,FINSEQ_4,FINSEQ_5,FINSEQ_6,GOBOARD7,SPPOL_2,REVROT_1,TOPREAL1,SPRECT_3,JORDAN5B,JORDAN3,JORDAN9,GOBOARD1,TARSKI,FINSEQ_3,FUNCT_1,TOPREAL5,JORDAN10,GRAPH_2,CARD_1,CARD_2,ENUMSET1,JORDAN1B,SPRECT_5,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,EUCLID,ORDINAL1,PARTFUN1,MATRIX_1,XREAL_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21;
registrations XBOOLE_0,RELSET_1,XXREAL_0,XREAL_0,MEMBERED,FINSEQ_1,FINSEQ_6,STRUCT_0,TOPREAL2,SPPOL_2,SPRECT_2,REVROT_1,TOPREAL6,JORDAN8,JORDAN1A,CARD_1,FUNCT_1,EUCLID,CKB12,CKB13,CKB14,CKB15,CKB22,CKB23;
constructors PARTFUN1,XXREAL_0,NAT_1,FINSEQ_4,NEWTON,BINARITH,FINSEQ_5,CONNSP_1,REALSET2,TOPREAL2,PSCOMP_1,GRAPH_2,JORDAN3,JORDAN8,GOBRD13,JORDAN9,NAT_D,RELSET_1,REAL_1,CKB8,CKB10;
requirements NUMERALS,BOOLE,SUBSET,REAL,ARITHM;
begin
reserve n for (Element of ( NAT ));
theorem
(for C being  compact non  vertical non  horizontal (Subset of ( TOP-REAL 2 )) holds (for n being (Element of ( NAT )) holds ( ( L~ ( Upper_Seq (C,n) ) ) /\ ( L~ ( Lower_Seq (C,n) ) ) ) = { ( W-min ( L~ ( Cage (C,n) ) ) ),( E-max ( L~ ( Cage (C,n) ) ) ) }))
proof
let C being  compact non  vertical non  horizontal (Subset of ( TOP-REAL 2 ));
let n being (Element of ( NAT ));
( E-max ( L~ ( Cage (C,n) ) ) ) in ( rng ( Cage (C,n) ) ) by SPRECT_2:46;
then A1: ( E-max ( L~ ( Cage (C,n) ) ) ) in ( rng ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) ) by FINSEQ_6:90,SPRECT_2:43;
A2: ( len ( Upper_Seq (C,n) ) ) >= 3 by CKB21:1;
then A3: ( rng ( Upper_Seq (C,n) ) ) c= ( L~ ( Upper_Seq (C,n) ) ) by SPPOL_2:18,XXREAL_0:2;
A4: ( W-min ( L~ ( Cage (C,n) ) ) ) in ( rng ( Cage (C,n) ) ) by SPRECT_2:43;
thus ( ( L~ ( Upper_Seq (C,n) ) ) /\ ( L~ ( Lower_Seq (C,n) ) ) ) c= { ( W-min ( L~ ( Cage (C,n) ) ) ),( E-max ( L~ ( Cage (C,n) ) ) ) }
proof
set pW = ( W-min ( L~ ( Cage (C,n) ) ) );
set pE = ( E-max ( L~ ( Cage (C,n) ) ) );
set f = ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) );
let x being set;
assume A5: x in ( ( L~ ( Upper_Seq (C,n) ) ) /\ ( L~ ( Lower_Seq (C,n) ) ) );
then reconsider x1 = x as (Point of ( TOP-REAL 2 ));
assume A6: (not x in { ( W-min ( L~ ( Cage (C,n) ) ) ),( E-max ( L~ ( Cage (C,n) ) ) ) });
x in ( L~ ( Upper_Seq (C,n) ) ) by A5,XBOOLE_0:def 4;
then consider i1 being (Element of ( NAT )) such that A7: 1 <= i1 and A8: ( i1 + 1 ) <= ( len ( Upper_Seq (C,n) ) ) and A9: x1 in ( LSeg (( Upper_Seq (C,n) ),i1) ) by SPPOL_2:13;
A10: ( LSeg (( Upper_Seq (C,n) ),i1) ) = ( LSeg (f,i1) ) by A8,SPPOL_2:9;
x in ( L~ ( Lower_Seq (C,n) ) ) by A5,XBOOLE_0:def 4;
then consider i2 being (Element of ( NAT )) such that A11: 1 <= i2 and A12: ( i2 + 1 ) <= ( len ( Lower_Seq (C,n) ) ) and A13: x1 in ( LSeg (( Lower_Seq (C,n) ),i2) ) by SPPOL_2:13;
set i3 = ( i2 -' 1 );
A14: ( i3 + 1 ) = i2 by A11,XREAL_1:235;
then A15: ( 1 + ( pE .. f ) ) <= ( ( i3 + 1 ) + ( pE .. f ) ) by A11,XREAL_1:7;
A16: ( len ( Lower_Seq (C,n) ) ) = ( ( ( len f ) - ( pE .. f ) ) + 1 ) by CKB11:1;
then i2 < ( ( ( len f ) - ( pE .. f ) ) + 1 ) by A12,NAT_1:13;
then ( i2 - 1 ) < ( ( len f ) - ( pE .. f ) ) by XREAL_1:19;
then A17: ( ( i2 - 1 ) + ( pE .. f ) ) < ( len f ) by XREAL_1:20;
( i2 - 1 ) >= ( 1 - 1 ) by A11,XREAL_1:9;
then A18: ( i3 + ( pE .. f ) ) < ( len f ) by A17,XREAL_0:def 2;
A19: ( i3 + ( pE .. f ) ) >= ( 0 ) by NAT_1:2;
A20: ( LSeg (( Lower_Seq (C,n) ),i2) ) = ( LSeg (f,( i3 + ( pE .. f ) )) ) by A1,A14,SPPOL_2:10;
A21: ( len ( Upper_Seq (C,n) ) ) = ( pE .. f ) by CKB9:1;
then ( i1 + 1 ) < ( ( pE .. f ) + 1 ) by A8,NAT_1:13;
then ( i1 + 1 ) < ( ( i3 + ( pE .. f ) ) + 1 ) by A15,XXREAL_0:2;
then A22: ( i1 + 1 ) <= ( i3 + ( pE .. f ) ) by NAT_1:13;
A23: ( ( ( pE .. f ) -' 1 ) + 1 ) = ( pE .. f ) by A1,FINSEQ_4:21,XREAL_1:235;
( i3 + 1 ) < ( ( ( len f ) - ( pE .. f ) ) + 1 ) by A12,A14,A16,NAT_1:13;
then i3 < ( ( len f ) - ( pE .. f ) ) by XREAL_1:7;
then A24: ( i3 + ( pE .. f ) ) < ( len f ) by XREAL_1:20;
then A25: ( ( i3 + ( pE .. f ) ) + 1 ) <= ( len f ) by NAT_1:13;
now
per cases  by A7,A22,XXREAL_0:1;
suppose (( i1 + 1 ) < ( i3 + ( pE .. f ) ) & i1 > 1);

then ( LSeg (f,i1) ) misses ( LSeg (f,( i3 + ( pE .. f ) )) ) by A24,GOBOARD5:def 4;
then ( ( LSeg (f,i1) ) /\ ( LSeg (f,( i3 + ( pE .. f ) )) ) ) = ( {} ) by XBOOLE_0:def 7;
hence contradiction by A9,A13,A10,A20,XBOOLE_0:def 4;
end;
suppose A26: i1 = 1;

( i3 + ( pE .. f ) ) >= ( ( 0 ) + 3 ) by A2,A21,XREAL_1:7;
then A27: ( i1 + 1 ) < ( i3 + ( pE .. f ) ) by A26,XXREAL_0:2;
now
per cases  by A25,XXREAL_0:1;
suppose ( ( i3 + ( pE .. f ) ) + 1 ) < ( len f );

then ( LSeg (f,i1) ) misses ( LSeg (f,( i3 + ( pE .. f ) )) ) by A27,GOBOARD5:def 4;
then ( ( LSeg (f,i1) ) /\ ( LSeg (f,( i3 + ( pE .. f ) )) ) ) = ( {} ) by XBOOLE_0:def 7;
hence contradiction by A9,A13,A10,A20,XBOOLE_0:def 4;
end;
suppose ( ( i3 + ( pE .. f ) ) + 1 ) = ( len f );

then ( i3 + ( pE .. f ) ) = ( ( len f ) - 1 );
then ( i3 + ( pE .. f ) ) = ( ( len f ) -' 1 ) by A19,XREAL_0:def 2;
then ( ( LSeg (f,i1) ) /\ ( LSeg (f,( i3 + ( pE .. f ) )) ) ) = { ( f /. 1 ) } by A26,GOBOARD7:34,REVROT_1:30;
then x1 in { ( f /. 1 ) } by A9,A13,A10,A20,XBOOLE_0:def 4;
then x1 = ( f /. 1 ) by TARSKI:def 1
.= pW by A4,FINSEQ_6:92;
hence contradiction by A6,TARSKI:def 2;
end;
end;
hence contradiction;
end;
suppose A28: ( i1 + 1 ) = ( i3 + ( pE .. f ) );

( i3 + ( pE .. f ) ) >= ( pE .. f ) by NAT_1:11;
then ( pE .. f ) < ( len f ) by A18,XXREAL_0:2;
then ( ( pE .. f ) + 1 ) <= ( len f ) by NAT_1:13;
then A29: ( ( ( pE .. f ) -' 1 ) + ( 1 + 1 ) ) <= ( len f ) by A23;
( ( 0 ) + ( pE .. f ) ) <= ( i3 + ( pE .. f ) ) by XREAL_1:7;
then ( pE .. f ) = ( i1 + 1 ) by A8,A21,A28,XXREAL_0:1;
then ( ( LSeg (f,i1) ) /\ ( LSeg (f,( i3 + ( pE .. f ) )) ) ) = { ( f /. ( pE .. f ) ) } by A7,A23,A28,A29,TOPREAL1:def 6;
then x1 in { ( f /. ( pE .. f ) ) } by A9,A13,A10,A20,XBOOLE_0:def 4;
then x1 = ( f /. ( pE .. f ) ) by TARSKI:def 1
.= pE by A1,FINSEQ_5:38;
hence contradiction by A6,TARSKI:def 2;
end;
end;
hence contradiction;
end;

( ( Lower_Seq (C,n) ) /. ( len ( Lower_Seq (C,n) ) ) ) = ( ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) /. ( len ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) ) ) by A1,FINSEQ_5:54
.= ( ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) /. 1 ) by FINSEQ_6:def 1
.= ( W-min ( L~ ( Cage (C,n) ) ) ) by A4,FINSEQ_6:92;
then A30: ( W-min ( L~ ( Cage (C,n) ) ) ) in ( rng ( Lower_Seq (C,n) ) ) by REVROT_1:3;
( ( E-max ( L~ ( Cage (C,n) ) ) ) .. ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) ) <= ( ( E-max ( L~ ( Cage (C,n) ) ) ) .. ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) );
then A31: (( E-max ( L~ ( Cage (C,n) ) ) ) in ( rng ( Lower_Seq (C,n) ) ) & ( E-max ( L~ ( Cage (C,n) ) ) ) in ( rng ( Upper_Seq (C,n) ) )) by A1,FINSEQ_5:46,FINSEQ_6:61;
( len ( Lower_Seq (C,n) ) ) >= 3 by CKB21:1;
then A32: ( rng ( Lower_Seq (C,n) ) ) c= ( L~ ( Lower_Seq (C,n) ) ) by SPPOL_2:18,XXREAL_0:2;
( ( Upper_Seq (C,n) ) /. 1 ) = ( ( Rotate (( Cage (C,n) ),( W-min ( L~ ( Cage (C,n) ) ) )) ) /. 1 ) by A1,FINSEQ_5:44
.= ( W-min ( L~ ( Cage (C,n) ) ) ) by A4,FINSEQ_6:92;
then A33: ( W-min ( L~ ( Cage (C,n) ) ) ) in ( rng ( Upper_Seq (C,n) ) ) by FINSEQ_6:42;
thus { ( W-min ( L~ ( Cage (C,n) ) ) ),( E-max ( L~ ( Cage (C,n) ) ) ) } c= ( ( L~ ( Upper_Seq (C,n) ) ) /\ ( L~ ( Lower_Seq (C,n) ) ) )
proof
let x being set;
assume A34: x in { ( W-min ( L~ ( Cage (C,n) ) ) ),( E-max ( L~ ( Cage (C,n) ) ) ) };
per cases  by A34,TARSKI:def 2;
suppose x = ( W-min ( L~ ( Cage (C,n) ) ) );

hence thesis by A32,A3,A33,A30,XBOOLE_0:def 4;
end;
suppose x = ( E-max ( L~ ( Cage (C,n) ) ) );

hence thesis by A32,A3,A31,XBOOLE_0:def 4;
end;
end;

end;
