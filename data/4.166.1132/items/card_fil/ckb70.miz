environ
vocabularies FINSET_1,CARD_1,XBOOLE_0,SUBSET_1,CARD_5,SETFAM_1,TARSKI,ZFMISC_1,ORDINAL1,CARD_2,FUNCT_1,RELAT_1,ORDINAL2,FUNCT_2,CARD_3,FUNCOP_1,FUNCT_5,CARD_FIL;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,FUNCOP_1,BINOP_1,FUNCT_5,SETFAM_1,FINSET_1,ORDINAL1,CARD_1,RELSET_1,FUNCT_2,ORDINAL2,CARD_2,CARD_3,CARD_5,CKB4,CKB10,CKB14,CKB15,CKB18,CKB19,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB29,CKB33,CKB34,CKB44,CKB45,CKB48,CKB53,CKB59,CKB65,CKB67,CKB68;
definitions TARSKI,FUNCT_1,CARD_1,XBOOLE_0,BINOP_1,SUBSET_1,CKB4,CKB14,CKB18,CKB19,CKB23,CKB24,CKB25,CKB26,CKB29,CKB33,CKB34,CKB44,CKB45,CKB48,CKB53,CKB59,CKB65,CKB68;
theorems TARSKI,FUNCT_1,FUNCT_2,ORDINAL1,ORDINAL2,WELLORD2,CARD_1,CARD_2,CARD_5,SETFAM_1,ZFMISC_1,FUNCT_5,RELAT_1,SUBSET_1,FUNCOP_1,SETWISEO,RELSET_1,FRAENKEL,ORDERS_1,XBOOLE_0,XBOOLE_1,ORDINAL3,CARD_3,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB16,CKB17,CKB18,CKB19,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB48,CKB49,CKB50,CKB52,CKB53,CKB55,CKB56,CKB58,CKB59,CKB60,CKB61,CKB65,CKB68,CKB69;
schemes FUNCT_1,FUNCT_2,DOMAIN_1,FRAENKEL,TREES_2,BINOP_1,CKB2;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,RELSET_1,FUNCOP_1,FINSET_1,CARD_1,CARD_5,CARD_3,CARD_2,CKB11,CKB39,CKB40,CKB46,CKB51,CKB54,CKB57,CKB62,CKB63,CKB64,CKB66;
constructors SETFAM_1,WELLORD2,BINOP_1,FUNCOP_1,ORDINAL2,FUNCT_5,CARD_2,CARD_5,NUMBERS,RELSET_1,CKB4,CKB14,CKB15,CKB18,CKB19,CKB23,CKB24,CKB25,CKB26,CKB29,CKB33,CKB34,CKB44,CKB45,CKB48,CKB53,CKB59,CKB65,CKB68;
requirements NUMERALS,SUBSET,BOOLE;
begin
reserve M for non limit_cardinal Aleph;
reserve N1 for (Element of ( predecessor M ));
reserve N2 for (Element of ( predecessor M ));
reserve N3 for (Element of ( predecessor M ));
reserve K1 for (Element of M);
reserve K2 for (Element of M);
reserve T for (Inf_Matrix of ( predecessor M ),M,( bool M ));
theorem
Th35: (for M holds (for I being (Ideal of M) holds ((I is_complete_with M & ( Frechet_Ideal M ) c= I) implies (ex S being (Subset-Family of M) st ((( card S ) = M & (for X1 being set holds (X1 in S implies (not X1 in I)))) & (for X1,X2 being set holds (((X1 in S & X2 in S) & X1 <> X2) implies X1 misses X2)))))))
proof
let M;
set N = ( predecessor M );
let I being (Ideal of M);
assume that
A1: I is_complete_with M
and
A2: ( Frechet_Ideal M ) c= I;
consider T such that A3: T is_Ulam_Matrix_of M by CKB69:1;
defpred P[ set,set ]
 means
(not ( T . ($2,$1) ) in I);
A4: M = ( nextcard N ) by CKB65:def 1;
A5: (for K1 holds ( union { ( T . (N1,K1) ): N1 in N } ) in ( dual I ))
proof
deffunc F((Element of ( predecessor M )),(Element of M)) = ( T . ($1,$2) );
defpred R[ set,set ]
 means
$1 in N;
let K1;
defpred P[ set,set ]
 means
($2 = K1 & $1 in N);
A6: { F(N1,K2): (K2 = K1 & R[ N1,K2 ]) } = { F(N2,K1): R[ N2,K1 ] } from FRAENKEL:sch 20;
{ F(N1,K2): P[ N1,K2 ] } is (Subset-Family of M) from DOMAIN_1:sch 9;
then reconsider C = { ( T . (N1,K1) ): N1 in N } as (Subset-Family of M) by A6;
assume (not ( union { ( T . (N1,K1) ): N1 in N } ) in ( dual I ));
then (not ( ( union C ) ` ) in ( Frechet_Ideal M )) by A2,SETFAM_1:def 7;
then (not ( card ( M \ ( union { ( T . (N1,K1) ): N1 in N } ) ) ) in ( card M )) by CKB36:1;
then A7: (not ( card ( M \ ( union { ( T . (N1,K1) ): N1 in N } ) ) ) in ( nextcard N )) by A4,CARD_1:def 2;
( card ( M \ ( union { ( T . (N1,K1) ): N1 in N } ) ) ) c= N by A3,CKB68:def 1;
hence contradiction by A7,CARD_3:91;
end;
A8: (for K1 holds (ex N2 st P[ K1,N2 ]))
proof
deffunc F(set) = ( T . $1 );
let K1;
A9: { ( T . (N1,K1) ): N1 in N } is non empty
proof
set N2 = the (Element of ( predecessor M ));
( T . (N2,K1) ) in { ( T . (N1,K1) ): N1 in N };
hence thesis;
end;
A10: ( card { F(X) where X is (Element of [: N,M :]): X in [: N,{ K1 } :] } ) c= ( card [: N,{ K1 } :] ) from TREES_2:sch 2;
{ ( T . (N1,K1) ): N1 in N } c= { ( T . X ) where X is (Element of [: N,M :]): X in [: N,{ K1 } :] }
proof
let Y being set;
assume Y in { ( T . (N1,K1) ): N1 in N };
then consider N1 such that A11: Y = ( T . (N1,K1) ) and N1 in N;
([ N1,K1 ] is (Element of [: N,M :]) & [ N1,K1 ] in [: N,{ K1 } :]) by ZFMISC_1:87,ZFMISC_1:106;
hence thesis by A11;
end;
then A12: ( card { ( T . (N1,K1) ): N1 in N } ) c= ( card { ( T . X ) where X is (Element of [: N,M :]): X in [: N,{ K1 } :] } ) by CARD_1:11;
assume A13: (for N2 holds ( T . (N2,K1) ) in I);
A14: { ( T . (N1,K1) ): N1 in N } c= I
proof
let X being set;
assume X in { ( T . (N1,K1) ): N1 in N };
then (ex N2 st (X = ( T . (N2,K1) ) & N2 in N));
hence thesis by A13;
end;
( card [: N,{ K1 } :] ) = ( card N ) by CARD_1:69;
then A15: ( card [: N,{ K1 } :] ) = N by CARD_1:def 2;
N in M by A4,CARD_1:18;
then ( card { ( T . (N1,K1) ): N1 in N } ) in M by A10,A12,A15,ORDINAL1:12,XBOOLE_1:1;
then ( union { ( T . (N1,K1) ): N1 in N } ) in I by A1,A14,A9,CKB19:def 1;
hence contradiction by A5,CKB16:1;
end;
consider h being (Function of M,N) such that A16: (for K1 holds P[ K1,( h . K1 ) ]) from FUNCT_2:sch 3(A8);
(ex N2 st ( card ( h " { N2 } ) ) = M)
proof
deffunc F(set) = ( sup ( h " { $1 } ) );
assume A17: (for N2 holds ( card ( h " { N2 } ) ) <> M);
A18: { ( sup ( h " { N2 } ) ): N2 in N } c= M
proof
let x being set;
assume x in { ( sup ( h " { N2 } ) ): N2 in N };
then consider N2 such that A19: x = ( sup ( h " { N2 } ) ) and N2 in N;
(( card ( h " { N2 } ) ) c= M & ( card ( h " { N2 } ) ) <> M) by A17,CARD_1:7;
then ( card ( h " { N2 } ) ) in M by CARD_1:3;
then ( card ( h " { N2 } ) ) in ( cf M ) by CARD_5:def 3;
hence thesis by A19,CARD_5:26;
end;
( card { F(N2): N2 in N } ) c= ( card N ) from TREES_2:sch 2;
then ( card { ( sup ( h " { N2 } ) ): N2 in N } ) c= N by CARD_1:def 2;
then ( card { ( sup ( h " { N2 } ) ): N2 in N } ) in M by A4,CARD_3:91;
then ( card { ( sup ( h " { N2 } ) ): N2 in N } ) in ( cf M ) by CARD_5:def 3;
then reconsider K1 = ( sup { ( sup ( h " { N3 } ) ): N3 in N } ) as (Element of M) by A18,CARD_5:26;
(for N2 holds ( sup ( h " { N2 } ) ) in ( sup { ( sup ( h " { N3 } ) ): N3 in N } ))
proof
let N2;
( sup ( h " { N2 } ) ) in { ( sup ( h " { N3 } ) ): N3 in N };
hence thesis by ORDINAL2:19;
end;
then ( sup ( h " { ( h . K1 ) } ) ) in K1;
hence contradiction by ORDINAL2:19,SETWISEO:7;
end;
then consider N2 such that A20: ( card ( h " { N2 } ) ) = M;
{ ( T . (N2,K2) ): ( h . K2 ) = N2 } c= ( bool M )
proof
let X being set;
assume X in { ( T . (N2,K2) ): ( h . K2 ) = N2 };
then (ex K2 st (X = ( T . (N2,K2) ) & ( h . K2 ) = N2));
hence thesis;
end;
then reconsider S = { ( T . (N2,K2) ): ( h . K2 ) = N2 } as (Subset-Family of M);
( dom T ) = [: N,M :] by FUNCT_2:def 1;
then consider G being Function such that ( ( curry T ) . N2 ) = G and A21: ( dom G ) = M and ( rng G ) c= ( rng T ) and A22: (for y being set holds (y in M implies ( G . y ) = ( T . (N2,y) ))) by FUNCT_5:29;
( h " { N2 } ),M are_equipotent  by A20,CARD_1:def 2;
then consider f being Function such that A23: f is  one-to-one and A24: ( dom f ) = M and A25: ( rng f ) = ( h " { N2 } ) by WELLORD2:def 4;
A26: ( dom ( G * f ) ) = ( dom f ) by A25,A21,RELAT_1:27;
A27: S c= ( rng ( G * f ) )
proof
let X being set;
assume X in S;
then consider K2 such that A28: X = ( T . (N2,K2) ) and A29: ( h . K2 ) = N2;
K2 in M;
then A30: K2 in ( dom h ) by FUNCT_2:def 1;
( h . K2 ) in { N2 } by A29,TARSKI:def 1;
then K2 in ( h " { N2 } ) by A30,FUNCT_1:def 7;
then consider K3 being set such that A31: K3 in ( dom f ) and A32: ( f . K3 ) = K2 by A25,FUNCT_1:def 3;
X = ( G . ( f . K3 ) ) by A22,A28,A32;
then X = ( ( G * f ) . K3 ) by A26,A31,FUNCT_1:12;
hence thesis by A26,A31,FUNCT_1:def 3;
end;
A33: (for X being set holds (X in ( dom f ) implies ( h . ( f . X ) ) = N2))
proof
let X being set;
assume X in ( dom f );
then ( f . X ) in ( h " { N2 } ) by A25,FUNCT_1:def 3;
then ( h . ( f . X ) ) in { N2 } by FUNCT_1:def 7;
hence thesis by TARSKI:def 1;
end;
( rng ( G * f ) ) c= S
proof
let X being set;
assume X in ( rng ( G * f ) );
then consider K1 being set such that A34: K1 in ( dom ( G * f ) ) and A35: X = ( ( G * f ) . K1 ) by FUNCT_1:def 3;
( f . K1 ) in ( rng f ) by A26,A34,FUNCT_1:def 3;
then reconsider K3 = ( f . K1 ) as (Element of M) by A25;
X = ( G . ( f . K1 ) ) by A34,A35,FUNCT_1:12;
then A36: X = ( T . (N2,K3) ) by A22;
( h . K3 ) = N2 by A33,A26,A34;
hence thesis by A36;
end;
then A37: ( rng ( G * f ) ) = S by A27,XBOOLE_0:def 10;
A38: (for K1 holds (for K2 holds ((( h . K1 ) = N2 & K1 <> K2) implies ( T . (N2,K1) ) <> ( T . (N2,K2) ))))
proof
let K1;
let K2;
assume that
A39: ( h . K1 ) = N2
and
A40: K1 <> K2;
assume ( T . (N2,K1) ) = ( T . (N2,K2) );
then ( ( T . (N2,K1) ) /\ ( T . (N2,K2) ) ) <> ( {} ) by A16,A39,CKB17:1;
hence contradiction by A3,A40,CKB68:def 1;
end;
A41: ( G * f ) is  one-to-one
proof
let K1 being set,K2 being set;
assume that
A42: K1 in ( dom ( G * f ) )
and
A43: K2 in ( dom ( G * f ) )
and
A44: ( ( G * f ) . K1 ) = ( ( G * f ) . K2 );
assume K1 <> K2;
then A45: ( f . K1 ) <> ( f . K2 ) by A23,A26,A42,A43,FUNCT_1:def 4;
A46: ( f . K2 ) in ( rng f ) by A26,A43,FUNCT_1:def 3;
then reconsider K4 = ( f . K2 ) as (Element of M) by A25;
A47: ( ( G * f ) . K2 ) = ( G . ( f . K2 ) ) by A43,FUNCT_1:12
.= ( T . (N2,( f . K2 )) ) by A25,A22,A46;
A48: ( f . K1 ) in ( rng f ) by A26,A42,FUNCT_1:def 3;
then reconsider K3 = ( f . K1 ) as (Element of M) by A25;
( h . K3 ) = N2 by A33,A26,A42;
then A49: ( T . (N2,K3) ) <> ( T . (N2,K4) ) by A38,A45;
( ( G * f ) . K1 ) = ( G . ( f . K1 ) ) by A42,FUNCT_1:12
.= ( T . (N2,( f . K1 )) ) by A25,A22,A48;
hence contradiction by A44,A49,A47;
end;
take S;
( dom ( G * f ) ) = M by A24,A25,A21,RELAT_1:27;
then S,M are_equipotent  by A37,A41,WELLORD2:def 4;
hence ( card S ) = M by CARD_1:def 2;
thus (for X1 being set holds (X1 in S implies (not X1 in I)))
proof
let X1 being set;
assume X1 in S;
then (ex K1 st (( T . (N2,K1) ) = X1 & ( h . K1 ) = N2));
hence thesis by A16;
end;

thus (for X1,X2 being set holds (((X1 in S & X2 in S) & X1 <> X2) implies X1 misses X2))
proof
let X1 being set,X2 being set;
assume that
A50: X1 in S
and
A51: X2 in S
and
A52: X1 <> X2;
consider K2 such that A53: ( T . (N2,K2) ) = X2 and ( h . K2 ) = N2 by A51;
consider K1 such that A54: ( T . (N2,K1) ) = X1 and ( h . K1 ) = N2 by A50;
( ( T . (N2,K1) ) /\ ( T . (N2,K2) ) ) = ( {} ) by A3,A52,A54,A53,CKB68:def 1;
hence thesis by A54,A53,XBOOLE_0:def 7;
end;

end;
