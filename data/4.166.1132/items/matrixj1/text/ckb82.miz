environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,XBOOLE_0,MATRIX_1,FINSEQ_1,ALGSTR_0,RELAT_1,ARYTM_3,TARSKI,STRUCT_0,ZFMISC_1,ORDINAL4,XXREAL_0,FUNCT_1,PARTFUN1,FINSEQ_3,CARD_1,ARYTM_1,FINSEQ_2,CARD_3,GROUP_1,RFINSEQ,TREES_1,INCSP_1,MATRIX_2,MATRIX_3,SUPINF_2,LAPLACE,MATRIX11,MESFUNC1,RVSUM_1,MATHMORP,VALUED_1,FVSUM_1,MATRIXJ1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,MATRIX_2,FVSUM_1,NAT_D,BINARITH,GROUP_4,MATRIX_3,MATRIX11,FINSEQOP,MATRIX13,LAPLACE,RFINSEQ,WSIERP_1,CKB7,CKB15,CKB17,CKB18,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB42,CKB43,CKB67,CKB70,CKB71,CKB73,CKB74,CKB76,CKB77,CKB78,CKB79,CKB81;
definitions TARSKI,FINSEQ_1,MATRIX_1,LAPLACE,MATRIX13,FVSUM_1,CKB7,CKB15,CKB27,CKB28,CKB42,CKB67;
theorems CARD_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_5,FINSEQ_6,FINSEQOP,FUNCT_1,FVSUM_1,GROUP_1,GROUP_4,GOBOARD1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_9,MATRIX11,MATRIX13,MATRIX15,MATRIXR2,NAT_1,ORDINAL1,PARTFUN1,POLYNOM3,PRGCOR_1,RELAT_1,RFINSEQ,RLVECT_1,RVSUM_1,TARSKI,VECTSP_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,MATRIX_4,FUNCT_2,FUNCOP_1,MATRIXR1,CARD_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB22,CKB27,CKB28,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB72,CKB75,CKB80;
schemes FINSEQ_1,FINSEQ_2,NAT_1,MATRIX_1;
registrations XBOOLE_0,FINSET_1,STRUCT_0,VECTSP_1,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,MATRIX13,XREAL_0,VALUED_0,CARD_1,FVSUM_1,CKB16,CKB68,CKB69;
constructors XXREAL_0,GROUP_4,VECTSP_7,MATRIX11,MATRIX13,LAPLACE,RFINSEQ,POLYNOM1,WSIERP_1,SEQ_1,VALUED_0,VALUED_1,REAL_1,NAT_D,BINARITH,RELSET_1,FVSUM_1,CKB7,CKB15,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB42,CKB43,CKB67,CKB73,CKB74,CKB76,CKB77,CKB78,CKB79,CKB81;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve j for Nat;
reserve n for Nat;
reserve K for Field;
reserve a for (Element of K);
reserve R for (FinSequence_of_Square-Matrix of K);
theorem
Th47: (for A being (Matrix of n,K) holds ((i in ( dom A ) & j in ( Seg n )) implies ( Deleting (( block_diagonal (( <* A *> ^ R ),a) ),i,j) ) = ( block_diagonal (( <* ( Deleting (A,i,j) ) *> ^ R ),a) )))
proof
let A being (Matrix of n,K);
assume that
A1: i in ( dom A )
and
A2: j in ( Seg n );
n <> ( 0 ) by A2;
then A3: n >= 1 by NAT_1:14;
set AA = <* A *>;
set b = ( block_diagonal (R,a) );
set B = <* b *>;
set LAR = ( Sum ( Len ( AA ^ R ) ) );
set LAB = ( Sum ( Len ( AA ^ B ) ) );
A4: ( width A ) = n by MATRIX_1:24;
( Width AA ) = <* ( width A ) *> by CKB38:1;
then A5: ( Sum ( Width AA ) ) = ( width A ) by RVSUM_1:73;
A6: ( Width B ) = <* ( width b ) *> by CKB38:1;
A7: ( Len AA ) = <* ( len A ) *> by CKB33:1;
then A8: ( Sum ( Len AA ) ) = ( len A ) by RVSUM_1:73;
( Len ( AA ^ B ) ) = ( ( Len AA ) ^ ( Len B ) ) by CKB32:1;
then A9: LAB = ( ( len A ) + ( Sum ( Len B ) ) ) by A7,RVSUM_1:76;
( Len ( AA ^ R ) ) = ( ( Len AA ) ^ ( Len R ) ) by CKB32:1;
then A10: LAR = ( ( len A ) + ( Sum ( Len R ) ) ) by A7,RVSUM_1:76;
A11: ( Len ( AA ^ B ) ) = ( Width ( AA ^ B ) ) by CKB80:1;
( Width ( AA ^ B ) ) = ( ( Width AA ) ^ ( Width B ) ) by CKB37:1;
then A12: LAB = ( ( Sum ( Width AA ) ) + ( width b ) ) by A6,A11,RVSUM_1:74;
A13: ( len b ) = ( Sum ( Len R ) ) by CKB42:def 1;
( Len B ) = <* ( len b ) *> by CKB33:1;
then A14: ( Sum ( Len B ) ) = ( len b ) by RVSUM_1:73;
A15: ( len A ) = n by MATRIX_1:24;
then A16: ( dom A ) = ( Seg n ) by FINSEQ_1:def 3;
per cases  by A3,XXREAL_0:1;
suppose A17: n = 1;

then A18: i = 1 by A1,A16,FINSEQ_1:2,TARSKI:def 1;
A19: j = 1 by A2,A17,FINSEQ_1:2,TARSKI:def 1;
( len ( Deleting (A,i,j) ) ) = ( 1 -' 1 ) by A1,A17,LAPLACE:2
.= ( 0 ) by XREAL_1:232;
then A20: ( Deleting (A,i,j) ) = ( {} );
thus ( Deleting (( block_diagonal (( AA ^ R ),a) ),i,j) ) = ( Deleting (( block_diagonal (( AA ^ B ),a) ),i,j) ) by A13,A10,A9,A14,CKB58:1
.= ( Segm (( block_diagonal (( AA ^ B ),a) ),( ( Seg LAB ) \ { i } ),( ( Seg LAB ) \ { j } )) ) by MATRIX13:58
.= b by A15,A4,A9,A12,A14,A8,A5,A17,A18,A19,CKB55:1,FINSEQ_1:2
.= ( block_diagonal (B,a) ) by CKB56:1
.= ( block_diagonal (( <* ( Deleting (A,i,j) ) *> ^ B ),a) ) by A20,CKB62:1
.= ( block_diagonal (( <* ( Deleting (A,i,j) ) *> ^ R ),a) ) by CKB58:1;
end;
suppose n > 1;

then A21: ( width A ) = ( width ( DelLine (A,i) ) ) by A15,LAPLACE:4;
thus ( Deleting (( block_diagonal (( AA ^ R ),a) ),i,j) ) = ( DelCol (( DelLine (( block_diagonal (( AA ^ R ),a) ),i) ),j) ) by MATRIX_2:def 6
.= ( DelCol (( block_diagonal (( <* ( DelLine (A,i) ) *> ^ R ),a) ),j) ) by A1,A21,CKB63:1
.= ( block_diagonal (( <* ( DelCol (( DelLine (A,i) ),j) ) *> ^ R ),a) ) by A2,A4,A21,CKB65:1
.= ( block_diagonal (( <* ( Deleting (A,i,j) ) *> ^ R ),a) ) by MATRIX_2:def 6;
end;
end;
