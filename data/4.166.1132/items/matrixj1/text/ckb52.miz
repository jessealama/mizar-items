environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,XBOOLE_0,MATRIX_1,FINSEQ_1,ALGSTR_0,RELAT_1,ARYTM_3,TARSKI,STRUCT_0,ZFMISC_1,ORDINAL4,XXREAL_0,FUNCT_1,PARTFUN1,FINSEQ_3,CARD_1,ARYTM_1,FINSEQ_2,CARD_3,GROUP_1,RFINSEQ,TREES_1,INCSP_1,MATRIX_2,MATRIX_3,SUPINF_2,LAPLACE,MATRIX11,MESFUNC1,RVSUM_1,MATHMORP,VALUED_1,FVSUM_1,MATRIXJ1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,MATRIX_2,FVSUM_1,NAT_D,BINARITH,GROUP_4,MATRIX_3,MATRIX11,FINSEQOP,MATRIX13,LAPLACE,RFINSEQ,WSIERP_1,CKB7,CKB15,CKB17,CKB18,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB42,CKB43;
definitions TARSKI,FINSEQ_1,MATRIX_1,LAPLACE,MATRIX13,FVSUM_1,CKB7,CKB15,CKB27,CKB28,CKB42;
theorems CARD_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_5,FINSEQ_6,FINSEQOP,FUNCT_1,FVSUM_1,GROUP_1,GROUP_4,GOBOARD1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_9,MATRIX11,MATRIX13,MATRIX15,MATRIXR2,NAT_1,ORDINAL1,PARTFUN1,POLYNOM3,PRGCOR_1,RELAT_1,RFINSEQ,RLVECT_1,RVSUM_1,TARSKI,VECTSP_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,MATRIX_4,FUNCT_2,FUNCOP_1,MATRIXR1,CARD_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB22,CKB27,CKB28,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51;
schemes FINSEQ_1,FINSEQ_2,NAT_1,MATRIX_1;
registrations XBOOLE_0,FINSET_1,STRUCT_0,VECTSP_1,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,MATRIX13,XREAL_0,VALUED_0,CARD_1,FVSUM_1,CKB16;
constructors XXREAL_0,GROUP_4,VECTSP_7,MATRIX11,MATRIX13,LAPLACE,RFINSEQ,POLYNOM1,WSIERP_1,SEQ_1,VALUED_0,VALUED_1,REAL_1,NAT_D,BINARITH,RELSET_1,FVSUM_1,CKB7,CKB15,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB42,CKB43;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve D for non empty set;
reserve d for (Element of D);
reserve F for (FinSequence_of_Matrix of D);
theorem
Th30: (for i holds (for j holds (for k holds ((i in ( dom F ) & [ j,k ] in ( Indices ( F . i ) )) implies ([ ( j + ( Sum ( ( Len F ) | ( i -' 1 ) ) ) ),( k + ( Sum ( ( Width F ) | ( i -' 1 ) ) ) ) ] in ( Indices ( block_diagonal (F,d) ) ) & ( ( F . i ) * (j,k) ) = ( ( block_diagonal (F,d) ) * (( j + ( Sum ( ( Len F ) | ( i -' 1 ) ) ) ),( k + ( Sum ( ( Width F ) | ( i -' 1 ) ) ) )) ))))))
proof
let i;
let j;
let k;
assume that
A1: i in ( dom F )
and
A2: [ j,k ] in ( Indices ( F . i ) );
set Fi = ( F . i );
A3: k in ( Seg ( width Fi ) ) by A2,ZFMISC_1:87;
set L = ( Len F );
A4: i in ( NAT ) by ORDINAL1:def 12;
( len F ) = ( len L ) by CARD_1:def 7;
then A5: ( L | ( len F ) ) = L by FINSEQ_1:58;
A6: i <= ( len F ) by A1,FINSEQ_3:25;
then ( Sum ( L | i ) ) <= ( Sum ( L | ( len F ) ) ) by A4,POLYNOM3:18;
then A7: ( Seg ( Sum ( L | i ) ) ) c= ( Seg ( Sum L ) ) by A5,FINSEQ_1:5;
A8: ( dom F ) = ( dom L ) by CKB27:def 1;
then A9: ( L . i ) = ( L /. i ) by A1,PARTFUN1:def 6;
set W = ( Width F );
A10: ( dom F ) = ( dom W ) by CKB28:def 1;
then A11: ( W . i ) = ( W /. i ) by A1,PARTFUN1:def 6;
set kS = ( k + ( Sum ( W | ( i -' 1 ) ) ) );
( W . i ) = ( width Fi ) by A1,A10,CKB28:def 1;
then A12: kS in ( Seg ( Sum ( W | i ) ) ) by A1,A10,A3,A11,CKB13:1;
then A13: kS <= ( Sum ( W | i ) ) by FINSEQ_1:1;
( len F ) = ( len W ) by CARD_1:def 7;
then A14: ( W | ( len F ) ) = W by FINSEQ_1:58;
set B = ( block_diagonal (F,d) );
A15: ( len B ) = ( Sum L ) by CKB42:def 1;
A16: ( width B ) = ( Sum W ) by CKB42:def 1;
set jS = ( j + ( Sum ( L | ( i -' 1 ) ) ) );
j in ( dom Fi ) by A2,ZFMISC_1:87;
then A17: j in ( Seg ( len Fi ) ) by FINSEQ_1:def 3;
( Sum ( W | i ) ) <= ( Sum ( W | ( len F ) ) ) by A6,A4,POLYNOM3:18;
then A18: ( Seg ( Sum ( W | i ) ) ) c= ( Seg ( Sum W ) ) by A14,FINSEQ_1:5;
( ( Sum ( L | ( i -' 1 ) ) ) + ( 0 ) ) <= jS by XREAL_1:6;
then A19: ( jS -' ( Sum ( L | ( i -' 1 ) ) ) ) = ( jS - ( Sum ( L | ( i -' 1 ) ) ) ) by XREAL_1:233;
A20: ( L . i ) = ( len Fi ) by A1,A8,CKB27:def 1;
then A21: ( min (L,jS) ) = i by A1,A8,A17,A9,CKB13:1;
jS in ( Seg ( Sum ( L | i ) ) ) by A1,A8,A17,A9,A20,CKB13:1;
then [ jS,kS ] in [: ( Seg ( len B ) ),( Seg ( width B ) ) :] by A15,A16,A12,A7,A18,ZFMISC_1:87;
hence A22: [ jS,kS ] in ( Indices B ) by FINSEQ_1:def 3;
( 0 ) < k by A3,FINSEQ_1:1;
then A23: ( ( Sum ( W | ( i -' 1 ) ) ) + ( 0 ) ) < kS by XREAL_1:6;
then ( kS -' ( Sum ( W | ( i -' 1 ) ) ) ) = ( kS - ( Sum ( W | ( i -' 1 ) ) ) ) by XREAL_1:233;
hence thesis by A21,A22,A23,A13,A19,CKB42:def 1;
end;
