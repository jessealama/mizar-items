environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,XBOOLE_0,MATRIX_1,FINSEQ_1,ALGSTR_0,RELAT_1,ARYTM_3,TARSKI,STRUCT_0,ZFMISC_1,ORDINAL4,XXREAL_0,FUNCT_1,PARTFUN1,FINSEQ_3,CARD_1,ARYTM_1,FINSEQ_2,CARD_3,GROUP_1,RFINSEQ,TREES_1,INCSP_1,MATRIX_2,MATRIX_3,SUPINF_2,LAPLACE,MATRIX11,MESFUNC1,RVSUM_1,MATHMORP,VALUED_1,FVSUM_1,MATRIXJ1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,MATRIX_2,FVSUM_1,NAT_D,BINARITH,GROUP_4,MATRIX_3,MATRIX11,FINSEQOP,MATRIX13,LAPLACE,RFINSEQ,WSIERP_1,CKB7,CKB15,CKB17,CKB18,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB42,CKB43,CKB67,CKB70,CKB71,CKB73,CKB74,CKB76,CKB77,CKB78,CKB79,CKB81,CKB84,CKB85;
definitions TARSKI,FINSEQ_1,MATRIX_1,LAPLACE,MATRIX13,FVSUM_1,CKB7,CKB15,CKB27,CKB28,CKB42,CKB67,CKB84;
theorems CARD_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_5,FINSEQ_6,FINSEQOP,FUNCT_1,FVSUM_1,GROUP_1,GROUP_4,GOBOARD1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_9,MATRIX11,MATRIX13,MATRIX15,MATRIXR2,NAT_1,ORDINAL1,PARTFUN1,POLYNOM3,PRGCOR_1,RELAT_1,RFINSEQ,RLVECT_1,RVSUM_1,TARSKI,VECTSP_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ZFMISC_1,MATRIX_4,FUNCT_2,FUNCOP_1,MATRIXR1,CARD_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB22,CKB27,CKB28,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB72,CKB75,CKB80,CKB82,CKB83,CKB84,CKB86,CKB87,CKB88,CKB89,CKB90;
schemes FINSEQ_1,FINSEQ_2,NAT_1,MATRIX_1;
registrations XBOOLE_0,FINSET_1,STRUCT_0,VECTSP_1,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,MATRIX13,XREAL_0,VALUED_0,CARD_1,FVSUM_1,CKB16,CKB68,CKB69;
constructors XXREAL_0,GROUP_4,VECTSP_7,MATRIX11,MATRIX13,LAPLACE,RFINSEQ,POLYNOM1,WSIERP_1,SEQ_1,VALUED_0,VALUED_1,REAL_1,NAT_D,BINARITH,RELSET_1,FVSUM_1,CKB7,CKB15,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB42,CKB43,CKB67,CKB73,CKB74,CKB76,CKB77,CKB78,CKB79,CKB81,CKB84,CKB85;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve j for Nat;
reserve n for Nat;
reserve k for Nat;
reserve K for Field;
reserve A1 for (Matrix of K);
reserve A2 for (Matrix of K);
reserve N for (Matrix of n,K);
theorem
Th54: ((( len A1 ) <> ( width A1 ) & N = ( block_diagonal (<* A1,A2 *>,( 0. K )) )) implies ( Det N ) = ( 0. K ))
proof
defpred P[ Nat ]
 means
(for A1 holds ((( len A1 ) <> ( width A1 ) & ( width A1 ) = $1) implies (for n holds (for N holds (N = ( block_diagonal (<* A1,A2 *>,( 0. K )) ) implies ( Det N ) = ( 0. K ))))));
A1: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume that
A2: P[ k ];
set k1 = ( k + 1 );
let A1;
assume that
A3: ( len A1 ) <> ( width A1 )
and
A4: ( width A1 ) = k1;
A5: ( Sum ( Len <* A1,A2 *> ) ) = ( ( len A1 ) + ( len A2 ) ) by CKB35:1;
1 <= k1 by NAT_1:14;
then A6: 1 in ( Seg ( width A1 ) ) by A4;
A7: ( len ( A1 ^ A2 ) ) = ( ( len A1 ) + ( len A2 ) ) by FINSEQ_1:22;
A8: ( Sum ( Width <* A1,A2 *> ) ) = ( ( width A1 ) + ( width A2 ) ) by CKB40:1;
let n;
let N;
assume that
A9: N = ( block_diagonal (<* A1,A2 *>,( 0. K )) );
A10: ( len N ) = ( Sum ( Len <* A1,A2 *> ) ) by A9,CKB42:def 1;
set C = ( LaplaceExpC (N,1) );
A11: n = ( len N ) by MATRIX_1:24;
then A12: ( len C ) = ( len N ) by LAPLACE:def 8;
A13: ( len A1 ) <> ( 0 ) by A3,MATRIX_1:def 3;
then A14: ( 1 + ( 0 ) ) <= ( len N ) by A10,A5,NAT_1:14;
then A15: 1 in ( Seg n ) by A11;
A16: ( width N ) = ( Sum ( Width <* A1,A2 *> ) ) by A9,CKB42:def 1;
set L0 = ( ( len N ) |-> ( 0. K ) );
A17: n = ( width N ) by MATRIX_1:24;
A18: ( len A1 ) >= 1 by A13,NAT_1:14;
A19:now
let i;
assume that
A20: 1 <= i
and
A21: i <= ( len N );
A22: i in ( Seg n ) by A11,A20,A21,FINSEQ_1:1;
i in ( dom C ) by A12,A20,A21,FINSEQ_3:25;
then A23: ( C . i ) = ( ( N * (i,1) ) * ( Cofactor (N,i,1) ) ) by LAPLACE:def 8;
A24: ( N * (i,1) ) = ( ( Line (N,i) ) . 1 ) by A17,A15,MATRIX_1:def 7;
A25: i in ( dom ( A1 ^ A2 ) ) by A10,A5,A7,A20,A21,FINSEQ_3:25;
now
per cases  by A25,FINSEQ_1:25;
suppose A26: i in ( dom A1 );

now
per cases  by A18,XXREAL_0:1;
suppose A27: ( len A1 ) = 1;

then k <> ( 0 ) by A3,A4;
then k in ( Seg k ) by FINSEQ_1:3;
then A28: 1 <= k by FINSEQ_1:1;
then ( 1 + 1 ) <= k1 by XREAL_1:7;
then A29: 2 in ( Seg k1 );
A30: 1 <= i by A26,FINSEQ_3:25;
i <= 1 by A26,A27,FINSEQ_3:25;
then A31: i = 1 by A30,XXREAL_0:1;
set Q = ( ( Seg n ) \ { 1 } );
( Seg 1 ) c= ( Seg n ) by A11,A14,FINSEQ_1:5;
then A32: ( card Q ) = ( ( card ( Seg n ) ) - ( card ( Seg 1 ) ) ) by CARD_2:44,FINSEQ_1:2
.= ( ( card ( Seg n ) ) - 1 ) by FINSEQ_1:57
.= ( n - 1 ) by FINSEQ_1:57
.= ( k + ( width A2 ) ) by A4,A17,A16,A8;
then A33: ( card Q ) = ( ( ( k + ( width A2 ) ) + 1 ) -' 1 ) by NAT_D:34
.= ( n -' 1 ) by A4,A9,A17,A8,CKB42:def 1;
( 1 + ( 0 ) ) <= ( card Q ) by A32,A28,XREAL_1:7;
then A34: 1 in ( Seg ( card Q ) );
( Delete (N,i,1) ) = ( Deleting (N,i,1) ) by A15,A22,LAPLACE:def 1
.= ( Segm (N,Q,Q) ) by A31,MATRIX13:58;
then A35: ( Col (( Delete (N,i,1) ),1) ) = ( ( Col (N,( ( Sgm Q ) . 1 )) ) * ( Sgm Q ) ) by A11,A34,MATRIX13:49,XBOOLE_1:36;
now
A36: ( dom ( ( len A2 ) |-> ( 0. K ) ) ) = ( Seg ( len A2 ) ) by FINSEQ_2:124;
A37: n = ( 1 + ( card Q ) ) by A4,A9,A17,A8,A32,CKB42:def 1;
A38: ( len ( Col (A1,2) ) ) = 1 by A27,CARD_1:def 7;
let j being (Element of ( NAT ));
assume that
A39: j in ( Seg ( n -' 1 ) );
( dom ( Sgm Q ) ) = ( Seg ( card Q ) ) by FINSEQ_3:40,XBOOLE_1:36;
hence ( ( Col (( Delete (N,i,1) ),1) ) . j ) = ( ( Col (N,( ( Sgm Q ) . 1 )) ) . ( ( Sgm Q ) . j ) ) by A33,A35,A39,FUNCT_1:13
.= ( ( Col (N,( 1 + 1 )) ) . ( ( Sgm Q ) . j ) ) by A34,A37,FINSEQ_1:2,MATRIX15:8
.= ( ( Col (N,( 1 + 1 )) ) . ( j + 1 ) ) by A33,A39,A37,FINSEQ_1:2,MATRIX15:8
.= ( ( ( Col (A1,2) ) ^ ( ( len A2 ) |-> ( 0. K ) ) ) . ( j + 1 ) ) by A4,A9,A29,CKB46:1
.= ( ( ( len A2 ) |-> ( 0. K ) ) . j ) by A4,A10,A11,A17,A16,A5,A8,A27,A32,A33,A39,A38,A36,FINSEQ_1:def 7
.= ( 0. K ) by A4,A10,A11,A17,A16,A5,A8,A27,A32,A33,A39,FINSEQ_2:57;
end;
hence ( Det ( Delete (N,i,1) ) ) = ( 0. K ) by A33,A34,MATRIX_9:53;
end;
suppose A40: ( len A1 ) > 1;

set DL = ( DelLine (A1,i) );
set DC = ( DelCol (DL,1) );
A41: ( k1 -' 1 ) = k by NAT_D:34;
reconsider L1 = ( ( len A1 ) - 1 ) as (Element of ( NAT )) by A40,NAT_1:21;
A42: ( len DC ) = ( len DL ) by MATRIX_2:def 5;
A43: ( width A1 ) = ( width DL ) by A40,LAPLACE:4;
then A44: ( width DC ) = ( ( width A1 ) -' 1 ) by A6,LAPLACE:3;
A45: ( Delete (N,i,1) ) = ( Deleting (N,i,1) ) by A15,A22,LAPLACE:def 1
.= ( DelCol (( DelLine (N,i) ),1) ) by MATRIX_2:def 6
.= ( DelCol (( block_diagonal (( <* DL *> ^ <* A2 *> ),( 0. K )) ),1) ) by A9,A26,A43,CKB63:1
.= ( block_diagonal (<* DC,A2 *>,( 0. K )) ) by A6,A43,CKB65:1;
( len A1 ) = ( L1 + 1 );
then ( len DC ) <> ( width DC ) by A3,A4,A26,A44,A42,A41,FINSEQ_3:109;
hence ( 0. K ) = ( Det ( Delete (N,i,1) ) ) by A2,A4,A44,A45,NAT_D:34;
end;
end;
then ( 0. K ) = ( Cofactor (N,i,1) ) by VECTSP_1:6;
hence ( 0. K ) = ( C . i ) by A23,VECTSP_1:6;
end;
suppose A46: (ex j st (j in ( dom A2 ) & i = ( ( len A1 ) + j )));

A47: ( dom ( ( width A1 ) |-> ( 0. K ) ) ) = ( Seg ( width A1 ) ) by FINSEQ_2:124;
consider j such that A48: j in ( dom A2 ) and A49: i = ( ( len A1 ) + j ) by A46;
( N * (i,1) ) = ( ( ( ( width A1 ) |-> ( 0. K ) ) ^ ( Line (A2,j) ) ) . 1 ) by A9,A24,A48,A49,CKB45:1
.= ( ( ( width A1 ) |-> ( 0. K ) ) . 1 ) by A6,A47,FINSEQ_1:def 7
.= ( 0. K ) by A6,FINSEQ_2:57;
hence ( 0. K ) = ( C . i ) by A23,VECTSP_1:6;
end;
end;
hence ( C . i ) = ( L0 . i ) by A11,A22,FINSEQ_2:57;
end;
( len L0 ) = ( len N ) by CARD_1:def 7;
then C = L0 by A12,A19,FINSEQ_1:14;
then C = ( ( len N ) |-> ( ( 0. K ) * ( 0. K ) ) ) by VECTSP_1:7;
then ( Sum C ) = ( Sum ( ( 0. K ) * ( ( len N ) |-> ( 0. K ) ) ) ) by FVSUM_1:53
.= ( ( 0. K ) * ( Sum ( ( len N ) |-> ( 0. K ) ) ) ) by FVSUM_1:73
.= ( 0. K ) by VECTSP_1:6;
hence thesis by A15,LAPLACE:27;
end;
A50: P[ ( 0 ) ]
proof
let A1;
assume that
A51: ( len A1 ) <> ( width A1 )
and
A52: ( width A1 ) = ( 0 );
A53: ( len A1 ) in ( Seg ( len A1 ) ) by A51,A52,FINSEQ_1:3;
A54: ( Sum ( Width <* A1,A2 *> ) ) = ( ( width A1 ) + ( width A2 ) ) by CKB40:1;
A55: ( Sum ( Len <* A1,A2 *> ) ) = ( ( len A1 ) + ( len A2 ) ) by CKB35:1;
A56: ( len A1 ) <= ( ( len A1 ) + ( len A2 ) ) by NAT_1:11;
let n;
let N;
assume that
A57: N = ( block_diagonal (<* A1,A2 *>,( 0. K )) );
A58: ( width N ) = ( Sum ( Width <* A1,A2 *> ) ) by A57,CKB42:def 1;
( len N ) = ( Sum ( Len <* A1,A2 *> ) ) by A57,CKB42:def 1;
then A59: ( Seg ( len A1 ) ) c= ( Seg ( len N ) ) by A55,A56,FINSEQ_1:5;
A60: n = ( len N ) by MATRIX_1:def 2;
( dom A1 ) = ( Seg ( len A1 ) ) by FINSEQ_1:def 3;
then ( Line (N,( len A1 )) ) = ( ( Line (A1,( len A1 )) ) ^ ( ( width A2 ) |-> ( 0. K ) ) ) by A57,A53,CKB45:1
.= ( ( <*> (the carrier of K) ) ^ ( ( width A2 ) |-> ( 0. K ) ) ) by A52
.= ( ( width A2 ) |-> ( 0. K ) ) by FINSEQ_1:34
.= ( ( 0. K ) * ( Line (N,( len A1 )) ) ) by A52,A58,A54,FVSUM_1:58;
hence ( Det N ) = ( Det ( RLine (N,( len A1 ),( ( 0. K ) * ( Line (N,( len A1 )) ) )) ) ) by MATRIX11:30
.= ( ( 0. K ) * ( Det N ) ) by A60,A53,A59,MATRIX11:35
.= ( 0. K ) by VECTSP_1:6;
end;
(for n holds P[ n ]) from NAT_1:sch 2(A50,A1);
hence thesis;
end;
