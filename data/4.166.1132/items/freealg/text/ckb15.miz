environ
vocabularies NUMBERS,SUBSET_1,XBOOLE_0,ARYTM_1,CARD_1,RELAT_1,FINSEQ_1,QUANTAL1,UNIALG_1,UNIALG_2,FUNCT_1,MSAFREE,TARSKI,STRUCT_0,FINSEQ_2,PRELAMB,CQC_SIM1,MSUALG_3,FUNCOP_1,PARTFUN1,FUNCT_2,NAT_1,LANG1,TDGROUP,DTCONSTR,TREES_3,TREES_4,CARD_3,TREES_2,QC_LANG1,FREEALG;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FINSEQ_1,FUNCT_2,FUNCOP_1,FINSEQ_2,CARD_3,TREES_2,TREES_3,TREES_4,MARGREL1,STRUCT_0,UNIALG_1,UNIALG_2,LANG1,DTCONSTR,PRE_POLY,ALG_1,CKB1,CKB4,CKB5,CKB6,CKB9,CKB10,CKB13,CKB14;
definitions TARSKI,UNIALG_2,DTCONSTR,XBOOLE_0,FINSEQ_2,FUNCOP_1,MARGREL1,CKB1,CKB6,CKB9,CKB10,CKB13,CKB14;
theorems FINSEQ_1,FINSEQ_2,PARTFUN1,FUNCT_1,FUNCT_2,NAT_1,ZFMISC_1,UNIALG_1,ALG_1,TARSKI,FUNCOP_1,UNIALG_2,LANG1,DTCONSTR,RELAT_1,XBOOLE_0,XBOOLE_1,TREES_3,MARGREL1,FINSEQ_3,CARD_1,CKB1,CKB3,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
schemes PARTFUN1,FINSEQ_1,RELSET_1,DTCONSTR;
registrations XBOOLE_0,SUBSET_1,RELAT_1,ORDINAL1,PARTFUN1,XREAL_0,FINSEQ_1,FINSEQ_2,TREES_3,STRUCT_0,UNIALG_1,UNIALG_2,DTCONSTR,CARD_1,RELSET_1,MARGREL1,FUNCT_1,CKB2,CKB7,CKB8;
constructors DOMAIN_1,XCMPLX_0,XXREAL_0,XREAL_0,FINSEQOP,DTCONSTR,ALG_1,RELSET_1,PRE_POLY,CKB1,CKB9,CKB10,CKB13,CKB14;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve y for set;
reserve n for (Element of ( NAT ));
registration
cluster  free  strict for Universal_Algebra;
existence
proof
set x = the set;
reconsider A = { x } as non  empty set;
set a = the (Element of A);
reconsider w = ( ( <*> A ) .--> a ) as (Element of ( PFuncs (( A * ),A) )) by MARGREL1:19;
reconsider ww = <* w *> as (PFuncFinSequence of A);
set U0 = UAStr (# A,ww #);
A1: ((the charact of U0) is  quasi_total & (the charact of U0) is  homogeneous) by MARGREL1:20;
A2: (the charact of U0) is  non-empty by MARGREL1:20;
A3: ( len (the charact of U0) ) = 1 by FINSEQ_1:39;
reconsider U0 as Universal_Algebra by A1,A2,UNIALG_1:def 1,UNIALG_1:def 2,UNIALG_1:def 3;
A4: ( dom (the charact of U0) ) = { 1 } by A3,FINSEQ_1:2,FINSEQ_1:def 3;
1 in { 1 } by TARSKI:def 1;
then reconsider o0 = ( (the charact of U0) . 1 ) as (operation of U0) by A4,FUNCT_1:def 3;
take U0;
A5: ( GenUnivAlg ( {} (the carrier of U0) ) ) = U0
proof
set P = ( {} (the carrier of U0) );
reconsider B = (the carrier of ( GenUnivAlg P )) as non  empty (Subset of U0) by UNIALG_2:def 7;
A6: ( dom (the charact of U0) ) = ( dom ( Opers (U0,B) ) ) by UNIALG_2:def 6;
A7: B = (the carrier of U0) by ZFMISC_1:33;
(for n being Nat holds (n in ( dom (the charact of U0) ) implies ( (the charact of U0) . n ) = ( ( Opers (U0,B) ) . n )))
proof
let n being Nat;
assume A8: n in ( dom (the charact of U0) );
then reconsider o = ( (the charact of U0) . n ) as (operation of U0) by FUNCT_1:def 3;
( ( Opers (U0,B) ) . n ) = ( o /. B ) by A6,A8,UNIALG_2:def 6;
hence thesis by A7,UNIALG_2:4;
end;
then (the charact of U0) = ( Opers (U0,B) ) by A6,FINSEQ_1:13
.= (the charact of ( GenUnivAlg P )) by UNIALG_2:def 7;
hence thesis by A7;
end;
A9: o0 = w by FINSEQ_1:40;
then A10: ( dom o0 ) = { ( <*> A ) } by FUNCOP_1:13;
now
( <*> A ) in ( dom o0 ) by A10,TARSKI:def 1;
hence (ex x being FinSequence st x in ( dom o0 ));
let x being FinSequence;
assume x in ( dom o0 );
then x = ( <*> A ) by A10,TARSKI:def 1;
hence ( len x ) = ( 0 );
end;
then A11: ( arity o0 ) = ( 0 ) by MARGREL1:def 25;
A12: ( {} ) in { ( <*> A ) } by TARSKI:def 1;
then ( o0 . ( <*> A ) ) = a by A9,FUNCOP_1:7;
then a in ( rng o0 ) by A10,A12,FUNCT_1:def 3;
then a in ( Constants U0 ) by A11;
then reconsider G = ( {} (the carrier of U0) ) as (GeneratorSet of U0) by A5,CKB12:1;
now
take G;
now
let U1 being Universal_Algebra;
A13: 1 in { 1 } by TARSKI:def 1;
assume A14: U0,U1 are_similar ;
then A15: ( signature U0 ) = ( signature U1 ) by UNIALG_2:def 1;
( len (the charact of U1) ) = 1 by A3,A14,UNIALG_2:1;
then ( dom (the charact of U1) ) = { 1 } by FINSEQ_1:2,FINSEQ_1:def 3;
then reconsider o1 = ( (the charact of U1) . 1 ) as (operation of U1) by A13,FUNCT_1:def 3;
A16: ( rng o1 ) c= (the carrier of U1) by RELAT_1:def 19;
let f being (Function of G,(the carrier of U1));
consider aa being set such that A17: aa in ( dom o1 ) by XBOOLE_0:def 1;
( o1 . aa ) in ( rng o1 ) by A17,FUNCT_1:def 3;
then reconsider u1 = ( o1 . aa ) as (Element of U1) by A16;
reconsider h = ( (the carrier of U0) --> u1 ) as (Function of U0,U1);
take h;
A18: (( len ( signature U0 ) ) = ( len (the charact of U0) ) & ( dom ( signature U0 ) ) = ( Seg ( len ( signature U0 ) ) )) by FINSEQ_1:def 3,UNIALG_1:def 4;
then ( ( signature U0 ) . 1 ) = ( arity o0 ) by A3,A13,FINSEQ_1:2,UNIALG_1:def 4;
then A19: ( arity o0 ) = ( arity o1 ) by A3,A13,A15,A18,FINSEQ_1:2,UNIALG_1:def 4;
now
let n being (Element of ( NAT ));
assume n in ( dom (the charact of U0) );
then A20: n = 1 by A4,TARSKI:def 1;
let 0o being (operation of U0);
let 1o being (operation of U1);
assume that
A21: 0o = ( (the charact of U0) . n )
and
A22: 1o = ( (the charact of U1) . n );
let y being (FinSequence of U0);
assume A23: y in ( dom 0o );
then y = ( <*> (the carrier of U0) ) by A10,A20,A21,TARSKI:def 1;
then A24: ( h * y ) = ( <*> (the carrier of U1) );
( dom 1o ) = ( ( 0 ) -tuples_on (the carrier of U1) ) by A11,A19,A20,A22,MARGREL1:22
.= { ( <*> (the carrier of U1) ) } by FINSEQ_2:94;
then A25: ( 1o . ( h * y ) ) = u1 by A17,A20,A22,A24,TARSKI:def 1;
A26: ( rng 0o ) c= (the carrier of U0) by RELAT_1:def 19;
( 0o . y ) in ( rng 0o ) by A23,FUNCT_1:def 3;
hence ( h . ( 0o . y ) ) = ( 1o . ( h * y ) ) by A25,A26,FUNCOP_1:7;
end;
hence h is_homomorphism U0,U1 by A14,ALG_1:def 1;
f = ( {} );
hence ( h | G ) = f;
end;
hence G is  free by CKB13:def 1;
end;
hence thesis by CKB14:def 1;
end;
end;
