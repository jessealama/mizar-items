environ
vocabularies PETRI,FUNCT_1,XBOOLE_0,TARSKI,SUBSET_1,FUNCT_2,RELAT_1,FUNCOP_1,FUNCT_4,FINSET_1,SETFAM_1,ZFMISC_1,PARTFUN1,ARYTM_3,CARD_1,PETRI_2,STRUCT_0;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,ZFMISC_1,SETFAM_1,RELAT_1,RELSET_1,DOMAIN_1,PETRI,FUNCT_1,PARTFUN1,FUNCT_2,FUNCT_4,RELSET_2,FINSET_1,FUNCOP_1,CARD_1,PARTIT_2,STRUCT_0,CKB1,CKB2,CKB5;
definitions TARSKI,PETRI,STRUCT_0,PARTIT_2,CKB1,CKB2,CKB5;
theorems RELSET_1,PARTFUN1,TARSKI,ZFMISC_1,RELAT_1,XBOOLE_0,PETRI,FUNCT_1,FUNCT_2,XBOOLE_1,FUNCT_4,FUNCOP_1,RELSET_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11;
schemes FUNCT_2;
registrations SUBSET_1,RELAT_1,PARTFUN1,RELSET_1,XBOOLE_0,FUNCT_2,FINSET_1,REALSET1,STRUCT_0,PARTIT_2,FUNCT_1,PETRI,ZFMISC_1;
constructors RELSET_1,DOMAIN_1,PETRI,RELSET_2,FUNCOP_1,FUNCT_4,CARD_1,STRUCT_0,PARTIT_2,CKB1,CKB2,CKB5;
requirements SUBSET,BOOLE;
begin
theorem
Th5: (for A1,A2 being non empty set holds (for B1,B2 being set holds (ex G being (Function of ( thin_cylinders (A2,B2) ),( thin_cylinders (A1,B1) )) st (for x being set holds (x in ( thin_cylinders (A2,B2) ) implies (ex Bo2 being (Subset of B2) st (ex Bo1 being (Subset of B1) st (ex yo1 being (Function of Bo1,A1) st (ex yo2 being (Function of Bo2,A2) st (((((Bo1 is  finite & Bo2 is  finite) & Bo1 = ( ( B1 /\ Bo2 ) /\ ( yo2 " A1 ) )) & yo1 = ( yo2 | Bo1 )) & x = ( cylinder0 (A2,B2,Bo2,yo2) )) & ( G . x ) = ( cylinder0 (A1,B1,Bo1,yo1) )))))))))))
proof
let A1 being non empty set,A2 being non empty set;
let B1 being set,B2 being set;
defpred P[ set,set ]
 means
(ex Bo2 being (Subset of B2) st (ex Bo1 being (Subset of B1) st (ex yo1 being (Function of Bo1,A1) st (ex yo2 being (Function of Bo2,A2) st (((((Bo1 is  finite & Bo2 is  finite) & Bo1 = ( ( B1 /\ Bo2 ) /\ ( yo2 " A1 ) )) & yo1 = ( yo2 | Bo1 )) & $1 = ( cylinder0 (A2,B2,Bo2,yo2) )) & $2 = ( cylinder0 (A1,B1,Bo1,yo1) ))))));
A1:now
let x being set;
assume x in ( thin_cylinders (A2,B2) );
then (ex D being (Subset of ( Funcs (B2,A2) )) st (x = D & D is (thin_cylinder of A2,B2)));
then reconsider D2 = x as (thin_cylinder of A2,B2);
consider Bo2 being (Subset of B2),yo2 being (Function of Bo2,A2) such that A2: Bo2 is  finite and A3: D2 = ( cylinder0 (A2,B2,Bo2,yo2) ) by CKB2:def 1;
set Bo1 = ( ( B1 /\ Bo2 ) /\ ( yo2 " A1 ) );
A4: Bo1 c= ( B1 /\ Bo2 ) by XBOOLE_1:17;
set yo1 = ( yo2 | Bo1 );
( B1 /\ Bo2 ) c= Bo2 by XBOOLE_1:17;
then Bo1 c= Bo2 by A4,XBOOLE_1:1;
then A5: yo1 is (Function of Bo1,A2) by FUNCT_2:32;
A6: ( rng yo1 ) = ( yo2 .: Bo1 ) by RELAT_1:115;
A7: ( yo2 .: Bo1 ) c= ( yo2 .: ( yo2 " A1 ) ) by RELAT_1:123,XBOOLE_1:17;
( yo2 .: ( yo2 " A1 ) ) c= A1 by FUNCT_1:75;
then ( yo2 .: Bo1 ) c= A1 by A7,XBOOLE_1:1;
then reconsider yo1 as (Function of Bo1,A1) by A5,A6,FUNCT_2:6;
set D1 = ( cylinder0 (A1,B1,Bo1,yo1) );
( B1 /\ Bo2 ) c= B1 by XBOOLE_1:17;
then A8: Bo1 c= B1 by A4,XBOOLE_1:1;
then A9: D1 is (thin_cylinder of A1,B1) by A2,CKB2:def 1;
reconsider D1 as set;
take D1;
thus (D1 in ( thin_cylinders (A1,B1) ) & P[ x,D1 ]) by A2,A3,A8,A9;
end;
consider G being (Function of ( thin_cylinders (A2,B2) ),( thin_cylinders (A1,B1) )) such that A10: (for x being set holds (x in ( thin_cylinders (A2,B2) ) implies P[ x,( G . x ) ])) from FUNCT_2:sch 1(A1);
take G;
thus thesis by A10;
end;
