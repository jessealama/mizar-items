environ
vocabularies NUMBERS,FINSEQ_1,SUBSET_1,RLVECT_1,REAL_1,STRUCT_0,FUNCT_1,XBOOLE_0,ALGSTR_0,RELAT_1,PARTFUN1,ARYTM_3,CARD_3,ORDINAL4,XXREAL_0,TARSKI,CARD_1,SUPINF_2,ARYTM_1,NAT_1,FUNCT_2,FINSET_1,FUNCOP_1,VALUED_1,RLSUB_1,QC_LANG1,BINOP_1,ZFMISC_1,XREAL_0,ORDINAL1,RLVECT_2,LATTICES,VECTSP_1,PRE_POLY;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,FINSET_1,FINSEQ_1,RELAT_1,FUNCT_1,RELSET_1,PRE_POLY,PARTFUN1,FUNCT_2,FUNCOP_1,DOMAIN_1,VALUED_1,FINSEQ_4,STRUCT_0,ALGSTR_0,GROUP_1,RLVECT_1,VECTSP_1,REAL_1,RLSUB_1,NAT_1,BINOP_1,XXREAL_0,CKB1,CKB9,CKB21,CKB22,CKB23,CKB26,CKB28,CKB32,CKB38;
definitions FUNCT_1,RLSUB_1,TARSKI,XBOOLE_0,BINOP_1,RLVECT_1,RELAT_1,FUNCT_2,STRUCT_0,ALGSTR_0,CKB1,CKB9,CKB21,CKB23,CKB26,CKB28,CKB32,CKB38;
theorems BINOP_1,CARD_1,CARD_2,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCT_1,FUNCT_2,NAT_1,RLSUB_1,RLSUB_2,RLVECT_1,TARSKI,ZFMISC_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,FUNCOP_1,XREAL_1,XXREAL_0,ORDINAL1,STRUCT_0,PARTFUN1,VALUED_1,XREAL_0,VECTSP_1,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39;
schemes BINOP_1,FINSEQ_1,FUNCT_2,NAT_1,XBOOLE_0;
registrations SUBSET_1,FUNCT_1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,XREAL_0,STRUCT_0,RLVECT_1,RLSUB_1,VALUED_1,VALUED_0,MEMBERED,FINSEQ_1,CARD_1,VECTSP_1,VECTSP_2,CKB24;
constructors PARTFUN1,BINOP_1,DOMAIN_1,FUNCOP_1,XXREAL_0,REAL_1,NAT_1,FINSEQ_4,RLSUB_1,VALUED_1,RELSET_1,VECTSP_1,PRE_POLY,RLVECT_1,CKB1,CKB9,CKB21,CKB23,CKB26,CKB28,CKB32,CKB38;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve k for (Element of ( NAT ));
reserve V for RealLinearSpace;
reserve u for (VECTOR of V);
reserve v for (VECTOR of V);
reserve w for (VECTOR of V);
reserve a for Real;
reserve F for (FinSequence of V);
reserve A for (Subset of V);
reserve f for (Function of (the carrier of V),( REAL ));
reserve l for (Linear_Combination of A);
theorem
((A <> ( {} ) & A is  linearly-closed) iff (for l holds ( Sum l ) in A))
proof
thus ((A <> ( {} ) & A is  linearly-closed) implies (for l holds ( Sum l ) in A))
proof
defpred P[ (Element of ( NAT )) ]
 means
(for l holds (( card ( Carrier l ) ) = $1 implies ( Sum l ) in A));
assume that
A1: A <> ( {} )
and
A2: A is  linearly-closed;
now
let l;
assume ( card ( Carrier l ) ) = ( 0 );
then ( Carrier l ) = ( {} );
then l = ( ZeroLC V ) by CKB26:def 1;
then ( Sum l ) = ( 0. V ) by CKB39:1;
hence ( Sum l ) in A by A1,A2,RLSUB_1:1;
end;
then A3: P[ ( 0 ) ];
now
let k;
assume A4: (for l holds (( card ( Carrier l ) ) = k implies ( Sum l ) in A));
let l;
deffunc F((Element of V)) = ( l . $1 );
consider F such that A5: F is  one-to-one and A6: ( rng F ) = ( Carrier l ) and A7: ( Sum l ) = ( Sum ( l (#) F ) ) by CKB38:def 1;
reconsider G = ( F | ( Seg k ) ) as (FinSequence of (the carrier of V)) by FINSEQ_1:18;
assume A8: ( card ( Carrier l ) ) = ( k + 1 );
then A9: ( len F ) = ( k + 1 ) by A5,A6,FINSEQ_4:62;
then A10: ( len ( l (#) F ) ) = ( k + 1 ) by CKB32:def 1;
A11: ( k + 1 ) in ( Seg ( k + 1 ) ) by FINSEQ_1:4;
then A12: ( k + 1 ) in ( dom F ) by A9,FINSEQ_1:def 3;
( k + 1 ) in ( dom F ) by A9,A11,FINSEQ_1:def 3;
then reconsider v = ( F . ( k + 1 ) ) as (VECTOR of V) by FUNCT_1:102;
consider f being (Function of (the carrier of V),( REAL )) such that A13: ( f . v ) = ( 0 ) and A14: (for u being (Element of V) holds (u <> v implies ( f . u ) = F(u))) from FUNCT_2:sch 6;
reconsider f as (Element of ( Funcs ((the carrier of V),( REAL )) )) by FUNCT_2:8;
A15: v in ( Carrier l ) by A6,A12,FUNCT_1:def 3;
now
let u;
assume A16: (not u in ( Carrier l ));
hence ( f . u ) = ( l . u ) by A15,A14
.= ( 0 ) by A16;
end;
then reconsider f as (Linear_Combination of V) by CKB21:def 1;
A17: ( A \ { v } ) c= A by XBOOLE_1:36;
A18: ( Carrier l ) c= A by CKB28:def 1;
then A19: ( ( l . v ) * v ) in A by A2,A15,RLSUB_1:def 1;
A20: ( Carrier f ) = ( ( Carrier l ) \ { v } )
proof
thus ( Carrier f ) c= ( ( Carrier l ) \ { v } )
proof
let x;
assume x in ( Carrier f );
then consider u such that A21: u = x and A22: ( f . u ) <> ( 0 );
( f . u ) = ( l . u ) by A13,A14,A22;
then A23: x in ( Carrier l ) by A21,A22;
(not x in { v }) by A13,A21,A22,TARSKI:def 1;
hence thesis by A23,XBOOLE_0:def 5;
end;

let x;
assume A24: x in ( ( Carrier l ) \ { v } );
then x in ( Carrier l ) by XBOOLE_0:def 5;
then consider u such that A25: x = u and A26: ( l . u ) <> ( 0 );
(not x in { v }) by A24,XBOOLE_0:def 5;
then x <> v by TARSKI:def 1;
then ( l . u ) = ( f . u ) by A14,A25;
hence thesis by A25,A26;
end;
then ( Carrier f ) c= ( A \ { v } ) by A18,XBOOLE_1:33;
then ( Carrier f ) c= A by A17,XBOOLE_1:1;
then reconsider f as (Linear_Combination of A) by CKB28:def 1;
A27: ( len G ) = k by A9,FINSEQ_3:53;
then A28: ( len ( f (#) G ) ) = k by CKB32:def 1;
A29: ( rng G ) = ( Carrier f )
proof
thus ( rng G ) c= ( Carrier f )
proof
let x;
assume x in ( rng G );
then consider y such that A30: y in ( dom G ) and A31: ( G . y ) = x by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A30;
A32: (( dom G ) c= ( dom F ) & ( G . y ) = ( F . y )) by A30,FUNCT_1:47,RELAT_1:60;
now
assume x = v;
then A33: ( k + 1 ) = y by A5,A12,A30,A31,A32,FUNCT_1:def 4;
y <= k by A27,A30,FINSEQ_3:25;
hence contradiction by A33,XREAL_1:29;
end;
then A34: (not x in { v }) by TARSKI:def 1;
x in ( rng F ) by A30,A31,A32,FUNCT_1:def 3;
hence thesis by A6,A20,A34,XBOOLE_0:def 5;
end;

let x;
assume A35: x in ( Carrier f );
then x in ( rng F ) by A6,A20,XBOOLE_0:def 5;
then consider y such that A36: y in ( dom F ) and A37: ( F . y ) = x by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A36;
now
assume (not y in ( Seg k ));
then y in ( ( dom F ) \ ( Seg k ) ) by A36,XBOOLE_0:def 5;
then y in ( ( Seg ( k + 1 ) ) \ ( Seg k ) ) by A9,FINSEQ_1:def 3;
then y in { ( k + 1 ) } by FINSEQ_3:15;
then y = ( k + 1 ) by TARSKI:def 1;
then (not v in { v }) by A20,A35,A37,XBOOLE_0:def 5;
hence contradiction by TARSKI:def 1;
end;
then y in ( ( dom F ) /\ ( Seg k ) ) by A36,XBOOLE_0:def 4;
then A38: y in ( dom G ) by RELAT_1:61;
then ( G . y ) = ( F . y ) by FUNCT_1:47;
hence thesis by A37,A38,FUNCT_1:def 3;
end;
( ( Seg ( k + 1 ) ) /\ ( Seg k ) ) = ( Seg k ) by FINSEQ_1:7,NAT_1:12
.= ( dom ( f (#) G ) ) by A28,FINSEQ_1:def 3;
then A39: ( dom ( f (#) G ) ) = ( ( dom ( l (#) F ) ) /\ ( Seg k ) ) by A10,FINSEQ_1:def 3;
now
let x;
assume A40: x in ( dom ( f (#) G ) );
then reconsider n = x as (Element of ( NAT ));
n in ( dom ( l (#) F ) ) by A39,A40,XBOOLE_0:def 4;
then A41: n in ( dom F ) by A9,A10,FINSEQ_3:29;
then ( F . n ) in ( rng F ) by FUNCT_1:def 3;
then reconsider w = ( F . n ) as (VECTOR of V);
A42: n in ( dom G ) by A27,A28,A40,FINSEQ_3:29;
then A43: ( G . n ) in ( rng G ) by FUNCT_1:def 3;
then reconsider u = ( G . n ) as (VECTOR of V);
(not u in { v }) by A20,A29,A43,XBOOLE_0:def 5;
then A44: u <> v by TARSKI:def 1;
A45: ( ( f (#) G ) . n ) = ( ( f . u ) * u ) by A42,CKB33:1
.= ( ( l . u ) * u ) by A14,A44;
w = u by A42,FUNCT_1:47;
hence ( ( f (#) G ) . x ) = ( ( l (#) F ) . x ) by A45,A41,CKB33:1;
end;
then A46: ( f (#) G ) = ( ( l (#) F ) | ( Seg k ) ) by A39,FUNCT_1:46;
v in ( rng F ) by A12,FUNCT_1:def 3;
then { v } c= ( Carrier l ) by A6,ZFMISC_1:31;
then ( card ( Carrier f ) ) = ( ( k + 1 ) - ( card { v } ) ) by A8,A20,CARD_2:44
.= ( ( k + 1 ) - 1 ) by CARD_1:30
.= k;
then A47: ( Sum f ) in A by A4;
G is  one-to-one by A5,FUNCT_1:52;
then A48: ( Sum ( f (#) G ) ) = ( Sum f ) by A29,CKB38:def 1;
(( dom ( f (#) G ) ) = ( Seg ( len ( f (#) G ) ) ) & ( ( l (#) F ) . ( len F ) ) = ( ( l . v ) * v )) by A9,A12,CKB33:1,FINSEQ_1:def 3;
then ( Sum ( l (#) F ) ) = ( ( Sum ( f (#) G ) ) + ( ( l . v ) * v ) ) by A9,A10,A28,A46,RLVECT_1:38;
hence ( Sum l ) in A by A2,A7,A19,A48,A47,RLSUB_1:def 1;
end;
then A49: (for k holds (P[ k ] implies P[ ( k + 1 ) ]));
let l;
A50: ( card ( Carrier l ) ) = ( card ( Carrier l ) );
(for k holds P[ k ]) from NAT_1:sch 1(A3,A49);
hence thesis by A50;
end;

assume A51: (for l holds ( Sum l ) in A);
hence A <> ( {} );
(( ZeroLC V ) is (Linear_Combination of A) & ( Sum ( ZeroLC V ) ) = ( 0. V )) by CKB39:1,CKB30:1;
then A52: ( 0. V ) in A by A51;
A53: (for a holds (for v holds (v in A implies ( a * v ) in A)))
proof
let a;
let v;
assume A54: v in A;
now
per cases ;
suppose a = ( 0 );

hence thesis by A52,RLVECT_1:10;
end;
suppose A55: a <> ( 0 );

deffunc F((Element of V)) = ( 0 );
consider f such that A56: ( f . v ) = a and A57: (for u being (Element of V) holds (u <> v implies ( f . u ) = F(u))) from FUNCT_2:sch 6;
reconsider f as (Element of ( Funcs ((the carrier of V),( REAL )) )) by FUNCT_2:8;
now
let u;
assume (not u in { v });
then u <> v by TARSKI:def 1;
hence ( f . u ) = ( 0 ) by A57;
end;
then reconsider f as (Linear_Combination of V) by CKB21:def 1;
A58: ( Carrier f ) = { v }
proof
thus ( Carrier f ) c= { v }
proof
let x;
assume x in ( Carrier f );
then consider u such that A59: x = u and A60: ( f . u ) <> ( 0 );
u = v by A57,A60;
hence thesis by A59,TARSKI:def 1;
end;

let x;
assume x in { v };
then x = v by TARSKI:def 1;
hence thesis by A55,A56;
end;
{ v } c= A by A54,ZFMISC_1:31;
then reconsider f as (Linear_Combination of A) by A58,CKB28:def 1;
consider F such that A61: (F is  one-to-one & ( rng F ) = ( Carrier f )) and A62: ( Sum ( f (#) F ) ) = ( Sum f ) by CKB38:def 1;
F = <* v *> by A58,A61,FINSEQ_3:97;
then ( f (#) F ) = <* ( ( f . v ) * v ) *> by CKB35:1;
then ( Sum f ) = ( a * v ) by A56,A62,RLVECT_1:44;
hence thesis by A51;
end;
end;
hence thesis;
end;
thus (for v holds (for u holds ((v in A & u in A) implies ( v + u ) in A)))
proof
let v;
let u;
assume that
A63: v in A
and
A64: u in A;
now
per cases ;
suppose u = v;

then ( v + u ) = ( ( 1 * v ) + v ) by RLVECT_1:def 8
.= ( ( 1 * v ) + ( 1 * v ) ) by RLVECT_1:def 8
.= ( ( 1 + 1 ) * v ) by RLVECT_1:def 6
.= ( 2 * v );
hence thesis by A53,A63;
end;
suppose A65: v <> u;

deffunc F((Element of V)) = ( 0 );
consider f such that A66: (( f . v ) = 1 & ( f . u ) = 1) and A67: (for w being (Element of V) holds ((w <> v & w <> u) implies ( f . w ) = F(w))) from FUNCT_2:sch 7(A65);
reconsider f as (Element of ( Funcs ((the carrier of V),( REAL )) )) by FUNCT_2:8;
now
let w;
assume (not w in { v,u });
then (w <> v & w <> u) by TARSKI:def 2;
hence ( f . w ) = ( 0 ) by A67;
end;
then reconsider f as (Linear_Combination of V) by CKB21:def 1;
A68: ( Carrier f ) = { v,u }
proof
thus ( Carrier f ) c= { v,u }
proof
let x;
assume x in ( Carrier f );
then (ex w st (x = w & ( f . w ) <> ( 0 )));
then (x = v or x = u) by A67;
hence thesis by TARSKI:def 2;
end;

let x;
assume x in { v,u };
then (x = v or x = u) by TARSKI:def 2;
hence thesis by A66;
end;
then A69: ( Carrier f ) c= A by A63,A64,ZFMISC_1:32;
A70: (( 1 * u ) = u & ( 1 * v ) = v) by RLVECT_1:def 8;
reconsider f as (Linear_Combination of A) by A69,CKB28:def 1;
consider F such that A71: (F is  one-to-one & ( rng F ) = ( Carrier f )) and A72: ( Sum ( f (#) F ) ) = ( Sum f ) by CKB38:def 1;
(F = <* v,u *> or F = <* u,v *>) by A65,A68,A71,FINSEQ_3:99;
then (( f (#) F ) = <* ( 1 * v ),( 1 * u ) *> or ( f (#) F ) = <* ( 1 * u ),( 1 * v ) *>) by A66,CKB36:1;
then ( Sum f ) = ( v + u ) by A72,A70,RLVECT_1:45;
hence thesis by A51;
end;
end;
hence thesis;
end;

thus thesis by A53;
end;
