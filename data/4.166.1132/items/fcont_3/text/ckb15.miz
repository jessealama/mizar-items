environ
vocabularies NUMBERS,REAL_1,XREAL_0,ORDINAL1,SUBSET_1,SEQ_1,PARTFUN1,RCOMP_1,XBOOLE_0,RELAT_1,TARSKI,SEQ_2,LIMFUNC1,FUNCOP_1,FUNCT_1,XXREAL_0,ORDINAL2,CARD_1,PROB_1,XXREAL_1,ARYTM_1,ARYTM_3,COMPLEX1,FCONT_1,FUNCT_2,VALUED_0,SEQM_3;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,COMPLEX1,PROB_1,REAL_1,FUNCT_1,FUNCT_2,FUNCOP_1,VALUED_1,SEQ_1,RELSET_1,SEQ_2,PARTFUN1,PARTFUN2,RCOMP_1,FCONT_1,LIMFUNC1,XXREAL_0,RFUNCT_2;
definitions TARSKI,RCOMP_1,XBOOLE_0,SUBSET_1,PROB_1,LIMFUNC1;
theorems FUNCT_1,NAT_1,SEQ_2,SEQ_4,ABSVALUE,PARTFUN1,PARTFUN2,RCOMP_1,RFUNCT_2,FCONT_1,SUBSET_1,FCONT_2,TARSKI,FUNCT_2,RELAT_1,XREAL_0,XBOOLE_0,XBOOLE_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,XXREAL_1,XXREAL_2,VALUED_0,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
schemes SEQ_1,FUNCT_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,RCOMP_1,RFUNCT_2,VALUED_1,FUNCT_2,VALUED_0,XXREAL_2,FUNCOP_1,SEQ_4,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8;
constructors PARTFUN1,REAL_1,COMPLEX1,NAT_1,SEQ_2,PROB_1,RCOMP_1,PARTFUN2,RFUNCT_2,FCONT_1,LIMFUNC1,VALUED_1,SEQ_1,XXREAL_2,RELSET_1,BINOP_2,RVSUM_1;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve x0 for Real;
reserve g for Real;
reserve g1 for Real;
reserve g2 for Real;
reserve r for  real number;
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve a for Real_Sequence;
reserve b for Real_Sequence;
reserve d for Real_Sequence;
reserve f for (PartFunc of ( REAL ),( REAL ));
theorem
(((f is_continuous_in x0 & ( f . x0 ) <> r) & (ex N being (Neighbourhood of x0) st N c= ( dom f ))) implies (ex N being (Neighbourhood of x0) st (N c= ( dom f ) & (for g holds (g in N implies ( f . g ) <> r)))))
proof
assume that
A1: f is_continuous_in x0
and
A2: ( f . x0 ) <> r;
given N being (Neighbourhood of x0) such that
A3: N c= ( dom f );

consider p being  real number such that A4: ( 0 ) < p and A5: N = ]. ( x0 - p ),( x0 + p ) .[ by RCOMP_1:def 6;
defpred P[ (Element of ( NAT )), real number ]
 means
(((( x0 - ( p / ( $1 + 1 ) ) ) < $2 & $2 < ( x0 + ( p / ( $1 + 1 ) ) )) & ( f . $2 ) = r) & $2 in ( dom f ));
assume A6: (for N being (Neighbourhood of x0) holds ((not N c= ( dom f )) or (ex g st (g in N & ( f . g ) = r))));
A7: (for n holds (ex g being Real st P[ n,g ]))
proof
let n;
A8: ( 0 ) <= n by NAT_1:2;
then reconsider Nn = ]. ( x0 - ( p / ( n + 1 ) ) ),( x0 + ( p / ( n + 1 ) ) ) .[ as (Neighbourhood of x0) by A4,RCOMP_1:def 6,XREAL_1:139;
A9: Nn c= ( dom f )
proof
let x;
assume x in Nn;
then consider g2 such that A10: g2 = x and A11: ( x0 - ( p / ( n + 1 ) ) ) < g2 and A12: g2 < ( x0 + ( p / ( n + 1 ) ) );
( ( 0 ) + 1 ) <= ( n + 1 ) by A8,XREAL_1:7;
then A13: ( p / ( n + 1 ) ) <= ( p / 1 ) by A4,XREAL_1:118;
then ( x0 + ( p / ( n + 1 ) ) ) <= ( x0 + p ) by XREAL_1:7;
then A14: g2 < ( x0 + p ) by A12,XXREAL_0:2;
( x0 - p ) <= ( x0 - ( p / ( n + 1 ) ) ) by A13,XREAL_1:13;
then ( x0 - p ) < g2 by A11,XXREAL_0:2;
then x in N by A5,A10,A14;
hence thesis by A3;
end;
then consider g such that A15: g in Nn and A16: ( f . g ) = r by A6;
take g;
(ex g1 st ((g1 = g & ( x0 - ( p / ( n + 1 ) ) ) < g1) & g1 < ( x0 + ( p / ( n + 1 ) ) ))) by A15;
hence (( x0 - ( p / ( n + 1 ) ) ) < g & g < ( x0 + ( p / ( n + 1 ) ) ));
thus ( f . g ) = r by A16;
thus thesis by A9,A15;
end;
consider d such that A17: (for n holds P[ n,( d . n ) ]) from FUNCT_2:sch 3(A7);
A18: ( rng d ) c= ( dom f )
proof
let x;
assume x in ( rng d );
then (ex n st x = ( d . n )) by FUNCT_2:113;
hence thesis by A17;
end;
A19:now
let r2 being  real number;
assume that
A20: ( 0 ) < r2;
take n = ( 0 );
let m;
assume that
n <= m;
( abs ( ( ( f /* d ) . m ) - r ) ) = ( abs ( ( f . ( d . m ) ) - r ) ) by A18,FUNCT_2:108
.= ( abs ( r - r ) ) by A17
.= ( 0 ) by ABSVALUE:2;
hence ( abs ( ( ( f /* d ) . m ) - r ) ) < r2 by A20;
end;
deffunc F((Element of ( NAT ))) = ( x0 - ( p / ( $1 + 1 ) ) );
consider a such that A21: (for n holds ( a . n ) = F(n)) from SEQ_1:sch 1;
deffunc F((Element of ( NAT ))) = ( x0 + ( p / ( $1 + 1 ) ) );
consider b such that A22: (for n holds ( b . n ) = F(n)) from SEQ_1:sch 1;
A23:now
let n;
(( x0 - ( p / ( n + 1 ) ) ) < ( d . n ) & ( d . n ) < ( x0 + ( p / ( n + 1 ) ) )) by A17;
hence (( a . n ) <= ( d . n ) & ( d . n ) <= ( b . n )) by A21,A22;
end;
A24: p is Real by XREAL_0:def 1;
then A25: (b is  convergent & ( lim b ) = x0) by A22,CKB14:1;
(a is  convergent & ( lim a ) = x0) by A24,A21,CKB13:1;
then (d is  convergent & ( lim d ) = x0) by A25,A23,SEQ_2:19,SEQ_2:20;
then (( f /* d ) is  convergent & ( f . x0 ) = ( lim ( f /* d ) )) by A1,A18,FCONT_1:def 1;
hence contradiction by A2,A19,SEQ_2:def 7;
end;
