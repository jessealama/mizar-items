environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,RELAT_1,TARSKI,CARD_1,FINSET_1,XXREAL_0,FINSEQ_1,FINSEQ_2,CARD_3,NAT_1,XBOOLE_0,ARYTM_3,XREAL_0,ORDINAL1,ARYTM_1,ORDINAL4,GRAPH_1,STRUCT_0,TREES_2,GRAPH_4,PARTFUN1,GLIB_000,REAL_1,GRAPH_5,ARYTM_2;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,SEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,ARYTM_2,REAL_1,NAT_1,NAT_D,STRUCT_0,GRAPH_1,FUNCT_2,GRAPH_4,CARD_3,RVSUM_1,CKB8,CKB23,CKB24,CKB36,CKB37,CKB38,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
definitions TARSKI,FUNCT_1,RVSUM_1,CKB23,CKB24,CKB36,CKB37,CKB38,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
theorems FUNCT_2,XBOOLE_1,GRAPH_1,FINSEQ_1,GRAPH_4,FUNCT_1,FINSEQ_3,FINSEQ_4,NAT_1,TARSKI,YELLOW15,CARD_5,FINSEQ_2,XBOOLE_0,CARD_2,RVSUM_1,SUBSET_1,ZFMISC_1,XREAL_1,XXREAL_0,FINSOP_1,PRE_CIRC,ORDINAL1,PARTFUN1,CARD_3,ARYTM_0,REAL_1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59;
schemes FUNCT_1,NAT_1,CLASSES1,CKB2,CKB7;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,GRAPH_1,GRAPH_4,VALUED_0,CARD_1,STRUCT_0,ARYTM_2;
constructors XXREAL_0,FINSEQ_4,FINSOP_1,BINARITH,GRAPH_4,SEQ_1,NAT_D,RVSUM_1,ARYTM_2,RELSET_1,CKB8,CKB23,CKB24,CKB36,CKB37,CKB38,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve V for set;
reserve G for Graph;
reserve v1 for (Element of G);
reserve v2 for (Element of G);
reserve p for  oriented (Chain of G);
theorem
Th48: (p is_orientedpath_of v1,v2,V implies (( AcyclicPaths p ) <> ( {} ) & ( AcyclicPaths (v1,v2,V) ) <> ( {} )))
proof
defpred P[ (Element of ( NAT )) ]
 means
(for p holds (for v1 holds (for v2 holds ((( len p ) <= ( $1 + 1 ) & p is_orientedpath_of v1,v2,V) implies ( AcyclicPaths p ) <> ( {} )))));
set FS = (the Source of G);
set FT = (the Target of G);
assume A1: p is_orientedpath_of v1,v2,V;
then p is_orientedpath_of v1,v2 by CKB37:def 1;
then p <> ( {} ) by CKB36:def 1;
then ( len p ) >= 1 by FINSEQ_1:20;
then A2: ( ( ( len p ) -' 1 ) + 1 ) = ( len p ) by XREAL_1:235;
A3: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume A4: P[ k ];
now
let p;
let v1;
let v2;
assume that
A5: ( len p ) <= ( ( k + 1 ) + 1 )
and
A6: p is_orientedpath_of v1,v2,V;
consider vs being (FinSequence of (the carrier of G)) such that A7: vs is_oriented_vertex_seq_of p by GRAPH_4:9;
A8: ( ( vertices p ) \ { v2 } ) c= V by A6,CKB37:def 1;
A9: ( len vs ) = ( ( len p ) + 1 ) by A7,GRAPH_4:def 5;
then A10: ( len vs ) >= 1 by NAT_1:12;
A11: p is_orientedpath_of v1,v2 by A6,CKB37:def 1;
then A12: p <> ( {} ) by CKB36:def 1;
then A13: ( len p ) >= 1 by FINSEQ_1:20;
then ( p . ( len p ) ) orientedly_joins ( vs /. ( len p ) ),( vs /. ( ( len p ) + 1 ) ) by A7,GRAPH_4:def 5;
then ( FT . ( p . ( len p ) ) ) = ( vs /. ( ( len p ) + 1 ) ) by GRAPH_4:def 1;
then A14: ( FT . ( p . ( len p ) ) ) = ( vs . ( len vs ) ) by A9,A10,FINSEQ_4:15;
per cases ;
suppose (for n holds (for m holds ((((1 <= n & n < m) & m <= ( len vs )) & ( vs . n ) = ( vs . m )) implies (n = 1 & m = ( len vs )))));

then p is  Simple by A7,GRAPH_4:def 7;
then p in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A12;
hence ( AcyclicPaths p ) <> ( {} );
end;
suppose (not (for n holds (for m holds ((((1 <= n & n < m) & m <= ( len vs )) & ( vs . n ) = ( vs . m )) implies (n = 1 & m = ( len vs ))))));

then consider n,m such that A15: 1 <= n and A16: n < m and A17: m <= ( len vs ) and A18: ( vs . n ) = ( vs . m ) and A19: (not (n = 1 & m = ( len vs )));
consider i being Nat such that A20: m = ( 1 + i ) by A15,A16,NAT_1:10,XXREAL_0:2;
reconsider i as (Element of ( NAT )) by ORDINAL1:def 12;
A21: m >= 1 by A15,A16,XXREAL_0:2;
hereby
per cases ;
suppose A22: n = 1;

then m < ( len vs ) by A17,A19,XXREAL_0:1;
then A23: m <= ( len p ) by A9,NAT_1:13;
then consider j being Nat such that A24: ( len p ) = ( m + j ) by NAT_1:10;
A25: ( p . 1 ) orientedly_joins ( vs /. 1 ),( vs /. ( 1 + 1 ) ) by A7,A13,GRAPH_4:def 5;
A26: n <= ( len vs ) by A16,A17,XXREAL_0:2;
( p . m ) orientedly_joins ( vs /. m ),( vs /. ( m + 1 ) ) by A7,A16,A22,A23,GRAPH_4:def 5;
then A27: ( FS . ( p . m ) ) = ( vs /. m ) by GRAPH_4:def 1
.= ( vs . m ) by A16,A17,A22,FINSEQ_4:15
.= ( vs /. n ) by A15,A18,A26,FINSEQ_4:15
.= ( FS . ( p . 1 ) ) by A22,A25,GRAPH_4:def 1
.= v1 by A11,CKB36:def 1;
reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
A28: ( len p ) = ( i + ( 1 + j ) ) by A20,A24;
then consider p1 being FinSequence,p2 being FinSequence such that A29: ( len p1 ) = i and A30: ( len p2 ) = ( 1 + j ) and A31: p = ( p1 ^ p2 ) by FINSEQ_2:22;
A32: 1 <= ( len p2 ) by A30,NAT_1:11;
then A33: ( p2 . 1 ) = ( p . m ) by A20,A29,A31,CKB10:1;
( p2 . ( len p2 ) ) = ( p . ( len p ) ) by A28,A29,A30,A31,A32,CKB10:1;
then A34: ( FT . ( p2 . ( len p2 ) ) ) = v2 by A11,CKB36:def 1;
reconsider p1,p2 as  oriented (Chain of G) by A31,CKB16:1;
( ( i + 1 ) + ( - 1 ) ) > ( 1 + ( - 1 ) ) by A16,A20,A22,XREAL_1:8;
then ( len p2 ) < ( len p ) by A28,A30,XREAL_1:29;
then ( len p2 ) < ( ( k + 1 ) + 1 ) by A5,XXREAL_0:2;
then A35: ( len p2 ) <= ( k + 1 ) by NAT_1:13;
( ( vertices ( p1 ^ p2 ) ) \ { v2 } ) c= V by A6,A31,CKB37:def 1;
then A36: ( ( vertices p2 ) \ { v2 } ) c= V by CKB30:1;
p2 <> ( {} ) by A30;
then p2 is_orientedpath_of v1,v2 by A27,A33,A34,CKB36:def 1;
then p2 is_orientedpath_of v1,v2,V by A36,CKB37:def 1;
then ( AcyclicPaths p2 ) <> ( {} ) by A4,A35;
then consider r being set such that A37: r in ( AcyclicPaths p2 ) by XBOOLE_0:def 1;
consider q being  Simple  oriented (Chain of G) such that r = q and A38: q <> ( {} ) and A39: (( FS . ( q . 1 ) ) = v1 & ( FT . ( q . ( len q ) ) ) = v2) and A40: ( rng q ) c= ( rng p2 ) by A27,A33,A34,A37;
( rng p2 ) c= ( rng p ) by A31,FINSEQ_1:30;
then A41: ( rng q ) c= ( rng p ) by A40,XBOOLE_1:1;
(( FS . ( q . 1 ) ) = ( FS . ( p . 1 ) ) & ( FT . ( q . ( len q ) ) ) = ( FT . ( p . ( len p ) ) )) by A11,A39,CKB36:def 1;
then q in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A38,A41;
hence ( AcyclicPaths p ) <> ( {} );
end;
suppose A42: n <> 1;

consider n1 being Nat such that A43: n = ( 1 + n1 ) by A15,NAT_1:10;
reconsider n1 as (Element of ( NAT )) by ORDINAL1:def 12;
A44: n < ( len vs ) by A16,A17,XXREAL_0:2;
then A45: n1 < ( len p ) by A9,A43,XREAL_1:7;
then consider j being Nat such that A46: ( len p ) = ( n1 + j ) by NAT_1:10;
reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
consider p1 being FinSequence,p2 being FinSequence such that A47: ( len p1 ) = n1 and ( len p2 ) = j and A48: p = ( p1 ^ p2 ) by A46,FINSEQ_2:22;
A49: n > 1 by A15,A42,XXREAL_0:1;
then A50: n1 >= 1 by A43,NAT_1:13;
then A51: ( p1 . ( len p1 ) ) = ( p . n1 ) by A47,A48,CKB9:1;
( p1 . 1 ) = ( p . 1 ) by A47,A48,A50,CKB9:1;
then A52: ( FS . ( p1 . 1 ) ) = v1 by A11,CKB36:def 1;
A53: ( rng p1 ) c= ( rng p ) by A48,FINSEQ_1:29;
reconsider p1,p2 as  oriented (Chain of G) by A48,CKB16:1;
( p . n1 ) orientedly_joins ( vs /. n1 ),( vs /. ( n1 + 1 ) ) by A7,A45,A50,GRAPH_4:def 5;
then A54: ( FT . ( p . n1 ) ) = ( vs /. n ) by A43,GRAPH_4:def 1
.= ( vs . n ) by A15,A44,FINSEQ_4:15;
hereby
per cases ;
suppose m = ( len vs );

then A55: ( FT . ( p1 . ( len p1 ) ) ) = v2 by A11,A14,A18,A54,A51,CKB36:def 1;
( ( vertices ( p1 ^ p2 ) ) \ { v2 } ) c= V by A6,A48,CKB37:def 1;
then A56: ( ( vertices p1 ) \ { v2 } ) c= V by CKB30:1;
n1 < ( ( k + 1 ) + 1 ) by A5,A45,XXREAL_0:2;
then A57: ( len p1 ) <= ( k + 1 ) by A47,NAT_1:13;
p1 <> ( {} ) by A49,A43,A47,NAT_1:13;
then p1 is_orientedpath_of v1,v2 by A52,A55,CKB36:def 1;
then p1 is_orientedpath_of v1,v2,V by A56,CKB37:def 1;
then ( AcyclicPaths p1 ) <> ( {} ) by A4,A57;
then consider r being set such that A58: r in ( AcyclicPaths p1 ) by XBOOLE_0:def 1;
consider q being  Simple  oriented (Chain of G) such that r = q and A59: q <> ( {} ) and A60: ( FS . ( q . 1 ) ) = v1 and A61: ( FT . ( q . ( len q ) ) ) = v2 and A62: ( rng q ) c= ( rng p1 ) by A52,A55,A58;
A63: ( FT . ( q . ( len q ) ) ) = ( FT . ( p . ( len p ) ) ) by A11,A61,CKB36:def 1;
(( rng q ) c= ( rng p ) & ( FS . ( q . 1 ) ) = ( FS . ( p . 1 ) )) by A11,A53,A60,A62,CKB36:def 1,XBOOLE_1:1;
then q in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A59,A63;
hence ( AcyclicPaths p ) <> ( {} );
end;
suppose m <> ( len vs );

then m < ( len vs ) by A17,XXREAL_0:1;
then A64: m <= ( len p ) by A9,NAT_1:13;
then consider h being Nat such that A65: ( len p ) = ( m + h ) by NAT_1:10;
( p . m ) orientedly_joins ( vs /. m ),( vs /. ( m + 1 ) ) by A7,A21,A64,GRAPH_4:def 5;
then A66: ( FS . ( p . m ) ) = ( vs /. m ) by GRAPH_4:def 1
.= ( FT . ( p1 . ( len p1 ) ) ) by A17,A18,A21,A54,A51,FINSEQ_4:15;
reconsider h as (Element of ( NAT )) by ORDINAL1:def 12;
A67: ( len p ) = ( i + ( 1 + h ) ) by A20,A65;
then consider q1 being FinSequence,q2 being FinSequence such that A68: ( len q1 ) = i and A69: ( len q2 ) = ( 1 + h ) and A70: p = ( q1 ^ q2 ) by FINSEQ_2:22;
reconsider q2 as  oriented (Chain of G) by A70,CKB16:1;
A71: 1 <= ( len q2 ) by A69,NAT_1:12;
then ( q2 . 1 ) = ( p . m ) by A20,A68,A70,CKB10:1;
then reconsider pq = ( p1 ^ q2 ) as  oriented (Chain of G) by A66,CKB17:1;
( pq . ( len pq ) ) = ( pq . ( ( len p1 ) + ( len q2 ) ) ) by FINSEQ_1:22
.= ( q2 . ( len q2 ) ) by A71,CKB10:1
.= ( p . ( len p ) ) by A67,A68,A69,A70,A71,CKB10:1;
then A72: ( FT . ( pq . ( len pq ) ) ) = v2 by A11,CKB36:def 1;
A73: ( rng pq ) = ( ( rng p1 ) \/ ( rng q2 ) ) by FINSEQ_1:31;
( rng q2 ) c= ( rng p ) by A70,FINSEQ_1:30;
then A74: ( rng pq ) c= ( rng p ) by A53,A73,XBOOLE_1:8;
then A75: ( ( vertices pq ) \ { v2 } ) c= V by A8,CKB29:1;
A76: ( len pq ) = ( n1 + ( 1 + h ) ) by A47,A69,FINSEQ_1:22;
( m + h ) > ( n + h ) by A16,XREAL_1:8;
then ( len pq ) < ( ( k + 1 ) + 1 ) by A5,A43,A65,A76,XXREAL_0:2;
then A77: ( len pq ) <= ( k + 1 ) by NAT_1:13;
A78: ( FS . ( pq . 1 ) ) = v1 by A47,A50,A52,CKB9:1;
pq <> ( {} ) by A76;
then pq is_orientedpath_of v1,v2 by A78,A72,CKB36:def 1;
then pq is_orientedpath_of v1,v2,V by A75,CKB37:def 1;
then ( AcyclicPaths pq ) <> ( {} ) by A4,A77;
then consider r being set such that A79: r in ( AcyclicPaths pq ) by XBOOLE_0:def 1;
consider q being  Simple  oriented (Chain of G) such that r = q and A80: q <> ( {} ) and A81: (( FS . ( q . 1 ) ) = v1 & ( FT . ( q . ( len q ) ) ) = v2) and A82: ( rng q ) c= ( rng pq ) by A78,A72,A79;
A83: ( rng q ) c= ( rng p ) by A74,A82,XBOOLE_1:1;
(( FS . ( q . 1 ) ) = ( FS . ( p . 1 ) ) & ( FT . ( q . ( len q ) ) ) = ( FT . ( p . ( len p ) ) )) by A11,A81,CKB36:def 1;
then q in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A80,A83;
hence ( AcyclicPaths p ) <> ( {} );
end;
end;
end;
end;
end;
end;
hence thesis;
end;
A84: P[ ( 0 ) ]
proof
let p;
let v1;
let v2;
assume that
A85: ( len p ) <= ( ( 0 ) + 1 )
and
A86: p is_orientedpath_of v1,v2,V;
p is_orientedpath_of v1,v2 by A86,CKB37:def 1;
then A87: p <> ( {} ) by CKB36:def 1;
then ( len p ) >= 1 by FINSEQ_1:20;
then reconsider r = p as  Simple  oriented (Chain of G) by A85,CKB20:1,XXREAL_0:1;
r in { q where q is  Simple  oriented (Chain of G): (((q <> ( {} ) & ( FS . ( q . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( q . ( len q ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng q ) c= ( rng p )) } by A87;
hence thesis;
end;
(for k holds P[ k ]) from NAT_1:sch 1(A84,A3);
hence ( AcyclicPaths p ) <> ( {} ) by A1,A2;
then A88: (ex x being set st x in ( AcyclicPaths p )) by XBOOLE_0:def 1;
( AcyclicPaths p ) c= ( AcyclicPaths (v1,v2,V) ) by A1,CKB57:1;
hence thesis by A88;
end;
