environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,RELAT_1,TARSKI,CARD_1,FINSET_1,XXREAL_0,FINSEQ_1,FINSEQ_2,CARD_3,NAT_1,XBOOLE_0,ARYTM_3,XREAL_0,ORDINAL1,ARYTM_1,ORDINAL4,GRAPH_1,STRUCT_0,TREES_2,GRAPH_4,PARTFUN1,GLIB_000,REAL_1,GRAPH_5,ARYTM_2;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,SEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,ARYTM_2,REAL_1,NAT_1,NAT_D,STRUCT_0,GRAPH_1,FUNCT_2,GRAPH_4,CARD_3,RVSUM_1,CKB8;
definitions TARSKI,FUNCT_1,RVSUM_1;
theorems FUNCT_2,XBOOLE_1,GRAPH_1,FINSEQ_1,GRAPH_4,FUNCT_1,FINSEQ_3,FINSEQ_4,NAT_1,TARSKI,YELLOW15,CARD_5,FINSEQ_2,XBOOLE_0,CARD_2,RVSUM_1,SUBSET_1,ZFMISC_1,XREAL_1,XXREAL_0,FINSOP_1,PRE_CIRC,ORDINAL1,PARTFUN1,CARD_3,ARYTM_0,REAL_1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13;
schemes FUNCT_1,NAT_1,CLASSES1,CKB2,CKB7;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,GRAPH_1,GRAPH_4,VALUED_0,CARD_1,STRUCT_0,ARYTM_2;
constructors XXREAL_0,FINSEQ_4,FINSOP_1,BINARITH,GRAPH_4,SEQ_1,NAT_D,RVSUM_1,ARYTM_2,RELSET_1,CKB8;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
reserve x for set;
reserve p for FinSequence;
reserve q for FinSequence;
theorem
Th12: ((( q ^ <* x *> ) is  one-to-one & ( rng ( q ^ <* x *> ) ) c= ( rng p )) implies (ex p1,p2 being FinSequence st (p = ( ( p1 ^ <* x *> ) ^ p2 ) & ( rng q ) c= ( rng ( p1 ^ p2 ) ))))
proof
set r = ( q ^ <* x *> );
set i = ( ( len q ) + 1 );
assume that
A1: r is  one-to-one
and
A2: ( rng r ) c= ( rng p );
A3: ( r . i ) = x by FINSEQ_1:42;
( rng q ) c= ( rng r ) by FINSEQ_1:29;
then A4: ( rng q ) c= ( rng p ) by A2,XBOOLE_1:1;
(( len r ) = i & 1 <= i) by FINSEQ_2:16,NAT_1:11;
then A5: i in ( dom r ) by FINSEQ_3:25;
then consider y being set such that A6: y in ( dom p ) and A7: ( r . i ) = ( p . y ) by A2,CKB1:1;
reconsider j = y as (Element of ( NAT )) by A6;
j <= ( len p ) by A6,FINSEQ_3:25;
then consider k being Nat such that A8: ( len p ) = ( j + k ) by NAT_1:10;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
consider s being FinSequence,p2 being FinSequence such that A9: ( len s ) = j and ( len p2 ) = k and A10: p = ( s ^ p2 ) by A8,FINSEQ_2:22;
A11: 1 <= j by A6,FINSEQ_3:25;
then (ex m being Nat st j = ( 1 + m )) by NAT_1:10;
then consider p1 being FinSequence,d being set such that A12: s = ( p1 ^ <* d *> ) by A9,FINSEQ_2:18;
j in ( dom s ) by A9,A11,FINSEQ_3:25;
then A13: ( s . j ) = x by A7,A10,A3,FINSEQ_1:def 7;
take p1;
take p2;
A14: j = ( ( len p1 ) + 1 ) by A9,A12,FINSEQ_2:16;
hence p = ( ( p1 ^ <* x *> ) ^ p2 ) by A10,A12,A13,FINSEQ_1:42;
let y being set;
assume A15: y in ( rng q );
now
let y being set;
assume A16: y in ( rng q );
assume y = x;
then consider z being set such that A17: z in ( dom q ) and A18: x = ( q . z ) by A16,FUNCT_1:def 3;
reconsider n = z as (Element of ( NAT )) by A17;
n <= ( len q ) by A17,FINSEQ_3:25;
then A19: n <> i by XREAL_1:29;
(n in ( dom r ) & ( r . n ) = ( r . i )) by A3,A17,A18,FINSEQ_1:def 7,FINSEQ_2:15;
hence contradiction by A1,A5,A19,FUNCT_1:def 4;
end;
then A20: y <> x by A15;
s = ( p1 ^ <* x *> ) by A12,A14,A13,FINSEQ_1:42;
then ( rng p ) = ( ( rng ( p1 ^ <* x *> ) ) \/ ( rng p2 ) ) by A10,FINSEQ_1:31
.= ( ( ( rng p1 ) \/ ( rng <* x *> ) ) \/ ( rng p2 ) ) by FINSEQ_1:31
.= ( ( ( rng p1 ) \/ ( rng p2 ) ) \/ ( rng <* x *> ) ) by XBOOLE_1:4
.= ( ( rng ( p1 ^ p2 ) ) \/ ( rng <* x *> ) ) by FINSEQ_1:31
.= ( ( rng ( p1 ^ p2 ) ) \/ { x } ) by FINSEQ_1:38;
then (y in ( rng ( p1 ^ p2 ) ) or y in { x }) by A15,A4,XBOOLE_0:def 3;
hence thesis by A20,TARSKI:def 1;
end;
