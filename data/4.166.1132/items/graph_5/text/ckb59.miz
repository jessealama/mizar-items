environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,RELAT_1,TARSKI,CARD_1,FINSET_1,XXREAL_0,FINSEQ_1,FINSEQ_2,CARD_3,NAT_1,XBOOLE_0,ARYTM_3,XREAL_0,ORDINAL1,ARYTM_1,ORDINAL4,GRAPH_1,STRUCT_0,TREES_2,GRAPH_4,PARTFUN1,GLIB_000,REAL_1,GRAPH_5,ARYTM_2;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,SEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,ARYTM_2,REAL_1,NAT_1,NAT_D,STRUCT_0,GRAPH_1,FUNCT_2,GRAPH_4,CARD_3,RVSUM_1,CKB8,CKB23,CKB24,CKB36,CKB37,CKB38,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
definitions TARSKI,FUNCT_1,RVSUM_1,CKB23,CKB24,CKB36,CKB37,CKB38,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
theorems FUNCT_2,XBOOLE_1,GRAPH_1,FINSEQ_1,GRAPH_4,FUNCT_1,FINSEQ_3,FINSEQ_4,NAT_1,TARSKI,YELLOW15,CARD_5,FINSEQ_2,XBOOLE_0,CARD_2,RVSUM_1,SUBSET_1,ZFMISC_1,XREAL_1,XXREAL_0,FINSOP_1,PRE_CIRC,ORDINAL1,PARTFUN1,CARD_3,ARYTM_0,REAL_1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58;
schemes FUNCT_1,NAT_1,CLASSES1,CKB2,CKB7;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,GRAPH_1,GRAPH_4,VALUED_0,CARD_1,STRUCT_0,ARYTM_2;
constructors XXREAL_0,FINSEQ_4,FINSOP_1,BINARITH,GRAPH_4,SEQ_1,NAT_D,RVSUM_1,ARYTM_2,RELSET_1,CKB8,CKB23,CKB24,CKB36,CKB37,CKB38,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve G for Graph;
reserve v1 for (Element of G);
reserve v2 for (Element of G);
reserve p for  oriented (Chain of G);
theorem
Th47: (p is_orientedpath_of v1,v2 implies (( AcyclicPaths p ) <> ( {} ) & ( AcyclicPaths (v1,v2) ) <> ( {} )))
proof
defpred P[ (Element of ( NAT )) ]
 means
(for p holds (for v1 holds (for v2 holds ((( $1 + 1 ) = ( len p ) & p is_orientedpath_of v1,v2) implies ( AcyclicPaths p ) <> ( {} )))));
set FS = (the Source of G);
set FT = (the Target of G);
A1: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume A2: P[ k ];
now
let p;
let v1;
let v2;
assume that
A3: ( ( k + 1 ) + 1 ) = ( len p )
and
p is_orientedpath_of v1,v2;
consider p1 being FinSequence,p2 being FinSequence such that A4: ( len p1 ) = ( k + 1 ) and A5: ( len p2 ) = 1 and A6: p = ( p1 ^ p2 ) by A3,FINSEQ_2:22;
reconsider p1 as  oriented (Chain of G) by A6,CKB16:1;
A7: 1 <= ( len p1 ) by A4,NAT_1:11;
then 1 in ( dom p1 ) by FINSEQ_3:25;
then reconsider x = ( FS . ( p1 . 1 ) ) as (Element of G) by FINSEQ_2:11,FUNCT_2:5;
A8: ( p1 . 1 ) = ( p . 1 ) by A6,A7,CKB9:1;
( len p1 ) in ( dom p1 ) by A7,FINSEQ_3:25;
then reconsider y = ( FT . ( p1 . ( len p1 ) ) ) as (Element of G) by FINSEQ_2:11,FUNCT_2:5;
p1 <> ( {} ) by A4;
then p1 is_orientedpath_of x,y by CKB36:def 1;
then ( AcyclicPaths p1 ) <> ( {} ) by A2,A4;
then consider r being set such that A9: r in ( AcyclicPaths p1 ) by XBOOLE_0:def 1;
A10: ( rng p1 ) c= ( rng p ) by A6,FINSEQ_1:29;
A11: ( rng p2 ) c= ( rng p ) by A6,FINSEQ_1:30;
A12: 1 in ( dom p2 ) by A5,FINSEQ_3:25;
then A13: ( p . ( ( len p1 ) + 1 ) ) = ( p2 . 1 ) by A6,FINSEQ_1:def 7;
consider q being  Simple  oriented (Chain of G) such that r = q and A14: q <> ( {} ) and A15: ( FS . ( q . 1 ) ) = x and A16: ( FT . ( q . ( len q ) ) ) = y and A17: ( rng q ) c= ( rng p1 ) by A9;
( len p1 ) < ( len p ) by A3,A4,NAT_1:13;
then A18: ( FS . ( p . ( ( len p1 ) + 1 ) ) ) = ( FT . ( p . ( len p1 ) ) ) by A7,GRAPH_1:def 13
.= ( FT . ( q . ( len q ) ) ) by A6,A7,A16,CKB9:1;
then A19: ( FS . ( p2 . 1 ) ) = ( FT . ( q . ( len q ) ) ) by A6,A12,FINSEQ_1:def 7;
per cases ;
suppose (ex k st ((1 <= k & k <= ( len q )) & ( FT . ( q . k ) ) = ( FT . ( p2 . 1 ) )));

then consider k such that A20: 1 <= k and A21: k <= ( len q ) and A22: ( FT . ( q . k ) ) = ( FT . ( p2 . 1 ) );
consider i being Nat such that A23: ( len q ) = ( k + i ) by A21,NAT_1:10;
consider q1 being FinSequence,q2 being FinSequence such that A24: ( len q1 ) = k and ( len q2 ) = i and A25: q = ( q1 ^ q2 ) by A23,FINSEQ_2:22;
reconsider q1 as  Simple  oriented (Chain of G) by A25,CKB19:1;
A26: (q1 <> ( {} ) & ( FS . ( q1 . 1 ) ) = ( FS . ( p . 1 ) )) by A8,A15,A20,A24,A25,CKB9:1;
( rng q1 ) c= ( rng q ) by A25,FINSEQ_1:29;
then ( rng q1 ) c= ( rng p1 ) by A17,XBOOLE_1:1;
then A27: ( rng q1 ) c= ( rng p ) by A10,XBOOLE_1:1;
( FT . ( q1 . ( len q1 ) ) ) = ( FT . ( p . ( len p ) ) ) by A3,A4,A13,A20,A22,A24,A25,CKB9:1;
then q1 in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A27,A26;
hence ( AcyclicPaths p ) <> ( {} );
end;
suppose A28: (not (ex k st ((1 <= k & k <= ( len q )) & ( FT . ( q . k ) ) = ( FT . ( p2 . 1 ) ))));

reconsider p2 as  oriented (Chain of G) by A6,CKB16:1;
hereby
per cases ;
suppose A29: ( FS . ( q . 1 ) ) <> ( FT . ( q . ( len q ) ) );

set qp = ( q ^ p2 );
(( rng qp ) = ( ( rng q ) \/ ( rng p2 ) ) & ( rng q ) c= ( rng p )) by A17,A10,FINSEQ_1:31,XBOOLE_1:1;
then A30: ( rng qp ) c= ( ( rng p ) \/ ( rng p ) ) by A11,XBOOLE_1:13;
A31: ( len q ) >= 1 by A14,FINSEQ_1:20;
then A32: ( FS . ( qp . 1 ) ) = ( FS . ( p . 1 ) ) by A8,A15,CKB9:1;
( len qp ) = ( ( len q ) + 1 ) by A5,FINSEQ_1:22;
then A33: (qp <> ( {} ) & ( FT . ( qp . ( len qp ) ) ) = ( FT . ( p . ( len p ) ) )) by A3,A4,A5,A13,CKB10:1;
qp is  Simple  oriented  Simple  oriented (Chain of G) by A5,A13,A18,A28,A29,A31,CKB21:1;
then qp in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A32,A33,A30;
hence ( AcyclicPaths p ) <> ( {} );
end;
suppose A34: ( FS . ( q . 1 ) ) = ( FT . ( q . ( len q ) ) );

reconsider p2 as  Simple  oriented (Chain of G) by A5,CKB20:1;
(p2 <> ( {} ) & ( FT . ( p2 . ( len p2 ) ) ) = ( FT . ( p . ( len p ) ) )) by A3,A4,A5,A6,CKB10:1;
then p2 in { w where w is  Simple  oriented (Chain of G): (((w <> ( {} ) & ( FS . ( w . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( w . ( len w ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng w ) c= ( rng p )) } by A8,A15,A11,A19,A34;
hence ( AcyclicPaths p ) <> ( {} );
end;
end;
end;
end;
hence thesis;
end;
A35: P[ ( 0 ) ]
proof
let p;
let v1;
let v2;
assume that
A36: ( ( 0 ) + 1 ) = ( len p )
and
p is_orientedpath_of v1,v2;
reconsider r = p as  Simple  oriented (Chain of G) by A36,CKB20:1;
r <> ( {} ) by A36;
then r in { q where q is  Simple  oriented (Chain of G): (((q <> ( {} ) & ( FS . ( q . 1 ) ) = ( FS . ( p . 1 ) )) & ( FT . ( q . ( len q ) ) ) = ( FT . ( p . ( len p ) ) )) & ( rng q ) c= ( rng p )) };
hence thesis;
end;
A37: (for k holds P[ k ]) from NAT_1:sch 1(A35,A1);
assume A38: p is_orientedpath_of v1,v2;
then p <> ( {} ) by CKB36:def 1;
then ( len p ) >= 1 by FINSEQ_1:20;
then ( ( ( len p ) -' 1 ) + 1 ) = ( len p ) by XREAL_1:235;
hence ( AcyclicPaths p ) <> ( {} ) by A38,A37;
then A39: (ex x being set st x in ( AcyclicPaths p )) by XBOOLE_0:def 1;
( AcyclicPaths p ) c= ( AcyclicPaths (v1,v2) ) by A38,CKB56:1;
hence thesis by A39;
end;
