environ
vocabularies CAT_1,XBOOLE_0,PARTFUN1,ZFMISC_1,RELAT_1,STRUCT_0,GRAPH_1,SUBSET_1,FUNCT_1,ARYTM_0,ALGSTR_0,FUNCT_2,ARYTM_3,OPPCAT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCT_4,STRUCT_0,GRAPH_1,CAT_1,CKB1;
definitions CAT_1,BINOP_1,GRAPH_1;
theorems FUNCT_2,FUNCT_4,PARTFUN1,CAT_1,SUBSET_1,FUNCT_1;
schemes FUNCT_2;
registrations XBOOLE_0,RELSET_1,FUNCT_2,CAT_1,STRUCT_0;
constructors PARTFUN1,BINOP_1,FUNCT_4,CAT_1,RELSET_1,CKB1;
requirements SUBSET,BOOLE;
begin
reserve C for Category;
theorem
Th1: CatStr (# (the carrier of C),(the carrier' of C),(the Target of C),(the Source of C),( ~ (the Comp of C) ),(the Id of C) #) is Category
proof
set M = (the carrier' of C);
set d = (the Target of C);
set c = (the Source of C);
set p = ( ~ (the Comp of C) );
set i = (the Id of C);
now
thus A1: (for f,g being (Element of M) holds ([ g,f ] in ( dom p ) iff ( d . g ) = ( c . f )))
proof
let f being (Element of M);
let g being (Element of M);
([ g,f ] in ( dom p ) iff [ f,g ] in ( dom (the Comp of C) )) by FUNCT_4:42;
hence thesis by CAT_1:def 5;
end;

A2: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies ( p . (g,f) ) = ( (the Comp of C) . (f,g) )))
proof
let f being (Element of M);
let g being (Element of M);
assume ( d . g ) = ( c . f );
then [ g,f ] in ( dom p ) by A1;
hence thesis by FUNCT_4:43;
end;
thus A3: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies (( d . ( p . (g,f) ) ) = ( d . f ) & ( c . ( p . (g,f) ) ) = ( c . g ))))
proof
let f being (Element of M);
let g being (Element of M);
(( d . g ) = ( c . f ) implies ( p . (g,f) ) = ( (the Comp of C) . (f,g) )) by A2;
hence thesis by CAT_1:def 5;
end;

thus (for f,g,h being (Element of M) holds ((( d . h ) = ( c . g ) & ( d . g ) = ( c . f )) implies ( p . (h,( p . (g,f) )) ) = ( p . (( p . (h,g) ),f) )))
proof
let f being (Element of M);
let g being (Element of M);
let h being (Element of M);
assume that
A4: ( d . h ) = ( c . g )
and
A5: ( d . g ) = ( c . f );
[ h,g ] in ( dom p ) by A1,A4;
then A6: ( p . (h,g) ) is (Element of M) by PARTFUN1:4;
[ g,f ] in ( dom p ) by A1,A5;
then A7: ( p . (g,f) ) is (Element of M) by PARTFUN1:4;
(( p . (h,g) ) = ( (the Comp of C) . (g,h) ) & ( d . ( p . (h,g) ) ) = ( d . g )) by A2,A3,A4;
then A8: ( p . (( p . (h,g) ),f) ) = ( (the Comp of C) . (f,( (the Comp of C) . (g,h) )) ) by A2,A5,A6;
(( p . (g,f) ) = ( (the Comp of C) . (f,g) ) & ( c . ( p . (g,f) ) ) = ( c . g )) by A2,A3,A5;
then ( p . (h,( p . (g,f) )) ) = ( (the Comp of C) . (( (the Comp of C) . (f,g) ),h) ) by A2,A4,A7;
hence thesis by A4,A5,A8,CAT_1:def 5;
end;

let b being (Element of (the carrier of C));
thus A9: (( d . ( i . b ) ) = b & ( c . ( i . b ) ) = b) by CAT_1:def 5;
thus (for f being (Element of M) holds (( c . f ) = b implies ( p . (( i . b ),f) ) = f))
proof
let f being (Element of M);
(( c . f ) = b implies ( p . (( i . b ),f) ) = ( (the Comp of C) . (f,( i . b )) )) by A2,A9;
hence thesis by CAT_1:def 5;
end;

let g being (Element of M);
(( d . g ) = b implies ( p . (g,( i . b )) ) = ( (the Comp of C) . (( i . b ),g) )) by A2,A9;
hence (( d . g ) = b implies ( p . (g,( i . b )) ) = g) by CAT_1:def 5;
end;
hence thesis by CAT_1:def 5;
end;
