environ
vocabularies NUMBERS,FUNCT_1,FINSEQ_1,NAT_1,RELAT_1,FINSET_1,CARD_1,XBOOLE_0,TARSKI,XXREAL_0,SUBSET_1,PARTFUN1,ARYTM_1,ARYTM_3,ORDINAL4,FINSEQ_4,FUNCT_2,EQREL_1,CARD_3,SETFAM_1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,RELAT_1,CARD_1,SETFAM_1,EQREL_1,NUMBERS,XCMPLX_0,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,NAT_1,FINSEQ_1,FINSEQ_3,XXREAL_0,CKB1,CKB6,CKB12,CKB18,CKB19,CKB24;
definitions FUNCT_1,TARSKI,XBOOLE_0,FINSEQ_1,CKB1,CKB6,CKB12,CKB24;
theorems CARD_1,CARD_2,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCT_1,FUNCT_2,INT_1,NAT_1,PARTFUN1,TARSKI,WELLORD2,ZFMISC_1,RELAT_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ORDINAL1,GRFUNC_1,EQREL_1,RELSET_1,SETFAM_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36;
schemes FINSEQ_1,FINSET_1,NAT_1,FUNCT_1,FINSEQ_2,FUNCT_2;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FINSET_1,XREAL_0,INT_1,FINSEQ_1,ORDINAL1,CARD_1,RELSET_1,SUBSET_1,EQREL_1,NAT_1,PARTFUN1,FUNCT_2,XXREAL_0,MEMBERED;
constructors ENUMSET1,WELLORD2,FUNCT_2,XXREAL_0,REAL_1,PARTFUN1,NAT_1,INT_1,FINSEQ_3,RELSET_1,EQREL_1,SETFAM_1,CKB1,CKB6,CKB12,CKB18,CKB19,CKB24;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve p for FinSequence;
reserve x for set;
reserve y for set;
reserve k for Nat;
reserve L for (Element of ( NAT ));
reserve M for (Element of ( NAT ));
theorem
Th41: (p just_once_values x implies (for k holds (k in ( dom ( p - { x } ) ) implies ((k < ( x .. p ) implies ( ( p - { x } ) . k ) = ( p . k )) & (( x .. p ) <= k implies ( ( p - { x } ) . k ) = ( p . ( k + 1 ) ))))))
proof
assume A1: p just_once_values x;
set q = ( p - { x } );
let k;
assume A2: k in ( dom ( p - { x } ) );
set A = { L: ((L in ( dom p ) & L <= k) & ( p . L ) in { x }) };
A3: ( dom ( p - { x } ) ) c= ( dom p ) by FINSEQ_3:63;
thus (k < ( x .. p ) implies ( ( p - { x } ) . k ) = ( p . k ))
proof
assume A4: k < ( x .. p );
A c= ( {} )
proof
let y;
assume y in A;
then consider L such that y = L and A5: (L in ( dom p ) & L <= k) and A6: ( p . L ) in { x };
( p . L ) <> x by A1,A4,A5,CKB32:1;
hence thesis by A6,TARSKI:def 1;
end;
then A7: A = ( {} );
( p . k ) <> x by A1,A2,A3,A4,CKB32:1;
then (not ( p . k ) in { x }) by TARSKI:def 1;
then ( q . ( k - ( 0 ) ) ) = ( p . k ) by A2,A3,A7,CARD_1:27,FINSEQ_3:85;
hence thesis;
end;

set B = { M: ((M in ( dom p ) & M <= ( k + 1 )) & ( p . M ) in { x }) };
assume A8: ( x .. p ) <= k;
A9: x in ( rng p ) by A1,CKB7:1;
A10: B = { ( x .. p ) }
proof
thus B c= { ( x .. p ) }
proof
let y;
assume y in B;
then consider M such that A11: M = y and A12: M in ( dom p ) and M <= ( k + 1 ) and A13: ( p . M ) in { x };
( p . M ) = x by A13,TARSKI:def 1;
then M = ( x .. p ) by A1,A12,CKB32:1;
hence thesis by A11,TARSKI:def 1;
end;

let y;
assume y in { ( x .. p ) };
then A14: y = ( x .. p ) by TARSKI:def 1;
( p . ( x .. p ) ) = x by A9,CKB25:1;
then A15: ( p . ( x .. p ) ) in { x } by TARSKI:def 1;
(( x .. p ) in ( dom p ) & ( x .. p ) <= ( k + 1 )) by A9,A8,CKB26:1,NAT_1:12;
hence thesis by A14,A15;
end;
then reconsider B as  finite set;
(( dom q ) = ( Seg ( len q ) ) & ( len ( p - { x } ) ) = ( ( len p ) - 1 )) by A1,CKB36:1,FINSEQ_1:def 3;
then k <= ( ( len p ) - 1 ) by A2,FINSEQ_1:1;
then (1 <= ( k + 1 ) & ( k + 1 ) <= ( len p )) by NAT_1:12,XREAL_1:19;
then ( k + 1 ) in ( Seg ( len p ) );
then A16: ( k + 1 ) in ( dom p ) by FINSEQ_1:def 3;
now
( x .. p ) <> ( k + 1 ) by A8,XREAL_1:29;
then A17: ( p . ( k + 1 ) ) <> x by A1,A16,CKB32:1;
assume ( p . ( k + 1 ) ) in { x };
hence contradiction by A17,TARSKI:def 1;
end;
then ( ( p - { x } ) . ( ( k + 1 ) - ( card B ) ) ) = ( p . ( k + 1 ) ) by A16,FINSEQ_3:85;
then ( q . ( ( k + 1 ) - 1 ) ) = ( p . ( k + 1 ) ) by A10,CARD_1:30;
hence thesis;
end;
