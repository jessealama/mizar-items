environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,XCMPLX_0,VECTSP_1,SUBSET_1,FINSEQ_1,MATRIX_1,CARD_1,TREES_1,XXREAL_0,MATRIX_2,QC_LANG1,RELAT_1,SUPINF_2,ARYTM_3,MATRIX_3,FUNCT_1,ZFMISC_1,FINSEQ_2,FUNCT_2,ARYTM_1,FINSET_1,TARSKI,SGRAPH1,CARD_3,ALGSTR_0,SETWISEO,ABIAN,FINSUB_1,BINOP_1,FINSOP_1,CARD_FIN,FUNCOP_1,FUNCT_4,MATRIX11,FINSEQ_5,INT_1,GROUP_1,ABSVALUE,RVSUM_1,STRUCT_0,INCSP_1,FVSUM_1,FREEALG,FINSEQ_3,LAPLACE,CLASSES1,AFINSQ_1,PRVECT_1,RLVECT_2,LMOD_7,VALUED_1,PARTFUN1,RLVECT_3,RLSUB_1,MESFUNC1,RLVECT_5,MATRIX13,RLVECT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,FINSET_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,SETWOP_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,FINSEQ_2,MATRIX_1,FINSUB_1,MATRIX_2,FVSUM_1,FINSOP_1,GROUP_4,MATRIX_3,FINSEQ_7,FUNCT_4,SGRAPH1,NEWTON,FINSEQ_5,DOMAIN_1,MATRIX_6,MATRIX_7,MATRIX11,CARD_FIN,FINSEQ_3,LAPLACE,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_6,VECTSP_7,MATRLIN,VECTSP_9,FINSEQOP,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB125,CKB126,CKB127,CKB130,CKB131;
definitions RLVECT_1,FINSEQ_2,FINSEQ_1,TARSKI,MATRIX_1,FVSUM_1,GROUP_4,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX11,LAPLACE,MEASURE6,VECTSP_1,VECTSP_7,FUNCT_1,RELAT_1,STRUCT_0,ALGSTR_0,FUNCOP_1,CKB17,CKB54,CKB76,CKB88,CKB130,CKB131;
theorems NAT_D,CARD_1,CARD_2,CARD_FIN,COMPUT_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSOP_1,FINSUB_1,FRECHET,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_7,FUNCOP_1,FVSUM_1,GRAPH_2,GRAPH_5,GROUP_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX_9,MATRIX11,MATRIXR1,NAT_1,ORDINAL1,PRVECT_1,RELAT_1,RLVECT_1,SETWISEO,SETWOP_2,SGRAPH1,STIRL2_1,TARSKI,VECTSP_1,VECTSP_2,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,WELLORD2,XBOOLE_0,XBOOLE_1,XREAL_1,ZFMISC_1,XXREAL_0,FINSEQOP,STRUCT_0,MATRIXR2,PARTFUN1,MATRLIN,XREAL_0,MEASURE6,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB52,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB118,CKB119,CKB120,CKB121,CKB124,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135;
schemes FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,NAT_1,PRE_POLY,MATRIX_1;
registrations SUBSET_1,FUNCT_1,FINSET_1,STRUCT_0,FVSUM_1,MATRIX_2,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,CARD_1,SGRAPH1,MATRIX_1,FUNCOP_1,MATRIX11,SETFAM_1,FINSEQ_2,PRVECT_1,MATRLIN,XREAL_0,XBOOLE_0,VALUED_0,VECTSP_7,RELSET_1,CKB46,CKB47,CKB48,CKB49,CKB117,CKB122,CKB123;
constructors SETWISEO,FINSOP_1,ALGSTR_1,FVSUM_1,DOMAIN_1,SEQM_3,XXREAL_0,FINSEQ_5,GROUP_4,FINSEQ_7,WELLORD2,NEWTON,STIRL2_1,CARD_FIN,MATRIX_6,MATRIX_7,MATRIX11,LAPLACE,PRVECT_1,VECTSP_6,VECTSP_7,VECTSP_9,NAT_D,BINOP_2,MATRLIN,VALUED_0,RELSET_1,MEASURE6,SETFAM_1,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB127,CKB130,CKB131;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve i for Nat;
reserve j for Nat;
reserve m for Nat;
reserve n for Nat;
reserve K for Field;
reserve a for (Element of K);
reserve v for (Vector of ( n -VectSp_over K ));
reserve L for (Linear_Combination of ( n -VectSp_over K ));
reserve M for (Matrix of m,n,K);
reserve M1 for (Matrix of m,n,K);
theorem
Th109: (for M holds (M is  without_repeated_line implies (((for i holds (i in ( Seg m ) implies ( Line (M,i) ) <> ( n |-> ( 0. K ) ))) & (for M1 holds (((for i holds (i in ( Seg m ) implies (ex a st ( Line (M1,i) ) = ( a * ( Line (M,i) ) )))) & (for j holds (j in ( Seg n ) implies ( Sum ( Col (M1,j) ) ) = ( 0. K )))) implies M1 = ( 0. (K,m,n) )))) iff ( lines M ) is  linearly-independent)))
proof
set V = ( n -VectSp_over K );
set n0 = ( n |-> ( 0. K ) );
A1: ( len n0 ) = n by CARD_1:def 7;
let M;
assume that
A2: M is  without_repeated_line;
thus (((for i holds (i in ( Seg m ) implies ( Line (M,i) ) <> ( n |-> ( 0. K ) ))) & (for M1 holds (((for i holds (i in ( Seg m ) implies (ex a st ( Line (M1,i) ) = ( a * ( Line (M,i) ) )))) & (for j holds (j in ( Seg n ) implies ( Sum ( Col (M1,j) ) ) = ( 0. K )))) implies M1 = ( 0. (K,m,n) )))) implies ( lines M ) is  linearly-independent)
proof
set MX = ( MX2FinS M );
set V = ( n -VectSp_over K );
assume that
A3: (for i holds (i in ( Seg m ) implies ( Line (M,i) ) <> ( n |-> ( 0. K ) )))
and
A4: (for M1 holds (((for i holds (i in ( Seg m ) implies (ex a st ( Line (M1,i) ) = ( a * ( Line (M,i) ) )))) & (for j holds (j in ( Seg n ) implies ( Sum ( Col (M1,j) ) ) = ( 0. K )))) implies M1 = ( 0. (K,m,n) )));
let L being (Linear_Combination of ( lines M ));
assume that
A5: ( Sum L ) = ( 0. V );
set LM = ( L (#) MX );
set FLM = ( FinS2MX LM );
A6: ( len M ) = m by MATRIX_1:def 2;
then reconsider flm = FLM as (Matrix of m,n,K) by VECTSP_6:def 5;
A7: (for i holds (i in ( Seg m ) implies (ex a st ( Line (flm,i) ) = ( a * ( Line (M,i) ) ))))
proof
let i;
assume that
A8: i in ( Seg m );
( Line (M,i) ) in ( lines M ) by A8,CKB128:1;
then reconsider LM = ( Line (M,i) ) as (Element of V);
reconsider LLM = ( L . LM ) as (Element of K);
( Line (M,i) ) = ( M . i ) by A8,MATRIX_2:8;
then ( Line (flm,i) ) = ( LLM * ( Line (M,i) ) ) by A6,A8,CKB133:1;
hence thesis;
end;
A9: ( len ( n |-> ( 0. K ) ) ) = n by CARD_1:def 7;
assume ( Carrier L ) <> ( {} );
then consider x such that A10: x in ( Carrier L ) by XBOOLE_0:def 1;
( Carrier L ) c= ( lines M ) by VECTSP_6:def 4;
then consider i such that A11: i in ( Seg m ) and A12: x = ( Line (M,i) ) by A10,CKB128:1;
consider v such that A13: x = v and A14: ( L . v ) <> ( 0. K ) by A10,VECTSP_6:1;
reconsider LM = ( Line (M,i) ) as (Element of ( n -tuples_on (the carrier of K) )) by A12,A13,CKB121:1;
( Line (M,i) ) = ( M . i ) by A11,MATRIX_2:8;
then A15: ( Line (flm,i) ) = ( ( L . v ) * LM ) by A6,A11,A12,A13,CKB133:1;
now
let j;
assume that
A16: j in ( Seg n );
A17: ( ( n |-> ( 0. K ) ) . j ) = ( 0. K ) by A16,FINSEQ_2:57;
( Carrier L ) c= ( lines M ) by VECTSP_6:def 4;
then ( ( Sum L ) . j ) = ( Sum ( Col (flm,j) ) ) by A2,A16,CKB134:1;
hence ( Sum ( Col (flm,j) ) ) = ( 0. K ) by A5,A17,CKB121:1;
end;
then flm = ( 0. (K,m,n) ) by A4,A7;
then A18: ( flm . i ) = ( n |-> ( 0. K ) ) by A11,FUNCOP_1:7;
A19: ( dom LM ) = ( Seg n ) by FINSEQ_2:124;
( len LM ) = n by CARD_1:def 7;
then consider j such that A20: 1 <= j and A21: j <= n and A22: ( LM . j ) <> ( ( n |-> ( 0. K ) ) . j ) by A3,A11,A9,FINSEQ_1:14;
A23: j in ( NAT ) by ORDINAL1:def 12;
then A24: j in ( Seg n ) by A20,A21;
then A25: ( LM . j ) <> ( 0. K ) by A22,FINSEQ_2:57;
j in ( Seg n ) by A20,A21,A23;
then A26: ( LM . j ) in ( rng LM ) by A19,FUNCT_1:def 3;
( rng LM ) c= (the carrier of K) by RELAT_1:def 19;
then reconsider LMj = ( LM . j ) as (Element of K) by A26;
n in ( NAT ) by ORDINAL1:def 12;
then A27: ( ( ( L . v ) * LM ) . j ) = ( ( L . v ) * LMj ) by A24,FVSUM_1:51;
( flm . i ) = ( Line (flm,i) ) by A11,MATRIX_2:8;
then ( ( Line (flm,i) ) . j ) = ( 0. K ) by A18,A24,FINSEQ_2:57;
hence thesis by A14,A25,A27,A15,VECTSP_1:12;
end;

assume A28: ( lines M ) is  linearly-independent;
hereby
let i;
assume i in ( Seg m );
then ( Line (M,i) ) in ( lines M ) by CKB128:1;
then ( Line (M,i) ) <> ( 0. V ) by A28,VECTSP_7:2;
hence ( Line (M,i) ) <> ( n |-> ( 0. K ) ) by CKB121:1;
end;
let M1;
assume that
A29: (for i holds (i in ( Seg m ) implies (ex a st ( Line (M1,i) ) = ( a * ( Line (M,i) ) ))))
and
A30: (for j holds (j in ( Seg n ) implies ( Sum ( Col (M1,j) ) ) = ( 0. K )));
consider L being (Linear_Combination of ( lines M )) such that A31: ( L (#) ( MX2FinS M ) ) = M1 by A2,A29,CKB135:1;
A32: ( Carrier L ) c= ( lines M ) by VECTSP_6:def 4;
A33:now
let j;
assume that
A34: 1 <= j
and
A35: j <= n;
j in ( NAT ) by ORDINAL1:def 12;
then A36: j in ( Seg n ) by A34,A35;
hence ( ( Sum L ) . j ) = ( Sum ( Col (( FinS2MX ( L (#) ( MX2FinS M ) ) ),j) ) ) by A2,A32,CKB134:1
.= ( 0. K ) by A30,A31,A36
.= ( n0 . j ) by A36,FINSEQ_2:57;
end;
reconsider SumL = ( Sum L ) as (Element of ( n -tuples_on (the carrier of K) )) by CKB121:1;
( len SumL ) = n by CARD_1:def 7;
then SumL = n0 by A1,A33,FINSEQ_1:14
.= ( 0. V ) by CKB121:1;
then A37: ( Carrier L ) = ( {} ) by A28,VECTSP_7:def 1;
assume M1 <> ( 0. (K,m,n) );
then consider I,J being Nat such that A38: [ I,J ] in ( Indices M1 ) and A39: ( M1 * (I,J) ) <> ( ( 0. (K,m,n) ) * (I,J) ) by MATRIX_1:27;
[ I,J ] in ( Indices ( 0. (K,m,n) ) ) by A38,MATRIX_1:26;
then A40: ( M1 * (I,J) ) <> ( 0. K ) by A39,MATRIX_3:1;
reconsider ii = I,jj = J as (Element of ( NAT )) by ORDINAL1:def 12;
A41: ( Indices M1 ) = ( Indices M ) by MATRIX_1:26;
then ( Indices M1 ) = [: ( Seg ( len M ) ),( Seg ( width M ) ) :] by FINSEQ_1:def 3;
then A42: ii in ( Seg ( len M ) ) by A38,ZFMISC_1:87;
A43: ( len M ) = m by MATRIX_1:def 2;
then ( Line (M,ii) ) in ( lines M ) by A42,CKB128:1;
then reconsider Mii = ( M . ii ) as (Element of V) by A42,A43,MATRIX_2:8;
A44: jj in ( Seg ( width M ) ) by A38,A41,ZFMISC_1:87;
then A45: ( ( Line (M,ii) ) . jj ) = ( M * (ii,jj) ) by MATRIX_1:def 7;
jj in ( Seg ( width M1 ) ) by A38,ZFMISC_1:87;
then ( M1 * (I,J) ) = ( ( Line (( FinS2MX ( L (#) ( MX2FinS M ) ) ),ii) ) . jj ) by A31,MATRIX_1:def 7
.= ( ( ( L . Mii ) * ( Line (M,ii) ) ) . jj ) by A42,CKB133:1
.= ( ( L . Mii ) * ( M * (ii,jj) ) ) by A44,A45,FVSUM_1:51;
then ( L . Mii ) <> ( 0. K ) by A40,VECTSP_1:12;
hence thesis by A37,VECTSP_6:1;
end;
