environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,XCMPLX_0,VECTSP_1,SUBSET_1,FINSEQ_1,MATRIX_1,CARD_1,TREES_1,XXREAL_0,MATRIX_2,QC_LANG1,RELAT_1,SUPINF_2,ARYTM_3,MATRIX_3,FUNCT_1,ZFMISC_1,FINSEQ_2,FUNCT_2,ARYTM_1,FINSET_1,TARSKI,SGRAPH1,CARD_3,ALGSTR_0,SETWISEO,ABIAN,FINSUB_1,BINOP_1,FINSOP_1,CARD_FIN,FUNCOP_1,FUNCT_4,MATRIX11,FINSEQ_5,INT_1,GROUP_1,ABSVALUE,RVSUM_1,STRUCT_0,INCSP_1,FVSUM_1,FREEALG,FINSEQ_3,LAPLACE,CLASSES1,AFINSQ_1,PRVECT_1,RLVECT_2,LMOD_7,VALUED_1,PARTFUN1,RLVECT_3,RLSUB_1,MESFUNC1,RLVECT_5,MATRIX13,RLVECT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,FINSET_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,SETWOP_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,FINSEQ_2,MATRIX_1,FINSUB_1,MATRIX_2,FVSUM_1,FINSOP_1,GROUP_4,MATRIX_3,FINSEQ_7,FUNCT_4,SGRAPH1,NEWTON,FINSEQ_5,DOMAIN_1,MATRIX_6,MATRIX_7,MATRIX11,CARD_FIN,FINSEQ_3,LAPLACE,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_6,VECTSP_7,MATRLIN,VECTSP_9,FINSEQOP,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB125,CKB126,CKB127,CKB130,CKB131;
definitions RLVECT_1,FINSEQ_2,FINSEQ_1,TARSKI,MATRIX_1,FVSUM_1,GROUP_4,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX11,LAPLACE,MEASURE6,VECTSP_1,VECTSP_7,FUNCT_1,RELAT_1,STRUCT_0,ALGSTR_0,FUNCOP_1,CKB17,CKB54,CKB76,CKB88,CKB130,CKB131;
theorems NAT_D,CARD_1,CARD_2,CARD_FIN,COMPUT_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSOP_1,FINSUB_1,FRECHET,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_7,FUNCOP_1,FVSUM_1,GRAPH_2,GRAPH_5,GROUP_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX_9,MATRIX11,MATRIXR1,NAT_1,ORDINAL1,PRVECT_1,RELAT_1,RLVECT_1,SETWISEO,SETWOP_2,SGRAPH1,STIRL2_1,TARSKI,VECTSP_1,VECTSP_2,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,WELLORD2,XBOOLE_0,XBOOLE_1,XREAL_1,ZFMISC_1,XXREAL_0,FINSEQOP,STRUCT_0,MATRIXR2,PARTFUN1,MATRLIN,XREAL_0,MEASURE6,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB52,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB118,CKB119,CKB120,CKB121,CKB124,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136,CKB137;
schemes FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,NAT_1,PRE_POLY,MATRIX_1;
registrations SUBSET_1,FUNCT_1,FINSET_1,STRUCT_0,FVSUM_1,MATRIX_2,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,CARD_1,SGRAPH1,MATRIX_1,FUNCOP_1,MATRIX11,SETFAM_1,FINSEQ_2,PRVECT_1,MATRLIN,XREAL_0,XBOOLE_0,VALUED_0,VECTSP_7,RELSET_1,CKB46,CKB47,CKB48,CKB49,CKB117,CKB122,CKB123;
constructors SETWISEO,FINSOP_1,ALGSTR_1,FVSUM_1,DOMAIN_1,SEQM_3,XXREAL_0,FINSEQ_5,GROUP_4,FINSEQ_7,WELLORD2,NEWTON,STIRL2_1,CARD_FIN,MATRIX_6,MATRIX_7,MATRIX11,LAPLACE,PRVECT_1,VECTSP_6,VECTSP_7,VECTSP_9,NAT_D,BINOP_2,MATRLIN,VALUED_0,RELSET_1,MEASURE6,SETFAM_1,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB127,CKB130,CKB131;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve m for Nat;
reserve n for Nat;
reserve K for Field;
reserve a for (Element of K);
reserve v for (Vector of ( n -VectSp_over K ));
reserve L for (Linear_Combination of ( n -VectSp_over K ));
reserve M for (Matrix of m,n,K);
theorem
Th111: (for M being (Diagonal of n,K) holds (( the_rank_of M ) = n implies ( lines M ) is (Basis of ( n -VectSp_over K ))))
proof
let M being (Diagonal of n,K);
assume that
A1: ( the_rank_of M ) = n;
set lM = ( lines M );
set V = ( n -VectSp_over K );
reconsider V9 = V as (Subspace of V) by VECTSP_4:24;
now
let v;
thus (v in ( Lin lM ) implies v in V9) by STRUCT_0:def 5;
thus (v in V9 implies v in ( Lin lM ))
proof
reconsider t = v as (Element of ( n -tuples_on (the carrier of K) )) by CKB121:1;
assume v in V9;
deffunc F(Nat) = ( ( ( t /. $1 ) * ( ( M * ($1,$1) ) " ) ) * ( Line (M,$1) ) );
consider f being (FinSequence of ( ( width M ) -tuples_on (the carrier of K) )) such that A2: ( len f ) = n and A3: (for j holds (j in ( dom f ) implies ( f . j ) = F(j))) from FINSEQ_2:sch 1;
A4: ( dom f ) = ( Seg n ) by A2,FINSEQ_1:def 3;
( width M ) = n by MATRIX_1:24;
then reconsider f as (FinSequence of (the carrier of V)) by CKB121:1;
reconsider M1 = ( FinS2MX f ) as (Matrix of n,K) by A2;
now
let i;
assume that
A5: i in ( Seg n );
( Line (M1,i) ) = ( M1 . i ) by A5,MATRIX_2:8
.= F(i) by A3,A4,A5;
hence (ex a st ( Line (M1,i) ) = ( a * ( Line (M,i) ) ));
end;
then consider L being (Linear_Combination of lM) such that A6: ( L (#) ( MX2FinS M ) ) = M1 by A1,CKB132:1,CKB135:1;
set MX = ( MX2FinS M );
A7: ( len t ) = n by CARD_1:def 7;
reconsider SumL = ( Sum L ) as (Element of ( n -tuples_on (the carrier of K) )) by CKB121:1;
A8: ( Carrier L ) c= lM by VECTSP_6:def 4;
A9:now
set diag = ( diagonal_of_Matrix M );
let i;
assume that
A10: 1 <= i
and
A11: i <= n;
i in ( NAT ) by ORDINAL1:def 12;
then A12: i in ( Seg n ) by A10,A11;
then A13: ( diag . i ) = ( M * (i,i) ) by MATRIX_3:def 10;
A14: ( len diag ) = n by MATRIX_3:def 10;
then A15: ( dom diag ) = ( Seg n ) by FINSEQ_1:def 3;
A16: ( width M ) = n by MATRIX_1:24;
then A17: ( ( Line (M,i) ) . i ) = ( M * (i,i) ) by A12,MATRIX_1:def 7;
set C = ( Col (M1,i) );
A18: ( dom t ) = ( Seg n ) by FINSEQ_2:124;
( len C ) = ( len M1 ) by MATRIX_1:def 8;
then A19: ( dom C ) = ( Seg ( len M1 ) ) by FINSEQ_1:def 3;
( len M ) = n by MATRIX_1:24;
then A20: ( dom M ) = ( Seg n ) by FINSEQ_1:def 3;
A21: ( Det M ) <> ( 0. K ) by A1,CKB100:1;
A22: ( len M1 ) = n by MATRIX_1:24;
then A23: ( dom M1 ) = ( Seg n ) by FINSEQ_1:def 3;
( Det M ) = ( Product diag ) by A10,A11,A14,MATRIX_7:17,NAT_1:14;
then A24: ( diag . i ) <> ( 0. K ) by A12,A21,A15,FVSUM_1:82;
A25: ( Line (M1,i) ) = ( M1 . i ) by A12,MATRIX_2:8
.= ( ( ( t /. i ) * ( ( M * (i,i) ) " ) ) * ( Line (M,i) ) ) by A3,A12,A23;
A26: ( width M1 ) = n by MATRIX_1:24;
now
let k;
assume that
A27: k in ( dom C )
and
A28: k <> i;
A29: [ k,i ] in ( Indices M ) by A22,A16,A12,A19,A20,A27,ZFMISC_1:87;
A30: ( ( Line (M,k) ) . i ) = ( M * (k,i) ) by A16,A12,MATRIX_1:def 7
.= ( 0. K ) by A28,A29,MATRIX_1:def 14;
A31: ( MX /. k ) = ( M . k ) by A22,A19,A20,A27,PARTFUN1:def 6
.= ( Line (M,k) ) by A22,A19,A27,MATRIX_2:8;
( Line (M1,k) ) = ( M1 . k ) by A19,A27,MATRIX_2:8
.= ( ( L . ( MX /. k ) ) * ( MX /. k ) ) by A6,A22,A19,A23,A27,VECTSP_6:def 5
.= ( ( L . ( MX /. k ) ) * ( Line (M,k) ) ) by A16,A31,CKB121:1;
then ( ( Line (M1,k) ) . i ) = ( ( L . ( MX /. k ) ) * ( 0. K ) ) by A16,A12,A30,FVSUM_1:51
.= ( 0. K ) by VECTSP_1:7;
hence ( 0. K ) = ( M1 * (k,i) ) by A26,A12,MATRIX_1:def 7
.= ( C . k ) by A22,A19,A23,A27,MATRIX_1:def 8;
end;
then ( C . i ) = ( Sum C ) by A22,A12,A19,MATRIX_3:12
.= ( SumL . i ) by A1,A6,A8,A12,CKB132:1,CKB134:1;
hence ( SumL . i ) = ( M1 * (i,i) ) by A12,A23,MATRIX_1:def 8
.= ( ( Line (M1,i) ) . i ) by A26,A12,MATRIX_1:def 7
.= ( ( ( t /. i ) * ( ( M * (i,i) ) " ) ) * ( M * (i,i) ) ) by A16,A12,A25,A17,FVSUM_1:51
.= ( ( t /. i ) * ( ( ( M * (i,i) ) " ) * ( M * (i,i) ) ) ) by GROUP_1:def 3
.= ( ( t /. i ) * ( 1_ K ) ) by A24,A13,VECTSP_1:def 10
.= ( t /. i ) by VECTSP_1:def 4
.= ( t . i ) by A12,A18,PARTFUN1:def 6;
end;
( len SumL ) = n by CARD_1:def 7;
then SumL = t by A7,A9,FINSEQ_1:14;
hence thesis by VECTSP_7:7;
end;

end;
then A32: ( Lin lM ) = ( the VectSpStr of V ) by VECTSP_4:30;
( lines M ) is  linearly-independent by A1,CKB137:1;
hence thesis by A32,VECTSP_7:def 3;
end;
