environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,XCMPLX_0,VECTSP_1,SUBSET_1,FINSEQ_1,MATRIX_1,CARD_1,TREES_1,XXREAL_0,MATRIX_2,QC_LANG1,RELAT_1,SUPINF_2,ARYTM_3,MATRIX_3,FUNCT_1,ZFMISC_1,FINSEQ_2,FUNCT_2,ARYTM_1,FINSET_1,TARSKI,SGRAPH1,CARD_3,ALGSTR_0,SETWISEO,ABIAN,FINSUB_1,BINOP_1,FINSOP_1,CARD_FIN,FUNCOP_1,FUNCT_4,MATRIX11,FINSEQ_5,INT_1,GROUP_1,ABSVALUE,RVSUM_1,STRUCT_0,INCSP_1,FVSUM_1,FREEALG,FINSEQ_3,LAPLACE,CLASSES1,AFINSQ_1,PRVECT_1,RLVECT_2,LMOD_7,VALUED_1,PARTFUN1,RLVECT_3,RLSUB_1,MESFUNC1,RLVECT_5,MATRIX13,RLVECT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,FINSET_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,SETWOP_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,FINSEQ_2,MATRIX_1,FINSUB_1,MATRIX_2,FVSUM_1,FINSOP_1,GROUP_4,MATRIX_3,FINSEQ_7,FUNCT_4,SGRAPH1,NEWTON,FINSEQ_5,DOMAIN_1,MATRIX_6,MATRIX_7,MATRIX11,CARD_FIN,FINSEQ_3,LAPLACE,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_6,VECTSP_7,MATRLIN,VECTSP_9,FINSEQOP,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB125,CKB126,CKB127,CKB130,CKB131;
definitions RLVECT_1,FINSEQ_2,FINSEQ_1,TARSKI,MATRIX_1,FVSUM_1,GROUP_4,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX11,LAPLACE,MEASURE6,VECTSP_1,VECTSP_7,FUNCT_1,RELAT_1,STRUCT_0,ALGSTR_0,FUNCOP_1,CKB17,CKB54,CKB76,CKB88,CKB130,CKB131;
theorems NAT_D,CARD_1,CARD_2,CARD_FIN,COMPUT_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSOP_1,FINSUB_1,FRECHET,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_7,FUNCOP_1,FVSUM_1,GRAPH_2,GRAPH_5,GROUP_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX_9,MATRIX11,MATRIXR1,NAT_1,ORDINAL1,PRVECT_1,RELAT_1,RLVECT_1,SETWISEO,SETWOP_2,SGRAPH1,STIRL2_1,TARSKI,VECTSP_1,VECTSP_2,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,WELLORD2,XBOOLE_0,XBOOLE_1,XREAL_1,ZFMISC_1,XXREAL_0,FINSEQOP,STRUCT_0,MATRIXR2,PARTFUN1,MATRLIN,XREAL_0,MEASURE6,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB52,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB118,CKB119,CKB120,CKB121,CKB124,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136,CKB137,CKB138,CKB139,CKB141,CKB142,CKB143,CKB144,CKB145,CKB146,CKB147,CKB148,CKB149,CKB150;
schemes FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,NAT_1,PRE_POLY,MATRIX_1;
registrations SUBSET_1,FUNCT_1,FINSET_1,STRUCT_0,FVSUM_1,MATRIX_2,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,CARD_1,SGRAPH1,MATRIX_1,FUNCOP_1,MATRIX11,SETFAM_1,FINSEQ_2,PRVECT_1,MATRLIN,XREAL_0,XBOOLE_0,VALUED_0,VECTSP_7,RELSET_1,CKB46,CKB47,CKB48,CKB49,CKB117,CKB122,CKB123,CKB140;
constructors SETWISEO,FINSOP_1,ALGSTR_1,FVSUM_1,DOMAIN_1,SEQM_3,XXREAL_0,FINSEQ_5,GROUP_4,FINSEQ_7,WELLORD2,NEWTON,STIRL2_1,CARD_FIN,MATRIX_6,MATRIX_7,MATRIX11,LAPLACE,PRVECT_1,VECTSP_6,VECTSP_7,VECTSP_9,NAT_D,BINOP_2,MATRLIN,VALUED_0,RELSET_1,MEASURE6,SETFAM_1,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB127,CKB130,CKB131;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve y for set;
reserve i for Nat;
reserve m for Nat;
reserve n for Nat;
reserve K for Field;
reserve P for  without_zero  finite (Subset of ( NAT ));
reserve M for (Matrix of m,n,K);
theorem
Th122: (for U being (Subset of ( n -VectSp_over K )) holds (U c= ( lines M ) implies (ex P st ((P c= ( Seg m ) & ( lines ( Segm (M,P,( Seg n )) ) ) = U) & ( Segm (M,P,( Seg n )) ) is  without_repeated_line))))
proof
defpred P[ set,set ]
 means
(ex i st ((i in ( Seg m ) & ( Line (M,i) ) = $1) & $2 = i));
let U being (Subset of ( n -VectSp_over K ));
assume that
A1: U c= ( lines M );
A2: (for x holds (x in U implies (ex y st (y in ( Seg m ) & P[ x,y ]))))
proof
let x;
assume x in U;
then consider i such that A3: i in ( Seg m ) and A4: x = ( Line (M,i) ) by A1,CKB128:1;
take i;
thus thesis by A3,A4;
end;
consider f being (Function of U,( Seg m )) such that A5: (for x holds (x in U implies P[ x,( f . x ) ])) from FUNCT_2:sch 1(A2);
A6: ( rng f ) c= ( Seg m ) by RELAT_1:def 19;
then (not ( 0 ) in ( rng f ));
then reconsider P = ( rng f ) as  without_zero  finite (Subset of ( NAT )) by A6,MEASURE6:def 2,XBOOLE_1:1;
set S = ( Segm (M,P,( Seg n )) );
A7: ( rng ( Sgm P ) ) = P by A6,FINSEQ_1:def 13;
A8: ( lines S ) c= U
proof
A9: ( rng ( Sgm P ) ) = P by A6,FINSEQ_1:def 13;
let x;
A10: ( dom S ) = ( Seg ( len S ) ) by FINSEQ_1:def 3
.= ( Seg ( card P ) ) by MATRIX_1:def 2;
assume A11: x in ( lines S );
then consider y such that A12: y in ( dom S ) and A13: ( S . y ) = x by FUNCT_1:def 3;
( lines S ) c= ( lines M ) by A6,CKB147:1;
then A14: M <> ( {} ) by A11;
( len M ) = m by MATRIX_1:def 2;
then A15: ( width M ) = n by A14,CKB1:1;
reconsider y as (Element of ( NAT )) by A12;
( dom ( Sgm P ) ) = ( Seg ( card P ) ) by A6,FINSEQ_3:40;
then ( ( Sgm P ) . y ) in ( rng ( Sgm P ) ) by A12,A10,FUNCT_1:def 3;
then consider z being set such that A16: z in ( dom f ) and A17: ( f . z ) = ( ( Sgm P ) . y ) by A9,FUNCT_1:def 3;
(ex i st ((i in ( Seg m ) & ( Line (M,i) ) = z) & ( f . z ) = i)) by A5,A16;
then z = ( Line (S,y) ) by A12,A10,A17,A15,CKB59:1
.= x by A12,A13,A10,MATRIX_2:8;
hence thesis by A16;
end;
take P;
thus P c= ( Seg m ) by RELAT_1:def 19;
U c= ( lines S )
proof
let x;
A18: ( dom ( Sgm P ) ) = ( Seg ( card P ) ) by A6,FINSEQ_3:40;
assume A19: x in U;
then consider i such that A20: i in ( Seg m ) and A21: ( Line (M,i) ) = x and A22: ( f . x ) = i by A5;
( dom f ) = U by A20,FUNCT_2:def 1;
then i in P by A19,A22,FUNCT_1:def 3;
then i in ( rng ( Sgm P ) ) by A6,FINSEQ_1:def 13;
then consider y such that A23: y in ( dom ( Sgm P ) ) and A24: ( ( Sgm P ) . y ) = i by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A23;
m <> ( 0 ) by A20;
then ( width M ) = n by CKB1:1;
then ( Line (S,y) ) = x by A21,A23,A24,A18,CKB59:1;
hence thesis by A23,A18,CKB128:1;
end;
hence U = ( lines S ) by A8,XBOOLE_0:def 10;
let x1 being set;
let x2 being set;
assume that
A25: x1 in ( dom S )
and
A26: x2 in ( dom S )
and
A27: ( S . x1 ) = ( S . x2 );
A28: ( dom S ) = ( Seg ( len S ) ) by FINSEQ_1:def 3
.= ( Seg ( card P ) ) by MATRIX_1:def 2;
then A29: ( dom ( Sgm P ) ) = ( dom S ) by A6,FINSEQ_3:40;
reconsider i1 = x1,i2 = x2 as (Element of ( NAT )) by A25,A26;
A30: ( dom ( Sgm P ) ) = ( Seg ( card P ) ) by A6,FINSEQ_3:40;
then ( ( Sgm P ) . i1 ) in ( rng ( Sgm P ) ) by A25,A28,FUNCT_1:def 3;
then consider y1 being set such that A31: y1 in ( dom f ) and A32: ( f . y1 ) = ( ( Sgm P ) . i1 ) by A7,FUNCT_1:def 3;
A33: (ex j1 being Nat st ((j1 in ( Seg m ) & ( Line (M,j1) ) = y1) & ( f . y1 ) = j1)) by A5,A31;
then m <> ( 0 );
then A34: ( width M ) = n by CKB1:1;
( ( Sgm P ) . i2 ) in ( rng ( Sgm P ) ) by A26,A28,A30,FUNCT_1:def 3;
then consider y2 being set such that A35: y2 in ( dom f ) and A36: ( f . y2 ) = ( ( Sgm P ) . i2 ) by A7,FUNCT_1:def 3;
(ex j2 being Nat st ((j2 in ( Seg m ) & ( Line (M,j2) ) = y2) & ( f . y2 ) = j2)) by A5,A35;
then A37: ( Line (S,i2) ) = y2 by A26,A28,A36,A34,CKB59:1;
A38: ( Sgm P ) is  one-to-one by A6,FINSEQ_3:92;
A39: ( Line (S,i1) ) = ( S . i1 ) by A25,A28,MATRIX_2:8;
( Line (S,i1) ) = y1 by A25,A28,A32,A33,A34,CKB59:1;
then ( ( Sgm P ) . i1 ) = ( ( Sgm P ) . i2 ) by A26,A27,A28,A32,A36,A37,A39,MATRIX_2:8;
hence thesis by A25,A26,A29,A38,FUNCT_1:def 4;
end;
