environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,XCMPLX_0,VECTSP_1,SUBSET_1,FINSEQ_1,MATRIX_1,CARD_1,TREES_1,XXREAL_0,MATRIX_2,QC_LANG1,RELAT_1,SUPINF_2,ARYTM_3,MATRIX_3,FUNCT_1,ZFMISC_1,FINSEQ_2,FUNCT_2,ARYTM_1,FINSET_1,TARSKI,SGRAPH1,CARD_3,ALGSTR_0,SETWISEO,ABIAN,FINSUB_1,BINOP_1,FINSOP_1,CARD_FIN,FUNCOP_1,FUNCT_4,MATRIX11,FINSEQ_5,INT_1,GROUP_1,ABSVALUE,RVSUM_1,STRUCT_0,INCSP_1,FVSUM_1,FREEALG,FINSEQ_3,LAPLACE,CLASSES1,AFINSQ_1,PRVECT_1,RLVECT_2,LMOD_7,VALUED_1,PARTFUN1,RLVECT_3,RLSUB_1,MESFUNC1,RLVECT_5,MATRIX13,RLVECT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,FINSET_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,SETWOP_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,FINSEQ_2,MATRIX_1,FINSUB_1,MATRIX_2,FVSUM_1,FINSOP_1,GROUP_4,MATRIX_3,FINSEQ_7,FUNCT_4,SGRAPH1,NEWTON,FINSEQ_5,DOMAIN_1,MATRIX_6,MATRIX_7,MATRIX11,CARD_FIN,FINSEQ_3,LAPLACE,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_6,VECTSP_7,MATRLIN,VECTSP_9,FINSEQOP,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB125,CKB126,CKB127,CKB130,CKB131;
definitions RLVECT_1,FINSEQ_2,FINSEQ_1,TARSKI,MATRIX_1,FVSUM_1,GROUP_4,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX11,LAPLACE,MEASURE6,VECTSP_1,VECTSP_7,FUNCT_1,RELAT_1,STRUCT_0,ALGSTR_0,FUNCOP_1,CKB17,CKB54,CKB76,CKB88,CKB130,CKB131;
theorems NAT_D,CARD_1,CARD_2,CARD_FIN,COMPUT_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSOP_1,FINSUB_1,FRECHET,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_7,FUNCOP_1,FVSUM_1,GRAPH_2,GRAPH_5,GROUP_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX_9,MATRIX11,MATRIXR1,NAT_1,ORDINAL1,PRVECT_1,RELAT_1,RLVECT_1,SETWISEO,SETWOP_2,SGRAPH1,STIRL2_1,TARSKI,VECTSP_1,VECTSP_2,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,WELLORD2,XBOOLE_0,XBOOLE_1,XREAL_1,ZFMISC_1,XXREAL_0,FINSEQOP,STRUCT_0,MATRIXR2,PARTFUN1,MATRLIN,XREAL_0,MEASURE6,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB52,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB118,CKB119,CKB120,CKB121,CKB124,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133;
schemes FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,NAT_1,PRE_POLY,MATRIX_1;
registrations SUBSET_1,FUNCT_1,FINSET_1,STRUCT_0,FVSUM_1,MATRIX_2,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,CARD_1,SGRAPH1,MATRIX_1,FUNCOP_1,MATRIX11,SETFAM_1,FINSEQ_2,PRVECT_1,MATRLIN,XREAL_0,XBOOLE_0,VALUED_0,VECTSP_7,RELSET_1,CKB46,CKB47,CKB48,CKB49,CKB117,CKB122,CKB123;
constructors SETWISEO,FINSOP_1,ALGSTR_1,FVSUM_1,DOMAIN_1,SEQM_3,XXREAL_0,FINSEQ_5,GROUP_4,FINSEQ_7,WELLORD2,NEWTON,STIRL2_1,CARD_FIN,MATRIX_6,MATRIX_7,MATRIX11,LAPLACE,PRVECT_1,VECTSP_6,VECTSP_7,VECTSP_9,NAT_D,BINOP_2,MATRLIN,VALUED_0,RELSET_1,MEASURE6,SETFAM_1,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB127,CKB130,CKB131;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve k for Nat;
reserve m for Nat;
reserve n for Nat;
reserve K for Field;
reserve a for (Element of K);
reserve v for (Vector of ( n -VectSp_over K ));
reserve L for (Linear_Combination of ( n -VectSp_over K ));
reserve M for (Matrix of m,n,K);
theorem
Th107: (((M is  without_repeated_line & ( Carrier L ) c= ( lines M )) & i in ( Seg n )) implies ( ( Sum L ) . i ) = ( Sum ( Col (( FinS2MX ( L (#) ( MX2FinS M ) ) ),i) ) ))
proof
assume that
A1: M is  without_repeated_line
and
A2: ( Carrier L ) c= ( lines M )
and
A3: i in ( Seg n );
set MX = ( MX2FinS M );
set V = ( n -VectSp_over K );
set LM = ( L (#) MX );
A4: ( len LM ) = ( len M ) by VECTSP_6:def 5;
set FLM = ( FinS2MX LM );
set C = ( Col (FLM,i) );
( len LM ) = ( len C ) by MATRIX_1:def 8;
then consider g being (Function of ( NAT ),(the carrier of K)) such that A5: ( Sum C ) = ( g . ( len M ) ) and A6: ( g . ( 0 ) ) = ( 0. K ) and A7: (for j being (Element of ( NAT )) holds (for a holds ((j < ( len M ) & a = ( C . ( j + 1 ) )) implies ( g . ( j + 1 ) ) = ( ( g . j ) + a )))) by A4,RLVECT_1:def 12;
( Sum L ) = ( Sum LM ) by A1,A2,VECTSP_9:3;
then consider f being (Function of ( NAT ),(the carrier of V)) such that A8: ( Sum L ) = ( f . ( len M ) ) and A9: ( f . ( 0 ) ) = ( 0. V ) and A10: (for j being (Element of ( NAT )) holds (for v holds ((j < ( len M ) & v = ( LM . ( j + 1 ) )) implies ( f . ( j + 1 ) ) = ( ( f . j ) + v )))) by A4,RLVECT_1:def 12;
defpred P[ Nat ]
 means
($1 <= ( len M ) implies (for v being (Element of V) holds (v = ( f . $1 ) implies ( v . i ) = ( g . $1 ))));
A11: ( len M ) = m by MATRIX_1:def 2;
A12: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
reconsider N = n as (Element of ( NAT )) by ORDINAL1:def 12;
let k;
assume that
A13: P[ k ];
set k1 = ( k + 1 );
reconsider kk = k as (Element of ( NAT )) by ORDINAL1:def 12;
assume A14: k1 <= ( len M );
then A15: k < ( len M ) by NAT_1:13;
A16: ( width FLM ) = n by A4,A14,CKB1:1;
1 <= k1 by NAT_1:14;
then A17: k1 in ( Seg ( len M ) ) by A14;
then A18: k1 in ( dom FLM ) by A4,FINSEQ_1:def 3;
A19: ( MX . k1 ) = ( Line (M,k1) ) by A11,A17,MATRIX_2:8;
then ( MX . k1 ) in ( lines M ) by A11,A17,CKB128:1;
then reconsider MXK1 = ( MX . k1 ) as (Element of V);
k1 in ( dom MX ) by A17,FINSEQ_1:def 3;
then ( MX /. k1 ) = ( MX . k1 ) by PARTFUN1:def 6;
then A20: ( LM . k1 ) = ( ( L . MXK1 ) * MXK1 ) by A18,VECTSP_6:def 5;
then reconsider LMK1 = ( LM . k1 ) as (Element of V);
let v;
assume v = ( f . k1 );
then A21: v = ( LMK1 + ( f . kk ) ) by A10,A15;
reconsider lmk1 = LMK1,mxk1 = MXK1,fk = ( f . kk ) as (Element of ( N -tuples_on (the carrier of K) )) by CKB121:1;
LMK1 = ( ( L . MXK1 ) * mxk1 ) by A20,CKB121:1
.= ( Line (FLM,k1) ) by A17,A19,CKB133:1;
then A22: ( LMK1 . i ) = ( FLM * (k1,i) ) by A3,A16,MATRIX_1:def 7;
( dom lmk1 ) = ( Seg n ) by FINSEQ_2:124;
then A23: ( lmk1 . i ) in ( rng lmk1 ) by A3,FUNCT_1:def 3;
( rng lmk1 ) c= (the carrier of K) by FINSEQ_1:def 4;
then reconsider lmk1i = ( lmk1 . i ) as (Element of K) by A23;
( C . k1 ) = ( FLM * (k1,i) ) by A18,MATRIX_1:def 8;
then A24: ( g . k1 ) = ( lmk1i + ( g . kk ) ) by A7,A22,A15;
A25: ( LMK1 + ( f . kk ) ) = ( lmk1 + fk ) by CKB121:1;
( fk . i ) = ( g . kk ) by A13,A14,NAT_1:13;
hence ( v . i ) = ( g . k1 ) by A3,A24,A21,A25,FVSUM_1:18;
end;
A26: P[ ( 0 ) ]
proof
assume ( 0 ) <= ( len M );
A27: ( 0. V ) = ( n |-> ( 0. K ) ) by CKB121:1;
let v;
assume v = ( f . ( 0 ) );
hence ( v . i ) = ( g . ( 0 ) ) by A3,A9,A6,A27,FINSEQ_2:57;
end;
(for k holds P[ k ]) from NAT_1:sch 2(A26,A12);
hence thesis by A8,A5;
end;
