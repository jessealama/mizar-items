environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,XCMPLX_0,VECTSP_1,SUBSET_1,FINSEQ_1,MATRIX_1,CARD_1,TREES_1,XXREAL_0,MATRIX_2,QC_LANG1,RELAT_1,SUPINF_2,ARYTM_3,MATRIX_3,FUNCT_1,ZFMISC_1,FINSEQ_2,FUNCT_2,ARYTM_1,FINSET_1,TARSKI,SGRAPH1,CARD_3,ALGSTR_0,SETWISEO,ABIAN,FINSUB_1,BINOP_1,FINSOP_1,CARD_FIN,FUNCOP_1,FUNCT_4,MATRIX11,FINSEQ_5,INT_1,GROUP_1,ABSVALUE,RVSUM_1,STRUCT_0,INCSP_1,FVSUM_1,FREEALG,FINSEQ_3,LAPLACE,CLASSES1,AFINSQ_1,PRVECT_1,RLVECT_2,LMOD_7,VALUED_1,PARTFUN1,RLVECT_3,RLSUB_1,MESFUNC1,RLVECT_5,MATRIX13,RLVECT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,FINSET_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,SETWOP_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,FINSEQ_2,MATRIX_1,FINSUB_1,MATRIX_2,FVSUM_1,FINSOP_1,GROUP_4,MATRIX_3,FINSEQ_7,FUNCT_4,SGRAPH1,NEWTON,FINSEQ_5,DOMAIN_1,MATRIX_6,MATRIX_7,MATRIX11,CARD_FIN,FINSEQ_3,LAPLACE,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_6,VECTSP_7,MATRLIN,VECTSP_9,FINSEQOP,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB125,CKB126,CKB127,CKB130,CKB131;
definitions RLVECT_1,FINSEQ_2,FINSEQ_1,TARSKI,MATRIX_1,FVSUM_1,GROUP_4,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX11,LAPLACE,MEASURE6,VECTSP_1,VECTSP_7,FUNCT_1,RELAT_1,STRUCT_0,ALGSTR_0,FUNCOP_1,CKB17,CKB54,CKB76,CKB88,CKB130,CKB131;
theorems NAT_D,CARD_1,CARD_2,CARD_FIN,COMPUT_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSOP_1,FINSUB_1,FRECHET,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_7,FUNCOP_1,FVSUM_1,GRAPH_2,GRAPH_5,GROUP_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_7,MATRIX_9,MATRIX11,MATRIXR1,NAT_1,ORDINAL1,PRVECT_1,RELAT_1,RLVECT_1,SETWISEO,SETWOP_2,SGRAPH1,STIRL2_1,TARSKI,VECTSP_1,VECTSP_2,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,WELLORD2,XBOOLE_0,XBOOLE_1,XREAL_1,ZFMISC_1,XXREAL_0,FINSEQOP,STRUCT_0,MATRIXR2,PARTFUN1,MATRLIN,XREAL_0,MEASURE6,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB44,CKB45,CKB52,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB118,CKB119,CKB120,CKB121,CKB124,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136;
schemes FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,NAT_1,PRE_POLY,MATRIX_1;
registrations SUBSET_1,FUNCT_1,FINSET_1,STRUCT_0,FVSUM_1,MATRIX_2,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,CARD_1,SGRAPH1,MATRIX_1,FUNCOP_1,MATRIX11,SETFAM_1,FINSEQ_2,PRVECT_1,MATRLIN,XREAL_0,XBOOLE_0,VALUED_0,VECTSP_7,RELSET_1,CKB46,CKB47,CKB48,CKB49,CKB117,CKB122,CKB123;
constructors SETWISEO,FINSOP_1,ALGSTR_1,FVSUM_1,DOMAIN_1,SEQM_3,XXREAL_0,FINSEQ_5,GROUP_4,FINSEQ_7,WELLORD2,NEWTON,STIRL2_1,CARD_FIN,MATRIX_6,MATRIX_7,MATRIX11,LAPLACE,PRVECT_1,VECTSP_6,VECTSP_7,VECTSP_9,NAT_D,BINOP_2,MATRLIN,VALUED_0,RELSET_1,MEASURE6,SETFAM_1,CKB17,CKB43,CKB50,CKB51,CKB53,CKB54,CKB76,CKB88,CKB127,CKB130,CKB131;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve m for Nat;
reserve n for Nat;
reserve K for Field;
reserve a for (Element of K);
reserve b for (Element of K);
reserve v for (Vector of ( n -VectSp_over K ));
reserve t for (Element of ( n -tuples_on (the carrier of K) ));
reserve L for (Linear_Combination of ( n -VectSp_over K ));
reserve M for (Matrix of m,n,K);
reserve M1 for (Matrix of m,n,K);
theorem
Th110: (( the_rank_of M ) = m implies ( lines M ) is  linearly-independent)
proof
assume A1: ( the_rank_of M ) = m;
reconsider N = n as (Element of ( NAT )) by ORDINAL1:def 12;
set V = ( n -VectSp_over K );
per cases ;
suppose m = ( 0 );

then ( len M ) = ( 0 ) by MATRIX_1:def 2;
then M = ( {} );
hence thesis;
end;
suppose A2: m <> ( 0 );

then A3: ( width M ) = n by CKB1:1;
A4: M is  without_repeated_line by A1,CKB132:1;
A5:now
set n0 = ( n |-> ( 0. K ) );
set NULL = ( 0. (K,m,n) );
let M1;
assume that
A6: (for i holds (i in ( Seg m ) implies (ex a st ( Line (M1,i) ) = ( a * ( Line (M,i) ) ))))
and
A7: (for j holds (j in ( Seg n ) implies ( Sum ( Col (M1,j) ) ) = ( 0. K )));
assume M1 <> ( 0. (K,m,n) );
then consider i,j such that A8: [ i,j ] in ( Indices M1 ) and A9: ( M1 * (i,j) ) <> ( NULL * (i,j) ) by MATRIX_1:27;
reconsider i,j as (Element of ( NAT )) by ORDINAL1:def 12;
A10: ( len M ) = m by MATRIX_1:def 2;
( Indices M1 ) = ( Indices NULL ) by MATRIX_1:26;
then A11: ( M1 * (i,j) ) <> ( 0. K ) by A8,A9,MATRIX_3:1;
A12: ( Indices M ) = [: ( Seg m ),( Seg n ) :] by A3,MATRIX_1:25;
( Indices M1 ) = ( Indices M ) by MATRIX_1:26;
then A13: i in ( Seg m ) by A12,A8,ZFMISC_1:87;
then consider a such that A14: ( Line (M1,i) ) = ( a * ( Line (M,i) ) ) by A6;
A15: ( width M1 ) = n by A2,CKB1:1;
then A16: j in ( Seg n ) by A8,ZFMISC_1:87;
then A17: ( ( Line (M,i) ) . j ) = ( M * (i,j) ) by A3,MATRIX_1:def 7;
set R = ( RLine (M,i,( a * ( Line (M,i) ) )) );
consider L being (Linear_Combination of ( lines M )) such that A18: ( L (#) ( MX2FinS M ) ) = M1 by A1,A6,CKB132:1,CKB135:1;
set LM = ( L (#) ( MX2FinS M ) );
( len M1 ) = ( len M ) by A18,VECTSP_6:def 5;
then consider f being (Function of ( NAT ),(the carrier of V)) such that A19: ( Sum LM ) = ( f . m ) and A20: ( f . ( 0 ) ) = ( 0. V ) and A21: (for j being (Element of ( NAT )) holds (for v holds ((j < m & v = ( LM . ( j + 1 ) )) implies ( f . ( j + 1 ) ) = ( ( f . j ) + v )))) by A18,A10,RLVECT_1:def 12;
set RR = ( RLine (R,i,n0) );
A22: ( len RR ) = m by MATRIX_1:def 2;
defpred P[ Nat ]
 means
($1 < i implies (for t holds (t = ( f . $1 ) implies ( the_rank_of R ) = ( the_rank_of ( RLine (R,i,( ( Line (R,i) ) + t )) ) ))));
( width M ) = ( len ( Line (M,i) ) ) by MATRIX_1:def 7
.= ( len ( a * ( Line (M,i) ) ) ) by MATRIXR1:16;
then A23: ( width R ) = ( width M ) by MATRIX11:def 3;
A24: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume that
A25: P[ k ];
reconsider kk = k as (Element of ( NAT )) by ORDINAL1:def 12;
set k1 = ( k + 1 );
A26: 1 <= k1 by NAT_1:14;
A27: i <= m by A13,FINSEQ_1:1;
reconsider LR = ( Line (R,i) ),LM1 = ( Line (M1,k1) ) as (Element of ( N -tuples_on (the carrier of K) )) by A2,CKB1:1;
assume A28: k1 < i;
let t;
assume that
A29: t = ( f . k1 );
reconsider t1 = ( f . kk ),T = t as (Element of ( N -tuples_on (the carrier of K) )) by CKB121:1;
set RR = ( RLine (R,i,( ( Line (R,i) ) + t1 )) );
reconsider LRt = ( LR + t ),LRt1 = ( LR + t1 ) as (Element of ( (the carrier of K) * )) by FINSEQ_1:def 11;
A30: ( len ( LR + T ) ) = n by CARD_1:def 7;
A31: ( len ( LR + t1 ) ) = ( width R ) by A3,A23,CARD_1:def 7;
then ( width RR ) = ( width R ) by MATRIX11:def 3;
then A32: ( RLine (RR,i,( LR + t )) ) = ( Replace (RR,i,LRt) ) by A3,A23,A30,MATRIX11:29
.= ( Replace (( Replace (R,i,LRt1) ),i,LRt) ) by A31,MATRIX11:29
.= ( Replace (R,i,LRt) ) by FUNCT_7:34
.= ( RLine (R,i,( LR + t )) ) by A3,A23,A30,MATRIX11:29;
i <= m by A13,FINSEQ_1:1;
then k1 < m by A28,XXREAL_0:2;
then A33: k1 in ( Seg m ) by A26;
then A34: ( Line (M1,k1) ) = ( M1 . k1 ) by MATRIX_2:8;
( Line (M1,k1) ) in ( lines M1 ) by A33,CKB128:1;
then reconsider LMk1 = ( LM . k1 ) as (Element of V) by A18,A33,MATRIX_2:8;
consider a such that A35: ( Line (M1,k1) ) = ( a * ( Line (M,k1) ) ) by A6,A33;
A36: ( Line (M,k1) ) = ( Line (R,k1) ) by A28,A33,MATRIX11:28
.= ( Line (RR,k1) ) by A28,A33,MATRIX11:28;
k < i by A28,NAT_1:13;
then k < m by A27,XXREAL_0:2;
then t = ( ( f . kk ) + LMk1 ) by A21,A29
.= ( t1 + ( Line (M1,k1) ) ) by A15,A18,A34,CKB121:1;
then A37: ( LR + t ) = ( ( LR + t1 ) + LM1 ) by FINSEQOP:28
.= ( ( Line (RR,i) ) + ( a * ( Line (RR,k1) ) ) ) by A13,A35,A31,A36,MATRIX11:28;
A38: ( len RR ) = m by MATRIX_1:def 2;
( the_rank_of R ) = ( the_rank_of RR ) by A25,A28,NAT_1:13;
hence thesis by A28,A33,A38,A32,A37,CKB110:1;
end;
defpred Q[ Nat ]
 means
((i <= $1 & $1 <= m) implies (for t holds (t = ( f . $1 ) implies ( the_rank_of R ) = ( the_rank_of ( RLine (R,i,t) ) ))));
A39: P[ ( 0 ) ]
proof
assume ( 0 ) < i;
let t;
assume t = ( f . ( 0 ) );
then t = ( n |-> ( 0. K ) ) by A20,CKB121:1;
then ( ( Line (R,i) ) + t ) = ( Line (R,i) ) by A3,A23,FVSUM_1:21;
hence thesis by MATRIX11:30;
end;
A40: (for k holds P[ k ]) from NAT_1:sch 2(A39,A24);
A41: (for k holds (Q[ k ] implies Q[ ( k + 1 ) ]))
proof
let k;
assume that
A42: Q[ k ];
reconsider kk = k as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider t1 = ( f . kk ) as (Element of ( N -tuples_on (the carrier of K) )) by CKB121:1;
set k1 = ( k + 1 );
reconsider LR = ( Line (R,i) ),LM1 = ( Line (M1,k1) ) as (Element of ( n -tuples_on (the carrier of K) )) by A2,CKB1:1;
assume that
A43: i <= k1
and
A44: k1 <= m;
A45: k < m by A44,NAT_1:13;
1 <= k1 by NAT_1:14;
then A46: k1 in ( Seg m ) by A44;
then A47: ( Line (M1,k1) ) = ( M1 . k1 ) by MATRIX_2:8;
( Line (M1,k1) ) in ( lines M1 ) by A46,CKB128:1;
then reconsider LMk1 = ( LM . k1 ) as (Element of V) by A18,A46,MATRIX_2:8;
let t;
assume t = ( f . k1 );
then A48: t = ( ( f . kk ) + LMk1 ) by A21,A45
.= ( t1 + LM1 ) by A18,A47,CKB121:1;
consider b such that A49: ( Line (M1,k1) ) = ( b * ( Line (M,k1) ) ) by A6,A46;
reconsider T = t,T1 = t1 as (Element of ( (the carrier of K) * )) by FINSEQ_1:def 11;
per cases  by A43,XXREAL_0:1;
suppose A50: i = k1;

( len LM1 ) = n by CARD_1:def 7;
then LR = LM1 by A3,A14,A46,A50,MATRIX11:28;
then A51: ( LR + t1 ) = t by A48,FINSEQOP:33;
k < i by A50,NAT_1:13;
hence thesis by A40,A51;
end;
suppose A52: i < k1;

set RR = ( RLine (R,i,t1) );
A53: ( len t1 ) = ( width R ) by A3,A23,CARD_1:def 7;
then ( Line (RR,i) ) = t1 by A13,MATRIX11:28;
then A54: t = ( ( Line (RR,i) ) + ( b * ( Line (R,k1) ) ) ) by A46,A49,A48,A52,MATRIX11:28
.= ( ( Line (RR,i) ) + ( b * ( Line (RR,k1) ) ) ) by A46,A52,MATRIX11:28;
A55: ( len t ) = n by CARD_1:def 7;
( width RR ) = ( width R ) by A53,MATRIX11:def 3;
then A56: ( RLine (RR,i,t) ) = ( Replace (RR,i,T) ) by A3,A23,A55,MATRIX11:29
.= ( Replace (( Replace (R,i,T1) ),i,T) ) by A53,MATRIX11:29
.= ( Replace (R,i,T) ) by FUNCT_7:34
.= ( RLine (R,i,t) ) by A3,A23,A55,MATRIX11:29;
A57: ( len RR ) = m by MATRIX_1:def 2;
( the_rank_of R ) = ( the_rank_of ( RLine (R,i,t1) ) ) by A42,A44,A52,NAT_1:13;
hence thesis by A46,A52,A54,A56,A57,CKB110:1;
end;
end;
A58: Q[ ( 0 ) ] by A13;
A59: (for k holds Q[ k ]) from NAT_1:sch 2(A58,A41);
reconsider SumLM = ( Sum LM ) as (Element of ( n -tuples_on (the carrier of K) )) by CKB121:1;
A60:now
let j;
assume that
A61: 1 <= j
and
A62: j <= n;
j in ( NAT ) by ORDINAL1:def 12;
then A63: j in ( Seg n ) by A61,A62;
A64: ( Carrier L ) c= ( lines M ) by VECTSP_6:def 4;
M1 = ( FinS2MX ( L (#) ( MX2FinS M ) ) ) by A18;
then ( Sum ( Col (M1,j) ) ) = ( ( Sum L ) . j ) by A1,A63,A64,CKB132:1,CKB134:1
.= ( SumLM . j ) by A4,A64,VECTSP_9:3;
hence ( SumLM . j ) = ( 0. K ) by A7,A63
.= ( n0 . j ) by A63,FINSEQ_2:57;
end;
( dom RR ) = ( Seg ( len RR ) ) by FINSEQ_1:def 3;
then consider k such that A65: m = ( k + 1 ) and A66: ( len ( Del (RR,i) ) ) = k by A13,A22,FINSEQ_3:104;
A67: ( len SumLM ) = n by CARD_1:def 7;
( M1 * (i,j) ) = ( ( Line (M1,i) ) . j ) by A15,A16,MATRIX_1:def 7
.= ( a * ( M * (i,j) ) ) by A3,A16,A14,A17,FVSUM_1:51;
then a <> ( 0. K ) by A11,VECTSP_1:12;
then A68: m = ( the_rank_of R ) by A1,CKB107:1;
A69: ( len n0 ) = n by CARD_1:def 7;
then A70: ( width RR ) = ( width R ) by A3,A23,MATRIX11:def 3;
A71: ( Line (RR,i) ) = n0 by A3,A13,A23,A69,MATRIX11:28;
i <= m by A13,FINSEQ_1:1;
then m = ( the_rank_of ( RLine (R,i,n0) ) ) by A68,A19,A59,A67,A69,A60,FINSEQ_1:14;
then m = ( the_rank_of ( DelLine (RR,i) ) ) by A3,A23,A71,A70,CKB108:1;
then m <= k by A66,CKB90:1;
hence contradiction by A65,NAT_1:13;
end;
now
A72: ( len M ) = m by MATRIX_1:def 2;
A73: ( dom M ) = ( Seg ( len M ) ) by FINSEQ_1:def 3;
let i;
assume i in ( Seg m );
then consider k such that A74: m = ( k + 1 ) and A75: ( len ( Del (M,i) ) ) = k by A73,A72,FINSEQ_3:104;
assume ( Line (M,i) ) = ( n |-> ( 0. K ) );
then ( the_rank_of ( DelLine (M,i) ) ) = m by A1,A3,CKB108:1;
then m <= k by A75,CKB90:1;
hence contradiction by A74,NAT_1:13;
end;
hence thesis by A4,A5,CKB136:1;
end;
end;
