environ
vocabularies NUMBERS,NAT_1,FUNCT_2,FINSEQ_1,RELAT_1,FUNCT_1,TARSKI,MATRIX_2,FINSEQ_2,XBOOLE_0,SUBSET_1,XXREAL_0,ARYTM_3,JORDAN3,ORDINAL4,ARYTM_1,CARD_1,STRUCT_0,INT_1,CARD_3,GROUP_1,VECTSP_1,MATRIX_1,MATRIX_3,ALGSTR_0,SETWISEO,FINSUB_1,BINOP_1,FINSOP_1,ABIAN,TREES_1,SUPINF_2,FUNCOP_1,MESFUNC1,ZFMISC_1,QC_LANG1,PARTFUN1,FINSEQ_5,CLASSES1,RFINSEQ,MATRIX_7;
notations TARSKI,XBOOLE_0,SUBSET_1,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,RELAT_1,FUNCT_1,BINOP_1,ZFMISC_1,CARD_1,NUMBERS,VECTSP_1,FUNCT_2,FUNCOP_1,SETWISEO,PARTFUN1,GROUP_4,FINSUB_1,NEWTON,FINSOP_1,SETWOP_2,FINSEQ_1,STRUCT_0,ALGSTR_0,MATRIX_2,MATRIX_3,FINSEQ_6,MATRIX_1,CLASSES1,RFINSEQ,FINSEQ_5,GROUP_1,CKB14,CKB18,CKB20,CKB23,CKB25,CKB27;
definitions TARSKI,XBOOLE_0,BINOP_1,FINSEQ_1,MATRIX_1,FINSEQ_2,GROUP_4,ALGSTR_0,RELAT_1,CKB18,CKB20,CKB25,CKB27;
theorems BINOP_1,RLVECT_1,MATRIX_3,VECTSP_1,MATRIX_1,GROUP_1,FUNCT_1,FINSEQ_1,NAT_1,MATRIX_2,FINSEQ_2,TARSKI,FINSOP_1,FVSUM_1,SETWISEO,FUNCT_2,XBOOLE_0,GROUP_4,ENUMSET1,ZFMISC_1,FINSEQ_6,XREAL_1,FINSEQ_5,INTEGRA2,FUNCOP_1,FINSUB_1,XBOOLE_1,RELAT_1,SUBSET_1,RFINSEQ,FINSEQ_3,XXREAL_0,ORDINAL1,NAT_D,PARTFUN1,XREAL_0,CLASSES1,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34;
schemes NAT_1,FUNCT_2,FINSEQ_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,PARTFUN1,FUNCT_2,FINSUB_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,GROUP_1,VECTSP_1,MATRIX_2,FVSUM_1,FINSET_1,CARD_1,RELSET_1,FINSEQ_2;
constructors RELAT_2,PARTFUN1,SETWISEO,REAL_1,SQUARE_1,NAT_1,NAT_D,FINSOP_1,NEWTON,RFINSEQ,BINARITH,FINSEQ_5,ALGSTR_1,GROUP_4,MATRIX_3,FINSEQ_6,CLASSES1,RELSET_1,BINOP_1,CKB14,CKB18,CKB20,CKB23,CKB25,CKB27;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
reserve k for Nat;
reserve i for Nat;
reserve j for Nat;
theorem
Lm2: (for n being (Element of ( NAT )) holds (for IT being (Element of ( Permutations n )) holds ((IT is  even & n >= 1) implies ( IT " ) is  even)))
proof
let n being (Element of ( NAT ));
let IT being (Element of ( Permutations n ));
assume that
A1: IT is  even
and
A2: n >= 1;
reconsider ITP = IT as (Element of ( Permutations n ));
reconsider ITG = ITP as (Element of ( Group_of_Perm n )) by MATRIX_2:def 10;
A3: ( len ( Permutations n ) ) = n by MATRIX_2:18;
then consider l being (FinSequence of ( Group_of_Perm n )) such that A4: ( ( len l ) mod 2 ) = ( 0 ) and A5: IT = ( Product l ) and A6: (for i holds (i in ( dom l ) implies (ex q being (Element of ( Permutations n )) st (( l . i ) = q & q is  being_transposition)))) by A1,MATRIX_2:def 12;
set m = ( len l );
reconsider lv = ( ( Rev l ) " ) as (FinSequence of ( Group_of_Perm n ));
A7: ( len l ) = ( len ( Rev l ) ) by FINSEQ_5:def 3;
then A8: ( len l ) = ( len lv ) by CKB27:def 1;
A9: (for i holds (i in ( dom lv ) implies (ex q2 being (Element of ( Permutations n )) st (( lv . i ) = q2 & q2 is  being_transposition))))
proof
let i;
reconsider ii = i as (Element of ( NAT )) by ORDINAL1:def 12;
assume A10: i in ( dom lv );
then A11: i in ( dom ( Rev l ) ) by A7,A8,FINSEQ_3:29;
A12: i in ( Seg ( len lv ) ) by A10,FINSEQ_1:def 3;
then 1 <= i by FINSEQ_1:1;
then ( m + 1 ) <= ( m + i ) by XREAL_1:7;
then A13: ( ( m + 1 ) - i ) <= ( ( m + i ) - i ) by XREAL_1:9;
i <= m by A8,A12,FINSEQ_1:1;
then A14: ( m - i ) >= ( 0 ) by XREAL_1:48;
then ( ( m - i ) + 1 ) = ( ( m -' i ) + 1 ) by XREAL_0:def 2;
then reconsider j = ( ( ( len l ) - i ) + 1 ) as (Element of ( NAT ));
( ( m - i ) + 1 ) >= ( ( 0 ) + 1 ) by A14,XREAL_1:7;
then j in ( Seg ( len l ) ) by A13;
then A15: j in ( dom l ) by FINSEQ_1:def 3;
then consider q being (Element of ( Permutations n )) such that A16: ( l . j ) = q and A17: q is  being_transposition by A6;
( lv . i ) = ( lv /. i ) by A10,PARTFUN1:def 6;
then reconsider qq = ( lv . i ) as (Element of ( Permutations n )) by MATRIX_2:def 10;
reconsider qqf = qq as (Function of ( Seg n ),( Seg n )) by MATRIX_2:def 9;
A18: ( i + j ) = ( ( len l ) + 1 );
reconsider qf = q as (Function of ( Seg n ),( Seg n )) by MATRIX_2:def 9;
consider i1 being Nat,j1 being Nat such that A19: ((((i1 in ( dom q ) & j1 in ( dom q )) & i1 <> j1) & ( q . i1 ) = j1) & ( q . j1 ) = i1) and A20: (for k being Nat holds (((k <> i1 & k <> j1) & k in ( dom q )) implies ( q . k ) = k)) by A17,MATRIX_2:def 11;
A21: (( dom qf ) = ( Seg n ) & ( dom qqf ) = ( Seg n )) by A2,FUNCT_2:def 1;
A22: qq = ( ( ( Rev l ) " ) /. i ) by A10,PARTFUN1:def 6
.= ( ( ( Rev l ) /. ii ) " ) by A11,CKB27:def 1
.= ( ( l /. j ) " ) by A18,A15,FINSEQ_5:66
.= ( q " ) by A2,A15,A16,CKB34:1,PARTFUN1:def 6;
A23: (for k being (Element of ( NAT )) holds (((k <> j1 & k <> i1) & k in ( dom qq )) implies ( qq . k ) = k))
proof
let k being (Element of ( NAT ));
assume that
A24: (k <> j1 & k <> i1)
and
A25: k in ( dom qq );
( q . k ) = k by A20,A21,A24,A25;
hence thesis by A21,A22,A25,FUNCT_1:32;
end;
A26: qq = ( ( ( Rev l ) " ) /. i ) by A10,PARTFUN1:def 6
.= ( ( ( Rev l ) /. ii ) " ) by A11,CKB27:def 1
.= ( ( l /. j ) " ) by A18,A15,FINSEQ_5:66
.= ( q " ) by A2,A15,A16,CKB34:1,PARTFUN1:def 6;
(ex i st (ex j st (((((i in ( dom qq ) & j in ( dom qq )) & i <> j) & ( qq . i ) = j) & ( qq . j ) = i) & (for k holds (((k <> i & k <> j) & k in ( dom qq )) implies ( qq . k ) = k)))))
proof
take i = i1;
take j = j1;
thus ((((i in ( dom qq ) & j in ( dom qq )) & i <> j) & ( qq . i ) = j) & ( qq . j ) = i) by A19,A21,A26,FUNCT_1:32;
let k;
k in ( NAT ) by ORDINAL1:def 12;
hence thesis by A23;
end;
then qq is  being_transposition by MATRIX_2:def 11;
hence thesis;
end;
( ITG " ) = ( ITP " ) by A2,CKB34:1;
then ( IT " ) = ( Product lv ) by A5,CKB33:1;
hence thesis by A3,A4,A8,A9,MATRIX_2:def 12;
end;
