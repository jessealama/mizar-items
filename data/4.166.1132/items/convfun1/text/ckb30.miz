environ
vocabularies NUMBERS,XBOOLE_0,RLVECT_1,BINOP_1,ZFMISC_1,STRUCT_0,SUBSET_1,FUNCT_1,ALGSTR_0,REAL_1,SUPINF_2,RELAT_1,ARYTM_3,XREAL_0,ORDINAL1,FINSEQ_1,CARD_3,CARD_1,XXREAL_0,TARSKI,PARTFUN1,ORDINAL4,BINOP_2,ARYTM_1,SUPINF_1,NAT_1,FUNCT_2,RFINSEQ,MEASURE6,CONVEX1,RFUNCT_3,FINSET_1,CLASSES1,CONVFUN1;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,FUNCT_1,RELSET_1,PARTFUN1,SUPINF_1,ZFMISC_1,MEASURE6,BINOP_1,FUNCT_2,SUPINF_2,SEQ_1,DOMAIN_1,BINOP_2,FINSET_1,CLASSES1,RFINSEQ,RFUNCT_3,NAT_1,RVSUM_1,EXTREAL1,FINSEQ_1,FINSEQ_4,STRUCT_0,ALGSTR_0,RLVECT_1,CONVEX1,CKB1,CKB2,CKB3,CKB13,CKB26,CKB27;
definitions BINOP_1,RLVECT_1,RVSUM_1,STRUCT_0,ALGSTR_0,MEASURE6,CKB1,CKB2,CKB3,CKB13,CKB26,CKB27;
theorems ZFMISC_1,BINOP_1,FUNCT_2,CONVEX1,SUPINF_2,EXTREAL1,RLVECT_1,RFUNCT_3,RVSUM_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,NAT_1,TARSKI,FUNCT_1,CARD_2,INT_1,XCMPLX_1,XBOOLE_0,RFINSEQ,RLVECT_2,RELAT_1,XBOOLE_1,BINOP_2,XREAL_1,XXREAL_0,XREAL_0,FINSOP_1,PARTFUN1,ALGSTR_0,VALUED_1,XXREAL_3,CKB1,CKB2,CKB3,CKB5,CKB6,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
schemes BINOP_1,DOMAIN_1,FINSEQ_2,FRAENKEL,NAT_1,RECDEF_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,STRUCT_0,RLVECT_1,VALUED_0,ALGSTR_0,CARD_1,XXREAL_3,CKB4,CKB7,CKB8,CKB9,CKB10,CKB11,CKB14;
constructors BINOP_1,DOMAIN_1,REAL_1,FINSEQ_4,FINSOP_1,RVSUM_1,SUPINF_2,RFINSEQ,RFUNCT_3,MEASURE6,EXTREAL1,CONVEX1,SEQ_1,BINOP_2,SUPINF_1,CLASSES1,RELSET_1,CKB1,CKB2,CKB3,CKB13,CKB26,CKB27;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
theorem
(for X being RealLinearSpace holds (for f being (Function of (the carrier of X),( ExtREAL )) holds ((for x being (VECTOR of X) holds ( f . x ) <> ( -infty )) implies (f is  convex iff (for x1,x2 being (VECTOR of X) holds (for p being Real holds ((( 0 ) <= p & p <= 1) implies ( f . ( ( p * x1 ) + ( ( 1 - p ) * x2 ) ) ) <= ( ( ( R_EAL p ) * ( f . x1 ) ) + ( ( R_EAL ( 1 - p ) ) * ( f . x2 ) ) ))))))))
proof
let X being RealLinearSpace;
let f being (Function of (the carrier of X),( ExtREAL ));
assume A1: (for x being (VECTOR of X) holds ( f . x ) <> ( -infty ));
thus (f is  convex implies (for x1,x2 being (VECTOR of X) holds (for p being Real holds ((( 0 ) <= p & p <= 1) implies ( f . ( ( p * x1 ) + ( ( 1 - p ) * x2 ) ) ) <= ( ( ( R_EAL p ) * ( f . x1 ) ) + ( ( R_EAL ( 1 - p ) ) * ( f . x2 ) ) )))))
proof
assume A2: f is  convex;
let x1 being (VECTOR of X);
let x2 being (VECTOR of X);
let p being Real;
assume that
A3: ( 0 ) <= p
and
A4: p <= 1;
per cases ;
suppose A5: p = ( 0 );

then A6: ( ( 1 - p ) * x2 ) = x2 by RLVECT_1:def 8;
( p * x1 ) = ( 0. X ) by A5,RLVECT_1:10;
then A7: ( ( p * x1 ) + ( ( 1 - p ) * x2 ) ) = x2 by A6,RLVECT_1:4;
A8: ( ( R_EAL ( 1 - p ) ) * ( f . x2 ) ) = ( f . x2 ) by A5,XXREAL_3:81;
( ( R_EAL p ) * ( f . x1 ) ) = ( 0. ) by A5;
hence thesis by A7,A8,XXREAL_3:4;
end;
suppose A9: p = 1;

then A10: ( ( 1 - p ) * x2 ) = ( 0. X ) by RLVECT_1:10;
( p * x1 ) = x1 by A9,RLVECT_1:def 8;
then A11: ( ( p * x1 ) + ( ( 1 - p ) * x2 ) ) = x1 by A10,RLVECT_1:4;
A12: ( ( R_EAL p ) * ( f . x1 ) ) = ( f . x1 ) by A9,XXREAL_3:81;
( ( R_EAL ( 1 - p ) ) * ( f . x2 ) ) = ( 0. ) by A9;
hence thesis by A11,A12,XXREAL_3:4;
end;
suppose A13: (p <> ( 0 ) & p <> 1);

then p < 1 by A4,XXREAL_0:1;
hence thesis by A1,A2,A3,A13,CKB29:1;
end;
end;

assume (for x1,x2 being (VECTOR of X) holds (for p being Real holds ((( 0 ) <= p & p <= 1) implies ( f . ( ( p * x1 ) + ( ( 1 - p ) * x2 ) ) ) <= ( ( ( R_EAL p ) * ( f . x1 ) ) + ( ( R_EAL ( 1 - p ) ) * ( f . x2 ) ) ))));
then (for x1,x2 being (VECTOR of X) holds (for p being Real holds ((( 0 ) < p & p < 1) implies ( f . ( ( p * x1 ) + ( ( 1 - p ) * x2 ) ) ) <= ( ( ( R_EAL p ) * ( f . x1 ) ) + ( ( R_EAL ( 1 - p ) ) * ( f . x2 ) ) ))));
hence thesis by A1,CKB29:1;
end;
