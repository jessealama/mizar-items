environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,RLSUB_1,XBOOLE_0,ARYTM_3,STRUCT_0,TARSKI,RLVECT_3,RLVECT_2,CARD_3,SUPINF_2,FINSET_1,FUNCT_1,RLSUB_2,FUNCT_2,RLVECT_5,MATRLIN,RELAT_1,CARD_1,XXREAL_0,FINSEQ_1,ZFMISC_1,ALGSTR_0,PARTFUN1,ORDINAL4,FINSEQ_2,INCSP_1,MESFUNC1,TREES_1,MATRIX_1,GROUP_1,ARYTM_1,FINSEQ_4,RFINSEQ,RANKNULL,MATRIXJ1,MATRIX_3,MATRIX_6,FVSUM_1,RVSUM_1,MATRIXR1,VECTSP10,MATRIX15,QC_LANG1,CLASSES1,PRVECT_1,MATRIX13,LMOD_7,VALUED_1,RLVECT_1,BINOP_1,LATTICES,MATRLIN2,UNIALG_1,MSSUBFAM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,FVSUM_1,MATRIX_3,MATRIX_6,DOMAIN_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,FINSEQOP,PRVECT_1,MATRIX13,MATRLIN,MATRIX15,RFINSEQ,WSIERP_1,GRCAT_1,MOD_2,VECTSP_5,RANKNULL,MATRIXJ1,CKB31,CKB32,CKB34;
definitions STRUCT_0,TARSKI,RLVECT_1,FINSEQ_1,VECTSP_4,FVSUM_1,VECTSP_1,MATRIX_1,MATRIX13,MATRLIN,MATRIX15,FUNCT_1,VECTSP_7,RANKNULL,VECTSP_6,CKB32,CKB34;
theorems ZFMISC_1,RLVECT_1,MATRIX_1,MATRIX_2,MATRIX_4,MATRIX_3,VECTSP_1,NAT_1,FINSEQ_2,CARD_1,CARD_FIN,FINSEQ_1,FINSEQ_3,FINSEQOP,FUNCT_1,FUNCT_2,FUNCOP_1,FVSUM_1,LAPLACE,MATRIX_6,MATRIX_7,MATRIX11,MATRIX13,MATRIXR1,MATRIXR2,MATRLIN,ORDINAL1,PARTFUN1,RELAT_1,STRUCT_0,TARSKI,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XXREAL_0,MATRIX15,MOD_2,RLVECT_2,POLYFORM,VECTSP10,MATRIX_8,RANKNULL,VECTSP_5,FINSEQ_5,RFINSEQ,MATRIXJ1,GRCAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB36;
schemes NAT_1,MATRIX_1,FUNCT_2,FINSEQ_2;
registrations XBOOLE_0,FUNCT_1,FINSET_1,STRUCT_0,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,MATRLIN,MATRIX13,XREAL_0,VECTSP_9,CARD_1,MOD_2,GRCAT_1,PRVECT_1;
constructors FVSUM_1,VECTSP_9,MATRIX_6,LAPLACE,MATRIX15,RANKNULL,VECTSP10,MATRIXJ1,XXREAL_0,REALSET1,BINARITH,RELSET_1,FINSOP_1,MATRIX13,CKB31,CKB32,CKB34;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve K for Field;
reserve V1 for  finite-dimensional (VectSp of K);
reserve b1 for (OrdBasis of V1);
reserve B1 for (FinSequence of V1);
reserve p1 for (FinSequence of K);
reserve p2 for (FinSequence of K);
theorem
Th30: (((((( len p1 ) = ( len p2 ) & ( len p1 ) = ( len B1 )) & ( len p1 ) > ( 0 )) & j in ( dom b1 )) & (for i holds (i in ( dom p2 ) implies ( p2 . i ) = ( ( ( B1 /. i ) |-- b1 ) . j )))) implies ( p1 "*" p2 ) = ( ( ( Sum ( lmlt (p1,B1) ) ) |-- b1 ) . j ))
proof
assume that
A1: ( len p1 ) = ( len p2 )
and
A2: ( len p1 ) = ( len B1 )
and
A3: ( len p1 ) > ( 0 )
and
A4: j in ( dom b1 )
and
A5: (for i holds (i in ( dom p2 ) implies ( p2 . i ) = ( ( ( B1 /. i ) |-- b1 ) . j )));
deffunc m(Nat,Nat) = ( ( ( B1 /. $1 ) |-- b1 ) /. $2 );
consider M being (Matrix of ( len p1 ),( len b1 ),K) such that A6: (for i holds (for j holds ([ i,j ] in ( Indices M ) implies ( M * (i,j) ) = m(i,j)))) from MATRIX_1:sch 1;
A7: ( len M ) = ( len p1 ) by A3,MATRIX_1:23;
then A8: ( dom p1 ) = ( dom M ) by FINSEQ_3:29;
A9: ( width M ) = ( len b1 ) by A3,MATRIX_1:23;
A10: ( dom b1 ) = ( Seg ( len b1 ) ) by FINSEQ_1:def 3;
A11: ( dom p1 ) = ( Seg ( len p1 ) ) by FINSEQ_1:def 3;
A12: ( dom p1 ) = ( dom p2 ) by A1,FINSEQ_3:29;
A13:now
let i;
assume (1 <= i & i <= ( len p2 ));
then A14: i in ( dom p1 ) by A1,A11,FINSEQ_1:1;
then A15: [ i,j ] in ( Indices M ) by A4,A9,A8,A10,ZFMISC_1:87;
( len ( ( B1 /. i ) |-- b1 ) ) = ( len b1 ) by MATRLIN:def 7;
then A16: ( dom ( ( B1 /. i ) |-- b1 ) ) = ( dom b1 ) by FINSEQ_3:29;
thus ( ( Col (M,j) ) . i ) = ( M * (i,j) ) by A8,A14,MATRIX_1:def 8
.= ( ( ( B1 /. i ) |-- b1 ) /. j ) by A6,A15
.= ( ( ( B1 /. i ) |-- b1 ) . j ) by A4,A16,PARTFUN1:def 6
.= ( p2 . i ) by A5,A12,A14;
end;
deffunc mC(Nat) = ( Sum ( mlt (p1,( Col (M,$1) )) ) );
consider MC being (FinSequence of K) such that A17: (( len MC ) = ( len b1 ) & (for j being Nat holds (j in ( dom MC ) implies ( MC . j ) = mC(j)))) from FINSEQ_2:sch 1;
A18: (for j holds (j in ( dom MC ) implies ( MC /. j ) = mC(j)))
proof
let j;
assume A19: j in ( dom MC );
then ( MC . j ) = mC(j) by A17;
hence thesis by A19,PARTFUN1:def 6;
end;
A20: ( dom b1 ) = ( dom MC ) by A17,FINSEQ_3:29;
A21: ( dom p1 ) = ( dom B1 ) by A2,FINSEQ_3:29;
A22:now
let i;
assume that
A23: i in ( dom B1 );
A24: ( len ( Line (M,i) ) ) = ( width M ) by MATRIX_1:def 7;
( len ( ( B1 /. i ) |-- b1 ) ) = ( len b1 ) by MATRLIN:def 7;
then A25: ( dom ( Line (M,i) ) ) = ( dom ( ( B1 /. i ) |-- b1 ) ) by A9,A24,FINSEQ_3:29;
A26: ( dom ( Line (M,i) ) ) = ( Seg ( width M ) ) by A24,FINSEQ_1:def 3;
A27:now
let k;
assume that
A28: k in ( dom ( ( B1 /. i ) |-- b1 ) );
A29: [ i,k ] in ( Indices M ) by A21,A8,A23,A25,A26,A28,ZFMISC_1:87;
thus ( ( Line (M,i) ) . k ) = ( M * (i,k) ) by A25,A26,A28,MATRIX_1:def 7
.= ( ( ( B1 /. i ) |-- b1 ) /. k ) by A6,A29
.= ( ( ( B1 /. i ) |-- b1 ) . k ) by A28,PARTFUN1:def 6;
end;
thus ( B1 /. i ) = ( Sum ( lmlt (( ( B1 /. i ) |-- b1 ),b1) ) ) by MATRLIN:35
.= ( Sum ( lmlt (( Line (M,i) ),b1) ) ) by A25,A27,FINSEQ_1:13;
end;
A30: b1 <> ( {} ) by A4;
A31: ( len ( Col (M,j) ) ) = ( len M ) by CARD_1:def 7;
( len ( ( Sum ( lmlt (p1,B1) ) ) |-- b1 ) ) = ( len b1 ) by MATRLIN:def 7;
then ( dom ( ( Sum ( lmlt (p1,B1) ) ) |-- b1 ) ) = ( dom b1 ) by FINSEQ_3:29;
hence ( ( ( Sum ( lmlt (p1,B1) ) ) |-- b1 ) . j ) = ( ( ( Sum ( lmlt (p1,B1) ) ) |-- b1 ) /. j ) by A4,PARTFUN1:def 6
.= ( ( ( Sum ( lmlt (MC,b1) ) ) |-- b1 ) /. j ) by A2,A3,A17,A18,A30,A22,MATRLIN:33
.= ( MC /. j ) by A17,MATRLIN:36
.= ( MC . j ) by A4,A20,PARTFUN1:def 6
.= ( Sum ( mlt (p1,( Col (M,j) )) ) ) by A4,A17,A20
.= ( p1 "*" p2 ) by A1,A7,A31,A13,FINSEQ_1:14;
end;
