environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,RLSUB_1,XBOOLE_0,ARYTM_3,STRUCT_0,TARSKI,RLVECT_3,RLVECT_2,CARD_3,SUPINF_2,FINSET_1,FUNCT_1,RLSUB_2,FUNCT_2,RLVECT_5,MATRLIN,RELAT_1,CARD_1,XXREAL_0,FINSEQ_1,ZFMISC_1,ALGSTR_0,PARTFUN1,ORDINAL4,FINSEQ_2,INCSP_1,MESFUNC1,TREES_1,MATRIX_1,GROUP_1,ARYTM_1,FINSEQ_4,RFINSEQ,RANKNULL,MATRIXJ1,MATRIX_3,MATRIX_6,FVSUM_1,RVSUM_1,MATRIXR1,VECTSP10,MATRIX15,QC_LANG1,CLASSES1,PRVECT_1,MATRIX13,LMOD_7,VALUED_1,RLVECT_1,BINOP_1,LATTICES,MATRLIN2,UNIALG_1,MSSUBFAM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,FVSUM_1,MATRIX_3,MATRIX_6,DOMAIN_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,FINSEQOP,PRVECT_1,MATRIX13,MATRLIN,MATRIX15,RFINSEQ,WSIERP_1,GRCAT_1,MOD_2,VECTSP_5,RANKNULL,MATRIXJ1,CKB31,CKB32;
definitions STRUCT_0,TARSKI,RLVECT_1,FINSEQ_1,VECTSP_4,FVSUM_1,VECTSP_1,MATRIX_1,MATRIX13,MATRLIN,MATRIX15,FUNCT_1,VECTSP_7,RANKNULL,VECTSP_6,CKB32;
theorems ZFMISC_1,RLVECT_1,MATRIX_1,MATRIX_2,MATRIX_4,MATRIX_3,VECTSP_1,NAT_1,FINSEQ_2,CARD_1,CARD_FIN,FINSEQ_1,FINSEQ_3,FINSEQOP,FUNCT_1,FUNCT_2,FUNCOP_1,FVSUM_1,LAPLACE,MATRIX_6,MATRIX_7,MATRIX11,MATRIX13,MATRIXR1,MATRIXR2,MATRLIN,ORDINAL1,PARTFUN1,RELAT_1,STRUCT_0,TARSKI,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XXREAL_0,MATRIX15,MOD_2,RLVECT_2,POLYFORM,VECTSP10,MATRIX_8,RANKNULL,VECTSP_5,FINSEQ_5,RFINSEQ,MATRIXJ1,GRCAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32;
schemes NAT_1,MATRIX_1,FUNCT_2,FINSEQ_2;
registrations XBOOLE_0,FUNCT_1,FINSET_1,STRUCT_0,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,MATRLIN,MATRIX13,XREAL_0,VECTSP_9,CARD_1,MOD_2,GRCAT_1,PRVECT_1;
constructors FVSUM_1,VECTSP_9,MATRIX_6,LAPLACE,MATRIX15,RANKNULL,VECTSP10,MATRIXJ1,XXREAL_0,REALSET1,BINARITH,RELSET_1,FINSOP_1,MATRIX13,CKB31,CKB32;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve K for Field;
reserve V1 for  finite-dimensional (VectSp of K);
reserve V2 for  finite-dimensional (VectSp of K);
reserve f for (Function of V1,V2);
reserve b1 for (OrdBasis of V1);
reserve b2 for (OrdBasis of V2);
reserve w1 for (Element of V1);
theorem
(for f being (linear-transformation of V1,V2) holds (for W1,W2 being (Subspace of V1) holds (for U1,U2 being (Subspace of V2) holds ((((( dim W1 ) = ( 0 ) implies ( dim U1 ) = ( 0 )) & (( dim W2 ) = ( 0 ) implies ( dim U2 ) = ( 0 ))) & V2 is_the_direct_sum_of U1,U2) implies (for fW1 being (linear-transformation of W1,U1) holds (for fW2 being (linear-transformation of W2,U2) holds ((fW1 = ( f | W1 ) & fW2 = ( f | W2 )) implies (for w1 being (OrdBasis of W1) holds (for w2 being (OrdBasis of W2) holds (for u1 being (OrdBasis of U1) holds (for u2 being (OrdBasis of U2) holds ((( w1 ^ w2 ) = b1 & ( u1 ^ u2 ) = b2) implies ( AutMt (f,b1,b2) ) = ( block_diagonal (<* ( AutMt (fW1,w1,u1) ),( AutMt (fW2,w2,u2) ) *>,( 0. K )) )))))))))))))
proof
let f being (linear-transformation of V1,V2);
let W1 being (Subspace of V1);
let W2 being (Subspace of V1);
let U1 being (Subspace of V2);
let U2 being (Subspace of V2);
assume that
A1: (( dim W1 ) = ( 0 ) implies ( dim U1 ) = ( 0 ))
and
A2: (( dim W2 ) = ( 0 ) implies ( dim U2 ) = ( 0 ))
and
A3: V2 is_the_direct_sum_of U1,U2;
A4: ( U1 /\ U2 ) = ( (0). V2 ) by A3,VECTSP_5:def 4;
let fW1 being (linear-transformation of W1,U1);
let fW2 being (linear-transformation of W2,U2);
assume that
A5: fW1 = ( f | W1 )
and
A6: fW2 = ( f | W2 );
let w1 being (OrdBasis of W1);
let w2 being (OrdBasis of W2);
let u1 being (OrdBasis of U1);
let u2 being (OrdBasis of U2);
assume that
A7: ( w1 ^ w2 ) = b1
and
A8: ( u1 ^ u2 ) = b2;
A9: ( len b1 ) = ( ( len w1 ) + ( len w2 ) ) by A7,FINSEQ_1:22;
A10: ( U1 + U2 ) = ( (Omega). V2 ) by A3,VECTSP_5:def 4;
set A = ( AutMt (f,b1,b2) );
A11: ( len b1 ) = ( len A ) by MATRLIN:def 8;
set A2 = ( AutMt (fW2,w2,u2) );
A12: (( len w2 ) = ( dim W2 ) & ( len u2 ) = ( dim U2 )) by CKB24:1;
then A13: ( len w2 ) = ( len A2 ) by A2,MATRIX13:1;
set A1 = ( AutMt (fW1,w1,u1) );
A14: (( len w1 ) = ( dim W1 ) & ( len u1 ) = ( dim U1 )) by CKB24:1;
then A15: ( len w1 ) = ( len A1 ) by A1,MATRIX13:1;
A16: ( len u2 ) = ( width A2 ) by A2,A12,MATRIX13:1;
A17: ( len u1 ) = ( width A1 ) by A1,A14,MATRIX13:1;
A18:now
reconsider uu = ( u1 ^ u2 ) as (OrdBasis of ( U1 + U2 )) by A4,CKB30:1;
let i;
A19: ( dom A ) = ( Seg ( len A ) ) by FINSEQ_1:def 3;
reconsider fb = ( f . ( b1 /. i ) ),fbi = ( f . ( b1 /. ( i + ( len A1 ) ) ) ) as (Vector of ( U1 + U2 )) by A10;
A20: ( dom A ) = ( dom b1 ) by A11,FINSEQ_3:29;
A21: ( dom A1 ) = ( dom w1 ) by A15,FINSEQ_3:29;
A22: ( dom fW1 ) = (the carrier of W1) by FUNCT_2:def 1;
thus (i in ( dom A1 ) implies ( Line (A,i) ) = ( ( Line (A1,i) ) ^ ( ( width A2 ) |-> ( 0. K ) ) ))
proof
assume A23: i in ( dom A1 );
A24: ( dom A1 ) = ( Seg ( len A1 ) ) by FINSEQ_1:def 3;
then A25: ( Line (A1,i) ) = ( A1 . i ) by A15,A23,MATRIX_2:8
.= ( A1 /. i ) by A23,PARTFUN1:def 6
.= ( ( fW1 . ( w1 /. i ) ) |-- u1 ) by A21,A23,MATRLIN:def 8;
( len A1 ) <= ( len A ) by A9,A15,A11,NAT_1:11;
then A26: ( Seg ( len A1 ) ) c= ( Seg ( len A ) ) by FINSEQ_1:5;
then ( b1 /. i ) = ( b1 . i ) by A19,A20,A23,A24,PARTFUN1:def 6
.= ( w1 . i ) by A7,A21,A23,FINSEQ_1:def 7
.= ( w1 /. i ) by A21,A23,PARTFUN1:def 6;
then A27: fb = ( fW1 . ( w1 /. i ) ) by A5,A22,FUNCT_1:47;
thus ( Line (A,i) ) = ( A . i ) by A11,A23,A24,A26,MATRIX_2:8
.= ( A /. i ) by A19,A23,A24,A26,PARTFUN1:def 6
.= ( ( f . ( b1 /. i ) ) |-- b2 ) by A19,A20,A23,A24,A26,MATRLIN:def 8
.= ( fb |-- uu ) by A10,A8,CKB29:1
.= ( ( fb + ( 0. ( U1 + U2 ) ) ) |-- uu ) by RLVECT_1:def 4
.= ( ( ( fW1 . ( w1 /. i ) ) |-- u1 ) ^ ( ( 0. U2 ) |-- u2 ) ) by A4,A27,CKB28:1,VECTSP_4:12
.= ( ( Line (A1,i) ) ^ ( ( width A2 ) |-> ( 0. K ) ) ) by A16,A25,CKB23:1;
end;

A28: ( dom A2 ) = ( dom w2 ) by A13,FINSEQ_3:29;
A29: ( dom fW2 ) = (the carrier of W2) by FUNCT_2:def 1;
thus (i in ( dom A2 ) implies ( Line (A,( i + ( len A1 ) )) ) = ( ( ( width A1 ) |-> ( 0. K ) ) ^ ( Line (A2,i) ) ))
proof
assume A30: i in ( dom A2 );
A31: ( dom A2 ) = ( Seg ( len A2 ) ) by FINSEQ_1:def 3;
then A32: ( i + ( len A1 ) ) in ( dom A ) by A9,A15,A13,A11,A19,A30,FINSEQ_1:60;
( b1 /. ( i + ( len A1 ) ) ) = ( b1 . ( i + ( len A1 ) ) ) by A9,A15,A13,A11,A19,A20,A30,A31,FINSEQ_1:60,PARTFUN1:def 6
.= ( w2 . i ) by A7,A15,A28,A30,FINSEQ_1:def 7
.= ( w2 /. i ) by A28,A30,PARTFUN1:def 6;
then A33: fbi = ( fW2 . ( w2 /. i ) ) by A6,A29,FUNCT_1:47;
A34: ( Line (A2,i) ) = ( A2 . i ) by A13,A30,A31,MATRIX_2:8
.= ( A2 /. i ) by A30,PARTFUN1:def 6
.= ( ( fW2 . ( w2 /. i ) ) |-- u2 ) by A28,A30,MATRLIN:def 8;
thus ( Line (A,( i + ( len A1 ) )) ) = ( A . ( i + ( len A1 ) ) ) by A9,A15,A13,A11,A19,A30,A31,FINSEQ_1:60,MATRIX_2:8
.= ( A /. ( i + ( len A1 ) ) ) by A9,A15,A13,A11,A19,A30,A31,FINSEQ_1:60,PARTFUN1:def 6
.= ( ( f . ( b1 /. ( i + ( len A1 ) ) ) ) |-- b2 ) by A20,A32,MATRLIN:def 8
.= ( fbi |-- uu ) by A10,A8,CKB29:1
.= ( ( ( 0. ( U1 + U2 ) ) + fbi ) |-- uu ) by RLVECT_1:def 4
.= ( ( ( 0. U1 ) |-- u1 ) ^ ( ( fW2 . ( w2 /. i ) ) |-- u2 ) ) by A4,A33,CKB28:1,VECTSP_4:12
.= ( ( ( width A1 ) |-> ( 0. K ) ) ^ ( Line (A2,i) ) ) by A17,A34,CKB23:1;
end;

end;
set A12 = <* A1,A2 *>;
A35: (( Sum ( Len A12 ) ) = ( ( len A1 ) + ( len A2 ) ) & ( Sum ( Width A12 ) ) = ( ( width A1 ) + ( width A2 ) )) by MATRIXJ1:16,MATRIXJ1:20;
( len b2 ) = ( ( len u1 ) + ( len u2 ) ) by A8,FINSEQ_1:22;
hence thesis by A9,A15,A13,A17,A16,A35,A18,MATRIXJ1:23;
end;
