environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,RLSUB_1,XBOOLE_0,ARYTM_3,STRUCT_0,TARSKI,RLVECT_3,RLVECT_2,CARD_3,SUPINF_2,FINSET_1,FUNCT_1,RLSUB_2,FUNCT_2,RLVECT_5,MATRLIN,RELAT_1,CARD_1,XXREAL_0,FINSEQ_1,ZFMISC_1,ALGSTR_0,PARTFUN1,ORDINAL4,FINSEQ_2,INCSP_1,MESFUNC1,TREES_1,MATRIX_1,GROUP_1,ARYTM_1,FINSEQ_4,RFINSEQ,RANKNULL,MATRIXJ1,MATRIX_3,MATRIX_6,FVSUM_1,RVSUM_1,MATRIXR1,VECTSP10,MATRIX15,QC_LANG1,CLASSES1,PRVECT_1,MATRIX13,LMOD_7,VALUED_1,RLVECT_1,BINOP_1,LATTICES,MATRLIN2,UNIALG_1,MSSUBFAM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,FVSUM_1,MATRIX_3,MATRIX_6,DOMAIN_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,FINSEQOP,PRVECT_1,MATRIX13,MATRLIN,MATRIX15,RFINSEQ,WSIERP_1,GRCAT_1,MOD_2,VECTSP_5,RANKNULL,MATRIXJ1;
definitions STRUCT_0,TARSKI,RLVECT_1,FINSEQ_1,VECTSP_4,FVSUM_1,VECTSP_1,MATRIX_1,MATRIX13,MATRLIN,MATRIX15,FUNCT_1,VECTSP_7,RANKNULL,VECTSP_6;
theorems ZFMISC_1,RLVECT_1,MATRIX_1,MATRIX_2,MATRIX_4,MATRIX_3,VECTSP_1,NAT_1,FINSEQ_2,CARD_1,CARD_FIN,FINSEQ_1,FINSEQ_3,FINSEQOP,FUNCT_1,FUNCT_2,FUNCOP_1,FVSUM_1,LAPLACE,MATRIX_6,MATRIX_7,MATRIX11,MATRIX13,MATRIXR1,MATRIXR2,MATRLIN,ORDINAL1,PARTFUN1,RELAT_1,STRUCT_0,TARSKI,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XXREAL_0,MATRIX15,MOD_2,RLVECT_2,POLYFORM,VECTSP10,MATRIX_8,RANKNULL,VECTSP_5,FINSEQ_5,RFINSEQ,MATRIXJ1,GRCAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27;
schemes NAT_1,MATRIX_1,FUNCT_2,FINSEQ_2;
registrations XBOOLE_0,FUNCT_1,FINSET_1,STRUCT_0,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,MATRLIN,MATRIX13,XREAL_0,VECTSP_9,CARD_1,MOD_2,GRCAT_1,PRVECT_1;
constructors FVSUM_1,VECTSP_9,MATRIX_6,LAPLACE,MATRIX15,RANKNULL,VECTSP10,MATRIXJ1,XXREAL_0,REALSET1,BINARITH,RELSET_1,FINSOP_1,MATRIX13;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve n for Nat;
reserve k for Nat;
reserve K for Field;
reserve V1 for  finite-dimensional (VectSp of K);
reserve V2 for  finite-dimensional (VectSp of K);
reserve b1 for (OrdBasis of V1);
reserve b2 for (OrdBasis of V2);
reserve v1 for (Element of V1);
reserve w1 for (Element of V1);
theorem
Th24: (for W1,W2 being (Subspace of V1) holds (( W1 /\ W2 ) = ( (0). V1 ) implies (for b1 being (OrdBasis of W1) holds (for b2 being (OrdBasis of W2) holds (for b being (OrdBasis of ( W1 + W2 )) holds (b = ( b1 ^ b2 ) implies (for v,v1,v2 being (Vector of ( W1 + W2 )) holds (for w1 being (Vector of W1) holds (for w2 being (Vector of W2) holds (((v = ( v1 + v2 ) & v1 = w1) & v2 = w2) implies ( v |-- b ) = ( ( w1 |-- b1 ) ^ ( w2 |-- b2 ) )))))))))))
proof
let W1 being (Subspace of V1);
let W2 being (Subspace of V1);
assume that
A1: ( W1 /\ W2 ) = ( (0). V1 );
( [#] ( (0). V1 ) ) = { ( 0. V1 ) } by VECTSP_4:def 3;
then A2: ( card ( [#] ( (0). V1 ) ) ) = 1 by CARD_1:30;
A3: ( ( dim W1 ) + ( dim W2 ) ) = ( ( dim ( W1 + W2 ) ) + ( dim ( W1 /\ W2 ) ) ) by VECTSP_9:32
.= ( ( dim ( W1 + W2 ) ) + ( 0 ) ) by A1,A2,RANKNULL:5;
let b1 being (OrdBasis of W1);
let b2 being (OrdBasis of W2);
let b being (OrdBasis of ( W1 + W2 ));
assume that
A4: b = ( b1 ^ b2 );
reconsider R = ( rng b ) as (Basis of ( W1 + W2 )) by MATRLIN:def 2;
let v being (Vector of ( W1 + W2 ));
let v1 being (Vector of ( W1 + W2 ));
let v2 being (Vector of ( W1 + W2 ));
let w1 being (Vector of W1);
let w2 being (Vector of W2);
assume that
A5: ((v = ( v1 + v2 ) & v1 = w1) & v2 = w2);
set wb2 = ( w2 |-- b2 );
consider L2 being (Linear_Combination of W2) such that A6: w2 = ( Sum L2 ) and A7: ( Carrier L2 ) c= ( rng b2 ) and A8: (for k holds ((1 <= k & k <= ( len wb2 )) implies ( wb2 /. k ) = ( L2 . ( b2 /. k ) ))) by MATRLIN:def 7;
A9: W2 is (Subspace of ( W1 + W2 )) by VECTSP_5:7;
then consider K2 being (Linear_Combination of ( W1 + W2 )) such that A10: ( Carrier K2 ) = ( Carrier L2 ) and A11: ( Sum K2 ) = ( Sum L2 ) and A12: ( K2 | (the carrier of W2) ) = L2 by CKB25:1;
( rng b2 ) c= R by A4,FINSEQ_1:30;
then A13: ( Carrier K2 ) c= R by A7,A10,XBOOLE_1:1;
set wb1 = ( w1 |-- b1 );
set vb = ( v |-- b );
consider L1 being (Linear_Combination of W1) such that A14: w1 = ( Sum L1 ) and A15: ( Carrier L1 ) c= ( rng b1 ) and A16: (for k holds ((1 <= k & k <= ( len wb1 )) implies ( wb1 /. k ) = ( L1 . ( b1 /. k ) ))) by MATRLIN:def 7;
consider L being (Linear_Combination of ( W1 + W2 )) such that A17: (v = ( Sum L ) & ( Carrier L ) c= ( rng b )) and A18: (for k holds ((1 <= k & k <= ( len vb )) implies ( vb /. k ) = ( L . ( b /. k ) ))) by MATRLIN:def 7;
A19: ( len vb ) = ( len b ) by MATRLIN:def 7;
then A20: ( dom vb ) = ( dom b ) by FINSEQ_3:29;
A21: ( len wb2 ) = ( len b2 ) by MATRLIN:def 7;
then A22: ( dom wb2 ) = ( dom b2 ) by FINSEQ_3:29;
A23: R is  linearly-independent by VECTSP_7:def 3;
A24: W1 is (Subspace of ( W1 + W2 )) by VECTSP_5:7;
then consider K1 being (Linear_Combination of ( W1 + W2 )) such that A25: ( Carrier K1 ) = ( Carrier L1 ) and A26: ( Sum K1 ) = ( Sum L1 ) and A27: ( K1 | (the carrier of W1) ) = L1 by CKB25:1;
A28: ( len wb1 ) = ( len b1 ) by MATRLIN:def 7;
then A29: ( dom wb1 ) = ( dom b1 ) by FINSEQ_3:29;
A30: ( len ( wb1 ^ wb2 ) ) = ( ( len wb1 ) + ( len wb2 ) ) by FINSEQ_1:22;
A31: (( len b1 ) = ( dim W1 ) & ( len b2 ) = ( dim W2 )) by CKB24:1;
A32: ( len b ) = ( dim ( W1 + W2 ) ) by CKB24:1;
then A33: ( dom b ) = ( dom ( wb1 ^ wb2 ) ) by A28,A21,A31,A30,A3,FINSEQ_3:29;
( rng b1 ) c= R by A4,FINSEQ_1:29;
then A34: ( Carrier K1 ) c= R by A15,A25,XBOOLE_1:1;
then A35: L = ( K1 + K2 ) by A5,A14,A26,A6,A11,A17,A13,A23,MATRLIN:6;
now
let k;
assume that
A36: (1 <= k & k <= ( len vb ));
A37: k in ( dom ( wb1 ^ wb2 ) ) by A28,A21,A19,A31,A32,A30,A3,A36,FINSEQ_3:25;
now
per cases  by A37,FINSEQ_1:25;
suppose A38: k in ( dom wb1 );

then (1 <= k & k <= ( len wb1 )) by FINSEQ_3:25;
then A39: ( L1 . ( b1 /. k ) ) = ( wb1 /. k ) by A16
.= ( wb1 . k ) by A38,PARTFUN1:def 6
.= ( ( wb1 ^ wb2 ) . k ) by A38,FINSEQ_1:def 7;
reconsider b1k = ( b1 /. k ) as (Vector of ( W1 + W2 )) by A24,VECTSP_4:10;
A40: ( K1 . ( b1 /. k ) ) = ( L1 . ( b1 /. k ) ) by A27,FUNCT_1:49;
(not ( b1 /. k ) in ( Carrier K2 ))
proof
A41: ( b1 /. k ) in W1 by STRUCT_0:def 5;
assume A42: ( b1 /. k ) in ( Carrier K2 );
then ( b1 /. k ) in W2 by A10,STRUCT_0:def 5;
then ( b1 /. k ) in ( W1 /\ W2 ) by A41,VECTSP_5:3;
then ( b1 /. k ) in (the carrier of ( (0). V1 )) by A1,STRUCT_0:def 5;
then ( b1 /. k ) in { ( 0. V1 ) } by VECTSP_4:def 3;
then ( b1 /. k ) = ( 0. V1 ) by TARSKI:def 1
.= ( 0. ( W1 + W2 ) ) by VECTSP_4:11;
hence thesis by A13,A23,A42,VECTSP_7:2;
end;
then ( K2 . b1k ) = ( 0. K );
then A43: ( L . b1k ) = ( ( K1 . b1k ) + ( 0. K ) ) by A35,VECTSP_6:22
.= ( ( wb1 ^ wb2 ) . k ) by A39,A40,RLVECT_1:def 4;
b1k = ( b1 . k ) by A29,A38,PARTFUN1:def 6
.= ( b . k ) by A4,A29,A38,FINSEQ_1:def 7
.= ( b /. k ) by A33,A37,PARTFUN1:def 6;
hence ( ( wb1 ^ wb2 ) . k ) = ( vb /. k ) by A18,A36,A43
.= ( vb . k ) by A33,A20,A37,PARTFUN1:def 6;
end;
suppose (ex n st (n in ( dom wb2 ) & k = ( ( len wb1 ) + n )));

then consider n such that A44: n in ( dom wb2 ) and A45: k = ( ( len wb1 ) + n );
(1 <= n & n <= ( len wb2 )) by A44,FINSEQ_3:25;
then A46: ( L2 . ( b2 /. n ) ) = ( wb2 /. n ) by A8
.= ( wb2 . n ) by A44,PARTFUN1:def 6
.= ( ( wb1 ^ wb2 ) . k ) by A44,A45,FINSEQ_1:def 7;
reconsider b2n = ( b2 /. n ) as (Vector of ( W1 + W2 )) by A9,VECTSP_4:10;
A47: ( K2 . ( b2 /. n ) ) = ( L2 . ( b2 /. n ) ) by A12,FUNCT_1:49;
(not ( b2 /. n ) in ( Carrier K1 ))
proof
assume A48: ( b2 /. n ) in ( Carrier K1 );
then (( b2 /. n ) in W2 & ( b2 /. n ) in W1) by A25,STRUCT_0:def 5;
then ( b2 /. n ) in ( W1 /\ W2 ) by VECTSP_5:3;
then ( b2 /. n ) in (the carrier of ( (0). V1 )) by A1,STRUCT_0:def 5;
then ( b2 /. n ) in { ( 0. V1 ) } by VECTSP_4:def 3;
then ( b2 /. n ) = ( 0. V1 ) by TARSKI:def 1
.= ( 0. ( W1 + W2 ) ) by VECTSP_4:11;
hence thesis by A34,A23,A48,VECTSP_7:2;
end;
then ( K1 . b2n ) = ( 0. K );
then A49: ( L . b2n ) = ( ( 0. K ) + ( K2 . b2n ) ) by A35,VECTSP_6:22
.= ( ( wb1 ^ wb2 ) . k ) by A46,A47,RLVECT_1:def 4;
b2n = ( b2 . n ) by A22,A44,PARTFUN1:def 6
.= ( b . k ) by A4,A28,A22,A44,A45,FINSEQ_1:def 7
.= ( b /. k ) by A33,A37,PARTFUN1:def 6;
hence ( ( wb1 ^ wb2 ) . k ) = ( vb /. k ) by A18,A36,A49
.= ( vb . k ) by A33,A20,A37,PARTFUN1:def 6;
end;
end;
hence ( vb . k ) = ( ( wb1 ^ wb2 ) . k );
end;
hence thesis by A28,A21,A19,A31,A30,A3,CKB24:1,FINSEQ_1:14;
end;
