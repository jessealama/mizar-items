environ
vocabularies NUMBERS,FUNCT_1,FUNCOP_1,RELAT_1,AOFA_000,FUNCT_4,XBOOLE_0,SUBSET_1,TARSKI,ZFMISC_1,FUNCT_2,ZF_LANG,VALUED_0,XREAL_0,ORDINAL1,VALUED_1,REAL_3,INT_1,XXREAL_0,CARD_1,ARYTM_3,ARYTM_1,FINSET_1,ORDINAL2,MEMBER_1,CARD_3,NAT_1,POWER,ORDINAL4,EUCLMETR,FREEALG,TREES_4,LANG1,MCART_1,STRUCT_0,GRAPHSP,ABIAN,FUNCT_7,REALSET1,NEWTON,PRE_FF,INT_2,COMPLEX1,AOFA_I00;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,MCART_1,ORDINAL1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSET_1,LANG1,REAL_3,BINOP_1,CARD_1,CARD_2,CARD_3,VALUED_0,PRE_FF,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,POWER,INT_1,INT_2,NAT_1,NAT_D,NEWTON,ABIAN,FUNCOP_1,FUNCT_4,FUNCT_7,STRUCT_0,FREEALG,TREES_4,AOFA_000,VALUED_1,CKB2,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
definitions VALUED_0,XCMPLX_0,CARD_2,TARSKI,XBOOLE_0,FUNCT_1,FUNCT_2,FREEALG,BINOP_1,AOFA_000,FUNCOP_1,VALUED_1,CKB2,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB19,CKB20;
theorems XBOOLE_1,ZFMISC_1,RELAT_1,FUNCT_2,FUNCOP_1,TARSKI,NEWTON,XREAL_1,INT_1,FUNCT_7,NAT_1,ORDINAL1,FUNCT_4,FREEALG,PRE_FF,INT_2,ABSVALUE,WSIERP_1,TREES_4,NUMBERS,FUNCT_1,CARD_2,CARD_1,WELLORD2,FUNCT_5,AOFA_000,MCART_1,XXREAL_0,POWER,FIB_NUM2,ORDINAL3,NAT_D,PREPOWER,VALUED_1,CARD_3,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB19,CKB20;
schemes FUNCT_1,FUNCT_2,XBOOLE_0,AOFA_000,TARSKI,CLASSES1;
registrations RELSET_1,FUNCT_1,FUNCOP_1,FUNCT_2,NUMBERS,NAT_1,STRUCT_0,FREEALG,INT_1,CARD_5,CARD_1,CARD_3,VALUED_0,VALUED_1,MEMBERED,XREAL_0,XCMPLX_0,XXREAL_0,XBOOLE_0,FINSET_1,POWER,AOFA_000,ABIAN,CKB21;
constructors REAL_1,BORSUK_1,PREPOWER,POWER,NAT_D,NEWTON,ABIAN,SQUARE_1,PRE_FF,WSIERP_1,WELLORD2,CARD_2,CAT_2,PRALG_3,AOFA_000,CKB2,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
definition
let N being set;
let v being Function;
let f being Function;
func v ** (f,N) -> Function
means
:Def13: ((ex Y being set st ((for y being set holds (y in Y iff (ex h being Function st (h in ( dom v ) & y in ( rng h ))))) & (for a being set holds (a in ( dom it ) iff (a in ( Funcs (N,Y) ) & (ex g being Function st (a = g & ( g * f ) in ( dom v )))))))) & (for g being Function holds (g in ( dom it ) implies ( it . g ) = ( v . ( g * f ) ))));
uniqueness
proof
let F1 being Function,F2 being Function;
given Y1 being set such that
A1: (for y being set holds (y in Y1 iff (ex h being Function st (h in ( dom v ) & y in ( rng h )))))
and
A2: (for a being set holds (a in ( dom F1 ) iff (a in ( Funcs (N,Y1) ) & (ex g being Function st (a = g & ( g * f ) in ( dom v ))))));

assume A3: (for g being Function holds (g in ( dom F1 ) implies ( F1 . g ) = ( v . ( g * f ) )));
given Y2 being set such that
A4: (for y being set holds (y in Y2 iff (ex h being Function st (h in ( dom v ) & y in ( rng h )))))
and
A5: (for a being set holds (a in ( dom F2 ) iff (a in ( Funcs (N,Y2) ) & (ex g being Function st (a = g & ( g * f ) in ( dom v ))))));

now
let a being set;
(a in Y1 iff (ex h being Function st (h in ( dom v ) & a in ( rng h )))) by A1;
hence (a in Y1 iff a in Y2) by A4;
end;
then A6: Y1 = Y2 by TARSKI:1;
now
let a being set;
(a in ( dom F1 ) iff (a in ( Funcs (N,Y1) ) & (ex g being Function st (a = g & ( g * f ) in ( dom v ))))) by A2;
hence (a in ( dom F1 ) iff a in ( dom F2 )) by A5,A6;
end;
then A7: ( dom F1 ) = ( dom F2 ) by TARSKI:1;
assume A8: (for g being Function holds (g in ( dom F2 ) implies ( F2 . g ) = ( v . ( g * f ) )));
now
let a being set;
assume A9: a in ( dom F1 );
then consider g being Function such that A10: a = g and ( g * f ) in ( dom v ) by A2;
thus ( F1 . a ) = ( v . ( g * f ) ) by A3,A9,A10
.= ( F2 . a ) by A8,A7,A9,A10;
end;
hence thesis by A7,FUNCT_1:2;
end;
existence
proof
defpred F[ set,set ]
 means
(ex g being Function st (g = $1 & $2 = ( v . ( g * f ) )));
defpred R[ set ]
 means
(ex g being Function st (g = $1 & ( g * f ) in ( dom v )));
defpred P[ set,set ]
 means
(ex g being Function st ($1 = g & $2 = ( rng g )));
A11: (for x,y,z being set holds ((P[ x,y ] & P[ x,z ]) implies y = z));
consider X being set such that A12: (for x being set holds (x in X iff (ex y being set st (y in ( dom v ) & P[ y,x ])))) from TARSKI:sch 1(A11);
set Y = ( union X );
consider D being set such that A13: (for x being set holds (x in D iff (x in ( Funcs (N,Y) ) & R[ x ]))) from XBOOLE_0:sch 1;
A14: (for x being set holds (x in D implies (ex y being set st F[ x,y ])))
proof
let x being set;
assume x in D;
then consider y being Function such that A15: y = x and ( y * f ) in ( dom v ) by A13;
take ( v . ( y * f ) );
thus thesis by A15;
end;
consider F being Function such that A16: (( dom F ) = D & (for g being set holds (g in D implies F[ g,( F . g ) ]))) from CLASSES1:sch 1(A14);
take F;
hereby
take Y;
hereby
let y being set;
hereby
assume y in Y;
then consider a being set such that A17: y in a and A18: a in X by TARSKI:def 4;
(ex z being set st (z in ( dom v ) & P[ z,a ])) by A12,A18;
hence (ex h being Function st (h in ( dom v ) & y in ( rng h ))) by A17;
end;
given h being Function such that
A19: h in ( dom v )
and
A20: y in ( rng h );

( rng h ) in X by A12,A19;
hence y in Y by A20,TARSKI:def 4;
end;
let a being set;
thus (a in ( dom F ) iff (a in ( Funcs (N,Y) ) & (ex g being Function st (a = g & ( g * f ) in ( dom v ))))) by A13,A16;
end;
let g being Function;
assume g in ( dom F );
then F[ g,( F . g ) ] by A16;
hence thesis;
end;
end;
