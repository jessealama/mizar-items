environ
vocabularies NUMBERS,RLVECT_1,RLSUB_1,SUBSET_1,RLVECT_2,RLVECT_3,TARSKI,CARD_3,XBOOLE_0,ARYTM_1,ARYTM_3,SUPINF_2,FUNCT_1,CARD_1,FINSEQ_1,STRUCT_0,FUNCT_2,RELAT_1,VALUED_1,NAT_1,PARTFUN1,ORDINAL4,CLASSES1,FINSET_1,XXREAL_0,FINSEQ_4,RLSUB_2,RLVECT_5;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,REAL_1,NAT_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,FINSEQ_1,FINSEQ_3,FINSEQ_4,DOMAIN_1,STRUCT_0,CLASSES1,RLVECT_1,RLVECT_2,RLSUB_1,RLSUB_2,RLVECT_3,XXREAL_0;
definitions TARSKI;
theorems TARSKI,ENUMSET1,SUBSET_1,NAT_1,CARD_1,CARD_2,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSET_1,RFINSEQ,RLVECT_1,RLVECT_2,RLVECT_3,RLSUB_1,RLSUB_2,XBOOLE_0,XBOOLE_1,ZFMISC_1,XCMPLX_0,XCMPLX_1,XREAL_1,XXREAL_0,STRUCT_0,PARTFUN1,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21;
schemes NAT_1,FINSEQ_1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,NUMBERS,NAT_1,MEMBERED,FINSEQ_1,STRUCT_0,RLVECT_3,CARD_1,RELSET_1,RLVECT_2;
constructors PARTFUN1,XXREAL_0,REAL_1,NAT_1,FINSEQ_3,FINSEQ_4,REALSET1,RFINSEQ,RLSUB_2,RLVECT_2,CLASSES1,RLVECT_3,RELSET_1;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve V for RealLinearSpace;
theorem
Th22: (for A,B being  finite (Subset of V) holds (for v being (VECTOR of V) holds ((v in ( Lin ( A \/ B ) ) & (not v in ( Lin B ))) implies (ex w being (VECTOR of V) st (w in A & w in ( Lin ( ( ( A \/ B ) \ { w } ) \/ { v } ) ))))))
proof
let A being  finite (Subset of V),B being  finite (Subset of V);
let v being (VECTOR of V);
assume that
A1: v in ( Lin ( A \/ B ) )
and
A2: (not v in ( Lin B ));
consider L being (Linear_Combination of ( A \/ B )) such that A3: v = ( Sum L ) by A1,RLVECT_3:14;
A4: ( Carrier L ) c= ( A \/ B ) by RLVECT_2:def 6;
now
assume A5: (for w being (VECTOR of V) holds (w in A implies ( L . w ) = ( 0 )));
now
let x being set;
assume that
A6: x in ( Carrier L )
and
A7: x in A;
(ex u being (VECTOR of V) st (x = u & ( L . u ) <> ( 0 ))) by A6,CKB3:1;
hence contradiction by A5,A7;
end;
then ( Carrier L ) misses A by XBOOLE_0:3;
then ( Carrier L ) c= B by A4,XBOOLE_1:73;
then L is (Linear_Combination of B) by RLVECT_2:def 6;
hence contradiction by A2,A3,RLVECT_3:14;
end;
then consider w being (VECTOR of V) such that A8: w in A and A9: ( L . w ) <> ( 0 );
set a = ( L . w );
take w;
consider F being (FinSequence of (the carrier of V)) such that A10: F is  one-to-one and A11: ( rng F ) = ( Carrier L ) and A12: ( Sum L ) = ( Sum ( L (#) F ) ) by RLVECT_2:def 8;
A13: w in ( Carrier L ) by A9,CKB3:1;
then reconsider Fw1 = ( F -| w ) as (FinSequence of (the carrier of V)) by A11,FINSEQ_4:41;
reconsider Fw2 = ( F |-- w ) as (FinSequence of (the carrier of V)) by A11,A13,FINSEQ_4:50;
A14: ( rng Fw1 ) misses ( rng Fw2 ) by A10,A11,A13,FINSEQ_4:57;
set Fw = ( Fw1 ^ Fw2 );
F just_once_values w by A10,A11,A13,FINSEQ_4:8;
then A15: Fw = ( F - { w } ) by FINSEQ_4:54;
then A16: ( rng Fw ) = ( ( Carrier L ) \ { w } ) by A11,FINSEQ_3:65;
F = ( ( ( F -| w ) ^ <* w *> ) ^ ( F |-- w ) ) by A11,A13,FINSEQ_4:51;
then F = ( Fw1 ^ ( <* w *> ^ Fw2 ) ) by FINSEQ_1:32;
then ( L (#) F ) = ( ( L (#) Fw1 ) ^ ( L (#) ( <* w *> ^ Fw2 ) ) ) by RLVECT_3:34
.= ( ( L (#) Fw1 ) ^ ( ( L (#) <* w *> ) ^ ( L (#) Fw2 ) ) ) by RLVECT_3:34
.= ( ( ( L (#) Fw1 ) ^ ( L (#) <* w *> ) ) ^ ( L (#) Fw2 ) ) by FINSEQ_1:32
.= ( ( ( L (#) Fw1 ) ^ <* ( a * w ) *> ) ^ ( L (#) Fw2 ) ) by RLVECT_2:26;
then A17: ( Sum ( L (#) F ) ) = ( Sum ( ( L (#) Fw1 ) ^ ( <* ( a * w ) *> ^ ( L (#) Fw2 ) ) ) ) by FINSEQ_1:32
.= ( ( Sum ( L (#) Fw1 ) ) + ( Sum ( <* ( a * w ) *> ^ ( L (#) Fw2 ) ) ) ) by RLVECT_1:41
.= ( ( Sum ( L (#) Fw1 ) ) + ( ( Sum <* ( a * w ) *> ) + ( Sum ( L (#) Fw2 ) ) ) ) by RLVECT_1:41
.= ( ( Sum ( L (#) Fw1 ) ) + ( ( Sum ( L (#) Fw2 ) ) + ( a * w ) ) ) by RLVECT_1:44
.= ( ( ( Sum ( L (#) Fw1 ) ) + ( Sum ( L (#) Fw2 ) ) ) + ( a * w ) ) by RLVECT_1:def 3
.= ( ( Sum ( ( L (#) Fw1 ) ^ ( L (#) Fw2 ) ) ) + ( a * w ) ) by RLVECT_1:41
.= ( ( Sum ( L (#) ( Fw1 ^ Fw2 ) ) ) + ( a * w ) ) by RLVECT_3:34;
v in { v } by TARSKI:def 1;
then v in ( Lin { v } ) by RLVECT_3:15;
then consider Lv being (Linear_Combination of { v }) such that A18: v = ( Sum Lv ) by RLVECT_3:14;
consider K being (Linear_Combination of V) such that A19: ( Carrier K ) = ( ( rng Fw ) /\ ( Carrier L ) ) and A20: ( L (#) Fw ) = ( K (#) Fw ) by CKB8:1;
( rng Fw ) = ( ( rng F ) \ { w } ) by A15,FINSEQ_3:65;
then A21: ( Carrier K ) = ( rng Fw ) by A11,A19,XBOOLE_1:28;
A22: ( ( Carrier L ) \ { w } ) c= ( ( A \/ B ) \ { w } ) by A4,XBOOLE_1:33;
then reconsider K as (Linear_Combination of ( ( A \/ B ) \ { w } )) by A16,A21,RLVECT_2:def 6;
( a " ) <> ( 0 ) by A9,XCMPLX_1:202;
then A23: ( Carrier ( ( a " ) * ( ( - K ) + Lv ) ) ) = ( Carrier ( ( - K ) + Lv ) ) by RLVECT_2:42;
set LC = ( ( a " ) * ( ( - K ) + Lv ) );
( Carrier ( ( - K ) + Lv ) ) c= ( ( Carrier ( - K ) ) \/ ( Carrier Lv ) ) by RLVECT_2:37;
then A24: ( Carrier ( ( - K ) + Lv ) ) c= ( ( Carrier K ) \/ ( Carrier Lv ) ) by RLVECT_2:51;
( Carrier Lv ) c= { v } by RLVECT_2:def 6;
then ( ( Carrier K ) \/ ( Carrier Lv ) ) c= ( ( ( A \/ B ) \ { w } ) \/ { v } ) by A16,A21,A22,XBOOLE_1:13;
then ( Carrier ( ( - K ) + Lv ) ) c= ( ( ( A \/ B ) \ { w } ) \/ { v } ) by A24,XBOOLE_1:1;
then A25: LC is (Linear_Combination of ( ( ( A \/ B ) \ { w } ) \/ { v } )) by A23,RLVECT_2:def 6;
(Fw1 is  one-to-one & Fw2 is  one-to-one) by A10,A11,A13,FINSEQ_4:52,FINSEQ_4:53;
then Fw is  one-to-one by A14,FINSEQ_3:91;
then ( Sum ( K (#) Fw ) ) = ( Sum K ) by A21,RLVECT_2:def 8;
then ( ( a " ) * v ) = ( ( ( a " ) * ( Sum K ) ) + ( ( a " ) * ( a * w ) ) ) by A3,A12,A17,A20,RLVECT_1:def 5
.= ( ( ( a " ) * ( Sum K ) ) + ( ( ( a " ) * a ) * w ) ) by RLVECT_1:def 7
.= ( ( ( a " ) * ( Sum K ) ) + ( 1 * w ) ) by A9,XCMPLX_0:def 7
.= ( ( ( a " ) * ( Sum K ) ) + w ) by RLVECT_1:def 8;
then w = ( ( ( a " ) * v ) - ( ( a " ) * ( Sum K ) ) ) by RLSUB_2:61
.= ( ( a " ) * ( v - ( Sum K ) ) ) by RLVECT_1:34
.= ( ( a " ) * ( ( - ( Sum K ) ) + v ) ) by RLVECT_1:def 11;
then w = ( ( a " ) * ( ( Sum ( - K ) ) + ( Sum Lv ) ) ) by A18,RLVECT_3:3
.= ( ( a " ) * ( Sum ( ( - K ) + Lv ) ) ) by RLVECT_3:1
.= ( Sum ( ( a " ) * ( ( - K ) + Lv ) ) ) by RLVECT_3:2;
hence thesis by A8,A25,RLVECT_3:14;
end;
