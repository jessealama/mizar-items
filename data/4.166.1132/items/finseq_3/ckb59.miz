environ
vocabularies NUMBERS,FINSEQ_1,ORDINAL1,XBOOLE_0,ARYTM_3,CARD_1,XXREAL_0,ARYTM_1,NAT_1,SUBSET_1,TARSKI,RELAT_1,ORDINAL4,FUNCT_1,FINSET_1,FINSEQ_2,FUNCT_2,CARD_3,FUNCOP_1,FINSEQ_3,EQREL_1,ALG_1,FUNCT_6,SETFAM_1,FINSEQ_4,ZFMISC_1,FUNCT_5,PARTFUN1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,SETFAM_1,CARD_1,NUMBERS,ORDINAL1,XCMPLX_0,RELAT_1,FUNCT_1,FINSEQ_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,FINSEQ_2,FINSET_1,NAT_1,FINSEQOP,XXREAL_0,CARD_3,FUNCT_3,FUNCT_5,FUNCT_6,EQREL_1;
definitions FUNCT_1,TARSKI,WELLORD2,XBOOLE_0,FINSEQ_2,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6;
theorems CARD_1,CARD_2,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,INT_1,NAT_1,TARSKI,WELLORD2,ZFMISC_1,RELAT_1,XREAL_1,XBOOLE_0,XBOOLE_1,FUNCT_2,GRFUNC_1,SUBSET_1,XXREAL_0,ORDINAL1,NUMBERS,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6,SETFAM_1,FUNCT_5,FUNCT_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58;
schemes FINSEQ_1,FUNCT_1,NAT_1,CLASSES1,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,CARD_1,FINSEQ_2,FUNCOP_1,CARD_3,SUBSET_1,FUNCT_2,CARD_2,EQREL_1,RELSET_1,FUNCT_4;
constructors ENUMSET1,PARTFUN1,WELLORD2,XXREAL_0,REAL_1,NAT_1,INT_1,FINSEQOP,RELSET_1,CARD_3,DOMAIN_1,CARD_2,EQREL_1,FUNCT_6,BINOP_1,FUNCT_3,FUNCT_5;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve p for FinSequence;
reserve q for FinSequence;
reserve x for set;
reserve y for set;
reserve A for set;
reserve i for  natural number;
reserve j for  natural number;
theorem
Th63: ( card ( ( p ^ q ) " A ) ) = ( ( card ( p " A ) ) + ( card ( q " A ) ) )
proof
set X = ( ( p ^ q ) " A );
set B = { ( ( len p ) + n ) where n is (Element of ( NAT )): n in ( q " A ) };
defpred P[ set,set ]
 means
(ex i st ($1 = i & $2 = ( ( len p ) + i )));
A1: X = ( ( p " A ) \/ B )
proof
thus X c= ( ( p " A ) \/ B )
proof
let x;
assume A2: x in X;
then A3: x in ( dom ( p ^ q ) ) by FUNCT_1:def 7;
then reconsider k = x as (Element of ( NAT ));
now
per cases  by A3,FINSEQ_1:25;
suppose A4: k in ( dom p );

then ( ( p ^ q ) . k ) = ( p . k ) by FINSEQ_1:def 7;
then ( p . k ) in A by A2,FUNCT_1:def 7;
then k in ( p " A ) by A4,FUNCT_1:def 7;
hence thesis by XBOOLE_0:def 3;
end;
suppose (ex m being Nat st (m in ( dom q ) & k = ( ( len p ) + m )));

then consider m being Nat such that A5: m in ( dom q ) and A6: k = ( ( len p ) + m );
( q . m ) = ( ( p ^ q ) . k ) by A5,A6,FINSEQ_1:def 7;
then ( q . m ) in A by A2,FUNCT_1:def 7;
then A7: m in ( q " A ) by A5,FUNCT_1:def 7;
m in ( NAT ) by ORDINAL1:def 12;
then k in B by A6,A7;
hence thesis by XBOOLE_0:def 3;
end;
end;
hence thesis;
end;

let x;
assume A8: x in ( ( p " A ) \/ B );
now
per cases  by A8,XBOOLE_0:def 3;
suppose A9: x in ( p " A );

then A10: x in ( dom p ) by FUNCT_1:def 7;
then reconsider k = x as (Element of ( NAT ));
( ( p ^ q ) . k ) = ( p . k ) by A10,FINSEQ_1:def 7;
then A11: ( ( p ^ q ) . x ) in A by A9,FUNCT_1:def 7;
x in ( dom ( p ^ q ) ) by A10,CKB22:1;
hence thesis by A11,FUNCT_1:def 7;
end;
suppose x in B;

then consider n being (Element of ( NAT )) such that A12: x = ( ( len p ) + n ) and A13: n in ( q " A );
A14: n in ( dom q ) by A13,FUNCT_1:def 7;
then ( ( p ^ q ) . ( ( len p ) + n ) ) = ( q . n ) by FINSEQ_1:def 7;
then A15: ( ( p ^ q ) . x ) in A by A12,A13,FUNCT_1:def 7;
x in ( dom ( p ^ q ) ) by A12,A14,FINSEQ_1:28;
hence thesis by A15,FUNCT_1:def 7;
end;
end;
hence thesis;
end;
( ( p " A ) /\ B ) = ( {} )
proof
set x = the (Element of ( ( p " A ) /\ B ));
assume A16: (not thesis);
then x in B by XBOOLE_0:def 4;
then consider n being (Element of ( NAT )) such that A17: x = ( ( len p ) + n ) and A18: n in ( q " A );
( ( len p ) + n ) in ( p " A ) by A16,A17,XBOOLE_0:def 4;
then ( ( len p ) + n ) in ( dom p ) by FUNCT_1:def 7;
then ( ( len p ) + n ) <= ( ( len p ) + ( 0 ) ) by CKB25:1;
then A19: n = ( 0 ) by XREAL_1:6;
n in ( dom q ) by A18,FUNCT_1:def 7;
hence thesis by A19,CKB24:1;
end;
then A20: ( p " A ) misses B by XBOOLE_0:def 7;
reconsider B as  finite set by A1,FINSET_1:1,XBOOLE_1:7;
A21: ( card X ) = ( ( card ( p " A ) ) + ( card B ) ) by A1,A20,CARD_2:40;
A22: (for x holds (x in ( q " A ) implies (ex y st P[ x,y ])))
proof
let x;
assume x in ( q " A );
then x in ( dom q ) by FUNCT_1:def 7;
then reconsider i = x as (Element of ( NAT ));
reconsider y = ( ( len p ) + i ) as set;
take y;
take i;
thus thesis;
end;
consider f being Function such that A23: ( dom f ) = ( q " A ) and A24: (for x holds (x in ( q " A ) implies P[ x,( f . x ) ])) from CLASSES1:sch 1(A22);
A25: ( rng f ) = B
proof
thus ( rng f ) c= B
proof
let x;
assume x in ( rng f );
then consider y such that A26: y in ( dom f ) and A27: ( f . y ) = x by FUNCT_1:def 3;
consider i such that A28: y = i and A29: ( f . y ) = ( ( len p ) + i ) by A23,A24,A26;
i is (Element of ( NAT )) by ORDINAL1:def 12;
hence thesis by A23,A26,A27,A28,A29;
end;

let x;
assume x in B;
then consider n being (Element of ( NAT )) such that A30: x = ( ( len p ) + n ) and A31: n in ( q " A );
(ex i st (n = i & ( f . n ) = ( ( len p ) + i ))) by A24,A31;
hence thesis by A23,A30,A31,FUNCT_1:def 3;
end;
f is  one-to-one
proof
let x;
let y;
assume that
A32: x in ( dom f )
and
A33: y in ( dom f )
and
A34: ( f . x ) = ( f . y );
A35: (ex j st (y = j & ( f . y ) = ( ( len p ) + j ))) by A23,A24,A33;
(ex i st (x = i & ( f . x ) = ( ( len p ) + i ))) by A23,A24,A32;
hence thesis by A34,A35;
end;
then ( q " A ),B are_equipotent  by A23,A25,WELLORD2:def 4;
hence thesis by A21,CARD_1:5;
end;
