environ
vocabularies NUMBERS,FINSEQ_1,ORDINAL1,XBOOLE_0,ARYTM_3,CARD_1,XXREAL_0,ARYTM_1,NAT_1,SUBSET_1,TARSKI,RELAT_1,ORDINAL4,FUNCT_1,FINSET_1,FINSEQ_2,FUNCT_2,CARD_3,FUNCOP_1,FINSEQ_3,EQREL_1,ALG_1,FUNCT_6,SETFAM_1,FINSEQ_4,ZFMISC_1,FUNCT_5,PARTFUN1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,SETFAM_1,CARD_1,NUMBERS,ORDINAL1,XCMPLX_0,RELAT_1,FUNCT_1,FINSEQ_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,FINSEQ_2,FINSET_1,NAT_1,FINSEQOP,XXREAL_0,CARD_3,FUNCT_3,FUNCT_5,FUNCT_6,EQREL_1;
definitions FUNCT_1,TARSKI,WELLORD2,XBOOLE_0,FINSEQ_2,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6;
theorems CARD_1,CARD_2,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,INT_1,NAT_1,TARSKI,WELLORD2,ZFMISC_1,RELAT_1,XREAL_1,XBOOLE_0,XBOOLE_1,FUNCT_2,GRFUNC_1,SUBSET_1,XXREAL_0,ORDINAL1,NUMBERS,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6,SETFAM_1,FUNCT_5,FUNCT_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41;
schemes FINSEQ_1,FUNCT_1,NAT_1,CLASSES1,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,CARD_1,FINSEQ_2,FUNCOP_1,CARD_3,SUBSET_1,FUNCT_2,CARD_2,EQREL_1,RELSET_1,FUNCT_4;
constructors ENUMSET1,PARTFUN1,WELLORD2,XXREAL_0,REAL_1,NAT_1,INT_1,FINSEQOP,RELSET_1,CARD_3,DOMAIN_1,CARD_2,EQREL_1,FUNCT_6,BINOP_1,FUNCT_3,FUNCT_5;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve X for set;
reserve Y for set;
reserve i for  natural number;
reserve j for  natural number;
theorem
Th48: ((X c= ( Seg i ) & Y c= ( Seg j )) implies ((for m,n being (Element of ( NAT )) holds ((m in X & n in Y) implies m < n)) iff ( Sgm ( X \/ Y ) ) = ( ( Sgm X ) ^ ( Sgm Y ) )))
proof
assume that
A1: X c= ( Seg i )
and
A2: Y c= ( Seg j );
set r = ( Sgm ( X \/ Y ) );
set q = ( Sgm Y );
set p = ( Sgm X );
( Seg i ),( Seg j ) are_c=-comparable  by CKB19:1;
then (( Seg i ) c= ( Seg j ) or ( Seg j ) c= ( Seg i )) by XBOOLE_0:def 9;
then A3: (X c= ( Seg j ) or Y c= ( Seg i )) by A1,A2,XBOOLE_1:1;
then A4: (( X \/ Y ) c= ( Seg i ) or ( X \/ Y ) c= ( Seg j )) by A1,A2,XBOOLE_1:8;
thus ((for m,n being (Element of ( NAT )) holds ((m in X & n in Y) implies m < n)) implies ( Sgm ( X \/ Y ) ) = ( ( Sgm X ) ^ ( Sgm Y ) ))
proof
reconsider X1 = X,Y1 = Y as  finite set by A1,A2;
defpred P[ (Element of ( NAT )) ]
 means
($1 in ( dom p ) implies ( r . $1 ) = ( p . $1 ));
assume A5: (for m,n being (Element of ( NAT )) holds ((m in X & n in Y) implies m < n));
( X /\ Y ) = ( {} )
proof
set x = the (Element of ( X /\ Y ));
X = ( rng p ) by A1,FINSEQ_1:def 13;
then A6: X c= ( NAT );
assume A7: (not thesis);
then x in X by XBOOLE_0:def 4;
then reconsider m = x as (Element of ( NAT )) by A6;
A8: m in Y by A7,XBOOLE_0:def 4;
m in X by A7,XBOOLE_0:def 4;
hence thesis by A5,A8;
end;
then A9: X misses Y by XBOOLE_0:def 7;
A10: ( len r ) = ( card ( X1 \/ Y1 ) ) by A1,A2,A3,CKB39:1,XBOOLE_1:8
.= ( ( card X1 ) + ( card Y1 ) ) by A9,CARD_2:40
.= ( ( len p ) + ( card Y1 ) ) by A1,CKB39:1
.= ( ( len p ) + ( len q ) ) by A2,CKB39:1;
A11:now
let k being (Element of ( NAT ));
assume A12: P[ k ];
thus P[ ( k + 1 ) ]
proof
assume A13: ( k + 1 ) in ( dom p );
then A14: ( p . ( k + 1 ) ) in ( rng p ) by FUNCT_1:def 3;
then reconsider n = ( p . ( k + 1 ) ) as (Element of ( NAT ));
A15: n in X by A1,A14,FINSEQ_1:def 13;
( len p ) <= ( len r ) by A10,NAT_1:12;
then ( Seg ( len p ) ) c= ( Seg ( len r ) ) by FINSEQ_1:5;
then ( dom p ) c= ( Seg ( len r ) ) by FINSEQ_1:def 3;
then A16: ( dom p ) c= ( dom r ) by FINSEQ_1:def 3;
then A17: ( r . ( k + 1 ) ) in ( rng r ) by A13,FUNCT_1:def 3;
then reconsider m = ( r . ( k + 1 ) ) as (Element of ( NAT ));
A18: m in ( X \/ Y ) by A4,A17,FINSEQ_1:def 13;
assume A19: ( r . ( k + 1 ) ) <> ( p . ( k + 1 ) );
A20: ( k + 1 ) in ( dom r ) by A13,A16;
now
per cases ;
suppose A21: k in ( dom p );

then ( p . k ) in ( rng p ) by FUNCT_1:def 3;
then reconsider n1 = ( p . k ) as (Element of ( NAT ));
( r . k ) in ( rng r ) by A16,A21,FUNCT_1:def 3;
then reconsider m1 = ( r . k ) as (Element of ( NAT ));
now
per cases  by A19,XXREAL_0:1;
suppose A22: m < n;

A23: 1 <= ( k + 1 ) by A13,CKB25:1;
(not m in Y) by A5,A15,A22;
then m in X by A18,XBOOLE_0:def 3;
then m in ( rng p ) by A1,FINSEQ_1:def 13;
then consider x such that A24: x in ( dom p ) and A25: ( p . x ) = m by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A24;
x <= ( len p ) by A24,CKB25:1;
then A26: x < ( k + 1 ) by A1,A22,A25,A23,CKB41:1;
( k + 1 ) in ( Seg ( len r ) ) by A20,FINSEQ_1:def 3;
then A27: ( k + 1 ) <= ( len r ) by FINSEQ_1:1;
k in ( Seg ( len p ) ) by A21,FINSEQ_1:def 3;
then A28: 1 <= k by FINSEQ_1:1;
k < ( k + 1 ) by XREAL_1:29;
then A29: n1 < m by A4,A12,A21,A28,A27,FINSEQ_1:def 13;
A30: k <= ( len p ) by A21,CKB25:1;
1 <= x by A24,CKB25:1;
then k < x by A1,A25,A29,A30,CKB41:1;
hence contradiction by A26,NAT_1:13;
end;
suppose A31: n < m;

A32: 1 <= ( k + 1 ) by A13,CKB25:1;
n in ( X \/ Y ) by A15,XBOOLE_0:def 3;
then n in ( rng r ) by A4,FINSEQ_1:def 13;
then consider x such that A33: x in ( dom r ) and A34: ( r . x ) = n by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A33;
x <= ( len r ) by A33,CKB25:1;
then A35: x < ( k + 1 ) by A1,A2,A3,A31,A34,A32,CKB41:1,XBOOLE_1:8;
A36: ( k + 1 ) <= ( len p ) by A13,CKB25:1;
A37: k < ( k + 1 ) by XREAL_1:29;
1 <= k by A21,CKB25:1;
then A38: m1 < n by A1,A12,A21,A37,A36,FINSEQ_1:def 13;
A39: k <= ( len r ) by A16,A21,CKB25:1;
1 <= x by A33,CKB25:1;
then k < x by A1,A2,A3,A34,A38,A39,CKB41:1,XBOOLE_1:8;
hence contradiction by A35,NAT_1:13;
end;
end;
hence contradiction;
end;
suppose A40: (not k in ( dom p ));

A41: k < ( k + 1 ) by XREAL_1:29;
(k < 1 or ( len p ) < k) by A40,CKB25:1;
then A42: (k = ( 0 ) or (( len p ) < ( k + 1 ) & ( k + 1 ) <= ( len p ))) by A13,A41,CKB25:1,NAT_1:14,XXREAL_0:2;
now
per cases  by A19,XXREAL_0:1;
suppose A43: m < n;

then (not m in Y) by A5,A15;
then m in X by A18,XBOOLE_0:def 3;
then m in ( rng p ) by A1,FINSEQ_1:def 13;
then consider x such that A44: x in ( dom p ) and A45: ( p . x ) = m by FUNCT_1:def 3;
A46: 1 <= ( k + 1 ) by A13,CKB25:1;
reconsider x as (Element of ( NAT )) by A44;
x <= ( len p ) by A44,CKB25:1;
then x < ( k + 1 ) by A1,A43,A45,A46,CKB41:1;
hence contradiction by A42,A44,CKB24:1,NAT_1:14;
end;
suppose A47: n < m;

A48: 1 <= ( k + 1 ) by A13,CKB25:1;
n in ( X \/ Y ) by A15,XBOOLE_0:def 3;
then n in ( rng r ) by A4,FINSEQ_1:def 13;
then consider x such that A49: x in ( dom r ) and A50: ( r . x ) = n by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A49;
x <= ( len r ) by A49,CKB25:1;
then x < ( k + 1 ) by A1,A2,A3,A47,A50,A48,CKB41:1,XBOOLE_1:8;
hence contradiction by A42,A49,CKB24:1,NAT_1:14;
end;
end;
hence contradiction;
end;
end;
hence contradiction;
end;

end;
A51: P[ ( 0 ) ] by CKB24:1;
A52: (for k being (Element of ( NAT )) holds P[ k ]) from NAT_1:sch 1(A51,A11);
defpred P[ (Element of ( NAT )) ]
 means
($1 in ( dom q ) implies ( r . ( ( len p ) + $1 ) ) = ( q . $1 ));
A53:now
let k being (Element of ( NAT ));
assume A54: P[ k ];
thus P[ ( k + 1 ) ]
proof
set a = ( ( len p ) + ( k + 1 ) );
assume A55: ( k + 1 ) in ( dom q );
then ( k + 1 ) <= ( len q ) by CKB25:1;
then A56: a <= ( len r ) by A10,XREAL_1:7;
A57: 1 <= ( k + 1 ) by NAT_1:12;
then 1 <= a by NAT_1:12;
then A58: a in ( dom r ) by A56,CKB25:1;
then A59: ( r . a ) in ( rng r ) by FUNCT_1:def 3;
reconsider m = ( r . a ) as (Element of ( NAT )) by A59;
A60:now
assume m in X;
then m in ( rng p ) by A1,FINSEQ_1:def 13;
then consider x such that A61: x in ( dom p ) and A62: ( p . x ) = m by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A61;
x <= ( len p ) by A61,CKB25:1;
then A63: x <= ( len r ) by A10,NAT_1:12;
A64: r is  one-to-one by A1,A2,A3,CKB38:1,XBOOLE_1:8;
1 <= x by A61,CKB25:1;
then A65: x in ( dom r ) by A63,CKB25:1;
( r . x ) = ( r . a ) by A52,A61,A62;
then x = a by A58,A64,A65,FUNCT_1:def 4;
then ( ( len p ) + ( k + 1 ) ) <= ( ( len p ) + ( 0 ) ) by A61,CKB25:1;
hence contradiction by XREAL_1:29;
end;
A66: ( q . ( k + 1 ) ) in ( rng q ) by A55,FUNCT_1:def 3;
then reconsider n = ( q . ( k + 1 ) ) as (Element of ( NAT ));
A67: n in Y by A2,A66,FINSEQ_1:def 13;
assume A68: ( r . ( ( len p ) + ( k + 1 ) ) ) <> ( q . ( k + 1 ) );
A69: m in ( X \/ Y ) by A4,A59,FINSEQ_1:def 13;
now
per cases ;
suppose A70: k in ( dom q );

then ( q . k ) in ( rng q ) by FUNCT_1:def 3;
then reconsider n1 = ( q . k ) as (Element of ( NAT ));
1 <= k by A70,CKB25:1;
then A71: 1 <= ( ( len p ) + k ) by NAT_1:12;
A72: k <= ( len q ) by A70,CKB25:1;
then ( ( len p ) + k ) <= ( len r ) by A10,XREAL_1:7;
then ( ( len p ) + k ) in ( dom r ) by A71,CKB25:1;
then ( r . ( ( len p ) + k ) ) in ( rng r ) by FUNCT_1:def 3;
then reconsider m1 = ( r . ( ( len p ) + k ) ) as (Element of ( NAT ));
now
per cases  by A68,XXREAL_0:1;
suppose A73: m < n;

A74: 1 <= ( k + 1 ) by A55,CKB25:1;
m in Y by A69,A60,XBOOLE_0:def 3;
then m in ( rng q ) by A2,FINSEQ_1:def 13;
then consider x such that A75: x in ( dom q ) and A76: ( q . x ) = m by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A75;
x <= ( len q ) by A75,CKB25:1;
then A77: x < ( k + 1 ) by A2,A73,A76,A74,CKB41:1;
( ( len p ) + k ) < ( ( ( len p ) + k ) + 1 ) by XREAL_1:29;
then A78: n1 < m by A4,A54,A56,A70,A71,FINSEQ_1:def 13;
A79: k <= ( len q ) by A70,CKB25:1;
1 <= x by A75,CKB25:1;
then k < x by A2,A76,A78,A79,CKB41:1;
hence contradiction by A77,NAT_1:13;
end;
suppose A80: n < m;

A81: 1 <= a by A57,NAT_1:12;
n in ( X \/ Y ) by A67,XBOOLE_0:def 3;
then n in ( rng r ) by A4,FINSEQ_1:def 13;
then consider x such that A82: x in ( dom r ) and A83: ( r . x ) = n by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A82;
x <= ( len r ) by A82,CKB25:1;
then A84: x < ( ( ( len p ) + k ) + 1 ) by A1,A2,A3,A80,A83,A81,CKB41:1,XBOOLE_1:8;
A85: ( k + 1 ) <= ( len q ) by A55,CKB25:1;
A86: k < ( k + 1 ) by XREAL_1:29;
1 <= k by A70,CKB25:1;
then A87: m1 < n by A2,A54,A70,A86,A85,FINSEQ_1:def 13;
A88: ( ( len p ) + k ) <= ( len r ) by A10,A72,XREAL_1:7;
1 <= x by A82,CKB25:1;
then ( ( len p ) + k ) < x by A1,A2,A3,A83,A87,A88,CKB41:1,XBOOLE_1:8;
hence contradiction by A84,NAT_1:13;
end;
end;
hence contradiction;
end;
suppose A89: (not k in ( dom q ));

A90: k < ( k + 1 ) by XREAL_1:29;
(k < 1 or ( len q ) < k) by A89,CKB25:1;
then A91: (k = ( 0 ) or (( len q ) < ( k + 1 ) & ( k + 1 ) <= ( len q ))) by A55,A90,CKB25:1,NAT_1:14,XXREAL_0:2;
now
per cases  by A68,XXREAL_0:1;
suppose A92: m < n;

A93: 1 <= ( k + 1 ) by A55,CKB25:1;
m in Y by A69,A60,XBOOLE_0:def 3;
then m in ( rng q ) by A2,FINSEQ_1:def 13;
then consider x such that A94: x in ( dom q ) and A95: ( q . x ) = m by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A94;
x <= ( len q ) by A94,CKB25:1;
then x < ( k + 1 ) by A2,A92,A95,A93,CKB41:1;
hence contradiction by A91,A94,CKB24:1,NAT_1:14;
end;
suppose A96: n < m;

A97: 1 <= ( ( len p ) + 1 ) by NAT_1:12;
n in ( X \/ Y ) by A67,XBOOLE_0:def 3;
then n in ( rng r ) by A4,FINSEQ_1:def 13;
then consider x such that A98: x in ( dom r ) and A99: ( r . x ) = n by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A98;
x <= ( len r ) by A98,CKB25:1;
then x < ( ( len p ) + 1 ) by A1,A2,A3,A91,A96,A99,A97,CKB41:1,XBOOLE_1:8;
then A100: x <= ( len p ) by NAT_1:13;
1 <= x by A98,CKB25:1;
then A101: x in ( dom p ) by A100,CKB25:1;
then A102: ( p . x ) in ( rng p ) by FUNCT_1:def 3;
n = ( p . x ) by A52,A99,A101;
then n in X by A1,A102,FINSEQ_1:def 13;
hence contradiction by A5,A67;
end;
end;
hence contradiction;
end;
end;
hence contradiction;
end;

end;
A103: P[ ( 0 ) ] by CKB24:1;
(for k being (Element of ( NAT )) holds P[ k ]) from NAT_1:sch 1(A103,A53);
hence thesis by A10,A52,CKB37:1;
end;

assume A104: ( Sgm ( X \/ Y ) ) = ( ( Sgm X ) ^ ( Sgm Y ) );
let m being (Element of ( NAT )),n being (Element of ( NAT ));
assume that
A105: m in X
and
A106: n in Y;
n in ( rng q ) by A2,A106,FINSEQ_1:def 13;
then consider y such that A107: y in ( dom q ) and A108: ( q . y ) = n by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A107;
A109: n = ( r . ( ( len p ) + y ) ) by A104,A107,A108,FINSEQ_1:def 7;
y <= ( len q ) by A107,CKB25:1;
then ( ( len p ) + y ) <= ( ( len p ) + ( len q ) ) by XREAL_1:7;
then A110: ( ( len p ) + y ) <= ( len r ) by A104,FINSEQ_1:22;
m in ( rng ( Sgm X ) ) by A1,A105,FINSEQ_1:def 13;
then consider x such that A111: x in ( dom p ) and A112: ( p . x ) = m by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A111;
A113: x in ( Seg ( len p ) ) by A111,FINSEQ_1:def 3;
then A114: 1 <= x by FINSEQ_1:1;
A115: x <= ( len p ) by A113,FINSEQ_1:1;
y <> ( 0 ) by A107,CKB24:1;
then A116: x < ( ( len p ) + y ) by A115,NAT_1:16,XXREAL_0:2;
m = ( r . x ) by A104,A111,A112,FINSEQ_1:def 7;
hence thesis by A4,A109,A114,A116,A110,FINSEQ_1:def 13;
end;
