environ
vocabularies NUMBERS,FINSEQ_1,ORDINAL1,XBOOLE_0,ARYTM_3,CARD_1,XXREAL_0,ARYTM_1,NAT_1,SUBSET_1,TARSKI,RELAT_1,ORDINAL4,FUNCT_1,FINSET_1,FINSEQ_2,FUNCT_2,CARD_3,FUNCOP_1,FINSEQ_3,EQREL_1,ALG_1,FUNCT_6,SETFAM_1,FINSEQ_4,ZFMISC_1,FUNCT_5,PARTFUN1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,SETFAM_1,CARD_1,NUMBERS,ORDINAL1,XCMPLX_0,RELAT_1,FUNCT_1,FINSEQ_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,FINSEQ_2,FINSET_1,NAT_1,FINSEQOP,XXREAL_0,CARD_3,FUNCT_3,FUNCT_5,FUNCT_6,EQREL_1,CKB61;
definitions FUNCT_1,TARSKI,WELLORD2,XBOOLE_0,FINSEQ_2,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6,CKB61;
theorems CARD_1,CARD_2,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,INT_1,NAT_1,TARSKI,WELLORD2,ZFMISC_1,RELAT_1,XREAL_1,XBOOLE_0,XBOOLE_1,FUNCT_2,GRFUNC_1,SUBSET_1,XXREAL_0,ORDINAL1,NUMBERS,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6,SETFAM_1,FUNCT_5,FUNCT_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78;
schemes FINSEQ_1,FUNCT_1,NAT_1,CLASSES1,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,CARD_1,FINSEQ_2,FUNCOP_1,CARD_3,SUBSET_1,FUNCT_2,CARD_2,EQREL_1,RELSET_1,FUNCT_4;
constructors ENUMSET1,PARTFUN1,WELLORD2,XXREAL_0,REAL_1,NAT_1,INT_1,FINSEQOP,RELSET_1,CARD_3,DOMAIN_1,CARD_2,EQREL_1,FUNCT_6,BINOP_1,FUNCT_3,FUNCT_5,CKB61;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve p for FinSequence;
reserve x for set;
reserve y for set;
reserve A for set;
reserve n for  natural number;
theorem
Lm9: ( ( p ^ <* x *> ) - A ) = ( ( p - A ) ^ ( <* x *> - A ) )
proof
set r = ( ( p ^ <* x *> ) - A );
set q = ( <* x *> - A );
set t = ( p ^ <* x *> );
A1: ( len t ) = ( ( len p ) + ( len <* x *> ) ) by FINSEQ_1:22
.= ( ( len p ) + 1 ) by FINSEQ_1:40;
A2:now
( t " A ) c= ( dom t ) by RELAT_1:132;
then A3: ( t " A ) c= ( Seg ( len t ) ) by FINSEQ_1:def 3;
set S = ( ( Seg ( len ( p ^ <* x *> ) ) ) \ ( ( p ^ <* x *> ) " A ) );
set s = ( Sgm ( ( Seg ( len ( p ^ <* x *> ) ) ) \ ( ( p ^ <* x *> ) " A ) ) );
let k being (Element of ( NAT ));
A4: S c= ( Seg ( len t ) ) by XBOOLE_1:36;
assume A5: k in ( dom q );
then A6: (not x in A) by CKB77:1,RELAT_1:38;
then A7: q = <* x *> by CKB76:1;
then A8: ( dom q ) = { 1 } by FINSEQ_1:2,FINSEQ_1:def 8;
then A9: k = 1 by A5,TARSKI:def 1;
A10: ( p " A ) = ( ( p ^ <* x *> ) " A )
proof
thus ( p " A ) c= ( ( p ^ <* x *> ) " A )
proof
let y;
assume A11: y in ( p " A );
then A12: y in ( dom p ) by FUNCT_1:def 7;
then reconsider z = y as (Element of ( NAT ));
( p . y ) in A by A11,FUNCT_1:def 7;
then A13: ( t . z ) in A by A12,FINSEQ_1:def 7;
y in ( dom t ) by A12,CKB22:1;
hence thesis by A13,FUNCT_1:def 7;
end;

let y;
assume A14: y in ( ( p ^ <* x *> ) " A );
then A15: y in ( dom t ) by FUNCT_1:def 7;
then reconsider z = y as (Element of ( NAT ));
A16: ( t . y ) in A by A14,FUNCT_1:def 7;
A17:now
given n such that
A18: n in ( dom q )
and
A19: z = ( ( len p ) + n );

n = 1 by A8,A18,TARSKI:def 1;
hence contradiction by A6,A16,A19,FINSEQ_1:42;
end;
A20: (z in ( dom p ) or (ex n being Nat st (n in ( dom q ) & z = ( ( len p ) + n )))) by A7,A15,FINSEQ_1:25;
then ( t . z ) = ( p . z ) by A17,FINSEQ_1:def 7;
hence thesis by A16,A20,A17,FUNCT_1:def 7;
end;
A21:now
assume A22: ( len t ) in ( t " A );
( t . ( len t ) ) = x by A1,FINSEQ_1:42;
hence contradiction by A6,A22,FUNCT_1:def 7;
end;
A23: ( dom s ) = ( Seg ( len s ) ) by FINSEQ_1:def 3;
( len t ) in ( Seg ( len t ) ) by A1,FINSEQ_1:4;
then ( len t ) in S by A21,XBOOLE_0:def 5;
then ( len t ) in ( rng s ) by A4,FINSEQ_1:def 13;
then consider y such that A24: y in ( dom s ) and A25: ( s . y ) = ( len t ) by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A24;
A26: ( ( len ( p - A ) ) + k ) = ( ( ( len p ) - ( card ( p " A ) ) ) + k ) by CKB62:1
.= ( ( ( len p ) + 1 ) - ( card ( ( p ^ <* x *> ) " A ) ) ) by A9,A10
.= ( ( ( len p ) + ( len <* x *> ) ) - ( card ( ( p ^ <* x *> ) " A ) ) ) by FINSEQ_1:39
.= ( ( len ( p ^ <* x *> ) ) - ( card ( ( p ^ <* x *> ) " A ) ) ) by FINSEQ_1:22
.= ( len r ) by CKB62:1;
A27: ( len s ) = ( card S ) by CKB39:1,XBOOLE_1:36
.= ( ( card ( Seg ( len t ) ) ) - ( card ( t " A ) ) ) by A3,CARD_2:44
.= ( ( len t ) - ( card ( p " A ) ) ) by A10,FINSEQ_1:57
.= ( ( ( len p ) - ( card ( p " A ) ) ) + k ) by A1,A9
.= ( len r ) by A26,CKB62:1;
then A28: ( len s ) = ( ( len ( p - A ) ) + 1 ) by A5,A8,A26,TARSKI:def 1;
then A29: ( len r ) in ( dom s ) by A27,A23,FINSEQ_1:4;
A30:now
A31: ( s . ( len s ) ) in ( rng s ) by A27,A29,FUNCT_1:def 3;
reconsider w = ( s . ( len s ) ) as (Element of ( NAT )) by A31;
w in S by A4,A31,FINSEQ_1:def 13;
then A32: w in ( Seg ( len t ) ) by XBOOLE_0:def 5;
assume A33: y <> ( len s );
A34: y in ( Seg ( len s ) ) by A24,FINSEQ_1:def 3;
then y <= ( len s ) by FINSEQ_1:1;
then A35: y < ( len s ) by A33,XXREAL_0:1;
1 <= y by A34,FINSEQ_1:1;
then ( len t ) < w by A4,A25,A35,FINSEQ_1:def 13;
hence contradiction by A32,FINSEQ_1:1;
end;
( dom t ) = ( Seg ( len t ) ) by FINSEQ_1:def 3;
hence ( r . ( ( len ( p - A ) ) + k ) ) = ( t . ( len t ) ) by A26,A27,A28,A23,A25,A30,FINSEQ_1:4,FUNCT_1:13
.= x by A1,FINSEQ_1:42
.= ( q . k ) by A7,A9,FINSEQ_1:def 8;
end;
A36:now
A37: (x in A implies ( t " A ) = ( ( p " A ) \/ { ( ( len p ) + 1 ) } ))
proof
assume A38: x in A;
thus ( t " A ) c= ( ( p " A ) \/ { ( ( len p ) + 1 ) } )
proof
let y;
assume A39: y in ( t " A );
then y in ( dom t ) by FUNCT_1:def 7;
then y in ( Seg ( ( len p ) + 1 ) ) by A1,FINSEQ_1:def 3;
then A40: y in ( ( Seg ( len p ) ) \/ { ( ( len p ) + 1 ) } ) by FINSEQ_1:9;
now
per cases  by A40,XBOOLE_0:def 3;
suppose A41: y in ( Seg ( len p ) );

then reconsider j = y as (Element of ( NAT ));
A42: ( t . y ) in A by A39,FUNCT_1:def 7;
A43: y in ( dom p ) by A41,FINSEQ_1:def 3;
then ( p . j ) = ( t . j ) by FINSEQ_1:def 7;
then y in ( p " A ) by A43,A42,FUNCT_1:def 7;
hence thesis by XBOOLE_0:def 3;
end;
suppose y in { ( ( len p ) + 1 ) };

hence thesis by XBOOLE_0:def 3;
end;
end;
hence thesis;
end;

let y;
assume A44: y in ( ( p " A ) \/ { ( ( len p ) + 1 ) } );
now
per cases  by A44,XBOOLE_0:def 3;
suppose A45: y in ( p " A );

( p " A ) c= ( t " A ) by CKB60:1;
hence thesis by A45;
end;
suppose y in { ( ( len p ) + 1 ) };

then A46: y = ( ( len p ) + 1 ) by TARSKI:def 1;
then y in ( Seg ( len t ) ) by A1,FINSEQ_1:4;
then A47: y in ( dom t ) by FINSEQ_1:def 3;
( t . y ) in A by A38,A46,FINSEQ_1:42;
hence thesis by A47,FUNCT_1:def 7;
end;
end;
hence thesis;
end;
( t " A ) c= ( dom t ) by RELAT_1:132;
then A48: ( t " A ) c= ( Seg ( len t ) ) by FINSEQ_1:def 3;
A49: ((not x in A) implies ( t " A ) = ( p " A ))
proof
assume A50: (not x in A);
thus ( t " A ) c= ( p " A )
proof
let y;
assume A51: y in ( t " A );
then A52: y in ( dom t ) by FUNCT_1:def 7;
then reconsider l = y as (Element of ( NAT ));
A53:now
assume l = ( ( len p ) + 1 );
then ( t . l ) = x by FINSEQ_1:42;
hence contradiction by A50,A51,FUNCT_1:def 7;
end;
A54: y in ( Seg ( len t ) ) by A52,FINSEQ_1:def 3;
then l <= ( ( len p ) + 1 ) by A1,FINSEQ_1:1;
then l < ( ( len p ) + 1 ) by A53,XXREAL_0:1;
then A55: l <= ( len p ) by NAT_1:13;
1 <= l by A54,FINSEQ_1:1;
then l in ( Seg ( len p ) ) by A55,FINSEQ_1:1;
then A56: y in ( dom p ) by FINSEQ_1:def 3;
( t . l ) in A by A51,FUNCT_1:def 7;
then ( p . l ) in A by A56,FINSEQ_1:def 7;
hence thesis by A56,FUNCT_1:def 7;
end;

thus thesis by CKB60:1;
end;
set s2 = ( Sgm ( ( Seg ( len p ) ) \ ( p " A ) ) );
set s1 = ( Sgm ( ( Seg ( len t ) ) \ ( t " A ) ) );
let k being (Element of ( NAT ));
A57: ( dom p ) = ( Seg ( len p ) ) by FINSEQ_1:def 3;
A58:now
( { ( ( len p ) + 1 ) } /\ ( p " A ) ) = ( {} )
proof
set z = the (Element of ( { ( ( len p ) + 1 ) } /\ ( p " A ) ));
A59: ( p " A ) c= ( dom p ) by RELAT_1:132;
assume A60: (not thesis);
then z in { ( ( len p ) + 1 ) } by XBOOLE_0:def 4;
then A61: z = ( ( len p ) + 1 ) by TARSKI:def 1;
A62: ( dom p ) = ( Seg ( len p ) ) by FINSEQ_1:def 3;
z in ( p " A ) by A60,XBOOLE_0:def 4;
then ( ( len p ) + 1 ) <= ( len p ) by A61,A59,A62,FINSEQ_1:1;
hence thesis by XREAL_1:29;
end;
then A63: { ( ( len p ) + 1 ) } misses ( p " A ) by XBOOLE_0:def 7;
assume ( t " A ) = ( p " A );
hence ( ( Seg ( len t ) ) \ ( t " A ) ) = ( ( ( Seg ( len p ) ) \/ { ( ( len p ) + 1 ) } ) \ ( p " A ) ) by A1,FINSEQ_1:9
.= ( ( ( Seg ( len p ) ) \ ( p " A ) ) \/ ( { ( ( len p ) + 1 ) } \ ( p " A ) ) ) by XBOOLE_1:42
.= ( ( ( Seg ( len p ) ) \ ( p " A ) ) \/ { ( ( len p ) + 1 ) } ) by A63,XBOOLE_1:83;
end;
( ( Seg ( len p ) ) /\ { ( ( len p ) + 1 ) } ) = ( {} )
proof
set z = the (Element of ( ( Seg ( len p ) ) /\ { ( ( len p ) + 1 ) } ));
assume A64: (not thesis);
then A65: z in ( Seg ( len p ) ) by XBOOLE_0:def 4;
then reconsider f = z as (Element of ( NAT ));
f in { ( ( len p ) + 1 ) } by A64,XBOOLE_0:def 4;
then A66: f = ( ( len p ) + 1 ) by TARSKI:def 1;
f <= ( len p ) by A65,FINSEQ_1:1;
hence thesis by A66,XREAL_1:29;
end;
then A67: ( Seg ( len p ) ) misses { ( ( len p ) + 1 ) } by XBOOLE_0:def 7;
A68:now
assume ( t " A ) = ( ( p " A ) \/ { ( ( len p ) + 1 ) } );
hence ( ( Seg ( len t ) ) \ ( t " A ) ) = ( ( ( Seg ( len p ) ) \/ { ( ( len p ) + 1 ) } ) \ ( ( p " A ) \/ { ( ( len p ) + 1 ) } ) ) by A1,FINSEQ_1:9
.= ( ( ( Seg ( len p ) ) \ ( ( p " A ) \/ { ( ( len p ) + 1 ) } ) ) \/ ( { ( ( len p ) + 1 ) } \ ( ( p " A ) \/ { ( ( len p ) + 1 ) } ) ) ) by XBOOLE_1:42
.= ( ( ( Seg ( len p ) ) \ ( ( p " A ) \/ { ( ( len p ) + 1 ) } ) ) \/ ( {} ) ) by XBOOLE_1:46
.= ( ( ( Seg ( len p ) ) \ ( p " A ) ) /\ ( ( Seg ( len p ) ) \ { ( ( len p ) + 1 ) } ) ) by XBOOLE_1:53
.= ( ( ( Seg ( len p ) ) \ ( p " A ) ) /\ ( Seg ( len p ) ) ) by A67,XBOOLE_1:83
.= ( ( Seg ( len p ) ) \ ( p " A ) ) by XBOOLE_1:28,XBOOLE_1:36;
end;
( p " A ) c= ( dom p ) by RELAT_1:132;
then A69: ( p " A ) c= ( Seg ( len p ) ) by FINSEQ_1:def 3;
( len s2 ) = ( card ( ( Seg ( len p ) ) \ ( p " A ) ) ) by CKB39:1,XBOOLE_1:36
.= ( ( card ( Seg ( len p ) ) ) - ( card ( p " A ) ) ) by A69,CARD_2:44;
then A70: ( len s2 ) = ( ( len p ) - ( card ( p " A ) ) ) by FINSEQ_1:57;
( ( Seg ( len t ) ) \ ( t " A ) ) c= ( Seg ( len t ) ) by XBOOLE_1:36;
then A71: ( rng s1 ) c= ( Seg ( len t ) ) by FINSEQ_1:def 13;
A72: ( ( Seg ( len p ) ) \ ( p " A ) ) c= ( Seg ( len p ) ) by XBOOLE_1:36;
then A73: ( rng s2 ) c= ( Seg ( len p ) ) by FINSEQ_1:def 13;
assume k in ( dom ( p - A ) );
then A74: k in ( dom s2 ) by A57,FUNCT_1:11;
then ( s2 . k ) in ( rng s2 ) by FUNCT_1:def 3;
then ( s2 . k ) in ( Seg ( len p ) ) by A73;
then A75: ( s2 . k ) in ( dom p ) by FINSEQ_1:def 3;
( len s1 ) = ( card ( ( Seg ( len t ) ) \ ( t " A ) ) ) by CKB39:1,XBOOLE_1:36
.= ( ( card ( Seg ( len t ) ) ) - ( card ( t " A ) ) ) by A48,CARD_2:44;
then A76: ( len s1 ) = ( ( len t ) - ( card ( t " A ) ) ) by FINSEQ_1:57;
A77: ( dom s2 ) c= ( dom s1 )
proof
( <* x *> " A ) c= ( dom <* x *> ) by RELAT_1:132;
then ( <* x *> " A ) c= { 1 } by FINSEQ_1:2,FINSEQ_1:def 8;
then A78: (( <* x *> " A ) = ( {} ) or ( <* x *> " A ) = { 1 }) by ZFMISC_1:33;
let y;
A79: ( card ( p " A ) ) <= ( ( card ( p " A ) ) + 1 ) by NAT_1:12;
assume A80: y in ( dom s2 );
then reconsider l = y as (Element of ( NAT ));
A81: y in ( Seg ( len s2 ) ) by A80,FINSEQ_1:def 3;
then l <= ( ( len p ) - ( card ( p " A ) ) ) by A70,FINSEQ_1:1;
then ( l + ( card ( p " A ) ) ) <= ( len p ) by XREAL_1:19;
then A82: ( ( l + ( card ( p " A ) ) ) + 1 ) <= ( len t ) by A1,XREAL_1:7;
( card ( t " A ) ) = ( ( card ( p " A ) ) + ( card ( <* x *> " A ) ) ) by CKB59:1;
then ( l + ( card ( t " A ) ) ) <= ( l + ( ( card ( p " A ) ) + 1 ) ) by A78,A79,CARD_1:27,CARD_1:30,XREAL_1:7;
then ( l + ( card ( t " A ) ) ) <= ( len t ) by A82,XXREAL_0:2;
then A83: l <= ( len s1 ) by A76,XREAL_1:19;
1 <= l by A81,FINSEQ_1:1;
then l in ( Seg ( len s1 ) ) by A83,FINSEQ_1:1;
hence thesis by FINSEQ_1:def 3;
end;
then ( s1 . k ) in ( rng s1 ) by A74,FUNCT_1:def 3;
then ( s1 . k ) in ( Seg ( len t ) ) by A71;
then reconsider l = ( s1 . k ) as (Element of ( NAT ));
( dom t ) = ( Seg ( len t ) ) by FINSEQ_1:def 3;
then A84: ( r . k ) = ( t . l ) by A74,A77,FUNCT_1:13;
( ( len p ) + 1 ) in ( Seg ( ( len p ) + 1 ) ) by FINSEQ_1:4;
then A85: { ( ( len p ) + 1 ) } c= ( Seg ( ( len p ) + 1 ) ) by ZFMISC_1:31;
A86:now
per cases  by A37,A49,A58,A68;
suppose ( ( Seg ( len p ) ) \ ( p " A ) ) = ( ( Seg ( len t ) ) \ ( t " A ) );

hence ( s1 . k ) = ( s2 . k );
end;
suppose A87: ( ( Seg ( len t ) ) \ ( t " A ) ) = ( ( ( Seg ( len p ) ) \ ( p " A ) ) \/ { ( ( len p ) + 1 ) } );

now
let m being (Element of ( NAT )),n being (Element of ( NAT ));
assume that
A88: m in ( ( Seg ( len p ) ) \ ( p " A ) )
and
A89: n in { ( ( len p ) + 1 ) };
m in ( Seg ( len p ) ) by A88,XBOOLE_0:def 5;
then A90: m <= ( len p ) by FINSEQ_1:1;
A91: ( len p ) < ( ( len p ) + 1 ) by XREAL_1:29;
n = ( ( len p ) + 1 ) by A89,TARSKI:def 1;
hence m < n by A90,A91,XXREAL_0:2;
end;
then s1 = ( s2 ^ ( Sgm { ( ( len p ) + 1 ) } ) ) by A72,A85,A87,CKB42:1;
hence ( s1 . k ) = ( s2 . k ) by A74,FINSEQ_1:def 7;
end;
end;
( ( p - A ) . k ) = ( p . ( s2 . k ) ) by A57,A74,FUNCT_1:13;
hence ( r . k ) = ( ( p - A ) . k ) by A75,A86,A84,FINSEQ_1:def 7;
end;
( len r ) = ( ( len ( p ^ <* x *> ) ) - ( card ( t " A ) ) ) by CKB62:1
.= ( ( ( len p ) + ( len <* x *> ) ) - ( card ( t " A ) ) ) by FINSEQ_1:22
.= ( ( ( len p ) + ( len <* x *> ) ) - ( ( card ( p " A ) ) + ( card ( <* x *> " A ) ) ) ) by CKB59:1
.= ( ( ( ( len p ) - ( card ( p " A ) ) ) + ( len <* x *> ) ) + ( - ( card ( <* x *> " A ) ) ) )
.= ( ( ( len ( p - A ) ) + ( len <* x *> ) ) + ( - ( card ( <* x *> " A ) ) ) ) by CKB62:1
.= ( ( len ( p - A ) ) + ( ( len <* x *> ) - ( card ( <* x *> " A ) ) ) )
.= ( ( len ( p - A ) ) + ( len q ) ) by CKB62:1;
hence thesis by A36,A2,CKB37:1;
end;
