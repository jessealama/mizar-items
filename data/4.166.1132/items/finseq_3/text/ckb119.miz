environ
vocabularies NUMBERS,FINSEQ_1,ORDINAL1,XBOOLE_0,ARYTM_3,CARD_1,XXREAL_0,ARYTM_1,NAT_1,SUBSET_1,TARSKI,RELAT_1,ORDINAL4,FUNCT_1,FINSET_1,FINSEQ_2,FUNCT_2,CARD_3,FUNCOP_1,FINSEQ_3,EQREL_1,ALG_1,FUNCT_6,SETFAM_1,FINSEQ_4,ZFMISC_1,FUNCT_5,PARTFUN1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,SETFAM_1,CARD_1,NUMBERS,ORDINAL1,XCMPLX_0,RELAT_1,FUNCT_1,FINSEQ_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,FINSEQ_2,FINSET_1,NAT_1,FINSEQOP,XXREAL_0,CARD_3,FUNCT_3,FUNCT_5,FUNCT_6,EQREL_1,CKB61,CKB114;
definitions FUNCT_1,TARSKI,WELLORD2,XBOOLE_0,FINSEQ_2,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6,CKB61,CKB114;
theorems CARD_1,CARD_2,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,INT_1,NAT_1,TARSKI,WELLORD2,ZFMISC_1,RELAT_1,XREAL_1,XBOOLE_0,XBOOLE_1,FUNCT_2,GRFUNC_1,SUBSET_1,XXREAL_0,ORDINAL1,NUMBERS,CARD_3,FUNCOP_1,EQREL_1,FUNCT_6,SETFAM_1,FUNCT_5,FUNCT_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB117,CKB118;
schemes FINSEQ_1,FUNCT_1,NAT_1,CLASSES1,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,CARD_1,FINSEQ_2,FUNCOP_1,CARD_3,SUBSET_1,FUNCT_2,CARD_2,EQREL_1,RELSET_1,FUNCT_4;
constructors ENUMSET1,PARTFUN1,WELLORD2,XXREAL_0,REAL_1,NAT_1,INT_1,FINSEQOP,RELSET_1,CARD_3,DOMAIN_1,CARD_2,EQREL_1,FUNCT_6,BINOP_1,FUNCT_3,FUNCT_5,CKB61,CKB114;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve J for (Element of ( NAT ));
theorem
Th117: (for i,k,m,n being Nat holds (((n = ( m + 1 ) & k in ( Seg n )) & i in ( Seg m )) implies (((1 <= i & i < k) implies ( ( Sgm ( ( Seg n ) \ { k } ) ) . i ) = i) & ((k <= i & i <= m) implies ( ( Sgm ( ( Seg n ) \ { k } ) ) . i ) = ( i + 1 )))))
proof
defpred P[ Nat ]
 means
(for n,k,i being Nat holds (((n = ( $1 + 1 ) & k in ( Seg n )) & i in ( Seg $1 )) implies (((1 <= i & i < k) implies ( ( Sgm ( ( Seg n ) \ { k } ) ) . i ) = i) & ((k <= i & i <= $1) implies ( ( Sgm ( ( Seg n ) \ { k } ) ) . i ) = ( i + 1 )))));
let i being Nat,k being Nat,m being Nat,n being Nat;
assume that
A1: n = ( m + 1 )
and
A2: k in ( Seg n )
and
A3: i in ( Seg m );
A4: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume that
A5: P[ k ];
let g being Nat,i being Nat,n being Nat;
assume that
A6: g = ( ( k + 1 ) + 1 )
and
A7: i in ( Seg g )
and
A8: n in ( Seg ( k + 1 ) );
A9: 1 <= i by A7,FINSEQ_1:1;
set X = ( ( Seg g ) \ { i } );
A10: ( len ( Sgm X ) ) = ( k + 1 ) by A6,A7,CKB118:1;
A11: 1 <= n by A8,FINSEQ_1:1;
A12: i <= g by A7,FINSEQ_1:1;
A13: X c= ( Seg g ) by XBOOLE_1:36;
then A14: ( rng ( Sgm X ) ) = X by FINSEQ_1:def 13;
A15: n <= ( k + 1 ) by A8,FINSEQ_1:1;
now
per cases ;
suppose A16: i = g;

then A17: ( k + 1 ) < i by A6,NAT_1:13;
X = ( Seg ( k + 1 ) )
proof
thus X c= ( Seg ( k + 1 ) )
proof
let x;
A18: ( Seg g ) = { J: (1 <= J & J <= g) } by FINSEQ_1:def 1;
assume A19: x in X;
then x in ( Seg g ) by XBOOLE_0:def 5;
then consider J such that A20: x = J and A21: 1 <= J and A22: J <= g by A18;
(not x in { i }) by A19,XBOOLE_0:def 5;
then x <> i by TARSKI:def 1;
then J < g by A16,A20,A22,XXREAL_0:1;
then J <= ( k + 1 ) by A6,NAT_1:13;
hence thesis by A20,A21,FINSEQ_1:1;
end;

let x;
assume x in ( Seg ( k + 1 ) );
then x in { J: (1 <= J & J <= ( k + 1 )) } by FINSEQ_1:def 1;
then consider J such that A23: x = J and A24: 1 <= J and A25: J <= ( k + 1 );
( k + 1 ) <= g by A6,NAT_1:11;
then J <= g by A25,XXREAL_0:2;
then A26: J in ( Seg g ) by A24,FINSEQ_1:1;
(not J in { i }) by A17,A25,TARSKI:def 1;
hence thesis by A23,A26,XBOOLE_0:def 5;
end;
then ( Sgm X ) = ( idseq ( k + 1 ) ) by CKB50:1;
hence ((1 <= n & n < i) implies ( ( Sgm X ) . n ) = n) by A8,FUNCT_1:17;
thus ((i <= n & n <= ( k + 1 )) implies ( ( Sgm ( ( Seg g ) \ { i } ) ) . n ) = ( n + 1 )) by A6,A16,NAT_1:13;
end;
suppose A27: i <> g;

set A = { l where l is (Element of ( NAT )): ((1 <= l & l <= g) & l <> i) };
A28: X = A
proof
thus X c= A
proof
let x;
A29: ( Seg g ) = { J: (1 <= J & J <= g) } by FINSEQ_1:def 1;
assume A30: x in X;
then x in ( Seg g ) by XBOOLE_0:def 5;
then consider m being (Element of ( NAT )) such that A31: x = m and A32: 1 <= m and A33: m <= g by A29;
(not x in { i }) by A30,XBOOLE_0:def 5;
then m <> i by A31,TARSKI:def 1;
hence thesis by A31,A32,A33;
end;

let x;
assume x in A;
then consider m being (Element of ( NAT )) such that A34: x = m and A35: 1 <= m and A36: m <= g and A37: m <> i;
A38: (not m in { i }) by A37,TARSKI:def 1;
m in ( Seg g ) by A35,A36,FINSEQ_1:1;
hence thesis by A34,A38,XBOOLE_0:def 5;
end;
1 <= ( k + 1 ) by A11,A15,XXREAL_0:2;
then ( k + 1 ) in ( dom ( Sgm X ) ) by A10,CKB25:1;
then ( ( Sgm X ) . ( k + 1 ) ) in X by A14,FUNCT_1:def 3;
then A39: (ex J st (((( ( Sgm X ) . ( k + 1 ) ) = J & 1 <= J) & J <= g) & J <> i)) by A28;
A40: g in ( NAT ) by ORDINAL1:def 12;
1 <= g by A9,A12,XXREAL_0:2;
then g in ( rng ( Sgm X ) ) by A14,A27,A28,A40;
then consider x being Nat such that A41: x in ( dom ( Sgm X ) ) and A42: ( ( Sgm X ) . x ) = g by FINSEQ_2:10;
1 <= x by A41,CKB25:1;
then A43: ( k + 1 ) <= x by A13,A10,A39,A42,FINSEQ_1:def 13;
A44: i < g by A12,A27,XXREAL_0:1;
then A45: i <= ( k + 1 ) by A6,NAT_1:13;
A46: x <= ( k + 1 ) by A10,A41,CKB25:1;
now
per cases  by A15,XXREAL_0:1;
suppose A47: n = ( k + 1 );

hence ((1 <= n & n < i) implies ( ( Sgm X ) . n ) = n) by A6,A44,NAT_1:13;
thus ((i <= n & n <= ( k + 1 )) implies ( ( Sgm ( ( Seg g ) \ { i } ) ) . n ) = ( n + 1 )) by A6,A42,A46,A43,A47,XXREAL_0:1;
end;
suppose A48: n < ( k + 1 );

set Y = ( ( Seg ( k + 1 ) ) \ { i } );
A49:now
let j1 being (Element of ( NAT )),j being (Element of ( NAT ));
assume that
A50: j1 in Y
and
A51: j in { g };
j1 in ( Seg ( k + 1 ) ) by A50,XBOOLE_0:def 5;
then A52: j1 <= ( k + 1 ) by FINSEQ_1:1;
j = g by A51,TARSKI:def 1;
hence j1 < j by A6,A52,NAT_1:13;
end;
A53: X = ( Y \/ { g } )
proof
thus X c= ( Y \/ { g } )
proof
let x;
assume x in X;
then consider J such that A54: x = J and A55: 1 <= J and A56: J <= g and A57: J <> i by A28;
now
per cases  by A56,XXREAL_0:1;
suppose J = g;

then x in { g } by A54,TARSKI:def 1;
hence thesis by XBOOLE_0:def 3;
end;
suppose J < g;

then J <= ( k + 1 ) by A6,NAT_1:13;
then A58: J in ( Seg ( k + 1 ) ) by A55,FINSEQ_1:1;
(not J in { i }) by A57,TARSKI:def 1;
then x in Y by A54,A58,XBOOLE_0:def 5;
hence thesis by XBOOLE_0:def 3;
end;
end;
hence thesis;
end;

let x;
assume that
A59: x in ( Y \/ { g } );
now
per cases  by A59,XBOOLE_0:def 3;
suppose A60: x in Y;

A61: ( Seg ( k + 1 ) ) = { s where s is (Element of ( NAT )): (1 <= s & s <= ( k + 1 )) } by FINSEQ_1:def 1;
x in ( Seg ( k + 1 ) ) by A60,XBOOLE_0:def 5;
then consider s being (Element of ( NAT )) such that A62: x = s and A63: 1 <= s and A64: s <= ( k + 1 ) by A61;
(not x in { i }) by A60,XBOOLE_0:def 5;
then A65: s <> i by A62,TARSKI:def 1;
( k + 1 ) <= g by A6,NAT_1:11;
then s <= g by A64,XXREAL_0:2;
hence thesis by A28,A62,A63,A65;
end;
suppose x in { g };

then A66: x = g by TARSKI:def 1;
1 <= g by A9,A12,XXREAL_0:2;
hence thesis by A27,A28,A66,A40;
end;
end;
hence thesis;
end;
then { g } c= X by XBOOLE_1:7;
then A67: { g } c= ( Seg g ) by A13,XBOOLE_1:1;
Y c= X by A53,XBOOLE_1:7;
then Y c= ( Seg g ) by A13,XBOOLE_1:1;
then A68: ( Sgm X ) = ( ( Sgm Y ) ^ ( Sgm { g } ) ) by A53,A49,A67,CKB42:1;
n <= k by A48,NAT_1:13;
then A69: n in ( Seg k ) by A11,FINSEQ_1:1;
A70: i in ( Seg ( k + 1 ) ) by A9,A45,FINSEQ_1:1;
then ( len ( Sgm Y ) ) = k by CKB118:1;
then A71: n in ( dom ( Sgm Y ) ) by A69,FINSEQ_1:def 3;
n <= k by A48,NAT_1:13;
then A72: n in ( Seg k ) by A11,FINSEQ_1:1;
then A73: ((1 <= n & n < i) implies ( ( Sgm ( ( Seg ( k + 1 ) ) \ { i } ) ) . n ) = n) by A5,A70;
now
assume that
A74: 1 <= n
and
A75: n < i;
n in ( Seg ( len ( Sgm Y ) ) ) by A72,A70,CKB118:1;
then n in ( dom ( Sgm Y ) ) by FINSEQ_1:def 3;
hence ( ( Sgm X ) . n ) = n by A73,A68,A74,A75,FINSEQ_1:def 7;
end;
hence ((1 <= n & n < i) implies ( ( Sgm X ) . n ) = n);
assume that
A76: i <= n
and
n <= ( k + 1 );
((i <= n & n <= k) implies ( ( Sgm ( ( Seg ( k + 1 ) ) \ { i } ) ) . n ) = ( n + 1 )) by A5,A72,A70;
hence ( ( Sgm X ) . n ) = ( n + 1 ) by A48,A68,A76,A71,FINSEQ_1:def 7,NAT_1:13;
end;
end;
hence thesis;
end;
end;
hence thesis;
end;
A77: P[ ( 0 ) ];
(for k being Nat holds P[ k ]) from NAT_1:sch 2(A77,A4);
hence thesis by A1,A2,A3;
end;
