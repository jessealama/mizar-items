environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,INT_1,XXREAL_0,CARD_1,RELAT_1,ARYTM_3,POWER,EUCLID,FINSEQ_1,BINOP_2,ZFMISC_1,TARSKI,FUNCT_1,FINSEQ_2,MARGREL1,BINARITH,ARYTM_1,SUBSET_1,PARTFUN1,XBOOLEAN,BINARI_2,BINARI_3,FUNCOP_1,ORDINAL4,COMPLEX1,NEWTON,BINARI_4;
notations INT_1,SUBSET_1,XBOOLEAN,MARGREL1,FUNCOP_1,POWER,BINARITH,BINARI_2,BINARI_3,SERIES_1,NUMBERS,XXREAL_0,XBOOLE_0,NAT_1,NAT_D,BINOP_2,EUCLID,TARSKI,PARTFUN1,FUNCT_1,RELAT_1,ZFMISC_1,INT_2,FINSEQOP,NEWTON,FINSEQ_1,FINSEQ_2,CKB21,CKB27;
definitions FINSEQ_2,XBOOLEAN,EUCLID,CKB21,CKB27;
theorems POWER,NAT_1,PRE_FF,ABSVALUE,BINARI_3,INT_1,BINARITH,NAT_2,BINARI_2,FINSEQ_1,FINSEQ_2,FINSEQ_4,FUNCOP_1,RVSUM_1,FUNCT_2,ZFMISC_1,INT_3,EULER_2,PEPIN,PREPOWER,XREAL_1,XXREAL_0,XBOOLEAN,NAT_D,VALUED_1,XREAL_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34;
schemes NAT_1;
registrations XBOOLE_0,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,XBOOLEAN,MARGREL1,VALUED_0,FINSEQ_1,FINSEQ_2,RELAT_1,FUNCT_1,CARD_1;
constructors XXREAL_0,REAL_1,NAT_D,FINSEQOP,NEWTON,SERIES_1,BINARITH,BINARI_2,EUCLID,BINARI_3,RVSUM_1,RELSET_1,CKB21,CKB27;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
reserve n for non empty Nat;
theorem
Lm6: (for h,i being Integer holds (((h < ( 0 ) & i < ( 0 )) & ( h mod ( 2 to_power n ) ) = ( i mod ( 2 to_power n ) )) implies ( 2sComplement (n,h) ) = ( 2sComplement (n,i) )))
proof
let h being Integer,i being Integer;
assume that
A1: h < ( 0 )
and
A2: i < ( 0 )
and
A3: ( h mod ( 2 to_power n ) ) = ( i mod ( 2 to_power n ) );
( abs i ) = ( - i ) by A2,ABSVALUE:def 1;
then ( 2 to_power ( MajP (n,( abs i )) ) ) >= ( - i ) by CKB21:def 1;
then ( ( 2 to_power ( MajP (n,( abs i )) ) ) + i ) >= ( ( - i ) + i ) by XREAL_1:6;
then reconsider I = ( ( 2 to_power ( MajP (n,( abs i )) ) ) + i ) as (Element of ( NAT )) by INT_1:3;
( abs h ) = ( - h ) by A1,ABSVALUE:def 1;
then ( 2 to_power ( MajP (n,( abs h )) ) ) >= ( - h ) by CKB21:def 1;
then ( ( 2 to_power ( MajP (n,( abs h )) ) ) + h ) >= ( ( - h ) + h ) by XREAL_1:6;
then reconsider H = ( ( 2 to_power ( MajP (n,( abs h )) ) ) + h ) as (Element of ( NAT )) by INT_1:3;
A4: ( (H qua Nat) mod ( 2 to_power n ) ) = ( (I qua Nat) mod ( 2 to_power n ) ) by A3,CKB33:1;
A5: (for j being Nat holds (j in ( Seg n ) implies ( ( n -BinarySequence ( abs H ) ) . j ) = ( ( n -BinarySequence ( abs I ) ) . j )))
proof
A6: ( len ( n -BinarySequence I ) ) = n by CARD_1:def 7;
let j being Nat;
assume that
A7: j in ( Seg n );
A8: 1 <= j by A7,FINSEQ_1:1;
A9: j <= n by A7,FINSEQ_1:1;
reconsider j as Nat;
( j - 1 ) >= ( 1 - 1 ) by A8,XREAL_1:9;
then ( j -' 1 ) = ( j - 1 ) by XREAL_0:def 2;
then A10: ( j -' 1 ) < n by A9,XREAL_1:146,XXREAL_0:2;
(( len ( n -BinarySequence H ) ) = n & ( abs H ) = H) by ABSVALUE:def 1,CARD_1:def 7;
then ( ( n -BinarySequence ( abs H ) ) . j ) = ( ( n -BinarySequence H ) /. j ) by A8,A9,FINSEQ_4:15
.= ( IFEQ (( ( H div ( 2 to_power ( j -' 1 ) ) ) mod 2 ),( 0 ),( FALSE ),( TRUE )) ) by A7,BINARI_3:def 1
.= ( IFEQ (( ( I div ( 2 to_power ( j -' 1 ) ) ) mod 2 ),( 0 ),( FALSE ),( TRUE )) ) by A4,A10,CKB32:1
.= ( ( n -BinarySequence I ) /. j ) by A7,BINARI_3:def 1
.= ( ( n -BinarySequence I ) . j ) by A8,A9,A6,FINSEQ_4:15;
hence thesis by ABSVALUE:def 1;
end;
(( 2sComplement (n,h) ) = ( n -BinarySequence ( abs ( ( 2 to_power ( MajP (n,( abs h )) ) ) + h ) ) ) & ( 2sComplement (n,i) ) = ( n -BinarySequence ( abs ( ( 2 to_power ( MajP (n,( abs i )) ) ) + i ) ) )) by A1,A2,CKB27:def 1;
hence thesis by A5,FINSEQ_2:119;
end;
