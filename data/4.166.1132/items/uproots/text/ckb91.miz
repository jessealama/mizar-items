environ
vocabularies NUMBERS,FINSEQ_1,SUBSET_1,RELAT_1,FUNCT_1,CARD_1,CARD_3,FINSEQ_2,ARYTM_3,ORDINAL4,TARSKI,NAT_1,XXREAL_0,REAL_1,ARYTM_1,XBOOLE_0,ORDINAL1,RLVECT_1,ALGSTR_0,SUPINF_2,PARTFUN1,FINSET_1,FUNCT_2,MCART_1,ZFMISC_1,PRE_POLY,FUNCT_4,FUNCOP_1,VALUED_0,PBOOLE,XREAL_0,SGRAPH1,FINSOP_1,BINOP_1,GROUP_1,STRUCT_0,POLYNOM1,POLYNOM3,AFINSQ_1,MESFUNC1,ALGSEQ_1,VECTSP_1,POLYNOM5,LATTICES,VECTSP_2,COMPLFLD,POLYNOM2,FVSUM_1,MEMBERED,CLASSES1,UPROOTS;
notations TARSKI,XBOOLE_0,XCMPLX_0,XXREAL_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XREAL_0,ZFMISC_1,REAL_1,VECTSP_2,BINOP_1,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FINSEQ_1,FINSEQ_2,DOMAIN_1,FUNCT_2,XXREAL_2,VALUED_0,NAT_1,NAT_D,STRUCT_0,ALGSTR_0,RLVECT_1,VFUNCT_1,VECTSP_1,FINSOP_1,NORMSP_1,GROUP_4,RVSUM_1,ALGSEQ_1,COMPLFLD,BHSP_1,POLYNOM3,POLYNOM4,POLYNOM5,FINSET_1,MCART_1,FUNCT_4,FUNCOP_1,CLASSES1,FVSUM_1,WSIERP_1,MEMBERED,GROUP_1,RECDEF_1,PRE_POLY,CKB5,CKB11,CKB17,CKB18,CKB19,CKB20,CKB27,CKB59,CKB65,CKB72,CKB75,CKB82,CKB83;
definitions TARSKI,VECTSP_2,FUNCT_1,POLYNOM3,POLYNOM5,FINSEQ_2,RVSUM_1,GROUP_4,RLVECT_1,FUNCOP_1,RELAT_1,STRUCT_0,CKB5,CKB11,CKB18,CKB20,CKB27,CKB59,CKB65,CKB72,CKB75,CKB82,CKB83;
theorems GROUP_1,CARD_1,FINSEQ_1,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,VECTSP_1,POLYNOM5,INT_1,AXIOMS,RVSUM_1,FVSUM_1,FINSEQ_3,FINSEQ_2,POLYNOM4,POLYNOM3,FUNCT_7,ALGSEQ_1,RLVECT_1,PBOOLE,FUNCOP_1,MATRIX_3,VECTSP_2,CARD_2,FINSEQ_5,GRAPH_5,BAGORDER,RFINSEQ,WELLORD2,CARD_3,ORDINAL1,FINSOP_1,MONOID_0,INTEGRA1,FUNCT_4,MCART_1,XREAL_1,GROUP_4,XXREAL_0,PARTFUN1,XXREAL_2,NAT_D,FINSEQ_4,CLASSES1,PRE_POLY,TREES_9,CKB1,CKB3,CKB5,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB31,CKB32,CKB33,CKB35,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90;
schemes NAT_1,FUNCT_1,FUNCT_2,FRAENKEL,ALGSEQ_1,FINSEQ_1,RECDEF_1,CLASSES1,INT_1,CKB2;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,MEMBERED,FINSEQ_1,STRUCT_0,VECTSP_1,COMPLFLD,ALGSTR_1,MONOID_0,PRE_POLY,POLYNOM3,POLYNOM4,POLYNOM5,FINSEQ_2,VALUED_0,XXREAL_2,FUNCT_2,RELSET_1,GROUP_1,VFUNCT_1,CKB4,CKB6,CKB8,CKB29,CKB30,CKB34,CKB36,CKB37,CKB56,CKB71;
constructors WELLORD2,SETWISEO,REAL_1,FINSEQOP,FINSOP_1,NAT_D,WSIERP_1,VECTSP_2,REALSET2,ALGSTR_1,GROUP_4,BHSP_1,MATRIX_2,MONOID_0,GOBOARD1,POLYNOM2,POLYNOM4,POLYNOM5,SEQ_1,RECDEF_1,BINOP_2,CLASSES1,XXREAL_2,RELSET_1,FUNCT_7,FVSUM_1,VFUNCT_1,CKB5,CKB11,CKB18,CKB20,CKB27,CKB59,CKB65,CKB72,CKB75,CKB82,CKB83;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
theorem
(for L being non  trivial comRing holds (for s being non  empty  finite (Subset of L) holds (for x being (Element of L) holds (for f being (FinSequence of L) holds ((( len f ) = ( card s ) & (for i being (Element of ( NAT )) holds (for c being (Element of L) holds ((i in ( dom f ) & c = ( ( canFS s ) . i )) implies ( f . i ) = ( eval (<% ( - c ),( 1. L ) %>,x) ))))) implies ( eval (( poly_with_roots ( (s,1) -bag ) ),x) ) = ( Product f ))))))
proof
let L being non  trivial comRing;
set cL = (the carrier of L);
let s being non  empty  finite (Subset of cL);
let x being (Element of cL);
let f being (FinSequence of L);
assume that
A1: ( len f ) = ( card s )
and
A2: (for i being (Element of ( NAT )) holds (for c being (Element of cL) holds ((i in ( dom f ) & c = ( ( canFS s ) . i )) implies ( f . i ) = ( eval (<% ( - c ),( 1. L ) %>,x) ))));
set cs = ( canFS s );
A3: ( rng cs ) = s by FUNCT_2:def 3;
defpred P[ (Element of ( NAT )) ]
 means
(ex t being  finite (Subset of cL) st (ex g being (FinSequence of cL) st ((t = ( rng ( cs | ( Seg $1 ) ) ) & g = ( f | ( Seg $1 ) )) & ( eval (( poly_with_roots ( (t,1) -bag ) ),x) ) = ( Product g ))));
A4: ( len cs ) = ( card s ) by CKB7:1;
then A5: ( dom f ) = ( dom cs ) by A1,FINSEQ_3:29;
A6: (for j being (Element of ( NAT )) holds ((1 <= j & j < ( len f )) implies (P[ j ] implies P[ ( j + 1 ) ])))
proof
let j being (Element of ( NAT ));
assume that
A7: 1 <= j
and
A8: j < ( len f );
reconsider g1 = ( f | ( Seg ( j + 1 ) ) ) as (FinSequence of cL) by FINSEQ_1:18;
A9: ( j + 1 ) <= ( len f ) by A8,NAT_1:13;
then (ex l being Nat st ( len f ) = ( ( j + 1 ) + l )) by NAT_1:10;
then A10: ( len g1 ) = ( j + 1 ) by FINSEQ_3:53;
1 <= ( j + 1 ) by A7,NAT_1:13;
then A11: ( j + 1 ) in ( dom cs ) by A1,A4,A9,FINSEQ_3:25;
then ( cs . ( j + 1 ) ) in s by FINSEQ_2:11;
then reconsider csj1 = ( cs . ( j + 1 ) ) as (Element of cL);
A12: ( g1 . ( j + 1 ) ) = ( f . ( j + 1 ) ) by FINSEQ_1:4,FUNCT_1:49
.= ( eval (<% ( - csj1 ),( 1. L ) %>,x) ) by A2,A5,A11;
reconsider csja1 = ( cs | ( Seg ( j + 1 ) ) ) as (FinSequence of s) by FINSEQ_1:18;
reconsider csja = ( cs | ( Seg j ) ) as (FinSequence of s) by FINSEQ_1:18;
given t being  finite (Subset of cL),g being (FinSequence of cL) such that
A13: t = ( rng ( cs | ( Seg j ) ) )
and
A14: g = ( f | ( Seg j ) )
and
A15: ( eval (( poly_with_roots ( (t,1) -bag ) ),x) ) = ( Product g );

j <= ( j + 1 ) by NAT_1:12;
then ( Seg j ) c= ( Seg ( j + 1 ) ) by FINSEQ_1:5;
then g = ( g1 | ( Seg j ) ) by A14,RELAT_1:74;
then A16: g1 = ( g ^ <* ( eval (<% ( - csj1 ),( 1. L ) %>,x) ) *> ) by A10,A12,FINSEQ_3:55;
reconsider pt = ( poly_with_roots ( (t,1) -bag ) ) as (Polynomial of L);
set t1 = ( rng csja1 );
( Seg ( j + 1 ) ) = ( ( Seg j ) \/ { ( j + 1 ) } ) by FINSEQ_1:9;
then A17: csja1 = ( csja \/ ( cs | { ( j + 1 ) } ) ) by RELAT_1:78;
( cs | { ( j + 1 ) } ) = ( ( j + 1 ) .--> csj1 ) by A11,FUNCT_7:6;
then ( rng ( cs | { ( j + 1 ) } ) ) = { csj1 } by FUNCOP_1:8;
then A18: t1 = ( t \/ { csj1 } ) by A13,A17,RELAT_1:12;
then reconsider t1 as  finite (Subset of cL);
take t1;
take g1;
thus (t1 = ( rng ( cs | ( Seg ( j + 1 ) ) ) ) & g1 = ( f | ( Seg ( j + 1 ) ) ));
reconsider pj1 = ( poly_with_roots ( ({ csj1 },1) -bag ) ) as (Polynomial of L);
A19: pj1 = <% ( - csj1 ),( 1. L ) %> by CKB85:1;
t misses { csj1 }
proof
assume (not thesis);
then ( t /\ { csj1 } ) <> ( {} ) by XBOOLE_0:def 7;
then consider x being set such that A20: x in ( t /\ { csj1 } ) by XBOOLE_0:def 1;
x in { csj1 } by A20,XBOOLE_0:def 4;
then A21: x = csj1 by TARSKI:def 1;
x in t by A20,XBOOLE_0:def 4;
then consider i being set such that A22: i in ( dom ( cs | ( Seg j ) ) ) and A23: x = ( ( cs | ( Seg j ) ) . i ) by A13,FUNCT_1:def 3;
A24: i in ( Seg j ) by A22,RELAT_1:57;
reconsider i as (Element of ( NAT )) by A22;
A25: 1 <= i by A24,FINSEQ_1:1;
i <= j by A24,FINSEQ_1:1;
then A26: i < ( j + 1 ) by NAT_1:13;
x = ( cs . i ) by A22,A23,FUNCT_1:47;
hence contradiction by A1,A4,A3,A9,A21,A25,A26,GRAPH_5:7;
end;
then ( (t1,1) -bag ) = ( ( (t,1) -bag ) + ( ({ csj1 },1) -bag ) ) by A18,CKB16:1;
then ( poly_with_roots ( (t1,1) -bag ) ) = ( pt *' pj1 ) by CKB88:1;
hence ( eval (( poly_with_roots ( (t1,1) -bag ) ),x) ) = ( ( Product g ) * ( eval (pj1,x) ) ) by A15,POLYNOM4:24
.= ( Product g1 ) by A16,A19,GROUP_4:6;
end;
( f | ( Seg ( len f ) ) ) is FinSequence by FINSEQ_1:18;
then A27: (( cs | ( Seg ( len f ) ) ) is FinSequence & ( f | ( Seg ( len f ) ) ) = f) by FINSEQ_1:18,FINSEQ_2:20;
A28: ( (( 0 ) qua Nat) + 1 ) <= ( len f ) by A1,NAT_1:13;
A29: P[ 1 ]
proof
1 in ( dom cs ) by A1,A4,A28,FINSEQ_3:25;
then reconsider cs1 = ( cs . 1 ) as (Element of s) by FINSEQ_2:11;
reconsider g = ( f | ( Seg 1 ) ) as (FinSequence of cL) by FINSEQ_1:18;
reconsider cs1a = ( cs | ( Seg 1 ) ) as (FinSequence of s) by FINSEQ_1:18;
A30: cs1 in cL;
A31: 1 in ( Seg 1 ) by FINSEQ_1:1;
then A32: ( cs1a . 1 ) = cs1 by FUNCT_1:49;
reconsider cs1 = ( cs . 1 ) as (Element of cL) by A30;
reconsider t = { cs1 } as  finite (Subset of cL);
take t;
take g;
consider s1 being (Element of s) such that A33: cs1a = <* s1 *> by A1,A4,A28,TREES_9:34;
( cs1a . 1 ) = s1 by A33,FINSEQ_1:40;
hence (t = ( rng ( cs | ( Seg 1 ) ) ) & g = ( f | ( Seg 1 ) )) by A33,A32,FINSEQ_1:39;
consider p1 being (Element of cL) such that A34: g = <* p1 *> by A28,TREES_9:34;
A35: (( g . 1 ) = p1 & ( Product g ) = p1) by A34,FINSEQ_1:40,FINSOP_1:11;
A36: 1 in ( dom f ) by A28,FINSEQ_3:25;
then reconsider f1 = ( f . 1 ) as (Element of cL) by FINSEQ_2:11;
A37: ( g . 1 ) = f1 by A31,FUNCT_1:49;
f1 = ( eval (<% ( - cs1 ),( 1. L ) %>,x) ) by A2,A36;
hence thesis by A37,A35,CKB85:1;
end;
(for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len f )) implies P[ i ])) from INT_1:sch 7(A29,A6);
then (ex t being  finite (Subset of cL) st (ex g being (FinSequence of cL) st ((t = ( rng ( cs | ( Seg ( len f ) ) ) ) & g = ( f | ( Seg ( len f ) ) )) & ( eval (( poly_with_roots ( (t,1) -bag ) ),x) ) = ( Product g )))) by A28;
hence thesis by A1,A4,A27,A3,FINSEQ_2:20;
end;
