environ
vocabularies NUMBERS,FINSEQ_1,SUBSET_1,RELAT_1,FUNCT_1,CARD_1,CARD_3,FINSEQ_2,ARYTM_3,ORDINAL4,TARSKI,NAT_1,XXREAL_0,REAL_1,ARYTM_1,XBOOLE_0,ORDINAL1,RLVECT_1,ALGSTR_0,SUPINF_2,PARTFUN1,FINSET_1,FUNCT_2,MCART_1,ZFMISC_1,PRE_POLY,FUNCT_4,FUNCOP_1,VALUED_0,PBOOLE,XREAL_0,SGRAPH1,FINSOP_1,BINOP_1,GROUP_1,STRUCT_0,POLYNOM1,POLYNOM3,AFINSQ_1,MESFUNC1,ALGSEQ_1,VECTSP_1,POLYNOM5,LATTICES,VECTSP_2,COMPLFLD,POLYNOM2,FVSUM_1,MEMBERED,CLASSES1,UPROOTS;
notations TARSKI,XBOOLE_0,XCMPLX_0,XXREAL_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XREAL_0,ZFMISC_1,REAL_1,VECTSP_2,BINOP_1,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FINSEQ_1,FINSEQ_2,DOMAIN_1,FUNCT_2,XXREAL_2,VALUED_0,NAT_1,NAT_D,STRUCT_0,ALGSTR_0,RLVECT_1,VFUNCT_1,VECTSP_1,FINSOP_1,NORMSP_1,GROUP_4,RVSUM_1,ALGSEQ_1,COMPLFLD,BHSP_1,POLYNOM3,POLYNOM4,POLYNOM5,FINSET_1,MCART_1,FUNCT_4,FUNCOP_1,CLASSES1,FVSUM_1,WSIERP_1,MEMBERED,GROUP_1,RECDEF_1,PRE_POLY,CKB5,CKB11,CKB17,CKB18,CKB19,CKB20;
definitions TARSKI,VECTSP_2,FUNCT_1,POLYNOM3,POLYNOM5,FINSEQ_2,RVSUM_1,GROUP_4,RLVECT_1,FUNCOP_1,RELAT_1,STRUCT_0,CKB5,CKB11,CKB18,CKB20;
theorems GROUP_1,CARD_1,FINSEQ_1,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,VECTSP_1,POLYNOM5,INT_1,AXIOMS,RVSUM_1,FVSUM_1,FINSEQ_3,FINSEQ_2,POLYNOM4,POLYNOM3,FUNCT_7,ALGSEQ_1,RLVECT_1,PBOOLE,FUNCOP_1,MATRIX_3,VECTSP_2,CARD_2,FINSEQ_5,GRAPH_5,BAGORDER,RFINSEQ,WELLORD2,CARD_3,ORDINAL1,FINSOP_1,MONOID_0,INTEGRA1,FUNCT_4,MCART_1,XREAL_1,GROUP_4,XXREAL_0,PARTFUN1,XXREAL_2,NAT_D,FINSEQ_4,CLASSES1,PRE_POLY,TREES_9,CKB1,CKB3,CKB5,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18,CKB20,CKB21,CKB22;
schemes NAT_1,FUNCT_1,FUNCT_2,FRAENKEL,ALGSEQ_1,FINSEQ_1,RECDEF_1,CLASSES1,INT_1,CKB2;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,MEMBERED,FINSEQ_1,STRUCT_0,VECTSP_1,COMPLFLD,ALGSTR_1,MONOID_0,PRE_POLY,POLYNOM3,POLYNOM4,POLYNOM5,FINSEQ_2,VALUED_0,XXREAL_2,FUNCT_2,RELSET_1,GROUP_1,VFUNCT_1,CKB4,CKB6,CKB8;
constructors WELLORD2,SETWISEO,REAL_1,FINSEQOP,FINSOP_1,NAT_D,WSIERP_1,VECTSP_2,REALSET2,ALGSTR_1,GROUP_4,BHSP_1,MATRIX_2,MONOID_0,GOBOARD1,POLYNOM2,POLYNOM4,POLYNOM5,SEQ_1,RECDEF_1,BINOP_2,CLASSES1,XXREAL_2,RELSET_1,FUNCT_7,FVSUM_1,VFUNCT_1,CKB5,CKB11,CKB18,CKB20;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
theorem
Th15: (for A being set holds (for S being  finite (Subset of A) holds (for b being (bag of A) holds ((S = ( support b ) & ( degree b ) = ( card S )) iff b = ( (S,1) -bag )))))
proof
let A being set;
let S being  finite (Subset of A);
let b being (bag of A);
set cS = ( canFS S );
set f = ( b * cS );
A1: ( dom b ) = A by PARTFUN1:def 2;
set g = ( ( card S ) |-> 1 );
A2: ( len cS ) = ( card S ) by CKB7:1;
A3: ( rng cS ) = S by FUNCT_2:def 3;
then A4: ( dom f ) = ( dom cS ) by A1,RELAT_1:27;
then ( dom f ) = ( Seg ( len cS ) ) by FINSEQ_1:def 3;
then reconsider f as FinSequence by FINSEQ_1:def 2;
A5: ( len cS ) = ( len f ) by A4,FINSEQ_3:29;
hereby
set sb = ( (S,1) -bag );
assume that
A6: S = ( support b )
and
A7: ( degree b ) = ( card S );
consider F being (FinSequence of ( NAT )) such that A8: ( degree b ) = ( Sum F ) and A9: F = ( b * cS ) by A6,CKB20:def 1;
now
let i being (Element of ( NAT ));
assume i in ( dom F );
then (( F . i ) = ( b . ( cS . i ) ) & ( cS . i ) in ( rng cS )) by A4,A9,FUNCT_1:3,FUNCT_1:12;
hence ( F . i ) <> ( 0 ) by A6,PRE_POLY:def 7;
end;
then A10: F = ( ( len F ) |-> 1 ) by A2,A5,A7,A8,A9,CKB1:1;
A11: ( support b ) = ( support sb ) by A6,CKB14:1;
now
thus ( dom b ) = ( dom sb ) by A1,PARTFUN1:def 2;
let x being set;
assume x in ( dom b );
per cases ;
suppose A12: x in ( support b );

then A13: ( ( cS " ) . x ) in ( dom cS ) by A3,A6,FUNCT_1:32;
then A14: ( ( cS " ) . x ) in ( Seg ( len F ) ) by A4,A9,FINSEQ_1:def 3;
( rng cS ) = ( support b ) by A6,FUNCT_2:def 3;
hence ( b . x ) = ( b . ( cS . ( ( cS " ) . x ) ) ) by A12,FUNCT_1:35
.= ( F . ( ( cS " ) . x ) ) by A9,A13,FUNCT_1:13
.= 1 by A10,A14,FUNCOP_1:7
.= ( sb . x ) by A6,A12,CKB13:1;
end;
suppose A15: (not x in ( support b ));

hence ( b . x ) = ( 0 ) by PRE_POLY:def 7
.= ( sb . x ) by A11,A15,PRE_POLY:def 7;
end;
end;
hence b = ( (S,1) -bag ) by FUNCT_1:2;
end;
( rng f ) c= ( NAT )
proof
let y being set;
assume y in ( rng f );
then consider x being set such that A16: x in ( dom f ) and A17: y = ( f . x ) by FUNCT_1:def 3;
( f . x ) = ( b . ( cS . x ) ) by A16,FUNCT_1:12;
hence thesis by A17;
end;
then reconsider f as (FinSequence of ( NAT )) by FINSEQ_1:def 4;
assume A18: b = ( (S,1) -bag );
A19: ( rng cS ) = S by FUNCT_2:def 3;
now
thus ( len f ) = ( card S ) by A4,A2,FINSEQ_3:29;
thus ( len g ) = ( card S ) by CARD_1:def 7;
let i being Nat;
A20: ( dom f ) = ( Seg ( card S ) ) by A4,A2,FINSEQ_1:def 3;
assume A21: i in ( dom f );
hence ( f . i ) = ( b . ( cS . i ) ) by FUNCT_1:12
.= 1 by A4,A19,A18,A21,CKB13:1,FUNCT_1:3
.= ( g . i ) by A20,A21,FUNCOP_1:7;
end;
then A22: f = g by FINSEQ_2:9;
thus S = ( support b ) by A18,CKB14:1;
then ( degree b ) = ( Sum f ) by CKB20:def 1;
hence ( degree b ) = ( ( card S ) * 1 ) by A22,RVSUM_1:80
.= ( card S );
end;
