environ
vocabularies NUMBERS,FINSEQ_1,SUBSET_1,RELAT_1,FUNCT_1,CARD_1,CARD_3,FINSEQ_2,ARYTM_3,ORDINAL4,TARSKI,NAT_1,XXREAL_0,REAL_1,ARYTM_1,XBOOLE_0,ORDINAL1,RLVECT_1,ALGSTR_0,SUPINF_2,PARTFUN1,FINSET_1,FUNCT_2,MCART_1,ZFMISC_1,PRE_POLY,FUNCT_4,FUNCOP_1,VALUED_0,PBOOLE,XREAL_0,SGRAPH1,FINSOP_1,BINOP_1,GROUP_1,STRUCT_0,POLYNOM1,POLYNOM3,AFINSQ_1,MESFUNC1,ALGSEQ_1,VECTSP_1,POLYNOM5,LATTICES,VECTSP_2,COMPLFLD,POLYNOM2,FVSUM_1,MEMBERED,CLASSES1,UPROOTS;
notations TARSKI,XBOOLE_0,XCMPLX_0,XXREAL_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XREAL_0,ZFMISC_1,REAL_1,VECTSP_2,BINOP_1,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FINSEQ_1,FINSEQ_2,DOMAIN_1,FUNCT_2,XXREAL_2,VALUED_0,NAT_1,NAT_D,STRUCT_0,ALGSTR_0,RLVECT_1,VFUNCT_1,VECTSP_1,FINSOP_1,NORMSP_1,GROUP_4,RVSUM_1,ALGSEQ_1,COMPLFLD,BHSP_1,POLYNOM3,POLYNOM4,POLYNOM5,FINSET_1,MCART_1,FUNCT_4,FUNCOP_1,CLASSES1,FVSUM_1,WSIERP_1,MEMBERED,GROUP_1,RECDEF_1,PRE_POLY;
definitions TARSKI,VECTSP_2,FUNCT_1,POLYNOM3,POLYNOM5,FINSEQ_2,RVSUM_1,GROUP_4,RLVECT_1,FUNCOP_1,RELAT_1,STRUCT_0;
theorems GROUP_1,CARD_1,FINSEQ_1,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,VECTSP_1,POLYNOM5,INT_1,AXIOMS,RVSUM_1,FVSUM_1,FINSEQ_3,FINSEQ_2,POLYNOM4,POLYNOM3,FUNCT_7,ALGSEQ_1,RLVECT_1,PBOOLE,FUNCOP_1,MATRIX_3,VECTSP_2,CARD_2,FINSEQ_5,GRAPH_5,BAGORDER,RFINSEQ,WELLORD2,CARD_3,ORDINAL1,FINSOP_1,MONOID_0,INTEGRA1,FUNCT_4,MCART_1,XREAL_1,GROUP_4,XXREAL_0,PARTFUN1,XXREAL_2,NAT_D,FINSEQ_4,CLASSES1,PRE_POLY,TREES_9,CKB1,CKB3;
schemes NAT_1,FUNCT_1,FUNCT_2,FRAENKEL,ALGSEQ_1,FINSEQ_1,RECDEF_1,CLASSES1,INT_1,CKB2;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,MEMBERED,FINSEQ_1,STRUCT_0,VECTSP_1,COMPLFLD,ALGSTR_1,MONOID_0,PRE_POLY,POLYNOM3,POLYNOM4,POLYNOM5,FINSEQ_2,VALUED_0,XXREAL_2,FUNCT_2,RELSET_1,GROUP_1,VFUNCT_1;
constructors WELLORD2,SETWISEO,REAL_1,FINSEQOP,FINSOP_1,NAT_D,WSIERP_1,VECTSP_2,REALSET2,ALGSTR_1,GROUP_4,BHSP_1,MATRIX_2,MONOID_0,GOBOARD1,POLYNOM2,POLYNOM4,POLYNOM5,SEQ_1,RECDEF_1,BINOP_2,CLASSES1,XXREAL_2,RELSET_1,FUNCT_7,FVSUM_1,VFUNCT_1;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
registration
let A being  finite set;
cluster  one-to-one  onto for (FinSequence of A);
existence
proof
defpred P[ (Element of ( NAT )),set,set ]
 means
$3 = [ ( choose ( $2 `2 ) ),( ( $2 `2 ) \ { ( choose ( $2 `2 ) ) } ) ];
set cA = ( card A );
A1: (for n being (Element of ( NAT )) holds ((1 <= n & n < cA) implies (for x being set holds (ex y being set st P[ n,x,y ]))));
consider f being FinSequence such that A2: ( len f ) = cA and A3: (( f . 1 ) = [ ( choose A ),( A \ { ( choose A ) } ) ] or cA = ( 0 )) and A4: (for n being (Element of ( NAT )) holds ((1 <= n & n < cA) implies P[ n,( f . n ),( f . ( n + 1 ) ) ])) from RECDEF_1:sch 3(A1);
defpred R[ (Element of ( NAT )) ]
 means
($1 in ( dom f ) implies (( f . $1 ) in [: A,( bool A ) :] & (ex X being  finite set st (X = ( ( f . $1 ) `2 ) & ( ( card X ) + $1 ) = cA))));
A5: (for i being (Element of ( NAT )) holds (((1 <= i & i < ( len f )) & R[ i ]) implies R[ ( i + 1 ) ]))
proof
let i being (Element of ( NAT ));
assume that
A6: 1 <= i
and
A7: i < ( len f )
and
A8: R[ i ]
and
( i + 1 ) in ( dom f );
A9: ( f . ( i + 1 ) ) = [ ( choose ( ( f . i ) `2 ) ),( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) ] by A2,A4,A6,A7;
consider a,ba being set such that a in A and A10: ba in ( bool A ) and A11: ( f . i ) = [ a,ba ] by A6,A7,A8,FINSEQ_3:25,ZFMISC_1:def 2;
A12: ( ( f . i ) `2 ) = ba by A11,MCART_1:7;
then A13: ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) c= A by A10,XBOOLE_1:1;
A14:now
assume ( choose ( ( f . i ) `2 ) ) in ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } );
then (not ( choose ( ( f . i ) `2 ) ) in { ( choose ( ( f . i ) `2 ) ) }) by XBOOLE_0:def 5;
hence contradiction by TARSKI:def 1;
end;
consider X being  finite set such that A15: X = ( ( f . i ) `2 ) and A16: ( ( card X ) + i ) = cA by A6,A7,A8,FINSEQ_3:25;
A17: X <> ( {} ) by A2,A7,A16,CARD_1:27;
then ( choose ( ( f . i ) `2 ) ) in ( ( f . i ) `2 ) by A15;
hence ( f . ( i + 1 ) ) in [: A,( bool A ) :] by A10,A9,A12,A13,ZFMISC_1:def 2;
reconsider XX = ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) as  finite set by A15;
take XX;
thus XX = ( ( f . ( i + 1 ) ) `2 ) by A9,MCART_1:7;
{ ( choose ( ( f . i ) `2 ) ) } c= ( ( f . i ) `2 ) by A15,A17,ZFMISC_1:31;
then ( ( f . i ) `2 ) = ( { ( choose ( ( f . i ) `2 ) ) } \/ ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) ) by XBOOLE_1:45;
then ( card X ) = ( ( card XX ) + 1 ) by A15,A14,CARD_2:41;
hence thesis by A16;
end;
A18: R[ 1 ]
proof
reconsider X = ( A \ { ( choose A ) } ) as  finite set;
A19:now
assume ( choose A ) in ( A \ { ( choose A ) } );
then (not ( choose A ) in { ( choose A ) }) by XBOOLE_0:def 5;
hence contradiction by TARSKI:def 1;
end;
assume A20: 1 in ( dom f );
then A <> ( {} ) by A2,FINSEQ_3:25;
hence ( f . 1 ) in [: A,( bool A ) :] by A3,ZFMISC_1:def 2;
take X;
thus X = ( ( f . 1 ) `2 ) by A2,A3,A20,FINSEQ_3:25,MCART_1:7;
( (( 0 ) qua Nat) + 1 ) <= ( len f ) by A20,FINSEQ_3:25;
then { ( choose A ) } c= A by A2,CARD_1:27,ZFMISC_1:31;
then A = ( { ( choose A ) } \/ ( A \ { ( choose A ) } ) ) by XBOOLE_1:45;
hence thesis by A19,CARD_2:41;
end;
A21: (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len f )) implies R[ i ])) from CKB2:sch 1(A18,A5);
( rng f ) c= [: A,( bool A ) :]
proof
let y being set;
assume y in ( rng f );
then consider i being Nat such that A22: i in ( dom f ) and A23: y = ( f . i ) by FINSEQ_2:10;
(1 <= i & i <= ( len f )) by A22,FINSEQ_3:25;
hence thesis by A21,A22,A23;
end;
then reconsider f as (FinSequence of [: A,( bool A ) :]) by FINSEQ_1:def 4;
deffunc F(Nat) = ( ( f . $1 ) `1 );
consider p being FinSequence such that A24: ( len p ) = ( card A ) and A25: (for k being Nat holds (k in ( dom p ) implies ( p . k ) = F(k))) from FINSEQ_1:sch 2;
A26: ( dom p ) = ( dom f ) by A2,A24,FINSEQ_3:29;
( rng p ) c= A
proof
let y being set;
assume y in ( rng p );
then consider i being Nat such that A27: i in ( dom p ) and A28: ( p . i ) = y by FINSEQ_2:10;
(( p . i ) = ( ( f . i ) `1 ) & ( f . i ) in [: A,( bool A ) :]) by A25,A26,A27,FINSEQ_2:11;
hence thesis by A28,MCART_1:10;
end;
then reconsider p as (FinSequence of A) by FINSEQ_1:def 4;
A29: ( rng p ) = A
proof
set F = p;
per cases ;
suppose A = ( {} );

hence thesis;
end;
suppose A30: A <> ( {} );

defpred P[ (Element of ( NAT )) ]
 means
(( ( rng ( F | ( Seg $1 ) ) ) \/ ( ( f . $1 ) `2 ) ) = A & (ex X being  finite set st (X = ( ( f . $1 ) `2 ) & ( ( card X ) + $1 ) = cA)));
A31: (for i being (Element of ( NAT )) holds (((1 <= i & i < ( len f )) & P[ i ]) implies P[ ( i + 1 ) ]))
proof
let i being (Element of ( NAT ));
assume that
A32: 1 <= i
and
A33: i < ( len f )
and
A34: P[ i ];
A35: ( f . ( i + 1 ) ) = [ ( choose ( ( f . i ) `2 ) ),( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) ] by A2,A4,A32,A33;
consider X being  finite set such that A36: X = ( ( f . i ) `2 ) and A37: ( ( card X ) + i ) = cA by A34;
reconsider XX = ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) as  finite set by A36;
( ( f . i ) `2 ) is non  empty by A2,A33,A36,A37,CARD_1:27;
then { ( choose ( ( f . i ) `2 ) ) } c= ( ( f . i ) `2 ) by ZFMISC_1:31;
then A38: ( ( f . i ) `2 ) = ( { ( choose ( ( f . i ) `2 ) ) } \/ ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } ) ) by XBOOLE_1:45;
reconsider Fi = ( F | ( Seg i ) ),Fi1 = ( F | ( Seg ( i + 1 ) ) ) as (FinSequence of A) by FINSEQ_1:18;
A39: ( i + 1 ) <= ( len F ) by A2,A24,A33,NAT_1:13;
then consider a being (Element of A) such that A40: Fi1 = ( Fi ^ <* a *> ) by A30,TREES_9:33;
1 <= ( i + 1 ) by NAT_1:12;
then A41: ( i + 1 ) in ( dom F ) by A39,FINSEQ_3:25;
A42: ( rng Fi1 ) = ( ( rng Fi ) \/ ( rng <* a *> ) ) by A40,FINSEQ_1:31
.= ( ( rng Fi ) \/ { a } ) by FINSEQ_1:39;
(( F . ( i + 1 ) ) = ( Fi1 . ( i + 1 ) ) & i = ( len Fi )) by A2,A24,A33,FINSEQ_1:4,FINSEQ_1:17,FUNCT_1:49;
then A43: a = ( F . ( i + 1 ) ) by A40,FINSEQ_1:42
.= ( ( f . ( i + 1 ) ) `1 ) by A25,A41
.= ( choose ( ( f . i ) `2 ) ) by A35,MCART_1:7;
then ( ( f . ( i + 1 ) ) `2 ) = ( ( ( f . i ) `2 ) \ { a } ) by A35,MCART_1:7;
hence ( ( rng ( F | ( Seg ( i + 1 ) ) ) ) \/ ( ( f . ( i + 1 ) ) `2 ) ) = A by A34,A38,A42,A43,XBOOLE_1:4;
take XX;
thus XX = ( ( f . ( i + 1 ) ) `2 ) by A35,MCART_1:7;
now
assume ( choose ( ( f . i ) `2 ) ) in ( ( ( f . i ) `2 ) \ { ( choose ( ( f . i ) `2 ) ) } );
then (not ( choose ( ( f . i ) `2 ) ) in { ( choose ( ( f . i ) `2 ) ) }) by XBOOLE_0:def 5;
hence contradiction by TARSKI:def 1;
end;
then ( card X ) = ( ( card XX ) + 1 ) by A36,A38,CARD_2:41;
hence thesis by A37;
end;
A44: ( ( 0 ) + 1 ) <= ( len F ) by A24,A30,NAT_1:13;
then A45: 1 in ( dom F ) by FINSEQ_3:25;
A46: P[ 1 ]
proof
reconsider X = ( A \ { ( choose A ) } ) as  finite set;
reconsider F1 = ( F | ( Seg 1 ) ) as (FinSequence of A) by FINSEQ_1:18;
A47:now
assume ( choose A ) in ( A \ { ( choose A ) } );
then (not ( choose A ) in { ( choose A ) }) by XBOOLE_0:def 5;
hence contradiction by TARSKI:def 1;
end;
1 in ( Seg ( (( 0 ) qua Nat) + 1 ) ) by FINSEQ_1:4;
then A48: ( F1 . 1 ) = ( F . 1 ) by FUNCT_1:49
.= ( ( f . 1 ) `1 ) by A25,A45
.= ( choose A ) by A3,A30,MCART_1:7;
(ex a being (Element of A) st F1 = <* a *>) by A30,A44,TREES_9:34;
then ( F | ( Seg 1 ) ) = <* ( choose A ) *> by A48,FINSEQ_1:40;
then A49: ( rng ( F | ( Seg 1 ) ) ) = { ( choose A ) } by FINSEQ_1:39;
( ( f . 1 ) `2 ) = ( A \ { ( choose A ) } ) by A3,A30,MCART_1:7;
hence ( ( rng ( F | ( Seg 1 ) ) ) \/ ( ( f . 1 ) `2 ) ) = A by A49,XBOOLE_1:45;
take X;
thus X = ( ( f . 1 ) `2 ) by A3,A30,MCART_1:7;
{ ( choose A ) } c= A by A30,ZFMISC_1:31;
then A = ( { ( choose A ) } \/ ( A \ { ( choose A ) } ) ) by XBOOLE_1:45;
hence thesis by A47,CARD_2:41;
end;
A50: (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len f )) implies P[ i ])) from CKB2:sch 1(A46,A31);
A51: ( len F ) >= 1 by A24,A30,NAT_1:14;
then consider X being  finite set such that A52: X = ( ( f . ( len F ) ) `2 ) and A53: ( ( card X ) + ( len f ) ) = cA by A2,A24,A50;
F = ( F | ( Seg ( len F ) ) ) by FINSEQ_3:49;
then A54: ( ( rng F ) \/ ( ( f . ( len F ) ) `2 ) ) = A by A2,A24,A50,A51;
X = ( {} ) by A2,A53;
hence thesis by A54,A52;
end;
end;
then A55: p is  onto by FUNCT_2:def 3;
take p;
p is  one-to-one by A24,A29,FINSEQ_4:62;
hence thesis by A55;
end;
end;
