environ
vocabularies NUMBERS,XREAL_0,ORDINAL1,NAT_1,XBOOLE_0,ARYTM_3,CARD_1,SUBSET_1,XXREAL_0,XCMPLX_0,COMPLEX1,ARYTM_1,RELAT_1,SQUARE_1,POWER,NEWTON,SIN_COS,XXREAL_1,FUNCT_1,ORDINAL2,REAL_1,FDIFF_1,RCOMP_1,VALUED_0,TARSKI,PARTFUN1,COMPTRIG;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,COMPLEX1,REAL_1,SQUARE_1,NAT_1,NEWTON,POWER,RELAT_1,FUNCT_1,RFUNCT_2,FCONT_1,FDIFF_1,SEQ_1,PARTFUN1,PARTFUN2,RCOMP_1,SIN_COS,XXREAL_0;
definitions RFUNCT_2,SQUARE_1,COMPLEX1,XCMPLX_0;
theorems NAT_1,SQUARE_1,POWER,ABSVALUE,RELAT_1,FUNCT_1,RFUNCT_2,PARTFUN1,FCONT_2,RCOMP_1,FDIFF_1,ROLLE,COMPLEX1,SIN_COS,SIN_COS2,XBOOLE_0,XCMPLX_1,XREAL_1,XXREAL_0,NEWTON,XCMPLX_0,XXREAL_1,XBOOLE_1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44;
schemes NAT_1,CKB1;
registrations RELSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,MEMBERED,NEWTON,SIN_COS,XBOOLE_0,VALUED_0,FCONT_1,FUNCT_1,CKB6;
constructors PARTFUN1,ARYTM_0,REAL_1,SQUARE_1,NAT_1,RCOMP_1,PARTFUN2,RFUNCT_2,FCONT_1,FDIFF_1,COMSEQ_3,BINARITH,SIN_COS,SEQ_1,BINOP_2,POWER,RVSUM_1,RELSET_1,ABIAN;
requirements NUMERALS,BOOLE,SUBSET,REAL,ARITHM;
begin
reserve x for  real number;
definition
let z being  complex number;
func Arg z -> Real means 
:Def1: ((z = ( ( |. z .| * ( cos it ) ) + ( ( |. z .| * ( sin it ) ) * ( <i> ) ) ) & ( 0 ) <= it) & it < ( 2 * ( PI ) )) if z <> ( 0 ) otherwise it = ( 0 );
existence
proof
thus (z <> ( 0 ) implies (ex r being Real st ((z = ( ( |. z .| * ( cos r ) ) + ( ( |. z .| * ( sin r ) ) * ( <i> ) ) ) & ( 0 ) <= r) & r < ( 2 * ( PI ) ))))
proof
|. z .| >= ( 0 ) by COMPLEX1:46;
then A1: ( ( Re z ) / |. z .| ) <= 1 by COMPLEX1:54,XREAL_1:185;
assume A2: z <> ( 0 );
then A3: |. z .| <> ( 0 ) by COMPLEX1:45;
now
per cases ;
suppose A4: ( Im z ) >= ( 0 );

set 0PI = [. ( 0 ),( PI ) .];
reconsider cos1 = ( ( cos ) | 0PI ) as (PartFunc of 0PI,( REAL )) by PARTFUN1:10;
reconsider cos1 as  one-to-one (PartFunc of 0PI,( REAL )) by CKB36:1,RFUNCT_2:50;
reconsider r = ( ( cos1 " ) . ( ( Re z ) / |. z .| ) ) as Real;
A5: ( |. z .| ^2 ) = ( ( ( Re z ) ^2 ) + ( ( Im z ) ^2 ) ) by CKB4:1;
take r;
( Re z ) >= ( - |. z .| ) by CKB2:1;
then ( - 1 ) <= ( ( Re z ) / |. z .| ) by COMPLEX1:46,XREAL_1:193;
then A6: ( ( Re z ) / |. z .| ) in ( rng cos1 ) by A1,CKB43:1,XXREAL_1:1;
then ( ( Re z ) / |. z .| ) in ( dom ( cos1 " ) ) by FUNCT_1:33;
then r in ( rng ( cos1 " ) ) by FUNCT_1:def 3;
then r in ( dom cos1 ) by FUNCT_1:33;
then A7: r in [. ( 0 ),( PI ) .] by RELAT_1:57;
then r <= ( PI ) by XXREAL_1:1;
then A8: (r = ( PI ) or r < ( PI )) by XXREAL_0:1;
A9: ( cos r ) = ( ( cos ) . r ) by SIN_COS:def 19
.= ( cos1 . r ) by A7,FUNCT_1:49
.= ( ( Re z ) / |. z .| ) by A6,FUNCT_1:35;
(( 0 ) = r or ( 0 ) < r) by A7,XXREAL_1:1;
then ((r = ( 0 ) or r = ( PI )) or r in ]. ( 0 ),( PI ) .[) by A8,XXREAL_1:4;
then A10: ( ( sin ) . r ) >= ( 0 ) by CKB18:1,SIN_COS:30,SIN_COS:76;
( ( ( ( cos ) . r ) ^2 ) + ( ( ( sin ) . r ) ^2 ) ) = 1 by SIN_COS:28;
then ( ( ( sin ) . r ) ^2 ) = ( 1 - ( ( ( cos ) . r ) ^2 ) )
.= ( 1 - ( ( ( Re z ) / |. z .| ) ^2 ) ) by A9,SIN_COS:def 19
.= ( 1 - ( ( ( Re z ) ^2 ) / ( |. z .| ^2 ) ) ) by XCMPLX_1:76
.= ( ( ( |. z .| ^2 ) / ( |. z .| ^2 ) ) - ( ( ( Re z ) ^2 ) / ( |. z .| ^2 ) ) ) by A3,XCMPLX_1:60
.= ( ( ( |. z .| ^2 ) - ( ( Re z ) ^2 ) ) / ( |. z .| ^2 ) )
.= ( ( ( Im z ) / |. z .| ) ^2 ) by A5,XCMPLX_1:76;
then ( ( sin ) . r ) = ( sqrt ( ( ( Im z ) / |. z .| ) ^2 ) ) by A10,SQUARE_1:22
.= ( abs ( ( Im z ) / |. z .| ) ) by COMPLEX1:72
.= ( ( abs ( Im z ) ) / ( abs |. z .| ) ) by COMPLEX1:67
.= ( ( abs ( Im z ) ) / |. z .| );
then ( abs ( Im z ) ) = ( |. z .| * ( ( sin ) . r ) ) by A2,COMPLEX1:45,XCMPLX_1:87;
then A11: ( Im z ) = ( |. z .| * ( ( sin ) . r ) ) by A4,ABSVALUE:def 1
.= ( |. z .| * ( sin r ) ) by SIN_COS:def 17;
( Re z ) = ( |. z .| * ( cos r ) ) by A2,A9,COMPLEX1:45,XCMPLX_1:87;
hence z = ( ( |. z .| * ( cos r ) ) + ( ( |. z .| * ( sin r ) ) * ( <i> ) ) ) by A11,COMPLEX1:13;
thus ( 0 ) <= r by A7,XXREAL_1:1;
r <= ( PI ) by A7,XXREAL_1:1;
hence r < ( 2 * ( PI ) ) by CKB10:1,XXREAL_0:2;
end;
suppose A12: ( Im z ) < ( 0 );

now
per cases ;
suppose A13: ( Re z ) <> |. z .|;

set 0PI = [. ( PI ),( 2 * ( PI ) ) .];
reconsider cos1 = ( ( cos ) | 0PI ) as (PartFunc of 0PI,( REAL )) by PARTFUN1:10;
reconsider cos1 as  one-to-one (PartFunc of 0PI,( REAL )) by CKB37:1,RFUNCT_2:50;
reconsider r = ( ( cos1 " ) . ( ( Re z ) / |. z .| ) ) as Real;
( Re z ) >= ( - |. z .| ) by CKB2:1;
then ( - 1 ) <= ( ( Re z ) / |. z .| ) by COMPLEX1:46,XREAL_1:193;
then A14: ( ( Re z ) / |. z .| ) in ( rng cos1 ) by A1,CKB44:1,XXREAL_1:1;
then A15: ( ( Re z ) / |. z .| ) in ( dom ( cos1 " ) ) by FUNCT_1:33;
then r in ( rng ( cos1 " ) ) by FUNCT_1:def 3;
then r in ( dom cos1 ) by FUNCT_1:33;
then A16: r in [. ( PI ),( 2 * ( PI ) ) .] by RELAT_1:57;
then r <= ( 2 * ( PI ) ) by XXREAL_1:1;
then A17: (r = ( 2 * ( PI ) ) or r < ( 2 * ( PI ) )) by XXREAL_0:1;
A18: ( ( Re z ) / |. z .| ) <> 1 by A13,XCMPLX_1:58;
A19: r <> ( 2 * ( PI ) )
proof
( 2 * ( PI ) ) in [. ( PI ),( 2 * ( PI ) ) .] by CKB10:1,XXREAL_1:1;
then (( 2 * ( PI ) ) in ( dom cos1 ) & ( cos1 . ( 2 * ( PI ) ) ) = 1) by FUNCT_1:49,RELAT_1:57,SIN_COS:24,SIN_COS:76;
then A20: ( ( cos1 " ) . 1 ) = ( 2 * ( PI ) ) by FUNCT_1:32;
1 in ( rng cos1 ) by CKB44:1,XXREAL_1:1;
then A21: 1 in ( dom ( cos1 " ) ) by FUNCT_1:33;
assume r = ( 2 * ( PI ) );
hence contradiction by A18,A15,A21,A20,FUNCT_1:def 4;
end;
A22: ( cos r ) = ( ( cos ) . r ) by SIN_COS:def 19
.= ( cos1 . r ) by A16,FUNCT_1:49
.= ( ( Re z ) / |. z .| ) by A14,FUNCT_1:35;
( PI ) <= r by A16,XXREAL_1:1;
then (( PI ) = r or ( PI ) < r) by XXREAL_0:1;
then ((r = ( PI ) or r = ( 2 * ( PI ) )) or r in ]. ( PI ),( 2 * ( PI ) ) .[) by A17,XXREAL_1:4;
then A23: ( ( sin ) . r ) <= ( 0 ) by CKB20:1,SIN_COS:76;
take r;
A24: ( |. z .| ^2 ) = ( ( ( Re z ) ^2 ) + ( ( Im z ) ^2 ) ) by CKB4:1;
( ( ( ( cos ) . r ) ^2 ) + ( ( ( sin ) . r ) ^2 ) ) = 1 by SIN_COS:28;
then ( ( ( sin ) . r ) ^2 ) = ( 1 - ( ( ( cos ) . r ) ^2 ) )
.= ( 1 - ( ( ( Re z ) / |. z .| ) ^2 ) ) by A22,SIN_COS:def 19
.= ( 1 - ( ( ( Re z ) ^2 ) / ( |. z .| ^2 ) ) ) by XCMPLX_1:76
.= ( ( ( |. z .| ^2 ) / ( |. z .| ^2 ) ) - ( ( ( Re z ) ^2 ) / ( |. z .| ^2 ) ) ) by A3,XCMPLX_1:60
.= ( ( ( |. z .| ^2 ) - ( ( Re z ) ^2 ) ) / ( |. z .| ^2 ) )
.= ( ( ( Im z ) / |. z .| ) ^2 ) by A24,XCMPLX_1:76;
then ( - ( ( sin ) . r ) ) = ( sqrt ( ( ( Im z ) / |. z .| ) ^2 ) ) by A23,SQUARE_1:23
.= ( abs ( ( Im z ) / |. z .| ) ) by COMPLEX1:72
.= ( ( abs ( Im z ) ) / ( abs |. z .| ) ) by COMPLEX1:67
.= ( ( abs ( Im z ) ) / |. z .| );
then ( ( sin ) . r ) = ( ( - ( abs ( Im z ) ) ) / |. z .| );
then ( - ( abs ( Im z ) ) ) = ( |. z .| * ( ( sin ) . r ) ) by A2,COMPLEX1:45,XCMPLX_1:87;
then A25: ( - ( - ( Im z ) ) ) = ( |. z .| * ( ( sin ) . r ) ) by A12,ABSVALUE:def 1
.= ( |. z .| * ( sin r ) ) by SIN_COS:def 17;
( Re z ) = ( |. z .| * ( cos r ) ) by A2,A22,COMPLEX1:45,XCMPLX_1:87;
hence z = ( ( |. z .| * ( cos r ) ) + ( ( |. z .| * ( sin r ) ) * ( <i> ) ) ) by A25,COMPLEX1:13;
thus ( 0 ) <= r by A16,XXREAL_1:1;
r <= ( 2 * ( PI ) ) by A16,XXREAL_1:1;
hence r < ( 2 * ( PI ) ) by A19,XXREAL_0:1;
end;
suppose A26: ( Re z ) = |. z .|;

reconsider r = ( 0 ) as Real;
take r;
( ( Re z ) ^2 ) = ( ( ( Re z ) ^2 ) + ( ( Im z ) ^2 ) ) by A26,CKB4:1;
then ( Im z ) = ( 0 );
hence z = ( ( |. z .| * ( cos r ) ) + ( ( |. z .| * ( sin r ) ) * ( <i> ) ) ) by A26,COMPLEX1:13,SIN_COS:31;
thus ( 0 ) <= r;
thus r < ( 2 * ( PI ) ) by CKB8:1;
end;
end;
hence thesis;
end;
end;
hence thesis;
end;

thus thesis;
end;
uniqueness
proof
(z <> ( 0 ) implies (for x,y being Real holds ((((((z = ( ( |. z .| * ( cos x ) ) + ( ( |. z .| * ( sin x ) ) * ( <i> ) ) ) & ( 0 ) <= x) & x < ( 2 * ( PI ) )) & z = ( ( |. z .| * ( cos y ) ) + ( ( |. z .| * ( sin y ) ) * ( <i> ) ) )) & ( 0 ) <= y) & y < ( 2 * ( PI ) )) implies x = y)))
proof
assume z <> ( 0 );
then A27: |. z .| <> ( 0 ) by COMPLEX1:45;
let x being Real;
let y being Real;
assume that
A28: z = ( ( |. z .| * ( cos x ) ) + ( ( |. z .| * ( sin x ) ) * ( <i> ) ) )
and
A29: ( 0 ) <= x
and
A30: x < ( 2 * ( PI ) )
and
A31: z = ( ( |. z .| * ( cos y ) ) + ( ( |. z .| * ( sin y ) ) * ( <i> ) ) )
and
A32: ( 0 ) <= y
and
A33: y < ( 2 * ( PI ) );
( |. z .| * ( cos x ) ) = ( |. z .| * ( cos y ) ) by A28,A31,COMPLEX1:77;
then ( cos x ) = ( cos y ) by A27,XCMPLX_1:5;
then ( cos x ) = ( ( cos ) . y ) by SIN_COS:def 19;
then A34: ( ( cos ) . x ) = ( ( cos ) . y ) by SIN_COS:def 19;
( |. z .| * ( sin x ) ) = ( |. z .| * ( sin y ) ) by A28,A31,COMPLEX1:77;
then ( sin x ) = ( sin y ) by A27,XCMPLX_1:5;
then A35: ( sin x ) = ( ( sin ) . y ) by SIN_COS:def 17;
now
per cases ;
suppose A36: (x <= ( PI ) & y <= ( PI ));

then y in [. ( 0 ),( PI ) .] by A32,XXREAL_1:1;
then A37: y in ( [. ( 0 ),( PI ) .] /\ ( dom ( cos ) ) ) by SIN_COS:24,XBOOLE_0:def 4;
assume x <> y;
then A38: (x < y or y < x) by XXREAL_0:1;
x in [. ( 0 ),( PI ) .] by A29,A36,XXREAL_1:1;
then x in ( [. ( 0 ),( PI ) .] /\ ( dom ( cos ) ) ) by SIN_COS:24,XBOOLE_0:def 4;
hence contradiction by A34,A37,A38,CKB36:1,RFUNCT_2:21;
end;
suppose A39: (x > ( PI ) & y > ( PI ));

then y in [. ( PI ),( 2 * ( PI ) ) .] by A33,XXREAL_1:1;
then A40: y in ( [. ( PI ),( 2 * ( PI ) ) .] /\ ( dom ( cos ) ) ) by SIN_COS:24,XBOOLE_0:def 4;
assume x <> y;
then A41: (x < y or y < x) by XXREAL_0:1;
x in [. ( PI ),( 2 * ( PI ) ) .] by A30,A39,XXREAL_1:1;
then x in ( [. ( PI ),( 2 * ( PI ) ) .] /\ ( dom ( cos ) ) ) by SIN_COS:24,XBOOLE_0:def 4;
hence contradiction by A34,A40,A41,CKB37:1,RFUNCT_2:20;
end;
suppose A42: (x <= ( PI ) & y > ( PI ));

then y in ]. ( PI ),( 2 * ( PI ) ) .[ by A33,XXREAL_1:4;
then A43: ( ( sin ) . y ) < ( 0 ) by CKB20:1;
x in [. ( 0 ),( PI ) .] by A29,A42,XXREAL_1:1;
then ( ( sin ) . x ) >= ( 0 ) by CKB19:1;
hence thesis by A35,A43,SIN_COS:def 17;
end;
suppose A44: (y <= ( PI ) & x > ( PI ));

then x in ]. ( PI ),( 2 * ( PI ) ) .[ by A30,XXREAL_1:4;
then A45: ( ( sin ) . x ) < ( 0 ) by CKB20:1;
y in [. ( 0 ),( PI ) .] by A32,A44,XXREAL_1:1;
then ( ( sin ) . y ) >= ( 0 ) by CKB19:1;
hence thesis by A35,A45,SIN_COS:def 17;
end;
end;
hence thesis;
end;
hence thesis;
end;
consistency;
end;
