environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,ALGSTR_0,FINSEQ_1,SUBSET_1,RLVECT_1,RELAT_1,CARD_1,FINSEQ_2,TARSKI,STRUCT_0,TREES_1,XXREAL_0,ZFMISC_1,FUNCT_1,QC_LANG1,INCSP_1,SUPINF_2,MESFUNC1,ARYTM_1,ARYTM_3,VECTSP_1,BINOP_1,MATRIX_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,STRUCT_0,ALGSTR_0,BINOP_1,FINSEQOP,RLVECT_1,VECTSP_1,XXREAL_0,CKB1,CKB12,CKB15,CKB16,CKB17,CKB18,CKB19,CKB30,CKB32,CKB33;
definitions TARSKI,RLVECT_1,BINOP_1,FINSEQ_2,STRUCT_0,ALGSTR_0,CKB1,CKB15,CKB30,CKB32,CKB33;
theorems FINSEQ_1,FINSEQ_2,FINSEQ_3,TARSKI,FUNCOP_1,FUNCT_1,FUNCT_2,ZFMISC_1,NAT_1,BINOP_1,RLVECT_1,RELAT_1,ORDINAL1,CARD_1,CARD_2,XXREAL_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB14,CKB15,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43;
schemes FINSEQ_1,BINOP_1,FINSEQ_2,CKB35,CKB36;
registrations XBOOLE_0,RELAT_1,FUNCT_1,XREAL_0,FINSEQ_1,FINSEQ_2,STRUCT_0,VECTSP_1,ORDINAL1,CARD_1,CKB2,CKB11,CKB13;
constructors BINOP_1,XXREAL_0,FINSEQOP,VECTSP_1,RLVECT_1,RELSET_1,CKB1,CKB15,CKB30,CKB32,CKB33;
requirements NUMERALS,SUBSET,BOOLE,REAL;
begin
reserve x for set;
reserve y for set;
reserve i for Nat;
reserve j for Nat;
reserve D for non  empty set;
reserve M for (Matrix of D);
reserve M1 for (Matrix of D);
reserve M2 for (Matrix of D);
definition
let D;
let M being (Matrix of D);
func M @ -> (Matrix of D) means 
:Def7: ((( len it ) = ( width M ) & (for i holds (for j holds ([ i,j ] in ( Indices it ) iff [ j,i ] in ( Indices M ))))) & (for i holds (for j holds ([ j,i ] in ( Indices M ) implies ( it * (i,j) ) = ( M * (j,i) )))));
existence
proof
now
per cases  by NAT_1:3;
suppose A1: ( width M ) > ( 0 );

deffunc F(Nat,Nat) = ( M * ($2,$1) );
consider M1 being (Matrix of ( width M ),( len M ),D) such that A2: (for i holds (for j holds ([ i,j ] in ( Indices M1 ) implies ( M1 * (i,j) ) = F(i,j)))) from CKB35:sch 1;
reconsider M9 = M1 as (Matrix of D);
( Seg ( len M ) ) = ( dom M ) by FINSEQ_1:def 3;
then A3: ( Indices M1 ) = [: ( Seg ( width M ) ),( dom M ) :] by A1,CKB38:1;
thus thesis
proof
take M9;
thus ( len M9 ) = ( width M ) by A1,CKB38:1;
thus (for i holds (for j holds ([ i,j ] in ( Indices M9 ) iff [ j,i ] in ( Indices M )))) by A3,ZFMISC_1:88;
let i;
let j;
assume [ j,i ] in ( Indices M );
then [ i,j ] in ( Indices M9 ) by A3,ZFMISC_1:88;
hence thesis by A2;
end;

end;
suppose A4: ( width M ) = ( 0 );

reconsider M1 = ( {} ) as (Matrix of D) by CKB23:1;
thus thesis
proof
take M1;
A5: ( Indices M1 ) = [: ( {} ),( Seg ( width M1 ) ) :];
( Seg ( width M ) ) = ( {} ) by A4;
hence thesis by A4,A5,ZFMISC_1:90;
end;

end;
end;
hence thesis;
end;
uniqueness
proof
let M1 being (Matrix of D);
let M2 being (Matrix of D);
assume that
A6: ( len M1 ) = ( width M )
and
A7: (for i holds (for j holds ([ i,j ] in ( Indices M1 ) iff [ j,i ] in ( Indices M ))))
and
A8: (for i holds (for j holds ([ j,i ] in ( Indices M ) implies ( M1 * (i,j) ) = ( M * (j,i) ))))
and
A9: ( len M2 ) = ( width M )
and
A10: (for i holds (for j holds ([ i,j ] in ( Indices M2 ) iff [ j,i ] in ( Indices M ))))
and
A11: (for i holds (for j holds ([ j,i ] in ( Indices M ) implies ( M2 * (i,j) ) = ( M * (j,i) ))));
A12:now
let i;
let j;
assume [ i,j ] in ( Indices M1 );
then A13: [ j,i ] in ( Indices M ) by A7;
then ( M1 * (i,j) ) = ( M * (j,i) ) by A8;
hence ( M1 * (i,j) ) = ( M2 * (i,j) ) by A11,A13;
end;
now
let x;
let y;
thus ([ x,y ] in [: ( dom M1 ),( Seg ( width M1 ) ) :] implies [ x,y ] in [: ( dom M2 ),( Seg ( width M2 ) ) :])
proof
assume A14: [ x,y ] in [: ( dom M1 ),( Seg ( width M1 ) ) :];
then x in ( dom M1 ) by ZFMISC_1:87;
then reconsider i = x as (Element of ( NAT ));
y in ( Seg ( width M1 ) ) by A14,ZFMISC_1:87;
then reconsider j = y as (Element of ( NAT ));
[ j,i ] in ( Indices M ) by A7,A14;
hence thesis by A10;
end;

thus ([ x,y ] in [: ( dom M2 ),( Seg ( width M2 ) ) :] implies [ x,y ] in [: ( dom M1 ),( Seg ( width M1 ) ) :])
proof
assume A15: [ x,y ] in [: ( dom M2 ),( Seg ( width M2 ) ) :];
then x in ( dom M2 ) by ZFMISC_1:87;
then reconsider i = x as (Element of ( NAT ));
y in ( Seg ( width M2 ) ) by A15,ZFMISC_1:87;
then reconsider j = y as (Element of ( NAT ));
[ j,i ] in ( Indices M ) by A10,A15;
hence thesis by A7;
end;

end;
then A16: [: ( dom M1 ),( Seg ( width M1 ) ) :] = [: ( dom M2 ),( Seg ( width M2 ) ) :] by ZFMISC_1:89;
A17:now
assume A18: ( len M1 ) <> ( 0 );
then ( Seg ( len M2 ) ) <> ( {} ) by A6,A9;
then A19: ( dom M2 ) <> ( {} ) by FINSEQ_1:def 3;
now
per cases ;
suppose A20: ( Seg ( width M1 ) ) <> ( {} );

( Seg ( len M1 ) ) <> ( {} ) by A18;
then ( dom M1 ) <> ( {} ) by FINSEQ_1:def 3;
then ( Seg ( width M1 ) ) = ( Seg ( width M2 ) ) by A16,A20,ZFMISC_1:110;
hence ( width M1 ) = ( width M2 ) by FINSEQ_1:6;
end;
suppose A21: ( Seg ( width M1 ) ) = ( {} );

then [: ( dom M2 ),( Seg ( width M2 ) ) :] = ( {} ) by A16,ZFMISC_1:90;
then ( Seg ( width M2 ) ) = ( {} ) by A19,ZFMISC_1:90;
hence ( width M1 ) = ( width M2 ) by A21,FINSEQ_1:6;
end;
end;
hence (( len M1 ) = ( len M2 ) & ( width M1 ) = ( width M2 )) by A6,A9;
end;
(( len M1 ) = ( 0 ) implies ((( len M2 ) = ( 0 ) & ( width M1 ) = ( 0 )) & ( width M2 ) = ( 0 ))) by A6,A9,CKB30:def 1;
hence thesis by A17,A12,CKB34:1;
end;
end;
