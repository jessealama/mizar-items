environ
vocabularies SUBSET_1,NUMBERS,FINSEQ_1,FINSEQ_2,PARTFUN1,REAL_1,XREAL_0,ORDINAL1,EUCLID,FUNCT_1,RELAT_1,ARYTM_3,ARYTM_1,RVSUM_1,CARD_3,CARD_1,SQUARE_1,COMPLEX1,XXREAL_0,FDIFF_1,VALUED_1,XXREAL_1,TARSKI,EUCLID_8,FUNCT_2,XBOOLE_0,NAT_1,VALUED_0,ORDINAL2,SEQ_1,SEQ_2,RCOMP_1,PDIFF_1,PDIFF_2,FCONT_1,PDIFF_4;
notations TARSKI,SUBSET_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XCMPLX_0,XREAL_0,COMPLEX1,ORDINAL1,NUMBERS,REAL_1,NAT_1,VALUED_0,SQUARE_1,RVSUM_1,VALUED_1,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RCOMP_1,EUCLID,FDIFF_1,XXREAL_0,FCONT_1,PDIFF_1,PDIFF_2,EUCLID_8,CKB25,CKB26,CKB27,CKB31,CKB32,CKB33;
definitions TARSKI,EUCLID,RCOMP_1,PDIFF_1,PDIFF_2,EUCLID_8,VALUED_1,RVSUM_1,XBOOLE_0,SUBSET_1,CKB25,CKB26,CKB27,CKB31,CKB32,CKB33;
theorems TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,RCOMP_1,SEQ_4,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RFUNCT_2,RELAT_1,FUNCT_1,FUNCT_2,PARTFUN1,FDIFF_1,VALUED_1,SEQM_3,XCMPLX_0,XCMPLX_1,PDIFF_1,NAT_1,VALUED_0,RFUNCT_1,RVSUM_1,EUCLID_5,PARTFUN2,EUCLID_8,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35;
schemes SEQ_1;
registrations RELSET_1,XREAL_0,MEMBERED,FDIFF_1,FUNCT_2,NAT_1,NUMBERS,XXREAL_0,FINSEQ_1,VALUED_0,VALUED_1,ORDINAL1,SEQ_4,EUCLID,RVSUM_1,RCOMP_1,FUNCOP_1,FCONT_3;
constructors REAL_1,SEQ_2,COMPLEX1,RCOMP_1,FDIFF_1,SEQ_1,FCONT_1,PDIFF_1,RELSET_1,PDIFF_2,EUCLID_8,SQUARE_1,BINOP_2,FINSEQOP,FINSEQ_4,MONOID_0,CKB25,CKB26,CKB27,CKB31,CKB32,CKB33;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve z for Real;
reserve s for Real;
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve f for (PartFunc of ( REAL 3 ),( REAL ));
reserve R for REST;
reserve L for LINEAR;
theorem
(for u0 being (Element of ( REAL 3 )) holds (for N being (Neighbourhood of ( ( proj (3,3) ) . u0 )) holds ((f is_partial_differentiable_in u0,3 & N c= ( dom ( SVF1 (3,f,u0) ) )) implies (for h being  convergent_to_0 Real_Sequence holds (for c being  constant Real_Sequence holds ((( rng c ) = { ( ( proj (3,3) ) . u0 ) } & ( rng ( h + c ) ) c= N) implies (( ( h " ) (#) ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) ) is  convergent & ( partdiff (f,u0,3) ) = ( lim ( ( h " ) (#) ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) ) ))))))))
proof
let u0 being (Element of ( REAL 3 ));
let N being (Neighbourhood of ( ( proj (3,3) ) . u0 ));
assume A1: (f is_partial_differentiable_in u0,3 & N c= ( dom ( SVF1 (3,f,u0) ) ));
let h being  convergent_to_0 Real_Sequence;
let c being  constant Real_Sequence;
assume that
A2: (( rng c ) = { ( ( proj (3,3) ) . u0 ) } & ( rng ( h + c ) ) c= N);
consider x0 being Real,y0 being Real,z0 being Real such that A3: (u0 = <* x0,y0,z0 *> & (ex N1 being (Neighbourhood of z0) st (N1 c= ( dom ( SVF1 (3,f,u0) ) ) & (ex L st (ex R st (for z holds (z in N1 implies ( ( ( SVF1 (3,f,u0) ) . z ) - ( ( SVF1 (3,f,u0) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) )))))))) by A1,CKB15:1;
consider N1 being (Neighbourhood of z0) such that A4: (N1 c= ( dom ( SVF1 (3,f,u0) ) ) & (ex L st (ex R st (for z holds (z in N1 implies ( ( ( SVF1 (3,f,u0) ) . z ) - ( ( SVF1 (3,f,u0) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) )))))) by A3;
consider L,R such that A5: (for z holds (z in N1 implies ( ( ( SVF1 (3,f,u0) ) . z ) - ( ( SVF1 (3,f,u0) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))) by A4;
A6: ( ( proj (3,3) ) . u0 ) = z0 by A3,CKB3:1;
then consider N2 being (Neighbourhood of z0) such that A7: (N2 c= N & N2 c= N1) by RCOMP_1:17;
consider g being  real number such that A8: (( 0 ) < g & N2 = ]. ( z0 - g ),( z0 + g ) .[) by RCOMP_1:def 6;
A9: z0 in N2
proof
A10: ( z0 + ( 0 ) ) < ( z0 + g ) by A8,XREAL_1:8;
( z0 - g ) < ( z0 - ( 0 ) ) by A8,XREAL_1:44;
hence thesis by A8,A10;
end;
(ex n st (( rng ( c ^\ n ) ) c= N2 & ( rng ( ( h + c ) ^\ n ) ) c= N2))
proof
z0 in ( rng c ) by A2,A6,TARSKI:def 1;
then A11: ( lim c ) = z0 by SEQ_4:25;
A12: (h is  convergent & ( lim h ) = ( 0 )) by FDIFF_1:def 1;
then A13: ( lim ( h + c ) ) = ( ( 0 ) + z0 ) by A11,SEQ_2:6
.= z0;
( h + c ) is  convergent by A12,SEQ_2:5;
then consider n such that A14: (for m being (Element of ( NAT )) holds (n <= m implies ( abs ( ( ( h + c ) . m ) - z0 ) ) < g)) by A8,A13,SEQ_2:def 7;
A15: ( rng ( c ^\ n ) ) = { z0 } by A2,A6,VALUED_0:26;
take n;
thus ( rng ( c ^\ n ) ) c= N2
proof
let z being set;
assume z in ( rng ( c ^\ n ) );
hence thesis by A9,A15,TARSKI:def 1;
end;

let z being set;
assume z in ( rng ( ( h + c ) ^\ n ) );
then consider m such that A16: z = ( ( ( h + c ) ^\ n ) . m ) by FUNCT_2:113;
( n + ( 0 ) ) <= ( n + m ) by XREAL_1:7;
then ( abs ( ( ( h + c ) . ( n + m ) ) - z0 ) ) < g by A14;
then (( - g ) < ( ( ( h + c ) . ( m + n ) ) - z0 ) & ( ( ( h + c ) . ( m + n ) ) - z0 ) < g) by SEQ_2:1;
then (( - g ) < ( ( ( ( h + c ) ^\ n ) . m ) - z0 ) & ( ( ( ( h + c ) ^\ n ) . m ) - z0 ) < g) by NAT_1:def 3;
then (( z0 + ( - g ) ) < ( ( ( h + c ) ^\ n ) . m ) & ( ( ( h + c ) ^\ n ) . m ) < ( z0 + g )) by XREAL_1:19,XREAL_1:20;
hence thesis by A8,A16;
end;
then consider n such that A17: (( rng ( c ^\ n ) ) c= N2 & ( rng ( ( h + c ) ^\ n ) ) c= N2);
A18: ( rng ( c ^\ n ) ) c= ( dom ( SVF1 (3,f,u0) ) )
proof
let z being set;
A19: ( rng ( c ^\ n ) ) = ( rng c ) by VALUED_0:26;
assume z in ( rng ( c ^\ n ) );
then z = z0 by A2,A6,A19,TARSKI:def 1;
then z in N by A7,A9;
hence thesis by A1;
end;
A20: ( rng ( ( h + c ) ^\ n ) ) c= ( dom ( SVF1 (3,f,u0) ) )
proof
let z being set;
assume z in ( rng ( ( h + c ) ^\ n ) );
then z in N2 by A17;
then z in N by A7;
hence thesis by A1;
end;
A21: ( rng c ) c= ( dom ( SVF1 (3,f,u0) ) )
proof
let z being set;
assume z in ( rng c );
then z = z0 by A2,A6,TARSKI:def 1;
then z in N by A7,A9;
hence thesis by A1;
end;
A22: ( rng ( h + c ) ) c= ( dom ( SVF1 (3,f,u0) ) )
proof
let z being set;
assume z in ( rng ( h + c ) );
then z in N by A2;
hence thesis by A1;
end;
A23: (for z holds (z in N2 implies ( ( ( SVF1 (3,f,u0) ) . z ) - ( ( SVF1 (3,f,u0) ) . z0 ) ) = ( ( L . ( z - z0 ) ) + ( R . ( z - z0 ) ) ))) by A5,A7;
A24: (for k holds ( ( ( SVF1 (3,f,u0) ) . ( ( ( h + c ) ^\ n ) . k ) ) - ( ( SVF1 (3,f,u0) ) . ( ( c ^\ n ) . k ) ) ) = ( ( L . ( ( h ^\ n ) . k ) ) + ( R . ( ( h ^\ n ) . k ) ) ))
proof
let k;
( ( ( h + c ) ^\ n ) . k ) in ( rng ( ( h + c ) ^\ n ) ) by VALUED_0:28;
then A25: ( ( ( h + c ) ^\ n ) . k ) in N2 by A17;
A26: ( ( ( ( h + c ) ^\ n ) . k ) - ( ( c ^\ n ) . k ) ) = ( ( ( ( h ^\ n ) + ( c ^\ n ) ) . k ) - ( ( c ^\ n ) . k ) ) by SEQM_3:15
.= ( ( ( ( h ^\ n ) . k ) + ( ( c ^\ n ) . k ) ) - ( ( c ^\ n ) . k ) ) by SEQ_1:7
.= ( ( h ^\ n ) . k );
A27: ( ( c ^\ n ) . k ) in ( rng ( c ^\ n ) ) by VALUED_0:28;
( rng ( c ^\ n ) ) = ( rng c ) by VALUED_0:26;
then ( ( c ^\ n ) . k ) = z0 by A2,A6,A27,TARSKI:def 1;
hence thesis by A5,A7,A25,A26;
end;
A28: L is  total by FDIFF_1:def 3;
A29: R is  total by FDIFF_1:def 2;
A30: ( ( ( SVF1 (3,f,u0) ) /* ( ( h + c ) ^\ n ) ) - ( ( SVF1 (3,f,u0) ) /* ( c ^\ n ) ) ) = ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) )
proof
now
let k;
thus ( ( ( ( SVF1 (3,f,u0) ) /* ( ( h + c ) ^\ n ) ) - ( ( SVF1 (3,f,u0) ) /* ( c ^\ n ) ) ) . k ) = ( ( ( ( SVF1 (3,f,u0) ) /* ( ( h + c ) ^\ n ) ) . k ) - ( ( ( SVF1 (3,f,u0) ) /* ( c ^\ n ) ) . k ) ) by RFUNCT_2:1
.= ( ( ( SVF1 (3,f,u0) ) . ( ( ( h + c ) ^\ n ) . k ) ) - ( ( ( SVF1 (3,f,u0) ) /* ( c ^\ n ) ) . k ) ) by A20,FUNCT_2:108
.= ( ( ( SVF1 (3,f,u0) ) . ( ( ( h + c ) ^\ n ) . k ) ) - ( ( SVF1 (3,f,u0) ) . ( ( c ^\ n ) . k ) ) ) by A18,FUNCT_2:108
.= ( ( L . ( ( h ^\ n ) . k ) ) + ( R . ( ( h ^\ n ) . k ) ) ) by A24
.= ( ( ( L /* ( h ^\ n ) ) . k ) + ( R . ( ( h ^\ n ) . k ) ) ) by A28,FUNCT_2:115
.= ( ( ( L /* ( h ^\ n ) ) . k ) + ( ( R /* ( h ^\ n ) ) . k ) ) by A29,FUNCT_2:115
.= ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) . k ) by SEQ_1:7;
end;
hence thesis by FUNCT_2:63;
end;
A31: (( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) is  convergent & ( lim ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) ) = ( L . 1 ))
proof
deffunc F((Element of ( NAT ))) = ( ( L . 1 ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . $1 ) );
consider s1 being Real_Sequence such that A32: (for k holds ( s1 . k ) = F(k)) from SEQ_1:sch 1;
consider s such that A33: (for p1 being Real holds ( L . p1 ) = ( s * p1 )) by FDIFF_1:def 3;
A34: ( L . 1 ) = ( s * 1 ) by A33
.= s;
now
let m;
( h ^\ n ) is  non-zero by FDIFF_1:def 1;
then A35: ( ( h ^\ n ) . m ) <> ( 0 ) by SEQ_1:5;
thus ( ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) . m ) = ( ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) by SEQ_1:8
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) + ( ( R /* ( h ^\ n ) ) . m ) ) * ( ( ( h ^\ n ) " ) . m ) ) by SEQ_1:7
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) + ( ( ( R /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) )
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by SEQ_1:8
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) . m ) " ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by VALUED_1:10
.= ( ( ( L . ( ( h ^\ n ) . m ) ) * ( ( ( h ^\ n ) . m ) " ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by A28,FUNCT_2:115
.= ( ( ( s * ( ( h ^\ n ) . m ) ) * ( ( ( h ^\ n ) . m ) " ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by A33
.= ( ( s * ( ( ( h ^\ n ) . m ) * ( ( ( h ^\ n ) . m ) " ) ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) )
.= ( ( s * 1 ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by A35,XCMPLX_0:def 7
.= ( s1 . m ) by A32,A34;
end;
then A36: ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) = s1 by FUNCT_2:63;
A37:now
let r being  real number;
assume that
A38: ( 0 ) < r;
(( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) is  convergent & ( lim ( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) ) = ( 0 )) by FDIFF_1:def 2;
then consider m such that A39: (for k holds (m <= k implies ( abs ( ( ( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) . k ) - ( 0 ) ) ) < r)) by A38,SEQ_2:def 7;
take n1 = m;
let k;
assume that
A40: n1 <= k;
( abs ( ( s1 . k ) - ( L . 1 ) ) ) = ( abs ( ( ( L . 1 ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . k ) ) - ( L . 1 ) ) ) by A32
.= ( abs ( ( ( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) . k ) - ( 0 ) ) );
hence ( abs ( ( s1 . k ) - ( L . 1 ) ) ) < r by A39,A40;
end;
hence ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) is  convergent by A36,SEQ_2:def 6;
hence thesis by A36,A37,SEQ_2:def 7;
end;
A41: N2 c= ( dom ( SVF1 (3,f,u0) ) ) by A1,A7,XBOOLE_1:1;
A42: ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) = ( ( ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) ^\ n ) - ( ( SVF1 (3,f,u0) ) /* ( c ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) by A22,A30,VALUED_0:27
.= ( ( ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) ^\ n ) - ( ( ( SVF1 (3,f,u0) ) /* c ) ^\ n ) ) (#) ( ( h ^\ n ) " ) ) by A21,VALUED_0:27
.= ( ( ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) ^\ n ) (#) ( ( h ^\ n ) " ) ) by SEQM_3:17
.= ( ( ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) ^\ n ) (#) ( ( h " ) ^\ n ) ) by SEQM_3:18
.= ( ( ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) (#) ( h " ) ) ^\ n ) by SEQM_3:19;
then A43: ( L . 1 ) = ( lim ( ( h " ) (#) ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) ) ) by A31,SEQ_4:22;
thus ( ( h " ) (#) ( ( ( SVF1 (3,f,u0) ) /* ( h + c ) ) - ( ( SVF1 (3,f,u0) ) /* c ) ) ) is  convergent by A31,A42,SEQ_4:21;
thus thesis by A1,A3,A23,A41,A43,CKB21:1;
end;
