environ
vocabularies NUMBERS,FUNCT_1,RELAT_1,FUNCT_4,FUNCOP_1,XBOOLE_0,TARSKI,GLIB_003,VALUED_0,SUBSET_1,REAL_1,GRAPH_5,FINSET_1,ZFMISC_1,TREES_1,GLIB_000,PBOOLE,CARD_1,XXREAL_0,CARD_3,XREAL_0,ORDINAL1,ARYTM_1,PARTFUN1,ARYTM_3,GLIB_001,ABIAN,NAT_1,FINSEQ_1,GRAPH_1,RCOMP_1,INT_1,PRE_POLY,UPROOTS,SGRAPH1,GLIB_005;
notations TARSKI,XBOOLE_0,CARD_1,NUMBERS,SUBSET_1,XCMPLX_0,XXREAL_0,XREAL_0,DOMAIN_1,REAL_1,RELAT_1,VALUED_0,PARTFUN1,FUNCT_1,PBOOLE,FINSEQ_1,FUNCT_2,GRAPH_5,ORDINAL1,UPROOTS,RELSET_1,FINSET_1,INT_1,NAT_1,FUNCOP_1,FUNCT_4,GLIB_000,GLIB_001,ABIAN,GLIB_002,GLIB_003,PRE_POLY,CKB5,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB30,CKB34,CKB35,CKB36,CKB37,CKB38,CKB42,CKB43;
definitions TARSKI,GLIB_000,GLIB_003,FUNCOP_1,CKB5,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB20,CKB21,CKB22,CKB24,CKB27,CKB30,CKB34,CKB35,CKB36,CKB37,CKB38,CKB42,CKB43;
theorems CARD_1,CARD_2,FUNCOP_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCT_1,FUNCT_2,FUNCT_4,GLIB_000,GLIB_001,GLIB_003,GLIB_004,GRAPH_5,ABIAN,INT_1,NAT_1,PBOOLE,PEPIN,TARSKI,UPROOTS,XBOOLE_0,XBOOLE_1,ZFMISC_1,XREAL_1,XXREAL_0,ORDINAL1,NAT_D,VALUED_0,RELSET_1,PARTFUN1,RELAT_1,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB42,CKB43,CKB44,CKB45,CKB46;
schemes NAT_1,SUBSET_1,FINSEQ_1,CLASSES1,RECDEF_1,GRAPH_5;
registrations XBOOLE_0,RELAT_1,PARTFUN1,INT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,GLIB_000,ABIAN,GLIB_001,GLIB_002,GLIB_003,VALUED_0,FUNCT_2,CARD_1,PRE_CIRC,PRE_POLY,RELSET_1,CKB6,CKB7,CKB8,CKB39,CKB40,CKB41;
constructors DOMAIN_1,FUNCT_4,NAT_D,GRAPH_2,GRAPH_5,UPROOTS,GLIB_004,SEQ_1,XXREAL_2,RELSET_1,PBOOLE,CKB5,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB30,CKB34,CKB35,CKB36,CKB37,CKB38,CKB42,CKB43;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
theorem
Th14: (for G being  finite  natural-weighted WGraph holds (for EL being (FF:ELabeling of G) holds (for source,sink being set holds (for P being (Path of G) holds ((((source <> sink & EL has_valid_flow_from source,sink) & P is_Walk_from source,sink) & P is_augmenting_wrt EL) implies ( FF:PushFlow (EL,P) ) has_valid_flow_from source,sink)))))
proof
let G being  finite  natural-weighted WGraph;
let EL being (FF:ELabeling of G);
let source being set;
let sink being set;
let P being (Path of G);
assume that
A1: source <> sink
and
A2: EL has_valid_flow_from source,sink
and
A3: P is_Walk_from source,sink
and
A4: P is_augmenting_wrt EL;
set EL2 = ( FF:PushFlow (EL,P) );
now
thus (source is (Vertex of G) & sink is (Vertex of G)) by A2,CKB10:def 1;
now
let e being set;
assume A5: e in ( the_Edges_of G );
then A6: ( EL . e ) <= ( ( the_Weight_of G ) . e ) by A2,CKB10:def 1;
now
per cases ;
suppose (not e in ( P .edges() ));

hence (( 0 ) <= ( EL2 . e ) & ( EL2 . e ) <= ( ( the_Weight_of G ) . e )) by A4,A5,A6,CKB36:def 1;
end;
suppose e in ( P .edges() );

then consider n being  odd (Element of ( NAT )) such that A7: n < ( len P ) and A8: ( P . ( n + 1 ) ) = e by GLIB_001:100;
set PFS = ( P .flowSeq EL );
set n1div2 = ( ( n + 1 ) div 2 );
A9: 1 <= ( n + 1 ) by NAT_1:11;
( n + 1 ) <= ( len P ) by A7,NAT_1:13;
then n1div2 in ( dom ( P .edgeSeq() ) ) by A9,GLIB_001:77;
then A10: n1div2 in ( dom PFS ) by A4,CKB34:def 1;
A11:now
A12: ( n + ( 0 ) ) < ( n + 2 ) by XREAL_1:8;
assume that
A13: e DJoins ( P . n ),( P . ( n + 2 ) ),G
and
A14: e DJoins ( P . ( n + 2 ) ),( P . n ),G;
A15: ( ( the_Source_of G ) . e ) = ( P . n ) by A13,GLIB_000:def 14;
A16: ( ( the_Source_of G ) . e ) = ( P . ( n + 2 ) ) by A14,GLIB_000:def 14;
A17: ( n + 2 ) <= ( len P ) by A7,GLIB_001:1;
then n = 1 by A15,A16,A12,GLIB_001:def 28;
then A18: ( P . n ) = source by A3,GLIB_001:17;
( n + 2 ) = ( len P ) by A15,A16,A12,A17,GLIB_001:def 28;
hence contradiction by A1,A3,A15,A16,A18,GLIB_001:17;
end;
A19: ( P .last() ) = sink by A3,GLIB_001:def 23;
( P .first() ) = source by A3,GLIB_001:def 23;
then A20: P is non  trivial by A1,A19,GLIB_001:127;
2 divides ( n + 1 ) by PEPIN:22;
then A21: ( 2 * n1div2 ) = ( n + 1 ) by NAT_D:3;
then A22: ( ( 2 * n1div2 ) - 1 ) = n;
A23: ( ( 2 * n1div2 ) + 1 ) = ( n + 2 ) by A21;
A24: e Joins ( P . n ),( P . ( n + 2 ) ),G by A7,A8,GLIB_001:def 3;
now
per cases  by A24,GLIB_000:16;
suppose A25: e DJoins ( P . n ),( P . ( n + 2 ) ),G;

then ( PFS . n1div2 ) = ( ( ( the_Weight_of G ) . e ) - ( EL . e ) ) by A4,A8,A10,A22,A23,CKB34:def 1;
then ( ( ( the_Weight_of G ) . e ) - ( EL . e ) ) in ( rng PFS ) by A10,FUNCT_1:def 3;
then A26: ( P .tolerance EL ) <= ( ( ( the_Weight_of G ) . e ) - ( EL . e ) ) by A4,A20,CKB35:def 1;
thus ( 0 ) <= ( EL2 . e );
( ( EL . e ) + ( P .tolerance EL ) ) = ( EL2 . e ) by A4,A7,A8,A25,CKB36:def 1;
then ( EL2 . e ) <= ( ( ( ( the_Weight_of G ) . e ) - ( EL . e ) ) + ( EL . e ) ) by A26,XREAL_1:7;
hence ( EL2 . e ) <= ( ( the_Weight_of G ) . e );
end;
suppose A27: e DJoins ( P . ( n + 2 ) ),( P . n ),G;

thus ( 0 ) <= ( EL2 . e );
( EL2 . e ) = ( ( EL . e ) - ( P .tolerance EL ) ) by A4,A7,A8,A11,A27,CKB36:def 1;
then ( EL2 . e ) <= ( ( EL . e ) - ( 0 ) ) by XREAL_1:13;
hence ( EL2 . e ) <= ( ( the_Weight_of G ) . e ) by A6,XXREAL_0:2;
end;
end;
hence (( 0 ) <= ( EL2 . e ) & ( EL2 . e ) <= ( ( the_Weight_of G ) . e ));
end;
end;
hence (( 0 ) <= ( EL2 . e ) & ( EL2 . e ) <= ( ( the_Weight_of G ) . e ));
end;
hence (for e being set holds (e in ( the_Edges_of G ) implies (( 0 ) <= ( EL2 . e ) & ( EL2 . e ) <= ( ( the_Weight_of G ) . e ))));
let v being (Vertex of G);
assume that
A28: v <> source
and
A29: v <> sink;
A30: ( Sum ( EL | ( v .edgesIn() ) ) ) = ( Sum ( EL | ( v .edgesOut() ) ) ) by A2,A28,A29,CKB10:def 1;
now
per cases ;
suppose v in ( P .vertices() );

then consider n being  odd (Element of ( NAT )) such that A31: n <= ( len P ) and A32: ( P . n ) = v by GLIB_001:87;
A33:now
assume n = ( len P );
then v = ( P .last() ) by A32,GLIB_001:def 7
.= sink by A3,GLIB_001:def 23;
hence contradiction by A29;
end;
then A34: n < ( len P ) by A31,XXREAL_0:1;
A35:now
assume n = 1;
then v = ( P .first() ) by A32,GLIB_001:def 6
.= source by A3,GLIB_001:def 23;
hence contradiction by A28;
end;
A36:now
A37: ( n + ( 0 ) ) < ( n + 2 ) by XREAL_1:8;
assume A38: v = ( P . ( n + 2 ) );
( n + 2 ) <= ( len P ) by A34,GLIB_001:1;
hence contradiction by A32,A35,A38,A37,GLIB_001:def 28;
end;
1 <= n by ABIAN:12;
then 1 < n by A35,XXREAL_0:1;
then ( 1 + 1 ) <= n by NAT_1:13;
then reconsider n2 = ( n - ( 2 * 1 ) ) as  odd (Element of ( NAT )) by INT_1:5;
set e1 = ( P . ( n2 + 1 ) );
set e2 = ( P . ( n + 1 ) );
set T = ( P .tolerance EL );
A39: 1 <= ( n2 + 1 ) by NAT_1:11;
A40: ( P . ( n2 + 2 ) ) = v by A32;
A41:now
let e being set;
assume that
A42: (e in ( v .edgesIn() ) or e in ( v .edgesOut() ))
and
A43: e <> e1
and
A44: e <> e2;
now
assume e in ( P .edges() );
then consider v1,v2 being (Vertex of G),m being  odd (Element of ( NAT )) such that A45: ( m + 2 ) <= ( len P ) and A46: v1 = ( P . m ) and A47: e = ( P . ( m + 1 ) ) and A48: v2 = ( P . ( m + 2 ) ) and A49: e Joins v1,v2,G by GLIB_001:103;
A50:now
per cases  by A42;
suppose e in ( v .edgesIn() );

then ( ( the_Target_of G ) . e ) = v by GLIB_000:56;
hence (v1 = v or v2 = v) by A49,GLIB_000:def 13;
end;
suppose e in ( v .edgesOut() );

then ( ( the_Source_of G ) . e ) = v by GLIB_000:58;
hence (v1 = v or v2 = v) by A49,GLIB_000:def 13;
end;
end;
A51: ( ( m + 2 ) - 2 ) < ( ( len P ) - ( 0 ) ) by A45,XREAL_1:15;
now
per cases  by A50;
suppose A52: v1 = v;

now
per cases  by XXREAL_0:1;
suppose m < n;

hence contradiction by A31,A32,A33,A46,A52,GLIB_001:def 28;
end;
suppose m = n;

hence contradiction by A44,A47;
end;
suppose n < m;

hence contradiction by A32,A46,A51,A52,GLIB_001:def 28;
end;
end;
hence contradiction;
end;
suppose A53: v2 = v;

now
per cases  by XXREAL_0:1;
suppose ( m + 2 ) < n;

hence contradiction by A31,A32,A33,A48,A53,GLIB_001:def 28;
end;
suppose ( m + 2 ) = n;

hence contradiction by A43,A47;
end;
suppose n < ( m + 2 );

hence contradiction by A32,A35,A45,A48,A53,GLIB_001:def 28;
end;
end;
hence contradiction;
end;
end;
hence contradiction;
end;
hence (not e in ( P .edges() ));
end;
A54:now
A55: ( n + 2 ) <= ( len P ) by A34,GLIB_001:1;
A56: ( n + ( 0 ) ) < ( n + 2 ) by XREAL_1:8;
assume that
A57: e2 DJoins v,( P . ( n + 2 ) ),G
and
A58: e2 DJoins ( P . ( n + 2 ) ),v,G;
( P . n ) = ( ( the_Source_of G ) . e2 ) by A32,A57,GLIB_000:def 14
.= ( P . ( n + 2 ) ) by A58,GLIB_000:def 14;
hence contradiction by A35,A56,A55,GLIB_001:def 28;
end;
n2 < ( n - ( 0 ) ) by XREAL_1:15;
then A59: ( n2 + 1 ) < ( n + 1 ) by XREAL_1:8;
( n + 1 ) <= ( len P ) by A34,NAT_1:13;
then A60: e1 <> e2 by A39,A59,GLIB_001:138;
A61:now
A62: n2 < ( n - ( 0 ) ) by XREAL_1:15;
assume ( P . n2 ) = v;
hence contradiction by A31,A32,A33,A62,GLIB_001:def 28;
end;
A63:now
assume that
A64: e1 DJoins ( P . n2 ),v,G
and
A65: e1 DJoins v,( P . n2 ),G;
( P . n2 ) = ( ( the_Source_of G ) . e1 ) by A64,GLIB_000:def 14
.= v by A65,GLIB_000:def 14;
hence contradiction by A61;
end;
A66: n2 < ( ( len P ) - ( 0 ) ) by A31,XREAL_1:15;
then A67: e1 Joins ( P . n2 ),( P . ( n2 + 2 ) ),G by GLIB_001:def 3;
A68: e2 Joins v,( P . ( n + 2 ) ),G by A32,A34,GLIB_001:def 3;
now
per cases  by A32,A67,A68,GLIB_000:16;
suppose A69: (e1 DJoins ( P . n2 ),v,G & e2 DJoins v,( P . ( n + 2 ) ),G);

set XIN = ( ( EL | ( v .edgesIn() ) ) +* ( e1 .--> ( ( EL . e1 ) + T ) ) );
A70: e1 in ( v .edgesIn() ) by A69,GLIB_000:57;
A71: ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) ) = { e1 } by FUNCOP_1:13;
then A72: ( dom XIN ) = ( ( dom ( EL | ( v .edgesIn() ) ) ) \/ { e1 } ) by FUNCT_4:def 1
.= ( ( v .edgesIn() ) \/ { e1 } ) by PARTFUN1:def 2
.= ( v .edgesIn() ) by A70,ZFMISC_1:40;
then reconsider XIN as (Rbag of ( v .edgesIn() )) by PARTFUN1:def 2,RELAT_1:def 18;
A73:now
let e being set;
assume e in ( dom ( EL2 | ( v .edgesIn() ) ) );
then A74: e in ( v .edgesIn() ) by PARTFUN1:def 2;
then A75: ( ( the_Target_of G ) . e ) = v by GLIB_000:56;
now
per cases ;
suppose A76: e = e1;

then e in ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) ) by A71,TARSKI:def 1;
hence ( XIN . e ) = ( ( e1 .--> ( ( EL . e1 ) + T ) ) . e1 ) by A76,FUNCT_4:13
.= ( ( EL . e1 ) + T ) by FUNCOP_1:72
.= ( EL2 . e ) by A4,A66,A40,A69,A76,CKB36:def 1;
end;
suppose A77: e <> e1;

A78:now
assume e in ( P .edges() );
then consider v1,v2 being (Vertex of G),m being  odd (Element of ( NAT )) such that A79: ( m + 2 ) <= ( len P ) and A80: v1 = ( P . m ) and A81: e = ( P . ( m + 1 ) ) and A82: v2 = ( P . ( m + 2 ) ) and A83: e Joins v1,v2,G by GLIB_001:103;
A84: ( ( m + 2 ) - 2 ) < ( ( len P ) - ( 0 ) ) by A79,XREAL_1:15;
now
per cases  by A75,A83,GLIB_000:def 13;
suppose A85: v = v1;

now
per cases  by XXREAL_0:1;
suppose m < n;

hence contradiction by A31,A32,A33,A80,A85,GLIB_001:def 28;
end;
suppose A86: m = n;

A87: ( ( n + 2 ) - 2 ) < ( ( n + 2 ) - ( 0 ) ) by XREAL_1:15;
A88: ( n + 2 ) <= ( len P ) by A34,GLIB_001:1;
( P . ( n + 2 ) ) = ( P . n ) by A32,A69,A75,A81,A86,GLIB_000:def 14;
hence contradiction by A35,A87,A88,GLIB_001:def 28;
end;
suppose n < m;

hence contradiction by A32,A80,A84,A85,GLIB_001:def 28;
end;
end;
hence contradiction;
end;
suppose A89: v = v2;

now
per cases  by XXREAL_0:1;
suppose ( m + 2 ) < n;

hence contradiction by A31,A32,A33,A82,A89,GLIB_001:def 28;
end;
suppose ( m + 2 ) = n;

hence contradiction by A77,A81;
end;
suppose n < ( m + 2 );

hence contradiction by A32,A35,A79,A82,A89,GLIB_001:def 28;
end;
end;
hence contradiction;
end;
end;
hence contradiction;
end;
(not e in ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) )) by A71,A77,TARSKI:def 1;
then ( XIN . e ) = ( ( EL | ( v .edgesIn() ) ) . e ) by FUNCT_4:11
.= ( EL . e ) by A74,FUNCT_1:49;
hence ( EL2 . e ) = ( XIN . e ) by A4,A74,A78,CKB36:def 1;
end;
end;
hence ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( XIN . e ) by A74,FUNCT_1:49;
end;
( dom ( EL2 | ( v .edgesIn() ) ) ) = ( v .edgesIn() ) by PARTFUN1:def 2;
then A90: ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum XIN ) by A72,A73,FUNCT_1:2;
A91: ( dom ( EL2 | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
set XOUT = ( ( EL | ( v .edgesOut() ) ) +* ( e2 .--> ( ( EL . e2 ) + T ) ) );
A92: e2 in ( v .edgesOut() ) by A69,GLIB_000:59;
A93: ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) ) = { e2 } by FUNCOP_1:13;
then A94: ( dom XOUT ) = ( ( dom ( EL | ( v .edgesOut() ) ) ) \/ { e2 } ) by FUNCT_4:def 1
.= ( ( v .edgesOut() ) \/ { e2 } ) by PARTFUN1:def 2
.= ( v .edgesOut() ) by A92,ZFMISC_1:40;
then reconsider XOUT as (Rbag of ( v .edgesOut() )) by PARTFUN1:def 2,RELAT_1:def 18;
A95:now
let e being set;
assume e in ( dom ( EL2 | ( v .edgesOut() ) ) );
then A96: e in ( v .edgesOut() ) by PARTFUN1:def 2;
then A97: ( ( the_Source_of G ) . e ) = v by GLIB_000:58;
now
per cases ;
suppose A98: e = e2;

then e in ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) ) by A93,TARSKI:def 1;
hence ( XOUT . e ) = ( ( e2 .--> ( ( EL . e2 ) + T ) ) . e2 ) by A98,FUNCT_4:13
.= ( ( EL . e2 ) + T ) by FUNCOP_1:72
.= ( EL2 . e ) by A4,A32,A34,A69,A98,CKB36:def 1;
end;
suppose A99: e <> e2;

A100:now
assume e in ( P .edges() );
then consider v1,v2 being (Vertex of G),m being  odd (Element of ( NAT )) such that A101: ( m + 2 ) <= ( len P ) and A102: v1 = ( P . m ) and A103: e = ( P . ( m + 1 ) ) and A104: v2 = ( P . ( m + 2 ) ) and A105: e Joins v1,v2,G by GLIB_001:103;
A106: ( ( m + 2 ) - 2 ) < ( ( len P ) - ( 0 ) ) by A101,XREAL_1:15;
now
per cases  by A97,A105,GLIB_000:def 13;
suppose A107: v = v1;

now
per cases  by XXREAL_0:1;
suppose m < n;

hence contradiction by A31,A32,A33,A102,A107,GLIB_001:def 28;
end;
suppose m = n;

hence contradiction by A99,A103;
end;
suppose n < m;

hence contradiction by A32,A102,A106,A107,GLIB_001:def 28;
end;
end;
hence contradiction;
end;
suppose A108: v = v2;

now
per cases  by XXREAL_0:1;
suppose ( m + 2 ) < n;

hence contradiction by A31,A32,A33,A104,A108,GLIB_001:def 28;
end;
suppose A109: ( m + 2 ) = n;

A110: n2 < ( n - ( 0 ) ) by XREAL_1:15;
( P . n2 ) = ( P . n ) by A32,A69,A97,A103,A109,GLIB_000:def 14;
hence contradiction by A31,A33,A110,GLIB_001:def 28;
end;
suppose n < ( m + 2 );

hence contradiction by A32,A35,A101,A104,A108,GLIB_001:def 28;
end;
end;
hence contradiction;
end;
end;
hence contradiction;
end;
(not e in ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) )) by A93,A99,TARSKI:def 1;
then ( XOUT . e ) = ( ( EL | ( v .edgesOut() ) ) . e ) by FUNCT_4:11
.= ( EL . e ) by A96,FUNCT_1:49;
hence ( EL2 . e ) = ( XOUT . e ) by A4,A96,A100,CKB36:def 1;
end;
end;
hence ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( XOUT . e ) by A96,FUNCT_1:49;
end;
( Sum XIN ) = ( ( ( Sum ( EL | ( v .edgesIn() ) ) ) + ( T + ( EL . e1 ) ) ) - ( ( EL | ( v .edgesIn() ) ) . e1 ) ) by GLIB_004:9
.= ( ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + T ) + ( EL . e1 ) ) - ( EL . e1 ) ) by A30,A70,FUNCT_1:49
.= ( ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + T ) + ( EL . e2 ) ) - ( EL . e2 ) )
.= ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + ( T + ( EL . e2 ) ) ) - ( ( EL | ( v .edgesOut() ) ) . e2 ) ) by A92,FUNCT_1:49
.= ( Sum XOUT ) by GLIB_004:9;
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL2 | ( v .edgesOut() ) ) ) by A94,A90,A91,A95,FUNCT_1:2;
end;
suppose A111: (e1 DJoins ( P . n2 ),v,G & e2 DJoins ( P . ( n + 2 ) ),v,G);

A112: ( dom ( EL2 | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
A113:now
let e being set;
assume A114: e in ( dom ( EL2 | ( v .edgesOut() ) ) );
then A115: ( ( EL | ( v .edgesOut() ) ) . e ) = ( EL . e ) by A112,FUNCT_1:49;
A116: e in ( v .edgesOut() ) by A114,PARTFUN1:def 2;
then A117: ( ( the_Source_of G ) . e ) = v by GLIB_000:58;
then A118: e <> e2 by A36,A111,GLIB_000:def 14;
e <> e1 by A61,A111,A117,GLIB_000:def 14;
then A119: (not e in ( P .edges() )) by A41,A116,A118;
( ( EL2 | ( v .edgesOut() ) ) . e ) = ( EL2 . e ) by A112,A114,FUNCT_1:49;
hence ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( ( EL | ( v .edgesOut() ) ) . e ) by A4,A116,A115,A119,CKB36:def 1;
end;
( dom ( EL | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
then A120: ( EL2 | ( v .edgesOut() ) ) = ( EL | ( v .edgesOut() ) ) by A112,A113,FUNCT_1:2;
set XIN1 = ( ( EL | ( v .edgesIn() ) ) +* ( e1 .--> ( ( EL . e1 ) + T ) ) );
set XIN2 = ( XIN1 +* ( e2 .--> ( ( EL . e2 ) - T ) ) );
A121: ( dom ( EL2 | ( v .edgesIn() ) ) ) = ( v .edgesIn() ) by PARTFUN1:def 2;
A122: e2 in ( v .edgesIn() ) by A111,GLIB_000:57;
A123: e1 in ( v .edgesIn() ) by A111,GLIB_000:57;
A124: ( EL2 . e1 ) = ( ( EL . e1 ) + T ) by A4,A66,A40,A111,CKB36:def 1;
A125: ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) ) = { e2 } by FUNCOP_1:13;
A126: ( dom XIN1 ) = ( ( dom ( EL | ( v .edgesIn() ) ) ) \/ ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) ) ) by FUNCT_4:def 1
.= ( ( dom ( EL | ( v .edgesIn() ) ) ) \/ { e1 } ) by FUNCOP_1:13
.= ( ( v .edgesIn() ) \/ { e1 } ) by PARTFUN1:def 2
.= ( v .edgesIn() ) by A123,ZFMISC_1:40;
then reconsider XIN1 as (Rbag of ( v .edgesIn() )) by PARTFUN1:def 2,RELAT_1:def 18;
A127: ( dom XIN2 ) = ( ( dom XIN1 ) \/ ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) ) ) by FUNCT_4:def 1
.= ( ( v .edgesIn() ) \/ { e2 } ) by A126,FUNCOP_1:13
.= ( v .edgesIn() ) by A122,ZFMISC_1:40;
then reconsider XIN2 as (Rbag of ( v .edgesIn() )) by PARTFUN1:def 2,RELAT_1:def 18;
A128: ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) ) = { e1 } by FUNCOP_1:13;
A129: ( EL2 . e2 ) = ( ( EL . e2 ) - T ) by A4,A32,A34,A54,A111,CKB36:def 1;
A130:now
let e being set;
assume A131: e in ( dom ( EL2 | ( v .edgesIn() ) ) );
then A132: e in ( v .edgesIn() ) by PARTFUN1:def 2;
A133: ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( EL2 . e ) by A121,A131,FUNCT_1:49;
now
per cases ;
suppose A134: e = e1;

then A135: e in ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) ) by A128,TARSKI:def 1;
(not e in ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) )) by A60,A125,A134,TARSKI:def 1;
then ( XIN2 . e ) = ( XIN1 . e ) by FUNCT_4:11
.= ( ( e1 .--> ( ( EL . e1 ) + T ) ) . e ) by A135,FUNCT_4:13
.= ( EL2 . e ) by A124,A134,FUNCOP_1:72;
hence ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( XIN2 . e ) by A121,A131,FUNCT_1:49;
end;
suppose A136: e = e2;

then e in ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) ) by A125,TARSKI:def 1;
then ( XIN2 . e ) = ( ( e2 .--> ( ( EL . e2 ) - T ) ) . e2 ) by A136,FUNCT_4:13
.= ( EL2 . e ) by A129,A136,FUNCOP_1:72;
hence ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( XIN2 . e ) by A121,A131,FUNCT_1:49;
end;
suppose A137: (e <> e1 & e <> e2);

then A138: (not e in ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) )) by A128,TARSKI:def 1;
A139: (not e in ( P .edges() )) by A41,A132,A137;
(not e in ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) )) by A125,A137,TARSKI:def 1;
then ( XIN2 . e ) = ( XIN1 . e ) by FUNCT_4:11
.= ( ( EL | ( v .edgesIn() ) ) . e ) by A138,FUNCT_4:11
.= ( EL . e ) by A132,FUNCT_1:49;
hence ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( XIN2 . e ) by A4,A132,A133,A139,CKB36:def 1;
end;
end;
hence ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( XIN2 . e );
end;
(not e2 in ( dom ( e1 .--> ( ( EL . e1 ) + T ) ) )) by A60,A128,TARSKI:def 1;
then ( XIN1 . e2 ) = ( ( EL | ( v .edgesIn() ) ) . e2 ) by FUNCT_4:11
.= ( EL . e2 ) by A122,FUNCT_1:49;
then ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( ( ( Sum XIN1 ) + ( ( EL . e2 ) - T ) ) - ( EL . e2 ) ) by A127,A121,A130,FUNCT_1:2,GLIB_004:9
.= ( ( Sum XIN1 ) - ( ( EL . e2 ) - ( ( EL . e2 ) - T ) ) )
.= ( ( ( ( Sum ( EL | ( v .edgesIn() ) ) ) + ( ( EL . e1 ) + T ) ) - ( ( EL | ( v .edgesIn() ) ) . e1 ) ) - T ) by GLIB_004:9
.= ( ( ( ( ( Sum ( EL | ( v .edgesIn() ) ) ) + T ) + ( EL . e1 ) ) - ( EL . e1 ) ) - T ) by A123,FUNCT_1:49
.= ( Sum ( EL | ( v .edgesIn() ) ) );
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL2 | ( v .edgesOut() ) ) ) by A2,A28,A29,A120,CKB10:def 1;
end;
suppose A140: (e1 DJoins v,( P . n2 ),G & e2 DJoins v,( P . ( n + 2 ) ),G);

A141: ( dom ( EL2 | ( v .edgesIn() ) ) ) = ( v .edgesIn() ) by PARTFUN1:def 2;
A142:now
let e being set;
assume A143: e in ( dom ( EL2 | ( v .edgesIn() ) ) );
then A144: ( ( EL | ( v .edgesIn() ) ) . e ) = ( EL . e ) by A141,FUNCT_1:49;
A145: e in ( v .edgesIn() ) by A143,PARTFUN1:def 2;
then A146: ( ( the_Target_of G ) . e ) = v by GLIB_000:56;
then A147: e <> e2 by A36,A140,GLIB_000:def 14;
e <> e1 by A61,A140,A146,GLIB_000:def 14;
then A148: (not e in ( P .edges() )) by A41,A145,A147;
( ( EL2 | ( v .edgesIn() ) ) . e ) = ( EL2 . e ) by A141,A143,FUNCT_1:49;
hence ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( ( EL | ( v .edgesIn() ) ) . e ) by A4,A145,A144,A148,CKB36:def 1;
end;
set XOUT1 = ( ( EL | ( v .edgesOut() ) ) +* ( e1 .--> ( ( EL . e1 ) - T ) ) );
set XOUT2 = ( XOUT1 +* ( e2 .--> ( ( EL . e2 ) + T ) ) );
A149: ( dom ( EL2 | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
A150: e2 in ( v .edgesOut() ) by A140,GLIB_000:59;
A151: ( dom ( EL | ( v .edgesIn() ) ) ) = ( v .edgesIn() ) by PARTFUN1:def 2;
A152: e1 in ( v .edgesOut() ) by A140,GLIB_000:59;
A153: ( EL2 . e2 ) = ( ( EL . e2 ) + T ) by A4,A32,A34,A140,CKB36:def 1;
A154: ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) ) = { e2 } by FUNCOP_1:13;
A155: ( dom XOUT1 ) = ( ( dom ( EL | ( v .edgesOut() ) ) ) \/ ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) ) ) by FUNCT_4:def 1
.= ( ( dom ( EL | ( v .edgesOut() ) ) ) \/ { e1 } ) by FUNCOP_1:13
.= ( ( v .edgesOut() ) \/ { e1 } ) by PARTFUN1:def 2
.= ( v .edgesOut() ) by A152,ZFMISC_1:40;
then reconsider XOUT1 as (Rbag of ( v .edgesOut() )) by PARTFUN1:def 2,RELAT_1:def 18;
A156: ( dom XOUT2 ) = ( ( dom XOUT1 ) \/ ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) ) ) by FUNCT_4:def 1
.= ( ( v .edgesOut() ) \/ { e2 } ) by A155,FUNCOP_1:13
.= ( v .edgesOut() ) by A150,ZFMISC_1:40;
then reconsider XOUT2 as (Rbag of ( v .edgesOut() )) by PARTFUN1:def 2,RELAT_1:def 18;
A157: ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) ) = { e1 } by FUNCOP_1:13;
A158: ( EL2 . e1 ) = ( ( EL . e1 ) - T ) by A4,A66,A40,A63,A140,CKB36:def 1;
A159:now
let e being set;
assume A160: e in ( dom ( EL2 | ( v .edgesOut() ) ) );
then A161: e in ( v .edgesOut() ) by PARTFUN1:def 2;
A162: ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( EL2 . e ) by A149,A160,FUNCT_1:49;
now
per cases ;
suppose A163: e = e1;

then A164: e in ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) ) by A157,TARSKI:def 1;
(not e in ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) )) by A60,A154,A163,TARSKI:def 1;
then ( XOUT2 . e ) = ( XOUT1 . e ) by FUNCT_4:11
.= ( ( e1 .--> ( ( EL . e1 ) - T ) ) . e ) by A164,FUNCT_4:13
.= ( EL2 . e ) by A158,A163,FUNCOP_1:72;
hence ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( XOUT2 . e ) by A149,A160,FUNCT_1:49;
end;
suppose A165: e = e2;

then e in ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) ) by A154,TARSKI:def 1;
then ( XOUT2 . e ) = ( ( e2 .--> ( ( EL . e2 ) + T ) ) . e ) by FUNCT_4:13
.= ( EL2 . e ) by A153,A165,FUNCOP_1:72;
hence ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( XOUT2 . e ) by A149,A160,FUNCT_1:49;
end;
suppose A166: (e <> e1 & e <> e2);

then A167: (not e in ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) )) by A157,TARSKI:def 1;
A168: (not e in ( P .edges() )) by A41,A161,A166;
(not e in ( dom ( e2 .--> ( ( EL . e2 ) + T ) ) )) by A154,A166,TARSKI:def 1;
then ( XOUT2 . e ) = ( XOUT1 . e ) by FUNCT_4:11
.= ( ( EL | ( v .edgesOut() ) ) . e ) by A167,FUNCT_4:11
.= ( EL . e ) by A161,FUNCT_1:49;
hence ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( XOUT2 . e ) by A4,A161,A162,A168,CKB36:def 1;
end;
end;
hence ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( XOUT2 . e );
end;
(not e2 in ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) )) by A60,A157,TARSKI:def 1;
then ( XOUT1 . e2 ) = ( ( EL | ( v .edgesOut() ) ) . e2 ) by FUNCT_4:11
.= ( EL . e2 ) by A150,FUNCT_1:49;
then ( Sum ( EL2 | ( v .edgesOut() ) ) ) = ( ( ( Sum XOUT1 ) + ( ( EL . e2 ) + T ) ) - ( EL . e2 ) ) by A156,A149,A159,FUNCT_1:2,GLIB_004:9
.= ( ( ( ( Sum XOUT1 ) - ( EL . e2 ) ) + ( EL . e2 ) ) + T )
.= ( ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + ( ( EL . e1 ) - T ) ) - ( ( EL | ( v .edgesOut() ) ) . e1 ) ) + T ) by GLIB_004:9
.= ( ( ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + ( EL . e1 ) ) - T ) - ( EL . e1 ) ) + T ) by A152,FUNCT_1:49
.= ( Sum ( EL | ( v .edgesOut() ) ) );
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL2 | ( v .edgesOut() ) ) ) by A30,A141,A151,A142,FUNCT_1:2;
end;
suppose A169: (e1 DJoins v,( P . n2 ),G & e2 DJoins ( P . ( n + 2 ) ),v,G);

set XIN = ( ( EL | ( v .edgesIn() ) ) +* ( e2 .--> ( ( EL . e2 ) - T ) ) );
A170: e2 in ( v .edgesIn() ) by A169,GLIB_000:57;
A171: ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) ) = { e2 } by FUNCOP_1:13;
then A172: ( dom XIN ) = ( ( dom ( EL | ( v .edgesIn() ) ) ) \/ { e2 } ) by FUNCT_4:def 1
.= ( ( v .edgesIn() ) \/ { e2 } ) by PARTFUN1:def 2
.= ( v .edgesIn() ) by A170,ZFMISC_1:40;
then reconsider XIN as (Rbag of ( v .edgesIn() )) by PARTFUN1:def 2,RELAT_1:def 18;
A173: ( EL2 . e2 ) = ( ( EL . e2 ) - T ) by A4,A32,A34,A54,A169,CKB36:def 1;
A174:now
let e being set;
assume e in ( dom ( EL2 | ( v .edgesIn() ) ) );
then A175: e in ( v .edgesIn() ) by PARTFUN1:def 2;
then A176: ( ( the_Target_of G ) . e ) = v by GLIB_000:56;
now
per cases ;
suppose A177: e = e2;

then e in ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) ) by A171,TARSKI:def 1;
hence ( XIN . e ) = ( ( e2 .--> ( ( EL . e2 ) - T ) ) . e2 ) by A177,FUNCT_4:13
.= ( EL2 . e ) by A173,A177,FUNCOP_1:72;
end;
suppose A178: e <> e2;

then (not e in ( dom ( e2 .--> ( ( EL . e2 ) - T ) ) )) by A171,TARSKI:def 1;
then A179: ( XIN . e ) = ( ( EL | ( v .edgesIn() ) ) . e ) by FUNCT_4:11
.= ( EL . e ) by A175,FUNCT_1:49;
e <> e1 by A61,A169,A176,GLIB_000:def 14;
then (not e in ( P .edges() )) by A41,A175,A178;
hence ( EL2 . e ) = ( XIN . e ) by A4,A175,A179,CKB36:def 1;
end;
end;
hence ( XIN . e ) = ( ( EL2 | ( v .edgesIn() ) ) . e ) by A175,FUNCT_1:49;
end;
( dom ( EL2 | ( v .edgesIn() ) ) ) = ( v .edgesIn() ) by PARTFUN1:def 2;
then A180: ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( ( ( Sum ( EL | ( v .edgesIn() ) ) ) + ( ( EL . e2 ) - T ) ) - ( ( EL | ( v .edgesIn() ) ) . e2 ) ) by A172,A174,FUNCT_1:2,GLIB_004:9
.= ( ( ( ( Sum ( EL | ( v .edgesIn() ) ) ) + ( EL . e2 ) ) - T ) - ( EL . e2 ) ) by A170,FUNCT_1:49
.= ( ( Sum ( EL | ( v .edgesIn() ) ) ) - T );
set XOUT = ( ( EL | ( v .edgesOut() ) ) +* ( e1 .--> ( ( EL . e1 ) - T ) ) );
A181: e1 in ( v .edgesOut() ) by A169,GLIB_000:59;
A182: ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) ) = { e1 } by FUNCOP_1:13;
then A183: ( dom XOUT ) = ( ( dom ( EL | ( v .edgesOut() ) ) ) \/ { e1 } ) by FUNCT_4:def 1
.= ( ( v .edgesOut() ) \/ { e1 } ) by PARTFUN1:def 2
.= ( v .edgesOut() ) by A181,ZFMISC_1:40;
then reconsider XOUT as (Rbag of ( v .edgesOut() )) by PARTFUN1:def 2,RELAT_1:def 18;
A184: ( EL2 . e1 ) = ( ( EL . e1 ) - T ) by A4,A66,A40,A63,A169,CKB36:def 1;
A185:now
let e being set;
assume e in ( dom ( EL2 | ( v .edgesOut() ) ) );
then A186: e in ( v .edgesOut() ) by PARTFUN1:def 2;
then A187: ( ( the_Source_of G ) . e ) = v by GLIB_000:58;
now
per cases ;
suppose A188: e = e1;

then e in ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) ) by A182,TARSKI:def 1;
hence ( XOUT . e ) = ( ( e1 .--> ( ( EL . e1 ) - T ) ) . e1 ) by A188,FUNCT_4:13
.= ( EL2 . e ) by A184,A188,FUNCOP_1:72;
end;
suppose A189: e <> e1;

then (not e in ( dom ( e1 .--> ( ( EL . e1 ) - T ) ) )) by A182,TARSKI:def 1;
then A190: ( XOUT . e ) = ( ( EL | ( v .edgesOut() ) ) . e ) by FUNCT_4:11
.= ( EL . e ) by A186,FUNCT_1:49;
e <> e2 by A36,A169,A187,GLIB_000:def 14;
then (not e in ( P .edges() )) by A41,A186,A189;
hence ( EL2 . e ) = ( XOUT . e ) by A4,A186,A190,CKB36:def 1;
end;
end;
hence ( XOUT . e ) = ( ( EL2 | ( v .edgesOut() ) ) . e ) by A186,FUNCT_1:49;
end;
( dom ( EL2 | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
then ( Sum ( EL2 | ( v .edgesOut() ) ) ) = ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + ( ( EL . e1 ) - T ) ) - ( ( EL | ( v .edgesOut() ) ) . e1 ) ) by A183,A185,FUNCT_1:2,GLIB_004:9
.= ( ( ( ( Sum ( EL | ( v .edgesOut() ) ) ) + ( EL . e1 ) ) - T ) - ( EL . e1 ) ) by A181,FUNCT_1:49
.= ( ( Sum ( EL | ( v .edgesIn() ) ) ) - T ) by A30;
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL2 | ( v .edgesOut() ) ) ) by A180;
end;
end;
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL2 | ( v .edgesOut() ) ) );
end;
suppose A191: (not v in ( P .vertices() ));

A192: ( dom ( EL | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
A193:now
let e being set;
assume A194: e in ( dom ( EL | ( v .edgesOut() ) ) );
then A195: ( ( EL2 | ( v .edgesOut() ) ) . e ) = ( EL2 . e ) by A192,FUNCT_1:49;
A196: e in ( v .edgesOut() ) by A194,PARTFUN1:def 2;
A197:now
consider x being set such that A198: e DJoins v,x,G by A196,GLIB_000:59;
assume A199: e in ( P .edges() );
e Joins v,x,G by A198,GLIB_000:16;
hence contradiction by A191,A199,GLIB_001:105;
end;
( ( EL | ( v .edgesOut() ) ) . e ) = ( EL . e ) by A192,A194,FUNCT_1:49;
hence ( ( EL | ( v .edgesOut() ) ) . e ) = ( ( EL2 | ( v .edgesOut() ) ) . e ) by A4,A196,A195,A197,CKB36:def 1;
end;
A200: ( dom ( EL | ( v .edgesIn() ) ) ) = ( v .edgesIn() ) by PARTFUN1:def 2;
A201:now
let e being set;
assume A202: e in ( dom ( EL | ( v .edgesIn() ) ) );
then A203: ( ( EL2 | ( v .edgesIn() ) ) . e ) = ( EL2 . e ) by A200,FUNCT_1:49;
A204:now
consider x being set such that A205: e DJoins x,v,G by A200,A202,GLIB_000:57;
assume A206: e in ( P .edges() );
e Joins x,v,G by A205,GLIB_000:16;
hence contradiction by A191,A206,GLIB_001:105;
end;
( ( EL | ( v .edgesIn() ) ) . e ) = ( EL . e ) by A200,A202,FUNCT_1:49;
hence ( ( EL | ( v .edgesIn() ) ) . e ) = ( ( EL2 | ( v .edgesIn() ) ) . e ) by A4,A200,A202,A203,A204,CKB36:def 1;
end;
( dom ( EL2 | ( v .edgesOut() ) ) ) = ( v .edgesOut() ) by PARTFUN1:def 2;
then A207: ( EL | ( v .edgesOut() ) ) = ( EL2 | ( v .edgesOut() ) ) by A192,A193,FUNCT_1:2;
( dom ( EL | ( v .edgesIn() ) ) ) = ( dom ( EL2 | ( v .edgesIn() ) ) ) by A200,PARTFUN1:def 2;
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL | ( v .edgesIn() ) ) ) by A201,FUNCT_1:2
.= ( Sum ( EL2 | ( v .edgesOut() ) ) ) by A2,A28,A29,A207,CKB10:def 1;
end;
end;
hence ( Sum ( EL2 | ( v .edgesIn() ) ) ) = ( Sum ( EL2 | ( v .edgesOut() ) ) );
end;
hence thesis by CKB10:def 1;
end;
