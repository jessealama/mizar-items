environ
vocabularies XBOOLE_0,PBOOLE,SUBSET_1,NUMBERS,FINSEQ_1,STRUCT_0,MSUALG_1,RELAT_1,XXREAL_0,ARYTM_3,FUNCT_1,MSUALG_5,EQREL_1,TARSKI,LATTICES,XXREAL_2,REWRITE1,LATTICE3,SETFAM_1,ZFMISC_1,CARD_1,MSUALG_4,CLOSURE2,NAT_1,MARGREL1,PARTFUN1,FUNCT_4,FINSET_1,CARD_3,MSUALG_6,MSUALG_7,MSUALG_8;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,RELSET_1,DOMAIN_1,NUMBERS,STRUCT_0,NAT_1,BINOP_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,FINSEQ_1,CARD_3,REWRITE1,EQREL_1,LATTICES,LATTICE3,PBOOLE,MSSUBFAM,MSUALG_1,MSUALG_4,MSUALG_5,CLOSURE2,MSUALG_6,MSUALG_7,XXREAL_0,CKB15,CKB16,CKB22,CKB23;
definitions TARSKI,XBOOLE_0,EQREL_1,CKB15,CKB16,CKB23;
theorems XBOOLE_0,TARSKI,PBOOLE,NAT_LAT,MSUALG_4,MSUALG_5,MSUALG_7,CLOSURE2,SETFAM_1,LATTICES,LATTICE3,MSSUBFAM,ZFMISC_1,FINSEQ_1,SUBSET_1,REWRITE1,RELAT_1,MSUALG_6,FUNCT_2,NAT_1,EQREL_1,VECTSP_8,CARD_3,XBOOLE_1,PARTFUN1,CKB1,CKB3,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB23;
schemes FINSEQ_1,PARTFUN1,CLASSES1,CKB2;
registrations SUBSET_1,RELSET_1,PARTFUN1,FINSET_1,MEMBERED,EQREL_1,PBOOLE,STRUCT_0,LATTICES,MSUALG_1,MSUALG_3,MSUALG_5,CLOSURE2,MSUALG_6,MSUALG_7,FUNCT_1,CKB4,CKB8;
constructors SETFAM_1,BINOP_1,XXREAL_0,NAT_1,MEMBERED,REALSET1,REWRITE1,MSSUBFAM,LATTICE3,MSUALG_5,CLOSURE2,MSUALG_6,MSUALG_7,RELSET_1,CKB15,CKB16,CKB23;
requirements NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve i for set;
reserve j for set;
reserve S for non  void non  empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
theorem
Th17: (for i being (Element of S) holds (for X being (Subset of ( EqRelLatt (the Sorts of A) )) holds (for B being (Equivalence_Relation of (the Sorts of A)) holds (B = ( "\/" X ) implies ( B . i ) = ( "\/" (( EqRelSet (X,i) ),( EqRelLatt ( (the Sorts of A) . i ) )) )))))
proof
let i being (Element of S);
set M = (the Sorts of A);
set E = ( EqRelLatt M );
set Ei = ( EqRelLatt ( M . i ) );
let X being (Subset of E);
let B being (Equivalence_Relation of M);
reconsider B9 = B as (Element of E) by MSUALG_5:def 5;
reconsider Bi = ( B . i ) as (Equivalence_Relation of ( M . i )) by MSUALG_4:def 2;
reconsider Bi9 = Bi as (Element of Ei) by MSUALG_5:21;
assume A1: B = ( "\/" X );
A2:now
let ri being (Element of Ei);
reconsider ri9 = ri as (Equivalence_Relation of ( M . i )) by MSUALG_5:21;
consider r9 being (Equivalence_Relation of (the Sorts of A)) such that A3: ( r9 . i ) = ri9 and A4: (for j being (SortSymbol of S) holds (j <> i implies ( r9 . j ) = ( nabla ( (the Sorts of A) . j ) ))) by CKB21:1;
reconsider r = r9 as (Element of E) by MSUALG_5:def 5;
assume A5: ( EqRelSet (X,i) ) is_less_than ri;
now
let c being (Element of E);
reconsider c9 = c as (Equivalence_Relation of M) by MSUALG_5:def 5;
reconsider ci9 = ( c9 . i ) as (Equivalence_Relation of ( M . i )) by MSUALG_4:def 2;
reconsider ci = ci9 as (Element of Ei) by MSUALG_5:21;
assume c in X;
then ci in ( EqRelSet (X,i) ) by CKB23:def 1;
then A6: ci [= ri by A5,LATTICE3:def 17;
now
let j;
assume A7: j in (the carrier of S);
then reconsider j9 = j as (Element of S);
reconsider rj9 = ( r9 . j9 ),cj9 = ( c9 . j9 ) as (Equivalence_Relation of ( M . j )) by MSUALG_4:def 2;
per cases ;
suppose j = i;

hence ( c9 . j ) c= ( r9 . j ) by A3,A6,CKB3:1;
end;
suppose j <> i;

then ( r9 . j ) = ( nabla ( (the Sorts of A) . j ) ) by A4,A7;
then ( cj9 /\ rj9 ) = cj9 by XBOOLE_1:28;
hence ( c9 . j ) c= ( r9 . j ) by XBOOLE_1:17;
end;
end;
then c9 c= r9 by PBOOLE:def 2;
hence c [= r by MSUALG_7:6;
end;
then X is_less_than r by LATTICE3:def 17;
then B9 [= r by A1,LATTICE3:def 21;
then B c= r9 by MSUALG_7:6;
then Bi c= ri9 by A3,PBOOLE:def 2;
hence Bi9 [= ri by CKB3:1;
end;
now
let q9 being (Element of Ei);
reconsider q = q9 as (Equivalence_Relation of ( M . i )) by MSUALG_5:21;
assume q9 in ( EqRelSet (X,i) );
then consider Eq being (Equivalence_Relation of M) such that A8: q9 = ( Eq . i ) and A9: Eq in X by CKB23:def 1;
reconsider Eq9 = Eq as (Element of E) by MSUALG_5:def 5;
Eq9 [= B9 by A1,A9,LATTICE3:38;
then Eq c= B by MSUALG_7:6;
then q c= Bi by A8,PBOOLE:def 2;
hence q9 [= Bi9 by CKB3:1;
end;
then ( EqRelSet (X,i) ) is_less_than Bi9 by LATTICE3:def 17;
hence thesis by A2,LATTICE3:def 21;
end;
