environ
vocabularies NUMBERS,METRIC_1,PRE_TOPC,REAL_1,XBOOLE_0,TARSKI,COMPLEX1,ARYTM_3,XXREAL_0,CARD_1,ARYTM_1,NAT_1,SETFAM_1,FINSEQ_1,TOPMETR,RELAT_1,FINSET_1,FUNCT_1,ORDINAL2,RCOMP_1,SUBSET_1,ZFMISC_1,EUCLID,XXREAL_2,STRUCT_0,PCOMPS_1,XREAL_0,ORDINAL1,SEQ_1,SEQ_2,VALUED_0,SEQ_4,WEIERSTR;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,SETFAM_1,ORDINAL1,NUMBERS,XREAL_0,COMPLEX1,REAL_1,NAT_1,TOPMETR,METRIC_1,COMPTS_1,SEQ_1,SEQ_2,VALUED_0,SEQ_4,FINSEQ_1,FINSET_1,STRUCT_0,PRE_TOPC,TOPS_2,RCOMP_1,EUCLID,PCOMPS_1,XXREAL_0,XXREAL_2;
definitions STRUCT_0,TARSKI,XXREAL_2;
theorems TARSKI,FUNCT_1,FUNCT_2,NAT_1,FINSEQ_1,ZFMISC_1,SEQ_2,SEQ_4,ABSVALUE,COMPTS_1,RELAT_1,TOPS_2,RCOMP_1,TOPMETR,PCOMPS_1,METRIC_1,METRIC_6,XBOOLE_0,XBOOLE_1,XREAL_0,SUBSET_1,XREAL_1,COMPLEX1,XXREAL_0,SETFAM_1,XXREAL_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes NAT_1,SUBSET_1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FINSET_1,NUMBERS,XREAL_0,MEMBERED,STRUCT_0,METRIC_1,PCOMPS_1,EUCLID,TOPMETR,FINSEQ_1;
constructors SETFAM_1,REAL_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,SEQ_4,RCOMP_1,TOPS_2,COMPTS_1,EUCLID,TOPMETR,SEQ_1,XXREAL_2,BINOP_2,RVSUM_1,PCOMPS_1;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
theorem
Th13: (for T,S being non empty TopSpace holds (for f being (Function of T,S) holds (for P being (Subset of T) holds (for F being (Subset-Family of S) holds ((ex B being (Subset-Family of T) st ((B c= ( f " F ) & B is (Cover of P)) & B is  finite)) implies (ex G being (Subset-Family of S) st ((G c= F & G is (Cover of ( f .: P ))) & G is  finite)))))))
proof
let T being non empty TopSpace,S being non empty TopSpace;
let f being (Function of T,S);
let P being (Subset of T);
let F being (Subset-Family of S);
given B being (Subset-Family of T) such that
A1: B c= ( f " F )
and
A2: B is (Cover of P)
and
A3: B is  finite;

A4: P c= ( union B ) by A2,SETFAM_1:def 11;
now
per cases ;
case A5: P <> ( {} );
thus (ex G being (Subset-Family of S) st ((G c= F & G is (Cover of ( f .: P ))) & G is  finite))
proof
consider s being FinSequence such that A6: ( rng s ) = B by A3,FINSEQ_1:52;
B <> ( {} ) by A4,A5,ZFMISC_1:2;
then consider D being non empty set such that A7: D = B;
defpred P0[ (Element of D),(Subset of ( [#] S )) ]
 means
(for x being (Element of D) holds ($1 = x implies (for y being (Subset of ( [#] S )) holds ($2 = y implies (y in F & x = ( f " y ))))));
A8: (for x being (Element of D) holds (ex y being (Subset of ( [#] S )) st P0[ x,y ]))
proof
let x being (Element of D);
A9: x in B by A7;
then reconsider x as (Subset of T);
consider y being (Subset of S) such that A10: (y in F & x = ( f " y )) by A1,A9,FUNCT_2:def 9;
reconsider y as (Subset of ( [#] S ));
take y;
thus thesis by A10;
end;
consider F0 being (Function of D,( bool ( [#] S ) )) such that A11: (for x being (Element of D) holds P0[ x,(( F0 . x ) qua (Subset of ( [#] S ))) ]) from FUNCT_2:sch 3(A8);
A12: (for x being (Element of D) holds (( F0 . x ) in F & x = ( f " ( F0 . x ) ))) by A11;
reconsider F0 as (Function of B,( bool ( [#] S ) )) by A7;
A13: ( dom F0 ) = B by FUNCT_2:def 1;
then reconsider q = ( F0 * s ) as FinSequence by A6,FINSEQ_1:16;
set G = ( rng q );
A14: G c= F
proof
let x being set;
assume x in G;
then consider y being set such that A15: (y in ( dom q ) & x = ( q . y )) by FUNCT_1:def 3;
(( s . y ) in B & x = ( F0 . ( s . y ) )) by A13,A15,FUNCT_1:11,FUNCT_1:12;
hence thesis by A7,A12;
end;
then reconsider G as (Subset-Family of S) by XBOOLE_1:1;
reconsider G as (Subset-Family of S);
take G;
(for x being set holds (x in ( f .: P ) implies x in ( union G )))
proof
let x being set;
assume A16: x in ( f .: P );
(ex A being set st (x in A & A in G))
proof
consider y being set such that A17: y in ( dom f ) and A18: y in P and A19: x = ( f . y ) by A16,FUNCT_1:def 6;
consider C being set such that A20: y in C and A21: C in B by A4,A18,TARSKI:def 4;
C = ( f " ( F0 . C ) ) by A7,A12,A21;
then A22: x in ( f .: ( f " ( F0 . C ) ) ) by A17,A19,A20,FUNCT_1:def 6;
set A = ( F0 . C );
take A;
(( f .: ( f " ( F0 . C ) ) ) c= ( F0 . C ) & G = ( rng F0 )) by A6,A13,FUNCT_1:75,RELAT_1:28;
hence thesis by A21,A22,FUNCT_2:4;
end;
hence thesis by TARSKI:def 4;
end;
then ( f .: P ) c= ( union G ) by TARSKI:def 3;
hence thesis by A14,SETFAM_1:def 11;
end;

hence thesis;
end;
case A23: P = ( {} );
(ex G being (Subset-Family of S) st ((G c= F & G is (Cover of ( f .: P ))) & G is  finite))
proof
set G = ( {} );
reconsider G as (Subset-Family of S) by XBOOLE_1:2;
reconsider G as (Subset-Family of S);
take G;
( f .: P ) = ( {} )
proof
assume ( f .: P ) <> ( {} );
then consider x being set such that A24: x in ( f .: P ) by XBOOLE_0:def 1;
(ex z being set st ((z in ( dom f ) & z in P) & x = ( f . z ))) by A24,FUNCT_1:def 6;
hence contradiction by A23;
end;
hence thesis by SETFAM_1:def 11,XBOOLE_1:2,ZFMISC_1:2;
end;
hence thesis;
end;
end;
hence thesis;
end;
