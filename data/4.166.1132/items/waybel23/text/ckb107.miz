environ
vocabularies XBOOLE_0,ORDERS_2,SUBSET_1,WAYBEL_8,WAYBEL_3,STRUCT_0,TARSKI,WAYBEL_0,XXREAL_0,RCOMP_1,RELAT_2,YELLOW_1,CARD_FIL,YELLOW_0,ORDINAL2,LATTICE3,EQREL_1,FINSET_1,CAT_1,REWRITE1,LATTICES,PRE_TOPC,CARD_1,SETFAM_1,RLVECT_3,ORDINAL1,XXREAL_2,ZFMISC_1,FUNCT_1,WELLORD2,RELAT_1,SEQM_3,YELLOW_2,WAYBEL_1,WELLORD1,FUNCT_2,WAYBEL23;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,DOMAIN_1,STRUCT_0,FINSET_1,ORDINAL1,CARD_1,PRE_TOPC,ORDERS_2,CANTOR_1,LATTICE3,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_0,WAYBEL_1,WAYBEL_3,WAYBEL_8,CKB2,CKB17,CKB18,CKB19,CKB20,CKB62,CKB63,CKB64,CKB65,CKB66,CKB88,CKB89,CKB93;
definitions TARSKI,LATTICE3,YELLOW_0,XBOOLE_0,STRUCT_0,CKB17,CKB18,CKB19,CKB20,CKB62,CKB63,CKB64,CKB65,CKB66,CKB88,CKB89,CKB93;
theorems TARSKI,SETFAM_1,ZFMISC_1,FUNCT_1,FUNCT_2,CANTOR_1,LATTICE3,YELLOW_0,YELLOW_1,YELLOW_2,YELLOW_3,YELLOW_5,YELLOW12,WAYBEL_0,WAYBEL_1,WAYBEL_3,WAYBEL_7,WAYBEL_8,WAYBEL10,WAYBEL13,WAYBEL20,WAYBEL21,XBOOLE_0,XBOOLE_1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB38,CKB39,CKB40,CKB41,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB56,CKB57,CKB58,CKB62,CKB63,CKB64,CKB65,CKB66,CKB73,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103;
schemes ORDINAL1,FUNCT_2,MONOID_1;
registrations RELSET_1,FINSET_1,CARD_1,STRUCT_0,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_3,WAYBEL_7,WAYBEL_8,WAYBEL14,SUBSET_1,CKB21,CKB22,CKB23,CKB36,CKB37,CKB42,CKB43,CKB52,CKB53,CKB54,CKB55,CKB59,CKB60,CKB61,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB74,CKB75,CKB76,CKB77,CKB90,CKB91,CKB92,CKB104,CKB105,CKB106;
constructors SETFAM_1,DOMAIN_1,LATTICE3,CANTOR_1,ORDERS_3,WAYBEL_1,WAYBEL_3,WAYBEL_8,RELSET_1,WAYBEL20,TOPS_2,CKB2,CKB17,CKB18,CKB19,CKB20,CKB62,CKB63,CKB64,CKB65,CKB66,CKB88,CKB89,CKB93;
requirements SUBSET,BOOLE;
begin
theorem
Th61: (for L being  lower-bounded  continuous sup-Semilattice holds (for B being  with_bottom (CLbasis of L) holds ( idsMap ( subrelstr B ) ) is  sups-preserving))
proof
let L being  lower-bounded  continuous sup-Semilattice;
let B being  with_bottom (CLbasis of L);
set f = ( idsMap ( subrelstr B ) );
A1: ( subrelstr B ) is  join-inheriting by CKB18:def 1;
A2: ( Bottom L ) in B by CKB65:def 1;
then A3: ( Bottom L ) in (the carrier of ( subrelstr B )) by YELLOW_0:def 15;
now
let X being (Subset of ( InclPoset ( Ids ( subrelstr B ) ) ));
reconsider supX = ( sup X ) as (Ideal of ( subrelstr B )) by YELLOW_2:41;
reconsider unionX = ( union X ) as (Subset of L) by WAYBEL13:3;
reconsider dfuX = ( downarrow ( finsups ( union X ) ) ) as (Subset of L) by WAYBEL13:3;
reconsider fuX = ( finsups ( union X ) ) as (Subset of L) by WAYBEL13:3;
A4: (ex J being (Subset of L) st (supX = J & ( f . supX ) = ( downarrow J ))) by CKB89:def 1;
now
assume  ex_sup_of X,( InclPoset ( Ids ( subrelstr B ) ) );
thus  ex_sup_of ( f .: X ),( InclPoset ( Ids L ) ) by YELLOW_0:17;
A5: ( downarrow ( finsups ( union ( f .: X ) ) ) ) c= ( downarrow dfuX )
proof
defpred P[ set,set ]
 means
(ex I being (Element of ( InclPoset ( Ids ( subrelstr B ) ) )) st (ex z1,z2 being (Element of L) st ((((z1 = $1 & z2 = $2) & I in X) & $2 in I) & z1 <= z2)));
let x being set;
assume A6: x in ( downarrow ( finsups ( union ( f .: X ) ) ) );
then reconsider x1 = x as (Element of L);
consider y1 being (Element of L) such that A7: y1 >= x1 and A8: y1 in ( finsups ( union ( f .: X ) ) ) by A6,WAYBEL_0:def 15;
y1 in { ( "\/" (V,L) ) where V is  finite (Subset of ( union ( f .: X ) )):  ex_sup_of V,L } by A8,WAYBEL_0:def 27;
then consider Y being  finite (Subset of ( union ( f .: X ) )) such that A9: y1 = ( "\/" (Y,L) ) and  ex_sup_of Y,L;
A10: (for z being set holds (z in Y implies (ex v being (Element of B) st P[ z,v ])))
proof
let z being set;
assume z in Y;
then consider J being set such that A11: z in J and A12: J in ( f .: X ) by TARSKI:def 4;
consider I being set such that I in ( dom f ) and A13: I in X and A14: J = ( f . I ) by A12,FUNCT_1:def 6;
reconsider I as (Element of ( InclPoset ( Ids ( subrelstr B ) ) )) by A13;
( f . I ) is (Element of ( InclPoset ( Ids L ) ));
then reconsider J as (Element of ( InclPoset ( Ids L ) )) by A14;
J is (Ideal of L) by YELLOW_2:41;
then reconsider z1 = z as (Element of L) by A11;
reconsider I1 = I as (Ideal of ( subrelstr B )) by YELLOW_2:41;
consider I2 being (Subset of L) such that A15: I1 = I2 and A16: ( f . I1 ) = ( downarrow I2 ) by CKB89:def 1;
consider z2 being (Element of L) such that A17: z2 >= z1 and A18: z2 in I2 by A11,A14,A16,WAYBEL_0:def 15;
reconsider v = z2 as (Element of B) by A15,A18,YELLOW_0:def 15;
take v;
take I;
take z1;
take z2;
thus thesis by A13,A15,A17,A18;
end;
consider g being (Function of Y,B) such that A19: (for z being set holds (z in Y implies P[ z,( g . z ) ])) from MONOID_1:sch 1(A10);
reconsider Z = ( rng g ) as  finite (Subset of ( subrelstr B )) by YELLOW_0:def 15;
A20: ( dom g ) = Y by FUNCT_2:def 1;
A21: ( "\/" (( rng g ),L) ) is_>=_than Y
proof
let a being (Element of L);
A22: ( "\/" (( rng g ),L) ) is_>=_than ( rng g ) by YELLOW_0:32;
assume A23: a in Y;
then consider I being (Element of ( InclPoset ( Ids ( subrelstr B ) ) )),a1,a2 being (Element of L) such that A24: a1 = a and A25: a2 = ( g . a ) and I in X and ( g . a ) in I and A26: a1 <= a2 by A19;
( g . a ) in ( rng g ) by A20,A23,FUNCT_1:def 3;
then a2 <= ( "\/" (( rng g ),L) ) by A25,A22,LATTICE3:def 9;
hence a <= ( "\/" (( rng g ),L) ) by A24,A26,YELLOW_0:def 2;
end;
A27:  ex_sup_of Z,( subrelstr B )
proof
per cases ;
suppose Z is non  empty;

hence thesis by YELLOW_0:54;
end;
suppose Z is  empty;

hence thesis by YELLOW_0:42;
end;
end;
( rng g ) c= ( union X )
proof
let a being set;
assume a in ( rng g );
then consider b being set such that A28: b in ( dom g ) and A29: a = ( g . b ) by FUNCT_1:def 3;
(ex I being (Element of ( InclPoset ( Ids ( subrelstr B ) ) )) st (ex b1,b2 being (Element of L) st ((((b1 = b & b2 = ( g . b )) & I in X) & ( g . b ) in I) & b1 <= b2))) by A19,A28;
hence thesis by A29,TARSKI:def 4;
end;
then ( "\/" (Z,( subrelstr B )) ) in { ( "\/" (V,( subrelstr B )) ) where V is  finite (Subset of ( union X )):  ex_sup_of V,( subrelstr B ) } by A27;
then A30: ( "\/" (( rng g ),( subrelstr B )) ) in ( finsups ( union X ) ) by WAYBEL_0:def 27;
( "\/" (Z,L) ) in (the carrier of ( subrelstr B ))
proof
per cases ;
suppose Z is non  empty;

hence thesis by A1,WAYBEL21:15;
end;
suppose Z is  empty;

hence thesis by A2,YELLOW_0:def 15;
end;
end;
then reconsider xl = ( "\/" (Z,L) ) as (Element of ( subrelstr B ));
reconsider srg = ( "\/" (( rng g ),( subrelstr B )) ) as (Element of L) by YELLOW_0:58;
A31:  ex_sup_of Z,L by YELLOW_0:17;
A32:now
let b being (Element of ( subrelstr B ));
reconsider b1 = b as (Element of L) by YELLOW_0:58;
assume A33: b is_>=_than Z;
b1 is_>=_than Z
proof
let c1 being (Element of L);
assume A34: c1 in Z;
then reconsider c = c1 as (Element of ( subrelstr B ));
c <= b by A33,A34,LATTICE3:def 9;
hence c1 <= b1 by YELLOW_0:59;
end;
then ( "\/" (Z,L) ) <= b1 by A31,YELLOW_0:30;
hence xl <= b by YELLOW_0:60;
end;
A35: ( "\/" (Z,L) ) is_>=_than Z by A31,YELLOW_0:30;
xl is_>=_than Z
proof
let b being (Element of ( subrelstr B ));
reconsider b1 = b as (Element of L) by YELLOW_0:58;
assume b in Z;
then b1 <= ( "\/" (Z,L) ) by A35,LATTICE3:def 9;
hence b <= xl by YELLOW_0:60;
end;
then ( "\/" (Z,( subrelstr B )) ) = ( "\/" (Z,L) ) by A32,YELLOW_0:30;
then ( "\/" (Y,L) ) <= srg by A21,YELLOW_0:32;
then A36: x1 <= srg by A7,A9,YELLOW_0:def 2;
( finsups ( union X ) ) c= ( downarrow ( finsups ( union X ) ) ) by WAYBEL_0:16;
hence thesis by A36,A30,WAYBEL_0:def 15;
end;
now
let x being set;
assume A37: x in X;
then reconsider x1 = x as (Ideal of ( subrelstr B )) by YELLOW_2:41;
consider x2 being (Subset of L) such that A38: x1 = x2 and A39: ( f . x1 ) = ( downarrow x2 ) by CKB89:def 1;
x in (the carrier of ( InclPoset ( Ids ( subrelstr B ) ) )) by A37;
then x1 in ( dom f ) by FUNCT_2:def 1;
then A40: ( f . x1 ) in ( f .: X ) by A37,FUNCT_1:def 6;
thus x c= ( union ( f .: X ) )
proof
let y being set;
assume A41: y in x;
x c= ( downarrow x2 ) by A38,WAYBEL_0:16;
hence thesis by A39,A40,A41,TARSKI:def 4;
end;

end;
then ( union X ) c= ( union ( f .: X ) ) by ZFMISC_1:76;
then A42: ( finsups unionX ) c= ( finsups ( union ( f .: X ) ) ) by CKB4:1;
( finsups ( union X ) ) c= ( finsups unionX ) by A3,A1,CKB7:1;
then ( finsups ( union X ) ) c= ( finsups ( union ( f .: X ) ) ) by A42,XBOOLE_1:1;
then A43: ( downarrow fuX ) c= ( downarrow ( finsups ( union ( f .: X ) ) ) ) by YELLOW_3:6;
( downarrow ( finsups ( union X ) ) ) c= ( downarrow fuX ) by CKB13:1;
then dfuX c= ( downarrow ( finsups ( union ( f .: X ) ) ) ) by A43,XBOOLE_1:1;
then ( downarrow dfuX ) c= ( downarrow ( downarrow ( finsups ( union ( f .: X ) ) ) ) ) by YELLOW_3:6;
then A44: ( downarrow dfuX ) c= ( downarrow ( finsups ( union ( f .: X ) ) ) ) by CKB9:1;
thus ( sup ( f .: X ) ) = ( downarrow ( finsups ( union ( f .: X ) ) ) ) by CKB8:1
.= ( downarrow dfuX ) by A5,A44,XBOOLE_0:def 10
.= ( f . ( sup X ) ) by A4,CKB8:1;
end;
hence f preserves_sup_of X by WAYBEL_0:def 31;
end;
hence thesis by WAYBEL_0:def 33;
end;
