environ
vocabularies NUMBERS,SUBSET_1,CARD_3,FUNCT_1,RELAT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,PARTFUN1,BORSUK_1,REAL_NS1,PRE_TOPC,AFINSQ_1,XBOOLE_0,FDIFF_1,STRUCT_0,RLVECT_1,NORMSP_1,COMPLEX1,ARYTM_3,REAL_1,ARYTM_1,SQUARE_1,RVSUM_1,LOPBAN_1,XXREAL_0,CARD_1,SUPINF_2,SUPINF_1,SEQ_1,VALUED_1,SEQ_2,ORDINAL2,XREAL_0,ORDINAL1,VALUED_0,TARSKI,XXREAL_2,NAT_1,RCOMP_1,XXREAL_1,PDIFF_1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,PRE_TOPC,STRUCT_0,XREAL_0,COMPLEX1,ORDINAL1,NUMBERS,REAL_1,RLVECT_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,RVSUM_1,FINSEQ_1,FINSEQ_2,FINSEQ_7,SQUARE_1,RCOMP_1,VFUNCT_1,NORMSP_0,NORMSP_1,EUCLID,LOPBAN_1,NFCONT_1,FDIFF_1,NDIFF_1,REAL_NS1,XXREAL_0,EXTREAL1,SUPINF_1,CKB1,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
definitions TARSKI,LOPBAN_1,EUCLID,CKB1,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,XREAL_0,RCOMP_1,RLVECT_1,SEQ_4,COMPLEX1,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,FINSEQ_7,RVSUM_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FRECHET,REAL_NS1,EXTREAL2,NUMBERS,VALUED_1,GRCAT_1,NORMSP_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes SEQ_1,FUNCT_2,GRAPH_5;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,LOPBAN_1,FDIFF_1,NDIFF_1,FUNCT_1,FUNCT_2,NAT_1,REAL_NS1,NUMBERS,XBOOLE_0,XXREAL_0,VALUED_0,VALUED_1,EUCLID,CARD_1,CKB6;
constructors REAL_1,SQUARE_1,RSSPACE3,SEQ_2,PARTFUN1,RFUNCT_2,FINSEQ_7,VFUNCT_1,COMPLEX1,NFCONT_1,RCOMP_1,FDIFF_1,NDIFF_1,REAL_NS1,EXTREAL1,SEQ_1,RVSUM_1,NORMSP_1,RELSET_1,BINOP_2,CKB1,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reconsider I = ( (( proj (1,1) ) qua Function) " ) as (Function of ( REAL ),( REAL 1 )) by CKB5:1;
reserve f for (PartFunc of ( REAL-NS 1 ),( REAL-NS 1 ));
reserve g for (PartFunc of ( REAL ),( REAL ));
reserve x for (Point of ( REAL-NS 1 ));
reserve y for (Element of ( REAL ));
theorem
Th8: (((f = ( <>* g ) & x = <* y *>) & g is_differentiable_in y) implies (f is_differentiable_in x & ( ( diff (f,x) ) . <* 1 *> ) = <* ( diff (g,y) ) *>))
proof
set J = ( proj (1,1) );
assume that
A1: f = ( <>* g )
and
A2: x = <* y *>
and
A3: g is_differentiable_in y;
reconsider x0 = y as Real;
consider N0 being (Neighbourhood of x0) such that A4: N0 c= ( dom g ) and A5: (ex L0 being LINEAR st (ex R0 being REST st (( diff (g,x0) ) = ( L0 . 1 ) & (for y0 being Real holds (y0 in N0 implies ( ( g . y0 ) - ( g . x0 ) ) = ( ( L0 . ( y0 - x0 ) ) + ( R0 . ( y0 - x0 ) ) )))))) by A3,FDIFF_1:def 5;
consider e0 being  real number such that A6: ( 0 ) < e0 and A7: N0 = ]. ( x0 - e0 ),( x0 + e0 ) .[ by RCOMP_1:def 6;
reconsider e = e0 as Real by XREAL_0:def 1;
set N = { z where z is (Point of ( REAL-NS 1 )): ||. ( z - x ) .|| < e };
A8: ( rng ( g * J ) ) c= ( REAL );
consider L0 being LINEAR,R0 being REST such that A9: ( diff (g,x0) ) = ( L0 . 1 ) and A10: (for y0 being Real holds (y0 in N0 implies ( ( g . y0 ) - ( g . x0 ) ) = ( ( L0 . ( y0 - x0 ) ) + ( R0 . ( y0 - x0 ) ) ))) by A5;
reconsider R = ( ( I * R0 ) * J ) as (REST of ( REAL-NS 1 ),( REAL-NS 1 )) by CKB18:1;
reconsider L = ( ( I * L0 ) * J ) as  bounded (LinearOperator of ( REAL-NS 1 ),( REAL-NS 1 )) by CKB18:1;
A11: ( dom g ) c= ( REAL );
( dom f ) c= (the carrier of ( REAL-NS 1 ));
then A12: ( dom f ) c= ( rng I ) by CKB5:1,REAL_NS1:def 4;
A13: ( J * I ) = ( id ( REAL ) ) by CKB2:1,FUNCT_1:39;
now
let z being set;
hereby
assume z in N;
then consider w being (Point of ( REAL-NS 1 )) such that A14: z = w and A15: ||. ( w - x ) .|| < e;
reconsider y = ( J . w ) as (Element of ( REAL ));
( J . x ) = x0 by A2,CKB2:1;
then ( J . ( w - x ) ) = ( y - x0 ) by CKB16:1;
then ( abs ( y - x0 ) ) < e by A15,CKB16:1;
then A16: y in N0 by A7,RCOMP_1:1;
w in (the carrier of ( REAL-NS 1 ));
then w in ( dom J ) by CKB2:1,REAL_NS1:def 4;
then w = ( I . y ) by FUNCT_1:34;
hence z in ( I .: N0 ) by A14,A16,FUNCT_2:35;
end;
assume z in ( I .: N0 );
then consider yy being set such that A17: yy in ( REAL ) and A18: yy in N0 and A19: z = ( I . yy ) by FUNCT_2:64;
reconsider y = yy as (Element of ( REAL )) by A17;
reconsider w = ( I . y ) as (Point of ( REAL-NS 1 )) by REAL_NS1:def 4;
( I . x0 ) = x by A2,CKB2:1;
then A20: ( w - x ) = ( I . ( y - x0 ) ) by CKB15:1;
( abs ( y - x0 ) ) < e by A7,A18,RCOMP_1:1;
then ||. ( w - x ) .|| < e by A20,CKB15:1;
hence z in N by A19;
end;
then A21: N = ( I .: N0 ) by TARSKI:1;
( J * f ) = ( J * ( I * ( g * J ) ) ) by A1,RELAT_1:36;
then ( J * f ) = ( ( id ( REAL ) ) * ( g * J ) ) by A13,RELAT_1:36;
then ( ( J * f ) * I ) = ( ( g * J ) * I ) by A8,RELAT_1:53;
then ( ( J * f ) * I ) = ( g * ( id ( REAL ) ) ) by A13,RELAT_1:36;
then g = ( ( J * f ) * I ) by A11,RELAT_1:51;
then A22: ( dom g ) = ( I " ( dom ( J * f ) ) ) by RELAT_1:147;
( rng f ) c= (the carrier of ( REAL-NS 1 ));
then ( rng f ) c= ( dom J ) by CKB2:1,REAL_NS1:def 4;
then ( I .: ( dom g ) ) = ( I .: ( I " ( dom f ) ) ) by A22,RELAT_1:27;
then ( I .: ( dom g ) ) = ( dom f ) by A12,FUNCT_1:77;
then A23: N c= ( dom f ) by A4,A21,RELAT_1:123;
N c= (the carrier of ( REAL-NS 1 ))
proof
let y being set;
assume y in N;
then (ex z being (Point of ( REAL-NS 1 )) st (y = z & ||. ( z - x ) .|| < e));
hence thesis;
end;
then A24: N is (Neighbourhood of x) by A6,NFCONT_1:def 1;
( J * I ) = ( id ( REAL ) ) by CKB2:1,FUNCT_1:39;
then ( ( J * I ) .: N0 ) = N0 by FRECHET:13;
then A25: ( J .: N ) = N0 by A21,RELAT_1:126;
A26: (for y being (Point of ( REAL-NS 1 )) holds (y in N implies ( ( f /. y ) - ( f /. x ) ) = ( ( L . ( y - x ) ) + ( R /. ( y - x ) ) )))
proof
x in (the carrier of ( REAL-NS 1 ));
then x in ( dom J ) by CKB2:1,REAL_NS1:def 4;
then A27: ( I . ( g . ( J . x ) ) ) = ( I . ( ( g * J ) . x ) ) by FUNCT_1:13;
A28: x in N by A24,NFCONT_1:4;
then x in ( dom f ) by A23;
then x in ( dom ( I * ( g * J ) ) ) by A1,RELAT_1:36;
then ( I . ( g . ( J . x ) ) ) = ( ( I * ( g * J ) ) . x ) by A27,FUNCT_1:12;
then ( I . ( g . ( J . x ) ) ) = ( f . x ) by A1,RELAT_1:36;
then A29: ( I . ( g . ( J . x ) ) ) = ( f /. x ) by A23,A28,PARTFUN1:def 6;
let y being (Point of ( REAL-NS 1 ));
assume A30: y in N;
reconsider y0 = ( J . y ) as (Element of ( REAL ));
reconsider p1 = ( I . ( g . y0 ) ),p2 = ( I . ( g . x0 ) ),q1 = ( I . ( L0 . ( y0 - x0 ) ) ),q2 = ( I . ( R0 . ( y0 - x0 ) ) ) as (VECTOR of ( REAL-NS 1 )) by REAL_NS1:def 4;
A31: ( J . x ) = x0 by A2,CKB2:1;
y in (the carrier of ( REAL-NS 1 ));
then y in ( REAL 1 ) by REAL_NS1:def 4;
then ( I . ( ( g . y0 ) - ( g . x0 ) ) ) = ( I . ( ( L0 . ( y0 - x0 ) ) + ( R0 . ( y0 - x0 ) ) ) ) by A10,A25,A30,FUNCT_2:35;
then ( p1 - p2 ) = ( I . ( ( L0 . ( y0 - x0 ) ) + ( R0 . ( y0 - x0 ) ) ) ) by CKB15:1;
then ( p1 - p2 ) = ( q1 + q2 ) by CKB15:1;
then ( ( I . ( g . y0 ) ) - ( I . ( g . x0 ) ) ) = ( q1 + q2 ) by REAL_NS1:5;
then ( ( I . ( g . ( J . y ) ) ) - ( I . ( g . ( J . x ) ) ) ) = ( ( I . ( L0 . ( y0 - x0 ) ) ) + ( I . ( R0 . ( y0 - x0 ) ) ) ) by A31,REAL_NS1:2;
then ( ( I . ( g . ( J . y ) ) ) - ( I . ( g . ( J . x ) ) ) ) = ( ( I . ( L0 . ( J . ( y - x ) ) ) ) + ( I . ( R0 . ( y0 - x0 ) ) ) ) by A31,CKB16:1;
then A32: ( ( I . ( g . ( J . y ) ) ) - ( I . ( g . ( J . x ) ) ) ) = ( ( I . ( L0 . ( J . ( y - x ) ) ) ) + ( I . ( R0 . ( J . ( y - x ) ) ) ) ) by A31,CKB16:1;
( dom L ) = (the carrier of ( REAL-NS 1 )) by FUNCT_2:def 1;
then ( y - x ) in ( dom ( ( I * L0 ) * J ) );
then A33: ( y - x ) in ( dom ( I * ( L0 * J ) ) ) by RELAT_1:36;
( y - x ) in (the carrier of ( REAL-NS 1 ));
then A34: ( y - x ) in ( dom J ) by CKB2:1,REAL_NS1:def 4;
then A35: ( I . ( R0 . ( J . ( y - x ) ) ) ) = ( I . ( ( R0 * J ) . ( y - x ) ) ) by FUNCT_1:13;
R is  total by NDIFF_1:def 5;
then A36: ( dom ( ( I * R0 ) * J ) ) = (the carrier of ( REAL-NS 1 )) by PARTFUN1:def 2;
then ( y - x ) in ( dom ( ( I * R0 ) * J ) );
then ( y - x ) in ( dom ( I * ( R0 * J ) ) ) by RELAT_1:36;
then ( I . ( R0 . ( J . ( y - x ) ) ) ) = ( ( I * ( R0 * J ) ) . ( y - x ) ) by A35,FUNCT_1:12;
then ( I . ( R0 . ( J . ( y - x ) ) ) ) = ( ( ( I * R0 ) * J ) . ( y - x ) ) by RELAT_1:36;
then A37: ( I . ( R0 . ( J . ( y - x ) ) ) ) = ( R /. ( y - x ) ) by A36,PARTFUN1:def 6;
y in (the carrier of ( REAL-NS 1 ));
then y in ( dom J ) by CKB2:1,REAL_NS1:def 4;
then A38: ( I . ( g . ( J . y ) ) ) = ( I . ( ( g * J ) . y ) ) by FUNCT_1:13;
( I . ( L0 . ( J . ( y - x ) ) ) ) = ( I . ( ( L0 * J ) . ( y - x ) ) ) by A34,FUNCT_1:13;
then ( I . ( L0 . ( J . ( y - x ) ) ) ) = ( ( I * ( L0 * J ) ) . ( y - x ) ) by A33,FUNCT_1:12;
then A39: ( I . ( L0 . ( J . ( y - x ) ) ) ) = ( L . ( y - x ) ) by RELAT_1:36;
y in ( dom f ) by A23,A30;
then y in ( dom ( I * ( g * J ) ) ) by A1,RELAT_1:36;
then ( I . ( g . ( J . y ) ) ) = ( ( I * ( g * J ) ) . y ) by A38,FUNCT_1:12;
then ( I . ( g . ( J . y ) ) ) = ( f . y ) by A1,RELAT_1:36;
then ( I . ( g . ( J . y ) ) ) = ( f /. y ) by A23,A30,PARTFUN1:def 6;
then ( ( I . ( g . ( J . y ) ) ) - ( I . ( g . ( J . x ) ) ) ) = ( ( f /. y ) - ( f /. x ) ) by A29,REAL_NS1:5;
hence thesis by A32,A37,A39,REAL_NS1:2;
end;
L0 is  total by FDIFF_1:def 3;
then A40: ( dom L0 ) = ( REAL ) by PARTFUN1:def 2;
A41: L is (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS 1 ),( REAL-NS 1 )) )) by LOPBAN_1:def 9;
then f is_differentiable_in x by A24,A23,A26,NDIFF_1:def 6;
then ( diff (f,x) ) = ( ( I * L0 ) * J ) by A24,A23,A41,A26,NDIFF_1:def 7;
then ( ( diff (f,x) ) . <* 1 *> ) = ( ( ( I * L0 ) * J ) . ( I . 1 ) ) by CKB2:1;
then ( ( diff (f,x) ) . <* 1 *> ) = ( ( I * L0 ) . ( J . ( I . 1 ) ) ) by CKB2:1,FUNCT_1:13;
then ( ( diff (f,x) ) . <* 1 *> ) = ( I . ( L0 . ( J . ( I . 1 ) ) ) ) by A40,FUNCT_1:13;
then ( ( diff (f,x) ) . <* 1 *> ) = ( I . ( L0 . 1 ) ) by CKB2:1,FUNCT_1:35;
hence thesis by A24,A23,A9,A41,A26,CKB2:1,NDIFF_1:def 6;
end;
