environ
vocabularies NUMBERS,REAL_1,SUBSET_1,FINSEQ_1,INTEGRA1,XREAL_0,ORDINAL1,SEQ_4,XXREAL_0,XXREAL_1,VALUED_0,RELAT_1,ARYTM_3,FUNCT_1,CARD_1,NAT_1,CLASSES1,FINSEQ_5,ARYTM_1,ORDINAL4,XBOOLE_0,JORDAN3,MEMBERED,MEMBER_1,TARSKI,PARTFUN1,XXREAL_2,VALUED_1,MEASURE7,CARD_3,SEQ_1,INTEGRA2,MEASURE5;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XXREAL_0,XREAL_0,XXREAL_2,XXREAL_3,MEMBERED,MEMBER_1,REAL_1,NAT_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,RFUNCT_1,RVSUM_1,INTEGRA1,VALUED_1,SEQ_1,SEQ_2,SEQ_4,FINSEQ_6,RCOMP_1,FINSEQ_5,CLASSES1,RFINSEQ,MEASURE5,MEASURE6,CKB2;
definitions TARSKI,XBOOLE_0,VALUED_1,RELAT_1,MEMBER_1,XXREAL_2,XXREAL_3,CKB2;
theorems SEQ_4,SUBSET_1,PARTFUN1,INTEGRA1,RFUNCT_1,FUNCT_1,FINSEQ_1,RVSUM_1,NEWTON,RCOMP_1,NAT_1,RFINSEQ,CARD_1,FINSEQ_5,FINSEQ_3,RELAT_1,FUNCT_2,XREAL_0,XBOOLE_0,XBOOLE_1,XCMPLX_1,XREAL_1,XXREAL_0,ORDINAL1,MEMBERED,VALUED_1,XXREAL_2,TARSKI,SEQM_3,CLASSES1,FINSEQ_6,MEMBER_1,XXREAL_3,CKB1,CKB2,CKB4;
schemes SUBSET_1,SEQ_1,NAT_1;
registrations RELAT_1,ORDINAL1,FUNCT_2,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FINSEQ_1,RFINSEQ,INTEGRA1,VALUED_0,VALUED_1,XXREAL_2,CARD_1,SEQ_2,RELSET_1,XXREAL_3,MEMBER_1,MEASURE5,CKB3;
constructors PARTFUN1,REAL_1,NAT_1,SEQM_3,RFUNCT_1,RFINSEQ,BINARITH,FINSEQ_5,FINSEQ_6,INTEGRA1,SEQ_1,XXREAL_2,NAT_D,RVSUM_1,SEQ_4,CLASSES1,RELSET_1,SEQ_2,MEMBER_1,MEASURE6,CKB2;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve p for (FinSequence of ( REAL ));
theorem
(for p holds (ex q being  non-decreasing (FinSequence of ( REAL )) st p,q are_fiberwise_equipotent ))
proof
let p;
consider q being  non-increasing (FinSequence of ( REAL )) such that A1: p,q are_fiberwise_equipotent  by RFINSEQ:22;
(for n being (Element of ( NAT )) holds ((n in ( dom ( Rev q ) ) & ( n + 1 ) in ( dom ( Rev q ) )) implies ( ( Rev q ) . n ) <= ( ( Rev q ) . ( n + 1 ) )))
proof
let n;
assume that
A2: n in ( dom ( Rev q ) )
and
A3: ( n + 1 ) in ( dom ( Rev q ) );
( ( Rev q ) . n ) <= ( ( Rev q ) . ( n + 1 ) )
proof
n in ( Seg ( len ( Rev q ) ) ) by A2,FINSEQ_1:def 3;
then 1 <= n by FINSEQ_1:1;
then ( n - 1 ) >= ( 0 ) by XREAL_1:48;
then ( ( len q ) + ( 0 ) ) <= ( ( len q ) + ( n - 1 ) ) by XREAL_1:7;
then A4: ( ( len q ) - ( n - 1 ) ) <= ( len q ) by XREAL_1:20;
n in ( Seg ( len ( Rev q ) ) ) by A2,FINSEQ_1:def 3;
then n in ( Seg ( len q ) ) by FINSEQ_5:def 3;
then n <= ( len q ) by FINSEQ_1:1;
then consider m being Nat such that A5: ( len q ) = ( n + m ) by NAT_1:10;
reconsider m as (Element of ( NAT )) by ORDINAL1:def 12;
(( m + 1 ) = ( ( ( len q ) - n ) + 1 ) & 1 <= ( ( ( len q ) - n ) + 1 )) by A5,NAT_1:11;
then ( ( ( len q ) - n ) + 1 ) in ( Seg ( len q ) ) by A4,FINSEQ_1:1;
then A6: ( ( ( len q ) - n ) + 1 ) in ( dom q ) by FINSEQ_1:def 3;
set x = ( ( Rev q ) . n );
set y = ( ( Rev q ) . ( n + 1 ) );
A7: ( ( ( len q ) - ( n + 1 ) ) + 1 ) = ( ( len q ) - n );
( len q ) <= ( ( len q ) + n ) by NAT_1:11;
then A8: ( ( ( len q ) - ( n + 1 ) ) + 1 ) <= ( len q ) by A7,XREAL_1:20;
( n + 1 ) in ( Seg ( len ( Rev q ) ) ) by A3,FINSEQ_1:def 3;
then ( n + 1 ) in ( Seg ( len q ) ) by FINSEQ_5:def 3;
then ( n + 1 ) <= ( len q ) by FINSEQ_1:1;
then 1 <= ( ( ( len q ) - ( n + 1 ) ) + 1 ) by A7,XREAL_1:19;
then ( ( ( len q ) - ( n + 1 ) ) + 1 ) in ( Seg ( len q ) ) by A5,A8,FINSEQ_1:1;
then A9: ( ( ( len q ) - ( n + 1 ) ) + 1 ) in ( dom q ) by FINSEQ_1:def 3;
(x = ( q . ( ( ( len q ) - n ) + 1 ) ) & y = ( q . ( ( ( len q ) - ( n + 1 ) ) + 1 ) )) by A2,A3,FINSEQ_5:def 3;
hence thesis by A6,A9,RFINSEQ:def 3;
end;
hence thesis;
end;
then reconsider r = ( Rev q ) as  non-decreasing (FinSequence of ( REAL )) by CKB2:def 1;
take r;
p,( Rev q ) are_fiberwise_equipotent 
proof
defpred P[ (Element of ( NAT )) ]
 means
(for p being (FinSequence of ( REAL )) holds (for q being  non-increasing (FinSequence of ( REAL )) holds ((( len p ) = $1 & p,q are_fiberwise_equipotent ) implies p,( Rev q ) are_fiberwise_equipotent )));
A10: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume A11: P[ k ];
P[ ( k + 1 ) ]
proof
let p being (FinSequence of ( REAL ));
let q being  non-increasing (FinSequence of ( REAL ));
consider q1 being  non-increasing (FinSequence of ( REAL )) such that A12: p,q1 are_fiberwise_equipotent  by RFINSEQ:22;
reconsider q1k = ( q1 | k ) as  non-increasing (FinSequence of ( REAL )) by RFINSEQ:20;
A13: ( ( Rev q1k ) ^ <* ( q1 . ( k + 1 ) ) *> ),( <* ( q1 . ( k + 1 ) ) *> ^ ( Rev q1k ) ) are_fiberwise_equipotent  by RFINSEQ:2;
assume A14: ( len p ) = ( k + 1 );
then A15: ( len q1 ) = ( k + 1 ) by A12,RFINSEQ:3;
( len p ) = ( len q1 ) by A12,RFINSEQ:3;
then ( len ( q1 | k ) ) = k by A14,FINSEQ_1:59,NAT_1:11;
then ( q1 | k ),( Rev q1k ) are_fiberwise_equipotent  by A11;
then ( ( q1 | k ) ^ <* ( q1 . ( k + 1 ) ) *> ),( ( Rev q1k ) ^ <* ( q1 . ( k + 1 ) ) *> ) are_fiberwise_equipotent  by RFINSEQ:1;
then q1,( ( Rev q1k ) ^ <* ( q1 . ( k + 1 ) ) *> ) are_fiberwise_equipotent  by A15,RFINSEQ:7;
then A16: q1,( <* ( q1 . ( k + 1 ) ) *> ^ ( Rev q1k ) ) are_fiberwise_equipotent  by A13,CLASSES1:76;
A17: ( <* ( q1 . ( k + 1 ) ) *> ^ ( Rev q1k ) ) = ( Rev ( ( q1 | k ) ^ <* ( q1 . ( k + 1 ) ) *> ) ) by FINSEQ_5:63
.= ( Rev q1 ) by A15,RFINSEQ:7;
assume p,q are_fiberwise_equipotent ;
then q = q1 by A12,CLASSES1:76,RFINSEQ:23;
hence thesis by A12,A16,A17,CLASSES1:76;
end;
hence thesis;
end;
A18: ( len p ) = ( len p );
A19: P[ ( 0 ) ]
proof
let p being (FinSequence of ( REAL ));
let q being  non-increasing (FinSequence of ( REAL ));
assume A20: ( len p ) = ( 0 );
assume p,q are_fiberwise_equipotent ;
then ( len q ) = ( 0 ) by A20,RFINSEQ:3;
then ( len ( Rev q ) ) = ( 0 ) by FINSEQ_5:def 3;
then ( Rev q ) = ( {} );
then A21: ( rng ( Rev q ) ) = ( {} );
p = ( {} ) by A20;
then A22: ( rng p ) = ( {} );
(for x being set holds ( card ( Coim (p,x) ) ) = ( card ( Coim (( Rev q ),x) ) ))
proof
let x being set;
( card ( p " { x } ) ) = ( 0 ) by A22,CARD_1:27,FUNCT_1:72;
hence thesis by A21,CARD_1:27,FUNCT_1:72;
end;
hence thesis by CLASSES1:def 9;
end;
(for k holds P[ k ]) from NAT_1:sch 1(A19,A10);
hence thesis by A1,A18;
end;
hence thesis;
end;
