environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,MEASURE1,SUBSET_1,SEQFUNC,MESFUNC5,PARTFUN1,XXREAL_0,ORDINAL1,NAT_1,RELAT_1,ARYTM_3,ARYTM_1,FUNCT_1,XREAL_0,ORDINAL2,CARD_1,COMPLEX1,SEQ_2,SUPINF_2,XXREAL_2,RINFSUP1,TARSKI,MEASURE6,REAL_1,PBOOLE,MESFUNC1,VALUED_1,FUNCT_3,MESFUNC2,SUPINF_1,VALUED_0,RFUNCT_3,SERIES_1,CARD_3,MESFUNC8,MSSUBFAM,SETFAM_1,INTEGRA5,FUNCOP_1,ZFMISC_1,FUNCT_2,MEASURE2,MESFUNC9;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,COMPLEX1,REAL_1,XXREAL_0,VALUED_0,RELAT_1,FUNCT_1,RELSET_1,BINOP_1,FUNCT_2,PARTFUN1,NAT_1,PROB_1,SETFAM_1,SUPINF_1,SUPINF_2,XXREAL_2,MEASURE1,MEASURE2,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,SEQFUNC,MESFUNC5,MESFUNC8,RINFSUP2,FUNCOP_1,CKB16,CKB17,CKB18,CKB19,CKB26,CKB27,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64;
definitions MESFUNC1,MEASURE6,MESFUNC5,BINOP_1,RINFSUP2,MESFUNC8,TARSKI,VALUED_0,XXREAL_3,CKB17,CKB18,CKB19,CKB26,CKB27,CKB60,CKB61,CKB62,CKB63;
theorems TARSKI,PARTFUN1,FUNCT_1,SUPINF_2,EXTREAL1,EXTREAL2,MESFUNC1,XREAL_0,XBOOLE_0,XBOOLE_1,XCMPLX_1,MESFUNC2,XREAL_1,XXREAL_0,MESFUNC5,PROB_1,NAT_1,RELAT_1,FUNCT_3,ZFMISC_1,FUNCT_2,MEASURE1,MESFUNC6,SEQFUNC,ORDINAL1,SETFAM_1,MESFUNC8,RINFSUP2,MESFUNC7,SEQ_4,RELSET_1,MEASURE2,XXREAL_2,VALUED_0,FUNCOP_1,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB60,CKB61,CKB62,CKB63,CKB65,CKB66,CKB67,CKB68;
schemes FUNCT_2,NAT_1,BINOP_1,RECDEF_1,SEQFUNC,FUNCT_1;
registrations SUBSET_1,NAT_1,XREAL_0,MEMBERED,ORDINAL1,PARTFUN1,MEASURE1,FUNCT_2,RELAT_1,XBOOLE_0,NUMBERS,XXREAL_0,XCMPLX_0,MESFUNC8,FUNCT_1,VALUED_0,XXREAL_3,RELSET_1,CKB58;
constructors REAL_1,EXTREAL1,EXTREAL2,BINOP_1,NEWTON,MESFUNC1,MEASURE2,MEASURE6,MESFUNC2,MESFUNC5,MESFUNC8,RINFSUP2,SUPINF_1,SEQFUNC,RELSET_1,BINOP_2,CKB16,CKB17,CKB18,CKB19,CKB26,CKB27,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve X for non  empty set;
reserve S for (SigmaField of X);
reserve M for (sigma_Measure of S);
reserve E for (Element of S);
reserve F for (Functional_Sequence of X,( ExtREAL ));
reserve I for ExtREAL_sequence;
reserve f for (PartFunc of X,( ExtREAL ));
reserve n for Nat;
reserve m for Nat;
reserve x for (Element of X);
theorem
((((((E = ( dom ( F . ( 0 ) ) ) & ( F . ( 0 ) ) is  nonnegative) & F is  with_the_same_dom) & (for n being Nat holds ( F . n ) is_measurable_on E)) & (for n,m being Nat holds (n <= m implies (for x being (Element of X) holds (x in E implies ( ( F . n ) . x ) <= ( ( F . m ) . x )))))) & (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent))) implies (ex I being ExtREAL_sequence st (((for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) )) & I is  convergent) & ( Integral (M,( lim F )) ) = ( lim I ))))
proof
assume that
A1: E = ( dom ( F . ( 0 ) ) )
and
A2: ( F . ( 0 ) ) is  nonnegative
and
A3: F is  with_the_same_dom
and
A4: (for n being Nat holds ( F . n ) is_measurable_on E)
and
A5: (for n,m being Nat holds (n <= m implies (for x being (Element of X) holds (x in E implies ( ( F . n ) . x ) <= ( ( F . m ) . x )))))
and
A6: (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent));
A7: ( lim F ) is_measurable_on E by A1,A3,A4,A6,MESFUNC8:25;
A8: (for n being Nat holds ( F . n ) is  nonnegative)
proof
let n being Nat;
(for x being set holds (x in ( dom ( F . n ) ) implies ( 0 ) <= ( ( F . n ) . x )))
proof
let x being set;
assume x in ( dom ( F . n ) );
then x in E by A1,A3,MESFUNC8:def 2;
then ( ( F . ( 0 ) ) . x ) <= ( ( F . n ) . x ) by A5;
hence thesis by A2,SUPINF_2:51;
end;
hence thesis by SUPINF_2:52;
end;
per cases ;
suppose (ex n being Nat st ( M . ( E /\ ( eq_dom (( F . n ),( +infty )) ) ) ) <> ( 0 ));

then consider N being Nat such that A9: ( M . ( E /\ ( eq_dom (( F . N ),( +infty )) ) ) ) <> ( 0 );
A10: E = ( dom ( F . N ) ) by A1,A3,MESFUNC8:def 2;
then reconsider EE = ( E /\ ( eq_dom (( F . N ),( +infty )) ) ) as (Element of S) by A4,MESFUNC1:33;
A11: EE c= E by XBOOLE_1:17;
then A12: ( F . N ) is_measurable_on EE by A4,MESFUNC1:30;
EE c= ( dom ( F . N ) ) by A1,A3,A11,MESFUNC8:def 2;
then A13: EE = ( dom ( ( F . N ) | EE ) ) by RELAT_1:62;
then EE = ( ( dom ( F . N ) ) /\ EE ) by RELAT_1:61;
then A14: ( ( F . N ) | EE ) is_measurable_on EE by A12,MESFUNC5:42;
now
let x being set;
assume A15: x in EE;
then x in ( eq_dom (( F . N ),( +infty )) ) by XBOOLE_0:def 4;
then ( ( F . N ) . x ) = ( +infty ) by MESFUNC1:def 15;
then ( ( ( F . N ) | EE ) . x ) = ( +infty ) by A13,A15,FUNCT_1:47;
hence x in ( eq_dom (( ( F . N ) | EE ),( +infty )) ) by A13,A15,MESFUNC1:def 15;
end;
then A16: EE c= ( eq_dom (( ( F . N ) | EE ),( +infty )) ) by TARSKI:def 3;
(for x being set holds (x in ( eq_dom (( ( F . N ) | EE ),( +infty )) ) implies x in EE)) by A13,MESFUNC1:def 15;
then ( eq_dom (( ( F . N ) | EE ),( +infty )) ) c= EE by TARSKI:def 3;
then EE = ( eq_dom (( ( F . N ) | EE ),( +infty )) ) by A16,XBOOLE_0:def 10;
then A17: ( M . ( EE /\ ( eq_dom (( ( F . N ) | EE ),( +infty )) ) ) ) <> ( 0 ) by A9;
( F . N ) is_measurable_on E by A4;
then A18: ( Integral (M,( ( F . N ) | EE )) ) <= ( Integral (M,( ( F . N ) | E )) ) by A8,A10,A11,MESFUNC5:93;
reconsider N1 = N as (Element of ( NAT )) by ORDINAL1:def 12;
deffunc I1((Element of ( NAT ))) = ( Integral (M,( F . $1 )) );
consider I being (Function of ( NAT ),( ExtREAL )) such that A19: (for n being (Element of ( NAT )) holds ( I . n ) = I1(n)) from FUNCT_2:sch 4;
reconsider I as ExtREAL_sequence;
A20: ( 0 ) < ( M . ( E /\ ( eq_dom (( F . N ),( +infty )) ) ) ) by A9,SUPINF_2:51;
A21: (for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) ))
proof
let n being Nat;
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
( I . n ) = ( Integral (M,( F . n1 )) ) by A19;
hence thesis;
end;
take I;
A22: ( dom ( lim F ) ) = ( dom ( F . ( 0 ) ) ) by MESFUNC8:def 9;
(for x being set holds (x in ( dom ( lim F ) ) implies ( ( lim F ) . x ) >= ( 0 )))
proof
let x being set;
assume A23: x in ( dom ( lim F ) );
then reconsider x1 = x as (Element of X);
(for n being Nat holds ( ( F # x1 ) . n ) >= ( 0 ))
proof
let n being Nat;
A24: ( ( F . ( 0 ) ) . x1 ) >= ( 0 ) by A2,SUPINF_2:51;
( ( F . n ) . x1 ) >= ( ( F . ( 0 ) ) . x1 ) by A1,A5,A22,A23;
hence thesis by A24,MESFUNC5:def 13;
end;
then ( lim ( F # x1 ) ) >= ( 0 ) by A1,A6,A22,A23,CKB10:1;
hence thesis by A23,MESFUNC8:def 9;
end;
then A25: ( lim F ) is  nonnegative by SUPINF_2:52;
A26: E = ( dom ( lim F ) ) by A1,MESFUNC8:def 9;
A27: EE c= ( E /\ ( eq_dom (( lim F ),( +infty )) ) )
proof
let x being set;
assume A28: x in EE;
then reconsider x1 = x as (Element of X);
x in ( eq_dom (( F . N ),( +infty )) ) by A28,XBOOLE_0:def 4;
then ( ( F . N ) . x1 ) = ( +infty ) by MESFUNC1:def 15;
then A29: ( ( F # x1 ) . N ) = ( +infty ) by MESFUNC5:def 13;
A30: x in E by A28,XBOOLE_0:def 4;
(for n,m being (Element of ( NAT )) holds (m <= n implies ( ( F # x1 ) . m ) <= ( ( F # x1 ) . n )))
proof
let n being (Element of ( NAT ));
let m being (Element of ( NAT ));
assume m <= n;
then ( ( F . m ) . x1 ) <= ( ( F . n ) . x1 ) by A5,A30;
then ( ( F # x1 ) . m ) <= ( ( F . n ) . x1 ) by MESFUNC5:def 13;
hence thesis by MESFUNC5:def 13;
end;
then A31: ( F # x1 ) is  non-decreasing by RINFSUP2:7;
then A32: ( ( F # x1 ) ^\ N1 ) is  non-decreasing by RINFSUP2:26;
( ( ( F # x1 ) ^\ N1 ) . ( 0 ) ) = ( ( F # x1 ) . ( ( 0 ) + N ) ) by NAT_1:def 3;
then (for n being (Element of ( NAT )) holds ( +infty ) <= ( ( ( F # x1 ) ^\ N1 ) . n )) by A29,A32,RINFSUP2:7;
then ( ( F # x1 ) ^\ N1 ) is  convergent_to_+infty by RINFSUP2:32;
then A33: ( lim ( ( F # x1 ) ^\ N1 ) ) = ( +infty ) by CKB7:1;
A34: ( sup ( F # x1 ) ) = ( sup ( ( F # x1 ) ^\ N1 ) ) by A31,RINFSUP2:26;
( lim ( F # x1 ) ) = ( sup ( F # x1 ) ) by A31,RINFSUP2:37;
then ( lim ( F # x1 ) ) = ( +infty ) by A32,A34,A33,RINFSUP2:37;
then ( ( lim F ) . x1 ) = ( +infty ) by A1,A22,A30,MESFUNC8:def 9;
then x in ( eq_dom (( lim F ),( +infty )) ) by A26,A30,MESFUNC1:def 15;
hence thesis by A30,XBOOLE_0:def 4;
end;
A35: (for n,m being (Element of ( NAT )) holds (m <= n implies ( I . m ) <= ( I . n )))
proof
let n being (Element of ( NAT ));
let m being (Element of ( NAT ));
A36: ( F . m ) is_measurable_on E by A4;
assume m <= n;
then A37: (for x being (Element of X) holds (x in E implies ( ( F . m ) . x ) <= ( ( F . n ) . x ))) by A5;
A38: E = ( dom ( F . m ) ) by A1,A3,MESFUNC8:def 2;
A39: E = ( dom ( F . n ) ) by A1,A3,MESFUNC8:def 2;
( F . n ) is_measurable_on E by A4;
then ( Integral (M,( ( F . m ) | E )) ) <= ( Integral (M,( ( F . n ) | E )) ) by A8,A38,A39,A36,A37,CKB15:1;
then ( Integral (M,( F . m )) ) <= ( Integral (M,( ( F . n ) | E )) ) by A38,RELAT_1:68;
then ( Integral (M,( F . m )) ) <= ( Integral (M,( F . n )) ) by A39,RELAT_1:68;
then ( I . m ) <= ( Integral (M,( F . n )) ) by A19;
hence thesis by A19;
end;
then A40: I is  non-decreasing by RINFSUP2:7;
then A41: ( I ^\ N1 ) is  non-decreasing by RINFSUP2:26;
( F . N ) is  nonnegative by A8;
then ( Integral (M,( ( F . N ) | EE )) ) = ( +infty ) by A13,A14,A17,CKB13:1,MESFUNC5:15;
then ( +infty ) <= ( Integral (M,( F . N )) ) by A10,A18,RELAT_1:69;
then A42: ( Integral (M,( F . N )) ) = ( +infty ) by XXREAL_0:4;
(for k being (Element of ( NAT )) holds ( +infty ) <= ( ( I ^\ N1 ) . k ))
proof
let k being (Element of ( NAT ));
( I . N1 ) <= ( I . ( N1 + k ) ) by A35,NAT_1:12;
then ( I . N1 ) <= ( ( I ^\ N1 ) . k ) by NAT_1:def 3;
hence thesis by A42,A21;
end;
then ( I ^\ N1 ) is  convergent_to_+infty by RINFSUP2:32;
then A43: ( lim ( I ^\ N1 ) ) = ( +infty ) by CKB7:1;
( E /\ ( eq_dom (( lim F ),( +infty )) ) ) is (Element of S) by A7,A26,MESFUNC1:33;
then A44: ( M . ( E /\ ( eq_dom (( lim F ),( +infty )) ) ) ) <> ( 0 ) by A27,A20,MEASURE1:31;
A45: ( sup I ) = ( sup ( I ^\ N1 ) ) by A40,RINFSUP2:26;
( lim I ) = ( sup I ) by A40,RINFSUP2:37;
then ( lim I ) = ( +infty ) by A41,A45,A43,RINFSUP2:37;
hence thesis by A7,A21,A40,A26,A25,A44,CKB13:1,RINFSUP2:37;
end;
suppose A46: (for n being Nat holds ( M . ( E /\ ( eq_dom (( F . n ),( +infty )) ) ) ) = ( 0 ));

defpred L[ (Element of ( NAT )),set ]
 means
$2 = ( E /\ ( eq_dom (( F . $1 ),( +infty )) ) );
A47: (for n being (Element of ( NAT )) holds (ex A being (Element of S) st L[ n,A ]))
proof
let n being (Element of ( NAT ));
E c= ( dom ( F . n ) ) by A1,A3,MESFUNC8:def 2;
then reconsider A = ( E /\ ( eq_dom (( F . n ),( +infty )) ) ) as (Element of S) by A4,MESFUNC1:33;
take A;
thus thesis;
end;
consider L being (Function of ( NAT ),S) such that A48: (for n being (Element of ( NAT )) holds L[ n,( L . n ) ]) from FUNCT_2:sch 3(A47);
A49: ( rng L ) c= S by RELAT_1:def 19;
( rng L ) is (N_Sub_set_fam of X) by MEASURE1:23;
then reconsider E0 = ( rng L ) as (N_Measure_fam of S) by A49,MEASURE2:def 1;
set E1 = ( E \ ( union E0 ) );
deffunc H(Nat) = ( ( F . $1 ) | E1 );
consider H being (Functional_Sequence of X,( ExtREAL )) such that A50: (for n being Nat holds ( H . n ) = H(n)) from SEQFUNC:sch 1;
deffunc I2((Element of ( NAT ))) = ( Integral (M,( ( F . $1 ) | E1 )) );
consider I being (Function of ( NAT ),( ExtREAL )) such that A51: (for n being (Element of ( NAT )) holds ( I . n ) = I2(n)) from FUNCT_2:sch 4;
reconsider I as ExtREAL_sequence;
A52: E1 c= E by XBOOLE_1:36;
then A53: (for n being Nat holds ( F . n ) is_measurable_on E1) by A4,MESFUNC1:30;
A54: (for n being Nat holds ((( dom ( H . n ) ) = E1 & ( H . n ) is  without-infty) & ( H . n ) is  without+infty))
proof
let n being Nat;
A55: ( dom ( H . n ) ) = ( dom ( ( F . n ) | E1 ) ) by A50;
E1 c= ( dom ( F . n ) ) by A1,A3,A52,MESFUNC8:def 2;
hence ( dom ( H . n ) ) = E1 by A55,RELAT_1:62;
( ( F . n ) | E1 ) is  nonnegative by A8,MESFUNC5:15;
then ( H . n ) is  nonnegative by A50;
hence ( H . n ) is  without-infty by MESFUNC5:12;
(for x being set holds (x in ( dom ( H . n ) ) implies ( ( H . n ) . x ) < ( +infty )))
proof
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
let x being set;
A56: ( L . n ) = ( E /\ ( eq_dom (( F . n1 ),( +infty )) ) ) by A48;
( dom L ) = ( NAT ) by FUNCT_2:def 1;
then A57: ( L . n ) in ( rng L ) by A56,FUNCT_1:3;
assume x in ( dom ( H . n ) );
then A58: x in ( dom ( ( F . n ) | E1 ) ) by A50;
then A59: x in E1 by RELAT_1:57;
A60: x in ( dom ( F . n ) ) by A58,RELAT_1:57;
assume A61: ( ( H . n ) . x ) >= ( +infty );
( ( H . n ) . x ) = ( ( ( F . n ) | E1 ) . x ) by A50;
then ( ( H . n ) . x ) = ( ( F . n ) . x ) by A59,FUNCT_1:49;
then ( ( F . n ) . x ) = ( +infty ) by A61,XXREAL_0:4;
then x in ( eq_dom (( F . n ),( +infty )) ) by A60,MESFUNC1:def 15;
then x in ( L . n ) by A52,A59,A56,XBOOLE_0:def 4;
then x in ( union E0 ) by A57,TARSKI:def 4;
hence contradiction by A59,XBOOLE_0:def 5;
end;
hence thesis by MESFUNC5:11;
end;
(for n,m being Nat holds ( dom ( H . n ) ) = ( dom ( H . m ) ))
proof
let n being Nat;
let m being Nat;
( dom ( H . n ) ) = E1 by A54;
hence thesis by A54;
end;
then reconsider H as  with_the_same_dom (Functional_Sequence of X,( ExtREAL )) by MESFUNC8:def 2;
defpred G[ (Element of ( NAT )),set,set ]
 means
$3 = ( ( H . ( $1 + 1 ) ) - ( H . $1 ) );
A62: (for n being (Element of ( NAT )) holds (for x being set holds (ex y being set st G[ n,x,y ])));
consider G being Function such that A63: ((( dom G ) = ( NAT ) & ( G . ( 0 ) ) = ( H . ( 0 ) )) & (for n being (Element of ( NAT )) holds G[ n,( G . n ),( G . ( n + 1 ) ) ])) from RECDEF_1:sch 1(A62);
A64: (for n being Nat holds ( G . ( n + 1 ) ) = ( ( H . ( n + 1 ) ) - ( H . n ) ))
proof
let n being Nat;
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
( G . ( n + 1 ) ) = ( ( H . ( n1 + 1 ) ) - ( H . n ) ) by A63;
hence thesis;
end;
now
defpred IND[ Nat ]
 means
( G . $1 ) is (PartFunc of X,( ExtREAL ));
let f being set;
assume f in ( rng G );
then consider m being set such that A65: m in ( dom G ) and A66: f = ( G . m ) by FUNCT_1:def 3;
reconsider m as Nat by A63,A65;
A67: (for n being Nat holds (IND[ n ] implies IND[ ( n + 1 ) ]))
proof
let n being Nat;
assume IND[ n ];
( G . ( n + 1 ) ) = ( ( H . ( n + 1 ) ) - ( H . n ) ) by A64;
hence thesis;
end;
A68: IND[ ( 0 ) ] by A63;
(for n being Nat holds IND[ n ]) from NAT_1:sch 2(A68,A67);
then ( G . m ) is (PartFunc of X,( ExtREAL ));
hence f in ( PFuncs (X,( ExtREAL )) ) by A66,PARTFUN1:45;
end;
then ( rng G ) c= ( PFuncs (X,( ExtREAL )) ) by TARSKI:def 3;
then reconsider G as (Functional_Sequence of X,( ExtREAL )) by A63,FUNCT_2:def 1,RELSET_1:4;
A69: (for n being Nat holds ( dom ( G . n ) ) = E1)
proof
let n being Nat;
now
assume n <> ( 0 );
then consider k being Nat such that A70: n = ( k + 1 ) by NAT_1:6;
A71: ( H . ( k + 1 ) ) is  without-infty by A54;
A72: ( H . k ) is  without+infty by A54;
( G . ( k + 1 ) ) = ( ( H . ( k + 1 ) ) - ( H . k ) ) by A64;
then ( dom ( G . ( k + 1 ) ) ) = ( ( dom ( H . ( k + 1 ) ) ) /\ ( dom ( H . k ) ) ) by A71,A72,MESFUNC5:17;
then ( dom ( G . ( k + 1 ) ) ) = ( E1 /\ ( dom ( H . k ) ) ) by A54;
then ( dom ( G . ( k + 1 ) ) ) = ( E1 /\ E1 ) by A54;
hence thesis by A70;
end;
hence thesis by A54,A63;
end;
A73: (for n,m being Nat holds ( dom ( G . n ) ) = ( dom ( G . m ) ))
proof
let n being Nat;
let m being Nat;
( dom ( G . n ) ) = E1 by A69;
hence thesis by A69;
end;
A74: (for n being Nat holds ( G . n ) is  nonnegative)
proof
let n being Nat;
A75: (n <> ( 0 ) implies ( G . n ) is  nonnegative)
proof
assume n <> ( 0 );
then consider k being Nat such that A76: n = ( k + 1 ) by NAT_1:6;
A77: ( G . ( k + 1 ) ) = ( ( H . ( k + 1 ) ) - ( H . k ) ) by A64;
(for x being set holds (x in ( dom ( G . ( k + 1 ) ) ) implies ( 0 ) <= ( ( G . ( k + 1 ) ) . x )))
proof
let x being set;
assume A78: x in ( dom ( G . ( k + 1 ) ) );
A79: ( dom ( G . ( k + 1 ) ) ) = E1 by A69;
( ( H . k ) . x ) = ( ( ( F . k ) | E1 ) . x ) by A50;
then A80: ( ( H . k ) . x ) = ( ( F . k ) . x ) by A78,A79,FUNCT_1:49;
( ( H . ( k + 1 ) ) . x ) = ( ( ( F . ( k + 1 ) ) | E1 ) . x ) by A50;
then A81: ( ( H . ( k + 1 ) ) . x ) = ( ( F . ( k + 1 ) ) . x ) by A78,A79,FUNCT_1:49;
( ( F . k ) . x ) <= ( ( F . ( k + 1 ) ) . x ) by A5,A52,A78,A79,NAT_1:11;
then ( ( ( H . ( k + 1 ) ) . x ) - ( ( H . k ) . x ) ) >= ( 0 ) by A81,A80,XXREAL_3:40;
hence thesis by A77,A78,MESFUNC1:def 4;
end;
hence thesis by A76,SUPINF_2:52;
end;
(n = ( 0 ) implies ( G . n ) is  nonnegative)
proof
assume A82: n = ( 0 );
( ( F . n ) | E1 ) is  nonnegative by A8,MESFUNC5:15;
hence thesis by A50,A63,A82;
end;
hence thesis by A75;
end;
A83: (for n1 being set holds (n1 in ( NAT ) implies ( H . n1 ) = ( ( Partial_Sums G ) . n1 )))
proof
defpred PH[ Nat ]
 means
( H . $1 ) = ( ( Partial_Sums G ) . $1 );
let n1 being set;
assume n1 in ( NAT );
then reconsider n = n1 as Nat;
A84: (for k being Nat holds (PH[ k ] implies PH[ ( k + 1 ) ]))
proof
let k being Nat;
A85: ( H . k ) is  without+infty by A54;
A86: ( H . k ) is  without-infty by A54;
A87: ( dom ( G . ( k + 1 ) ) ) = E1 by A69;
( G . ( k + 1 ) ) is  without-infty by A74,MESFUNC5:12;
then ( dom ( ( G . ( k + 1 ) ) + ( H . k ) ) ) = ( ( dom ( G . ( k + 1 ) ) ) /\ ( dom ( H . k ) ) ) by A86,MESFUNC5:16;
then ( dom ( ( G . ( k + 1 ) ) + ( H . k ) ) ) = ( E1 /\ E1 ) by A54,A87;
then A88: ( dom ( H . ( k + 1 ) ) ) = ( dom ( ( G . ( k + 1 ) ) + ( H . k ) ) ) by A54;
A89: ( G . ( k + 1 ) ) = ( ( H . ( k + 1 ) ) - ( H . k ) ) by A64;
(for x being (Element of X) holds (x in ( dom ( H . ( k + 1 ) ) ) implies ( ( H . ( k + 1 ) ) . x ) = ( ( ( G . ( k + 1 ) ) + ( H . k ) ) . x )))
proof
let x being (Element of X);
A90: ( ( H . k ) . x ) <> ( +infty ) by A85,MESFUNC5:def 6;
( ( H . k ) . x ) <> ( -infty ) by A86,MESFUNC5:def 5;
then ( ( ( ( H . ( k + 1 ) ) . x ) - ( ( H . k ) . x ) ) + ( ( H . k ) . x ) ) = ( ( ( H . ( k + 1 ) ) . x ) - ( ( ( H . k ) . x ) - ( ( H . k ) . x ) ) ) by A90,XXREAL_3:32;
then ( ( ( ( H . ( k + 1 ) ) . x ) - ( ( H . k ) . x ) ) + ( ( H . k ) . x ) ) = ( ( ( H . ( k + 1 ) ) . x ) - ( 0. ) ) by XXREAL_3:7;
then A91: ( ( ( ( H . ( k + 1 ) ) . x ) - ( ( H . k ) . x ) ) + ( ( H . k ) . x ) ) = ( ( H . ( k + 1 ) ) . x ) by XXREAL_3:4;
assume A92: x in ( dom ( H . ( k + 1 ) ) );
then x in E1 by A54;
then ( ( H . ( k + 1 ) ) . x ) = ( ( ( G . ( k + 1 ) ) . x ) + ( ( H . k ) . x ) ) by A89,A87,A91,MESFUNC1:def 4;
hence thesis by A88,A92,MESFUNC1:def 3;
end;
then A93: ( H . ( k + 1 ) ) = ( ( G . ( k + 1 ) ) + ( H . k ) ) by A88,PARTFUN1:5;
assume PH[ k ];
hence thesis by A93,CKB26:def 1;
end;
A94: PH[ ( 0 ) ] by A63,CKB26:def 1;
(for k being Nat holds PH[ k ]) from NAT_1:sch 2(A94,A84);
then ( H . n ) = ( ( Partial_Sums G ) . n );
hence thesis;
end;
then A95: (for n being Nat holds (( H . n ) = ( ( Partial_Sums G ) . n ) & ( lim H ) = ( lim ( Partial_Sums G ) ))) by FUNCT_2:12;
reconsider G as  with_the_same_dom (Functional_Sequence of X,( ExtREAL )) by A73,MESFUNC8:def 2;
reconsider G as  additive  with_the_same_dom (Functional_Sequence of X,( ExtREAL )) by A74,CKB37:1;
A96: (for k being Nat holds ( H . k ) is  real-valued)
proof
let k being Nat;
(for x being (Element of X) holds (x in ( dom ( H . k ) ) implies |. ( ( H . k ) . x ) .| < ( +infty )))
proof
let x being (Element of X);
assume x in ( dom ( H . k ) );
( H . k ) is  without+infty by A54;
then A97: ( ( H . k ) . x ) < ( +infty ) by MESFUNC5:def 6;
( H . k ) is  without-infty by A54;
then ( -infty ) < ( ( H . k ) . x ) by MESFUNC5:def 5;
hence thesis by A97,EXTREAL2:29,XXREAL_0:4;
end;
hence thesis by MESFUNC2:def 1;
end;
A98: (for n being Nat holds ( G . n ) is_measurable_on E1)
proof
let n being Nat;
(n <> ( 0 ) implies ( G . n ) is_measurable_on E1)
proof
assume n <> ( 0 );
then consider k being Nat such that A99: n = ( k + 1 ) by NAT_1:6;
A100: E1 = ( dom ( H . k ) ) by A54;
A101: ( G . ( k + 1 ) ) = ( ( H . ( k + 1 ) ) - ( H . k ) ) by A64;
A102: ( H . k ) is  real-valued by A96;
A103: ( H . k ) is_measurable_on E1 by A1,A3,A53,A50,CKB24:1,XBOOLE_1:36;
A104: ( H . ( k + 1 ) ) is  real-valued by A96;
( H . ( k + 1 ) ) is_measurable_on E1 by A1,A3,A53,A50,CKB24:1,XBOOLE_1:36;
hence thesis by A99,A103,A100,A104,A102,A101,MESFUNC2:11;
end;
hence thesis by A1,A3,A52,A53,A50,A63,CKB24:1;
end;
A105: E1 = ( dom ( G . ( 0 ) ) ) by A54,A63;
(for x being (Element of X) holds (x in E1 implies ( G # x ) is  summable))
proof
let x being (Element of X);
assume A106: x in E1;
E1 c= E by XBOOLE_1:36;
then ( F # x ) is  convergent by A6,A106;
then ( H # x ) is  convergent by A50,A106,CKB12:1;
then ( ( Partial_Sums G ) # x ) is  convergent by A83,FUNCT_2:12;
then ( Partial_Sums ( G # x ) ) is  convergent by A105,A106,CKB40:1;
hence thesis by CKB18:def 1;
end;
then consider J being ExtREAL_sequence such that A107: (for n being Nat holds ( J . n ) = ( Integral (M,( ( G . n ) | E1 )) )) and J is  summable and A108: ( Integral (M,( ( lim ( Partial_Sums G ) ) | E1 )) ) = ( Sum J ) by A74,A105,A98,CKB68:1;
(for n being set holds (n in ( NAT ) implies ( I . n ) = ( ( Partial_Sums J ) . n )))
proof
let n being set;
assume n in ( NAT );
then reconsider n1 = n as (Element of ( NAT ));
A109: (for n being Nat holds ( J . n ) = ( Integral (M,( G . n )) ))
proof
let n being Nat;
( dom ( G . n ) ) = E1 by A69;
then ( ( G . n ) | E1 ) = ( G . n ) by RELAT_1:68;
hence thesis by A107;
end;
E1 = ( dom ( G . ( 0 ) ) ) by A69;
then ( ( Partial_Sums J ) . n1 ) = ( Integral (M,( ( Partial_Sums G ) . n1 )) ) by A74,A98,A109,CKB53:1;
then ( ( Partial_Sums J ) . n1 ) = ( Integral (M,( H . n1 )) ) by A83;
then ( ( Partial_Sums J ) . n1 ) = ( Integral (M,( ( F . n1 ) | E1 )) ) by A50;
hence thesis by A51;
end;
then A110: I = ( Partial_Sums J ) by FUNCT_2:12;
( dom ( lim ( Partial_Sums G ) ) ) = ( dom ( H . ( 0 ) ) ) by A95,MESFUNC8:def 9;
then ( dom ( lim ( Partial_Sums G ) ) ) = E1 by A54;
then A111: ( lim I ) = ( Integral (M,( lim H )) ) by A95,A108,A110,RELAT_1:68;
take I;
A112: (for x being (Element of X) holds (x in E1 implies ( F # x ) is  convergent))
proof
let x being (Element of X);
A113: E1 c= E by XBOOLE_1:36;
assume x in E1;
hence thesis by A6,A113;
end;
A114: (for n being (Element of ( NAT )) holds (( 0 ) <= n implies ( ( M * L ) . n ) = ( 0 )))
proof
let n being (Element of ( NAT ));
assume ( 0 ) <= n;
( dom L ) = ( NAT ) by FUNCT_2:def 1;
then ( ( M * L ) . n ) = ( M . ( L . n ) ) by FUNCT_1:13;
then ( ( M * L ) . n ) = ( M . ( E /\ ( eq_dom (( F . n ),( +infty )) ) ) ) by A48;
hence thesis by A46;
end;
( M * L ) is  nonnegative by MEASURE2:1;
then ( SUM ( M * L ) ) = ( ( Ser ( M * L ) ) . ( 0 ) ) by A114,SUPINF_2:48;
then ( SUM ( M * L ) ) = ( ( M * L ) . ( 0 ) ) by SUPINF_2:44;
then ( SUM ( M * L ) ) = ( 0 ) by A114;
then ( M . ( union E0 ) ) <= ( 0 ) by MEASURE2:11;
then A115: ( M . ( union E0 ) ) = ( 0 ) by SUPINF_2:51;
A116: (for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) ))
proof
let n being Nat;
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
A117: ( I . n ) = ( Integral (M,( ( F . n1 ) | E1 )) ) by A51;
( dom ( F . n ) ) = E by A1,A3,MESFUNC8:def 2;
hence thesis by A4,A115,A117,MESFUNC5:95;
end;
(for n,m being (Element of ( NAT )) holds (m <= n implies ( I . m ) <= ( I . n )))
proof
let n being (Element of ( NAT ));
let m being (Element of ( NAT ));
A118: ( F . m ) is  nonnegative by A8;
A119: ( dom ( F . m ) ) = E by A1,A3,MESFUNC8:def 2;
assume m <= n;
then A120: (for x being (Element of X) holds (x in ( dom ( F . m ) ) implies ( ( F . m ) . x ) <= ( ( F . n ) . x ))) by A5,A119;
A121: ( dom ( F . n ) ) = E by A1,A3,MESFUNC8:def 2;
A122: ( F . n ) is_measurable_on E by A4;
A123: ( F . n ) is  nonnegative by A8;
( F . m ) is_measurable_on E by A4;
then ( integral+ (M,( F . m )) ) <= ( integral+ (M,( F . n )) ) by A119,A121,A120,A118,A123,A122,MESFUNC5:85;
then ( Integral (M,( F . m )) ) <= ( integral+ (M,( F . n )) ) by A4,A119,A118,MESFUNC5:88;
then ( Integral (M,( F . m )) ) <= ( Integral (M,( F . n )) ) by A4,A121,A123,MESFUNC5:88;
then ( I . m ) <= ( Integral (M,( F . n )) ) by A116;
hence thesis by A116;
end;
then A124: I is  non-decreasing by RINFSUP2:7;
E = ( dom ( lim F ) ) by A1,MESFUNC8:def 9;
then A125: ( Integral (M,( lim F )) ) = ( Integral (M,( ( lim F ) | E1 )) ) by A7,A115,MESFUNC5:95;
E1 c= ( dom ( F . ( 0 ) ) ) by A1,XBOOLE_1:36;
hence thesis by A125,A50,A116,A124,A112,A111,CKB23:1,RINFSUP2:37;
end;
end;
