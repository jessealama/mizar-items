environ
vocabularies NUMBERS,FINSEQ_1,NAT_1,FINSEQ_3,RELAT_1,ARYTM_1,ORDINAL4,RFINSEQ,SUBSET_1,TARSKI,XBOOLE_0,XXREAL_0,ARYTM_3,CARD_1,FUNCT_1,PARTFUN1,PRALG_1,PBOOLE,RLVECT_2,FUNCT_4,STRUCT_0,PENCIL_1,CARD_3,INTEGRA1,ZFMISC_1,PRE_TOPC,FUNCT_2,CAT_1,RCOMP_1,RELAT_2,PENCIL_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,NAT_D,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,XXREAL_0,RFINSEQ,CARD_1,FINSEQ_1,CARD_3,PRE_TOPC,PBOOLE,PZFMISC1,TOPS_2,T_0TOPSP,PRALG_1,FUNCT_7,PENCIL_1,CKB1;
definitions TARSKI,PBOOLE,PENCIL_1,XBOOLE_0,STRUCT_0,CKB1;
theorems TARSKI,FUNCT_1,PBOOLE,CARD_3,CARD_1,FINSEQ_1,ZFMISC_1,NAT_1,FUNCT_7,YELLOW_6,PZFMISC1,PUA2MSS1,PRE_TOPC,FINSEQ_3,FUNCT_2,TOPGRP_1,TOPS_2,T_0TOPSP,RELAT_1,PENCIL_1,RFINSEQ,FINSEQ_4,FINSEQ_5,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
schemes FINSEQ_1,NAT_1,INT_1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,PARTFUN1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,REALSET1,STRUCT_0,BORSUK_2,PENCIL_1,ORDINAL1,FINSEQ_1,RELSET_1,PRE_POLY,ZFMISC_1;
constructors XXREAL_0,RFINSEQ,NAT_D,PZFMISC1,TOPS_2,T_0TOPSP,POLYNOM1,PENCIL_1,REAL_1,RELSET_1,PBOOLE,FUNCT_7,CKB1;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
scheme FinSeqOneToOne { X,Y,D() -> set,f() -> (FinSequence of D()),P[set,set] } : (ex g being  one-to-one (FinSequence of D()) st (((X() = ( g . 1 ) & Y() = ( g . ( len g ) )) & ( rng g ) c= ( rng f() )) & (for j being (Element of ( NAT )) holds ((1 <= j & j < ( len g )) implies P[ ( g . j ),( g . ( j + 1 ) ) ]))))
provided
A1: (X() = ( f() . 1 ) & Y() = ( f() . ( len f() ) ))
and
A2: (for i being (Element of ( NAT )) holds (for d1,d2 being set holds ((((1 <= i & i < ( len f() )) & d1 = ( f() . i )) & d2 = ( f() . ( i + 1 ) )) implies P[ d1,d2 ])))
proof
defpred Q[ Nat ]
 means
(ex f being (FinSequence of D()) st ((((( len f ) = $1 & X() = ( f . 1 )) & Y() = ( f . ( len f ) )) & ( rng f ) c= ( rng f() )) & (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len f )) implies P[ ( f . i ),( f . ( i + 1 ) ) ]))));
(for i being (Element of ( NAT )) holds ((1 <= i & i < ( len f() )) implies P[ ( f() . i ),( f() . ( i + 1 ) ) ])) by A2;
then A3: (ex k being Nat st Q[ k ]) by A1;
consider k being Nat such that A4: (Q[ k ] & (for n being Nat holds (Q[ n ] implies k <= n))) from NAT_1:sch 5(A3);
consider g being (FinSequence of D()) such that A5: ( len g ) = k and A6: X() = ( g . 1 ) and A7: Y() = ( g . ( len g ) ) and A8: ( rng g ) c= ( rng f() ) and A9: (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len g )) implies P[ ( g . i ),( g . ( i + 1 ) ) ])) by A4;
now
assume (not g is  one-to-one);
then consider x being set,y being set such that A10: x in ( dom g ) and A11: y in ( dom g ) and A12: ( g . x ) = ( g . y ) and A13: x <> y by FUNCT_1:def 4;
reconsider x,y as (Element of ( NAT )) by A10,A11;
per cases  by A13,XXREAL_0:1;
suppose A14: x < y;

set d = ( Del (g,( x + 1 ),y) );
A15: 1 <= y by A11,FINSEQ_3:25;
A16: ( x + 1 ) >= 1 by NAT_1:11;
A17: y <= ( len g ) by A11,FINSEQ_3:25;
then A18: x < ( len g ) by A14,XXREAL_0:2;
then ( x + 1 ) <= ( len g ) by NAT_1:13;
then A19: ( x + 1 ) in ( dom g ) by A16,FINSEQ_3:25;
A20: ( x + 1 ) <= y by A14,NAT_1:13;
then A21: ( y - ( x + 1 ) ) >= ( 0 ) by XREAL_1:48;
A22: (( rng d ) c= ( rng f() ) & (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len d )) implies P[ ( d . i ),( d . ( i + 1 ) ) ])))
proof
( rng d ) c= ( rng g ) by CKB2:1;
hence ( rng d ) c= ( rng f() ) by A8,XBOOLE_1:1;
let i being (Element of ( NAT ));
assume that
A23: 1 <= i
and
A24: i < ( len d );
per cases  by XXREAL_0:1;
suppose A25: i < x;

then ( i + 1 ) <= ( ( x + 1 ) - 1 ) by NAT_1:13;
then A26: ( d . ( i + 1 ) ) = ( g . ( i + 1 ) ) by A19,CKB5:1,NAT_1:11;
i <= ( ( x + 1 ) - 1 ) by A25;
then A27: ( d . i ) = ( g . i ) by A19,A23,CKB5:1;
i < ( len g ) by A18,A25,XXREAL_0:2;
hence thesis by A9,A23,A27,A26;
end;
suppose A28: i = x;

now
assume y = ( len g );
then x < ( ( ( ( len g ) - ( len g ) ) + ( x + 1 ) ) - 1 ) by A11,A19,A24,A28,CKB3:1;
hence contradiction;
end;
then A29: y < ( len g ) by A17,XXREAL_0:1;
then A30: ( 0 ) < ( ( len g ) - y ) by XREAL_1:50;
then ( 0 ) < ( ( len g ) -' y ) by XREAL_0:def 2;
then ( ( 0 ) + 1 ) <= ( ( len g ) -' y ) by NAT_1:13;
then ( 1 - 1 ) <= ( ( ( len g ) -' y ) - 1 ) by XREAL_1:9;
then ( 0 ) <= ( ( ( len g ) - y ) - 1 ) by A30,XREAL_0:def 2;
then ( ( i + 1 ) + ( 0 ) ) <= ( ( i + 1 ) + ( ( ( len g ) - y ) - 1 ) ) by XREAL_1:7;
then ( ( i + 1 ) + ( 0 ) ) <= ( ( ( i + 1 ) + ( ( len g ) - y ) ) - 1 );
then A31: ( d . ( i + 1 ) ) = ( g . ( ( ( y -' ( x + 1 ) ) + ( i + 1 ) ) + 1 ) ) by A11,A20,A19,A28,CKB7:1
.= ( g . ( y + 1 ) ) by A20,A28,XREAL_1:235;
i <= ( ( x + 1 ) - 1 ) by A28;
then ( d . i ) = ( g . y ) by A12,A19,A23,A28,CKB5:1;
hence thesis by A9,A15,A29,A31;
end;
suppose i > x;

then A32: ( x + 1 ) <= i by NAT_1:13;
A33: ( ( len g ) - y ) >= ( 0 ) by A17,XREAL_1:48;
i < ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 ) by A11,A19,A24,CKB3:1;
then A34: i < ( ( ( ( len g ) -' y ) + ( x + 1 ) ) - 1 ) by A33,XREAL_0:def 2;
then ( i + 1 ) <= ( ( ( len g ) -' y ) + x ) by NAT_1:13;
then ( i + 1 ) <= ( ( ( ( ( len g ) - y ) + x ) + 1 ) - 1 ) by A33,XREAL_0:def 2;
then A35: ( i + 1 ) <= ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 );
i < ( ( ( ( ( len g ) -' y ) + x ) + 1 ) - 1 ) by A34;
then i < ( ( ( len g ) - y ) + x ) by A33,XREAL_0:def 2;
then ( i - x ) < ( ( ( ( len g ) - y ) + x ) - x ) by XREAL_1:9;
then ( ( i - x ) + y ) < ( ( ( len g ) - y ) + y ) by XREAL_1:8;
then ( ( ( ( y - x ) - 1 ) + i ) + 1 ) < ( len g );
then A36: ( ( ( y -' ( x + 1 ) ) + i ) + 1 ) < ( len g ) by A21,XREAL_0:def 2;
i <= ( i + 1 ) by NAT_1:11;
then ( x + 1 ) <= ( i + 1 ) by A32,XXREAL_0:2;
then A37: ( d . ( i + 1 ) ) = ( g . ( ( ( y -' ( x + 1 ) ) + ( i + 1 ) ) + 1 ) ) by A11,A20,A19,A35,CKB7:1
.= ( g . ( ( ( ( y -' ( x + 1 ) ) + i ) + 1 ) + 1 ) );
i <= ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 ) by A11,A19,A24,CKB3:1;
then ( d . i ) = ( g . ( ( ( y -' ( x + 1 ) ) + i ) + 1 ) ) by A11,A20,A19,A32,CKB7:1;
hence thesis by A9,A37,A36,NAT_1:11;
end;
end;
A38: Y() = ( d . ( len d ) )
proof
per cases ;
suppose A39: ( len d ) <= x;

now
assume ( len d ) = ( 0 );
then ( x + 1 ) = ( ( 0 ) + 1 ) by A11,A19,CKB4:1;
hence contradiction by A10,FINSEQ_3:24;
end;
then A40: ( ( 0 ) + 1 ) <= ( len d ) by NAT_1:13;
( len d ) <= ( ( x + 1 ) - 1 ) by A39;
then A41: ( d . ( len d ) ) = ( g . ( len d ) ) by A19,A40,CKB5:1;
( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 ) <= x by A11,A19,A39,CKB3:1;
then ( ( ( ( ( len g ) - y ) + x ) + 1 ) - 1 ) <= x;
then ( ( len g ) - y ) <= ( 0 ) by XREAL_1:29;
then ( len g ) <= y by XREAL_1:50;
then A42: ( len g ) = y by A17,XXREAL_0:1;
then x <= ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 );
hence thesis by A7,A11,A12,A19,A42,A41,CKB3:1;
end;
suppose ( len d ) > x;

then A43: ( x + 1 ) <= ( len d ) by NAT_1:13;
( len d ) = ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 ) by A11,A19,CKB3:1;
hence ( d . ( len d ) ) = ( g . ( ( ( y -' ( x + 1 ) ) + ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 ) ) + 1 ) ) by A11,A20,A19,A43,CKB7:1
.= ( g . ( ( ( y - ( x + 1 ) ) + ( ( x + 1 ) + ( ( ( len g ) - y ) - 1 ) ) ) + 1 ) ) by A20,XREAL_1:233
.= Y() by A7;
end;
end;
1 <= ( ( x + 1 ) - 1 ) by A10,FINSEQ_3:25;
then A44: X() = ( d . 1 ) by A6,A19,CKB5:1;
( 0 ) < ( - ( - ( y - x ) ) ) by A14,XREAL_1:50;
then ( - ( y - x ) ) < ( 0 );
then ( ( len g ) + ( - ( y - x ) ) ) < ( ( len g ) + ( 0 ) ) by XREAL_1:8;
then ( ( ( ( len g ) - y ) + ( x + 1 ) ) - 1 ) < ( len g );
then ( len d ) < ( len g ) by A11,A19,CKB3:1;
hence contradiction by A4,A5,A44,A38,A22;
end;
suppose A45: y < x;

set d = ( Del (g,( y + 1 ),x) );
A46: 1 <= x by A10,FINSEQ_3:25;
A47: ( y + 1 ) >= 1 by NAT_1:11;
A48: x <= ( len g ) by A10,FINSEQ_3:25;
then A49: y < ( len g ) by A45,XXREAL_0:2;
then ( y + 1 ) <= ( len g ) by NAT_1:13;
then A50: ( y + 1 ) in ( dom g ) by A47,FINSEQ_3:25;
A51: ( y + 1 ) <= x by A45,NAT_1:13;
then A52: ( x - ( y + 1 ) ) >= ( 0 ) by XREAL_1:48;
A53: (( rng d ) c= ( rng f() ) & (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len d )) implies P[ ( d . i ),( d . ( i + 1 ) ) ])))
proof
( rng d ) c= ( rng g ) by CKB2:1;
hence ( rng d ) c= ( rng f() ) by A8,XBOOLE_1:1;
let i being (Element of ( NAT ));
assume that
A54: 1 <= i
and
A55: i < ( len d );
per cases  by XXREAL_0:1;
suppose A56: i < y;

then ( i + 1 ) <= ( ( y + 1 ) - 1 ) by NAT_1:13;
then A57: ( d . ( i + 1 ) ) = ( g . ( i + 1 ) ) by A50,CKB5:1,NAT_1:11;
i <= ( ( y + 1 ) - 1 ) by A56;
then A58: ( d . i ) = ( g . i ) by A50,A54,CKB5:1;
i < ( len g ) by A49,A56,XXREAL_0:2;
hence thesis by A9,A54,A58,A57;
end;
suppose A59: i = y;

now
assume x = ( len g );
then y < ( ( ( ( len g ) - ( len g ) ) + ( y + 1 ) ) - 1 ) by A10,A50,A55,A59,CKB3:1;
hence contradiction;
end;
then A60: x < ( len g ) by A48,XXREAL_0:1;
then A61: ( 0 ) < ( ( len g ) - x ) by XREAL_1:50;
then ( 0 ) < ( ( len g ) -' x ) by XREAL_0:def 2;
then ( ( 0 ) + 1 ) <= ( ( len g ) -' x ) by NAT_1:13;
then ( 1 - 1 ) <= ( ( ( len g ) -' x ) - 1 ) by XREAL_1:9;
then ( 0 ) <= ( ( ( len g ) - x ) - 1 ) by A61,XREAL_0:def 2;
then ( ( i + 1 ) + ( 0 ) ) <= ( ( i + 1 ) + ( ( ( len g ) - x ) - 1 ) ) by XREAL_1:7;
then ( ( i + 1 ) + ( 0 ) ) <= ( ( ( i + 1 ) + ( ( len g ) - x ) ) - 1 );
then A62: ( d . ( i + 1 ) ) = ( g . ( ( ( x -' ( y + 1 ) ) + ( i + 1 ) ) + 1 ) ) by A10,A51,A50,A59,CKB7:1
.= ( g . ( x + 1 ) ) by A51,A59,XREAL_1:235;
i <= ( ( y + 1 ) - 1 ) by A59;
then ( d . i ) = ( g . x ) by A12,A50,A54,A59,CKB5:1;
hence thesis by A9,A46,A60,A62;
end;
suppose i > y;

then A63: ( y + 1 ) <= i by NAT_1:13;
A64: ( ( len g ) - x ) >= ( 0 ) by A48,XREAL_1:48;
i < ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 ) by A10,A50,A55,CKB3:1;
then A65: i < ( ( ( ( len g ) -' x ) + ( y + 1 ) ) - 1 ) by A64,XREAL_0:def 2;
then ( i + 1 ) <= ( ( ( len g ) -' x ) + y ) by NAT_1:13;
then ( i + 1 ) <= ( ( ( ( ( len g ) - x ) + y ) + 1 ) - 1 ) by A64,XREAL_0:def 2;
then A66: ( i + 1 ) <= ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 );
i < ( ( ( ( ( len g ) -' x ) + y ) + 1 ) - 1 ) by A65;
then i < ( ( ( len g ) - x ) + y ) by A64,XREAL_0:def 2;
then ( i - y ) < ( ( ( ( len g ) - x ) + y ) - y ) by XREAL_1:9;
then ( ( i - y ) + x ) < ( ( ( len g ) - x ) + x ) by XREAL_1:8;
then ( ( ( ( x - y ) - 1 ) + i ) + 1 ) < ( len g );
then A67: ( ( ( x -' ( y + 1 ) ) + i ) + 1 ) < ( len g ) by A52,XREAL_0:def 2;
i <= ( i + 1 ) by NAT_1:11;
then ( y + 1 ) <= ( i + 1 ) by A63,XXREAL_0:2;
then A68: ( d . ( i + 1 ) ) = ( g . ( ( ( x -' ( y + 1 ) ) + ( i + 1 ) ) + 1 ) ) by A10,A51,A50,A66,CKB7:1
.= ( g . ( ( ( ( x -' ( y + 1 ) ) + i ) + 1 ) + 1 ) );
i <= ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 ) by A10,A50,A55,CKB3:1;
then ( d . i ) = ( g . ( ( ( x -' ( y + 1 ) ) + i ) + 1 ) ) by A10,A51,A50,A63,CKB7:1;
hence thesis by A9,A68,A67,NAT_1:11;
end;
end;
A69: Y() = ( d . ( len d ) )
proof
per cases ;
suppose A70: ( len d ) <= y;

now
assume ( len d ) = ( 0 );
then ( y + 1 ) = ( ( 0 ) + 1 ) by A10,A50,CKB4:1;
hence contradiction by A11,FINSEQ_3:24;
end;
then A71: ( ( 0 ) + 1 ) <= ( len d ) by NAT_1:13;
( len d ) <= ( ( y + 1 ) - 1 ) by A70;
then A72: ( d . ( len d ) ) = ( g . ( len d ) ) by A50,A71,CKB5:1;
( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 ) <= y by A10,A50,A70,CKB3:1;
then ( ( ( ( ( len g ) - x ) + y ) + 1 ) - 1 ) <= y;
then ( ( len g ) - x ) <= ( 0 ) by XREAL_1:29;
then ( len g ) <= x by XREAL_1:50;
then A73: ( len g ) = x by A48,XXREAL_0:1;
then y <= ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 );
hence thesis by A7,A10,A12,A50,A73,A72,CKB3:1;
end;
suppose ( len d ) > y;

then A74: ( y + 1 ) <= ( len d ) by NAT_1:13;
( len d ) = ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 ) by A10,A50,CKB3:1;
hence ( d . ( len d ) ) = ( g . ( ( ( x -' ( y + 1 ) ) + ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 ) ) + 1 ) ) by A10,A51,A50,A74,CKB7:1
.= ( g . ( ( ( x - ( y + 1 ) ) + ( ( y + 1 ) + ( ( ( len g ) - x ) - 1 ) ) ) + 1 ) ) by A51,XREAL_1:233
.= Y() by A7;
end;
end;
1 <= ( ( y + 1 ) - 1 ) by A11,FINSEQ_3:25;
then A75: X() = ( d . 1 ) by A6,A50,CKB5:1;
( 0 ) < ( - ( - ( x - y ) ) ) by A45,XREAL_1:50;
then ( - ( x - y ) ) < ( 0 );
then ( ( len g ) + ( - ( x - y ) ) ) < ( ( len g ) + ( 0 ) ) by XREAL_1:8;
then ( ( ( ( len g ) - x ) + ( y + 1 ) ) - 1 ) < ( len g );
then ( len d ) < ( len g ) by A10,A50,CKB3:1;
hence contradiction by A4,A5,A75,A69,A53;
end;
end;
hence thesis by A6,A7,A8,A9;
end;
