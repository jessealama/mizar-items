environ
vocabularies NUMBERS,FINSEQ_1,NAT_1,FINSEQ_3,RELAT_1,ARYTM_1,ORDINAL4,RFINSEQ,SUBSET_1,TARSKI,XBOOLE_0,XXREAL_0,ARYTM_3,CARD_1,FUNCT_1,PARTFUN1,PRALG_1,PBOOLE,RLVECT_2,FUNCT_4,STRUCT_0,PENCIL_1,CARD_3,INTEGRA1,ZFMISC_1,PRE_TOPC,FUNCT_2,CAT_1,RCOMP_1,RELAT_2,PENCIL_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,NAT_D,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,XXREAL_0,RFINSEQ,CARD_1,FINSEQ_1,CARD_3,PRE_TOPC,PBOOLE,PZFMISC1,TOPS_2,T_0TOPSP,PRALG_1,FUNCT_7,PENCIL_1,CKB1,CKB10,CKB12,CKB17,CKB19,CKB20,CKB21;
definitions TARSKI,PBOOLE,PENCIL_1,XBOOLE_0,STRUCT_0,CKB1,CKB10,CKB12,CKB17;
theorems TARSKI,FUNCT_1,PBOOLE,CARD_3,CARD_1,FINSEQ_1,ZFMISC_1,NAT_1,FUNCT_7,YELLOW_6,PZFMISC1,PUA2MSS1,PRE_TOPC,FINSEQ_3,FUNCT_2,TOPGRP_1,TOPS_2,T_0TOPSP,RELAT_1,PENCIL_1,RFINSEQ,FINSEQ_4,FINSEQ_5,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31;
schemes FINSEQ_1,NAT_1,INT_1,CKB8;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,PARTFUN1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,REALSET1,STRUCT_0,BORSUK_2,PENCIL_1,ORDINAL1,FINSEQ_1,RELSET_1,PRE_POLY,ZFMISC_1,CKB18;
constructors XXREAL_0,RFINSEQ,NAT_D,PZFMISC1,TOPS_2,T_0TOPSP,POLYNOM1,PENCIL_1,REAL_1,RELSET_1,PBOOLE,FUNCT_7,CKB1,CKB10,CKB12,CKB17,CKB20,CKB21;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
theorem
Th23: (for I being non  empty set holds (for A being  PLS-yielding (ManySortedSet of I) holds ((for i being (Element of I) holds ( A . i ) is  strongly_connected) implies (for B being set holds (B is (Segre-Coset of A) iff (ex W being (Subset of ( Segre_Product A )) st (W is non  trivial  strong  closed_under_lines & B = ( union { Y where Y is (Subset of ( Segre_Product A )): (Y is non  trivial  strong  closed_under_lines & W,Y are_joinable ) } ))))))))
proof
let I being non  empty set;
let A being  PLS-yielding (ManySortedSet of I);
assume A1: (for i being (Element of I) holds ( A . i ) is  strongly_connected);
let B being set;
thus (B is (Segre-Coset of A) implies (ex W being (Subset of ( Segre_Product A )) st (W is non  trivial  strong  closed_under_lines & B = ( union { Y where Y is (Subset of ( Segre_Product A )): (Y is non  trivial  strong  closed_under_lines & W,Y are_joinable ) } ))))
proof
assume B is (Segre-Coset of A);
then reconsider BB = B as (Segre-Coset of A);
consider L being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) such that A2: BB = ( product L ) and A3: ( L . ( indx L ) ) = ( [#] ( A . ( indx L ) ) ) by CKB10:def 1;
set K1 = the (Block of ( A . ( indx L ) ));
consider V being set such that A4: V in ( product L ) by XBOOLE_0:def 1;
K1 in (the topology of ( A . ( indx L ) ));
then reconsider K = K1 as (Subset of ( A . ( indx L ) ));
A5: (ex g being Function st ((g = V & ( dom g ) = ( dom L )) & (for i being set holds (i in ( dom L ) implies ( g . i ) in ( L . i ))))) by A4,CARD_3:def 5;
A6: ( dom L ) = I by PARTFUN1:def 2;
then reconsider V as (ManySortedSet of I) by A5,PARTFUN1:def 2,RELAT_1:def 18;
(for i being set holds (i in I implies ( V . i ) is (Element of ( ( Carrier A ) . i ))))
proof
let i being set;
assume A7: i in I;
L c= ( Carrier A ) by PBOOLE:def 18;
then A8: ( L . i ) c= ( ( Carrier A ) . i ) by A7,PBOOLE:def 2;
( V . i ) in ( L . i ) by A6,A5,A7;
hence thesis by A8;
end;
then reconsider V as (Element of ( Carrier A )) by PBOOLE:def 14;
reconsider VV = { V } as (ManySortedSubset of ( Carrier A )) by PENCIL_1:11;
reconsider X = ( VV +* (( indx L ),K) ) as (ManySortedSubset of ( Carrier A )) by CKB9:1;
2 c= ( card K ) by PENCIL_1:def 6;
then A9: K is non  trivial by PENCIL_1:4;
then reconsider X as  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) by PENCIL_1:9,PENCIL_1:10;
( dom VV ) = I by PARTFUN1:def 2;
then A10: ( X . ( indx L ) ) = K by FUNCT_7:31;
then ( indx X ) = ( indx L ) by A9,PENCIL_1:def 21;
then reconsider pX = ( product X ) as (Block of ( Segre_Product A )) by A10,PENCIL_1:24;
A11: (for i being set holds (i in I implies ( X . i ) c= ( L . i )))
proof
let i being set;
assume A12: i in I;
per cases ;
suppose i <> ( indx L );

then ( X . i ) = ( VV . i ) by FUNCT_7:32;
then A13: ( X . i ) = { ( V . i ) } by A12,PZFMISC1:def 1;
( V . i ) in ( L . i ) by A6,A5,A12;
hence thesis by A13,ZFMISC_1:31;
end;
suppose i = ( indx L );

hence thesis by A3,A10;
end;
end;
pX in (the topology of ( Segre_Product A ));
then reconsider psX = pX as (Subset of ( Segre_Product A ));
take psX;
thus A14: psX is non  trivial  strong  closed_under_lines by PENCIL_1:20,PENCIL_1:21;
then reconsider Z = ( union { Y where Y is (Subset of ( Segre_Product A )): (Y is non  trivial  strong  closed_under_lines & psX,Y are_joinable ) } ) as (Segre-Coset of A) by A1,CKB31:1;
psX,psX are_joinable  by A14,CKB14:1;
then A15: psX in { Y where Y is (Subset of ( Segre_Product A )): (Y is non  trivial  strong  closed_under_lines & psX,Y are_joinable ) } by A14;
A16: psX c= Z
proof
let a being set;
assume a in psX;
hence thesis by A15,TARSKI:def 4;
end;
( dom X ) = I by PARTFUN1:def 2;
then psX c= B by A2,A6,A11,CARD_3:27;
then psX c= ( B /\ Z ) by A16,XBOOLE_1:19;
then A17: ( card psX ) c= ( card ( B /\ Z ) ) by CARD_1:11;
2 c= ( card pX ) by PENCIL_1:def 6;
then BB = Z by A17,CKB11:1,XBOOLE_1:1;
hence thesis;
end;

given W being (Subset of ( Segre_Product A )) such that
A18: W is non  trivial  strong  closed_under_lines
and
A19: B = ( union { Y where Y is (Subset of ( Segre_Product A )): (Y is non  trivial  strong  closed_under_lines & W,Y are_joinable ) } );

thus thesis by A1,A18,A19,CKB31:1;
end;
