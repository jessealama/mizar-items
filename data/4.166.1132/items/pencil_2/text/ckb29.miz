environ
vocabularies NUMBERS,FINSEQ_1,NAT_1,FINSEQ_3,RELAT_1,ARYTM_1,ORDINAL4,RFINSEQ,SUBSET_1,TARSKI,XBOOLE_0,XXREAL_0,ARYTM_3,CARD_1,FUNCT_1,PARTFUN1,PRALG_1,PBOOLE,RLVECT_2,FUNCT_4,STRUCT_0,PENCIL_1,CARD_3,INTEGRA1,ZFMISC_1,PRE_TOPC,FUNCT_2,CAT_1,RCOMP_1,RELAT_2,PENCIL_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,NAT_D,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,XXREAL_0,RFINSEQ,CARD_1,FINSEQ_1,CARD_3,PRE_TOPC,PBOOLE,PZFMISC1,TOPS_2,T_0TOPSP,PRALG_1,FUNCT_7,PENCIL_1,CKB1,CKB10,CKB12,CKB17,CKB19,CKB20,CKB21;
definitions TARSKI,PBOOLE,PENCIL_1,XBOOLE_0,STRUCT_0,CKB1,CKB10,CKB12,CKB17;
theorems TARSKI,FUNCT_1,PBOOLE,CARD_3,CARD_1,FINSEQ_1,ZFMISC_1,NAT_1,FUNCT_7,YELLOW_6,PZFMISC1,PUA2MSS1,PRE_TOPC,FINSEQ_3,FUNCT_2,TOPGRP_1,TOPS_2,T_0TOPSP,RELAT_1,PENCIL_1,RFINSEQ,FINSEQ_4,FINSEQ_5,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28;
schemes FINSEQ_1,NAT_1,INT_1,CKB8;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,PARTFUN1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,REALSET1,STRUCT_0,BORSUK_2,PENCIL_1,ORDINAL1,FINSEQ_1,RELSET_1,PRE_POLY,ZFMISC_1,CKB18;
constructors XXREAL_0,RFINSEQ,NAT_D,PZFMISC1,TOPS_2,T_0TOPSP,POLYNOM1,PENCIL_1,REAL_1,RELSET_1,PBOOLE,FUNCT_7,CKB1,CKB10,CKB12,CKB17,CKB20,CKB21;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
theorem
Th20: (for S being non  empty non  void TopStruct holds (for f being (Collineation of S) holds (for X,Y being (Subset of S) holds (((X is non  trivial & Y is non  trivial) & X,Y are_joinable ) implies ( f .: X ),( f .: Y ) are_joinable ))))
proof
let S being non  empty non  void TopStruct;
let f being (Collineation of S);
let X being (Subset of S);
let Y being (Subset of S);
assume that
A1: X is non  trivial
and
A2: Y is non  trivial
and
A3: X,Y are_joinable ;
consider g being (FinSequence of ( bool (the carrier of S) )) such that A4: X = ( g . 1 ) and A5: Y = ( g . ( len g ) ) and A6: (for W being (Subset of S) holds (W in ( rng g ) implies W is  closed_under_lines  strong)) and A7: (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len g )) implies 2 c= ( card ( ( g . i ) /\ ( g . ( i + 1 ) ) ) ))) by A3,CKB12:def 1;
deffunc F(set) = ( f .: ( g . $1 ) );
consider p being FinSequence such that A8: (( len p ) = ( len g ) & (for k being Nat holds (k in ( dom p ) implies ( p . k ) = F(k)))) from FINSEQ_1:sch 2;
A9: ( dom g ) = ( Seg ( len g ) ) by FINSEQ_1:def 3;
A10: ( dom p ) = ( Seg ( len p ) ) by FINSEQ_1:def 3;
( rng p ) c= ( bool (the carrier of S) )
proof
let o being set;
assume o in ( rng p );
then consider i being set such that A11: i in ( dom p ) and A12: o = ( p . i ) by FUNCT_1:def 3;
reconsider i as (Element of ( NAT )) by A11;
( g . i ) in ( rng g ) by A8,A10,A9,A11,FUNCT_1:3;
then reconsider gi = ( g . i ) as (Subset of S);
( p . i ) = ( f .: gi ) by A8,A11;
hence thesis by A12;
end;
then reconsider p as (FinSequence of ( bool (the carrier of S) )) by FINSEQ_1:def 4;
take p;
1 in ( dom g ) by A1,A4,FUNCT_1:def 2;
hence ( f .: X ) = ( p . 1 ) by A4,A8,A10,A9;
( len g ) in ( dom g ) by A2,A5,FUNCT_1:def 2;
hence ( f .: Y ) = ( p . ( len p ) ) by A5,A8,A10,A9;
thus (for W being (Subset of S) holds (W in ( rng p ) implies W is  closed_under_lines  strong))
proof
let W being (Subset of S);
assume W in ( rng p );
then consider i being set such that A13: i in ( dom p ) and A14: W = ( p . i ) by FUNCT_1:def 3;
reconsider i as (Element of ( NAT )) by A13;
( g . i ) in ( rng g ) by A8,A10,A9,A13,FUNCT_1:3;
then reconsider gi = ( g . i ) as (Subset of S);
gi in ( rng g ) by A8,A10,A9,A13,FUNCT_1:3;
then A15: gi is  strong  closed_under_lines by A6;
( p . i ) = ( f .: gi ) by A8,A13;
hence thesis by A14,A15,CKB25:1,CKB27:1;
end;

A16: f is  bijective by CKB17:def 1;
thus (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len p )) implies 2 c= ( card ( ( p . i ) /\ ( p . ( i + 1 ) ) ) )))
proof
let i being (Element of ( NAT ));
assume that
A17: 1 <= i
and
A18: i < ( len p );
A19: ( ( g . i ) /\ ( g . ( i + 1 ) ) ) c= ( g . i ) by XBOOLE_1:17;
i in ( dom g ) by A8,A17,A18,FINSEQ_3:25;
then ( g . i ) in ( rng g ) by FUNCT_1:3;
then reconsider gg = ( ( g . i ) /\ ( g . ( i + 1 ) ) ) as (Subset of S) by A19,XBOOLE_1:1;
2 c= ( card ( ( g . i ) /\ ( g . ( i + 1 ) ) ) ) by A7,A8,A17,A18;
then gg is non  trivial by PENCIL_1:4;
then ( f .: gg ) is non  trivial by CKB23:1;
then A20: ( ( f .: ( g . i ) ) /\ ( f .: ( g . ( i + 1 ) ) ) ) is non  trivial by A16,FUNCT_1:62;
A21: ( i + 1 ) <= ( len p ) by A18,NAT_1:13;
1 <= ( i + 1 ) by A17,NAT_1:13;
then ( i + 1 ) in ( dom p ) by A21,FINSEQ_3:25;
then A22: ( p . ( i + 1 ) ) = ( f .: ( g . ( i + 1 ) ) ) by A8;
i in ( dom g ) by A8,A17,A18,FINSEQ_3:25;
then ( p . i ) = ( f .: ( g . i ) ) by A8,A10,A9;
hence thesis by A22,A20,PENCIL_1:4;
end;

end;
