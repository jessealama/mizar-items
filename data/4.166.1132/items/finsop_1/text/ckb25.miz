environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSEQ_1,FUNCT_1,BINOP_1,FUNCT_2,RELAT_1,FINSEQ_2,SETWISEO,XXREAL_0,CARD_1,ARYTM_3,FUNCOP_1,TARSKI,FUNCT_4,FINSUB_1,ORDINAL4,NAT_1,ARYTM_1,PARTFUN1,FINSOP_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,BINOP_1,PARTFUN1,FINSEQ_2,FINSEQ_1,FINSEQ_4,RELAT_1,RELSET_1,FUNCT_1,FINSUB_1,SETWISEO,FUNCT_2,NAT_1,FUNCOP_1,FUNCT_4,XXREAL_0,CKB1,CKB2,CKB5,CKB6,CKB7;
definitions FUNCT_1,TARSKI,XBOOLE_0,CKB2;
theorems BINOP_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCT_1,FUNCT_2,NAT_1,SETWISEO,TARSKI,RELAT_1,FUNCOP_1,FUNCT_4,FINSUB_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,XREAL_1,XXREAL_0,ORDINAL1,CARD_1,CKB2,CKB3,CKB4,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24;
schemes FINSEQ_1,FINSEQ_2,NAT_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,XXREAL_0,XREAL_0,FINSEQ_1,CARD_1,FINSEQ_2;
constructors BINOP_1,PARTFUN1,FUNCOP_1,FUNCT_4,SETWISEO,XXREAL_0,XREAL_0,NAT_1,FINSEQ_2,FINSEQ_4,RELSET_1,CKB1,CKB2,CKB5,CKB7;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve D for non empty set;
reserve F for (FinSequence of D);
reserve G for (FinSequence of D);
reserve H for (FinSequence of D);
reserve g for (BinOp of D);
reserve k for (Element of ( NAT ));
reserve i for (Element of ( NAT ));
theorem
Lm12: ((((((g is  associative & g is  commutative) & ( len F ) >= 1) & ( len F ) = ( len G )) & ( len F ) = ( len H )) & (for k holds (k in ( dom F ) implies ( H . k ) = ( g . (( F . k ),( G . k )) )))) implies ( g "**" H ) = ( g . (( g "**" F ),( g "**" G )) ))
proof
assume that
A1: g is  associative
and
A2: g is  commutative;
defpred P[ (Element of ( NAT )) ]
 means
(for F holds (for G holds (for H holds (((((( len F ) >= 1 & ( len F ) = $1) & ( len F ) = ( len G )) & ( len F ) = ( len H )) & (for k holds (k in ( dom F ) implies ( H . k ) = ( g . (( F . k ),( G . k )) )))) implies ( g "**" H ) = ( g . (( g "**" F ),( g "**" G )) )))));
A3:now
let k;
assume A4: P[ k ];
thus P[ ( k + 1 ) ]
proof
let F;
let G;
let H;
assume that
( len F ) >= 1
and
A5: ( len F ) = ( k + 1 )
and
A6: ( len F ) = ( len G )
and
A7: ( len F ) = ( len H )
and
A8: (for k holds (k in ( dom F ) implies ( H . k ) = ( g . (( F . k ),( G . k )) )));
reconsider f = ( F | ( Seg k ) ),gg = ( G | ( Seg k ) ),h = ( H | ( Seg k ) ) as (FinSequence of D) by FINSEQ_1:18;
A9: ( len h ) = k by A5,A7,FINSEQ_3:53;
A10: ( len f ) = k by A5,FINSEQ_3:53;
A11: ( len gg ) = k by A5,A6,FINSEQ_3:53;
A12:now
k <= ( k + 1 ) by NAT_1:12;
then ( Seg ( len f ) ) c= ( Seg ( len F ) ) by A5,A10,FINSEQ_1:5;
then ( Seg ( len f ) ) c= ( dom F ) by FINSEQ_1:def 3;
then A13: ( dom f ) c= ( dom F ) by FINSEQ_1:def 3;
let i;
assume A14: i in ( dom f );
then i in ( Seg ( len gg ) ) by A10,A11,FINSEQ_1:def 3;
then i in ( dom gg ) by FINSEQ_1:def 3;
then A15: ( G . i ) = ( gg . i ) by FUNCT_1:47;
i in ( Seg ( len h ) ) by A10,A9,A14,FINSEQ_1:def 3;
then i in ( dom h ) by FINSEQ_1:def 3;
then A16: ( H . i ) = ( h . i ) by FUNCT_1:47;
( F . i ) = ( f . i ) by A14,FUNCT_1:47;
hence ( h . i ) = ( g . (( f . i ),( gg . i )) ) by A8,A14,A15,A16,A13;
end;
now
per cases  by NAT_1:14;
suppose A17: ( len f ) >= 1;

A18: ( rng H ) c= D by FINSEQ_1:def 4;
A19: (( rng F ) c= D & ( rng G ) c= D) by FINSEQ_1:def 4;
A20: ( k + 1 ) in ( Seg ( k + 1 ) ) by FINSEQ_1:4;
then ( k + 1 ) in ( dom G ) by A5,A6,FINSEQ_1:def 3;
then A21: ( G . ( k + 1 ) ) in ( rng G ) by FUNCT_1:def 3;
( k + 1 ) in ( dom H ) by A5,A7,A20,FINSEQ_1:def 3;
then A22: ( H . ( k + 1 ) ) in ( rng H ) by FUNCT_1:def 3;
A23: ( k + 1 ) in ( dom F ) by A5,A20,FINSEQ_1:def 3;
then ( F . ( k + 1 ) ) in ( rng F ) by FUNCT_1:def 3;
then reconsider d = ( F . ( k + 1 ) ),d1 = ( G . ( k + 1 ) ),d2 = ( H . ( k + 1 ) ) as (Element of D) by A21,A22,A19,A18;
A24: d2 = ( g . (( F . ( k + 1 ) ),( G . ( k + 1 ) )) ) by A8,A23;
F = ( f ^ <* d *> ) by A5,FINSEQ_3:55;
then A25: ( g "**" F ) = ( g . (( g "**" f ),d) ) by A17,CKB15:1;
G = ( gg ^ <* d1 *> ) by A5,A6,FINSEQ_3:55;
then A26: ( g "**" G ) = ( g . (( g "**" gg ),d1) ) by A10,A11,A17,CKB15:1;
A27: H = ( h ^ <* d2 *> ) by A5,A7,FINSEQ_3:55;
( g "**" h ) = ( g . (( g "**" f ),( g "**" gg )) ) by A4,A10,A11,A9,A12,A17;
hence ( g "**" H ) = ( g . (( g . (( g "**" f ),( g "**" gg )) ),( g . (d,d1) )) ) by A10,A9,A17,A27,A24,CKB15:1
.= ( g . (( g . (( g . (( g "**" f ),( g "**" gg )) ),d) ),d1) ) by A1,BINOP_1:def 3
.= ( g . (( g . (( g "**" f ),( g . (( g "**" gg ),d) )) ),d1) ) by A1,BINOP_1:def 3
.= ( g . (( g . (( g "**" f ),( g . (d,( g "**" gg )) )) ),d1) ) by A2,BINOP_1:def 2
.= ( g . (( g . (( g "**" F ),( g "**" gg )) ),d1) ) by A1,A25,BINOP_1:def 3
.= ( g . (( g "**" F ),( g "**" G )) ) by A1,A26,BINOP_1:def 3;
end;
suppose A28: ( len f ) = ( 0 );

then A29: (( g "**" G ) = ( G . 1 ) & 1 in ( dom F )) by A5,A6,A10,CKB24:1,FINSEQ_3:25;
(( g "**" H ) = ( H . 1 ) & ( g "**" F ) = ( F . 1 )) by A5,A7,A10,A28,CKB24:1;
hence thesis by A8,A29;
end;
end;
hence thesis;
end;

end;
assume A30: ((( len F ) >= 1 & ( len F ) = ( len G )) & ( len F ) = ( len H ));
A31: P[ ( 0 ) ];
(for k holds P[ k ]) from NAT_1:sch 1(A31,A3);
hence thesis by A30;
end;
