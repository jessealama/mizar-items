environ
vocabularies NUMBERS,SUPINF_1,PROB_1,XBOOLE_0,SETFAM_1,FUNCT_1,SUBSET_1,TARSKI,RELAT_1,CARD_1,ARYTM_3,NAT_1,XXREAL_0,ZFMISC_1,MEASURE1,SUPINF_2,VALUED_0,FUNCOP_1,XREAL_0,ARYTM_1,REAL_1,MEASURE3,MEASURE4;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,NUMBERS,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XXREAL_0,XREAL_0,VALUED_0,FUNCOP_1,REAL_1,NAT_1,SETFAM_1,PROB_1,SUPINF_1,SUPINF_2,MEASURE1,MEASURE3;
definitions TARSKI,MEASURE3,XBOOLE_0;
theorems TARSKI,ENUMSET1,FUNCT_1,FUNCT_2,ZFMISC_1,NAT_1,SUPINF_2,MEASURE1,MEASURE2,MEASURE3,XBOOLE_0,XBOOLE_1,XXREAL_0,PROB_1,ORDINAL1,VALUED_0,XXREAL_3,FUNCOP_1,CKB1;
schemes NAT_1,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FUNCT_2,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEASURE1,VALUED_0,MEMBERED;
constructors ENUMSET1,PARTFUN1,REAL_1,NAT_1,PROB_2,MEASURE3,SUPINF_1,FUNCOP_1,RELSET_1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve X for set;
reserve S for (SigmaField of X);
theorem
Th5: (for S being non  empty (Subset-Family of X) holds (for F,G being (Function of ( NAT ),S) holds ((( G . ( 0 ) ) = ( F . ( 0 ) ) & (for n being (Element of ( NAT )) holds ( G . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \/ ( G . n ) ))) implies (for H being (Function of ( NAT ),S) holds ((( H . ( 0 ) ) = ( F . ( 0 ) ) & (for n being (Element of ( NAT )) holds ( H . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \ ( G . n ) ))) implies ( union ( rng F ) ) = ( union ( rng H ) ))))))
proof
let S being non  empty (Subset-Family of X);
let F being (Function of ( NAT ),S);
let G being (Function of ( NAT ),S);
assume that
A1: ( G . ( 0 ) ) = ( F . ( 0 ) )
and
A2: (for n being (Element of ( NAT )) holds ( G . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \/ ( G . n ) ));
let H being (Function of ( NAT ),S);
assume that
A3: ( H . ( 0 ) ) = ( F . ( 0 ) )
and
A4: (for n being (Element of ( NAT )) holds ( H . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \ ( G . n ) ));
thus ( union ( rng F ) ) c= ( union ( rng H ) )
proof
let r being set;
assume r in ( union ( rng F ) );
then consider E being set such that A5: r in E and A6: E in ( rng F ) by TARSKI:def 4;
A7: (ex s being set st (s in ( dom F ) & E = ( F . s ))) by A6,FUNCT_1:def 3;
(ex s1 being (Element of ( NAT )) st r in ( H . s1 ))
proof
defpred P[ Nat ]
 means
r in ( F . $1 );
A8: (ex k being Nat st P[ k ]) by A5,A7;
(ex k being Nat st (P[ k ] & (for n being Nat holds (P[ n ] implies k <= n)))) from NAT_1:sch 5(A8);
then consider k being Nat such that A9: r in ( F . k ) and A10: (for n being Nat holds (r in ( F . n ) implies k <= n));
A11: ((ex l being Nat st k = ( l + 1 )) implies (ex s1 being (Element of ( NAT )) st r in ( H . s1 )))
proof
given l being Nat such that
A12: k = ( l + 1 );

take k;
reconsider l as (Element of ( NAT )) by ORDINAL1:def 12;
A13: (not r in ( G . l ))
proof
assume r in ( G . l );
then consider i being (Element of ( NAT )) such that A14: i <= l and A15: r in ( F . i ) by A1,A2,MEASURE2:5;
k <= i by A10,A15;
hence thesis by A12,A14,NAT_1:13;
end;
( H . ( l + 1 ) ) = ( ( F . ( l + 1 ) ) \ ( G . l ) ) by A4;
hence thesis by A9,A12,A13,XBOOLE_0:def 5;
end;
(k = ( 0 ) implies (ex s1 being (Element of ( NAT )) st r in ( H . s1 ))) by A3,A9;
hence thesis by A11,NAT_1:6;
end;
then consider s1 being (Element of ( NAT )) such that A16: r in ( H . s1 );
( H . s1 ) in ( rng H ) by FUNCT_2:4;
hence thesis by A16,TARSKI:def 4;
end;

A17: (for n being (Element of ( NAT )) holds ( H . n ) c= ( F . n ))
proof
let n being (Element of ( NAT ));
A18: ((ex k being Nat st n = ( k + 1 )) implies ( H . n ) c= ( F . n ))
proof
given k being Nat such that
A19: n = ( k + 1 );

reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
( H . n ) = ( ( F . n ) \ ( G . k ) ) by A4,A19;
hence thesis;
end;
(n = ( 0 ) implies ( H . n ) c= ( F . n )) by A3;
hence thesis by A18,NAT_1:6;
end;
( union ( rng H ) ) c= ( union ( rng F ) )
proof
let r being set;
assume r in ( union ( rng H ) );
then consider E being set such that A20: r in E and A21: E in ( rng H ) by TARSKI:def 4;
consider s being set such that A22: s in ( dom H ) and A23: E = ( H . s ) by A21,FUNCT_1:def 3;
reconsider s as (Element of ( NAT )) by A22;
A24: ( F . s ) in ( rng F ) by FUNCT_2:4;
E c= ( F . s ) by A17,A23;
hence thesis by A20,A24,TARSKI:def 4;
end;
hence thesis;
end;
