environ
vocabularies ORDERS_2,XBOOLE_0,SUBSET_1,ORDERS_1,XXREAL_0,YELLOW_1,RELAT_2,WELLORD2,RELAT_1,TARSKI,TREES_1,EQREL_1,TAXONOM1,SETFAM_1,ZFMISC_1,ABIAN,PRE_TOPC,LATTICES,ORDINAL1,PARTIT1,TAXONOM2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,ORDINAL1,RELSET_1,STRUCT_0,ORDERS_2,EQREL_1,ABIAN,PARTIT1,ORDERS_1,YELLOW_1,TAXONOM1,CKB1,CKB2,CKB5,CKB10,CKB15,CKB16,CKB21,CKB24,CKB26;
definitions TARSKI,EQREL_1,TAXONOM1,SETFAM_1,XBOOLE_0,CKB1,CKB2,CKB10,CKB15,CKB16,CKB21,CKB24,CKB26;
theorems TARSKI,TAXONOM1,PARTIT1,EQREL_1,ZFMISC_1,ORDERS_2,ORDERS_1,RELAT_1,RELSET_1,SETFAM_1,REALSET1,ABIAN,YELLOW_1,WELLORD2,ORDINAL1,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10,CKB13,CKB14,CKB15,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELSET_1,EQREL_1,YELLOW_1,CKB4,CKB11,CKB12,CKB17,CKB23;
constructors SETFAM_1,REALSET1,ABIAN,YELLOW_1,TAXONOM1,RELSET_1,CKB1,CKB2,CKB10,CKB15,CKB16,CKB21,CKB24,CKB26;
requirements BOOLE,SUBSET;
begin
reserve X for non  empty set;
reserve PX for set;
reserve PY for set;
reserve PZ for set;
reserve a for set;
reserve x for set;
reserve y for set;
Lm4:now
let x being non  empty set;
A1: (ex a being set st a in x) by XBOOLE_0:def 1;
let y;
assume x c= y;
hence x meets y by A1,XBOOLE_0:3;
end;
theorem
(for H being  covering  T_3 (Hierarchy of X) holds (((H is  lower-bounded & (not ( {} ) in H)) & (for C1 being set holds (((C1 <> ( {} ) & C1 c= ( PARTITIONS X )) & (for P1,P2 being set holds ((P1 in C1 & P2 in C1) implies (P1 is_finer_than P2 or P2 is_finer_than P1)))) implies (ex PX st (ex PY st ((PX in C1 & PY in C1) & (for PZ holds (PZ in C1 implies (PZ is_finer_than PY & PX is_finer_than PZ))))))))) implies (ex C being (Classification of X) st ( union C ) = H)))
proof
let H being  covering  T_3 (Hierarchy of X);
assume that
A1: H is  lower-bounded
and
A2: (not ( {} ) in H)
and
A3: (for C1 being set holds (((C1 <> ( {} ) & C1 c= ( PARTITIONS X )) & (for P1,P2 being set holds ((P1 in C1 & P2 in C1) implies (P1 is_finer_than P2 or P2 is_finer_than P1)))) implies (ex PX st (ex PY st ((PX in C1 & PY in C1) & (for PZ holds (PZ in C1 implies (PZ is_finer_than PY & PX is_finer_than PZ))))))));
( union H ) = X by ABIAN:4;
then consider h being set such that A4: h in H by XBOOLE_0:def 1,ZFMISC_1:2;
reconsider h as (Subset of X) by A4;
consider PX being (a_partition of X) such that h in PX and A5: PX c= H by A1,A2,A4,CKB31:1;
set L = { PX };
A6: L c= ( PARTITIONS X )
proof
let l being set;
assume l in L;
then l = PX by TARSKI:def 1;
hence thesis by PARTIT1:def 3;
end;
A7:now
let P1 being set;
let P2 being set;
assume that
A8: P1 in L
and
A9: P2 in L;
P1 = PX by A8,TARSKI:def 1;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A9,TARSKI:def 1;
end;
A10: H is  hierarchic by CKB15:def 1;
defpred X[ set ]
 means
((for P being set holds (P in $1 implies P c= H)) & (for P1,P2 being set holds ((P1 in $1 & P2 in $1) implies (P1 is_finer_than P2 or P2 is_finer_than P1))));
consider RL being set such that A11: (for L being set holds (L in RL iff (L in ( bool ( PARTITIONS X ) ) & X[ L ]))) from XBOOLE_0:sch 1;
(for a holds (a in L implies a c= H)) by A5,TARSKI:def 1;
then A12: L in RL by A11,A6,A7;
now
let Z being set;
assume that
A13: Z c= RL
and
A14: Z is  c=-linear;
set Y = ( union Z );
A15:now
let X1 being set;
let X2 being set;
assume that
A16: X1 in Z
and
A17: X2 in Z;
X1,X2 are_c=-comparable  by A14,A16,A17,ORDINAL1:def 8;
hence (X1 c= X2 or X2 c= X1) by XBOOLE_0:def 9;
end;
A18:now
let P1 being set;
let P2 being set;
assume that
A19: P1 in Y
and
A20: P2 in Y;
consider L1 being set such that A21: P1 in L1 and A22: L1 in Z by A19,TARSKI:def 4;
consider L2 being set such that A23: P2 in L2 and A24: L2 in Z by A20,TARSKI:def 4;
per cases  by A15,A22,A24;
suppose L1 c= L2;

hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A11,A13,A21,A23,A24;
end;
suppose L2 c= L1;

hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A11,A13,A21,A22,A23;
end;
end;
take Y;
A25:now
let P being set;
assume P in Y;
then (ex L3 being set st (P in L3 & L3 in Z)) by TARSKI:def 4;
hence P c= H by A11,A13;
end;
Y c= ( PARTITIONS X )
proof
let P being set;
assume P in Y;
then consider L4 being set such that A26: P in L4 and A27: L4 in Z by TARSKI:def 4;
L4 in ( bool ( PARTITIONS X ) ) by A11,A13,A27;
hence thesis by A26;
end;
hence Y in RL by A11,A25,A18;
thus (for X1 being set holds (X1 in Z implies X1 c= Y)) by ZFMISC_1:74;
end;
then consider C being set such that A28: C in RL and A29: (for Z being set holds ((Z in RL & Z <> C) implies (not C c= Z))) by A12,ORDERS_1:65;
reconsider C as (Subset of ( PARTITIONS X )) by A11,A28;
A30: C is (Classification of X)
proof
let P1 being (a_partition of X);
let P2 being (a_partition of X);
assume that
A31: P1 in C
and
A32: P2 in C;
thus thesis by A11,A28,A31,A32;
end;
A33: C <> ( {} ) by A12,A29,XBOOLE_1:2;
A34: H c= ( union C )
proof
let h being set;
assume that
A35: h in H;
per cases ;
suppose A36: (not h in ( union C ));

defpred X[ set ]
 means
(ex hx being set st ((hx in $1 & h c= hx) & h <> hx));
consider Ca being set such that A37: (for p being set holds (p in Ca iff (p in C & X[ p ]))) from XBOOLE_0:sch 1;
A38: Ca c= C
proof
let s being set;
assume s in Ca;
hence thesis by A37;
end;
defpred X[ set ]
 means
(ex hx being set st ((hx in $1 & hx c= h) & h <> hx));
consider Cb being set such that A39: (for p being set holds (p in Cb iff (p in C & X[ p ]))) from XBOOLE_0:sch 1;
consider PS being (a_partition of X) such that A40: h in PS and A41: PS c= H by A1,A2,A35,CKB31:1;
A42: h <> ( {} ) by A40,EQREL_1:def 4;
A43:now
consider t being set such that A44: t in h by A42,XBOOLE_0:def 1;
let p being set;
assume p in C;
then p is (a_partition of X) by PARTIT1:def 3;
then ( union p ) = X by EQREL_1:def 4;
then consider v being set such that A45: t in v and A46: v in p by A35,A44,TARSKI:def 4;
assume A47: (for hv being set holds (hv in p implies hv misses h));
(not v misses h) by A44,A45,XBOOLE_0:3;
hence contradiction by A47,A46;
end;
A48: C c= ( Ca \/ Cb )
proof
let p being set;
assume that
A49: p in C;
consider hv being set such that A50: hv in p and A51: (not hv misses h) by A43,A49;
A52: h <> hv by A36,A49,A50,TARSKI:def 4;
A53: p c= H by A11,A28,A49;
per cases  by A10,A35,A50,A51,A53,CKB10:def 1;
suppose hv c= h;

then p in Cb by A39,A49,A50,A52;
hence thesis by XBOOLE_0:def 3;
end;
suppose h c= hv;

then p in Ca by A37,A49,A50,A52;
hence thesis by XBOOLE_0:def 3;
end;
end;
Cb c= C
proof
let s being set;
assume s in Cb;
hence thesis by A39;
end;
then ( Ca \/ Cb ) c= C by A38,XBOOLE_1:8;
then A54: C = ( Ca \/ Cb ) by A48,XBOOLE_0:def 10;
then A55: Ca c= C by XBOOLE_1:7;
A56:now
let P1 being set;
let P2 being set;
assume that
A57: P1 in Ca
and
A58: P2 in Ca;
P2 in C by A55,A58;
then A59: P2 is (a_partition of X) by PARTIT1:def 3;
P1 in C by A55,A57;
then P1 is (a_partition of X) by PARTIT1:def 3;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A30,A55,A57,A58,A59,TAXONOM1:def 1;
end;
A60: Cb c= C by A54,XBOOLE_1:7;
A61:now
let P1 being set;
let P2 being set;
assume that
A62: P1 in Cb
and
A63: P2 in Cb;
P2 in C by A60,A63;
then A64: P2 is (a_partition of X) by PARTIT1:def 3;
P1 in C by A60,A62;
then P1 is (a_partition of X) by PARTIT1:def 3;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A30,A60,A62,A63,A64,TAXONOM1:def 1;
end;
now
per cases ;
suppose A65: Cb <> ( {} );

defpred X[ set ]
 means
$1 misses h;
A66: { h } c= H
proof
let s being set;
assume s in { h };
hence thesis by A35,TARSKI:def 1;
end;
consider PX,Pmax being set such that PX in Cb and A67: Pmax in Cb and A68: (for PZ holds (PZ in Cb implies (PZ is_finer_than Pmax & PX is_finer_than PZ))) by A3,A60,A61,A65,XBOOLE_1:1;
consider Pb being set such that A69: (for x holds (x in Pb iff (x in Pmax & X[ x ]))) from XBOOLE_0:sch 1;
set PS1 = ( Pb \/ { h } );
set C1 = ( C \/ { PS1 } );
Pmax in C by A60,A67;
then A70: Pmax is (a_partition of X) by PARTIT1:def 3;
A71: Pmax c= H by A11,A28,A60,A67;
then A72: (for a holds (a in Pmax implies ((a c= h or h c= a) or h misses a))) by A10,A35,CKB10:def 1;
Pb c= Pmax
proof
let s being set;
assume s in Pb;
hence thesis by A69;
end;
then Pb c= H by A71,XBOOLE_1:1;
then A73: PS1 c= H by A66,XBOOLE_1:8;
A74:now
let P3 being set;
assume A75: P3 in C1;
per cases  by A75,XBOOLE_0:def 3;
suppose P3 in C;

hence P3 c= H by A11,A28;
end;
suppose P3 in { PS1 };

hence P3 c= H by A73,TARSKI:def 1;
end;
end;
PS1 in { PS1 } by TARSKI:def 1;
then A76: PS1 in C1 by XBOOLE_0:def 3;
h in { h } by TARSKI:def 1;
then A77: h in PS1 by XBOOLE_0:def 3;
A78: (ex hx being set st ((hx in Pmax & hx c= h) & h <> hx)) by A39,A67;
then A79: Pmax is_finer_than PS1 by A35,A42,A70,A69,A72,CKB33:1;
A80:now
let P3 being set;
assume that
A81: P3 in C;
per cases ;
suppose Ca = ( {} );

then P3 is_finer_than Pmax by A48,A68,A81;
hence (PS1 is_finer_than P3 or P3 is_finer_than PS1) by A79,SETFAM_1:17;
end;
suppose A82: Ca <> ( {} );

now
per cases  by A48,A81,XBOOLE_0:def 3;
suppose A83: P3 in Ca;

consider Pmin,PY being set such that A84: Pmin in Ca and PY in Ca and A85: (for PZ holds (PZ in Ca implies (PZ is_finer_than PY & Pmin is_finer_than PZ))) by A3,A55,A56,A82,XBOOLE_1:1;
A86: Pmin is_finer_than P3 by A83,A85;
A87:now
consider hx being set such that A88: hx in Pmin and A89: h c= hx and A90: h <> hx by A37,A84;
assume Pmin is_finer_than Pmax;
then consider hz being set such that A91: hz in Pmax and A92: hx c= hz by A88,SETFAM_1:def 2;
consider hy being set such that A93: hy in Pmax and A94: hy c= h and h <> hy by A39,A67;
A95: hy is non  empty by A70,A93,EQREL_1:def 4;
hy c= hx by A89,A94,XBOOLE_1:1;
then hy meets hz by A92,A95,Lm4,XBOOLE_1:1;
then hy = hz by A70,A93,A91,EQREL_1:def 4;
then hx c= h by A94,A92,XBOOLE_1:1;
hence contradiction by A89,A90,XBOOLE_0:def 10;
end;
A96: Pmax in C by A54,A67,XBOOLE_0:def 3;
then A97: Pmax is (a_partition of X) by PARTIT1:def 3;
Pmin in C by A55,A84;
then A98: Pmin is (a_partition of X) by PARTIT1:def 3;
A99: (ex hw being set st ((hw in Pmin & h c= hw) & h <> hw)) by A37,A84;
A100: Pmin in C by A54,A84,XBOOLE_0:def 3;
then Pmin is (a_partition of X) by PARTIT1:def 3;
then Pmax is_finer_than Pmin by A30,A100,A96,A97,A87,TAXONOM1:def 1;
then PS1 is_finer_than Pmin by A35,A42,A70,A69,A72,A78,A98,A99,CKB33:1;
hence (PS1 is_finer_than P3 or P3 is_finer_than PS1) by A86,SETFAM_1:17;
end;
suppose P3 in Cb;

then P3 is_finer_than Pmax by A68;
hence (PS1 is_finer_than P3 or P3 is_finer_than PS1) by A79,SETFAM_1:17;
end;
end;
hence (PS1 is_finer_than P3 or P3 is_finer_than PS1);
end;
end;
A101:now
let P1 being set;
let P2 being set;
assume that
A102: P1 in C1
and
A103: P2 in C1;
per cases  by A102,XBOOLE_0:def 3;
suppose A104: P1 in C;

per cases  by A103,XBOOLE_0:def 3;
suppose A105: P2 in C;

then A106: P2 is (a_partition of X) by PARTIT1:def 3;
P1 is (a_partition of X) by A104,PARTIT1:def 3;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A30,A104,A105,A106,TAXONOM1:def 1;
end;
suppose P2 in { PS1 };

then P2 = PS1 by TARSKI:def 1;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A80,A104;
end;
end;
suppose P1 in { PS1 };

then A107: P1 = PS1 by TARSKI:def 1;
per cases  by A103,XBOOLE_0:def 3;
suppose P2 in C;

hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A80,A107;
end;
suppose P2 in { PS1 };

hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A107,TARSKI:def 1;
end;
end;
end;
A108: PS1 is (a_partition of X) by A35,A42,A70,A69,A72,A78,CKB33:1;
{ PS1 } c= ( PARTITIONS X )
proof
let s being set;
assume s in { PS1 };
then s = PS1 by TARSKI:def 1;
hence thesis by A108,PARTIT1:def 3;
end;
then C1 c= ( PARTITIONS X ) by XBOOLE_1:8;
then C1 in RL by A11,A74,A101;
then C = C1 by A29,XBOOLE_1:7;
hence thesis by A77,A76,TARSKI:def 4;
end;
suppose A109: Cb = ( {} );

then consider Pmin,PY being set such that A110: Pmin in Ca and PY in Ca and A111: (for PZ holds (PZ in Ca implies (PZ is_finer_than PY & Pmin is_finer_than PZ))) by A3,A33,A54,A56;
consider hw being set such that A112: hw in Pmin and A113: h c= hw and h <> hw by A37,A110;
defpred X[ set ]
 means
$1 c= hw;
consider PT being set such that A114: (for a holds (a in PT iff (a in PS & X[ a ]))) from XBOOLE_0:sch 1;
set PS1 = ( PT \/ ( Pmin \ { hw } ) );
set C1 = ( C \/ { PS1 } );
PT c= PS
proof
let s being set;
assume s in PT;
hence thesis by A114;
end;
then A115: PT c= H by A41,XBOOLE_1:1;
A116: Pmin c= H by A11,A28,A55,A110;
then ( Pmin \ { hw } ) c= H by XBOOLE_1:1;
then A117: PS1 c= H by A115,XBOOLE_1:8;
A118:now
let P3 being set;
assume A119: P3 in C1;
per cases  by A119,XBOOLE_0:def 3;
suppose P3 in C;

hence P3 c= H by A11,A28;
end;
suppose P3 in { PS1 };

hence P3 c= H by A117,TARSKI:def 1;
end;
end;
Pmin in C by A55,A110;
then A120: Pmin is (a_partition of X) by PARTIT1:def 3;
A121: (for a holds (a in PS implies ((a c= hw or hw c= a) or hw misses a))) by A10,A41,A116,A112,CKB10:def 1;
then A122: PS1 is_finer_than Pmin by A40,A42,A120,A112,A113,A114,CKB32:1;
A123:now
let P3 being set;
assume P3 in C;
then Pmin is_finer_than P3 by A48,A109,A111;
hence (PS1 is_finer_than P3 or P3 is_finer_than PS1) by A122,SETFAM_1:17;
end;
A124:now
let P1 being set;
let P2 being set;
assume that
A125: P1 in C1
and
A126: P2 in C1;
per cases  by A125,XBOOLE_0:def 3;
suppose A127: P1 in C;

per cases  by A126,XBOOLE_0:def 3;
suppose A128: P2 in C;

then A129: P2 is (a_partition of X) by PARTIT1:def 3;
P1 is (a_partition of X) by A127,PARTIT1:def 3;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A30,A127,A128,A129,TAXONOM1:def 1;
end;
suppose P2 in { PS1 };

then P2 = PS1 by TARSKI:def 1;
hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A123,A127;
end;
end;
suppose P1 in { PS1 };

then A130: P1 = PS1 by TARSKI:def 1;
per cases  by A126,XBOOLE_0:def 3;
suppose P2 in C;

hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A123,A130;
end;
suppose P2 in { PS1 };

hence (P1 is_finer_than P2 or P2 is_finer_than P1) by A130,TARSKI:def 1;
end;
end;
end;
A131: PS1 is (a_partition of X) by A40,A42,A120,A112,A113,A114,A121,CKB32:1;
{ PS1 } c= ( PARTITIONS X )
proof
let s being set;
assume s in { PS1 };
then s = PS1 by TARSKI:def 1;
hence thesis by A131,PARTIT1:def 3;
end;
then C1 c= ( PARTITIONS X ) by XBOOLE_1:8;
then C1 in RL by A11,A118,A124;
then A132: C = C1 by A29,XBOOLE_1:7;
A133: PT c= PS1 by XBOOLE_1:7;
A134: PS1 in { PS1 } by TARSKI:def 1;
A135: { PS1 } c= C1 by XBOOLE_1:7;
h in PT by A40,A113,A114;
hence thesis by A133,A135,A134,A132,TARSKI:def 4;
end;
end;
hence thesis;
end;
suppose h in ( union C );

hence thesis;
end;
end;
take C;
( union C ) c= H
proof
let h being set;
assume h in ( union C );
then consider P being set such that A136: h in P and A137: P in C by TARSKI:def 4;
P c= H by A11,A28,A137;
hence thesis by A136;
end;
hence thesis by A30,A34,XBOOLE_0:def 10;
end;
