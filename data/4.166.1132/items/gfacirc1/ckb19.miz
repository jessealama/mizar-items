environ
vocabularies NUMBERS,SUBSET_1,MARGREL1,FUNCT_1,FINSEQ_2,FINSEQ_1,XBOOLEAN,TWOSCOMP,CARD_1,RELAT_1,ORDINAL4,TARSKI,XBOOLE_0,CLASSES1,FSM_1,FACIRC_1,CIRCUIT2,MSAFREE2,CIRCCOMB,STRUCT_0,GLIB_000,MSUALG_1,FUNCT_4,LATTICES,CIRCUIT1,PARTFUN1,ARYTM_3,GFACIRC1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,NAT_1,RELAT_1,NUMBERS,STRUCT_0,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,MARGREL1,CLASSES1,BINARITH,MSUALG_1,MSAFREE2,CIRCUIT1,CIRCUIT2,CIRCCOMB,FACIRC_1,TWOSCOMP,CKB4,CKB6,CKB8,CKB10;
definitions TARSKI,XBOOLE_0,CIRCUIT2,FACIRC_1,MSAFREE2,XBOOLEAN,CKB4,CKB6,CKB8,CKB10;
theorems TARSKI,XBOOLE_0,XBOOLE_1,ZFMISC_1,ENUMSET1,RELAT_1,ORDINAL1,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_6,BINARITH,CIRCUIT1,CIRCUIT2,CIRCCOMB,FACIRC_1,TWOSCOMP,CIRCCMB2,FACIRC_2,XBOOLEAN,CLASSES1,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes FUNCT_2,FACIRC_1,CKB1,CKB2,CKB3;
registrations RELAT_1,MARGREL1,FINSEQ_2,CARD_3,STRUCT_0,CIRCCOMB,FACIRC_1,ORDINAL1,FINSEQ_1,FUNCT_1,MSAFREE2;
constructors ENUMSET1,XXREAL_0,CLASSES1,BINARITH,CIRCUIT1,CIRCUIT2,FACIRC_1,TWOSCOMP,NAT_1,RELSET_1,CKB4,CKB6,CKB8,CKB10;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Lm3: (for f being (Function of ( 2 -tuples_on ( BOOLEAN ) ),( BOOLEAN )) holds (for x,y,c being set holds (c <> [ <* x,y *>,f ] implies (for s being (State of ( 2GatesCircuit (x,y,c,f) )) holds ((((( ( Following s ) . ( 2GatesCircOutput (x,y,c,f) ) ) = ( f . <* ( s . [ <* x,y *>,f ] ),( s . c ) *> ) & ( ( Following s ) . [ <* x,y *>,f ] ) = ( f . <* ( s . x ),( s . y ) *> )) & ( ( Following s ) . x ) = ( s . x )) & ( ( Following s ) . y ) = ( s . y )) & ( ( Following s ) . c ) = ( s . c ))))))
proof
let f being (Function of ( 2 -tuples_on ( BOOLEAN ) ),( BOOLEAN ));
let x being set,y being set,c being set;
assume that
A1: c <> [ <* x,y *>,f ];
set S = ( 2GatesCircStr (x,y,c,f) );
A2: ( InputVertices S ) = { x,y,c } by A1,FACIRC_1:57;
then A3: c in ( InputVertices S ) by ENUMSET1:def 1;
set xyf = [ <* x,y *>,f ];
set p = <* xyf,c *>;
set S2 = ( 1GateCircStr (p,f) );
set A2 = ( 1GateCircuit (xyf,c,f) );
( InnerVertices S ) = { xyf,( 2GatesCircOutput (x,y,c,f) ) } by FACIRC_1:56;
then reconsider xyf as (Element of ( InnerVertices S )) by TARSKI:def 2;
set A = ( 2GatesCircuit (x,y,c,f) );
let s being (State of A);
set S1 = ( 1GateCircStr (<* x,y *>,f) );
set A1 = ( 1GateCircuit (x,y,f) );
reconsider s1 = ( s | (the carrier of S1) ) as (State of A1) by FACIRC_1:26;
reconsider s2 = ( s | (the carrier of S2) ) as (State of A2) by FACIRC_1:26;
A4: ( dom s2 ) = (the carrier of S2) by CIRCUIT1:3;
A5: ( rng p ) = { xyf,c } by FINSEQ_2:127;
then c in ( rng p ) by TARSKI:def 2;
then A6: c in ( InputVertices S2 ) by CIRCCOMB:42;
xyf in ( rng p ) by A5,TARSKI:def 2;
then xyf in ( InputVertices S2 ) by CIRCCOMB:42;
then reconsider xyf9 = xyf,c9 = c as (Vertex of S2) by A6;
reconsider v2 = [ p,f ] as (Element of ( InnerVertices S2 )) by FACIRC_1:47;
reconsider xyf1 = xyf as (Element of ( InnerVertices S1 )) by FACIRC_1:47;
reconsider vx = x,vy = y as (Vertex of S1) by FACIRC_1:43;
A7: ( dom s1 ) = (the carrier of S1) by CIRCUIT1:3;
thus ( ( Following s ) . ( 2GatesCircOutput (x,y,c,f) ) ) = ( ( Following s2 ) . v2 ) by CIRCCOMB:64
.= ( f . <* ( s2 . xyf9 ),( s2 . c9 ) *> ) by FACIRC_1:50
.= ( f . <* ( s . [ <* x,y *>,f ] ),( s2 . c9 ) *> ) by A4,FUNCT_1:47
.= ( f . <* ( s . [ <* x,y *>,f ] ),( s . c ) *> ) by A4,FUNCT_1:47;
thus ( ( Following s ) . [ <* x,y *>,f ] ) = ( ( Following s1 ) . xyf1 ) by CIRCCOMB:64
.= ( f . <* ( s1 . vx ),( s1 . vy ) *> ) by FACIRC_1:50
.= ( f . <* ( s . x ),( s1 . vy ) *> ) by A7,FUNCT_1:47
.= ( f . <* ( s . x ),( s . y ) *> ) by A7,FUNCT_1:47;
(x in ( InputVertices S ) & y in ( InputVertices S )) by A2,ENUMSET1:def 1;
hence thesis by A3,CIRCUIT2:def 5;
end;
