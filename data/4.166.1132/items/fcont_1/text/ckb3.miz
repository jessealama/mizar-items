environ
vocabularies NUMBERS,SUBSET_1,XREAL_0,ORDINAL1,SEQ_1,PARTFUN1,RELAT_1,TARSKI,SEQ_2,ORDINAL2,FUNCT_2,FUNCT_1,XBOOLE_0,XXREAL_0,NAT_1,ARYTM_3,CARD_1,COMPLEX1,ARYTM_1,REAL_1,RCOMP_1,XXREAL_1,VALUED_1,ORDINAL4,ZFMISC_1,VALUED_0,SEQ_4,XXREAL_2,SQUARE_1,SEQM_3,FCONT_1,JGRAPH_2;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,ORDINAL1,ZFMISC_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SEQ_4,SQUARE_1,PARTFUN2,RFUNCT_1,RCOMP_1,RECDEF_1,RFUNCT_2,CKB1;
definitions TARSKI,XBOOLE_0,SQUARE_1,RELAT_1,FUNCT_1,VALUED_1,CKB1;
theorems TARSKI,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,ABSVALUE,SEQ_1,SEQ_2,SEQM_3,SEQ_4,PARTFUN1,XREAL_0,PARTFUN2,RFUNCT_1,RFUNCT_2,RCOMP_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,VALUED_1,XXREAL_1,MEMBERED,XXREAL_2,VALUED_0,CKB1,CKB2;
schemes NAT_1,RECDEF_1,FUNCT_2;
registrations XBOOLE_0,ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,RCOMP_1,RFUNCT_2,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,RELAT_1,RFUNCT_1,SEQ_2,FUNCT_1,ZFMISC_1;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,VALUED_1,SEQ_2,SEQM_3,SEQ_4,RCOMP_1,PARTFUN2,RFUNCT_1,RFUNCT_2,SEQ_1,RECDEF_1,RELSET_1,CKB1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve x for set;
reserve p for  real number;
reserve x0 for  real number;
reserve s1 for Real_Sequence;
reserve s2 for Real_Sequence;
reserve f for (PartFunc of ( REAL ),( REAL ));
theorem
(f is_continuous_in x0 iff (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f . x0 ) = ( lim ( f /* s1 ) )))))
proof
thus (f is_continuous_in x0 implies (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f . x0 ) = ( lim ( f /* s1 ) ))))) by CKB1:def 1;
assume A1: (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f . x0 ) = ( lim ( f /* s1 ) ))));
let s2;
assume that
A2: ( rng s2 ) c= ( dom f )
and
A3: (s2 is  convergent & ( lim s2 ) = x0);
now
per cases ;
suppose (ex n st (for m holds (n <= m implies ( s2 . m ) = x0)));

then consider N being (Element of ( NAT )) such that A4: (for m holds (N <= m implies ( s2 . m ) = x0));
A5: (for n holds ( ( s2 ^\ N ) . n ) = x0)
proof
let n;
( s2 . ( n + N ) ) = x0 by A4,NAT_1:12;
hence thesis by NAT_1:def 3;
end;
A6: ( f /* ( s2 ^\ N ) ) = ( ( f /* s2 ) ^\ N ) by A2,VALUED_0:27;
A7: ( rng ( s2 ^\ N ) ) c= ( rng s2 ) by VALUED_0:21;
A8:now
let p being  real number;
assume that
A9: p > ( 0 );
take n = ( 0 );
let m;
assume that
n <= m;
( abs ( ( ( f /* ( s2 ^\ N ) ) . m ) - ( f . x0 ) ) ) = ( abs ( ( f . ( ( s2 ^\ N ) . m ) ) - ( f . x0 ) ) ) by A2,A7,FUNCT_2:108,XBOOLE_1:1
.= ( abs ( ( f . x0 ) - ( f . x0 ) ) ) by A5
.= ( 0 ) by ABSVALUE:2;
hence ( abs ( ( ( f /* ( s2 ^\ N ) ) . m ) - ( f . x0 ) ) ) < p by A9;
end;
then A10: ( f /* ( s2 ^\ N ) ) is  convergent by SEQ_2:def 6;
then ( f . x0 ) = ( lim ( ( f /* s2 ) ^\ N ) ) by A8,A6,SEQ_2:def 7;
hence thesis by A10,A6,SEQ_4:20,SEQ_4:21;
end;
suppose A11: (for n holds (ex m st (n <= m & ( s2 . m ) <> x0)));

defpred P[ (Element of ( NAT )),set,set ]
 means
(for n holds (for m holds (($2 = n & $3 = m) implies ((n < m & ( s2 . m ) <> x0) & (for k holds ((n < k & ( s2 . k ) <> x0) implies m <= k))))));
defpred P[ set ]
 means
( s2 . $1 ) <> x0;
(ex m1 being (Element of ( NAT )) st (( 0 ) <= m1 & ( s2 . m1 ) <> x0)) by A11;
then A12: (ex m being Nat st P[ m ]);
consider M being Nat such that A13: (P[ M ] & (for n being Nat holds (P[ n ] implies M <= n))) from NAT_1:sch 5(A12);
reconsider M9 = M as (Element of ( NAT )) by ORDINAL1:def 12;
A14:now
let n;
consider m such that A15: (( n + 1 ) <= m & ( s2 . m ) <> x0) by A11;
take m;
thus (n < m & ( s2 . m ) <> x0) by A15,NAT_1:13;
end;
A16: (for n holds (for x being (Element of ( NAT )) holds (ex y being (Element of ( NAT )) st P[ n,x,y ])))
proof
let n;
let x being (Element of ( NAT ));
defpred P[ Nat ]
 means
(x < $1 & ( s2 . $1 ) <> x0);
(ex m st P[ m ]) by A14;
then A17: (ex m being Nat st P[ m ]);
consider l being Nat such that A18: (P[ l ] & (for k being Nat holds (P[ k ] implies l <= k))) from NAT_1:sch 5(A17);
take l;
l in ( NAT ) by ORDINAL1:def 12;
hence thesis by A18;
end;
consider F being (Function of ( NAT ),( NAT )) such that A19: (( F . ( 0 ) ) = M9 & (for n being (Element of ( NAT )) holds P[ n,( F . n ),( F . ( n + 1 ) ) ])) from RECDEF_1:sch 2(A16);
A20: ( rng F ) c= ( REAL ) by XBOOLE_1:1;
A21: ( rng F ) c= ( NAT );
A22: ( dom F ) = ( NAT ) by FUNCT_2:def 1;
then reconsider F as Real_Sequence by A20,RELSET_1:4;
A23:now
let n;
( F . n ) in ( rng F ) by A22,FUNCT_1:def 3;
hence ( F . n ) is (Element of ( NAT )) by A21;
end;
now
let n;
(( F . n ) is (Element of ( NAT )) & ( F . ( n + 1 ) ) is (Element of ( NAT ))) by A23;
hence ( F . n ) < ( F . ( n + 1 ) ) by A19;
end;
then reconsider F as  increasing (sequence of ( NAT )) by SEQM_3:def 6;
A24: (( s2 * F ) is  convergent & ( lim ( s2 * F ) ) = x0) by A3,SEQ_4:16,SEQ_4:17;
A25: (for n holds (( s2 . n ) <> x0 implies (ex m st ( F . m ) = n)))
proof
defpred P[ set ]
 means
(( s2 . $1 ) <> x0 & (for m holds ( F . m ) <> $1));
assume (ex n st P[ n ]);
then A26: (ex n being Nat st P[ n ]);
consider M1 being Nat such that A27: (P[ M1 ] & (for n being Nat holds (P[ n ] implies M1 <= n))) from NAT_1:sch 5(A26);
defpred P[ Nat ]
 means
(($1 < M1 & ( s2 . $1 ) <> x0) & (ex m st ( F . m ) = $1));
A28: (ex n being Nat st P[ n ])
proof
take M;
(M <= M1 & M <> M1) by A13,A19,A27;
hence M < M1 by XXREAL_0:1;
thus ( s2 . M ) <> x0 by A13;
take ( 0 );
thus thesis by A19;
end;
A29: (for n being Nat holds (P[ n ] implies n <= M1));
consider MX being Nat such that A30: (P[ MX ] & (for n being Nat holds (P[ n ] implies n <= MX))) from NAT_1:sch 6(A29,A28);
A31: (for k holds ((MX < k & k < M1) implies ( s2 . k ) = x0))
proof
given k such that
A32: MX < k
and
A33: (k < M1 & ( s2 . k ) <> x0);

now
per cases ;
suppose (ex m st ( F . m ) = k);

hence contradiction by A30,A32,A33;
end;
suppose (for m holds ( F . m ) <> k);

hence contradiction by A27,A33;
end;
end;
hence contradiction;
end;
consider m such that A34: ( F . m ) = MX by A30;
A35: (MX < ( F . ( m + 1 ) ) & ( s2 . ( F . ( m + 1 ) ) ) <> x0) by A19,A34;
M1 in ( NAT ) by ORDINAL1:def 12;
then A36: ( F . ( m + 1 ) ) <= M1 by A19,A27,A30,A34;
now
assume ( F . ( m + 1 ) ) <> M1;
then ( F . ( m + 1 ) ) < M1 by A36,XXREAL_0:1;
hence contradiction by A31,A35;
end;
hence contradiction by A27;
end;
A37: (for n holds ( ( s2 * F ) . n ) <> x0)
proof
defpred P[ (Element of ( NAT )) ]
 means
( ( s2 * F ) . $1 ) <> x0;
A38: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume that
( ( s2 * F ) . k ) <> x0;
P[ k,( F . k ),( F . ( k + 1 ) ) ] by A19;
then ( s2 . ( F . ( k + 1 ) ) ) <> x0;
hence thesis by FUNCT_2:15;
end;
A39: P[ ( 0 ) ] by A13,A19,FUNCT_2:15;
thus (for n holds P[ n ]) from NAT_1:sch 1(A39,A38);
end;
A40: ( rng ( s2 * F ) ) c= ( rng s2 ) by VALUED_0:21;
then ( rng ( s2 * F ) ) c= ( dom f ) by A2,XBOOLE_1:1;
then A41: (( f /* ( s2 * F ) ) is  convergent & ( f . x0 ) = ( lim ( f /* ( s2 * F ) ) )) by A1,A37,A24;
A42:now
let p being  real number;
assume A43: ( 0 ) < p;
then consider n such that A44: (for m holds (n <= m implies ( abs ( ( ( f /* ( s2 * F ) ) . m ) - ( f . x0 ) ) ) < p)) by A41,SEQ_2:def 7;
take k = ( F . n );
let m;
assume that
A45: k <= m;
now
per cases ;
suppose ( s2 . m ) = x0;

then ( abs ( ( ( f /* s2 ) . m ) - ( f . x0 ) ) ) = ( abs ( ( f . x0 ) - ( f . x0 ) ) ) by A2,FUNCT_2:108
.= ( 0 ) by ABSVALUE:2;
hence ( abs ( ( ( f /* s2 ) . m ) - ( f . x0 ) ) ) < p by A43;
end;
suppose ( s2 . m ) <> x0;

then consider l being (Element of ( NAT )) such that A46: m = ( F . l ) by A25;
n <= l by A45,A46,SEQM_3:1;
then ( abs ( ( ( f /* ( s2 * F ) ) . l ) - ( f . x0 ) ) ) < p by A44;
then ( abs ( ( f . ( ( s2 * F ) . l ) ) - ( f . x0 ) ) ) < p by A2,A40,FUNCT_2:108,XBOOLE_1:1;
then ( abs ( ( f . ( s2 . m ) ) - ( f . x0 ) ) ) < p by A46,FUNCT_2:15;
hence ( abs ( ( ( f /* s2 ) . m ) - ( f . x0 ) ) ) < p by A2,FUNCT_2:108;
end;
end;
hence ( abs ( ( ( f /* s2 ) . m ) - ( f . x0 ) ) ) < p;
end;
hence ( f /* s2 ) is  convergent by SEQ_2:def 6;
hence ( f . x0 ) = ( lim ( f /* s2 ) ) by A42,SEQ_2:def 7;
end;
end;
hence thesis;
end;
