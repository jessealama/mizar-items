environ
vocabularies XBOOLE_0,MSUALG_1,CARD_3,FUNCT_1,SUBSET_1,PBOOLE,RELAT_1,FUNCT_6,TARSKI,FUNCOP_1,FINSEQ_4,FUNCT_5,ZFMISC_1,PRALG_1,MCART_1,COMPLEX1,STRUCT_0,MARGREL1,RLVECT_2,FUNCT_2,PRALG_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,BINOP_1,MCART_1,STRUCT_0,FUNCOP_1,FINSEQ_2,FUNCT_5,FUNCT_6,CARD_3,PBOOLE,PRALG_1,MSUALG_1,CKB3,CKB5;
definitions TARSKI,PBOOLE,FUNCOP_1,XBOOLE_0,BINOP_1,FUNCT_6,FUNCT_2,CKB3,CKB5;
theorems TARSKI,FUNCT_1,FINSEQ_1,PBOOLE,MSUALG_1,ZFMISC_1,CARD_3,FUNCT_2,MCART_1,FUNCOP_1,FUNCT_6,FUNCT_5,RELAT_1,PRALG_1,XBOOLE_0,XBOOLE_1,PARTFUN1,FINSEQ_2,CKB3,CKB4,CKB5,CKB7;
schemes FUNCT_1,FUNCT_2,CLASSES1,TARSKI,PBOOLE;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCOP_1,CARD_3,PBOOLE,STRUCT_0,MSUALG_1,RELSET_1,FINSEQ_2,CKB1,CKB2,CKB6;
constructors BINOP_1,FUNCT_6,PRALG_1,MSUALG_1,RELSET_1,FUNCT_5,CKB3,CKB5;
requirements BOOLE,SUBSET;
begin
definition
let I being non empty set;
let A being  non-empty (ManySortedSet of I);
let B being  non-empty (ManySortedSet of I);
let pj being (Element of ( I * ));
let rj being (Element of I);
let f being (Function of ( ( A # ) . pj ),( A . rj ));
let g being (Function of ( ( B # ) . pj ),( B . rj ));
func [[:f,g :]] -> (Function of ( ( [| A,B |] # ) . pj ),( [| A,B |] . rj ))
means
(for h being Function holds (h in ( ( [| A,B |] # ) . pj ) implies ( it . h ) = [ ( f . ( pr1 h ) ),( g . ( pr2 h ) ) ]));
existence
proof
defpred P[ set,set ]
 means
(for h being Function holds (h = $1 implies $2 = [ ( f . ( pr1 h ) ),( g . ( pr2 h ) ) ]));
set Y = ( [| A,B |] . rj );
set X = ( ( [| A,B |] # ) . pj );
A1: X = ( product ( [| A,B |] * pj ) ) by FINSEQ_2:def 5;
A2: (for x being set holds (x in X implies (ex y being set st (y in Y & P[ x,y ]))))
proof
let x being set;
A3: ( rng pj ) c= I by FINSEQ_1:def 4;
assume x in X;
then consider h1 being Function such that A4: h1 = x and A5: ( dom h1 ) = ( dom ( [| A,B |] * pj ) ) and A6: (for z being set holds (z in ( dom ( [| A,B |] * pj ) ) implies ( h1 . z ) in ( ( [| A,B |] * pj ) . z ))) by A1,CARD_3:def 5;
A7: ( dom [| A,B |] ) = I by PARTFUN1:def 2;
then A8: ( dom h1 ) = ( dom pj ) by A5,A3,RELAT_1:27;
then A9: ( dom ( pr1 h1 ) ) = ( dom pj ) by MCART_1:def 12;
( dom A ) = I by PARTFUN1:def 2;
then A10: ( dom ( pr1 h1 ) ) = ( dom ( A * pj ) ) by A3,A9,RELAT_1:27;
(for z being set holds (z in ( dom ( A * pj ) ) implies ( ( pr1 h1 ) . z ) in ( ( A * pj ) . z )))
proof
let z being set;
assume A11: z in ( dom ( A * pj ) );
( dom ( [| A,B |] * pj ) ) = ( dom pj ) by A7,A3,RELAT_1:27;
then A12: ( ( [| A,B |] * pj ) . z ) = ( [| A,B |] . ( pj . z ) ) by A9,A10,A11,FUNCT_1:12;
(( h1 . z ) in ( ( [| A,B |] * pj ) . z ) & ( pj . z ) in ( rng pj )) by A5,A6,A8,A9,A10,A11,FUNCT_1:def 3;
then ( h1 . z ) in [: ( A . ( pj . z ) ),( B . ( pj . z ) ) :] by A3,A12,PBOOLE:def 16;
then consider a being set,b being set such that A13: a in ( A . ( pj . z ) ) and b in ( B . ( pj . z ) ) and A14: ( h1 . z ) = [ a,b ] by ZFMISC_1:def 2;
( ( pr1 h1 ) . z ) = ( ( h1 . z ) `1 ) by A8,A9,A10,A11,MCART_1:def 12
.= a by A14,MCART_1:def 1;
hence thesis by A11,A13,FUNCT_1:12;
end;
then ( pr1 h1 ) in ( product ( A * pj ) ) by A10,CARD_3:9;
then ( pr1 h1 ) in ( ( A # ) . pj ) by FINSEQ_2:def 5;
then ( pr1 h1 ) in ( dom f ) by FUNCT_2:def 1;
then A15: ( f . ( pr1 h1 ) ) in ( rng f ) by FUNCT_1:3;
take y = [ ( f . ( pr1 h1 ) ),( g . ( pr2 h1 ) ) ];
(( rng f ) c= ( A . rj ) & ( rng g ) c= ( B . rj )) by RELAT_1:def 19;
then A16: [: ( rng f ),( rng g ) :] c= [: ( A . rj ),( B . rj ) :] by ZFMISC_1:96;
A17: ( dom ( pr2 h1 ) ) = ( dom pj ) by A8,MCART_1:def 13;
A18: ( dom B ) = I by PARTFUN1:def 2;
then A19: ( dom ( pr2 h1 ) ) = ( dom ( B * pj ) ) by A3,A17,RELAT_1:27;
A20: (for z being set holds (z in ( dom ( B * pj ) ) implies ( ( pr2 h1 ) . z ) in ( ( B * pj ) . z )))
proof
let z being set;
assume A21: z in ( dom ( B * pj ) );
( dom ( [| A,B |] * pj ) ) = ( dom pj ) by A7,A3,RELAT_1:27;
then A22: ( ( [| A,B |] * pj ) . z ) = ( [| A,B |] . ( pj . z ) ) by A17,A19,A21,FUNCT_1:12;
(( h1 . z ) in ( ( [| A,B |] * pj ) . z ) & ( pj . z ) in ( rng pj )) by A5,A6,A8,A17,A19,A21,FUNCT_1:def 3;
then ( h1 . z ) in [: ( A . ( pj . z ) ),( B . ( pj . z ) ) :] by A3,A22,PBOOLE:def 16;
then consider a being set,b being set such that a in ( A . ( pj . z ) ) and A23: b in ( B . ( pj . z ) ) and A24: ( h1 . z ) = [ a,b ] by ZFMISC_1:def 2;
( ( pr2 h1 ) . z ) = ( ( h1 . z ) `2 ) by A8,A17,A19,A21,MCART_1:def 13
.= b by A24,MCART_1:def 2;
hence thesis by A21,A23,FUNCT_1:12;
end;
( dom ( pr2 h1 ) ) = ( dom pj ) by A8,MCART_1:def 13;
then ( dom ( pr2 h1 ) ) = ( dom ( B * pj ) ) by A18,A3,RELAT_1:27;
then ( pr2 h1 ) in ( product ( B * pj ) ) by A20,CARD_3:9;
then ( pr2 h1 ) in ( ( B # ) . pj ) by FINSEQ_2:def 5;
then ( pr2 h1 ) in ( dom g ) by FUNCT_2:def 1;
then ( g . ( pr2 h1 ) ) in ( rng g ) by FUNCT_1:3;
then [ ( f . ( pr1 h1 ) ),( g . ( pr2 h1 ) ) ] in [: ( rng f ),( rng g ) :] by A15,ZFMISC_1:87;
then [ ( f . ( pr1 h1 ) ),( g . ( pr2 h1 ) ) ] in [: ( A . rj ),( B . rj ) :] by A16;
hence y in Y by PBOOLE:def 16;
let h being Function;
assume x = h;
hence thesis by A4;
end;
consider F being (Function of X,Y) such that A25: (for x being set holds (x in X implies P[ x,( F . x ) ])) from FUNCT_2:sch 1(A2);
take F;
thus thesis by A25;
end;
uniqueness
proof
let x being (Function of ( ( [| A,B |] # ) . pj ),( [| A,B |] . rj )),y being (Function of ( ( [| A,B |] # ) . pj ),( [| A,B |] . rj ));
assume that
A26: (for h being Function holds (h in ( ( [| A,B |] # ) . pj ) implies ( x . h ) = [ ( f . ( pr1 h ) ),( g . ( pr2 h ) ) ]))
and
A27: (for h being Function holds (h in ( ( [| A,B |] # ) . pj ) implies ( y . h ) = [ ( f . ( pr1 h ) ),( g . ( pr2 h ) ) ]));
let h being (Element of ( ( [| A,B |] # ) . pj ));
h in ( ( [| A,B |] # ) . pj );
then h in ( product ( [| A,B |] * pj ) ) by FINSEQ_2:def 5;
then consider h1 being Function such that A28: h1 = h and ( dom h1 ) = ( dom ( [| A,B |] * pj ) ) and (for z being set holds (z in ( dom ( [| A,B |] * pj ) ) implies ( h1 . z ) in ( ( [| A,B |] * pj ) . z ))) by CARD_3:def 5;
( x . h1 ) = [ ( f . ( pr1 h1 ) ),( g . ( pr2 h1 ) ) ] by A26,A28;
hence ( x . h ) = ( y . h ) by A27,A28;
end;
end;
