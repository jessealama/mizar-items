environ
vocabularies XBOOLE_0,MSUALG_1,CARD_3,FUNCT_1,SUBSET_1,PBOOLE,RELAT_1,FUNCT_6,TARSKI,FUNCOP_1,FINSEQ_4,FUNCT_5,ZFMISC_1,PRALG_1,MCART_1,COMPLEX1,STRUCT_0,MARGREL1,RLVECT_2,FUNCT_2,PRALG_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,BINOP_1,MCART_1,STRUCT_0,FUNCOP_1,FINSEQ_2,FUNCT_5,FUNCT_6,CARD_3,PBOOLE,PRALG_1,MSUALG_1,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24;
definitions TARSKI,PBOOLE,FUNCOP_1,XBOOLE_0,BINOP_1,FUNCT_6,FUNCT_2,CKB3,CKB5,CKB8,CKB9,CKB10,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24;
theorems TARSKI,FUNCT_1,FINSEQ_1,PBOOLE,MSUALG_1,ZFMISC_1,CARD_3,FUNCT_2,MCART_1,FUNCOP_1,FUNCT_6,FUNCT_5,RELAT_1,PRALG_1,XBOOLE_0,XBOOLE_1,PARTFUN1,FINSEQ_2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB14,CKB16,CKB17,CKB18,CKB20,CKB22,CKB24,CKB25,CKB26;
schemes FUNCT_1,FUNCT_2,CLASSES1,TARSKI,PBOOLE;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCOP_1,CARD_3,PBOOLE,STRUCT_0,MSUALG_1,RELSET_1,FINSEQ_2,CKB1,CKB2,CKB6,CKB13,CKB15,CKB19,CKB21,CKB23;
constructors BINOP_1,FUNCT_6,PRALG_1,MSUALG_1,RELSET_1,FUNCT_5,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24;
requirements BOOLE,SUBSET;
begin
reserve x for set;
definition
let I being set;
let S being non void non empty ManySortedSign;
let A being (MSAlgebra-Family of I,S);
let o being (OperSymbol of S);
func A ?. o -> (ManySortedFunction of I)
equals
( ( commute ( OPER A ) ) . o );
coherence
proof
set f = ( uncurry ( OPER A ) );
set C = ( commute ( OPER A ) );
A1: ( dom f ) = [: I,(the carrier' of S) :] by CKB25:1;
per cases ;
suppose A2: I <> ( {} );

then C in ( Funcs ((the carrier' of S),( Funcs (I,( rng f )) )) ) by CKB26:1;
then A3: (ex a being Function st ((a = C & ( dom a ) = (the carrier' of S)) & ( rng a ) c= ( Funcs (I,( rng f )) ))) by FUNCT_2:def 2;
then ( C . o ) in ( rng C ) by FUNCT_1:def 3;
then consider g being Function such that A4: g = ( C . o ) and A5: ( dom g ) = I and ( rng g ) c= ( rng f ) by A3,FUNCT_2:def 2;
reconsider g as (ManySortedSet of I) by A5,PARTFUN1:def 2,RELAT_1:def 18;
(for x holds (x in ( dom g ) implies ( g . x ) is Function))
proof
let x;
assume x in ( dom g );
then reconsider i = x as (Element of I) by A5;
A6: (( [ i,o ] `1 ) = i & ( [ i,o ] `2 ) = o) by MCART_1:def 1,MCART_1:def 2;
consider U0 being MSAlgebra over S such that U0 = ( A . i ) and A7: ( ( OPER A ) . i ) = (the Charact of U0) by A2,CKB24:def 1;
A8: [ i,o ] in ( dom f ) by A1,A2,ZFMISC_1:87;
then ( g . i ) = ( f . (i,o) ) by A4,FUNCT_5:22;
then ( g . i ) = ( (the Charact of U0) . o ) by A8,A6,A7,FUNCT_5:def 2
.= ( Den (o,U0) ) by MSUALG_1:def 6;
hence thesis;
end;
hence thesis by A4,FUNCOP_1:def 6;
end;
suppose A9: I = ( {} );

reconsider f = ( [[0]] I ) as (ManySortedFunction of I);
A10: (not o in ( dom ( {} ) ));
f = ( {} ) by A9
.= ( ( commute ( {} ) ) . o ) by A10,FUNCT_1:def 2,FUNCT_6:58
.= ( ( commute ( OPER A ) ) . o ) by A9,PBOOLE:122;
hence thesis;
end;
end;
end;
