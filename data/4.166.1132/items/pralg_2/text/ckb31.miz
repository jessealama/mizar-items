environ
vocabularies XBOOLE_0,MSUALG_1,CARD_3,FUNCT_1,SUBSET_1,PBOOLE,RELAT_1,FUNCT_6,TARSKI,FUNCOP_1,FINSEQ_4,FUNCT_5,ZFMISC_1,PRALG_1,MCART_1,COMPLEX1,STRUCT_0,MARGREL1,RLVECT_2,FUNCT_2,PRALG_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,BINOP_1,MCART_1,STRUCT_0,FUNCOP_1,FINSEQ_2,FUNCT_5,FUNCT_6,CARD_3,PBOOLE,PRALG_1,MSUALG_1,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24,CKB27;
definitions TARSKI,PBOOLE,FUNCOP_1,XBOOLE_0,BINOP_1,FUNCT_6,FUNCT_2,CKB3,CKB5,CKB8,CKB9,CKB10,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24,CKB27;
theorems TARSKI,FUNCT_1,FINSEQ_1,PBOOLE,MSUALG_1,ZFMISC_1,CARD_3,FUNCT_2,MCART_1,FUNCOP_1,FUNCT_6,FUNCT_5,RELAT_1,PRALG_1,XBOOLE_0,XBOOLE_1,PARTFUN1,FINSEQ_2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB14,CKB16,CKB17,CKB18,CKB20,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30;
schemes FUNCT_1,FUNCT_2,CLASSES1,TARSKI,PBOOLE;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCOP_1,CARD_3,PBOOLE,STRUCT_0,MSUALG_1,RELSET_1,FINSEQ_2,CKB1,CKB2,CKB6,CKB13,CKB15,CKB19,CKB21,CKB23;
constructors BINOP_1,FUNCT_6,PRALG_1,MSUALG_1,RELSET_1,FUNCT_5,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24,CKB27;
requirements BOOLE,SUBSET;
begin
reserve I for set;
reserve i for set;
reserve j for set;
reserve x for set;
reserve S for non  empty ManySortedSign;
theorem
Th17: (for I being non  empty set holds (for S being non  void non  empty ManySortedSign holds (for A being (MSAlgebra-Family of I,S) holds (for o being (OperSymbol of S) holds (for f being Function holds (f in ( dom ( Frege ( A ?. o ) ) ) implies ((( dom f ) = I & (for i being (Element of I) holds ( f . i ) in ( Args (o,( A . i )) ))) & ( rng f ) c= ( Funcs (( dom ( the_arity_of o ) ),|. A .|) ))))))))
proof
let I being non  empty set;
let S being non  void non  empty ManySortedSign;
let A being (MSAlgebra-Family of I,S);
let o being (OperSymbol of S);
let f being Function;
assume A1: f in ( dom ( Frege ( A ?. o ) ) );
A2: ( dom ( A ?. o ) ) = I by PARTFUN1:def 2;
A3: ( SubFuncs ( rng ( A ?. o ) ) ) = ( rng ( A ?. o ) )
proof
thus ( SubFuncs ( rng ( A ?. o ) ) ) c= ( rng ( A ?. o ) ) by FUNCT_6:18;
let x;
assume A4: x in ( rng ( A ?. o ) );
then (ex j st (j in ( dom ( A ?. o ) ) & x = ( ( A ?. o ) . j ))) by FUNCT_1:def 3;
hence thesis by A4,FUNCT_6:def 1;
end;
A5: ( dom ( Frege ( A ?. o ) ) ) = ( product ( doms ( A ?. o ) ) ) by PARTFUN1:def 2;
A6: ( dom ( doms ( A ?. o ) ) ) = ( ( A ?. o ) " ( SubFuncs ( rng ( A ?. o ) ) ) ) by FUNCT_6:def 2
.= ( dom ( A ?. o ) ) by A3,RELAT_1:134;
hence ( dom f ) = I by A1,A5,A2,CARD_3:9;
thus A7: (for i being (Element of I) holds ( f . i ) in ( Args (o,( A . i )) ))
proof
let i being (Element of I);
(( ( A ?. o ) . i ) = ( Den (o,( A . i )) ) & ( f . i ) in ( ( doms ( A ?. o ) ) . i )) by A1,A5,A2,A6,CKB28:1,CARD_3:9;
then ( f . i ) in ( dom ( Den (o,( A . i )) ) ) by A2,FUNCT_6:22;
hence thesis by FUNCT_2:def 1;
end;

let x;
assume x in ( rng f );
then consider y being set such that A8: y in ( dom f ) and A9: x = ( f . y ) by FUNCT_1:def 3;
reconsider y as (Element of I) by A1,A5,A2,A6,A8,CARD_3:9;
set X = (the carrier' of S);
set AS = ( ( (the Sorts of ( A . y )) # ) * (the Arity of S) );
set Ar = (the Arity of S);
set Cr = (the carrier of S);
set So = (the Sorts of ( A . y ));
set a = ( the_arity_of o );
A10: ( dom Ar ) = X by FUNCT_2:def 1;
then A11: ( dom AS ) = ( dom Ar ) by PARTFUN1:def 2;
A12: ( Args (o,( A . y )) ) = ( AS . o ) by MSUALG_1:def 4
.= ( (( So # ) qua (ManySortedSet of ( Cr * ))) . ( Ar . o ) ) by A10,A11,FUNCT_1:12
.= ( (( So # ) qua (ManySortedSet of ( Cr * ))) . ( the_arity_of o ) ) by MSUALG_1:def 1
.= ( product ( So * ( the_arity_of o ) ) ) by FINSEQ_2:def 5;
x in ( Args (o,( A . y )) ) by A7,A9;
then consider g being Function such that A13: g = x and A14: ( dom g ) = ( dom ( So * a ) ) and A15: (for i holds (i in ( dom ( So * a ) ) implies ( g . i ) in ( ( So * a ) . i ))) by A12,CARD_3:def 5;
A16: (( rng a ) c= Cr & ( dom So ) = Cr) by FINSEQ_1:def 4,PARTFUN1:def 2;
then A17: ( dom ( So * a ) ) = ( dom a ) by RELAT_1:27;
A18: ( rng g ) c= |. ( A . y ) .|
proof
let i;
assume i in ( rng g );
then consider j such that A19: j in ( dom g ) and A20: ( g . j ) = i by FUNCT_1:def 3;
( a . j ) in ( rng a ) by A14,A17,A19,FUNCT_1:def 3;
then A21: ( So . ( a . j ) ) in ( rng So ) by A16,FUNCT_1:def 3;
i in ( ( So * a ) . j ) by A14,A15,A19,A20;
then i in ( So . ( a . j ) ) by A14,A19,FUNCT_1:12;
hence thesis by A21,TARSKI:def 4;
end;
|. ( A . y ) .| in { |. ( A . i ) .| where i is (Element of I): (not contradiction) };
then |. ( A . y ) .| c= ( union { |. ( A . i ) .| where i is (Element of I): (not contradiction) } ) by ZFMISC_1:74;
then ( rng g ) c= |. A .| by A18,XBOOLE_1:1;
hence thesis by A13,A14,A17,FUNCT_2:def 2;
end;
