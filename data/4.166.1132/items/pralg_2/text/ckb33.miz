environ
vocabularies XBOOLE_0,MSUALG_1,CARD_3,FUNCT_1,SUBSET_1,PBOOLE,RELAT_1,FUNCT_6,TARSKI,FUNCOP_1,FINSEQ_4,FUNCT_5,ZFMISC_1,PRALG_1,MCART_1,COMPLEX1,STRUCT_0,MARGREL1,RLVECT_2,FUNCT_2,PRALG_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,BINOP_1,MCART_1,STRUCT_0,FUNCOP_1,FINSEQ_2,FUNCT_5,FUNCT_6,CARD_3,PBOOLE,PRALG_1,MSUALG_1,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24,CKB27;
definitions TARSKI,PBOOLE,FUNCOP_1,XBOOLE_0,BINOP_1,FUNCT_6,FUNCT_2,CKB3,CKB5,CKB8,CKB9,CKB10,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24,CKB27;
theorems TARSKI,FUNCT_1,FINSEQ_1,PBOOLE,MSUALG_1,ZFMISC_1,CARD_3,FUNCT_2,MCART_1,FUNCOP_1,FUNCT_6,FUNCT_5,RELAT_1,PRALG_1,XBOOLE_0,XBOOLE_1,PARTFUN1,FINSEQ_2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB14,CKB16,CKB17,CKB18,CKB20,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32;
schemes FUNCT_1,FUNCT_2,CLASSES1,TARSKI,PBOOLE;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCOP_1,CARD_3,PBOOLE,STRUCT_0,MSUALG_1,RELSET_1,FINSEQ_2,CKB1,CKB2,CKB6,CKB13,CKB15,CKB19,CKB21,CKB23;
constructors BINOP_1,FUNCT_6,PRALG_1,MSUALG_1,RELSET_1,FUNCT_5,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB18,CKB20,CKB22,CKB24,CKB27;
requirements BOOLE,SUBSET;
begin
reserve I for set;
reserve i for set;
reserve j for set;
reserve x for set;
reserve S for non  empty ManySortedSign;
definition
let I;
let S being non  void non  empty ManySortedSign;
let A being (MSAlgebra-Family of I,S);
func OPS A -> (ManySortedFunction of ( ( ( SORTS A ) # ) * (the Arity of S) ),( ( SORTS A ) * (the ResultSort of S) )) means 
(for o being (OperSymbol of S) holds ( it . o ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) )) if I <> ( {} ) otherwise (not contradiction);
existence
proof
defpred P[ set,set ]
 means
(for o being (OperSymbol of S) holds ($1 = o implies $2 = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) )));
set X = (the carrier' of S);
set AS = ( ( ( SORTS A ) # ) * (the Arity of S) );
set RS = ( ( SORTS A ) * (the ResultSort of S) );
A1: (for x holds (x in X implies (ex y being set st P[ x,y ])))
proof
let x;
assume x in X;
then reconsider o = x as (OperSymbol of S);
take ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) );
let o1 being (OperSymbol of S);
assume x = o1;
hence thesis;
end;
consider f being Function such that A2: (( dom f ) = X & (for x holds (x in X implies P[ x,( f . x ) ]))) from CLASSES1:sch 1(A1);
reconsider f as (ManySortedSet of X) by A2,PARTFUN1:def 2,RELAT_1:def 18;
(for x holds (x in ( dom f ) implies ( f . x ) is Function))
proof
let x;
assume x in ( dom f );
then reconsider o = x as (OperSymbol of S) by A2;
per cases ;
suppose A3: ( the_arity_of o ) = ( {} );

( f . x ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ) by A2
.= ( commute ( A ?. o ) ) by A3,FUNCOP_1:def 8;
hence thesis;
end;
suppose A4: ( the_arity_of o ) <> ( {} );

( f . x ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ) by A2
.= ( Commute ( Frege ( A ?. o ) ) ) by A4,FUNCOP_1:def 8;
hence thesis;
end;
end;
then reconsider f as (ManySortedFunction of X) by FUNCOP_1:def 6;
hereby
assume I <> ( {} );
then reconsider I9 = I as non  empty set;
reconsider A9 = A as (MSAlgebra-Family of I9,S);
(for x holds (x in X implies ( f . x ) is (Function of ( AS . x ),( RS . x ))))
proof
let x;
assume x in X;
then reconsider o = x as (OperSymbol of S);
set ar = ( the_arity_of o );
set C = ( Commute ( Frege ( A ?. o ) ) );
set F = ( Frege ( A ?. o ) );
set Ar = (the Arity of S);
set Rs = (the ResultSort of S);
set Cr = (the carrier of S);
set co = ( commute ( A ?. o ) );
A5: ( rng ar ) c= Cr by FINSEQ_1:def 4;
A6: ( dom Ar ) = X by FUNCT_2:def 1;
then ( dom AS ) = ( dom Ar ) by PARTFUN1:def 2;
then A7: ( AS . o ) = ( (( ( SORTS A ) # ) qua (ManySortedSet of ( Cr * ))) . ( Ar . o ) ) by A6,FUNCT_1:12
.= ( (( ( SORTS A ) # ) qua (ManySortedSet of ( Cr * ))) . ( the_arity_of o ) ) by MSUALG_1:def 1
.= ( product ( ( SORTS A ) * ( the_arity_of o ) ) ) by FINSEQ_2:def 5;
A8: ( dom Rs ) = X by FUNCT_2:def 1;
then ( dom RS ) = ( dom Rs ) by PARTFUN1:def 2;
then A9: ( RS . o ) = ( ( SORTS A ) . ( Rs . o ) ) by A8,FUNCT_1:12
.= ( ( SORTS A ) . ( the_result_sort_of o ) ) by MSUALG_1:def 2
.= ( product ( Carrier (A,( the_result_sort_of o )) ) ) by CKB22:def 1;
( dom ( SORTS A ) ) = Cr by PARTFUN1:def 2;
then A10: ( dom ( ( SORTS A ) * ar ) ) = ( dom ar ) by A5,RELAT_1:27;
per cases ;
suppose A11: ( the_arity_of o ) = ( {} );

set rs = ( the_result_sort_of o );
A12: ( rng ( A ?. o ) ) c= ( Funcs ({ ( {} ) },|. A9 .|) )
proof
let j;
assume j in ( rng ( A ?. o ) );
then consider a being set such that A13: a in ( dom ( A ?. o ) ) and A14: ( ( A ?. o ) . a ) = j by FUNCT_1:def 3;
reconsider i = a as (Element of I9) by A13,PARTFUN1:def 2;
set So = (the Sorts of ( A9 . i ));
|. ( A9 . i ) .| in { |. ( A9 . d ) .| where d is (Element of I9): (not contradiction) };
then A15: |. ( A9 . i ) .| c= ( union { |. ( A9 . d ) .| where d is (Element of I9): (not contradiction) } ) by ZFMISC_1:74;
( dom (the Sorts of ( A9 . i )) ) = (the carrier of S) by PARTFUN1:def 2;
then ( So . rs ) in ( rng (the Sorts of ( A9 . i )) ) by FUNCT_1:def 3;
then A16: ( So . rs ) c= ( union ( rng (the Sorts of ( A9 . i )) ) ) by ZFMISC_1:74;
(( rng ( Den (o,( A9 . i )) ) ) c= ( Result (o,( A9 . i )) ) & ( Result (o,( A9 . i )) ) = ( So . rs )) by CKB16:1,RELAT_1:def 19;
then ( rng ( Den (o,( A9 . i )) ) ) c= |. ( A9 . i ) .| by A16,XBOOLE_1:1;
then A17: ( rng ( Den (o,( A9 . i )) ) ) c= |. A9 .| by A15,XBOOLE_1:1;
A18: (( dom ( Den (o,( A9 . i )) ) ) = ( Args (o,( A9 . i )) ) & ( Args (o,( A9 . i )) ) = { ( {} ) }) by A11,CKB17:1,FUNCT_2:def 1;
j = ( Den (o,( A9 . i )) ) by A14,CKB28:1;
hence thesis by A18,A17,FUNCT_2:def 2;
end;
( dom ( A ?. o ) ) = I by PARTFUN1:def 2;
then A19: ( A ?. o ) in ( Funcs (I,( Funcs ({ ( {} ) },|. A9 .|) )) ) by A12,FUNCT_2:def 2;
then ( commute ( A ?. o ) ) in ( Funcs ({ ( {} ) },( Funcs (I,|. A9 .|) )) ) by FUNCT_6:55;
then A20: (ex h being Function st ((h = co & ( dom h ) = { ( {} ) }) & ( rng h ) c= ( Funcs (I,|. A9 .|) ))) by FUNCT_2:def 2;
A21: ( rng co ) c= ( RS . o )
proof
let j;
A22: ( dom ( Carrier (A,rs) ) ) = I by PARTFUN1:def 2;
assume A23: j in ( rng co );
then consider a being set such that A24: a in ( dom co ) and A25: ( co . a ) = j by FUNCT_1:def 3;
reconsider h = j as Function by A25;
A26: (for b being set holds (b in ( dom ( Carrier (A,rs) ) ) implies ( h . b ) in ( ( Carrier (A,rs) ) . b )))
proof
let b being set;
assume b in ( dom ( Carrier (A,rs) ) );
then reconsider i = b as (Element of I9) by PARTFUN1:def 2;
A27: (ex U0 being MSAlgebra over S st (U0 = ( A . i ) & ( ( Carrier (A,rs) ) . i ) = ( (the Sorts of U0) . rs ))) by CKB20:def 1;
( dom ( Den (o,( A9 . i )) ) ) = ( Args (o,( A9 . i )) ) by FUNCT_2:def 1
.= { ( {} ) } by A11,CKB17:1;
then A28: ( ( Den (o,( A9 . i )) ) . a ) in ( rng ( Den (o,( A9 . i )) ) ) by A20,A24,FUNCT_1:def 3;
( ( A ?. o ) . i ) = ( Den (o,( A9 . i )) ) by CKB28:1;
then A29: ( ( Den (o,( A9 . i )) ) . a ) = ( h . i ) by A19,A20,A24,A25,FUNCT_6:56;
( rng ( Den (o,( A9 . i )) ) ) c= ( Result (o,( A9 . i )) ) by RELAT_1:def 19;
then ( h . i ) in ( Result (o,( A9 . i )) ) by A29,A28;
hence thesis by A27,CKB16:1;
end;
(ex k being Function st ((k = h & ( dom k ) = I) & ( rng k ) c= |. A9 .|)) by A20,A23,FUNCT_2:def 2;
hence thesis by A9,A22,A26,CARD_3:9;
end;
A30: ( AS . o ) = { ( {} ) } by A7,A11,CARD_3:10;
( f . x ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ) by A2
.= ( commute ( A ?. o ) ) by A11,FUNCOP_1:def 8;
hence thesis by A30,A20,A21,FUNCT_2:2;
end;
suppose A31: ( the_arity_of o ) <> ( {} );

A32: ( dom C ) = ( AS . o )
proof
thus ( dom C ) c= ( AS . o )
proof
let j;
assume j in ( dom C );
then consider g being Function such that A33: g in ( dom F ) and A34: j = ( commute g ) by CKB3:def 1;
set cg = ( commute g );
A35: ( rng g ) c= ( Funcs (( dom ar ),|. A9 .|) ) by A33,CKB31:1;
A36: ( dom g ) = I9 by A33,CKB31:1;
then A37: g in ( Funcs (I,( Funcs (( dom ar ),|. A9 .|) )) ) by A35,FUNCT_2:def 2;
then ( commute g ) in ( Funcs (( dom ar ),( Funcs (I,|. A9 .|) )) ) by A31,FUNCT_6:55;
then A38: (ex h being Function st ((h = ( commute g ) & ( dom h ) = ( dom ar )) & ( rng h ) c= ( Funcs (I,|. A9 .|) ))) by FUNCT_2:def 2;
(for y being set holds (y in ( dom ( ( SORTS A ) * ar ) ) implies ( cg . y ) in ( ( ( SORTS A ) * ar ) . y )))
proof
let y being set;
assume A39: y in ( dom ( ( SORTS A ) * ar ) );
then ( ar . y ) in ( rng ar ) by A10,FUNCT_1:def 3;
then reconsider s = ( ar . y ) as (SortSymbol of S) by A5;
( cg . y ) in ( rng cg ) by A10,A38,A39,FUNCT_1:def 3;
then consider h being Function such that A40: h = ( cg . y ) and A41: ( dom h ) = I and ( rng h ) c= |. A9 .| by A38,FUNCT_2:def 2;
A42: (for z being set holds (z in ( dom ( Carrier (A,s) ) ) implies ( h . z ) in ( ( Carrier (A,s) ) . z )))
proof
let z being set;
assume z in ( dom ( Carrier (A,s) ) );
then reconsider i = z as (Element of I9) by PARTFUN1:def 2;
A43: ( dom ( ( (the Sorts of ( A9 . i )) # ) * Ar ) ) = X by PARTFUN1:def 2;
A44: ( Args (o,( A9 . i )) ) = ( ( ( (the Sorts of ( A9 . i )) # ) * Ar ) . o ) by MSUALG_1:def 4
.= ( (( (the Sorts of ( A9 . i )) # ) qua (ManySortedSet of ( Cr * ))) . ( Ar . o ) ) by A43,FUNCT_1:12
.= ( (( (the Sorts of ( A9 . i )) # ) qua (ManySortedSet of ( Cr * ))) . ar ) by MSUALG_1:def 1
.= ( product ( (the Sorts of ( A9 . i )) * ar ) ) by FINSEQ_2:def 5;
( g . i ) in ( rng g ) by A36,FUNCT_1:def 3;
then consider f being Function such that A45: f = ( g . i ) and ( dom f ) = ( dom ar ) and ( rng f ) c= |. A9 .| by A35,FUNCT_2:def 2;
A46: (ex U0 being MSAlgebra over S st (U0 = ( A . i ) & ( ( Carrier (A,s) ) . i ) = ( (the Sorts of U0) . s ))) by CKB20:def 1;
( dom (the Sorts of ( A9 . i )) ) = Cr by PARTFUN1:def 2;
then A47: ( dom ( (the Sorts of ( A9 . i )) * ar ) ) = ( dom ar ) by A5,RELAT_1:27;
then A48: ( ( (the Sorts of ( A9 . i )) * ar ) . y ) = ( (the Sorts of ( A9 . i )) . s ) by A10,A39,FUNCT_1:12;
( g . i ) in ( Args (o,( A9 . i )) ) by A33,CKB31:1;
then ( f . y ) in ( ( (the Sorts of ( A9 . i )) * ar ) . y ) by A10,A39,A45,A44,A47,CARD_3:9;
hence thesis by A10,A37,A39,A40,A46,A45,A48,FUNCT_6:56;
end;
A49: ( dom ( Carrier (A,s) ) ) = I by PARTFUN1:def 2;
( ( ( SORTS A ) * ar ) . y ) = ( ( SORTS A ) . s ) by A39,FUNCT_1:12
.= ( product ( Carrier (A,s) ) ) by CKB22:def 1;
hence thesis by A49,A40,A41,A42,CARD_3:9;
end;
hence thesis by A7,A10,A34,A38,CARD_3:9;
end;

let i;
assume i in ( AS . o );
then consider g being Function such that A50: g = i and A51: ( dom g ) = ( dom ( ( SORTS A ) * ar ) ) and A52: (for x holds (x in ( dom ( ( SORTS A ) * ar ) ) implies ( g . x ) in ( ( ( SORTS A ) * ar ) . x ))) by A7,CARD_3:def 5;
A53: ( rng g ) c= ( Funcs (I,|. A9 .|) )
proof
let a being set;
assume a in ( rng g );
then consider b being set such that A54: b in ( dom g ) and A55: ( g . b ) = a by FUNCT_1:def 3;
( ar . b ) in ( rng ar ) by A10,A51,A54,FUNCT_1:def 3;
then reconsider cr = ( ar . b ) as (SortSymbol of S) by A5;
A56: ( ( ( SORTS A ) * ar ) . b ) = ( ( SORTS A ) . cr ) by A51,A54,FUNCT_1:12
.= ( product ( Carrier (A,cr) ) ) by CKB22:def 1;
a in ( ( ( SORTS A ) * ar ) . b ) by A51,A52,A54,A55;
then consider h being Function such that A57: h = a and A58: ( dom h ) = ( dom ( Carrier (A,cr) ) ) and A59: (for j holds (j in ( dom ( Carrier (A,cr) ) ) implies ( h . j ) in ( ( Carrier (A,cr) ) . j ))) by A56,CARD_3:def 5;
A60: ( rng h ) c= |. A9 .|
proof
let j;
assume j in ( rng h );
then consider c being set such that A61: c in ( dom h ) and A62: ( h . c ) = j by FUNCT_1:def 3;
reconsider i = c as (Element of I9) by A58,A61,PARTFUN1:def 2;
((ex U0 being MSAlgebra over S st (U0 = ( A . i ) & ( ( Carrier (A,cr) ) . i ) = ( (the Sorts of U0) . cr ))) & ( dom (the Sorts of ( A9 . i )) ) = (the carrier of S)) by CKB20:def 1,PARTFUN1:def 2;
then A63: ( ( Carrier (A,cr) ) . i ) in ( rng (the Sorts of ( A9 . i )) ) by FUNCT_1:def 3;
( h . i ) in ( ( Carrier (A,cr) ) . i ) by A58,A59,A61;
then A64: ( h . i ) in |. ( A9 . i ) .| by A63,TARSKI:def 4;
|. ( A9 . i ) .| in { |. ( A9 . d ) .| where d is (Element of I9): (not contradiction) };
hence thesis by A62,A64,TARSKI:def 4;
end;
( dom ( Carrier (A,cr) ) ) = I by PARTFUN1:def 2;
hence thesis by A57,A58,A60,FUNCT_2:def 2;
end;
then A65: g in ( Funcs (( dom ar ),( Funcs (I,|. A9 .|) )) ) by A10,A51,FUNCT_2:def 2;
then A66: ( commute ( commute g ) ) = g by A31,FUNCT_6:57;
( commute g ) in ( Funcs (I,( Funcs (( dom ar ),|. A9 .|) )) ) by A31,A65,FUNCT_6:55;
then A67: (ex h being Function st ((h = ( commute g ) & ( dom h ) = I) & ( rng h ) c= ( Funcs (( dom ar ),|. A9 .|) ))) by FUNCT_2:def 2;
A68: (for j holds (j in ( dom ( doms ( A ?. o ) ) ) implies ( ( commute g ) . j ) in ( ( doms ( A ?. o ) ) . j )))
proof
set cg = ( commute g );
let j;
assume j in ( dom ( doms ( A ?. o ) ) );
then reconsider ii = j as (Element of I9) by CKB32:1;
set So = (the Sorts of ( A9 . ii ));
reconsider h = ( cg . ii ) as Function;
h in ( rng cg ) by A67,FUNCT_1:def 3;
then A69: (ex s being Function st ((s = h & ( dom s ) = ( dom ar )) & ( rng s ) c= |. A9 .|)) by A67,FUNCT_2:def 2;
A70: ( dom ( (the Sorts of ( A9 . ii )) * ar ) ) = ( dom ar ) by CKB16:1;
A71: (for a being set holds (a in ( dom ( So * ar ) ) implies ( h . a ) in ( ( So * ar ) . a )))
proof
let a being set;
assume A72: a in ( dom ( So * ar ) );
then ( ar . a ) in ( rng ar ) by A70,FUNCT_1:def 3;
then reconsider s = ( ar . a ) as (SortSymbol of S) by A5;
A73: ( ( So * ar ) . a ) = ( So . s ) by A72,FUNCT_1:12;
( g . a ) in ( rng g ) by A10,A51,A70,A72,FUNCT_1:def 3;
then consider k being Function such that A74: k = ( g . a ) and ( dom k ) = I and ( rng k ) c= |. A9 .| by A53,FUNCT_2:def 2;
A75: ((ex U0 being MSAlgebra over S st (U0 = ( A9 . ii ) & ( ( Carrier (A,s) ) . ii ) = ( (the Sorts of U0) . s ))) & ( dom ( Carrier (A,s) ) ) = I) by CKB20:def 1,PARTFUN1:def 2;
A76: ( ( ( SORTS A ) * ar ) . a ) = ( ( SORTS A ) . s ) by A10,A70,A72,FUNCT_1:12
.= ( product ( Carrier (A,s) ) ) by CKB22:def 1;
(( k . ii ) = ( h . a ) & k in ( ( ( SORTS A ) * ar ) . a )) by A10,A52,A65,A70,A72,A74,FUNCT_6:56;
hence thesis by A73,A76,A75,CARD_3:9;
end;
(( ( doms ( A ?. o ) ) . ii ) = ( Args (o,( A9 . ii )) ) & ( Args (o,( A9 . ii )) ) = ( product ( (the Sorts of ( A9 . ii )) * ar ) )) by CKB16:1,CKB32:1;
hence thesis by A70,A69,A71,CARD_3:9;
end;
(( dom F ) = ( product ( doms ( A ?. o ) ) ) & ( dom ( doms ( A ?. o ) ) ) = I9) by CKB32:1,PARTFUN1:def 2;
then ( commute g ) in ( dom F ) by A67,A68,CARD_3:9;
hence thesis by A50,A66,CKB3:def 1;
end;
set rs = ( the_result_sort_of o );
set CA = ( Carrier (A,rs) );
A77: ( rng C ) c= ( RS . o )
proof
let x;
A78: ( dom CA ) = I by PARTFUN1:def 2;
assume x in ( rng C );
then consider g being set such that A79: g in ( dom C ) and A80: ( C . g ) = x by FUNCT_1:def 3;
consider f being Function such that A81: f in ( dom ( Frege ( A ?. o ) ) ) and A82: g = ( commute f ) by A79,CKB3:def 1;
reconsider g as Function by A82;
(( dom f ) = I9 & ( rng f ) c= ( Funcs (( dom ( the_arity_of o ) ),|. A9 .|) )) by A81,CKB31:1;
then f in ( Funcs (I,( Funcs (( dom ( the_arity_of o ) ),|. A9 .|) )) ) by FUNCT_2:def 2;
then ( commute g ) = f by A31,A82,FUNCT_6:57;
then A83: x = ( F . f ) by A79,A80,CKB3:def 1;
then reconsider h = x as Function;
A84: ( F . f ) in ( rng F ) by A81,FUNCT_1:def 3;
A85: (for j holds (j in ( dom CA ) implies ( h . j ) in ( CA . j )))
proof
let j;
assume j in ( dom CA );
then reconsider i = j as (Element of I9) by PARTFUN1:def 2;
A86: ( dom ( (the Sorts of ( A9 . i )) * Rs ) ) = ( dom Rs ) by A8,PARTFUN1:def 2;
A87: (ex U0 being MSAlgebra over S st (U0 = ( A9 . i ) & ( CA . i ) = ( (the Sorts of U0) . rs ))) by CKB20:def 1;
( Result (o,( A9 . i )) ) = ( ( (the Sorts of ( A9 . i )) * Rs ) . o ) by MSUALG_1:def 5
.= ( (the Sorts of ( A9 . i )) . ( Rs . o ) ) by A8,A86,FUNCT_1:12
.= ( CA . i ) by A87,MSUALG_1:def 2;
hence thesis by A83,A84,CKB30:1;
end;
( dom h ) = I9 by A83,A84,CKB30:1;
hence thesis by A9,A78,A85,CARD_3:9;
end;
( f . x ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ) by A2
.= ( Commute ( Frege ( A ?. o ) ) ) by A31,FUNCOP_1:def 8;
hence thesis by A32,A77,FUNCT_2:2;
end;
end;
then reconsider f as (ManySortedFunction of AS,RS) by PBOOLE:def 15;
take f;
let o being (OperSymbol of S);
thus ( f . o ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ) by A2;
end;
assume I = ( {} );
set f = the (ManySortedFunction of ( ( ( SORTS A ) # ) * (the Arity of S) ),( ( SORTS A ) * (the ResultSort of S) ));
take f;
end;
uniqueness
proof
let f being (ManySortedFunction of ( ( ( SORTS A ) # ) * (the Arity of S) ),( ( SORTS A ) * (the ResultSort of S) ));
let g being (ManySortedFunction of ( ( ( SORTS A ) # ) * (the Arity of S) ),( ( SORTS A ) * (the ResultSort of S) ));
hereby
assume I <> ( {} );
assume that
A88: (for o being (OperSymbol of S) holds ( f . o ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ))
and
A89: (for o being (OperSymbol of S) holds ( g . o ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ));
(for i holds (i in (the carrier' of S) implies ( f . i ) = ( g . i )))
proof
let i;
assume i in (the carrier' of S);
then reconsider o = i as (Element of (the carrier' of S));
( f . o ) = ( IFEQ (( the_arity_of o ),( {} ),( commute ( A ?. o ) ),( Commute ( Frege ( A ?. o ) ) )) ) by A88;
hence thesis by A89;
end;
hence f = g by PBOOLE:3;
end;
assume A90: I = ( {} );
A91:now
let o being set;
assume A92: o in (the carrier' of S);
then reconsider s = ( (the ResultSort of S) . o ) as (SortSymbol of S) by FUNCT_2:5;
o in ( dom (the ResultSort of S) ) by A92,FUNCT_2:def 1;
then A93: ( ( ( SORTS A ) * (the ResultSort of S) ) . o ) = ( ( SORTS A ) . s ) by FUNCT_1:13
.= ( product ( Carrier (A,s) ) ) by CKB22:def 1
.= { ( {} ) } by A90,CKB20:def 1,CARD_3:10;
(( f . o ) is (Function of ( ( ( ( SORTS A ) # ) * (the Arity of S) ) . o ),( ( ( SORTS A ) * (the ResultSort of S) ) . o )) & ( g . o ) is (Function of ( ( ( ( SORTS A ) # ) * (the Arity of S) ) . o ),( ( ( SORTS A ) * (the ResultSort of S) ) . o ))) by A92,PBOOLE:def 15;
hence ( f . o ) = ( g . o ) by A93,FUNCT_2:51;
end;
(( dom f ) = (the carrier' of S) & ( dom g ) = (the carrier' of S)) by PARTFUN1:def 2;
hence thesis by A91,FUNCT_1:2;
end;
correctness;
end;
