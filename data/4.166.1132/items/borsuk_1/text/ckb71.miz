environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,TARSKI,RELAT_1,ZFMISC_1,MCART_1,XBOOLE_0,SETFAM_1,EQREL_1,CARD_3,PRE_TOPC,STRUCT_0,ORDINAL2,CONNSP_2,TOPS_1,RCOMP_1,FINSET_1,PCOMPS_1,METRIC_1,XXREAL_1,CARD_1,XREAL_0,ORDINAL1,XXREAL_0,REAL_1,BORSUK_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,FINSET_1,RELAT_1,FUNCT_1,MCART_1,DOMAIN_1,RCOMP_1,SETFAM_1,EQREL_1,FUNCT_3,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,STRUCT_0,METRIC_1,PCOMPS_1,PRE_TOPC,TOPS_1,TOPS_2,COMPTS_1,CONNSP_2,CKB2,CKB6,CKB9,CKB12,CKB13,CKB18,CKB20,CKB21,CKB27,CKB28,CKB40,CKB44,CKB47,CKB51,CKB59,CKB62,CKB66,CKB67,CKB69,CKB70;
definitions TARSKI,PRE_TOPC,TOPS_2,CONNSP_2,COMPTS_1,EQREL_1,STRUCT_0,XBOOLE_0,SUBSET_1,BINOP_1,RELAT_1,SETFAM_1,CKB2,CKB9,CKB21,CKB27,CKB28,CKB40,CKB44,CKB47,CKB51,CKB59,CKB62,CKB67;
theorems TARSKI,ZFMISC_1,DOMAIN_1,PRE_TOPC,FUNCT_1,FUNCT_2,TOPS_1,EQREL_1,FUNCT_3,SUBSET_1,TOPS_2,CONNSP_2,COMPTS_1,SETFAM_1,PCOMPS_1,METRIC_1,RCOMP_1,MCART_1,RELAT_1,XBOOLE_0,XBOOLE_1,XREAL_0,XXREAL_1,CKB1,CKB2,CKB4,CKB5,CKB7,CKB9,CKB11,CKB14,CKB15,CKB16,CKB17,CKB19,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB42,CKB43,CKB44,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB67;
schemes CLASSES1,DOMAIN_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,XREAL_0,MEMBERED,EQREL_1,STRUCT_0,PRE_TOPC,TOPS_1,METRIC_1,PCOMPS_1,RELSET_1,CKB3,CKB8,CKB10,CKB22,CKB41,CKB45,CKB64,CKB65,CKB68;
constructors SETFAM_1,DOMAIN_1,FUNCT_3,FINSET_1,MEMBERED,EQREL_1,RCOMP_1,TOPS_1,TOPS_2,COMPTS_1,CONNSP_2,PCOMPS_1,RELSET_1,CKB6,CKB9,CKB12,CKB13,CKB18,CKB20,CKB21,CKB27,CKB28,CKB40,CKB44,CKB47,CKB51,CKB59,CKB62,CKB66,CKB67,CKB70;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve e for set;
reserve u for set;
reserve X for non  empty TopSpace;
reserve Y for non  empty TopSpace;
definition
let X being non  empty TopSpace;
let Y being  closed non  empty (SubSpace of X);
let D being (DECOMPOSITION of Y);
redefine func space D ->  strict  closed (SubSpace of ( space ( TrivExt D ) ));

correctness
proof
A1: (the topology of ( space ( TrivExt D ) )) = { A where A is (Subset of ( TrivExt D )): ( union A ) in (the topology of X) } by CKB44:def 1;
A2: (the carrier of ( space ( TrivExt D ) )) = ( TrivExt D ) by CKB44:def 1;
A3: (the topology of ( space D )) = { A where A is (Subset of D): ( union A ) in (the topology of Y) } by CKB44:def 1;
A4: (the carrier of ( space D )) = D by CKB44:def 1;
A5: (( [#] ( space D ) ) = D & ( [#] ( space ( TrivExt D ) ) ) = ( TrivExt D )) by CKB44:def 1;
now
thus ( [#] ( space D ) ) c= ( [#] ( space ( TrivExt D ) ) ) by A5,XBOOLE_1:7;
let P being (Subset of ( space D ));
thus (P in (the topology of ( space D )) implies (ex Q being (Subset of ( space ( TrivExt D ) )) st (Q in (the topology of ( space ( TrivExt D ) )) & P = ( Q /\ ( [#] ( space D ) ) ))))
proof
D c= ( TrivExt D ) by XBOOLE_1:7;
then A6: P c= ( TrivExt D ) by A4,XBOOLE_1:1;
assume P in (the topology of ( space D ));
then consider A being (Subset of D) such that A7: P = A and A8: ( union A ) in (the topology of Y) by A3;
reconsider B = ( union A ) as (Subset of Y) by A8;
consider C being (Subset of X) such that A9: C in (the topology of X) and A10: B = ( C /\ ( [#] Y ) ) by A8,PRE_TOPC:def 4;
{ { x } where x is (Point of X): x in ( C \ ( [#] Y ) ) } c= ( TrivExt D )
proof
let e;
assume e in { { x } where x is (Point of X): x in ( C \ ( [#] Y ) ) };
then consider x being (Point of X) such that A11: e = { x } and A12: x in ( C \ ( [#] Y ) );
(not x in (the carrier of Y)) by A12,XBOOLE_0:def 5;
hence thesis by A11,CKB53:1;
end;
then reconsider Q = ( P \/ { { x } where x is (Point of X): x in ( C \ ( [#] Y ) ) } ) as (Subset of ( space ( TrivExt D ) )) by A2,A6,XBOOLE_1:8;
take Q;
now
let e;
thus (e in C implies (ex u st (e in u & u in Q)))
proof
assume A13: e in C;
then reconsider x = e as (Point of X);
now
per cases ;
case e in ( [#] Y );
then e in B by A10,A13,XBOOLE_0:def 4;
then consider u such that A14: (e in u & u in P) by A7,TARSKI:def 4;
take u;
thus (e in u & u in Q) by A14,XBOOLE_0:def 3;
end;
case A15: (not e in ( [#] Y ));
take u = { e };
thus e in u by TARSKI:def 1;
x in ( C \ ( [#] Y ) ) by A13,A15,XBOOLE_0:def 5;
then u in { { y } where y is (Point of X): y in ( C \ ( [#] Y ) ) };
hence u in Q by XBOOLE_0:def 3;
end;
end;
hence thesis;
end;

given u such that
A16: e in u
and
A17: u in Q;

now
per cases  by A17,XBOOLE_0:def 3;
suppose u in P;

then e in B by A7,A16,TARSKI:def 4;
hence e in C by A10,XBOOLE_0:def 4;
end;
suppose u in { { x } where x is (Point of X): x in ( C \ ( [#] Y ) ) };

then consider x being (Point of X) such that A18: u = { x } and A19: x in ( C \ ( [#] Y ) );
e = x by A16,A18,TARSKI:def 1;
hence e in C by A19,XBOOLE_0:def 5;
end;
end;
hence e in C;
end;
then C = ( union Q ) by TARSKI:def 4;
hence Q in (the topology of ( space ( TrivExt D ) )) by A2,A1,A9;
P c= Q by XBOOLE_1:7;
hence P c= ( Q /\ ( [#] ( space D ) ) ) by XBOOLE_1:19;
let e;
assume A20: e in ( Q /\ ( [#] ( space D ) ) );
then A21: e in ( [#] ( space D ) );
A22:now
assume e in { { x } where x is (Point of X): x in ( C \ ( [#] Y ) ) };
then consider x being (Point of X) such that A23: e = { x } and A24: x in ( C \ ( [#] Y ) );
A25: (not x in (the carrier of Y)) by A24,XBOOLE_0:def 5;
then (not ( ( Proj ( TrivExt D ) ) . x ) in (the carrier of ( space D ))) by CKB57:1;
hence contradiction by A21,A23,A25,CKB55:1;
end;
e in Q by A20,XBOOLE_0:def 4;
hence thesis by A22,XBOOLE_0:def 3;
end;

given Q being (Subset of ( space ( TrivExt D ) )) such that
A26: Q in (the topology of ( space ( TrivExt D ) ))
and
A27: P = ( Q /\ ( [#] ( space D ) ) );

A28: ( union P ) is (Subset of Y) by A4,EQREL_1:61;
now
let e;
thus (e in ( ( union Q ) /\ ( [#] Y ) ) implies (ex u st (e in u & u in P)))
proof
assume A29: e in ( ( union Q ) /\ ( [#] Y ) );
then A30: ( ( Proj ( TrivExt D ) ) . e ) in (the carrier of ( space D )) by CKB58:1;
e in ( union Q ) by A29,XBOOLE_0:def 4;
then consider u such that A31: e in u and A32: u in Q by TARSKI:def 4;
take u;
thus e in u by A31;
u is (Element of ( TrivExt D )) by A32,CKB44:def 1;
then u = ( ( Proj ( TrivExt D ) ) . e ) by A31,EQREL_1:65;
hence thesis by A27,A32,A30,XBOOLE_0:def 4;
end;

given u such that
A33: e in u
and
A34: u in P;

u in Q by A27,A34,XBOOLE_0:def 4;
then A35: e in ( union Q ) by A33,TARSKI:def 4;
e in ( union P ) by A33,A34,TARSKI:def 4;
hence e in ( ( union Q ) /\ ( [#] Y ) ) by A28,A35,XBOOLE_0:def 4;
end;
then A36: ( union P ) = ( ( union Q ) /\ ( [#] Y ) ) by TARSKI:def 4;
(ex A being (Subset of ( TrivExt D )) st (Q = A & ( union A ) in (the topology of X))) by A1,A26;
then ( union P ) in (the topology of Y) by A36,PRE_TOPC:def 4;
hence P in (the topology of ( space D )) by A4,A3;
end;
then reconsider T = ( space D ) as (SubSpace of ( space ( TrivExt D ) )) by PRE_TOPC:def 4;
T is  closed
proof
let A being (Subset of ( space ( TrivExt D ) ));
assume that
A37: A = (the carrier of T);
reconsider C = ( A ` ) as (Subset of ( TrivExt D )) by CKB44:def 1;
reconsider B = ( union A ) as (Subset of X) by A2,EQREL_1:61;
B = (the carrier of Y) by A4,A37,EQREL_1:def 4;
then B is  closed by CKB62:def 1;
then A38: ( B ` ) in (the topology of X) by PRE_TOPC:def 2;
( union C ) = ( B ` ) by A2,EQREL_1:63;
then ( A ` ) in (the topology of ( space ( TrivExt D ) )) by A38,CKB46:1;
then ( A ` ) is  open by PRE_TOPC:def 2;
hence thesis by TOPS_1:3;
end;
hence thesis;
end;
end;
