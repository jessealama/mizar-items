environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,SETFAM_1,SUBSET_1,RPR_1,FUNCT_1,TARSKI,RELAT_1,REAL_1,CARD_1,ARYTM_1,CARD_3,PROB_3,NAT_1,ARYTM_3,ZFMISC_1,PROB_2,XREAL_0,ORDINAL1,DYNKIN,VALUED_1,XXREAL_0,SERIES_1,ORDINAL2,FUNCOP_1,FINSEQ_1,FINSET_1,FINSUB_1,SETWISEO,ORDINAL4,EQREL_1,KOLMOG01;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,REAL_1,ORDINAL1,XCMPLX_0,XXREAL_0,NAT_1,XREAL_0,NUMBERS,FINSET_1,DYNKIN,FINSUB_1,RELAT_1,CARD_3,SEQ_2,SETFAM_1,FUNCT_1,RELSET_1,VALUED_1,FINSEQ_1,RVSUM_1,PARTFUN1,FUNCT_2,PROB_3,SERIES_1,FUNCOP_1,SETWISEO,FINSEQOP,KURATO_0,PROB_1,PROB_2,CKB4,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB21,CKB23,CKB29;
definitions PROB_1,SUBSET_1,TARSKI,XBOOLE_0,PROB_3,CARD_3,CKB4,CKB12,CKB13,CKB14,CKB15,CKB18,CKB19,CKB21,CKB23,CKB29;
theorems XCMPLX_1,PROB_1,TARSKI,SUBSET_1,XBOOLE_0,DYNKIN,ZFMISC_1,PROB_2,XBOOLE_1,SERIES_1,PROB_3,PROB_4,FUNCT_1,FUNCT_2,SEQ_1,SEQ_2,RELAT_1,SETFAM_1,CARD_5,FINSUB_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,RVSUM_1,ORDINAL1,WELLORD2,FINSEQOP,NAT_1,VALUED_0,FUNCOP_1,RELSET_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB18,CKB19,CKB21,CKB23,CKB24,CKB25,CKB26,CKB28,CKB29,CKB30;
schemes NAT_1,XBOOLE_0,SETWISEO,PARTFUN1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,VALUED_1,RELSET_1,NUMBERS,XREAL_0,MEMBERED,PROB_1,RELAT_1,FINSET_1,FINSEQ_1,FINSUB_1,FUNCT_1,FUNCT_2,VALUED_0,PROB_3,CKB20,CKB22,CKB27;
constructors SEQ_2,DYNKIN,REAL_1,SEQ_1,PROB_3,SERIES_1,KURATO_0,RINFSUP1,SETFAM_1,BINOP_2,RVSUM_1,WELLORD2,FINSEQOP,SETWISEO,RELSET_1,MEASURE1,CKB4,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB21,CKB23,CKB29;
requirements SUBSET,NUMERALS,BOOLE,ARITHM;
begin
reserve Omega for non  empty set;
reserve I for non  empty set;
reserve Sigma for (SigmaField of Omega);
reserve P for (Probability of Sigma);
reserve E for (Subset-Family of Omega);
reserve F for (Subset-Family of Omega);
reserve a for (Element of Sigma);
reserve p for (Event of Sigma);
reserve q for (Event of Sigma);
reserve u for (Event of Sigma);
reserve v for (Event of Sigma);
reserve S for set;
reserve X for set;
reserve x for set;
reserve y for set;
reserve z for set;
reserve i for set;
theorem
(for F being (ManySortedSigmaField of I,Sigma) holds ((F is_independent_wrt P & a in ( tailSigmaField (F,I) )) implies (( P . a ) = ( 0 ) or ( P . a ) = 1)))
proof
let F being (ManySortedSigmaField of I,Sigma);
reconsider T = ( tailSigmaField (F,I) ) as (SigmaField of Omega) by CKB30:1;
set Ie = ( I \ ( {} I ) );
A1: (a in ( tailSigmaField (F,I) ) implies a in ( sigUn (F,Ie) ))
proof
assume A2: a in ( tailSigmaField (F,I) );
( sigUn (F,Ie) ) in ( futSigmaFields (F,I) ) by CKB19:def 1;
hence thesis by A2,SETFAM_1:def 1;
end;
assume A3: F is_independent_wrt P;
A4: (for E being  finite (Subset of I) holds (for p holds (for q holds ((p in ( sigUn (F,E) ) & q in ( tailSigmaField (F,I) )) implies p,q are_independent_respect_to P))))
proof
let E being  finite (Subset of I);
let p;
let q;
assume that
A5: p in ( sigUn (F,E) )
and
A6: q in ( tailSigmaField (F,I) );
(for E being  finite (Subset of I) holds q in ( sigUn (F,( I \ E )) ))
proof
let E being  finite (Subset of I);
( sigUn (F,( I \ E )) ) in ( futSigmaFields (F,I) ) by CKB19:def 1;
hence thesis by A6,SETFAM_1:def 1;
end;
then A7: q in ( sigUn (F,( I \ E )) );
per cases ;
suppose A8: (E <> ( {} ) & ( I \ E ) <> ( {} ));

then reconsider E as non  empty (Subset of I);
reconsider IE = ( I \ E ) as non  empty (Subset of I) by A8;
E misses IE by XBOOLE_1:79;
then ( P . ( p /\ q ) ) = ( ( P . p ) * ( P . q ) ) by A3,A5,A7,CKB28:1;
hence thesis by PROB_2:def 4;
end;
suppose A9: (not (E <> ( {} ) & ( I \ E ) <> ( {} )));

reconsider e = ( {} ) as (Subset of I) by XBOOLE_1:2;
A10: (for u holds (for v holds (u in { ( {} ),Omega } implies u,v are_independent_respect_to P)))
proof
let u;
let v;
assume A11: u in { ( {} ),Omega };
per cases ;
suppose u = ( {} );

hence thesis by PROB_2:19,PROB_2:23;
end;
suppose u <> ( {} );

then u = ( [#] Sigma ) by A11,TARSKI:def 2;
hence thesis by PROB_2:19,PROB_2:24;
end;
end;
( Union ( F | ( {} ) ) ) = ( {} ) by ZFMISC_1:2;
then A12: ( sigUn (F,e) ) = { ( {} ),Omega } by CKB3:1;
p,q are_independent_respect_to P
proof
per cases ;
suppose E = ( {} );

hence thesis by A5,A12,A10;
end;
suppose E <> ( {} );

hence thesis by A7,A9,A12,A10,PROB_2:19;
end;
end;
hence thesis;
end;
end;
A13: (for p holds (for q holds ((p in ( finSigmaFields (F,I) ) & q in ( tailSigmaField (F,I) )) implies p,q are_independent_respect_to P)))
proof
let p;
let q;
assume that
A14: p in ( finSigmaFields (F,I) )
and
A15: q in ( tailSigmaField (F,I) );
(ex E being  finite (Subset of I) st p in ( sigUn (F,E) )) by A14,CKB29:def 1;
hence thesis by A4,A15;
end;
( Union ( F | Ie ) ) c= ( sigma ( finSigmaFields (F,I) ) )
proof
let x;
A16: ( dom F ) c= Ie;
assume x in ( Union ( F | Ie ) );
then x in ( union ( rng F ) ) by A16,RELAT_1:68;
then consider y such that A17: x in y and A18: y in ( rng F ) by TARSKI:def 4;
consider i such that A19: i in ( dom F ) and A20: y = ( F . i ) by A18,FUNCT_1:def 3;
A21: x in ( finSigmaFields (F,I) )
proof
reconsider Fi = ( F . i ) as (SigmaField of Omega) by A19,CKB12:def 1;
A22: (( sigma Fi ) c= Fi & Fi c= ( sigma Fi )) by PROB_1:def 9;
i in I by A19;
then (z in { i } implies z in I) by TARSKI:def 1;
then reconsider E = { i } as  finite (Subset of I) by TARSKI:def 3;
A23: ( dom ( F | { i } ) ) = ( ( dom F ) /\ { i } ) by RELAT_1:61
.= { i } by A19,ZFMISC_1:46;
then ( rng ( F | { i } ) ) = { ( ( F | { i } ) . i ) } by FUNCT_1:4;
then A24: ( union ( rng ( F | { i } ) ) ) = ( ( F | { i } ) . i ) by ZFMISC_1:25;
i in ( dom ( F | { i } ) ) by A23,TARSKI:def 1;
then ( Union ( F | { i } ) ) = ( F . i ) by A24,FUNCT_1:47;
then ( sigUn (F,E) ) = ( F . i ) by A22,XBOOLE_0:def 10;
hence thesis by A17,A20,CKB29:def 1;
end;
( finSigmaFields (F,I) ) c= ( sigma ( finSigmaFields (F,I) ) ) by PROB_1:def 9;
hence thesis by A21;
end;
then A25: (T c= ( sigma T ) & ( sigUn (F,Ie) ) c= ( sigma ( finSigmaFields (F,I) ) )) by PROB_1:def 9;
A26: (for u holds (for v holds ((u in ( sigUn (F,Ie) ) & v in ( tailSigmaField (F,I) )) implies u,v are_independent_respect_to P)))
proof
(for x holds (for y holds ((x in ( finSigmaFields (F,I) ) & y in ( finSigmaFields (F,I) )) implies ( x /\ y ) in ( finSigmaFields (F,I) ))))
proof
let x;
let y;
assume that
A27: x in ( finSigmaFields (F,I) )
and
A28: y in ( finSigmaFields (F,I) );
consider E1 being  finite (Subset of I) such that A29: x in ( sigUn (F,E1) ) by A27,CKB29:def 1;
consider E2 being  finite (Subset of I) such that A30: y in ( sigUn (F,E2) ) by A28,CKB29:def 1;
A31: (for E1,E2 being  finite (Subset of I) holds (z in ( sigUn (F,E1) ) implies z in ( sigUn (F,( E1 \/ E2 )) )))
proof
let E1 being  finite (Subset of I);
let E2 being  finite (Subset of I);
reconsider E3 = ( E1 \/ E2 ) as  finite (Subset of I);
A32: ( Union ( F | E1 ) ) c= ( Union ( F | E3 ) )
proof
let X;
assume X in ( Union ( F | E1 ) );
then consider S such that A33: X in S and A34: S in ( rng ( F | E1 ) ) by TARSKI:def 4;
( F | E3 ) = ( ( F | E1 ) \/ ( F | E2 ) ) by RELAT_1:78;
then ( rng ( F | E3 ) ) = ( ( rng ( F | E1 ) ) \/ ( rng ( F | E2 ) ) ) by RELAT_1:12;
then S in ( rng ( F | E3 ) ) by A34,XBOOLE_0:def 3;
hence thesis by A33,TARSKI:def 4;
end;
( Union ( F | E3 ) ) c= ( sigma ( Union ( F | E3 ) ) ) by PROB_1:def 9;
then ( Union ( F | E1 ) ) c= ( sigma ( Union ( F | E3 ) ) ) by A32,XBOOLE_1:1;
then A35: ( sigma ( Union ( F | E1 ) ) ) c= ( sigma ( Union ( F | E3 ) ) ) by PROB_1:def 9;
assume z in ( sigUn (F,E1) );
hence thesis by A35;
end;
then A36: y in ( sigUn (F,( E2 \/ E1 )) ) by A30;
x in ( sigUn (F,( E1 \/ E2 )) ) by A29,A31;
then ( x /\ y ) in ( sigUn (F,( E1 \/ E2 )) ) by A36,FINSUB_1:def 2;
hence thesis by CKB29:def 1;
end;
then A37: ( finSigmaFields (F,I) ) is  intersection_stable by FINSUB_1:def 2;
let u;
let v;
A38: ( finSigmaFields (F,I) ) is non  empty
proof
set E = the  finite (Subset of I);
( {} ) in ( sigUn (F,E) ) by PROB_1:4;
hence thesis by CKB29:def 1;
end;
A39: ( tailSigmaField (F,I) ) c= Sigma
proof
set Ie = ( I \ ( {} I ) );
let x;
assume A40: x in ( tailSigmaField (F,I) );
( Union ( F | Ie ) ) c= Sigma
proof
let y;
assume y in ( Union ( F | Ie ) );
then (ex S st (y in S & S in ( rng ( F | Ie ) ))) by TARSKI:def 4;
hence thesis;
end;
then A41: ( sigma ( Union ( F | Ie ) ) ) c= Sigma by PROB_1:def 9;
( sigUn (F,Ie) ) in ( futSigmaFields (F,I) ) by CKB19:def 1;
then x in ( sigma ( Union ( F | Ie ) ) ) by A40,SETFAM_1:def 1;
hence thesis by A41;
end;
A42: ( finSigmaFields (F,I) ) c= Sigma
proof
let x;
assume x in ( finSigmaFields (F,I) );
then consider E being  finite (Subset of I) such that A43: x in ( sigUn (F,E) ) by CKB29:def 1;
( Union ( F | E ) ) c= Sigma
proof
let y;
assume y in ( Union ( F | E ) );
then (ex S st (y in S & S in ( rng ( F | E ) ))) by TARSKI:def 4;
hence thesis;
end;
then ( sigma ( Union ( F | E ) ) ) c= Sigma by PROB_1:def 9;
hence thesis by A43;
end;
assume (u in ( sigUn (F,Ie) ) & v in ( tailSigmaField (F,I) ));
hence thesis by A13,A25,A38,A42,A37,A39,CKB11:1;
end;
assume a in ( tailSigmaField (F,I) );
then a,a are_independent_respect_to P by A1,A26;
then ( P . ( a /\ a ) ) = ( ( P . a ) * ( P . a ) ) by PROB_2:def 4;
hence thesis by CKB2:1;
end;
