environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,SETFAM_1,SUBSET_1,RPR_1,FUNCT_1,TARSKI,RELAT_1,REAL_1,CARD_1,ARYTM_1,CARD_3,PROB_3,NAT_1,ARYTM_3,ZFMISC_1,PROB_2,XREAL_0,ORDINAL1,DYNKIN,VALUED_1,XXREAL_0,SERIES_1,ORDINAL2,FUNCOP_1,FINSEQ_1,FINSET_1,FINSUB_1,SETWISEO,ORDINAL4,EQREL_1,KOLMOG01;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,REAL_1,ORDINAL1,XCMPLX_0,XXREAL_0,NAT_1,XREAL_0,NUMBERS,FINSET_1,DYNKIN,FINSUB_1,RELAT_1,CARD_3,SEQ_2,SETFAM_1,FUNCT_1,RELSET_1,VALUED_1,FINSEQ_1,RVSUM_1,PARTFUN1,FUNCT_2,PROB_3,SERIES_1,FUNCOP_1,SETWISEO,FINSEQOP,KURATO_0,PROB_1,PROB_2,CKB4,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB21,CKB23;
definitions PROB_1,SUBSET_1,TARSKI,XBOOLE_0,PROB_3,CARD_3,CKB4,CKB12,CKB13,CKB14,CKB15,CKB18,CKB19,CKB21,CKB23;
theorems XCMPLX_1,PROB_1,TARSKI,SUBSET_1,XBOOLE_0,DYNKIN,ZFMISC_1,PROB_2,XBOOLE_1,SERIES_1,PROB_3,PROB_4,FUNCT_1,FUNCT_2,SEQ_1,SEQ_2,RELAT_1,SETFAM_1,CARD_5,FINSUB_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,RVSUM_1,ORDINAL1,WELLORD2,FINSEQOP,NAT_1,VALUED_0,FUNCOP_1,RELSET_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB18,CKB19,CKB21,CKB23;
schemes NAT_1,XBOOLE_0,SETWISEO,PARTFUN1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,VALUED_1,RELSET_1,NUMBERS,XREAL_0,MEMBERED,PROB_1,RELAT_1,FINSET_1,FINSEQ_1,FINSUB_1,FUNCT_1,FUNCT_2,VALUED_0,PROB_3,CKB20,CKB22;
constructors SEQ_2,DYNKIN,REAL_1,SEQ_1,PROB_3,SERIES_1,KURATO_0,RINFSUP1,SETFAM_1,BINOP_2,RVSUM_1,WELLORD2,FINSEQOP,SETWISEO,RELSET_1,MEASURE1,CKB4,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB21,CKB23;
requirements SUBSET,NUMERALS,BOOLE,ARITHM;
begin
reserve Omega for non empty set;
reserve I for non empty set;
reserve Sigma for (SigmaField of Omega);
reserve x for set;
reserve y for set;
reserve i for set;
reserve j for set;
theorem
Th11: (for F being (ManySortedSigmaField of I,Sigma) holds (for J being non empty (Subset of I) holds ( sigma ( MeetSections (J,F) ) ) = ( sigUn (F,J) )))
proof
let F being (ManySortedSigmaField of I,Sigma);
let J being non empty (Subset of I);
A1: ( Union ( F | J ) ) c= ( MeetSections (J,F) )
proof
let x;
assume x in ( Union ( F | J ) );
then consider y such that A2: x in y and A3: y in ( rng ( F | J ) ) by TARSKI:def 4;
consider i such that A4: i in ( dom ( F | J ) ) and A5: y = ( ( F | J ) . i ) by A3,FUNCT_1:def 3;
reconsider x as (Subset of Omega) by A2,A5;
defpred P[ set,set ]
 means
($2 = x & $2 in ( F . $1 ));
A6: { i } c= J by A4,ZFMISC_1:31;
then reconsider E = { i } as  finite (Subset of I) by XBOOLE_1:1;
A7: (for j holds (j in E implies (ex y st (y in Sigma & P[ j,y ]))))
proof
let j;
assume A8: j in E;
i in I by A4,TARSKI:def 3;
then A9: ( F . i ) in ( bool Sigma ) by FUNCT_2:5;
take y = x;
y in ( F . i ) by A2,A4,A5,FUNCT_1:49;
hence thesis by A8,A9,TARSKI:def 1;
end;
consider g being (Function of E,Sigma) such that A10: (for j holds (j in E implies P[ j,( g . j ) ])) from FUNCT_2:sch 1(A7);
(for i holds (i in E implies ( g . i ) in ( F . i ))) by A10;
then reconsider g as (SigmaSection of E,F) by CKB14:def 1;
( dom g ) = E by FUNCT_2:def 1;
then A11: ( rng g ) = { ( g . i ) } by FUNCT_1:4;
i in E by TARSKI:def 1;
then x = ( g . i ) by A10
.= ( meet ( rng g ) ) by A11,SETFAM_1:10;
hence thesis by A6,CKB23:def 1;
end;
( MeetSections (J,F) ) c= ( sigma ( Union ( F | J ) ) )
proof
let x;
assume x in ( MeetSections (J,F) );
then consider E being non empty  finite (Subset of I),f being (SigmaSection of E,F) such that A12: E c= J and A13: x = ( meet ( rng f ) ) by CKB23:def 1;
reconsider Ee = E as (Element of ( Fin E )) by FINSUB_1:def 5;
(for B being (Element of ( Fin E )) holds ( meet ( rng ( f | B ) ) ) in ( sigma ( Union ( F | J ) ) ))
proof
defpred P[ set ]
 means
( meet ( rng ( f | $1 ) ) ) in ( sigma ( Union ( F | J ) ) );
let B being (Element of ( Fin E ));
A14: (for B9 being (Element of ( Fin E )) holds (for b being (Element of E) holds ((P[ B9 ] & (not b in B9)) implies P[ ( B9 \/ { b } ) ])))
proof
let B9 being (Element of ( Fin E ));
let b being (Element of E);
assume that
A15: ( meet ( rng ( f | B9 ) ) ) in ( sigma ( Union ( F | J ) ) )
and
(not b in B9);
reconsider rfb = ( rng ( f | { b } ) ) as set;
reconsider rfB9 = ( rng ( f | B9 ) ) as set;
reconsider rfB9b = ( rng ( f | ( B9 \/ { b } ) ) ) as set;
( rng ( f | ( B9 \/ { b } ) ) ) = ( rng ( ( f | B9 ) \/ ( f | { b } ) ) ) by RELAT_1:78;
then A16: ( rng ( f | ( B9 \/ { b } ) ) ) = ( ( rng ( f | B9 ) ) \/ ( rng ( f | { b } ) ) ) by RELAT_1:12;
( dom ( F | J ) ) = J by FUNCT_2:def 1;
then A17: b in ( dom ( F | J ) ) by A12,TARSKI:def 3;
then ( ( F | J ) . b ) in ( rng ( F | J ) ) by FUNCT_1:def 3;
then ( F . b ) in ( rng ( F | J ) ) by A17,FUNCT_1:47;
then A18: ( F . b ) c= ( Union ( F | J ) ) by ZFMISC_1:74;
( Union ( F | J ) ) c= ( sigma ( Union ( F | J ) ) ) by PROB_1:def 9;
then A19: ( F . b ) c= ( sigma ( Union ( F | J ) ) ) by A18,XBOOLE_1:1;
b is (Element of ( dom f )) by FUNCT_2:def 1;
then A20: { b } = ( ( dom f ) /\ { b } ) by ZFMISC_1:46
.= ( dom ( f | { b } ) ) by RELAT_1:61;
then A21: b in ( dom ( f | { b } ) ) by TARSKI:def 1;
( rng ( f | { b } ) ) = { ( ( f | { b } ) . b ) } by A20,FUNCT_1:4
.= { ( f . b ) } by A21,FUNCT_1:47;
then ( meet ( rng ( f | { b } ) ) ) = ( f . b ) by SETFAM_1:10;
then A22: ( meet ( rng ( f | { b } ) ) ) in ( F . b ) by CKB14:def 1;
per cases ;
suppose ( rng ( f | B9 ) ) = ( {} );

hence thesis by A22,A19,A16;
end;
suppose A23: (not ( rng ( f | B9 ) ) = ( {} ));

(( dom f ) = E & b in { b }) by FUNCT_2:def 1,TARSKI:def 1;
then rfb <> ( {} ) by FUNCT_1:50;
then ( meet rfB9b ) = ( ( meet rfB9 ) /\ ( meet rfb ) ) by A16,A23,SETFAM_1:9;
then ( meet ( rng ( f | ( B9 \/ { b } ) ) ) ) is (Event of ( sigma ( Union ( F | J ) ) )) by A15,A22,A19,PROB_1:19;
hence thesis;
end;
end;
( meet ( rng ( f | ( {} ) ) ) ) = ( {} ) by SETFAM_1:def 1;
then A24: P[ ( {}. E ) ] by PROB_1:4;
(for B1 being (Element of ( Fin E )) holds P[ B1 ]) from SETWISEO:sch 2(A24,A14);
hence thesis;
end;
then ( meet ( rng ( f | Ee ) ) ) in ( sigma ( Union ( F | J ) ) );
hence thesis by A13,RELSET_1:19;
end;
hence ( sigma ( MeetSections (J,F) ) ) c= ( sigUn (F,J) ) by PROB_1:def 9;
( MeetSections (J,F) ) c= ( sigma ( MeetSections (J,F) ) ) by PROB_1:def 9;
then ( Union ( F | J ) ) c= ( sigma ( MeetSections (J,F) ) ) by A1,XBOOLE_1:1;
hence thesis by PROB_1:def 9;
end;
