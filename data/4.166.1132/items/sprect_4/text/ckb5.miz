environ
vocabularies NUMBERS,SUBSET_1,SPPOL_2,RCOMP_1,EUCLID,TOPREAL1,XBOOLE_0,PARTFUN1,JORDAN3,JORDAN5C,FINSEQ_1,XXREAL_0,ARYTM_3,GROUP_2,RELAT_1,TARSKI,PRE_TOPC,FUNCT_1,ARYTM_1,RLTOPSP1,ORDINAL4,SPRECT_2,GOBOARD5,PSCOMP_1,GOBOARD9,SPRECT_1,GOBOARD2,TREES_1,MATRIX_1,TOPS_1,MCART_1,TOPREAL4,SPPOL_1,FINSEQ_5,FINSEQ_4,FINSEQ_6;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,REAL_1,NAT_1,NAT_D,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_4,MATRIX_1,STRUCT_0,PRE_TOPC,TOPS_1,RLVECT_1,RLTOPSP1,EUCLID,TOPREAL1,TOPREAL4,FINSEQ_5,FINSEQ_6,GOBOARD2,SPPOL_1,SPPOL_2,GOBOARD5,GOBOARD9,JORDAN3,PSCOMP_1,JORDAN5C,SPRECT_1,SPRECT_2,XXREAL_0;
definitions PSCOMP_1,RLTOPSP1;
theorems TOPREAL1,JORDAN5C,JORDAN3,FINSEQ_3,SPPOL_2,TOPS_1,SPPOL_1,TOPREAL3,FINSEQ_5,NAT_1,SPRECT_1,JORDAN5B,SPRECT_2,GOBOARD5,FINSEQ_4,GOBOARD7,GOBOARD6,GOBOARD9,ZFMISC_1,TOPREAL4,PSCOMP_1,JORDAN4,FINSEQ_6,FINSEQ_1,TARSKI,EUCLID,SUBSET_1,JORDAN5D,SPRECT_3,REVROT_1,PARTFUN2,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,CARD_1,MATRIX_1,NAT_D,RLTOPSP1,CKB1,CKB2,CKB3,CKB4;
registrations XBOOLE_0,RELSET_1,MEMBERED,REALSET1,FINSEQ_6,STRUCT_0,COMPTS_1,TOPREAL1,GOBOARD2,SPPOL_2,GOBOARD9,SPRECT_1,SPRECT_3,REVROT_1,FUNCT_1,EUCLID,ZFMISC_1,FINSEQ_1;
constructors XXREAL_0,REAL_1,NAT_1,FINSEQ_4,BINARITH,TOPS_1,TOPS_2,COMPTS_1,REALSET2,MATRIX_2,TOPMETR,TOPREAL4,GOBOARD2,SPPOL_1,PSCOMP_1,GOBOARD9,JORDAN3,JORDAN5C,SPRECT_1,SPRECT_2,GOBOARD1,NAT_D;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
theorem
Th6: (for f being S-Sequence_in_R2 holds (for Q being  closed (Subset of ( TOP-REAL 2 )) holds ((( L~ f ) meets Q & (not ( f /. ( len f ) ) in Q)) implies ( ( L~ ( L_Cut (f,( Last_Point (( L~ f ),( f /. 1 ),( f /. ( len f ) ),Q) )) ) ) /\ Q ) = { ( Last_Point (( L~ f ),( f /. 1 ),( f /. ( len f ) ),Q) ) })))
proof
let f being S-Sequence_in_R2;
let Q being  closed (Subset of ( TOP-REAL 2 ));
assume that
A1: ( L~ f ) meets Q
and
A2: (not ( f /. ( len f ) ) in Q);
set p1 = ( f /. 1 );
set p2 = ( f /. ( len f ) );
set lp = ( Last_Point (( L~ f ),p1,p2,Q) );
A3: ( ( L~ f ) /\ Q ) is  closed by TOPS_1:8;
( len f ) >= ( 1 + 1 ) by TOPREAL1:def 8;
then A4: ( len f ) > 1 by NAT_1:13;
( L~ f ) is_an_arc_of p1,p2 by TOPREAL1:25;
then A5: lp in ( ( L~ f ) /\ Q ) by A1,A3,JORDAN5C:def 2;
then A6: lp in ( L~ f ) by XBOOLE_0:def 4;
then A7: 1 <= ( Index (lp,f) ) by JORDAN3:8;
A8:now
set m = ( mid (f,( ( Index (lp,f) ) + 1 ),( len f )) );
assume (not ( ( L~ ( L_Cut (f,lp) ) ) /\ Q ) c= { lp });
then consider q being set such that A9: q in ( ( L~ ( L_Cut (f,lp) ) ) /\ Q ) and A10: (not q in { lp }) by TARSKI:def 3;
reconsider q as (Point of ( TOP-REAL 2 )) by A9;
A11: q in ( L~ ( L_Cut (f,lp) ) ) by A9,XBOOLE_0:def 4;
A12: ( L~ ( L_Cut (f,lp) ) ) c= ( L~ f ) by A6,JORDAN3:42;
A13: ( Index (lp,f) ) < ( len f ) by A6,JORDAN3:8;
then A14: ( ( Index (lp,f) ) + 1 ) <= ( len f ) by NAT_1:13;
A15: 1 <= ( ( Index (lp,f) ) + 1 ) by NAT_1:11;
then ( len m ) = ( ( ( len f ) -' ( ( Index (lp,f) ) + 1 ) ) + 1 ) by A14,JORDAN4:8;
then A16: m is non  empty by CARD_1:27,NAT_1:11;
A17: q <> lp by A10,TARSKI:def 1;
q in Q by A9,XBOOLE_0:def 4;
then A18:  LE q,lp,( L~ f ),p1,p2 by A3,A11,A12,JORDAN5C:16;
per cases ;
suppose lp = ( f . ( ( Index (lp,f) ) + 1 ) );

then A19: q in ( L~ m ) by A11,JORDAN3:def 3;
now
assume ( ( Index (lp,f) ) + 1 ) >= ( len f );
then ( ( Index (lp,f) ) + 1 ) = ( len f ) by A14,XXREAL_0:1;
then ( len m ) = 1 by A4,JORDAN4:15;
hence contradiction by A19,TOPREAL1:22;
end;
then A20:  LE ( f /. ( ( Index (lp,f) ) + 1 ) ),q,( L~ f ),( f /. 1 ),( f /. ( len f ) ) by A19,CKB3:1,NAT_1:11;
A21: ( f /. ( ( Index (lp,f) ) + 1 ) ) in ( LSeg (lp,( f /. ( ( Index (lp,f) ) + 1 ) )) ) by RLTOPSP1:68;
lp in ( LSeg (f,( Index (lp,f) )) ) by A6,JORDAN3:9;
then  LE lp,( f /. ( ( Index (lp,f) ) + 1 ) ),( L~ f ),p1,p2 by A7,A13,A21,CKB4:1;
then  LE lp,q,( L~ f ),p1,p2 by A20,JORDAN5C:13;
hence contradiction by A17,A18,JORDAN5C:12,TOPREAL1:25;
end;
suppose A22: lp <> ( f . ( ( Index (lp,f) ) + 1 ) );

A23: lp in ( LSeg (f,( Index (lp,f) )) ) by A6,JORDAN3:9;
1 <= ( ( Index (lp,f) ) + 1 ) by NAT_1:11;
then A24: ( ( Index (lp,f) ) + 1 ) in ( dom f ) by A14,FINSEQ_3:25;
q in ( L~ ( <* lp *> ^ m ) ) by A11,A22,JORDAN3:def 3;
then A25: q in ( ( L~ m ) \/ ( LSeg (( m /. 1 ),lp) ) ) by A16,SPPOL_2:20;
now
per cases  by A25,XBOOLE_0:def 3;
suppose A26: q in ( L~ m );

now
assume ( ( Index (lp,f) ) + 1 ) >= ( len f );
then ( ( Index (lp,f) ) + 1 ) = ( len f ) by A14,XXREAL_0:1;
then ( len m ) = 1 by A4,JORDAN4:15;
hence contradiction by A26,TOPREAL1:22;
end;
then A27:  LE ( f /. ( ( Index (lp,f) ) + 1 ) ),q,( L~ f ),( f /. 1 ),( f /. ( len f ) ) by A26,CKB3:1,NAT_1:11;
( f /. ( ( Index (lp,f) ) + 1 ) ) in ( LSeg (lp,( f /. ( ( Index (lp,f) ) + 1 ) )) ) by RLTOPSP1:68;
then  LE lp,( f /. ( ( Index (lp,f) ) + 1 ) ),( L~ f ),p1,p2 by A7,A13,A23,CKB4:1;
then  LE lp,q,( L~ f ),p1,p2 by A27,JORDAN5C:13;
hence contradiction by A17,A18,JORDAN5C:12,TOPREAL1:25;
end;
suppose A28: q in ( LSeg (lp,( m /. 1 )) );

1 in ( dom m ) by A16,FINSEQ_5:6;
then ( m /. 1 ) = ( m . 1 ) by PARTFUN1:def 6
.= ( f . ( ( Index (lp,f) ) + 1 ) ) by A4,A14,A15,FINSEQ_6:118
.= ( f /. ( ( Index (lp,f) ) + 1 ) ) by A24,PARTFUN1:def 6;
then  LE lp,q,( L~ f ),p1,p2 by A7,A13,A23,A28,CKB4:1;
hence contradiction by A17,A18,JORDAN5C:12,TOPREAL1:25;
end;
end;
hence contradiction;
end;
end;
A29: lp in Q by A5,XBOOLE_0:def 4;
( len f ) in ( dom f ) by A4,FINSEQ_3:25;
then lp <> ( f . ( len f ) ) by A2,A29,PARTFUN1:def 6;
then lp in ( L~ ( L_Cut (f,lp) ) ) by A6,JORDAN5B:19;
then lp in ( ( L~ ( L_Cut (f,lp) ) ) /\ Q ) by A29,XBOOLE_0:def 4;
hence thesis by A8,ZFMISC_1:33;
end;
