environ
vocabularies NUMBERS,REAL_1,SUBSET_1,XXREAL_0,CARD_1,ARYTM_3,RELAT_1,XBOOLE_0,METRIC_1,FUNCT_1,FCONT_2,PARTFUN1,PRE_TOPC,PCOMPS_1,ORDINAL2,RCOMP_1,XREAL_0,ORDINAL1,STRUCT_0,TARSKI,SETFAM_1,FINSET_1,ZFMISC_1,TOPMETR,BORSUK_1,EUCLID,FINSEQ_1,ORDINAL4,COMPLEX1,ARYTM_1,XXREAL_1,VALUED_0,MEASURE5,NAT_1,INT_1,XXREAL_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,SETFAM_1,COMPLEX1,REAL_1,NAT_1,NAT_D,ORDINAL1,INT_1,RCOMP_1,FUNCT_1,PARTFUN1,FINSEQ_1,RELSET_1,FUNCT_2,SEQM_3,STRUCT_0,TOPMETR,PRE_TOPC,TOPS_2,COMPTS_1,EUCLID,FINSET_1,TBSP_1,METRIC_1,PCOMPS_1,CKB2,CKB20;
definitions TARSKI,ORDINAL1,EUCLID,PRE_TOPC,XCMPLX_0,CKB2,CKB20;
theorems TARSKI,RCOMP_1,TOPMETR,TOPS_1,METRIC_1,FUNCT_1,FUNCT_2,TBSP_1,NAT_1,FINSEQ_3,FINSEQ_1,ABSVALUE,PRE_TOPC,TOPS_2,FINSEQ_4,GOBOARD6,PCOMPS_1,SETFAM_1,SUBSET_1,COMPTS_1,SEQ_4,HEINE,INT_1,JORDAN2B,XBOOLE_0,XBOOLE_1,XREAL_0,FINSEQ_2,XCMPLX_1,FINSET_1,XREAL_1,XXREAL_0,PARTFUN1,XXREAL_1,EUCLID,SEQM_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22;
schemes FUNCT_2,DOMAIN_1,SUBSET_1,FINSEQ_1,NAT_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,STRUCT_0,METRIC_1,PCOMPS_1,EUCLID,TOPMETR,BORSUK_2,VALUED_0,FUNCT_2,BORSUK_1;
constructors SETFAM_1,REAL_1,NAT_1,COMPLEX1,RCOMP_1,BINARITH,TOPS_2,COMPTS_1,TBSP_1,TOPMETR,GOBOARD1,SEQ_1,SEQM_3,NAT_D,FUNCSDOM,PCOMPS_1,CKB2,CKB20;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve s1 for Real;
reserve r1 for Real;
reserve r2 for Real;
reserve n for (Element of ( NAT ));
reserve i for (Element of ( NAT ));
reserve p for (Element of ( NAT ));
theorem
(for e being Real holds (for g being (Function of ( I[01] ),( TOP-REAL n )) holds (for p1,p2 being (Element of ( TOP-REAL n )) holds ((e > ( 0 ) & g is  continuous) implies (ex h being (FinSequence of ( REAL )) st (((((( h . 1 ) = ( 0 ) & ( h . ( len h ) ) = 1) & 5 <= ( len h )) & ( rng h ) c= (the carrier of ( I[01] ))) & h is  increasing) & (for i being (Element of ( NAT )) holds (for Q being (Subset of ( I[01] )) holds (for W being (Subset of ( Euclid n )) holds ((((1 <= i & i < ( len h )) & Q = [. ( h /. i ),( h /. ( i + 1 ) ) .]) & W = ( g .: Q )) implies ( diameter W ) < e))))))))))
proof
1 in { r where r is Real: (( 0 ) <= r & r <= 1) };
then A1: 1 in [. ( 0 ),1 .] by RCOMP_1:def 1;
{ 1 } c= [. ( 0 ),1 .]
proof
let x being set;
assume x in { 1 };
hence thesis by A1,TARSKI:def 1;
end;
then A2: ( [. ( 0 ),1 .] \/ { 1 } ) = [. ( 0 ),1 .] by XBOOLE_1:12;
( Closed-Interval-TSpace (( 0 ),1) ) = ( TopSpaceMetr ( Closed-Interval-MSpace (( 0 ),1) ) ) by TOPMETR:def 7;
then A3: (the carrier of ( I[01] )) = (the carrier of ( Closed-Interval-MSpace (( 0 ),1) )) by TOPMETR:12,TOPMETR:20
.= [. (( 0 ) qua Real),(1 qua Real) .] by TOPMETR:10;
let e being Real;
let g being (Function of ( I[01] ),( TOP-REAL n ));
let p1 being (Element of ( TOP-REAL n ));
let p2 being (Element of ( TOP-REAL n ));
assume that
A4: e > ( 0 )
and
A5: g is  continuous;
A6: ( e / 2 ) > ( 0 ) by A4,XREAL_1:215;
A7: ( the TopStruct of ( TOP-REAL n ) ) = ( TopSpaceMetr ( Euclid n ) ) by EUCLID:def 8;
then reconsider h = g as (Function of ( I[01] ),( TopSpaceMetr ( Euclid n ) ));
reconsider f = h as (Function of ( Closed-Interval-MSpace (( 0 ),1) ),( Euclid n )) by CKB11:1,EUCLID:67;
A8: ( dom g ) = (the carrier of ( I[01] )) by FUNCT_2:def 1;
h is  continuous by A5,A7,PRE_TOPC:33;
then f is  uniformly_continuous by CKB9:1,CKB8:1,TOPMETR:20;
then consider s1 being Real such that A9: ( 0 ) < s1 and A10: (for u1,u2 being (Element of ( Closed-Interval-MSpace (( 0 ),1) )) holds (( dist (u1,u2) ) < s1 implies ( dist (( f /. u1 ),( f /. u2 )) ) < ( e / 2 ))) by A6,CKB2:def 1;
set s = ( min (s1,( 1 / 2 )) );
defpred P[ Nat,set ]
 means
$2 = ( ( s / 2 ) * ( $1 - 1 ) );
A11: ( 0 ) <= s by A9,XXREAL_0:20;
then reconsider j = [/ ( 2 / s ) \] as (Element of ( NAT )) by INT_1:53;
A12: ( 2 / s ) <= j by INT_1:def 7;
A13: s <= s1 by XXREAL_0:17;
A14: (for u1,u2 being (Element of ( Closed-Interval-MSpace (( 0 ),1) )) holds (( dist (u1,u2) ) < s implies ( dist (( f /. u1 ),( f /. u2 )) ) < ( e / 2 )))
proof
let u1 being (Element of ( Closed-Interval-MSpace (( 0 ),1) ));
let u2 being (Element of ( Closed-Interval-MSpace (( 0 ),1) ));
assume ( dist (u1,u2) ) < s;
then ( dist (u1,u2) ) < s1 by A13,XXREAL_0:2;
hence thesis by A10;
end;
A15: ( 2 / s ) <= [/ ( 2 / s ) \] by INT_1:def 7;
then ( ( 2 / s ) - j ) <= ( 0 ) by XREAL_1:47;
then ( 1 + ( ( 2 / s ) - j ) ) <= ( 1 + ( 0 ) ) by XREAL_1:6;
then A16: ( ( s / 2 ) * ( 1 + ( ( 2 / s ) - j ) ) ) <= ( ( s / 2 ) * 1 ) by A11,XREAL_1:64;
A17: (for k being Nat holds (k in ( Seg j ) implies (ex x st P[ k,x ])));
consider p being FinSequence such that A18: (( dom p ) = ( Seg j ) & (for k being Nat holds (k in ( Seg j ) implies P[ k,( p . k ) ]))) from FINSEQ_1:sch 1(A17);
A19: ( Seg ( len p ) ) = ( Seg j ) by A18,FINSEQ_1:def 3;
( rng ( p ^ <* 1 *> ) ) c= ( REAL )
proof
let y;
A20: ( len ( p ^ <* 1 *> ) ) = ( ( len p ) + ( len <* 1 *> ) ) by FINSEQ_1:22
.= ( ( len p ) + 1 ) by FINSEQ_1:40;
assume y in ( rng ( p ^ <* 1 *> ) );
then consider x such that A21: x in ( dom ( p ^ <* 1 *> ) ) and A22: y = ( ( p ^ <* 1 *> ) . x ) by FUNCT_1:def 3;
reconsider nx = x as (Element of ( NAT )) by A21;
A23: ( dom ( p ^ <* 1 *> ) ) = ( Seg ( len ( p ^ <* 1 *> ) ) ) by FINSEQ_1:def 3;
then A24: nx <= ( len ( p ^ <* 1 *> ) ) by A21,FINSEQ_1:1;
A25: 1 <= nx by A21,A23,FINSEQ_1:1;
A26: 1 <= nx by A21,A23,FINSEQ_1:1;
now
per cases ;
case nx < ( ( len p ) + 1 );
then A27: nx <= ( len p ) by NAT_1:13;
then nx in ( Seg j ) by A19,A25,FINSEQ_1:1;
then A28: ( p . nx ) = ( ( s / 2 ) * ( nx - 1 ) ) by A18;
y = ( p . nx ) by A22,A26,A27,FINSEQ_1:64;
hence thesis by A28;
end;
case nx >= ( ( len p ) + 1 );
then nx = ( ( len p ) + 1 ) by A24,A20,XXREAL_0:1;
then y = 1 by A22,CKB15:1;
hence thesis;
end;
end;
hence thesis;
end;
then reconsider h1 = ( p ^ <* 1 *> ) as (FinSequence of ( REAL )) by FINSEQ_1:def 4;
A29: ( len h1 ) = ( ( len p ) + ( len <* 1 *> ) ) by FINSEQ_1:22
.= ( ( len p ) + 1 ) by FINSEQ_1:40;
A30: ( len p ) = j by A18,FINSEQ_1:def 3;
A31: s <> ( 0 ) by A9,XXREAL_0:15;
then ( 2 / s ) >= ( 2 / ( 1 / 2 ) ) by A11,XREAL_1:118,XXREAL_0:17;
then 4 <= j by A12,XXREAL_0:2;
then A32: ( 4 + 1 ) <= ( ( len p ) + 1 ) by A30,XREAL_1:6;
A33: ( s / 2 ) > ( 0 ) by A11,A31,XREAL_1:215;
A34: (for i being (Element of ( NAT )) holds (for r1 holds (for r2 holds ((((1 <= i & i < ( len p )) & r1 = ( p . i )) & r2 = ( p . ( i + 1 ) )) implies (r1 < r2 & ( r2 - r1 ) = ( s / 2 ))))))
proof
let i being (Element of ( NAT ));
let r1;
let r2;
assume that
A35: (1 <= i & i < ( len p ))
and
A36: r1 = ( p . i )
and
A37: r2 = ( p . ( i + 1 ) );
(1 < ( i + 1 ) & ( i + 1 ) <= ( len p )) by A35,NAT_1:13;
then ( i + 1 ) in ( Seg j ) by A19,FINSEQ_1:1;
then A38: r2 = ( ( s / 2 ) * ( ( i + 1 ) - 1 ) ) by A18,A37;
i < ( i + 1 ) by NAT_1:13;
then A39: ( i - 1 ) < ( ( i + 1 ) - 1 ) by XREAL_1:9;
A40: i in ( Seg j ) by A19,A35,FINSEQ_1:1;
then r1 = ( ( s / 2 ) * ( i - 1 ) ) by A18,A36;
hence r1 < r2 by A33,A38,A39,XREAL_1:68;
( r2 - r1 ) = ( ( ( s / 2 ) * i ) - ( ( s / 2 ) * ( i - 1 ) ) ) by A18,A36,A40,A38
.= ( s / 2 );
hence thesis;
end;
( 0 ) < s by A9,XXREAL_0:15;
then ( 0 ) < j by A15,XREAL_1:139;
then A41: ( ( 0 ) + 1 ) <= j by NAT_1:13;
then 1 in ( Seg j ) by FINSEQ_1:1;
then ( p . 1 ) = ( ( s / 2 ) * ( 1 - 1 ) ) by A18
.= ( 0 );
then A42: ( h1 . 1 ) = ( 0 ) by A41,A30,CKB16:1;
( 2 * s ) <> ( 0 ) by A9,XXREAL_0:15;
then A43: (( ( s / 2 ) * ( 2 / s ) ) = ( ( 2 * s ) / ( 2 * s ) ) & ( ( 2 * s ) / ( 2 * s ) ) = 1) by XCMPLX_1:60,XCMPLX_1:76;
then A44: ( 1 - ( ( s / 2 ) * ( j - 1 ) ) ) = ( ( s / 2 ) * ( 1 + ( ( 2 / s ) - [/ ( 2 / s ) \] ) ) );
A45: (for r1 holds (r1 = ( p . ( len p ) ) implies ( 1 - r1 ) <= ( s / 2 )))
proof
let r1;
assume A46: r1 = ( p . ( len p ) );
( len p ) in ( Seg j ) by A41,A30,FINSEQ_1:1;
hence thesis by A16,A18,A30,A44,A46;
end;
A47: (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len h1 )) implies ( ( h1 /. ( i + 1 ) ) - ( h1 /. i ) ) <= ( s / 2 )))
proof
let i being (Element of ( NAT ));
assume that
A48: 1 <= i
and
A49: i < ( len h1 );
A50: ( i + 1 ) <= ( len h1 ) by A49,NAT_1:13;
A51: 1 < ( i + 1 ) by A48,NAT_1:13;
A52: i <= ( len p ) by A29,A49,NAT_1:13;
now
per cases ;
case A53: i < ( len p );
then ( i + 1 ) <= ( len p ) by NAT_1:13;
then A54: ( h1 . ( i + 1 ) ) = ( p . ( i + 1 ) ) by A51,FINSEQ_1:64;
A55: ( h1 . i ) = ( p . i ) by A48,A53,FINSEQ_1:64;
(( h1 . i ) = ( h1 /. i ) & ( h1 . ( i + 1 ) ) = ( h1 /. ( i + 1 ) )) by A48,A49,A50,A51,FINSEQ_4:15;
hence thesis by A34,A48,A53,A55,A54;
end;
case i >= ( len p );
then A56: i = ( len p ) by A52,XXREAL_0:1;
A57: ( h1 /. i ) = ( h1 . i ) by A48,A49,FINSEQ_4:15
.= ( p . i ) by A48,A52,FINSEQ_1:64;
( h1 /. ( i + 1 ) ) = ( h1 . ( i + 1 ) ) by A50,A51,FINSEQ_4:15
.= 1 by A56,CKB15:1;
hence thesis by A45,A56,A57;
end;
end;
hence thesis;
end;
[/ ( 2 / s ) \] < ( ( 2 / s ) + 1 ) by INT_1:def 7;
then ( [/ ( 2 / s ) \] - 1 ) < ( ( ( 2 / s ) + 1 ) - 1 ) by XREAL_1:9;
then A58: ( ( s / 2 ) * ( j - 1 ) ) < ( ( s / 2 ) * ( 2 / s ) ) by A33,XREAL_1:68;
A59: (for i being (Element of ( NAT )) holds (for r1 holds (((1 <= i & i <= ( len p )) & r1 = ( p . i )) implies r1 < 1)))
proof
let i being (Element of ( NAT ));
let r1;
assume that
A60: 1 <= i
and
A61: i <= ( len p )
and
A62: r1 = ( p . i );
( i - 1 ) <= ( j - 1 ) by A30,A61,XREAL_1:9;
then A63: ( ( s / 2 ) * ( i - 1 ) ) <= ( ( s / 2 ) * ( j - 1 ) ) by A11,XREAL_1:64;
i in ( Seg j ) by A19,A60,A61,FINSEQ_1:1;
then r1 = ( ( s / 2 ) * ( i - 1 ) ) by A18,A62;
hence thesis by A58,A43,A63,XXREAL_0:2;
end;
A64: (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len h1 )) implies ( h1 /. i ) < ( h1 /. ( i + 1 ) )))
proof
let i being (Element of ( NAT ));
assume that
A65: 1 <= i
and
A66: i < ( len h1 );
A67: 1 < ( i + 1 ) by A65,NAT_1:13;
A68: i <= ( len p ) by A29,A66,NAT_1:13;
A69: ( i + 1 ) <= ( len h1 ) by A66,NAT_1:13;
now
per cases ;
case A70: i < ( len p );
then ( i + 1 ) <= ( len p ) by NAT_1:13;
then A71: ( h1 . ( i + 1 ) ) = ( p . ( i + 1 ) ) by A67,FINSEQ_1:64;
A72: ( h1 . i ) = ( p . i ) by A65,A70,FINSEQ_1:64;
(( h1 . i ) = ( h1 /. i ) & ( h1 . ( i + 1 ) ) = ( h1 /. ( i + 1 ) )) by A65,A66,A69,A67,FINSEQ_4:15;
hence thesis by A34,A65,A70,A72,A71;
end;
case i >= ( len p );
then A73: i = ( len p ) by A68,XXREAL_0:1;
A74: ( h1 /. i ) = ( h1 . i ) by A65,A66,FINSEQ_4:15
.= ( p . i ) by A65,A68,FINSEQ_1:64;
( h1 /. ( i + 1 ) ) = ( h1 . ( i + 1 ) ) by A69,A67,FINSEQ_4:15
.= 1 by A73,CKB15:1;
hence thesis by A59,A65,A68,A74;
end;
end;
hence thesis;
end;
A75: ( e / 2 ) < e by A4,XREAL_1:216;
A76: (for i being (Element of ( NAT )) holds (for Q being (Subset of ( I[01] )) holds (for W being (Subset of ( Euclid n )) holds ((((1 <= i & i < ( len h1 )) & Q = [. ( h1 /. i ),( h1 /. ( i + 1 ) ) .]) & W = ( g .: Q )) implies ( diameter W ) < e))))
proof
let i being (Element of ( NAT ));
let Q being (Subset of ( I[01] ));
let W being (Subset of ( Euclid n ));
assume that
A77: (1 <= i & i < ( len h1 ))
and
A78: Q = [. ( h1 /. i ),( h1 /. ( i + 1 ) ) .]
and
A79: W = ( g .: Q );
( h1 /. i ) < ( h1 /. ( i + 1 ) ) by A64,A77;
then A80: Q <> ( {} ) by A78,XXREAL_1:1;
A81: (for x,y being (Point of ( Euclid n )) holds ((x in W & y in W) implies ( dist (x,y) ) <= ( e / 2 )))
proof
let x being (Point of ( Euclid n ));
let y being (Point of ( Euclid n ));
assume that
A82: x in W
and
A83: y in W;
consider x3 being set such that A84: x3 in ( dom g ) and A85: x3 in Q and A86: x = ( g . x3 ) by A79,A82,FUNCT_1:def 6;
reconsider x3 as (Element of ( Closed-Interval-MSpace (( 0 ),1) )) by A84,CKB10:1,TOPMETR:12;
reconsider r3 = x3 as Real by A78,A85;
A87: ( ( h1 /. ( i + 1 ) ) - ( h1 /. i ) ) <= ( s / 2 ) by A47,A77;
consider y3 being set such that A88: y3 in ( dom g ) and A89: y3 in Q and A90: y = ( g . y3 ) by A79,A83,FUNCT_1:def 6;
reconsider y3 as (Element of ( Closed-Interval-MSpace (( 0 ),1) )) by A88,CKB10:1,TOPMETR:12;
reconsider s3 = y3 as Real by A78,A89;
A91: (( f . x3 ) = ( f /. x3 ) & ( f . y3 ) = ( f /. y3 ));
( abs ( r3 - s3 ) ) <= ( ( h1 /. ( i + 1 ) ) - ( h1 /. i ) ) by A78,A85,A89,CKB19:1;
then ( abs ( r3 - s3 ) ) <= ( s / 2 ) by A87,XXREAL_0:2;
then A92: ( dist (x3,y3) ) <= ( s / 2 ) by HEINE:1;
( s / 2 ) < s by A11,A31,XREAL_1:216;
then ( dist (x3,y3) ) < s by A92,XXREAL_0:2;
hence thesis by A14,A86,A90,A91;
end;
then W is  bounded by A6,TBSP_1:def 7;
then ( diameter W ) <= ( e / 2 ) by A8,A79,A80,A81,TBSP_1:def 8;
hence thesis by A75,XXREAL_0:2;
end;
A93: ( rng p ) c= [. ( 0 ),1 .]
proof
let y being set;
assume y in ( rng p );
then consider x being set such that A94: x in ( dom p ) and A95: y = ( p . x ) by FUNCT_1:def 3;
reconsider nx = x as (Element of ( NAT )) by A94;
A96: ( p . nx ) = ( ( s / 2 ) * ( nx - 1 ) ) by A18,A94;
then reconsider ry = ( p . nx ) as Real;
A97: x in ( Seg ( len p ) ) by A94,FINSEQ_1:def 3;
then A98: 1 <= nx by FINSEQ_1:1;
then A99: ( nx - 1 ) >= ( 1 - 1 ) by XREAL_1:9;
nx <= ( len p ) by A97,FINSEQ_1:1;
then ry < 1 by A59,A98;
then y in { rs where rs is Real: (( 0 ) <= rs & rs <= 1) } by A11,A95,A96,A99;
hence thesis by RCOMP_1:def 1;
end;
( rng <* 1 *> ) = { 1 } by FINSEQ_1:38;
then ( rng h1 ) = ( ( rng p ) \/ { 1 } ) by FINSEQ_1:31;
then A100: ( rng h1 ) c= ( [. ( 0 ),1 .] \/ { 1 } ) by A93,XBOOLE_1:13;
( h1 . ( len h1 ) ) = 1 by A29,CKB15:1;
hence thesis by A29,A32,A42,A2,A100,A3,A64,A76,CKB21:1;
end;
