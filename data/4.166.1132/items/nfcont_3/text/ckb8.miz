environ
vocabularies NUMBERS,SUBSET_1,XREAL_0,ORDINAL1,SEQ_1,PARTFUN1,RELAT_1,TARSKI,SEQ_2,ORDINAL2,FUNCT_2,FUNCT_1,XBOOLE_0,XXREAL_0,NAT_1,ARYTM_3,CARD_1,COMPLEX1,ARYTM_1,REAL_1,RCOMP_1,XXREAL_1,VALUED_1,ZFMISC_1,VALUED_0,FCONT_1,NORMSP_1,STRUCT_0,SUPINF_2,PRE_TOPC;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,REAL_1,NAT_1,VALUED_0,COMPLEX1,ZFMISC_1,SEQ_1,SEQ_2,RCOMP_1,FCONT_1,STRUCT_0,PRE_TOPC,RLVECT_1,VFUNCT_1,NORMSP_0,NORMSP_1,BHSP_1,NFCONT_1,CKB6;
definitions RELAT_1,FCONT_1,RLVECT_1,CKB6;
theorems TARSKI,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,SEQ_2,SEQM_3,SEQ_4,PARTFUN1,XREAL_0,PARTFUN2,RCOMP_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,MEMBERED,VALUED_0,FCONT_1,NFCONT_1,NORMSP_0,NORMSP_1,RLVECT_1,LOPBAN_3,VFUNCT_1,LOPBAN_1,BHSP_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
schemes NAT_1,RECDEF_1,FUNCT_2;
registrations XBOOLE_0,ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,VALUED_0,FUNCT_2,RELAT_1,FUNCT_1,ZFMISC_1,STRUCT_0,VFUNCT_1;
constructors REAL_1,COMPLEX1,MEMBERED,SEQ_2,RCOMP_1,SEQ_1,RELSET_1,FCONT_1,NFCONT_1,BHSP_1,VFUNCT_1,CKB6;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve x0 for  real number;
reserve S for RealNormSpace;
reserve f for (PartFunc of ( REAL ),(the carrier of S));
reserve s1 for Real_Sequence;
reserve s2 for Real_Sequence;
theorem
(f is_continuous_in x0 iff (x0 in ( dom f ) & (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f /. x0 ) = ( lim ( f /* s1 ) ))))))
proof
thus (f is_continuous_in x0 implies (x0 in ( dom f ) & (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f /. x0 ) = ( lim ( f /* s1 ) )))))) by CKB6:def 1;
assume A1: (x0 in ( dom f ) & (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f /. x0 ) = ( lim ( f /* s1 ) )))));
thus x0 in ( dom f ) by A1;
let s2;
assume that
A2: ( rng s2 ) c= ( dom f )
and
A3: (s2 is  convergent & ( lim s2 ) = x0);
per cases ;
suppose (ex n st (for m holds (n <= m implies ( s2 . m ) = x0)));

then consider N being (Element of ( NAT )) such that A4: (for m holds (N <= m implies ( s2 . m ) = x0));
A5: ( f /* ( s2 ^\ N ) ) = ( ( f /* s2 ) ^\ N ) by A2,VALUED_0:27;
A6:now
let p being Real;
assume that
A7: p > ( 0 );
take n = ( 0 );
let m;
assume that
n <= m;
A8: ( s2 . ( m + N ) ) = x0 by A4,NAT_1:12;
( rng ( s2 ^\ N ) ) c= ( rng s2 ) by VALUED_0:21;
then ||. ( ( ( f /* ( s2 ^\ N ) ) . m ) - ( f /. x0 ) ) .|| = ||. ( ( f /. ( ( s2 ^\ N ) . m ) ) - ( f /. x0 ) ) .|| by A2,FUNCT_2:109,XBOOLE_1:1
.= ||. ( ( f /. x0 ) - ( f /. x0 ) ) .|| by A8,NAT_1:def 3
.= ( 0 ) by NORMSP_1:6;
hence ||. ( ( ( f /* ( s2 ^\ N ) ) . m ) - ( f /. x0 ) ) .|| < p by A7;
end;
then A9: ( f /* ( s2 ^\ N ) ) is  convergent by NORMSP_1:def 6;
then ( f /. x0 ) = ( lim ( ( f /* s2 ) ^\ N ) ) by A6,A5,NORMSP_1:def 7;
hence thesis by A9,A5,LOPBAN_3:10,LOPBAN_3:11;
end;
suppose A10: (for n holds (ex m st (n <= m & ( s2 . m ) <> x0)));

defpred P[ (Element of ( NAT )),set,set ]
 means
(for n holds (for m holds (($2 = n & $3 = m) implies ((n < m & ( s2 . m ) <> x0) & (for k holds ((n < k & ( s2 . k ) <> x0) implies m <= k))))));
defpred P[ set ]
 means
( s2 . $1 ) <> x0;
(ex m1 being (Element of ( NAT )) st (( 0 ) <= m1 & ( s2 . m1 ) <> x0)) by A10;
then A11: (ex m being Nat st P[ m ]);
consider M being Nat such that A12: (P[ M ] & (for n being Nat holds (P[ n ] implies M <= n))) from NAT_1:sch 5(A11);
reconsider M9 = M as (Element of ( NAT )) by ORDINAL1:def 12;
A13:now
let n;
consider m such that A14: (( n + 1 ) <= m & ( s2 . m ) <> x0) by A10;
take m;
thus (n < m & ( s2 . m ) <> x0) by A14,NAT_1:13;
end;
A15: (for n holds (for x being (Element of ( NAT )) holds (ex y being (Element of ( NAT )) st P[ n,x,y ])))
proof
let n;
let x being (Element of ( NAT ));
defpred P[ Nat ]
 means
(x < $1 & ( s2 . $1 ) <> x0);
(ex m st P[ m ]) by A13;
then A16: (ex m being Nat st P[ m ]);
consider l being Nat such that A17: (P[ l ] & (for k being Nat holds (P[ k ] implies l <= k))) from NAT_1:sch 5(A16);
take l;
l in ( NAT ) by ORDINAL1:def 12;
hence thesis by A17;
end;
consider F being (Function of ( NAT ),( NAT )) such that A18: (( F . ( 0 ) ) = M9 & (for n being (Element of ( NAT )) holds P[ n,( F . n ),( F . ( n + 1 ) ) ])) from RECDEF_1:sch 2(A15);
A19: (( dom F ) = ( NAT ) & ( rng F ) c= ( REAL )) by FUNCT_2:def 1,XBOOLE_1:1;
then reconsider F as Real_Sequence by RELSET_1:4;
A20:now
let n;
(( F . n ) in ( rng F ) & ( rng F ) c= ( NAT )) by A19,FUNCT_1:def 3;
hence ( F . n ) is (Element of ( NAT ));
end;
now
let n;
(( F . n ) is (Element of ( NAT )) & ( F . ( n + 1 ) ) is (Element of ( NAT ))) by A20;
hence ( F . n ) < ( F . ( n + 1 ) ) by A18;
end;
then reconsider F as  increasing (sequence of ( NAT )) by SEQM_3:def 6;
A21: (for n holds (( s2 . n ) <> x0 implies (ex m st ( F . m ) = n)))
proof
defpred P[ set ]
 means
(( s2 . $1 ) <> x0 & (for m holds ( F . m ) <> $1));
assume (ex n st P[ n ]);
then A22: (ex n being Nat st P[ n ]);
consider M1 being Nat such that A23: (P[ M1 ] & (for n being Nat holds (P[ n ] implies M1 <= n))) from NAT_1:sch 5(A22);
reconsider M1 as (Element of ( NAT )) by ORDINAL1:def 12;
defpred P[ Nat ]
 means
(($1 < M1 & ( s2 . $1 ) <> x0) & (ex m st ( F . m ) = $1));
A24: (ex n being Nat st P[ n ])
proof
take M;
(M <= M1 & M <> M1) by A12,A18,A23;
hence M < M1 by XXREAL_0:1;
thus ( s2 . M ) <> x0 by A12;
take ( 0 );
thus thesis by A18;
end;
A25: (for n being Nat holds (P[ n ] implies n <= M1));
consider MX being Nat such that A26: (P[ MX ] & (for n being Nat holds (P[ n ] implies n <= MX))) from NAT_1:sch 6(A25,A24);
consider m such that A27: ( F . m ) = MX by A26;
A28: (( F . m ) is (Element of ( NAT )) & ( F . ( m + 1 ) ) is (Element of ( NAT ))) by A20;
then A29: (MX < ( F . ( m + 1 ) ) & ( s2 . ( F . ( m + 1 ) ) ) <> x0) by A18,A27;
(( F . ( m + 1 ) ) <> M1 & ( F . ( m + 1 ) ) <= M1) by A18,A23,A26,A27,A28;
then ( F . ( m + 1 ) ) < M1 by XXREAL_0:1;
hence contradiction by A26,A29;
end;
A30: (for n holds ( ( s2 * F ) . n ) <> x0)
proof
defpred P[ (Element of ( NAT )) ]
 means
( ( s2 * F ) . $1 ) <> x0;
A31: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume that
( ( s2 * F ) . k ) <> x0;
(( F . k ) is (Element of ( NAT )) & ( F . ( k + 1 ) ) is (Element of ( NAT ))) by A20;
then ( s2 . ( F . ( k + 1 ) ) ) <> x0 by A18;
hence thesis by FUNCT_2:15;
end;
A32: P[ ( 0 ) ] by A12,A18,FUNCT_2:15;
thus (for n holds P[ n ]) from NAT_1:sch 1(A32,A31);
end;
A33: (( s2 * F ) is  convergent & ( lim ( s2 * F ) ) = x0) by A3,SEQ_4:16,SEQ_4:17;
A34: ( rng ( s2 * F ) ) c= ( rng s2 ) by VALUED_0:21;
then ( rng ( s2 * F ) ) c= ( dom f ) by A2,XBOOLE_1:1;
then A35: (( f /* ( s2 * F ) ) is  convergent & ( f /. x0 ) = ( lim ( f /* ( s2 * F ) ) )) by A1,A30,A33;
A36:now
let p being Real;
assume A37: ( 0 ) < p;
then consider n such that A38: (for m holds (n <= m implies ||. ( ( ( f /* ( s2 * F ) ) . m ) - ( f /. x0 ) ) .|| < p)) by A35,NORMSP_1:def 7;
reconsider k = ( F . n ) as (Element of ( NAT )) by A20;
take k;
let m;
assume that
A39: k <= m;
per cases ;
suppose ( s2 . m ) = x0;

then ||. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .|| = ||. ( ( f /. x0 ) - ( f /. x0 ) ) .|| by A2,FUNCT_2:109
.= ( 0 ) by NORMSP_1:6;
hence ||. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .|| < p by A37;
end;
suppose ( s2 . m ) <> x0;

then consider l being (Element of ( NAT )) such that A40: m = ( F . l ) by A21;
n <= l by A39,A40,SEQM_3:1;
then ||. ( ( ( f /* ( s2 * F ) ) . l ) - ( f /. x0 ) ) .|| < p by A38;
then ||. ( ( f /. ( ( s2 * F ) . l ) ) - ( f /. x0 ) ) .|| < p by A2,A34,FUNCT_2:109,XBOOLE_1:1;
then ||. ( ( f /. ( s2 . m ) ) - ( f /. x0 ) ) .|| < p by A40,FUNCT_2:15;
hence ||. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .|| < p by A2,FUNCT_2:109;
end;
end;
hence ( f /* s2 ) is  convergent by NORMSP_1:def 6;
hence ( f /. x0 ) = ( lim ( f /* s2 ) ) by A36,NORMSP_1:def 7;
end;
end;
