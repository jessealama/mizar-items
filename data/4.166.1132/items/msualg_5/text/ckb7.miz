environ
vocabularies NUMBERS,PBOOLE,RELAT_1,EQREL_1,TARSKI,XBOOLE_0,STRUCT_0,LATTICES,FUNCT_1,SUBSET_1,BINOP_1,MSUALG_4,ZFMISC_1,CARD_3,MSUALG_1,FINSEQ_1,MARGREL1,PARTFUN1,ARYTM_3,ORDINAL4,NAT_1,XXREAL_0,CARD_1,RELAT_2,ARYTM_1,NAT_LAT,REALSET1,XXREAL_2,MSUALG_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,REALSET1,NUMBERS,XCMPLX_0,FINSEQ_2,STRUCT_0,PARTFUN1,FUNCT_2,RELSET_1,EQREL_1,BINOP_1,PBOOLE,MSUALG_1,MSUALG_3,MSUALG_4,LATTICES,NAT_LAT,CARD_3,FINSEQ_1,NAT_1,XXREAL_0,CKB1,CKB4,CKB6;
definitions PBOOLE,BINOP_1,REALSET1,EQREL_1,FUNCOP_1,CKB1,CKB4;
theorems BINOP_1,PBOOLE,MSUALG_4,EQREL_1,TARSKI,NAT_LAT,LATTICES,RELAT_1,RELAT_2,FUNCT_2,CARD_3,ZFMISC_1,MSUALG_1,FUNCT_1,MSUALG_3,FINSEQ_1,NAT_1,MSAFREE2,XBOOLE_0,XBOOLE_1,FINSEQ_3,XCMPLX_1,ORDERS_1,XREAL_1,XXREAL_0,PARTFUN1,FUNCOP_1,FINSEQ_2,CKB1,CKB2,CKB3,CKB4;
schemes PBOOLE,BINOP_1,NAT_1,FINSEQ_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,XREAL_0,NAT_1,FINSEQ_1,EQREL_1,PBOOLE,STRUCT_0,LATTICES,NAT_LAT,PRALG_1,MSUALG_1,MSUALG_3,MSUALG_4,ORDINAL1,CARD_1,CKB5;
constructors BINOP_1,XXREAL_0,NAT_1,NAT_D,EQREL_1,REALSET1,NAT_LAT,MSUALG_3,MSUALG_4,RELSET_1,PRALG_2,FUNCOP_1,FINSEQ_2,CKB1,CKB4;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for set;
reserve I for non  empty set;
reserve M for (ManySortedSet of I);
reserve EqR for (Equivalence_Relation of M);
definition
let I being non  empty set;
let M being (ManySortedSet of I);
let R being (ManySortedRelation of M);
func EqCl R -> (Equivalence_Relation of M) means 
:Def3: (for i being (Element of I) holds ( it . i ) = ( EqCl ( R . i ) ));
existence
proof
deffunc F((Element of I)) = ( EqCl ( R . $1 ) );
consider EqR being (ManySortedSet of I) such that A1: (for i being (Element of I) holds ( EqR . i ) = F(i)) from PBOOLE:sch 5;
(for i being set holds (i in I implies ( EqR . i ) is (Relation of ( M . i ))))
proof
let i being set;
assume i in I;
then reconsider i9 = i as (Element of I);
( EqR . i ) = ( EqCl ( R . i9 ) ) by A1;
hence thesis;
end;
then reconsider EqR as (ManySortedRelation of M) by MSUALG_4:def 1;
(for i being set holds (for R being (Relation of ( M . i )) holds ((i in I & ( EqR . i ) = R) implies R is (Equivalence_Relation of ( M . i )))))
proof
let i being set;
let R1 being (Relation of ( M . i ));
assume that
A2: i in I
and
A3: ( EqR . i ) = R1;
reconsider i9 = i as (Element of I) by A2;
R1 = ( EqCl ( R . i9 ) ) by A1,A3;
hence thesis;
end;
then reconsider EqR as (Equivalence_Relation of M) by MSUALG_4:def 2;
take EqR;
thus thesis by A1;
end;
uniqueness
proof
let C1 being (Equivalence_Relation of M);
let C2 being (Equivalence_Relation of M);
assume that
A4: (for i being (Element of I) holds ( C1 . i ) = ( EqCl ( R . i ) ))
and
A5: (for i being (Element of I) holds ( C2 . i ) = ( EqCl ( R . i ) ));
now
let i;
assume i in I;
then reconsider i1 = i as (Element of I);
thus ( C1 . i ) = ( EqCl ( R . i1 ) ) by A4
.= ( C2 . i ) by A5;
end;
hence C1 = C2 by PBOOLE:3;
end;
end;
