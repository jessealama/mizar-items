environ
vocabularies NUMBERS,PBOOLE,RELAT_1,EQREL_1,TARSKI,XBOOLE_0,STRUCT_0,LATTICES,FUNCT_1,SUBSET_1,BINOP_1,MSUALG_4,ZFMISC_1,CARD_3,MSUALG_1,FINSEQ_1,MARGREL1,PARTFUN1,ARYTM_3,ORDINAL4,NAT_1,XXREAL_0,CARD_1,RELAT_2,ARYTM_1,NAT_LAT,REALSET1,XXREAL_2,MSUALG_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,REALSET1,NUMBERS,XCMPLX_0,FINSEQ_2,STRUCT_0,PARTFUN1,FUNCT_2,RELSET_1,EQREL_1,BINOP_1,PBOOLE,MSUALG_1,MSUALG_3,MSUALG_4,LATTICES,NAT_LAT,CARD_3,FINSEQ_1,NAT_1,XXREAL_0,CKB1;
definitions PBOOLE,BINOP_1,REALSET1,EQREL_1,FUNCOP_1,CKB1;
theorems BINOP_1,PBOOLE,MSUALG_4,EQREL_1,TARSKI,NAT_LAT,LATTICES,RELAT_1,RELAT_2,FUNCT_2,CARD_3,ZFMISC_1,MSUALG_1,FUNCT_1,MSUALG_3,FINSEQ_1,NAT_1,MSAFREE2,XBOOLE_0,XBOOLE_1,FINSEQ_3,XCMPLX_1,ORDERS_1,XREAL_1,XXREAL_0,PARTFUN1,FUNCOP_1,FINSEQ_2,CKB1,CKB2,CKB3;
schemes PBOOLE,BINOP_1,NAT_1,FINSEQ_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,XREAL_0,NAT_1,FINSEQ_1,EQREL_1,PBOOLE,STRUCT_0,LATTICES,NAT_LAT,PRALG_1,MSUALG_1,MSUALG_3,MSUALG_4,ORDINAL1,CARD_1;
constructors BINOP_1,XXREAL_0,NAT_1,NAT_D,EQREL_1,REALSET1,NAT_LAT,MSUALG_3,MSUALG_4,RELSET_1,PRALG_2,FUNCOP_1,FINSEQ_2,CKB1;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve X for set;
reserve x for set;
definition
let X being set;
func EqRelLatt X ->  strict Lattice means 
:Def2: ((the carrier of it) = { x where x is (Relation of X,X): x is (Equivalence_Relation of X) } & (for x,y being (Equivalence_Relation of X) holds (( (the L_meet of it) . (x,y) ) = ( x /\ y ) & ( (the L_join of it) . (x,y) ) = ( x "\/" y ))));
existence
proof
set B = { x where x is (Relation of X,X): x is (Equivalence_Relation of X) };
( id X ) in B;
then reconsider B as non  empty set;
defpred Z[ (Element of B),(Element of B),(Element of B) ]
 means
(( $1 \/ $2 ) c= $3 & (for x9 being (Element of B) holds (( $1 \/ $2 ) c= x9 implies $3 c= x9)));
A1: (for x,y being (Element of B) holds (ex z being (Element of B) st Z[ x,y,z ]))
proof
let x being (Element of B);
let y being (Element of B);
y in B;
then A2: (ex y99 being (Relation of X,X) st (y = y99 & y99 is (Equivalence_Relation of X)));
x in B;
then (ex x99 being (Relation of X,X) st (x = x99 & x99 is (Equivalence_Relation of X)));
then reconsider x1 = x,y1 = y as (Equivalence_Relation of X) by A2;
consider z being (Equivalence_Relation of X) such that A3: ( x1 \/ y1 ) c= z and A4: (for x9 being (Equivalence_Relation of X) holds (( x1 \/ y1 ) c= x9 implies z c= x9)) by EQREL_1:12;
z in B;
then reconsider z9 = z as (Element of B);
take z9;
thus ( x \/ y ) c= z9 by A3;
hereby
let x9 being (Element of B);
assume that
A5: ( x \/ y ) c= x9;
x9 in B;
then (ex x99 being (Relation of X,X) st (x9 = x99 & x99 is (Equivalence_Relation of X)));
then reconsider x19 = x9 as (Equivalence_Relation of X);
( x \/ y ) c= x19 by A5;
hence z9 c= x9 by A4;
end;
end;
consider B1 being (BinOp of B) such that A6: (for x,y being (Element of B) holds Z[ x,y,( B1 . (x,y) ) ]) from BINOP_1:sch 3(A1);
defpred Z[ (Element of B),(Element of B),(Element of B) ]
 means
$3 = ( $1 /\ $2 );
A7: (for x,y being (Element of B) holds (ex z being (Element of B) st Z[ x,y,z ]))
proof
let x being (Element of B);
let y being (Element of B);
y in B;
then A8: (ex y1 being (Relation of X,X) st (y = y1 & y1 is (Equivalence_Relation of X)));
x in B;
then (ex x1 being (Relation of X,X) st (x = x1 & x1 is (Equivalence_Relation of X)));
then reconsider x9 = x,y9 = y as (Equivalence_Relation of X) by A8;
set z = ( x9 /\ y9 );
z in B;
then reconsider z as (Element of B);
take z;
thus thesis;
end;
consider B2 being (BinOp of B) such that A9: (for x,y being (Element of B) holds Z[ x,y,( B2 . (x,y) ) ]) from BINOP_1:sch 3(A7);
reconsider L = LattStr (# B,B1,B2 #) as non  empty LattStr;
A10:now
let x being (Equivalence_Relation of X);
let y being (Equivalence_Relation of X);
A11: y in B;
x in B;
then reconsider x1 = x,y1 = y as (Element of B) by A11;
reconsider B19 = ( B1 . (x1,y1) ) as (Element of B);
B19 in B;
then (ex B199 being (Relation of X,X) st (B19 = B199 & B199 is (Equivalence_Relation of X)));
then reconsider B19 as (Equivalence_Relation of X);
A12: (for x9 being (Element of B) holds (( x1 \/ y1 ) c= x9 implies ( B1 . (x1,y1) ) c= x9)) by A6;
A13:now
let x9 being (Equivalence_Relation of X);
assume that
A14: ( x \/ y ) c= x9;
x9 in B;
then reconsider x19 = x9 as (Element of B);
( x \/ y ) c= x19 by A14;
hence ( B1 . (x,y) ) c= x9 by A12;
end;
( x1 \/ y1 ) c= ( B1 . (x1,y1) ) by A6;
then B19 = ( x "\/" y ) by A13,EQREL_1:def 2;
hence ( B1 . (x,y) ) = ( x "\/" y );
end;
A15:now
let a being (Element of B);
let b being (Element of B);
let c being (Element of B);
b in B;
then A16: (ex x2 being (Relation of X,X) st (b = x2 & x2 is (Equivalence_Relation of X)));
c in B;
then A17: (ex x3 being (Relation of X,X) st (c = x3 & x3 is (Equivalence_Relation of X)));
a in B;
then (ex x1 being (Relation of X,X) st (a = x1 & x1 is (Equivalence_Relation of X)));
then reconsider U1 = a,U2 = b,U3 = c as (Equivalence_Relation of X) by A16,A17;
thus ( B1 . (a,( B1 . (b,c) )) ) = ( B1 . (a,( U2 "\/" U3 )) ) by A10
.= ( U1 "\/" ( U2 "\/" U3 ) ) by A10
.= ( ( U1 "\/" U2 ) "\/" U3 ) by EQREL_1:13
.= ( B1 . (( U1 "\/" U2 ),c) ) by A10
.= ( B1 . (( B1 . (a,b) ),c) ) by A10;
end;
A18: (for a,b,c being (Element of L) holds ( a "\/" ( b "\/" c ) ) = ( ( a "\/" b ) "\/" c ))
proof
let a being (Element of L);
let b being (Element of L);
let c being (Element of L);
reconsider x = a,y = b,z = c as (Element of B);
A19: ( (the L_join of L) . (a,b) ) = ( a "\/" b ) by LATTICES:def 1;
thus ( a "\/" ( b "\/" c ) ) = ( (the L_join of L) . (a,( b "\/" c )) ) by LATTICES:def 1
.= ( B1 . (x,( B1 . (y,z) )) ) by LATTICES:def 1
.= ( (the L_join of L) . (( (the L_join of L) . (a,b) ),c) ) by A15
.= ( ( a "\/" b ) "\/" c ) by A19,LATTICES:def 1;
end;
A20:now
let a being (Element of B);
let b being (Element of B);
b in B;
then A21: (ex x2 being (Relation of X,X) st (b = x2 & x2 is (Equivalence_Relation of X)));
a in B;
then (ex x1 being (Relation of X,X) st (a = x1 & x1 is (Equivalence_Relation of X)));
then reconsider U1 = a,U2 = b as (Equivalence_Relation of X) by A21;
thus ( B1 . (a,b) ) = ( U2 "\/" U1 ) by A10
.= ( B1 . (b,a) ) by A10;
end;
A22: (for a,b being (Element of L) holds ( a "\/" b ) = ( b "\/" a ))
proof
let a being (Element of L);
let b being (Element of L);
reconsider x = a,y = b as (Element of B);
thus ( a "\/" b ) = ( B1 . (x,y) ) by LATTICES:def 1
.= ( (the L_join of L) . (b,a) ) by A20
.= ( b "\/" a ) by LATTICES:def 1;
end;
A23:now
let x being (Equivalence_Relation of X);
let y being (Equivalence_Relation of X);
A24: y in B;
x in B;
then reconsider x9 = x,y9 = y as (Element of B) by A24;
( B2 . (x9,y9) ) = ( x9 /\ y9 ) by A9;
hence ( B2 . (x,y) ) = ( x /\ y );
end;
A25:now
let a being (Element of B);
let b being (Element of B);
let c being (Element of B);
b in B;
then A26: (ex x2 being (Relation of X,X) st (b = x2 & x2 is (Equivalence_Relation of X)));
c in B;
then A27: (ex x3 being (Relation of X,X) st (c = x3 & x3 is (Equivalence_Relation of X)));
a in B;
then (ex x1 being (Relation of X,X) st (a = x1 & x1 is (Equivalence_Relation of X)));
then reconsider U1 = a,U2 = b,U3 = c as (Equivalence_Relation of X) by A26,A27;
thus ( B2 . (a,( B2 . (b,c) )) ) = ( B2 . (a,( U2 /\ U3 )) ) by A23
.= ( U1 /\ ( U2 /\ U3 ) ) by A23
.= ( ( U1 /\ U2 ) /\ U3 ) by XBOOLE_1:16
.= ( B2 . (( U1 /\ U2 ),c) ) by A23
.= ( B2 . (( B2 . (a,b) ),c) ) by A23;
end;
A28: (for a,b,c being (Element of L) holds ( a "/\" ( b "/\" c ) ) = ( ( a "/\" b ) "/\" c ))
proof
let a being (Element of L);
let b being (Element of L);
let c being (Element of L);
reconsider x = a,y = b,z = c as (Element of B);
A29: ( (the L_meet of L) . (a,b) ) = ( a "/\" b ) by LATTICES:def 2;
thus ( a "/\" ( b "/\" c ) ) = ( (the L_meet of L) . (a,( b "/\" c )) ) by LATTICES:def 2
.= ( B2 . (x,( B2 . (y,z) )) ) by LATTICES:def 2
.= ( (the L_meet of L) . (( (the L_meet of L) . (a,b) ),c) ) by A25
.= ( ( a "/\" b ) "/\" c ) by A29,LATTICES:def 2;
end;
A30: (for a,b being (Element of L) holds ( a "/\" ( a "\/" b ) ) = a)
proof
let a being (Element of L);
let b being (Element of L);
reconsider x = a,y = b as (Element of B);
A31: ( B2 . (x,( B1 . (x,y) )) ) = x
proof
y in B;
then A32: (ex x2 being (Relation of X,X) st (y = x2 & x2 is (Equivalence_Relation of X)));
x in B;
then (ex x1 being (Relation of X,X) st (x = x1 & x1 is (Equivalence_Relation of X)));
then reconsider U1 = x,U2 = y as (Equivalence_Relation of X) by A32;
( B1 . (x,y) ) = ( U1 "\/" U2 ) by A10;
hence ( B2 . (x,( B1 . (x,y) )) ) = ( U1 /\ ( U1 "\/" U2 ) ) by A23
.= x by EQREL_1:16;
end;
thus ( a "/\" ( a "\/" b ) ) = ( (the L_meet of L) . (a,( a "\/" b )) ) by LATTICES:def 2
.= a by A31,LATTICES:def 1;
end;
A33:now
let a being (Element of B);
let b being (Element of B);
b in B;
then A34: (ex x2 being (Relation of X,X) st (b = x2 & x2 is (Equivalence_Relation of X)));
a in B;
then (ex x1 being (Relation of X,X) st (a = x1 & x1 is (Equivalence_Relation of X)));
then reconsider U1 = a,U2 = b as (Equivalence_Relation of X) by A34;
thus ( B2 . (a,b) ) = ( U2 /\ U1 ) by A23
.= ( B2 . (b,a) ) by A23;
end;
A35: (for a,b being (Element of L) holds ( a "/\" b ) = ( b "/\" a ))
proof
let a being (Element of L);
let b being (Element of L);
reconsider x = a,y = b as (Element of B);
thus ( a "/\" b ) = ( B2 . (x,y) ) by LATTICES:def 2
.= ( (the L_meet of L) . (b,a) ) by A33
.= ( b "/\" a ) by LATTICES:def 2;
end;
(for a,b being (Element of L) holds ( ( a "/\" b ) "\/" b ) = b)
proof
let a being (Element of L);
let b being (Element of L);
reconsider x = a,y = b as (Element of B);
A36: ( B1 . (( B2 . (x,y) ),y) ) = y
proof
y in B;
then A37: (ex x2 being (Relation of X,X) st (y = x2 & x2 is (Equivalence_Relation of X)));
x in B;
then (ex x1 being (Relation of X,X) st (x = x1 & x1 is (Equivalence_Relation of X)));
then reconsider U1 = x,U2 = y as (Equivalence_Relation of X) by A37;
( B2 . (x,y) ) = ( U1 /\ U2 ) by A23;
hence ( B1 . (( B2 . (x,y) ),y) ) = ( U2 "\/" ( U1 /\ U2 ) ) by A10
.= y by EQREL_1:17;
end;
thus ( ( a "/\" b ) "\/" b ) = ( (the L_join of L) . (( a "/\" b ),b) ) by LATTICES:def 1
.= b by A36,LATTICES:def 2;
end;
then L is  join-commutative  join-associative  meet-absorbing  meet-commutative  meet-associative  join-absorbing by A22,A18,A35,A28,A30,LATTICES:def 4,LATTICES:def 5,LATTICES:def 6,LATTICES:def 7,LATTICES:def 8,LATTICES:def 9;
then reconsider L as  strict Lattice;
take L;
thus (the carrier of L) = { x where x is (Relation of X,X): x is (Equivalence_Relation of X) };
thus thesis by A10,A23;
end;
uniqueness
proof
let P1 being  strict Lattice;
let P2 being  strict Lattice;
assume that
A38: (the carrier of P1) = { x where x is (Relation of X,X): x is (Equivalence_Relation of X) }
and
A39: (for x,y being (Equivalence_Relation of X) holds (( (the L_meet of P1) . (x,y) ) = ( x /\ y ) & ( (the L_join of P1) . (x,y) ) = ( x "\/" y )))
and
A40: (the carrier of P2) = { x where x is (Relation of X,X): x is (Equivalence_Relation of X) }
and
A41: (for x,y being (Equivalence_Relation of X) holds (( (the L_meet of P2) . (x,y) ) = ( x /\ y ) & ( (the L_join of P2) . (x,y) ) = ( x "\/" y )));
reconsider Z = (the carrier of P1) as non  empty set;
now
let x being (Element of Z);
let y being (Element of Z);
y in Z;
then A42: (ex x3 being (Relation of X,X) st (y = x3 & x3 is (Equivalence_Relation of X))) by A38;
x in Z;
then (ex x2 being (Relation of X,X) st (x = x2 & x2 is (Equivalence_Relation of X))) by A38;
then reconsider x1 = x,y1 = y as (Equivalence_Relation of X) by A42;
thus ( (the L_meet of P1) . (x,y) ) = ( x1 /\ y1 ) by A39
.= ( (the L_meet of P2) . (x,y) ) by A41;
end;
then A43: (the L_meet of P1) = (the L_meet of P2) by A38,A40,BINOP_1:2;
now
let x being (Element of Z);
let y being (Element of Z);
y in Z;
then A44: (ex x3 being (Relation of X,X) st (y = x3 & x3 is (Equivalence_Relation of X))) by A38;
x in Z;
then (ex x2 being (Relation of X,X) st (x = x2 & x2 is (Equivalence_Relation of X))) by A38;
then reconsider x1 = x,y1 = y as (Equivalence_Relation of X) by A44;
thus ( (the L_join of P1) . (x,y) ) = ( x1 "\/" y1 ) by A39
.= ( (the L_join of P2) . (x,y) ) by A41;
end;
hence thesis by A38,A40,A43,BINOP_1:2;
end;
end;
