environ
vocabularies NUMBERS,PBOOLE,RELAT_1,EQREL_1,TARSKI,XBOOLE_0,STRUCT_0,LATTICES,FUNCT_1,SUBSET_1,BINOP_1,MSUALG_4,ZFMISC_1,CARD_3,MSUALG_1,FINSEQ_1,MARGREL1,PARTFUN1,ARYTM_3,ORDINAL4,NAT_1,XXREAL_0,CARD_1,RELAT_2,ARYTM_1,NAT_LAT,REALSET1,XXREAL_2,MSUALG_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,REALSET1,NUMBERS,XCMPLX_0,FINSEQ_2,STRUCT_0,PARTFUN1,FUNCT_2,RELSET_1,EQREL_1,BINOP_1,PBOOLE,MSUALG_1,MSUALG_3,MSUALG_4,LATTICES,NAT_LAT,CARD_3,FINSEQ_1,NAT_1,XXREAL_0,CKB1,CKB4,CKB6,CKB7,CKB9,CKB18;
definitions PBOOLE,BINOP_1,REALSET1,EQREL_1,FUNCOP_1,CKB1,CKB4,CKB7,CKB9,CKB18;
theorems BINOP_1,PBOOLE,MSUALG_4,EQREL_1,TARSKI,NAT_LAT,LATTICES,RELAT_1,RELAT_2,FUNCT_2,CARD_3,ZFMISC_1,MSUALG_1,FUNCT_1,MSUALG_3,FINSEQ_1,NAT_1,MSAFREE2,XBOOLE_0,XBOOLE_1,FINSEQ_3,XCMPLX_1,ORDERS_1,XREAL_1,XXREAL_0,PARTFUN1,FUNCOP_1,FINSEQ_2,CKB1,CKB2,CKB3,CKB4,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes PBOOLE,BINOP_1,NAT_1,FINSEQ_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,XREAL_0,NAT_1,FINSEQ_1,EQREL_1,PBOOLE,STRUCT_0,LATTICES,NAT_LAT,PRALG_1,MSUALG_1,MSUALG_3,MSUALG_4,ORDINAL1,CARD_1,CKB5,CKB19;
constructors BINOP_1,XXREAL_0,NAT_1,NAT_D,EQREL_1,REALSET1,NAT_LAT,MSUALG_3,MSUALG_4,RELSET_1,PRALG_2,FUNCOP_1,FINSEQ_2,CKB1,CKB4,CKB7,CKB9,CKB18;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve S for non void non empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
theorem
Th14: (for o being (OperSymbol of S) holds (for C1,C2 being (MSCongruence of A) holds (for x1,y1 being set holds (for a1,b1 being FinSequence holds ([ x1,y1 ] in ( ( C1 . ( ( the_arity_of o ) /. ( ( len a1 ) + 1 ) ) ) \/ ( C2 . ( ( the_arity_of o ) /. ( ( len a1 ) + 1 ) ) ) ) implies (for x,y being (Element of ( Args (o,A) )) holds ((x = ( ( a1 ^ <* x1 *> ) ^ b1 ) & y = ( ( a1 ^ <* y1 *> ) ^ b1 )) implies [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . y ) ] in ( ( C1 . ( the_result_sort_of o ) ) \/ ( C2 . ( the_result_sort_of o ) ) ))))))))
proof
let o being (OperSymbol of S);
let C1 being (MSCongruence of A),C2 being (MSCongruence of A);
let x1 being set,y1 being set;
let a1 being FinSequence,b1 being FinSequence;
assume A1: [ x1,y1 ] in ( ( C1 . ( ( the_arity_of o ) /. ( ( len a1 ) + 1 ) ) ) \/ ( C2 . ( ( the_arity_of o ) /. ( ( len a1 ) + 1 ) ) ) );
let x being (Element of ( Args (o,A) )),y being (Element of ( Args (o,A) ));
assume that
A2: x = ( ( a1 ^ <* x1 *> ) ^ b1 )
and
A3: y = ( ( a1 ^ <* y1 *> ) ^ b1 );
A4: y = ( a1 ^ ( <* y1 *> ^ b1 ) ) by A3,FINSEQ_1:32;
A5: x = ( a1 ^ ( <* x1 *> ^ b1 ) ) by A2,FINSEQ_1:32;
now
per cases  by A1,XBOOLE_0:def 3;
suppose A6: [ x1,y1 ] in ( C1 . ( ( the_arity_of o ) /. ( ( len a1 ) + 1 ) ) );

(for n being Nat holds (n in ( dom x ) implies [ ( x . n ),( y . n ) ] in ( C1 . ( ( the_arity_of o ) /. n ) )))
proof
let n being Nat;
assume A7: n in ( dom x );
then reconsider dz = ( dom ( the_arity_of o ) ) as non empty set by MSUALG_3:6;
A8: n in ( dom ( the_arity_of o ) ) by A7,MSUALG_3:6;
then A9: n in ( dom ( (the Sorts of A) * ( the_arity_of o ) ) ) by PARTFUN1:def 2;
reconsider so = ( (the Sorts of A) * ( the_arity_of o ) ) as  non-empty (ManySortedSet of dz);
A10: ( product so ) is non empty;
( pi (( Args (o,A) ),n) ) = ( pi (( ( ( (the Sorts of A) # ) * (the Arity of S) ) . o ),n) ) by MSUALG_1:def 4
.= ( pi (( ( (the Sorts of A) # ) . ( (the Arity of S) . o ) ),n) ) by FUNCT_2:15
.= ( pi (( ( (the Sorts of A) # ) . ( the_arity_of o ) ),n) ) by MSUALG_1:def 1
.= ( pi (( product ( (the Sorts of A) * ( the_arity_of o ) ) ),n) ) by FINSEQ_2:def 5
.= ( ( (the Sorts of A) * ( the_arity_of o ) ) . n ) by A9,A10,CARD_3:12
.= ( (the Sorts of A) . ( ( the_arity_of o ) . n ) ) by A8,FUNCT_1:13
.= ( (the Sorts of A) . ( ( the_arity_of o ) /. n ) ) by A8,PARTFUN1:def 6;
then A11: ( x . n ) in ( (the Sorts of A) . ( ( the_arity_of o ) /. n ) ) by CARD_3:def 6;
A12: (n in ( dom ( a1 ^ <* x1 *> ) ) or (ex k being Nat st (k in ( dom b1 ) & n = ( ( len ( a1 ^ <* x1 *> ) ) + k )))) by A2,A7,FINSEQ_1:25;
now
per cases  by A12,FINSEQ_1:25;
suppose A13: n in ( dom a1 );

then A14: ( y . n ) = ( a1 . n ) by A4,FINSEQ_1:def 7;
( x . n ) = ( a1 . n ) by A5,A13,FINSEQ_1:def 7;
hence thesis by A11,A14,EQREL_1:5;
end;
suppose (ex m being Nat st (m in ( dom <* x1 *> ) & n = ( ( len a1 ) + m )));

then consider m being Nat such that A15: m in ( dom <* x1 *> ) and A16: n = ( ( len a1 ) + m );
A17: m in ( Seg 1 ) by A15,FINSEQ_1:38;
then A18: m = 1 by FINSEQ_1:2,TARSKI:def 1;
then A19: n in ( Seg ( ( len a1 ) + 1 ) ) by A16,FINSEQ_1:4;
then n in ( Seg ( ( len a1 ) + ( len <* y1 *> ) ) ) by FINSEQ_1:40;
then n in ( Seg ( len ( a1 ^ <* y1 *> ) ) ) by FINSEQ_1:22;
then n in ( dom ( a1 ^ <* y1 *> ) ) by FINSEQ_1:def 3;
then A20: ( y . n ) = ( ( a1 ^ <* y1 *> ) . ( ( len a1 ) + 1 ) ) by A3,A16,A18,FINSEQ_1:def 7
.= y1 by FINSEQ_1:42;
n in ( Seg ( ( len a1 ) + ( len <* x1 *> ) ) ) by A19,FINSEQ_1:40;
then n in ( Seg ( len ( a1 ^ <* x1 *> ) ) ) by FINSEQ_1:22;
then n in ( dom ( a1 ^ <* x1 *> ) ) by FINSEQ_1:def 3;
then ( x . n ) = ( ( a1 ^ <* x1 *> ) . ( ( len a1 ) + 1 ) ) by A2,A16,A18,FINSEQ_1:def 7
.= x1 by FINSEQ_1:42;
hence thesis by A6,A16,A17,A20,FINSEQ_1:2,TARSKI:def 1;
end;
suppose (ex k being (Element of ( NAT )) st (k in ( dom b1 ) & n = ( ( len ( a1 ^ <* x1 *> ) ) + k )));

then consider k being (Element of ( NAT )) such that A21: k in ( dom b1 ) and A22: n = ( ( len ( a1 ^ <* x1 *> ) ) + k );
n = ( ( ( len a1 ) + ( len <* x1 *> ) ) + k ) by A22,FINSEQ_1:22;
then n = ( ( ( len a1 ) + 1 ) + k ) by FINSEQ_1:40;
then n = ( ( ( len a1 ) + ( len <* y1 *> ) ) + k ) by FINSEQ_1:40;
then n = ( ( len ( a1 ^ <* y1 *> ) ) + k ) by FINSEQ_1:22;
then A23: ( y . n ) = ( b1 . k ) by A3,A21,FINSEQ_1:def 7;
( x . n ) = ( b1 . k ) by A2,A21,A22,FINSEQ_1:def 7;
hence thesis by A11,A23,EQREL_1:5;
end;
end;
hence thesis;
end;
then [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . y ) ] in ( C1 . ( the_result_sort_of o ) ) by MSUALG_4:def 4;
hence thesis by XBOOLE_0:def 3;
end;
suppose A24: [ x1,y1 ] in ( C2 . ( ( the_arity_of o ) /. ( ( len a1 ) + 1 ) ) );

(for n being Nat holds (n in ( dom x ) implies [ ( x . n ),( y . n ) ] in ( C2 . ( ( the_arity_of o ) /. n ) )))
proof
let n being Nat;
assume A25: n in ( dom x );
then reconsider dz = ( dom ( the_arity_of o ) ) as non empty set by MSUALG_3:6;
A26: n in ( dom ( the_arity_of o ) ) by A25,MSUALG_3:6;
then A27: n in ( dom ( (the Sorts of A) * ( the_arity_of o ) ) ) by PARTFUN1:def 2;
reconsider so = ( (the Sorts of A) * ( the_arity_of o ) ) as  non-empty (ManySortedSet of dz);
A28: ( product so ) is non empty;
( pi (( Args (o,A) ),n) ) = ( pi (( ( ( (the Sorts of A) # ) * (the Arity of S) ) . o ),n) ) by MSUALG_1:def 4
.= ( pi (( ( (the Sorts of A) # ) . ( (the Arity of S) . o ) ),n) ) by FUNCT_2:15
.= ( pi (( ( (the Sorts of A) # ) . ( the_arity_of o ) ),n) ) by MSUALG_1:def 1
.= ( pi (( product ( (the Sorts of A) * ( the_arity_of o ) ) ),n) ) by FINSEQ_2:def 5
.= ( ( (the Sorts of A) * ( the_arity_of o ) ) . n ) by A27,A28,CARD_3:12
.= ( (the Sorts of A) . ( ( the_arity_of o ) . n ) ) by A26,FUNCT_1:13
.= ( (the Sorts of A) . ( ( the_arity_of o ) /. n ) ) by A26,PARTFUN1:def 6;
then A29: ( x . n ) in ( (the Sorts of A) . ( ( the_arity_of o ) /. n ) ) by CARD_3:def 6;
A30: (n in ( dom ( a1 ^ <* x1 *> ) ) or (ex k being Nat st (k in ( dom b1 ) & n = ( ( len ( a1 ^ <* x1 *> ) ) + k )))) by A2,A25,FINSEQ_1:25;
now
per cases  by A30,FINSEQ_1:25;
suppose A31: n in ( dom a1 );

then A32: ( y . n ) = ( a1 . n ) by A4,FINSEQ_1:def 7;
( x . n ) = ( a1 . n ) by A5,A31,FINSEQ_1:def 7;
hence thesis by A29,A32,EQREL_1:5;
end;
suppose (ex m being Nat st (m in ( dom <* x1 *> ) & n = ( ( len a1 ) + m )));

then consider m being Nat such that A33: m in ( dom <* x1 *> ) and A34: n = ( ( len a1 ) + m );
A35: m in ( Seg 1 ) by A33,FINSEQ_1:38;
then A36: m = 1 by FINSEQ_1:2,TARSKI:def 1;
then A37: n in ( Seg ( ( len a1 ) + 1 ) ) by A34,FINSEQ_1:4;
then n in ( Seg ( ( len a1 ) + ( len <* y1 *> ) ) ) by FINSEQ_1:40;
then n in ( Seg ( len ( a1 ^ <* y1 *> ) ) ) by FINSEQ_1:22;
then n in ( dom ( a1 ^ <* y1 *> ) ) by FINSEQ_1:def 3;
then A38: ( y . n ) = ( ( a1 ^ <* y1 *> ) . ( ( len a1 ) + 1 ) ) by A3,A34,A36,FINSEQ_1:def 7
.= y1 by FINSEQ_1:42;
n in ( Seg ( ( len a1 ) + ( len <* x1 *> ) ) ) by A37,FINSEQ_1:40;
then n in ( Seg ( len ( a1 ^ <* x1 *> ) ) ) by FINSEQ_1:22;
then n in ( dom ( a1 ^ <* x1 *> ) ) by FINSEQ_1:def 3;
then ( x . n ) = ( ( a1 ^ <* x1 *> ) . ( ( len a1 ) + 1 ) ) by A2,A34,A36,FINSEQ_1:def 7
.= x1 by FINSEQ_1:42;
hence thesis by A24,A34,A35,A38,FINSEQ_1:2,TARSKI:def 1;
end;
suppose (ex k being (Element of ( NAT )) st (k in ( dom b1 ) & n = ( ( len ( a1 ^ <* x1 *> ) ) + k )));

then consider k being (Element of ( NAT )) such that A39: k in ( dom b1 ) and A40: n = ( ( len ( a1 ^ <* x1 *> ) ) + k );
n = ( ( ( len a1 ) + ( len <* x1 *> ) ) + k ) by A40,FINSEQ_1:22;
then n = ( ( ( len a1 ) + 1 ) + k ) by FINSEQ_1:40;
then n = ( ( ( len a1 ) + ( len <* y1 *> ) ) + k ) by FINSEQ_1:40;
then n = ( ( len ( a1 ^ <* y1 *> ) ) + k ) by FINSEQ_1:22;
then A41: ( y . n ) = ( b1 . k ) by A3,A39,FINSEQ_1:def 7;
( x . n ) = ( b1 . k ) by A2,A39,A40,FINSEQ_1:def 7;
hence thesis by A29,A41,EQREL_1:5;
end;
end;
hence thesis;
end;
then [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . y ) ] in ( C2 . ( the_result_sort_of o ) ) by MSUALG_4:def 4;
hence thesis by XBOOLE_0:def 3;
end;
end;
hence thesis;
end;
