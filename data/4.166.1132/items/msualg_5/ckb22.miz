environ
vocabularies NUMBERS,PBOOLE,RELAT_1,EQREL_1,TARSKI,XBOOLE_0,STRUCT_0,LATTICES,FUNCT_1,SUBSET_1,BINOP_1,MSUALG_4,ZFMISC_1,CARD_3,MSUALG_1,FINSEQ_1,MARGREL1,PARTFUN1,ARYTM_3,ORDINAL4,NAT_1,XXREAL_0,CARD_1,RELAT_2,ARYTM_1,NAT_LAT,REALSET1,XXREAL_2,MSUALG_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,REALSET1,NUMBERS,XCMPLX_0,FINSEQ_2,STRUCT_0,PARTFUN1,FUNCT_2,RELSET_1,EQREL_1,BINOP_1,PBOOLE,MSUALG_1,MSUALG_3,MSUALG_4,LATTICES,NAT_LAT,CARD_3,FINSEQ_1,NAT_1,XXREAL_0,CKB1,CKB4,CKB6,CKB7,CKB9,CKB18;
definitions PBOOLE,BINOP_1,REALSET1,EQREL_1,FUNCOP_1,CKB1,CKB4,CKB7,CKB9,CKB18;
theorems BINOP_1,PBOOLE,MSUALG_4,EQREL_1,TARSKI,NAT_LAT,LATTICES,RELAT_1,RELAT_2,FUNCT_2,CARD_3,ZFMISC_1,MSUALG_1,FUNCT_1,MSUALG_3,FINSEQ_1,NAT_1,MSAFREE2,XBOOLE_0,XBOOLE_1,FINSEQ_3,XCMPLX_1,ORDERS_1,XREAL_1,XXREAL_0,PARTFUN1,FUNCOP_1,FINSEQ_2,CKB1,CKB2,CKB3,CKB4,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB20,CKB21;
schemes PBOOLE,BINOP_1,NAT_1,FINSEQ_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,XREAL_0,NAT_1,FINSEQ_1,EQREL_1,PBOOLE,STRUCT_0,LATTICES,NAT_LAT,PRALG_1,MSUALG_1,MSUALG_3,MSUALG_4,ORDINAL1,CARD_1,CKB5,CKB19;
constructors BINOP_1,XXREAL_0,NAT_1,NAT_D,EQREL_1,REALSET1,NAT_LAT,MSUALG_3,MSUALG_4,RELSET_1,PRALG_2,FUNCOP_1,FINSEQ_2,CKB1,CKB4,CKB7,CKB9,CKB18;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve S for non void non empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
theorem
Th16: (for o being (OperSymbol of S) holds (for C1,C2 being (MSCongruence of A) holds (for C being  MSEquivalence-like (ManySortedRelation of A) holds (C = ( C1 "\/" C2 ) implies (for x,y being (Element of ( Args (o,A) )) holds ((for n being Nat holds (n in ( dom x ) implies [ ( x . n ),( y . n ) ] in ( C . ( ( the_arity_of o ) /. n ) ))) implies [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . y ) ] in ( C . ( the_result_sort_of o ) )))))))
proof
set b1 = ( {} );
let o being (OperSymbol of S);
let C1 being (MSCongruence of A),C2 being (MSCongruence of A);
let C being  MSEquivalence-like (ManySortedRelation of A);
assume that
A1: C = ( C1 "\/" C2 );
let x being (Element of ( Args (o,A) )),y being (Element of ( Args (o,A) ));
defpred P[ (Element of ( NAT )) ]
 means
(for a1,a2,b1 being FinSequence holds ((((( len a1 ) = $1 & ( len a1 ) = ( len a2 )) & x = ( a1 ^ b1 )) & (for n being Nat holds (n in ( dom a1 ) implies [ ( x . n ),( ( a2 ^ b1 ) . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )))) implies [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . ( a2 ^ b1 ) ) ] in ( C . ( the_result_sort_of o ) )));
A2: (for l being (Element of ( NAT )) holds (P[ l ] implies P[ ( l + 1 ) ]))
proof
let l being (Element of ( NAT ));
assume that
A3: (for a1,a2,b1 being FinSequence holds ((((( len a1 ) = l & ( len a1 ) = ( len a2 )) & x = ( a1 ^ b1 )) & (for n being Nat holds (n in ( dom a1 ) implies [ ( x . n ),( ( a2 ^ b1 ) . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )))) implies [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . ( a2 ^ b1 ) ) ] in ( C . ( the_result_sort_of o ) )));
let a1 being FinSequence,a2 being FinSequence,b1 being FinSequence;
assume that
A4: ( len a1 ) = ( l + 1 )
and
A5: ( len a1 ) = ( len a2 )
and
A6: x = ( a1 ^ b1 )
and
A7: (for n being Nat holds (n in ( dom a1 ) implies [ ( x . n ),( ( a2 ^ b1 ) . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )));
A8: ( l + 1 ) in ( Seg ( len a1 ) ) by A4,FINSEQ_1:4;
then A9: ( l + 1 ) in ( dom a2 ) by A5,FINSEQ_1:def 3;
set y = ( a2 ^ b1 );
a2 <> ( {} ) by A4,A5;
then consider q2 being FinSequence,y1 being set such that A10: a2 = ( q2 ^ <* y1 *> ) by FINSEQ_1:46;
A11: ( l + 1 ) = ( ( len q2 ) + ( len <* y1 *> ) ) by A4,A5,A10,FINSEQ_1:22
.= ( ( len q2 ) + 1 ) by FINSEQ_1:40;
then A12: y1 = ( a2 . ( l + 1 ) ) by A10,FINSEQ_1:42
.= ( y . ( l + 1 ) ) by A9,FINSEQ_1:def 7;
a1 <> ( {} ) by A4;
then consider q1 being FinSequence,x1 being set such that A13: a1 = ( q1 ^ <* x1 *> ) by FINSEQ_1:46;
A14: ( l + 1 ) = ( ( len q1 ) + ( len <* x1 *> ) ) by A4,A13,FINSEQ_1:22
.= ( ( len q1 ) + 1 ) by FINSEQ_1:40;
then A15: ( len q1 ) = ( len q2 ) by A11,XCMPLX_1:2;
A16: ( dom q1 ) = ( Seg ( len q1 ) ) by FINSEQ_1:def 3
.= ( dom q2 ) by A15,FINSEQ_1:def 3;
A17: (for n being (Element of ( NAT )) holds (n in ( dom q1 ) implies [ ( q1 . n ),( q2 . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )))
proof
let n being (Element of ( NAT ));
( len q1 ) <= ( len a1 ) by A4,A14,NAT_1:11;
then A18: ( Seg ( len q1 ) ) c= ( Seg ( len a1 ) ) by FINSEQ_1:5;
assume A19: n in ( dom q1 );
then n in ( Seg ( len q1 ) ) by FINSEQ_1:def 3;
then n in ( Seg ( len a1 ) ) by A18;
then A20: n in ( dom a1 ) by FINSEQ_1:def 3;
then A21: ( x . n ) = ( a1 . n ) by A6,FINSEQ_1:def 7
.= ( q1 . n ) by A13,A19,FINSEQ_1:def 7;
( dom a1 ) = ( Seg ( len a1 ) ) by FINSEQ_1:def 3
.= ( dom a2 ) by A5,FINSEQ_1:def 3;
then ( y . n ) = ( a2 . n ) by A20,FINSEQ_1:def 7
.= ( q2 . n ) by A10,A16,A19,FINSEQ_1:def 7;
hence thesis by A7,A20,A21;
end;
A22: ( l + 1 ) in ( dom a1 ) by A8,FINSEQ_1:def 3;
A23: ( ( q1 ^ <* x1 *> ) ^ b1 ) = ( q1 ^ ( <* x1 *> ^ b1 ) ) by FINSEQ_1:32;
A24: ( ( q2 ^ <* x1 *> ) ^ b1 ) = ( q2 ^ ( <* x1 *> ^ b1 ) ) by FINSEQ_1:32;
A25: (for n being Nat holds (n in ( dom q1 ) implies [ ( x . n ),( ( ( q2 ^ <* x1 *> ) ^ b1 ) . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )))
proof
let n being Nat;
assume A26: n in ( dom q1 );
then A27: ( ( ( q2 ^ <* x1 *> ) ^ b1 ) . n ) = ( q2 . n ) by A16,A24,FINSEQ_1:def 7;
( x . n ) = ( q1 . n ) by A6,A13,A23,A26,FINSEQ_1:def 7;
hence thesis by A17,A26,A27;
end;
x1 = ( a1 . ( l + 1 ) ) by A13,A14,FINSEQ_1:42
.= ( x . ( l + 1 ) ) by A6,A22,FINSEQ_1:def 7;
then A28: [ x1,y1 ] in ( C . ( ( the_arity_of o ) /. ( l + 1 ) ) ) by A7,A22,A12;
( len q1 ) = l by A14,XCMPLX_1:2;
then [ ( ( Den (o,A) ) . x ),( ( Den (o,A) ) . ( ( q2 ^ <* x1 *> ) ^ b1 ) ) ] in ( C . ( the_result_sort_of o ) ) by A3,A6,A13,A15,A23,A24,A25;
hence thesis by A1,A6,A13,A10,A14,A15,A17,A28,CKB21:1;
end;
A29: ( dom y ) = ( dom ( the_arity_of o ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of o ) ) ) by FINSEQ_1:def 3;
( dom x ) = ( dom ( the_arity_of o ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of o ) ) ) by FINSEQ_1:def 3;
then reconsider a1 = x,a2 = y as FinSequence by A29,FINSEQ_1:def 2;
assume A30: (for n being Nat holds (n in ( dom x ) implies [ ( x . n ),( y . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )));
A31: ( Seg ( len a2 ) ) = ( dom a2 ) by FINSEQ_1:def 3
.= ( dom ( the_arity_of o ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of o ) ) ) by FINSEQ_1:def 3;
( Seg ( len a1 ) ) = ( dom a1 ) by FINSEQ_1:def 3
.= ( dom ( the_arity_of o ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of o ) ) ) by FINSEQ_1:def 3;
then A32: ( len a1 ) = ( len a2 ) by A31,FINSEQ_1:6;
A33: x = ( a1 ^ b1 ) by FINSEQ_1:34;
A34: y = ( a2 ^ b1 ) by FINSEQ_1:34;
A35: P[ ( 0 ) ]
proof
( field ( C . ( the_result_sort_of o ) ) ) = ( (the Sorts of A) . ( the_result_sort_of o ) ) by ORDERS_1:12;
then A36: ( C . ( the_result_sort_of o ) ) is_reflexive_in ( (the Sorts of A) . ( the_result_sort_of o ) ) by RELAT_2:def 9;
A37: ( (the Sorts of A) . ( the_result_sort_of o ) ) = ( (the Sorts of A) . ( (the ResultSort of S) . o ) ) by MSUALG_1:def 2
.= ( ( (the Sorts of A) * (the ResultSort of S) ) . o ) by FUNCT_2:15
.= ( Result (o,A) ) by MSUALG_1:def 5;
let a1 being FinSequence,a2 being FinSequence,b1 being FinSequence;
assume that
A38: ( len a1 ) = ( 0 )
and
A39: ( len a1 ) = ( len a2 )
and
A40: x = ( a1 ^ b1 )
and
(for n being Nat holds (n in ( dom a1 ) implies [ ( x . n ),( ( a2 ^ b1 ) . n ) ] in ( C . ( ( the_arity_of o ) /. n ) )));
A41: a1 = ( {} ) by A38;
a2 = ( {} ) by A38,A39;
hence thesis by A40,A41,A37,A36,RELAT_2:def 1;
end;
(for l being (Element of ( NAT )) holds P[ l ]) from NAT_1:sch 1(A35,A2);
hence thesis by A30,A32,A33,A34;
end;
