environ
vocabularies NUMBERS,ORDINAL1,REAL_1,XBOOLE_0,METRIC_1,PROB_1,XXREAL_2,FUNCT_1,RELAT_1,STRUCT_0,PRE_TOPC,SUBSET_1,FUNCOP_1,XXREAL_0,MEASURE5,SEQ_1,CARD_1,ARYTM_1,ARYTM_3,VALUED_0,TARSKI,ORDINAL2,NAT_1,BHSP_3,COMPLEX1,RELAT_2,RCOMP_1,PCOMPS_1,ZFMISC_1,XREAL_0,REWRITE1,SETFAM_1,SEQ_2,METRIC_6,FRECHET,FINSET_1,VALUED_1,CARD_3,TOPGEN_1,WELLORD1,ORDERS_2,PARTFUN1,WELLFND1,TBSP_1,WAYBEL23,RLVECT_3,COMPL_SP;
notations METRIC_6,RELAT_2,BINOP_1,TOPMETR,CARD_1,FUNCOP_1,CANTOR_1,WELLORD1,COMPLEX1,FINSET_1,SEQ_2,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XXREAL_0,XREAL_0,REAL_1,SETFAM_1,DOMAIN_1,TOPS_2,FUNCT_1,VALUED_1,NAT_1,VALUED_0,STRUCT_0,PRE_TOPC,COMPTS_1,RELAT_1,SEQ_1,TBSP_1,RELSET_1,PARTFUN1,FUNCT_2,METRIC_1,PCOMPS_1,CARD_3,PROB_1,FRECHET,KURATO_0,KURATO_2,WELLFND1,WAYBEL23,ORDERS_2,TOPGEN_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40;
definitions TARSKI,TOPS_2,SUBSET_1,STRUCT_0,TBSP_1,PCOMPS_1,COMPTS_1,METRIC_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40;
theorems KURATO_2,NAT_1,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_1,METRIC_1,XREAL_0,XCMPLX_1,ABSVALUE,TOPMETR,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,CARD_4,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SEQM_3,PARTFUN1,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,XREAL_1,XXREAL_0,ORDINAL1,FRECHET2,FRECHET,COMPTS_1,STIRL2_1,CARD_1,HAUSDORF,TOPMETR3,CARD_3,TOPGEN_4,DICKSON,RELSET_2,TOPGEN_1,WELLFND1,WAYBEL23,UNIFORM1,CARD_2,TOPREAL6,FINSET_1,PROB_1,FUNCOP_1,KURATO_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB57;
schemes FUNCT_1,WELLFND1,TREES_2,FUNCT_2,NAT_1,FRAENKEL,BINOP_1,SEQ_1,CKB56;
registrations REALSET1,TOPMETR,PRE_TOPC,PCOMPS_1,NAT_1,TBSP_1,XREAL_0,RELSET_1,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,HAUSDORF,MEMBERED,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,VALUED_1,FUNCT_2,NUMBERS,FINSET_1,SEQ_4,WELLFND1,ZFMISC_1,KURATO_0,CKB2,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26;
constructors REAL_1,NAT_1,TBSP_1,YELLOW_6,FRECHET,FRECHET2,KURATO_2,COMPLEX1,SEQ_2,TOPS_2,WELLORD1,CARD_3,CANTOR_1,URYSOHN3,METRIC_6,REALSET1,WELLFND1,TOPGEN_4,WAYBEL23,TOPGEN_1,SEQ_1,COMPTS_1,FINSUB_1,TOPS_1,BINOP_2,RVSUM_1,KURATO_0,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve r for Real;
theorem
Th31: (for M being  Reflexive  symmetric  triangle non empty MetrStruct holds (M is  totally_bounded iff (for r being Real holds (for A being (Subset of M) holds ((r > ( 0 ) & (for p,q being (Point of M) holds (((p <> q & p in A) & q in A) implies ( dist (p,q) ) >= r))) implies A is  finite)))))
proof
let M being  Reflexive  symmetric  triangle non empty MetrStruct;
thus (M is  totally_bounded implies (for r being Real holds (for A being (Subset of M) holds ((r > ( 0 ) & (for p,q being (Point of M) holds (((p <> q & p in A) & q in A) implies ( dist (p,q) ) >= r))) implies A is  finite))))
proof
assume A1: M is  totally_bounded;
let r being Real;
let A being (Subset of M);
assume that
A2: r > ( 0 )
and
A3: (for p,q being (Point of M) holds (((p <> q & p in A) & q in A) implies ( dist (p,q) ) >= r));
( r / 2 ) > ( 0 ) by A2,XREAL_1:215;
then consider G being (Subset-Family of M) such that A4: G is  finite and A5: (the carrier of M) = ( union G ) and A6: (for C being (Subset of M) holds (C in G implies (ex w being (Point of M) st C = ( Ball (w,( r / 2 )) )))) by A1,TBSP_1:def 1;
defpred f[ set,set ]
 means
($1 in $2 & $2 in G);
A7: (for x holds (x in A implies (ex y st (y in ( bool (the carrier of M) ) & f[ x,y ]))))
proof
let x;
assume x in A;
then consider y such that A8: x in y and A9: y in G by A5,TARSKI:def 4;
reconsider y as (Subset of M) by A9;
take y;
thus thesis by A8,A9;
end;
consider F being (Function of A,( bool (the carrier of M) )) such that A10: (for x holds (x in A implies f[ x,( F . x ) ])) from FUNCT_2:sch 1(A7);
now
let x1 being set,x2 being set;
assume that
A11: x1 in A
and
A12: x2 in A
and
A13: ( F . x1 ) = ( F . x2 );
reconsider p1 = x1,p2 = x2 as (Point of M) by A11,A12;
( F . x1 ) in G by A10,A11;
then consider w being (Point of M) such that A14: ( F . x1 ) = ( Ball (w,( r / 2 )) ) by A6;
p1 in ( Ball (w,( r / 2 )) ) by A10,A11,A14;
then A15: ( dist (p1,w) ) < ( r / 2 ) by METRIC_1:11;
A16: ( dist (p1,p2) ) <= ( ( dist (p1,w) ) + ( dist (w,p2) ) ) by METRIC_1:4;
p2 in ( Ball (w,( r / 2 )) ) by A10,A12,A13,A14;
then ( dist (w,p2) ) < ( r / 2 ) by METRIC_1:11;
then ( ( dist (p1,w) ) + ( dist (w,p2) ) ) < ( ( r / 2 ) + ( r / 2 ) ) by A15,XREAL_1:8;
then ( dist (p1,p2) ) < ( ( r / 2 ) + ( r / 2 ) ) by A16,XXREAL_0:2;
hence x1 = x2 by A3,A11,A12;
end;
then A17: F is  one-to-one by FUNCT_2:19;
A18: ( rng F ) c= G
proof
let x;
assume x in ( rng F );
then (ex y st (y in ( dom F ) & x = ( F . y ))) by FUNCT_1:def 3;
hence thesis by A10;
end;
( dom F ) = A by FUNCT_2:def 1;
then A,( rng F ) are_equipotent  by A17,WELLORD2:def 4;
hence thesis by A4,A18,CARD_1:38;
end;

assume A19: (for r being Real holds (for A being (Subset of M) holds ((r > ( 0 ) & (for p,q being (Point of M) holds (((p <> q & p in A) & q in A) implies ( dist (p,q) ) >= r))) implies A is  finite)));
let r;
assume that
A20: r > ( 0 );
consider A being (Subset of M) such that A21: (for p,q being (Point of M) holds (((p <> q & p in A) & q in A) implies ( dist (p,q) ) >= r)) and A22: (for p being (Point of M) holds (ex q being (Point of M) st (q in A & p in ( Ball (q,r) )))) by A20,CKB57:1;
deffunc B((Point of M)) = ( Ball ($1,r) );
set BA = { B(p) where p is (Point of M): p in A };
A23: A is  finite by A19,A20,A21;
A24: BA is  finite from FRAENKEL:sch 21(A23);
BA c= ( bool (the carrier of M) )
proof
let x;
assume x in BA;
then (ex p being (Point of M) st (x = B(p) & p in A));
hence thesis;
end;
then reconsider BA as (Subset-Family of M);
take BA;
(the carrier of M) c= ( union BA )
proof
let x;
assume x in (the carrier of M);
then reconsider p = x as (Point of M);
consider q being (Point of M) such that A25: q in A and A26: p in B(q) by A22;
B(q) in BA by A25;
hence thesis by A26,TARSKI:def 4;
end;
hence (BA is  finite & ( union BA ) = (the carrier of M)) by A24,XBOOLE_0:def 10;
let C being (Subset of M);
assume C in BA;
then (ex p being (Point of M) st (C = B(p) & p in A));
hence thesis;
end;
