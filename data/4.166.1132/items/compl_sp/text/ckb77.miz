environ
vocabularies NUMBERS,ORDINAL1,REAL_1,XBOOLE_0,METRIC_1,PROB_1,XXREAL_2,FUNCT_1,RELAT_1,STRUCT_0,PRE_TOPC,SUBSET_1,FUNCOP_1,XXREAL_0,MEASURE5,SEQ_1,CARD_1,ARYTM_1,ARYTM_3,VALUED_0,TARSKI,ORDINAL2,NAT_1,BHSP_3,COMPLEX1,RELAT_2,RCOMP_1,PCOMPS_1,ZFMISC_1,XREAL_0,REWRITE1,SETFAM_1,SEQ_2,METRIC_6,FRECHET,FINSET_1,VALUED_1,CARD_3,TOPGEN_1,WELLORD1,ORDERS_2,PARTFUN1,WELLFND1,TBSP_1,WAYBEL23,RLVECT_3,COMPL_SP;
notations METRIC_6,RELAT_2,BINOP_1,TOPMETR,CARD_1,FUNCOP_1,CANTOR_1,WELLORD1,COMPLEX1,FINSET_1,SEQ_2,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XXREAL_0,XREAL_0,REAL_1,SETFAM_1,DOMAIN_1,TOPS_2,FUNCT_1,VALUED_1,NAT_1,VALUED_0,STRUCT_0,PRE_TOPC,COMPTS_1,RELAT_1,SEQ_1,TBSP_1,RELSET_1,PARTFUN1,FUNCT_2,METRIC_1,PCOMPS_1,CARD_3,PROB_1,FRECHET,KURATO_0,KURATO_2,WELLFND1,WAYBEL23,ORDERS_2,TOPGEN_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB66,CKB68,CKB70;
definitions TARSKI,TOPS_2,SUBSET_1,STRUCT_0,TBSP_1,PCOMPS_1,COMPTS_1,METRIC_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB68,CKB70;
theorems KURATO_2,NAT_1,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_1,METRIC_1,XREAL_0,XCMPLX_1,ABSVALUE,TOPMETR,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,CARD_4,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SEQM_3,PARTFUN1,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,XREAL_1,XXREAL_0,ORDINAL1,FRECHET2,FRECHET,COMPTS_1,STIRL2_1,CARD_1,HAUSDORF,TOPMETR3,CARD_3,TOPGEN_4,DICKSON,RELSET_2,TOPGEN_1,WELLFND1,WAYBEL23,UNIFORM1,CARD_2,TOPREAL6,FINSET_1,PROB_1,FUNCOP_1,KURATO_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB67,CKB68,CKB69,CKB70,CKB72;
schemes FUNCT_1,WELLFND1,TREES_2,FUNCT_2,NAT_1,FRAENKEL,BINOP_1,SEQ_1,CKB56;
registrations REALSET1,TOPMETR,PRE_TOPC,PCOMPS_1,NAT_1,TBSP_1,XREAL_0,RELSET_1,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,HAUSDORF,MEMBERED,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,VALUED_1,FUNCT_2,NUMBERS,FINSET_1,SEQ_4,WELLFND1,ZFMISC_1,KURATO_0,CKB2,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26,CKB71,CKB73,CKB74,CKB75,CKB76;
constructors REAL_1,NAT_1,TBSP_1,YELLOW_6,FRECHET,FRECHET2,KURATO_2,COMPLEX1,SEQ_2,TOPS_2,WELLORD1,CARD_3,CANTOR_1,URYSOHN3,METRIC_6,REALSET1,WELLFND1,TOPGEN_4,WAYBEL23,TOPGEN_1,SEQ_1,COMPTS_1,FINSUB_1,TOPS_1,BINOP_2,RVSUM_1,KURATO_0,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB66,CKB68,CKB70;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve r for Real;
theorem
(for M being  triangle  Reflexive non empty MetrStruct holds (for a being (Point of M) holds (for X being non empty set holds (( WellSpace (a,X) ) is  complete implies M is  complete))))
proof
let M being  triangle  Reflexive non empty MetrStruct;
let a being (Point of M);
let X being non empty set;
consider x0 being set such that A1: x0 in X by XBOOLE_0:def 1;
set W = ( WellSpace (a,X) );
assume A2: ( WellSpace (a,X) ) is  complete;
let S being (sequence of M);
assume that
A3: S is  Cauchy;
defpred P[ set,set ]
 means
((( S . $1 ) <> a implies $2 = [ x0,( S . $1 ) ]) & (( S . $1 ) = a implies $2 = [ X,( S . $1 ) ]));
A4: (for x holds (x in ( NAT ) implies (ex y st (y in (the carrier of W) & P[ x,y ]))))
proof
let x;
assume x in ( NAT );
then reconsider i = x as (Element of ( NAT ));
per cases ;
suppose A5: ( S . i ) <> a;

take [ x0,( S . i ) ];
thus thesis by A1,A5,CKB67:1;
end;
suppose A6: ( S . x ) = a;

take [ X,a ];
thus thesis by A6,CKB67:1;
end;
end;
consider S9 being (sequence of W) such that A7: (for x holds (x in ( NAT ) implies P[ x,( S9 . x ) ])) from FUNCT_2:sch 1(A4);
S9 is  Cauchy
proof
let r;
assume r > ( 0 );
then consider p being (Element of ( NAT )) such that A8: (for n,m being (Element of ( NAT )) holds ((p <= n & p <= m) implies ( dist (( S . n ),( S . m )) ) < r)) by A3,TBSP_1:def 4;
take p;
let n being (Element of ( NAT )),m being (Element of ( NAT ));
assume that
A9: p <= n
and
A10: p <= m;
per cases ;
suppose A11: (( S . n ) = a & ( S . m ) = a);

then A12: [ X,( S . m ) ] = ( S9 . m ) by A7;
[ X,( S . n ) ] = ( S9 . n ) by A7,A11;
then ( dist (( S9 . n ),( S9 . m )) ) = ( dist (( S . n ),( S . m )) ) by A12,CKB68:def 1;
hence thesis by A8,A9,A10;
end;
suppose A13: (( S . n ) <> a & ( S . m ) = a);

then A14: [ X,( S . m ) ] = ( S9 . m ) by A7;
A15: ( dist (( S . m ),( S . m )) ) = ( 0 ) by METRIC_1:1;
A16: X <> x0 by A1;
[ x0,( S . n ) ] = ( S9 . n ) by A7,A13;
then ( dist (( S9 . n ),( S9 . m )) ) = ( ( dist (( S . n ),( S . m )) ) + ( dist (( S . m ),( S . m )) ) ) by A13,A14,A16,CKB68:def 1;
hence thesis by A8,A9,A10,A15;
end;
suppose A17: (( S . n ) = a & ( S . m ) <> a);

then A18: [ x0,( S . m ) ] = ( S9 . m ) by A7;
A19: ( dist (( S . n ),( S . n )) ) = ( 0 ) by METRIC_1:1;
A20: X <> x0 by A1;
[ X,( S . n ) ] = ( S9 . n ) by A7,A17;
then ( dist (( S9 . n ),( S9 . m )) ) = ( ( dist (( S . n ),( S . n )) ) + ( dist (( S . n ),( S . m )) ) ) by A17,A18,A20,CKB68:def 1;
hence thesis by A8,A9,A10,A19;
end;
suppose A21: (( S . n ) <> a & ( S . m ) <> a);

then A22: [ x0,( S . m ) ] = ( S9 . m ) by A7;
[ x0,( S . n ) ] = ( S9 . n ) by A7,A21;
then ( dist (( S9 . n ),( S9 . m )) ) = ( dist (( S . n ),( S . m )) ) by A22,CKB68:def 1;
hence thesis by A8,A9,A10;
end;
end;
then S9 is  convergent by A2,TBSP_1:def 5;
then consider L being (Element of W) such that A23: (for r holds (r > ( 0 ) implies (ex n being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (n <= m implies ( dist (( S9 . m ),L) ) < r))))) by TBSP_1:def 2;
consider L1 being set,L2 being (Point of M) such that A24: L = [ L1,L2 ] and ((L1 in X & L2 <> a) or (L1 = X & L2 = a)) by CKB67:1;
take L2;
let r;
assume r > ( 0 );
then consider n being (Element of ( NAT )) such that A25: (for m being (Element of ( NAT )) holds (n <= m implies ( dist (( S9 . m ),L) ) < r)) by A23;
take n;
let m being (Element of ( NAT ));
assume that
A26: n <= m;
per cases ;
suppose A27: (( S . m ) = a & L1 = X);

then ( S9 . m ) = [ X,a ] by A7;
then ( dist (( S9 . m ),L) ) = ( dist (( S . m ),L2) ) by A24,A27,CKB68:def 1;
hence thesis by A25,A26;
end;
suppose A28: (( S . m ) = a & L1 <> X);

then ( S9 . m ) = [ X,a ] by A7;
then A29: ( dist (( S9 . m ),L) ) = ( ( dist (( S . m ),( S . m )) ) + ( dist (( S . m ),L2) ) ) by A24,A28,CKB68:def 1;
( dist (( S . m ),( S . m )) ) = ( 0 ) by METRIC_1:1;
hence thesis by A25,A26,A29;
end;
suppose A30: (( S . m ) <> a & L1 = x0);

then ( S9 . m ) = [ x0,( S . m ) ] by A7;
then ( dist (( S9 . m ),L) ) = ( dist (( S . m ),L2) ) by A24,A30,CKB68:def 1;
hence thesis by A25,A26;
end;
suppose A31: (( S . m ) <> a & L1 <> x0);

then ( S9 . m ) = [ x0,( S . m ) ] by A7;
then A32: ( dist (( S9 . m ),L) ) = ( ( dist (( S . m ),a) ) + ( dist (a,L2) ) ) by A24,A31,CKB68:def 1;
A33: ( ( dist (( S . m ),a) ) + ( dist (a,L2) ) ) >= ( dist (( S . m ),L2) ) by METRIC_1:4;
( dist (( S9 . m ),L) ) < r by A25,A26;
hence thesis by A32,A33,XXREAL_0:2;
end;
end;
