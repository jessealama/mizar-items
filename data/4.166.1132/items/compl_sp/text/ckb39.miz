environ
vocabularies NUMBERS,ORDINAL1,REAL_1,XBOOLE_0,METRIC_1,PROB_1,XXREAL_2,FUNCT_1,RELAT_1,STRUCT_0,PRE_TOPC,SUBSET_1,FUNCOP_1,XXREAL_0,MEASURE5,SEQ_1,CARD_1,ARYTM_1,ARYTM_3,VALUED_0,TARSKI,ORDINAL2,NAT_1,BHSP_3,COMPLEX1,RELAT_2,RCOMP_1,PCOMPS_1,ZFMISC_1,XREAL_0,REWRITE1,SETFAM_1,SEQ_2,METRIC_6,FRECHET,FINSET_1,VALUED_1,CARD_3,TOPGEN_1,WELLORD1,ORDERS_2,PARTFUN1,WELLFND1,TBSP_1,WAYBEL23,RLVECT_3,COMPL_SP;
notations METRIC_6,RELAT_2,BINOP_1,TOPMETR,CARD_1,FUNCOP_1,CANTOR_1,WELLORD1,COMPLEX1,FINSET_1,SEQ_2,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XXREAL_0,XREAL_0,REAL_1,SETFAM_1,DOMAIN_1,TOPS_2,FUNCT_1,VALUED_1,NAT_1,VALUED_0,STRUCT_0,PRE_TOPC,COMPTS_1,RELAT_1,SEQ_1,TBSP_1,RELSET_1,PARTFUN1,FUNCT_2,METRIC_1,PCOMPS_1,CARD_3,PROB_1,FRECHET,KURATO_0,KURATO_2,WELLFND1,WAYBEL23,ORDERS_2,TOPGEN_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24;
definitions TARSKI,TOPS_2,SUBSET_1,STRUCT_0,TBSP_1,PCOMPS_1,COMPTS_1,METRIC_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24;
theorems KURATO_2,NAT_1,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_1,METRIC_1,XREAL_0,XCMPLX_1,ABSVALUE,TOPMETR,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,CARD_4,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SEQM_3,PARTFUN1,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,XREAL_1,XXREAL_0,ORDINAL1,FRECHET2,FRECHET,COMPTS_1,STIRL2_1,CARD_1,HAUSDORF,TOPMETR3,CARD_3,TOPGEN_4,DICKSON,RELSET_2,TOPGEN_1,WELLFND1,WAYBEL23,UNIFORM1,CARD_2,TOPREAL6,FINSET_1,PROB_1,FUNCOP_1,KURATO_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38;
schemes FUNCT_1,WELLFND1,TREES_2,FUNCT_2,NAT_1,FRAENKEL,BINOP_1,SEQ_1;
registrations REALSET1,TOPMETR,PRE_TOPC,PCOMPS_1,NAT_1,TBSP_1,XREAL_0,RELSET_1,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,HAUSDORF,MEMBERED,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,VALUED_1,FUNCT_2,NUMBERS,FINSET_1,SEQ_4,WELLFND1,ZFMISC_1,KURATO_0,CKB2,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26;
constructors REAL_1,NAT_1,TBSP_1,YELLOW_6,FRECHET,FRECHET2,KURATO_2,COMPLEX1,SEQ_2,TOPS_2,WELLORD1,CARD_3,CANTOR_1,URYSOHN3,METRIC_6,REALSET1,WELLFND1,TOPGEN_4,WAYBEL23,TOPGEN_1,SEQ_1,COMPTS_1,FINSUB_1,TOPS_1,BINOP_2,RVSUM_1,KURATO_0,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
reserve i for  natural number;
reserve n for  natural number;
reserve m for  natural number;
reserve x for set;
reserve y for set;
reserve r for Real;
theorem
(for M being non  empty MetrSpace holds (M is  complete implies (for A being non  empty (Subset of M) holds (for A9 being (Subset of ( TopSpaceMetr M )) holds (A = A9 implies (( M | A ) is  complete iff A9 is  closed))))))
proof
let M being non  empty MetrSpace;
assume that
A1: M is  complete;
set T = ( TopSpaceMetr M );
let A being non  empty (Subset of M);
let A9 being (Subset of ( TopSpaceMetr M ));
assume that
A2: A = A9;
set MA = ( M | A );
set TA = ( TopSpaceMetr MA );
thus (MA is  complete implies A9 is  closed)
proof
assume A3: MA is  complete;
A4: ( Cl A9 ) c= A9
proof
let p being set;
assume that
A5: p in ( Cl A9 );
reconsider p as (Point of M) by A5;
defpred P[ set,set ]
 means
(for i holds (i = $1 implies $2 = ( A /\ ( cl_Ball (p,( 1 / ( i + 1 ) )) ) )));
A6: (for x holds (x in ( NAT ) implies (ex y st (y in ( bool (the carrier of MA) ) & P[ x,y ]))))
proof
let x;
assume x in ( NAT );
then reconsider i = x as (Element of ( NAT ));
take ( A /\ ( cl_Ball (p,( 1 / ( i + 1 ) )) ) );
( A /\ ( cl_Ball (p,( 1 / ( i + 1 ) )) ) ) c= A by XBOOLE_1:17;
then ( A /\ ( cl_Ball (p,( 1 / ( i + 1 ) )) ) ) c= (the carrier of MA) by TOPMETR:def 2;
hence thesis;
end;
consider f being (SetSequence of MA) such that A7: (for x holds (x in ( NAT ) implies P[ x,( f . x ) ])) from FUNCT_2:sch 1(A6);
A8:now
let x;
assume x in ( dom f );
then reconsider i = x as (Element of ( NAT ));
reconsider B = ( Ball (p,( 1 / ( i + 1 ) )) ) as (Subset of T);
( Ball (p,( 1 / ( i + 1 ) )) ) in ( Family_open_set M ) by PCOMPS_1:29;
then A9: B is  open by PRE_TOPC:def 2;
p in B by TBSP_1:11,XREAL_1:139;
then B meets A9 by A5,A9,PRE_TOPC:24;
then consider y such that A10: y in B and A11: y in A9 by XBOOLE_0:3;
reconsider y as (Point of M) by A10;
( dist (p,y) ) < ( 1 / ( i + 1 ) ) by A10,METRIC_1:11;
then y in ( cl_Ball (p,( 1 / ( i + 1 ) )) ) by METRIC_1:12;
then y in ( A /\ ( cl_Ball (p,( 1 / ( i + 1 ) )) ) ) by A2,A11,XBOOLE_0:def 4;
hence ( f . x ) is non  empty by A7;
end;
A12:now
let i;
reconsider cB = ( cl_Ball (p,( 1 / ( i + 1 ) )) ) as (Subset of T);
reconsider fi = ( f . i ) as (Subset of TA);
A13: i in ( NAT ) by ORDINAL1:def 12;
( ( [#] M ) \ cB ) in ( Family_open_set M ) by NAGATA_1:14;
then ( cB ` ) is  open by PRE_TOPC:def 2;
then A14: cB is  closed by TOPS_1:3;
A15: TA = ( T | A9 ) by A2,HAUSDORF:16;
then ( [#] ( T | A9 ) ) = A by TOPMETR:def 2;
then fi = ( cB /\ ( [#] ( T | A9 ) ) ) by A7,A13;
then fi is  closed by A14,A15,PRE_TOPC:13;
hence ( f . i ) is  closed by CKB15:1;
end;
now
let i;
set ACL = ( A /\ ( cl_Ball (p,( 1 / ( i + 1 ) )) ) );
( cl_Ball (p,( 1 / ( i + 1 ) )) ) is  bounded by TOPREAL6:59;
then A16: ACL is  bounded by TBSP_1:14,XBOOLE_1:17;
i in ( NAT ) by ORDINAL1:def 12;
then ( f . i ) = ACL by A7;
hence ( f . i ) is  bounded by A16,CKB35:1;
end;
then reconsider f as  non-empty  bounded  closed (SetSequence of MA) by A8,A12,CKB1:def 1,CKB24:def 1,FUNCT_1:def 9;
set df = ( diameter f );
reconsider NULL = ( 0 ),TWO = 2 as Real;
deffunc F((Element of ( NAT ))) = ( 1 / ( 1 + $1 ) );
consider seq being Real_Sequence such that A17: (for n being (Element of ( NAT )) holds ( seq . n ) = F(n)) from SEQ_1:sch 1;
now
let i being (Element of ( NAT ));
set i1 = ( i + 1 );
( cl_Ball (p,( 1 / ( i1 + 1 ) )) ) c= ( cl_Ball (p,( 1 / i1 )) )
proof
let x;
assume that
A18: x in ( cl_Ball (p,( 1 / ( i1 + 1 ) )) );
reconsider q = x as (Point of M) by A18;
i1 < ( i1 + 1 ) by NAT_1:13;
then A19: ( 1 / ( i1 + 1 ) ) < ( 1 / i1 ) by XREAL_1:76;
( dist (p,q) ) <= ( 1 / ( i1 + 1 ) ) by A18,METRIC_1:12;
then ( dist (p,q) ) <= ( 1 / i1 ) by A19,XXREAL_0:2;
hence thesis by METRIC_1:12;
end;
then A20: ( A /\ ( cl_Ball (p,( 1 / ( i1 + 1 ) )) ) ) c= ( A /\ ( cl_Ball (p,( 1 / i1 )) ) ) by XBOOLE_1:26;
( f . i ) = ( A /\ ( cl_Ball (p,( 1 / i1 )) ) ) by A7;
hence ( f . ( i + 1 ) ) c= ( f . i ) by A7,A20;
end;
then A21: f is  non-ascending by KURATO_0:def 3;
set Ts = ( TWO (#) seq );
set Ns = ( NULL (#) seq );
A22: (for n being (Element of ( NAT )) holds ( seq . n ) = ( 1 / ( n + 1 ) )) by A17;
then A23: Ns is  convergent by SEQ_2:7,SEQ_4:30;
A24:now
let n being (Element of ( NAT ));
set cB = ( cl_Ball (p,( 1 / ( n + 1 ) )) );
A25: ( Ns . n ) = ( NULL * ( seq . n ) ) by SEQ_1:9;
A26: ( Ts . n ) = ( TWO * ( seq . n ) ) by SEQ_1:9;
A27: cB is  bounded by TOPREAL6:59;
then A28: ( A /\ cB ) is  bounded by TBSP_1:14,XBOOLE_1:17;
A29: ( diameter ( A /\ cB ) ) <= ( diameter cB ) by A27,TBSP_1:24,XBOOLE_1:17;
( diameter cB ) <= ( 2 * F(n) ) by CKB8:1;
then A30: ( diameter ( A /\ cB ) ) <= ( 2 * F(n) ) by A29,XXREAL_0:2;
A31: ( f . n ) = ( A /\ cB ) by A7;
then ( f . n ) is  bounded by A28,CKB35:1;
then A32: ( 0 ) <= ( diameter ( f . n ) ) by TBSP_1:21;
( diameter ( f . n ) ) <= ( diameter ( A /\ cB ) ) by A28,A31,CKB36:1;
then A33: ( diameter ( f . n ) ) <= ( 2 * F(n) ) by A30,XXREAL_0:2;
F(n) = ( seq . n ) by A17;
hence (( Ns . n ) <= ( df . n ) & ( df . n ) <= ( Ts . n )) by A32,A33,A25,A26,CKB3:def 1;
end;
A34: Ts is  convergent by A22,SEQ_2:7,SEQ_4:30;
A35: ( lim seq ) = ( 0 ) by A22,SEQ_4:30;
then A36: ( lim Ts ) = ( TWO * ( 0 ) ) by A22,SEQ_2:8,SEQ_4:30;
( lim Ns ) = ( NULL * ( 0 ) ) by A22,A35,SEQ_2:8,SEQ_4:30;
then ( lim df ) = ( 0 ) by A23,A34,A36,A24,SEQ_2:20;
then ( meet f ) is non  empty by A3,A21,CKB30:1;
then consider q being set such that A37: q in ( meet f ) by XBOOLE_0:def 1;
reconsider q as (Point of M) by A37,TOPMETR:8;
A38: seq is  convergent by A22,SEQ_4:30;
p = q
proof
assume p <> q;
then ( dist (p,q) ) <> ( 0 ) by METRIC_1:2;
then ( dist (p,q) ) > ( 0 ) by METRIC_1:5;
then consider n being (Element of ( NAT )) such that A39: (for m being (Element of ( NAT )) holds (n <= m implies ( abs ( ( seq . m ) - ( 0 ) ) ) < ( dist (p,q) ))) by A38,A35,SEQ_2:def 7;
set cB = ( cl_Ball (p,( 1 / ( n + 1 ) )) );
A40: q in ( f . n ) by A37,KURATO_0:3;
( f . n ) = ( A /\ cB ) by A7;
then q in cB by A40,XBOOLE_0:def 4;
then A41: ( dist (p,q) ) <= F(n) by METRIC_1:12;
( seq . n ) = F(n) by A17;
then ( abs ( ( seq . n ) - ( 0 ) ) ) = F(n) by ABSVALUE:def 1;
hence thesis by A39,A41;
end;
then A42: p in ( f . ( 0 ) ) by A37,KURATO_0:3;
( f . ( 0 ) ) = ( A /\ ( cl_Ball (p,( 1 / ( ( 0 ) + 1 ) )) ) ) by A7;
hence thesis by A2,A42,XBOOLE_0:def 4;
end;
A9 c= ( Cl A9 ) by PRE_TOPC:18;
hence thesis by A4,XBOOLE_0:def 10;
end;

assume A43: A9 is  closed;
let S being (sequence of MA);
assume that
A44: S is  Cauchy;
reconsider S9 = S as (sequence of M) by CKB37:1;
S9 is  Cauchy by A44,CKB38:1;
then A45: S9 is  convergent by A1,TBSP_1:def 5;
A46:now
let n being (Element of ( NAT ));
( S . n ) in (the carrier of ( M | A ));
hence ( S9 . n ) in A9 by A2,TOPMETR:def 2;
end;
(the carrier of ( M | A )) = A9 by A2,TOPMETR:def 2;
then reconsider limS = ( lim S9 ) as (Point of ( M | A )) by A43,A45,A46,TOPMETR3:1;
take limS;
let r;
assume r > ( 0 );
then consider n being (Element of ( NAT )) such that A47: (for m being (Element of ( NAT )) holds (m >= n implies ( dist (( S9 . m ),( lim S9 )) ) < r)) by A45,TBSP_1:def 3;
take n;
let m being (Element of ( NAT ));
assume that
A48: m >= n;
( dist (( S . m ),limS) ) = ( dist (( S9 . m ),( lim S9 )) ) by TOPMETR:def 1;
hence thesis by A47,A48;
end;
