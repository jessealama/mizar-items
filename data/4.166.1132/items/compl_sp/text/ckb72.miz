environ
vocabularies NUMBERS,ORDINAL1,REAL_1,XBOOLE_0,METRIC_1,PROB_1,XXREAL_2,FUNCT_1,RELAT_1,STRUCT_0,PRE_TOPC,SUBSET_1,FUNCOP_1,XXREAL_0,MEASURE5,SEQ_1,CARD_1,ARYTM_1,ARYTM_3,VALUED_0,TARSKI,ORDINAL2,NAT_1,BHSP_3,COMPLEX1,RELAT_2,RCOMP_1,PCOMPS_1,ZFMISC_1,XREAL_0,REWRITE1,SETFAM_1,SEQ_2,METRIC_6,FRECHET,FINSET_1,VALUED_1,CARD_3,TOPGEN_1,WELLORD1,ORDERS_2,PARTFUN1,WELLFND1,TBSP_1,WAYBEL23,RLVECT_3,COMPL_SP;
notations METRIC_6,RELAT_2,BINOP_1,TOPMETR,CARD_1,FUNCOP_1,CANTOR_1,WELLORD1,COMPLEX1,FINSET_1,SEQ_2,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XXREAL_0,XREAL_0,REAL_1,SETFAM_1,DOMAIN_1,TOPS_2,FUNCT_1,VALUED_1,NAT_1,VALUED_0,STRUCT_0,PRE_TOPC,COMPTS_1,RELAT_1,SEQ_1,TBSP_1,RELSET_1,PARTFUN1,FUNCT_2,METRIC_1,PCOMPS_1,CARD_3,PROB_1,FRECHET,KURATO_0,KURATO_2,WELLFND1,WAYBEL23,ORDERS_2,TOPGEN_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB66,CKB68,CKB70;
definitions TARSKI,TOPS_2,SUBSET_1,STRUCT_0,TBSP_1,PCOMPS_1,COMPTS_1,METRIC_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB68,CKB70;
theorems KURATO_2,NAT_1,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_1,METRIC_1,XREAL_0,XCMPLX_1,ABSVALUE,TOPMETR,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,CARD_4,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SEQM_3,PARTFUN1,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,XREAL_1,XXREAL_0,ORDINAL1,FRECHET2,FRECHET,COMPTS_1,STIRL2_1,CARD_1,HAUSDORF,TOPMETR3,CARD_3,TOPGEN_4,DICKSON,RELSET_2,TOPGEN_1,WELLFND1,WAYBEL23,UNIFORM1,CARD_2,TOPREAL6,FINSET_1,PROB_1,FUNCOP_1,KURATO_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB67,CKB68,CKB69,CKB70;
schemes FUNCT_1,WELLFND1,TREES_2,FUNCT_2,NAT_1,FRAENKEL,BINOP_1,SEQ_1,CKB56;
registrations REALSET1,TOPMETR,PRE_TOPC,PCOMPS_1,NAT_1,TBSP_1,XREAL_0,RELSET_1,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,HAUSDORF,MEMBERED,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,VALUED_1,FUNCT_2,NUMBERS,FINSET_1,SEQ_4,WELLFND1,ZFMISC_1,KURATO_0,CKB2,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26,CKB71;
constructors REAL_1,NAT_1,TBSP_1,YELLOW_6,FRECHET,FRECHET2,KURATO_2,COMPLEX1,SEQ_2,TOPS_2,WELLORD1,CARD_3,CANTOR_1,URYSOHN3,METRIC_6,REALSET1,WELLFND1,TOPGEN_4,WAYBEL23,TOPGEN_1,SEQ_1,COMPTS_1,FINSUB_1,TOPS_1,BINOP_2,RVSUM_1,KURATO_0,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB66,CKB68,CKB70;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
reserve X for set;
theorem
Lm8: (for M being MetrStruct holds (for a being (Point of M) holds (for X holds ((((M is  Reflexive implies ( WellSpace (a,X) ) is  Reflexive) & (M is  symmetric implies ( WellSpace (a,X) ) is  symmetric)) & (M is  triangle  symmetric  Reflexive implies ( WellSpace (a,X) ) is  triangle)) & (M is  triangle  symmetric  Reflexive  discerning implies ( WellSpace (a,X) ) is  discerning)))))
proof
let M being MetrStruct;
let a being (Point of M);
let X;
set XX = ( [: X,( (the carrier of M) \ { a } ) :] \/ { [ X,a ] } );
set w = ( well_dist (a,X) );
set W = ( WellSpace (a,X) );
thus (M is  Reflexive implies W is  Reflexive)
proof
assume A1: M is  Reflexive;
now
let A being (Element of XX);
consider y being set,b being (Point of M) such that A2: A = [ y,b ] and ((y in X & b <> a) or (y = X & b = a)) by CKB67:1;
thus ( w . (A,A) ) = ( dist (b,b) ) by A2,CKB68:def 1
.= ( 0 ) by A1,METRIC_1:1;
end;
then w is  Reflexive by METRIC_1:def 2;
hence thesis by METRIC_1:def 6;
end;

thus (M is  symmetric implies W is  symmetric)
proof
assume M is  symmetric;
then reconsider M as  symmetric MetrStruct;
reconsider a as (Point of M);
now
let A being (Element of XX),B being (Element of XX);
consider y1 being set,b1 being (Point of M) such that A3: A = [ y1,b1 ] and A4: ((y1 in X & b1 <> a) or (y1 = X & b1 = a)) by CKB67:1;
consider y2 being set,b2 being (Point of M) such that A5: B = [ y2,b2 ] and A6: ((y2 in X & b2 <> a) or (y2 = X & b2 = a)) by CKB67:1;
now
per cases  by A4,A6;
suppose (((b1 = a & y1 = X) & b2 = a) & y2 = X);

hence ( w . (A,B) ) = ( w . (B,A) ) by A3,A5;
end;
suppose A7: y1 <> y2;

hence ( w . (A,B) ) = ( ( dist (b1,a) ) + ( dist (a,b2) ) ) by A3,A5,CKB68:def 1
.= ( ( dist (a,b1) ) + ( dist (a,b2) ) )
.= ( ( dist (a,b1) ) + ( dist (b2,a) ) )
.= ( w . (B,A) ) by A3,A5,A7,CKB68:def 1;
end;
suppose A8: ((b1 <> a & b2 <> a) & y1 = y2);

hence ( w . (A,B) ) = ( dist (b1,b2) ) by A3,A5,CKB68:def 1
.= ( dist (b2,b1) )
.= ( w . (B,A) ) by A3,A5,A8,CKB68:def 1;
end;
end;
hence ( w . (A,B) ) = ( w . (B,A) );
end;
then w is  symmetric by METRIC_1:def 4;
hence thesis by METRIC_1:def 8;
end;

thus (M is  triangle  symmetric  Reflexive implies ( WellSpace (a,X) ) is  triangle)
proof
assume A9: M is  triangle  symmetric  Reflexive;
now
let A being (Element of XX),B being (Element of XX),C being (Element of XX);
consider y1 being set,b1 being (Point of M) such that A10: A = [ y1,b1 ] and ((y1 in X & b1 <> a) or (y1 = X & b1 = a)) by CKB67:1;
consider y2 being set,b2 being (Point of M) such that A11: B = [ y2,b2 ] and ((y2 in X & b2 <> a) or (y2 = X & b2 = a)) by CKB67:1;
consider y3 being set,b3 being (Point of M) such that A12: C = [ y3,b3 ] and ((y3 in X & b3 <> a) or (y3 = X & b3 = a)) by CKB67:1;
now
per cases ;
suppose A13: (y1 = y2 & y1 = y3);

then A14: ( dist (b2,b3) ) = ( w . (B,C) ) by A11,A12,CKB68:def 1;
A15: ( dist (b1,b2) ) = ( w . (A,B) ) by A10,A11,A13,CKB68:def 1;
( dist (b1,b3) ) = ( w . (A,C) ) by A10,A12,A13,CKB68:def 1;
hence ( w . (A,C) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) ) by A9,A15,A14,METRIC_1:4;
end;
suppose A16: (y1 <> y2 & y1 = y3);

then A17: ( ( dist (b2,a) ) + ( dist (a,b3) ) ) = ( w . (B,C) ) by A11,A12,CKB68:def 1;
A18: ( dist (b1,b2) ) <= ( ( dist (b1,a) ) + ( dist (a,b2) ) ) by A9,METRIC_1:4;
A19: ( dist (b2,b3) ) <= ( ( dist (b2,a) ) + ( dist (a,b3) ) ) by A9,METRIC_1:4;
( ( dist (b1,a) ) + ( dist (a,b2) ) ) = ( w . (A,B) ) by A10,A11,A16,CKB68:def 1;
then A20: ( ( dist (b1,b2) ) + ( dist (b2,b3) ) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) ) by A17,A18,A19,XREAL_1:7;
A21: ( dist (b1,b3) ) <= ( ( dist (b1,b2) ) + ( dist (b2,b3) ) ) by A9,METRIC_1:4;
( dist (b1,b3) ) = ( w . (A,C) ) by A10,A12,A16,CKB68:def 1;
hence ( w . (A,C) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) ) by A20,A21,XXREAL_0:2;
end;
suppose A22: (y1 = y2 & y1 <> y3);

A23: ( dist (b1,a) ) <= ( ( dist (b1,b2) ) + ( dist (b2,a) ) ) by A9,METRIC_1:4;
( ( dist (b1,a) ) + ( dist (a,b3) ) ) = ( w . (A,C) ) by A10,A12,A22,CKB68:def 1;
then A24: ( w . (A,C) ) <= ( ( ( dist (b1,b2) ) + ( dist (b2,a) ) ) + ( dist (a,b3) ) ) by A23,XREAL_1:6;
A25: ( ( dist (b2,a) ) + ( dist (a,b3) ) ) = ( w . (B,C) ) by A11,A12,A22,CKB68:def 1;
( dist (b1,b2) ) = ( w . (A,B) ) by A10,A11,A22,CKB68:def 1;
hence ( w . (A,C) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) ) by A25,A24;
end;
suppose A26: ((y1 <> y2 & y1 <> y3) & y2 <> y3);

A27: ( 0 ) <= ( dist (b2,a) ) by A9,METRIC_1:5;
( ( dist (b2,a) ) + ( dist (a,b3) ) ) = ( w . (B,C) ) by A11,A12,A26,CKB68:def 1;
then A28: ( ( 0 ) + ( dist (a,b3) ) ) <= ( w . (B,C) ) by A27,XREAL_1:6;
A29: ( 0 ) <= ( dist (a,b2) ) by A9,METRIC_1:5;
( ( dist (b1,a) ) + ( dist (a,b2) ) ) = ( w . (A,B) ) by A10,A11,A26,CKB68:def 1;
then A30: ( ( dist (b1,a) ) + ( 0 ) ) <= ( w . (A,B) ) by A29,XREAL_1:6;
( ( dist (b1,a) ) + ( dist (a,b3) ) ) = ( w . (A,C) ) by A10,A12,A26,CKB68:def 1;
hence ( w . (A,C) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) ) by A30,A28,XREAL_1:7;
end;
suppose A31: ((y1 <> y2 & y1 <> y3) & y2 = y3);

A32: ( dist (a,b3) ) <= ( ( dist (a,b2) ) + ( dist (b2,b3) ) ) by A9,METRIC_1:4;
( ( dist (b1,a) ) + ( dist (a,b3) ) ) = ( w . (A,C) ) by A10,A12,A31,CKB68:def 1;
then A33: ( w . (A,C) ) <= ( ( dist (b1,a) ) + ( ( dist (a,b2) ) + ( dist (b2,b3) ) ) ) by A32,XREAL_1:7;
A34: ( dist (b2,b3) ) = ( w . (B,C) ) by A11,A12,A31,CKB68:def 1;
( ( dist (b1,a) ) + ( dist (a,b2) ) ) = ( w . (A,B) ) by A10,A11,A31,CKB68:def 1;
hence ( w . (A,C) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) ) by A34,A33;
end;
end;
hence ( w . (A,C) ) <= ( ( w . (A,B) ) + ( w . (B,C) ) );
end;
then w is  triangle by METRIC_1:def 5;
hence thesis by METRIC_1:def 9;
end;

assume A35: M is  triangle  symmetric  Reflexive  discerning;
now
let A being (Element of XX),B being (Element of XX);
consider y1 being set,b1 being (Point of M) such that A36: A = [ y1,b1 ] and A37: ((y1 in X & b1 <> a) or (y1 = X & b1 = a)) by CKB67:1;
consider y2 being set,b2 being (Point of M) such that A38: B = [ y2,b2 ] and A39: ((y2 in X & b2 <> a) or (y2 = X & b2 = a)) by CKB67:1;
assume A40: ( w . (A,B) ) = ( 0 );
now
per cases ;
suppose A41: y1 = y2;

then ( w . (A,B) ) = ( dist (b1,b2) ) by A36,A38,CKB68:def 1;
hence A = B by A35,A40,A36,A38,A41,METRIC_1:2;
end;
suppose y1 <> y2;

then A42: ( w . (A,B) ) = ( ( dist (b1,a) ) + ( dist (a,b2) ) ) by A36,A38,CKB68:def 1;
A43: ( dist (b1,a) ) >= ( 0 ) by A35,METRIC_1:5;
( dist (a,b2) ) >= ( 0 ) by A35,METRIC_1:5;
then ( dist (b1,a) ) = ( 0 ) by A40,A42,A43;
hence A = B by A35,A40,A36,A37,A38,A39,A42,METRIC_1:2;
end;
end;
hence A = B;
end;
then w is  discerning by METRIC_1:def 3;
hence thesis by METRIC_1:def 7;
end;
