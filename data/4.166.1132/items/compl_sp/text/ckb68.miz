environ
vocabularies NUMBERS,ORDINAL1,REAL_1,XBOOLE_0,METRIC_1,PROB_1,XXREAL_2,FUNCT_1,RELAT_1,STRUCT_0,PRE_TOPC,SUBSET_1,FUNCOP_1,XXREAL_0,MEASURE5,SEQ_1,CARD_1,ARYTM_1,ARYTM_3,VALUED_0,TARSKI,ORDINAL2,NAT_1,BHSP_3,COMPLEX1,RELAT_2,RCOMP_1,PCOMPS_1,ZFMISC_1,XREAL_0,REWRITE1,SETFAM_1,SEQ_2,METRIC_6,FRECHET,FINSET_1,VALUED_1,CARD_3,TOPGEN_1,WELLORD1,ORDERS_2,PARTFUN1,WELLFND1,TBSP_1,WAYBEL23,RLVECT_3,COMPL_SP;
notations METRIC_6,RELAT_2,BINOP_1,TOPMETR,CARD_1,FUNCOP_1,CANTOR_1,WELLORD1,COMPLEX1,FINSET_1,SEQ_2,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XXREAL_0,XREAL_0,REAL_1,SETFAM_1,DOMAIN_1,TOPS_2,FUNCT_1,VALUED_1,NAT_1,VALUED_0,STRUCT_0,PRE_TOPC,COMPTS_1,RELAT_1,SEQ_1,TBSP_1,RELSET_1,PARTFUN1,FUNCT_2,METRIC_1,PCOMPS_1,CARD_3,PROB_1,FRECHET,KURATO_0,KURATO_2,WELLFND1,WAYBEL23,ORDERS_2,TOPGEN_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB66;
definitions TARSKI,TOPS_2,SUBSET_1,STRUCT_0,TBSP_1,PCOMPS_1,COMPTS_1,METRIC_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40;
theorems KURATO_2,NAT_1,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_1,METRIC_1,XREAL_0,XCMPLX_1,ABSVALUE,TOPMETR,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,CARD_4,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SEQM_3,PARTFUN1,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,XREAL_1,XXREAL_0,ORDINAL1,FRECHET2,FRECHET,COMPTS_1,STIRL2_1,CARD_1,HAUSDORF,TOPMETR3,CARD_3,TOPGEN_4,DICKSON,RELSET_2,TOPGEN_1,WELLFND1,WAYBEL23,UNIFORM1,CARD_2,TOPREAL6,FINSET_1,PROB_1,FUNCOP_1,KURATO_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB67;
schemes FUNCT_1,WELLFND1,TREES_2,FUNCT_2,NAT_1,FRAENKEL,BINOP_1,SEQ_1,CKB56;
registrations REALSET1,TOPMETR,PRE_TOPC,PCOMPS_1,NAT_1,TBSP_1,XREAL_0,RELSET_1,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,HAUSDORF,MEMBERED,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,VALUED_1,FUNCT_2,NUMBERS,FINSET_1,SEQ_4,WELLFND1,ZFMISC_1,KURATO_0,CKB2,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26;
constructors REAL_1,NAT_1,TBSP_1,YELLOW_6,FRECHET,FRECHET2,KURATO_2,COMPLEX1,SEQ_2,TOPS_2,WELLORD1,CARD_3,CANTOR_1,URYSOHN3,METRIC_6,REALSET1,WELLFND1,TOPGEN_4,WAYBEL23,TOPGEN_1,SEQ_1,COMPTS_1,FINSUB_1,TOPS_1,BINOP_2,RVSUM_1,KURATO_0,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24,CKB40,CKB66;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
reserve x for set;
reserve y for set;
definition
let M being MetrStruct;
let a being (Point of M);
let X being set;
func well_dist (a,X) -> (Function of [: ( [: X,( (the carrier of M) \ { a } ) :] \/ { [ X,a ] } ),( [: X,( (the carrier of M) \ { a } ) :] \/ { [ X,a ] } ) :],( REAL ))
means
:Def10: (for x,y being (Element of ( [: X,( (the carrier of M) \ { a } ) :] \/ { [ X,a ] } )) holds (for x1,y1 being set holds (for x2,y2 being (Point of M) holds ((x = [ x1,x2 ] & y = [ y1,y2 ]) implies ((x1 = y1 implies ( it . (x,y) ) = ( dist (x2,y2) )) & (x1 <> y1 implies ( it . (x,y) ) = ( ( dist (x2,a) ) + ( dist (a,y2) ) )))))));
existence
proof
set XX = ( [: X,( (the carrier of M) \ { a } ) :] \/ { [ X,a ] } );
defpred P[ set,set,set ]
 means
(for x,y being (Element of XX) holds ((x = $1 & y = $2) implies (for x1,y1 being set holds (for x2,y2 being (Point of M) holds ((x = [ x1,x2 ] & y = [ y1,y2 ]) implies ((x1 = y1 implies $3 = ( dist (x2,y2) )) & (x1 <> y1 implies $3 = ( ( dist (x2,a) ) + ( dist (a,y2) ) ))))))));
A1: (for x holds (for y holds ((x in XX & y in XX) implies (ex z being set st (z in ( REAL ) & P[ x,y,z ])))))
proof
let x;
let y;
assume that
A2: x in XX
and
A3: y in XX;
consider y1 being set,y2 being (Point of M) such that A4: y = [ y1,y2 ] and ((y1 in X & y2 <> a) or (y1 = X & y2 = a)) by A3,CKB67:1;
consider x1 being set,x2 being (Point of M) such that A5: x = [ x1,x2 ] and ((x1 in X & x2 <> a) or (x1 = X & x2 = a)) by A2,CKB67:1;
now
per cases ;
suppose A6: x1 = y1;

take d = ( dist (x2,y2) );
thus d in ( REAL );
let x9 being (Element of XX),y9 being (Element of XX);
assume that
A7: x9 = x
and
A8: y9 = y;
let x19 being set,y19 being set;
let x29 being (Point of M),y29 being (Point of M);
assume that
A9: x9 = [ x19,x29 ]
and
A10: y9 = [ y19,y29 ];
A11: x29 = x2 by A5,A7,A9,ZFMISC_1:27;
x19 = x1 by A5,A7,A9,ZFMISC_1:27;
hence ((x19 = y19 implies d = ( dist (x29,y29) )) & (x19 <> y19 implies d = ( ( dist (x29,a) ) + ( dist (a,y29) ) ))) by A4,A6,A8,A10,A11,ZFMISC_1:27;
end;
suppose A12: x1 <> y1;

take d = ( ( dist (x2,a) ) + ( dist (a,y2) ) );
thus d in ( REAL );
let x9 being (Element of XX),y9 being (Element of XX);
assume that
A13: x9 = x
and
A14: y9 = y;
let x19 being set,y19 being set;
let x29 being (Point of M),y29 being (Point of M);
assume that
A15: x9 = [ x19,x29 ]
and
A16: y9 = [ y19,y29 ];
A17: x29 = x2 by A5,A13,A15,ZFMISC_1:27;
x19 = x1 by A5,A13,A15,ZFMISC_1:27;
hence ((x19 = y19 implies d = ( dist (x29,y29) )) & (x19 <> y19 implies d = ( ( dist (x29,a) ) + ( dist (a,y29) ) ))) by A4,A12,A14,A16,A17,ZFMISC_1:27;
end;
end;
hence thesis;
end;
consider f being (Function of [: XX,XX :],( REAL )) such that A18: (for x holds (for y holds ((x in XX & y in XX) implies P[ x,y,( f . (x,y) ) ]))) from BINOP_1:sch 1(A1);
take f;
thus thesis by A18;
end;
uniqueness
proof
set XX = ( [: X,( (the carrier of M) \ { a } ) :] \/ { [ X,a ] } );
let w1 being (Function of [: XX,XX :],( REAL )),w2 being (Function of [: XX,XX :],( REAL ));
assume that
A19: (for x,y being (Element of XX) holds (for x1,y1 being set holds (for x2,y2 being (Point of M) holds ((x = [ x1,x2 ] & y = [ y1,y2 ]) implies ((x1 = y1 implies ( w1 . (x,y) ) = ( dist (x2,y2) )) & (x1 <> y1 implies ( w1 . (x,y) ) = ( ( dist (x2,a) ) + ( dist (a,y2) ) )))))))
and
A20: (for x,y being (Element of XX) holds (for x1,y1 being set holds (for x2,y2 being (Point of M) holds ((x = [ x1,x2 ] & y = [ y1,y2 ]) implies ((x1 = y1 implies ( w2 . (x,y) ) = ( dist (x2,y2) )) & (x1 <> y1 implies ( w2 . (x,y) ) = ( ( dist (x2,a) ) + ( dist (a,y2) ) )))))));
now
let x;
let y;
assume that
A21: x in XX
and
A22: y in XX;
consider y1 being set,y2 being (Point of M) such that A23: y = [ y1,y2 ] and ((y1 in X & y2 <> a) or (y1 = X & y2 = a)) by A22,CKB67:1;
consider x1 being set,x2 being (Point of M) such that A24: x = [ x1,x2 ] and ((x1 in X & x2 <> a) or (x1 = X & x2 = a)) by A21,CKB67:1;
reconsider x2,y2 as (Point of M);
(x1 = y1 or x1 <> y1);
then ((( w1 . (x,y) ) = ( dist (x2,y2) ) & ( w2 . (x,y) ) = ( dist (x2,y2) )) or (( w1 . (x,y) ) = ( ( dist (x2,a) ) + ( dist (a,y2) ) ) & ( w2 . (x,y) ) = ( ( dist (x2,a) ) + ( dist (a,y2) ) ))) by A19,A20,A21,A22,A24,A23;
hence ( w1 . (x,y) ) = ( w2 . (x,y) );
end;
hence thesis by BINOP_1:1;
end;
end;
