environ
vocabularies NUMBERS,ORDINAL1,REAL_1,XBOOLE_0,METRIC_1,PROB_1,XXREAL_2,FUNCT_1,RELAT_1,STRUCT_0,PRE_TOPC,SUBSET_1,FUNCOP_1,XXREAL_0,MEASURE5,SEQ_1,CARD_1,ARYTM_1,ARYTM_3,VALUED_0,TARSKI,ORDINAL2,NAT_1,BHSP_3,COMPLEX1,RELAT_2,RCOMP_1,PCOMPS_1,ZFMISC_1,XREAL_0,REWRITE1,SETFAM_1,SEQ_2,METRIC_6,FRECHET,FINSET_1,VALUED_1,CARD_3,TOPGEN_1,WELLORD1,ORDERS_2,PARTFUN1,WELLFND1,TBSP_1,WAYBEL23,RLVECT_3,COMPL_SP;
notations METRIC_6,RELAT_2,BINOP_1,TOPMETR,CARD_1,FUNCOP_1,CANTOR_1,WELLORD1,COMPLEX1,FINSET_1,SEQ_2,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XXREAL_0,XREAL_0,REAL_1,SETFAM_1,DOMAIN_1,TOPS_2,FUNCT_1,VALUED_1,NAT_1,VALUED_0,STRUCT_0,PRE_TOPC,COMPTS_1,RELAT_1,SEQ_1,TBSP_1,RELSET_1,PARTFUN1,FUNCT_2,METRIC_1,PCOMPS_1,CARD_3,PROB_1,FRECHET,KURATO_0,KURATO_2,WELLFND1,WAYBEL23,ORDERS_2,TOPGEN_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24;
definitions TARSKI,TOPS_2,SUBSET_1,STRUCT_0,TBSP_1,PCOMPS_1,COMPTS_1,METRIC_1,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24;
theorems KURATO_2,NAT_1,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_1,METRIC_1,XREAL_0,XCMPLX_1,ABSVALUE,TOPMETR,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,CARD_4,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SEQM_3,PARTFUN1,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,XREAL_1,XXREAL_0,ORDINAL1,FRECHET2,FRECHET,COMPTS_1,STIRL2_1,CARD_1,HAUSDORF,TOPMETR3,CARD_3,TOPGEN_4,DICKSON,RELSET_2,TOPGEN_1,WELLFND1,WAYBEL23,UNIFORM1,CARD_2,TOPREAL6,FINSET_1,PROB_1,FUNCOP_1,KURATO_0,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes FUNCT_1,WELLFND1,TREES_2,FUNCT_2,NAT_1,FRAENKEL,BINOP_1,SEQ_1;
registrations REALSET1,TOPMETR,PRE_TOPC,PCOMPS_1,NAT_1,TBSP_1,XREAL_0,RELSET_1,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,HAUSDORF,MEMBERED,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,VALUED_1,FUNCT_2,NUMBERS,FINSET_1,SEQ_4,WELLFND1,ZFMISC_1,KURATO_0,CKB2,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26;
constructors REAL_1,NAT_1,TBSP_1,YELLOW_6,FRECHET,FRECHET2,KURATO_2,COMPLEX1,SEQ_2,TOPS_2,WELLORD1,CARD_3,CANTOR_1,URYSOHN3,METRIC_6,REALSET1,WELLFND1,TOPGEN_4,WAYBEL23,TOPGEN_1,SEQ_1,COMPTS_1,FINSUB_1,TOPS_1,BINOP_2,RVSUM_1,KURATO_0,CKB1,CKB3,CKB9,CKB10,CKB16,CKB17,CKB23,CKB24;
requirements REAL,SUBSET,BOOLE,NUMERALS,ARITHM;
begin
reserve i for  natural number;
reserve x for set;
reserve y for set;
reserve r for Real;
theorem
(for M being non empty MetrSpace holds (M is  complete iff (for F being (Subset-Family of ( TopSpaceMetr M )) holds (((F is  closed & F is  centered) & (for r being Real holds (r > ( 0 ) implies (ex A being (Subset of M) st ((A in F & A is  bounded) & ( diameter A ) < r))))) implies ( meet F ) is non empty))))
proof
let M being non empty MetrSpace;
set T = ( TopSpaceMetr M );
thus (M is  complete implies (for F being (Subset-Family of T) holds (((F is  closed & F is  centered) & (for r holds (r > ( 0 ) implies (ex A being (Subset of M) st ((A in F & A is  bounded) & ( diameter A ) < r))))) implies ( meet F ) is non empty)))
proof
reconsider NULL = ( 0 ) as Real;
deffunc F((Element of ( NAT ))) = ( 1 / ( 1 + $1 ) );
assume A1: M is  complete;
consider seq being Real_Sequence such that A2: (for n being (Element of ( NAT )) holds ( seq . n ) = F(n)) from SEQ_1:sch 1;
set Ns = ( NULL (#) seq );
let F being (Subset-Family of T);
assume that
A3: F is  closed
and
A4: F is  centered
and
A5: (for r holds (r > ( 0 ) implies (ex A being (Subset of M) st ((A in F & A is  bounded) & ( diameter A ) < r))));
A6: (for n being (Element of ( NAT )) holds ( seq . n ) = ( 1 / ( n + 1 ) )) by A2;
then A7: Ns is  convergent by SEQ_2:7,SEQ_4:30;
defpred P[ set,set ]
 means
(for i holds (i = $1 implies (for A being (Subset of M) holds (A = $2 implies ((A in F & A is  bounded) & ( diameter A ) < ( 1 / ( i + 1 ) ))))));
A8: (for x holds (x in ( NAT ) implies (ex y st (y in ( bool (the carrier of M) ) & P[ x,y ]))))
proof
let x;
assume x in ( NAT );
then reconsider i = x as (Element of ( NAT ));
consider A being (Subset of M) such that A9: A in F and A10: A is  bounded and A11: ( diameter A ) < ( 1 / ( i + 1 ) ) by A5,XREAL_1:139;
take A;
thus thesis by A9,A10,A11;
end;
consider f being (SetSequence of M) such that A12: (for x holds (x in ( NAT ) implies P[ x,( f . x ) ])) from FUNCT_2:sch 1(A8);
( rng f ) c= F
proof
let x;
assume x in ( rng f );
then consider y such that A13: y in ( dom f ) and A14: ( f . y ) = x by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A13;
( f . y ) in F by A12;
hence thesis by A14;
end;
then consider R being (SetSequence of T) such that A15: R is  non-ascending and A16: (F is  centered implies R is  non-empty) and (F is  open implies R is  open) and A17: (F is  closed implies R is  closed) and A18: (for i holds ( R . i ) = ( meet { ( f . j ) where j is (Element of ( NAT )): j <= i } )) by CKB33:1;
reconsider R9 = R as  non-empty (SetSequence of M) by A4,A16;
now
let i;
( f . ( 0 ) ) in { ( f . j ) where j is (Element of ( NAT )): j <= i };
then ( meet { ( f . j ) where j is (Element of ( NAT )): j <= i } ) c= ( f . ( 0 ) ) by SETFAM_1:3;
then ( R . i ) c= ( f . ( 0 ) ) by A18;
hence ( R9 . i ) is  bounded by A12,TBSP_1:14;
end;
then reconsider R9 as  non-empty  bounded (SetSequence of M) by CKB1:def 1;
set dR = ( diameter R9 );
A19:now
let n being (Element of ( NAT ));
set Sn = { ( f . j ) where j is (Element of ( NAT )): j <= n };
A20: ( f . n ) in Sn;
( R . n ) = ( meet Sn ) by A18;
then A21: ( R . n ) c= ( f . n ) by A20,SETFAM_1:3;
then ( diameter ( R9 . n ) ) <= ( diameter ( f . n ) ) by A12,TBSP_1:24;
then A22: ( diameter ( R9 . n ) ) <= F(n) by A12,XXREAL_0:2;
( f . n ) is  bounded by A12;
then A23: ( 0 ) <= ( diameter ( R9 . n ) ) by A21,TBSP_1:14,TBSP_1:21;
A24: ( Ns . n ) = ( NULL * ( seq . n ) ) by SEQ_1:9;
F(n) = ( seq . n ) by A2;
hence (( Ns . n ) <= ( dR . n ) & ( dR . n ) <= ( seq . n )) by A23,A22,A24,CKB3:def 1;
end;
A25: ( lim seq ) = ( 0 ) by A6,SEQ_4:30;
then A26: ( lim Ns ) = ( NULL * ( 0 ) ) by A6,SEQ_2:8,SEQ_4:30;
A27: seq is  convergent by A6,SEQ_4:30;
then A28: ( lim dR ) = ( 0 ) by A25,A7,A26,A19,SEQ_2:20;
A29: R9 is  closed by A3,A17,CKB27:1;
then ( meet R9 ) <> ( {} ) by A1,A15,A28,CKB30:1;
then consider x0 being set such that A30: x0 in ( meet R9 ) by XBOOLE_0:def 1;
reconsider x0 as (Point of M) by A30;
A31: dR is  convergent by A27,A25,A7,A26,A19,SEQ_2:19;
A32:now
let y;
assume A33: y in F;
then reconsider Y = y as (Subset of T);
defpred P9[ set,set ]
 means
(for i holds (i = $1 implies $2 = ( ( R . i ) /\ Y )));
A34: (for x holds (x in ( NAT ) implies (ex z being set st (z in ( bool (the carrier of M) ) & P9[ x,z ]))))
proof
let x;
assume x in ( NAT );
then reconsider i = x as (Element of ( NAT ));
take ( ( R . i ) /\ Y );
thus thesis;
end;
consider f9 being (SetSequence of M) such that A35: (for x holds (x in ( NAT ) implies P9[ x,( f9 . x ) ])) from FUNCT_2:sch 1(A34);
A36:now
deffunc F(set) = ( f . $1 );
let x;
assume x in ( dom f9 );
then reconsider i = x as (Element of ( NAT ));
set SS = { ( f . j ) where j is (Element of ( NAT )): j <= i };
A37: ( f . i ) in SS;
A38: SS c= { F(j) where j is (Element of ( NAT )): j in ( i + 1 ) }
proof
let x;
assume x in SS;
then consider j being (Element of ( NAT )) such that A39: x = ( f . j ) and A40: j <= i;
j < ( i + 1 ) by A40,NAT_1:13;
then j in ( i + 1 ) by NAT_1:44;
hence thesis by A39;
end;
A41: ( { Y } \/ SS ) c= F
proof
let z being set;
assume that
A42: z in ( { Y } \/ SS );
per cases  by A42,XBOOLE_0:def 3;
suppose z in { Y };

hence thesis by A33,TARSKI:def 1;
end;
suppose z in SS;

then (ex j being (Element of ( NAT )) st (z = ( f . j ) & j <= i));
hence thesis by A12;
end;
end;
A43: ( i + 1 ) is  finite;
{ F(j) where j is (Element of ( NAT )): j in ( i + 1 ) } is  finite from FRAENKEL:sch 21(A43);
then ( meet ( { Y } \/ SS ) ) <> ( {} ) by A4,A41,A38,FINSET_1:def 3;
then ( ( meet { Y } ) /\ ( meet SS ) ) <> ( {} ) by A37,SETFAM_1:9;
then ( Y /\ ( meet SS ) ) <> ( {} ) by SETFAM_1:10;
then ( Y /\ ( R . i ) ) <> ( {} ) by A18;
hence ( f9 . x ) is non empty by A35;
end;
A44:now
let i;
reconsider Ri = ( R . i ) as (Subset of T);
i in ( NAT ) by ORDINAL1:def 12;
then A45: ( f9 . i ) = ( Ri /\ Y ) by A35;
( R9 . i ) is  closed by A29,CKB24:def 1;
then A46: Ri is  closed by CKB15:1;
Y is  closed by A3,A33,TOPS_2:def 2;
hence ( f9 . i ) is  closed by A46,A45,CKB15:1;
end;
now
let i;
i in ( NAT ) by ORDINAL1:def 12;
then A47: ( f9 . i ) = ( ( R9 . i ) /\ Y ) by A35;
( R9 . i ) is  bounded by CKB1:def 1;
hence ( f9 . i ) is  bounded by A47,TBSP_1:14,XBOOLE_1:17;
end;
then reconsider f9 as  non-empty  bounded  closed (SetSequence of M) by A36,A44,CKB1:def 1,CKB24:def 1,FUNCT_1:def 9;
A48: ( f9 . ( 0 ) ) = ( ( R . ( 0 ) ) /\ Y ) by A35;
set df = ( diameter f9 );
now
reconsider Y9 = Y as (Subset of M);
let n being (Element of ( NAT ));
A49: ( Ns . n ) = ( NULL * ( seq . n ) ) by SEQ_1:9;
A50: ( ( R . n ) /\ Y9 ) = ( f9 . n ) by A35;
A51: ( R9 . n ) is  bounded by CKB1:def 1;
then ( diameter ( f9 . n ) ) <= ( diameter ( R9 . n ) ) by A50,TBSP_1:24,XBOOLE_1:17;
then A52: ( diameter ( f9 . n ) ) <= ( dR . n ) by CKB3:def 1;
( ( R . n ) /\ Y ) c= ( R . n ) by XBOOLE_1:17;
then ( 0 ) <= ( diameter ( f9 . n ) ) by A51,A50,TBSP_1:14,TBSP_1:21;
hence (( Ns . n ) <= ( df . n ) & ( df . n ) <= ( dR . n )) by A52,A49,CKB3:def 1;
end;
then A53: ( lim df ) = ( 0 ) by A7,A26,A31,A28,SEQ_2:20;
now
let i being (Element of ( NAT ));
A54: ( f9 . i ) = ( ( R . i ) /\ Y ) by A35;
A55: ( R . ( i + 1 ) ) c= ( R . i ) by A15,KURATO_0:def 3;
( f9 . ( i + 1 ) ) = ( ( R . ( i + 1 ) ) /\ Y ) by A35;
hence ( f9 . ( i + 1 ) ) c= ( f9 . i ) by A54,A55,XBOOLE_1:26;
end;
then f9 is  non-ascending by KURATO_0:def 3;
then ( meet f9 ) <> ( {} ) by A1,A53,CKB30:1;
then consider z being set such that A56: z in ( meet f9 ) by XBOOLE_0:def 1;
reconsider z as (Point of M) by A56;
A57: x0 = z
proof
assume x0 <> z;
then ( dist (x0,z) ) <> ( 0 ) by METRIC_1:2;
then ( dist (x0,z) ) > ( 0 ) by METRIC_1:5;
then consider i being (Element of ( NAT )) such that A58: (for j being (Element of ( NAT )) holds (i <= j implies ( abs ( ( dR . j ) - ( 0 ) ) ) < ( dist (x0,z) ))) by A31,A28,SEQ_2:def 7;
A59: ( f9 . i ) = ( ( R . i ) /\ Y ) by A35;
z in ( f9 . i ) by A56,KURATO_0:3;
then A60: z in ( R . i ) by A59,XBOOLE_0:def 4;
A61: ( R9 . i ) is  bounded by CKB1:def 1;
then A62: ( 0 ) <= ( diameter ( R9 . i ) ) by TBSP_1:21;
x0 in ( R . i ) by A30,KURATO_0:3;
then ( dist (x0,z) ) <= ( diameter ( R9 . i ) ) by A60,A61,TBSP_1:def 8;
then A63: ( abs ( diameter ( R9 . i ) ) ) >= ( dist (x0,z) ) by A62,ABSVALUE:def 1;
( abs ( ( dR . i ) - ( 0 ) ) ) < ( dist (x0,z) ) by A58;
hence thesis by A63,CKB3:def 1;
end;
z in ( f9 . ( 0 ) ) by A56,KURATO_0:3;
hence x0 in y by A57,A48,XBOOLE_0:def 4;
end;
F <> ( {} ) by A4,FINSET_1:def 3;
hence thesis by A32,SETFAM_1:def 1;
end;

assume A64: (for F being (Subset-Family of T) holds (((F is  closed & F is  centered) & (for r holds (r > ( 0 ) implies (ex A being (Subset of M) st ((A in F & A is  bounded) & ( diameter A ) < r))))) implies ( meet F ) is non empty));
now
let S being  non-empty  bounded  closed (SetSequence of M);
assume that
A65: S is  non-ascending
and
A66: ( lim ( diameter S ) ) = ( 0 );
reconsider RS = ( rng S ) as (Subset-Family of T);
A67:now
set d = ( diameter S );
A68: ( dom S ) = ( NAT ) by FUNCT_2:def 1;
A69: d is  bounded_below by CKB4:1;
A70: d is  non-increasing by A65,CKB5:1;
let r;
assume r > ( 0 );
then consider n being (Element of ( NAT )) such that A71: (for m being (Element of ( NAT )) holds (n <= m implies ( abs ( ( d . m ) - ( 0 ) ) ) < r)) by A66,A69,A70,SEQ_2:def 7;
take Sn = ( S . n );
A72: ( d . n ) = ( diameter Sn ) by CKB3:def 1;
Sn is  bounded by CKB1:def 1;
then A73: ( diameter Sn ) >= ( 0 ) by TBSP_1:21;
( abs ( ( d . n ) - ( 0 ) ) ) < r by A71;
hence ((Sn in RS & Sn is  bounded) & ( diameter Sn ) < r) by A72,A73,A68,CKB1:def 1,ABSVALUE:def 1,FUNCT_1:def 3;
end;
RS is  closed by CKB32:1;
then ( meet RS ) is non empty by A64,A65,A67,CKB31:1;
then consider x such that A74: x in ( meet RS ) by XBOOLE_0:def 1;
now
let i being (Element of ( NAT ));
( dom S ) = ( NAT ) by FUNCT_2:def 1;
then ( S . i ) in RS by FUNCT_1:def 3;
hence x in ( S . i ) by A74,SETFAM_1:def 1;
end;
hence ( meet S ) is non empty by KURATO_0:3;
end;
hence thesis by CKB30:1;
end;
