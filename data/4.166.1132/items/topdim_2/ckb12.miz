environ
vocabularies NUMBERS,NAT_1,SETFAM_1,TREES_2,TARSKI,CARD_1,XBOOLE_0,FINSET_1,PEPIN,XXREAL_0,ORDINAL1,ARYTM_3,ARYTM_1,SUBSET_1,FUNCT_1,RELAT_1,INT_1,PCOMPS_1,PRE_TOPC,TOPDIM_1,WAYBEL23,RCOMP_1,PROB_1,TOPGEN_4,CARD_3,ZFMISC_1,STRUCT_0,RLVECT_3,TOPS_1,MCART_1,METRIZTS,EUCLID,XREAL_0,REAL_1,FINSEQ_1,METRIC_1,FINSEQ_2,RVSUM_1,SQUARE_1,COMPLEX1,RELAT_2,CONNSP_1,T_0TOPSP,FUNCOP_1,FUNCT_4,CARD_2;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,MCART_1,ZFMISC_1,FUNCT_2,CARD_1,CANTOR_1,COMPLEX1,FINSET_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,XXREAL_3,NAT_1,INT_1,SETFAM_1,DOMAIN_1,FUNCOP_1,TOPS_2,STRUCT_0,PRE_TOPC,METRIC_1,PCOMPS_1,CARD_3,PROB_1,KURATO_2,WAYBEL23,TOPS_1,T_0TOPSP,CARD_2,RVSUM_1,FINSEQ_1,FINSEQ_2,EUCLID,BORSUK_1,TOPGEN_4,FUNCT_4,SQUARE_1,CONNSP_1,TOPREAL9,ORDERS_4,METRIZTS,TOPDIM_1,CKB1,CKB4;
definitions STRUCT_0,SQUARE_1,EUCLID,PCOMPS_1,TOPS_1,TARSKI,METRIC_1,XBOOLE_0,TOPS_2,SETFAM_1,SUBSET_1,CARD_3,TOPDIM_1,CKB1,CKB4;
theorems ABSVALUE,FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,RVSUM_1,TARSKI,XREAL_0,COMPLEX1,XREAL_1,XXREAL_0,FUNCOP_1,ORDINAL1,RELAT_1,PRE_TOPC,TOPMETR,EUCLID,METRIC_1,XBOOLE_0,TOPS_1,TOPS_2,TOPREAL7,PROB_1,ZFMISC_1,NAT_1,KURATO_2,INT_1,TOPGEN_1,XBOOLE_1,MCART_1,CARD_1,TOPGEN_4,SUBSET_1,TSEP_1,TSP_1,SETFAM_1,CARD_4,YELLOW_9,ORDERS_4,BORSUK_1,CARD_3,CARD_2,NECKLACE,BORSUK_3,TOPALG_3,JORDAN2C,TOPREAL9,JORDAN2B,JORDAN,STIRL2_1,FUNCT_4,ENUMSET1,XXREAL_3,CONNSP_1,WELLORD2,METRIZTS,PCOMPS_1,TOPDIM_1,YELLOW14,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10,CKB11;
schemes FUNCT_2,NAT_1,CLASSES1,LMOD_7,BORSUK_2;
registrations REALSET1,PRE_TOPC,PCOMPS_1,NAT_1,XREAL_0,SUBSET_1,STRUCT_0,TOPS_1,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,FINSET_1,VALUED_0,RELAT_1,FUNCT_1,INT_1,CARD_3,TOPGEN_4,BORSUK_3,MEMBERED,XXREAL_3,METRIZTS,TOPDIM_1,EUCLID,ZFMISC_1,RELSET_1,CKB2,CKB3,CKB5,CKB6;
constructors TOPS_2,BORSUK_1,REAL_1,COMPLEX1,CANTOR_1,TOPGEN_4,WAYBEL23,TOPS_1,SQUARE_1,RVSUM_1,BORSUK_3,CARD_2,TSP_1,CONNSP_1,BINOP_2,TOPREAL9,ORDERS_4,XXREAL_3,METRIZTS,TOPDIM_1,FUNCOP_1,FUNCSDOM,PCOMPS_1,CKB1,CKB4;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve n for Nat;
reserve TM for  metrizable TopSpace;
reserve F for  finite (Subset-Family of TM);
theorem
Lm3: (for T being  metrizable TopSpace holds (T is  second-countable implies (((ex F being (Subset-Family of T) st ((((F is  closed & F is (Cover of T)) & F is  countable) & F is  finite-ind) & ( ind F ) <= n)) implies (T is  finite-ind & ( ind T ) <= n)) & ((T is  finite-ind & ( ind T ) <= n) implies (ex A,B being (Subset of T) st (((( [#] T ) = ( A \/ B ) & A misses B) & ( ind A ) <= ( n - 1 )) & ( ind B ) <= ( 0 )))))))
proof
defpred R[ Nat ]
 means
(for T being  metrizable TopSpace holds (((T is  second-countable & T is  finite-ind) & ( ind T ) <= $1) implies (ex A,B being (Subset of T) st (((( [#] T ) = ( A \/ B ) & A misses B) & ( ind A ) <= ( $1 - 1 )) & ( ind B ) <= ( 0 )))));
defpred P[ Nat ]
 means
(for T being  metrizable TopSpace holds ((T is  second-countable & (ex F being (Subset-Family of T) st ((((F is  closed & F is (Cover of T)) & F is  countable) & F is  finite-ind) & ( ind F ) <= $1))) implies (T is  finite-ind & ( ind T ) <= $1)));
A1: (for n holds (P[ n ] implies R[ ( n + 1 ) ]))
proof
defpred P1[ set ]
 means
(not contradiction);
let n;
assume that
A2: P[ n ];
let T being  metrizable TopSpace;
assume that
A3: T is  second-countable
and
A4: T is  finite-ind
and
A5: ( ind T ) <= ( n + 1 );
consider B being (Basis of T) such that A6: (for A being (Subset of T) holds (A in B implies (( Fr A ) is  finite-ind & ( ind ( Fr A ) ) <= ( ( n + 1 ) - 1 )))) by A4,A5,TOPDIM_1:31;
deffunc F((Subset of T)) = ( Fr $1 );
consider uB being (Basis of T) such that A7: uB c= B and A8: uB is  countable by A3,METRIZTS:24;
defpred P[ set ]
 means
($1 in uB & P1[ $1 ]);
consider S being (Subset-Family of T) such that A9: S = { F(b) where b is (Subset of T): P[ b ] } from LMOD_7:sch 5;
set uS = ( union S );
set TS = ( T | uS );
A10: ( [#] TS ) = uS by PRE_TOPC:def 5;
then reconsider S9 = S as (Subset-Family of TS) by ZFMISC_1:82;
A11: ( T | ( uS ` ) ) is  second-countable by A3;
(for a being (Subset of TS) holds (a in S9 implies (a is  finite-ind & ( ind a ) <= n)))
proof
let a being (Subset of TS);
assume a in S9;
then consider b being (Subset of T) such that A12: a = F(b) and A13: P[ b ] by A9;
(( Fr b ) is  finite-ind & ( ind ( Fr b ) ) <= ( ( n + 1 ) - 1 )) by A6,A7,A13;
hence thesis by A12,TOPDIM_1:21;
end;
then A14: (S9 is  finite-ind & ( ind S9 ) <= n) by TOPDIM_1:11;
A15: (for p being (Point of T) holds (for U being  open (Subset of T) holds (p in U implies (ex W being  open (Subset of T) st ((p in W & W c= U) & ( uS ` ) misses ( Fr W ))))))
proof
let p being (Point of T);
let U being  open (Subset of T);
assume p in U;
then consider a being (Subset of T) such that A16: a in uB and A17: (p in a & a c= U) by YELLOW_9:31;
uB c= (the topology of T) by TOPS_2:64;
then reconsider a as  open (Subset of T) by A16,PRE_TOPC:def 2;
take a;
F(a) in S by A9,A16;
then F(a) c= uS by ZFMISC_1:74;
hence thesis by A17,SUBSET_1:24;
end;
take uS;
take ( uS ` );
A18: ( card { F(b) where b is (Subset of T): (b in uB & P1[ b ]) } ) c= ( card uB ) from BORSUK_2:sch 1;
( card uB ) c= ( omega ) by A8,CARD_3:def 14;
then ( card S ) c= ( omega ) by A9,A18,XBOOLE_1:1;
then A19: S9 is  countable by CARD_3:def 14;
A20: S9 is  closed
proof
let a being (Subset of TS);
assume a in S9;
then (ex b being (Subset of T) st (a = F(b) & P[ b ])) by A9;
hence thesis by TSEP_1:8;
end;
S9 is (Cover of TS) by A10,SETFAM_1:def 11;
then ( ind TS ) <= n by A2,A3,A14,A19,A20;
hence thesis by A4,A11,A15,PRE_TOPC:2,SUBSET_1:23,TOPDIM_1:17,TOPDIM_1:38;
end;
A21: P[ ( 0 ) ] by TOPDIM_1:36;
A22: (for n holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n;
assume that
A23: P[ n ];
let T being  metrizable TopSpace;
assume that
A24: T is  second-countable;
given F being (Subset-Family of T) such that
A25: F is  closed
and
A26: F is (Cover of T)
and
A27: F is  countable
and
A28: (F is  finite-ind & ( ind F ) <= ( n + 1 ));

per cases ;
suppose T is  empty;

hence thesis by TOPDIM_1:6;
end;
suppose A29: T is non empty;

set cT = (the carrier of T);
A30: F is non empty by A26,A29,SETFAM_1:45,ZFMISC_1:2;
then consider f being (Function of ( NAT ),F) such that A31: ( rng f ) = F by A27,CARD_3:96;
( dom f ) = ( NAT ) by A30,FUNCT_2:def 1;
then reconsider f as (SetSequence of T) by A31,FUNCT_2:2;
consider g being (SetSequence of T) such that A32: ( union ( rng f ) ) = ( union ( rng g ) ) and A33: (for i,j being Nat holds (i <> j implies ( g . i ) misses ( g . j ))) and A34: (for n holds (ex fn being  finite (Subset-Family of T) st (fn = { ( f . i ) where i is (Element of ( NAT )): i < n } & ( g . n ) = ( ( f . n ) \ ( union fn ) )))) by TOPDIM_1:33;
defpred Q[ set,set ]
 means
(for i being Nat holds (for A,B being (Subset of T) holds (($1 = i & $2 = [ A,B ]) implies ((((( A \/ B ) = ( g . i ) & A is  finite-ind) & B is  finite-ind) & ( ind A ) <= n) & ( ind B ) <= ( 0 )))));
A35: (for x being set holds (x in ( NAT ) implies (ex y being set st (y in [: ( bool cT ),( bool cT ) :] & Q[ x,y ]))))
proof
let x being set;
assume x in ( NAT );
then reconsider N = x as (Element of ( NAT ));
reconsider gN = ( g . N ) as (Subset of T);
( dom f ) = ( NAT ) by FUNCT_2:def 1;
then A36: ( f . N ) in F by A31,FUNCT_1:def 3;
then A37: ( f . N ) is  finite-ind by A28,TOPDIM_1:4;
(ex fn being  finite (Subset-Family of T) st (fn = { ( f . i ) where i is (Element of ( NAT )): i < N } & ( g . N ) = ( ( f . N ) \ ( union fn ) ))) by A34;
then A38: ( g . N ) c= ( f . N ) by XBOOLE_1:36;
then A39: ( g . N ) is  finite-ind by A37,TOPDIM_1:19;
A40: ( ind ( g . N ) ) <= ( ind ( f . N ) ) by A37,A38,TOPDIM_1:19;
( ind ( f . N ) ) <= ( n + 1 ) by A28,A36,TOPDIM_1:11;
then A41: ( ind ( g . N ) ) <= ( n + 1 ) by A40,XXREAL_0:2;
( ind ( T | gN ) ) = ( ind gN ) by A39,TOPDIM_1:17;
then consider A being (Subset of ( T | gN )),B being (Subset of ( T | gN )) such that A42: ( A \/ B ) = ( [#] ( T | gN ) ) and A misses B and A43: (( ind A ) <= ( ( n + 1 ) - 1 ) & ( ind B ) <= ( 0 )) by A1,A23,A24,A39,A41;
A44: A is  finite-ind by A39;
( [#] ( T | gN ) ) = gN by PRE_TOPC:def 5;
then reconsider A9 = A,B9 = B as (Subset of T) by XBOOLE_1:1;
B is  finite-ind by A39;
then A45: (B9 is  finite-ind & ( ind B9 ) = ( ind B )) by TOPDIM_1:22;
take y = [ A9,B9 ];
thus y in [: ( bool cT ),( bool cT ) :];
let i being Nat;
let a being (Subset of T),b being (Subset of T);
assume that
A46: x = i
and
A47: y = [ a,b ];
A48: a = A9 by A47,ZFMISC_1:27;
( A9 \/ B9 ) = ( g . i ) by A42,A46,PRE_TOPC:def 5;
hence thesis by A43,A44,A45,A47,A48,TOPDIM_1:22,ZFMISC_1:27;
end;
consider P12 being (Function of ( NAT ),[: ( bool cT ),( bool cT ) :]) such that A49: (for x being set holds (x in ( NAT ) implies Q[ x,( P12 . x ) ])) from FUNCT_2:sch 1(A35);
set P1 = ( pr1 P12 );
set P2 = ( pr2 P12 );
set U1 = ( Union P1 );
set U2 = ( Union P2 );
set Tu1 = ( T | U1 );
set Tu2 = ( T | U2 );
reconsider Tu1 as  metrizable TopSpace;
A50: ( dom P1 ) = ( NAT ) by FUNCT_2:def 1;
A51: ( [#] Tu1 ) = U1 by PRE_TOPC:def 5;
then reconsider P1 as (SetSequence of Tu1) by A50,FUNCT_2:2,ZFMISC_1:82;
reconsider Tu2 as  metrizable TopSpace;
A52: ( dom P2 ) = ( NAT ) by FUNCT_2:def 1;
A53: (for i being Nat holds ( g . i ) is  F_sigma)
proof
let i being Nat;
consider fi being  finite (Subset-Family of T) such that A54: fi = { ( f . j ) where j is (Element of ( NAT )): j < i } and A55: ( g . i ) = ( ( f . i ) \ ( union fi ) ) by A34;
fi is  closed
proof
let A being (Subset of T);
assume A in fi;
then A56: (ex j being (Element of ( NAT )) st (A = ( f . j ) & j < i)) by A54;
( dom f ) = ( NAT ) by FUNCT_2:def 1;
then A in F by A31,A56,FUNCT_1:def 3;
hence thesis by A25,TOPS_2:def 2;
end;
then A57: ( union fi ) is  closed by TOPS_2:21;
(( dom f ) = ( NAT ) & i in ( NAT )) by FUNCT_2:def 1,ORDINAL1:def 12;
then ( f . i ) in F by A31,FUNCT_1:def 3;
then ( f . i ) is  closed by A25,TOPS_2:def 2;
then A58: ( f . i ) is  F_sigma by A29,TOPGEN_4:43;
( ( ( union fi ) ` ) /\ ( f . i ) ) = ( ( ( [#] T ) /\ ( f . i ) ) \ ( union fi ) ) by XBOOLE_1:49
.= ( g . i ) by A55,XBOOLE_1:28;
hence thesis by A29,A57,A58,TOPGEN_4:39;
end;
(for i being Nat holds ((( P1 . i ) is  finite-ind & ( ind ( P1 . i ) ) <= n) & ( P1 . i ) is  F_sigma))
proof
let i being Nat;
consider y1 being set,y2 being set such that A59: y1 in ( bool cT ) and A60: y2 in ( bool cT ) and A61: ( P12 . i ) = [ y1,y2 ] by ZFMISC_1:def 2;
reconsider y1 as (Subset of T) by A59;
A62: i in ( NAT ) by ORDINAL1:def 12;
then A63: (y1 is  finite-ind & ( ind y1 ) <= n) by A49,A60,A61;
(( [ y1,y2 ] `1 ) = y1 & ( dom P12 ) = ( NAT )) by FUNCT_2:def 1,MCART_1:def 1;
then A64: y1 = ( P1 . i ) by A61,A62,MCART_1:def 12;
A65: ( U1 /\ ( g . i ) ) c= ( P1 . i )
proof
let x being set;
assume A66: x in ( U1 /\ ( g . i ) );
then A67: x in ( g . i ) by XBOOLE_0:def 4;
x in U1 by A66,XBOOLE_0:def 4;
then consider j being (Element of ( NAT )) such that A68: x in ( P1 . j ) by PROB_1:12;
consider z1 being set,z2 being set such that A69: (z1 in ( bool cT ) & z2 in ( bool cT )) and A70: ( P12 . j ) = [ z1,z2 ] by ZFMISC_1:def 2;
(( [ z1,z2 ] `1 ) = z1 & ( dom P12 ) = ( NAT )) by FUNCT_2:def 1,MCART_1:def 1;
then A71: z1 = ( P1 . j ) by A70,MCART_1:def 12;
( z1 \/ z2 ) = ( g . j ) by A49,A69,A70;
then x in ( g . j ) by A68,A71,XBOOLE_0:def 3;
then ( g . i ) meets ( g . j ) by A67,XBOOLE_0:3;
hence thesis by A33,A68;
end;
( y1 \/ y2 ) = ( g . i ) by A49,A60,A61,A62;
then ( P1 . i ) c= ( g . i ) by A64,XBOOLE_1:7;
then ( P1 . i ) c= ( U1 /\ ( g . i ) ) by A51,XBOOLE_1:19;
then (( P1 . i ) = ( U1 /\ ( g . i ) ) & ( g . i ) is  F_sigma) by A53,A65,XBOOLE_0:def 10;
hence thesis by A63,A64,METRIZTS:10,TOPDIM_1:21;
end;
then consider G1 being (Subset-Family of Tu1) such that A72: (((G1 is  closed & G1 is  finite-ind) & ( ind G1 ) <= n) & G1 is  countable) and A73: ( Union P1 ) = ( union G1 ) by CKB11:1;
A74: G1 is (Cover of Tu1) by A51,A73,SETFAM_1:def 11;
then A75: Tu1 is  finite-ind by A23,A24,A72;
then A76: U1 is  finite-ind by TOPDIM_1:18;
A77: ( [#] Tu2 ) = U2 by PRE_TOPC:def 5;
then reconsider P2 as (SetSequence of Tu2) by A52,FUNCT_2:2,ZFMISC_1:82;
(for i being Nat holds ((( P2 . i ) is  finite-ind & ( ind ( P2 . i ) ) <= ( 0 )) & ( P2 . i ) is  F_sigma))
proof
let i being Nat;
consider y1 being set,y2 being set such that A78: y1 in ( bool cT ) and A79: y2 in ( bool cT ) and A80: ( P12 . i ) = [ y1,y2 ] by ZFMISC_1:def 2;
reconsider y2 as (Subset of T) by A79;
A81: i in ( NAT ) by ORDINAL1:def 12;
then A82: (y2 is  finite-ind & ( ind y2 ) <= ( 0 )) by A49,A78,A80;
(( [ y1,y2 ] `2 ) = y2 & ( dom P12 ) = ( NAT )) by FUNCT_2:def 1,MCART_1:def 2;
then A83: y2 = ( P2 . i ) by A80,A81,MCART_1:def 13;
A84: ( U2 /\ ( g . i ) ) c= ( P2 . i )
proof
let x being set;
assume A85: x in ( U2 /\ ( g . i ) );
then A86: x in ( g . i ) by XBOOLE_0:def 4;
x in U2 by A85,XBOOLE_0:def 4;
then consider j being (Element of ( NAT )) such that A87: x in ( P2 . j ) by PROB_1:12;
consider z1 being set,z2 being set such that A88: (z1 in ( bool cT ) & z2 in ( bool cT )) and A89: ( P12 . j ) = [ z1,z2 ] by ZFMISC_1:def 2;
(( [ z1,z2 ] `2 ) = z2 & ( dom P12 ) = ( NAT )) by FUNCT_2:def 1,MCART_1:def 2;
then A90: z2 = ( P2 . j ) by A89,MCART_1:def 13;
( z1 \/ z2 ) = ( g . j ) by A49,A88,A89;
then x in ( g . j ) by A87,A90,XBOOLE_0:def 3;
then ( g . i ) meets ( g . j ) by A86,XBOOLE_0:3;
hence thesis by A33,A87;
end;
( y1 \/ y2 ) = ( g . i ) by A49,A78,A80,A81;
then ( P2 . i ) c= ( g . i ) by A83,XBOOLE_1:7;
then ( P2 . i ) c= ( U2 /\ ( g . i ) ) by A77,XBOOLE_1:19;
then (( P2 . i ) = ( U2 /\ ( g . i ) ) & ( g . i ) is  F_sigma) by A53,A84,XBOOLE_0:def 10;
hence thesis by A82,A83,METRIZTS:10,TOPDIM_1:21;
end;
then consider G2 being (Subset-Family of Tu2) such that A91: (((G2 is  closed & G2 is  finite-ind) & ( ind G2 ) <= ( 0 )) & G2 is  countable) and A92: ( Union P2 ) = ( union G2 ) by CKB11:1;
A93: G2 is (Cover of Tu2) by A77,A92,SETFAM_1:def 11;
then Tu2 is  finite-ind by A23,A24,A91;
then A94: U2 is  finite-ind by TOPDIM_1:18;
( ind Tu1 ) <= n by A23,A24,A72,A74;
then ( ind U1 ) <= n by A76,TOPDIM_1:17;
then A95: ( ( ind U1 ) + 1 ) <= ( n + 1 ) by XREAL_1:6;
A96: U1 is  finite-ind by A75,TOPDIM_1:18;
( [#] T ) c= ( U1 \/ U2 )
proof
let x being set;
A97: ( dom P12 ) = ( NAT ) by FUNCT_2:def 1;
assume x in ( [#] T );
then x in ( Union g ) by A26,A31,A32,SETFAM_1:45;
then consider i being (Element of ( NAT )) such that A98: x in ( g . i ) by PROB_1:12;
consider y1 being set,y2 being set such that A99: (y1 in ( bool cT ) & y2 in ( bool cT )) and A100: ( P12 . i ) = [ y1,y2 ] by ZFMISC_1:def 2;
( [ y1,y2 ] `1 ) = y1 by MCART_1:def 1;
then A101: y1 = ( P1 . i ) by A97,A100,MCART_1:def 12;
( [ y1,y2 ] `2 ) = y2 by MCART_1:def 2;
then A102: y2 = ( P2 . i ) by A97,A100,MCART_1:def 13;
( y1 \/ y2 ) = ( g . i ) by A49,A99,A100;
then (x in ( P1 . i ) or x in ( P2 . i )) by A98,A101,A102,XBOOLE_0:def 3;
then (x in U1 or x in U2) by PROB_1:12;
hence thesis by XBOOLE_0:def 3;
end;
then A103: ( U1 \/ U2 ) = ( [#] T ) by XBOOLE_0:def 10;
( ind Tu2 ) <= ( 0 ) by A24,A91,A93,TOPDIM_1:36;
then A104: ( ind U2 ) <= ( 0 ) by A94,TOPDIM_1:17;
( T | U2 ) is  second-countable by A24;
then (( U1 \/ U2 ) is  finite-ind & ( ind ( U1 \/ U2 ) ) <= ( ( ind U1 ) + 1 )) by A94,A104,A96,TOPDIM_1:40;
hence thesis by A103,A95,TOPDIM_1:def 4,XXREAL_0:2;
end;
end;
A105: (for n holds P[ n ]) from NAT_1:sch 2(A21,A22);
let T being  metrizable TopSpace;
assume that
A106: T is  second-countable;
thus ((ex F being (Subset-Family of T) st ((((F is  closed & F is (Cover of T)) & F is  countable) & F is  finite-ind) & ( ind F ) <= n)) implies (T is  finite-ind & ( ind T ) <= n)) by A105,A106;
assume that
A107: T is  finite-ind
and
A108: ( ind T ) <= n;
per cases ;
suppose A109: n = ( 0 );

take ( {} T );
take ( [#] T );
thus thesis by A108,A109,TOPDIM_1:6,XBOOLE_1:65;
end;
suppose n > ( 0 );

then reconsider n1 = ( n - 1 ) as (Element of ( NAT )) by NAT_1:20;
(P[ n1 ] & ( n1 + 1 ) = n) by A105;
hence thesis by A1,A106,A107,A108;
end;
end;
