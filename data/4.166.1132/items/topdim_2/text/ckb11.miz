environ
vocabularies NUMBERS,NAT_1,SETFAM_1,TREES_2,TARSKI,CARD_1,XBOOLE_0,FINSET_1,PEPIN,XXREAL_0,ORDINAL1,ARYTM_3,ARYTM_1,SUBSET_1,FUNCT_1,RELAT_1,INT_1,PCOMPS_1,PRE_TOPC,TOPDIM_1,WAYBEL23,RCOMP_1,PROB_1,TOPGEN_4,CARD_3,ZFMISC_1,STRUCT_0,RLVECT_3,TOPS_1,MCART_1,METRIZTS,EUCLID,XREAL_0,REAL_1,FINSEQ_1,METRIC_1,FINSEQ_2,RVSUM_1,SQUARE_1,COMPLEX1,RELAT_2,CONNSP_1,T_0TOPSP,FUNCOP_1,FUNCT_4,CARD_2;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,MCART_1,ZFMISC_1,FUNCT_2,CARD_1,CANTOR_1,COMPLEX1,FINSET_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,XXREAL_3,NAT_1,INT_1,SETFAM_1,DOMAIN_1,FUNCOP_1,TOPS_2,STRUCT_0,PRE_TOPC,METRIC_1,PCOMPS_1,CARD_3,PROB_1,KURATO_2,WAYBEL23,TOPS_1,T_0TOPSP,CARD_2,RVSUM_1,FINSEQ_1,FINSEQ_2,EUCLID,BORSUK_1,TOPGEN_4,FUNCT_4,SQUARE_1,CONNSP_1,TOPREAL9,ORDERS_4,METRIZTS,TOPDIM_1,CKB1,CKB4;
definitions STRUCT_0,SQUARE_1,EUCLID,PCOMPS_1,TOPS_1,TARSKI,METRIC_1,XBOOLE_0,TOPS_2,SETFAM_1,SUBSET_1,CARD_3,TOPDIM_1,CKB1,CKB4;
theorems ABSVALUE,FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,RVSUM_1,TARSKI,XREAL_0,COMPLEX1,XREAL_1,XXREAL_0,FUNCOP_1,ORDINAL1,RELAT_1,PRE_TOPC,TOPMETR,EUCLID,METRIC_1,XBOOLE_0,TOPS_1,TOPS_2,TOPREAL7,PROB_1,ZFMISC_1,NAT_1,KURATO_2,INT_1,TOPGEN_1,XBOOLE_1,MCART_1,CARD_1,TOPGEN_4,SUBSET_1,TSEP_1,TSP_1,SETFAM_1,CARD_4,YELLOW_9,ORDERS_4,BORSUK_1,CARD_3,CARD_2,NECKLACE,BORSUK_3,TOPALG_3,JORDAN2C,TOPREAL9,JORDAN2B,JORDAN,STIRL2_1,FUNCT_4,ENUMSET1,XXREAL_3,CONNSP_1,WELLORD2,METRIZTS,PCOMPS_1,TOPDIM_1,YELLOW14,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10;
schemes FUNCT_2,NAT_1,CLASSES1,LMOD_7,BORSUK_2;
registrations REALSET1,PRE_TOPC,PCOMPS_1,NAT_1,XREAL_0,SUBSET_1,STRUCT_0,TOPS_1,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,FINSET_1,VALUED_0,RELAT_1,FUNCT_1,INT_1,CARD_3,TOPGEN_4,BORSUK_3,MEMBERED,XXREAL_3,METRIZTS,TOPDIM_1,EUCLID,ZFMISC_1,RELSET_1,CKB2,CKB3,CKB5,CKB6;
constructors TOPS_2,BORSUK_1,REAL_1,COMPLEX1,CANTOR_1,TOPGEN_4,WAYBEL23,TOPS_1,SQUARE_1,RVSUM_1,BORSUK_3,CARD_2,TSP_1,CONNSP_1,BINOP_2,TOPREAL9,ORDERS_4,XXREAL_3,METRIZTS,TOPDIM_1,FUNCOP_1,FUNCSDOM,PCOMPS_1,CKB1,CKB4;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve n for Nat;
reserve TM for  metrizable TopSpace;
reserve A for (Subset of TM);
theorem
Lm2: (for T being TopSpace holds (for g being (SetSequence of T) holds ((for i being Nat holds ((( g . i ) is  finite-ind & ( ind ( g . i ) ) <= n) & ( g . i ) is  F_sigma)) implies (ex G being (Subset-Family of T) st ((((G is  closed & G is  finite-ind) & ( ind G ) <= n) & G is  countable) & ( Union g ) = ( union G ))))))
proof
let T being TopSpace;
let g being (SetSequence of T);
assume that
A1: (for i being Nat holds ((( g . i ) is  finite-ind & ( ind ( g . i ) ) <= n) & ( g . i ) is  F_sigma));
defpred F[ set,set ]
 means
(for n being Nat holds (for F being (Subset-Family of T) holds ((n = $1 & F = $2) implies (( union F ) = ( g . n ) & F is  closed  countable))));
A2: (for x being set holds (x in ( NAT ) implies (ex y being set st (y in ( bool ( bool (the carrier of T) ) ) & F[ x,y ]))))
proof
let x being set;
assume x in ( NAT );
then reconsider n = x as (Element of ( NAT ));
( g . n ) is  F_sigma by A1;
then consider y being  closed  countable (Subset-Family of T) such that A3: ( g . n ) = ( union y ) by TOPGEN_4:def 6;
take y;
thus thesis by A3;
end;
consider f being (SetSequence of (( bool (the carrier of T) ) qua set)) such that A4: (for x being set holds (x in ( NAT ) implies F[ x,( f . x ) ])) from FUNCT_2:sch 1(A2);
take F = ( Union f );
thus F is  closed
proof
let A being (Subset of T);
assume A in F;
then consider n being (Element of ( NAT )) such that A5: A in ( f . n ) by PROB_1:12;
( f . n ) is  closed by A4;
hence thesis by A5,TOPS_2:def 2;
end;

(for A being (Subset of T) holds (A in F implies (A is  finite-ind & ( ind A ) <= n)))
proof
let A being (Subset of T);
assume A in F;
then consider i being (Element of ( NAT )) such that A6: A in ( f . i ) by PROB_1:12;
( union ( f . i ) ) = ( g . i ) by A4;
then A7: A c= ( g . i ) by A6,ZFMISC_1:74;
A8: ( ind ( g . i ) ) <= n by A1;
A9: ( g . i ) is  finite-ind by A1;
then ( ind A ) <= ( ind ( g . i ) ) by A7,TOPDIM_1:19;
hence thesis by A7,A8,A9,TOPDIM_1:19,XXREAL_0:2;
end;
hence (F is  finite-ind & ( ind F ) <= n) by TOPDIM_1:11;
(for x being set holds (x in ( dom f ) implies ( f . x ) is  countable)) by A4;
hence F is  countable by CARD_4:11;
thus ( Union g ) c= ( union F )
proof
let x being set;
assume x in ( Union g );
then consider i being (Element of ( NAT )) such that A10: x in ( g . i ) by PROB_1:12;
( union ( f . i ) ) = ( g . i ) by A4;
then consider y being set such that A11: x in y and A12: y in ( f . i ) by A10,TARSKI:def 4;
y in F by A12,PROB_1:12;
hence thesis by A11,TARSKI:def 4;
end;

thus ( union F ) c= ( Union g )
proof
let x being set;
assume x in ( union F );
then consider y being set such that A13: x in y and A14: y in F by TARSKI:def 4;
consider i being (Element of ( NAT )) such that A15: y in ( f . i ) by A14,PROB_1:12;
( union ( f . i ) ) = ( g . i ) by A4;
then x in ( g . i ) by A13,A15,TARSKI:def 4;
hence thesis by PROB_1:12;
end;

end;
