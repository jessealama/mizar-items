environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FUNCT_1,FINSET_1,CARD_1,XXREAL_0,TARSKI,ARYTM_1,RELAT_1,ZFMISC_1,RELAT_2,ORDERS_1,WELLORD1,FUNCT_2,NAT_1,FINSEQ_1,ARYTM_3,ARROW;
notations ORDERS_1,RELAT_1,RELAT_2,RELSET_1,XBOOLE_0,SUBSET_1,TARSKI,FINSET_1,FUNCT_1,FUNCT_2,CARD_1,XXREAL_0,ZFMISC_1,NAT_1,NUMBERS,FINSEQ_1,XCMPLX_0,WELLORD1,CKB1,CKB4,CKB6,CKB8,CKB12,CKB13,CKB14,CKB15;
definitions RELAT_1,FUNCT_2,WELLORD1,CKB4,CKB6,CKB8,CKB12;
theorems RELSET_1,ZFMISC_1,TARSKI,FUNCT_2,FINSEQ_4,FINSEQ_1,FINSEQ_3,NAT_1,ORDINAL1,XREAL_1,FUNCT_1,XXREAL_0,PARTFUN1,INT_1,CARD_2,CARD_1,XBOOLE_0,SUBSET_1,RELAT_2,RELAT_1,ORDERS_1,XBOOLE_1,WELLORD2,WELLORD1,CKB2,CKB3,CKB4,CKB6,CKB8,CKB12,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26;
schemes XBOOLE_0,FUNCT_2,NAT_1,RELSET_1;
registrations RELSET_1,FINSET_1,NAT_1,INT_1,XREAL_0,XBOOLE_0,ORDINAL1,CKB5,CKB7,CKB9,CKB10,CKB11;
constructors XXREAL_0,FUNCT_2,REAL_1,FINSEQ_1,INT_1,RELAT_2,PARTFUN1,WELLORD1,RELSET_1,CKB1,CKB4,CKB6,CKB12;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
reserve A for  finite non  empty set;
reserve N for  finite non  empty set;
reserve a for (Element of A);
reserve b for (Element of A);
reserve c for (Element of A);
reserve d for (Element of A);
reserve a9 for (Element of A);
reserve c9 for (Element of A);
reserve i for (Element of N);
reserve n for (Element of N);
reserve nb for (Element of N);
reserve nc for (Element of N);
reserve o for (Element of ( LinPreorders A ));
reserve oI for (Element of ( LinPreorders A ));
reserve oII for (Element of ( LinPreorders A ));
reserve p for (Element of ( Funcs (N,( LinPreorders A )) ));
reserve p9 for (Element of ( Funcs (N,( LinPreorders A )) ));
reserve pI for (Element of ( Funcs (N,( LinPreorders A )) ));
reserve pII for (Element of ( Funcs (N,( LinPreorders A )) ));
reserve pI9 for (Element of ( Funcs (N,( LinPreorders A )) ));
reserve pII9 for (Element of ( Funcs (N,( LinPreorders A )) ));
reserve f for (Function of ( Funcs (N,( LinPreorders A )) ),( LinPreorders A ));
reserve k for Nat;
reserve k0 for Nat;
theorem
Th14: ((((for p holds (for a holds (for b holds ((for i holds a <_ ( p . i ),b) implies a <_ ( f . p ),b)))) & (for p holds (for p9 holds (for a holds (for b holds ((for i holds ((a <_ ( p . i ),b iff a <_ ( p9 . i ),b) & (b <_ ( p . i ),a iff b <_ ( p9 . i ),a))) implies (a <_ ( f . p ),b iff a <_ ( f . p9 ),b))))))) & ( card A ) >= 3) implies (ex n st (for p holds (for a holds (for b holds (a <_ ( p . n ),b implies a <_ ( f . p ),b))))))
proof
assume that
A1: (for p holds (for a holds (for b holds ((for i holds a <_ ( p . i ),b) implies a <_ ( f . p ),b))))
and
A2: (for p holds (for p9 holds (for a holds (for b holds ((for i holds ((a <_ ( p . i ),b iff a <_ ( p9 . i ),b) & (b <_ ( p . i ),a iff b <_ ( p9 . i ),a))) implies (a <_ ( f . p ),b iff a <_ ( f . p9 ),b))))))
and
A3: ( card A ) >= 3;
defpred extreme[ (Element of ( LinPreorders A )),(Element of A) ]
 means
((for a holds (a <> $2 implies $2 <_ $1,a)) or (for a holds (a <> $2 implies a <_ $1,$2)));
A4: (for p holds (for b holds ((for i holds extreme[ ( p . i ),b ]) implies extreme[ ( f . p ),b ])))
proof
assume (not thesis);
then consider p,b such that A5: (ex a st (a <> b & a <=_ ( f . p ),b)) and A6: (ex c st (c <> b & b <=_ ( f . p ),c)) and A7: (for i holds extreme[ ( p . i ),b ]);
consider a9 such that A8: (a9 <> b & a9 <=_ ( f . p ),b) by A5;
consider c9 such that A9: (b <> c9 & b <=_ ( f . p ),c9) by A6;
(ex a st (ex c st ((((a <> b & b <> c) & a <> c) & a <=_ ( f . p ),b) & b <=_ ( f . p ),c)))
proof
per cases ;
suppose A10: a9 <> c9;

take a9;
take c9;
thus thesis by A8,A9,A10;
end;
suppose A11: a9 = c9;

consider d such that A12: (d <> b & d <> a9) by A3,CKB3:1;
per cases  by CKB17:1;
suppose A13: d <=_ ( f . p ),b;

take d;
take c9;
thus thesis by A9,A11,A12,A13;
end;
suppose A14: b <=_ ( f . p ),d;

take a9;
take d;
thus thesis by A8,A12,A14;
end;
end;
end;
then consider a,c such that A15: (a <> b & b <> c) and A16: a <> c and A17: (a <=_ ( f . p ),b & b <=_ ( f . p ),c);
defpred P[ (Element of N),(Element of ( LinPreorders A )) ]
 means
(((((a <_ ( p . $1 ),b iff a <_ $2,b) & (b <_ ( p . $1 ),a iff b <_ $2,a)) & (b <_ ( p . $1 ),c iff b <_ $2,c)) & (c <_ ( p . $1 ),b iff c <_ $2,b)) & c <_ $2,a);
A18: (for i holds (ex o st P[ i,o ]))
proof
let i;
per cases  by A7;
suppose (for c holds (c <> b implies b <_ ( p . i ),c));

then A19: (b <_ ( p . i ),a & b <_ ( p . i ),c) by A15;
consider o such that A20: (b <_ o,c & c <_ o,a) by A15,A16,CKB20:1;
take o;
thus thesis by A19,A20,CKB17:1,CKB18:1;
end;
suppose (for a holds (a <> b implies a <_ ( p . i ),b));

then A21: (a <_ ( p . i ),b & c <_ ( p . i ),b) by A15;
consider o such that A22: (c <_ o,a & a <_ o,b) by A15,A16,CKB20:1;
take o;
thus thesis by A21,A22,CKB17:1,CKB18:1;
end;
end;
consider p9 being (Function of N,( LinPreorders A )) such that A23: (for i holds P[ i,( p9 . i ) ]) from FUNCT_2:sch 3(A18);
reconsider p9 as (Element of ( Funcs (N,( LinPreorders A )) )) by FUNCT_2:8;
(a <=_ ( f . p9 ),b & b <=_ ( f . p9 ),c) by A2,A17,A23;
then a <=_ ( f . p9 ),c by CKB18:1;
hence contradiction by A1,A23;
end;
A24: (for b holds (ex nb st (ex pI st (ex pII st (((((((for i holds (i <> nb implies ( pI . i ) = ( pII . i ))) & (for i holds extreme[ ( pI . i ),b ])) & (for i holds extreme[ ( pII . i ),b ])) & (for a holds (a <> b implies b <_ ( pI . nb ),a))) & (for a holds (a <> b implies a <_ ( pII . nb ),b))) & (for a holds (a <> b implies b <_ ( f . pI ),a))) & (for a holds (a <> b implies a <_ ( f . pII ),b)))))))
proof
consider t being FinSequence such that A25: ( rng t ) = N and A26: t is  one-to-one by FINSEQ_4:58;
reconsider t as (FinSequence of N) by A25,FINSEQ_1:def 4;
let b;
consider oI such that A27: (for a holds (a <> b implies b <_ oI,a)) by CKB21:1;
consider oII such that A28: (for a holds (a <> b implies a <_ oII,b)) by CKB22:1;
A29: (for k0 holds (ex p st ((for k holds ((k in ( dom t ) & k < k0) implies ( p . ( t . k ) ) = oII)) & (for k holds ((k in ( dom t ) & k >= k0) implies ( p . ( t . k ) ) = oI)))))
proof
let k0;
defpred P[ (Element of N),(Element of ( LinPreorders A )) ]
 means
(ex k st (((k in ( dom t ) & $1 = ( t . k )) & (k < k0 implies $2 = oII)) & (k >= k0 implies $2 = oI)));
A30: (for i holds (ex o st P[ i,o ]))
proof
let i;
consider k being set such that A31: k in ( dom t ) and A32: i = ( t . k ) by A25,FUNCT_1:def 3;
reconsider k as Nat by A31;
per cases ;
suppose A33: k < k0;

take oII;
thus thesis by A31,A32,A33;
end;
suppose A34: k >= k0;

take oI;
thus thesis by A31,A32,A34;
end;
end;
consider p being (Function of N,( LinPreorders A )) such that A35: (for i holds P[ i,( p . i ) ]) from FUNCT_2:sch 3(A30);
reconsider p as (Element of ( Funcs (N,( LinPreorders A )) )) by FUNCT_2:8;
take p;
thus (for k holds ((k in ( dom t ) & k < k0) implies ( p . ( t . k ) ) = oII))
proof
let k;
assume that
A36: k in ( dom t )
and
A37: k < k0;
reconsider i = ( t . k ) as (Element of N) by A36,PARTFUN1:4;
P[ i,( p . i ) ] by A35;
hence thesis by A26,A36,A37,FUNCT_1:def 4;
end;

let k;
assume that
A38: k in ( dom t )
and
A39: k >= k0;
reconsider i = ( t . k ) as (Element of N) by A38,PARTFUN1:4;
P[ i,( p . i ) ] by A35;
hence thesis by A26,A38,A39,FUNCT_1:def 4;
end;
defpred Q[ Nat ]
 means
(for p holds (((for k holds ((k in ( dom t ) & k < $1) implies ( p . ( t . k ) ) = oII)) & (for k holds ((k in ( dom t ) & k >= $1) implies ( p . ( t . k ) ) = oI))) implies (for a holds (a <> b implies a <_ ( f . p ),b))));
reconsider kII9 = ( ( len t ) + 1 ) as (Element of ( NAT )) by ORDINAL1:def 12;
A40: Q[ kII9 ]
proof
let p;
assume that
A41: (for k holds ((k in ( dom t ) & k < kII9) implies ( p . ( t . k ) ) = oII))
and
(for k holds ((k in ( dom t ) & k >= kII9) implies ( p . ( t . k ) ) = oI));
let a;
assume A42: a <> b;
(for i holds a <_ ( p . i ),b)
proof
let i;
consider k being set such that A43: k in ( dom t ) and A44: i = ( t . k ) by A25,FUNCT_1:def 3;
reconsider k as Nat by A43;
k <= ( len t ) by A43,FINSEQ_3:25;
then ( k + ( 0 ) ) < kII9 by XREAL_1:8;
then ( p . i ) = oII by A41,A43,A44;
hence thesis by A28,A42;
end;
hence thesis by A1;
end;
then A45: (ex kII9 being Nat st Q[ kII9 ]);
consider kII being Nat such that A46: (Q[ kII ] & (for k0 being Nat holds (Q[ k0 ] implies k0 >= kII))) from NAT_1:sch 5(A45);
consider pII such that A47: (for k holds ((k in ( dom t ) & k < kII) implies ( pII . ( t . k ) ) = oII)) and A48: (for k holds ((k in ( dom t ) & k >= kII) implies ( pII . ( t . k ) ) = oI)) by A29;
A49: kII > 1
proof
assume A50: kII <= 1;
consider a such that A51: a <> b by A3,CKB2:1,XXREAL_0:2;
A52: (for i holds b <_ ( pII . i ),a)
proof
let i;
consider k being set such that A53: k in ( dom t ) and A54: i = ( t . k ) by A25,FUNCT_1:def 3;
reconsider k as Nat by A53;
k >= 1 by A53,FINSEQ_3:25;
then ( pII . i ) = oI by A48,A50,A53,A54,XXREAL_0:2;
hence thesis by A27,A51;
end;
A55: a <_ ( f . pII ),b by A46,A47,A48,A51;
b <_ ( f . pII ),a by A1,A52;
hence contradiction by A55,CKB17:1;
end;
then reconsider kI = ( kII - 1 ) as Nat by NAT_1:20;
reconsider kI as (Element of ( NAT )) by ORDINAL1:def 12;
A56: kII = ( kI + 1 );
kI > ( 1 - 1 ) by A49,XREAL_1:9;
then A57: kI >= ( ( 0 ) + 1 ) by INT_1:7;
kII <= kII9 by A40,A46;
then kI <= ( kII9 - 1 ) by XREAL_1:9;
then A58: kI in ( dom t ) by A57,FINSEQ_3:25;
then reconsider nb = ( t . kI ) as (Element of N) by PARTFUN1:4;
A59: ( kI + ( 0 ) ) < kII by A56,XREAL_1:8;
then consider pI such that A60: (for k holds ((k in ( dom t ) & k < kI) implies ( pI . ( t . k ) ) = oII)) and A61: (for k holds ((k in ( dom t ) & k >= kI) implies ( pI . ( t . k ) ) = oI)) and A62: (not (for a holds (a <> b implies a <_ ( f . pI ),b))) by A46;
take nb;
take pI;
take pII;
thus (for i holds (i <> nb implies ( pI . i ) = ( pII . i )))
proof
let i;
assume A63: i <> nb;
consider k being set such that A64: k in ( dom t ) and A65: i = ( t . k ) by A25,FUNCT_1:def 3;
reconsider k as Nat by A64;
per cases  by A63,A65,XXREAL_0:1;
suppose k < kI;

then (( k + ( 0 ) ) < kII & ( pI . i ) = oII) by A56,A60,A64,A65,XREAL_1:8;
hence thesis by A47,A64,A65;
end;
suppose k > kI;

then (k >= kII & ( pI . i ) = oI) by A56,A61,A64,A65,INT_1:7;
hence thesis by A48,A64,A65;
end;
end;

thus A66: (for i holds extreme[ ( pI . i ),b ])
proof
let i;
(ex k being set st (k in ( dom t ) & i = ( t . k ))) by A25,FUNCT_1:def 3;
then (( pI . i ) = oII or ( pI . i ) = oI) by A60,A61;
hence thesis by A27,A28;
end;

thus (for i holds extreme[ ( pII . i ),b ])
proof
let i;
(ex k being set st (k in ( dom t ) & i = ( t . k ))) by A25,FUNCT_1:def 3;
then (( pII . i ) = oII or ( pII . i ) = oI) by A47,A48;
hence thesis by A27,A28;
end;

( pI . nb ) = oI by A58,A61;
hence (for a holds (a <> b implies b <_ ( pI . nb ),a)) by A27;
( pII . nb ) = oII by A47,A58,A59;
hence (for a holds (a <> b implies a <_ ( pII . nb ),b)) by A28;
thus (for a holds (a <> b implies b <_ ( f . pI ),a)) by A4,A62,A66;
thus thesis by A46,A47,A48;
end;
A67: (for b holds (ex nb st (ex pI st (ex pII st (((((for i holds (i <> nb implies ( pI . i ) = ( pII . i ))) & (for i holds extreme[ ( pI . i ),b ])) & (for a holds (a <> b implies b <_ ( f . pI ),a))) & (for a holds (a <> b implies a <_ ( f . pII ),b))) & (for p holds (for a holds (for c holds (((a <> b & c <> b) & a <_ ( p . nb ),c) implies a <_ ( f . p ),c)))))))))
proof
let b;
consider nb,pI,pII such that A68: (for i holds (i <> nb implies ( pI . i ) = ( pII . i ))) and A69: (for i holds extreme[ ( pI . i ),b ]) and A70: (for i holds extreme[ ( pII . i ),b ]) and A71: (for a holds (a <> b implies b <_ ( pI . nb ),a)) and A72: (for a holds (a <> b implies a <_ ( pII . nb ),b)) and A73: ((for a holds (a <> b implies b <_ ( f . pI ),a)) & (for a holds (a <> b implies a <_ ( f . pII ),b))) by A24;
take nb;
take pI;
take pII;
thus ((((for i holds (i <> nb implies ( pI . i ) = ( pII . i ))) & (for i holds extreme[ ( pI . i ),b ])) & (for a holds (a <> b implies b <_ ( f . pI ),a))) & (for a holds (a <> b implies a <_ ( f . pII ),b))) by A68,A69,A73;
let p;
let a;
let c;
assume that
A74: a <> b
and
A75: c <> b
and
A76: a <_ ( p . nb ),c;
A77: a <> c by A76,CKB16:1;
defpred P[ (Element of N),(Element of ( LinPreorders A )) ]
 means
((((a <_ ( p . $1 ),c iff a <_ $2,c) & (c <_ ( p . $1 ),a iff c <_ $2,a)) & ($1 = nb implies (a <_ $2,b & b <_ $2,c))) & ($1 <> nb implies (((for d holds (d <> b implies b <_ ( pII . $1 ),d)) implies (b <_ $2,a & b <_ $2,c)) & ((for d holds (d <> b implies d <_ ( pII . $1 ),b)) implies (a <_ $2,b & c <_ $2,b)))));
A78: (for i holds (ex o st P[ i,o ]))
proof
let i;
per cases ;
suppose A79: i = nb;

consider o such that A80: (a <_ o,b & b <_ o,c) by A74,A75,A77,CKB20:1;
take o;
thus thesis by A76,A79,A80,CKB17:1,CKB18:1;
end;
suppose A81: i <> nb;

per cases  by A70;
suppose (for d holds (d <> b implies b <_ ( pII . i ),d));

then b <_ ( pII . i ),a by A74;
then A82: (not a <_ ( pII . i ),b) by CKB17:1;
consider o such that A83: (((b <_ o,a & b <_ o,c) & (a <_ o,c iff a <_ ( p . i ),c)) & (c <_ o,a iff c <_ ( p . i ),a)) by A74,A75,CKB23:1;
take o;
thus thesis by A74,A81,A82,A83;
end;
suppose (for d holds (d <> b implies d <_ ( pII . i ),b));

then a <_ ( pII . i ),b by A74;
then A84: (not b <_ ( pII . i ),a) by CKB17:1;
consider o such that A85: (((a <_ o,b & c <_ o,b) & (a <_ o,c iff a <_ ( p . i ),c)) & (c <_ o,a iff c <_ ( p . i ),a)) by A74,A75,CKB24:1;
take o;
thus thesis by A74,A81,A84,A85;
end;
end;
end;
consider pIII being (Function of N,( LinPreorders A )) such that A86: (for i holds P[ i,( pIII . i ) ]) from FUNCT_2:sch 3(A78);
reconsider pIII as (Element of ( Funcs (N,( LinPreorders A )) )) by FUNCT_2:8;
(for i holds ((a <_ ( pII . i ),b iff a <_ ( pIII . i ),b) & (b <_ ( pII . i ),a iff b <_ ( pIII . i ),a)))
proof
let i;
per cases ;
suppose i = nb;

then (a <_ ( pII . i ),b & a <_ ( pIII . i ),b) by A72,A74,A86;
hence thesis by CKB17:1;
end;
suppose A87: i <> nb;

per cases  by A70;
suppose (for d holds (d <> b implies b <_ ( pII . i ),d));

then (b <_ ( pII . i ),a & b <_ ( pIII . i ),a) by A74,A86,A87;
hence thesis by CKB17:1;
end;
suppose (for d holds (d <> b implies d <_ ( pII . i ),b));

then (a <_ ( pII . i ),b & a <_ ( pIII . i ),b) by A74,A86,A87;
hence thesis by CKB17:1;
end;
end;
end;
then A88: (a <_ ( f . pII ),b iff a <_ ( f . pIII ),b) by A2;
(for i holds ((b <_ ( pI . i ),c iff b <_ ( pIII . i ),c) & (c <_ ( pI . i ),b iff c <_ ( pIII . i ),b)))
proof
let i;
per cases ;
suppose i = nb;

then (b <_ ( pI . i ),c & b <_ ( pIII . i ),c) by A71,A75,A86;
hence thesis by CKB17:1;
end;
suppose A89: i <> nb;

per cases  by A70;
suppose A90: (for d holds (d <> b implies b <_ ( pII . i ),d));

then b <_ ( pII . i ),c by A75;
then A91: b <_ ( pI . i ),c by A68,A89;
b <_ ( pIII . i ),c by A86,A89,A90;
hence thesis by A91,CKB17:1;
end;
suppose A92: (for d holds (d <> b implies d <_ ( pII . i ),b));

then c <_ ( pII . i ),b by A75;
then A93: c <_ ( pI . i ),b by A68,A89;
c <_ ( pIII . i ),b by A86,A89,A92;
hence thesis by A93,CKB17:1;
end;
end;
end;
then (b <_ ( f . pI ),c iff b <_ ( f . pIII ),c) by A2;
then a <_ ( f . pIII ),c by A73,A74,A88,CKB18:1;
hence thesis by A2,A86;
end;
set b = the (Element of A);
consider nb,pI,pII such that A94: (for i holds (i <> nb implies ( pI . i ) = ( pII . i ))) and A95: (for i holds extreme[ ( pI . i ),b ]) and A96: ((for a holds (a <> b implies b <_ ( f . pI ),a)) & (for a holds (a <> b implies a <_ ( f . pII ),b))) and A97: (for p holds (for a holds (for c holds (((a <> b & c <> b) & a <_ ( p . nb ),c) implies a <_ ( f . p ),c)))) by A67;
take nb;
let p;
let a;
let a9;
assume A98: a <_ ( p . nb ),a9;
then A99: a <> a9 by CKB17:1;
per cases ;
suppose (a <> b & a9 <> b);

hence thesis by A97,A98;
end;
suppose A100: (a = b or a9 = b);

consider c such that A101: (c <> a & c <> a9) by A3,CKB3:1;
consider nc,pI9,pII9 such that (for i holds (i <> nc implies ( pI9 . i ) = ( pII9 . i ))) and (for i holds extreme[ ( pI9 . i ),c ]) and (for a holds (a <> c implies c <_ ( f . pI9 ),a)) and (for a holds (a <> c implies a <_ ( f . pII9 ),c)) and A102: (for p holds (for a holds (for a9 holds (((a <> c & a9 <> c) & a <_ ( p . nc ),a9) implies a <_ ( f . p ),a9)))) by A67;
nc = nb
proof
per cases  by A100;
suppose A103: a = b;

assume A104: nc <> nb;
(b <_ ( pI . nc ),a9 or a9 <_ ( pI . nc ),b) by A95,A99,A103;
then ((b <_ ( pII . nc ),a9 & a9 <_ ( f . pII ),b) or (a9 <_ ( pI . nc ),b & b <_ ( f . pI ),a9)) by A94,A96,A99,A103,A104;
then ((b <_ ( pII . nc ),a9 & a9 <=_ ( f . pII ),b) or (a9 <_ ( pI . nc ),b & b <=_ ( f . pI ),a9)) by CKB17:1;
hence contradiction by A101,A102,A103;
end;
suppose A105: a9 = b;

assume A106: nc <> nb;
(b <_ ( pI . nc ),a or a <_ ( pI . nc ),b) by A95,A99,A105;
then ((b <_ ( pII . nc ),a & a <_ ( f . pII ),b) or (a <_ ( pI . nc ),b & b <_ ( f . pI ),a)) by A94,A96,A99,A105,A106;
then ((b <_ ( pII . nc ),a & a <=_ ( f . pII ),b) or (a <_ ( pI . nc ),b & b <=_ ( f . pI ),a)) by CKB17:1;
hence contradiction by A101,A102,A105;
end;
end;
hence thesis by A98,A101,A102;
end;
end;
