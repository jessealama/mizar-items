environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FUNCT_1,FINSEQ_1,TARSKI,RELAT_1,NAT_1,ORDINAL4,ARYTM_3,FINSET_1,CARD_1,ARYTM_1,XXREAL_0,ORDINAL1,TREES_1,AMISTD_3,FINSEQ_2;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,CARD_1,XCMPLX_0,NAT_1,NUMBERS,ORDINAL1,RELAT_1,FUNCT_1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,XXREAL_0,CKB1,CKB2,CKB6;
definitions TARSKI,FINSET_1,FUNCT_1,WELLORD2,XBOOLE_0,FUNCOP_1,FINSEQ_2,CKB2;
theorems TARSKI,NAT_1,FINSEQ_1,FINSET_1,FUNCT_1,CARD_1,RELAT_1,GRFUNC_1,CARD_2,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ORDINAL1,ENUMSET1,FINSEQ_2,FINSEQ_3,FUNCOP_1,FUNCT_2,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
schemes NAT_1,CLASSES1,XBOOLE_0,FUNCT_2;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,CARD_1,RELSET_1,FINSEQ_2,FUNCOP_1;
constructors ENUMSET1,WELLORD2,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,FINSEQ_2,FUNCOP_1,FUNCT_2,RELSET_1;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve X for set;
reserve x for set;
reserve n for (Element of ( NAT ));
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
definition
let p being FinSequence;
func ProperPrefixes p -> set means 
:Def4: (x in it iff (ex q being FinSequence st (x = q & q is_a_proper_prefix_of p)));
existence
proof
set E = ( rng p );
defpred X[ set ]
 means
(ex q being FinSequence st ($1 = q & q is_a_proper_prefix_of p));
consider X such that A1: (x in X iff (x in ( E * ) & X[ x ])) from XBOOLE_0:sch 1;
take X;
let x;
thus (x in X implies (ex q being FinSequence st (x = q & q is_a_proper_prefix_of p))) by A1;
given q being FinSequence such that
A2: x = q
and
A3: q is_a_proper_prefix_of p;

q is_a_prefix_of p by A3,XBOOLE_0:def 8;
then (ex n st q = ( p | ( Seg n ) )) by CKB2:def 1;
then ( rng q ) c= E by RELAT_1:70;
then reconsider q as (FinSequence of E) by FINSEQ_1:def 4;
q in ( E * ) by FINSEQ_1:def 11;
hence thesis by A1,A2,A3;
end;
uniqueness
proof
let S1 being set;
let S2 being set;
assume that
A5: (x in S1 iff (ex q being FinSequence st (x = q & q is_a_proper_prefix_of p)))
and
A6: (x in S2 iff (ex q being FinSequence st (x = q & q is_a_proper_prefix_of p)));
defpred X[ set ]
 means
(ex q being FinSequence st ($1 = q & q is_a_proper_prefix_of p));
A7: (x in S1 iff X[ x ]) by A5;
A8: (x in S2 iff X[ x ]) by A6;
thus thesis from XBOOLE_0:sch 2(A7,A8);
end;
end;
