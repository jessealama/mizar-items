environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FUNCT_1,FINSEQ_1,TARSKI,RELAT_1,NAT_1,ORDINAL4,ARYTM_3,FINSET_1,CARD_1,ARYTM_1,XXREAL_0,ORDINAL1,TREES_1,AMISTD_3,FINSEQ_2;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,CARD_1,XCMPLX_0,NAT_1,NUMBERS,ORDINAL1,RELAT_1,FUNCT_1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,XXREAL_0,CKB1,CKB2,CKB6,CKB15,CKB24,CKB27,CKB29,CKB41,CKB46,CKB47,CKB50,CKB51,CKB52,CKB59,CKB61,CKB64;
definitions TARSKI,FINSET_1,FUNCT_1,WELLORD2,XBOOLE_0,FUNCOP_1,FINSEQ_2,CKB2,CKB15,CKB24,CKB41,CKB46,CKB47,CKB50,CKB51,CKB52,CKB59,CKB64;
theorems TARSKI,NAT_1,FINSEQ_1,FINSET_1,FUNCT_1,CARD_1,RELAT_1,GRFUNC_1,CARD_2,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ORDINAL1,ENUMSET1,FINSEQ_2,FINSEQ_3,FUNCOP_1,FUNCT_2,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB28,CKB30,CKB31,CKB32,CKB33,CKB36,CKB37,CKB39,CKB40,CKB41,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB56,CKB58,CKB59,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67;
schemes NAT_1,CLASSES1,XBOOLE_0,FUNCT_2;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,CARD_1,RELSET_1,FINSEQ_2,FUNCOP_1,CKB25,CKB26,CKB34,CKB35,CKB38,CKB42,CKB49,CKB55,CKB57,CKB60,CKB68;
constructors ENUMSET1,WELLORD2,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,FINSEQ_2,FUNCOP_1,FUNCT_2,RELSET_1,CKB15,CKB24,CKB29,CKB41,CKB46,CKB47,CKB50,CKB51,CKB52,CKB59,CKB64;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve p for (FinSequence of ( NAT ));
reserve p1 for FinSequence;
reserve p2 for FinSequence;
reserve T for Tree;
definition
let T being  finite Tree;
func height T -> (Element of ( NAT )) means 
:Def15: ((ex p st (p in T & ( len p ) = it)) & (for p holds (p in T implies ( len p ) <= it)));
existence
proof
consider n being Nat such that A1: T,( Seg n ) are_equipotent  by FINSEQ_1:56;
defpred X[ Nat ]
 means
(for p holds (p in T implies ( len p ) <= $1));
A2: (ex n being Nat st X[ n ])
proof
now
given p such that
A3: p in T
and
A4: (not ( len p ) <= n);

A5: ( ProperPrefixes p ) c= T by A3,CKB24:def 1;
A6: ( ProperPrefixes p ),( dom p ) are_equipotent  by CKB56:1;
A7: ( card ( ProperPrefixes p ) ) c= ( card T ) by A5,CARD_1:11;
A8: ( card ( ProperPrefixes p ) ) = ( card ( dom p ) ) by A6,CARD_1:5;
A9: (( card T ) = ( card ( Seg n ) ) & ( dom p ) = ( Seg ( len p ) )) by A1,CARD_1:5,FINSEQ_1:def 3;
( Seg n ) c= ( Seg ( len p ) ) by A4,FINSEQ_1:5;
then A10: ( card ( Seg n ) ) c= ( card ( Seg ( len p ) ) ) by CARD_1:11;
(( card ( Seg n ) ) = ( card n ) & ( card ( Seg ( len p ) ) ) = ( card ( len p ) )) by FINSEQ_1:55;
then ( card n ) = ( card ( len p ) ) by A7,A8,A9,A10,XBOOLE_0:def 10;
hence contradiction by A4,CARD_1:40;
end;
then consider n being Nat such that A11: X[ n ];
reconsider n as (Element of ( NAT )) by ORDINAL1:def 12;
take n;
thus thesis by A11;
end;
consider n being Nat such that A12: X[ n ] and A13: (for m being Nat holds (X[ m ] implies n <= m)) from NAT_1:sch 5(A2);
set x = the (Element of T);
reconsider n as (Element of ( NAT )) by ORDINAL1:def 12;
take n;
thus (ex p st (p in T & ( len p ) = n))
proof
assume A14: (for p holds (p in T implies ( len p ) <> n));
reconsider x as (FinSequence of ( NAT ));
( len x ) <= n by A12;
then ( len x ) < n by A14,XXREAL_0:1;
then consider k being Nat such that A15: n = ( k + 1 ) by NAT_1:6;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
(for p holds (p in T implies ( len p ) <= k))
proof
let p;
assume A16: p in T;
then ( len p ) <= n by A12;
then ( len p ) < ( k + 1 ) by A14,A15,A16,XXREAL_0:1;
hence thesis by NAT_1:13;
end;
then n <= k by A13;
hence contradiction by A15,NAT_1:13;
end;

let p;
assume p in T;
hence thesis by A12;
end;
uniqueness
proof
let l1 being (Element of ( NAT ));
let l2 being (Element of ( NAT ));
given p1 being (FinSequence of ( NAT )) such that
A17: (p1 in T & ( len p1 ) = l1);

assume A18: (for p holds (p in T implies ( len p ) <= l1));
given p2 being (FinSequence of ( NAT )) such that
A19: (p2 in T & ( len p2 ) = l2);

assume (for p holds (p in T implies ( len p ) <= l2));
then A20: l1 <= l2 by A17;
l2 <= l1 by A18,A19;
hence thesis by A20,XXREAL_0:1;
end;
end;
