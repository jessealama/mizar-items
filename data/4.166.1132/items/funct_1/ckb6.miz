environ
vocabularies RELAT_1,XBOOLE_0,ZFMISC_1,SUBSET_1,TARSKI,SETFAM_1,FUNCT_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,SETFAM_1,CKB1,CKB4;
definitions TARSKI,XBOOLE_0,RELAT_1,SETFAM_1,ZFMISC_1,CKB1;
theorems TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,SUBSET_1,CKB1;
schemes TARSKI,XBOOLE_0;
registrations XBOOLE_0,RELAT_1,ZFMISC_1,CKB2,CKB3,CKB5;
constructors SETFAM_1,RELAT_1,CKB1;
requirements SUBSET,BOOLE;
begin
reserve Y for set;
reserve p for set;
reserve x for set;
reserve x1 for set;
reserve x2 for set;
reserve y for set;
reserve y1 for set;
reserve y2 for set;
reserve z1 for set;
reserve z2 for set;
reserve f for Function;
scheme GraphFunc { A() -> set,P[set,set] } : (ex f st (for x holds (for y holds ([ x,y ] in f iff (x in A() & P[ x,y ])))))
provided
A1: (for x holds (for y1 holds (for y2 holds ((P[ x,y1 ] & P[ x,y2 ]) implies y1 = y2))))
proof
consider Y such that A2: (for y holds (y in Y iff (ex x st (x in A() & P[ x,y ])))) from TARSKI:sch 1(A1);
defpred R[ set ]
 means
(ex x st (ex y st ([ x,y ] = $1 & P[ x,y ])));
consider F being set such that A3: (p in F iff (p in [: A(),Y :] & R[ p ])) from XBOOLE_0:sch 1;
now
thus (p in F implies (ex x st (ex y st [ x,y ] = p)))
proof
(p in F implies (ex x st (ex y st ([ x,y ] = p & P[ x,y ])))) by A3;
hence thesis;
end;

let x;
let y1;
let y2;
assume [ x,y1 ] in F;
then consider x1,z1 such that A4: [ x1,z1 ] = [ x,y1 ] and A5: P[ x1,z1 ] by A3;
A6: (x = x1 & z1 = y1) by A4,ZFMISC_1:27;
assume [ x,y2 ] in F;
then consider x2,z2 such that A7: [ x2,z2 ] = [ x,y2 ] and A8: P[ x2,z2 ] by A3;
(x = x2 & z2 = y2) by A7,ZFMISC_1:27;
hence y1 = y2 by A1,A5,A8,A6;
end;
then reconsider f = F as Function by CKB1:def 1,RELAT_1:def 1;
take f;
let x;
let y;
thus ([ x,y ] in f implies (x in A() & P[ x,y ]))
proof
assume A9: [ x,y ] in f;
then consider x1,y1 such that A10: [ x1,y1 ] = [ x,y ] and A11: P[ x1,y1 ] by A3;
[ x,y ] in [: A(),Y :] by A3,A9;
hence x in A() by ZFMISC_1:87;
x1 = x by A10,ZFMISC_1:27;
hence thesis by A10,A11,ZFMISC_1:27;
end;

assume that
A12: x in A()
and
A13: P[ x,y ];
y in Y by A2,A12,A13;
then [ x,y ] in [: A(),Y :] by A12,ZFMISC_1:87;
hence thesis by A3,A13;
end;
