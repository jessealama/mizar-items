environ
vocabularies XBOOLE_0,SUBSET_1,FUNCT_2,FUNCT_1,ZFMISC_1,FUNCT_5,RELAT_1,TARSKI,CAT_1,FUNCOP_1,STRUCT_0,GRAPH_1,FUNCT_3,REALSET1,PARTFUN1,FUNCT_4,MCART_1,CAT_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,DOMAIN_1,RELAT_1,FUNCT_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCT_3,FUNCT_4,FUNCT_5,REALSET1,FUNCOP_1,STRUCT_0,GRAPH_1,CAT_1,CKB1,CKB4,CKB5,CKB8,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB26,CKB31;
definitions TARSKI,CAT_1,REALSET1,FUNCOP_1,BINOP_1,GRAPH_1,CKB8,CKB10,CKB12,CKB16,CKB26,CKB31;
theorems TARSKI,ZFMISC_1,MCART_1,DOMAIN_1,FUNCT_1,FUNCT_2,FUNCT_3,FUNCT_4,FUNCT_5,PARTFUN1,FUNCOP_1,CAT_1,GRFUNC_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34;
schemes XBOOLE_0,BINOP_1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,REALSET1,CAT_1,STRUCT_0,RELAT_1,CKB11,CKB17,CKB35;
constructors PARTFUN1,BINOP_1,FUNCT_3,FUNCT_4,FUNCT_5,REALSET1,CAT_1,FUNCOP_1,RELSET_1,CKB1,CKB4,CKB5,CKB8,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB26,CKB31;
requirements SUBSET,BOOLE;
begin
reserve C for Category;
theorem
(for O being non empty (Subset of (the carrier of C)) holds (for M being non empty set holds (for d,c being (Function of M,O) holds (for p being (PartFunc of [: M,M :],M) holds (for i being (Function of O,M) holds (((((M = ( union { ( Hom (a,b) ) where a is (Object of C),b is (Object of C): (a in O & b in O) } ) & d = ( (the Source of C) | M )) & c = ( (the Target of C) | M )) & p = ( (the Comp of C) || M )) & i = ( (the Id of C) | O )) implies CatStr (# O,M,d,c,p,i #) is_full_subcategory_of C))))))
proof
let O being non empty (Subset of (the carrier of C));
let M being non empty set;
let d being (Function of M,O),c being (Function of M,O);
let p being (PartFunc of [: M,M :],M);
let i being (Function of O,M);
set H = { ( Hom (a,b) ) where a is (Object of C),b is (Object of C): (a in O & b in O) };
assume that
A1: M = ( union H )
and
A2: d = ( (the Source of C) | M )
and
A3: c = ( (the Target of C) | M )
and
A4: p = ( (the Comp of C) || M )
and
A5: i = ( (the Id of C) | O );
set B = CatStr (# O,M,d,c,p,i #);
A6:now
let f being (Morphism of B);
consider X being set such that A7: f in X and A8: X in H by A1,TARSKI:def 4;
(ex a,b being (Object of C) st ((X = ( Hom (a,b) ) & a in O) & b in O)) by A8;
hence f is (Morphism of C) by A7;
end;
A9: (for f,g being (Element of M) holds ([ g,f ] in ( dom p ) iff ( d . g ) = ( c . f )))
proof
let f being (Element of M),g being (Element of M);
A10: (g is (Morphism of C) & f is (Morphism of C)) by A6;
A11: (( d . g ) = ( (the Source of C) . g ) & ( c . f ) = ( (the Target of C) . f )) by A2,A3,FUNCT_1:49;
thus ([ g,f ] in ( dom p ) implies ( d . g ) = ( c . f ))
proof
assume [ g,f ] in ( dom p );
then [ g,f ] in ( ( dom (the Comp of C) ) /\ [: M,M :] ) by A4,RELAT_1:61;
then [ g,f ] in ( dom (the Comp of C) ) by XBOOLE_0:def 4;
hence thesis by A10,A11,CAT_1:def 5;
end;

assume ( d . g ) = ( c . f );
then [ g,f ] in ( dom (the Comp of C) ) by A10,A11,CAT_1:def 5;
then [ g,f ] in ( ( dom (the Comp of C) ) /\ [: M,M :] ) by XBOOLE_0:def 4;
hence thesis by A4,RELAT_1:61;
end;
A12: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies ( p . [ g,f ] ) = ( (the Comp of C) . [ g,f ] )))
proof
let f being (Element of M),g being (Element of M);
assume ( d . g ) = ( c . f );
then [ g,f ] in ( dom p ) by A9;
hence thesis by A4,FUNCT_1:47;
end;
A13: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies ( p . [ g,f ] ) is (Element of M)))
proof
let f being (Element of M),g being (Element of M);
A14: (f is (Morphism of C) & g is (Morphism of C)) by A6;
assume A15: ( d . g ) = ( c . f );
then [ g,f ] in ( dom p ) by A9;
then ( p . [ g,f ] ) is (Element of M) by PARTFUN1:4;
then reconsider h = ( p . [ g,f ] ) as (Morphism of C) by A6;
A16: h = ( (the Comp of C) . (g,f) ) by A12,A15;
set a = ( dom h );
set b = ( cod h );
A17: (( d . g ) = ( (the Source of C) . g ) & ( c . f ) = ( (the Target of C) . f )) by A2,A3,FUNCT_1:49;
( c . g ) = ( (the Target of C) . g ) by A3,FUNCT_1:49;
then A18: ( (the Target of C) . h ) = ( c . g ) by A15,A14,A16,A17,CAT_1:def 5;
( d . f ) = ( (the Source of C) . f ) by A2,FUNCT_1:49;
then ( (the Source of C) . h ) = ( d . f ) by A15,A14,A16,A17,CAT_1:def 5;
then (h in ( Hom (a,b) ) & ( Hom (a,b) ) in H) by A18;
hence thesis by A1,TARSKI:def 4;
end;
A19: (for a,b being (Object of B) holds (for a9,b9 being (Object of C) holds ((a = a9 & b = b9) implies ( Hom (a,b) ) = ( Hom (a9,b9) ))))
proof
let a being (Object of B),b being (Object of B);
let a9 being (Object of C),b9 being (Object of C);
assume that
A20: (a = a9 & b = b9);
now
let x being set;
thus (x in ( Hom (a,b) ) implies x in ( Hom (a9,b9) ))
proof
assume A21: x in ( Hom (a,b) );
then reconsider f = x as (Morphism of B);
reconsider f9 = f as (Morphism of C) by A6;
( cod f ) = ( cod f9 ) by A3,FUNCT_1:49;
then A22: b = ( cod f9 ) by A21,CAT_1:1;
( dom f ) = ( dom f9 ) by A2,FUNCT_1:49;
then a = ( dom f9 ) by A21,CAT_1:1;
hence thesis by A20,A22;
end;

assume A23: x in ( Hom (a9,b9) );
then reconsider f9 = x as (Morphism of C);
( Hom (a9,b9) ) in H by A20;
then reconsider f = f9 as (Morphism of B) by A1,A23,TARSKI:def 4;
( cod f ) = ( cod f9 ) by A3,FUNCT_1:49;
then A24: ( cod f ) = b9 by A23,CAT_1:1;
( dom f ) = ( dom f9 ) by A2,FUNCT_1:49;
then ( dom f ) = a9 by A23,CAT_1:1;
hence x in ( Hom (a,b) ) by A20,A24;
end;
hence thesis by TARSKI:1;
end;
thus B is (Subcategory of C)
proof
now
thus (for f,g being (Element of M) holds ([ g,f ] in ( dom p ) iff ( d . g ) = ( c . f ))) by A9;
thus A25: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies (( d . ( p . (g,f) ) ) = ( d . f ) & ( c . ( p . (g,f) ) ) = ( c . g ))))
proof
let f being (Element of M),g being (Element of M);
A26: (g is (Morphism of C) & f is (Morphism of C)) by A6;
A27: (( d . g ) = ( (the Source of C) . g ) & ( c . f ) = ( (the Target of C) . f )) by A2,A3,FUNCT_1:49;
assume A28: ( d . g ) = ( c . f );
then A29: ( p . [ g,f ] ) is (Element of M) by A13;
hence ( d . ( p . (g,f) ) ) = ( (the Source of C) . ( p . [ g,f ] ) ) by A2,FUNCT_1:49
.= ( (the Source of C) . ( (the Comp of C) . (g,f) ) ) by A12,A28
.= ( (the Source of C) . f ) by A28,A26,A27,CAT_1:def 5
.= ( d . f ) by A2,FUNCT_1:49;
thus ( c . ( p . (g,f) ) ) = ( (the Target of C) . ( p . [ g,f ] ) ) by A3,A29,FUNCT_1:49
.= ( (the Target of C) . ( (the Comp of C) . (g,f) ) ) by A12,A28
.= ( (the Target of C) . g ) by A28,A26,A27,CAT_1:def 5
.= ( c . g ) by A3,FUNCT_1:49;
end;

thus (for f,g,h being (Element of M) holds ((( d . h ) = ( c . g ) & ( d . g ) = ( c . f )) implies ( p . (h,( p . (g,f) )) ) = ( p . (( p . (h,g) ),f) )))
proof
let f being (Element of M),g being (Element of M),h being (Element of M);
assume that
A30: ( d . h ) = ( c . g )
and
A31: ( d . g ) = ( c . f );
A32: (( d . ( p . (h,g) ) ) = ( d . g ) & ( p . (h,g) ) is (Element of M)) by A13,A25,A30;
A33: (( c . g ) = ( (the Target of C) . g ) & ( d . g ) = ( (the Source of C) . g )) by A2,A3,FUNCT_1:49;
A34: ( c . f ) = ( (the Target of C) . f ) by A3,FUNCT_1:49;
A35: (f is (Morphism of C) & ( d . h ) = ( (the Source of C) . h )) by A2,A6,FUNCT_1:49;
A36: (h is (Morphism of C) & g is (Morphism of C)) by A6;
(( c . ( p . (g,f) ) ) = ( c . g ) & ( p . [ g,f ] ) is (Element of M)) by A13,A25,A31;
hence ( p . (h,( p . (g,f) )) ) = ( (the Comp of C) . [ h,( p . [ g,f ] ) ] ) by A12,A30
.= ( (the Comp of C) . (h,( (the Comp of C) . (g,f) )) ) by A12,A31
.= ( (the Comp of C) . (( (the Comp of C) . (h,g) ),f) ) by A30,A31,A36,A35,A33,A34,CAT_1:def 5
.= ( (the Comp of C) . [ ( p . [ h,g ] ),f ] ) by A12,A30
.= ( p . (( p . (h,g) ),f) ) by A12,A31,A32;
end;

let b being (Element of O);
A37: ( i . b ) = ( (the Id of C) . b ) by A5,FUNCT_1:49;
(( d . ( i . b ) ) = ( (the Source of C) . ( i . b ) ) & ( c . ( i . b ) ) = ( (the Target of C) . ( i . b ) )) by A2,A3,FUNCT_1:49;
hence A38: (( d . ( i . b ) ) = b & ( c . ( i . b ) ) = b) by A37,CAT_1:def 5;
thus (for f being (Element of M) holds (( c . f ) = b implies ( p . (( i . b ),f) ) = f))
proof
let f being (Element of M);
assume that
A39: ( c . f ) = b;
A40: (f is (Morphism of C) & ( c . f ) = ( (the Target of C) . f )) by A3,A6,FUNCT_1:49;
thus ( p . (( i . b ),f) ) = ( (the Comp of C) . (( i . b ),f) ) by A12,A38,A39
.= f by A37,A39,A40,CAT_1:def 5;
end;

let g being (Element of M);
A41: (g is (Morphism of C) & ( d . g ) = ( (the Source of C) . g )) by A2,A6,FUNCT_1:49;
assume A42: ( d . g ) = b;
hence ( p . (g,( i . b )) ) = ( (the Comp of C) . (g,( i . b )) ) by A12,A38
.= g by A37,A42,A41,CAT_1:def 5;
end;
then reconsider B as Category by CAT_1:def 5;
A43: (for a being (Object of B) holds (for a9 being (Object of C) holds (a = a9 implies ( id a ) = ( id a9 )))) by A5,FUNCT_1:49;
((for a,b being (Object of B) holds (for a9,b9 being (Object of C) holds ((a = a9 & b = b9) implies ( Hom (a,b) ) c= ( Hom (a9,b9) )))) & (the Comp of B) c= (the Comp of C)) by A4,A19,RELAT_1:59;
hence thesis by A43,CKB16:def 1;
end;

thus thesis by A19;
end;
