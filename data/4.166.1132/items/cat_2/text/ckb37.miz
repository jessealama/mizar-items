environ
vocabularies XBOOLE_0,SUBSET_1,FUNCT_2,FUNCT_1,ZFMISC_1,FUNCT_5,RELAT_1,TARSKI,CAT_1,FUNCOP_1,STRUCT_0,GRAPH_1,FUNCT_3,REALSET1,PARTFUN1,FUNCT_4,MCART_1,CAT_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,DOMAIN_1,RELAT_1,FUNCT_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCT_3,FUNCT_4,FUNCT_5,REALSET1,FUNCOP_1,STRUCT_0,GRAPH_1,CAT_1,CKB1,CKB4,CKB5,CKB8,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB26,CKB31;
definitions TARSKI,CAT_1,REALSET1,FUNCOP_1,BINOP_1,GRAPH_1,CKB8,CKB10,CKB12,CKB16,CKB26,CKB31;
theorems TARSKI,ZFMISC_1,MCART_1,DOMAIN_1,FUNCT_1,FUNCT_2,FUNCT_3,FUNCT_4,FUNCT_5,PARTFUN1,FUNCOP_1,CAT_1,GRFUNC_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36;
schemes XBOOLE_0,BINOP_1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,REALSET1,CAT_1,STRUCT_0,RELAT_1,CKB11,CKB17,CKB35;
constructors PARTFUN1,BINOP_1,FUNCT_3,FUNCT_4,FUNCT_5,REALSET1,CAT_1,FUNCOP_1,RELSET_1,CKB1,CKB4,CKB5,CKB8,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB26,CKB31;
requirements SUBSET,BOOLE;
begin
reserve C for Category;
theorem
(for O being non empty (Subset of (the carrier of C)) holds (for M being non empty set holds (for d,c being (Function of M,O) holds (for p being (PartFunc of [: M,M :],M) holds (for i being (Function of O,M) holds (CatStr (# O,M,d,c,p,i #) is_full_subcategory_of C implies ((((M = ( union { ( Hom (a,b) ) where a is (Object of C),b is (Object of C): (a in O & b in O) } ) & d = ( (the Source of C) | M )) & c = ( (the Target of C) | M )) & p = ( (the Comp of C) || M )) & i = ( (the Id of C) | O ))))))))
proof
let O being non empty (Subset of (the carrier of C));
let M being non empty set;
let d being (Function of M,O),c being (Function of M,O);
let p being (PartFunc of [: M,M :],M);
let i being (Function of O,M);
set H = { ( Hom (a,b) ) where a is (Object of C),b is (Object of C): (a in O & b in O) };
set B = CatStr (# O,M,d,c,p,i #);
assume that
A1: B is (Subcategory of C)
and
A2: (for a,b being (Object of B) holds (for a9,b9 being (Object of C) holds ((a = a9 & b = b9) implies ( Hom (a,b) ) = ( Hom (a9,b9) ))));
A3: (for f being (Morphism of B) holds (( d . f ) = ( (the Source of C) . f ) & ( c . f ) = ( (the Target of C) . f )))
proof
let f being (Morphism of B);
reconsider f9 = f as (Morphism of C) by A1,CKB20:1;
(( dom f ) = ( dom f9 ) & ( cod f ) = ( cod f9 )) by A1,CKB21:1;
hence thesis;
end;
now
let x being set;
thus (x in M implies x in ( union H ))
proof
assume x in M;
then reconsider f = x as (Morphism of B);
reconsider f9 = f as (Morphism of C) by A1,CKB20:1;
set a9 = ( dom f9 );
set b9 = ( cod f9 );
(( (the Source of B) . f ) = ( (the Source of C) . f9 ) & ( (the Target of B) . f ) = ( (the Target of C) . f9 )) by A3;
then (f in ( Hom (a9,b9) ) & ( Hom (a9,b9) ) in H);
hence thesis by TARSKI:def 4;
end;

assume x in ( union H );
then consider X being set such that A4: x in X and A5: X in H by TARSKI:def 4;
consider a9 being (Object of C),b9 being (Object of C) such that A6: X = ( Hom (a9,b9) ) and A7: (a9 in O & b9 in O) by A5;
reconsider a = a9,b = b9 as (Object of B) by A7;
( Hom (a,b) ) = ( Hom (a9,b9) ) by A2;
hence x in M by A4,A6;
end;
hence A8: M = ( union H ) by TARSKI:1;
then reconsider d9 = ( (the Source of C) | M ),c9 = ( (the Target of C) | M ) as (Function of M,O) by CKB34:1;
set p9 = ( (the Comp of C) || M );
now
let f being (Element of M);
( d . f ) = ( (the Source of C) . f ) by A3;
hence ( d . f ) = ( d9 . f ) by FUNCT_1:49;
end;
hence d = ( (the Source of C) | M ) by FUNCT_2:63;
now
let f being (Element of M);
( c . f ) = ( (the Target of C) . f ) by A3;
hence ( c . f ) = ( c9 . f ) by FUNCT_1:49;
end;
hence c = ( (the Target of C) | M ) by FUNCT_2:63;
now
A9: ( dom p ) c= [: M,M :] by RELAT_1:def 18;
A10: ( dom p9 ) = ( ( dom (the Comp of C) ) /\ [: M,M :] ) by RELAT_1:61;
(the Comp of B) c= (the Comp of C) by A1,CKB16:def 1;
then ( dom p ) c= ( dom (the Comp of C) ) by GRFUNC_1:2;
then A11: ( dom p ) c= ( dom p9 ) by A9,A10,XBOOLE_1:19;
( dom p9 ) c= ( dom p )
proof
let x being set;
assume A12: x in ( dom p9 );
then x in [: M,M :] by A10,XBOOLE_0:def 4;
then consider g being (Element of M),f being (Element of M) such that A13: x = [ g,f ] by DOMAIN_1:1;
reconsider f,g as (Morphism of B);
reconsider f9 = f,g9 = g as (Morphism of C) by A1,CKB20:1;
[ g,f ] in ( dom (the Comp of C) ) by A10,A12,A13,XBOOLE_0:def 4;
then A14: ( dom g9 ) = ( cod f9 ) by CAT_1:15;
(( cod f ) = ( cod f9 ) & ( dom g ) = ( dom g9 )) by A1,CKB21:1;
hence thesis by A1,A13,A14,CAT_1:15;
end;
hence ( dom p ) = ( dom p9 ) by A11,XBOOLE_0:def 10;
let x being set;
assume A15: x in ( dom p );
then consider g being (Element of M),f being (Element of M) such that A16: x = [ g,f ] by A9,DOMAIN_1:1;
reconsider f,g as (Morphism of B);
A17: ( dom g ) = ( cod f ) by A1,A15,A16,CAT_1:15;
reconsider f9 = f,g9 = g as (Morphism of C) by A1,CKB20:1;
A18: (( cod f ) = ( cod f9 ) & ( dom g ) = ( dom g9 )) by A1,CKB21:1;
( p . x ) = ( p . (g,f) ) by A16;
hence ( p . x ) = ( g * f ) by A1,A17,CAT_1:16
.= ( g9 * f9 ) by A1,A17,CKB23:1
.= ( (the Comp of C) . (g9,f9) ) by A18,A17,CAT_1:16
.= ( p9 . x ) by A11,A15,A16,FUNCT_1:47;
end;
hence p = ( (the Comp of C) || M ) by FUNCT_1:2;
reconsider i9 = ( (the Id of C) | O ) as (Function of O,M) by A8,CKB34:1;
now
let a being (Element of O);
now
reconsider b = a as (Object of B);
reconsider a9 = a as (Object of C);
( id b ) = ( id a9 ) by A1,CKB16:def 1;
hence ( i . a ) = ( (the Id of C) . a );
thus a in O;
a in (the carrier of C);
hence a in ( dom (the Id of C) ) by FUNCT_2:def 1;
end;
hence ( i . a ) = ( i9 . a ) by FUNCT_1:49;
end;
hence thesis by FUNCT_2:63;
end;
