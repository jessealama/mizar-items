environ
vocabularies XBOOLE_0,SUBSET_1,FUNCT_2,FUNCT_1,ZFMISC_1,FUNCT_5,RELAT_1,TARSKI,CAT_1,FUNCOP_1,STRUCT_0,GRAPH_1,FUNCT_3,REALSET1,PARTFUN1,FUNCT_4,MCART_1,CAT_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,DOMAIN_1,RELAT_1,FUNCT_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCT_3,FUNCT_4,FUNCT_5,REALSET1,FUNCOP_1,STRUCT_0,GRAPH_1,CAT_1,CKB1,CKB4,CKB5,CKB8,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB26,CKB31,CKB38,CKB39;
definitions TARSKI,CAT_1,REALSET1,FUNCOP_1,BINOP_1,GRAPH_1,CKB8,CKB10,CKB12,CKB16,CKB26,CKB31;
theorems TARSKI,ZFMISC_1,MCART_1,DOMAIN_1,FUNCT_1,FUNCT_2,FUNCT_3,FUNCT_4,FUNCT_5,PARTFUN1,FUNCOP_1,CAT_1,GRFUNC_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37;
schemes XBOOLE_0,BINOP_1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,REALSET1,CAT_1,STRUCT_0,RELAT_1,CKB11,CKB17,CKB35;
constructors PARTFUN1,BINOP_1,FUNCT_3,FUNCT_4,FUNCT_5,REALSET1,CAT_1,FUNCOP_1,RELSET_1,CKB1,CKB4,CKB5,CKB8,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB26,CKB31,CKB38,CKB39;
requirements SUBSET,BOOLE;
begin
reserve C for Category;
reserve D for Category;
definition
let C;
let D;
func [:C,D :] -> Category
equals
CatStr (# [: (the carrier of C),(the carrier of D) :],[: (the carrier' of C),(the carrier' of D) :],[: (the Source of C),(the Source of D) :],[: (the Target of C),(the Target of D) :],|: (the Comp of C),(the Comp of D) :|,[: (the Id of C),(the Id of D) :] #);
coherence
proof
set O = [: (the carrier of C),(the carrier of D) :];
set M = [: (the carrier' of C),(the carrier' of D) :];
set d = [: (the Source of C),(the Source of D) :];
set c = [: (the Target of C),(the Target of D) :];
set p = |: (the Comp of C),(the Comp of D) :|;
set i = [: (the Id of C),(the Id of D) :];
A1: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies ([ ( g `1 ),( f `1 ) ] in ( dom (the Comp of C) ) & [ ( g `2 ),( f `2 ) ] in ( dom (the Comp of D) ))))
proof
let f being (Element of M),g being (Element of M);
A2: (( d . (( g `1 ),( g `2 )) ) = [ ( (the Source of C) . ( g `1 ) ),( (the Source of D) . ( g `2 ) ) ] & ( c . (( f `1 ),( f `2 )) ) = [ ( (the Target of C) . ( f `1 ) ),( (the Target of D) . ( f `2 ) ) ]) by FUNCT_3:75;
assume A3: ( d . g ) = ( c . f );
(g = [ ( g `1 ),( g `2 ) ] & f = [ ( f `1 ),( f `2 ) ]) by MCART_1:21;
then (( (the Source of C) . ( g `1 ) ) = ( (the Target of C) . ( f `1 ) ) & ( (the Source of D) . ( g `2 ) ) = ( (the Target of D) . ( f `2 ) )) by A2,A3,ZFMISC_1:27;
hence thesis by CAT_1:def 5;
end;
A4: (for f,g being (Element of M) holds ([ g,f ] in ( dom p ) implies (( (the Source of C) . ( g `1 ) ) = ( (the Target of C) . ( f `1 ) ) & ( (the Source of D) . ( g `2 ) ) = ( (the Target of D) . ( f `2 ) ))))
proof
let f being (Element of M),g being (Element of M);
assume A5: [ g,f ] in ( dom p );
(g = [ ( g `1 ),( g `2 ) ] & f = [ ( f `1 ),( f `2 ) ]) by MCART_1:21;
then ([ ( g `1 ),( f `1 ) ] in ( dom (the Comp of C) ) & [ ( g `2 ),( f `2 ) ] in ( dom (the Comp of D) )) by A5,FUNCT_4:54;
hence thesis by CAT_1:def 5;
end;
A6: (for f,g being (Element of M) holds ([ g,f ] in ( dom p ) iff ( d . g ) = ( c . f )))
proof
let f being (Element of M),g being (Element of M);
A7: (g = [ ( g `1 ),( g `2 ) ] & f = [ ( f `1 ),( f `2 ) ]) by MCART_1:21;
thus ([ g,f ] in ( dom p ) implies ( d . g ) = ( c . f ))
proof
A8: (( d . (( g `1 ),( g `2 )) ) = [ ( (the Source of C) . ( g `1 ) ),( (the Source of D) . ( g `2 ) ) ] & ( c . (( f `1 ),( f `2 )) ) = [ ( (the Target of C) . ( f `1 ) ),( (the Target of D) . ( f `2 ) ) ]) by FUNCT_3:75;
assume A9: [ g,f ] in ( dom p );
then ( (the Source of C) . ( g `1 ) ) = ( (the Target of C) . ( f `1 ) ) by A4;
hence thesis by A4,A7,A9,A8;
end;

assume ( d . g ) = ( c . f );
then ([ ( g `1 ),( f `1 ) ] in ( dom (the Comp of C) ) & [ ( g `2 ),( f `2 ) ] in ( dom (the Comp of D) )) by A1;
hence thesis by A7,FUNCT_4:54;
end;
A10: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies ( p . (g,f) ) = [ ( (the Comp of C) . (( g `1 ),( f `1 )) ),( (the Comp of D) . (( g `2 ),( f `2 )) ) ]))
proof
let f being (Element of M),g being (Element of M);
assume ( d . g ) = ( c . f );
then A11: [ g,f ] in ( dom p ) by A6;
(g = [ ( g `1 ),( g `2 ) ] & f = [ ( f `1 ),( f `2 ) ]) by MCART_1:21;
hence thesis by A11,FUNCT_4:55;
end;
A12:now
let b being (Element of O);
A13: b = [ ( b `1 ),( b `2 ) ] by MCART_1:21;
A14: (( (the Source of C) . ( (the Id of C) . ( b `1 ) ) ) = ( b `1 ) & ( (the Source of D) . ( (the Id of D) . ( b `2 ) ) ) = ( b `2 )) by CAT_1:def 5;
A15: ( i . (( b `1 ),( b `2 )) ) = [ ( (the Id of C) . ( b `1 ) ),( (the Id of D) . ( b `2 ) ) ] by FUNCT_3:75;
hence A16: ( d . ( i . b ) ) = ( d . (( (the Id of C) . ( b `1 ) ),( (the Id of D) . ( b `2 ) )) ) by MCART_1:21
.= b by A13,A14,FUNCT_3:75;
A17: (( (the Target of C) . ( (the Id of C) . ( b `1 ) ) ) = ( b `1 ) & ( (the Target of D) . ( (the Id of D) . ( b `2 ) ) ) = ( b `2 )) by CAT_1:def 5;
thus A18: ( c . ( i . b ) ) = ( c . (( (the Id of C) . ( b `1 ) ),( (the Id of D) . ( b `2 ) )) ) by A15,MCART_1:21
.= b by A13,A17,FUNCT_3:75;
A19: (( ( i . (( b `1 ),( b `2 )) ) `1 ) = ( (the Id of C) . ( b `1 ) ) & ( ( i . (( b `1 ),( b `2 )) ) `2 ) = ( (the Id of D) . ( b `2 ) )) by A15,MCART_1:7;
thus (for f being (Element of M) holds (( c . f ) = b implies ( p . (( i . b ),f) ) = f))
proof
let f being (Element of M);
assume A20: ( c . f ) = b;
A21: (f = [ ( f `1 ),( f `2 ) ] & ( c . (( f `1 ),( f `2 )) ) = [ ( (the Target of C) . ( f `1 ) ),( (the Target of D) . ( f `2 ) ) ]) by FUNCT_3:75,MCART_1:21;
then ( (the Target of C) . ( f `1 ) ) = ( b `1 ) by A13,A20,ZFMISC_1:27;
then A22: ( (the Comp of C) . (( (the Id of C) . ( b `1 ) ),( f `1 )) ) = ( f `1 ) by CAT_1:def 5;
( (the Target of D) . ( f `2 ) ) = ( b `2 ) by A13,A20,A21,ZFMISC_1:27;
then A23: ( (the Comp of D) . (( (the Id of D) . ( b `2 ) ),( f `2 )) ) = ( f `2 ) by CAT_1:def 5;
( p . (( i . (( b `1 ),( b `2 )) ),f) ) = [ ( (the Comp of C) . (( ( i . b ) `1 ),( f `1 )) ),( (the Comp of D) . (( ( i . b ) `2 ),( f `2 )) ) ] by A10,A13,A16,A20;
hence thesis by A13,A19,A22,A23,MCART_1:21;
end;

let g being (Element of M);
assume A24: ( d . g ) = b;
A25: (g = [ ( g `1 ),( g `2 ) ] & ( d . (( g `1 ),( g `2 )) ) = [ ( (the Source of C) . ( g `1 ) ),( (the Source of D) . ( g `2 ) ) ]) by FUNCT_3:75,MCART_1:21;
then ( (the Source of C) . ( g `1 ) ) = ( b `1 ) by A13,A24,ZFMISC_1:27;
then A26: ( (the Comp of C) . (( g `1 ),( (the Id of C) . ( b `1 ) )) ) = ( g `1 ) by CAT_1:def 5;
( (the Source of D) . ( g `2 ) ) = ( b `2 ) by A13,A24,A25,ZFMISC_1:27;
then A27: ( (the Comp of D) . (( g `2 ),( (the Id of D) . ( b `2 ) )) ) = ( g `2 ) by CAT_1:def 5;
( p . (g,( i . (( b `1 ),( b `2 )) )) ) = [ ( (the Comp of C) . (( g `1 ),( ( i . b ) `1 )) ),( (the Comp of D) . (( g `2 ),( ( i . b ) `2 )) ) ] by A10,A13,A18,A24;
hence ( p . (g,( i . b )) ) = g by A13,A19,A26,A27,MCART_1:21;
end;
A28: (for f,g being (Element of M) holds (( d . g ) = ( c . f ) implies (( d . ( p . (g,f) ) ) = ( d . f ) & ( c . ( p . (g,f) ) ) = ( c . g ))))
proof
let f being (Element of M),g being (Element of M);
A29: (f = [ ( f `1 ),( f `2 ) ] & ( d . (( f `1 ),( f `2 )) ) = [ ( (the Source of C) . ( f `1 ) ),( (the Source of D) . ( f `2 ) ) ]) by FUNCT_3:75,MCART_1:21;
assume A30: ( d . g ) = ( c . f );
then A31: ( (the Comp of C) . [ ( g `1 ),( f `1 ) ] ) in (the carrier' of C) by A1,PARTFUN1:4;
then A32: ( (the Comp of C) . (( g `1 ),( f `1 )) ) in ( dom (the Source of C) ) by FUNCT_2:def 1;
A33: [ g,f ] in ( dom p ) by A6,A30;
then A34: ( (the Source of C) . ( g `1 ) ) = ( (the Target of C) . ( f `1 ) ) by A4;
then A35: ( (the Source of C) . ( (the Comp of C) . (( g `1 ),( f `1 )) ) ) = ( (the Source of C) . ( f `1 ) ) by CAT_1:def 5;
A36: ( (the Comp of D) . [ ( g `2 ),( f `2 ) ] ) in (the carrier' of D) by A1,A30,PARTFUN1:4;
then A37: ( (the Comp of D) . (( g `2 ),( f `2 )) ) in ( dom (the Source of D) ) by FUNCT_2:def 1;
A38: ( (the Source of D) . ( g `2 ) ) = ( (the Target of D) . ( f `2 ) ) by A4,A33;
then A39: ( (the Source of D) . ( (the Comp of D) . (( g `2 ),( f `2 )) ) ) = ( (the Source of D) . ( f `2 ) ) by CAT_1:def 5;
thus ( d . ( p . (g,f) ) ) = ( d . (( (the Comp of C) . (( g `1 ),( f `1 )) ),( (the Comp of D) . (( g `2 ),( f `2 )) )) ) by A10,A30
.= ( d . f ) by A29,A35,A39,A32,A37,FUNCT_3:def 8;
A40: (g = [ ( g `1 ),( g `2 ) ] & ( c . (( g `1 ),( g `2 )) ) = [ ( (the Target of C) . ( g `1 ) ),( (the Target of D) . ( g `2 ) ) ]) by FUNCT_3:75,MCART_1:21;
A41: ( (the Target of D) . ( (the Comp of D) . (( g `2 ),( f `2 )) ) ) = ( (the Target of D) . ( g `2 ) ) by A38,CAT_1:def 5;
A42: ( (the Target of C) . ( (the Comp of C) . (( g `1 ),( f `1 )) ) ) = ( (the Target of C) . ( g `1 ) ) by A34,CAT_1:def 5;
A43: ( (the Comp of D) . (( g `2 ),( f `2 )) ) in ( dom (the Target of D) ) by A36,FUNCT_2:def 1;
A44: ( (the Comp of C) . (( g `1 ),( f `1 )) ) in ( dom (the Target of C) ) by A31,FUNCT_2:def 1;
thus ( c . ( p . (g,f) ) ) = ( c . (( (the Comp of C) . (( g `1 ),( f `1 )) ),( (the Comp of D) . (( g `2 ),( f `2 )) )) ) by A10,A30
.= ( c . g ) by A40,A42,A41,A44,A43,FUNCT_3:def 8;
end;
(for f,g,h being (Element of M) holds ((( d . h ) = ( c . g ) & ( d . g ) = ( c . f )) implies ( p . (h,( p . (g,f) )) ) = ( p . (( p . (h,g) ),f) )))
proof
let f being (Element of M),g being (Element of M),h being (Element of M);
assume that
A45: ( d . h ) = ( c . g )
and
A46: ( d . g ) = ( c . f );
A47: (( (the Comp of C) . [ ( h `1 ),( g `1 ) ] ) in (the carrier' of C) & ( (the Comp of D) . [ ( h `2 ),( g `2 ) ] ) in (the carrier' of D)) by A1,A45,PARTFUN1:4;
(( (the Comp of C) . [ ( g `1 ),( f `1 ) ] ) in (the carrier' of C) & ( (the Comp of D) . [ ( g `2 ),( f `2 ) ] ) in (the carrier' of D)) by A1,A46,PARTFUN1:4;
then reconsider pgf = [ ( (the Comp of C) . [ ( g `1 ),( f `1 ) ] ),( (the Comp of D) . [ ( g `2 ),( f `2 ) ] ) ],phg = [ ( (the Comp of C) . [ ( h `1 ),( g `1 ) ] ),( (the Comp of D) . [ ( h `2 ),( g `2 ) ] ) ] as (Element of M) by A47,ZFMISC_1:87;
set pgf2 = ( pgf `2 );
set phg2 = ( phg `2 );
set pgf1 = ( pgf `1 );
set phg1 = ( phg `1 );
A48: (( pgf `2 ) = ( (the Comp of D) . [ ( g `2 ),( f `2 ) ] ) & ( phg `2 ) = ( (the Comp of D) . [ ( h `2 ),( g `2 ) ] )) by MCART_1:7;
A49: ( p . (g,f) ) = [ ( (the Comp of C) . (( g `1 ),( f `1 )) ),( (the Comp of D) . (( g `2 ),( f `2 )) ) ] by A10,A46;
( d . h ) = ( c . ( p . (g,f) ) ) by A28,A45,A46;
then A50: ( p . (h,( p . (g,f) )) ) = [ ( (the Comp of C) . (( h `1 ),pgf1) ),( (the Comp of D) . (( h `2 ),pgf2) ) ] by A10,A49;
A51: ( p . (h,g) ) = [ ( (the Comp of C) . (( h `1 ),( g `1 )) ),( (the Comp of D) . (( h `2 ),( g `2 )) ) ] by A10,A45;
[ ( h `2 ),( g `2 ) ] in ( dom (the Comp of D) ) by A1,A45;
then A52: ( (the Source of D) . ( h `2 ) ) = ( (the Target of D) . ( g `2 ) ) by CAT_1:def 5;
[ ( h `1 ),( g `1 ) ] in ( dom (the Comp of C) ) by A1,A45;
then A53: ( (the Source of C) . ( h `1 ) ) = ( (the Target of C) . ( g `1 ) ) by CAT_1:def 5;
[ ( g `2 ),( f `2 ) ] in ( dom (the Comp of D) ) by A1,A46;
then A54: ( (the Source of D) . ( g `2 ) ) = ( (the Target of D) . ( f `2 ) ) by CAT_1:def 5;
[ ( g `1 ),( f `1 ) ] in ( dom (the Comp of C) ) by A1,A46;
then A55: ( (the Source of C) . ( g `1 ) ) = ( (the Target of C) . ( f `1 ) ) by CAT_1:def 5;
( d . ( p . (h,g) ) ) = ( c . f ) by A28,A45,A46;
then A56: ( p . (( p . (h,g) ),f) ) = [ ( (the Comp of C) . (phg1,( f `1 )) ),( (the Comp of D) . (phg2,( f `2 )) ) ] by A10,A51;
(( pgf `1 ) = ( (the Comp of C) . [ ( g `1 ),( f `1 ) ] ) & ( phg `1 ) = ( (the Comp of C) . [ ( h `1 ),( g `1 ) ] )) by MCART_1:7;
then ( (the Comp of C) . (( h `1 ),pgf1) ) = ( (the Comp of C) . (phg1,( f `1 )) ) by A55,A53,A49,A51,CAT_1:def 5;
hence thesis by A48,A54,A52,A49,A51,A50,A56,CAT_1:def 5;
end;
hence thesis by A6,A28,A12,CAT_1:def 5;
end;
end;
