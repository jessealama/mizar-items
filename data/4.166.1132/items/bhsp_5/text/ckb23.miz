environ
vocabularies NUMBERS,BHSP_1,PRE_TOPC,SUBSET_1,FINSEQ_1,FUNCT_1,RELAT_1,FUNCT_2,CARD_1,TARSKI,XBOOLE_0,BINOP_1,SETWISEO,FINSET_1,MEMBER_1,FINSOP_1,ALGSTR_0,SUPINF_2,NAT_1,DECOMP_1,REAL_1,STRUCT_0,BINOP_2,PROB_2,NORMSP_1,ARYTM_3,SQUARE_1,ARYTM_1,XXREAL_0,RVSUM_1,RLVECT_1,ORDINAL4,BHSP_5;
notations TARSKI,SUBSET_1,XBOOLE_0,CARD_1,NUMBERS,XXREAL_0,NAT_1,STRUCT_0,ALGSTR_0,REAL_1,FUNCT_2,FINSET_1,RELAT_1,BINOP_2,PRE_TOPC,RLVECT_1,BHSP_1,SQUARE_1,BINOP_1,SETWISEO,FUNCT_1,FINSEQ_1,FINSOP_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12;
definitions TARSKI,SQUARE_1,BINOP_1,RLVECT_1,ALGSTR_0,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12;
theorems XBOOLE_0,SUBSET_1,BHSP_1,SQUARE_1,TARSKI,INT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCT_1,NAT_1,FUNCT_2,FINSOP_1,HILBASIS,XBOOLE_1,BINOP_2,XREAL_1,XXREAL_0,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22;
schemes NAT_1,FINSEQ_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,BINOP_2,MEMBERED,STRUCT_0,CARD_1,CKB11,CKB14;
constructors BINOP_1,DOMAIN_1,SETWISEO,REAL_1,SQUARE_1,NAT_1,BINOP_2,MEMBERED,FINSOP_1,BHSP_1,RELSET_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve X for RealUnitarySpace;
reserve x for (Point of X);
reserve y for (Point of X);
reserve y1 for (Point of X);
reserve y2 for (Point of X);
theorem
Th12: (for X holds (((the addF of X) is  commutative  associative & (the addF of X) is  having_a_unity) implies (for x holds (for S being  finite (OrthonormalFamily of X) holds (S is non  empty implies (for F being (Function of (the carrier of X),(the carrier of X)) holds ((S c= ( dom F ) & (for y holds (y in S implies ( F . y ) = ( ( x .|. y ) * y )))) implies (for H being (Function of (the carrier of X),( REAL )) holds ((S c= ( dom H ) & (for y holds (y in S implies ( H . y ) = ( ( x .|. y ) ^2 )))) implies ( ( setopfunc (S,(the carrier of X),(the carrier of X),F,(the addF of X)) ) .|. ( setopfunc (S,(the carrier of X),(the carrier of X),F,(the addF of X)) ) ) = ( setopfunc (S,(the carrier of X),( REAL ),H,( addreal )) ))))))))))
proof
let X;
assume that
A1: (the addF of X) is  commutative  associative
and
A2: (the addF of X) is  having_a_unity;
let x;
let S being  finite (OrthonormalFamily of X);
assume that
A3: S is non  empty;
let F being (Function of (the carrier of X),(the carrier of X));
assume that
A4: S c= ( dom F )
and
A5: (for y holds (y in S implies ( F . y ) = ( ( x .|. y ) * y )));
let H being (Function of (the carrier of X),( REAL ));
assume that
A6: S c= ( dom H )
and
A7: (for y holds (y in S implies ( H . y ) = ( ( x .|. y ) ^2 )));
consider p being (FinSequence of (the carrier of X)) such that A8: p is  one-to-one and A9: ( rng p ) = S and A10: ( setopfunc (S,(the carrier of X),(the carrier of X),F,(the addF of X)) ) = ( (the addF of X) "**" ( Func_Seq (F,p) ) ) by A1,A2,A4,CKB6:def 1;
A11: (for y1 holds (for y2 holds (((y1 in S & y2 in S) & y1 <> y2) implies ( (the scalar of X) . [ ( F . y1 ),( F . y2 ) ] ) = ( 0 ))))
proof
let y1;
let y2;
assume that
A12: y1 in S
and
A13: y2 in S
and
A14: y1 <> y2;
set z1 = ( x .|. y1 );
set z2 = ( x .|. y2 );
S is (OrthogonalFamily of X) by CKB12:def 1;
then A15: ( y1 .|. y2 ) = ( 0 ) by A12,A13,A14,CKB9:def 1;
( (the scalar of X) . [ ( F . y1 ),( F . y2 ) ] ) = ( (the scalar of X) . [ ( ( x .|. y1 ) * y1 ),( F . y2 ) ] ) by A5,A12
.= ( (the scalar of X) . [ ( ( x .|. y1 ) * y1 ),( ( x .|. y2 ) * y2 ) ] ) by A5,A13
.= ( ( z1 * y1 ) .|. ( z2 * y2 ) ) by BHSP_1:def 1
.= ( z2 * ( y2 .|. ( z1 * y1 ) ) ) by BHSP_1:3
.= ( z2 * ( z1 * ( y2 .|. y1 ) ) ) by BHSP_1:3
.= ( 0 ) by A15;
hence thesis;
end;
A16: (for y holds (y in S implies ( H . y ) = ( (the scalar of X) . [ ( F . y ),( F . y ) ] )))
proof
let y;
assume A17: y in S;
then A18: ( F . y ) = ( ( x .|. y ) * y ) by A5;
( H . y ) = ( ( x .|. y ) ^2 ) by A7,A17
.= ( ( ( x .|. y ) * ( x .|. y ) ) * 1 )
.= ( ( ( x .|. y ) * ( x .|. y ) ) * ( y .|. y ) ) by A17,CKB12:def 1
.= ( ( x .|. y ) * ( ( x .|. y ) * ( y .|. y ) ) )
.= ( ( x .|. y ) * ( ( ( x .|. y ) * y ) .|. y ) ) by BHSP_1:3
.= ( ( ( x .|. y ) * y ) .|. ( ( x .|. y ) * y ) ) by BHSP_1:3
.= ( (the scalar of X) . [ ( F . y ),( F . y ) ] ) by A18,BHSP_1:def 1;
hence thesis;
end;
( ( setopfunc (S,(the carrier of X),(the carrier of X),F,(the addF of X)) ) .|. ( setopfunc (S,(the carrier of X),(the carrier of X),F,(the addF of X)) ) ) = ( (the scalar of X) . [ ( (the addF of X) "**" ( Func_Seq (F,p) ) ),( (the addF of X) "**" ( Func_Seq (F,p) ) ) ] ) by A10,BHSP_1:def 1
.= ( ( addreal ) "**" ( Func_Seq (H,p) ) ) by A3,A4,A6,A8,A9,A11,A16,CKB20:1
.= ( setopfunc (S,(the carrier of X),( REAL ),H,( addreal )) ) by A6,A8,A9,CKB6:def 1;
hence thesis;
end;
