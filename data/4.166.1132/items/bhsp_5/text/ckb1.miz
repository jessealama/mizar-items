environ
vocabularies NUMBERS,BHSP_1,PRE_TOPC,SUBSET_1,FINSEQ_1,FUNCT_1,RELAT_1,FUNCT_2,CARD_1,TARSKI,XBOOLE_0,BINOP_1,SETWISEO,FINSET_1,MEMBER_1,FINSOP_1,ALGSTR_0,SUPINF_2,NAT_1,DECOMP_1,REAL_1,STRUCT_0,BINOP_2,PROB_2,NORMSP_1,ARYTM_3,SQUARE_1,ARYTM_1,XXREAL_0,RVSUM_1,RLVECT_1,ORDINAL4,BHSP_5;
notations TARSKI,SUBSET_1,XBOOLE_0,CARD_1,NUMBERS,XXREAL_0,NAT_1,STRUCT_0,ALGSTR_0,REAL_1,FUNCT_2,FINSET_1,RELAT_1,BINOP_2,PRE_TOPC,RLVECT_1,BHSP_1,SQUARE_1,BINOP_1,SETWISEO,FUNCT_1,FINSEQ_1,FINSOP_1;
definitions TARSKI,SQUARE_1,BINOP_1,RLVECT_1,ALGSTR_0;
theorems XBOOLE_0,SUBSET_1,BHSP_1,SQUARE_1,TARSKI,INT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCT_1,NAT_1,FUNCT_2,FINSOP_1,HILBASIS,XBOOLE_1,BINOP_2,XREAL_1,XXREAL_0,RELAT_1;
schemes NAT_1,FINSEQ_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,BINOP_2,MEMBERED,STRUCT_0,CARD_1;
constructors BINOP_1,DOMAIN_1,SETWISEO,REAL_1,SQUARE_1,NAT_1,BINOP_2,MEMBERED,FINSOP_1,BHSP_1,RELSET_1;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve xd for set;
theorem
Th1: (for D being set holds (for p1,p2 being (FinSequence of D) holds (((p1 is  one-to-one & p2 is  one-to-one) & ( rng p1 ) = ( rng p2 )) implies (( dom p1 ) = ( dom p2 ) & (ex P being (Permutation of ( dom p1 )) st ((p2 = ( p1 * P ) & ( dom P ) = ( dom p1 )) & ( rng P ) = ( dom p1 )))))))
proof
let D being set;
let p1 being (FinSequence of D),p2 being (FinSequence of D);
assume that
A1: p1 is  one-to-one
and
A2: p2 is  one-to-one
and
A3: ( rng p1 ) = ( rng p2 );
set P = ( ( p1 " ) * p2 );
( len p1 ) = ( card ( rng p2 ) ) by A1,A3,FINSEQ_4:62
.= ( len p2 ) by A2,FINSEQ_4:62;
then A4: ( dom p1 ) = ( Seg ( len p2 ) ) by FINSEQ_1:def 3
.= ( dom p2 ) by FINSEQ_1:def 3;
A5:now
let xd;
( dom ( p1 " ) ) = ( rng p1 ) by A1,FUNCT_1:33;
then (xd in ( dom p2 ) implies ( p2 . xd ) in ( dom ( p1 " ) )) by A3,FUNCT_1:3;
hence (xd in ( dom P ) iff xd in ( dom p2 )) by FUNCT_1:11;
end;
then A6: ( dom P ) = ( dom p2 ) by TARSKI:1;
A7: ( rng ( p1 " ) ) = ( dom p1 ) by A1,FUNCT_1:33;
A8: ( rng P ) c= ( dom p1 )
proof
let xd;
assume xd in ( rng P );
hence thesis by A7,FUNCT_1:14;
end;
A9: ( dom p1 ) c= ( rng P )
proof
let xd;
assume xd in ( dom p1 );
then xd in ( rng ( p1 " ) ) by A1,FUNCT_1:33;
then consider yd being set such that A10: yd in ( dom ( p1 " ) ) and A11: xd = ( ( p1 " ) . yd ) by FUNCT_1:def 3;
yd in ( rng p2 ) by A1,A3,A10,FUNCT_1:33;
then consider z being set such that A12: z in ( dom p2 ) and A13: yd = ( p2 . z ) by FUNCT_1:def 3;
xd = ( P . z ) by A11,A12,A13,FUNCT_1:13;
hence thesis by A6,A12,FUNCT_1:def 3;
end;
A14: ( dom P ) = ( dom p1 ) by A4,A5,TARSKI:1;
A15: ( rng P ) = ( dom p1 ) by A8,A9,XBOOLE_0:def 10;
then P is (Function of ( dom p1 ),( dom p1 )) by A14,FUNCT_2:1;
then A16: P is (Permutation of ( dom p1 )) by A1,A2,A15,FUNCT_2:57;
now
let xd;
(xd in ( dom P ) implies ( P . xd ) in ( dom p1 )) by A15,FUNCT_1:3;
hence (xd in ( dom ( p1 * P ) ) iff xd in ( dom p1 )) by A14,FUNCT_1:11;
end;
then A17: ( dom p2 ) = ( dom ( p1 * P ) ) by A4,TARSKI:1;
(for xd holds (xd in ( dom p2 ) implies ( p2 . xd ) = ( ( p1 * P ) . xd )))
proof
let xd;
assume A18: xd in ( dom p2 );
then A19: ( p2 . xd ) in ( rng p1 ) by A3,FUNCT_1:3;
( ( p1 * P ) . xd ) = ( p1 . ( ( ( p1 " ) * p2 ) . xd ) ) by A4,A14,A18,FUNCT_1:13
.= ( p1 . ( ( p1 " ) . ( p2 . xd ) ) ) by A18,FUNCT_1:13
.= ( p2 . xd ) by A1,A19,FUNCT_1:35;
hence thesis;
end;
hence thesis by A4,A14,A15,A16,A17,FUNCT_1:2;
end;
