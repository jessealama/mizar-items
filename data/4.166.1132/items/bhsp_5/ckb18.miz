environ
vocabularies NUMBERS,BHSP_1,PRE_TOPC,SUBSET_1,FINSEQ_1,FUNCT_1,RELAT_1,FUNCT_2,CARD_1,TARSKI,XBOOLE_0,BINOP_1,SETWISEO,FINSET_1,MEMBER_1,FINSOP_1,ALGSTR_0,SUPINF_2,NAT_1,DECOMP_1,REAL_1,STRUCT_0,BINOP_2,PROB_2,NORMSP_1,ARYTM_3,SQUARE_1,ARYTM_1,XXREAL_0,RVSUM_1,RLVECT_1,ORDINAL4,BHSP_5;
notations TARSKI,SUBSET_1,XBOOLE_0,CARD_1,NUMBERS,XXREAL_0,NAT_1,STRUCT_0,ALGSTR_0,REAL_1,FUNCT_2,FINSET_1,RELAT_1,BINOP_2,PRE_TOPC,RLVECT_1,BHSP_1,SQUARE_1,BINOP_1,SETWISEO,FUNCT_1,FINSEQ_1,FINSOP_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12;
definitions TARSKI,SQUARE_1,BINOP_1,RLVECT_1,ALGSTR_0,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12;
theorems XBOOLE_0,SUBSET_1,BHSP_1,SQUARE_1,TARSKI,INT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCT_1,NAT_1,FUNCT_2,FINSOP_1,HILBASIS,XBOOLE_1,BINOP_2,XREAL_1,XXREAL_0,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB15,CKB16,CKB17;
schemes NAT_1,FINSEQ_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,BINOP_2,MEMBERED,STRUCT_0,CARD_1,CKB11,CKB14;
constructors BINOP_1,DOMAIN_1,SETWISEO,REAL_1,SQUARE_1,NAT_1,BINOP_2,MEMBERED,FINSOP_1,BHSP_1,RELSET_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve X for RealUnitarySpace;
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
theorem
Th7: (for p being (FinSequence of (the carrier of X)) holds ((( len p ) >= 1 & (for i holds (for j holds (((i in ( dom p ) & j in ( dom p )) & i <> j) implies ( (the scalar of X) . [ ( p . i ),( p . j ) ] ) = ( 0 ))))) implies (for q being (FinSequence of ( REAL )) holds ((( dom p ) = ( dom q ) & (for i holds (i in ( dom q ) implies ( q . i ) = ( (the scalar of X) . [ ( p . i ),( p . i ) ] )))) implies ( ( (the addF of X) "**" p ) .|. ( (the addF of X) "**" p ) ) = ( ( addreal ) "**" q )))))
proof
let p being (FinSequence of (the carrier of X));
assume that
A1: ( len p ) >= 1
and
A2: (for i holds (for j holds (((i in ( dom p ) & j in ( dom p )) & i <> j) implies ( (the scalar of X) . [ ( p . i ),( p . j ) ] ) = ( 0 ))));
A3: 1 in ( dom p ) by A1,FINSEQ_3:25;
let q being (FinSequence of ( REAL ));
assume that
A4: ( dom p ) = ( dom q )
and
A5: (for i holds (i in ( dom q ) implies ( q . i ) = ( (the scalar of X) . [ ( p . i ),( p . i ) ] )));
consider f being (Function of ( NAT ),(the carrier of X)) such that A6: ( f . 1 ) = ( p . 1 ) and A7: (for n being (Element of ( NAT )) holds ((( 0 ) <> n & n < ( len p )) implies ( f . ( n + 1 ) ) = ( (the addF of X) . (( f . n ),( p . ( n + 1 ) )) ))) and A8: ( (the addF of X) "**" p ) = ( f . ( len p ) ) by A1,FINSOP_1:1;
A9: ( ( (the addF of X) "**" p ) .|. ( (the addF of X) "**" p ) ) = ( (the scalar of X) . [ ( f . ( len p ) ),( f . ( len p ) ) ] ) by A8,BHSP_1:def 1;
A10: ( Seg ( len q ) ) = ( dom p ) by A4,FINSEQ_1:def 3
.= ( Seg ( len p ) ) by FINSEQ_1:def 3;
then A11: ( len q ) = ( len p ) by FINSEQ_1:6;
( len q ) >= 1 by A1,A10,FINSEQ_1:6;
then consider g being (Function of ( NAT ),( REAL )) such that A12: ( g . 1 ) = ( q . 1 ) and A13: (for n being (Element of ( NAT )) holds ((( 0 ) <> n & n < ( len q )) implies ( g . ( n + 1 ) ) = ( ( addreal ) . (( g . n ),( q . ( n + 1 ) )) ))) and A14: ( ( addreal ) "**" q ) = ( g . ( len q ) ) by FINSOP_1:1;
defpred P[ (Element of ( NAT )) ]
 means
((1 <= $1 & $1 <= ( len q )) implies ( g . $1 ) = ( (the scalar of X) . [ ( f . $1 ),( f . $1 ) ] ));
A15: P[ ( 0 ) ];
now
let n;
assume that
A16: ((1 <= n & n <= ( len q )) implies ( g . n ) = ( (the scalar of X) . [ ( f . n ),( f . n ) ] ));
now
assume that
A17: 1 <= ( n + 1 )
and
A18: ( n + 1 ) <= ( len q );
A19: n <= ( n + 1 ) by NAT_1:11;
per cases ;
suppose A20: n = ( 0 );

1 in ( Seg ( len p ) ) by A1,FINSEQ_1:1;
then 1 in ( dom q ) by A4,FINSEQ_1:def 3;
hence ( g . ( n + 1 ) ) = ( (the scalar of X) . [ ( f . ( n + 1 ) ),( f . ( n + 1 ) ) ] ) by A5,A6,A12,A20;
end;
suppose A21: n <> ( 0 );

then ( 0 ) < n by NAT_1:3;
then A22: ( ( 0 ) + 1 ) <= n by INT_1:7;
A23: n <= ( len p ) by A11,A18,A19,XXREAL_0:2;
A24: ( ( n + 1 ) - 1 ) < ( ( len q ) - ( 0 ) ) by A18,XREAL_1:15;
then A25: n < ( len p ) by A10,FINSEQ_1:6;
A26: ( n + 1 ) in ( Seg ( len q ) ) by A17,A18,FINSEQ_1:1;
then A27: ( n + 1 ) in ( dom q ) by FINSEQ_1:def 3;
A28: ( n + 1 ) in ( dom p ) by A4,A26,FINSEQ_1:def 3;
A29: ( dom f ) = ( NAT ) by FUNCT_2:def 1;
then A30: ( f . n ) in ( rng f ) by FUNCT_1:3;
( rng f ) c= (the carrier of X) by RELAT_1:def 19;
then reconsider z = ( f . n ) as (Element of X) by A30;
A31: ( p . ( n + 1 ) ) in ( rng p ) by A28,FUNCT_1:3;
( rng p ) c= (the carrier of X) by RELAT_1:def 19;
then reconsider y = ( p . ( n + 1 ) ) as (Element of X) by A31;
(for i holds ((1 <= i & i <= n) implies ( (the scalar of X) . [ ( f . i ),y ] ) = ( 0 )))
proof
let i;
defpred P[ (Element of ( NAT )) ]
 means
((1 <= $1 & $1 <= n) implies ( (the scalar of X) . [ ( f . $1 ),y ] ) = ( 0 ));
A32: P[ ( 0 ) ];
A33: (for i holds (P[ i ] implies P[ ( i + 1 ) ]))
proof
let i;
assume A34: P[ i ];
A35: 1 <> ( n + 1 ) by A21;
assume that
A36: 1 <= ( i + 1 )
and
A37: ( i + 1 ) <= n;
( i + 1 ) <= ( len p ) by A23,A37,XXREAL_0:2;
then A38: ( i + 1 ) in ( dom p ) by A36,FINSEQ_3:25;
per cases ;
suppose i = ( 0 );

hence thesis by A2,A3,A6,A28,A35;
end;
suppose A39: i <> ( 0 );

A40: ( f . i ) in ( rng f ) by A29,FUNCT_1:3;
( rng f ) c= (the carrier of X) by RELAT_1:def 19;
then reconsider s = ( f . i ) as (Element of X) by A40;
A41: ( i + 1 ) <= ( len p ) by A23,A37,XXREAL_0:2;
then ( i + 1 ) in ( dom p ) by A36,FINSEQ_3:25;
then A42: ( p . ( i + 1 ) ) in ( rng p ) by FUNCT_1:3;
( rng p ) c= (the carrier of X) by RELAT_1:def 19;
then reconsider t = ( p . ( i + 1 ) ) as (Element of X) by A42;
A43: ( ( i + 1 ) - 1 ) < ( ( len p ) - ( 0 ) ) by A41,XREAL_1:15;
( 0 ) < i by A39,NAT_1:3;
then A44: ( ( 0 ) + 1 ) <= i by INT_1:7;
i < ( i + 1 ) by XREAL_1:29;
then A45: ( s .|. y ) = ( 0 ) by A34,A37,A44,BHSP_1:def 1,XXREAL_0:2;
A46: ( ( i + 1 ) + ( 0 ) ) < ( n + 1 ) by A37,XREAL_1:8;
( (the scalar of X) . [ ( f . ( i + 1 ) ),y ] ) = ( (the scalar of X) . [ ( s + t ),y ] ) by A7,A39,A43
.= ( ( s + t ) .|. y ) by BHSP_1:def 1
.= ( ( 0 ) + ( t .|. y ) ) by A45,BHSP_1:2
.= ( (the scalar of X) . [ t,y ] ) by BHSP_1:def 1
.= ( 0 ) by A2,A28,A38,A46;
hence thesis;
end;
end;
(for i holds P[ i ]) from NAT_1:sch 1(A32,A33);
hence thesis;
end;
then A47: ( 0 ) = ( (the scalar of X) . [ z,y ] ) by A22
.= ( z .|. y ) by BHSP_1:def 1;
thus ( g . ( n + 1 ) ) = ( ( addreal ) . (( (the scalar of X) . [ ( f . n ),( f . n ) ] ),( q . ( n + 1 ) )) ) by A13,A16,A21,A22,A24
.= ( ( addreal ) . (( (the scalar of X) . [ ( f . n ),( f . n ) ] ),( (the scalar of X) . [ ( p . ( n + 1 ) ),( p . ( n + 1 ) ) ] )) ) by A5,A27
.= ( ( addreal ) . (( (the scalar of X) . [ ( f . n ),( f . n ) ] ),( y .|. y )) ) by BHSP_1:def 1
.= ( ( addreal ) . (( z .|. z ),( y .|. y )) ) by BHSP_1:def 1
.= ( ( ( ( z .|. z ) + ( z .|. y ) ) + ( y .|. z ) ) + ( y .|. y ) ) by A47,BINOP_2:def 9
.= ( ( ( z .|. ( z + y ) ) + ( y .|. z ) ) + ( y .|. y ) ) by BHSP_1:2
.= ( ( z .|. ( z + y ) ) + ( ( y .|. z ) + ( y .|. y ) ) )
.= ( ( z .|. ( z + y ) ) + ( y .|. ( z + y ) ) ) by BHSP_1:2
.= ( ( z + y ) .|. ( z + y ) ) by BHSP_1:2
.= ( (the scalar of X) . [ ( (the addF of X) . (( f . n ),( p . ( n + 1 ) )) ),( z + y ) ] ) by BHSP_1:def 1
.= ( (the scalar of X) . [ ( (the addF of X) . (( f . n ),( p . ( n + 1 ) )) ),( f . ( n + 1 ) ) ] ) by A7,A21,A25
.= ( (the scalar of X) . [ ( f . ( n + 1 ) ),( f . ( n + 1 ) ) ] ) by A7,A21,A25;
end;
end;
hence ((1 <= ( n + 1 ) & ( n + 1 ) <= ( len q )) implies ( g . ( n + 1 ) ) = ( (the scalar of X) . [ ( f . ( n + 1 ) ),( f . ( n + 1 ) ) ] ));
end;
then A48: (P[ n ] implies P[ ( n + 1 ) ]);
(for n holds P[ n ]) from NAT_1:sch 1(A15,A48);
hence thesis by A1,A9,A11,A14;
end;
