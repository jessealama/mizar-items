environ
vocabularies FUNCT_1,XBOOLE_0,ZFMISC_1,SUBSET_1,TARSKI,RELAT_1,PARTFUN1,BINOP_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,CKB1,CKB2,CKB5,CKB6,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB26,CKB27,CKB28,CKB29,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44;
definitions FUNCT_1,CKB1,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB26,CKB27,CKB28,CKB29,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44;
theorems RELAT_1,FUNCT_1,FUNCT_2,ZFMISC_1,SUBSET_1,CKB1,CKB3,CKB4,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48;
schemes FUNCT_2,PARTFUN1,CKB7,CKB8,CKB9,CKB10,CKB49;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,CKB14;
constructors FUNCT_2,RELSET_1,CKB1,CKB2,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB26,CKB27,CKB28,CKB29,CKB36;
requirements SUBSET,BOOLE;
begin
reserve X for set;
reserve Y for set;
reserve Z for set;
reserve x for set;
reserve y for set;
reserve z for set;
reserve z1 for set;
reserve z2 for set;
scheme LambdaR2 { X,Y,Z() -> set,F(set,set) -> set,P[set,set] } : (ex f being (PartFunc of [: X(),Y() :],Z()) st ((for x holds (for y holds ([ x,y ] in ( dom f ) iff ((x in X() & y in Y()) & P[ x,y ])))) & (for x holds (for y holds ([ x,y ] in ( dom f ) implies ( f . (x,y) ) = F(x,y))))))
provided
A1: (for x holds (for y holds (P[ x,y ] implies F(x,y) in Z())))
proof
defpred Q[ set,set,set ]
 means
(P[ $1,$2 ] & $3 = F($1,$2));
A2: (for x holds (for y holds (for z1 holds (for z2 holds ((((x in X() & y in Y()) & Q[ x,y,z1 ]) & Q[ x,y,z2 ]) implies z1 = z2)))));
A3: (for x holds (for y holds (for z holds (((x in X() & y in Y()) & Q[ x,y,z ]) implies z in Z())))) by A1;
consider f being (PartFunc of [: X(),Y() :],Z()) such that A4: (for x holds (for y holds ([ x,y ] in ( dom f ) iff ((x in X() & y in Y()) & (ex z st Q[ x,y,z ]))))) and A5: (for x holds (for y holds ([ x,y ] in ( dom f ) implies Q[ x,y,( f . (x,y) ) ]))) from CKB49:sch 1(A3,A2);
take f;
thus (for x holds (for y holds ([ x,y ] in ( dom f ) iff ((x in X() & y in Y()) & P[ x,y ]))))
proof
let x;
let y;
thus ([ x,y ] in ( dom f ) implies ((x in X() & y in Y()) & P[ x,y ]))
proof
assume A6: [ x,y ] in ( dom f );
then (ex z st (P[ x,y ] & z = F(x,y))) by A4;
hence thesis by A4,A6;
end;

assume that
A7: (x in X() & y in Y())
and
A8: P[ x,y ];
(ex z st (P[ x,y ] & z = F(x,y))) by A8;
hence thesis by A4,A7;
end;

thus thesis by A5;
end;
