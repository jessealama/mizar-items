environ
vocabularies NUMBERS,INCSP_1,SUBSET_1,CARD_1,XBOOLE_0,ARYTM_3,TARSKI,ORDINAL1,FINSET_1,RELAT_1,ARYTM_1,NAT_1,FUNCT_1,XXREAL_0,FDIFF_1,WELLORD2,ZFMISC_1,ANPROJ_2,AFF_2,MOD_4,FUNCT_2,PRE_POLY,SETFAM_1,COMBGRAS;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,ENUMSET1,ZFMISC_1,SETFAM_1,DOMAIN_1,FINSET_1,RELAT_1,RELSET_1,WELLORD2,CARD_1,NUMBERS,INCSP_1,XXREAL_0,REAL_1,FUNCT_1,FUNCT_2,INCPROJ,NAT_1,CKB11;
definitions TARSKI,INCSP_1,INCPROJ,FUNCT_1,RELAT_1;
theorems ENUMSET1,TARSKI,ZFMISC_1,XBOOLE_0,XBOOLE_1,XREAL_1,SETFAM_1,PENCIL_1,INCSP_1,WELLORD2,CARD_1,CARD_2,NAT_1,ORDINAL1,CARD_FIL,STIRL2_1,CARD_FIN,XXREAL_0,INCPROJ,FUNCT_1,FUNCT_2,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9;
schemes FUNCT_1,NAT_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,CARD_1,INCSP_1,RELSET_1,CKB10;
constructors SETFAM_1,WELLORD2,DOMAIN_1,XXREAL_0,REAL_1,NAT_1,BINOP_2,INCPROJ,RELSET_1;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
reserve k for (Element of ( NAT ));
reserve X for set;
definition
let k being (Element of ( NAT ));
let X being non  empty set;
assume that
A1: ( 0 ) < k
and
A2: ( k + 1 ) c= ( card X );
func G_ (k,X) ->  strict PartialLinearSpace means 
:Def1: (((the Points of it) = { A where A is (Subset of X): ( card A ) = k } & (the Lines of it) = { L where L is (Subset of X): ( card L ) = ( k + 1 ) }) & (the Inc of it) = ( ( RelIncl ( bool X ) ) /\ [: (the Points of it),(the Lines of it) :] ));
existence
proof
set L = { B where B is (Subset of X): ( card B ) = ( k + 1 ) };
set P = { A where A is (Subset of X): ( card A ) = k };
set I = ( ( RelIncl ( bool X ) ) /\ [: P,L :] );
consider B being set such that A3: (B c= X & ( card B ) = ( k + 1 )) by A2,CARD_FIL:36;
B in L by A3;
then reconsider L as non  empty set;
k <= ( k + 1 ) by NAT_1:11;
then k c= ( k + 1 ) by NAT_1:39;
then k c= ( card X ) by A2,XBOOLE_1:1;
then consider A being set such that A4: (A c= X & ( card A ) = k) by CARD_FIL:36;
A in P by A4;
then reconsider P as non  empty set;
reconsider I as (Relation of P,L) by XBOOLE_1:17;
set G = IncProjStr (# P,L,I #);
A5: G is  up-2-rank
proof
let a being (POINT of G);
let b being (POINT of G);
let l1 being (LINE of G);
let l2 being (LINE of G);
assume that
A6: a <> b
and
A7: { a,b } on l1
and
A8: { a,b } on l2;
b in P;
then A9: (ex B being (Subset of X) st (b = B & ( card B ) = k));
a in P;
then A10: (ex A being (Subset of X) st (a = A & ( card A ) = k));
then A11: ( k + 1 ) c= ( card ( a \/ b ) ) by A9,A6,CKB1:1;
l1 in L;
then A12: (ex C being (Subset of X) st (l1 = C & ( card C ) = ( k + 1 )));
then A13: l1 is  finite;
A14: b in { a,b } by TARSKI:def 2;
then b on l1 by A7,INCSP_1:def 4;
then [ b,l1 ] in I by INCSP_1:def 1;
then [ b,l1 ] in ( RelIncl ( bool X ) ) by XBOOLE_0:def 4;
then A15: b c= l1 by A9,A12,WELLORD2:def 1;
l2 in L;
then A16: (ex D being (Subset of X) st (l2 = D & ( card D ) = ( k + 1 )));
then A17: l2 is  finite;
A18: a in { a,b } by TARSKI:def 2;
then a on l2 by A8,INCSP_1:def 4;
then [ a,l2 ] in I by INCSP_1:def 1;
then [ a,l2 ] in ( RelIncl ( bool X ) ) by XBOOLE_0:def 4;
then A19: a c= l2 by A10,A16,WELLORD2:def 1;
b on l2 by A14,A8,INCSP_1:def 4;
then [ b,l2 ] in I by INCSP_1:def 1;
then [ b,l2 ] in ( RelIncl ( bool X ) ) by XBOOLE_0:def 4;
then A20: b c= l2 by A9,A16,WELLORD2:def 1;
then ( a \/ b ) c= l2 by A19,XBOOLE_1:8;
then ( card ( a \/ b ) ) c= ( k + 1 ) by A16,CARD_1:11;
then A21: ( card ( a \/ b ) ) = ( k + 1 ) by A11,XBOOLE_0:def 10;
a on l1 by A18,A7,INCSP_1:def 4;
then [ a,l1 ] in I by INCSP_1:def 1;
then [ a,l1 ] in ( RelIncl ( bool X ) ) by XBOOLE_0:def 4;
then a c= l1 by A10,A12,WELLORD2:def 1;
then ( a \/ b ) = l1 by A12,A15,A21,A13,CARD_FIN:1,XBOOLE_1:8;
hence thesis by A16,A19,A20,A21,A17,CARD_FIN:1,XBOOLE_1:8;
end;
G is  with_non-trivial_lines
proof
let l being (LINE of G);
l in L;
then consider C being (Subset of X) such that A22: l = C and A23: ( card C ) = ( k + 1 );
1 < ( k + 1 ) by A1,XREAL_1:29;
then ( 1 + 1 ) <= ( k + 1 ) by NAT_1:13;
then 2 c= ( k + 1 ) by NAT_1:39;
then consider a,b being set such that A24: a in C and A25: b in C and A26: a <> b by A23,PENCIL_1:2;
reconsider x = ( C \ { a } ),y = ( C \ { b } ) as (Subset of X);
( card x ) = k by A23,A24,STIRL2_1:55;
then A27: x in P;
( card y ) = k by A23,A25,STIRL2_1:55;
then y in P;
then reconsider x,y as (POINT of G) by A27;
take x;
take y;
(not b in { a }) by A26,TARSKI:def 1;
then (b in { b } & b in x) by A25,TARSKI:def 1,XBOOLE_0:def 5;
hence x <> y by XBOOLE_0:def 5;
A28: (C c= ( { a } \/ C ) & C c= ( { b } \/ C )) by XBOOLE_1:7;
{ x,y } on l
proof
let z being (POINT of G);
assume z in { x,y };
then A29: (z = x or z = y) by TARSKI:def 2;
then z c= l by A22,A28,XBOOLE_1:43;
then [ z,l ] in ( RelIncl ( bool X ) ) by A22,A29,WELLORD2:def 1;
then [ z,l ] in I by XBOOLE_0:def 4;
hence thesis by INCSP_1:def 1;
end;
hence thesis;
end;
hence thesis by A5;
end;
uniqueness;
end;
