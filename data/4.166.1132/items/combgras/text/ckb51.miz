environ
vocabularies NUMBERS,INCSP_1,SUBSET_1,CARD_1,XBOOLE_0,ARYTM_3,TARSKI,ORDINAL1,FINSET_1,RELAT_1,ARYTM_1,NAT_1,FUNCT_1,XXREAL_0,FDIFF_1,WELLORD2,ZFMISC_1,ANPROJ_2,AFF_2,MOD_4,FUNCT_2,PRE_POLY,SETFAM_1,COMBGRAS;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,ENUMSET1,ZFMISC_1,SETFAM_1,DOMAIN_1,FINSET_1,RELAT_1,RELSET_1,WELLORD2,CARD_1,NUMBERS,INCSP_1,XXREAL_0,REAL_1,FUNCT_1,FUNCT_2,INCPROJ,NAT_1,CKB11,CKB12,CKB17,CKB18,CKB19,CKB20,CKB23,CKB24,CKB25,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB40;
definitions TARSKI,INCSP_1,INCPROJ,FUNCT_1,RELAT_1,CKB12,CKB17,CKB18,CKB19,CKB20,CKB24,CKB25,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB40;
theorems ENUMSET1,TARSKI,ZFMISC_1,XBOOLE_0,XBOOLE_1,XREAL_1,SETFAM_1,PENCIL_1,INCSP_1,WELLORD2,CARD_1,CARD_2,NAT_1,ORDINAL1,CARD_FIL,STIRL2_1,CARD_FIN,XXREAL_0,INCPROJ,FUNCT_1,FUNCT_2,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
schemes FUNCT_1,NAT_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,CARD_1,INCSP_1,RELSET_1,CKB10,CKB23;
constructors SETFAM_1,WELLORD2,DOMAIN_1,XXREAL_0,REAL_1,NAT_1,BINOP_2,INCPROJ,RELSET_1,CKB12,CKB17,CKB18,CKB19,CKB20,CKB23,CKB24,CKB25,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB40;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
reserve k for (Element of ( NAT ));
reserve x for set;
reserve y for set;
reserve X for set;
theorem
Th34: (for k being (Element of ( NAT )) holds (for X being non  empty set holds ((( 0 ) < k & ( k + 1 ) c= ( card X )) implies (for s being (Permutation of X) holds ( incprojmap (k,s) ) is  automorphism))))
proof
let k being (Element of ( NAT ));
let X being non  empty set;
assume that
A1: (( 0 ) < k & ( k + 1 ) c= ( card X ));
let s being (Permutation of X);
A2: (the Points of ( G_ (k,X) )) = { A where A is (Subset of X): ( card A ) = k } by A1,CKB12:def 1;
A3: (the point-map of ( incprojmap (k,s) )) is  one-to-one
proof
let x1 being set;
let x2 being set;
assume that
A4: x1 in ( dom (the point-map of ( incprojmap (k,s) )) )
and
A5: x2 in ( dom (the point-map of ( incprojmap (k,s) )) )
and
A6: ( (the point-map of ( incprojmap (k,s) )) . x1 ) = ( (the point-map of ( incprojmap (k,s) )) . x2 );
consider X1 being (POINT of ( G_ (k,X) )) such that A7: X1 = x1 by A4;
x1 in (the Points of ( G_ (k,X) )) by A4;
then A8: (ex X11 being (Subset of X) st (X11 = x1 & ( card X11 ) = k)) by A2;
consider X2 being (POINT of ( G_ (k,X) )) such that A9: X2 = x2 by A5;
x2 in (the Points of ( G_ (k,X) )) by A5;
then A10: (ex X12 being (Subset of X) st (X12 = x2 & ( card X12 ) = k)) by A2;
A11: ( ( incprojmap (k,s) ) . X2 ) = ( s .: x2 ) by A1,A9,CKB40:def 1;
( ( incprojmap (k,s) ) . X1 ) = ( s .: x1 ) by A1,A7,CKB40:def 1;
hence thesis by A6,A7,A9,A8,A10,A11,CKB6:1;
end;
(for y holds (y in (the Points of ( G_ (k,X) )) implies (ex x st (x in (the Points of ( G_ (k,X) )) & y = ( (the point-map of ( incprojmap (k,s) )) . x )))))
proof
let y being set;
assume y in (the Points of ( G_ (k,X) ));
then A12: (ex B being (Subset of X) st (B = y & ( card B ) = k)) by A2;
A13: ( s " y ) c= ( dom s ) by RELAT_1:132;
then A14: ( s " y ) c= X by FUNCT_2:52;
( rng s ) = X by FUNCT_2:def 3;
then A15: ( s .: ( s " y ) ) = y by A12,FUNCT_1:77;
then ( card ( s " y ) ) = k by A12,A13,CKB4:1;
then ( s " y ) in (the Points of ( G_ (k,X) )) by A2,A14;
then consider A being (POINT of ( G_ (k,X) )) such that A16: A = ( s " y );
y = ( ( incprojmap (k,s) ) . A ) by A1,A15,A16,CKB40:def 1;
hence thesis;
end;
then ( rng (the point-map of ( incprojmap (k,s) )) ) = (the Points of ( G_ (k,X) )) by FUNCT_2:10;
then A17: (the point-map of ( incprojmap (k,s) )) is  onto by FUNCT_2:def 3;
A18: (the Lines of ( G_ (k,X) )) = { L where L is (Subset of X): ( card L ) = ( k + 1 ) } by A1,CKB12:def 1;
(for y holds (y in (the Lines of ( G_ (k,X) )) implies (ex x st (x in (the Lines of ( G_ (k,X) )) & y = ( (the line-map of ( incprojmap (k,s) )) . x )))))
proof
let y being set;
assume y in (the Lines of ( G_ (k,X) ));
then A19: (ex B being (Subset of X) st (B = y & ( card B ) = ( k + 1 ))) by A18;
A20: ( s " y ) c= ( dom s ) by RELAT_1:132;
then A21: ( s " y ) c= X by FUNCT_2:52;
( rng s ) = X by FUNCT_2:def 3;
then A22: ( s .: ( s " y ) ) = y by A19,FUNCT_1:77;
then ( card ( s " y ) ) = ( k + 1 ) by A19,A20,CKB4:1;
then ( s " y ) in (the Lines of ( G_ (k,X) )) by A18,A21;
then consider A being (LINE of ( G_ (k,X) )) such that A23: A = ( s " y );
y = ( ( incprojmap (k,s) ) . A ) by A1,A22,A23,CKB40:def 1;
hence thesis;
end;
then ( rng (the line-map of ( incprojmap (k,s) )) ) = (the Lines of ( G_ (k,X) )) by FUNCT_2:10;
then A24: (the line-map of ( incprojmap (k,s) )) is  onto by FUNCT_2:def 3;
A25: ( dom s ) = X by FUNCT_2:52;
A26: ( incprojmap (k,s) ) is  incidence_preserving
proof
let A1 being (POINT of ( G_ (k,X) ));
let L1 being (LINE of ( G_ (k,X) ));
A27: (( s .: A1 ) = ( ( incprojmap (k,s) ) . A1 ) & ( s .: L1 ) = ( ( incprojmap (k,s) ) . L1 )) by A1,CKB40:def 1;
A1 in (the Points of ( G_ (k,X) ));
then A28: (ex a1 being (Subset of X) st (A1 = a1 & ( card a1 ) = k)) by A2;
A29: (( ( incprojmap (k,s) ) . A1 ) on ( ( incprojmap (k,s) ) . L1 ) implies A1 on L1)
proof
assume ( ( incprojmap (k,s) ) . A1 ) on ( ( incprojmap (k,s) ) . L1 );
then ( s .: A1 ) c= ( s .: L1 ) by A1,A27,CKB13:1;
then A1 c= L1 by A25,A28,FUNCT_1:87;
hence thesis by A1,CKB13:1;
end;
(A1 on L1 implies ( ( incprojmap (k,s) ) . A1 ) on ( ( incprojmap (k,s) ) . L1 ))
proof
assume A1 on L1;
then A1 c= L1 by A1,CKB13:1;
then ( s .: A1 ) c= ( s .: L1 ) by RELAT_1:123;
hence thesis by A1,A27,CKB13:1;
end;
hence thesis by A29;
end;
(the line-map of ( incprojmap (k,s) )) is  one-to-one
proof
let x1 being set;
let x2 being set;
assume that
A30: x1 in ( dom (the line-map of ( incprojmap (k,s) )) )
and
A31: x2 in ( dom (the line-map of ( incprojmap (k,s) )) )
and
A32: ( (the line-map of ( incprojmap (k,s) )) . x1 ) = ( (the line-map of ( incprojmap (k,s) )) . x2 );
consider X1 being (LINE of ( G_ (k,X) )) such that A33: X1 = x1 by A30;
x1 in (the Lines of ( G_ (k,X) )) by A30;
then A34: (ex X11 being (Subset of X) st (X11 = x1 & ( card X11 ) = ( k + 1 ))) by A18;
consider X2 being (LINE of ( G_ (k,X) )) such that A35: X2 = x2 by A31;
x2 in (the Lines of ( G_ (k,X) )) by A31;
then A36: (ex X12 being (Subset of X) st (X12 = x2 & ( card X12 ) = ( k + 1 ))) by A18;
A37: ( ( incprojmap (k,s) ) . X2 ) = ( s .: x2 ) by A1,A35,CKB40:def 1;
( ( incprojmap (k,s) ) . X1 ) = ( s .: x1 ) by A1,A33,CKB40:def 1;
hence thesis by A32,A33,A35,A34,A36,A37,CKB6:1;
end;
hence thesis by A24,A3,A17,A26,CKB29:def 1;
end;
