environ
vocabularies NUMBERS,INCSP_1,SUBSET_1,CARD_1,XBOOLE_0,ARYTM_3,TARSKI,ORDINAL1,FINSET_1,RELAT_1,ARYTM_1,NAT_1,FUNCT_1,XXREAL_0,FDIFF_1,WELLORD2,ZFMISC_1,ANPROJ_2,AFF_2,MOD_4,FUNCT_2,PRE_POLY,SETFAM_1,COMBGRAS;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,ENUMSET1,ZFMISC_1,SETFAM_1,DOMAIN_1,FINSET_1,RELAT_1,RELSET_1,WELLORD2,CARD_1,NUMBERS,INCSP_1,XXREAL_0,REAL_1,FUNCT_1,FUNCT_2,INCPROJ,NAT_1,CKB11,CKB12,CKB17,CKB18,CKB19,CKB20,CKB23,CKB24,CKB25,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB40;
definitions TARSKI,INCSP_1,INCPROJ,FUNCT_1,RELAT_1,CKB12,CKB17,CKB18,CKB19,CKB20,CKB24,CKB25,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB40;
theorems ENUMSET1,TARSKI,ZFMISC_1,XBOOLE_0,XBOOLE_1,XREAL_1,SETFAM_1,PENCIL_1,INCSP_1,WELLORD2,CARD_1,CARD_2,NAT_1,ORDINAL1,CARD_FIL,STIRL2_1,CARD_FIN,XXREAL_0,INCPROJ,FUNCT_1,FUNCT_2,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40;
schemes FUNCT_1,NAT_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,CARD_1,INCSP_1,RELSET_1,CKB10,CKB23;
constructors SETFAM_1,WELLORD2,DOMAIN_1,XXREAL_0,REAL_1,NAT_1,BINOP_2,INCPROJ,RELSET_1,CKB12,CKB17,CKB18,CKB19,CKB20,CKB23,CKB24,CKB25,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB40;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
reserve k for (Element of ( NAT ));
reserve x for set;
reserve y for set;
reserve X for set;
theorem
Th24: (for k being (Element of ( NAT )) holds (for X being non  empty set holds ((k = 1 & ( k + 1 ) c= ( card X )) implies (for F being IncProjMap over ( G_ (k,X) ),( G_ (k,X) ) holds (F is  automorphism implies (ex s being (Permutation of X) st ( the IncProjMap of F ) = ( incprojmap (k,s) )))))))
proof
deffunc CH(set) = { $1 };
let k being (Element of ( NAT ));
let X being non  empty set;
assume that
A1: (k = 1 & ( k + 1 ) c= ( card X ));
A2: (the Points of ( G_ (k,X) )) = { A where A is (Subset of X): ( card A ) = 1 } by A1,CKB12:def 1;
consider c being Function such that A3: ( dom c ) = X and A4: (for x being set holds (x in X implies ( c . x ) = CH(x))) from FUNCT_1:sch 3;
A5: ( rng c ) c= (the Points of ( G_ (k,X) ))
proof
let y being set;
assume y in ( rng c );
then consider x being set such that A6: (x in ( dom c ) & y = ( c . x )) by FUNCT_1:def 3;
A7: ( card { x } ) = 1 by CARD_1:30;
({ x } c= X & y = { x }) by A3,A4,A6,ZFMISC_1:31;
hence thesis by A2,A7;
end;
let F being IncProjMap over ( G_ (k,X) ),( G_ (k,X) );
assume that
A8: F is  automorphism;
A9: (the point-map of F) is  bijective by A8,CKB29:def 1;
reconsider c as (Function of X,(the Points of ( G_ (k,X) ))) by A3,A5,FUNCT_2:2;
deffunc W((Element of X)) = ( union ( F . ( c . $1 ) ) );
consider f being Function such that A10: ( dom f ) = X and A11: (for x being (Element of X) holds ( f . x ) = W(x)) from FUNCT_1:sch 4;
( rng f ) c= X
proof
let b being set;
assume b in ( rng f );
then consider a being set such that A12: a in X and A13: b = ( f . a ) by A10,FUNCT_1:def 3;
reconsider a as (Element of X) by A12;
A14: b = ( union ( F . ( c . a ) ) ) by A11,A13;
consider A being (POINT of ( G_ (k,X) )) such that A15: A = ( F . ( c . a ) );
A in (the Points of ( G_ (k,X) ));
then A16: (ex A1 being (Subset of X) st (A1 = A & ( card A1 ) = 1)) by A2;
then consider x being set such that A17: A = { x } by CARD_2:42;
x in X by A16,A17,ZFMISC_1:31;
hence thesis by A14,A15,A17,ZFMISC_1:25;
end;
then reconsider f as (Function of X,X) by A10,FUNCT_2:2;
A18: F is  incidence_preserving by A8,CKB29:def 1;
A19: ( dom (the point-map of F) ) = (the Points of ( G_ (k,X) )) by FUNCT_2:52;
A20: f is  one-to-one
proof
let x1 being set;
let x2 being set;
assume that
A21: (x1 in ( dom f ) & x2 in ( dom f ))
and
A22: ( f . x1 ) = ( f . x2 );
reconsider x1,x2 as (Element of X) by A21;
consider A1 being (POINT of ( G_ (k,X) )) such that A23: A1 = ( F . ( c . x1 ) );
A1 in (the Points of ( G_ (k,X) ));
then (ex A11 being (Subset of X) st (A11 = A1 & ( card A11 ) = 1)) by A2;
then consider y1 being set such that A24: A1 = { y1 } by CARD_2:42;
A25: (( c . x1 ) = { x1 } & ( c . x2 ) = { x2 }) by A4;
consider A2 being (POINT of ( G_ (k,X) )) such that A26: A2 = ( F . ( c . x2 ) );
A2 in (the Points of ( G_ (k,X) ));
then (ex A12 being (Subset of X) st (A12 = A2 & ( card A12 ) = 1)) by A2;
then consider y2 being set such that A27: A2 = { y2 } by CARD_2:42;
( f . x2 ) = ( union ( F . ( c . x2 ) ) ) by A11;
then A28: ( f . x2 ) = y2 by A26,A27,ZFMISC_1:25;
( f . x1 ) = ( union ( F . ( c . x1 ) ) ) by A11;
then ( f . x1 ) = y1 by A23,A24,ZFMISC_1:25;
then ( c . x1 ) = ( c . x2 ) by A9,A19,A22,A23,A26,A24,A27,A28,FUNCT_1:def 4;
hence thesis by A25,ZFMISC_1:3;
end;
A29: ( rng (the point-map of F) ) = (the Points of ( G_ (k,X) )) by A9,FUNCT_2:def 3;
(for y holds (y in X implies (ex x st (x in X & y = ( f . x )))))
proof
let y being set;
assume y in X;
then A30: { y } c= X by ZFMISC_1:31;
( card { y } ) = 1 by CARD_1:30;
then { y } in ( rng (the point-map of F) ) by A2,A29,A30;
then consider a being set such that A31: a in ( dom (the point-map of F) ) and A32: { y } = ( (the point-map of F) . a ) by FUNCT_1:def 3;
a in (the Points of ( G_ (k,X) )) by A31;
then A33: (ex A1 being (Subset of X) st (A1 = a & ( card A1 ) = 1)) by A2;
then consider x being set such that A34: a = { x } by CARD_2:42;
reconsider x as (Element of X) by A33,A34,ZFMISC_1:31;
{ y } = ( F . ( c . x ) ) by A4,A32,A34;
then y = ( union ( F . ( c . x ) ) ) by ZFMISC_1:25;
then y = ( f . x ) by A11;
hence thesis;
end;
then ( rng f ) = X by FUNCT_2:10;
then f is  onto by FUNCT_2:def 3;
then reconsider f as (Permutation of X) by A20;
A35: ( dom (the line-map of F) ) = (the Lines of ( G_ (k,X) )) by FUNCT_2:52;
A36: (the Lines of ( G_ (k,X) )) = { L where L is (Subset of X): ( card L ) = ( 1 + 1 ) } by A1,CKB12:def 1;
A37: (for x holds (x in ( dom (the line-map of F) ) implies ( (the line-map of F) . x ) = ( (the line-map of ( incprojmap (k,f) )) . x )))
proof
let x being set;
assume A38: x in ( dom (the line-map of F) );
then consider A being (LINE of ( G_ (k,X) )) such that A39: x = A;
consider A11 being (Subset of X) such that A40: x = A11 and A41: ( card A11 ) = 2 by A36,A35,A38;
A11 is  finite by A41;
then consider x1,x2 being set such that A42: x1 <> x2 and A43: x = { x1,x2 } by A40,A41,CARD_2:60;
reconsider x1,x2 as (Element of X) by A40,A43,ZFMISC_1:32;
( c . x1 ) = { x1 } by A4;
then consider A1 being (POINT of ( G_ (k,X) )) such that A44: A1 = { x1 };
( c . x2 ) = { x2 } by A4;
then consider A2 being (POINT of ( G_ (k,X) )) such that A45: A2 = { x2 };
A1 <> A2 by A42,A44,A45,ZFMISC_1:18;
then A46: ( F . A1 ) <> ( F . A2 ) by A9,A19,FUNCT_1:def 4;
( F . A2 ) in (the Points of ( G_ (k,X) ));
then A47: (ex B2 being (Subset of X) st (B2 = ( F . A2 ) & ( card B2 ) = 1)) by A2;
then consider y2 being set such that A48: ( F . A2 ) = { y2 } by CARD_2:42;
A1 c= A by A39,A43,A44,ZFMISC_1:36;
then A1 on A by A1,CKB13:1;
then ( F . A1 ) on ( F . A ) by A18,CKB27:def 1;
then A49: ( F . A1 ) c= ( F . A ) by A1,CKB13:1;
A50: (( ( incprojmap (k,f) ) . A ) = ( f .: A ) & ( f .: ( A1 \/ A2 ) ) = ( ( f .: A1 ) \/ ( f .: A2 ) )) by A1,CKB40:def 1,RELAT_1:120;
A51: ( A1 \/ A2 ) = A by A39,A43,A44,A45,ENUMSET1:1;
( F . A1 ) in (the Points of ( G_ (k,X) ));
then A52: (ex B1 being (Subset of X) st (B1 = ( F . A1 ) & ( card B1 ) = 1)) by A2;
then A53: (ex y1 being set st ( F . A1 ) = { y1 }) by CARD_2:42;
A2 c= A by A39,A43,A45,ZFMISC_1:36;
then A2 on A by A1,CKB13:1;
then ( F . A2 ) on ( F . A ) by A18,CKB27:def 1;
then A54: ( F . A2 ) c= ( F . A ) by A1,CKB13:1;
( F . ( c . x2 ) ) = ( F . A2 ) by A4,A45;
then A55: ( f . x2 ) = ( union ( F . A2 ) ) by A11;
( Im (f,x2) ) = { ( f . x2 ) } by A10,FUNCT_1:59;
then A56: ( f .: A2 ) = ( F . A2 ) by A45,A55,A48,ZFMISC_1:25;
A57: ( F . A1 ) is  finite by A52;
(not y2 in ( F . A1 ))
proof
assume y2 in ( F . A1 );
then ( F . A2 ) c= ( F . A1 ) by A48,ZFMISC_1:31;
hence contradiction by A46,A52,A47,A57,CARD_FIN:1;
end;
then A58: ( card ( ( F . A1 ) \/ ( F . A2 ) ) ) = ( 1 + 1 ) by A52,A53,A48,CARD_2:41;
( F . ( c . x1 ) ) = ( F . A1 ) by A4,A44;
then A59: ( f . x1 ) = ( union ( F . A1 ) ) by A11;
( Im (f,x1) ) = { ( f . x1 ) } by A10,FUNCT_1:59;
then A60: ( f .: A1 ) = ( F . A1 ) by A44,A59,A53,ZFMISC_1:25;
( F . A ) in (the Lines of ( G_ (k,X) ));
then A61: (ex B3 being (Subset of X) st (B3 = ( F . A ) & ( card B3 ) = 2)) by A36;
then ( F . A ) is  finite;
hence thesis by A39,A50,A51,A49,A54,A61,A58,A60,A56,CARD_FIN:1,XBOOLE_1:8;
end;
A62: (for x holds (x in ( dom (the point-map of F) ) implies ( (the point-map of F) . x ) = ( (the point-map of ( incprojmap (k,f) )) . x )))
proof
let x being set;
assume A63: x in ( dom (the point-map of F) );
then consider A being (POINT of ( G_ (k,X) )) such that A64: x = A;
A65: (ex A1 being (Subset of X) st (x = A1 & ( card A1 ) = 1)) by A2,A19,A63;
then consider x1 being set such that A66: x = { x1 } by CARD_2:42;
reconsider x1 as (Element of X) by A65,A66,ZFMISC_1:31;
( F . ( c . x1 ) ) = ( F . A ) by A4,A64,A66;
then A67: ( f . x1 ) = ( union ( F . A ) ) by A11;
( F . A ) in (the Points of ( G_ (k,X) ));
then consider B being (Subset of X) such that A68: B = ( F . A ) and A69: ( card B ) = 1 by A2;
A70: (ex x2 being set st B = { x2 }) by A69,CARD_2:42;
(( ( incprojmap (k,f) ) . A ) = ( f .: A ) & ( Im (f,x1) ) = { ( f . x1 ) }) by A1,A10,CKB40:def 1,FUNCT_1:59;
hence thesis by A64,A66,A67,A68,A70,ZFMISC_1:25;
end;
( dom (the point-map of ( incprojmap (k,f) )) ) = (the Points of ( G_ (k,X) )) by FUNCT_2:52;
then A71: (the point-map of F) = (the point-map of ( incprojmap (k,f) )) by A19,A62,FUNCT_1:def 11;
( dom (the line-map of ( incprojmap (k,f) )) ) = (the Lines of ( G_ (k,X) )) by FUNCT_2:52;
then ( the IncProjMap of F ) = ( incprojmap (k,f) ) by A35,A71,A37,FUNCT_1:def 11;
hence thesis;
end;
