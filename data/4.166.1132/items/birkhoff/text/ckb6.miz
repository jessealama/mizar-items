environ
vocabularies XBOOLE_0,STRUCT_0,MSUALG_1,RELAT_1,PBOOLE,MSAFREE,MSUALG_3,REALSET1,MEMBER_1,FUNCT_6,TARSKI,FUNCT_1,WELLORD1,MSUALG_2,PRALG_2,CARD_3,SUBSET_1,MSUALG_5,MSUALG_4,FUNCOP_1,RLVECT_2,PRALG_1,EQREL_1,CLOSURE2,SETFAM_1,FUNCT_4,ZFMISC_1,GROUP_6,NUMBERS,EQUATION,ZF_MODEL,ZF_LANG,MCART_1,PZFMISC1,MSAFREE2,FINSET_1,BIRKHOFF;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,SETFAM_1,RELAT_1,MCART_1,STRUCT_0,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FUNCT_2,FINSET_1,CARD_3,FUNCT_6,FUNCOP_1,MSUALG_1,MSUALG_2,PRALG_3,MSUALG_3,MSAFREE,MSAFREE2,PRALG_2,MSUALG_4,PZFMISC1,MSSUBFAM,CLOSURE2,MSUALG_5,EQUATION,CKB1;
definitions FUNCT_1,RELAT_1,TARSKI,PBOOLE,MSUALG_3,PRALG_2,MSUALG_4,EQUATION,FUNCOP_1,PZFMISC1,CKB1;
theorems AUTALG_1,CARD_3,CLOSURE2,EXTENS_1,FUNCOP_1,FUNCT_1,FUNCT_2,MCART_1,MSAFREE,MSAFREE2,MSSCYC_1,MSSUBFAM,MSUALG_2,MSUALG_3,MSUALG_4,MSUALG_5,MSUALG_7,MSUALG_9,PBOOLE,PRALG_2,PRALG_3,EQUATION,RELAT_1,ZFMISC_1,SETFAM_1,PARTFUN1,CKB1,CKB2;
schemes DOMAIN_1,PBOOLE,CKB3,CKB4,CKB5;
registrations XBOOLE_0,ORDINAL1,RELSET_1,FUNCT_2,FUNCOP_1,PBOOLE,STRUCT_0,MSUALG_1,MSUALG_2,MSUALG_4,MSAFREE1,MSAFREE2,EXTENS_1,MSUALG_5,CLOSURE2,PRALG_3,MSUALG_9,EQUATION,MSSUBFAM,AUTALG_1;
constructors SETFAM_1,BINOP_1,PZFMISC1,MSSUBFAM,MSUALG_3,MSAFREE2,MSUALG_5,CLOSURE2,PRALG_3,EQUATION,RELSET_1,CKB1;
requirements SUBSET,BOOLE;
begin
scheme EqTerms { S() -> non  empty non  void ManySortedSign,F() ->  non-empty MSAlgebra over S(),fi() -> (ManySortedFunction of ( (the carrier of S()) --> ( NAT ) ),(the Sorts of F())),s() -> (SortSymbol of S()),t1,t2() -> (Element of ( (the Sorts of ( TermAlg S() )) . s() )),P[set] } : (for B being  non-empty MSAlgebra over S() holds (P[ B ] implies B |= ( t1() '=' t2() )))
provided
A1: ( ( ( fi() -hash ) . s() ) . t1() ) = ( ( ( fi() -hash ) . s() ) . t2() )
and
A2: (for C being  non-empty MSAlgebra over S() holds (for G being (ManySortedFunction of ( (the carrier of S()) --> ( NAT ) ),(the Sorts of C)) holds (P[ C ] implies (ex h being (ManySortedFunction of F(),C) st (h is_homomorphism F(),C & G = ( h ** fi() ))))))
proof
reconsider fi1 = fi() as (ManySortedFunction of ( (the carrier of S()) --> ( NAT ) ),(the Sorts of F()));
reconsider SN = ( (the carrier of S()) --> ( NAT ) ) as  non-empty (ManySortedSet of (the carrier of S()));
let B being  non-empty MSAlgebra over S();
assume P[ B ];
then A3: P[ B ];
let h being (ManySortedFunction of ( TermAlg S() ),B);
assume that
A4: h is_homomorphism ( TermAlg S() ),B;
reconsider h1 = h as (ManySortedFunction of ( FreeMSA SN ),B);
set alfa = ( ( h1 || ( FreeGen SN ) ) ** ( ( Reverse SN ) "" ) );
A5: ( alfa -hash ) is_homomorphism ( FreeMSA SN ),B by CKB1:def 1;
reconsider alfa1 = alfa as (ManySortedFunction of ( (the carrier of S()) --> ( NAT ) ),(the Sorts of B));
A6: (for C being  non-empty MSAlgebra over S() holds (for G being (ManySortedFunction of ( (the carrier of S()) --> ( NAT ) ),(the Sorts of C)) holds (P[ C ] implies (ex h being (ManySortedFunction of F(),C) st (h is_homomorphism F(),C & G = ( h ** fi1 )))))) by A2;
consider H being (ManySortedFunction of F(),B) such that H is_homomorphism F(),B and A7: ( alfa1 -hash ) = ( H ** ( fi1 -hash ) ) from CKB5:sch 1(A3,A6);
A8: ( ( ( alfa -hash ) . s() ) . t1() ) = ( ( ( H . s() ) * ( ( fi() -hash ) . s() ) ) . t1() ) by A7,MSUALG_3:2
.= ( ( H . s() ) . ( ( ( fi() -hash ) . s() ) . t2() ) ) by A1,FUNCT_2:15
.= ( ( ( H . s() ) * ( ( fi() -hash ) . s() ) ) . t2() ) by FUNCT_2:15
.= ( ( ( alfa -hash ) . s() ) . t2() ) by A7,MSUALG_3:2;
( rngs ( Reverse SN ) ) = SN by EXTENS_1:10;
then A9: ( Reverse SN ) is  "1-1"  "onto" by EXTENS_1:9,MSUALG_9:11;
( ( alfa -hash ) || ( FreeGen SN ) ) = ( alfa ** ( Reverse SN ) ) by CKB1:def 1
.= ( ( h1 || ( FreeGen SN ) ) ** ( ( ( Reverse SN ) "" ) ** ( Reverse SN ) ) ) by PBOOLE:140
.= ( ( h1 || ( FreeGen SN ) ) ** ( id ( FreeGen SN ) ) ) by A9,MSUALG_3:5
.= ( h1 || ( FreeGen SN ) ) by MSUALG_3:3;
then A10: ( alfa -hash ) = h1 by A4,A5,EXTENS_1:14;
thus ( ( h . s() ) . ( [ t1(),t2() ] `1 ) ) = ( ( h . s() ) . t1() ) by MCART_1:7
.= ( ( h . s() ) . ( [ t1(),t2() ] `2 ) ) by A10,A8,MCART_1:7;
end;
