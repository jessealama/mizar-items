environ
vocabularies XBOOLE_0,STRUCT_0,MSUALG_1,RELAT_1,PBOOLE,MSAFREE,MSUALG_3,REALSET1,MEMBER_1,FUNCT_6,TARSKI,FUNCT_1,WELLORD1,MSUALG_2,PRALG_2,CARD_3,SUBSET_1,MSUALG_5,MSUALG_4,FUNCOP_1,RLVECT_2,PRALG_1,EQREL_1,CLOSURE2,SETFAM_1,FUNCT_4,ZFMISC_1,GROUP_6,NUMBERS,EQUATION,ZF_MODEL,ZF_LANG,MCART_1,PZFMISC1,MSAFREE2,FINSET_1,BIRKHOFF;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,SETFAM_1,RELAT_1,MCART_1,STRUCT_0,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FUNCT_2,FINSET_1,CARD_3,FUNCT_6,FUNCOP_1,MSUALG_1,MSUALG_2,PRALG_3,MSUALG_3,MSAFREE,MSAFREE2,PRALG_2,MSUALG_4,PZFMISC1,MSSUBFAM,CLOSURE2,MSUALG_5,EQUATION,CKB1;
definitions FUNCT_1,RELAT_1,TARSKI,PBOOLE,MSUALG_3,PRALG_2,MSUALG_4,EQUATION,FUNCOP_1,PZFMISC1,CKB1;
theorems AUTALG_1,CARD_3,CLOSURE2,EXTENS_1,FUNCOP_1,FUNCT_1,FUNCT_2,MCART_1,MSAFREE,MSAFREE2,MSSCYC_1,MSSUBFAM,MSUALG_2,MSUALG_3,MSUALG_4,MSUALG_5,MSUALG_7,MSUALG_9,PBOOLE,PRALG_2,PRALG_3,EQUATION,RELAT_1,ZFMISC_1,SETFAM_1,PARTFUN1,CKB1,CKB2;
schemes DOMAIN_1,PBOOLE,CKB3;
registrations XBOOLE_0,ORDINAL1,RELSET_1,FUNCT_2,FUNCOP_1,PBOOLE,STRUCT_0,MSUALG_1,MSUALG_2,MSUALG_4,MSAFREE1,MSAFREE2,EXTENS_1,MSUALG_5,CLOSURE2,PRALG_3,MSUALG_9,EQUATION,MSSUBFAM,AUTALG_1;
constructors SETFAM_1,BINOP_1,PZFMISC1,MSSUBFAM,MSUALG_3,MSAFREE2,MSUALG_5,CLOSURE2,PRALG_3,EQUATION,RELSET_1,CKB1;
requirements SUBSET,BOOLE;
begin
scheme ExFreeAlg2 { S() -> non empty non void ManySortedSign,X() ->  non-empty (ManySortedSet of (the carrier of S())),P[set] } : (ex A being  strict  non-empty MSAlgebra over S() st (ex F being (ManySortedFunction of X(),(the Sorts of A)) st (P[ A ] & (for B being  non-empty MSAlgebra over S() holds (for G being (ManySortedFunction of X(),(the Sorts of B)) holds (P[ B ] implies (ex H being (ManySortedFunction of A,B) st ((H is_homomorphism A,B & ( H ** F ) = G) & (for K being (ManySortedFunction of A,B) holds ((K is_homomorphism A,B & ( K ** F ) = G) implies H = K))))))))))
provided
A1: (for A,B being  non-empty MSAlgebra over S() holds ((A,B are_isomorphic  & P[ A ]) implies P[ B ]))
and
A2: (for A being  non-empty MSAlgebra over S() holds (for B being  strict  non-empty (MSSubAlgebra of A) holds (P[ A ] implies P[ B ])))
and
A3: (for I being set holds (for F being (MSAlgebra-Family of I,S()) holds ((for i being set holds (i in I implies (ex A being MSAlgebra over S() st (A = ( F . i ) & P[ A ])))) implies P[ ( product F ) ])))
proof
A4: (for A being  non-empty MSAlgebra over S() holds (for B being  strict  non-empty (MSSubAlgebra of A) holds (P[ A ] implies P[ B ]))) by A2;
A5: (for I being set holds (for F being (MSAlgebra-Family of I,S()) holds ((for i being set holds (i in I implies (ex A being MSAlgebra over S() st (A = ( F . i ) & P[ A ])))) implies P[ ( product F ) ]))) by A3;
set FM = ( FreeMSA X() );
A6: ( Reverse X() ) is  "1-1" by MSUALG_9:11;
A7: (for A,B being  non-empty MSAlgebra over S() holds ((A,B are_isomorphic  & P[ A ]) implies P[ B ])) by A1;
consider A being  strict  non-empty MSAlgebra over S(),F being (ManySortedFunction of FM,A) such that A8: P[ A ] and A9: F is_epimorphism FM,A and A10: (for B being  non-empty MSAlgebra over S() holds (for G being (ManySortedFunction of FM,B) holds ((G is_homomorphism FM,B & P[ B ]) implies (ex H being (ManySortedFunction of A,B) st ((H is_homomorphism A,B & ( H ** F ) = G) & (for K being (ManySortedFunction of A,B) holds (( K ** F ) = G implies H = K))))))) from CKB3:sch 1(A7,A4,A5);
reconsider R = ( ( F || ( FreeGen X() ) ) ** ( ( Reverse X() ) "" ) ) as (ManySortedFunction of X(),(the Sorts of A));
take A;
take R;
thus P[ A ] by A8;
let B being  non-empty MSAlgebra over S();
let G being (ManySortedFunction of X(),(the Sorts of B));
assume that
A11: P[ B ];
consider GG being (ManySortedFunction of FM,B) such that A12: GG is_homomorphism FM,B and A13: ( GG || ( FreeGen X() ) ) = ( G ** ( Reverse X() ) ) by MSAFREE:def 5;
consider H being (ManySortedFunction of A,B) such that A14: H is_homomorphism A,B and A15: ( H ** F ) = GG and (for K being (ManySortedFunction of A,B) holds (( K ** F ) = GG implies H = K)) by A10,A11,A12;
take H;
thus H is_homomorphism A,B by A14;
A16: ( H ** ( F || ( FreeGen X() ) ) ) = ( GG || ( FreeGen X() ) ) by A15,EXTENS_1:4;
A17: F is  "onto" by A9,MSUALG_3:def 8;
( rngs ( Reverse X() ) ) = X() by EXTENS_1:10;
then A18: ( Reverse X() ) is  "onto" by EXTENS_1:9;
( R ** ( Reverse X() ) ) = ( ( F || ( FreeGen X() ) ) ** ( ( ( Reverse X() ) "" ) ** ( Reverse X() ) ) ) by PBOOLE:140
.= ( ( F || ( FreeGen X() ) ) ** ( id ( FreeGen X() ) ) ) by A18,A6,MSUALG_3:5
.= ( F || ( FreeGen X() ) ) by MSUALG_3:3;
then A19: ( ( H ** R ) ** ( Reverse X() ) ) = ( G ** ( Reverse X() ) ) by A13,A16,PBOOLE:140;
hence ( H ** R ) = G by A18,EXTENS_1:12;
let K being (ManySortedFunction of A,B);
assume A20: K is_homomorphism A,B;
assume ( K ** R ) = G;
then ( K ** ( ( ( F || ( FreeGen X() ) ) ** ( ( Reverse X() ) "" ) ) ** ( Reverse X() ) ) ) = ( ( H ** ( ( F || ( FreeGen X() ) ) ** ( ( Reverse X() ) "" ) ) ) ** ( Reverse X() ) ) by A19,PBOOLE:140;
then ( K ** ( ( ( F || ( FreeGen X() ) ) ** ( ( Reverse X() ) "" ) ) ** ( Reverse X() ) ) ) = ( H ** ( ( ( F || ( FreeGen X() ) ) ** ( ( Reverse X() ) "" ) ) ** ( Reverse X() ) ) ) by PBOOLE:140;
then ( K ** ( ( F || ( FreeGen X() ) ) ** ( ( ( Reverse X() ) "" ) ** ( Reverse X() ) ) ) ) = ( H ** ( ( ( F || ( FreeGen X() ) ) ** ( ( Reverse X() ) "" ) ) ** ( Reverse X() ) ) ) by PBOOLE:140;
then ( K ** ( ( F || ( FreeGen X() ) ) ** ( ( ( Reverse X() ) "" ) ** ( Reverse X() ) ) ) ) = ( H ** ( ( F || ( FreeGen X() ) ) ** ( ( ( Reverse X() ) "" ) ** ( Reverse X() ) ) ) ) by PBOOLE:140;
then ( K ** ( ( F || ( FreeGen X() ) ) ** ( id ( FreeGen X() ) ) ) ) = ( H ** ( ( F || ( FreeGen X() ) ) ** ( ( ( Reverse X() ) "" ) ** ( Reverse X() ) ) ) ) by A18,A6,MSUALG_3:5;
then ( K ** ( ( F || ( FreeGen X() ) ) ** ( id ( FreeGen X() ) ) ) ) = ( H ** ( ( F || ( FreeGen X() ) ) ** ( id ( FreeGen X() ) ) ) ) by A18,A6,MSUALG_3:5;
then ( K ** ( F || ( FreeGen X() ) ) ) = ( H ** ( ( F || ( FreeGen X() ) ) ** ( id ( FreeGen X() ) ) ) ) by MSUALG_3:3;
then ( K ** ( F || ( FreeGen X() ) ) ) = ( H ** ( F || ( FreeGen X() ) ) ) by MSUALG_3:3;
then ( ( K ** F ) || ( FreeGen X() ) ) = ( H ** ( F || ( FreeGen X() ) ) ) by EXTENS_1:4;
then A21: ( ( K ** F ) || ( FreeGen X() ) ) = ( ( H ** F ) || ( FreeGen X() ) ) by EXTENS_1:4;
F is_homomorphism FM,A by A9,MSUALG_3:def 8;
then ( K ** F ) is_homomorphism FM,B by A20,MSUALG_3:10;
then ( K ** F ) = ( H ** F ) by A12,A15,A21,EXTENS_1:14;
hence thesis by A17,EXTENS_1:12;
end;
