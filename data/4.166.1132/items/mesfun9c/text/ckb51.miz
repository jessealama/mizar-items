environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,MEASURE1,SUBSET_1,SEQFUNC,SEQ_1,PARTFUN1,NAT_1,REALSET1,FUNCT_1,RELAT_1,PBOOLE,SEQ_2,MEASURE6,MESFUNC5,MESFUNC8,TARSKI,CARD_1,ORDINAL2,MESFUNC1,SERIES_1,ARYTM_3,XXREAL_0,MSSUBFAM,SETFAM_1,CARD_3,MESFUNC2,INTEGRA5,COMPLEX1,ORDINAL1,COMSEQ_1,XCMPLX_0,VALUED_1,ARYTM_1,RINFSUP1,XXREAL_2,SUPINF_2,VALUED_0,MESFUN10,XREAL_0,REAL_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,COMPLEX1,REAL_1,XXREAL_0,VALUED_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,PARTFUN1,NAT_1,PROB_1,SETFAM_1,SUPINF_2,MESFUNC9,SEQ_1,SEQ_2,SEQFUNC,SERIES_1,MEASURE1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,MESFUNC6,MESFUN6C,MESFUN10,MESFUNC8,MESFUN7C,MESFUNC5,COMSEQ_1,COMSEQ_2,COMSEQ_3,RINFSUP2,XXREAL_2,CKB1,CKB8,CKB32;
definitions FUNCT_2,MEASURE6,MESFUNC5,SERIES_1,VALUED_1,RINFSUP2,MESFUN7C,MESFUNC6,MESFUNC8,CKB1,CKB8,CKB32;
theorems TARSKI,PARTFUN1,FUNCT_1,SUPINF_2,EXTREAL2,MESFUNC1,XBOOLE_0,MESFUNC2,XXREAL_0,MESFUNC5,NAT_1,RELAT_1,FUNCT_2,COMPLEX1,MESFUN10,XCMPLX_0,MESFUNC6,SEQFUNC,ORDINAL1,MESFUNC8,RINFSUP2,RELSET_1,MESFUN7C,SERIES_1,VALUED_1,COMSEQ_3,MESFUN6C,XXREAL_2,MESFUNC9,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
schemes FUNCT_2,NAT_1,RECDEF_1,SEQFUNC;
registrations XREAL_0,MEMBERED,ORDINAL1,PARTFUN1,COMSEQ_3,FUNCT_2,RELAT_1,XBOOLE_0,NUMBERS,XXREAL_0,XCMPLX_0,MESFUNC8,VALUED_0,MESFUN7C,RELSET_1;
constructors REAL_1,EXTREAL1,SUPINF_1,MESFUNC9,SEQ_1,SEQ_2,MESFUN10,SEQFUNC,COMSEQ_2,COMSEQ_3,SERIES_1,MESFUNC1,MEASURE6,MESFUNC2,MESFUNC5,MESFUNC6,MESFUN6C,MESFUN7C,RINFSUP2,RELSET_1,CKB1,CKB8,CKB32;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve X for non empty set;
reserve S for (SigmaField of X);
reserve M for (sigma_Measure of S);
reserve E for (Element of S);
reserve F for  with_the_same_dom (Functional_Sequence of X,( ExtREAL ));
reserve P for (PartFunc of X,( ExtREAL ));
theorem
Th46: ((((((E = ( dom ( F . ( 0 ) ) ) & E = ( dom P )) & (for n being Nat holds ( F . n ) is_measurable_on E)) & P is_integrable_on M) & (for x being (Element of X) holds (for n being Nat holds (x in E implies ( |. ( F . n ) .| . x ) <= ( P . x ))))) & (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent))) implies ( lim F ) is_integrable_on M)
proof
assume that
A1: E = ( dom ( F . ( 0 ) ) )
and
A2: E = ( dom P )
and
A3: (for n being Nat holds ( F . n ) is_measurable_on E)
and
A4: P is_integrable_on M
and
A5: (for x being (Element of X) holds (for n being Nat holds (x in E implies ( |. ( F . n ) .| . x ) <= ( P . x ))))
and
A6: (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent));
A7: E = ( dom ( lim_sup F ) ) by A1,MESFUNC8:def 8;
A8: (for x being (Element of X) holds (for k being Nat holds (x in E implies (( - ( P . x ) ) <= ( ( F # x ) . k ) & ( ( F # x ) . k ) <= ( P . x )))))
proof
let x being (Element of X);
let k being Nat;
assume A9: x in E;
then x in ( dom ( F . k ) ) by A1,MESFUNC8:def 2;
then A10: x in ( dom |. ( F . k ) .| ) by MESFUNC1:def 10;
( |. ( F . k ) .| . x ) <= ( P . x ) by A5,A9;
then |. ( ( F . k ) . x ) .| <= ( P . x ) by A10,MESFUNC1:def 10;
then (( - ( P . x ) ) <= ( ( F . k ) . x ) & ( ( F . k ) . x ) <= ( P . x )) by EXTREAL2:12;
hence (( - ( P . x ) ) <= ( ( F # x ) . k ) & ( ( F # x ) . k ) <= ( P . x )) by MESFUNC5:def 13;
end;
A11:now
let x being (Element of X);
assume A12: x in ( dom ( lim_sup F ) );
(for k being Nat holds ( ( superior_realsequence ( F # x ) ) . k ) >= ( - ( P . x ) ))
proof
let k being Nat;
k is (Element of ( NAT )) by ORDINAL1:def 12;
then A13: ( ( superior_realsequence ( F # x ) ) . k ) >= ( ( F # x ) . k ) by RINFSUP2:8;
( ( F # x ) . k ) >= ( - ( P . x ) ) by A7,A8,A12;
hence ( ( superior_realsequence ( F # x ) ) . k ) >= ( - ( P . x ) ) by A13,XXREAL_0:2;
end;
then ( lim_sup ( F # x ) ) >= ( - ( P . x ) ) by MESFUN10:4;
then A14: ( ( lim_sup F ) . x ) >= ( - ( P . x ) ) by A12,MESFUNC8:def 8;
now
let y being  ext-real number;
assume y in ( rng ( F # x ) );
then (ex k being set st (k in ( dom ( F # x ) ) & y = ( ( F # x ) . k ))) by FUNCT_1:def 3;
hence ( P . x ) >= y by A7,A8,A12;
end;
then ( P . x ) is (UpperBound of ( rng ( F # x ) )) by XXREAL_2:def 1;
then ( P . x ) >= ( sup ( rng ( F # x ) ) ) by XXREAL_2:def 3;
then ( P . x ) >= ( sup ( ( F # x ) ^\ ( 0 ) ) ) by NAT_1:47;
then A15: ( P . x ) >= ( ( superior_realsequence ( F # x ) ) . ( 0 ) ) by RINFSUP2:27;
( ( superior_realsequence ( F # x ) ) . ( 0 ) ) >= ( inf ( superior_realsequence ( F # x ) ) ) by RINFSUP2:23;
then ( P . x ) >= ( lim_sup ( F # x ) ) by A15,XXREAL_0:2;
then ( P . x ) >= ( ( lim_sup F ) . x ) by A12,MESFUNC8:def 8;
hence |. ( ( lim_sup F ) . x ) .| <= ( P . x ) by A14,EXTREAL2:12;
end;
A16:now
let x being (Element of X);
assume A17: x in ( dom ( lim F ) );
then x in E by A1,MESFUNC8:def 9;
then ( F # x ) is  convergent by A6;
hence ( ( lim F ) . x ) = ( ( lim_sup F ) . x ) by A17,MESFUNC8:14;
end;
A18: ( lim_sup F ) is_measurable_on E by A1,A3,MESFUNC8:23;
E = ( dom ( lim F ) ) by A1,MESFUNC8:def 9;
then ( lim F ) = ( lim_sup F ) by A7,A16,PARTFUN1:5;
hence ( lim F ) is_integrable_on M by A2,A4,A7,A18,A11,MESFUNC5:102;
end;
