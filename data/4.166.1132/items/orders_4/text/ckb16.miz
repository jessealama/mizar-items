environ
vocabularies TREES_2,ORDERS_2,RELAT_2,XBOOLE_0,STRUCT_0,ZFMISC_1,CARD_3,FINSET_1,CAT_1,YELLOW_0,SUBSET_1,XXREAL_0,TARSKI,NAT_1,YELLOW_1,WELLORD2,WELLORD1,ARYTM_3,LATTICES,FUNCT_1,FUNCT_4,RELAT_1,CARD_1,FUNCOP_1,ARYTM_1,ORDINAL1,PBOOLE,NUMBERS,ORDERS_4;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,PBOOLE,CARD_3,RELAT_2,ORDERS_2,RELAT_1,FUNCT_1,FUNCT_2,FUNCOP_1,DOMAIN_1,STRUCT_0,YELLOW_0,WAYBEL_0,YELLOW_1,WAYBEL_1,FUNCT_4,WELLORD1,XXREAL_0,CKB1,CKB6,CKB12;
definitions TARSKI,WAYBEL_1,WELLORD1,CKB1,CKB6,CKB12;
theorems CARD_1,CARD_2,CARD_4,WAYBEL_0,WAYBEL_1,YELLOW_0,YELLOW_1,ORDERS_2,TARSKI,WELLORD2,NAT_1,AXIOMS,FUNCT_1,FUNCT_2,FUNCT_4,RELAT_1,RELAT_2,ORDINAL1,FUNCOP_1,XBOOLE_0,XBOOLE_1,PARTFUN1,XREAL_1,XXREAL_0,CKB1,CKB6,CKB11,CKB12,CKB13,CKB14,CKB15;
schemes NAT_1;
registrations XBOOLE_0,RELSET_1,FINSET_1,XREAL_0,NAT_1,MEMBERED,STRUCT_0,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_2,YELLOW11,CARD_1,ORDERS_2,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10;
constructors DOMAIN_1,XXREAL_0,NAT_1,NAT_D,MEMBERED,TOLER_1,LATTICE3,ORDERS_3,WAYBEL_1,RELSET_1,CARD_3,CKB1,CKB6,CKB12;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
theorem
Th5: (for L1,L2 being  antisymmetric RelStr holds (for A1,B1 being (Subset of L1) holds (A1,B1 form_upper_lower_partition_of L1 implies (for A2,B2 being (Subset of L2) holds (A2,B2 form_upper_lower_partition_of L2 implies (for f being (Function of ( subrelstr A1 ),( subrelstr A2 )) holds (f is  isomorphic implies (for g being (Function of ( subrelstr B1 ),( subrelstr B2 )) holds (g is  isomorphic implies (ex h being (Function of L1,L2) st (h = ( f +* g ) & h is  isomorphic)))))))))))
proof
let L1 being  antisymmetric RelStr;
let L2 being  antisymmetric RelStr;
let A1 being (Subset of L1);
let B1 being (Subset of L1);
assume that
A1: A1,B1 form_upper_lower_partition_of L1;
A2: ( A1 \/ B1 ) = (the carrier of L1) by A1,CKB12:def 1;
let A2 being (Subset of L2);
let B2 being (Subset of L2);
assume that
A3: A2,B2 form_upper_lower_partition_of L2;
A4: A2 misses B2 by A3,CKB13:1;
A5: ( A2 \/ B2 ) = (the carrier of L2) by A3,CKB12:def 1;
A6: A1 misses B1 by A1,CKB13:1;
let f being (Function of ( subrelstr A1 ),( subrelstr A2 ));
assume that
A7: f is  isomorphic;
let g being (Function of ( subrelstr B1 ),( subrelstr B2 ));
assume that
A8: g is  isomorphic;
set h = ( f +* g );
per cases ;
suppose A9: (the carrier of L1) = ( {} );

then A10: A1 = ( {} ) by A2;
then (the carrier of ( subrelstr A1 )) = ( {} ) by YELLOW_0:def 15;
then ( dom f ) = (the carrier of ( subrelstr A1 ));
then A11: ( dom f ) = A1 by YELLOW_0:def 15;
( subrelstr A1 ) is  empty by A10,YELLOW_0:def 15;
then ( subrelstr A2 ) is  empty by A7,WAYBEL_0:def 38;
then A12: A2 = ( {} ) by YELLOW_0:def 15;
A13: (for x being set holds (x in (the carrier of L1) implies ( h . x ) in (the carrier of L2))) by A9;
A14: B1 = ( {} ) by A2,A9;
then ((the carrier of ( subrelstr B2 )) <> ( {} ) or (the carrier of ( subrelstr B1 )) = ( {} )) by YELLOW_0:def 15;
then ( dom g ) = (the carrier of ( subrelstr B1 )) by FUNCT_2:def 1;
then ( dom g ) = B1 by YELLOW_0:def 15;
then ( dom h ) = (the carrier of L1) by A2,A11,FUNCT_4:def 1;
then reconsider h as (Function of L1,L2) by A13,FUNCT_2:3;
A15: L1 is  empty by A9;
( subrelstr B1 ) is  empty by A14,YELLOW_0:def 15;
then L2 is  empty by A8,A5,A12,WAYBEL_0:def 38;
then h is  isomorphic by A15,WAYBEL_0:def 38;
hence thesis;
end;
suppose A16: (the carrier of L1) <> ( {} );

then (A1 <> ( {} ) or B1 <> ( {} )) by A2;
then (( subrelstr A1 ) is non  empty or ( subrelstr B1 ) is non  empty) by YELLOW_0:def 15;
then A17: (( subrelstr A2 ) is non  empty or ( subrelstr B2 ) is non  empty) by A7,A8,WAYBEL_0:def 38;
((A2 <> ( {} ) or B2 <> ( {} )) implies (B2 <> ( {} ) or B1 = ( {} )))
proof
assume (A2 <> ( {} ) or B2 <> ( {} ));
((the carrier of ( subrelstr B2 )) <> ( {} ) or (the carrier of ( subrelstr B1 )) = ( {} )) by A8,CKB15:1;
hence thesis by YELLOW_0:def 15;
end;
then A18: ((the carrier of ( subrelstr B2 )) <> ( {} ) or (the carrier of ( subrelstr B1 )) = ( {} )) by A17,YELLOW_0:def 15;
then A19: ( dom g ) = (the carrier of ( subrelstr B1 )) by FUNCT_2:def 1;
then A20: ( dom g ) = B1 by YELLOW_0:def 15;
((A1 <> ( {} ) or B1 <> ( {} )) implies (A2 <> ( {} ) or A1 = ( {} )))
proof
assume (A1 <> ( {} ) or B1 <> ( {} ));
((the carrier of ( subrelstr A2 )) <> ( {} ) or (the carrier of ( subrelstr A1 )) = ( {} )) by A7,CKB15:1;
hence thesis by YELLOW_0:def 15;
end;
then ((the carrier of ( subrelstr A2 )) <> ( {} ) or (the carrier of ( subrelstr A1 )) = ( {} )) by YELLOW_0:def 15;
then ( dom f ) = (the carrier of ( subrelstr A1 )) by FUNCT_2:def 1;
then A21: ( dom f ) = A1 by YELLOW_0:def 15;
A22: ( dom h ) = ( ( dom f ) \/ ( dom g ) ) by FUNCT_4:def 1;
A23: (( dom f ) misses ( dom g ) implies ( rng h ) = ( ( rng f ) \/ ( rng g ) ))
proof
assume A24: ( dom f ) misses ( dom g );
A25: ( ( rng f ) \/ ( rng g ) ) c= ( rng h )
proof
let x being set;
assume A26: x in ( ( rng f ) \/ ( rng g ) );
per cases  by A26,XBOOLE_0:def 3;
suppose x in ( rng f );

then consider z being set such that A27: z in ( dom f ) and A28: x = ( f . z ) by FUNCT_1:def 3;
(not z in ( dom g )) by A24,A27,XBOOLE_0:3;
then A29: x = ( h . z ) by A28,FUNCT_4:11;
z in ( dom h ) by A22,A27,XBOOLE_0:def 3;
hence thesis by A29,FUNCT_1:def 3;
end;
suppose x in ( rng g );

then consider z being set such that A30: z in ( dom g ) and A31: x = ( g . z ) by FUNCT_1:def 3;
(z in ( dom h ) & ( h . z ) = ( g . z )) by A22,A30,FUNCT_4:13,XBOOLE_0:def 3;
hence thesis by A31,FUNCT_1:def 3;
end;
end;
( rng h ) c= ( ( rng f ) \/ ( rng g ) ) by FUNCT_4:17;
hence thesis by A25,XBOOLE_0:def 10;
end;
A32: ( rng h ) = (the carrier of L2)
proof
per cases ;
suppose A33: (A2 = ( {} ) & A1 = ( {} ));

then ( subrelstr B1 ) is non  empty by A2,A16,YELLOW_0:def 15;
then A34: ( rng g ) = (the carrier of ( subrelstr B2 )) by A8,A17,A33,WAYBEL_0:66,YELLOW_0:def 15;
( rng f ) = ( {} ) by A21,A33,RELAT_1:42;
hence thesis by A5,A21,A23,A33,A34,XBOOLE_1:65,YELLOW_0:def 15;
end;
suppose (A2 = ( {} ) & A1 <> ( {} ));

then ((the carrier of ( subrelstr A2 )) = ( {} ) & (the carrier of ( subrelstr A1 )) <> ( {} )) by YELLOW_0:def 15;
hence thesis by A7,CKB15:1;
end;
suppose (A2 <> ( {} ) & A1 = ( {} ));

then ((the carrier of ( subrelstr A2 )) <> ( {} ) & (the carrier of ( subrelstr A1 )) = ( {} )) by YELLOW_0:def 15;
hence thesis by A7,CKB15:1;
end;
suppose A35: (A2 <> ( {} ) & A1 <> ( {} ));

( rng h ) = (the carrier of L2)
proof
per cases ;
suppose A36: B2 <> ( {} );

then (the carrier of ( subrelstr B2 )) <> ( {} ) by YELLOW_0:def 15;
then (the carrier of ( subrelstr B1 )) <> ( {} ) by A8,CKB15:1;
then A37: ( subrelstr B1 ) is non  empty;
(( subrelstr A2 ) is non  empty & ( subrelstr A1 ) is non  empty) by A35,YELLOW_0:def 15;
then ( rng f ) = (the carrier of ( subrelstr A2 )) by A7,WAYBEL_0:66;
then A38: ( rng f ) = A2 by YELLOW_0:def 15;
( subrelstr B2 ) is non  empty by A36,YELLOW_0:def 15;
then ( rng g ) = (the carrier of ( subrelstr B2 )) by A8,A37,WAYBEL_0:66;
hence thesis by A1,A5,A21,A20,A23,A38,CKB13:1,YELLOW_0:def 15;
end;
suppose A39: B2 = ( {} );

(( subrelstr A2 ) is non  empty & ( subrelstr A1 ) is non  empty) by A35,YELLOW_0:def 15;
then A40: ( rng f ) = (the carrier of ( subrelstr A2 )) by A7,WAYBEL_0:66;
g = ( {} ) by A18,A39,YELLOW_0:def 15;
hence thesis by A5,A23,A39,A40,RELAT_1:38,XBOOLE_1:65,YELLOW_0:def 15;
end;
end;
hence thesis;
end;
end;
A41: ( dom h ) = (the carrier of L1) by A2,A21,A19,A22,YELLOW_0:def 15;
then A42: (for x being set holds (x in (the carrier of L1) implies ( h . x ) in (the carrier of L2))) by A32,FUNCT_1:def 3;
(A2 <> ( {} ) or B2 <> ( {} )) by A17,YELLOW_0:def 15;
then reconsider L2 as non  empty RelStr by A5;
reconsider L1 as non  empty RelStr by A16;
reconsider h as (Function of L1,L2) by A41,A42,FUNCT_2:3;
A43: (for x,y being (Element of L1) holds (x <= y iff ( h . x ) <= ( h . y )))
proof
let x being (Element of L1);
let y being (Element of L1);
A44: ( dom f ) misses ( dom g ) by A6,A21,A19,YELLOW_0:def 15;
per cases  by A2,XBOOLE_0:def 3;
suppose A45: (x in A1 & y in A1);

then (the carrier of ( subrelstr A2 )) <> ( {} ) by A7,CKB15:1;
then reconsider A29 = A2 as non  empty (Subset of L2) by YELLOW_0:def 15;
reconsider A19 = A1 as non  empty (Subset of L1) by A45;
reconsider ax = x,ay = y as (Element of ( subrelstr A19 )) by A45,YELLOW_0:def 15;
reconsider f9 = f as (Function of ( subrelstr A19 ),( subrelstr A29 ));
A46: (( h . x ) = ( f . x ) & ( h . y ) = ( f . y )) by A1,A21,A20,A45,CKB13:1,FUNCT_4:16;
hereby
assume x <= y;
then ax <= ay by YELLOW_0:60;
then ( f9 . ax ) <= ( f9 . ay ) by A7,WAYBEL_0:66;
hence ( h . x ) <= ( h . y ) by A46,YELLOW_0:59;
end;
assume ( h . x ) <= ( h . y );
then ( f9 . ax ) <= ( f9 . ay ) by A46,YELLOW_0:60;
then ax <= ay by A7,WAYBEL_0:66;
hence thesis by YELLOW_0:59;
end;
suppose A47: (x in A1 & y in B1);

hereby
((the carrier of ( subrelstr A2 )) <> ( {} ) & (the carrier of ( subrelstr B2 )) <> ( {} )) by A7,A8,A47,CKB15:1;
then reconsider A29 = A2,B29 = B2 as non  empty (Subset of L2) by YELLOW_0:def 15;
reconsider A19 = A1,B19 = B1 as non  empty (Subset of L1) by A47;
assume x <= y;
reconsider f9 = f as (Function of ( subrelstr A19 ),( subrelstr A29 ));
reconsider g9 = g as (Function of ( subrelstr B19 ),( subrelstr B29 ));
reconsider ax = x as (Element of ( subrelstr A19 )) by A47,YELLOW_0:def 15;
reconsider ay = y as (Element of ( subrelstr B19 )) by A47,YELLOW_0:def 15;
( f9 . ax ) in (the carrier of ( subrelstr A29 ));
then A48: ( f9 . ax ) in A29 by YELLOW_0:def 15;
( g9 . ay ) in (the carrier of ( subrelstr B29 ));
then A49: ( g9 . ay ) in B29 by YELLOW_0:def 15;
(( f . x ) = ( h . x ) & ( g . y ) = ( h . y )) by A21,A20,A44,A47,FUNCT_4:13,FUNCT_4:16;
then ( h . x ) < ( h . y ) by A3,A48,A49,CKB12:def 1;
hence ( h . x ) <= ( h . y ) by ORDERS_2:def 6;
end;
assume ( h . x ) <= ( h . y );
x < y by A1,A47,CKB12:def 1;
hence thesis by ORDERS_2:def 6;
end;
suppose A50: (x in B1 & y in A1);

then (the carrier of ( subrelstr B2 )) is non  empty by A8,CKB15:1;
then ( subrelstr B2 ) is non  empty;
then A51: ( rng g ) = (the carrier of ( subrelstr B2 )) by A8,A50,WAYBEL_0:66;
( g . x ) in ( rng g ) by A20,A50,FUNCT_1:def 3;
then A52: ( g . x ) in B2 by A51,YELLOW_0:def 15;
(the carrier of ( subrelstr A2 )) is non  empty by A7,A50,CKB15:1;
then ( subrelstr A2 ) is non  empty;
then A53: ( rng f ) = (the carrier of ( subrelstr A2 )) by A7,A50,WAYBEL_0:66;
( f . y ) in ( rng f ) by A21,A50,FUNCT_1:def 3;
then A54: ( f . y ) in A2 by A53,YELLOW_0:def 15;
y < x by A1,A50,CKB12:def 1;
hence (x <= y implies ( h . x ) <= ( h . y )) by ORDERS_2:6;
assume A55: ( h . x ) <= ( h . y );
(( g . x ) = ( h . x ) & ( f . y ) = ( h . y )) by A1,A21,A20,A50,CKB13:1,FUNCT_4:13,FUNCT_4:16;
then ( h . x ) > ( h . y ) by A3,A52,A54,CKB12:def 1;
hence thesis by A55,ORDERS_2:6;
end;
suppose A56: (x in B1 & y in B1);

then (the carrier of ( subrelstr B2 )) <> ( {} ) by A8,CKB15:1;
then reconsider B29 = B2 as non  empty (Subset of L2) by YELLOW_0:def 15;
reconsider B19 = B1 as non  empty (Subset of L1) by A56;
reconsider ax = x,ay = y as (Element of ( subrelstr B19 )) by A56,YELLOW_0:def 15;
reconsider g9 = g as (Function of ( subrelstr B19 ),( subrelstr B29 ));
A57: (( h . x ) = ( g . x ) & ( h . y ) = ( g . y )) by A20,A56,FUNCT_4:13;
hereby
assume x <= y;
then ax <= ay by YELLOW_0:60;
then ( g9 . ax ) <= ( g9 . ay ) by A8,WAYBEL_0:66;
hence ( h . x ) <= ( h . y ) by A57,YELLOW_0:59;
end;
assume ( h . x ) <= ( h . y );
then ( g9 . ax ) <= ( g9 . ay ) by A57,YELLOW_0:60;
then ax <= ay by A8,WAYBEL_0:66;
hence thesis by YELLOW_0:59;
end;
end;
h is  one-to-one
proof
let x1 being (Element of L1);
let x2 being (Element of L1);
assume A58: ( h . x1 ) = ( h . x2 );
per cases  by A2,XBOOLE_0:def 3;
suppose A59: (x1 in A1 & x2 in A1);

then (not x1 in B1) by A6,XBOOLE_0:3;
then A60: ( h . x1 ) = ( f . x1 ) by A20,FUNCT_4:11;
(the carrier of ( subrelstr A2 )) <> ( {} ) by A7,A59,CKB15:1;
then A61: ( subrelstr A2 ) is non  empty;
(not x2 in B1) by A6,A59,XBOOLE_0:3;
then ( f . x1 ) = ( f . x2 ) by A20,A58,A60,FUNCT_4:11;
hence thesis by A7,A21,A59,A61,FUNCT_1:def 4;
end;
suppose A62: (x1 in A1 & x2 in B1);

then (the carrier of ( subrelstr A2 )) <> ( {} ) by A7,CKB15:1;
then ( subrelstr A2 ) is non  empty;
then ( rng f ) = (the carrier of ( subrelstr A2 )) by A7,A62,WAYBEL_0:66;
then A63: ( rng f ) = A2 by YELLOW_0:def 15;
(not x1 in B1) by A6,A62,XBOOLE_0:3;
then ( h . x2 ) = ( f . x1 ) by A20,A58,FUNCT_4:11;
then A64: ( h . x2 ) in ( rng f ) by A21,A62,FUNCT_1:def 3;
( h . x2 ) = ( g . x2 ) by A20,A62,FUNCT_4:13;
then A65: ( h . x2 ) in ( rng g ) by A20,A62,FUNCT_1:def 3;
(the carrier of ( subrelstr B2 )) <> ( {} ) by A8,A62,CKB15:1;
then ( subrelstr B2 ) is non  empty;
then ( rng g ) = (the carrier of ( subrelstr B2 )) by A8,A62,WAYBEL_0:66;
then ( rng f ) misses ( rng g ) by A4,A63,YELLOW_0:def 15;
hence thesis by A64,A65,XBOOLE_0:3;
end;
suppose A66: (x1 in B1 & x2 in A1);

then (not x2 in ( dom g )) by A6,A20,XBOOLE_0:3;
then ( h . x2 ) = ( f . x2 ) by FUNCT_4:11;
then A67: ( h . x2 ) in ( rng f ) by A21,A66,FUNCT_1:def 3;
(the carrier of ( subrelstr B2 )) <> ( {} ) by A8,A66,CKB15:1;
then ( subrelstr B2 ) is non  empty;
then A68: ( rng g ) = (the carrier of ( subrelstr B2 )) by A8,A66,WAYBEL_0:66;
( h . x2 ) = ( g . x1 ) by A20,A58,A66,FUNCT_4:13;
then A69: ( h . x2 ) in ( rng g ) by A20,A66,FUNCT_1:def 3;
(the carrier of ( subrelstr A2 )) <> ( {} ) by A7,A66,CKB15:1;
then ( subrelstr A2 ) is non  empty;
then ( rng f ) = (the carrier of ( subrelstr A2 )) by A7,A66,WAYBEL_0:66
.= A2 by YELLOW_0:def 15;
then ( rng f ) misses ( rng g ) by A4,A68,YELLOW_0:def 15;
hence thesis by A69,A67,XBOOLE_0:3;
end;
suppose A70: (x1 in B1 & x2 in B1);

then (the carrier of ( subrelstr B2 )) <> ( {} ) by A8,CKB15:1;
then A71: ( subrelstr B2 ) is non  empty;
( h . x1 ) = ( g . x1 ) by A20,A70,FUNCT_4:13;
then ( g . x1 ) = ( g . x2 ) by A20,A58,A70,FUNCT_4:13;
hence thesis by A8,A20,A70,A71,FUNCT_1:def 4;
end;
end;
then h is  isomorphic by A32,A43,WAYBEL_0:66;
hence thesis;
end;
end;
