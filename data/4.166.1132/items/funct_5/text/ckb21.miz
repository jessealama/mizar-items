environ
vocabularies FUNCT_1,RELAT_1,XBOOLE_0,ZFMISC_1,TARSKI,SUBSET_1,MCART_1,FUNCT_2,PARTFUN1,CARD_1,FUNCOP_1,FUNCT_4,BINOP_1,FUNCT_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,WELLORD2,FUNCT_2,MCART_1,BINOP_1,FUNCT_3,CARD_1,PARTFUN1,FUNCOP_1,FUNCT_4,CKB20;
definitions TARSKI,FUNCT_1,WELLORD2,XBOOLE_0,BINOP_1,FUNCOP_1,CKB20;
theorems TARSKI,ZFMISC_1,FUNCT_1,WELLORD2,FUNCT_2,MCART_1,FUNCT_3,RELAT_1,CARD_1,PARTFUN1,FUNCOP_1,FUNCT_4,ENUMSET1,XBOOLE_0,XBOOLE_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
schemes FUNCT_1,PARTFUN1,XBOOLE_0,CKB1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1;
constructors PARTFUN1,WELLORD2,BINOP_1,FUNCT_3,FUNCOP_1,FUNCT_4,CARD_1,RELSET_1,CKB20;
requirements SUBSET,BOOLE;
begin
reserve X for set;
reserve Y for set;
reserve x for set;
reserve y for set;
reserve z for set;
reserve t for set;
reserve x1 for set;
reserve x2 for set;
reserve f for Function;
reserve g for Function;
reserve h for Function;
reserve f1 for Function;
reserve f2 for Function;
reserve g1 for Function;
definition
let f;
func uncurry f -> Function means 
:Def4: ((for t holds (t in ( dom it ) iff (ex x st (ex g st (ex y st (((t = [ x,y ] & x in ( dom f )) & g = ( f . x )) & y in ( dom g ))))))) & (for x holds (for g holds ((x in ( dom it ) & g = ( f . ( x `1 ) )) implies ( it . x ) = ( g . ( x `2 ) )))));
existence
proof
defpred P[ set,set ]
 means
(ex g st (g = ( f . ( $1 `1 ) ) & $2 = ( g . ( $1 `2 ) )));
deffunc F(Function) = ( dom $1 );
defpred P[ set ]
 means
( f . $1 ) is Function;
consider X such that A21: (x in X iff (x in ( dom f ) & P[ x ])) from XBOOLE_0:sch 1;
defpred P[ set ]
 means
(for g1 holds (g1 = ( f . ( $1 `1 ) ) implies ( $1 `2 ) in ( dom g1 )));
consider g such that A22: (( dom g ) = ( f .: X ) & (for g1 holds (g1 in ( f .: X ) implies ( g . g1 ) = F(g1)))) from CKB1:sch 1;
consider Y such that A23: (x in Y iff (x in [: X,( union ( rng g ) ) :] & P[ x ])) from XBOOLE_0:sch 1;
A24: (for x holds (x in Y implies (ex y st P[ x,y ])))
proof
let x;
assume x in Y;
then x in [: X,( union ( rng g ) ) :] by A23;
then ( x `1 ) in X by MCART_1:10;
then reconsider h = ( f . ( x `1 ) ) as Function by A21;
take ( h . ( x `2 ) );
take h;
thus thesis;
end;
A25: (for x holds (for x1 holds (for x2 holds (((x in Y & P[ x,x1 ]) & P[ x,x2 ]) implies x1 = x2))));
consider F being Function such that A26: (( dom F ) = Y & (for x holds (x in Y implies P[ x,( F . x ) ]))) from FUNCT_1:sch 2(A25,A24);
take F;
thus (for t holds (t in ( dom F ) iff (ex x st (ex g st (ex y st (((t = [ x,y ] & x in ( dom f )) & g = ( f . x )) & y in ( dom g )))))))
proof
let t;
thus (t in ( dom F ) implies (ex x st (ex g st (ex y st (((t = [ x,y ] & x in ( dom f )) & g = ( f . x )) & y in ( dom g ))))))
proof
assume A27: t in ( dom F );
take x = ( t `1 );
A28: t in [: X,( union ( rng g ) ) :] by A23,A26,A27;
then A29: x in X by MCART_1:10;
then reconsider h = ( f . x ) as Function by A21;
take h;
take ( t `2 );
thus thesis by A21,A23,A26,A27,A28,A29,MCART_1:21;
end;

given x being set,h being Function,y being set such that
A30: t = [ x,y ]
and
A31: x in ( dom f )
and
A32: h = ( f . x )
and
A33: y in ( dom h );

A34: x in X by A21,A31,A32;
then h in ( f .: X ) by A31,A32,FUNCT_1:def 6;
then (( g . h ) = ( dom h ) & ( g . h ) in ( rng g )) by A22,FUNCT_1:def 3;
then ( dom h ) c= ( union ( rng g ) ) by ZFMISC_1:74;
then A35: t in [: X,( union ( rng g ) ) :] by A30,A33,A34,ZFMISC_1:87;
( t `1 ) = x by A30,MCART_1:7;
then (for g1 holds (g1 = ( f . ( t `1 ) ) implies ( t `2 ) in ( dom g1 ))) by A30,A32,A33,MCART_1:7;
hence thesis by A23,A26,A35;
end;

let x;
let h being Function;
assume that
A36: x in ( dom F )
and
A37: h = ( f . ( x `1 ) );
(ex g st (g = ( f . ( x `1 ) ) & ( F . x ) = ( g . ( x `2 ) ))) by A26,A36;
hence thesis by A37;
end;
uniqueness
proof
defpred P[ set ]
 means
(ex x st (ex g st (ex y st ((($1 = [ x,y ] & x in ( dom f )) & g = ( f . x )) & y in ( dom g )))));
let f1;
let f2;
assume that
A38: (t in ( dom f1 ) iff P[ t ])
and
A39: (for x holds (for g holds ((x in ( dom f1 ) & g = ( f . ( x `1 ) )) implies ( f1 . x ) = ( g . ( x `2 ) ))))
and
A40: (t in ( dom f2 ) iff P[ t ])
and
A41: (for x holds (for g holds ((x in ( dom f2 ) & g = ( f . ( x `1 ) )) implies ( f2 . x ) = ( g . ( x `2 ) ))));
A42: ( dom f1 ) = ( dom f2 ) from XBOOLE_0:sch 2(A38,A40);
now
let x;
assume A43: x in ( dom f1 );
then consider z,g,y such that A44: x = [ z,y ] and z in ( dom f ) and A45: g = ( f . z ) and y in ( dom g ) by A38;
A46: (z = ( x `1 ) & y = ( x `2 )) by A44,MCART_1:7;
then ( f1 . x ) = ( g . y ) by A39,A43,A45;
hence ( f1 . x ) = ( f2 . x ) by A41,A42,A43,A45,A46;
end;
hence thesis by A42,FUNCT_1:2;
end;
end;
