environ
vocabularies NUMBERS,ORDINAL1,ORDINAL2,TARSKI,MATROID0,XBOOLE_0,CARD_1,FINSET_1,AFINSQ_1,ORDINAL4,RELAT_1,FUNCT_1,VALUED_0,CARD_3,SUBSET_1,ARYTM_3,NAT_1,XXREAL_0,NEWTON,ORDINAL3,FINSEQ_1,ORDINAL5;
notations XBOOLE_0,TARSKI,RELAT_1,FUNCT_1,SUBSET_1,FINSET_1,NUMBERS,MATROID0,ORDINAL1,NAT_1,XXREAL_0,NEWTON,ORDINAL2,AFINSQ_1,ORDINAL3,ORDINAL4,CARD_3,CKB10,CKB11,CKB12,CKB28,CKB54,CKB57;
definitions TARSKI,XBOOLE_0,ORDINAL2,CARD_3,CKB10,CKB11,CKB12,CKB28,CKB54,CKB57;
theorems TARSKI,FUNCT_1,FINSET_1,NAT_1,ORDERS_1,AFINSQ_1,RELAT_1,ORDINAL1,ORDINAL2,ORDINAL3,ORDINAL4,CARD_2,CARD_3,CARD_5,XBOOLE_0,XBOOLE_1,ZFMISC_1,NEWTON,XXREAL_0,NAT_4,PEPIN,CARD_1,CKB1,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB15,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB54,CKB55,CKB57,CKB58,CKB59,CKB60,CKB61,CKB63,CKB64;
schemes NAT_1,ORDINAL1,ORDINAL2,AFINSQ_1,CKB52,CKB53;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,NAT_1,XXREAL_0,XREAL_0,ORDINAL2,ORDINAL4,CARD_1,CARD_5,CARD_LAR,NEWTON,AFINSQ_1,FINSET_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB13,CKB14,CKB16,CKB17,CKB18,CKB19,CKB20,CKB44,CKB45,CKB56,CKB62;
constructors NEWTON,NAT_1,XXREAL_0,AFINSQ_1,ORDINAL3,CARD_3,ORDINAL4,CKB10,CKB11,CKB12,CKB28,CKB54,CKB57;
requirements SUBSET,BOOLE,NUMERALS,ARITHM,REAL;
begin
reserve a for  ordinal number;
reserve b for  ordinal number;
reserve c for  ordinal number;
reserve e for  ordinal number;
reserve n for  natural number;
reserve f for Ordinal-Sequence;
reserve x for set;
theorem
Th40: (for e being  epsilon Ordinal holds ( first_epsilon_greater_than e ) = ( e |^|^ ( omega ) ))
proof
let e being  epsilon Ordinal;
deffunc phi(Ordinal) = ( exp (( omega ),$1) );
A1: (for a holds (for b holds (a in b implies phi(a) in phi(b)))) by ORDINAL4:24;
A2:now
let a;
assume that
A3: a is non  empty  limit_ordinal;
let phi being Ordinal-Sequence;
assume that
A4: (( dom phi ) = a & (for b holds (b in a implies ( phi . b ) = phi(b))));
phi is  non-decreasing
proof
let b;
let c;
assume A5: (b in c & c in ( dom phi ));
then (( phi . b ) = phi(b) & ( phi . c ) = phi(c)) by A4,ORDINAL1:10;
then ( phi . b ) in ( phi . c ) by A5,ORDINAL4:24;
hence thesis by ORDINAL1:def 2;
end;
then (( Union phi ) is_limes_of phi & phi(a) = ( lim phi )) by A3,A4,CKB21:1,ORDINAL2:45;
hence phi(a) is_limes_of phi by ORDINAL2:def 10;
end;
deffunc F(Ordinal,Ordinal) = phi($2);
deffunc G(Ordinal,Ordinal-Sequence) = ( lim $2 );
consider f being Ordinal-Sequence such that A6: ( dom f ) = ( omega ) and A7: (( {} ) in ( omega ) implies ( f . ( {} ) ) = ( succ e )) and A8: (for a holds (( succ a ) in ( omega ) implies ( f . ( succ a ) ) = F(a,( f . a )))) and (for a holds (((a in ( omega ) & a <> ( {} )) & a is  limit_ordinal) implies ( f . a ) = G(a,( f | a )))) from ORDINAL2:sch 11;
A9: (( dom f ) = ( omega ) & ( f . ( 0 ) ) = ( succ e )) by A6,A7;
A10:now
let a;
assume a in ( omega );
then ( succ a ) in ( omega ) by ORDINAL1:28;
hence ( f . ( succ a ) ) = phi(( f . a )) by A8;
end;
A11: ((( succ e ) c= ( Union f ) & phi(( Union f )) = ( Union f )) & (for b holds ((( succ e ) c= b & phi(b) = b) implies ( Union f ) c= b))) from CKB52:sch 1(A1,A2,A9,A10);
( Union f ) is  epsilon
proof
thus phi(( Union f )) = ( Union f ) by A11;
end;
then reconsider e9 = ( Union f ) as  epsilon Ordinal;
now
e in ( succ e ) by ORDINAL1:6;
hence e in e9 by A11;
let b being  epsilon Ordinal;
assume e in b;
then (( succ e ) c= b & phi(b) = b) by CKB54:def 1,ORDINAL1:21;
hence e9 c= b by A11;
end;
then A12: e9 = ( first_epsilon_greater_than e ) by CKB57:def 1;
A13: ((( succ ( 0 ) ) = 1 & ( succ 1 ) = 2) & ( succ 2 ) = 3);
then A14: ( f . 1 ) = phi(( succ e )) by A9,A8
.= ( ( omega ) *^ phi(e) ) by ORDINAL2:44
.= ( ( omega ) *^ e ) by CKB54:def 1;
then A15: ( f . 2 ) = phi(( ( omega ) *^ e )) by A13,A8
.= ( exp (phi(e),( omega )) ) by ORDINAL4:31
.= ( exp (e,( omega )) ) by CKB54:def 1;
then A16: ( f . 3 ) = phi(( exp (e,( omega )) )) by A13,A8
.= ( exp (e,( exp (e,( omega )) )) ) by CKB63:1;
A17: ((( e |^|^ ( 0 ) ) = 1 & ( e |^|^ 1 ) = e) & ( e |^|^ 2 ) = ( exp (e,e) )) by CKB29:1,CKB32:1,CKB34:1;
(( omega ) in e & 1 in ( omega )) by CKB61:1;
then A18: 1 in e by ORDINAL1:10;
then (( exp (e,1) ) in ( exp (e,e) ) & ( exp (e,1) ) in ( exp (e,( omega )) )) by ORDINAL4:24;
then A19: (e in ( exp (e,e) ) & e in ( exp (e,( omega )) )) by ORDINAL2:46;
defpred I[ Nat ]
 means
(( e |^|^ $1 ) in ( f . ( $1 + 1 ) ) & ( f . $1 ) in ( e |^|^ ( $1 + 2 ) ));
(e in ( exp (e,e) ) & ( exp (e,e) ) is  limit_ordinal) by A17,A18,CKB40:1,CKB24:1,ORDINAL3:8;
then A20: I[ ( 0 ) ] by A9,A14,A17,ORDINAL1:28,ORDINAL3:32;
A21: (for n holds (I[ n ] implies I[ ( n + 1 ) ]))
proof
let n;
assume that
A22: I[ n ];
A23: (((( n + 1 ) = ( succ n ) & ( ( n + 1 ) + 1 ) = ( succ ( n + 1 ) )) & n in ( omega )) & ( n + 1 ) in ( omega )) by NAT_1:38,ORDINAL1:def 12;
then A24: (( f . ( n + 1 ) ) = phi(( f . n )) & ( f . ( ( n + 1 ) + 1 ) ) = phi(( f . ( n + 1 ) ))) by A10;
thus ( e |^|^ ( n + 1 ) ) in ( f . ( ( n + 1 ) + 1 ) )
proof
per cases  by NAT_1:23;
suppose n = ( 0 );

hence thesis by A15,A17,A19;
end;
suppose n = 1;

hence thesis by A16,A17,A18,A19,ORDINAL4:24;
end;
suppose n >= 2;

then consider k being Nat such that A25: n = ( 2 + k ) by NAT_1:10;
(( 0 ) in ( k + 1 ) & ( k + 2 ) = ( ( k + 1 ) + 1 )) by NAT_1:44;
then phi(( e |^|^ ( k + 2 ) )) = ( e |^|^ ( ( k + 1 ) + 2 ) ) by CKB64:1;
hence thesis by A24,A25,A22,ORDINAL4:24;
end;
end;

(( 0 ) in ( n + 1 ) & ( n + 2 ) = ( ( n + 1 ) + 1 )) by NAT_1:44;
then phi(( e |^|^ ( n + 2 ) )) = ( e |^|^ ( ( n + 1 ) + 2 ) ) by CKB64:1;
then phi(( f . n )) in ( e |^|^ ( ( n + 1 ) + 2 ) ) by A22,ORDINAL4:24;
hence ( f . ( n + 1 ) ) in ( e |^|^ ( ( n + 1 ) + 2 ) ) by A23,A10;
end;
A26: (for n holds I[ n ]) from NAT_1:sch 2(A20,A21);
deffunc G(Ordinal) = ( e |^|^ $1 );
consider g being Ordinal-Sequence such that A27: (( dom g ) = ( omega ) & (for a holds (a in ( omega ) implies ( g . a ) = G(a)))) from ORDINAL2:sch 3;
A28: ( e |^|^ ( omega ) ) = ( lim g ) by A27,CKB31:1;
(1 in ( omega ) & ( omega ) in e) by CKB61:1;
then 1 in e by ORDINAL1:10;
then g is  increasing  increasing Ordinal-Sequence by A27,CKB41:1;
then ( Union g ) is_limes_of g by A27,CKB21:1;
then A29: ( e |^|^ ( omega ) ) = ( Union g ) by A28,ORDINAL2:def 10;
e9 = ( Union g )
proof
thus e9 c= ( Union g )
proof
let x being set;
assume x in e9;
then consider a being set such that A30: (a in ( dom f ) & x in ( f . a )) by CARD_5:2;
reconsider a as (Element of ( omega )) by A6,A30;
(( f . a ) in ( e |^|^ ( a + 2 ) ) & ( g . ( a + 2 ) ) = G(( a + 2 ))) by A26,A27;
then ( f . a ) in ( Union g ) by A27,CARD_5:2;
hence thesis by A30,ORDINAL1:10;
end;

let x being set;
assume x in ( Union g );
then consider a being set such that A31: (a in ( dom g ) & x in ( g . a )) by CARD_5:2;
reconsider a as (Element of ( omega )) by A27,A31;
((( a + 1 ) in ( omega ) & ( e |^|^ a ) in ( f . ( a + 1 ) )) & ( g . a ) = G(a)) by A26,A27;
then ( g . a ) in ( Union f ) by A6,CARD_5:2;
hence thesis by A31,ORDINAL1:10;
end;
hence thesis by A12,A29;
end;
