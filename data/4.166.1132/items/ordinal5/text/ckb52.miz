environ
vocabularies NUMBERS,ORDINAL1,ORDINAL2,TARSKI,MATROID0,XBOOLE_0,CARD_1,FINSET_1,AFINSQ_1,ORDINAL4,RELAT_1,FUNCT_1,VALUED_0,CARD_3,SUBSET_1,ARYTM_3,NAT_1,XXREAL_0,NEWTON,ORDINAL3,FINSEQ_1,ORDINAL5;
notations XBOOLE_0,TARSKI,RELAT_1,FUNCT_1,SUBSET_1,FINSET_1,NUMBERS,MATROID0,ORDINAL1,NAT_1,XXREAL_0,NEWTON,ORDINAL2,AFINSQ_1,ORDINAL3,ORDINAL4,CARD_3,CKB10,CKB11,CKB12,CKB28;
definitions TARSKI,XBOOLE_0,ORDINAL2,CARD_3,CKB10,CKB11,CKB12,CKB28;
theorems TARSKI,FUNCT_1,FINSET_1,NAT_1,ORDERS_1,AFINSQ_1,RELAT_1,ORDINAL1,ORDINAL2,ORDINAL3,ORDINAL4,CARD_2,CARD_3,CARD_5,XBOOLE_0,XBOOLE_1,ZFMISC_1,NEWTON,XXREAL_0,NAT_4,PEPIN,CARD_1,CKB1,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB15,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51;
schemes NAT_1,ORDINAL1,ORDINAL2,AFINSQ_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,NAT_1,XXREAL_0,XREAL_0,ORDINAL2,ORDINAL4,CARD_1,CARD_5,CARD_LAR,NEWTON,AFINSQ_1,FINSET_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB13,CKB14,CKB16,CKB17,CKB18,CKB19,CKB20,CKB44,CKB45;
constructors NEWTON,NAT_1,XXREAL_0,AFINSQ_1,ORDINAL3,CARD_3,ORDINAL4,CKB10,CKB11,CKB12,CKB28;
requirements SUBSET,BOOLE,NUMERALS,ARITHM,REAL;
begin
reserve a for  ordinal number;
reserve b for  ordinal number;
reserve c for  ordinal number;
scheme CriticalNumber2 { a() -> Ordinal,f() -> Ordinal-Sequence,phi(Ordinal) -> Ordinal } : ((a() c= ( Union f() ) & phi(( Union f() )) = ( Union f() )) & (for b holds ((a() c= b & phi(b) = b) implies ( Union f() ) c= b)))
provided
A1: (for a holds (for b holds (a in b implies phi(a) in phi(b))))
and
A2: (for a holds (a is non empty  limit_ordinal implies (for phi being Ordinal-Sequence holds ((( dom phi ) = a & (for b holds (b in a implies ( phi . b ) = phi(b)))) implies phi(a) is_limes_of phi))))
and
A3: (( dom f() ) = ( omega ) & ( f() . ( 0 ) ) = a())
and
A4: (for a holds (a in ( omega ) implies ( f() . ( succ a ) ) = phi(( f() . a ))))
proof
A5: a() in ( rng f() ) by A3,FUNCT_1:def 3;
hence a() c= ( Union f() ) by ZFMISC_1:74;
set phi = f();
A6:now
defpred P[ Ordinal ]
 means
(not $1 c= phi($1));
assume A7: (ex a st P[ a ]);
consider a such that A8: P[ a ] and A9: (for b holds (P[ b ] implies a c= b)) from ORDINAL1:sch 1(A7);
phi(phi(a)) in phi(a) by A1,A8,ORDINAL1:16;
then (not phi(a) c= phi(phi(a))) by ORDINAL1:5;
hence contradiction by A8,A9;
end;
then a() c= phi(a());
then A10: (a() c< phi(a()) or a() = phi(a())) by XBOOLE_0:def 8;
per cases  by A10,ORDINAL1:11;
suppose A11: phi(a()) = a();

A12: (for a being set holds (a in ( omega ) implies ( f() . a ) = a()))
proof
let a being set;
assume a in ( omega );
then reconsider a as (Element of ( omega ));
defpred P[ Nat ]
 means
( f() . $1 ) = a();
A13: P[ ( 0 ) ] by A3;
A14:now
let n being Nat;
assume A15: P[ n ];
n in ( omega ) by ORDINAL1:def 12;
then ( f() . ( succ n ) ) = phi(a()) by A4,A15;
hence P[ ( n + 1 ) ] by A11,NAT_1:38;
end;
(for n being Nat holds P[ n ]) from NAT_1:sch 2(A13,A14);
then P[ a ];
hence thesis;
end;
( rng f() ) = { a() }
proof
thus ( rng f() ) c= { a() }
proof
let x being set;
assume x in ( rng f() );
then consider a being set such that A16: (a in ( dom f() ) & x = ( f() . a )) by FUNCT_1:def 3;
x = a() by A12,A16,A3;
hence thesis by TARSKI:def 1;
end;

thus thesis by A5,ZFMISC_1:31;
end;
then ( Union f() ) = a() by ZFMISC_1:25;
hence (phi(( Union f() )) = ( Union f() ) & (for b holds ((a() c= b & phi(b) = b) implies ( Union f() ) c= b))) by A11;
end;
suppose A17: a() in phi(a());

deffunc F(Ordinal,Ordinal) = phi($2);
deffunc G(Ordinal,T-Sequence) = ( {} );
A18:now
let a;
assume that
A19: ( succ a ) in ( omega );
a in ( succ a ) by ORDINAL1:6;
hence ( phi . ( succ a ) ) = F(a,( phi . a )) by A4,A19,ORDINAL1:10;
end;
A20: (for a holds (a in ( omega ) implies (a() c= ( phi . a ) & ( phi . a ) in ( phi . ( succ a ) ))))
proof
let a;
assume a in ( omega );
then reconsider a as (Element of ( omega ));
defpred N[ Nat ]
 means
(a() c= ( phi . $1 ) & ( phi . $1 ) in ( phi . ( succ $1 ) ));
A21: N[ ( 0 ) ] by A17,A3,A4;
A22:now
let n being Nat;
assume A23: N[ n ];
A24: (((( n + 1 ) = ( succ n ) & ( ( n + 1 ) + 1 ) = ( succ ( n + 1 ) )) & ( n + 1 ) in ( omega )) & ( ( n + 1 ) + 1 ) in ( omega )) by NAT_1:38;
then (( phi . ( n + 1 ) ) = phi(( phi . n )) & ( phi . ( ( n + 1 ) + 1 ) ) = phi(( phi . ( n + 1 ) ))) by A18;
then (( phi . n ) c= ( phi . ( n + 1 ) ) & ( phi . ( n + 1 ) ) in ( phi . ( ( n + 1 ) + 1 ) )) by A1,A6,A23,A24;
hence N[ ( n + 1 ) ] by A23,A24,XBOOLE_1:1;
end;
(for n being Nat holds N[ n ]) from NAT_1:sch 2(A21,A22);
then N[ a ];
hence thesis;
end;
deffunc phi(Ordinal) = phi($1);
consider fi being Ordinal-Sequence such that A25: (( dom fi ) = ( Union phi ) & (for a holds (a in ( Union phi ) implies ( fi . a ) = phi(a)))) from ORDINAL2:sch 3;
1 = ( succ ( 0 ) );
then ( f() . 1 ) = phi(a()) by A3,A4;
then phi(a()) in ( rng phi ) by A3,FUNCT_1:def 3;
then phi(a()) c= ( Union phi ) by ZFMISC_1:74;
then A26: ( Union phi ) <> ( {} ) by A17;
now
let c;
assume c in ( Union phi );
then consider x being set such that A27: (x in ( dom phi ) & c in ( phi . x )) by CARD_5:2;
reconsider x as (Element of ( omega )) by A3,A27;
(( succ c ) c= ( phi . x ) & ( phi . x ) in ( phi . ( succ x ) )) by A20,A27,ORDINAL1:21;
then (( succ c ) in ( phi . ( succ x ) ) & ( succ x ) in ( omega )) by ORDINAL1:12,ORDINAL1:def 12;
hence ( succ c ) in ( Union phi ) by A3,CARD_5:2;
end;
then A28: ( Union phi ) is  limit_ordinal by ORDINAL1:28;
then A29: phi(( Union phi )) is_limes_of fi by A2,A25,A26;
fi is  increasing
proof
let a;
let b;
assume A30: (a in b & b in ( dom fi ));
then (( fi . a ) = phi(a) & ( fi . b ) = phi(b)) by A25,ORDINAL1:10;
hence thesis by A1,A30;
end;
then A31: ( sup fi ) = ( lim fi ) by A25,A26,A28,ORDINAL4:8
.= phi(( Union phi )) by A29,ORDINAL2:def 10;
thus phi(( Union phi )) c= ( Union phi )
proof
let x being set;
assume A32: x in phi(( Union phi ));
then reconsider A = x as Ordinal;
consider b such that A33: (b in ( rng fi ) & A c= b) by A31,A32,ORDINAL2:21;
consider y being set such that A34: (y in ( dom fi ) & b = ( fi . y )) by A33,FUNCT_1:def 3;
reconsider y as Ordinal by A34;
consider z being set such that A35: (z in ( dom phi ) & y in ( phi . z )) by A25,A34,CARD_5:2;
reconsider z as Ordinal by A35;
set c = ( phi . z );
( succ z ) in ( omega ) by A3,A35,ORDINAL1:28;
then ((( phi . ( succ z ) ) = phi(c) & ( phi . ( succ z ) ) in ( rng phi )) & b = phi(y)) by A3,A18,A25,A34,FUNCT_1:def 3;
then (b in phi(c) & phi(c) c= ( Union phi )) by A1,A35,ZFMISC_1:74;
hence thesis by A33,ORDINAL1:12;
end;

thus ( Union f() ) c= phi(( Union f() )) by A6;
let b;
assume A36: (a() c= b & phi(b) = b);
( rng f() ) c= b
proof
let x being set;
assume x in ( rng f() );
then consider a being set such that A37: (a in ( dom f() ) & x = ( f() . a )) by FUNCT_1:def 3;
reconsider a as (Element of ( omega )) by A3,A37;
defpred P[ Nat ]
 means
( f() . $1 ) in b;
a() <> b by A17,A36;
then a() c< b by A36,XBOOLE_0:def 8;
then A38: P[ ( 0 ) ] by A3,ORDINAL1:11;
A39:now
let n being Nat;
assume P[ n ];
then (phi(( f() . n )) in b & n in ( omega )) by A1,A36,ORDINAL1:def 12;
then ( f() . ( succ n ) ) in b by A4;
hence P[ ( n + 1 ) ] by NAT_1:38;
end;
(for n being Nat holds P[ n ]) from NAT_1:sch 2(A38,A39);
then P[ a ];
hence thesis by A37;
end;
then (( Union f() ) c= ( union b ) & ( union b ) c= b) by ORDINAL2:5,ZFMISC_1:77;
hence ( Union f() ) c= b by XBOOLE_1:1;
end;
end;
