environ
vocabularies GROUP_1,COMPLFLD,SUPINF_2,CARD_1,MATRIX_1,NUMBERS,ARYTM_3,ARYTM_1,RELAT_1,XCMPLX_0,ORDINAL1,SUBSET_1,FINSEQ_1,TREES_1,VECTSP_1,NAT_1,ALGSTR_0,FUNCT_1,BINOP_2,COMPLEX1,XXREAL_0,VALUED_0,TARSKI,ORDINAL4,MATRIX_5;
notations TARSKI,SUBSET_1,ORDINAL1,NAT_1,NAT_D,RELAT_1,FUNCT_1,VALUED_0,STRUCT_0,ALGSTR_0,FINSEQ_1,BINOP_1,MATRIX_3,MATRIX_1,NUMBERS,MATRIX_4,COMPLEX1,COMPLFLD,XCMPLX_0,GROUP_1,BINOP_2,XXREAL_0,VECTSP_1,RLVECT_1,CKB3,CKB4,CKB9,CKB10,CKB11,CKB12,CKB13,CKB22,CKB34;
definitions MATRIX_4,CKB3,CKB4,CKB9,CKB10,CKB11,CKB12,CKB13,CKB22;
theorems FINSEQ_1,FUNCT_1,NAT_1,RLVECT_1,MATRIX_3,VECTSP_1,MATRIX_1,MATRIX_4,COMPLFLD,COMPLEX1,GROUP_1,BINOP_2,FINSEQ_3,XCMPLX_0,XREAL_1,VALUED_0,XXREAL_0,XREAL_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes NAT_1;
registrations RELSET_1,NUMBERS,XCMPLX_0,XREAL_0,STRUCT_0,VECTSP_1,COMPLFLD,ORDINAL1,RVSUM_1;
constructors BINOP_1,XXREAL_0,COMPLFLD,FVSUM_1,MATRIX_3,MATRIX_4,BINOP_2,NAT_D,RVSUM_1,RELSET_1,CKB3,CKB4,CKB9,CKB10,CKB11,CKB12,CKB13,CKB22,CKB34;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
theorem
(for i,j being (Element of ( NAT )) holds (for M1,M2 being (Matrix of ( COMPLEX )) holds (( len M2 ) > ( 0 ) implies (ex s being (FinSequence of ( COMPLEX )) st ((( len s ) = ( len M2 ) & ( s . 1 ) = ( ( M1 * (i,1) ) * ( M2 * (1,j) ) )) & (for k being (Element of ( NAT )) holds ((1 <= k & k < ( len M2 )) implies ( s . ( k + 1 ) ) = ( ( s . k ) + ( ( M1 * (i,( k + 1 )) ) * ( M2 * (( k + 1 ),j) ) ) ))))))))
proof
let i being (Element of ( NAT ));
let j being (Element of ( NAT ));
let M1 being (Matrix of ( COMPLEX ));
let M2 being (Matrix of ( COMPLEX ));
defpred P[ (Element of ( NAT )) ]
 means
(ex q being (FinSequence of ( COMPLEX )) st ((1 <= ( $1 + 1 ) & ( $1 + 1 ) <= ( len M2 )) implies ((( len q ) = ( $1 + 1 ) & ( q . 1 ) = ( ( M1 * (i,1) ) * ( M2 * (1,j) ) )) & (for k being (Element of ( NAT )) holds ((1 <= k & k < ( $1 + 1 )) implies ( q . ( k + 1 ) ) = ( ( q . k ) + ( ( M1 * (i,( k + 1 )) ) * ( M2 * (( k + 1 ),j) ) ) ))))));
set q0 = <* ( ( M1 * (i,1) ) * ( M2 * (1,j) ) ) *>;
A1: (for k being (Element of ( NAT )) holds ((1 <= k & k < 1) implies ( q0 . ( k + 1 ) ) = ( ( q0 . k ) + ( ( M1 * (i,( k + 1 )) ) * ( M2 * (( k + 1 ),j) ) ) )));
A2: (for i2 being (Element of ( NAT )) holds (P[ i2 ] implies P[ ( i2 + 1 ) ]))
proof
let i2 being (Element of ( NAT ));
set k0 = i2;
assume P[ i2 ];
then consider q2 being (FinSequence of ( COMPLEX )) such that A3: ((1 <= ( i2 + 1 ) & ( i2 + 1 ) <= ( len M2 )) implies ((( len q2 ) = ( i2 + 1 ) & ( q2 . 1 ) = ( ( M1 * (i,1) ) * ( M2 * (1,j) ) )) & (for k2 being (Element of ( NAT )) holds ((1 <= k2 & k2 < ( i2 + 1 )) implies ( q2 . ( k2 + 1 ) ) = ( ( q2 . k2 ) + ( ( M1 * (i,( k2 + 1 )) ) * ( M2 * (( k2 + 1 ),j) ) ) )))));
set q3 = ( q2 ^ <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> );
((1 <= ( ( i2 + 1 ) + 1 ) & ( ( i2 + 1 ) + 1 ) <= ( len M2 )) implies ((( len q3 ) = ( ( i2 + 1 ) + 1 ) & ( q3 . 1 ) = ( ( M1 * (i,1) ) * ( M2 * (1,j) ) )) & (for k being (Element of ( NAT )) holds ((1 <= k & k < ( ( i2 + 1 ) + 1 )) implies ( q3 . ( k + 1 ) ) = ( ( q3 . k ) + ( ( M1 * (i,( k + 1 )) ) * ( M2 * (( k + 1 ),j) ) ) )))))
proof
assume that
1 <= ( ( i2 + 1 ) + 1 )
and
A4: ( ( i2 + 1 ) + 1 ) <= ( len M2 );
per cases  by NAT_1:12;
suppose A5: 1 <= ( i2 + 1 );

A6: ( len q3 ) = ( ( len q2 ) + ( len <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> ) ) by FINSEQ_1:22
.= ( ( i2 + 1 ) + 1 ) by A3,A4,A5,FINSEQ_1:39,NAT_1:13;
A7: (for k2 being (Element of ( NAT )) holds ((1 <= k2 & k2 < ( ( i2 + 1 ) + 1 )) implies ( q3 . ( k2 + 1 ) ) = ( ( q3 . k2 ) + ( ( M1 * (i,( k2 + 1 )) ) * ( M2 * (( k2 + 1 ),j) ) ) )))
proof
let k2 being (Element of ( NAT ));
assume that
A8: 1 <= k2
and
A9: k2 < ( ( i2 + 1 ) + 1 );
A10: k2 <= ( i2 + 1 ) by A9,NAT_1:13;
per cases  by A10,XXREAL_0:1;
suppose A11: k2 < ( i2 + 1 );

then k2 < ( len q3 ) by A6,NAT_1:13;
then k2 < ( ( len q2 ) + ( len <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> ) ) by FINSEQ_1:22;
then k2 < ( ( len q2 ) + 1 ) by FINSEQ_1:39;
then k2 <= ( len q2 ) by NAT_1:13;
then k2 in ( dom q2 ) by A8,FINSEQ_3:25;
then A12: ( q3 . k2 ) = ( q2 . k2 ) by FINSEQ_1:def 7;
( k2 + 1 ) < ( ( i2 + 1 ) + 1 ) by A11,XREAL_1:6;
then ( k2 + 1 ) < ( ( len q2 ) + ( len <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> ) ) by A6,FINSEQ_1:22;
then ( k2 + 1 ) < ( ( len q2 ) + 1 ) by FINSEQ_1:39;
then A13: ( k2 + 1 ) <= ( len q2 ) by NAT_1:13;
1 <= ( k2 + 1 ) by A8,NAT_1:13;
then ( k2 + 1 ) in ( dom q2 ) by A13,FINSEQ_3:25;
then ( q3 . ( k2 + 1 ) ) = ( q2 . ( k2 + 1 ) ) by FINSEQ_1:def 7;
hence thesis by A3,A4,A5,A8,A11,A12,NAT_1:13;
end;
suppose A14: k2 = ( i2 + 1 );

then k2 < ( ( i2 + 1 ) + 1 ) by NAT_1:13;
then k2 < ( ( len q2 ) + ( len <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> ) ) by A6,FINSEQ_1:22;
then k2 < ( ( len q2 ) + 1 ) by FINSEQ_1:39;
then k2 <= ( len q2 ) by NAT_1:13;
then k2 in ( dom q2 ) by A8,FINSEQ_3:25;
then A15: ( q3 . k2 ) = ( q2 . k2 ) by FINSEQ_1:def 7;
1 in ( Seg 1 ) by FINSEQ_1:3;
then (( <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> . 1 ) = ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) & 1 in ( dom <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> )) by FINSEQ_1:def 8;
hence thesis by A3,A4,A5,A14,A15,FINSEQ_1:def 7,NAT_1:13;
end;
end;
1 < ( len ( q2 ^ <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> ) ) by A5,A6,NAT_1:13;
then 1 < ( ( len q2 ) + ( len <* ( ( q2 . ( k0 + 1 ) ) + ( ( M1 * (i,( ( k0 + 1 ) + 1 )) ) * ( M2 * (( ( k0 + 1 ) + 1 ),j) ) ) ) *> ) ) by FINSEQ_1:22;
then 1 < ( ( len q2 ) + 1 ) by FINSEQ_1:39;
then 1 <= ( len q2 ) by NAT_1:13;
then 1 in ( dom q2 ) by FINSEQ_3:25;
hence thesis by A3,A4,A5,A6,A7,FINSEQ_1:def 7,NAT_1:13;
end;
end;
hence thesis;
end;
(( len q0 ) = 1 & ( q0 . 1 ) = ( ( M1 * (i,1) ) * ( M2 * (1,j) ) )) by FINSEQ_1:39,FINSEQ_1:def 8;
then A16: P[ ( 0 ) ] by A1;
A17: (for j being (Element of ( NAT )) holds P[ j ]) from NAT_1:sch 1(A16,A2);
assume A18: ( len M2 ) > ( 0 );
then ( ( 0 ) + 1 ) <= ( len M2 ) by NAT_1:8;
then ( ( ( 0 ) + 1 ) - 1 ) <= ( ( len M2 ) - 1 ) by XREAL_1:9;
then A19: ( ( len M2 ) -' 1 ) = ( ( len M2 ) - 1 ) by XREAL_0:def 2;
then ( ( 0 ) + 1 ) <= ( ( ( len M2 ) -' 1 ) + 1 ) by A18,NAT_1:8;
hence thesis by A19,A17;
end;
