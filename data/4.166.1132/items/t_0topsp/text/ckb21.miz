environ
vocabularies XBOOLE_0,FUNCT_1,SUBSET_1,RELAT_1,TARSKI,PRE_TOPC,TOPS_2,RCOMP_1,EQREL_1,STRUCT_0,RELAT_2,BORSUK_1,ORDINAL2,CARD_3,CLASSES1,T_0TOPSP,FUNCT_2;
notations TARSKI,XBOOLE_0,SUBSET_1,CLASSES1,RELAT_2,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,PRE_TOPC,TOPS_2,BORSUK_1,EQREL_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB17,CKB19;
definitions TOPS_2,RELAT_2,RELSET_1,STRUCT_0,PRE_TOPC,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB17;
theorems FUNCT_1,FUNCT_2,EQREL_1,RELAT_1,TOPS_2,PRE_TOPC,BORSUK_1,TARSKI,RELSET_1,XBOOLE_0,RELAT_2,PARTFUN1,ORDERS_1,SUBSET_1,CLASSES1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB20;
schemes FUNCT_2,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,STRUCT_0,PRE_TOPC,BORSUK_1,EQREL_1,RELSET_1,CKB7,CKB18;
constructors SETFAM_1,RFINSEQ,TOPS_2,BORSUK_1,CLASSES1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8;
requirements SUBSET,BOOLE;
begin
theorem
(for T,S being non  empty TopSpace holds ((ex h being (Function of ( T_0-reflex S ),( T_0-reflex T )) st (h is  being_homeomorphism & ( T_0-canonical_map T ),( h * ( T_0-canonical_map S ) ) are_fiberwise_equipotent )) implies T,S are_homeomorphic ))
proof
let T being non  empty TopSpace;
let S being non  empty TopSpace;
set F = ( T_0-canonical_map T );
set G = ( T_0-canonical_map S );
set TR = ( T_0-reflex T );
set SR = ( T_0-reflex S );
given h being (Function of SR,TR) such that
A1: h is  being_homeomorphism
and
A2: F,( h * G ) are_fiberwise_equipotent ;

consider f being Function such that A3: ( dom f ) = ( dom F ) and A4: ( rng f ) = ( dom ( h * G ) ) and A5: f is  one-to-one and A6: F = ( ( h * G ) * f ) by A2,CLASSES1:77;
A7: ( dom f ) = (the carrier of T) by A3,FUNCT_2:def 1;
A8: h is  continuous by A1,TOPS_2:def 5;
A9: h is  one-to-one by A1,TOPS_2:def 5;
reconsider f as (Function of T,S) by A4,A7,FUNCT_2:def 1,RELSET_1:4;
take f;
thus A10: (( dom f ) = ( [#] T ) & ( rng f ) = ( [#] S )) by A4,FUNCT_2:def 1;
A11: ( rng h ) = ( [#] TR ) by A1,TOPS_2:def 5;
A12: ( [#] SR ) <> ( {} );
A13: (for A being (Subset of S) holds (A is  open implies ( f " A ) is  open))
proof
set g = ( h * G );
let A being (Subset of S);
set B = ( g .: A );
A14: ( h " ) is  continuous by A1,TOPS_2:def 5;
assume A15: A is  open;
A16: (for x1,x2 being (Element of S) holds ((x1 in A & ( g . x1 ) = ( g . x2 )) implies x2 in A))
proof
let x1 being (Element of S);
let x2 being (Element of S);
assume that
A17: x1 in A
and
A18: ( g . x1 ) = ( g . x2 );
( h . ( G . x1 ) ) = ( g . x2 ) by A18,FUNCT_2:15;
then ( h . ( G . x1 ) ) = ( h . ( G . x2 ) ) by FUNCT_2:15;
then ( G . x1 ) = ( G . x2 ) by A9,FUNCT_2:19;
hence thesis by A15,A17,CKB13:1;
end;
G is  open by CKB15:1;
then ( G .: A ) is  open by A15,CKB3:def 1;
then A19: ( ( h " ) " ( G .: A ) ) is  open by A12,A14,TOPS_2:43;
B1: h is  onto by A11,FUNCT_2:def 3;
( h .: ( G .: A ) ) = ( ( (h qua Function) " ) " ( G .: A ) ) by A9,FUNCT_1:84;
then ( h .: ( G .: A ) ) is  open by A9,A19,B1,TOPS_2:def 4;
then A20: ( ( h * G ) .: A ) is  open by RELAT_1:126;
( [#] ( T_0-reflex T ) ) <> ( {} );
then A21: ( F " B ) is  open by A20,TOPS_2:43;
( F " B ) = ( f " ( g " ( g .: A ) ) ) by A6,RELAT_1:146;
hence thesis by A21,A16,CKB1:1;
end;
A22: ( dom h ) = ( [#] SR ) by A1,TOPS_2:def 5;
A23: (for A being (Subset of T) holds (A is  open implies ( (( f " ) qua (Function of S,T)) " A ) is  open))
proof
set g = ( ( h " ) * F );
let A being (Subset of T);
set B = ( g .: A );
assume A24: A is  open;
A25: (for x1,x2 being (Element of T) holds ((x1 in A & ( g . x1 ) = ( g . x2 )) implies x2 in A))
proof
let x1 being (Element of T);
let x2 being (Element of T);
assume that
A26: x1 in A
and
A27: ( g . x1 ) = ( g . x2 );
( ( h " ) . ( F . x1 ) ) = ( g . x2 ) by A27,FUNCT_2:15;
then A28: ( ( h " ) . ( F . x1 ) ) = ( ( h " ) . ( F . x2 ) ) by FUNCT_2:15;
( h " ) is  one-to-one by A11,A9,TOPS_2:50;
then ( F . x1 ) = ( F . x2 ) by A28,FUNCT_2:19;
hence thesis by A24,A26,CKB13:1;
end;
F = ( h * ( G * f ) ) by A6,RELAT_1:36;
then g = ( ( ( h " ) * h ) * ( G * f ) ) by RELAT_1:36;
then g = ( ( id (the carrier of SR) ) * ( G * f ) ) by A22,A11,A9,TOPS_2:52;
then ( g * ( f " ) ) = ( ( G * f ) * ( f " ) ) by FUNCT_2:17;
then ( g * ( f " ) ) = ( G * ( f * ( f " ) ) ) by RELAT_1:36;
then ( g * ( f " ) ) = ( G * ( id (the carrier of S) ) ) by A5,A10,TOPS_2:52;
then G = ( g * ( f " ) ) by FUNCT_2:17;
then A29: ( G " B ) = ( ( f " ) " ( g " B ) ) by RELAT_1:146;
F is  open by CKB15:1;
then ( F .: A ) is  open by A24,CKB3:def 1;
then A30: ( h " ( F .: A ) ) is  open by A11,A8,TOPS_2:43;
B = ( ( h " ) .: ( F .: A ) ) by RELAT_1:126;
then ( G " B ) = ( G " ( h " ( F .: A ) ) ) by A11,A9,TOPS_2:55;
then ( G " B ) is  open by A12,A30,TOPS_2:43;
hence thesis by A25,A29,CKB1:1;
end;
thus f is  one-to-one by A5;
( [#] S ) <> ( {} );
hence f is  continuous by A13,TOPS_2:43;
( [#] T ) <> ( {} );
hence thesis by A23,TOPS_2:43;
end;
