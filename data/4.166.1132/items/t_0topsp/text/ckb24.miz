environ
vocabularies XBOOLE_0,FUNCT_1,SUBSET_1,RELAT_1,TARSKI,PRE_TOPC,TOPS_2,RCOMP_1,EQREL_1,STRUCT_0,RELAT_2,BORSUK_1,ORDINAL2,CARD_3,CLASSES1,T_0TOPSP,FUNCT_2;
notations TARSKI,XBOOLE_0,SUBSET_1,CLASSES1,RELAT_2,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,PRE_TOPC,TOPS_2,BORSUK_1,EQREL_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB17,CKB19;
definitions TOPS_2,RELAT_2,RELSET_1,STRUCT_0,PRE_TOPC,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB17;
theorems FUNCT_1,FUNCT_2,EQREL_1,RELAT_1,TOPS_2,PRE_TOPC,BORSUK_1,TARSKI,RELSET_1,XBOOLE_0,RELAT_2,PARTFUN1,ORDERS_1,SUBSET_1,CLASSES1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB20,CKB21,CKB22,CKB23;
schemes FUNCT_2,RELSET_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,STRUCT_0,PRE_TOPC,BORSUK_1,EQREL_1,RELSET_1,CKB7,CKB18;
constructors SETFAM_1,RFINSEQ,TOPS_2,BORSUK_1,CLASSES1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8;
requirements SUBSET,BOOLE;
begin
theorem
(for T being non empty TopSpace holds (for T0 being T_0-TopSpace holds (for f being  continuous (Function of T,T0) holds (ex h being  continuous (Function of ( T_0-reflex T ),T0) st f = ( h * ( T_0-canonical_map T ) )))))
proof
let T being non empty TopSpace;
let T0 being T_0-TopSpace;
let f being  continuous (Function of T,T0);
set F = ( T_0-canonical_map T );
set R = ( Indiscernibility T );
set TR = ( T_0-reflex T );
defpred X[ set,set ]
 means
$2 in ( f .: $1 );
A1: (for C being set holds (C in (the carrier of TR) implies (ex y being set st (y in (the carrier of T0) & X[ C,y ]))))
proof
let C being set;
assume C in (the carrier of TR);
then consider p being (Point of T) such that A2: C = ( Class (R,p) ) by CKB10:1;
A3: ( f . p ) in { ( f . p ) } by TARSKI:def 1;
( f .: C ) = { ( f . p ) } by A2,CKB23:1;
hence thesis by A3;
end;
(ex h being (Function of (the carrier of TR),(the carrier of T0)) st (for C being set holds (C in (the carrier of TR) implies X[ C,( h . C ) ]))) from FUNCT_2:sch 1(A1);
then consider h being (Function of (the carrier of TR),(the carrier of T0)) such that A4: (for C being set holds (C in (the carrier of TR) implies ( h . C ) in ( f .: C )));
A5: (for p being (Point of T) holds ( h . ( Class (R,p) ) ) = ( f . p ))
proof
let p being (Point of T);
( Class (R,p) ) is (Point of TR) by CKB10:1;
then ( h . ( Class (R,p) ) ) in ( f .: ( Class (R,p) ) ) by A4;
then ( h . ( Class (R,p) ) ) in { ( f . p ) } by CKB23:1;
hence thesis by TARSKI:def 1;
end;
reconsider h as (Function of TR,T0);
A6: ( [#] T0 ) <> ( {} );
(for W being (Subset of T0) holds (W is  open implies ( h " W ) is  open))
proof
let W being (Subset of T0);
assume W is  open;
then A7: ( f " W ) is  open by A6,TOPS_2:43;
set V = ( h " W );
(for x being set holds (x in ( union V ) iff x in ( f " W )))
proof
let x being set;
hereby
assume x in ( union V );
then consider C being set such that A8: x in C and A9: C in V by TARSKI:def 4;
consider p being (Point of T) such that A10: C = ( Class (R,p) ) by A9,CKB10:1;
x in (the carrier of T) by A8,A10;
then A11: x in ( dom f ) by FUNCT_2:def 1;
[ x,p ] in R by A8,A10,EQREL_1:19;
then A12: C = ( Class (R,x) ) by A8,A10,EQREL_1:35;
( h . C ) in W by A9,FUNCT_1:def 7;
then ( f . x ) in W by A5,A8,A12;
hence x in ( f " W ) by A11,FUNCT_1:def 7;
end;
assume A13: x in ( f " W );
then ( f . x ) in W by FUNCT_1:def 7;
then A14: ( h . ( Class (R,x) ) ) in W by A5,A13;
( Class (R,x) ) is (Point of TR) by A13,CKB10:1;
then A15: ( Class (R,x) ) in V by A14,FUNCT_2:38;
x in ( Class (R,x) ) by A13,EQREL_1:20;
hence thesis by A15,TARSKI:def 4;
end;
then ( union V ) = ( f " W ) by TARSKI:1;
then ( union V ) in (the topology of T) by A7,PRE_TOPC:def 2;
hence thesis by CKB9:1;
end;
then reconsider h as  continuous (Function of TR,T0) by A6,TOPS_2:43;
set H = ( h * F );
(for x being set holds (x in (the carrier of T) implies ( f . x ) = ( H . x )))
proof
let x being set;
assume A16: x in (the carrier of T);
then ( Class (R,x) ) in ( Class R ) by EQREL_1:def 3;
then A17: ( Class (R,x) ) in (the carrier of TR) by BORSUK_1:def 7;
(x in ( dom F ) & ( F . x ) = ( Class (R,x) )) by A16,CKB11:1,FUNCT_2:def 1;
then ( ( h * F ) . x ) = ( h . ( Class (R,x) ) ) by FUNCT_1:13;
then ( H . x ) in ( f .: ( Class (R,x) ) ) by A4,A17;
then ( H . x ) in { ( f . x ) } by A16,CKB23:1;
hence thesis by TARSKI:def 1;
end;
hence thesis by FUNCT_2:12;
end;
