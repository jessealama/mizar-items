environ
vocabularies NUMBERS,XCMPLX_0,ORDINAL1,ARYTM_1,XXREAL_0,NAT_1,CARD_1,ARYTM_3,ABIAN,SUBSET_1,RELAT_1,INT_1,FINSEQ_1,FUNCT_1,FINSEQ_4,XBOOLE_0,FINSET_1,GRAPH_2,ORDINAL4,GLIB_000,GLIB_001,TARSKI,ZFMISC_1,RCOMP_1,GRAPH_1,RELAT_2,REWRITE1,FUNCOP_1,GLIB_002,PARTFUN1,MEMBERED,TOPGEN_1,CHORD;
notations TARSKI,XBOOLE_0,SUBSET_1,XXREAL_2,ORDINAL1,INT_1,XCMPLX_0,XXREAL_0,DOMAIN_1,RELAT_1,FUNCT_1,FUNCT_2,FINSEQ_1,CARD_1,FINSET_1,NAT_1,ZFMISC_1,GLIB_000,GLIB_001,GLIB_002,FUNCOP_1,ABIAN,ENUMSET1,FINSEQ_4,NUMBERS,GRAPH_2,MEMBERED,CKB18,CKB38,CKB49,CKB55,CKB66,CKB69,CKB76,CKB83,CKB92,CKB99,CKB100,CKB113;
definitions TARSKI,XBOOLE_0,GLIB_000,GLIB_001,GLIB_002,FUNCOP_1,CKB18,CKB38,CKB49,CKB55,CKB66,CKB69,CKB76,CKB83,CKB92,CKB99,CKB113;
theorems FINSEQ_1,FUNCT_1,GLIB_000,GLIB_001,GLIB_002,GRAPH_2,GRAPH_3,TREES_1,INT_1,JORDAN12,NAT_1,ORDINAL1,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,FUNCOP_1,FUNCT_2,FINSEQ_3,FINSEQ_4,ZFMISC_1,ABIAN,CARD_2,ENUMSET1,FINSEQ_2,XREAL_1,MEMBERED,FINSEQ_5,XXREAL_0,NAT_D,PARTFUN1,XXREAL_2,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115;
schemes NAT_1,GRAPH_5,FUNCT_2,FRAENKEL,CKB35;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,GLIB_000,ABIAN,GRAPH_2,GLIB_001,GLIB_002,FUNCT_2,XXREAL_2,CARD_1,RELSET_1,CKB71,CKB72,CKB73,CKB116,CKB117,CKB118,CKB119;
constructors DOMAIN_1,REAL_1,NAT_D,FINSEQ_4,GRAPH_2,GLIB_001,GLIB_002,VALUED_1,XXREAL_2,RELSET_1,CKB18,CKB38,CKB49,CKB55,CKB66,CKB69,CKB76,CKB83,CKB92,CKB99,CKB113;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
theorem
(for G being  chordal _Graph holds (for P being (Path of G) holds ((P is  open & P is  chordless) implies (for x,e being set holds ((((not x in ( P .vertices() )) & e Joins ( P .last() ),x,G) & (not (ex f being set st f Joins ( P . ( ( len P ) - 2 ) ),x,G))) implies ((( P .addEdge e ) is  Path-like & ( P .addEdge e ) is  open) & ( P .addEdge e ) is  chordless))))))
proof
let G being  chordal _Graph;
let P being (Path of G);
assume that
A1: P is  open
and
A2: P is  chordless;
let x being set,e being set;
assume that
A3: (not x in ( P .vertices() ))
and
A4: e Joins ( P .last() ),x,G
and
A5: (not (ex f being set st f Joins ( P . ( ( len P ) - 2 ) ),x,G));
reconsider Q = ( P .addEdge e ) as (Path of G) by A1,A3,A4,GLIB_001:151;
A6: ( len Q ) = ( ( len P ) + 2 ) by A4,GLIB_001:64;
defpred P[ Nat ]
 means
((4 <= ( 2 * $1 ) & ( 2 * $1 ) <= ( ( len P ) + 1 )) implies (for j being  odd Nat holds (( j + ( 2 * $1 ) ) = ( ( len P ) + 2 ) implies (not (ex e being set st e Joins ( Q . j ),x,G)))));
A7:now
let n being  odd Nat;
assume that
A8: n <= ( len P );
1 <= n by CKB2:1;
then n in ( dom P ) by A8,FINSEQ_3:25;
hence ( P . n ) = ( Q . n ) by A4,GLIB_001:65;
end;
A9: ( Q .last() ) = x by A4,GLIB_001:63;
(for k being Nat holds ((for a being Nat holds (a < k implies P[ a ])) implies P[ k ]))
proof
let k being Nat;
assume that
A10: (for a being Nat holds (a < k implies P[ a ]));
assume that
A11: 4 <= ( 2 * k )
and
( 2 * k ) <= ( ( len P ) + 1 );
let j being  odd Nat;
assume that
A12: ( j + ( 2 * k ) ) = ( ( len P ) + 2 );
( j + 4 ) <= ( j + ( 2 * k ) ) by A11,XREAL_1:7;
then A13: ( ( j + 4 ) - 4 ) <= ( ( ( len P ) + 2 ) - 4 ) by A12,XREAL_1:9;
A14: ( ( len P ) - 2 ) <= ( len P ) by XREAL_1:43;
then A15: j <= ( len P ) by A13,XXREAL_0:2;
A16: j in ( NAT ) by ORDINAL1:def 12;
let e being set;
assume that
A17: e Joins ( Q . j ),x,G;
per cases  by A13,XXREAL_0:1;
suppose j = ( ( len P ) - 2 );

then ( Q . j ) = ( P . ( ( len P ) - 2 ) ) by A7,XREAL_1:43;
hence contradiction by A5,A17;
end;
suppose A18: j < ( ( len P ) - ( 2 * 1 ) );

reconsider lP2 = ( ( len P ) + 2 ) as  odd (Element of ( NAT ));
reconsider jj = j as  odd (Element of ( NAT )) by ORDINAL1:def 12;
set B = ( Q .cut (jj,lP2) );
( len P ) < ( ( len P ) + 2 ) by XREAL_1:29;
then A19: j <= ( ( len P ) + 2 ) by A15,XXREAL_0:2;
then A20: ( B .last() ) = x by A9,A6,GLIB_001:37;
A21: ( ( len B ) + j ) = ( ( ( len P ) + 2 ) + 1 ) by A6,A19,GLIB_001:36;
A22:now
let i being  even Nat;
assume that
A23: i < ( ( len B ) - 1 );
( j + i ) < ( ( ( len B ) - 1 ) + j ) by A23,XREAL_1:8;
then A24: ( j + i ) <= ( ( ( len P ) + 2 ) - 2 ) by A21,CKB4:1;
( ( len B ) - 1 ) < ( len B ) by XREAL_1:44;
then A25: i < ( len B ) by A23,XXREAL_0:2;
A26: i in ( NAT ) by ORDINAL1:def 12;
then ( j + i ) in ( dom Q ) by A6,A19,A25,GLIB_001:36;
then A27: 1 <= ( j + i ) by FINSEQ_3:25;
( B . ( i + 1 ) ) = ( Q . ( j + i ) ) by A6,A19,A26,A25,GLIB_001:36;
hence (( B . ( i + 1 ) ) = ( P . ( j + i ) ) & ( j + i ) in ( dom P )) by A7,A27,A24,FINSEQ_3:25;
end;
set C = ( B .addEdge e );
A28: ( B .first() ) = ( Q . j ) by A6,A19,GLIB_001:37;
A29: ( B .first() ) = ( Q . j ) by A6,A19,GLIB_001:37;
then A30: e Joins ( B .last() ),( B .first() ),G by A17,A20,GLIB_000:14;
A31:now
let n being  odd Nat;
assume that
A32: n <= ( len B );
1 <= n by CKB2:1;
then n in ( dom B ) by A32,FINSEQ_3:25;
hence ( C . n ) = ( B . n ) by A30,GLIB_001:65;
end;
A33: ( ( ( len P ) + 3 ) - ( ( len P ) - 2 ) ) < ( ( ( len P ) + 3 ) - j ) by A18,XREAL_1:15;
then A34: 3 < ( len B ) by A21,XXREAL_0:2;
( ( len B ) + 2 ) > ( 5 + 2 ) by A21,A33,XREAL_1:8;
then A35: ( len C ) > 7 by A17,A20,GLIB_000:14,GLIB_001:64;
A36:now
assume ( C .length() ) <= 3;
then ( 2 * ( C .length() ) ) <= ( 2 * 3 ) by XREAL_1:64;
then ( ( 2 * ( C .length() ) ) + 1 ) <= ( ( 2 * 3 ) + 1 ) by XREAL_1:6;
hence contradiction by A35,GLIB_001:112;
end;
( P .vertexAt j ) = ( P . j ) by A15,GLIB_001:def 8;
then ( P . j ) in ( P .vertices() ) by A16,A13,A14,GLIB_001:89,XXREAL_0:2;
then ( B .first() ) in ( P .vertices() ) by A7,A13,A14,A28,XXREAL_0:2;
then A37: B is  open by A3,A20,GLIB_001:def 24;
then C is  Cycle-like by A17,A34,A29,A20,CKB37:1,GLIB_000:14;
then C is  chordal by A36,CKB113:def 1;
then consider m being  odd Nat,n being  odd Nat such that A38: ( m + 2 ) < n and A39: n <= ( len C ) and A40: ( C . m ) <> ( C . n ) and A41: (ex e being set st e Joins ( C . m ),( C . n ),G) and A42: (C is  Cycle-like implies (((not (m = 1 & n = ( len C ))) & (not (m = 1 & n = ( ( len C ) - 2 )))) & (not (m = 3 & n = ( len C ))))) by CKB101:1;
consider e being set such that A43: e Joins ( C . m ),( C . n ),G by A41;
1 <= m by CKB2:1;
then ( 1 - 1 ) <= ( m - 1 ) by XREAL_1:9;
then reconsider m1 = ( m - 1 ) as  even (Element of ( NAT )) by INT_1:3;
reconsider m1 as  even Nat;
A44: ( len C ) = ( ( len B ) + 2 ) by A17,A20,GLIB_000:14,GLIB_001:64;
then ( m + 2 ) < ( ( len B ) + 2 ) by A38,A39,XXREAL_0:2;
then A45: ( ( m + 2 ) - 2 ) < ( ( ( len B ) + 2 ) - 2 ) by XREAL_1:9;
then A46: m1 < ( ( len B ) - 1 ) by XREAL_1:9;
then A47: ( B . ( m1 + 1 ) ) = ( P . ( j + m1 ) ) by A22;
A48: ( j + m1 ) in ( dom P ) by A22,A46;
then A49: ( j + m1 ) <= ( len P ) by FINSEQ_3:25;
A50: ( C .last() ) = ( Q . j ) by A28,A30,GLIB_001:63;
now
assume A51: n = ( len C );
then e Joins ( P . ( j + m1 ) ),( Q . j ),G by A31,A50,A43,A45,A47;
then e Joins ( P . ( j + m1 ) ),( P . j ),G by A7,A13,A14,XXREAL_0:2;
then A52: e Joins ( P . j ),( P . ( j + m1 ) ),G by GLIB_000:14;
now
assume m <= 3;
then m <= 4 by XXREAL_0:2;
hence contradiction by A17,A34,A29,A20,A37,A42,A51,CKB8:1,CKB37:1,GLIB_000:14;
end;
then A53: ( ( 2 + 1 ) - 1 ) < ( m - 1 ) by XREAL_1:9;
then A54: j < ( j + m1 ) by XREAL_1:29;
( j + 2 ) < ( j + m1 ) by A53,XREAL_1:8;
hence contradiction by A1,A2,A49,A52,A54,CKB110:1;
end;
then n < ( ( len B ) + ( 2 * 1 ) ) by A44,A39,XXREAL_0:1;
then A55: n <= ( ( ( len B ) + 2 ) - 2 ) by CKB4:1;
then A56: ( C . n ) = ( B . n ) by A31;
1 <= n by CKB2:1;
then ( 1 - 1 ) <= ( n - 1 ) by XREAL_1:9;
then reconsider n1 = ( n - 1 ) as  even (Element of ( NAT )) by INT_1:3;
reconsider n1 as  even Nat;
( ( m + 2 ) - 1 ) < ( n - 1 ) by A38,XREAL_1:9;
then ( j + ( m1 + 2 ) ) < ( j + n1 ) by XREAL_1:8;
then A57: ( ( j + m1 ) + 2 ) < ( j + n1 );
now
( C . m ) = ( B . m ) by A31,A45;
then A58: ( C . m ) = ( Q . ( j + m1 ) ) by A7,A47,A49;
A59: ( len P ) < ( ( len P ) + 2 ) by XREAL_1:29;
( j + m1 ) <= ( len P ) by A48,FINSEQ_3:25;
then consider kk being Nat such that A60: ( ( j + m1 ) + ( 2 * kk ) ) = ( ( len P ) + 2 ) by A59,CKB15:1,XXREAL_0:2;
assume A61: n = ( len B );
A62:now
assume ( 2 * kk ) < ( 3 + 1 );
then ( 2 * kk ) <= 3 by NAT_1:13;
then (( 2 * kk ) = ( 0 ) or ( 2 * kk ) = 2) by CKB12:1;
hence contradiction by A21,A38,A40,A61,A60;
end;
1 <= m by CKB2:1;
then 1 < m by A34,A37,A30,A44,A42,A61,CKB37:1,XXREAL_0:1;
then A63: ( 1 - 1 ) < ( m - 1 ) by XREAL_1:9;
A64:now
assume ( 2 * kk ) > ( ( len P ) + 1 );
then ( 2 * kk ) >= ( ( ( len P ) + 1 ) + 1 ) by NAT_1:13;
hence contradiction by A60,XREAL_1:29;
end;
A65:now
assume kk >= k;
then A66: ( 2 * kk ) >= ( 2 * k ) by XREAL_1:64;
( ( j + ( 2 * kk ) ) + m1 ) > ( j + ( 2 * kk ) ) by A63,XREAL_1:29;
hence contradiction by A12,A60,A66,XREAL_1:7;
end;
( C . n ) = x by A20,A31,A61;
hence contradiction by A10,A43,A60,A62,A64,A65,A58;
end;
then n < ( len B ) by A55,XXREAL_0:1;
then A67: n1 < ( ( len B ) - 1 ) by XREAL_1:9;
then ( j + n1 ) in ( dom P ) by A22;
then A68: ( j + n1 ) <= ( len P ) by FINSEQ_3:25;
m < ( m + 2 ) by XREAL_1:29;
then m < n by A38,XXREAL_0:2;
then m1 < n1 by XREAL_1:9;
then A69: ( j + m1 ) < ( j + n1 ) by XREAL_1:8;
A70: ( C . m ) = ( B . m ) by A31,A45;
( B . ( n1 + 1 ) ) = ( P . ( j + n1 ) ) by A22,A67;
hence contradiction by A1,A2,A43,A47,A68,A70,A56,A69,A57,CKB110:1;
end;
end;
then A71: (for k being Nat holds ((for a being Nat holds (a < k implies P[ a ])) implies P[ k ]));
A72: (for k being Nat holds P[ k ]) from NAT_1:sch 4(A71);
A73:now
let n being  odd Nat;
assume that
A74: n <= ( ( len P ) - 2 );
( ( len P ) - 2 ) <= ( ( ( len P ) - 2 ) + 4 ) by XREAL_1:31;
then consider k being Nat such that A75: ( n + ( 2 * k ) ) = ( ( len P ) + 2 ) by A74,CKB15:1,XXREAL_0:2;
A76:now
assume ( 2 * k ) > ( ( len P ) + 1 );
then ( n + ( 2 * k ) ) > ( 1 + ( ( len P ) + 1 ) ) by CKB2:1,XREAL_1:8;
hence contradiction by A75;
end;
now
assume A77: ( 2 * k ) < 4;
( n + 4 ) <= ( ( ( len P ) - 2 ) + 4 ) by A74,XREAL_1:7;
hence contradiction by A75,A77,XREAL_1:8;
end;
hence (not (ex e being set st e Joins ( Q . n ),x,G)) by A72,A75,A76;
end;
A78:now
assume Q is  chordal;
then consider m being  odd Nat,n being  odd Nat such that A79: ( m + 2 ) < n and A80: n <= ( len Q ) and ( Q . m ) <> ( Q . n ) and A81: (ex e being set st e Joins ( Q . m ),( Q . n ),G) and (Q is  Cycle-like implies (((not (m = 1 & n = ( len Q ))) & (not (m = 1 & n = ( ( len Q ) - 2 )))) & (not (m = 3 & n = ( len Q ))))) by CKB101:1;
( m + 2 ) < ( ( len P ) + 2 ) by A6,A79,A80,XXREAL_0:2;
then A82: ( ( m + 2 ) - 2 ) < ( ( ( len P ) + 2 ) - 2 ) by XREAL_1:9;
m < ( m + 2 ) by XREAL_1:29;
then A83: m < n by A79,XXREAL_0:2;
per cases  by A80,XXREAL_0:1;
suppose A84: n = ( len Q );

then ( ( m + 2 ) - 2 ) < ( ( ( len P ) + 2 ) - 2 ) by A6,A79,XREAL_1:9;
hence contradiction by A9,A73,A81,A84,CKB4:1;
end;
suppose A85: n < ( len Q );

A86: ( Q . m ) = ( P . m ) by A7,A82;
A87: n <= ( ( ( len P ) + 2 ) - 2 ) by A6,A85,CKB4:1;
then ( Q . n ) = ( P . n ) by A7;
hence contradiction by A1,A2,A79,A81,A83,A87,A86,CKB110:1;
end;
end;
( Q .first() ) = ( P .first() ) by A4,GLIB_001:63;
then ( Q .first() ) in ( P .vertices() ) by GLIB_001:88;
hence thesis by A3,A9,A78,GLIB_001:def 24;
end;
