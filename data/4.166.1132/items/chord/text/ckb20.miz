environ
vocabularies NUMBERS,XCMPLX_0,ORDINAL1,ARYTM_1,XXREAL_0,NAT_1,CARD_1,ARYTM_3,ABIAN,SUBSET_1,RELAT_1,INT_1,FINSEQ_1,FUNCT_1,FINSEQ_4,XBOOLE_0,FINSET_1,GRAPH_2,ORDINAL4,GLIB_000,GLIB_001,TARSKI,ZFMISC_1,RCOMP_1,GRAPH_1,RELAT_2,REWRITE1,FUNCOP_1,GLIB_002,PARTFUN1,MEMBERED,TOPGEN_1,CHORD;
notations TARSKI,XBOOLE_0,SUBSET_1,XXREAL_2,ORDINAL1,INT_1,XCMPLX_0,XXREAL_0,DOMAIN_1,RELAT_1,FUNCT_1,FUNCT_2,FINSEQ_1,CARD_1,FINSET_1,NAT_1,ZFMISC_1,GLIB_000,GLIB_001,GLIB_002,FUNCOP_1,ABIAN,ENUMSET1,FINSEQ_4,NUMBERS,GRAPH_2,MEMBERED,CKB18;
definitions TARSKI,XBOOLE_0,GLIB_000,GLIB_001,GLIB_002,FUNCOP_1,CKB18;
theorems FINSEQ_1,FUNCT_1,GLIB_000,GLIB_001,GLIB_002,GRAPH_2,GRAPH_3,TREES_1,INT_1,JORDAN12,NAT_1,ORDINAL1,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,FUNCOP_1,FUNCT_2,FINSEQ_3,FINSEQ_4,ZFMISC_1,ABIAN,CARD_2,ENUMSET1,FINSEQ_2,XREAL_1,MEMBERED,FINSEQ_5,XXREAL_0,NAT_D,PARTFUN1,XXREAL_2,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes NAT_1,GRAPH_5,FUNCT_2,FRAENKEL;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,GLIB_000,ABIAN,GRAPH_2,GLIB_001,GLIB_002,FUNCT_2,XXREAL_2,CARD_1,RELSET_1;
constructors DOMAIN_1,REAL_1,NAT_D,FINSEQ_4,GRAPH_2,GLIB_001,GLIB_002,VALUED_1,XXREAL_2,RELSET_1,CKB18;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
theorem
Th17: (for p,q being FinSequence holds (for x being set holds (p = ( <* x *> ^ q ) implies (for n being non zero  natural number holds ( p .followSet ( n + 1 ) ) = ( q .followSet n )))))
proof
let p being FinSequence,q being FinSequence;
let x being set;
assume that
A1: p = ( <* x *> ^ q );
let n being non zero Nat;
( len <* x *> ) = 1 by FINSEQ_1:40;
then A2: ( len p ) = ( 1 + ( len q ) ) by A1,FINSEQ_1:22;
per cases ;
suppose A3: n > ( len q );

then ( n + 1 ) > ( len p ) by A2,XREAL_1:8;
then ( (( n + 1 ),( len p )) -cut p ) = ( {} ) by GRAPH_2:def 1;
hence thesis by A3,GRAPH_2:def 1;
end;
suppose A4: n <= ( len q );

then A5: ( n + 1 ) <= ( len p ) by A2,XREAL_1:7;
A6: ( ( 0 ) + 1 ) <= n by NAT_1:13;
then A7: 1 <= ( n + 1 ) by XREAL_1:7;
then A8: ( ( len ( (( n + 1 ),( len p )) -cut p ) ) + ( n + 1 ) ) = ( ( len p ) + 1 ) by A5,GRAPH_2:def 1;
A9: ( ( len ( (n,( len q )) -cut q ) ) + n ) = ( ( len q ) + 1 ) by A4,A6,GRAPH_2:def 1;
then ( dom ( (( n + 1 ),( len p )) -cut p ) ) = ( Seg ( len ( (n,( len q )) -cut q ) ) ) by A2,A8,FINSEQ_1:def 3;
then A10: ( dom ( (( n + 1 ),( len p )) -cut p ) ) = ( dom ( (n,( len q )) -cut q ) ) by FINSEQ_1:def 3;
A11:now
let i being Nat;
assume i in ( dom q );
then ( p . ( ( len <* x *> ) + i ) ) = ( q . i ) by A1,FINSEQ_1:def 7;
hence ( p . ( i + 1 ) ) = ( q . i ) by FINSEQ_1:40;
end;
A12:now
let k being Nat;
assume that
A13: k in ( dom ( (n,( len q )) -cut q ) );
A14: k <= ( ( len p ) - n ) by A8,A10,A13,FINSEQ_3:25;
then A15: ( ( - 1 ) + k ) < ( ( 0 ) + ( ( len p ) - n ) ) by XREAL_1:8;
1 <= k by A13,FINSEQ_3:25;
then ( 1 + ( - 1 ) ) <= ( k + ( - 1 ) ) by XREAL_1:7;
then ( k - 1 ) in ( NAT ) by INT_1:3;
then reconsider k1 = ( k - 1 ) as Nat;
( n + k ) <= ( n + ( ( len p ) - n ) ) by A14,XREAL_1:7;
then A16: ( ( ( k1 + n ) + 1 ) + ( - 1 ) ) <= ( ( ( len q ) + 1 ) + ( - 1 ) ) by A2,XREAL_1:7;
( 1 + ( 0 ) ) <= ( n + k1 ) by NAT_1:13;
then A17: ( n + k1 ) in ( dom q ) by A16,FINSEQ_3:25;
thus ( ( (( n + 1 ),( len p )) -cut p ) . k ) = ( ( (( n + 1 ),( len p )) -cut p ) . ( k1 + 1 ) )
.= ( p . ( ( n + 1 ) + k1 ) ) by A7,A5,A8,A15,GRAPH_2:def 1
.= ( p . ( ( n + k1 ) + 1 ) )
.= ( q . ( n + k1 ) ) by A11,A17
.= ( ( (n,( len q )) -cut q ) . ( k1 + 1 ) ) by A2,A4,A6,A9,A15,GRAPH_2:def 1
.= ( ( (n,( len q )) -cut q ) . k );
end;
now
let y being set;
hereby
assume y in ( rng ( (( n + 1 ),( len p )) -cut p ) );
then consider k being Nat such that A18: k in ( dom ( (( n + 1 ),( len p )) -cut p ) ) and A19: ( ( (( n + 1 ),( len p )) -cut p ) . k ) = y by FINSEQ_2:10;
( ( (( n + 1 ),( len p )) -cut p ) . k ) = ( ( (n,( len q )) -cut q ) . k ) by A10,A12,A18;
hence y in ( rng ( (n,( len q )) -cut q ) ) by A10,A18,A19,FUNCT_1:3;
end;
assume y in ( rng ( (n,( len q )) -cut q ) );
then consider k being Nat such that A20: k in ( dom ( (n,( len q )) -cut q ) ) and A21: ( ( (n,( len q )) -cut q ) . k ) = y by FINSEQ_2:10;
( ( (( n + 1 ),( len p )) -cut p ) . k ) = ( ( (n,( len q )) -cut q ) . k ) by A12,A20;
hence y in ( rng ( (( n + 1 ),( len p )) -cut p ) ) by A10,A20,A21,FUNCT_1:3;
end;
hence thesis by TARSKI:1;
end;
end;
