environ
vocabularies PRE_TOPC,SUBSET_1,ZFMISC_1,XBOOLE_0,FUNCOP_1,ORDINAL2,FUNCT_1,RELAT_1,STRUCT_0,TOPS_2,T_0TOPSP,RCOMP_1,MCART_1,PARTFUN1,TARSKI,PBOOLE,BORSUK_1,TOPS_1,CONNSP_2,SETFAM_1,FINSET_1,FUNCT_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,SETFAM_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,DOMAIN_1,STRUCT_0,PRE_TOPC,TOPS_2,TOPS_1,COMPTS_1,BORSUK_1,T_0TOPSP,FINSET_1,FUNCT_3,CONNSP_2,CKB6,CKB7;
definitions TARSKI,TOPS_2,COMPTS_1,T_0TOPSP,FUNCT_1,XBOOLE_0,BINOP_1,STRUCT_0,SUBSET_1;
theorems BORSUK_1,FUNCOP_1,TOPS_2,FUNCT_2,FUNCT_1,PRE_TOPC,TARSKI,TOPS_1,TOPMETR,ZFMISC_1,CONNSP_2,FUNCT_3,COMPTS_1,FINSET_1,T_0TOPSP,YELLOW12,TSEP_1,TOPGRP_1,XBOOLE_0,XBOOLE_1,SETFAM_1,CKB1,CKB2,CKB4,CKB5,CKB8,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31,CKB32;
schemes PBOOLE,CLASSES1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,STRUCT_0,PRE_TOPC,TOPS_1,BORSUK_1,COMPTS_1,BORSUK_2,ZFMISC_1,CKB3,CKB9,CKB10,CKB11,CKB12,CKB13,CKB29;
constructors SETFAM_1,FUNCT_3,TOPS_1,TOPS_2,COMPTS_1,BORSUK_1,T_0TOPSP,WAYBEL_3,SUBSET_1,STRUCT_0,FUNCOP_1,BINOP_1,CKB6,CKB7;
requirements SUBSET,BOOLE;
begin
theorem
Th23: (for X,Y being  compact non empty TopSpace holds (for F being (Subset-Family of [: Y,X :]) holds ((F is (Cover of [: Y,X :]) & F is  open) implies (ex G being (Subset-Family of [: Y,X :]) st ((G c= F & G is (Cover of [: Y,X :])) & G is  finite)))))
proof
let X being  compact non empty TopSpace,Y being  compact non empty TopSpace;
let F being (Subset-Family of [: Y,X :]);
set R = { Q where Q is  open (Subset of X): (ex FQ being (Subset-Family of [: Y,X :]) st ((FQ c= F & FQ is  finite) & [: ( [#] Y ),Q :] c= ( union FQ ))) };
R c= ( bool (the carrier of X) )
proof
let s being set;
assume s in R;
then (ex Q1 being  open (Subset of X) st (s = Q1 & (ex FQ being (Subset-Family of [: Y,X :]) st ((FQ c= F & FQ is  finite) & [: ( [#] Y ),Q1 :] c= ( union FQ )))));
hence thesis;
end;
then reconsider R as (Subset-Family of X);
reconsider R as (Subset-Family of X);
defpred P[ set,set ]
 means
(ex FQ being (Subset-Family of [: Y,X :]) st (((FQ c= F & FQ is  finite) & [: ( [#] Y ),$1 :] c= ( union FQ )) & $2 = FQ));
deffunc F(set) = [: ( [#] Y ),$1 :];
assume (F is (Cover of [: Y,X :]) & F is  open);
then consider C being (Subset-Family of X) such that A1: C c= R and A2: C is  finite and A3: C is (Cover of X) by CKB32:1;
set CX = { F(f) where f is (Subset of X): f in C };
CX c= ( bool (the carrier of [: Y,X :]) )
proof
let s being set;
assume s in CX;
then consider f1 being (Subset of X) such that A4: s = F(f1) and f1 in C;
[: ( [#] Y ),f1 :] c= (the carrier of [: Y,X :]);
hence thesis by A4;
end;
then reconsider CX as (Subset-Family of [: Y,X :]);
reconsider CX as (Subset-Family of [: Y,X :]);
A5: (for e being set holds (e in C implies (ex u being set st P[ e,u ])))
proof
let e being set;
assume e in C;
then e in R by A1;
then (ex Q1 being  open (Subset of X) st (Q1 = e & (ex FQ being (Subset-Family of [: Y,X :]) st ((FQ c= F & FQ is  finite) & [: ( [#] Y ),Q1 :] c= ( union FQ )))));
hence thesis;
end;
consider t being Function such that A6: (( dom t ) = C & (for s being set holds (s in C implies P[ s,( t . s ) ]))) from CLASSES1:sch 1(A5);
set G = ( union ( rng t ) );
A7: ( union ( rng t ) ) c= F
proof
let k being set;
assume k in ( union ( rng t ) );
then consider K being set such that A8: k in K and A9: K in ( rng t ) by TARSKI:def 4;
consider x1 being set such that A10: (x1 in ( dom t ) & K = ( t . x1 )) by A9,FUNCT_1:def 3;
(ex FQ being (Subset-Family of [: Y,X :]) st (((FQ c= F & FQ is  finite) & [: ( [#] Y ),x1 :] c= ( union FQ )) & K = FQ)) by A6,A10;
hence thesis by A8;
end;
G c= ( bool (the carrier of [: Y,X :]) )
proof
let s being set;
assume s in G;
then s in F by A7;
hence thesis;
end;
then reconsider G as (Subset-Family of [: Y,X :]);
reconsider G as (Subset-Family of [: Y,X :]);
take G;
thus G c= F by A7;
( union CX ) = [: ( [#] Y ),( union C ) :]
proof
hereby
let g being set;
assume g in ( union CX );
then consider GG being set such that A11: g in GG and A12: GG in CX by TARSKI:def 4;
consider FF being (Subset of X) such that A13: GG = [: ( [#] Y ),FF :] and A14: FF in C by A12;
consider g1 being set,g2 being set such that A15: g1 in ( [#] Y ) and A16: g2 in FF and A17: g = [ g1,g2 ] by A11,A13,ZFMISC_1:def 2;
g2 in ( union C ) by A14,A16,TARSKI:def 4;
hence g in [: ( [#] Y ),( union C ) :] by A15,A17,ZFMISC_1:87;
end;
let g being set;
assume g in [: ( [#] Y ),( union C ) :];
then consider g1 being set,g2 being set such that A18: g1 in ( [#] Y ) and A19: g2 in ( union C ) and A20: g = [ g1,g2 ] by ZFMISC_1:def 2;
consider GG being set such that A21: g2 in GG and A22: GG in C by A19,TARSKI:def 4;
GG in { Q where Q is  open (Subset of X): (ex FQ being (Subset-Family of [: Y,X :]) st ((FQ c= F & FQ is  finite) & [: ( [#] Y ),Q :] c= ( union FQ ))) } by A1,A22;
then consider Q1 being  open (Subset of X) such that A23: GG = Q1 and (ex FQ being (Subset-Family of [: Y,X :]) st ((FQ c= F & FQ is  finite) & [: ( [#] Y ),Q1 :] c= ( union FQ )));
A24: [: ( [#] Y ),Q1 :] in CX by A22,A23;
g in [: ( [#] Y ),Q1 :] by A18,A20,A21,A23,ZFMISC_1:87;
hence thesis by A24,TARSKI:def 4;
end;
then A25: ( union CX ) = [: ( [#] Y ),( [#] X ) :] by A3,SETFAM_1:45
.= ( [#] [: Y,X :] ) by BORSUK_1:def 2;
( [#] [: Y,X :] ) c= ( union ( union ( rng t ) ) )
proof
let d being set;
assume d in ( [#] [: Y,X :] );
then consider CC being set such that A26: d in CC and A27: CC in CX by A25,TARSKI:def 4;
consider Cc being (Subset of X) such that A28: CC = [: ( [#] Y ),Cc :] and A29: Cc in C by A27;
Cc in R by A1,A29;
then consider Qq being  open (Subset of X) such that A30: Cc = Qq and (ex FQ being (Subset-Family of [: Y,X :]) st ((FQ c= F & FQ is  finite) & [: ( [#] Y ),Qq :] c= ( union FQ )));
consider FQ1 being (Subset-Family of [: Y,X :]) such that FQ1 c= F and FQ1 is  finite and A31: [: ( [#] Y ),Qq :] c= ( union FQ1 ) and A32: ( t . Qq ) = FQ1 by A6,A29,A30;
consider DC being set such that A33: d in DC and A34: DC in FQ1 by A26,A28,A30,A31,TARSKI:def 4;
FQ1 in ( rng t ) by A6,A29,A30,A32,FUNCT_1:def 3;
then DC in ( union ( rng t ) ) by A34,TARSKI:def 4;
hence thesis by A33,TARSKI:def 4;
end;
hence G is (Cover of [: Y,X :]) by SETFAM_1:def 11;
A35: (for X1 being set holds (X1 in ( rng t ) implies X1 is  finite))
proof
let X1 being set;
assume X1 in ( rng t );
then consider x1 being set such that A36: x1 in ( dom t ) and A37: X1 = ( t . x1 ) by FUNCT_1:def 3;
(ex FQ being (Subset-Family of [: Y,X :]) st (((FQ c= F & FQ is  finite) & [: ( [#] Y ),x1 :] c= ( union FQ )) & ( t . x1 ) = FQ)) by A6,A36;
hence thesis by A37;
end;
( rng t ) is  finite by A2,A6,FINSET_1:8;
hence thesis by A35,FINSET_1:7;
end;
