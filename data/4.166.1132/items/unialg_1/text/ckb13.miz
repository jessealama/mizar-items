environ
vocabularies FINSEQ_1,PARTFUN1,RELAT_1,NAT_1,FUNCT_2,TARSKI,XBOOLE_0,SUBSET_1,FUNCOP_1,FUNCT_1,STRUCT_0,NUMBERS,INCPROJ,XXREAL_0,UNIALG_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,NAT_1,RELAT_1,FUNCT_1,CARD_3,FINSEQ_1,FINSEQ_2,FUNCOP_1,STRUCT_0,PARTFUN1,XXREAL_0,MARGREL1,CKB1,CKB4,CKB5,CKB6,CKB11;
definitions TARSKI,STRUCT_0,FUNCT_1,FUNCOP_1,CARD_3,MARGREL1,CKB4,CKB5,CKB6;
theorems FUNCT_1,PARTFUN1,FINSEQ_1,MARGREL1,CKB4,CKB5,CKB6,CKB12;
schemes FINSEQ_1;
registrations XBOOLE_0,ORDINAL1,RELSET_1,PARTFUN1,FUNCOP_1,XXREAL_0,STRUCT_0,FINSEQ_2,FUNCT_1,CARD_1,FINSEQ_1,CARD_3,MARGREL1,CKB1,CKB2,CKB3,CKB7,CKB8,CKB9,CKB10;
constructors PARTFUN1,FUNCOP_1,XXREAL_0,FINSEQ_2,STRUCT_0,CARD_3,MARGREL1,CKB1,CKB4,CKB5,CKB6;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve n for Nat;
reserve U1 for  partial  non-empty non empty UAStr;
definition
let U1;
func signature U1 -> (FinSequence of ( NAT ))
means
(( len it ) = ( len (the charact of U1) ) & (for n holds (n in ( dom it ) implies (for h being  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) holds (h = ( (the charact of U1) . n ) implies ( it . n ) = ( arity h ))))));
existence
proof
defpred P[ Nat,set ]
 means
(for h being  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) holds (h = ( (the charact of U1) . $1 ) implies $2 = ( arity h )));
A1:now
let m being Nat;
assume m in ( Seg ( len (the charact of U1) ) );
then m in ( dom (the charact of U1) ) by FINSEQ_1:def 3;
then reconsider H = ( (the charact of U1) . m ) as  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) by CKB12:1;
reconsider n = ( arity H ) as (Element of ( NAT ));
take n;
thus P[ m,n ];
end;
consider p being (FinSequence of ( NAT )) such that A2: ( dom p ) = ( Seg ( len (the charact of U1) ) ) and A3: (for m being Nat holds (m in ( Seg ( len (the charact of U1) ) ) implies P[ m,( p . m ) ])) from FINSEQ_1:sch 5(A1);
take p;
thus ( len p ) = ( len (the charact of U1) ) by A2,FINSEQ_1:def 3;
let n;
assume A4: n in ( dom p );
let h being  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1));
assume h = ( (the charact of U1) . n );
hence thesis by A2,A3,A4;
end;
uniqueness
proof
let x being (FinSequence of ( NAT )),y being (FinSequence of ( NAT ));
assume that
A5: ( len x ) = ( len (the charact of U1) )
and
A6: (for n holds (n in ( dom x ) implies (for h being  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) holds (h = ( (the charact of U1) . n ) implies ( x . n ) = ( arity h )))))
and
A7: ( len y ) = ( len (the charact of U1) )
and
A8: (for n holds (n in ( dom y ) implies (for h being  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) holds (h = ( (the charact of U1) . n ) implies ( y . n ) = ( arity h )))));
now
let m being Nat;
assume (1 <= m & m <= ( len x ));
then A9: m in ( Seg ( len x ) ) by FINSEQ_1:1;
then m in ( dom (the charact of U1) ) by A5,FINSEQ_1:def 3;
then reconsider h = ( (the charact of U1) . m ) as  homogeneous non empty (PartFunc of ( (the carrier of U1) * ),(the carrier of U1)) by CKB12:1;
m in ( dom x ) by A9,FINSEQ_1:def 3;
then A10: ( x . m ) = ( arity h ) by A6;
m in ( dom y ) by A5,A7,A9,FINSEQ_1:def 3;
hence ( x . m ) = ( y . m ) by A8,A10;
end;
hence thesis by A5,A7,FINSEQ_1:14;
end;
end;
