environ
vocabularies RELAT_2,ALTCAT_1,XBOOLE_0,MSUALG_6,FUNCTOR0,FUNCT_2,FUNCT_1,RELAT_1,CAT_1,ENS_1,PARTFUN1,ZFMISC_1,STRUCT_0,YELLOW18,SETFAM_1,PBOOLE,ALTCAT_2,TARSKI,SUBSET_1,REALSET1,FUNCOP_1,FUNCT_3,MCART_1,MSUALG_3,WELLORD1,ARYTM_0,YELLOW20;
notations TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,RELSET_1,FUNCT_1,FUNCT_2,MCART_1,BINOP_1,REALSET1,MULTOP_1,PBOOLE,STRUCT_0,FUNCT_4,PARTFUN1,FUNCOP_1,MSUALG_3,FUNCT_3,ALTCAT_1,ALTCAT_2,FUNCTOR0,FUNCTOR3,YELLOW18,CKB10,CKB14,CKB21,CKB37,CKB38,CKB39,CKB49,CKB50;
definitions TARSKI,RELAT_1,PARTFUN1,PBOOLE,MSUALG_3,ALTCAT_1,ALTCAT_2,FUNCTOR0,FUNCT_2,XBOOLE_0,BINOP_1,REALSET1,CKB10,CKB14,CKB21,CKB49,CKB50;
theorems ZFMISC_1,RELAT_1,FUNCT_1,PBOOLE,MCART_1,FUNCT_2,FUNCT_3,FUNCT_4,ALTCAT_1,ALTCAT_2,FUNCTOR3,ALTCAT_4,FUNCTOR0,FUNCTOR1,FUNCTOR2,PARTFUN1,MULTOP_1,MSUALG_3,YELLOW18,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB34,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69;
schemes FUNCT_1,YELLOW18,CKB29,CKB31,CKB32;
registrations SUBSET_1,RELAT_1,FUNCT_1,FUNCOP_1,PBOOLE,STRUCT_0,ALTCAT_2,FUNCTOR0,FUNCTOR2,ALTCAT_4,YELLOW18,RELSET_1,CKB33,CKB35,CKB36;
constructors REALSET1,MSUALG_3,FUNCTOR3,YELLOW18,RELSET_1,CKB10,CKB14,CKB21,CKB37,CKB38,CKB39,CKB49,CKB50;
requirements SUBSET,BOOLE;
begin
theorem
(for A1,A2 being non empty category holds (for F being  covariant (Functor of A1,A2) holds (for B1 being non empty (subcategory of A1) holds (for B2 being non empty (subcategory of A2) holds (((F is  bijective & (for a being (object of A1) holds (a is (object of B1) iff ( F . a ) is (object of B2)))) & (for a,b being (object of A1) holds (<^ a,b ^> <> ( {} ) implies (for a1,b1 being (object of B1) holds ((a1 = a & b1 = b) implies (for a2,b2 being (object of B2) holds ((a2 = ( F . a ) & b2 = ( F . b )) implies (for f being (Morphism of a,b) holds (f in <^ a1,b1 ^> iff ( F . f ) in <^ a2,b2 ^>))))))))) implies B1,B2 are_isomorphic_under F)))))
proof
let A1 being non empty category,A2 being non empty category;
let F being  covariant (Functor of A1,A2);
let B1 being non empty (subcategory of A1);
let B2 being non empty (subcategory of A2);
assume that
A1: F is  bijective
and
A2: (for a being (object of A1) holds (a is (object of B1) iff ( F . a ) is (object of B2)))
and
A3: (for a,b being (object of A1) holds (<^ a,b ^> <> ( {} ) implies (for a1,b1 being (object of B1) holds ((a1 = a & b1 = b) implies (for a2,b2 being (object of B2) holds ((a2 = ( F . a ) & b2 = ( F . b )) implies (for f being (Morphism of a,b) holds (f in <^ a1,b1 ^> iff ( F . f ) in <^ a2,b2 ^>))))))));
thus B1,B2 are_isomorphic_under F
proof
deffunc F((object of B1),(object of B1),(Morphism of $1,$2)) = ( ( F | B1 ) . $3 );
deffunc O((object of B1)) = ( ( F | B1 ) . $1 );
A4: F is  injective  surjective by A1,FUNCTOR0:def 35;
A5: (for a,b being (object of B2) holds (<^ a,b ^> <> ( {} ) implies (for f being (Morphism of a,b) holds (ex c,d being (object of B1) st (ex g being (Morphism of c,d) st (((a = O(c) & b = O(d)) & <^ c,d ^> <> ( {} )) & f = F(c,d,g)))))))
proof
A6: (the carrier of B2) c= (the carrier of A2) by ALTCAT_2:def 11;
let a being (object of B2),b being (object of B2);
assume that
A7: <^ a,b ^> <> ( {} );
(a in (the carrier of B2) & b in (the carrier of B2));
then reconsider a1 = a,b1 = b as (object of A2) by A6;
let f being (Morphism of a,b);
A8: (<^ a,b ^> c= <^ a1,b1 ^> & f in <^ a,b ^>) by A7,ALTCAT_2:31;
then reconsider f1 = f as (Morphism of a1,b1);
consider c1 being (object of A1),d1 being (object of A1),g1 being (Morphism of c1,d1) such that A9: (a1 = ( F . c1 ) & b1 = ( F . d1 )) and A10: <^ c1,d1 ^> <> ( {} ) and A11: f1 = ( F . g1 ) by A4,A8,CKB45:1;
reconsider c = c1,d = d1 as (object of B1) by A2,A9;
reconsider g = g1 as (Morphism of c,d) by A3,A7,A9,A10,A11;
take c;
take d;
take g;
g1 in <^ c,d ^> by A3,A7,A9,A10,A11;
hence thesis by A9,A11,CKB40:1,CKB41:1;
end;
A12: (the carrier of B1) c= (the carrier of A1) by ALTCAT_2:def 11;
A13:now
let a being (object of B1);
a in (the carrier of B1);
then reconsider b = a as (object of A1) by A12;
( ( F | B1 ) . a ) = ( F . b ) by CKB40:1;
hence O(a) is (object of B2) by A2;
end;
A14:now
let a being (object of B1),b being (object of B1);
assume that
A15: <^ a,b ^> <> ( {} );
let f being (Morphism of a,b);
(a in (the carrier of B1) & b in (the carrier of B1));
then reconsider c = a,d = b as (object of A1) by A12;
A16: (<^ a,b ^> c= <^ c,d ^> & f in <^ a,b ^>) by A15,ALTCAT_2:31;
then reconsider g = f as (Morphism of c,d);
reconsider a9 = ( ( F | B1 ) . a ),b9 = ( ( F | B1 ) . b ) as (object of B2) by A13;
A17: (( ( F | B1 ) . a ) = ( F . c ) & ( ( F | B1 ) . b ) = ( F . d )) by CKB40:1;
( ( F | B1 ) . f ) = ( F . g ) by A15,CKB41:1;
then ( ( F | B1 ) . f ) in <^ a9,b9 ^> by A3,A16,A17;
hence F(a,b,f) in ( (the Arrows of B2) . (O(a),O(b)) );
end;
thus (B1 is (subcategory of A1) & B2 is (subcategory of A2));
A18: F is  one-to-one  faithful  surjective by A4,FUNCTOR0:def 33;
A19:now
let a being (object of B1),b being (object of B1);
assume that
A20: <^ a,b ^> <> ( {} );
(a in (the carrier of B1) & b in (the carrier of B1));
then reconsider a1 = a,b1 = b as (object of A1) by A12;
let f being (Morphism of a,b),g being (Morphism of a,b);
A21: (<^ a,b ^> c= <^ a1,b1 ^> & f in <^ a,b ^>) by A20,ALTCAT_2:31;
g in <^ a,b ^> by A20;
then reconsider f1 = f,g1 = g as (Morphism of a1,b1) by A21;
assume F(a,b,f) = F(a,b,g);
then ( F . f1 ) = ( ( F | B1 ) . g ) by A20,CKB41:1
.= ( F . g1 ) by A20,CKB41:1;
hence f = g by A18,A21,CKB44:1;
end;
A22:now
let a being (object of B1),b being (object of B1),c being (object of B1);
assume that
A23: <^ a,b ^> <> ( {} )
and
A24: <^ b,c ^> <> ( {} );
let f being (Morphism of a,b);
let g being (Morphism of b,c);
A25: c in (the carrier of B1);
(a in (the carrier of B1) & b in (the carrier of B1));
then reconsider a1 = a,b1 = b,c1 = c as (object of A1) by A12,A25;
let a9 being (object of B2),b9 being (object of B2),c9 being (object of B2);
assume that
A26: a9 = O(a)
and
A27: b9 = O(b)
and
A28: c9 = O(c);
let f9 being (Morphism of a9,b9);
let g9 being (Morphism of b9,c9);
assume that
A29: f9 = F(a,b,f)
and
A30: g9 = F(b,c,g);
A31: b9 = ( F . b1 ) by A27,CKB40:1;
A32: (<^ b,c ^> c= <^ b1,c1 ^> & g in <^ b,c ^>) by A24,ALTCAT_2:31;
then reconsider g1 = g as (Morphism of b1,c1);
A33: c9 = ( F . c1 ) by A28,CKB40:1;
A34: (<^ a,b ^> c= <^ a1,b1 ^> & f in <^ a,b ^>) by A23,ALTCAT_2:31;
then reconsider f1 = f as (Morphism of a1,b1);
A35: a9 = ( F . a1 ) by A26,CKB40:1;
A36: g9 = ( F . g1 ) by A24,A30,CKB41:1;
then A37: g9 in <^ b9,c9 ^> by A3,A32,A31,A33;
A38: f9 = ( F . f1 ) by A23,A29,CKB41:1;
then A39: f9 in <^ a9,b9 ^> by A3,A34,A35,A31;
(<^ a,c ^> <> ( {} ) & ( g * f ) = ( g1 * f1 )) by A23,A24,ALTCAT_1:def 2,ALTCAT_2:32;
then ( ( F | B1 ) . ( g * f ) ) = ( F . ( g1 * f1 ) ) by CKB41:1;
hence F(a,c,( g * f )) = ( ( F . g1 ) * ( F . f1 ) ) by A34,A32,FUNCTOR0:def 23
.= ( g9 * f9 ) by A35,A31,A33,A38,A36,A39,A37,ALTCAT_2:32;
end;
A40:now
let a being (object of B1);
let a9 being (object of B2);
assume that
A41: a9 = O(a);
a in (the carrier of B1);
then reconsider a1 = a as (object of A1) by A12;
thus F(a,a,( idm a )) = ( F . ( idm a1 ) ) by CKB41:1,ALTCAT_2:34
.= ( idm ( F . a1 ) ) by FUNCTOR2:1
.= ( idm a9 ) by A41,CKB40:1,ALTCAT_2:34;
end;
consider G being  covariant  strict (Functor of B1,B2) such that A42: (for a being (object of B1) holds ( G . a ) = O(a)) and A43: (for a,b being (object of B1) holds (<^ a,b ^> <> ( {} ) implies (for f being (Morphism of a,b) holds ( G . f ) = F(a,b,f)))) from YELLOW18:sch 8(A13,A14,A22,A40);
take G;
A44:now
let a being (object of B1),b being (object of B1);
(a in (the carrier of B1) & b in (the carrier of B1));
then reconsider a1 = a,b1 = b as (object of A1) by A12;
assume O(a) = O(b);
then ( F . a1 ) = ( ( F | B1 ) . b ) by CKB40:1
.= ( F . b1 ) by CKB40:1;
hence a = b by A18,CKB43:1;
end;
thus G is  bijective from YELLOW18:sch 10(A42,A43,A44,A19,A5);
hereby
let a being (object of B1);
let a1 being (object of A1);
assume that
A45: a = a1;
thus ( G . a ) = ( ( F | B1 ) . a ) by A42
.= ( F . a1 ) by A45,CKB40:1;
end;
let b being (object of B1),c being (object of B1);
let b1 being (object of A1),c1 being (object of A1);
assume that
A46: <^ b,c ^> <> ( {} )
and
A47: (b1 = b & c1 = c);
let f being (Morphism of b,c);
let f1 being (Morphism of b1,c1);
assume that
A48: f = f1;
A49: (<^ b,c ^> c= <^ b1,c1 ^> & f in <^ b,c ^>) by A46,A47,ALTCAT_2:31;
then A50: <^ ( F . b1 ),( F . c1 ) ^> <> ( {} ) by FUNCTOR0:def 18;
thus ( G . f ) = ( ( F | B1 ) . f ) by A43,A46
.= ( F . f1 ) by A46,A47,A48,CKB41:1
.= ( ( Morph-Map (F,b1,c1) ) . f1 ) by A49,A50,FUNCTOR0:def 15;
end;

end;
