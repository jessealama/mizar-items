environ
vocabularies NUMBERS,ZFMISC_1,XBOOLE_0,SUBSET_1,FUNCT_1,RELAT_1,FUNCT_4,TARSKI,CARD_1,ARYTM_3,MCART_1,NAT_1,ARYTM_1,XXREAL_0,FUNCT_7,RECDEF_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,MCART_1,MCART_2,DOMAIN_1,NUMBERS,XCMPLX_0,NAT_1,NAT_D,RELAT_1,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_7,XXREAL_0,CKB1,CKB2,CKB3,CKB7,CKB8,CKB9,CKB10,CKB14,CKB15,CKB16,CKB17,CKB18;
definitions TARSKI,XBOOLE_0,CKB1,CKB2,CKB3,CKB7,CKB8,CKB9,CKB10,CKB14,CKB15,CKB16,CKB17,CKB18;
theorems MCART_1,NAT_1,FUNCT_1,FUNCT_2,RELSET_1,INT_1,FUNCT_4,XBOOLE_0,XBOOLE_1,DOMAIN_1,MCART_2,FUNCT_7,XREAL_1,XXREAL_0,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21;
schemes NAT_1,RECDEF_1,FUNCT_1,XBOOLE_0,PARTFUN1,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28;
registrations SUBSET_1,ORDINAL1,RELSET_1,XREAL_0,NAT_1,INT_1;
constructors DOMAIN_1,FUNCT_4,XXREAL_0,NAT_1,INT_1,MCART_2,BINARITH,FUNCT_7,NAT_D,RELSET_1,CKB1,CKB2,CKB3,CKB7,CKB8,CKB9,CKB10,CKB14,CKB15,CKB16,CKB17,CKB18;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
reserve c for set;
reserve A for set;
reserve B for set;
reserve C for set;
scheme LambdaRec3Ex { A,B,C() -> set,F(set,set,set,set) -> set } : (ex f being Function st ((((( dom f ) = ( NAT ) & ( f . ( 0 ) ) = A()) & ( f . 1 ) = B()) & ( f . 2 ) = C()) & (for n being (Element of ( NAT )) holds ( f . ( n + 3 ) ) = F(n,( f . n ),( f . ( n + 1 ) ),( f . ( n + 2 ) )))))
proof
defpred C3[ set ]
 means
( In ($1,( NAT )) ) > 1;
defpred C2[ set ]
 means
$1 = 1;
defpred C1[ set ]
 means
$1 = ( 0 );
deffunc G(Nat,set) = [ ( $2 `2_4 ),( $2 `3_4 ),( $2 `4_4 ),F(( $1 + 1 ),( $2 `2_4 ),( $2 `3_4 ),( $2 `4_4 )) ];
set r04 = F(( 0 ),A(),B(),C());
set r14 = F(1,B(),C(),r04);
set r24 = F(2,C(),r04,r14);
deffunc H(Nat,set) = G(( $1 + 2 ),$2);
consider h being Function such that ( dom h ) = ( NAT ) and A1: ( h . ( 0 ) ) = [ C(),r04,r14,r24 ] and A2: (for n being Nat holds ( h . ( n + 1 ) ) = H(n,( h . n ))) from NAT_1:sch 11;
deffunc X3(set) = ( h . ( ( In ($1,( NAT )) ) -' 2 ) );
deffunc X2(set) = [ B(),C(),r04,r14 ];
deffunc X1(set) = [ A(),B(),C(),r04 ];
A3: (for c being set holds (c in ( NAT ) implies ((C1[ c ] or C2[ c ]) or C3[ c ])))
proof
let c being set;
assume c in ( NAT );
then ( In (c,( NAT )) ) = c by FUNCT_7:def 1;
hence thesis by NAT_1:25;
end;
A4: (for c being set holds (c in ( NAT ) implies (((C1[ c ] implies (not C2[ c ])) & (C1[ c ] implies (not C3[ c ]))) & (C2[ c ] implies (not C3[ c ])))))
proof
let c being set;
assume c in ( NAT );
then ( In (c,( NAT )) ) = c by FUNCT_7:def 1;
hence thesis;
end;
consider g being Function such that ( dom g ) = ( NAT ) and A5: (for x being set holds (x in ( NAT ) implies (((C1[ x ] implies ( g . x ) = X1(x)) & (C2[ x ] implies ( g . x ) = X2(x))) & (C3[ x ] implies ( g . x ) = X3(x))))) from CKB22:sch 1(A4,A3);
A6: ( In (2,( NAT )) ) = 2 by FUNCT_7:def 1;
then A7: ( g . 2 ) = X3(2) by A5
.= [ C(),r04,r14,r24 ] by A1,A6,XREAL_1:232;
A8: (for n being (Element of ( NAT )) holds ( g . ( n + 3 ) ) = G(( n + 2 ),( g . ( n + 2 ) )))
proof
let n being (Element of ( NAT ));
A9: ( In (( n + 2 ),( NAT )) ) = ( n + 2 ) by FUNCT_7:def 1;
( ( 0 ) + 1 ) < ( n + 2 ) by NAT_1:2,XREAL_1:8;
then A10: ( g . ( n + 2 ) ) = X3(( n + 2 )) by A5,A9
.= ( h . n ) by A9,NAT_D:34;
A11: ( In (( n + 3 ),( NAT )) ) = ( n + 3 ) by FUNCT_7:def 1;
A12: (( ( n + 3 ) - 2 ) = ( n + ( 3 - 2 ) ) & ( 0 ) <= ( n + 1 )) by NAT_1:2;
( ( 0 ) + 1 ) < ( n + 3 ) by NAT_1:2,XREAL_1:8;
hence ( g . ( n + 3 ) ) = X3(( n + 3 )) by A5,A11
.= ( h . ( n + 1 ) ) by A11,A12,XREAL_0:def 2
.= G(( n + 2 ),( g . ( n + 2 ) )) by A2,A10;
end;
A13: ( g . 1 ) = [ B(),C(),r04,r14 ] by A5;
then A14: ( ( g . ( ( 0 ) + 1 ) ) `3_4 ) = r04 by CKB9:def 1
.= ( ( g . ( ( 0 ) + 2 ) ) `2_4 ) by A7,CKB8:def 1;
A15: ( g . ( 0 ) ) = [ A(),B(),C(),r04 ] by A5;
then A16: ( ( g . ( 0 ) ) `3_4 ) = C() by CKB9:def 1
.= ( ( g . ( ( 0 ) + 1 ) ) `2_4 ) by A13,CKB8:def 1;
A17: ( ( g . ( ( 0 ) + 1 ) ) `4_4 ) = r14 by A13,CKB10:def 1
.= ( ( g . ( ( 0 ) + 2 ) ) `3_4 ) by A7,CKB9:def 1;
A18: ( ( g . ( 0 ) ) `4_4 ) = r04 by A15,CKB10:def 1
.= ( ( g . ( ( 0 ) + 1 ) ) `3_4 ) by A13,CKB9:def 1;
A19: ( ( g . ( ( 0 ) + 1 ) ) `1_4 ) = B() by A13,CKB7:def 1
.= ( ( g . ( 0 ) ) `2_4 ) by A15,CKB8:def 1;
deffunc M((Element of ( NAT ))) = ( ( g . $1 ) `1_4 );
consider f being Function such that A20: ( dom f ) = ( NAT ) and A21: (for x being (Element of ( NAT )) holds ( f . x ) = M(x)) from FUNCT_1:sch 4;
A22: ( f . ( ( 0 ) + 3 ) ) = ( ( g . ( ( 0 ) + 3 ) ) `1_4 ) by A21
.= ( G(( ( 0 ) + 2 ),( g . ( ( 0 ) + 2 ) )) `1_4 ) by A8
.= ( ( g . ( ( 0 ) + 2 ) ) `2_4 ) by CKB7:def 1;
take f;
thus ( dom f ) = ( NAT ) by A20;
defpred P[ (Element of ( NAT )) ]
 means
((((((((( f . ( $1 + 3 ) ) = ( ( g . ( $1 + 2 ) ) `2_4 ) & ( ( g . $1 ) `2_4 ) = ( ( g . ( $1 + 1 ) ) `1_4 )) & ( ( g . $1 ) `3_4 ) = ( ( g . ( $1 + 1 ) ) `2_4 )) & ( ( g . $1 ) `4_4 ) = ( ( g . ( $1 + 1 ) ) `3_4 )) & ( ( g . ( $1 + 1 ) ) `2_4 ) = ( ( g . ( $1 + 2 ) ) `1_4 )) & ( ( g . ( $1 + 1 ) ) `3_4 ) = ( ( g . ( $1 + 2 ) ) `2_4 )) & ( ( g . ( $1 + 1 ) ) `4_4 ) = ( ( g . ( $1 + 2 ) ) `3_4 )) & ( ( g . ( $1 + 2 ) ) `2_4 ) = ( ( g . ( $1 + 3 ) ) `1_4 )) & ( f . ( $1 + 3 ) ) = F($1,( f . $1 ),( f . ( $1 + 1 ) ),( f . ( $1 + 2 ) )));
A23: ( ( g . ( ( 0 ) + 2 ) ) `2_4 ) = ( G(( ( 0 ) + 2 ),( g . ( ( 0 ) + 2 ) )) `1_4 ) by CKB7:def 1
.= ( ( g . ( ( 0 ) + 3 ) ) `1_4 ) by A8;
thus A24: ( f . ( 0 ) ) = ( ( g . ( 0 ) ) `1_4 ) by A21
.= A() by A15,CKB7:def 1;
thus A25: ( f . 1 ) = ( ( g . 1 ) `1_4 ) by A21
.= B() by A13,CKB7:def 1;
thus A26: ( f . 2 ) = ( ( g . 2 ) `1_4 ) by A21
.= C() by A7,CKB7:def 1;
A27: (for x being (Element of ( NAT )) holds (P[ x ] implies P[ ( x + 1 ) ]))
proof
let x being (Element of ( NAT ));
A28: ( ( x + 1 ) + 2 ) = ( x + ( 1 + 2 ) );
assume A29: P[ x ];
then A30: ( f . ( ( x + 1 ) + 1 ) ) = ( ( g . x ) `3_4 ) by A21;
thus A31: ( f . ( ( x + 1 ) + 3 ) ) = ( ( g . ( ( x + 1 ) + 3 ) ) `1_4 ) by A21
.= ( G(( ( x + 1 ) + 2 ),( g . ( ( x + 1 ) + 2 ) )) `1_4 ) by A8
.= ( ( g . ( ( x + 1 ) + 2 ) ) `2_4 ) by CKB7:def 1;
thus ( ( g . ( ( x + 1 ) + 1 ) ) `1_4 ) = ( ( g . ( x + 1 ) ) `2_4 ) by A29;
thus ( ( g . ( x + 1 ) ) `3_4 ) = ( ( g . ( ( x + 1 ) + 1 ) ) `2_4 ) by A29;
thus ( ( g . ( x + 1 ) ) `4_4 ) = ( ( g . ( ( x + 1 ) + 1 ) ) `3_4 ) by A29;
thus ( ( g . ( ( x + 1 ) + 1 ) ) `2_4 ) = ( G(( x + 2 ),( g . ( x + 2 ) )) `1_4 ) by CKB7:def 1
.= ( ( g . ( ( x + 1 ) + 2 ) ) `1_4 ) by A8,A28;
thus ( ( g . ( ( x + 1 ) + 1 ) ) `3_4 ) = ( G(( x + 2 ),( g . ( x + 2 ) )) `2_4 ) by CKB8:def 1
.= ( ( g . ( ( x + 1 ) + 2 ) ) `2_4 ) by A8,A28;
thus ( ( g . ( ( x + 1 ) + 1 ) ) `4_4 ) = ( G(( x + 2 ),( g . ( x + 2 ) )) `3_4 ) by CKB9:def 1
.= ( ( g . ( ( x + 1 ) + 2 ) ) `3_4 ) by A8,A28;
thus ( ( g . ( ( x + 1 ) + 2 ) ) `2_4 ) = ( G(( ( x + 1 ) + 2 ),( g . ( ( x + 1 ) + 2 ) )) `1_4 ) by CKB7:def 1
.= ( ( g . ( ( x + 1 ) + 3 ) ) `1_4 ) by A8;
per cases ;
suppose (x <= 1 & x <> 1);

then A32: x = ( 0 ) by NAT_1:25;
hence ( f . ( ( x + 1 ) + 3 ) ) = ( ( g . ( 1 + 3 ) ) `1_4 ) by A21
.= ( G(( 1 + 2 ),( g . ( 1 + 2 ) )) `1_4 ) by A8
.= ( ( g . ( ( 0 ) + 3 ) ) `2_4 ) by CKB7:def 1
.= ( G(( ( 0 ) + 2 ),( g . ( ( 0 ) + 2 ) )) `2_4 ) by A8
.= ( ( g . ( ( 0 ) + 2 ) ) `3_4 ) by CKB8:def 1
.= r14 by A7,CKB9:def 1
.= F(( x + 1 ),( f . ( x + 1 ) ),( f . ( ( x + 1 ) + 1 ) ),( f . ( ( x + 1 ) + 2 ) )) by A15,A25,A26,A29,A32,CKB10:def 1;
end;
suppose A33: x = 1;

then A34: (( f . ( ( x + 1 ) + 1 ) ) = r04 & ( f . ( ( x + 1 ) + 2 ) ) = r14) by A13,A29,A30,CKB9:def 1,CKB10:def 1;
thus ( f . ( ( x + 1 ) + 3 ) ) = ( ( g . ( ( 1 + 1 ) + 3 ) ) `1_4 ) by A21,A33
.= ( G(( 2 + 2 ),( g . ( 2 + 2 ) )) `1_4 ) by A8
.= ( ( g . ( 1 + 3 ) ) `2_4 ) by CKB7:def 1
.= ( G(( 1 + 2 ),( g . ( 1 + 2 ) )) `2_4 ) by A8
.= ( ( g . ( ( 0 ) + 3 ) ) `3_4 ) by CKB8:def 1
.= ( G(( ( 0 ) + 2 ),( g . ( ( 0 ) + 2 ) )) `3_4 ) by A8
.= ( ( g . ( ( 0 ) + 2 ) ) `4_4 ) by CKB9:def 1
.= F(( x + 1 ),( f . ( x + 1 ) ),( f . ( ( x + 1 ) + 1 ) ),( f . ( ( x + 1 ) + 2 ) )) by A7,A26,A33,A34,CKB10:def 1;
end;
suppose A35: 1 < x;

then ( 1 - 1 ) <= ( x - 1 ) by XREAL_1:13;
then A36: ( x - 1 ) = ( x -' 1 ) by XREAL_0:def 2;
A37: ( 1 + 1 ) <= x by A35,NAT_1:13;
then A38: ( ( x -' 2 ) + 2 ) = x by XREAL_1:235;
( 2 - 2 ) <= ( x - 2 ) by A37,XREAL_1:13;
then A39: ( x - 2 ) = ( x -' 2 ) by XREAL_0:def 2;
A40: ( x + 1 ) = ( ( x - 1 ) + 2 );
thus ( f . ( ( x + 1 ) + 3 ) ) = ( ( g . ( x + ( 1 + 2 ) ) ) `2_4 ) by A31
.= ( G(( x + 2 ),( g . ( x + 2 ) )) `2_4 ) by A8
.= ( ( g . ( ( x -' 1 ) + 3 ) ) `3_4 ) by A36,CKB8:def 1
.= ( G(( x + 1 ),( g . ( x + 1 ) )) `3_4 ) by A8,A36,A40
.= ( ( g . ( ( x -' 2 ) + 3 ) ) `4_4 ) by A39,CKB9:def 1
.= ( G(( ( x -' 2 ) + 2 ),( g . ( ( x -' 2 ) + 2 ) )) `4_4 ) by A8
.= F(( x + 1 ),( ( g . x ) `2_4 ),( ( g . x ) `3_4 ),( ( g . x ) `4_4 )) by A38,CKB10:def 1
.= F(( x + 1 ),( f . ( x + 1 ) ),( f . ( ( x + 1 ) + 1 ) ),( f . ( ( x + 1 ) + 2 ) )) by A21,A29,A30;
end;
end;
( ( g . ( ( 0 ) + 1 ) ) `2_4 ) = C() by A13,CKB8:def 1
.= ( ( g . ( ( 0 ) + 2 ) ) `1_4 ) by A7,CKB7:def 1;
then A41: P[ ( 0 ) ] by A7,A24,A25,A26,A22,A19,A16,A18,A14,A17,A23,CKB8:def 1;
(for x being (Element of ( NAT )) holds P[ x ]) from NAT_1:sch 1(A41,A27);
hence thesis;
end;
