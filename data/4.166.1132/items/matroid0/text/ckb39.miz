environ
vocabularies NUMBERS,TARSKI,PRE_TOPC,SUBSET_1,BVFUNC_2,RCOMP_1,SETFAM_1,CLASSES1,FINSET_1,CARD_1,ARYTM_3,XBOOLE_0,STRUCT_0,ZFMISC_1,LEXBFS,NAT_1,XXREAL_0,TAXONOM2,AOFA_000,ORDERS_1,FUNCT_1,RELAT_1,NATTRA_1,EQREL_1,VECTSP_1,RLVECT_3,CARD_3,RLVECT_2,SUPINF_2,REALSET1,ARYTM_1,RLVECT_5,JORDAN13,MATROID0;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,DOMAIN_1,SETFAM_1,FINSET_1,NUMBERS,FUNCT_1,RELSET_1,FUNCT_2,EQREL_1,ORDERS_1,TAXONOM2,XCMPLX_0,XXREAL_0,NAT_1,CARD_1,CLASSES1,LEXBFS,AOFA_000,STRUCT_0,RLVECT_1,VECTSP_1,VECTSP_6,VECTSP_7,PRE_TOPC,TDLAT_3,MATRLIN,PENCIL_1,RANKNULL,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB14,CKB22,CKB23,CKB24,CKB25,CKB33;
definitions TARSKI,FUNCT_1,CLASSES1,TAXONOM2,XBOOLE_0,STRUCT_0,LEXBFS,PENCIL_1,CKB5,CKB6,CKB7,CKB8,CKB23,CKB24,CKB25,CKB33;
theorems PENCIL_1,TARSKI,XBOOLE_1,ZFMISC_1,CARD_1,COH_SP,PRE_TOPC,NAT_1,CLASSES1,TDLAT_3,XXREAL_0,XREAL_1,XBOOLE_0,TAXONOM2,ORDERS_1,FUNCT_2,FUNCT_1,EQREL_1,WELLORD2,VECTSP_7,VECTSP_9,MATRLIN,STRUCT_0,CARD_FIN,CARD_2,VECTSP_4,ORDINAL1,CARD_FIL,RANKNULL,VECTSP_1,VECTSP_6,ALGSTR_0,SETWISEO,HALLMAR1,BORSUK_5,CKB5,CKB6,CKB7,CKB8,CKB12,CKB15,CKB17,CKB21,CKB23,CKB24,CKB25,CKB29,CKB30,CKB32,CKB33,CKB35,CKB37,CKB38;
schemes FUNCT_2,NAT_1;
registrations FINSET_1,XBOOLE_0,CARD_1,RELSET_1,STRUCT_0,SUBSET_1,PENCIL_1,TDLAT_3,SETFAM_1,EQREL_1,MATRLIN,XREAL_0,MEMBERED,ALGSTR_0,BINOM,RLVECT_1,VECTSP_1,VECTSP_7,CKB9,CKB10,CKB11,CKB13,CKB16,CKB18,CKB19,CKB20,CKB26,CKB27,CKB28,CKB31,CKB34,CKB36;
constructors PCOMPS_1,EQREL_1,COH_SP,TDLAT_3,TAXONOM2,LEXBFS,RANKNULL,VECTSP_7,PENCIL_1,REALSET1,RELSET_1,CKB5,CKB7,CKB8,CKB24,CKB25,CKB33;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
registration
let P being  mutually-disjoint set;
cluster ( ProdMatroid P ) ->  with_exchange_property;
coherence
proof
set M = ( ProdMatroid P );
A1: ( the_family_of M ) = { A where A is (Subset of ( union P )): (for D being set holds (D in P implies (ex d being set st ( A /\ D ) c= { d }))) } by CKB33:def 1;
let A being  finite (Subset of M);
let B being  finite (Subset of M);
assume that
A2: A in ( the_family_of M )
and
A3: B in ( the_family_of M );
consider f being (Function of A,P) such that A4: (for a being set holds (a in A implies a in ( f . a ))) by CKB37:1;
assume ( card B ) = ( ( card A ) + 1 );
then A5: ( card B ) > ( card A ) by NAT_1:13;
consider g being (Function of B,P) such that A6: (for a being set holds (a in B implies a in ( g . a ))) by CKB37:1;
A7: (the carrier of ( ProdMatroid P )) = ( union P ) by CKB33:def 1;
then (P = ( {} ) implies A = ( {} )) by ZFMISC_1:2;
then A8: ( dom f ) = A by FUNCT_2:def 1;
reconsider A9 = ( rng f ),B9 = ( rng g ) as  finite set;
A9: A is  independent by A2,CKB6:def 1;
then f is  one-to-one by A4,CKB38:1;
then A,A9 are_equipotent  by A8,WELLORD2:def 4;
then A10: ( card A ) = ( card A9 ) by CARD_1:5;
(P = ( {} ) implies B = ( {} )) by A7,ZFMISC_1:2;
then A11: ( dom g ) = B by FUNCT_2:def 1;
B is  independent by A3,CKB6:def 1;
then g is  one-to-one by A6,CKB38:1;
then B,B9 are_equipotent  by A11,WELLORD2:def 4;
then ( card B ) = ( card B9 ) by CARD_1:5;
then consider a being set such that A12: a in ( B9 \ A9 ) by A10,A5,CKB29:1;
consider x9 being set such that A13: x9 in B and A14: a = ( g . x9 ) by A11,A12,FUNCT_1:def 3;
reconsider x = x9 as (Element of M) by A13;
take x;
A15: a nin A9 by A12,XBOOLE_0:def 5;
now
A16: x in ( g . x ) by A6,A13;
assume A17: x in A;
then x in ( f . x ) by A4;
then A18: ( f . x ) meets ( g . x ) by A16,XBOOLE_0:3;
A19: ( g . x ) in ( rng g ) by A11,A13,FUNCT_1:def 3;
( f . x ) in ( rng f ) by A8,A17,FUNCT_1:def 3;
hence contradiction by A15,A14,A19,A18,TAXONOM2:def 5;
end;
hence x in ( B \ A ) by A13,XBOOLE_0:def 5;
reconsider xx = { x } as (Subset of M) by A13,ZFMISC_1:31;
reconsider Ax = ( A \/ xx ) as (Subset of ( union P )) by CKB33:def 1;
A20: a in B9 by A12;
now
let D being set;
A21: ( Ax /\ D ) = ( ( A /\ D ) \/ ( xx /\ D ) ) by XBOOLE_1:23;
assume A22: D in P;
then consider d being (Element of D) such that A23: ( A /\ D ) c= { d } by A9,CKB35:1;
per cases ;
suppose A24: D = a;

take x9;
( A /\ D ) c= ( {} )
proof
let z being set;
assume A25: z in ( A /\ D );
then A26: z in D by XBOOLE_0:def 4;
A27: z in A by A25,XBOOLE_0:def 4;
then z in ( f . z ) by A4;
then A28: D meets ( f . z ) by A26,XBOOLE_0:3;
( f . z ) in ( rng f ) by A8,A27,FUNCT_1:def 3;
hence thesis by A20,A15,A24,A28,TAXONOM2:def 5;
end;
then ( A /\ D ) = ( {} );
hence ( Ax /\ D ) c= { x9 } by A21,XBOOLE_1:17;
end;
suppose A29: D <> a;

a in ( rng g ) by A11,A13,A14,FUNCT_1:def 3;
then A30: a misses D by A22,A29,TAXONOM2:def 5;
x in a by A6,A13,A14;
then x nin D by A30,XBOOLE_0:3;
then xx c/= D by ZFMISC_1:31;
then A31: ( xx /\ D ) <> xx by XBOOLE_1:17;
reconsider d as set;
take d;
( xx /\ D ) c= xx by XBOOLE_1:17;
then ( xx /\ D ) = ( {} ) by A31,ZFMISC_1:33;
hence ( Ax /\ D ) c= { d } by A23,A21;
end;
end;
hence thesis by A1;
end;
end;
