environ
vocabularies FUNCT_1,PBOOLE,RELAT_1,XBOOLE_0,ALGSTR_0,PRALG_1,FUNCOP_1,SUBSET_1,RLVECT_2,STRUCT_0,CARD_3,TARSKI,BINOP_1,ZFMISC_1,MONOID_0,GROUP_1,SEMI_AF1,GROUP_2,FINSET_1,FUNCT_4,REALSET1,FINSEQ_1,NAT_1,XXREAL_0,NUMBERS,GROUP_6,FUNCT_2,WELLORD1,GROUP_7,PARTFUN1;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,NUMBERS,NAT_1,FINSEQ_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCT_4,FINSET_1,BINOP_1,REALSET1,XXREAL_0,PBOOLE,FUNCOP_1,STRUCT_0,ALGSTR_0,MONOID_0,GROUP_1,GROUP_2,GROUP_6,CARD_3,PRALG_1,CKB1,CKB5,CKB6;
definitions STRUCT_0,GROUP_1,TARSKI,GROUP_2,GROUP_6,FINSEQ_1,XBOOLE_0,PRALG_1,FUNCT_1,PBOOLE,BINOP_1,REALSET1,ALGSTR_0,CKB1;
theorems PRALG_1,FUNCT_1,CARD_3,FUNCT_2,BINOP_1,TARSKI,ZFMISC_1,GROUP_1,GROUP_2,GROUP_6,FUNCT_4,FINSEQ_1,FINSEQ_3,ENUMSET1,RELSET_1,XBOOLE_0,XBOOLE_1,RELAT_1,FUNCOP_1,MONOID_0,ORDINAL1,PARTFUN1,CKB1;
schemes BINOP_1,FUNCT_1,PBOOLE,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,FINSET_1,XREAL_0,FINSEQ_1,REALSET1,STRUCT_0,GROUP_1,GROUP_2,MONOID_0,ORDINAL1,CARD_3,PRE_CIRC,FUNCOP_1,RELSET_1,CKB2,CKB3,CKB4,CKB7;
constructors BINOP_1,XXREAL_0,REALSET1,GROUP_6,MONOID_0,PRALG_1,PRALG_2,RELSET_1,FUNCT_4,CKB1,CKB6;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve i for set;
reserve I for set;
definition
let I being set;
let F being (multMagma-Family of I);
func product F ->  strict multMagma means 
:Def2: ((the carrier of it) = ( product ( Carrier F ) ) & (for f,g being (Element of ( product ( Carrier F ) )) holds (for i being set holds (i in I implies (ex Fi being non  empty multMagma st (ex h being Function st ((Fi = ( F . i ) & h = ( (the multF of it) . (f,g) )) & ( h . i ) = ( (the multF of Fi) . (( f . i ),( g . i )) ))))))));
existence
proof
set A = ( product ( Carrier F ) );
defpred P[ (Element of A),(Element of A),set ]
 means
(for i being set holds (i in I implies (ex Fi being non  empty multMagma st (ex h being Function st ((Fi = ( F . i ) & h = $3) & ( h . i ) = ( (the multF of Fi) . (( $1 . i ),( $2 . i )) ))))));
A1: ( dom ( Carrier F ) ) = I by PARTFUN1:def 2;
A2: (for x,y being (Element of A) holds (ex z being (Element of A) st P[ x,y,z ]))
proof
let x being (Element of A);
let y being (Element of A);
defpred R[ set,set ]
 means
(ex Fi being non  empty multMagma st (Fi = ( F . $1 ) & $2 = ( (the multF of Fi) . (( x . $1 ),( y . $1 )) )));
A3: (for i being set holds (i in I implies (ex w being set st (w in ( union ( rng ( Carrier F ) ) ) & R[ i,w ]))))
proof
let i being set;
assume A4: i in I;
then reconsider I1 = I as non  empty set;
reconsider i1 = i as (Element of I1) by A4;
reconsider F1 = F as (multMagma-Family of I1);
take w = ( (the multF of ( F1 . i1 )) . (( x . i1 ),( y . i1 )) );
A5: ( ( Carrier F ) . i1 ) in ( rng ( Carrier F ) ) by A1,FUNCT_1:def 3;
A6: (ex R being 1-sorted st (R = ( F . i1 ) & ( ( Carrier F1 ) . i1 ) = (the carrier of R))) by PRALG_1:def 13;
then A7: ( y . i1 ) in (the carrier of ( F1 . i1 )) by A1,CARD_3:9;
( x . i1 ) in (the carrier of ( F1 . i1 )) by A1,A6,CARD_3:9;
then ( (the multF of ( F1 . i1 )) . (( x . i1 ),( y . i1 )) ) in (the carrier of ( F1 . i1 )) by A7,BINOP_1:17;
hence w in ( union ( rng ( Carrier F ) ) ) by A6,A5,TARSKI:def 4;
thus thesis;
end;
consider z being Function such that A8: ((( dom z ) = I & ( rng z ) c= ( union ( rng ( Carrier F ) ) )) & (for x being set holds (x in I implies R[ x,( z . x ) ]))) from FUNCT_1:sch 5(A3);
A9: (for i being set holds (i in ( dom ( Carrier F ) ) implies ( z . i ) in ( ( Carrier F ) . i )))
proof
let i being set;
assume A10: i in ( dom ( Carrier F ) );
then reconsider I1 = I as non  empty set by PARTFUN1:def 2;
A11: (ex Fi being non  empty multMagma st (Fi = ( F . i ) & ( z . i ) = ( (the multF of Fi) . (( x . i ),( y . i )) ))) by A1,A8,A10;
reconsider i1 = i as (Element of I1) by A10,PARTFUN1:def 2;
reconsider F1 = F as (multMagma-Family of I1);
A12: (ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by A1,A10,PRALG_1:def 13;
then A13: ( y . i1 ) in (the carrier of ( F1 . i1 )) by A1,CARD_3:9;
( x . i1 ) in (the carrier of ( F1 . i1 )) by A1,A12,CARD_3:9;
hence thesis by A11,A12,A13,BINOP_1:17;
end;
( dom z ) = ( dom ( Carrier F ) ) by A8,PARTFUN1:def 2;
then reconsider z as (Element of A) by A9,CARD_3:9;
take z;
let i being set;
assume i in I;
then consider Fi being non  empty multMagma such that A14: Fi = ( F . i ) and A15: ( z . i ) = ( (the multF of Fi) . (( x . i ),( y . i )) ) by A8;
take Fi;
take z;
thus ((Fi = ( F . i ) & z = z) & ( z . i ) = ( (the multF of Fi) . (( x . i ),( y . i )) )) by A14,A15;
end;
consider B being (BinOp of A) such that A16: (for a,b being (Element of A) holds P[ a,b,( B . (a,b) ) ]) from BINOP_1:sch 3(A2);
take multMagma (# A,B #);
thus (the carrier of multMagma (# A,B #)) = ( product ( Carrier F ) );
let f being (Element of ( product ( Carrier F ) ));
let g being (Element of ( product ( Carrier F ) ));
let i being set;
assume i in I;
hence thesis by A16;
end;
uniqueness
proof
let A being  strict multMagma;
let B being  strict multMagma;
assume that
A17: (the carrier of A) = ( product ( Carrier F ) )
and
A18: (for f,g being (Element of ( product ( Carrier F ) )) holds (for i being set holds (i in I implies (ex Fi being non  empty multMagma st (ex h being Function st ((Fi = ( F . i ) & h = ( (the multF of A) . (f,g) )) & ( h . i ) = ( (the multF of Fi) . (( f . i ),( g . i )) )))))))
and
A19: (the carrier of B) = ( product ( Carrier F ) )
and
A20: (for f,g being (Element of ( product ( Carrier F ) )) holds (for i being set holds (i in I implies (ex Fi being non  empty multMagma st (ex h being Function st ((Fi = ( F . i ) & h = ( (the multF of B) . (f,g) )) & ( h . i ) = ( (the multF of Fi) . (( f . i ),( g . i )) )))))));
(for x,y being set holds ((x in (the carrier of A) & y in (the carrier of A)) implies ( (the multF of A) . (x,y) ) = ( (the multF of B) . (x,y) )))
proof
set P = ( product ( Carrier F ) );
let x being set;
let y being set;
assume that
A21: x in (the carrier of A)
and
A22: y in (the carrier of A);
reconsider x1 = x,y1 = y as (Element of P) by A17,A21,A22;
[ x1,y1 ] in [: (the carrier of A),(the carrier of A) :] by A21,A22,ZFMISC_1:87;
then reconsider f = ( (the multF of A) . [ x1,y1 ] ) as (Element of P) by A17,FUNCT_2:5;
[ x1,y1 ] in [: (the carrier of B),(the carrier of B) :] by A19,ZFMISC_1:87;
then reconsider g = ( (the multF of B) . [ x1,y1 ] ) as (Element of P) by A19,FUNCT_2:5;
A23: ( dom ( Carrier F ) ) = I by PARTFUN1:def 2;
then A24: ( dom g ) = I by CARD_3:9;
A25: (for i being set holds (i in I implies ( f . i ) = ( g . i )))
proof
let i being set;
assume A26: i in I;
then A27: (ex Gi being non  empty multMagma st (ex h2 being Function st ((Gi = ( F . i ) & h2 = ( (the multF of B) . (x1,y1) )) & ( h2 . i ) = ( (the multF of Gi) . (( x1 . i ),( y1 . i )) )))) by A20;
(ex Fi being non  empty multMagma st (ex h1 being Function st ((Fi = ( F . i ) & h1 = ( (the multF of A) . (x1,y1) )) & ( h1 . i ) = ( (the multF of Fi) . (( x1 . i ),( y1 . i )) )))) by A18,A26;
hence thesis by A27;
end;
( dom f ) = I by A23,CARD_3:9;
hence thesis by A24,A25,FUNCT_1:2;
end;
hence thesis by A17,A19,BINOP_1:1;
end;
end;
