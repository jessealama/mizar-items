environ
vocabularies FUNCT_1,PBOOLE,RELAT_1,XBOOLE_0,ALGSTR_0,PRALG_1,FUNCOP_1,SUBSET_1,RLVECT_2,STRUCT_0,CARD_3,TARSKI,BINOP_1,ZFMISC_1,MONOID_0,GROUP_1,SEMI_AF1,GROUP_2,FINSET_1,FUNCT_4,REALSET1,FINSEQ_1,NAT_1,XXREAL_0,NUMBERS,GROUP_6,FUNCT_2,WELLORD1,GROUP_7,PARTFUN1;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,NUMBERS,NAT_1,FINSEQ_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCT_4,FINSET_1,BINOP_1,REALSET1,XXREAL_0,PBOOLE,FUNCOP_1,STRUCT_0,ALGSTR_0,MONOID_0,GROUP_1,GROUP_2,GROUP_6,CARD_3,PRALG_1,CKB1,CKB5,CKB6,CKB8,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16;
definitions STRUCT_0,GROUP_1,TARSKI,GROUP_2,GROUP_6,FINSEQ_1,XBOOLE_0,PRALG_1,FUNCT_1,PBOOLE,BINOP_1,REALSET1,ALGSTR_0,CKB1,CKB8,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16;
theorems PRALG_1,FUNCT_1,CARD_3,FUNCT_2,BINOP_1,TARSKI,ZFMISC_1,GROUP_1,GROUP_2,GROUP_6,FUNCT_4,FINSEQ_1,FINSEQ_3,ENUMSET1,RELSET_1,XBOOLE_0,XBOOLE_1,RELAT_1,FUNCOP_1,MONOID_0,ORDINAL1,PARTFUN1,CKB1,CKB8,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16;
schemes BINOP_1,FUNCT_1,PBOOLE,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,FINSET_1,XREAL_0,FINSEQ_1,REALSET1,STRUCT_0,GROUP_1,GROUP_2,MONOID_0,ORDINAL1,CARD_3,PRE_CIRC,FUNCOP_1,RELSET_1,CKB2,CKB3,CKB4,CKB7,CKB9,CKB17;
constructors BINOP_1,XXREAL_0,REALSET1,GROUP_6,MONOID_0,PRALG_1,PRALG_2,RELSET_1,FUNCT_4,CKB1,CKB6,CKB8,CKB11,CKB12,CKB13;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve i for set;
reserve I for set;
reserve f for Function;
reserve g for Function;
reserve h for Function;
Lm1:now
let I being non  empty set;
let i being (Element of I);
let F being  multMagma-yielding (ManySortedSet of I);
let f being (Element of ( product ( Carrier F ) ));
A1: ( dom ( Carrier F ) ) = I by PARTFUN1:def 2;
(ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by PRALG_1:def 13;
hence ( f . i ) in (the carrier of ( F . i )) by A1,CARD_3:9;
end;
registration
let I being set;
let F being  Group-like (multMagma-Family of I);
cluster ( product F ) ->  Group-like;
coherence
proof
defpred P[ set,set ]
 means
(ex Fi being non  empty multMagma st (ex e being (Element of Fi) st ((Fi = ( F . $1 ) & $2 = e) & (for h being (Element of Fi) holds ((( h * e ) = h & ( e * h ) = h) & (ex g being (Element of Fi) st (( h * g ) = e & ( g * h ) = e)))))));
set G = ( product F );
A1: ( dom ( Carrier F ) ) = I by PARTFUN1:def 2;
A2: (for i being set holds (i in I implies (ex y being set st (y in ( union ( rng ( Carrier F ) ) ) & P[ i,y ]))))
proof
let i being set;
assume A3: i in I;
then reconsider I1 = I as non  empty set;
reconsider i1 = i as (Element of I1) by A3;
reconsider F1 = F as  Group-like (multMagma-Family of I1);
A4: (ex R being 1-sorted st (R = ( F . i1 ) & ( ( Carrier F1 ) . i1 ) = (the carrier of R))) by PRALG_1:def 13;
( F1 . i1 ) is  Group-like by CKB14:def 1;
then consider e being (Element of ( F1 . i1 )) such that A5: (for h being (Element of ( F1 . i1 )) holds ((( h * e ) = h & ( e * h ) = h) & (ex g being (Element of ( F1 . i1 )) st (( h * g ) = e & ( g * h ) = e)))) by GROUP_1:def 2;
take e;
( ( Carrier F ) . i1 ) in ( rng ( Carrier F ) ) by A1,FUNCT_1:def 3;
hence e in ( union ( rng ( Carrier F ) ) ) by A4,TARSKI:def 4;
take ( F1 . i1 );
take e;
thus (( F1 . i1 ) = ( F . i ) & e = e);
let h being (Element of ( F1 . i1 ));
thus thesis by A5;
end;
consider ee being Function such that A6: ( dom ee ) = I and ( rng ee ) c= ( union ( rng ( Carrier F ) ) ) and A7: (for x being set holds (x in I implies P[ x,( ee . x ) ])) from FUNCT_1:sch 5(A2);
now
let i being set;
assume A8: i in ( dom ee );
then A9: (ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by A6,PRALG_1:def 13;
(ex Fi being non  empty multMagma st (ex e being (Element of Fi) st ((Fi = ( F . i ) & ( ee . i ) = e) & (for h being (Element of Fi) holds ((( h * e ) = h & ( e * h ) = h) & (ex g being (Element of Fi) st (( h * g ) = e & ( g * h ) = e))))))) by A6,A7,A8;
hence ( ee . i ) in ( ( Carrier F ) . i ) by A9;
end;
then A10: ee in ( product ( Carrier F ) ) by A1,A6,CARD_3:9;
then reconsider e1 = ee as (Element of G) by CKB8:def 1;
take e1;
let h being (Element of G);
reconsider h1 = h as (Element of ( product ( Carrier F ) )) by CKB8:def 1;
reconsider he = ( (the multF of G) . (h,e1) ),eh = ( (the multF of G) . (e1,h) ) as (Element of ( product ( Carrier F ) )) by CKB8:def 1;
A11: ( dom h1 ) = I by A1,CARD_3:9;
A12:now
let i being set;
assume A13: i in I;
then consider Fi being non  empty multMagma,e2 being (Element of Fi) such that A14: Fi = ( F . i ) and A15: ( ee . i ) = e2 and A16: (for h being (Element of Fi) holds ((( h * e2 ) = h & ( e2 * h ) = h) & (ex g being (Element of Fi) st (( h * g ) = e2 & ( g * h ) = e2)))) by A7;
reconsider h2 = ( h1 . i ) as (Element of Fi) by A13,A14,Lm1;
A17: (ex Gi being non  empty multMagma st (ex f being Function st ((Gi = ( F . i ) & f = ( (the multF of G) . (h1,e1) )) & ( f . i ) = ( (the multF of Gi) . (( h1 . i ),( ee . i )) )))) by A10,A13,CKB8:def 1;
( h2 * e2 ) = h2 by A16;
hence ( he . i ) = ( h1 . i ) by A17,A14,A15;
end;
( dom he ) = I by A1,CARD_3:9;
hence ( h * e1 ) = h by A11,A12,FUNCT_1:2;
A18:now
let i being set;
assume A19: i in I;
then consider Fi being non  empty multMagma,e2 being (Element of Fi) such that A20: Fi = ( F . i ) and A21: ( ee . i ) = e2 and A22: (for h being (Element of Fi) holds ((( h * e2 ) = h & ( e2 * h ) = h) & (ex g being (Element of Fi) st (( h * g ) = e2 & ( g * h ) = e2)))) by A7;
reconsider h2 = ( h1 . i ) as (Element of Fi) by A19,A20,Lm1;
A23: (ex Gi being non  empty multMagma st (ex f being Function st ((Gi = ( F . i ) & f = ( (the multF of G) . (e1,h1) )) & ( f . i ) = ( (the multF of Gi) . (( ee . i ),( h1 . i )) )))) by A10,A19,CKB8:def 1;
( e2 * h2 ) = h2 by A22;
hence ( eh . i ) = ( h1 . i ) by A23,A20,A21;
end;
defpred R[ set,set ]
 means
(ex Fi being non  empty multMagma st (ex hi being (Element of Fi) st ((Fi = ( F . $1 ) & hi = ( h1 . $1 )) & (ex g being (Element of Fi) st ((( hi * g ) = ( ee . $1 ) & ( g * hi ) = ( ee . $1 )) & $2 = g)))));
A24: (for i being set holds (i in I implies (ex y being set st (y in ( union ( rng ( Carrier F ) ) ) & R[ i,y ]))))
proof
let i being set;
assume A25: i in I;
then consider Fi being non  empty multMagma,e being (Element of Fi) such that A26: Fi = ( F . i ) and A27: ( ee . i ) = e and A28: (for h being (Element of Fi) holds ((( h * e ) = h & ( e * h ) = h) & (ex g being (Element of Fi) st (( h * g ) = e & ( g * h ) = e)))) by A7;
A29: (ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by A25,PRALG_1:def 13;
reconsider hi = ( h1 . i ) as (Element of Fi) by A25,A26,Lm1;
consider g being (Element of Fi) such that A30: ( hi * g ) = e and A31: ( g * hi ) = e by A28;
take g;
( ( Carrier F ) . i ) in ( rng ( Carrier F ) ) by A1,A25,FUNCT_1:def 3;
hence g in ( union ( rng ( Carrier F ) ) ) by A26,A29,TARSKI:def 4;
take Fi;
take hi;
thus (Fi = ( F . i ) & hi = ( h1 . i )) by A26;
take g;
thus thesis by A27,A30,A31;
end;
consider gg being Function such that A32: ( dom gg ) = I and ( rng gg ) c= ( union ( rng ( Carrier F ) ) ) and A33: (for x being set holds (x in I implies R[ x,( gg . x ) ])) from FUNCT_1:sch 5(A24);
now
let i being set;
assume A34: i in ( dom gg );
then A35: (ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by A32,PRALG_1:def 13;
(ex Fi being non  empty multMagma st (ex hi being (Element of Fi) st ((Fi = ( F . i ) & hi = ( h1 . i )) & (ex g being (Element of Fi) st ((( hi * g ) = ( ee . i ) & ( g * hi ) = ( ee . i )) & ( gg . i ) = g))))) by A32,A33,A34;
hence ( gg . i ) in ( ( Carrier F ) . i ) by A35;
end;
then A36: gg in ( product ( Carrier F ) ) by A1,A32,CARD_3:9;
then reconsider g1 = gg as (Element of G) by CKB8:def 1;
( dom eh ) = I by A1,CARD_3:9;
hence ( e1 * h ) = h by A11,A18,FUNCT_1:2;
take g1;
reconsider he = ( (the multF of G) . (h,g1) ),eh = ( (the multF of G) . (g1,h) ) as (Element of ( product ( Carrier F ) )) by CKB8:def 1;
A37:now
let i being set;
assume A38: i in I;
then A39: (ex Fi being non  empty multMagma st (ex hi being (Element of Fi) st ((Fi = ( F . i ) & hi = ( h1 . i )) & (ex g being (Element of Fi) st ((( hi * g ) = ( ee . i ) & ( g * hi ) = ( ee . i )) & ( gg . i ) = g))))) by A33;
(ex Gi being non  empty multMagma st (ex h5 being Function st ((Gi = ( F . i ) & h5 = ( (the multF of G) . (h1,gg) )) & ( h5 . i ) = ( (the multF of Gi) . (( h1 . i ),( gg . i )) )))) by A36,A38,CKB8:def 1;
hence ( he . i ) = ( ee . i ) by A39;
end;
A40:now
let i being set;
assume A41: i in I;
then A42: (ex Fi being non  empty multMagma st (ex hi being (Element of Fi) st ((Fi = ( F . i ) & hi = ( h1 . i )) & (ex g being (Element of Fi) st ((( hi * g ) = ( ee . i ) & ( g * hi ) = ( ee . i )) & ( gg . i ) = g))))) by A33;
(ex Gi being non  empty multMagma st (ex h5 being Function st ((Gi = ( F . i ) & h5 = ( (the multF of G) . (gg,h1) )) & ( h5 . i ) = ( (the multF of Gi) . (( gg . i ),( h1 . i )) )))) by A36,A41,CKB8:def 1;
hence ( eh . i ) = ( ee . i ) by A42;
end;
( dom he ) = I by A1,CARD_3:9;
hence ( h * g1 ) = e1 by A6,A37,FUNCT_1:2;
( dom eh ) = I by A1,CARD_3:9;
hence thesis by A6,A40,FUNCT_1:2;
end;
end;
