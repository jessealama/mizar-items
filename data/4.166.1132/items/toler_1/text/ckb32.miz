environ
vocabularies XBOOLE_0,RELAT_2,RELAT_1,EQREL_1,WELLORD1,ZFMISC_1,PARTFUN1,SUBSET_1,TARSKI,ORDINAL1,TOLER_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELSET_1,RELAT_2,PARTFUN1,ORDINAL1,WELLORD1,EQREL_1,CKB2,CKB3,CKB14,CKB16,CKB18,CKB20;
definitions TARSKI,RELAT_1,RELAT_2,WELLORD1,CKB16,CKB18;
theorems TARSKI,RELAT_1,RELSET_1,RELAT_2,ZFMISC_1,WELLORD1,ENUMSET1,ORDERS_1,EQREL_1,ORDINAL1,XBOOLE_0,XBOOLE_1,PARTFUN1,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31;
schemes XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,PARTFUN1,EQREL_1,RELSET_1,CKB1,CKB19;
constructors ORDINAL1,WELLORD1,EQREL_1,RELSET_1,CKB3,CKB14,CKB16,CKB18;
requirements SUBSET,BOOLE;
begin
reserve x for set;
reserve y for set;
reserve z for set;
scheme ToleranceEx { A() -> set,P[set,set] } : (ex T being (Tolerance of A()) st (for x holds (for y holds ((x in A() & y in A()) implies ([ x,y ] in T iff P[ x,y ])))))
provided
A1: (for x holds (x in A() implies P[ x,x ]))
and
A2: (for x holds (for y holds (((x in A() & y in A()) & P[ x,y ]) implies P[ y,x ])))
proof
defpred X[ set ]
 means
(ex y st (ex z st ($1 = [ y,z ] & P[ y,z ])));
consider T being set such that A3: (for x holds (x in T iff (x in [: A(),A() :] & X[ x ]))) from XBOOLE_0:sch 1;
(for x holds (x in T implies x in [: A(),A() :])) by A3;
then reconsider T as (Relation of A(),A()) by TARSKI:def 3;
A4: ( field T ) c= ( A() \/ A() ) by RELSET_1:8;
(for x holds (x in ( field T ) implies [ x,x ] in T))
proof
let x;
assume x in ( field T );
then ([ x,x ] in [: A(),A() :] & P[ x,x ]) by A1,A4,ZFMISC_1:87;
hence thesis by A3;
end;
then A5: T is_reflexive_in ( field T ) by RELAT_2:def 1;
(for x holds (for y holds (((x in ( field T ) & y in ( field T )) & [ x,y ] in T) implies [ y,x ] in T)))
proof
let x;
let y;
assume that
A6: (x in ( field T ) & y in ( field T ))
and
A7: [ x,y ] in T;
((x in A() & y in A()) & P[ x,y ])
proof
thus (x in A() & y in A()) by A4,A6;
consider a being set,b being set such that A8: [ x,y ] = [ a,b ] and A9: P[ a,b ] by A3,A7;
x = a by A8,ZFMISC_1:27;
hence thesis by A8,A9,ZFMISC_1:27;
end;
then ([ y,x ] in [: A(),A() :] & P[ y,x ]) by A2,ZFMISC_1:87;
hence thesis by A3;
end;
then A10: T is_symmetric_in ( field T ) by RELAT_2:def 3;
(for x holds (x in A() implies x in ( dom T )))
proof
let x;
assume x in A();
then ([ x,x ] in [: A(),A() :] & P[ x,x ]) by A1,ZFMISC_1:87;
then [ x,x ] in T by A3;
hence thesis by RELAT_1:def 4;
end;
then A() c= ( dom T ) by TARSKI:def 3;
then ( dom T ) = A() by XBOOLE_0:def 10;
then reconsider T as (Tolerance of A()) by A5,A10,PARTFUN1:def 2,RELAT_2:def 9,RELAT_2:def 11;
take T;
let x;
let y;
assume A11: (x in A() & y in A());
thus ([ x,y ] in T implies P[ x,y ])
proof
assume [ x,y ] in T;
then consider a being set,b being set such that A12: [ x,y ] = [ a,b ] and A13: P[ a,b ] by A3;
x = a by A12,ZFMISC_1:27;
hence thesis by A12,A13,ZFMISC_1:27;
end;

assume A14: P[ x,y ];
[ x,y ] in [: A(),A() :] by A11,ZFMISC_1:87;
hence thesis by A3,A14;
end;
