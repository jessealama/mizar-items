environ
vocabularies NUMBERS,XREAL_0,ORDINAL1,CARD_1,XXREAL_0,RELAT_1,ARYTM_3,NAT_1,NEWTON,INT_1,SUBSET_1,ARYTM_1,REALSET1,ABIAN,FINSEQ_1,FINSEQ_2,ORDINAL4,CARD_3,FUNCT_1,INT_2,NAT_3,XBOOLE_0,PRE_POLY,POWER,PEPIN,SQUARE_1,ZFMISC_1,TARSKI,BINOP_2,FINSET_1,MEMBERED,REAL_1,COMPLEX1,PREPOWER;
notations SUBSET_1,XXREAL_0,PREPOWER,TARSKI,XBOOLE_0,ORDINAL1,CARD_1,NUMBERS,XREAL_0,INT_1,ABIAN,SQUARE_1,NEWTON,FINSET_1,PEPIN,NAT_3,RELAT_1,FUNCT_1,FINSEQ_1,RVSUM_1,WSIERP_1,TREES_4,BINOP_2,XXREAL_2,POWER,MEMBERED,INT_2,FINSEQ_2,ZFMISC_1,RECDEF_1,PRE_POLY,REAL_1,NAT_1,NAT_D;
definitions TARSKI,MEMBERED,RVSUM_1,FINSEQ_2,NEWTON,SQUARE_1;
theorems TARSKI,NAT_1,NAT_2,INT_1,FINSEQ_1,CARD_1,XBOOLE_1,CARD_2,FINSET_1,SQUARE_1,EULER_1,EULER_2,PREPOWER,POWER,ABSVALUE,NEWTON,XCMPLX_1,ORDINAL1,XREAL_1,PEPIN,NAT_3,XBOOLE_0,INT_2,ABIAN,FINSEQ_3,RVSUM_1,FUNCT_1,FINSEQ_2,ZFMISC_1,FUNCT_2,FUNCOP_1,PROB_3,INTEGRA5,COMPTRIG,XXREAL_0,NAT_D,VALUED_1,XXREAL_2,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50;
schemes NAT_1,FINSEQ_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,FINSEQ_2,RVSUM_1,NEWTON,SEQM_3,NAT_3,VALUED_0,VALUED_1,XXREAL_2,CARD_1,PRE_POLY;
constructors REAL_1,NAT_D,PREPOWER,POWER,WSIERP_1,ABIAN,PEPIN,POLYNOM2,NAT_3,SEQ_1,RECDEF_1,BINOP_2,XXREAL_2,RELSET_1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
theorem
Th44: (for a,k being (Element of ( NAT )) holds (for X being set holds (for F being (FinSequence of ( SetPrimes )) holds (for p being Prime holds ((((X c= ( SetPrimes ) & X c= ( Seg k )) & F = ( Sgm X )) & a = ( Product F )) implies ((p in ( rng F ) implies ( p |-count a ) = 1) & ((not p in ( rng F )) implies ( p |-count a ) = ( 0 ))))))))
proof
let a being (Element of ( NAT ));
let k being (Element of ( NAT ));
let X being set;
let F being (FinSequence of ( SetPrimes ));
let p being Prime;
defpred P[  natural number ]
 means
(for a,k being (Element of ( NAT )) holds (for X being set holds (for F being (FinSequence of ( SetPrimes )) holds (for p being Prime holds (((((X c= ( SetPrimes ) & X c= ( Seg k )) & F = ( Sgm X )) & a = ( Product F )) & ( len F ) = $1) implies ((p in ( rng F ) implies ( p |-count a ) = 1) & ((not p in ( rng F )) implies ( p |-count a ) = ( 0 ))))))));
now
let F being (FinSequence of ( SetPrimes ));
( rng F ) c= ( REAL );
hence F is (FinSequence of ( REAL )) by FINSEQ_1:def 4;
end;
then reconsider F as (FinSequence of ( REAL ));
A1: (ex n being (Element of ( NAT )) st n = ( len F ));
A2: (for n being (Element of ( NAT )) holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n being (Element of ( NAT ));
assume A3: P[ n ];
(for a,k being (Element of ( NAT )) holds (for X being set holds (for F being (FinSequence of ( SetPrimes )) holds (for p being Prime holds (((((X c= ( SetPrimes ) & X c= ( Seg k )) & F = ( Sgm X )) & a = ( Product F )) & ( len F ) = ( n + 1 )) implies ((p in ( rng F ) implies ( p |-count a ) = 1) & ((not p in ( rng F )) implies ( p |-count a ) = ( 0 ))))))))
proof
let a being (Element of ( NAT ));
let k being (Element of ( NAT ));
let X being set;
let F being (FinSequence of ( SetPrimes ));
let p being Prime;
assume that
A4: X c= ( SetPrimes )
and
A5: X c= ( Seg k )
and
A6: F = ( Sgm X )
and
A7: a = ( Product F );
set x = ( F . ( n + 1 ) );
assume A8: ( len F ) = ( n + 1 );
then A9: ( Seg ( n + 1 ) ) = ( dom F ) by FINSEQ_1:def 3;
then ( n + 1 ) in ( dom F ) by FINSEQ_1:3;
then A10: x in ( rng F ) by FUNCT_1:def 3;
( rng F ) c= ( SetPrimes ) by FINSEQ_1:def 4;
then reconsider x as Prime by A10,NEWTON:def 6;
set X1 = ( X \ { x } );
A11: X1 c= X by XBOOLE_1:36;
then A12: X1 c= ( Seg k ) by A5,XBOOLE_1:1;
A13: ( rng F ) = X by A5,A6,FINSEQ_1:def 13;
now
let y being set;
assume y in { x };
then y = x by TARSKI:def 1;
hence y in ( Seg k ) by A5,A10,A13;
end;
then A14: { x } c= ( Seg k ) by TARSKI:def 3;
A15: (for m1,n1 being (Element of ( NAT )) holds ((m1 in X1 & n1 in { x }) implies m1 < n1))
proof
set n9 = ( n + 1 );
let m1 being (Element of ( NAT ));
let n1 being (Element of ( NAT ));
assume that
A16: m1 in X1
and
A17: n1 in { x };
set l = ( ( F " ) . m1 );
A18: F is  one-to-one by A5,A6,FINSEQ_3:92;
m1 in ( rng F ) by A11,A13,A16;
then m1 in ( dom ( F " ) ) by A18,FUNCT_1:33;
then l in ( rng ( F " ) ) by FUNCT_1:def 3;
then A19: l in ( Seg ( n + 1 ) ) by A9,A18,FUNCT_1:33;
then reconsider l as (Element of ( NAT ));
A20: l <= ( n + 1 ) by A19,FINSEQ_1:1;
A21: m1 = ( F . l ) by A11,A13,A16,A18,FUNCT_1:35;
then (not n9 = l) by A16,ZFMISC_1:56;
then A22: l < n9 by A20,XXREAL_0:1;
A23: n1 = ( F . n9 ) by A17,TARSKI:def 1;
1 <= l by A19,FINSEQ_1:1;
hence thesis by A5,A6,A8,A21,A23,A22,FINSEQ_1:def 13;
end;
set F2 = ( Sgm { x } );
set F1 = ( Sgm X1 );
reconsider F1 as (FinSequence of ( NAT ));
set a1 = ( Product F1 );
A24: F2 = <* x *> by FINSEQ_3:44;
then A25: ( rng F2 ) = { x } by FINSEQ_1:39;
A26: ( X1 \/ { x } ) = ( X \/ { x } ) by XBOOLE_1:39
.= X by A10,A13,ZFMISC_1:40;
then A27: F = ( F1 ^ F2 ) by A6,A12,A14,A15,FINSEQ_3:42;
then (( rng F ) c= ( SetPrimes ) & ( rng F1 ) c= ( rng F )) by FINSEQ_1:29,FINSEQ_1:def 4;
then A28: ( rng F1 ) c= ( SetPrimes ) by XBOOLE_1:1;
( len F ) = ( ( len F1 ) + ( len F2 ) ) by A27,FINSEQ_1:22;
then A29: ( n + 1 ) = ( ( len F1 ) + 1 ) by A8,A24,FINSEQ_1:39;
reconsider F1 as (FinSequence of ( SetPrimes )) by A28,FINSEQ_1:def 4;
now
let k being (Element of ( NAT ));
assume k in ( dom F1 );
then ( F1 . k ) in ( rng F1 ) by FUNCT_1:def 3;
then ( F1 . k ) is Prime by A28,NEWTON:def 6;
hence ( F1 . k ) > ( 0 );
end;
then A30: a1 <> ( 0 ) by CKB49:1;
( Product F ) = ( Product ( F1 ^ F2 ) ) by A6,A12,A14,A15,A26,FINSEQ_3:42
.= ( Product ( F1 ^ <* x *> ) ) by FINSEQ_3:44
.= ( ( Product F1 ) * x ) by RVSUM_1:96;
then A31: ( p |-count a ) = ( ( p |-count a1 ) + ( p |-count x ) ) by A7,A30,NAT_3:28;
A32: X1 c= ( SetPrimes ) by A4,A11,XBOOLE_1:1;
A33: ( rng F1 ) = ( X \ { x } ) by A12,FINSEQ_1:def 13;
A34:now
assume p in ( rng F );
then p in ( ( rng F1 ) \/ ( rng F2 ) ) by A27,FINSEQ_1:31;
then A35: (p in ( rng F1 ) or p in { x }) by A25,XBOOLE_0:def 3;
A36: p > 1 by INT_2:def 4;
per cases  by A35,TARSKI:def 1;
suppose A37: p in ( rng F1 );

then (not p in { x }) by A33,XBOOLE_0:def 5;
then p <> x by TARSKI:def 1;
then ( p |-count x ) = ( 0 ) by A36,NAT_3:24;
hence ( p |-count a ) = 1 by A3,A32,A12,A29,A31,A37;
end;
suppose A38: p = x;

then p in { x } by TARSKI:def 1;
then (not p in ( rng F1 )) by A33,XBOOLE_0:def 5;
then ( p |-count a1 ) = ( 0 ) by A3,A32,A12,A29;
hence ( p |-count a ) = 1 by A31,A36,A38,NAT_3:22;
end;
end;
now
assume (not p in ( rng F ));
then A39: (not p in ( ( rng F1 ) \/ ( rng F2 ) )) by A27,FINSEQ_1:31;
then (not p in { x }) by A25,XBOOLE_0:def 3;
then A40: p <> x by TARSKI:def 1;
(not p in ( rng F1 )) by A39,XBOOLE_0:def 3;
then A41: ( p |-count a1 ) = ( 0 ) by A3,A32,A12,A29;
p <> 1 by INT_2:def 4;
hence ( p |-count a ) = ( 0 ) by A31,A41,A40,NAT_3:24;
end;
hence thesis by A34;
end;
hence thesis;
end;
A42: P[ ( 0 ) ]
proof
let a being (Element of ( NAT ));
let k being (Element of ( NAT ));
let X being set;
let F being (FinSequence of ( SetPrimes ));
let p being Prime;
assume that
X c= ( SetPrimes )
and
X c= ( Seg k )
and
F = ( Sgm X )
and
A43: a = ( Product F )
and
A44: ( len F ) = ( 0 );
A45: F = ( <*> ( REAL ) ) by A44;
assume A46: ((not (p in ( rng F ) implies ( p |-count a ) = 1)) or (not ((not p in ( rng F )) implies ( p |-count a ) = ( 0 ))));
per cases  by A46;
suppose (not (p in ( rng F ) implies ( p |-count a ) = 1));

hence contradiction by A45;
end;
suppose A47: (not ((not p in ( rng F )) implies ( p |-count a ) = ( 0 )));

F = ( <*> ( SetPrimes ) ) by A44;
then (a = 1 & p <> 1) by A43,INT_2:def 4,RVSUM_1:94;
hence contradiction by A47,NAT_3:21;
end;
end;
(for n being (Element of ( NAT )) holds P[ n ]) from NAT_1:sch 1(A42,A2);
hence thesis by A1;
end;
