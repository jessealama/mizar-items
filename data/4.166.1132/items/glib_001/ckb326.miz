environ
vocabularies NUMBERS,ABIAN,SUBSET_1,ARYTM_3,XXREAL_0,ARYTM_1,CARD_1,TARSKI,FINSEQ_1,RELAT_1,FUNCT_1,NAT_1,XBOOLE_0,GLIB_000,FINSEQ_5,GRAPH_2,INT_1,FINSET_1,RCOMP_1,WAYBEL_0,ZFMISC_1,MSAFREE2,ORDINAL4,GRAPH_1,FUNCT_4,FUNCOP_1,MCART_1,GLIB_001;
notations TARSKI,XBOOLE_0,CARD_1,NUMBERS,SUBSET_1,XCMPLX_0,XXREAL_0,DOMAIN_1,RELAT_1,FUNCT_1,FINSEQ_1,GRAPH_2,FINSEQ_5,RELSET_1,MCART_1,FINSET_1,NAT_1,NAT_D,FUNCOP_1,FUNCT_4,GLIB_000,ABIAN,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB117,CKB118,CKB119,CKB120,CKB121,CKB142,CKB146,CKB148,CKB149,CKB151,CKB152,CKB153,CKB154,CKB155,CKB156,CKB157,CKB158,CKB159,CKB161,CKB162,CKB163,CKB164,CKB165,CKB166;
definitions FUNCOP_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB142,CKB154,CKB155,CKB156,CKB157,CKB158,CKB159;
theorems CARD_1,CARD_2,FUNCOP_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSEQ_6,FINSET_1,FUNCT_1,FUNCT_4,GLIB_000,GRAPH_2,GRAPH_5,INT_1,JORDAN12,MCART_1,NAT_1,NAT_2,PEPIN,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,PRE_CIRC,XXREAL_0,ABIAN,ORDINAL1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB142,CKB143,CKB144,CKB145,CKB154,CKB155,CKB156,CKB157,CKB158,CKB159,CKB167,CKB168,CKB169,CKB170,CKB171,CKB172,CKB173,CKB174,CKB175,CKB176,CKB177,CKB178,CKB179,CKB180,CKB181,CKB182,CKB183,CKB184,CKB185,CKB186,CKB187,CKB188,CKB189,CKB190,CKB191,CKB192,CKB193,CKB194,CKB195,CKB196,CKB197,CKB198,CKB199,CKB200,CKB201,CKB202,CKB203,CKB204,CKB205,CKB206,CKB207,CKB208,CKB209,CKB210,CKB211,CKB212,CKB213,CKB214,CKB215,CKB216,CKB217,CKB218,CKB219,CKB220,CKB221,CKB222,CKB223,CKB224,CKB225,CKB226,CKB227,CKB228,CKB229,CKB230,CKB231,CKB232,CKB233,CKB234,CKB235,CKB236,CKB237,CKB238,CKB239,CKB240,CKB241,CKB242,CKB243,CKB244,CKB245,CKB246,CKB247,CKB248,CKB249,CKB250,CKB251,CKB252,CKB253,CKB254,CKB255,CKB256,CKB257,CKB258,CKB259,CKB260,CKB261,CKB262,CKB263,CKB264,CKB265,CKB266,CKB267,CKB268,CKB269,CKB270,CKB271,CKB272,CKB273,CKB274,CKB275,CKB276,CKB277,CKB278,CKB279,CKB280,CKB281,CKB282,CKB283,CKB284,CKB285,CKB286,CKB287,CKB288,CKB289,CKB290,CKB291,CKB292,CKB293,CKB294,CKB295,CKB296,CKB297,CKB298,CKB299,CKB300,CKB301,CKB302,CKB303,CKB304,CKB305,CKB306,CKB307,CKB308,CKB309,CKB310,CKB311,CKB312,CKB313,CKB314,CKB315,CKB316,CKB317,CKB318,CKB319,CKB320,CKB321,CKB322,CKB323,CKB324,CKB325;
schemes FINSEQ_1,FUNCT_1,NAT_1,RECDEF_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,GLIB_000,ABIAN,GRAPH_2,GRAPH_3,CARD_1,SUBSET_1,CKB10,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB122,CKB123,CKB124,CKB125,CKB126,CKB127,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136,CKB137,CKB138,CKB139,CKB140,CKB141,CKB147,CKB150,CKB160;
constructors DOMAIN_1,FUNCT_4,NAT_D,RECDEF_1,FINSEQ_5,GLIB_000,ABIAN,GRAPH_2,XXREAL_2,RELSET_1,FINSEQ_2,RAT_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB142,CKB146,CKB154,CKB155,CKB156,CKB157,CKB158,CKB159,CKB161,CKB162,CKB163,CKB164,CKB165,CKB166;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
reserve G for _Graph;
theorem
(for W1 being (Trail of G) holds (W1 is non trivial implies (ex W2 being (Path of W1) st W2 is non trivial)))
proof
let W1 being (Trail of G);
assume W1 is non trivial;
then A1: 1 <> ( len W1 ) by CKB94:1;
1 <= ( len W1 ) by ABIAN:12;
then A2: 1 < ( len W1 ) by A1,XXREAL_0:1;
now
per cases ;
suppose A3: W1 is  open;

set P = the (Path of W1);
take P;
A4: ( P .first() ) = ( W1 .first() ) by CKB321:1;
A5: ( P .last() ) = ( W1 .last() ) by CKB321:1;
( W1 .first() ) <> ( W1 .last() ) by A3,CKB31:def 1;
hence P is non trivial by A4,A5,CKB94:1;
end;
suppose A6: W1 is  closed;

defpred P[ Nat ]
 means
((($1 is  odd & 1 < $1) & $1 <= ( len W1 )) & ( W1 . $1 ) = ( W1 . ( len W1 ) ));
A7: (ex k being Nat st P[ k ]) by A2;
consider k being Nat such that A8: (P[ k ] & (for m being Nat holds (P[ m ] implies k <= m))) from NAT_1:sch 5(A7);
reconsider k as  odd (Element of ( NAT )) by A8,ORDINAL1:def 12;
( 1 + 1 ) < ( k + 1 ) by A8,XREAL_1:8;
then 2 <= k by NAT_1:13;
then reconsider k2 = ( k - ( 2 * 1 ) ) as  odd (Element of ( NAT )) by INT_1:5;
set W3 = ( W1 .remove (k,( len W1 )) );
set W4 = ( W3 .cut (( ( 2 * ( 0 ) ) + 1 ),k2) );
set W5 = the (Path of W4);
consider es5 being (Subset of ( W4 .edgeSeq() )) such that A9: ( W5 .edgeSeq() ) = ( Seq es5 ) by CKB142:def 1;
A10: ( W4 .edgeSeq() ) c= ( W3 .edgeSeq() ) by CKB82:1;
( W1 . k ) = ( W1 .last() ) by A8;
then A11: W3 = ( W1 .cut (1,k) ) by CKB217:1;
then ( W3 .edgeSeq() ) c= ( W1 .edgeSeq() ) by CKB82:1;
then ( W4 .edgeSeq() ) c= ( W1 .edgeSeq() ) by A10,XBOOLE_1:1;
then reconsider es5 as (Subset of ( W1 .edgeSeq() )) by XBOOLE_1:1;
A12: W5 is_Walk_from ( W4 .first() ),( W4 .last() ) by CKB142:def 1;
A13: ( ( len W3 ) + ( len W1 ) ) = ( ( len W1 ) + k ) by A8,CKB63:1;
then A14: k2 <= ( ( len W3 ) - ( 0 ) ) by XREAL_1:13;
A15: 1 <= k2 by ABIAN:12;
then ( W4 .last() ) = ( W3 . k2 ) by A14,CKB55:1;
then A16: ( W5 .last() ) = ( W3 . k2 ) by A12,CKB30:def 1;
k2 in ( dom W3 ) by A14,A15,FINSEQ_3:25;
then A17: ( W5 .last() ) = ( W1 . k2 ) by A8,A16,A11,CKB62:1;
( W4 .first() ) = ( W3 . 1 ) by A14,A15,CKB55:1;
then A18: ( W5 .first() ) = ( W3 . 1 ) by A12,CKB30:def 1;
A19: ( W1 . 1 ) = ( W1 . ( len W1 ) ) by A6,CKB278:1;
A20:now
1 <= ( len W3 ) by ABIAN:12;
then A21: ( ( 2 * ( 0 ) ) + 1 ) in ( dom W3 ) by FINSEQ_3:25;
assume that
A22: W5 is non trivial
and
A23: W5 is  closed;
( W5 .first() ) = ( W1 . k2 ) by A17,A23,CKB31:def 1;
then A24: ( W1 . k2 ) = ( W1 . ( len W1 ) ) by A19,A8,A18,A11,A21,CKB62:1;
now
assume k2 = 1;
then ( len W4 ) = 1 by A14,CKB61:1;
then A25: ( len W5 ) <= 1 by CKB145:1;
1 <= ( len W5 ) by ABIAN:12;
then ( len W5 ) = 1 by A25,XXREAL_0:1;
hence contradiction by A22,CKB94:1;
end;
then A26: 1 < k2 by A15,XXREAL_0:1;
A27: k2 < ( k - ( 0 ) ) by XREAL_1:15;
then k2 <= ( len W1 ) by A8,XXREAL_0:2;
hence contradiction by A8,A24,A26,A27;
end;
set e = ( W1 . ( k2 + 1 ) );
set W2 = ( W5 .addEdge e );
k2 < ( ( len W1 ) - ( 0 ) ) by A8,XREAL_1:15;
then A28: e Joins ( W1 . k2 ),( W1 . ( k2 + 2 ) ),G by CKB9:def 1;
A29: k2 < ( ( len W3 ) - ( 0 ) ) by A13,XREAL_1:15;
then A30: ( len W4 ) = k2 by CKB61:1;
A31:now
let m being  odd (Element of ( NAT ));
assume that
A32: 1 < m
and
A33: m <= ( len W5 );
consider n being  odd (Element of ( NAT )) such that A34: m <= n and A35: n <= ( len W4 ) and A36: ( W5 . m ) = ( W4 . n ) by A33,CKB324:1;
A37: 1 < n by A32,A34,XXREAL_0:2;
then n in ( dom W4 ) by A35,FINSEQ_3:25;
then A38: ( W5 . m ) = ( W3 . n ) by A14,A36,CKB62:1;
A39: ( n + ( 0 ) ) < ( k2 + 2 ) by A30,A35,XREAL_1:8;
then A40: n <= ( len W1 ) by A8,XXREAL_0:2;
n in ( dom W3 ) by A13,A37,A39,FINSEQ_3:25;
then ( W5 . m ) = ( W1 . n ) by A8,A11,A38,CKB62:1;
hence ( W5 . m ) <> ( W1 . k ) by A8,A37,A39,A40;
end;
( k2 + 1 ) <= k by A13,A29,NAT_1:13;
then A41: ( k2 + 1 ) <= ( len W1 ) by A8,XXREAL_0:2;
now
assume A42: e in ( W5 .edges() );
( W5 .edges() ) c= ( W4 .edges() ) by CKB323:1;
then consider n being  even (Element of ( NAT )) such that A43: 1 <= n and A44: n <= ( len W4 ) and A45: ( W4 . n ) = e by A42,CKB85:1;
A46: n < ( k2 + 1 ) by A30,A44,NAT_1:13;
n <= ( k2 + 2 ) by A30,A44,NAT_1:12;
then A47: n in ( dom W3 ) by A13,A43,FINSEQ_3:25;
n in ( dom W4 ) by A43,A44,FINSEQ_3:25;
then e = ( W3 . n ) by A14,A45,CKB62:1;
then ( W1 . ( k2 + 1 ) ) = ( W1 . n ) by A8,A11,A47,CKB62:1;
hence contradiction by A41,A43,A46,CKB96:1;
end;
then reconsider W2 as (Path of G) by A28,A17,A20,A31,CKB310:1;
set g = ( ( ( k2 + 1 ) div 2 ) .--> e );
set es = ( es5 +* g );
A48: ( dom es ) = ( ( dom es5 ) \/ ( dom g ) ) by FUNCT_4:def 1;
A49: ( dom g ) = { ( ( k2 + 1 ) div 2 ) } by FUNCOP_1:13;
A50: ( g . ( ( k2 + 1 ) div 2 ) ) = e by FUNCOP_1:72;
A51:now
let z being set;
assume A52: z in es;
then consider x being set,y being set such that A53: z = [ x,y ] by RELAT_1:def 1;
A54: x in ( dom es ) by A52,A53,FUNCT_1:1;
A55: y = ( es . x ) by A52,A53,FUNCT_1:1;
now
per cases ;
suppose A56: x in ( dom g );

then A57: x = ( ( k2 + 1 ) div 2 ) by A49,TARSKI:def 1;
A58: 1 <= ( k2 + 1 ) by NAT_1:12;
then ( W1 . ( k2 + 1 ) ) = ( ( W1 .edgeSeq() ) . x ) by A41,A57,CKB79:1;
then A59: ( ( W1 .edgeSeq() ) . x ) = y by A48,A50,A54,A55,A56,A57,FUNCT_4:def 1;
x in ( dom ( W1 .edgeSeq() ) ) by A41,A57,A58,CKB79:1;
hence z in ( W1 .edgeSeq() ) by A53,A59,FUNCT_1:1;
end;
suppose A60: (not x in ( dom g ));

then A61: x in ( dom es5 ) by A48,A54,XBOOLE_0:def 3;
y = ( es5 . x ) by A48,A54,A55,A60,FUNCT_4:def 1;
then z in es5 by A53,A61,FUNCT_1:1;
hence z in ( W1 .edgeSeq() );
end;
end;
hence z in ( W1 .edgeSeq() );
end;
then es c= ( W1 .edgeSeq() ) by TARSKI:def 3;
then ( dom es ) c= ( dom ( W1 .edgeSeq() ) ) by RELAT_1:11;
then A62: ( dom es ) c= ( Seg ( len ( W1 .edgeSeq() ) ) ) by FINSEQ_1:def 3;
then reconsider es as FinSubsequence by FINSEQ_1:def 12;
reconsider es as (Subset of ( W1 .edgeSeq() )) by A51,TARSKI:def 3;
A63: ( dom es5 ) c= ( dom ( W4 .edgeSeq() ) ) by GRAPH_2:25;
now
thus (( dom es5 ) c= ( Seg ( len ( W1 .edgeSeq() ) ) ) & ( dom g ) c= ( Seg ( len ( W1 .edgeSeq() ) ) )) by A48,A62,XBOOLE_1:11;
let x being (Element of ( NAT )),y being (Element of ( NAT ));
assume that
A64: x in ( dom es5 )
and
A65: y in ( dom g );
x <= ( len ( W4 .edgeSeq() ) ) by A63,A64,FINSEQ_3:25;
then ( 2 * x ) <= ( 2 * ( len ( W4 .edgeSeq() ) ) ) by XREAL_1:64;
then ( ( 2 * x ) + 1 ) <= ( ( 2 * ( len ( W4 .edgeSeq() ) ) ) + 1 ) by XREAL_1:7;
then A66: ( ( 2 * x ) + 1 ) <= k2 by A30,CKB22:def 1;
A67: 2 divides ( k2 + 1 ) by PEPIN:22;
y = ( ( k2 + 1 ) div 2 ) by A49,A65,TARSKI:def 1;
then ( 2 * y ) = ( k2 + 1 ) by A67,NAT_D:3;
then ( ( 2 * x ) + 1 ) < ( 2 * y ) by A66,NAT_1:13;
then A68: ( ( ( 2 * x ) + 1 ) - 1 ) < ( ( 2 * y ) - ( 0 ) ) by XREAL_1:14;
then x <= y by XREAL_1:68;
hence x < y by A68,XXREAL_0:1;
end;
then A69: ( Sgm ( dom es ) ) = ( ( Sgm ( dom es5 ) ) ^ ( Sgm ( dom g ) ) ) by A48,FINSEQ_3:42;
A70: k2 in ( dom W3 ) by A15,A29,FINSEQ_3:25;
then A71: ( W5 .last() ) = ( W1 . k2 ) by A8,A16,A11,CKB62:1;
now
now
assume ( ( dom es5 ) /\ ( dom g ) ) <> ( {} );
then consider x being set such that A72: x in ( ( dom es5 ) /\ ( dom g ) ) by XBOOLE_0:def 1;
x in ( dom g ) by A72,XBOOLE_0:def 4;
then A73: x = ( ( k2 + 1 ) div 2 ) by A49,TARSKI:def 1;
x in ( dom es5 ) by A72,XBOOLE_0:def 4;
then ( ( k2 + 1 ) div 2 ) <= ( len ( W4 .edgeSeq() ) ) by A63,A73,FINSEQ_3:25;
then A74: ( 2 * ( ( k2 + 1 ) div 2 ) ) <= ( 2 * ( len ( W4 .edgeSeq() ) ) ) by XREAL_1:64;
2 divides ( k2 + 1 ) by PEPIN:22;
then ( k2 + 1 ) <= ( 2 * ( len ( W4 .edgeSeq() ) ) ) by A74,NAT_D:3;
then ( ( k2 + 1 ) + 1 ) <= ( ( 2 * ( len ( W4 .edgeSeq() ) ) ) + 1 ) by XREAL_1:7;
then ( ( 1 + 1 ) + k2 ) <= ( ( 0 ) + k2 ) by A30,CKB22:def 1;
hence contradiction by XREAL_1:6;
end;
then A75: ( dom es5 ) misses ( dom g ) by XBOOLE_0:def 7;
( len W2 ) = ( ( len W5 ) + 2 ) by A28,A71,CKB76:1;
then A76: ( ( len W5 ) + 2 ) = ( ( 2 * ( len ( W2 .edgeSeq() ) ) ) + 1 ) by CKB22:def 1;
A77: ( len ( Sgm ( dom es5 ) ) ) = ( card ( dom es5 ) ) by A48,A62,FINSEQ_3:39,XBOOLE_1:11
.= ( card es5 ) by CARD_1:62
.= ( len ( W5 .edgeSeq() ) ) by A9,CKB5:1;
A78:now
assume ( ( k2 + 1 ) div 2 ) = ( 0 );
then A79: ( 2 * ( ( k2 + 1 ) div 2 ) ) = ( 2 * ( 0 ) );
2 divides ( k2 + 1 ) by PEPIN:22;
hence contradiction by A79,NAT_D:3;
end;
( Sgm ( dom g ) ) = ( Sgm { ( ( k2 + 1 ) div 2 ) } ) by FUNCOP_1:13;
then A80: ( Sgm ( dom g ) ) = <* ( ( k2 + 1 ) div 2 ) *> by A78,FINSEQ_3:44;
then A81: ( len ( Sgm ( dom g ) ) ) = 1 by FINSEQ_1:40;
A82: ( ( Sgm ( dom g ) ) . 1 ) = ( ( k2 + 1 ) div 2 ) by A80,FINSEQ_1:40;
set h = ( Sgm ( dom es ) );
A83: ( Seq es ) = ( es * h ) by FINSEQ_1:def 14;
( len ( Seq es ) ) = ( card es ) by CKB5:1
.= ( card ( dom es ) ) by CARD_1:62;
then ( len ( Seq es ) ) = ( ( card ( dom es5 ) ) + ( card ( dom g ) ) ) by A48,A75,CARD_2:40
.= ( ( card ( dom es5 ) ) + 1 ) by A49,CARD_1:30
.= ( ( card es5 ) + 1 ) by CARD_1:62
.= ( ( len ( W5 .edgeSeq() ) ) + 1 ) by A9,CKB5:1;
then A84: ( ( 2 * ( len ( Seq es ) ) ) + 1 ) = ( ( ( 2 * ( len ( W5 .edgeSeq() ) ) ) + 1 ) + 2 )
.= ( ( 2 * ( len ( W2 .edgeSeq() ) ) ) + 1 ) by A76,CKB22:def 1;
hence ( len ( W2 .edgeSeq() ) ) = ( len ( Seq es ) );
let x being Nat;
assume that
A85: 1 <= x
and
A86: x <= ( len ( W2 .edgeSeq() ) );
A87: ( dom es5 ) c= ( Seg ( len ( W1 .edgeSeq() ) ) ) by A48,A62,XBOOLE_1:11;
A88: x in ( dom ( Seq es ) ) by A84,A85,A86,FINSEQ_3:25;
then A89: ( h . x ) in ( dom es ) by A83,FUNCT_1:11;
A90: ( dom h ) = ( Seg ( ( len ( Sgm ( dom es5 ) ) ) + ( len ( Sgm ( dom g ) ) ) ) ) by A69,FINSEQ_1:def 7;
A91: e Joins ( W5 .last() ),( W1 . k ),G by A8,A28,A16,A11,A70,CKB62:1;
A92: ( ( Seq es ) . x ) = ( es . ( h . x ) ) by A83,A88,FUNCT_1:12;
A93: x in ( dom h ) by A83,A88,FUNCT_1:11;
now
per cases ;
suppose A94: x <= ( len ( Sgm ( dom es5 ) ) );

then A95: x in ( dom ( Sgm ( dom es5 ) ) ) by A85,FINSEQ_3:25;
then A96: ( h . x ) = ( ( Sgm ( dom es5 ) ) . x ) by A69,FINSEQ_1:def 7;
( rng ( Sgm ( dom es5 ) ) ) = ( dom es5 ) by A87,FINSEQ_1:def 13;
then ( h . x ) in ( dom es5 ) by A95,A96,FUNCT_1:def 3;
then (not ( h . x ) in ( dom g )) by A75,XBOOLE_0:3;
then A97: ( ( Seq es ) . x ) = ( es5 . ( ( Sgm ( dom es5 ) ) . x ) ) by A48,A89,A92,A96,FUNCT_4:def 1;
A98: x in ( dom ( W5 .edgeSeq() ) ) by A85,A77,A94,FINSEQ_3:25;
then A99: ( 2 * x ) in ( dom W5 ) by CKB80:1;
( ( W5 .edgeSeq() ) . x ) = ( W5 . ( 2 * x ) ) by A85,A77,A94,CKB22:def 1;
then A100: ( W2 . ( 2 * x ) ) = ( ( W5 .edgeSeq() ) . x ) by A91,A99,CKB77:1
.= ( ( es5 * ( Sgm ( dom es5 ) ) ) . x ) by A9,FINSEQ_1:def 14;
x in ( dom ( es5 * ( Sgm ( dom es5 ) ) ) ) by A9,A98,FINSEQ_1:def 14;
hence ( ( Seq es ) . x ) = ( W2 . ( 2 * x ) ) by A97,A100,FUNCT_1:12;
end;
suppose ( len ( Sgm ( dom es5 ) ) ) < x;

then A101: ( ( len ( Sgm ( dom es5 ) ) ) + 1 ) <= x by NAT_1:13;
x <= ( ( len ( Sgm ( dom es5 ) ) ) + 1 ) by A93,A90,A81,FINSEQ_1:1;
then A102: x = ( ( len ( Sgm ( dom es5 ) ) ) + 1 ) by A101,XXREAL_0:1;
1 in ( dom ( Sgm ( dom g ) ) ) by A81,FINSEQ_3:25;
then A103: ( h . x ) = ( ( k2 + 1 ) div 2 ) by A69,A82,A102,FINSEQ_1:def 7;
then ( h . x ) in ( dom g ) by A49,TARSKI:def 1;
then A104: ( ( Seq es ) . x ) = ( g . ( ( k2 + 1 ) div 2 ) ) by A48,A89,A92,A103,FUNCT_4:def 1
.= e by FUNCOP_1:72
.= ( W2 . ( ( len W5 ) + 1 ) ) by A91,CKB77:1;
( 2 * x ) = ( ( ( 2 * ( len ( W5 .edgeSeq() ) ) ) + 1 ) + 1 ) by A77,A102
.= ( ( len W5 ) + 1 ) by CKB22:def 1;
hence ( ( Seq es ) . x ) = ( W2 . ( 2 * x ) ) by A104;
end;
end;
hence ( ( W2 .edgeSeq() ) . x ) = ( ( Seq es ) . x ) by A85,A86,CKB22:def 1;
end;
then A105: ( W2 .edgeSeq() ) = ( Seq es ) by FINSEQ_1:14;
1 <= ( len W3 ) by ABIAN:12;
then ( ( 2 * ( 0 ) ) + 1 ) in ( dom W3 ) by FINSEQ_3:25;
then ( W5 .first() ) = ( W1 .first() ) by A8,A18,A11,CKB62:1;
then W5 is_Walk_from ( W1 .first() ),( W1 . k2 ) by A71,CKB30:def 1;
then W2 is_Walk_from ( W1 .first() ),( W1 .last() ) by A8,A28,CKB78:1;
then reconsider W2 as (Path of W1) by A105,CKB142:def 1;
take W2;
thus W2 is non trivial by A28,A17,CKB292:1;
end;
end;
hence thesis;
end;
