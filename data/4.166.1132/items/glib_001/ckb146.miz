environ
vocabularies NUMBERS,ABIAN,SUBSET_1,ARYTM_3,XXREAL_0,ARYTM_1,CARD_1,TARSKI,FINSEQ_1,RELAT_1,FUNCT_1,NAT_1,XBOOLE_0,GLIB_000,FINSEQ_5,GRAPH_2,INT_1,FINSET_1,RCOMP_1,WAYBEL_0,ZFMISC_1,MSAFREE2,ORDINAL4,GRAPH_1,FUNCT_4,FUNCOP_1,MCART_1,GLIB_001;
notations TARSKI,XBOOLE_0,CARD_1,NUMBERS,SUBSET_1,XCMPLX_0,XXREAL_0,DOMAIN_1,RELAT_1,FUNCT_1,FINSEQ_1,GRAPH_2,FINSEQ_5,RELSET_1,MCART_1,FINSET_1,NAT_1,NAT_D,FUNCOP_1,FUNCT_4,GLIB_000,ABIAN,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB117,CKB118,CKB119,CKB120,CKB121,CKB142;
definitions FUNCOP_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB142;
theorems CARD_1,CARD_2,FUNCOP_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSEQ_6,FINSET_1,FUNCT_1,FUNCT_4,GLIB_000,GRAPH_2,GRAPH_5,INT_1,JORDAN12,MCART_1,NAT_1,NAT_2,PEPIN,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,PRE_CIRC,XXREAL_0,ABIAN,ORDINAL1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB142,CKB143,CKB144,CKB145;
schemes FINSEQ_1,FUNCT_1,NAT_1,RECDEF_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,GLIB_000,ABIAN,GRAPH_2,GRAPH_3,CARD_1,SUBSET_1,CKB10,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB122,CKB123,CKB124,CKB125,CKB126,CKB127,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136,CKB137,CKB138,CKB139,CKB140,CKB141;
constructors DOMAIN_1,FUNCT_4,NAT_D,RECDEF_1,FINSEQ_5,GLIB_000,ABIAN,GRAPH_2,XXREAL_2,RELSET_1,FINSEQ_2,RAT_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB142;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
definition
let G being _Graph;
let W being (Walk of G);
let m being (Element of ( NAT ));
let n being (Element of ( NAT ));
redefine func W .remove (m,n) -> (Subwalk of W);

coherence
proof
set W2 = ( W .remove (m,n) );
set es1 = ( W2 .edgeSeq() );
now
per cases ;
suppose A1: ((((m is  odd & n is  odd) & m <= n) & n <= ( len W )) & ( W . m ) = ( W . n ));

then reconsider m9 = m,n9 = n as  odd (Element of ( NAT ));
reconsider lenWn4 = ( ( len W ) - n9 ) as  even (Element of ( NAT )) by A1,INT_1:5;
A2: ( Seg ( len es1 ) ) = ( dom es1 ) by FINSEQ_1:def 3;
reconsider lenWaa1 = ( ( len W ) - 1 ) as  even (Element of ( NAT )) by ABIAN:12,INT_1:5;
reconsider n1 = ( n9 + 1 ) as  even (Element of ( NAT ));
reconsider maa1 = ( m9 - 1 ) as  even (Element of ( NAT )) by ABIAN:12,INT_1:5;
set X = { x where x is (Element of ( NAT )): (1 <= x & x <= ( maa1 div 2 )) };
set Y = { x where x is (Element of ( NAT )): (( n1 div 2 ) <= x & x <= ( lenWaa1 div 2 )) };
set Z = ( X \/ Y );
set es = ( ( W .edgeSeq() ) | Z );
2 divides maa1 by PEPIN:22;
then A3: maa1 = ( 2 * ( maa1 div 2 ) ) by NAT_D:3;
2 divides n1 by PEPIN:22;
then A4: n1 = ( 2 * ( n1 div 2 ) ) by NAT_D:3;
now
assume ( n1 div 2 ) < 1;
then ( 2 * ( n1 div 2 ) ) < ( 2 * 1 ) by XREAL_1:68;
then ( ( n + 1 ) - 1 ) < ( 2 - 1 ) by A4,XREAL_1:14;
then n9 < 1;
hence contradiction by ABIAN:12;
end;
then reconsider n1div2aa1 = ( ( n1 div 2 ) - 1 ) as (Element of ( NAT )) by INT_1:5;
A5: 2 divides lenWaa1 by PEPIN:22;
then A6: lenWaa1 = ( 2 * ( lenWaa1 div 2 ) ) by NAT_D:3;
now
let x being set;
assume A7: x in Z;
now
per cases  by A7,XBOOLE_0:def 3;
suppose x in X;

then consider y being (Element of ( NAT )) such that A8: y = x and A9: 1 <= y and A10: y <= ( maa1 div 2 );
( 2 * y ) <= maa1 by A3,A10,XREAL_1:64;
then ( 2 * y ) <= ( maa1 + 1 ) by NAT_1:12;
then ( 2 * y ) <= n by A1,XXREAL_0:2;
then A11: ( 2 * y ) <= ( len W ) by A1,XXREAL_0:2;
1 <= ( y + y ) by A9,NAT_1:12;
then ( 2 * y ) in ( dom W ) by A11,FINSEQ_3:25;
hence x in ( dom ( W .edgeSeq() ) ) by A8,CKB80:1;
end;
suppose x in Y;

then consider y being (Element of ( NAT )) such that A12: y = x and A13: ( n1 div 2 ) <= y and A14: y <= ( lenWaa1 div 2 );
( 2 * y ) <= lenWaa1 by A6,A14,XREAL_1:64;
then A15: ( 2 * y ) <= ( lenWaa1 + 1 ) by NAT_1:12;
A16: 1 <= n1 by NAT_1:12;
n1 <= ( 2 * y ) by A4,A13,XREAL_1:64;
then 1 <= ( 2 * y ) by A16,XXREAL_0:2;
then ( 2 * y ) in ( dom W ) by A15,FINSEQ_3:25;
hence x in ( dom ( W .edgeSeq() ) ) by A12,CKB80:1;
end;
end;
hence x in ( dom ( W .edgeSeq() ) );
end;
then A17: Z c= ( dom ( W .edgeSeq() ) ) by TARSKI:def 3;
then A18: Z c= ( Seg ( len ( W .edgeSeq() ) ) ) by FINSEQ_1:def 3;
then A19: X c= ( Seg ( len ( W .edgeSeq() ) ) ) by XBOOLE_1:11;
A20: Y c= ( Seg ( len ( W .edgeSeq() ) ) ) by A18,XBOOLE_1:11;
reconsider X,Y as  finite set by A18,FINSET_1:1,XBOOLE_1:11;
A21: X = { x where x is (Element of ( NAT )): (( ( 0 ) + 1 ) <= x & x <= ( ( 0 ) + ( maa1 div 2 ) )) };
A22: ( ( dom ( W .edgeSeq() ) ) /\ Z ) = Z by A17,XBOOLE_1:28;
then A23: ( dom es ) = Z by RELAT_1:61;
2 divides lenWn4 by PEPIN:22;
then A24: lenWn4 = ( 2 * ( lenWn4 div 2 ) ) by NAT_D:3;
A25:now
per cases ;
suppose A26: ( n1 div 2 ) > ( lenWaa1 div 2 );

then lenWaa1 < ( n + 1 ) by A6,A4,XREAL_1:68;
then ( lenWaa1 + 1 ) <= ( n + 1 ) by NAT_1:13;
then ( len W ) <= ( n9 + 1 );
then ( len W ) < ( n + 1 ) by XXREAL_0:1;
then ( len W ) <= n by NAT_1:13;
then A27: ( len W ) = n by A1,XXREAL_0:1;
now
assume Y <> ( {} );
then consider x being set such that A28: x in Y by XBOOLE_0:def 1;
(ex x9 being (Element of ( NAT )) st ((x9 = x & ( n1 div 2 ) <= x9) & x9 <= ( lenWaa1 div 2 ))) by A28;
hence contradiction by A26,XXREAL_0:2;
end;
hence ( card Y ) = ( lenWn4 div 2 ) by A27,CARD_1:27,NAT_2:2;
end;
suppose ( n1 div 2 ) <= ( lenWaa1 div 2 );

then reconsider k = ( ( lenWaa1 div 2 ) - ( n1 div 2 ) ) as (Element of ( NAT )) by INT_1:5;
Y = { x where x is (Element of ( NAT )): (( n1 div 2 ) <= x & x <= ( ( n1 div 2 ) + k )) };
then ( card Y ) = ( k + 1 ) by GRAPH_2:4;
hence ( card Y ) = ( lenWn4 div 2 ) by A24,A6,A4;
end;
end;
reconsider Z as  finite set by A17;
( W .edgeSeq() ) is (Subset of ( W .edgeSeq() )) by GRAPH_2:26;
then reconsider es as (Subset of ( W .edgeSeq() )) by GRAPH_2:27;
set es2 = ( Seq es );
A29: es2 = ( es * ( Sgm ( dom es ) ) ) by FINSEQ_1:def 14;
set lenY = ( ( lenWaa1 div 2 ) - n1div2aa1 );
now
assume n1div2aa1 > ( lenWaa1 div 2 );
then ( 2 * n1div2aa1 ) > ( 2 * ( lenWaa1 div 2 ) ) by XREAL_1:68;
then ( ( ( n + 1 ) - 1 ) - 1 ) > ( ( len W ) - 1 ) by A5,A4,NAT_D:3;
hence contradiction by A1,XREAL_1:9;
end;
then reconsider lenY as (Element of ( NAT )) by INT_1:5;
A30: Y = { x where x is (Element of ( NAT )): (( n1div2aa1 + 1 ) <= x & x <= ( n1div2aa1 + lenY )) };
A31:now
let a being (Element of ( NAT )),b being (Element of ( NAT ));
assume that
A32: a in X
and
A33: b in Y;
consider b9 being (Element of ( NAT )) such that A34: b9 = b and A35: ( n1 div 2 ) <= b9 and b9 <= ( lenWaa1 div 2 ) by A33;
consider a9 being (Element of ( NAT )) such that A36: a9 = a and 1 <= a9 and A37: a9 <= ( maa1 div 2 ) by A32;
( 2 * a9 ) <= maa1 by A3,A37,XREAL_1:64;
then ( 2 * a9 ) < ( maa1 + 1 ) by NAT_1:13;
then ( 2 * a9 ) < n by A1,XXREAL_0:2;
then A38: ( ( 2 * a9 ) + ( 0 ) ) < ( n + 1 ) by XREAL_1:8;
A39: ( n + 1 ) <= ( 2 * b9 ) by A4,A35,XREAL_1:64;
then ( 2 * a9 ) < ( 2 * b9 ) by A38,XXREAL_0:2;
then a9 <= b9 by XREAL_1:68;
hence a < b by A36,A34,A38,A39,XXREAL_0:1;
end;
A40:now
per cases ;
suppose A41: ( maa1 div 2 ) = ( 0 );

now
assume X <> ( {} );
then consider x being set such that A42: x in X by XBOOLE_0:def 1;
(ex x9 being (Element of ( NAT )) st ((x9 = x & 1 <= x9) & x9 <= ( maa1 div 2 ))) by A42;
hence contradiction by A41;
end;
hence ( card X ) = ( maa1 div 2 ) by A41;
end;
suppose ( maa1 div 2 ) <> ( 0 );

then consider k being Nat such that A43: ( maa1 div 2 ) = ( k + 1 ) by NAT_1:6;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
( maa1 div 2 ) = ( k + 1 ) by A43;
hence ( card X ) = ( maa1 div 2 ) by GRAPH_2:4;
end;
end;
then A44: ( dom ( Sgm X ) ) = ( Seg ( maa1 div 2 ) ) by A18,FINSEQ_3:40,XBOOLE_1:11;
then A45: ( len ( Sgm X ) ) = ( maa1 div 2 ) by FINSEQ_1:def 3;
( len W2 ) = ( ( 2 * ( len ( W2 .edgeSeq() ) ) ) + 1 ) by CKB22:def 1;
then A46: ( ( ( len W ) + m ) - n ) = ( ( 2 * ( len es1 ) ) + 1 ) by A1,CKB70:1;
now
assume (not ( X /\ Y ) = ( {} ));
then consider x being set such that A47: x in ( X /\ Y ) by XBOOLE_0:def 1;
x in Y by A47,XBOOLE_0:def 4;
then consider y9 being (Element of ( NAT )) such that A48: y9 = x and A49: ( n1 div 2 ) <= y9 and y9 <= ( lenWaa1 div 2 );
x in X by A47,XBOOLE_0:def 4;
then consider x9 being (Element of ( NAT )) such that A50: x9 = x and 1 <= x9 and A51: x9 <= ( maa1 div 2 );
( 2 * x9 ) <= maa1 by A3,A51,XREAL_1:64;
then ( 2 * y9 ) < ( maa1 + 1 ) by A50,A48,NAT_1:13;
then ( 2 * y9 ) < n by A1,XXREAL_0:2;
then ( ( 2 * y9 ) + ( 0 ) ) < ( n + 1 ) by XREAL_1:8;
hence contradiction by A4,A49,XREAL_1:64;
end;
then X misses Y by XBOOLE_0:def 7;
then A52: ( card Z ) = ( ( maa1 div 2 ) + ( lenWn4 div 2 ) ) by A40,A25,CARD_2:40;
( dom es ) c= ( Seg ( len ( W .edgeSeq() ) ) ) by A22,A18,RELAT_1:61;
then ( rng ( Sgm ( dom es ) ) ) = ( dom es ) by FINSEQ_1:def 13;
then A53: ( dom es2 ) = ( dom ( Sgm Z ) ) by A23,A29,RELAT_1:27
.= ( Seg ( card Z ) ) by A18,FINSEQ_3:40;
A54: ( dom ( Sgm Y ) ) = ( Seg ( lenWn4 div 2 ) ) by A18,A25,FINSEQ_3:40,XBOOLE_1:11;
now
let x9 being set;
assume A55: x9 in ( dom es1 );
then reconsider x = x9 as (Element of ( NAT ));
A56: 1 <= x by A55,FINSEQ_3:25;
A57: x <= ( len es1 ) by A55,FINSEQ_3:25;
then A58: ( es1 . x ) = ( W2 . ( 2 * x ) ) by A56,CKB22:def 1;
now
per cases ;
suppose A59: ( ( 2 * x ) + 1 ) <= m;

A60: 1 <= ( x + x ) by A56,NAT_1:12;
( ( ( 2 * x ) + 1 ) - 1 ) < ( m - ( 0 ) ) by A59,XREAL_1:15;
then ( 2 * x ) in ( Seg m ) by A60,FINSEQ_1:1;
then A61: ( es1 . x9 ) = ( W . ( 2 * x ) ) by A1,A58,CKB68:1;
A62: ( ( Sgm Z ) . x ) = ( ( ( Sgm X ) ^ ( Sgm Y ) ) . x ) by A19,A20,A31,FINSEQ_3:42;
( ( ( 2 * x ) + 1 ) - 1 ) <= maa1 by A59,XREAL_1:13;
then A63: x <= ( maa1 div 2 ) by A3,XREAL_1:68;
then x in X by A56;
then A64: x in ( dom es ) by A23,XBOOLE_0:def 3;
x in ( dom ( Sgm X ) ) by A44,A56,A63,FINSEQ_1:1;
then ( ( Sgm Z ) . x ) = ( ( Sgm X ) . x ) by A62,FINSEQ_1:def 7
.= ( ( 0 ) + x ) by A21,A56,A63,GRAPH_2:5;
then ( es2 . x ) = ( es . x ) by A3,A24,A23,A2,A29,A53,A46,A52,A55,FUNCT_1:12;
then A65: ( es2 . x ) = ( ( W .edgeSeq() ) . x ) by A64,FUNCT_1:47;
x <= ( len ( W .edgeSeq() ) ) by A23,A18,A64,FINSEQ_1:1;
hence ( es1 . x9 ) = ( es2 . x9 ) by A56,A61,A65,CKB22:def 1;
end;
suppose A66: ( ( 2 * x ) + 1 ) > m;

A67:now
assume x <= ( maa1 div 2 );
then ( 2 * x ) <= maa1 by A3,XREAL_1:64;
then ( ( 2 * x ) + 1 ) <= ( maa1 + 1 ) by XREAL_1:7;
hence contradiction by A66;
end;
then consider k being Nat such that A68: x = ( ( maa1 div 2 ) + k ) by NAT_1:10;
A69: ( ( Sgm Z ) . x ) = ( ( ( Sgm X ) ^ ( Sgm Y ) ) . x ) by A19,A20,A31,FINSEQ_3:42;
A70: (ex lenWaa19 being  even (Element of ( NAT )) st (lenWaa19 = lenWaa1 & ( len ( W .edgeSeq() ) ) = ( lenWaa19 div 2 ))) by CKB81:1;
( 2 * x ) <= ( 2 * ( len es1 ) ) by A57,XREAL_1:64;
then ( 2 * x ) <= ( ( 2 * ( len es1 ) ) + 1 ) by NAT_1:12;
then A71: ( 2 * x ) <= ( len W2 ) by CKB22:def 1;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
A72: ( 2 * ( n1div2aa1 + k ) ) = ( ( ( 2 * x ) - m ) + n ) by A3,A4,A68;
A73: m <= ( 2 * x ) by A66,NAT_1:13;
then A74: ( ( ( 2 * x ) - m ) + n ) <= ( len W ) by A1,A71,CKB69:1;
A75:now
reconsider z = ( ( ( 2 * x ) - m9 ) + n9 ) as (Element of ( NAT )) by A1,A73,A71,CKB69:1;
assume ( lenWaa1 div 2 ) < ( k + n1div2aa1 );
then lenWaa1 < ( 2 * ( ( x - ( maa1 div 2 ) ) + n1div2aa1 ) ) by A6,A68,XREAL_1:68;
then ( lenWaa1 + 1 ) < ( ( ( ( 2 * x ) - m ) + n ) + 1 ) by A3,A4,XREAL_1:8;
then ( len W ) <= z by NAT_1:13;
hence contradiction by A74,XXREAL_0:1;
end;
k <> ( 0 ) by A67,A68;
then ( ( 0 ) + 1 ) < ( k + 1 ) by XREAL_1:8;
then A76: 1 <= k by NAT_1:13;
then ( n1div2aa1 + 1 ) <= ( n1div2aa1 + k ) by XREAL_1:7;
then ( n1div2aa1 + k ) in Y by A75;
then ( n1div2aa1 + k ) in ( dom es ) by A23,XBOOLE_0:def 3;
then A77: ( es . ( n1div2aa1 + k ) ) = ( ( W .edgeSeq() ) . ( n1div2aa1 + k ) ) by FUNCT_1:47;
A78:now
set z = ( ( ( 2 * x ) - m9 ) + n9 );
reconsider z as (Element of ( NAT )) by A1,A73,A71,CKB69:1;
assume ( lenWn4 div 2 ) < ( x - ( maa1 div 2 ) );
then ( 2 * ( lenWn4 div 2 ) ) < ( 2 * ( x - ( maa1 div 2 ) ) ) by XREAL_1:68;
then A79: ( lenWn4 + n ) < ( ( ( ( 2 * x ) - m ) + 1 ) + n ) by A3,A24,XREAL_1:8;
( ( ( 2 * x ) - m9 ) + n9 ) < ( len W ) by A74,XXREAL_0:1;
then ( z + 1 ) <= ( len W ) by NAT_1:13;
hence contradiction by A79;
end;
then k in ( dom ( Sgm Y ) ) by A54,A68,A76,FINSEQ_1:1;
then ( ( Sgm Z ) . x ) = ( ( Sgm Y ) . k ) by A45,A69,A68,FINSEQ_1:def 7
.= ( n1div2aa1 + k ) by A24,A6,A4,A30,A68,A76,A78,GRAPH_2:5;
then A80: ( es2 . x ) = ( es . ( n1div2aa1 + k ) ) by A3,A24,A23,A2,A29,A53,A46,A52,A55,FUNCT_1:12;
1 <= ( n1div2aa1 + k ) by A76,NAT_1:12;
then ( es2 . x ) = ( W . ( 2 * ( n1div2aa1 + k ) ) ) by A80,A75,A77,A70,CKB22:def 1;
hence ( es1 . x9 ) = ( es2 . x9 ) by A1,A58,A73,A71,A72,CKB69:1;
end;
end;
hence ( es1 . x9 ) = ( es2 . x9 );
end;
then A81: ( W2 .edgeSeq() ) = ( Seq es ) by A3,A24,A2,A53,A46,A52,FUNCT_1:2;
W is_Walk_from ( W .first() ),( W .last() ) by CKB30:def 1;
then W2 is_Walk_from ( W .first() ),( W .last() ) by CKB64:1;
hence thesis by A81,CKB142:def 1;
end;
suppose (not ((((m is  odd & n is  odd) & m <= n) & n <= ( len W )) & ( W . m ) = ( W . n )));

then ( W .remove (m,n) ) = W by CKB19:def 1;
hence thesis by CKB143:1;
end;
end;
hence thesis;
end;
end;
