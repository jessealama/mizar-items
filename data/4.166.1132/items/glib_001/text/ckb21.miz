environ
vocabularies NUMBERS,ABIAN,SUBSET_1,ARYTM_3,XXREAL_0,ARYTM_1,CARD_1,TARSKI,FINSEQ_1,RELAT_1,FUNCT_1,NAT_1,XBOOLE_0,GLIB_000,FINSEQ_5,GRAPH_2,INT_1,FINSET_1,RCOMP_1,WAYBEL_0,ZFMISC_1,MSAFREE2,ORDINAL4,GRAPH_1,FUNCT_4,FUNCOP_1,MCART_1,GLIB_001;
notations TARSKI,XBOOLE_0,CARD_1,NUMBERS,SUBSET_1,XCMPLX_0,XXREAL_0,DOMAIN_1,RELAT_1,FUNCT_1,FINSEQ_1,GRAPH_2,FINSEQ_5,RELSET_1,MCART_1,FINSET_1,NAT_1,NAT_D,FUNCOP_1,FUNCT_4,GLIB_000,ABIAN,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
definitions FUNCOP_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
theorems CARD_1,CARD_2,FUNCOP_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSEQ_6,FINSET_1,FUNCT_1,FUNCT_4,GLIB_000,GRAPH_2,GRAPH_5,INT_1,JORDAN12,MCART_1,NAT_1,NAT_2,PEPIN,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,PRE_CIRC,XXREAL_0,ABIAN,ORDINAL1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
schemes FINSEQ_1,FUNCT_1,NAT_1,RECDEF_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,GLIB_000,ABIAN,GRAPH_2,GRAPH_3,CARD_1,SUBSET_1,CKB10;
constructors DOMAIN_1,FUNCT_4,NAT_D,RECDEF_1,FINSEQ_5,GLIB_000,ABIAN,GRAPH_2,XXREAL_2,RELSET_1,FINSEQ_2,RAT_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
definition
let G being _Graph;
let W being (Walk of G);
func W .vertexSeq() -> (VertexSeq of G) means 
:Def14: (( ( len W ) + 1 ) = ( 2 * ( len it ) ) & (for n being Nat holds ((1 <= n & n <= ( len it )) implies ( it . n ) = ( W . ( ( 2 * n ) - 1 ) ))));
existence
proof
deffunc F(Nat) = ( W . ( ( 2 * $1 ) - 1 ) );
reconsider lenW1 = ( ( len W ) + 1 ) as  even (Element of ( NAT ));
set lenIT = ( lenW1 div 2 );
consider IT being FinSequence such that A1: (( len IT ) = lenIT & (for k being Nat holds (k in ( dom IT ) implies ( IT . k ) = F(k)))) from FINSEQ_1:sch 2;
A2: 2 divides lenW1 by PEPIN:22;
then A3: ( 2 * lenIT ) = lenW1 by NAT_D:3;
now
let y being set;
assume y in ( rng IT );
then consider x being set such that A4: x in ( dom IT ) and A5: y = ( IT . x ) by FUNCT_1:def 3;
A6: x in ( Seg lenIT ) by A1,A4,FINSEQ_1:def 3;
reconsider x as (Element of ( NAT )) by A4;
set 2x = ( x * 2 );
reconsider 2x as  even (Element of ( NAT ));
set 2xaa1 = ( 2x - 1 );
1 <= x by A6,FINSEQ_1:1;
then ( 1 * 2 ) <= 2x by XREAL_1:64;
then reconsider 2xaa1 as  odd (Element of ( NAT )) by INT_1:5,XXREAL_0:2;
x <= lenIT by A6,FINSEQ_1:1;
then 2x <= ( lenIT * 2 ) by XREAL_1:64;
then 2xaa1 <= ( lenW1 - 1 ) by A3,XREAL_1:9;
then ( W . 2xaa1 ) = ( W .vertexAt 2xaa1 ) by CKB15:def 1;
then ( W . 2xaa1 ) in ( the_Vertices_of G );
hence y in ( the_Vertices_of G ) by A1,A4,A5;
end;
then ( rng IT ) c= ( the_Vertices_of G ) by TARSKI:def 3;
then reconsider IT as (FinSequence of ( the_Vertices_of G )) by FINSEQ_1:def 4;
now
let n being (Element of ( NAT ));
set v2 = ( IT . ( n + 1 ) );
assume that
A7: 1 <= n
and
A8: n < ( len IT );
set 2n = ( 2 * n );
reconsider 2n as  even (Element of ( NAT ));
A9: 1 <= ( n + 1 ) by A7,NAT_1:13;
set 2naa1 = ( 2n - 1 );
( 1 * 2 ) <= ( n * 2 ) by A7,XREAL_1:64;
then reconsider 2naa1 as  odd (Element of ( NAT )) by INT_1:5,XXREAL_0:2;
2n <= lenW1 by A3,A1,A8,XREAL_1:68;
then A10: ( 2n - 1 ) <= ( ( ( len W ) + 1 ) - 1 ) by XREAL_1:9;
2naa1 <> ( len W ) by A3,A1,A8;
then 2naa1 < ( len W ) by A10,XXREAL_0:1;
then A11: ( W . ( 2naa1 + 1 ) ) Joins ( W . 2naa1 ),( W . ( 2naa1 + 2 ) ),G by CKB9:def 1;
( n + 1 ) <= lenIT by A1,A8,NAT_1:13;
then ( n + 1 ) in ( dom IT ) by A1,A9,FINSEQ_3:25;
then A12: v2 = ( W . ( ( 2 * ( n + 1 ) ) - 1 ) ) by A1
.= ( W . ( 2n + 1 ) );
n in ( dom IT ) by A7,A8,FINSEQ_3:25;
then ( W . ( 2naa1 + 1 ) ) Joins ( IT . n ),( W . ( 2naa1 + 2 ) ),G by A1,A11;
hence (ex e being set st e Joins ( IT . n ),( IT . ( n + 1 ) ),G) by A12;
end;
then reconsider IT as (VertexSeq of G) by CKB7:def 1;
take IT;
thus ( ( len W ) + 1 ) = ( 2 * ( len IT ) ) by A2,A1,NAT_D:3;
let n being Nat;
assume that
A13: 1 <= n
and
A14: n <= ( len IT );
n in ( dom IT ) by A13,A14,FINSEQ_3:25;
hence thesis by A1;
end;
uniqueness
proof
let IT1 being (VertexSeq of G);
let IT2 being (VertexSeq of G);
assume that
A15: ( ( len W ) + 1 ) = ( 2 * ( len IT1 ) )
and
A16: (for n being Nat holds ((1 <= n & n <= ( len IT1 )) implies ( IT1 . n ) = ( W . ( ( 2 * n ) - 1 ) )))
and
A17: ( ( len W ) + 1 ) = ( 2 * ( len IT2 ) )
and
A18: (for n being Nat holds ((1 <= n & n <= ( len IT2 )) implies ( IT2 . n ) = ( W . ( ( 2 * n ) - 1 ) )));
A19:now
let n being Nat;
assume that
A20: n in ( dom IT1 );
A21: n <= ( len IT1 ) by A20,FINSEQ_3:25;
A22: 1 <= n by A20,FINSEQ_3:25;
then ( IT1 . n ) = ( W . ( ( 2 * n ) - 1 ) ) by A16,A21;
hence ( IT1 . n ) = ( IT2 . n ) by A15,A17,A18,A22,A21;
end;
( dom IT1 ) = ( Seg ( len IT2 ) ) by A15,A17,FINSEQ_1:def 3
.= ( dom IT2 ) by FINSEQ_1:def 3;
hence IT1 = IT2 by A19,FINSEQ_1:13;
end;
end;
