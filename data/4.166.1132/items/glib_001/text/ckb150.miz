environ
vocabularies NUMBERS,ABIAN,SUBSET_1,ARYTM_3,XXREAL_0,ARYTM_1,CARD_1,TARSKI,FINSEQ_1,RELAT_1,FUNCT_1,NAT_1,XBOOLE_0,GLIB_000,FINSEQ_5,GRAPH_2,INT_1,FINSET_1,RCOMP_1,WAYBEL_0,ZFMISC_1,MSAFREE2,ORDINAL4,GRAPH_1,FUNCT_4,FUNCOP_1,MCART_1,GLIB_001;
notations TARSKI,XBOOLE_0,CARD_1,NUMBERS,SUBSET_1,XCMPLX_0,XXREAL_0,DOMAIN_1,RELAT_1,FUNCT_1,FINSEQ_1,GRAPH_2,FINSEQ_5,RELSET_1,MCART_1,FINSET_1,NAT_1,NAT_D,FUNCOP_1,FUNCT_4,GLIB_000,ABIAN,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB117,CKB118,CKB119,CKB120,CKB121,CKB142,CKB146,CKB148,CKB149;
definitions FUNCOP_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB142;
theorems CARD_1,CARD_2,FUNCOP_1,ENUMSET1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_5,FINSEQ_6,FINSET_1,FUNCT_1,FUNCT_4,GLIB_000,GRAPH_2,GRAPH_5,INT_1,JORDAN12,MCART_1,NAT_1,NAT_2,PEPIN,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,PRE_CIRC,XXREAL_0,ABIAN,ORDINAL1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB142,CKB143,CKB144,CKB145;
schemes FINSEQ_1,FUNCT_1,NAT_1,RECDEF_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,GLIB_000,ABIAN,GRAPH_2,GRAPH_3,CARD_1,SUBSET_1,CKB10,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB122,CKB123,CKB124,CKB125,CKB126,CKB127,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136,CKB137,CKB138,CKB139,CKB140,CKB141,CKB147;
constructors DOMAIN_1,FUNCT_4,NAT_D,RECDEF_1,FINSEQ_5,GLIB_000,ABIAN,GRAPH_2,XXREAL_2,RELSET_1,FINSEQ_2,RAT_1,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB142,CKB146;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
registration
let G being _Graph;
let W being (DWalk of G);
cluster  directed for (Path of W);
existence
proof
defpred P[ (Element of ( NAT )) ]
 means
(for W1 being (DWalk of G) holds (( W1 .length() ) = $1 implies (ex W2 being (Path of W1) st W2 is  directed)));
A1: ( W .length() ) = ( W .length() );
now
let k being (Element of ( NAT ));
assume A2: P[ k ];
let W1 being (DWalk of G);
set WA = ( W1 .cut (1,( ( 2 * k ) + 1 )) );
set e = ( W1 . ( ( ( 2 * k ) + 1 ) + 1 ) );
set v = ( W1 . ( ( ( 2 * k ) + 1 ) + 2 ) );
assume A3: ( W1 .length() ) = ( k + 1 );
then A4: ( len W1 ) = ( ( 2 * ( k + 1 ) ) + 1 ) by CKB22:def 1
.= ( ( ( 2 * k ) + 1 ) + 2 );
then A5: ( ( ( ( 2 * k ) + 1 ) + 2 ) - 2 ) < ( ( len W1 ) - ( 0 ) ) by XREAL_1:15;
then A6: e DJoins ( W1 . ( ( 2 * k ) + 1 ) ),v,G by CKB90:1;
( len WA ) = ( ( 2 * k ) + 1 ) by A5,CKB61:1;
then A7: ( ( 2 * k ) + 1 ) = ( ( 2 * ( WA .length() ) ) + 1 ) by CKB22:def 1;
then consider WB being (Path of WA) such that A8: WB is  directed by A2;
A9: ( WA .edgeSeq() ) c= ( W1 .edgeSeq() ) by CKB82:1;
A10: WB is_Walk_from ( WA .first() ),( WA .last() ) by CKB142:def 1;
A11: 1 <= ( ( 2 * k ) + 1 ) by NAT_1:12;
then A12: ( WA .last() ) = ( W1 . ( ( 2 * k ) + 1 ) ) by A5,CKB55:1,JORDAN12:2;
A13: ( WA .first() ) = ( W1 . 1 ) by A5,A11,CKB55:1,JORDAN12:2;
then A14: ( WB .first() ) = ( W1 . 1 ) by A10,CKB30:def 1;
A15: ( WB .last() ) = ( W1 . ( ( 2 * k ) + 1 ) ) by A10,A12,CKB30:def 1;
then A16: e Joins ( WB .last() ),v,G by A6,GLIB_000:16;
now
per cases ;
suppose A17: WB is  closed;

set W2 = ( W1 .remove (1,( ( 2 * k ) + 1 )) );
( W1 .first() ) = ( W1 . ( ( 2 * k ) + 1 ) ) by A14,A15,A17,CKB31:def 1;
then W2 = ( W1 .cut (( ( 2 * k ) + 1 ),( ( ( 2 * k ) + 1 ) + 2 )) ) by A4,CKB71:1;
then ( ( len W2 ) + ( ( 2 * k ) + 1 ) ) = ( ( ( ( 2 * k ) + 1 ) + 2 ) + 1 ) by A4,A5,CKB54:1
.= ( ( ( 2 * k ) + 1 ) + ( 2 + 1 ) );
then reconsider W2 as (Path of W1) by CKB108:1;
take W2;
thus W2 is  directed;
end;
suppose A18: WB is  open;

consider esb being (Subset of ( WA .edgeSeq() )) such that A19: ( WB .edgeSeq() ) = ( Seq esb ) by CKB142:def 1;
A20: ( Seq esb ) is  one-to-one by A19,CKB34:def 1;
A21: ( Seq esb ) = ( esb * ( Sgm ( dom esb ) ) ) by FINSEQ_1:def 14;
A22:now
let x being set;
assume x in ( dom esb );
then [ x,( esb . x ) ] in esb by FUNCT_1:1;
then x in ( dom ( WA .edgeSeq() ) ) by FUNCT_1:1;
hence x in ( Seg k ) by A7,FINSEQ_1:def 3;
end;
then A23: ( dom esb ) c= ( Seg k ) by TARSKI:def 3;
then ( rng ( Sgm ( dom esb ) ) ) = ( dom esb ) by FINSEQ_1:def 13;
then A24: ( Sgm ( dom esb ) ) is  one-to-one by A21,A20,FUNCT_1:26;
now
per cases ;
suppose A25: v in ( WB .vertices() );

reconsider WB9 = WB as  directed (Path of G) by A8;
A26: ( dom ( Sgm ( dom esb ) ) ) = ( dom ( WB .edgeSeq() ) ) by A19,CKB6:1
.= ( Seg ( len ( WB .edgeSeq() ) ) ) by FINSEQ_1:def 3;
consider n being  odd (Element of ( NAT )) such that A27: n <= ( len WB ) and A28: ( WB . n ) = v by A25,CKB84:1;
set W2 = ( WB9 .cut (1,n) );
( len W2 ) = n by A27,CKB61:1;
then consider naa1 being  even (Element of ( NAT )) such that A29: naa1 = ( n - 1 ) and A30: ( len ( W2 .edgeSeq() ) ) = ( naa1 div 2 ) by CKB81:1;
( ( 2 * ( 0 ) ) + 1 ) <= n by ABIAN:12;
then A31: W2 is_Walk_from ( W1 .first() ),( W1 .last() ) by A4,A14,A27,A28,CKB55:1;
2 divides naa1 by PEPIN:22;
then A32: ( 2 * ( naa1 div 2 ) ) = naa1 by NAT_D:3;
now
assume ( naa1 div 2 ) > ( len ( WB .edgeSeq() ) );
then naa1 > ( 2 * ( len ( WB .edgeSeq() ) ) ) by A32,XREAL_1:68;
then ( naa1 + 1 ) > ( ( 2 * ( len ( WB .edgeSeq() ) ) ) + 1 ) by XREAL_1:8;
hence contradiction by A27,A29,CKB22:def 1;
end;
then ( Seg ( naa1 div 2 ) ) c= ( dom ( Sgm ( dom esb ) ) ) by A26,FINSEQ_1:5;
then A33: ( dom ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) ) = ( Seg ( naa1 div 2 ) ) by RELAT_1:62;
then reconsider ses = ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) as FinSequence by FINSEQ_1:def 2;
A34: ses is  one-to-one by A24,FUNCT_1:52;
set es = ( esb | ( rng ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) ) );
reconsider es as (Subset of ( WA .edgeSeq() )) by GRAPH_2:27;
(for x being set holds (x in es implies x in ( W1 .edgeSeq() ))) by A9,TARSKI:def 3;
then reconsider es as (Subset of ( W1 .edgeSeq() )) by TARSKI:def 3;
reconsider esbes1 = ( esb \ es ) as Function;
now
let z being set;
A35: ( rng ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) ) c= ( rng ( Sgm ( dom esb ) ) ) by RELAT_1:70;
assume z in ( rng ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) );
then z in ( rng ( Sgm ( dom esb ) ) ) by A35;
hence z in ( dom esb ) by A23,FINSEQ_1:def 13;
end;
then ( rng ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) ) c= ( dom esb ) by TARSKI:def 3;
then A36: ( dom es ) = ( rng ( ( Sgm ( dom esb ) ) | ( Seg ( naa1 div 2 ) ) ) ) by RELAT_1:62;
A37:now
let a being (Element of ( NAT )),b being (Element of ( NAT ));
assume that
A38: a in ( dom es )
and
A39: b in ( dom esbes1 );
consider xa being set such that A40: xa in ( dom ses ) and A41: ( ses . xa ) = a by A36,A38,FUNCT_1:def 3;
reconsider xa as (Element of ( NAT )) by A40;
A42: xa in ( Seg ( naa1 div 2 ) ) by A40,RELAT_1:57;
then A43: 1 <= xa by FINSEQ_1:1;
A44: [ b,( esbes1 . b ) ] in ( esb \ es ) by A39,FUNCT_1:1;
then A45: [ b,( esbes1 . b ) ] in esb by XBOOLE_0:def 5;
then b in ( dom esb ) by FUNCT_1:1;
then b in ( rng ( Sgm ( dom esb ) ) ) by A23,FINSEQ_1:def 13;
then consider xb being set such that A46: xb in ( dom ( Sgm ( dom esb ) ) ) and A47: ( ( Sgm ( dom esb ) ) . xb ) = b by FUNCT_1:def 3;
reconsider xb as (Element of ( NAT )) by A46;
A48: 1 <= xb by A26,A46,FINSEQ_1:1;
A49: xa <= ( naa1 div 2 ) by A42,FINSEQ_1:1;
A50:now
assume xb <= xa;
then xb <= ( naa1 div 2 ) by A49,XXREAL_0:2;
then A51: xb in ( Seg ( naa1 div 2 ) ) by A48,FINSEQ_1:1;
[ xb,b ] in ( Sgm ( dom esb ) ) by A46,A47,FUNCT_1:1;
then [ xb,b ] in ses by A51,RELAT_1:def 11;
then b in ( rng ses ) by RELAT_1:def 5;
then [ b,( esbes1 . b ) ] in es by A45,RELAT_1:def 11;
hence contradiction by A44,XBOOLE_0:def 5;
end;
xb <= ( len ( WB .edgeSeq() ) ) by A26,A46,FINSEQ_1:1;
then xb in ( dom ( Seq esb ) ) by A19,A48,FINSEQ_3:25;
then xb in ( dom ( Sgm ( dom esb ) ) ) by CKB6:1;
then A52: xb <= ( len ( Sgm ( dom esb ) ) ) by FINSEQ_3:25;
a = ( ( Sgm ( dom esb ) ) . xa ) by A40,A41,FUNCT_1:47;
hence a < b by A23,A47,A43,A52,A50,FINSEQ_1:def 13;
end;
( len ses ) = ( naa1 div 2 ) by A33,FINSEQ_1:def 3;
then ( card ( dom es ) ) = ( naa1 div 2 ) by A36,A34,FINSEQ_4:62;
then ( card es ) = ( naa1 div 2 ) by CARD_1:62;
then A53: ( len ( Seq es ) ) = ( len ( W2 .edgeSeq() ) ) by A30,CKB5:1;
A54: es c= esb by RELAT_1:59;
now
let z being set;
hereby
assume A55: z in esb;
now
per cases ;
suppose z in es;

hence z in ( es \/ ( esb \ es ) ) by XBOOLE_0:def 3;
end;
suppose (not z in es);

then z in ( esb \ es ) by A55,XBOOLE_0:def 5;
hence z in ( es \/ ( esb \ es ) ) by XBOOLE_0:def 3;
end;
end;
hence z in ( es \/ ( esb \ es ) );
end;
assume A56: z in ( es \/ ( esb \ es ) );
now
per cases  by A56,XBOOLE_0:def 3;
suppose z in es;

hence z in esb by A54;
end;
suppose z in ( esb \ es );

hence z in esb by XBOOLE_0:def 5;
end;
end;
hence z in esb;
end;
then esb = ( es \/ ( esb \ es ) ) by TARSKI:1;
then A57: ( dom esb ) = ( ( dom es ) \/ ( dom ( esb \ es ) ) ) by RELAT_1:1;
( esb \ es ) c= esb by XBOOLE_1:36;
then ( dom ( esb \ es ) ) c= ( dom esb ) by RELAT_1:11;
then A58: ( dom ( esb \ es ) ) c= ( Seg k ) by A23,XBOOLE_1:1;
( dom es ) c= ( dom esb ) by A54,RELAT_1:11;
then ( dom es ) c= ( Seg k ) by A23,XBOOLE_1:1;
then A59: ( Sgm ( dom esb ) ) = ( ( Sgm ( dom es ) ) ^ ( Sgm ( dom ( esb \ es ) ) ) ) by A57,A58,A37,FINSEQ_3:42;
A60: ( W2 .edgeSeq() ) c= ( WB .edgeSeq() ) by CKB82:1;
then A61: ( dom ( W2 .edgeSeq() ) ) c= ( dom ( Seq esb ) ) by A19,RELAT_1:11;
A62: ( Seq es ) = ( es * ( Sgm ( dom es ) ) ) by FINSEQ_1:def 14;
now
let x being Nat;
assume that
A63: 1 <= x
and
A64: x <= ( len ( W2 .edgeSeq() ) );
A65: x in ( dom ( W2 .edgeSeq() ) ) by A63,A64,FINSEQ_3:25;
then x in ( dom ( Sgm ( dom esb ) ) ) by A21,A61,FUNCT_1:11;
then A66: [ x,( ( Sgm ( dom esb ) ) . x ) ] in ( Sgm ( dom esb ) ) by FUNCT_1:1;
x in ( Seg ( naa1 div 2 ) ) by A30,A63,A64,FINSEQ_1:1;
then [ x,( ( Sgm ( dom esb ) ) . x ) ] in ses by A66,RELAT_1:def 11;
then A67: ( ( Sgm ( dom esb ) ) . x ) in ( rng ses ) by RELAT_1:def 5;
( ( Sgm ( dom esb ) ) . x ) in ( dom esb ) by A21,A61,A65,FUNCT_1:11;
then [ ( ( Sgm ( dom esb ) ) . x ),( esb . ( ( Sgm ( dom esb ) ) . x ) ) ] in esb by FUNCT_1:1;
then A68: [ ( ( Sgm ( dom esb ) ) . x ),( esb . ( ( Sgm ( dom esb ) ) . x ) ) ] in es by A67,RELAT_1:def 11;
[ x,( ( W2 .edgeSeq() ) . x ) ] in ( W2 .edgeSeq() ) by A65,FUNCT_1:1;
then A69: ( ( W2 .edgeSeq() ) . x ) = ( ( Seq esb ) . x ) by A19,A60,FUNCT_1:1
.= ( esb . ( ( Sgm ( dom esb ) ) . x ) ) by A21,A61,A65,FUNCT_1:12;
A70: x in ( dom ( Seq es ) ) by A53,A63,A64,FINSEQ_3:25;
then x in ( dom ( Sgm ( dom es ) ) ) by CKB6:1;
then ( ( Sgm ( dom esb ) ) . x ) = ( ( Sgm ( dom es ) ) . x ) by A59,FINSEQ_1:def 7;
then ( es . ( ( Sgm ( dom es ) ) . x ) ) = ( esb . ( ( Sgm ( dom esb ) ) . x ) ) by A68,FUNCT_1:1;
hence ( ( W2 .edgeSeq() ) . x ) = ( ( Seq es ) . x ) by A62,A69,A70,FUNCT_1:12;
end;
then ( W2 .edgeSeq() ) = ( Seq es ) by A53,FINSEQ_1:14;
then reconsider W2 as (Path of W1) by A31,CKB142:def 1;
take W2;
thus W2 is  directed;
end;
suppose A71: (not v in ( WB .vertices() ));

set es = ( esb +* ( ( k + 1 ) .--> e ) );
set W2 = ( WB .addEdge e );
A72:now
let m being (Element of ( NAT )),n being (Element of ( NAT ));
assume that
A73: m in ( dom esb )
and
A74: n in { ( k + 1 ) };
A75: n = ( k + 1 ) by A74,TARSKI:def 1;
m <= k by A23,A73,FINSEQ_1:1;
hence m < n by A75,NAT_1:13;
end;
A76: ( dom ( ( k + 1 ) .--> e ) ) = { ( k + 1 ) } by FUNCOP_1:13;
then A77: ( dom es ) = ( ( dom esb ) \/ { ( k + 1 ) } ) by FUNCT_4:def 1;
now
let x being set;
assume A78: x in ( dom es );
now
per cases  by A77,A78,XBOOLE_0:def 3;
suppose x in ( dom esb );

then A79: x in ( Seg k ) by A22;
then reconsider x9 = x as (Element of ( NAT ));
x9 <= k by A79,FINSEQ_1:1;
then A80: x9 <= ( k + 1 ) by NAT_1:12;
1 <= x9 by A79,FINSEQ_1:1;
hence x in ( Seg ( k + 1 ) ) by A80,FINSEQ_1:1;
end;
suppose A81: x in { ( k + 1 ) };

A82: 1 <= ( k + 1 ) by NAT_1:12;
x = ( k + 1 ) by A81,TARSKI:def 1;
hence x in ( Seg ( k + 1 ) ) by A82,FINSEQ_1:1;
end;
end;
hence x in ( Seg ( k + 1 ) );
end;
then A83: ( dom es ) c= ( Seg ( k + 1 ) ) by TARSKI:def 3;
then reconsider es as FinSubsequence by FINSEQ_1:def 12;
now
let z being set;
assume A84: z in es;
then consider x being set,y being set such that A85: z = [ x,y ] by RELAT_1:def 1;
A86: x in ( dom es ) by A84,A85,FUNCT_1:1;
A87: ( es . x ) = y by A84,A85,FUNCT_1:1;
now
per cases ;
suppose A88: x in ( dom ( ( k + 1 ) .--> e ) );

then reconsider x9 = x as (Element of ( NAT )) by A76;
A89: x = ( k + 1 ) by A76,A88,TARSKI:def 1;
then A90: 1 <= x9 by NAT_1:12;
then A91: x in ( dom ( W1 .edgeSeq() ) ) by A3,A89,FINSEQ_3:25;
y = ( ( ( k + 1 ) .--> e ) . x ) by A76,A77,A86,A87,A88,FUNCT_4:def 1;
then A92: y = e by A89,FUNCOP_1:72;
( ( W1 .edgeSeq() ) . x ) = ( W1 . ( 2 * ( k + 1 ) ) ) by A3,A89,A90,CKB22:def 1
.= ( W1 . ( ( ( 2 * k ) + 1 ) + 1 ) );
hence z in ( W1 .edgeSeq() ) by A85,A92,A91,FUNCT_1:1;
end;
suppose A93: (not x in ( dom ( ( k + 1 ) .--> e ) ));

then A94: x in ( dom esb ) by A76,A77,A86,XBOOLE_0:def 3;
y = ( esb . x ) by A76,A77,A86,A87,A93,FUNCT_4:def 1;
then [ x,y ] in esb by A94,FUNCT_1:1;
then [ x,y ] in ( WA .edgeSeq() );
hence z in ( W1 .edgeSeq() ) by A9,A85;
end;
end;
hence z in ( W1 .edgeSeq() );
end;
then reconsider es as (Subset of ( W1 .edgeSeq() )) by TARSKI:def 3;
{ ( k + 1 ) } c= ( Seg ( k + 1 ) ) by A77,A83,XBOOLE_1:11;
then A95: ( Sgm ( dom es ) ) = ( ( Sgm ( dom esb ) ) ^ ( Sgm { ( k + 1 ) } ) ) by A23,A77,A72,FINSEQ_3:42
.= ( ( Sgm ( dom esb ) ) ^ <* ( k + 1 ) *> ) by FINSEQ_3:44;
now
assume ( ( dom esb ) /\ ( dom ( ( k + 1 ) .--> e ) ) ) <> ( {} );
then consider x being set such that A96: x in ( ( dom esb ) /\ ( dom ( ( k + 1 ) .--> e ) ) ) by XBOOLE_0:def 1;
x in { ( k + 1 ) } by A76,A96,XBOOLE_0:def 4;
then A97: x = ( k + 1 ) by TARSKI:def 1;
x in ( dom esb ) by A96,XBOOLE_0:def 4;
then ( k + 1 ) <= ( k + ( 0 ) ) by A23,A97,FINSEQ_1:1;
hence contradiction by XREAL_1:6;
end;
then A98: ( dom esb ) misses ( dom ( ( k + 1 ) .--> e ) ) by XBOOLE_0:def 7;
A99: ( W2 .edgeSeq() ) = ( ( Seq esb ) ^ <* e *> ) by A16,A19,CKB83:1;
then A100: ( len ( W2 .edgeSeq() ) ) = ( ( len ( Seq esb ) ) + ( len <* e *> ) ) by FINSEQ_1:22
.= ( ( len ( Seq esb ) ) + 1 ) by FINSEQ_1:39
.= ( ( card esb ) + 1 ) by CKB5:1;
A101: ( len ( Seq es ) ) = ( card es ) by CKB5:1
.= ( ( card esb ) + ( card ( ( k + 1 ) .--> e ) ) ) by A98,PRE_CIRC:22
.= ( ( card esb ) + ( card { [ ( k + 1 ),e ] } ) ) by FUNCT_4:82
.= ( len ( W2 .edgeSeq() ) ) by A100,CARD_1:30;
now
A102: ( Seq es ) = ( es * ( Sgm ( dom es ) ) ) by FINSEQ_1:def 14;
let n being Nat;
assume that
A103: 1 <= n
and
A104: n <= ( len ( W2 .edgeSeq() ) );
n in ( dom ( Seq es ) ) by A101,A103,A104,FINSEQ_3:25;
then A105: ( ( Seq es ) . n ) = ( es . ( ( Sgm ( dom es ) ) . n ) ) by A102,FUNCT_1:12;
A106: ( Seq esb ) = ( esb * ( Sgm ( dom esb ) ) ) by FINSEQ_1:def 14;
A107: n in ( dom ( W2 .edgeSeq() ) ) by A103,A104,FINSEQ_3:25;
now
per cases  by A99,A107,FINSEQ_1:25;
suppose A108: n in ( dom ( Seq esb ) );

then n in ( dom ( Sgm ( dom esb ) ) ) by A106,FUNCT_1:11;
then A109: ( ( Sgm ( dom es ) ) . n ) = ( ( Sgm ( dom esb ) ) . n ) by A95,FINSEQ_1:def 7;
A110: ( ( Sgm ( dom esb ) ) . n ) in ( dom esb ) by A106,A108,FUNCT_1:11;
( ( W2 .edgeSeq() ) . n ) = ( ( Seq esb ) . n ) by A99,A108,FINSEQ_1:def 7
.= ( esb . ( ( Sgm ( dom esb ) ) . n ) ) by A106,A108,FUNCT_1:12;
hence ( ( W2 .edgeSeq() ) . n ) = ( ( Seq es ) . n ) by A98,A105,A110,A109,FUNCT_4:16;
end;
suppose (ex m being Nat st (m in ( dom <* e *> ) & n = ( ( len ( Seq esb ) ) + m )));

then consider m being Nat such that A111: m in ( dom <* e *> ) and A112: n = ( ( len ( Seq esb ) ) + m );
m in { 1 } by A111,FINSEQ_1:2,FINSEQ_1:def 8;
then A113: m = 1 by TARSKI:def 1;
A114: ( k + 1 ) in ( dom ( ( k + 1 ) .--> e ) ) by A76,TARSKI:def 1;
then A115: ( k + 1 ) in ( ( dom esb ) \/ ( dom ( ( k + 1 ) .--> e ) ) ) by XBOOLE_0:def 3;
( len ( Sgm ( dom esb ) ) ) = ( card ( dom esb ) ) by A23,FINSEQ_3:39
.= ( card esb ) by CARD_1:62
.= ( len ( Seq esb ) ) by CKB5:1;
then ( ( Seq es ) . n ) = ( es . ( k + 1 ) ) by A95,A105,A112,A113,FINSEQ_1:42;
then A116: ( ( Seq es ) . n ) = ( ( ( k + 1 ) .--> e ) . ( k + 1 ) ) by A114,A115,FUNCT_4:def 1
.= e by FUNCOP_1:72;
( ( W2 .edgeSeq() ) . n ) = ( <* e *> . 1 ) by A99,A111,A112,A113,FINSEQ_1:def 7
.= e by FINSEQ_1:def 8;
hence ( ( W2 .edgeSeq() ) . n ) = ( ( Seq es ) . n ) by A116;
end;
end;
hence ( ( W2 .edgeSeq() ) . n ) = ( ( Seq es ) . n );
end;
then A117: ( W2 .edgeSeq() ) = ( Seq es ) by A101,FINSEQ_1:14;
W2 is_Walk_from ( W1 .first() ),( W1 .last() ) by A4,A8,A6,A10,A13,A12,CKB91:1;
then reconsider W2 as (Path of W1) by A16,A18,A71,A117,CKB142:def 1,CKB107:1;
take W2;
thus W2 is  directed by A8,A6,A10,A12,CKB91:1;
end;
end;
hence (ex W2 being (Path of W1) st W2 is  directed);
end;
end;
hence (ex W2 being (Path of W1) st W2 is  directed);
end;
then A118: (for k being (Element of ( NAT )) holds (P[ k ] implies P[ ( k + 1 ) ]));
now
let W1 being (DWalk of G);
set W2 = the (Path of W1);
assume ( W1 .length() ) = ( 0 );
then ( len W1 ) = ( ( 2 * ( 0 ) ) + 1 ) by CKB22:def 1;
then A119: ( len W2 ) <= 1 by CKB145:1;
take W2;
1 <= ( len W2 ) by ABIAN:12;
then ( len W2 ) = 1 by A119,XXREAL_0:1;
then W2 is  trivial by CKB94:1;
then (ex v being (Vertex of G) st W2 = ( G .walkOf v )) by CKB95:1;
hence W2 is  directed;
end;
then A120: P[ ( 0 ) ];
(for k being (Element of ( NAT )) holds P[ k ]) from NAT_1:sch 1(A120,A118);
hence thesis by A1;
end;
end;
