environ
vocabularies FUNCT_1,SUBSET_1,NUMBERS,FUNCT_2,XBOOLE_0,CARD_3,FINSEQ_1,RELAT_1,FINSEQ_2,FUNCOP_1,TARSKI,ZFMISC_1,FUNCT_5,PARTFUN1,SETFAM_1,FINSEQ_4,MCART_1,FUNCT_6,ORDINAL1;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,MCART_1,SETFAM_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCT_3,WELLORD2,FUNCOP_1,FUNCT_4,FUNCT_5,ORDINAL1,CARD_3,CKB18,CKB24,CKB25,CKB26,CKB33,CKB35,CKB43;
definitions TARSKI,FUNCT_1,WELLORD2,XBOOLE_0,BINOP_1,FUNCOP_1,CKB18,CKB24,CKB25,CKB26,CKB33,CKB35,CKB43;
theorems TARSKI,ENUMSET1,ZFMISC_1,MCART_1,FUNCT_1,SETFAM_1,FUNCT_2,FUNCT_3,FUNCOP_1,CARD_1,CARD_3,FUNCT_4,FUNCT_5,PARTFUN1,WELLORD2,RELAT_1,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48;
schemes FUNCT_1,PARTFUN1,CARD_3,CLASSES1,XBOOLE_0;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCT_2,FUNCOP_1,ORDINAL1,RELSET_1;
constructors ENUMSET1,SETFAM_1,PARTFUN1,WELLORD2,BINOP_1,FUNCT_3,FUNCOP_1,FUNCT_4,FUNCT_5,CARD_3,RELSET_1,CKB18,CKB24,CKB25,CKB26,CKB33,CKB35,CKB43;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve x for set;
reserve y for set;
reserve z for set;
reserve a for set;
reserve f for Function;
reserve g for Function;
reserve h for Function;
theorem
Th59: ((not ( {} ) in ( rng f )) implies (( Frege f ) is  one-to-one iff (for g holds (g in ( rng f ) implies g is  one-to-one))))
proof
set h0 = the (Element of ( product ( doms f ) ));
A1: ( dom ( doms f ) ) = ( f " ( SubFuncs ( rng f ) ) ) by CKB24:def 1;
assume A2: (not ( {} ) in ( rng f ));
now
assume ( {} ) in ( rng ( doms f ) );
then consider x such that A3: x in ( dom ( doms f ) ) and A4: ( {} ) = ( ( doms f ) . x ) by FUNCT_1:def 3;
A5: x in ( f " ( SubFuncs ( rng f ) ) ) by A3,CKB24:def 1;
then ( f . x ) in ( SubFuncs ( rng f ) ) by FUNCT_1:def 7;
then reconsider g = ( f . x ) as Function by CKB18:def 1;
A6: x in ( dom f ) by A5,FUNCT_1:def 7;
then A7: g in ( rng f ) by FUNCT_1:def 3;
( {} ) = ( dom g ) by A4,A6,CKB27:1;
hence contradiction by A2,A7,RELAT_1:41;
end;
then ( product ( doms f ) ) <> ( {} ) by CARD_3:26;
then consider h such that h0 = h and ( dom h ) = ( dom ( doms f ) ) and A8: (for x holds (x in ( dom ( doms f ) ) implies ( h . x ) in ( ( doms f ) . x ))) by CARD_3:def 5;
A9: ( dom ( Frege f ) ) = ( product ( doms f ) ) by CKB43:def 1;
thus (( Frege f ) is  one-to-one implies (for g holds (g in ( rng f ) implies g is  one-to-one)))
proof
deffunc G(set) = ( h . $1 );
assume A10: (for x holds (for y holds (((x in ( dom ( Frege f ) ) & y in ( dom ( Frege f ) )) & ( ( Frege f ) . x ) = ( ( Frege f ) . y )) implies x = y)));
let g;
assume g in ( rng f );
then consider z such that A11: (z in ( dom f ) & g = ( f . z )) by FUNCT_1:def 3;
defpred P[ set ]
 means
$1 = z;
let x;
let y;
deffunc F(set) = x;
consider h1 being Function such that A12: (( dom h1 ) = ( f " ( SubFuncs ( rng f ) ) ) & (for a holds (a in ( f " ( SubFuncs ( rng f ) ) ) implies ((P[ a ] implies ( h1 . a ) = F(a)) & ((not P[ a ]) implies ( h1 . a ) = G(a)))))) from PARTFUN1:sch 1;
assume that
A13: x in ( dom g )
and
A14: y in ( dom g )
and
A15: ( g . x ) = ( g . y );
now
let a;
assume A16: a in ( dom ( doms f ) );
then A17: (a <> z implies ( h1 . a ) = ( h . a )) by A1,A12;
(a = z implies ( h1 . a ) = x) by A1,A12,A16;
hence ( h1 . a ) in ( ( doms f ) . a ) by A8,A11,A13,A16,A17,CKB27:1;
end;
then A18: h1 in ( product ( doms f ) ) by A1,A12,CARD_3:def 5;
then consider g1 being Function such that A19: ( ( Frege f ) . h1 ) = g1 and A20: ( dom g1 ) = ( f " ( SubFuncs ( rng f ) ) ) and A21: (for x holds (x in ( dom g1 ) implies ( g1 . x ) = ( ( uncurry f ) . (x,( h1 . x )) ))) by CKB43:def 1;
defpred P[ set ]
 means
$1 = z;
deffunc G(set) = ( h . $1 );
deffunc F(set) = y;
consider h2 being Function such that A22: (( dom h2 ) = ( f " ( SubFuncs ( rng f ) ) ) & (for a holds (a in ( f " ( SubFuncs ( rng f ) ) ) implies ((P[ a ] implies ( h2 . a ) = F(a)) & ((not P[ a ]) implies ( h2 . a ) = G(a)))))) from PARTFUN1:sch 1;
now
let a;
assume A23: a in ( dom ( doms f ) );
then A24: (a <> z implies ( h2 . a ) = ( h . a )) by A1,A22;
(a = z implies ( h2 . a ) = y) by A1,A22,A23;
hence ( h2 . a ) in ( ( doms f ) . a ) by A8,A11,A14,A23,A24,CKB27:1;
end;
then A25: h2 in ( product ( doms f ) ) by A1,A22,CARD_3:def 5;
then consider g2 being Function such that A26: ( ( Frege f ) . h2 ) = g2 and A27: ( dom g2 ) = ( f " ( SubFuncs ( rng f ) ) ) and A28: (for x holds (x in ( dom g2 ) implies ( g2 . x ) = ( ( uncurry f ) . (x,( h2 . x )) ))) by CKB43:def 1;
now
let a;
assume A29: a in ( f " ( SubFuncs ( rng f ) ) );
then A30: ( g2 . a ) = ( ( uncurry f ) . (a,( h2 . a )) ) by A27,A28;
A31: ( g1 . a ) = ( ( uncurry f ) . (a,( h1 . a )) ) by A20,A21,A29;
per cases ;
suppose A32: a <> z;

then ( h1 . a ) = ( h . a ) by A12,A29;
hence ( g1 . a ) = ( g2 . a ) by A22,A29,A30,A31,A32;
end;
suppose A33: a = z;

then ( h1 . a ) = x by A12,A29;
then A34: ( g1 . a ) = ( g . x ) by A11,A13,A31,A33,FUNCT_5:38;
( h2 . a ) = y by A22,A29,A33;
hence ( g1 . a ) = ( g2 . a ) by A11,A14,A15,A30,A33,A34,FUNCT_5:38;
end;
end;
then g1 = g2 by A20,A27,FUNCT_1:2;
then A35: h1 = h2 by A9,A10,A18,A19,A25,A26;
g in ( rng f ) by A11,FUNCT_1:def 3;
then g in ( SubFuncs ( rng f ) ) by CKB18:def 1;
then A36: z in ( f " ( SubFuncs ( rng f ) ) ) by A11,FUNCT_1:def 7;
then ( h1 . z ) = x by A12;
hence thesis by A36,A22,A35;
end;

assume A37: (for g holds (g in ( rng f ) implies g is  one-to-one));
let x;
let y;
assume that
A38: x in ( dom ( Frege f ) )
and
A39: y in ( dom ( Frege f ) )
and
A40: ( ( Frege f ) . x ) = ( ( Frege f ) . y );
consider g2 being Function such that A41: y = g2 and A42: ( dom g2 ) = ( dom ( doms f ) ) and A43: (for x holds (x in ( dom ( doms f ) ) implies ( g2 . x ) in ( ( doms f ) . x ))) by A9,A39,CARD_3:def 5;
consider g1 being Function such that A44: x = g1 and A45: ( dom g1 ) = ( dom ( doms f ) ) and A46: (for x holds (x in ( dom ( doms f ) ) implies ( g1 . x ) in ( ( doms f ) . x ))) by A9,A38,CARD_3:def 5;
consider h2 being Function such that A47: ( ( Frege f ) . g2 ) = h2 and A48: (( dom h2 ) = ( f " ( SubFuncs ( rng f ) ) ) & (for x holds (x in ( dom h2 ) implies ( h2 . x ) = ( ( uncurry f ) . (x,( g2 . x )) )))) by A9,A39,A41,CKB43:def 1;
consider h1 being Function such that A49: ( ( Frege f ) . g1 ) = h1 and A50: (( dom h1 ) = ( f " ( SubFuncs ( rng f ) ) ) & (for x holds (x in ( dom h1 ) implies ( h1 . x ) = ( ( uncurry f ) . (x,( g1 . x )) )))) by A9,A38,A44,CKB43:def 1;
now
let a;
assume A51: a in ( f " ( SubFuncs ( rng f ) ) );
then ( f . a ) in ( SubFuncs ( rng f ) ) by FUNCT_1:def 7;
then reconsider g = ( f . a ) as Function by CKB18:def 1;
A52: a in ( dom f ) by A51,FUNCT_1:def 7;
then A53: ( dom g ) = ( ( doms f ) . a ) by CKB27:1;
then A54: ( g2 . a ) in ( dom g ) by A1,A43,A51;
A55: ( g1 . a ) in ( dom g ) by A1,A46,A51,A53;
( h2 . a ) = ( ( uncurry f ) . (a,( g2 . a )) ) by A48,A51;
then A56: ( h2 . a ) = ( g . ( g2 . a ) ) by A52,A54,FUNCT_5:38;
g in ( rng f ) by A52,FUNCT_1:def 3;
then A57: g is  one-to-one by A37;
( h1 . a ) = ( ( uncurry f ) . (a,( g1 . a )) ) by A50,A51;
then ( h1 . a ) = ( g . ( g1 . a ) ) by A52,A55,FUNCT_5:38;
hence ( g1 . a ) = ( g2 . a ) by A40,A44,A41,A49,A47,A55,A54,A56,A57,FUNCT_1:def 4;
end;
hence thesis by A1,A44,A45,A41,A42,FUNCT_1:2;
end;
