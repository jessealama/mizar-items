environ
vocabularies FUNCT_1,SUBSET_1,NUMBERS,FUNCT_2,XBOOLE_0,CARD_3,FINSEQ_1,RELAT_1,FINSEQ_2,FUNCOP_1,TARSKI,ZFMISC_1,FUNCT_5,PARTFUN1,SETFAM_1,FINSEQ_4,MCART_1,FUNCT_6,ORDINAL1;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,MCART_1,SETFAM_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCT_3,WELLORD2,FUNCOP_1,FUNCT_4,FUNCT_5,ORDINAL1,CARD_3,CKB18,CKB24,CKB25,CKB26,CKB33,CKB35,CKB43;
definitions TARSKI,FUNCT_1,WELLORD2,XBOOLE_0,BINOP_1,FUNCOP_1,CKB18,CKB24,CKB25,CKB26,CKB33,CKB35,CKB43;
theorems TARSKI,ENUMSET1,ZFMISC_1,MCART_1,FUNCT_1,SETFAM_1,FUNCT_2,FUNCT_3,FUNCOP_1,CARD_1,CARD_3,FUNCT_4,FUNCT_5,PARTFUN1,WELLORD2,RELAT_1,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46;
schemes FUNCT_1,PARTFUN1,CARD_3,CLASSES1,XBOOLE_0;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCT_2,FUNCOP_1,ORDINAL1,RELSET_1;
constructors ENUMSET1,SETFAM_1,PARTFUN1,WELLORD2,BINOP_1,FUNCT_3,FUNCOP_1,FUNCT_4,FUNCT_5,CARD_3,RELSET_1,CKB18,CKB24,CKB25,CKB26,CKB33,CKB35,CKB43;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve x for set;
reserve y for set;
reserve z for set;
reserve X for set;
reserve f for Function;
reserve g for Function;
reserve h for Function;
reserve f1 for Function;
theorem
Lm3: ( product ( rngs f ) ) c= ( rng ( Frege f ) )
proof
let x;
deffunc F(set) = ( ( doms f ) . $1 );
assume x in ( product ( rngs f ) );
then consider g such that A1: x = g and A2: ( dom g ) = ( dom ( rngs f ) ) and A3: (for y holds (y in ( dom ( rngs f ) ) implies ( g . y ) in ( ( rngs f ) . y ))) by CARD_3:def 5;
defpred P[ set,set ]
 means
(ex f1 st (f1 = ( f . $1 ) & ( f1 . $2 ) = ( g . $1 )));
consider h such that A4: (( dom h ) = ( f " ( SubFuncs ( rng f ) ) ) & (for x holds (x in ( f " ( SubFuncs ( rng f ) ) ) implies (for y holds (y in ( h . x ) iff (y in F(x) & P[ x,y ])))))) from CARD_3:sch 2;
A5: ( product ( doms f ) ) = ( dom ( Frege f ) ) by CKB43:def 1;
A6: ( dom ( doms f ) ) = ( f " ( SubFuncs ( rng f ) ) ) by CKB24:def 1;
A7: ( dom ( rngs f ) ) = ( f " ( SubFuncs ( rng f ) ) ) by CKB25:def 1;
A8:now
let X;
assume X in ( rng h );
then consider x such that A9: x in ( dom h ) and A10: X = ( h . x ) by FUNCT_1:def 3;
( f . x ) in ( SubFuncs ( rng f ) ) by A4,A9,FUNCT_1:def 7;
then reconsider fx = ( f . x ) as Function by CKB18:def 1;
A11: x in ( dom f ) by A4,A9,FUNCT_1:def 7;
then A12: ( ( rngs f ) . x ) = ( rng fx ) by CKB27:1;
( g . x ) in ( ( rngs f ) . x ) by A3,A7,A4,A9;
then A13: (ex y st (y in ( dom fx ) & ( g . x ) = ( fx . y ))) by A12,FUNCT_1:def 3;
( ( doms f ) . x ) = ( dom fx ) by A11,CKB27:1;
hence X <> ( {} ) by A4,A9,A10,A13;
end;
A14:now
assume ( f " ( SubFuncs ( rng f ) ) ) <> ( {} );
then reconsider D = ( rng h ) as non empty set by A4,RELAT_1:42;
consider Ch being Function such that A15: ( dom Ch ) = D and A16: (for x holds (x in D implies ( Ch . x ) in x)) by A8,FUNCT_1:111;
A17: ( dom ( Ch * h ) ) = ( dom h ) by A15,RELAT_1:27;
now
let y;
assume A18: y in ( dom ( doms f ) );
then (( ( Ch * h ) . y ) = ( Ch . ( h . y ) ) & ( h . y ) in ( rng h )) by A6,A4,A17,FUNCT_1:12,FUNCT_1:def 3;
then ( ( Ch * h ) . y ) in ( h . y ) by A16;
hence ( ( Ch * h ) . y ) in ( ( doms f ) . y ) by A6,A4,A18;
end;
then A19: ( Ch * h ) in ( product ( doms f ) ) by A6,A4,A17,CARD_3:def 5;
then consider h1 being Function such that A20: ( ( Frege f ) . ( Ch * h ) ) = h1 and A21: ( dom h1 ) = ( f " ( SubFuncs ( rng f ) ) ) and A22: (for x holds (x in ( dom h1 ) implies ( h1 . x ) = ( ( uncurry f ) . (x,( ( Ch * h ) . x )) ))) by CKB43:def 1;
now
let z;
assume A23: z in ( f " ( SubFuncs ( rng f ) ) );
then A24: ( h1 . z ) = ( ( uncurry f ) . (z,( ( Ch * h ) . z )) ) by A21,A22;
(( ( Ch * h ) . z ) = ( Ch . ( h . z ) ) & ( h . z ) in ( rng h )) by A4,A17,A23,FUNCT_1:12,FUNCT_1:def 3;
then A25: ( ( Ch * h ) . z ) in ( h . z ) by A16;
then consider f1 such that A26: f1 = ( f . z ) and A27: ( f1 . ( ( Ch * h ) . z ) ) = ( g . z ) by A4,A23;
A28: ( ( Ch * h ) . z ) in ( ( doms f ) . z ) by A4,A23,A25;
A29: z in ( dom f ) by A23,FUNCT_1:def 7;
then ( ( doms f ) . z ) = ( dom f1 ) by A26,CKB27:1;
hence ( h1 . z ) = ( g . z ) by A29,A24,A26,A27,A28,FUNCT_5:38;
end;
then x = h1 by A1,A2,A7,A21,FUNCT_1:2;
hence thesis by A5,A19,A20,FUNCT_1:def 3;
end;
now
assume A30: ( f " ( SubFuncs ( rng f ) ) ) = ( {} );
then A31: g = ( {} ) by A2,CKB25:def 1;
( dom ( Frege f ) ) = { ( {} ) } by A6,A5,A30,CARD_3:10,RELAT_1:41;
then A32: ( {} ) in ( dom ( Frege f ) ) by TARSKI:def 1;
then consider h such that A33: ( ( Frege f ) . ( {} ) ) = h and A34: ( dom h ) = ( f " ( SubFuncs ( rng f ) ) ) and (for x holds (x in ( dom h ) implies ( h . x ) = ( ( uncurry f ) . (x,( ( {} ) . x )) ))) by A5,CKB43:def 1;
h = ( {} ) by A30,A34;
hence thesis by A1,A31,A32,A33,FUNCT_1:def 3;
end;
hence thesis by A14;
end;
