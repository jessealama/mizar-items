environ
vocabularies NUMBERS,XBOOLE_0,FINSEQ_1,FUNCT_1,GRAPH_2,ARYTM_3,NAT_1,XXREAL_0,SUBSET_1,TREES_1,TARSKI,CARD_1,ORDINAL1,FINSET_1,MEMBERED,RELAT_1,ORDINAL4,GLIB_000,GLIB_001,ABIAN,ZFMISC_1,ARYTM_1,GRAPH_1,RCOMP_1,SETFAM_1,HELLY;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,FINSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,SETFAM_1,FUNCT_1,FINSEQ_1,MEMBERED,NAT_1,TREES_1,XXREAL_2,ABIAN,GRAPH_2,GLIB_000,GLIB_001,GLIB_002,CKB2,CKB27,CKB28;
definitions TARSKI,XBOOLE_0,GLIB_001,CKB2;
theorems TARSKI,NAT_1,GRAPH_5,SETFAM_1,XBOOLE_0,XBOOLE_1,GRFUNC_1,FUNCT_1,ZFMISC_1,ORDINAL1,FINSEQ_1,FINSEQ_2,FINSEQ_3,INT_1,EULER_1,CARD_1,XREAL_1,XXREAL_0,CHORD,ABIAN,GLIB_000,GLIB_001,GLIB_002,MSSCYC_1,MEMBERED,GRAPH_2,XXREAL_2,FINSEQ_4,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26;
schemes NAT_1,FINSEQ_1;
registrations FINSET_1,XREAL_0,XXREAL_0,NAT_1,INT_1,RELAT_1,FINSEQ_1,ABIAN,MEMBERED,GLIB_000,GLIB_001,GLIB_002,XXREAL_2,CARD_1,FUNCT_1,XBOOLE_0,CKB14;
constructors DOMAIN_1,SETFAM_1,NAT_1,GRAPH_2,GLIB_001,GLIB_002,XXREAL_2,RELSET_1,RAT_1,CKB2;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
registration
let T being _Tree;
cluster  Trail-like ->  Path-like for (Walk of T);
correctness
proof
let W being (Walk of T);
assume that
A1: W is  Trail-like;
defpred P[ Nat ]
 means
(($1 is  odd & $1 <= ( len W )) & (ex k being  odd (Element of ( NAT )) st (k < $1 & ( W . k ) = ( W . $1 ))));
assume (not W is  Path-like);
then (ex m,n being  odd (Element of ( NAT )) st (((m < n & n <= ( len W )) & ( W . m ) = ( W . n )) & (m <> 1 or n <> ( len W )))) by A1,GLIB_001:def 28;
then A2: (ex p being Nat st P[ p ]);
consider p being Nat such that A3: P[ p ] and A4: (for r being Nat holds (P[ r ] implies p <= r)) from NAT_1:sch 5(A2);
reconsider P = p as (Element of ( NAT )) by ORDINAL1:def 12;
consider k being  odd (Element of ( NAT )) such that A5: k < p and p <= ( len W ) and A6: ( W . k ) = ( W . p ) by A3;
set Wc = ( W .cut (k,P) );
( ( len Wc ) + k ) = ( P + 1 ) by A3,A5,GLIB_001:36;
then ( len Wc ) <> 1 by A5;
then A7: Wc is non  trivial by GLIB_001:126;
A8: ( Wc .last() ) = ( W . p ) by A3,A5,GLIB_001:37;
A9: Wc is  Path-like
proof
assume (not thesis);
then consider m,n being  odd (Element of ( NAT )) such that A10: m < n and A11: n <= ( len Wc ) and A12: ( Wc . m ) = ( Wc . n ) and A13: (m <> 1 or n <> ( len Wc )) by A1,GLIB_001:def 28;
A14: m < ( len Wc ) by A10,A11,XXREAL_0:2;
consider kn1 being  odd Nat such that A15: ( Wc . n ) = ( W . kn1 ) and A16: kn1 = ( ( k + n ) - 1 ) and A17: kn1 <= ( len W ) by A3,A5,A11,CKB13:1;
reconsider kn1 as  odd (Element of ( NAT )) by ORDINAL1:def 12;
A18: 1 <= m by ABIAN:12;
m <= ( len Wc ) by A10,A11,XXREAL_0:2;
then consider km1 being  odd Nat such that A19: ( Wc . m ) = ( W . km1 ) and A20: km1 = ( ( k + m ) - 1 ) and A21: km1 <= ( len W ) by A3,A5,CKB13:1;
reconsider km1 as  odd (Element of ( NAT )) by ORDINAL1:def 12;
per cases  by A11,XXREAL_0:1;
suppose n < ( len Wc );

then ( k + n ) < ( k + ( len Wc ) ) by XREAL_1:6;
then ( k + n ) < ( p + 1 ) by A3,A5,GLIB_001:36;
then A22: kn1 < p by A16,XREAL_1:19;
( k + m ) < ( k + n ) by A10,XREAL_1:6;
then km1 < kn1 by A20,A16,XREAL_1:9;
hence contradiction by A4,A12,A19,A15,A17,A22;
end;
suppose A23: n = ( len Wc );

( k + m ) < ( ( len Wc ) + k ) by A14,XREAL_1:6;
then ( k + m ) < ( p + 1 ) by A3,A5,GLIB_001:36;
then A24: km1 < p by A20,XREAL_1:19;
1 < m by A13,A18,A23,XXREAL_0:1;
then ( k + 1 ) < ( k + m ) by XREAL_1:6;
then k < km1 by A20,XREAL_1:20;
hence contradiction by A4,A6,A8,A12,A19,A21,A23,A24;
end;
end;
( Wc .first() ) = ( W . k ) by A3,A5,GLIB_001:37;
then Wc is  closed by A6,A8,GLIB_001:def 24;
then Wc is  Cycle-like by A7,A9,GLIB_001:def 31;
hence contradiction by GLIB_002:def 2;
end;
end;
