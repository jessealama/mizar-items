environ
vocabularies NUMBERS,XBOOLE_0,FINSEQ_1,FINSEQ_6,SUBSET_1,RELAT_1,FINSEQ_4,XXREAL_0,FINSEQ_5,ARYTM_1,ARYTM_3,ORDINAL4,RFINSEQ,PARTFUN1,FUNCT_1,GOBOARD5,PRE_TOPC,EUCLID,CARD_1,PSCOMP_1,TOPREAL1,SPRECT_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_4,FINSEQ_5,RFINSEQ,FINSEQ_6,NAT_1,NAT_D,PRE_TOPC,EUCLID,TOPREAL1,GOBOARD5,PSCOMP_1,SPRECT_2;
definitions FUNCT_1;
theorems FINSEQ_6,FINSEQ_4,FINSEQ_5,FINSEQ_3,NAT_1,FINSEQ_1,TARSKI,GOBOARD7,RFINSEQ,REVROT_1,SPRECT_2,XBOOLE_0,XREAL_1,XXREAL_0,PARTFUN1,CARD_1,CKB1;
registrations XBOOLE_0,RELSET_1,XREAL_0,FINSEQ_6,STRUCT_0,SPRECT_2,REVROT_1,ORDINAL1,FUNCT_1,FINSEQ_1;
constructors XXREAL_0,FINSEQ_4,RFINSEQ,FINSEQ_5,GOBOARD5,PSCOMP_1,SPRECT_2,NAT_D,RELSET_1;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve D for non empty set;
reserve f for (FinSequence of D);
reserve p for (Element of D);
reserve q for (Element of D);
theorem
Th2: (((p in ( rng f ) & q in ( rng f )) & ( p .. f ) <= ( q .. f )) implies ( q .. ( f :- p ) ) = ( ( ( q .. f ) - ( p .. f ) ) + 1 ))
proof
assume that
A1: p in ( rng f )
and
A2: q in ( rng f )
and
A3: ( p .. f ) <= ( q .. f );
A4: f = ( ( f | ( p .. f ) ) ^ ( f /^ ( p .. f ) ) ) by RFINSEQ:8;
per cases  by A3,XXREAL_0:1;
suppose ( p .. f ) = ( q .. f );

then p = q by A1,A2,FINSEQ_5:9;
hence thesis by FINSEQ_6:79;
end;
suppose A5: ( p .. f ) < ( q .. f );

( p .. f ) <= ( len f ) by A1,FINSEQ_4:21;
then A6: ( len ( f | ( p .. f ) ) ) = ( p .. f ) by FINSEQ_1:59;
A7: (not q in ( rng ( f | ( p .. f ) ) )) by A5,CKB1:1;
q in ( ( rng ( f | ( p .. f ) ) ) \/ ( rng ( f /^ ( p .. f ) ) ) ) by A2,A4,FINSEQ_1:31;
then A8: q in ( rng ( f /^ ( p .. f ) ) ) by A7,XBOOLE_0:def 3;
then q in ( ( rng ( f /^ ( p .. f ) ) ) \ ( rng ( f | ( p .. f ) ) ) ) by A7,XBOOLE_0:def 5;
then A9: ( q .. f ) = ( ( p .. f ) + ( q .. ( f /^ ( p .. f ) ) ) ) by A4,A6,FINSEQ_6:7;
(not q in { p }) by A5,TARSKI:def 1;
then (not q in ( rng <* p *> )) by FINSEQ_1:38;
then A10: q in ( ( rng ( f /^ ( p .. f ) ) ) \ ( rng <* p *> ) ) by A8,XBOOLE_0:def 5;
( f :- p ) = ( <* p *> ^ ( f /^ ( p .. f ) ) ) by FINSEQ_5:def 2;
hence ( q .. ( f :- p ) ) = ( ( len <* p *> ) + ( q .. ( f /^ ( p .. f ) ) ) ) by A10,FINSEQ_6:7
.= ( ( ( q .. f ) - ( p .. f ) ) + 1 ) by A9,FINSEQ_1:39;
end;
end;
