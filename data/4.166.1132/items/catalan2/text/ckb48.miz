environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,ORDINAL1,FINSET_1,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,CARD_3,FINSOP_1,FUNCOP_1,BINOP_2,FUNCT_2,XREAL_0,SEQ_1,SERIES_1,VALUED_1,SQUARE_1,COMPLEX1,PARTFUN3,ZFMISC_1,CARD_FIN,REALSET1,CATALAN1,REAL_1,ORDINAL2,SEQ_2,NEWTON,PREPOWER,FUNCT_3,CATALAN2;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,XREAL_0,NUMBERS,RELAT_1,FUNCT_1,REAL_1,NAT_1,FINSET_1,ORDINAL1,XXREAL_0,NAT_D,AFINSQ_1,SEQ_1,VALUED_1,RELSET_1,DOMAIN_1,FUNCT_2,FUNCOP_1,BINOP_1,BINOP_2,RECDEF_1,SERIES_1,PARTFUN3,AFINSQ_2,ZFMISC_1,SQUARE_1,NEWTON,STIRL2_1,CARD_FIN,CATALAN1,SEQ_2,PREPOWER,COMPLEX1,QUIN_1,CKB2,CKB26,CKB43,CKB44;
definitions TARSKI,XBOOLE_0,FUNCT_1,QUIN_1,SQUARE_1,CKB2,CKB26,CKB43;
theorems CATALAN1,AFINSQ_1,TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,NAT_1,FUNCT_2,XCMPLX_1,CARD_2,INT_1,ORDINAL1,WELLORD2,CARD_1,BINOP_2,NEWTON,XREAL_1,FUNCOP_1,STIRL2_1,FUNCT_1,CARD_FIN,SERIES_1,SEQ_1,SEQ_2,COMPLEX1,SQUARE_1,ABSVALUE,RSSPACE2,POWER,PREPOWER,WSIERP_1,FIB_NUM,TIETZE,XREAL_0,SERIES_2,XXREAL_0,NAT_D,AFINSQ_2,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB46,CKB47;
schemes FUNCT_2,NAT_1,XBOOLE_0,STIRL2_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,FRAENKEL,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,AFINSQ_1,RELSET_1,VALUED_1,VALUED_0,MEMBERED,NEWTON,AFINSQ_2,CKB5,CKB8,CKB9,CKB29,CKB45;
constructors QUIN_1,PREPOWER,SERIES_1,PARTFUN3,BINOM,WELLORD2,DOMAIN_1,SETWISEO,REAL_1,NAT_D,YELLOW20,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,SEQ_1,AFINSQ_1,SQUARE_1,CATALAN1,STIRL2_1,CARD_FIN,AFINSQ_2,ABIAN,SEQ_2,CKB2,CKB26,CKB43,CKB44;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve m for Nat;
reserve n for Nat;
reserve N for (Element of ( NAT ));
reserve q for (XFinSequence of ( NAT ));
reserve pN for (Element of ( ( NAT ) ^omega ));
reserve qN for (Element of ( ( NAT ) ^omega ));
theorem
Th41: (for n holds (for m holds (( 2 * m ) <= n implies (ex CardF being (XFinSequence of ( NAT )) st ((( card { pN: (pN in ( Domin_0 (n,m) ) & { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } <> ( {} )) } ) = ( Sum CardF ) & ( dom CardF ) = m) & (for j holds (j < m implies ( CardF . j ) = ( ( card ( Domin_0 (( 2 * j ),j) ) ) * ( card ( Domin_0 (( n -' ( 2 * ( j + 1 ) ) ),( m -' ( j + 1 ) )) ) ) ))))))))
proof
let n;
let m;
assume that
A1: ( 2 * m ) <= n;
set Z = ( Domin_0 (n,m) );
defpred P[ set,set ]
 means
(for j holds (j = $1 implies $2 = { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( j + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) }));
set W = { pN: (pN in ( Domin_0 (n,m) ) & { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } <> ( {} )) };
A2: (for k holds (k in m implies (ex x being (Element of ( bool Z )) st P[ k,x ])))
proof
let k;
assume that
k in m;
set NN = { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( k + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) };
NN c= Z
proof
let x;
assume x in NN;
then (ex pN st ((x = pN & pN in Z) & ( 2 * ( k + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )));
hence thesis;
end;
then reconsider NN as (Element of ( bool Z ));
take NN;
thus thesis;
end;
consider C being (XFinSequence of ( bool Z )) such that A3: (( dom C ) = m & (for k holds (k in m implies P[ k,( C . k ) ]))) from STIRL2_1:sch 5(A2);
A4: W c= ( union ( rng C ) )
proof
let x;
assume x in W;
then consider pN such that A5: ((x = pN & pN in ( Domin_0 (n,m) )) & { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } <> ( {} ));
set I = { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) };
I c= ( NAT )
proof
let y;
assume y in I;
then (ex i being (Element of ( NAT )) st ((i = y & ( 2 * ( Sum ( pN | i ) ) ) = i) & i > ( 0 )));
hence thesis;
end;
then reconsider I as non  empty (Subset of ( NAT )) by A5;
( min* I ) in I by NAT_1:def 1;
then consider M being (Element of ( NAT )) such that A6: ( min* I ) = M and A7: ( 2 * ( Sum ( pN | M ) ) ) = M and A8: M > ( 0 );
( Sum ( pN | M ) ) > ( 0 ) by A7,A8;
then reconsider Sum1 = ( ( Sum ( pN | M ) ) - 1 ) as Nat by NAT_1:20;
consider q such that A9: pN = ( ( pN | M ) ^ q ) by CKB1:1;
( Sum pN ) = ( ( Sum ( pN | M ) ) + ( Sum q ) ) by A9,AFINSQ_2:55;
then m = ( ( Sum ( pN | M ) ) + ( Sum q ) ) by A5,CKB27:1;
then A10: m >= ( Sum ( pN | M ) ) by NAT_1:11;
( Sum1 + 1 ) > Sum1 by NAT_1:13;
then m > Sum1 by A10,XXREAL_0:2;
then A11: Sum1 in m by NAT_1:44;
then ( C . Sum1 ) = { qN: (qN in ( Domin_0 (n,m) ) & ( 2 * ( Sum1 + 1 ) ) = ( min* { N: (( 2 * ( Sum ( qN | N ) ) ) = N & N > ( 0 )) } )) } by A3;
then A12: pN in ( C . Sum1 ) by A5,A6,A7;
( C . Sum1 ) in ( rng C ) by A3,A11,FUNCT_1:3;
hence thesis by A5,A12,TARSKI:def 4;
end;
A13: (for i holds (for j holds (((i in ( dom C ) & j in ( dom C )) & i <> j) implies ( C . i ) misses ( C . j ))))
proof
let i;
let j;
assume that
A14: i in ( dom C )
and
A15: j in ( dom C )
and
A16: i <> j;
assume ( C . i ) meets ( C . j );
then ( ( C . i ) /\ ( C . j ) ) <> ( {} ) by XBOOLE_0:def 7;
then consider x such that A17: x in ( ( C . i ) /\ ( C . j ) ) by XBOOLE_0:def 1;
A18: x in ( C . j ) by A17,XBOOLE_0:def 4;
( C . j ) = { qN: (qN in ( Domin_0 (n,m) ) & ( 2 * ( j + 1 ) ) = ( min* { N: (( 2 * ( Sum ( qN | N ) ) ) = N & N > ( 0 )) } )) } by A3,A15;
then A19: (ex qN st ((x = qN & qN in ( Domin_0 (n,m) )) & ( 2 * ( j + 1 ) ) = ( min* { N: (( 2 * ( Sum ( qN | N ) ) ) = N & N > ( 0 )) } ))) by A18;
A20: x in ( C . i ) by A17,XBOOLE_0:def 4;
( C . i ) = { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( i + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) } by A3,A14;
then (ex pN st ((x = pN & pN in ( Domin_0 (n,m) )) & ( 2 * ( i + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } ))) by A20;
hence thesis by A16,A19;
end;
A21: (for k holds (k in ( dom C ) implies ( C . k ) is  finite))
proof
let k;
assume k in ( dom C );
then A22: ( C . k ) in ( rng C ) by FUNCT_1:3;
( rng C ) c= ( bool Z ) by RELAT_1:def 19;
hence thesis by A22;
end;
consider CardC being (XFinSequence of ( NAT )) such that A23: ( dom CardC ) = ( dom C ) and A24: (for i holds (i in ( dom CardC ) implies ( CardC . i ) = ( card ( C . i ) ))) and A25: ( card ( union ( rng C ) ) ) = ( Sum CardC ) by A21,A13,STIRL2_1:66;
take CardC;
( union ( rng C ) ) c= W
proof
let x;
assume x in ( union ( rng C ) );
then consider y such that A26: x in y and A27: y in ( rng C ) by TARSKI:def 4;
consider j being set such that A28: j in ( dom C ) and A29: ( C . j ) = y by A27,FUNCT_1:def 3;
reconsider j as (Element of ( NAT )) by A28;
y = { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( j + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) } by A3,A28,A29;
then consider pN such that A30: ((x = pN & pN in ( Domin_0 (n,m) )) & ( 2 * ( j + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) by A26;
( 2 * ( j + 1 ) ) <> ( 0 );
then { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } <> ( {} ) by A30,NAT_1:def 1;
hence thesis by A30;
end;
hence (( card W ) = ( Sum CardC ) & ( dom CardC ) = m) by A3,A23,A25,A4,XBOOLE_0:def 10;
let j;
assume that
A31: j < m;
A32: m >= ( j + 1 ) by A31,NAT_1:13;
then A33: ( m -' ( j + 1 ) ) = ( m - ( j + 1 ) ) by XREAL_1:233;
set P = { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( j + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) };
A34: j in ( dom C ) by A3,A31,NAT_1:44;
then A35: ( C . j ) = P by A3;
( 2 * ( j + 1 ) ) <= ( 2 * m ) by A32,XREAL_1:64;
then A36: ( n -' ( 2 * ( j + 1 ) ) ) = ( n - ( 2 * ( j + 1 ) ) ) by A1,XREAL_1:233,XXREAL_0:2;
( CardC . j ) = ( card ( C . j ) ) by A23,A24,A34;
hence thesis by A36,A33,A35,CKB47:1;
end;
