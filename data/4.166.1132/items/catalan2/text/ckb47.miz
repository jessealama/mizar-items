environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,ORDINAL1,FINSET_1,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,CARD_3,FINSOP_1,FUNCOP_1,BINOP_2,FUNCT_2,XREAL_0,SEQ_1,SERIES_1,VALUED_1,SQUARE_1,COMPLEX1,PARTFUN3,ZFMISC_1,CARD_FIN,REALSET1,CATALAN1,REAL_1,ORDINAL2,SEQ_2,NEWTON,PREPOWER,FUNCT_3,CATALAN2;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,XREAL_0,NUMBERS,RELAT_1,FUNCT_1,REAL_1,NAT_1,FINSET_1,ORDINAL1,XXREAL_0,NAT_D,AFINSQ_1,SEQ_1,VALUED_1,RELSET_1,DOMAIN_1,FUNCT_2,FUNCOP_1,BINOP_1,BINOP_2,RECDEF_1,SERIES_1,PARTFUN3,AFINSQ_2,ZFMISC_1,SQUARE_1,NEWTON,STIRL2_1,CARD_FIN,CATALAN1,SEQ_2,PREPOWER,COMPLEX1,QUIN_1,CKB2,CKB26,CKB43,CKB44;
definitions TARSKI,XBOOLE_0,FUNCT_1,QUIN_1,SQUARE_1,CKB2,CKB26,CKB43;
theorems CATALAN1,AFINSQ_1,TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,NAT_1,FUNCT_2,XCMPLX_1,CARD_2,INT_1,ORDINAL1,WELLORD2,CARD_1,BINOP_2,NEWTON,XREAL_1,FUNCOP_1,STIRL2_1,FUNCT_1,CARD_FIN,SERIES_1,SEQ_1,SEQ_2,COMPLEX1,SQUARE_1,ABSVALUE,RSSPACE2,POWER,PREPOWER,WSIERP_1,FIB_NUM,TIETZE,XREAL_0,SERIES_2,XXREAL_0,NAT_D,AFINSQ_2,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB46;
schemes FUNCT_2,NAT_1,XBOOLE_0,STIRL2_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,FRAENKEL,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,AFINSQ_1,RELSET_1,VALUED_1,VALUED_0,MEMBERED,NEWTON,AFINSQ_2,CKB5,CKB8,CKB9,CKB29,CKB45;
constructors QUIN_1,PREPOWER,SERIES_1,PARTFUN3,BINOM,WELLORD2,DOMAIN_1,SETWISEO,REAL_1,NAT_D,YELLOW20,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,SEQ_1,AFINSQ_1,SQUARE_1,CATALAN1,STIRL2_1,CARD_FIN,AFINSQ_2,ABIAN,SEQ_2,CKB2,CKB26,CKB43,CKB44;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve x1 for set;
reserve x2 for set;
reserve y for set;
reserve j for Nat;
reserve k for Nat;
reserve l for Nat;
reserve m for Nat;
reserve n for Nat;
reserve N for (Element of ( NAT ));
reserve p for (XFinSequence of ( NAT ));
reserve q for (XFinSequence of ( NAT ));
reserve pN for (Element of ( ( NAT ) ^omega ));
theorem
Th40: (for n holds (for m holds (for k holds (for j holds (for l holds ((j = ( n - ( 2 * ( k + 1 ) ) ) & l = ( m - ( k + 1 ) )) implies ( card { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( k + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) } ) = ( ( card ( Domin_0 (( 2 * k ),k) ) ) * ( card ( Domin_0 (j,l) ) ) )))))))
proof
set q1 = ( 1 --> 1 );
set q0 = ( 1 --> ( 0 ) );
let n;
let m;
let k;
let j;
let l;
assume that
A1: (j = ( n - ( 2 * ( k + 1 ) ) ) & l = ( m - ( k + 1 ) ));
defpred P[ set,set ]
 means
(ex r1,r2 being (XFinSequence of ( NAT )) st (($1 = ( ( ( q0 ^ r1 ) ^ q1 ) ^ r2 ) & ( len ( ( q0 ^ r1 ) ^ q1 ) ) = ( 2 * ( k + 1 ) )) & $2 = [ r1,r2 ]));
set Z2 = ( Domin_0 (j,l) );
set Z1 = ( Domin_0 (( 2 * k ),k) );
set F = { pN: (pN in ( Domin_0 (n,m) ) & ( 2 * ( k + 1 ) ) = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } )) };
set 2k1 = ( 2 * ( k + 1 ) );
A2: (for x holds (x in F implies (ex y st (y in [: Z1,Z2 :] & P[ x,y ]))))
proof
A3: (( dom q0 ) = 1 & ( Sum q0 ) = ( ( 0 ) * 1 )) by AFINSQ_2:58,FUNCOP_1:13;
let x;
assume x in F;
then consider pN such that A4: ((pN = x & pN in ( Domin_0 (n,m) )) & 2k1 = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } ));
2k1 > ( 2 * ( 0 ) ) by XREAL_1:68;
then reconsider M = { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } as non empty (Subset of ( NAT )) by A4,NAT_1:def 1;
consider r2 being (XFinSequence of ( NAT )) such that A5: pN = ( ( pN | 2k1 ) ^ r2 ) by CKB1:1;
(2k1 > ( 2 * ( 0 ) ) & pN is  dominated_by_0) by A4,CKB27:1,XREAL_1:68;
then consider r1 being (XFinSequence of ( NAT )) such that A6: ( pN | 2k1 ) = ( ( q0 ^ r1 ) ^ q1 ) and A7: r1 is  dominated_by_0 by A4,CKB20:1;
A8: ( Sum q1 ) = ( 1 * 1 ) by AFINSQ_2:58;
2k1 in M by A4,NAT_1:def 1;
then A9: (ex o being (Element of ( NAT )) st ((o = 2k1 & ( 2 * ( Sum ( pN | o ) ) ) = o) & o > ( 0 )));
then ( k + 1 ) = ( ( Sum ( q0 ^ r1 ) ) + ( Sum q1 ) ) by A6,AFINSQ_2:55;
then A10: k = ( ( Sum q0 ) + ( Sum r1 ) ) by A8,AFINSQ_2:55;
pN is  dominated_by_0 by A4,CKB27:1;
then A11: r2 is  dominated_by_0 by A5,A9,CKB18:1;
pN is  dominated_by_0 by A4,CKB27:1;
then A12: ( len ( pN | 2k1 ) ) = 2k1 by A9,CKB17:1;
( Sum pN ) = m by A4,CKB27:1;
then A13: m = ( ( k + 1 ) + ( Sum r2 ) ) by A5,A9,AFINSQ_2:55;
take [ r1,r2 ];
A14: ( dom q1 ) = 1 by FUNCOP_1:13;
( dom pN ) = n by A4,CKB27:1;
then n = ( 2k1 + ( len r2 ) ) by A5,A12,AFINSQ_1:def 3;
then A15: r2 in Z2 by A1,A13,A11,CKB27:1;
2k1 = ( ( len ( q0 ^ r1 ) ) + ( len q1 ) ) by A6,A12,AFINSQ_1:17;
then ( ( 2 * k ) + 1 ) = ( ( len q0 ) + ( len r1 ) ) by A14,AFINSQ_1:17;
then r1 in Z1 by A7,A10,A3,CKB27:1;
hence thesis by A4,A5,A6,A12,A15,ZFMISC_1:def 2;
end;
consider f being (Function of F,[: Z1,Z2 :]) such that A16: (for x holds (x in F implies P[ x,( f . x ) ])) from FUNCT_2:sch 1(A2);
A17: ([: Z1,Z2 :] = ( {} ) implies F = ( {} ))
proof
assume [: Z1,Z2 :] = ( {} );
then (Z1 = ( {} ) or Z2 = ( {} ));
then ( 2 * l ) > j by CKB30:1;
then ( ( 2 * m ) - ( 2 * ( k + 1 ) ) ) > ( n - ( 2 * ( k + 1 ) ) ) by A1;
then A18: ( 2 * m ) > n by XREAL_1:9;
assume F <> ( {} );
then consider x such that A19: x in F by XBOOLE_0:def 1;
(ex pN st ((pN = x & pN in ( Domin_0 (n,m) )) & 2k1 = ( min* { N: (( 2 * ( Sum ( pN | N ) ) ) = N & N > ( 0 )) } ))) by A19;
hence thesis by A18,CKB30:1;
end;
then A20: ( dom f ) = F by FUNCT_2:def 1;
A21: ( rng f ) = [: Z1,Z2 :]
proof
A22: (( Sum q0 ) = ( 1 * ( 0 ) ) & ( Sum q1 ) = ( 1 * 1 )) by AFINSQ_2:58;
thus ( rng f ) c= [: Z1,Z2 :];
A23: ( dom q0 ) = 1 by FUNCOP_1:13;
let x;
assume x in [: Z1,Z2 :];
then consider x1,x2 such that A24: x1 in Z1 and A25: x2 in Z2 and A26: x = [ x1,x2 ] by ZFMISC_1:def 2;
consider p such that A27: p = x1 and A28: p is  dominated_by_0 and A29: ( dom p ) = ( 2 * k ) and A30: ( Sum p ) = k by A24,CKB26:def 1;
consider q such that A31: q = x2 and A32: q is  dominated_by_0 and A33: ( dom q ) = j and A34: ( Sum q ) = l by A25,CKB26:def 1;
set 0p1 = ( ( q0 ^ p ) ^ q1 );
A35: ( dom ( 0p1 ^ q ) ) = ( ( len 0p1 ) + ( len q ) ) by AFINSQ_1:def 3;
(( dom 0p1 ) = ( ( len ( q0 ^ p ) ) + ( len q1 ) ) & ( dom q1 ) = 1) by AFINSQ_1:def 3,FUNCOP_1:13;
then A36: ( dom 0p1 ) = ( ( ( len q0 ) + ( len p ) ) + 1 ) by AFINSQ_1:17;
then ( ( 0p1 ^ q ) | ( ( 2 * 1 ) + ( len p ) ) ) = 0p1 by A23,AFINSQ_1:57;
then A37: ( min* { N: (( 2 * ( Sum ( ( 0p1 ^ q ) | N ) ) ) = N & N > ( 0 )) } ) = ( ( 2 * 1 ) + ( len p ) ) by A28,A29,A30,CKB22:1;
1 <= ( ( 1 + ( len p ) ) - ( 2 * ( Sum p ) ) ) by A29,A30;
then 0p1 is  dominated_by_0 by A28,CKB16:1;
then A38: ( 0p1 ^ q ) is  dominated_by_0 by A32,CKB13:1;
A39: ( 0p1 ^ q ) is (Element of ( ( NAT ) ^omega )) by AFINSQ_1:def 7;
0p1 = ( q0 ^ ( p ^ q1 ) ) by AFINSQ_1:27;
then ( Sum 0p1 ) = ( ( Sum q0 ) + ( Sum ( p ^ q1 ) ) ) by AFINSQ_2:55;
then ( Sum 0p1 ) = ( ( 0 ) + ( ( Sum p ) + 1 ) ) by A22,AFINSQ_2:55;
then ( Sum ( 0p1 ^ q ) ) = ( ( k + 1 ) + l ) by A30,A34,AFINSQ_2:55;
then ( 0p1 ^ q ) in ( Domin_0 (n,m) ) by A1,A29,A33,A38,A36,A23,A35,CKB27:1;
then A40: ( 0p1 ^ q ) in F by A29,A37,A39;
then consider r1 being (XFinSequence of ( NAT )),r2 being (XFinSequence of ( NAT )) such that A41: ( 0p1 ^ q ) = ( ( ( q0 ^ r1 ) ^ q1 ) ^ r2 ) and A42: ( len ( ( q0 ^ r1 ) ^ q1 ) ) = 2k1 and A43: ( f . ( 0p1 ^ q ) ) = [ r1,r2 ] by A16;
A44: ( ( 0p1 ^ q ) | 2k1 ) = 0p1 by A29,A36,A23,AFINSQ_1:57;
then ( q0 ^ p ) = ( q0 ^ r1 ) by A41,A42,AFINSQ_1:28,AFINSQ_1:57;
then A45: p = r1 by AFINSQ_1:28;
( ( ( ( q0 ^ r1 ) ^ q1 ) ^ r2 ) | 2k1 ) = ( ( q0 ^ r1 ) ^ q1 ) by A42,AFINSQ_1:57;
then q = r2 by A41,A44,AFINSQ_1:28;
hence thesis by A20,A26,A27,A31,A40,A43,A45,FUNCT_1:3;
end;
(for x holds (for y holds (((x in F & y in F) & ( f . x ) = ( f . y )) implies x = y)))
proof
let x;
let y;
assume that
A46: x in F
and
A47: y in F
and
A48: ( f . x ) = ( f . y );
consider y1 being (XFinSequence of ( NAT )),y2 being (XFinSequence of ( NAT )) such that A49: y = ( ( ( q0 ^ y1 ) ^ q1 ) ^ y2 ) and ( len ( ( q0 ^ y1 ) ^ q1 ) ) = 2k1 and A50: ( f . y ) = [ y1,y2 ] by A16,A47;
consider x1 being (XFinSequence of ( NAT )),x2 being (XFinSequence of ( NAT )) such that A51: x = ( ( ( q0 ^ x1 ) ^ q1 ) ^ x2 ) and ( len ( ( q0 ^ x1 ) ^ q1 ) ) = 2k1 and A52: ( f . x ) = [ x1,x2 ] by A16,A46;
x1 = y1 by A48,A52,A50,ZFMISC_1:27;
hence thesis by A48,A51,A52,A49,A50,ZFMISC_1:27;
end;
then f is  one-to-one by A17,FUNCT_2:19;
then F,[: Z1,Z2 :] are_equipotent  by A20,A21,WELLORD2:def 4;
then ( card F ) = ( card [: Z1,Z2 :] ) by CARD_1:5;
hence thesis by CARD_2:46;
end;
