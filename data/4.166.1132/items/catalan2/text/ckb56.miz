environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,ORDINAL1,FINSET_1,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,CARD_3,FINSOP_1,FUNCOP_1,BINOP_2,FUNCT_2,XREAL_0,SEQ_1,SERIES_1,VALUED_1,SQUARE_1,COMPLEX1,PARTFUN3,ZFMISC_1,CARD_FIN,REALSET1,CATALAN1,REAL_1,ORDINAL2,SEQ_2,NEWTON,PREPOWER,FUNCT_3,CATALAN2;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,XREAL_0,NUMBERS,RELAT_1,FUNCT_1,REAL_1,NAT_1,FINSET_1,ORDINAL1,XXREAL_0,NAT_D,AFINSQ_1,SEQ_1,VALUED_1,RELSET_1,DOMAIN_1,FUNCT_2,FUNCOP_1,BINOP_1,BINOP_2,RECDEF_1,SERIES_1,PARTFUN3,AFINSQ_2,ZFMISC_1,SQUARE_1,NEWTON,STIRL2_1,CARD_FIN,CATALAN1,SEQ_2,PREPOWER,COMPLEX1,QUIN_1,CKB2,CKB26,CKB43,CKB44;
definitions TARSKI,XBOOLE_0,FUNCT_1,QUIN_1,SQUARE_1,CKB2,CKB26,CKB43;
theorems CATALAN1,AFINSQ_1,TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,NAT_1,FUNCT_2,XCMPLX_1,CARD_2,INT_1,ORDINAL1,WELLORD2,CARD_1,BINOP_2,NEWTON,XREAL_1,FUNCOP_1,STIRL2_1,FUNCT_1,CARD_FIN,SERIES_1,SEQ_1,SEQ_2,COMPLEX1,SQUARE_1,ABSVALUE,RSSPACE2,POWER,PREPOWER,WSIERP_1,FIB_NUM,TIETZE,XREAL_0,SERIES_2,XXREAL_0,NAT_D,AFINSQ_2,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55;
schemes FUNCT_2,NAT_1,XBOOLE_0,STIRL2_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,FRAENKEL,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,AFINSQ_1,RELSET_1,VALUED_1,VALUED_0,MEMBERED,NEWTON,AFINSQ_2,CKB5,CKB8,CKB9,CKB29,CKB45;
constructors QUIN_1,PREPOWER,SERIES_1,PARTFUN3,BINOM,WELLORD2,DOMAIN_1,SETWISEO,REAL_1,NAT_D,YELLOW20,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,SEQ_1,AFINSQ_1,SQUARE_1,CATALAN1,STIRL2_1,CARD_FIN,AFINSQ_2,ABIAN,SEQ_2,CKB2,CKB26,CKB43,CKB44;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve i for Nat;
reserve k for Nat;
reserve n for Nat;
reserve seq1 for Real_Sequence;
reserve seq2 for Real_Sequence;
reserve seq3 for Real_Sequence;
reserve seq4 for Real_Sequence;
reserve Fr for (XFinSequence of ( REAL ));
reserve Fr1 for (XFinSequence of ( REAL ));
reserve Fr2 for (XFinSequence of ( REAL ));
definition
let seq1 being Real_Sequence;
let seq2 being Real_Sequence;
func seq1 (##) seq2 -> Real_Sequence means 
:Def5: (for k being Nat holds (ex Fr being (XFinSequence of ( REAL )) st ((( dom Fr ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) )))) & ( Sum Fr ) = ( it . k ))));
existence
proof
defpred P[ set,set ]
 means
(for k being Nat holds (k = $1 implies (ex Fr st ((( dom Fr ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) )))) & ( Sum Fr ) = $2))));
A1: (for x holds (x in ( NAT ) implies (ex y st (y in ( REAL ) & P[ x,y ]))))
proof
let x;
assume x in ( NAT );
then reconsider k = x as (Element of ( NAT ));
defpred Q[ set,set ]
 means
(for i holds (i = $1 implies $2 = ( ( seq1 . i ) * ( seq2 . ( k -' i ) ) )));
A2: (for i holds (i in ( k + 1 ) implies (ex z being (Element of ( REAL )) st Q[ i,z ])))
proof
let i;
assume that
i in ( k + 1 );
take ( ( seq1 . i ) * ( seq2 . ( k -' i ) ) );
thus thesis;
end;
consider Fr such that A3: ( dom Fr ) = ( k + 1 ) and A4: (for i holds (i in ( k + 1 ) implies Q[ i,( Fr . i ) ])) from STIRL2_1:sch 5(A2);
take ( Sum Fr );
(for n being Nat holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) ))) by A4;
hence thesis by A3,XREAL_0:def 1;
end;
consider seq3 such that A5: (for x holds (x in ( NAT ) implies P[ x,( seq3 . x ) ])) from FUNCT_2:sch 1(A1);
(for k being Nat holds (ex Fr st ((( dom Fr ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) )))) & ( Sum Fr ) = ( seq3 . k ))))
proof
let k being Nat;
k in ( NAT ) by ORDINAL1:def 12;
hence thesis by A5;
end;
hence thesis;
end;
uniqueness
proof
let seq3;
let seq4;
assume that
A6: (for k being Nat holds (ex Fr being (XFinSequence of ( REAL )) st ((( dom Fr ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) )))) & ( Sum Fr ) = ( seq3 . k ))))
and
A7: (for k being Nat holds (ex Fr being (XFinSequence of ( REAL )) st ((( dom Fr ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) )))) & ( Sum Fr ) = ( seq4 . k ))));
now
let x;
assume x in ( NAT );
then reconsider k = x as (Element of ( NAT ));
consider Fr1 being (XFinSequence of ( REAL )) such that A8: ( dom Fr1 ) = ( k + 1 ) and A9: (for n holds (n in ( k + 1 ) implies ( Fr1 . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) ))) and A10: ( Sum Fr1 ) = ( seq3 . k ) by A6;
consider Fr2 being (XFinSequence of ( REAL )) such that A11: ( dom Fr2 ) = ( k + 1 ) and A12: (for n holds (n in ( k + 1 ) implies ( Fr2 . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) ))) and A13: ( Sum Fr2 ) = ( seq4 . k ) by A7;
now
let n being Nat;
assume that
A14: n in ( dom Fr1 );
( Fr1 . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) ) by A8,A9,A14;
hence ( Fr1 . n ) = ( Fr2 . n ) by A8,A12,A14;
end;
hence ( seq3 . x ) = ( seq4 . x ) by A8,A10,A11,A13,AFINSQ_1:8;
end;
hence seq3 = seq4 by FUNCT_2:12;
end;
commutativity
proof
let seq3;
let seq1;
let seq2;
assume A15: (for k being Nat holds (ex Fr being (XFinSequence of ( REAL )) st ((( dom Fr ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) )))) & ( Sum Fr ) = ( seq3 . k ))));
let k being Nat;
consider Fr1 being (XFinSequence of ( REAL )) such that A16: ( dom Fr1 ) = ( k + 1 ) and A17: (for n holds (n in ( k + 1 ) implies ( Fr1 . n ) = ( ( seq1 . n ) * ( seq2 . ( k -' n ) ) ))) and A18: ( Sum Fr1 ) = ( seq3 . k ) by A15;
defpred Q[ set,set ]
 means
(for i holds (i = $1 implies $2 = ( ( seq2 . i ) * ( seq1 . ( k -' i ) ) )));
reconsider k9 = k as (Element of ( NAT )) by ORDINAL1:def 12;
A19: (for i holds (i in ( k9 + 1 ) implies (ex z being (Element of ( REAL )) st Q[ i,z ])))
proof
let i;
assume that
i in ( k9 + 1 );
take ( ( seq2 . i ) * ( seq1 . ( k -' i ) ) );
thus thesis;
end;
consider Fr2 such that A20: ( dom Fr2 ) = ( k9 + 1 ) and A21: (for i holds (i in ( k9 + 1 ) implies Q[ i,( Fr2 . i ) ])) from STIRL2_1:sch 5(A19);
take Fr2;
thus (( dom Fr2 ) = ( k + 1 ) & (for n holds (n in ( k + 1 ) implies ( Fr2 . n ) = ( ( seq2 . n ) * ( seq1 . ( k -' n ) ) )))) by A20,A21;
now
let n;
assume that
A22: n in ( len Fr1 );
A23: n < ( k + 1 ) by A16,A22,NAT_1:44;
then n <= k by NAT_1:13;
then A24: ( k -' n ) = ( k - n ) by XREAL_1:233;
( k -' n ) <= ( ( k -' n ) + n ) by NAT_1:11;
then A25: ( k -' ( k -' n ) ) = ( k - ( k -' n ) ) by A24,XREAL_1:233;
( n + 1 ) <= ( len Fr2 ) by A20,A23,NAT_1:13;
then A26: ( ( len Fr2 ) -' ( n + 1 ) ) = ( ( k + 1 ) - ( n + 1 ) ) by A20,XREAL_1:233;
(( k - n ) <= k & k < ( k + 1 )) by NAT_1:13,XREAL_1:43;
then ( k - n ) < ( k + 1 ) by XXREAL_0:2;
then ( ( len Fr2 ) -' ( n + 1 ) ) in ( k + 1 ) by A26,NAT_1:44;
then ( Fr2 . ( ( len Fr2 ) -' ( n + 1 ) ) ) = ( ( seq2 . ( k -' n ) ) * ( seq1 . n ) ) by A21,A26,A24,A25;
hence ( Fr1 . n ) = ( Fr2 . ( ( len Fr1 ) -' ( 1 + n ) ) ) by A16,A17,A20,A22;
end;
hence thesis by A16,A18,A20,CKB55:1;
end;
end;
