environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,ORDINAL1,FINSET_1,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,CARD_3,FINSOP_1,FUNCOP_1,BINOP_2,FUNCT_2,XREAL_0,SEQ_1,SERIES_1,VALUED_1,SQUARE_1,COMPLEX1,PARTFUN3,ZFMISC_1,CARD_FIN,REALSET1,CATALAN1,REAL_1,ORDINAL2,SEQ_2,NEWTON,PREPOWER,FUNCT_3,CATALAN2;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,XREAL_0,NUMBERS,RELAT_1,FUNCT_1,REAL_1,NAT_1,FINSET_1,ORDINAL1,XXREAL_0,NAT_D,AFINSQ_1,SEQ_1,VALUED_1,RELSET_1,DOMAIN_1,FUNCT_2,FUNCOP_1,BINOP_1,BINOP_2,RECDEF_1,SERIES_1,PARTFUN3,AFINSQ_2,ZFMISC_1,SQUARE_1,NEWTON,STIRL2_1,CARD_FIN,CATALAN1,SEQ_2,PREPOWER,COMPLEX1,QUIN_1,CKB2,CKB26,CKB43,CKB44;
definitions TARSKI,XBOOLE_0,FUNCT_1,QUIN_1,SQUARE_1,CKB2,CKB26,CKB43;
theorems CATALAN1,AFINSQ_1,TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,NAT_1,FUNCT_2,XCMPLX_1,CARD_2,INT_1,ORDINAL1,WELLORD2,CARD_1,BINOP_2,NEWTON,XREAL_1,FUNCOP_1,STIRL2_1,FUNCT_1,CARD_FIN,SERIES_1,SEQ_1,SEQ_2,COMPLEX1,SQUARE_1,ABSVALUE,RSSPACE2,POWER,PREPOWER,WSIERP_1,FIB_NUM,TIETZE,XREAL_0,SERIES_2,XXREAL_0,NAT_D,AFINSQ_2,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52;
schemes FUNCT_2,NAT_1,XBOOLE_0,STIRL2_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,FRAENKEL,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,AFINSQ_1,RELSET_1,VALUED_1,VALUED_0,MEMBERED,NEWTON,AFINSQ_2,CKB5,CKB8,CKB9,CKB29,CKB45;
constructors QUIN_1,PREPOWER,SERIES_1,PARTFUN3,BINOM,WELLORD2,DOMAIN_1,SETWISEO,REAL_1,NAT_D,YELLOW20,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,SEQ_1,AFINSQ_1,SQUARE_1,CATALAN1,STIRL2_1,CARD_FIN,AFINSQ_2,ABIAN,SEQ_2,CKB2,CKB26,CKB43,CKB44;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve n for Nat;
reserve p for (XFinSequence of ( NAT ));
reserve q for (XFinSequence of ( NAT ));
theorem
(for n holds (for k holds (ex p st ((( Sum p ) = ( card ( Domin_0 (( ( ( 2 * n ) + 2 ) + k ),( n + 1 )) ) ) & ( dom p ) = ( k + 1 )) & (for i holds (i <= k implies ( p . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) )))))))
proof
let n;
let k;
defpred P[ set,set ]
 means
(for j holds ($1 = j implies $2 = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + j ),n) ) )));
A1: (for i holds (i in ( k + 1 ) implies (ex x being (Element of ( NAT )) st P[ i,x ])))
proof
let i;
assume that
i in ( k + 1 );
P[ i,( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) ) ];
hence thesis;
end;
consider p such that A2: ( dom p ) = ( k + 1 ) and A3: (for i being Nat holds (i in ( k + 1 ) implies P[ i,( p . i ) ])) from STIRL2_1:sch 5(A1);
take p;
A4: (for i holds (i <= k implies ( p . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) )))
proof
let i;
assume i <= k;
then i < ( k + 1 ) by NAT_1:13;
then i in ( k + 1 ) by NAT_1:44;
hence thesis by A3;
end;
now
per cases ;
suppose A5: n = ( 0 );

(for x holds (x in ( dom p ) implies ( p . x ) = 1))
proof
let x;
assume that
A6: x in ( dom p );
reconsider i = x as (Element of ( NAT )) by A6;
( p . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) ) by A2,A3,A6;
hence thesis by A5,CKB32:1;
end;
then p = ( ( k + 1 ) --> 1 ) by A2,FUNCOP_1:11;
then ( Sum p ) = ( ( k + 1 ) * 1 ) by AFINSQ_2:58;
hence ( Sum p ) = ( card ( Domin_0 (( ( ( 2 * n ) + 2 ) + k ),( n + 1 )) ) ) by A5,CKB38:1;
end;
suppose n > ( 0 );

then reconsider n1 = ( n - 1 ) as (Element of ( NAT )) by NAT_1:20;
defpred Q[ Nat ]
 means
(for q holds ((( dom q ) = ( $1 + 1 ) & (for i holds (i <= $1 implies ( q . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) )))) implies ( Sum q ) = ( card ( Domin_0 (( ( ( 2 * n ) + 2 ) + $1 ),( n + 1 )) ) )));
A7: (for j holds (Q[ j ] implies Q[ ( j + 1 ) ]))
proof
let j;
assume that
A8: Q[ j ];
set CH2 = ( ( ( ( 2 * n ) + 2 ) + j ) choose ( n1 + 1 ) );
set CH1 = ( ( ( ( 2 * n ) + 2 ) + j ) choose ( n + 1 ) );
set j1 = ( j + 1 );
let q;
assume that
A9: ( dom q ) = ( j1 + 1 )
and
A10: (for i holds (i <= j1 implies ( q . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) )));
A11: ( 2 * ( n + 1 ) ) <= ( ( 2 * ( n + 1 ) ) + j1 ) by NAT_1:11;
j1 <= ( j1 + 1 ) by NAT_1:11;
then j1 c= ( j1 + 1 ) by NAT_1:39;
then A12: ( dom ( q | j1 ) ) = j1 by A9,RELAT_1:62;
A13: (for i holds (i <= j implies ( ( q | j1 ) . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) )))
proof
let i;
assume i <= j;
then i < j1 by NAT_1:13;
then (i in ( dom ( q | j1 ) ) & ( q . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) )) by A10,A12,NAT_1:44;
hence thesis by FUNCT_1:47;
end;
set CH4 = ( ( ( ( 2 * n ) + 1 ) + j1 ) choose n1 );
set CH3 = ( ( ( ( 2 * n ) + 1 ) + j1 ) choose n );
A14: (( 2 * n ) <= ( ( 2 * n ) + ( 1 + j1 ) ) & ( n1 + 1 ) = n) by NAT_1:11;
( q . j1 ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + j1 ),n) ) ) by A10;
then A15: ( q . j1 ) = ( CH3 - CH4 ) by A14,CKB36:1;
j1 < ( j1 + 1 ) by NAT_1:13;
then j1 in ( dom q ) by A9,NAT_1:44;
then A16: ( Sum ( q | ( j1 + 1 ) ) ) = ( ( Sum ( q | j1 ) ) + ( q . j1 ) ) by AFINSQ_2:65;
( 2 * ( n + 1 ) ) <= ( ( ( 2 * n ) + 2 ) + j ) by NAT_1:11;
then ( card ( Domin_0 (( ( ( 2 * n ) + 2 ) + j ),( n + 1 )) ) ) = ( CH1 - CH2 ) by CKB36:1;
then ( Sum ( q | j1 ) ) = ( CH1 - CH2 ) by A8,A12,A13;
then ( ( Sum ( q | j1 ) ) + ( q . j1 ) ) = ( ( CH1 + CH2 ) - ( CH3 + CH4 ) ) by A15
.= ( ( ( ( ( ( 2 * n ) + 2 ) + j ) + 1 ) choose ( n + 1 ) ) - ( CH3 + CH4 ) ) by NEWTON:22
.= ( ( ( ( ( 2 * n ) + 2 ) + j1 ) choose ( n + 1 ) ) - ( ( ( ( 2 * n ) + 2 ) + j1 ) choose ( n1 + 1 ) ) ) by NEWTON:22
.= ( card ( Domin_0 (( ( ( 2 * n ) + 2 ) + j1 ),( n + 1 )) ) ) by A11,CKB36:1;
hence thesis by A9,A16,RELAT_1:69;
end;
A17: Q[ ( 0 ) ]
proof
reconsider 2n1 = ( ( 2 * n ) + 1 ) as (Element of ( NAT ));
set 2CHn = ( ( ( 2 * n ) + 2 ) choose n );
set 2CHn91 = ( ( ( 2 * n ) + 2 ) choose ( n + 1 ) );
set CHn91 = ( 2n1 choose ( n + 1 ) );
set CHn1 = ( 2n1 choose n1 );
set CHn = ( 2n1 choose n );
let q;
assume (( dom q ) = ( ( 0 ) + 1 ) & (for i holds (i <= ( 0 ) implies ( q . i ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + i ),n) ) ))));
then A18: (( q . ( 0 ) ) = ( card ( Domin_0 (( ( ( 2 * n ) + 1 ) + ( 0 ) ),n) ) ) & ( len q ) = 1);
A19: ( ( 2 * n ) + 2 ) = ( ( ( 2 * n ) + 1 ) + 1 );
then A20: 2CHn91 = ( CHn91 + CHn ) by NEWTON:22;
( n1 + 1 ) = n;
then A21: 2CHn = ( CHn + CHn1 ) by A19,NEWTON:22;
(n <= ( n + ( n + 1 ) ) & ( ( ( 2 * n ) + 1 ) - n ) = ( n + 1 )) by NAT_1:11;
then A22: CHn = CHn91 by NEWTON:20;
( 2 * ( n + 1 ) ) = ( ( 2 * n ) + 2 );
then A23: ( card ( Domin_0 (( ( 2 * n ) + 2 ),( n + 1 )) ) ) = ( 2CHn91 - 2CHn ) by CKB36:1;
(( card ( Domin_0 (2n1,( n1 + 1 )) ) ) = ( CHn - CHn1 ) & ( Sum <% ( q . ( 0 ) ) %> ) = ( q . ( 0 ) )) by CKB36:1,AFINSQ_2:53,NAT_1:11;
hence thesis by A20,A21,A22,A23,A18,AFINSQ_1:34;
end;
(for j holds Q[ j ]) from NAT_1:sch 2(A17,A7);
hence ( Sum p ) = ( card ( Domin_0 (( ( ( 2 * n ) + 2 ) + k ),( n + 1 )) ) ) by A2,A4;
end;
end;
hence thesis by A2,A4;
end;
