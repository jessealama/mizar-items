environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,VECTSP_1,SUBSET_1,MATRIX_2,FUNCT_2,FINSEQ_1,FUNCT_1,ARYTM_3,SGRAPH1,XXREAL_0,TARSKI,CARD_1,FINSET_1,ORDINAL1,RELAT_1,ALGSTR_0,SETWISEO,BINOP_1,STRUCT_0,GROUP_1,ARYTM_1,FINSUB_1,INT_1,SUPINF_2,ABSVALUE,FINSEQ_2,CARD_3,ORDINAL4,FINSOP_1,ABIAN,MATRIX_1,TREES_1,ZFMISC_1,INCSP_1,AFINSQ_1,PARTFUN1,MATRIX_3,RLVECT_1,RVSUM_1,FVSUM_1,FUNCT_5,FUNCT_4,MATRIX11;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,NAT_D,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,SETWOP_2,FINSEQ_2,FINSEQOP,MATRIX_1,FINSUB_1,MATRIX_2,NAT_1,FVSUM_1,CAT_2,FINSOP_1,GROUP_4,MATRIX_3,CARD_1,FINSEQ_7,FUNCT_4,ORDINAL1,SGRAPH1,MATRIX_6,CKB1,CKB9,CKB18,CKB39,CKB40,CKB54,CKB74;
definitions BINOP_1,FINSEQ_2,FINSEQ_1,TARSKI,XBOOLE_0,MATRIX_1,MATRIX_3,FVSUM_1,RELAT_1,ALGSTR_0,CKB9,CKB18,CKB39,CKB54,CKB74;
theorems FINSEQ_1,FINSEQ_2,TARSKI,FUNCT_2,NAT_1,BINOP_1,FUNCT_1,SETWISEO,VECTSP_1,ZFMISC_1,FVSUM_1,SETWOP_2,MATRIX_1,MATRIX_2,FUNCOP_1,FINSUB_1,FINSEQ_3,RLVECT_1,RELAT_1,FINSOP_1,XBOOLE_0,XBOOLE_1,GROUP_1,MATRIX_3,FINSEQ_5,FINSET_1,GROUP_4,XREAL_1,MATRIX_7,ORDINAL1,MATRIX_4,CARD_1,CARD_2,MATRIX_9,STIRL2_1,RADIX_1,REWRITE1,FINSEQ_7,SGRAPH1,WELLORD2,FRAENKEL,FUNCT_5,FUNCT_4,NAT_D,XXREAL_0,PARTFUN1,CKB2,CKB3,CKB4,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB39,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB78,CKB79,CKB80;
schemes FUNCT_2,NAT_1,FINSEQ_1,FINSEQ_2,MATRIX_1,BINOP_1,FUNCT_1,SETWISEO;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,PARTFUN1,FUNCT_2,FINSET_1,FINSUB_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,GROUP_1,VECTSP_1,MATRIX_2,FVSUM_1,CARD_1,RELSET_1,FINSEQ_2,CKB5,CKB6,CKB7,CKB8,CKB38,CKB76,CKB77;
constructors RELAT_2,WELLORD2,SETWISEO,XXREAL_0,NAT_1,NAT_D,FINSOP_1,SETWOP_2,FINSEQ_7,CAT_2,ALGSTR_1,GROUP_4,FVSUM_1,SGRAPH1,MATRIX_6,MATRIX_7,RELSET_1,CKB9,CKB18,CKB39,CKB54,CKB74;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve D for non empty set;
theorem
Th58: (for X being  finite set holds (for Y being non empty  finite set holds (for x holds ((not x in X) implies (for F being (BinOp of D) holds (((F is  having_a_unity & F is  commutative) & F is  associative) implies (for f being (Function of ( Funcs (X,Y) ),D) holds (for g being (Function of ( Funcs (( X \/ { x } ),Y) ),D) holds ((for H being (Function of X,Y) holds (for SF being (Element of ( Fin ( Funcs (( X \/ { x } ),Y) ) )) holds (SF = { h where h is (Function of ( X \/ { x } ),Y): ( h | X ) = H } implies ( F $$ (SF,g) ) = ( f . H )))) implies ( F $$ (( FinOmega ( Funcs (X,Y) ) ),f) ) = ( F $$ (( FinOmega ( Funcs (( X \/ { x } ),Y) ) ),g) ))))))))))
proof
let X being  finite set;
let Y being non empty  finite set;
let x;
assume that
A1: (not x in X);
set Xx = ( X \/ { x } );
set FXY = ( Funcs (X,Y) );
set FXxY = ( Funcs (Xx,Y) );
consider B being (Function of [: FXY,Y :],FXxY) such that A2: B is  bijective and A3: (for f being (Function of X,Y) holds (for F being (Function of Xx,Y) holds (( F | X ) = f implies ( B . (f,( F . x )) ) = F))) by A1,CKB80:1;
A4: FXY is  finite by FRAENKEL:6;
( dom B ) = [: FXY,Y :] by FUNCT_2:def 1;
then reconsider domB = ( dom B ) as (Element of ( Fin [: FXY,Y :] )) by A4,FINSUB_1:def 5;
FXY is  finite by FRAENKEL:6;
then reconsider FXY9 = FXY as (Element of ( Fin FXY )) by FINSUB_1:def 5;
A5: ( FinOmega FXxY ) = FXxY by FRAENKEL:6,MATRIX_2:def 14;
reconsider Y9 = Y as (Element of ( Fin Y )) by FINSUB_1:def 5;
let F being (BinOp of D);
assume that
A6: F is  having_a_unity
and
A7: F is  commutative
and
A8: F is  associative;
let f being (Function of FXY,D);
let g being (Function of FXxY,D);
assume that
A9: (for H being (Function of X,Y) holds (for SF being (Element of ( Fin FXxY )) holds (SF = { h where h is (Function of Xx,Y): ( h | X ) = H } implies ( F $$ (SF,g) ) = ( f . H ))));
reconsider gB = ( g * B ) as (Function of [: FXY,Y :],D);
(for z being (Element of FXY) holds ( f . z ) = ( F $$ (Y9,( ( curry gB ) . z )) ))
proof
let z being (Element of FXY);
reconsider Z = z as (Function of X,Y);
set SF = { h where h is (Function of Xx,Y): ( h | X ) = Z };
deffunc Q(set) = [ z,$1 ];
consider q being Function such that A10: (( dom q ) = Y & (for x holds (x in Y implies ( q . x ) = Q(x)))) from FUNCT_1:sch 3;
A11: { z } c= FXY by ZFMISC_1:31;
then [: { Z },Y :] c= [: FXY,Y :] by ZFMISC_1:95;
then reconsider ZY = [: { Z },Y :] as (Element of ( Fin [: FXY,Y :] )) by FINSUB_1:def 5;
(for x9 being set holds (x9 in ZY iff x9 in ( q .: Y )))
proof
let x9 being set;
thus (x9 in ZY implies x9 in ( q .: Y ))
proof
assume x9 in ZY;
then consider z9 being set,y9 being set such that A12: z9 in { Z } and A13: y9 in Y and A14: x9 = [ z9,y9 ] by ZFMISC_1:def 2;
A15: z = z9 by A12,TARSKI:def 1;
( q . y9 ) = [ z,y9 ] by A10,A13;
hence thesis by A10,A13,A14,A15,FUNCT_1:def 6;
end;

assume x9 in ( q .: Y );
then consider y9 being set such that A16: y9 in ( dom q ) and A17: y9 in Y and A18: x9 = ( q . y9 ) by FUNCT_1:def 6;
x9 = [ z,y9 ] by A10,A16,A18;
hence thesis by A17,ZFMISC_1:105;
end;
then A19: ( q .: Y ) = ZY by TARSKI:1;
then A20: ( rng q ) = ZY by A10,RELAT_1:113;
now
let x1 being set,x2 being set;
assume that
A21: x1 in ( dom q )
and
A22: x2 in ( dom q )
and
A23: ( q . x1 ) = ( q . x2 );
A24: ( q . x2 ) = [ z,x2 ] by A10,A22;
[ z,x1 ] = ( q . x1 ) by A10,A21;
hence x1 = x2 by A23,A24,ZFMISC_1:27;
end;
then A25: q is  one-to-one by FUNCT_1:def 4;
ZY c= [: FXY,Y :] by A11,ZFMISC_1:95;
then reconsider q as (Function of Y,[: FXY,Y :]) by A10,A20,FUNCT_2:2;
reconsider gBq = ( gB * q ) as (Function of Y,D);
( dom gB ) = [: FXY,Y :] by FUNCT_2:def 1;
then consider C being Function such that A26: ( ( curry gB ) . z ) = C and ( dom C ) = Y and ( rng C ) c= ( rng gB ) and A27: (for y9 being set holds (y9 in Y implies ( C . y9 ) = ( gB . (z,y9) ))) by FUNCT_5:29;
reconsider C as (Function of Y,D) by A26;
now
let x9 being set;
assume that
A28: x9 in Y;
A29: ( q . x9 ) = [ z,x9 ] by A10,A28;
( C . x9 ) = ( gB . (z,x9) ) by A27,A28;
hence ( C . x9 ) = ( gBq . x9 ) by A28,A29,FUNCT_2:15;
end;
then A30: C = gBq by FUNCT_2:12;
A31: ( B .: ZY ) c= SF
proof
let b being set;
assume b in ( B .: ZY );
then consider zy being set such that zy in ( dom B ) and A32: zy in ZY and A33: b = ( B . zy ) by FUNCT_1:def 6;
consider z9 being set,y9 being set such that A34: z9 in { Z } and A35: y9 in Y and A36: zy = [ z9,y9 ] by A32,ZFMISC_1:def 2;
( Y \/ { y9 } ) = Y by A35,ZFMISC_1:40;
then consider F1 being (Function of Xx,Y) such that A37: ( F1 | X ) = Z and A38: ( F1 . x ) = y9 by A1,STIRL2_1:57;
z9 = Z by A34,TARSKI:def 1;
then ( B . (z9,y9) ) = F1 by A3,A37,A38;
hence thesis by A33,A36,A37;
end;
A39: SF c= ( B .: ZY )
proof
x in { x } by TARSKI:def 1;
then A40: x in Xx by XBOOLE_0:def 3;
let sf being set;
assume sf in SF;
then consider h being (Function of Xx,Y) such that A41: h = sf and A42: ( h | X ) = Z;
A43: [: FXY,Y :] = ( dom B ) by FUNCT_2:def 1;
( dom h ) = Xx by FUNCT_2:def 1;
then A44: ( h . x ) in ( rng h ) by A40,FUNCT_1:def 3;
A45: ( rng h ) c= Y by RELAT_1:def 19;
then A46: [ z,( h . x ) ] in [: FXY,Y :] by A44,ZFMISC_1:87;
z in { Z } by TARSKI:def 1;
then [ z,( h . x ) ] in ZY by A44,A45,ZFMISC_1:87;
then ( B . (z,( h . x )) ) in ( B .: ZY ) by A46,A43,FUNCT_1:def 6;
hence thesis by A3,A41,A42;
end;
then reconsider SF as (Element of ( Fin FXxY )) by A31,XBOOLE_0:def 10;
( B .: ZY ) = SF by A31,A39,XBOOLE_0:def 10;
then A47: ( F $$ (( B .: ZY ),g) ) = ( f . Z ) by A9;
( F $$ (( B .: ZY ),g) ) = ( F $$ (ZY,gB) ) by A7,A8,A2,SETWOP_2:6;
hence thesis by A7,A8,A47,A25,A19,A26,A30,SETWOP_2:6;
end;
then ( F $$ ([: FXY9,Y9 :],gB) ) = ( F $$ (FXY9,f) ) by A6,A7,A8,MATRIX_3:30;
then A48: ( F $$ (domB,gB) ) = ( F $$ (FXY9,f) ) by FUNCT_2:def 1;
A49: ( rng B ) = FXxY by A2,FUNCT_2:def 3;
( F $$ (( B .: domB ),g) ) = ( F $$ (domB,( g * B )) ) by A7,A8,A2,SETWOP_2:6;
then ( F $$ (( FinOmega FXxY ),g) ) = ( F $$ (domB,( g * B )) ) by A49,A5,RELAT_1:113;
hence thesis by A48,MATRIX_2:def 14;
end;
