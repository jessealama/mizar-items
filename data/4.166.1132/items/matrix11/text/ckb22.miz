environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,VECTSP_1,SUBSET_1,MATRIX_2,FUNCT_2,FINSEQ_1,FUNCT_1,ARYTM_3,SGRAPH1,XXREAL_0,TARSKI,CARD_1,FINSET_1,ORDINAL1,RELAT_1,ALGSTR_0,SETWISEO,BINOP_1,STRUCT_0,GROUP_1,ARYTM_1,FINSUB_1,INT_1,SUPINF_2,ABSVALUE,FINSEQ_2,CARD_3,ORDINAL4,FINSOP_1,ABIAN,MATRIX_1,TREES_1,ZFMISC_1,INCSP_1,AFINSQ_1,PARTFUN1,MATRIX_3,RLVECT_1,RVSUM_1,FVSUM_1,FUNCT_5,FUNCT_4,MATRIX11;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,NAT_D,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,SETWOP_2,FINSEQ_2,FINSEQOP,MATRIX_1,FINSUB_1,MATRIX_2,NAT_1,FVSUM_1,CAT_2,FINSOP_1,GROUP_4,MATRIX_3,CARD_1,FINSEQ_7,FUNCT_4,ORDINAL1,SGRAPH1,MATRIX_6,CKB1,CKB9,CKB18;
definitions BINOP_1,FINSEQ_2,FINSEQ_1,TARSKI,XBOOLE_0,MATRIX_1,MATRIX_3,FVSUM_1,RELAT_1,ALGSTR_0,CKB9,CKB18;
theorems FINSEQ_1,FINSEQ_2,TARSKI,FUNCT_2,NAT_1,BINOP_1,FUNCT_1,SETWISEO,VECTSP_1,ZFMISC_1,FVSUM_1,SETWOP_2,MATRIX_1,MATRIX_2,FUNCOP_1,FINSUB_1,FINSEQ_3,RLVECT_1,RELAT_1,FINSOP_1,XBOOLE_0,XBOOLE_1,GROUP_1,MATRIX_3,FINSEQ_5,FINSET_1,GROUP_4,XREAL_1,MATRIX_7,ORDINAL1,MATRIX_4,CARD_1,CARD_2,MATRIX_9,STIRL2_1,RADIX_1,REWRITE1,FINSEQ_7,SGRAPH1,WELLORD2,FRAENKEL,FUNCT_5,FUNCT_4,NAT_D,XXREAL_0,PARTFUN1,CKB2,CKB3,CKB4,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21;
schemes FUNCT_2,NAT_1,FINSEQ_1,FINSEQ_2,MATRIX_1,BINOP_1,FUNCT_1,SETWISEO;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,PARTFUN1,FUNCT_2,FINSET_1,FINSUB_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,GROUP_1,VECTSP_1,MATRIX_2,FVSUM_1,CARD_1,RELSET_1,FINSEQ_2,CKB5,CKB6,CKB7,CKB8;
constructors RELAT_2,WELLORD2,SETWISEO,XXREAL_0,NAT_1,NAT_D,FINSOP_1,SETWOP_2,FINSEQ_7,CAT_2,ALGSTR_1,GROUP_4,FVSUM_1,SGRAPH1,MATRIX_6,MATRIX_7,RELSET_1,CKB9,CKB18;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve i for Nat;
reserve j for Nat;
reserve k for Nat;
reserve n for Nat;
reserve K for Field;
reserve p2 for (Element of ( Permutations ( n + 2 ) ));
reserve q2 for (Element of ( Permutations ( n + 2 ) ));
reserve pq2 for (Element of ( Permutations ( n + 2 ) ));
reserve s for (Element of ( 2Set ( Seg ( n + 2 ) ) ));
theorem
Th13: (for p2 holds (for q2 holds (for pq2 holds ((pq2 = ( p2 * q2 ) & q2 is  being_transposition) implies ( sgn (pq2,K) ) = ( - ( sgn (p2,K) ) )))))
proof
set n2 = ( n + 2 );
set 2SS = ( 2Set ( Seg n2 ) );
let p being (Element of ( Permutations n2 )),q being (Element of ( Permutations n2 )),pq being (Element of ( Permutations n2 ));
assume that
A1: pq = ( p * q )
and
A2: q is  being_transposition;
A3: ( FinOmega 2SS ) = 2SS by MATRIX_2:def 14;
then reconsider 2S = 2SS as (Element of ( Fin 2SS ));
A4: (for i holds (for j holds ((i < j & ( q . i ) = j) implies ( sgn (pq,K) ) = ( - ( sgn (p,K) ) ))))
proof
let i;
let j;
assume that
A5: i < j
and
A6: ( q . i ) = j;
now
per cases ;
suppose A7: ( 1_ K ) = ( - ( 1_ K ) );

then ( sgn (pq,K) ) = ( - ( 1_ K ) ) by CKB19:1;
hence thesis by A7,CKB19:1;
end;
suppose A8: ( 1_ K ) <> ( - ( 1_ K ) );

set P2 = ( Part_sgn (p,K) );
set P1 = ( Part_sgn (pq,K) );
A9: ( P1 . { i,j } ) <> ( P2 . { i,j } ) by A1,A2,A5,A6,A8,CKB17:1;
defpred P[ set,set ]
 means
(for k holds ((k in $1 & k <> i) implies ((k <> j implies $2 = { j,k }) & (k = j implies $2 = { i,j }))));
set D = { s: (s in 2S & ( ( Part_sgn (pq,K) ) . s ) <> ( ( Part_sgn (p,K) ) . s )) };
D c= 2S
proof
let x;
assume x in D;
then (ex s st ((x = s & s in 2S) & ( P1 . s ) <> ( P2 . s )));
hence thesis;
end;
then reconsider D as  finite set;
set D1 = { s: ((s in 2S & ( P1 . s ) <> ( P2 . s )) & i in s) };
set D2 = { s: ((s in 2S & ( P1 . s ) <> ( P2 . s )) & j in s) };
A10: D1 c= D
proof
let x;
assume x in D1;
then (ex s st (((x = s & s in 2S) & ( P1 . s ) <> ( P2 . s )) & i in s));
hence thesis;
end;
A11: D2 c= D
proof
let x;
assume x in D2;
then (ex s st (((x = s & s in 2S) & ( P1 . s ) <> ( P2 . s )) & j in s));
hence thesis;
end;
then reconsider D1,D2 as  finite set by A10;
A12: j in ( dom q ) by A2,A5,A6,CKB14:1;
A13: D c= ( D1 \/ D2 )
proof
let x;
assume x in D;
then consider s such that A14: x = s and s in 2S and A15: ( P1 . s ) <> ( P2 . s );
(i in s or j in s) by A1,A2,A5,A6,A15,CKB15:1;
then (x in D1 or x in D2) by A14,A15;
hence thesis by XBOOLE_0:def 3;
end;
( D1 \/ D2 ) c= D by A10,A11,XBOOLE_1:8;
then A16: ( D1 \/ D2 ) = D by A13,XBOOLE_0:def 10;
A17: ( D1 /\ D2 ) c= { { i,j } }
proof
let x;
assume A18: x in ( D1 /\ D2 );
then x in D1 by XBOOLE_0:def 4;
then A19: (ex s1 being (Element of 2SS) st (((x = s1 & s1 in 2S) & ( P1 . s1 ) <> ( P2 . s1 )) & i in s1));
then consider i9 being Nat,j9 being Nat such that i9 in ( Seg n2 ) and j9 in ( Seg n2 ) and i9 < j9 and A20: { i9,j9 } = x by CKB2:1;
x in D2 by A18,XBOOLE_0:def 4;
then (ex s2 being (Element of 2SS) st (((x = s2 & s2 in 2S) & ( P1 . s2 ) <> ( P2 . s2 )) & j in s2));
then A21: (j = i9 or j = j9) by A20,TARSKI:def 2;
(i = i9 or i = j9) by A19,A20,TARSKI:def 2;
hence thesis by A5,A20,A21,TARSKI:def 1;
end;
q is (Permutation of ( Seg n2 )) by MATRIX_2:def 9;
then A22: ( dom q ) = ( Seg n2 ) by FUNCT_2:52;
A23: i in ( dom q ) by A2,A5,A6,CKB14:1;
then A24: { i,j } in 2S by A5,A12,A22,CKB2:1;
A25: i in { i,j } by TARSKI:def 2;
then { i,j } in D1 by A24,A9;
then ( card D1 ) > ( 0 );
then reconsider c1 = ( ( card D1 ) - 1 ) as Nat by NAT_1:20;
A26: j in { i,j } by TARSKI:def 2;
then A27: { i,j } in D2 by A24,A9;
A28: (for x holds (x in D1 implies (ex y being set st (y in D2 & P[ x,y ]))))
proof
let x;
assume x in D1;
then consider s such that A29: x = s and s in 2S and A30: ( P1 . s ) <> ( P2 . s ) and A31: i in s;
consider j9 being Nat such that A32: j9 in ( Seg n2 ) and A33: j9 <> i and A34: s = { i,j9 } by A31,CKB21:1;
now
per cases ;
suppose A35: j9 = j;

take X = { i,j };
thus X in D2 by A26,A24,A9;
let k;
assume that
A36: k in x
and
k <> i;
thus ((k <> j implies X = { j,k }) & (k = j implies X = { i,j })) by A29,A34,A35,A36,TARSKI:def 2;
end;
suppose A37: j9 <> j;

take X = { j,j9 };
(j < j9 or j > j9) by A37,XXREAL_0:1;
then A38: X in 2SS by A12,A22,A32,CKB2:1;
A39: j in X by TARSKI:def 2;
( P1 . X ) <> ( P2 . X ) by A1,A2,A5,A6,A8,A30,A32,A33,A34,A37,CKB17:1;
hence X in D2 by A39,A38;
let k;
assume that
A40: k in x
and
A41: k <> i;
thus ((k <> j implies X = { j,k }) & (k = j implies X = { i,j })) by A29,A34,A37,A40,A41,TARSKI:def 2;
end;
end;
hence thesis;
end;
consider f being (Function of D1,D2) such that A42: (for x holds (x in D1 implies P[ x,( f . x ) ])) from FUNCT_2:sch 1(A28);
A43: { i,j } in D2 by A26,A24,A9;
then A44: ( dom f ) = D1 by FUNCT_2:def 1;
(for y being set holds (y in D2 implies (ex x st (x in D1 & y = ( f . x )))))
proof
let y being set;
assume y in D2;
then consider s such that A45: s = y and s in 2S and A46: ( P1 . s ) <> ( P2 . s ) and A47: j in s;
consider i1 being Nat such that A48: i1 in ( Seg n2 ) and A49: i1 <> j and A50: s = { j,i1 } by A47,CKB21:1;
now
per cases ;
suppose A51: i1 = i;

A52: { i,j } in D1 by A25,A24,A9;
then ( f . s ) = y by A5,A26,A42,A45,A50,A51;
hence thesis by A50,A51,A52;
end;
suppose A53: i1 <> i;

then (i < i1 or i > i1) by XXREAL_0:1;
then A54: { i,i1 } in 2SS by A23,A22,A48,CKB2:1;
A55: i in { i,i1 } by TARSKI:def 2;
( P1 . { i,i1 } ) <> ( P2 . { i,i1 } ) by A1,A2,A5,A6,A8,A46,A48,A49,A50,A53,CKB17:1;
then A56: { i,i1 } in D1 by A54,A55;
i1 in { i,i1 } by TARSKI:def 2;
then ( f . { i,i1 } ) = { j,i1 } by A42,A49,A53,A56;
hence thesis by A45,A50,A56;
end;
end;
hence thesis;
end;
then A57: ( rng f ) = D2 by FUNCT_2:10;
(for x1,x2 being set holds (((x1 in D1 & x2 in D1) & ( f . x1 ) = ( f . x2 )) implies x1 = x2))
proof
let x1 being set,x2 being set;
assume that
A58: x1 in D1
and
A59: x2 in D1
and
A60: ( f . x1 ) = ( f . x2 );
consider s1 being (Element of 2SS) such that A61: x1 = s1 and s1 in 2S and ( P1 . s1 ) <> ( P2 . s1 ) and A62: i in s1 by A58;
consider j1 being Nat such that j1 in ( Seg n2 ) and A63: i <> j1 and A64: { i,j1 } = s1 by A62,CKB21:1;
consider s2 being (Element of 2SS) such that A65: x2 = s2 and s2 in 2S and ( P1 . s2 ) <> ( P2 . s2 ) and A66: i in s2 by A59;
consider j2 being Nat such that j2 in ( Seg n2 ) and A67: i <> j2 and A68: { i,j2 } = s2 by A66,CKB21:1;
A69: j2 in s2 by A68,TARSKI:def 2;
A70: j1 in s1 by A64,TARSKI:def 2;
now
per cases ;
case (j = j1 & j = j2);
hence thesis by A61,A64,A65,A68;
end;
case A71: (j <> j1 & j = j2);
then A72: ( f . x2 ) = { i,j } by A42,A59,A65,A67,A69;
( f . x1 ) = { j,j1 } by A42,A58,A61,A63,A70,A71;
hence thesis by A5,A60,A63,A66,A68,A71,A72,TARSKI:def 2;
end;
case A73: (j = j1 & j <> j2);
then A74: ( f . x2 ) = { j,j2 } by A42,A59,A65,A67,A69;
( f . x1 ) = { i,j } by A42,A58,A61,A63,A70,A73;
hence thesis by A5,A60,A62,A64,A67,A73,A74,TARSKI:def 2;
end;
case A75: (j <> j1 & j <> j2);
then A76: ( f . x2 ) = { j,j2 } by A42,A59,A65,A67,A69;
A77: j1 in { j,j1 } by TARSKI:def 2;
( f . x1 ) = { j,j1 } by A42,A58,A61,A63,A70,A75;
hence thesis by A60,A61,A64,A65,A68,A75,A76,A77,TARSKI:def 2;
end;
end;
hence thesis;
end;
then f is  one-to-one by A43,FUNCT_2:19;
then D1,D2 are_equipotent  by A57,A44,WELLORD2:def 4;
then A78: ( card D1 ) = ( card D2 ) by CARD_1:5;
{ i,j } in D1 by A25,A24,A9;
then { i,j } in ( D1 /\ D2 ) by A27,XBOOLE_0:def 4;
then { { i,j } } c= ( D1 /\ D2 ) by ZFMISC_1:31;
then ( D1 /\ D2 ) = { { i,j } } by A17,XBOOLE_0:def 10;
then ( card D ) = ( ( ( card D1 ) + ( card D1 ) ) - ( card { { i,j } } ) ) by A78,A16,CARD_2:45
.= ( ( ( c1 + 1 ) + ( c1 + 1 ) ) - 1 ) by CARD_1:30
.= ( ( 2 * c1 ) + 1 );
then ( ( card D ) mod 2 ) = ( 1 mod 2 ) by NAT_D:21;
hence thesis by A3,CKB13:1,NAT_D:14;
end;
end;
hence thesis;
end;
consider i,j such that i in ( dom q ) and j in ( dom q ) and A79: i <> j and A80: ( q . i ) = j and A81: ( q . j ) = i and (for k holds (((k <> i & k <> j) & k in ( dom q )) implies ( q . k ) = k)) by A2,MATRIX_2:def 11;
(i < j or j < i) by A79,XXREAL_0:1;
hence thesis by A4,A80,A81;
end;
