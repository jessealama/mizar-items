environ
vocabularies XBOOLE_0,RELAT_2,ORDERS_2,STRUCT_0,CAT_1,YELLOW_0,SUBSET_1,RCOMP_1,WELLORD1,TARSKI,LATTICES,REWRITE1,WAYBEL_0,XXREAL_0,WAYBEL_3,WAYBEL_6,CARD_FIL,LATTICE3,EQREL_1,ORDINAL2,FINSET_1,ZFMISC_1,WAYBEL_4,MSSUBFAM,WAYBEL_7,INT_2,WAYBEL_1,FUNCT_1,GROUP_6,RELAT_1,BINOP_1,SEQM_3,YELLOW_1,FILTER_1,SETFAM_1,WAYBEL_8,CARD_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,CARD_1,FINSET_1,RELAT_1,TOLER_1,FUNCT_1,RELSET_1,FUNCT_2,DOMAIN_1,RELAT_2,STRUCT_0,ORDERS_2,LATTICE3,QUANTAL1,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_0,WAYBEL_1,WAYBEL_3,WAYBEL_4,WAYBEL_6,WAYBEL_7,CKB1,CKB6,CKB11,CKB12;
definitions TARSKI,RELAT_2,ORDERS_2,YELLOW_2,STRUCT_0,CKB1,CKB6,CKB11,CKB12;
theorems TARSKI,STRUCT_0,FINSET_1,FUNCT_1,FUNCT_2,ORDERS_2,LATTICE3,YELLOW_0,YELLOW_1,YELLOW_2,YELLOW_3,YELLOW_5,WAYBEL_0,WAYBEL_1,WAYBEL_3,WAYBEL_4,WAYBEL_6,WAYBEL_7,RELAT_1,YELLOW_7,XBOOLE_0,XBOOLE_1,RELAT_2,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12;
schemes SUBSET_1,FUNCT_1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FINSET_1,STRUCT_0,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,WAYBEL_2,WAYBEL_3,WAYBEL_4,WAYBEL_6,CARD_1,ORDINAL1,CKB2,CKB10;
constructors DOMAIN_1,TOLER_1,QUANTAL1,ORDERS_3,WAYBEL_1,YELLOW_3,WAYBEL_3,WAYBEL_4,WAYBEL_6,WAYBEL_7,RELSET_1,PRALG_1,CKB1,CKB6,CKB11,CKB12;
requirements SUBSET,BOOLE,NUMERALS;
begin
theorem
Th7: (for L being LATTICE holds (L is  algebraic iff (L is  continuous & (for x,y being (Element of L) holds (x << y implies (ex k being (Element of L) st ((k in (the carrier of ( CompactSublatt L )) & x <= k) & k <= y)))))))
proof
let L being LATTICE;
thus (L is  algebraic implies (L is  continuous & (for x,y being (Element of L) holds (x << y implies (ex k being (Element of L) st ((k in (the carrier of ( CompactSublatt L )) & x <= k) & k <= y))))))
proof
assume A1: L is  algebraic;
then A2: L is  up-complete  satisfying_axiom_K by CKB12:def 1;
now
let x being (Element of L);
A3: ( compactbelow x ) is non empty  directed by A1,CKB12:def 1;
then A4: (ex s being set st s in ( compactbelow x )) by XBOOLE_0:def 1;
( compactbelow x ) c= ( waybelow x ) by CKB9:1;
then A5:  ex_sup_of ( waybelow x ),L by A2,A4,WAYBEL_0:75;
 ex_sup_of ( compactbelow x ),L by A2,A3,WAYBEL_0:75;
then ( sup ( compactbelow x ) ) <= ( sup ( waybelow x ) ) by A5,CKB9:1,YELLOW_0:34;
then A6: x <= ( sup ( waybelow x ) ) by A2,CKB11:def 1;
( waybelow x ) is_<=_than x by WAYBEL_3:9;
then ( sup ( waybelow x ) ) <= x by A5,YELLOW_0:def 9;
hence x = ( sup ( waybelow x ) ) by A6,ORDERS_2:2;
end;
then A7: L is  satisfying_axiom_of_approximation by WAYBEL_3:def 5;
(for x being (Element of L) holds ( waybelow x ) is non empty  directed)
proof
let x being (Element of L);
( compactbelow x ) c= ( waybelow x ) by CKB9:1;
hence thesis by A1,CKB12:def 1;
end;
hence L is  continuous by A2,A7,WAYBEL_3:def 6;
let x being (Element of L),y being (Element of L);
reconsider D = ( compactbelow y ) as non empty  directed (Subset of L) by A1,CKB12:def 1;
assume A8: x << y;
y = ( sup D ) by A2,CKB11:def 1;
then consider d being (Element of L) such that A9: d in D and A10: x <= d by A8,WAYBEL_3:def 1;
take d;
d is  compact by A9,CKB7:1;
hence d in (the carrier of ( CompactSublatt L )) by CKB1:def 1;
thus thesis by A9,A10,CKB7:1;
end;

assume that
A11: L is  continuous
and
A12: (for x,y being (Element of L) holds (x << y implies (ex k being (Element of L) st ((k in (the carrier of ( CompactSublatt L )) & x <= k) & k <= y))));
now
let x being (Element of L);
A13:now
let z being (Element of L);
thus (z is_>=_than ( waybelow x ) implies z is_>=_than ( compactbelow x ))
proof
assume A14: z is_>=_than ( waybelow x );
now
let d being (Element of L);
assume A15: d in ( compactbelow x );
then d is  compact by CKB7:1;
then A16: d << d by WAYBEL_3:def 2;
d <= x by A15,CKB7:1;
then d << x by A16,WAYBEL_3:2;
then d in ( waybelow x ) by WAYBEL_3:7;
hence d <= z by A14,LATTICE3:def 9;
end;
hence thesis by LATTICE3:def 9;
end;

thus (z is_>=_than ( compactbelow x ) implies z is_>=_than ( waybelow x ))
proof
assume A17: z is_>=_than ( compactbelow x );
now
let d being (Element of L);
assume d in ( waybelow x );
then d << x by WAYBEL_3:7;
then consider k being (Element of L) such that A18: k in (the carrier of ( CompactSublatt L )) and A19: d <= k and A20: k <= x by A12;
k is  compact by A18,CKB1:def 1;
then k in ( compactbelow x ) by A20;
then k <= z by A17,LATTICE3:def 9;
hence d <= z by A19,ORDERS_2:3;
end;
hence thesis by LATTICE3:def 9;
end;

end;
(x = ( sup ( waybelow x ) ) &  ex_sup_of ( waybelow x ),L) by A11,WAYBEL_0:75,WAYBEL_3:def 5;
hence x = ( sup ( compactbelow x ) ) by A13,YELLOW_0:47;
end;
then A21: L is  satisfying_axiom_K by CKB11:def 1;
(for x being (Element of L) holds ( compactbelow x ) is non empty  directed)
proof
let x being (Element of L);
now
let Y being  finite (Subset of ( compactbelow x ));
( compactbelow x ) c= ( waybelow x ) by CKB9:1;
then Y is  finite  finite (Subset of ( waybelow x )) by XBOOLE_1:1;
then consider b being (Element of L) such that A22: b in ( waybelow x ) and A23: b is_>=_than Y by A11,WAYBEL_0:1;
b << x by A22,WAYBEL_3:7;
then consider c being (Element of L) such that A24: c in (the carrier of ( CompactSublatt L )) and A25: b <= c and A26: c <= x by A12;
take c;
c is  compact by A24,CKB1:def 1;
hence c in ( compactbelow x ) by A26;
thus c is_>=_than Y by A23,A25,YELLOW_0:4;
end;
hence thesis by WAYBEL_0:1;
end;
hence thesis by A11,A21,CKB12:def 1;
end;
