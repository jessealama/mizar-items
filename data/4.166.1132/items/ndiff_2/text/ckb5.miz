environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,NAT_1,FDIFF_1,SUBSET_1,LOPBAN_1,RELAT_1,XXREAL_2,RSSPACE,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,FUNCOP_1,XREAL_0,ORDINAL1,XBOOLE_0,NDIFF_2;
notations TARSKI,XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XCMPLX_0,XXREAL_0,XREAL_0,ORDINAL1,NUMBERS,COMPLEX1,REAL_1,NAT_1,SQUARE_1,FUNCOP_1,RLVECT_1,PRE_TOPC,STRUCT_0,VALUED_0,VALUED_1,SEQ_1,SEQ_2,VFUNCT_1,NORMSP_0,NORMSP_1,RSSPACE,LOPBAN_1,NFCONT_1,FDIFF_1,NDIFF_1,CKB1,CKB2;
definitions TARSKI,RLVECT_1,CKB1,CKB2;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,SEQ_4,NORMSP_1,LOPBAN_1,LOPBAN_2,LOPBAN_3,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,ORDINAL1,GRCAT_1,NORMSP_0,CKB1,CKB2,CKB3,CKB4;
schemes FUNCT_2;
registrations XBOOLE_0,ORDINAL1,RELSET_1,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,STRUCT_0,LOPBAN_1,LOPBAN_2,NDIFF_1,VALUED_1,FUNCT_2,NUMBERS,VALUED_0,FUNCOP_1;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,FDIFF_1,RSSPACE,VFUNCT_1,LOPBAN_3,NFCONT_1,NDIFF_1,SEQ_1,VALUED_1,NORMSP_1,RELSET_1,CKB1,CKB2;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve S for non trivial RealNormSpace;
reserve T for non trivial RealNormSpace;
reserve f for (PartFunc of S,T);
reserve c for  constant (sequence of S);
theorem
Th3: (for x0 being (Point of S) holds (for N being (Neighbourhood of x0) holds (N c= ( dom f ) implies (for z being (Point of S) holds (for dv being (Point of T) holds ((for h being  convergent_to_0 Real_Sequence holds (for c holds ((( rng c ) = { x0 } & ( rng ( ( h * z ) + c ) ) c= N) implies (( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) is  convergent & dv = ( lim ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) ))))) iff (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < e))))))))))))
proof
let x0 being (Point of S);
let N being (Neighbourhood of x0);
assume that
A1: N c= ( dom f );
let z being (Point of S);
let dv being (Point of T);
A2:now
reconsider c = ( ( NAT ) --> x0 ) as (sequence of S);
assume A3: (for h being  convergent_to_0 Real_Sequence holds (for c holds ((( rng c ) = { x0 } & ( rng ( ( h * z ) + c ) ) c= N) implies (( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) is  convergent & dv = ( lim ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) )))));
now
let x being set;
assume x in { x0 };
then x = x0 by TARSKI:def 1;
then x = ( c . 1 ) by FUNCOP_1:7;
hence x in ( rng c ) by NFCONT_1:6;
end;
then A4: { x0 } c= ( rng c ) by TARSKI:def 3;
now
let x being set;
assume x in ( rng c );
then (ex n being (Element of ( NAT )) st x = ( c . n )) by NFCONT_1:6;
then x = x0 by FUNCOP_1:7;
hence x in { x0 } by TARSKI:def 1;
end;
then ( rng c ) c= { x0 } by TARSKI:def 3;
then A5: ( rng c ) = { x0 } by A4,XBOOLE_0:def 10;
assume (not (for r being Real holds (r > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < r)))))));
then consider r being Real such that A6: r > ( 0 ) and A7: (for d being Real holds (d > ( 0 ) implies (ex h being Real st (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) & (not ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < r)))));
defpred P[ Nat, real number ]
 means
(ex rr being Real st ((((rr = $2 & ( abs rr ) < ( 1 / ( $1 + 1 ) )) & rr <> ( 0 )) & ( ( rr * z ) + x0 ) in N) & (not ||. ( ( ( rr " ) * ( ( f /. ( ( rr * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < r)));
A8: (for n being (Element of ( NAT )) holds (ex h being Real st P[ n,h ]))
proof
let n being (Element of ( NAT ));
( 0 ) <= n by NAT_1:2;
then ( 0 ) < ( 1 * ( ( n + 1 ) " ) );
then ( 0 ) < ( 1 / ( n + 1 ) ) by XCMPLX_0:def 9;
then (ex h being Real st (((( abs h ) < ( 1 / ( n + 1 ) ) & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) & (not ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < r))) by A7;
hence thesis;
end;
consider h being Real_Sequence such that A9: (for n being (Element of ( NAT )) holds P[ n,( h . n ) ]) from FUNCT_2:sch 3(A8);
A10:now
let p being  real number;
assume A11: ( 0 ) < p;
consider n being (Element of ( NAT )) such that A12: ( p " ) < n by SEQ_4:3;
( ( p " ) + ( 0 ) ) < ( n + 1 ) by A12,XREAL_1:8;
then ( 1 / ( n + 1 ) ) < ( 1 / ( p " ) ) by A11,XREAL_1:76;
then A13: ( 1 / ( n + 1 ) ) < p by XCMPLX_1:216;
take n;
let m being (Element of ( NAT ));
assume n <= m;
then A14: ( n + 1 ) <= ( m + 1 ) by XREAL_1:6;
A15: P[ m,( h . m ) ] by A9;
( 0 ) <= n by NAT_1:2;
then ( 1 / ( m + 1 ) ) <= ( 1 / ( n + 1 ) ) by A14,XREAL_1:118;
then ( abs ( ( h . m ) - ( 0 ) ) ) < ( 1 / ( n + 1 ) ) by A15,XXREAL_0:2;
hence ( abs ( ( h . m ) - ( 0 ) ) ) < p by A13,XXREAL_0:2;
end;
then A16: h is  convergent by SEQ_2:def 6;
then A17: ( lim h ) = ( 0 ) by A10,SEQ_2:def 7;
(for n being (Element of ( NAT )) holds ( h . n ) <> ( 0 ))
proof
let n being (Element of ( NAT ));
P[ n,( h . n ) ] by A9;
hence thesis;
end;
then h is  non-zero by SEQ_1:5;
then reconsider h as  convergent_to_0 Real_Sequence by A16,A17,FDIFF_1:def 1;
now
let x being set;
assume x in ( rng ( ( h * z ) + c ) );
then consider n being (Element of ( NAT )) such that A18: x = ( ( ( h * z ) + c ) . n ) by NFCONT_1:6;
A19: x = ( ( ( h * z ) . n ) + ( c . n ) ) by A18,NORMSP_1:def 2
.= ( ( ( h . n ) * z ) + ( c . n ) ) by NDIFF_1:def 3
.= ( ( ( h . n ) * z ) + x0 ) by FUNCOP_1:7;
P[ n,( h . n ) ] by A9;
hence x in N by A19;
end;
then A20: ( rng ( ( h * z ) + c ) ) c= N by TARSKI:def 3;
then (( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) is  convergent & dv = ( lim ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) )) by A3,A5;
then consider n being (Element of ( NAT )) such that A21: (for m being (Element of ( NAT )) holds (n <= m implies ||. ( ( ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) . m ) - dv ) .|| < r)) by A6,NORMSP_1:def 7;
x0 in N by NFCONT_1:4;
then A22: ( rng c ) c= ( dom f ) by A1,A5,ZFMISC_1:31;
A23: P[ n,( h . n ) ] by A9;
||. ( ( ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) . n ) - dv ) .|| = ||. ( ( ( ( h " ) . n ) * ( ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) . n ) ) - dv ) .|| by NDIFF_1:def 2
.= ||. ( ( ( ( h . n ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) . n ) ) - dv ) .|| by VALUED_1:10
.= ||. ( ( ( ( h . n ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) . n ) - ( ( f /* c ) . n ) ) ) - dv ) .|| by NORMSP_1:def 3
.= ||. ( ( ( ( h . n ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) . n ) - ( f /. ( c . n ) ) ) ) - dv ) .|| by A22,FUNCT_2:109
.= ||. ( ( ( ( h . n ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) . n ) - ( f /. x0 ) ) ) - dv ) .|| by FUNCOP_1:7
.= ||. ( ( ( ( h . n ) " ) * ( ( f /. ( ( ( h * z ) + c ) . n ) ) - ( f /. x0 ) ) ) - dv ) .|| by A1,A20,FUNCT_2:109,XBOOLE_1:1
.= ||. ( ( ( ( h . n ) " ) * ( ( f /. ( ( ( h * z ) . n ) + ( c . n ) ) ) - ( f /. x0 ) ) ) - dv ) .|| by NORMSP_1:def 2
.= ||. ( ( ( ( h . n ) " ) * ( ( f /. ( ( ( h * z ) . n ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| by FUNCOP_1:7
.= ||. ( ( ( ( h . n ) " ) * ( ( f /. ( ( ( h . n ) * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| by NDIFF_1:def 3;
hence (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < e)))))) by A21,A23;
end;
now
assume A24: (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < e))))));
now
let h being  convergent_to_0 Real_Sequence;
let c;
assume that
A25: ( rng c ) = { x0 }
and
A26: ( rng ( ( h * z ) + c ) ) c= N;
A27: (h is  convergent & ( lim h ) = ( 0 )) by FDIFF_1:def 1;
x0 in N by NFCONT_1:4;
then A28: ( rng c ) c= ( dom f ) by A1,A25,ZFMISC_1:31;
A29: (for n being (Element of ( NAT )) holds ( c . n ) = x0)
proof
let n being (Element of ( NAT ));
( c . n ) in ( rng c ) by NFCONT_1:6;
hence thesis by A25,TARSKI:def 1;
end;
A30: h is  non-zero by FDIFF_1:def 1;
A31:now
let r being Real;
assume r > ( 0 );
then consider d being Real such that A32: d > ( 0 ) and A33: (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < r)) by A24;
consider n being (Element of ( NAT )) such that A34: (for m being (Element of ( NAT )) holds (n <= m implies ( abs ( ( h . m ) - ( 0 ) ) ) < d)) by A27,A32,SEQ_2:def 7;
take n;
thus (for m being (Element of ( NAT )) holds (n <= m implies ||. ( ( ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) . m ) - dv ) .|| < r))
proof
let m being (Element of ( NAT ));
A35: ( h . m ) <> ( 0 ) by A30,SEQ_1:5;
assume n <= m;
then A36: ( abs ( ( h . m ) - ( 0 ) ) ) < d by A34;
( ( ( h * z ) + c ) . m ) in ( rng ( ( h * z ) + c ) ) by NFCONT_1:6;
then ( ( ( h * z ) + c ) . m ) in N by A26;
then ( ( ( h * z ) . m ) + ( c . m ) ) in N by NORMSP_1:def 2;
then ( ( ( h . m ) * z ) + ( c . m ) ) in N by NDIFF_1:def 3;
then A37: ( ( ( h . m ) * z ) + x0 ) in N by A29;
||. ( ( ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) . m ) - dv ) .|| = ||. ( ( ( ( h " ) . m ) * ( ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) . m ) ) - dv ) .|| by NDIFF_1:def 2
.= ||. ( ( ( ( h . m ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) . m ) ) - dv ) .|| by VALUED_1:10
.= ||. ( ( ( ( h . m ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) . m ) - ( ( f /* c ) . m ) ) ) - dv ) .|| by NORMSP_1:def 3
.= ||. ( ( ( ( h . m ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) . m ) - ( f /. ( c . m ) ) ) ) - dv ) .|| by A28,FUNCT_2:109
.= ||. ( ( ( ( h . m ) " ) * ( ( ( f /* ( ( h * z ) + c ) ) . m ) - ( f /. x0 ) ) ) - dv ) .|| by A29
.= ||. ( ( ( ( h . m ) " ) * ( ( f /. ( ( ( h * z ) + c ) . m ) ) - ( f /. x0 ) ) ) - dv ) .|| by A1,A26,FUNCT_2:109,XBOOLE_1:1
.= ||. ( ( ( ( h . m ) " ) * ( ( f /. ( ( ( h * z ) . m ) + ( c . m ) ) ) - ( f /. x0 ) ) ) - dv ) .|| by NORMSP_1:def 2
.= ||. ( ( ( ( h . m ) " ) * ( ( f /. ( ( ( h * z ) . m ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| by A29
.= ||. ( ( ( ( h . m ) " ) * ( ( f /. ( ( ( h . m ) * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| by NDIFF_1:def 3;
hence thesis by A33,A36,A35,A37;
end;

end;
hence ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) is  convergent by NORMSP_1:def 6;
hence ( lim ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) ) = dv by A31,NORMSP_1:def 7;
end;
hence (for h being  convergent_to_0 Real_Sequence holds (for c holds ((( rng c ) = { x0 } & ( rng ( ( h * z ) + c ) ) c= N) implies (( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) is  convergent & dv = ( lim ( ( h " ) (#) ( ( f /* ( ( h * z ) + c ) ) - ( f /* c ) ) ) )))));
end;
hence thesis by A2;
end;
