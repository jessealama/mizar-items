environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,NAT_1,FDIFF_1,SUBSET_1,LOPBAN_1,RELAT_1,XXREAL_2,RSSPACE,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,FUNCOP_1,XREAL_0,ORDINAL1,XBOOLE_0,NDIFF_2;
notations TARSKI,XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XCMPLX_0,XXREAL_0,XREAL_0,ORDINAL1,NUMBERS,COMPLEX1,REAL_1,NAT_1,SQUARE_1,FUNCOP_1,RLVECT_1,PRE_TOPC,STRUCT_0,VALUED_0,VALUED_1,SEQ_1,SEQ_2,VFUNCT_1,NORMSP_0,NORMSP_1,RSSPACE,LOPBAN_1,NFCONT_1,FDIFF_1,NDIFF_1,CKB1,CKB2,CKB6;
definitions TARSKI,RLVECT_1,CKB1,CKB2,CKB6;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,SEQ_4,NORMSP_1,LOPBAN_1,LOPBAN_2,LOPBAN_3,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,ORDINAL1,GRCAT_1,NORMSP_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
schemes FUNCT_2;
registrations XBOOLE_0,ORDINAL1,RELSET_1,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,STRUCT_0,LOPBAN_1,LOPBAN_2,NDIFF_1,VALUED_1,FUNCT_2,NUMBERS,VALUED_0,FUNCOP_1;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,FDIFF_1,RSSPACE,VFUNCT_1,LOPBAN_3,NFCONT_1,NDIFF_1,SEQ_1,VALUED_1,NORMSP_1,RELSET_1,CKB1,CKB2,CKB6;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve S for non trivial RealNormSpace;
reserve T for non trivial RealNormSpace;
reserve f for (PartFunc of S,T);
definition
let S;
let T;
let f;
let x0 being (Point of S);
let z being (Point of S);
assume A1: f is_Gateaux_differentiable_in x0,z;
func Gateaux_diff (f,x0,z) -> (Point of T)
means
:Def4: (ex N being (Neighbourhood of x0) st (N c= ( dom f ) & (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - it ) .|| < e))))))));
existence
proof
(ex N being (Neighbourhood of x0) st (N c= ( dom f ) & (ex dv being (Point of T) st (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv ) .|| < e))))))))) by A1,CKB6:def 1;
hence thesis;
end;
uniqueness
proof
let dv1 being (Point of T),dv2 being (Point of T);
assume that
A2: (ex N1 being (Neighbourhood of x0) st (N1 c= ( dom f ) & (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N1) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv1 ) .|| < e))))))))
and
A3: (ex N2 being (Neighbourhood of x0) st (N2 c= ( dom f ) & (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N2) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv2 ) .|| < e))))))));
consider N2 being (Neighbourhood of x0) such that N2 c= ( dom f ) and A4: (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N2) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv2 ) .|| < e)))))) by A3;
consider N1 being (Neighbourhood of x0) such that N1 c= ( dom f ) and A5: (for e being Real holds (e > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for h being Real holds (((( abs h ) < d & h <> ( 0 )) & ( ( h * z ) + x0 ) in N1) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv1 ) .|| < e)))))) by A2;
now
let e being Real;
assume that
A6: e > ( 0 );
A7: ( 0 ) < ( e / 2 ) by A6,XREAL_1:215;
then consider d1 being Real such that A8: d1 > ( 0 ) and A9: (for h being Real holds (((( abs h ) < d1 & h <> ( 0 )) & ( ( h * z ) + x0 ) in N1) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv1 ) .|| < ( e / 2 ))) by A5;
consider d2 being Real such that A10: d2 > ( 0 ) and A11: (for h being Real holds (((( abs h ) < d2 & h <> ( 0 )) & ( ( h * z ) + x0 ) in N2) implies ||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv2 ) .|| < ( e / 2 ))) by A4,A7;
(ex h being Real st ((((h <> ( 0 ) & ( abs h ) < d1) & ( abs h ) < d2) & ( ( h * z ) + x0 ) in N1) & ( ( h * z ) + x0 ) in N2))
proof
set d3 = ( min (d1,d2) );
consider N0 being (Neighbourhood of x0) such that A12: (N0 c= N1 & N0 c= N2) by NDIFF_1:1;
consider g being Real such that A13: ( 0 ) < g and A14: { y where y is (Point of S): ||. ( y - x0 ) .|| < g } c= N0 by NFCONT_1:def 1;
consider n0 being (Element of ( NAT )) such that A15: ( ||. z .|| / g ) < n0 by SEQ_4:3;
set n1 = ( n0 + 1 );
set h = ( min (( 1 / ( n1 + 1 ) ),( d3 / 2 )) );
take h;
A16: h <= ( d3 / 2 ) by XXREAL_0:17;
A17: ( 0 ) < d3 by A8,A10,XXREAL_0:15;
then A18: ( 0 ) < ( d3 / 2 ) by XREAL_1:215;
A19: ( 0 ) <= n0 by NAT_1:2;
then ( 0 ) < ( 1 * ( ( 1 + n1 ) " ) );
then A20: ( 0 ) < ( 1 / ( 1 + n1 ) ) by XCMPLX_0:def 9;
hence h <> ( 0 ) by A18,XXREAL_0:15;
A21: ( 0 ) < h by A18,A20,XXREAL_0:15;
n0 <= ( n0 + 1 ) by NAT_1:11;
then ( ||. z .|| / g ) < ( n0 + 1 ) by A15,XXREAL_0:2;
then ( ( ||. z .|| / g ) * g ) < ( ( n0 + 1 ) * g ) by A13,XREAL_1:68;
then ||. z .|| < ( ( n0 + 1 ) * g ) by A13,XCMPLX_1:87;
then A22: ( ||. z .|| / ( n0 + 1 ) ) < g by A19,XREAL_1:83;
A23: ||. ( ( ( h * z ) + x0 ) - x0 ) .|| = ||. ( ( h * z ) + ( x0 - x0 ) ) .|| by RLVECT_1:def 3
.= ||. ( ( h * z ) + ( 0. S ) ) .|| by RLVECT_1:15
.= ||. ( h * z ) .|| by RLVECT_1:4
.= ( ( abs h ) * ||. z .|| ) by NORMSP_1:def 1
.= ( h * ||. z .|| ) by A21,ABSVALUE:def 1;
A24: ( d3 / 2 ) < d3 by A17,XREAL_1:216;
d3 <= d2 by XXREAL_0:17;
then ( d3 / 2 ) < d2 by A24,XXREAL_0:2;
then A25: h < d2 by A16,XXREAL_0:2;
d3 <= d1 by XXREAL_0:17;
then ( d3 / 2 ) < d1 by A24,XXREAL_0:2;
then h < d1 by A16,XXREAL_0:2;
hence (( abs h ) < d1 & ( abs h ) < d2) by A21,A25,ABSVALUE:def 1;
( 0 ) <= ||. z .|| by NORMSP_1:4;
then A26: ( h * ||. z .|| ) <= ( ( 1 / ( n1 + 1 ) ) * ||. z .|| ) by XREAL_1:64,XXREAL_0:17;
(( 0 ) <= ||. z .|| & n1 <= ( 1 + n1 )) by NAT_1:12,NORMSP_1:4;
then A27: ( ||. z .|| / ( 1 + n1 ) ) <= ( ||. z .|| / n1 ) by A19,XREAL_1:118;
( ( 1 / ( 1 + n1 ) ) * ||. z .|| ) = ( ||. z .|| / ( 1 + n1 ) ) by XCMPLX_1:99;
then ( ( 1 / ( 1 + n1 ) ) * ||. z .|| ) < g by A22,A27,XXREAL_0:2;
then ||. ( ( ( h * z ) + x0 ) - x0 ) .|| < g by A23,A26,XXREAL_0:2;
then ( ( h * z ) + x0 ) in { y where y is (Point of S): ||. ( y - x0 ) .|| < g };
then ( ( h * z ) + x0 ) in N0 by A14;
hence thesis by A12;
end;
then consider h being Real such that A28: ( abs h ) < d1 and A29: ( abs h ) < d2 and A30: h <> ( 0 ) and A31: ( ( h * z ) + x0 ) in N1 and A32: ( ( h * z ) + x0 ) in N2;
||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv1 ) .|| < ( e / 2 ) by A9,A28,A30,A31;
then A33: ||. ( dv1 - ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) ) .|| < ( e / 2 ) by CKB7:1;
||. ( ( ( h " ) * ( ( f /. ( ( h * z ) + x0 ) ) - ( f /. x0 ) ) ) - dv2 ) .|| < ( e / 2 ) by A11,A29,A30,A32;
hence ||. ( dv1 - dv2 ) .|| < e by A6,A33,CKB7:1;
end;
hence thesis by CKB7:1;
end;
end;
