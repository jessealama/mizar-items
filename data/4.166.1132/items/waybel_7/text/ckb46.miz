environ
vocabularies REWRITE1,WAYBEL_0,TARSKI,EQREL_1,XXREAL_0,LATTICES,YELLOW_0,STRUCT_0,YELLOW_1,ZFMISC_1,ORDERS_2,WELLORD2,XXREAL_2,RELAT_2,XBOOLE_0,SUBSET_1,CARD_FIL,XBOOLEAN,FINSET_1,SETFAM_1,ORDINAL2,LATTICE3,INT_2,ARYTM_0,RELAT_1,WAYBEL_6,METRIC_1,ORDINAL1,PRE_TOPC,RCOMP_1,WAYBEL_3,FUNCT_1,CANTOR_1,RLVECT_3,MSSUBFAM,WAYBEL_4,CAT_1,MCART_1,WAYBEL_7;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,RELSET_1,FUNCT_1,FINSET_1,FUNCT_2,DOMAIN_1,STRUCT_0,PRE_TOPC,TOPS_2,CANTOR_1,ORDINAL1,ORDERS_2,LATTICE3,ALG_1,YELLOW_0,WAYBEL_0,YELLOW_1,WAYBEL_1,YELLOW_3,WAYBEL_3,YELLOW_7,WAYBEL_6,WAYBEL_4,CKB16,CKB20,CKB30,CKB39,CKB40;
definitions TARSKI,YELLOW_0,WAYBEL_0,PRE_TOPC,TOPS_2,WAYBEL_1,WAYBEL_3,WAYBEL_6,XBOOLE_0,SUBSET_1,STRUCT_0,CKB16,CKB20,CKB30,CKB39,CKB40;
theorems TARSKI,ZFMISC_1,SUBSET_1,CANTOR_1,TOPS_2,SETFAM_1,ORDERS_2,YELLOW_0,WAYBEL_0,ORDERS_1,YELLOW_2,WAYBEL_1,YELLOW_1,WAYBEL_3,FINSET_1,PRE_TOPC,FUNCT_1,LATTICE3,WAYBEL_6,YELLOW_7,WAYBEL_5,WAYBEL_4,YELLOW_3,MCART_1,FUNCT_5,YELLOW_5,ORDINAL1,XBOOLE_0,XBOOLE_1,STRUCT_0,CKB1,CKB2,CKB3,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB42,CKB43,CKB44,CKB45;
schemes FUNCT_1,FINSET_1;
registrations XBOOLE_0,SUBSET_1,FINSET_1,STRUCT_0,PRE_TOPC,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,YELLOW_3,WAYBEL_3,WAYBEL_4,YELLOW_7,WAYBEL_6,RELAT_1,CKB4,CKB5,CKB7,CKB8,CKB18,CKB22,CKB31,CKB41;
constructors SETFAM_1,DOMAIN_1,TOPS_2,TEX_2,CANTOR_1,WAYBEL_1,YELLOW_3,YELLOW_4,WAYBEL_3,WAYBEL_4,WAYBEL_6,CKB16,CKB20,CKB30,CKB39,CKB40;
requirements SUBSET,BOOLE;
begin
theorem
(for T being non  empty TopSpace holds (for B being (prebasis of T) holds (for x,y being (Element of ( InclPoset (the topology of T) )) holds (x c= y implies (x << y iff (for F being (Subset of B) holds (y c= ( union F ) implies (ex G being  finite (Subset of F) st x c= ( union G )))))))))
proof
let T being non  empty TopSpace;
let B being (prebasis of T);
consider BB being (Basis of T) such that A1: BB c= ( FinMeetCl B ) by CANTOR_1:def 4;
set BT = ( BoolePoset (the carrier of T) );
set L = ( InclPoset (the topology of T) );
let x being (Element of L);
let y being (Element of L);
assume that
A2: x c= y;
A3: B c= (the topology of T) by TOPS_2:64;
hereby
assume A4: x << y;
let F being (Subset of B);
assume that
A5: y c= ( union F );
reconsider FF = F as (Subset-Family of T) by XBOOLE_1:1;
FF is  open
proof
let a being (Subset of T);
assume a in FF;
then a in B;
hence a in (the topology of T) by A3;
end;
hence (ex G being  finite (Subset of F) st x c= ( union G )) by A4,A5,WAYBEL_3:34;
end;
BT = ( InclPoset ( bool (the carrier of T) ) ) by YELLOW_1:4;
then A6: BT = RelStr (# ( bool (the carrier of T) ),( RelIncl ( bool (the carrier of T) ) ) #) by YELLOW_1:def 1;
L = RelStr (# (the topology of T),( RelIncl (the topology of T) ) #) by YELLOW_1:def 1;
then (x in (the topology of T) & y in (the topology of T));
then reconsider X = x,Y = y as (Subset of T);
assume A7: (for F being (Subset of B) holds (y c= ( union F ) implies (ex G being  finite (Subset of F) st x c= ( union G ))));
A8: (the topology of T) c= ( UniCl BB ) by CANTOR_1:def 2;
now
deffunc F(set) = ( x \ $1 );
let F being  ultra (Filter of ( BoolePoset (the carrier of T) ));
assume that
A9: x in F
and
A10: (not (ex p being (Element of T) st (p in y & p is_a_convergence_point_of F,T)));
defpred P[ set,set ]
 means
($1 in $2 & (not $2 in F));
A11:now
let p being set;
assume A12: p in y;
then p in Y;
then reconsider q = p as (Element of T);
(not q is_a_convergence_point_of F,T) by A10,A12;
then consider A being (Subset of T) such that A13: A is  open and A14: q in A and A15: (not A in F) by CKB40:def 1;
A in (the topology of T) by A13,PRE_TOPC:def 2;
then consider AY being (Subset-Family of T) such that A16: AY c= BB and A17: A = ( union AY ) by A8,CANTOR_1:def 1;
consider ay being set such that A18: q in ay and A19: ay in AY by A14,A17,TARSKI:def 4;
reconsider ay as (Subset of T) by A19;
ay in BB by A16,A19;
then consider BY being (Subset-Family of T) such that A20: BY c= B and A21: BY is  finite and A22: ay = ( Intersect BY ) by A1,CANTOR_1:def 3;
ay c= A by A17,A19,ZFMISC_1:74;
then (not ay in F) by A15,CKB11:1;
then (not BY is (Subset of F)) by A21,A22,CKB15:1;
then consider r being set such that A23: (r in BY & (not r in F)) by TARSKI:def 3;
take r;
thus (r in B & P[ p,r ]) by A18,A20,A22,A23,SETFAM_1:43;
end;
consider f being Function such that A24: (( dom f ) = y & ( rng f ) c= B) and A25: (for p being set holds (p in y implies P[ p,( f . p ) ])) from FUNCT_1:sch 5(A11);
reconsider FF = ( rng f ) as (Subset of B) by A24;
y c= ( union FF )
proof
let p being set;
assume p in y;
then (( f . p ) in FF & p in ( f . p )) by A24,A25,FUNCT_1:def 3;
hence thesis by TARSKI:def 4;
end;
then consider G being  finite (Subset of FF) such that A26: x c= ( union G ) by A7;
set gg = the (Element of G);
consider g being Function such that A27: (( dom g ) = G & (for z being set holds (z in G implies ( g . z ) = F(z)))) from FUNCT_1:sch 3;
A28: ( rng g ) c= F
proof
let a being set;
A29: F is  prime by CKB33:1;
assume a in ( rng g );
then consider b being set such that A30: b in G and A31: a = ( g . b ) by A27,FUNCT_1:def 3;
b in FF by A30;
then b in B;
then reconsider b as (Subset of T);
(ex p being set st (p in y & b = ( f . p ))) by A24,A30,FUNCT_1:def 3;
then (not b in F) by A25;
then A32: ( (the carrier of T) \ b ) in F by A29,CKB29:1;
a = ( x \ b ) by A27,A30,A31
.= ( X /\ ( b ` ) ) by SUBSET_1:13
.= ( x /\ ( (the carrier of T) \ b ) );
hence thesis by A9,A32,CKB13:1;
end;
then reconsider GG = ( rng g ) as  finite (Subset-Family of T) by A6,A27,FINSET_1:8,XBOOLE_1:1;
x <> ( Bottom ( BoolePoset (the carrier of T) ) ) by A9,CKB6:1;
then x <> ( {} ) by YELLOW_1:18;
then A33: G <> ( {} ) by A26,ZFMISC_1:2;
now
let a being set;
assume A34: a in ( Intersect GG );
now
let z being set;
assume z in G;
then (( g . z ) in GG & ( g . z ) = ( x \ z )) by A27,FUNCT_1:def 3;
then a in ( x \ z ) by A34,SETFAM_1:43;
hence (not a in z) by XBOOLE_0:def 5;
end;
then (not (ex z being set st (a in z & z in G)));
then A35: (not a in x) by A26,TARSKI:def 4;
(( g . gg ) in GG & ( g . gg ) = ( x \ gg )) by A33,A27,FUNCT_1:def 3;
then a in ( x \ gg ) by A34,SETFAM_1:43;
hence contradiction by A35;
end;
then A36: ( Intersect GG ) = ( {} ) by XBOOLE_0:def 1;
( Intersect GG ) in F by A28,CKB15:1;
then ( Bottom ( BoolePoset (the carrier of T) ) ) in F by A36,YELLOW_1:18;
hence contradiction by CKB6:1;
end;
hence thesis by A2,CKB45:1;
end;
