environ
vocabularies REWRITE1,WAYBEL_0,TARSKI,EQREL_1,XXREAL_0,LATTICES,YELLOW_0,STRUCT_0,YELLOW_1,ZFMISC_1,ORDERS_2,WELLORD2,XXREAL_2,RELAT_2,XBOOLE_0,SUBSET_1,CARD_FIL,XBOOLEAN,FINSET_1,SETFAM_1,ORDINAL2,LATTICE3,INT_2,ARYTM_0,RELAT_1,WAYBEL_6,METRIC_1,ORDINAL1,PRE_TOPC,RCOMP_1,WAYBEL_3,FUNCT_1,CANTOR_1,RLVECT_3,MSSUBFAM,WAYBEL_4,CAT_1,MCART_1,WAYBEL_7;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,RELSET_1,FUNCT_1,FINSET_1,FUNCT_2,DOMAIN_1,STRUCT_0,PRE_TOPC,TOPS_2,CANTOR_1,ORDINAL1,ORDERS_2,LATTICE3,ALG_1,YELLOW_0,WAYBEL_0,YELLOW_1,WAYBEL_1,YELLOW_3,WAYBEL_3,YELLOW_7,WAYBEL_6,WAYBEL_4,CKB16,CKB20,CKB30,CKB39,CKB40;
definitions TARSKI,YELLOW_0,WAYBEL_0,PRE_TOPC,TOPS_2,WAYBEL_1,WAYBEL_3,WAYBEL_6,XBOOLE_0,SUBSET_1,STRUCT_0,CKB16,CKB20,CKB30,CKB39,CKB40;
theorems TARSKI,ZFMISC_1,SUBSET_1,CANTOR_1,TOPS_2,SETFAM_1,ORDERS_2,YELLOW_0,WAYBEL_0,ORDERS_1,YELLOW_2,WAYBEL_1,YELLOW_1,WAYBEL_3,FINSET_1,PRE_TOPC,FUNCT_1,LATTICE3,WAYBEL_6,YELLOW_7,WAYBEL_5,WAYBEL_4,YELLOW_3,MCART_1,FUNCT_5,YELLOW_5,ORDINAL1,XBOOLE_0,XBOOLE_1,STRUCT_0,CKB1,CKB2,CKB3,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB20,CKB21,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB42,CKB43,CKB44;
schemes FUNCT_1,FINSET_1;
registrations XBOOLE_0,SUBSET_1,FINSET_1,STRUCT_0,PRE_TOPC,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,YELLOW_3,WAYBEL_3,WAYBEL_4,YELLOW_7,WAYBEL_6,RELAT_1,CKB4,CKB5,CKB7,CKB8,CKB18,CKB22,CKB31,CKB41;
constructors SETFAM_1,DOMAIN_1,TOPS_2,TEX_2,CANTOR_1,WAYBEL_1,YELLOW_3,YELLOW_4,WAYBEL_3,WAYBEL_4,WAYBEL_6,CKB16,CKB20,CKB30,CKB39,CKB40;
requirements SUBSET,BOOLE;
begin
theorem
Th34: (for T being non  empty TopSpace holds (for x,y being (Element of ( InclPoset (the topology of T) )) holds ((x c= y & (for F being  ultra (Filter of ( BoolePoset (the carrier of T) )) holds (x in F implies (ex p being (Element of T) st (p in y & p is_a_convergence_point_of F,T))))) implies x << y)))
proof
let T being non  empty TopSpace;
set B = ( BoolePoset (the carrier of T) );
let x being (Element of ( InclPoset (the topology of T) ));
let y being (Element of ( InclPoset (the topology of T) ));
assume that
A1: x c= y
and
A2: (for F being  ultra (Filter of B) holds (x in F implies (ex p being (Element of T) st (p in y & p is_a_convergence_point_of F,T))));
( InclPoset (the topology of T) ) = RelStr (# (the topology of T),( RelIncl (the topology of T) ) #) by YELLOW_1:def 1;
then x in (the topology of T);
then reconsider X = x as (Subset of T);
reconsider X as (Subset of T);
assume (not x << y);
then consider F being (Subset-Family of T) such that A3: F is  open and A4: y c= ( union F ) and A5: (not (ex G being  finite (Subset of F) st x c= ( union G ))) by WAYBEL_3:35;
set xF = { ( x \ z ) where z is (Subset of T): z in F };
set z = the (Element of F);
A6:now
assume A7: F = ( {} );
then A8: y = ( {} ) by A4,ZFMISC_1:2;
then x = y by A1;
hence contradiction by A1,A4,A5,A7,A8;
end;
then A9: z in F;
B = ( InclPoset ( bool (the carrier of T) ) ) by YELLOW_1:4;
then A10: B = RelStr (# ( bool (the carrier of T) ),( RelIncl ( bool (the carrier of T) ) ) #) by YELLOW_1:def 1;
xF c= (the carrier of B)
proof
let a being set;
assume a in xF;
then (ex z being (Subset of T) st (a = ( x \ z ) & z in F));
then a c= X;
then a c= (the carrier of T) by XBOOLE_1:1;
hence thesis by A10;
end;
then reconsider xF as (Subset of B);
set FF = ( uparrow ( fininfs xF ) );
now
defpred P[ set,set ]
 means
$1 = ( x \ $2 );
assume ( Bottom B ) in FF;
then consider a being (Element of B) such that A11: a <= ( Bottom B ) and A12: a in ( fininfs xF ) by WAYBEL_0:def 16;
consider s being  finite (Subset of xF) such that A13: a = ( "/\" (s,B) ) and  ex_inf_of s,B by A12;
reconsider t = s as (Subset of B) by XBOOLE_1:1;
A14:now
let v being set;
assume v in s;
then v in xF;
then (ex z being (Subset of T) st (v = ( x \ z ) & z in F));
hence (ex z being set st (z in F & P[ v,z ]));
end;
consider f being Function such that A15: ((( dom f ) = s & ( rng f ) c= F) & (for v being set holds (v in s implies P[ v,( f . v ) ]))) from FUNCT_1:sch 5(A14);
reconsider G = ( rng f ) as  finite (Subset of F) by A15,FINSET_1:8;
( Bottom B ) = ( {} ) by YELLOW_1:18;
then A16: a c= ( {} ) by A11,YELLOW_1:2;
A17:now
assume s = ( {} );
then a = ( Top B ) by A13;
hence contradiction by A16,YELLOW_1:19;
end;
then A18: a = ( meet t ) by A13,YELLOW_1:20;
x c= ( union G )
proof
let c being set;
assume that
A19: c in x
and
A20: (not c in ( union G ));
now
let v being set;
assume A21: v in s;
then ( f . v ) in ( rng f ) by A15,FUNCT_1:def 3;
then A22: (not c in ( f . v )) by A20,TARSKI:def 4;
v = ( x \ ( f . v ) ) by A15,A21;
hence c in v by A19,A22,XBOOLE_0:def 5;
end;
hence contradiction by A16,A17,A18,SETFAM_1:def 1;
end;
hence contradiction by A5;
end;
then FF is  proper by CKB6:1;
then consider GG being (Filter of B) such that A23: FF c= GG and A24: GG is  ultra by CKB38:1;
reconsider z as (Subset of T) by A9;
A25: xF c= FF by WAYBEL_0:62;
( x \ z ) in xF by A6;
then A26: ( x \ z ) in FF by A25;
( x \ z ) c= X;
then x in GG by A23,A26,CKB11:1;
then consider p being (Element of T) such that A27: p in y and A28: p is_a_convergence_point_of GG,T by A2,A24;
consider W being set such that A29: p in W and A30: W in F by A4,A27,TARSKI:def 4;
reconsider W as (Subset of T) by A30;
W is  open by A3,A30,TOPS_2:def 1;
then A31: W in GG by A28,A29,CKB40:def 1;
A32: xF c= FF by WAYBEL_0:62;
( x \ W ) in xF by A30;
then ( x \ W ) in FF by A32;
then (W misses ( x \ W ) & ( W /\ ( x \ W ) ) in GG) by A23,A31,CKB13:1,XBOOLE_1:79;
then ( {} ) in GG by XBOOLE_0:def 7;
then ( Bottom B ) in GG by YELLOW_1:18;
hence thesis by A24,CKB6:1;
end;
