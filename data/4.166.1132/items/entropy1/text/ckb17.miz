environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,NAT_1,REAL_1,FINSEQ_1,MATRIX_1,CARD_1,ARYTM_3,XXREAL_0,INT_1,ARYTM_1,RELAT_1,TAYLOR_1,FUNCT_1,XXREAL_1,LIMFUNC1,POWER,PARTFUN1,FDIFF_1,ORDINAL2,TARSKI,CARD_3,SEQ_1,SUPINF_2,PARTFUN3,XREAL_0,ORDINAL1,RVSUM_1,ORDINAL4,FINSEQ_2,MATRPROB,MATRIXC1,TREES_1,INCSP_1,MATRIXR1,FVSUM_1,ZFMISC_1,FUNCOP_1,ENTROPY1;
notations TARSKI,SUBSET_1,XBOOLE_0,XXREAL_0,XREAL_0,REAL_1,NAT_1,NAT_D,ORDINAL1,NUMBERS,RELAT_1,FUNCT_1,VALUED_1,SEQ_1,ZFMISC_1,PARTFUN1,FUNCOP_1,RVSUM_1,FINSEQ_1,FINSEQ_2,NEWTON,MATRIXR1,MATRIX_1,PARTFUN3,POWER,LIMFUNC1,RCOMP_1,MATRPROB,FDIFF_1,TAYLOR_1,FCONT_1,CKB10,CKB11,CKB14;
definitions TARSKI,PARTFUN3,FINSEQ_2,LIMFUNC1,RCOMP_1,VALUED_1,XCMPLX_0,TAYLOR_1,CKB11,CKB14;
theorems FUNCT_1,NAT_1,MATRIX_2,XREAL_1,NAT_2,MATRIXR1,GOBOARD1,XBOOLE_0,PROB_3,INTEGRA5,FINSEQ_1,MATRIX_1,GOBRD13,FINSEQ_2,PARTFUN3,FINSEQ_3,RVSUM_1,POWER,FDIFF_1,TREES_1,XBOOLE_1,TAYLOR_1,RELAT_1,ROLLE,FCONT_1,XCMPLX_1,INTEGRA1,XXREAL_0,ORDINAL1,MATRPROB,FUNCOP_1,PEPIN,NAT_D,PARTFUN1,VALUED_1,XXREAL_1,XXREAL_2,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB13,CKB14,CKB15,CKB16;
schemes FINSEQ_2,SEQ_1,NAT_1,RECDEF_1,FINSEQ_1,MATRIX_1;
registrations MATRPROB,RELSET_1,NAT_1,MEMBERED,ORDINAL1,XREAL_0,FCONT_3,RCOMP_1,XXREAL_0,NUMBERS,XBOOLE_0,VALUED_0,FINSEQ_1,CARD_1,XXREAL_2,FINSEQ_2,CKB12;
constructors REAL_1,NAT_D,BINOP_2,MATRIX_3,MATRIXR1,MATRLIN,MATRPROB,PARTFUN3,PARTFUN2,FDIFF_1,FCONT_1,POWER,LIMFUNC1,SIN_COS,TAYLOR_1,INTEGRA1,SEQ_1,XXREAL_2,RVSUM_1,RELSET_1,NEWTON,CKB14;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve i for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve p for (FinSequence of ( REAL ));
theorem
Th13: (p has_onlyone_value_in k implies ( Sum p ) = ( p . k ))
proof
assume that
A1: k in ( dom p )
and
A2: (for i holds ((i in ( dom p ) & i <> k) implies ( p . i ) = ( 0 )));
reconsider a = ( p . k ) as (Element of ( REAL ));
reconsider p1 = ( p | ( Seg k ) ) as (FinSequence of ( REAL )) by FINSEQ_1:18;
p1 c= p by TREES_1:def 1;
then consider p2 being FinSequence such that A3: p = ( p1 ^ p2 ) by TREES_1:1;
reconsider p2 as (FinSequence of ( REAL )) by A3,FINSEQ_1:36;
A4: ( dom p2 ) = ( Seg ( len p2 ) ) by FINSEQ_1:def 3;
1 <= k by A1,FINSEQ_3:25;
then k in ( Seg k ) by FINSEQ_1:3;
then A5: k in ( ( dom p ) /\ ( Seg k ) ) by A1,XBOOLE_0:def 4;
then A6: k in ( dom p1 ) by RELAT_1:61;
A7: (for i holds (i in ( Seg ( len p2 ) ) implies ( p2 . i ) = ( 0 )))
proof
let i;
A8: ( len p1 ) <= ( ( len p1 ) + i ) by NAT_1:12;
A9: k <= ( len p1 ) by A6,FINSEQ_3:25;
assume i in ( Seg ( len p2 ) );
then A10: i in ( dom p2 ) by FINSEQ_1:def 3;
then ( 0 ) <> i by FINSEQ_3:25;
then ( len p1 ) <> ( ( len p1 ) + i );
then A11: k <> ( ( len p1 ) + i ) by A9,A8,XXREAL_0:1;
thus ( p2 . i ) = ( p . ( ( len p1 ) + i ) ) by A3,A10,FINSEQ_1:def 7
.= ( 0 ) by A2,A3,A10,A11,FINSEQ_1:28;
end;
A12:now
let j being Nat;
assume A13: j in ( dom p2 );
hence ( p2 . j ) = ( 0 ) by A7,A4
.= ( ( ( len p2 ) |-> ( 0 ) ) . j ) by A4,A13,FINSEQ_2:57;
end;
p1 <> ( {} ) by A5,RELAT_1:38,RELAT_1:61;
then ( len p1 ) <> ( 0 );
then consider p3 being (FinSequence of ( REAL )),x being (Element of ( REAL )) such that A14: p1 = ( p3 ^ <* x *> ) by FINSEQ_2:19;
k <= ( len p ) by A1,FINSEQ_3:25;
then A15: k = ( len p1 ) by FINSEQ_1:17
.= ( ( len p3 ) + ( len <* x *> ) ) by A14,FINSEQ_1:22
.= ( ( len p3 ) + 1 ) by FINSEQ_1:39;
then A16: x = ( p1 . k ) by A14,FINSEQ_1:42
.= a by A3,A6,FINSEQ_1:def 7;
A17: ( dom p3 ) = ( Seg ( len p3 ) ) by FINSEQ_1:def 3;
A18: (for i holds (i in ( Seg ( len p3 ) ) implies ( p3 . i ) = ( 0 )))
proof
let i;
assume A19: i in ( Seg ( len p3 ) );
then i <= ( len p3 ) by FINSEQ_1:1;
then A20: i <> k by A15,NAT_1:13;
A21: i in ( dom p3 ) by A19,FINSEQ_1:def 3;
then A22: i in ( dom p1 ) by A14,FINSEQ_2:15;
thus ( p3 . i ) = ( p1 . i ) by A14,A21,FINSEQ_1:def 7
.= ( p . i ) by A3,A22,FINSEQ_1:def 7
.= ( 0 ) by A2,A3,A20,A22,FINSEQ_2:15;
end;
A23:now
let j being Nat;
assume A24: j in ( dom p3 );
hence ( p3 . j ) = ( 0 ) by A18,A17
.= ( ( ( len p3 ) |-> ( 0 ) ) . j ) by A17,A24,FINSEQ_2:57;
end;
( len ( ( len p3 ) |-> ( 0 ) ) ) = ( len p3 ) by CARD_1:def 7;
then A25: p3 = ( ( len p3 ) |-> ( 0 ) ) by A23,FINSEQ_2:9;
( len ( ( len p2 ) |-> ( 0 ) ) ) = ( len p2 ) by CARD_1:def 7;
then p2 = ( ( len p2 ) |-> ( 0 ) ) by A12,FINSEQ_2:9;
then ( Sum p ) = ( ( Sum ( p3 ^ <* x *> ) ) + ( Sum ( ( len p2 ) |-> ( 0 ) ) ) ) by A3,A14,RVSUM_1:75
.= ( ( Sum ( p3 ^ <* x *> ) ) + ( 0 ) ) by RVSUM_1:81
.= ( ( Sum ( ( len p3 ) |-> ( 0 ) ) ) + x ) by A25,RVSUM_1:74
.= ( ( 0 ) + a ) by A16,RVSUM_1:81
.= ( p . k );
hence thesis;
end;
