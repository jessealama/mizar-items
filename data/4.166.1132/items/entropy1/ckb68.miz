environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,NAT_1,REAL_1,FINSEQ_1,MATRIX_1,CARD_1,ARYTM_3,XXREAL_0,INT_1,ARYTM_1,RELAT_1,TAYLOR_1,FUNCT_1,XXREAL_1,LIMFUNC1,POWER,PARTFUN1,FDIFF_1,ORDINAL2,TARSKI,CARD_3,SEQ_1,SUPINF_2,PARTFUN3,XREAL_0,ORDINAL1,RVSUM_1,ORDINAL4,FINSEQ_2,MATRPROB,MATRIXC1,TREES_1,INCSP_1,MATRIXR1,FVSUM_1,ZFMISC_1,FUNCOP_1,ENTROPY1;
notations TARSKI,SUBSET_1,XBOOLE_0,XXREAL_0,XREAL_0,REAL_1,NAT_1,NAT_D,ORDINAL1,NUMBERS,RELAT_1,FUNCT_1,VALUED_1,SEQ_1,ZFMISC_1,PARTFUN1,FUNCOP_1,RVSUM_1,FINSEQ_1,FINSEQ_2,NEWTON,MATRIXR1,MATRIX_1,PARTFUN3,POWER,LIMFUNC1,RCOMP_1,MATRPROB,FDIFF_1,TAYLOR_1,FCONT_1,CKB10,CKB11,CKB14,CKB31,CKB34,CKB49,CKB58,CKB59,CKB66;
definitions TARSKI,PARTFUN3,FINSEQ_2,LIMFUNC1,RCOMP_1,VALUED_1,XCMPLX_0,TAYLOR_1,CKB11,CKB14,CKB31,CKB34,CKB49,CKB58,CKB59,CKB66;
theorems FUNCT_1,NAT_1,MATRIX_2,XREAL_1,NAT_2,MATRIXR1,GOBOARD1,XBOOLE_0,PROB_3,INTEGRA5,FINSEQ_1,MATRIX_1,GOBRD13,FINSEQ_2,PARTFUN3,FINSEQ_3,RVSUM_1,POWER,FDIFF_1,TREES_1,XBOOLE_1,TAYLOR_1,RELAT_1,ROLLE,FCONT_1,XCMPLX_1,INTEGRA1,XXREAL_0,ORDINAL1,MATRPROB,FUNCOP_1,PEPIN,NAT_D,PARTFUN1,VALUED_1,XXREAL_1,XXREAL_2,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB20,CKB21,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67;
schemes FINSEQ_2,SEQ_1,NAT_1,RECDEF_1,FINSEQ_1,MATRIX_1;
registrations MATRPROB,RELSET_1,NAT_1,MEMBERED,ORDINAL1,XREAL_0,FCONT_3,RCOMP_1,XXREAL_0,NUMBERS,XBOOLE_0,VALUED_0,FINSEQ_1,CARD_1,XXREAL_2,FINSEQ_2,CKB12,CKB19,CKB22,CKB23,CKB32;
constructors REAL_1,NAT_D,BINOP_2,MATRIX_3,MATRIXR1,MATRLIN,MATRPROB,PARTFUN3,PARTFUN2,FDIFF_1,FCONT_1,POWER,LIMFUNC1,SIN_COS,TAYLOR_1,INTEGRA1,SEQ_1,XXREAL_2,RVSUM_1,RELSET_1,NEWTON,CKB14,CKB31,CKB34,CKB49,CKB58,CKB59,CKB66;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
theorem
Th54: (for M being  m-nonnegative (Matrix of ( REAL )) holds (for M1 being (Matrix of ( REAL )) holds (M1 = ( Infor_FinSeq_of M ) iff ((( len M1 ) = ( len M ) & ( width M1 ) = ( width M )) & (for i holds (for j holds ([ i,j ] in ( Indices M1 ) implies ( M1 * (i,j) ) = ( ( M * (i,j) ) * ( log (2,( M * (i,j) )) ) ))))))))
proof
let M being  m-nonnegative (Matrix of ( REAL ));
let M1 being (Matrix of ( REAL ));
hereby
assume A1: M1 = ( Infor_FinSeq_of M );
then A2: ( width M1 ) = ( width M ) by CKB66:def 1;
A3: ( len M1 ) = ( len M ) by A1,CKB66:def 1;
now
let i;
let j;
assume that
A4: [ i,j ] in ( Indices M1 );
A5: j in ( Seg ( width M1 ) ) by A4,MATRPROB:12;
i in ( Seg ( len M1 ) ) by A4,MATRPROB:12;
then A6: i in ( dom M ) by A3,FINSEQ_1:def 3;
then reconsider p = ( Line (M,i) ) as  nonnegative (FinSequence of ( REAL )) by CKB26:1;
A7: ( len p ) = ( width M ) by MATRIX_1:def 7;
( len p ) = ( len ( Infor_FinSeq_of p ) ) by CKB60:1;
then A8: j in ( dom ( Infor_FinSeq_of p ) ) by A2,A5,A7,FINSEQ_1:def 3;
A9: ( p . j ) = ( M * (i,j) ) by A2,A5,MATRIX_1:def 7;
thus ( M1 * (i,j) ) = ( ( Line (M1,i) ) . j ) by A5,MATRIX_1:def 7
.= ( ( Infor_FinSeq_of p ) . j ) by A1,A6,CKB67:1
.= ( ( M * (i,j) ) * ( log (2,( M * (i,j) )) ) ) by A9,A8,CKB60:1;
end;
hence ((( len M1 ) = ( len M ) & ( width M1 ) = ( width M )) & (for i holds (for j holds ([ i,j ] in ( Indices M1 ) implies ( M1 * (i,j) ) = ( ( M * (i,j) ) * ( log (2,( M * (i,j) )) ) ))))) by A1,CKB66:def 1;
end;
assume that
A10: ( len M1 ) = ( len M )
and
A11: ( width M1 ) = ( width M )
and
A12: (for i holds (for j holds ([ i,j ] in ( Indices M1 ) implies ( M1 * (i,j) ) = ( ( M * (i,j) ) * ( log (2,( M * (i,j) )) ) ))));
A13: ( dom M1 ) = ( dom M ) by A10,FINSEQ_3:29;
(for k holds (k in ( dom M1 ) implies ( M1 . k ) = ( mlt (( Line (M,k) ),( FinSeq_log (2,( Line (M,k) )) )) )))
proof
let k;
assume that
A14: k in ( dom M1 );
A15: ( len ( M1 . k ) ) = ( width M1 ) by A14,GOBRD13:3;
reconsider p = ( Line (M,k) ) as  nonnegative (FinSequence of ( REAL )) by A13,A14,CKB26:1;
A16: ( len p ) = ( width M ) by MATRIX_1:def 7;
A17: ( len ( FinSeq_log (2,p) ) ) = ( len p ) by CKB58:def 1;
then ( len ( mlt (p,( FinSeq_log (2,p) )) ) ) = ( len p ) by MATRPROB:30;
then A18: ( dom ( M1 . k ) ) = ( dom ( mlt (p,( FinSeq_log (2,p) )) ) ) by A11,A16,A15,FINSEQ_3:29;
A19: k in ( Seg ( len M ) ) by A10,A14,FINSEQ_1:def 3;
now
let j being Nat;
assume that
A20: j in ( dom ( M1 . k ) );
A21: j in ( Seg ( width M ) ) by A11,A15,A20,FINSEQ_1:def 3;
then A22: ( p . j ) = ( M * (k,j) ) by MATRIX_1:def 7;
A23: [ k,j ] in ( Indices M ) by A19,A21,MATRPROB:12;
A24: ( ( mlt (p,( FinSeq_log (2,p) )) ) . j ) = ( ( p . j ) * ( ( FinSeq_log (2,p) ) . j ) ) by RVSUM_1:59
.= ( ( M * (k,j) ) * ( ( FinSeq_log (2,p) ) . j ) ) by A21,MATRIX_1:def 7;
A25: j in ( dom ( FinSeq_log (2,p) ) ) by A16,A17,A21,FINSEQ_1:def 3;
A26: j in ( NAT ) by ORDINAL1:def 12;
A27: [ k,j ] in ( Indices M1 ) by A14,A20,MATRPROB:13;
then A28: ( ( M1 . k ) . j ) = ( M1 * (k,j) ) by A26,MATRPROB:14
.= ( ( M * (k,j) ) * ( log (2,( M * (k,j) )) ) ) by A12,A26,A27;
per cases  by A26,A23,MATRPROB:def 6;
suppose ( M * (k,j) ) = ( 0 );

hence ( ( M1 . k ) . j ) = ( ( mlt (p,( FinSeq_log (2,p) )) ) . j ) by A28,A24;
end;
suppose ( M * (k,j) ) > ( 0 );

hence ( ( mlt (p,( FinSeq_log (2,p) )) ) . j ) = ( ( M1 . k ) . j ) by A25,A28,A22,A24,CKB58:def 1;
end;
end;
hence thesis by A18,FINSEQ_1:13;
end;
hence thesis by A10,A11,CKB66:def 1;
end;
