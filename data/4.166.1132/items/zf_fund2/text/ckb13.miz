environ
vocabularies NUMBERS,ZF_LANG,XBOOLE_0,SUBSET_1,FUNCT_1,ARYTM_3,CARD_1,ZF_MODEL,TARSKI,ORDINAL1,BVFUNC_2,XBOOLEAN,ZFMISC_1,CLASSES2,ZF_REFLE,CARD_3,RELAT_1,ORDINAL2,ZF_LANG1,ZFMODEL1,XXREAL_0,REALSET1,ZF_FUND1,FUNCT_2,ORDINAL4,NAT_1,ZF_FUND2;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,NAT_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,ORDINAL1,ZF_LANG,ZF_MODEL,ZFMODEL1,ORDINAL2,CARD_3,ZF_LANG1,CLASSES2,ORDINAL4,ZF_REFLE,ZF_FUND1,XXREAL_0,CKB1,CKB2;
definitions TARSKI,ORDINAL1,XBOOLE_0,CKB1,CKB2;
theorems TARSKI,NAT_1,ENUMSET1,FUNCT_1,FUNCT_2,ORDINAL1,ORDINAL2,CARD_1,CARD_2,ZF_MODEL,ZFMODEL1,ZFMODEL2,ZF_LANG1,CARD_3,ZF_REFLE,ZFREFLE1,CLASSES2,ZFMISC_1,ZF_FUND1,GRFUNC_1,RELAT_1,CLASSES1,RELSET_1,XBOOLE_0,XBOOLE_1,XREAL_1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12;
schemes ZF_REFLE,NAT_1;
registrations ORDINAL1,RELSET_1,FINSET_1,XREAL_0,CARD_1,CLASSES2,ZF_LANG,ORDINAL4,FUNCT_1,ZF_FUND1,ZF_LANG1;
constructors PARTFUN1,WELLORD2,DOMAIN_1,XXREAL_0,XREAL_0,NAT_1,CLASSES1,ZFMODEL1,ZF_LANG1,ZF_REFLE,ZF_FUND1,ORDINAL4,RELSET_1,ZF_MODEL,CKB1,CKB2;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve H for ZF-formula;
reserve u for set;
reserve u1 for set;
reserve u2 for set;
reserve i for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve X for set;
reserve W for Universe;
reserve w for (Element of W);
reserve a for (Ordinal of W);
reserve b for (Ordinal of W);
reserve L for (DOMAIN-Sequence of W);
theorem
(((((( omega ) in W & (for a holds (for b holds (a in b implies ( L . a ) c= ( L . b ))))) & (for a holds ((a <> ( {} ) & a is  limit_ordinal) implies ( L . a ) = ( Union ( L | a ) )))) & (for a holds (( L . a ) in ( Union L ) & ( L . a ) is  epsilon-transitive))) & ( Union L ) is  closed_wrt_A1-A7) implies ( Union L ) is  being_a_model_of_ZF)
proof
assume that
A1: ( omega ) in W
and
A2: (for a holds (for b holds (a in b implies ( L . a ) c= ( L . b ))))
and
A3: (for a holds ((a <> ( {} ) & a is  limit_ordinal) implies ( L . a ) = ( Union ( L | a ) )))
and
A4: (for a holds (( L . a ) in ( Union L ) & ( L . a ) is  epsilon-transitive))
and
A5: ( Union L ) is  closed_wrt_A1-A7;
A6: ( Union L ) is  epsilon-transitive
proof
let X;
assume X in ( Union L );
then consider u such that A7: u in ( dom L ) and A8: X in ( L . u ) by CKB4:1;
reconsider u as Ordinal by A7;
u in ( On W ) by A7,ZF_REFLE:def 2;
then reconsider u as (Ordinal of W) by ZF_REFLE:7;
( L . u ) is  epsilon-transitive by A4;
then A9: X c= ( L . u ) by A8,ORDINAL1:def 2;
let u1;
A10: ( L . u ) c= ( Union L ) by ZF_REFLE:16;
assume u1 in X;
then u1 in ( L . u ) by A9;
hence thesis by A10;
end;
then ( Union L ) is  predicatively_closed by A5,CKB12:1;
then A11: (( Union L ) |= ( the_axiom_of_power_sets ) & (for H holds ({ ( x. ( 0 ) ),( x. 1 ),( x. 2 ) } misses ( Free H ) implies ( Union L ) |= ( the_axiom_of_substitution_for H )))) by A1,A2,A3,A4,CKB5:1,CKB9:1;
(for u holds (u in ( Union L ) implies ( union u ) in ( Union L ))) by A5,ZF_FUND1:2;
then A12: ( Union L ) |= ( the_axiom_of_unions ) by A6,ZFMODEL1:5;
(for u1 holds (for u2 holds ((u1 in ( Union L ) & u2 in ( Union L )) implies { u1,u2 } in ( Union L )))) by A5,ZF_FUND1:6;
then A13: ( Union L ) |= ( the_axiom_of_pairs ) by A6,ZFMODEL1:3;
(ex u st ((u in ( Union L ) & u <> ( {} )) & (for u1 holds (u1 in u implies (ex u2 st (u1 c< u2 & u2 in u))))))
proof
A14: ( card ( omega ) ) in ( card W ) by A1,CLASSES2:1;
deffunc G(set,set) = ( inf { w: ( L . $2 ) in ( L . w ) } );
consider ksi being Function such that A15: ((( dom ksi ) = ( NAT ) & ( ksi . ( 0 ) ) = ( 0-element_of W )) & (for i being Nat holds ( ksi . ( i + 1 ) ) = G(i,( ksi . i )))) from NAT_1:sch 11;
( card ( rng ksi ) ) c= ( card ( NAT ) ) by A15,CARD_1:12;
then A16: ( card ( rng ksi ) ) in ( card W ) by A14,ORDINAL1:12;
set lambda = ( sup ( rng ksi ) );
A17: (for i holds (( ksi . i ) in ( On W ) & ( ksi . i ) is (Ordinal of W)))
proof
defpred P[ (Element of ( NAT )) ]
 means
(( ksi . $1 ) in ( On W ) & ( ksi . $1 ) is (Ordinal of W));
A18:now
let i;
assume P[ i ];
then reconsider a = ( ksi . i ) as (Ordinal of W);
A19: ( ksi . ( i + 1 ) ) = ( inf { w: ( L . a ) in ( L . w ) } ) by A15;
consider u such that A20: u in ( dom L ) and A21: ( L . a ) in ( L . u ) by A4,CKB4:1;
( dom L ) = ( On W ) by ZF_REFLE:def 2;
then reconsider b = u as (Ordinal of W) by A20,ZF_REFLE:7;
b in { w: ( L . a ) in ( L . w ) } by A21;
then ( inf { w: ( L . a ) in ( L . w ) } ) c= b by ORDINAL2:14;
then ( ksi . ( i + 1 ) ) in W by A19,CLASSES1:def 1;
hence P[ ( i + 1 ) ] by A19,ORDINAL1:def 9;
end;
A22: P[ ( 0 ) ] by A15,ZF_REFLE:7;
thus P[ i ] from NAT_1:sch 1(A22,A18);
end;
( rng ksi ) c= W
proof
let a being set;
assume a in ( rng ksi );
then consider i being set such that A23: i in ( dom ksi ) and A24: a = ( ksi . i ) by FUNCT_1:def 3;
reconsider i as (Element of ( NAT )) by A15,A23;
( ksi . i ) in ( On W ) by A17;
hence thesis by A24,ORDINAL1:def 9;
end;
then ( rng ksi ) in W by A16,CLASSES1:1;
then reconsider l = lambda as (Ordinal of W) by ZF_REFLE:19;
A25: (for i holds ( L . ( ksi . i ) ) in ( L . ( ksi . ( i + 1 ) ) ))
proof
let i;
reconsider a = ( ksi . i ) as (Ordinal of W) by A17;
consider b being set such that A26: b in ( dom L ) and A27: ( L . a ) in ( L . b ) by A4,CKB4:1;
b in ( On W ) by A26,ZF_REFLE:def 2;
then reconsider b as (Ordinal of W) by ZF_REFLE:7;
A28: b in { w: ( L . a ) in ( L . w ) } by A27;
( ksi . ( i + 1 ) ) = ( inf { w: ( L . ( ksi . i ) ) in ( L . w ) } ) by A15;
then ( ksi . ( i + 1 ) ) in { w: ( L . ( ksi . i ) ) in ( L . w ) } by A28,ORDINAL2:17;
then (ex w st (w = ( ksi . ( i + 1 ) ) & ( L . a ) in ( L . w )));
hence thesis;
end;
A29: (for i holds ( ksi . i ) in ( ksi . ( i + 1 ) ))
proof
let i;
reconsider b = ( ksi . ( i + 1 ) ) as (Ordinal of W) by A17;
reconsider a = ( ksi . i ) as (Ordinal of W) by A17;
assume (not ( ksi . i ) in ( ksi . ( i + 1 ) ));
then (b = a or b in a) by ORDINAL1:14;
then ( L . b ) c= ( L . a ) by A2;
hence contradiction by A25,ORDINAL1:5;
end;
A30: l c= ( union l )
proof
let u1 being Ordinal;
assume u1 in l;
then consider u2 being Ordinal such that A31: u2 in ( rng ksi ) and A32: u1 c= u2 by ORDINAL2:21;
consider i being set such that A33: i in ( dom ksi ) and A34: u2 = ( ksi . i ) by A31,FUNCT_1:def 3;
reconsider i as (Element of ( NAT )) by A15,A33;
reconsider u3 = ( ksi . ( i + 1 ) ) as (Ordinal of W) by A17;
u3 in ( rng ksi ) by A15,FUNCT_1:def 3;
then A35: u3 in l by ORDINAL2:19;
u1 in u3 by A29,A32,A34,ORDINAL1:12;
hence thesis by A35,TARSKI:def 4;
end;
( union l ) c= l by ORDINAL2:5;
then l = ( union l ) by A30,XBOOLE_0:def 10;
then A36: l is  limit_ordinal by ORDINAL1:def 6;
A37: ( union { ( L . ( ksi . n ) ): (not contradiction) } ) = ( L . l )
proof
set A = { ( L . ( ksi . n ) ): (not contradiction) };
thus ( union A ) c= ( L . l )
proof
let u1;
assume u1 in ( union A );
then consider X such that A38: u1 in X and A39: X in A by TARSKI:def 4;
consider n such that A40: X = ( L . ( ksi . n ) ) by A39;
reconsider a = ( ksi . n ) as (Ordinal of W) by A17;
a in ( rng ksi ) by A15,FUNCT_1:def 3;
then ( L . a ) c= ( L . l ) by A2,ORDINAL2:19;
hence thesis by A38,A40;
end;

( 0-element_of W ) in ( rng ksi ) by A15,FUNCT_1:def 3;
then l <> ( {} ) by ORDINAL2:19;
then A41: ( L . l ) = ( Union ( L | l ) ) by A3,A36;
let u1;
assume u1 in ( L . l );
then consider u2 such that A42: u2 in ( dom ( L | l ) ) and A43: u1 in ( ( L | l ) . u2 ) by A41,CKB4:1;
A44: u1 in ( L . u2 ) by A42,A43,FUNCT_1:47;
A45: u2 in ( ( dom L ) /\ l ) by A42,RELAT_1:61;
then A46: u2 in l by XBOOLE_0:def 4;
u2 in ( dom L ) by A45,XBOOLE_0:def 4;
then u2 in ( On W ) by ZF_REFLE:def 2;
then reconsider u2 as (Ordinal of W) by ZF_REFLE:7;
consider b being Ordinal such that A47: b in ( rng ksi ) and A48: u2 c= b by A46,ORDINAL2:21;
consider i being set such that A49: i in ( dom ksi ) and A50: b = ( ksi . i ) by A47,FUNCT_1:def 3;
reconsider i as (Element of ( NAT )) by A15,A49;
b = ( ksi . i ) by A50;
then reconsider b as (Ordinal of W) by A17;
(u2 c< b iff (u2 c= b & u2 <> b)) by XBOOLE_0:def 8;
then A51: ( L . u2 ) c= ( L . b ) by A2,A48,ORDINAL1:11;
( L . ( ksi . i ) ) in A;
hence thesis by A44,A50,A51,TARSKI:def 4;
end;
take u = ( L . lambda );
( L . l ) in ( Union L ) by A4;
hence (u in ( Union L ) & u <> ( {} ));
let u1;
assume u1 in u;
then consider u2 such that A52: (u1 in u2 & u2 in { ( L . ( ksi . n ) ): (not contradiction) }) by A37,TARSKI:def 4;
take u2;
consider i such that A53: u2 = ( L . ( ksi . i ) ) by A52;
A54: u1 <> u2 by A52;
reconsider a = ( ksi . i ) as (Ordinal of W) by A17;
( L . a ) is  epsilon-transitive by A4;
then u1 c= u2 by A52,A53,ORDINAL1:def 2;
hence u1 c< u2 by A54,XBOOLE_0:def 8;
A55: ( L . ( ksi . ( i + 1 ) ) ) in { ( L . ( ksi . n ) ): (not contradiction) };
( L . ( ksi . i ) ) in ( L . ( ksi . ( i + 1 ) ) ) by A25;
hence u2 in u by A37,A53,A55,TARSKI:def 4;
end;
then ( Union L ) |= ( the_axiom_of_infinity ) by A6,ZFMODEL1:7;
hence thesis by A6,A13,A12,A11,ZF_MODEL:def 12;
end;
