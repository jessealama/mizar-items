environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSUB_1,BINOP_1,FUNCT_1,NAT_1,FINSEQ_1,FINSEQ_2,ARYTM_3,XXREAL_0,SETWISEO,TARSKI,RELAT_1,FINSEQOP,FUNCOP_1,FUNCT_4,ORDINAL4,FINSOP_1,CARD_1,SETWOP_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,RELSET_1,FUNCT_1,FINSEQ_1,FINSUB_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,SETWISEO,FINSEQ_2,FINSEQOP,FINSOP_1,XXREAL_0;
definitions BINOP_1,XBOOLE_0,RELAT_1;
theorems TARSKI,ENUMSET1,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,FUNCOP_1,FINSEQ_1,FINSUB_1,BINOP_1,SETWISEO,FINSEQ_2,WELLORD2,CARD_1,FINSEQOP,RELAT_1,FUNCT_4,FINSOP_1,XBOOLE_0,XBOOLE_1,XREAL_1,ORDINAL1,CKB1,CKB2;
schemes NAT_1,SETWISEO,FINSEQ_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSUB_1,XREAL_0,FINSEQ_1,FINSEQ_2,NAT_1,CARD_1;
constructors PARTFUN1,WELLORD2,BINOP_1,SETWISEO,XXREAL_0,XREAL_0,NAT_1,FINSEQOP,FINSOP_1,RELSET_1;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve C for non  empty set;
reserve C9 for non  empty set;
reserve D for non  empty set;
reserve c for (Element of C);
reserve c9 for (Element of C);
reserve B for (Element of ( Fin C ));
reserve B9 for (Element of ( Fin C ));
reserve e for (Element of D);
reserve F for (BinOp of D);
reserve f for (Function of C,D);
reserve g for (Function of C9,D);
theorem
Th4: (((F is  commutative  associative & (B <> ( {} ) or F is  having_a_unity)) & (not c in B)) implies ( F $$ (( B \/ {. c .} ),f) ) = ( F . (( F $$ (B,f) ),( f . c )) ))
proof
assume that
A1: F is  commutative  associative
and
A2: (B <> ( {} ) or F is  having_a_unity)
and
A3: (not c in B);
per cases ;
suppose A4: B = ( {} );

then B = ( {}. C );
then ( F $$ (B,f) ) = ( the_unity_wrt F ) by A1,A2,SETWISEO:31;
hence ( F . (( F $$ (B,f) ),( f . c )) ) = ( f . c ) by A2,A4,SETWISEO:15
.= ( F $$ (( B \/ {. c .} ),f) ) by A1,A4,SETWISEO:17;
end;
suppose A5: B <> ( {} );

consider g9 being (Function of ( Fin C ),D) such that A6: ( F $$ (B,f) ) = ( g9 . B ) and (for e holds (e is_a_unity_wrt F implies ( g9 . ( {} ) ) = e)) and A7: (for c9 holds ( g9 . { c9 } ) = ( f . c9 )) and A8: (for B9 holds ((B9 c= B & B9 <> ( {} )) implies (for c9 holds (c9 in ( B \ B9 ) implies ( g9 . ( B9 \/ { c9 } ) ) = ( F . (( g9 . B9 ),( f . c9 )) ))))) by A1,A2,SETWISEO:def 3;
consider g being (Function of ( Fin C ),D) such that A9: ( F $$ (( B \/ {. c .} ),f) ) = ( g . ( B \/ { c } ) ) and (for e holds (e is_a_unity_wrt F implies ( g . ( {} ) ) = e)) and A10: (for c9 holds ( g . { c9 } ) = ( f . c9 )) and A11: (for B9 holds ((B9 c= ( B \/ { c } ) & B9 <> ( {} )) implies (for c9 holds (c9 in ( ( B \/ { c } ) \ B9 ) implies ( g . ( B9 \/ { c9 } ) ) = ( F . (( g . B9 ),( f . c9 )) ))))) by A1,SETWISEO:def 3;
defpred X[ set ]
 means
(($1 <> ( {} ) & $1 c= B) implies ( g . $1 ) = ( g9 . $1 ));
A12: (for B9 being (Element of ( Fin C )) holds (for b being (Element of C) holds ((X[ B9 ] & (not b in B9)) implies X[ ( B9 \/ { b } ) ])))
proof
A13: B c= ( B \/ { c } ) by XBOOLE_1:7;
let B9;
let c9;
assume that
A14: ((B9 <> ( {} ) & B9 c= B) implies ( g . B9 ) = ( g9 . B9 ))
and
A15: (not c9 in B9)
and
( B9 \/ { c9 } ) <> ( {} )
and
A16: ( B9 \/ { c9 } ) c= B;
A17: c9 in B by A16,SETWISEO:5;
then A18: c9 in ( B \ B9 ) by A15,XBOOLE_0:def 5;
c9 in ( B \/ { c } ) by A17,XBOOLE_0:def 3;
then A19: c9 in ( ( B \/ { c } ) \ B9 ) by A15,XBOOLE_0:def 5;
B9 c= B by A16,XBOOLE_1:11;
then A20: B9 c= ( B \/ { c } ) by A13,XBOOLE_1:1;
per cases ;
suppose A21: B9 = ( {} );

then ( g . ( B9 \/ { c9 } ) ) = ( f . c9 ) by A10;
hence thesis by A7,A21;
end;
suppose A22: B9 <> ( {} );

hence ( g . ( B9 \/ { c9 } ) ) = ( F . (( g9 . B9 ),( f . c9 )) ) by A11,A14,A16,A20,A19,XBOOLE_1:11
.= ( g9 . ( B9 \/ { c9 } ) ) by A8,A16,A18,A22,XBOOLE_1:11;
end;
end;
A23: X[ ( {}. C ) ];
A24: (for B9 holds X[ B9 ]) from SETWISEO:sch 2(A23,A12);
c in ( B \/ { c } ) by SETWISEO:4;
then c in ( ( B \/ { c } ) \ B ) by A3,XBOOLE_0:def 5;
hence ( F $$ (( B \/ {. c .} ),f) ) = ( F . (( g . B ),( f . c )) ) by A5,A9,A11,XBOOLE_1:7
.= ( F . (( F $$ (B,f) ),( f . c )) ) by A5,A6,A24;
end;
end;
