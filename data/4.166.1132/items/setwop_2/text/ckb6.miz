environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSUB_1,BINOP_1,FUNCT_1,NAT_1,FINSEQ_1,FINSEQ_2,ARYTM_3,XXREAL_0,SETWISEO,TARSKI,RELAT_1,FINSEQOP,FUNCOP_1,FUNCT_4,ORDINAL4,FINSOP_1,CARD_1,SETWOP_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,RELSET_1,FUNCT_1,FINSEQ_1,FINSUB_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,SETWISEO,FINSEQ_2,FINSEQOP,FINSOP_1,XXREAL_0;
definitions BINOP_1,XBOOLE_0,RELAT_1;
theorems TARSKI,ENUMSET1,ZFMISC_1,NAT_1,FUNCT_1,FUNCT_2,FUNCOP_1,FINSEQ_1,FINSUB_1,BINOP_1,SETWISEO,FINSEQ_2,WELLORD2,CARD_1,FINSEQOP,RELAT_1,FUNCT_4,FINSOP_1,XBOOLE_0,XBOOLE_1,XREAL_1,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5;
schemes NAT_1,SETWISEO,FINSEQ_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSUB_1,XREAL_0,FINSEQ_1,FINSEQ_2,NAT_1,CARD_1;
constructors PARTFUN1,WELLORD2,BINOP_1,SETWISEO,XXREAL_0,XREAL_0,NAT_1,FINSEQOP,FINSOP_1,RELSET_1;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve C for non  empty set;
reserve C9 for non  empty set;
reserve D for non  empty set;
reserve B for (Element of ( Fin C ));
reserve A for (Element of ( Fin C9 ));
reserve F for (BinOp of D);
reserve f for (Function of C,D);
reserve g for (Function of C9,D);
reserve s for Function;
theorem
Th7: (((F is  commutative  associative & (A <> ( {} ) or F is  having_a_unity)) & (ex s st (((( dom s ) = A & ( rng s ) = B) & s is  one-to-one) & ( g | A ) = ( f * s )))) implies ( F $$ (A,g) ) = ( F $$ (B,f) ))
proof
defpred X[ (Element of ( Fin C9 )) ]
 means
(($1 <> ( {} ) or F is  having_a_unity) implies (for B holds ((ex s st (((( dom s ) = $1 & ( rng s ) = B) & s is  one-to-one) & ( g | $1 ) = ( f * s ))) implies ( F $$ ($1,g) ) = ( F $$ (B,f) ))));
assume A1: F is  commutative  associative;
A2: (for B9 being (Element of ( Fin C9 )) holds (for b being (Element of C9) holds ((X[ B9 ] & (not b in B9)) implies X[ ( B9 \/ {. b .} ) ])))
proof
let A9 being (Element of ( Fin C9 ));
let a being (Element of C9);
assume that
A3: ((A9 <> ( {} ) or F is  having_a_unity) implies (for B holds ((ex s st (((( dom s ) = A9 & ( rng s ) = B) & s is  one-to-one) & ( g | A9 ) = ( f * s ))) implies ( F $$ (A9,g) ) = ( F $$ (B,f) ))))
and
A4: (not a in A9);
assume (( A9 \/ { a } ) <> ( {} ) or F is  having_a_unity);
let B;
set A = ( A9 \/ {. a .} );
given s such that
A5: ( dom s ) = A
and
A6: ( rng s ) = B
and
A7: s is  one-to-one
and
A8: ( g | A ) = ( f * s );

A9: a in A by SETWISEO:4;
then A10: ( s . a ) in B by A5,A6,FUNCT_1:def 3;
B c= C by FINSUB_1:def 5;
then reconsider c = ( s . a ) as (Element of C) by A10;
set B9 = ( B \ {. c .} );
set s9 = ( s | A9 );
A11: s9 is  one-to-one by A7,FUNCT_1:52;
now
let y;
thus (y in ( rng s9 ) implies y in B9)
proof
assume y in ( rng s9 );
then consider x such that A12: x in ( dom s9 ) and A13: y = ( s9 . x ) by FUNCT_1:def 3;
A14: ( s9 . x ) = ( s . x ) by A12,FUNCT_1:47;
A15: x in ( ( dom s ) /\ A9 ) by A12,RELAT_1:61;
then (x in ( dom s ) & x <> a) by A4,XBOOLE_0:def 4;
then ( s . x ) <> c by A5,A7,A9,FUNCT_1:def 4;
then A16: (not y in { c }) by A13,A14,TARSKI:def 1;
x in ( dom s ) by A15,XBOOLE_0:def 4;
then y in B by A6,A13,A14,FUNCT_1:def 3;
hence thesis by A16,XBOOLE_0:def 5;
end;

assume A17: y in B9;
then y in B by XBOOLE_0:def 5;
then consider x such that A18: x in ( dom s ) and A19: y = ( s . x ) by A6,FUNCT_1:def 3;
A20: (x in A9 or x in { a }) by A5,A18,XBOOLE_0:def 3;
(not y in { c }) by A17,XBOOLE_0:def 5;
then x <> a by A19,TARSKI:def 1;
then x in ( ( dom s ) /\ A9 ) by A18,A20,TARSKI:def 1,XBOOLE_0:def 4;
then (x in ( dom s9 ) & ( s9 . x ) = ( s . x )) by FUNCT_1:48,RELAT_1:61;
hence y in ( rng s9 ) by A19,FUNCT_1:def 3;
end;
then A21: ( rng s9 ) = B9 by TARSKI:1;
now
let x;
thus (x in ( dom ( g | A9 ) ) implies x in ( dom ( f * s9 ) ))
proof
assume x in ( dom ( g | A9 ) );
then A22: x in ( ( dom g ) /\ A9 ) by RELAT_1:61;
then A23: x in A9 by XBOOLE_0:def 4;
A24: x in ( dom g ) by A22,XBOOLE_0:def 4;
x in A by A23,SETWISEO:4;
then x in ( ( dom g ) /\ A ) by A24,XBOOLE_0:def 4;
then A25: x in ( dom ( f * s ) ) by A8,RELAT_1:61;
then A26: ( s . x ) in ( dom f ) by FUNCT_1:11;
x in ( dom s ) by A25,FUNCT_1:11;
then x in ( ( dom s ) /\ A9 ) by A23,XBOOLE_0:def 4;
then A27: x in ( dom s9 ) by RELAT_1:61;
then ( s9 . x ) = ( s . x ) by FUNCT_1:47;
hence thesis by A26,A27,FUNCT_1:11;
end;

assume A28: x in ( dom ( f * s9 ) );
then A29: x in ( dom s9 ) by FUNCT_1:11;
then A30: x in ( ( dom s ) /\ A9 ) by RELAT_1:61;
then A31: x in ( dom s ) by XBOOLE_0:def 4;
( s9 . x ) in ( dom f ) by A28,FUNCT_1:11;
then ( s . x ) in ( dom f ) by A29,FUNCT_1:47;
then x in ( dom ( g | A ) ) by A8,A31,FUNCT_1:11;
then x in ( ( dom g ) /\ A ) by RELAT_1:61;
then A32: x in ( dom g ) by XBOOLE_0:def 4;
x in A9 by A30,XBOOLE_0:def 4;
then x in ( ( dom g ) /\ A9 ) by A32,XBOOLE_0:def 4;
hence x in ( dom ( g | A9 ) ) by RELAT_1:61;
end;
then A33: ( dom ( g | A9 ) ) = ( dom ( f * s9 ) ) by TARSKI:1;
a in C9;
then a in ( dom g ) by FUNCT_2:def 1;
then a in ( ( dom g ) /\ A ) by A9,XBOOLE_0:def 4;
then (a in ( dom ( f * s ) ) & ( g . a ) = ( ( f * s ) . a )) by A8,FUNCT_1:48,RELAT_1:61;
then A34: ( g . a ) = ( f . c ) by FUNCT_1:12;
( B9 \/ { c } ) = ( B \/ { c } ) by XBOOLE_1:39;
then A35: B = ( B9 \/ { c } ) by A10,ZFMISC_1:40;
A36: ( dom s9 ) = A9 by A5,RELAT_1:62,XBOOLE_1:7;
A37: (for x holds (x in ( dom ( g | A9 ) ) implies ( ( g | A9 ) . x ) = ( ( f * s9 ) . x )))
proof
let x;
assume x in ( dom ( g | A9 ) );
then A38: x in ( ( dom g ) /\ A9 ) by RELAT_1:61;
then A39: x in A9 by XBOOLE_0:def 4;
then A40: x in A by SETWISEO:4;
x in ( dom g ) by A38,XBOOLE_0:def 4;
then x in ( ( dom g ) /\ A ) by A40,XBOOLE_0:def 4;
then x in ( dom ( f * s ) ) by A8,RELAT_1:61;
then A41: x in ( dom s ) by FUNCT_1:11;
then x in ( ( dom s ) /\ A9 ) by A39,XBOOLE_0:def 4;
then A42: x in ( dom s9 ) by RELAT_1:61;
then A43: ( s9 . x ) = ( s . x ) by FUNCT_1:47;
thus ( ( g | A9 ) . x ) = ( g . x ) by A39,FUNCT_1:49
.= ( ( f * s ) . x ) by A8,A40,FUNCT_1:49
.= ( f . ( s . x ) ) by A41,FUNCT_1:13
.= ( ( f * s9 ) . x ) by A42,A43,FUNCT_1:13;
end;
then A44: ( g | A9 ) = ( f * s9 ) by A33,FUNCT_1:2;
now
let y;
thus (y in ( g .: A9 ) implies y in ( f .: B9 ))
proof
assume y in ( g .: A9 );
then consider x such that A45: x in ( dom g ) and A46: x in A9 and A47: y = ( g . x ) by FUNCT_1:def 6;
x in ( ( dom g ) /\ A9 ) by A45,A46,XBOOLE_0:def 4;
then A48: x in ( dom ( g | A9 ) ) by RELAT_1:61;
then x in ( dom s9 ) by A33,FUNCT_1:11;
then A49: ( s9 . x ) in B9 by A21,FUNCT_1:def 3;
y = ( ( f * s9 ) . x ) by A44,A46,A47,FUNCT_1:49;
then A50: y = ( f . ( s9 . x ) ) by A33,A48,FUNCT_1:12;
( s9 . x ) in ( dom f ) by A33,A48,FUNCT_1:11;
hence thesis by A50,A49,FUNCT_1:def 6;
end;

assume y in ( f .: B9 );
then consider x such that x in ( dom f ) and A51: x in B9 and A52: y = ( f . x ) by FUNCT_1:def 6;
set x9 = ( ( s9 " ) . x );
A53: x9 in A9 by A11,A36,A21,A51,FUNCT_1:32;
A9 c= C9 by FINSUB_1:def 5;
then x9 in C9 by A53;
then A54: x9 in ( dom g ) by FUNCT_2:def 1;
( s9 . x9 ) = x by A11,A21,A51,FUNCT_1:35;
then y = ( ( f * s9 ) . x9 ) by A36,A52,A53,FUNCT_1:13
.= ( g . x9 ) by A44,A53,FUNCT_1:49;
hence y in ( g .: A9 ) by A53,A54,FUNCT_1:def 6;
end;
then A55: ( f .: B9 ) = ( g .: A9 ) by TARSKI:1;
A56: (not c in B9) by ZFMISC_1:56;
now
per cases ;
suppose A57: A9 = ( {} );

B9 c= C by FINSUB_1:def 5;
then B9 c= ( dom f ) by FUNCT_2:def 1;
then A58: B9 = ( {} ) by A55,A57,RELAT_1:116;
thus ( F $$ (A,g) ) = ( f . c ) by A1,A34,A57,SETWISEO:17
.= ( F $$ (B,f) ) by A1,A35,A58,SETWISEO:17;
end;
suppose A59: A9 <> ( {} );

A9 c= C9 by FINSUB_1:def 5;
then A9 c= ( dom g ) by FUNCT_2:def 1;
then A60: B9 <> ( {} ) by A55,A59,RELAT_1:116;
thus ( F $$ (A,g) ) = ( F . (( F $$ (A9,g) ),( g . a )) ) by A1,A4,A59,CKB3:1
.= ( F . (( F $$ (B9,f) ),( f . c )) ) by A3,A34,A11,A36,A21,A33,A37,A59,FUNCT_1:2
.= ( F $$ (B,f) ) by A1,A35,A56,A60,CKB3:1;
end;
end;
hence thesis;
end;
A61: X[ ( {}. C9 ) ]
proof
assume A62: (( {}. C9 ) <> ( {} ) or F is  having_a_unity);
let B;
given s such that
A63: ((( dom s ) = ( {}. C9 ) & ( rng s ) = B) & s is  one-to-one)
and
( g | ( {}. C9 ) ) = ( f * s );

B,( {} ) are_equipotent  by A63,WELLORD2:def 4;
then A64: B = ( {}. C ) by CARD_1:26;
( F $$ (( {}. C9 ),g) ) = ( the_unity_wrt F ) by A1,A62,SETWISEO:31;
hence thesis by A1,A62,A64,SETWISEO:31;
end;
(for A holds X[ A ]) from SETWISEO:sch 2(A61,A2);
hence thesis;
end;
