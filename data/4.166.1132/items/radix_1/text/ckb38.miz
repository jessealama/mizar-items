environ
vocabularies NUMBERS,NAT_1,INT_1,ARYTM_1,ARYTM_3,CARD_1,XXREAL_0,SUBSET_1,RELAT_1,NEWTON,POWER,TARSKI,XBOOLE_0,FINSEQ_2,FINSEQ_1,FUNCT_1,PARTFUN1,CARD_3,ORDINAL4,RADIX_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,INT_1,NAT_1,NAT_D,FUNCT_1,PARTFUN1,NEWTON,POWER,FINSEQ_1,FINSEQ_2,TREES_4,GR_CY_1,XXREAL_0,MESFUNC1,CKB8,CKB9,CKB19,CKB21,CKB22,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB33,CKB36;
definitions TARSKI,RVSUM_1,CKB8,CKB9,CKB21,CKB22,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB33,CKB36;
theorems NAT_1,NAT_2,INT_1,FINSEQ_1,EULER_1,PREPOWER,POWER,RVSUM_1,FINSEQ_2,FINSEQ_4,TARSKI,FUNCT_1,PEPIN,FINSEQ_5,NEWTON,XCMPLX_1,XREAL_1,XXREAL_0,FINSOP_1,ORDINAL1,NAT_D,PARTFUN1,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37;
schemes NAT_1,FINSEQ_2;
registrations RELSET_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,NEWTON,XBOOLE_0,VALUED_0,POWER,CARD_1,FINSEQ_1,CKB18;
constructors REAL_1,NAT_D,FINSOP_1,NEWTON,POWER,MESFUNC1,WSIERP_1,GR_CY_1,BINOP_2,CKB8,CKB9,CKB19,CKB21,CKB22,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB33,CKB36;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve i for Nat;
reserve k for Nat;
reserve m for Nat;
reserve n for Nat;
reserve p for Nat;
theorem
(for n holds (n >= 1 implies (for m holds (m is_represented_by n,k implies m = ( SDDec ( DecSD (m,n,k) ) )))))
proof
let n;
defpred P[ Nat ]
 means
(for m holds (m is_represented_by $1,k implies m = ( SDDec ( DecSD (m,$1,k) ) )));
A1: (for u being Nat holds ((u >= 1 & P[ u ]) implies P[ ( u + 1 ) ]))
proof
let u being Nat;
assume that
u >= 1
and
A2: P[ u ];
(p is_represented_by ( u + 1 ),k implies p = ( SDDec ( DecSD (p,( u + 1 ),k) ) ))
proof
set I = ( u + 1 );
set R = ( ( Radix k ) |^ u );
set M = ( p mod R );
set N = ( R * ( p div R ) );
A3: ( I -' 1 ) = u by NAT_D:34;
A4: ( u + 1 ) <= ( len ( DigitSD ( DecSD (p,( u + 1 ),k) ) ) ) by CARD_1:def 7;
A5: 1 <= ( u + 1 ) by NAT_1:12;
then A6: ( u + 1 ) in ( Seg ( u + 1 ) ) by FINSEQ_1:1;
assume p is_represented_by ( u + 1 ),k;
then p < ( ( Radix k ) |^ ( u + 1 ) ) by CKB36:def 1;
then ( p div R ) = ( DigitDC (p,( u + 1 ),k) ) by A3,NAT_D:24;
then A7: N = ( SubDigit (( DecSD (p,( u + 1 ),k) ),( u + 1 ),k) ) by A3,A6,CKB29:def 1
.= ( ( DigitSD ( DecSD (p,( u + 1 ),k) ) ) /. ( u + 1 ) ) by A6,CKB26:def 1
.= ( ( DigitSD ( DecSD (p,( u + 1 ),k) ) ) . ( u + 1 ) ) by A4,FINSEQ_4:15,NAT_1:12;
A8: ( ( DigitSD ( DecSD (M,u,k) ) ) ^ <* N *> ) = ( DigitSD ( DecSD (p,( u + 1 ),k) ) )
proof
N is (Element of ( INT )) by INT_1:def 2;
then reconsider z1 = <* N *> as (FinSequence of ( INT )) by FINSEQ_1:74;
reconsider DD = ( DigitSD ( DecSD (p,( u + 1 ),k) ) ) as (FinSequence of ( INT ));
set z0 = ( DigitSD ( DecSD (M,u,k) ) );
reconsider z = ( z0 ^ z1 ) as (FinSequence of ( INT ));
A9: ( len z ) = ( ( len ( DigitSD ( DecSD (M,u,k) ) ) ) + ( len <* N *> ) ) by FINSEQ_1:22
.= ( u + ( len <* N *> ) ) by CARD_1:def 7
.= ( u + 1 ) by FINSEQ_1:39;
A10: (for i being Nat holds ((1 <= i & i <= ( len z )) implies ( z /. i ) = ( DD /. i )))
proof
let i being Nat;
assume (1 <= i & i <= ( len z ));
then A11: i in ( Seg ( u + 1 ) ) by A9,FINSEQ_1:1;
per cases  by A11,FINSEQ_2:7;
suppose A12: i in ( Seg u );

A13: ( M mod ( ( Radix k ) |^ i ) ) = ( p mod ( ( Radix k ) |^ i ) )
proof
i <= u by A12,FINSEQ_1:1;
then ( ( Radix k ) |^ i ) divides ( ( Radix k ) |^ u ) by CKB6:1;
then consider t being Nat such that A14: ( ( Radix k ) |^ u ) = ( ( ( Radix k ) |^ i ) * t ) by NAT_D:def 3;
( Radix k ) <> ( 0 ) by POWER:34;
then t <> ( 0 ) by A14,PREPOWER:5;
hence thesis by A14,CKB3:1;
end;
A15: i in ( dom ( z0 ^ z1 ) ) by A9,A11,FINSEQ_1:def 3;
( len DD ) = ( u + 1 ) by CARD_1:def 7;
then A16: i in ( dom DD ) by A11,FINSEQ_1:def 3;
then A17: ( DD . i ) = ( DD /. i ) by PARTFUN1:def 6;
A18: ( DD . i ) = ( ( DigitSD ( DecSD (p,( u + 1 ),k) ) ) /. i ) by A16,PARTFUN1:def 6
.= ( SubDigit (( DecSD (p,( u + 1 ),k) ),i,k) ) by A11,CKB26:def 1
.= ( ( ( Radix k ) |^ ( i -' 1 ) ) * ( DigitDC (p,i,k) ) ) by A11,CKB29:def 1
.= ( ( ( Radix k ) |^ ( i -' 1 ) ) * ( ( p mod ( ( Radix k ) |^ i ) ) div ( ( Radix k ) |^ ( i -' 1 ) ) ) );
( len z0 ) = u by CARD_1:def 7;
then A19: i in ( dom z0 ) by A12,FINSEQ_1:def 3;
then ( ( z0 ^ z1 ) . i ) = ( ( DigitSD ( DecSD (M,u,k) ) ) . i ) by FINSEQ_1:def 7
.= ( ( DigitSD ( DecSD (M,u,k) ) ) /. i ) by A19,PARTFUN1:def 6
.= ( SubDigit (( DecSD (M,u,k) ),i,k) ) by A12,CKB26:def 1
.= ( ( ( Radix k ) |^ ( i -' 1 ) ) * ( DigitDC (M,i,k) ) ) by A12,CKB29:def 1
.= ( ( ( Radix k ) |^ ( i -' 1 ) ) * ( ( p mod ( ( Radix k ) |^ i ) ) div ( ( Radix k ) |^ ( i -' 1 ) ) ) ) by A13;
hence thesis by A18,A17,A15,PARTFUN1:def 6;
end;
suppose A20: i = ( u + 1 );

hence ( z /. i ) = ( z . ( u + 1 ) ) by A5,A9,FINSEQ_4:15
.= ( ( z0 ^ z1 ) . ( ( len z0 ) + 1 ) ) by CARD_1:def 7
.= ( ( DigitSD ( DecSD (p,( u + 1 ),k) ) ) . ( u + 1 ) ) by A7,FINSEQ_1:42
.= ( DD /. i ) by A4,A20,FINSEQ_4:15,NAT_1:12;
end;
end;
( len DD ) = ( u + 1 ) by CARD_1:def 7;
hence thesis by A9,A10,FINSEQ_5:13;
end;
( Radix k ) <> ( 0 ) by POWER:34;
then A21: R <> ( 0 ) by PREPOWER:5;
then M < R by NAT_D:1;
then A22: M is_represented_by u,k by CKB36:def 1;
p = ( ( R * ( p div R ) ) + ( p mod R ) ) by A21,NAT_D:2;
then p = ( ( SDDec ( DecSD (M,u,k) ) ) + N ) by A2,A22;
hence thesis by A8,RVSUM_1:74;
end;
hence thesis;
end;
A23: P[ 1 ]
proof
let m;
assume A24: m is_represented_by 1,k;
A25: m is (Element of ( INT )) by INT_1:def 2;
then reconsider M = <* m *> as (FinSequence of ( INT )) by FINSEQ_1:74;
A26: 1 in ( Seg 1 ) by FINSEQ_1:1;
( SubDigit (( DecSD (m,1,k) ),1,k) ) = ( ( ( Radix k ) |^ ( 0 ) ) * ( DigB (( DecSD (m,1,k) ),1) ) ) by XREAL_1:232
.= ( 1 * ( DigB (( DecSD (m,1,k) ),1) ) ) by NEWTON:4
.= m by A24,CKB37:1;
then ( ( DigitSD ( DecSD (m,1,k) ) ) /. 1 ) = m by A26,CKB26:def 1;
hence ( SDDec ( DecSD (m,1,k) ) ) = ( Sum M ) by CKB24:1
.= m by A25,FINSOP_1:11;
end;
(for u being Nat holds (u >= 1 implies P[ u ])) from NAT_1:sch 8(A23,A1);
hence thesis;
end;
