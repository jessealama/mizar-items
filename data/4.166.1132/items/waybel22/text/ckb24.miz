environ
vocabularies REWRITE1,WAYBEL_0,TARSKI,ZFMISC_1,STRUCT_0,LATTICES,ORDINAL2,SUBSET_1,EQREL_1,XBOOLE_0,YELLOW_1,ARYTM_0,ORDERS_2,WAYBEL16,RELAT_1,YELLOW_0,LATTICE3,WAYBEL_5,WELLORD2,CARD_FIL,WELLORD1,CAT_1,SETFAM_1,XXREAL_0,FUNCT_1,CARD_1,SEQM_3,PBOOLE,FUNCOP_1,YELLOW_2,CARD_3,FUNCT_6,WAYBEL22,FUNCT_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,FUNCT_2,FUNCT_6,STRUCT_0,WELLORD1,CARD_1,CARD_3,ORDERS_2,LATTICE3,FUNCOP_1,YELLOW_0,YELLOW_1,YELLOW_2,YELLOW_7,WAYBEL_0,WAYBEL_1,WAYBEL_3,WAYBEL_5,WAYBEL16,CKB11,CKB14,CKB18;
definitions TARSKI,FUNCT_1,ORDERS_3,LATTICE3,WELLORD2,YELLOW_0,WAYBEL_0,STRUCT_0,CKB11,CKB14,CKB18;
theorems TARSKI,CARD_1,ZFMISC_1,SETFAM_1,RELAT_1,FUNCT_1,FUNCT_2,FUNCT_3,FUNCT_4,FUNCT_6,FUNCOP_1,WELLORD1,WELLORD2,CARD_3,LATTICE3,PBOOLE,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_0,WAYBEL_1,WAYBEL_5,WAYBEL11,WAYBEL13,WAYBEL14,WAYBEL15,WAYBEL16,WAYBEL17,RELSET_1,WAYBEL_4,WAYBEL20,XBOOLE_0,XBOOLE_1,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB23;
schemes CLASSES1,FUNCT_2,MSSUBFAM,YELLOW_3;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,FUNCOP_1,CARD_3,PBOOLE,STRUCT_0,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,WAYBEL_5,YELLOW_7,WAYBEL_8,WAYBEL16,FUNCT_1,CKB9,CKB10,CKB21,CKB22;
constructors SETFAM_1,DOMAIN_1,TOLER_1,ORDERS_3,PRALG_3,WAYBEL_1,WAYBEL_5,WAYBEL_8,WAYBEL16,RELSET_1,WAYBEL20,CKB11,CKB14,CKB18;
requirements SUBSET,BOOLE;
begin
reserve X for set;
reserve x for (Element of ( BoolePoset X ));
reserve z for (Element of X);
theorem
Th15: (for L being  continuous  complete non  empty Poset holds (for f being (Function of ( FixedUltraFilters X ),(the carrier of L)) holds (for h being (CLHomomorphism of ( InclPoset ( Filt ( BoolePoset X ) ) ),L) holds (( h | ( FixedUltraFilters X ) ) = f implies h = ( f -extension_to_hom )))))
proof
let L being  continuous  complete non  empty Poset;
let f being (Function of ( FixedUltraFilters X ),(the carrier of L));
let h being (CLHomomorphism of ( InclPoset ( Filt ( BoolePoset X ) ) ),L);
assume A1: ( h | ( FixedUltraFilters X ) ) = f;
set F = ( f -extension_to_hom );
set cL = (the carrier of L);
set BP = ( BoolePoset X );
set IP = ( InclPoset ( Filt BP ) );
set cIP = (the carrier of IP);
A2: ( InclPoset ( Filt BP ) ) = RelStr (# ( Filt BP ),( RelIncl ( Filt BP ) ) #) by YELLOW_1:def 1;
reconsider F9 = F as (Function of cIP,cL);
reconsider h9 = h as (Function of cIP,cL);
A3: (the carrier of BP) = (the carrier of ( LattPOSet ( BooleLatt X ) )) by YELLOW_1:def 2
.= ( bool X ) by LATTICE3:def 1;
now
set FUF = ( FixedUltraFilters X );
let Fi being (Element of cIP);
Fi in ( Filt BP ) by A2;
then consider FF being (Filter of BP) such that A4: Fi = FF;
set Xsf = { ( "/\" ({ ( f . ( uparrow x ) ): (ex z st (x = { z } & z in Y)) },L) ) where Y is (Subset of X): Y in FF };
set Xs = { ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in Y)) },IP) ) where Y is (Subset of X): Y in FF };
A5: Xs c= cIP
proof
let p being set;
assume p in Xs;
then (ex YY being (Subset of X) st (p = ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in YY)) },IP) ) & YY in FF));
hence thesis;
end;
now
consider YY being set such that A6: YY in FF by XBOOLE_0:def 1;
( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in YY)) },IP) ) in Xs by A3,A6;
hence Xs is non  empty;
end;
then reconsider Xs as non  empty (Subset of IP) by A5;
A7:  ex_sup_of Xs,IP by YELLOW_0:17;
A8: Xs is  directed
proof
let a being (Element of IP);
let b being (Element of IP);
assume that
A9: a in Xs
and
A10: b in Xs;
consider Yb being (Subset of X) such that A11: b = ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in Yb)) },IP) ) and A12: Yb in FF by A10;
reconsider Yb9 = Yb as (Element of FF) by A12;
set Xsb = { ( uparrow x ): (ex z st (x = { z } & z in Yb)) };
consider Ya being (Subset of X) such that A13: a = ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in Ya)) },IP) ) and A14: Ya in FF by A9;
reconsider Ya9 = Ya as (Element of FF) by A14;
set Xsa = { ( uparrow x ): (ex z st (x = { z } & z in Ya)) };
per cases ;
suppose A15: Xsa is  empty;

take a;
thus a in Xs by A9;
thus a <= a;
( "/\" (Xsa,IP) ) = ( Top IP ) by A15;
hence b <= a by A13,YELLOW_0:45;
end;
suppose A16: Xsb is  empty;

take b;
thus b in Xs by A10;
( "/\" (Xsb,IP) ) = ( Top IP ) by A16;
hence a <= b by A11,YELLOW_0:45;
thus b <= b;
end;
suppose A17: (Xsa is non  empty & Xsb is non  empty);

Xsb c= cIP
proof
let r being set;
assume r in Xsb;
then (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z st (xz = { z } & z in Yb))));
hence thesis by A2;
end;
then reconsider Xsb as non  empty (Subset of IP) by A17;
Xsa c= cIP
proof
let r being set;
assume r in Xsa;
then (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z st (xz = { z } & z in Ya))));
hence thesis by A2;
end;
then reconsider Xsa as non  empty (Subset of IP) by A17;
A18: ( "/\" (Xsb,IP) ) = ( meet Xsb ) by WAYBEL16:10;
consider Yab being (Element of BP) such that A19: Yab in FF and A20: Yab <= Ya9 and A21: Yab <= Yb9 by WAYBEL_0:def 2;
reconsider Yab as (Element of FF) by A19;
set c = ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in Yab)) },IP) );
set Xsc = { ( uparrow x ): (ex z st (x = { z } & z in Yab)) };
A22: ( "/\" (Xsa,IP) ) = ( meet Xsa ) by WAYBEL16:10;
thus thesis
proof
per cases ;
suppose A23: Xsc is  empty;

take c;
thus c in Xs by A3;
A24: ( "/\" (Xsc,IP) ) = ( Top IP ) by A23;
hence a <= c by YELLOW_0:45;
thus b <= c by A24,YELLOW_0:45;
end;
suppose A25: Xsc is non  empty;

Xsc c= cIP
proof
let r being set;
assume r in Xsc;
then (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z st (xz = { z } & z in Yab))));
hence thesis by A2;
end;
then reconsider Xsc as non  empty (Subset of IP) by A25;
take c;
thus c in Xs by A3;
A26: ( "/\" (Xsc,IP) ) = ( meet Xsc ) by WAYBEL16:10;
a c= c
proof
let d being set;
Xsc c= Xsa
proof
let r being set;
assume r in Xsc;
then A27: (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z st (xz = { z } & z in Yab))));
Yab c= Ya by A20,YELLOW_1:2;
hence thesis by A27;
end;
then A28: ( meet Xsa ) c= ( meet Xsc ) by SETFAM_1:6;
assume d in a;
hence thesis by A13,A22,A26,A28;
end;
hence a <= c by YELLOW_1:3;
b c= c
proof
let d being set;
Xsc c= Xsb
proof
let r being set;
assume r in Xsc;
then A29: (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z st (xz = { z } & z in Yab))));
Yab c= Yb by A21,YELLOW_1:2;
hence thesis by A29;
end;
then A30: ( meet Xsb ) c= ( meet Xsc ) by SETFAM_1:6;
assume d in b;
hence thesis by A11,A18,A26,A30;
end;
hence b <= c by YELLOW_1:3;
end;
end;

end;
end;
A31: h is  infs-preserving by WAYBEL16:def 1;
now
let s being set;
hereby
assume s in ( h .: Xs );
then consider t being set such that t in (the carrier of IP) and A32: t in Xs and A33: s = ( h . t ) by FUNCT_2:64;
consider Y being (Subset of X) such that A34: (t = ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in Y)) },IP) ) & Y in FF) by A32;
set Xsi = { ( uparrow x ): (ex z st (x = { z } & z in Y)) };
Xsi c= cIP
proof
let r being set;
assume r in Xsi;
then (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z being (Element of X) st (xz = { z } & z in Y))));
hence thesis by A2;
end;
then reconsider Xsi as (Subset of IP);
set Xsif = { ( f . ( uparrow x ) ): (ex z st (x = { z } & z in Y)) };
now
let u being set;
hereby
assume u in ( h .: Xsi );
then consider v being set such that v in (the carrier of IP) and A35: v in Xsi and A36: u = ( h . v ) by FUNCT_2:64;
A37: (ex x st (v = ( uparrow x ) & (ex z st (x = { z } & z in Y)))) by A35;
then v in FUF;
then ( h . v ) = ( f . v ) by A1,FUNCT_1:49;
hence u in Xsif by A36,A37;
end;
assume u in Xsif;
then consider x such that A38: u = ( f . ( uparrow x ) ) and A39: (ex z st (x = { z } & z in Y));
( uparrow x ) in FUF by A39;
then A40: ( h . ( uparrow x ) ) = ( f . ( uparrow x ) ) by A1,FUNCT_1:49;
( uparrow x ) in Xsi by A39;
hence u in ( h .: Xsi ) by A38,A40,FUNCT_2:35;
end;
then A41: ( h .: Xsi ) = Xsif by TARSKI:1;
(h preserves_inf_of Xsi &  ex_inf_of Xsi,IP) by A31,WAYBEL_0:def 32,YELLOW_0:17;
then ( inf ( h .: Xsi ) ) = ( h . ( inf Xsi ) ) by WAYBEL_0:def 30;
hence s in Xsf by A33,A34,A41;
end;
assume s in Xsf;
then consider Y being (Subset of X) such that A42: s = ( "/\" ({ ( f . ( uparrow x ) ): (ex z st (x = { z } & z in Y)) },L) ) and A43: Y in FF;
set Xsi = { ( uparrow x ): (ex z st (x = { z } & z in Y)) };
Xsi c= cIP
proof
let r being set;
assume r in Xsi;
then (ex xz being (Element of BP) st (r = ( uparrow xz ) & (ex z being (Element of X) st (xz = { z } & z in Y))));
hence thesis by A2;
end;
then reconsider Xsi as (Subset of IP);
set Xsif = { ( f . ( uparrow x ) ): (ex z st (x = { z } & z in Y)) };
(h preserves_inf_of Xsi &  ex_inf_of Xsi,IP) by A31,WAYBEL_0:def 32,YELLOW_0:17;
then A44: ( inf ( h .: Xsi ) ) = ( h . ( inf Xsi ) ) by WAYBEL_0:def 30;
now
let u being set;
hereby
assume u in ( h .: Xsi );
then consider v being set such that v in (the carrier of IP) and A45: v in Xsi and A46: u = ( h . v ) by FUNCT_2:64;
A47: (ex x st (v = ( uparrow x ) & (ex z st (x = { z } & z in Y)))) by A45;
then v in FUF;
then ( h . v ) = ( f . v ) by A1,FUNCT_1:49;
hence u in Xsif by A46,A47;
end;
assume u in Xsif;
then consider x such that A48: u = ( f . ( uparrow x ) ) and A49: (ex z st (x = { z } & z in Y));
( uparrow x ) in FUF by A49;
then A50: ( h . ( uparrow x ) ) = ( f . ( uparrow x ) ) by A1,FUNCT_1:49;
( uparrow x ) in Xsi by A49;
hence u in ( h .: Xsi ) by A48,A50,FUNCT_2:35;
end;
then A51: ( h .: Xsi ) = Xsif by TARSKI:1;
( inf Xsi ) in Xs by A43;
hence s in ( h .: Xs ) by A42,A44,A51,FUNCT_2:35;
end;
then A52: ( h .: Xs ) = Xsf by TARSKI:1;
A53: FF = ( "\/" ({ ( "/\" ({ ( uparrow x ): (ex z st (x = { z } & z in Y)) },IP) ) where Y is (Subset of X): Y in FF },IP) ) by CKB17:1;
h is  directed-sups-preserving by WAYBEL16:def 1;
then h preserves_sup_of Xs by A8,WAYBEL_0:def 37;
hence ( h9 . Fi ) = ( sup ( h .: Xs ) ) by A4,A53,A7,WAYBEL_0:def 31
.= ( F9 . Fi ) by A4,A52,CKB18:def 1;
end;
hence thesis by FUNCT_2:63;
end;
