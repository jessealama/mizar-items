environ
vocabularies INCPROJ,INCSP_1,SUBSET_1,AFF_2,ZFMISC_1,VECTSP_1,ANALOAF,PARTFUN1,RELAT_1,TARSKI,FUNCT_1,PROJRED1;
notations TARSKI,ZFMISC_1,SUBSET_1,DOMAIN_1,RELAT_1,RELSET_1,INCSP_1,INCPROJ,PARTFUN1,FUNCT_1;
definitions TARSKI;
theorems TARSKI,PARTFUN1,INCPROJ,FUNCT_1,RELAT_1,RELSET_1,XBOOLE_0,ZFMISC_1,INCSP_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes PARTFUN1,XBOOLE_0;
registrations FUNCT_1,RELSET_1,INCPROJ;
constructors DOMAIN_1,INCPROJ,RELSET_1;
requirements SUBSET,BOOLE;
begin
reserve IPP for  Desarguesian  2-dimensional IncProjSp;
reserve p for (POINT of IPP);
reserve x for (POINT of IPP);
reserve y for (POINT of IPP);
reserve K for (LINE of IPP);
reserve L for (LINE of IPP);
reserve X for (LINE of IPP);
reserve f for (PartFunc of (the Points of IPP),(the Points of IPP));
definition
let IPP;
let K;
let L;
let p;
assume that
A1: (not p on K)
and
A2: (not p on L);
func IncProj (K,p,L) -> (PartFunc of (the Points of IPP),(the Points of IPP))
means
:Def1: ((( dom it ) c= (the Points of IPP) & (for x holds (x in ( dom it ) iff x on K))) & (for x holds (for y holds ((x on K & y on L) implies (( it . x ) = y iff (ex X st ((p on X & x on X) & y on X)))))));
existence
proof
defpred P[ set,set ]
 means
(ex x st (ex y st ((((x = $1 & y = $2) & x on K) & y on L) & (ex X st ((p on X & x on X) & y on X)))));
set XX = (the Points of IPP);
A3: (for x,y1,y2 being set holds (((x in XX & P[ x,y1 ]) & P[ x,y2 ]) implies y1 = y2))
proof
let x being set,y1 being set,y2 being set;
assume that
A4: x in XX
and
A5: P[ x,y1 ]
and
A6: P[ x,y2 ];
reconsider x as (POINT of IPP) by A4;
reconsider y1,y2 as (POINT of IPP) by A5,A6;
consider A1 being (Element of (the Lines of IPP)) such that A7: p on A1 and A8: x on A1 and A9: y1 on A1 by A5;
y2 on A1 by A1,A6,A7,A8,INCPROJ:def 4;
hence thesis by A2,A5,A6,A7,A9,INCPROJ:def 4;
end;
A10: (for x,y being set holds ((x in XX & P[ x,y ]) implies y in XX));
consider f such that A11: (for x being set holds (x in ( dom f ) iff (x in XX & (ex y being set st P[ x,y ])))) and A12: (for x being set holds (x in ( dom f ) implies P[ x,( f . x ) ])) from PARTFUN1:sch 2(A10,A3);
take f;
thus ( dom f ) c= (the Points of IPP);
thus A13: (x in ( dom f ) iff x on K)
proof
A14: (x on K implies x in ( dom f ))
proof
consider X being (LINE of IPP) such that A15: (p on X & x on X) by INCPROJ:def 5;
assume A16: x on K;
(ex y st (y on L & y on X)) by INCPROJ:def 9;
hence thesis by A11,A16,A15;
end;
(x in ( dom f ) implies x on K)
proof
assume x in ( dom f );
then P[ x,( f . x ) ] by A12;
hence thesis;
end;
hence thesis by A14;
end;

let x;
let y;
assume that
A17: x on K
and
A18: y on L;
A19: (( f . x ) = y implies (ex X st ((p on X & x on X) & y on X)))
proof
x in ( dom f ) by A13,A17;
then A20: P[ x,( f . x ) ] by A12;
assume ( f . x ) = y;
hence thesis by A20;
end;
((ex X st ((p on X & x on X) & y on X)) implies ( f . x ) = y)
proof
x in ( dom f ) by A13,A17;
then A21: P[ x,( f . x ) ] by A12;
assume (ex X st ((p on X & x on X) & y on X));
hence thesis by A3,A18,A21;
end;
hence (( f . x ) = y iff (ex X st ((p on X & x on X) & y on X))) by A19;
end;
uniqueness
proof
let f1 being (PartFunc of (the Points of IPP),(the Points of IPP)),f2 being (PartFunc of (the Points of IPP),(the Points of IPP));
assume that
( dom f1 ) c= (the Points of IPP)
and
A22: (for x holds (x in ( dom f1 ) iff x on K))
and
A23: (for x holds (for y holds ((x on K & y on L) implies (( f1 . x ) = y iff (ex X st ((p on X & x on X) & y on X))))))
and
( dom f2 ) c= (the Points of IPP)
and
A24: (for x holds (x in ( dom f2 ) iff x on K))
and
A25: (for x holds (for y holds ((x on K & y on L) implies (( f2 . x ) = y iff (ex X st ((p on X & x on X) & y on X))))));
(for x being set holds (x in ( dom f1 ) iff x in ( dom f2 )))
proof
let x being set;
A26: (x in ( dom f2 ) implies x in ( dom f1 ))
proof
assume A27: x in ( dom f2 );
then reconsider x as (Element of (the Points of IPP));
x on K by A24,A27;
hence thesis by A22;
end;
(x in ( dom f1 ) implies x in ( dom f2 ))
proof
assume A28: x in ( dom f1 );
then reconsider x as (Element of (the Points of IPP));
x on K by A22,A28;
hence thesis by A24;
end;
hence thesis by A26;
end;
then A29: ( dom f1 ) = ( dom f2 ) by TARSKI:1;
(for x being (POINT of IPP) holds (x in ( dom f1 ) implies ( f1 . x ) = ( f2 . x )))
proof
let x being (POINT of IPP);
consider A2 being (LINE of IPP) such that A30: (p on A2 & x on A2) by INCPROJ:def 5;
consider y2 being (POINT of IPP) such that A31: (y2 on A2 & y2 on L) by INCPROJ:def 9;
assume x in ( dom f1 );
then A32: x on K by A22;
then ( f2 . x ) = y2 by A25,A30,A31;
hence thesis by A23,A32,A30,A31;
end;
hence thesis by A29,PARTFUN1:5;
end;
end;
