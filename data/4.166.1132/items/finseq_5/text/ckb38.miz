environ
vocabularies NUMBERS,NAT_1,XXREAL_0,ARYTM_1,ARYTM_3,SUBSET_1,FINSEQ_1,CARD_1,FUNCT_1,RELAT_1,FINSEQ_4,ZFMISC_1,XBOOLE_0,ORDINAL4,TARSKI,PARTFUN1,RFINSEQ,FINSEQ_5;
notations TARSKI,XBOOLE_0,SUBSET_1,XCMPLX_0,NUMBERS,NAT_1,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_4,ZFMISC_1,RFINSEQ,NAT_D,XXREAL_0;
definitions TARSKI,FUNCT_1,XBOOLE_0,FINSEQ_1;
theorems TARSKI,NAT_1,PARTFUN2,FUNCT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,RFINSEQ,ZFMISC_1,RELAT_1,INT_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37;
schemes FINSEQ_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,CARD_1,CKB6,CKB7,CKB8,CKB15,CKB28;
constructors XXREAL_0,NAT_1,INT_1,PARTFUN1,FINSEQ_4,ZFMISC_1,RFINSEQ,NAT_D,REAL_1,RELSET_1;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve i for Nat;
reserve j for Nat;
reserve D for non empty set;
reserve f for (FinSequence of D);
theorem
Th34: ((( j + 1 ) = i & i in ( dom f )) implies ( <* ( f /. i ) *> ^ ( f /^ i ) ) = ( f /^ j ))
proof
assume that
A1: ( j + 1 ) = i
and
A2: i in ( dom f );
set g = ( <* ( f /. i ) *> ^ ( f /^ i ) );
A3: i <= ( len f ) by A2,FINSEQ_3:25;
j <= i by A1,NAT_1:11;
then A4: j <= ( len f ) by A3,XXREAL_0:2;
A5: ( len g ) = ( ( len ( f /^ i ) ) + 1 ) by CKB11:1;
then A6: ( len g ) = ( ( ( len f ) - i ) + 1 ) by A3,RFINSEQ:def 1
.= ( ( len f ) - j ) by A1
.= ( len ( f /^ j ) ) by A4,RFINSEQ:def 1;
now
let k being Nat;
assume that
A7: 1 <= k
and
A8: k <= ( len g );
A9: k in ( dom ( f /^ j ) ) by A6,A7,A8,FINSEQ_3:25;
per cases ;
suppose A10: k = 1;

hence ( g . k ) = ( f /. i ) by FINSEQ_1:41
.= ( f . i ) by A2,PARTFUN1:def 6
.= ( ( f /^ j ) . k ) by A1,A4,A9,A10,RFINSEQ:def 1;
end;
suppose k <> 1;

then A11: 1 < k by A7,XXREAL_0:1;
reconsider k9 = ( k - 1 ) as (Element of ( NAT )) by A7,INT_1:5;
A12: k9 <= ( ( len g ) - 1 ) by A8,XREAL_1:9;
( k9 + 1 ) = k;
then 1 <= k9 by A11,NAT_1:13;
then A13: k9 in ( dom ( f /^ i ) ) by A5,A12,FINSEQ_3:25;
( len <* ( f /. i ) *> ) = 1 by FINSEQ_1:39;
hence ( g . k ) = ( ( f /^ i ) . k9 ) by A8,A11,FINSEQ_1:24
.= ( f . ( k9 + i ) ) by A3,A13,RFINSEQ:def 1
.= ( f . ( k + j ) ) by A1
.= ( ( f /^ j ) . k ) by A4,A9,RFINSEQ:def 1;
end;
end;
hence thesis by A6,FINSEQ_1:14;
end;
