environ
vocabularies UNIALG_1,SUBSET_1,NUMBERS,UNIALG_2,XBOOLE_0,FINSEQ_1,FUNCT_1,RELAT_1,NAT_1,TARSKI,STRUCT_0,PARTFUN1,MSUALG_3,CQC_SIM1,WELLORD1,FINSEQ_2,GROUP_6,EQREL_1,FUNCT_2,CARD_3,RELAT_2,ALG_1,CARD_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,NAT_1,RELAT_1,RELAT_2,FUNCT_1,RELSET_1,FINSEQ_1,PARTFUN1,EQREL_1,FINSEQ_2,FUNCT_2,STRUCT_0,MARGREL1,UNIALG_1,FINSEQOP,FINSEQ_3,UNIALG_2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB20,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
definitions UNIALG_2,RELAT_2,TARSKI,FUNCT_1,XBOOLE_0,FUNCT_2,MARGREL1,FINSEQ_3,CKB5,CKB6,CKB7,CKB8,CKB9,CKB20,CKB25,CKB26,CKB27,CKB28,CKB29;
theorems FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,PARTFUN1,UNIALG_1,UNIALG_2,RELAT_1,RELSET_1,EQREL_1,ZFMISC_1,FINSEQ_3,XBOOLE_0,RELAT_2,ORDERS_1,MARGREL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26,CKB27,CKB28,CKB29;
schemes FINSEQ_1,RELSET_1,FUNCT_2,FUNCT_1;
registrations RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,EQREL_1,FINSEQ_2,STRUCT_0,UNIALG_1,UNIALG_2,ORDINAL1,FINSEQ_1,CARD_1,RELSET_1,MARGREL1,XBOOLE_0;
constructors EQREL_1,FINSEQOP,UNIALG_2,RELSET_1,CARD_3,FINSEQ_3,CARD_1,NAT_1,CKB5,CKB6,CKB7,CKB8,CKB9,CKB20,CKB25,CKB26,CKB27,CKB28,CKB29;
requirements BOOLE,SUBSET;
begin
reserve U1 for Universal_Algebra;
reserve U2 for Universal_Algebra;
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve o1 for (operation of U1);
reserve o2 for (operation of U2);
reserve x for set;
reserve E for (Congruence of U1);
theorem
Th21: (for U1 holds (for E holds ( Nat_Hom (U1,E) ) is_homomorphism U1,( QuotUnivAlg (U1,E) )))
proof
let U1;
let E;
set f = ( Nat_Hom (U1,E) );
set u1 = (the carrier of U1);
set qu = (the carrier of ( QuotUnivAlg (U1,E) ));
A1: ( len ( signature U1 ) ) = ( len (the charact of U1) ) by UNIALG_1:def 4;
A2: ( dom ( signature U1 ) ) = ( Seg ( len ( signature U1 ) ) ) by FINSEQ_1:def 3;
A3: ( len ( QuotOpSeq (U1,E) ) ) = ( len (the charact of U1) ) by CKB27:def 1;
A4: ( len ( signature ( QuotUnivAlg (U1,E) ) ) ) = ( len (the charact of ( QuotUnivAlg (U1,E) )) ) by UNIALG_1:def 4;
now
let n being Nat;
assume A5: n in ( dom ( signature U1 ) );
then n in ( dom (the charact of U1) ) by A1,A2,FINSEQ_1:def 3;
then reconsider o1 = ( (the charact of U1) . n ) as (operation of U1) by FUNCT_1:def 3;
n in ( dom ( QuotOpSeq (U1,E) ) ) by A3,A1,A2,A5,FINSEQ_1:def 3;
then A6: ( ( QuotOpSeq (U1,E) ) . n ) = ( QuotOp (o1,E) ) by CKB27:def 1;
reconsider cl = ( QuotOp (o1,E) ) as  homogeneous  quasi_total non  empty (PartFunc of ( qu * ),qu);
consider b being set such that A7: b in ( dom cl ) by XBOOLE_0:def 1;
reconsider b as (Element of ( qu * )) by A7;
( dom ( QuotOp (o1,E) ) ) = ( ( arity o1 ) -tuples_on ( Class E ) ) by CKB26:def 1;
then b in { w where w is (Element of ( ( Class E ) * )): ( len w ) = ( arity o1 ) } by A7,FINSEQ_2:def 4;
then (ex w being (Element of ( ( Class E ) * )) st (w = b & ( len w ) = ( arity o1 )));
then A8: ( arity cl ) = ( arity o1 ) by A7,MARGREL1:def 25;
(n in ( dom ( signature ( QuotUnivAlg (U1,E) ) ) ) & ( ( signature U1 ) . n ) = ( arity o1 )) by A3,A4,A1,A2,A5,FINSEQ_1:def 3,UNIALG_1:def 4;
hence ( ( signature U1 ) . n ) = ( ( signature ( QuotUnivAlg (U1,E) ) ) . n ) by A6,A8,UNIALG_1:def 4;
end;
hence ( signature U1 ) = ( signature ( QuotUnivAlg (U1,E) ) ) by A3,A4,A1,FINSEQ_2:9;
let n;
assume n in ( dom (the charact of U1) );
then n in ( Seg ( len (the charact of U1) ) ) by FINSEQ_1:def 3;
then A9: n in ( dom ( QuotOpSeq (U1,E) ) ) by A3,FINSEQ_1:def 3;
let o1 being (operation of U1);
let o2 being (operation of ( QuotUnivAlg (U1,E) ));
assume (( (the charact of U1) . n ) = o1 & o2 = ( (the charact of ( QuotUnivAlg (U1,E) )) . n ));
then A10: o2 = ( QuotOp (o1,E) ) by A9,CKB27:def 1;
let x being (FinSequence of U1);
reconsider x1 = x as (Element of ( u1 * )) by FINSEQ_1:def 11;
reconsider fx = ( f * x ) as (FinSequence of ( Class E ));
reconsider fx as (Element of ( ( Class E ) * )) by FINSEQ_1:def 11;
A11: ( len ( f * x ) ) = ( len x ) by FINSEQ_3:120;
now
let m;
assume A12: m in ( dom x );
then A13: m in ( dom ( f * x ) ) by FINSEQ_3:120;
( x . m ) in ( rng x ) by A12,FUNCT_1:def 3;
then reconsider xm = ( x . m ) as (Element of u1);
thus ( Class (E,( x . m )) ) = ( f . xm ) by CKB29:def 1
.= ( fx . m ) by A13,FINSEQ_3:120;
end;
then A14: x is_representatives_FS fx by A11,FINSEQ_3:def 4;
assume A15: x in ( dom o1 );
then ( o1 . x ) in ( rng o1 ) by FUNCT_1:def 3;
then reconsider ox = ( o1 . x ) as (Element of u1);
( dom o1 ) = ( ( arity o1 ) -tuples_on u1 ) by MARGREL1:22
.= { p where p is (Element of ( u1 * )): ( len p ) = ( arity o1 ) } by FINSEQ_2:def 4;
then A16: (ex p being (Element of ( u1 * )) st (p = x1 & ( len p ) = ( arity o1 ))) by A15;
A17: ( f . ( o1 . x ) ) = ( Class (E,ox) ) by CKB29:def 1
.= ( Class (E,( o1 . x )) );
( dom ( QuotOp (o1,E) ) ) = ( ( arity o1 ) -tuples_on ( Class E ) ) by CKB26:def 1
.= { q where q is (Element of ( ( Class E ) * )): ( len q ) = ( arity o1 ) } by FINSEQ_2:def 4;
then fx in ( dom ( QuotOp (o1,E) ) ) by A16,A11;
hence thesis by A17,A10,A14,CKB26:def 1;
end;
