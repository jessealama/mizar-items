environ
vocabularies UNIALG_1,SUBSET_1,NUMBERS,UNIALG_2,XBOOLE_0,FINSEQ_1,FUNCT_1,RELAT_1,NAT_1,TARSKI,STRUCT_0,PARTFUN1,MSUALG_3,CQC_SIM1,WELLORD1,FINSEQ_2,GROUP_6,EQREL_1,FUNCT_2,CARD_3,RELAT_2,ALG_1,CARD_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,NAT_1,RELAT_1,RELAT_2,FUNCT_1,RELSET_1,FINSEQ_1,PARTFUN1,EQREL_1,FINSEQ_2,FUNCT_2,STRUCT_0,MARGREL1,UNIALG_1,FINSEQOP,FINSEQ_3,UNIALG_2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB20,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
definitions UNIALG_2,RELAT_2,TARSKI,FUNCT_1,XBOOLE_0,FUNCT_2,MARGREL1,FINSEQ_3,CKB5,CKB6,CKB7,CKB8,CKB9,CKB20,CKB25,CKB26,CKB27,CKB28,CKB29;
theorems FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,PARTFUN1,UNIALG_1,UNIALG_2,RELAT_1,RELSET_1,EQREL_1,ZFMISC_1,FINSEQ_3,XBOOLE_0,RELAT_2,ORDERS_1,MARGREL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31;
schemes FINSEQ_1,RELSET_1,FUNCT_2,FUNCT_1;
registrations RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,EQREL_1,FINSEQ_2,STRUCT_0,UNIALG_1,UNIALG_2,ORDINAL1,FINSEQ_1,CARD_1,RELSET_1,MARGREL1,XBOOLE_0;
constructors EQREL_1,FINSEQOP,UNIALG_2,RELSET_1,CARD_3,FINSEQ_3,CARD_1,NAT_1,CKB5,CKB6,CKB7,CKB8,CKB9,CKB20,CKB25,CKB26,CKB27,CKB28,CKB29;
requirements BOOLE,SUBSET;
begin
reserve U1 for Universal_Algebra;
reserve U2 for Universal_Algebra;
reserve x for set;
reserve y for set;
definition
let U1;
let U2;
let f being (Function of U1,U2);
assume A1: f is_homomorphism U1,U2;
func Cng f -> (Congruence of U1)
means
:Def16: (for a,b being (Element of U1) holds ([ a,b ] in it iff ( f . a ) = ( f . b )));
existence
proof
defpred P[ set,set ]
 means
( f . $1 ) = ( f . $2 );
set u1 = (the carrier of U1);
consider R being (Relation of u1,u1) such that A2: (for x,y being (Element of u1) holds ([ x,y ] in R iff P[ x,y ])) from RELSET_1:sch 2;
R is_reflexive_in u1
proof
let x;
assume x in u1;
then reconsider x1 = x as (Element of u1);
( f . x1 ) = ( f . x1 );
hence thesis by A2;
end;
then A3: (( dom R ) = u1 & ( field R ) = u1) by ORDERS_1:13;
A4: R is_transitive_in u1
proof
let x being set,y being set,z being set;
assume that
A5: ((x in u1 & y in u1) & z in u1)
and
A6: ([ x,y ] in R & [ y,z ] in R);
reconsider x1 = x,y1 = y,z1 = z as (Element of u1) by A5;
(( f . x1 ) = ( f . y1 ) & ( f . y1 ) = ( f . z1 )) by A2,A6;
hence thesis by A2;
end;
R is_symmetric_in u1
proof
let x;
let y;
assume that
A7: (x in u1 & y in u1)
and
A8: [ x,y ] in R;
reconsider x1 = x,y1 = y as (Element of u1) by A7;
( f . x1 ) = ( f . y1 ) by A2,A8;
hence thesis by A2;
end;
then reconsider R as (Equivalence_Relation of U1) by A3,A4,PARTFUN1:def 2,RELAT_2:def 11,RELAT_2:def 16;
now
U1,U2 are_similar  by A1,CKB5:def 1;
then A9: ( signature U1 ) = ( signature U2 ) by UNIALG_2:def 1;
let n being (Element of ( NAT ));
let o being (operation of U1);
assume that
A10: n in ( dom (the charact of U1) )
and
A11: o = ( (the charact of U1) . n );
(( len ( signature U1 ) ) = ( len (the charact of U1) ) & ( len ( signature U2 ) ) = ( len (the charact of U2) )) by UNIALG_1:def 4;
then ( dom (the charact of U2) ) = ( dom (the charact of U1) ) by A9,FINSEQ_3:29;
then reconsider o2 = ( (the charact of U2) . n ) as (operation of U2) by A10,FUNCT_1:def 3;
let x being (FinSequence of U1),y being (FinSequence of U1);
assume that
A12: (x in ( dom o ) & y in ( dom o ))
and
A13: [ x,y ] in ( ExtendRel R );
(( o . x ) in ( rng o ) & ( o . y ) in ( rng o )) by A12,FUNCT_1:def 3;
then reconsider ox = ( o . x ),oy = ( o . y ) as (Element of u1);
A14: ( len x ) = ( len y ) by A13,FINSEQ_3:def 3;
A15: ( len ( f * y ) ) = ( len y ) by FINSEQ_3:120;
then A16: ( dom ( f * y ) ) = ( Seg ( len x ) ) by A14,FINSEQ_1:def 3;
A17: ( len ( f * x ) ) = ( len x ) by FINSEQ_3:120;
A18:now
let m being Nat;
assume A19: m in ( dom ( f * y ) );
then m in ( dom y ) by A14,A16,FINSEQ_1:def 3;
then A20: ( y . m ) in ( rng y ) by FUNCT_1:def 3;
A21: m in ( dom x ) by A16,A19,FINSEQ_1:def 3;
then ( x . m ) in ( rng x ) by FUNCT_1:def 3;
then reconsider xm = ( x . m ),ym = ( y . m ) as (Element of u1) by A20;
[ ( x . m ),( y . m ) ] in R by A13,A21,FINSEQ_3:def 3;
then A22: ( f . xm ) = ( f . ym ) by A2
.= ( ( f * y ) . m ) by A19,FINSEQ_3:120;
m in ( dom ( f * x ) ) by A17,A16,A19,FINSEQ_1:def 3;
hence ( ( f * y ) . m ) = ( ( f * x ) . m ) by A22,FINSEQ_3:120;
end;
(( f . ( o . x ) ) = ( o2 . ( f * x ) ) & ( f . ( o . y ) ) = ( o2 . ( f * y ) )) by A1,A10,A11,A12,CKB5:def 1;
then ( f . ox ) = ( f . oy ) by A14,A17,A15,A18,FINSEQ_2:9;
hence [ ( o . x ),( o . y ) ] in R by A2;
end;
then reconsider R as (Congruence of U1) by CKB25:def 1;
take R;
let a being (Element of u1),b being (Element of u1);
thus ([ a,b ] in R implies ( f . a ) = ( f . b )) by A2;
assume ( f . a ) = ( f . b );
hence thesis by A2;
end;
uniqueness
proof
set u1 = (the carrier of U1);
let X being (Congruence of U1),Y being (Congruence of U1);
assume that
A23: (for a,b being (Element of U1) holds ([ a,b ] in X iff ( f . a ) = ( f . b )))
and
A24: (for a,b being (Element of U1) holds ([ a,b ] in Y iff ( f . a ) = ( f . b )));
(for x,y being set holds ([ x,y ] in X iff [ x,y ] in Y))
proof
let x;
let y;
thus ([ x,y ] in X implies [ x,y ] in Y)
proof
assume A25: [ x,y ] in X;
then reconsider x1 = x,y1 = y as (Element of u1) by ZFMISC_1:87;
( f . x1 ) = ( f . y1 ) by A23,A25;
hence thesis by A24;
end;

assume A26: [ x,y ] in Y;
then reconsider x1 = x,y1 = y as (Element of u1) by ZFMISC_1:87;
( f . x1 ) = ( f . y1 ) by A24,A26;
hence thesis by A23;
end;
hence thesis by RELAT_1:def 2;
end;
end;
