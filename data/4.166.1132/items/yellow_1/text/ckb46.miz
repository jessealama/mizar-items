environ
vocabularies LATTICES,LATTICE3,SUBSET_1,STRUCT_0,EQREL_1,XBOOLE_0,PBOOLE,XXREAL_0,REWRITE1,WELLORD2,ORDERS_1,RELAT_1,ZFMISC_1,RELAT_2,ORDERS_2,TARSKI,SETFAM_1,CAT_1,YELLOW_0,WELLORD1,ORDINAL2,PRE_TOPC,RCOMP_1,PRALG_1,FUNCT_1,FUNCOP_1,CARD_3,RLVECT_2,NEWTON,FUNCT_2,SEQM_3,ORDERS_3,YELLOW_1,CARD_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,RELSET_1,SETFAM_1,FUNCT_1,ORDERS_1,CARD_3,PBOOLE,WELLORD2,TOLER_1,PARTFUN1,FUNCT_2,STRUCT_0,ORDERS_2,TOPS_2,LATTICES,ORDERS_3,LATTICE3,PRE_TOPC,FUNCOP_1,PRALG_1,YELLOW_0,CKB5,CKB6,CKB10,CKB42,CKB45;
definitions LATTICE3,XBOOLE_0,TOPS_2,TARSKI,RELAT_1,PRALG_1,CKB6,CKB10,CKB42;
theorems TARSKI,LATTICES,LATTICE3,YELLOW_0,STRUCT_0,RELAT_1,ORDERS_2,RELAT_2,RELSET_1,ZFMISC_1,WELLORD2,SETFAM_1,PRE_TOPC,TOPS_2,FUNCT_1,FUNCOP_1,PBOOLE,CARD_3,FUNCT_2,PRALG_1,ORDERS_3,XBOOLE_0,XBOOLE_1,PARTFUN1,ORDERS_1,CKB6,CKB9,CKB10,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB41,CKB42;
schemes RELSET_1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,RELSET_1,PARTFUN1,FUNCOP_1,STRUCT_0,LATTICES,PRE_TOPC,ORDERS_2,LATTICE3,YELLOW_0,PRE_CIRC,CARD_1,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB7,CKB8,CKB11,CKB12,CKB40,CKB43,CKB44;
constructors SETFAM_1,WELLORD2,TOLER_1,TOPS_2,LATTICE3,YELLOW_0,PRALG_1,ORDERS_3,CARD_3,RELSET_1,CKB5,CKB6,CKB10,CKB42,CKB45;
requirements SUBSET,BOOLE,NUMERALS;
begin
definition
let I being set;
let J being  RelStr-yielding (ManySortedSet of I);
func product J ->  strict RelStr
means
:Def4: ((the carrier of it) = ( product ( Carrier J ) ) & (for x,y being (Element of it) holds (x in ( product ( Carrier J ) ) implies (x <= y iff (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi)))))))))));
existence
proof
defpred P[ set,set ]
 means
(ex f,g being Function st ((f = $1 & g = $2) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi)))))));
consider R being (Relation of ( product ( Carrier J ) )) such that A1: (for x,y being set holds ([ x,y ] in R iff ((x in ( product ( Carrier J ) ) & y in ( product ( Carrier J ) )) & P[ x,y ]))) from RELSET_1:sch 1;
take RS = RelStr (# ( product ( Carrier J ) ),R #);
thus (the carrier of RS) = ( product ( Carrier J ) );
let x being (Element of RS),y being (Element of RS);
assume that
A2: x in ( product ( Carrier J ) );
hereby
assume x <= y;
then [ x,y ] in (the InternalRel of RS) by ORDERS_2:def 5;
hence (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi))))))) by A1;
end;
assume (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi)))))));
then [ x,y ] in (the InternalRel of RS) by A1,A2;
hence thesis by ORDERS_2:def 5;
end;
uniqueness
proof
let S1 being  strict RelStr,S2 being  strict RelStr;
assume that
A3: (the carrier of S1) = ( product ( Carrier J ) )
and
A4: (for x,y being (Element of S1) holds (x in ( product ( Carrier J ) ) implies (x <= y iff (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi))))))))))
and
A5: (the carrier of S2) = ( product ( Carrier J ) )
and
A6: (for x,y being (Element of S2) holds (x in ( product ( Carrier J ) ) implies (x <= y iff (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi))))))))));
(the InternalRel of S1) = (the InternalRel of S2)
proof
let a being set,b being set;
hereby
assume A7: [ a,b ] in (the InternalRel of S1);
then reconsider x = a,y = b as (Element of S1) by ZFMISC_1:87;
reconsider x9 = x,y9 = y as (Element of S2) by A3,A5;
A8: a in (the carrier of S1) by A7,ZFMISC_1:87;
x <= y by A7,ORDERS_2:def 5;
then (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi))))))) by A3,A4,A8;
then x9 <= y9 by A3,A6,A8;
hence [ a,b ] in (the InternalRel of S2) by ORDERS_2:def 5;
end;
assume A9: [ a,b ] in (the InternalRel of S2);
then reconsider x = a,y = b as (Element of S2) by ZFMISC_1:87;
reconsider x9 = x,y9 = y as (Element of S1) by A3,A5;
A10: a in (the carrier of S2) by A9,ZFMISC_1:87;
x <= y by A9,ORDERS_2:def 5;
then (ex f,g being Function st ((f = x & g = y) & (for i being set holds (i in I implies (ex R being RelStr st (ex xi,yi being (Element of R) st (((R = ( J . i ) & xi = ( f . i )) & yi = ( g . i )) & xi <= yi))))))) by A5,A6,A10;
then x9 <= y9 by A4,A5,A10;
hence thesis by ORDERS_2:def 5;
end;
hence thesis by A3,A5;
end;
end;
