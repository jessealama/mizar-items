environ
vocabularies FUNCT_1,RELAT_1,TARSKI,STRUCT_0,SUBSET_1,XBOOLE_0,VECTSP_1,RLVECT_5,FINSET_1,RLVECT_3,LOPBAN_1,ARYTM_3,SUPINF_2,CARD_1,RLSUB_1,FUNCT_2,ARYTM_1,MESFUNC1,VECTSP10,RLVECT_2,FUNCT_4,REALSET1,FUNCOP_1,QC_LANG1,CARD_3,RLSUB_2,FINSEQ_1,VALUED_1,NAT_1,XXREAL_0,PARTFUN1,NUMBERS,PBOOLE,RANKNULL,MSSUBFAM,UNIALG_1;
notations TARSKI,XBOOLE_0,SUBSET_1,DOMAIN_1,RELAT_1,RELSET_1,FUNCT_1,NAT_1,NUMBERS,FUNCOP_1,PARTFUN1,FUNCT_2,FUNCT_4,XCMPLX_0,XXREAL_0,CARD_1,FINSET_1,FINSEQ_1,FINSEQOP,STRUCT_0,RLVECT_1,RLVECT_2,VECTSP_1,FUNCT_7,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,MOD_2,MATRLIN,VECTSP_9,GRCAT_1,LOPBAN_1,CKB9,CKB13,CKB15,CKB16,CKB30,CKB31,CKB33,CKB40;
definitions TARSKI,RELAT_1,FUNCT_1,FINSEQ_1,VECTSP_4,VECTSP_6,XBOOLE_0,RLVECT_1,STRUCT_0,MOD_2,MATRLIN,FUNCOP_1,LOPBAN_1,FUNCT_2,CKB13,CKB16,CKB30,CKB33;
theorems TARSKI,ZFMISC_1,RELAT_1,FINSET_1,FINSEQ_1,FUNCT_1,VECTSP_7,VECTSP_9,CARD_2,XBOOLE_1,FUNCT_2,SUBSET_1,XBOOLE_0,VECTSP_1,RLVECT_1,VECTSP_4,VECTSP_6,STRUCT_0,RLVECT_2,MOD_2,MATRLIN,CARD_1,FUNCOP_1,VECTSP_5,FUNCT_7,FINSEQ_2,FUNCT_4,ENUMSET1,ORDINAL1,PARTFUN1,GRCAT_1,CKB1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB10,CKB11,CKB12,CKB13,CKB14,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB41;
schemes CLASSES1;
registrations RELAT_1,FUNCT_1,STRUCT_0,CARD_1,FINSET_1,VECTSP_9,XBOOLE_0,MATRLIN,FUNCOP_1,ORDINAL1,XREAL_0,SUBSET_1,FINSEQ_1,MOD_2,GRCAT_1,RELSET_1,CKB4,CKB5,CKB32,CKB39;
constructors NAT_1,FINSEQOP,HAHNBAN,VECTSP_6,VECTSP_7,MOD_2,VECTSP_9,REALSET1,RLVECT_2,WELLORD2,LOPBAN_1,VECTSP_5,FUNCT_7,FUNCT_4,XXREAL_0,MATRLIN,RELSET_1,CKB13,CKB15,CKB16,CKB30,CKB31,CKB33,CKB40;
requirements BOOLE,SUBSET,NUMERALS,ARITHM;
begin
reserve F for Field;
reserve V for (VectSp of F);
reserve W for (VectSp of F);
reserve T for (linear-transformation of V,W);
reserve l for (Linear_Combination of V);
definition
let F being Field;
let V being (VectSp of F);
let W being (VectSp of F);
let l being (Linear_Combination of V);
let T being (linear-transformation of V,W);
func T @ l -> (Linear_Combination of W) means 
:Def5: (for w being (Element of W) holds ( it . w ) = ( Sum ( l .: ( T " { w } ) ) ));
existence
proof
defpred P[ set,set ]
 means
(ex w being (Element of W) st ($1 = w & $2 = ( Sum ( l .: ( T " { w } ) ) )));
A1: (for x being set holds (x in ( [#] W ) implies (ex y being set st P[ x,y ])))
proof
let x being set;
assume x in ( [#] W );
then reconsider x as (Element of W);
take ( Sum ( l .: ( T " { x } ) ) );
thus thesis;
end;
consider f being Function such that A2: ( dom f ) = ( [#] W ) and A3: (for x being set holds (x in ( [#] W ) implies P[ x,( f . x ) ])) from CLASSES1:sch 1(A1);
A4: ( rng f ) c= ( [#] F )
proof
let y being set;
assume y in ( rng f );
then consider x being set such that A5: x in ( dom f ) and A6: ( f . x ) = y by FUNCT_1:def 3;
(ex w being (Element of W) st (x = w & ( f . x ) = ( Sum ( l .: ( T " { w } ) ) ))) by A2,A3,A5;
hence thesis by A6;
end;
A7: (for w being (Element of W) holds ( f . w ) = ( Sum ( l .: ( T " { w } ) ) ))
proof
let w being (Element of W);
(ex w9 being (Element of W) st (w = w9 & ( f . w ) = ( Sum ( l .: ( T " { w9 } ) ) ))) by A3;
hence thesis;
end;
reconsider f as (Element of ( Funcs (( [#] W ),( [#] F )) )) by A2,A4,FUNCT_2:def 2;
(ex T being  finite (Subset of W) st (for w being (Element of W) holds ((not w in T) implies ( f . w ) = ( 0. F ))))
proof
set X = { w where w is (Element of W): ( f . w ) <> ( 0. F ) };
X c= ( [#] W )
proof
let x being set;
assume x in X;
then (ex w being (Element of W) st (x = w & ( f . w ) <> ( 0. F )));
hence thesis;
end;
then reconsider X as (Subset of W);
set C = ( Carrier l );
reconsider TC = ( T .: C ) as (Subset of W);
X c= TC
proof
let x being set;
assume x in X;
then consider w being (Element of W) such that A8: x = w and A9: ( f . w ) <> ( 0. F );
( T " { w } ) meets ( Carrier l )
proof
assume A10: ( T " { w } ) misses ( Carrier l );
then A11: ( l .: ( T " { w } ) ) c= { ( 0. F ) } by CKB41:1;
( Sum ( l .: ( T " { w } ) ) ) = ( 0. F )
proof
per cases ;
suppose ( l .: ( T " { w } ) ) = ( {} F );

hence thesis by RLVECT_2:8;
end;
suppose A12: ( l .: ( T " { w } ) ) <> ( {} F );

A13: { ( 0. F ) } c= ( l .: ( T " { w } ) )
proof
let y being set;
assume y in { ( 0. F ) };
then A14: y = ( 0. F ) by TARSKI:def 1;
(ex z being set st z in ( l .: ( T " { w } ) )) by A12,XBOOLE_0:def 1;
hence thesis by A11,A14,TARSKI:def 1;
end;
( l .: ( T " { w } ) ) c= { ( 0. F ) } by A10,CKB41:1;
then ( l .: ( T " { w } ) ) = { ( 0. F ) } by A13,XBOOLE_0:def 10;
hence thesis by RLVECT_2:9;
end;
end;
hence contradiction by A7,A9;
end;
then consider y being set such that A15: y in ( T " { w } ) and A16: y in ( Carrier l ) by XBOOLE_0:3;
A17: ( dom T ) = ( [#] V ) by CKB10:1;
reconsider y as (Element of V) by A16;
( T . y ) in { w } by A15,FUNCT_1:def 7;
then ( T . y ) = w by TARSKI:def 1;
hence thesis by A8,A16,A17,FUNCT_1:def 6;
end;
then reconsider X as  finite (Subset of W);
take X;
thus thesis;
end;
then reconsider f as (Linear_Combination of W) by VECTSP_6:def 1;
take f;
(for w being (Element of W) holds ( f . w ) = ( Sum ( l .: ( T " { w } ) ) ))
proof
let w being (Element of W);
(ex w9 being (Element of W) st (w = w9 & ( f . w ) = ( Sum ( l .: ( T " { w9 } ) ) ))) by A3;
hence thesis;
end;
hence thesis;
end;
uniqueness
proof
let f being (Linear_Combination of W);
let g being (Linear_Combination of W);
assume that
A18: (for w being (Element of W) holds ( f . w ) = ( Sum ( l .: ( T " { w } ) ) ))
and
A19: (for w being (Element of W) holds ( g . w ) = ( Sum ( l .: ( T " { w } ) ) ));
A20: (for x being set holds (x in ( dom f ) implies ( f . x ) = ( g . x )))
proof
let x being set;
assume x in ( dom f );
then reconsider x as (Element of W);
( f . x ) = ( Sum ( l .: ( T " { x } ) ) ) by A18;
hence thesis by A19;
end;
(( dom f ) = ( [#] W ) & ( dom g ) = ( [#] W )) by FUNCT_2:92;
hence thesis by A20,FUNCT_1:def 11;
end;
end;
