environ
vocabularies FUNCT_1,RELAT_1,TARSKI,STRUCT_0,SUBSET_1,XBOOLE_0,VECTSP_1,RLVECT_5,FINSET_1,RLVECT_3,LOPBAN_1,ARYTM_3,SUPINF_2,CARD_1,RLSUB_1,FUNCT_2,ARYTM_1,MESFUNC1,VECTSP10,RLVECT_2,FUNCT_4,REALSET1,FUNCOP_1,QC_LANG1,CARD_3,RLSUB_2,FINSEQ_1,VALUED_1,NAT_1,XXREAL_0,PARTFUN1,NUMBERS,PBOOLE,RANKNULL,MSSUBFAM,UNIALG_1;
notations TARSKI,XBOOLE_0,SUBSET_1,DOMAIN_1,RELAT_1,RELSET_1,FUNCT_1,NAT_1,NUMBERS,FUNCOP_1,PARTFUN1,FUNCT_2,FUNCT_4,XCMPLX_0,XXREAL_0,CARD_1,FINSET_1,FINSEQ_1,FINSEQOP,STRUCT_0,RLVECT_1,RLVECT_2,VECTSP_1,FUNCT_7,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,MOD_2,MATRLIN,VECTSP_9,GRCAT_1,LOPBAN_1,CKB9,CKB13,CKB15,CKB16,CKB30,CKB31,CKB33,CKB40,CKB42;
definitions TARSKI,RELAT_1,FUNCT_1,FINSEQ_1,VECTSP_4,VECTSP_6,XBOOLE_0,RLVECT_1,STRUCT_0,MOD_2,MATRLIN,FUNCOP_1,LOPBAN_1,FUNCT_2,CKB13,CKB16,CKB30,CKB33,CKB42;
theorems TARSKI,ZFMISC_1,RELAT_1,FINSET_1,FINSEQ_1,FUNCT_1,VECTSP_7,VECTSP_9,CARD_2,XBOOLE_1,FUNCT_2,SUBSET_1,XBOOLE_0,VECTSP_1,RLVECT_1,VECTSP_4,VECTSP_6,STRUCT_0,RLVECT_2,MOD_2,MATRLIN,CARD_1,FUNCOP_1,VECTSP_5,FUNCT_7,FINSEQ_2,FUNCT_4,ENUMSET1,ORDINAL1,PARTFUN1,GRCAT_1,CKB1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB10,CKB11,CKB12,CKB13,CKB14,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55;
schemes CLASSES1;
registrations RELAT_1,FUNCT_1,STRUCT_0,CARD_1,FINSET_1,VECTSP_9,XBOOLE_0,MATRLIN,FUNCOP_1,ORDINAL1,XREAL_0,SUBSET_1,FINSEQ_1,MOD_2,GRCAT_1,RELSET_1,CKB4,CKB5,CKB32,CKB39;
constructors NAT_1,FINSEQOP,HAHNBAN,VECTSP_6,VECTSP_7,MOD_2,VECTSP_9,REALSET1,RLVECT_2,WELLORD2,LOPBAN_1,VECTSP_5,FUNCT_7,FUNCT_4,XXREAL_0,MATRLIN,RELSET_1,CKB13,CKB15,CKB16,CKB30,CKB31,CKB33,CKB40,CKB42;
requirements BOOLE,SUBSET,NUMERALS,ARITHM;
begin
reserve F for Field;
reserve V for (VectSp of F);
reserve W for (VectSp of F);
reserve T for (linear-transformation of V,W);
reserve l for (Linear_Combination of V);
definition
let F being Field;
let V being (VectSp of F);
let W being (VectSp of F);
let X being (Subset of V);
let T being (linear-transformation of V,W);
let l being (Linear_Combination of ( T .: X ));
assume A1: ( T | X ) is  one-to-one;
func T # l -> (Linear_Combination of X) equals 
:Def6: ( ( l * T ) +* ( ( V \ X ) --> ( 0. F ) ) );
coherence
proof
(( rng ( l * T ) ) c= ( rng l ) & ( rng l ) c= ( [#] F )) by FUNCT_2:92,RELAT_1:26;
then A2: ( rng ( l * T ) ) c= ( [#] F ) by XBOOLE_1:1;
( dom l ) = ( [#] W ) by FUNCT_2:92;
then ( rng T ) c= ( dom l ) by CKB10:1;
then A3: ( dom ( l * T ) ) = ( dom T ) by RELAT_1:27;
set f = ( ( l * T ) +* ( ( V \ X ) --> ( 0. F ) ) );
A4: ( dom ( ( V \ X ) --> ( 0. F ) ) ) = ( ( [#] V ) \ X ) by FUNCOP_1:13;
( rng ( ( V \ X ) --> ( 0. F ) ) ) c= { ( 0. F ) } by FUNCOP_1:13;
then ( rng ( ( V \ X ) --> ( 0. F ) ) ) c= ( [#] F ) by XBOOLE_1:1;
then (( rng f ) c= ( ( rng ( l * T ) ) \/ ( rng ( ( V \ X ) --> ( 0. F ) ) ) ) & ( ( rng ( l * T ) ) \/ ( rng ( ( V \ X ) --> ( 0. F ) ) ) ) c= ( [#] F )) by A2,FUNCT_4:17,XBOOLE_1:8;
then A5: ( rng f ) c= ( [#] F ) by XBOOLE_1:1;
(( dom T ) = ( [#] V ) & ( ( [#] V ) \/ ( ( [#] V ) \ X ) ) = ( [#] V )) by CKB10:1,XBOOLE_1:12;
then ( dom f ) = ( [#] V ) by A3,A4,FUNCT_4:def 1;
then reconsider f as (Element of ( Funcs (( [#] V ),( [#] F )) )) by A5,FUNCT_2:def 2;
(ex T being  finite (Subset of V) st (for v being (Element of V) holds ((not v in T) implies ( f . v ) = ( 0. F ))))
proof
set C = { v where v is (Element of V): ( f . v ) <> ( 0. F ) };
C c= ( [#] V )
proof
let x being set;
assume x in C;
then (ex v being (Element of V) st (v = x & ( f . v ) <> ( 0. F )));
hence thesis;
end;
then reconsider C as (Subset of V);
(ex g being Function st ((g is  one-to-one & ( dom g ) = C) & ( rng g ) c= ( Carrier l )))
proof
set S = ( ( T " ( Carrier l ) ) /\ X );
set g = ( T | S );
take g;
A6: C c= S
proof
let x being set;
assume that
A7: x in C;
A8: (ex v being (Element of V) st (v = x & ( f . v ) <> ( 0. F ))) by A7;
reconsider x as (Element of V) by A7;
A9:now
assume (not x in X);
then A10: x in ( V \ X ) by XBOOLE_0:def 5;
then x in ( dom ( ( V \ X ) --> ( 0. F ) ) ) by FUNCOP_1:13;
then ( f . x ) = ( ( ( V \ X ) --> ( 0. F ) ) . x ) by FUNCT_4:13;
hence contradiction by A8,A10,FUNCOP_1:7;
end;
then (not x in ( V \ X )) by XBOOLE_0:def 5;
then A11: ( f . x ) = ( ( l * T ) . x ) by A4,FUNCT_4:11;
A12: ( dom T ) = ( [#] V ) by CKB10:1;
then ( ( l * T ) . x ) = ( l . ( T . x ) ) by FUNCT_1:13;
then ( T . x ) in ( Carrier l ) by A8,A11;
then x in ( T " ( Carrier l ) ) by A12,FUNCT_1:def 7;
hence thesis by A9,XBOOLE_0:def 4;
end;
A13: ( dom T ) = ( [#] V ) by CKB10:1;
then A14: ( dom g ) = S by RELAT_1:62;
A15: ( rng g ) c= ( Carrier l )
proof
let y being set;
assume y in ( rng g );
then consider x being set such that A16: x in ( dom g ) and A17: y = ( g . x ) by FUNCT_1:def 3;
x in ( T " ( Carrier l ) ) by A14,A16,XBOOLE_0:def 4;
then ( T . x ) in ( Carrier l ) by FUNCT_1:def 7;
hence thesis by A14,A16,A17,FUNCT_1:49;
end;
S c= C
proof
let x being set;
assume that
A18: x in S;
A19: x in X by A18,XBOOLE_0:def 4;
A20: x in ( T " ( Carrier l ) ) by A18,XBOOLE_0:def 4;
then A21: x in ( dom T ) by FUNCT_1:def 7;
A22: ( T . x ) in ( Carrier l ) by A20,FUNCT_1:def 7;
reconsider x as (Element of V) by A18;
A23: ( l . ( T . x ) ) <> ( 0. F ) by A22,VECTSP_6:2;
(not x in ( dom ( ( V \ X ) --> ( 0. F ) ) )) by A19,XBOOLE_0:def 5;
then A24: ( f . x ) = ( ( l * T ) . x ) by FUNCT_4:11;
( ( l * T ) . x ) = ( l . ( T . x ) ) by A21,FUNCT_1:13;
hence thesis by A24,A23;
end;
then S = C by A6,XBOOLE_0:def 10;
hence thesis by A1,A13,A15,CKB2:1,RELAT_1:62,XBOOLE_1:17;
end;
then ( card C ) c= ( card ( Carrier l ) ) by CARD_1:10;
then reconsider C as  finite (Subset of V);
take C;
thus thesis;
end;
then reconsider f as (Linear_Combination of V) by VECTSP_6:def 1;
( Carrier f ) c= X
proof
let x being set;
assume that
A25: x in ( Carrier f );
reconsider x as (Element of V) by A25;
now
assume (not x in X);
then A26: x in ( V \ X ) by XBOOLE_0:def 5;
then ( f . x ) = ( ( ( V \ X ) --> ( 0. F ) ) . x ) by A4,FUNCT_4:13
.= ( 0. F ) by A26,FUNCOP_1:7;
hence contradiction by A25,VECTSP_6:2;
end;
hence thesis;
end;
hence thesis by VECTSP_6:def 4;
end;
end;
