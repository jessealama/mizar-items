environ
vocabularies NUMBERS,SUPINF_1,COMPLEX1,ARYTM_1,XXREAL_0,XREAL_0,ORDINAL1,ARYTM_3,MEASURE6,NAT_1,CARD_1,NEWTON,RELAT_1,REAL_1,SUBSET_1,INT_1,PARTFUN1,FUNCT_1,SUPINF_2,XBOOLE_0,PROB_1,MESFUNC2,VALUED_0,RAT_1,MESFUNC1,TARSKI,MEASURE1,VALUED_1,RFUNCT_3,FINSEQ_1,MESFUNC3,CARD_3,ZFMISC_1,SEQ_2,ORDINAL2,XCMPLX_0,XXREAL_2,SEQFUNC,PBOOLE,INTEGRA1,FINSET_1,MEMBERED,SETLIM_1,INTEGRA5,FUNCT_3,MESFUNC5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,XXREAL_2,XXREAL_3,REAL_1,RELAT_1,FUNCT_1,FINSEQ_1,RELSET_1,FINSET_1,PARTFUN1,FUNCT_2,INT_1,NAT_D,RAT_1,MEMBERED,SQUARE_1,SUPINF_1,SUPINF_2,MEASURE1,EXTREAL1,NAT_1,MESFUNC1,MESFUNC2,MESFUNC3,FINSEQOP,RFUNCT_3,PROB_1,MEASURE6,NEWTON,LIMFUNC1,SEQFUNC,SETLIM_1,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB27;
definitions TARSKI,XBOOLE_0,FINSEQ_1,CARD_3,MEASURE6,XXREAL_3,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB27;
theorems MEASURE1,MEASURE2,TARSKI,PARTFUN1,FUNCT_1,FUNCT_2,MEASURE6,NAT_1,SUPINF_2,RELSET_1,EXTREAL1,INT_1,EXTREAL2,MESFUNC1,FINSEQ_1,XREAL_0,PROB_1,PROB_2,XBOOLE_0,NAT_2,XBOOLE_1,XCMPLX_1,MESFUNC2,MESFUNC3,NEWTON,XREAL_1,PREPOWER,XXREAL_0,MESFUNC4,ZFMISC_1,SETLIM_1,FINSEQ_3,RAT_1,FUNCT_3,RELAT_1,FINSUB_1,GRFUNC_1,FINSEQ_2,ORDINAL1,NAT_D,NUMBERS,CARD_1,XXREAL_2,VALUED_0,XXREAL_3,KURATO_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41;
schemes CLASSES1,FUNCT_2,FINSEQ_1,FINSEQ_2,NAT_1,SEQFUNC,PARTFUN1;
registrations SUBSET_1,ORDINAL1,RELSET_1,PARTFUN1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,RAT_1,MEMBERED,COMPLEX1,FINSEQ_1,MEASURE1,VALUED_0,XXREAL_2,XBOOLE_0,XXREAL_3,XCMPLX_0,CKB20,CKB21;
constructors WELLORD2,REAL_1,SQUARE_1,NAT_D,FINSEQOP,LIMFUNC1,SEQFUNC,NEWTON,RFUNCT_3,MEASURE6,EXTREAL1,MESFUNC1,EXTREAL2,BINARITH,MESFUNC2,KURATO_0,MESFUNC3,SETLIM_1,SUPINF_1,RELSET_1,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB27;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
(for X being non  empty set holds (for S being (SigmaField of X) holds (for M being (sigma_Measure of S) holds (for f being (PartFunc of X,( ExtREAL )) holds ((f is_simple_func_in S & ( dom f ) = ( {} )) implies (ex F being (Finite_Sep_Sequence of S) st (ex a,x being (FinSequence of ( ExtREAL )) st (((((F,a are_Re-presentation_of f & ( a . 1 ) = ( 0 )) & (for n being Nat holds ((2 <= n & n in ( dom a )) implies (( 0 ) < ( a . n ) & ( a . n ) < ( +infty ))))) & ( dom x ) = ( dom F )) & (for n being Nat holds (n in ( dom x ) implies ( x . n ) = ( ( a . n ) * ( ( M * F ) . n ) )))) & ( Sum x ) = ( 0 )))))))))
proof
let X being non  empty set;
let S being (SigmaField of X);
let M being (sigma_Measure of S);
let f being (PartFunc of X,( ExtREAL ));
assume that
A1: f is_simple_func_in S
and
A2: ( dom f ) = ( {} );
(for x being set holds (x in ( dom f ) implies ( 0 ) <= ( f . x ))) by A2;
then consider F being (Finite_Sep_Sequence of S),a being (FinSequence of ( ExtREAL )) such that A3: F,a are_Re-presentation_of f and A4: ( a . 1 ) = ( 0 ) and A5: (for n being Nat holds ((2 <= n & n in ( dom a )) implies (( 0 ) < ( a . n ) & ( a . n ) < ( +infty )))) by A1,MESFUNC3:14;
deffunc F(Nat) = ( ( a . $1 ) * ( ( M * F ) . $1 ) );
consider x being (FinSequence of ( ExtREAL )) such that A6: ( len x ) = ( len F ) and A7: (for n being Nat holds (n in ( dom x ) implies ( x . n ) = F(n))) from FINSEQ_2:sch 1;
A8: ( dom x ) = ( Seg ( len F ) ) by A6,FINSEQ_1:def 3;
then A9: ( dom x ) = ( dom F ) by FINSEQ_1:def 3;
take F;
take a;
take x;
consider sumx being (Function of ( NAT ),( ExtREAL )) such that A10: ( Sum x ) = ( sumx . ( len x ) ) and A11: ( sumx . ( 0 ) ) = ( 0 ) and A12: (for i being (Element of ( NAT )) holds (i < ( len x ) implies ( sumx . ( i + 1 ) ) = ( ( sumx . i ) + ( x . ( i + 1 ) ) ))) by EXTREAL1:def 2;
defpred P[ Nat ]
 means
($1 <= ( len x ) implies ( sumx . $1 ) = ( 0 ));
A13: ( union ( rng F ) ) = ( {} ) by A2,A3,MESFUNC3:def 1;
A14: (for n being Nat holds (n in ( dom F ) implies ( F . n ) = ( {} )))
proof
let n being Nat;
assume n in ( dom F );
then A15: ( F . n ) in ( rng F ) by FUNCT_1:3;
assume ( F . n ) <> ( {} );
then (ex v being set st v in ( F . n )) by XBOOLE_0:def 1;
hence contradiction by A13,A15,TARSKI:def 4;
end;
A16: (for i being Nat holds (P[ i ] implies P[ ( i + 1 ) ]))
proof
let i being Nat;
assume A17: P[ i ];
assume A18: ( i + 1 ) <= ( len x );
reconsider i as (Element of ( NAT )) by ORDINAL1:def 12;
i < ( len x ) by A18,NAT_1:13;
then A19: ( sumx . ( i + 1 ) ) = ( ( sumx . i ) + ( x . ( i + 1 ) ) ) by A12;
1 <= ( i + 1 ) by NAT_1:11;
then A20: ( i + 1 ) in ( dom x ) by A18,FINSEQ_3:25;
then ( F . ( i + 1 ) ) = ( {} ) by A9,A14;
then ( M . ( F . ( i + 1 ) ) ) = ( 0 ) by VALUED_0:def 19;
then A21: ( ( M * F ) . ( i + 1 ) ) = ( 0 ) by A9,A20,FUNCT_1:13;
( x . ( i + 1 ) ) = ( ( a . ( i + 1 ) ) * ( ( M * F ) . ( i + 1 ) ) ) by A7,A20
.= ( 0 ) by A21;
hence thesis by A17,A18,A19,NAT_1:13;
end;
A22: P[ ( 0 ) ] by A11;
(for i being Nat holds P[ i ]) from NAT_1:sch 2(A22,A16);
hence thesis by A3,A4,A5,A7,A8,A10,FINSEQ_1:def 3;
end;
