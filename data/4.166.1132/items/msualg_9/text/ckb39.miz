environ
vocabularies XBOOLE_0,STRUCT_0,MSUALG_1,PBOOLE,FINSET_1,SUBSET_1,CLOSURE2,TARSKI,RELAT_1,FUNCT_1,FINSEQ_1,MARGREL1,NAT_1,PRALG_2,CARD_3,RLVECT_2,MSAFREE,PRELAMB,ZFMISC_1,PRALG_1,MCART_1,EQREL_1,FUNCOP_1,MSUALG_3,TREES_4,LANG1,NUMBERS,MSUALG_2,MEMBER_1,GROUP_6,WELLORD1,PARTFUN1,FUNCT_6,FINSEQ_4,PZFMISC1,CARD_1,MSUALG_4,MSUALG_5,SETFAM_1,FUNCT_4,RELAT_2,MSUALG_9;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,RELAT_1,RELAT_2,STRUCT_0,SETFAM_1,FUNCT_1,PBOOLE,EQREL_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,LANG1,MCART_1,FINSET_1,CARD_3,TREES_4,FUNCT_6,DTCONSTR,MSUALG_1,MSUALG_2,PRALG_1,PRALG_3,MSUALG_3,MSAFREE,PRALG_2,FUNCOP_1,MSAFREE2,MSUALG_4,PZFMISC1,MSSUBFAM,CLOSURE2,MSUALG_5,CKB27,CKB28;
definitions FINSEQ_1,FUNCT_1,MSAFREE2,FINSET_1,MSUALG_1,MSUALG_3,PZFMISC1,MSUALG_4,PBOOLE,TARSKI,XBOOLE_0,CKB27,CKB28;
theorems CARD_3,CLOSURE1,CLOSURE2,EXTENS_1,EQREL_1,FINSEQ_1,FUNCOP_1,FUNCT_1,FUNCT_2,MCART_1,MSAFREE,MSAFREE2,MSSUBFAM,MSUALG_1,MSUALG_2,MSUALG_3,MSUALG_4,MSUALG_5,MSUALG_6,MSUALG_7,PARTFUN1,PBOOLE,PRALG_1,PRALG_2,PZFMISC1,RELAT_2,SETFAM_1,TARSKI,RELSET_1,XBOOLE_0,XBOOLE_1,ORDERS_1,RELAT_1,FINSET_1,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB35,CKB36,CKB37,CKB38;
schemes MSSUBFAM,PBOOLE,MSUALG_8;
registrations XBOOLE_0,RELAT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,EQREL_1,PRE_CIRC,PZFMISC1,MSSUBFAM,STRUCT_0,FUNCT_1,MSUALG_1,MSUALG_2,PRALG_2,MSUALG_3,MSAFREE,MSUALG_4,MSUALG_5,CLOSURE2,CARD_3,RELSET_1,PRALG_1,PBOOLE,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB33,CKB34;
constructors SETFAM_1,BINOP_1,PZFMISC1,MSUALG_3,MSAFREE2,MSUALG_5,CLOSURE1,CLOSURE2,PRALG_3,RELSET_1,CIRCUIT1,NAT_1,FUNCT_6,FUNCT_5,CKB27,CKB28;
requirements SUBSET,BOOLE;
begin
reserve S for non empty non void ManySortedSign;
theorem
(for A being  non-empty MSAlgebra over S holds (for R being (Subset of ( CongrLatt A )) holds (for F being (SubsetFamily of [| (the Sorts of A),(the Sorts of A) |]) holds (R = F implies ( meet |: F :| ) is (MSCongruence of A)))))
proof
let A being  non-empty MSAlgebra over S;
let R being (Subset of ( CongrLatt A ));
let F being (SubsetFamily of [| (the Sorts of A),(the Sorts of A) |]);
assume that
A1: R = F;
set R0 = ( meet |: F :| );
set SF = (the Sorts of A);
set I = (the carrier of S);
per cases ;
suppose F is non empty;

then reconsider F1 = F as non empty (SubsetFamily of [| SF,SF |]);
A2: F1 c= (the carrier of ( EqRelLatt SF ))
proof
let q being set;
assume q in F1;
then q is (MSCongruence of A) by A1,MSUALG_5:def 6;
hence thesis by MSUALG_5:def 5;
end;
then A3: R0 is  MSEquivalence_Relation-like  MSEquivalence_Relation-like (ManySortedRelation of SF) by MSUALG_7:8;
reconsider R0 as (ManySortedRelation of A) by A2,MSUALG_7:8;
R0 is  MSEquivalence-like
proof
let i being set;
let R being (Relation of ( SF . i ));
assume (i in I & ( R0 . i ) = R);
hence thesis by A3,MSUALG_4:def 2;
end;
then reconsider R0 as  MSEquivalence-like (ManySortedRelation of A);
now
let o being (OperSymbol of S);
let a being (Element of ( Args (o,A) )),b being (Element of ( Args (o,A) ));
assume that
A4: (for n being Nat holds (n in ( dom a ) implies [ ( a . n ),( b . n ) ] in ( R0 . ( ( the_arity_of o ) /. n ) )));
set r = ( the_result_sort_of o );
consider Q being (Subset-Family of ( [| SF,SF |] . r )) such that A5: Q = ( |: F1 :| . r ) and A6: ( R0 . r ) = ( Intersect Q ) by MSSUBFAM:def 1;
A7: Q = { ( s . r ) where s is (Element of ( Bool [| SF,SF |] )): s in F1 } by A5,CLOSURE2:14;
now
let Y being set;
assume Y in Q;
then consider s being (Element of ( Bool [| SF,SF |] )) such that A8: Y = ( s . r ) and A9: s in F1 by A7;
reconsider s as (MSCongruence of A) by A1,A9,MSUALG_5:def 6;
now
let n being Nat;
assume that
A10: n in ( dom a );
set t = ( ( the_arity_of o ) /. n );
consider G being (Subset-Family of ( [| SF,SF |] . t )) such that A11: G = ( |: F1 :| . t ) and A12: ( R0 . t ) = ( Intersect G ) by MSSUBFAM:def 1;
G = { ( j . t ) where j is (Element of ( Bool [| SF,SF |] )): j in F1 } by A11,CLOSURE2:14;
then A13: ( s . t ) in G by A9;
[ ( a . n ),( b . n ) ] in ( Intersect G ) by A4,A10,A12;
then [ ( a . n ),( b . n ) ] in ( meet G ) by A11,SETFAM_1:def 9;
hence [ ( a . n ),( b . n ) ] in ( s . t ) by A13,SETFAM_1:def 1;
end;
hence [ ( ( Den (o,A) ) . a ),( ( Den (o,A) ) . b ) ] in Y by A8,MSUALG_4:def 4;
end;
then [ ( ( Den (o,A) ) . a ),( ( Den (o,A) ) . b ) ] in ( meet Q ) by A5,SETFAM_1:def 1;
hence [ ( ( Den (o,A) ) . a ),( ( Den (o,A) ) . b ) ] in ( R0 . ( the_result_sort_of o ) ) by A5,A6,SETFAM_1:def 9;
end;
hence thesis by MSUALG_4:def 4;
end;
suppose F is  empty;

then |: F :| = ( [[0]] I ) by CLOSURE2:def 3;
then ( meet |: F :| ) = [| (the Sorts of A),(the Sorts of A) |] by MSSUBFAM:41;
hence thesis by MSUALG_5:18;
end;
end;
