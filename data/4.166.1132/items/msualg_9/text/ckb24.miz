environ
vocabularies XBOOLE_0,STRUCT_0,MSUALG_1,PBOOLE,FINSET_1,SUBSET_1,CLOSURE2,TARSKI,RELAT_1,FUNCT_1,FINSEQ_1,MARGREL1,NAT_1,PRALG_2,CARD_3,RLVECT_2,MSAFREE,PRELAMB,ZFMISC_1,PRALG_1,MCART_1,EQREL_1,FUNCOP_1,MSUALG_3,TREES_4,LANG1,NUMBERS,MSUALG_2,MEMBER_1,GROUP_6,WELLORD1,PARTFUN1,FUNCT_6,FINSEQ_4,PZFMISC1,CARD_1,MSUALG_4,MSUALG_5,SETFAM_1,FUNCT_4,RELAT_2,MSUALG_9;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,RELAT_1,RELAT_2,STRUCT_0,SETFAM_1,FUNCT_1,PBOOLE,EQREL_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,LANG1,MCART_1,FINSET_1,CARD_3,TREES_4,FUNCT_6,DTCONSTR,MSUALG_1,MSUALG_2,PRALG_1,PRALG_3,MSUALG_3,MSAFREE,PRALG_2,FUNCOP_1,MSAFREE2,MSUALG_4,PZFMISC1,MSSUBFAM,CLOSURE2,MSUALG_5;
definitions FINSEQ_1,FUNCT_1,MSAFREE2,FINSET_1,MSUALG_1,MSUALG_3,PZFMISC1,MSUALG_4,PBOOLE,TARSKI,XBOOLE_0;
theorems CARD_3,CLOSURE1,CLOSURE2,EXTENS_1,EQREL_1,FINSEQ_1,FUNCOP_1,FUNCT_1,FUNCT_2,MCART_1,MSAFREE,MSAFREE2,MSSUBFAM,MSUALG_1,MSUALG_2,MSUALG_3,MSUALG_4,MSUALG_5,MSUALG_6,MSUALG_7,PARTFUN1,PBOOLE,PRALG_1,PRALG_2,PZFMISC1,RELAT_2,SETFAM_1,TARSKI,RELSET_1,XBOOLE_0,XBOOLE_1,ORDERS_1,RELAT_1,FINSET_1,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23;
schemes MSSUBFAM,PBOOLE,MSUALG_8;
registrations XBOOLE_0,RELAT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,EQREL_1,PRE_CIRC,PZFMISC1,MSSUBFAM,STRUCT_0,FUNCT_1,MSUALG_1,MSUALG_2,PRALG_2,MSUALG_3,MSAFREE,MSUALG_4,MSUALG_5,CLOSURE2,CARD_3,RELSET_1,PRALG_1,PBOOLE,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
constructors SETFAM_1,BINOP_1,PZFMISC1,MSUALG_3,MSAFREE2,MSUALG_5,CLOSURE1,CLOSURE2,PRALG_3,RELSET_1,CIRCUIT1,NAT_1,FUNCT_6,FUNCT_5;
requirements SUBSET,BOOLE;
begin
reserve S for non  empty non  void ManySortedSign;
theorem
Th18: (for A,B being  non-empty MSAlgebra over S holds (for F being (ManySortedFunction of A,B) holds (F is  "onto" implies (for o being (OperSymbol of S) holds (for x being (Element of ( Args (o,B) )) holds (ex y being (Element of ( Args (o,A) )) st ( F # y ) = x))))))
proof
let A being  non-empty MSAlgebra over S;
let B being  non-empty MSAlgebra over S;
let F being (ManySortedFunction of A,B);
assume that
A1: F is  "onto";
let o being (OperSymbol of S);
let t being (Element of ( Args (o,B) ));
set D = ( len ( the_arity_of o ) );
defpred P[ set,set ]
 means
(ex y1 being (Element of ( (the Sorts of A) . ( ( the_arity_of o ) /. $1 ) )) st (( ( F . ( ( the_arity_of o ) /. $1 ) ) . y1 ) = ( t . $1 ) & $2 = y1));
A2: (for k being (Element of ( NAT )) holds (k in ( Seg D ) implies (ex x being set st P[ k,x ])))
proof
let k being (Element of ( NAT ));
assume k in ( Seg D );
then A3: k in ( dom ( the_arity_of o ) ) by FINSEQ_1:def 3;
set s = ( ( the_arity_of o ) /. k );
A4: ( t . k ) in ( (the Sorts of B) . s ) by A3,MSUALG_6:2;
( rng ( F . s ) ) = ( (the Sorts of B) . s ) by A1,MSUALG_3:def 3;
then consider y1 being set such that A5: y1 in ( (the Sorts of A) . s ) and A6: ( ( F . s ) . y1 ) = ( t . k ) by A4,FUNCT_2:11;
reconsider y2 = y1 as (Element of ( (the Sorts of A) . s )) by A5;
take y1;
take y2;
thus thesis by A6;
end;
consider p being FinSequence such that A7: ( dom p ) = ( Seg D ) and A8: (for k being (Element of ( NAT )) holds (k in ( Seg D ) implies P[ k,( p . k ) ])) from MSUALG_8:sch 1(A2);
A9: ( len p ) = ( len ( the_arity_of o ) ) by A7,FINSEQ_1:def 3;
(for k being Nat holds (k in ( dom p ) implies ( p . k ) in ( (the Sorts of A) . ( ( the_arity_of o ) /. k ) )))
proof
let k being Nat;
assume k in ( dom p );
then (ex y1 being (Element of ( (the Sorts of A) . ( ( the_arity_of o ) /. k ) )) st (( ( F . ( ( the_arity_of o ) /. k ) ) . y1 ) = ( t . k ) & ( p . k ) = y1)) by A7,A8;
hence thesis;
end;
then reconsider p as (Element of ( Args (o,A) )) by A9,MSAFREE2:5;
set fp = ( F # p );
take p;
reconsider E = ( (the Sorts of B) * ( the_arity_of o ) ) as  non-empty (ManySortedSet of ( dom ( the_arity_of o ) ));
A10: ( Args (o,B) ) = ( product E ) by PRALG_2:3;
A11: ( Seg D ) = ( dom ( the_arity_of o ) ) by FINSEQ_1:def 3
.= ( dom ( (the Sorts of B) * ( the_arity_of o ) ) ) by PRALG_2:3
.= ( dom t ) by A10,CARD_3:9;
A12: (for k being Nat holds (k in ( dom t ) implies ( fp . k ) = ( t . k )))
proof
let k being Nat;
assume A13: k in ( dom t );
then (ex y1 being (Element of ( (the Sorts of A) . ( ( the_arity_of o ) /. k ) )) st (( ( F . ( ( the_arity_of o ) /. k ) ) . y1 ) = ( t . k ) & ( p . k ) = y1)) by A11,A8;
hence thesis by A11,A7,A13,MSUALG_3:def 6;
end;
( dom fp ) = ( dom ( (the Sorts of B) * ( the_arity_of o ) ) ) by A10,CARD_3:9
.= ( dom t ) by A10,CARD_3:9;
hence thesis by A12,FINSEQ_1:13;
end;
