environ
vocabularies ABIAN,AOFA_I00,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,COMPLEX1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCOP_1,FUNCT_1,FUNCT_2,FUNCT_4,GLIB_000,INT_1,JORDAN2C,MATROID0,MEASURE5,MEMBERED,METRIC_1,NAT_1,NEWTON,NUMBERS,ORDERS_1,ORDINAL1,ORDINAL2,ORDINAL4,PARTFUN1,PCOMPS_1,PEPIN,POWER,PRE_TOPC,QC_LANG1,RCOMP_1,REAL_1,RELAT_1,RLAFFIN1,RLAFFIN2,RLVECT_1,RLVECT_2,RLVECT_5,RUSUB_4,SEMI_AF1,SEQ_4,SETFAM_1,SGRAPH1,SIMPLEX0,SIMPLEX1,SQUARE_1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TOPDIM_1,TOPMETR,TOPS_1,TOPS_2,VALUED_1,WEIERSTR,XBOOLE_0,XREAL_0,XXREAL_0,XXREAL_1,XXREAL_2,ZFMISC_1,SIMPLEX2;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,ZFMISC_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,PARTFUN1,FUNCOP_1,FUNCT_4,XXREAL_3,VALUED_1,NAT_1,PRE_TOPC,NUMBERS,XREAL_0,FINSEQ_1,BINOP_1,FINSEQ_2,TOPMETR,METRIC_1,EUCLID,FINSET_1,XXREAL_0,REAL_1,SETFAM_1,TOPS_2,INT_1,STRUCT_0,COMPTS_1,PCOMPS_1,RCOMP_1,WEIERSTR,SEQ_4,XXREAL_2,RVSUM_1,RLVECT_1,RUSUB_4,RLVECT_5,SIMPLEX0,RLAFFIN1,RLAFFIN2,SIMPLEX1,ORDERS_1,CARD_1,DOMAIN_1,PENCIL_1,CLASSES1,MATROID0,TBSP_1,MEMBERED,RLVECT_2,CONVEX1,TOPREAL9,COMPLEX1,NEWTON,POWER,JORDAN2C,SQUARE_1,BORSUK_1,CARD_3,EUCLID_9,TMAP_1,FINSEQOP,ABIAN,WAYBEL23,TOPDIM_1,TOPDIM_2,RLAFFIN3,CKB1,CKB7,CKB15,CKB19,CKB21,CKB22;
definitions EUCLID,METRIC_1,ORDINAL1,PCOMPS_1,RLVECT_1,SIMPLEX0,SIMPLEX1,STRUCT_0,SUBSET_1,TARSKI,TBSP_1,XCMPLX_0,CARD_1,CKB1,CKB7,CKB15,CKB19,CKB21,CKB22;
theorems ABIAN,ABSVALUE,BINOP_1,BORSUK_1,BORSUK_3,BORSUK_5,CARD_1,CARD_2,CLASSES1,COMPTS_1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCOP_1,FUNCT_1,FUNCT_2,FUNCT_4,HAUSDORF,INT_1,JORDAN1K,JORDAN2B,JORDAN2C,MATROID0,MEMBERED,METRIC_1,NAT_1,NEWTON,ORDERS_1,ORDINAL1,PARTFUN1,PCOMPS_1,PCOMPS_2,POWER,PRE_TOPC,RCOMP_1,RELAT_1,RLAFFIN1,RLAFFIN2,RLAFFIN3,RLVECT_1,RLVECT_2,RLVECT_3,RUSUB_4,RVSUM_1,SETFAM_1,SIMPLEX0,SIMPLEX1,TARSKI,TBSP_1,TMAP_1,TOPDIM_1,TOPDIM_2,TOPGEN_5,TOPGRP_1,TOPMETR,TOPREAL3,TOPREAL6,TOPREAL7,TOPREAL9,TOPREALC,TOPS_1,TOPS_2,TOPS_3,TSEP_1,VALUED_1,WEIERSTR,XBOOLE_0,XBOOLE_1,XCMPLX_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,XXREAL_2,XXREAL_3,ZFMISC_1,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB45,CKB46,CKB47;
schemes FINSEQ_1,FRAENKEL,FUNCT_2,NAT_1,NAT_2,SUBSET_1;
registrations ASYMPT_0,BORSUK_1,BORSUK_2,CARD_1,COMPTS_1,DILWORTH,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,FUNCT_2,INT_1,JORDAN2B,JORDAN2C,MEMBERED,METRIZTS,MONOID_0,NAT_1,NEWTON,NUMBERS,PCOMPS_1,PRE_TOPC,RELAT_1,RELSET_1,RLAFFIN1,RLAFFIN3,SEQ_4,SIMPLEX0,SIMPLEX1,SPRECT_1,STRUCT_0,SUBSET_1,TBSP_1,TMAP_1,TOPDIM_1,TOPDIM_2,TOPMETR,TOPREAL9,TOPREALC,TOPS_1,VALUED_0,VALUED_1,XBOOLE_0,XREAL_0,XXREAL_0,XXREAL_2,XXREAL_3,YELLOW13,JORDAN,CKB5,CKB9,CKB10,CKB11,CKB12,CKB23,CKB24,CKB25,CKB33,CKB43,CKB44;
constructors ABIAN,BINOP_2,COMPTS_1,CONVEX1,EUCLID_9,FINSEQOP,FUNCSDOM,JORDAN2C,LEXBFS,MONOID_0,NEWTON,POWER,REAL_1,RFINSEQ2,RLAFFIN1,RLAFFIN2,RLAFFIN3,RLVECT_5,RUSUB_5,SEQ_1,SEQ_4,SIMPLEX1,SQUARE_1,TBSP_1,TMAP_1,TOPDIM_1,TOPDIM_2,TOPREAL9,TOPS_2,WAYBEL23,WEIERSTR,CKB1,CKB7,CKB15,CKB19,CKB21,CKB22;
requirements REAL,SUBSET,NUMERALS,ARITHM,BOOLE;
begin
reserve n for Nat;
reserve k for Nat;
reserve A for  affinely-independent (Subset of ( TOP-REAL n ));
theorem
Th25: (( card A ) = ( n + 1 ) implies ( ind ( conv A ) ) = n)
proof
set TR = ( TOP-REAL n );
assume A1: ( card A ) = ( n + 1 );
set C = ( conv A );
A2: ( ind C ) >= n
proof
set E = the (Enumeration of A);
assume A3: ( ind C ) < n;
A is non empty by A1;
then reconsider C as non empty (Subset of TR);
( ind C ) is  natural;
then reconsider n1 = ( n - 1 ) as Nat by A3,NAT_1:20;
deffunc F(set) = ( C \ ( conv ( A \ { ( E . $1 ) } ) ) );
reconsider c = C as (Subset of ( the TopStruct of TR ));
set TRC = ( TR | C );
set carr = (the carrier of TRC);
A4: (( the TopStruct of TR ) = ( TopSpaceMetr ( Euclid n ) ) & ( the TopStruct of TRC ) = ( ( the TopStruct of TR ) | c )) by EUCLID:def 8,PRE_TOPC:36;
consider f being FinSequence such that A5: (( len f ) = ( len E ) & (for k holds (k in ( dom f ) implies ( f . k ) = F(k)))) from FINSEQ_1:sch 2;
A6: ( [#] TRC ) = C by PRE_TOPC:def 5;
( rng f ) c= ( bool carr )
proof
let y being set;
assume y in ( rng f );
then consider x being set such that A7: x in ( dom f ) and A8: ( f . x ) = y by FUNCT_1:def 3;
( f . x ) = F(x) by A5,A7;
then ( f . x ) c= C by XBOOLE_1:36;
hence thesis by A6,A8;
end;
then reconsider R = ( rng f ) as  finite (Subset-Family of TRC);
A9: ( rng E ) = A by RLAFFIN3:def 1;
then A10: ( len E ) = ( card A ) by FINSEQ_4:62;
A11: ( dom f ) = ( dom E ) by A5,FINSEQ_3:29;
(the carrier of TRC) c= ( union R )
proof
let x being set;
assume A12: x in (the carrier of TRC);
assume A13: (not x in ( union R ));
now
let y being set;
assume A14: y in A;
then consider n being set such that A15: n in ( dom E ) and A16: ( E . n ) = y by A9,FUNCT_1:def 3;
reconsider n as Nat by A15;
( f . n ) = F(n) by A5,A11,A15;
then F(n) in R by A11,A15,FUNCT_1:def 3;
then (not x in F(n)) by A13,TARSKI:def 4;
then (( conv ( A \ { ( E . n ) } ) ) c= ( Affin ( A \ { ( E . n ) } ) ) & x in ( conv ( A \ { ( E . n ) } ) )) by A6,A12,RLAFFIN1:65,XBOOLE_0:def 5;
then A17: ( x |-- A ) = ( x |-- ( A \ { ( E . n ) } ) ) by RLAFFIN1:77,XBOOLE_1:36;
(( Carrier ( x |-- ( A \ { ( E . n ) } ) ) ) c= ( A \ { ( E . n ) } ) & ( E . n ) in { ( E . n ) }) by RLVECT_2:def 6,TARSKI:def 1;
then (not ( E . n ) in ( Carrier ( x |-- ( A \ { ( E . n ) } ) ) )) by XBOOLE_0:def 5;
hence ( ( x |-- A ) . y ) = ( 0 ) by A14,A16,A17,RLVECT_2:19;
end;
then A18: x in ( conv ( A \ A ) ) by A6,A12,RLAFFIN1:76;
( A \ A ) = ( {} ) by XBOOLE_1:37;
hence contradiction by A18;
end;
then A19: R is (Cover of TRC) by SETFAM_1:def 11;
now
let U being (Subset of TRC);
assume U in R;
then consider x being set such that A20: (x in ( dom f ) & ( f . x ) = U) by FUNCT_1:def 3;
reconsider cAE = ( conv ( A \ { ( E . x ) } ) ) as (Subset of TRC) by A6,RLAFFIN1:3,XBOOLE_1:36;
( A \ { ( E . x ) } ) is  affinely-independent by RLAFFIN1:43,XBOOLE_1:36;
then A21: cAE is  closed by TSEP_1:8;
U = ( cAE ` ) by A6,A5,A20;
hence U is  open by A21;
end;
then A22: (( ind TRC ) = ( ind C ) & R is  open) by TOPDIM_1:17,TOPS_2:def 1;
( ind C ) < ( n1 + 1 ) by A3;
then ( ind C ) <= n1 by NAT_1:13;
then consider G being  finite (Subset-Family of TRC) such that A23: G is  open and A24: G is (Cover of TRC) and A25: G is_finer_than R and ( card G ) <= ( ( card R ) * ( n1 + 1 ) ) and A26: ( order G ) <= n1 by A4,A22,A19,TOPDIM_2:23;
defpred P[ Nat,set,set ]
 means
$3 = { g where g is (Subset of TRC): (g in G & (g c= ( f . ( $1 + 1 ) ) or g in $2)) };
defpred P[ set ]
 means
($1 in G & $1 c= ( f . 1 ));
consider G0 being (Subset-Family of TRC) such that A27: (for x being set holds (x in G0 iff (x in ( bool carr ) & P[ x ]))) from SUBSET_1:sch 1;
A28: (for k being Nat holds ((1 <= k & k < ( len E )) implies (for x being (Element of ( bool ( bool carr ) )) holds (ex y being (Element of ( bool ( bool carr ) )) st P[ k,x,y ]))))
proof
let k being Nat;
assume that
1 <= k
and
k < ( len E );
let x being (Element of ( bool ( bool carr ) ));
set y = { g where g is (Subset of TRC): (g in G & (g c= ( f . ( k + 1 ) ) or g in x)) };
y c= ( bool carr )
proof
let z being set;
assume z in y;
then (ex g being (Subset of TRC) st ((g = z & g in G) & (g c= ( f . ( k + 1 ) ) or g in x)));
hence thesis;
end;
hence thesis;
end;
consider p being (FinSequence of ( bool ( bool carr ) )) such that A29: ( len p ) = ( len E ) and A30: (( p /. 1 ) = G0 or ( len E ) = ( 0 )) and A31: (for k being Nat holds ((1 <= k & k < ( len E )) implies P[ k,( p /. k ),( p /. ( k + 1 ) ) ])) from NAT_2:sch 1(A28);
defpred H[ Nat,set ]
 means
(($1 = 1 implies $2 = ( union G0 )) & ($1 <> 1 implies $2 = ( union ( ( p . $1 ) \ ( p . ( $1 - 1 ) ) ) )));
A32: (for k being Nat holds (k in ( Seg ( len E ) ) implies (ex x being set st H[ k,x ])))
proof
let k being Nat;
(k = 1 or k <> 1);
hence thesis;
end;
consider h being FinSequence such that A33: ( dom h ) = ( Seg ( len E ) ) and A34: (for k being Nat holds (k in ( Seg ( len E ) ) implies H[ k,( h . k ) ])) from FINSEQ_1:sch 1(A32);
A35: ( dom p ) = ( Seg ( len E ) ) by A29,FINSEQ_1:def 3;
( rng h ) c= ( bool carr )
proof
let y being set;
assume y in ( rng h );
then consider x being set such that A36: x in ( dom h ) and A37: ( h . x ) = y by FUNCT_1:def 3;
reconsider x as Nat by A36;
( p . x ) in ( rng p ) by A35,A33,A36,FUNCT_1:def 3;
then reconsider px = ( p . x ) as (Subset-Family of TRC);
(y = ( union G0 ) or y = ( union ( px \ ( p . ( x - 1 ) ) ) )) by A33,A34,A36,A37;
hence thesis;
end;
then reconsider h as (FinSequence of ( bool carr )) by FINSEQ_1:def 4;
A38: A is non empty  affinely-independent non empty  affinely-independent (Subset of ( TOP-REAL n )) by A1;
A39: 1 <= ( n + 1 ) by NAT_1:11;
(the carrier of TRC) c= ( union ( rng h ) )
proof
let x being set;
assume x in (the carrier of TRC);
then x in ( union G ) by A24,SETFAM_1:45;
then consider y being set such that A40: x in y and A41: y in G by TARSKI:def 4;
consider z being set such that A42: z in R and A43: y c= z by A25,A41,SETFAM_1:def 2;
consider k being set such that A44: k in ( dom f ) and A45: ( f . k ) = z by A42,FUNCT_1:def 3;
reconsider k as Nat by A44;
A46: k >= 1 by A44,FINSEQ_3:25;
A47: ( len E ) >= k by A5,A44,FINSEQ_3:25;
per cases  by A46,XXREAL_0:1;
suppose A48: (k = 1 or y in G0);

A49: 1 in ( Seg ( len E ) ) by A1,A10,A39,FINSEQ_1:1;
then A50: ( h . 1 ) = ( union G0 ) by A34;
y in G0 by A27,A41,A43,A45,A48;
then A51: x in ( h . 1 ) by A40,A50,TARSKI:def 4;
( h . 1 ) in ( rng h ) by A33,A49,FUNCT_1:def 3;
hence thesis by A51,TARSKI:def 4;
end;
suppose A52: (k > 1 & (not y in G0));

defpred Q[ Nat ]
 means
(($1 > 1 & $1 <= ( len E )) & y c= ( f . $1 ));
A53: (ex k being Nat st Q[ k ]) by A43,A45,A47,A52;
consider m being Nat such that A54: (Q[ m ] & (for n being Nat holds (Q[ n ] implies m <= n))) from NAT_1:sch 5(A53);
reconsider m1 = ( m - 1 ) as (Element of ( NAT )) by A54,NAT_1:20;
defpred R[ Nat ]
 means
((1 <= $1 & $1 <= m1) implies (not y in ( p /. $1 )));
( m1 + 1 ) <= ( len E ) by A54;
then A55: m1 < ( len E ) by NAT_1:13;
A56: (for n being Nat holds (R[ n ] implies R[ ( n + 1 ) ]))
proof
let n being Nat;
assume that
A57: R[ n ];
set n1 = ( n + 1 );
assume that
1 <= n1
and
A58: n1 <= m1;
n < m1 by A58,NAT_1:13;
then A59: n < ( len E ) by A55,XXREAL_0:2;
per cases  by NAT_1:14;
suppose n = ( 0 );

hence thesis by A1,A9,A30,A52,FINSEQ_4:62;
end;
suppose A60: n >= 1;

assume A61: y in ( p /. n1 );
( p /. n1 ) = { g where g is (Subset of TRC): (g in G & (g c= ( f . n1 ) or g in ( p /. n ))) } by A31,A59,A60;
then (ex g being (Subset of TRC) st ((y = g & g in G) & (g c= ( f . n1 ) or g in ( p /. n )))) by A61;
then Q[ n1 ] by A55,A57,A58,A60,NAT_1:13,XXREAL_0:2;
then m <= n1 by A54;
then ( m1 + 1 ) <= m1 by A58,XXREAL_0:2;
hence contradiction by NAT_1:13;
end;
end;
A62: R[ ( 0 ) ];
A63: (for n holds R[ n ]) from NAT_1:sch 2(A62,A56);
A64: m in ( dom p ) by A29,A54,FINSEQ_3:25;
then A65: ( h . m ) in ( rng h ) by A35,A33,FUNCT_1:def 3;
( m1 + 1 ) > 1 by A54;
then A66: m1 >= 1 by NAT_1:13;
then A67: ( p /. m ) = { g where g is (Subset of TRC): (g in G & (g c= ( f . ( m1 + 1 ) ) or g in ( p /. m1 ))) } by A31,A55;
m1 in ( dom p ) by A29,A66,A55,FINSEQ_3:25;
then ( p . m1 ) = ( p /. m1 ) by PARTFUN1:def 6;
then A68: (not y in ( p . m1 )) by A66,A63;
( p . m ) = ( p /. m ) by A64,PARTFUN1:def 6;
then y in ( p . m ) by A41,A54,A67;
then y in ( ( p . m ) \ ( p . m1 ) ) by A68,XBOOLE_0:def 5;
then A69: x in ( union ( ( p . m ) \ ( p . m1 ) ) ) by A40,TARSKI:def 4;
( h . m ) = ( union ( ( p . m ) \ ( p . m1 ) ) ) by A35,A34,A54,A64;
hence thesis by A69,A65,TARSKI:def 4;
end;
end;
then A70: ( rng h ) is (Cover of TRC) by SETFAM_1:def 11;
now
let A being (Subset of TRC);
assume A in ( rng h );
then consider k being set such that A71: k in ( dom h ) and A72: ( h . k ) = A by FUNCT_1:def 3;
reconsider k as Nat by A71;
A73: k >= 1 by A33,A71,FINSEQ_1:1;
per cases  by A73,XXREAL_0:1;
suppose A74: k = 1;

A75: G0 c= G
proof
let x being set;
assume x in G0;
hence thesis by A27;
end;
( h . k ) = ( union G0 ) by A33,A34,A71,A74;
hence A is  open by A23,A72,A75,TOPS_2:11,TOPS_2:19;
end;
suppose A76: k > 1;

then reconsider k1 = ( k - 1 ) as (Element of ( NAT )) by NAT_1:20;
( k1 + 1 ) > 1 by A76;
then A77: k1 >= 1 by NAT_1:13;
( k1 + 1 ) <= ( len E ) by A33,A71,FINSEQ_1:1;
then A78: k1 < ( len E ) by NAT_1:13;
then k1 in ( dom p ) by A29,A77,FINSEQ_3:25;
then A79: ( p . k1 ) = ( p /. k1 ) by PARTFUN1:def 6;
A80: P[ k1,( p /. k1 ),( p /. ( k1 + 1 ) ) ] by A31,A77,A78;
( p /. k ) c= G
proof
let x being set;
assume x in ( p /. k );
then (ex g being (Subset of TRC) st ((x = g & g in G) & (g c= ( f . k ) or g in ( p /. k1 )))) by A80;
hence thesis;
end;
then ( p /. k ) is  open by A23,TOPS_2:11;
then A81: ( ( p /. k ) \ ( p /. ( k - 1 ) ) ) is  open by TOPS_2:15;
A82: ( p . k ) = ( p /. k ) by A35,A33,A71,PARTFUN1:def 6;
A = ( union ( ( p . k ) \ ( p . ( k - 1 ) ) ) ) by A33,A34,A71,A72,A76;
hence A is  open by A82,A81,A79,TOPS_2:19;
end;
end;
then A83: ( rng h ) is  open by TOPS_2:def 1;
TRC is  compact by COMPTS_1:3;
then consider gx being (Subset-Family of TRC) such that gx is  open and A84: gx is (Cover of TRC) and A85: ( clf gx ) is_finer_than ( rng h ) and A86: gx is  locally_finite by A4,A70,A83,PCOMPS_1:22,PCOMPS_2:3;
set cgx = ( clf gx );
defpred G[ set,set ]
 means
$2 = ( union { u where u is (Subset of TRC): (u in cgx & u c= ( h . $1 )) } );
A87: (for k being Nat holds (k in ( Seg ( len E ) ) implies (ex x being (Element of ( bool carr )) st G[ k,x ])))
proof
let k being Nat;
set U = { u where u is (Subset of TRC): (u in cgx & u c= ( h . k )) };
U c= ( bool carr )
proof
let x being set;
assume x in U;
then (ex u being (Subset of TRC) st ((u = x & u in cgx) & u c= ( h . k )));
hence thesis;
end;
then reconsider U as (Subset-Family of TRC);
( union U ) is (Subset of TRC);
hence thesis;
end;
consider GX being (FinSequence of ( bool carr )) such that A88: (( dom GX ) = ( Seg ( len E ) ) & (for k being Nat holds (k in ( Seg ( len E ) ) implies G[ k,( GX . k ) ]))) from FINSEQ_1:sch 5(A87);
A89: (for i being Nat holds (i in ( dom GX ) implies ( GX . i ) c= ( h . i )))
proof
let i being Nat;
set U = { u where u is (Subset of TRC): (u in cgx & u c= ( h . i )) };
now
let x being set;
assume x in U;
then (ex u being (Subset of TRC) st ((x = u & u in cgx) & u c= ( h . i )));
hence x c= ( h . i );
end;
then A90: ( union U ) c= ( h . i ) by ZFMISC_1:76;
assume i in ( dom GX );
hence thesis by A88,A90;
end;
A91: ( dom E ) = ( Seg ( len E ) ) by FINSEQ_1:def 3;
A92: (for k being Nat holds (k in ( Seg ( len E ) ) implies ( h . k ) misses ( conv ( A \ { ( E . k ) } ) )))
proof
let k being Nat;
assume A93: k in ( Seg ( len E ) );
then A94: k >= 1 by FINSEQ_1:1;
A95: H[ k,( h . k ) ] by A34,A93;
assume ( h . k ) meets ( conv ( A \ { ( E . k ) } ) );
then consider x being set such that A96: x in ( h . k ) and A97: x in ( conv ( A \ { ( E . k ) } ) ) by XBOOLE_0:3;
per cases  by A94,XXREAL_0:1;
suppose A98: k = 1;

then consider y being set such that A99: x in y and A100: y in G0 by A95,A96,TARSKI:def 4;
P[ y ] by A27,A100;
then y c= F(k) by A5,A11,A91,A93,A98;
hence contradiction by A97,A99,XBOOLE_0:def 5;
end;
suppose A101: k > 1;

then reconsider k1 = ( k - 1 ) as (Element of ( NAT )) by NAT_1:20;
( len E ) >= ( k1 + 1 ) by A93,FINSEQ_1:1;
then A102: ( len E ) > k1 by NAT_1:13;
( k1 + 1 ) > 1 by A101;
then A103: k1 >= 1 by NAT_1:13;
then A104: P[ k1,( p /. k1 ),( p /. ( k1 + 1 ) ) ] by A31,A102;
k1 in ( dom p ) by A29,A103,A102,FINSEQ_3:25;
then A105: ( p /. k1 ) = ( p . k1 ) by PARTFUN1:def 6;
A106: ( p /. k ) = ( p . k ) by A35,A93,PARTFUN1:def 6;
consider y being set such that A107: x in y and A108: y in ( ( p . k ) \ ( p . ( k - 1 ) ) ) by A95,A96,A101,TARSKI:def 4;
y in ( p . k ) by A108;
then consider g being (Subset of TRC) such that A109: y = g and g in G and A110: (g c= ( f . k ) or g in ( p . k1 )) by A104,A106,A105;
( f . k ) = F(k) by A5,A11,A91,A93;
hence contradiction by A97,A107,A108,A109,A110,XBOOLE_0:def 5;
end;
end;
carr c= ( union ( rng GX ) )
proof
let x being set;
assume A111: x in carr;
(( union gx ) = carr & ( union gx ) c= ( union cgx )) by A84,PCOMPS_1:19,SETFAM_1:45;
then consider y being set such that A112: x in y and A113: y in cgx by A111,TARSKI:def 4;
consider r being set such that A114: r in ( rng h ) and A115: y c= r by A85,A113,SETFAM_1:def 2;
consider k being set such that A116: k in ( dom h ) and A117: ( h . k ) = r by A114,FUNCT_1:def 3;
A118: G[ k,( GX . k ) ] by A33,A88,A116;
A119: ( GX . k ) in ( rng GX ) by A33,A88,A116,FUNCT_1:def 3;
y in { u where u is (Subset of TRC): (u in cgx & u c= ( h . k )) } by A113,A115,A117;
then x in ( GX . k ) by A112,A118,TARSKI:def 4;
hence thesis by A119,TARSKI:def 4;
end;
then A120: ( rng GX ) is (Cover of TRC) by SETFAM_1:def 11;
A121: (for S being (Subset of ( dom GX )) holds ( conv ( E .: S ) ) c= ( union ( GX .: S ) ))
proof
let S being (Subset of ( dom GX ));
A122: ( rng GX ) = ( GX .: ( dom GX ) ) by RELAT_1:113;
A123: ( union ( rng GX ) ) = carr by A120,SETFAM_1:45;
per cases  by XBOOLE_0:def 10;
suppose S = ( dom GX );

hence thesis by A6,A9,A91,A88,A122,A123,RELAT_1:113;
end;
suppose A124: (not ( dom GX ) c= S);

set U = { ( conv ( A \ { ( E . i ) } ) ) where i is (Element of ( NAT )): i in ( ( dom E ) \ S ) };
( ( dom GX ) \ S ) is non empty by A124,XBOOLE_1:37;
then A125: ( conv ( E .: S ) ) = ( meet U ) by A91,A88,CKB29:1;
A126: ( meet U ) misses ( union ( GX .: ( ( dom E ) \ S ) ) )
proof
assume ( meet U ) meets ( union ( GX .: ( ( dom E ) \ S ) ) );
then consider x being set such that A127: x in ( meet U ) and A128: x in ( union ( GX .: ( ( dom E ) \ S ) ) ) by XBOOLE_0:3;
consider y being set such that A129: x in y and A130: y in ( GX .: ( ( dom E ) \ S ) ) by A128,TARSKI:def 4;
consider i being set such that A131: i in ( dom GX ) and A132: i in ( ( dom E ) \ S ) and A133: ( GX . i ) = y by A130,FUNCT_1:def 6;
reconsider i as (Element of ( NAT )) by A131;
( conv ( A \ { ( E . i ) } ) ) in U by A132;
then A134: ( meet U ) c= ( conv ( A \ { ( E . i ) } ) ) by SETFAM_1:7;
y c= ( h . i ) by A89,A131,A133;
then ( h . i ) meets ( conv ( A \ { ( E . i ) } ) ) by A127,A129,A134,XBOOLE_0:3;
hence contradiction by A92,A88,A131;
end;
( dom GX ) = ( dom E ) by A88,FINSEQ_1:def 3;
then ( rng GX ) = ( GX .: ( S \/ ( ( dom E ) \ S ) ) ) by A122,XBOOLE_1:45
.= ( ( GX .: S ) \/ ( GX .: ( ( dom E ) \ S ) ) ) by RELAT_1:120;
then A135: ( ( union ( GX .: S ) ) \/ ( union ( GX .: ( ( dom E ) \ S ) ) ) ) = C by A6,A123,ZFMISC_1:78;
( conv ( E .: S ) ) c= C by A9,RELAT_1:111,RLAFFIN1:3;
hence thesis by A125,A135,A126,XBOOLE_1:73;
end;
end;
A136: cgx is  locally_finite by A86,PCOMPS_1:18;
now
let A being (Subset of TRC);
assume A in ( rng GX );
then consider k being set such that A137: (k in ( dom GX ) & ( GX . k ) = A) by FUNCT_1:def 3;
set U = { u where u is (Subset of TRC): (u in cgx & u c= ( h . k )) };
A138: U c= cgx
proof
let x being set;
assume x in U;
then (ex u being (Subset of TRC) st ((x = u & u in cgx) & u c= ( h . k )));
hence thesis;
end;
then reconsider U as (Subset-Family of TRC) by XBOOLE_1:1;
U is  closed by A138,PCOMPS_1:11,TOPS_2:12;
then ( union U ) is  closed by A136,A138,PCOMPS_1:9,PCOMPS_1:21;
hence A is  closed by A88,A137;
end;
then A139: ( rng GX ) is  closed by TOPS_2:def 2;
( len GX ) = ( card A ) by A10,A88,FINSEQ_1:def 3;
then ( meet ( rng GX ) ) is non empty by A139,A38,A121,CKB45:1;
then consider I being set such that A140: I in ( meet ( rng GX ) ) by XBOOLE_0:def 1;
defpred T[ Nat,set ]
 means
((($2 in G & I in $2) & $2 in ( p . $1 )) & ($1 <> 1 implies (not $2 in ( p . ( $1 - 1 ) ))));
A141: (for k being Nat holds (k in ( Seg ( len E ) ) implies (ex x being (Element of ( bool carr )) st T[ k,x ])))
proof
let k being Nat;
assume A142: k in ( Seg ( len E ) );
then A143: k >= 1 by FINSEQ_1:1;
A144: k <= ( len E ) by A142,FINSEQ_1:1;
A145: (( GX . k ) c= ( h . k ) & H[ k,( h . k ) ]) by A34,A88,A89,A142;
( GX . k ) in ( rng GX ) by A88,A142,FUNCT_1:def 3;
then ( meet ( rng GX ) ) c= ( GX . k ) by SETFAM_1:7;
then A146: I in ( GX . k ) by A140;
per cases  by A143,XXREAL_0:1;
suppose A147: k = 1;

1 in ( dom p ) by A1,A10,A35,A39,FINSEQ_1:1;
then A148: ( p . 1 ) = G0 by A1,A9,A30,FINSEQ_4:62,PARTFUN1:def 6;
consider g being set such that A149: I in g and A150: g in G0 by A146,A145,A147,TARSKI:def 4;
g in G by A27,A150;
hence thesis by A147,A149,A150,A148;
end;
suppose A151: k > 1;

then reconsider k1 = ( k - 1 ) as Nat by NAT_1:20;
A152: ( k1 + 1 ) = k;
then A153: k1 < ( len E ) by A144,NAT_1:13;
k1 >= 1 by A151,A152,NAT_1:13;
then A154: P[ k1,( p /. k1 ),( p /. k ) ] by A31,A153;
A155: ( p . k ) = ( p /. k ) by A35,A142,PARTFUN1:def 6;
consider g being set such that A156: I in g and A157: g in ( ( p . k ) \ ( p . ( k - 1 ) ) ) by A146,A145,A151,TARSKI:def 4;
A158: (not g in ( p . ( k - 1 ) )) by A157,XBOOLE_0:def 5;
g in ( p . k ) by A157;
then (ex gg being (Subset of TRC) st ((g = gg & gg in G) & (gg c= ( f . ( k1 + 1 ) ) or gg in ( p /. k1 )))) by A154,A155;
hence thesis by A156,A157,A158;
end;
end;
consider t being (FinSequence of ( bool carr )) such that A159: (( dom t ) = ( Seg ( len E ) ) & (for k being Nat holds (k in ( Seg ( len E ) ) implies T[ k,( t . k ) ]))) from FINSEQ_1:sch 5(A141);
A160:now
let i being Nat,j being Nat;
assume that
A161: i in ( dom t )
and
A162: j in ( dom t )
and
A163: i < j;
A164: j <= ( len E ) by A159,A162,FINSEQ_1:1;
defpred P[ Nat ]
 means
((i <= $1 & $1 < j) implies ( t . i ) in ( p . $1 ));
A165: T[ i,( t . i ) ] by A159,A161;
A166: 1 <= i by A159,A161,FINSEQ_1:1;
A167: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume A168: P[ k ];
set k1 = ( k + 1 );
assume that
A169: i <= k1
and
A170: k1 < j;
A171: k < j by A170,NAT_1:13;
per cases  by A169,NAT_1:8;
suppose i = k1;

hence thesis by A159,A161;
end;
suppose A172: i <= k;

(1 <= k1 & k1 <= ( len E )) by A166,A164,A169,A170,XXREAL_0:2;
then A173: k1 in ( dom p ) by A35,FINSEQ_1:1;
A174: k < ( len E ) by A164,A171,XXREAL_0:2;
A175: 1 <= k by A166,A172,XXREAL_0:2;
then k in ( dom p ) by A35,A174,FINSEQ_1:1;
then A176: ( p . k ) = ( p /. k ) by PARTFUN1:def 6;
P[ k,( p /. k ),( p /. k1 ) ] by A31,A175,A174;
then ( p . k1 ) = { g where g is (Subset of TRC): (g in G & (g c= ( f . k1 ) or g in ( p . k ))) } by A173,A176,PARTFUN1:def 6;
hence thesis by A165,A168,A170,A172,NAT_1:13;
end;
end;
A177: P[ ( 0 ) ] by A165;
A178: (for k holds P[ k ]) from NAT_1:sch 2(A177,A167);
reconsider j1 = ( j - 1 ) as Nat by A163,NAT_1:20;
assume A179: ( t . i ) = ( t . j );
A180: ( j1 + 1 ) = j;
then A181: j1 < j by NAT_1:13;
A182: j <> 1 by A159,A161,A163,FINSEQ_1:1;
i <= j1 by A163,A180,NAT_1:13;
then ( t . i ) in ( p . j1 ) by A181,A178;
hence contradiction by A159,A162,A179,A182;
end;
now
let x1 being set,x2 being set;
assume A183: (x1 in ( dom t ) & x2 in ( dom t ));
then reconsider i1 = x1,i2 = x2 as Nat;
assume A184: ( t . x1 ) = ( t . x2 );
assume x1 <> x2;
then (i1 > i2 or i1 < i2) by XXREAL_0:1;
hence contradiction by A160,A183,A184;
end;
then t is  one-to-one by FUNCT_1:def 4;
then A185: ( card ( rng t ) ) = ( len t ) by FINSEQ_4:62
.= ( len E ) by A159,FINSEQ_1:def 3
.= ( n + 1 ) by A1,A9,FINSEQ_4:62;
then A186: ( rng t ) is non empty;
A187:now
let x being set;
assume x in ( rng t );
then consider i being set such that A188: (i in ( dom t ) & ( t . i ) = x) by FUNCT_1:def 3;
thus I in x by A159,A188;
end;
A189: ( rng t ) c= G
proof
let y being set;
assume y in ( rng t );
then consider x being set such that A190: (x in ( dom t ) & ( t . x ) = y) by FUNCT_1:def 3;
thus thesis by A159,A190;
end;
n < ( card ( rng t ) ) by A185,NAT_1:13;
then ( card n ) in ( card ( card ( rng t ) ) ) by NAT_1:41;
then ( n1 + 1 ) in ( card ( rng t ) ) by CARD_1:42;
then ( meet ( rng t ) ) is  empty by A26,A189,TOPDIM_2:2;
hence contradiction by A186,A187,SETFAM_1:def 1;
end;
(( ind C ) <= ( ind TR ) & ( ind TR ) <= n) by TOPDIM_1:20,TOPDIM_2:21;
then ( ind C ) <= n by XXREAL_0:2;
hence thesis by A2,XXREAL_0:1;
end;
