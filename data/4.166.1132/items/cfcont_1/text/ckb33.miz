environ
vocabularies NUMBERS,SUBSET_1,COMSEQ_1,PARTFUN1,REAL_1,ORDINAL2,NAT_1,SEQ_1,FCONT_1,RELAT_1,TARSKI,SEQ_2,FUNCT_2,ARYTM_1,FUNCT_1,ARYTM_3,VALUED_1,COMPLEX1,XBOOLE_0,ORDINAL4,VALUED_0,CARD_1,XXREAL_0,XREAL_0,RCOMP_1,CFCONT_1;
notations TARSKI,XBOOLE_0,SUBSET_1,FUNCT_1,NUMBERS,XREAL_0,COMPLEX1,REAL_1,NAT_1,PARTFUN1,FUNCT_2,SEQ_1,RELSET_1,VALUED_0,VALUED_1,CFUNCT_1,COMSEQ_1,COMSEQ_2,COMSEQ_3,XXREAL_0,RECDEF_1,CKB1;
definitions TARSKI,COMSEQ_2,COMSEQ_3,FUNCT_1,VALUED_0,VALUED_1,CKB1;
theorems TARSKI,NAT_1,FUNCT_1,COMPLEX1,SEQ_1,SEQM_3,SEQ_4,COMSEQ_1,COMSEQ_2,COMSEQ_3,PARTFUN1,CFUNCT_1,RELAT_1,FUNCT_2,PARTFUN2,XBOOLE_0,XBOOLE_1,XCMPLX_1,XREAL_1,XXREAL_0,ORDINAL1,VALUED_1,VALUED_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31;
schemes NAT_1,RECDEF_1,FUNCT_2,CKB32;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,NUMBERS,XREAL_0,NAT_1,MEMBERED,VALUED_0,VALUED_1;
constructors PARTFUN1,XXREAL_0,REAL_1,NAT_1,SEQ_1,COMSEQ_2,CFUNCT_1,COMSEQ_3,RECDEF_1,SEQM_3,VALUED_1,RELSET_1,CKB1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve x for set;
reserve x0 for (Element of ( COMPLEX ));
reserve s1 for Complex_Sequence;
reserve s2 for Complex_Sequence;
reserve f for (PartFunc of ( COMPLEX ),( COMPLEX ));
reserve p for Real;
theorem
(f is_continuous_in x0 iff (x0 in ( dom f ) & (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f /. x0 ) = ( lim ( f /* s1 ) ))))))
proof
thus (f is_continuous_in x0 implies (x0 in ( dom f ) & (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f /. x0 ) = ( lim ( f /* s1 ) )))))) by CKB1:def 1;
assume that
A1: x0 in ( dom f )
and
A2: (for s1 holds ((((( rng s1 ) c= ( dom f ) & s1 is  convergent) & ( lim s1 ) = x0) & (for n holds ( s1 . n ) <> x0)) implies (( f /* s1 ) is  convergent & ( f /. x0 ) = ( lim ( f /* s1 ) ))));
thus x0 in ( dom f ) by A1;
let s2;
assume that
A3: ( rng s2 ) c= ( dom f )
and
A4: (s2 is  convergent & ( lim s2 ) = x0);
now
per cases ;
suppose (ex n st (for m holds (n <= m implies ( s2 . m ) = x0)));

then consider N being (Element of ( NAT )) such that A5: (for m holds (N <= m implies ( s2 . m ) = x0));
A6: (for n holds ( ( s2 ^\ N ) . n ) = x0)
proof
let n;
( s2 . ( n + N ) ) = x0 by A5,NAT_1:12;
hence thesis by NAT_1:def 3;
end;
A7: ( f /* ( s2 ^\ N ) ) = ( ( f /* s2 ) ^\ N ) by A3,VALUED_0:27;
A8: ( rng ( s2 ^\ N ) ) c= ( rng s2 ) by VALUED_0:21;
A9:now
let p;
assume that
A10: p > ( 0 );
take n = ( 0 );
let m;
assume that
n <= m;
|. ( ( ( f /* ( s2 ^\ N ) ) . m ) - ( f /. x0 ) ) .| = |. ( ( f /. ( ( s2 ^\ N ) . m ) ) - ( f /. x0 ) ) .| by A3,A8,FUNCT_2:109,XBOOLE_1:1
.= |. ( ( f /. x0 ) - ( f /. x0 ) ) .| by A6
.= ( 0 ) by COMPLEX1:44;
hence |. ( ( ( f /* ( s2 ^\ N ) ) . m ) - ( f /. x0 ) ) .| < p by A10;
end;
then A11: ( f /* ( s2 ^\ N ) ) is  convergent by COMSEQ_2:def 4;
then ( f /. x0 ) = ( lim ( ( f /* s2 ) ^\ N ) ) by A9,A7,COMSEQ_2:def 5;
hence thesis by A11,A7,CKB19:1,CKB23:1;
end;
suppose A12: (for n holds (ex m st (n <= m & ( s2 . m ) <> x0)));

defpred P[ set,set ]
 means
(for n holds (for m holds (($1 = n & $2 = m) implies ((n < m & ( s2 . m ) <> x0) & (for k holds ((n < k & ( s2 . k ) <> x0) implies m <= k))))));
defpred R[ set,set,set ]
 means
P[ $2,$3 ];
defpred P[ set ]
 means
( s2 . $1 ) <> x0;
(ex m1 being (Element of ( NAT )) st (( 0 ) <= m1 & ( s2 . m1 ) <> x0)) by A12;
then A13: (ex m being Nat st P[ m ]);
consider M being Nat such that A14: (P[ M ] & (for n being Nat holds (P[ n ] implies M <= n))) from NAT_1:sch 5(A13);
reconsider M9 = M as (Element of ( NAT )) by ORDINAL1:def 12;
A15:now
let n;
consider m such that A16: (( n + 1 ) <= m & ( s2 . m ) <> x0) by A12;
take m;
thus (n < m & ( s2 . m ) <> x0) by A16,NAT_1:13;
end;
A17: (for n holds (for x being (Element of ( NAT )) holds (ex y being (Element of ( NAT )) st R[ n,x,y ])))
proof
let n;
let x being (Element of ( NAT ));
defpred P[ Nat ]
 means
(x < $1 & ( s2 . $1 ) <> x0);
(ex m st P[ m ]) by A15;
then A18: (ex m being Nat st P[ m ]);
consider l being Nat such that A19: (P[ l ] & (for k being Nat holds (P[ k ] implies l <= k))) from NAT_1:sch 5(A18);
take l;
l in ( NAT ) by ORDINAL1:def 12;
hence thesis by A19;
end;
consider F being (Function of ( NAT ),( NAT )) such that A20: (( F . ( 0 ) ) = M9 & (for n being (Element of ( NAT )) holds R[ n,( F . n ),( F . ( n + 1 ) ) ])) from RECDEF_1:sch 2(A17);
A21: (for n holds ( F . n ) is  real);
A22: ( rng F ) c= ( NAT );
A23: ( dom F ) = ( NAT ) by FUNCT_2:def 1;
then reconsider F as Real_Sequence by A21,SEQ_1:2;
A24:now
let n;
( F . n ) in ( rng F ) by A23,FUNCT_1:def 3;
hence ( F . n ) is (Element of ( NAT )) by A22;
end;
now
let n;
(( F . n ) is (Element of ( NAT )) & ( F . ( n + 1 ) ) is (Element of ( NAT ))) by A24;
hence ( F . n ) < ( F . ( n + 1 ) ) by A20;
end;
then reconsider F as  increasing (sequence of ( NAT )) by SEQM_3:def 6;
A25: ( s2 * F ) is (subsequence of s2) by VALUED_0:def 17;
then A26: (( s2 * F ) is  convergent & ( lim ( s2 * F ) ) = x0) by A4,CKB18:1,CKB19:1;
A27: (for n holds (( s2 . n ) <> x0 implies (ex m st ( F . m ) = n)))
proof
defpred P[ set ]
 means
(( s2 . $1 ) <> x0 & (for m holds ( F . m ) <> $1));
assume (ex n st P[ n ]);
then A28: (ex n being Nat st P[ n ]);
consider M1 being Nat such that A29: (P[ M1 ] & (for n being Nat holds (P[ n ] implies M1 <= n))) from NAT_1:sch 5(A28);
defpred E[ Nat ]
 means
(($1 < M1 & ( s2 . $1 ) <> x0) & (ex m st ( F . m ) = $1));
A30: (ex n being Nat st E[ n ])
proof
take M;
(M <= M1 & M <> M1) by A14,A20,A29;
hence M < M1 by XXREAL_0:1;
thus ( s2 . M ) <> x0 by A14;
take ( 0 );
thus thesis by A20;
end;
A31: (for n being Nat holds (E[ n ] implies n <= M1));
consider MX being Nat such that A32: (E[ MX ] & (for n being Nat holds (E[ n ] implies n <= MX))) from NAT_1:sch 6(A31,A30);
A33: (for k holds ((MX < k & k < M1) implies ( s2 . k ) = x0))
proof
given k such that
A34: MX < k
and
A35: (k < M1 & ( s2 . k ) <> x0);

now
per cases ;
suppose (ex m st ( F . m ) = k);

hence contradiction by A32,A34,A35;
end;
suppose (for m holds ( F . m ) <> k);

hence contradiction by A29,A35;
end;
end;
hence contradiction;
end;
consider m such that A36: ( F . m ) = MX by A32;
A37: (MX < ( F . ( m + 1 ) ) & ( s2 . ( F . ( m + 1 ) ) ) <> x0) by A20,A36;
M1 in ( NAT ) by ORDINAL1:def 12;
then A38: ( F . ( m + 1 ) ) <= M1 by A20,A29,A32,A36;
now
assume ( F . ( m + 1 ) ) <> M1;
then ( F . ( m + 1 ) ) < M1 by A38,XXREAL_0:1;
hence contradiction by A33,A37;
end;
hence contradiction by A29;
end;
defpred P[ (Element of ( NAT )) ]
 means
( ( s2 * F ) . $1 ) <> x0;
A39: (for k holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k;
assume that
( ( s2 * F ) . k ) <> x0;
P[ ( F . k ),( F . ( k + 1 ) ) ] by A20;
then ( s2 . ( F . ( k + 1 ) ) ) <> x0;
hence thesis by FUNCT_2:15;
end;
A40: P[ ( 0 ) ] by A14,A20,FUNCT_2:15;
A41: (for n holds P[ n ]) from NAT_1:sch 1(A40,A39);
A42: ( rng ( s2 * F ) ) c= ( rng s2 ) by A25,VALUED_0:21;
then ( rng ( s2 * F ) ) c= ( dom f ) by A3,XBOOLE_1:1;
then A43: (( f /* ( s2 * F ) ) is  convergent & ( f /. x0 ) = ( lim ( f /* ( s2 * F ) ) )) by A2,A41,A26;
A44:now
let p;
assume A45: ( 0 ) < p;
then consider n such that A46: (for m holds (n <= m implies |. ( ( ( f /* ( s2 * F ) ) . m ) - ( f /. x0 ) ) .| < p)) by A43,COMSEQ_2:def 5;
take k = ( F . n );
let m;
assume that
A47: k <= m;
now
per cases ;
suppose ( s2 . m ) = x0;

then |. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .| = |. ( ( f /. x0 ) - ( f /. x0 ) ) .| by A3,FUNCT_2:109
.= ( 0 ) by COMPLEX1:44;
hence |. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .| < p by A45;
end;
suppose ( s2 . m ) <> x0;

then consider l being (Element of ( NAT )) such that A48: m = ( F . l ) by A27;
n <= l by A47,A48,SEQM_3:1;
then |. ( ( ( f /* ( s2 * F ) ) . l ) - ( f /. x0 ) ) .| < p by A46;
then |. ( ( f /. ( ( s2 * F ) . l ) ) - ( f /. x0 ) ) .| < p by A3,A42,FUNCT_2:109,XBOOLE_1:1;
then |. ( ( f /. ( s2 . m ) ) - ( f /. x0 ) ) .| < p by A48,FUNCT_2:15;
hence |. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .| < p by A3,FUNCT_2:109;
end;
end;
hence |. ( ( ( f /* s2 ) . m ) - ( f /. x0 ) ) .| < p;
end;
hence ( f /* s2 ) is  convergent by COMSEQ_2:def 4;
hence ( f /. x0 ) = ( lim ( f /* s2 ) ) by A44,COMSEQ_2:def 5;
end;
end;
hence thesis;
end;
