environ
vocabularies PRE_TOPC,RLVECT_1,FUNCT_1,ARYTM_3,ARYTM_1,FINSEQ_1,VALUED_1,MSSUBFAM,FINSEQ_2,CARD_3,RVSUM_1,RELAT_1,COMPLEX1,SQUARE_1,RCOMP_1,PARTFUN1,NORMSP_1,XBOOLE_0,LOPBAN_1,FDIFF_1,REAL_NS1,BORSUK_1,EUCLID,NUMBERS,FUNCOP_1,STRUCT_0,UNIALG_1,EUCLID_7,MATRIXR2,RFINSEQ2,REAL_1,SUBSET_1,CARD_1,TARSKI,XXREAL_0,XXREAL_2,NAT_1,ORDINAL4,SUPINF_2,VALUED_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,COMPLEX1,REAL_1,NAT_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,SEQ_1,STRUCT_0,RLVECT_1,FINSEQ_1,FINSEQ_2,SQUARE_1,VALUED_0,VALUED_1,VALUED_2,RVSUM_1,GRCAT_1,PRE_TOPC,VFUNCT_1,NORMSP_0,NORMSP_1,EUCLID,LOPBAN_1,NFCONT_1,NDIFF_1,REAL_NS1,PDIFF_1,INTEGR15,EUCLID_7,RFINSEQ2,CKB11,CKB12,CKB18,CKB20,CKB21;
definitions LOPBAN_1,RVSUM_1,EUCLID,VALUED_1,FINSEQ_1,XCMPLX_0,RFINSEQ2,VALUED_2,SQUARE_1,CKB11,CKB12,CKB21;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,EUCLID,XREAL_1,XCMPLX_0,RLVECT_1,COMPLEX1,FINSEQ_1,FINSEQ_2,ORDINAL1,NAT_1,XXREAL_0,RVSUM_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,SQUARE_1,INTEGR15,FUNCOP_1,EUCLID_7,FINSEQ_4,FINSEQ_5,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,NDIFF_1,REAL_NS1,VALUED_1,PDIFF_1,RFINSEQ2,RLVECT_4,JORDAN2C,GRCAT_1,NORMSP_0,VALUED_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37;
schemes FUNCT_2,NAT_1,FINSEQ_1,RECDEF_1;
registrations RELSET_1,STRUCT_0,XREAL_0,MEMBERED,LOPBAN_1,FUNCT_2,NAT_1,REAL_NS1,NUMBERS,XBOOLE_0,XXREAL_0,VALUED_0,EUCLID,FINSEQ_2,CARD_1,VALUED_1,VALUED_2,CKB16,CKB17,CKB25,CKB26;
constructors REAL_1,SQUARE_1,RSSPACE3,FINSEQOP,VFUNCT_1,COMPLEX1,NFCONT_1,NDIFF_1,SEQ_1,PDIFF_1,BINOP_2,MONOID_0,INTEGR15,RELSET_1,EUCLID_7,RFINSEQ2,GRCAT_1,JORDAN2B,VALUED_2,CKB11,CKB12,CKB20,CKB21;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve i for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
theorem
(for m,n being non  empty (Element of ( NAT )) holds (for g being (PartFunc of ( REAL-NS m ),( REAL-NS n )) holds (for x0 being (Point of ( REAL-NS m )) holds (g is_differentiable_in x0 iff (for i being (Element of ( NAT )) holds ((1 <= i & i <= n) implies ( ( Proj (i,n) ) * g ) is_differentiable_in x0))))))
proof
let m being non  empty (Element of ( NAT ));
let n being non  empty (Element of ( NAT ));
let g being (PartFunc of ( REAL-NS m ),( REAL-NS n ));
let x0 being (Point of ( REAL-NS m ));
set RB = ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS m ),( REAL-NS n )) );
((for i being (Element of ( NAT )) holds ((1 <= i & i <= n) implies ( ( Proj (i,n) ) * g ) is_differentiable_in x0)) implies g is_differentiable_in x0)
proof
assume A1: (for i being (Element of ( NAT )) holds ((1 <= i & i <= n) implies ( ( Proj (i,n) ) * g ) is_differentiable_in x0));
defpred Pd[ (Element of ( NAT )),(Element of ( REAL )) ]
 means
(($2 > ( 0 ) & { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < $2 } c= ( dom ( ( Proj ($1,n) ) * g ) )) & (ex Ri being (REST of ( REAL-NS m ),( REAL-NS 1 )) st (for x being (Point of ( REAL-NS m )) holds (x in { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < $2 } implies ( ( ( ( Proj ($1,n) ) * g ) /. x ) - ( ( ( Proj ($1,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj ($1,n) ) * g ),x0) ) . ( x - x0 ) ) + ( Ri /. ( x - x0 ) ) )))));
A2: (for k being (Element of ( NAT )) holds (k in ( Seg n ) implies (ex dk being (Element of ( REAL )) st Pd[ k,dk ])))
proof
let k being (Element of ( NAT ));
assume k in ( Seg n );
then (1 <= k & k <= n) by FINSEQ_1:1;
then ( ( Proj (k,n) ) * g ) is_differentiable_in x0 by A1;
then consider Nk being (Neighbourhood of x0) such that A3: (Nk c= ( dom ( ( Proj (k,n) ) * g ) ) & (ex Rk being (REST of ( REAL-NS m ),( REAL-NS 1 )) st (for x being (Point of ( REAL-NS m )) holds (x in Nk implies ( ( ( ( Proj (k,n) ) * g ) /. x ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( x - x0 ) ) + ( Rk /. ( x - x0 ) ) ))))) by NDIFF_1:def 7;
consider dk being Real such that A4: (( 0 ) < dk & { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < dk } c= Nk) by NFCONT_1:def 1;
reconsider dk as (Element of ( REAL ));
take dk;
thus ( 0 ) < dk by A4;
thus { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < dk } c= ( dom ( ( Proj (k,n) ) * g ) ) by A4,A3,XBOOLE_1:1;
thus (ex Rk being (REST of ( REAL-NS m ),( REAL-NS 1 )) st (for x being (Point of ( REAL-NS m )) holds (x in { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < dk } implies ( ( ( ( Proj (k,n) ) * g ) /. x ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( x - x0 ) ) + ( Rk /. ( x - x0 ) ) ))))
proof
consider Rk being (REST of ( REAL-NS m ),( REAL-NS 1 )) such that A5: (for x being (Point of ( REAL-NS m )) holds (x in Nk implies ( ( ( ( Proj (k,n) ) * g ) /. x ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( x - x0 ) ) + ( Rk /. ( x - x0 ) ) ))) by A3;
take Rk;
thus (for x being (Point of ( REAL-NS m )) holds (x in { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < dk } implies ( ( ( ( Proj (k,n) ) * g ) /. x ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( x - x0 ) ) + ( Rk /. ( x - x0 ) ) ))) by A4,A5;
end;

end;
consider d being (FinSequence of ( REAL )) such that A6: (( dom d ) = ( Seg n ) & (for k being (Element of ( NAT )) holds (k in ( Seg n ) implies Pd[ k,( d /. k ) ]))) from RECDEF_1:sch 17(A2);
set d0 = ( min d );
( len d ) = n by A6,FINSEQ_1:def 3;
then A7: ( min_p d ) in ( dom d ) by RFINSEQ2:def 2;
then ( d /. ( min_p d ) ) > ( 0 ) by A6;
then A8: d0 > ( 0 ) by A7,PARTFUN1:def 6;
defpred LX[ set,set ]
 means
(ex y being (Element of ( REAL n )) st ($2 = y & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( y . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . $1 ) )))));
A9: (for x being (Point of ( REAL-NS m )) holds (ex y being (Point of ( REAL-NS n )) st LX[ x,y ]))
proof
let x being (Point of ( REAL-NS m ));
defpred YX[ (Element of ( NAT )),set ]
 means
$2 = ( ( proj (1,1) ) . ( ( diff (( ( Proj ($1,n) ) * g ),x0) ) . x ) );
A10: (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies (ex r being (Element of ( REAL )) st YX[ i,r ])));
consider y being (FinSequence of ( REAL )) such that A11: (( dom y ) = ( Seg n ) & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies YX[ i,( y /. i ) ]))) from RECDEF_1:sch 17(A10);
( len y ) = n by A11,FINSEQ_1:def 3;
then reconsider y as (Element of ( REAL n )) by FINSEQ_2:92;
A12:now
let i being (Element of ( NAT ));
assume i in ( Seg n );
then (YX[ i,( y /. i ) ] & ( y /. i ) = ( y . i )) by A11,PARTFUN1:def 6;
hence ( y . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) );
end;
reconsider y0 = y as (Point of ( REAL-NS n )) by REAL_NS1:def 4;
(ex y being (Element of ( REAL n )) st (y0 = y & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( y . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) ))))) by A12;
hence (ex y0 being (Point of ( REAL-NS n )) st LX[ x,y0 ]);
end;
consider L being (Function of ( REAL-NS m ),( REAL-NS n )) such that A13: (for x being (Point of ( REAL-NS m )) holds LX[ x,( L . x ) ]) from FUNCT_2:sch 3(A9);
A14: (for x,y being (VECTOR of ( REAL-NS m )) holds ( L . ( x + y ) ) = ( ( L . x ) + ( L . y ) ))
proof
let x being (VECTOR of ( REAL-NS m ));
let y being (VECTOR of ( REAL-NS m ));
consider Lx being (Element of ( REAL n )) such that A15: (( L . x ) = Lx & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( Lx . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) )))) by A13;
consider Ly being (Element of ( REAL n )) such that A16: (( L . y ) = Ly & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( Ly . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . y ) )))) by A13;
consider Lxy being (Element of ( REAL n )) such that A17: (( L . ( x + y ) ) = Lxy & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( Lxy . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( x + y ) ) )))) by A13;
( dom Lxy ) = ( Seg n ) by FINSEQ_1:89;
then A18: ( dom Lxy ) = ( dom ( Lx + Ly ) ) by FINSEQ_1:89;
(for i0 being Nat holds (i0 in ( dom Lxy ) implies ( Lxy . i0 ) = ( ( Lx + Ly ) . i0 )))
proof
let i0 being Nat;
reconsider i = i0 as (Element of ( NAT )) by ORDINAL1:def 12;
assume i0 in ( dom Lxy );
then i in ( Seg n ) by FINSEQ_1:89;
then A19: ((( Lxy . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( x + y ) ) ) & ( Lx . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) )) & ( Ly . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . y ) )) by A15,A16,A17;
( diff (( ( Proj (i,n) ) * g ),x0) ) is (LinearOperator of ( REAL-NS m ),( REAL-NS 1 )) by LOPBAN_1:def 9;
then A20: ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( x + y ) ) = ( ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) + ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . y ) ) by GRCAT_1:def 8;
reconsider Diffxy = ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( x + y ) ) as (Element of ( REAL 1 )) by REAL_NS1:def 4;
reconsider Diffx = ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) as (Element of ( REAL 1 )) by REAL_NS1:def 4;
reconsider Diffy = ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . y ) as (Element of ( REAL 1 )) by REAL_NS1:def 4;
Diffxy = ( Diffx + Diffy ) by A20,REAL_NS1:2;
then ( Lxy . i0 ) = ( ( Diffx + Diffy ) . 1 ) by A19,PDIFF_1:def 1;
then ( Lxy . i0 ) = ( ( Diffx . 1 ) + ( Diffy . 1 ) ) by RVSUM_1:11;
then ( Lxy . i0 ) = ( ( Lx . i0 ) + ( Diffy . 1 ) ) by A19,PDIFF_1:def 1;
then ( Lxy . i0 ) = ( ( Lx . i0 ) + ( Ly . i0 ) ) by A19,PDIFF_1:def 1;
hence thesis by RVSUM_1:11;
end;
then Lxy = ( Lx + Ly ) by A18,FINSEQ_1:13;
hence thesis by A15,A16,A17,REAL_NS1:2;
end;
(for x being (VECTOR of ( REAL-NS m )) holds (for r being Real holds ( L . ( r * x ) ) = ( r * ( L . x ) )))
proof
let x being (VECTOR of ( REAL-NS m ));
let r being Real;
consider Lx being (Element of ( REAL n )) such that A21: (( L . x ) = Lx & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( Lx . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) )))) by A13;
consider Lrx being (Element of ( REAL n )) such that A22: (( L . ( r * x ) ) = Lrx & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( Lrx . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( r * x ) ) )))) by A13;
( dom ( r * Lx ) ) = ( Seg n ) by FINSEQ_1:89;
then A23: ( dom ( r * Lx ) ) = ( dom Lrx ) by FINSEQ_1:89;
(for i0 being Nat holds (i0 in ( dom ( r * Lx ) ) implies ( ( r * Lx ) . i0 ) = ( Lrx . i0 )))
proof
let i0 being Nat;
reconsider i = i0 as (Element of ( NAT )) by ORDINAL1:def 12;
assume i0 in ( dom ( r * Lx ) );
then i0 in ( Seg n ) by FINSEQ_1:89;
then A24: (( Lx . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) ) & ( Lrx . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( r * x ) ) )) by A21,A22;
( diff (( ( Proj (i,n) ) * g ),x0) ) is (LinearOperator of ( REAL-NS m ),( REAL-NS 1 )) by LOPBAN_1:def 9;
then A25: ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( r * x ) ) = ( r * ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) ) by LOPBAN_1:def 5;
reconsider Diffrx = ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . ( r * x ) ) as (Element of ( REAL 1 )) by REAL_NS1:def 4;
reconsider Diffx = ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . x ) as (Element of ( REAL 1 )) by REAL_NS1:def 4;
Diffrx = ( r * Diffx ) by A25,REAL_NS1:3;
then ( Lrx . i0 ) = ( ( r * Diffx ) . 1 ) by A24,PDIFF_1:def 1;
then ( Lrx . i0 ) = ( r * ( Diffx . 1 ) ) by RVSUM_1:45;
then ( Lrx . i0 ) = ( r * ( Lx . i0 ) ) by A24,PDIFF_1:def 1;
hence thesis by RVSUM_1:45;
end;
then ( r * Lx ) = Lrx by A23,FINSEQ_1:13;
hence thesis by A21,A22,REAL_NS1:3;
end;
then reconsider L as (LinearOperator of ( REAL-NS m ),( REAL-NS n )) by A14,GRCAT_1:def 8,LOPBAN_1:def 5;
reconsider L0 = L as (Point of RB) by LOPBAN_1:def 9;
deffunc RD((Element of ( REAL-NS m ))) = ( ( ( g /. ( $1 + x0 ) ) - ( g /. x0 ) ) - ( L . $1 ) );
consider R being (Function of ( REAL-NS m ),( REAL-NS n )) such that A26: (for x being (Element of ( REAL-NS m )) holds ( R . x ) = RD(x)) from FUNCT_2:sch 4;
A27: (for x being (Element of ( REAL-NS m )) holds (for i being (Element of ( NAT )) holds ((i in ( Seg n ) & ( x + x0 ) in ( dom g )) implies ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( ( ( Proj (i,n) ) * g ) /. ( x + x0 ) ) - ( ( ( Proj (i,n) ) * g ) /. x0 ) ) - ( ( ( Proj (i,n) ) * L ) . x ) ))))
proof
let x being (Element of ( REAL-NS m ));
let i being (Element of ( NAT ));
assume that
A28: i in ( Seg n )
and
A29: ( x + x0 ) in ( dom g );
( x0 - x0 ) = ( 0. ( REAL-NS m ) ) by RLVECT_1:15;
then ( x0 - x0 ) = ( 0* m ) by REAL_NS1:def 4;
then ||. ( x0 - x0 ) .|| = |. ( 0* m ) .| by REAL_NS1:1;
then A30: ||. ( x0 - x0 ) .|| = ( 0 ) by EUCLID:7;
A31: (( 0 ) < ( d /. i ) & { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < ( d /. i ) } c= ( dom ( ( Proj (i,n) ) * g ) )) by A28,A6;
then x0 in { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < ( d /. i ) } by A30;
then A32: x0 in ( dom ( ( Proj (i,n) ) * g ) ) by A31;
A33: ( dom ( ( Proj (i,n) ) * g ) ) c= ( dom g ) by RELAT_1:25;
reconsider gxx0 = ( g /. ( x + x0 ) ),gx0 = ( g /. x0 ),Lx = ( L . x ) as (Element of ( REAL n )) by REAL_NS1:def 4;
reconsider Lx1 = ( L . x ) as (Point of ( REAL-NS n ));
A34: (( - gx0 ) = ( ( - 1 ) * ( g /. x0 ) ) & ( - Lx ) = ( ( - 1 ) * ( L . x ) )) by REAL_NS1:3;
then ( gxx0 + ( - gx0 ) ) = ( ( g /. ( x + x0 ) ) + ( ( - 1 ) * ( g /. x0 ) ) ) by REAL_NS1:2;
then A35: ( ( gxx0 + ( - gx0 ) ) + ( - Lx ) ) = ( ( ( g /. ( x + x0 ) ) + ( ( - 1 ) * ( g /. x0 ) ) ) + ( ( - 1 ) * ( L . x ) ) ) by A34,REAL_NS1:2;
( gxx0 - gx0 ) = ( ( g /. ( x + x0 ) ) - ( g /. x0 ) ) by REAL_NS1:5;
then A36: ( ( ( g /. ( x + x0 ) ) - ( g /. x0 ) ) - ( L . x ) ) = ( ( gxx0 - gx0 ) - Lx ) by REAL_NS1:5;
( ( ( Proj (i,n) ) * R ) . x ) = ( ( Proj (i,n) ) . ( R . x ) ) by FUNCT_2:15;
then ( ( ( Proj (i,n) ) * R ) . x ) = ( ( Proj (i,n) ) . ( ( ( g /. ( x + x0 ) ) - ( g /. x0 ) ) - ( L . x ) ) ) by A26;
then ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( Proj (i,n) ) . ( ( g /. ( x + x0 ) ) + ( ( - 1 ) * ( g /. x0 ) ) ) ) + ( ( Proj (i,n) ) . ( ( - 1 ) * ( L . x ) ) ) ) by A36,A35,CKB35:1;
then A37: ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( ( Proj (i,n) ) . ( g /. ( x + x0 ) ) ) + ( ( Proj (i,n) ) . ( ( - 1 ) * ( g /. x0 ) ) ) ) + ( ( Proj (i,n) ) . ( ( - 1 ) * ( L . x ) ) ) ) by CKB35:1;
(( ( Proj (i,n) ) . ( ( - 1 ) * ( g /. x0 ) ) ) = ( ( - 1 ) * ( ( Proj (i,n) ) . ( g /. x0 ) ) ) & ( ( Proj (i,n) ) . ( ( - 1 ) * Lx1 ) ) = ( ( - 1 ) * ( ( Proj (i,n) ) . Lx1 ) )) by CKB36:1;
then ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( ( Proj (i,n) ) . ( g /. ( x + x0 ) ) ) + ( - ( ( Proj (i,n) ) . ( g /. x0 ) ) ) ) + ( ( - 1 ) * ( ( Proj (i,n) ) . ( L . x ) ) ) ) by A37,RLVECT_1:16;
then ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( ( Proj (i,n) ) . ( g /. ( x + x0 ) ) ) + ( - ( ( Proj (i,n) ) . ( g /. x0 ) ) ) ) + ( - ( ( Proj (i,n) ) . ( L . x ) ) ) ) by RLVECT_1:16;
then ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( ( Proj (i,n) ) . ( g /. ( x + x0 ) ) ) - ( ( Proj (i,n) ) . ( g /. x0 ) ) ) + ( - ( ( Proj (i,n) ) . ( L . x ) ) ) ) by RLVECT_1:def 11;
then A38: ( ( ( Proj (i,n) ) * R ) . x ) = ( ( ( ( Proj (i,n) ) . ( g /. ( x + x0 ) ) ) - ( ( Proj (i,n) ) . ( g /. x0 ) ) ) - ( ( Proj (i,n) ) . ( L . x ) ) ) by RLVECT_1:def 11;
(( g /. ( x + x0 ) ) in (the carrier of ( REAL-NS n )) & ( g /. x0 ) in (the carrier of ( REAL-NS n )));
then A39: (( g /. ( x + x0 ) ) in ( dom ( Proj (i,n) ) ) & ( g /. x0 ) in ( dom ( Proj (i,n) ) )) by FUNCT_2:def 1;
A40: ( ( Proj (i,n) ) . ( g /. ( x + x0 ) ) ) = ( ( Proj (i,n) ) /. ( g /. ( x + x0 ) ) )
.= ( ( ( Proj (i,n) ) * g ) /. ( x + x0 ) ) by A29,A39,PARTFUN2:4;
( ( Proj (i,n) ) . ( g /. x0 ) ) = ( ( Proj (i,n) ) /. ( g /. x0 ) )
.= ( ( ( Proj (i,n) ) * g ) /. x0 ) by A32,A33,A39,PARTFUN2:4;
hence thesis by A38,A40,FUNCT_2:15;
end;
(for r being Real holds (r > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for z being (Point of ( REAL-NS m )) holds ((z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < d) implies ( ( ||. z .|| " ) * ||. ( R /. z ) .|| ) < r))))))
proof
let r being Real;
assume A41: r > ( 0 );
set r0 = ( ( ( sqrt n ) " ) * r );
A42: ( sqrt n ) > ( 0 ) by SQUARE_1:25;
then A43: r0 > ( 0 ) by A41,XREAL_1:129;
defpred DD[ (Element of ( NAT )),(Element of ( REAL )) ]
 means
($2 > ( 0 ) & (for z being (Point of ( REAL-NS m )) holds ((z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < $2) implies ( ( ||. z .|| " ) * ||. ( ( ( Proj ($1,n) ) * R ) /. z ) .|| ) < r0)));
A44: (for k being (Element of ( NAT )) holds (k in ( Seg n ) implies (ex dd being (Element of ( REAL )) st DD[ k,dd ])))
proof
let k being (Element of ( NAT ));
assume A45: k in ( Seg n );
then (1 <= k & k <= n) by FINSEQ_1:1;
then ( ( Proj (k,n) ) * g ) is_differentiable_in x0 by A1;
then consider Nk being (Neighbourhood of x0) such that A46: (Nk c= ( dom ( ( Proj (k,n) ) * g ) ) & (ex PR being (REST of ( REAL-NS m ),( REAL-NS 1 )) st (for x being (Point of ( REAL-NS m )) holds (x in Nk implies ( ( ( ( Proj (k,n) ) * g ) /. x ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( x - x0 ) ) + ( PR /. ( x - x0 ) ) ))))) by NDIFF_1:def 7;
consider d0 being Real such that A47: (( 0 ) < d0 & { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < d0 } c= Nk) by NFCONT_1:def 1;
consider PR being (REST of ( REAL-NS m ),( REAL-NS 1 )) such that A48: (for x being (Point of ( REAL-NS m )) holds (x in Nk implies ( ( ( ( Proj (k,n) ) * g ) /. x ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( x - x0 ) ) + ( PR /. ( x - x0 ) ) ))) by A46;
PR is  total by NDIFF_1:def 5;
then consider d1 being Real such that A49: (d1 > ( 0 ) & (for z being (Point of ( REAL-NS m )) holds ((z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < d1) implies ( ( ||. z .|| " ) * ||. ( PR /. z ) .|| ) < r0))) by A43,NDIFF_1:23;
set dd = ( min (d0,d1) );
take dd;
(for z being (Point of ( REAL-NS m )) holds ((z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < dd) implies ( ( ||. z .|| " ) * ||. ( ( ( Proj (k,n) ) * R ) /. z ) .|| ) < r0))
proof
let z being (Point of ( REAL-NS m ));
assume A50: (z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < dd);
dd <= d1 by XXREAL_0:17;
then ||. z .|| < d1 by A50,XXREAL_0:2;
then A51: ( ( ||. z .|| " ) * ||. ( PR /. z ) .|| ) < r0 by A50,A49;
dd <= d0 by XXREAL_0:17;
then A52: ||. z .|| < d0 by A50,XXREAL_0:2;
A53: ( ( z + x0 ) - x0 ) = z by RLVECT_4:1;
then A54: ( z + x0 ) in { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < d0 } by A52;
then ( z + x0 ) in Nk by A47;
then A55: ( z + x0 ) in ( dom ( ( Proj (k,n) ) * g ) ) by A46;
( ( ( ( Proj (k,n) ) * g ) /. ( z + x0 ) ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) = ( ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . ( ( z + x0 ) - x0 ) ) + ( PR /. ( ( z + x0 ) - x0 ) ) ) by A54,A47,A48;
then A56: ( PR /. z ) = ( ( ( ( ( Proj (k,n) ) * g ) /. ( z + x0 ) ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) - ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . z ) ) by A53,RLVECT_4:1;
( dom ( ( Proj (k,n) ) * g ) ) c= ( dom g ) by RELAT_1:25;
then A57: ( ( ( Proj (k,n) ) * R ) . z ) = ( ( ( ( ( Proj (k,n) ) * g ) /. ( z + x0 ) ) - ( ( ( Proj (k,n) ) * g ) /. x0 ) ) - ( ( ( Proj (k,n) ) * L ) . z ) ) by A55,A45,A27;
consider y being (Element of ( REAL n )) such that A58: (( L . z ) = y & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies ( y . i ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (i,n) ) * g ),x0) ) . z ) )))) by A13;
A59: ( y . k ) = ( ( proj (1,1) ) . ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . z ) ) by A58,A45;
( ( diff (( ( Proj (k,n) ) * g ),x0) ) . z ) is (Element of ( REAL 1 )) by REAL_NS1:def 4;
then consider Dk being (Element of ( REAL )) such that A60: ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . z ) = <* Dk *> by FINSEQ_2:97;
reconsider y1 = y as (Point of ( REAL-NS n )) by REAL_NS1:def 4;
( dom L ) = (the carrier of ( REAL-NS m )) by FUNCT_2:def 1;
then ( ( ( Proj (k,n) ) * L ) . z ) = ( ( Proj (k,n) ) . ( L . z ) ) by FUNCT_1:13;
then ( ( ( Proj (k,n) ) * L ) . z ) = <* ( ( proj (k,n) ) . y1 ) *> by A58,PDIFF_1:def 4;
then ( ( ( Proj (k,n) ) * L ) . z ) = <* ( ( proj (1,1) ) . ( ( diff (( ( Proj (k,n) ) * g ),x0) ) . z ) ) *> by A59,PDIFF_1:def 1;
hence thesis by A51,A56,A57,A60,PDIFF_1:1;
end;
hence thesis by A47,A49,XXREAL_0:21;
end;
consider dd being (FinSequence of ( REAL )) such that A61: (( dom dd ) = ( Seg n ) & (for i being (Element of ( NAT )) holds (i in ( Seg n ) implies DD[ i,( dd /. i ) ]))) from RECDEF_1:sch 17(A44);
set d = ( min dd );
take d;
( len dd ) = n by A61,FINSEQ_1:def 3;
then A62: ( min_p dd ) in ( dom dd ) by RFINSEQ2:def 2;
then A63: ( dd /. ( min_p dd ) ) > ( 0 ) by A61;
(for z being (Point of ( REAL-NS m )) holds ((z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < d) implies ( ( ||. z .|| " ) * ||. ( R /. z ) .|| ) < r))
proof
let z being (Point of ( REAL-NS m ));
assume A64: (z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < d);
reconsider Rz = ( R /. z ) as (Element of ( REAL n )) by REAL_NS1:def 4;
reconsider R0 = ( n |-> ( ( ||. z .|| * r0 ) ^2 ) ) as (Element of ( n -tuples_on ( REAL ) )) by FINSEQ_2:112;
reconsider SRz = ( sqr Rz ) as (Element of ( n -tuples_on ( REAL ) ));
||. z .|| <> ( 0 ) by A64,NORMSP_0:def 5;
then A65: ||. z .|| > ( 0 ) by NORMSP_1:4;
A66: (for i0 being Nat holds (i0 in ( Seg n ) implies ( SRz . i0 ) < ( R0 . i0 )))
proof
let i0 being Nat;
reconsider i = i0 as (Element of ( NAT )) by ORDINAL1:def 12;
assume A67: i0 in ( Seg n );
then i in ( dom Rz ) by FINSEQ_2:124;
then ( ( sqr Rz ) . i ) = ( ( sqrreal ) . ( Rz . i ) ) by FUNCT_1:13;
then A68: ( ( sqr Rz ) . i ) = ( ( Rz . i ) ^2 ) by RVSUM_1:def 2;
(1 <= i & i <= n) by A67,FINSEQ_1:1;
then (1 <= i & i <= ( len dd )) by A61,FINSEQ_1:def 3;
then d <= ( dd . i ) by RFINSEQ2:2;
then d <= ( dd /. i ) by A67,A61,PARTFUN1:def 6;
then ||. z .|| < ( dd /. i ) by A64,XXREAL_0:2;
then ( ( ||. z .|| " ) * ||. ( ( ( Proj (i,n) ) * R ) /. z ) .|| ) < r0 by A64,A67,A61;
then A69: ||. ( ( ( Proj (i,n) ) * R ) /. z ) .|| < ( r0 / ( ||. z .|| " ) ) by A65,XREAL_1:81;
reconsider Rzi = <* ( Rz . i ) *> as (Element of ( REAL 1 )) by FINSEQ_2:98;
( ( ( Proj (i,n) ) * R ) . z ) = ( ( Proj (i,n) ) . ( R . z ) ) by FUNCT_2:15;
then ( ( ( Proj (i,n) ) * R ) . z ) = <* ( ( proj (i,n) ) . Rz ) *> by PDIFF_1:def 4;
then ( ( ( Proj (i,n) ) * R ) . z ) = <* ( Rz . i ) *> by PDIFF_1:def 1;
then ||. ( ( ( Proj (i,n) ) * R ) . z ) .|| = |. Rzi .| by REAL_NS1:1;
then |. ( Rz . i ) .| < ( ||. z .|| * r0 ) by A69,JORDAN2C:10;
then ( |. ( Rz . i ) .| ^2 ) < ( ( ||. z .|| * r0 ) ^2 ) by COMPLEX1:46,SQUARE_1:16;
then ( ( Rz . i0 ) ^2 ) < ( ( ||. z .|| * r0 ) ^2 ) by COMPLEX1:75;
hence thesis by A67,A68,FINSEQ_2:57;
end;
A70: (for i being Nat holds (i in ( dom ( sqr Rz ) ) implies ( 0 ) <= ( ( sqr Rz ) . i )))
proof
let i being Nat;
assume i in ( dom ( sqr Rz ) );
then (i in ( dom ( ( sqrreal ) * Rz ) ) & ( dom ( ( sqrreal ) * Rz ) ) c= ( dom Rz )) by RELAT_1:25;
then ( ( sqr Rz ) . i ) = ( ( sqrreal ) . ( Rz . i ) ) by FUNCT_1:13;
then ( ( sqr Rz ) . i ) = ( ( Rz . i ) ^2 ) by RVSUM_1:def 2;
hence thesis by XREAL_1:63;
end;
A71: ( ( ||. z .|| * r0 ) ^2 ) >= ( 0 ) by XREAL_1:63;
A72: (ex i being Nat st (i in ( Seg n ) & ( SRz . i ) < ( R0 . i )))
proof
take 1;
1 <= n by NAT_1:14;
hence 1 in ( Seg n );
hence ( SRz . 1 ) < ( R0 . 1 ) by A66;
end;
A73: ( sqrt n ) > ( 0 ) by SQUARE_1:25;
(for i0 being Nat holds (i0 in ( Seg n ) implies ( SRz . i0 ) <= ( R0 . i0 ))) by A66;
then ( Sum SRz ) < ( Sum R0 ) by A72,RVSUM_1:83;
then ( Sum ( sqr Rz ) ) < ( n * ( ( ||. z .|| * r0 ) ^2 ) ) by RVSUM_1:80;
then |. Rz .| < ( sqrt ( n * ( ( ||. z .|| * r0 ) ^2 ) ) ) by A70,RVSUM_1:84,SQUARE_1:27;
then |. Rz .| < ( ( sqrt n ) * ( sqrt ( ( ||. z .|| * r0 ) ^2 ) ) ) by A71,SQUARE_1:29;
then |. Rz .| < ( ( sqrt n ) * |. ( ||. z .|| * r0 ) .| ) by COMPLEX1:72;
then |. Rz .| < ( ( sqrt n ) * ( ||. z .|| * r0 ) ) by A42,A41,A65,ABSVALUE:def 1;
then |. Rz .| < ( ( ( sqrt n ) * r0 ) * ||. z .|| );
then ( |. Rz .| / ||. z .|| ) < ( ( sqrt n ) * r0 ) by A65,XREAL_1:83;
then ( ( ||. z .|| " ) * ||. ( R /. z ) .|| ) < ( ( ( sqrt n ) * ( ( sqrt n ) " ) ) * r ) by REAL_NS1:1;
then ( ( ||. z .|| " ) * ||. ( R /. z ) .|| ) < ( 1 * r ) by A73,XCMPLX_0:def 7;
hence ( ( ||. z .|| " ) * ||. ( R /. z ) .|| ) < r;
end;
hence thesis by A63,A62,PARTFUN1:def 6;
end;
then reconsider R as (REST of ( REAL-NS m ),( REAL-NS n )) by NDIFF_1:23;
set N = { y where y is (Point of ( REAL-NS m )): ||. ( y - x0 ) .|| < d0 };
reconsider N as (Neighbourhood of x0) by A8,NFCONT_1:3;
now
let x being set;
assume x in N;
then consider y being (Point of ( REAL-NS m )) such that A74: (x = y & ||. ( y - x0 ) .|| < d0);
1 <= n by NAT_1:14;
then A75: (1 in ( Seg n ) & 1 in ( dom d )) by A6;
then A76: { z where z is (Point of ( REAL-NS m )): ||. ( z - x0 ) .|| < ( d /. 1 ) } c= ( dom ( ( Proj (1,n) ) * g ) ) by A6;
( dom ( ( Proj (1,n) ) * g ) ) c= ( dom g ) by RELAT_1:25;
then A77: { z where z is (Point of ( REAL-NS m )): ||. ( z - x0 ) .|| < ( d /. 1 ) } c= ( dom g ) by A76,XBOOLE_1:1;
( len d ) = n by A6,FINSEQ_1:def 3;
then 1 <= ( len d ) by NAT_1:14;
then d0 <= ( d . 1 ) by RFINSEQ2:2;
then d0 <= ( d /. 1 ) by A75,PARTFUN1:def 6;
then ||. ( y - x0 ) .|| < ( d /. 1 ) by A74,XXREAL_0:2;
then y in { z where z is (Point of ( REAL-NS m )): ||. ( z - x0 ) .|| < ( d /. 1 ) };
hence x in ( dom g ) by A74,A77;
end;
then A78: N c= ( dom g ) by TARSKI:def 3;
(ex L being (Point of RB) st (ex R being (REST of ( REAL-NS m ),( REAL-NS n )) st (for x being (Point of ( REAL-NS m )) holds (x in N implies ( ( g /. x ) - ( g /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) )))))
proof
take L0;
take R;
hereby
let x being (Point of ( REAL-NS m ));
assume x in N;
A79: ( dom R ) = (the carrier of ( REAL-NS m )) by PARTFUN1:def 2;
( R . ( x - x0 ) ) = ( ( ( g /. ( ( x - x0 ) + x0 ) ) - ( g /. x0 ) ) - ( L . ( x - x0 ) ) ) by A26;
then ( R . ( x - x0 ) ) = ( ( ( g /. ( x - ( x0 - x0 ) ) ) - ( g /. x0 ) ) - ( L0 . ( x - x0 ) ) ) by RLVECT_1:29;
then ( R . ( x - x0 ) ) = ( ( ( g /. ( x - ( x0 + ( - x0 ) ) ) ) - ( g /. x0 ) ) - ( L0 . ( x - x0 ) ) ) by RLVECT_1:def 11;
then ( R . ( x - x0 ) ) = ( ( ( g /. ( x - ( 0. ( REAL-NS m ) ) ) ) - ( g /. x0 ) ) - ( L0 . ( x - x0 ) ) ) by RLVECT_1:5;
then ( R . ( x - x0 ) ) = ( ( ( g /. x ) - ( g /. x0 ) ) - ( L0 . ( x - x0 ) ) ) by RLVECT_1:13;
then ( R . ( x - x0 ) ) = ( ( ( g /. x ) - ( g /. x0 ) ) + ( - ( L0 . ( x - x0 ) ) ) ) by RLVECT_1:def 11;
then ( R /. ( x - x0 ) ) = ( ( ( g /. x ) - ( g /. x0 ) ) + ( - ( L0 . ( x - x0 ) ) ) ) by A79,PARTFUN1:def 6;
then ( ( L0 . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) = ( ( ( g /. x ) - ( g /. x0 ) ) + ( ( - ( L0 . ( x - x0 ) ) ) + ( L0 . ( x - x0 ) ) ) ) by RLVECT_1:def 3;
then ( ( L0 . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) = ( ( ( g /. x ) - ( g /. x0 ) ) + ( 0. ( REAL-NS n ) ) ) by RLVECT_1:5;
hence ( ( g /. x ) - ( g /. x0 ) ) = ( ( L0 . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by RLVECT_1:4;
end;
end;
hence thesis by A78,NDIFF_1:def 6;
end;
hence thesis by CKB37:1;
end;
