environ
vocabularies PRE_TOPC,RLVECT_1,FUNCT_1,ARYTM_3,ARYTM_1,FINSEQ_1,VALUED_1,MSSUBFAM,FINSEQ_2,CARD_3,RVSUM_1,RELAT_1,COMPLEX1,SQUARE_1,RCOMP_1,PARTFUN1,NORMSP_1,XBOOLE_0,LOPBAN_1,FDIFF_1,REAL_NS1,BORSUK_1,EUCLID,NUMBERS,FUNCOP_1,STRUCT_0,UNIALG_1,EUCLID_7,MATRIXR2,RFINSEQ2,REAL_1,SUBSET_1,CARD_1,TARSKI,XXREAL_0,XXREAL_2,NAT_1,ORDINAL4,SUPINF_2,VALUED_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,COMPLEX1,REAL_1,NAT_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,SEQ_1,STRUCT_0,RLVECT_1,FINSEQ_1,FINSEQ_2,SQUARE_1,VALUED_0,VALUED_1,VALUED_2,RVSUM_1,GRCAT_1,PRE_TOPC,VFUNCT_1,NORMSP_0,NORMSP_1,EUCLID,LOPBAN_1,NFCONT_1,NDIFF_1,REAL_NS1,PDIFF_1,INTEGR15,EUCLID_7,RFINSEQ2,CKB11,CKB12,CKB18,CKB20,CKB21;
definitions LOPBAN_1,RVSUM_1,EUCLID,VALUED_1,FINSEQ_1,XCMPLX_0,RFINSEQ2,VALUED_2,SQUARE_1,CKB11,CKB12,CKB21;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,EUCLID,XREAL_1,XCMPLX_0,RLVECT_1,COMPLEX1,FINSEQ_1,FINSEQ_2,ORDINAL1,NAT_1,XXREAL_0,RVSUM_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,SQUARE_1,INTEGR15,FUNCOP_1,EUCLID_7,FINSEQ_4,FINSEQ_5,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,NDIFF_1,REAL_NS1,VALUED_1,PDIFF_1,RFINSEQ2,RLVECT_4,JORDAN2C,GRCAT_1,NORMSP_0,VALUED_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB21;
schemes FUNCT_2,NAT_1,FINSEQ_1,RECDEF_1;
registrations RELSET_1,STRUCT_0,XREAL_0,MEMBERED,LOPBAN_1,FUNCT_2,NAT_1,REAL_NS1,NUMBERS,XBOOLE_0,XXREAL_0,VALUED_0,EUCLID,FINSEQ_2,CARD_1,VALUED_1,VALUED_2,CKB16,CKB17;
constructors REAL_1,SQUARE_1,RSSPACE3,FINSEQOP,VFUNCT_1,COMPLEX1,NFCONT_1,NDIFF_1,SEQ_1,PDIFF_1,BINOP_2,MONOID_0,INTEGR15,RELSET_1,EUCLID_7,RFINSEQ2,GRCAT_1,JORDAN2B,VALUED_2,CKB11,CKB12,CKB20,CKB21;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve m for (Element of ( NAT ));
theorem
Th15: (for xseq,yseq being (FinSequence of ( REAL m )) holds ((( len xseq ) = ( ( len yseq ) + 1 ) & ( xseq | ( len yseq ) ) = yseq) implies (ex v being (Element of ( REAL m )) st (v = ( xseq . ( len xseq ) ) & ( Sum xseq ) = ( ( Sum yseq ) + v )))))
proof
let xseq being (FinSequence of ( REAL m ));
let yseq being (FinSequence of ( REAL m ));
assume A1: (( len xseq ) = ( ( len yseq ) + 1 ) & ( xseq | ( len yseq ) ) = yseq);
A2: ((( len xseq ) = ( len ( accum xseq ) ) & ( xseq . 1 ) = ( ( accum xseq ) . 1 )) & (for k being Nat holds ((1 <= k & k < ( len xseq )) implies ( ( accum xseq ) . ( k + 1 ) ) = ( ( ( accum xseq ) /. k ) + ( xseq /. ( k + 1 ) ) )))) by EUCLID_7:def 10;
A3: ( Sum xseq ) = ( ( accum xseq ) . ( len xseq ) ) by A1,EUCLID_7:def 11;
set g = ( accum xseq );
set i = ( len yseq );
per cases ;
suppose A4: i = ( 0 );

then reconsider v = ( xseq . ( len xseq ) ) as (Element of ( REAL m )) by A1,A3,EUCLID_7:def 10;
take v;
( Sum yseq ) = ( 0* m ) by A4,EUCLID_7:def 11;
hence (v = ( xseq . ( len xseq ) ) & ( Sum xseq ) = ( ( Sum yseq ) + v )) by A1,A2,A3,A4,RVSUM_1:16;
end;
suppose A5: i <> ( 0 );

A6: ((( len yseq ) = ( len ( accum yseq ) ) & ( yseq . 1 ) = ( ( accum yseq ) . 1 )) & (for k being Nat holds ((1 <= k & k < ( len yseq )) implies ( ( accum yseq ) . ( k + 1 ) ) = ( ( ( accum yseq ) /. k ) + ( yseq /. ( k + 1 ) ) )))) by EUCLID_7:def 10;
A7: ( Sum yseq ) = ( ( accum yseq ) . i ) by A5,EUCLID_7:def 11;
set g0 = ( accum yseq );
A8: i <= ( len g ) by A1,A2,NAT_1:11;
then A9: ( len ( g | i ) ) = i by FINSEQ_1:59;
A10: (for k being Nat holds ((1 <= k & k <= ( len ( g | i ) )) implies ( ( g | i ) . k ) = ( g0 . k )))
proof
defpred PP[ Nat ]
 means
((1 <= $1 & $1 <= ( len ( g | i ) )) implies ( ( g | i ) . $1 ) = ( g0 . $1 ));
A11: PP[ ( 0 ) ];
A12:now
let k being Nat;
assume A13: PP[ k ];
now
assume A14: (1 <= ( k + 1 ) & ( k + 1 ) <= ( len ( g | i ) ));
then A15: ( k + 1 ) <= ( len yseq ) by A8,FINSEQ_1:59;
then ( k + 1 ) in ( Seg i ) by A14;
then A16: (( ( g | i ) . ( k + 1 ) ) = ( g . ( k + 1 ) ) & ( xseq . ( k + 1 ) ) = ( ( xseq | ( Seg i ) ) . ( k + 1 ) )) by FUNCT_1:49;
A17: k < ( len yseq ) by A15,NAT_1:13;
now
assume A18: k <> ( 0 );
then A19: 1 <= k by NAT_1:14;
then A20: k in ( Seg i ) by A17,FINSEQ_1:1;
( len yseq ) <= ( len xseq ) by A1,NAT_1:12;
then A21: k < ( len xseq ) by A17,XXREAL_0:2;
then ( g /. k ) = ( g . k ) by A2,A19,FINSEQ_4:15;
then ( g /. k ) = ( ( g | i ) . k ) by A20,FUNCT_1:49;
then A22: ( g /. k ) = ( g0 /. k ) by A6,A17,A19,A13,A14,FINSEQ_4:15,NAT_1:13;
( k + 1 ) <= ( len xseq ) by A15,A1,NAT_1:12;
then ( xseq /. ( k + 1 ) ) = ( xseq . ( k + 1 ) ) by A14,FINSEQ_4:15;
then ( xseq /. ( k + 1 ) ) = ( yseq /. ( k + 1 ) ) by A1,A14,A9,A16,FINSEQ_4:15;
then ( ( g /. k ) + ( xseq /. ( k + 1 ) ) ) = ( g0 . ( k + 1 ) ) by A6,A17,A18,A22,NAT_1:14;
hence ( ( g | i ) . ( k + 1 ) ) = ( g0 . ( k + 1 ) ) by A2,A16,A18,A21,NAT_1:14;
end;
hence ( ( g | i ) . ( k + 1 ) ) = ( g0 . ( k + 1 ) ) by A1,A6,A16,EUCLID_7:def 10;
end;
hence PP[ ( k + 1 ) ];
end;
thus (for k being Nat holds PP[ k ]) from NAT_1:sch 2(A11,A12);
end;
1 <= i by A5,NAT_1:14;
then i in ( Seg i );
then A23: i in ( dom ( g | i ) ) by A9,FINSEQ_1:def 3;
then i in ( dom g ) by RELAT_1:57;
then ( g . i ) = ( g /. i ) by PARTFUN1:def 6;
then ( ( g | i ) . i ) = ( g /. i ) by A23,FUNCT_1:47;
then A24: ( g0 . i ) = ( g /. i ) by A6,A9,A10,FINSEQ_1:14;
( dom xseq ) = ( Seg ( i + 1 ) ) by A1,FINSEQ_1:def 3;
then ( xseq . ( len xseq ) ) in ( rng xseq ) by A1,FINSEQ_1:4,FUNCT_1:3;
then reconsider v = ( xseq . ( len xseq ) ) as (Element of ( REAL m ));
take v;
thus v = ( xseq . ( len xseq ) );
A25: i < ( len xseq ) by A1,NAT_1:13;
1 <= ( i + 1 ) by NAT_1:11;
then ( ( g /. i ) + ( xseq /. ( i + 1 ) ) ) = ( ( Sum yseq ) + v ) by A7,A24,A1,FINSEQ_4:15;
hence ( Sum xseq ) = ( ( Sum yseq ) + v ) by A1,A25,A2,A3,A5,NAT_1:14;
end;
end;
