environ
vocabularies PRE_TOPC,RLVECT_1,FUNCT_1,ARYTM_3,ARYTM_1,FINSEQ_1,VALUED_1,MSSUBFAM,FINSEQ_2,CARD_3,RVSUM_1,RELAT_1,COMPLEX1,SQUARE_1,RCOMP_1,PARTFUN1,NORMSP_1,XBOOLE_0,LOPBAN_1,FDIFF_1,REAL_NS1,BORSUK_1,EUCLID,NUMBERS,FUNCOP_1,STRUCT_0,UNIALG_1,EUCLID_7,MATRIXR2,RFINSEQ2,REAL_1,SUBSET_1,CARD_1,TARSKI,XXREAL_0,XXREAL_2,NAT_1,ORDINAL4,SUPINF_2,VALUED_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,COMPLEX1,REAL_1,NAT_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,SEQ_1,STRUCT_0,RLVECT_1,FINSEQ_1,FINSEQ_2,SQUARE_1,VALUED_0,VALUED_1,VALUED_2,RVSUM_1,GRCAT_1,PRE_TOPC,VFUNCT_1,NORMSP_0,NORMSP_1,EUCLID,LOPBAN_1,NFCONT_1,NDIFF_1,REAL_NS1,PDIFF_1,INTEGR15,EUCLID_7,RFINSEQ2,CKB11,CKB12,CKB18,CKB20,CKB21;
definitions LOPBAN_1,RVSUM_1,EUCLID,VALUED_1,FINSEQ_1,XCMPLX_0,RFINSEQ2,VALUED_2,SQUARE_1,CKB11,CKB12,CKB21;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,EUCLID,XREAL_1,XCMPLX_0,RLVECT_1,COMPLEX1,FINSEQ_1,FINSEQ_2,ORDINAL1,NAT_1,XXREAL_0,RVSUM_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,SQUARE_1,INTEGR15,FUNCOP_1,EUCLID_7,FINSEQ_4,FINSEQ_5,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,NDIFF_1,REAL_NS1,VALUED_1,PDIFF_1,RFINSEQ2,RLVECT_4,JORDAN2C,GRCAT_1,NORMSP_0,VALUED_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes FUNCT_2,NAT_1,FINSEQ_1,RECDEF_1;
registrations RELSET_1,STRUCT_0,XREAL_0,MEMBERED,LOPBAN_1,FUNCT_2,NAT_1,REAL_NS1,NUMBERS,XBOOLE_0,XXREAL_0,VALUED_0,EUCLID,FINSEQ_2,CARD_1,VALUED_1,VALUED_2,CKB16,CKB17,CKB25,CKB26;
constructors REAL_1,SQUARE_1,RSSPACE3,FINSEQOP,VFUNCT_1,COMPLEX1,NFCONT_1,NDIFF_1,SEQ_1,PDIFF_1,BINOP_2,MONOID_0,INTEGR15,RELSET_1,EUCLID_7,RFINSEQ2,GRCAT_1,JORDAN2B,VALUED_2,CKB11,CKB12,CKB20,CKB21;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
theorem
(for m,n being non empty (Element of ( NAT )) holds (for f being (PartFunc of ( REAL m ),( REAL n )) holds (for x0 being (Element of ( REAL m )) holds (f is_differentiable_in x0 iff (ex r0 being Real st ((( 0 ) < r0 & { y where y is (Element of ( REAL m )): |. ( y - x0 ) .| < r0 } c= ( dom f )) & (ex L,R being (Function of ( REAL m ),( REAL n )) st ((L is (LinearOperator of m,n) & (for r being Real holds (r > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for z being (Element of ( REAL m )) holds (for w being (Element of ( REAL n )) holds (((z <> ( 0* m ) & |. z .| < d) & w = ( R . z )) implies ( ( |. z .| " ) * |. w .| ) < r)))))))) & (for x being (Element of ( REAL m )) holds (|. ( x - x0 ) .| < r0 implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) )))))))))))
proof
let m being non empty (Element of ( NAT )),n being non empty (Element of ( NAT ));
let f being (PartFunc of ( REAL m ),( REAL n ));
let x0 being (Element of ( REAL m ));
reconsider g = f as (PartFunc of ( REAL-NS m ),( REAL-NS n )) by CKB1:1;
reconsider y0 = x0 as (Point of ( REAL-NS m )) by REAL_NS1:def 4;
hereby
assume f is_differentiable_in x0;
then g is_differentiable_in y0 by CKB2:1;
then consider N being (Neighbourhood of y0) such that A1: (N c= ( dom g ) & (ex GL being (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS m ),( REAL-NS n )) )) st (ex GR being (REST of ( REAL-NS m ),( REAL-NS n )) st (for y being (Point of ( REAL-NS m )) holds (y in N implies ( ( g /. y ) - ( g /. y0 ) ) = ( ( GL . ( y - y0 ) ) + ( GR /. ( y - y0 ) ) )))))) by NDIFF_1:def 6;
consider GL being (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS m ),( REAL-NS n )) )),GR being (REST of ( REAL-NS m ),( REAL-NS n )) such that A2: (for y being (Point of ( REAL-NS m )) holds (y in N implies ( ( g /. y ) - ( g /. y0 ) ) = ( ( GL . ( y - y0 ) ) + ( GR /. ( y - y0 ) ) ))) by A1;
consider r0 being Real such that A3: (( 0 ) < r0 & { y where y is (Point of ( REAL-NS m )): ||. ( y - y0 ) .|| < r0 } c= N) by NFCONT_1:def 1;
take r0;
thus ( 0 ) < r0 by A3;
{ y where y is (Point of ( REAL-NS m )): ||. ( y - y0 ) .|| < r0 } c= ( dom g ) by A3,A1,XBOOLE_1:1;
hence { y where y is (Element of ( REAL m )): |. ( y - x0 ) .| < r0 } c= ( dom f ) by CKB32:1;
A4: GR is  total by NDIFF_1:def 5;
then A5: ( dom GR ) = (the carrier of ( REAL-NS m )) by PARTFUN1:def 2;
A6: ((the carrier of ( REAL-NS m )) = ( REAL m ) & (the carrier of ( REAL-NS n )) = ( REAL n )) by REAL_NS1:def 4;
then reconsider L = GL as (Function of ( REAL m ),( REAL n )) by LOPBAN_1:def 9;
reconsider R = GR as (Function of ( REAL m ),( REAL n )) by A6,A4;
take L;
take R;
GL is (LinearOperator of ( REAL-NS m ),( REAL-NS n )) by LOPBAN_1:def 9;
hence L is (LinearOperator of m,n) by CKB19:1;
thus (for r being Real holds (r > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for z being (Element of ( REAL m )) holds (for w being (Element of ( REAL n )) holds (((z <> ( 0* m ) & |. z .| < d) & w = ( R . z )) implies ( ( |. z .| " ) * |. w .| ) < r)))))))
proof
let r being Real;
assume r > ( 0 );
then consider d being Real such that A7: (d > ( 0 ) & (for z being (Point of ( REAL-NS m )) holds ((z <> ( 0. ( REAL-NS m ) ) & ||. z .|| < d) implies ( ( ||. z .|| " ) * ||. ( GR /. z ) .|| ) < r))) by A4,NDIFF_1:23;
take d;
thus d > ( 0 ) by A7;
let z being (Element of ( REAL m ));
let w being (Element of ( REAL n ));
assume A8: ((z <> ( 0* m ) & |. z .| < d) & w = ( R . z ));
reconsider s = z as (Element of ( REAL-NS m )) by REAL_NS1:def 4;
A9: s <> ( 0. ( REAL-NS m ) ) by A8,REAL_NS1:def 4;
||. s .|| < d by A8,REAL_NS1:1;
then ( ( ||. s .|| " ) * ||. ( GR /. s ) .|| ) < r by A7,A9;
then ( ( |. z .| " ) * ||. ( GR /. s ) .|| ) < r by REAL_NS1:1;
hence ( ( |. z .| " ) * |. w .| ) < r by A5,A8,PARTFUN1:def 6,REAL_NS1:1;
end;

thus (for x being (Element of ( REAL m )) holds (|. ( x - x0 ) .| < r0 implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) )))
proof
let x being (Element of ( REAL m ));
assume |. ( x - x0 ) .| < r0;
then x in { s where s is (Element of ( REAL m )): |. ( s - x0 ) .| < r0 };
then A10: x in { y where y is (Point of ( REAL-NS m )): ||. ( y - y0 ) .|| < r0 } by CKB32:1;
reconsider y = x as (Point of ( REAL-NS m )) by REAL_NS1:def 4;
A11: ( ( g /. y ) - ( g /. y0 ) ) = ( ( GL . ( y - y0 ) ) + ( GR /. ( y - y0 ) ) ) by A3,A10,A2;
A12: (y in N & y0 in N) by A3,A10,NFCONT_1:4;
then (( f /. x ) = ( f . x ) & ( f /. x0 ) = ( f . x0 )) by A1,PARTFUN1:def 6;
then A13: (( f /. x ) = ( g /. y ) & ( f /. x0 ) = ( g /. y0 )) by A12,A1,PARTFUN1:def 6;
( x - x0 ) = ( y - y0 ) by REAL_NS1:5;
then (( L . ( x - x0 ) ) = ( GL . ( y - y0 ) ) & ( R . ( x - x0 ) ) = ( GR /. ( y - y0 ) )) by A5,PARTFUN1:def 6;
then ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ) = ( ( GL . ( y - y0 ) ) + ( GR /. ( y - y0 ) ) ) by REAL_NS1:2;
hence ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ) by A11,A13,REAL_NS1:5;
end;

end;
assume (ex r0 being Real st ((( 0 ) < r0 & { y where y is (Element of ( REAL m )): |. ( y - x0 ) .| < r0 } c= ( dom f )) & (ex L,R being (Function of ( REAL m ),( REAL n )) st ((L is (LinearOperator of m,n) & (for r being Real holds (r > ( 0 ) implies (ex d being Real st (d > ( 0 ) & (for z being (Element of ( REAL m )) holds (for w being (Element of ( REAL n )) holds (((z <> ( 0* m ) & |. z .| < d) & w = ( R . z )) implies ( ( |. z .| " ) * |. w .| ) < r)))))))) & (for x being (Element of ( REAL m )) holds (|. ( x - x0 ) .| < r0 implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) )))))));
hence f is_differentiable_in x0 by CKB33:1;
end;
