environ
vocabularies NUMBERS,ALGSTR_0,STRUCT_0,SUBSET_1,BINOP_1,FUNCT_1,ZFMISC_1,XBOOLE_0,XREAL_0,ORDINAL1,RELAT_1,REAL_1,ARYTM_3,SUPINF_2,FUNCT_5,MCART_1,ARYTM_1,CARD_1,FINSEQ_1,ORDINAL4,CARD_3,TARSKI,XXREAL_0,FUNCOP_1,NAT_1,VALUED_0,RLVECT_1,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,RELAT_1,FUNCT_1,FUNCT_2,BINOP_1,FUNCOP_1,REAL_1,FINSEQ_1,NAT_1,FUNCT_3,FUNCT_5,FINSEQ_4,STRUCT_0,ALGSTR_0,CKB1,CKB3,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB20,CKB21,CKB25,CKB27,CKB62;
definitions FUNCT_1,TARSKI,STRUCT_0,RELAT_1,ALGSTR_0,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB25,CKB27,CKB62;
theorems FUNCT_1,NAT_1,TARSKI,RELAT_1,STRUCT_0,XBOOLE_0,XBOOLE_1,FINSEQ_1,XCMPLX_0,FUNCOP_1,XREAL_1,XXREAL_0,ORDINAL1,ALGSTR_0,CARD_1,FINSEQ_3,XREAL_0,CKB4,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64;
schemes FINSEQ_1,FUNCT_2,NAT_1;
registrations XBOOLE_0,ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,STRUCT_0,REAL_1,ALGSTR_0,FINSEQ_1,CARD_1,ZFMISC_1,FUNCT_1,RELAT_1,CKB1,CKB2,CKB7,CKB16,CKB17,CKB18,CKB19;
constructors BINOP_1,FUNCOP_1,XXREAL_0,REAL_1,NAT_1,FINSEQ_1,FUNCT_3,FUNCT_5,ALGSTR_0,REALSET1,RELSET_1,FINSEQ_4,VALUED_0,CKB1,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB21,CKB62;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve V for non empty addLoopStr;
reserve f for (Function of ( NAT ),V);
reserve g for (Function of ( NAT ),V);
reserve v for (Element of V);
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
theorem
Th55: (for F,G being (FinSequence of V) holds (((( len F ) = ( ( len G ) + 1 ) & G = ( F | ( dom G ) )) & v = ( F . ( len F ) )) implies ( Sum F ) = ( ( Sum G ) + v )))
proof
let F being (FinSequence of V),G being (FinSequence of V);
assume that
A1: ( len F ) = ( ( len G ) + 1 )
and
A2: G = ( F | ( dom G ) )
and
A3: v = ( F . ( len F ) );
consider g such that A4: ( Sum G ) = ( g . ( len G ) ) and A5: ( g . ( 0 ) ) = ( 0. V ) and A6: (for j holds (for v holds ((j < ( len G ) & v = ( G . ( j + 1 ) )) implies ( g . ( j + 1 ) ) = ( ( g . j ) + v )))) by CKB62:def 1;
consider f such that A7: ( Sum F ) = ( f . ( len F ) ) and A8: ( f . ( 0 ) ) = ( 0. V ) and A9: (for j holds (for v holds ((j < ( len F ) & v = ( F . ( j + 1 ) )) implies ( f . ( j + 1 ) ) = ( ( f . j ) + v )))) by CKB62:def 1;
defpred P[ (Element of ( NAT )) ]
 means
(for H being (FinSequence of V) holds (((( len H ) = $1 & H = ( F | ( Seg $1 ) )) & ( len H ) <= ( len G )) implies ( f . ( len H ) ) = ( g . ( len H ) )));
now
let k;
assume A10: (for H being (FinSequence of V) holds (((( len H ) = k & H = ( F | ( Seg k ) )) & ( len H ) <= ( len G )) implies ( f . ( len H ) ) = ( g . ( len H ) )));
let H being (FinSequence of V);
assume that
A11: ( len H ) = ( k + 1 )
and
A12: H = ( F | ( Seg ( k + 1 ) ) )
and
A13: ( len H ) <= ( len G );
(1 <= ( k + 1 ) & ( k + 1 ) <= ( len F )) by A1,A11,A13,NAT_1:12;
then ( k + 1 ) in ( dom F ) by FINSEQ_3:25;
then reconsider v = ( F . ( k + 1 ) ) as (Element of V) by FUNCT_1:102;
1 <= ( k + 1 ) by NAT_1:12;
then ( k + 1 ) in ( Seg ( len G ) ) by A11,A13,FINSEQ_1:1;
then ( k + 1 ) in ( dom G ) by FINSEQ_1:def 3;
then A14: v = ( G . ( k + 1 ) ) by A2,FUNCT_1:47;
reconsider H1 = H as (FinSequence of V);
reconsider p = ( H1 | ( Seg k ) ) as (FinSequence of V) by FINSEQ_1:18;
A15: k <= ( len H ) by A11,NAT_1:12;
then ( Seg k ) c= ( Seg ( k + 1 ) ) by A11,FINSEQ_1:5;
then A16: p = ( F | ( Seg k ) ) by A12,FUNCT_1:51;
k < ( k + 1 ) by XREAL_1:29;
then k < ( len G ) by A11,A13,XXREAL_0:2;
then A17: ( g . ( k + 1 ) ) = ( ( g . k ) + v ) by A6,A14;
A18: ( len G ) < ( len F ) by A1,XREAL_1:29;
k <= ( len G ) by A13,A15,XXREAL_0:2;
then k < ( len F ) by A18,XXREAL_0:2;
then A19: ( f . ( k + 1 ) ) = ( ( f . k ) + v ) by A9;
( len p ) = k by A15,FINSEQ_1:17;
hence ( f . ( len H ) ) = ( g . ( len H ) ) by A10,A11,A13,A15,A16,A19,A17,XXREAL_0:2;
end;
then A20: (for k holds (P[ k ] implies P[ ( k + 1 ) ]));
A21: ( dom G ) = ( Seg ( len G ) ) by FINSEQ_1:def 3;
A22: P[ ( 0 ) ] by A8,A5;
( rng G ) c= (the carrier of V) by RELAT_1:def 19;
then A23: G is (FinSequence of V) by FINSEQ_1:def 4;
(for k holds P[ k ]) from NAT_1:sch 1(A22,A20);
then ( f . ( len G ) ) = ( g . ( len G ) ) by A2,A21,A23;
hence thesis by A1,A3,A7,A9,A4,XREAL_1:29;
end;
