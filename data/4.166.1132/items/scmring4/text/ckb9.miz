environ
vocabularies ORDINAL1,SUBSET_1,NUMBERS,XBOOLE_0,SETFAM_1,SCMFSA7B,FUNCSDOM,AMI_3,AMI_1,FSM_1,STRUCT_0,AMI_2,FUNCT_1,TARSKI,RELAT_1,AMISTD_2,ARYTM_3,FUNCT_4,CIRCUIT2,CARD_1,GRAPHSP,ARYTM_1,SUPINF_2,FUNCOP_1,ZFMISC_1,PARTFUN1,SCMNORM,RELOC,NAT_1,AMISTD_5,COMPOS_1,PBOOLE,FINSET_1;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,DOMAIN_1,ORDINAL1,RELAT_1,FINSET_1,NUMBERS,FUNCT_1,PARTFUN1,STRUCT_0,ALGSTR_0,FUNCSDOM,FUNCOP_1,XCMPLX_0,NAT_1,FUNCT_4,FUNCT_7,NAT_D,VALUED_1,PBOOLE,MEMSTR_0,COMPOS_1,EXTPRO_1,AMI_2,AMI_3,SCMRING1,SCMRING2,SCMRING3,AMISTD_2,AMISTD_5,CKB8;
definitions FUNCT_1,EXTPRO_1,FUNCOP_1,AMI_3,AMI_2,AMISTD_1,AMISTD_2,NAT_1,COMPOS_1,AMISTD_5,STRUCT_0,MEMSTR_0;
theorems TARSKI,NAT_1,SCMRING2,AMI_3,FUNCT_4,FUNCT_1,ZFMISC_1,FUNCOP_1,SCMRING1,AMI_2,STRUCT_0,XBOOLE_0,XBOOLE_1,RELAT_1,GRFUNC_1,SCMRING3,AMISTD_2,PBOOLE,SUBSET_1,PARTFUN1,ORDINAL1,COMPOS_1,EXTPRO_1,AMISTD_5,MEMSTR_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes NAT_1;
registrations XBOOLE_0,SETFAM_1,RELAT_1,FUNCT_1,FUNCOP_1,XREAL_0,NAT_1,CARD_3,STRUCT_0,AMI_3,SCMRING2,AMISTD_2,SCMRING3,FINSET_1,ORDINAL1,RELSET_1,GRFUNC_1,FUNCT_2,VALUED_1,FUNCT_4,COMPOS_1,EXTPRO_1,AMISTD_5,AMI_5,PBOOLE,PRE_POLY,FUNCT_7,ZFMISC_1,SUBSET_1,MEMSTR_0,NUMBERS,INT_1,CARD_1,AMI_2,CKB7;
constructors XXREAL_0,REALSET2,AMI_3,AMISTD_2,SCMRING3,PRE_POLY,NAT_D,AMISTD_1,AMISTD_5,PBOOLE,INT_3,FUNCT_7,RELSET_1,MEMSTR_0,CKB8;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
registration
let R being non trivial  good Ring;
cluster ( SCM R ) ->  IC-recognized;
coherence
proof
(for q being non halt-free  finite (the Instructions of ( SCM R )) -valued ( NAT ) -defined Function holds (for p being q -autonomic (FinPartState of ( SCM R )) holds (( DataPart p ) <> ( {} ) implies ( IC ( SCM R ) ) in ( dom p ))))
proof
let q being non halt-free  finite (the Instructions of ( SCM R )) -valued ( NAT ) -defined Function;
let p being q -autonomic (FinPartState of ( SCM R ));
assume ( DataPart p ) <> ( {} );
then A1: ( dom ( DataPart p ) ) <> ( {} );
assume A2: (not ( IC ( SCM R ) ) in ( dom p ));
(not p is q -autonomic)
proof
set il = the (Element of ( ( NAT ) \ ( dom q ) ));
set d2 = the (Element of ( ( Data-Locations ( SCM ) ) \ ( dom p ) ));
set d1 = the (Element of ( dom ( DataPart p ) ));
A3: d1 in ( dom ( DataPart p ) ) by A1;
( DataPart p ) c= p by MEMSTR_0:12;
then A4: ( dom ( DataPart p ) ) c= ( dom p ) by RELAT_1:11;
( dom ( DataPart p ) ) c= (the carrier of ( SCM R )) by RELAT_1:def 18;
then reconsider d1 as (Element of ( SCM R )) by A3;
(not ( Data-Locations ( SCM ) ) c= ( dom p ));
then A5: ( ( Data-Locations ( SCM ) ) \ ( dom p ) ) <> ( {} ) by XBOOLE_1:37;
then d2 in ( Data-Locations ( SCM ) ) by XBOOLE_0:def 5;
then reconsider d2 as (Data-Location of R) by SCMRING2:1;
(not d2 in ( dom p )) by A5,XBOOLE_0:def 5;
then B8: ( dom p ) misses { d2 } by ZFMISC_1:50;
(not ( NAT ) c= ( dom q ));
then A7: ( ( NAT ) \ ( dom q ) ) <> ( {} ) by XBOOLE_1:37;
then reconsider il as (Element of ( NAT )) by XBOOLE_0:def 5;
A8: (not il in ( dom q )) by A7,XBOOLE_0:def 5;
( Data-Locations ( SCM R ) ) = ( Data-Locations ( SCM ) ) by SCMRING2:22;
then ( dom ( DataPart p ) ) c= ( Data-Locations ( SCM ) ) by RELAT_1:58;
then reconsider d1 as (Data-Location of R) by A3,SCMRING2:1;
A9: ( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) = ( ( dom ( d2 .--> ( 0. R ) ) ) \/ ( dom ( Start-At (il,( SCM R )) ) ) ) by FUNCT_4:def 1;
set p1 = ( p +* ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) );
set q1 = ( q +* ( il .--> ( d1 := d2 ) ) );
consider s1 being (State of ( SCM R )) such that A10: p1 c= s1 by PBOOLE:141;
consider S1 being (Instruction-Sequence of ( SCM R )) such that B13: q1 c= S1 by PBOOLE:145;
A11: ( dom p1 ) = ( ( dom p ) \/ ( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) ) by FUNCT_4:def 1;
A12: ( dom ( Start-At (il,( SCM R )) ) ) = { ( IC ( SCM R ) ) } by FUNCOP_1:13;
then A13: ( IC ( SCM R ) ) in ( dom ( Start-At (il,( SCM R )) ) ) by TARSKI:def 1;
then A14: ( IC ( SCM R ) ) in ( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) by A9,XBOOLE_0:def 3;
then ( IC ( SCM R ) ) in ( dom p1 ) by A11,XBOOLE_0:def 3;
then A15: ( IC s1 ) = ( p1 . ( IC ( SCM R ) ) ) by A10,GRFUNC_1:2
.= ( ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) . ( IC ( SCM R ) ) ) by A14,FUNCT_4:13
.= ( ( Start-At (il,( SCM R )) ) . ( IC ( SCM R ) ) ) by A13,FUNCT_4:13
.= il by FUNCOP_1:72;
A18: ( dom ( Start-At (il,( SCM R )) ) ) = { ( IC ( SCM R ) ) } by FUNCOP_1:13;
A20: d2 <> ( IC ( SCM R ) ) by SCMRING3:2;
then A21: (not d2 in ( dom ( Start-At (il,( SCM R )) ) )) by A12,TARSKI:def 1;
A22: (not d2 in ( dom ( Start-At (il,( SCM R )) ) )) by A20,A18,TARSKI:def 1;
( dom ( d2 .--> ( 0. R ) ) ) = { d2 } by FUNCOP_1:13;
then d2 in ( dom ( d2 .--> ( 0. R ) ) ) by TARSKI:def 1;
then A26: d2 in ( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) by A9,XBOOLE_0:def 3;
then d2 in ( dom p1 ) by A11,XBOOLE_0:def 3;
then A27: ( s1 . d2 ) = ( p1 . d2 ) by A10,GRFUNC_1:2
.= ( ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) . d2 ) by A26,FUNCT_4:13
.= ( ( d2 .--> ( 0. R ) ) . d2 ) by A21,FUNCT_4:11
.= ( 0. R ) by FUNCOP_1:72;
UU: ( dom ( il .--> ( d1 := d2 ) ) ) = { il } by FUNCOP_1:13;
then A30: il in ( dom ( il .--> ( d1 := d2 ) ) ) by TARSKI:def 1;
( dom q1 ) = ( ( dom q ) \/ ( dom ( il .--> ( d1 := d2 ) ) ) ) by FUNCT_4:def 1;
then il in ( dom q1 ) by A30,XBOOLE_0:def 3;
then A31: ( S1 . il ) = ( q1 . il ) by B13,GRFUNC_1:2
.= ( ( il .--> ( d1 := d2 ) ) . il ) by A30,FUNCT_4:13
.= ( d1 := d2 ) by FUNCOP_1:72;
A32: ( dom p ) c= (the carrier of ( SCM R )) by RELAT_1:def 18;
( dom ( Comput (S1,s1,1) ) ) = (the carrier of ( SCM R )) by PARTFUN1:def 2;
then A33: ( dom ( ( Comput (S1,s1,1) ) | ( dom p ) ) ) = ( dom p ) by A32,RELAT_1:62;
consider e being (Element of R) such that A34: e <> ( 0. R ) by STRUCT_0:def 18;
set p2 = ( p +* ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) );
set q2 = ( q +* ( il .--> ( d1 := d2 ) ) );
consider s2 being (State of ( SCM R )) such that A35: p2 c= s2 by PBOOLE:141;
consider S2 being (Instruction-Sequence of ( SCM R )) such that B16: q2 c= S2 by PBOOLE:145;
A36: ( dom ( Comput (S2,s2,1) ) ) = (the carrier of ( SCM R )) by PARTFUN1:def 2;
A37: ( dom ( ( Comput (S2,s2,1) ) | ( dom p ) ) ) = ( dom p ) by A32,A36,RELAT_1:62;
( dom p ) misses { ( IC ( SCM R ) ) } by A2,ZFMISC_1:50;
then X40: ( ( dom p ) /\ { ( IC ( SCM R ) ) } ) = ( {} ) by XBOOLE_0:def 7;
take P = S1;
take Q = S2;
( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) = ( ( dom ( d2 .--> ( 0. R ) ) ) \/ ( dom ( Start-At (il,( SCM R )) ) ) ) by FUNCT_4:def 1
.= ( ( dom ( d2 .--> ( 0. R ) ) ) \/ { ( IC ( SCM R ) ) } ) by FUNCOP_1:13
.= ( { d2 } \/ { ( IC ( SCM R ) ) } ) by FUNCOP_1:13;
then ( ( dom p ) /\ ( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) ) = ( ( ( dom p ) /\ { d2 } ) \/ ( {} ) ) by X40,XBOOLE_1:23
.= ( {} ) by B8,XBOOLE_0:def 7;
then ( dom p ) misses ( dom ( ( d2 .--> ( 0. R ) ) +* ( Start-At (il,( SCM R )) ) ) ) by XBOOLE_0:def 7;
then p c= p1 by FUNCT_4:32;
then A38: p c= s1 by A10,XBOOLE_1:1;
XX: ( dom q ) misses ( dom ( il .--> ( d1 := d2 ) ) ) by UU,A8,ZFMISC_1:50;
then q c= q1 by FUNCT_4:32;
hence q c= P by B13,XBOOLE_1:1;
( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) = ( ( dom ( d2 .--> e ) ) \/ ( dom ( Start-At (il,( SCM R )) ) ) ) by FUNCT_4:def 1
.= ( ( dom ( d2 .--> e ) ) \/ { ( IC ( SCM R ) ) } ) by FUNCOP_1:13
.= ( { d2 } \/ { ( IC ( SCM R ) ) } ) by FUNCOP_1:13;
then ( ( dom p ) /\ ( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) ) = ( ( ( dom p ) /\ { d2 } ) \/ ( {} ) ) by X40,XBOOLE_1:23
.= ( {} ) by B8,XBOOLE_0:def 7;
then ( dom p ) misses ( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) by XBOOLE_0:def 7;
then p c= p2 by FUNCT_4:32;
then A39: p c= s2 by A35,XBOOLE_1:1;
q c= q2 by XX,FUNCT_4:32;
hence q c= Q by B16,XBOOLE_1:1;
take s1;
take s2;
thus p c= s1 by A38;
thus p c= s2 by A39;
take 1;
A40: ( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) = ( ( dom ( d2 .--> e ) ) \/ ( dom ( Start-At (il,( SCM R )) ) ) ) by FUNCT_4:def 1;
A41: ( dom ( d2 .--> e ) ) = { d2 } by FUNCOP_1:13;
A43: ( dom p2 ) = ( ( dom p ) \/ ( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) ) by FUNCT_4:def 1;
A44: ( IC ( SCM R ) ) in ( dom ( Start-At (il,( SCM R )) ) ) by A18,TARSKI:def 1;
then A45: ( IC ( SCM R ) ) in ( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) by A40,XBOOLE_0:def 3;
then ( IC ( SCM R ) ) in ( dom p2 ) by A43,XBOOLE_0:def 3;
then A46: ( IC s2 ) = ( p2 . ( IC ( SCM R ) ) ) by A35,GRFUNC_1:2
.= ( ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) . ( IC ( SCM R ) ) ) by A45,FUNCT_4:13
.= ( ( Start-At (il,( SCM R )) ) . ( IC ( SCM R ) ) ) by A44,FUNCT_4:13
.= il by FUNCOP_1:72;
( dom ( il .--> ( d1 := d2 ) ) ) = { il } by FUNCOP_1:13;
then A48: il in ( dom ( il .--> ( d1 := d2 ) ) ) by TARSKI:def 1;
( dom q1 ) = ( ( dom q ) \/ ( dom ( il .--> ( d1 := d2 ) ) ) ) by FUNCT_4:def 1;
then il in ( dom q2 ) by A48,XBOOLE_0:def 3;
then A49: ( S2 . il ) = ( q2 . il ) by B16,GRFUNC_1:2
.= ( ( il .--> ( d1 := d2 ) ) . il ) by A48,FUNCT_4:13
.= ( d1 := d2 ) by FUNCOP_1:72;
d2 in ( dom ( d2 .--> e ) ) by A41,TARSKI:def 1;
then A51: d2 in ( dom ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) ) by A40,XBOOLE_0:def 3;
then d2 in ( dom p2 ) by A43,XBOOLE_0:def 3;
then A52: ( s2 . d2 ) = ( p2 . d2 ) by A35,GRFUNC_1:2
.= ( ( ( d2 .--> e ) +* ( Start-At (il,( SCM R )) ) ) . d2 ) by A51,FUNCT_4:13
.= ( ( d2 .--> e ) . d2 ) by A22,FUNCT_4:11
.= e by FUNCOP_1:72;
A53: ( S2 /. il ) = ( S2 . il ) by PBOOLE:143;
A54: ( ( Comput (S2,s2,( ( 0 ) + 1 )) ) . d1 ) = ( ( Following (S2,( Comput (S2,s2,( 0 )) )) ) . d1 ) by EXTPRO_1:3
.= ( ( Following (S2,s2) ) . d1 ) by EXTPRO_1:2
.= e by A46,A49,A52,A53,SCMRING2:11;
A55: ( S1 /. il ) = ( S1 . il ) by PBOOLE:143;
( ( Comput (S1,s1,( ( 0 ) + 1 )) ) . d1 ) = ( ( Following (S1,( Comput (S1,s1,( 0 )) )) ) . d1 ) by EXTPRO_1:3
.= ( ( Following (S1,s1) ) . d1 ) by EXTPRO_1:2
.= ( 0. R ) by A15,A31,A27,A55,SCMRING2:11;
then ( ( ( Comput (P,s1,1) ) | ( dom p ) ) . d1 ) = ( 0. R ) by A33,A3,A4,FUNCT_1:47;
hence ( ( Comput (P,s1,1) ) | ( dom p ) ) <> ( ( Comput (Q,s2,1) ) | ( dom p ) ) by A34,A3,A37,A4,A54,FUNCT_1:47;
end;
hence contradiction;
end;
hence thesis by AMISTD_5:3;
end;
end;
