environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,AFINSQ_1,SUBSET_1,TARSKI,CARD_1,FUNCT_1,RELAT_1,ORDINAL1,FINSEQ_1,XXREAL_0,ARYTM_3,ARYTM_1,FUNCOP_1,ORDINAL4,REAL_1,INT_1,CARD_3,PARTFUN1,RVSUM_1,FINSEQ_2,PRGCOR_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,RELAT_1,FUNCT_1,ORDINAL1,ORDINAL4,REAL_1,NAT_1,PARTFUN1,FINSEQ_1,FUNCOP_1,SEQ_1,AFINSQ_1,INT_1,RVSUM_1,NAT_D,FINSEQ_2,XXREAL_0,CKB1,CKB3;
definitions TARSKI,CKB1,CKB3;
theorems FUNCT_1,NAT_1,RELAT_1,ORDINAL1,FINSEQ_1,FUNCOP_1,AFINSQ_1,RVSUM_1,FINSEQ_4,FINSEQ_2,XREAL_1,XXREAL_0,PARTFUN1,VALUED_1,XREAL_0,FINSEQ_5,CARD_1,CKB1,CKB2,CKB3,CKB4;
schemes NAT_1,AFINSQ_1;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,AFINSQ_1,XBOOLE_0,VALUED_0,FINSEQ_2,CARD_1;
constructors XXREAL_0,REAL_1,NAT_1,PARTFUN1,NAT_D,AFINSQ_1,SEQ_1,BINOP_2,INT_1,VALUED_1,RVSUM_1,RELSET_1,ORDINAL4,FUNCOP_1,FUNCT_7,CKB1,CKB3;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve k for Nat;
reserve i for Nat;
definition
let a being (XFinSequence of ( REAL ));
let b being (XFinSequence of ( REAL ));
assume that
A1: ( b . ( 0 ) ) is Nat
and
A2: ( b . ( 0 ) ) < ( len a );
func inner_prd_prg (a,b) -> Real means 
:Def7: (ex s being (XFinSequence of ( REAL )) st (ex n being Integer st ((((( len s ) = ( len a ) & ( s . ( 0 ) ) = ( 0 )) & n = ( b . ( 0 ) )) & (n <> ( 0 ) implies (for i being Nat holds (i < n implies ( s . ( i + 1 ) ) = ( ( s . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))) & it = ( s . n ))));
existence
proof
reconsider q0 = <% ( 0 ) %> as (XFinSequence of ( REAL ));
set n2 = ( len a );
reconsider nn2 = ( b . ( 0 ) ) as Nat by A1;
reconsider nn = nn2 as Integer;
defpred P[  natural number ]
 means
(ex q being (XFinSequence of ( REAL )) st ((( len q ) = ( $1 + 1 ) & ( q . ( 0 ) ) = ( 0 )) & (for k holds ((k < $1 & k < nn2) implies ( q . ( k + 1 ) ) = ( ( q . k ) + ( ( a . ( k + 1 ) ) * ( b . ( k + 1 ) ) ) )))));
A3: (for k holds ((k < ( 0 ) & k < nn2) implies ( q0 . ( k + 1 ) ) = ( ( q0 . k ) + ( ( a . ( k + 1 ) ) * ( b . ( k + 1 ) ) ) )));
A4: (for k being  natural number holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being  natural number;
reconsider k0 = k as Nat;
assume P[ k ];
then consider q2 being (XFinSequence of ( REAL )) such that A5: ( len q2 ) = ( k + 1 ) and A6: ( q2 . ( 0 ) ) = ( 0 ) and A7: (for k2 being Nat holds ((k2 < k & k2 < nn2) implies ( q2 . ( k2 + 1 ) ) = ( ( q2 . k2 ) + ( ( a . ( k2 + 1 ) ) * ( b . ( k2 + 1 ) ) ) )));
reconsider qab = ( ( q2 . k0 ) + ( ( a . ( k0 + 1 ) ) * ( b . ( k0 + 1 ) ) ) ) as Real;
set q3 = ( q2 ^ <% qab %> );
( 0 ) in ( len q2 ) by A5,NAT_1:44;
then A8: ( q3 . ( 0 ) ) = ( 0 ) by A6,AFINSQ_1:def 3;
A9: (for k2 being Nat holds ((k2 < ( k + 1 ) & k2 < nn2) implies ( q3 . ( k2 + 1 ) ) = ( ( q3 . k2 ) + ( ( a . ( k2 + 1 ) ) * ( b . ( k2 + 1 ) ) ) )))
proof
let k2 being Nat;
assume that
A10: k2 < ( k + 1 )
and
A11: k2 < nn2;
A12: k2 <= k by A10,NAT_1:13;
now
per cases  by A12,XXREAL_0:1;
case A13: k2 < k;
then k2 < ( len q2 ) by A5,NAT_1:13;
then k2 in ( dom q2 ) by NAT_1:44;
then A14: ( q3 . k2 ) = ( q2 . k2 ) by AFINSQ_1:def 3;
( k2 + 1 ) < ( k + 1 ) by A13,XREAL_1:6;
then ( k2 + 1 ) in ( len q2 ) by A5,NAT_1:44;
then ( q3 . ( k2 + 1 ) ) = ( q2 . ( k2 + 1 ) ) by AFINSQ_1:def 3;
hence thesis by A7,A11,A13,A14;
end;
case A15: k2 = k;
( 0 ) in 1 by NAT_1:44;
then (( <% ( ( q2 . k0 ) + ( ( a . ( k0 + 1 ) ) * ( b . ( k0 + 1 ) ) ) ) %> . ( 0 ) ) = ( ( q2 . k0 ) + ( ( a . ( k0 + 1 ) ) * ( b . ( k0 + 1 ) ) ) ) & ( 0 ) in ( dom <% ( ( q2 . k0 ) + ( ( a . ( k0 + 1 ) ) * ( b . ( k0 + 1 ) ) ) ) %> )) by AFINSQ_1:def 4;
then A16: ( q3 . ( ( k2 + 1 ) + ( 0 ) ) ) = ( ( q2 . k0 ) + ( ( a . ( k0 + 1 ) ) * ( b . ( k0 + 1 ) ) ) ) by A5,A15,AFINSQ_1:def 3;
k2 < ( k2 + 1 ) by NAT_1:13;
then k2 in ( dom q2 ) by A5,A15,NAT_1:44;
hence thesis by A15,A16,AFINSQ_1:def 3;
end;
end;
hence thesis;
end;
( len q3 ) = ( ( len q2 ) + ( len <% ( ( q2 . k0 ) + ( ( a . ( k0 + 1 ) ) * ( b . ( k0 + 1 ) ) ) ) %> ) ) by AFINSQ_1:17
.= ( ( k + 1 ) + 1 ) by A5,AFINSQ_1:33;
hence thesis by A8,A9;
end;
(( len q0 ) = 1 & ( q0 . ( 0 ) ) = ( 0 )) by AFINSQ_1:def 4;
then A17: P[ ( 0 ) ] by A3;
(for k being  natural number holds P[ k ]) from NAT_1:sch 2(A17,A4);
then consider q being (XFinSequence of ( REAL )) such that A18: (( len q ) = ( ( n2 -' 1 ) + 1 ) & ( q . ( 0 ) ) = ( 0 )) and A19: (for k3 being Nat holds ((k3 < ( n2 -' 1 ) & k3 < nn2) implies ( q . ( k3 + 1 ) ) = ( ( q . k3 ) + ( ( a . ( k3 + 1 ) ) * ( b . ( k3 + 1 ) ) ) )));
reconsider ss2 = ( q . nn2 ) as Real;
n2 >= ( ( 0 ) + 1 ) by A1,A2,NAT_1:13;
then ( n2 - 1 ) >= ( 0 ) by XREAL_1:48;
then A20: ( n2 -' 1 ) = ( n2 - 1 ) by XREAL_0:def 2;
(nn <> ( 0 ) implies (for i being Nat holds (i < nn implies ( q . ( i + 1 ) ) = ( ( q . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))
proof
assume nn <> ( 0 );
thus (for i being Nat holds (i < nn implies ( q . ( i + 1 ) ) = ( ( q . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) )))
proof
let i being Nat;
assume A21: i < nn;
( nn + 1 ) <= n2 by A2,NAT_1:13;
then ( ( nn + 1 ) - 1 ) <= ( n2 - 1 ) by XREAL_1:9;
then i < ( n2 -' 1 ) by A20,A21,XXREAL_0:2;
hence thesis by A19,A21;
end;

end;
then (ex s being (XFinSequence of ( REAL )) st (ex n being Integer st ((((( len s ) = ( len a ) & ( s . ( 0 ) ) = ( 0 )) & n = ( b . ( 0 ) )) & (n <> ( 0 ) implies (for i being Nat holds (i < n implies ( s . ( i + 1 ) ) = ( ( s . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))) & ss2 = ( s . n )))) by A18,A20;
hence thesis;
end;
uniqueness
proof
thus (for w1,w2 being Real holds (((ex s being (XFinSequence of ( REAL )) st (ex n1 being Integer st ((((( len s ) = ( len a ) & ( s . ( 0 ) ) = ( 0 )) & n1 = ( b . ( 0 ) )) & (n1 <> ( 0 ) implies (for i being Nat holds (i < n1 implies ( s . ( i + 1 ) ) = ( ( s . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))) & w1 = ( s . n1 )))) & (ex s being (XFinSequence of ( REAL )) st (ex n2 being Integer st ((((( len s ) = ( len a ) & ( s . ( 0 ) ) = ( 0 )) & n2 = ( b . ( 0 ) )) & (n2 <> ( 0 ) implies (for i being Nat holds (i < n2 implies ( s . ( i + 1 ) ) = ( ( s . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))) & w2 = ( s . n2 ))))) implies w1 = w2))
proof
let w1 being Real;
let w2 being Real;
assume that
A22: (ex s being (XFinSequence of ( REAL )) st (ex n1 being Integer st ((((( len s ) = ( len a ) & ( s . ( 0 ) ) = ( 0 )) & n1 = ( b . ( 0 ) )) & (n1 <> ( 0 ) implies (for i being Nat holds (i < n1 implies ( s . ( i + 1 ) ) = ( ( s . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))) & w1 = ( s . n1 ))))
and
A23: (ex s being (XFinSequence of ( REAL )) st (ex n2 being Integer st ((((( len s ) = ( len a ) & ( s . ( 0 ) ) = ( 0 )) & n2 = ( b . ( 0 ) )) & (n2 <> ( 0 ) implies (for i being Nat holds (i < n2 implies ( s . ( i + 1 ) ) = ( ( s . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) ))))) & w2 = ( s . n2 ))));
consider s1 being (XFinSequence of ( REAL )),n1 being Integer such that ( len s1 ) = ( len a ) and A24: ( s1 . ( 0 ) ) = ( 0 ) and A25: n1 = ( b . ( 0 ) ) and A26: (n1 <> ( 0 ) implies (for i being Nat holds (i < n1 implies ( s1 . ( i + 1 ) ) = ( ( s1 . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) )))) and A27: w1 = ( s1 . n1 ) by A22;
consider s2 being (XFinSequence of ( REAL )),n2 being Integer such that ( len s2 ) = ( len a ) and A28: ( s2 . ( 0 ) ) = ( 0 ) and A29: n2 = ( b . ( 0 ) ) and A30: (n2 <> ( 0 ) implies (for i being Nat holds (i < n2 implies ( s2 . ( i + 1 ) ) = ( ( s2 . i ) + ( ( a . ( i + 1 ) ) * ( b . ( i + 1 ) ) ) )))) and A31: w2 = ( s2 . n2 ) by A23;
reconsider n = n1 as Nat by A1,A25;
defpred P2[ Nat ]
 means
($1 <= n implies ( s1 . $1 ) = ( s2 . $1 ));
A32: (for k being Nat holds (P2[ k ] implies P2[ ( k + 1 ) ]))
proof
let k being Nat;
assume A33: P2[ k ];
now
assume ( k + 1 ) <= n;
then A34: k < n by NAT_1:13;
then ( s1 . ( k + 1 ) ) = ( ( s1 . k ) + ( ( a . ( k + 1 ) ) * ( b . ( k + 1 ) ) ) ) by A26;
hence ( s1 . ( k + 1 ) ) = ( s2 . ( k + 1 ) ) by A25,A29,A30,A33,A34;
end;
hence thesis;
end;
A35: P2[ ( 0 ) ] by A24,A28;
(for k being Nat holds P2[ k ]) from NAT_1:sch 2(A35,A32);
hence thesis by A25,A27,A29,A31;
end;

end;
end;
