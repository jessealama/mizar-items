environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,AFINSQ_1,SUBSET_1,TARSKI,CARD_1,FUNCT_1,RELAT_1,ORDINAL1,FINSEQ_1,XXREAL_0,ARYTM_3,ARYTM_1,FUNCOP_1,ORDINAL4,REAL_1,INT_1,CARD_3,PARTFUN1,RVSUM_1,FINSEQ_2,PRGCOR_2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,RELAT_1,FUNCT_1,ORDINAL1,ORDINAL4,REAL_1,NAT_1,PARTFUN1,FINSEQ_1,FUNCOP_1,SEQ_1,AFINSQ_1,INT_1,RVSUM_1,NAT_D,FINSEQ_2,XXREAL_0,CKB1,CKB3;
definitions TARSKI,CKB1,CKB3;
theorems FUNCT_1,NAT_1,RELAT_1,ORDINAL1,FINSEQ_1,FUNCOP_1,AFINSQ_1,RVSUM_1,FINSEQ_4,FINSEQ_2,XREAL_1,XXREAL_0,PARTFUN1,VALUED_1,XREAL_0,FINSEQ_5,CARD_1,CKB1,CKB2,CKB3;
schemes NAT_1,AFINSQ_1;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,AFINSQ_1,XBOOLE_0,VALUED_0,FINSEQ_2,CARD_1;
constructors XXREAL_0,REAL_1,NAT_1,PARTFUN1,NAT_D,AFINSQ_1,SEQ_1,BINOP_2,INT_1,VALUED_1,RVSUM_1,RELSET_1,ORDINAL4,FUNCOP_1,FUNCT_7,CKB1,CKB3;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve i for Nat;
reserve D for non empty set;
theorem
Th7: (for q being (FinSequence of D) holds (for n being Nat holds ((( NAT ) c= D & n > ( len q )) implies (ex p being (XFinSequence of D) st (( len p ) = n & p is_an_xrep_of q)))))
proof
let q being (FinSequence of D);
let n being Nat;
assume that
A1: ( NAT ) c= D
and
A2: n > ( len q );
reconsider n as (Element of ( NAT )) by ORDINAL1:def 12;
( len q ) in ( NAT );
then consider d2 being set such that A3: d2 in D and A4: d2 = ( len q ) by A1;
reconsider d = d2 as (Element of D) by A3;
deffunc F(set) = ( IFEQ ($1,( 0 ),d,( IFLGT ($1,( len q ),( q . $1 ),( q . $1 ),d) )) );
(ex p being XFinSequence st (( len p ) = n & (for k being Nat holds (k in n implies ( p . k ) = F(k))))) from AFINSQ_1:sch 2;
then consider p being XFinSequence such that A5: ( len p ) = n and A6: (for k being Nat holds (k in n implies ( p . k ) = F(k)));
( rng p ) c= D
proof
let y being set;
assume y in ( rng p );
then consider x being set such that A7: x in ( dom p ) and A8: y = ( p . x ) by FUNCT_1:def 3;
reconsider nx = x as Ordinal by A7;
reconsider kx = nx as (Element of ( NAT )) by A7;
A9: ( p . kx ) = F(kx) by A5,A6,A7;
now
per cases ;
case x = ( 0 );
then F(x) = d by FUNCOP_1:def 8;
hence ( p . x ) in D by A9;
end;
case A10: x <> ( 0 );
then A11: F(x) = ( IFLGT (x,( len q ),( q . x ),( q . x ),d) ) by FUNCOP_1:def 8;
now
per cases ;
case A12: x in ( len q );
then A13: kx < ( len q ) by NAT_1:44;
( ( 0 ) + 1 ) <= kx by A10,NAT_1:13;
then kx in ( Seg ( len q ) ) by A13,FINSEQ_1:1;
then x in ( dom q ) by FINSEQ_1:def 3;
then A14: ( q . x ) in ( rng q ) by FUNCT_1:def 3;
A15: ( rng q ) c= D by FINSEQ_1:def 4;
F(x) = ( q . x ) by A11,A12,CKB3:def 1;
hence ( p . x ) in D by A9,A14,A15;
end;
case A16: x = ( len q );
( ( 0 ) + 1 ) <= kx by A10,NAT_1:13;
then kx in ( Seg ( len q ) ) by A16,FINSEQ_1:1;
then x in ( dom q ) by FINSEQ_1:def 3;
then A17: ( q . x ) in ( rng q ) by FUNCT_1:def 3;
A18: ( rng q ) c= D by FINSEQ_1:def 4;
F(x) = ( q . x ) by A11,A16,CKB3:def 1;
hence ( p . x ) in D by A9,A17,A18;
end;
case (not (x in ( len q ) or x = ( len q )));
then F(x) = d by A11,CKB3:def 1;
hence ( p . x ) in D by A9;
end;
end;
hence ( p . x ) in D;
end;
end;
hence thesis by A8;
end;
then reconsider p as (XFinSequence of D) by RELAT_1:def 19;
reconsider p2 = ( Replace (p,( 0 ),d) ) as (XFinSequence of D);
A19: (for i holds ((1 <= i & i <= ( len q )) implies ( p2 . i ) = ( q . i )))
proof
let i;
assume that
A20: 1 <= i
and
A21: i <= ( len q );
(i < ( len q ) or i = ( len q )) by A21,XXREAL_0:1;
then A22: (i in ( len q ) or i = ( len q )) by NAT_1:44;
i < n by A2,A21,XXREAL_0:2;
then A23: i in n by NAT_1:44;
i in ( NAT ) by ORDINAL1:def 12;
hence ( p2 . i ) = ( p . i ) by A20,AFINSQ_1:44
.= F(i) by A6,A23
.= ( IFLGT (i,( len q ),( q . i ),( q . i ),d) ) by A20,FUNCOP_1:def 8
.= ( q . i ) by A22,CKB3:def 1;
end;
A24: ( len p2 ) = ( len p ) by AFINSQ_1:44;
( p2 . ( 0 ) ) = ( len q ) by A2,A4,A5,AFINSQ_1:44;
then p2 is_an_xrep_of q by A1,A2,A5,A24,A19,CKB1:def 1;
hence thesis by A5,A24;
end;
