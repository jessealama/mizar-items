environ
vocabularies NUMBERS,NAT_1,VECTSP_1,FINSUB_1,TARSKI,XBOOLE_0,SUBSET_1,MATRIX_2,FINSEQ_2,FINSET_1,FINSEQ_1,FUNCT_1,RELAT_1,FINSEQ_5,FUNCT_2,CARD_1,MATRIX_1,STRUCT_0,ALGSTR_0,SETWISEO,MATRIX_3,CALCUL_2,XXREAL_0,SUPINF_2,FUNCOP_1,BINOP_1,ARYTM_3,ORDINAL4,TREES_1,ZFMISC_1,ARYTM_1,CARD_3,ABIAN,INT_1,PARTFUN1,GROUP_1,MATRIX_9;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,NAT_D,ENUMSET1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,FUNCOP_1,FINSEQ_2,BINOP_1,STRUCT_0,ALGSTR_0,GROUP_1,VECTSP_1,SETWISEO,GROUP_4,SETWOP_2,FINSUB_1,MATRIX_1,FINSEQ_4,FINSEQ_5,MATRIX_2,MATRIX_3,XXREAL_0,CKB13,CKB14;
definitions FINSEQ_2,FINSEQ_1,ALGSTR_0,CKB13,CKB14;
theorems FINSEQ_1,FINSEQ_2,TARSKI,FUNCT_2,NAT_1,BINOP_1,FUNCT_1,SETWISEO,VECTSP_1,ZFMISC_1,FVSUM_1,SETWOP_2,MATRIX_1,MATRIX_2,FUNCOP_1,FINSUB_1,FINSEQ_3,RLVECT_1,RELAT_1,FINSOP_1,XBOOLE_0,XBOOLE_1,MATRIX_3,FINSEQ_5,ENUMSET1,FINSEQ_6,GROUP_4,XREAL_1,MATRIX_7,XXREAL_0,ORDINAL1,NAT_D,PARTFUN1,CARD_1,CKB1,CKB4,CKB5,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64;
schemes FUNCT_2,FINSET_1,NAT_1,CKB3;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,PARTFUN1,FUNCT_2,FINSET_1,FINSUB_1,XXREAL_0,XREAL_0,FINSEQ_1,FINSEQ_5,FINSEQ_6,STRUCT_0,GROUP_1,VECTSP_1,MATRIX_2,FVSUM_1,RELSET_1,FINSEQ_2,CARD_1,CKB2,CKB6,CKB7,CKB20,CKB21;
constructors RELAT_2,BINOP_1,SETWISEO,XXREAL_0,NAT_1,NAT_D,FINSEQ_4,FINSOP_1,FINSEQ_5,ALGSTR_1,GROUP_4,MATRIX_7,RELSET_1,CKB13,CKB14;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Th41: (for l being (FinSequence of ( Group_of_Perm 3 )) holds ((( ( len l ) mod 2 ) = ( 0 ) & (for i being (Element of ( NAT )) holds (i in ( dom l ) implies (ex q being (Element of ( Permutations 3 )) st (( l . i ) = q & q is  being_transposition))))) implies ((( Product l ) = <* 1,2,3 *> or ( Product l ) = <* 2,3,1 *>) or ( Product l ) = <* 3,1,2 *>)))
proof
defpred P[ Nat ]
 means
(for f being (FinSequence of ( Group_of_Perm 3 )) holds ((( len f ) = ( 2 * $1 ) & (for i being (Element of ( NAT )) holds (i in ( dom f ) implies (ex q being (Element of ( Permutations 3 )) st (( f . i ) = q & q is  being_transposition))))) implies ((( Product f ) = <* 1,2,3 *> or ( Product f ) = <* 2,3,1 *>) or ( Product f ) = <* 3,1,2 *>)));
let l being (FinSequence of ( Group_of_Perm 3 ));
assume that
A1: ( ( len l ) mod 2 ) = ( 0 )
and
A2: (for i being (Element of ( NAT )) holds (i in ( dom l ) implies (ex q being (Element of ( Permutations 3 )) st (( l . i ) = q & q is  being_transposition))));
A3: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume A4: P[ k ];
let f being (FinSequence of ( Group_of_Perm 3 ));
assume that
A5: ( len f ) = ( 2 * ( k + 1 ) )
and
A6: (for i being (Element of ( NAT )) holds (i in ( dom f ) implies (ex q being (Element of ( Permutations 3 )) st (( f . i ) = q & q is  being_transposition))));
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
set l = ( 2 * k );
A7: 1 <= ( l + 1 ) by NAT_1:11;
( rng ( f | ( Seg ( 2 * k ) ) ) ) c= (the carrier of ( Group_of_Perm 3 )) by RELAT_1:def 19;
then reconsider g = ( f | ( Seg ( 2 * k ) ) ) as (FinSequence of ( Group_of_Perm 3 )) by FINSEQ_1:def 4;
A8: l <= ( l + 1 ) by NAT_1:11;
A9: ( ( f | ( Seg ( l + 1 ) ) ) | ( Seg l ) ) = ( ( f | ( l + 1 ) ) | l )
.= ( f | l ) by A8,FINSEQ_5:77
.= ( f | ( Seg l ) );
A10: ( dom g ) c= ( dom f ) by RELAT_1:60;
A11: (for i being (Element of ( NAT )) holds (i in ( dom g ) implies (ex q being (Element of ( Permutations 3 )) st (( g . i ) = q & q is  being_transposition))))
proof
let i being (Element of ( NAT ));
assume A12: i in ( dom g );
then consider q being (Element of ( Permutations 3 )) such that A13: (( f . i ) = q & q is  being_transposition) by A6,A10;
take q;
thus thesis by A12,A13,FUNCT_1:47;
end;
set h = ( f | ( Seg ( l + 1 ) ) );
( len f ) = ( ( l + 1 ) + 1 ) by A5;
then ( len h ) = ( l + 1 ) by FINSEQ_3:53;
then A14: h = ( ( h | ( Seg l ) ) ^ <* ( h . ( l + 1 ) ) *> ) by FINSEQ_3:55;
A15: ( dom f ) = ( Seg ( 2 * ( k + 1 ) ) ) by A5,FINSEQ_1:def 3;
( l + 1 ) <= ( l + 2 ) by XREAL_1:6;
then 1 <= ( l + 2 ) by A7,XXREAL_0:2;
then A16: ( l + 2 ) in ( dom f ) by A15;
then consider q1 being (Element of ( Permutations 3 )) such that A17: ( f . ( l + 2 ) ) = q1 and A18: q1 is  being_transposition by A6;
A19: ( f . ( ( l + 1 ) + 1 ) ) = ( f /. ( l + 2 ) ) by A16,PARTFUN1:def 6;
( l + 1 ) <= ( l + 2 ) by XREAL_1:6;
then A20: ( l + 1 ) in ( dom f ) by A15,A7;
then consider q2 being (Element of ( Permutations 3 )) such that A21: ( f . ( l + 1 ) ) = q2 and A22: q2 is  being_transposition by A6;
reconsider q12 = ( q1 * q2 ) as (Element of ( Permutations 3 )) by CKB58:1;
( h . ( l + 1 ) ) = ( f . ( l + 1 ) ) by FINSEQ_1:4,FUNCT_1:49;
then A23: ( h . ( l + 1 ) ) = ( f /. ( l + 1 ) ) by A20,PARTFUN1:def 6;
f = ( ( f | ( Seg ( l + 1 ) ) ) ^ <* ( f . ( ( l + 1 ) + 1 ) ) *> ) by A5,FINSEQ_3:55;
then f = ( g ^ ( <* ( f /. ( l + 1 ) ) *> ^ <* ( f /. ( l + 2 ) ) *> ) ) by A14,A9,A23,A19,FINSEQ_1:32;
then A24: ( Product f ) = ( ( Product g ) * ( Product ( <* ( f /. ( l + 1 ) ) *> ^ <* ( f /. ( l + 2 ) ) *> ) ) ) by GROUP_4:5
.= ( ( Product g ) * ( ( Product <* ( f /. ( l + 1 ) ) *> ) * ( f /. ( l + 2 ) ) ) ) by GROUP_4:6
.= ( ( Product g ) * ( ( f /. ( l + 1 ) ) * ( f /. ( l + 2 ) ) ) ) by GROUP_4:9;
reconsider Pg = ( Product g ) as (Element of ( Permutations 3 )) by MATRIX_2:def 10;
( Product g ) in (the carrier of ( Group_of_Perm 3 ));
then ( Product g ) in ( Permutations 3 ) by MATRIX_2:def 10;
then A25: ( Product g ) is (Permutation of ( Seg 3 )) by MATRIX_2:def 9;
A26: ( len ( Permutations 3 ) ) = 3 by MATRIX_2:18;
then A27: ((q1 = <* 2,1,3 *> or q1 = <* 1,3,2 *>) or q1 = <* 3,2,1 *>) by A18,CKB57:1;
A28: q1 = ( f /. ( l + 2 ) ) by A16,A17,PARTFUN1:def 6;
( q1 * q2 ) in ( Permutations 3 ) by CKB58:1;
then A29: ( q1 * q2 ) is (Permutation of ( Seg 3 )) by MATRIX_2:def 9;
q2 = ( f /. ( l + 1 ) ) by A20,A21,PARTFUN1:def 6;
then A30: ( ( f /. ( l + 1 ) ) * ( f /. ( l + 2 ) ) ) = ( q1 * q2 ) by A28,MATRIX_7:9;
then A31: ( Product f ) = ( q12 * Pg ) by A24,MATRIX_7:9;
( 2 * k ) <= ( ( 2 * k ) + 2 ) by NAT_1:11;
then ( Seg ( 2 * k ) ) c= ( Seg ( 2 * ( k + 1 ) ) ) by FINSEQ_1:5;
then ( dom g ) = ( Seg ( 2 * k ) ) by A15,RELAT_1:62;
then A32: ( len g ) = ( 2 * k ) by FINSEQ_1:def 3;
then A33: ((( Product g ) = <* 1,2,3 *> or ( Product g ) = <* 2,3,1 *>) or ( Product g ) = <* 3,1,2 *>) by A4,A11;
((( Product f ) = <* 1,2,3 *> or ( Product f ) = <* 2,3,1 *>) or ( Product f ) = <* 3,1,2 *>)
proof
per cases  by A4,A32,A11,A22,A26,A27,CKB56:1,CKB57:1;
suppose (Pg = <* 1,2,3 *> & ( q1 * q2 ) = <* 2,3,1 *>);

hence thesis by A29,A31,CKB63:1;
end;
suppose (Pg = <* 2,3,1 *> & ( q1 * q2 ) = <* 2,3,1 *>);

hence thesis by A24,A30,CKB56:1,MATRIX_7:9;
end;
suppose (Pg = <* 2,3,1 *> & ( q1 * q2 ) = <* 3,1,2 *>);

hence thesis by A31,CKB56:1;
end;
suppose ( q1 * q2 ) = <* 1,2,3 *>;

hence thesis by A33,A25,A31,CKB64:1;
end;
suppose (Pg = <* 1,2,3 *> & ( q1 * q2 ) = <* 3,1,2 *>);

hence thesis by A29,A31,CKB63:1;
end;
suppose (Pg = <* 3,1,2 *> & ( q1 * q2 ) = <* 2,3,1 *>);

hence thesis by A31,CKB56:1;
end;
suppose (Pg = <* 3,1,2 *> & ( q1 * q2 ) = <* 3,1,2 *>);

hence thesis by A24,A30,CKB56:1,MATRIX_7:9;
end;
end;
hence thesis;
end;
A34: P[ ( 0 ) ]
proof
set G = ( Group_of_Perm 3 );
let f being (FinSequence of ( Group_of_Perm 3 ));
assume that
A35: ( len f ) = ( 2 * ( 0 ) )
and
(for i being (Element of ( NAT )) holds (i in ( dom f ) implies (ex q being (Element of ( Permutations 3 )) st (( f . i ) = q & q is  being_transposition))));
A36: ( 1_ G ) = <* 1,2,3 *> by FINSEQ_2:53,MATRIX_2:24;
f = ( <*> (the carrier of G) ) by A35;
hence thesis by A36,GROUP_4:8;
end;
A37: (for s being Nat holds P[ s ]) from NAT_1:sch 2(A34,A3);
(ex t being Nat st (( len l ) = ( ( 2 * t ) + ( 0 ) ) & ( 0 ) < 2)) by A1,NAT_D:def 2;
hence thesis by A2,A37;
end;
