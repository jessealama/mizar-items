environ
vocabularies FUNCT_1,PBOOLE,RELAT_1,FUNCOP_1,CARD_3,TARSKI,FUNCT_6,MEMBER_1,XBOOLE_0,FINSEQ_1,MSUALG_1,STRUCT_0,PROB_2,MSAFREE,ZFMISC_1,CARD_1,FINSEQ_2,MCART_1,SUBSET_1,ORDINAL4,MSUALG_6,CAT_5,INSTALG1,NUMBERS,MARGREL1,CAT_1,PUA2MSS1,GRAPH_1,PARTFUN1,MSUALG_3,CATALG_1;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,MCART_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,MSAFREE1,FINSEQ_1,FINSEQ_2,CARD_3,FINSEQ_4,FUNCT_6,STRUCT_0,PBOOLE,MSUALG_1,MSUALG_3,MSAFREE,PUA2MSS1,MSUALG_6,INSTALG1,GRAPH_1,CAT_1,XXREAL_0,CKB1,CKB5,CKB10,CKB13,CKB14,CKB17,CKB18,CKB23,CKB24,CKB26,CKB40,CKB41,CKB42,CKB44,CKB45,CKB46,CKB56,CKB57;
definitions TARSKI,STRUCT_0,MSUALG_1,MSUALG_3,PUA2MSS1,MSUALG_6,INSTALG1,PROB_2,MSAFREE1,XBOOLE_0,FUNCOP_1,PBOOLE,CKB1,CKB5,CKB10,CKB14,CKB18,CKB24,CKB26,CKB40,CKB41,CKB42,CKB56,CKB57;
theorems TARSKI,ZFMISC_1,RELAT_1,FUNCT_1,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCT_3,MCART_1,ENUMSET1,FUNCT_6,FINSEQ_4,MONOID_1,CARD_3,PBOOLE,PRALG_2,MSUALG_3,INSTALG1,CAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,FUNCOP_1,PARTFUN1,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB10,CKB14,CKB18,CKB19,CKB24,CKB25,CKB26,CKB30,CKB31,CKB32,CKB33,CKB40,CKB41,CKB42,CKB43,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63;
schemes FUNCT_1,CLASSES1,PBOOLE,XBOOLE_0,CKB64;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,XREAL_0,FINSEQ_1,FINSEQ_2,STRUCT_0,MSUALG_1,RELSET_1,MSAFREE,INSTALG1,MSAFREE1,MSSUBFAM,PBOOLE,CARD_1,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB15,CKB16,CKB20,CKB21,CKB22,CKB27,CKB28,CKB29,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39;
constructors ENUMSET1,XXREAL_0,NAT_1,FINSEQ_4,MSSUBFAM,CAT_1,MSUALG_3,MSATERM,MSAFREE1,PUA2MSS1,MSUALG_6,INSTALG1,XREAL_0,RELSET_1,CKB1,CKB5,CKB10,CKB14,CKB18,CKB23,CKB24,CKB26,CKB40,CKB41,CKB42,CKB44,CKB45,CKB46,CKB56,CKB57;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
definition
let C being Category;
func MSAlg C ->  strict MSAlgebra over ( CatSign (the carrier of C) ) means 
:Def15: (((for a,b being (Object of C) holds ( (the Sorts of it) . ( homsym (a,b) ) ) = ( Hom (a,b) )) & (for a being (Object of C) holds ( ( Den (( idsym a ),it) ) . ( {} ) ) = ( id a ))) & (for a,b,c being (Object of C) holds (for f,g being (Morphism of C) holds ((((( dom f ) = a & ( cod f ) = b) & ( dom g ) = b) & ( cod g ) = c) implies ( ( Den (( compsym (a,b,c) ),it) ) . <* g,f *> ) = ( g * f )))));
uniqueness
proof
let A1 being  strict MSAlgebra over ( CatSign (the carrier of C) );
let A2 being  strict MSAlgebra over ( CatSign (the carrier of C) );
assume that
A1: (for a,b being (Object of C) holds ( (the Sorts of A1) . ( homsym (a,b) ) ) = ( Hom (a,b) ))
and
A2: (for a being (Object of C) holds ( ( Den (( idsym a ),A1) ) . ( {} ) ) = ( id a ))
and
A3: (for a,b,c being (Object of C) holds (for f,g being (Morphism of C) holds ((((( dom f ) = a & ( cod f ) = b) & ( dom g ) = b) & ( cod g ) = c) implies ( ( Den (( compsym (a,b,c) ),A1) ) . <* g,f *> ) = ( g * f ))))
and
A4: (for a,b being (Object of C) holds ( (the Sorts of A2) . ( homsym (a,b) ) ) = ( Hom (a,b) ))
and
A5: (for a being (Object of C) holds ( ( Den (( idsym a ),A2) ) . ( {} ) ) = ( id a ))
and
A6: (for a,b,c being (Object of C) holds (for f,g being (Morphism of C) holds ((((( dom f ) = a & ( cod f ) = b) & ( dom g ) = b) & ( cod g ) = c) implies ( ( Den (( compsym (a,b,c) ),A2) ) . <* g,f *> ) = ( g * f ))));
A7:now
let i being set;
assume i in (the carrier' of ( CatSign (the carrier of C) ));
then reconsider o = i as (OperSymbol of ( CatSign (the carrier of C) ));
per cases  by CKB51:1;
suppose ( o `1 ) = 1;

then consider a being (Object of C) such that A8: o = ( idsym a ) by CKB52:1;
A9: ( id a ) in ( Hom (a,a) ) by CAT_1:26;
A10: ( the_result_sort_of ( idsym a ) ) = ( homsym (a,a) ) by CKB10:def 1;
( (the Sorts of A1) . ( homsym (a,a) ) ) = ( Hom (a,a) ) by A1;
then ( Result (( idsym a ),A1) ) = ( Hom (a,a) ) by A10,PRALG_2:3;
then A11: ( dom ( Den (( idsym a ),A1) ) ) = ( Args (( idsym a ),A1) ) by A9,FUNCT_2:def 1;
A12:now
let x being set;
assume x in { ( {} ) };
then A13: x = ( {} ) by TARSKI:def 1;
then ( ( Den (( idsym a ),A1) ) . x ) = ( id a ) by A2;
hence ( ( Den (( idsym a ),A1) ) . x ) = ( ( Den (( idsym a ),A2) ) . x ) by A5,A13;
end;
( (the Sorts of A2) . ( homsym (a,a) ) ) = ( Hom (a,a) ) by A4;
then ( Result (( idsym a ),A2) ) = ( Hom (a,a) ) by A10,PRALG_2:3;
then A14: ( dom ( Den (( idsym a ),A2) ) ) = ( Args (( idsym a ),A2) ) by A9,FUNCT_2:def 1;
(( Args (( idsym a ),A1) ) = { ( {} ) } & ( Args (( idsym a ),A2) ) = { ( {} ) }) by CKB62:1;
hence ( (the Charact of A1) . i ) = ( (the Charact of A2) . i ) by A8,A11,A14,A12,FUNCT_1:2;
end;
suppose ( o `1 ) = 2;

then consider a,b,c being (Object of C) such that A15: o = ( compsym (a,b,c) ) by CKB53:1;
A16:now
assume ( product <* ( Hom (b,c) ),( Hom (a,b) ) *> ) <> ( {} );
then reconsider X = ( product <* ( Hom (b,c) ),( Hom (a,b) ) *> ) as non  empty set;
set x = the (Element of X);
consider g,f being set such that A17: g in ( Hom (b,c) ) and A18: f in ( Hom (a,b) ) and x = <* g,f *> by FINSEQ_3:124;
reconsider g,f as (Morphism of C) by A17,A18;
A19: (( cod f ) = b & ( dom g ) = b) by A17,A18,CAT_1:1;
( cod g ) = c by A17,CAT_1:1;
then A20: ( cod ( g * f ) ) = c by A19,CAT_1:17;
( dom f ) = a by A18,CAT_1:1;
then ( dom ( g * f ) ) = a by A19,CAT_1:17;
hence ( Hom (a,c) ) <> ( {} ) by A20,CAT_1:1;
end;
A21:now
let x being set;
assume x in ( product <* ( Hom (b,c) ),( Hom (a,b) ) *> );
then consider g,f being set such that A22: g in ( Hom (b,c) ) and A23: f in ( Hom (a,b) ) and A24: x = <* g,f *> by FINSEQ_3:124;
reconsider g,f as (Morphism of C) by A22,A23;
A25: (( dom g ) = b & ( cod g ) = c) by A22,CAT_1:1;
A26: (( dom f ) = a & ( cod f ) = b) by A23,CAT_1:1;
then ( ( Den (( compsym (a,b,c) ),A1) ) . x ) = ( g * f ) by A3,A24,A25;
hence ( ( Den (( compsym (a,b,c) ),A1) ) . x ) = ( ( Den (( compsym (a,b,c) ),A2) ) . x ) by A6,A24,A26,A25;
end;
A27: ( Args (( compsym (a,b,c) ),A1) ) = ( product <* ( Hom (b,c) ),( Hom (a,b) ) *> ) by A1,CKB63:1;
A28: ( Args (( compsym (a,b,c) ),A2) ) = ( product <* ( Hom (b,c) ),( Hom (a,b) ) *> ) by A4,CKB63:1;
( Result (( compsym (a,b,c) ),A2) ) = ( Hom (a,c) ) by A4,CKB63:1;
then A29: ( dom ( Den (( compsym (a,b,c) ),A2) ) ) = ( Args (( compsym (a,b,c) ),A2) ) by A28,A16,FUNCT_2:def 1;
( Result (( compsym (a,b,c) ),A1) ) = ( Hom (a,c) ) by A1,CKB63:1;
then ( dom ( Den (( compsym (a,b,c) ),A1) ) ) = ( Args (( compsym (a,b,c) ),A1) ) by A27,A16,FUNCT_2:def 1;
hence ( (the Charact of A1) . i ) = ( (the Charact of A2) . i ) by A15,A27,A28,A29,A21,FUNCT_1:2;
end;
end;
now
let i being set;
assume i in (the carrier of ( CatSign (the carrier of C) ));
then consider a,b being (Object of C) such that A30: i = ( homsym (a,b) ) by CKB50:1;
thus ( (the Sorts of A1) . i ) = ( Hom (a,b) ) by A1,A30
.= ( (the Sorts of A2) . i ) by A4,A30;
end;
then (the Sorts of A1) = (the Sorts of A2) by PBOOLE:3;
hence thesis by A7,PBOOLE:3;
end;
correctness
proof
deffunc I((Object of C)) = ( id $1 );
deffunc R((Object of C),(Object of C),(Object of C),(Morphism of C),(Morphism of C)) = ( $4 * $5 );
deffunc H((Object of C),(Object of C)) = ( Hom ($1,$2) );
A31: (for a being (Object of C) holds I(a) in H(a,a)) by CAT_1:26;
A32:now
let a being (Object of C);
let b being (Object of C);
let c being (Object of C);
let f being (Morphism of C);
let g being (Morphism of C);
assume that
A33: f in H(a,b)
and
A34: g in H(b,c);
A35: (( cod f ) = b & ( dom g ) = b) by A33,A34,CAT_1:1;
( cod g ) = c by A34,CAT_1:1;
then A36: ( cod ( g * f ) ) = c by A35,CAT_1:17;
( dom f ) = a by A33,CAT_1:1;
then ( dom ( g * f ) ) = a by A35,CAT_1:17;
hence R(a,b,c,g,f) in H(a,c) by A36,CAT_1:1;
end;
A37: (for a,b being (Object of C) holds H(a,b) c= (the carrier' of C));
consider A being  strict MSAlgebra over ( CatSign (the carrier of C) ) such that A38: ((for a,b being (Element of C) holds ( (the Sorts of A) . ( homsym (a,b) ) ) = H(a,b)) & (for a being (Element of C) holds ( ( Den (( idsym a ),A) ) . ( {} ) ) = I(a))) and A39: (for a,b,c being (Element of C) holds (for f,g being (Element of (the carrier' of C)) holds ((f in H(a,b) & g in H(b,c)) implies ( ( Den (( compsym (a,b,c) ),A) ) . <* g,f *> ) = R(a,b,c,g,f)))) from CKB64:sch 1(A37,A31,A32);
take A;
now
let a being (Object of C);
let b being (Object of C);
let c being (Object of C);
let f being (Morphism of C);
let g being (Morphism of C);
assume (((( dom f ) = a & ( cod f ) = b) & ( dom g ) = b) & ( cod g ) = c);
then (f in ( Hom (a,b) ) & g in ( Hom (b,c) )) by CAT_1:1;
hence ( ( Den (( compsym (a,b,c) ),A) ) . <* g,f *> ) = ( g * f ) by A39;
end;
hence thesis by A38;
end;
end;
