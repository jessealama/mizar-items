environ
vocabularies NUMBERS,XBOOLE_0,STRUCT_0,GROUP_9,SUBSET_1,ORDINAL4,FUNCT_1,RELAT_1,TARSKI,GROUP_1,ALGSTR_0,ZFMISC_1,FUNCT_2,BINOP_1,SETFAM_1,CARD_1,FINSET_1,ORDINAL1,CARD_FIN,GROUP_2,EQREL_1,INT_2,NEWTON,INT_1,XXREAL_0,ARYTM_3,FINSEQ_1,NAT_1,PARTFUN1,CQC_SIM1,CARD_3,FUNCOP_1,FINSEQ_2,NAT_3,GR_CY_1,BINOP_2,XREAL_0,XCMPLX_0,ARYTM_1,RLSUB_1,GROUP_4,GRAPH_1,GROUP_3,REALSET1,GROUP_10;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,CARD_1,NUMBERS,XCMPLX_0,ZFMISC_1,XXREAL_0,XREAL_0,INT_2,NAT_1,NAT_D,FINSET_1,RELAT_1,REALSET1,FUNCT_1,RELSET_1,FUNCT_2,FINSEQ_1,RVSUM_1,STRUCT_0,ALGSTR_0,GROUP_1,GROUP_2,GROUP_3,EQREL_1,FUNCOP_1,WSIERP_1,NEWTON,DOMAIN_1,GR_CY_1,ORDINAL1,GROUP_4,CARD_FIN,PARTFUN1,NAT_3,TOPGRP_1,CKB1,CKB2,CKB3,CKB5,CKB8,CKB9,CKB10,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB28;
definitions CARD_1,GROUP_2,TARSKI,REALSET1,RELAT_1,WELLORD2,STRUCT_0,FUNCT_2,CKB3,CKB9,CKB10,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB28;
theorems FINSEQ_1,GROUP_2,GROUP_3,TARSKI,GROUP_6,FINSEQ_2,FUNCT_1,FUNCT_2,RELAT_1,XBOOLE_0,XBOOLE_1,NAT_1,GROUP_1,XREAL_1,RELSET_1,PARTFUN1,FINSEQ_3,INT_1,ZFMISC_1,CARD_1,CARD_2,FINSET_1,XCMPLX_1,ORDINAL1,FINSEQ_4,XXREAL_0,STRUCT_0,NAT_D,GR_CY_1,NEWTON,CARD_FIN,WEDDWITT,WELLORD2,EQREL_1,FUNCOP_1,RVSUM_1,PEPIN,NAT_4,GROUP_8,NAT_3,GROUP_9,GR_CY_2,TOPGRP_1,VALUED_1,XREAL_0,CKB3,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31;
schemes FUNCT_1,FINSEQ_1,NAT_1,FUNCT_2,SUBSET_1,CLASSES1,CKB6;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,RELSET_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,CARD_1,FINSEQ_1,NEWTON,STRUCT_0,GROUP_2,GROUP_1,GROUP_3,GR_CY_1,FUNCT_2,NAT_3,REALSET1,VALUED_0,DYNKIN,CKB4,CKB7,CKB11,CKB29;
constructors SETFAM_1,WELLORD2,NAT_D,EQREL_1,BINARITH,WSIERP_1,REALSET2,GR_CY_1,GROUP_4,CARD_FIN,NAT_3,TOPGRP_1,SEQ_1,DYNKIN,RELSET_1,CKB2,CKB3,CKB9,CKB10,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB28;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
theorem
Th10: (for G being Group holds (for E being non empty set holds (for a being (Element of E) holds (for T being (LeftOperation of G,E) holds ( card ( the_orbit_of (a,T) ) ) = ( Index ( the_strict_stabilizer_of (a,T) ) )))))
proof
let G being Group;
let E being non empty set;
let a being (Element of E);
let T being (LeftOperation of G,E);
set H = ( the_strict_stabilizer_of (a,T) );
set f = { [ b,A ] where b is (Element of E),A is (Subset of G): (ex g being (Element of G) st (b = ( ( T ^ g ) . a ) & A = ( g * H ))) };
reconsider A9 = { a } as (Subset of E);
A1:now
let x being set;
assume x in f;
then consider b being (Element of E),A being (Subset of G) such that A2: [ b,A ] = x and (ex g being (Element of G) st (b = ( ( T ^ g ) . a ) & A = ( g * H )));
reconsider b,A as set;
take b;
take A;
thus x = [ b,A ] by A2;
end;
now
let x being set,y1 being set,y2 being set;
assume [ x,y1 ] in f;
then consider b1 being (Element of E),A1 being (Subset of G) such that A3: [ b1,A1 ] = [ x,y1 ] and A4: (ex g being (Element of G) st (b1 = ( ( T ^ g ) . a ) & A1 = ( g * H )));
assume [ x,y2 ] in f;
then consider b2 being (Element of E),A2 being (Subset of G) such that A5: [ b2,A2 ] = [ x,y2 ] and A6: (ex g being (Element of G) st (b2 = ( ( T ^ g ) . a ) & A2 = ( g * H )));
A7: y2 = A2 by A5,ZFMISC_1:27;
consider g1 being (Element of G) such that A8: b1 = ( ( T ^ g1 ) . a ) and A9: A1 = ( g1 * H ) by A4;
consider g2 being (Element of G) such that A10: b2 = ( ( T ^ g2 ) . a ) and A11: A2 = ( g2 * H ) by A6;
x = b2 by A5,ZFMISC_1:27;
then (( dom ( T ^ g1 ) ) = E & ( ( T ^ g1 ) . a ) = ( ( T ^ g2 ) . a )) by A3,A8,A10,FUNCT_2:def 1,ZFMISC_1:27;
then (( dom ( T ^ g2 ) ) = E & ( Im (( T ^ g1 ),a) ) = { ( ( T ^ g2 ) . a ) }) by FUNCT_1:59,FUNCT_2:def 1;
then A12: ( Im (( T ^ g1 ),a) ) = ( Im (( T ^ g2 ),a) ) by FUNCT_1:59;
set g = ( ( g2 " ) * g1 );
reconsider g as (Element of G);
A13: (the carrier of ( the_strict_stabilizer_of (A9,T) )) = { g9 where g9 is (Element of G): ( ( T ^ g9 ) .: A9 ) = A9 } by CKB20:def 1;
( ( T ^ g ) .: A9 ) = ( ( ( T ^ ( g2 " ) ) * ( T ^ g1 ) ) .: A9 ) by CKB3:def 1
.= ( ( T ^ ( g2 " ) ) .: ( ( T ^ g1 ) .: A9 ) ) by RELAT_1:126
.= ( ( ( T ^ ( g2 " ) ) * ( T ^ g2 ) ) .: A9 ) by A12,RELAT_1:126
.= ( ( T ^ ( ( g2 " ) * g2 ) ) .: A9 ) by CKB3:def 1
.= ( ( T ^ ( 1_ G ) ) .: A9 ) by GROUP_1:def 5
.= ( ( id E ) .: A9 ) by CKB3:def 1
.= A9 by FUNCT_1:92;
then g in { g9 where g9 is (Element of G): ( ( T ^ g9 ) .: A9 ) = A9 };
then A14: g in ( the_strict_stabilizer_of (A9,T) ) by A13,STRUCT_0:def 5;
y1 = A1 by A3,ZFMISC_1:27;
hence y1 = y2 by A7,A9,A11,A14,GROUP_2:114;
end;
then reconsider f as Function by A1,FUNCT_1:def 1,RELAT_1:def 1;
(for y being set holds (y in ( Left_Cosets H ) iff (ex x being set st [ x,y ] in f)))
proof
let y being set;
hereby
assume A15: y in ( Left_Cosets H );
then reconsider A = y as (Subset of G);
consider g being (Element of G) such that A16: A = ( g * H ) by A15,GROUP_2:def 15;
reconsider x = ( ( T ^ g ) . a ) as set;
take x;
thus [ x,y ] in f by A16;
end;
given x being set such that
A17: [ x,y ] in f;

consider b being (Element of E),A being (Subset of G) such that A18: [ b,A ] = [ x,y ] and A19: (ex g being (Element of G) st (b = ( ( T ^ g ) . a ) & A = ( g * H ))) by A17;
A = y by A18,ZFMISC_1:27;
hence thesis by A19,GROUP_2:def 15;
end;
then A20: ( rng f ) = ( Left_Cosets H ) by RELAT_1:def 5;
now
let x1 being set,x2 being set;
A21: (the carrier of ( the_strict_stabilizer_of (A9,T) )) = { g9 where g9 is (Element of G): ( ( T ^ g9 ) .: A9 ) = A9 } by CKB20:def 1;
assume x1 in ( dom f );
then [ x1,( f . x1 ) ] in f by FUNCT_1:1;
then consider b1 being (Element of E),A1 being (Subset of G) such that A22: [ b1,A1 ] = [ x1,( f . x1 ) ] and A23: (ex g being (Element of G) st (b1 = ( ( T ^ g ) . a ) & A1 = ( g * H )));
assume x2 in ( dom f );
then [ x2,( f . x2 ) ] in f by FUNCT_1:1;
then consider b2 being (Element of E),A2 being (Subset of G) such that A24: [ b2,A2 ] = [ x2,( f . x2 ) ] and A25: (ex g being (Element of G) st (b2 = ( ( T ^ g ) . a ) & A2 = ( g * H )));
consider g2 being (Element of G) such that A26: b2 = ( ( T ^ g2 ) . a ) and A27: A2 = ( g2 * H ) by A25;
assume A28: ( f . x1 ) = ( f . x2 );
consider g1 being (Element of G) such that A29: b1 = ( ( T ^ g1 ) . a ) and A30: A1 = ( g1 * H ) by A23;
set g = ( ( g2 " ) * g1 );
( f . x2 ) = A2 by A24,ZFMISC_1:27;
then ( g1 * H ) = ( g2 * H ) by A22,A30,A27,A28,ZFMISC_1:27;
then g in H by GROUP_2:114;
then g in (the carrier of ( the_strict_stabilizer_of (A9,T) )) by STRUCT_0:def 5;
then A31: (ex g9 being (Element of G) st (g = g9 & ( ( T ^ g9 ) .: A9 ) = A9)) by A21;
( ( T ^ g1 ) .: A9 ) = ( ( id E ) .: ( ( T ^ g1 ) .: A9 ) ) by FUNCT_1:92
.= ( ( T ^ ( 1_ G ) ) .: ( ( T ^ g1 ) .: A9 ) ) by CKB3:def 1
.= ( ( T ^ ( g2 * ( g2 " ) ) ) .: ( ( T ^ g1 ) .: A9 ) ) by GROUP_1:def 5
.= ( ( ( T ^ ( g2 * ( g2 " ) ) ) * ( T ^ g1 ) ) .: A9 ) by RELAT_1:126
.= ( ( T ^ ( ( g2 * ( g2 " ) ) * g1 ) ) .: A9 ) by CKB3:def 1
.= ( ( T ^ ( g2 * g ) ) .: A9 ) by GROUP_1:def 3
.= ( ( ( T ^ g2 ) * ( T ^ g ) ) .: A9 ) by CKB3:def 1
.= ( ( T ^ g2 ) .: A9 ) by A31,RELAT_1:126;
then (( dom ( T ^ g2 ) ) = E & ( Im (( T ^ g1 ),a) ) = ( Im (( T ^ g2 ),a) )) by FUNCT_2:def 1;
then (( dom ( T ^ g1 ) ) = E & ( Im (( T ^ g1 ),a) ) = { ( ( T ^ g2 ) . a ) }) by FUNCT_1:59,FUNCT_2:def 1;
then A32: { ( ( T ^ g1 ) . a ) } = { ( ( T ^ g2 ) . a ) } by FUNCT_1:59;
A33: x2 = b2 by A24,ZFMISC_1:27;
x1 = b1 by A22,ZFMISC_1:27;
hence x1 = x2 by A33,A29,A26,A32,ZFMISC_1:18;
end;
then A34: f is  one-to-one by FUNCT_1:def 4;
(for x being set holds (x in ( the_orbit_of (a,T) ) iff (ex y being set st [ x,y ] in f)))
proof
let x being set;
hereby
assume x in ( the_orbit_of (a,T) );
then consider b being (Element of E) such that A35: b = x and A36: a,b are_conjugated_under T;
consider g being (Element of G) such that A37: b = ( ( T ^ g ) . a ) by A36,CKB24:def 1;
reconsider y = ( g * H ) as set;
take y;
thus [ x,y ] in f by A35,A37;
end;
given y being set such that
A38: [ x,y ] in f;

consider b being (Element of E),A being (Subset of G) such that A39: ([ b,A ] = [ x,y ] & (ex g being (Element of G) st (b = ( ( T ^ g ) . a ) & A = ( g * H )))) by A38;
(b = x & a,b are_conjugated_under T) by A39,CKB24:def 1,ZFMISC_1:27;
hence thesis;
end;
then ( dom f ) = ( the_orbit_of (a,T) ) by RELAT_1:def 4;
then ( the_orbit_of (a,T) ),( Left_Cosets H ) are_equipotent  by A34,A20,WELLORD2:def 4;
hence thesis by CARD_1:5;
end;
