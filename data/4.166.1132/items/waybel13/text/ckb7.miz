environ
vocabularies XBOOLE_0,RELAT_2,ORDERS_2,SUBSET_1,XXREAL_0,WAYBEL_8,TARSKI,RCOMP_1,STRUCT_0,YELLOW_0,LATTICE3,CARD_FIL,LATTICES,WAYBEL_0,WAYBEL_5,GROUP_6,WAYBEL10,YELLOW_1,FINSET_1,SETFAM_1,REWRITE1,RELAT_1,FUNCT_1,ZFMISC_1,CAT_1,EQREL_1,WELLORD2,ORDINAL2,WAYBEL_3,SEQM_3,PBOOLE,CARD_3,WELLORD1,WAYBEL_1,YELLOW_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,DOMAIN_1,SETFAM_1,FINSET_1,RELAT_1,ORDERS_2,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,PBOOLE,LATTICE3,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_0,WAYBEL_1,WAYBEL_3,WAYBEL_5,WAYBEL_8,WAYBEL10;
definitions TARSKI,YELLOW_2,STRUCT_0;
theorems TARSKI,ZFMISC_1,SETFAM_1,ORDERS_2,FUNCT_1,FUNCT_2,LATTICE3,YELLOW_0,YELLOW_1,YELLOW_2,WAYBEL_0,CARD_3,WAYBEL_1,WAYBEL_3,WAYBEL_4,WAYBEL_5,WAYBEL_8,WAYBEL10,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes FUNCT_2,PARTFUN1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,FUNCT_2,FINSET_1,STRUCT_0,LATTICE3,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,WAYBEL_3,WAYBEL_8,WAYBEL10;
constructors DOMAIN_1,GRCAT_1,QUANTAL1,ORDERS_3,WAYBEL_1,WAYBEL_3,WAYBEL_8,WAYBEL10,RELSET_1;
requirements SUBSET,BOOLE;
begin
theorem
Th7: (for X,E being set holds (for L being (CLSubFrame of ( BoolePoset X )) holds (E in (the carrier of ( CompactSublatt L )) iff (ex F being (Element of ( BoolePoset X )) st ((F is  finite & E = ( meet { Y where Y is (Element of L): F c= Y } )) & F c= E)))))
proof
let X being set;
let E being set;
let L being (CLSubFrame of ( BoolePoset X ));
A1: (the carrier of L) c= (the carrier of ( BoolePoset X )) by YELLOW_0:def 13;
A2: L is  complete  complete LATTICE by YELLOW_2:30;
thus (E in (the carrier of ( CompactSublatt L )) implies (ex F being (Element of ( BoolePoset X )) st ((F is  finite & E = ( meet { Y where Y is (Element of L): F c= Y } )) & F c= E)))
proof
A3: ( ( closure_op L ) .: ( [#] ( CompactSublatt ( BoolePoset X ) ) ) ) = ( [#] ( CompactSublatt ( Image ( closure_op L ) ) ) ) by WAYBEL_8:25
.= ( [#] ( CompactSublatt ( the RelStr of L ) ) ) by WAYBEL10:18
.= (the carrier of ( CompactSublatt ( the RelStr of L ) ));
assume E in (the carrier of ( CompactSublatt L ));
then E in ( ( closure_op L ) .: ( [#] ( CompactSublatt ( BoolePoset X ) ) ) ) by A2,A3,CKB5:1;
then consider x being set such that A4: x in ( dom ( closure_op L ) ) and A5: x in ( [#] ( CompactSublatt ( BoolePoset X ) ) ) and A6: E = ( ( closure_op L ) . x ) by FUNCT_1:def 6;
reconsider F = x as (Element of ( BoolePoset X )) by A4;
( id ( BoolePoset X ) ) <= ( closure_op L ) by WAYBEL_1:def 14;
then ( ( id ( BoolePoset X ) ) . F ) <= ( ( closure_op L ) . F ) by YELLOW_2:9;
then F <= ( ( closure_op L ) . F ) by FUNCT_1:18;
then A7: F c= ( ( closure_op L ) . F ) by YELLOW_1:2;
( ( closure_op L ) . x ) in ( rng ( closure_op L ) ) by A4,FUNCT_1:def 3;
then ( ( closure_op L ) . x ) in (the carrier of ( Image ( closure_op L ) )) by YELLOW_0:def 15;
then ( ( closure_op L ) . x ) in (the carrier of ( the RelStr of L )) by WAYBEL10:18;
then A8: ( ( closure_op L ) . x ) in { Y where Y is (Element of L): F c= Y } by A7;
take F;
F is  compact by A5,WAYBEL_8:def 1;
hence F is  finite by WAYBEL_8:28;
A9: ( ( uparrow F ) /\ (the carrier of L) ) c= { Y where Y is (Element of L): F c= Y }
proof
let z being set;
assume A10: z in ( ( uparrow F ) /\ (the carrier of L) );
then reconsider z9 = z as (Element of ( BoolePoset X ));
z in ( uparrow F ) by A10,XBOOLE_0:def 4;
then F <= z9 by WAYBEL_0:18;
then A11: F c= z by YELLOW_1:2;
z in (the carrier of L) by A10,XBOOLE_0:def 4;
hence thesis by A11;
end;
{ Y where Y is (Element of L): F c= Y } c= ( ( uparrow F ) /\ (the carrier of L) )
proof
let z being set;
assume z in { Y where Y is (Element of L): F c= Y };
then consider z9 being (Element of L) such that A12: z = z9 and A13: F c= z9;
reconsider z1 = z9 as (Element of ( BoolePoset X )) by A1,TARSKI:def 3;
F <= z1 by A13,YELLOW_1:2;
then z in ( uparrow F ) by A12,WAYBEL_0:18;
hence thesis by A12,XBOOLE_0:def 4;
end;
then A14: ( ( uparrow F ) /\ (the carrier of L) ) = { Y where Y is (Element of L): F c= Y } by A9,XBOOLE_0:def 10;
thus A15: E = ( "/\" (( ( uparrow F ) /\ (the carrier of L) ),( BoolePoset X )) ) by A6,WAYBEL10:def 5
.= ( meet { Y where Y is (Element of L): F c= Y } ) by A8,A14,YELLOW_1:20;
now
let v being set;
assume A16: v in F;
now
let V being set;
assume V in { Y where Y is (Element of L): F c= Y };
then (ex V9 being (Element of L) st (V = V9 & F c= V9));
hence v in V by A16;
end;
hence v in E by A8,A15,SETFAM_1:def 1;
end;
hence thesis by TARSKI:def 3;
end;

thus ((ex F being (Element of ( BoolePoset X )) st ((F is  finite & E = ( meet { Y where Y is (Element of L): F c= Y } )) & F c= E)) implies E in (the carrier of ( CompactSublatt L )))
proof
given F being (Element of ( BoolePoset X )) such that
A17: F is  finite
and
A18: E = ( meet { Y where Y is (Element of L): F c= Y } )
and
F c= E;

F is  compact by A17,WAYBEL_8:28;
then A19: F in ( [#] ( CompactSublatt ( BoolePoset X ) ) ) by WAYBEL_8:def 1;
A20: ( ( uparrow F ) /\ (the carrier of L) ) c= { Y where Y is (Element of L): F c= Y }
proof
let z being set;
assume A21: z in ( ( uparrow F ) /\ (the carrier of L) );
then reconsider z9 = z as (Element of ( BoolePoset X ));
z in ( uparrow F ) by A21,XBOOLE_0:def 4;
then F <= z9 by WAYBEL_0:18;
then A22: F c= z by YELLOW_1:2;
z in (the carrier of L) by A21,XBOOLE_0:def 4;
hence thesis by A22;
end;
{ Y where Y is (Element of L): F c= Y } c= ( ( uparrow F ) /\ (the carrier of L) )
proof
let z being set;
assume z in { Y where Y is (Element of L): F c= Y };
then consider z9 being (Element of L) such that A23: z = z9 and A24: F c= z9;
reconsider z1 = z9 as (Element of ( BoolePoset X )) by A1,TARSKI:def 3;
F <= z1 by A24,YELLOW_1:2;
then z in ( uparrow F ) by A23,WAYBEL_0:18;
hence thesis by A23,XBOOLE_0:def 4;
end;
then A25: ( ( uparrow F ) /\ (the carrier of L) ) = { Y where Y is (Element of L): F c= Y } by A20,XBOOLE_0:def 10;
( id ( BoolePoset X ) ) <= ( closure_op L ) by WAYBEL_1:def 14;
then ( ( id ( BoolePoset X ) ) . F ) <= ( ( closure_op L ) . F ) by YELLOW_2:9;
then F <= ( ( closure_op L ) . F ) by FUNCT_1:18;
then A26: F c= ( ( closure_op L ) . F ) by YELLOW_1:2;
F in (the carrier of ( BoolePoset X ));
then A27: F in ( dom ( closure_op L ) ) by FUNCT_2:def 1;
then ( ( closure_op L ) . F ) in ( rng ( closure_op L ) ) by FUNCT_1:def 3;
then ( ( closure_op L ) . F ) in (the carrier of ( Image ( closure_op L ) )) by YELLOW_0:def 15;
then ( ( closure_op L ) . F ) in (the carrier of ( the RelStr of L )) by WAYBEL10:18;
then ( ( closure_op L ) . F ) in { Y where Y is (Element of L): F c= Y } by A26;
then E = ( "/\" (( ( uparrow F ) /\ (the carrier of L) ),( BoolePoset X )) ) by A18,A25,YELLOW_1:20
.= ( ( closure_op L ) . F ) by WAYBEL10:def 5;
then A28: E in ( ( closure_op L ) .: ( [#] ( CompactSublatt ( BoolePoset X ) ) ) ) by A27,A19,FUNCT_1:def 6;
( ( closure_op L ) .: ( [#] ( CompactSublatt ( BoolePoset X ) ) ) ) = ( [#] ( CompactSublatt ( Image ( closure_op L ) ) ) ) by WAYBEL_8:25
.= ( [#] ( CompactSublatt ( the RelStr of L ) ) ) by WAYBEL10:18
.= (the carrier of ( CompactSublatt ( the RelStr of L ) ));
hence thesis by A2,A28,CKB5:1;
end;

end;
