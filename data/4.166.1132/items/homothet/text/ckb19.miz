environ
vocabularies DIRAF,SUBSET_1,FUNCT_2,STRUCT_0,AFF_2,ANALOAF,INCSP_1,AFF_1,TRANSGEO,FUNCT_1,RELAT_1,TARSKI,HOMOTHET;
notations TARSKI,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,ANALOAF,DIRAF,AFF_1,AFF_2,TRANSGEO;
theorems TRANSGEO,AFF_1,AFF_2,TRANSLAC,SUBSET_1,DIRAF,FUNCT_1,XBOOLE_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes TRANSGEO;
registrations STRUCT_0;
constructors PARTFUN1,AFF_1,AFF_2,TRANSGEO,RELSET_1;
requirements SUBSET,BOOLE;
begin
reserve AFP for AffinPlane;
reserve a for (Element of AFP);
reserve b for (Element of AFP);
reserve o for (Element of AFP);
reserve p for (Element of AFP);
reserve p9 for (Element of AFP);
reserve r for (Element of AFP);
reserve x for (Element of AFP);
reserve y for (Element of AFP);
reserve f for (Permutation of (the carrier of AFP));
theorem
Lm17: ((((o <> a &  LIN o,a,b) & AFP is  Desarguesian) & (for x holds (for y holds (( f . x ) = y iff ((((not  LIN o,a,x) &  LIN o,x,y) & a,x // b,y) or ( LIN o,a,x & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,x // p9,y) &  LIN o,a,y))))))))) implies ((f is  dilatation & ( f . o ) = o) & ( f . a ) = b))
proof
assume that
A1: o <> a
and
A2:  LIN o,a,b
and
A3: AFP is  Desarguesian;
assume A4: (for x holds (for y holds (( f . x ) = y iff ((((not  LIN o,a,x) &  LIN o,x,y) & a,x // b,y) or ( LIN o,a,x & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,x // p9,y) &  LIN o,a,y))))))));
(for x holds (for r holds x,r // ( f . x ),( f . r )))
proof
let x;
let r;
set y = ( f . x );
set s = ( f . r );
A5: ((((not  LIN o,a,r) &  LIN o,r,s) & a,r // b,s) or ( LIN o,a,r & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,r // p9,s) &  LIN o,a,s))))) by A4;
((((not  LIN o,a,x) &  LIN o,x,y) & a,x // b,y) or ( LIN o,a,x & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,x // p9,y) &  LIN o,a,y))))) by A4;
hence thesis by A1,A2,A3,A5,CKB1:1,CKB16:1,CKB17:1,CKB18:1;
end;
hence f is  dilatation by TRANSGEO:64;
thus ( f . o ) = o
proof
set y = ( f . o );
((((not  LIN o,a,o) &  LIN o,o,y) & a,o // b,y) or ( LIN o,a,o & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,o // p9,y) &  LIN o,a,y))))) by A4;
hence thesis by A1,CKB9:1;
end;

thus ( f . a ) = b
proof
set y = ( f . a );
 LIN o,a,a by AFF_1:7;
then consider p,p9 such that A6: (not  LIN o,a,p) and A7:  LIN o,p,p9 and A8: a,p // b,p9 and A9: p,a // p9,y and A10:  LIN o,a,y by A4;
A11: p,a // p9,b by A8,AFF_1:4;
(not  LIN o,p,a) by A6,AFF_1:6;
hence thesis by A2,A7,A9,A10,A11,AFF_1:56;
end;

end;
