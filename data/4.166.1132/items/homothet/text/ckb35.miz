environ
vocabularies DIRAF,SUBSET_1,FUNCT_2,STRUCT_0,AFF_2,ANALOAF,INCSP_1,AFF_1,TRANSGEO,FUNCT_1,RELAT_1,TARSKI,HOMOTHET;
notations TARSKI,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,ANALOAF,DIRAF,AFF_1,AFF_2,TRANSGEO,CKB22;
definitions CKB22;
theorems TRANSGEO,AFF_1,AFF_2,TRANSLAC,SUBSET_1,DIRAF,FUNCT_1,XBOOLE_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34;
schemes TRANSGEO;
registrations STRUCT_0;
constructors PARTFUN1,AFF_1,AFF_2,TRANSGEO,RELSET_1,CKB22;
requirements SUBSET,BOOLE;
begin
reserve AFP for AffinPlane;
reserve a for (Element of AFP);
reserve b for (Element of AFP);
reserve p for (Element of AFP);
reserve p9 for (Element of AFP);
reserve q for (Element of AFP);
reserve x for (Element of AFP);
reserve y for (Element of AFP);
reserve z for (Element of AFP);
reserve A for (Subset of AFP);
reserve A9 for (Subset of AFP);
reserve C for (Subset of AFP);
reserve M for (Subset of AFP);
reserve N for (Subset of AFP);
reserve K for (Subset of AFP);
reserve f for (Permutation of (the carrier of AFP));
theorem
Lm27: (((a,b // K & (not a in K)) & (for x holds (for y holds (( f . x ) = y iff ((x in K & x = y) or ((not x in K) & (ex p st (ex p9 st ((((p in K & p9 in K) & p,a // p9,x) & p,b // p9,y) & x,y // K))))))))) implies f is  collineation)
proof
assume that
A1: a,b // K
and
A2: (not a in K)
and
A3: (for x holds (for y holds (( f . x ) = y iff ((x in K & x = y) or ((not x in K) & (ex p st (ex p9 st ((((p in K & p9 in K) & p,a // p9,x) & p,b // p9,y) & x,y // K))))))));
A4: K is  being_line by A1,AFF_1:26;
A5: (not b in K) by A1,A2,AFF_1:35;
(for A holds (A is  being_line implies ( f .: A ) is  being_line))
proof
let A;
assume that
A6: A is  being_line;
set B9 = ( f .: A );
A7:now
assume that
A8: A // K
and
A9: A <> K;
now
let x;
assume that
A10: x in A;
consider y such that A11: ( f . y ) = x by TRANSGEO:1;
((y in K & y = x) or ((not y in K) & (ex p st (ex p9 st ((((p in K & p9 in K) & p,a // p9,y) & p,b // p9,x) & y,x // K))))) by A3,A11;
then x,y // K by A8,A9,A10,AFF_1:34,AFF_1:45;
then x,y // A by A8,AFF_1:43;
then y in A by A6,A10,AFF_1:23;
hence x in B9 by A11,TRANSGEO:87;
end;
then A12: A c= B9 by SUBSET_1:2;
now
let y;
assume y in B9;
then consider x such that A13: x in A and A14: y = ( f . x ) by TRANSGEO:87;
(not x in K) by A8,A9,A13,AFF_1:45;
then (ex p st (ex p9 st ((((p in K & p9 in K) & p,a // p9,x) & p,b // p9,y) & x,y // K))) by A3,A14;
then x,y // A by A8,AFF_1:43;
hence y in A by A6,A13,AFF_1:23;
end;
then B9 c= A by SUBSET_1:2;
hence thesis by A6,A12,XBOOLE_0:def 10;
end;
A15:now
K is  being_line by A1,AFF_1:26;
then consider M such that A16: a in M and A17: K // M by AFF_1:49;
A18: M is  being_line by A17,AFF_1:36;
consider A9 such that A19: a in A9 and A20: A // A9 by A6,AFF_1:49;
A21: A9 is  being_line by A20,AFF_1:36;
assume that
A22: (not A // K)
and
A23: A <> K;
consider p such that A24: p in A and A25: p in K by A4,A6,A22,AFF_1:58;
(not A9 // K) by A22,A20,AFF_1:44;
then consider q such that A26: q in A9 and A27: q in K by A4,A21,AFF_1:58;
set C9 = ( Line (q,b) );
A28: q in C9 by AFF_1:15;
a,b // M by A1,A17,AFF_1:43;
then b in M by A16,A18,AFF_1:23;
then q <> b by A2,A16,A17,A27,AFF_1:45;
then C9 is  being_line by AFF_1:def 3;
then consider C such that A29: p in C and A30: C9 // C by AFF_1:49;
A31: b in C9 by AFF_1:15;
A32: C is  being_line by A30,AFF_1:36;
now
let y;
assume that
A33: y in C;
A34:now
A35: q,b // p,y by A28,A31,A29,A30,A33,AFF_1:39;
K is  being_line by A1,AFF_1:26;
then consider N such that A36: y in N and A37: K // N by AFF_1:49;
A38: N is  being_line by A37,AFF_1:36;
(not N // A) by A22,A37,AFF_1:44;
then consider x such that A39: x in N and A40: x in A by A6,A38,AFF_1:58;
A41: x,y // K by A36,A37,A39,AFF_1:40;
assume A42: y <> p;
A43: (not x in K)
proof
assume x in K;
then y in K by A36,A37,A39,AFF_1:45;
then C9 // K by A4,A25,A29,A30,A32,A33,A42,AFF_1:18;
hence contradiction by A5,A27,A28,A31,AFF_1:45;
end;
q,a // p,x by A24,A19,A20,A26,A40,AFF_1:39;
then y = ( f . x ) by A3,A25,A27,A43,A35,A41;
hence y in B9 by A40,TRANSGEO:87;
end;
now
assume A44: y = p;
( f . p ) = p by A3,A25;
hence y in B9 by A24,A44,TRANSGEO:87;
end;
hence y in B9 by A34;
end;
then A45: C c= B9 by SUBSET_1:2;
now
let y;
assume y in B9;
then consider x such that A46: x in A and A47: y = ( f . x ) by TRANSGEO:87;
now
K is  being_line by A1,AFF_1:26;
then consider N such that A48: x in N and A49: K // N by AFF_1:49;
A50: (not C // N)
proof
assume C // N;
then C9 // N by A30,AFF_1:44;
then A51: C9 // K by A49,AFF_1:44;
q in C9 by AFF_1:15;
then C9 = K by A27,A51,AFF_1:45;
hence contradiction by A5,AFF_1:15;
end;
N is  being_line by A49,AFF_1:36;
then consider z such that A52: z in C and A53: z in N by A32,A50,AFF_1:58;
A54: x,z // K by A48,A49,A53,AFF_1:40;
assume x <> p;
then A55: (not x in K) by A4,A6,A23,A24,A25,A46,AFF_1:18;
A56: q,a // p,x by A24,A19,A20,A26,A46,AFF_1:39;
q,b // p,z by A28,A31,A29,A30,A52,AFF_1:39;
hence y in C by A3,A25,A27,A47,A55,A52,A56,A54;
end;
hence y in C by A3,A25,A29,A47;
end;
then B9 c= C by SUBSET_1:2;
hence thesis by A32,A45,XBOOLE_0:def 10;
end;
now
assume A57: A = K;
now
let y;
assume y in B9;
then (ex x st (x in A & y = ( f . x ))) by TRANSGEO:87;
hence y in A by A3,A57;
end;
then A58: B9 c= A by SUBSET_1:2;
now
let x;
assume that
A59: x in A;
set y = ( f . x );
y in B9 by A59,TRANSGEO:86;
hence x in B9 by A3,A57,A59;
end;
then A c= B9 by SUBSET_1:2;
hence thesis by A6,A58,XBOOLE_0:def 10;
end;
hence thesis by A7,A15;
end;
hence thesis by TRANSGEO:92;
end;
