environ
vocabularies DIRAF,SUBSET_1,FUNCT_2,STRUCT_0,AFF_2,ANALOAF,INCSP_1,AFF_1,TRANSGEO,FUNCT_1,RELAT_1,TARSKI,HOMOTHET;
notations TARSKI,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,ANALOAF,DIRAF,AFF_1,AFF_2,TRANSGEO;
theorems TRANSGEO,AFF_1,AFF_2,TRANSLAC,SUBSET_1,DIRAF,FUNCT_1,XBOOLE_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14;
schemes TRANSGEO;
registrations STRUCT_0;
constructors PARTFUN1,AFF_1,AFF_2,TRANSGEO,RELSET_1;
requirements SUBSET,BOOLE;
begin
reserve AFP for AffinPlane;
reserve a for (Element of AFP);
reserve b for (Element of AFP);
reserve o for (Element of AFP);
reserve p for (Element of AFP);
reserve p9 for (Element of AFP);
reserve r for (Element of AFP);
reserve s for (Element of AFP);
reserve x for (Element of AFP);
reserve y for (Element of AFP);
reserve f for (Permutation of (the carrier of AFP));
theorem
Lm13: (for o holds (for a holds (for b holds ((((AFP is  Desarguesian & o <> a) & o <> b) &  LIN o,a,b) implies (ex f st (for x holds (for y holds (( f . x ) = y iff ((((not  LIN o,a,x) &  LIN o,x,y) & a,x // b,y) or ( LIN o,a,x & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,x // p9,y) &  LIN o,a,y)))))))))))))
proof
let o;
let a;
let b;
defpred P[ (Element of AFP),(Element of AFP) ]
 means
((((not  LIN o,a,$1) &  LIN o,$1,$2) & a,$1 // b,$2) or ( LIN o,a,$1 & (ex p st (ex p9 st (((((not  LIN o,a,p) &  LIN o,p,p9) & a,p // b,p9) & p,$1 // p9,$2) &  LIN o,a,$2)))));
assume that
A1: AFP is  Desarguesian
and
A2: o <> a
and
A3: o <> b
and
A4:  LIN o,a,b;
A5: (for y holds (ex x st P[ x,y ])) by A2,A3,A4,CKB11:1;
A6: (for x holds (ex y st P[ x,y ])) by A2,A4,CKB10:1;
A7: (for x holds (for y holds (for s holds ((P[ x,y ] & P[ x,s ]) implies y = s)))) by A1,A2,A4,CKB13:1,AFF_1:56;
A8: (for x holds (for y holds (for r holds ((P[ x,y ] & P[ r,y ]) implies x = r)))) by A1,A2,A3,A4,CKB14:1;
(ex f st (for x holds (for y holds (( f . x ) = y iff P[ x,y ])))) from TRANSGEO:sch 1(A6,A5,A8,A7);
hence thesis;
end;
