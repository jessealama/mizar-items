environ
vocabularies NUMBERS,SUBSET_1,XREAL_0,ORDINAL1,PRE_TOPC,EUCLID,ARYTM_1,ARYTM_3,SUPINF_2,XBOOLE_0,RELAT_1,CARD_1,VALUED_0,FINSEQ_1,COMPLEX1,SQUARE_1,CARD_3,RVSUM_1,XXREAL_0,NAT_1,TARSKI,STRUCT_0,REAL_1,FUNCT_1,UNIALG_1,MSSUBFAM,FUNCOP_1,FINSEQ_2,ALGSTR_0,FUNCT_2,FVSUM_1,INCSP_1,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,ORDINAL4,PARTFUN1,PRVECT_1,QC_LANG1,RLVECT_2,RLVECT_3,TREES_1,VALUED_1,VECTSP_1,MATRIXJ1,ZFMISC_1,BINOP_1,GROUP_1,ABIAN,MATRIX_2,XXREAL_1,SIN_COS,FINSOP_1,FUNCT_4,MATRIX_6,PRE_POLY,TOPS_2,RFINSEQ,MONOID_0,MATRIXR2,MATRTOP3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,NAT_D,FUNCOP_1,FINSEQ_1,PRE_POLY,RFINSEQ,FINSEQ_2,RVSUM_1,VALUED_0,SQUARE_1,STRUCT_0,PRE_TOPC,TOPS_2,RLVECT_1,EUCLID,GRCAT_1,TOPREAL9,CARD_1,VECTSP_1,MATRIX_1,MATRIX_2,MATRIX_3,MATRIX_6,GROUP_1,MATRIX11,MATRTOP1,SIN_COS,ALGSTR_0,MATRIX_7,BINOP_1,FVSUM_1,RCOMP_1,SEQ_1,MONOID_0,GROUP_4,PRVECT_1,RLVECT_2,RLVECT_3,FUNCT_7,MATRIX13,MATRIXR2,FINSOP_1,MATRLIN,MATRLIN2,MOD_2,MATRIXJ1,TMAP_1,CKB4,CKB15,CKB27,CKB45,CKB47,CKB57;
definitions TARSKI,SQUARE_1,EUCLID,XCMPLX_0,ALGSTR_0,STRUCT_0,GRCAT_1,TOPREAL9,FINSEQ_1,MATRTOP1,VECTSP_1,MATRIX_7,FVSUM_1,NAT_D,CKB4,CKB15,CKB27,CKB45,CKB47,CKB57;
theorems XREAL_0,TARSKI,FUNCT_2,EUCLID,XBOOLE_1,XBOOLE_0,JORDAN2C,SQUARE_1,XCMPLX_1,ABSVALUE,RVSUM_1,EUCLID_2,ENUMSET1,XREAL_1,XXREAL_0,RLVECT_1,ORDINAL1,GRCAT_1,CARD_1,CARD_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCT_1,FVSUM_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_6,MATRIX13,MATRIXR1,MATRLIN2,MATRTOP1,NAT_1,PARTFUN1,PRE_POLY,RELAT_1,RLSUB_1,RLVECT_2,RLVECT_3,STRUCT_0,TOPREAL7,ZFMISC_1,MATRIXJ1,STIRL2_1,TOPS_2,TOPREAL9,MATRIX_9,SIN_COS,MATRIX_7,MATRIXR2,MATRIX11,MATRIX_3,MATRIX15,RFINSEQ,FINSEQ_7,SIN_COS6,XXREAL_1,GROUP_4,MONOID_0,GROUP_1,FINSEQ_5,TMAP_1,RLVECT_4,FUNCT_7,TOPREALC,VALUED_1,INT_1,FINSOP_1,MOD_2,CKB1,CKB2,CKB3,CKB4,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB51,CKB52,CKB53,CKB57,CKB58,CKB59;
schemes NAT_1,FINSEQ_4,MATRIX_1;
registrations XBOOLE_0,XXREAL_0,XREAL_0,SQUARE_1,NAT_1,MEMBERED,STRUCT_0,MONOID_0,EUCLID,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,TOPREAL9,CARD_1,FINSEQ_2,FINSET_1,FUNCT_2,MATRIX13,MATRIX_2,MATRTOP1,NUMBERS,PRVECT_1,RELSET_1,RLVECT_2,VECTSP_1,XCMPLX_0,SIN_COS,MATRIX11,MATRIXJ1,GRCAT_1,BORSUK_3,FUNCOP_1,MATRIX_1,INT_1,FUNCT_7,PRE_POLY,SUBSET_1,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB48,CKB49,CKB50,CKB54,CKB55,CKB56;
constructors REAL_1,SQUARE_1,BORSUK_1,MONOID_0,CONVEX1,TOPREAL9,BINARITH,FVSUM_1,LAPLACE,MATRIX_6,MATRIX11,TOPS_2,MATRIX13,MATRLIN2,MATRTOP1,REALSET1,RLVECT_3,SEQ_1,MATRIXJ1,RCOMP_1,ABIAN,SIN_COS,MATRIX_7,SETWISEO,GROUP_4,TMAP_1,FINSOP_1,MATRIXR2,SEQ_4,CKB4,CKB15,CKB27,CKB45,CKB47,CKB57;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
reserve x for set;
reserve i for Nat;
reserve n for Nat;
reserve f for  homogeneous  additive (Function of ( TOP-REAL n ),( TOP-REAL n ));
theorem
Th30: (for A being (Subset of ( TOP-REAL n )) holds (( f | A ) = ( id A ) implies ( f | ( Lin A ) ) = ( id ( Lin A ) )))
proof
set TR = ( TOP-REAL n );
let A being (Subset of ( TOP-REAL n ));
assume that
A1: ( f | A ) = ( id A );
defpred P[ Nat ]
 means
(for L being (Linear_Combination of A) holds (( card ( Carrier L ) ) <= $1 implies ( f . ( Sum L ) ) = ( Sum L )));
A2: (for i holds (P[ i ] implies P[ ( i + 1 ) ]))
proof
let i;
assume A3: P[ i ];
set i1 = ( i + 1 );
let L being (Linear_Combination of A);
assume A4: ( card ( Carrier L ) ) <= i1;
per cases  by A4,NAT_1:8;
suppose ( card ( Carrier L ) ) <= i;

hence thesis by A3;
end;
suppose A5: ( card ( Carrier L ) ) = i1;

then ( Carrier L ) is non empty;
then consider x being set such that A6: x in ( Carrier L ) by XBOOLE_0:def 1;
reconsider x as (Point of TR) by A6;
reconsider X = { x } as (Subset of TR) by ZFMISC_1:31;
consider K being (Linear_Combination of X) such that A7: ( K . x ) = ( L . x ) by RLVECT_4:37;
( L . x ) <> ( 0 ) by A6,RLVECT_2:19;
then (( Carrier K ) c= { x } & x in ( Carrier K )) by A7,RLVECT_2:19,RLVECT_2:def 6;
then A8: ( Carrier K ) = { x } by ZFMISC_1:33;
( { x } \/ ( Carrier L ) ) = ( Carrier L ) by A6,ZFMISC_1:40;
then A9: ( Carrier ( L - K ) ) c= ( Carrier L ) by A8,RLVECT_2:55;
( ( L - K ) . x ) = ( ( L . x ) - ( K . x ) ) by RLVECT_2:54
.= ( 0 ) by A7;
then (not x in ( Carrier ( L - K ) )) by RLVECT_2:19;
then ( Carrier ( L - K ) ) c< ( Carrier L ) by A6,A9,XBOOLE_0:def 8;
then ( card ( Carrier ( L - K ) ) ) < i1 by A5,CARD_2:48;
then A10: ( card ( Carrier ( L - K ) ) ) <= i by NAT_1:13;
( ZeroLC TR ) = ( ( - K ) - ( - K ) ) by RLVECT_2:57
.= ( ( - K ) + ( - ( - K ) ) ) by RLVECT_2:def 13
.= ( ( - K ) + K ) by RLVECT_2:53;
then L = ( L + ( ( - K ) + K ) ) by RLVECT_2:41
.= ( ( L + ( - K ) ) + K ) by RLVECT_2:40
.= ( ( L - K ) + K ) by RLVECT_2:def 13;
then A11: ( Sum L ) = ( ( Sum ( L - K ) ) + ( Sum K ) ) by RLVECT_3:1;
A12: ( Carrier L ) c= A by RLVECT_2:def 6;
then ( ( f | A ) . x ) = ( f . x ) by A6,FUNCT_1:49;
then A13: ( f . x ) = x by A1,A6,A12,FUNCT_1:17;
( Carrier ( L - K ) ) c= A by A9,A12,XBOOLE_1:1;
then ( L - K ) is (Linear_Combination of A) by RLVECT_2:def 6;
then A14: ( f . ( Sum ( L - K ) ) ) = ( Sum ( L - K ) ) by A3,A10;
( Sum K ) = ( ( L . x ) * x ) by A7,RLVECT_2:32;
then ( f . ( Sum K ) ) = ( Sum K ) by A13,TOPREAL9:def 4;
hence ( f . ( Sum L ) ) = ( Sum L ) by A11,A14,GRCAT_1:def 8;
end;
end;
set L = ( Lin A );
set cL = (the carrier of L);
cL c= (the carrier of TR) by RLSUB_1:def 2;
then A15: ( f | L ) = ( f | cL ) by TMAP_1:def 3;
A16: P[ ( 0 ) ]
proof
let L being (Linear_Combination of A);
assume ( card ( Carrier L ) ) <= ( 0 );
then ( Carrier L ) = ( {} );
then L is (Linear_Combination of ( {} (the carrier of TR) )) by RLVECT_2:def 6;
then A17: ( Sum L ) = ( 0. TR ) by RLVECT_2:31;
( f . ( 0. TR ) ) = ( f . ( (( 0 ) qua  real number) * ( 0. TR ) ) ) by RLVECT_1:10
.= ( (( 0 ) qua  real number) * ( f . ( 0. TR ) ) ) by TOPREAL9:def 4
.= ( 0. TR ) by RLVECT_1:10;
hence thesis by A17;
end;
A18: (for i holds P[ i ]) from NAT_1:sch 2(A16,A2);
A19: (for x holds (x in cL implies ( ( f | L ) . x ) = ( ( id L ) . x )))
proof
let x;
assume A20: x in cL;
then x in L by STRUCT_0:def 5;
then consider K being (Linear_Combination of A) such that A21: ( Sum K ) = x by RLVECT_3:14;
P[ ( card ( Carrier K ) ) ] by A18;
then A22: ( f . x ) = x by A21;
( ( f | L ) . x ) = ( f . x ) by A15,A20,FUNCT_1:49;
hence thesis by A20,A22,FUNCT_1:17;
end;
(( dom ( f | L ) ) = cL & ( dom ( id L ) ) = cL) by FUNCT_2:def 1;
hence thesis by A19,FUNCT_1:2;
end;
