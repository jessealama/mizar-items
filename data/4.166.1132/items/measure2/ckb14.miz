environ
vocabularies PROB_1,MEASURE1,FUNCT_1,NUMBERS,RELAT_1,SUPINF_2,TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,CARD_1,ARYTM_3,XXREAL_0,NAT_1,ZFMISC_1,VALUED_0,ORDINAL2,MEASURE2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XXREAL_0,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,NAT_1,SETFAM_1,PROB_1,SUPINF_2,MEASURE1,CKB2,CKB4,CKB5;
definitions TARSKI,XBOOLE_0,SUPINF_2,CKB2;
theorems TARSKI,FUNCT_1,FUNCT_2,ZFMISC_1,NAT_1,SETFAM_1,SUPINF_2,MEASURE1,ENUMSET1,PROB_2,XBOOLE_0,XBOOLE_1,PROB_1,ORDINAL1,XXREAL_0,RELAT_1,CKB1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13;
schemes NAT_1,RECDEF_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,FUNCT_2,NUMBERS,XXREAL_0,MEASURE1,MEMBERED,RELSET_1;
constructors PARTFUN1,NAT_1,PROB_2,MEASURE1,SUPINF_1,XREAL_0,RELSET_1,CKB2,CKB4,CKB5;
requirements NUMERALS,SUBSET,BOOLE;
begin
reserve X for set;
theorem
Th13: (for S being (SigmaField of X) holds (for M being (sigma_Measure of S) holds (for T being (N_Measure_fam of S) holds (for F being (Function of ( NAT ),S) holds (T = ( rng F ) implies ( M . ( union T ) ) <= ( SUM ( M * F ) ))))))
proof
let S being (SigmaField of X);
let M being (sigma_Measure of S);
let T being (N_Measure_fam of S);
let F being (Function of ( NAT ),S);
consider G being (Function of ( NAT ),S) such that A1: (( G . ( 0 ) ) = ( F . ( 0 ) ) & (for n being (Element of ( NAT )) holds ( G . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \/ ( G . n ) ))) by CKB7:1;
consider H being (Function of ( NAT ),S) such that A2: ( H . ( 0 ) ) = ( F . ( 0 ) ) and A3: (for n being (Element of ( NAT )) holds ( H . ( n + 1 ) ) = ( ( F . ( n + 1 ) ) \ ( G . n ) )) by CKB11:1;
(for n,m being set holds (n <> m implies ( H . n ) misses ( H . m )))
proof
let n being set,m being set;
assume A4: n <> m;
per cases ;
suppose (n in ( dom H ) & m in ( dom H ));

then reconsider n9 = n,m9 = m as (Element of ( NAT ));
A5: (m9 < n9 implies ( H . m ) misses ( H . n )) by A1,A2,A3,CKB13:1;
(n9 < m9 implies ( H . n ) misses ( H . m )) by A1,A2,A3,CKB13:1;
hence thesis by A4,A5,XXREAL_0:1;
end;
suppose (not (n in ( dom H ) & m in ( dom H )));

then (( H . n ) = ( {} ) or ( H . m ) = ( {} )) by FUNCT_1:def 2;
hence thesis by XBOOLE_1:65;
end;
end;
then H is (Sep_Sequence of S) by PROB_2:def 2;
then A6: ( SUM ( M * H ) ) = ( M . ( union ( rng H ) ) ) by MEASURE1:def 6;
A7: (for n being (Element of ( NAT )) holds ( H . n ) c= ( F . n ))
proof
let n being (Element of ( NAT ));
A8: ((ex k being Nat st n = ( k + 1 )) implies ( H . n ) c= ( F . n ))
proof
given k being Nat such that
A9: n = ( k + 1 );

reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
( H . n ) = ( ( F . n ) \ ( G . k ) ) by A3,A9;
hence thesis by XBOOLE_1:36;
end;
(n = ( 0 ) or (ex k being Nat st n = ( k + 1 ))) by NAT_1:6;
hence thesis by A2,A8;
end;
A10: (for n being (Element of ( NAT )) holds ( ( M * H ) . n ) <= ( ( M * F ) . n ))
proof
let n being (Element of ( NAT ));
( NAT ) = ( dom ( M * F ) ) by FUNCT_2:def 1;
then A11: ( ( M * F ) . n ) = ( M . ( F . n ) ) by FUNCT_1:12;
( NAT ) = ( dom ( M * H ) ) by FUNCT_2:def 1;
then ( ( M * H ) . n ) = ( M . ( H . n ) ) by FUNCT_1:12;
hence thesis by A7,A11,MEASURE1:31;
end;
A12: ( union ( rng H ) ) = ( union ( rng F ) )
proof
thus ( union ( rng H ) ) c= ( union ( rng F ) )
proof
let r being set;
assume r in ( union ( rng H ) );
then consider E being set such that A13: r in E and A14: E in ( rng H ) by TARSKI:def 4;
consider s being set such that A15: s in ( dom H ) and A16: E = ( H . s ) by A14,FUNCT_1:def 3;
reconsider s as (Element of ( NAT )) by A15;
A17: ( F . s ) in ( rng F ) by FUNCT_2:4;
E c= ( F . s ) by A7,A16;
hence thesis by A13,A17,TARSKI:def 4;
end;

let r being set;
assume r in ( union ( rng F ) );
then consider E being set such that A18: r in E and A19: E in ( rng F ) by TARSKI:def 4;
A20: (ex s being set st (s in ( dom F ) & E = ( F . s ))) by A19,FUNCT_1:def 3;
(ex s1 being (Element of ( NAT )) st r in ( H . s1 ))
proof
defpred P[ Nat ]
 means
r in ( F . $1 );
A21: (ex k being Nat st P[ k ]) by A18,A20;
(ex k being Nat st (P[ k ] & (for n being Nat holds (P[ n ] implies k <= n)))) from NAT_1:sch 5(A21);
then consider k being Nat such that A22: r in ( F . k ) and A23: (for n being Nat holds (r in ( F . n ) implies k <= n));
A24: ((ex l being Nat st k = ( l + 1 )) implies (ex s1 being (Element of ( NAT )) st r in ( H . s1 )))
proof
given l being Nat such that
A25: k = ( l + 1 );

take k;
reconsider l as (Element of ( NAT )) by ORDINAL1:def 12;
A26: (not r in ( G . l ))
proof
assume r in ( G . l );
then consider i being (Element of ( NAT )) such that A27: i <= l and A28: r in ( F . i ) by A1,CKB8:1;
k <= i by A23,A28;
hence thesis by A25,A27,NAT_1:13;
end;
( H . ( l + 1 ) ) = ( ( F . ( l + 1 ) ) \ ( G . l ) ) by A3;
hence thesis by A22,A25,A26,XBOOLE_0:def 5;
end;
(k = ( 0 ) implies (ex s1 being (Element of ( NAT )) st r in ( H . s1 ))) by A2,A22;
hence thesis by A24,NAT_1:6;
end;
then consider s1 being (Element of ( NAT )) such that A29: r in ( H . s1 );
( H . s1 ) in ( rng H ) by FUNCT_2:4;
hence thesis by A29,TARSKI:def 4;
end;
assume T = ( rng F );
hence thesis by A10,A6,A12,SUPINF_2:43;
end;
