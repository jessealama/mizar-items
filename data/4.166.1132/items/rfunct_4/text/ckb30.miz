environ
vocabularies NUMBERS,REAL_1,PARTFUN1,SUBSET_1,XREAL_0,ORDINAL1,XXREAL_0,FINSEQ_2,RVSUM_1,ORDINAL4,FINSEQ_1,RELAT_1,ARYTM_3,NAT_1,FUNCT_1,CARD_3,CARD_1,TARSKI,ARYTM_1,RFUNCT_3,XXREAL_1,VALUED_1,XBOOLE_0,BINOP_2,MEASURE5,FCONT_1,COMPLEX1,ORDINAL2,RFUNCT_4;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,RELAT_1,COMPLEX1,NAT_1,FUNCT_1,FINSEQ_1,REAL_1,FINSEQ_2,PARTFUN1,FINSEQOP,BINOP_2,VALUED_1,SEQ_1,RVSUM_1,RCOMP_1,RFUNCT_3,MEASURE5,FCONT_1,XXREAL_0,CKB6,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
definitions FINSEQ_2,RVSUM_1,CKB6,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
theorems RCOMP_1,RFUNCT_3,TARSKI,PARTFUN1,FINSEQ_1,FINSEQ_2,RVSUM_1,NAT_1,FCONT_1,ABSVALUE,FUNCT_1,XREAL_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_1,COMPLEX1,XXREAL_0,FINSEQOP,FUNCOP_1,VALUED_1,XXREAL_2,RELAT_1,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
schemes NAT_1;
registrations RELSET_1,NUMBERS,XXREAL_0,XREAL_0,BINOP_2,MEMBERED,FINSEQ_2,XBOOLE_0,VALUED_0,CARD_1,FINSEQ_1;
constructors BINOP_1,REAL_1,NAT_1,BINOP_2,COMPLEX1,FINSEQOP,RCOMP_1,RVSUM_1,FCONT_1,RFUNCT_3,MEASURE5,SEQ_1,XXREAL_2,RELSET_1,CKB6,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
requirements NUMERALS,SUBSET,REAL,BOOLE,ARITHM;
begin
reserve r for Real;
reserve s for Real;
reserve x0 for Real;
reserve x for Real;
reserve f for (PartFunc of ( REAL ),( REAL ));
theorem
Th20: (for x0 being  real number holds (for f holds (x0 in ( dom f ) implies ((f is_upper_semicontinuous_in x0 & f is_lower_semicontinuous_in x0) iff f is_continuous_in x0))))
proof
let x0 being  real number;
let f;
assume that
A1: x0 in ( dom f );
A2: (f is_continuous_in x0 implies (f is_upper_semicontinuous_in x0 & f is_lower_semicontinuous_in x0))
proof
assume A3: f is_continuous_in x0;
A4: (for r holds (( 0 ) < r implies (ex s st (( 0 ) < s & (for x holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( ( f . x0 ) - ( f . x ) ) < r))))))
proof
let r;
assume ( 0 ) < r;
then consider s being  real number such that A5: ( 0 ) < s and A6: (for x being  real number holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( abs ( ( f . x ) - ( f . x0 ) ) ) < r)) by A3,FCONT_1:3;
take s;
thus s is Real by XREAL_0:def 1;
(for x holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( ( f . x0 ) - ( f . x ) ) < r))
proof
let x;
assume (x in ( dom f ) & ( abs ( x - x0 ) ) < s);
then A7: ( abs ( ( f . x ) - ( f . x0 ) ) ) < r by A6;
( ( f . x ) - ( f . x0 ) ) >= ( - ( abs ( ( f . x ) - ( f . x0 ) ) ) ) by ABSVALUE:4;
then ( - ( ( f . x ) - ( f . x0 ) ) ) <= ( abs ( ( f . x ) - ( f . x0 ) ) ) by XREAL_1:26;
hence thesis by A7,XXREAL_0:2;
end;
hence thesis by A5;
end;
(for r holds (( 0 ) < r implies (ex s st (( 0 ) < s & (for x holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( ( f . x ) - ( f . x0 ) ) < r))))))
proof
let r;
assume ( 0 ) < r;
then consider s being  real number such that A8: ( 0 ) < s and A9: (for x being  real number holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( abs ( ( f . x ) - ( f . x0 ) ) ) < r)) by A3,FCONT_1:3;
take s;
thus s is Real by XREAL_0:def 1;
(for x holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( ( f . x ) - ( f . x0 ) ) < r))
proof
let x;
assume (x in ( dom f ) & ( abs ( x - x0 ) ) < s);
then A10: ( abs ( ( f . x ) - ( f . x0 ) ) ) < r by A9;
( ( f . x ) - ( f . x0 ) ) <= ( abs ( ( f . x ) - ( f . x0 ) ) ) by ABSVALUE:4;
hence thesis by A10,XXREAL_0:2;
end;
hence thesis by A8;
end;
hence thesis by A1,A4,CKB26:def 1,CKB28:def 1;
end;
((f is_upper_semicontinuous_in x0 & f is_lower_semicontinuous_in x0) implies f is_continuous_in x0)
proof
assume that
A11: f is_upper_semicontinuous_in x0
and
A12: f is_lower_semicontinuous_in x0;
(for r being  real number holds (( 0 ) < r implies (ex s being  real number st (( 0 ) < s & (for x being  real number holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( abs ( ( f . x ) - ( f . x0 ) ) ) < r))))))
proof
let r being  real number;
assume that
A13: ( 0 ) < r;
A14: r is Real by XREAL_0:def 1;
then consider s1 being Real such that A15: ( 0 ) < s1 and A16: (for x holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s1) implies ( ( f . x ) - ( f . x0 ) ) < r)) by A12,A13,CKB28:def 1;
consider s2 being Real such that A17: ( 0 ) < s2 and A18: (for x holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s2) implies ( ( f . x0 ) - ( f . x ) ) < r)) by A11,A13,A14,CKB26:def 1;
set s = ( min (s1,s2) );
A19: (for x being  real number holds ((x in ( dom f ) & ( abs ( x - x0 ) ) < s) implies ( abs ( ( f . x ) - ( f . x0 ) ) ) < r))
proof
let x being  real number;
assume that
A20: x in ( dom f )
and
A21: ( abs ( x - x0 ) ) < s;
A22: x is Real by XREAL_0:def 1;
s <= s2 by XXREAL_0:17;
then ( abs ( x - x0 ) ) < s2 by A21,XXREAL_0:2;
then A23: ( ( f . x0 ) - ( f . x ) ) < r by A18,A20,A22;
s <= s1 by XXREAL_0:17;
then ( abs ( x - x0 ) ) < s1 by A21,XXREAL_0:2;
then A24: ( ( f . x ) - ( f . x0 ) ) < r by A16,A20,A22;
A25: ( abs ( ( f . x ) - ( f . x0 ) ) ) <> r
proof
assume A26: ( abs ( ( f . x ) - ( f . x0 ) ) ) = r;
now
per cases ;
suppose ( ( f . x ) - ( f . x0 ) ) >= ( 0 );

hence contradiction by A24,A26,ABSVALUE:def 1;
end;
suppose (not ( ( f . x ) - ( f . x0 ) ) >= ( 0 ));

then ( abs ( ( f . x ) - ( f . x0 ) ) ) = ( - ( ( f . x ) - ( f . x0 ) ) ) by ABSVALUE:def 1;
hence contradiction by A23,A26;
end;
end;
hence thesis;
end;
( - ( ( f . x0 ) - ( f . x ) ) ) > ( - r ) by A23,XREAL_1:24;
then ( abs ( ( f . x ) - ( f . x0 ) ) ) <= r by A24,ABSVALUE:5;
hence thesis by A25,XXREAL_0:1;
end;
take s;
s > ( 0 )
proof
now
per cases ;
suppose s1 <= s2;

hence thesis by A15,XXREAL_0:def 9;
end;
suppose (not s1 <= s2);

hence thesis by A17,XXREAL_0:def 9;
end;
end;
hence thesis;
end;
hence thesis by A19;
end;
hence thesis by FCONT_1:3;
end;
hence thesis by A2;
end;
