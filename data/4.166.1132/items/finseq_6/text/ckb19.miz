environ
vocabularies NUMBERS,FINSEQ_1,ZFMISC_1,XBOOLE_0,FINSEQ_5,RELAT_1,ORDINAL4,NAT_1,TARSKI,FUNCT_1,XXREAL_0,SUBSET_1,ARYTM_3,FINSEQ_4,ARYTM_1,CARD_1,ORDINAL1,RFINSEQ,PARTFUN1,FINSEQ_6,JORDAN3,REAL_1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,ZFMISC_1,REAL_1,NAT_1,NAT_D,RELAT_1,PARTFUN1,RELSET_1,FUNCT_1,FINSEQ_1,FINSEQ_4,RFINSEQ,FINSEQ_5;
definitions TARSKI,XBOOLE_0;
theorems NAT_1,FINSEQ_1,FINSEQ_4,FINSEQ_3,FINSEQ_2,FUNCT_1,ZFMISC_1,FINSEQ_5,RELAT_1,RFINSEQ,TARSKI,ENUMSET1,PARTFUN2,GRFUNC_1,REALSET1,INT_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,NAT_D,XREAL_0,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18;
registrations XBOOLE_0,RELAT_1,FUNCT_1,XREAL_0,INT_1,FINSEQ_1,REALSET1,FINSEQ_5,ORDINAL1,NAT_1,CARD_1,XXREAL_0,ZFMISC_1,CKB1,CKB2,CKB17;
constructors XXREAL_0,NAT_1,INT_1,PARTFUN1,FINSEQ_4,RFINSEQ,BINARITH,FINSEQ_5,REAL_1,RELSET_1,NAT_D,ENUMSET1;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve f1 for FinSequence;
reserve f2 for FinSequence;
reserve i for Nat;
theorem
Th16: ( ( f1 ^ f2 ) | ( Seg ( ( len f1 ) + i ) ) ) = ( f1 ^ ( f2 | ( Seg i ) ) )
proof
A1: ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) ) c= ( Seg ( ( len f1 ) + i ) )
proof
let x;
assume A2: x in ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) );
then reconsider j = x as (Element of ( NAT ));
per cases  by A2,FINSEQ_1:25;
suppose A3: j in ( dom f1 );

( len f1 ) <= ( ( len f1 ) + i ) by NAT_1:11;
then A4: ( Seg ( len f1 ) ) c= ( Seg ( ( len f1 ) + i ) ) by FINSEQ_1:5;
j in ( Seg ( len f1 ) ) by A3,FINSEQ_1:def 3;
hence thesis by A4;
end;
suppose (ex n being Nat st (n in ( dom ( f2 | ( Seg i ) ) ) & j = ( ( len f1 ) + n )));

then consider k being Nat such that A5: k in ( dom ( f2 | ( Seg i ) ) ) and A6: j = ( ( len f1 ) + k );
A7: k <= j by A6,NAT_1:11;
( dom ( f2 | ( Seg i ) ) ) = ( ( dom f2 ) /\ ( Seg i ) ) by RELAT_1:61;
then k in ( Seg i ) by A5,XBOOLE_0:def 4;
then k <= i by FINSEQ_1:1;
then A8: j <= ( ( len f1 ) + i ) by A6,XREAL_1:6;
1 <= k by A5,FINSEQ_3:25;
then 1 <= j by A7,XXREAL_0:2;
hence thesis by A8,FINSEQ_1:1;
end;
end;
A9: ( ( dom ( f1 ^ f2 ) ) /\ ( Seg ( ( len f1 ) + i ) ) ) c= ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) )
proof
let x;
assume A10: x in ( ( dom ( f1 ^ f2 ) ) /\ ( Seg ( ( len f1 ) + i ) ) );
then A11: x in ( dom ( f1 ^ f2 ) ) by XBOOLE_0:def 4;
reconsider j = x as (Element of ( NAT )) by A10;
per cases  by A11,FINSEQ_1:25;
suppose A12: j in ( dom f1 );

( dom f1 ) c= ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) ) by FINSEQ_1:26;
hence thesis by A12;
end;
suppose (ex n being Nat st (n in ( dom f2 ) & j = ( ( len f1 ) + n )));

then consider k being Nat such that A13: k in ( dom f2 ) and A14: j = ( ( len f1 ) + k );
A15: 1 <= k by A13,FINSEQ_3:25;
A16: ( dom ( f2 | ( Seg i ) ) ) = ( ( dom f2 ) /\ ( Seg i ) ) by RELAT_1:61;
j in ( Seg ( ( len f1 ) + i ) ) by A10,XBOOLE_0:def 4;
then j <= ( ( len f1 ) + i ) by FINSEQ_1:1;
then k <= i by A14,XREAL_1:6;
then k in ( Seg i ) by A15,FINSEQ_1:1;
then k in ( dom ( f2 | ( Seg i ) ) ) by A13,A16,XBOOLE_0:def 4;
hence thesis by A14,FINSEQ_1:28;
end;
end;
A17: ( dom ( ( f1 ^ f2 ) | ( Seg ( ( len f1 ) + i ) ) ) ) = ( ( dom ( f1 ^ f2 ) ) /\ ( Seg ( ( len f1 ) + i ) ) ) by RELAT_1:61;
A18:now
let k being Nat;
assume A19: k in ( dom ( ( f1 ^ f2 ) | ( Seg ( ( len f1 ) + i ) ) ) );
then A20: 1 <= k by FINSEQ_3:25;
per cases ;
suppose k <= ( len f1 );

then A21: k in ( dom f1 ) by A20,FINSEQ_3:25;
thus ( ( ( f1 ^ f2 ) | ( Seg ( ( len f1 ) + i ) ) ) . k ) = ( ( f1 ^ f2 ) . k ) by A19,FUNCT_1:47
.= ( f1 . k ) by A21,FINSEQ_1:def 7
.= ( ( f1 ^ ( f2 | ( Seg i ) ) ) . k ) by A21,FINSEQ_1:def 7;
end;
suppose A22: k > ( len f1 );

then reconsider j = ( k - ( len f1 ) ) as (Element of ( NAT )) by INT_1:5;
j > ( 0 ) by A22,XREAL_1:50;
then A23: 1 <= j by NAT_1:14;
A24: k = ( ( len f1 ) + j );
A25: (not k in ( dom f1 )) by A22,FINSEQ_3:25;
k in ( dom ( f1 ^ f2 ) ) by A17,A19,XBOOLE_0:def 4;
then A26: (ex n being Nat st (n in ( dom f2 ) & k = ( ( len f1 ) + n ))) by A25,FINSEQ_1:25;
k in ( Seg ( ( len f1 ) + i ) ) by A17,A19,XBOOLE_0:def 4;
then k <= ( ( len f1 ) + i ) by FINSEQ_1:1;
then j <= i by A24,XREAL_1:6;
then A27: j in ( Seg i ) by A23,FINSEQ_1:1;
( dom ( f2 | ( Seg i ) ) ) = ( ( dom f2 ) /\ ( Seg i ) ) by RELAT_1:61;
then A28: j in ( dom ( f2 | ( Seg i ) ) ) by A27,A26,XBOOLE_0:def 4;
thus ( ( ( f1 ^ f2 ) | ( Seg ( ( len f1 ) + i ) ) ) . k ) = ( ( f1 ^ f2 ) . k ) by A19,FUNCT_1:47
.= ( f2 . j ) by A26,FINSEQ_1:def 7
.= ( ( f2 | ( Seg i ) ) . j ) by A28,FUNCT_1:47
.= ( ( f1 ^ ( f2 | ( Seg i ) ) ) . k ) by A24,A28,FINSEQ_1:def 7;
end;
end;
( f1 ^ ( f2 | ( Seg i ) ) ) c= ( f1 ^ f2 ) by CKB18:1,RELAT_1:59;
then ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) ) c= ( dom ( f1 ^ f2 ) ) by RELAT_1:11;
then ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) ) c= ( ( dom ( f1 ^ f2 ) ) /\ ( Seg ( ( len f1 ) + i ) ) ) by A1,XBOOLE_1:19;
then ( dom ( ( f1 ^ f2 ) | ( Seg ( ( len f1 ) + i ) ) ) ) = ( dom ( f1 ^ ( f2 | ( Seg i ) ) ) ) by A17,A9,XBOOLE_0:def 10;
hence thesis by A18,FINSEQ_1:13;
end;
