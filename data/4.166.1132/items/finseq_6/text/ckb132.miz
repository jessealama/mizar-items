environ
vocabularies NUMBERS,FINSEQ_1,ZFMISC_1,XBOOLE_0,FINSEQ_5,RELAT_1,ORDINAL4,NAT_1,TARSKI,FUNCT_1,XXREAL_0,SUBSET_1,ARYTM_3,FINSEQ_4,ARYTM_1,CARD_1,ORDINAL1,RFINSEQ,PARTFUN1,FINSEQ_6,JORDAN3,REAL_1;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,ZFMISC_1,REAL_1,NAT_1,NAT_D,RELAT_1,PARTFUN1,RELSET_1,FUNCT_1,FINSEQ_1,FINSEQ_4,RFINSEQ,FINSEQ_5,CKB95,CKB96,CKB125,CKB126;
definitions TARSKI,XBOOLE_0,CKB95,CKB96,CKB125;
theorems NAT_1,FINSEQ_1,FINSEQ_4,FINSEQ_3,FINSEQ_2,FUNCT_1,ZFMISC_1,FINSEQ_5,RELAT_1,RFINSEQ,TARSKI,ENUMSET1,PARTFUN2,GRFUNC_1,REALSET1,INT_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,NAT_D,XREAL_0,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB100,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB117,CKB118,CKB119,CKB120,CKB121,CKB122,CKB123,CKB124,CKB125,CKB127,CKB128,CKB129,CKB130,CKB131;
registrations XBOOLE_0,RELAT_1,FUNCT_1,XREAL_0,INT_1,FINSEQ_1,REALSET1,FINSEQ_5,ORDINAL1,NAT_1,CARD_1,XXREAL_0,ZFMISC_1,CKB1,CKB2,CKB17,CKB97,CKB98,CKB99,CKB101;
constructors XXREAL_0,NAT_1,INT_1,PARTFUN1,FINSEQ_4,RFINSEQ,BINARITH,FINSEQ_5,REAL_1,RELSET_1,NAT_D,ENUMSET1,CKB95,CKB96,CKB125,CKB126;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve D for non empty set;
theorem
Th124: (for f being (FinSequence of D) holds (for k1,k2 being (Element of ( NAT )) holds ((((1 <= k1 & k1 <= ( len f )) & 1 <= k2) & k2 <= ( len f )) implies ((( ( mid (f,k1,k2) ) . 1 ) = ( f . k1 ) & (k1 <= k2 implies (( len ( mid (f,k1,k2) ) ) = ( ( k2 -' k1 ) + 1 ) & (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len ( mid (f,k1,k2) ) )) implies ( ( mid (f,k1,k2) ) . i ) = ( f . ( ( i + k1 ) -' 1 ) )))))) & (k1 > k2 implies (( len ( mid (f,k1,k2) ) ) = ( ( k1 -' k2 ) + 1 ) & (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len ( mid (f,k1,k2) ) )) implies ( ( mid (f,k1,k2) ) . i ) = ( f . ( ( k1 -' i ) + 1 ) )))))))))
proof
let f being (FinSequence of D);
let k11 being (Element of ( NAT )),k21 being (Element of ( NAT ));
assume that
A1: 1 <= k11
and
A2: k11 <= ( len f )
and
A3: 1 <= k21
and
A4: k21 <= ( len f );
( k21 -' 1 ) <= ( len f ) by A4,NAT_D:44;
then A5: ( len ( f /^ ( k21 -' 1 ) ) ) = ( ( len f ) - ( k21 -' 1 ) ) by RFINSEQ:def 1;
A6: ( k21 - 1 ) >= ( 0 ) by A3,XREAL_1:48;
then A7: ( k21 -' 1 ) = ( k21 - 1 ) by XREAL_0:def 2;
A8:now
let k1 being (Element of ( NAT )),k2 being (Element of ( NAT ));
now
assume that
A9: k1 <= k2
and
A10: 1 <= k1
and
A11: k1 <= ( len f );
A12: ( ( mid (f,k1,k2) ) . 1 ) = ( ( ( f /^ ( k1 -' 1 ) ) | ( ( k2 -' k1 ) + 1 ) ) . 1 ) by A9,CKB125:def 1
.= ( ( ( f /^ ( k1 -' 1 ) ) | ( Seg ( ( k2 -' k1 ) + 1 ) ) ) . 1 ) by FINSEQ_1:def 15;
( k1 - 1 ) >= ( 0 ) by A10,XREAL_1:48;
then A13: ( 1 + ( k1 -' 1 ) ) = ( 1 + ( k1 - 1 ) ) by XREAL_0:def 2
.= k1;
then ( 1 + ( k1 -' 1 ) ) <= ( ( ( len f ) - ( k1 -' 1 ) ) + ( k1 -' 1 ) ) by A11;
then A14: 1 <= ( ( len f ) - ( k1 -' 1 ) ) by XREAL_1:6;
A15: ( k1 -' 1 ) <= ( len f ) by A11,NAT_D:44;
then ( len ( f /^ ( k1 -' 1 ) ) ) = ( ( len f ) - ( k1 -' 1 ) ) by RFINSEQ:def 1;
then 1 in ( Seg ( len ( f /^ ( k1 -' 1 ) ) ) ) by A14,FINSEQ_1:1;
then A16: 1 in ( dom ( f /^ ( k1 -' 1 ) ) ) by FINSEQ_1:def 3;
( ( 0 ) + 1 ) <= ( ( k2 -' k1 ) + 1 ) by XREAL_1:6;
then 1 in ( Seg ( ( k2 -' k1 ) + 1 ) ) by FINSEQ_1:1;
then 1 in ( ( dom ( f /^ ( k1 -' 1 ) ) ) /\ ( Seg ( ( k2 -' k1 ) + 1 ) ) ) by A16,XBOOLE_0:def 4;
then 1 in ( dom ( ( f /^ ( k1 -' 1 ) ) | ( Seg ( ( k2 -' k1 ) + 1 ) ) ) ) by RELAT_1:61;
then ( ( mid (f,k1,k2) ) . 1 ) = ( ( f /^ ( k1 -' 1 ) ) . 1 ) by A12,FUNCT_1:47;
hence ( ( mid (f,k1,k2) ) . 1 ) = ( f . k1 ) by A13,A15,A16,RFINSEQ:def 1;
end;
hence (((k1 <= k2 & 1 <= k1) & k1 <= ( len f )) implies ( ( mid (f,k1,k2) ) . 1 ) = ( f . k1 ));
end;
thus ( ( mid (f,k11,k21) ) . 1 ) = ( f . k11 )
proof
per cases ;
suppose k11 <= k21;

hence thesis by A1,A2,A8;
end;
suppose A17: k11 > k21;

A18: ( k21 - 1 ) >= ( 0 ) by A3,XREAL_1:48;
A19: ( k11 - k21 ) >= ( 0 ) by A17,XREAL_1:48;
then ( k11 -' k21 ) = ( k11 - k21 ) by XREAL_0:def 2;
then A20: ( ( k21 -' 1 ) + ( ( k11 -' k21 ) + 1 ) ) = ( ( k21 - 1 ) + ( k11 - ( k21 - 1 ) ) ) by A18,XREAL_0:def 2
.= k11;
( k21 -' 1 ) <= ( len f ) by A4,NAT_D:44;
then A21: ( len ( f /^ ( k21 -' 1 ) ) ) = ( ( len f ) - ( k21 -' 1 ) ) by RFINSEQ:def 1;
A22: 1 <= ( ( k11 -' k21 ) + 1 ) by NAT_1:11;
( ( k11 -' k21 ) + 1 ) = ( ( k11 - k21 ) + 1 ) by A19,XREAL_0:def 2
.= ( k11 - ( k21 - 1 ) )
.= ( k11 - ( k21 -' 1 ) ) by A18,XREAL_0:def 2;
then A23: ( ( k11 -' k21 ) + 1 ) <= ( len ( f /^ ( k21 -' 1 ) ) ) by A2,A21,XREAL_1:9;
then A24: ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) = ( ( k11 -' k21 ) + 1 ) by FINSEQ_1:59;
then A25: ( ( k11 -' k21 ) + 1 ) in ( dom ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) by A22,FINSEQ_3:25;
A26: ( ( k11 -' k21 ) + 1 ) in ( dom ( f /^ ( k21 -' 1 ) ) ) by A22,A23,FINSEQ_3:25;
A27: ( ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) . ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) ) = ( ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) /. ( ( k11 -' k21 ) + 1 ) ) by A22,A24,FINSEQ_4:15
.= ( ( f /^ ( k21 -' 1 ) ) /. ( ( k11 -' k21 ) + 1 ) ) by A25,FINSEQ_4:70
.= ( f /. ( ( k21 -' 1 ) + ( ( k11 -' k21 ) + 1 ) ) ) by A26,FINSEQ_5:27
.= ( f . k11 ) by A1,A2,A20,FINSEQ_4:15;
1 in ( dom ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) by A22,A24,FINSEQ_3:25;
then ( ( Rev ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) . 1 ) = ( ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) . ( ( ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) - 1 ) + 1 ) ) by FINSEQ_5:58
.= ( f . k11 ) by A27;
hence thesis by A17,CKB125:def 1;
end;
end;

thus (k11 <= k21 implies (( len ( mid (f,k11,k21) ) ) = ( ( k21 -' k11 ) + 1 ) & (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len ( mid (f,k11,k21) ) )) implies ( ( mid (f,k11,k21) ) . i ) = ( f . ( ( i + k11 ) -' 1 ) )))))
proof
A28: ( k11 - 1 ) >= ( 0 ) by A1,XREAL_1:48;
then A29: ( k11 -' 1 ) = ( k11 - 1 ) by XREAL_0:def 2;
( k11 -' 1 ) <= ( len f ) by A2,NAT_D:44;
then A30: ( len ( f /^ ( k11 -' 1 ) ) ) = ( ( len f ) - ( k11 -' 1 ) ) by RFINSEQ:def 1;
assume A31: k11 <= k21;
then A32: ( mid (f,k11,k21) ) = ( ( f /^ ( k11 -' 1 ) ) | ( ( k21 -' k11 ) + 1 ) ) by CKB125:def 1;
A33: ( k21 - k11 ) >= ( 0 ) by A31,XREAL_1:48;
then A34: ( k21 -' k11 ) = ( k21 - k11 ) by XREAL_0:def 2;
( ( k21 -' k11 ) + 1 ) = ( ( k21 - k11 ) + 1 ) by A33,XREAL_0:def 2
.= ( k21 - ( k11 - 1 ) )
.= ( k21 - ( k11 -' 1 ) ) by A28,XREAL_0:def 2;
then A35: ( ( k21 -' k11 ) + 1 ) <= ( len ( f /^ ( k11 -' 1 ) ) ) by A4,A30,XREAL_1:9;
then A36: ( len ( ( f /^ ( k11 -' 1 ) ) | ( ( k21 -' k11 ) + 1 ) ) ) = ( ( k21 -' k11 ) + 1 ) by FINSEQ_1:59;
(for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len ( mid (f,k11,k21) ) )) implies ( ( mid (f,k11,k21) ) . i ) = ( f . ( ( i + k11 ) -' 1 ) )))
proof
let i being (Element of ( NAT ));
assume that
A37: 1 <= i
and
A38: i <= ( len ( mid (f,k11,k21) ) );
A39: i <= ( ( k21 -' k11 ) + 1 ) by A32,A35,A38,FINSEQ_1:59;
( i + ( k11 - 1 ) ) <= ( ( k21 - ( k11 - 1 ) ) + ( k11 - 1 ) ) by A32,A34,A36,A38,XREAL_1:6;
then A40: ( i + ( k11 -' 1 ) ) <= ( len f ) by A4,A29,XXREAL_0:2;
A41: k11 <= ( k11 + i ) by NAT_1:11;
A42: ( i + ( k11 -' 1 ) ) = ( i + ( k11 - 1 ) ) by A28,XREAL_0:def 2
.= ( ( i + k11 ) - 1 )
.= ( ( i + k11 ) -' 1 ) by A1,A41,XREAL_1:233,XXREAL_0:2;
( ( mid (f,k11,k21) ) . i ) = ( ( ( f /^ ( k11 -' 1 ) ) | ( ( k21 -' k11 ) + 1 ) ) . i ) by A31,CKB125:def 1
.= ( ( f /^ ( k11 -' 1 ) ) . i ) by A39,FINSEQ_3:112
.= ( f . ( i + ( k11 -' 1 ) ) ) by A37,A40,CKB128:1;
hence thesis by A42;
end;
hence thesis by A32,A35,FINSEQ_1:59;
end;

assume A43: k11 > k21;
then A44: ( k11 - k21 ) >= ( 0 ) by XREAL_1:48;
then A45: ( k11 -' k21 ) = ( k11 - k21 ) by XREAL_0:def 2;
A46: ( mid (f,k11,k21) ) = ( Rev ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) by A43,CKB125:def 1;
then A47: ( len ( mid (f,k11,k21) ) ) = ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) by FINSEQ_5:def 3;
( ( k11 -' k21 ) + 1 ) = ( ( k11 - k21 ) + 1 ) by A44,XREAL_0:def 2
.= ( k11 - ( k21 - 1 ) )
.= ( k11 - ( k21 -' 1 ) ) by A6,XREAL_0:def 2;
then A48: ( ( k11 -' k21 ) + 1 ) <= ( len ( f /^ ( k21 -' 1 ) ) ) by A2,A5,XREAL_1:9;
hence A49: ( len ( mid (f,k11,k21) ) ) = ( ( k11 -' k21 ) + 1 ) by A47,FINSEQ_1:59;
A50: ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) = ( ( k11 -' k21 ) + 1 ) by A48,FINSEQ_1:59;
thus (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len ( mid (f,k11,k21) ) )) implies ( ( mid (f,k11,k21) ) . i ) = ( f . ( ( k11 -' i ) + 1 ) )))
proof
let i being (Element of ( NAT ));
assume that
A51: 1 <= i
and
A52: i <= ( len ( mid (f,k11,k21) ) );
A53: ( i + ( k21 - 1 ) ) <= ( ( k11 - ( k21 - 1 ) ) + ( k21 - 1 ) ) by A45,A49,A52,XREAL_1:6;
( ( k11 -' k21 ) + 1 ) <= ( ( ( k11 -' k21 ) + 1 ) + ( i -' 1 ) ) by NAT_1:11;
then ( ( k11 -' k21 ) + 1 ) <= ( ( ( k11 -' k21 ) + 1 ) + ( i - 1 ) ) by A51,XREAL_1:233;
then ( ( ( k11 -' k21 ) + 1 ) - ( i - 1 ) ) <= ( ( ( ( k11 -' k21 ) + 1 ) + ( i - 1 ) ) - ( i - 1 ) ) by XREAL_1:9;
then A54: ( ( ( ( k11 -' k21 ) + 1 ) - i ) + 1 ) <= ( ( k11 -' k21 ) + 1 );
i <= ( ( k11 -' k21 ) + 1 ) by A47,A48,A52,FINSEQ_1:59;
then A55: ( ( ( ( k11 -' k21 ) + 1 ) -' i ) + 1 ) <= ( ( k11 -' k21 ) + 1 ) by A54,XREAL_1:233;
A56: ( i + k11 ) <= ( i + ( len f ) ) by A2,XREAL_1:6;
A57: i <= ( i + ( k21 -' 1 ) ) by NAT_1:11;
A58: ( ( ( ( ( k11 -' k21 ) + 1 ) -' i ) + 1 ) + ( k21 -' 1 ) ) = ( ( ( ( ( k11 -' k21 ) + 1 ) - i ) + 1 ) + ( k21 -' 1 ) ) by A49,A52,XREAL_1:233
.= ( ( ( ( k11 - ( k21 - 1 ) ) - i ) + 1 ) + ( k21 - 1 ) ) by A6,A45,XREAL_0:def 2
.= ( ( k11 - i ) + 1 )
.= ( ( k11 -' i ) + 1 ) by A7,A53,A57,XREAL_1:233,XXREAL_0:2;
( 1 + k11 ) <= ( i + k11 ) by A51,XREAL_1:6;
then ( 1 + k11 ) <= ( i + ( len f ) ) by A56,XXREAL_0:2;
then ( ( 1 + k11 ) - i ) <= ( ( i + ( len f ) ) - i ) by XREAL_1:9;
then ( ( k11 - i ) + 1 ) <= ( len f );
then A59: ( ( ( ( ( k11 -' k21 ) + 1 ) -' i ) + 1 ) + ( k21 -' 1 ) ) <= ( len f ) by A7,A53,A57,A58,XREAL_1:233,XXREAL_0:2;
( ( mid (f,k11,k21) ) . i ) = ( ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) . ( ( ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) - i ) + 1 ) ) by A46,A47,A51,A52,CKB129:1
.= ( ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) . ( ( ( len ( ( f /^ ( k21 -' 1 ) ) | ( ( k11 -' k21 ) + 1 ) ) ) -' i ) + 1 ) ) by A47,A52,XREAL_1:233
.= ( ( f /^ ( k21 -' 1 ) ) . ( ( ( ( k11 -' k21 ) + 1 ) -' i ) + 1 ) ) by A50,A55,FINSEQ_3:112
.= ( f . ( ( k11 -' i ) + 1 ) ) by A58,A59,CKB128:1,NAT_1:11;
hence thesis;
end;

end;
