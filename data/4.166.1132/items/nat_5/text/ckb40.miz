environ
vocabularies NUMBERS,ORDINAL1,XCMPLX_0,INT_2,NAT_3,XXREAL_0,XBOOLE_0,NEWTON,ARYTM_3,ARYTM_1,NAT_1,RELAT_1,CARD_1,ABIAN,SUBSET_1,FINSET_1,FINSEQ_1,FUNCT_1,FINSEQ_3,TARSKI,CARD_3,ORDINAL4,FUNCT_2,FINSEQ_2,FUNCOP_1,MOEBIUS1,COMPLEX1,INT_1,REALSET1,SQUARE_1,INT_5,ZFMISC_1,POWER,REAL_1,PRE_POLY,UPROOTS,BHSP_5,CLASSES1,XXREAL_2,MEMBERED,PARTFUN1,RFUNCT_3,BINOP_2,PROB_1,WAYBEL29,MSSUBFAM,TOPGEN_1,EULER_1,NAT_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,FUNCOP_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,MCART_1,FUNCT_2,ORDINAL1,CARD_1,NUMBERS,FINSEQ_1,FINSEQ_3,INT_1,INT_2,NAT_1,NAT_D,RVSUM_1,REAL_1,SQUARE_1,XXREAL_0,NEWTON,ABIAN,PEPIN,INT_5,MEMBERED,FINSEQOP,ENUMSET1,FINSET_1,COMPLEX1,NAT_3,DOMAIN_1,POWER,MOEBIUS1,BHSP_5,EULER_1,WSIERP_1,BINOP_1,RECDEF_1,EXTREAL1,UPROOTS,BINOP_2,FUNCT_3,RFUNCT_3,XXREAL_2,CLASSES1,PRE_POLY,CKB34;
definitions TARSKI,NEWTON,FINSEQ_1,FINSEQ_3,EULER_1,MOEBIUS1;
theorems XBOOLE_0,XBOOLE_1,XXREAL_0,XREAL_1,XCMPLX_1,NAT_1,NAT_D,RELAT_1,FUNCT_1,INT_1,INT_2,INT_4,INT_5,NEWTON,EULER_1,EULER_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_5,RVSUM_1,WSIERP_1,ORDINAL1,IDEA_1,INT_6,INT_3,FIB_NUM3,POWER,PEPIN,SQUARE_1,CARD_1,CARD_2,ZFMISC_1,ALGSEQ_1,FINSEQ_4,JGRAPH_1,TARSKI,COMPLEX1,ABSVALUE,MOEBIUS1,CARD_3,MESFUNC3,FUNCT_2,EXTREAL1,FINSEQOP,FUNCOP_1,BAGORDER,RELSET_1,WELLORD2,PARTFUN1,BHSP_5,UPROOTS,RFINSEQ,BINOP_2,BINOP_1,FUNCT_3,RFUNCT_3,NAT_4,NAT_3,RADIX_1,XREAL_0,ABIAN,ENUMSET1,MONOID_1,CLASSES1,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB36,CKB37,CKB38,CKB39;
schemes NAT_1,FUNCT_1,FUNCT_2,BINOP_2,FINSEQ_1;
registrations XBOOLE_0,ORDINAL1,RELSET_1,FINSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,RVSUM_1,VALUED_0,NEWTON,ABIAN,FUNCT_1,ZFMISC_1,SUBSET_1,MOEBIUS1,FUNCT_2,PRE_CIRC,DYNKIN,RELAT_1,SQUARE_1,CARD_1,PREPOWER,NAT_3,UPROOTS,XXREAL_2,PRE_POLY,CKB35;
constructors WELLORD2,REAL_1,NAT_D,BINOP_2,WSIERP_1,ABIAN,EULER_1,PEPIN,INT_5,RECDEF_1,MOEBIUS1,FINSEQOP,EXTREAL1,UPROOTS,NAT_3,REALSET1,POWER,BHSP_5,CALCUL_2,PROB_3,SUPINF_1,RFUNCT_3,XXREAL_2,CLASSES1,PBOOLE,BINOP_1,CKB34;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve k for  natural number;
reserve I for set;
reserve j for set;
reserve f for (Function of I,( NAT ));
reserve g for (Function of I,( NAT ));
reserve J for  finite (Subset of I);
reserve K for  finite (Subset of I);
theorem
Lm11: (J = { j } implies ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K :] ) ) = ( ( f . j ) * ( Sum ( g | K ) ) ))
proof
defpred P[ Nat ]
 means
(for I,j being set holds (for f,g being (Function of I,( NAT )) holds (for J,K being  finite (Subset of I) holds ((J = { j } & $1 = ( card K )) implies ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K :] ) ) = ( ( f . j ) * ( Sum ( g | K ) ) )))));
A1: (for k being Nat holds ((for n being Nat holds (n < k implies P[ n ])) implies P[ k ]))
proof
let k being Nat;
assume A2: (for n being Nat holds (n < k implies P[ n ]));
thus P[ k ]
proof
(k = ( 0 ) or ( k + 1 ) > ( ( 0 ) + 1 )) by XREAL_1:8;
then A3: (k = ( 0 ) or k >= 1) by NAT_1:13;
let I being set;
let j being set;
let f being (Function of I,( NAT ));
let g being (Function of I,( NAT ));
let J being  finite (Subset of I);
let K being  finite (Subset of I);
assume A4: J = { j };
assume A5: k = ( card K );
per cases  by A3,XXREAL_0:1;
suppose A6: k = ( 0 );

set b = ( EmptyBag ( {} ) );
A7: ( EmptyBag ( {} ) ) = ( ( {} ) --> ( 0 ) ) by PRE_POLY:def 13
.= ( {} );
A8: ( Sum b ) = ( 0 ) by UPROOTS:11;
A9: K = ( {} ) by A5,A6;
then (( g | K ) = ( {} ) & [: J,K :] = ( {} ));
hence ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K :] ) ) = ( ( f . j ) * ( Sum ( g | K ) ) ) by A9,A7,A8;
end;
suppose A10: k = 1;

set x = the set;
( card { x } ) = ( card K ) by A5,A10,CARD_1:30;
then consider k9 being set such that A11: K = { k9 } by CARD_1:29;
set b = ( ( ( multnat ) * [: f,g :] ) | [: J,K :] );
consider f9 being (FinSequence of ( REAL )) such that A12: ( Sum b ) = ( Sum f9 ) and A13: f9 = ( b * ( canFS ( support b ) ) ) by UPROOTS:def 3;
A14: [: J,K :] = { [ j,k9 ] } by A4,A11,ZFMISC_1:29;
then A15: [ j,k9 ] in [: J,K :] by TARSKI:def 1;
then [ j,k9 ] in [: I,I :];
then A16: [ j,k9 ] in ( dom ( ( multnat ) * [: f,g :] ) ) by FUNCT_2:def 1;
then [: J,K :] c= ( dom ( ( multnat ) * [: f,g :] ) ) by A14,ZFMISC_1:31;
then A17: ( dom b ) = [: J,K :] by RELAT_1:62;
then A18: ( support b ) c= [: J,K :] by PRE_POLY:37;
( Sum b ) = ( ( f . j ) * ( g . k9 ) )
proof
reconsider I9 = I as non  empty set by A4;
reconsider j99 = j,k99 = k9 as (Element of I9) by A4,A11,ZFMISC_1:31;
set n1 = ( f . j );
set n2 = ( g . k9 );
A19: ( ( f . j ) * ( g . k9 ) ) = ( ( multnat ) . (n1,n2) ) by BINOP_2:def 24
.= ( ( multnat ) . [ ( f . j99 ),( g . k99 ) ] ) by BINOP_1:def 1
.= ( ( multnat ) . ( [: f,g :] . (j99,k99) ) ) by FUNCT_3:75
.= ( ( multnat ) . ( [: f,g :] . [ j,k9 ] ) ) by BINOP_1:def 1
.= ( ( ( multnat ) * [: f,g :] ) . [ j,k9 ] ) by A16,FUNCT_1:12
.= ( b . [ j,k9 ] ) by A15,FUNCT_1:49;
per cases  by A14,A18,ZFMISC_1:33;
suppose A20: ( support b ) = ( {} );

then ( ( f . j ) * ( g . k9 ) ) = ( 0 ) by A19,PRE_POLY:def 7;
hence ( Sum b ) = ( ( f . j ) * ( g . k9 ) ) by A12,A13,A20,RVSUM_1:72;
end;
suppose ( support b ) = { [ j,k9 ] };

then ( canFS ( support b ) ) = <* [ j,k9 ] *> by UPROOTS:4;
then f9 = <* ( b . [ j,k9 ] ) *> by A13,A15,A17,FINSEQ_2:34;
hence ( Sum b ) = ( ( f . j ) * ( g . k9 ) ) by A12,A19,RVSUM_1:73;
end;
end;
hence ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K :] ) ) = ( ( f . j ) * ( Sum ( g | K ) ) ) by A11,CKB39:1;
end;
suppose A21: k > 1;

then K <> ( {} ) by A5;
then consider k9 being set such that A22: k9 in K by XBOOLE_0:def 1;
set K0 = { k9 };
set K1 = ( K \ K0 );
reconsider K0 as  finite (Subset of I) by A22,ZFMISC_1:31;
( card K0 ) < k by A21,CARD_1:30;
then A23: (( ( - 1 ) + k ) < ( ( 0 ) + k ) & ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K0 :] ) ) = ( ( f . j ) * ( Sum ( g | K0 ) ) )) by A2,A4,XREAL_1:8;
K1 misses K0 by XBOOLE_1:79;
then A24: [: J,K1 :] misses [: J,K0 :] by ZFMISC_1:104;
k9 in K0 by TARSKI:def 1;
then (not k9 in K1) by XBOOLE_0:def 5;
then A25: ( card ( K1 \/ K0 ) ) = ( ( card K1 ) + 1 ) by CARD_2:41;
A26: ( K1 \/ K0 ) = ( K \/ { k9 } ) by XBOOLE_1:39
.= K by A22,ZFMISC_1:40;
then [: J,K :] = ( [: J,K1 :] \/ [: J,K0 :] ) by ZFMISC_1:97;
hence ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K :] ) ) = ( ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K1 :] ) ) + ( Sum ( ( ( multnat ) * [: f,g :] ) | [: J,K0 :] ) ) ) by A24,CKB38:1
.= ( ( ( f . j ) * ( Sum ( g | K1 ) ) ) + ( ( f . j ) * ( Sum ( g | K0 ) ) ) ) by A2,A4,A5,A25,A26,A23
.= ( ( f . j ) * ( ( Sum ( g | K1 ) ) + ( Sum ( g | K0 ) ) ) )
.= ( ( f . j ) * ( Sum ( g | K ) ) ) by A26,CKB38:1,XBOOLE_1:79;
end;
end;

end;
(for k being Nat holds P[ k ]) from NAT_1:sch 4(A1);
then P[ ( card K ) ];
hence thesis;
end;
