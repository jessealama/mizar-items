environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,MEASURE1,PARTFUN1,SUBSET_1,REAL_1,INTEGRA5,TARSKI,RELAT_1,FUNCT_1,ARYTM_3,XXREAL_0,MEASURE6,MESFUNC5,FUNCT_3,VALUED_1,MESFUNC1,ARYTM_1,SUPINF_2,MESFUNC2,FINSEQ_1,NAT_1,CARD_3,CARD_1,MESFUNC3,INTEGRA1,ZFMISC_1,XXREAL_2,VALUED_0,SEQ_1,RPR_1,FINSET_1,UPROOTS,RFUNCT_3,PROB_4,XREAL_0,ORDINAL1,COMPLEX1,EQREL_1,SEQ_2,ORDINAL2,POWER,RANDOM_1,BSPACE;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,FINSET_1,CARD_1,NUMBERS,XREAL_0,XXREAL_0,REAL_1,COMPLEX1,XXREAL_2,FUNCT_1,RELSET_1,PARTFUN1,VALUED_1,FINSEQ_1,RFUNCT_3,FUNCT_2,NAT_1,SUPINF_2,SEQ_1,SEQ_2,RPR_1,PROB_1,PROB_4,MEASURE1,EXTREAL1,MESFUNC1,MESFUNC3,MEASURE6,MESFUNC5,MESFUNC6,MESFUNC2,RVSUM_1,UPROOTS,MESFUN6C,CKB10,CKB11,CKB31,CKB32,CKB34,CKB36,CKB38,CKB41,CKB45,CKB47,CKB48;
definitions TARSKI,RPR_1,SUBSET_1,FINSEQ_1,MESFUNC1,MEASURE6,MESFUNC5,MESFUNC6,XCMPLX_0,PROB_4,VALUED_1,XBOOLE_0,XXREAL_3,CKB31,CKB32,CKB47,CKB48;
theorems ABSVALUE,TARSKI,PARTFUN1,FUNCT_1,NUMBERS,SUPINF_2,EXTREAL1,RPR_1,MESFUNC1,FINSEQ_1,XBOOLE_0,SEQM_3,RVSUM_1,XBOOLE_1,XCMPLX_1,MESFUNC2,MESFUNC3,XREAL_1,COMPLEX1,XXREAL_0,RFUNCT_3,MESFUNC5,PROB_1,NAT_1,RELAT_1,FUNCT_3,ZFMISC_1,FUNCT_2,MEASURE1,INTEGRA5,MESFUNC4,MESFUNC6,ORDINAL1,SEQ_2,CARD_FIN,MESFUNC7,VALUED_0,VALUED_1,UPROOTS,ABCMIZ_1,RCOMP_1,MESFUN6C,FINSEQ_3,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB35,CKB37,CKB39,CKB40,CKB42,CKB43,CKB44,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58;
schemes FINSEQ_1,FUNCT_2,FINSEQ_2;
registrations SUBSET_1,NAT_1,XREAL_0,XXREAL_0,TOPREAL6,MEMBERED,ORDINAL1,FINSEQ_1,MEASURE1,FUNCT_2,RELAT_1,SEQ_4,FINSET_1,NUMBERS,XCMPLX_0,VALUED_0,VALUED_1,UPROOTS,RELSET_1;
constructors REAL_1,RPR_1,NAT_3,EXTREAL1,SEQ_1,POWER,RVSUM_1,MESFUNC6,MESFUNC3,MESFUNC5,MEASURE6,MESFUNC2,BINOP_2,PARTFUN3,INTEGRA2,PROB_4,SUPINF_1,UPROOTS,MESFUN6C,MESFUNC1,DOMAIN_1,RELSET_1,CKB11,CKB31,CKB32,CKB34,CKB36,CKB38,CKB41,CKB45,CKB47,CKB48;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve Omega for non  empty set;
reserve r for Real;
reserve Sigma for (SigmaField of Omega);
reserve P for (Probability of Sigma);
theorem
(for X being (Real-Valued-Random-Variable of Sigma) holds (((( 0 ) < r & X is  nonnegative) & X is_integrable_on P) implies ( P . { t where t is (Element of Omega): r <= ( X . t ) } ) <= ( ( expect (X,P) ) / r )))
proof
let X being (Real-Valued-Random-Variable of Sigma);
assume that
A1: ( 0 ) < r
and
A2: X is  nonnegative
and
A3: X is_integrable_on P;
set PM = ( P2M P );
set K = { t where t is (Element of Omega): r <= ( X . t ) };
consider S being (Element of Sigma) such that A4: S = Omega and A5: X is_measurable_on S by CKB32:def 1;
now
let t being set;
assume t in ( S /\ ( great_eq_dom (X,r) ) );
then t in ( great_eq_dom (X,r) ) by XBOOLE_0:def 4;
then (t in ( dom X ) & r <= ( X . t )) by MESFUNC1:def 14;
hence t in K;
end;
then A6: ( S /\ ( great_eq_dom (X,r) ) ) c= K by TARSKI:def 3;
A7: ( dom X ) = S by A4,FUNCT_2:def 1;
now
let x being set;
assume x in K;
then A8: (ex t being (Element of Omega) st (x = t & r <= ( X . t )));
then x in ( great_eq_dom (X,r) ) by A4,A7,MESFUNC1:def 14;
hence x in ( S /\ ( great_eq_dom (X,r) ) ) by A4,A8,XBOOLE_0:def 4;
end;
then K c= ( S /\ ( great_eq_dom (X,r) ) ) by TARSKI:def 3;
then ( S /\ ( great_eq_dom (X,r) ) ) = K by A6,XBOOLE_0:def 10;
then reconsider K as (Element of Sigma) by A5,A7,MESFUNC6:13;
( Integral (PM,( X | K )) ) <= ( Integral (PM,( X | S )) ) by A2,A4,A5,A7,MESFUNC6:87;
then A9: ( Integral (PM,( X | K )) ) <= ( Integral (PM,X) ) by A4,FUNCT_2:33;
( expect (X,P) ) = ( Integral (PM,X) ) by A3,CKB48:def 1;
then reconsider IX = ( Integral (PM,X) ) as (Element of ( REAL ));
reconsider PMK = ( PM . K ) as (Element of ( REAL )) by XXREAL_0:14;
A10: (for t being (Element of Omega) holds (t in K implies r <= ( X . t )))
proof
let t being (Element of Omega);
assume t in K;
then (ex s being (Element of Omega) st (s = t & r <= ( X . s )));
hence thesis;
end;
( PM . K ) <= 1 by PROB_1:35;
then A11: ( PM . K ) < ( +infty ) by XXREAL_0:2,XXREAL_0:9;
X is_integrable_on ( P2M P ) by A3,CKB47:def 1;
then ( ( R_EAL r ) * ( PM . K ) ) <= ( Integral (PM,( X | K )) ) by A4,A7,A11,A10,CKB2:1;
then ( r * PMK ) <= ( Integral (PM,( X | K )) ) by EXTREAL1:1;
then ( r * PMK ) <= ( Integral (PM,X) ) by A9,XXREAL_0:2;
then ( ( r * PMK ) / r ) <= ( IX / r ) by A1,XREAL_1:72;
then PMK <= ( IX / r ) by A1,XCMPLX_1:89;
hence thesis by A3,CKB48:def 1;
end;
