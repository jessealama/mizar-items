environ
vocabularies NUMBERS,XBOOLE_0,PROB_1,MEASURE1,PARTFUN1,SUBSET_1,REAL_1,INTEGRA5,TARSKI,RELAT_1,FUNCT_1,ARYTM_3,XXREAL_0,MEASURE6,MESFUNC5,FUNCT_3,VALUED_1,MESFUNC1,ARYTM_1,SUPINF_2,MESFUNC2,FINSEQ_1,NAT_1,CARD_3,CARD_1,MESFUNC3,INTEGRA1,ZFMISC_1,XXREAL_2,VALUED_0,SEQ_1,RPR_1,FINSET_1,UPROOTS,RFUNCT_3,PROB_4,XREAL_0,ORDINAL1,COMPLEX1,EQREL_1,SEQ_2,ORDINAL2,POWER,RANDOM_1,BSPACE;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,FINSET_1,CARD_1,NUMBERS,XREAL_0,XXREAL_0,REAL_1,COMPLEX1,XXREAL_2,FUNCT_1,RELSET_1,PARTFUN1,VALUED_1,FINSEQ_1,RFUNCT_3,FUNCT_2,NAT_1,SUPINF_2,SEQ_1,SEQ_2,RPR_1,PROB_1,PROB_4,MEASURE1,EXTREAL1,MESFUNC1,MESFUNC3,MEASURE6,MESFUNC5,MESFUNC6,MESFUNC2,RVSUM_1,UPROOTS,MESFUN6C,CKB10,CKB11,CKB31,CKB32,CKB34,CKB36,CKB38,CKB41,CKB45,CKB47,CKB48;
definitions TARSKI,RPR_1,SUBSET_1,FINSEQ_1,MESFUNC1,MEASURE6,MESFUNC5,MESFUNC6,XCMPLX_0,PROB_4,VALUED_1,XBOOLE_0,XXREAL_3,CKB31,CKB32,CKB47,CKB48;
theorems ABSVALUE,TARSKI,PARTFUN1,FUNCT_1,NUMBERS,SUPINF_2,EXTREAL1,RPR_1,MESFUNC1,FINSEQ_1,XBOOLE_0,SEQM_3,RVSUM_1,XBOOLE_1,XCMPLX_1,MESFUNC2,MESFUNC3,XREAL_1,COMPLEX1,XXREAL_0,RFUNCT_3,MESFUNC5,PROB_1,NAT_1,RELAT_1,FUNCT_3,ZFMISC_1,FUNCT_2,MEASURE1,INTEGRA5,MESFUNC4,MESFUNC6,ORDINAL1,SEQ_2,CARD_FIN,MESFUNC7,VALUED_0,VALUED_1,UPROOTS,ABCMIZ_1,RCOMP_1,MESFUN6C,FINSEQ_3,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB35,CKB37,CKB39,CKB40,CKB42,CKB43,CKB44,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56;
schemes FINSEQ_1,FUNCT_2,FINSEQ_2;
registrations SUBSET_1,NAT_1,XREAL_0,XXREAL_0,TOPREAL6,MEMBERED,ORDINAL1,FINSEQ_1,MEASURE1,FUNCT_2,RELAT_1,SEQ_4,FINSET_1,NUMBERS,XCMPLX_0,VALUED_0,VALUED_1,UPROOTS,RELSET_1;
constructors REAL_1,RPR_1,NAT_3,EXTREAL1,SEQ_1,POWER,RVSUM_1,MESFUNC6,MESFUNC3,MESFUNC5,MEASURE6,MESFUNC2,BINOP_2,PARTFUN3,INTEGRA2,PROB_4,SUPINF_1,UPROOTS,MESFUN6C,MESFUNC1,DOMAIN_1,RELSET_1,CKB11,CKB31,CKB32,CKB34,CKB36,CKB38,CKB41,CKB45,CKB47,CKB48;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
(for Omega being non empty  finite set holds (for X being (Real-Valued-Random-Variable of ( Trivial-SigmaField Omega )) holds (for G being (FinSequence of ( REAL )) holds (for s being (FinSequence of Omega) holds (((((( len G ) = ( card Omega ) & s is  one-to-one) & ( rng s ) = Omega) & ( len s ) = ( card Omega )) & (for n being Nat holds (n in ( dom G ) implies ( G . n ) = ( X . ( s . n ) )))) implies ( expect (X,( Trivial-Probability Omega )) ) = ( ( Sum G ) / ( card Omega ) ))))))
proof
let Omega being non empty  finite set;
let X being (Real-Valued-Random-Variable of ( Trivial-SigmaField Omega ));
let G being (FinSequence of ( REAL ));
let s being (FinSequence of Omega);
assume that
A1: ( len G ) = ( card Omega )
and
A2: (s is  one-to-one & ( rng s ) = Omega)
and
A3: ( len s ) = ( card Omega )
and
A4: (for n being Nat holds (n in ( dom G ) implies ( G . n ) = ( X . ( s . n ) )));
set P = ( Trivial-Probability Omega );
deffunc GF(Nat) = ( ( X . ( s . $1 ) ) * ( P . { ( s . $1 ) } ) );
consider F being (FinSequence of ( REAL )) such that A5: (( len F ) = ( len G ) & (for j being Nat holds (j in ( dom F ) implies ( F . j ) = GF(j)))) from FINSEQ_2:sch 1;
A6: ( dom F ) = ( dom G ) by A5,FINSEQ_3:29;
A7:now
let n being Nat;
assume A8: n in ( dom F );
( dom s ) = ( Seg ( len s ) ) by FINSEQ_1:def 3
.= ( dom F ) by A1,A3,A5,FINSEQ_1:def 3;
then ( s . n ) in Omega by A8,PARTFUN1:4;
then reconsider A = { ( s . n ) } as (Singleton of Omega) by RPR_1:4;
A9: ( P . { ( s . n ) } ) = ( prob A ) by CKB31:def 1
.= ( 1 / ( card Omega ) ) by RPR_1:14;
thus ( ( ( 1 / ( card Omega ) ) (#) G ) . n ) = ( ( 1 / ( card Omega ) ) * ( G . n ) ) by VALUED_1:6
.= ( ( 1 / ( card Omega ) ) * ( X . ( s . n ) ) ) by A4,A6,A8
.= ( F . n ) by A5,A8,A9;
end;
( dom F ) = ( dom ( ( 1 / ( card Omega ) ) (#) G ) ) by A6,VALUED_1:def 5;
then ( ( 1 / ( card Omega ) ) (#) G ) = F by A7,FINSEQ_1:13;
then ( expect (X,P) ) = ( Sum ( ( 1 / ( card Omega ) ) (#) G ) ) by A1,A2,A3,A5,CKB54:1
.= ( ( Sum G ) / ( card Omega ) ) by RVSUM_1:87;
hence thesis;
end;
