environ
vocabularies XBOOLE_0,SUBSET_1,TARSKI,ORDERS_2,WAYBEL_0,XXREAL_0,ZFMISC_1,RELAT_1,MCART_1,LATTICE3,RELAT_2,LATTICES,YELLOW_0,EQREL_1,REWRITE1,ORDINAL2,FUNCT_1,STRUCT_0,YELLOW_3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,RELSET_1,MCART_1,DOMAIN_1,FUNCT_2,BINOP_1,STRUCT_0,ORDERS_2,LATTICE3,YELLOW_0,WAYBEL_0;
definitions LATTICE3,RELAT_2,TARSKI,WAYBEL_0,ORDERS_2;
theorems FUNCT_1,FUNCT_2,FUNCT_5,LATTICE3,MCART_1,ORDERS_2,RELAT_1,RELAT_2,RELSET_1,TARSKI,WAYBEL_0,YELLOW_0,YELLOW_2,ZFMISC_1,XBOOLE_0,BINOP_1,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13;
schemes FUNCT_7,RELAT_1,CKB1,CKB14,CKB15,CKB16,CKB17;
registrations XBOOLE_0,SUBSET_1,RELSET_1,STRUCT_0,LATTICE3,YELLOW_0,ORDERS_2,WAYBEL_0,RELAT_1,CKB2,CKB3;
constructors DOMAIN_1,LATTICE3,ORDERS_3,WAYBEL_0,RELSET_1;
requirements SUBSET,BOOLE;
begin
definition
let P being Relation;
let R being Relation;
func ["P,R "] -> Relation
means
:Def1: (for x,y being set holds ([ x,y ] in it iff (ex p,q,s,t being set st (((x = [ p,q ] & y = [ s,t ]) & [ p,s ] in P) & [ q,t ] in R))));
existence
proof
defpred P[ set,set ]
 means
(ex p,s,q,t being set st ((($1 = [ p,q ] & $2 = [ s,t ]) & [ p,s ] in P) & [ q,t ] in R));
consider Q being Relation such that A1: (for x,y being set holds ([ x,y ] in Q iff ((x in [: ( dom P ),( dom R ) :] & y in [: ( rng P ),( rng R ) :]) & P[ x,y ]))) from RELAT_1:sch 1;
take Q;
let x being set,y being set;
hereby
assume [ x,y ] in Q;
then consider p being set,s being set,q being set,t being set such that A2: (((x = [ p,q ] & y = [ s,t ]) & [ p,s ] in P) & [ q,t ] in R) by A1;
take p;
take q;
take s;
take t;
thus (((x = [ p,q ] & y = [ s,t ]) & [ p,s ] in P) & [ q,t ] in R) by A2;
end;
given p being set,q being set,s being set,t being set such that
A3: x = [ p,q ]
and
A4: y = [ s,t ]
and
A5: ([ p,s ] in P & [ q,t ] in R);

(s in ( rng P ) & t in ( rng R )) by A5,RELAT_1:6;
then A6: y in [: ( rng P ),( rng R ) :] by A4,ZFMISC_1:87;
(p in ( dom P ) & q in ( dom R )) by A5,RELAT_1:6;
then x in [: ( dom P ),( dom R ) :] by A3,ZFMISC_1:87;
hence thesis by A1,A3,A4,A5,A6;
end;
uniqueness
proof
defpred P[ set,set ]
 means
(ex p,q,s,t being set st ((($1 = [ p,q ] & $2 = [ s,t ]) & [ p,s ] in P) & [ q,t ] in R));
let A being Relation,B being Relation;
assume that
A7: (for x,y being set holds ([ x,y ] in A iff P[ x,y ]))
and
A8: (for x,y being set holds ([ x,y ] in B iff P[ x,y ]));
thus A = B from RELAT_1:sch 2(A7,A8);
end;
end;
