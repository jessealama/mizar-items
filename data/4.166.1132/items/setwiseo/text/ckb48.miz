environ
vocabularies TARSKI,XBOOLE_0,FUNCT_1,RELAT_1,SUBSET_1,FINSUB_1,BINOP_1,FINSET_1,FUNCOP_1,SETWISEO;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,RELAT_1,FUNCT_1,FINSUB_1,RELSET_1,FINSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,CKB16,CKB18,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB33,CKB47;
definitions BINOP_1,TARSKI,RELAT_1,CKB16,CKB18,CKB33;
theorems FINSUB_1,ZFMISC_1,SUBSET_1,BINOP_1,TARSKI,FUNCT_1,FUNCT_2,FUNCOP_1,ENUMSET1,RELAT_1,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB16,CKB18,CKB19,CKB20,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46;
schemes FINSET_1,FUNCT_2,BINOP_1,SUBSET_1,CKB17,CKB30,CKB31,CKB32;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,FINSET_1,FINSUB_1,CKB15,CKB21;
constructors ENUMSET1,PARTFUN1,BINOP_1,FUNCOP_1,FINSET_1,FINSUB_1,RELSET_1,CKB16,CKB18,CKB25,CKB26,CKB27,CKB28,CKB29,CKB33,CKB47;
requirements BOOLE,SUBSET;
begin
theorem
Th38: (for A,X,Y being non empty set holds (for F being (BinOp of A) holds (((F is  idempotent & F is  commutative) & F is  associative) implies (for B being (Element of ( Fin X )) holds (B <> ( {} ) implies (for f being (Function of X,Y) holds (for g being (Function of Y,A) holds ( F $$ (( f .: B ),g) ) = ( F $$ (B,( g * f )) ))))))))
proof
let A being non empty set,X being non empty set,Y being non empty set;
let F being (BinOp of A);
assume that
A1: F is  idempotent
and
A2: (F is  commutative & F is  associative);
let B being (Element of ( Fin X ));
assume that
A3: B <> ( {} );
let f being (Function of X,Y);
let g being (Function of Y,A);
defpred X[ (Element of ( Fin X )) ]
 means
( F $$ (( f .: $1 ),g) ) = ( F $$ ($1,( g * f )) );
A4: ( dom f ) = X by FUNCT_2:def 1;
A5: (for B1,B2 being non empty (Element of ( Fin X )) holds ((X[ B1 ] & X[ B2 ]) implies X[ ( B1 \/ B2 ) ]))
proof
let B1 being non empty (Element of ( Fin X )),B2 being non empty (Element of ( Fin X ));
assume A6: (( F $$ (( f .: B1 ),g) ) = ( F $$ (B1,( g * f )) ) & ( F $$ (( f .: B2 ),g) ) = ( F $$ (B2,( g * f )) ));
B1 c= X by FINSUB_1:def 5;
then ( X /\ B1 ) <> ( {} ) by XBOOLE_1:28;
then X meets B1 by XBOOLE_0:def 7;
then A7: ( f .: B1 ) <> ( {} ) by A4,RELAT_1:118;
B2 c= X by FINSUB_1:def 5;
then ( X /\ B2 ) <> ( {} ) by XBOOLE_1:28;
then X meets B2 by XBOOLE_0:def 7;
then A8: ( f .: B2 ) <> ( {} ) by A4,RELAT_1:118;
thus ( F $$ (( f .: ( B1 \/ B2 ) ),g) ) = ( F $$ (( ( f .: B1 ) \/ ( f .: B2 ) ),g) ) by RELAT_1:120
.= ( F . (( F $$ (( f .: B1 ),g) ),( F $$ (( f .: B2 ),g) )) ) by A1,A2,A7,A8,CKB39:1
.= ( F $$ (( B1 \/ B2 ),( g * f )) ) by A1,A2,A6,CKB39:1;
end;
A9: (for x being (Element of X) holds X[ {. x .} ])
proof
let x being (Element of X);
( f .: {. x .} ) = ( Im (f,x) );
hence ( F $$ (( f .: {. x .} ),g) ) = ( F $$ ({. ( f . x ) .},g) ) by A4,FUNCT_1:59
.= ( g . ( f . x ) ) by A2,CKB35:1
.= ( ( g * f ) . x ) by FUNCT_2:15
.= ( F $$ ({. x .},( g * f )) ) by A2,CKB35:1;
end;
(for B being non empty (Element of ( Fin X )) holds X[ B ]) from CKB31:sch 1(A9,A5);
hence thesis by A3;
end;
