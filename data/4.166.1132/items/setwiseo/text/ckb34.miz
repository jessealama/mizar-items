environ
vocabularies TARSKI,XBOOLE_0,FUNCT_1,RELAT_1,SUBSET_1,FINSUB_1,BINOP_1,FINSET_1,FUNCOP_1,SETWISEO;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,RELAT_1,FUNCT_1,FINSUB_1,RELSET_1,FINSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,CKB16,CKB18,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB33;
definitions BINOP_1,TARSKI,RELAT_1,CKB16,CKB18,CKB33;
theorems FINSUB_1,ZFMISC_1,SUBSET_1,BINOP_1,TARSKI,FUNCT_1,FUNCT_2,FUNCOP_1,ENUMSET1,RELAT_1,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB16,CKB18,CKB19,CKB20,CKB33;
schemes FINSET_1,FUNCT_2,BINOP_1,SUBSET_1,CKB17,CKB30,CKB31,CKB32;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,FINSET_1,FINSUB_1,CKB15,CKB21;
constructors ENUMSET1,PARTFUN1,BINOP_1,FUNCOP_1,FINSET_1,FINSUB_1,RELSET_1,CKB16,CKB18,CKB25,CKB26,CKB27,CKB28,CKB29,CKB33;
requirements BOOLE,SUBSET;
begin
theorem
Th25: (for X,Y being non empty set holds (for F being (BinOp of Y) holds (for B being (Element of ( Fin X )) holds (for f being (Function of X,Y) holds (((((B <> ( {} ) or F is  having_a_unity) & F is  idempotent) & F is  commutative) & F is  associative) implies (for IT being (Element of Y) holds (IT = ( F $$ (B,f) ) iff (ex G being (Function of ( Fin X ),Y) st (((IT = ( G . B ) & (for e being (Element of Y) holds (e is_a_unity_wrt F implies ( G . ( {} ) ) = e))) & (for x being (Element of X) holds ( G . { x } ) = ( f . x ))) & (for B9 being (Element of ( Fin X )) holds ((B9 c= B & B9 <> ( {} )) implies (for x being (Element of X) holds (x in B implies ( G . ( B9 \/ { x } ) ) = ( F . (( G . B9 ),( f . x )) ))))))))))))))
proof
let X being non empty set,Y being non empty set;
let F being (BinOp of Y);
let B being (Element of ( Fin X ));
let f being (Function of X,Y);
assume that
A1: (B <> ( {} ) or F is  having_a_unity)
and
A2: F is  idempotent
and
A3: F is  commutative
and
A4: F is  associative;
let IT being (Element of Y);
thus (IT = ( F $$ (B,f) ) implies (ex G being (Function of ( Fin X ),Y) st (((IT = ( G . B ) & (for e being (Element of Y) holds (e is_a_unity_wrt F implies ( G . ( {} ) ) = e))) & (for x being (Element of X) holds ( G . { x } ) = ( f . x ))) & (for B9 being (Element of ( Fin X )) holds ((B9 c= B & B9 <> ( {} )) implies (for x being (Element of X) holds (x in B implies ( G . ( B9 \/ { x } ) ) = ( F . (( G . B9 ),( f . x )) ))))))))
proof
assume IT = ( F $$ (B,f) );
then consider G being (Function of ( Fin X ),Y) such that A5: (IT = ( G . B ) & (for e being (Element of Y) holds (e is_a_unity_wrt F implies ( G . ( {} ) ) = e))) and A6: (for x being (Element of X) holds ( G . { x } ) = ( f . x )) and A7: (for B9 being (Element of ( Fin X )) holds ((B9 c= B & B9 <> ( {} )) implies (for x being (Element of X) holds (x in ( B \ B9 ) implies ( G . ( B9 \/ { x } ) ) = ( F . (( G . B9 ),( f . x )) ))))) by A1,A3,A4,CKB33:def 1;
(for B9 being (Element of ( Fin X )) holds ((B9 c= B & B9 <> ( {} )) implies (for x being (Element of X) holds (x in B implies ( G . ( B9 \/ { x } ) ) = ( F . (( G . B9 ),( f . x )) )))))
proof
let B9 being (Element of ( Fin X ));
assume that
A8: B9 c= B
and
A9: B9 <> ( {} );
let x being (Element of X);
assume that
A10: x in B;
per cases ;
suppose x in B9;

then A11: ( B9 \/ { x } ) = B9 by ZFMISC_1:40;
then A12: { x } c= B9 by XBOOLE_1:7;
(not x in ( B9 \ { x } )) by ZFMISC_1:56;
then A13: x in ( B \ ( B9 \ { x } ) ) by A10,XBOOLE_0:def 5;
per cases ;
suppose A14: B9 = { x };

hence ( G . ( B9 \/ { x } ) ) = ( f . x ) by A6
.= ( F . (( f . x ),( f . x )) ) by A2,BINOP_1:def 4
.= ( F . (( G . B9 ),( f . x )) ) by A6,A14;
end;
suppose B9 <> { x };

then (not B9 c= { x }) by A12,XBOOLE_0:def 10;
then ( B9 \ { x } ) <> ( {} ) by XBOOLE_1:37;
then A15: ( G . ( ( B9 \ {. x .} ) \/ {. x .} ) ) = ( F . (( G . ( B9 \ {. x .} ) ),( f . x )) ) by A7,A8,A13,XBOOLE_1:1;
thus ( G . ( B9 \/ { x } ) ) = ( G . ( ( B9 \ { x } ) \/ { x } ) ) by XBOOLE_1:39
.= ( F . (( G . ( B9 \ { x } ) ),( F . (( f . x ),( f . x )) )) ) by A2,A15,BINOP_1:def 4
.= ( F . (( F . (( G . ( B9 \ {. x .} ) ),( f . x )) ),( f . x )) ) by A4,BINOP_1:def 3
.= ( F . (( G . B9 ),( f . x )) ) by A11,A15,XBOOLE_1:39;
end;
end;
suppose (not x in B9);

then x in ( B \ B9 ) by A10,XBOOLE_0:def 5;
hence thesis by A7,A8,A9;
end;
end;
hence thesis by A5,A6;
end;

given G being (Function of ( Fin X ),Y) such that
A16: ((IT = ( G . B ) & (for e being (Element of Y) holds (e is_a_unity_wrt F implies ( G . ( {} ) ) = e))) & (for x being (Element of X) holds ( G . { x } ) = ( f . x )))
and
A17: (for B9 being (Element of ( Fin X )) holds ((B9 c= B & B9 <> ( {} )) implies (for x being (Element of X) holds (x in B implies ( G . ( B9 \/ { x } ) ) = ( F . (( G . B9 ),( f . x )) )))));

(for B9 being (Element of ( Fin X )) holds ((B9 c= B & B9 <> ( {} )) implies (for x being (Element of X) holds (x in ( B \ B9 ) implies ( G . ( B9 \/ { x } ) ) = ( F . (( G . B9 ),( f . x )) )))))
proof
let B9 being (Element of ( Fin X ));
assume that
A18: (B9 c= B & B9 <> ( {} ));
let x being (Element of X);
assume x in ( B \ B9 );
then x in B by XBOOLE_0:def 5;
hence thesis by A17,A18;
end;
hence thesis by A1,A3,A4,A16,CKB33:def 1;
end;
