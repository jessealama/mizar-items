environ
vocabularies NUMBERS,SUBSET_1,REAL_1,SEQ_1,PARTFUN1,FDIFF_1,XBOOLE_0,FUNCT_1,PDIFF_1,FINSEQ_1,RCOMP_1,TARSKI,RELAT_1,PDIFF_2,ARYTM_1,ARYTM_3,XREAL_0,ORDINAL1,CARD_1,XXREAL_1,VALUED_0,SEQ_2,ORDINAL2,XXREAL_0,NAT_1,VALUED_1,FUNCT_2,FINSEQ_2,CARD_3,FCONT_1,PDIFF_3;
notations TARSKI,XBOOLE_0,SUBSET_1,FUNCT_2,RELSET_1,PARTFUN1,XXREAL_0,XCMPLX_0,XREAL_0,NAT_1,ORDINAL1,NUMBERS,REAL_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RCOMP_1,EUCLID,FDIFF_1,FCONT_1,PDIFF_1,PDIFF_2,CKB2,CKB3,CKB4,CKB5,CKB6;
definitions EUCLID,RCOMP_1,CKB2,CKB3,CKB4,CKB5,CKB6;
theorems TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,RCOMP_1,SEQ_4,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RFUNCT_2,PARTFUN1,FDIFF_1,PDIFF_2,VALUED_1,XCMPLX_0,XCMPLX_1,FUNCT_2,VALUED_0,ORDINAL1,PDIFF_1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes SEQ_1,FUNCT_2;
registrations RELSET_1,XREAL_0,MEMBERED,FDIFF_1,FUNCT_2,NAT_1,NUMBERS,XBOOLE_0,XXREAL_0,VALUED_0,VALUED_1,CKB1;
constructors REAL_1,SEQ_2,PARTFUN1,RFUNCT_2,RCOMP_1,FDIFF_1,SEQ_1,NAT_1,FCONT_1,PDIFF_1,PARTFUN2,PDIFF_2,SEQM_3,FUNCT_2,COMPLEX1,RELSET_1,BINOP_2,RVSUM_1,CKB2,CKB3,CKB4,CKB5,CKB6;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve x for Real;
reserve r for Real;
reserve r1 for Real;
reserve s for Real;
reserve p for Real;
reserve p1 for Real;
reserve n for (Element of ( NAT ));
reserve s1 for Real_Sequence;
reserve R for REST;
reserve R1 for REST;
reserve L for LINEAR;
reserve L1 for LINEAR;
definition
let f being (PartFunc of ( REAL 2 ),( REAL ));
let z being (Element of ( REAL 2 ));
assume A1: f is_hpartial_differentiable`11_in z;
func hpartdiff11 (f,z) -> Real
means
:Def6: (ex x0,y0 being Real st (z = <* x0,y0 *> & (ex N being (Neighbourhood of x0) st (N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) & (ex L st (ex R st (it = ( L . 1 ) & (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))))))));
existence
proof
consider x0 being Real,y0 being Real such that A2: z = <* x0,y0 *> and A3: (ex N being (Neighbourhood of x0) st (N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) & (ex L st (ex R st (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))))) by A1,CKB3:def 1;
consider N being (Neighbourhood of x0) such that A4: N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) and A5: (ex L st (ex R st (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))) by A3;
consider L,R such that A6: (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))) by A5;
consider r such that A7: (for p holds ( L . p ) = ( r * p )) by FDIFF_1:def 3;
take r;
( L . 1 ) = ( r * 1 ) by A7
.= r;
hence thesis by A2,A4,A6;
end;
uniqueness
proof
let r;
let s;
assume that
A8: (ex x0,y0 being Real st (z = <* x0,y0 *> & (ex N being (Neighbourhood of x0) st (N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) & (ex L st (ex R st (r = ( L . 1 ) & (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))))))))
and
A9: (ex x0,y0 being Real st (z = <* x0,y0 *> & (ex N being (Neighbourhood of x0) st (N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) & (ex L st (ex R st (s = ( L . 1 ) & (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))))))));
consider x1 being Real,y1 being Real such that A10: z = <* x1,y1 *> and A11: (ex N being (Neighbourhood of x1) st (N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) & (ex L st (ex R st (s = ( L . 1 ) & (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x1 ) ) = ( ( L . ( x - x1 ) ) + ( R . ( x - x1 ) ) )))))))) by A9;
consider N1 being (Neighbourhood of x1) such that N1 c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) and A12: (ex L st (ex R st (s = ( L . 1 ) & (for x holds (x in N1 implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x1 ) ) = ( ( L . ( x - x1 ) ) + ( R . ( x - x1 ) ) )))))) by A11;
consider L1,R1 such that A13: s = ( L1 . 1 ) and A14: (for x holds (x in N1 implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x1 ) ) = ( ( L1 . ( x - x1 ) ) + ( R1 . ( x - x1 ) ) ))) by A12;
consider p1 such that A15: (for p holds ( L1 . p ) = ( p1 * p )) by FDIFF_1:def 3;
A16: s = ( p1 * 1 ) by A13,A15;
consider x0 being Real,y0 being Real such that A17: z = <* x0,y0 *> and A18: (ex N being (Neighbourhood of x0) st (N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) & (ex L st (ex R st (r = ( L . 1 ) & (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) )))))))) by A8;
consider N being (Neighbourhood of x0) such that N c= ( dom ( SVF1 (1,( pdiff1 (f,1) ),z) ) ) and A19: (ex L st (ex R st (r = ( L . 1 ) & (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) )))))) by A18;
consider L,R such that A20: r = ( L . 1 ) and A21: (for x holds (x in N implies ( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))) by A19;
consider r1 such that A22: (for p holds ( L . p ) = ( r1 * p )) by FDIFF_1:def 3;
A23: x0 = x1 by A17,A10,FINSEQ_1:77;
then consider N0 being (Neighbourhood of x0) such that A24: (N0 c= N & N0 c= N1) by RCOMP_1:17;
consider g being  real number such that A25: ( 0 ) < g and A26: N0 = ]. ( x0 - g ),( x0 + g ) .[ by RCOMP_1:def 6;
deffunc F((Element of ( NAT ))) = ( g / ( $1 + 2 ) );
consider s1 such that A27: (for n holds ( s1 . n ) = F(n)) from SEQ_1:sch 1;
now
let n;
( g / ( n + 2 ) ) <> ( 0 ) by A25,XREAL_1:139;
hence ( s1 . n ) <> ( 0 ) by A27;
end;
then A28: s1 is  non-zero by SEQ_1:5;
(s1 is  convergent & ( lim s1 ) = ( 0 )) by A27,SEQ_4:31;
then reconsider h = s1 as  convergent_to_0 Real_Sequence by A28,FDIFF_1:def 1;
A29: (for n holds (ex x st ((x in N & x in N1) & ( h . n ) = ( x - x0 ))))
proof
let n;
take ( x0 + ( g / ( n + 2 ) ) );
( ( 0 ) + 1 ) < ( ( n + 1 ) + 1 ) by XREAL_1:6;
then ( g / ( n + 2 ) ) < ( g / 1 ) by A25,XREAL_1:76;
then A30: ( x0 + ( g / ( n + 2 ) ) ) < ( x0 + g ) by XREAL_1:6;
( g / ( n + 2 ) ) > ( 0 ) by A25,XREAL_1:139;
then ( x0 + ( - g ) ) < ( x0 + ( g / ( n + 2 ) ) ) by A25,XREAL_1:6;
then ( x0 + ( g / ( n + 2 ) ) ) in ]. ( x0 - g ),( x0 + g ) .[ by A30;
hence thesis by A24,A26,A27;
end;
A31: r = ( r1 * 1 ) by A20,A22;
A32:now
let x;
assume that
A33: x in N
and
A34: x in N1;
( ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x ) - ( ( SVF1 (1,( pdiff1 (f,1) ),z) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ) by A21,A33;
then ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ) = ( ( L1 . ( x - x0 ) ) + ( R1 . ( x - x0 ) ) ) by A14,A23,A34;
then ( ( r1 * ( x - x0 ) ) + ( R . ( x - x0 ) ) ) = ( ( L1 . ( x - x0 ) ) + ( R1 . ( x - x0 ) ) ) by A22;
hence ( ( r * ( x - x0 ) ) + ( R . ( x - x0 ) ) ) = ( ( s * ( x - x0 ) ) + ( R1 . ( x - x0 ) ) ) by A15,A31,A16;
end;
(for n being Nat holds ( r - s ) = ( ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) . n ))
proof
( dom R1 ) = ( REAL ) by PARTFUN1:def 2;
then A35: ( rng h ) c= ( dom R1 );
let n being Nat;
( dom R ) = ( REAL ) by PARTFUN1:def 2;
then A36: ( rng h ) c= ( dom R );
A37: n in ( NAT ) by ORDINAL1:def 12;
then (ex x st ((x in N & x in N1) & ( h . n ) = ( x - x0 ))) by A29;
then ( ( r * ( h . n ) ) + ( R . ( h . n ) ) ) = ( ( s * ( h . n ) ) + ( R1 . ( h . n ) ) ) by A32;
then A38: ( ( ( r * ( h . n ) ) / ( h . n ) ) + ( ( R . ( h . n ) ) / ( h . n ) ) ) = ( ( ( s * ( h . n ) ) + ( R1 . ( h . n ) ) ) / ( h . n ) ) by XCMPLX_1:62;
A39: ( ( R . ( h . n ) ) / ( h . n ) ) = ( ( R . ( h . n ) ) * ( ( h . n ) " ) ) by XCMPLX_0:def 9
.= ( ( R . ( h . n ) ) * ( ( h " ) . n ) ) by VALUED_1:10
.= ( ( ( R /* h ) . n ) * ( ( h " ) . n ) ) by A37,A36,FUNCT_2:108
.= ( ( ( h " ) (#) ( R /* h ) ) . n ) by VALUED_1:5;
h is  non-zero by FDIFF_1:def 1;
then A40: ( h . n ) <> ( 0 ) by A37,SEQ_1:5;
A41: ( ( R1 . ( h . n ) ) / ( h . n ) ) = ( ( R1 . ( h . n ) ) * ( ( h . n ) " ) ) by XCMPLX_0:def 9
.= ( ( R1 . ( h . n ) ) * ( ( h " ) . n ) ) by VALUED_1:10
.= ( ( ( R1 /* h ) . n ) * ( ( h " ) . n ) ) by A37,A35,FUNCT_2:108
.= ( ( ( h " ) (#) ( R1 /* h ) ) . n ) by VALUED_1:5;
A42: ( ( s * ( h . n ) ) / ( h . n ) ) = ( s * ( ( h . n ) / ( h . n ) ) ) by XCMPLX_1:74
.= ( s * 1 ) by A40,XCMPLX_1:60
.= s;
( ( r * ( h . n ) ) / ( h . n ) ) = ( r * ( ( h . n ) / ( h . n ) ) ) by XCMPLX_1:74
.= ( r * 1 ) by A40,XCMPLX_1:60
.= r;
then ( r + ( ( R . ( h . n ) ) / ( h . n ) ) ) = ( s + ( ( R1 . ( h . n ) ) / ( h . n ) ) ) by A38,A42,XCMPLX_1:62;
then r = ( s + ( ( ( ( h " ) (#) ( R1 /* h ) ) . n ) - ( ( ( h " ) (#) ( R /* h ) ) . n ) ) ) by A39,A41;
hence thesis by A37,RFUNCT_2:1;
end;
then (( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) is  constant & ( ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) . 1 ) = ( r - s )) by VALUED_0:def 18;
then A43: ( lim ( ( ( h " ) (#) ( R1 /* h ) ) - ( ( h " ) (#) ( R /* h ) ) ) ) = ( r - s ) by SEQ_4:25;
A44: (( ( h " ) (#) ( R1 /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R1 /* h ) ) ) = ( 0 )) by FDIFF_1:def 2;
(( ( h " ) (#) ( R /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R /* h ) ) ) = ( 0 )) by FDIFF_1:def 2;
then ( r - s ) = ( ( 0 ) - ( 0 ) ) by A43,A44,SEQ_2:12;
hence thesis;
end;
end;
