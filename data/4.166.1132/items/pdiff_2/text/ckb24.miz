environ
vocabularies NUMBERS,SUBSET_1,REAL_1,SEQ_1,PARTFUN1,FDIFF_1,RELAT_1,CARD_3,FUNCT_1,FINSEQ_1,FINSEQ_2,PDIFF_1,RCOMP_1,TARSKI,ARYTM_1,ARYTM_3,XREAL_0,ORDINAL1,CARD_1,XXREAL_1,VALUED_0,SEQ_2,ORDINAL2,XXREAL_0,NAT_1,FUNCT_2,VALUED_1,XBOOLE_0,COMPLEX1,FCONT_1,PDIFF_2;
notations TARSKI,SUBSET_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XCMPLX_0,XREAL_0,COMPLEX1,ORDINAL1,NUMBERS,REAL_1,NAT_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RCOMP_1,EUCLID,FDIFF_1,XXREAL_0,FCONT_1,PDIFF_1,CKB3,CKB18,CKB19,CKB22,CKB23;
definitions TARSKI,EUCLID,RCOMP_1,PDIFF_1,CKB3,CKB18,CKB19,CKB22,CKB23;
theorems TARSKI,XBOOLE_0,XBOOLE_1,XREAL_1,RCOMP_1,SEQ_4,SEQ_1,SEQ_2,FINSEQ_1,FINSEQ_2,RFUNCT_2,RELAT_1,FUNCT_1,FUNCT_2,PARTFUN1,FDIFF_1,VALUED_1,SEQM_3,RFUNCT_1,XCMPLX_0,XCMPLX_1,PDIFF_1,NAT_1,VALUED_0,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23;
schemes SEQ_1;
registrations RELSET_1,XREAL_0,MEMBERED,FDIFF_1,FUNCT_2,NAT_1,NUMBERS,XBOOLE_0,XXREAL_0,FINSEQ_1,VALUED_0,VALUED_1,ORDINAL1,SEQ_4;
constructors REAL_1,SEQ_2,PARTFUN1,RFUNCT_2,COMPLEX1,RCOMP_1,FDIFF_1,SEQ_1,NAT_1,FCONT_1,PDIFF_1,BHSP_3,VFUNCT_1,SEQM_3,RELSET_1,BINOP_2,RVSUM_1,CKB3,CKB18,CKB19,CKB22,CKB23;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve x for Real;
reserve x0 for Real;
reserve y for Real;
reserve r for Real;
reserve s for Real;
reserve p1 for Real;
reserve z0 for (Element of ( REAL 2 ));
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve s1 for Real_Sequence;
reserve f for (PartFunc of ( REAL 2 ),( REAL ));
reserve R for REST;
reserve L for LINEAR;
theorem
(for z0 being (Element of ( REAL 2 )) holds (for N being (Neighbourhood of ( ( proj (1,2) ) . z0 )) holds ((f is_partial_differentiable_in z0,1 & N c= ( dom ( SVF1 (1,f,z0) ) )) implies (for h being  convergent_to_0 Real_Sequence holds (for c being  constant Real_Sequence holds ((( rng c ) = { ( ( proj (1,2) ) . z0 ) } & ( rng ( h + c ) ) c= N) implies (( ( h " ) (#) ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) ) is  convergent & ( partdiff (f,z0,1) ) = ( lim ( ( h " ) (#) ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) ) ))))))))
proof
let z0 being (Element of ( REAL 2 ));
let N being (Neighbourhood of ( ( proj (1,2) ) . z0 ));
assume that
A1: f is_partial_differentiable_in z0,1
and
A2: N c= ( dom ( SVF1 (1,f,z0) ) );
consider x0,y0 being Real such that A3: z0 = <* x0,y0 *> and A4: (ex N1 being (Neighbourhood of x0) st (N1 c= ( dom ( SVF1 (1,f,z0) ) ) & (ex L st (ex R st (for x holds (x in N1 implies ( ( ( SVF1 (1,f,z0) ) . x ) - ( ( SVF1 (1,f,z0) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))))) by A1,CKB10:1;
consider N1 being (Neighbourhood of x0) such that N1 c= ( dom ( SVF1 (1,f,z0) ) ) and A5: (ex L st (ex R st (for x holds (x in N1 implies ( ( ( SVF1 (1,f,z0) ) . x ) - ( ( SVF1 (1,f,z0) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))))) by A4;
A6: ( ( proj (1,2) ) . z0 ) = x0 by A3,CKB1:1;
then consider N2 being (Neighbourhood of x0) such that A7: N2 c= N and A8: N2 c= N1 by RCOMP_1:17;
A9: N2 c= ( dom ( SVF1 (1,f,z0) ) ) by A2,A7,XBOOLE_1:1;
let h being  convergent_to_0 Real_Sequence;
let c being  constant Real_Sequence;
assume that
A10: ( rng c ) = { ( ( proj (1,2) ) . z0 ) }
and
A11: ( rng ( h + c ) ) c= N;
consider g being  real number such that A12: ( 0 ) < g and A13: N2 = ]. ( x0 - g ),( x0 + g ) .[ by RCOMP_1:def 6;
(( x0 + ( 0 ) ) < ( x0 + g ) & ( x0 - g ) < ( x0 - ( 0 ) )) by A12,XREAL_1:8,XREAL_1:44;
then A14: x0 in N2 by A13;
A15: ( rng c ) c= ( dom ( SVF1 (1,f,z0) ) )
proof
let y being set;
assume y in ( rng c );
then y = x0 by A10,A6,TARSKI:def 1;
then y in N by A7,A14;
hence thesis by A2;
end;
(ex n st (( rng ( c ^\ n ) ) c= N2 & ( rng ( ( h + c ) ^\ n ) ) c= N2))
proof
x0 in ( rng c ) by A10,A6,TARSKI:def 1;
then A16: ( lim c ) = x0 by SEQ_4:25;
A17: h is  convergent by FDIFF_1:def 1;
then A18: ( h + c ) is  convergent by SEQ_2:5;
( lim h ) = ( 0 ) by FDIFF_1:def 1;
then ( lim ( h + c ) ) = ( ( 0 ) + x0 ) by A16,A17,SEQ_2:6
.= x0;
then consider n such that A19: (for m being (Element of ( NAT )) holds (n <= m implies ( abs ( ( ( h + c ) . m ) - x0 ) ) < g)) by A12,A18,SEQ_2:def 7;
take n;
A20: ( rng ( c ^\ n ) ) = { x0 } by A10,A6,VALUED_0:26;
thus ( rng ( c ^\ n ) ) c= N2
proof
let y being set;
assume y in ( rng ( c ^\ n ) );
hence thesis by A14,A20,TARSKI:def 1;
end;

let y being set;
assume y in ( rng ( ( h + c ) ^\ n ) );
then consider m such that A21: y = ( ( ( h + c ) ^\ n ) . m ) by FUNCT_2:113;
( n + ( 0 ) ) <= ( n + m ) by XREAL_1:7;
then A22: ( abs ( ( ( h + c ) . ( n + m ) ) - x0 ) ) < g by A19;
then ( ( ( h + c ) . ( m + n ) ) - x0 ) < g by SEQ_2:1;
then ( ( ( ( h + c ) ^\ n ) . m ) - x0 ) < g by NAT_1:def 3;
then A23: ( ( ( h + c ) ^\ n ) . m ) < ( x0 + g ) by XREAL_1:19;
( - g ) < ( ( ( h + c ) . ( m + n ) ) - x0 ) by A22,SEQ_2:1;
then ( - g ) < ( ( ( ( h + c ) ^\ n ) . m ) - x0 ) by NAT_1:def 3;
then ( x0 + ( - g ) ) < ( ( ( h + c ) ^\ n ) . m ) by XREAL_1:20;
hence thesis by A13,A21,A23;
end;
then consider n such that ( rng ( c ^\ n ) ) c= N2 and A24: ( rng ( ( h + c ) ^\ n ) ) c= N2;
consider L,R such that A25: (for x holds (x in N1 implies ( ( ( SVF1 (1,f,z0) ) . x ) - ( ( SVF1 (1,f,z0) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))) by A5;
A26: ( rng ( c ^\ n ) ) c= ( dom ( SVF1 (1,f,z0) ) )
proof
let y being set;
assume A27: y in ( rng ( c ^\ n ) );
( rng ( c ^\ n ) ) = ( rng c ) by VALUED_0:26;
then y = x0 by A10,A6,A27,TARSKI:def 1;
then y in N by A7,A14;
hence thesis by A2;
end;
A28: L is  total by FDIFF_1:def 3;
A29: (( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) is  convergent & ( lim ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) ) = ( L . 1 ))
proof
deffunc F((Element of ( NAT ))) = ( ( L . 1 ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . $1 ) );
consider s1 such that A30: (for k holds ( s1 . k ) = F(k)) from SEQ_1:sch 1;
A31:now
A32: (( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) is  convergent & ( lim ( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) ) = ( 0 )) by FDIFF_1:def 2;
let r being  real number;
assume ( 0 ) < r;
then consider m such that A33: (for k holds (m <= k implies ( abs ( ( ( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) . k ) - ( 0 ) ) ) < r)) by A32,SEQ_2:def 7;
take n1 = m;
let k;
assume that
A34: n1 <= k;
( abs ( ( s1 . k ) - ( L . 1 ) ) ) = ( abs ( ( ( L . 1 ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . k ) ) - ( L . 1 ) ) ) by A30
.= ( abs ( ( ( ( ( h ^\ n ) " ) (#) ( R /* ( h ^\ n ) ) ) . k ) - ( 0 ) ) );
hence ( abs ( ( s1 . k ) - ( L . 1 ) ) ) < r by A33,A34;
end;
consider s such that A35: (for p1 holds ( L . p1 ) = ( s * p1 )) by FDIFF_1:def 3;
A36: ( L . 1 ) = ( s * 1 ) by A35
.= s;
now
let m;
( h ^\ n ) is  non-zero by FDIFF_1:def 1;
then A37: ( ( h ^\ n ) . m ) <> ( 0 ) by SEQ_1:5;
thus ( ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) . m ) = ( ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) by SEQ_1:8
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) + ( ( R /* ( h ^\ n ) ) . m ) ) * ( ( ( h ^\ n ) " ) . m ) ) by SEQ_1:7
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) + ( ( ( R /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) )
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) " ) . m ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by SEQ_1:8
.= ( ( ( ( L /* ( h ^\ n ) ) . m ) * ( ( ( h ^\ n ) . m ) " ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by VALUED_1:10
.= ( ( ( L . ( ( h ^\ n ) . m ) ) * ( ( ( h ^\ n ) . m ) " ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by A28,FUNCT_2:115
.= ( ( ( s * ( ( h ^\ n ) . m ) ) * ( ( ( h ^\ n ) . m ) " ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by A35
.= ( ( s * ( ( ( h ^\ n ) . m ) * ( ( ( h ^\ n ) . m ) " ) ) ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) )
.= ( ( s * 1 ) + ( ( ( R /* ( h ^\ n ) ) (#) ( ( h ^\ n ) " ) ) . m ) ) by A37,XCMPLX_0:def 7
.= ( s1 . m ) by A30,A36;
end;
then A38: ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) = s1 by FUNCT_2:63;
hence ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) is  convergent by A31,SEQ_2:def 6;
hence thesis by A38,A31,SEQ_2:def 7;
end;
A39: ( rng ( ( h + c ) ^\ n ) ) c= ( dom ( SVF1 (1,f,z0) ) )
proof
let y being set;
assume y in ( rng ( ( h + c ) ^\ n ) );
then y in N2 by A24;
then y in N by A7;
hence thesis by A2;
end;
A40: ( rng ( h + c ) ) c= ( dom ( SVF1 (1,f,z0) ) )
proof
let y being set;
assume y in ( rng ( h + c ) );
then y in N by A11;
hence thesis by A2;
end;
A41: (for k holds ( ( ( SVF1 (1,f,z0) ) . ( ( ( h + c ) ^\ n ) . k ) ) - ( ( SVF1 (1,f,z0) ) . ( ( c ^\ n ) . k ) ) ) = ( ( L . ( ( h ^\ n ) . k ) ) + ( R . ( ( h ^\ n ) . k ) ) ))
proof
let k;
( ( ( h + c ) ^\ n ) . k ) in ( rng ( ( h + c ) ^\ n ) ) by VALUED_0:28;
then A42: ( ( ( h + c ) ^\ n ) . k ) in N2 by A24;
(( ( c ^\ n ) . k ) in ( rng ( c ^\ n ) ) & ( rng ( c ^\ n ) ) = ( rng c )) by VALUED_0:26,VALUED_0:28;
then A43: ( ( c ^\ n ) . k ) = x0 by A10,A6,TARSKI:def 1;
( ( ( ( h + c ) ^\ n ) . k ) - ( ( c ^\ n ) . k ) ) = ( ( ( ( h ^\ n ) + ( c ^\ n ) ) . k ) - ( ( c ^\ n ) . k ) ) by SEQM_3:15
.= ( ( ( ( h ^\ n ) . k ) + ( ( c ^\ n ) . k ) ) - ( ( c ^\ n ) . k ) ) by SEQ_1:7
.= ( ( h ^\ n ) . k );
hence thesis by A25,A8,A42,A43;
end;
A44: R is  total by FDIFF_1:def 2;
now
let k;
thus ( ( ( ( SVF1 (1,f,z0) ) /* ( ( h + c ) ^\ n ) ) - ( ( SVF1 (1,f,z0) ) /* ( c ^\ n ) ) ) . k ) = ( ( ( ( SVF1 (1,f,z0) ) /* ( ( h + c ) ^\ n ) ) . k ) - ( ( ( SVF1 (1,f,z0) ) /* ( c ^\ n ) ) . k ) ) by RFUNCT_2:1
.= ( ( ( SVF1 (1,f,z0) ) . ( ( ( h + c ) ^\ n ) . k ) ) - ( ( ( SVF1 (1,f,z0) ) /* ( c ^\ n ) ) . k ) ) by A39,FUNCT_2:108
.= ( ( ( SVF1 (1,f,z0) ) . ( ( ( h + c ) ^\ n ) . k ) ) - ( ( SVF1 (1,f,z0) ) . ( ( c ^\ n ) . k ) ) ) by A26,FUNCT_2:108
.= ( ( L . ( ( h ^\ n ) . k ) ) + ( R . ( ( h ^\ n ) . k ) ) ) by A41
.= ( ( ( L /* ( h ^\ n ) ) . k ) + ( R . ( ( h ^\ n ) . k ) ) ) by A28,FUNCT_2:115
.= ( ( ( L /* ( h ^\ n ) ) . k ) + ( ( R /* ( h ^\ n ) ) . k ) ) by A44,FUNCT_2:115
.= ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) . k ) by SEQ_1:7;
end;
then ( ( ( SVF1 (1,f,z0) ) /* ( ( h + c ) ^\ n ) ) - ( ( SVF1 (1,f,z0) ) /* ( c ^\ n ) ) ) = ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) by FUNCT_2:63;
then A45: ( ( ( L /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) = ( ( ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) ^\ n ) - ( ( SVF1 (1,f,z0) ) /* ( c ^\ n ) ) ) (#) ( ( h ^\ n ) " ) ) by A40,VALUED_0:27
.= ( ( ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) ^\ n ) - ( ( ( SVF1 (1,f,z0) ) /* c ) ^\ n ) ) (#) ( ( h ^\ n ) " ) ) by A15,VALUED_0:27
.= ( ( ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) ^\ n ) (#) ( ( h ^\ n ) " ) ) by SEQM_3:17
.= ( ( ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) ^\ n ) (#) ( ( h " ) ^\ n ) ) by SEQM_3:18
.= ( ( ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) (#) ( h " ) ) ^\ n ) by SEQM_3:19;
then A46: ( L . 1 ) = ( lim ( ( h " ) (#) ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) ) ) by A29,SEQ_4:22;
thus ( ( h " ) (#) ( ( ( SVF1 (1,f,z0) ) /* ( h + c ) ) - ( ( SVF1 (1,f,z0) ) /* c ) ) ) is  convergent by A29,A45,SEQ_4:21;
(for x holds (x in N2 implies ( ( ( SVF1 (1,f,z0) ) . x ) - ( ( SVF1 (1,f,z0) ) . x0 ) ) = ( ( L . ( x - x0 ) ) + ( R . ( x - x0 ) ) ))) by A25,A8;
hence thesis by A1,A3,A9,A46,CKB14:1;
end;
