environ
vocabularies NUMBERS,SUBSET_1,PARTFUN1,REAL_1,CFUNCT_1,SEQ_1,COMSEQ_1,SEQ_2,CARD_1,FUNCT_1,COMPLEX1,RELAT_1,NAT_1,XREAL_0,ORDINAL1,ORDINAL2,ARYTM_3,XXREAL_0,ARYTM_1,FDIFF_1,VALUED_0,XCMPLX_0,VALUED_1,FINSEQ_1,PDIFF_1,AFINSQ_1,CARD_3,RCOMP_1,TARSKI,CFDIFF_1,FUNCT_2,XXREAL_1,PRE_TOPC,REAL_NS1,BINOP_2,NORMSP_1,EUCLID,MCART_1,RVSUM_1,SQUARE_1,SUPINF_2,STRUCT_0,LOPBAN_1;
notations TARSKI,SUBSET_1,RELAT_1,FUNCT_1,FUNCT_2,RELSET_1,PARTFUN1,BINOP_1,BINOP_2,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,VALUED_1,SEQ_1,SEQ_2,RLVECT_1,COMSEQ_1,COMSEQ_2,COMSEQ_3,CFUNCT_1,PRE_TOPC,STRUCT_0,RVSUM_1,FINSEQ_1,FINSEQ_2,FINSEQ_7,SQUARE_1,RCOMP_1,EUCLID,NORMSP_0,NORMSP_1,REAL_NS1,LOPBAN_1,NFCONT_1,FDIFF_1,NDIFF_1,PDIFF_1,CFDIFF_1;
definitions LOPBAN_1,EUCLID,COMPLEX1,PCOMPS_1,PDIFF_1,VALUED_0,VALUED_1,RVSUM_1,XCMPLX_0,NAT_1,ORDINAL1;
theorems TARSKI,ABSVALUE,XBOOLE_1,XREAL_0,EUCLID,XREAL_1,XXREAL_0,RCOMP_1,RLVECT_1,SEQ_4,COMPLEX1,SEQ_1,SEQ_2,FINSEQ_1,XCMPLX_1,VALUED_1,BINOP_2,FINSEQ_2,FINSEQ_7,RVSUM_1,RELAT_1,FUNCT_1,FUNCT_2,NORMSP_1,LOPBAN_1,PARTFUN1,NFCONT_1,FDIFF_1,NDIFF_1,REAL_NS1,NUMBERS,FUNCT_3,SQUARE_1,CFUNCT_1,CFDIFF_1,PDIFF_1,XCMPLX_0,COMSEQ_1,COMSEQ_2,COMSEQ_3,JGRAPH_1,VALUED_0,ORDINAL1,GRCAT_1,NORMSP_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26;
schemes SEQ_1,FUNCT_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,MEMBERED,NUMBERS,XBOOLE_0,XREAL_0,XXREAL_0,XCMPLX_0,FUNCT_2,REAL_NS1,COMSEQ_3,VALUED_0,VALUED_1,SEQ_4,FDIFF_1,CFDIFF_1,FINSEQ_2,CARD_1;
constructors REAL_1,SQUARE_1,RSSPACE3,PARTFUN1,PCOMPS_1,SEQ_1,SEQ_2,BINOP_2,FINSEQ_7,REVROT_1,NFCONT_1,RCOMP_1,FDIFF_1,NDIFF_1,PDIFF_1,CFDIFF_1,COMSEQ_2,COMSEQ_3,RVSUM_1,RELSET_1;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve z for Complex;
theorem
Th5: (for u being (PartFunc of ( REAL 2 ),( REAL )) holds (for x0,y0 being Real holds (for xy0 being (Element of ( REAL 2 )) holds ((xy0 = <* x0,y0 *> & ( <>* u ) is_differentiable_in xy0) implies (((u is_partial_differentiable_in xy0,1 & u is_partial_differentiable_in xy0,2) & <* ( partdiff (u,xy0,1) ) *> = ( ( diff (( <>* u ),xy0) ) . <* 1,( 0 ) *> )) & <* ( partdiff (u,xy0,2) ) *> = ( ( diff (( <>* u ),xy0) ) . <* ( 0 ),1 *> ))))))
proof
reconsider ey0 = <* ( 0 ),1 *> as (Point of ( REAL-NS 2 )) by CKB12:1;
reconsider ex0 = <* 1,( 0 ) *> as (Point of ( REAL-NS 2 )) by CKB12:1;
let u being (PartFunc of ( REAL 2 ),( REAL ));
let x0 being Real;
let y0 being Real;
let xy0 being (Element of ( REAL 2 ));
assume that
A1: xy0 = <* x0,y0 *>
and
A2: ( <>* u ) is_differentiable_in xy0;
set W = ( (( proj (1,1) ) qua Function) " );
consider g being (PartFunc of ( REAL-NS 2 ),( REAL-NS 1 )),gxy0 being (Point of ( REAL-NS 2 )) such that A3: ( <>* u ) = g and A4: xy0 = gxy0 and A5: g is_differentiable_in gxy0 by A2,PDIFF_1:def 7;
consider N being (Neighbourhood of gxy0) such that A6: N c= ( dom g ) and A7: (ex R being (REST of ( REAL-NS 2 ),( REAL-NS 1 )) st (for xy being (Point of ( REAL-NS 2 )) holds (xy in N implies ( ( g /. xy ) - ( g /. gxy0 ) ) = ( ( ( diff (g,gxy0) ) . ( xy - gxy0 ) ) + ( R /. ( xy - gxy0 ) ) )))) by A5,NDIFF_1:def 7;
consider R being (REST of ( REAL-NS 2 ),( REAL-NS 1 )) such that A8: (for xy being (Point of ( REAL-NS 2 )) holds (xy in N implies ( ( g /. xy ) - ( g /. gxy0 ) ) = ( ( ( diff (g,gxy0) ) . ( xy - gxy0 ) ) + ( R /. ( xy - gxy0 ) ) ))) by A7;
consider r0 being Real such that A9: ( 0 ) < r0 and A10: { xy where xy is (Point of ( REAL-NS 2 )): ||. ( xy - gxy0 ) .|| < r0 } c= N by NFCONT_1:def 1;
consider f being (PartFunc of ( REAL-NS 2 ),( REAL-NS 1 )),fxy0 being (Point of ( REAL-NS 2 )) such that A11: (( <>* u ) = f & xy0 = fxy0) and A12: ( diff (( <>* u ),xy0) ) = ( diff (f,fxy0) ) by A2,PDIFF_1:def 8;
( rng u ) c= ( dom W ) by PDIFF_1:2;
then A13: ( dom ( <>* u ) ) = ( dom u ) by RELAT_1:27;
A14: (for xy being (Element of ( REAL 2 )) holds (for L1,R1 being Real holds (for z being (Element of ( REAL 2 )) holds ((((xy in N & z = ( xy - xy0 )) & <* L1 *> = ( ( diff (( <>* u ),xy0) ) . z )) & <* R1 *> = ( R . z )) implies ( ( u . xy ) - ( u . xy0 ) ) = ( L1 + R1 )))))
proof
let xy being (Element of ( REAL 2 ));
let L1 being Real;
let R1 being Real;
let z being (Element of ( REAL 2 ));
assume that
A15: xy in N
and
A16: z = ( xy - xy0 )
and
A17: <* L1 *> = ( ( diff (( <>* u ),xy0) ) . z )
and
A18: <* R1 *> = ( R . z );
reconsider zxy = xy as (Point of ( REAL-NS 2 )) by REAL_NS1:def 4;
A19: ( zxy - gxy0 ) = z by A4,A16,REAL_NS1:5;
R is  total by NDIFF_1:def 5;
then ( dom R ) = (the carrier of ( REAL-NS 2 )) by PARTFUN1:def 2;
then ( R /. ( zxy - gxy0 ) ) = <* R1 *> by A18,A19,PARTFUN1:def 6;
then A20: ( ( ( diff (g,gxy0) ) . ( zxy - gxy0 ) ) + ( R /. ( zxy - gxy0 ) ) ) = <* ( L1 + R1 ) *> by A3,A4,A11,A12,A17,A19,CKB9:1;
A21: xy0 in N by A4,NFCONT_1:4;
then A22: ( g /. gxy0 ) = ( g . xy0 ) by A4,A6,PARTFUN1:def 6
.= ( ( <>* u ) /. xy0 ) by A3,A6,A21,PARTFUN1:def 6;
A23: ( g /. zxy ) = ( g . xy ) by A6,A15,PARTFUN1:def 6
.= ( ( <>* u ) /. xy ) by A3,A6,A15,PARTFUN1:def 6;
A24: ( ( g /. zxy ) - ( g /. gxy0 ) ) = ( ( ( diff (g,gxy0) ) . ( zxy - gxy0 ) ) + ( R /. ( zxy - gxy0 ) ) ) by A8,A15;
A25: ( ( <>* u ) /. xy0 ) = ( ( <>* u ) . xy0 ) by A3,A6,A21,PARTFUN1:def 6
.= <* ( u . xy0 ) *> by A3,A6,A13,A21,CKB15:1;
( ( <>* u ) /. xy ) = ( ( <>* u ) . xy ) by A3,A6,A15,PARTFUN1:def 6
.= <* ( u . xy ) *> by A3,A6,A13,A15,CKB15:1;
then ( ( g /. zxy ) - ( g /. gxy0 ) ) = ( <* ( u . xy ) *> - <* ( u . xy0 ) *> ) by A23,A22,A25,REAL_NS1:5
.= ( <* ( u . xy ) *> + <* ( - ( u . xy0 ) ) *> ) by RVSUM_1:20
.= <* ( ( u . xy ) - ( u . xy0 ) ) *> by RVSUM_1:13;
hence ( ( u . xy ) - ( u . xy0 ) ) = ( <* ( L1 + R1 ) *> . 1 ) by A24,A20,FINSEQ_1:def 8
.= ( L1 + R1 ) by FINSEQ_1:def 8;
end;
set Nx0 = ]. ( x0 - r0 ),( x0 + r0 ) .[;
reconsider Nx0 as (Neighbourhood of x0) by A9,RCOMP_1:def 6;
A26: (for x being Real holds (x in Nx0 implies <* x,y0 *> in N))
proof
let x being Real;
reconsider xy = <* x,y0 *> as (Point of ( REAL-NS 2 )) by CKB12:1;
reconsider xx = <* ( x - x0 ),( 0 ) *> as (Element of ( REAL 2 )) by FINSEQ_2:101;
reconsider xx1 = xx as (Point of ( TOP-REAL 2 )) by EUCLID:22;
assume x in Nx0;
then A27: |. ( x - x0 ) .| < r0 by RCOMP_1:1;
( xx1 `2 ) = ( 0 ) by FINSEQ_1:44;
then A28: ( abs ( xx1 `2 ) ) = ( 0 ) by ABSVALUE:2;
( xy - gxy0 ) = <* ( x - x0 ),( y0 - y0 ) *> by A1,A4,CKB13:1
.= <* ( x - x0 ),( 0 ) *>;
then A29: ||. ( xy - gxy0 ) .|| = |. xx .| by REAL_NS1:1;
(( abs ( xx1 `1 ) ) = |. ( x - x0 ) .| & |. xx .| <= ( ( abs ( xx1 `1 ) ) + ( abs ( xx1 `2 ) ) )) by FINSEQ_1:44,JGRAPH_1:31;
then ||. ( xy - gxy0 ) .|| < r0 by A27,A28,A29,XXREAL_0:2;
then xy in { z where z is (Point of ( REAL-NS 2 )): ||. ( z - gxy0 ) .|| < r0 };
hence thesis by A10;
end;
now
let s being set;
assume s in ( ( reproj (1,xy0) ) .: Nx0 );
then consider x being (Element of ( REAL )) such that A30: x in Nx0 and A31: s = ( ( reproj (1,xy0) ) . x ) by FUNCT_2:65;
A32: <* x,y0 *> in N by A26,A30;
s = ( Replace (xy0,1,x) ) by A31,PDIFF_1:def 5
.= <* x,y0 *> by A1,FINSEQ_7:13;
hence s in ( dom u ) by A3,A6,A13,A32;
end;
then (( dom ( reproj (1,xy0) ) ) = ( REAL ) & ( ( reproj (1,xy0) ) .: Nx0 ) c= ( dom u )) by FUNCT_2:def 1,TARSKI:def 3;
then A33: Nx0 c= ( dom ( u * ( reproj (1,xy0) ) ) ) by FUNCT_3:3;
defpred P1[ (Element of ( REAL )),(Element of ( REAL )) ]
 means
(ex vx being (Element of ( REAL 2 )) st (vx = <* $1,( 0 ) *> & <* $2 *> = ( R . vx )));
A34:now
let x being (Element of ( REAL ));
reconsider vx = <* x,( 0 ) *> as (Element of ( REAL 2 )) by FINSEQ_2:101;
R is  total by NDIFF_1:def 5;
then A35: ( dom R ) = (the carrier of ( REAL-NS 2 )) by PARTFUN1:def 2;
vx is (Element of ( REAL-NS 2 )) by REAL_NS1:def 4;
then ( R . vx ) in (the carrier of ( REAL-NS 1 )) by A35,PARTFUN1:4;
then ( R . vx ) is (Element of ( REAL 1 )) by REAL_NS1:def 4;
then consider y being (Element of ( REAL )) such that A36: <* y *> = ( R . vx ) by FINSEQ_2:97;
take y;
thus P1[ x,y ] by A36;
end;
consider R1 being (Function of ( REAL ),( REAL )) such that A37: (for x being (Element of ( REAL )) holds P1[ x,( R1 . x ) ]) from FUNCT_2:sch 10(A34);
A38:now
let x being Real;
let vx being (Element of ( REAL 2 ));
assume A39: vx = <* x,( 0 ) *>;
(ex vx1 being (Element of ( REAL 2 )) st (vx1 = <* x,( 0 ) *> & <* ( R1 . x ) *> = ( R . vx1 ))) by A37;
hence <* ( R1 . x ) *> = ( R . vx ) by A39;
end;
(for h being  convergent_to_0 Real_Sequence holds (( ( h " ) (#) ( R1 /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R1 /* h ) ) ) = ( 0 )))
proof
let h being  convergent_to_0 Real_Sequence;
defpred H1[ (Element of ( NAT )),(Element of ( REAL-NS 2 )) ]
 means
$2 = <* ( h . $1 ),( 0 ) *>;
A40:now
let n being (Element of ( NAT ));
<* ( h . n ),( 0 ) *> in ( REAL 2 ) by FINSEQ_2:101;
then reconsider y = <* ( h . n ),( 0 ) *> as (Element of ( REAL-NS 2 )) by REAL_NS1:def 4;
take y;
thus H1[ n,y ];
end;
consider h1 being (Function of ( NAT ),( REAL-NS 2 )) such that A41: (for n being (Element of ( NAT )) holds H1[ n,( h1 . n ) ]) from FUNCT_2:sch 10(A40);
reconsider h1 as (sequence of ( REAL-NS 2 ));
now
let n being (Element of ( NAT ));
A42: ( h1 . n ) = <* ( h . n ),( 0 ) *> by A41;
thus ( ||. h1 .|| . n ) = ||. ( h1 . n ) .|| by NORMSP_0:def 4
.= ( abs ( h . n ) ) by A42,CKB23:1
.= ( ( abs h ) . n ) by VALUED_1:18;
end;
then A43: ||. h1 .|| = ( abs h ) by FUNCT_2:63;
set g = ( ( ||. h1 .|| " ) (#) ( R /* h1 ) );
now
let n being (Element of ( NAT ));
reconsider v = ( h1 . n ) as (Element of ( REAL 2 )) by REAL_NS1:def 4;
( dom R1 ) = ( REAL ) by PARTFUN1:def 2;
then A44: ( rng h ) c= ( dom R1 );
A45: ( h1 . n ) = <* ( h . n ),( 0 ) *> by A41;
R is  total by NDIFF_1:def 5;
then A46: ( dom R ) = (the carrier of ( REAL-NS 2 )) by PARTFUN1:def 2;
then A47: ( rng h1 ) c= ( dom R );
A48: ( h1 . n ) = <* ( h . n ),( 0 ) *> by A41;
A49: ( R /. ( h1 . n ) ) = ( R . v ) by A46,PARTFUN1:def 6
.= <* ( R1 . ( h . n ) ) *> by A38,A45;
thus ( ||. g .|| . n ) = ||. ( g . n ) .|| by NORMSP_0:def 4
.= ||. ( ( ( ||. h1 .|| " ) . n ) * ( ( R /* h1 ) . n ) ) .|| by NDIFF_1:def 2
.= ||. ( ( ( ||. h1 .|| . n ) " ) * ( ( R /* h1 ) . n ) ) .|| by VALUED_1:10
.= ||. ( ( ||. ( h1 . n ) .|| " ) * ( ( R /* h1 ) . n ) ) .|| by NORMSP_0:def 4
.= ||. ( ( ( abs ( h . n ) ) " ) * ( ( R /* h1 ) . n ) ) .|| by A48,CKB23:1
.= ||. ( ( ( abs ( h . n ) ) " ) * ( R /. ( h1 . n ) ) ) .|| by A47,FUNCT_2:109
.= ||. ( ( abs ( ( h . n ) " ) ) * ( R /. ( h1 . n ) ) ) .|| by COMPLEX1:66
.= ( ( abs ( abs ( ( h . n ) " ) ) ) * ||. ( R /. ( h1 . n ) ) .|| ) by NORMSP_1:def 1
.= ( ( abs ( ( h . n ) " ) ) * ( abs ( R1 . ( h . n ) ) ) ) by A49,CKB25:1
.= ( abs ( ( ( h . n ) " ) * ( R1 . ( h . n ) ) ) ) by COMPLEX1:65
.= ( abs ( ( ( h . n ) " ) * ( ( R1 /* h ) . n ) ) ) by A44,FUNCT_2:108
.= ( abs ( ( ( h " ) . n ) * ( ( R1 /* h ) . n ) ) ) by VALUED_1:10
.= ( abs ( ( ( h " ) (#) ( R1 /* h ) ) . n ) ) by VALUED_1:5
.= ( ( abs ( ( h " ) (#) ( R1 /* h ) ) ) . n ) by VALUED_1:18;
end;
then A50: ( abs ( ( h " ) (#) ( R1 /* h ) ) ) = ||. g .|| by FUNCT_2:63;
now
let n being (Element of ( NAT ));
h is  non-zero by FDIFF_1:def 1;
then A51: ( h . n ) <> ( 0 ) by SEQ_1:5;
A52: ( h1 . n ) = <* ( h . n ),( 0 ) *> by A41;
now
assume ( h1 . n ) = ( 0. ( REAL-NS 2 ) );
then ( h1 . n ) = ( 0* 2 ) by REAL_NS1:def 4
.= <* ( 0 ),( 0 ) *> by EUCLID:54,EUCLID:70;
hence contradiction by A52,A51,FINSEQ_1:77;
end;
hence ( h1 . n ) <> ( 0. ( REAL-NS 2 ) );
end;
then A53: h1 is  non-zero by NDIFF_1:7;
(h is  convergent & ( lim h ) = ( 0 )) by FDIFF_1:def 1;
then (( abs h ) is  convergent & ( lim ( abs h ) ) = ( 0 )) by CKB21:1;
then (h1 is  convergent & ( lim h1 ) = ( 0. ( REAL-NS 2 ) )) by A43,CKB22:1;
then h1 is  convergent_to_0 by A53,NDIFF_1:def 4;
then (( ( ||. h1 .|| " ) (#) ( R /* h1 ) ) is  convergent & ( lim ( ( ||. h1 .|| " ) (#) ( R /* h1 ) ) ) = ( 0. ( REAL-NS 1 ) )) by NDIFF_1:def 5;
then (||. g .|| is  convergent & ( lim ||. g .|| ) = ( 0 )) by CKB22:1;
hence (( ( h " ) (#) ( R1 /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R1 /* h ) ) ) = ( 0 )) by A50,CKB21:1;
end;
then reconsider R1 as REST by FDIFF_1:def 2;
ex0 is (Element of ( REAL 2 )) by REAL_NS1:def 4;
then ( ( diff (( <>* u ),xy0) ) . ex0 ) is (Element of ( REAL 1 )) by FUNCT_2:5;
then consider Dux being Real such that A54: <* Dux *> = ( ( diff (( <>* u ),xy0) ) . ex0 ) by FINSEQ_2:97;
deffunc LDF1(Real) = ( Dux * $1 );
consider LD1 being (Function of ( REAL ),( REAL )) such that A55: (for x being Real holds ( LD1 . x ) = LDF1(x)) from FUNCT_2:sch 4;
set Ny0 = ]. ( y0 - r0 ),( y0 + r0 ) .[;
reconsider Ny0 as (Neighbourhood of y0) by A9,RCOMP_1:def 6;
A56: (for y being Real holds (y in Ny0 implies <* x0,y *> in N))
proof
let y being Real;
reconsider xy = <* x0,y *> as (Point of ( REAL-NS 2 )) by CKB12:1;
reconsider xx = <* ( 0 ),( y - y0 ) *> as (Element of ( REAL 2 )) by FINSEQ_2:101;
reconsider xx1 = xx as (Point of ( TOP-REAL 2 )) by EUCLID:22;
assume y in Ny0;
then A57: |. ( y - y0 ) .| < r0 by RCOMP_1:1;
( xx1 `1 ) = ( 0 ) by FINSEQ_1:44;
then A58: ( abs ( xx1 `1 ) ) = ( 0 ) by ABSVALUE:2;
|. xx .| <= ( ( abs ( xx1 `1 ) ) + ( abs ( xx1 `2 ) ) ) by JGRAPH_1:31;
then A59: |. xx .| <= |. ( y - y0 ) .| by A58,FINSEQ_1:44;
( xy - gxy0 ) = <* ( x0 - x0 ),( y - y0 ) *> by A1,A4,CKB13:1
.= <* ( 0 ),( y - y0 ) *>;
then ||. ( xy - gxy0 ) .|| = |. xx .| by REAL_NS1:1;
then ||. ( xy - gxy0 ) .|| < r0 by A57,A59,XXREAL_0:2;
then xy in { z where z is (Point of ( REAL-NS 2 )): ||. ( z - gxy0 ) .|| < r0 };
hence thesis by A10;
end;
now
let s being set;
assume s in ( ( reproj (2,xy0) ) .: Ny0 );
then consider y being (Element of ( REAL )) such that A60: y in Ny0 and A61: s = ( ( reproj (2,xy0) ) . y ) by FUNCT_2:65;
A62: <* x0,y *> in N by A56,A60;
s = ( Replace (xy0,2,y) ) by A61,PDIFF_1:def 5
.= <* x0,y *> by A1,FINSEQ_7:14;
hence s in ( dom u ) by A3,A6,A13,A62;
end;
then (( dom ( reproj (2,xy0) ) ) = ( REAL ) & ( ( reproj (2,xy0) ) .: Ny0 ) c= ( dom u )) by FUNCT_2:def 1,TARSKI:def 3;
then A63: Ny0 c= ( dom ( u * ( reproj (2,xy0) ) ) ) by FUNCT_3:3;
defpred P2[ (Element of ( REAL )),(Element of ( REAL )) ]
 means
(ex vy being (Element of ( REAL 2 )) st (vy = <* ( 0 ),$1 *> & <* $2 *> = ( R . vy )));
A64:now
let x being (Element of ( REAL ));
reconsider vx = <* ( 0 ),x *> as (Element of ( REAL 2 )) by FINSEQ_2:101;
R is  total by NDIFF_1:def 5;
then A65: ( dom R ) = (the carrier of ( REAL-NS 2 )) by PARTFUN1:def 2;
vx is (Element of ( REAL-NS 2 )) by REAL_NS1:def 4;
then ( R . vx ) in (the carrier of ( REAL-NS 1 )) by A65,PARTFUN1:4;
then ( R . vx ) is (Element of ( REAL 1 )) by REAL_NS1:def 4;
then consider y being (Element of ( REAL )) such that A66: <* y *> = ( R . vx ) by FINSEQ_2:97;
take y;
thus P2[ x,y ] by A66;
end;
consider R3 being (Function of ( REAL ),( REAL )) such that A67: (for x being (Element of ( REAL )) holds P2[ x,( R3 . x ) ]) from FUNCT_2:sch 10(A64);
A68:now
let y being Real;
let vy being (Element of ( REAL 2 ));
assume A69: vy = <* ( 0 ),y *>;
(ex vy1 being (Element of ( REAL 2 )) st (vy1 = <* ( 0 ),y *> & <* ( R3 . y ) *> = ( R . vy1 ))) by A67;
hence <* ( R3 . y ) *> = ( R . vy ) by A69;
end;
(for h being  convergent_to_0 Real_Sequence holds (( ( h " ) (#) ( R3 /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R3 /* h ) ) ) = ( 0 )))
proof
let h being  convergent_to_0 Real_Sequence;
defpred H1[ (Element of ( NAT )),(Element of ( REAL-NS 2 )) ]
 means
$2 = <* ( 0 ),( h . $1 ) *>;
A70:now
let n being (Element of ( NAT ));
<* ( 0 ),( h . n ) *> in ( REAL 2 ) by FINSEQ_2:101;
then reconsider y = <* ( 0 ),( h . n ) *> as (Element of ( REAL-NS 2 )) by REAL_NS1:def 4;
take y;
thus H1[ n,y ];
end;
consider h1 being (Function of ( NAT ),( REAL-NS 2 )) such that A71: (for n being (Element of ( NAT )) holds H1[ n,( h1 . n ) ]) from FUNCT_2:sch 10(A70);
reconsider h1 as (sequence of ( REAL-NS 2 ));
now
let n being (Element of ( NAT ));
A72: ( h1 . n ) = <* ( 0 ),( h . n ) *> by A71;
thus ( ||. h1 .|| . n ) = ||. ( h1 . n ) .|| by NORMSP_0:def 4
.= ( abs ( h . n ) ) by A72,CKB24:1
.= ( ( abs h ) . n ) by VALUED_1:18;
end;
then A73: ||. h1 .|| = ( abs h ) by FUNCT_2:63;
set g = ( ( ||. h1 .|| " ) (#) ( R /* h1 ) );
now
let n being (Element of ( NAT ));
reconsider v = ( h1 . n ) as (Element of ( REAL 2 )) by REAL_NS1:def 4;
( dom R3 ) = ( REAL ) by PARTFUN1:def 2;
then A74: ( rng h ) c= ( dom R3 );
A75: ( h1 . n ) = <* ( 0 ),( h . n ) *> by A71;
R is  total by NDIFF_1:def 5;
then A76: ( dom R ) = (the carrier of ( REAL-NS 2 )) by PARTFUN1:def 2;
then A77: ( rng h1 ) c= ( dom R );
A78: ( h1 . n ) = <* ( 0 ),( h . n ) *> by A71;
A79: ( R /. ( h1 . n ) ) = ( R . v ) by A76,PARTFUN1:def 6
.= <* ( R3 . ( h . n ) ) *> by A68,A75;
thus ( ||. g .|| . n ) = ||. ( g . n ) .|| by NORMSP_0:def 4
.= ||. ( ( ( ||. h1 .|| " ) . n ) * ( ( R /* h1 ) . n ) ) .|| by NDIFF_1:def 2
.= ||. ( ( ( ||. h1 .|| . n ) " ) * ( ( R /* h1 ) . n ) ) .|| by VALUED_1:10
.= ||. ( ( ||. ( h1 . n ) .|| " ) * ( ( R /* h1 ) . n ) ) .|| by NORMSP_0:def 4
.= ||. ( ( ( abs ( h . n ) ) " ) * ( ( R /* h1 ) . n ) ) .|| by A78,CKB24:1
.= ||. ( ( ( abs ( h . n ) ) " ) * ( R /. ( h1 . n ) ) ) .|| by A77,FUNCT_2:109
.= ||. ( ( abs ( ( h . n ) " ) ) * ( R /. ( h1 . n ) ) ) .|| by COMPLEX1:66
.= ( ( abs ( abs ( ( h . n ) " ) ) ) * ||. ( R /. ( h1 . n ) ) .|| ) by NORMSP_1:def 1
.= ( ( abs ( ( h . n ) " ) ) * ( abs ( R3 . ( h . n ) ) ) ) by A79,CKB25:1
.= ( abs ( ( ( h . n ) " ) * ( R3 . ( h . n ) ) ) ) by COMPLEX1:65
.= ( abs ( ( ( h . n ) " ) * ( ( R3 /* h ) . n ) ) ) by A74,FUNCT_2:108
.= ( abs ( ( ( h " ) . n ) * ( ( R3 /* h ) . n ) ) ) by VALUED_1:10
.= ( abs ( ( ( h " ) (#) ( R3 /* h ) ) . n ) ) by VALUED_1:5
.= ( ( abs ( ( h " ) (#) ( R3 /* h ) ) ) . n ) by VALUED_1:18;
end;
then A80: ( abs ( ( h " ) (#) ( R3 /* h ) ) ) = ||. g .|| by FUNCT_2:63;
now
let n being (Element of ( NAT ));
h is  non-zero by FDIFF_1:def 1;
then A81: ( h . n ) <> ( 0 ) by SEQ_1:5;
A82: ( h1 . n ) = <* ( 0 ),( h . n ) *> by A71;
now
assume ( h1 . n ) = ( 0. ( REAL-NS 2 ) );
then ( h1 . n ) = ( 0* 2 ) by REAL_NS1:def 4
.= <* ( 0 ),( 0 ) *> by EUCLID:54,EUCLID:70;
hence contradiction by A82,A81,FINSEQ_1:77;
end;
hence ( h1 . n ) <> ( 0. ( REAL-NS 2 ) );
end;
then A83: h1 is  non-zero by NDIFF_1:7;
(h is  convergent & ( lim h ) = ( 0 )) by FDIFF_1:def 1;
then (( abs h ) is  convergent & ( lim ( abs h ) ) = ( 0 )) by CKB21:1;
then (h1 is  convergent & ( lim h1 ) = ( 0. ( REAL-NS 2 ) )) by A73,CKB22:1;
then h1 is  convergent_to_0 by A83,NDIFF_1:def 4;
then (( ( ||. h1 .|| " ) (#) ( R /* h1 ) ) is  convergent & ( lim ( ( ||. h1 .|| " ) (#) ( R /* h1 ) ) ) = ( 0. ( REAL-NS 1 ) )) by NDIFF_1:def 5;
then (||. g .|| is  convergent & ( lim ||. g .|| ) = ( 0 )) by CKB22:1;
hence (( ( h " ) (#) ( R3 /* h ) ) is  convergent & ( lim ( ( h " ) (#) ( R3 /* h ) ) ) = ( 0 )) by A80,CKB21:1;
end;
then reconsider R3 as REST by FDIFF_1:def 2;
ey0 is (Element of ( REAL 2 )) by REAL_NS1:def 4;
then ( ( diff (( <>* u ),xy0) ) . ey0 ) is (Element of ( REAL 1 )) by FUNCT_2:5;
then consider Duy being Real such that A84: <* Duy *> = ( ( diff (( <>* u ),xy0) ) . ey0 ) by FINSEQ_2:97;
deffunc LDF3(Real) = ( Duy * $1 );
consider LD3 being (Function of ( REAL ),( REAL )) such that A85: (for x being Real holds ( LD3 . x ) = LDF3(x)) from FUNCT_2:sch 4;
reconsider LD3 as LINEAR by A85,FDIFF_1:def 3;
A86: ( LD3 . 1 ) = ( Duy * 1 ) by A85
.= Duy;
A87: (for y being Real holds ( ( u * ( reproj (2,xy0) ) ) . y ) = ( u . <* x0,y *> ))
proof
let y being Real;
y in ( REAL );
then y in ( dom ( reproj (2,xy0) ) ) by PDIFF_1:def 5;
hence ( ( u * ( reproj (2,xy0) ) ) . y ) = ( u . ( ( reproj (2,xy0) ) . y ) ) by FUNCT_1:13
.= ( u . ( Replace (xy0,2,y) ) ) by PDIFF_1:def 5
.= ( u . <* x0,y *> ) by A1,FINSEQ_7:14;
end;
A88: (for y being Real holds (y in Ny0 implies ( ( ( u * ( reproj (2,xy0) ) ) . y ) - ( ( u * ( reproj (2,xy0) ) ) . y0 ) ) = ( ( LD3 . ( y - y0 ) ) + ( R3 . ( y - y0 ) ) )))
proof
ey0 is (Element of ( REAL 2 )) by REAL_NS1:def 4;
then reconsider D1 = ( ( diff (( <>* u ),xy0) ) . ey0 ) as (Element of ( REAL 1 )) by FUNCT_2:5;
let y being Real;
assume A89: y in Ny0;
reconsider xy = <* x0,y *> as (Element of ( REAL 2 )) by FINSEQ_2:101;
A90: ( LD3 . ( y - y0 ) ) = ( Duy * ( y - y0 ) ) by A85;
A91: ( xy - xy0 ) = <* ( x0 - x0 ),( y - y0 ) *> by A1,CKB10:1
.= <* ( ( y - y0 ) * ( 0 ) ),( ( y - y0 ) * 1 ) *>
.= ( ( y - y0 ) * ey0 ) by CKB14:1;
A92: ( diff (f,fxy0) ) is (LinearOperator of ( REAL-NS 2 ),( REAL-NS 1 )) by LOPBAN_1:def 9;
( ( y - y0 ) * D1 ) = ( ( y - y0 ) * ( ( diff (f,fxy0) ) . ey0 ) ) by A12,REAL_NS1:3
.= ( ( diff (( <>* u ),xy0) ) . ( xy - xy0 ) ) by A12,A91,A92,LOPBAN_1:def 5;
then A93: <* ( LD3 . ( y - y0 ) ) *> = ( ( diff (( <>* u ),xy0) ) . ( xy - xy0 ) ) by A84,A90,RVSUM_1:47;
<* ( 0 ),( y - y0 ) *> = <* ( x0 - x0 ),( y - y0 ) *>
.= ( xy - xy0 ) by A1,CKB10:1;
then A94: <* ( R3 . ( y - y0 ) ) *> = ( R . ( xy - xy0 ) ) by A68;
thus ( ( ( u * ( reproj (2,xy0) ) ) . y ) - ( ( u * ( reproj (2,xy0) ) ) . y0 ) ) = ( ( u . <* x0,y *> ) - ( ( u * ( reproj (2,xy0) ) ) . y0 ) ) by A87
.= ( ( u . xy ) - ( u . xy0 ) ) by A1,A87
.= ( ( LD3 . ( y - y0 ) ) + ( R3 . ( y - y0 ) ) ) by A14,A56,A89,A93,A94;
end;
reconsider LD1 as LINEAR by A55,FDIFF_1:def 3;
A95: ( LD1 . 1 ) = ( Dux * 1 ) by A55
.= Dux;
A96: (for x being Real holds ( ( u * ( reproj (1,xy0) ) ) . x ) = ( u . <* x,y0 *> ))
proof
let x being Real;
x in ( REAL );
then x in ( dom ( reproj (1,xy0) ) ) by PDIFF_1:def 5;
hence ( ( u * ( reproj (1,xy0) ) ) . x ) = ( u . ( ( reproj (1,xy0) ) . x ) ) by FUNCT_1:13
.= ( u . ( Replace (xy0,1,x) ) ) by PDIFF_1:def 5
.= ( u . <* x,y0 *> ) by A1,FINSEQ_7:13;
end;
A97: (for x being Real holds (x in Nx0 implies ( ( ( u * ( reproj (1,xy0) ) ) . x ) - ( ( u * ( reproj (1,xy0) ) ) . x0 ) ) = ( ( LD1 . ( x - x0 ) ) + ( R1 . ( x - x0 ) ) )))
proof
ex0 is (Element of ( REAL 2 )) by REAL_NS1:def 4;
then reconsider D1 = ( ( diff (( <>* u ),xy0) ) . ex0 ) as (Element of ( REAL 1 )) by FUNCT_2:5;
let x being Real;
assume A98: x in Nx0;
reconsider xy = <* x,y0 *> as (Element of ( REAL 2 )) by FINSEQ_2:101;
A99: ( LD1 . ( x - x0 ) ) = ( Dux * ( x - x0 ) ) by A55;
A100: ( xy - xy0 ) = <* ( x - x0 ),( y0 - y0 ) *> by A1,CKB10:1
.= <* ( ( x - x0 ) * 1 ),( ( x - x0 ) * ( 0 ) ) *>
.= ( ( x - x0 ) * ex0 ) by CKB14:1;
A101: ( diff (f,fxy0) ) is (LinearOperator of ( REAL-NS 2 ),( REAL-NS 1 )) by LOPBAN_1:def 9;
( ( x - x0 ) * D1 ) = ( ( x - x0 ) * ( ( diff (f,fxy0) ) . ex0 ) ) by A12,REAL_NS1:3
.= ( ( diff (( <>* u ),xy0) ) . ( xy - xy0 ) ) by A12,A100,A101,LOPBAN_1:def 5;
then A102: <* ( LD1 . ( x - x0 ) ) *> = ( ( diff (( <>* u ),xy0) ) . ( xy - xy0 ) ) by A54,A99,RVSUM_1:47;
<* ( x - x0 ),( 0 ) *> = <* ( x - x0 ),( y0 - y0 ) *>
.= ( xy - xy0 ) by A1,CKB10:1;
then A103: <* ( R1 . ( x - x0 ) ) *> = ( R . ( xy - xy0 ) ) by A38;
thus ( ( ( u * ( reproj (1,xy0) ) ) . x ) - ( ( u * ( reproj (1,xy0) ) ) . x0 ) ) = ( ( u . <* x,y0 *> ) - ( ( u * ( reproj (1,xy0) ) ) . x0 ) ) by A96
.= ( ( u . xy ) - ( u . xy0 ) ) by A1,A96
.= ( ( LD1 . ( x - x0 ) ) + ( R1 . ( x - x0 ) ) ) by A14,A26,A98,A102,A103;
end;
A104: ( ( proj (2,2) ) . xy0 ) = ( xy0 . 2 ) by PDIFF_1:def 1
.= y0 by A1,FINSEQ_1:44;
then A105: ( u * ( reproj (2,xy0) ) ) is_differentiable_in ( ( proj (2,2) ) . xy0 ) by A88,A63,FDIFF_1:def 4;
A106: ( ( proj (1,2) ) . xy0 ) = ( xy0 . 1 ) by PDIFF_1:def 1
.= x0 by A1,FINSEQ_1:44;
then ( u * ( reproj (1,xy0) ) ) is_differentiable_in ( ( proj (1,2) ) . xy0 ) by A97,A33,FDIFF_1:def 4;
hence thesis by A106,A104,A54,A84,A97,A88,A95,A33,A86,A63,A105,FDIFF_1:def 5,PDIFF_1:def 11;
end;
