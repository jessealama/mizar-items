environ
vocabularies FUNCT_1,COMPLEX1,RELAT_1,ZFMISC_1,XXREAL_0,PARTFUN1,ARYTM_1,XBOOLE_0,ORDINAL4,INT_1,SQUARE_1,ARYTM_3,RLVECT_1,SUPINF_2,RSSPACE,FUNCOP_1,FINSOP_1,NAT_1,FUNCT_4,BINOP_2,PROB_1,MEASURE6,MESFUNC1,TARSKI,MESFUNC5,IDEAL_1,SUBSET_1,RANDOM_1,RANDOM_2,C0SP1,FINSET_1,FINSEQ_1,ORDINAL2,RPR_1,CARD_1,SEQ_2,POWER,FUNCT_3,PROB_4,UPROOTS,FINSEQ_2,CARD_3,FUNCT_2,RFINSEQ,XREAL_0,FUNCSDOM,POLYALG1,BHSP_5,NUMBERS,REAL_1,INTEGRA5,VALUED_1,ORDINAL1,EQREL_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCT_4,FUNCOP_1,FINSEQ_1,ORDINAL1,REAL_1,NAT_1,CARD_1,FINSET_1,NUMBERS,XREAL_0,XXREAL_0,NAT_D,COMPLEX1,VALUED_1,RFINSEQ,FINSOP_1,STRUCT_0,ALGSTR_0,IDEAL_1,VECTSP_1,BINOP_1,BINOP_2,RLVECT_1,FUNCSDOM,SUPINF_2,SEQ_1,SEQ_2,SQUARE_1,GROUP_1,POWER,PROB_1,PROB_4,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC5,MESFUNC6,MESFUNC2,RVSUM_1,UPROOTS,MESFUN6C,C0SP1,RANDOM_1,BHSP_5,CKB9;
definitions TARSKI,BINOP_1,STRUCT_0,ALGSTR_0,RLVECT_1,MEASURE6,MESFUNC5,FINSEQ_2,FINSEQ_1,PROB_4,FUNCSDOM,VALUED_1,BHSP_5,RVSUM_1,SQUARE_1,CKB9;
theorems FUNCT_1,FUNCT_2,PARTFUN1,COMPLEX1,XBOOLE_0,TARSKI,RELAT_1,VALUED_1,IDEAL_1,ZFMISC_1,RLVECT_1,FUNCOP_1,XBOOLE_1,MESFUNC2,EXTREAL1,MEASURE1,MESFUNC6,PROB_1,XXREAL_0,ABSVALUE,MESFUNC7,RELSET_1,XXREAL_3,XREAL_0,RANDOM_1,C0SP1,FINSEQ_4,POWER,BINOP_2,RFINSEQ,CARD_2,FINSEQ_1,FUNCT_4,FINSOP_1,NAT_1,NAT_2,NAT_D,INT_3,XREAL_1,SQUARE_1,FINSEQ_2,INT_1,FUNCT_3,CARD_1,FINSEQ_3,FINSEQ_5,UPROOTS,MESFUN6C,FUNCSDOM,BHSP_5,RVSUM_1,FIB_NUM3,SUBSET,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24;
schemes FINSEQ_1,FUNCT_2,NAT_1,FUNCT_3;
registrations XBOOLE_0,ORDINAL1,NUMBERS,XREAL_0,MEMBERED,VALUED_0,NAT_1,SUBSET_1,XCMPLX_0,RLVECT_1,XXREAL_0,MEASURE1,FINSEQ_1,RELAT_1,XXREAL_3,C0SP1,FUNCT_2,CARD_1,FINSET_1,BINOP_2,FUNCT_1,UPROOTS,MESFUN6C,FUNCSDOM,BHSP_5,RELSET_1,CKB3,CKB4;
constructors EXTREAL1,REAL_1,IDEAL_1,MEASURE6,MESFUNC2,MESFUNC5,SEQ_2,MESFUNC6,SEQ_1,SUPINF_1,REALSET1,RVSUM_1,MESFUNC1,RELSET_1,RANDOM_1,C0SP1,RFINSEQ,POWER,FINSOP_1,BINARITH,FINSEQOP,SEQ_4,CONVFUN1,SEQFUNC,SETWISEO,FINSEQ_4,PARTFUN3,PROB_4,WELLORD2,SQUARE_1,NAT_D,UPROOTS,MESFUN6C,BHSP_5,CKB9;
requirements NUMERALS,BOOLE,SUBSET,REAL,ARITHM;
begin
theorem
Lm7: (for Omega1,Omega2 being non empty  finite set holds (for P1 being (Probability of ( Trivial-SigmaField Omega1 )) holds (for P2 being (Probability of ( Trivial-SigmaField Omega2 )) holds (for Q being (Function of [: Omega1,Omega2 :],( REAL )) holds (for P being (Function of ( bool [: Omega1,Omega2 :] ),( REAL )) holds (for Y1 being non empty  finite (Subset of Omega1) holds (for Y2 being non empty  finite (Subset of Omega2) holds (((for x,y being set holds ((x in Omega1 & y in Omega2) implies ( Q . (x,y) ) = ( ( P1 . { x } ) * ( P2 . { y } ) ))) & (for z being  finite (Subset of [: Omega1,Omega2 :]) holds ( P . z ) = ( setopfunc (z,[: Omega1,Omega2 :],( REAL ),Q,( addreal )) ))) implies ( P . [: Y1,Y2 :] ) = ( ( P1 . Y1 ) * ( P2 . Y2 ) )))))))))
proof
let Omega1 being non empty  finite set,Omega2 being non empty  finite set;
let P1 being (Probability of ( Trivial-SigmaField Omega1 ));
let P2 being (Probability of ( Trivial-SigmaField Omega2 ));
let Q being (Function of [: Omega1,Omega2 :],( REAL ));
let P being (Function of ( bool [: Omega1,Omega2 :] ),( REAL ));
let Y1 being non empty  finite (Subset of Omega1);
let Y2 being non empty  finite (Subset of Omega2);
assume A1: ((for x,y being set holds ((x in Omega1 & y in Omega2) implies ( Q . (x,y) ) = ( ( P1 . { x } ) * ( P2 . { y } ) ))) & (for z being  finite (Subset of [: Omega1,Omega2 :]) holds ( P . z ) = ( setopfunc (z,[: Omega1,Omega2 :],( REAL ),Q,( addreal )) )));
deffunc FF1(set) = ( P1 . { $1 } );
A2: (for x being set holds (x in Y1 implies FF1(x) in ( REAL )));
consider F1 being (Function of Y1,( REAL )) such that A3: (for x being set holds (x in Y1 implies ( F1 . x ) = FF1(x))) from FUNCT_2:sch 2(A2);
deffunc FF2(set) = ( P2 . { $1 } );
A4: (for x being set holds (x in Y2 implies FF2(x) in ( REAL )));
consider F2 being (Function of Y2,( REAL )) such that A5: (for x being set holds (x in Y2 implies ( F2 . x ) = FF2(x))) from FUNCT_2:sch 2(A4);
now
let x being set;
assume x in { ( {} ),1 };
then (x = ( 0 ) or x = 1) by TARSKI:def 2;
hence x in ( REAL );
end;
then A6: { ( {} ),1 } c= ( REAL ) by TARSKI:def 3;
A7: (( dom ( chi (Y1,Omega1) ) ) = Omega1 & ( rng ( chi (Y1,Omega1) ) ) c= { ( {} ),1 }) by FUNCT_3:39,FUNCT_3:def 3;
then ( chi (Y1,Omega1) ) is (Function of Omega1,{ ( {} ),1 }) by FUNCT_2:def 1,RELSET_1:4;
then reconsider f1 = ( chi (Y1,Omega1) ) as (Function of Omega1,( REAL )) by A6,FUNCT_2:7;
A8: ( dom ( f1 | Y1 ) ) = ( ( dom f1 ) /\ Y1 ) by RELAT_1:61
.= Y1 by A7,XBOOLE_1:28;
(for x being set holds (x in ( dom ( f1 | Y1 ) ) implies ( ( f1 | Y1 ) . x ) = 1))
proof
let x being set;
assume A9: x in ( dom ( f1 | Y1 ) );
then ( ( f1 | Y1 ) . x ) = ( f1 . x ) by FUNCT_1:47
.= 1 by A9,A8,FUNCT_3:def 3;
hence thesis;
end;
then A10: ( Integral (( P2M P1 ),( f1 | Y1 )) ) = ( ( R_EAL 1 ) * ( ( P2M P1 ) . ( dom ( f1 | Y1 ) ) ) ) by MESFUNC6:97
.= ( 1 * ( P1 . Y1 ) ) by A8,EXTREAL1:1
.= ( P1 . Y1 );
consider G1 being (FinSequence of ( REAL )),s1 being (FinSequence of Y1) such that A11: (((((( len G1 ) = ( card Y1 ) & s1 is  one-to-one) & ( rng s1 ) = Y1) & ( len s1 ) = ( card Y1 )) & (for n being Nat holds (n in ( dom G1 ) implies ( G1 . n ) = ( ( f1 . ( s1 . n ) ) * ( P1 . { ( s1 . n ) } ) )))) & ( Integral (( P2M P1 ),( f1 | Y1 )) ) = ( Sum G1 )) by CKB24:1;
Y1 c= Y1;
then reconsider YY1 = Y1 as  finite (Subset of Y1);
( dom F1 ) = Y1 by FUNCT_2:def 1;
then A12: ( dom ( F1 * s1 ) ) = ( dom s1 ) by A11,RELAT_1:27;
A13: ( dom G1 ) = ( Seg ( len s1 ) ) by A11,FINSEQ_1:def 3
.= ( dom s1 ) by FINSEQ_1:def 3;
now
let x being set;
assume A14: x in ( dom G1 );
then reconsider nx = x as (Element of ( NAT ));
A15: ( s1 . nx ) in Y1 by A11,A13,A14,FUNCT_1:3;
thus ( G1 . x ) = ( ( f1 . ( s1 . nx ) ) * ( P1 . { ( s1 . nx ) } ) ) by A11,A14
.= ( 1 * ( P1 . { ( s1 . nx ) } ) ) by A15,FUNCT_3:def 3
.= ( F1 . ( s1 . nx ) ) by A3,A11,A13,A14,FUNCT_1:3
.= ( ( F1 * s1 ) . x ) by A13,A14,FUNCT_1:13;
end;
then G1 = ( Func_Seq (F1,s1) ) by A12,A13,FUNCT_1:2;
then A16: ( setopfunc (YY1,Y1,( REAL ),F1,( addreal )) ) = ( Sum G1 ) by A11,CKB18:1;
A17: (( dom ( chi (Y2,Omega2) ) ) = Omega2 & ( rng ( chi (Y2,Omega2) ) ) c= { ( {} ),1 }) by FUNCT_3:39,FUNCT_3:def 3;
then ( chi (Y2,Omega2) ) is (Function of Omega2,{ ( {} ),1 }) by FUNCT_2:def 1,RELSET_1:4;
then reconsider f2 = ( chi (Y2,Omega2) ) as (Function of Omega2,( REAL )) by A6,FUNCT_2:7;
A18: ( dom ( f2 | Y2 ) ) = ( ( dom f2 ) /\ Y2 ) by RELAT_1:61
.= Y2 by A17,XBOOLE_1:28;
(for x being set holds (x in ( dom ( f2 | Y2 ) ) implies ( ( f2 | Y2 ) . x ) = 1))
proof
let x being set;
assume A19: x in ( dom ( f2 | Y2 ) );
then ( ( f2 | Y2 ) . x ) = ( f2 . x ) by FUNCT_1:47
.= 1 by A19,A18,FUNCT_3:def 3;
hence thesis;
end;
then A20: ( Integral (( P2M P2 ),( f2 | Y2 )) ) = ( ( R_EAL 1 ) * ( ( P2M P2 ) . Y2 ) ) by A18,MESFUNC6:97
.= ( 1 * ( P2 . Y2 ) ) by EXTREAL1:1
.= ( P2 . Y2 );
consider G2 being (FinSequence of ( REAL )),s2 being (FinSequence of Y2) such that A21: (((((( len G2 ) = ( card Y2 ) & s2 is  one-to-one) & ( rng s2 ) = Y2) & ( len s2 ) = ( card Y2 )) & (for n being Nat holds (n in ( dom G2 ) implies ( G2 . n ) = ( ( f2 . ( s2 . n ) ) * ( P2 . { ( s2 . n ) } ) )))) & ( Integral (( P2M P2 ),( f2 | Y2 )) ) = ( Sum G2 )) by CKB24:1;
Y2 c= Y2;
then reconsider YY2 = Y2 as  finite (Subset of Y2);
( dom F2 ) = Y2 by FUNCT_2:def 1;
then A22: ( dom ( F2 * s2 ) ) = ( dom s2 ) by A21,RELAT_1:27;
A23: ( dom G2 ) = ( Seg ( len s2 ) ) by A21,FINSEQ_1:def 3
.= ( dom s2 ) by FINSEQ_1:def 3;
now
let x being set;
assume A24: x in ( dom G2 );
then reconsider nx = x as (Element of ( NAT ));
A25: ( s2 . nx ) in Y2 by A21,A23,A24,FUNCT_1:3;
thus ( G2 . x ) = ( ( f2 . ( s2 . nx ) ) * ( P2 . { ( s2 . nx ) } ) ) by A21,A24
.= ( 1 * ( P2 . { ( s2 . nx ) } ) ) by A25,FUNCT_3:def 3
.= ( F2 . ( s2 . nx ) ) by A5,A21,A23,A24,FUNCT_1:3
.= ( ( F2 * s2 ) . x ) by A23,A24,FUNCT_1:13;
end;
then G2 = ( Func_Seq (F2,s2) ) by A22,A23,FUNCT_1:2;
then A26: ( setopfunc (YY2,Y2,( REAL ),F2,( addreal )) ) = ( Sum G2 ) by A21,CKB18:1;
reconsider Y3 = [: Y1,Y2 :] as  finite (Subset of [: Y1,Y2 :]) by ZFMISC_1:96;
reconsider Y33 = [: Y1,Y2 :] as  finite (Subset of [: Omega1,Omega2 :]) by ZFMISC_1:96;
A27: [: Y1,Y2 :] c= [: Omega1,Omega2 :] by ZFMISC_1:96;
then reconsider Q0 = ( Q | [: Y1,Y2 :] ) as (Function of [: Y1,Y2 :],( REAL )) by FUNCT_2:32;
A28:now
let x being set,y being set;
assume A29: (x in Y1 & y in Y2);
then [ x,y ] in [: Y1,Y2 :] by ZFMISC_1:def 2;
then [ x,y ] in ( dom Q0 ) by FUNCT_2:def 1;
hence ( Q0 . (x,y) ) = ( Q . (x,y) ) by FUNCT_1:47
.= ( ( P1 . { x } ) * ( P2 . { y } ) ) by A1,A29
.= ( ( F1 . x ) * ( P2 . { y } ) ) by A29,A3
.= ( ( F1 . x ) * ( F2 . y ) ) by A29,A5;
end;
Y3 c= ( dom Q0 ) by FUNCT_2:def 1;
then consider pp1 being (FinSequence of [: Y1,Y2 :]) such that A30: ((pp1 is  one-to-one & ( rng pp1 ) = Y3) & ( setopfunc (Y3,[: Y1,Y2 :],( REAL ),Q0,( addreal )) ) = ( ( addreal ) "**" ( Func_Seq (Q0,pp1) ) )) by BHSP_5:def 5;
A31: ( rng pp1 ) c= [: Omega1,Omega2 :] by A27,XBOOLE_1:1;
then reconsider pp2 = pp1 as (FinSequence of [: Omega1,Omega2 :]) by FINSEQ_1:def 4;
( rng pp1 ) c= ( dom Q ) by A31,FUNCT_2:def 1;
then A32: ( dom ( Q * pp1 ) ) = ( dom pp1 ) by RELAT_1:27;
A33: ( dom Q0 ) = [: Y1,Y2 :] by FUNCT_2:def 1;
(for x being set holds (x in ( dom ( Q0 * pp1 ) ) implies ( ( Q0 * pp1 ) . x ) = ( ( Q * pp1 ) . x )))
proof
let x being set;
assume x in ( dom ( Q0 * pp1 ) );
then A34: (( ( Q0 * pp1 ) . x ) = ( Q0 . ( pp1 . x ) ) & x in ( dom pp1 )) by FUNCT_1:11,FUNCT_1:12;
then ( pp1 . x ) in ( rng pp1 ) by FUNCT_1:3;
then ( Q0 . ( pp1 . x ) ) = ( Q . ( pp1 . x ) ) by FUNCT_1:49;
hence thesis by A34,FUNCT_1:13;
end;
then A35: ( Func_Seq (Q0,pp1) ) = ( Func_Seq (Q,pp2) ) by A33,A32,A31,FUNCT_1:2,RELAT_1:27;
( dom Q ) = [: Omega1,Omega2 :] by FUNCT_2:def 1;
then A36: ( setopfunc (Y3,[: Y1,Y2 :],( REAL ),Q0,( addreal )) ) = ( setopfunc (Y33,[: Omega1,Omega2 :],( REAL ),Q,( addreal )) ) by A30,A35,BHSP_5:def 5;
thus ( P . [: Y1,Y2 :] ) = ( setopfunc (Y33,[: Omega1,Omega2 :],( REAL ),Q,( addreal )) ) by A1
.= ( ( P1 . Y1 ) * ( P2 . Y2 ) ) by A20,A21,A10,A11,A26,A16,CKB21:1,A28,A36;
end;
