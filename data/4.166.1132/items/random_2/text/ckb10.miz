environ
vocabularies FUNCT_1,COMPLEX1,RELAT_1,ZFMISC_1,XXREAL_0,PARTFUN1,ARYTM_1,XBOOLE_0,ORDINAL4,INT_1,SQUARE_1,ARYTM_3,RLVECT_1,SUPINF_2,RSSPACE,FUNCOP_1,FINSOP_1,NAT_1,FUNCT_4,BINOP_2,PROB_1,MEASURE6,MESFUNC1,TARSKI,MESFUNC5,IDEAL_1,SUBSET_1,RANDOM_1,RANDOM_2,C0SP1,FINSET_1,FINSEQ_1,ORDINAL2,RPR_1,CARD_1,SEQ_2,POWER,FUNCT_3,PROB_4,UPROOTS,FINSEQ_2,CARD_3,FUNCT_2,RFINSEQ,XREAL_0,FUNCSDOM,POLYALG1,BHSP_5,NUMBERS,REAL_1,INTEGRA5,VALUED_1,ORDINAL1,EQREL_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCT_4,FUNCOP_1,FINSEQ_1,ORDINAL1,REAL_1,NAT_1,CARD_1,FINSET_1,NUMBERS,XREAL_0,XXREAL_0,NAT_D,COMPLEX1,VALUED_1,RFINSEQ,FINSOP_1,STRUCT_0,ALGSTR_0,IDEAL_1,VECTSP_1,BINOP_1,BINOP_2,RLVECT_1,FUNCSDOM,SUPINF_2,SEQ_1,SEQ_2,SQUARE_1,GROUP_1,POWER,PROB_1,PROB_4,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC5,MESFUNC6,MESFUNC2,RVSUM_1,UPROOTS,MESFUN6C,C0SP1,RANDOM_1,BHSP_5,CKB9;
definitions TARSKI,BINOP_1,STRUCT_0,ALGSTR_0,RLVECT_1,MEASURE6,MESFUNC5,FINSEQ_2,FINSEQ_1,PROB_4,FUNCSDOM,VALUED_1,BHSP_5,RVSUM_1,SQUARE_1,CKB9;
theorems FUNCT_1,FUNCT_2,PARTFUN1,COMPLEX1,XBOOLE_0,TARSKI,RELAT_1,VALUED_1,IDEAL_1,ZFMISC_1,RLVECT_1,FUNCOP_1,XBOOLE_1,MESFUNC2,EXTREAL1,MEASURE1,MESFUNC6,PROB_1,XXREAL_0,ABSVALUE,MESFUNC7,RELSET_1,XXREAL_3,XREAL_0,RANDOM_1,C0SP1,FINSEQ_4,POWER,BINOP_2,RFINSEQ,CARD_2,FINSEQ_1,FUNCT_4,FINSOP_1,NAT_1,NAT_2,NAT_D,INT_3,XREAL_1,SQUARE_1,FINSEQ_2,INT_1,FUNCT_3,CARD_1,FINSEQ_3,FINSEQ_5,UPROOTS,MESFUN6C,FUNCSDOM,BHSP_5,RVSUM_1,FIB_NUM3,SUBSET,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9;
schemes FINSEQ_1,FUNCT_2,NAT_1,FUNCT_3;
registrations XBOOLE_0,ORDINAL1,NUMBERS,XREAL_0,MEMBERED,VALUED_0,NAT_1,SUBSET_1,XCMPLX_0,RLVECT_1,XXREAL_0,MEASURE1,FINSEQ_1,RELAT_1,XXREAL_3,C0SP1,FUNCT_2,CARD_1,FINSET_1,BINOP_2,FUNCT_1,UPROOTS,MESFUN6C,FUNCSDOM,BHSP_5,RELSET_1,CKB3,CKB4;
constructors EXTREAL1,REAL_1,IDEAL_1,MEASURE6,MESFUNC2,MESFUNC5,SEQ_2,MESFUNC6,SEQ_1,SUPINF_1,REALSET1,RVSUM_1,MESFUNC1,RELSET_1,RANDOM_1,C0SP1,RFINSEQ,POWER,FINSOP_1,BINARITH,FINSEQOP,SEQ_4,CONVFUN1,SEQFUNC,SETWISEO,FINSEQ_4,PARTFUN3,PROB_4,WELLORD2,SQUARE_1,NAT_D,UPROOTS,MESFUN6C,BHSP_5,CKB9;
requirements NUMERALS,BOOLE,SUBSET,REAL,ARITHM;
begin
reserve Omega for non empty set;
reserve r for Real;
reserve Sigma for (SigmaField of Omega);
reserve P for (Probability of Sigma);
theorem
(for Omega holds (for Sigma holds (for P holds (for r holds (for X being (Real-Valued-Random-Variable of Sigma) holds ((((( 0 ) < r & X is  nonnegative) & X is_integrable_on P) & ( ( abs X ) to_power 2 ) is_integrable_on ( P2M P )) implies ( P . { t where t is (Element of Omega): r <= |. ( ( X . t ) - ( expect (X,P) ) ) .| } ) <= ( ( variance (X,P) ) / ( r to_power 2 ) )))))))
proof
let Omega;
let Sigma;
let P;
let r;
let X being (Real-Valued-Random-Variable of Sigma);
assume A1: (((( 0 ) < r & X is  nonnegative) & X is_integrable_on P) & ( ( abs X ) to_power 2 ) is_integrable_on ( P2M P ));
A2: { t where t is (Element of Omega): r <= |. ( ( X . t ) - ( expect (X,P) ) ) .| } c= { t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) }
proof
let s being set;
assume s in { t where t is (Element of Omega): r <= |. ( ( X . t ) - ( expect (X,P) ) ) .| };
then A3: (ex ss being (Element of Omega) st (s = ss & r <= |. ( ( X . ss ) - ( expect (X,P) ) ) .|));
A4: (( r ^2 ) = ( r to_power 2 ) & ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) ^2 ) = ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) to_power 2 )) by POWER:46;
( r ^2 ) <= ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) ^2 ) by A1,A3,SQUARE_1:15;
hence thesis by A3,A4;
end;
{ t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) } c= { t where t is (Element of Omega): r <= |. ( ( X . t ) - ( expect (X,P) ) ) .| }
proof
let s being set;
assume s in { t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) };
then A5: (ex ss being (Element of Omega) st (s = ss & ( r to_power 2 ) <= ( ( abs ( ( X . ss ) - ( expect (X,P) ) ) ) to_power 2 )));
A6: ( 0 ) <= ( abs ( ( X . s ) - ( expect (X,P) ) ) ) by COMPLEX1:46;
(( r ^2 ) = ( r to_power 2 ) & ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) ^2 ) = ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) to_power 2 )) by POWER:46;
then r <= ( abs ( ( X . s ) - ( expect (X,P) ) ) ) by A6,A5,SQUARE_1:47;
hence thesis by A5;
end;
then A7: { t where t is (Element of Omega): r <= |. ( ( X . t ) - ( expect (X,P) ) ) .| } = { t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) } by A2,XBOOLE_0:def 10;
consider Y being (Real-Valued-Random-Variable of Sigma),E being (Real-Valued-Random-Variable of Sigma) such that A8: ((((E = ( Omega --> ( expect (X,P) ) ) & Y = ( X - E )) & Y is_integrable_on P) & ( ( abs Y ) to_power 2 ) is_integrable_on ( P2M P )) & ( variance (X,P) ) = ( Integral (( P2M P ),( ( abs Y ) to_power 2 )) )) by CKB9:def 1,A1;
reconsider Z = ( ( abs Y ) to_power 2 ) as (Real-Valued-Random-Variable of Sigma) by RANDOM_1:23;
A9: Z is_integrable_on P by A8,RANDOM_1:def 3;
then A10: ( P . { t where t is (Element of Omega): ( r to_power 2 ) <= ( Z . t ) } ) <= ( ( expect (Z,P) ) / ( r to_power 2 ) ) by A1,POWER:34,RANDOM_1:36;
A11: ( expect (Z,P) ) = ( variance (X,P) ) by A8,A9,RANDOM_1:def 4;
A12: ( dom X ) = Omega by FUNCT_2:def 1;
A13: ( dom ( Omega --> ( expect (X,P) ) ) ) = Omega by FUNCOP_1:13;
A14: ( dom ( X - ( Omega --> ( expect (X,P) ) ) ) ) = ( ( dom X ) /\ ( dom ( Omega --> ( expect (X,P) ) ) ) ) by VALUED_1:12
.= Omega by A12,A13;
then A15: ( dom ( abs ( X - ( Omega --> ( expect (X,P) ) ) ) ) ) = Omega by VALUED_1:def 11;
then A16: ( dom ( ( abs ( X - ( Omega --> ( expect (X,P) ) ) ) ) to_power 2 ) ) = Omega by MESFUN6C:def 4;
A17: { t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) } c= { t where t is (Element of Omega): ( r to_power 2 ) <= ( Z . t ) }
proof
let s being set;
assume s in { t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) };
then A18: (ex ss being (Element of Omega) st (s = ss & ( r to_power 2 ) <= ( ( abs ( ( X . ss ) - ( expect (X,P) ) ) ) to_power 2 )));
then ( Z . s ) = ( ( ( abs ( X - ( Omega --> ( expect (X,P) ) ) ) ) . s ) to_power 2 ) by A16,A8,MESFUN6C:def 4
.= ( ( abs ( ( X - ( Omega --> ( expect (X,P) ) ) ) . s ) ) to_power 2 ) by A15,A18,VALUED_1:def 11
.= ( ( abs ( ( X . s ) - ( ( Omega --> ( expect (X,P) ) ) . s ) ) ) to_power 2 ) by A14,A18,VALUED_1:13
.= ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) to_power 2 ) by A18,FUNCOP_1:7;
hence thesis by A18;
end;
{ t where t is (Element of Omega): ( r to_power 2 ) <= ( Z . t ) } c= { t where t is (Element of Omega): ( r to_power 2 ) <= ( ( abs ( ( X . t ) - ( expect (X,P) ) ) ) to_power 2 ) }
proof
let s being set;
assume s in { t where t is (Element of Omega): ( r to_power 2 ) <= ( Z . t ) };
then A19: (ex ss being (Element of Omega) st (s = ss & ( r to_power 2 ) <= ( Z . ss )));
then ( Z . s ) = ( ( ( abs ( X - ( Omega --> ( expect (X,P) ) ) ) ) . s ) to_power 2 ) by A16,A8,MESFUN6C:def 4
.= ( ( abs ( ( X - ( Omega --> ( expect (X,P) ) ) ) . s ) ) to_power 2 ) by A15,A19,VALUED_1:def 11
.= ( ( abs ( ( X . s ) - ( ( Omega --> ( expect (X,P) ) ) . s ) ) ) to_power 2 ) by A14,A19,VALUED_1:13
.= ( ( abs ( ( X . s ) - ( expect (X,P) ) ) ) to_power 2 ) by A19,FUNCOP_1:7;
hence thesis by A19;
end;
hence thesis by A11,A10,A7,A17,XBOOLE_0:def 10;
end;
