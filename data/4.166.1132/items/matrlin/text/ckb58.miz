environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,MATRIX_1,FINSEQ_3,RELAT_1,FINSEQ_1,TARSKI,ARYTM_3,XXREAL_0,CARD_1,TREES_1,FUNCT_1,INCSP_1,ORDINAL4,SUBSET_1,VECTSP_1,RLVECT_2,RLVECT_3,CARD_3,ARYTM_1,SUPINF_2,RLVECT_5,FINSET_1,STRUCT_0,RLSUB_1,ALGSTR_0,PARTFUN1,RLVECT_1,ZFMISC_1,QC_LANG1,FUNCT_2,VALUED_1,PRE_POLY,FINSEQ_2,RVSUM_1,FINSEQ_4,FVSUM_1,MATRLIN,MSSUBFAM,UNIALG_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,MOD_2,FINSEQ_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCT_3,STRUCT_0,ALGSTR_0,MATRIX_1,MATRIX_3,FVSUM_1,RLVECT_1,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,FINSET_1,FINSEQ_3,FINSEQ_2,FINSEQOP,BINOP_1,XXREAL_0,PRE_POLY,GRCAT_1,CKB1,CKB6,CKB11,CKB13,CKB14,CKB15,CKB19,CKB21,CKB33,CKB34,CKB46,CKB53;
definitions TARSKI,FVSUM_1,FUNCOP_1,ALGSTR_0,PRE_POLY,CKB11,CKB13,CKB14,CKB15,CKB19,CKB21,CKB46,CKB53;
theorems TARSKI,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,RLVECT_1,FUNCT_1,FUNCT_2,FUNCT_3,MATRIX_1,MATRIX_2,MATRIX_3,MOD_2,ZFMISC_1,NAT_1,FVSUM_1,SUBSET_1,FINSEQOP,FUNCOP_1,RELAT_1,PARTFUN2,XBOOLE_0,XBOOLE_1,RLVECT_2,ORDINAL1,PARTFUN1,PRE_POLY,GRCAT_1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57;
schemes FINSEQ_1,FINSEQ_2,FUNCT_2,MATRIX_1,NAT_1,FINSEQ_4;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,VECTSP_1,MATRIX_1,CARD_1,VECTSP_7,MOD_2,GRCAT_1,PRE_POLY,RELAT_1,FUNCT_1,FINSEQ_4,CKB12,CKB32;
constructors PARTFUN1,BINOP_1,FUNCT_3,SQUARE_1,NAT_1,VECTSP_6,VECTSP_7,MOD_2,FVSUM_1,MATRIX_3,RELSET_1,PRE_POLY,GRCAT_1,CKB1,CKB6,CKB11,CKB13,CKB14,CKB15,CKB19,CKB21,CKB33,CKB34,CKB46,CKB53;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve k for Nat;
reserve i for Nat;
reserve j for Nat;
reserve K for Field;
reserve V1 for  finite-dimensional (VectSp of K);
reserve V2 for  finite-dimensional (VectSp of K);
reserve V3 for  finite-dimensional (VectSp of K);
reserve f for (Function of V1,V2);
reserve g for (Function of V2,V3);
reserve b1 for (OrdBasis of V1);
reserve b2 for (OrdBasis of V2);
reserve b3 for (OrdBasis of V3);
reserve p2 for (FinSequence of V1);
reserve p1 for (FinSequence of K);
reserve d for (FinSequence of K);
theorem
(((g is  additive  homogeneous & ( len b1 ) > ( 0 )) & ( len b2 ) > ( 0 )) implies ( AutMt (( g * f ),b1,b3) ) = ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ))
proof
assume A1: g is  additive  homogeneous;
assume that
A2: ( len b1 ) > ( 0 )
and
A3: ( len b2 ) > ( 0 );
A4: ( width ( AutMt (f,b1,b2) ) ) = ( len b2 ) by A2,CKB56:1
.= ( len ( AutMt (g,b2,b3) ) ) by CKB53:def 1;
A5: ( width ( AutMt (( g * f ),b1,b3) ) ) = ( len b3 ) by A2,CKB56:1
.= ( width ( AutMt (g,b2,b3) ) ) by A3,CKB56:1;
then A6: ( width ( AutMt (( g * f ),b1,b3) ) ) = ( width ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ) ) by A4,MATRIX_3:def 4;
A7: ( len ( AutMt (( g * f ),b1,b3) ) ) = ( len b1 ) by CKB53:def 1
.= ( len ( AutMt (f,b1,b2) ) ) by CKB53:def 1
.= ( len ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ) ) by A4,MATRIX_3:def 4;
then A8: ( dom ( AutMt (( g * f ),b1,b3) ) ) = ( dom ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ) ) by FINSEQ_3:29;
(for i holds (for j holds ([ i,j ] in ( Indices ( AutMt (( g * f ),b1,b3) ) ) implies ( ( AutMt (( g * f ),b1,b3) ) * (i,j) ) = ( ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ) * (i,j) ))))
proof
let i;
let j;
deffunc V(Nat) = ( ( ( g . ( b2 /. $1 ) ) |-- b3 ) /. j );
consider d being (FinSequence of K) such that A9: (( len d ) = ( len b2 ) & (for k being Nat holds (k in ( dom d ) implies ( d . k ) = V(k)))) from FINSEQ_2:sch 1;
assume A10: [ i,j ] in ( Indices ( AutMt (( g * f ),b1,b3) ) );
then A11: [ i,j ] in [: ( dom ( AutMt (( g * f ),b1,b3) ) ),( Seg ( width ( AutMt (( g * f ),b1,b3) ) ) ) :] by MATRIX_1:def 4;
then A12: j in ( Seg ( width ( AutMt (( g * f ),b1,b3) ) ) ) by ZFMISC_1:87;
A13: ( len ( Col (( AutMt (g,b2,b3) ),j) ) ) = ( len ( AutMt (g,b2,b3) ) ) by MATRIX_1:def 8
.= ( len d ) by A9,CKB53:def 1;
A14: ( dom d ) = ( Seg ( len b2 ) ) by A9,FINSEQ_1:def 3;
A15: [ i,j ] in ( Indices ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ) ) by A8,A6,A11,MATRIX_1:def 4;
A16: i in ( dom ( AutMt (( g * f ),b1,b3) ) ) by A11,ZFMISC_1:87;
A17: ( width ( AutMt (( g * f ),b1,b3) ) ) <> ( {} ) by A12;
( len b1 ) = ( len ( AutMt (( g * f ),b1,b3) ) ) by CKB53:def 1;
then ( len b1 ) > ( 0 ) by A17,MATRIX_1:def 3;
then A18: j in ( Seg ( len b3 ) ) by A12,CKB56:1;
then A19: j in ( dom b3 ) by FINSEQ_1:def 3;
A20:now
let k being Nat;
assume A21: (1 <= k & k <= ( len d ));
then A22: k in ( dom d ) by FINSEQ_3:25;
A23: k in ( dom b2 ) by A9,A21,FINSEQ_3:25;
A24: ( len ( AutMt (g,b2,b3) ) ) = ( len b2 ) by CKB53:def 1;
then A25: k in ( dom ( AutMt (g,b2,b3) ) ) by A9,A21,FINSEQ_3:25;
j in ( Seg ( width ( AutMt (g,b2,b3) ) ) ) by A5,A11,ZFMISC_1:87;
then [ k,j ] in [: ( dom ( AutMt (g,b2,b3) ) ),( Seg ( width ( AutMt (g,b2,b3) ) ) ) :] by A25,ZFMISC_1:87;
then [ k,j ] in ( Indices ( AutMt (g,b2,b3) ) ) by MATRIX_1:def 4;
then consider p2 being (FinSequence of K) such that A26: p2 = ( ( AutMt (g,b2,b3) ) . k ) and A27: ( ( AutMt (g,b2,b3) ) * (k,j) ) = ( p2 . j ) by MATRIX_1:def 5;
A28: p2 = ( ( AutMt (g,b2,b3) ) /. k ) by A25,A26,PARTFUN1:def 6
.= ( ( g . ( b2 /. k ) ) |-- b3 ) by A23,CKB53:def 1;
then j in ( Seg ( len p2 ) ) by A18,CKB46:def 1;
then A29: j in ( dom p2 ) by FINSEQ_1:def 3;
k in ( dom ( AutMt (g,b2,b3) ) ) by A9,A21,A24,FINSEQ_3:25;
hence ( ( Col (( AutMt (g,b2,b3) ),j) ) . k ) = ( p2 . j ) by A27,MATRIX_1:def 8
.= ( ( ( g . ( b2 /. k ) ) |-- b3 ) /. j ) by A28,A29,PARTFUN1:def 6
.= ( d . k ) by A9,A22;
end;
( b1 /. i ) in (the carrier of V1);
then A30: ( b1 /. i ) in ( dom f ) by FUNCT_2:def 1;
consider p1 being (FinSequence of K) such that A31: p1 = ( ( AutMt (( g * f ),b1,b3) ) . i ) and A32: ( ( AutMt (( g * f ),b1,b3) ) * (i,j) ) = ( p1 . j ) by A10,MATRIX_1:def 5;
A33: ( len ( ( f . ( b1 /. i ) ) |-- b2 ) ) = ( len b2 ) by CKB46:def 1;
A34: ( len ( AutMt (( g * f ),b1,b3) ) ) = ( len b1 ) by CKB53:def 1;
then A35: i in ( dom b1 ) by A16,FINSEQ_3:29;
A36: p1 = ( ( AutMt (( g * f ),b1,b3) ) /. i ) by A16,A31,PARTFUN1:def 6
.= ( ( ( g * f ) . ( b1 /. i ) ) |-- b3 ) by A35,CKB53:def 1;
( len ( AutMt (f,b1,b2) ) ) = ( len b1 ) by CKB53:def 1;
then A37: i in ( dom ( AutMt (f,b1,b2) ) ) by A16,A34,FINSEQ_3:29;
then A38: ( Line (( AutMt (f,b1,b2) ),i) ) = ( ( AutMt (f,b1,b2) ) . i ) by MATRIX_2:16
.= ( ( AutMt (f,b1,b2) ) /. i ) by A37,PARTFUN1:def 6
.= ( ( f . ( b1 /. i ) ) |-- b2 ) by A35,CKB53:def 1;
A39: ( Seg ( len b2 ) ) = ( dom b2 ) by FINSEQ_1:def 3;
j in ( Seg ( len ( ( ( g * f ) . ( b1 /. i ) ) |-- b3 ) ) ) by A18,CKB46:def 1;
then j in ( dom p1 ) by A36,FINSEQ_1:def 3;
hence ( ( AutMt (( g * f ),b1,b3) ) * (i,j) ) = ( ( ( ( g * f ) . ( b1 /. i ) ) |-- b3 ) /. j ) by A32,A36,PARTFUN1:def 6
.= ( ( ( g . ( f . ( b1 /. i ) ) ) |-- b3 ) /. j ) by A30,FUNCT_1:13
.= ( ( ( g . ( Sum ( lmlt (( ( f . ( b1 /. i ) ) |-- b2 ),b2) ) ) ) |-- b3 ) /. j ) by CKB49:1
.= ( ( ( Sum ( lmlt (( ( f . ( b1 /. i ) ) |-- b2 ),( g * b2 )) ) ) |-- b3 ) /. j ) by A1,A33,CKB27:1
.= ( Sum ( mlt (( ( f . ( b1 /. i ) ) |-- b2 ),d) ) ) by A3,A19,A9,A14,A39,A33,CKB52:1
.= ( ( Line (( AutMt (f,b1,b2) ),i) ) "*" ( Col (( AutMt (g,b2,b3) ),j) ) ) by A38,A13,A20,FINSEQ_1:14
.= ( ( ( AutMt (f,b1,b2) ) * ( AutMt (g,b2,b3) ) ) * (i,j) ) by A4,A15,MATRIX_3:def 4;
end;
hence thesis by A7,A6,MATRIX_1:21;
end;
