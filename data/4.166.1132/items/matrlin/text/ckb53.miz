environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,MATRIX_1,FINSEQ_3,RELAT_1,FINSEQ_1,TARSKI,ARYTM_3,XXREAL_0,CARD_1,TREES_1,FUNCT_1,INCSP_1,ORDINAL4,SUBSET_1,VECTSP_1,RLVECT_2,RLVECT_3,CARD_3,ARYTM_1,SUPINF_2,RLVECT_5,FINSET_1,STRUCT_0,RLSUB_1,ALGSTR_0,PARTFUN1,RLVECT_1,ZFMISC_1,QC_LANG1,FUNCT_2,VALUED_1,PRE_POLY,FINSEQ_2,RVSUM_1,FINSEQ_4,FVSUM_1,MATRLIN,MSSUBFAM,UNIALG_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,NAT_1,MOD_2,FINSEQ_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCT_3,STRUCT_0,ALGSTR_0,MATRIX_1,MATRIX_3,FVSUM_1,RLVECT_1,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,FINSET_1,FINSEQ_3,FINSEQ_2,FINSEQOP,BINOP_1,XXREAL_0,PRE_POLY,GRCAT_1,CKB1,CKB6,CKB11,CKB13,CKB14,CKB15,CKB19,CKB21,CKB33,CKB34,CKB46;
definitions TARSKI,FVSUM_1,FUNCOP_1,ALGSTR_0,PRE_POLY,CKB11,CKB13,CKB14,CKB15,CKB19,CKB21,CKB46;
theorems TARSKI,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,RLVECT_1,FUNCT_1,FUNCT_2,FUNCT_3,MATRIX_1,MATRIX_2,MATRIX_3,MOD_2,ZFMISC_1,NAT_1,FVSUM_1,SUBSET_1,FINSEQOP,FUNCOP_1,RELAT_1,PARTFUN2,XBOOLE_0,XBOOLE_1,RLVECT_2,ORDINAL1,PARTFUN1,PRE_POLY,GRCAT_1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52;
schemes FINSEQ_1,FINSEQ_2,FUNCT_2,MATRIX_1,NAT_1,FINSEQ_4;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,VECTSP_1,MATRIX_1,CARD_1,VECTSP_7,MOD_2,GRCAT_1,PRE_POLY,RELAT_1,FUNCT_1,FINSEQ_4,CKB12,CKB32;
constructors PARTFUN1,BINOP_1,FUNCT_3,SQUARE_1,NAT_1,VECTSP_6,VECTSP_7,MOD_2,FVSUM_1,MATRIX_3,RELSET_1,PRE_POLY,GRCAT_1,CKB1,CKB6,CKB11,CKB13,CKB14,CKB15,CKB19,CKB21,CKB33,CKB34,CKB46;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve k for Nat;
reserve n for Nat;
reserve x for set;
reserve y for set;
reserve K for Field;
reserve s for FinSequence;
reserve V1 for  finite-dimensional (VectSp of K);
reserve V2 for  finite-dimensional (VectSp of K);
reserve f for (Function of V1,V2);
reserve b1 for (OrdBasis of V1);
reserve b2 for (OrdBasis of V2);
definition
let K being Field;
let V1 being  finite-dimensional (VectSp of K);
let V2 being  finite-dimensional (VectSp of K);
let f being (Function of V1,V2);
let b1 being (FinSequence of V1);
let b2 being (OrdBasis of V2);
func AutMt (f,b1,b2) -> (Matrix of K) means 
:Def10: (( len it ) = ( len b1 ) & (for k holds (k in ( dom b1 ) implies ( it /. k ) = ( ( f . ( b1 /. k ) ) |-- b2 ))));
existence
proof
deffunc V(Nat) = ( ( f . ( b1 /. $1 ) ) |-- b2 );
consider M being FinSequence such that A1: ( len M ) = ( len b1 ) and A2: (for k being Nat holds (k in ( dom M ) implies ( M . k ) = V(k))) from FINSEQ_1:sch 2;
A3: ( dom M ) = ( Seg ( len b1 ) ) by A1,FINSEQ_1:def 3;
(ex n being Nat st (for x holds (x in ( rng M ) implies (ex s st (s = x & ( len s ) = n)))))
proof
take n = ( len ( ( f . ( b1 /. 1 ) ) |-- b2 ) );
let x being set;
assume x in ( rng M );
then consider y such that A4: y in ( dom M ) and A5: x = ( M . y ) by FUNCT_1:def 3;
reconsider y as Nat by A4,FINSEQ_3:23;
( M . y ) = ( ( f . ( b1 /. y ) ) |-- b2 ) by A2,A4;
then reconsider s = ( M . y ) as FinSequence;
take s;
thus s = x by A5;
thus ( len s ) = ( len ( ( f . ( b1 /. y ) ) |-- b2 ) ) by A2,A4
.= ( len b2 ) by CKB46:def 1
.= n by CKB46:def 1;
end;
then reconsider M as  tabular FinSequence by MATRIX_1:def 1;
now
let x;
assume x in ( rng M );
then consider y such that A6: y in ( dom M ) and A7: x = ( M . y ) by FUNCT_1:def 3;
reconsider y as Nat by A6,FINSEQ_3:23;
( M . y ) = ( ( f . ( b1 /. y ) ) |-- b2 ) by A2,A6;
then reconsider s = ( M . y ) as (FinSequence of K);
s = x by A7;
hence x in ( (the carrier of K) * ) by FINSEQ_1:def 11;
end;
then ( rng M ) c= ( (the carrier of K) * ) by TARSKI:def 3;
then reconsider M as (Matrix of K) by FINSEQ_1:def 4;
take M1 = M;
(for k holds (k in ( dom b1 ) implies ( M1 /. k ) = ( ( f . ( b1 /. k ) ) |-- b2 )))
proof
let k being Nat;
assume A8: k in ( dom b1 );
then A9: k in ( Seg ( len b1 ) ) by FINSEQ_1:def 3;
( dom M1 ) = ( dom b1 ) by A1,FINSEQ_3:29;
hence ( M1 /. k ) = ( M1 . k ) by A8,PARTFUN1:def 6
.= ( ( f . ( b1 /. k ) ) |-- b2 ) by A2,A3,A9;
end;
hence thesis by A1;
end;
uniqueness
proof
let K1 being (Matrix of K);
let K2 being (Matrix of K);
assume that
A10: ( len K1 ) = ( len b1 )
and
A11: (for k holds (k in ( dom b1 ) implies ( K1 /. k ) = ( ( f . ( b1 /. k ) ) |-- b2 )))
and
A12: ( len K2 ) = ( len b1 )
and
A13: (for k holds (k in ( dom b1 ) implies ( K2 /. k ) = ( ( f . ( b1 /. k ) ) |-- b2 )));
(for k being Nat holds ((1 <= k & k <= ( len K1 )) implies ( K1 . k ) = ( K2 . k )))
proof
let k being Nat;
assume A14: (1 <= k & k <= ( len K1 ));
then A15: k in ( dom b1 ) by A10,FINSEQ_3:25;
A16: k in ( dom K2 ) by A10,A12,A14,FINSEQ_3:25;
k in ( dom K1 ) by A14,FINSEQ_3:25;
hence ( K1 . k ) = ( K1 /. k ) by PARTFUN1:def 6
.= ( ( f . ( b1 /. k ) ) |-- b2 ) by A11,A15
.= ( K2 /. k ) by A13,A15
.= ( K2 . k ) by A16,PARTFUN1:def 6;
end;
hence thesis by A10,A12,FINSEQ_1:14;
end;
end;
