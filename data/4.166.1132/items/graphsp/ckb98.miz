environ
vocabularies NUMBERS,SUBSET_1,FINSEQ_1,INT_1,RELAT_1,FUNCT_1,ORDINAL4,XBOOLE_0,XXREAL_0,PARTFUN1,GRAPH_1,STRUCT_0,TREES_2,GLIB_000,GRAPH_5,CARD_3,GRAPH_4,NAT_1,ARYTM_3,TARSKI,CARD_1,FINSET_1,FUNCT_4,REAL_1,FUNCT_2,ARYTM_1,GRAPHSP;
notations XCMPLX_0,XXREAL_0,REAL_1,INT_1,TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,FINSEQ_1,SEQ_1,FINSEQ_2,FINSEQ_4,CARD_1,FINSET_1,STRUCT_0,GRAPH_1,PARTFUN1,FUNCT_2,CQC_SIM1,GRAPH_4,GRAPH_5,NAT_D,DOMAIN_1,RVSUM_1,NUMBERS,FUNCT_7,NAT_1,CKB21,CKB22,CKB23,CKB28,CKB29,CKB30,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB44,CKB45,CKB51,CKB54,CKB62,CKB63,CKB64,CKB65,CKB75,CKB83,CKB84,CKB86,CKB93,CKB94;
definitions TARSKI,RVSUM_1,CKB23,CKB30,CKB35,CKB36,CKB37,CKB38,CKB39,CKB44,CKB45,CKB51,CKB54,CKB62,CKB63,CKB64,CKB65,CKB75,CKB83,CKB84,CKB86,CKB93,CKB94;
theorems FUNCT_2,FUNCT_1,PARTFUN1,FINSEQ_1,NAT_1,ZFMISC_1,TARSKI,FINSEQ_3,XBOOLE_0,XBOOLE_1,SUBSET_1,GRAPH_1,FINSEQ_4,CARD_2,INT_1,GRAPH_5,GRAPH_4,FINSEQ_2,ENUMSET1,FUNCT_7,XREAL_1,XXREAL_0,FINSOP_1,ORDINAL1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB23,CKB24,CKB25,CKB26,CKB27,CKB30,CKB31,CKB32,CKB33,CKB35,CKB36,CKB37,CKB38,CKB39,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB48,CKB49,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97;
schemes NAT_1,GRAPH_5,CLASSES1;
registrations XBOOLE_0,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,MEMBERED,FINSEQ_1,GRAPH_1,GRAPH_4,GRAPH_5,VALUED_0,CARD_1,FUNCT_1,CKB47,CKB50;
constructors DOMAIN_1,XXREAL_0,REAL_1,FINSEQ_4,FINSOP_1,NAT_D,FUNCT_7,CQC_SIM1,GRAPH_4,GRAPH_5,SEQ_1,BINOP_2,RVSUM_1,RELSET_1,CKB22,CKB23,CKB28,CKB29,CKB30,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB44,CKB45,CKB51,CKB54,CKB62,CKB63,CKB64,CKB65,CKB75,CKB83,CKB84,CKB86,CKB93,CKB94;
requirements NUMERALS,SUBSET,BOOLE,REAL,ARITHM;
begin
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve f for (Element of ( ( REAL ) * ));
reserve g for (Element of ( ( REAL ) * ));
reserve h for (Element of ( ( REAL ) * ));
reserve p for (FinSequence of ( NAT ));
theorem
Lm18: ((((((((((g = ( ( ( repeat ( ( Relax n ) * ( findmin n ) ) ) . k ) . f ) & h = ( ( ( repeat ( ( Relax n ) * ( findmin n ) ) ) . ( k + 1 ) ) . f )) & ( OuterVx (g,n) ) <> ( {} )) & ( len f ) = ( ( ( n * n ) + ( 3 * n ) ) + 1 )) & p is_simple_vertex_seq_at g,m,n) & m = ( h . ( n + j ) )) & ( g . ( n + m ) ) = ( h . ( n + m ) )) & m <> j) & (not j in ( UsedVx (g,n) ))) & (for i holds ((1 <= i & i < ( len p )) implies ( p . i ) in ( UsedVx (g,n) )))) implies ( p ^ <* j *> ) is_simple_vertex_seq_at h,j,n)
proof
set RT = ( repeat ( ( Relax n ) * ( findmin n ) ) );
assume that
A1: (((g = ( ( RT . k ) . f ) & h = ( ( RT . ( k + 1 ) ) . f )) & ( OuterVx (g,n) ) <> ( {} )) & ( len f ) = ( ( ( n * n ) + ( 3 * n ) ) + 1 ))
and
A2: p is_simple_vertex_seq_at g,m,n
and
A3: m = ( h . ( n + j ) )
and
A4: ( g . ( n + m ) ) = ( h . ( n + m ) )
and
A5: m <> j
and
A6: (not j in ( UsedVx (g,n) ))
and
A7: (for i holds ((1 <= i & i < ( len p )) implies ( p . i ) in ( UsedVx (g,n) )));
A8: p is_vertex_seq_at g,m,n by A2,CKB84:def 1;
then A9: ( p . ( len p ) ) = m by CKB83:def 1;
set q = ( p ^ <* j *> );
A10: ( len p ) > 1 by A2,CKB84:def 1;
A11: ( len q ) = ( ( len p ) + 1 ) by FINSEQ_2:16;
then A12: ( q . ( len q ) ) = j by FINSEQ_1:42;
now
let ii being (Element of ( NAT ));
assume that
A13: 1 <= ii
and
A14: ii < ( len q );
A15: ( ii - ii ) < ( ( len q ) - ii ) by A14,XREAL_1:14;
then reconsider mm = ( ( len q ) - ii ) as (Element of ( NAT )) by INT_1:3;
A16: ( 1 + ( 0 ) ) < ( mm + 1 ) by A15,XREAL_1:8;
mm <= ( ( len q ) - 1 ) by A13,XREAL_1:13;
then A17: ( mm + 1 ) <= ( ( ( len q ) - 1 ) + 1 ) by XREAL_1:7;
then A18: ( q /. ( mm + 1 ) ) = ( q . ( mm + 1 ) ) by A16,FINSEQ_4:15;
per cases ;
suppose ( mm + 1 ) = ( len q );

hence ( q . ( ( len q ) - ii ) ) = ( h . ( n + ( q /. ( ( ( len q ) - ii ) + 1 ) ) ) ) by A3,A10,A9,A11,A12,A18,CKB6:1;
end;
suppose ( mm + 1 ) <> ( len q );

then A19: ( mm + 1 ) < ( len q ) by A17,XXREAL_0:1;
then A20: ( mm + 1 ) <= ( len p ) by A11,INT_1:7;
A21: ( 1 + ( 0 ) ) <= mm by A15,INT_1:7;
mm < ( len p ) by A11,A19,XREAL_1:7;
then A22: ( q . ( ( len q ) - ii ) ) = ( p . mm ) by A21,CKB6:1;
hereby
per cases ;
suppose A23: ( mm + 1 ) = ( len p );

A24: ( p /. ( ( ( len p ) - 1 ) + 1 ) ) = m by A10,A9,FINSEQ_4:15;
( q /. ( ( ( len q ) - ii ) + 1 ) ) = m by A10,A9,A18,A23,CKB6:1;
hence ( q . ( ( len q ) - ii ) ) = ( h . ( n + ( q /. ( ( ( len q ) - ii ) + 1 ) ) ) ) by A4,A10,A8,A22,A23,A24,CKB83:def 1;
end;
suppose A25: ( mm + 1 ) <> ( len p );

set i2 = ( ii - 1 );
A26: ( mm + 1 ) < ( len p ) by A20,A25,XXREAL_0:1;
A27:now
assume i2 <= 1;
then ( ( len p ) - 1 ) <= ( ( len p ) - i2 ) by XREAL_1:13;
hence contradiction by A11,A26,XREAL_1:20;
end;
then reconsider i3 = i2 as (Element of ( NAT )) by INT_1:3;
A28: ( p /. ( mm + 1 ) ) = ( p . ( mm + 1 ) ) by A16,A20,FINSEQ_4:15;
A29: ( q /. ( ( ( len q ) - ii ) + 1 ) ) = ( q . ( mm + 1 ) ) by A16,A17,FINSEQ_4:15
.= ( p /. ( mm + 1 ) ) by A16,A20,A28,CKB6:1;
i2 < ( ( len q ) - 1 ) by A14,XREAL_1:14;
hence ( q . ( ( len q ) - ii ) ) = ( g . ( n + ( p /. ( ( ( len p ) - i3 ) + 1 ) ) ) ) by A8,A11,A22,A27,CKB83:def 1
.= ( h . ( n + ( q /. ( ( ( len q ) - ii ) + 1 ) ) ) ) by A1,A7,A11,A16,A26,A28,A29,CKB96:1;
end;
end;
end;
end;
then A30: q is_vertex_seq_at h,j,n by A12,CKB83:def 1;
A31:now
assume j in ( rng p );
then consider i being Nat such that A32: i in ( dom p ) and A33: j = ( p . i ) by FINSEQ_2:10;
A34: 1 <= i by A32,FINSEQ_3:25;
A35: i <= ( len p ) by A32,FINSEQ_3:25;
per cases ;
suppose i = ( len p );

hence contradiction by A5,A8,A33,CKB83:def 1;
end;
suppose i <> ( len p );

then i < ( len p ) by A35,XXREAL_0:1;
hence contradiction by A6,A7,A32,A33,A34;
end;
end;
p is  one-to-one by A2,CKB84:def 1;
then A36: q is  one-to-one by A31,CKB1:1;
( p . 1 ) = 1 by A2,CKB84:def 1;
then A37: ( q . 1 ) = 1 by A10,CKB6:1;
( len q ) > 1 by A10,A11,NAT_1:13;
hence thesis by A37,A30,A36,CKB84:def 1;
end;
