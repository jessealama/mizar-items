environ
vocabularies ORDERS_2,NATTRA_1,RELAT_1,STRUCT_0,XBOOLE_0,ORDERS_1,SUBSET_1,WELLORD1,RELAT_2,XXREAL_0,TARSKI,ZFMISC_1,FUNCT_1,SEQM_3,FUNCT_2,CAT_5,CAT_1,ALTCAT_1,PBOOLE,FUNCOP_1,BINOP_1,ORDERS_3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,ORDERS_1,CAT_5,MCART_1,WELLORD1,MULTOP_1,PBOOLE,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FUNCOP_1,DOMAIN_1,STRUCT_0,ORDERS_2,CAT_1,ENS_1,ALTCAT_1,CKB1,CKB7,CKB8,CKB9,CKB10,CKB18,CKB20,CKB21,CKB22,CKB25,CKB29,CKB37;
definitions TARSKI,ALTCAT_1,FUNCOP_1,XBOOLE_0,STRUCT_0,CKB1,CKB7,CKB9,CKB18,CKB22,CKB25,CKB29,CKB37;
theorems RELAT_1,RELSET_1,ORDERS_2,TARSKI,ZFMISC_1,WELLORD1,SYSREL,FUNCT_1,FUNCT_2,MCART_1,ENS_1,PBOOLE,MULTOP_1,ALTCAT_1,XBOOLE_0,XBOOLE_1,PARTFUN1,CKB1,CKB5,CKB7,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB18,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB37;
schemes TARSKI,CAT_5,ALTCAT_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,ORDERS_2,ENS_1,CAT_5,ALTCAT_1,CKB2,CKB3,CKB4,CKB6,CKB16,CKB17,CKB19,CKB28,CKB31,CKB36;
constructors RELAT_2,WELLORD1,PARTFUN1,DOMAIN_1,ORDERS_2,ENS_1,CAT_5,ALTCAT_1,MULTOP_1,PBOOLE,RELSET_1,CKB1,CKB7,CKB9,CKB18,CKB21,CKB22,CKB25,CKB29,CKB37;
requirements BOOLE,SUBSET;
begin
scheme AltCatEx { A() -> non empty set,F(set,set) ->  functional set } : (ex C being  strict AltCatStr st ((the carrier of C) = A() & (for i,j being (Element of A()) holds (( (the Arrows of C) . (i,j) ) = F(i,j) & (for i,j,k being (Element of A()) holds ( (the Comp of C) . (i,j,k) ) = ( FuncComp (F(i,j),F(j,k)) ))))))
provided
A1: (for i,j,k being (Element of A()) holds (for f,g being Function holds ((f in F(i,j) & g in F(j,k)) implies ( g * f ) in F(i,k))))
proof
deffunc H(set,set,set) = ( FuncComp (F($1,$2),F($2,$3)) );
consider M being (ManySortedSet of [: A(),A() :]) such that A2: (for i,j being (Element of A()) holds ( M . (i,j) ) = F(i,j)) from ALTCAT_1:sch 2;
consider c being (ManySortedSet of [: A(),A(),A() :]) such that A3: (for i,j,k being (Element of A()) holds ( c . (i,j,k) ) = H(i,j,k)) from ALTCAT_1:sch 4;
c is  Function-yielding
proof
let i being set;
assume i in ( dom c );
then i in [: A(),A(),A() :] by PARTFUN1:def 2;
then consider x1 being set,x2 being set,x3 being set such that A4: ((x1 in A() & x2 in A()) & x3 in A()) and A5: i = [ x1,x2,x3 ] by MCART_1:68;
( c . i ) = ( c . (x1,x2,x3) ) by A5,MULTOP_1:def 1
.= ( FuncComp (F(x1,x2),F(x2,x3)) ) by A3,A4;
hence thesis;
end;
then reconsider c as (ManySortedFunction of [: A(),A(),A() :]);
now
let i being set;
assume i in [: A(),A(),A() :];
then consider x1 being set,x2 being set,x3 being set such that A6: x1 in A() and A7: x2 in A() and A8: x3 in A() and A9: i = [ x1,x2,x3 ] by MCART_1:68;
( M . (x1,x2) ) = F(x1,x2) by A2,A6,A7;
then A10: [: F(x2,x3),F(x1,x2) :] = [: ( M . (x2,x3) ),( M . (x1,x2) ) :] by A2,A7,A8
.= ( {| M,M |} . (x1,x2,x3) ) by A6,A7,A8,ALTCAT_1:def 4
.= ( {| M,M |} . i ) by A9,MULTOP_1:def 1;
A11: ( {| M |} . i ) = ( {| M |} . (x1,x2,x3) ) by A9,MULTOP_1:def 1
.= ( M . (x1,x3) ) by A6,A7,A8,ALTCAT_1:def 3;
A12:now
assume ( {| M,M |} . i ) <> ( {} );
then consider j being set such that A13: j in [: F(x2,x3),F(x1,x2) :] by A10,XBOOLE_0:def 1;
consider j1 being set,j2 being set such that A14: j1 in F(x2,x3) and A15: j2 in F(x1,x2) and j = [ j1,j2 ] by A13,ZFMISC_1:84;
reconsider j2 as Function by A15;
reconsider j1 as Function by A14;
( j1 * j2 ) in F(x1,x3) by A1,A6,A7,A8,A14,A15;
hence ( {| M |} . i ) <> ( {} ) by A2,A6,A8,A11;
end;
A16: ( c . i ) = ( c . (x1,x2,x3) ) by A9,MULTOP_1:def 1
.= ( FuncComp (F(x1,x2),F(x2,x3)) ) by A3,A6,A7,A8;
then reconsider ci = ( c . i ) as Function;
A17: ( dom ci ) = [: F(x2,x3),F(x1,x2) :] by A16,PARTFUN1:def 2;
( rng ( FuncComp (F(x1,x2),F(x2,x3)) ) ) c= F(x1,x3)
proof
set F = ( FuncComp (F(x1,x2),F(x2,x3)) );
let i being set;
assume i in ( rng F );
then consider j being set such that A18: j in ( dom F ) and A19: i = ( F . j ) by FUNCT_1:def 3;
consider f being Function,g being Function such that A20: j = [ g,f ] and A21: ( F . j ) = ( g * f ) by A18,ALTCAT_1:def 9;
( dom F ) = [: F(x2,x3),F(x1,x2) :] by PARTFUN1:def 2;
then (g in F(x2,x3) & f in F(x1,x2)) by A18,A20,ZFMISC_1:87;
hence thesis by A1,A6,A7,A8,A19,A21;
end;
then ( rng ci ) c= ( {| M |} . i ) by A2,A6,A8,A16,A11;
hence ( c . i ) is (Function of ( {| M,M |} . i ),( {| M |} . i )) by A17,A10,A12,FUNCT_2:def 1,RELSET_1:4;
end;
then reconsider c as (BinComp of M) by PBOOLE:def 15;
set C = AltCatStr (# A(),M,c #);
take C;
thus (the carrier of C) = A();
let i being (Element of A()),j being (Element of A());
thus ( (the Arrows of C) . (i,j) ) = F(i,j) by A2;
let i being (Element of A()),j being (Element of A()),k being (Element of A());
thus thesis by A3;
end;
