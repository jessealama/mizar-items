environ
vocabularies NUMBERS,STRUCT_0,MSAFREE2,XBOOLE_0,MSUALG_1,FINSET_1,RELAT_1,PBOOLE,GLIB_000,FUNCT_1,UNIALG_2,SUBSET_1,FINSEQ_1,FUNCOP_1,FUNCT_6,FSM_1,CARD_3,MARGREL1,TREES_3,TREES_4,PARTFUN1,MSAFREE,TREES_2,ARYTM_3,TREES_1,ZFMISC_1,LANG1,DTCONSTR,TREES_A,TDGROUP,TARSKI,NAT_1,ORDINAL4,CARD_1,ORDINAL1,XXREAL_0,MEMBERED,XREAL_0,ARYTM_1,FUNCT_4,REAL_1,CIRCUIT1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XREAL_0,REAL_1,NAT_1,MEMBERED,RELAT_1,FUNCT_1,PBOOLE,PARTFUN1,FINSEQ_1,FINSEQ_2,RELSET_1,FINSET_1,CARD_3,FUNCT_4,FUNCT_6,TREES_1,TREES_2,TREES_3,TREES_4,STRUCT_0,LANG1,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,XXREAL_2,FUNCOP_1,MSAFREE2,XXREAL_0,CKB1;
definitions TARSKI,MEMBERED,MSAFREE2;
theorems TARSKI,ZFMISC_1,NAT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCT_1,FUNCT_2,TREES_1,TREES_2,TREES_3,TREES_4,CARD_1,CARD_2,CARD_3,FUNCOP_1,PBOOLE,PRALG_2,MSUALG_1,MSUALG_2,RELAT_1,MSAFREE1,MSAFREE,PRE_CIRC,DTCONSTR,LANG1,MSAFREE2,FUNCT_4,FUNCT_6,XBOOLE_0,XBOOLE_1,MEMBERED,FINSET_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,XXREAL_2;
schemes NAT_1,FINSEQ_1,PRE_CIRC,PBOOLE,FRAENKEL,DOMAIN_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,TREES_1,CARD_3,PBOOLE,TREES_2,TREES_3,PRE_CIRC,STRUCT_0,DTCONSTR,MSUALG_1,MSAFREE,MSAFREE2,FUNCT_2,XXREAL_2,CARD_1,PRE_POLY,FUNCOP_1,RELSET_1;
constructors FUNCT_4,XXREAL_0,REAL_1,NAT_1,MSUALG_2,MSAFREE2,MEMBERED,XXREAL_2,SEQ_4,RELSET_1,PRE_POLY,FINSEQ_2;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve IIG for  Circuit-like non  void non  empty ManySortedSign;
definition
let IIG;
let SCS being  non-empty (Circuit of IIG);
func Set-Constants SCS -> (ManySortedSet of ( SortsWithConstants IIG )) means 
:Def1: (for x being (Vertex of IIG) holds (x in ( dom it ) implies ( it . x ) in ( Constants (SCS,x) )));
existence
proof
defpred P[ set,set ]
 means
(ex v being (Vertex of IIG) st (v = $1 & $2 in ( Constants (SCS,v) )));
set SW = ( SortsWithConstants IIG );
A1:now
let i being set;
A2: SW = { v where v is (SortSymbol of IIG): v is  with_const_op } by MSAFREE2:def 1;
assume A3: i in SW;
then reconsider x = i as (Vertex of IIG);
consider v being (Vertex of IIG) such that A4: v = x and A5: v is  with_const_op by A3,A2;
consider o being (OperSymbol of IIG) such that A6: ( (the Arity of IIG) . o ) = ( {} ) and A7: ( (the ResultSort of IIG) . o ) = v by A5,MSUALG_2:def 1;
A8: ( dom (the ResultSort of IIG) ) = (the carrier' of IIG) by FUNCT_2:def 1;
set y = the (Element of ( rng ( Den (o,SCS) ) ));
( Result (o,SCS) ) = ( ( (the Sorts of SCS) * (the ResultSort of IIG) ) . o ) by MSUALG_1:def 5
.= ( (the Sorts of SCS) . ( (the ResultSort of IIG) . o ) ) by A8,FUNCT_1:13;
then reconsider y9 = y as (Element of ( (the Sorts of SCS) . v )) by A7;
reconsider y as set;
take y;
(ex A being non  empty set st (A = ( (the Sorts of SCS) . v ) & ( Constants (SCS,v) ) = { a where a is (Element of A): (ex o being (OperSymbol of IIG) st ((( (the Arity of IIG) . o ) = ( {} ) & ( (the ResultSort of IIG) . o ) = v) & a in ( rng ( Den (o,SCS) ) ))) })) by MSUALG_2:def 3;
then y9 in ( Constants (SCS,x) ) by A4,A6,A7;
hence P[ i,y ];
end;
consider f being (ManySortedSet of SW) such that A9: (for i being set holds (i in SW implies P[ i,( f . i ) ])) from PBOOLE:sch 3(A1);
take f;
let x being (Vertex of IIG);
assume x in ( dom f );
then x in SW by PARTFUN1:def 2;
then P[ x,( f . x ) ] by A9;
hence thesis;
end;
correctness
proof
let it1 being (ManySortedSet of ( SortsWithConstants IIG ));
let it2 being (ManySortedSet of ( SortsWithConstants IIG ));
assume A10: (for x being (Vertex of IIG) holds (x in ( dom it1 ) implies ( it1 . x ) in ( Constants (SCS,x) )));
assume A11: (for x being (Vertex of IIG) holds (x in ( dom it2 ) implies ( it2 . x ) in ( Constants (SCS,x) )));
now
let i being set;
A12: ( dom (the Arity of IIG) ) = (the carrier' of IIG) by FUNCT_2:def 1;
assume A13: i in ( SortsWithConstants IIG );
then reconsider v = i as (Vertex of IIG);
A14: (ex A being non  empty set st (A = ( (the Sorts of SCS) . v ) & ( Constants (SCS,v) ) = { a where a is (Element of A): (ex o being (OperSymbol of IIG) st ((( (the Arity of IIG) . o ) = ( {} ) & ( (the ResultSort of IIG) . o ) = v) & a in ( rng ( Den (o,SCS) ) ))) })) by MSUALG_2:def 3;
( dom it2 ) = ( SortsWithConstants IIG ) by PARTFUN1:def 2;
then ( it2 . v ) in ( Constants (SCS,v) ) by A11,A13;
then consider a2 being (Element of ( (the Sorts of SCS) . v )) such that A15: ( it2 . v ) = a2 and A16: (ex o being (OperSymbol of IIG) st ((( (the Arity of IIG) . o ) = ( {} ) & ( (the ResultSort of IIG) . o ) = v) & a2 in ( rng ( Den (o,SCS) ) ))) by A14;
consider o2 being (OperSymbol of IIG) such that ( (the Arity of IIG) . o2 ) = ( {} ) and A17: ( (the ResultSort of IIG) . o2 ) = v and A18: a2 in ( rng ( Den (o2,SCS) ) ) by A16;
A19: ( the_result_sort_of o2 ) = v by A17,MSUALG_1:def 2;
( dom it1 ) = ( SortsWithConstants IIG ) by PARTFUN1:def 2;
then ( it1 . v ) in ( Constants (SCS,v) ) by A10,A13;
then consider a1 being (Element of ( (the Sorts of SCS) . v )) such that A20: ( it1 . v ) = a1 and A21: (ex o being (OperSymbol of IIG) st ((( (the Arity of IIG) . o ) = ( {} ) & ( (the ResultSort of IIG) . o ) = v) & a1 in ( rng ( Den (o,SCS) ) ))) by A14;
consider o1 being (OperSymbol of IIG) such that A22: ( (the Arity of IIG) . o1 ) = ( {} ) and A23: ( (the ResultSort of IIG) . o1 ) = v and A24: a1 in ( rng ( Den (o1,SCS) ) ) by A21;
A25: ( {} ) = ( <*> (the carrier of IIG) );
A26: (ex x2 being set st (x2 in ( dom ( Den (o2,SCS) ) ) & a2 = ( ( Den (o2,SCS) ) . x2 ))) by A18,FUNCT_1:def 3;
( the_result_sort_of o1 ) = v by A23,MSUALG_1:def 2;
then A27: o1 = o2 by A19,MSAFREE2:def 6;
consider x1 being set such that A28: x1 in ( dom ( Den (o1,SCS) ) ) and A29: a1 = ( ( Den (o1,SCS) ) . x1 ) by A24,FUNCT_1:def 3;
A30: ( dom ( Den (o1,SCS) ) ) = ( Args (o1,SCS) ) by FUNCT_2:def 1
.= ( ( ( (the Sorts of SCS) # ) * (the Arity of IIG) ) . o1 ) by MSUALG_1:def 4
.= ( ( (the Sorts of SCS) # ) . ( (the Arity of IIG) . o1 ) ) by A12,FUNCT_1:13
.= { ( {} ) } by A22,A25,PRE_CIRC:2;
then x1 = ( {} ) by A28,TARSKI:def 1;
hence ( it1 . i ) = ( it2 . i ) by A20,A15,A27,A30,A29,A26,TARSKI:def 1;
end;
hence it1 = it2 by PBOOLE:3;
end;
end;
