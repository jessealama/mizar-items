environ
vocabularies NUMBERS,STRUCT_0,MSAFREE2,XBOOLE_0,MSUALG_1,FINSET_1,RELAT_1,PBOOLE,GLIB_000,FUNCT_1,UNIALG_2,SUBSET_1,FINSEQ_1,FUNCOP_1,FUNCT_6,FSM_1,CARD_3,MARGREL1,TREES_3,TREES_4,PARTFUN1,MSAFREE,TREES_2,ARYTM_3,TREES_1,ZFMISC_1,LANG1,DTCONSTR,TREES_A,TDGROUP,TARSKI,NAT_1,ORDINAL4,CARD_1,ORDINAL1,XXREAL_0,MEMBERED,XREAL_0,ARYTM_1,FUNCT_4,REAL_1,CIRCUIT1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,CARD_1,NUMBERS,XREAL_0,REAL_1,NAT_1,MEMBERED,RELAT_1,FUNCT_1,PBOOLE,PARTFUN1,FINSEQ_1,FINSEQ_2,RELSET_1,FINSET_1,CARD_3,FUNCT_4,FUNCT_6,TREES_1,TREES_2,TREES_3,TREES_4,STRUCT_0,LANG1,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,XXREAL_2,FUNCOP_1,MSAFREE2,XXREAL_0,CKB1,CKB2,CKB4,CKB6,CKB7,CKB10,CKB19;
definitions TARSKI,MEMBERED,MSAFREE2,CKB2,CKB6,CKB10,CKB19;
theorems TARSKI,ZFMISC_1,NAT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FUNCT_1,FUNCT_2,TREES_1,TREES_2,TREES_3,TREES_4,CARD_1,CARD_2,CARD_3,FUNCOP_1,PBOOLE,PRALG_2,MSUALG_1,MSUALG_2,RELAT_1,MSAFREE1,MSAFREE,PRE_CIRC,DTCONSTR,LANG1,MSAFREE2,FUNCT_4,FUNCT_6,XBOOLE_0,XBOOLE_1,MEMBERED,FINSET_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,XXREAL_2,CKB2,CKB3,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB14,CKB15,CKB16,CKB17,CKB19,CKB20;
schemes NAT_1,FINSEQ_1,PRE_CIRC,PBOOLE,FRAENKEL,DOMAIN_1;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,TREES_1,CARD_3,PBOOLE,TREES_2,TREES_3,PRE_CIRC,STRUCT_0,DTCONSTR,MSUALG_1,MSAFREE,MSAFREE2,FUNCT_2,XXREAL_2,CARD_1,PRE_POLY,FUNCOP_1,RELSET_1,CKB12,CKB13,CKB18;
constructors FUNCT_4,XXREAL_0,REAL_1,NAT_1,MSUALG_2,MSAFREE2,MEMBERED,XXREAL_2,SEQ_4,RELSET_1,PRE_POLY,FINSEQ_2,CKB2,CKB6,CKB10,CKB19;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve IIG for  monotonic  Circuit-like non  void non  empty ManySortedSign;
theorem
(for IIG holds (for SCS being  finite-yielding  non-empty MSAlgebra over IIG holds (for v,w being (Vertex of IIG) holds (for e1 being (Element of ( (the Sorts of ( FreeEnv SCS )) . v )) holds (for e2 being (Element of ( (the Sorts of ( FreeEnv SCS )) . w )) holds (for q1 being  DTree-yielding FinSequence holds ((((v in ( ( InnerVertices IIG ) \ ( SortsWithConstants IIG ) ) & ( card e1 ) = ( size (v,SCS) )) & e1 = ( [ ( action_at v ),(the carrier of IIG) ] -tree q1 )) & e2 in ( rng q1 )) implies ( card e2 ) = ( size (w,SCS) ))))))))
proof
let IIG;
let SCS being  finite-yielding  non-empty MSAlgebra over IIG;
let v being (Vertex of IIG);
let w being (Vertex of IIG);
let e1 being (Element of ( (the Sorts of ( FreeEnv SCS )) . v ));
let e2 being (Element of ( (the Sorts of ( FreeEnv SCS )) . w ));
let q1 being  DTree-yielding FinSequence;
assume that
A1: v in ( ( InnerVertices IIG ) \ ( SortsWithConstants IIG ) )
and
A2: ( card e1 ) = ( size (v,SCS) )
and
A3: e1 = ( [ ( action_at v ),(the carrier of IIG) ] -tree q1 )
and
A4: e2 in ( rng q1 );
consider sw being  finite non  empty (Subset of ( NAT )) such that A5: sw = { ( card t ) where t is (Element of ( (the Sorts of ( FreeEnv SCS )) . w )): (not contradiction) } and A6: ( size (w,SCS) ) = ( max sw ) by CKB19:def 1;
reconsider Y = sw as  finite non  empty  real-membered set;
reconsider m = ( max Y ) as  real number;
m in { ( card t ) where t is (Element of ( (the Sorts of ( FreeEnv SCS )) . w )): (not contradiction) } by A5,XXREAL_2:def 8;
then consider e3 being (Element of ( (the Sorts of ( FreeEnv SCS )) . w )) such that A7: ( card e3 ) = m;
( card e2 ) in Y by A5;
then A8: ( card e2 ) <= ( max Y ) by XXREAL_2:def 8;
reconsider e39 = e3 as DecoratedTree;
reconsider e19 = e1 as DecoratedTree;
reconsider q19 = q1 as Function;
consider k being set such that A9: k in ( dom q19 ) and A10: e2 = ( q19 . k ) by A4,FUNCT_1:def 3;
k in ( dom q1 ) by A9;
then reconsider kN = k as (Element of ( NAT ));
reconsider k1 = ( kN - 1 ) as (Element of ( NAT )) by A9,FINSEQ_3:26;
A11: ( k1 + 1 ) = kN;
(ex p being  DTree-yielding FinSequence st (p = q1 & ( dom e19 ) = ( tree ( doms p ) ))) by A3,TREES_4:def 4;
then reconsider k9 = <* k1 *> as (Element of ( dom e1 )) by A9,A11,PRE_CIRC:13;
A12: kN <= ( len q1 ) by A9,FINSEQ_3:25;
k1 < kN by A11,XREAL_1:29;
then k1 < ( len q1 ) by A12,XXREAL_0:2;
then A13: ( e1 | k9 ) = e2 by A3,A10,A11,TREES_4:def 4;
assume ( card e2 ) <> ( size (w,SCS) );
then ( card e2 ) < ( max Y ) by A6,A8,XXREAL_0:1;
then (( ( card ( e1 with-replacement (k9,e3) ) ) + ( card ( e1 | k9 ) ) ) = ( ( card e1 ) + ( card e3 ) ) & ( ( card e1 ) + ( card ( e1 | k9 ) ) ) < ( ( card e1 ) + ( card e3 ) )) by A7,A13,PRE_CIRC:18,XREAL_1:6;
then A14: ( card e1 ) < ( card ( e1 with-replacement (k9,e3) ) ) by XREAL_1:6;
reconsider k99 = k9 as (FinSequence of ( NAT ));
reconsider eke = ( e19 with-replacement (k99,e39) ) as DecoratedTree;
reconsider eke as (Element of ( (the Sorts of ( FreeEnv SCS )) . v )) by A1,A3,A9,A10,A11,CKB14:1;
consider sv being  finite non  empty (Subset of ( NAT )) such that A15: sv = { ( card t ) where t is (Element of ( (the Sorts of ( FreeEnv SCS )) . v )): (not contradiction) } and A16: ( size (v,SCS) ) = ( max sv ) by CKB19:def 1;
reconsider Z = sv as  finite non  empty  real-membered set;
( card eke ) in Z by A15;
hence contradiction by A2,A16,A14,XXREAL_2:def 8;
end;
