environ
vocabularies NUMBERS,SUBSET_1,NAT_1,XBOOLE_0,MATRIX11,FINSEQ_1,ARYTM_3,MATRIX_2,VECTSP_1,MATRIX_1,RELAT_1,FINSEQ_3,ARYTM_1,TREES_1,CARD_1,XXREAL_0,FUNCT_1,INCSP_1,TARSKI,ALGSTR_0,ZFMISC_1,STRUCT_0,REALSET1,SETWOP_2,FUNCT_2,FINSUB_1,GROUP_1,SETWISEO,INT_1,FINSET_1,ABIAN,FINSEQ_2,BINOP_1,QC_LANG1,AFINSQ_1,ABSVALUE,MATRIX_3,SUPINF_2,CARD_3,FINSOP_1,RVSUM_1,FVSUM_1,MESFUNC1,MATRIX_6,LAPLACE;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,FINSET_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,ALGSTR_0,GROUP_1,VECTSP_1,SETWISEO,SETWOP_2,FINSEQ_2,MATRIX_1,FINSUB_1,MATRIX_2,NAT_1,FVSUM_1,FINSOP_1,MATRIX_3,CARD_1,FINSEQ_7,NEWTON,MATRIX_7,FINSEQ_3,MATRIX11,MATRIX_6,NAT_D,CKB6;
definitions FINSEQ_2,FINSEQ_1,TARSKI,MATRIX_1,MATRIX_3,FVSUM_1,MATRIX_2,MATRIX_7,MATRIX11,RELAT_1,ALGSTR_0;
theorems FINSEQ_1,FINSEQ_2,TARSKI,FUNCT_2,NAT_1,FUNCT_1,SETWISEO,VECTSP_1,ZFMISC_1,FVSUM_1,SETWOP_2,MATRIX_1,MATRIX_2,FINSUB_1,FINSEQ_3,RELAT_1,FINSOP_1,XBOOLE_0,XBOOLE_1,MATRIX_3,XREAL_1,MATRIX_7,ORDINAL1,CARD_1,CARD_2,MATRIX_9,STIRL2_1,SGRAPH1,CARD_FIN,HURWITZ,NEWTON,COMPUT_1,MATRIX11,GROUP_1,MATRIX_4,MATRIX_6,MATRIXR1,NAT_D,XXREAL_0,MATRIXR2,XREAL_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB7;
schemes FUNCT_2,NAT_1,FINSEQ_1,FUNCT_1,SETWISEO,MATRIX_1;
registrations FUNCT_1,FINSUB_1,FINSET_1,STRUCT_0,FVSUM_1,MATRIX_2,VECTSP_1,FUNCT_2,PARTFUN1,XBOOLE_0,ORDINAL1,XXREAL_0,NAT_1,INT_1,RELAT_1,CARD_1,MATRIX11,XCMPLX_0,RELSET_1,FINSEQ_2,FINSEQ_1;
constructors RELAT_2,SETWISEO,FINSOP_1,SETWOP_2,ALGSTR_1,FVSUM_1,BINOP_1,XXREAL_0,FINSEQ_4,FINSEQ_7,WELLORD2,NEWTON,MATRIX_6,MATRIX_7,MATRIX11,NAT_D,BINOP_2,RELSET_1,CKB6;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve i for Nat;
reserve j for Nat;
reserve n for Nat;
reserve p1 for (Element of ( Permutations ( n + 1 ) ));
theorem
Th7: (for i holds (for j holds ((i in ( Seg ( n + 1 ) ) & j in ( Seg ( n + 1 ) )) implies ( card { p1: ( p1 . i ) = j } ) = ( n ! ))))
proof
let i;
let j;
assume that
A1: i in ( Seg ( n + 1 ) )
and
A2: j in ( Seg ( n + 1 ) );
reconsider N = n as (Element of ( NAT )) by ORDINAL1:def 12;
set n1 = ( N + 1 );
set X = ( finSeg n1 );
set Y = ( X \ { j } );
A3: ( Y \/ { j } ) = X by A2,ZFMISC_1:116;
set X9 = ( X \ { i } );
set P1 = ( Permutations n1 );
set F = { p where p is (Element of P1): ( p . i ) = j };
set F9 = { f where f is (Function of ( X9 \/ { i } ),( Y \/ { j } )): (f is  one-to-one & ( f . i ) = j) };
A4: ( X9 \/ { i } ) = X by A1,ZFMISC_1:116;
A5: F9 c= F
proof
let x;
assume x in F9;
then consider f being (Function of X,X) such that A6: f = x and A7: f is  one-to-one and A8: ( f . i ) = j by A4,A3;
( card X ) = ( card X );
then f is  onto by A7,STIRL2_1:60;
then f in P1 by A7,MATRIX_2:def 9;
hence thesis by A6,A8;
end;
F c= F9
proof
let x;
assume x in F;
then consider p being (Element of P1) such that A9: x = p and A10: ( p . i ) = j;
reconsider p as (Permutation of X) by MATRIX_2:def 9;
( p . i ) = j by A10;
hence thesis by A4,A3,A9;
end;
then A11: F = F9 by A5,XBOOLE_0:def 10;
A12: ( card X ) = n1 by FINSEQ_1:57;
A13: (not j in Y) by ZFMISC_1:56;
then A14: ( card X ) = ( ( card Y ) + 1 ) by A3,CARD_2:41;
A15: (not i in X9) by ZFMISC_1:56;
then A16: ( card X ) = ( ( card X9 ) + 1 ) by A4,CARD_2:41;
then (Y is  empty implies X9 is  empty) by A14;
hence ( card { p1: ( p1 . i ) = j } ) = ( card { f where f is (Function of X9,Y): f is  one-to-one } ) by A15,A13,A11,CARD_FIN:5
.= ( ( ( card Y ) ! ) / ( ( ( card Y ) -' ( card X9 ) ) ! ) ) by A16,A14,CARD_FIN:7
.= ( ( ( card Y ) ! ) / 1 ) by A16,A14,NEWTON:12,XREAL_1:232
.= ( n ! ) by A14,A12;
end;
