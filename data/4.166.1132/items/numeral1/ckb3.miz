environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,CARD_3,FINSOP_1,BINOP_2,INT_1,SERIES_1,VALUED_1,PREPOWER,NEWTON,POWER,NUMERAL1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,RELAT_1,FUNCT_1,NAT_1,ORDINAL1,XXREAL_0,AFINSQ_1,VALUED_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,BINOP_2,RECDEF_1,SERIES_1,NEWTON,PREPOWER,POWER,AFINSQ_2,NAT_D;
definitions TARSKI;
theorems TARSKI,FUNCT_1,NAT_1,RELAT_1,ORDINAL1,CARD_1,XREAL_1,XXREAL_0,AFINSQ_2,AFINSQ_1,FUNCT_2,NAT_2,INT_1,NEWTON,BINOP_2,SERIES_1,SEQ_1,PREPOWER,POWER,XCMPLX_1,PEPIN,PRE_FF,NAT_D,CKB1,CKB2;
schemes NAT_1,AFINSQ_2,AFINSQ_1,STIRL2_1;
registrations XBOOLE_0,RELAT_1,ORDINAL1,XXREAL_0,XREAL_0,NAT_1,CARD_1,NUMBERS,INT_1,BINOP_2,MEMBERED,NEWTON,AFINSQ_1,VALUED_1,FUNCT_2,POWER,FINSET_1,AFINSQ_2,RELSET_1,VALUED_0,FUNCT_1;
constructors PREPOWER,SERIES_1,PARTFUN3,BINOM,SETWISEO,XXREAL_0,REAL_1,NAT_D,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,SEQ_1,AFINSQ_1,AFINSQ_2,BINOP_1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
theorem
Th6: (for d,e being (XFinSequence of ( NAT )) holds (for n being Nat holds ((( dom d ) = ( dom e ) & (for i being Nat holds (i in ( dom d ) implies ( e . i ) = ( ( d . i ) mod n )))) implies ( ( Sum d ) mod n ) = ( ( Sum e ) mod n ))))
proof
let d being (XFinSequence of ( NAT )),e being (XFinSequence of ( NAT ));
let n being Nat;
assume that
A1: (( dom d ) = ( dom e ) & (for i being Nat holds (i in ( dom d ) implies ( e . i ) = ( ( d . i ) mod n ))));
defpred P[ (XFinSequence of ( NAT )) ]
 means
(for e being (XFinSequence of ( NAT )) holds ((( dom $1 ) = ( dom e ) & (for i being Nat holds (i in ( dom $1 ) implies ( e . i ) = ( ( $1 . i ) mod n )))) implies ( ( Sum $1 ) mod n ) = ( ( Sum e ) mod n )));
A2: (for p being (XFinSequence of ( NAT )) holds (for l being (Element of ( NAT )) holds (P[ p ] implies P[ ( p ^ <% l %> ) ])))
proof
let p being (XFinSequence of ( NAT ));
let l being (Element of ( NAT ));
assume A3: P[ p ];
thus P[ ( p ^ <% l %> ) ]
proof
reconsider dop = ( dom p ) as (Element of ( NAT )) by ORDINAL1:def 12;
defpred Q[ set,set ]
 means
$2 = ( ( p . $1 ) mod n );
let e being (XFinSequence of ( NAT ));
assume that
A4: ( dom ( p ^ <% l %> ) ) = ( dom e )
and
A5: (for i being Nat holds (i in ( dom ( p ^ <% l %> ) ) implies ( e . i ) = ( ( ( p ^ <% l %> ) . i ) mod n )));
A6: (for k being Nat holds (k in dop implies (ex x being (Element of ( NAT )) st Q[ k,x ])));
consider p9 being (XFinSequence of ( NAT )) such that A7: (( dom p9 ) = dop & (for k being Nat holds (k in dop implies Q[ k,( p9 . k ) ]))) from STIRL2_1:sch 5(A6);
A8:now
let k being Nat;
assume A9: k in ( dom p9 );
then k < ( dom p9 ) by NAT_1:44;
then k < ( ( len p ) + 1 ) by A7,NAT_1:13;
then k < ( ( len p ) + ( len <% l %> ) ) by AFINSQ_1:33;
then k in ( ( len p ) + ( len <% l %> ) ) by NAT_1:44;
then k in ( dom ( p ^ <% l %> ) ) by AFINSQ_1:def 3;
hence ( e . k ) = ( ( ( p ^ <% l %> ) . k ) mod n ) by A5
.= ( ( p . k ) mod n ) by A7,A9,AFINSQ_1:def 3
.= ( p9 . k ) by A7,A9;
end;
A10:now
let k being Nat;
assume k in ( dom <% ( l mod n ) %> );
then A11: k in 1 by AFINSQ_1:33;
then k < 1 by NAT_1:44;
then A12: k = ( 0 ) by NAT_1:14;
k in ( dom <% l %> ) by A11,AFINSQ_1:33;
hence ( e . ( ( len p9 ) + k ) ) = ( ( ( p ^ <% l %> ) . ( len p ) ) mod n ) by A5,A7,A12,AFINSQ_1:23
.= ( l mod n ) by AFINSQ_1:36
.= ( <% ( l mod n ) %> . k ) by A12,AFINSQ_1:34;
end;
( dom e ) = ( ( len p ) + ( len <% l %> ) ) by A4,AFINSQ_1:def 3
.= ( ( dom p ) + 1 ) by AFINSQ_1:33
.= ( ( len p9 ) + ( len <% ( l mod n ) %> ) ) by A7,AFINSQ_1:33;
then A13: e = ( p9 ^ <% ( l mod n ) %> ) by A8,A10,AFINSQ_1:def 3;
thus ( ( Sum ( p ^ <% l %> ) ) mod n ) = ( ( ( Sum p ) + ( Sum <% l %> ) ) mod n ) by AFINSQ_2:55
.= ( ( ( Sum p ) + l ) mod n ) by AFINSQ_2:53
.= ( ( ( ( Sum p ) mod n ) + l ) mod n ) by NAT_D:22
.= ( ( ( ( Sum p ) mod n ) + ( l mod n ) ) mod n ) by NAT_D:23
.= ( ( ( ( Sum p9 ) mod n ) + ( l mod n ) ) mod n ) by A3,A7
.= ( ( ( Sum p9 ) + ( l mod n ) ) mod n ) by NAT_D:22
.= ( ( ( Sum p9 ) + ( Sum <% ( l mod n ) %> ) ) mod n ) by AFINSQ_2:53
.= ( ( Sum e ) mod n ) by A13,AFINSQ_2:55;
end;

end;
A14: P[ ( <%> ( NAT ) ) ]
proof
let e being (XFinSequence of ( NAT ));
assume that
A15: ( dom ( <%> ( NAT ) ) ) = ( dom e )
and
(for i being Nat holds (i in ( dom ( <%> ( NAT ) ) ) implies ( e . i ) = ( ( ( <%> ( NAT ) ) . i ) mod n )));
( len e ) = ( 0 ) by A15;
hence thesis by AFINSQ_1:15;
end;
(for p being (XFinSequence of ( NAT )) holds P[ p ]) from AFINSQ_2:sch 2(A14,A2);
hence thesis by A1;
end;
