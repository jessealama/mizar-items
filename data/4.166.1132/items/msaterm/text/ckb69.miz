environ
vocabularies FINSEQ_1,RELAT_1,SUBSET_1,NUMBERS,ARYTM_3,XXREAL_0,NAT_1,CARD_1,FUNCT_1,TARSKI,STRUCT_0,XBOOLE_0,MSUALG_1,PBOOLE,TREES_3,MSAFREE,DTCONSTR,LANG1,ZFMISC_1,TREES_4,TDGROUP,CARD_3,TREES_2,FINSET_1,MARGREL1,PARTFUN1,TREES_9,ORDINAL4,ORDINAL1,TREES_1,MCART_1,FUNCT_6,TREES_A,QC_LANG1,MSATERM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,MCART_1,RELAT_1,STRUCT_0,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,TREES_1,TREES_2,CARD_3,FUNCT_6,LANG1,TREES_3,TREES_4,TREES_9,PBOOLE,MSUALG_1,DTCONSTR,MSUALG_3,MSAFREE,XXREAL_0,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55,CKB64;
definitions TARSKI,PBOOLE,XBOOLE_0,CKB2,CKB6,CKB23,CKB24,CKB31,CKB47,CKB48,CKB53,CKB55,CKB64;
theorems TARSKI,NAT_1,ZFMISC_1,MCART_1,CARD_3,FUNCT_1,FINSEQ_1,FUNCT_2,FINSEQ_3,FINSEQ_4,CARD_5,FUNCT_6,TREES_1,TREES_2,MODAL_1,TREES_3,TREES_4,LANG1,DTCONSTR,TREES_9,PBOOLE,MSUALG_1,MSAFREE,DOMAIN_1,RELAT_1,XBOOLE_0,FINSET_1,XREAL_1,ORDINAL1,PARTFUN1,FINSEQ_2,CKB1,CKB2,CKB6,CKB7,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68;
schemes TREES_2,CLASSES1,DTCONSTR,PBOOLE,CKB8,CKB11,CKB26;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,XREAL_0,FINSEQ_1,PBOOLE,TREES_2,TREES_3,TREES_9,STRUCT_0,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,FINSET_1,TREES_1,RELSET_1,CKB3,CKB13;
constructors XXREAL_0,NAT_1,NAT_D,TREES_9,MSUALG_3,MSAFREE,RELSET_1,FINSEQ_2,CKB2,CKB5,CKB6,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55,CKB64;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve S for non  void non  empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
reserve V for (Variables of A);
reserve f for (ManySortedFunction of V,(the Sorts of A));
theorem
(for o being (OperSymbol of S) holds (for p being (ArgumentSeq of o,A,V) holds (for q being FinSequence holds ((( len q ) = ( len p ) & (for i being Nat holds (i in ( dom p ) implies (for t being (c-Term of A,V) holds (t = ( p . i ) implies ( q . i ) = ( t @ f )))))) implies ( (( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) qua (c-Term of A,V)) @ f ) = ( ( Den (o,A) ) . q )))))
proof
let o being (OperSymbol of S);
let p being (ArgumentSeq of o,A,V);
let q being FinSequence;
assume that
A1: ( len q ) = ( len p )
and
A2: (for i being Nat holds (i in ( dom p ) implies (for t being (c-Term of A,V) holds (t = ( p . i ) implies ( q . i ) = ( t @ f )))));
consider vt being  finite DecoratedTree such that A3: vt is_an_evaluation_of ( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ),f by CKB61:1;
consider r being  DTree-yielding FinSequence such that A4: ( len r ) = ( len p ) and A5: vt = ( ( ( Den (o,A) ) . ( roots r ) ) -tree r ) and A6: (for i being Nat holds (for t being (c-Term of A,V) holds ((i in ( dom p ) & t = ( p . i )) implies (ex vt being  finite DecoratedTree st (vt = ( r . i ) & vt is_an_evaluation_of t,f))))) by A3,CKB60:1;
now
thus A7: ((( dom p ) = ( dom p ) & ( dom q ) = ( dom p )) & ( dom r ) = ( dom p )) by A1,A4,FINSEQ_3:29;
let i being (Element of ( NAT ));
assume A8: i in ( dom r );
then reconsider t = ( p . i ) as (c-Term of A,V) by A7,CKB41:1;
consider vt being  finite DecoratedTree such that A9: vt = ( r . i ) and A10: vt is_an_evaluation_of t,f by A6,A7,A8;
reconsider T = vt as DecoratedTree;
take T;
thus T = ( r . i ) by A9;
thus ( q . i ) = ( t @ f ) by A2,A7,A8
.= ( T . ( {} ) ) by A10,CKB65:1;
end;
then q = ( roots r ) by TREES_3:def 18;
hence ( (( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) qua (c-Term of A,V)) @ f ) = ( ( ( ( Den (o,A) ) . q ) -tree r ) . ( {} ) ) by A3,A5,CKB65:1
.= ( ( Den (o,A) ) . q ) by TREES_4:def 4;
end;
