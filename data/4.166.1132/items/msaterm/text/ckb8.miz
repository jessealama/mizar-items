environ
vocabularies FINSEQ_1,RELAT_1,SUBSET_1,NUMBERS,ARYTM_3,XXREAL_0,NAT_1,CARD_1,FUNCT_1,TARSKI,STRUCT_0,XBOOLE_0,MSUALG_1,PBOOLE,TREES_3,MSAFREE,DTCONSTR,LANG1,ZFMISC_1,TREES_4,TDGROUP,CARD_3,TREES_2,FINSET_1,MARGREL1,PARTFUN1,TREES_9,ORDINAL4,ORDINAL1,TREES_1,MCART_1,FUNCT_6,TREES_A,QC_LANG1,MSATERM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,MCART_1,RELAT_1,STRUCT_0,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,TREES_1,TREES_2,CARD_3,FUNCT_6,LANG1,TREES_3,TREES_4,TREES_9,PBOOLE,MSUALG_1,DTCONSTR,MSUALG_3,MSAFREE,XXREAL_0,CKB2,CKB4,CKB5,CKB6;
definitions TARSKI,PBOOLE,XBOOLE_0,CKB2,CKB6;
theorems TARSKI,NAT_1,ZFMISC_1,MCART_1,CARD_3,FUNCT_1,FINSEQ_1,FUNCT_2,FINSEQ_3,FINSEQ_4,CARD_5,FUNCT_6,TREES_1,TREES_2,MODAL_1,TREES_3,TREES_4,LANG1,DTCONSTR,TREES_9,PBOOLE,MSUALG_1,MSAFREE,DOMAIN_1,RELAT_1,XBOOLE_0,FINSET_1,XREAL_1,ORDINAL1,PARTFUN1,FINSEQ_2,CKB1,CKB2,CKB6,CKB7;
schemes TREES_2,CLASSES1,DTCONSTR,PBOOLE;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,XREAL_0,FINSEQ_1,PBOOLE,TREES_2,TREES_3,TREES_9,STRUCT_0,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,FINSET_1,TREES_1,RELSET_1,CKB3;
constructors XXREAL_0,NAT_1,NAT_D,TREES_9,MSUALG_3,MSAFREE,RELSET_1,FINSEQ_2,CKB2,CKB5,CKB6;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve S for non  void non  empty ManySortedSign;
reserve V for  non-empty (ManySortedSet of (the carrier of S));
Lm3:now
let S;
let V;
let x being set;
set X = V;
set G = ( DTConMSA X );
A1: ( Terminals G ) = ( Union ( coprod X ) ) by MSAFREE:6;
hereby
assume x in ( Terminals G );
then consider s being set such that A2: s in ( dom ( coprod X ) ) and A3: x in ( ( coprod X ) . s ) by A1,CARD_5:2;
reconsider s as (SortSymbol of S) by A2,PARTFUN1:def 2;
( ( coprod X ) . s ) = ( coprod (s,X) ) by MSAFREE:def 3;
then (ex a being set st (a in ( X . s ) & x = [ a,s ])) by A3,MSAFREE:def 2;
hence (ex s being (SortSymbol of S) st (ex v being (Element of ( V . s )) st x = [ v,s ]));
end;
let s being (SortSymbol of S);
let a being (Element of ( V . s ));
assume x = [ a,s ];
then x in ( coprod (s,X) ) by MSAFREE:def 2;
then A4: x in ( ( coprod X ) . s ) by MSAFREE:def 3;
( dom ( coprod X ) ) = (the carrier of S) by PARTFUN1:def 2;
hence x in ( Terminals G ) by A1,A4,CARD_5:2;
end;
Lm5:now
let S;
let V;
set G = ( DTConMSA V );
let x being set;
( NonTerminals G ) = [: (the carrier' of S),{ (the carrier of S) } :] by MSAFREE:6;
hence (x is (NonTerminal of G) iff x in [: (the carrier' of S),{ (the carrier of S) } :]);
end;
scheme TermInd { S() -> non  void non  empty ManySortedSign,V() ->  non-empty (ManySortedSet of (the carrier of S())),P[set] } : (for t being (Term of S(),V()) holds P[ t ])
provided
A1: (for s being (SortSymbol of S()) holds (for v being (Element of ( V() . s )) holds P[ ( root-tree [ v,s ] ) ]))
and
A2: (for o being (OperSymbol of S()) holds (for p being (ArgumentSeq of ( Sym (o,V()) )) holds ((for t being (Term of S(),V()) holds (t in ( rng p ) implies P[ t ])) implies P[ ( [ o,(the carrier of S()) ] -tree p ) ])))
proof
set X = V();
set G = ( DTConMSA X );
A3: (for nt being (Symbol of G) holds (for ts being (FinSequence of ( TS G )) holds ((nt ==> ( roots ts ) & (for t being (DecoratedTree of (the carrier of G)) holds (t in ( rng ts ) implies P[ t ]))) implies P[ ( nt -tree ts ) ])))
proof
let nt being (Symbol of G);
let ts being (FinSequence of ( TS G ));
assume that
A4: nt ==> ( roots ts )
and
A5: (for t being (DecoratedTree of (the carrier of G)) holds (t in ( rng ts ) implies P[ t ]));
nt in { s where s is (Symbol of G): (ex n being FinSequence st s ==> n) } by A4;
then reconsider sy = nt as (NonTerminal of G) by LANG1:def 3;
reconsider p = ts as (FinSequence of ( S() -Terms X ));
sy in [: (the carrier' of S()),{ (the carrier of S()) } :] by Lm5;
then consider o being (OperSymbol of S()),x2 being (Element of { (the carrier of S()) }) such that A6: sy = [ o,x2 ] by DOMAIN_1:1;
A7: x2 = (the carrier of S()) by TARSKI:def 1;
[ o,(the carrier of S()) ] = ( Sym (o,X) ) by MSAFREE:def 9;
then ts is (SubtreeSeq of ( Sym (o,X) )) by A4,A6,A7,DTCONSTR:def 6;
then reconsider p as (ArgumentSeq of ( Sym (o,V()) )) by CKB6:def 1;
(for t being (Term of S(),V()) holds (t in ( rng p ) implies P[ t ])) by A5;
hence thesis by A2,A6,A7;
end;
A8: (for s being (Symbol of G) holds (s in ( Terminals G ) implies P[ ( root-tree s ) ]))
proof
let x being (Symbol of G);
assume x in ( Terminals G );
then (ex s being (SortSymbol of S()) st (ex v being (Element of ( V() . s )) st x = [ v,s ])) by Lm3;
hence thesis by A1;
end;
(for t being (DecoratedTree of (the carrier of G)) holds (t in ( TS G ) implies P[ t ])) from DTCONSTR:sch 7(A8,A3);
hence thesis;
end;
