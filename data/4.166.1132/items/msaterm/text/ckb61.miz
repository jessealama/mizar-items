environ
vocabularies FINSEQ_1,RELAT_1,SUBSET_1,NUMBERS,ARYTM_3,XXREAL_0,NAT_1,CARD_1,FUNCT_1,TARSKI,STRUCT_0,XBOOLE_0,MSUALG_1,PBOOLE,TREES_3,MSAFREE,DTCONSTR,LANG1,ZFMISC_1,TREES_4,TDGROUP,CARD_3,TREES_2,FINSET_1,MARGREL1,PARTFUN1,TREES_9,ORDINAL4,ORDINAL1,TREES_1,MCART_1,FUNCT_6,TREES_A,QC_LANG1,MSATERM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,MCART_1,RELAT_1,STRUCT_0,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,TREES_1,TREES_2,CARD_3,FUNCT_6,LANG1,TREES_3,TREES_4,TREES_9,PBOOLE,MSUALG_1,DTCONSTR,MSUALG_3,MSAFREE,XXREAL_0,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55;
definitions TARSKI,PBOOLE,XBOOLE_0,CKB2,CKB6,CKB23,CKB24,CKB31,CKB47,CKB48,CKB53,CKB55;
theorems TARSKI,NAT_1,ZFMISC_1,MCART_1,CARD_3,FUNCT_1,FINSEQ_1,FUNCT_2,FINSEQ_3,FINSEQ_4,CARD_5,FUNCT_6,TREES_1,TREES_2,MODAL_1,TREES_3,TREES_4,LANG1,DTCONSTR,TREES_9,PBOOLE,MSUALG_1,MSAFREE,DOMAIN_1,RELAT_1,XBOOLE_0,FINSET_1,XREAL_1,ORDINAL1,PARTFUN1,FINSEQ_2,CKB1,CKB2,CKB6,CKB7,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60;
schemes TREES_2,CLASSES1,DTCONSTR,PBOOLE,CKB8,CKB11,CKB26;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,XREAL_0,FINSEQ_1,PBOOLE,TREES_2,TREES_3,TREES_9,STRUCT_0,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,FINSET_1,TREES_1,RELSET_1,CKB3,CKB13;
constructors XXREAL_0,NAT_1,NAT_D,TREES_9,MSUALG_3,MSAFREE,RELSET_1,FINSEQ_2,CKB2,CKB5,CKB6,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve S for non  void non  empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
reserve V for (Variables of A);
reserve t for (c-Term of A,V);
reserve f for (ManySortedFunction of V,(the Sorts of A));
theorem
Th36: (ex vt being  finite DecoratedTree st vt is_an_evaluation_of t,f)
proof
defpred P[ set ]
 means
(ex t being (c-Term of A,V) st (ex vt being  finite DecoratedTree st (t = $1 & vt is_an_evaluation_of t,f)));
A1: (for o being (OperSymbol of S) holds (for p being (ArgumentSeq of o,A,V) holds ((for t being (c-Term of A,V) holds (t in ( rng p ) implies P[ t ])) implies P[ ( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) ])))
proof
let o being (OperSymbol of S);
let p being (ArgumentSeq of o,A,V);
assume that
A2: (for t being (c-Term of A,V) holds (t in ( rng p ) implies (ex u being (c-Term of A,V) st (ex vt being  finite DecoratedTree st (u = t & vt is_an_evaluation_of u,f)))));
defpred Q[ set,set ]
 means
(ex t being (c-Term of A,V) st (ex vt being  finite DecoratedTree st (($2 = vt & t = ( p . $1 )) & vt is_an_evaluation_of t,f)));
A3: (for e being set holds (e in ( dom p ) implies (ex u being set st Q[ e,u ])))
proof
let x being set;
assume x in ( dom p );
then A4: ( p . x ) in ( rng p ) by FUNCT_1:def 3;
( rng p ) c= ( S -Terms ( (the Sorts of A) \/ V ) ) by FINSEQ_1:def 4;
then reconsider t = ( p . x ) as (c-Term of A,V) by A4;
(ex u being (c-Term of A,V) st (ex vt being  finite DecoratedTree st (u = t & vt is_an_evaluation_of u,f))) by A2,A4;
hence thesis;
end;
consider q being Function such that A5: (( dom q ) = ( dom p ) & (for x being set holds (x in ( dom p ) implies Q[ x,( q . x ) ]))) from CLASSES1:sch 1(A3);
( dom p ) = ( Seg ( len p ) ) by FINSEQ_1:def 3;
then reconsider q as FinSequence by A5,FINSEQ_1:def 2;
A6: ( len p ) = ( len q ) by A5,FINSEQ_3:29;
now
let x being set;
assume x in ( dom q );
then (ex t being (c-Term of A,V) st (ex vt being  finite DecoratedTree st ((( q . x ) = vt & t = ( p . x )) & vt is_an_evaluation_of t,f))) by A5;
hence ( q . x ) is DecoratedTree;
end;
then reconsider q as  DTree-yielding FinSequence by TREES_3:24;
now
let i being Nat;
let t being (c-Term of A,V);
assume i in ( dom p );
then (ex t being (c-Term of A,V) st (ex vt being  finite DecoratedTree st ((( q . i ) = vt & t = ( p . i )) & vt is_an_evaluation_of t,f))) by A5;
hence (t = ( p . i ) implies (ex vt being  finite DecoratedTree st (vt = ( q . i ) & vt is_an_evaluation_of t,f)));
end;
then (ex vt being  finite DecoratedTree st (vt = ( ( ( Den (o,A) ) . ( roots q ) ) -tree q ) & vt is_an_evaluation_of (( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) qua (c-Term of A,V)),f)) by A6,CKB58:1;
hence thesis;
end;
A7: (for s being (SortSymbol of S) holds (for v being (Element of ( V . s )) holds P[ ( root-tree [ v,s ] ) ]))
proof
let s being (SortSymbol of S);
let x being (Element of ( V . s ));
reconsider t = ( root-tree [ x,s ] ) as (c-Term of A,V) by CKB20:1;
take t;
take ( root-tree ( ( f . s ) . x ) );
thus t = ( root-tree [ x,s ] );
thus thesis by CKB57:1;
end;
A8: (for s being (SortSymbol of S) holds (for x being (Element of ( (the Sorts of A) . s )) holds P[ ( root-tree [ x,s ] ) ]))
proof
let s being (SortSymbol of S);
let x being (Element of ( (the Sorts of A) . s ));
reconsider t = ( root-tree [ x,s ] ) as (c-Term of A,V) by CKB18:1;
take t;
take ( root-tree x );
thus t = ( root-tree [ x,s ] );
thus thesis by CKB56:1;
end;
(for t being (c-Term of A,V) holds P[ t ]) from CKB11:sch 1(A8,A7,A1);
then (ex u being (c-Term of A,V) st (ex vt being  finite DecoratedTree st (u = t & vt is_an_evaluation_of u,f)));
hence thesis;
end;
