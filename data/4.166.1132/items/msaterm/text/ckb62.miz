environ
vocabularies FINSEQ_1,RELAT_1,SUBSET_1,NUMBERS,ARYTM_3,XXREAL_0,NAT_1,CARD_1,FUNCT_1,TARSKI,STRUCT_0,XBOOLE_0,MSUALG_1,PBOOLE,TREES_3,MSAFREE,DTCONSTR,LANG1,ZFMISC_1,TREES_4,TDGROUP,CARD_3,TREES_2,FINSET_1,MARGREL1,PARTFUN1,TREES_9,ORDINAL4,ORDINAL1,TREES_1,MCART_1,FUNCT_6,TREES_A,QC_LANG1,MSATERM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,MCART_1,RELAT_1,STRUCT_0,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,TREES_1,TREES_2,CARD_3,FUNCT_6,LANG1,TREES_3,TREES_4,TREES_9,PBOOLE,MSUALG_1,DTCONSTR,MSUALG_3,MSAFREE,XXREAL_0,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55;
definitions TARSKI,PBOOLE,XBOOLE_0,CKB2,CKB6,CKB23,CKB24,CKB31,CKB47,CKB48,CKB53,CKB55;
theorems TARSKI,NAT_1,ZFMISC_1,MCART_1,CARD_3,FUNCT_1,FINSEQ_1,FUNCT_2,FINSEQ_3,FINSEQ_4,CARD_5,FUNCT_6,TREES_1,TREES_2,MODAL_1,TREES_3,TREES_4,LANG1,DTCONSTR,TREES_9,PBOOLE,MSUALG_1,MSAFREE,DOMAIN_1,RELAT_1,XBOOLE_0,FINSET_1,XREAL_1,ORDINAL1,PARTFUN1,FINSEQ_2,CKB1,CKB2,CKB6,CKB7,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61;
schemes TREES_2,CLASSES1,DTCONSTR,PBOOLE,CKB8,CKB11,CKB26;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,XREAL_0,FINSEQ_1,PBOOLE,TREES_2,TREES_3,TREES_9,STRUCT_0,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,FINSET_1,TREES_1,RELSET_1,CKB3,CKB13;
constructors XXREAL_0,NAT_1,NAT_D,TREES_9,MSUALG_3,MSAFREE,RELSET_1,FINSEQ_2,CKB2,CKB5,CKB6,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
Lm2:now
let n being (Element of ( NAT ));
let x being set;
let p being (FinSequence of x);
n >= ( 0 ) by NAT_1:2;
then A1: ( n + 1 ) >= ( ( 0 ) + 1 ) by XREAL_1:7;
assume n < ( len p );
then ( n + 1 ) <= ( len p ) by NAT_1:13;
then ( n + 1 ) in ( dom p ) by A1,FINSEQ_3:25;
then A2: ( p . ( n + 1 ) ) in ( rng p ) by FUNCT_1:def 3;
( rng p ) c= x by FINSEQ_1:def 4;
hence ( p . ( n + 1 ) ) in x by A2;
end;
reserve S for non  void non  empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
reserve V for (Variables of A);
reserve t for (c-Term of A,V);
reserve f for (ManySortedFunction of V,(the Sorts of A));
theorem
Th37: (for e1,e2 being  finite DecoratedTree holds ((e1 is_an_evaluation_of t,f & e2 is_an_evaluation_of t,f) implies e1 = e2))
proof
defpred P[ (c-Term of A,V) ]
 means
(for e1,e2 being  finite DecoratedTree holds ((e1 is_an_evaluation_of $1,f & e2 is_an_evaluation_of $1,f) implies e1 = e2));
A1:now
let s being (SortSymbol of S);
let v being (Element of ( V . s ));
thus P[ ( v -term A ) ]
proof
let e1 being  finite DecoratedTree;
let e2 being  finite DecoratedTree;
set t = ( v -term A );
assume that
A2: e1 is_an_evaluation_of t,f
and
A3: e2 is_an_evaluation_of t,f;
A4: ( dom e1 ) = ( dom t ) by A2,CKB55:def 1;
A5: ( {} ) is (Node of e1) by TREES_1:22;
A6: ( ( root-tree [ v,s ] ) . ( {} ) ) = [ v,s ] by TREES_4:3;
then ( e1 . ( {} ) ) = ( ( f . s ) . v ) by A2,A5,CKB55:def 1;
then A7: e1 = ( root-tree ( ( f . s ) . v ) ) by A4,TREES_4:3,TREES_4:5;
A8: ( dom e2 ) = ( dom t ) by A3,CKB55:def 1;
then ( e2 . ( {} ) ) = ( ( f . s ) . v ) by A3,A4,A6,A5,CKB55:def 1;
hence thesis by A8,A7,TREES_4:3,TREES_4:5;
end;

end;
A9:now
let o being (OperSymbol of S);
let p being (ArgumentSeq of o,A,V);
assume A10: (for t being (c-Term of A,V) holds (t in ( rng p ) implies P[ t ]));
thus P[ ( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) ]
proof
set t = ( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p );
let e1 being  finite DecoratedTree;
let e2 being  finite DecoratedTree;
assume that
A11: e1 is_an_evaluation_of (t qua (c-Term of A,V)),f
and
A12: e2 is_an_evaluation_of (t qua (c-Term of A,V)),f;
consider q1 being  DTree-yielding FinSequence such that A13: ( len q1 ) = ( len p ) and A14: e1 = ( ( ( Den (o,A) ) . ( roots q1 ) ) -tree q1 ) and A15: (for i being Nat holds (for t being (c-Term of A,V) holds ((i in ( dom p ) & t = ( p . i )) implies (ex vt being  finite DecoratedTree st (vt = ( q1 . i ) & vt is_an_evaluation_of t,f))))) by A11,CKB60:1;
consider q2 being  DTree-yielding FinSequence such that A16: ( len q2 ) = ( len p ) and A17: e2 = ( ( ( Den (o,A) ) . ( roots q2 ) ) -tree q2 ) and A18: (for i being Nat holds (for t being (c-Term of A,V) holds ((i in ( dom p ) & t = ( p . i )) implies (ex vt being  finite DecoratedTree st (vt = ( q2 . i ) & vt is_an_evaluation_of t,f))))) by A12,CKB60:1;
A19:now
let i being (Element of ( NAT ));
assume A20: i < ( len p );
then reconsider t = ( p . ( i + 1 ) ) as (c-Term of A,V) by Lm2;
A21: (ex vt2 being  finite DecoratedTree st (vt2 = ( q2 . ( i + 1 ) ) & vt2 is_an_evaluation_of t,f)) by A18,A20,CKB50:1;
(ex vt1 being  finite DecoratedTree st (vt1 = ( q1 . ( i + 1 ) ) & vt1 is_an_evaluation_of t,f)) by A15,A20,CKB50:1;
hence ( q1 . ( i + 1 ) ) = ( q2 . ( i + 1 ) ) by A10,A20,A21,CKB50:1;
end;
A22:now
let i being Nat;
assume i in ( dom q1 );
then (ex k being (Element of ( NAT )) st (i = ( k + 1 ) & k < ( len q1 ))) by CKB1:1;
hence ( q1 . i ) = ( q2 . i ) by A13,A19;
end;
A23: ( dom q2 ) = ( Seg ( len q2 ) ) by FINSEQ_1:def 3;
( dom q1 ) = ( Seg ( len q1 ) ) by FINSEQ_1:def 3;
then q1 = q2 by A13,A16,A23,A22,FINSEQ_1:13;
hence thesis by A14,A17;
end;

end;
A24:now
let s being (SortSymbol of S);
let x being (Element of ( (the Sorts of A) . s ));
thus P[ ( x -term (A,V) ) ]
proof
let e1 being  finite DecoratedTree;
let e2 being  finite DecoratedTree;
set t = ( x -term (A,V) );
assume that
A25: e1 is_an_evaluation_of t,f
and
A26: e2 is_an_evaluation_of t,f;
A27: ( dom e1 ) = ( dom t ) by A25,CKB55:def 1;
A28: ( {} ) is (Node of e1) by TREES_1:22;
A29: ( ( root-tree [ x,s ] ) . ( {} ) ) = [ x,s ] by TREES_4:3;
then ( e1 . ( {} ) ) = x by A25,A28,CKB55:def 1;
then A30: e1 = ( root-tree x ) by A27,TREES_4:3,TREES_4:5;
A31: ( dom e2 ) = ( dom t ) by A26,CKB55:def 1;
then ( e2 . ( {} ) ) = x by A26,A27,A29,A28,CKB55:def 1;
hence thesis by A31,A30,TREES_4:3,TREES_4:5;
end;

end;
(for t being (c-Term of A,V) holds P[ t ]) from CKB26:sch 1(A24,A1,A9);
hence thesis;
end;
