environ
vocabularies FINSEQ_1,RELAT_1,SUBSET_1,NUMBERS,ARYTM_3,XXREAL_0,NAT_1,CARD_1,FUNCT_1,TARSKI,STRUCT_0,XBOOLE_0,MSUALG_1,PBOOLE,TREES_3,MSAFREE,DTCONSTR,LANG1,ZFMISC_1,TREES_4,TDGROUP,CARD_3,TREES_2,FINSET_1,MARGREL1,PARTFUN1,TREES_9,ORDINAL4,ORDINAL1,TREES_1,MCART_1,FUNCT_6,TREES_A,QC_LANG1,MSATERM;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,MCART_1,RELAT_1,STRUCT_0,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,FUNCT_2,FINSET_1,TREES_1,TREES_2,CARD_3,FUNCT_6,LANG1,TREES_3,TREES_4,TREES_9,PBOOLE,MSUALG_1,DTCONSTR,MSUALG_3,MSAFREE,XXREAL_0,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55;
definitions TARSKI,PBOOLE,XBOOLE_0,CKB2,CKB6,CKB23,CKB24,CKB31,CKB47,CKB48,CKB53,CKB55;
theorems TARSKI,NAT_1,ZFMISC_1,MCART_1,CARD_3,FUNCT_1,FINSEQ_1,FUNCT_2,FINSEQ_3,FINSEQ_4,CARD_5,FUNCT_6,TREES_1,TREES_2,MODAL_1,TREES_3,TREES_4,LANG1,DTCONSTR,TREES_9,PBOOLE,MSUALG_1,MSAFREE,DOMAIN_1,RELAT_1,XBOOLE_0,FINSET_1,XREAL_1,ORDINAL1,PARTFUN1,FINSEQ_2,CKB1,CKB2,CKB6,CKB7,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59;
schemes TREES_2,CLASSES1,DTCONSTR,PBOOLE,CKB8,CKB11,CKB26;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,XREAL_0,FINSEQ_1,PBOOLE,TREES_2,TREES_3,TREES_9,STRUCT_0,DTCONSTR,MSUALG_1,MSUALG_2,MSAFREE,FINSET_1,TREES_1,RELSET_1,CKB3,CKB13;
constructors XXREAL_0,NAT_1,NAT_D,TREES_9,MSUALG_3,MSAFREE,RELSET_1,FINSEQ_2,CKB2,CKB5,CKB6,CKB12,CKB23,CKB24,CKB25,CKB31,CKB47,CKB48,CKB52,CKB53,CKB55;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve S for non  void non  empty ManySortedSign;
reserve A for  non-empty MSAlgebra over S;
reserve V for (Variables of A);
reserve t for (c-Term of A,V);
reserve f for (ManySortedFunction of V,(the Sorts of A));
theorem
Th35: (for o being (OperSymbol of S) holds (for p being (ArgumentSeq of o,A,V) holds (for vt being  finite DecoratedTree holds (vt is_an_evaluation_of (( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) qua (c-Term of A,V)),f implies (ex q being  DTree-yielding FinSequence st ((( len q ) = ( len p ) & vt = ( ( ( Den (o,A) ) . ( roots q ) ) -tree q )) & (for i being Nat holds (for t being (c-Term of A,V) holds ((i in ( dom p ) & t = ( p . i )) implies (ex vt being  finite DecoratedTree st (vt = ( q . i ) & vt is_an_evaluation_of t,f)))))))))))
proof
let o being (OperSymbol of S);
let p being (ArgumentSeq of o,A,V);
let vt being  finite DecoratedTree;
assume A1: vt is_an_evaluation_of (( ( Sym (o,( (the Sorts of A) \/ V )) ) -tree p ) qua (c-Term of A,V)),f;
reconsider r = ( {} ) as  empty (Element of ( dom vt )) by TREES_1:22;
consider x being set,q being  DTree-yielding FinSequence such that A2: vt = ( x -tree q ) by TREES_9:8;
A3: ( dom vt ) = ( tree ( doms q ) ) by A2,TREES_4:10;
take q;
A4: ( len ( doms q ) ) = ( len q ) by TREES_3:38;
A5: ( Sym (o,( (the Sorts of A) \/ V )) ) = [ o,(the carrier of S) ] by MSAFREE:def 9;
then A6: ( dom vt ) = ( dom ( [ o,(the carrier of S) ] -tree p ) ) by A1,CKB55:def 1;
then ( dom vt ) = ( tree ( doms p ) ) by TREES_4:10;
then A7: ( doms q ) = ( doms p ) by A3,TREES_3:50;
hence ( len q ) = ( len p ) by A4,TREES_3:38;
( ( [ o,(the carrier of S) ] -tree p ) . r ) = [ o,(the carrier of S) ] by TREES_4:def 4;
then ( vt . r ) = ( ( Den (o,A) ) . ( succ (vt,r) ) ) by A5,A1,CKB55:def 1
.= ( ( Den (o,A) ) . ( roots q ) ) by A2,TREES_9:30;
hence vt = ( ( ( Den (o,A) ) . ( roots q ) ) -tree q ) by A2,TREES_4:def 4;
let i being Nat;
let t being (c-Term of A,V);
assume that
A8: i in ( dom p )
and
A9: t = ( p . i );
reconsider u = ( {} ) as (Node of t) by TREES_1:22;
consider k being (Element of ( NAT )) such that A10: i = ( k + 1 ) and A11: k < ( len p ) by A8,CKB1:1;
( <* k *> ^ u ) = <* k *> by FINSEQ_1:34;
then reconsider r = <* k *> as (Node of vt) by A6,A9,A10,A11,TREES_4:11;
take e = ( vt | r );
( len ( doms p ) ) = ( len p ) by TREES_3:38;
hence e = ( q . i ) by A2,A7,A4,A10,A11,TREES_4:def 4;
reconsider r1 = r as (Node of ( [ o,(the carrier of S) ] -tree p )) by A5,A1,CKB55:def 1;
t = ( ( [ o,(the carrier of S) ] -tree p ) | r1 ) by A9,A10,A11,TREES_4:def 4;
hence thesis by A5,A1,CKB59:1;
end;
