environ
vocabularies NUMBERS,FINSEQ_1,FUNCT_1,RELAT_1,XBOOLE_0,TARSKI,ORDINAL4,NAT_1,XXREAL_0,ARYTM_3,PRE_POLY,CARD_1,FUNCOP_1,PARTFUN1,SUBSET_1,ARYTM_1,FUNCT_4,ORDINAL1,PBOOLE,FINSET_1,ORDERS_1,VECTSP_1,ZFMISC_1,ALGSTR_0,POLYNOM2,GROUP_1,POLYNOM1,SUPINF_2,RLVECT_1,ALGSEQ_1,LATTICES,POLYNOM3,STRUCT_0,CARD_3,CARD_FIL,QUOFIELD,MSSUBFAM,IDEAL_1,PRELAMB,MCART_1,BINOP_1,FUNCT_2,HILBASIS;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,PBOOLE,RELAT_1,FINSET_1,FUNCT_1,PARTFUN1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,RELSET_1,FUNCT_2,FUNCOP_1,FINSEQ_1,FUNCT_4,BINOP_1,XXREAL_2,MCART_1,FINSEQOP,FINSEQ_2,FUNCT_7,PRE_POLY,DOMAIN_1,STRUCT_0,ALGSTR_0,RLVECT_1,VFUNCT_1,BHSP_1,GROUP_1,VECTSP_1,NORMSP_1,POLYNOM1,POLYNOM2,POLYNOM3,ALGSEQ_1,NAT_D,IDEAL_1,TOPS_2,GRCAT_1,ORDINAL1,WSIERP_1,ORDERS_1,GROUP_6,QUOFIELD,RECDEF_1,MATRLIN,CKB6,CKB9,CKB14,CKB21,CKB23;
definitions TARSKI,IDEAL_1,GRCAT_1,GROUP_6,FUNCOP_1,POLYNOM3,CARD_1,STRUCT_0,CKB6,CKB9,CKB14,CKB21,CKB23;
theorems TARSKI,ZFMISC_1,RLVECT_1,FUNCT_1,FUNCT_2,POLYNOM1,NAT_1,AXIOMS,FVSUM_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,POLYNOM3,FUNCOP_1,ALGSEQ_1,INT_1,FUNCT_7,IDEAL_1,POLYNOM4,GRCAT_1,QUOFIELD,FUNCT_4,RELAT_1,CARD_1,MATRLIN,CARD_3,ORDINAL1,WAYBEL_1,ORDERS_1,FINSET_1,FINSEQOP,POLYNOM2,TOPS_2,FINSEQ_5,GROUP_1,XBOOLE_0,XBOOLE_1,RLVECT_2,VECTSP_1,XREAL_1,GROUP_6,XXREAL_0,NORMSP_1,PARTFUN1,XXREAL_2,NAT_D,XREAL_0,PRE_POLY,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35;
schemes NAT_1,RECDEF_1,FUNCT_1,FUNCT_2,FINSEQ_2,FUNCT_7;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,PRE_CIRC,STRUCT_0,VECTSP_1,ALGSTR_1,GR_CY_1,WAYBEL_2,GCD_1,PRE_POLY,POLYNOM1,POLYNOM2,POLYNOM3,IDEAL_1,VALUED_0,ALGSTR_0,XXREAL_2,VFUNCT_1,FUNCT_2,RELSET_1,CKB17;
constructors FINSEQOP,RFUNCT_3,NAT_D,REAL_1,WSIERP_1,TOPS_2,ALGSEQ_1,BHSP_1,GRCAT_1,GROUP_6,MATRIX_2,DTCONSTR,TRIANG_1,QUOFIELD,POLYNOM2,POLYNOM3,IDEAL_1,SEQ_1,RECDEF_1,SEQ_4,XXREAL_2,DOMAIN_1,BINARITH,RELSET_1,FUNCT_7,PRE_POLY,MATRLIN,VFUNCT_1,CKB6,CKB9,CKB14,CKB21,CKB23;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
definition
let R being  Abelian  add-associative  right_zeroed  right_complementable  associative  distributive  well-unital  commutative non trivial doubleLoopStr;
let n being (Element of ( NAT ));
func upm (n,R) -> (Function of ( Polynom-Ring ( Polynom-Ring (n,R) ) ),( Polynom-Ring (( n + 1 ),R) ))
means
:Def6: (for p1 being (Polynomial of ( Polynom-Ring (n,R) )) holds (for p2 being (Polynomial of n,R) holds (for p3 being (Polynomial of ( n + 1 ),R) holds (for b being (bag of ( n + 1 )) holds ((p3 = ( it . p1 ) & p2 = ( p1 . ( b . n ) )) implies ( p3 . b ) = ( p2 . ( b | n ) ))))));
existence
proof
set CR = (the carrier of R);
set PNR = ( Polynom-Ring (n,R) );
set PN1R = ( Polynom-Ring (( n + 1 ),R) );
set PRPNR = ( Polynom-Ring ( Polynom-Ring (n,R) ) );
set CPRPNR = (the carrier of PRPNR);
set CPN1R = (the carrier of PN1R);
defpred P1[ (Element of CPRPNR),(Element of CPN1R) ]
 means
(for p1 being (Polynomial of PNR) holds (for p2 being (Polynomial of n,R) holds (for p3 being (Polynomial of ( n + 1 ),R) holds (for b being (bag of ( n + 1 )) holds (((p1 = $1 & p3 = $2) & p2 = ( p1 . ( b . n ) )) implies ( p3 . b ) = ( p2 . ( b | n ) ))))));
A1:now
let x being (Element of CPRPNR);
reconsider p1 = x as (Polynomial of PNR) by POLYNOM3:def 10;
defpred P2[ (Element of ( Bags ( n + 1 ) )),(Element of CR) ]
 means
(for p2 being (Polynomial of n,R) holds (p2 = ( p1 . ( $1 . n ) ) implies $2 = ( p2 . ( $1 | n ) )));
deffunc F(set) = { b where b is (Element of ( Bags ( n + 1 ) )): (( b . n ) = $1 & (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . $1 ) implies ( b | n ) in ( Support p2 )))) };
A2:now
let k being set;
assume k in ( NAT );
set Ak = F(k);
Ak c= ( Bags ( n + 1 ) )
proof
let b being set;
assume b in Ak;
then (ex b9 being (Element of ( Bags ( n + 1 ) )) st ((b9 = b & ( b9 . n ) = k) & (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( b9 | n ) in ( Support p2 )))));
hence thesis;
end;
hence Ak in ( bool ( Bags ( n + 1 ) ) );
end;
consider A being (Function of ( NAT ),( bool ( Bags ( n + 1 ) ) )) such that A3: (for k being set holds (k in ( NAT ) implies ( A . k ) = F(k))) from FUNCT_2:sch 2(A2);
now
let X being set;
assume X in ( A .: ( len p1 ) );
then consider k being (Element of ( NAT )) such that k in ( len p1 ) and A4: X = ( A . k ) by FUNCT_2:65;
reconsider p2 = ( p1 . k ) as (Polynomial of n,R) by POLYNOM1:def 10;
A5: ( A . k ) = { b where b is (Element of ( Bags ( n + 1 ) )): (( b . n ) = k & (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( b | n ) in ( Support p2 )))) } by A3;
per cases ;
suppose A6: ( Support p2 ) = ( {} );

now
assume ( A . k ) <> ( {} );
then consider b being set such that A7: b in ( A . k ) by XBOOLE_0:def 1;
(ex b9 being (Element of ( Bags ( n + 1 ) )) st ((b9 = b & ( b9 . n ) = k) & (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( b9 | n ) in ( Support p2 ))))) by A5,A7;
hence contradiction by A6;
end;
hence X is  finite by A4;
end;
suppose A8: ( Support p2 ) <> ( {} );

then consider b2 being set such that A9: b2 in ( Support p2 ) by XBOOLE_0:def 1;
reconsider b2 as (Element of ( Bags n )) by A9;
A10: ( ( b2 bag_extend k ) . n ) = k by CKB6:def 1;
(for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( ( b2 bag_extend k ) | n ) in ( Support p2 ))) by A9,CKB6:def 1;
then ( b2 bag_extend k ) in ( A . k ) by A5,A10;
then reconsider Ak = ( A . k ) as non empty set;
reconsider Supportp2 = ( Support p2 ) as non empty set by A8;
defpred P3[ (Element of Ak),(Element of Supportp2) ]
 means
(for b being (Element of ( Bags ( n + 1 ) )) holds ($1 = b implies $2 = ( b | n )));
A11:now
let x being (Element of Ak);
x in ( A . k );
then consider b being (Element of ( Bags ( n + 1 ) )) such that A12: b = x and ( b . n ) = k and A13: (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( b | n ) in ( Support p2 ))) by A5;
reconsider bn = ( b | n ) as (Element of Supportp2) by A13;
P3[ x,bn ] by A12;
hence (ex y being (Element of Supportp2) st P3[ x,y ]);
end;
consider f being (Function of Ak,Supportp2) such that A14: (for x being (Element of Ak) holds P3[ x,( f . x ) ]) from FUNCT_2:sch 3(A11);
A15: ( dom f ) = Ak by FUNCT_2:def 1;
now
let x1 being set,x2 being set;
assume that
A16: x1 in ( dom f )
and
A17: x2 in ( dom f )
and
A18: ( f . x1 ) = ( f . x2 );
( f . x1 ) in Supportp2 by A16,FUNCT_2:5;
then reconsider fx1 = ( f . x1 ) as (Element of ( Bags n ));
consider b1 being (Element of ( Bags ( n + 1 ) )) such that A19: b1 = x1 and A20: ( b1 . n ) = k and (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( b1 | n ) in ( Support p2 ))) by A5,A15,A16;
( b1 | n ) = ( f . x1 ) by A14,A16,A19;
then A21: b1 = ( fx1 bag_extend k ) by A20,CKB6:def 1;
consider b2 being (Element of ( Bags ( n + 1 ) )) such that A22: b2 = x2 and A23: ( b2 . n ) = k and (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . k ) implies ( b2 | n ) in ( Support p2 ))) by A5,A15,A17;
( b2 | n ) = ( f . x1 ) by A14,A17,A18,A22;
hence x1 = x2 by A19,A21,A22,A23,CKB6:def 1;
end;
then A24: f is  one-to-one by FUNCT_1:def 4;
( rng f ) c= Supportp2;
then ( card Ak ) c= ( card Supportp2 ) by A15,A24,CARD_1:10;
hence X is  finite by A4;
end;
end;
then A25: ( union ( A .: ( len p1 ) ) ) is  finite by FINSET_1:7;
A26:now
let b being (Element of ( Bags ( n + 1 ) ));
reconsider p2 = ( p1 . ( b . n ) ) as (Polynomial of n,R) by POLYNOM1:def 10;
n < ( n + 1 ) by XREAL_1:29;
then reconsider bn = ( b | n ) as (bag of n) by CKB3:1;
P2[ b,( p2 . bn ) ];
hence (ex r being (Element of CR) st P2[ b,r ]);
end;
consider y being (Function of ( Bags ( n + 1 ) ),CR) such that A27: (for b being (Element of ( Bags ( n + 1 ) )) holds P2[ b,( y . b ) ]) from FUNCT_2:sch 3(A26);
reconsider y as (Function of ( Bags ( n + 1 ) ),R);
reconsider y as (Series of ( n + 1 ),R);
( Support y ) c= ( union ( A .: ( len p1 ) ) )
proof
let x being set;
A28: ( dom A ) = ( NAT ) by FUNCT_2:def 1;
assume A29: x in ( Support y );
then reconsider x9 = x as (Element of ( Bags ( n + 1 ) ));
reconsider p2 = ( p1 . ( x9 . n ) ) as (Polynomial of n,R) by POLYNOM1:def 10;
n < ( n + 1 ) by XREAL_1:29;
then reconsider xn = ( x9 | n ) as (Element of ( Bags n )) by CKB3:1;
( y . x9 ) <> ( 0. R ) by A29,POLYNOM1:def 3;
then A30: ( p2 . xn ) <> ( 0. R ) by A27;
then p2 <> ( 0_ (n,R) ) by POLYNOM1:22;
then p2 <> ( 0. PNR ) by POLYNOM1:def 10;
then A31: ( x9 . n ) < ( len p1 ) by ALGSEQ_1:8;
( len p1 ) = { i where i is (Element of ( NAT )): i < ( len p1 ) } by AXIOMS:4;
then ( x9 . n ) in ( len p1 ) by A31;
then A32: ( A . ( x9 . n ) ) in ( A .: ( len p1 ) ) by A28,FUNCT_1:def 6;
A33: ( A . ( x9 . n ) ) = { b where b is (Element of ( Bags ( n + 1 ) )): (( b . n ) = ( x9 . n ) & (for p2 being (Polynomial of n,R) holds (p2 = ( p1 . ( x9 . n ) ) implies ( b | n ) in ( Support p2 )))) } by A3;
(for p2 being (Polynomial of n,R) holds (p2 = ( p1 . ( x9 . n ) ) implies xn in ( Support p2 ))) by A30,POLYNOM1:def 3;
then x in ( A . ( x9 . n ) ) by A33;
hence thesis by A32,TARSKI:def 4;
end;
then y is  finite-Support by A25,POLYNOM1:def 4;
then reconsider y9 = y as (Element of CPN1R) by POLYNOM1:def 10;
now
let p1 being (Polynomial of PNR);
let p2 being (Polynomial of n,R);
let p3 being (Polynomial of ( n + 1 ),R);
let b being (bag of ( n + 1 ));
A34: b is (Element of ( Bags ( n + 1 ) )) by PRE_POLY:def 12;
assume ((p1 = x & p3 = y9) & p2 = ( p1 . ( b . n ) ));
hence ( p3 . b ) = ( p2 . ( b | n ) ) by A27,A34;
end;
hence (ex y being (Element of CPN1R) st P1[ x,y ]);
end;
consider P being (Function of CPRPNR,CPN1R) such that A35: (for x being (Element of CPRPNR) holds P1[ x,( P . x ) ]) from FUNCT_2:sch 3(A1);
reconsider P as (Function of PRPNR,PN1R);
take P;
now
let p1 being (Polynomial of ( Polynom-Ring (n,R) ));
let p2 being (Polynomial of n,R);
let p3 being (Polynomial of ( n + 1 ),R);
let b being (bag of ( n + 1 ));
A36: p1 in CPRPNR by POLYNOM3:def 10;
assume (p3 = ( P . p1 ) & p2 = ( p1 . ( b . n ) ));
hence ( p3 . b ) = ( p2 . ( b | n ) ) by A35,A36;
end;
hence thesis;
end;
uniqueness
proof
let A being (Function of ( Polynom-Ring ( Polynom-Ring (n,R) ) ),( Polynom-Ring (( n + 1 ),R) )),B being (Function of ( Polynom-Ring ( Polynom-Ring (n,R) ) ),( Polynom-Ring (( n + 1 ),R) ));
set CPN1R = (the carrier of ( Polynom-Ring (( n + 1 ),R) ));
set CPRPNR = (the carrier of ( Polynom-Ring ( Polynom-Ring (n,R) ) ));
set PNR = ( Polynom-Ring (n,R) );
assume A37: (for p1 being (Polynomial of ( Polynom-Ring (n,R) )) holds (for p2 being (Polynomial of n,R) holds (for p3 being (Polynomial of ( n + 1 ),R) holds (for b being (bag of ( n + 1 )) holds ((p3 = ( A . p1 ) & p2 = ( p1 . ( b . n ) )) implies ( p3 . b ) = ( p2 . ( b | n ) ))))));
assume A38: (for p1 being (Polynomial of ( Polynom-Ring (n,R) )) holds (for p2 being (Polynomial of n,R) holds (for p3 being (Polynomial of ( n + 1 ),R) holds (for b being (bag of ( n + 1 )) holds ((p3 = ( B . p1 ) & p2 = ( p1 . ( b . n ) )) implies ( p3 . b ) = ( p2 . ( b | n ) ))))));
now
let x being set;
assume A39: x in CPRPNR;
then reconsider x9 = x as (Polynomial of PNR) by POLYNOM3:def 10;
(( A . x ) in CPN1R & ( B . x ) in CPN1R) by A39,FUNCT_2:5;
then reconsider Ax = ( A . x ),Bx = ( B . x ) as (Polynomial of ( n + 1 ),R) by POLYNOM1:def 10;
now
let b being set;
assume b in ( Bags ( n + 1 ) );
then reconsider b9 = b as (Element of ( Bags ( n + 1 ) ));
reconsider p2 = ( x9 . ( b9 . n ) ) as (Polynomial of n,R) by POLYNOM1:def 10;
n < ( n + 1 ) by NAT_1:13;
then reconsider bn = ( b9 | n ) as (Element of ( Bags n )) by CKB3:1;
thus ( Ax . b ) = ( p2 . bn ) by A37
.= ( Bx . b ) by A38;
end;
hence ( A . x ) = ( B . x ) by FUNCT_2:12;
end;
hence A = B by FUNCT_2:12;
end;
end;
