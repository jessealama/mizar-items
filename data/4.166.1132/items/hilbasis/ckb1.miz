environ
vocabularies NUMBERS,FINSEQ_1,FUNCT_1,RELAT_1,XBOOLE_0,TARSKI,ORDINAL4,NAT_1,XXREAL_0,ARYTM_3,PRE_POLY,CARD_1,FUNCOP_1,PARTFUN1,SUBSET_1,ARYTM_1,FUNCT_4,ORDINAL1,PBOOLE,FINSET_1,ORDERS_1,VECTSP_1,ZFMISC_1,ALGSTR_0,POLYNOM2,GROUP_1,POLYNOM1,SUPINF_2,RLVECT_1,ALGSEQ_1,LATTICES,POLYNOM3,STRUCT_0,CARD_3,CARD_FIL,QUOFIELD,MSSUBFAM,IDEAL_1,PRELAMB,MCART_1,BINOP_1,FUNCT_2,HILBASIS;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,PBOOLE,RELAT_1,FINSET_1,FUNCT_1,PARTFUN1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,RELSET_1,FUNCT_2,FUNCOP_1,FINSEQ_1,FUNCT_4,BINOP_1,XXREAL_2,MCART_1,FINSEQOP,FINSEQ_2,FUNCT_7,PRE_POLY,DOMAIN_1,STRUCT_0,ALGSTR_0,RLVECT_1,VFUNCT_1,BHSP_1,GROUP_1,VECTSP_1,NORMSP_1,POLYNOM1,POLYNOM2,POLYNOM3,ALGSEQ_1,NAT_D,IDEAL_1,TOPS_2,GRCAT_1,ORDINAL1,WSIERP_1,ORDERS_1,GROUP_6,QUOFIELD,RECDEF_1,MATRLIN;
definitions TARSKI,IDEAL_1,GRCAT_1,GROUP_6,FUNCOP_1,POLYNOM3,CARD_1,STRUCT_0;
theorems TARSKI,ZFMISC_1,RLVECT_1,FUNCT_1,FUNCT_2,POLYNOM1,NAT_1,AXIOMS,FVSUM_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,POLYNOM3,FUNCOP_1,ALGSEQ_1,INT_1,FUNCT_7,IDEAL_1,POLYNOM4,GRCAT_1,QUOFIELD,FUNCT_4,RELAT_1,CARD_1,MATRLIN,CARD_3,ORDINAL1,WAYBEL_1,ORDERS_1,FINSET_1,FINSEQOP,POLYNOM2,TOPS_2,FINSEQ_5,GROUP_1,XBOOLE_0,XBOOLE_1,RLVECT_2,VECTSP_1,XREAL_1,GROUP_6,XXREAL_0,NORMSP_1,PARTFUN1,XXREAL_2,NAT_D,XREAL_0,PRE_POLY;
schemes NAT_1,RECDEF_1,FUNCT_1,FUNCT_2,FINSEQ_2,FUNCT_7;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,FUNCOP_1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,PRE_CIRC,STRUCT_0,VECTSP_1,ALGSTR_1,GR_CY_1,WAYBEL_2,GCD_1,PRE_POLY,POLYNOM1,POLYNOM2,POLYNOM3,IDEAL_1,VALUED_0,ALGSTR_0,XXREAL_2,VFUNCT_1,FUNCT_2,RELSET_1;
constructors FINSEQOP,RFUNCT_3,NAT_D,REAL_1,WSIERP_1,TOPS_2,ALGSEQ_1,BHSP_1,GRCAT_1,GROUP_6,MATRIX_2,DTCONSTR,TRIANG_1,QUOFIELD,POLYNOM2,POLYNOM3,IDEAL_1,SEQ_1,RECDEF_1,SEQ_4,XXREAL_2,DOMAIN_1,BINARITH,RELSET_1,FUNCT_7,PRE_POLY,MATRLIN,VFUNCT_1;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
theorem
Th1: (for A,B being FinSequence holds (for f being Function holds (( ( rng A ) \/ ( rng B ) ) c= ( dom f ) implies (ex fA,fB being FinSequence st ((fA = ( f * A ) & fB = ( f * B )) & ( f * ( A ^ B ) ) = ( fA ^ fB ))))))
proof
let A being FinSequence,B being FinSequence;
let f being Function;
assume A1: ( ( rng A ) \/ ( rng B ) ) c= ( dom f );
then A2: ( rng ( A ^ B ) ) c= ( dom f ) by FINSEQ_1:31;
then reconsider fAB = ( f * ( A ^ B ) ) as FinSequence by FINSEQ_1:16;
A3: ( rng B ) c= ( ( rng A ) \/ ( rng B ) ) by XBOOLE_1:7;
then reconsider fB = ( f * B ) as FinSequence by A1,FINSEQ_1:16,XBOOLE_1:1;
A4: ( dom ( f * B ) ) = ( dom B ) by A1,A3,RELAT_1:27,XBOOLE_1:1;
then A5: ( len fB ) = ( len B ) by FINSEQ_3:29;
A6: ( rng A ) c= ( ( rng A ) \/ ( rng B ) ) by XBOOLE_1:7;
then reconsider fA = ( f * A ) as FinSequence by A1,FINSEQ_1:16,XBOOLE_1:1;
take fA;
take fB;
A7: ( dom ( f * ( A ^ B ) ) ) = ( dom ( A ^ B ) ) by A2,RELAT_1:27;
A8: ( dom ( f * A ) ) = ( dom A ) by A1,A6,RELAT_1:27,XBOOLE_1:1;
then A9: ( len fA ) = ( len A ) by FINSEQ_3:29;
A10:now
let k being Nat;
assume (1 <= k & k <= ( len fAB ));
then A11: k in ( dom fAB ) by FINSEQ_3:25;
per cases ;
suppose A12: k in ( dom fA );

hence ( ( fA ^ fB ) . k ) = ( fA . k ) by FINSEQ_1:def 7
.= ( f . ( A . k ) ) by A12,FUNCT_1:12
.= ( f . ( ( A ^ B ) . k ) ) by A8,A12,FINSEQ_1:def 7
.= ( fAB . k ) by A11,FUNCT_1:12;
end;
suppose (not k in ( dom fA ));

then consider n being Nat such that A13: n in ( dom B ) and A14: k = ( ( len A ) + n ) by A8,A7,A11,FINSEQ_1:25;
thus ( fAB . k ) = ( f . ( ( A ^ B ) . k ) ) by A11,FUNCT_1:12
.= ( f . ( B . n ) ) by A13,A14,FINSEQ_1:def 7
.= ( fB . n ) by A4,A13,FUNCT_1:12
.= ( ( fA ^ fB ) . k ) by A9,A4,A13,A14,FINSEQ_1:def 7;
end;
end;
( len fAB ) = ( len ( A ^ B ) ) by A7,FINSEQ_3:29
.= ( ( len fA ) + ( len fB ) ) by A9,A5,FINSEQ_1:22
.= ( len ( fA ^ fB ) ) by FINSEQ_1:22;
hence thesis by A10,FINSEQ_1:14;
end;
