environ
vocabularies NUMBERS,XBOOLE_0,STRUCT_0,PRE_TOPC,PENCIL_2,PENCIL_1,FUNCT_1,RELAT_1,TARSKI,SUBSET_1,PRALG_1,PBOOLE,ZFMISC_1,RELAT_2,FINSEQ_1,NAT_1,XXREAL_0,ARYTM_3,CARD_1,ARYTM_1,WAYBEL_3,RLVECT_2,CARD_3,INTEGRA1,FUNCT_4,FINSET_1,FDIFF_1,PARSP_1,GRAPH_2,FUNCT_2,CAT_1,RCOMP_1,FUNCOP_1,PENCIL_3;
notations TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,XXREAL_0,NUMBERS,NAT_1,RELAT_1,SUBSET_1,FUNCT_1,FUNCT_2,FUNCOP_1,RELSET_1,CARD_1,FINSET_1,FINSEQ_1,CARD_3,DOMAIN_1,STRUCT_0,PRE_TOPC,PBOOLE,PZFMISC1,T_0TOPSP,PRALG_1,WAYBEL_3,PENCIL_1,FUNCT_7,PENCIL_2,TOPS_2,GRAPH_2,CKB19,CKB21,CKB28,CKB29,CKB32;
definitions TARSKI,XBOOLE_0,PBOOLE,FUNCT_1,T_0TOPSP,STRUCT_0,RELAT_1,CKB19,CKB21,CKB28,CKB29,CKB32;
theorems XBOOLE_0,ZFMISC_1,FUNCT_1,FINSEQ_1,FINSEQ_3,NAT_1,CARD_3,PBOOLE,PRE_TOPC,FUNCT_7,PRALG_1,PZFMISC1,TARSKI,FUNCT_2,REALSET1,TOPS_2,PENCIL_1,PENCIL_2,CARD_1,XBOOLE_1,PUA2MSS1,FINSET_1,CARD_2,GRAPH_2,FUNCOP_1,RELAT_1,RELSET_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32;
schemes TRANSGEO,NAT_1,FINSEQ_2,PENCIL_2,FINSEQ_1,PBOOLE,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,CARD_1,PBOOLE,REALSET1,STRUCT_0,PENCIL_1,ORDINAL1,FUNCT_1,RELAT_1,FINSEQ_1,ZFMISC_1,PRE_POLY;
constructors XXREAL_0,PZFMISC1,TOPS_2,REALSET2,T_0TOPSP,GRAPH_2,PENCIL_2,RELSET_1,PBOOLE,FUNCT_7,PRE_POLY,CKB19,CKB21,CKB28,CKB29,CKB32;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
theorem
(for I being  finite non empty set holds (for A being  PLS-yielding (ManySortedSet of I) holds ((for i being (Element of I) holds ( A . i ) is  strongly_connected) implies (for f being (Collineation of ( Segre_Product A )) holds (ex s being (Permutation of I) st (ex B being  Function-yielding (ManySortedSet of I) st (for i being (Element of I) holds ((( B . i ) is (Function of ( A . i ),( A . ( s . i ) )) & (for m being (Function of ( A . i ),( A . ( s . i ) )) holds (m = ( B . i ) implies m is  isomorphic))) & (for p being (Point of ( Segre_Product A )) holds (for a being (ManySortedSet of I) holds (a = p implies (for b being (ManySortedSet of I) holds (b = ( f . p ) implies (for m being (Function of ( A . i ),( A . ( s . i ) )) holds (m = ( B . i ) implies ( b . ( s . i ) ) = ( m . ( a . i ) ))))))))))))))))
proof
let I being  finite non empty set;
let A being  PLS-yielding (ManySortedSet of I);
assume that
A1: (for i being (Element of I) holds ( A . i ) is  strongly_connected);
let f being (Collineation of ( Segre_Product A ));
set s = ( permutation_of_indices f );
take s;
defpred P[ set,set ]
 means
(for i being (Element of I) holds (i = $1 implies $2 = ( canonical_embedding (f,i) )));
A2: (for i being set holds (i in I implies (ex j being set st P[ i,j ])))
proof
let i being set;
assume i in I;
then reconsider i1 = i as (Element of I);
P[ i1,( canonical_embedding (f,i1) ) ];
hence thesis;
end;
consider B being (ManySortedSet of I) such that A3: (for i being set holds (i in I implies P[ i,( B . i ) ])) from PBOOLE:sch 3(A2);
now
let x being set;
assume x in ( dom B );
then reconsider y = x as (Element of I) by PARTFUN1:def 2;
( B . y ) = ( canonical_embedding (f,y) ) by A3;
hence ( B . x ) is Function;
end;
then reconsider B as  Function-yielding (ManySortedSet of I) by FUNCOP_1:def 6;
take B;
let i being (Element of I);
A4: ( B . i ) = ( canonical_embedding (f,i) ) by A3;
thus (( B . i ) is (Function of ( A . i ),( A . ( s . i ) )) & (for m being (Function of ( A . i ),( A . ( s . i ) )) holds (m = ( B . i ) implies m is  isomorphic)))
proof
thus ( B . i ) is (Function of ( A . i ),( A . ( s . i ) )) by A4;
let m being (Function of ( A . i ),( A . ( s . i ) ));
assume A5: m = ( B . i );
consider L being  Segre-like non trivial-yielding (ManySortedSubset of ( Carrier A )) such that A6: (( indx L ) = i & ( product L ) is (Segre-Coset of A)) by CKB8:1;
( B . i ) = ( canonical_embedding (f,L) ) by A1,A4,A6,CKB32:def 1;
hence thesis by A1,A5,A6,CKB29:def 1;
end;

let p being (Point of ( Segre_Product A ));
let a being (ManySortedSet of I);
assume that
A7: a = p;
consider b1 being  Segre-like non trivial-yielding (ManySortedSubset of ( Carrier A )) such that A8: (( indx b1 ) = i & ( product b1 ) is (Segre-Coset of A)) and A9: a in ( product b1 ) by A7,CKB9:1;
let b being (ManySortedSet of I);
assume that
A10: b = ( f . p );
let m being (Function of ( A . i ),( A . ( s . i ) ));
assume m = ( B . i );
then m = ( canonical_embedding (f,b1) ) by A1,A4,A8,CKB32:def 1;
hence thesis by A1,A7,A10,A8,A9,CKB29:def 1;
end;
