environ
vocabularies NUMBERS,XBOOLE_0,STRUCT_0,PRE_TOPC,PENCIL_2,PENCIL_1,FUNCT_1,RELAT_1,TARSKI,SUBSET_1,PRALG_1,PBOOLE,ZFMISC_1,RELAT_2,FINSEQ_1,NAT_1,XXREAL_0,ARYTM_3,CARD_1,ARYTM_1,WAYBEL_3,RLVECT_2,CARD_3,INTEGRA1,FUNCT_4,FINSET_1,FDIFF_1,PARSP_1,GRAPH_2,FUNCT_2,CAT_1,RCOMP_1,FUNCOP_1,PENCIL_3;
notations TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,XXREAL_0,NUMBERS,NAT_1,RELAT_1,SUBSET_1,FUNCT_1,FUNCT_2,FUNCOP_1,RELSET_1,CARD_1,FINSET_1,FINSEQ_1,CARD_3,DOMAIN_1,STRUCT_0,PRE_TOPC,PBOOLE,PZFMISC1,T_0TOPSP,PRALG_1,WAYBEL_3,PENCIL_1,FUNCT_7,PENCIL_2,TOPS_2,GRAPH_2,CKB19,CKB21;
definitions TARSKI,XBOOLE_0,PBOOLE,FUNCT_1,T_0TOPSP,STRUCT_0,RELAT_1,CKB19,CKB21;
theorems XBOOLE_0,ZFMISC_1,FUNCT_1,FINSEQ_1,FINSEQ_3,NAT_1,CARD_3,PBOOLE,PRE_TOPC,FUNCT_7,PRALG_1,PZFMISC1,TARSKI,FUNCT_2,REALSET1,TOPS_2,PENCIL_1,PENCIL_2,CARD_1,XBOOLE_1,PUA2MSS1,FINSET_1,CARD_2,GRAPH_2,FUNCOP_1,RELAT_1,RELSET_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24;
schemes TRANSGEO,NAT_1,FINSEQ_2,PENCIL_2,FINSEQ_1,PBOOLE,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,CARD_1,PBOOLE,REALSET1,STRUCT_0,PENCIL_1,ORDINAL1,FUNCT_1,RELAT_1,FINSEQ_1,ZFMISC_1,PRE_POLY;
constructors XXREAL_0,PZFMISC1,TOPS_2,REALSET2,T_0TOPSP,GRAPH_2,PENCIL_2,RELSET_1,PBOOLE,FUNCT_7,PRE_POLY,CKB19,CKB21;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
theorem
Th23: (for I being  finite non  empty set holds (for A being  PLS-yielding (ManySortedSet of I) holds ((for i being (Element of I) holds ( A . i ) is  connected) implies (for B1,B2 being (Segre-Coset of A) holds (B1 misses B2 implies (for b1,b2 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) holds ((B1 = ( product b1 ) & B2 = ( product b2 )) implies (( indx b1 ) = ( indx b2 ) iff (ex D being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) st (((( D . 1 ) = B1 & ( D . ( len D ) ) = B2) & (for i being Nat holds (i in ( dom D ) implies ( D . i ) is (Segre-Coset of A)))) & (for i being Nat holds ((1 <= i & i < ( len D )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( D . i ) & Di1 = ( D . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1)))))))))))))))
proof
let I being  finite non  empty set;
let A being  PLS-yielding (ManySortedSet of I);
assume A1: (for i being (Element of I) holds ( A . i ) is  connected);
let B1 being (Segre-Coset of A);
let B2 being (Segre-Coset of A);
assume that
A2: B1 misses B2;
let b1 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
let b2 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
assume that
A3: B1 = ( product b1 )
and
A4: B2 = ( product b2 );
thus (( indx b1 ) = ( indx b2 ) implies (ex D being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) st (((( D . 1 ) = B1 & ( D . ( len D ) ) = B2) & (for i being Nat holds (i in ( dom D ) implies ( D . i ) is (Segre-Coset of A)))) & (for i being Nat holds ((1 <= i & i < ( len D )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( D . i ) & Di1 = ( D . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1))))))))
proof
defpred P[ Nat ]
 means
(for c1,c2 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) holds (((((( indx c1 ) = ( indx c2 ) & ( product c1 ) is (Segre-Coset of A)) & ( product c2 ) is (Segre-Coset of A)) & ( product c1 ) misses ( product c2 )) & ( diff (c1,c2) ) = $1) implies (ex D being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) st (((( D . 1 ) = ( product c1 ) & ( D . ( len D ) ) = ( product c2 )) & (for i being Nat holds (i in ( dom D ) implies ( D . i ) is (Segre-Coset of A)))) & (for i being Nat holds ((1 <= i & i < ( len D )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( D . i ) & Di1 = ( D . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1)))))))));
A5:now
let k being Nat;
assume A6: P[ k ];
thus P[ ( k + 1 ) ]
proof
let c1 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
let c2 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
assume that
A7: ( indx c1 ) = ( indx c2 )
and
A8: ( product c1 ) is (Segre-Coset of A)
and
A9: ( product c2 ) is (Segre-Coset of A)
and
( product c1 ) misses ( product c2 )
and
A10: ( diff (c1,c2) ) = ( k + 1 );
{ i where i is (Element of I): ( c1 . i ) <> ( c2 . i ) } <> ( {} ) by A10;
then consider j0 being set such that A11: j0 in { i where i is (Element of I): ( c1 . i ) <> ( c2 . i ) } by XBOOLE_0:def 1;
consider j being (Element of I) such that j0 = j and A12: ( c1 . j ) <> ( c2 . j ) by A11;
A13: ( c2 . ( indx c1 ) ) = ( [#] ( A . ( indx c1 ) ) ) by A7,A9,CKB10:1;
then A14: j <> ( indx c1 ) by A8,A12,CKB10:1;
then ( c1 . j ) is 1 -element by PENCIL_1:12;
then consider p being set such that A15: ( c1 . j ) = { p } by ZFMISC_1:131;
c1 c= ( Carrier A ) by PBOOLE:def 18;
then { p } c= ( ( Carrier A ) . j ) by A15,PBOOLE:def 2;
then p in ( ( Carrier A ) . j ) by ZFMISC_1:31;
then p in ( [#] ( A . j ) ) by CKB7:1;
then reconsider p as (Point of ( A . j ));
reconsider c3 = ( c2 +* (j,{ p }) ) as  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) by A7,A14,CKB13:1;
A16: ( c3 . ( indx c1 ) ) = ( [#] ( A . ( indx c1 ) ) ) by A13,A14,FUNCT_7:32;
( c2 . j ) is 1 -element by A7,A14,PENCIL_1:12;
then A17: (ex r being set st ( c2 . j ) = { r }) by ZFMISC_1:131;
( A . ( indx c1 ) ) is non  trivial by CKB2:1;
then A18: ( indx c3 ) = ( indx c1 ) by A16,PENCIL_1:def 21;
( product c3 ) is (Subset of ( Segre_Product A )) by CKB14:1;
then A19: ( product c3 ) is (Segre-Coset of A) by A16,A18,PENCIL_2:def 2;
per cases ;
suppose A20: ( product c1 ) misses ( product c3 );

( diff (c1,c2) ) = ( ( diff (c1,c3) ) + 1 ) by A12,A15,CKB20:1;
then consider E being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) such that A21: ( E . 1 ) = ( product c1 ) and A22: ( E . ( len E ) ) = ( product c3 ) and A23: (for i being Nat holds (i in ( dom E ) implies ( E . i ) is (Segre-Coset of A))) and A24: (for i being Nat holds ((1 <= i & i < ( len E )) implies (for Ei,Ei1 being (Segre-Coset of A) holds ((Ei = ( E . i ) & Ei1 = ( E . ( i + 1 ) )) implies (Ei misses Ei1 & Ei '||' Ei1))))) by A6,A8,A10,A18,A19,A20;
(not p in ( c2 . j )) by A12,A15,A17,TARSKI:def 1;
then consider F being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) such that A25: ( F . 1 ) = ( product c3 ) and A26: ( F . ( len F ) ) = ( product c2 ) and A27: (for i being Nat holds (i in ( dom F ) implies ( F . i ) is (Segre-Coset of A))) and A28: (for i being Nat holds ((1 <= i & i < ( len F )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( F . i ) & Di1 = ( F . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1))))) by A1,A9,CKB24:1;
A29:now
( dom c2 ) = I by PARTFUN1:def 2;
then A30: ( c3 . j ) = { p } by FUNCT_7:31;
assume ( len F ) = 1;
hence contradiction by A12,A15,A25,A26,A30,PUA2MSS1:2;
end;
reconsider D = ( E ^' F ) as (FinSequence of ( bool (the carrier of ( Segre_Product A )) ));
take D;
1 in ( dom E ) by A21,FUNCT_1:def 2;
then 1 <= ( len E ) by FINSEQ_3:25;
hence ( D . 1 ) = ( product c1 ) by A21,GRAPH_2:14;
A31: 1 in ( dom F ) by A25,FUNCT_1:def 2;
then 1 <= ( len F ) by FINSEQ_3:25;
then A32: ( len F ) > 1 by A29,XXREAL_0:1;
hence ( D . ( len D ) ) = ( product c2 ) by A26,GRAPH_2:16;
thus (for i being Nat holds (i in ( dom D ) implies ( D . i ) is (Segre-Coset of A)))
proof
let i being Nat;
A33: ( rng D ) c= ( ( rng E ) \/ ( rng F ) ) by GRAPH_2:17;
assume i in ( dom D );
then A34: ( D . i ) in ( rng D ) by FUNCT_1:3;
per cases  by A34,A33,XBOOLE_0:def 3;
suppose ( D . i ) in ( rng E );

then consider i0 being set such that A35: i0 in ( dom E ) and A36: ( D . i ) = ( E . i0 ) by FUNCT_1:def 3;
thus thesis by A23,A35,A36;
end;
suppose ( D . i ) in ( rng F );

then consider i0 being set such that A37: i0 in ( dom F ) and A38: ( D . i ) = ( F . i0 ) by FUNCT_1:def 3;
thus thesis by A27,A37,A38;
end;
end;

thus (for i being Nat holds ((1 <= i & i < ( len D )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( D . i ) & Di1 = ( D . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1)))))
proof
let i being Nat;
assume that
A39: 1 <= i
and
A40: i < ( len D );
let Di being (Segre-Coset of A);
let Di1 being (Segre-Coset of A);
assume that
A41: Di = ( D . i )
and
A42: Di1 = ( D . ( i + 1 ) );
reconsider i as (Element of ( NAT )) by ORDINAL1:def 12;
per cases ;
suppose A43: i < ( len E );

then ( i + 1 ) <= ( len E ) by NAT_1:13;
then A44: Di1 = ( E . ( i + 1 ) ) by A42,GRAPH_2:14,NAT_1:11;
Di = ( E . i ) by A39,A41,A43,GRAPH_2:14;
hence thesis by A24,A39,A43,A44;
end;
suppose i >= ( len E );

then consider k being Nat such that A45: i = ( ( len E ) + k ) by NAT_1:10;
A46: F <> ( {} ) by A31;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
per cases ;
suppose A47: k > ( 0 );

( ( ( len E ) + k ) + 1 ) < ( ( len D ) + 1 ) by A40,A45,XREAL_1:6;
then A48: ( ( len E ) + ( k + 1 ) ) < ( ( len E ) + ( len F ) ) by A46,GRAPH_2:13;
then A49: ( k + 1 ) < ( len F ) by XREAL_1:6;
then A50: k < ( len F ) by NAT_1:13;
Di1 = ( D . ( ( len E ) + ( k + 1 ) ) ) by A42,A45;
then A51: Di1 = ( F . ( ( k + 1 ) + 1 ) ) by A49,GRAPH_2:15,NAT_1:11;
( ( 0 ) + 1 ) <= k by A47,NAT_1:13;
then A52: Di = ( F . ( k + 1 ) ) by A41,A45,A50,GRAPH_2:15;
(1 <= ( k + 1 ) & ( k + 1 ) < ( len F )) by A48,NAT_1:11,XREAL_1:6;
hence thesis by A28,A52,A51;
end;
suppose k = ( 0 );

then (Di = ( F . 1 ) & Di1 = ( F . ( 1 + 1 ) )) by A22,A25,A32,A39,A41,A42,A45,GRAPH_2:14,GRAPH_2:15;
hence thesis by A28,A32;
end;
end;
end;

end;
suppose A53: ( product c1 ) meets ( product c3 );

(not p in ( c2 . j )) by A12,A15,A17,TARSKI:def 1;
hence thesis by A1,A8,A9,A18,A19,A53,CKB11:1,CKB24:1;
end;
end;

end;
A54: P[ ( 0 ) ]
proof
let c1 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
let c2 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
assume that
( indx c1 ) = ( indx c2 )
and
( product c1 ) is (Segre-Coset of A)
and
( product c2 ) is (Segre-Coset of A)
and
A55: ( product c1 ) misses ( product c2 )
and
A56: ( diff (c1,c2) ) = ( 0 );
A57:now
let a being set;
assume a in ( dom c1 );
then reconsider j = a as (Element of I) by PARTFUN1:def 2;
assume ( c1 . a ) <> ( c2 . a );
then j in { i where i is (Element of I): ( c1 . i ) <> ( c2 . i ) };
hence contradiction by A56;
end;
( dom c1 ) = I by PARTFUN1:def 2
.= ( dom c2 ) by PARTFUN1:def 2;
hence thesis by A55,A57,FUNCT_1:2;
end;
(for n being Nat holds P[ n ]) from NAT_1:sch 2(A54,A5);
then A58: P[ ( diff (b1,b2) ) ];
assume ( indx b1 ) = ( indx b2 );
then consider D being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) such that A59: (( D . 1 ) = ( product b1 ) & ( D . ( len D ) ) = ( product b2 )) and A60: ((for i being Nat holds (i in ( dom D ) implies ( D . i ) is (Segre-Coset of A))) & (for i being Nat holds ((1 <= i & i < ( len D )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( D . i ) & Di1 = ( D . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1)))))) by A2,A3,A4,A58;
take D;
thus (( D . 1 ) = B1 & ( D . ( len D ) ) = B2) by A3,A4,A59;
thus thesis by A60;
end;

given D being (FinSequence of ( bool (the carrier of ( Segre_Product A )) )) such that
A61: ( D . 1 ) = B1
and
A62: ( D . ( len D ) ) = B2
and
A63: (for i being Nat holds (i in ( dom D ) implies ( D . i ) is (Segre-Coset of A)))
and
A64: (for i being Nat holds ((1 <= i & i < ( len D )) implies (for Di,Di1 being (Segre-Coset of A) holds ((Di = ( D . i ) & Di1 = ( D . ( i + 1 ) )) implies (Di misses Di1 & Di '||' Di1)))));

defpred P[ Nat ]
 means
(for bb being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) holds (( product bb ) = ( D . $1 ) implies ( indx b1 ) = ( indx bb )));
A65:now
let k being Nat;
assume A66: P[ k ];
thus P[ ( k + 1 ) ]
proof
let bb being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
assume that
A67: ( product bb ) = ( D . ( k + 1 ) );
A68: ( k + 1 ) in ( dom D ) by A67,FUNCT_1:def 2;
then A69: ( k + 1 ) <= ( len D ) by FINSEQ_3:25;
per cases ;
suppose k = ( 0 );

hence thesis by A3,A61,A67,PUA2MSS1:2;
end;
suppose ( 0 ) < k;

then ( ( 0 ) + 1 ) < ( k + 1 ) by XREAL_1:6;
then A70: 1 <= k by NAT_1:13;
k <= ( len D ) by A69,NAT_1:13;
then k in ( dom D ) by A70,FINSEQ_3:25;
then reconsider B0 = ( D . k ) as (Segre-Coset of A) by A63;
reconsider B3 = ( D . ( k + 1 ) ) as (Segre-Coset of A) by A63,A68;
consider b0 being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A )) such that A71: B0 = ( product b0 ) and ( b0 . ( indx b0 ) ) = ( [#] ( A . ( indx b0 ) ) ) by PENCIL_2:def 2;
k < ( len D ) by A69,NAT_1:13;
then A72: (B0 misses B3 & B0 '||' B3) by A64,A70;
( indx b1 ) = ( indx b0 ) by A66,A71;
hence thesis by A67,A71,A72,CKB23:1;
end;
end;

end;
A73: P[ ( 0 ) ]
proof
A74: (not ( 0 ) in ( dom D )) by FINSEQ_3:24;
let bb being  Segre-like non  trivial-yielding (ManySortedSubset of ( Carrier A ));
assume ( product bb ) = ( D . ( 0 ) );
hence thesis by A74,FUNCT_1:def 2;
end;
(for n being Nat holds P[ n ]) from NAT_1:sch 2(A73,A65);
hence thesis by A4,A62;
end;
