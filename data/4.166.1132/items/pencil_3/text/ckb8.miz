environ
vocabularies NUMBERS,XBOOLE_0,STRUCT_0,PRE_TOPC,PENCIL_2,PENCIL_1,FUNCT_1,RELAT_1,TARSKI,SUBSET_1,PRALG_1,PBOOLE,ZFMISC_1,RELAT_2,FINSEQ_1,NAT_1,XXREAL_0,ARYTM_3,CARD_1,ARYTM_1,WAYBEL_3,RLVECT_2,CARD_3,INTEGRA1,FUNCT_4,FINSET_1,FDIFF_1,PARSP_1,GRAPH_2,FUNCT_2,CAT_1,RCOMP_1,FUNCOP_1,PENCIL_3;
notations TARSKI,XBOOLE_0,ZFMISC_1,XCMPLX_0,XXREAL_0,NUMBERS,NAT_1,RELAT_1,SUBSET_1,FUNCT_1,FUNCT_2,FUNCOP_1,RELSET_1,CARD_1,FINSET_1,FINSEQ_1,CARD_3,DOMAIN_1,STRUCT_0,PRE_TOPC,PBOOLE,PZFMISC1,T_0TOPSP,PRALG_1,WAYBEL_3,PENCIL_1,FUNCT_7,PENCIL_2,TOPS_2,GRAPH_2;
definitions TARSKI,XBOOLE_0,PBOOLE,FUNCT_1,T_0TOPSP,STRUCT_0,RELAT_1;
theorems XBOOLE_0,ZFMISC_1,FUNCT_1,FINSEQ_1,FINSEQ_3,NAT_1,CARD_3,PBOOLE,PRE_TOPC,FUNCT_7,PRALG_1,PZFMISC1,TARSKI,FUNCT_2,REALSET1,TOPS_2,PENCIL_1,PENCIL_2,CARD_1,XBOOLE_1,PUA2MSS1,FINSET_1,CARD_2,GRAPH_2,FUNCOP_1,RELAT_1,RELSET_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
schemes TRANSGEO,NAT_1,FINSEQ_2,PENCIL_2,FINSEQ_1,PBOOLE,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,CARD_1,PBOOLE,REALSET1,STRUCT_0,PENCIL_1,ORDINAL1,FUNCT_1,RELAT_1,FINSEQ_1,ZFMISC_1,PRE_POLY;
constructors XXREAL_0,PZFMISC1,TOPS_2,REALSET2,T_0TOPSP,GRAPH_2,PENCIL_2,RELSET_1,PBOOLE,FUNCT_7,PRE_POLY;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
theorem
Th8: (for I being non empty set holds (for i being (Element of I) holds (for A being  non-Trivial-yielding  TopStruct-yielding (ManySortedSet of I) holds (ex L being  Segre-like non trivial-yielding (ManySortedSubset of ( Carrier A )) st (( indx L ) = i & ( product L ) is (Segre-Coset of A))))))
proof
let I being non empty set;
let x being (Element of I);
let A being  non-Trivial-yielding  TopStruct-yielding (ManySortedSet of I);
set p0 = the (Point of ( Segre_Product A ));
( dom A ) = I by PARTFUN1:def 2;
then ( A . x ) in ( rng A ) by FUNCT_1:3;
then ( A . x ) is non trivial by PENCIL_1:def 18;
then reconsider C = ( [#] ( A . x ) ) as non trivial set;
reconsider p0 as (Element of ( Carrier A )) by CKB6:1;
reconsider p = { p0 } as (ManySortedSubset of ( Carrier A )) by PENCIL_1:11;
reconsider b = ( p +* (x,C) ) as  Segre-like non trivial-yielding (ManySortedSubset of ( Carrier A )) by PENCIL_1:9,PENCIL_1:10,PENCIL_2:7;
take b;
( dom p ) = I by PARTFUN1:def 2;
then A1: ( b . x ) = C by FUNCT_7:31;
hence A2: ( indx b ) = x by PENCIL_1:def 21;
( product b ) c= (the carrier of ( Segre_Product A ))
proof
let a being set;
assume a in ( product b );
then consider f being Function such that A3: a = f and A4: ( dom f ) = ( dom b ) and A5: (for x being set holds (x in ( dom b ) implies ( f . x ) in ( b . x ))) by CARD_3:def 5;
( dom ( Carrier A ) ) = I by PARTFUN1:def 2;
then A6: ( dom f ) = ( dom ( Carrier A ) ) by A4,PARTFUN1:def 2;
A7:now
let i being set;
assume A8: i in ( dom ( Carrier A ) );
then reconsider i1 = i as (Element of I) by PARTFUN1:def 2;
A9: ( f . i ) in ( b . i ) by A4,A5,A6,A8;
per cases ;
suppose i1 = x;

hence ( f . i ) in ( ( Carrier A ) . i ) by A1,A9,CKB7:1;
end;
suppose A10: i1 <> x;

I = ( dom A ) by PARTFUN1:def 2;
then ( A . i1 ) in ( rng A ) by FUNCT_1:3;
then ( A . i1 ) is non trivial by PENCIL_1:def 18;
then reconsider AA = (the carrier of ( A . i1 )) as non trivial set;
( f . i1 ) in ( p . i1 ) by A9,A10,FUNCT_7:32;
then ( f . i1 ) in { ( p0 . i1 ) } by PZFMISC1:def 1;
then ( f . i1 ) = ( p0 . i1 ) by TARSKI:def 1;
then A11: ( f . i1 ) is (Element of ( ( Carrier A ) . i1 )) by PBOOLE:def 14;
AA is non empty;
then ( [#] ( A . i1 ) ) is non empty;
then ( ( Carrier A ) . i1 ) is non empty by CKB7:1;
hence ( f . i ) in ( ( Carrier A ) . i ) by A11;
end;
end;
( Segre_Product A ) = TopStruct (# ( product ( Carrier A ) ),( Segre_Blocks A ) #) by PENCIL_1:def 23;
hence thesis by A3,A6,A7,CARD_3:def 5;
end;
hence thesis by A1,A2,PENCIL_2:def 2;
end;
