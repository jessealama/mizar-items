environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSEQ_1,ARYTM_1,ARYTM_3,XXREAL_0,CARD_1,NAT_1,PRE_POLY,FUNCT_1,RELAT_1,TARSKI,CLASSES1,FUNCT_2,CARD_3,FINSEQ_2,PBOOLE,GRAPH_2,VALUED_0,FINSUB_1,FINSET_1,RELAT_2,ORDERS_2,WAYBEL_4,STRUCT_0,WELLFND1,WELLORD1,ORDERS_1,ORDINAL1,WELLORD2,ORDINAL4,REAL_1,FUNCOP_1,FUNCT_4,PARTFUN1,DICKSON,RLVECT_2,ZFMISC_1,MCART_1,BAGORDER;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,XCMPLX_0,RELAT_1,PBOOLE,RELAT_2,RELSET_1,PARTFUN1,FINSET_1,FINSUB_1,ORDINAL1,FUNCT_7,MCART_1,WELLORD1,ORDERS_1,WELLFND1,CARD_1,NUMBERS,VALUED_0,XXREAL_0,REAL_1,FUNCT_1,SEQ_1,PRE_POLY,CARD_3,NAT_D,FINSEQ_1,RVSUM_1,WSIERP_1,FUNCOP_1,FUNCT_2,SEQ_4,DOMAIN_1,FINSEQOP,CLASSES1,RECDEF_1,NAT_1,STRUCT_0,WAYBEL_0,YELLOW_1,WAYBEL_4,PRALG_1,ORDERS_2,DICKSON,POLYNOM2,CKB6,CKB10,CKB15,CKB19;
definitions TARSKI,RELAT_2,WELLFND1,FINSEQ_2,CKB6,CKB10,CKB15,CKB19;
theorems WELLORD1,TARSKI,RELAT_2,RELSET_1,ZFMISC_1,ORDERS_2,NAT_1,FUNCT_1,AXIOMS,CARD_3,PBOOLE,YELLOW_1,PRALG_1,FUNCOP_1,PARTIT_2,WELLFND1,RELAT_1,DICKSON,FINSEQ_1,INTEGRA5,RVSUM_1,FINSEQ_2,CARD_1,WAYBEL_0,WAYBEL_4,ORDINAL1,FUNCT_2,CARD_2,MCART_1,FINSUB_1,ORDERS_1,FUNCT_7,WELLORD2,FINSEQ_3,FINSEQ_5,FINSEQOP,RFINSEQ,XBOOLE_0,XBOOLE_1,PARTFUN1,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,XXREAL_2,XREAL_0,NAT_D,CLASSES1,PRE_POLY,CKB1,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes NAT_1,RELSET_1,FINSET_1,RECDEF_1,FUNCT_2,ORDINAL1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,FINSUB_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,STRUCT_0,ORDERS_2,WAYBEL_0,YELLOW_1,DICKSON,VALUED_0,XXREAL_2,RELSET_1,PRE_POLY,CKB3,CKB7,CKB8,CKB11;
constructors DOMAIN_1,FINSEQOP,NAT_D,WSIERP_1,PRALG_1,TRIANG_1,WAYBEL_4,WELLFND1,POLYNOM2,DICKSON,SEQ_1,RECDEF_1,BINOP_2,SEQ_4,CLASSES1,RELSET_1,FUNCT_7,REAL_1,CKB6,CKB10,CKB15,CKB19;
requirements SUBSET,NUMERALS,REAL,BOOLE,ARITHM;
begin
theorem
Th13: (for n being Ordinal holds (for b being (bag of n) holds (for s being  finite (Subset of n) holds (for f,g being (FinSequence of ( NAT )) holds ((f = ( b * ( SgmX (( RelIncl n ),( support b )) ) ) & g = ( b * ( SgmX (( RelIncl n ),( ( support b ) \/ s )) ) )) implies ( Sum f ) = ( Sum g ))))))
proof
let n being Ordinal;
let b being (bag of n);
let s being  finite (Subset of n);
let f being (FinSequence of ( NAT )),g being (FinSequence of ( NAT ));
assume that
A1: f = ( b * ( SgmX (( RelIncl n ),( support b )) ) )
and
A2: g = ( b * ( SgmX (( RelIncl n ),( ( support b ) \/ s )) ) );
set sb = ( support b );
set sbs = ( sb \/ s );
set sbs9b = ( sbs \ sb );
set xsb = ( SgmX (( RelIncl n ),sb) );
set xsbs = ( SgmX (( RelIncl n ),sbs) );
set xsbs9b = ( SgmX (( RelIncl n ),sbs9b) );
set xs = ( xsb ^ xsbs9b );
set h = ( b * xs );
A3: ( dom b ) = n by PARTFUN1:def 2;
A4: ( field ( RelIncl n ) ) = n by WELLORD2:def 1;
A5: ( RelIncl n ) is  well-ordering by WELLORD2:6;
then A6: ( RelIncl n ) is  being_linear-order by ORDERS_1:19;
A7: ( RelIncl n ) linearly_orders n by A4,A5,ORDERS_1:19,ORDERS_1:37;
A8: ( RelIncl n ) linearly_orders sbs by A4,A6,ORDERS_1:37,ORDERS_1:38;
A9: ( RelIncl n ) linearly_orders sb by A4,A6,ORDERS_1:37,ORDERS_1:38;
A10: ( RelIncl n ) linearly_orders sbs9b by A4,A6,ORDERS_1:37,ORDERS_1:38;
A11: ( rng xsbs ) = sbs by A8,PRE_POLY:def 2;
A12: ( rng xsb ) = sb by A9,PRE_POLY:def 2;
A13: ( rng xsbs9b ) = sbs9b by A10,PRE_POLY:def 2;
then A14: ( rng xs ) = ( sb \/ sbs9b ) by A12,FINSEQ_1:31;
then reconsider h as FinSequence by A3,FINSEQ_1:16;
per cases ;
suppose n = ( {} );

hence thesis by A1,A2;
end;
suppose n <> ( {} );

then reconsider n as non empty Ordinal;
reconsider xsb,xsbs9b as (FinSequence of n);
( rng b ) c= ( REAL );
then reconsider b as (Function of n,( REAL )) by A3,FUNCT_2:2;
( rng h ) c= ( rng b ) by RELAT_1:26;
then ( rng h ) c= ( REAL ) by XBOOLE_1:1;
then reconsider h as (FinSequence of ( REAL )) by FINSEQ_1:def 4;
reconsider gr = g as (FinSequence of ( REAL )) by FINSEQ_2:24;
A15: sb misses sbs9b by XBOOLE_1:79;
A16: sbs = ( ( sb \/ sb ) \/ s )
.= ( sb \/ sbs ) by XBOOLE_1:4
.= ( sb \/ sbs9b ) by XBOOLE_1:39;
( len xs ) = ( ( len xsb ) + ( len xsbs9b ) ) by FINSEQ_1:22
.= ( ( card sb ) + ( len xsbs9b ) ) by A7,ORDERS_1:38,PRE_POLY:11
.= ( ( card sb ) + ( card sbs9b ) ) by A7,ORDERS_1:38,PRE_POLY:11
.= ( card sbs ) by A16,CARD_2:40,XBOOLE_1:79
.= ( len xsbs ) by A7,ORDERS_1:38,PRE_POLY:11;
then A17: ( dom xsbs ) = ( dom xs ) by FINSEQ_3:29;
A18: xsbs is  one-to-one by A7,ORDERS_1:38,PRE_POLY:10;
A19: ( rng xsb ) = sb by A9,PRE_POLY:def 2;
A20: ( rng xsbs9b ) = sbs9b by A10,PRE_POLY:def 2;
A21: xsb is  one-to-one by A7,ORDERS_1:38,PRE_POLY:10;
xsbs9b is  one-to-one by A7,ORDERS_1:38,PRE_POLY:10;
then xs is  one-to-one by A15,A19,A20,A21,FINSEQ_3:91;
then A22: gr,h are_fiberwise_equipotent  by A2,A3,A11,A14,A16,A17,A18,CKB4:1,RFINSEQ:26;
now
thus ( dom xsbs9b ) = ( dom ( b * xsbs9b ) ) by A3,A13,RELAT_1:27;
A23: ( dom xsbs9b ) = ( Seg ( len xsbs9b ) ) by FINSEQ_1:def 3;
hence ( dom xsbs9b ) = ( dom ( ( len xsbs9b ) |-> ( 0 ) ) ) by FUNCOP_1:13;
let x being set;
assume A24: x in ( dom xsbs9b );
then ( xsbs9b . x ) in ( rng xsbs9b ) by FUNCT_1:3;
then (not ( xsbs9b . x ) in sb) by A13,XBOOLE_0:def 5;
then ( b . ( xsbs9b . x ) ) = ( 0 ) by PRE_POLY:def 7;
hence ( ( b * xsbs9b ) . x ) = ( 0 ) by A24,FUNCT_1:13
.= ( ( ( len xsbs9b ) |-> ( 0 ) ) . x ) by A23,A24,FUNCOP_1:7;
end;
then A25: ( b * xsbs9b ) = ( ( len xsbs9b ) |-> (( 0 ) qua Real) ) by FUNCT_1:2;
h = ( ( b * xsb ) ^ ( b * xsbs9b ) ) by FINSEQOP:9;
then ( Sum h ) = ( ( Sum ( b * xsb ) ) + ( Sum ( b * xsbs9b ) ) ) by RVSUM_1:75
.= ( ( Sum f ) + (( 0 ) qua Nat) ) by A1,A25,RVSUM_1:81;
hence thesis by A22,RFINSEQ:9;
end;
end;
