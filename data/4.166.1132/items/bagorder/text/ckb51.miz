environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSEQ_1,ARYTM_1,ARYTM_3,XXREAL_0,CARD_1,NAT_1,PRE_POLY,FUNCT_1,RELAT_1,TARSKI,CLASSES1,FUNCT_2,CARD_3,FINSEQ_2,PBOOLE,GRAPH_2,VALUED_0,FINSUB_1,FINSET_1,RELAT_2,ORDERS_2,WAYBEL_4,STRUCT_0,WELLFND1,WELLORD1,ORDERS_1,ORDINAL1,WELLORD2,ORDINAL4,REAL_1,FUNCOP_1,FUNCT_4,PARTFUN1,DICKSON,RLVECT_2,ZFMISC_1,MCART_1,BAGORDER;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,XCMPLX_0,RELAT_1,PBOOLE,RELAT_2,RELSET_1,PARTFUN1,FINSET_1,FINSUB_1,ORDINAL1,FUNCT_7,MCART_1,WELLORD1,ORDERS_1,WELLFND1,CARD_1,NUMBERS,VALUED_0,XXREAL_0,REAL_1,FUNCT_1,SEQ_1,PRE_POLY,CARD_3,NAT_D,FINSEQ_1,RVSUM_1,WSIERP_1,FUNCOP_1,FUNCT_2,SEQ_4,DOMAIN_1,FINSEQOP,CLASSES1,RECDEF_1,NAT_1,STRUCT_0,WAYBEL_0,YELLOW_1,WAYBEL_4,PRALG_1,ORDERS_2,DICKSON,POLYNOM2,CKB6,CKB10,CKB15,CKB19,CKB30,CKB31,CKB32,CKB37,CKB41,CKB43,CKB44;
definitions TARSKI,RELAT_2,WELLFND1,FINSEQ_2,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44;
theorems WELLORD1,TARSKI,RELAT_2,RELSET_1,ZFMISC_1,ORDERS_2,NAT_1,FUNCT_1,AXIOMS,CARD_3,PBOOLE,YELLOW_1,PRALG_1,FUNCOP_1,PARTIT_2,WELLFND1,RELAT_1,DICKSON,FINSEQ_1,INTEGRA5,RVSUM_1,FINSEQ_2,CARD_1,WAYBEL_0,WAYBEL_4,ORDINAL1,FUNCT_2,CARD_2,MCART_1,FINSUB_1,ORDERS_1,FUNCT_7,WELLORD2,FINSEQ_3,FINSEQ_5,FINSEQOP,RFINSEQ,XBOOLE_0,XBOOLE_1,PARTFUN1,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,XXREAL_2,XREAL_0,NAT_D,CLASSES1,PRE_POLY,CKB1,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB32,CKB33,CKB36,CKB37,CKB38,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB48,CKB50;
schemes NAT_1,RELSET_1,FINSET_1,RECDEF_1,FUNCT_2,ORDINAL1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,FINSUB_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,STRUCT_0,ORDERS_2,WAYBEL_0,YELLOW_1,DICKSON,VALUED_0,XXREAL_2,RELSET_1,PRE_POLY,CKB3,CKB7,CKB8,CKB11,CKB34,CKB35,CKB39,CKB46,CKB49;
constructors DOMAIN_1,FINSEQOP,NAT_D,WSIERP_1,PRALG_1,TRIANG_1,WAYBEL_4,WELLFND1,POLYNOM2,DICKSON,SEQ_1,RECDEF_1,BINOP_2,SEQ_4,CLASSES1,RELSET_1,FUNCT_7,REAL_1,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44;
requirements SUBSET,NUMERALS,REAL,BOOLE,ARITHM;
begin
definition
let i being Nat;
let n being Nat;
let o1 being (TermOrder of ( i + 1 ));
let o2 being (TermOrder of ( n -' ( i + 1 ) ));
func BlockOrder (i,n,o1,o2) -> (TermOrder of n) means 
:Def12: (for p,q being (bag of n) holds ([ p,q ] in it iff ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2))));
existence
proof
A1: ( i + 1 ) = ( ( i + 1 ) -' ( 0 ) ) by NAT_D:40;
defpred P[ set,set ]
 means
(ex p,q being (bag of n) st (($1 = p & $2 = q) & ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2))));
consider BO being (Relation of ( Bags n ),( Bags n )) such that A2: (for x,y being set holds ([ x,y ] in BO iff ((x in ( Bags n ) & y in ( Bags n )) & P[ x,y ]))) from RELSET_1:sch 1;
now
let x being set;
assume that
A3: x in ( Bags n );
reconsider x9 = x as (bag of n) by A3;
A4: ( (( 0 ),( i + 1 )) -cut x9 ) = ( (( 0 ),( i + 1 )) -cut x9 );
( (( i + 1 ),n) -cut x9 ) in ( Bags ( n -' ( i + 1 ) ) ) by PRE_POLY:def 12;
then [ ( (( i + 1 ),n) -cut x9 ),( (( i + 1 ),n) -cut x9 ) ] in o2 by ORDERS_1:3;
hence [ x,x ] in BO by A2,A3,A4;
end;
then A5: BO is_reflexive_in ( Bags n ) by RELAT_2:def 1;
now
let x being set;
let y being set;
assume that
x in ( Bags n )
and
y in ( Bags n )
and
A6: [ x,y ] in BO
and
A7: [ y,x ] in BO;
consider p,q being (bag of n) such that A8: x = p and A9: y = q and A10: ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2)) by A2,A6;
A11: (ex q9,p9 being (bag of n) st ((y = q9 & x = p9) & ((( (( 0 ),( i + 1 )) -cut q9 ) <> ( (( 0 ),( i + 1 )) -cut p9 ) & [ ( (( 0 ),( i + 1 )) -cut q9 ),( (( 0 ),( i + 1 )) -cut p9 ) ] in o1) or (( (( 0 ),( i + 1 )) -cut q9 ) = ( (( 0 ),( i + 1 )) -cut p9 ) & [ ( (( i + 1 ),n) -cut q9 ),( (( i + 1 ),n) -cut p9 ) ] in o2)))) by A2,A7;
set CUTP1 = ( (( 0 ),( i + 1 )) -cut p );
set CUTP2 = ( (( i + 1 ),n) -cut p );
set CUTQ1 = ( (( 0 ),( i + 1 )) -cut q );
set CUTQ2 = ( (( i + 1 ),n) -cut q );
A12: CUTP1 in ( Bags ( ( i + 1 ) -' ( 0 ) ) ) by PRE_POLY:def 12;
A13: CUTQ1 in ( Bags ( ( i + 1 ) -' ( 0 ) ) ) by PRE_POLY:def 12;
A14: CUTP2 in ( Bags ( n -' ( i + 1 ) ) ) by PRE_POLY:def 12;
A15: CUTQ2 in ( Bags ( n -' ( i + 1 ) ) ) by PRE_POLY:def 12;
per cases  by A10;
suppose A16: (CUTP1 <> CUTQ1 & [ CUTP1,CUTQ1 ] in o1);

now
per cases  by A8,A9,A11;
suppose (CUTQ1 <> CUTP1 & [ CUTQ1,CUTP1 ] in o1);

hence x = y by A1,A12,A13,A16,ORDERS_1:4;
end;
suppose (CUTQ1 = CUTP1 & [ CUTQ2,CUTP2 ] in o2);

hence x = y by A16;
end;
end;
hence x = y;
end;
suppose A17: (CUTP1 = CUTQ1 & [ CUTP2,CUTQ2 ] in o2);

now
per cases  by A8,A9,A11;
suppose (CUTQ1 <> CUTP1 & [ CUTQ1,CUTP1 ] in o1);

hence x = y by A17;
end;
suppose (CUTQ1 = CUTP1 & [ CUTQ2,CUTP2 ] in o2);

then CUTQ2 = CUTP2 by A14,A15,A17,ORDERS_1:4;
hence x = y by A8,A9,A17,CKB9:1;
end;
end;
hence x = y;
end;
end;
then A18: BO is_antisymmetric_in ( Bags n ) by RELAT_2:def 4;
now
let x being set;
let y being set;
let z being set;
assume that
A19: x in ( Bags n )
and
y in ( Bags n )
and
A20: z in ( Bags n )
and
A21: [ x,y ] in BO
and
A22: [ y,z ] in BO;
consider x9,y9 being (bag of n) such that A23: x9 = x and A24: y9 = y and A25: ((( (( 0 ),( i + 1 )) -cut x9 ) <> ( (( 0 ),( i + 1 )) -cut y9 ) & [ ( (( 0 ),( i + 1 )) -cut x9 ),( (( 0 ),( i + 1 )) -cut y9 ) ] in o1) or (( (( 0 ),( i + 1 )) -cut x9 ) = ( (( 0 ),( i + 1 )) -cut y9 ) & [ ( (( i + 1 ),n) -cut x9 ),( (( i + 1 ),n) -cut y9 ) ] in o2)) by A2,A21;
consider y99,z9 being (bag of n) such that A26: y99 = y and A27: z9 = z and A28: ((( (( 0 ),( i + 1 )) -cut y99 ) <> ( (( 0 ),( i + 1 )) -cut z9 ) & [ ( (( 0 ),( i + 1 )) -cut y99 ),( (( 0 ),( i + 1 )) -cut z9 ) ] in o1) or (( (( 0 ),( i + 1 )) -cut y99 ) = ( (( 0 ),( i + 1 )) -cut z9 ) & [ ( (( i + 1 ),n) -cut y99 ),( (( i + 1 ),n) -cut z9 ) ] in o2)) by A2,A22;
set CUTX1 = ( (( 0 ),( i + 1 )) -cut x9 );
set CUTX2 = ( (( i + 1 ),n) -cut x9 );
set CUTY1 = ( (( 0 ),( i + 1 )) -cut y9 );
set CUTY2 = ( (( i + 1 ),n) -cut y9 );
set CUTZ1 = ( (( 0 ),( i + 1 )) -cut z9 );
set CUTZ2 = ( (( i + 1 ),n) -cut z9 );
A29: CUTX1 in ( Bags ( ( i + 1 ) -' ( 0 ) ) ) by PRE_POLY:def 12;
A30: CUTY1 in ( Bags ( ( i + 1 ) -' ( 0 ) ) ) by PRE_POLY:def 12;
A31: CUTZ1 in ( Bags ( ( i + 1 ) -' ( 0 ) ) ) by PRE_POLY:def 12;
A32: CUTX2 in ( Bags ( n -' ( i + 1 ) ) ) by PRE_POLY:def 12;
A33: CUTY2 in ( Bags ( n -' ( i + 1 ) ) ) by PRE_POLY:def 12;
A34: CUTZ2 in ( Bags ( n -' ( i + 1 ) ) ) by PRE_POLY:def 12;
per cases  by A25;
suppose A35: (CUTX1 <> CUTY1 & [ CUTX1,CUTY1 ] in o1);

now
per cases  by A24,A26,A28;
suppose A36: (CUTY1 <> CUTZ1 & [ CUTY1,CUTZ1 ] in o1);

then A37: [ CUTX1,CUTZ1 ] in o1 by A1,A29,A30,A31,A35,ORDERS_1:5;
now
per cases ;
suppose CUTX1 <> CUTZ1;

hence [ x,z ] in BO by A2,A19,A20,A23,A27,A37;
end;
suppose CUTX1 = CUTZ1;

hence [ x,z ] in BO by A1,A29,A30,A35,A36,ORDERS_1:4;
end;
end;
hence [ x,z ] in BO;
end;
suppose (CUTY1 = CUTZ1 & [ CUTY2,CUTZ2 ] in o2);

hence [ x,z ] in BO by A2,A19,A20,A23,A27,A35;
end;
end;
hence [ x,z ] in BO;
end;
suppose A38: (CUTX1 = CUTY1 & [ CUTX2,CUTY2 ] in o2);

now
per cases  by A24,A26,A28;
suppose (CUTY1 <> CUTZ1 & [ CUTY1,CUTZ1 ] in o1);

hence [ x,z ] in BO by A2,A19,A20,A23,A27,A38;
end;
suppose A39: (CUTY1 = CUTZ1 & [ CUTY2,CUTZ2 ] in o2);

then [ CUTX2,CUTZ2 ] in o2 by A32,A33,A34,A38,ORDERS_1:5;
hence [ x,z ] in BO by A2,A19,A20,A23,A27,A38,A39;
end;
end;
hence [ x,z ] in BO;
end;
end;
then A40: BO is_transitive_in ( Bags n ) by RELAT_2:def 8;
A41: ( dom BO ) = ( Bags n ) by A5,ORDERS_1:13;
( field BO ) = ( Bags n ) by A5,ORDERS_1:13;
then reconsider BO as (TermOrder of n) by A5,A18,A40,A41,PARTFUN1:def 2,RELAT_2:def 9,RELAT_2:def 12,RELAT_2:def 16;
take BO;
let p being (bag of n);
let q being (bag of n);
hereby
assume [ p,q ] in BO;
then (ex p9,q9 being (bag of n) st ((p9 = p & q9 = q) & ((( (( 0 ),( i + 1 )) -cut p9 ) <> ( (( 0 ),( i + 1 )) -cut q9 ) & [ ( (( 0 ),( i + 1 )) -cut p9 ),( (( 0 ),( i + 1 )) -cut q9 ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p9 ) = ( (( 0 ),( i + 1 )) -cut q9 ) & [ ( (( i + 1 ),n) -cut p9 ),( (( i + 1 ),n) -cut q9 ) ] in o2)))) by A2;
hence ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2));
end;
assume that
A42: ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2));
A43: p in ( Bags n ) by PRE_POLY:def 12;
q in ( Bags n ) by PRE_POLY:def 12;
hence thesis by A2,A42,A43;
end;
uniqueness
proof
let IT1 being (TermOrder of n);
let IT2 being (TermOrder of n);
assume that
A44: (for p,q being (bag of n) holds ([ p,q ] in IT1 iff ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2))))
and
A45: (for p,q being (bag of n) holds ([ p,q ] in IT2 iff ((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2))));
now
let a being set;
let b being set;
hereby
assume A46: [ a,b ] in IT1;
then A47: a in ( dom IT1 ) by RELAT_1:6;
b in ( rng IT1 ) by A46,RELAT_1:6;
then reconsider p = a,q = b as (bag of n) by A47;
((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2)) by A44,A46;
hence [ a,b ] in IT2 by A45;
end;
assume A48: [ a,b ] in IT2;
then A49: a in ( dom IT2 ) by RELAT_1:6;
b in ( rng IT2 ) by A48,RELAT_1:6;
then reconsider p = a,q = b as (bag of n) by A49;
((( (( 0 ),( i + 1 )) -cut p ) <> ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( 0 ),( i + 1 )) -cut p ),( (( 0 ),( i + 1 )) -cut q ) ] in o1) or (( (( 0 ),( i + 1 )) -cut p ) = ( (( 0 ),( i + 1 )) -cut q ) & [ ( (( i + 1 ),n) -cut p ),( (( i + 1 ),n) -cut q ) ] in o2)) by A45,A48;
hence [ a,b ] in IT1 by A44;
end;
hence IT1 = IT2 by RELAT_1:def 2;
end;
end;
