environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSEQ_1,ARYTM_1,ARYTM_3,XXREAL_0,CARD_1,NAT_1,PRE_POLY,FUNCT_1,RELAT_1,TARSKI,CLASSES1,FUNCT_2,CARD_3,FINSEQ_2,PBOOLE,GRAPH_2,VALUED_0,FINSUB_1,FINSET_1,RELAT_2,ORDERS_2,WAYBEL_4,STRUCT_0,WELLFND1,WELLORD1,ORDERS_1,ORDINAL1,WELLORD2,ORDINAL4,REAL_1,FUNCOP_1,FUNCT_4,PARTFUN1,DICKSON,RLVECT_2,ZFMISC_1,MCART_1,BAGORDER;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,XCMPLX_0,RELAT_1,PBOOLE,RELAT_2,RELSET_1,PARTFUN1,FINSET_1,FINSUB_1,ORDINAL1,FUNCT_7,MCART_1,WELLORD1,ORDERS_1,WELLFND1,CARD_1,NUMBERS,VALUED_0,XXREAL_0,REAL_1,FUNCT_1,SEQ_1,PRE_POLY,CARD_3,NAT_D,FINSEQ_1,RVSUM_1,WSIERP_1,FUNCOP_1,FUNCT_2,SEQ_4,DOMAIN_1,FINSEQOP,CLASSES1,RECDEF_1,NAT_1,STRUCT_0,WAYBEL_0,YELLOW_1,WAYBEL_4,PRALG_1,ORDERS_2,DICKSON,POLYNOM2,CKB6,CKB10,CKB15,CKB19,CKB30,CKB31,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58;
definitions TARSKI,RELAT_2,WELLFND1,FINSEQ_2,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58;
theorems WELLORD1,TARSKI,RELAT_2,RELSET_1,ZFMISC_1,ORDERS_2,NAT_1,FUNCT_1,AXIOMS,CARD_3,PBOOLE,YELLOW_1,PRALG_1,FUNCOP_1,PARTIT_2,WELLFND1,RELAT_1,DICKSON,FINSEQ_1,INTEGRA5,RVSUM_1,FINSEQ_2,CARD_1,WAYBEL_0,WAYBEL_4,ORDINAL1,FUNCT_2,CARD_2,MCART_1,FINSUB_1,ORDERS_1,FUNCT_7,WELLORD2,FINSEQ_3,FINSEQ_5,FINSEQOP,RFINSEQ,XBOOLE_0,XBOOLE_1,PARTFUN1,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,XXREAL_2,XREAL_0,NAT_D,CLASSES1,PRE_POLY,CKB1,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB32,CKB33,CKB36,CKB37,CKB38,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58;
schemes NAT_1,RELSET_1,FINSET_1,RECDEF_1,FUNCT_2,ORDINAL1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,FINSUB_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,STRUCT_0,ORDERS_2,WAYBEL_0,YELLOW_1,DICKSON,VALUED_0,XXREAL_2,RELSET_1,PRE_POLY,CKB3,CKB7,CKB8,CKB11,CKB34,CKB35,CKB39,CKB46,CKB49;
constructors DOMAIN_1,FINSEQOP,NAT_D,WSIERP_1,PRALG_1,TRIANG_1,WAYBEL_4,WELLFND1,POLYNOM2,DICKSON,SEQ_1,RECDEF_1,BINOP_2,SEQ_4,CLASSES1,RELSET_1,FUNCT_7,REAL_1,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58;
requirements SUBSET,NUMERALS,REAL,BOOLE,ARITHM;
begin
definition
let R being  connected non empty Poset;
func FinOrd-Approx R -> (Function of ( NAT ),( bool [: ( Fin (the carrier of R) ),( Fin (the carrier of R) ) :] ))
means
:Def16: ((( dom it ) = ( NAT ) & ( it . ( 0 ) ) = { [ x,y ] where x is (Element of ( Fin (the carrier of R) )),y is (Element of ( Fin (the carrier of R) )): (x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in (the InternalRel of R))) }) & (for n being Nat holds ( it . ( n + 1 ) ) = { [ x,y ] where x is (Element of ( Fin (the carrier of R) )),y is (Element of ( Fin (the carrier of R) )): (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( it . n )) }));
existence
proof
set IR = (the InternalRel of R);
set CR = (the carrier of R);
set FBCP = [: ( Fin CR ),( Fin CR ) :];
defpred P[ Nat,set,set ]
 means
$3 = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in $2) };
A1: (for n being (Element of ( NAT )) holds (for x being set holds (ex y being set st P[ n,x,y ])));
consider f being Function such that A2: ( dom f ) = ( NAT ) and A3: ( f . ( 0 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR)) } and A4: (for n being (Element of ( NAT )) holds P[ n,( f . n ),( f . ( n + 1 ) ) ]) from RECDEF_1:sch 1(A1);
A5: (for n being Nat holds P[ n,( f . n ),( f . ( n + 1 ) ) ])
proof
let n being Nat;
n in ( NAT ) by ORDINAL1:def 12;
hence thesis by A4;
end;
now
thus ( dom f ) = ( NAT ) by A2;
let x being set;
assume x in ( NAT );
then reconsider x9 = x as (Element of ( NAT ));
per cases ;
suppose A6: x9 = ( 0 );

set F0 = { [ a,b ] where a is (Element of ( Fin (the carrier of R) )),b is (Element of ( Fin (the carrier of R) )): (a = ( {} ) or (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) <> ( PosetMax b )) & [ ( PosetMax a ),( PosetMax b ) ] in IR)) };
now
let z being set;
assume z in F0;
then (ex a,b being (Element of ( Fin CR )) st (z = [ a,b ] & (a = ( {} ) or (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) <> ( PosetMax b )) & [ ( PosetMax a ),( PosetMax b ) ] in IR))));
hence z in FBCP;
end;
then F0 c= FBCP by TARSKI:def 3;
hence ( f . x ) in ( bool [: ( Fin CR ),( Fin CR ) :] ) by A3,A6;
end;
suppose A7: x9 > ( 0 );

A8: x9 = ( ( x9 - 1 ) + 1 );
reconsider x1 = ( x9 - 1 ) as (Element of ( NAT )) by A7,NAT_1:20;
set FX = { [ a,b ] where a is (Element of ( Fin CR )),b is (Element of ( Fin CR )): (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) = ( PosetMax b )) & [ ( a \ { ( PosetMax a ) } ),( b \ { ( PosetMax b ) } ) ] in ( f . x1 )) };
A9: FX = ( f . x9 ) by A4,A8;
now
let z being set;
assume z in FX;
then (ex a,b being (Element of ( Fin CR )) st ((((z = [ a,b ] & a <> ( {} )) & b <> ( {} )) & ( PosetMax a ) = ( PosetMax b )) & [ ( a \ { ( PosetMax a ) } ),( b \ { ( PosetMax b ) } ) ] in ( f . x1 )));
hence z in FBCP;
end;
then FX c= FBCP by TARSKI:def 3;
hence ( f . x ) in ( bool [: ( Fin CR ),( Fin CR ) :] ) by A9;
end;
end;
then reconsider f as (Function of ( NAT ),( bool FBCP )) by FUNCT_2:3;
take f;
thus thesis by A2,A3,A5;
end;
uniqueness
proof
set IR = (the InternalRel of R);
set CR = (the carrier of R);
set FBCP = [: ( Fin CR ),( Fin CR ) :];
let IT1 being (Function of ( NAT ),( bool FBCP )),IT2 being (Function of ( NAT ),( bool FBCP ));
assume that
A10: ( dom IT1 ) = ( NAT )
and
A11: ( IT1 . ( 0 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR)) }
and
A12: (for n being Nat holds ( IT1 . ( n + 1 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( IT1 . n )) })
and
A13: ( dom IT2 ) = ( NAT )
and
A14: ( IT2 . ( 0 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR)) }
and
A15: (for n being Nat holds ( IT2 . ( n + 1 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( IT2 . n )) });
defpred P[ Nat,set,set ]
 means
$3 = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in $2) };
A16: ( dom IT1 ) = ( NAT ) by A10;
A17: ( IT1 . ( 0 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR)) } by A11;
A18: (for n being Nat holds P[ n,( IT1 . n ),( IT1 . ( n + 1 ) ) ]) by A12;
A19: ( dom IT2 ) = ( NAT ) by A13;
A20: ( IT2 . ( 0 ) ) = { [ x,y ] where x is (Element of ( Fin CR )),y is (Element of ( Fin CR )): (x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR)) } by A14;
A21: (for n being Nat holds P[ n,( IT2 . n ),( IT2 . ( n + 1 ) ) ]) by A15;
A22: (for n being Nat holds (for x,y1,y2 being set holds ((P[ n,x,y1 ] & P[ n,x,y2 ]) implies y1 = y2)));
thus IT1 = IT2 from NAT_1:sch 13(A16,A17,A18,A19,A20,A21,A22);
end;
end;
