environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSEQ_1,ARYTM_1,ARYTM_3,XXREAL_0,CARD_1,NAT_1,PRE_POLY,FUNCT_1,RELAT_1,TARSKI,CLASSES1,FUNCT_2,CARD_3,FINSEQ_2,PBOOLE,GRAPH_2,VALUED_0,FINSUB_1,FINSET_1,RELAT_2,ORDERS_2,WAYBEL_4,STRUCT_0,WELLFND1,WELLORD1,ORDERS_1,ORDINAL1,WELLORD2,ORDINAL4,REAL_1,FUNCOP_1,FUNCT_4,PARTFUN1,DICKSON,RLVECT_2,ZFMISC_1,MCART_1,BAGORDER;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,XCMPLX_0,RELAT_1,PBOOLE,RELAT_2,RELSET_1,PARTFUN1,FINSET_1,FINSUB_1,ORDINAL1,FUNCT_7,MCART_1,WELLORD1,ORDERS_1,WELLFND1,CARD_1,NUMBERS,VALUED_0,XXREAL_0,REAL_1,FUNCT_1,SEQ_1,PRE_POLY,CARD_3,NAT_D,FINSEQ_1,RVSUM_1,WSIERP_1,FUNCOP_1,FUNCT_2,SEQ_4,DOMAIN_1,FINSEQOP,CLASSES1,RECDEF_1,NAT_1,STRUCT_0,WAYBEL_0,YELLOW_1,WAYBEL_4,PRALG_1,ORDERS_2,DICKSON,POLYNOM2,CKB6,CKB10,CKB15,CKB19,CKB30,CKB31,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58,CKB59,CKB65,CKB66,CKB70;
definitions TARSKI,RELAT_2,WELLFND1,FINSEQ_2,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58,CKB59,CKB65,CKB66,CKB70;
theorems WELLORD1,TARSKI,RELAT_2,RELSET_1,ZFMISC_1,ORDERS_2,NAT_1,FUNCT_1,AXIOMS,CARD_3,PBOOLE,YELLOW_1,PRALG_1,FUNCOP_1,PARTIT_2,WELLFND1,RELAT_1,DICKSON,FINSEQ_1,INTEGRA5,RVSUM_1,FINSEQ_2,CARD_1,WAYBEL_0,WAYBEL_4,ORDINAL1,FUNCT_2,CARD_2,MCART_1,FINSUB_1,ORDERS_1,FUNCT_7,WELLORD2,FINSEQ_3,FINSEQ_5,FINSEQOP,RFINSEQ,XBOOLE_0,XBOOLE_1,PARTFUN1,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,XXREAL_2,XREAL_0,NAT_D,CLASSES1,PRE_POLY,CKB1,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB32,CKB33,CKB36,CKB37,CKB38,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB68,CKB70,CKB71;
schemes NAT_1,RELSET_1,FINSET_1,RECDEF_1,FUNCT_2,ORDINAL1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,FINSUB_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,STRUCT_0,ORDERS_2,WAYBEL_0,YELLOW_1,DICKSON,VALUED_0,XXREAL_2,RELSET_1,PRE_POLY,CKB3,CKB7,CKB8,CKB11,CKB34,CKB35,CKB39,CKB46,CKB49,CKB67,CKB69;
constructors DOMAIN_1,FINSEQOP,NAT_D,WSIERP_1,PRALG_1,TRIANG_1,WAYBEL_4,WELLFND1,POLYNOM2,DICKSON,SEQ_1,RECDEF_1,BINOP_2,SEQ_4,CLASSES1,RELSET_1,FUNCT_7,REAL_1,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58,CKB59,CKB65,CKB66,CKB70;
requirements SUBSET,NUMERALS,REAL,BOOLE,ARITHM;
begin
theorem
(for R being  connected non  empty Poset holds (R is  well_founded implies ( FinPoset R ) is  well_founded))
proof
let R being  connected non  empty Poset;
assume that
A1: R is  well_founded;
set IR = (the InternalRel of R);
set CR = (the carrier of R);
set FIR = ( FinOrd R );
set FCR = ( Fin CR );
assume (not ( FinPoset R ) is  well_founded);
then consider A being (sequence of ( FinPoset R )) such that A2: A is  descending by WELLFND1:14;
set zz = { z where z is (sequence of ( FinPoset R )): z is  descending };
A in zz by A2;
then reconsider zz as non  empty set;
set Z = [: CR,zz :];
defpred S[ Nat,set,set ]
 means
(ex Sn2 being (sequence of ( FinPoset R )) st (ex Smax being (Function of ( NAT ),CR) st (ex an being (Element of R) st (ex ix being Nat st (ex bnt being (sequence of ( FinPoset R )) st (ex bn being (sequence of ( FinPoset R )) st (((((((Sn2 = ( $2 `2 ) & (for i being Nat holds (ex Sn2i being (Element of ( Fin CR )) st ((Sn2i = ( Sn2 . i ) & Sn2i <> ( {} )) & ( Smax . i ) = ( PosetMax Sn2i ))))) & an = ( MinElement (( rng Smax ),R) )) & ix = ( Smax mindex an )) & bnt = ( Sn2 ^\ ix )) & (for i being Nat holds ( bn . i ) = ( ( bnt . i ) \ { an } ))) & (for i being Nat holds (ix <= i implies ( Smax . i ) = an))) & $3 = [ an,bn ])))))));
A3: (for n being (Element of ( NAT )) holds (for Sn being (Element of Z) holds (ex Sn1 being (Element of Z) st S[ n,Sn,Sn1 ])))
proof
let n being (Element of ( NAT ));
let Sn being (Element of Z);
set Sn2 = ( Sn `2 );
Sn2 in zz;
then A4: (ex z being (sequence of ( FinPoset R )) st (z = Sn2 & z is  descending));
then reconsider Sn2 as (sequence of ( FinPoset R ));
A5:now
let i being Nat;
assume A6: ( Sn2 . i ) = ( {} );
A7: ( Sn2 . ( i + 1 ) ) <> ( Sn2 . i ) by A4,WELLFND1:def 6;
[ ( Sn2 . ( i + 1 ) ),( Sn2 . i ) ] in FIR by A4,WELLFND1:def 6;
hence contradiction by A6,A7,CKB61:1;
end;
defpred P[ Nat,set ]
 means
(ex Sn2i being (Element of ( Fin CR )) st ((Sn2i = ( Sn2 . $1 ) & Sn2i <> ( {} )) & $2 = ( PosetMax Sn2i )));
A8: (for i being (Element of ( NAT )) holds (ex y being (Element of CR) st P[ i,y ]))
proof
let i being (Element of ( NAT ));
set Sn2i = ( Sn2 . i );
reconsider Sn2i as (Element of ( Fin CR ));
set y = ( PosetMax Sn2i );
take y;
take Sn2i;
thus Sn2i = ( Sn2 . i );
thus Sn2i <> ( {} ) by A5;
thus thesis;
end;
consider Smax being (Function of ( NAT ),CR) such that A9: (for i being (Element of ( NAT )) holds P[ i,( Smax . i ) ]) from FUNCT_2:sch 3(A8);
set an = ( MinElement (( rng Smax ),R) );
set ix = ( Smax mindex an );
set bnt = ( Sn2 ^\ ix );
defpred R[ set,set ]
 means
(ex bni being (Element of FCR) st (bni = ( ( bnt . $1 ) \ { an } ) & $2 = bni));
now
let i being Nat;
set bni = ( ( bnt . i ) \ { an } );
reconsider k = ( bnt . i ) as  finite (Subset of CR) by FINSUB_1:def 5;
( k \ { an } ) in FCR by FINSUB_1:def 5;
then reconsider bni as (Element of FCR);
set y = bni;
take y;
take bni;
thus bni = ( ( bnt . i ) \ { an } );
thus y = bni;
end;
then A10: (for i being (Element of ( NAT )) holds (ex y being (Element of FCR) st R[ i,y ]));
defpred P[ Nat ]
 means
( Smax . ( ix + $1 ) ) = an;
A11: ( dom Smax ) = ( NAT ) by FUNCT_2:def 1;
A12: ( rng Smax ) c= CR by RELAT_1:def 19;
then A13: an in ( rng Smax ) by A1,CKB70:def 1;
A14: an is_minimal_wrt ( rng Smax ),IR by A1,A12,CKB70:def 1;
A15: P[ ( 0 ) ] by A11,A13,DICKSON:def 11;
A16:now
let k being Nat;
assume that
A17: P[ k ];
set ixk = ( ix + k );
set ixk1 = ( ix + ( k + 1 ) );
set ixk19 = ( ( ix + k ) + 1 );
consider Sn2ixk being (Element of ( Fin CR )) such that A18: Sn2ixk = ( Sn2 . ixk ) and Sn2ixk <> ( {} ) and A19: ( Smax . ixk ) = ( PosetMax Sn2ixk ) by A9;
consider Sn2ixk1 being (Element of ( Fin CR )) such that A20: Sn2ixk1 = ( Sn2 . ixk1 ) and A21: Sn2ixk1 <> ( {} ) and A22: ( Smax . ixk1 ) = ( PosetMax Sn2ixk1 ) by A9;
reconsider Sn2ixk9 = Sn2ixk,Sn2ixk19 = Sn2ixk1 as (Element of ( FinPoset R ));
ixk1 = ixk19;
then [ Sn2ixk19,Sn2ixk9 ] in FIR by A4,A18,A20,WELLFND1:def 6;
then consider x,y being (Element of ( Fin CR )) such that A23: Sn2ixk1 = x and A24: Sn2ixk = y and A25: ((x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR)) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( FinOrd R ))) by CKB68:1;
per cases  by A25;
suppose x = ( {} );

hence P[ ( k + 1 ) ] by A21,A23;
end;
suppose A26: (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR);

( Smax . ixk1 ) in ( rng Smax ) by A11,FUNCT_1:def 3;
hence P[ ( k + 1 ) ] by A14,A17,A19,A22,A23,A24,A26,WAYBEL_4:def 25;
end;
suppose (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( FinOrd R ));

hence P[ ( k + 1 ) ] by A17,A19,A22,A23,A24;
end;
end;
A27: (for k being Nat holds P[ k ]) from NAT_1:sch 2(A15,A16);
A28:now
let i being Nat;
assume ix <= i;
then consider k being Nat such that A29: i = ( ix + k ) by NAT_1:10;
reconsider k as Nat;
i = ( ix + k ) by A29;
hence ( Smax . i ) = an by A27;
end;
A30:now
let i being Nat;
assume that
A31: ix <= i;
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
consider Sn2i being (Element of ( Fin CR )) such that A32: Sn2i = ( Sn2 . i ) and Sn2i <> ( {} ) and A33: ( Smax . i0 ) = ( PosetMax Sn2i ) by A9;
take Sn2i;
thus Sn2i = ( Sn2 . i ) by A32;
thus ( PosetMax Sn2i ) = an by A28,A31,A33;
end;
A34:now
let i being Nat;
set bnti = ( bnt . i );
reconsider bnti as (Element of ( Fin CR ));
take bnti;
thus bnti = ( bnt . i );
set iix = ( i + ix );
(ex Sn2iix being (Element of ( Fin CR )) st (Sn2iix = ( Sn2 . iix ) & ( PosetMax Sn2iix ) = an)) by A30,NAT_1:11;
hence ( PosetMax bnti ) = an by NAT_1:def 3;
end;
consider bn being (Function of ( NAT ),FCR) such that A35: (for i being (Element of ( NAT )) holds R[ i,( bn . i ) ]) from FUNCT_2:sch 3(A10);
reconsider bn as (sequence of ( FinPoset R ));
set Sn1 = [ an,bn ];
A36: bnt is  descending by A4,CKB71:1;
now
let i being Nat;
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
A37: (ex bni being (Element of FCR) st (bni = ( ( bnt . i0 ) \ { an } ) & ( bn . i0 ) = bni)) by A35;
A38: (ex bni1 being (Element of FCR) st (bni1 = ( ( bnt . ( i + 1 ) ) \ { an } ) & ( bn . ( i + 1 ) ) = bni1)) by A35;
reconsider bnti = ( bnt . i ),bnti1 = ( bnt . ( i + 1 ) ) as (Element of ( FinPoset R ));
reconsider bnti9 = bnti,bnti19 = bnti1 as (Element of ( Fin CR ));
A39: bnti1 <> bnti by A36,WELLFND1:def 6;
[ bnti1,bnti ] in FIR by A36,WELLFND1:def 6;
then consider x,y being (Element of ( Fin CR )) such that A40: bnti1 = x and A41: bnti = y and A42: ((x = ( {} ) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in (the InternalRel of R))) or (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( FinOrd R ))) by CKB68:1;
A43:now
let i being Nat;
( bnt . i ) = ( Sn2 . ( i + ix ) ) by NAT_1:def 3;
hence ( bnt . i ) <> ( {} ) by A5;
end;
A44:now
A45: (ex bnti99 being (Element of ( Fin CR )) st (bnti99 = ( bnt . i ) & ( PosetMax bnti99 ) = an)) by A34;
(ex bnti199 being (Element of ( Fin CR )) st (bnti199 = ( bnt . ( i + 1 ) ) & ( PosetMax bnti199 ) = an)) by A34;
hence (( PosetMax bnti9 ) = an & ( PosetMax bnti19 ) = an) by A45;
end;
A46: bnti9 <> ( {} ) by A43;
A47: bnti19 <> ( {} ) by A43;
A48: an in bnti by A44,A46,CKB58:def 1;
an in bnti1 by A44,A47,CKB58:def 1;
hence ( bn . ( i + 1 ) ) <> ( bn . i ) by A37,A38,A39,A48,CKB1:1;
per cases  by A42;
suppose x = ( {} );

hence [ ( bn . ( i + 1 ) ),( bn . i ) ] in FIR by A40,A43;
end;
suppose (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) <> ( PosetMax y )) & [ ( PosetMax x ),( PosetMax y ) ] in IR);

hence [ ( bn . ( i + 1 ) ),( bn . i ) ] in FIR by A40,A41,A44;
end;
suppose (((x <> ( {} ) & y <> ( {} )) & ( PosetMax x ) = ( PosetMax y )) & [ ( x \ { ( PosetMax x ) } ),( y \ { ( PosetMax y ) } ) ] in ( FinOrd R ));

hence [ ( bn . ( i + 1 ) ),( bn . i ) ] in FIR by A37,A38,A40,A41,A44;
end;
end;
then bn is  descending by WELLFND1:def 6;
then bn in zz;
then reconsider Sn1 as (Element of Z) by ZFMISC_1:def 2;
take Sn1;
take Sn2;
take Smax;
take an;
take ix;
take bnt;
take bn;
thus Sn2 = ( Sn `2 );
thus (for i being Nat holds (ex Sn2i being (Element of ( Fin CR )) st ((Sn2i = ( Sn2 . i ) & Sn2i <> ( {} )) & ( Smax . i ) = ( PosetMax Sn2i ))))
proof
let i being Nat;
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
(ex Sn2i being (Element of ( Fin CR )) st ((Sn2i = ( Sn2 . i ) & Sn2i <> ( {} )) & ( Smax . i0 ) = ( PosetMax Sn2i ))) by A9;
hence thesis;
end;

thus an = ( MinElement (( rng Smax ),R) );
thus ix = ( Smax mindex an );
thus bnt = ( Sn2 ^\ ix );
now
let i being Nat;
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
(ex bni being (Element of FCR) st (bni = ( ( bnt . i0 ) \ { an } ) & ( bn . i0 ) = bni)) by A35;
hence ( bn . i ) = ( ( bnt . i ) \ { an } );
end;
hence (for i being Nat holds ( bn . i ) = ( ( bnt . i ) \ { an } ));
thus (for i being Nat holds (ix <= i implies ( Smax . i ) = an)) by A28;
thus thesis;
end;
set aStart = the (Element of R);
set SS = [ aStart,A ];
A in zz by A2;
then reconsider SS as (Element of Z) by ZFMISC_1:def 2;
consider S01 being (Element of Z),S02 being (sequence of ( FinPoset R )),S0max being (Function of ( NAT ),CR),a0 being (Element of R),i0 being Nat,b0t,b0 being (sequence of ( FinPoset R )) such that S02 = ( SS `2 ) and A49: (for i being Nat holds (ex S02i being (Element of ( Fin CR )) st ((S02i = ( S02 . i ) & S02i <> ( {} )) & ( S0max . i ) = ( PosetMax S02i )))) and a0 = ( MinElement (( rng S0max ),R) ) and i0 = ( S0max mindex a0 ) and A50: b0t = ( S02 ^\ i0 ) and A51: (for i being Nat holds ( b0 . i ) = ( ( b0t . i ) \ { a0 } )) and A52: (for i being Nat holds (i0 <= i implies ( S0max . i ) = a0)) and A53: S01 = [ a0,b0 ] by A3;
consider S being (Function of ( NAT ),Z) such that A54: ( S . ( 0 ) ) = S01 and A55: (for n being (Element of ( NAT )) holds S[ n,( S . n ),( S . ( n + 1 ) ) ]) from RECDEF_1:sch 2(A3);
A56: (for n being Nat holds S[ n,( S . n ),( S . ( n + 1 ) ) ])
proof
let n being Nat;
reconsider n0 = n as (Element of ( NAT )) by ORDINAL1:def 12;
S[ n0,( S . n0 ),( S . ( n0 + 1 ) ) ] by A55;
hence thesis;
end;
deffunc F(set) = ( ( S . $1 ) `1 );
A57:now
let x being set;
assume x in ( NAT );
then reconsider x9 = x as Nat;
reconsider Sx = ( S . x9 ) as (Element of [: CR,zz :]);
( Sx `1 ) in CR;
hence F(x) in CR;
end;
consider a being (Function of ( NAT ),CR) such that A58: (for x being set holds (x in ( NAT ) implies ( a . x ) = F(x))) from FUNCT_2:sch 2(A57);
reconsider a as (sequence of R);
defpred PP[ Nat ]
 means
(for i being Nat holds (ex b being (sequence of ( FinPoset R )) st (b = ( ( S . $1 ) `2 ) & (for x being set holds (x in ( b . i ) implies (x <> ( ( S . $1 ) `1 ) & [ x,( ( S . $1 ) `1 ) ] in IR))))));
A59: PP[ ( 0 ) ]
proof
let i being Nat;
set b = ( ( S . ( 0 ) ) `2 );
b in zz;
then (ex z being (sequence of ( FinPoset R )) st (z = b & z is  descending));
then reconsider b as (sequence of ( FinPoset R ));
take b;
thus b = ( ( S . ( 0 ) ) `2 );
let x being set;
assume that
A60: x in ( b . i );
A61: a0 = ( ( S . ( 0 ) ) `1 ) by A53,A54,MCART_1:def 1;
b0 = b by A53,A54,MCART_1:def 2;
then A62: x in ( ( b0t . i ) \ { a0 } ) by A51,A60;
then A63: x in ( b0t . i );
(not x in { a0 }) by A62,XBOOLE_0:def 5;
hence A64: x <> ( ( S . ( 0 ) ) `1 ) by A61,TARSKI:def 1;
( b . i ) c= CR by FINSUB_1:def 5;
then reconsider x9 = x as (Element of R) by A60;
A65: x in ( S02 . ( i + i0 ) ) by A50,A63,NAT_1:def 3;
consider S02ib being (Element of ( Fin CR )) such that A66: S02ib = ( S02 . ( i + i0 ) ) and A67: S02ib <> ( {} ) and A68: ( S0max . ( i + i0 ) ) = ( PosetMax S02ib ) by A49;
( PosetMax S02ib ) = a0 by A52,A68,NAT_1:11;
then a0 is_maximal_wrt S02ib,IR by A67,CKB58:def 1;
then (not [ a0,x ] in IR) by A61,A64,A65,A66,WAYBEL_4:def 23;
then (not a0 <= x9) by ORDERS_2:def 5;
then x9 <= a0 by WAYBEL_0:def 29;
hence thesis by A61,ORDERS_2:def 5;
end;
A69: (for n being Nat holds (PP[ n ] implies PP[ ( n + 1 ) ]))
proof
let n being Nat;
assume PP[ n ];
let i being Nat;
set n1 = ( n + 1 );
reconsider n1 as Nat;
set b = ( ( S . n1 ) `2 );
consider Sn2 being (sequence of ( FinPoset R )),Smax being (Function of ( NAT ),CR),an being (Element of R),ix being Nat,bnt,bn being (sequence of ( FinPoset R )) such that Sn2 = ( ( S . n ) `2 ) and A70: (for i being Nat holds (ex Sn2i being (Element of ( Fin CR )) st ((Sn2i = ( Sn2 . i ) & Sn2i <> ( {} )) & ( Smax . i ) = ( PosetMax Sn2i )))) and an = ( MinElement (( rng Smax ),R) ) and ix = ( Smax mindex an ) and A71: bnt = ( Sn2 ^\ ix ) and A72: (for i being Nat holds ( bn . i ) = ( ( bnt . i ) \ { an } )) and A73: (for i being Nat holds (ix <= i implies ( Smax . i ) = an)) and A74: ( S . ( n + 1 ) ) = [ an,bn ] by A56;
b in zz;
then (ex z being (sequence of ( FinPoset R )) st (z = b & z is  descending));
then reconsider b as (sequence of ( FinPoset R ));
take b;
thus b = ( ( S . ( n + 1 ) ) `2 );
let x being set;
assume that
A75: x in ( b . i );
A76: an = ( ( S . n1 ) `1 ) by A74,MCART_1:def 1;
bn = b by A74,MCART_1:def 2;
then A77: x in ( ( bnt . i ) \ { an } ) by A72,A75;
then A78: x in ( bnt . i );
(not x in { an }) by A77,XBOOLE_0:def 5;
hence A79: x <> ( ( S . ( n + 1 ) ) `1 ) by A76,TARSKI:def 1;
( b . i ) c= CR by FINSUB_1:def 5;
then reconsider x9 = x as (Element of R) by A75;
A80: x in ( Sn2 . ( i + ix ) ) by A71,A78,NAT_1:def 3;
consider Sn2ib being (Element of ( Fin CR )) such that A81: Sn2ib = ( Sn2 . ( i + ix ) ) and A82: Sn2ib <> ( {} ) and A83: ( Smax . ( i + ix ) ) = ( PosetMax Sn2ib ) by A70;
( PosetMax Sn2ib ) = an by A73,A83,NAT_1:11;
then an is_maximal_wrt Sn2ib,IR by A82,CKB58:def 1;
then (not [ an,x ] in IR) by A76,A79,A80,A81,WAYBEL_4:def 23;
then (not an <= x9) by ORDERS_2:def 5;
then x9 <= an by WAYBEL_0:def 29;
hence thesis by A76,ORDERS_2:def 5;
end;
A84: (for n being Nat holds PP[ n ]) from NAT_1:sch 2(A59,A69);
defpred P3[ Nat ]
 means
(ex b being (sequence of ( FinPoset R )) st (ex i being Nat st (b = ( ( S . $1 ) `2 ) & ( a . ( $1 + 1 ) ) in ( b . i ))));
A85: P3[ ( 0 ) ]
proof
set b = ( ( S . ( 0 ) ) `2 );
b in zz;
then (ex z being (sequence of ( FinPoset R )) st (z = b & z is  descending));
then reconsider b as (sequence of ( FinPoset R ));
take b;
A86: ( a . ( (( 0 ) qua Nat) + 1 ) ) = ( ( S . ( (( 0 ) qua Nat) + 1 ) ) `1 ) by A58;
consider S12 being (sequence of ( FinPoset R )),S1max being (Function of ( NAT ),CR),a1 being (Element of R),i1 being Nat,b1t,b1 being (sequence of ( FinPoset R )) such that A87: S12 = ( ( S . ( 0 ) ) `2 ) and A88: (for i being Nat holds (ex S12i being (Element of ( Fin CR )) st ((S12i = ( S12 . i ) & S12i <> ( {} )) & ( S1max . i ) = ( PosetMax S12i )))) and A89: a1 = ( MinElement (( rng S1max ),R) ) and i1 = ( S1max mindex a1 ) and b1t = ( S12 ^\ i1 ) and (for i being Nat holds ( b1 . i ) = ( ( b1t . i ) \ { a1 } )) and (for i being Nat holds (i1 <= i implies ( S1max . i ) = a1)) and A90: ( S . ( (( 0 ) qua Nat) + 1 ) ) = [ a1,b1 ] by A55;
( rng S1max ) c= CR by RELAT_1:def 19;
then a1 in ( rng S1max ) by A1,A89,CKB70:def 1;
then consider i being set such that A91: i in ( dom S1max ) and A92: ( S1max . i ) = a1 by FUNCT_1:def 3;
A93: (ex S12i being (Element of ( Fin CR )) st ((S12i = ( S12 . i ) & S12i <> ( {} )) & ( S1max . i ) = ( PosetMax S12i ))) by A88,A91;
reconsider i as Nat by A91;
take i;
thus b = ( ( S . ( 0 ) ) `2 );
a1 in ( b . i ) by A87,A92,A93,CKB58:def 1;
hence ( a . ( (( 0 ) qua Nat) + 1 ) ) in ( b . i ) by A86,A90,MCART_1:def 1;
end;
A94: (for n being Nat holds (P3[ n ] implies P3[ ( n + 1 ) ]))
proof
let n being Nat;
assume P3[ n ];
set b = ( ( S . ( n + 1 ) ) `2 );
b in zz;
then (ex z being (sequence of ( FinPoset R )) st (z = b & z is  descending));
then reconsider b as (sequence of ( FinPoset R ));
take b;
set n1 = ( n + 1 );
reconsider n1 as Nat;
consider Sn12 being (sequence of ( FinPoset R )),Sn1max being (Function of ( NAT ),CR),an1 being (Element of R),in1 being Nat,bn1t,bn1 being (sequence of ( FinPoset R )) such that A95: Sn12 = ( ( S . n1 ) `2 ) and A96: (for i being Nat holds (ex Sn12i being (Element of ( Fin CR )) st ((Sn12i = ( Sn12 . i ) & Sn12i <> ( {} )) & ( Sn1max . i ) = ( PosetMax Sn12i )))) and A97: an1 = ( MinElement (( rng Sn1max ),R) ) and in1 = ( Sn1max mindex an1 ) and bn1t = ( Sn12 ^\ in1 ) and (for i being Nat holds ( bn1 . i ) = ( ( bn1t . i ) \ { an1 } )) and (for i being Nat holds (in1 <= i implies ( Sn1max . i ) = an1)) and A98: ( S . ( n1 + 1 ) ) = [ an1,bn1 ] by A55;
( rng Sn1max ) c= CR by RELAT_1:def 19;
then an1 in ( rng Sn1max ) by A1,A97,CKB70:def 1;
then consider i being set such that A99: i in ( dom Sn1max ) and A100: ( Sn1max . i ) = an1 by FUNCT_1:def 3;
A101: (ex Sn12i being (Element of ( Fin CR )) st ((Sn12i = ( Sn12 . i ) & Sn12i <> ( {} )) & ( Sn1max . i ) = ( PosetMax Sn12i ))) by A96,A99;
reconsider i as Nat by A99;
take i;
thus b = ( ( S . ( n + 1 ) ) `2 );
A102: an1 in ( b . i ) by A95,A100,A101,CKB58:def 1;
( ( S . ( n1 + 1 ) ) `1 ) = an1 by A98,MCART_1:def 1;
hence thesis by A58,A102;
end;
A103: (for n being Nat holds P3[ n ]) from NAT_1:sch 2(A85,A94);
defpred P4[ Nat ]
 means
(( a . ( $1 + 1 ) ) <> ( a . $1 ) & [ ( a . ( $1 + 1 ) ),( a . $1 ) ] in IR);
A104: P4[ ( 0 ) ]
proof
A105: ( a . ( 0 ) ) = ( ( S . ( 0 ) ) `1 ) by A58;
consider b being (sequence of ( FinPoset R )),i being Nat such that A106: b = ( ( S . ( 0 ) ) `2 ) and A107: ( a . ( (( 0 ) qua Nat) + 1 ) ) in ( b . i ) by A85;
(ex bb being (sequence of ( FinPoset R )) st (bb = ( ( S . ( 0 ) ) `2 ) & (for x being set holds (x in ( bb . i ) implies (x <> ( ( S . ( 0 ) ) `1 ) & [ x,( ( S . ( 0 ) ) `1 ) ] in IR))))) by A59;
hence (( a . ( (( 0 ) qua Nat) + 1 ) ) <> ( a . ( 0 ) ) & [ ( a . ( (( 0 ) qua Nat) + 1 ) ),( a . ( 0 ) ) ] in IR) by A105,A106,A107;
end;
A108: (for n being Nat holds (P4[ n ] implies P4[ ( n + 1 ) ]))
proof
let n being Nat;
assume that
( a . ( n + 1 ) ) <> ( a . n )
and
[ ( a . ( n + 1 ) ),( a . n ) ] in IR;
A109: ( a . ( n + 1 ) ) = ( ( S . ( n + 1 ) ) `1 ) by A58;
consider b being (sequence of ( FinPoset R )),i being Nat such that A110: b = ( ( S . ( n + 1 ) ) `2 ) and A111: ( a . ( ( n + 1 ) + 1 ) ) in ( b . i ) by A103;
(ex bb being (sequence of ( FinPoset R )) st (bb = ( ( S . ( n + 1 ) ) `2 ) & (for x being set holds (x in ( bb . i ) implies (x <> ( ( S . ( n + 1 ) ) `1 ) & [ x,( ( S . ( n + 1 ) ) `1 ) ] in IR))))) by A84;
hence thesis by A109,A110,A111;
end;
(for n being Nat holds P4[ n ]) from NAT_1:sch 2(A104,A108);
then a is  descending by WELLFND1:def 6;
hence contradiction by A1,WELLFND1:14;
end;
