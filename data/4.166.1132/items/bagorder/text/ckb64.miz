environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FINSEQ_1,ARYTM_1,ARYTM_3,XXREAL_0,CARD_1,NAT_1,PRE_POLY,FUNCT_1,RELAT_1,TARSKI,CLASSES1,FUNCT_2,CARD_3,FINSEQ_2,PBOOLE,GRAPH_2,VALUED_0,FINSUB_1,FINSET_1,RELAT_2,ORDERS_2,WAYBEL_4,STRUCT_0,WELLFND1,WELLORD1,ORDERS_1,ORDINAL1,WELLORD2,ORDINAL4,REAL_1,FUNCOP_1,FUNCT_4,PARTFUN1,DICKSON,RLVECT_2,ZFMISC_1,MCART_1,BAGORDER;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,XCMPLX_0,RELAT_1,PBOOLE,RELAT_2,RELSET_1,PARTFUN1,FINSET_1,FINSUB_1,ORDINAL1,FUNCT_7,MCART_1,WELLORD1,ORDERS_1,WELLFND1,CARD_1,NUMBERS,VALUED_0,XXREAL_0,REAL_1,FUNCT_1,SEQ_1,PRE_POLY,CARD_3,NAT_D,FINSEQ_1,RVSUM_1,WSIERP_1,FUNCOP_1,FUNCT_2,SEQ_4,DOMAIN_1,FINSEQOP,CLASSES1,RECDEF_1,NAT_1,STRUCT_0,WAYBEL_0,YELLOW_1,WAYBEL_4,PRALG_1,ORDERS_2,DICKSON,POLYNOM2,CKB6,CKB10,CKB15,CKB19,CKB30,CKB31,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58,CKB59;
definitions TARSKI,RELAT_2,WELLFND1,FINSEQ_2,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58,CKB59;
theorems WELLORD1,TARSKI,RELAT_2,RELSET_1,ZFMISC_1,ORDERS_2,NAT_1,FUNCT_1,AXIOMS,CARD_3,PBOOLE,YELLOW_1,PRALG_1,FUNCOP_1,PARTIT_2,WELLFND1,RELAT_1,DICKSON,FINSEQ_1,INTEGRA5,RVSUM_1,FINSEQ_2,CARD_1,WAYBEL_0,WAYBEL_4,ORDINAL1,FUNCT_2,CARD_2,MCART_1,FINSUB_1,ORDERS_1,FUNCT_7,WELLORD2,FINSEQ_3,FINSEQ_5,FINSEQOP,RFINSEQ,XBOOLE_0,XBOOLE_1,PARTFUN1,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,XXREAL_2,XREAL_0,NAT_D,CLASSES1,PRE_POLY,CKB1,CKB2,CKB4,CKB5,CKB6,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB32,CKB33,CKB36,CKB37,CKB38,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63;
schemes NAT_1,RELSET_1,FINSET_1,RECDEF_1,FUNCT_2,ORDINAL1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,FINSUB_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,CARD_1,MEMBERED,FINSEQ_1,CARD_5,STRUCT_0,ORDERS_2,WAYBEL_0,YELLOW_1,DICKSON,VALUED_0,XXREAL_2,RELSET_1,PRE_POLY,CKB3,CKB7,CKB8,CKB11,CKB34,CKB35,CKB39,CKB46,CKB49;
constructors DOMAIN_1,FINSEQOP,NAT_D,WSIERP_1,PRALG_1,TRIANG_1,WAYBEL_4,WELLFND1,POLYNOM2,DICKSON,SEQ_1,RECDEF_1,BINOP_2,SEQ_4,CLASSES1,RELSET_1,FUNCT_7,REAL_1,CKB6,CKB10,CKB15,CKB19,CKB32,CKB37,CKB41,CKB43,CKB44,CKB51,CKB53,CKB57,CKB58,CKB59;
requirements SUBSET,NUMERALS,REAL,BOOLE,ARITHM;
begin
theorem
Th39: (for R being  connected non empty Poset holds ( union ( rng ( FinOrd-Approx R ) ) ) is (Order of ( Fin (the carrier of R) )))
proof
let R being  connected non empty Poset;
set IR = (the InternalRel of R);
set CR = (the carrier of R);
set X = ( union ( rng ( FinOrd-Approx R ) ) );
set FOAR = ( FinOrd-Approx R );
set FOAR0 = { [ a,b ] where a is (Element of ( Fin CR )),b is (Element of ( Fin CR )): (a = ( {} ) or (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) <> ( PosetMax b )) & [ ( PosetMax a ),( PosetMax b ) ] in IR)) };
A1: ( FOAR . ( 0 ) ) = FOAR0 by CKB59:def 1;
now
let x being set;
assume x in X;
then A2: (ex Y being set st (x in Y & Y in ( rng FOAR ))) by TARSKI:def 4;
( rng FOAR ) c= ( bool [: ( Fin CR ),( Fin CR ) :] ) by RELAT_1:def 19;
hence x in [: ( Fin CR ),( Fin CR ) :] by A2;
end;
then reconsider X as (Relation of ( Fin CR )) by TARSKI:def 3;
A3:now
let x being set;
assume that
A4: x in ( Fin CR );
( 0 ) in ( NAT );
then ( 0 ) in ( dom FOAR ) by CKB59:def 1;
then A5: ( FOAR . ( 0 ) ) in ( rng FOAR ) by FUNCT_1:def 3;
reconsider x9 = x as (Element of ( Fin CR )) by A4;
defpred P[ Nat ]
 means
(for x being (Element of ( Fin CR )) holds (( card x ) = $1 implies [ x,x ] in ( union ( rng FOAR ) )));
A6: P[ ( 0 ) ]
proof
let x being (Element of ( Fin CR ));
assume ( card x ) = ( 0 );
then x = ( {} );
then [ x,x ] in ( FOAR . ( 0 ) ) by A1;
hence thesis by A5,TARSKI:def 4;
end;
A7: (for n being Nat holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n being Nat;
assume that
A8: (for x being (Element of ( Fin CR )) holds (( card x ) = n implies [ x,x ] in ( union ( rng FOAR ) )));
let y being (Element of ( Fin CR ));
assume that
A9: ( card y ) = ( n + 1 );
per cases ;
suppose y = ( {} );

then [ y,y ] in ( FOAR . ( 0 ) ) by A1;
hence thesis by A5,TARSKI:def 4;
end;
suppose A10: y <> ( {} );

set z = ( y \ { ( PosetMax y ) } );
reconsider z as (Element of ( Fin CR )) by CKB62:1;
( card z ) = n by A9,CKB63:1;
then [ z,z ] in ( union ( rng FOAR ) ) by A8;
hence thesis by A10,CKB60:1;
end;
end;
A11: (for n being Nat holds P[ n ]) from NAT_1:sch 2(A6,A7);
consider n being Nat such that A12: x,n are_equipotent  by A4,CARD_1:43;
( card x9 ) = n by A12,CARD_1:def 2;
hence [ x,x ] in X by A11;
end;
A13:now
let x being set,y being set;
assume that
A14: x in ( Fin CR )
and
A15: y in ( Fin CR )
and
A16: [ x,y ] in X
and
A17: [ y,x ] in X;
reconsider x9 = x as (Element of ( Fin CR )) by A14;
defpred R[ Nat ]
 means
(for x,y being (Element of ( Fin CR )) holds (((( card x ) = $1 & [ x,y ] in X) & [ y,x ] in X) implies x = y));
now
let a being (Element of ( Fin CR )),b being (Element of ( Fin CR ));
assume that
A18: ( card a ) = ( 0 )
and
[ a,b ] in X
and
A19: [ b,a ] in X;
reconsider a9 = a as  finite set;
a9 = ( {} ) by A18;
hence a = b by A19,CKB61:1;
end;
then A20: R[ ( 0 ) ];
now
let n being Nat;
assume that
A21: (for a,b being (Element of ( Fin CR )) holds (((( card a ) = n & [ a,b ] in X) & [ b,a ] in X) implies a = b));
let a being (Element of ( Fin CR )),b being (Element of ( Fin CR ));
assume that
A22: ( card a ) = ( n + 1 )
and
A23: [ a,b ] in X
and
A24: [ b,a ] in X;
per cases  by A23,CKB60:1;
suppose a = ( {} );

hence a = b by A22;
end;
suppose A25: (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) <> ( PosetMax b )) & [ ( PosetMax a ),( PosetMax b ) ] in IR);

now
per cases  by A24,CKB60:1;
suppose b = ( {} );

hence a = b by A25;
end;
suppose (((b <> ( {} ) & a <> ( {} )) & ( PosetMax b ) <> ( PosetMax a )) & [ ( PosetMax b ),( PosetMax a ) ] in IR);

hence a = b by A25,ORDERS_1:4;
end;
suppose (((b <> ( {} ) & a <> ( {} )) & ( PosetMax b ) = ( PosetMax a )) & [ ( b \ { ( PosetMax b ) } ),( a \ { ( PosetMax a ) } ) ] in X);

hence a = b by A25;
end;
end;
hence a = b;
end;
suppose A26: (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) = ( PosetMax b )) & [ ( a \ { ( PosetMax a ) } ),( b \ { ( PosetMax b ) } ) ] in X);

now
per cases  by A24,CKB60:1;
suppose b = ( {} );

hence a = b by A26;
end;
suppose (((b <> ( {} ) & a <> ( {} )) & ( PosetMax b ) <> ( PosetMax a )) & [ ( PosetMax b ),( PosetMax a ) ] in IR);

hence a = b by A26;
end;
suppose A27: (((b <> ( {} ) & a <> ( {} )) & ( PosetMax b ) = ( PosetMax a )) & [ ( b \ { ( PosetMax b ) } ),( a \ { ( PosetMax a ) } ) ] in X);

reconsider a9 = a as  finite set;
reconsider b9 = b as  finite set;
set za = ( a9 \ { ( PosetMax a ) } );
set zb = ( b9 \ { ( PosetMax b ) } );
reconsider za,zb as (Element of ( Fin CR )) by CKB62:1;
( card za ) = n by A22,CKB63:1;
then A28: za = zb by A21,A26,A27;
now
let z being set;
assume z in { ( PosetMax a ) };
then z = ( PosetMax a ) by TARSKI:def 1;
hence z in a by A27,CKB58:def 1;
end;
then { ( PosetMax a ) } c= a by TARSKI:def 3;
then A29: a = ( { ( PosetMax a ) } \/ za ) by XBOOLE_1:45;
now
let z being set;
assume z in { ( PosetMax b ) };
then z = ( PosetMax b ) by TARSKI:def 1;
hence z in b by A27,CKB58:def 1;
end;
then { ( PosetMax b ) } c= b by TARSKI:def 3;
hence a = b by A27,A28,A29,XBOOLE_1:45;
end;
end;
hence a = b;
end;
end;
then A30: (for n being Nat holds (R[ n ] implies R[ ( n + 1 ) ]));
A31: (for n being Nat holds R[ n ]) from NAT_1:sch 2(A20,A30);
consider n being Nat such that A32: x,n are_equipotent  by A14,CARD_1:43;
( card x9 ) = n by A32,CARD_1:def 2;
hence x = y by A15,A16,A17,A31;
end;
A33:now
let x being set,y being set,z being set;
assume that
A34: x in ( Fin CR )
and
A35: y in ( Fin CR )
and
A36: z in ( Fin CR )
and
A37: [ x,y ] in X
and
A38: [ y,z ] in X;
defpred S[ Nat ]
 means
(for a,b,c being (Element of ( Fin CR )) holds (((( card a ) = $1 & [ a,b ] in X) & [ b,c ] in X) implies [ a,c ] in X));
now
let a being (Element of ( Fin CR )),b being (Element of ( Fin CR )),c being (Element of ( Fin CR ));
assume that
A39: ( card a ) = ( 0 )
and
[ a,b ] in X
and
[ b,c ] in X;
reconsider a9 = a as  finite set;
a9 = ( {} ) by A39;
hence [ a,c ] in X by CKB60:1;
end;
then A40: S[ ( 0 ) ];
now
let n being Nat;
assume that
A41: (for a,b,c being (Element of ( Fin CR )) holds (((( card a ) = n & [ a,b ] in X) & [ b,c ] in X) implies [ a,c ] in X));
let a being (Element of ( Fin CR )),b being (Element of ( Fin CR )),c being (Element of ( Fin CR ));
assume that
A42: ( card a ) = ( n + 1 )
and
A43: [ a,b ] in X
and
A44: [ b,c ] in X;
per cases  by A43,CKB60:1;
suppose a = ( {} );

hence [ a,c ] in X by CKB60:1;
end;
suppose A45: (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) <> ( PosetMax b )) & [ ( PosetMax a ),( PosetMax b ) ] in IR);

now
per cases  by A44,CKB60:1;
suppose b = ( {} );

hence [ a,c ] in X by A45;
end;
suppose A46: (((b <> ( {} ) & c <> ( {} )) & ( PosetMax b ) <> ( PosetMax c )) & [ ( PosetMax b ),( PosetMax c ) ] in IR);

then A47: [ ( PosetMax a ),( PosetMax c ) ] in IR by A45,ORDERS_1:5;
now
per cases ;
suppose ( PosetMax a ) <> ( PosetMax c );

hence [ a,c ] in X by A45,A46,A47,CKB60:1;
end;
suppose ( PosetMax a ) = ( PosetMax c );

hence [ a,c ] in X by A45,A46,ORDERS_1:4;
end;
end;
hence [ a,c ] in X;
end;
suppose (((b <> ( {} ) & c <> ( {} )) & ( PosetMax b ) = ( PosetMax c )) & [ ( b \ { ( PosetMax b ) } ),( c \ { ( PosetMax c ) } ) ] in ( union ( rng FOAR ) ));

hence [ a,c ] in X by A45,CKB60:1;
end;
end;
hence [ a,c ] in X;
end;
suppose A48: (((a <> ( {} ) & b <> ( {} )) & ( PosetMax a ) = ( PosetMax b )) & [ ( a \ { ( PosetMax a ) } ),( b \ { ( PosetMax b ) } ) ] in ( union ( rng FOAR ) ));

now
per cases  by A44,CKB60:1;
suppose b = ( {} );

hence [ a,c ] in X by A48;
end;
suppose (((b <> ( {} ) & c <> ( {} )) & ( PosetMax b ) <> ( PosetMax c )) & [ ( PosetMax b ),( PosetMax c ) ] in IR);

hence [ a,c ] in X by A48,CKB60:1;
end;
suppose A49: (((b <> ( {} ) & c <> ( {} )) & ( PosetMax b ) = ( PosetMax c )) & [ ( b \ { ( PosetMax b ) } ),( c \ { ( PosetMax c ) } ) ] in ( union ( rng FOAR ) ));

set z = ( a \ { ( PosetMax a ) } );
reconsider z as (Element of ( Fin CR )) by CKB62:1;
A50: ( card z ) = n by A42,CKB63:1;
A51: c c= CR by FINSUB_1:def 5;
reconsider c9 = c as  finite set;
set zc = ( c9 \ { ( PosetMax c ) } );
zc c= CR by A51,XBOOLE_1:1;
then reconsider zc as (Element of ( Fin CR )) by FINSUB_1:def 5;
A52: b c= CR by FINSUB_1:def 5;
reconsider b9 = b as  finite set;
set zb = ( b9 \ { ( PosetMax b ) } );
zb c= CR by A52,XBOOLE_1:1;
then reconsider zb as (Element of ( Fin CR )) by FINSUB_1:def 5;
[ z,zb ] in ( union ( rng FOAR ) ) by A48;
then [ z,zc ] in ( union ( rng FOAR ) ) by A41,A49,A50;
hence [ a,c ] in X by A48,A49,CKB60:1;
end;
end;
hence [ a,c ] in X;
end;
end;
then A53: (for n being Nat holds (S[ n ] implies S[ ( n + 1 ) ]));
A54: (for n being Nat holds S[ n ]) from NAT_1:sch 2(A40,A53);
reconsider x9 = x as (Element of ( Fin CR )) by A34;
consider n being Nat such that A55: x,n are_equipotent  by A34,CARD_1:43;
( card x9 ) = n by A55,CARD_1:def 2;
hence [ x,z ] in X by A35,A36,A37,A38,A54;
end;
A56: X is_reflexive_in ( Fin CR ) by A3,RELAT_2:def 1;
A57: X is_antisymmetric_in ( Fin CR ) by A13,RELAT_2:def 4;
A58: X is_transitive_in ( Fin CR ) by A33,RELAT_2:def 8;
reconsider R = ( union ( rng FOAR ) ) as (Relation of ( Fin CR )) by A3;
A59: ( dom R ) = ( Fin CR ) by A56,ORDERS_1:13;
( field R ) = ( Fin CR ) by A56,ORDERS_1:13;
hence thesis by A56,A57,A58,A59,PARTFUN1:def 2,RELAT_2:def 9,RELAT_2:def 12,RELAT_2:def 16;
end;
