environ
vocabularies ALGSTR_0,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,ENTROPY1,EUCLID,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCT_1,FUNCT_2,FVSUM_1,INCSP_1,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,NAT_1,NUMBERS,ORDINAL4,PARTFUN1,PBOOLE,PRE_TOPC,PRVECT_1,QC_LANG1,RANKNULL,RELAT_1,RLAFFIN1,RLSUB_1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RVSUM_1,SEMI_AF1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TREES_1,VALUED_0,VALUED_1,VECTSP_1,VECTSP10,XBOOLE_0,XXREAL_0;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,CARD_1,NUMBERS,XXREAL_0,NAT_1,FINSET_1,FUNCT_1,RELSET_1,PARTFUN1,VALUED_0,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,STRUCT_0,RLVECT_1,RLVECT_2,RLVECT_3,VECTSP_1,MATRIX_1,MATRIX_3,VECTSP_4,VECTSP_6,VECTSP_7,MATRIX13,RVSUM_1,ALGSTR_0,FVSUM_1,RANKNULL,BINOP_2,PRE_TOPC,MATRIX_6,MATRLIN,MATRLIN2,NAT_D,EUCLID,GROUP_1,MATRIX11,FINSEQOP,ENTROPY1,RLSUB_1,RUSUB_4,PRVECT_1,RLAFFIN1,MATRTOP1;
definitions EUCLID,FINSEQ_1,MATRIX13,MATRTOP1,STRUCT_0,TARSKI,VECTSP_1,XBOOLE_0;
theorems CARD_1,CARD_2,ENTROPY1,EUCLID,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_6,FUNCT_1,FUNCT_2,FVSUM_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_6,MATRIX13,MATRIXR1,MATRLIN,MATRLIN2,MATRPROB,MATRTOP1,NAT_1,ORDINAL1,PARTFUN1,PRE_POLY,RANKNULL,RELAT_1,RLAFFIN1,RLSUB_1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TARSKI,TOPREAL7,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XREAL_0,XREAL_1,ZFMISC_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB17,CKB18,CKB19,CKB20,CKB21;
schemes FINSEQ_1,FUNCT_2,NAT_1;
registrations CARD_1,EUCLID,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,FUNCT_2,MATRIX13,MATRLIN2,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRVECT_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLVECT_3,RVSUM_1,STRUCT_0,RLVECT_2,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB16;
constructors BINARITH,ENTROPY1,FVSUM_1,LAPLACE,MATRIX_6,MATRIX11,MATRIX13,MATRLIN2,MATRTOP1,MONOID_0,RANKNULL,REALSET1,RELSET_1,RLAFFIN1,RLVECT_3,RUSUB_5,SEQ_1,SQUARE_1,VECTSP10,MATRIX15,MEMBERED;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve n for Nat;
reserve m for Nat;
reserve k for Nat;
reserve f for n -element  real-valued FinSequence;
reserve M for (Matrix of n,m,( F_Real ));
theorem
Th16: (M is  without_repeated_line implies (ex L being (Linear_Combination of ( lines M )) st (( Sum L ) = ( ( Mx2Tran M ) . f ) & (for k holds (k in ( dom f ) implies ( L . ( Line (M,k) ) ) = ( f . k ))))))
proof
assume that
A2: M is  without_repeated_line;
A3: ( len M ) = n by MATRIX_1:def 2;
then ( dom M ) c= ( Seg n ) by FINSEQ_1:def 3;
then reconsider D = ( dom M ) as (Subset of ( Seg n ));
( len f ) = n by CARD_1:def 7;
then A4: ( dom f ) = ( dom M ) by A3,FINSEQ_3:29;
( M | ( dom M ) ) = M by RELAT_1:69;
then consider L being (Linear_Combination of ( lines M )) such that A5: ( Sum L ) = ( ( Mx2Tran M ) . f ) and A6: (for i being Nat holds (i in D implies ( L . ( Line (M,i) ) ) = ( Sum ( Seq ( f | ( M " { ( Line (M,i) ) } ) ) ) ))) by A2,CKB21:1;
take L;
thus ( Sum L ) = ( ( Mx2Tran M ) . f ) by A5;
let i being Nat;
assume that
A7: i in ( dom f );
i >= 1 by A7,FINSEQ_3:25;
then A8: ( Sgm { i } ) = <* i *> by FINSEQ_3:44;
set LM = ( Line (M,i) );
A9: LM in { LM } by TARSKI:def 1;
( dom M ) = ( Seg n ) by A3,FINSEQ_1:def 3;
then LM in ( lines M ) by A4,A7,MATRIX13:103;
then consider x being set such that A10: ( M " { LM } ) = { x } by A2,FUNCT_1:74;
A11: ( dom ( f | { i } ) ) = ( ( dom f ) /\ { i } ) by RELAT_1:61;
{ i } c= ( dom f ) by A7,ZFMISC_1:31;
then A12: ( dom ( f | { i } ) ) = { i } by A11,XBOOLE_1:28;
then i in ( dom ( f | { i } ) ) by TARSKI:def 1;
then A13: ( ( f | { i } ) . i ) = ( f . i ) by FUNCT_1:47;
( rng <* i *> ) = { i } by FINSEQ_1:38;
then A14: <* i *> is (FinSequence of { i }) by FINSEQ_1:def 4;
(( rng ( f | { i } ) ) <> ( {} ) & ( f | { i } ) is (Function of { i },( rng ( f | { i } ) ))) by A12,FUNCT_2:1,RELAT_1:42;
then ( Seq ( f | { i } ) ) = <* ( f . i ) *> by A12,A8,A14,A13,FINSEQ_2:35;
then A15: ( Sum ( Seq ( f | { i } ) ) ) = ( f . i ) by RVSUM_1:73;
( M . i ) = LM by A4,A7,MATRIX_2:16;
then i in ( M " { LM } ) by A4,A7,A9,FUNCT_1:def 7;
then ( f | ( M " { LM } ) ) = ( f | { i } ) by A10,TARSKI:def 1;
hence thesis by A6,A4,A7,A15;
end;
