environ
vocabularies ALGSTR_0,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,ENTROPY1,EUCLID,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCT_1,FUNCT_2,FVSUM_1,INCSP_1,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,NAT_1,NUMBERS,ORDINAL4,PARTFUN1,PBOOLE,PRE_TOPC,PRVECT_1,QC_LANG1,RANKNULL,RELAT_1,RLAFFIN1,RLSUB_1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RVSUM_1,SEMI_AF1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TREES_1,VALUED_0,VALUED_1,VECTSP_1,VECTSP10,XBOOLE_0,XXREAL_0;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,CARD_1,NUMBERS,XXREAL_0,NAT_1,FINSET_1,FUNCT_1,RELSET_1,PARTFUN1,VALUED_0,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,STRUCT_0,RLVECT_1,RLVECT_2,RLVECT_3,VECTSP_1,MATRIX_1,MATRIX_3,VECTSP_4,VECTSP_6,VECTSP_7,MATRIX13,RVSUM_1,ALGSTR_0,FVSUM_1,RANKNULL,BINOP_2,PRE_TOPC,MATRIX_6,MATRLIN,MATRLIN2,NAT_D,EUCLID,GROUP_1,MATRIX11,FINSEQOP,ENTROPY1,RLSUB_1,RUSUB_4,PRVECT_1,RLAFFIN1,MATRTOP1;
definitions EUCLID,FINSEQ_1,MATRIX13,MATRTOP1,STRUCT_0,TARSKI,VECTSP_1,XBOOLE_0;
theorems CARD_1,CARD_2,ENTROPY1,EUCLID,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_6,FUNCT_1,FUNCT_2,FVSUM_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_6,MATRIX13,MATRIXR1,MATRLIN,MATRLIN2,MATRPROB,MATRTOP1,NAT_1,ORDINAL1,PARTFUN1,PRE_POLY,RANKNULL,RELAT_1,RLAFFIN1,RLSUB_1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TARSKI,TOPREAL7,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XREAL_0,XREAL_1,ZFMISC_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB17,CKB18,CKB19;
schemes FINSEQ_1,FUNCT_2,NAT_1;
registrations CARD_1,EUCLID,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,FUNCT_2,MATRIX13,MATRLIN2,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRVECT_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLVECT_3,RVSUM_1,STRUCT_0,RLVECT_2,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB16;
constructors BINARITH,ENTROPY1,FVSUM_1,LAPLACE,MATRIX_6,MATRIX11,MATRIX13,MATRLIN2,MATRTOP1,MONOID_0,RANKNULL,REALSET1,RELSET_1,RLAFFIN1,RLVECT_3,RUSUB_5,SEQ_1,SQUARE_1,VECTSP10,MATRIX15,MEMBERED;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve n for Nat;
reserve m for Nat;
reserve k for Nat;
reserve f for n -element  real-valued FinSequence;
reserve M for (Matrix of n,m,( F_Real ));
theorem
Lm5: (( card ( lines M ) ) = 1 implies (ex L being (Linear_Combination of ( lines M )) st (( Sum L ) = ( ( Mx2Tran M ) . f ) & (for k holds (k in ( Seg n ) implies (( L . ( Line (M,k) ) ) = ( Sum f ) & ( M " { ( Line (M,k) ) } ) = ( dom f )))))))
proof
assume that
A2: ( card ( lines M ) ) = 1;
per cases ;
suppose A1: n <> ( 0 );

deffunc F(set) = ( 0. ( F_Real ) );
A3: ( len M ) = n by A1,MATRIX13:1;
reconsider Sf = ( Sum f ) as (Element of ( F_Real )) by XREAL_0:def 1;
set Mf = ( ( Mx2Tran M ) . f );
A4: ( len Mf ) = m by CARD_1:def 7;
A5: ( len f ) = n by CARD_1:def 7;
set V = ( m -VectSp_over ( F_Real ) );
consider x being set such that A6: ( lines M ) = { x } by A2,CARD_2:42;
x in ( lines M ) by A6,TARSKI:def 1;
then consider j being set such that A7: j in ( dom M ) and A8: ( M . j ) = x by FUNCT_1:def 3;
reconsider j as Nat by A7;
A9: ( width M ) = m by A1,MATRIX13:1;
then reconsider LMj = ( Line (M,j) ) as (Element of V) by MATRIX13:102;
consider L being (Function of (the carrier of V),(the carrier of ( F_Real ))) such that A10: ( L . LMj ) = ( 1. ( F_Real ) ) and A11: (for z being (Element of V) holds (z <> LMj implies ( L . z ) = F(z))) from FUNCT_2:sch 6;
reconsider L as (Element of ( Funcs ((the carrier of V),(the carrier of ( F_Real ))) )) by FUNCT_2:8;
A12: x = ( Line (M,j) ) by A7,A8,MATRIX_2:16;
A13:now
let z being (Vector of V);
assume that
A14: (not z in ( lines M ));
z <> LMj by A6,A12,A14,TARSKI:def 1;
hence ( L . z ) = ( 0. ( F_Real ) ) by A11;
end;
A15: ( len ( Sf * ( Line (M,j) ) ) ) = m by A9,CARD_1:def 7;
A16:now
( len ( @ f ) ) = n by CARD_1:def 7;
then reconsider F = ( @ f ) as (Element of ( n -tuples_on (the carrier of ( F_Real )) )) by FINSEQ_2:92;
let w being Nat;
set Mjw = ( M * (j,w) );
A17: n in ( NAT ) by ORDINAL1:def 12;
assume A18: (1 <= w & w <= m);
then A19: w in ( dom ( Sf * ( Line (M,j) ) ) ) by A15,FINSEQ_3:25;
A20: w in ( Seg m ) by A18,FINSEQ_1:1;
then A21: ( ( Line (M,j) ) . w ) = Mjw by A9,MATRIX_1:def 7;
A22:now
let z being Nat;
assume A23: (1 <= z & z <= n);
then A24: z in ( Seg n ) by FINSEQ_1:1;
then A25: ( Line (M,z) ) in ( lines M ) by MATRIX13:103;
z in ( dom M ) by A3,A23,FINSEQ_3:25;
hence ( ( Col (M,w) ) . z ) = ( M * (z,w) ) by MATRIX_1:def 8
.= ( ( Line (M,z) ) . w ) by A9,A20,MATRIX_1:def 7
.= Mjw by A6,A12,A21,A25,TARSKI:def 1
.= ( ( n |-> Mjw ) . z ) by A24,FINSEQ_2:57;
end;
(( len ( Col (M,w) ) ) = n & ( len ( n |-> Mjw ) ) = n) by A3,CARD_1:def 7;
then A26: ( Col (M,w) ) = ( n |-> Mjw ) by A22,FINSEQ_1:14;
thus ( Mf . w ) = ( ( @ f ) "*" ( Col (M,w) ) ) by A1,A18,MATRTOP1:18
.= ( Sum ( mlt (( @ f ),( Col (M,w) )) ) ) by FVSUM_1:def 9
.= ( Sum ( Mjw * F ) ) by A26,A17,FVSUM_1:66
.= ( Mjw * ( Sum ( @ f ) ) ) by FVSUM_1:73
.= ( Mjw * Sf ) by MATRPROB:36
.= ( ( Sf * ( Line (M,j) ) ) . w ) by A19,A21,FVSUM_1:50;
end;
reconsider L as (Linear_Combination of V) by A13,VECTSP_6:def 1;
( Carrier L ) c= { LMj }
proof
let x being set;
assume that
A27: x in ( Carrier L );
( L . x ) <> ( 0. ( F_Real ) ) by A27,VECTSP_6:2;
then x = LMj by A11,A27;
hence thesis by TARSKI:def 1;
end;
then reconsider L as (Linear_Combination of ( lines M )) by A6,A12,VECTSP_6:def 4;
A28: ( Sum L ) = ( ( 1. ( F_Real ) ) * LMj ) by A6,A12,A10,VECTSP_6:17
.= LMj by VECTSP_1:def 17;
reconsider SfL = ( Sf * L ) as (Linear_Combination of ( lines M )) by VECTSP_6:31;
take SfL;
( Sum SfL ) = ( Sf * ( Sum L ) ) by VECTSP_6:45
.= ( Sf * ( Line (M,j) ) ) by A9,A28,MATRIX13:102;
hence ( Sum SfL ) = Mf by A15,A4,A16,FINSEQ_1:14;
let w being Nat;
assume that
A29: w in ( Seg n );
( Line (M,w) ) in ( lines M ) by A29,MATRIX13:103;
then A30: ( Line (M,w) ) = LMj by A6,A12,TARSKI:def 1;
thus ( Sum f ) = ( Sf * ( 1. ( F_Real ) ) )
.= ( SfL . ( Line (M,w) ) ) by A10,A30,VECTSP_6:def 9;
thus ( M " { ( Line (M,w) ) } ) = ( dom M ) by A6,A12,A30,RELAT_1:134
.= ( dom f ) by A3,A5,FINSEQ_3:29;
end;
suppose B1: n = ( 0 );

reconsider L = ( ZeroLC ( m -VectSp_over ( F_Real ) ) ) as (Linear_Combination of ( lines M )) by VECTSP_6:5;
take L;
thus ( Sum L ) = ( 0. ( m -VectSp_over ( F_Real ) ) ) by VECTSP_6:15
.= ( 0. ( TOP-REAL m ) ) by CKB2:1
.= ( ( Mx2Tran M ) . f ) by B1,MATRTOP1:def 3;
thus thesis by B1;
end;
end;
