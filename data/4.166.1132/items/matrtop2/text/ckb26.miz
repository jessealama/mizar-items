environ
vocabularies ALGSTR_0,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,ENTROPY1,EUCLID,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCT_1,FUNCT_2,FVSUM_1,INCSP_1,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,NAT_1,NUMBERS,ORDINAL4,PARTFUN1,PBOOLE,PRE_TOPC,PRVECT_1,QC_LANG1,RANKNULL,RELAT_1,RLAFFIN1,RLSUB_1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RVSUM_1,SEMI_AF1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TREES_1,VALUED_0,VALUED_1,VECTSP_1,VECTSP10,XBOOLE_0,XXREAL_0;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,CARD_1,NUMBERS,XXREAL_0,NAT_1,FINSET_1,FUNCT_1,RELSET_1,PARTFUN1,VALUED_0,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,STRUCT_0,RLVECT_1,RLVECT_2,RLVECT_3,VECTSP_1,MATRIX_1,MATRIX_3,VECTSP_4,VECTSP_6,VECTSP_7,MATRIX13,RVSUM_1,ALGSTR_0,FVSUM_1,RANKNULL,BINOP_2,PRE_TOPC,MATRIX_6,MATRLIN,MATRLIN2,NAT_D,EUCLID,GROUP_1,MATRIX11,FINSEQOP,ENTROPY1,RLSUB_1,RUSUB_4,PRVECT_1,RLAFFIN1,MATRTOP1;
definitions EUCLID,FINSEQ_1,MATRIX13,MATRTOP1,STRUCT_0,TARSKI,VECTSP_1,XBOOLE_0;
theorems CARD_1,CARD_2,ENTROPY1,EUCLID,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FINSEQ_6,FUNCT_1,FUNCT_2,FVSUM_1,LAPLACE,MATRIX_1,MATRIX_2,MATRIX_6,MATRIX13,MATRIXR1,MATRLIN,MATRLIN2,MATRPROB,MATRTOP1,NAT_1,ORDINAL1,PARTFUN1,PRE_POLY,RANKNULL,RELAT_1,RLAFFIN1,RLSUB_1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TARSKI,TOPREAL7,VECTSP_1,VECTSP_4,VECTSP_6,VECTSP_7,VECTSP_9,XBOOLE_0,XBOOLE_1,XREAL_0,XREAL_1,ZFMISC_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25;
schemes FINSEQ_1,FUNCT_2,NAT_1;
registrations CARD_1,EUCLID,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,FUNCT_2,MATRIX13,MATRLIN2,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRVECT_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLVECT_3,RVSUM_1,STRUCT_0,RLVECT_2,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB16;
constructors BINARITH,ENTROPY1,FVSUM_1,LAPLACE,MATRIX_6,MATRIX11,MATRIX13,MATRLIN2,MATRTOP1,MONOID_0,RANKNULL,REALSET1,RELSET_1,RLAFFIN1,RLVECT_3,RUSUB_5,SEQ_1,SQUARE_1,VECTSP10,MATRIX15,MEMBERED;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve n for Nat;
reserve k for Nat;
reserve f for n -element  real-valued FinSequence;
theorem
Th20: (for B being (OrdBasis of ( n -VectSp_over ( F_Real ) )) holds (B = ( MX2FinS ( 1. (( F_Real ),n) ) ) implies (f in ( Lin ( rng ( B | k ) ) ) iff f = ( ( f | k ) ^ ( ( n -' k ) |-> ( 0 ) ) ))))
proof
set V = ( n -VectSp_over ( F_Real ) );
set nk0 = ( ( n -' k ) |-> ( 0 ) );
let B being (OrdBasis of ( n -VectSp_over ( F_Real ) ));
assume that
A1: B = ( MX2FinS ( 1. (( F_Real ),n) ) );
A2: ( len B ) = n by A1,MATRIX_1:def 2;
A3: f is (Point of ( TOP-REAL n )) by CKB3:1;
then A4: f is (Point of V) by CKB1:1;
A5: ( rng B ) is (Basis of V) by MATRLIN:def 2;
then A6: ( rng B ) is  linearly-independent by VECTSP_7:def 3;
( Lin ( rng B ) ) = ( the VectSpStr of V ) by A5,VECTSP_7:def 3;
then A7: f in ( Lin ( rng B ) ) by A4,STRUCT_0:def 5;
A8: B is  one-to-one by MATRLIN:def 2;
reconsider F = f as (Point of V) by A3,CKB1:1;
A9: ( len f ) = n by CARD_1:def 7;
per cases ;
suppose A10: k >= n;

then ( n - k ) <= ( 0 ) by XREAL_1:47;
then ( n -' k ) = ( 0 ) by XREAL_0:def 2;
then A11: nk0 = ( {} );
( f | k ) = f by A9,A10,FINSEQ_1:58;
hence thesis by A2,A7,A10,A11,FINSEQ_1:34,FINSEQ_1:58;
end;
suppose A12: k < n;

then A13: ( len ( f | k ) ) = k by A9,FINSEQ_1:59;
A14: ( len nk0 ) = ( n -' k ) by CARD_1:def 7;
then A15: ( dom nk0 ) = ( Seg ( n -' k ) ) by FINSEQ_1:def 3;
consider KL being (Linear_Combination of V) such that A16: F = ( Sum KL ) and A17: ( Carrier KL ) c= ( rng B ) and A18: (for k holds ((1 <= k & k <= ( len ( F |-- B ) )) implies ( ( F |-- B ) /. k ) = ( KL . ( B /. k ) ))) by MATRLIN:def 7;
reconsider KL as (Linear_Combination of ( rng B )) by A17,VECTSP_6:def 4;
A19: ( F |-- B ) = F by A1,A2,MATRLIN2:46;
( n -' k ) = ( n - k ) by A12,XREAL_1:233;
then ( len ( ( f | k ) ^ nk0 ) ) = ( k + ( n - k ) ) by A13,A14,FINSEQ_1:22;
then A20: ( dom ( ( f | k ) ^ nk0 ) ) = ( dom f ) by A9,FINSEQ_3:29;
hereby
assume f in ( Lin ( rng ( B | k ) ) );
then consider L being (Linear_Combination of ( rng ( B | k ) )) such that A21: ( Sum L ) = f by VECTSP_7:7;
reconsider L1 = L as (Linear_Combination of ( rng B )) by RELAT_1:70,VECTSP_6:4;
A22: ( KL - L1 ) is (Linear_Combination of ( rng B )) by VECTSP_6:42;
( Sum ( KL - L1 ) ) = ( ( Sum KL ) - ( Sum L1 ) ) by VECTSP_6:47
.= ( 0. V ) by A16,A21,VECTSP_1:19;
then ( Carrier ( KL - L1 ) ) = ( {} ) by A6,A22,VECTSP_7:def 1;
then A23: ( ZeroLC V ) = ( KL - L1 ) by VECTSP_6:def 3
.= ( KL + ( - L1 ) ) by VECTSP_6:def 11
.= ( ( - L1 ) + KL ) by VECTSP_6:25;
reconsider M1 = ( - ( 1. ( F_Real ) ) ) as (Element of ( F_Real ));
A24: ( Carrier L ) c= ( rng ( B | k ) ) by VECTSP_6:def 4;
L1 = ( - ( - L1 ) );
then A25: KL = L1 by A23,VECTSP_6:37;
now
let i being Nat;
assume A26: i in ( dom f );
per cases  by A13,A20,A26,FINSEQ_1:25;
suppose A27: i in ( dom ( f | k ) );

then ( ( f | k ) . i ) = ( f . i ) by FUNCT_1:47;
hence ( ( ( f | k ) ^ nk0 ) . i ) = ( f . i ) by A27,FINSEQ_1:def 7;
end;
suppose A28: (ex j being Nat st (j in ( dom nk0 ) & i = ( k + j )));

A29: i in ( dom B ) by A9,A2,A26,FINSEQ_3:29;
then A30: ( B /. i ) = ( B . i ) by PARTFUN1:def 6;
consider j being Nat such that A31: j in ( dom nk0 ) and A32: i = ( k + j ) by A28;
A33: 1 <= j by A31,FINSEQ_3:25;
(not ( B . i ) in ( rng ( B | k ) ))
proof
assume ( B . i ) in ( rng ( B | k ) );
then consider x being set such that A34: x in ( dom ( B | k ) ) and A35: ( ( B | k ) . x ) = ( B . i ) by FUNCT_1:def 3;
(( B . x ) = ( B . i ) & x in ( dom B )) by A34,A35,FUNCT_1:47,RELAT_1:57;
then A36: i = x by A8,A29,FUNCT_1:def 4;
x in ( Seg k ) by A34,RELAT_1:57;
then A37: i <= k by A36,FINSEQ_1:1;
i >= ( k + 1 ) by A32,A33,XREAL_1:6;
hence contradiction by A37,NAT_1:13;
end;
then A38: (not ( B . i ) in ( Carrier L )) by A24;
(1 <= i & i <= n) by A9,A26,FINSEQ_3:25;
then A39: ( ( F |-- B ) /. i ) = ( KL . ( B /. i ) ) by A9,A19,A18;
( f . i ) = ( ( F |-- B ) /. i ) by A19,A26,PARTFUN1:def 6;
hence ( f . i ) = ( 0. ( F_Real ) ) by A25,A39,A30,A38,VECTSP_6:2
.= ( nk0 . j ) by A15,A31,FINSEQ_2:57
.= ( ( ( f | k ) ^ nk0 ) . i ) by A13,A31,A32,FINSEQ_1:def 7;
end;
end;
hence ( ( f | k ) ^ ( ( n -' k ) |-> ( 0 ) ) ) = f by A20,FINSEQ_1:13;
end;
assume A40: ( ( f | k ) ^ nk0 ) = f;
( Carrier KL ) c= ( rng ( B | k ) )
proof
let x being set;
assume A41: x in ( Carrier KL );
( Carrier KL ) c= ( rng B ) by VECTSP_6:def 4;
then consider i being set such that A42: i in ( dom B ) and A43: ( B . i ) = x by A41,FUNCT_1:def 3;
reconsider i as (Element of ( NAT )) by A42;
A44: ( B /. i ) = ( B . i ) by A42,PARTFUN1:def 6;
A45: ( dom B ) = ( dom f ) by A9,A2,FINSEQ_3:29;
assume A46: (not x in ( rng ( B | k ) ));
(not i in ( Seg k ))
proof
assume i in ( Seg k );
then A47: i in ( dom ( B | k ) ) by A42,RELAT_1:57;
then ( ( B | k ) . i ) = ( B . i ) by FUNCT_1:47;
hence contradiction by A43,A46,A47,FUNCT_1:def 3;
end;
then (not i in ( dom ( f | k ) )) by A13,FINSEQ_1:def 3;
then consider j being Nat such that A48: j in ( dom nk0 ) and A49: i = ( k + j ) by A13,A20,A42,A45,FINSEQ_1:25;
A50: ( nk0 . j ) = ( 0 ) by A15,A48,FINSEQ_2:57;
A51: (1 <= i & i <= n) by A2,A42,FINSEQ_3:25;
( ( F |-- B ) /. i ) = ( ( F |-- B ) . i ) by A19,A42,A45,PARTFUN1:def 6;
then ( KL . ( B /. i ) ) = ( f . i ) by A9,A19,A18,A51
.= ( 0. ( F_Real ) ) by A13,A40,A48,A49,A50,FINSEQ_1:def 7;
hence contradiction by A41,A43,A44,VECTSP_6:2;
end;
then KL is (Linear_Combination of ( rng ( B | k ) )) by VECTSP_6:def 4;
hence thesis by A16,VECTSP_7:7;
end;
end;
