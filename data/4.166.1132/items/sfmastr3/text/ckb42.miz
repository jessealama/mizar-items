environ
vocabularies NUMBERS,FSM_1,SCMFSA_2,SF_MASTR,AMI_1,SCMFSA7B,SUBSET_1,UNIALG_2,SCMFSA6C,SCMFSA6B,FUNCT_1,XBOOLE_0,FUNCT_4,CARD_1,AMISTD_2,RELAT_1,GRAPHSP,AMI_3,PARTFUN1,COMPLEX1,SCMFSA8B,TURING_1,SCMFSA_9,ARYTM_3,FUNCOP_1,SCMFSA8A,CARD_3,SFMASTR1,ARYTM_1,XXREAL_0,SCMFSA6A,TARSKI,SCMFSA9A,FINSEQ_1,GRAPH_2,AOFA_I00,FUNCT_2,FINSEQ_2,SFMASTR3,NAT_1,SCMNORM,PBOOLE,COMPOS_1;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,CARD_3,INT_2,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCT_4,FUNCT_7,PBOOLE,FUNCOP_1,GRAPH_2,FINSEQ_1,FINSEQ_2,MEMSTR_0,COMPOS_1,EXTPRO_1,AMISTD_1,SCMFSA_2,SCMFSA6A,SCMFSA6B,SF_MASTR,SCMFSA6C,SCMFSA7B,SCMFSA8A,SCMFSA8B,SCMFSA_9,SFMASTR1,SCMFSA9A,XXREAL_0,NAT_1,CKB11,CKB19,CKB25,CKB32,CKB39;
definitions TARSKI,SCMFSA7B,SCMFSA9A,GRAPH_2,SCMFSA6A,COMPOS_1,EXTPRO_1,MEMSTR_0,CKB11,CKB19,CKB25,CKB32,CKB39;
theorems TARSKI,ZFMISC_1,ENUMSET1,ABSVALUE,NAT_1,INT_1,RELAT_1,FUNCT_7,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,GRAPH_2,SCMFSA_2,MEMSTR_0,SCMFSA6A,SCMFSA6B,SF_MASTR,SCMFSA6C,SCMFSA7B,SCMFSA8A,SCMFSA8B,SCMFSA8C,SCMFSA_9,SFMASTR1,SCMFSA9A,SFMASTR2,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,AFINSQ_1,PBOOLE,EXTPRO_1,CARD_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB28,CKB29,CKB30,CKB31,CKB32,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB41;
schemes FUNCT_2,NAT_1;
registrations SUBSET_1,SETFAM_1,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,CARD_3,SCMFSA_2,SF_MASTR,SCMFSA6B,SCMFSA6C,SCMFSA7B,SCMFSA8A,SCMFSA8B,SCMFSA_9,SFMASTR1,XBOOLE_0,VALUED_0,AFINSQ_1,FUNCOP_1,COMPOS_1,EXTPRO_1,PBOOLE,FUNCT_4,MEMSTR_0,SCMFSA6A,CKB7,CKB27,CKB33,CKB40;
constructors SETWISEO,REAL_1,INT_2,MESFUNC1,SCMFSA6A,SCMFSA6B,SCMFSA6C,SCMFSA8A,SCMFSA8B,SCMFSA_9,SFMASTR1,SCMFSA9A,RELSET_1,FUNCT_4,PBOOLE,GRAPH_2,SCMFSA7B,MEMSTR_0,AMISTD_1,CKB11,CKB19,CKB25,CKB32,CKB39;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve s for (State of ( SCM+FSA ));
reserve aa for Int-Location;
reserve bb for Int-Location;
reserve f for FinSeq-Location;
reserve p for (Instruction-Sequence of ( SCM+FSA ));
theorem
Th39: (((((1 <= ( s . aa ) & ( s . aa ) <= ( len ( s . f ) )) & 1 <= ( s . bb )) & ( s . bb ) <= ( len ( s . f ) )) & ( s . ( intloc ( 0 ) ) ) = 1) implies ( ( IExec (( swap (f,aa,bb) ),p,s) ) . f ) = ( ( ( s . f ) +* (( s . aa ),( ( s . f ) . ( s . bb ) )) ) +* (( s . bb ),( ( s . f ) . ( s . aa ) )) ))
proof
set a = aa;
set b = bb;
assume that
A1: 1 <= ( s . a )
and
A2: ( s . a ) <= ( len ( s . f ) )
and
A3: 1 <= ( s . b )
and
A4: ( s . b ) <= ( len ( s . f ) )
and
A5: ( s . ( intloc ( 0 ) ) ) = 1;
set aux1 = ( 1 -stRWNotIn { a,b } );
set aux2 = ( 2 -ndRWNotIn { a,b } );
set i0 = ( aux1 := (f,a) );
set i1 = ( aux2 := (f,b) );
set i2 = ( (f,a) := aux2 );
set s0 = ( Initialized s );
set s1 = ( Exec (i0,s0) );
set s2 = ( IExec (( i0 ';' i1 ),p,s) );
A6: (b = ( intloc ( 0 ) ) or b is  read-write) by SF_MASTR:def 5;
reconsider sa = ( s . a ) as (Element of ( NAT )) by A1,INT_1:3;
set s0a = ( abs ( s0 . a ) );
set s2a = ( abs ( s2 . a ) );
A7: (a = ( intloc ( 0 ) ) or a is  read-write) by SF_MASTR:def 5;
A8: sa = ( abs ( s . a ) ) by ABSVALUE:def 1;
then A9: (( s0 . f ) = ( s . f ) & sa = s0a) by A5,A7,SCMFSA6A:38,SCMFSA6C:3;
reconsider sb = ( s . b ) as (Element of ( NAT )) by A3,INT_1:3;
A10: sb = ( abs ( s . b ) ) by ABSVALUE:def 1;
set s3 = ( IExec (( ( i0 ';' i1 ) ';' i2 ),p,s) );
A11: aux1 <> aux2 by SFMASTR1:21;
A12: ( s3 . aux1 ) = ( ( Exec (i2,s2) ) . aux1 ) by SCMFSA6C:6
.= ( s2 . aux1 ) by SCMFSA_2:73
.= ( ( Exec (i1,s1) ) . aux1 ) by SCMFSA6C:8
.= ( s1 . aux1 ) by A11,SCMFSA_2:72
.= ( ( s0 . f ) /. s0a ) by CKB5:1
.= ( ( s . f ) . sa ) by A1,A2,A9,FINSEQ_4:15;
set i3 = ( (f,b) := aux1 );
A13: ( s2 . f ) = ( ( Exec (i1,s1) ) . f ) by SCMFSA6C:9
.= ( s1 . f ) by SCMFSA_2:72;
A14: ( s3 . f ) = ( ( Exec (i2,s2) ) . f ) by SCMFSA6C:7
.= ( ( s2 . f ) +* (s2a,( s2 . aux2 )) ) by CKB6:1;
A15: b in { a,b } by TARSKI:def 2;
then A16: b <> aux2 by SFMASTR1:20;
b <> aux1 by A15,SFMASTR1:20;
then A17: ( s1 . b ) = ( s0 . b ) by SCMFSA_2:72
.= ( s . b ) by A5,A6,SCMFSA6A:38,SCMFSA6C:3;
A18: a in { a,b } by TARSKI:def 2;
then A19: a <> aux2 by SFMASTR1:20;
A20: a <> aux1 by A18,SFMASTR1:20;
( s2 . a ) = ( ( Exec (i1,s1) ) . a ) by SCMFSA6C:8
.= ( s1 . a ) by A19,SCMFSA_2:72
.= ( s0 . a ) by A20,SCMFSA_2:72;
then A21: sa = s2a by A5,A8,A7,SCMFSA6A:38,SCMFSA6C:3;
set s1b = ( abs ( s1 . b ) );
A22: ( s1 . f ) = ( s0 . f ) by SCMFSA_2:72
.= ( s . f ) by SCMFSA6C:3;
A23: ( s3 . b ) = ( ( Exec (i2,s2) ) . b ) by SCMFSA6C:6
.= ( s2 . b ) by SCMFSA_2:73
.= ( ( Exec (i1,s1) ) . b ) by SCMFSA6C:8
.= ( s1 . b ) by A16,SCMFSA_2:72;
A24: ( s2 . aux2 ) = ( ( Exec (i1,s1) ) . aux2 ) by SCMFSA6C:8
.= ( ( s1 . f ) /. s1b ) by CKB5:1
.= ( ( s . f ) . sb ) by A3,A4,A10,A22,A17,FINSEQ_4:15;
thus ( ( IExec (( swap (f,a,b) ),p,s) ) . f ) = ( ( Exec (i3,s3) ) . f ) by SCMFSA6C:7
.= ( ( ( s . f ) +* (( s . a ),( ( s . f ) . ( s . b ) )) ) +* (( s . b ),( ( s . f ) . ( s . a ) )) ) by A10,A22,A13,A14,A21,A17,A23,A24,A12,CKB6:1;
end;
