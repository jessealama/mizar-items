environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,PARTFUN1,FUNCT_1,TARSKI,RELAT_1,SUPINF_1,XXREAL_0,ORDINAL1,ARYTM_3,ORDINAL2,XXREAL_2,RLVECT_1,RLSUB_1,STRUCT_0,SUPINF_2,RLSUB_2,FINSEQ_4,MCART_1,RLVECT_3,REAL_1,CARD_1,MSSUBFAM,UNIALG_1,COMPLEX1,FUNCOP_1,ARYTM_1,ALGSTR_0,XREAL_0,REALSET1,ZFMISC_1,NORMSP_1,HAHNBAN,NORMSP_0;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,STRUCT_0,ALGSTR_0,REAL_1,RELAT_1,REALSET1,FUNCT_1,FUNCT_2,RLVECT_1,RLSUB_1,RLSUB_2,NORMSP_0,NORMSP_1,SUPINF_1,PARTFUN1,FUNCOP_1,RLVECT_3,DOMAIN_1,XXREAL_2,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB33,CKB34;
definitions TARSKI,RLSUB_1,RLSUB_2,RLVECT_1,ORDINAL1,XBOOLE_0,STRUCT_0,ALGSTR_0,XXREAL_2,SUPINF_1,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25;
theorems PARTFUN1,RLSUB_1,FUNCT_2,ZFMISC_1,FUNCOP_1,TREES_2,TARSKI,FUNCT_1,GRFUNC_1,RLVECT_1,RLSUB_2,RLVECT_4,MCART_1,RLVECT_3,ABSVALUE,NORMSP_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_1,XXREAL_0,NUMBERS,STRUCT_0,ALGSTR_0,XXREAL_2,NORMSP_0,SETFAM_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB35,CKB36,CKB37,CKB38;
schemes ORDERS_1,DOMAIN_1,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,RELSET_1,PARTFUN1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,STRUCT_0,RLVECT_1,RLSUB_1,ALGSTR_0,FUNCT_2,FUNCT_1,RELAT_1,DOMAIN_1,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32;
constructors BINOP_1,REAL_1,COMPLEX1,SUPINF_1,REALSET1,RFUNCT_3,RLSUB_2,RLVECT_2,RLVECT_3,NORMSP_1,XXREAL_2,RELSET_1,XXREAL_1,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve V for RealLinearSpace;
theorem
Lm1: (for X being (Subspace of V) holds (for v being (VECTOR of V) holds ((not v in (the carrier of X)) implies (for q being (Banach-Functional of V) holds (for fi being (linear-Functional of X) holds ((for x being (VECTOR of X) holds (for v being (VECTOR of V) holds (x = v implies ( fi . x ) <= ( q . v )))) implies (ex psi being (linear-Functional of ( X + ( Lin { v } ) )) st (( psi | (the carrier of X) ) = fi & (for x being (VECTOR of ( X + ( Lin { v } ) )) holds (for v being (VECTOR of V) holds (x = v implies ( psi . x ) <= ( q . v ))))))))))))
proof
let X being (Subspace of V);
let v being (VECTOR of V);
assume (not v in (the carrier of X));
then A1: (not v in X) by STRUCT_0:def 5;
v in ( Lin { v } ) by RLVECT_4:9;
then A2: v in (the carrier of ( Lin { v } )) by STRUCT_0:def 5;
(the carrier of ( Lin { v } )) c= (the carrier of ( ( Lin { v } ) + X )) by CKB1:1;
then reconsider x0 = v as (VECTOR of ( X + ( Lin { v } ) )) by A2,RLSUB_2:5;
set x1 = the (VECTOR of X);
let q being (Banach-Functional of V);
let fi being (linear-Functional of X);
assume that
A3: (for x being (VECTOR of X) holds (for v being (VECTOR of V) holds (x = v implies ( fi . x ) <= ( q . v ))));
set A = { ( ( fi . x ) - ( q . ( y - v ) ) ) where x is (VECTOR of X),y is (VECTOR of V): x = y };
set B = { ( ( fi . x ) + ( q . ( v - y ) ) ) where x is (VECTOR of X),y is (VECTOR of V): x = y };
A4:now
let x1 being (VECTOR of X);
let x2 being (VECTOR of X);
let y1 being (VECTOR of V);
let y2 being (VECTOR of V);
assume (x1 = y1 & x2 = y2);
then ( fi . ( x1 - x2 ) ) <= ( q . ( y1 - y2 ) ) by A3,RLSUB_1:16;
then A5: ( ( fi . x1 ) - ( fi . x2 ) ) <= ( q . ( y1 - y2 ) ) by CKB36:1;
( y1 - y2 ) = ( ( y1 + ( 0. V ) ) + ( - y2 ) ) by RLVECT_1:4
.= ( ( y1 + ( ( - v ) + v ) ) + ( - y2 ) ) by RLVECT_1:5
.= ( ( ( y1 - v ) + v ) + ( - y2 ) ) by RLVECT_1:def 3
.= ( ( y1 - v ) + ( v - y2 ) ) by RLVECT_1:def 3;
then ( q . ( y1 - y2 ) ) <= ( ( q . ( y1 - v ) ) + ( q . ( v - y2 ) ) ) by CKB19:def 1;
then ( ( fi . x1 ) - ( fi . x2 ) ) <= ( ( q . ( v - y2 ) ) + ( q . ( y1 - v ) ) ) by A5,XXREAL_0:2;
then ( fi . x1 ) <= ( ( fi . x2 ) + ( ( q . ( v - y2 ) ) + ( q . ( y1 - v ) ) ) ) by XREAL_1:20;
then ( fi . x1 ) <= ( ( ( fi . x2 ) + ( q . ( v - y2 ) ) ) + ( q . ( y1 - v ) ) );
hence ( ( fi . x1 ) - ( q . ( y1 - v ) ) ) <= ( ( fi . x2 ) + ( q . ( v - y2 ) ) ) by XREAL_1:20;
end;
A6:now
let a being R_eal;
let b being R_eal;
assume a in A;
then A7: (ex x1 being (VECTOR of X) st (ex y1 being (VECTOR of V) st (a = ( ( fi . x1 ) - ( q . ( y1 - v ) ) ) & x1 = y1)));
assume b in B;
then (ex x2 being (VECTOR of X) st (ex y2 being (VECTOR of V) st (b = ( ( fi . x2 ) + ( q . ( v - y2 ) ) ) & x2 = y2)));
hence a <= b by A4,A7;
end;
reconsider v1 = x1 as (VECTOR of V) by RLSUB_1:10;
A8: A c= ( REAL )
proof
let a being set;
assume a in A;
then (ex x being (VECTOR of X) st (ex y being (VECTOR of V) st (a = ( ( fi . x ) - ( q . ( y - v ) ) ) & x = y)));
hence thesis;
end;
A9: B c= ( REAL )
proof
let b being set;
assume b in B;
then (ex x being (VECTOR of X) st (ex y being (VECTOR of V) st (b = ( ( fi . x ) + ( q . ( v - y ) ) ) & x = y)));
hence thesis;
end;
(( ( fi . x1 ) - ( q . ( v1 - v ) ) ) in A & ( ( fi . x1 ) + ( q . ( v - v1 ) ) ) in B);
then reconsider A,B as non  empty (Subset of ( ExtREAL )) by A8,A9,NUMBERS:31,XBOOLE_1:1;
A10: ( sup A ) <= ( inf B ) by A6,XXREAL_2:96;
A11: A is  bounded_above
proof
set b = the (Element of B);
reconsider b as  real number by A9;
take b;
let x being  ext-real number;
thus thesis by A6;
end;
A <> { ( -infty ) }
proof
set x = the (Element of A);
assume A = { ( -infty ) };
then x = ( -infty ) by TARSKI:def 1;
hence contradiction by A8;
end;
then reconsider r = ( sup A ) as Real by A11,XXREAL_2:57;
consider psi being (linear-Functional of ( X + ( Lin { v } ) )) such that A12: ( psi | (the carrier of X) ) = fi and A13: ( psi . x0 ) = r by A1,CKB38:1;
take psi;
thus ( psi | (the carrier of X) ) = fi by A12;
let y being (VECTOR of ( X + ( Lin { v } ) ));
let u being (VECTOR of V);
assume that
A14: y = u;
y in ( X + ( Lin { v } ) ) by STRUCT_0:def 5;
then consider y1,y29 being (VECTOR of V) such that A15: y1 in X and A16: y29 in ( Lin { v } ) and A17: y = ( y1 + y29 ) by RLSUB_2:1;
y1 in ( X + ( Lin { v } ) ) by A15,RLSUB_2:2;
then reconsider x = y1 as (VECTOR of ( X + ( Lin { v } ) )) by STRUCT_0:def 5;
reconsider x1 = x as (VECTOR of X) by A15,STRUCT_0:def 5;
consider t being Real such that A18: y29 = ( t * v ) by A16,RLVECT_4:8;
per cases ;
suppose t = ( 0 );

then y29 = ( 0. V ) by A18,RLVECT_1:10;
then A19: y = x1 by A17,RLVECT_1:4;
then ( fi . x1 ) <= ( q . u ) by A3,A14;
hence thesis by A12,A19,FUNCT_1:49;
end;
suppose A20: t > ( 0 );

reconsider b = ( ( psi . ( ( ( - t ) " ) * x ) ) + ( q . ( v - ( ( ( - t ) " ) * y1 ) ) ) ) as R_eal by XBOOLE_0:def 3,XXREAL_0:def 4;
A21: ( v - ( ( ( - t ) " ) * y1 ) ) = ( v - ( ( - ( t " ) ) * y1 ) ) by XCMPLX_1:222
.= ( v + ( - ( - ( ( t " ) * y1 ) ) ) ) by RLVECT_4:3
.= ( v + ( ( t " ) * y1 ) ) by RLVECT_1:17;
A22: ( ( ( - t ) " ) * x1 ) = ( ( ( - t ) " ) * y1 ) by RLSUB_1:14;
then ( ( ( - t ) " ) * x1 ) = ( ( ( - t ) " ) * x ) by RLSUB_1:14;
then ( fi . ( ( ( - t ) " ) * x1 ) ) = ( psi . ( ( ( - t ) " ) * x ) ) by A12,FUNCT_1:49;
then ( ( psi . ( ( ( - t ) " ) * x ) ) + ( q . ( v - ( ( ( - t ) " ) * y1 ) ) ) ) in B by A22;
then ( inf B ) <= b by XXREAL_2:3;
then ( sup A ) <= b by A10,XXREAL_0:2;
then ( psi . ( ( ( - t ) " ) * x ) ) >= ( r - ( q . ( v - ( ( ( - t ) " ) * y1 ) ) ) ) by XREAL_1:20;
then A23: ( - ( psi . ( ( ( - t ) " ) * x ) ) ) <= ( - ( r - ( q . ( v - ( ( ( - t ) " ) * y1 ) ) ) ) ) by XREAL_1:24;
( - ( psi . ( ( ( - t ) " ) * x ) ) ) = ( ( - 1 ) * ( psi . ( ( ( - t ) " ) * x ) ) )
.= ( psi . ( ( - 1 ) * ( ( ( - t ) " ) * x ) ) ) by CKB21:def 1
.= ( psi . ( ( ( - 1 ) * ( ( - t ) " ) ) * x ) ) by RLVECT_1:def 7
.= ( psi . ( ( ( - 1 ) * ( - ( t " ) ) ) * x ) ) by XCMPLX_1:222
.= ( psi . ( ( t " ) * x ) );
then A24: ( psi . ( ( t " ) * x ) ) <= ( ( q . ( v + ( ( t " ) * y1 ) ) ) - r ) by A23,A21;
( ( t " ) * u ) = ( ( ( t " ) * y1 ) + ( ( t " ) * y29 ) ) by A14,A17,RLVECT_1:def 5
.= ( ( ( t " ) * y1 ) + ( ( ( t " ) * t ) * v ) ) by A18,RLVECT_1:def 7
.= ( ( ( t " ) * y1 ) + ( 1 * v ) ) by A20,XCMPLX_0:def 7
.= ( v + ( ( t " ) * y1 ) ) by RLVECT_1:def 8;
then ( ( psi . ( ( t " ) * x ) ) + r ) <= ( q . ( ( t " ) * u ) ) by A24,XREAL_1:19;
then A25: ( ( psi . ( ( t " ) * x ) ) + r ) <= ( ( t " ) * ( q . u ) ) by A20,CKB22:def 1;
y29 in ( X + ( Lin { v } ) ) by A16,RLSUB_2:2;
then reconsider y2 = y29 as (VECTOR of ( X + ( Lin { v } ) )) by STRUCT_0:def 5;
y2 = ( t * x0 ) by A18,RLSUB_1:14;
then A26: y = ( x + ( t * x0 ) ) by A17,RLSUB_1:13;
A27: ( t * ( ( t " ) * ( q . u ) ) ) = ( ( t * ( t " ) ) * ( q . u ) )
.= ( 1 * ( q . u ) ) by A20,XCMPLX_0:def 7
.= ( q . u );
( psi . ( x + ( t * x0 ) ) ) = ( ( psi . x ) + ( psi . ( t * x0 ) ) ) by CKB20:def 1
.= ( 1 * ( ( psi . x ) + ( t * ( psi . x0 ) ) ) ) by CKB21:def 1
.= ( ( t * ( t " ) ) * ( ( psi . x ) + ( t * ( psi . x0 ) ) ) ) by A20,XCMPLX_0:def 7
.= ( t * ( ( ( t " ) * ( psi . x ) ) + ( ( ( t " ) * t ) * ( psi . x0 ) ) ) )
.= ( t * ( ( ( t " ) * ( psi . x ) ) + ( 1 * ( psi . x0 ) ) ) ) by A20,XCMPLX_0:def 7
.= ( t * ( ( psi . ( ( t " ) * x ) ) + r ) ) by A13,CKB21:def 1;
hence thesis by A20,A26,A27,A25,XREAL_1:64;
end;
suppose A28: t < ( 0 );

( - y29 ) in ( Lin { v } ) by A16,RLSUB_1:22;
then ( - y29 ) in ( X + ( Lin { v } ) ) by RLSUB_2:2;
then reconsider y2 = ( - y29 ) as (VECTOR of ( X + ( Lin { v } ) )) by STRUCT_0:def 5;
reconsider a = ( ( psi . ( ( ( - t ) " ) * x ) ) - ( q . ( ( ( ( - t ) " ) * y1 ) - v ) ) ) as R_eal by XBOOLE_0:def 3,XXREAL_0:def 4;
A29: y = ( y1 - ( - y29 ) ) by A17,RLVECT_1:17;
A30: ( - y29 ) = ( ( - t ) * v ) by A18,RLVECT_4:3;
then y2 = ( ( - t ) * x0 ) by RLSUB_1:14;
then A31: y = ( x - ( ( - t ) * x0 ) ) by A29,RLSUB_1:16;
A32: ( ( ( - t ) " ) * x1 ) = ( ( ( - t ) " ) * y1 ) by RLSUB_1:14;
then ( ( ( - t ) " ) * x1 ) = ( ( ( - t ) " ) * x ) by RLSUB_1:14;
then ( fi . ( ( ( - t ) " ) * x1 ) ) = ( psi . ( ( ( - t ) " ) * x ) ) by A12,FUNCT_1:49;
then ( ( psi . ( ( ( - t ) " ) * x ) ) - ( q . ( ( ( ( - t ) " ) * y1 ) - v ) ) ) in A by A32;
then a <= ( sup A ) by XXREAL_2:4;
then A33: ( psi . ( ( ( - t ) " ) * x ) ) <= ( r + ( q . ( ( ( ( - t ) " ) * y1 ) - v ) ) ) by XREAL_1:20;
A34: ( - t ) > ( 0 ) by A28,XREAL_1:58;
( ( ( - t ) " ) * u ) = ( ( ( ( - t ) " ) * y1 ) - ( ( ( - t ) " ) * ( - y29 ) ) ) by A14,A29,RLVECT_1:34
.= ( ( ( ( - t ) " ) * y1 ) - ( ( ( ( - t ) " ) * ( - t ) ) * v ) ) by A30,RLVECT_1:def 7
.= ( ( ( ( - t ) " ) * y1 ) - ( 1 * v ) ) by A34,XCMPLX_0:def 7
.= ( ( ( ( - t ) " ) * y1 ) - v ) by RLVECT_1:def 8;
then ( ( psi . ( ( ( - t ) " ) * x ) ) - r ) <= ( q . ( ( ( - t ) " ) * u ) ) by A33,XREAL_1:20;
then A35: ( ( psi . ( ( ( - t ) " ) * x ) ) - r ) <= ( ( ( - t ) " ) * ( q . u ) ) by A34,CKB22:def 1;
A36: ( ( - t ) * ( ( ( - t ) " ) * ( q . u ) ) ) = ( ( ( - t ) * ( ( - t ) " ) ) * ( q . u ) )
.= ( 1 * ( q . u ) ) by A34,XCMPLX_0:def 7
.= ( q . u );
( psi . ( x - ( ( - t ) * x0 ) ) ) = ( ( psi . x ) - ( psi . ( ( - t ) * x0 ) ) ) by CKB36:1
.= ( 1 * ( ( psi . x ) - ( ( - t ) * ( psi . x0 ) ) ) ) by CKB21:def 1
.= ( ( ( - t ) * ( ( - t ) " ) ) * ( ( psi . x ) - ( ( - t ) * ( psi . x0 ) ) ) ) by A34,XCMPLX_0:def 7
.= ( ( - t ) * ( ( ( ( - t ) " ) * ( psi . x ) ) - ( ( ( ( - t ) " ) * ( - t ) ) * ( psi . x0 ) ) ) )
.= ( ( - t ) * ( ( ( ( - t ) " ) * ( psi . x ) ) - ( 1 * ( psi . x0 ) ) ) ) by A34,XCMPLX_0:def 7
.= ( ( - t ) * ( ( psi . ( ( ( - t ) " ) * x ) ) - r ) ) by A13,CKB21:def 1;
hence thesis by A28,A31,A36,A35,XREAL_1:64;
end;
end;
