environ
vocabularies INT_1,ABIAN,ARYTM_1,ZFMISC_1,FUNCT_1,RELAT_1,TARSKI,FUNCOP_1,FUNCT_2,FUNCT_6,XBOOLE_0,PBOOLE,SUBSET_1,NUMBERS,NAT_1,HILBERT1,CARD_1,FUNCT_3,CARD_3,MCART_1,PARTFUN1,FINSEQ_4,XBOOLEAN,QC_LANG1,HILBERT2,FUNCT_5,ARYTM_3,FUNCT_4,XXREAL_0,HILBERT3,XCMPLX_0;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,INT_1,RELAT_1,FUNCT_1,PBOOLE,CARD_3,ABIAN,PARTFUN1,FUNCT_2,BINOP_1,NAT_1,XXREAL_0,FUNCT_3,FUNCOP_1,FUNCT_4,FUNCT_5,FUNCT_6,PRALG_1,PRALG_2,MSUALG_3,HILBERT1,HILBERT2,CKB29,CKB34,CKB35,CKB36,CKB46,CKB47,CKB48,CKB58;
definitions PBOOLE,FUNCT_1,FUNCT_2,TARSKI,HILBERT1,ABIAN,FUNCOP_1,RELAT_1,XBOOLE_0,BINOP_1,SUBSET_1,CKB29,CKB35,CKB36,CKB46,CKB47,CKB48,CKB58;
theorems PBOOLE,ZFMISC_1,MSUALG_3,FUNCT_2,RELAT_1,RELSET_1,FUNCT_1,FUNCT_3,TARSKI,FUNCOP_1,PARTFUN2,PRALG_2,CARD_3,FUNCT_6,MSSUBFAM,FUNCT_5,FUNCTOR0,CAT_2,HILBERT1,FUNCT_4,INT_1,TOPREAL6,PRALG_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,ABIAN,XREAL_1,XXREAL_0,CARD_1,PARTFUN1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB31,CKB32,CKB33,CKB35,CKB36,CKB38,CKB39,CKB40,CKB41,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB54,CKB55,CKB56,CKB57,CKB58;
schemes HILBERT2,FUNCT_2;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,NUMBERS,XREAL_0,INT_1,PBOOLE,ABIAN,HILBERT1,FUNCT_7,RELSET_1,ZFMISC_1,MSSUBFAM,CKB1,CKB2,CKB18,CKB30,CKB37,CKB42,CKB43,CKB44,CKB45,CKB53,CKB59,CKB60,CKB61,CKB62,CKB63;
constructors XXREAL_0,NAT_D,REALSET1,MSSUBFAM,ABIAN,CAT_2,PRALG_1,PRALG_2,MSUALG_3,HILBERT2,RELSET_1,CKB29,CKB35,CKB36,CKB46,CKB47,CKB48,CKB58;
requirements NUMERALS,BOOLE,SUBSET;
begin
reserve p for (Element of ( HP-WFF ));
reserve q for (Element of ( HP-WFF ));
reserve r for (Element of ( HP-WFF ));
reserve V for SetValuation;
registration
let p;
let q;
let r;
cluster ( ( p => ( q => r ) ) => ( ( p => q ) => ( p => r ) ) ) ->  canonical;
coherence
proof
deffunc G(Function) = ( Frege $1 );
let V;
A1: (( SetVal (V,( p => q )) ) = ( Funcs (( SetVal (V,p) ),( SetVal (V,q) )) ) & ( SetVal (V,( p => r )) ) = ( Funcs (( SetVal (V,p) ),( SetVal (V,r) )) )) by CKB35:def 1;
A2: (for x being (Element of ( SetVal (V,( p => ( q => r ) )) )) holds G(x) in ( SetVal (V,( ( p => q ) => ( p => r ) )) ))
proof
let x being (Element of ( SetVal (V,( p => ( q => r ) )) ));
x is (Element of ( Funcs (( SetVal (V,p) ),( SetVal (V,( q => r )) )) )) by CKB35:def 1;
then x is (Element of ( Funcs (( SetVal (V,p) ),( Funcs (( SetVal (V,q) ),( SetVal (V,r) )) )) )) by CKB35:def 1;
then ( Frege x ) is (Function of ( SetVal (V,( p => q )) ),( SetVal (V,( p => r )) )) by A1,CKB27:1;
then ( Frege x ) in ( Funcs (( SetVal (V,( p => q )) ),( SetVal (V,( p => r )) )) ) by FUNCT_2:8;
hence ( Frege x ) in ( SetVal (V,( ( p => q ) => ( p => r ) )) ) by CKB35:def 1;
end;
consider F being (Function of ( SetVal (V,( p => ( q => r ) )) ),( SetVal (V,( ( p => q ) => ( p => r ) )) )) such that A3: (for x being (Element of ( SetVal (V,( p => ( q => r ) )) )) holds ( F . x ) = G(x)) from FUNCT_2:sch 8(A2);
take F;
let P being (Permutation of V);
F in ( Funcs (( SetVal (V,( p => ( q => r ) )) ),( SetVal (V,( ( p => q ) => ( p => r ) )) )) ) by FUNCT_2:8;
then F in ( SetVal (V,( ( p => ( q => r ) ) => ( ( p => q ) => ( p => r ) ) )) ) by CKB35:def 1;
hence F in ( dom ( Perm (P,( ( p => ( q => r ) ) => ( ( p => q ) => ( p => r ) ) )) ) ) by FUNCT_2:def 1;
now
reconsider X = ( ( Perm (P,( q => r )) ) " ) as (Function of ( SetVal (V,( q => r )) ),( SetVal (V,( q => r )) ));
let f being (Element of ( SetVal (V,( p => ( q => r ) )) ));
set Yf = ( ( ( Perm (P,( p => ( q => r ) )) ) " ) . f );
A4: ( SetVal (V,( q => r )) ) = ( Funcs (( SetVal (V,q) ),( SetVal (V,r) )) ) by CKB35:def 1;
f in ( SetVal (V,( p => ( q => r ) )) );
then f in ( Funcs (( SetVal (V,p) ),( SetVal (V,( q => r )) )) ) by CKB35:def 1;
then reconsider ff = f as (Function of ( SetVal (V,p) ),( SetVal (V,( q => r )) )) by FUNCT_2:66;
Yf = ( ( ( ( Perm (P,( q => r )) ) " ) * ff ) * ( Perm (P,p) ) ) by CKB55:1;
then reconsider h = ( Frege Yf ) as  Function-yielding (Function of ( SetVal (V,( p => q )) ),( SetVal (V,( p => r )) )) by A1,A4,CKB27:1;
set M = ( ( ( Perm (P,( p => r )) ) * h ) * ( ( Perm (P,( p => q )) ) " ) );
A5: ( product ( doms ff ) ) = ( product ( ( SetVal (V,p) ) --> ( SetVal (V,q) ) ) ) by A4,CKB8:1
.= ( Funcs (( SetVal (V,p) ),( SetVal (V,q) )) ) by CARD_3:11;
then A6: ( product ( doms ff ) ) = ( SetVal (V,( p => q )) ) by CKB35:def 1;
then reconsider M as (ManySortedFunction of ( product ( doms f ) ));
A7: (for g being Function holds (g in ( product ( doms f ) ) implies ( M . g ) = ( f .. g )))
proof
Yf in ( SetVal (V,( p => ( q => r ) )) );
then Yf in ( Funcs (( SetVal (V,p) ),( SetVal (V,( q => r )) )) ) by CKB35:def 1;
then Yf is (Function of ( SetVal (V,p) ),( Funcs (( SetVal (V,q) ),( SetVal (V,r) )) )) by A4,FUNCT_2:66;
then A8: ( product ( doms Yf ) ) = ( product ( ( SetVal (V,p) ) --> ( SetVal (V,q) ) ) ) by CKB8:1
.= ( Funcs (( SetVal (V,p) ),( SetVal (V,q) )) ) by CARD_3:11
.= ( SetVal (V,( p => q )) ) by CKB35:def 1;
reconsider FF = ff as (Function of ( SetVal (V,p) ),( Funcs (( SetVal (V,q) ),( SetVal (V,r) )) )) by CKB35:def 1;
let g being Function;
assume that
A9: g in ( product ( doms f ) );
reconsider G = g as (Function of ( SetVal (V,p) ),( SetVal (V,q) )) by A5,A9,FUNCT_2:66;
( dom FF ) = ( SetVal (V,p) ) by FUNCT_2:def 1;
then A10: ( dom ( FF .. G ) ) = ( SetVal (V,p) ) by PRALG_1:def 17;
A11: ( rng ( FF .. G ) ) c= ( SetVal (V,r) ) by CKB24:1;
then reconsider GG = ( FF .. G ) as (Function of ( SetVal (V,p) ),( SetVal (V,r) )) by A10,FUNCT_2:def 1,RELSET_1:4;
( FF .. G ) is (Function of ( SetVal (V,p) ),( SetVal (V,r) )) by A10,A11,FUNCT_2:def 1,RELSET_1:4;
then ( FF .. G ) in ( Funcs (( SetVal (V,p) ),( SetVal (V,r) )) ) by FUNCT_2:8;
then A12: ( FF .. G ) in ( SetVal (V,( p => r )) ) by CKB35:def 1;
( ( ( ( Perm (P,q) ) " ) * G ) * ( Perm (P,p) ) ) in ( Funcs (( SetVal (V,p) ),( SetVal (V,q) )) ) by FUNCT_2:8;
then A13: ( ( ( ( Perm (P,q) ) " ) * g ) * ( Perm (P,p) ) ) in ( product ( doms Yf ) ) by A8,CKB35:def 1;
then A14: ( ( ( Perm (P,( p => q )) ) " ) . G ) in ( SetVal (V,( p => q )) ) by A8,CKB55:1;
A15: X = ( ( ( Perm (P,q) ) => ( Perm (P,r) ) ) " ) by CKB52:1
.= ( ( ( Perm (P,q) ) " ) => ( ( Perm (P,r) ) " ) ) by CKB32:1;
A16: ( h . ( ( ( Perm (P,( p => q )) ) " ) . g ) ) = ( h . ( ( ( ( Perm (P,q) ) " ) * G ) * ( Perm (P,p) ) ) ) by CKB55:1
.= ( Yf .. ( ( ( ( Perm (P,q) ) " ) * g ) * ( Perm (P,p) ) ) ) by A13,PRALG_2:def 2
.= ( ( ( X * ff ) * ( Perm (P,p) ) ) .. ( ( ( ( Perm (P,q) ) " ) * g ) * ( Perm (P,p) ) ) ) by CKB55:1
.= ( ( ( X * FF ) .. ( ( ( Perm (P,q) ) " ) * g ) ) * ( Perm (P,p) ) ) by CKB22:1
.= ( ( ( ( Perm (P,r) ) " ) * ( FF .. G ) ) * ( Perm (P,p) ) ) by A15,CKB33:1
.= ( ( ( Perm (P,( p => r )) ) " ) . GG ) by CKB55:1;
thus ( M . g ) = ( ( ( Perm (P,( p => r )) ) * h ) . ( ( ( Perm (P,( p => q )) ) " ) . g ) ) by A6,A9,FUNCT_2:15
.= ( ( Perm (P,( p => r )) ) . ( ( ( Perm (P,( p => r )) ) " ) . GG ) ) by A14,A16,FUNCT_2:15
.= ( ( ( Perm (P,( p => r )) ) * ( ( Perm (P,( p => r )) ) " ) ) . GG ) by A12,FUNCT_2:15
.= ( ( id ( SetVal (V,( p => r )) ) ) . GG ) by FUNCT_2:61
.= ( f .. g ) by A12,FUNCT_1:18;
end;
thus ( F . f ) = ( Frege f ) by A3
.= ( ( ( Perm (P,( p => r )) ) * h ) * ( ( Perm (P,( p => q )) ) " ) ) by A7,PRALG_2:def 2
.= ( ( Perm (P,( ( p => q ) => ( p => r ) )) ) . h ) by CKB54:1
.= ( ( Perm (P,( ( p => q ) => ( p => r ) )) ) . ( F . ( ( ( Perm (P,( p => ( q => r ) )) ) " ) . f ) ) ) by A3
.= ( ( ( Perm (P,( ( p => q ) => ( p => r ) )) ) * F ) . ( ( ( Perm (P,( p => ( q => r ) )) ) " ) . f ) ) by FUNCT_2:15
.= ( ( ( ( Perm (P,( ( p => q ) => ( p => r ) )) ) * F ) * ( ( Perm (P,( p => ( q => r ) )) ) " ) ) . f ) by FUNCT_2:15;
end;
hence F = ( ( ( Perm (P,( ( p => q ) => ( p => r ) )) ) * F ) * ( ( Perm (P,( p => ( q => r ) )) ) " ) ) by FUNCT_2:63
.= ( ( Perm (P,( ( p => ( q => r ) ) => ( ( p => q ) => ( p => r ) ) )) ) . F ) by CKB54:1;
end;
end;
