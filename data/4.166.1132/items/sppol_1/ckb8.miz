environ
vocabularies NUMBERS,SUBSET_1,XREAL_0,ORDINAL1,NAT_1,ARYTM_3,XXREAL_0,ARYTM_1,FINSEQ_1,XBOOLE_0,RELAT_1,FINSET_1,TARSKI,COMPLEX1,REAL_1,PRE_TOPC,EUCLID,METRIC_1,FUNCT_1,RCOMP_1,RLTOPSP1,CARD_1,SEQ_4,XXREAL_2,PCOMPS_1,STRUCT_0,SUPINF_2,TEX_2,COMPTS_1,TOPREAL1,BORSUK_1,TOPS_2,ORDINAL2,MCART_1,ZFMISC_1,PARTFUN1,SETFAM_1,SPPOL_1;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,ORDINAL1,NUMBERS,XXREAL_0,XXREAL_2,XREAL_0,COMPLEX1,REAL_1,NAT_1,SQUARE_1,SEQ_4,FUNCT_1,PARTFUN1,PRE_TOPC,BORSUK_1,FINSET_1,FINSEQ_1,FINSEQ_4,DOMAIN_1,STRUCT_0,METRIC_1,PCOMPS_1,TOPS_2,ZFMISC_1,COMPTS_1,RLVECT_1,RLTOPSP1,EUCLID,TEX_2,TOPREAL1;
definitions TARSKI,TOPREAL1,SEQ_4,EUCLID,COMPTS_1,SUBSET_1,VALUED_1,STRUCT_0,ALGSTR_0,RLTOPSP1,XXREAL_2;
theorems TARSKI,NAT_1,INT_1,ABSVALUE,SUBSET_1,FINSET_1,FINSEQ_1,PRE_TOPC,METRIC_1,TOPS_1,TOPS_2,SEQ_4,EUCLID,TOPMETR,TOPREAL1,TOPREAL3,PCOMPS_1,COMPTS_1,TEX_2,FINSEQ_3,ZFMISC_1,HEINE,TDLAT_3,PARTFUN2,XREAL_0,XBOOLE_0,XBOOLE_1,XCMPLX_1,XREAL_1,COMPLEX1,XXREAL_0,RLTOPSP1,CKB1,CKB2,CKB5,CKB6,CKB7;
schemes FRAENKEL,CKB3,CKB4;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,INT_1,MEMBERED,FINSEQ_1,STRUCT_0,PRE_TOPC,TEX_2,EUCLID,TOPREAL1,FINSET_1,VALUED_0,RLTOPSP1,FUNCT_1;
constructors SETFAM_1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_4,FINSEQ_4,TOPS_2,COMPTS_1,REALSET2,TDLAT_3,TEX_2,MONOID_0,TOPMETR,TOPREAL1,PCOMPS_1,XXREAL_2,FUNCSDOM,CONVEX1,BINOP_2;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve r for Real;
reserve s for Real;
reserve p1 for (Point of ( TOP-REAL n ));
reserve p2 for (Point of ( TOP-REAL n ));
theorem
(for P being non empty (Subset of ( TOP-REAL n )) holds ((P is  closed & P c= ( LSeg (p1,p2) )) implies (ex s st (( ( ( 1 - s ) * p1 ) + ( s * p2 ) ) in P & (for r holds (((( 0 ) <= r & r <= 1) & ( ( ( 1 - r ) * p1 ) + ( r * p2 ) ) in P) implies s <= r))))))
proof
let P being non empty (Subset of ( TOP-REAL n ));
set W = { r: ((( 0 ) <= r & r <= 1) & ( ( ( 1 - r ) * p1 ) + ( r * p2 ) ) in P) };
W c= ( REAL )
proof
let x being set;
assume x in W;
then (ex r st (((r = x & ( 0 ) <= r) & r <= 1) & ( ( ( 1 - r ) * p1 ) + ( r * p2 ) ) in P));
hence thesis;
end;
then reconsider W as (Subset of ( REAL ));
assume that
A1: P is  closed
and
A2: P c= ( LSeg (p1,p2) );
take r2 = ( lower_bound W );
A3: W is  bounded_below
proof
take ( 0 );
let r being  ext-real number;
assume r in W;
then (ex s st (((s = r & ( 0 ) <= s) & s <= 1) & ( ( ( 1 - s ) * p1 ) + ( s * p2 ) ) in P));
hence thesis;
end;
hereby
set p = ( ( ( 1 - r2 ) * p1 ) + ( r2 * p2 ) );
reconsider u = p as (Point of ( Euclid n )) by EUCLID:22;
A4: ( the TopStruct of ( TOP-REAL n ) ) = ( TopSpaceMetr ( Euclid n ) ) by EUCLID:def 8;
then reconsider Q = ( P ` ) as (Subset of ( TopSpaceMetr ( Euclid n ) ));
( P ` ) is  open by A1,TOPS_1:3;
then A5: Q is  open by A4,PRE_TOPC:30;
A6: (ex r0 being Real st r0 in W)
proof
consider v being (Element of ( TOP-REAL n )) such that A7: v in P by SUBSET_1:4;
v in ( LSeg (p1,p2) ) by A2,A7;
then consider s such that A8: ((v = ( ( ( 1 - s ) * p1 ) + ( s * p2 ) ) & ( 0 ) <= s) & s <= 1);
s in { r: ((( 0 ) <= r & r <= 1) & ( ( ( 1 - r ) * p1 ) + ( r * p2 ) ) in P) } by A7,A8;
hence thesis;
end;
assume A9: (not p in P);
then p in ( (the carrier of ( TOP-REAL n )) \ P ) by XBOOLE_0:def 5;
then consider r0 being  real number such that A10: r0 > ( 0 ) and A11: ( Ball (u,r0) ) c= Q by A5,TOPMETR:15;
per cases ;
suppose A12: p1 <> p2;

reconsider v2 = p2 as (Element of ( REAL n )) by EUCLID:22;
reconsider v1 = p1 as (Element of ( REAL n )) by EUCLID:22;
A13: |. ( v2 - v1 ) .| > ( 0 ) by A12,EUCLID:17;
then ( r0 / |. ( v2 - v1 ) .| ) > ( 0 ) by A10,XREAL_1:139;
then consider r4 being  real number such that A14: r4 in W and A15: r4 < ( r2 + ( r0 / |. ( v2 - v1 ) .| ) ) by A3,A6,SEQ_4:def 2;
reconsider r4 as Real by XREAL_0:def 1;
( r4 + ( 0 ) ) < ( r2 + ( r0 / |. ( v2 - v1 ) .| ) ) by A15;
then A16: ( r4 - r2 ) < ( ( r0 / |. ( v2 - v1 ) .| ) - ( 0 ) ) by XREAL_1:21;
set p3 = ( ( ( 1 - r4 ) * p1 ) + ( r4 * p2 ) );
reconsider u3 = p3 as (Point of ( Euclid n )) by EUCLID:22;
reconsider v3 = p3,v4 = p as (Element of ( REAL n )) by EUCLID:22;
A17: ( p2 - p1 ) = ( v2 - v1 ) by EUCLID:69;
A18: ( p3 - p ) = ( ( ( ( 1 - r4 ) * p1 ) + ( r4 * p2 ) ) + ( ( - ( ( 1 - r2 ) * p1 ) ) - ( r2 * p2 ) ) ) by EUCLID:38
.= ( ( ( ( ( 1 - r4 ) * p1 ) + ( r4 * p2 ) ) + ( - ( ( 1 - r2 ) * p1 ) ) ) + ( - ( r2 * p2 ) ) ) by EUCLID:26
.= ( ( ( r4 * p2 ) + ( ( ( 1 - r4 ) * p1 ) + ( - ( ( 1 - r2 ) * p1 ) ) ) ) + ( - ( r2 * p2 ) ) ) by EUCLID:26
.= ( ( ( ( ( 1 - r4 ) * p1 ) + ( - ( ( 1 - r2 ) * p1 ) ) ) + ( r4 * p2 ) ) + ( ( - r2 ) * p2 ) ) by EUCLID:40
.= ( ( ( ( ( 1 - r4 ) * p1 ) + ( ( - ( 1 - r2 ) ) * p1 ) ) + ( r4 * p2 ) ) + ( ( - r2 ) * p2 ) ) by EUCLID:40
.= ( ( ( ( 1 - r4 ) * p1 ) + ( ( - ( 1 - r2 ) ) * p1 ) ) + ( ( r4 * p2 ) + ( ( - r2 ) * p2 ) ) ) by EUCLID:26
.= ( ( ( ( 1 - r4 ) * p1 ) + ( ( - ( 1 - r2 ) ) * p1 ) ) + ( ( r4 + ( - r2 ) ) * p2 ) ) by EUCLID:33
.= ( ( ( ( 1 - r4 ) + ( - ( 1 - r2 ) ) ) * p1 ) + ( ( r4 - r2 ) * p2 ) ) by EUCLID:33
.= ( ( ( - ( r4 - r2 ) ) * p1 ) + ( ( r4 - r2 ) * p2 ) )
.= ( ( ( r4 - r2 ) * p2 ) - ( ( r4 - r2 ) * p1 ) ) by EUCLID:40
.= ( ( r4 - r2 ) * ( p2 - p1 ) ) by EUCLID:49
.= ( ( r4 - r2 ) * ( v2 - v1 ) ) by A17,EUCLID:65;
r2 <= r4 by A3,A14,SEQ_4:def 2;
then A19: ( r4 - r2 ) >= ( 0 ) by XREAL_1:48;
( dist (u3,u) ) = |. ( v3 - v4 ) .| by CKB7:1
.= |. ( p3 - p ) .| by EUCLID:69
.= |. ( ( r4 - r2 ) * ( v2 - v1 ) ) .| by A18
.= ( ( abs ( r4 - r2 ) ) * |. ( v2 - v1 ) .| ) by EUCLID:11
.= ( ( r4 - r2 ) * |. ( v2 - v1 ) .| ) by A19,ABSVALUE:def 1;
then ( dist (u3,u) ) < ( ( r0 / |. ( v2 - v1 ) .| ) * |. ( v2 - v1 ) .| ) by A13,A16,XREAL_1:68;
then ( dist (u,u3) ) < r0 by A13,XCMPLX_1:87;
then u3 in { u0 where u0 is (Point of ( Euclid n )): ( dist (u,u0) ) < r0 };
then A20: u3 in ( Ball (u,r0) ) by METRIC_1:17;
(ex r st (((r = r4 & ( 0 ) <= r) & r <= 1) & ( ( ( 1 - r ) * p1 ) + ( r * p2 ) ) in P)) by A14;
hence contradiction by A11,A20,XBOOLE_0:def 5;
end;
suppose A21: p1 = p2;

then A22: ( LSeg (p1,p2) ) = { p1 } by RLTOPSP1:70;
A23: (ex q1 being (Point of ( TOP-REAL n )) st q1 in P) by SUBSET_1:4;
p = ( ( ( 1 - r2 ) + r2 ) * p1 ) by A21,EUCLID:33
.= p1 by EUCLID:29;
hence contradiction by A2,A9,A22,A23,TARSKI:def 1;
end;
end;
let r;
assume ((( 0 ) <= r & r <= 1) & ( ( ( 1 - r ) * p1 ) + ( r * p2 ) ) in P);
then r in W;
hence thesis by A3,SEQ_4:def 2;
end;
