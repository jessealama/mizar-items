environ
vocabularies NUMBERS,SUBSET_1,FINSEQ_1,RELAT_1,TREES_1,XBOOLE_0,ARYTM_3,XXREAL_0,ORDINAL4,CARD_1,FUNCT_1,TARSKI,TREES_2,TREES_9,ORDINAL1,NAT_1,FINSET_1,QC_LANG1,ZF_LANG,CLASSES2,TREES_4,QC_LANG4;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,NAT_1,RELAT_1,FUNCT_1,FUNCT_2,BINOP_1,FINSET_1,FINSEQ_1,FINSEQ_4,TREES_1,TREES_2,TREES_4,TREES_9,QC_LANG1,QC_LANG2,MCART_1,XXREAL_0,CKB3,CKB6;
definitions TARSKI,XBOOLE_0,TREES_2,TREES_4,BINOP_1,CKB3,CKB6;
theorems TARSKI,NAT_1,RELAT_1,FUNCT_1,FINSEQ_1,TREES_1,TREES_2,TREES_9,GRFUNC_1,QC_LANG1,QC_LANG2,XBOOLE_0,XBOOLE_1,FINSEQ_6,XREAL_1,XXREAL_0,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15;
schemes NAT_1,TREES_2,FINSEQ_1,TREES_9;
registrations SUBSET_1,ORDINAL1,RELSET_1,FINSET_1,XREAL_0,NAT_1,FINSEQ_1,TREES_1,TREES_2,TREES_A,TREES_9,CARD_1,RELAT_1;
constructors BINOP_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_4,TREES_4,TREES_9,QC_LANG2,RELSET_1,CKB3,CKB6;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve F for (Element of ( QC-WFF ));
reserve t for (Element of ( dom ( tree_of_subformulae F ) ));
reserve t9 for (Element of ( dom ( tree_of_subformulae F ) ));
reserve x for set;
theorem
Th43: (t is_a_proper_prefix_of t9 implies ( len ( @ ( ( tree_of_subformulae F ) . t9 ) ) ) < ( len ( @ ( ( tree_of_subformulae F ) . t ) ) ))
proof
set G = ( ( tree_of_subformulae F ) . t );
set H = ( ( tree_of_subformulae F ) . t9 );
assume A1: t is_a_proper_prefix_of t9;
then A2: t is_a_prefix_of t9 by XBOOLE_0:def 8;
A3:now
consider r being FinSequence such that A4: t9 = ( t ^ r ) by A2,TREES_1:1;
reconsider r as (FinSequence of ( NAT )) by A4,FINSEQ_1:36;
A5: 1 <= ( len r )
proof
reconsider t1 = ( {} ) as (Element of ( dom ( tree_of_subformulae F ) )) by TREES_1:22;
(r <> ( {} ) & t1 is_a_prefix_of r) by A1,A4,FINSEQ_1:34,XBOOLE_1:2;
then A6: t1 is_a_proper_prefix_of r by XBOOLE_0:def 8;
( len t1 ) = ( 0 );
then ( 0 ) < ( len r ) by A6,TREES_1:6;
then ( ( 0 ) + 1 ) <= ( len r ) by NAT_1:13;
hence thesis;
end;
defpred P[ set,set ]
 means
(ex t1 being (Element of ( dom ( tree_of_subformulae F ) )) st (ex r1 being FinSequence st (ex m being Nat st (((m = $1 & r1 = ( r | ( Seg m ) )) & t1 = ( t ^ r1 )) & $2 = ( ( tree_of_subformulae F ) . t1 )))));
A7: (for k being Nat holds (k in ( Seg ( len r ) ) implies (ex x st P[ k,x ])))
proof
let k being Nat;
assume that
A8: k in ( Seg ( len r ) );
( r | ( Seg k ) ) is FinSequence by FINSEQ_1:15;
then consider r1 being FinSequence such that A9: r1 = ( r | ( Seg k ) );
r1 is_a_prefix_of r by A8,A9,TREES_1:def 1;
then ( t ^ r1 ) in ( dom ( tree_of_subformulae F ) ) by A4,FINSEQ_6:13,TREES_1:20;
then consider t1 being (Element of ( dom ( tree_of_subformulae F ) )) such that A10: t1 = ( t ^ r1 );
(ex x st x = ( ( tree_of_subformulae F ) . t1 ));
hence thesis by A9,A10;
end;
(ex L being FinSequence st (( dom L ) = ( Seg ( len r ) ) & (for k being Nat holds (k in ( Seg ( len r ) ) implies P[ k,( L . k ) ])))) from FINSEQ_1:sch 1(A7);
then consider L being FinSequence such that ( dom L ) = ( Seg ( len r ) ) and A11: (for k being Nat holds (k in ( Seg ( len r ) ) implies (ex t1 being (Element of ( dom ( tree_of_subformulae F ) )) st (ex r1 being FinSequence st (ex m being Nat st (((m = k & r1 = ( r | ( Seg m ) )) & t1 = ( t ^ r1 )) & ( L . k ) = ( ( tree_of_subformulae F ) . t1 )))))));
(for k holds ((1 <= k & k <= ( len r )) implies (ex t1 being (Element of ( dom ( tree_of_subformulae F ) )) st (ex r1 being FinSequence st ((r1 = ( r | ( Seg k ) ) & t1 = ( t ^ r1 )) & ( L . k ) = ( ( tree_of_subformulae F ) . t1 ))))))
proof
let k;
assume (1 <= k & k <= ( len r ));
then k in ( Seg ( len r ) ) by FINSEQ_1:1;
then (ex t1 being (Element of ( dom ( tree_of_subformulae F ) )) st (ex r1 being FinSequence st (ex m being Nat st (((m = k & r1 = ( r | ( Seg m ) )) & t1 = ( t ^ r1 )) & ( L . k ) = ( ( tree_of_subformulae F ) . t1 ))))) by A11;
hence thesis;
end;
then consider t1 being (Element of ( dom ( tree_of_subformulae F ) )),r1 being FinSequence such that A12: r1 = ( r | ( Seg 1 ) ) and A13: t1 = ( t ^ r1 ) and ( L . 1 ) = ( ( tree_of_subformulae F ) . t1 ) by A5;
set H1 = ( ( tree_of_subformulae F ) . t1 );
A14: H1 is_immediate_constituent_of G
proof
(ex m being (Element of ( NAT )) st r1 = <* m *>) by A5,A12,TREES_9:34;
hence thesis by A13,CKB9:1;
end;
r1 is_a_prefix_of r by A12,TREES_1:def 1;
then t1 is_a_prefix_of t9 by A4,A13,FINSEQ_6:13;
then A15: ( len ( @ H ) ) <= ( len ( @ H1 ) ) by CKB1:1,CKB15:1;
assume ( len ( @ H ) ) = ( len ( @ G ) );
hence contradiction by A15,A14,QC_LANG2:51;
end;
( len ( @ H ) ) <= ( len ( @ G ) ) by A2,CKB1:1,CKB15:1;
hence thesis by A3,XXREAL_0:1;
end;
