environ
vocabularies NAT_1,XBOOLE_0,SUBSET_1,FINSEQ_2,TARSKI,UNIALG_1,FUNCT_2,PARTFUN1,RELAT_1,FINSEQ_1,FUNCOP_1,STRUCT_0,CQC_SIM1,FUNCT_1,NUMBERS,CARD_1,ZFMISC_1,SETFAM_1,EQREL_1,BINOP_1,LATTICES,UNIALG_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,NAT_1,STRUCT_0,RELAT_1,FUNCT_1,FINSEQ_1,SETFAM_1,FUNCOP_1,PARTFUN1,FINSEQ_2,LATTICES,BINOP_1,UNIALG_1,MARGREL1,CKB1,CKB2,CKB3,CKB7,CKB8,CKB9,CKB10;
definitions TARSKI,UNIALG_1,XBOOLE_0,SUBSET_1,FUNCOP_1,MARGREL1,CKB3,CKB7,CKB9,CKB10;
theorems TARSKI,FUNCT_1,PARTFUN1,FINSEQ_1,FINSEQ_2,UNIALG_1,ZFMISC_1,SETFAM_1,FUNCOP_1,BINOP_1,LATTICES,FINSEQ_3,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,MARGREL1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB9,CKB10;
schemes FINSEQ_1,BINOP_1,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELSET_1,PARTFUN1,FINSEQ_2,STRUCT_0,LATTICES,UNIALG_1,ORDINAL1,FINSEQ_1,CARD_1,MARGREL1;
constructors SETFAM_1,BINOP_1,DOMAIN_1,FUNCOP_1,LATTICES,UNIALG_1,MARGREL1,FINSEQ_2,RELSET_1,CKB3,CKB7,CKB9,CKB10;
requirements BOOLE,SUBSET;
begin
reserve U0 for Universal_Algebra;
reserve x for set;
reserve y for set;
reserve A for non  empty (Subset of U0);
reserve o for (operation of U0);
reserve x1 for (FinSequence of A);
reserve y1 for (FinSequence of A);
definition
let U0;
let A;
let o;
assume A1: A is_closed_on o;
func o /. A ->  homogeneous  quasi_total non  empty (PartFunc of ( A * ),A) equals 
:Def6: ( o | ( ( arity o ) -tuples_on A ) );
coherence
proof
A2: ( ( arity o ) -tuples_on A ) c= ( ( arity o ) -tuples_on (the carrier of U0) )
proof
let x;
assume x in ( ( arity o ) -tuples_on A );
then x in { s where s is (Element of ( A * )): ( len s ) = ( arity o ) } by FINSEQ_2:def 4;
then consider s being (Element of ( A * )) such that A3: x = s and A4: ( len s ) = ( arity o );
( rng s ) c= A by FINSEQ_1:def 4;
then ( rng s ) c= (the carrier of U0) by XBOOLE_1:1;
then reconsider s as (FinSequence of (the carrier of U0)) by FINSEQ_1:def 4;
reconsider s as (Element of ( (the carrier of U0) * )) by FINSEQ_1:def 11;
x = s by A3;
then x in { s1 where s1 is (Element of ( (the carrier of U0) * )): ( len s1 ) = ( arity o ) } by A4;
hence thesis by FINSEQ_2:def 4;
end;
A5: ( dom ( o | ( ( arity o ) -tuples_on A ) ) ) = ( ( dom o ) /\ ( ( arity o ) -tuples_on A ) ) by RELAT_1:61
.= ( ( ( arity o ) -tuples_on (the carrier of U0) ) /\ ( ( arity o ) -tuples_on A ) ) by MARGREL1:22
.= ( ( arity o ) -tuples_on A ) by A2,XBOOLE_1:28;
A6: ( rng ( o | ( ( arity o ) -tuples_on A ) ) ) c= A
proof
let x;
assume x in ( rng ( o | ( ( arity o ) -tuples_on A ) ) );
then consider y such that A7: y in ( dom ( o | ( ( arity o ) -tuples_on A ) ) ) and A8: x = ( ( o | ( ( arity o ) -tuples_on A ) ) . y ) by FUNCT_1:def 3;
y in { s where s is (Element of ( A * )): ( len s ) = ( arity o ) } by A5,A7,FINSEQ_2:def 4;
then consider s being (Element of ( A * )) such that A9: y = s and A10: ( len s ) = ( arity o );
( ( o | ( ( arity o ) -tuples_on A ) ) . s ) = ( o . s ) by A7,A9,FUNCT_1:47;
hence thesis by A1,A8,A9,A10,CKB9:def 1;
end;
( ( arity o ) -tuples_on A ) in { ( i -tuples_on A ) where i is (Element of ( NAT )): (not contradiction) };
then ( ( arity o ) -tuples_on A ) c= ( union { ( i -tuples_on A ) where i is (Element of ( NAT )): (not contradiction) } ) by ZFMISC_1:74;
then ( dom ( o | ( ( arity o ) -tuples_on A ) ) ) c= ( A * ) by A5,FINSEQ_2:108;
then reconsider oa = ( o | ( ( arity o ) -tuples_on A ) ) as (PartFunc of ( A * ),A) by A6,RELSET_1:4;
A11: oa is  homogeneous
proof
let x1 being FinSequence;
let y1 being FinSequence;
assume that
A12: x1 in ( dom oa )
and
A13: y1 in ( dom oa );
y1 in { s1 where s1 is (Element of ( A * )): ( len s1 ) = ( arity o ) } by A5,A13,FINSEQ_2:def 4;
then A14: (ex s1 being (Element of ( A * )) st (y1 = s1 & ( len s1 ) = ( arity o )));
x1 in { s where s is (Element of ( A * )): ( len s ) = ( arity o ) } by A5,A12,FINSEQ_2:def 4;
then (ex s being (Element of ( A * )) st (x1 = s & ( len s ) = ( arity o )));
hence thesis by A14;
end;
oa is  quasi_total
proof
let x1;
let y1;
assume that
A15: ( len x1 ) = ( len y1 )
and
A16: x1 in ( dom oa );
x1 in { s where s is (Element of ( A * )): ( len s ) = ( arity o ) } by A5,A16,FINSEQ_2:def 4;
then (ex s being (Element of ( A * )) st (x1 = s & ( len s ) = ( arity o )));
then y1 is (Element of ( ( arity o ) -tuples_on A )) by A15,FINSEQ_2:92;
hence thesis by A5;
end;
hence thesis by A5,A11,RELAT_1:38;
end;
end;
