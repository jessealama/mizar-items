environ
vocabularies BHSP_1,RLSUB_1,ARYTM_3,STRUCT_0,RLVECT_1,SUBSET_1,TARSKI,SUPINF_2,XBOOLE_0,ARYTM_1,RLSUB_2,ZFMISC_1,FUNCT_1,RELAT_1,REAL_1,CARD_1,FINSEQ_4,MCART_1,BINOP_1,LATTICES,EQREL_1,PBOOLE;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,STRUCT_0,FUNCT_1,NUMBERS,BINOP_1,LATTICES,RELSET_1,REAL_1,DOMAIN_1,RLVECT_1,RLSUB_1,BHSP_1,RUSUB_1,CKB1,CKB2,CKB46,CKB49,CKB53;
definitions TARSKI,XBOOLE_0,RLVECT_1,CKB1,CKB2,CKB46,CKB49,CKB53;
theorems RLVECT_1,FUNCT_1,TARSKI,ZFMISC_1,XBOOLE_0,RELAT_1,RLSUB_1,XBOOLE_1,RUSUB_1,RLSUB_2,MCART_1,BINOP_1,LATTICES,XCMPLX_0,ORDERS_1,STRUCT_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66;
schemes XBOOLE_0,FUNCT_1,RELSET_1,ORDERS_1,BINOP_1,CLASSES1;
registrations SUBSET_1,RELSET_1,MEMBERED,STRUCT_0,LATTICES,BHSP_1,RUSUB_1,RELAT_1,CKB47,CKB54;
constructors BINOP_1,REAL_1,MEMBERED,REALSET1,LATTICES,RLSUB_1,RUSUB_1,CKB1,CKB2,CKB46,CKB49,CKB53;
requirements NUMERALS,SUBSET,BOOLE;
begin
theorem
Th43: (for V being RealUnitarySpace holds (for W1,W2 being (Subspace of V) holds (V is_the_direct_sum_of W1,W2 iff (for C1 being (Coset of W1) holds (for C2 being (Coset of W2) holds (ex v being (VECTOR of V) st ( C1 /\ C2 ) = { v }))))))
proof
let V being RealUnitarySpace;
let W1 being (Subspace of V),W2 being (Subspace of V);
set VW1 = (the carrier of W1);
set VW2 = (the carrier of W2);
( 0. V ) in W2 by RUSUB_1:11;
then A1: ( 0. V ) in VW2 by STRUCT_0:def 5;
thus (V is_the_direct_sum_of W1,W2 implies (for C1 being (Coset of W1) holds (for C2 being (Coset of W2) holds (ex v being (VECTOR of V) st ( C1 /\ C2 ) = { v }))))
proof
assume A2: V is_the_direct_sum_of W1,W2;
then A3: ( the UNITSTR of V ) = ( W1 + W2 ) by CKB49:def 1;
let C1 being (Coset of W1);
let C2 being (Coset of W2);
consider v1 being (VECTOR of V) such that A4: C1 = ( v1 + W1 ) by RUSUB_1:def 5;
v1 in ( the UNITSTR of V ) by RLVECT_1:1;
then consider v11 being (VECTOR of V),v12 being (VECTOR of V) such that A5: v11 in W1 and A6: v12 in W2 and A7: v1 = ( v11 + v12 ) by A3,CKB3:1;
consider v2 being (VECTOR of V) such that A8: C2 = ( v2 + W2 ) by RUSUB_1:def 5;
v2 in ( the UNITSTR of V ) by RLVECT_1:1;
then consider v21 being (VECTOR of V),v22 being (VECTOR of V) such that A9: v21 in W1 and A10: v22 in W2 and A11: v2 = ( v21 + v22 ) by A3,CKB3:1;
take v = ( v12 + v21 );
{ v } = ( C1 /\ C2 )
proof
thus A12: { v } c= ( C1 /\ C2 )
proof
let x being set;
assume x in { v };
then A13: x = v by TARSKI:def 1;
v21 = ( v2 - v22 ) by A11,RLSUB_2:61;
then v21 in C2 by A8,A10,RUSUB_1:58;
then C2 = ( v21 + W2 ) by RUSUB_1:72;
then A14: x in C2 by A6,A13,RUSUB_1:57;
v12 = ( v1 - v11 ) by A7,RLSUB_2:61;
then v12 in C1 by A4,A5,RUSUB_1:58;
then C1 = ( v12 + W1 ) by RUSUB_1:72;
then x in C1 by A9,A13,RUSUB_1:57;
hence thesis by A14,XBOOLE_0:def 4;
end;

let x being set;
assume A15: x in ( C1 /\ C2 );
then C1 meets C2 by XBOOLE_0:4;
then reconsider C = ( C1 /\ C2 ) as (Coset of ( W1 /\ W2 )) by CKB65:1;
A16: v in { v } by TARSKI:def 1;
( W1 /\ W2 ) = ( (0). V ) by A2,CKB49:def 1;
then (ex u being (VECTOR of V) st C = { u }) by RUSUB_1:67;
hence thesis by A12,A15,A16,TARSKI:def 1;
end;
hence thesis;
end;

assume A17: (for C1 being (Coset of W1) holds (for C2 being (Coset of W2) holds (ex v being (VECTOR of V) st ( C1 /\ C2 ) = { v })));
A18: VW2 is (Coset of W2) by RUSUB_1:68;
now
let u being (VECTOR of V);
consider C1 being (Coset of W1) such that A19: u in C1 by CKB66:1;
consider v being (VECTOR of V) such that A20: ( C1 /\ VW2 ) = { v } by A18,A17;
A21: v in { v } by TARSKI:def 1;
then v in C1 by A20,XBOOLE_0:def 4;
then consider v1 being (VECTOR of V) such that A22: v1 in W1 and A23: ( u - v1 ) = v by A19,RUSUB_1:74;
v in VW2 by A20,A21,XBOOLE_0:def 4;
then A24: v in W2 by STRUCT_0:def 5;
u = ( v1 + v ) by A23,RLSUB_2:61;
hence u in ( W1 + W2 ) by A24,A22,CKB3:1;
end;
hence ( the UNITSTR of V ) = ( W1 + W2 ) by CKB50:1;
VW1 is (Coset of W1) by RUSUB_1:68;
then consider v being (VECTOR of V) such that A25: ( VW1 /\ VW2 ) = { v } by A18,A17;
( 0. V ) in W1 by RUSUB_1:11;
then ( 0. V ) in VW1 by STRUCT_0:def 5;
then A26: ( 0. V ) in { v } by A25,A1,XBOOLE_0:def 4;
(the carrier of ( (0). V )) = { ( 0. V ) } by RUSUB_1:def 2
.= ( VW1 /\ VW2 ) by A25,A26,TARSKI:def 1
.= (the carrier of ( W1 /\ W2 )) by CKB2:def 1;
hence thesis by RUSUB_1:24;
end;
