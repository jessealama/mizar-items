environ
vocabularies BHSP_1,RLSUB_1,ARYTM_3,STRUCT_0,RLVECT_1,SUBSET_1,TARSKI,SUPINF_2,XBOOLE_0,ARYTM_1,RLSUB_2,ZFMISC_1,FUNCT_1,RELAT_1,REAL_1,CARD_1,FINSEQ_4,MCART_1,BINOP_1,LATTICES,EQREL_1,PBOOLE;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,STRUCT_0,FUNCT_1,NUMBERS,BINOP_1,LATTICES,RELSET_1,REAL_1,DOMAIN_1,RLVECT_1,RLSUB_1,BHSP_1,RUSUB_1,CKB1,CKB2,CKB46,CKB49;
definitions TARSKI,XBOOLE_0,RLVECT_1,CKB1,CKB2,CKB46,CKB49;
theorems RLVECT_1,FUNCT_1,TARSKI,ZFMISC_1,XBOOLE_0,RELAT_1,RLSUB_1,XBOOLE_1,RUSUB_1,RLSUB_2,MCART_1,BINOP_1,LATTICES,XCMPLX_0,ORDERS_1,STRUCT_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB48,CKB49,CKB50,CKB51;
schemes XBOOLE_0,FUNCT_1,RELSET_1,ORDERS_1,BINOP_1,CLASSES1;
registrations SUBSET_1,RELSET_1,MEMBERED,STRUCT_0,LATTICES,BHSP_1,RUSUB_1,RELAT_1,CKB47;
constructors BINOP_1,REAL_1,MEMBERED,REALSET1,LATTICES,RLSUB_1,RUSUB_1,CKB1,CKB2,CKB46,CKB49;
requirements NUMERALS,SUBSET,BOOLE;
begin
theorem
Lm14: (for V being RealUnitarySpace holds (for W being (Subspace of V) holds (ex C being  strict (Subspace of V) st V is_the_direct_sum_of C,W)))
proof
let V being RealUnitarySpace;
let W being (Subspace of V);
defpred P[ set ]
 means
(ex W1 being  strict (Subspace of V) st ($1 = W1 & ( W /\ W1 ) = ( (0). V )));
consider X being set such that A1: (for x being set holds (x in X iff (x in ( Subspaces V ) & P[ x ]))) from XBOOLE_0:sch 1;
(( W /\ ( (0). V ) ) = ( (0). V ) & ( (0). V ) in ( Subspaces V )) by CKB46:def 1,CKB24:1;
then reconsider X as non empty set by A1;
defpred P[ set,set ]
 means
(ex W1,W2 being  strict (Subspace of V) st (($1 = W1 & $2 = W2) & W1 is (Subspace of W2)));
consider R being (Relation of X) such that A2: (for x,y being (Element of X) holds ([ x,y ] in R iff P[ x,y ])) from RELSET_1:sch 2;
defpred Q[ set,set ]
 means
[ $1,$2 ] in R;
A3:now
let x being (Element of X),y being (Element of X),z being (Element of X);
assume that
A4: Q[ x,y ]
and
A5: Q[ y,z ];
consider W1 being  strict (Subspace of V),W2 being  strict (Subspace of V) such that A6: x = W1 and A7: (y = W2 & W1 is (Subspace of W2)) by A2,A4;
consider W3 being  strict (Subspace of V),W4 being  strict (Subspace of V) such that A8: y = W3 and A9: z = W4 and A10: W3 is (Subspace of W4) by A2,A5;
W1 is  strict  strict (Subspace of W4) by A7,A8,A10,RUSUB_1:21;
hence Q[ x,z ] by A2,A6,A9;
end;
A11: (for Y being set holds ((Y c= X & (for x,y being (Element of X) holds ((x in Y & y in Y) implies (Q[ x,y ] or Q[ y,x ])))) implies (ex y being (Element of X) st (for x being (Element of X) holds (x in Y implies Q[ x,y ])))))
proof
let Y being set;
assume that
A12: Y c= X
and
A13: (for x,y being (Element of X) holds ((x in Y & y in Y) implies ([ x,y ] in R or [ y,x ] in R)));
now
per cases ;
suppose A14: Y = ( {} );

set y = the (Element of X);
take y9 = y;
let x being (Element of X);
assume x in Y;
hence [ x,y9 ] in R by A14;
end;
suppose A15: Y <> ( {} );

defpred P[ set,set ]
 means
(ex W1 being  strict (Subspace of V) st ($1 = W1 & $2 = (the carrier of W1)));
A16: (for x being set holds (x in Y implies (ex y being set st P[ x,y ])))
proof
let x being set;
assume x in Y;
then consider W1 being  strict (Subspace of V) such that A17: x = W1 and ( W /\ W1 ) = ( (0). V ) by A1,A12;
reconsider y = (the carrier of W1) as set;
take y;
take W1;
thus thesis by A17;
end;
consider f being Function such that A18: ( dom f ) = Y and A19: (for x being set holds (x in Y implies P[ x,( f . x ) ])) from CLASSES1:sch 1(A16);
set Z = ( union ( rng f ) );
A20:now
let x being set;
assume x in Z;
then consider Y9 being set such that A21: x in Y9 and A22: Y9 in ( rng f ) by TARSKI:def 4;
consider y being set such that A23: y in ( dom f ) and A24: ( f . y ) = Y9 by A22,FUNCT_1:def 3;
consider W1 being  strict (Subspace of V) such that y = W1 and A25: ( f . y ) = (the carrier of W1) by A18,A19,A23;
(the carrier of W1) c= (the carrier of V) by RUSUB_1:def 1;
hence x in (the carrier of V) by A21,A24,A25;
end;
set z = the (Element of ( rng f ));
A26: ( rng f ) <> ( {} ) by A15,A18,RELAT_1:42;
then consider z1 being set such that A27: z1 in ( dom f ) and A28: ( f . z1 ) = z by FUNCT_1:def 3;
reconsider Z as (Subset of V) by A20,TARSKI:def 3;
(ex W3 being  strict (Subspace of V) st (z1 = W3 & ( f . z1 ) = (the carrier of W3))) by A18,A19,A27;
then A29: Z <> ( {} ) by A26,A28,ORDERS_1:6;
A30: (for v1,v2 being (VECTOR of V) holds ((v1 in Z & v2 in Z) implies ( v1 + v2 ) in Z))
proof
let v1 being (VECTOR of V),v2 being (VECTOR of V);
assume that
A31: v1 in Z
and
A32: v2 in Z;
consider Y1 being set such that A33: v1 in Y1 and A34: Y1 in ( rng f ) by A31,TARSKI:def 4;
consider y1 being set such that A35: y1 in ( dom f ) and A36: ( f . y1 ) = Y1 by A34,FUNCT_1:def 3;
consider Y2 being set such that A37: v2 in Y2 and A38: Y2 in ( rng f ) by A32,TARSKI:def 4;
consider y2 being set such that A39: y2 in ( dom f ) and A40: ( f . y2 ) = Y2 by A38,FUNCT_1:def 3;
consider W1 being  strict (Subspace of V) such that A41: y1 = W1 and A42: ( f . y1 ) = (the carrier of W1) by A18,A19,A35;
consider W2 being  strict (Subspace of V) such that A43: y2 = W2 and A44: ( f . y2 ) = (the carrier of W2) by A18,A19,A39;
reconsider y1,y2 as (Element of X) by A12,A18,A35,A39;
now
per cases  by A13,A18,A35,A39;
suppose [ y1,y2 ] in R;

then (ex W3,W4 being  strict (Subspace of V) st ((y1 = W3 & y2 = W4) & W3 is (Subspace of W4))) by A2;
then (the carrier of W1) c= (the carrier of W2) by A41,A43,RUSUB_1:def 1;
then A45: v1 in W2 by A33,A36,A42,STRUCT_0:def 5;
v2 in W2 by A37,A40,A44,STRUCT_0:def 5;
then ( v1 + v2 ) in W2 by A45,RUSUB_1:14;
then A46: ( v1 + v2 ) in (the carrier of W2) by STRUCT_0:def 5;
( f . y2 ) in ( rng f ) by A39,FUNCT_1:def 3;
hence thesis by A44,A46,TARSKI:def 4;
end;
suppose [ y2,y1 ] in R;

then (ex W3,W4 being  strict (Subspace of V) st ((y2 = W3 & y1 = W4) & W3 is (Subspace of W4))) by A2;
then (the carrier of W2) c= (the carrier of W1) by A41,A43,RUSUB_1:def 1;
then A47: v2 in W1 by A37,A40,A44,STRUCT_0:def 5;
v1 in W1 by A33,A36,A42,STRUCT_0:def 5;
then ( v1 + v2 ) in W1 by A47,RUSUB_1:14;
then A48: ( v1 + v2 ) in (the carrier of W1) by STRUCT_0:def 5;
( f . y1 ) in ( rng f ) by A35,FUNCT_1:def 3;
hence thesis by A42,A48,TARSKI:def 4;
end;
end;
hence thesis;
end;
(for a being Real holds (for v1 being (VECTOR of V) holds (v1 in Z implies ( a * v1 ) in Z)))
proof
let a being Real;
let v1 being (VECTOR of V);
assume v1 in Z;
then consider Y1 being set such that A49: v1 in Y1 and A50: Y1 in ( rng f ) by TARSKI:def 4;
consider y1 being set such that A51: y1 in ( dom f ) and A52: ( f . y1 ) = Y1 by A50,FUNCT_1:def 3;
consider W1 being  strict (Subspace of V) such that y1 = W1 and A53: ( f . y1 ) = (the carrier of W1) by A18,A19,A51;
v1 in W1 by A49,A52,A53,STRUCT_0:def 5;
then ( a * v1 ) in W1 by RUSUB_1:15;
then A54: ( a * v1 ) in (the carrier of W1) by STRUCT_0:def 5;
( f . y1 ) in ( rng f ) by A51,FUNCT_1:def 3;
hence thesis by A53,A54,TARSKI:def 4;
end;
then Z is  linearly-closed by A30,RLSUB_1:def 1;
then consider E being  strict (Subspace of V) such that A55: Z = (the carrier of E) by A29,RUSUB_1:29;
now
let u being (VECTOR of V);
thus (u in ( W /\ E ) implies u in ( (0). V ))
proof
assume A56: u in ( W /\ E );
then A57: u in W by CKB5:1;
u in E by A56,CKB5:1;
then u in Z by A55,STRUCT_0:def 5;
then consider Y1 being set such that A58: u in Y1 and A59: Y1 in ( rng f ) by TARSKI:def 4;
consider y1 being set such that A60: y1 in ( dom f ) and A61: ( f . y1 ) = Y1 by A59,FUNCT_1:def 3;
A62: (ex W2 being  strict (Subspace of V) st (y1 = W2 & ( W /\ W2 ) = ( (0). V ))) by A1,A12,A18,A60;
consider W1 being  strict (Subspace of V) such that A63: y1 = W1 and A64: ( f . y1 ) = (the carrier of W1) by A18,A19,A60;
u in W1 by A58,A61,A64,STRUCT_0:def 5;
hence thesis by A63,A57,A62,CKB5:1;
end;

assume u in ( (0). V );
then u in (the carrier of ( (0). V )) by STRUCT_0:def 5;
then u in { ( 0. V ) } by RUSUB_1:def 2;
then u = ( 0. V ) by TARSKI:def 1;
hence u in ( W /\ E ) by RUSUB_1:11;
end;
then A65: ( W /\ E ) = ( (0). V ) by RUSUB_1:25;
E in ( Subspaces V ) by CKB46:def 1;
then reconsider y9 = E as (Element of X) by A1,A65;
take y = y9;
let x being (Element of X);
assume A66: x in Y;
then consider W1 being  strict (Subspace of V) such that A67: x = W1 and A68: ( f . x ) = (the carrier of W1) by A19;
now
let u being (VECTOR of V);
assume u in W1;
then A69: u in (the carrier of W1) by STRUCT_0:def 5;
(the carrier of W1) in ( rng f ) by A18,A66,A68,FUNCT_1:def 3;
then u in Z by A69,TARSKI:def 4;
hence u in E by A55,STRUCT_0:def 5;
end;
then W1 is  strict  strict (Subspace of E) by RUSUB_1:23;
hence [ x,y ] in R by A2,A67;
end;
end;
hence thesis;
end;
A70:now
let x being (Element of X);
x in ( Subspaces V ) by A1;
hence x is  strict  strict (Subspace of V) by CKB46:def 1;
end;
A71:now
let x being (Element of X);
reconsider W = x as  strict (Subspace of V) by A70;
W is (Subspace of W) by RUSUB_1:19;
hence Q[ x,x ] by A2;
end;
A72:now
let x being (Element of X),y being (Element of X);
assume (Q[ x,y ] & Q[ y,x ]);
then ((ex W1,W2 being  strict (Subspace of V) st ((x = W1 & y = W2) & W1 is (Subspace of W2))) & (ex W3,W4 being  strict (Subspace of V) st ((y = W3 & x = W4) & W3 is (Subspace of W4)))) by A2;
hence x = y by RUSUB_1:20;
end;
consider x being (Element of X) such that A73: (for y being (Element of X) holds (x <> y implies (not Q[ x,y ]))) from ORDERS_1:sch 1(A71,A72,A3,A11);
consider L being  strict (Subspace of V) such that A74: x = L and A75: ( W /\ L ) = ( (0). V ) by A1;
take L;
thus ( the UNITSTR of V ) = ( L + W )
proof
assume (not thesis);
then consider v being (VECTOR of V) such that A76: (for v1,v2 being (VECTOR of V) holds (((not v1 in L) or (not v2 in W)) or v <> ( v1 + v2 ))) by CKB51:1;
(v = ( ( 0. V ) + v ) & ( 0. V ) in W) by RLVECT_1:4,RUSUB_1:11;
then A77: (not v in L) by A76;
set A = { ( a * v ) where a is Real: (not contradiction) };
A78: ( 1 * v ) in A;
now
let x being set;
assume x in A;
then (ex a being Real st x = ( a * v ));
hence x in (the carrier of V);
end;
then reconsider A as (Subset of V) by TARSKI:def 3;
A79: (for v1,v2 being (VECTOR of V) holds ((v1 in A & v2 in A) implies ( v1 + v2 ) in A))
proof
let v1 being (VECTOR of V),v2 being (VECTOR of V);
assume v1 in A;
then consider a1 being Real such that A80: v1 = ( a1 * v );
assume v2 in A;
then consider a2 being Real such that A81: v2 = ( a2 * v );
( v1 + v2 ) = ( ( a1 + a2 ) * v ) by A80,A81,RLVECT_1:def 6;
hence thesis;
end;
(for a being Real holds (for v1 being (VECTOR of V) holds (v1 in A implies ( a * v1 ) in A)))
proof
let a being Real;
let v1 being (VECTOR of V);
assume v1 in A;
then consider a1 being Real such that A82: v1 = ( a1 * v );
( a * v1 ) = ( ( a * a1 ) * v ) by A82,RLVECT_1:def 7;
hence thesis;
end;
then A is  linearly-closed by A79,RLSUB_1:def 1;
then consider Z being  strict (Subspace of V) such that A83: (the carrier of Z) = A by A78,RUSUB_1:29;
A84: (not v in ( L + W )) by A76,CKB3:1;
now
let u being (VECTOR of V);
thus (u in ( Z /\ ( W + L ) ) implies u in ( (0). V ))
proof
assume A85: u in ( Z /\ ( W + L ) );
then u in Z by CKB5:1;
then u in A by A83,STRUCT_0:def 5;
then consider a being Real such that A86: u = ( a * v );
now
u in ( W + L ) by A85,CKB5:1;
then ( ( a " ) * ( a * v ) ) in ( W + L ) by A86,RUSUB_1:15;
then A87: ( ( ( a " ) * a ) * v ) in ( W + L ) by RLVECT_1:def 7;
assume a <> ( 0 );
then ( 1 * v ) in ( W + L ) by A87,XCMPLX_0:def 7;
then ( 1 * v ) in ( L + W ) by CKB6:1;
hence contradiction by A84,RLVECT_1:def 8;
end;
then u = ( 0. V ) by A86,RLVECT_1:10;
hence thesis by RUSUB_1:11;
end;

assume u in ( (0). V );
then u in (the carrier of ( (0). V )) by STRUCT_0:def 5;
then u in { ( 0. V ) } by RUSUB_1:def 2;
then u = ( 0. V ) by TARSKI:def 1;
hence u in ( Z /\ ( W + L ) ) by RUSUB_1:11;
end;
then A88: ( Z /\ ( W + L ) ) = ( (0). V ) by RUSUB_1:25;
now
let u being (VECTOR of V);
thus (u in ( ( Z + L ) /\ W ) implies u in ( (0). V ))
proof
assume A89: u in ( ( Z + L ) /\ W );
then u in ( Z + L ) by CKB5:1;
then consider v1 being (VECTOR of V),v2 being (VECTOR of V) such that A90: v1 in Z and A91: v2 in L and A92: u = ( v1 + v2 ) by CKB3:1;
A93: u in W by A89,CKB5:1;
then A94: u in ( W + L ) by CKB4:1;
(v1 = ( u - v2 ) & v2 in ( W + L )) by A91,A92,CKB4:1,RLSUB_2:61;
then v1 in ( W + L ) by A94,RUSUB_1:17;
then v1 in ( Z /\ ( W + L ) ) by A90,CKB5:1;
then v1 in (the carrier of ( (0). V )) by A88,STRUCT_0:def 5;
then v1 in { ( 0. V ) } by RUSUB_1:def 2;
then v1 = ( 0. V ) by TARSKI:def 1;
then v2 = u by A92,RLVECT_1:4;
hence thesis by A75,A91,A93,CKB5:1;
end;

assume u in ( (0). V );
then u in (the carrier of ( (0). V )) by STRUCT_0:def 5;
then u in { ( 0. V ) } by RUSUB_1:def 2;
then u = ( 0. V ) by TARSKI:def 1;
hence u in ( ( Z + L ) /\ W ) by RUSUB_1:11;
end;
then ( ( Z + L ) /\ W ) = ( (0). V ) by RUSUB_1:25;
then A95: ( W /\ ( Z + L ) ) = ( (0). V ) by CKB19:1;
( Z + L ) in ( Subspaces V ) by CKB46:def 1;
then reconsider x1 = ( Z + L ) as (Element of X) by A1,A95;
L is (Subspace of ( Z + L )) by CKB12:1;
then A96: [ x,x1 ] in R by A2,A74;
v in A by A78,RLVECT_1:def 8;
then v in Z by A83,STRUCT_0:def 5;
then ( Z + L ) <> L by A77,CKB4:1;
hence contradiction by A73,A74,A96;
end;

thus thesis by A75,CKB19:1;
end;
