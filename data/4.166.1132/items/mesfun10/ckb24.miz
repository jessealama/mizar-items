environ
vocabularies NUMBERS,XBOOLE_0,MESFUNC8,SEQFUNC,MESFUNC5,SUBSET_1,SUPINF_1,NAT_1,FUNCT_1,XXREAL_0,ORDINAL2,RELAT_1,ORDINAL1,XXREAL_2,RINFSUP1,ARYTM_3,PBOOLE,PARTFUN1,PROB_1,MEASURE1,CARD_1,SUPINF_2,MESFUNC1,VALUED_0,SEQ_2,ARYTM_1,TARSKI,REAL_1,INTEGRA5,VALUED_1,COMPLEX1,MEASURE6,RFUNCT_3,XREAL_0,MESFUNC2,MESFUN10;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,REAL_1,XXREAL_0,XXREAL_2,RELAT_1,FUNCT_1,RELSET_1,DOMAIN_1,NAT_1,VALUED_0,FUNCT_2,PARTFUN1,PROB_1,SUPINF_1,SUPINF_2,MEASURE1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,SEQFUNC,MESFUNC5,MESFUNC8,RINFSUP2,CKB20,CKB22;
definitions MESFUNC1,MEASURE6,RINFSUP2,XXREAL_3,MEMBER_1,CKB20,CKB22;
theorems TARSKI,PARTFUN1,FUNCT_1,SUPINF_2,EXTREAL1,EXTREAL2,MESFUNC1,XREAL_0,XBOOLE_0,XBOOLE_1,MESFUNC2,XREAL_1,XXREAL_0,MESFUNC5,NAT_1,RELAT_1,FUNCT_2,SEQFUNC,ORDINAL1,MESFUNC8,RINFSUP2,MESFUNC7,MESFUNC9,NUMBERS,XXREAL_2,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23;
schemes FUNCT_2,SEQFUNC,FUNCT_1;
registrations NAT_1,XREAL_0,MEMBERED,ORDINAL1,PARTFUN1,RELAT_1,XBOOLE_0,SUPINF_2,NUMBERS,XXREAL_0,MESFUNC8,RINFSUP2,VALUED_0,MEMBER_1,RELSET_1,FUNCT_2;
constructors REAL_1,DOMAIN_1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,MESFUNC5,RINFSUP2,EXTREAL2,MESFUNC9,SUPINF_1,MESFUNC8,SEQFUNC,RELSET_1,BINOP_2,CKB20,CKB22;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve X for non empty set;
reserve F for  with_the_same_dom (Functional_Sequence of X,( ExtREAL ));
reserve S for (SigmaField of X);
reserve M for (sigma_Measure of S);
reserve E for (Element of S);
reserve f for (PartFunc of X,( ExtREAL ));
theorem
((((( M . E ) < ( +infty ) & E = ( dom ( F . ( 0 ) ) )) & (for n being Nat holds ( F . n ) is_integrable_on M)) & F is_uniformly_convergent_to f) implies (f is_integrable_on M & (ex I being ExtREAL_sequence st (((for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) )) & I is  convergent) & ( lim I ) = ( Integral (M,f) )))))
proof
assume that
A1: ( M . E ) < ( +infty )
and
A2: E = ( dom ( F . ( 0 ) ) )
and
A3: (for n being Nat holds ( F . n ) is_integrable_on M)
and
A4: F is_uniformly_convergent_to f;
consider N being Nat such that A5: (for n being Nat holds (for x being set holds ((n >= N & x in ( dom ( F . ( 0 ) ) )) implies |. ( ( ( F . n ) . x ) - ( f . x ) ) .| < ( 1 / 2 )))) by A4,CKB22:def 1;
reconsider N1 = N as (Element of ( NAT )) by ORDINAL1:def 12;
consider h being (PartFunc of X,( ExtREAL )) such that A6: h is_simple_func_in S and A7: ( dom h ) = E and A8: (for x being set holds (x in E implies ( h . x ) = ( 1. ))) by MESFUNC5:41;
A9: ( max- h ) is_measurable_on E by A6,A7,MESFUNC2:26,MESFUNC2:34;
(for x being set holds (x in E implies ( h . x ) >= ( 0. ))) by A8;
then A10: h is  nonnegative by A7,SUPINF_2:52;
then A11: ( Integral (M,h) ) = ( integral' (M,h) ) by A6,MESFUNC5:89;
set AFN = |. ( F . N ) .|;
A12: ( dom ( F . N ) ) = ( dom AFN ) by MESFUNC1:def 10;
now
let x being set;
assume x in ( dom AFN );
then ( AFN . x ) = |. ( ( F . N ) . x ) .| by MESFUNC1:def 10;
hence ( 0 ) <= ( AFN . x ) by EXTREAL2:3;
end;
then A13: AFN is  nonnegative by SUPINF_2:52;
then A14: ( dom ( AFN + h ) ) = ( ( dom AFN ) /\ ( dom h ) ) by A10,MESFUNC5:22;
A15: (for x being set holds (x in ( dom ( F . ( 0 ) ) ) implies |. ( ( ( F . N ) . x ) - ( f . x ) ) .| < ( 1 / 2 ))) by A5;
A16:now
let x being set;
let n being Nat;
assume that
A17: n >= N
and
A18: x in ( dom ( F . ( 0 ) ) );
A19: |. ( ( ( F . n ) . x ) - ( f . x ) ) .| < ( 1 / 2 ) by A5,A17,A18;
A20: |. ( ( ( F . N ) . x ) - ( f . x ) ) .| < ( 1 / 2 ) by A5,A18;
A21:now
A22: |. ( ( ( F . n ) . x ) - ( f . x ) ) .| < ( 1. ) by A19,XXREAL_0:2;
then A23: ( ( ( F . n ) . x ) - ( f . x ) ) < ( 1. ) by EXTREAL2:10;
A24: |. ( ( ( F . N ) . x ) - ( f . x ) ) .| < ( 1. ) by A20,XXREAL_0:2;
then A25: ( - ( 1. ) ) < ( ( ( F . N ) . x ) - ( f . x ) ) by EXTREAL2:10;
A26: ( ( ( F . N ) . x ) - ( f . x ) ) < ( 1. ) by A24,EXTREAL2:10;
assume A27: (( f . x ) = ( +infty ) or ( f . x ) = ( -infty ));
( - ( 1. ) ) < ( ( ( F . n ) . x ) - ( f . x ) ) by A22,EXTREAL2:10;
then ((( ( F . n ) . x ) = ( +infty ) & ( ( F . N ) . x ) = ( +infty )) or (( ( F . n ) . x ) = ( -infty ) & ( ( F . N ) . x ) = ( -infty ))) by A27,A25,A23,A26,XXREAL_3:53,XXREAL_3:54;
hence |. ( ( F . n ) . x ) .| <= ( |. ( ( F . N ) . x ) .| + ( 1. ) ) by EXTREAL2:19,XXREAL_3:52;
end;
( dom ( AFN + h ) ) = ( ( dom AFN ) /\ ( dom h ) ) by A10,A13,MESFUNC5:22;
then ( dom ( AFN + h ) ) = ( E /\ E ) by A2,A7,A12,MESFUNC8:def 2;
then ( ( AFN . x ) + ( h . x ) ) = ( ( AFN + h ) . x ) by A2,A18,MESFUNC1:def 3;
then A28: ( ( AFN . x ) + ( 1. ) ) = ( ( AFN + h ) . x ) by A2,A8,A18;
( dom ( F . n ) ) = E by A2,MESFUNC8:def 2;
then A29: x in ( dom |. ( F . n ) .| ) by A2,A18,MESFUNC1:def 10;
A30:now
A31: ( 0 ) <= |. ( ( ( F . n ) . x ) - ( f . x ) ) .| by EXTREAL2:3;
|. ( ( ( F . n ) . x ) - ( f . x ) ) .| < ( +infty ) by A19,XXREAL_0:2,XXREAL_0:9;
then reconsider a = |. ( ( ( F . n ) . x ) - ( f . x ) ) .| as Real by A31,XXREAL_0:14;
|. ( ( f . x ) - ( ( F . N ) . x ) ) .| < ( 1 / 2 ) by A20,MESFUNC5:1;
then A32: |. ( ( f . x ) - ( ( F . N ) . x ) ) .| < ( +infty ) by XXREAL_0:2,XXREAL_0:9;
( 0 ) <= |. ( ( f . x ) - ( ( F . N ) . x ) ) .| by EXTREAL2:3;
then reconsider b = |. ( ( f . x ) - ( ( F . N ) . x ) ) .| as Real by A32,XXREAL_0:14;
assume A33: ( f . x ) in ( REAL );
A34:now
assume (( ( F . N ) . x ) = ( +infty ) or ( ( F . N ) . x ) = ( -infty ));
then (( ( ( F . N ) . x ) - ( f . x ) ) = ( +infty ) or ( ( ( F . N ) . x ) - ( f . x ) ) = ( -infty )) by A33,XXREAL_3:13,XXREAL_3:14;
then ( 1. ) < |. ( ( ( F . N ) . x ) - ( f . x ) ) .| by EXTREAL2:19,XXREAL_0:9;
hence contradiction by A15,A18,XXREAL_0:2;
end;
A35:now
assume (( ( F . n ) . x ) = ( +infty ) or ( ( F . n ) . x ) = ( -infty ));
then (( ( ( F . n ) . x ) - ( f . x ) ) = ( +infty ) or ( ( ( F . n ) . x ) - ( f . x ) ) = ( -infty )) by A33,XXREAL_3:13,XXREAL_3:14;
hence contradiction by A19,EXTREAL2:19,XXREAL_0:9;
end;
then ( ( F . n ) . x ) in ( REAL ) by XXREAL_0:14;
then A36: ( |. ( ( F . n ) . x ) .| - |. ( ( F . N ) . x ) .| ) <= |. ( ( ( F . n ) . x ) - ( ( F . N ) . x ) ) .| by EXTREAL2:20;
b <= ( 1 / 2 ) by A20,MESFUNC5:1;
then ( a + b ) < ( ( 1 / 2 ) + ( 1 / 2 ) ) by A19,XREAL_1:8;
then A37: ( |. ( ( ( F . n ) . x ) - ( f . x ) ) .| + |. ( ( f . x ) - ( ( F . N ) . x ) ) .| ) < 1 by SUPINF_2:1;
( ( - ( f . x ) ) + ( f . x ) ) = ( 0. ) by XXREAL_3:7;
then ( ( ( F . n ) . x ) - ( ( F . N ) . x ) ) = ( ( ( ( F . n ) . x ) + ( ( - ( f . x ) ) + ( f . x ) ) ) - ( ( F . N ) . x ) ) by XXREAL_3:4;
then ( ( ( F . n ) . x ) - ( ( F . N ) . x ) ) = ( ( ( ( ( F . n ) . x ) + ( - ( f . x ) ) ) + ( f . x ) ) - ( ( F . N ) . x ) ) by A33,A35,XXREAL_3:29;
then ( ( ( F . n ) . x ) - ( ( F . N ) . x ) ) = ( ( ( ( F . n ) . x ) - ( f . x ) ) + ( ( f . x ) - ( ( F . N ) . x ) ) ) by A33,A34,XXREAL_3:30;
then |. ( ( ( F . n ) . x ) - ( ( F . N ) . x ) ) .| <= ( |. ( ( ( F . n ) . x ) - ( f . x ) ) .| + |. ( ( f . x ) - ( ( F . N ) . x ) ) .| ) by EXTREAL2:13;
then |. ( ( ( F . n ) . x ) - ( ( F . N ) . x ) ) .| < 1 by A37,XXREAL_0:2;
then ( |. ( ( F . n ) . x ) .| - |. ( ( F . N ) . x ) .| ) <= ( 1. ) by A36,XXREAL_0:2;
hence |. ( ( F . n ) . x ) .| <= ( |. ( ( F . N ) . x ) .| + ( 1. ) ) by XXREAL_3:52;
end;
x in ( dom AFN ) by A12,A18,MESFUNC8:def 2;
then |. ( ( F . n ) . x ) .| <= ( ( AFN . x ) + ( 1. ) ) by A30,A21,MESFUNC1:def 10,XXREAL_0:14;
hence ( |. ( F . n ) .| . x ) <= ( ( AFN + h ) . x ) by A28,A29,MESFUNC1:def 10;
end;
A38: (for x being (Element of X) holds (for n being Nat holds (x in E implies ( |. ( ( F ^\ N1 ) . n ) .| . x ) <= ( ( AFN + h ) . x ))))
proof
let x being (Element of X);
let n being Nat;
A39: ( ( F ^\ N1 ) . n ) = ( F . ( n + N ) ) by NAT_1:def 3;
assume x in E;
hence thesis by A2,A16,A39,NAT_1:11;
end;
A40: ( max+ h ) is_measurable_on E by A6,MESFUNC2:25,MESFUNC2:34;
(for x being set holds (x in ( dom ( max- h ) ) implies ( 0. ) <= ( ( max- h ) . x ))) by MESFUNC2:13;
then A41: ( max- h ) is  nonnegative by SUPINF_2:52;
A42: (for n being Nat holds ( F . n ) is_measurable_on E)
proof
let n being Nat;
( F . n ) is_integrable_on M by A3;
then (ex A being (Element of S) st (A = ( dom ( F . n ) ) & ( F . n ) is_measurable_on A)) by MESFUNC5:def 17;
hence thesis by A2,MESFUNC8:def 2;
end;
then A43: ( F . N ) is_measurable_on E;
( ( F ^\ N1 ) . ( 0 ) ) = ( F . ( ( 0 ) + N ) ) by NAT_1:def 3;
then A44: ( dom ( ( F ^\ N1 ) . ( 0 ) ) ) = E by A2,MESFUNC8:def 2;
A45:now
let x being (Element of X);
assume x in ( dom f );
then A46: x in ( dom ( F . ( 0 ) ) ) by A4,CKB22:def 1;
then A47: x in ( dom ( lim F ) ) by MESFUNC8:def 9;
( lim ( F # x ) ) = ( f . x ) by A4,A46,CKB23:1;
hence ( ( lim F ) . x ) = ( f . x ) by A47,MESFUNC8:def 9;
end;
( dom f ) = ( dom ( F . ( 0 ) ) ) by A4,CKB22:def 1;
then ( dom ( lim F ) ) = ( dom f ) by MESFUNC8:def 9;
then A48: ( lim F ) = f by A45,PARTFUN1:5;
A49: ( F . N ) is_integrable_on M by A3;
E = ( dom ( F . N ) ) by A2,MESFUNC8:def 2;
then A50: AFN is_integrable_on M by A49,A43,MESFUNC5:100;
deffunc I((Element of ( NAT ))) = ( Integral (M,( F . $1 )) );
A51: ( ( R_EAL 1 ) * ( +infty ) ) = ( +infty ) by XXREAL_3:def 5;
A52:now
let x being (Element of X);
assume x in ( dom h );
then A53: x in ( dom |. h .| ) by MESFUNC1:def 10;
( 0 ) <= ( h . x ) by A10,SUPINF_2:51;
then |. ( h . x ) .| = ( h . x ) by EXTREAL1:def 1;
hence ( |. h .| . x ) = ( h . x ) by A53,MESFUNC1:def 10;
end;
( dom h ) = ( dom |. h .| ) by MESFUNC1:def 10;
then A54: h = |. h .| by A52,PARTFUN1:5;
( Integral (M,h) ) = ( integral+ (M,h) ) by A6,A10,MESFUNC5:89;
then ( integral+ (M,h) ) = ( ( R_EAL 1 ) * ( M . ( dom h ) ) ) by A7,A8,A11,MESFUNC5:104;
then A55: ( integral+ (M,|. h .|) ) < ( +infty ) by A1,A7,A54,A51,XXREAL_3:72;
A56: (for n being Nat holds ( ( F ^\ N1 ) . n ) is_measurable_on E)
proof
let n being Nat;
( ( F ^\ N1 ) . n ) = ( F . ( n + N ) ) by NAT_1:def 3;
hence thesis by A42;
end;
A57: (for x being (Element of X) holds (x in E implies (( ( F ^\ N1 ) # x ) is  convergent & ( lim ( F # x ) ) = ( lim ( ( F ^\ N1 ) # x ) ))))
proof
let x being (Element of X);
A58:now
let n being (Element of ( NAT ));
( ( ( F ^\ N1 ) # x ) . n ) = ( ( ( F ^\ N1 ) . n ) . x ) by MESFUNC5:def 13;
then ( ( ( F ^\ N1 ) # x ) . n ) = ( ( F . ( n + N ) ) . x ) by NAT_1:def 3;
then ( ( ( F ^\ N1 ) # x ) . n ) = ( ( F # x ) . ( n + N ) ) by MESFUNC5:def 13;
hence ( ( ( F ^\ N1 ) # x ) . n ) = ( ( ( F # x ) ^\ N1 ) . n ) by NAT_1:def 3;
end;
assume x in E;
then A59: ( F # x ) is  convergent by A2,A4,CKB23:1;
then ( ( F # x ) ^\ N1 ) is  convergent by RINFSUP2:21;
hence ( ( F ^\ N1 ) # x ) is  convergent by A58,FUNCT_2:63;
( lim ( F # x ) ) = ( lim ( ( F # x ) ^\ N1 ) ) by A59,RINFSUP2:21;
hence thesis by A58,FUNCT_2:63;
end;
then (for x being (Element of X) holds (x in E implies ( ( F ^\ N1 ) # x ) is  convergent));
then A60: ( lim ( F ^\ N1 ) ) is_measurable_on E by A56,A44,MESFUNC8:25;
( dom ( lim ( F ^\ N1 ) ) ) = E by A44,MESFUNC8:def 9;
then A61: ( dom ( lim F ) ) = ( dom ( lim ( F ^\ N1 ) ) ) by A2,MESFUNC8:def 9;
A62:now
let x being (Element of X);
assume A63: x in ( dom ( lim F ) );
then x in E by A2,MESFUNC8:def 9;
then A64: ( lim ( F # x ) ) = ( lim ( ( F ^\ N1 ) # x ) ) by A57;
( lim ( ( F ^\ N1 ) # x ) ) = ( ( lim ( F ^\ N1 ) ) . x ) by A61,A63,MESFUNC8:def 9;
hence ( ( lim F ) . x ) = ( ( lim ( F ^\ N1 ) ) . x ) by A63,A64,MESFUNC8:def 9;
end;
A65: ( dom ( max- h ) ) = ( dom h ) by MESFUNC2:def 3;
then A66: ( ( max- h ) | E ) = ( max- h ) by A7,RELAT_1:68;
A67: ( dom ( max+ h ) ) = ( dom h ) by MESFUNC2:def 2;
then A68: ( ( max+ h ) | E ) = ( max+ h ) by A7,RELAT_1:68;
(for x being set holds (x in ( dom ( max+ h ) ) implies ( 0. ) <= ( ( max+ h ) . x ))) by MESFUNC2:12;
then A69: ( max+ h ) is  nonnegative by SUPINF_2:52;
then ( dom ( ( max+ h ) + ( max- h ) ) ) = ( ( dom ( max+ h ) ) /\ ( dom ( max- h ) ) ) by A41,MESFUNC5:22;
then (ex C being (Element of S) st (C = E & ( integral+ (M,( ( max+ h ) + ( max- h ) )) ) = ( ( integral+ (M,( ( max+ h ) | C )) ) + ( integral+ (M,( ( max- h ) | C )) ) ))) by A7,A40,A9,A69,A41,A67,A65,MESFUNC5:78;
then A70: ( integral+ (M,|. h .|) ) = ( ( integral+ (M,( max+ h )) ) + ( integral+ (M,( max- h )) ) ) by A68,A66,MESFUNC2:24;
A71: h is_measurable_on E by A6,MESFUNC2:34;
then ( 0 ) <= ( integral+ (M,( max- h )) ) by A7,A41,A65,MESFUNC2:26,MESFUNC5:79;
then ( integral+ (M,( max+ h )) ) <> ( +infty ) by A70,A55,XXREAL_3:def 2;
then A72: ( integral+ (M,( max+ h )) ) < ( +infty ) by XXREAL_0:4;
( 0 ) <= ( integral+ (M,( max+ h )) ) by A7,A71,A69,A67,MESFUNC2:25,MESFUNC5:79;
then ( integral+ (M,( max- h )) ) <> ( +infty ) by A70,A55,XXREAL_3:def 2;
then ( integral+ (M,( max- h )) ) < ( +infty ) by XXREAL_0:4;
then h is_integrable_on M by A7,A71,A72,MESFUNC5:def 17;
then A73: ( AFN + h ) is_integrable_on M by A50,MESFUNC5:108;
A74: E = ( dom AFN ) by A2,A12,MESFUNC8:def 2;
then A75: |. ( lim_inf ( F ^\ N1 ) ) .| is_integrable_on M by A7,A73,A14,A38,A56,A44,CKB16:1;
( AFN + h ) is  nonnegative by A10,A13,MESFUNC5:22;
then consider J being ExtREAL_sequence such that A76: (for n being Nat holds ( J . n ) = ( Integral (M,( ( F ^\ N1 ) . n )) )) and ( lim_inf J ) >= ( Integral (M,( lim_inf ( F ^\ N1 ) )) ) and ( lim_sup J ) <= ( Integral (M,( lim_sup ( F ^\ N1 ) )) ) and A77: ((for x being (Element of X) holds (x in E implies ( ( F ^\ N1 ) # x ) is  convergent)) implies (J is  convergent & ( lim J ) = ( Integral (M,( lim ( F ^\ N1 ) )) ))) by A7,A73,A14,A74,A38,A56,A44,CKB18:1;
consider I being (Function of ( NAT ),( ExtREAL )) such that A78: (for n being (Element of ( NAT )) holds ( I . n ) = I(n)) from FUNCT_2:sch 4;
reconsider I as ExtREAL_sequence;
A79: ( dom ( lim_inf ( F ^\ N1 ) ) ) = ( dom ( ( F ^\ N1 ) . ( 0 ) ) ) by MESFUNC8:def 7;
A80:now
let x being (Element of X);
assume A81: x in ( dom ( lim ( F ^\ N1 ) ) );
then x in E by A44,MESFUNC8:def 9;
then ( ( F ^\ N1 ) # x ) is  convergent by A57;
hence ( ( lim ( F ^\ N1 ) ) . x ) = ( ( lim_inf ( F ^\ N1 ) ) . x ) by A81,MESFUNC8:14;
end;
( dom ( lim ( F ^\ N1 ) ) ) = ( dom ( ( F ^\ N1 ) . ( 0 ) ) ) by MESFUNC8:def 9;
then ( lim ( F ^\ N1 ) ) = ( lim_inf ( F ^\ N1 ) ) by A79,A80,PARTFUN1:5;
then A82: ( lim ( F ^\ N1 ) ) is_integrable_on M by A44,A75,A79,A60,MESFUNC5:100;
A83: (for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) ))
proof
let n being Nat;
n is (Element of ( NAT )) by ORDINAL1:def 12;
hence thesis by A78;
end;
now
let n being (Element of ( NAT ));
A84: ( ( F ^\ N1 ) . n ) = ( F . ( n + N ) ) by NAT_1:def 3;
A85: ( ( I ^\ N1 ) . n ) = ( I . ( n + N ) ) by NAT_1:def 3;
( J . n ) = ( Integral (M,( ( F ^\ N1 ) . n )) ) by A76;
hence ( J . n ) = ( ( I ^\ N1 ) . n ) by A78,A84,A85;
end;
then A86: J = ( I ^\ N1 ) by FUNCT_2:63;
then A87: I is  convergent by A57,A77,RINFSUP2:17;
( lim I ) = ( lim J ) by A57,A77,A86,RINFSUP2:17;
then ( lim I ) = ( Integral (M,( lim F )) ) by A57,A61,A62,A77,PARTFUN1:5;
hence thesis by A48,A61,A62,A82,A83,A87,PARTFUN1:5;
end;
