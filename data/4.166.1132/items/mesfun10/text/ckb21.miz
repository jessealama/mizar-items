environ
vocabularies NUMBERS,XBOOLE_0,MESFUNC8,SEQFUNC,MESFUNC5,SUBSET_1,SUPINF_1,NAT_1,FUNCT_1,XXREAL_0,ORDINAL2,RELAT_1,ORDINAL1,XXREAL_2,RINFSUP1,ARYTM_3,PBOOLE,PARTFUN1,PROB_1,MEASURE1,CARD_1,SUPINF_2,MESFUNC1,VALUED_0,SEQ_2,ARYTM_1,TARSKI,REAL_1,INTEGRA5,VALUED_1,COMPLEX1,MEASURE6,RFUNCT_3,XREAL_0,MESFUNC2,MESFUN10;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,REAL_1,XXREAL_0,XXREAL_2,RELAT_1,FUNCT_1,RELSET_1,DOMAIN_1,NAT_1,VALUED_0,FUNCT_2,PARTFUN1,PROB_1,SUPINF_1,SUPINF_2,MEASURE1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,SEQFUNC,MESFUNC5,MESFUNC8,RINFSUP2,CKB20;
definitions MESFUNC1,MEASURE6,RINFSUP2,XXREAL_3,MEMBER_1,CKB20;
theorems TARSKI,PARTFUN1,FUNCT_1,SUPINF_2,EXTREAL1,EXTREAL2,MESFUNC1,XREAL_0,XBOOLE_0,XBOOLE_1,MESFUNC2,XREAL_1,XXREAL_0,MESFUNC5,NAT_1,RELAT_1,FUNCT_2,SEQFUNC,ORDINAL1,MESFUNC8,RINFSUP2,MESFUNC7,MESFUNC9,NUMBERS,XXREAL_2,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
schemes FUNCT_2,SEQFUNC,FUNCT_1;
registrations NAT_1,XREAL_0,MEMBERED,ORDINAL1,PARTFUN1,RELAT_1,XBOOLE_0,SUPINF_2,NUMBERS,XXREAL_0,MESFUNC8,RINFSUP2,VALUED_0,MEMBER_1,RELSET_1,FUNCT_2;
constructors REAL_1,DOMAIN_1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,MESFUNC5,RINFSUP2,EXTREAL2,MESFUNC9,SUPINF_1,MESFUNC8,SEQFUNC,RELSET_1,BINOP_2,CKB20;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve X for non  empty set;
reserve F for  with_the_same_dom (Functional_Sequence of X,( ExtREAL ));
reserve x for (Element of X);
reserve n for Nat;
reserve S for (SigmaField of X);
reserve M for (sigma_Measure of S);
reserve E for (Element of S);
theorem
(((((( M . E ) < ( +infty ) & E = ( dom ( F . ( 0 ) ) )) & (for n being Nat holds ( F . n ) is_measurable_on E)) & F is  uniformly_bounded) & (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent))) implies (((for n being Nat holds ( F . n ) is_integrable_on M) & ( lim F ) is_integrable_on M) & (ex I being ExtREAL_sequence st (((for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) )) & I is  convergent) & ( lim I ) = ( Integral (M,( lim F )) )))))
proof
assume that
A1: ( M . E ) < ( +infty )
and
A2: E = ( dom ( F . ( 0 ) ) )
and
A3: (for n being Nat holds ( F . n ) is_measurable_on E)
and
A4: F is  uniformly_bounded
and
A5: (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent));
consider K1 being  real number such that A6: (for n being Nat holds (for x being set holds (x in ( dom ( F . ( 0 ) ) ) implies |. ( ( F . n ) . x ) .| <= K1))) by A4,CKB20:def 1;
set K = ( max (K1,1) );
K in ( REAL ) by XREAL_0:def 1;
then consider h being (PartFunc of X,( ExtREAL )) such that A7: h is_simple_func_in S and A8: ( dom h ) = E and A9: (for x being set holds (x in E implies ( h . x ) = K)) by MESFUNC5:41,NUMBERS:31;
A10: ( dom h ) = ( dom |. h .| ) by MESFUNC1:def 10;
A11: K > ( 0 ) by XXREAL_0:30;
then A12: ( ( R_EAL K ) * ( +infty ) ) = ( +infty ) by XXREAL_3:def 5;
(for x being set holds (x in E implies ( h . x ) >= ( 0. ))) by A11,A9;
then A13: h is  nonnegative by A8,SUPINF_2:52;
then A14: ( Integral (M,h) ) = ( integral' (M,h) ) by A7,MESFUNC5:89;
K is Real by XREAL_0:def 1;
then A15: ( integral' (M,h) ) = ( ( R_EAL K ) * ( M . ( dom h ) ) ) by A11,A8,A9,MESFUNC5:104;
A16: (for x being (Element of X) holds (x in ( dom h ) implies ( h . x ) = ( |. h .| . x )))
proof
let x being (Element of X);
assume x in ( dom h );
then A17: x in ( dom |. h .| ) by MESFUNC1:def 10;
( 0 ) <= ( h . x ) by A13,SUPINF_2:51;
then |. ( h . x ) .| = ( h . x ) by EXTREAL1:def 1;
hence thesis by A17,MESFUNC1:def 10;
end;
( Integral (M,h) ) = ( integral+ (M,h) ) by A7,A13,MESFUNC5:89;
then ( integral+ (M,h) ) < ( +infty ) by A1,A11,A8,A15,A12,A14,XXREAL_3:72;
then A18: ( integral+ (M,|. h .|) ) < ( +infty ) by A10,A16,PARTFUN1:5;
A19: ( dom ( max+ h ) ) = ( dom h ) by MESFUNC2:def 2;
then A20: ( ( max+ h ) | E ) = ( max+ h ) by A8,RELAT_1:68;
A21: ( max+ h ) is_measurable_on E by A7,MESFUNC2:25,MESFUNC2:34;
(for x being set holds (x in ( dom ( max- h ) ) implies ( 0. ) <= ( ( max- h ) . x ))) by MESFUNC2:13;
then A22: ( max- h ) is  nonnegative by SUPINF_2:52;
A23: K >= K1 by XXREAL_0:25;
A24: (for n being Nat holds (for x being set holds (x in ( dom ( F . ( 0 ) ) ) implies |. ( ( F . n ) . x ) .| <= K)))
proof
let n being Nat;
let x being set;
assume x in ( dom ( F . ( 0 ) ) );
then |. ( ( F . n ) . x ) .| <= K1 by A6;
hence thesis by A23,XXREAL_0:2;
end;
A25: (for x being (Element of X) holds (for n being Nat holds (x in E implies ( |. ( F . n ) .| . x ) <= ( h . x ))))
proof
let x being (Element of X);
let n being Nat;
assume A26: x in E;
( dom ( F . n ) ) = ( dom |. ( F . n ) .| ) by MESFUNC1:def 10;
then x in ( dom |. ( F . n ) .| ) by A2,A26,MESFUNC8:def 2;
then A27: ( |. ( F . n ) .| . x ) = |. ( ( F . n ) . x ) .| by MESFUNC1:def 10;
|. ( ( F . n ) . x ) .| <= K by A2,A24,A26;
hence thesis by A9,A26,A27;
end;
(for x being set holds (x in ( dom ( max+ h ) ) implies ( 0. ) <= ( ( max+ h ) . x ))) by MESFUNC2:12;
then A28: ( max+ h ) is  nonnegative by SUPINF_2:52;
then A29: ( dom ( ( max+ h ) + ( max- h ) ) ) = ( ( dom ( max+ h ) ) /\ ( dom ( max- h ) ) ) by A22,MESFUNC5:22;
A30: ( dom ( max- h ) ) = ( dom h ) by MESFUNC2:def 3;
then A31: ( ( max- h ) | E ) = ( max- h ) by A8,RELAT_1:68;
( max- h ) is_measurable_on E by A7,A8,MESFUNC2:26,MESFUNC2:34;
then (ex C being (Element of S) st (C = ( dom ( ( max+ h ) + ( max- h ) ) ) & ( integral+ (M,( ( max+ h ) + ( max- h ) )) ) = ( ( integral+ (M,( ( max+ h ) | C )) ) + ( integral+ (M,( ( max- h ) | C )) ) ))) by A8,A19,A30,A21,A28,A22,MESFUNC5:78;
then A32: ( ( integral+ (M,( max+ h )) ) + ( integral+ (M,( max- h )) ) ) < ( +infty ) by A8,A19,A30,A29,A20,A31,A18,MESFUNC2:24;
A33: (for x being (Element of X) holds (x in ( dom ( lim F ) ) implies ( ( lim F ) . x ) = ( ( lim_inf F ) . x )))
proof
let x being (Element of X);
assume A34: x in ( dom ( lim F ) );
then x in E by A2,MESFUNC8:def 9;
then ( F # x ) is  convergent by A5;
hence thesis by A34,MESFUNC8:14;
end;
A35: ( dom ( lim_inf F ) ) = ( dom ( F . ( 0 ) ) ) by MESFUNC8:def 7;
A36: h is_measurable_on E by A7,MESFUNC2:34;
then ( 0 ) <= ( integral+ (M,( max- h )) ) by A8,A30,A22,MESFUNC2:26,MESFUNC5:79;
then ( integral+ (M,( max+ h )) ) <> ( +infty ) by A32,XXREAL_3:def 2;
then A37: ( integral+ (M,( max+ h )) ) < ( +infty ) by XXREAL_0:4;
( 0 ) <= ( integral+ (M,( max+ h )) ) by A8,A36,A19,A28,MESFUNC2:25,MESFUNC5:79;
then ( integral+ (M,( max- h )) ) <> ( +infty ) by A32,XXREAL_3:def 2;
then ( integral+ (M,( max- h )) ) < ( +infty ) by XXREAL_0:4;
then A38: h is_integrable_on M by A8,A36,A37,MESFUNC5:def 17;
then A39: (ex I being ExtREAL_sequence st ((((for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) )) & ( lim_inf I ) >= ( Integral (M,( lim_inf F )) )) & ( lim_sup I ) <= ( Integral (M,( lim_sup F )) )) & ((for x being (Element of X) holds (x in E implies ( F # x ) is  convergent)) implies (I is  convergent & ( lim I ) = ( Integral (M,( lim F )) ))))) by A2,A3,A8,A13,A25,CKB18:1;
A40:now
let n being Nat;
A41: E = ( dom ( F . n ) ) by A2,MESFUNC8:def 2;
A42: ( F . n ) is_measurable_on E by A3;
|. ( F . n ) .| is_integrable_on M by A2,A3,A8,A38,A25,CKB16:1;
hence ( F . n ) is_integrable_on M by A41,A42,MESFUNC5:100;
end;
A43: |. ( lim_inf F ) .| is_integrable_on M by A2,A3,A8,A38,A25,CKB16:1;
( dom ( lim F ) ) = ( dom ( F . ( 0 ) ) ) by MESFUNC8:def 9;
then A44: ( lim F ) = ( lim_inf F ) by A35,A33,PARTFUN1:5;
then ( lim F ) is_measurable_on E by A2,A3,MESFUNC8:24;
hence thesis by A2,A5,A43,A40,A35,A44,A39,MESFUNC5:100;
end;
