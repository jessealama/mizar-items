environ
vocabularies NUMBERS,XBOOLE_0,MESFUNC8,SEQFUNC,MESFUNC5,SUBSET_1,SUPINF_1,NAT_1,FUNCT_1,XXREAL_0,ORDINAL2,RELAT_1,ORDINAL1,XXREAL_2,RINFSUP1,ARYTM_3,PBOOLE,PARTFUN1,PROB_1,MEASURE1,CARD_1,SUPINF_2,MESFUNC1,VALUED_0,SEQ_2,ARYTM_1,TARSKI,REAL_1,INTEGRA5,VALUED_1,COMPLEX1,MEASURE6,RFUNCT_3,XREAL_0,MESFUNC2,MESFUN10;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,REAL_1,XXREAL_0,XXREAL_2,RELAT_1,FUNCT_1,RELSET_1,DOMAIN_1,NAT_1,VALUED_0,FUNCT_2,PARTFUN1,PROB_1,SUPINF_1,SUPINF_2,MEASURE1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,SEQFUNC,MESFUNC5,MESFUNC8,RINFSUP2;
definitions MESFUNC1,MEASURE6,RINFSUP2,XXREAL_3,MEMBER_1;
theorems TARSKI,PARTFUN1,FUNCT_1,SUPINF_2,EXTREAL1,EXTREAL2,MESFUNC1,XREAL_0,XBOOLE_0,XBOOLE_1,MESFUNC2,XREAL_1,XXREAL_0,MESFUNC5,NAT_1,RELAT_1,FUNCT_2,SEQFUNC,ORDINAL1,MESFUNC8,RINFSUP2,MESFUNC7,MESFUNC9,NUMBERS,XXREAL_2,XXREAL_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes FUNCT_2,SEQFUNC,FUNCT_1;
registrations NAT_1,XREAL_0,MEMBERED,ORDINAL1,PARTFUN1,RELAT_1,XBOOLE_0,SUPINF_2,NUMBERS,XXREAL_0,MESFUNC8,RINFSUP2,VALUED_0,MEMBER_1,RELSET_1,FUNCT_2;
constructors REAL_1,DOMAIN_1,EXTREAL1,MESFUNC1,MEASURE6,MESFUNC2,MESFUNC5,RINFSUP2,EXTREAL2,MESFUNC9,SUPINF_1,MESFUNC8,SEQFUNC,RELSET_1,BINOP_2;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve X for non  empty set;
reserve F for  with_the_same_dom (Functional_Sequence of X,( ExtREAL ));
reserve x for (Element of X);
reserve n for Nat;
reserve m for Nat;
reserve S for (SigmaField of X);
reserve M for (sigma_Measure of S);
reserve E for (Element of S);
theorem
((((E = ( dom ( F . ( 0 ) ) ) & (for n holds (( F . n ) is  nonnegative & ( F . n ) is_measurable_on E))) & (for x holds (for n holds (for m holds ((x in E & n <= m) implies ( ( F . n ) . x ) >= ( ( F . m ) . x )))))) & ( Integral (M,( ( F . ( 0 ) ) | E )) ) < ( +infty )) implies (ex I being ExtREAL_sequence st (((for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) )) & I is  convergent) & ( lim I ) = ( Integral (M,( lim F )) ))))
proof
assume that
A1: E = ( dom ( F . ( 0 ) ) )
and
A2: (for n holds (( F . n ) is  nonnegative & ( F . n ) is_measurable_on E))
and
A3: (for x holds (for n holds (for m holds ((x in E & n <= m) implies ( ( F . n ) . x ) >= ( ( F . m ) . x )))))
and
A4: ( Integral (M,( ( F . ( 0 ) ) | E )) ) < ( +infty );
A5: ( F . ( 0 ) ) is  nonnegative by A2;
A6: ( dom ( F . ( 0 ) ) ) = ( dom |. ( F . ( 0 ) ) .| ) by MESFUNC1:def 10;
A7: (for x being (Element of X) holds (x in ( dom ( F . ( 0 ) ) ) implies ( ( F . ( 0 ) ) . x ) = ( |. ( F . ( 0 ) ) .| . x )))
proof
let x being (Element of X);
( 0 ) <= ( ( F . ( 0 ) ) . x ) by A5,SUPINF_2:51;
then A8: |. ( ( F . ( 0 ) ) . x ) .| = ( ( F . ( 0 ) ) . x ) by EXTREAL1:def 1;
assume x in ( dom ( F . ( 0 ) ) );
hence thesis by A6,A8,MESFUNC1:def 10;
end;
A9: ( F . ( 0 ) ) is_measurable_on E by A2;
then ( Integral (M,( F . ( 0 ) )) ) = ( integral+ (M,( F . ( 0 ) )) ) by A1,A5,MESFUNC5:88;
then ( integral+ (M,( F . ( 0 ) )) ) < ( +infty ) by A1,A4,RELAT_1:68;
then A10: ( integral+ (M,|. ( F . ( 0 ) ) .|) ) < ( +infty ) by A6,A7,PARTFUN1:5;
A11: ( max+ ( F . ( 0 ) ) ) is_measurable_on E by A2,MESFUNC2:25;
(for x being set holds (x in ( dom ( max- ( F . ( 0 ) ) ) ) implies ( 0. ) <= ( ( max- ( F . ( 0 ) ) ) . x ))) by MESFUNC2:13;
then A12: ( max- ( F . ( 0 ) ) ) is  nonnegative by SUPINF_2:52;
A13: (for x being (Element of X) holds (for n being Nat holds (x in E implies ( |. ( F . n ) .| . x ) <= ( ( F . ( 0 ) ) . x ))))
proof
let x being (Element of X);
let n being Nat;
assume A14: x in E;
( F . n ) is  nonnegative by A2;
then ( 0 ) <= ( ( F . n ) . x ) by SUPINF_2:51;
then |. ( ( F . n ) . x ) .| = ( ( F . n ) . x ) by EXTREAL1:def 1;
then A15: |. ( ( F . n ) . x ) .| <= ( ( F . ( 0 ) ) . x ) by A3,A14;
( dom ( F . n ) ) = ( dom |. ( F . n ) .| ) by MESFUNC1:def 10;
then x in ( dom |. ( F . n ) .| ) by A1,A14,MESFUNC8:def 2;
hence thesis by A15,MESFUNC1:def 10;
end;
A16: (for x being (Element of X) holds (x in E implies ( F # x ) is  convergent))
proof
let x being (Element of X);
assume A17: x in E;
now
let n being (Element of ( NAT ));
let m being (Element of ( NAT ));
assume m <= n;
then ( ( F . n ) . x ) <= ( ( F . m ) . x ) by A3,A17;
then ( ( F # x ) . n ) <= ( ( F . m ) . x ) by MESFUNC5:def 13;
hence ( ( F # x ) . n ) <= ( ( F # x ) . m ) by MESFUNC5:def 13;
end;
then ( F # x ) is  non-increasing by RINFSUP2:7;
hence thesis by RINFSUP2:36;
end;
A18: ( dom ( max+ ( F . ( 0 ) ) ) ) = ( dom ( F . ( 0 ) ) ) by MESFUNC2:def 2;
then A19: ( ( max+ ( F . ( 0 ) ) ) | E ) = ( max+ ( F . ( 0 ) ) ) by A1,RELAT_1:68;
(for x being set holds (x in ( dom ( max+ ( F . ( 0 ) ) ) ) implies ( 0. ) <= ( ( max+ ( F . ( 0 ) ) ) . x ))) by MESFUNC2:12;
then A20: ( max+ ( F . ( 0 ) ) ) is  nonnegative by SUPINF_2:52;
then A21: ( dom ( ( max+ ( F . ( 0 ) ) ) + ( max- ( F . ( 0 ) ) ) ) ) = ( ( dom ( max+ ( F . ( 0 ) ) ) ) /\ ( dom ( max- ( F . ( 0 ) ) ) ) ) by A12,MESFUNC5:22;
A22: ( dom ( max- ( F . ( 0 ) ) ) ) = ( dom ( F . ( 0 ) ) ) by MESFUNC2:def 3;
then A23: ( ( max- ( F . ( 0 ) ) ) | E ) = ( max- ( F . ( 0 ) ) ) by A1,RELAT_1:68;
( max- ( F . ( 0 ) ) ) is_measurable_on E by A1,A2,MESFUNC2:26;
then (ex C being (Element of S) st (C = ( dom ( ( max+ ( F . ( 0 ) ) ) + ( max- ( F . ( 0 ) ) ) ) ) & ( integral+ (M,( ( max+ ( F . ( 0 ) ) ) + ( max- ( F . ( 0 ) ) ) )) ) = ( ( integral+ (M,( ( max+ ( F . ( 0 ) ) ) | C )) ) + ( integral+ (M,( ( max- ( F . ( 0 ) ) ) | C )) ) ))) by A1,A18,A22,A20,A12,A11,MESFUNC5:78;
then A24: ( ( integral+ (M,( max+ ( F . ( 0 ) ) )) ) + ( integral+ (M,( max- ( F . ( 0 ) ) )) ) ) < ( +infty ) by A1,A18,A22,A21,A19,A23,A10,MESFUNC2:24;
( 0 ) <= ( integral+ (M,( max- ( F . ( 0 ) ) )) ) by A1,A9,A22,A12,MESFUNC2:26,MESFUNC5:79;
then ( integral+ (M,( max+ ( F . ( 0 ) ) )) ) <> ( +infty ) by A24,XXREAL_3:def 2;
then A25: ( integral+ (M,( max+ ( F . ( 0 ) ) )) ) < ( +infty ) by XXREAL_0:4;
( 0 ) <= ( integral+ (M,( max+ ( F . ( 0 ) ) )) ) by A1,A9,A18,A20,MESFUNC2:25,MESFUNC5:79;
then ( integral+ (M,( max- ( F . ( 0 ) ) )) ) <> ( +infty ) by A24,XXREAL_3:def 2;
then ( integral+ (M,( max- ( F . ( 0 ) ) )) ) < ( +infty ) by XXREAL_0:4;
then ( F . ( 0 ) ) is_integrable_on M by A1,A9,A25,MESFUNC5:def 17;
then (ex I being ExtREAL_sequence st ((((for n being Nat holds ( I . n ) = ( Integral (M,( F . n )) )) & ( lim_inf I ) >= ( Integral (M,( lim_inf F )) )) & ( lim_sup I ) <= ( Integral (M,( lim_sup F )) )) & ((for x being (Element of X) holds (x in E implies ( F # x ) is  convergent)) implies (I is  convergent & ( lim I ) = ( Integral (M,( lim F )) ))))) by A1,A2,A5,A13,CKB18:1;
hence thesis by A16;
end;
