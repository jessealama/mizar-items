environ
vocabularies FINSEQ_1,FUNCT_1,RELAT_1,RLVECT_2,CARD_3,TARSKI,BINOP_1,GROUP_1,XXREAL_0,GROUP_2,CARD_1,NUMBERS,FUNCT_4,GROUP_6,GROUP_7,FUNCOP_1,ALGSTR_0,GROUP_12,PARTFUN1,FUNCT_2,SUBSET_1,XBOOLE_0,STRUCT_0,NAT_1,ORDINAL4,PRE_TOPC,ARYTM_1,ARYTM_3;
notations TARSKI,XBOOLE_0,SUBSET_1,XCMPLX_0,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCT_4,FUNCOP_1,CARD_3,NAT_1,NUMBERS,FINSEQ_1,XXREAL_0,STRUCT_0,ALGSTR_0,GROUP_1,GROUP_2,GROUP_3,GROUP_4,GROUP_6,PRALG_1,GROUP_7,FUNCT_7,CKB5,CKB12,CKB14;
definitions GROUP_2,FINSEQ_1,CKB5,CKB12,CKB14;
theorems PRALG_1,FUNCT_1,CARD_3,FUNCT_2,TARSKI,GROUP_1,GROUP_2,GROUP_3,GROUP_4,GROUP_6,FINSEQ_2,XREAL_1,ORDINAL1,FINSEQ_1,FINSEQ_3,NAT_1,XBOOLE_0,RELAT_1,XXREAL_0,GROUP_7,FUNCT_7,YELLOW17,STRUCT_0,PARTFUN1,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB17,CKB18,CKB19,CKB20,CKB21;
schemes NAT_1,SUBSET_1,FUNCT_2,XBOOLE_0,FINSEQ_1;
registrations XBOOLE_0,XREAL_0,STRUCT_0,GROUP_2,MONOID_0,ORDINAL1,NAT_1,FUNCT_2,FUNCOP_1,CARD_1,CARD_3,GROUP_7,XXREAL_0,RELSET_1,FINSEQ_1,CKB1,CKB2,CKB3,CKB6,CKB15,CKB16;
constructors BINOP_1,XXREAL_0,REALSET1,FUNCT_4,GROUP_6,MONOID_0,PRALG_1,GROUP_4,GROUP_7,FUNCT_7,RELSET_1,CKB5,CKB12,CKB14;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve n for non empty Nat;
theorem
Th12: (for G being  commutative Group holds (for F being  associative  Group-like (multMagma-Family of ( Seg n )) holds ((((for i being (Element of ( Seg n )) holds ( F . i ) is (Subgroup of G)) & (for x being (Element of G) holds (ex s being (FinSequence of G) st ((( len s ) = n & (for k being (Element of ( Seg n )) holds ( s . k ) in ( F . k ))) & x = ( Product s ))))) & (for s,t being (FinSequence of G) holds (((((( len s ) = n & (for k being (Element of ( Seg n )) holds ( s . k ) in ( F . k ))) & ( len t ) = n) & (for k being (Element of ( Seg n )) holds ( t . k ) in ( F . k ))) & ( Product s ) = ( Product t )) implies s = t))) implies (ex f being (Homomorphism of ( product F ),G) st (f is  bijective & (for x being (Element of ( product F )) holds (ex s being (FinSequence of G) st (((( len s ) = n & (for k being (Element of ( Seg n )) holds ( s . k ) in ( F . k ))) & s = x) & ( f . x ) = ( Product s )))))))))
proof
let G being  commutative Group;
let F being  associative  Group-like (multMagma-Family of ( Seg n ));
set I = ( Seg n );
assume that
A1: (for i being (Element of I) holds ( F . i ) is (Subgroup of G))
and
A2: (for x being (Element of G) holds (ex s being (FinSequence of G) st ((( len s ) = n & (for k being (Element of I) holds ( s . k ) in ( F . k ))) & x = ( Product s ))))
and
A3: (for s,t being (FinSequence of G) holds (((((( len s ) = n & (for k being (Element of I) holds ( s . k ) in ( F . k ))) & ( len t ) = n) & (for k being (Element of I) holds ( t . k ) in ( F . k ))) & ( Product s ) = ( Product t )) implies s = t));
A4: (for x being (Element of ( product F )) holds (((x is (FinSequence of G) & ( dom x ) = I) & ( dom x ) = ( dom ( Carrier F ) )) & (for i being set holds (i in ( dom ( Carrier F ) ) implies ( x . i ) in ( ( Carrier F ) . i )))))
proof
let x being (Element of ( product F ));
A5: (the carrier of ( product F )) = ( product ( Carrier F ) ) by GROUP_7:def 2;
A6: ( dom ( Carrier F ) ) = I by PARTFUN1:def 2;
( dom x ) = ( Seg n ) by A5,PARTFUN1:def 2;
then reconsider s = x as FinSequence by FINSEQ_1:def 2;
A7: (for i being (Element of I) holds ( x . i ) in (the carrier of ( F . i )))
proof
let i being (Element of I);
(ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by PRALG_1:def 13;
hence ( x . i ) in (the carrier of ( F . i )) by A6,A5,CARD_3:9;
end;
(for i being Nat holds (i in ( dom s ) implies ( s . i ) in (the carrier of G)))
proof
let i being Nat;
assume i in ( dom s );
then reconsider j = i as (Element of I) by A5,PARTFUN1:def 2;
A8: ( s . j ) in (the carrier of ( F . j )) by A7;
( F . j ) is (Subgroup of G) by A1;
then (the carrier of ( F . j )) c= (the carrier of G) by GROUP_2:def 5;
hence ( s . i ) in (the carrier of G) by A8;
end;
hence thesis by A5,CARD_3:9,FINSEQ_2:12,PARTFUN1:def 2;
end;
defpred P[ set,set ]
 means
(ex s being (FinSequence of G) st (((( len s ) = n & (for k being (Element of I) holds ( s . k ) in ( F . k ))) & s = $1) & $2 = ( Product s )));
A9: (for x being (Element of ( product F )) holds (ex y being (Element of G) st P[ x,y ]))
proof
let x being (Element of ( product F ));
A10: (((x is (FinSequence of G) & ( dom x ) = I) & ( dom x ) = ( dom ( Carrier F ) )) & (for i being set holds (i in ( dom ( Carrier F ) ) implies ( x . i ) in ( ( Carrier F ) . i )))) by A4;
reconsider s = x as (FinSequence of G) by A4;
A11: ( dom x ) = ( Seg n ) by A4;
A12: (for i being (Element of I) holds ( x . i ) in (the carrier of ( F . i )))
proof
let i being (Element of I);
(ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by PRALG_1:def 13;
hence ( x . i ) in (the carrier of ( F . i )) by A10;
end;
n in ( NAT ) by ORDINAL1:def 12;
then A13: ( len s ) = n by A11,FINSEQ_1:def 3;
A14:now
let k being (Element of I);
( s . k ) in (the carrier of ( F . k )) by A12;
hence ( s . k ) in ( F . k ) by STRUCT_0:def 5;
end;
take ( Product s );
thus P[ x,( Product s ) ] by A13,A14;
end;
consider f being (Function of ( product F ),G) such that A15: (for x being (Element of (the carrier of ( product F ))) holds P[ x,( f . x ) ]) from FUNCT_2:sch 3(A9);
(for a,b being (Element of ( product F )) holds ( f . ( a * b ) ) = ( ( f . a ) * ( f . b ) ))
proof
let a being (Element of ( product F )),b being (Element of ( product F ));
A16: (((a is (FinSequence of G) & ( dom a ) = I) & ( dom a ) = ( dom ( Carrier F ) )) & (for i being set holds (i in ( dom ( Carrier F ) ) implies ( a . i ) in ( ( Carrier F ) . i )))) by A4;
reconsider a1 = a as (FinSequence of G) by A4;
A17: (((b is (FinSequence of G) & ( dom b ) = I) & ( dom b ) = ( dom ( Carrier F ) )) & (for i being set holds (i in ( dom ( Carrier F ) ) implies ( b . i ) in ( ( Carrier F ) . i )))) by A4;
reconsider b1 = b as (FinSequence of G) by A4;
reconsider ab1 = ( a * b ) as (FinSequence of G) by A4;
A19:now
let k being (Element of ( NAT ));
assume k in ( dom ab1 );
then reconsider k0 = k as (Element of I) by A4;
(ex R being 1-sorted st (R = ( F . k0 ) & ( ( Carrier F ) . k0 ) = (the carrier of R))) by PRALG_1:def 13;
then reconsider aa = ( a . k0 ) as (Element of ( F . k0 )) by A16;
(ex R being 1-sorted st (R = ( F . k0 ) & ( ( Carrier F ) . k0 ) = (the carrier of R))) by PRALG_1:def 13;
then reconsider bb = ( b . k0 ) as (Element of ( F . k0 )) by A17;
A20: aa = ( a1 /. k0 ) by A16,PARTFUN1:def 6;
A21: bb = ( b1 /. k0 ) by A17,PARTFUN1:def 6;
A22: ( F . k0 ) is (Subgroup of G) by A1;
thus ( ab1 . k ) = ( aa * bb ) by GROUP_7:1
.= ( ( a1 /. k ) * ( b1 /. k ) ) by A20,A21,A22,GROUP_2:43;
end;
A23: (ex sa being (FinSequence of G) st (((( len sa ) = n & (for k being (Element of I) holds ( sa . k ) in ( F . k ))) & sa = a) & ( f . a ) = ( Product sa ))) by A15;
A24: (ex sb being (FinSequence of G) st (((( len sb ) = n & (for k being (Element of I) holds ( sb . k ) in ( F . k ))) & sb = b) & ( f . b ) = ( Product sb ))) by A15;
(ex sab being (FinSequence of G) st (((( len sab ) = n & (for k being (Element of I) holds ( sab . k ) in ( F . k ))) & sab = ( a * b )) & ( f . ( a * b ) ) = ( Product sab ))) by A15;
hence thesis by A19,A23,A24,GROUP_4:17;
end;
then reconsider f as (Homomorphism of ( product F ),G) by GROUP_6:def 6;
take f;
now
let y being set;
assume y in (the carrier of G);
then consider s being (FinSequence of G) such that A25: ((( len s ) = n & (for k being (Element of I) holds ( s . k ) in ( F . k ))) & y = ( Product s )) by A2;
A26: (the carrier of ( product F )) = ( product ( Carrier F ) ) by GROUP_7:def 2;
A27: ( dom s ) = I by A25,FINSEQ_1:def 3;
A28: ( dom ( Carrier F ) ) = I by PARTFUN1:def 2;
A29: (for x being set holds (x in ( dom ( Carrier F ) ) implies ( s . x ) in ( ( Carrier F ) . x )))
proof
let x being set;
assume x in ( dom ( Carrier F ) );
then reconsider i = x as (Element of I) by PARTFUN1:def 2;
A30: ( s . i ) in ( F . i ) by A25;
(ex R being 1-sorted st (R = ( F . i ) & ( ( Carrier F ) . i ) = (the carrier of R))) by PRALG_1:def 13;
hence ( s . x ) in ( ( Carrier F ) . x ) by A30,STRUCT_0:def 5;
end;
reconsider x = s as (Element of ( product F )) by A26,A27,A28,A29,CARD_3:9;
(ex t being (FinSequence of G) st (((( len t ) = n & (for k being (Element of I) holds ( t . k ) in ( F . k ))) & t = x) & ( f . x ) = ( Product t ))) by A15;
hence y in ( rng f ) by A25,FUNCT_2:4;
end;
then A31: (the carrier of G) c= ( rng f ) by TARSKI:def 3;
( rng f ) = (the carrier of G) by A31,XBOOLE_0:def 10;
then A32: f is  onto by FUNCT_2:def 3;
(for x1,x2 being set holds (((x1 in (the carrier of ( product F )) & x2 in (the carrier of ( product F ))) & ( f . x1 ) = ( f . x2 )) implies x1 = x2))
proof
let x1 being set,x2 being set;
assume A33: ((x1 in (the carrier of ( product F )) & x2 in (the carrier of ( product F ))) & ( f . x1 ) = ( f . x2 ));
consider s being (FinSequence of G) such that A34: (((( len s ) = n & (for k being (Element of I) holds ( s . k ) in ( F . k ))) & s = x1) & ( f . x1 ) = ( Product s )) by A15,A33;
consider t being (FinSequence of G) such that A35: (((( len t ) = n & (for k being (Element of I) holds ( t . k ) in ( F . k ))) & t = x2) & ( f . x2 ) = ( Product t )) by A15,A33;
thus x1 = x2 by A3,A34,A33,A35;
end;
then f is  one-to-one by FUNCT_2:19;
hence thesis by A15,A32;
end;
