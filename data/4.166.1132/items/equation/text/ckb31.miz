environ
vocabularies XBOOLE_0,FUNCT_1,RELAT_1,TARSKI,PBOOLE,MEMBER_1,MSUALG_3,FUNCT_2,FUNCT_6,PZFMISC1,SUBSET_1,REALSET1,STRUCT_0,MSUALG_1,MSUALG_2,UNIALG_2,PARTFUN1,PRALG_2,CARD_3,RLVECT_2,PRELAMB,MSAFREE,FINSET_1,MSAFREE2,MSUALG_6,MARGREL1,NAT_1,GROUP_6,CLOSURE2,ZFMISC_1,FINSEQ_1,CARD_1,PRALG_3,FUNCT_4,FUNCOP_1,NUMBERS,ZF_LANG,MCART_1,ZF_MODEL,WELLORD1,MSUALG_4,EQUATION;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,STRUCT_0,FUNCT_2,MCART_1,FINSET_1,NAT_1,FINSEQ_1,FINSEQ_2,FUNCT_4,FUNCT_6,PZFMISC1,CARD_3,MSUALG_1,PRALG_2,FUNCOP_1,MSUALG_2,PRALG_3,MSUALG_3,MSUALG_4,MSAFREE,MSAFREE2,CLOSURE2,MSUALG_6,CKB7,CKB22;
definitions TARSKI,PBOOLE,PRALG_2,MSUALG_2,MSUALG_3,FINSET_1,MSAFREE,MSAFREE2,MSUALG_1,XBOOLE_0,PZFMISC1,CKB7,CKB22;
theorems MSUALG_1,EXTENS_1,MSAFREE2,MSSCYC_1,CARD_3,FUNCT_4,FUNCOP_1,FUNCT_1,FUNCT_2,MCART_1,MSAFREE,FINSEQ_1,CLOSURE2,FINSET_1,MSUALG_2,MSUALG_3,MSUALG_4,MSUALG_9,PBOOLE,PARTFUN1,MSUALG_6,AUTALG_1,MSSUBFAM,INSTALG1,PRALG_2,PRALG_3,RELAT_1,TARSKI,ZFMISC_1,RELSET_1,XBOOLE_0,XBOOLE_1,FUNCT_6,PZFMISC1,FINSEQ_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB28,CKB29,CKB30;
schemes MSSUBFAM,PBOOLE,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FUNCT_2,FUNCOP_1,FINSET_1,FINSEQ_1,STRUCT_0,MSUALG_1,MSUALG_2,RELAT_1,FUNCT_1,PRALG_2,MSUALG_3,MSAFREE,MSUALG_4,EXTENS_1,CLOSURE2,MSUALG_6,PRALG_3,MSUALG_9,MSSUBFAM,PBOOLE,AUTALG_1,CKB23,CKB24,CKB25,CKB26,CKB27;
constructors FUNCT_4,PZFMISC1,MSSUBFAM,MSUALG_3,MSAFREE2,CLOSURE2,MSUALG_6,PRALG_3,RELSET_1,FINSEQ_2,CKB7,CKB22;
requirements SUBSET,BOOLE;
begin
reserve S for non  empty non  void ManySortedSign;
reserve U0 for  non-empty MSAlgebra over S;
reserve U1 for  non-empty MSAlgebra over S;
theorem
Th26: (for W being  strict  free  non-empty MSAlgebra over S holds (for F being (ManySortedFunction of U0,U1) holds (F is_epimorphism U0,U1 implies (for G being (ManySortedFunction of W,U1) holds (G is_homomorphism W,U1 implies (ex H being (ManySortedFunction of W,U0) st (H is_homomorphism W,U0 & G = ( F ** H ))))))))
proof
let W being  strict  free  non-empty MSAlgebra over S;
let F being (ManySortedFunction of U0,U1);
assume that
A1: F is_epimorphism U0,U1;
set sU0 = (the Sorts of U0);
set sU1 = (the Sorts of U1);
set I = (the carrier of S);
let G being (ManySortedFunction of W,U1);
assume that
A2: G is_homomorphism W,U1;
consider Gen being (GeneratorSet of W) such that A3: Gen is  free by MSAFREE:def 6;
defpred P[ set,set,set ]
 means
(ex f being (Function of ( sU0 . $3 ),( sU1 . $3 )) st (ex g being (Function of ( Gen . $3 ),( sU1 . $3 )) st ((f = ( F . $3 ) & g = ( ( G || Gen ) . $3 )) & $1 in ( f " { ( g . $2 ) } ))));
A4: (for i being set holds (i in I implies (for x being set holds (x in ( Gen . i ) implies (ex y being set st (y in ( sU0 . i ) & P[ y,x,i ]))))))
proof
let i being set;
assume that
A5: i in I;
reconsider g = ( ( G || Gen ) . i ) as (Function of ( Gen . i ),( sU1 . i )) by A5,PBOOLE:def 15;
reconsider f = ( F . i ) as (Function of ( sU0 . i ),( sU1 . i )) by A5,PBOOLE:def 15;
let x being set;
assume x in ( Gen . i );
then A6: ( g . x ) in ( sU1 . i ) by A5,FUNCT_2:5;
F is  "onto" by A1,MSUALG_3:def 8;
then ( rng ( F . i ) ) = ( sU1 . i ) by A5,MSUALG_3:def 3;
then ( f " { ( g . x ) } ) <> ( {} ) by A6,FUNCT_2:41;
then consider y being set such that A7: y in ( f " { ( g . x ) } ) by XBOOLE_0:def 1;
take y;
thus y in ( sU0 . i ) by A7;
thus thesis by A7;
end;
consider H being (ManySortedFunction of Gen,sU0) such that A8: (for i being set holds (i in I implies (ex h being (Function of ( Gen . i ),( sU0 . i )) st (h = ( H . i ) & (for x being set holds (x in ( Gen . i ) implies P[ ( h . x ),x,i ])))))) from MSSUBFAM:sch 1(A4);
consider H1 being (ManySortedFunction of W,U0) such that A9: H1 is_homomorphism W,U0 and A10: ( H1 || Gen ) = H by A3,MSAFREE:def 5;
now
let i being set;
assume A11: i in I;
then reconsider f9 = ( F . i ) as (Function of ( sU0 . i ),( sU1 . i )) by PBOOLE:def 15;
reconsider g9 = ( ( G || Gen ) . i ) as (Function of ( Gen . i ),( sU1 . i )) by A11,PBOOLE:def 15;
consider h being (Function of ( Gen . i ),( sU0 . i )) such that A12: h = ( H . i ) and A13: (for x being set holds (x in ( Gen . i ) implies (ex f being (Function of ( sU0 . i ),( sU1 . i )) st (ex g being (Function of ( Gen . i ),( sU1 . i )) st ((f = ( F . i ) & g = ( ( G || Gen ) . i )) & ( h . x ) in ( f " { ( g . x ) } )))))) by A8,A11;
A14:now
let x being set;
assume A15: x in ( Gen . i );
then consider f being (Function of ( sU0 . i ),( sU1 . i )),g being (Function of ( Gen . i ),( sU1 . i )) such that A16: (f = ( F . i ) & g = ( ( G || Gen ) . i )) and A17: ( h . x ) in ( f " { ( g . x ) } ) by A13;
( f . ( h . x ) ) in { ( g . x ) } by A11,A17,FUNCT_2:38;
then ( f . ( h . x ) ) = ( g . x ) by TARSKI:def 1;
hence ( ( f9 * h ) . x ) = ( g9 . x ) by A15,A16,A17,FUNCT_2:15;
end;
(( Gen . i ) = ( dom g9 ) & ( Gen . i ) = ( dom ( f9 * h ) )) by A11,FUNCT_2:def 1;
then g9 = ( f9 * h ) by A14,FUNCT_1:2;
hence ( ( G || Gen ) . i ) = ( ( F ** H ) . i ) by A11,A12,MSUALG_3:2;
end;
then ( G || Gen ) = ( F ** ( H1 || Gen ) ) by A10,PBOOLE:3;
then A18: ( G || Gen ) = ( ( F ** H1 ) || Gen ) by EXTENS_1:4;
take H1;
thus H1 is_homomorphism W,U0 by A9;
F is_homomorphism U0,U1 by A1,MSUALG_3:def 8;
then ( F ** H1 ) is_homomorphism W,U1 by A9,MSUALG_3:10;
hence thesis by A2,A18,EXTENS_1:19;
end;
