environ
vocabularies NUMBERS,SCMPDS_2,SUBSET_1,FSM_1,SCMPDS_4,AMI_1,TURING_1,SCMFSA8A,SCMFSA_7,AMI_3,INT_1,SCMFSA8B,CARD_1,ARYTM_3,FUNCT_1,XXREAL_0,UNIALG_2,SCMFSA7B,SCMFSA6B,RELAT_1,FUNCT_4,AMI_2,SCMFSA_9,ARYTM_1,VALUED_1,TARSKI,GRAPHSP,CIRCUIT2,MSUALG_1,NAT_1,FUNCOP_1,CARD_3,FINSEQ_1,GRAPH_2,SCPISORT,SCMP_GCD,CLASSES1,SCPQSORT,ORDINAL1,SCMNORM,SCMFSA6C,COMPOS_1;
notations TARSKI,XBOOLE_0,FUNCT_2,SUBSET_1,CARD_1,NUMBERS,XXREAL_0,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_4,PBOOLE,VALUED_1,XCMPLX_0,RECDEF_1,INT_1,NAT_1,STRUCT_0,MEMSTR_0,EXTPRO_1,AMI_2,FUNCT_7,SCMPDS_2,SCMPDS_4,SCMPDS_5,SCMPDS_6,SCMP_GCD,CARD_3,FINSEQ_1,SCMPDS_8,GRAPH_2,CLASSES1,COMPOS_1,SCPISORT,CKB15,CKB16;
definitions SCMPDS_2,SCMP_GCD,COMPOS_1,EXTPRO_1,SCPISORT,MEMSTR_0,TARSKI,FUNCT_7,XBOOLE_0,FUNCOP_1,NAT_1,AFINSQ_1,FUNCT_4,CKB15,CKB16;
theorems AMI_3,NAT_1,TARSKI,FUNCT_4,SCMPDS_2,FUNCT_7,GRFUNC_1,SCMPDS_4,SCMPDS_5,SCMPDS_7,SCMPDS_8,FINSEQ_1,FINSEQ_2,RFINSEQ,SCPISORT,XBOOLE_1,XREAL_1,XXREAL_0,GRAPH_2,MEMSTR_0,ORDINAL1,CLASSES1,SCMPDS_6,SCMP_GCD,INT_1,COMPOS_1,AFINSQ_1,EXTPRO_1,PBOOLE,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23;
schemes NAT_1,SCMPDS_8;
registrations XBOOLE_0,SETFAM_1,FUNCT_1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,SCMPDS_2,SCMPDS_4,SCMPDS_5,SCMPDS_6,SCMPDS_8,ORDINAL1,VALUED_0,VALUED_1,RELAT_1,COMPOS_1,AFINSQ_1,MEMSTR_0,EXTPRO_1,FUNCT_4,FUNCT_7,FUNCOP_1,PRE_POLY,PBOOLE,SCMPDS_3,CKB1;
constructors REAL_1,RECDEF_1,NEWTON,MESFUNC1,SCM_1,SCMPDS_4,SCMPDS_5,SCMPDS_6,SCMP_GCD,SCMPDS_8,SCPISORT,CLASSES1,GRAPH_2,VALUED_1,AMI_2,SCMPDS_1,PRE_POLY,AMISTD_1,AMISTD_2,SCMPDS_7,PBOOLE,AMISTD_5,MEMSTR_0,CKB15,CKB16;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve x for Int_position;
reserve n for (Element of ( NAT ));
reserve p0 for (Element of ( NAT ));
reserve P for (Instruction-Sequence of ( SCMPDS ));
reserve Q for (Instruction-Sequence of ( SCMPDS ));
set k1 = ( (( GBP ),5) := (( GBP ),4) );
set k2 = ( SubFrom (( GBP ),5,( GBP ),2) );
set a1 = ( intpos 1 );
set a2 = ( intpos 2 );
set a4 = ( intpos 4 );
theorem
Lm29: (for s being ( 0 ) -started (State of ( SCMPDS )) holds (for p0,n being (Element of ( NAT )) holds (( card ( QuickSort (n,p0) ) ) = 57 & (p0 >= 7 implies (( QuickSort (n,p0) ) is_halting_on s,P & (ex f,g being (FinSequence of ( INT )) st (((((( len f ) = n & f is_FinSequence_on s,p0) & ( len g ) = n) & g is_FinSequence_on ( IExec (( QuickSort (n,p0) ),P,s) ),p0) & f,g are_fiberwise_equipotent ) & g is_non_decreasing_on 1,n)))))))
proof
set b1 = ( DataLoc (( 0 ),1) );
reconsider Pt = ( Partition ) as  halt-free  shiftable (Program of ( SCMPDS ));
let s being ( 0 ) -started (State of ( SCMPDS ));
let p0 being (Element of ( NAT ));
let n being (Element of ( NAT ));
I: ( Initialize s ) = s by MEMSTR_0:44;
set pn = ( p0 + n );
set l1 = ( (( GBP ),2) := (( SBP ),( pn + 1 )) );
set l2 = ( SubFrom (( GBP ),2,( SBP ),pn) );
set l3 = ( (( GBP ),2) := (( SBP ),pn) );
set l4 = ( (( GBP ),4) := (( SBP ),( pn + 1 )) );
set l5 = ( (( SBP ),( pn + 3 )) := (( SBP ),( pn + 1 )) );
set l6 = ( (( SBP ),( pn + 1 )) := (( GBP ),4) );
set l7 = ( (( SBP ),( pn + 2 )) := (( GBP ),4) );
set l8 = ( AddTo (( SBP ),( pn + 1 ),( - 1 )) );
set l9 = ( AddTo (( SBP ),( pn + 2 ),1) );
set l0 = ( AddTo (( GBP ),1,2) );
set lb = ( Load ( AddTo (( GBP ),1,( - 2 )) ) );
set L5 = ( ( ( ( ( l5 ';' l6 ) ';' l7 ) ';' l8 ) ';' l9 ) ';' l0 );
set TR = ( ( ( l3 ';' l4 ) ';' Pt ) ';' L5 );
set IF4 = ( if>0 (( GBP ),2,TR,lb) );
set WB4 = ( ( l1 ';' l2 ) ';' IF4 );
set WH4 = ( while>0 (( GBP ),1,WB4) );
set m1 = ( ( GBP ) := ( 0 ) );
set m2 = ( ( SBP ) := 1 );
set m3 = ( (( SBP ),pn) := ( p0 + 1 ) );
set m4 = ( (( SBP ),( pn + 1 )) := pn );
set M4 = ( ( ( m1 ';' m2 ) ';' m3 ) ';' m4 );
set s1 = ( IExec (M4,P,s) );
set a = ( GBP );
set P1 = P;
A1: ( 7 + n ) >= 7 by NAT_1:11;
A2: ( card L5 ) = ( ( card ( ( ( ( l5 ';' l6 ) ';' l7 ) ';' l8 ) ';' l9 ) ) + 1 ) by SCMP_GCD:4
.= ( ( ( card ( ( ( l5 ';' l6 ) ';' l7 ) ';' l8 ) ) + 1 ) + 1 ) by SCMP_GCD:4
.= ( ( 4 + 1 ) + 1 ) by CKB7:1;
A3: ( card WB4 ) = ( ( card ( l1 ';' l2 ) ) + ( card IF4 ) ) by AFINSQ_1:17
.= ( 2 + ( card IF4 ) ) by SCMP_GCD:5
.= ( 2 + ( ( ( card TR ) + ( card lb ) ) + 2 ) ) by SCMPDS_6:65
.= ( 2 + ( ( ( card TR ) + 1 ) + 2 ) ) by COMPOS_1:54
.= ( 2 + ( ( ( ( card ( ( l3 ';' l4 ) ';' Pt ) ) + ( card L5 ) ) + 1 ) + 2 ) ) by AFINSQ_1:17
.= ( 2 + ( ( ( ( ( card ( l3 ';' l4 ) ) + ( card Pt ) ) + ( card L5 ) ) + 1 ) + 2 ) ) by AFINSQ_1:17
.= ( 2 + ( ( ( ( 2 + 38 ) + ( card L5 ) ) + 1 ) + 2 ) ) by CKB17:1,SCMP_GCD:5
.= 51 by A2;
thus ( card ( QuickSort (n,p0) ) ) = ( ( card M4 ) + ( card WH4 ) ) by AFINSQ_1:17
.= ( 4 + ( card WH4 ) ) by CKB7:1
.= ( 4 + ( 51 + 2 ) ) by A3,SCMPDS_8:17
.= 57;
assume A4: p0 >= 7;
then pn >= ( 7 + n ) by XREAL_1:6;
then A5: pn >= 7 by A1,XXREAL_0:2;
A6: (for t being (State of ( SCMPDS )) holds (for Q holds (for m1 being (Element of ( NAT )) holds ((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m1) implies ((( ( IExec (( l3 ';' l4 ),Q,( Initialize t )) ) . a2 ) = ( t . ( intpos ( m1 + pn ) ) ) & ( ( IExec (( l3 ';' l4 ),Q,( Initialize t )) ) . a4 ) = ( t . ( intpos ( ( m1 + pn ) + 1 ) ) )) & (for i being (Element of ( NAT )) holds ((i <> 2 & i <> 4) implies ( ( IExec (( l3 ';' l4 ),Q,( Initialize t )) ) . ( intpos i ) ) = ( t . ( intpos i ) ))))))))
proof
let t being (State of ( SCMPDS ));
let Q;
let m1 being (Element of ( NAT ));
set t0 = ( Initialize t );
set t2 = ( IExec (( l3 ';' l4 ),Q,( Initialize t )) );
set t3 = ( Exec (l3,t0) );
set mp = ( m1 + pn );
set Q0 = Q;
assume that
A8: ( t . a ) = ( 0 )
and
A9: ( t . ( SBP ) ) = m1;
A10: ( t0 . a ) = ( 0 ) by A8,SCMPDS_5:15;
then A11: ( DataLoc (( t0 . a ),2) ) = ( intpos ( ( 0 ) + 2 ) ) by SCMP_GCD:1;
then ( t3 . a ) = ( 0 ) by A10,AMI_3:10,SCMPDS_2:47;
then A12: ( DataLoc (( t3 . a ),4) ) = ( intpos ( ( 0 ) + 4 ) ) by SCMP_GCD:1;
A13: ( t0 . ( SBP ) ) = m1 by A9,SCMPDS_5:15;
then A14: ( t3 . ( SBP ) ) = m1 by A11,AMI_3:10,SCMPDS_2:47;
mp >= ( ( 0 ) + 7 ) by A5,XREAL_1:7;
then ( mp + 1 ) >= ( 7 + 1 ) by XREAL_1:6;
then ( mp + 1 ) > 2 by XXREAL_0:2;
then A15: ( t3 . ( intpos ( mp + 1 ) ) ) = ( t0 . ( intpos ( mp + 1 ) ) ) by A11,AMI_3:10,SCMPDS_2:47
.= ( t . ( intpos ( mp + 1 ) ) ) by SCMPDS_5:15;
A16: ( t3 . a2 ) = ( t0 . ( DataLoc (( t0 . ( SBP ) ),pn) ) ) by A11,SCMPDS_2:47
.= ( t0 . ( intpos mp ) ) by A13,SCMP_GCD:1
.= ( t . ( intpos mp ) ) by SCMPDS_5:15;
thus ( t2 . a2 ) = ( ( Exec (l4,t3) ) . a2 ) by SCMPDS_5:42
.= ( t . ( intpos mp ) ) by A16,A12,AMI_3:10,SCMPDS_2:47;
thus ( t2 . a4 ) = ( ( Exec (l4,t3) ) . a4 ) by SCMPDS_5:42
.= ( t3 . ( DataLoc (( t3 . ( SBP ) ),( pn + 1 )) ) ) by A12,SCMPDS_2:47
.= ( t . ( intpos ( mp + 1 ) ) ) by A14,A15,SCMP_GCD:1;
hereby
let i being (Element of ( NAT ));
assume that
A17: i <> 2
and
A18: i <> 4;
thus ( t2 . ( intpos i ) ) = ( ( Exec (l4,t3) ) . ( intpos i ) ) by SCMPDS_5:42
.= ( t3 . ( intpos i ) ) by A12,A18,AMI_3:10,SCMPDS_2:47
.= ( t0 . ( intpos i ) ) by A11,A17,AMI_3:10,SCMPDS_2:47
.= ( t . ( intpos i ) ) by SCMPDS_5:15;
end;
end;
A19: (for t being (State of ( SCMPDS )) holds (for Q holds (for m,m1 being (Element of ( NAT )) holds (((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m1) & m1 = ( m + 1 )) implies ((((((( ( IExec (L5,Q,( Initialize t )) ) . a ) = ( 0 ) & ( ( IExec (L5,Q,( Initialize t )) ) . ( SBP ) ) = ( m1 + 2 )) & ( ( IExec (L5,Q,( Initialize t )) ) . ( intpos ( m1 + pn ) ) ) = ( t . ( intpos ( m1 + pn ) ) )) & ( ( IExec (L5,Q,( Initialize t )) ) . ( intpos ( ( m1 + pn ) + 1 ) ) ) = ( ( t . a4 ) - 1 )) & ( ( IExec (L5,Q,( Initialize t )) ) . ( intpos ( ( m1 + pn ) + 2 ) ) ) = ( ( t . a4 ) + 1 )) & ( ( IExec (L5,Q,( Initialize t )) ) . ( intpos ( ( m1 + pn ) + 3 ) ) ) = ( t . ( intpos ( ( m1 + pn ) + 1 ) ) )) & (for i being (Element of ( NAT )) holds ((i >= 8 & i < ( m1 + pn )) implies ( ( IExec (L5,Q,( Initialize t )) ) . ( intpos i ) ) = ( t . ( intpos i ) ))))))))
proof
let t being (State of ( SCMPDS ));
let Q;
let m being (Element of ( NAT ));
let m1 being (Element of ( NAT ));
assume that
A20: ( t . a ) = ( 0 )
and
A21: ( t . ( SBP ) ) = m1
and
A22: m1 = ( m + 1 );
set t0 = ( Initialize t );
set t1 = ( IExec (L5,Q,( Initialize t )) );
set Q0 = Q;
set t2 = ( IExec (( ( ( ( l5 ';' l6 ) ';' l7 ) ';' l8 ) ';' l9 ),Q,( Initialize t )) );
set t3 = ( IExec (( ( ( l5 ';' l6 ) ';' l7 ) ';' l8 ),Q,( Initialize t )) );
set t4 = ( IExec (( ( l5 ';' l6 ) ';' l7 ),Q,( Initialize t )) );
set t5 = ( IExec (( l5 ';' l6 ),Q,( Initialize t )) );
set t6 = ( Exec (l5,t0) );
set mp = ( m1 + pn );
A28: ( mp + 3 ) <> ( mp + 1 );
m1 >= 1 by A22,NAT_1:11;
then A29: mp >= ( 1 + 7 ) by A5,XREAL_1:7;
then A30: ( mp + 1 ) >= ( 8 + 1 ) by XREAL_1:6;
then A31: ( mp + 1 ) > 4 by XXREAL_0:2;
A32: ( mp + 1 ) > 1 by A30,XXREAL_0:2;
A33: ( mp + ( 0 ) ) <> ( mp + 2 );
A34: mp > 1 by A29,XXREAL_0:2;
A35: ( mp + 1 ) <> ( mp + 2 );
A36: ( t0 . ( SBP ) ) = m1 by A21,SCMPDS_5:15;
then A37: ( DataLoc (( t0 . ( SBP ) ),( pn + 3 )) ) = ( intpos ( mp + 3 ) ) by SCMP_GCD:1;
A38:now
let i being (Element of ( NAT ));
assume i <> ( mp + 3 );
hence ( t6 . ( intpos i ) ) = ( t0 . ( intpos i ) ) by A37,AMI_3:10,SCMPDS_2:47
.= ( t . ( intpos i ) ) by SCMPDS_5:15;
end;
( mp + ( 0 ) ) <> ( mp + 3 );
then A39: ( t6 . ( intpos mp ) ) = ( t . ( intpos mp ) ) by A38;
A40: ( mp + 1 ) <> ( mp + 2 );
A41: ( mp + 3 ) <> ( mp + 2 );
A42: ( mp + 3 ) >= ( 8 + 3 ) by A29,XREAL_1:6;
then A43: ( mp + 3 ) > 1 by XXREAL_0:2;
( mp + 3 ) > 1 by A42,XXREAL_0:2;
then A44: ( t6 . ( SBP ) ) = m1 by A21,A38;
then A45: ( DataLoc (( t6 . ( SBP ) ),( pn + 1 )) ) = ( intpos ( mp + 1 ) ) by SCMP_GCD:1;
A46:now
let i being (Element of ( NAT ));
assume A47: i <> ( mp + 1 );
thus ( t5 . ( intpos i ) ) = ( ( Exec (l6,t6) ) . ( intpos i ) ) by SCMPDS_5:42
.= ( t6 . ( intpos i ) ) by A45,A47,AMI_3:10,SCMPDS_2:47;
end;
( mp + 1 ) > 1 by A30,XXREAL_0:2;
then A48: ( t5 . ( SBP ) ) = m1 by A44,A46;
then A49: ( DataLoc (( t5 . ( SBP ) ),( pn + 2 )) ) = ( intpos ( mp + 2 ) ) by SCMP_GCD:1;
A50:now
let i being (Element of ( NAT ));
assume A51: i <> ( mp + 2 );
thus ( t4 . ( intpos i ) ) = ( ( Exec (l7,t5) ) . ( intpos i ) ) by SCMPDS_5:41
.= ( t5 . ( intpos i ) ) by A49,A51,AMI_3:10,SCMPDS_2:47;
end;
( t6 . ( intpos ( mp + 3 ) ) ) = ( t0 . ( DataLoc (( t0 . ( SBP ) ),( pn + 1 )) ) ) by A37,SCMPDS_2:47
.= ( t0 . ( intpos ( m1 + ( pn + 1 ) ) ) ) by A36,SCMP_GCD:1
.= ( t . ( intpos ( mp + 1 ) ) ) by SCMPDS_5:15;
then ( t5 . ( intpos ( mp + 3 ) ) ) = ( t . ( intpos ( mp + 1 ) ) ) by A46,A28;
then A52: ( t4 . ( intpos ( mp + 3 ) ) ) = ( t . ( intpos ( mp + 1 ) ) ) by A50,A41;
A53: ( mp + 3 ) > 4 by A42,XXREAL_0:2;
then A54: ( t6 . a4 ) = ( t . a4 ) by A38;
A55: ( mp + 2 ) >= ( 8 + 2 ) by A29,XREAL_1:6;
then A56: ( mp + 2 ) > 1 by XXREAL_0:2;
( mp + 2 ) > 1 by A55,XXREAL_0:2;
then A57: ( t4 . ( SBP ) ) = m1 by A48,A50;
then A58: ( DataLoc (( t4 . ( SBP ) ),( pn + 1 )) ) = ( intpos ( mp + 1 ) ) by SCMP_GCD:1;
A59:now
let i being (Element of ( NAT ));
assume A60: i <> ( mp + 1 );
thus ( t3 . ( intpos i ) ) = ( ( Exec (l8,t4) ) . ( intpos i ) ) by SCMPDS_5:41
.= ( t4 . ( intpos i ) ) by A58,A60,AMI_3:10,SCMPDS_2:48;
end;
( ( m1 + pn ) + 1 ) > 1 by A30,XXREAL_0:2;
then A61: ( t3 . ( SBP ) ) = m1 by A57,A59;
then A62: ( DataLoc (( t3 . ( SBP ) ),( pn + 2 )) ) = ( intpos ( mp + 2 ) ) by SCMP_GCD:1;
A63:now
let i being (Element of ( NAT ));
assume A64: i <> ( mp + 2 );
thus ( t2 . ( intpos i ) ) = ( ( Exec (l9,t3) ) . ( intpos i ) ) by SCMPDS_5:41
.= ( t3 . ( intpos i ) ) by A62,A64,AMI_3:10,SCMPDS_2:48;
end;
A65: ( t6 . a ) = ( 0 ) by A20,A38;
then A66: ( t5 . a ) = ( 0 ) by A46;
then ( t4 . a ) = ( 0 ) by A50;
then ( t3 . a ) = ( 0 ) by A59;
then A67: ( t2 . a ) = ( 0 ) by A63;
then A68: ( DataLoc (( t2 . a ),1) ) = ( intpos ( ( 0 ) + 1 ) ) by SCMP_GCD:1;
( mp + 2 ) > 1 by A55,XXREAL_0:2;
then A69: ( t2 . ( SBP ) ) = m1 by A61,A63;
A70:now
let i being (Element of ( NAT ));
assume i <> 1;
then A71: ( intpos i ) <> ( DataLoc (( t2 . a ),1) ) by A67,AMI_3:10,SCMP_GCD:1;
thus ( t1 . ( intpos i ) ) = ( ( Exec (l0,t2) ) . ( intpos i ) ) by SCMPDS_5:41
.= ( t2 . ( intpos i ) ) by A71,SCMPDS_2:48;
end;
hence ( t1 . a ) = ( 0 ) by A67;
A72: ( mp + ( 0 ) ) <> ( mp + 2 );
( mp + ( 0 ) ) <> ( mp + 1 );
then ( t5 . ( intpos mp ) ) = ( t . ( intpos mp ) ) by A39,A46;
then A73: ( t4 . ( intpos mp ) ) = ( t . ( intpos mp ) ) by A50,A72;
thus ( t1 . ( SBP ) ) = ( ( Exec (l0,t2) ) . ( SBP ) ) by SCMPDS_5:41
.= ( m1 + 2 ) by A69,A68,SCMPDS_2:48;
( mp + ( 0 ) ) <> ( mp + 1 );
then ( t3 . ( intpos mp ) ) = ( t . ( intpos mp ) ) by A73,A59;
then ( t2 . ( intpos mp ) ) = ( t . ( intpos mp ) ) by A63,A33;
hence ( t1 . ( intpos mp ) ) = ( t . ( intpos mp ) ) by A70,A34;
A74: ( mp + 1 ) <> ( mp + 2 );
( t4 . ( intpos ( mp + 2 ) ) ) = ( ( Exec (l7,t5) ) . ( intpos ( mp + 2 ) ) ) by SCMPDS_5:41
.= ( t5 . ( DataLoc (( t5 . ( GBP ) ),4) ) ) by A49,SCMPDS_2:47
.= ( t5 . ( intpos ( ( 0 ) + 4 ) ) ) by A66,SCMP_GCD:1
.= ( t . a4 ) by A54,A46,A31;
then A75: ( t3 . ( intpos ( mp + 2 ) ) ) = ( t . a4 ) by A59,A35;
( t5 . ( intpos ( mp + 1 ) ) ) = ( ( Exec (l6,t6) ) . ( intpos ( mp + 1 ) ) ) by SCMPDS_5:42
.= ( t6 . ( DataLoc (( t6 . ( GBP ) ),4) ) ) by A45,SCMPDS_2:47
.= ( t6 . ( intpos ( ( 0 ) + 4 ) ) ) by A65,SCMP_GCD:1
.= ( t . a4 ) by A38,A53;
then A76: ( t4 . ( intpos ( mp + 1 ) ) ) = ( t . a4 ) by A50,A74;
( t3 . ( intpos ( mp + 1 ) ) ) = ( ( Exec (l8,t4) ) . ( intpos ( mp + 1 ) ) ) by SCMPDS_5:41
.= ( ( t . a4 ) + ( - 1 ) ) by A76,A58,SCMPDS_2:48
.= ( ( t . a4 ) - 1 );
then ( t2 . ( intpos ( mp + 1 ) ) ) = ( ( t . a4 ) - 1 ) by A63,A40;
hence ( t1 . ( intpos ( mp + 1 ) ) ) = ( ( t . a4 ) - 1 ) by A70,A32;
( t2 . ( intpos ( mp + 2 ) ) ) = ( ( Exec (l9,t3) ) . ( intpos ( mp + 2 ) ) ) by SCMPDS_5:41
.= ( ( t . a4 ) + 1 ) by A75,A62,SCMPDS_2:48;
hence ( t1 . ( intpos ( mp + 2 ) ) ) = ( ( t . a4 ) + 1 ) by A70,A56;
A77: ( mp + 3 ) <> ( mp + 2 );
( mp + 3 ) <> ( mp + 1 );
then ( t3 . ( intpos ( mp + 3 ) ) ) = ( t . ( intpos ( mp + 1 ) ) ) by A52,A59;
then ( t2 . ( intpos ( mp + 3 ) ) ) = ( t . ( intpos ( mp + 1 ) ) ) by A63,A77;
hence ( t1 . ( intpos ( mp + 3 ) ) ) = ( t . ( intpos ( mp + 1 ) ) ) by A70,A43;
hereby
A78: mp <= ( mp + 3 ) by NAT_1:11;
A79: mp <= ( mp + 2 ) by NAT_1:11;
A80: mp <= ( mp + 1 ) by NAT_1:11;
let i being (Element of ( NAT ));
assume that
A81: i >= 8
and
A82: i < mp;
i > 1 by A81,XXREAL_0:2;
hence ( t1 . ( intpos i ) ) = ( t2 . ( intpos i ) ) by A70
.= ( t3 . ( intpos i ) ) by A63,A82,A79
.= ( t4 . ( intpos i ) ) by A59,A82,A80
.= ( t5 . ( intpos i ) ) by A50,A82,A79
.= ( t6 . ( intpos i ) ) by A46,A82,A80
.= ( t . ( intpos i ) ) by A38,A82,A78;
end;
end;
A83: (for t being ( 0 ) -started (State of ( SCMPDS )) holds (for Q holds (for m,m1,md being (Element of ( NAT )) holds (for n4 being Integer holds (for f1,f2 being (FinSequence of ( INT )) holds ((((((((((((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m1) & m1 = ( m + 1 )) & ( t . ( intpos ( m1 + pn ) ) ) = md) & md >= ( p0 + 1 )) & n4 = ( t . ( intpos ( ( m1 + pn ) + 1 ) ) )) & ( n4 - md ) > ( 0 )) & n4 <= pn) & f1 is_FinSequence_on t,p0) & ( len f1 ) = n) & f2 is_FinSequence_on ( IExec (TR,Q,t) ),p0) & ( len f2 ) = n) implies ((((((( ( IExec (TR,Q,t) ) . a ) = ( 0 ) & ( ( IExec (TR,Q,t) ) . a1 ) = ( m1 + 2 )) & md = ( ( IExec (TR,Q,t) ) . ( intpos ( m1 + pn ) ) )) & n4 = ( ( IExec (TR,Q,t) ) . ( intpos ( ( m1 + pn ) + 3 ) ) )) & (for j being (Element of ( NAT )) holds ((1 <= j & j < m1) implies ( ( IExec (TR,Q,t) ) . ( intpos ( pn + j ) ) ) = ( t . ( intpos ( pn + j ) ) )))) & f1,f2 are_fiberwise_equipotent ) & (ex m4 being (Element of ( NAT )) st ((((((md <= m4 & m4 <= n4) & ( m4 - 1 ) = ( ( IExec (TR,Q,t) ) . ( intpos ( ( m1 + pn ) + 1 ) ) )) & ( m4 + 1 ) = ( ( IExec (TR,Q,t) ) . ( intpos ( ( m1 + pn ) + 2 ) ) )) & (for i being (Element of ( NAT )) holds ((md <= i & i < m4) implies ( ( IExec (TR,Q,t) ) . ( intpos m4 ) ) >= ( ( IExec (TR,Q,t) ) . ( intpos i ) )))) & (for i being (Element of ( NAT )) holds ((m4 < i & i <= n4) implies ( ( IExec (TR,Q,t) ) . ( intpos m4 ) ) <= ( ( IExec (TR,Q,t) ) . ( intpos i ) )))) & (for j being (Element of ( NAT )) holds (((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n ))) implies ( ( IExec (TR,Q,t) ) . ( intpos j ) ) = ( t . ( intpos j ) ))))))))))))
proof
let t being ( 0 ) -started (State of ( SCMPDS ));
let Q;
let m being (Element of ( NAT ));
let m1 being (Element of ( NAT ));
let md being (Element of ( NAT ));
let n4 being Integer;
let f1 being (FinSequence of ( INT ));
let f2 being (FinSequence of ( INT ));
I: ( Initialize t ) = t by MEMSTR_0:44;
set t1 = ( IExec (TR,Q,t) );
set lPt = ( ( l3 ';' l4 ) ';' Pt );
set t2 = ( IExec (lPt,Q,t) );
set Q2 = Q;
set t4 = ( IExec (( l3 ';' l4 ),Q,t) );
set mp = ( m1 + pn );
set Q4 = Q;
A84: ( t4 . a ) = ( ( Initialize t4 ) . a ) by SCMPDS_5:15;
A85: ( t4 . a2 ) = ( ( Initialize t4 ) . a2 ) by SCMPDS_5:15;
A86: ( t4 . a4 ) = ( ( Initialize t4 ) . a4 ) by SCMPDS_5:15;
A87: ( t4 . a1 ) = ( ( Initialize t4 ) . a1 ) by SCMPDS_5:15;
set tp = ( IExec (Pt,Q4,( Initialize t4 )) );
assume that
A89: ( t . a ) = ( 0 )
and
A90: ( t . ( SBP ) ) = m1
and
A91: m1 = ( m + 1 )
and
A92: ( t . ( intpos mp ) ) = md
and
A93: md >= ( p0 + 1 )
and
A94: n4 = ( t . ( intpos ( mp + 1 ) ) )
and
A95: ( n4 - md ) > ( 0 )
and
A96: n4 <= pn;
A97: ( t4 . a ) = ( 0 ) by A6,A89,A90,I;
assume that
A98: f1 is_FinSequence_on t,p0
and
A99: ( len f1 ) = n;
A100: ( p0 + 1 ) >= ( 7 + 1 ) by A4,XREAL_1:6;
A101:now
let i being (Element of ( NAT ));
assume that
A102: 1 <= i
and
A103: i <= ( len f1 );
( p0 + i ) >= ( p0 + 1 ) by A102,XREAL_1:6;
then A104: ( p0 + i ) >= 8 by A100,XXREAL_0:2;
then A105: ( p0 + i ) > 2 by XXREAL_0:2;
A106: ( p0 + i ) > 4 by A104,XXREAL_0:2;
thus ( f1 . i ) = ( t . ( intpos ( p0 + i ) ) ) by A98,A102,A103,SCPISORT:def 1
.= ( t4 . ( intpos ( p0 + i ) ) ) by A6,A89,A90,A105,A106,I;
end;
A107: ( t4 . a4 ) = n4 by A6,A89,A90,A94,I;
A108: ( t4 . a4 ) = ( t . ( intpos ( mp + 1 ) ) ) by A6,A89,A90,I;
A109: ( t4 . a2 ) = ( t . ( intpos mp ) ) by A6,A89,A90,I;
then Pt is_closed_on ( Initialize t4 ),Q4 by A4,A92,A93,A97,CKB21:1,A84,A85;
then A110: Pt is_closed_on t4,Q4 by SCMPDS_6:125;
Pt is_halting_on ( Initialize t4 ),Q4 by A4,A92,A93,A109,A97,CKB21:1,A84,A85;
then A111: Pt is_halting_on t4,Q4 by SCMPDS_6:126;
then A112: lPt is_closed_on t,Q by A110,I,SCPISORT:9;
assume that
A113: f2 is_FinSequence_on ( IExec (TR,Q,t) ),p0
and
A114: ( len f2 ) = n;
consider f4 being (FinSequence of ( INT )) such that A115: ( len f4 ) = n and A116: (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len f4 )) implies ( f4 . i ) = ( tp . ( intpos ( p0 + i ) ) ))) by SCPISORT:1;
A117: f1 is_FinSequence_on ( Initialize t4 ),p0
proof
let i being (Element of ( NAT ));
assume (1 <= i & i <= ( len f1 ));
then ( f1 . i ) = ( t4 . ( intpos ( p0 + i ) ) ) by A101;
hence thesis by SCMPDS_5:15;
end;
A118: f4 is_FinSequence_on tp,p0 by A116,SCPISORT:def 1;
then consider m4 being (Element of ( NAT )) such that A119: m4 = ( tp . a4 ) and A120: md <= m4 and A121: m4 <= ( t4 . a4 ) and A122: (for i being (Element of ( NAT )) holds ((md <= i & i < m4) implies ( tp . ( intpos m4 ) ) >= ( tp . ( intpos i ) ))) and A123: (for i being (Element of ( NAT )) holds ((m4 < i & i <= ( t4 . a4 )) implies ( tp . ( intpos m4 ) ) <= ( tp . ( intpos i ) ))) and A124: (for i being (Element of ( NAT )) holds ((i >= ( p0 + 1 ) & (i < ( t4 . a2 ) or i > ( t4 . a4 ))) implies ( tp . ( intpos i ) ) = ( ( Initialize t4 ) . ( intpos i ) ))) by A4,A92,A93,A94,A95,A96,A99,A109,A108,A97,A117,A115,CKB22:1,A84,A85,A86;
( tp . a ) = ( 0 ) by A4,A92,A93,A94,A95,A96,A99,A109,A108,A97,A117,A115,A118,CKB22:1,A84,A85,A86;
then A125: ( t2 . a ) = ( 0 ) by A110,A111,SCPISORT:7;
A126: lPt is_halting_on t,Q by A110,A111,I,SCPISORT:9;
( tp . a1 ) = ( t4 . a1 ) by A4,A92,A93,A94,A95,A96,A99,A109,A108,A97,A117,A115,A118,CKB22:1,A84,A85,A86,A87;
then A127: ( t2 . ( SBP ) ) = ( t4 . a1 ) by A110,A111,SCPISORT:7
.= m1 by A6,A89,A90,I;
then A128: ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos mp ) ) = ( t2 . ( intpos mp ) ) by A19,A91,A125;
( ( IExec (L5,Q2,( Initialize t2 )) ) . a ) = ( 0 ) by A19,A91,A125,A127;
hence ( t1 . a ) = ( 0 ) by A112,A126,SCPISORT:6;
( ( IExec (L5,Q2,( Initialize t2 )) ) . ( SBP ) ) = ( m1 + 2 ) by A19,A91,A125,A127;
hence ( t1 . a1 ) = ( m1 + 2 ) by A112,A126,SCPISORT:6;
A129: ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos ( mp + 3 ) ) ) = ( t2 . ( intpos ( mp + 1 ) ) ) by A19,A91,A125,A127;
A130: ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos ( mp + 2 ) ) ) = ( ( t2 . a4 ) + 1 ) by A19,A91,A125,A127;
A131: ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos ( mp + 1 ) ) ) = ( ( t2 . a4 ) - 1 ) by A19,A91,A125,A127;
A132: ( 1 + pn ) > pn by XREAL_1:29;
A133: m1 >= 1 by A91,NAT_1:11;
then mp >= ( 1 + pn ) by XREAL_1:6;
then A134: mp > pn by A132,XXREAL_0:2;
then A135: mp > ( t4 . a4 ) by A96,A107,XXREAL_0:2;
then A136: m4 < mp by A121,XXREAL_0:2;
A137: ( dom f2 ) = ( Seg n ) by A114,FINSEQ_1:def 3;
A138:now
let i being Nat;
reconsider a = i as (Element of ( NAT )) by ORDINAL1:def 12;
assume A139: i in ( dom f2 );
then A140: 1 <= i by A137,FINSEQ_1:1;
then ( p0 + i ) >= ( p0 + 1 ) by XREAL_1:6;
then A141: ( p0 + i ) >= 8 by A100,XXREAL_0:2;
A142: i <= n by A137,A139,FINSEQ_1:1;
then ( p0 + i ) <= pn by XREAL_1:6;
then A143: ( p0 + i ) < mp by A134,XXREAL_0:2;
thus ( f2 . i ) = ( t1 . ( intpos ( p0 + a ) ) ) by A113,A114,A140,A142,SCPISORT:def 1
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos ( p0 + a ) ) ) by A112,A126,SCPISORT:6
.= ( t2 . ( intpos ( p0 + a ) ) ) by A19,A91,A125,A127,A141,A143
.= ( tp . ( intpos ( p0 + a ) ) ) by A110,A111,SCPISORT:7
.= ( f4 . i ) by A115,A116,A140,A142;
end;
A144: mp >= ( 1 + 7 ) by A5,A133,XREAL_1:7;
then A145: mp > 4 by XXREAL_0:2;
A146: ( mp + 1 ) > mp by XREAL_1:29;
then A147: ( mp + 1 ) > ( t4 . a4 ) by A135,XXREAL_0:2;
A148: pn >= p0 by NAT_1:11;
then A149: mp >= ( p0 + 1 ) by A133,XREAL_1:7;
then A150: ( mp + 1 ) >= ( p0 + 1 ) by A146,XXREAL_0:2;
A151: ( mp + 1 ) >= ( 8 + 1 ) by A144,XREAL_1:6;
then A152: ( mp + 1 ) > 4 by XXREAL_0:2;
A153: ( t4 . ( intpos mp ) ) = ( ( Initialize t4 ) . ( intpos mp ) ) by SCMPDS_5:15;
A154: ( t4 . ( intpos ( mp + 1 ) ) ) = ( ( Initialize t4 ) . ( intpos ( mp + 1 ) ) ) by SCMPDS_5:15;
mp > 2 by A144,XXREAL_0:2;
hence md = ( t4 . ( intpos mp ) ) by A6,A89,A90,A92,A145,I
.= ( tp . ( intpos mp ) ) by A124,A149,A135,A153
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos mp ) ) by A110,A111,A128,SCPISORT:7
.= ( t1 . ( intpos mp ) ) by A112,A126,SCPISORT:6;
( mp + 1 ) > 2 by A151,XXREAL_0:2;
hence n4 = ( t4 . ( intpos ( mp + 1 ) ) ) by A6,A89,A90,A94,A152,I
.= ( tp . ( intpos ( mp + 1 ) ) ) by A124,A150,A147,A154
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos ( mp + 3 ) ) ) by A110,A111,A129,SCPISORT:7
.= ( t1 . ( intpos ( mp + 3 ) ) ) by A112,A126,SCPISORT:6;
hereby
let j being (Element of ( NAT ));
assume that
A155: 1 <= j
and
A156: j < m1;
A157: ( pn + j ) < mp by A156,XREAL_1:6;
( pn + j ) >= ( pn + 1 ) by A155,XREAL_1:6;
then ( pn + j ) > pn by A132,XXREAL_0:2;
then A158: ( pn + j ) > ( t4 . a4 ) by A96,A107,XXREAL_0:2;
A159: ( pn + j ) >= ( p0 + 1 ) by A148,A155,XREAL_1:7;
A160: ( pn + j ) >= ( 1 + 7 ) by A5,A155,XREAL_1:7;
then A161: ( pn + j ) > 2 by XXREAL_0:2;
A162: ( pn + j ) > 4 by A160,XXREAL_0:2;
A163: ( t4 . ( intpos ( pn + j ) ) ) = ( ( Initialize t4 ) . ( intpos ( pn + j ) ) ) by SCMPDS_5:15;
thus ( t1 . ( intpos ( pn + j ) ) ) = ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos ( pn + j ) ) ) by A112,A126,SCPISORT:6
.= ( t2 . ( intpos ( pn + j ) ) ) by A19,A91,A125,A127,A160,A157
.= ( tp . ( intpos ( pn + j ) ) ) by A110,A111,SCPISORT:7
.= ( t4 . ( intpos ( pn + j ) ) ) by A124,A159,A158,A163
.= ( t . ( intpos ( pn + j ) ) ) by A6,A89,A90,A161,A162,I;
end;
f1,f4 are_fiberwise_equipotent  by A4,A92,A93,A94,A95,A96,A99,A109,A108,A97,A117,A115,A118,CKB22:1,A84,A85,A86;
hence f1,f2 are_fiberwise_equipotent  by A114,A115,A138,FINSEQ_2:9;
take m4;
thus (md <= m4 & m4 <= n4) by A6,A89,A90,A94,A120,A121,I;
thus ( m4 - 1 ) = ( ( t2 . a4 ) - 1 ) by A119,A110,A111,SCPISORT:7
.= ( t1 . ( intpos ( mp + 1 ) ) ) by A112,A126,A131,SCPISORT:6;
thus ( m4 + 1 ) = ( ( t2 . a4 ) + 1 ) by A119,A110,A111,SCPISORT:7
.= ( t1 . ( intpos ( mp + 2 ) ) ) by A112,A126,A130,SCPISORT:6;
A164: md >= 8 by A93,A100,XXREAL_0:2;
then A165: m4 >= 8 by A120,XXREAL_0:2;
hereby
A166: ( tp . ( intpos m4 ) ) = ( t2 . ( intpos m4 ) ) by A110,A111,SCPISORT:7
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos m4 ) ) by A19,A91,A125,A127,A136,A165
.= ( t1 . ( intpos m4 ) ) by A112,A126,SCPISORT:6;
let i being (Element of ( NAT ));
assume that
A167: md <= i
and
A168: i < m4;
A169: i < mp by A136,A168,XXREAL_0:2;
A170: i >= 8 by A164,A167,XXREAL_0:2;
( tp . ( intpos i ) ) = ( t2 . ( intpos i ) ) by A110,A111,SCPISORT:7
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos i ) ) by A19,A91,A125,A127,A169,A170
.= ( t1 . ( intpos i ) ) by A112,A126,SCPISORT:6;
hence ( t1 . ( intpos m4 ) ) >= ( t1 . ( intpos i ) ) by A122,A167,A168,A166;
end;
hereby
A171: ( tp . ( intpos m4 ) ) = ( t2 . ( intpos m4 ) ) by A110,A111,SCPISORT:7
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos m4 ) ) by A19,A91,A125,A127,A136,A165
.= ( t1 . ( intpos m4 ) ) by A112,A126,SCPISORT:6;
let i being (Element of ( NAT ));
assume that
A172: m4 < i
and
A173: i <= n4;
A174: i < mp by A94,A108,A135,A173,XXREAL_0:2;
i >= md by A120,A172,XXREAL_0:2;
then A175: i >= 8 by A164,XXREAL_0:2;
( tp . ( intpos i ) ) = ( t2 . ( intpos i ) ) by A110,A111,SCPISORT:7
.= ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos i ) ) by A19,A91,A125,A127,A174,A175
.= ( t1 . ( intpos i ) ) by A112,A126,SCPISORT:6;
hence ( t1 . ( intpos m4 ) ) <= ( t1 . ( intpos i ) ) by A107,A123,A172,A173,A171;
end;
hereby
let j being (Element of ( NAT ));
assume that
A176: ((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= pn));
A177:now
per cases  by A176;
suppose A178: (( p0 + 1 ) <= j & j < md);

hence (j >= ( p0 + 1 ) & (j < ( t4 . a2 ) or j > ( t4 . a4 ))) by A6,A89,A90,A92,I;
md < mp by A120,A136,XXREAL_0:2;
hence j < mp by A178,XXREAL_0:2;
end;
suppose A179: (n4 < j & j <= pn);

n4 >= md by A107,A120,A121,XXREAL_0:2;
then j >= md by A179,XXREAL_0:2;
hence j >= ( p0 + 1 ) by A93,XXREAL_0:2;
thus (j < ( t4 . a2 ) or j > ( t4 . a4 )) by A6,A89,A90,A94,A179,I;
thus j < mp by A134,A179,XXREAL_0:2;
end;
end;
then A180: j >= 8 by A100,XXREAL_0:2;
then A181: j > 2 by XXREAL_0:2;
A182: j > 4 by A180,XXREAL_0:2;
A183: ( t4 . ( intpos j ) ) = ( ( Initialize t4 ) . ( intpos j ) ) by SCMPDS_5:15;
thus ( t1 . ( intpos j ) ) = ( ( IExec (L5,Q2,( Initialize t2 )) ) . ( intpos j ) ) by A112,A126,SCPISORT:6
.= ( t2 . ( intpos j ) ) by A19,A91,A125,A127,A177,A180
.= ( tp . ( intpos j ) ) by A110,A111,SCPISORT:7
.= ( t4 . ( intpos j ) ) by A124,A177,A183
.= ( t . ( intpos j ) ) by A6,A89,A90,A181,A182,I;
end;
end;
A184: (for t being (State of ( SCMPDS )) holds (for Q holds (for m being (Element of ( NAT )) holds ((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m) implies (( ( IExec (( l1 ';' l2 ),Q,( Initialize t )) ) . a2 ) = ( ( t . ( intpos ( ( m + pn ) + 1 ) ) ) - ( t . ( intpos ( m + pn ) ) ) ) & (for i being (Element of ( NAT )) holds (i <> 2 implies ( ( IExec (( l1 ';' l2 ),Q,( Initialize t )) ) . ( intpos i ) ) = ( t . ( intpos i ) ))))))))
proof
let t being (State of ( SCMPDS ));
let Q;
let m being (Element of ( NAT ));
assume that
A185: ( t . a ) = ( 0 )
and
A186: ( t . ( SBP ) ) = m;
set t0 = ( Initialize t );
set t1 = ( IExec (( l1 ';' l2 ),Q,( Initialize t )) );
set t2 = ( Exec (l1,t0) );
set mp = ( m + pn );
A188: ( t0 . a ) = ( 0 ) by A185,SCMPDS_5:15;
then A189: ( DataLoc (( t0 . a ),2) ) = ( intpos ( ( 0 ) + 2 ) ) by SCMP_GCD:1;
then ( t2 . a ) = ( 0 ) by A188,AMI_3:10,SCMPDS_2:47;
then A190: ( DataLoc (( t2 . a ),2) ) = ( intpos ( ( 0 ) + 2 ) ) by SCMP_GCD:1;
A191: ( t0 . ( SBP ) ) = m by A186,SCMPDS_5:15;
then A192: ( t2 . ( SBP ) ) = m by A189,AMI_3:10,SCMPDS_2:47;
mp >= ( ( 0 ) + 7 ) by A5,XREAL_1:7;
then mp > 2 by XXREAL_0:2;
then A193: ( t2 . ( intpos mp ) ) = ( t0 . ( intpos mp ) ) by A189,AMI_3:10,SCMPDS_2:47
.= ( t . ( intpos mp ) ) by SCMPDS_5:15;
A194: ( t2 . a2 ) = ( t0 . ( DataLoc (( t0 . ( SBP ) ),( pn + 1 )) ) ) by A189,SCMPDS_2:47
.= ( t0 . ( intpos ( m + ( pn + 1 ) ) ) ) by A191,SCMP_GCD:1
.= ( t . ( intpos ( mp + 1 ) ) ) by SCMPDS_5:15;
thus ( t1 . a2 ) = ( ( Exec (l2,t2) ) . a2 ) by SCMPDS_5:42
.= ( ( t2 . a2 ) - ( t2 . ( DataLoc (( t2 . ( SBP ) ),pn) ) ) ) by A190,SCMPDS_2:50
.= ( ( t . ( intpos ( mp + 1 ) ) ) - ( t . ( intpos mp ) ) ) by A192,A194,A193,SCMP_GCD:1;
hereby
let i being (Element of ( NAT ));
assume A195: i <> 2;
thus ( t1 . ( intpos i ) ) = ( ( Exec (l2,t2) ) . ( intpos i ) ) by SCMPDS_5:42
.= ( t2 . ( intpos i ) ) by A190,A195,AMI_3:10,SCMPDS_2:50
.= ( t0 . ( intpos i ) ) by A189,A195,AMI_3:10,SCMPDS_2:47
.= ( t . ( intpos i ) ) by SCMPDS_5:15;
end;
end;
A196: ( pn + 1 ) >= ( 7 + 1 ) by A5,XREAL_1:6;
A197: (for t being ( 0 ) -started (State of ( SCMPDS )) holds (for Q holds (for m being (Element of ( NAT )) holds (((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m) & ( t . ( intpos ( ( m + pn ) + 1 ) ) ) <= ( t . ( intpos ( m + pn ) ) )) implies (((( ( IExec (WB4,Q,t) ) . a ) = ( 0 ) & ( ( IExec (WB4,Q,t) ) . a1 ) = ( m - 2 )) & (for j being (Element of ( NAT )) holds ((1 <= j & j < m) implies ( ( IExec (WB4,Q,t) ) . ( intpos ( pn + j ) ) ) = ( t . ( intpos ( pn + j ) ) )))) & (for j being (Element of ( NAT )) holds ((1 <= j & j <= n) implies ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + j ) ) ) = ( t . ( intpos ( p0 + j ) ) ))))))))
proof
let t being ( 0 ) -started (State of ( SCMPDS ));
let Q;
let m being (Element of ( NAT ));
set mp = ( m + pn );
set t1 = ( IExec (( l1 ';' l2 ),Q,t) );
set Q1 = Q;
I: ( Initialize t ) = t by MEMSTR_0:44;
assume that
A198: ( t . a ) = ( 0 )
and
A199: ( t . ( SBP ) ) = m
and
A200: ( t . ( intpos ( mp + 1 ) ) ) <= ( t . ( intpos mp ) );
A201: ( t1 . a1 ) = m by A184,A198,A199,I;
A202: ( t1 . a2 ) = ( ( t . ( intpos ( mp + 1 ) ) ) - ( t . ( intpos mp ) ) ) by A184,A198,A199,I;
then A203: ( t1 . a2 ) <= ( 0 ) by A200,XREAL_1:47;
set li = ( AddTo (( GBP ),1,( - 2 )) );
set t0 = ( Initialize t1 );
A204: lb is_halting_on t1,Q1 by SCMPDS_6:21;
A205: ( t1 . a ) = ( 0 ) by A184,A198,A199,I;
then A206: ( DataLoc (( t1 . a ),2) ) = ( intpos ( ( 0 ) + 2 ) ) by SCMP_GCD:1;
A207: ( t0 . a ) = ( 0 ) by A205,SCMPDS_5:15;
then A208: ( DataLoc (( t0 . a ),1) ) = ( intpos ( ( 0 ) + 1 ) ) by SCMP_GCD:1;
A209: lb is_closed_on t1,Q1 by SCMPDS_6:20;
then A210: IF4 is_halting_on t1,Q1 by A206,A203,A204,SCMPDS_6:69;
A211: IF4 is_closed_on t1,Q1 by A206,A203,A209,A204,SCMPDS_6:69;
A212:now
let x;
X1: ( ( Initialize t1 ) . ( GBP ) ) = ( t1 . ( GBP ) ) by SCMPDS_5:15;
X2: ( ( Initialize t1 ) . ( DataLoc (( t1 . ( GBP ) ),2) ) ) = ( t1 . ( DataLoc (( t1 . ( GBP ) ),2) ) ) by SCMPDS_5:15;
thus ( ( IExec (WB4,Q,t) ) . x ) = ( ( IExec (IF4,Q1,( Initialize t1 )) ) . x ) by A211,A210,SCPISORT:7
.= ( ( IExec (lb,Q1,( Initialize t1 )) ) . x ) by A200,A202,A206,X1,X2,SCMPDS_6:74,XREAL_1:47
.= ( ( Exec (li,t0) ) . x ) by SCMPDS_5:40;
end;
A213:now
let i being (Element of ( NAT ));
assume i <> 1;
then A214: ( intpos i ) <> ( DataLoc (( t0 . a ),1) ) by A207,AMI_3:10,SCMP_GCD:1;
thus ( ( IExec (WB4,Q,t) ) . ( intpos i ) ) = ( ( Exec (li,t0) ) . ( intpos i ) ) by A212
.= ( t0 . ( intpos i ) ) by A214,SCMPDS_2:48
.= ( t1 . ( intpos i ) ) by SCMPDS_5:15;
end;
hence ( ( IExec (WB4,Q,t) ) . a ) = ( 0 ) by A205;
thus ( ( IExec (WB4,Q,t) ) . a1 ) = ( ( Exec (li,t0) ) . a1 ) by A212
.= ( ( t0 . a1 ) + ( - 2 ) ) by A208,SCMPDS_2:48
.= ( ( t0 . a1 ) - 2 )
.= ( m - 2 ) by A201,SCMPDS_5:15;
hereby
let j being (Element of ( NAT ));
assume that
A215: 1 <= j
and
j < m;
( pn + j ) >= ( pn + 1 ) by A215,XREAL_1:6;
then A216: ( pn + j ) >= 8 by A196,XXREAL_0:2;
then A217: ( pn + j ) > 2 by XXREAL_0:2;
( pn + j ) > 1 by A216,XXREAL_0:2;
hence ( ( IExec (WB4,Q,t) ) . ( intpos ( pn + j ) ) ) = ( t1 . ( intpos ( pn + j ) ) ) by A213
.= ( t . ( intpos ( pn + j ) ) ) by A184,A198,A199,A217,I;
end;
hereby
let j being (Element of ( NAT ));
assume that
A218: 1 <= j
and
j <= n;
A219: ( p0 + 1 ) >= ( 7 + 1 ) by A4,XREAL_1:6;
( p0 + j ) >= ( p0 + 1 ) by A218,XREAL_1:6;
then A220: ( p0 + j ) >= 8 by A219,XXREAL_0:2;
then A221: ( p0 + j ) > 2 by XXREAL_0:2;
( p0 + j ) > 1 by A220,XXREAL_0:2;
hence ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + j ) ) ) = ( t1 . ( intpos ( p0 + j ) ) ) by A213
.= ( t . ( intpos ( p0 + j ) ) ) by A184,A198,A199,A221,I;
end;
end;
A222: (for t being (State of ( SCMPDS )) holds (for Q holds (for m1,md being (Element of ( NAT )) holds (((((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m1) & ( t . ( intpos ( m1 + pn ) ) ) = md) & md >= ( p0 + 1 )) & ( ( t . ( intpos ( ( m1 + pn ) + 1 ) ) ) - md ) > ( 0 )) implies (TR is_closed_on t,Q & TR is_halting_on t,Q)))))
proof
let t being (State of ( SCMPDS ));
let Q;
let m1 being (Element of ( NAT ));
let md being (Element of ( NAT ));
set lPt = ( ( l3 ';' l4 ) ';' Pt );
set t2 = ( IExec (( l3 ';' l4 ),Q,( Initialize t )) );
set mp = ( m1 + pn );
set Q2 = Q;
A223: ( t2 . a ) = ( ( Initialize t2 ) . a ) by SCMPDS_5:15;
A224: ( t2 . a2 ) = ( ( Initialize t2 ) . a2 ) by SCMPDS_5:15;
assume that
A225: ( t . a ) = ( 0 )
and
A226: ( t . ( SBP ) ) = m1
and
A227: ( t . ( intpos mp ) ) = md
and
A228: md >= ( p0 + 1 )
and
( ( t . ( intpos ( mp + 1 ) ) ) - md ) > ( 0 );
A229: ( t2 . a ) = ( 0 ) by A6,A225,A226;
A230: ( t2 . a2 ) = ( t . ( intpos mp ) ) by A6,A225,A226;
then Pt is_halting_on ( Initialize t2 ),Q2 by A4,A227,A228,A229,CKB21:1,A223,A224;
then A231: Pt is_halting_on t2,Q2 by SCMPDS_6:126;
Pt is_closed_on ( Initialize t2 ),Q2 by A4,A227,A228,A230,A229,CKB21:1,A223,A224;
then A232: Pt is_closed_on t2,Q2 by SCMPDS_6:125;
then A233: lPt is_halting_on t,Q by A231,SCPISORT:9;
lPt is_closed_on t,Q by A232,A231,SCPISORT:9;
hence thesis by A233,SCPISORT:8;
end;
A234: (for t being ( 0 ) -started (State of ( SCMPDS )) holds (for Q holds (for m,m1,md being (Element of ( NAT )) holds (for n4 being Integer holds (for f1,f2 being (FinSequence of ( INT )) holds ((((((((((((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m1) & m1 = ( m + 1 )) & ( t . ( intpos ( m1 + pn ) ) ) = md) & md >= ( p0 + 1 )) & n4 = ( t . ( intpos ( ( m1 + pn ) + 1 ) ) )) & ( n4 - md ) > ( 0 )) & n4 <= pn) & f1 is_FinSequence_on t,p0) & ( len f1 ) = n) & f2 is_FinSequence_on ( IExec (WB4,Q,t) ),p0) & ( len f2 ) = n) implies ((((((( ( IExec (WB4,Q,t) ) . a ) = ( 0 ) & ( ( IExec (WB4,Q,t) ) . a1 ) = ( m1 + 2 )) & md = ( ( IExec (WB4,Q,t) ) . ( intpos ( m1 + pn ) ) )) & n4 = ( ( IExec (WB4,Q,t) ) . ( intpos ( ( m1 + pn ) + 3 ) ) )) & (for j being (Element of ( NAT )) holds ((1 <= j & j < m1) implies ( ( IExec (WB4,Q,t) ) . ( intpos ( pn + j ) ) ) = ( t . ( intpos ( pn + j ) ) )))) & f1,f2 are_fiberwise_equipotent ) & (ex m4 being (Element of ( NAT )) st ((((((md <= m4 & m4 <= n4) & ( m4 - 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( ( m1 + pn ) + 1 ) ) )) & ( m4 + 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( ( m1 + pn ) + 2 ) ) )) & (for i being (Element of ( NAT )) holds ((md <= i & i < m4) implies ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) >= ( ( IExec (WB4,Q,t) ) . ( intpos i ) )))) & (for i being (Element of ( NAT )) holds ((m4 < i & i <= n4) implies ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) <= ( ( IExec (WB4,Q,t) ) . ( intpos i ) )))) & (for j being (Element of ( NAT )) holds (((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n ))) implies ( ( IExec (WB4,Q,t) ) . ( intpos j ) ) = ( t . ( intpos j ) ))))))))))))
proof
let t being ( 0 ) -started (State of ( SCMPDS ));
let Q;
let m being (Element of ( NAT ));
let m1 being (Element of ( NAT ));
let md being (Element of ( NAT ));
let n4 being Integer;
let f1 being (FinSequence of ( INT ));
let f2 being (FinSequence of ( INT ));
I: ( Initialize t ) = t by MEMSTR_0:44;
set mp = ( m1 + pn );
set t1 = ( IExec (( l1 ';' l2 ),Q,t) );
set Q1 = Q;
assume that
A235: ( t . a ) = ( 0 )
and
A236: ( t . ( SBP ) ) = m1
and
A237: m1 = ( m + 1 )
and
A238: ( t . ( intpos mp ) ) = md
and
A239: md >= ( p0 + 1 )
and
A240: n4 = ( t . ( intpos ( mp + 1 ) ) )
and
A241: ( n4 - md ) > ( 0 )
and
A242: n4 <= pn;
A243: ( t1 . a2 ) > ( 0 ) by A184,A235,A236,A238,A240,A241,I;
A244: mp >= ( ( 0 ) + 7 ) by A5,XREAL_1:7;
then mp > 2 by XXREAL_0:2;
then A245: ( t1 . ( intpos mp ) ) = md by A184,A235,A236,A238,I;
assume that
A246: f1 is_FinSequence_on t,p0
and
A247: ( len f1 ) = n;
A248: ( p0 + 1 ) >= ( 7 + 1 ) by A4,XREAL_1:6;
now
let i being (Element of ( NAT ));
assume that
A249: 1 <= i
and
A250: i <= ( len f1 );
( p0 + i ) >= ( p0 + 1 ) by A249,XREAL_1:6;
then ( p0 + i ) >= 8 by A248,XXREAL_0:2;
then A251: ( p0 + i ) > 2 by XXREAL_0:2;
thus ( f1 . i ) = ( t . ( intpos ( p0 + i ) ) ) by A246,A249,A250,SCPISORT:def 1
.= ( t1 . ( intpos ( p0 + i ) ) ) by A184,A235,A236,A251,I;
end;
then A252: f1 is_FinSequence_on t1,p0 by SCPISORT:def 1;
( mp + 1 ) >= ( 7 + 1 ) by A244,XREAL_1:6;
then ( mp + 1 ) > 2 by XXREAL_0:2;
then A253: n4 = ( t1 . ( intpos ( mp + 1 ) ) ) by A184,A235,A236,A240,I;
A254: ( t1 . a ) = ( 0 ) by A184,A235,A236,I;
then A255: ( DataLoc (( t1 . a ),2) ) = ( intpos ( ( 0 ) + 2 ) ) by SCMP_GCD:1;
A256: ( t1 . ( SBP ) ) = m1 by A184,A235,A236,I;
then A257: TR is_halting_on t1,Q1 by A222,A239,A241,A245,A253,A254;
B257: TR is_halting_on ( Initialize t1 ),Q1
proof
( Q1 +* ( stop TR ) ) halts_on ( Initialize ( Initialize t1 ) ) by A257,SCMPDS_6:def 3;
hence thesis by SCMPDS_6:def 3;
end;
X1: ( ( Initialize t1 ) . ( GBP ) ) = ( t1 . ( GBP ) ) by SCMPDS_5:15;
X2: ( ( Initialize t1 ) . ( DataLoc (( t1 . ( GBP ) ),2) ) ) = ( t1 . ( DataLoc (( t1 . ( GBP ) ),2) ) ) by SCMPDS_5:15;
A258: TR is_closed_on t1,Q1 by A222,A239,A241,A256,A245,A253,A254;
B258: TR is_closed_on ( Initialize t1 ),Q1
proof
(for k being (Element of ( NAT )) holds ( IC ( Comput (( Q1 +* ( stop TR ) ),( Initialize ( Initialize t1 ) ),k) ) ) in ( dom ( stop TR ) )) by A258,SCMPDS_6:def 2;
hence thesis by SCMPDS_6:def 2;
end;
then A259: IF4 is_halting_on ( Initialize t1 ),Q1 by A255,A243,X1,X2,B257,SCMPDS_6:68;
B259: IF4 is_halting_on t1,Q1
proof
( Q1 +* ( stop IF4 ) ) halts_on ( Initialize ( Initialize t1 ) ) by A259,SCMPDS_6:def 3;
hence thesis by SCMPDS_6:def 3;
end;
assume that
A260: f2 is_FinSequence_on ( IExec (WB4,Q,t) ),p0
and
A261: ( len f2 ) = n;
A262: IF4 is_closed_on ( Initialize t1 ),Q1 by A255,A243,X1,X2,B257,B258,SCMPDS_6:68;
B262: IF4 is_closed_on t1,Q1
proof
(for k being (Element of ( NAT )) holds ( IC ( Comput (( Q1 +* ( stop IF4 ) ),( Initialize ( Initialize t1 ) ),k) ) ) in ( dom ( stop IF4 ) )) by A262,SCMPDS_6:def 2;
hence thesis by SCMPDS_6:def 2;
end;
A263:now
let x;
thus ( ( IExec (WB4,Q,t) ) . x ) = ( ( IExec (IF4,Q1,( Initialize t1 )) ) . x ) by B262,B259,SCPISORT:7
.= ( ( IExec (TR,Q1,( Initialize t1 )) ) . x ) by A255,A243,CKB2:1,X1,X2,B258,B257;
end;
now
let i being (Element of ( NAT ));
assume that
A264: 1 <= i
and
A265: i <= ( len f2 );
thus ( f2 . i ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + i ) ) ) by A260,A264,A265,SCPISORT:def 1
.= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos ( p0 + i ) ) ) by A263;
end;
then A266: f2 is_FinSequence_on ( IExec (TR,Q1,( Initialize t1 )) ),p0 by SCPISORT:def 1;
X1: ( ( Initialize t1 ) . ( SBP ) ) = ( t1 . ( SBP ) ) by SCMPDS_5:15;
X2: ( ( Initialize t1 ) . a ) = ( t1 . a ) by SCMPDS_5:15;
X3: ( ( Initialize t1 ) . ( intpos ( m1 + pn ) ) ) = ( t1 . ( intpos ( m1 + pn ) ) ) by SCMPDS_5:15;
X4: ( ( Initialize t1 ) . ( intpos ( ( m1 + pn ) + 1 ) ) ) = ( t1 . ( intpos ( ( m1 + pn ) + 1 ) ) ) by SCMPDS_5:15;
X5: f1 is_FinSequence_on ( Initialize t1 ),p0
proof
let i being (Element of ( NAT ));
assume (1 <= i & i <= ( len f1 ));
then ( f1 . i ) = ( t1 . ( intpos ( p0 + i ) ) ) by A252,SCPISORT:def 1;
hence thesis by SCMPDS_5:15;
end;
( ( IExec (TR,Q1,( Initialize t1 )) ) . a ) = ( 0 ) by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,X1,X2,X3,X4,X5;
hence ( ( IExec (WB4,Q,t) ) . a ) = ( 0 ) by A263;
consider m4 being (Element of ( NAT )) such that A267: md <= m4 and A268: m4 <= n4 and A269: ( m4 - 1 ) = ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos ( mp + 1 ) ) ) and A270: ( m4 + 1 ) = ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos ( mp + 2 ) ) ) and A271: (for i being (Element of ( NAT )) holds ((md <= i & i < m4) implies ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos m4 ) ) >= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos i ) ))) and A272: (for i being (Element of ( NAT )) holds ((m4 < i & i <= n4) implies ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos m4 ) ) <= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos i ) ))) and B273: (for j being (Element of ( NAT )) holds (((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n ))) implies ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos j ) ) = ( ( Initialize t1 ) . ( intpos j ) ))) by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,X1,X2,X3,X4,X5;
A273: (for j being (Element of ( NAT )) holds (((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n ))) implies ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos j ) ) = ( t1 . ( intpos j ) )))
proof
let j being (Element of ( NAT ));
assume ((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n )));
then ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos j ) ) = ( ( Initialize t1 ) . ( intpos j ) ) by B273;
hence thesis by SCMPDS_5:15;
end;
( ( IExec (TR,Q1,( Initialize t1 )) ) . a1 ) = ( m1 + 2 ) by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,X1,X2,X3,X4,X5;
hence ( ( IExec (WB4,Q,t) ) . a1 ) = ( m1 + 2 ) by A263;
md = ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos mp ) ) by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,X1,X2,X3,X4,X5;
hence md = ( ( IExec (WB4,Q,t) ) . ( intpos mp ) ) by A263;
n4 = ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos ( mp + 3 ) ) ) by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,X1,X2,X3,X4,X5;
hence n4 = ( ( IExec (WB4,Q,t) ) . ( intpos ( mp + 3 ) ) ) by A263;
hereby
let j being (Element of ( NAT ));
assume that
A274: 1 <= j
and
A275: j < m1;
( pn + j ) >= ( pn + 1 ) by A274,XREAL_1:6;
then ( pn + j ) >= 8 by A196,XXREAL_0:2;
then A276: ( pn + j ) > 2 by XXREAL_0:2;
thus ( ( IExec (WB4,Q,t) ) . ( intpos ( pn + j ) ) ) = ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos ( pn + j ) ) ) by A263
.= ( ( Initialize t1 ) . ( intpos ( pn + j ) ) ) by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,A274,A275,X1,X2,X3,X4,X5
.= ( t1 . ( intpos ( pn + j ) ) ) by SCMPDS_5:15
.= ( t . ( intpos ( pn + j ) ) ) by A184,A235,A236,A276,I;
end;
thus f1,f2 are_fiberwise_equipotent  by A83,A237,A239,A241,A242,A247,A261,A256,A245,A253,A254,A266,X1,X2,X3,X4,X5;
take m4;
thus (md <= m4 & m4 <= n4) by A267,A268;
thus ( m4 - 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( mp + 1 ) ) ) by A263,A269;
thus ( m4 + 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( mp + 2 ) ) ) by A263,A270;
hereby
let i being (Element of ( NAT ));
assume that
A277: md <= i
and
A278: i < m4;
( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos m4 ) ) >= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos i ) ) by A271,A277,A278;
then ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) >= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos i ) ) by A263;
hence ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) >= ( ( IExec (WB4,Q,t) ) . ( intpos i ) ) by A263;
end;
hereby
let i being (Element of ( NAT ));
assume that
A279: m4 < i
and
A280: i <= n4;
( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos m4 ) ) <= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos i ) ) by A272,A279,A280;
then ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) <= ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos i ) ) by A263;
hence ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) <= ( ( IExec (WB4,Q,t) ) . ( intpos i ) ) by A263;
end;
hereby
let j being (Element of ( NAT ));
assume that
A281: ((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n )));
now
per cases  by A281;
suppose (( p0 + 1 ) <= j & j < md);

hence ( p0 + 1 ) <= j;
end;
suppose (n4 < j & j <= ( p0 + n ));

then j >= m4 by A268,XXREAL_0:2;
then j >= md by A267,XXREAL_0:2;
hence j >= ( p0 + 1 ) by A239,XXREAL_0:2;
end;
end;
then j >= 8 by A248,XXREAL_0:2;
then A282: j > 2 by XXREAL_0:2;
thus ( ( IExec (WB4,Q,t) ) . ( intpos j ) ) = ( ( IExec (TR,Q1,( Initialize t1 )) ) . ( intpos j ) ) by A263
.= ( t1 . ( intpos j ) ) by A273,A281
.= ( t . ( intpos j ) ) by A184,A235,A236,A282,I;
end;
end;
consider f being (FinSequence of ( INT )) such that A283: ( len f ) = n and A284: f is_FinSequence_on s,p0 by SCPISORT:2;
A285: ( pn + 2 ) >= ( 7 + 2 ) by A5,XREAL_1:6;
A286: ((((( s1 . a ) = ( 0 ) & ( s1 . a1 ) = 1) & ( s1 . ( intpos ( pn + 1 ) ) ) = ( p0 + 1 )) & ( s1 . ( intpos ( pn + 2 ) ) ) = pn) & (for i being (Element of ( NAT )) holds ((i >= 8 & i <= pn) implies ( s1 . ( intpos i ) ) = ( s . ( intpos i ) ))))
proof
set t2 = ( IExec (( ( m1 ';' m2 ) ';' m3 ),P,s) );
set t3 = ( IExec (( m1 ';' m2 ),P,s) );
set t4 = ( Exec (m1,s) );
A287: ( t4 . a ) = ( 0 ) by SCMPDS_2:45;
A288: ( t3 . a ) = ( ( Exec (m2,t4) ) . a ) by SCMPDS_5:42
.= ( 0 ) by A287,SCMPDS_2:45,SCMP_GCD:3;
A289: ( t3 . ( SBP ) ) = ( ( Exec (m2,t4) ) . ( SBP ) ) by SCMPDS_5:42
.= 1 by SCMPDS_2:45;
then A290: ( DataLoc (( t3 . ( SBP ) ),pn) ) = ( intpos ( pn + 1 ) ) by SCMP_GCD:1;
A291: ( t2 . a ) = ( ( Exec (m3,t3) ) . a ) by SCMPDS_5:41
.= ( 0 ) by A288,A290,AMI_3:10,SCMPDS_2:46;
A292: ( t2 . ( intpos ( pn + 1 ) ) ) = ( ( Exec (m3,t3) ) . ( intpos ( pn + 1 ) ) ) by SCMPDS_5:41
.= ( p0 + 1 ) by A290,SCMPDS_2:46;
A293: ( pn + 2 ) > 1 by A285,XXREAL_0:2;
A294: ( pn + 1 ) > 1 by A196,XXREAL_0:2;
A295: ( t2 . ( SBP ) ) = ( ( Exec (m3,t3) ) . ( SBP ) ) by SCMPDS_5:41
.= 1 by A289,A290,A294,AMI_3:10,SCMPDS_2:46;
then A296: ( DataLoc (( t2 . ( SBP ) ),( pn + 1 )) ) = ( intpos ( pn + ( 1 + 1 ) ) ) by SCMP_GCD:1;
thus ( s1 . a ) = ( ( Exec (m4,t2) ) . a ) by SCMPDS_5:41
.= ( 0 ) by A291,A296,AMI_3:10,SCMPDS_2:46;
thus ( s1 . a1 ) = ( ( Exec (m4,t2) ) . ( SBP ) ) by SCMPDS_5:41
.= 1 by A295,A296,A293,AMI_3:10,SCMPDS_2:46;
A297: ( pn + 2 ) > ( pn + 1 ) by XREAL_1:6;
thus ( s1 . ( intpos ( pn + 1 ) ) ) = ( ( Exec (m4,t2) ) . ( intpos ( pn + 1 ) ) ) by SCMPDS_5:41
.= ( p0 + 1 ) by A292,A296,A297,AMI_3:10,SCMPDS_2:46;
thus ( s1 . ( intpos ( pn + 2 ) ) ) = ( ( Exec (m4,t2) ) . ( intpos ( pn + 2 ) ) ) by SCMPDS_5:41
.= pn by A296,SCMPDS_2:46;
A298: (for i being (Element of ( NAT )) holds (i >= 8 implies ( t4 . ( intpos i ) ) = ( s . ( intpos i ) ))) by AMI_3:10,SCMPDS_2:45;
A299:now
let i being (Element of ( NAT ));
assume A300: i >= 8;
then A301: i > 1 by XXREAL_0:2;
thus ( t3 . ( intpos i ) ) = ( ( Exec (m2,t4) ) . ( intpos i ) ) by SCMPDS_5:42
.= ( t4 . ( intpos i ) ) by A301,AMI_3:10,SCMPDS_2:45
.= ( s . ( intpos i ) ) by A298,A300;
end;
A302:now
let i being (Element of ( NAT ));
assume that
A303: i >= 8
and
A304: i <= pn;
A305: ( pn + 1 ) > pn by XREAL_1:29;
thus ( t2 . ( intpos i ) ) = ( ( Exec (m3,t3) ) . ( intpos i ) ) by SCMPDS_5:41
.= ( t3 . ( intpos i ) ) by A290,A304,A305,AMI_3:10,SCMPDS_2:46
.= ( s . ( intpos i ) ) by A299,A303;
end;
A306: ( pn + 2 ) > ( pn + ( 0 ) ) by XREAL_1:6;
let i being (Element of ( NAT ));
assume that
A307: i >= 8
and
A308: i <= pn;
thus ( s1 . ( intpos i ) ) = ( ( Exec (m4,t2) ) . ( intpos i ) ) by SCMPDS_5:41
.= ( t2 . ( intpos i ) ) by A296,A308,A306,AMI_3:10,SCMPDS_2:46
.= ( s . ( intpos i ) ) by A302,A307,A308;
end;
now
A309: ( p0 + 1 ) >= ( 7 + 1 ) by A4,XREAL_1:6;
let i being (Element of ( NAT ));
assume that
A310: 1 <= i
and
A311: i <= ( len f );
A312: ( p0 + i ) <= pn by A283,A311,XREAL_1:6;
( p0 + i ) >= ( p0 + 1 ) by A310,XREAL_1:6;
then A313: ( p0 + i ) >= 8 by A309,XXREAL_0:2;
thus ( f . i ) = ( s . ( intpos ( p0 + i ) ) ) by A284,A310,A311,SCPISORT:def 1
.= ( s1 . ( intpos ( p0 + i ) ) ) by A286,A313,A312;
end;
then A314: f is_FinSequence_on s1,p0 by SCPISORT:def 1;
consider g being (FinSequence of ( INT )) such that A315: ( len g ) = n and A316: g is_FinSequence_on ( IExec (( QuickSort (n,p0) ),P,s) ),p0 by SCPISORT:2;
A317: b1 = ( intpos ( ( 0 ) + 1 ) ) by SCMP_GCD:1;
A318: (for t being (State of ( SCMPDS )) holds (for Q holds (for m,md being (Element of ( NAT )) holds ((((( t . a ) = ( 0 ) & ( t . ( SBP ) ) = m) & ( t . ( intpos ( m + pn ) ) ) = md) & (md >= ( p0 + 1 ) or ( ( t . ( intpos ( ( m + pn ) + 1 ) ) ) - md ) <= ( 0 ))) implies (WB4 is_closed_on t,Q & WB4 is_halting_on t,Q)))))
proof
let t being (State of ( SCMPDS ));
let Q;
let m being (Element of ( NAT ));
let md being (Element of ( NAT ));
set mp = ( m + pn );
set t1 = ( IExec (( l1 ';' l2 ),Q,( Initialize t )) );
set Q1 = Q;
assume that
A319: ( t . a ) = ( 0 )
and
A320: ( t . ( SBP ) ) = m
and
A321: ( t . ( intpos mp ) ) = md
and
A322: (md >= ( p0 + 1 ) or ( ( t . ( intpos ( mp + 1 ) ) ) - md ) <= ( 0 ));
A323: ( t1 . a2 ) = ( ( t . ( intpos ( mp + 1 ) ) ) - ( t . ( intpos mp ) ) ) by A184,A319,A320;
A324: ( t1 . a ) = ( 0 ) by A184,A319,A320;
then A325: ( DataLoc (( t1 . a ),2) ) = ( intpos ( ( 0 ) + 2 ) ) by SCMP_GCD:1;
per cases ;
suppose A326: ( t1 . ( DataLoc (( t1 . a ),2) ) ) > ( 0 );

A327: mp >= ( ( 0 ) + 7 ) by A5,XREAL_1:7;
then ( mp + 1 ) >= ( 7 + 1 ) by XREAL_1:6;
then ( mp + 1 ) > 2 by XXREAL_0:2;
then A328: ( ( t1 . ( intpos ( mp + 1 ) ) ) - md ) > ( 0 ) by A184,A319,A320,A321,A323,A325,A326;
A329: ( t1 . ( SBP ) ) = m by A184,A319,A320;
mp > 2 by A327,XXREAL_0:2;
then A330: ( t1 . ( intpos mp ) ) = md by A184,A319,A320,A321;
then A331: TR is_halting_on t1,Q1 by A222,A184,A319,A320,A321,A322,A324,A325,A326,A329,A328;
X1: ( ( Initialize t1 ) . ( DataLoc (( t1 . a ),2) ) ) = ( t1 . ( DataLoc (( t1 . a ),2) ) ) by SCMPDS_5:15;
X2: ( ( Initialize t1 ) . a ) = ( t1 . a ) by SCMPDS_5:15;
A332: TR is_closed_on t1,Q1 by A222,A184,A319,A320,A321,A322,A324,A325,A326,A329,A330,A328;
B331: TR is_halting_on ( Initialize t1 ),Q1
proof
( Q1 +* ( stop TR ) ) halts_on ( Initialize ( Initialize t1 ) ) by A331,SCMPDS_6:def 3;
hence thesis by SCMPDS_6:def 3;
end;
B332: TR is_closed_on ( Initialize t1 ),Q1
proof
(for k being (Element of ( NAT )) holds ( IC ( Comput (( Q1 +* ( stop TR ) ),( Initialize ( Initialize t1 ) ),k) ) ) in ( dom ( stop TR ) )) by A332,SCMPDS_6:def 2;
hence thesis by SCMPDS_6:def 2;
end;
then A333: IF4 is_halting_on ( Initialize t1 ),Q1 by A326,B331,X1,X2,SCMPDS_6:68;
B333: IF4 is_halting_on t1,Q1
proof
( Q1 +* ( stop IF4 ) ) halts_on ( Initialize ( Initialize t1 ) ) by A333,SCMPDS_6:def 3;
hence thesis by SCMPDS_6:def 3;
end;
XX: IF4 is_closed_on ( Initialize t1 ),Q1 by A326,B332,B331,X1,X2,SCMPDS_6:68;
IF4 is_closed_on t1,Q1
proof
(for k being (Element of ( NAT )) holds ( IC ( Comput (( Q1 +* ( stop IF4 ) ),( Initialize ( Initialize t1 ) ),k) ) ) in ( dom ( stop IF4 ) )) by XX,SCMPDS_6:def 2;
hence thesis by SCMPDS_6:def 2;
end;
hence thesis by B333,SCPISORT:9;
end;
suppose A334: ( t1 . ( DataLoc (( t1 . a ),2) ) ) <= ( 0 );

A335: lb is_halting_on t1,Q1 by SCMPDS_6:21;
A336: lb is_closed_on t1,Q1 by SCMPDS_6:20;
then A337: IF4 is_halting_on t1,Q1 by A334,A335,SCMPDS_6:69;
IF4 is_closed_on t1,Q1 by A334,A336,A335,SCMPDS_6:69;
hence thesis by A337,SCPISORT:9;
end;
end;
A338:now
let t being ( 0 ) -started (State of ( SCMPDS ));
let Q;
let f1 being (FinSequence of ( INT ));
let f2 being (FinSequence of ( INT ));
let k1 being (Element of ( NAT ));
let k2 being (Element of ( NAT ));
let y1 being (Element of ( NAT ));
let yn being (Element of ( NAT ));
set mm = ( ( 2 * k1 ) + 1 );
set md = ( p0 + y1 );
set n4 = ( p0 + yn );
assume that
A339: ( t . a ) = ( 0 )
and
A340: mm = ( t . b1 )
and
A341: k2 = ( ( pn + ( 2 * k1 ) ) + 1 )
and
A342: md = ( t . ( intpos k2 ) )
and
A343: n4 = ( t . ( intpos ( k2 + 1 ) ) )
and
A344: ((1 <= y1 & yn <= n) or y1 >= yn);
set mp = ( mm + pn );
A345: md = ( t . ( intpos mp ) ) by A341,A342;
now
per cases  by A344;
case (1 <= y1 & yn <= n);
hence ( p0 + 1 ) <= md by XREAL_1:6;
end;
case y1 >= yn;
then md >= ( t . ( intpos ( mp + 1 ) ) ) by A341,A343,XREAL_1:6;
hence ( ( t . ( intpos ( mp + 1 ) ) ) - md ) <= ( 0 ) by XREAL_1:47;
end;
end;
hence (WB4 is_closed_on t,Q & WB4 is_halting_on t,Q) by A318,A317,A339,A340,A345;
consider f3 being (FinSequence of ( INT )) such that A346: ( len f3 ) = n and A347: (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len f3 )) implies ( f3 . i ) = ( t . ( intpos ( p0 + i ) ) ))) by SCPISORT:1;
consider f4 being (FinSequence of ( INT )) such that A348: ( len f4 ) = n and A349: (for i being (Element of ( NAT )) holds ((1 <= i & i <= ( len f4 )) implies ( f4 . i ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + i ) ) ))) by SCPISORT:1;
A350: f4 is_FinSequence_on ( IExec (WB4,Q,t) ),p0 by A349,SCPISORT:def 1;
A351: f3 is_FinSequence_on t,p0 by A347,SCPISORT:def 1;
hereby
per cases ;
suppose ( t . ( intpos ( mp + 1 ) ) ) <= ( t . ( intpos mp ) );

hence (( ( IExec (WB4,Q,t) ) . a ) = ( t . a ) & (for j being (Element of ( NAT )) holds ((1 <= j & j < mm) implies ( ( IExec (WB4,Q,t) ) . ( intpos ( pn + j ) ) ) = ( t . ( intpos ( pn + j ) ) )))) by A197,A317,A339,A340;
end;
suppose A352: ( t . ( intpos ( mp + 1 ) ) ) > ( t . ( intpos mp ) );

then A353: ( n4 - md ) > ( 0 ) by A341,A342,A343,XREAL_1:50;
A354: n4 <= pn by A341,A342,A343,A344,A352,XREAL_1:6;
( p0 + 1 ) <= md by A341,A342,A343,A344,A352,XREAL_1:6;
hence (( ( IExec (WB4,Q,t) ) . a ) = ( t . a ) & (for j being (Element of ( NAT )) holds ((1 <= j & j < mm) implies ( ( IExec (WB4,Q,t) ) . ( intpos ( pn + j ) ) ) = ( t . ( intpos ( pn + j ) ) )))) by A234,A317,A339,A340,A341,A343,A345,A346,A351,A348,A350,A353,A354;
end;
end;
hereby
assume y1 >= yn;
then A355: ( t . ( intpos ( mp + 1 ) ) ) <= ( t . ( intpos mp ) ) by A341,A342,A343,XREAL_1:6;
hence ( ( IExec (WB4,Q,t) ) . b1 ) = ( ( ( 2 * k1 ) + 1 ) - 2 ) by A197,A317,A339,A340
.= ( ( 2 * k1 ) - 1 );
thus (for j being (Element of ( NAT )) holds ((1 <= j & j <= n) implies ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + j ) ) ) = ( t . ( intpos ( p0 + j ) ) ))) by A197,A317,A339,A340,A355;
end;
A356: k2 = mp by A341;
hereby
assume A357: y1 < yn;
then A358: ( p0 + 1 ) <= md by A344,XREAL_1:6;
n4 > md by A357,XREAL_1:6;
then A359: ( n4 - md ) > ( 0 ) by XREAL_1:50;
A360: n4 <= pn by A344,A357,XREAL_1:6;
hence ( ( IExec (WB4,Q,t) ) . b1 ) = ( ( ( 2 * k1 ) + 1 ) + 2 ) by A234,A317,A339,A340,A341,A343,A345,A346,A351,A348,A350,A359,A358
.= ( ( 2 * k1 ) + 3 );
consider m4 being (Element of ( NAT )) such that A361: md <= m4 and A362: m4 <= n4 and A363: ( m4 - 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( mp + 1 ) ) ) and A364: ( m4 + 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( mp + 2 ) ) ) and A365: (for i being (Element of ( NAT )) holds ((md <= i & i < m4) implies ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) >= ( ( IExec (WB4,Q,t) ) . ( intpos i ) ))) and A366: (for i being (Element of ( NAT )) holds ((m4 < i & i <= n4) implies ( ( IExec (WB4,Q,t) ) . ( intpos m4 ) ) <= ( ( IExec (WB4,Q,t) ) . ( intpos i ) ))) and A367: (for j being (Element of ( NAT )) holds (((( p0 + 1 ) <= j & j < md) or (n4 < j & j <= ( p0 + n ))) implies ( ( IExec (WB4,Q,t) ) . ( intpos j ) ) = ( t . ( intpos j ) ))) by A234,A317,A339,A340,A341,A342,A343,A346,A351,A348,A350,A359,A358,A360;
hereby
let j being (Element of ( NAT ));
assume ((1 <= j & j < y1) or (yn < j & j <= n));
then ((( p0 + 1 ) <= ( p0 + j ) & ( p0 + j ) < md) or (n4 < ( p0 + j ) & ( p0 + j ) <= ( p0 + n ))) by XREAL_1:6;
hence ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + j ) ) ) = ( t . ( intpos ( p0 + j ) ) ) by A367;
end;
( m4 - p0 ) >= y1 by A361,XREAL_1:19;
then reconsider ym = ( m4 - p0 ) as (Element of ( NAT )) by INT_1:3;
take ym;
m4 = ( p0 + ym );
hence (y1 <= ym & ym <= yn) by A361,A362,XREAL_1:6;
thus md = ( ( IExec (WB4,Q,t) ) . ( intpos k2 ) ) by A234,A317,A339,A340,A342,A343,A356,A346,A351,A348,A350,A359,A358,A360;
thus ( ( p0 + ym ) - 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( k2 + 1 ) ) ) by A341,A363;
thus ( ( p0 + ym ) + 1 ) = ( ( IExec (WB4,Q,t) ) . ( intpos ( k2 + 2 ) ) ) by A341,A364;
thus n4 = ( ( IExec (WB4,Q,t) ) . ( intpos ( k2 + 3 ) ) ) by A234,A317,A339,A340,A342,A343,A356,A346,A351,A348,A350,A359,A358,A360;
hereby
let j being (Element of ( NAT ));
assume that
A368: y1 <= j
and
A369: j < ym;
A370: ( p0 + j ) < ( p0 + ym ) by A369,XREAL_1:6;
( p0 + y1 ) <= ( p0 + j ) by A368,XREAL_1:6;
hence ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + j ) ) ) <= ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + ym ) ) ) by A365,A370;
end;
hereby
let j being (Element of ( NAT ));
assume that
A371: ym < j
and
A372: j <= yn;
A373: ( p0 + j ) <= ( p0 + yn ) by A372,XREAL_1:6;
( p0 + ym ) < ( p0 + j ) by A371,XREAL_1:6;
hence ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + j ) ) ) >= ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + ym ) ) ) by A366,A373;
end;
end;
hereby
assume that
A374: f1 is_FinSequence_on t,p0
and
A375: f2 is_FinSequence_on ( IExec (WB4,Q,t) ),p0
and
A376: ( len f1 ) = n
and
A377: ( len f2 ) = n;
per cases ;
suppose A378: ( t . ( intpos ( mp + 1 ) ) ) <= ( t . ( intpos mp ) );

A379: ( dom f1 ) = ( Seg n ) by A376,FINSEQ_1:def 3;
now
let i being Nat;
reconsider a = i as (Element of ( NAT )) by ORDINAL1:def 12;
assume A380: i in ( dom f1 );
then A381: 1 <= i by A379,FINSEQ_1:1;
A382: i <= n by A379,A380,FINSEQ_1:1;
hence ( f1 . i ) = ( t . ( intpos ( p0 + a ) ) ) by A374,A376,A381,SCPISORT:def 1
.= ( ( IExec (WB4,Q,t) ) . ( intpos ( p0 + a ) ) ) by A197,A317,A339,A340,A378,A381,A382
.= ( f2 . i ) by A375,A377,A381,A382,SCPISORT:def 1;
end;
hence f1,f2 are_fiberwise_equipotent  by A376,A377,FINSEQ_2:9;
end;
suppose A383: ( t . ( intpos ( mp + 1 ) ) ) > ( t . ( intpos mp ) );

then A384: ( n4 - md ) > ( 0 ) by A341,A342,A343,XREAL_1:50;
A385: n4 <= pn by A341,A342,A343,A344,A383,XREAL_1:6;
( p0 + 1 ) <= md by A341,A342,A343,A344,A383,XREAL_1:6;
hence f1,f2 are_fiberwise_equipotent  by A234,A317,A339,A340,A341,A343,A345,A374,A375,A376,A377,A384,A385;
end;
end;
end;
X1: ( ( Initialize s1 ) . ( GBP ) ) = ( s1 . ( GBP ) ) by SCMPDS_5:15;
X2: ( ( Initialize s1 ) . ( intpos ( pn + 1 ) ) ) = ( s1 . ( intpos ( pn + 1 ) ) ) by SCMPDS_5:15;
X3: ( ( Initialize s1 ) . ( intpos ( ( pn + 1 ) + 1 ) ) ) = ( s1 . ( intpos ( ( pn + 1 ) + 1 ) ) ) by SCMPDS_5:15;
X4: ( ( Initialize s1 ) . ( DataLoc (( 0 ),1) ) ) = ( s1 . ( DataLoc (( 0 ),1) ) ) by SCMPDS_5:15;
B387: WH4 is_closed_on ( Initialize s1 ),P by A317,A338,A286,CKB14:1,X1,X2,X3,X4;
A387: WH4 is_closed_on s1,P
proof
(for k being (Element of ( NAT )) holds ( IC ( Comput (( P +* ( stop WH4 ) ),( Initialize ( Initialize s1 ) ),k) ) ) in ( dom ( stop WH4 ) )) by B387,SCMPDS_6:def 2;
hence thesis by SCMPDS_6:def 2;
end;
B388: WH4 is_halting_on ( Initialize s1 ),P by A317,A338,A286,CKB14:1,X1,X2,X3,X4;
A388: WH4 is_halting_on s1,P
proof
( P +* ( stop WH4 ) ) halts_on ( Initialize ( Initialize s1 ) ) by B388,SCMPDS_6:def 3;
hence thesis by SCMPDS_6:def 3;
end;
hence ( QuickSort (n,p0) ) is_halting_on s,P by A387,I,SCPISORT:9;
take f;
take g;
thus (((( len f ) = n & f is_FinSequence_on s,p0) & ( len g ) = n) & g is_FinSequence_on ( IExec (( QuickSort (n,p0) ),P,s) ),p0) by A283,A284,A315,A316;
now
let i being (Element of ( NAT ));
assume that
A389: 1 <= i
and
A390: i <= ( len g );
thus ( g . i ) = ( ( IExec (( M4 ';' WH4 ),P,s) ) . ( intpos ( p0 + i ) ) ) by A316,A389,A390,SCPISORT:def 1
.= ( ( IExec (WH4,P1,( Initialize s1 )) ) . ( intpos ( p0 + i ) ) ) by A388,A387,SCPISORT:7;
end;
then XX: g is_FinSequence_on ( IExec (WH4,P1,( Initialize s1 )) ),p0 by SCPISORT:def 1;
X1: ( ( Initialize s1 ) . ( GBP ) ) = ( s1 . ( GBP ) ) by SCMPDS_5:15;
X2: ( ( Initialize s1 ) . ( DataLoc (( 0 ),1) ) ) = ( s1 . ( DataLoc (( 0 ),1) ) ) by SCMPDS_5:15;
X4: ( ( Initialize s1 ) . ( intpos ( pn + 1 ) ) ) = ( s1 . ( intpos ( pn + 1 ) ) ) by SCMPDS_5:15;
X5: ( ( Initialize s1 ) . ( intpos ( ( pn + 1 ) + 1 ) ) ) = ( s1 . ( intpos ( ( pn + 1 ) + 1 ) ) ) by SCMPDS_5:15;
f is_FinSequence_on ( Initialize s1 ),p0
proof
let i being (Element of ( NAT ));
assume (1 <= i & i <= ( len f ));
then ( f . i ) = ( s1 . ( intpos ( p0 + i ) ) ) by A314,SCPISORT:def 1;
hence thesis by SCMPDS_5:15;
end;
hence (f,g are_fiberwise_equipotent  & g is_non_decreasing_on 1,n) by A317,A338,A286,A283,A315,CKB12:1,XX,X1,X2,X4,X5;
end;
