environ
vocabularies NUMBERS,XREAL_0,ORDINAL1,SUBSET_1,RELAT_1,WELLORD1,RELAT_2,ZFMISC_1,TARSKI,XBOOLE_0,FUNCT_1,FINSEQ_1,PRE_TOPC,METRIC_1,SETFAM_1,CARD_5,RCOMP_1,STRUCT_0,PCOMPS_1,CARD_1,ARYTM_3,XXREAL_0,ORDINAL4,PARTFUN1,NEWTON,NAT_1,REAL_1,FINSET_1,ARYTM_1,PCOMPS_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,NUMBERS,XREAL_0,REAL_1,TOPS_2,FUNCT_1,PARTFUN1,FUNCT_2,NAT_1,SETFAM_1,STRUCT_0,NEWTON,METRIC_1,PRE_TOPC,PCOMPS_1,WELLORD1,RELAT_1,FINSEQ_1,FINSET_1,RELAT_2,FINSEQ_2,XXREAL_0,CKB3,CKB4,CKB5,CKB10;
definitions TARSKI,WELLORD1,RELAT_2,SETFAM_1,XBOOLE_0,PRE_TOPC,STRUCT_0,CKB3,CKB4,CKB5;
theorems PCOMPS_1,COMPTS_1,SETFAM_1,TOPS_1,TOPS_2,PRE_TOPC,SUBSET_1,TARSKI,WELLORD2,ZFMISC_1,NAT_1,PREPOWER,WELLORD1,RELAT_1,RELAT_2,FUNCT_1,METRIC_1,FINSEQ_1,CARD_1,FINSEQ_2,FINSEQ_4,TBSP_1,NEWTON,XBOOLE_0,XBOOLE_1,XCMPLX_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9;
schemes NAT_1,FUNCT_2,SUBSET_1,RECDEF_1,TREES_2,FRAENKEL,XBOOLE_0,CKB2,CKB11;
registrations SUBSET_1,ORDINAL1,RELSET_1,FINSET_1,XXREAL_0,NAT_1,MEMBERED,FINSEQ_1,STRUCT_0,PRE_TOPC,METRIC_1,TOPS_1;
constructors SETFAM_1,RELAT_2,WELLORD1,WELLORD2,XXREAL_0,REAL_1,NAT_1,PARTFUN1,MEMBERED,NEWTON,TOPS_2,COMPTS_1,PCOMPS_1,RELSET_1,CKB3,CKB4,CKB5,CKB10;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve q for (Element of ( NAT ));
reserve p for (Element of ( NAT ));
reserve q1 for (Element of ( NAT ));
scheme XXX { PM() -> non empty set,UB() -> (Subset-Family of PM()),F(set,set) -> (Subset of PM()),P[set],Q[set,set,set] } : (ex f being (Function of ( NAT ),( bool ( bool PM() ) )) st (( f . ( 0 ) ) = UB() & (for n holds ( f . ( n + 1 ) ) = { ( union { F(c,n) where c is (Element of PM()): (Q[ c,V,n ] & (not c in ( union { ( union ( f . q ) ): q <= n } ))) } ) where V is (Subset of PM()): P[ V ] })))
proof
defpred Q1[ set,set,set,set ]
 means
(Q[ $1,$2,$3 ] & (not $1 in ( union $4 )));
consider f being (Function of ( NAT ),( bool ( bool PM() ) )) such that A1: ( f . ( 0 ) ) = UB() and A2: (for n holds ( f . ( n + 1 ) ) = { ( union { F(c,n) where c is (Element of PM()): (for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies Q1[ c,V,n,fq ]))) } ) where V is (Subset of PM()): P[ V ] }) from CKB11:sch 1;
take f;
thus ( f . ( 0 ) ) = UB() by A1;
let n;
deffunc F2(set) = ( union { F(c,n) where c is (Element of PM()): (for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies (Q[ c,$1,n ] & (not c in ( union fq )))))) } );
deffunc G2(set) = ( union { F(c,n) where c is (Element of PM()): (Q[ c,$1,n ] & (not c in ( union { ( union ( f . q ) ): q <= n } ))) } );
set fxxx1 = { F2(V) where V is (Subset of PM()): P[ V ] };
set fxxx = { G2(V) where V is (Subset of PM()): P[ V ] };
A3:now
deffunc F(set) = F($1,n);
let V being (Subset of PM());
assume P[ V ];
defpred P[ set ]
 means
(for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies (Q[ $1,V,n ] & (not $1 in ( union fq ))))));
defpred Q1[ set ]
 means
(Q[ $1,V,n ] & (not $1 in ( union { ( union ( f . q1 ) ): q1 <= n } )));
A4:now
let c being (Element of PM());
A5: ((for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies (not c in ( union fq ))))) iff (not c in ( union { ( union ( f . q ) ): q <= n } )))
proof
thus ((for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies (not c in ( union fq ))))) implies (not c in ( union { ( union ( f . q ) ): q <= n } )))
proof
assume A6: (for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies (not c in ( union fq )))));
assume c in ( union { ( union ( f . q ) ): q <= n } );
then consider C being set such that A7: c in C and A8: C in { ( union ( f . q ) ): q <= n } by TARSKI:def 4;
(ex q being (Element of ( NAT )) st (C = ( union ( f . q ) ) & q <= n)) by A8;
hence contradiction by A6,A7;
end;

assume A9: (not c in ( union { ( union ( f . q ) ): q <= n } ));
let fq being (Subset-Family of PM());
let q;
assume (q <= n & fq = ( f . q ));
then A10: ( union fq ) in { ( union ( f . p ) ): p <= n };
assume c in ( union fq );
hence contradiction by A9,A10,TARSKI:def 4;
end;
thus (P[ c ] iff Q1[ c ])
proof
hereby
consider q such that A11: q <= n;
assume A12: (for fq being (Subset-Family of PM()) holds (for q holds ((q <= n & fq = ( f . q )) implies (Q[ c,V,n ] & (not c in ( union fq ))))));
(ex fq being (Subset-Family of PM()) st fq = ( f . q ));
hence Q[ c,V,n ] by A12,A11;
thus (not c in ( union { ( union ( f . p ) ): p <= n } )) by A5,A12;
end;
assume (Q[ c,V,n ] & (not c in ( union { ( union ( f . q ) ): q <= n } )));
hence thesis by A5;
end;

end;
{ F(c) where c is (Element of PM()): P[ c ] } = { F(c) where c is (Element of PM()): Q1[ c ] } from FRAENKEL:sch 3(A4);
hence F2(V) = G2(V);
end;
fxxx1 = fxxx from FRAENKEL:sch 6(A3);
hence thesis by A2;
end;
