environ
vocabularies NUMBERS,RLVECT_1,CONVEX2,FUNCT_2,STRUCT_0,XBOOLE_0,SUBSET_1,CARD_3,RLVECT_2,FUNCT_1,FINSEQ_1,RELAT_1,VALUED_1,TARSKI,NAT_1,XXREAL_0,CARD_1,ARYTM_3,ORDINAL4,CONVEX1,REAL_1,ARYTM_1,RFINSEQ,PARTFUN1,FINSET_1,SUPINF_2,CONVEX3;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,REAL_1,RELAT_1,FUNCT_1,FINSET_1,NAT_1,DOMAIN_1,PARTFUN1,STRUCT_0,ALGSTR_0,FUNCT_2,FINSEQ_1,RLVECT_1,RLVECT_2,RVSUM_1,CONVEX1,RFINSEQ,CONVEX2,CKB1,CKB2,CKB11;
definitions RVSUM_1,CKB1,CKB2,CKB11;
theorems RLVECT_1,RVSUM_1,FUNCT_1,FINSEQ_1,TARSKI,ZFMISC_1,XBOOLE_0,XBOOLE_1,RLVECT_2,CARD_1,FINSEQ_3,FINSEQ_4,ENUMSET1,CONVEX1,FUNCT_2,NAT_1,RFINSEQ,CONVEX2,RLVECT_3,CARD_2,FINSEQ_5,PARTFUN2,GRAPH_5,RELAT_1,XCMPLX_1,XREAL_1,XXREAL_0,FINSOP_1,ORDINAL1,PARTFUN1,VALUED_1,RLVECT_4,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB16;
schemes NAT_1,XBOOLE_0,FINSEQ_1,CLASSES1;
registrations XBOOLE_0,ORDINAL1,RELSET_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,STRUCT_0,RLVECT_1,VALUED_0,CARD_1,RLVECT_2,CKB13,CKB14,CKB15;
constructors DOMAIN_1,XXREAL_0,REAL_1,FINSOP_1,RVSUM_1,RFINSEQ,CONVEX1,SEQ_1,BINOP_2,RELSET_1,CKB1,CKB2,CKB11;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
theorem
Lm4: (for V being RealLinearSpace holds (for M being (Subset of V) holds (for L being (Linear_Combination of M) holds (( card ( Carrier L ) ) >= 1 implies (ex L1,L2 being (Linear_Combination of M) st ((((((( Sum L ) = ( ( Sum L1 ) + ( Sum L2 ) ) & ( card ( Carrier L1 ) ) = 1) & ( card ( Carrier L2 ) ) = ( ( card ( Carrier L ) ) - 1 )) & ( Carrier L1 ) c= ( Carrier L )) & ( Carrier L2 ) c= ( Carrier L )) & (for v being (VECTOR of V) holds (v in ( Carrier L1 ) implies ( L1 . v ) = ( L . v )))) & (for v being (VECTOR of V) holds (v in ( Carrier L2 ) implies ( L2 . v ) = ( L . v )))))))))
proof
let V being RealLinearSpace;
let M being (Subset of V);
let L being (Linear_Combination of M);
assume ( card ( Carrier L ) ) >= 1;
then ( Carrier L ) <> ( {} );
then consider u being set such that A1: u in ( Carrier L ) by XBOOLE_0:def 1;
reconsider u as (VECTOR of V) by A1;
consider L1 being (Linear_Combination of { u }) such that A2: ( L1 . u ) = ( L . u ) by RLVECT_4:37;
A3: ( Carrier L1 ) c= { u } by RLVECT_2:def 6;
( Carrier L ) c= M by RLVECT_2:def 6;
then { u } c= M by A1,ZFMISC_1:31;
then ( Carrier L1 ) c= M by A3,XBOOLE_1:1;
then reconsider L1 as (Linear_Combination of M) by RLVECT_2:def 6;
A4: (for v being (VECTOR of V) holds (v in ( Carrier L1 ) implies ( L1 . v ) = ( L . v )))
proof
let v being (VECTOR of V);
assume v in ( Carrier L1 );
then v = u by A3,TARSKI:def 1;
hence thesis by A2;
end;
defpred P[ set,set ]
 means
(($1 in ( ( Carrier L ) \ { u } ) implies $2 = ( L . $1 )) & ((not $1 in ( ( Carrier L ) \ { u } )) implies $2 = ( 0 )));
A5: (for x being set holds (x in (the carrier of V) implies (ex y being set st P[ x,y ])))
proof
let x being set;
assume x in (the carrier of V);
(x in ( ( Carrier L ) \ { u } ) or (not x in ( ( Carrier L ) \ { u } )));
hence thesis;
end;
consider L2 being Function such that A6: (( dom L2 ) = (the carrier of V) & (for x being set holds (x in (the carrier of V) implies P[ x,( L2 . x ) ]))) from CLASSES1:sch 1(A5);
(for y being set holds (y in ( rng L2 ) implies y in ( REAL )))
proof
let y being set;
assume y in ( rng L2 );
then consider x being set such that A7: x in ( dom L2 ) and A8: y = ( L2 . x ) by FUNCT_1:def 3;
per cases ;
suppose A9: x in ( ( Carrier L ) \ { u } );

then reconsider x as (VECTOR of V);
y = ( L . x ) by A6,A8,A9;
hence thesis;
end;
suppose (not x in ( ( Carrier L ) \ { u } ));

then y = ( 0 ) by A6,A7,A8;
hence thesis;
end;
end;
then ( rng L2 ) c= ( REAL ) by TARSKI:def 3;
then A10: L2 is (Element of ( Funcs ((the carrier of V),( REAL )) )) by A6,FUNCT_2:def 2;
(ex T being  finite (Subset of V) st (for v being (Element of V) holds ((not v in T) implies ( L2 . v ) = ( 0 ))))
proof
set T = ( ( Carrier L ) \ { u } );
reconsider T as  finite (Subset of V);
take T;
thus thesis by A6;
end;
then reconsider L2 as (Linear_Combination of V) by A10,RLVECT_2:def 3;
(for x being set holds (x in ( Carrier L2 ) implies x in M))
proof
let x being set;
assume A11: x in ( Carrier L2 );
then reconsider x as (VECTOR of V);
( L2 . x ) <> ( 0 ) by A11,RLVECT_2:19;
then x in ( ( Carrier L ) \ { u } ) by A6;
then A12: x in ( Carrier L ) by XBOOLE_0:def 5;
( Carrier L ) c= M by RLVECT_2:def 6;
hence thesis by A12;
end;
then ( Carrier L2 ) c= M by TARSKI:def 3;
then reconsider L2 as (Linear_Combination of M) by RLVECT_2:def 6;
(for x being set holds (x in ( Carrier L2 ) implies x in ( ( Carrier L ) \ { u } )))
proof
let x being set;
assume A13: x in ( Carrier L2 );
then reconsider x as (VECTOR of V);
( L2 . x ) <> ( 0 ) by A13,RLVECT_2:19;
hence thesis by A6;
end;
then A14: ( Carrier L2 ) c= ( ( Carrier L ) \ { u } ) by TARSKI:def 3;
(for v being (VECTOR of V) holds ( L . v ) = ( ( L1 + L2 ) . v ))
proof
let v being (VECTOR of V);
per cases ;
suppose A15: v in ( Carrier L );

per cases ;
suppose A16: v = u;

then A17: (not v in ( Carrier L2 )) by A14,ZFMISC_1:56;
( ( L1 + L2 ) . v ) = ( ( L1 . v ) + ( L2 . v ) ) by RLVECT_2:def 10
.= ( ( L . v ) + ( 0 ) ) by A2,A16,A17,RLVECT_2:19;
hence thesis;
end;
suppose A18: v <> u;

then (not v in ( Carrier L1 )) by A3,TARSKI:def 1;
then A19: ( L1 . v ) = ( 0 ) by RLVECT_2:19;
A20: v in ( ( Carrier L ) \ { u } ) by A15,A18,ZFMISC_1:56;
( ( L1 + L2 ) . v ) = ( ( L1 . v ) + ( L2 . v ) ) by RLVECT_2:def 10
.= ( ( 0 ) + ( L . v ) ) by A6,A19,A20;
hence thesis;
end;
end;
suppose A21: (not v in ( Carrier L ));

then (not v in ( Carrier L2 )) by A14,ZFMISC_1:56;
then A22: ( L2 . v ) = ( 0 ) by RLVECT_2:19;
A23: (not v in ( Carrier L1 )) by A1,A3,A21,TARSKI:def 1;
( ( L1 + L2 ) . v ) = ( ( L1 . v ) + ( L2 . v ) ) by RLVECT_2:def 10
.= ( 0 ) by A23,A22,RLVECT_2:19;
hence thesis by A21,RLVECT_2:19;
end;
end;
then A24: L = ( L1 + L2 ) by RLVECT_2:def 9;
(for x being set holds (x in ( ( Carrier L ) \ { u } ) implies x in ( Carrier L2 )))
proof
let x being set;
assume A25: x in ( ( Carrier L ) \ { u } );
then reconsider x as (VECTOR of V);
x in ( Carrier L ) by A25,XBOOLE_0:def 5;
then A26: ( L . x ) <> ( 0 ) by RLVECT_2:19;
( L2 . x ) = ( L . x ) by A6,A25;
hence thesis by A26,RLVECT_2:19;
end;
then ( ( Carrier L ) \ { u } ) c= ( Carrier L2 ) by TARSKI:def 3;
then A27: ( Carrier L2 ) = ( ( Carrier L ) \ { u } ) by A14,XBOOLE_0:def 10;
take L1;
take L2;
A28: ( ( Carrier L ) \ { u } ) c= ( Carrier L ) by XBOOLE_1:36;
( Carrier L1 ) <> ( {} )
proof
assume ( Carrier L1 ) = ( {} );
then ( L . u ) = ( 0 ) by A2,RLVECT_2:19;
hence contradiction by A1,RLVECT_2:19;
end;
then A29: ( Carrier L1 ) = { u } by A3,ZFMISC_1:33;
then ( Carrier L1 ) c= ( Carrier L ) by A1,ZFMISC_1:31;
then ( card ( Carrier L2 ) ) = ( ( card ( Carrier L ) ) - ( card ( Carrier L1 ) ) ) by A29,A27,CARD_2:44
.= ( ( card ( Carrier L ) ) - 1 ) by A29,CARD_1:30;
hence thesis by A1,A4,A6,A29,A14,A24,A28,CARD_1:30,RLVECT_3:1,XBOOLE_1:1,ZFMISC_1:31;
end;
