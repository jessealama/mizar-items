environ
vocabularies BOR_CANT,REALSET1,ABIAN,SIN_COS,ARYTM_3,CARD_3,XREAL_0,EQREL_1,COMPLEX1,NUMBERS,ORDINAL1,ZFMISC_1,CARD_1,XXREAL_0,NEWTON,REAL_1,RELAT_1,PROB_1,SEQ_1,SEQ_2,ARYTM_1,ORDINAL2,RPR_1,XBOOLE_0,SUBSET_1,PROB_2,SERIES_1,NAT_1,FUNCT_1,PROB_3,SERIES_3,LIMFUNC1,SETLIM_1,XXREAL_2,FUNCOP_1;
notations XXREAL_0,XCMPLX_0,XREAL_0,ORDINAL1,REAL_1,XBOOLE_0,SUBSET_1,NUMBERS,NAT_1,COMPLEX1,SEQ_1,SEQ_2,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,PROB_1,PROB_2,SETLIM_1,SERIES_1,PROB_3,VALUED_0,VALUED_1,ZFMISC_1,LIMFUNC1,SERIES_3,NEWTON,ABIAN,SIN_COS,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10;
definitions FUNCT_1,FUNCT_2,SIN_COS,PROB_1,SETLIM_1,NEWTON,CKB4,CKB7,CKB8,CKB9,CKB10;
theorems XCMPLX_0,SIN_COS,SERIES_1,PROB_1,SEQ_2,PROB_3,SUBSET_1,XBOOLE_0,XBOOLE_1,ABIAN,NAT_1,FUNCT_1,FUNCT_2,XXREAL_0,ORDINAL1,TARSKI,XREAL_1,PROB_2,ABSVALUE,VALUED_1,SEQ_4,LIMFUNC1,SETLIM_1,SERIES_3,NEWTON,POWER,FUNCOP_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10;
schemes NAT_1,RECDEF_1,FUNCT_2;
registrations FUNCT_2,FINSEQ_2,XCMPLX_0,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XREAL_0,NAT_1,MEMBERED,VALUED_0,VALUED_1,ABIAN,XXREAL_0,RELAT_1,SEQ_4,FINSEQ_1,NEWTON,FUNCOP_1,PROB_2,PROB_3,SETLIM_1,RELSET_1,CKB11,CKB12,CKB13,CKB14;
constructors RELSET_1,BINARITH,SQUARE_1,COMSEQ_3,RVSUM_1,SIN_COS,REAL_1,LIMFUNC1,SETLIM_1,SEQ_2,SERIES_1,KURATO_0,RINFSUP1,SEQ_1,PROB_3,SERIES_3,ABIAN,NEWTON,NUMBERS,NAT_D,SEQ_4,RFUNCT_1,RCOMP_1,SEQM_3,FUNCT_4,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve Omega for non empty set;
reserve Sigma for (SigmaField of Omega);
reserve Prob for (Probability of Sigma);
reserve n for (Element of ( NAT ));
reserve n1 for (Element of ( NAT ));
reserve n2 for (Element of ( NAT ));
theorem
Th5: ((for A,B being (SetSequence of Sigma) holds ((n > n1 & B = ( A * ( Special_Function (n1,n2) ) )) implies ( ( Partial_Product ( Prob * B ) ) . n ) = ( ( ( Partial_Product ( Prob * A ) ) . n1 ) * ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . ( ( n - n1 ) - 1 ) ) ))) & (for A,B,C being (SetSequence of Sigma) holds (for e being (sequence of ( NAT )) holds (((n > n1 & C = ( A * e )) & B = ( C * ( Special_Function (n1,n2) ) )) implies ( ( Partial_Intersection B ) . n ) = ( ( ( Partial_Intersection C ) . n1 ) /\ ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) ) )))))
proof
A1: (for A,B being (SetSequence of Sigma) holds ((n > n1 & B = ( A * ( Special_Function (n1,n2) ) )) implies ( ( Partial_Product ( Prob * B ) ) . n ) = ( ( ( Partial_Product ( Prob * A ) ) . n1 ) * ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . ( ( n - n1 ) - 1 ) ) )))
proof
let A being (SetSequence of Sigma),B being (SetSequence of Sigma);
assume that
A2: n > n1
and
A3: B = ( A * ( Special_Function (n1,n2) ) );
A4: (for q being (Element of ( NAT )) holds (q <= n1 implies ( ( Partial_Product ( Prob * B ) ) . q ) = ( ( Partial_Product ( Prob * A ) ) . q )))
proof
let q being (Element of ( NAT ));
assume A5: q <= n1;
defpred J[ Nat ]
 means
( ( Partial_Product ( Prob * B ) ) . ( $1 * ( ( Special_Function3 n1 ) . $1 ) ) ) = ( ( Partial_Product ( Prob * A ) ) . ( $1 * ( ( Special_Function3 n1 ) . $1 ) ) );
A6: J[ ( 0 ) ]
proof
A7: ( ( Partial_Product ( Prob * B ) ) . ( 0 ) ) = ( ( Prob * B ) . ( 0 ) ) by SERIES_3:def 1;
A8: ( ( Partial_Product ( Prob * A ) ) . ( 0 ) ) = ( ( Prob * A ) . ( 0 ) ) by SERIES_3:def 1;
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
then A9: ( ( Prob * B ) . ( 0 ) ) = ( Prob . ( B . ( 0 ) ) ) by FUNCT_1:12;
A10: ( dom ( A * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
(( ( Special_Function (n1,n2) ) . ( 0 ) ) = ( IFGT (( 0 ),n1,( ( 0 ) + n2 ),( 0 )) ) & ( IFGT (( 0 ),n1,( ( 0 ) + n2 ),( 0 )) ) = ( 0 )) by CKB7:def 1,XXREAL_0:def 11;
then A11: ( ( Prob * B ) . ( 0 ) ) = ( Prob . ( A . ( 0 ) ) ) by A10,A3,A9,FUNCT_1:12;
( dom ( Prob * A ) ) = ( NAT ) by FUNCT_2:def 1;
hence thesis by A11,A7,A8,FUNCT_1:12;
end;
A12: (for k being (Element of ( NAT )) holds (J[ k ] implies J[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
assume A13: J[ k ];
per cases ;
suppose A14: k < n1;

then A15: (( ( Special_Function3 n1 ) . k ) = ( IFGT (k,n1,( 0 ),1) ) & ( IFGT (k,n1,( 0 ),1) ) = 1) by CKB9:def 1,XXREAL_0:def 11;
( k + 1 ) <= n1 by A14,NAT_1:13;
then A16: (( ( Special_Function3 n1 ) . ( k + 1 ) ) = ( IFGT (( k + 1 ),n1,( 0 ),1) ) & ( IFGT (( k + 1 ),n1,( 0 ),1) ) = 1) by CKB9:def 1,XXREAL_0:def 11;
A17: ( ( Prob * B ) . ( k + 1 ) ) = ( ( Prob * A ) . ( k + 1 ) )
proof
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
then A18: ( ( Prob * B ) . ( k + 1 ) ) = ( Prob . ( B . ( k + 1 ) ) ) by FUNCT_1:12;
A19: ( dom ( A * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
( k + 1 ) <= n1 by A14,NAT_1:13;
then (( ( Special_Function (n1,n2) ) . ( k + 1 ) ) = ( IFGT (( k + 1 ),n1,( ( k + 1 ) + n2 ),( k + 1 )) ) & ( IFGT (( k + 1 ),n1,( ( k + 1 ) + n2 ),( k + 1 )) ) = ( k + 1 )) by CKB7:def 1,XXREAL_0:def 11;
then A20: ( ( Prob * B ) . ( k + 1 ) ) = ( Prob . ( A . ( k + 1 ) ) ) by A19,A3,A18,FUNCT_1:12;
( dom ( Prob * A ) ) = ( NAT ) by FUNCT_2:def 1;
hence thesis by A20,FUNCT_1:12;
end;
( ( Partial_Product ( Prob * B ) ) . ( k + 1 ) ) = ( ( ( Partial_Product ( Prob * A ) ) . k ) * ( ( Prob * A ) . ( k + 1 ) ) ) by A15,A13,A17,SERIES_3:def 1;
hence thesis by A16,SERIES_3:def 1;
end;
suppose A21: (not k < n1);

n1 < ( k + 1 ) by A21,XREAL_1:145;
then A22: (( ( Special_Function3 n1 ) . ( k + 1 ) ) = ( IFGT (( k + 1 ),n1,( 0 ),1) ) & ( IFGT (( k + 1 ),n1,( 0 ),1) ) = ( 0 )) by CKB9:def 1,XXREAL_0:def 11;
A23: ( ( Prob * B ) . ( 0 ) ) = ( ( Prob * A ) . ( 0 ) )
proof
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
then A24: ( ( Prob * B ) . ( 0 ) ) = ( Prob . ( B . ( 0 ) ) ) by FUNCT_1:12;
A25: ( dom ( A * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
(( ( Special_Function (n1,n2) ) . ( 0 ) ) = ( IFGT (( 0 ),n1,( ( 0 ) + n2 ),( 0 )) ) & ( IFGT (( 0 ),n1,( ( 0 ) + n2 ),( 0 )) ) = ( 0 )) by CKB7:def 1,XXREAL_0:def 11;
then A26: ( ( Prob * B ) . ( 0 ) ) = ( Prob . ( A . ( 0 ) ) ) by A25,A3,A24,FUNCT_1:12;
( dom ( Prob * A ) ) = ( NAT ) by FUNCT_2:def 1;
hence thesis by A26,FUNCT_1:12;
end;
(( ( Partial_Product ( Prob * B ) ) . ( ( k + 1 ) * ( ( Special_Function3 n1 ) . ( k + 1 ) ) ) ) = ( ( Prob * B ) . ( 0 ) ) & ( ( Partial_Product ( Prob * A ) ) . ( ( k + 1 ) * ( ( Special_Function3 n1 ) . ( k + 1 ) ) ) ) = ( ( Prob * A ) . ( 0 ) )) by A22,SERIES_3:def 1;
hence thesis by A23;
end;
end;
A27: (for k being (Element of ( NAT )) holds J[ k ]) from NAT_1:sch 1(A6,A12);
( ( Partial_Product ( Prob * B ) ) . q ) = ( ( Partial_Product ( Prob * A ) ) . q )
proof
(( ( Special_Function3 n1 ) . q ) = ( IFGT (q,n1,( 0 ),1) ) & ( IFGT (q,n1,( 0 ),1) ) = 1) by CKB9:def 1,A5,XXREAL_0:def 11;
then ( q * ( ( Special_Function3 n1 ) . q ) ) = q;
hence thesis by A27;
end;
hence thesis;
end;
defpred J[ (Element of ( NAT )) ]
 means
( ( Partial_Product ( Prob * B ) ) . ( ( $1 + n1 ) + 1 ) ) = ( ( ( Partial_Product ( Prob * A ) ) . n1 ) * ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . ( ( ( ( $1 + n1 ) + 1 ) - n1 ) - 1 ) ) );
(( ( Partial_Product ( Prob * B ) ) . ( ( ( 0 ) + n1 ) + 1 ) ) = ( ( ( Partial_Product ( Prob * B ) ) . n1 ) * ( ( Prob * B ) . ( n1 + 1 ) ) ) & n1 <= n1) by SERIES_3:def 1;
then A28: ( ( Partial_Product ( Prob * B ) ) . ( ( ( 0 ) + n1 ) + 1 ) ) = ( ( ( Partial_Product ( Prob * A ) ) . n1 ) * ( ( Prob * B ) . ( n1 + 1 ) ) ) by A4;
A29: ( dom ( A * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
A30: n1 < ( n1 + 1 ) by NAT_1:13;
(( ( Special_Function (n1,n2) ) . ( n1 + 1 ) ) = ( IFGT (( n1 + 1 ),n1,( ( n1 + 1 ) + n2 ),( n1 + 1 )) ) & ( IFGT (( n1 + 1 ),n1,( ( n1 + 1 ) + n2 ),( n1 + 1 )) ) = ( ( n1 + 1 ) + n2 )) by CKB7:def 1,A30,XXREAL_0:def 11;
then A31: ( Prob . ( B . ( n1 + 1 ) ) ) = ( Prob . ( A . ( ( n1 + 1 ) + n2 ) ) ) by A29,A3,FUNCT_1:12;
A32: ( A . ( ( ( n1 + n2 ) + 1 ) + ( 0 ) ) ) = ( ( A ^\ ( ( n1 + n2 ) + 1 ) ) . ( 0 ) ) by NAT_1:def 3;
( dom ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) = ( NAT ) by FUNCT_2:def 1;
then A33: ( Prob . ( B . ( n1 + 1 ) ) ) = ( ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( 0 ) ) by A32,A31,FUNCT_1:12;
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( Prob * B ) . ( n1 + 1 ) ) = ( ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( 0 ) ) by A33,FUNCT_1:12;
then A34: J[ ( 0 ) ] by A28,SERIES_3:def 1;
A35: (for k being (Element of ( NAT )) holds (J[ k ] implies J[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
assume A36: J[ k ];
A37: ( ( Partial_Product ( Prob * B ) ) . ( ( ( k + 1 ) + n1 ) + 1 ) ) = ( ( ( ( Partial_Product ( Prob * A ) ) . n1 ) * ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . k ) ) * ( ( Prob * B ) . ( ( ( k + 1 ) + n1 ) + 1 ) ) ) by A36,SERIES_3:def 1;
A38: ( ( Prob * B ) . ( ( ( k + 1 ) + n1 ) + 1 ) ) = ( ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( k + 1 ) )
proof
set j = ( ( ( k + 1 ) + n1 ) + 1 );
A39: ( dom ( A * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
1 <= ( ( k + 1 ) + 1 ) by XREAL_1:31;
then n1 < ( n1 + ( ( k + 1 ) + 1 ) ) by NAT_1:19;
then (( ( Special_Function (n1,n2) ) . j ) = ( IFGT (j,n1,( j + n2 ),j) ) & ( IFGT (j,n1,( j + n2 ),j) ) = ( j + n2 )) by CKB7:def 1,XXREAL_0:def 11;
then ( B . ( ( ( k + 1 ) + n1 ) + 1 ) ) = ( A . ( ( ( n1 + n2 ) + 1 ) + ( k + 1 ) ) ) by A39,A3,FUNCT_1:12;
then A40: ( Prob . ( B . ( ( ( k + 1 ) + n1 ) + 1 ) ) ) = ( Prob . ( ( A ^\ ( ( n1 + n2 ) + 1 ) ) . ( k + 1 ) ) ) by NAT_1:def 3;
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
then A41: ( ( Prob * B ) . ( ( ( k + 1 ) + n1 ) + 1 ) ) = ( Prob . ( ( A ^\ ( ( n1 + n2 ) + 1 ) ) . ( k + 1 ) ) ) by A40,FUNCT_1:12;
( dom ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) = ( NAT ) by FUNCT_2:def 1;
hence thesis by A41,FUNCT_1:12;
end;
( ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . k ) * ( ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( k + 1 ) ) ) = ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . ( k + 1 ) ) by SERIES_3:def 1;
hence thesis by A38,A37;
end;
A42: (for k being (Element of ( NAT )) holds J[ k ]) from NAT_1:sch 1(A34,A35);
( ( n - n1 ) - 1 ) is (Element of ( NAT ))
proof
( n1 + 1 ) <= n by A2,NAT_1:13;
then ( ( n1 + 1 ) - 1 ) <= ( n - 1 ) by XREAL_1:9;
then (n1 <= ( n - 1 ) & ( n - 1 ) is (Element of ( NAT ))) by A2,NAT_1:20;
then ( ( n - 1 ) - n1 ) is (Element of ( NAT )) by NAT_1:21;
hence thesis;
end;
then consider k being (Element of ( NAT )) such that A43: k = ( ( n - n1 ) - 1 );
( ( Partial_Product ( Prob * B ) ) . n ) = ( ( ( Partial_Product ( Prob * A ) ) . n1 ) * ( ( Partial_Product ( Prob * ( A ^\ ( ( n1 + n2 ) + 1 ) ) ) ) . ( ( ( ( ( ( n - n1 ) - 1 ) + n1 ) + 1 ) - n1 ) - 1 ) ) ) by A42,A43;
hence thesis;
end;
(for A,B,C being (SetSequence of Sigma) holds (for n1,n2,n being (Element of ( NAT )) holds (for e being (sequence of ( NAT )) holds (((n > n1 & C = ( A * e )) & B = ( C * ( Special_Function (n1,n2) ) )) implies ( ( Partial_Intersection B ) . n ) = ( ( ( Partial_Intersection C ) . n1 ) /\ ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) ) )))))
proof
let A being (SetSequence of Sigma),B being (SetSequence of Sigma),C being (SetSequence of Sigma);
let n1 being (Element of ( NAT )),n2 being (Element of ( NAT )),n being (Element of ( NAT ));
let e being (sequence of ( NAT ));
assume A44: n > n1;
assume C = ( A * e );
assume A45: B = ( C * ( Special_Function (n1,n2) ) );
reconsider B as (SetSequence of Sigma);
A46: ( ( Partial_Intersection B ) . n1 ) = ( ( Partial_Intersection C ) . n1 )
proof
(for x being set holds (x in ( ( Partial_Intersection B ) . n1 ) iff x in ( ( Partial_Intersection C ) . n1 )))
proof
let x being set;
hereby
assume A47: x in ( ( Partial_Intersection B ) . n1 );
x in ( ( Partial_Intersection C ) . n1 )
proof
A48: (for knat being Nat holds (knat <= n1 implies x in ( C . knat )))
proof
let knat being Nat;
assume A49: knat <= n1;
reconsider knat as (Element of ( NAT )) by ORDINAL1:def 12;
A50: x in ( B . knat ) by A49,A47,PROB_3:25;
A51: ( dom ( C * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
(( ( Special_Function (n1,n2) ) . knat ) = ( IFGT (knat,n1,( knat + n2 ),knat) ) & ( IFGT (knat,n1,( knat + n2 ),knat) ) = knat) by CKB7:def 1,A49,XXREAL_0:def 11;
hence thesis by A51,A45,A50,FUNCT_1:12;
end;
reconsider n1 as Nat;
thus thesis by A48,PROB_3:25;
end;
hence x in ( ( Partial_Intersection C ) . n1 );
end;
assume A52: x in ( ( Partial_Intersection C ) . n1 );
x in ( ( Partial_Intersection B ) . n1 )
proof
(for knat being Nat holds (knat <= n1 implies x in ( B . knat )))
proof
let knat being Nat;
assume A53: knat <= n1;
reconsider knat as (Element of ( NAT )) by ORDINAL1:def 12;
A54: x in ( C . knat ) by A53,A52,PROB_3:25;
A55: ( dom ( C * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
(( ( Special_Function (n1,n2) ) . knat ) = ( IFGT (knat,n1,( knat + n2 ),knat) ) & ( IFGT (knat,n1,( knat + n2 ),knat) ) = knat) by CKB7:def 1,A53,XXREAL_0:def 11;
hence thesis by A55,A45,A54,FUNCT_1:12;
end;
hence thesis by PROB_3:25;
end;
hence x in ( ( Partial_Intersection B ) . n1 );
end;
hence thesis by TARSKI:1;
end;
A56: (for x being set holds ((for knat being Nat holds (knat <= n implies x in ( B . knat ))) implies ((for knat being Nat holds (knat <= n1 implies x in ( B . knat ))) & (for knat being Nat holds ((n1 < knat & knat <= n) implies x in ( B . knat )))))) by A44,XXREAL_0:2;
A57: (for x being set holds (((for knat being Nat holds (knat <= n1 implies x in ( B . knat ))) & (for knat being Nat holds ((n1 < knat & knat <= n) implies x in ( B . knat )))) implies (for knat being Nat holds (knat <= n implies x in ( B . knat )))));
A58: (for x being set holds (x in ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) ) implies (for qnat being Nat holds ((n1 < qnat & qnat <= n) implies x in ( B . qnat )))))
proof
let x being set;
assume A59: x in ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) );
A60: (( ( n - n1 ) - 1 ) >= ( 0 ) & ( ( n - n1 ) - 1 ) is (Element of ( NAT )))
proof
( n - n1 ) is (Element of ( NAT )) by A44,NAT_1:21;
hence thesis by A44,NAT_1:20,XREAL_1:50;
end;
A61: (for knat being Nat holds (knat <= ( ( n - n1 ) - 1 ) implies x in ( C . ( knat + ( ( n1 + n2 ) + 1 ) ) )))
proof
let knat being Nat;
assume knat <= ( ( n - n1 ) - 1 );
then x in ( ( C ^\ ( ( n1 + n2 ) + 1 ) ) . knat ) by A60,A59,PROB_3:25;
hence thesis by NAT_1:def 3;
end;
(for qnat being Nat holds ((n1 < qnat & qnat <= n) implies x in ( B . qnat )))
proof
let qnat being Nat;
assume that
A62: n1 < qnat
and
A63: qnat <= n;
A64: (( n1 + 1 ) <= qnat & qnat <= n) by A62,A63,NAT_1:13;
A65: ( qnat - ( n1 + 1 ) ) is (Element of ( NAT )) by A64,NAT_1:21;
consider knat being Nat such that A66: knat = ( ( qnat - n1 ) - 1 ) by A65;
A67: ( ( qnat - n1 ) - 1 ) <= ( ( n - n1 ) - 1 )
proof
( qnat - ( n1 + 1 ) ) <= ( n - ( n1 + 1 ) ) by A63,XREAL_1:9;
hence thesis;
end;
A68: x in ( C . ( knat + ( ( n1 + n2 ) + 1 ) ) ) by A66,A67,A61;
x in ( B . qnat )
proof
reconsider qnat as (Element of ( NAT )) by ORDINAL1:def 12;
A69: ( dom ( C * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
(( ( Special_Function (n1,n2) ) . qnat ) = ( IFGT (qnat,n1,( qnat + n2 ),qnat) ) & ( IFGT (qnat,n1,( qnat + n2 ),qnat) ) = ( qnat + n2 )) by CKB7:def 1,A62,XXREAL_0:def 11;
hence thesis by A69,A45,A66,A68,FUNCT_1:12;
end;
hence thesis;
end;
hence thesis;
end;
A70: (for x being set holds ((for qnat being Nat holds ((n1 < qnat & qnat <= n) implies x in ( B . qnat ))) implies x in ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) )))
proof
let x being set;
assume A71: (for qnat being Nat holds ((n1 < qnat & qnat <= n) implies x in ( B . qnat )));
A72: (( ( n - n1 ) - 1 ) >= ( 0 ) & ( ( n - n1 ) - 1 ) is (Element of ( NAT )))
proof
( n - n1 ) is (Element of ( NAT )) by A44,NAT_1:21;
hence thesis by A44,NAT_1:20,XREAL_1:50;
end;
x in ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) )
proof
A73: (for qnat being Nat holds ((( 0 ) <= ( ( qnat - n1 ) - 1 ) & ( ( qnat - n1 ) - 1 ) <= ( ( n - n1 ) - 1 )) implies x in ( B . qnat )))
proof
let qnat being Nat;
assume that
A74: ( 0 ) <= ( ( qnat - n1 ) - 1 )
and
A75: ( ( qnat - n1 ) - 1 ) <= ( ( n - n1 ) - 1 );
( ( 0 ) + ( n1 + 1 ) ) <= ( ( qnat - ( n1 + 1 ) ) + ( n1 + 1 ) ) by A74,XREAL_1:6;
then ( ( n1 + 1 ) - 1 ) <= ( qnat - 1 ) by XREAL_1:9;
then (n1 <= ( qnat - 1 ) & qnat < ( qnat + 1 )) by NAT_1:13;
then (n1 <= ( qnat - 1 ) & ( qnat - 1 ) < ( ( qnat + 1 ) - 1 )) by XREAL_1:9;
then A76: n1 < qnat by XXREAL_0:2;
( ( qnat - ( n1 + 1 ) ) + ( n1 + 1 ) ) <= ( ( n - ( n1 + 1 ) ) + ( n1 + 1 ) ) by A75,XREAL_1:6;
hence thesis by A76,A71;
end;
(for knat being Nat holds ((( 0 ) <= knat & knat <= ( ( n - n1 ) - 1 )) implies x in ( ( C ^\ ( ( n1 + n2 ) + 1 ) ) . knat )))
proof
let knat being Nat;
assume that
( 0 ) <= knat
and
A77: knat <= ( ( n - n1 ) - 1 );
set qnat = ( ( knat + n1 ) + 1 );
A78: ( ( qnat - n1 ) - 1 ) <= ( ( n - n1 ) - 1 ) by A77;
A79: x in ( B . qnat ) by A78,A73;
A80: ( dom ( C * ( Special_Function (n1,n2) ) ) ) = ( NAT ) by FUNCT_2:def 1;
A81: n1 < qnat
proof
( n1 + 1 ) <= ( ( n1 + 1 ) + knat ) by XREAL_1:31;
hence thesis by NAT_1:13;
end;
(( ( Special_Function (n1,n2) ) . qnat ) = ( IFGT (qnat,n1,( qnat + n2 ),qnat) ) & ( IFGT (qnat,n1,( qnat + n2 ),qnat) ) = ( qnat + n2 )) by CKB7:def 1,A81,XXREAL_0:def 11;
then ( B . qnat ) = ( C . ( ( ( n1 + n2 ) + 1 ) + knat ) ) by A45,A80,FUNCT_1:12;
hence thesis by A79,NAT_1:def 3;
end;
then (for knat being Nat holds (knat <= ( ( n - n1 ) - 1 ) implies x in ( ( C ^\ ( ( n1 + n2 ) + 1 ) ) . knat )));
hence thesis by A72,PROB_3:25;
end;
hence thesis;
end;
A82: (for x being set holds (x in ( ( Partial_Intersection B ) . n ) iff ((for knat being Nat holds (knat <= n1 implies x in ( B . knat ))) & (for knat being Nat holds ((n1 < knat & knat <= n) implies x in ( B . knat ))))))
proof
let x being set;
(x in ( ( Partial_Intersection B ) . n ) iff (for knat being Nat holds (knat <= n implies x in ( B . knat )))) by PROB_3:25;
hence thesis by A56,A57;
end;
A83: (for x being set holds (x in ( ( Partial_Intersection B ) . n ) iff (x in ( ( Partial_Intersection B ) . n1 ) & (for knat being Nat holds ((n1 < knat & knat <= n) implies x in ( B . knat ))))))
proof
let x being set;
(x in ( ( Partial_Intersection B ) . n1 ) iff (for knat being Nat holds (knat <= n1 implies x in ( B . knat )))) by PROB_3:25;
hence thesis by A82;
end;
(for x being set holds (x in ( ( Partial_Intersection B ) . n ) iff (x in ( ( Partial_Intersection B ) . n1 ) & x in ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) ))))
proof
let x being set;
(x in ( ( Partial_Intersection ( C ^\ ( ( n1 + n2 ) + 1 ) ) ) . ( ( n - n1 ) - 1 ) ) iff (for knat being Nat holds ((n1 < knat & knat <= n) implies x in ( B . knat )))) by A58,A70;
hence thesis by A83;
end;
hence thesis by A46,XBOOLE_0:def 4;
end;
hence thesis by A1;
end;
