environ
vocabularies BOR_CANT,REALSET1,ABIAN,SIN_COS,ARYTM_3,CARD_3,XREAL_0,EQREL_1,COMPLEX1,NUMBERS,ORDINAL1,ZFMISC_1,CARD_1,XXREAL_0,NEWTON,REAL_1,RELAT_1,PROB_1,SEQ_1,SEQ_2,ARYTM_1,ORDINAL2,RPR_1,XBOOLE_0,SUBSET_1,PROB_2,SERIES_1,NAT_1,FUNCT_1,PROB_3,SERIES_3,LIMFUNC1,SETLIM_1,XXREAL_2,FUNCOP_1;
notations XXREAL_0,XCMPLX_0,XREAL_0,ORDINAL1,REAL_1,XBOOLE_0,SUBSET_1,NUMBERS,NAT_1,COMPLEX1,SEQ_1,SEQ_2,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,PROB_1,PROB_2,SETLIM_1,SERIES_1,PROB_3,VALUED_0,VALUED_1,ZFMISC_1,LIMFUNC1,SERIES_3,NEWTON,ABIAN,SIN_COS,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10,CKB16,CKB20,CKB22,CKB23,CKB25,CKB30;
definitions FUNCT_1,FUNCT_2,SIN_COS,PROB_1,SETLIM_1,NEWTON,CKB4,CKB7,CKB8,CKB9,CKB10,CKB16,CKB20,CKB22,CKB23,CKB25,CKB30;
theorems XCMPLX_0,SIN_COS,SERIES_1,PROB_1,SEQ_2,PROB_3,SUBSET_1,XBOOLE_0,XBOOLE_1,ABIAN,NAT_1,FUNCT_1,FUNCT_2,XXREAL_0,ORDINAL1,TARSKI,XREAL_1,PROB_2,ABSVALUE,VALUED_1,SEQ_4,LIMFUNC1,SETLIM_1,SERIES_3,NEWTON,POWER,FUNCOP_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes NAT_1,RECDEF_1,FUNCT_2;
registrations FUNCT_2,FINSEQ_2,XCMPLX_0,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XREAL_0,NAT_1,MEMBERED,VALUED_0,VALUED_1,ABIAN,XXREAL_0,RELAT_1,SEQ_4,FINSEQ_1,NEWTON,FUNCOP_1,PROB_2,PROB_3,SETLIM_1,RELSET_1,CKB11,CKB12,CKB13,CKB14,CKB21,CKB24;
constructors RELSET_1,BINARITH,SQUARE_1,COMSEQ_3,RVSUM_1,SIN_COS,REAL_1,LIMFUNC1,SETLIM_1,SEQ_2,SERIES_1,KURATO_0,RINFSUP1,SEQ_1,PROB_3,SERIES_3,ABIAN,NEWTON,NUMBERS,NAT_D,SEQ_4,RFUNCT_1,RCOMP_1,SEQM_3,FUNCT_4,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10,CKB16,CKB20,CKB22,CKB23,CKB25,CKB30;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve Omega for non  empty set;
reserve Sigma for (SigmaField of Omega);
reserve Prob for (Probability of Sigma);
reserve A for (SetSequence of Sigma);
reserve n for (Element of ( NAT ));
theorem
Th16: ((( Partial_Sums ( Prob * A ) ) is  convergent implies (( Prob . ( lim_sup A ) ) = ( 0 ) & ( Prob . ( lim_inf ( Complement A ) ) ) = 1)) & ((A is_all_independent_wrt Prob & ( Partial_Sums ( Prob * A ) ) is  divergent_to+infty) implies (( Prob . ( lim_inf ( Complement A ) ) ) = ( 0 ) & ( Prob . ( lim_sup A ) ) = 1)))
proof
A1: (( Partial_Sums ( Prob * A ) ) is  convergent implies ( Prob . ( lim_inf ( Complement A ) ) ) = 1)
proof
assume A2: ( Partial_Sums ( Prob * A ) ) is  convergent;
A3: ( Prob . ( lim_inf ( Complement A ) ) ) = ( Prob . ( @lim_inf ( Complement A ) ) ) by CKB33:1;
(for A being (SetSequence of Sigma) holds (( Partial_Sums ( Prob * A ) ) is  convergent implies ((( Prob . ( @lim_inf ( Complement A ) ) ) = 1 & ( lim ( Sum_Shift_Seq (Prob,A) ) ) = ( 0 )) & ( Sum_Shift_Seq (Prob,A) ) is  convergent)))
proof
let A being (SetSequence of Sigma);
assume A4: ( Partial_Sums ( Prob * A ) ) is  convergent;
((( ( Prob . ( @lim_sup A ) ) + ( Prob . ( @lim_inf ( Complement A ) ) ) ) = ( ( 0 ) + ( Prob . ( @lim_inf ( Complement A ) ) ) ) & ( lim ( Sum_Shift_Seq (Prob,A) ) ) = ( 0 )) & ( Sum_Shift_Seq (Prob,A) ) is  convergent) by A4,CKB31:1;
hence thesis by CKB33:1;
end;
hence thesis by A2,A3;
end;
A5: (for A being (SetSequence of Sigma) holds (( Partial_Sums ( Prob * A ) ) is  convergent implies ( Prob . ( lim_sup A ) ) = ( 0 )))
proof
let A being (SetSequence of Sigma);
assume A6: ( Partial_Sums ( Prob * A ) ) is  convergent;
( Prob . ( lim_sup A ) ) = ( Prob . ( @lim_sup A ) ) by CKB33:1;
hence thesis by A6,CKB31:1;
end;
(for B being (SetSequence of Sigma) holds ((B is_all_independent_wrt Prob & ( Partial_Sums ( Prob * B ) ) is  divergent_to+infty) implies (( Prob . ( lim_inf ( Complement B ) ) ) = ( 0 ) & ( Prob . ( lim_sup B ) ) = 1)))
proof
let B being (SetSequence of Sigma);
assume that
A7: B is_all_independent_wrt Prob
and
A8: ( Partial_Sums ( Prob * B ) ) is  divergent_to+infty;
A9: ( Prob . ( @lim_sup B ) ) = ( Prob . ( lim_sup B ) ) by CKB33:1;
A10: ( Prob . ( @lim_inf ( Complement B ) ) ) = ( Prob . ( lim_inf ( Complement B ) ) ) by CKB33:1;
(for B being (SetSequence of Sigma) holds ((B is_all_independent_wrt Prob & ( Partial_Sums ( Prob * B ) ) is  divergent_to+infty) implies (( Prob . ( @lim_inf ( Complement B ) ) ) = ( 0 ) & ( Prob . ( @lim_sup B ) ) = 1)))
proof
let B being (SetSequence of Sigma);
assume that
A11: B is_all_independent_wrt Prob
and
A12: ( Partial_Sums ( Prob * B ) ) is  divergent_to+infty;
A13: (for Q being (SetSequence of Sigma) holds ( Intersect_Shift_Seq Q ) is  non-descending)
proof
let Q being (SetSequence of Sigma);
( inferior_setsequence Q ) = ( Intersect_Shift_Seq Q ) by CKB28:1;
hence thesis;
end;
A14: ( Intersect_Shift_Seq ( Complement B ) ) is  non-descending by A13;
reconsider CB = ( Complement B ) as (SetSequence of Sigma);
A15: ( Prob . ( @lim_inf CB ) ) = ( lim ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) ) by A14,PROB_2:10;
A16: (for n being (Element of ( NAT )) holds ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n ) = ( 0 ))
proof
let n being (Element of ( NAT ));
( dom ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) ) = ( NAT ) by FUNCT_2:def 1;
then A17: ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n ) = ( Prob . ( ( Intersect_Shift_Seq ( Complement B ) ) . n ) ) by FUNCT_1:12;
( ( Intersect_Shift_Seq ( Complement B ) ) . n ) = ( Intersection ( ( Complement B ) ^\ n ) ) by CKB23:def 1;
then A18: ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n ) = ( Prob . ( Intersection ( Partial_Intersection ( ( Complement B ) ^\ n ) ) ) ) by A17,PROB_3:29;
( Partial_Intersection ( ( Complement B ) ^\ n ) ) is  non-ascending by PROB_3:27;
then A19: ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n ) = ( lim ( Prob * ( Partial_Intersection ( ( Complement B ) ^\ n ) ) ) ) by A18,PROB_1:def 8;
A20: (for k being (Element of ( NAT )) holds ( ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) . k ) <= ( ( ( 1 + ( Partial_Sums ( Prob * ( B ^\ n ) ) ) ) " ) . k ))
proof
let k being (Element of ( NAT ));
A21: (for k being (Element of ( NAT )) holds ( B ^\ k ) is_all_independent_wrt Prob)
proof
let k being (Element of ( NAT ));
(for C being (SetSequence of Sigma) holds ((ex e being (sequence of ( NAT )) st (e is  one-to-one & (for n being (Element of ( NAT )) holds ( ( B ^\ k ) . ( e . n ) ) = ( C . n )))) implies (for n being (Element of ( NAT )) holds ( ( Partial_Product ( Prob * C ) ) . n ) = ( Prob . ( ( Partial_Intersection C ) . n ) ))))
proof
let C being (SetSequence of Sigma);
given e being (sequence of ( NAT )) such that
A22: e is  one-to-one
and
A23: (for n being (Element of ( NAT )) holds ( ( B ^\ k ) . ( e . n ) ) = ( C . n ));

A24: ( B ^\ k ) = ( B * ( Special_Function2 k ) )
proof
(for n being set holds (n in ( NAT ) implies ( ( B ^\ k ) . n ) = ( ( B * ( Special_Function2 k ) ) . n )))
proof
let n being set;
assume n in ( NAT );
then reconsider n as (Element of ( NAT ));
( dom ( B * ( Special_Function2 k ) ) ) = ( NAT ) by FUNCT_2:def 1;
then A25: ( ( B * ( Special_Function2 k ) ) . n ) = ( B . ( ( Special_Function2 k ) . n ) ) by FUNCT_1:12;
( ( Special_Function2 k ) . n ) = ( n + k ) by CKB8:def 1;
hence thesis by A25,NAT_1:def 3;
end;
hence thesis by FUNCT_2:12;
end;
A26: (for n being (Element of ( NAT )) holds ( ( B * ( Special_Function2 k ) ) . ( e . n ) ) = ( B . ( ( ( Special_Function2 k ) * e ) . n ) ))
proof
let n being (Element of ( NAT ));
(( dom ( B * ( Special_Function2 k ) ) ) = ( NAT ) & ( dom ( ( Special_Function2 k ) * e ) ) = ( NAT )) by FUNCT_2:def 1;
then (( ( B * ( Special_Function2 k ) ) . ( e . n ) ) = ( B . ( ( Special_Function2 k ) . ( e . n ) ) ) & ( ( ( Special_Function2 k ) * e ) . n ) = ( ( Special_Function2 k ) . ( e . n ) )) by FUNCT_1:12;
hence thesis;
end;
A27: (for n being (Element of ( NAT )) holds ( B . ( ( ( Special_Function2 k ) * e ) . n ) ) = ( C . n ))
proof
let n being (Element of ( NAT ));
( ( B * ( Special_Function2 k ) ) . ( e . n ) ) = ( C . n ) by A24,A23;
hence thesis by A26;
end;
( ( Special_Function2 k ) * e ) is  one-to-one by A22,FUNCT_1:24;
hence thesis by A11,A27,CKB16:def 1;
end;
hence thesis by CKB16:def 1;
end;
A28: (for A being (SetSequence of Sigma) holds (for n being (Element of ( NAT )) holds ( ( Partial_Product ( Prob * ( Complement A ) ) ) . n ) <= ( ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . n ) " )))
proof
let A being (SetSequence of Sigma);
let n being (Element of ( NAT ));
A29: ( ( Partial_Product ( Prob * ( Complement A ) ) ) . n ) <= ( 1 / ( 1 + ( ( Partial_Sums ( Prob * A ) ) . n ) ) )
proof
( ( Partial_Product ( Prob * ( Complement A ) ) ) . n ) <= ( ( Partial_Product ( JSum ( Prob * A ) ) ) . n ) by CKB6:1;
then A30: ( ( Partial_Product ( Prob * ( Complement A ) ) ) . n ) <= ( ( exp_R ) . ( - ( ( Partial_Sums ( Prob * A ) ) . n ) ) ) by CKB5:1;
( ( exp_R ) . ( - ( ( Partial_Sums ( Prob * A ) ) . n ) ) ) <= ( 1 / ( 1 + ( ( Partial_Sums ( Prob * A ) ) . n ) ) )
proof
A31: (for n being (Element of ( NAT )) holds ( ( Prob * A ) . n ) >= ( 0 ))
proof
let n being (Element of ( NAT ));
( dom ( Prob * A ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( Prob * A ) . n ) = ( Prob . ( A . n ) ) by FUNCT_1:12;
hence thesis by PROB_1:def 8;
end;
A32: (for n being (Element of ( NAT )) holds ( ( Partial_Sums ( Prob * A ) ) . n ) >= ( 0 ))
proof
let n being (Element of ( NAT ));
defpred J[ (Element of ( NAT )) ]
 means
( ( Partial_Sums ( Prob * A ) ) . $1 ) >= ( 0 );
( ( Partial_Sums ( Prob * A ) ) . ( 0 ) ) = ( ( Prob * A ) . ( 0 ) ) by SERIES_1:def 1;
then A33: J[ ( 0 ) ] by A31;
A34: (for k being (Element of ( NAT )) holds (J[ k ] implies J[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
assume A35: J[ k ];
A36: ( ( Prob * A ) . ( k + 1 ) ) >= ( 0 ) by A31;
( ( Partial_Sums ( Prob * A ) ) . ( k + 1 ) ) = ( ( ( Partial_Sums ( Prob * A ) ) . k ) + ( ( Prob * A ) . ( k + 1 ) ) ) by SERIES_1:def 1;
hence thesis by A35,A36;
end;
(for k being (Element of ( NAT )) holds J[ k ]) from NAT_1:sch 1(A33,A34);
hence thesis;
end;
(for x being (Element of ( REAL )) holds (x >= ( 0 ) implies ( ( exp_R ) . ( - x ) ) <= ( 1 / ( 1 + x ) )))
proof
let x being (Element of ( REAL ));
assume A37: x >= ( 0 );
per cases ;
suppose A38: x > ( 0 );

A39: ( ( exp_R ) . ( - x ) ) >= ( 0 ) by SIN_COS:54;
set z = ( - x );
A40: ( ( exp_R x ) * ( exp_R z ) ) = ( exp_R ( x + z ) ) by SIN_COS:50;
( ( ( exp_R ) . ( - x ) ) * ( 1 + x ) ) <= 1 by CKB3:1,A39,A40,SIN_COS:51,XREAL_1:64;
hence thesis by A38,XREAL_1:77;
end;
suppose x <= ( 0 );

then x = ( 0 ) by A37;
hence thesis by SIN_COS:51;
end;
end;
hence thesis by A32;
end;
hence thesis by A30,XXREAL_0:2;
end;
(for A being (SetSequence of Sigma) holds (for n being (Element of ( NAT )) holds ( 1 / ( 1 + ( ( Partial_Sums ( Prob * A ) ) . n ) ) ) = ( ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . n ) " )))
proof
let A being (SetSequence of Sigma);
let n being (Element of ( NAT ));
( 1 / ( 1 + ( ( Partial_Sums ( Prob * A ) ) . n ) ) ) = ( 1 / ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . n ) ) by VALUED_1:2;
then ( 1 / ( 1 + ( ( Partial_Sums ( Prob * A ) ) . n ) ) ) = ( 1 * ( ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . n ) " ) ) by XCMPLX_0:def 9;
hence thesis;
end;
hence thesis by A29;
end;
( dom ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) . k ) = ( Prob . ( ( Partial_Intersection ( Complement ( B ^\ n ) ) ) . k ) ) by FUNCT_1:12;
then ( ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) . k ) = ( ( Partial_Product ( Prob * ( Complement ( B ^\ n ) ) ) ) . k ) by A21,CKB27:1;
then ( ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) . k ) <= ( ( ( 1 + ( Partial_Sums ( Prob * ( B ^\ n ) ) ) ) . k ) " ) by A28;
hence thesis by VALUED_1:10;
end;
A41: ( Partial_Sums ( Prob * ( B ^\ n ) ) ) is  divergent_to+infty
proof
per cases ;
suppose n = ( 0 );

hence thesis by A12,NAT_1:47;
end;
suppose n <> ( 0 );

then A42: ( n - 1 ) is (Element of ( NAT )) by NAT_1:20;
consider y being (Element of ( NAT )) such that A43: y = ( n - 1 ) by A42;
set B2 = ( ( NAT ) --> ( - ( ( Partial_Sums ( Prob * B ) ) . y ) ) );
A44: ( ( Partial_Sums ( Prob * B ) ) + B2 ) is  divergent_to+infty by A12,LIMFUNC1:18;
(for r being Real holds (ex q being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (q <= m implies r < ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . m )))))
proof
let r being Real;
(for r being Real holds (ex q being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (q <= m implies r < ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . m )))))
proof
let r being Real;
A45: (for m being (Element of ( NAT )) holds (n <= m implies ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . m ) = ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . ( m - n ) )))
proof
let m being (Element of ( NAT ));
assume n <= m;
then consider knat being Nat such that A46: m = ( n + knat ) by NAT_1:10;
reconsider knat as (Element of ( NAT )) by ORDINAL1:def 12;
defpred J[ (Element of ( NAT )) ]
 means
( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( n + $1 ) ) = ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . ( ( n + $1 ) - n ) );
A47: J[ ( 0 ) ]
proof
( dom ( ( Partial_Sums ( Prob * B ) ) + B2 ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . n ) = ( ( ( Partial_Sums ( Prob * B ) ) . n ) + ( B2 . n ) ) by VALUED_1:def 1;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . n ) = ( ( ( Partial_Sums ( Prob * B ) ) . n ) + ( - ( ( Partial_Sums ( Prob * B ) ) . ( n - 1 ) ) ) ) by A43,FUNCOP_1:7;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . n ) = ( ( ( Partial_Sums ( Prob * B ) ) . n ) - ( ( Partial_Sums ( Prob * B ) ) . ( n - 1 ) ) );
then A48: ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . n ) = ( ( ( ( Partial_Sums ( Prob * B ) ) . ( n - 1 ) ) + ( ( Prob * B ) . ( ( n - 1 ) + 1 ) ) ) - ( ( Partial_Sums ( Prob * B ) ) . ( n - 1 ) ) ) by A42,SERIES_1:def 1;
( dom ( Prob * ( B ^\ n ) ) ) = ( NAT ) by FUNCT_2:def 1;
then A49: ( ( Prob * ( B ^\ n ) ) . ( 0 ) ) = ( Prob . ( ( B ^\ n ) . ( 0 ) ) ) by FUNCT_1:12;
A50: ( ( B ^\ n ) . ( 0 ) ) = ( B . ( ( 0 ) + n ) ) by NAT_1:def 3;
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . n ) = ( ( Prob * ( B ^\ n ) ) . ( 0 ) ) by A50,A49,A48,FUNCT_1:12;
hence thesis by SERIES_1:def 1;
end;
A51: (for k being (Element of ( NAT )) holds (J[ k ] implies J[ ( k + 1 ) ]))
proof
let k being (Element of ( NAT ));
assume A52: J[ k ];
A53: ( dom ( ( Partial_Sums ( Prob * B ) ) + B2 ) ) = ( NAT ) by FUNCT_2:def 1;
( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( ( n + k ) + 1 ) ) = ( ( ( Partial_Sums ( Prob * B ) ) . ( ( n + k ) + 1 ) ) + ( B2 . ( ( n + k ) + 1 ) ) ) by A53,VALUED_1:def 1;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( ( n + k ) + 1 ) ) = ( ( ( ( Partial_Sums ( Prob * B ) ) . ( n + k ) ) + ( ( Prob * B ) . ( ( n + k ) + 1 ) ) ) + ( B2 . ( ( n + k ) + 1 ) ) ) by SERIES_1:def 1;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( ( n + k ) + 1 ) ) = ( ( ( ( Partial_Sums ( Prob * B ) ) . ( n + k ) ) + ( ( Prob * B ) . ( ( n + k ) + 1 ) ) ) + ( - ( ( Partial_Sums ( Prob * B ) ) . ( n - 1 ) ) ) ) by A43,FUNCOP_1:7;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( ( n + k ) + 1 ) ) = ( ( ( ( Partial_Sums ( Prob * B ) ) . ( n + k ) ) + ( ( Prob * B ) . ( ( n + k ) + 1 ) ) ) + ( B2 . ( n + k ) ) ) by A43,FUNCOP_1:7;
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( ( n + k ) + 1 ) ) = ( ( ( ( Partial_Sums ( Prob * B ) ) . ( n + k ) ) + ( B2 . ( n + k ) ) ) + ( ( Prob * B ) . ( ( n + k ) + 1 ) ) );
then A54: ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( ( n + k ) + 1 ) ) = ( ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . ( ( n + k ) - n ) ) + ( ( Prob * B ) . ( ( n + k ) + 1 ) ) ) by A53,A52,VALUED_1:def 1;
( ( Prob * ( B ^\ n ) ) . ( ( ( n + k ) - n ) + 1 ) ) = ( ( Prob * B ) . ( ( n + k ) + 1 ) )
proof
( dom ( Prob * ( B ^\ n ) ) ) = ( NAT ) by FUNCT_2:def 1;
then A55: ( ( Prob * ( B ^\ n ) ) . ( ( ( n + k ) - n ) + 1 ) ) = ( Prob . ( ( B ^\ n ) . ( k + 1 ) ) ) by FUNCT_1:12;
A56: ( ( B ^\ n ) . ( k + 1 ) ) = ( B . ( n + ( k + 1 ) ) ) by NAT_1:def 3;
( dom ( Prob * B ) ) = ( NAT ) by FUNCT_2:def 1;
hence thesis by A56,A55,FUNCT_1:12;
end;
hence thesis by A54,SERIES_1:def 1;
end;
(for k being (Element of ( NAT )) holds J[ k ]) from NAT_1:sch 1(A47,A51);
then ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( n + knat ) ) = ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . ( ( n + knat ) - n ) );
hence thesis by A46;
end;
A57: (ex q being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (( q + n ) <= ( m + n ) implies r < ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( m + n ) ))))
proof
consider q being (Element of ( NAT )) such that A58: (for m being (Element of ( NAT )) holds (q <= m implies r < ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . m ))) by A44,LIMFUNC1:def 4;
(for m being (Element of ( NAT )) holds (( q + n ) <= ( m + n ) implies r < ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( m + n ) )))
proof
let m being (Element of ( NAT ));
assume ( q + n ) <= ( m + n );
then (q <= ( q + n ) & ( q + n ) <= ( m + n )) by NAT_1:11;
then q <= ( m + n ) by XXREAL_0:2;
hence thesis by A58;
end;
hence thesis;
end;
(ex s being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (s <= m implies r < ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . m ))))
proof
consider q being (Element of ( NAT )) such that A59: (for m being (Element of ( NAT )) holds (( q + n ) <= ( m + n ) implies r < ( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . ( m + n ) ))) by A57;
take s = ( q + n );
let m being (Element of ( NAT ));
assume A60: s <= m;
set z = ( m + n );
( ( ( Partial_Sums ( Prob * B ) ) + B2 ) . z ) = ( ( Partial_Sums ( Prob * ( B ^\ n ) ) ) . ( z - n ) ) by A45,NAT_1:12;
hence thesis by A60,A59,NAT_1:12;
end;
hence thesis;
end;
hence thesis;
end;
hence thesis by LIMFUNC1:def 4;
end;
end;
A61: (for A being (SetSequence of Sigma) holds (( Partial_Sums ( Prob * A ) ) is  divergent_to+infty implies (( lim ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) " ) ) = ( 0 ) & ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) " ) is  convergent)))
proof
let A being (SetSequence of Sigma);
A62: (for A being (SetSequence of Sigma) holds ((for r being Real holds (ex n being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (n <= m implies r < ( ( Partial_Sums ( Prob * A ) ) . m ))))) implies (for r being Real holds (ex n being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (n <= m implies r < ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . m )))))))
proof
let A being (SetSequence of Sigma);
assume A63: (for r being Real holds (ex n being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (n <= m implies r < ( ( Partial_Sums ( Prob * A ) ) . m )))));
let r being Real;
consider n being (Element of ( NAT )) such that A64: (for m being (Element of ( NAT )) holds (n <= m implies r < ( ( Partial_Sums ( Prob * A ) ) . m ))) by A63;
take n;
(for m being (Element of ( NAT )) holds (n <= m implies r < ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . m )))
proof
let m being (Element of ( NAT ));
assume n <= m;
then A65: r < ( ( Partial_Sums ( Prob * A ) ) . m ) by A64;
A66: ( ( Partial_Sums ( Prob * A ) ) . m ) < ( ( ( Partial_Sums ( Prob * A ) ) . m ) + 1 ) by XREAL_1:29;
( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . m ) = ( ( ( Partial_Sums ( Prob * A ) ) . m ) + 1 ) by VALUED_1:2;
hence thesis by A65,A66,XXREAL_0:2;
end;
hence thesis;
end;
assume ( Partial_Sums ( Prob * A ) ) is  divergent_to+infty;
then (for r being Real holds (ex n being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (n <= m implies r < ( ( Partial_Sums ( Prob * A ) ) . m ))))) by LIMFUNC1:def 4;
then (for r being Real holds (ex n being (Element of ( NAT )) st (for m being (Element of ( NAT )) holds (n <= m implies r < ( ( 1 + ( Partial_Sums ( Prob * A ) ) ) . m ))))) by A62;
then ( 1 + ( Partial_Sums ( Prob * A ) ) ) is  divergent_to+infty by LIMFUNC1:def 4;
hence thesis by LIMFUNC1:34;
end;
( Partial_Intersection ( Complement ( B ^\ n ) ) ) is  non-ascending by PROB_3:27;
then A67: (( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) is  convergent & ( ( 1 + ( Partial_Sums ( Prob * ( B ^\ n ) ) ) ) " ) is  convergent) by A41,A61,PROB_1:def 8;
A68: ( lim ( ( 1 + ( Partial_Sums ( Prob * ( B ^\ n ) ) ) ) " ) ) = ( 0 ) by A41,A61;
A69: (for k being (Element of ( NAT )) holds ( 0 ) <= ( ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) . k ))
proof
let k being (Element of ( NAT ));
( dom ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) ) = ( NAT ) by FUNCT_2:def 1;
then ( ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) . k ) = ( Prob . ( ( Partial_Intersection ( Complement ( B ^\ n ) ) ) . k ) ) by FUNCT_1:12;
hence thesis by PROB_1:def 8;
end;
A70: ( lim ( Prob * ( Partial_Intersection ( Complement ( B ^\ n ) ) ) ) ) <= ( 0 ) by A67,A20,A68,SEQ_2:18;
( Complement ( B ^\ n ) ) = ( ( Complement B ) ^\ n )
proof
(for k being set holds (k in ( NAT ) implies ( ( Complement ( B ^\ n ) ) . k ) = ( ( ( Complement B ) ^\ n ) . k )))
proof
let k being set;
assume k in ( NAT );
then reconsider k as (Element of ( NAT ));
A71: ( ( Complement ( B ^\ n ) ) . k ) = ( ( ( B ^\ n ) . k ) ` ) by PROB_1:def 2;
( ( ( Complement B ) ^\ n ) . k ) = ( ( Complement B ) . ( k + n ) ) by NAT_1:def 3;
then ( ( ( Complement B ) ^\ n ) . k ) = ( ( B . ( k + n ) ) ` ) by PROB_1:def 2;
hence thesis by A71,NAT_1:def 3;
end;
hence thesis by FUNCT_2:12;
end;
hence thesis by A69,A67,A70,A19,SEQ_2:17;
end;
set B2 = ( ( NAT ) --> (( 0 ) qua Real) );
A72: (ex n being (Element of ( NAT )) st ( B2 . n ) = ( 0 ))
proof
take 1;
thus thesis by FUNCOP_1:7;
end;
A73: ( lim B2 ) = ( 0 ) by A72,SEQ_4:25;
A74: (B2 is  convergent & (ex k being (Element of ( NAT )) st (for n being (Element of ( NAT )) holds (k <= n implies ( B2 . n ) = ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n )))))
proof
(ex k being (Element of ( NAT )) st (for n being (Element of ( NAT )) holds (k <= n implies ( B2 . n ) = ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n ))))
proof
A75: (for n being (Element of ( NAT )) holds (n >= ( 0 ) implies ( B2 . n ) = ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n )))
proof
let n being (Element of ( NAT ));
assume n >= ( 0 );
(( B2 . n ) = ( 0 ) & ( ( Prob * ( Intersect_Shift_Seq ( Complement B ) ) ) . n ) = ( 0 )) by A16,FUNCOP_1:7;
hence thesis;
end;
take ( 0 );
thus thesis by A75;
end;
hence thesis;
end;
(( Prob . ( @lim_inf ( Complement B ) ) ) = ( 0 ) & ( ( Prob . ( @lim_inf ( Complement B ) ) ) + ( Prob . ( @lim_sup B ) ) ) = 1) by A15,A74,A73,CKB33:1,SEQ_4:19;
hence thesis;
end;
hence thesis by A9,A10,A7,A8;
end;
hence thesis by A5,A1;
end;
