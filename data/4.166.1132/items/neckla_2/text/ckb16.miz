environ
vocabularies NUMBERS,CLASSES2,RELAT_1,ZFMISC_1,ORDERS_2,NECKLACE,CARD_1,ARYTM_3,SUBSET_1,XBOOLE_0,TARSKI,XXREAL_0,ORDINAL1,FINSET_1,CLASSES1,STRUCT_0,FUNCT_1,SETFAM_1,NAT_1,CARD_3,NECKLA_2;
notations TARSKI,XBOOLE_0,ENUMSET1,SUBSET_1,ZFMISC_1,RELSET_1,PARTIT_2,FINSET_1,CARD_1,ORDINAL1,NUMBERS,CLASSES2,SETFAM_1,CLASSES1,CARD_3,XXREAL_0,NAT_1,RELAT_1,FUNCT_1,FUNCT_2,STRUCT_0,ORDERS_2,NECKLACE,CKB6,CKB8,CKB9,CKB10,CKB12;
definitions TARSKI,CKB6,CKB8,CKB9,CKB10,CKB12;
theorems FUNCT_1,FUNCT_2,ENUMSET1,RELSET_1,ZFMISC_1,XBOOLE_1,TARSKI,ORDINAL1,PARTFUN1,NECKLACE,CLASSES2,CLASSES1,XBOOLE_0,SETFAM_1,CARD_5,NAT_1,STRUCT_0,RELAT_1,CARD_2,SUBSET_1,CARD_3,REALSET1,XREAL_1,XXREAL_0,CKB1,CKB2,CKB4,CKB6,CKB8,CKB9,CKB10,CKB12,CKB14,CKB15;
schemes TARSKI,XBOOLE_0,NAT_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FINSET_1,XREAL_0,NAT_1,CLASSES2,STRUCT_0,ORDERS_2,YELLOW_0,CARD_1,CLASSES1,CKB3,CKB5,CKB7,CKB11,CKB13;
constructors SQUARE_1,NAT_1,CARD_3,CLASSES2,REALSET2,COH_SP,NECKLACE,RELSET_1,PARTIT_2,STRUCT_0,CKB6,CKB8,CKB9,CKB10,CKB12;
requirements BOOLE,SUBSET,REAL,NUMERALS,ARITHM;
begin
theorem
Th6: (for X being set holds (X in ( fin_RelStr_sp ) implies (X is  strict 1 -element  strict 1 -element RelStr or (ex H1,H2 being  strict RelStr st ((((the carrier of H1) misses (the carrier of H2) & H1 in ( fin_RelStr_sp )) & H2 in ( fin_RelStr_sp )) & (X = ( union_of (H1,H2) ) or X = ( sum_of (H1,H2) )))))))
proof
deffunc F(set,set) = ( $2 \/ { x where x is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in $2) & R2 in $2) & (x = ( union_of (R1,R2) ) or x = ( sum_of (R1,R2) )))) } );
set Y = ( fin_RelStr_sp );
let X being set;
assume that
A1: X in ( fin_RelStr_sp );
consider f being Function such that A2: ( dom f ) = ( NAT ) and A3: ( f . ( 0 ) ) = { x where x is (Element of ( fin_RelStr_sp )): x is  trivial  trivial RelStr } and A4: (for n being Nat holds ( f . ( n + 1 ) ) = F(n,( f . n ))) from NAT_1:sch 11;
A5: ( Union f ) c= ( fin_RelStr_sp )
proof
defpred P[ Nat ]
 means
( f . $1 ) c= ( fin_RelStr_sp );
let y being set;
assume y in ( Union f );
then consider x being set such that A6: x in ( dom f ) and A7: y in ( f . x ) by CARD_5:2;
reconsider x as (Element of ( NAT )) by A2,A6;
A8: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume that
A9: P[ k ];
A10: { a where a is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . k )) & R2 in ( f . k )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) )))) } c= ( fin_RelStr_sp )
proof
let x being set;
set S = { a where a is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . k )) & R2 in ( f . k )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) )))) };
assume x in S;
then (ex a being (Element of ( fin_RelStr_sp )) st (x = a & (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . k )) & R2 in ( f . k )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) ))))));
hence thesis;
end;
( f . ( k + 1 ) ) = ( ( f . k ) \/ { a where a is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . k )) & R2 in ( f . k )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) )))) } ) by A4;
hence thesis by A9,A10,XBOOLE_1:8;
end;
A11: P[ ( 0 ) ]
proof
let y being set;
assume y in ( f . ( 0 ) );
then (ex a being (Element of ( fin_RelStr_sp )) st (y = a & a is  trivial  trivial RelStr)) by A3;
hence thesis;
end;
(for k being Nat holds P[ k ]) from NAT_1:sch 2(A11,A8);
then ( f . x ) c= ( fin_RelStr_sp );
hence thesis by A7;
end;
then reconsider M = ( Union f ) as (Subset of ( fin_RelStr )) by XBOOLE_1:1;
A12: (for i being Nat holds ( f . i ) c= ( f . ( i + 1 ) ))
proof
let i being Nat;
A13: ( f . ( i + 1 ) ) = ( ( f . i ) \/ { b where b is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . i )) & R2 in ( f . i )) & (b = ( union_of (R1,R2) ) or b = ( sum_of (R1,R2) )))) } ) by A4;
let x being set;
assume x in ( f . i );
hence thesis by A13,XBOOLE_0:def 3;
end;
A14: (for i,j being (Element of ( NAT )) holds (i <= j implies ( f . i ) c= ( f . j )))
proof
let i being (Element of ( NAT )),j being (Element of ( NAT ));
defpred P[ Nat ]
 means
( f . i ) c= ( f . ( i + $1 ) );
assume i <= j;
then A15: (ex k being Nat st j = ( i + k )) by NAT_1:10;
A16: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume that
A17: P[ k ];
( f . ( i + k ) ) c= ( f . ( ( i + k ) + 1 ) ) by A12;
hence thesis by A17,XBOOLE_1:1;
end;
A18: P[ ( 0 ) ];
(for k being Nat holds P[ k ]) from NAT_1:sch 2(A18,A16);
hence thesis by A15;
end;
A19: (for H1,H2 being  strict RelStr holds ((((the carrier of H1) misses (the carrier of H2) & H1 in M) & H2 in M) implies (( union_of (H1,H2) ) in M & ( sum_of (H1,H2) ) in M)))
proof
let H1 being  strict RelStr,H2 being  strict RelStr;
assume that
A20: (the carrier of H1) misses (the carrier of H2)
and
A21: H1 in M
and
A22: H2 in M;
consider x2 being set such that A23: x2 in ( dom f ) and A24: H2 in ( f . x2 ) by A22,CARD_5:2;
consider x1 being set such that A25: x1 in ( dom f ) and A26: H1 in ( f . x1 ) by A21,CARD_5:2;
reconsider x1,x2 as (Element of ( NAT )) by A2,A25,A23;
set W = { a where a is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . ( max (x1,x2) ) )) & R2 in ( f . ( max (x1,x2) ) )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) )))) };
A27: ( f . ( ( max (x1,x2) ) + 1 ) ) = ( ( f . ( max (x1,x2) ) ) \/ W ) by A4;
A28: ( max (x1,x2) ) in ( NAT ) by ORDINAL1:def 12;
then A29: ( f . x1 ) c= ( f . ( max (x1,x2) ) ) by A14,XXREAL_0:25;
A30: ( f . x2 ) c= ( f . ( max (x1,x2) ) ) by A14,A28,XXREAL_0:25;
( sum_of (H1,H2) ) in ( fin_RelStr_sp ) by A5,A20,A21,A22,CKB12:def 1;
then ( sum_of (H1,H2) ) in W by A20,A26,A24,A29,A30;
then A31: ( sum_of (H1,H2) ) in ( f . ( ( max (x1,x2) ) + 1 ) ) by A27,XBOOLE_0:def 3;
( union_of (H1,H2) ) in ( fin_RelStr_sp ) by A5,A20,A21,A22,CKB12:def 1;
then ( union_of (H1,H2) ) in W by A20,A26,A24,A29,A30;
then ( union_of (H1,H2) ) in ( f . ( ( max (x1,x2) ) + 1 ) ) by A27,XBOOLE_0:def 3;
hence thesis by A2,A31,CARD_5:2;
end;
(for R being  strict RelStr holds (((the carrier of R) is 1 -element & (the carrier of R) in ( FinSETS )) implies R in M))
proof
A32: ( f . ( 0 ) ) c= M
proof
let x being set;
assume x in ( f . ( 0 ) );
hence thesis by A2,CARD_5:2;
end;
let R being  strict RelStr;
assume that
A33: (the carrier of R) is 1 -element
and
A34: (the carrier of R) in ( FinSETS );
A35: R is  trivial  trivial RelStr by A33;
R is (Element of ( fin_RelStr_sp )) by A33,A34,CKB12:def 1;
then R in ( f . ( 0 ) ) by A3,A35;
hence thesis by A32;
end;
then A36: ( fin_RelStr_sp ) c= M by A19,CKB12:def 1;
then A37: ( Union f ) = ( fin_RelStr_sp ) by A5,XBOOLE_0:def 10;
assume A38: (not X is  strict 1 -element  strict 1 -element RelStr);
(ex H1,H2 being  strict RelStr st ((((the carrier of H1) misses (the carrier of H2) & H1 in Y) & H2 in Y) & (X = ( union_of (H1,H2) ) or X = ( sum_of (H1,H2) ))))
proof
defpred P[ Nat ]
 means
(X in ( f . $1 ) implies (ex H1,H2 being  strict RelStr st ((((the carrier of H1) misses (the carrier of H2) & H1 in Y) & H2 in Y) & (X = ( union_of (H1,H2) ) or X = ( sum_of (H1,H2) )))));
A39: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let n being Nat;
assume that
A40: P[ n ];
set W = { a where a is (Element of ( fin_RelStr_sp )): (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . n )) & R2 in ( f . n )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) )))) };
assume A41: X in ( f . ( n + 1 ) );
reconsider n as (Element of ( NAT )) by ORDINAL1:def 12;
A42: ( f . ( n + 1 ) ) = ( ( f . n ) \/ W ) by A4;
per cases  by A41,A42,XBOOLE_0:def 3;
suppose X in ( f . n );

hence thesis by A40;
end;
suppose X in W;

then (ex a being (Element of ( fin_RelStr_sp )) st (a = X & (ex R1,R2 being  strict RelStr st ((((the carrier of R1) misses (the carrier of R2) & R1 in ( f . n )) & R2 in ( f . n )) & (a = ( union_of (R1,R2) ) or a = ( sum_of (R1,R2) ))))));
then consider R1 being  strict RelStr,R2 being  strict RelStr such that A43: (the carrier of R1) misses (the carrier of R2) and A44: R1 in ( f . n ) and A45: R2 in ( f . n ) and A46: (X = ( union_of (R1,R2) ) or X = ( sum_of (R1,R2) ));
A47: R2 in Y by A2,A37,A45,CARD_5:2;
R1 in Y by A2,A37,A44,CARD_5:2;
hence thesis by A43,A46,A47;
end;
end;
A48: P[ ( 0 ) ]
proof
assume X in ( f . ( 0 ) );
then consider a being (Element of ( fin_RelStr_sp )) such that W: (X = a & a is  trivial  trivial RelStr) by A3;
a is  strict non empty  strict non empty RelStr by CKB14:1;
then a is non empty  trivial  strict non empty  trivial  strict RelStr by W;
then reconsider a as non empty  trivial  strict RelStr;
a is 1 -element  strict 1 -element  strict RelStr;
hence thesis by A38,W;
end;
A49: (for n being Nat holds P[ n ]) from NAT_1:sch 2(A48,A39);
(ex y being set st (y in ( dom f ) & X in ( f . y ))) by A1,A36,CARD_5:2;
hence thesis by A2,A49;
end;
hence thesis;
end;
