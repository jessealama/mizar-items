environ
vocabularies NUMBERS,PBOOLE,FUNCT_1,CARD_3,RELAT_1,TARSKI,FINSEQ_1,ORDINAL4,XBOOLE_0,SUBSET_1,HILBERT1,TREES_1,TREES_A,CARD_1,ARYTM_3,TREES_2,TREES_4,TREES_3,TREES_9,FUNCT_6,QC_LANG1,XBOOLEAN,ZF_LANG,GLIB_000,XXREAL_0,NAT_1,ORDINAL1,ZFMISC_1,PARTFUN1,FUNCT_4,FUNCOP_1,HILBERT2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_3,RELAT_1,ORDINAL1,FUNCT_1,PARTFUN1,NAT_1,FINSEQ_1,FUNCOP_1,FUNCT_4,FUNCT_6,PBOOLE,TREES_1,TREES_2,TREES_3,TREES_4,TREES_9,HILBERT1,XXREAL_0,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
definitions TARSKI,FUNCT_1,HILBERT1,PARTFUN1,FUNCOP_1,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
theorems PBOOLE,ZFMISC_1,FUNCT_1,HILBERT1,ORDERS_1,SUBSET_1,TARSKI,FUNCT_4,FUNCOP_1,WELLFND1,CARD_3,GRFUNC_1,NAT_1,FINSEQ_1,TREES_1,TREES_4,TREES_2,TREES_9,FINSEQ_2,TREES_3,RELAT_1,ORDINAL1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,CARD_1,PARTFUN1,EQREL_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42;
schemes PBOOLE,NAT_1,FINSEQ_1,CKB6,CKB21;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,XREAL_0,NAT_1,FINSEQ_1,TREES_2,TREES_3,HILBERT1,TREES_4,CKB10,CKB11,CKB12;
constructors PARTFUN1,FUNCT_4,XXREAL_0,XREAL_0,NAT_1,CARD_3,PBOOLE,TREES_4,TREES_9,HILBERT1,RELSET_1,CKB13,CKB18,CKB19,CKB20;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve k for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve p for (Element of ( HP-WFF ));
reserve q for (Element of ( HP-WFF ));
reserve r for (Element of ( HP-WFF ));
reserve s for (Element of ( HP-WFF ));
scheme HPMSSExL { V() -> set,P((Element of ( NAT ))) -> set,C,I[(Element of ( HP-WFF )),(Element of ( HP-WFF )),set,set,set] } : (ex M being (ManySortedSet of ( HP-WFF )) st ((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (C[ p,q,( M . p ),( M . q ),( M . ( p '&' q ) ) ] & I[ p,q,( M . p ),( M . q ),( M . ( p => q ) ) ])))))
provided
A1: (for p holds (for q holds (for a,b being set holds (ex c being set st C[ p,q,a,b,c ]))))
and
A2: (for p holds (for q holds (for a,b being set holds (ex d being set st I[ p,q,a,b,d ]))))
and
A3: (for p holds (for q holds (for a,b,c,d being set holds ((C[ p,q,a,b,c ] & C[ p,q,a,b,d ]) implies c = d))))
and
A4: (for p holds (for q holds (for a,b,c,d being set holds ((I[ p,q,a,b,c ] & I[ p,q,a,b,d ]) implies c = d))))
proof
defpred P[ set,set ]
 means
(($1 = ( VERUM ) implies $2 = V()) & (for n holds ($1 = ( prop n ) implies $2 = P(n))));
set Pn = { ( prop n ): (not contradiction) };
set X = { Y where Y is (Subset of ( HP-WFF )): (((( VERUM ) in Y & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for a,b,c being set holds (((a = ( M . p ) & b = ( M . q )) & c = ( M . ( p '&' q ) )) implies C[ p,q,a,b,c ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for a,b,c being set holds (((a = ( M . p ) & b = ( M . q )) & c = ( M . ( p => q ) )) implies I[ p,q,a,b,c ])))))))) };
A5: Pn c= ( HP-WFF )
proof
let x being set;
assume x in Pn;
then (ex n st x = ( prop n ));
hence thesis;
end;
{ ( VERUM ) } c= ( HP-WFF ) by ZFMISC_1:31;
then reconsider Y0 = ( Pn \/ { ( VERUM ) } ) as (Subset of ( HP-WFF )) by A5,XBOOLE_1:8;
A6: (for x being set holds (x in Y0 implies (ex y being set st P[ x,y ])))
proof
let x being set;
assume A7: x in Y0;
per cases  by A7,XBOOLE_0:def 3;
suppose x in Pn;

then consider n such that A8: x = ( prop n );
take P(n);
thus (x = ( VERUM ) implies P(n) = V()) by A8,CKB42:1;
let k;
assume x = ( prop k );
hence thesis by A8,CKB34:1;
end;
suppose A9: x in { ( VERUM ) };

take V();
x = ( VERUM ) by A9,TARSKI:def 1;
hence thesis by CKB42:1;
end;
end;
consider M0 being (ManySortedSet of Y0) such that A10: (for x being set holds (x in Y0 implies P[ x,( M0 . x ) ])) from PBOOLE:sch 3(A6);
A11: (for p holds (for q holds ((not ( p '&' q ) in Y0) & (not ( p => q ) in Y0))))
proof
let p;
let q;
assume A12: (not thesis);
per cases  by A12,XBOOLE_0:def 3;
suppose (( p '&' q ) in { ( VERUM ) } or ( p => q ) in { ( VERUM ) });

then (( p '&' q ) = ( VERUM ) or ( p => q ) = ( VERUM )) by TARSKI:def 1;
hence contradiction by CKB36:1,CKB38:1;
end;
suppose ( p '&' q ) in Pn;

then (ex n st ( p '&' q ) = ( prop n ));
hence contradiction by CKB37:1;
end;
suppose ( p => q ) in Pn;

then (ex n st ( p => q ) = ( prop n ));
hence contradiction by CKB39:1;
end;
end;
then A13: ((for p holds (for q holds ((( p '&' q ) in Y0 or ( p => q ) in Y0) implies (p in Y0 & q in Y0)))) & (for p holds (for q holds (( p '&' q ) in Y0 implies (for x,y,z being set holds (((x = ( M0 . p ) & y = ( M0 . q )) & z = ( M0 . ( p '&' q ) )) implies C[ p,q,x,y,z ]))))));
A14: (for n holds ( prop n ) in Y0)
proof
let k;
( prop k ) in Pn;
hence thesis by XBOOLE_0:def 3;
end;
A15: (for n holds ( M0 . ( prop n ) ) = P(n))
proof
let n;
( prop n ) in Y0 by A14;
hence thesis by A10;
end;
( VERUM ) in { ( VERUM ) } by TARSKI:def 1;
then A16: ( VERUM ) in Y0 by XBOOLE_0:def 3;
A17: (for Z being set holds (((Z <> ( {} ) & Z c= X) & Z is  c=-linear) implies ( union Z ) in X))
proof
defpred P[ set,set ]
 means
(ex M being (ManySortedSet of $1) st ((((M = $2 & ( M . ( VERUM ) ) = V()) & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in $1 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in $1 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))));
let Z being set;
assume that
A18: Z <> ( {} )
and
A19: Z c= X
and
A20: Z is  c=-linear;
A21: X c= ( bool ( HP-WFF ) )
proof
let x being set;
assume x in X;
then (ex Y being (Subset of ( HP-WFF )) st ((((x = Y & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))))));
hence thesis;
end;
then reconsider uZ = ( union Z ) as (Subset of ( HP-WFF )) by A19,EQREL_1:61;
consider Z0 being set such that A22: Z0 in Z by A18,XBOOLE_0:def 1;
A23: (for x being set holds (x in Z implies (ex y being set st P[ x,y ])))
proof
let x being set;
assume x in Z;
then x in X by A19;
then consider Y being (Subset of ( HP-WFF )) such that A24: Y = x and ( VERUM ) in Y and (for n holds ( prop n ) in Y) and (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y)))) and A25: (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))));
consider M being (ManySortedSet of Y) such that A26: ((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & ((for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ]))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))) by A25;
take M;
thus thesis by A24,A26;
end;
consider MM being (ManySortedSet of Z) such that A27: (for x being set holds (x in Z implies P[ x,( MM . x ) ])) from PBOOLE:sch 3(A23);
( rng MM ) is  functional
proof
let y being set;
assume y in ( rng MM );
then consider x being set such that A28: x in ( dom MM ) and A29: y = ( MM . x ) by FUNCT_1:def 3;
x in Z by A28,PARTFUN1:def 2;
then P[ x,y ] by A27,A29;
hence thesis;
end;
then reconsider rr = ( rng MM ) as  functional set;
A30: (for f,g being Function holds (((f in rr & g in rr) & ( dom f ) c= ( dom g )) implies f tolerates g))
proof
let f being Function;
let g being Function;
assume f in rr;
then consider x1 being set such that A31: x1 in ( dom MM ) and A32: f = ( MM . x1 ) by FUNCT_1:def 3;
A33: x1 in Z by A31,PARTFUN1:def 2;
then A34: (ex M being (ManySortedSet of x1) st ((((M = f & ( M . ( VERUM ) ) = V()) & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in x1 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in x1 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))) by A27,A32;
then A35: x1 = ( dom f ) by PARTFUN1:def 2;
assume g in rr;
then consider x2 being set such that A36: x2 in ( dom MM ) and A37: g = ( MM . x2 ) by FUNCT_1:def 3;
defpred P[ (Element of ( HP-WFF )) ]
 means
($1 in x1 implies ( f . $1 ) = ( g . $1 ));
assume A38: ( dom f ) c= ( dom g );
x2 in Z by A36,PARTFUN1:def 2;
then A39: (ex M being (ManySortedSet of x2) st ((((M = g & ( M . ( VERUM ) ) = V()) & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in x2 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in x2 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))) by A27,A37;
A40: (for n holds P[ ( prop n ) ])
proof
let n;
assume that
( prop n ) in x1;
thus ( f . ( prop n ) ) = P(n) by A34
.= ( g . ( prop n ) ) by A39;
end;
A41: x1 in X by A19,A33;
A42: (for r holds (for s holds ((P[ r ] & P[ s ]) implies (P[ ( r '&' s ) ] & P[ ( r => s ) ]))))
proof
A43: ((ex Y being (Subset of ( HP-WFF )) st ((((Y = x1 & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))))) & x1 c= x2) by A39,A38,A35,A41,PARTFUN1:def 2;
let r;
let s;
assume that
A44: ((r in x1 implies ( f . r ) = ( g . r )) & (s in x1 implies ( f . s ) = ( g . s )));
thus (( r '&' s ) in x1 implies ( f . ( r '&' s ) ) = ( g . ( r '&' s ) ))
proof
assume ( r '&' s ) in x1;
then (C[ r,s,( g . r ),( g . s ),( f . ( r '&' s ) ) ] & C[ r,s,( g . r ),( g . s ),( g . ( r '&' s ) ) ]) by A34,A39,A44,A43;
hence thesis by A3;
end;

thus (( r => s ) in x1 implies ( f . ( r => s ) ) = ( g . ( r => s ) ))
proof
assume ( r => s ) in x1;
then (I[ r,s,( g . r ),( g . s ),( f . ( r => s ) ) ] & I[ r,s,( g . r ),( g . s ),( g . ( r => s ) ) ]) by A34,A39,A44,A43;
hence thesis by A4;
end;

end;
let x being set;
assume x in ( ( dom f ) /\ ( dom g ) );
then A45: x in x1 by A38,A35,XBOOLE_1:28;
A46: P[ ( VERUM ) ] by A34,A39;
(for p holds P[ p ]) from CKB21:sch 1(A46,A40,A42);
hence thesis by A21,A45,A41;
end;
(for f,g being Function holds ((f in rr & g in rr) implies f tolerates g))
proof
let f being Function;
let g being Function;
assume A47: f in rr;
then consider x1 being set such that A48: x1 in ( dom MM ) and A49: f = ( MM . x1 ) by FUNCT_1:def 3;
A50: x1 in Z by A48,PARTFUN1:def 2;
then (ex M being (ManySortedSet of x1) st ((((M = f & ( M . ( VERUM ) ) = V()) & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in x1 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in x1 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))) by A27,A49;
then A51: x1 = ( dom f ) by PARTFUN1:def 2;
assume A52: g in rr;
then consider x2 being set such that A53: x2 in ( dom MM ) and A54: g = ( MM . x2 ) by FUNCT_1:def 3;
A55: x2 in Z by A53,PARTFUN1:def 2;
then x1,x2 are_c=-comparable  by A20,A50,ORDINAL1:def 8;
then A56: (x1 c= x2 or x2 c= x1) by XBOOLE_0:def 9;
(ex M being (ManySortedSet of x2) st ((((M = g & ( M . ( VERUM ) ) = V()) & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in x2 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in x2 implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))) by A27,A54,A55;
then x2 = ( dom g ) by PARTFUN1:def 2;
hence thesis by A30,A47,A52,A51,A56;
end;
then ( union rr ) is Function by WELLFND1:1;
then reconsider M = ( Union MM ) as Function by CARD_3:def 4;
(for x being set holds (x in Z implies ( MM . x ) is (ManySortedSet of x)))
proof
let x being set;
assume x in Z;
then P[ x,( MM . x ) ] by A27;
hence thesis;
end;
then ( dom M ) = uZ by CKB1:1;
then reconsider M as (ManySortedSet of uZ) by PARTFUN1:def 2,RELAT_1:def 18;
A57: M = ( union rr ) by CARD_3:def 4;
A58: (for p holds (for q holds (( p '&' q ) in uZ implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))
proof
let p;
let q;
assume ( p '&' q ) in uZ;
then consider Z1 being set such that A59: ( p '&' q ) in Z1 and A60: Z1 in Z by TARSKI:def 4;
Z1 in ( dom MM ) by A60,PARTFUN1:def 2;
then ( MM . Z1 ) in rr by FUNCT_1:def 3;
then A61: ( MM . Z1 ) c= M by A57,ZFMISC_1:74;
let x being set;
let y being set;
let z being set;
assume that
A62: x = ( M . p )
and
A63: y = ( M . q )
and
A64: z = ( M . ( p '&' q ) );
consider MZ1 being (ManySortedSet of Z1) such that A65: MZ1 = ( MM . Z1 ) and ( MZ1 . ( VERUM ) ) = V() and (for n holds ( MZ1 . ( prop n ) ) = P(n)) and A66: (for p holds (for q holds (( p '&' q ) in Z1 implies (for x,y,z being set holds (((x = ( MZ1 . p ) & y = ( MZ1 . q )) & z = ( MZ1 . ( p '&' q ) )) implies C[ p,q,x,y,z ]))))) and (for p holds (for q holds (( p => q ) in Z1 implies (for x,y,z being set holds (((x = ( MZ1 . p ) & y = ( MZ1 . q )) & z = ( MZ1 . ( p => q ) )) implies I[ p,q,x,y,z ]))))) by A27,A60;
( p '&' q ) in ( dom MZ1 ) by A59,PARTFUN1:def 2;
then A67: z = ( MZ1 . ( p '&' q ) ) by A65,A61,A64,GRFUNC_1:2;
Z1 in X by A19,A60;
then A68: (ex Y being (Subset of ( HP-WFF )) st ((((Z1 = Y & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))))));
then q in Z1 by A59;
then q in ( dom MZ1 ) by PARTFUN1:def 2;
then A69: y = ( MZ1 . q ) by A65,A61,A63,GRFUNC_1:2;
p in Z1 by A59,A68;
then p in ( dom MZ1 ) by PARTFUN1:def 2;
then x = ( MZ1 . p ) by A65,A61,A62,GRFUNC_1:2;
hence thesis by A59,A66,A69,A67;
end;
Z0 in ( dom MM ) by A22,PARTFUN1:def 2;
then ( MM . Z0 ) in rr by FUNCT_1:def 3;
then A70: ( MM . Z0 ) c= M by A57,ZFMISC_1:74;
consider MZ0 being (ManySortedSet of Z0) such that A71: MZ0 = ( MM . Z0 ) and A72: ( MZ0 . ( VERUM ) ) = V() and A73: (for n holds ( MZ0 . ( prop n ) ) = P(n)) and (for p holds (for q holds (( p '&' q ) in Z0 implies (for x,y,z being set holds (((x = ( MZ0 . p ) & y = ( MZ0 . q )) & z = ( MZ0 . ( p '&' q ) )) implies C[ p,q,x,y,z ]))))) and (for p holds (for q holds (( p => q ) in Z0 implies (for x,y,z being set holds (((x = ( MZ0 . p ) & y = ( MZ0 . q )) & z = ( MZ0 . ( p => q ) )) implies I[ p,q,x,y,z ]))))) by A22,A27;
A74: Y0 c= Z0
proof
let x being set;
Z0 in X by A19,A22;
then A75: (ex Y being (Subset of ( HP-WFF )) st ((((Y = Z0 & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))))));
assume A76: x in Y0;
per cases  by A76,XBOOLE_0:def 3;
suppose x in { ( VERUM ) };

hence thesis by A75,TARSKI:def 1;
end;
suppose x in Pn;

then (ex n st x = ( prop n ));
hence thesis by A75;
end;
end;
then A77: Y0 c= ( dom MZ0 ) by PARTFUN1:def 2;
A78: (for n holds ( M . ( prop n ) ) = P(n))
proof
let n;
( prop n ) in Y0 by A14;
hence ( M . ( prop n ) ) = ( MZ0 . ( prop n ) ) by A70,A71,A77,GRFUNC_1:2
.= P(n) by A73;
end;
A79: (for p holds (for q holds (( p => q ) in uZ implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))
proof
let p;
let q;
assume ( p => q ) in uZ;
then consider Z1 being set such that A80: ( p => q ) in Z1 and A81: Z1 in Z by TARSKI:def 4;
Z1 in ( dom MM ) by A81,PARTFUN1:def 2;
then ( MM . Z1 ) in rr by FUNCT_1:def 3;
then A82: ( MM . Z1 ) c= M by A57,ZFMISC_1:74;
let x being set;
let y being set;
let z being set;
assume that
A83: x = ( M . p )
and
A84: y = ( M . q )
and
A85: z = ( M . ( p => q ) );
consider MZ1 being (ManySortedSet of Z1) such that A86: MZ1 = ( MM . Z1 ) and ( MZ1 . ( VERUM ) ) = V() and (for n holds ( MZ1 . ( prop n ) ) = P(n)) and (for p holds (for q holds (( p '&' q ) in Z1 implies (for x,y,z being set holds (((x = ( MZ1 . p ) & y = ( MZ1 . q )) & z = ( MZ1 . ( p '&' q ) )) implies C[ p,q,x,y,z ]))))) and A87: (for p holds (for q holds (( p => q ) in Z1 implies (for x,y,z being set holds (((x = ( MZ1 . p ) & y = ( MZ1 . q )) & z = ( MZ1 . ( p => q ) )) implies I[ p,q,x,y,z ]))))) by A27,A81;
( p => q ) in ( dom MZ1 ) by A80,PARTFUN1:def 2;
then A88: z = ( MZ1 . ( p => q ) ) by A86,A82,A85,GRFUNC_1:2;
Z1 in X by A19,A81;
then A89: (ex Y being (Subset of ( HP-WFF )) st ((((Z1 = Y & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))))));
then q in Z1 by A80;
then q in ( dom MZ1 ) by PARTFUN1:def 2;
then A90: y = ( MZ1 . q ) by A86,A82,A84,GRFUNC_1:2;
p in Z1 by A80,A89;
then p in ( dom MZ1 ) by PARTFUN1:def 2;
then x = ( MZ1 . p ) by A86,A82,A83,GRFUNC_1:2;
hence thesis by A80,A87,A90,A88;
end;
A91: (for p holds (for q holds ((( p '&' q ) in uZ or ( p => q ) in uZ) implies (p in uZ & q in uZ))))
proof
let p;
let q;
assume A92: (( p '&' q ) in uZ or ( p => q ) in uZ);
per cases  by A92;
suppose ( p '&' q ) in uZ;

then consider Z0 being set such that A93: ( p '&' q ) in Z0 and A94: Z0 in Z by TARSKI:def 4;
Z0 in X by A19,A94;
then (ex Y being (Subset of ( HP-WFF )) st ((((Z0 = Y & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))))));
then (p in Z0 & q in Z0) by A93;
hence thesis by A94,TARSKI:def 4;
end;
suppose ( p => q ) in uZ;

then consider Z0 being set such that A95: ( p => q ) in Z0 and A96: Z0 in Z by TARSKI:def 4;
Z0 in X by A19,A96;
then (ex Y being (Subset of ( HP-WFF )) st ((((Z0 = Y & ( VERUM ) in Y) & (for n holds ( prop n ) in Y)) & (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y))))) & (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ])))))))));
then (p in Z0 & q in Z0) by A95;
hence thesis by A96,TARSKI:def 4;
end;
end;
Z0 c= uZ by A22,ZFMISC_1:74;
then A97: Y0 c= uZ by A74,XBOOLE_1:1;
A98: (for n holds ( prop n ) in uZ)
proof
let n;
( prop n ) in Y0 by A14;
hence thesis by A97;
end;
( M . ( VERUM ) ) = V() by A16,A70,A71,A72,A77,GRFUNC_1:2;
hence thesis by A16,A97,A98,A91,A78,A58,A79;
end;
A99: (for p holds (for q holds (( p => q ) in Y0 implies (for x,y,z being set holds (((x = ( M0 . p ) & y = ( M0 . q )) & z = ( M0 . ( p => q ) )) implies I[ p,q,x,y,z ]))))) by A11;
( M0 . ( VERUM ) ) = V() by A10,A16;
then Y0 in X by A16,A14,A15,A13,A99;
then consider H being set such that A100: H in X and A101: (for Z being set holds ((Z in X & Z <> H) implies (not H c= Z))) by A17,ORDERS_1:67;
consider Y being (Subset of ( HP-WFF )) such that A102: Y = H and A103: ( VERUM ) in Y and A104: (for n holds ( prop n ) in Y) and A105: (for p holds (for q holds ((( p '&' q ) in Y or ( p => q ) in Y) implies (p in Y & q in Y)))) and A106: (ex M being (ManySortedSet of Y) st (((( M . ( VERUM ) ) = V() & (for n holds ( M . ( prop n ) ) = P(n))) & (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))) & (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))))) by A100;
consider M being (ManySortedSet of Y) such that A107: ( M . ( VERUM ) ) = V() and A108: (for n holds ( M . ( prop n ) ) = P(n)) and A109: (for p holds (for q holds (( p '&' q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p '&' q ) )) implies C[ p,q,x,y,z ]))))) and A110: (for p holds (for q holds (( p => q ) in Y implies (for x,y,z being set holds (((x = ( M . p ) & y = ( M . q )) & z = ( M . ( p => q ) )) implies I[ p,q,x,y,z ]))))) by A106;
A111: Y = ( HP-WFF )
proof
defpred P[ (Element of ( HP-WFF )) ]
 means
$1 in Y;
A112: (for n holds P[ ( prop n ) ]) by A104;
A113: (for r holds (for s holds ((P[ r ] & P[ s ]) implies (P[ ( r '&' s ) ] & P[ ( r => s ) ]))))
proof
let r;
let s;
assume that
A114: (r in Y & s in Y);
assume A115: (not thesis);
per cases  by A115;
suppose A116: (not ( r '&' s ) in Y);

{ ( r '&' s ) } c= ( HP-WFF ) by ZFMISC_1:31;
then reconsider Y9 = ( Y \/ { ( r '&' s ) } ) as (Subset of ( HP-WFF )) by XBOOLE_1:8;
consider CMrMs being set such that A117: C[ r,s,( M . r ),( M . s ),CMrMs ] by A1;
set N = ( M +* ( ( r '&' s ) .--> CMrMs ) );
A118: ( dom ( ( r '&' s ) .--> CMrMs ) ) = { ( r '&' s ) } by FUNCOP_1:13;
( dom M ) = Y by PARTFUN1:def 2;
then ( dom N ) = Y9 by A118,FUNCT_4:def 1;
then reconsider N as (ManySortedSet of Y9) by PARTFUN1:def 2,RELAT_1:def 18;
( r '&' s ) in { ( r '&' s ) } by TARSKI:def 1;
then A119: ( r '&' s ) in Y9 by XBOOLE_0:def 3;
A120: (for p holds (for q holds (( p => q ) in Y9 implies (for x,y,z being set holds (((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p => q ) )) implies I[ p,q,x,y,z ])))))
proof
let p;
let q;
assume that
A121: ( p => q ) in Y9;
( p => q ) <> ( r '&' s ) by CKB35:1;
then A122: (not ( p => q ) in { ( r '&' s ) }) by TARSKI:def 1;
then A123: ( p => q ) in Y by A121,XBOOLE_0:def 3;
then p in Y by A105;
then (not p in { ( r '&' s ) }) by A116,TARSKI:def 1;
then A124: ( N . p ) = ( M . p ) by A118,FUNCT_4:11;
q in Y by A105,A123;
then (not q in { ( r '&' s ) }) by A116,TARSKI:def 1;
then A125: ( N . q ) = ( M . q ) by A118,FUNCT_4:11;
A126: ( N . ( p => q ) ) = ( M . ( p => q ) ) by A118,A122,FUNCT_4:11;
let x being set;
let y being set;
let z being set;
assume ((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p => q ) ));
hence thesis by A110,A123,A124,A125,A126;
end;
A127: (for n holds ( N . ( prop n ) ) = P(n))
proof
let n;
( prop n ) <> ( r '&' s ) by CKB37:1;
then (not ( prop n ) in { ( r '&' s ) }) by TARSKI:def 1;
hence ( N . ( prop n ) ) = ( M . ( prop n ) ) by A118,FUNCT_4:11
.= P(n) by A108;
end;
A128: (for p holds (for q holds (( p '&' q ) in Y9 implies (for x,y,z being set holds (((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))
proof
let p;
let q;
assume that
A129: ( p '&' q ) in Y9;
let x being set;
let y being set;
let z being set;
assume that
A130: ((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p '&' q ) ));
per cases ;
suppose A131: ( p '&' q ) = ( r '&' s );

q <> ( p '&' q ) by CKB40:1;
then (not q in { ( r '&' s ) }) by A131,TARSKI:def 1;
then A132: ( N . q ) = ( M . q ) by A118,FUNCT_4:11;
p <> ( p '&' q ) by CKB40:1;
then (not p in { ( r '&' s ) }) by A131,TARSKI:def 1;
then A133: ( N . p ) = ( M . p ) by A118,FUNCT_4:11;
( p '&' q ) in { ( r '&' s ) } by A131,TARSKI:def 1;
then A134: ( N . ( p '&' q ) ) = ( ( ( r '&' s ) .--> CMrMs ) . ( p '&' q ) ) by A118,FUNCT_4:13;
(p = r & q = s) by A131,CKB32:1;
hence thesis by A117,A130,A133,A132,A134,FUNCOP_1:72;
end;
suppose ( p '&' q ) <> ( r '&' s );

then A135: (not ( p '&' q ) in { ( r '&' s ) }) by TARSKI:def 1;
then A136: ( p '&' q ) in Y by A129,XBOOLE_0:def 3;
then p in Y by A105;
then (not p in { ( r '&' s ) }) by A116,TARSKI:def 1;
then A137: ( N . p ) = ( M . p ) by A118,FUNCT_4:11;
q in Y by A105,A136;
then (not q in { ( r '&' s ) }) by A116,TARSKI:def 1;
then A138: ( N . q ) = ( M . q ) by A118,FUNCT_4:11;
( N . ( p '&' q ) ) = ( M . ( p '&' q ) ) by A118,A135,FUNCT_4:11;
hence thesis by A109,A130,A136,A137,A138;
end;
end;
A139: Y c= Y9 by XBOOLE_1:7;
A140:now
let n;
( prop n ) in Y by A104;
hence ( prop n ) in Y9 by A139;
end;
A141: (for p holds (for q holds ((( p '&' q ) in Y9 or ( p => q ) in Y9) implies (p in Y9 & q in Y9))))
proof
let p;
let q;
assume that
A142: (( p '&' q ) in Y9 or ( p => q ) in Y9);
per cases  by A142;
suppose ( p '&' q ) = ( r '&' s );

then (p = r & q = s) by CKB32:1;
hence thesis by A114,A139;
end;
suppose that A143: ( p '&' q ) in Y9
and
A144: ( p '&' q ) <> ( r '&' s );
(not ( p '&' q ) in { ( r '&' s ) }) by A144,TARSKI:def 1;
then ( p '&' q ) in Y by A143,XBOOLE_0:def 3;
then (p in Y & q in Y) by A105;
hence thesis by A139;
end;
suppose A145: ( p => q ) in Y9;

( p => q ) <> ( r '&' s ) by CKB35:1;
then (not ( p => q ) in { ( r '&' s ) }) by TARSKI:def 1;
then ( p => q ) in Y by A145,XBOOLE_0:def 3;
then (p in Y & q in Y) by A105;
hence thesis by A139;
end;
end;
( VERUM ) <> ( r '&' s ) by CKB36:1;
then (not ( VERUM ) in { ( r '&' s ) }) by TARSKI:def 1;
then ( N . ( VERUM ) ) = V() by A107,A118,FUNCT_4:11;
then Y9 in X by A103,A139,A140,A141,A127,A128,A120;
hence contradiction by A101,A102,A116,A119,XBOOLE_1:7;
end;
suppose A146: (not ( r => s ) in Y);

{ ( r => s ) } c= ( HP-WFF ) by ZFMISC_1:31;
then reconsider Y9 = ( Y \/ { ( r => s ) } ) as (Subset of ( HP-WFF )) by XBOOLE_1:8;
consider IMrMs being set such that A147: I[ r,s,( M . r ),( M . s ),IMrMs ] by A2;
set N = ( M +* ( ( r => s ) .--> IMrMs ) );
A148: ( dom ( ( r => s ) .--> IMrMs ) ) = { ( r => s ) } by FUNCOP_1:13;
( dom M ) = Y by PARTFUN1:def 2;
then ( dom N ) = Y9 by A148,FUNCT_4:def 1;
then reconsider N as (ManySortedSet of Y9) by PARTFUN1:def 2,RELAT_1:def 18;
( r => s ) in { ( r => s ) } by TARSKI:def 1;
then A149: ( r => s ) in Y9 by XBOOLE_0:def 3;
A150: (for p holds (for q holds (( p '&' q ) in Y9 implies (for x,y,z being set holds (((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p '&' q ) )) implies C[ p,q,x,y,z ])))))
proof
let p;
let q;
assume that
A151: ( p '&' q ) in Y9;
( p '&' q ) <> ( r => s ) by CKB35:1;
then A152: (not ( p '&' q ) in { ( r => s ) }) by TARSKI:def 1;
then A153: ( p '&' q ) in Y by A151,XBOOLE_0:def 3;
then p in Y by A105;
then (not p in { ( r => s ) }) by A146,TARSKI:def 1;
then A154: ( N . p ) = ( M . p ) by A148,FUNCT_4:11;
q in Y by A105,A153;
then (not q in { ( r => s ) }) by A146,TARSKI:def 1;
then A155: ( N . q ) = ( M . q ) by A148,FUNCT_4:11;
A156: ( N . ( p '&' q ) ) = ( M . ( p '&' q ) ) by A148,A152,FUNCT_4:11;
let x being set;
let y being set;
let z being set;
assume ((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p '&' q ) ));
hence thesis by A109,A153,A154,A155,A156;
end;
A157: (for n holds ( N . ( prop n ) ) = P(n))
proof
let n;
( prop n ) <> ( r => s ) by CKB39:1;
then (not ( prop n ) in { ( r => s ) }) by TARSKI:def 1;
hence ( N . ( prop n ) ) = ( M . ( prop n ) ) by A148,FUNCT_4:11
.= P(n) by A108;
end;
A158: (for p holds (for q holds (( p => q ) in Y9 implies (for x,y,z being set holds (((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p => q ) )) implies I[ p,q,x,y,z ])))))
proof
let p;
let q;
assume that
A159: ( p => q ) in Y9;
let x being set;
let y being set;
let z being set;
assume that
A160: ((x = ( N . p ) & y = ( N . q )) & z = ( N . ( p => q ) ));
per cases ;
suppose A161: ( p => q ) = ( r => s );

q <> ( p => q ) by CKB41:1;
then (not q in { ( r => s ) }) by A161,TARSKI:def 1;
then A162: ( N . q ) = ( M . q ) by A148,FUNCT_4:11;
p <> ( p => q ) by CKB41:1;
then (not p in { ( r => s ) }) by A161,TARSKI:def 1;
then A163: ( N . p ) = ( M . p ) by A148,FUNCT_4:11;
( p => q ) in { ( r => s ) } by A161,TARSKI:def 1;
then A164: ( N . ( p => q ) ) = ( ( ( r => s ) .--> IMrMs ) . ( p => q ) ) by A148,FUNCT_4:13;
(p = r & q = s) by A161,CKB33:1;
hence thesis by A147,A160,A163,A162,A164,FUNCOP_1:72;
end;
suppose ( p => q ) <> ( r => s );

then A165: (not ( p => q ) in { ( r => s ) }) by TARSKI:def 1;
then A166: ( p => q ) in Y by A159,XBOOLE_0:def 3;
then p in Y by A105;
then (not p in { ( r => s ) }) by A146,TARSKI:def 1;
then A167: ( N . p ) = ( M . p ) by A148,FUNCT_4:11;
q in Y by A105,A166;
then (not q in { ( r => s ) }) by A146,TARSKI:def 1;
then A168: ( N . q ) = ( M . q ) by A148,FUNCT_4:11;
( N . ( p => q ) ) = ( M . ( p => q ) ) by A148,A165,FUNCT_4:11;
hence thesis by A110,A160,A166,A167,A168;
end;
end;
A169: Y c= Y9 by XBOOLE_1:7;
A170:now
let n;
( prop n ) in Y by A104;
hence ( prop n ) in Y9 by A169;
end;
A171: (for p holds (for q holds ((( p '&' q ) in Y9 or ( p => q ) in Y9) implies (p in Y9 & q in Y9))))
proof
let p;
let q;
assume that
A172: (( p '&' q ) in Y9 or ( p => q ) in Y9);
per cases  by A172;
suppose ( p => q ) = ( r => s );

then (p = r & q = s) by CKB33:1;
hence thesis by A114,A169;
end;
suppose that A173: ( p => q ) in Y9
and
A174: ( p => q ) <> ( r => s );
(not ( p => q ) in { ( r => s ) }) by A174,TARSKI:def 1;
then ( p => q ) in Y by A173,XBOOLE_0:def 3;
then (p in Y & q in Y) by A105;
hence thesis by A169;
end;
suppose A175: ( p '&' q ) in Y9;

( p '&' q ) <> ( r => s ) by CKB35:1;
then (not ( p '&' q ) in { ( r => s ) }) by TARSKI:def 1;
then ( p '&' q ) in Y by A175,XBOOLE_0:def 3;
then (p in Y & q in Y) by A105;
hence thesis by A169;
end;
end;
( VERUM ) <> ( r => s ) by CKB38:1;
then (not ( VERUM ) in { ( r => s ) }) by TARSKI:def 1;
then ( N . ( VERUM ) ) = V() by A107,A148,FUNCT_4:11;
then Y9 in X by A103,A169,A170,A171,A157,A158,A150;
hence contradiction by A101,A102,A146,A149,XBOOLE_1:7;
end;
end;
A176: P[ ( VERUM ) ] by A103;
(for s holds P[ s ]) from CKB21:sch 1(A176,A112,A113);
hence thesis by SUBSET_1:28;
end;
then reconsider M as (ManySortedSet of ( HP-WFF ));
take M;
thus thesis by A107,A108,A109,A110,A111;
end;
