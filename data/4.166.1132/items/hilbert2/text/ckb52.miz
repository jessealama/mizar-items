environ
vocabularies NUMBERS,PBOOLE,FUNCT_1,CARD_3,RELAT_1,TARSKI,FINSEQ_1,ORDINAL4,XBOOLE_0,SUBSET_1,HILBERT1,TREES_1,TREES_A,CARD_1,ARYTM_3,TREES_2,TREES_4,TREES_3,TREES_9,FUNCT_6,QC_LANG1,XBOOLEAN,ZF_LANG,GLIB_000,XXREAL_0,NAT_1,ORDINAL1,ZFMISC_1,PARTFUN1,FUNCT_4,FUNCOP_1,HILBERT2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_3,RELAT_1,ORDINAL1,FUNCT_1,PARTFUN1,NAT_1,FINSEQ_1,FUNCOP_1,FUNCT_4,FUNCT_6,PBOOLE,TREES_1,TREES_2,TREES_3,TREES_4,TREES_9,HILBERT1,XXREAL_0,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB45,CKB46;
definitions TARSKI,FUNCT_1,HILBERT1,PARTFUN1,FUNCOP_1,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB45,CKB46;
theorems PBOOLE,ZFMISC_1,FUNCT_1,HILBERT1,ORDERS_1,SUBSET_1,TARSKI,FUNCT_4,FUNCOP_1,WELLFND1,CARD_3,GRFUNC_1,NAT_1,FINSEQ_1,TREES_1,TREES_4,TREES_2,TREES_9,FINSEQ_2,TREES_3,RELAT_1,ORDINAL1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,CARD_1,PARTFUN1,EQREL_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51;
schemes PBOOLE,NAT_1,FINSEQ_1,CKB6,CKB21,CKB43,CKB44;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,XREAL_0,NAT_1,FINSEQ_1,TREES_2,TREES_3,HILBERT1,TREES_4,CKB10,CKB11,CKB12;
constructors PARTFUN1,FUNCT_4,XXREAL_0,XREAL_0,NAT_1,CARD_3,PBOOLE,TREES_4,TREES_9,HILBERT1,RELSET_1,CKB13,CKB18,CKB19,CKB20,CKB45,CKB46;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve p for (Element of ( HP-WFF ));
reserve q for (Element of ( HP-WFF ));
reserve r for (Element of ( HP-WFF ));
reserve s for (Element of ( HP-WFF ));
theorem
Th35: (for f being (Element of ( dom ( Subformulae p ) )) holds ( ( Subformulae p ) | f ) = ( Subformulae ( ( Subformulae p ) . f ) ))
proof
let f being (Element of ( dom ( Subformulae p ) ));
defpred P[ (FinSequence of ( NAT )) ]
 means
(ex q being (Element of ( HP-WFF )) st (q = ( ( Subformulae p ) . $1 ) & ( ( Subformulae p ) | $1 ) = ( Subformulae q )));
A1: (for f being (Element of ( dom ( Subformulae p ) )) holds (P[ (f qua (FinSequence of ( NAT ))) ] implies (for n holds (( f ^ <* n *> ) in ( dom ( Subformulae p ) ) implies P[ (( f ^ <* n *> ) qua (FinSequence of ( NAT ))) ]))))
proof
let f being (Element of ( dom ( Subformulae p ) ));
given q being (Element of ( HP-WFF )) such that
q = ( ( Subformulae p ) . f )
and
A2: ( ( Subformulae p ) | f ) = ( Subformulae q );

let n;
assume that
A3: ( f ^ <* n *> ) in ( dom ( Subformulae p ) );
A4: ( ( Subformulae p ) | ( f ^ <* n *> ) ) = ( ( Subformulae q ) | <* n *> ) by A2,A3,TREES_9:3;
A5: ( ( dom ( Subformulae p ) ) | f ) = ( dom ( Subformulae q ) ) by A2,TREES_2:def 10;
then A6: <* n *> in ( dom ( Subformulae q ) ) by A3,TREES_1:def 6;
then A7: ( ( Subformulae p ) . ( f ^ <* n *> ) ) = ( ( Subformulae q ) . <* n *> ) by A2,A5,TREES_2:def 10;
per cases  by CKB22:1;
suppose q is  conjunctive;

then consider r,s such that A8: q = ( r '&' s ) by CKB18:def 1;
A9: ( Subformulae q ) = ( ( r '&' s ) -tree (( Subformulae r ),( Subformulae s )) ) by A8,CKB49:1;
then A10: ( dom ( Subformulae q ) ) = ( tree (( dom ( Subformulae r ) ),( dom ( Subformulae s ) )) ) by TREES_4:14;
now
per cases  by A6,A10,CKB5:1;
suppose A11: n = ( 0 );

take r;
thus r = ( ( Subformulae r ) . ( {} ) ) by CKB51:1
.= ( ( Subformulae p ) . ( f ^ <* n *> ) ) by A7,A9,A11,CKB8:1;
thus ( ( Subformulae p ) | ( f ^ <* n *> ) ) = ( Subformulae r ) by A4,A9,A11,CKB9:1;
end;
suppose A12: n = 1;

take s;
thus s = ( ( Subformulae s ) . ( {} ) ) by CKB51:1
.= ( ( Subformulae p ) . ( f ^ <* n *> ) ) by A7,A9,A12,CKB8:1;
thus ( ( Subformulae p ) | ( f ^ <* n *> ) ) = ( Subformulae s ) by A4,A9,A12,CKB9:1;
end;
end;
hence thesis;
end;
suppose q is  conditional;

then consider r,s such that A13: q = ( r => s ) by CKB19:def 1;
A14: ( Subformulae q ) = ( ( r => s ) -tree (( Subformulae r ),( Subformulae s )) ) by A13,CKB50:1;
then A15: ( dom ( Subformulae q ) ) = ( tree (( dom ( Subformulae r ) ),( dom ( Subformulae s ) )) ) by TREES_4:14;
now
per cases  by A6,A15,CKB5:1;
suppose A16: n = ( 0 );

take r;
thus r = ( ( Subformulae r ) . ( {} ) ) by CKB51:1
.= ( ( Subformulae p ) . ( f ^ <* n *> ) ) by A7,A14,A16,CKB8:1;
thus ( ( Subformulae p ) | ( f ^ <* n *> ) ) = ( Subformulae r ) by A4,A14,A16,CKB9:1;
end;
suppose A17: n = 1;

take s;
thus s = ( ( Subformulae s ) . ( {} ) ) by CKB51:1
.= ( ( Subformulae p ) . ( f ^ <* n *> ) ) by A7,A14,A17,CKB8:1;
thus ( ( Subformulae p ) | ( f ^ <* n *> ) ) = ( Subformulae s ) by A4,A14,A17,CKB9:1;
end;
end;
hence thesis;
end;
suppose q is  simple;

then consider k such that A18: q = ( prop k ) by CKB20:def 1;
( Subformulae q ) = ( root-tree ( prop k ) ) by A18,CKB45:def 1;
then ( dom ( Subformulae q ) ) = { ( {} ) } by TREES_1:29,TREES_4:3;
hence thesis by A6,TARSKI:def 1;
end;
suppose q = ( VERUM );

then ( dom ( Subformulae q ) ) = { ( {} ) } by CKB47:1,TREES_1:29,TREES_4:3;
hence thesis by A6,TARSKI:def 1;
end;
end;
( ( Subformulae p ) . ( {} ) ) = p by CKB51:1;
then A19: P[ (( <*> ( NAT ) ) qua (FinSequence of ( NAT ))) ] by TREES_9:1;
(for f being (Element of ( dom ( Subformulae p ) )) holds P[ (f qua (FinSequence of ( NAT ))) ]) from CKB6:sch 1(A19,A1);
then P[ (f qua (FinSequence of ( NAT ))) ];
hence thesis;
end;
