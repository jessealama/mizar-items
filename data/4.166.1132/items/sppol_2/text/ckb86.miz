environ
vocabularies NUMBERS,SUBSET_1,EUCLID,FINSEQ_1,PRE_TOPC,XREAL_0,ORDINAL1,NAT_1,ARYTM_3,RLTOPSP1,FINSEQ_5,XXREAL_0,RELAT_1,PARTFUN1,CARD_1,XBOOLE_0,RFINSEQ,ARYTM_1,ORDINAL4,FINSEQ_4,TOPREAL1,STRUCT_0,TARSKI,MCART_1,FUNCT_1,ZFMISC_1,TOPREAL4,XXREAL_1,RCOMP_1,BORSUK_1,TOPS_2,ORDINAL2,SPPOL_2;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,XXREAL_0,NAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,ZFMISC_1,FINSEQ_4,RFINSEQ,STRUCT_0,PRE_TOPC,COMPTS_1,TOPS_2,RLTOPSP1,EUCLID,BORSUK_1,TOPREAL1,TOPREAL4,FINSEQ_5,CKB73,CKB84;
definitions TARSKI,TOPREAL1,TOPREAL4,XBOOLE_0,CKB84;
theorems TARSKI,ENUMSET1,ZFMISC_1,NAT_1,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,TOPS_2,HEINE,TOPMETR,COMPTS_1,RFINSEQ,EUCLID,TOPREAL1,TOPREAL3,TOPREAL4,GOBOARD1,FINSEQ_5,RELAT_1,PARTFUN2,INT_1,XBOOLE_0,XBOOLE_1,SPPOL_1,XREAL_1,XXREAL_0,ORDINAL1,PARTFUN1,CARD_1,RLTOPSP1,SEQ_4,NAT_D,SUBSET_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB32,CKB33,CKB34,CKB35,CKB38,CKB39,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB52,CKB54,CKB55,CKB56,CKB57,CKB60,CKB61,CKB62,CKB65,CKB66,CKB68,CKB69,CKB70,CKB71,CKB72,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB83,CKB84,CKB85;
schemes FINSEQ_2;
registrations XBOOLE_0,RELAT_1,ORDINAL1,XXREAL_0,XREAL_0,MEMBERED,FINSEQ_1,FINSEQ_5,STRUCT_0,PRE_TOPC,EUCLID,TOPREAL1,NAT_1,INT_1,CARD_1,RLTOPSP1,SPPOL_1,CKB27,CKB28,CKB29,CKB30,CKB31,CKB36,CKB37,CKB40,CKB50,CKB51,CKB53,CKB58,CKB59,CKB63,CKB64,CKB67,CKB74,CKB82;
constructors XXREAL_0,NAT_1,FINSEQ_4,ZFMISC_1,RFINSEQ,BINARITH,FINSEQ_5,TOPS_2,COMPTS_1,TOPMETR,TOPREAL1,TOPREAL4,REAL_1,CONVEX1,CKB84;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve P for (Subset of ( TOP-REAL 2 ));
reserve f1 for (FinSequence of ( TOP-REAL 2 ));
reserve f2 for (FinSequence of ( TOP-REAL 2 ));
reserve p1 for (Point of ( TOP-REAL 2 ));
reserve p2 for (Point of ( TOP-REAL 2 ));
reserve q for (Point of ( TOP-REAL 2 ));
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
theorem
Lm16: (for f1,f2 being S-Sequence_in_R2 holds ((((((((p1 = ( f1 /. 1 ) & p1 = ( f2 /. 1 )) & p2 = ( f1 /. ( len f1 ) )) & p2 = ( f2 /. ( len f2 ) )) & ( ( L~ f1 ) /\ ( L~ f2 ) ) = { p1,p2 }) & P = ( ( L~ f1 ) \/ ( L~ f2 ) )) & q <> p1) & q in ( rng f1 )) implies (ex g1,g2 being S-Sequence_in_R2 st (((((p1 = ( g1 /. 1 ) & p1 = ( g2 /. 1 )) & q = ( g1 /. ( len g1 ) )) & q = ( g2 /. ( len g2 ) )) & ( ( L~ g1 ) /\ ( L~ g2 ) ) = { p1,q }) & P = ( ( L~ g1 ) \/ ( L~ g2 ) )))))
proof
let f1 being S-Sequence_in_R2;
let f2 being S-Sequence_in_R2;
assume that
A1: p1 = ( f1 /. 1 )
and
A2: p1 = ( f2 /. 1 )
and
A3: p2 = ( f1 /. ( len f1 ) )
and
A4: p2 = ( f2 /. ( len f2 ) )
and
A5: ( ( L~ f1 ) /\ ( L~ f2 ) ) = { p1,p2 }
and
A6: P = ( ( L~ f1 ) \/ ( L~ f2 ) )
and
A7: q <> p1
and
A8: q in ( rng f1 );
set f19 = ( Rev ( f1 :- q ) );
A9: 1 <= ( q .. f1 ) by A8,FINSEQ_4:21;
A10:now
assume A11: 1 = ( q .. f1 );
then A12: 1 in ( dom f1 ) by A8,FINSEQ_4:20;
( f1 . 1 ) = q by A8,A11,FINSEQ_4:19;
hence contradiction by A1,A7,A12,PARTFUN1:def 6;
end;
then reconsider g1 = ( f1 -: q ) as S-Sequence_in_R2 by A8,CKB79:1;
A13: 1 in ( dom g1 ) by FINSEQ_5:6;
1 in ( dom f2 ) by FINSEQ_5:6;
then 1 <= ( len f2 ) by FINSEQ_3:25;
then reconsider l = ( ( len f2 ) - 1 ) as (Element of ( NAT )) by INT_1:5;
set f29 = ( f2 | l );
A14: ( l + 1 ) = ( len f2 );
( rng f19 ) = ( rng ( f1 :- q ) ) by FINSEQ_5:57;
then A15: ( rng f19 ) c= ( rng f1 ) by A8,FINSEQ_5:55;
( len f2 ) >= 2 by TOPREAL1:def 8;
then A16: ( rng f2 ) c= ( L~ f2 ) by CKB18:1;
( len f1 ) >= 2 by TOPREAL1:def 8;
then ( rng f1 ) c= ( L~ f1 ) by CKB18:1;
then A17: ( ( rng f2 ) /\ ( rng f1 ) ) c= ( ( L~ f1 ) /\ ( L~ f2 ) ) by A16,XBOOLE_1:27;
set g2 = ( f29 ^ f19 );
A18: ( dom f29 ) = ( Seg ( len f29 ) ) by FINSEQ_1:def 3;
( len ( f1 :- q ) ) >= 1 by NAT_1:14;
then A19: ( len f19 ) >= 1 by FINSEQ_5:def 3;
then A20: ( len f19 ) in ( dom f19 ) by FINSEQ_3:25;
A21: l < ( len f2 ) by XREAL_1:44;
then A22: ( len f29 ) = l by FINSEQ_1:59;
( len f2 ) >= 2 by TOPREAL1:def 8;
then A23: ( ( len f2 ) - 1 ) >= ( ( 1 + 1 ) - 1 ) by XREAL_1:9;
then A24: l in ( dom f29 ) by A22,FINSEQ_3:25;
then A25: ( f29 /. ( len f29 ) ) = ( f2 /. l ) by A22,FINSEQ_4:70;
A26: ( f19 /. 1 ) = ( ( f1 :- q ) /. ( len ( f1 :- q ) ) ) by FINSEQ_5:65
.= ( f2 /. ( len f2 ) ) by A3,A4,A8,FINSEQ_5:54;
then A27: ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) = ( LSeg (f2,l) ) by A23,A14,A25,TOPREAL1:def 3;
A28:now
let i;
assume that
1 <= i
and
A29: ( i + 2 ) <= ( len f29 );
( ( i + 1 ) + 1 ) <= ( len f29 ) by A29;
then A30: ( i + 1 ) < ( len f29 ) by NAT_1:13;
then ( LSeg (f29,i) ) = ( LSeg (f2,i) ) by CKB3:1;
hence ( LSeg (f29,i) ) misses ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) by A22,A27,A30,TOPREAL1:def 7;
end;
A31: 1 in ( dom f1 ) by FINSEQ_5:6;
A32:now
A33: ( 1 + 1 ) <= ( len f1 ) by TOPREAL1:def 8;
p1 in ( LSeg (( f1 /. 1 ),( f1 /. ( 1 + 1 ) )) ) by A1,RLTOPSP1:68;
then A34: p1 in ( LSeg (f1,1) ) by A33,TOPREAL1:def 3;
assume p1 in ( L~ f19 );
then A35: p1 in ( L~ ( f1 :- q ) ) by CKB22:1;
then consider i such that A36: 1 <= i and ( i + 1 ) <= ( len ( f1 :- q ) ) and A37: p1 in ( LSeg (( f1 :- q ),i) ) by CKB13:1;
consider j being Nat such that A38: i = ( j + 1 ) by A36,NAT_1:6;
A39: 1 < ( q .. f1 ) by A10,A9,XXREAL_0:1;
reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
A40: ( LSeg (( f1 :- q ),i) ) = ( LSeg (f1,( j + ( q .. f1 ) )) ) by A8,A38,CKB10:1;
then p1 in ( ( LSeg (f1,1) ) /\ ( LSeg (f1,( j + ( q .. f1 ) )) ) ) by A37,A34,XBOOLE_0:def 4;
then A41: ( LSeg (f1,1) ) meets ( LSeg (f1,( j + ( q .. f1 ) )) ) by XBOOLE_0:4;
per cases ;
suppose A42: j = ( 0 );

A43: ( 1 + 1 ) <= ( q .. f1 ) by A39,NAT_1:13;
now
per cases  by A43,XXREAL_0:1;
suppose A44: ( q .. f1 ) = 2;

A45: ( q .. f1 ) <= ( len f1 ) by A8,FINSEQ_4:21;
now
per cases  by A44,A45,XXREAL_0:1;
suppose ( len f1 ) = 2;

then ( len ( f1 :- q ) ) = ( ( ( len f1 ) - ( len f1 ) ) + 1 ) by A8,A44,FINSEQ_5:50;
hence contradiction by A35,TOPREAL1:22;
end;
suppose ( len f1 ) > 2;

then ( 1 + 2 ) <= ( len f1 ) by NAT_1:13;
then ( ( LSeg (f1,1) ) /\ ( LSeg (f1,( 1 + 1 )) ) ) = { ( f1 /. ( 1 + 1 ) ) } by TOPREAL1:def 6;
then p1 in { ( f1 /. 2 ) } by A37,A34,A40,A42,A44,XBOOLE_0:def 4;
then A46: p1 = ( f1 /. 2 ) by TARSKI:def 1;
2 in ( dom f1 ) by A8,A44,FINSEQ_4:20;
hence contradiction by A1,A31,A46,PARTFUN2:10;
end;
end;
hence contradiction;
end;
suppose ( q .. f1 ) > 2;

then ( 1 + 1 ) < ( j + ( q .. f1 ) ) by A42;
hence contradiction by A41,TOPREAL1:def 7;
end;
end;
hence contradiction;
end;
suppose j <> ( 0 );

then ( 1 + 1 ) < ( j + ( q .. f1 ) ) by A39,NAT_1:14,XREAL_1:8;
hence contradiction by A41,TOPREAL1:def 7;
end;
end;
A47:now
let i;
assume that
A48: 2 <= i
and
A49: ( i + 1 ) <= ( len f19 );
reconsider m = ( ( len f19 ) - ( i + 1 ) ) as (Element of ( NAT )) by A49,INT_1:5;
( ( m + 1 ) + i ) = ( len ( f1 :- q ) ) by FINSEQ_5:def 3;
then A50: ( LSeg (f19,i) ) = ( LSeg (( f1 :- q ),( m + 1 )) ) by CKB2:1
.= ( LSeg (f1,( m + ( q .. f1 ) )) ) by A8,CKB10:1;
then A51: ( LSeg (f19,i) ) c= ( L~ f1 ) by TOPREAL3:19;
A52:now
A53: ( len f1 ) >= ( 1 + 1 ) by TOPREAL1:def 8;
then reconsider k = ( ( len f1 ) - 1 ) as (Element of ( NAT )) by INT_1:5,XXREAL_0:2;
A54: p2 in ( LSeg (( f1 /. k ),( f1 /. ( len f1 ) )) ) by A3,RLTOPSP1:68;
A55: ( k + 1 ) = ( len f1 );
then 1 <= k by A53,XREAL_1:6;
then A56: p2 in ( LSeg (f1,k) ) by A55,A54,TOPREAL1:def 3;
A57: ( len f19 ) = ( len ( f1 :- q ) ) by FINSEQ_5:def 3;
A58: ( ( len f1 ) - i ) = ( ( ( ( ( ( len f1 ) - ( q .. f1 ) ) + 1 ) - 1 ) + ( q .. f1 ) ) - i )
.= ( ( ( ( len f19 ) - 1 ) + ( q .. f1 ) ) - i ) by A8,A57,FINSEQ_5:50
.= ( m + ( q .. f1 ) );
per cases ;
suppose A59: i = ( 1 + 1 );

A60: ( q .. f1 ) <= ( m + ( q .. f1 ) ) by NAT_1:11;
1 <= ( q .. f1 ) by A8,FINSEQ_4:21;
then A61: 1 <= ( m + ( q .. f1 ) ) by A60,XXREAL_0:2;
assume A62: p2 in ( LSeg (f19,i) );
A63: ( ( m + ( q .. f1 ) ) + ( 1 + 1 ) ) = ( len f1 ) by A58,A59;
A64: 1 <= k by A53,XREAL_1:19;
p2 in ( LSeg (( f1 /. k ),( f1 /. ( k + 1 ) )) ) by A3,RLTOPSP1:68;
then A65: p2 in ( LSeg (f1,k) ) by A64,TOPREAL1:def 3;
( ( m + ( q .. f1 ) ) + 1 ) = k by A58,A59;
then ( ( LSeg (f1,( m + ( q .. f1 ) )) ) /\ ( LSeg (f1,k) ) ) = { ( f1 /. k ) } by A61,A63,TOPREAL1:def 6;
then p2 in { ( f1 /. k ) } by A50,A65,A62,XBOOLE_0:def 4;
then A66: ( f1 /. ( len f1 ) ) = ( f1 /. k ) by A3,TARSKI:def 1;
k <= ( len f1 ) by A55,NAT_1:11;
then A67: k in ( dom f1 ) by A64,FINSEQ_3:25;
( len f1 ) in ( dom f1 ) by FINSEQ_5:6;
then ( ( len f1 ) - k ) = ( ( len f1 ) - ( len f1 ) ) by A67,A66,PARTFUN2:10
.= ( 0 );
hence contradiction;
end;
suppose i <> 2;

then 2 < i by A48,XXREAL_0:1;
then ( 2 + 1 ) <= i by NAT_1:13;
then ( ( len f1 ) - i ) <= ( ( len f1 ) - ( 1 + 2 ) ) by XREAL_1:10;
then ( ( len f1 ) - i ) <= ( ( ( len f1 ) - 1 ) - 2 );
then A68: ( ( ( len f1 ) - i ) + ( 1 + 1 ) ) <= k by XREAL_1:19;
( ( ( len f1 ) - i ) + ( 1 + 1 ) ) = ( ( ( m + ( q .. f1 ) ) + 1 ) + 1 ) by A58;
then ( ( m + ( q .. f1 ) ) + 1 ) < k by A68,NAT_1:13;
then ( LSeg (f1,k) ) misses ( LSeg (f1,( m + ( q .. f1 ) )) ) by TOPREAL1:def 7;
then ( ( LSeg (f1,k) ) /\ ( LSeg (f1,( m + ( q .. f1 ) )) ) ) = ( {} ) by XBOOLE_0:def 7;
hence (not p2 in ( LSeg (f19,i) )) by A50,A56,XBOOLE_0:def 4;
end;
end;
( LSeg (f19,i) ) c= ( L~ f19 ) by TOPREAL3:19;
then A69: (not p1 in ( LSeg (f19,i) )) by A32;
( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) c= ( L~ f2 ) by A27,TOPREAL3:19;
then A70: ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,i) ) ) c= { p1,p2 } by A5,A51,XBOOLE_1:27;
now
given x being set such that
A71: x in ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,i) ) );

(x = p1 or x = p2) by A70,A71,TARSKI:def 2;
hence contradiction by A69,A52,A71,XBOOLE_0:def 4;
end;
then ( ( LSeg (f19,i) ) /\ ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) ) = ( {} ) by XBOOLE_0:def 1;
hence ( LSeg (f19,i) ) misses ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) by XBOOLE_0:def 7;
end;
A72:now
assume ( len f19 ) <> 1;
then 1 < ( len f19 ) by A19,XXREAL_0:1;
then A73: ( 1 + 1 ) <= ( len f19 ) by NAT_1:13;
now
let x being set;
hereby
reconsider m = ( ( len f19 ) - 2 ) as (Element of ( NAT )) by A73,INT_1:5;
( LSeg (f19,1) ) c= ( L~ f19 ) by TOPREAL3:19;
then (not p1 in ( LSeg (f19,1) )) by A32;
then A74: (not p1 in ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,1) ) )) by XBOOLE_0:def 4;
( ( m + 1 ) + 1 ) = ( len ( f1 :- q ) ) by FINSEQ_5:def 3;
then ( LSeg (f19,1) ) = ( LSeg (( f1 :- q ),( m + 1 )) ) by CKB2:1
.= ( LSeg (f1,( m + ( q .. f1 ) )) ) by A8,CKB10:1;
then A75: ( LSeg (f19,1) ) c= ( L~ f1 ) by TOPREAL3:19;
( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) c= ( L~ f2 ) by A27,TOPREAL3:19;
then A76: ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,1) ) ) c= { p1,p2 } by A5,A75,XBOOLE_1:27;
assume x in ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,1) ) );
hence x = ( f19 /. 1 ) by A4,A26,A76,A74,TARSKI:def 2;
end;
assume A77: x = ( f19 /. 1 );
then x in ( LSeg (( f19 /. 1 ),( f19 /. ( 1 + 1 ) )) ) by RLTOPSP1:68;
then A78: x in ( LSeg (f19,1) ) by A73,TOPREAL1:def 3;
x in ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) by A77,RLTOPSP1:68;
hence x in ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,1) ) ) by A78,XBOOLE_0:def 4;
end;
hence ( ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) /\ ( LSeg (f19,1) ) ) = { ( f19 /. 1 ) } by TARSKI:def 1;
end;
A79: ( len f29 ) >= 1 by A21,A23,FINSEQ_1:59;
then A80: f29 is non  empty;
( f1 :- q ) is  unfolded by A8,CKB38:1;
then A81: f19 is  unfolded by CKB41:1;
A82:now
per cases ;
suppose (( len f29 ) = 1 & ( len f19 ) = 1);

then ( len g2 ) = ( 1 + 1 ) by FINSEQ_1:22;
hence g2 is  unfolded by CKB32:1;
end;
suppose that A83: ( len f29 ) <> 1
and
A84: ( len f19 ) = 1;
consider k being Nat such that A85: ( k + 1 ) = ( len f29 ) by A79,NAT_1:6;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
A86: ( LSeg (f29,k) ) = ( LSeg (f2,k) ) by A85,CKB3:1;
( len f29 ) > 1 by A22,A23,A83,XXREAL_0:1;
then A87: 1 <= k by A85,NAT_1:13;
A88: f19 = <* ( f19 /. 1 ) *> by A84,FINSEQ_5:14;
( k + ( 1 + 1 ) ) <= ( len f2 ) by A22,A85;
then ( ( LSeg (f29,k) ) /\ ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) ) = { ( f29 /. ( len f29 ) ) } by A22,A25,A27,A85,A87,A86,TOPREAL1:def 6;
hence g2 is  unfolded by A85,A88,CKB43:1;
end;
suppose that A89: ( len f29 ) = 1
and
A90: ( len f19 ) <> 1;
f29 = <* ( f29 /. ( len f29 ) ) *> by A89,FINSEQ_5:14;
hence g2 is  unfolded by A81,A72,A90,CKB42:1;
end;
suppose that A91: ( len f29 ) <> 1
and
A92: ( len f19 ) <> 1;
consider k being Nat such that A93: ( k + 1 ) = ( len f29 ) by A79,NAT_1:6;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
A94: ( k + ( 1 + 1 ) ) <= ( len f2 ) by A22,A93;
A95: ( LSeg (f29,k) ) = ( LSeg (f2,k) ) by A93,CKB3:1;
( len f29 ) > 1 by A22,A23,A91,XXREAL_0:1;
then 1 <= k by A93,NAT_1:13;
then ( ( LSeg (f29,k) ) /\ ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) ) = { ( f29 /. ( len f29 ) ) } by A22,A25,A27,A93,A94,A95,TOPREAL1:def 6;
hence g2 is  unfolded by A81,A72,A92,A93,CKB44:1;
end;
end;
( len g1 ) >= 2 by TOPREAL1:def 8;
then A96: ( rng g1 ) c= ( L~ g1 ) by CKB18:1;
set Z = ( ( rng f29 ) /\ ( rng f19 ) );
A97: 1 in ( dom f29 ) by A22,A23,FINSEQ_3:25;
A98: ( len f2 ) in ( dom f2 ) by FINSEQ_5:6;
then A99: ( p2 .. f2 ) = ( len f2 ) by A4,FINSEQ_5:41;
now
assume A100: p2 in ( rng f29 );
then ( p2 .. f29 ) = ( p2 .. f2 ) by FINSEQ_5:40;
hence contradiction by A22,A99,A100,FINSEQ_4:21,XREAL_1:44;
end;
then A101: (not p2 in Z) by XBOOLE_0:def 4;
then A102: Z <> { p1,p2 } by TARSKI:def 2;
( dom f2 ) = ( Seg ( len f2 ) ) by FINSEQ_1:def 3;
then A103: ( len f29 ) in ( dom f2 ) by A22,A14,A24,A18,FINSEQ_2:8;
now
p2 in ( LSeg (( f2 /. ( len f29 ) ),p2) ) by RLTOPSP1:68;
then A104: p2 in ( LSeg (f2,( len f29 )) ) by A4,A22,A23,A14,TOPREAL1:def 3;
assume p2 in ( L~ f29 );
then consider i such that A105: 1 <= i and A106: ( i + 1 ) <= ( len f29 ) and A107: p2 in ( LSeg (f29,i) ) by CKB13:1;
( LSeg (f29,i) ) = ( LSeg (f2,i) ) by A106,CKB3:1;
then A108: p2 in ( ( LSeg (f2,i) ) /\ ( LSeg (f2,( len f29 )) ) ) by A107,A104,XBOOLE_0:def 4;
then A109: ( LSeg (f2,i) ) meets ( LSeg (f2,( len f29 )) ) by XBOOLE_0:4;
A110: ( len f2 ) <> ( len f29 ) by A21,FINSEQ_1:59;
per cases ;
suppose A111: ( i + 1 ) = ( len f29 );

then ( i + ( 1 + 1 ) ) = ( len f2 ) by A22;
then ( ( LSeg (f2,i) ) /\ ( LSeg (f2,( len f29 )) ) ) = { ( f2 /. ( len f29 ) ) } by A105,A111,TOPREAL1:def 6;
then p2 = ( f2 /. ( len f29 ) ) by A108,TARSKI:def 1;
hence contradiction by A4,A98,A103,A110,PARTFUN2:10;
end;
suppose ( i + 1 ) <> ( len f29 );

then ( i + 1 ) < ( len f29 ) by A106,XXREAL_0:1;
hence contradiction by A109,TOPREAL1:def 7;
end;
end;
then A112: (not p2 in ( ( L~ f29 ) /\ ( L~ f19 ) )) by XBOOLE_0:def 4;
( L~ ( f1 :- q ) ) c= ( L~ f1 ) by A8,CKB78:1;
then A113: ( L~ f19 ) c= ( L~ f1 ) by CKB22:1;
( L~ f29 ) c= ( L~ f2 ) by CKB24:1;
then ( ( L~ f29 ) /\ ( L~ f19 ) ) c= { p1,p2 } by A5,A113,XBOOLE_1:27;
then A114: (((( ( L~ f29 ) /\ ( L~ f19 ) ) = ( {} ) or ( ( L~ f29 ) /\ ( L~ f19 ) ) = { p1 }) or ( ( L~ f29 ) /\ ( L~ f19 ) ) = { p2 }) or ( ( L~ f29 ) /\ ( L~ f19 ) ) = { p1,p2 }) by ZFMISC_1:36;
( f1 :- q ) is  special by A8,CKB65:1;
then A115: f19 is  special by CKB68:1;
A116: 1 in ( dom ( f1 :- q ) ) by FINSEQ_5:6;
now
set l = ( p1 .. ( f1 :- q ) );
assume A117: p1 in ( rng ( f1 :- q ) );
then A118: ( ( f1 :- q ) . l ) = p1 by FINSEQ_4:19;
l <> ( 0 ) by A117,FINSEQ_4:21;
then consider j being Nat such that A119: l = ( j + 1 ) by NAT_1:6;
reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
A120: l in ( dom ( f1 :- q ) ) by A117,FINSEQ_4:20;
then A121: ( j + ( q .. f1 ) ) in ( dom f1 ) by A8,A119,FINSEQ_5:51;
( ( f1 :- q ) /. l ) = ( f1 /. ( j + ( q .. f1 ) ) ) by A8,A120,A119,FINSEQ_5:52;
then ( j + ( q .. f1 ) ) = 1 by A1,A31,A120,A118,A121,PARTFUN1:def 6,PARTFUN2:10;
then A122: ( q .. f1 ) <= 1 by NAT_1:11;
1 <= ( q .. f1 ) by A8,FINSEQ_4:21;
hence contradiction by A10,A122,XXREAL_0:1;
end;
then (not p1 in ( rng f19 )) by FINSEQ_5:57;
then (not p1 in Z) by XBOOLE_0:def 4;
then A123: Z <> { p1 } by TARSKI:def 1;
( rng f29 ) c= ( rng f2 ) by FINSEQ_5:19;
then Z c= ( ( rng f2 ) /\ ( rng f1 ) ) by A15,XBOOLE_1:27;
then A124: Z c= { p1,p2 } by A5,A17,XBOOLE_1:1;
reconsider f1q = ( f1 :- q ) as  one-to-one (FinSequence of ( TOP-REAL 2 )) by A8,FINSEQ_5:56;
A125: ( Rev f1q ) is  one-to-one;
( f1 :- q ) is  s.n.c. by A8,CKB54:1;
then A126: f19 is  s.n.c. by CKB55:1;
(( ( f29 /. ( len f29 ) ) `1 ) = ( ( f19 /. 1 ) `1 ) or ( ( f29 /. ( len f29 ) ) `2 ) = ( ( f19 /. 1 ) `2 )) by A23,A14,A25,A26,TOPREAL1:def 5;
then A127: g2 is  special by A115,CKB69:1;
( ( len f29 ) + ( len f19 ) ) >= ( 1 + 1 ) by A22,A19,A23,XREAL_1:7;
then A128: ( len g2 ) >= 2 by FINSEQ_1:22;
Z <> { p2 } by A101,TARSKI:def 1;
then Z = ( {} ) by A123,A102,A124,ZFMISC_1:36;
then ( rng f29 ) misses ( rng f19 ) by XBOOLE_0:def 7;
then A129: g2 is  one-to-one by A125,FINSEQ_3:91;
(not p1 in ( ( L~ f29 ) /\ ( L~ f19 ) )) by A32,XBOOLE_0:def 4;
then ( L~ f29 ) misses ( L~ f19 ) by A114,A112,TARSKI:def 1,TARSKI:def 2,XBOOLE_0:def 7;
then ( f29 ^ f19 ) is  s.n.c. by A126,A28,A47,CKB56:1;
then reconsider g2 as S-Sequence_in_R2 by A129,A128,A82,A127,TOPREAL1:def 8;
A130: ( ( L~ f2 ) \/ ( L~ f19 ) ) = ( ( L~ ( f29 ^ <* p2 *> ) ) \/ ( L~ f19 ) ) by A4,A14,FINSEQ_5:21
.= ( ( ( L~ f29 ) \/ ( LSeg (( f29 /. ( len f29 ) ),( f19 /. 1 )) ) ) \/ ( L~ f19 ) ) by A4,A97,A26,CKB19:1,RELAT_1:38
.= ( L~ g2 ) by A20,A80,CKB23:1,RELAT_1:38;
take g1;
take g2;
thus A131: p1 = ( g1 /. 1 ) by A1,A8,FINSEQ_5:44;
A132: 1 in ( dom g2 ) by FINSEQ_5:6;
hence A133: ( g2 /. 1 ) = ( g2 . 1 ) by PARTFUN1:def 6
.= ( f29 . 1 ) by A97,FINSEQ_1:def 7
.= ( f29 /. 1 ) by A97,PARTFUN1:def 6
.= p1 by A2,A97,FINSEQ_4:70;
thus A134: q = ( g1 /. ( q .. f1 ) ) by A8,FINSEQ_5:45
.= ( g1 /. ( len g1 ) ) by A8,FINSEQ_5:42;
A135: ( len g2 ) in ( dom g2 ) by FINSEQ_5:6;
hence A136: ( g2 /. ( len g2 ) ) = ( g2 . ( len g2 ) ) by PARTFUN1:def 6
.= ( g2 . ( ( len f29 ) + ( len f19 ) ) ) by FINSEQ_1:22
.= ( f19 . ( len f19 ) ) by A20,FINSEQ_1:def 7
.= ( f19 . ( len ( f1 :- q ) ) ) by FINSEQ_5:def 3
.= ( ( f1 :- q ) . 1 ) by FINSEQ_5:62
.= ( ( f1 :- q ) /. 1 ) by A116,PARTFUN1:def 6
.= q by FINSEQ_5:53;
( len g2 ) >= 2 by TOPREAL1:def 8;
then A137: ( rng g2 ) c= ( L~ g2 ) by CKB18:1;
A138: ( len g1 ) in ( dom g1 ) by FINSEQ_5:6;
thus { p1,q } = ( ( L~ g1 ) /\ ( L~ g2 ) )
proof
hereby
let x being set;
assume A139: x in { p1,q };
per cases  by A139,TARSKI:def 2;
suppose A140: x = p1;

A141: p1 in ( rng g2 ) by A132,A133,PARTFUN2:2;
p1 in ( rng g1 ) by A131,A13,PARTFUN2:2;
hence x in ( ( L~ g1 ) /\ ( L~ g2 ) ) by A96,A137,A140,A141,XBOOLE_0:def 4;
end;
suppose A142: x = q;

A143: q in ( rng g2 ) by A135,A136,PARTFUN2:2;
q in ( rng g1 ) by A134,A138,PARTFUN2:2;
hence x in ( ( L~ g1 ) /\ ( L~ g2 ) ) by A96,A137,A142,A143,XBOOLE_0:def 4;
end;
end;
A144: ( len f1 ) in ( dom f1 ) by FINSEQ_5:6;
A145: ( ( L~ g1 ) /\ ( L~ g2 ) ) = ( ( ( L~ g1 ) /\ ( L~ f2 ) ) \/ ( ( L~ g1 ) /\ ( L~ f19 ) ) ) by A130,XBOOLE_1:23;
A146: ( q .. f1 ) in ( dom f1 ) by A8,FINSEQ_4:20;
A147: q = ( f1 . ( q .. f1 ) ) by A8,FINSEQ_4:19
.= ( f1 /. ( q .. f1 ) ) by A146,PARTFUN1:def 6;
A148: ( len g1 ) = ( q .. f1 ) by A8,FINSEQ_5:42;
per cases ;
suppose A149: q <> p2;

now
A150: ( q .. f1 ) <= ( len f1 ) by A8,FINSEQ_4:21;
then reconsider j = ( ( len f1 ) - 1 ) as (Element of ( NAT )) by A9,INT_1:5,XXREAL_0:2;
A151: ( j + 1 ) = ( len f1 );
A152: p2 in ( LSeg (( f1 /. j ),( f1 /. ( j + 1 ) )) ) by A3,RLTOPSP1:68;
1 < ( q .. f1 ) by A10,A9,XXREAL_0:1;
then 1 < ( len f1 ) by A150,XXREAL_0:2;
then 1 <= j by A151,NAT_1:13;
then A153: p2 in ( LSeg (f1,j) ) by A152,TOPREAL1:def 3;
assume p2 in ( L~ g1 );
then consider i such that A154: 1 <= i and A155: ( i + 1 ) <= ( len g1 ) and A156: p2 in ( LSeg (g1,i) ) by CKB13:1;
A157: p2 in ( LSeg (f1,i) ) by A155,A156,CKB9:1;
( q .. f1 ) < ( len f1 ) by A3,A147,A149,A150,XXREAL_0:1;
then A158: ( q .. f1 ) <= j by A151,NAT_1:13;
then A159: ( i + 1 ) <= j by A148,A155,XXREAL_0:2;
per cases ;
suppose A160: ( i + 1 ) = j;

then ( i + ( 1 + 1 ) ) = ( j + 1 );
then ( ( LSeg (f1,i) ) /\ ( LSeg (f1,( i + 1 )) ) ) = { ( f1 /. ( i + 1 ) ) } by A154,TOPREAL1:def 6;
then p2 in { ( f1 /. ( i + 1 ) ) } by A157,A153,A160,XBOOLE_0:def 4;
then p2 = ( f1 /. ( i + 1 ) ) by TARSKI:def 1;
hence contradiction by A148,A147,A149,A155,A158,A160,XXREAL_0:1;
end;
suppose ( i + 1 ) <> j;

then ( i + 1 ) < j by A159,XXREAL_0:1;
then ( LSeg (f1,i) ) misses ( LSeg (f1,j) ) by TOPREAL1:def 7;
then ( ( LSeg (f1,i) ) /\ ( LSeg (f1,j) ) ) = ( {} ) by XBOOLE_0:def 7;
hence contradiction by A157,A153,XBOOLE_0:def 4;
end;
end;
then A161: (not p2 in ( ( L~ g1 ) /\ ( L~ f2 ) )) by XBOOLE_0:def 4;
( ( L~ g1 ) /\ ( L~ f2 ) ) c= { p1,p2 } by A5,A8,CKB77:1,XBOOLE_1:26;
then (((( ( L~ g1 ) /\ ( L~ f2 ) ) = ( {} ) or ( ( L~ g1 ) /\ ( L~ f2 ) ) = { p1 }) or ( ( L~ g1 ) /\ ( L~ f2 ) ) = { p2 }) or ( ( L~ g1 ) /\ ( L~ f2 ) ) = { p1,p2 }) by ZFMISC_1:36;
then A162: ( ( L~ g1 ) /\ ( L~ f2 ) ) c= { p1 } by A161,TARSKI:def 1,TARSKI:def 2,ZFMISC_1:33;
( ( L~ g1 ) /\ ( L~ f19 ) ) = ( ( L~ g1 ) /\ ( L~ ( f1 :- q ) ) ) by CKB22:1
.= { q } by A3,A8,A10,A147,A149,CKB71:1;
then ( ( L~ g1 ) /\ ( L~ g2 ) ) c= ( { p1 } \/ { q } ) by A145,A162,XBOOLE_1:9;
hence thesis by ENUMSET1:1;
end;
suppose A163: q = p2;

( p2 .. f1 ) = ( len f1 ) by A3,A144,FINSEQ_5:41;
then A164: ( len ( f1 :- q ) ) = ( ( ( len f1 ) - ( len f1 ) ) + 1 ) by A8,A163,FINSEQ_5:50
.= ( ( 0 ) + 1 );
( ( L~ g1 ) /\ ( L~ f19 ) ) = ( ( L~ g1 ) /\ ( L~ ( f1 :- q ) ) ) by CKB22:1
.= ( ( L~ g1 ) /\ ( {} ) ) by A164,TOPREAL1:22
.= ( {} );
hence thesis by A5,A8,A145,A163,CKB77:1,XBOOLE_1:26;
end;
end;

thus P = ( ( ( L~ ( f1 -: q ) ) \/ ( L~ ( f1 :- q ) ) ) \/ ( L~ f2 ) ) by A6,A8,CKB25:1
.= ( ( L~ g1 ) \/ ( ( L~ f2 ) \/ ( L~ ( f1 :- q ) ) ) ) by XBOOLE_1:4
.= ( ( L~ g1 ) \/ ( L~ g2 ) ) by A130,CKB22:1;
end;
