environ
vocabularies NUMBERS,XBOOLE_0,FINSEQ_1,ORDINAL4,RELAT_1,CARD_1,SUBSET_1,XXREAL_0,RFINSEQ,ARYTM_1,ARYTM_3,JORDAN3,FUNCT_1,FINSEQ_5,NAT_1,PARTFUN1,FINSEQ_8,FILEREC1;
notations XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,RELAT_1,RFINSEQ,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,FINSEQ_4,FINSEQ_6,FINSEQ_5,FINSEQ_8,CKB21,CKB22;
definitions CKB22;
theorems NAT_1,NAT_2,REVROT_1,JORDAN4,FINSEQ_1,FINSEQ_2,FINSEQ_5,FINSEQ_6,RFINSEQ,FUNCT_2,FINSEQ_8,GENEALG1,TOPREAL3,CALCUL_1,FINSEQ_3,XREAL_1,CARD_1,XXREAL_0,PARTFUN1,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28;
registrations XBOOLE_0,RELAT_1,FUNCT_1,XXREAL_0,XREAL_0,FINSEQ_1,FINSEQ_5,ORDINAL1,CARD_1;
constructors XXREAL_0,NAT_1,PARTFUN1,RFINSEQ,NAT_D,FINSEQ_4,FINSEQ_5,CQC_LANG,FINSEQ_6,FINSEQ_8,REAL_1,RELSET_1,CKB22;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
Th28: (for D being non  empty set holds (for CR,r being (File of D) holds (CR is_postposition_of r implies r = ( addcr (r,CR) ))))
proof
let D being non  empty set;
let CR being (File of D);
let r being (File of D);
A1: ( len r ) = ( len ( Rev r ) ) by FINSEQ_5:def 3;
assume A2: CR is_postposition_of r;
then A3: (( len CR ) = ( len ( Rev CR ) ) & ( Rev CR ) is_preposition_of ( Rev r )) by FINSEQ_5:def 3,FINSEQ_8:def 9;
( 0 ) <= ( ( len r ) - ( len CR ) ) by A2,CKB28:1;
then A4: ( ( 0 ) + ( len CR ) ) <= ( ( ( len r ) - ( len CR ) ) + ( len CR ) ) by XREAL_1:7;
per cases ;
suppose A5: ( len CR ) > ( 0 );

then ( Rev ( mid (( Rev r ),1,( len CR )) ) ) = ( Rev ( Rev CR ) ) by A3,FINSEQ_8:def 8;
then A6: ( mid (( Rev r ),( len CR ),1) ) = ( Rev ( Rev CR ) ) by JORDAN4:18
.= CR by FINSEQ_6:25;
A7: ( len ( Rev r ) ) = ( ( ( len ( Rev r ) ) - ( len CR ) ) + ( len CR ) );
A8: (( mid (r,( ( ( len r ) + 1 ) -' ( len CR ) ),( len r )) ) = CR & ( len CR ) >= ( ( 0 ) + 1 )) by A2,A5,FINSEQ_8:24,NAT_1:13;
now
per cases ;
case A9: ( len CR ) > 1;
then ( len CR ) >= ( 1 + 1 ) by NAT_1:13;
then ( ( len CR ) - 1 ) >= ( ( 1 + 1 ) - 1 ) by XREAL_1:9;
then A10: ( ( ( len CR ) -' 1 ) + 1 ) = ( len CR ) by NAT_D:43;
A11: ( ( len ( Rev r ) ) -' ( len CR ) ) = ( ( len ( Rev r ) ) - ( len CR ) ) by A1,A4,XREAL_1:233;
( mid (( Rev r ),( len CR ),1) ) = ( Rev ( ( ( Rev r ) /^ ( 1 -' 1 ) ) | ( ( ( len CR ) -' 1 ) + 1 ) ) ) by A9,FINSEQ_6:def 3
.= ( Rev ( ( ( Rev r ) /^ ( 0 ) ) | ( len CR ) ) ) by A10,NAT_2:8
.= ( Rev ( ( Rev r ) | ( len CR ) ) ) by FINSEQ_5:28
.= ( ( Rev ( Rev r ) ) /^ ( ( len ( Rev r ) ) -' ( len CR ) ) ) by A7,A11,FINSEQ_6:85
.= ( r /^ ( ( len r ) -' ( len CR ) ) ) by A1,FINSEQ_6:25;
then A12: ( ovlpart (r,CR) ) = ( ovlpart (( ( r | ( ( len r ) -' ( len CR ) ) ) ^ CR ),CR) ) by A6,RFINSEQ:8
.= CR by FINSEQ_8:14;
( ovlcon (r,CR) ) = ( r ^ ( CR /^ ( len ( ovlpart (r,CR) ) ) ) ) by FINSEQ_8:def 3
.= ( r ^ ( {} ) ) by A12,REVROT_1:2
.= r by FINSEQ_1:34;
hence thesis by FINSEQ_8:def 11;
end;
case ( len CR ) <= 1;
then CR = ( mid (r,( ( ( len r ) + 1 ) -' 1 ),( len r )) ) by A8,XXREAL_0:1
.= ( mid (r,( len r ),( len r )) ) by NAT_D:34
.= ( r /^ ( ( len r ) -' 1 ) ) by FINSEQ_6:117;
then A13: r = ( ( r | ( ( len r ) -' 1 ) ) ^ CR ) by RFINSEQ:8;
A14: ( CR /^ ( len CR ) ) = ( {} ) by REVROT_1:2;
( ovlcon (r,CR) ) = ( r ^ ( CR /^ ( len ( ovlpart (r,CR) ) ) ) ) by FINSEQ_8:def 3
.= ( r ^ ( CR /^ ( len CR ) ) ) by A13,FINSEQ_8:14
.= r by A14,FINSEQ_1:34;
hence thesis by FINSEQ_8:def 11;
end;
end;
hence thesis;
end;
suppose ( len CR ) <= ( 0 );

then A15: CR = ( {} ) by NAT_1:2;
then A16: ( len ( ovlpart (r,CR) ) ) = ( len ( <*> D ) ) by CKB23:1
.= ( 0 );
thus ( addcr (r,CR) ) = ( ovlcon (r,CR) ) by FINSEQ_8:def 11
.= ( r ^ ( CR /^ ( len ( ovlpart (r,CR) ) ) ) ) by FINSEQ_8:def 3
.= ( r ^ CR ) by A16,FINSEQ_5:28
.= r by A15,FINSEQ_1:34;
end;
end;
