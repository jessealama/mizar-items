environ
vocabularies NUMBERS,XBOOLE_0,FINSEQ_1,ORDINAL4,RELAT_1,CARD_1,SUBSET_1,XXREAL_0,RFINSEQ,ARYTM_1,ARYTM_3,JORDAN3,FUNCT_1,FINSEQ_5,NAT_1,PARTFUN1,FINSEQ_8,FILEREC1;
notations XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,RELAT_1,RFINSEQ,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,FINSEQ_4,FINSEQ_6,FINSEQ_5,FINSEQ_8,CKB21,CKB22;
definitions CKB22;
theorems NAT_1,NAT_2,REVROT_1,JORDAN4,FINSEQ_1,FINSEQ_2,FINSEQ_5,FINSEQ_6,RFINSEQ,FUNCT_2,FINSEQ_8,GENEALG1,TOPREAL3,CALCUL_1,FINSEQ_3,XREAL_1,CARD_1,XXREAL_0,PARTFUN1,XREAL_0,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22,CKB23,CKB24;
registrations XBOOLE_0,RELAT_1,FUNCT_1,XXREAL_0,XREAL_0,FINSEQ_1,FINSEQ_5,ORDINAL1,CARD_1;
constructors XXREAL_0,NAT_1,PARTFUN1,RFINSEQ,NAT_D,FINSEQ_4,FINSEQ_5,CQC_LANG,FINSEQ_6,FINSEQ_8,REAL_1,RELSET_1,CKB22;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
theorem
(for D being non empty set holds (for a,b being set holds (for f,r,CR being (File of D) holds ((((a <> b & CR = <* b *>) & f = <* b,a,b *>) & r = <* a,b *>) implies (CR is_a_record_of f,CR & r is_a_record_of f,CR)))))
proof
let D being non empty set;
let a being set,b being set;
let f being (File of D),r being (File of D),CR being (File of D);
assume that
A1: a <> b
and
A2: CR = <* b *>
and
A3: f = <* b,a,b *>
and
A4: r = <* a,b *>;
reconsider b2 = b,a2 = a as (Element of D) by A3,CKB10:1;
A5: (( CR . 1 ) = b & ( len CR ) = 1) by A2,FINSEQ_1:40;
f = ( <* b,a *> ^ <* b *> ) by A3,FINSEQ_1:43
.= ( ( f | 2 ) ^ CR ) by A2,A3,CKB14:1;
then ( ovlpart (f,CR) ) = CR by FINSEQ_8:14;
then ( CR /^ ( len ( ovlpart (f,CR) ) ) ) = ( {} ) by REVROT_1:2;
then ( f ^ ( CR /^ ( len ( ovlpart (f,CR) ) ) ) ) = f by FINSEQ_1:34;
then A6: ( ovlcon (f,CR) ) = f by FINSEQ_8:def 3;
A7: f = ( CR ^ r ) by A2,A3,A4,FINSEQ_1:43;
then A8: ( len f ) = ( ( len CR ) + ( len r ) ) by FINSEQ_1:22
.= ( 1 + ( len <* a,b *> ) ) by A2,A4,FINSEQ_1:40
.= ( 1 + 2 ) by FINSEQ_1:44
.= 3;
then ( CR ^ r ) is_substring_of f,1 by A7,FINSEQ_8:19;
then A9: ( CR ^ r ) is_substring_of ( addcr (f,CR) ),1 by A6,FINSEQ_8:def 11;
A10: ( len CR ) = 1 by A2,FINSEQ_1:40;
then ( mid (f,1,( len CR )) ) = ( ( f /^ ( 1 -' 1 ) ) | ( ( 1 -' 1 ) + 1 ) ) by FINSEQ_6:def 3
.= ( ( f /^ ( 1 -' 1 ) ) | ( 1 + ( 0 ) ) ) by NAT_2:8
.= ( ( f /^ ( 0 ) ) | 1 ) by NAT_D:34
.= ( f | 1 ) by FINSEQ_5:28
.= ( <* b2,a2,b2 *> | ( Seg 1 ) ) by A3,FINSEQ_1:def 15
.= CR by A2,FINSEQ_6:4;
then CR is_preposition_of f by A8,FINSEQ_8:def 8;
then A11: CR is_preposition_of ( addcr (f,CR) ) by A6,FINSEQ_8:def 11;
( r /^ ( 1 -' 1 ) ) = ( r /^ ( ( ( 0 ) + 1 ) -' 1 ) )
.= ( r /^ ( 0 ) ) by NAT_D:34
.= r by FINSEQ_5:28;
then ( ( r /^ ( 1 -' 1 ) ) . 1 ) = a by A4,FINSEQ_1:44;
then A12: (not CR is_preposition_of ( r /^ ( 1 -' 1 ) )) by A1,A5,FINSEQ_8:21;
A13: (for j being (Element of ( NAT )) holds (((j >= 1 & j > ( 0 )) & CR is_preposition_of ( r /^ ( j -' 1 ) )) implies j >= 2))
proof
let j being (Element of ( NAT ));
assume that
A14: j >= 1
and
j > ( 0 )
and
A15: CR is_preposition_of ( r /^ ( j -' 1 ) );
j > 1 by A12,A14,A15,XXREAL_0:1;
then ( 1 + 1 ) <= j by NAT_1:13;
hence thesis;
end;
( r /^ ( 2 -' 1 ) ) = ( r /^ ( ( 1 + 1 ) -' 1 ) )
.= ( <* a2,b2 *> /^ 1 ) by A4,NAT_D:34
.= CR by A2,FINSEQ_6:46;
then A16: ( instr (1,r,CR) ) = 2 by A13,FINSEQ_8:def 10;
A17: ( len r ) = 2 by A4,FINSEQ_1:44;
then ( ( ( len r ) + 1 ) -' ( len CR ) ) = 2 by A10,NAT_D:34;
then (CR is_terminated_by CR & r is_terminated_by CR) by A10,A17,A16,FINSEQ_8:28,FINSEQ_8:def 12;
hence thesis by A11,A9,CKB22:def 1;
end;
