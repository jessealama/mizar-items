environ
vocabularies NUMBERS,SUBSET_1,XBOOLE_0,XXREAL_0,NAT_1,ORDINAL1,CARD_1,TARSKI,ARYTM_3,ARYTM_1,FUNCT_1,RELAT_1,FUNCT_2,INT_1,FINSET_1,AFINSQ_1,BINOP_1,FINSEQ_1,FINSOP_1,CARD_3,BINOP_2,ZFMISC_1,NEWTON,REALSET1,STIRL2_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,RELAT_1,FUNCT_1,RELSET_1,ORDINAL1,SEQ_4,PARTFUN1,FINSET_1,AFINSQ_1,AFINSQ_2,XXREAL_0,FUNCT_2,NAT_1,INT_1,BINOP_1,BINOP_2,NEWTON,DOMAIN_1,CKB16,CKB17,CKB19,CKB32;
definitions TARSKI,XBOOLE_0,FUNCT_1,CKB19,CKB32;
theorems AFINSQ_1,TARSKI,FUNCT_1,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,NAT_1,FUNCT_2,AXIOMS,XCMPLX_1,CARD_2,INT_1,ORDINAL1,WELLORD2,FRAENKEL,SUBSET_1,ENUMSET1,CARD_1,BINOP_2,NEWTON,WSIERP_1,XREAL_1,XXREAL_0,XXREAL_2,AFINSQ_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40;
schemes FUNCT_2,NAT_1,INT_1,CKB29,CKB41;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FINSET_1,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,MEMBERED,AFINSQ_1,CARD_1,VALUED_0,XXREAL_2,RELSET_1,AFINSQ_2,CKB9,CKB18;
constructors WELLORD2,DOMAIN_1,SETWISEO,REAL_1,BINOP_2,SEQ_4,NEWTON,AFINSQ_1,AFINSQ_2,RELSET_1,PARTFUN3,SEQ_1,BINOP_1,CKB16,CKB17,CKB19,CKB32;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve k for Nat;
reserve n for Nat;
reserve X for set;
reserve Y for set;
reserve f for (Function of n,k);
reserve x for set;
reserve y for set;
scheme Sch3 { X,Y,X1,Y1() -> set,F(set) -> set,P[set,set,set] } : ( card { f where f is (Function of X(),Y()): P[ f,X(),Y() ] } ) = ( card { f where f is (Function of X1(),Y1()): ((P[ f,X1(),Y1() ] & ( rng ( f | X() ) ) c= Y()) & (for x holds (x in ( X1() \ X() ) implies ( f . x ) = F(x)))) } )
provided
A1: (for x holds (x in ( X1() \ X() ) implies F(x) in Y1()))
and
A2: (X() c= X1() & Y() c= Y1())
and
A3: (Y() is  empty implies X() is  empty)
and
A4: (for f being (Function of X1(),Y1()) holds ((for x holds (x in ( X1() \ X() ) implies F(x) = ( f . x ))) implies (P[ f,X1(),Y1() ] iff P[ ( f | X() ),X(),Y() ])))
proof
defpred FF[ set,set ]
 means
(for f being (Function of X(),Y()) holds (for h being (Function of X1(),Y1()) holds ((f = $1 & h = $2) implies ( h | X() ) = f)));
set F2 = { f where f is (Function of X1(),Y1()): ((P[ f,X1(),Y1() ] & ( rng ( f | X() ) ) c= Y()) & (for x holds (x in ( X1() \ X() ) implies ( f . x ) = F(x)))) };
set F1 = { f where f is (Function of X(),Y()): P[ f,X(),Y() ] };
A5: (for f9 being set holds (f9 in F1 implies (ex g9 being set st (g9 in F2 & FF[ f9,g9 ]))))
proof
let f9 being set;
assume f9 in F1;
then consider f being (Function of X(),Y()) such that A6: f = f9 and A7: P[ f,X(),Y() ];
consider h being (Function of X1(),Y1()) such that A8: (( h | X() ) = f & (for x holds (x in ( X1() \ X() ) implies ( h . x ) = F(x)))) from CKB41:sch 1(A1,A2,A3);
A9: FF[ f9,h ] by A6,A8;
A10: ( rng f ) c= Y();
P[ h,X1(),Y1() ] by A4,A7,A8;
then h in F2 by A8,A10;
hence thesis by A9;
end;
consider ff being (Function of F1,F2) such that A11: (for x being set holds (x in F1 implies FF[ x,( ff . x ) ])) from FUNCT_2:sch 1(A5);
A12: (Y1() is  empty implies X1() is  empty)
proof
assume A13: Y1() is  empty;
assume X1() is non  empty;
then (ex x st x in X1()) by XBOOLE_0:def 1;
hence contradiction by A1,A2,A3,A13;
end;
now
per cases ;
suppose A14: Y1() is  empty;

set Empty = ( {} );
A15: F2 c= { ( {} ) }
proof
let x;
assume x in F2;
then (ex f being (Function of X1(),Y1()) st (((f = x & P[ f,X1(),Y1() ]) & ( rng ( f | X() ) ) c= Y()) & (for x holds (x in ( X1() \ X() ) implies ( f . x ) = F(x)))));
then x = ( {} ) by A14;
hence thesis by TARSKI:def 1;
end;
A16: F1 c= { ( {} ) }
proof
let x;
assume x in F1;
then (ex f being (Function of X(),Y()) st (f = x & P[ f,X(),Y() ]));
then x = ( {} ) by A2,A14;
hence thesis by TARSKI:def 1;
end;
now
per cases ;
suppose A17: P[ ( {} ),( {} ),( {} ) ];

A18: ( rng ( {} ) ) = ( {} );
A19: Y() is  empty by A2,A14;
( dom ( {} ) ) = ( {} );
then ( {} ) is (Function of X(),Y()) by A3,A19,A18,FUNCT_2:1;
then ( {} ) in F1 by A3,A17,A19;
then A20: F1 = { ( {} ) } by A16,ZFMISC_1:33;
A21: ( rng ( {} ) ) = ( {} );
( dom ( {} ) ) = ( {} );
then reconsider Empty as (Function of X1(),Y1()) by A12,A14,A21,FUNCT_2:1;
A22: (for x holds (x in ( X1() \ X() ) implies ( Empty . x ) = F(x))) by A12;
( rng ( Empty | X() ) ) c= Y() by A2,A14;
then ( {} ) in F2 by A12,A14,A17,A22;
hence thesis by A15,A20,ZFMISC_1:33;
end;
suppose A23: (not P[ ( {} ),( {} ),( {} ) ]);

A24: (not ( {} ) in F1)
proof
assume ( {} ) in F1;
then (ex f being (Function of X(),Y()) st (f = ( {} ) & P[ f,X(),Y() ]));
hence contradiction by A2,A3,A14,A23;
end;
A25: (F2 = ( {} ) or F2 = { ( {} ) }) by A15,ZFMISC_1:33;
A26: (not ( {} ) in F2)
proof
assume ( {} ) in F2;
then (ex f being (Function of X1(),Y1()) st (((f = ( {} ) & P[ f,X1(),Y1() ]) & ( rng ( f | X() ) ) c= Y()) & (for x holds (x in ( X1() \ X() ) implies ( f . x ) = F(x)))));
hence contradiction by A12,A14,A23;
end;
(F1 = ( {} ) or F1 = { ( {} ) }) by A16,ZFMISC_1:33;
hence thesis by A24,A26,A25,TARSKI:def 1;
end;
end;
hence thesis;
end;
suppose A27: Y1() is non  empty;

now
per cases ;
suppose A28: F2 is  empty;

F1 is  empty
proof
assume F1 is non  empty;
then consider x such that A29: x in F1 by XBOOLE_0:def 1;
consider f being (Function of X(),Y()) such that f = x and A30: P[ f,X(),Y() ] by A29;
A31: ( rng f ) c= Y();
consider h being (Function of X1(),Y1()) such that A32: (( h | X() ) = f & (for x holds (x in ( X1() \ X() ) implies ( h . x ) = F(x)))) from CKB41:sch 1(A1,A2,A3);
P[ h,X1(),Y1() ] by A4,A30,A32;
then h in F2 by A32,A31;
hence thesis by A28;
end;
hence thesis by A28;
end;
suppose A33: F2 is non  empty;

F2 c= ( rng ff )
proof
let y;
assume y in F2;
then consider f being (Function of X1(),Y1()) such that A34: f = y and A35: P[ f,X1(),Y1() ] and A36: ( rng ( f | X() ) ) c= Y() and A37: (for x holds (x in ( X1() \ X() ) implies ( f . x ) = F(x)));
A38: ( dom ( f | X() ) ) = ( ( dom f ) /\ X() ) by RELAT_1:61;
( dom f ) = X1() by A27,FUNCT_2:def 1;
then A39: ( dom ( f | X() ) ) = X() by A2,A38,XBOOLE_1:28;
then reconsider h = ( f | X() ) as (Function of X(),( rng ( f | X() ) )) by FUNCT_2:1;
(( rng ( f | X() ) ) is  empty implies X() is  empty) by A39,RELAT_1:42;
then reconsider h as (Function of X(),Y()) by A36,FUNCT_2:6;
P[ ( f | X() ),X(),Y() ] by A4,A35,A37;
then A40: h in F1;
A41: ( dom ff ) = F1 by A33,FUNCT_2:def 1;
then ( ff . h ) in ( rng ff ) by A40,FUNCT_1:def 3;
then ( ff . h ) in F2;
then consider ffh being (Function of X1(),Y1()) such that A42: ffh = ( ff . h ) and P[ ffh,X1(),Y1() ] and ( rng ( ffh | X() ) ) c= Y() and A43: (for x holds (x in ( X1() \ X() ) implies ( ffh . x ) = F(x)));
now
let x;
assume that
A44: x in X1();
now
per cases ;
suppose x in X();

then A45: x in ( dom h ) by A3,FUNCT_2:def 1;
( ffh | X() ) = h by A11,A40,A42;
then ( h . x ) = ( ffh . x ) by A45,FUNCT_1:47;
hence ( ffh . x ) = ( f . x ) by A45,FUNCT_1:47;
end;
suppose (not x in X());

then A46: x in ( X1() \ X() ) by A44,XBOOLE_0:def 5;
then ( ffh . x ) = F(x) by A43;
hence ( ffh . x ) = ( f . x ) by A37,A46;
end;
end;
hence ( ffh . x ) = ( f . x );
end;
then ffh = f by FUNCT_2:12;
hence thesis by A34,A40,A41,A42,FUNCT_1:def 3;
end;
then A47: ( rng ff ) = F2 by XBOOLE_0:def 10;
(for x1,x2 being set holds (((x1 in F1 & x2 in F1) & ( ff . x1 ) = ( ff . x2 )) implies x1 = x2))
proof
let x1 being set;
let x2 being set;
assume that
A48: x1 in F1
and
A49: x2 in F1
and
A50: ( ff . x1 ) = ( ff . x2 );
A51: (ex f2 being (Function of X(),Y()) st (x2 = f2 & P[ f2,X(),Y() ])) by A49;
( dom ff ) = F1 by A33,FUNCT_2:def 1;
then ( ff . x1 ) in ( rng ff ) by A48,FUNCT_1:def 3;
then ( ff . x1 ) in F2;
then consider F1 being (Function of X1(),Y1()) such that A52: ( ff . x1 ) = F1 and P[ F1,X1(),Y1() ] and ( rng ( F1 | X() ) ) c= Y() and (for x holds (x in ( X1() \ X() ) implies ( F1 . x ) = F(x)));
consider f1 being (Function of X(),Y()) such that A53: x1 = f1 and P[ f1,X(),Y() ] by A48;
( F1 | X() ) = f1 by A11,A48,A53,A52;
hence thesis by A11,A49,A50,A53,A51,A52;
end;
then A54: ff is  one-to-one by A33,FUNCT_2:19;
( dom ff ) = F1 by A33,FUNCT_2:def 1;
then F1,F2 are_equipotent  by A47,A54,WELLORD2:def 4;
hence thesis by CARD_1:5;
end;
end;
hence thesis;
end;
end;
hence thesis;
end;
