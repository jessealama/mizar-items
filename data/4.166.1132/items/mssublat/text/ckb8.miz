environ
vocabularies NAT_1,PBOOLE,FUNCT_1,CARD_1,XBOOLE_0,FINSEQ_2,FINSEQ_1,RELAT_1,TARSKI,NUMBERS,SUBSET_1,UNIALG_1,UNIALG_2,MSUALG_1,FUNCOP_1,CQC_SIM1,STRUCT_0,MSUALG_2,MARGREL1,PARTFUN1,CARD_3,FUNCT_2,ZFMISC_1,EQREL_1,INCPROJ,WELLORD1,GROUP_6,LATTICES;
notations TARSKI,XBOOLE_0,SUBSET_1,BINOP_1,CARD_3,NAT_1,LATTICES,LATTICE4,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCOP_1,STRUCT_0,PBOOLE,UNIALG_1,UNIALG_2,NUMBERS,FINSEQ_1,FINSEQ_2,MARGREL1,MSUALG_1,MSUALG_2;
definitions TARSKI,XBOOLE_0,MSUALG_2,PBOOLE,LATTICE4,UNIALG_1,UNIALG_2,FUNCOP_1,FINSEQ_2,FUNCT_2,MARGREL1;
theorems MSUALG_1,MSUALG_2,PBOOLE,TARSKI,UNIALG_1,UNIALG_2,FUNCT_1,RELAT_1,FUNCOP_1,PARTFUN1,FUNCT_2,FINSEQ_1,FINSEQ_2,FINSEQ_3,ZFMISC_1,CARD_3,LATTICES,MSUHOM_1,XBOOLE_0,XBOOLE_1,ORDINAL1,STRUCT_0,MARGREL1,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7;
schemes FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCOP_1,FINSEQ_2,RELAT_1,PBOOLE,STRUCT_0,UNIALG_1,UNIALG_2,MSUALG_1,MSUALG_2,FINSEQ_1,MARGREL1,CARD_1;
constructors BINOP_1,CARD_3,FINSEQOP,FILTER_1,UNIALG_2,LATTICE4,MSUALG_2,RELSET_1,MARGREL1,NAT_1;
requirements NUMERALS,SUBSET,BOOLE;
begin
reconsider z = ( 0 ) as (Element of { ( 0 ) }) by TARSKI:def 1;
theorem
Th8: (for U1,U2 being Universal_Algebra holds (U1 is (SubAlgebra of U2) implies (for B being (MSSubset of ( MSAlg U2 )) holds (B = (the Sorts of ( MSAlg U1 )) implies (for o being (OperSymbol of ( MSSign U2 )) holds (for a being (OperSymbol of ( MSSign U1 )) holds (a = o implies ( Den (a,( MSAlg U1 )) ) = ( ( Den (o,( MSAlg U2 )) ) | ( Args (a,( MSAlg U1 )) ) ))))))))
proof
let U1 being Universal_Algebra;
let U2 being Universal_Algebra;
assume that
A1: U1 is (SubAlgebra of U2);
A2: ( MSSign U1 ) = ( MSSign U2 ) by A1,CKB7:1;
A3: ( MSSign U1 ) = ( MSSign U2 ) by A1,CKB7:1;
let B being (MSSubset of ( MSAlg U2 ));
assume that
A4: B = (the Sorts of ( MSAlg U1 ));
let o being (OperSymbol of ( MSSign U2 ));
reconsider a = o as (Element of (the carrier' of ( MSSign U1 ))) by A1,CKB7:1;
set X = ( Args (a,( MSAlg U1 )) );
set Y = ( dom ( Den (a,( MSAlg U1 )) ) );
((the Sorts of ( MSAlg U2 )) is (MSSubset of ( MSAlg U2 )) & B c= (the Sorts of ( MSAlg U2 ))) by PBOOLE:def 18;
then A5: ( ( ( B # ) * (the Arity of ( MSSign U1 )) ) . a ) c= ( ( ( (the Sorts of ( MSAlg U2 )) # ) * (the Arity of ( MSSign U2 )) ) . o ) by A3,MSUALG_2:2;
(( dom ( Den (o,( MSAlg U2 )) ) ) = ( Args (o,( MSAlg U2 )) ) & ( Args (o,( MSAlg U2 )) ) = ( ( ( (the Sorts of ( MSAlg U2 )) # ) * (the Arity of ( MSSign U2 )) ) . o )) by FUNCT_2:def 1,MSUALG_1:def 4;
then ( Args (a,( MSAlg U1 )) ) c= ( dom ( Den (o,( MSAlg U2 )) ) ) by A4,A2,A5,MSUALG_1:def 4;
then ( dom ( ( Den (o,( MSAlg U2 )) ) | ( Args (a,( MSAlg U1 )) ) ) ) = ( Args (a,( MSAlg U1 )) ) by RELAT_1:62;
then ( dom ( ( Den (o,( MSAlg U2 )) ) | ( Args (a,( MSAlg U1 )) ) ) ) = ( dom ( Den (a,( MSAlg U1 )) ) ) by FUNCT_2:def 1;
then A6: Y = ( ( dom ( Den (o,( MSAlg U2 )) ) ) /\ X ) by RELAT_1:61;
(for x being set holds (x in Y implies ( ( Den (o,( MSAlg U2 )) ) . x ) = ( ( Den (a,( MSAlg U1 )) ) . x )))
proof
( MSAlg U1 ) = MSAlgebra (# ( MSSorts U1 ),( MSCharact U1 ) #) by MSUALG_1:def 11;
then (the Sorts of ( MSAlg U1 )) = ( ( 0 ) .--> (the carrier of U1) ) by MSUALG_1:def 9;
then ( rng (the Sorts of ( MSAlg U1 )) ) = { (the carrier of U1) } by FUNCOP_1:8;
then A7: (the carrier of U1) is (Component of (the Sorts of ( MSAlg U1 ))) by TARSKI:def 1;
reconsider cc = (the carrier of U1) as non  empty (Subset of U2) by A1,UNIALG_2:def 7;
let x being set;
A8: ( MSAlg U2 ) = MSAlgebra (# ( MSSorts U2 ),( MSCharact U2 ) #) by MSUALG_1:def 11;
U1,U2 are_similar  by A1,UNIALG_2:13;
then A9: ( signature U1 ) = ( signature U2 ) by UNIALG_2:def 1;
assume x in Y;
then x in X by A6,XBOOLE_0:def 4;
then x in ( ( len ( the_arity_of a ) ) -tuples_on ( the_sort_of ( MSAlg U1 ) ) ) by MSUALG_1:6;
then A10: x in ( ( len ( the_arity_of a ) ) -tuples_on (the carrier of U1) ) by A7,MSUALG_1:def 12;
reconsider gg1 = ( ( *--> ( 0 ) ) * ( signature U2 ) ) as (Function of ( dom ( signature U2 ) ),( { ( 0 ) } * )) by MSUALG_1:2;
set ff1 = ( ( *--> ( 0 ) ) * ( signature U1 ) );
set ff2 = ( ( dom ( signature U1 ) ) --> z );
set gg2 = ( ( dom ( signature U2 ) ) --> z );
reconsider ff1 as (Function of ( dom ( signature U1 ) ),( { ( 0 ) } * )) by MSUALG_1:2;
consider n being Nat such that A11: ( dom ( signature U2 ) ) = ( Seg n ) by FINSEQ_1:def 2;
A12: ( MSSign U2 ) = ManySortedSign (# { ( 0 ) },( dom ( signature U2 ) ),gg1,gg2 #) by MSUALG_1:10;
then A13: a in ( Seg n ) by A11;
A14: ( dom (the charact of U2) ) = ( Seg ( len (the charact of U2) ) ) by FINSEQ_1:def 3
.= ( Seg ( len ( signature U2 ) ) ) by UNIALG_1:def 4
.= ( dom ( signature U2 ) ) by FINSEQ_1:def 3;
then reconsider op = ( (the charact of U2) . a ) as (operation of U2) by A12,FUNCT_1:def 3;
reconsider a as (Element of ( NAT )) by A13;
A15: ( rng ( signature U1 ) ) c= ( NAT ) by FINSEQ_1:def 4;
U1,U2 are_similar  by A1,UNIALG_2:13;
then A16: ( signature U1 ) = ( signature U2 ) by UNIALG_2:def 1;
then A17: ( ( signature U1 ) . a ) in ( rng ( signature U1 ) ) by A12,FUNCT_1:def 3;
then reconsider sig = ( ( signature U1 ) . a ) as (Element of ( NAT )) by A15;
( dom ( *--> ( 0 ) ) ) = ( NAT ) by FUNCT_2:def 1;
then (( MSSign U1 ) = ManySortedSign (# { ( 0 ) },( dom ( signature U1 ) ),ff1,ff2 #) & a in ( dom ( ( *--> ( 0 ) ) * ( signature U1 ) ) )) by A12,A16,A17,A15,FUNCT_1:11,MSUALG_1:10;
then ( (the Arity of ( MSSign U1 )) . a ) = ( ( *--> ( 0 ) ) . ( ( signature U1 ) . a ) ) by FUNCT_1:12;
then A18: ( (the Arity of ( MSSign U1 )) . a ) = ( sig |-> ( 0 ) ) by FINSEQ_2:def 6;
then reconsider ar = ( (the Arity of ( MSSign U1 )) . a ) as FinSequence;
x in ( ( len ar ) -tuples_on (the carrier of U1) ) by A10,MSUALG_1:def 1;
then x in ( sig -tuples_on (the carrier of U1) ) by A18,CARD_1:def 7;
then A19: x in ( ( arity op ) -tuples_on (the carrier of U1) ) by A12,A9,UNIALG_1:def 4;
now
let n being set;
assume n in ( dom ( Opers (U2,cc) ) );
then (( rng ( Opers (U2,cc) ) ) c= ( PFuncs (( cc * ),cc) ) & ( ( Opers (U2,cc) ) . n ) in ( rng ( Opers (U2,cc) ) )) by FINSEQ_1:def 4,FUNCT_1:def 3;
hence ( ( Opers (U2,cc) ) . n ) is Function by PARTFUN1:46;
end;
then reconsider f = ( Opers (U2,cc) ) as  Function-yielding Function by FUNCOP_1:def 6;
cc is  opers_closed by A1,UNIALG_2:def 7;
then A20: cc is_closed_on op by UNIALG_2:def 4;
a in ( dom (the charact of U2) ) by A12,A14;
then A21: o in ( dom ( Opers (U2,cc) ) ) by UNIALG_2:def 6;
reconsider a as (OperSymbol of ( MSSign U1 ));
( MSAlg U1 ) = MSAlgebra (# ( MSSorts U1 ),( MSCharact U1 ) #) by MSUALG_1:def 11;
then ( ( Den (a,( MSAlg U1 )) ) . x ) = ( ( ( MSCharact U1 ) . o ) . x ) by MSUALG_1:def 6
.= ( ( (the charact of U1) . o ) . x ) by MSUALG_1:def 10
.= ( ( f . o ) . x ) by A1,UNIALG_2:def 7
.= ( ( op /. cc ) . x ) by A21,UNIALG_2:def 6
.= ( ( op | ( ( arity op ) -tuples_on cc ) ) . x ) by A20,UNIALG_2:def 5
.= ( ( (the charact of U2) . o ) . x ) by A19,FUNCT_1:49
.= ( ( (the Charact of ( MSAlg U2 )) . o ) . x ) by A8,MSUALG_1:def 10
.= ( ( Den (o,( MSAlg U2 )) ) . x ) by MSUALG_1:def 6;
hence thesis;
end;
hence thesis by A6,FUNCT_1:46;
end;
