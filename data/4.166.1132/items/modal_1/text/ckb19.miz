environ
vocabularies NUMBERS,SUBSET_1,TREES_2,ZFMISC_1,FINSEQ_1,XBOOLE_0,TREES_1,FUNCT_1,RELAT_1,ORDINAL4,NAT_1,CARD_1,XXREAL_0,PARTFUN1,TARSKI,ORDINAL1,ARYTM_3,FINSET_1,FUNCOP_1,MARGREL1,MCART_1,QC_LANG1,XBOOLEAN,VALUED_1,ZF_LANG,MODAL_1,TREES_3;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,WELLORD2,NAT_1,DOMAIN_1,MCART_1,RELAT_1,FUNCT_1,RELSET_1,FINSEQ_1,FUNCOP_1,FINSEQ_2,FUNCT_2,FINSET_1,PARTFUN1,TREES_1,TREES_2,XXREAL_0,TREES_3,CKB2,CKB3;
definitions TARSKI,XBOOLE_0,FUNCT_1,CKB2,CKB3;
theorems TARSKI,FUNCT_1,NAT_1,ENUMSET1,TREES_1,TREES_2,FUNCOP_1,MCART_1,DOMAIN_1,PARTFUN1,FINSEQ_1,FINSET_1,CARD_1,WELLORD2,CARD_2,ZFMISC_1,FINSEQ_2,RELAT_1,FUNCT_2,RELSET_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,TREES_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes TREES_2,CLASSES1,NAT_1,FUNCT_2,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,FINSEQ_1,TREES_1,TREES_2,CARD_1,RELSET_1,TREES_3;
constructors PARTFUN1,WELLORD2,DOMAIN_1,XXREAL_0,XREAL_0,NAT_1,FINSEQ_2,TREES_2,RELSET_1,FUNCOP_1,TREES_3,CKB2,CKB3;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve x1 for set;
reserve x2 for set;
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve t for (FinSequence of ( NAT ));
theorem
Th20: (for Z1 being Tree holds (for p being (FinSequence of ( NAT )) holds (p in Z1 implies (for v being (Element of Z1) holds (for w being (Element of ( Z1 | p )) holds (v = ( p ^ w ) implies ( succ v ),( succ w ) are_equipotent ))))))
proof
let Z1 being Tree;
let p being (FinSequence of ( NAT ));
assume that
A1: p in Z1;
set T = ( Z1 | p );
let t being (Element of Z1);
let t2 being (Element of ( Z1 | p ));
assume that
A2: t = ( p ^ t2 );
A3: (for n holds (( t ^ <* n *> ) in Z1 iff ( t2 ^ <* n *> ) in T))
proof
let n;
A4: ( t ^ <* n *> ) = ( p ^ ( t2 ^ <* n *> ) ) by A2,FINSEQ_1:32;
hence (( t ^ <* n *> ) in Z1 implies ( t2 ^ <* n *> ) in T) by A1,TREES_1:def 6;
assume ( t2 ^ <* n *> ) in T;
hence thesis by A1,A4,TREES_1:def 6;
end;
defpred P[ set,set ]
 means
(for n holds ($1 = ( t ^ <* n *> ) implies $2 = ( t2 ^ <* n *> )));
A5: (for x holds (x in ( succ t ) implies (ex y st P[ x,y ])))
proof
let x;
assume x in ( succ t );
then x in { ( t ^ <* n *> ): ( t ^ <* n *> ) in Z1 } by TREES_2:def 5;
then consider n such that A6: x = ( t ^ <* n *> ) and ( t ^ <* n *> ) in Z1;
take ( t2 ^ <* n *> );
let m;
assume x = ( t ^ <* m *> );
hence thesis by A6,FINSEQ_1:33;
end;
consider f being Function such that A7: (( dom f ) = ( succ t ) & (for x holds (x in ( succ t ) implies P[ x,( f . x ) ]))) from CLASSES1:sch 1(A5);
now
let x;
thus (x in ( rng f ) implies x in ( succ t2 ))
proof
assume x in ( rng f );
then consider y such that A8: y in ( dom f ) and A9: x = ( f . y ) by FUNCT_1:def 3;
y in { ( t ^ <* n *> ): ( t ^ <* n *> ) in Z1 } by A7,A8,TREES_2:def 5;
then consider n such that A10: y = ( t ^ <* n *> ) and A11: ( t ^ <* n *> ) in Z1;
A12: ( t2 ^ <* n *> ) in T by A3,A11;
x = ( t2 ^ <* n *> ) by A7,A8,A9,A10;
then x in { ( t2 ^ <* m *> ): ( t2 ^ <* m *> ) in T } by A12;
hence thesis by TREES_2:def 5;
end;

assume x in ( succ t2 );
then x in { ( t2 ^ <* n *> ): ( t2 ^ <* n *> ) in T } by TREES_2:def 5;
then consider n such that A13: x = ( t2 ^ <* n *> ) and A14: ( t2 ^ <* n *> ) in T;
( t ^ <* n *> ) in Z1 by A3,A14;
then ( t ^ <* n *> ) in { ( t ^ <* m *> ): ( t ^ <* m *> ) in Z1 };
then A15: ( t ^ <* n *> ) in ( dom f ) by A7,TREES_2:def 5;
then ( f . ( t ^ <* n *> ) ) = x by A7,A13;
hence x in ( rng f ) by A15,FUNCT_1:def 3;
end;
then A16: ( rng f ) = ( succ t2 ) by TARSKI:1;
now
let x1;
let x2;
assume that
A17: x1 in ( dom f )
and
A18: x2 in ( dom f )
and
A19: ( f . x1 ) = ( f . x2 );
x2 in { ( t ^ <* n *> ): ( t ^ <* n *> ) in Z1 } by A7,A18,TREES_2:def 5;
then consider k such that A20: x2 = ( t ^ <* k *> ) and ( t ^ <* k *> ) in Z1;
x1 in { ( t ^ <* n *> ): ( t ^ <* n *> ) in Z1 } by A7,A17,TREES_2:def 5;
then consider m such that A21: x1 = ( t ^ <* m *> ) and ( t ^ <* m *> ) in Z1;
( t2 ^ <* m *> ) = ( f . x1 ) by A7,A17,A21
.= ( t2 ^ <* k *> ) by A7,A18,A19,A20;
hence x1 = x2 by A21,A20,FINSEQ_1:33;
end;
then f is  one-to-one by FUNCT_1:def 4;
hence thesis by A7,A16,WELLORD2:def 4;
end;
