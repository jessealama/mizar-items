environ
vocabularies XBOOLE_0,STRUCT_0,PBOOLE,FUNCT_4,RELAT_1,CLOSURE2,SETFAM_1,MSUALG_1,TARSKI,MSUALG_2,UNIALG_2,MSSUBFAM,FUNCT_1,MARGREL1,SUBSET_1,FINSET_1,FUNCOP_1,WAYBEL_8,RELAT_2,MSAFREE2,BINOP_1,ZFMISC_1,CARD_3,FUNCT_2,CLOSURE3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,STRUCT_0,PARTFUN1,FUNCT_2,FINSET_1,FUNCT_4,FUNCOP_1,PBOOLE,FINSEQ_2,MSUALG_1,MSUALG_2,CARD_3,CLOSURE2,MSSUBFAM,MBOOLEAN,CKB6,CKB11,CKB14,CKB17;
definitions XBOOLE_0,TARSKI,PBOOLE,CLOSURE2,MSUALG_2,SETFAM_1,CKB6,CKB11;
theorems FUNCT_4,FUNCT_1,TARSKI,PBOOLE,MSUALG_1,MBOOLEAN,FUNCOP_1,MSUALG_2,CLOSURE2,ZFMISC_1,RELAT_1,CARD_3,MSSUBFAM,FUNCT_2,XBOOLE_0,XBOOLE_1,SETFAM_1,PARTFUN1,FINSET_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB15,CKB16,CKB18;
schemes CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,FUNCT_2,FINSET_1,PBOOLE,STRUCT_0,MSUALG_1,CLOSURE2,CKB1,CKB12;
constructors SETFAM_1,FUNCT_4,MSSUBFAM,MSUALG_2,PRALG_2,CLOSURE2,RELSET_1,FINSEQ_2,CKB6,CKB11,CKB14,CKB17;
requirements SUBSET,BOOLE;
begin
theorem
(for I being set holds (for M being (ManySortedSet of I) holds (for AA being set holds ((for x being set holds (x in AA implies x is (SubsetFamily of M))) implies (for A,B being (SubsetFamily of M) holds ((B = { ( MSUnion X ) where X is (SubsetFamily of M): X in AA } & A = ( union AA )) implies ( MSUnion B ) = ( MSUnion A )))))))
proof
let I being set;
let M being (ManySortedSet of I);
let AA being set;
assume that
A1: (for x being set holds (x in AA implies x is (SubsetFamily of M)));
let A being (SubsetFamily of M);
let B being (SubsetFamily of M);
assume that
A2: B = { ( MSUnion X ) where X is (SubsetFamily of M): X in AA }
and
A3: A = ( union AA );
(for i being set holds (i in I implies ( ( MSUnion B ) . i ) c= ( ( MSUnion A ) . i )))
proof
let i being set;
assume that
A4: i in I;
now
let a being set;
thus (a in ( ( MSUnion B ) . i ) implies a in ( ( MSUnion A ) . i ))
proof
assume a in ( ( MSUnion B ) . i );
then a in ( union { ( f . i ) where f is (Element of ( Bool M )): f in B } ) by A4,CKB11:def 1;
then consider Y being set such that A5: a in Y and A6: Y in { ( f . i ) where f is (Element of ( Bool M )): f in B } by TARSKI:def 4;
consider f being (Element of ( Bool M )) such that A7: ( f . i ) = Y and A8: f in B by A6;
consider Q being (SubsetFamily of M) such that A9: f = ( MSUnion Q ) and A10: Q in AA by A2,A8;
( ( MSUnion Q ) . i ) = ( union { ( g . i ) where g is (Element of ( Bool M )): g in Q } ) by A4,CKB11:def 1;
then consider d being set such that A11: a in d and A12: d in { ( g . i ) where g is (Element of ( Bool M )): g in Q } by A5,A7,A9,TARSKI:def 4;
consider g being (Element of ( Bool M )) such that A13: d = ( g . i ) and A14: g in Q by A12;
g in ( union AA ) by A10,A14,TARSKI:def 4;
then d in { ( h . i ) where h is (Element of ( Bool M )): h in ( union AA ) } by A13;
then a in ( union { ( h . i ) where h is (Element of ( Bool M )): h in ( union AA ) } ) by A11,TARSKI:def 4;
hence thesis by A3,A4,CKB11:def 1;
end;

end;
hence thesis by TARSKI:def 3;
end;
hence ( MSUnion B ) c= ( MSUnion A ) by PBOOLE:def 2;
(for i being set holds (i in I implies ( ( MSUnion A ) . i ) c= ( ( MSUnion B ) . i )))
proof
let i being set;
assume that
A15: i in I;
let a being set;
(a in ( ( MSUnion A ) . i ) implies a in ( ( MSUnion B ) . i ))
proof
assume a in ( ( MSUnion A ) . i );
then a in ( union { ( f . i ) where f is (Element of ( Bool M )): f in A } ) by A15,CKB11:def 1;
then consider Y being set such that A16: a in Y and A17: Y in { ( f . i ) where f is (Element of ( Bool M )): f in A } by TARSKI:def 4;
consider f being (Element of ( Bool M )) such that A18: ( f . i ) = Y and A19: f in A by A17;
consider c being set such that A20: f in c and A21: c in AA by A3,A19,TARSKI:def 4;
reconsider c as (SubsetFamily of M) by A1,A21;
( f . i ) in { ( v . i ) where v is (Element of ( Bool M )): v in c } by A20;
then A22: a in ( union { ( v . i ) where v is (Element of ( Bool M )): v in c } ) by A16,A18,TARSKI:def 4;
( ( MSUnion c ) . i ) = ( union { ( v . i ) where v is (Element of ( Bool M )): v in c } ) by A15,CKB11:def 1;
then consider cos being set such that A23: a in cos and A24: cos = ( ( MSUnion c ) . i ) by A22;
( MSUnion c ) in { ( MSUnion X ) where X is (SubsetFamily of M): X in AA } by A21;
then cos in { ( t . i ) where t is (Element of ( Bool M )): t in B } by A2,A24;
then a in ( union { ( t . i ) where t is (Element of ( Bool M )): t in B } ) by A23,TARSKI:def 4;
hence thesis by A15,CKB11:def 1;
end;
hence thesis;
end;
hence thesis by PBOOLE:def 2;
end;
