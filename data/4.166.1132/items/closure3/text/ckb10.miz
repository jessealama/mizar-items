environ
vocabularies XBOOLE_0,STRUCT_0,PBOOLE,FUNCT_4,RELAT_1,CLOSURE2,SETFAM_1,MSUALG_1,TARSKI,MSUALG_2,UNIALG_2,MSSUBFAM,FUNCT_1,MARGREL1,SUBSET_1,FINSET_1,FUNCOP_1,WAYBEL_8,RELAT_2,MSAFREE2,BINOP_1,ZFMISC_1,CARD_3,FUNCT_2,CLOSURE3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,STRUCT_0,PARTFUN1,FUNCT_2,FINSET_1,FUNCT_4,FUNCOP_1,PBOOLE,FINSEQ_2,MSUALG_1,MSUALG_2,CARD_3,CLOSURE2,MSSUBFAM,MBOOLEAN,CKB6;
definitions XBOOLE_0,TARSKI,PBOOLE,CLOSURE2,MSUALG_2,SETFAM_1,CKB6;
theorems FUNCT_4,FUNCT_1,TARSKI,PBOOLE,MSUALG_1,MBOOLEAN,FUNCOP_1,MSUALG_2,CLOSURE2,ZFMISC_1,RELAT_1,CARD_3,MSSUBFAM,FUNCT_2,XBOOLE_0,XBOOLE_1,SETFAM_1,PARTFUN1,FINSET_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9;
schemes CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,RELSET_1,FUNCT_2,FINSET_1,PBOOLE,STRUCT_0,MSUALG_1,CLOSURE2,CKB1;
constructors SETFAM_1,FUNCT_4,MSSUBFAM,MSUALG_2,PRALG_2,CLOSURE2,RELSET_1,FINSEQ_2,CKB6;
requirements SUBSET,BOOLE;
begin
theorem
Th9: (for I being non  empty set holds (for M being (ManySortedSet of I) holds (for x being (Element of ( Bool M )) holds (for i being (Element of I) holds (for y being set holds (y in ( x . i ) implies (ex a being (Element of ( Bool M )) st (((y in ( a . i ) & a is  finite-yielding) & ( supp a ) is  finite) & a c= x))))))))
proof
let I being non  empty set;
let M being (ManySortedSet of I);
let x being (Element of ( Bool M ));
let i being (Element of I);
let y being set;
assume that
A1: y in ( x . i );
set N = ( { i } --> { y } );
set A = ( ( [[0]] I ) +* N );
A2: ( dom N ) = { i } by FUNCOP_1:13;
then A3: i in ( dom N ) by TARSKI:def 1;
then A4: ( N . i ) = { y } by A2,FUNCOP_1:7;
then A5: ( A . i ) = { y } by A3,FUNCT_4:13;
A6: ( dom A ) = ( ( dom ( [[0]] I ) ) \/ ( dom N ) ) by FUNCT_4:def 1
.= ( I \/ { i } ) by A2,PARTFUN1:def 2
.= I by ZFMISC_1:40;
then reconsider A as (ManySortedSet of I) by PARTFUN1:def 2,RELAT_1:def 18;
(for j being set holds (j in I implies ( A . j ) c= ( M . j )))
proof
let j being set;
assume that
A7: j in I;
per cases ;
suppose A8: i = j;

reconsider x as (ManySortedSubset of M);
let v being set;
assume v in ( A . j );
then v in { y } by A3,A4,A8,FUNCT_4:13;
then A9: v in ( x . j ) by A1,A8,TARSKI:def 1;
x c= M by PBOOLE:def 18;
then ( x . j ) c= ( M . j ) by A7,PBOOLE:def 2;
hence thesis by A9;
end;
suppose i <> j;

then A10: (not j in { i }) by TARSKI:def 1;
j in ( ( dom ( [[0]] I ) ) \/ ( dom N ) ) by A6,A7,FUNCT_4:def 1;
then ( A . j ) = ( ( I --> ( {} ) ) . j ) by A2,A10,FUNCT_4:def 1
.= ( {} ) by A7,FUNCOP_1:7;
hence thesis by XBOOLE_1:2;
end;
end;
then A c= M by PBOOLE:def 2;
then reconsider AA = A as (ManySortedSubset of M) by PBOOLE:def 18;
reconsider a = AA as (Element of ( Bool M )) by CLOSURE2:def 1;
A11: (for j being set holds (j in I implies ( a . j ) c= ( x . j )))
proof
let j being set;
assume that
A12: j in I;
per cases ;
suppose A13: i = j;

let v being set;
assume A14: v in ( a . j );
( a . j ) = { y } by A3,A4,A13,FUNCT_4:13;
hence thesis by A1,A13,A14,TARSKI:def 1;
end;
suppose j <> i;

then A15: (not j in { i }) by TARSKI:def 1;
j in ( ( dom ( [[0]] I ) ) \/ ( dom N ) ) by A6,A12,FUNCT_4:def 1;
then ( a . j ) = ( ( I --> ( {} ) ) . j ) by A2,A15,FUNCT_4:def 1
.= ( {} ) by A12,FUNCOP_1:7;
hence thesis by XBOOLE_1:2;
end;
end;
A16: { b where b is (Element of I): ( a . b ) <> ( {} ) } = { i }
proof
thus { b where b is (Element of I): ( a . b ) <> ( {} ) } c= { i }
proof
let s being set;
assume s in { b where b is (Element of I): ( a . b ) <> ( {} ) };
then A17: (ex b being (Element of I) st (s = b & ( a . b ) <> ( {} )));
assume A18: (not s in { i });
reconsider s as (Element of I) by A17;
s in ( dom a ) by A6;
then s in ( ( dom ( [[0]] I ) ) \/ ( dom N ) ) by FUNCT_4:def 1;
then ( a . s ) = ( ( I --> ( {} ) ) . s ) by A2,A18,FUNCT_4:def 1
.= ( {} ) by FUNCOP_1:7;
hence contradiction by A17;
end;

let s being set;
assume A19: s in { i };
then A20: s = i by TARSKI:def 1;
reconsider s as (Element of I) by A19,TARSKI:def 1;
( a . s ) = { y } by A3,A4,A20,FUNCT_4:13;
hence thesis;
end;
take a;
(for j being set holds (j in I implies ( a . j ) is  finite))
proof
let j being set;
assume that
A21: j in I;
per cases ;
suppose j = i;

hence thesis by A3,A4,FUNCT_4:13;
end;
suppose j <> i;

then A22: (not j in { i }) by TARSKI:def 1;
j in ( ( dom ( [[0]] I ) ) \/ ( dom N ) ) by A6,A21,FUNCT_4:def 1;
then ( a . j ) = ( ( I --> ( {} ) ) . j ) by A2,A22,FUNCT_4:def 1
.= ( {} ) by A21,FUNCOP_1:7;
hence thesis;
end;
end;
hence thesis by A5,A16,A11,CKB6:def 1,FINSET_1:def 4,PBOOLE:def 2,TARSKI:def 1;
end;
