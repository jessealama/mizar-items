environ
vocabularies NUMBERS,STRUCT_0,MSAFREE2,XBOOLE_0,MSUALG_1,RELAT_1,CIRCUIT1,FSM_1,SUBSET_1,CIRCUIT2,FUNCT_1,ARYTM_3,CARD_1,XXREAL_0,NAT_1,FUNCT_4,PARTFUN1,FINSET_1,CIRCCOMB,FINSEQ_2,TARSKI,PBOOLE,GLIB_000,FINSEQ_1,NET_1,FACIRC_1,FUNCOP_1,CATALG_1,MCART_1,ZFMISC_1,CLASSES1,REWRITE1,ORDINAL2,MARGREL1,VALUED_0,CIRCCMB3;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,ENUMSET1,ZFMISC_1,RELAT_1,FUNCT_1,PBOOLE,FINSET_1,ORDINAL2,CLASSES1,FUNCT_2,XXREAL_0,NAT_1,VALUED_0,PARTFUN1,LIMFUNC1,REWRITE1,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSEQOP,FUNCT_4,STRUCT_0,MSUALG_1,FACIRC_1,MSAFREE2,CIRCUIT1,CIRCUIT2,CIRCCOMB,FUNCOP_1,XXREAL_2,MCART_1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB21,CKB22,CKB31,CKB49,CKB52,CKB53;
definitions TARSKI,XBOOLE_0,RELAT_1,REWRITE1,MSAFREE2,CIRCUIT2,FINSET_1,CIRCCOMB,FACIRC_1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB21,CKB22,CKB31,CKB49,CKB53;
theorems CIRCCOMB,ZFMISC_1,TARSKI,XBOOLE_0,FINSEQ_1,FUNCT_1,FINSEQ_2,CIRCUIT1,CARD_3,CIRCCMB2,FUNCOP_1,PBOOLE,FINSEQ_3,ENUMSET1,FACIRC_1,ORDINAL2,MCART_1,FUNCT_4,FINSET_1,NAT_1,RELAT_1,MSUALG_1,MSAFREE2,FUNCT_2,RELSET_1,CLASSES1,ORDINAL1,CIRCUIT2,XBOOLE_1,XREAL_1,XXREAL_0,FINSEQ_4,VALUED_0,XXREAL_2,PARTFUN1,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB31,CKB33,CKB34,CKB35,CKB36,CKB37,CKB39,CKB40,CKB46,CKB47,CKB48,CKB49,CKB50,CKB53,CKB55;
schemes TARSKI,XBOOLE_0,FUNCT_2,NAT_1,REWRITE1,CLASSES1,RELAT_1,CKB41,CKB42,CKB43,CKB44,CKB45;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,XREAL_0,MEMBERED,FINSEQ_1,FINSEQ_2,CARD_3,SEQM_3,FINSEQ_4,PBOOLE,STRUCT_0,MSUALG_1,CIRCCOMB,FACIRC_1,XXREAL_2,RELSET_1,CARD_1,CKB5,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB38,CKB51,CKB54;
constructors DOMAIN_1,ORDINAL2,CLASSES1,FINSEQOP,FINSEQ_4,LIMFUNC1,REWRITE1,CIRCUIT1,CIRCUIT2,FACIRC_1,XXREAL_2,VALUED_0,RELSET_1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB21,CKB22,CKB31,CKB49,CKB52,CKB53;
requirements BOOLE,SUBSET,NUMERALS,REAL;
begin
registration
let X being non empty  finite set;
let S being  one-gate (Signature of X);
cluster  strict  one-gate for (Circuit of X,S);
existence
proof
consider A being (Circuit of S) such that A1: ((the Sorts of A) is  constant & ( the_value_of (the Sorts of A) ) = X) and A2: A is  gate`2=den by CKB49:def 1;
set B = ( the MSAlgebra of A );
(the Sorts of A) is  finite-yielding by MSAFREE2:def 11;
then reconsider B as (Circuit of S) by MSAFREE2:def 11;
(for g being set holds (g in (the carrier' of S) implies g = [ ( g `1 ),( (the Charact of B) . g ) ])) by A2,CIRCCOMB:def 10;
then B is  gate`2=den by CIRCCOMB:def 10;
then reconsider B as (Circuit of X,S) by A1,CKB53:def 1;
consider Y being non empty  finite set,n being (Element of ( NAT )),p being (FinSeqLen of n),f being (Function of ( n -tuples_on Y ),Y) such that A3: S = ( 1GateCircStr (p,f) ) by CKB21:def 1;
take B;
A4: ( dom (the Arity of S) ) = (the carrier' of S) by FUNCT_2:def 1;
( dom (the Sorts of A) ) = (the carrier of S) by PARTFUN1:def 2;
then A5: (the Sorts of B) = ( (the carrier of S) --> X ) by A1,FUNCOP_1:80;
set g = [ p,f ];
set C = ( 1GateCircuit (p,f) );
g in { g } by TARSKI:def 1;
then A6: g in (the carrier' of S) by A3,CIRCCOMB:def 6;
then A7: g = [ ( g `1 ),( (the Charact of C) . g ) ] by A3,CIRCCOMB:def 10;
( (the Arity of S) . g ) in ( (the carrier of S) * ) by A6,FUNCT_2:5;
then reconsider Ag = ( (the Arity of S) . g ) as (FinSequence of (the carrier of S)) by FINSEQ_1:def 11;
( dom (the ResultSort of S) ) = (the carrier' of S) by FUNCT_2:def 1;
then A8: ( ( (the Sorts of B) * (the ResultSort of S) ) . g ) = ( (the Sorts of B) . ( (the ResultSort of S) . g ) ) by A6,FUNCT_1:13;
( (the ResultSort of S) . g ) in (the carrier of S) by A6,FUNCT_2:5;
then ( (the ResultSort of S) . g ) in ( dom (the Sorts of B) ) by PARTFUN1:def 2;
then A9: ( (the Sorts of B) . ( (the ResultSort of S) . g ) ) = X by A1,FUNCT_1:def 12;
A10: g = [ ( g `1 ),( (the Charact of B) . g ) ] by A6,CIRCCOMB:def 10;
then ( dom ( (the Charact of B) . g ) ) = ( dom f ) by ZFMISC_1:27;
then A11: ( dom ( (the Charact of B) . g ) ) = ( n -tuples_on Y ) by FUNCT_2:def 1;
( (the Charact of B) . g ) is (Function of ( ( ( (the Sorts of B) # ) * (the Arity of S) ) . g ),( ( (the Sorts of B) * (the ResultSort of S) ) . g )) by A6,PBOOLE:def 15;
then ( dom ( (the Charact of B) . g ) ) = ( ( ( (the Sorts of B) # ) * (the Arity of S) ) . g ) by A6,FUNCT_2:def 1;
then A12: ( dom ( (the Charact of B) . g ) ) = ( ( (the Sorts of B) # ) . Ag ) by A6,A4,FUNCT_1:13
.= ( ( len Ag ) -tuples_on X ) by A5,CIRCCOMB:2;
per cases ;
suppose A13: n <> ( 0 );

A14:now
let i being set;
assume i in (the carrier' of S);
then i in { g } by A3,CIRCCOMB:def 6;
then i = g by TARSKI:def 1;
hence ( (the Charact of B) . i ) = ( (the Charact of C) . i ) by A10,A7,ZFMISC_1:27;
end;
X = Y by A11,A12,A13,CKB46:1;
then (the Sorts of B) = (the Sorts of ( 1GateCircuit (p,f) )) by A3,A5,CIRCCOMB:def 13;
hence thesis by A3,A14,PBOOLE:3;
end;
suppose A15: n = ( 0 );

then ( n -tuples_on X ) = { ( <*> X ) } by FINSEQ_2:94
.= { ( <*> Y ) }
.= ( n -tuples_on Y ) by A15,FINSEQ_2:94;
then A16: ( dom f ) = ( n -tuples_on X ) by FUNCT_2:def 1;
( (the Charact of B) . g ) is (Function of ( ( ( (the Sorts of B) # ) * (the Arity of S) ) . g ),( ( (the Sorts of B) * (the ResultSort of S) ) . g )) by A6,PBOOLE:def 15;
then A17: ( rng ( (the Charact of B) . g ) ) c= ( ( (the Sorts of B) * (the ResultSort of S) ) . g ) by RELAT_1:def 19;
( (the Charact of B) . g ) = f by A10,ZFMISC_1:27;
then reconsider h = f as (Function of ( n -tuples_on X ),X) by A8,A9,A17,A16,FUNCT_2:2;
set D = ( 1GateCircuit (p,h) );
A18: g = [ ( g `1 ),( (the Charact of D) . g ) ] by A3,A6,CIRCCOMB:def 10;
A19:now
let i being set;
assume i in (the carrier' of S);
then i in { g } by A3,CIRCCOMB:def 6;
then i = g by TARSKI:def 1;
hence ( (the Charact of B) . i ) = ( (the Charact of D) . i ) by A10,A18,ZFMISC_1:27;
end;
(the Sorts of B) = (the Sorts of D) by A3,A5,CIRCCOMB:def 13;
hence thesis by A3,A19,PBOOLE:3;
end;
end;
end;
