environ
vocabularies FUNCT_1,RELAT_1,FUNCOP_1,NAT_1,TARSKI,ARYTM_3,XBOOLE_0,SUBSET_1,NUMBERS,XXREAL_0,FINSET_1,CARD_1,ORDERS_2,REARRAN1,RELAT_2,STRUCT_0,WELLORD1,WAYBEL_4,WAYBEL20,EQREL_1,ORDERS_1,ZFMISC_1,WELLFND1,SETFAM_1,VALUED_0,ORDINAL2,MCART_1,CAT_1,YELLOW_1,PBOOLE,CARD_3,RLVECT_2,YELLOW_6,WAYBEL_3,FUNCT_4,YELLOW_3,DICKSON;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,XXREAL_2,SEQ_4,PARTFUN1,FUNCT_2,CARD_3,NAT_1,STRUCT_0,RELAT_2,XXREAL_0,FUNCT_4,FUNCOP_1,DOMAIN_1,FINSET_1,MCART_1,WELLORD1,ORDERS_2,ORDERS_1,EQREL_1,WELLFND1,WAYBEL_0,CARD_1,NUMBERS,WAYBEL_4,VALUED_0,PRALG_1,YELLOW_3,WAYBEL_1,YELLOW_1,WAYBEL_3,YELLOW_6,CKB5,CKB6,CKB11;
definitions TARSKI,RELAT_2,ORDERS_2,ORDERS_1,FUNCOP_1,CKB5,CKB6,CKB11;
theorems WELLORD1,ORDERS_1,SUBSET_1,TARSKI,RELAT_1,RELAT_2,RELSET_1,ZFMISC_1,EQREL_1,WAYBEL_0,ORDERS_2,NAT_1,FUNCT_1,FUNCT_2,CARD_2,CARD_1,NORMSP_1,SEQM_3,FINSET_1,AXIOMS,YELLOW_3,WAYBEL_1,WAYBEL20,YELLOW_1,CARD_3,FUNCOP_1,WAYBEL_3,MCART_1,FUNCT_4,WELLFND1,WAYBEL_4,PRALG_1,YELLOW_6,AFINSQ_1,XBOOLE_0,XBOOLE_1,PARTFUN1,XXREAL_0,ORDINAL1,XXREAL_2,VALUED_0,CKB1,CKB2,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11;
schemes PRE_CIRC,RECDEF_1,NAT_1,FUNCT_2,DOMAIN_1,FRAENKEL,FINSEQ_1,FUNCT_1,RELSET_1,CKB3;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCOP_1,FINSET_1,XXREAL_0,NAT_1,MEMBERED,EQREL_1,CARD_5,PRE_CIRC,STRUCT_0,ORDERS_2,YELLOW_1,YELLOW_3,WAYBEL18,WAYBEL_3,VALUED_0,CARD_1,XXREAL_2,CARD_3,ZFMISC_1,RELSET_1;
constructors WELLORD1,DOMAIN_1,NAT_1,BINOP_2,BHSP_3,PRALG_1,ORDERS_3,WAYBEL_1,YELLOW_3,WAYBEL_3,WAYBEL_4,WELLFND1,SEQ_1,RECDEF_1,SEQ_4,XXREAL_2,RELSET_1,PBOOLE,YELLOW_6,CKB5,CKB6,CKB11;
requirements BOOLE,SUBSET,NUMERALS;
begin
definition
let R being RelStr;
assume that
A1: R is  quasi_ordered;
func EqRel R -> (Equivalence_Relation of (the carrier of R)) equals 
:Def4: ( (the InternalRel of R) /\ ( (the InternalRel of R) ~ ) );
coherence
proof
set IR = (the InternalRel of R);
set CR = (the carrier of R);
R is  reflexive by A1,CKB11:def 1;
then A2: IR is_reflexive_in CR by ORDERS_2:def 2;
R is  transitive by A1,CKB11:def 1;
then A3: IR is_transitive_in CR by ORDERS_2:def 3;
then A4: IR quasi_orders CR by A2,ORDERS_1:def 6;
A5: ( IR /\ ( IR ~ ) ) is_reflexive_in CR
proof
let x being set;
assume x in CR;
then A6: [ x,x ] in IR by A2,RELAT_2:def 1;
then [ x,x ] in ( IR ~ ) by RELAT_1:def 7;
hence thesis by A6,XBOOLE_0:def 4;
end;
then A7: ( dom ( IR /\ ( IR ~ ) ) ) = CR by ORDERS_1:13;
A8: ( field ( IR /\ ( IR ~ ) ) ) = CR by A5,ORDERS_1:13;
A9: ( IR /\ ( IR ~ ) ) is_symmetric_in CR
proof
let x being set;
let y being set;
assume that
x in CR
and
y in CR
and
A10: [ x,y ] in ( IR /\ ( IR ~ ) );
A11: [ x,y ] in IR by A10,XBOOLE_0:def 4;
A12: [ x,y ] in ( IR ~ ) by A10,XBOOLE_0:def 4;
A13: [ y,x ] in ( IR ~ ) by A11,RELAT_1:def 7;
[ y,x ] in IR by A12,RELAT_1:def 7;
hence thesis by A13,XBOOLE_0:def 4;
end;
( IR /\ ( IR ~ ) ) is_transitive_in CR
proof
let x being set;
let y being set;
let z being set;
assume that
A14: x in CR
and
A15: y in CR
and
A16: z in CR
and
A17: [ x,y ] in ( IR /\ ( IR ~ ) )
and
A18: [ y,z ] in ( IR /\ ( IR ~ ) );
A19: [ x,y ] in IR by A17,XBOOLE_0:def 4;
A20: [ x,y ] in ( IR ~ ) by A17,XBOOLE_0:def 4;
A21: [ y,z ] in IR by A18,XBOOLE_0:def 4;
A22: [ y,z ] in ( IR ~ ) by A18,XBOOLE_0:def 4;
A23: [ x,z ] in IR by A3,A14,A15,A16,A19,A21,RELAT_2:def 8;
( IR ~ ) quasi_orders CR by A4,ORDERS_1:40;
then ( IR ~ ) is_transitive_in CR by ORDERS_1:def 6;
then [ x,z ] in ( IR ~ ) by A14,A15,A16,A20,A22,RELAT_2:def 8;
hence thesis by A23,XBOOLE_0:def 4;
end;
hence thesis by A7,A8,A9,PARTFUN1:def 2,RELAT_2:def 11,RELAT_2:def 16;
end;
end;
