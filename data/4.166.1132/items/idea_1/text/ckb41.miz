environ
vocabularies NUMBERS,SUBSET_1,FINSEQ_2,MARGREL1,CARD_1,ARYTM_3,INT_2,NAT_1,RELAT_1,XXREAL_0,INT_1,ARYTM_1,GRCAT_1,XBOOLEAN,FINSEQ_1,PARTFUN1,FUNCT_1,POWER,BINARI_3,FUNCOP_1,XBOOLE_0,BINARITH,MATRIX_1,INCSP_1,ORDINAL4,FUNCT_7,FUNCT_2,TARSKI,TREES_1,IDEA_1;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,INT_1,INT_2,NAT_1,NAT_D,MARGREL1,RELAT_1,FUNCT_1,FUNCOP_1,MATRIX_1,PARTFUN1,FUNCT_2,FUNCT_7,SERIES_1,FINSEQ_1,FINSEQ_2,RECDEF_1,BINARITH,BINARI_3,XXREAL_0,CKB8,CKB9,CKB12,CKB15,CKB17,CKB18,CKB19,CKB26,CKB29,CKB32,CKB33,CKB39,CKB40;
definitions TARSKI,FINSEQ_2,XBOOLEAN,CKB8,CKB9,CKB15,CKB17,CKB18,CKB19,CKB26,CKB29,CKB32,CKB33,CKB39,CKB40;
theorems NAT_1,NAT_2,NEWTON,INT_1,INT_2,FINSEQ_1,FINSEQ_2,FUNCT_1,FUNCT_2,FUNCT_7,FUNCOP_1,POWER,EULER_1,EULER_2,BINARITH,BINARI_3,MATRIX_1,RELSET_1,RELAT_1,XBOOLE_1,XREAL_1,XXREAL_0,XBOOLEAN,NAT_D,PARTFUN1,ORDINAL1,XREAL_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40;
schemes FINSEQ_1,FINSEQ_2,NAT_1,FUNCT_2;
registrations XBOOLE_0,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,INT_1,FINSEQ_1,MARGREL1,FUNCT_7,VALUED_0,CARD_1,FINSEQ_2,RELSET_1;
constructors PARTFUN1,XXREAL_0,NAT_1,NAT_D,SERIES_1,BINARITH,WSIERP_1,FUNCT_7,MATRIX_1,BINARI_3,RECDEF_1,RELSET_1,CKB8,CKB9,CKB12,CKB15,CKB17,CKB18,CKB19,CKB26,CKB29,CKB32,CKB33,CKB39,CKB40;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve i for (Element of ( NAT ));
definition
let m being (FinSequence of ( NAT ));
func IDEAoperationC m -> (FinSequence of ( NAT ))
means
:Def13: (( len it ) = ( len m ) & (for i being (Element of ( NAT )) holds (i in ( dom m ) implies ( it . i ) = ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ))));
existence
proof
defpred P[ set,set ]
 means
((($1 = 2 implies $2 = ( m . 3 )) & ($1 = 3 implies $2 = ( m . 2 ))) & (($1 <> 2 & $1 <> 3) implies $2 = ( m . $1 )));
A1: (for k being Nat holds (k in ( Seg ( len m ) ) implies (ex x being (Element of ( NAT )) st P[ k,x ])))
proof
let k being Nat;
assume k in ( Seg ( len m ) );
then reconsider k as (Element of ( NAT ));
per cases ;
suppose A2: k = 2;

take ( m . 3 );
thus thesis by A2;
end;
suppose A3: k = 3;

take ( m . 2 );
thus thesis by A3;
end;
suppose A4: (k <> 2 & k <> 3);

take ( m . k );
thus thesis by A4;
end;
end;
consider z being (FinSequence of ( NAT )) such that A5: ( dom z ) = ( Seg ( len m ) ) and A6: (for i being Nat holds (i in ( Seg ( len m ) ) implies P[ i,( z . i ) ])) from FINSEQ_1:sch 5(A1);
A7: (for i holds (i in ( Seg ( len m ) ) implies ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( z . i )))
proof
let i being (Element of ( NAT ));
assume A8: i in ( Seg ( len m ) );
A9: (i = 3 implies ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( m . 2 ))
proof
assume A10: i = 3;
then ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( IFEQ (i,3,( m . 2 ),( m . i )) ) by FUNCOP_1:def 8
.= ( m . 2 ) by A10,FUNCOP_1:def 8;
hence thesis;
end;
A11: (i = 2 implies ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( m . 3 )) by FUNCOP_1:def 8;
((i <> 2 & i <> 3) implies ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( m . i ))
proof
assume that
A12: i <> 2
and
A13: i <> 3;
( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( IFEQ (i,3,( m . 2 ),( m . i )) ) by A12,FUNCOP_1:def 8
.= ( m . i ) by A13,FUNCOP_1:def 8;
hence thesis;
end;
then ((i <> 2 & i <> 3) implies ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) ) = ( z . i )) by A6,A8;
hence thesis by A6,A8,A11,A9;
end;
take z;
( Seg ( len m ) ) = ( dom m ) by FINSEQ_1:def 3;
hence thesis by A5,A7,FINSEQ_1:def 3;
end;
uniqueness
proof
let z1 being (FinSequence of ( NAT )),z2 being (FinSequence of ( NAT ));
assume that
A14: ( len z1 ) = ( len m )
and
A15: (for i holds (i in ( dom m ) implies ( z1 . i ) = ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) )))
and
A16: ( len z2 ) = ( len m )
and
A17: (for i holds (i in ( dom m ) implies ( z2 . i ) = ( IFEQ (i,2,( m . 3 ),( IFEQ (i,3,( m . 2 ),( m . i )) )) )));
A18: ( dom m ) = ( Seg ( len z2 ) ) by A16,FINSEQ_1:def 3
.= ( dom z2 ) by FINSEQ_1:def 3;
A19:now
let j being Nat;
assume A20: j in ( dom m );
now
per cases ;
suppose j = 2;

then A21: ( IFEQ (j,2,( m . 3 ),( IFEQ (j,3,( m . 2 ),( m . j )) )) ) = ( m . 3 ) by FUNCOP_1:def 8;
then ( z2 . j ) = ( m . 3 ) by A17,A20;
hence ( z1 . j ) = ( z2 . j ) by A15,A20,A21;
end;
suppose A22: j = 3;

A23: (j = 3 implies ( IFEQ (j,2,( m . 3 ),( IFEQ (j,3,( m . 2 ),( m . j )) )) ) = ( m . 2 ))
proof
assume A24: j = 3;
then ( IFEQ (j,2,( m . 3 ),( IFEQ (j,3,( m . 2 ),( m . j )) )) ) = ( IFEQ (j,3,( m . 2 ),( m . j )) ) by FUNCOP_1:def 8
.= ( m . 2 ) by A24,FUNCOP_1:def 8;
hence thesis;
end;
then ( z2 . j ) = ( m . 2 ) by A17,A20,A22;
hence ( z1 . j ) = ( z2 . j ) by A15,A20,A22,A23;
end;
suppose A25: (j <> 2 & j <> 3);

A26: ((j <> 2 & j <> 3) implies ( IFEQ (j,2,( m . 3 ),( IFEQ (j,3,( m . 2 ),( m . j )) )) ) = ( m . j ))
proof
assume that
A27: j <> 2
and
A28: j <> 3;
( IFEQ (j,2,( m . 3 ),( IFEQ (j,3,( m . 2 ),( m . j )) )) ) = ( IFEQ (j,3,( m . 2 ),( m . j )) ) by A27,FUNCOP_1:def 8
.= ( m . j ) by A28,FUNCOP_1:def 8;
hence thesis;
end;
then ( z2 . j ) = ( m . j ) by A17,A20,A25;
hence ( z1 . j ) = ( z2 . j ) by A15,A20,A25,A26;
end;
end;
hence ( z1 . j ) = ( z2 . j );
end;
( dom m ) = ( Seg ( len z1 ) ) by A14,FINSEQ_1:def 3
.= ( dom z1 ) by FINSEQ_1:def 3;
hence thesis by A18,A19,FINSEQ_1:13;
end;
end;
