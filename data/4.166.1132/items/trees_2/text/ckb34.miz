environ
vocabularies NUMBERS,TREES_1,SUBSET_1,FUNCT_1,XBOOLE_0,FINSEQ_1,ORDINAL4,XXREAL_0,ARYTM_3,RELAT_1,TARSKI,CARD_1,NAT_1,ORDINAL1,FINSET_1,REAL_1,ARYTM_1,ZFMISC_1,FUNCOP_1,TREES_2,AMISTD_3,FINSEQ_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,RELAT_1,XCMPLX_0,FUNCT_1,PARTFUN1,REAL_1,NAT_1,CARD_1,NUMBERS,FINSEQ_1,FINSEQ_2,FINSET_1,RELSET_1,BINOP_1,FUNCT_2,FUNCOP_1,TREES_1,XXREAL_0,CKB7,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33;
definitions RELAT_1,TARSKI,FUNCT_1,TREES_1,ORDINAL1,XBOOLE_0,BINOP_1,CKB7,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33;
theorems FUNCT_1,NAT_1,FINSEQ_1,TREES_1,TARSKI,ORDERS_1,ZFMISC_1,FINSET_1,CARD_1,CARD_2,WELLORD2,FUNCOP_1,FUNCT_2,RELAT_1,FINSEQ_2,ORDINAL1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,RELSET_1,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB30,CKB31,CKB33;
schemes FUNCT_1,FRAENKEL,NAT_1,CARD_2,CLASSES1,DOMAIN_1,XBOOLE_0,CKB5,CKB25,CKB26;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,TREES_1,CARD_1,RELSET_1,FINSEQ_2,DOMAIN_1,PARTFUN1,CKB12,CKB29,CKB32;
constructors WELLORD2,BINOP_1,FUNCOP_1,XXREAL_0,REAL_1,NAT_1,TREES_1,RELSET_1,FINSEQ_2,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve X for set;
reserve X1 for set;
reserve X2 for set;
reserve Y for set;
reserve Z for set;
reserve W for Tree;
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
reserve r for (FinSequence of ( NAT ));
registration
let W;
cluster  Branch-like for (Chain of W);
existence
proof
defpred X[ set ]
 means
($1 is (Chain of W) & (for p holds (p in $1 implies ( ProperPrefixes p ) c= $1)));
consider X such that A1: (Y in X iff (Y in ( bool W ) & X[ Y ])) from XBOOLE_0:sch 1;
(( {} ) is (Chain of W) & (for p holds (p in ( {} ) implies ( ProperPrefixes p ) c= ( {} )))) by CKB30:1;
then A2: X <> ( {} ) by A1;
now
let Z;
assume that
Z <> ( {} )
and
A3: Z c= X
and
A4: Z is  c=-linear;
( union Z ) c= W
proof
let x;
assume x in ( union Z );
then consider Y such that A5: x in Y and A6: Y in Z by TARSKI:def 4;
Y in ( bool W ) by A1,A3,A6;
hence thesis by A5;
end;
then reconsider Z9 = ( union Z ) as (Subset of W);
A7: Z9 is (Chain of W)
proof
let p;
let q;
assume p in Z9;
then consider X1 such that A8: p in X1 and A9: X1 in Z by TARSKI:def 4;
assume q in Z9;
then consider X2 such that A10: q in X2 and A11: X2 in Z by TARSKI:def 4;
X1,X2 are_c=-comparable  by A4,A9,A11,ORDINAL1:def 8;
then A12: (X1 c= X2 or X2 c= X1) by XBOOLE_0:def 9;
A13: X1 is (Chain of W) by A1,A3,A9;
X2 is (Chain of W) by A1,A3,A11;
hence thesis by A8,A10,A12,A13,CKB13:def 1;
end;
now
let p;
assume p in ( union Z );
then consider X1 such that A14: (p in X1 & X1 in Z) by TARSKI:def 4;
(( ProperPrefixes p ) c= X1 & X1 c= ( union Z )) by A1,A3,A14,ZFMISC_1:74;
hence ( ProperPrefixes p ) c= ( union Z ) by XBOOLE_1:1;
end;
hence ( union Z ) in X by A1,A7;
end;
then consider Y such that A15: Y in X and A16: ((Z in X & Z <> Y) implies (not Y c= Z)) by A2,ORDERS_1:67;
reconsider Y as (Chain of W) by A1,A15;
take Y;
thus (for p holds (p in Y implies ( ProperPrefixes p ) c= Y)) by A1,A15;
given p such that
A17: p in W
and
A18: (for q holds (q in Y implies q is_a_proper_prefix_of p));

set Z = ( ( ProperPrefixes p ) \/ { p } );
(( ProperPrefixes p ) c= W & { p } c= W) by A17,TREES_1:def 3,ZFMISC_1:31;
then reconsider Z9 = Z as (Subset of W) by XBOOLE_1:8;
A19: Z9 is (Chain of W)
proof
let q;
let r;
assume that
A20: q in Z9
and
A21: r in Z9;
A22: (q in ( ProperPrefixes p ) or q in { p }) by A20,XBOOLE_0:def 3;
A23: (r in ( ProperPrefixes p ) or r in { p }) by A21,XBOOLE_0:def 3;
A24: (q is_a_proper_prefix_of p or q = p) by A22,TARSKI:def 1,TREES_1:12;
A25: (r is_a_proper_prefix_of p or r = p) by A23,TARSKI:def 1,TREES_1:12;
A26: q is_a_prefix_of p by A24,XBOOLE_0:def 8;
r is_a_prefix_of p by A25,XBOOLE_0:def 8;
hence thesis by A26,CKB1:1;
end;
now
let q;
assume q in Z;
then (q in ( ProperPrefixes p ) or q in { p }) by XBOOLE_0:def 3;
then (q is_a_proper_prefix_of p or q = p) by TARSKI:def 1,TREES_1:12;
then q is_a_prefix_of p by XBOOLE_0:def 8;
then A27: ( ProperPrefixes q ) c= ( ProperPrefixes p ) by TREES_1:17;
( ProperPrefixes p ) c= Z by XBOOLE_1:7;
hence ( ProperPrefixes q ) c= Z by A27,XBOOLE_1:1;
end;
then A28: Z in X by A1,A19;
A29: p in { p } by TARSKI:def 1;
A30: (not p in Y) by A18;
A31: p in Z by A29,XBOOLE_0:def 3;
Y c= Z
proof
let x;
assume A32: x in Y;
then reconsider t = x as (Element of W);
t is_a_proper_prefix_of p by A18,A32;
then t in ( ProperPrefixes p ) by TREES_1:12;
hence thesis by XBOOLE_0:def 3;
end;
hence thesis by A16,A28,A30,A31;
end;
end;
