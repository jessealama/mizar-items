environ
vocabularies NUMBERS,TREES_1,SUBSET_1,FUNCT_1,XBOOLE_0,FINSEQ_1,ORDINAL4,XXREAL_0,ARYTM_3,RELAT_1,TARSKI,CARD_1,NAT_1,ORDINAL1,FINSET_1,REAL_1,ARYTM_1,ZFMISC_1,FUNCOP_1,TREES_2,AMISTD_3,FINSEQ_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,RELAT_1,XCMPLX_0,FUNCT_1,PARTFUN1,REAL_1,NAT_1,CARD_1,NUMBERS,FINSEQ_1,FINSEQ_2,FINSET_1,RELSET_1,BINOP_1,FUNCT_2,FUNCOP_1,TREES_1,XXREAL_0,CKB7,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33,CKB35;
definitions RELAT_1,TARSKI,FUNCT_1,TREES_1,ORDINAL1,XBOOLE_0,BINOP_1,CKB7,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33;
theorems FUNCT_1,NAT_1,FINSEQ_1,TREES_1,TARSKI,ORDERS_1,ZFMISC_1,FINSET_1,CARD_1,CARD_2,WELLORD2,FUNCOP_1,FUNCT_2,RELAT_1,FINSEQ_2,ORDINAL1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,RELSET_1,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB30,CKB31,CKB33,CKB37,CKB38,CKB40,CKB41,CKB42,CKB43,CKB44;
schemes FUNCT_1,FRAENKEL,NAT_1,CARD_2,CLASSES1,DOMAIN_1,XBOOLE_0,CKB5,CKB25,CKB26;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,TREES_1,CARD_1,RELSET_1,FINSEQ_2,DOMAIN_1,PARTFUN1,CKB12,CKB29,CKB32,CKB34,CKB36,CKB39;
constructors WELLORD2,BINOP_1,FUNCOP_1,XXREAL_0,REAL_1,NAT_1,TREES_1,RELSET_1,FINSEQ_2,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve X for set;
reserve X1 for set;
reserve X2 for set;
reserve Y for set;
reserve Z for set;
reserve W for Tree;
reserve w for (Element of W);
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
reserve r for (FinSequence of ( NAT ));
reserve C for (Chain of W);
reserve B for (Branch of W);
theorem
Th30: (ex B st C c= B)
proof
defpred X[ set ]
 means
(($1 is (Chain of W) & C c= $1) & (for p holds (p in $1 implies ( ProperPrefixes p ) c= $1)));
consider X such that A1: (Y in X iff (Y in ( bool W ) & X[ Y ])) from XBOOLE_0:sch 1;
set Z = { w: (ex p st (p in C & w is_a_prefix_of p)) };
A2: Z is (Chain of W) by CKB41:1;
A3: C c= Z
proof
let x;
assume A4: x in C;
then reconsider w = x as (Element of W);
w is_a_prefix_of w;
hence thesis by A4;
end;
now
let p;
assume p in Z;
then A5: (ex w st (p = w & (ex p st (p in C & w is_a_prefix_of p))));
then consider q such that A6: q in C and A7: p is_a_prefix_of q;
thus ( ProperPrefixes p ) c= Z
proof
let x;
assume x in ( ProperPrefixes p );
then consider r being FinSequence such that A8: x = r and A9: r is_a_proper_prefix_of p by TREES_1:def 2;
r is_a_prefix_of p by A9,XBOOLE_0:def 8;
then (r is_a_prefix_of q & r in W) by A5,A7,TREES_1:20,XBOOLE_1:1;
hence thesis by A6,A8;
end;

end;
then A10: X <> ( {} ) by A1,A2,A3;
now
let Z;
assume that
A11: Z <> ( {} )
and
A12: Z c= X
and
A13: Z is  c=-linear;
( union Z ) c= W
proof
let x;
assume x in ( union Z );
then consider Y such that A14: x in Y and A15: Y in Z by TARSKI:def 4;
Y in ( bool W ) by A1,A12,A15;
hence thesis by A14;
end;
then reconsider Z9 = ( union Z ) as (Subset of W);
A16: Z9 is (Chain of W)
proof
let p;
let q;
assume p in Z9;
then consider X1 such that A17: p in X1 and A18: X1 in Z by TARSKI:def 4;
assume q in Z9;
then consider X2 such that A19: q in X2 and A20: X2 in Z by TARSKI:def 4;
X1,X2 are_c=-comparable  by A13,A18,A20,ORDINAL1:def 8;
then A21: (X1 c= X2 or X2 c= X1) by XBOOLE_0:def 9;
A22: X1 is (Chain of W) by A1,A12,A18;
X2 is (Chain of W) by A1,A12,A20;
hence thesis by A17,A19,A21,A22,CKB13:def 1;
end;
A23:now
let p;
assume p in ( union Z );
then consider X1 such that A24: (p in X1 & X1 in Z) by TARSKI:def 4;
(( ProperPrefixes p ) c= X1 & X1 c= ( union Z )) by A1,A12,A24,ZFMISC_1:74;
hence ( ProperPrefixes p ) c= ( union Z ) by XBOOLE_1:1;
end;
set x = the (Element of Z);
x in X by A11,A12,TARSKI:def 3;
then A25: C c= x by A1;
x c= ( union Z ) by A11,ZFMISC_1:74;
then C c= ( union Z ) by A25,XBOOLE_1:1;
hence ( union Z ) in X by A1,A16,A23;
end;
then consider Y such that A26: Y in X and A27: (for Z holds ((Z in X & Z <> Y) implies (not Y c= Z))) by A10,ORDERS_1:67;
reconsider Y as (Chain of W) by A1,A26;
now
thus (for p holds (p in Y implies ( ProperPrefixes p ) c= Y)) by A1,A26;
given p such that
A28: p in W
and
A29: (for q holds (q in Y implies q is_a_proper_prefix_of p));

set Z = ( ( ProperPrefixes p ) \/ { p } );
(( ProperPrefixes p ) c= W & { p } c= W) by A28,TREES_1:def 3,ZFMISC_1:31;
then reconsider Z9 = Z as (Subset of W) by XBOOLE_1:8;
A30: Z9 is (Chain of W)
proof
let q;
let r;
assume that
A31: q in Z9
and
A32: r in Z9;
A33: (q in ( ProperPrefixes p ) or q in { p }) by A31,XBOOLE_0:def 3;
A34: (r in ( ProperPrefixes p ) or r in { p }) by A32,XBOOLE_0:def 3;
A35: (q is_a_proper_prefix_of p or q = p) by A33,TARSKI:def 1,TREES_1:12;
A36: (r is_a_proper_prefix_of p or r = p) by A34,TARSKI:def 1,TREES_1:12;
A37: q is_a_prefix_of p by A35,XBOOLE_0:def 8;
r is_a_prefix_of p by A36,XBOOLE_0:def 8;
hence thesis by A37,CKB1:1;
end;
A38:now
let q;
assume q in Z;
then (q in ( ProperPrefixes p ) or q in { p }) by XBOOLE_0:def 3;
then (q is_a_proper_prefix_of p or q = p) by TARSKI:def 1,TREES_1:12;
then q is_a_prefix_of p by XBOOLE_0:def 8;
then A39: ( ProperPrefixes q ) c= ( ProperPrefixes p ) by TREES_1:17;
( ProperPrefixes p ) c= Z by XBOOLE_1:7;
hence ( ProperPrefixes q ) c= Z by A39,XBOOLE_1:1;
end;
A40: Y c= Z
proof
let x;
assume A41: x in Y;
then reconsider t = x as (Element of W);
t is_a_proper_prefix_of p by A29,A41;
then t in ( ProperPrefixes p ) by TREES_1:12;
hence thesis by XBOOLE_0:def 3;
end;
C c= Y by A1,A26;
then C c= Z by A40,XBOOLE_1:1;
then A42: Z in X by A1,A30,A38;
A43: p in { p } by TARSKI:def 1;
A44: (not p in Y) by A29;
p in Z by A43,XBOOLE_0:def 3;
hence contradiction by A27,A40,A42,A44;
end;
then reconsider Y as (Branch of W) by CKB33:def 1;
take Y;
thus thesis by A1,A26;
end;
