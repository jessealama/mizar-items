environ
vocabularies NUMBERS,TREES_1,SUBSET_1,FUNCT_1,XBOOLE_0,FINSEQ_1,ORDINAL4,XXREAL_0,ARYTM_3,RELAT_1,TARSKI,CARD_1,NAT_1,ORDINAL1,FINSET_1,REAL_1,ARYTM_1,ZFMISC_1,FUNCOP_1,TREES_2,AMISTD_3,FINSEQ_2,PARTFUN1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,RELAT_1,XCMPLX_0,FUNCT_1,PARTFUN1,REAL_1,NAT_1,CARD_1,NUMBERS,FINSEQ_1,FINSEQ_2,FINSET_1,RELSET_1,BINOP_1,FUNCT_2,FUNCOP_1,TREES_1,XXREAL_0,CKB7,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33,CKB35,CKB51,CKB53,CKB56,CKB57,CKB61,CKB62,CKB64,CKB66;
definitions RELAT_1,TARSKI,FUNCT_1,TREES_1,ORDINAL1,XBOOLE_0,BINOP_1,CKB7,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33,CKB51,CKB61,CKB62,CKB66;
theorems FUNCT_1,NAT_1,FINSEQ_1,TREES_1,TARSKI,ORDERS_1,ZFMISC_1,FINSET_1,CARD_1,CARD_2,WELLORD2,FUNCOP_1,FUNCT_2,RELAT_1,FINSEQ_2,ORDINAL1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,PARTFUN1,RELSET_1,CKB1,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB30,CKB31,CKB33,CKB37,CKB38,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB49,CKB50,CKB51,CKB58,CKB61,CKB62,CKB63,CKB66,CKB68,CKB69,CKB70,CKB71;
schemes FUNCT_1,FRAENKEL,NAT_1,CARD_2,CLASSES1,DOMAIN_1,XBOOLE_0,CKB5,CKB25,CKB26,CKB46,CKB48,CKB59,CKB60;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,TREES_1,CARD_1,RELSET_1,FINSEQ_2,DOMAIN_1,PARTFUN1,CKB12,CKB29,CKB32,CKB34,CKB36,CKB39,CKB52,CKB54,CKB55,CKB65,CKB67;
constructors WELLORD2,BINOP_1,FUNCOP_1,XXREAL_0,REAL_1,NAT_1,TREES_1,RELSET_1,FINSEQ_2,CKB11,CKB13,CKB14,CKB15,CKB19,CKB33,CKB51,CKB57,CKB61,CKB62,CKB64,CKB66;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve z for set;
reserve X for set;
reserve f for Function;
reserve D for non  empty set;
reserve i for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve k1 for (Element of ( NAT ));
reserve k2 for (Element of ( NAT ));
reserve l for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve p for (FinSequence of ( NAT ));
reserve q for (FinSequence of ( NAT ));
reserve T for DecoratedTree;
reserve T1 for DecoratedTree;
reserve T2 for DecoratedTree;
scheme DTreeStructEx { D() -> non  empty set,d() -> (Element of D()),F(set) -> set,S() -> (Function of [: D(),( NAT ) :],D()) } : (ex T being (DecoratedTree of D()) st (( T . ( {} ) ) = d() & (for t being (Element of ( dom T )) holds (( succ t ) = { ( t ^ <* k *> ): k in F(( T . t )) } & (for n holds (n in F(( T . t )) implies ( T . ( t ^ <* n *> ) ) = ( S() . (( T . t ),n) )))))))
provided
A1: (for d being (Element of D()) holds (for k1 holds (for k2 holds ((k1 <= k2 & k2 in F(d)) implies k1 in F(d)))))
proof
defpred P[ (Element of ( NAT )) ]
 means
(ex T being (DecoratedTree of D()) st (( T . ( {} ) ) = d() & (for t being (Element of ( dom T )) holds (( len t ) <= $1 & (( len t ) < $1 implies (( succ t ) = { ( t ^ <* k *> ): k in F(( T . t )) } & (for n holds (for x holds ((x = ( T . t ) & n in F(x)) implies ( T . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))));
A2: P[ ( 0 ) ]
proof
reconsider W = { ( {} ) } as Tree;
take T = ( W --> d() );
( {} ) in W by TREES_1:22;
hence ( T . ( {} ) ) = d() by FUNCOP_1:7;
let t being (Element of ( dom T ));
( dom T ) = W by FUNCOP_1:13;
then t = ( {} ) by TARSKI:def 1;
hence ( len t ) <= ( 0 );
assume ( len t ) < ( 0 );
hence thesis;
end;
A3: (P[ k ] implies P[ ( k + 1 ) ])
proof
given T being (DecoratedTree of D()) such that
A4: (( T . ( {} ) ) = d() & (for t being (Element of ( dom T )) holds (( len t ) <= k & (( len t ) < k implies (( succ t ) = { ( t ^ <* m *> ): m in F(( T . t )) } & (for n holds (for x holds ((x = ( T . t ) & n in F(x)) implies ( T . ( t ^ <* n *> ) ) = ( S() . (x,n) )))))))));

reconsider M = ( { ( t ^ <* n *> ) where t is (Element of ( dom T )): n in F(( T . t )) } \/ ( dom T ) ) as non  empty set;
M is  Tree-like
proof
thus M c= ( ( NAT ) * )
proof
let x;
assume x in M;
then A5: (x in { ( t ^ <* n *> ) where t is (Element of ( dom T )): n in F(( T . t )) } or (x in ( dom T ) & ( dom T ) c= ( ( NAT ) * ))) by TREES_1:def 3,XBOOLE_0:def 3;
assume A6: (not x in ( ( NAT ) * ));
then (ex n being (Element of ( NAT )) st (ex t being (Element of ( dom T )) st (x = ( t ^ <* n *> ) & n in F(( T . t ))))) by A5;
hence thesis by A6,FINSEQ_1:def 11;
end;

thus (for p holds (p in M implies ( ProperPrefixes p ) c= M))
proof
let p;
assume p in M;
then A7: (p in { ( t ^ <* n *> ) where t is (Element of ( dom T )): n in F(( T . t )) } or p in ( dom T )) by XBOOLE_0:def 3;
now
assume p in { ( t ^ <* n *> ) where t is (Element of ( dom T )): n in F(( T . t )) };
then consider n being (Element of ( NAT )),t being (Element of ( dom T )) such that A8: p = ( t ^ <* n *> ) and n in F(( T . t ));
A9: ( ProperPrefixes t ) c= ( dom T ) by TREES_1:def 3;
A10: ( dom T ) c= M by XBOOLE_1:7;
A11: t in ( dom T );
A12: ( ProperPrefixes t ) c= M by A9,A10,XBOOLE_1:1;
A13: { t } c= M by A10,A11,ZFMISC_1:31;
( ProperPrefixes p ) = ( ( ProperPrefixes t ) \/ { t } ) by A8,CKB4:1;
hence thesis by A12,A13,XBOOLE_1:8;
end;
then (( ProperPrefixes p ) c= M or (( ProperPrefixes p ) c= ( dom T ) & ( dom T ) c= M)) by A7,TREES_1:def 3,XBOOLE_1:7;
hence thesis by XBOOLE_1:1;
end;

let p;
let m;
let n;
assume ( p ^ <* m *> ) in M;
then A14: (( p ^ <* m *> ) in { ( t ^ <* l *> ) where t is (Element of ( dom T )): l in F(( T . t )) } or ( p ^ <* m *> ) in ( dom T )) by XBOOLE_0:def 3;
assume that
A15: n <= m
and
A16: (not ( p ^ <* n *> ) in M);
(not ( p ^ <* n *> ) in ( dom T )) by A16,XBOOLE_0:def 3;
then consider l being (Element of ( NAT )),t being (Element of ( dom T )) such that A17: ( p ^ <* m *> ) = ( t ^ <* l *> ) and A18: l in F(( T . t )) by A14,A15,TREES_1:def 3;
A19: (( len ( p ^ <* m *> ) ) = ( ( len p ) + ( len <* m *> ) ) & ( len <* m *> ) = 1) by FINSEQ_1:22,FINSEQ_1:40;
A20: (( len ( t ^ <* l *> ) ) = ( ( len t ) + ( len <* l *> ) ) & ( len <* l *> ) = 1) by FINSEQ_1:22,FINSEQ_1:40;
A21: (( ( p ^ <* m *> ) . ( ( len p ) + 1 ) ) = m & ( ( t ^ <* l *> ) . ( ( len t ) + 1 ) ) = l) by FINSEQ_1:42;
then A22: p = t by A17,A19,A20,FINSEQ_1:33;
n in F(( T . t )) by A1,A15,A17,A18,A19,A20,A21;
then ( p ^ <* n *> ) in { ( s ^ <* i *> ) where s is (Element of ( dom T )): i in F(( T . s )) } by A22;
hence thesis by A16,XBOOLE_0:def 3;
end;
then reconsider M as Tree;
defpred P[ FinSequence,set ]
 means
(($1 in ( dom T ) & $2 = ( T . $1 )) or ((not $1 in ( dom T )) & (ex n st (ex q st ($1 = ( q ^ <* n *> ) & $2 = ( S() . (( T . q ),n) ))))));
A23: (for p holds (p in M implies (ex x st P[ p,x ])))
proof
let p;
assume p in M;
then A24: (p in { ( t ^ <* l *> ) where t is (Element of ( dom T )): l in F(( T . t )) } or p in ( dom T )) by XBOOLE_0:def 3;
now
assume A25: (not p in ( dom T ));
then consider l being (Element of ( NAT )),t being (Element of ( dom T )) such that A26: p = ( t ^ <* l *> ) and l in F(( T . t )) by A24;
take x = ( S() . (( T . t ),l) );
thus ((p in ( dom T ) & x = ( T . p )) or ((not p in ( dom T )) & (ex n st (ex q st (p = ( q ^ <* n *> ) & x = ( S() . (( T . q ),n) )))))) by A25,A26;
end;
hence thesis;
end;
consider T9 being DecoratedTree such that A27: (( dom T9 ) = M & (for p holds (p in M implies P[ p,( T9 . p ) ]))) from CKB59:sch 1(A23);
( rng T9 ) c= D()
proof
let x;
assume x in ( rng T9 );
then consider y such that A28: y in ( dom T9 ) and A29: x = ( T9 . y ) by FUNCT_1:def 3;
reconsider y as (Element of ( dom T9 )) by A28;
A30:now
assume y in ( dom T );
then reconsider t = y as (Element of ( dom T ));
( T . t ) in D();
hence thesis by A27,A29;
end;
now
assume A31: (not y in ( dom T ));
then consider n,q such that A32: y = ( q ^ <* n *> ) and A33: ( T9 . y ) = ( S() . (( T . q ),n) ) by A27;
y in { ( t ^ <* l *> ) where t is (Element of ( dom T )): l in F(( T . t )) } by A27,A31,XBOOLE_0:def 3;
then consider l being (Element of ( NAT )),t being (Element of ( dom T )) such that A34: y = ( t ^ <* l *> ) and l in F(( T . t ));
A35: ( len <* n *> ) = 1 by FINSEQ_1:39;
A36: ( len <* l *> ) = 1 by FINSEQ_1:39;
A37: ( len ( q ^ <* n *> ) ) = ( ( len q ) + 1 ) by A35,FINSEQ_1:22;
A38: ( len ( t ^ <* l *> ) ) = ( ( len t ) + 1 ) by A36,FINSEQ_1:22;
(( ( q ^ <* n *> ) . ( ( len q ) + 1 ) ) = n & ( ( t ^ <* l *> ) . ( ( len t ) + 1 ) ) = l) by FINSEQ_1:42;
then A39: q = t by A32,A34,A37,A38,FINSEQ_1:33;
( T . t ) in D();
then [ ( T . q ),n ] in [: D(),( NAT ) :] by A39,ZFMISC_1:87;
hence thesis by A29,A33,FUNCT_2:5;
end;
hence thesis by A30;
end;
then reconsider T9 as (DecoratedTree of D()) by RELAT_1:def 19;
take T9;
(( <*> ( NAT ) ) in M & ( <*> ( NAT ) ) in ( dom T )) by TREES_1:22;
hence ( T9 . ( {} ) ) = d() by A4,A27;
let t being (Element of ( dom T9 ));
A40:now
assume t in { ( s ^ <* l *> ) where s is (Element of ( dom T )): l in F(( T . s )) };
then consider l being (Element of ( NAT )),s being (Element of ( dom T )) such that A41: t = ( s ^ <* l *> ) and l in F(( T . s ));
( len s ) <= k by A4;
then (( len <* l *> ) = 1 & ( ( len s ) + 1 ) <= ( k + 1 )) by FINSEQ_1:39,XREAL_1:7;
hence ( len t ) <= ( k + 1 ) by A41,FINSEQ_1:22;
end;
now
assume t in ( dom T );
then reconsider s = t as (Element of ( dom T ));
(( len s ) <= k & k <= ( k + 1 )) by A4,NAT_1:11;
hence ( len t ) <= ( k + 1 ) by XXREAL_0:2;
end;
hence ( len t ) <= ( k + 1 ) by A27,A40,XBOOLE_0:def 3;
assume A42: ( len t ) < ( k + 1 );
A43:now
assume A44: (not t in ( dom T ));
then t in { ( s ^ <* l *> ) where s is (Element of ( dom T )): l in F(( T . s )) } by A27,XBOOLE_0:def 3;
then consider l being (Element of ( NAT )),s being (Element of ( dom T )) such that A45: t = ( s ^ <* l *> ) and A46: l in F(( T . s ));
A47: ( len t ) = ( ( len s ) + ( len <* l *> ) ) by A45,FINSEQ_1:22;
(( len <* l *> ) = 1 & ( len t ) <= k) by A42,FINSEQ_1:39,NAT_1:13;
then ( len s ) < k by A47,NAT_1:13;
then ( succ s ) = { ( s ^ <* m *> ): m in F(( T . s )) } by A4;
then t in ( succ s ) by A45,A46;
hence contradiction by A44;
end;
then A48: ( T9 . t ) = ( T . t ) by A27;
reconsider t9 = t as (Element of ( dom T )) by A43;
thus ( succ t ) c= { ( t ^ <* i *> ): i in F(( T9 . t )) }
proof
let x;
assume x in ( succ t );
then consider n such that A49: x = ( t ^ <* n *> ) and A50: ( t ^ <* n *> ) in ( dom T9 );
now
per cases ;
suppose A51: ( t ^ <* n *> ) in ( dom T );

then reconsider s = ( t ^ <* n *> ),t9 = t as (Element of ( dom T )) by TREES_1:21;
(( len s ) <= k & ( len s ) = ( ( len t ) + 1 )) by A4,FINSEQ_2:16;
then ( len t ) < k by NAT_1:13;
then ( succ t9 ) = { ( t9 ^ <* m *> ): m in F(( T . t9 )) } by A4;
hence thesis by A48,A49,A51;
end;
suppose (not ( t ^ <* n *> ) in ( dom T ));

then ( t ^ <* n *> ) in { ( s ^ <* l *> ) where s is (Element of ( dom T )): l in F(( T . s )) } by A27,A50,XBOOLE_0:def 3;
then consider l being (Element of ( NAT )),s being (Element of ( dom T )) such that A52: ( t ^ <* n *> ) = ( s ^ <* l *> ) and A53: l in F(( T . s ));
t = s by A52,FINSEQ_2:17;
hence thesis by A48,A49,A52,A53;
end;
end;
hence thesis;
end;

thus A54: { ( t ^ <* i *> ): i in F(( T9 . t )) } c= ( succ t )
proof
let x;
assume x in { ( t ^ <* i *> ): i in F(( T9 . t )) };
then consider n such that A55: x = ( t ^ <* n *> ) and A56: n in F(( T9 . t ));
x = ( t9 ^ <* n *> ) by A55;
then x in { ( s ^ <* l *> ) where s is (Element of ( dom T )): l in F(( T . s )) } by A48,A56;
then x in ( dom T9 ) by A27,XBOOLE_0:def 3;
hence thesis by A55;
end;

let n;
let x;
assume that
A57: x = ( T9 . t )
and
A58: n in F(x);
( t ^ <* n *> ) in { ( t ^ <* i *> ): i in F(( T9 . t )) } by A57,A58;
then A59: ( t ^ <* n *> ) in ( succ t ) by A54;
now
per cases ;
suppose A60: ( t ^ <* n *> ) in ( dom T );

then reconsider s = ( t ^ <* n *> ) as (Element of ( dom T ));
(( len s ) <= k & ( len s ) = ( ( len t ) + 1 )) by A4,FINSEQ_2:16;
then ( len t9 ) < k by NAT_1:13;
then ( T . ( t9 ^ <* n *> ) ) = ( S() . (x,n) ) by A4,A48,A57,A58;
hence thesis by A27,A59,A60;
end;
suppose (not ( t ^ <* n *> ) in ( dom T ));

then consider l,q such that A61: ( t ^ <* n *> ) = ( q ^ <* l *> ) and A62: ( T9 . ( t ^ <* n *> ) ) = ( S() . (( T . q ),l) ) by A27,A59;
(t = q & n = l) by A61,FINSEQ_2:17;
hence thesis by A27,A43,A57,A62;
end;
end;
hence thesis;
end;
A63: P[ k ] from NAT_1:sch 1(A2,A3);
defpred P[ set,set ]
 means
(ex T being (DecoratedTree of D()) st (ex k st ((($1 = k & $2 = T) & ( T . ( {} ) ) = d()) & (for t being (Element of ( dom T )) holds (( len t ) <= k & (( len t ) < k implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T . t )) } & (for n holds (for x holds ((x = ( T . t ) & n in F(x)) implies ( T . ( t ^ <* n *> ) ) = ( S() . (x,n) )))))))))));
A64: (for x holds (x in ( NAT ) implies (ex y st P[ x,y ])))
proof
let x;
assume x in ( NAT );
then reconsider n = x as (Element of ( NAT ));
consider T being (DecoratedTree of D()) such that A65: (( T . ( {} ) ) = d() & (for t being (Element of ( dom T )) holds (( len t ) <= n & (( len t ) < n implies (( succ t ) = { ( t ^ <* k *> ): k in F(( T . t )) } & (for n holds (for x holds ((x = ( T . t ) & n in F(x)) implies ( T . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A63;
reconsider y = T as set;
take y;
take T;
take n;
thus thesis by A65;
end;
consider f such that A66: (( dom f ) = ( NAT ) & (for x holds (x in ( NAT ) implies P[ x,( f . x ) ]))) from CLASSES1:sch 1(A64);
reconsider E = ( rng f ) as non  empty set by A66,RELAT_1:42;
A67: (for x holds (x in E implies x is (DecoratedTree of D())))
proof
let x;
assume x in E;
then consider y such that A68: y in ( dom f ) and A69: x = ( f . y ) by FUNCT_1:def 3;
(ex T being (DecoratedTree of D()) st (ex k st (((y = k & ( f . y ) = T) & ( T . ( {} ) ) = d()) & (for t being (Element of ( dom T )) holds (( len t ) <= k & (( len t ) < k implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T . t )) } & (for n holds (for x holds ((x = ( T . t ) & n in F(x)) implies ( T . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))))) by A66,A68;
hence thesis by A69;
end;
A70: (for T1 holds (for T2 holds (for k1 holds (for k2 holds (((T1 = ( f . k1 ) & T2 = ( f . k2 )) & k1 <= k2) implies T1 c= T2)))))
proof
let T1;
let T2;
let x being (Element of ( NAT ));
let y being (Element of ( NAT ));
assume that
A71: T1 = ( f . x )
and
A72: T2 = ( f . y )
and
A73: x <= y;
consider T19 being (DecoratedTree of D()),k1 such that A74: (((x = k1 & ( f . x ) = T19) & ( T19 . ( {} ) ) = d()) & (for t being (Element of ( dom T19 )) holds (( len t ) <= k1 & (( len t ) < k1 implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T19 . t )) } & (for n holds (for x holds ((x = ( T19 . t ) & n in F(x)) implies ( T19 . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A66;
consider T29 being (DecoratedTree of D()),k2 such that A75: (((y = k2 & ( f . y ) = T29) & ( T29 . ( {} ) ) = d()) & (for t being (Element of ( dom T29 )) holds (( len t ) <= k2 & (( len t ) < k2 implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T29 . t )) } & (for n holds (for x holds ((x = ( T29 . t ) & n in F(x)) implies ( T29 . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A66;
defpred I[ (Element of ( NAT )) ]
 means
(for t being (Element of ( dom T1 )) holds (( len t ) <= $1 implies (t in ( dom T2 ) & ( T1 . t ) = ( T2 . t ))));
A76: I[ ( 0 ) ]
proof
let t being (Element of ( dom T1 ));
assume that
A77: ( len t ) <= ( 0 );
t = ( {} ) by A77;
hence thesis by A71,A72,A74,A75,TREES_1:22;
end;
A78: (I[ k ] implies I[ ( k + 1 ) ])
proof
assume A79: (for t being (Element of ( dom T1 )) holds (( len t ) <= k implies (t in ( dom T2 ) & ( T1 . t ) = ( T2 . t ))));
let t being (Element of ( dom T1 ));
assume ( len t ) <= ( k + 1 );
then A80: (( len t ) <= k or ( len t ) = ( k + 1 )) by NAT_1:8;
now
assume A81: ( len t ) = ( k + 1 );
reconsider p = ( t | ( Seg k ) ) as (FinSequence of ( NAT )) by FINSEQ_1:18;
p is_a_prefix_of t by TREES_1:def 1;
then reconsider p as (Element of ( dom T1 )) by TREES_1:20;
A82: k <= ( k + 1 ) by NAT_1:11;
A83: ( k + 1 ) <= k1 by A71,A74,A81;
A84: ( len p ) = k by A81,A82,FINSEQ_1:17;
A85: k < k1 by A83,NAT_1:13;
A86: ( T1 . p ) = ( T2 . p ) by A79,A84;
reconsider p9 = p as (Element of ( dom T2 )) by A79,A84;
t <> ( {} ) by A81;
then consider q being FinSequence,x being set such that A87: t = ( q ^ <* x *> ) by FINSEQ_1:46;
A88: (p is_a_prefix_of t & q is_a_prefix_of t) by A87,TREES_1:1,TREES_1:def 1;
( k + 1 ) = ( ( len q ) + 1 ) by A81,A87,FINSEQ_2:16;
then A89: p = q by A84,A88,CKB1:1,TREES_1:4;
<* x *> is (FinSequence of ( NAT )) by A87,FINSEQ_1:36;
then A90: ( rng <* x *> ) c= ( NAT ) by FINSEQ_1:def 4;
(( rng <* x *> ) = { x } & x in { x }) by FINSEQ_1:38,TARSKI:def 1;
then reconsider x as (Element of ( NAT )) by A90;
A91: ( p ^ <* x *> ) in ( succ p ) by A87,A89;
( succ p ) = { ( p ^ <* i *> ): i in F(( T1 . p )) } by A71,A74,A84,A85;
then consider i such that A92: ( p ^ <* x *> ) = ( p ^ <* i *> ) and A93: i in F(( T1 . p )) by A91;
A94: k < k2 by A73,A74,A75,A85,XXREAL_0:2;
then A95: ( succ p9 ) = { ( p9 ^ <* l *> ): l in F(( T2 . p9 )) } by A72,A75,A84;
A96: x = i by A92,FINSEQ_2:17;
A97: t in ( succ p9 ) by A86,A87,A89,A92,A93,A95;
( T19 . t ) = ( S() . (( T19 . p ),x) ) by A71,A74,A84,A85,A87,A89,A93,A96;
hence thesis by A71,A72,A74,A75,A84,A86,A87,A89,A93,A94,A96,A97;
end;
hence thesis by A79,A80;
end;
A98: I[ k ] from NAT_1:sch 1(A76,A78);
let x;
assume A99: x in T1;
then consider y,z such that A100: [ y,z ] = x by RELAT_1:def 1;
A101: ( T1 . y ) = z by A99,A100,FUNCT_1:1;
reconsider y as (Element of ( dom T1 )) by A99,A100,FUNCT_1:1;
( len y ) <= ( len y );
then (y in ( dom T2 ) & ( T1 . y ) = ( T2 . y )) by A98;
hence thesis by A100,A101,FUNCT_1:1;
end;
E is  c=-linear
proof
let T1 being set;
let T2 being set;
assume A102: T1 in E;
then consider x such that A103: x in ( dom f ) and A104: T1 = ( f . x ) by FUNCT_1:def 3;
assume A105: T2 in E;
then consider y such that A106: y in ( dom f ) and A107: T2 = ( f . y ) by FUNCT_1:def 3;
A108: T1 is DecoratedTree by A67,A102;
A109: T2 is DecoratedTree by A67,A105;
reconsider x,y as (Element of ( NAT )) by A66,A103,A106;
(x <= y or y <= x);
hence (T1 c= T2 or T2 c= T1) by A70,A104,A107,A108,A109;
end;
then reconsider T = ( union ( rng f ) ) as (DecoratedTree of D()) by A67,CKB71:1;
take T;
consider T9 being (DecoratedTree of D()),k such that A110: (((( 0 ) = k & ( f . ( 0 ) ) = T9) & ( T9 . ( {} ) ) = d()) & (for t being (Element of ( dom T9 )) holds (( len t ) <= k & (( len t ) < k implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T9 . t )) } & (for n holds (for x holds ((x = ( T9 . t ) & n in F(x)) implies ( T9 . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A66;
( {} ) in ( dom T9 ) by TREES_1:22;
then A111: [ ( {} ),d() ] in T9 by A110,FUNCT_1:1;
T9 in ( rng f ) by A66,A110,FUNCT_1:def 3;
then [ ( {} ),d() ] in T by A111,TARSKI:def 4;
hence ( T . ( {} ) ) = d() by FUNCT_1:1;
A112: (for T1 holds (for x holds ((T1 in E & x in ( dom T1 )) implies (x in ( dom T ) & ( T1 . x ) = ( T . x )))))
proof
let T1;
let x;
assume that
A113: T1 in E
and
A114: x in ( dom T1 );
[ x,( T1 . x ) ] in T1 by A114,FUNCT_1:1;
then [ x,( T1 . x ) ] in T by A113,TARSKI:def 4;
hence thesis by FUNCT_1:1;
end;
let t being (Element of ( dom T ));
thus ( succ t ) c= { ( t ^ <* i *> ): i in F(( T . t )) }
proof
let x;
assume x in ( succ t );
then consider l such that A115: x = ( t ^ <* l *> ) and A116: ( t ^ <* l *> ) in ( dom T );
[ x,( T . x ) ] in T by A115,A116,FUNCT_1:1;
then consider X such that A117: [ x,( T . x ) ] in X and A118: X in ( rng f ) by TARSKI:def 4;
consider y such that A119: y in ( NAT ) and A120: X = ( f . y ) by A66,A118,FUNCT_1:def 3;
consider T1 being (DecoratedTree of D()),k1 such that A121: (((y = k1 & ( f . y ) = T1) & ( T1 . ( {} ) ) = d()) & (for t being (Element of ( dom T1 )) holds (( len t ) <= k1 & (( len t ) < k1 implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T1 . t )) } & (for n holds (for x holds ((x = ( T1 . t ) & n in F(x)) implies ( T1 . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A66,A119;
A122: ( t ^ <* l *> ) in ( dom T1 ) by A115,A117,A120,A121,FUNCT_1:1;
then reconsider t9 = t,p = ( t ^ <* l *> ) as (Element of ( dom T1 )) by TREES_1:21;
( len p ) <= k1 by A121;
then ( ( len t ) + 1 ) <= k1 by FINSEQ_2:16;
then A123: ( len t9 ) < k1 by NAT_1:13;
then A124: ( succ t9 ) = { ( t9 ^ <* i *> ): i in F(( T1 . t9 )) } by A121;
( T1 . t ) = ( T . t ) by A112,A118,A120,A121,A123;
hence thesis by A115,A122,A124;
end;

[ t,( T . t ) ] in T by FUNCT_1:1;
then consider X such that A125: [ t,( T . t ) ] in X and A126: X in E by TARSKI:def 4;
consider y such that A127: y in ( NAT ) and A128: X = ( f . y ) by A66,A126,FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A127;
consider T1 being (DecoratedTree of D()),k1 such that A129: (((y = k1 & ( f . y ) = T1) & ( T1 . ( {} ) ) = d()) & (for t being (Element of ( dom T1 )) holds (( len t ) <= k1 & (( len t ) < k1 implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T1 . t )) } & (for n holds (for x holds ((x = ( T1 . t ) & n in F(x)) implies ( T1 . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A66;
consider T2 being (DecoratedTree of D()),k2 such that A130: (((( y + 1 ) = k2 & ( f . ( y + 1 ) ) = T2) & ( T2 . ( {} ) ) = d()) & (for t being (Element of ( dom T2 )) holds (( len t ) <= k2 & (( len t ) < k2 implies (( succ t ) = { ( t ^ <* i *> ): i in F(( T2 . t )) } & (for n holds (for x holds ((x = ( T2 . t ) & n in F(x)) implies ( T2 . ( t ^ <* n *> ) ) = ( S() . (x,n) ))))))))) by A66;
y <= ( y + 1 ) by NAT_1:11;
then A131: T1 c= T2 by A70,A129,A130;
reconsider t1 = t as (Element of ( dom T1 )) by A125,A128,A129,FUNCT_1:1;
A132: ( len t1 ) <= y by A129;
A133: ( T2 . t ) = ( T . t ) by A125,A128,A129,A131,FUNCT_1:1;
reconsider t2 = t as (Element of ( dom T2 )) by A125,A128,A129,A131,FUNCT_1:1;
A134: ( len t2 ) < ( y + 1 ) by A132,NAT_1:13;
then A135: ( succ t2 ) = { ( t2 ^ <* i *> ): i in F(( T2 . t2 )) } by A130;
thus { ( t ^ <* i *> ): i in F(( T . t )) } c= ( succ t )
proof
let x;
assume A136: x in { ( t ^ <* i *> ): i in F(( T . t )) };
then A137: (ex l st (x = ( t ^ <* l *> ) & l in F(( T . t ))));
A138: x in ( succ t2 ) by A130,A133,A134,A136;
T2 in E by A66,A130,FUNCT_1:def 3;
then x in ( dom T ) by A112,A138;
hence thesis by A137;
end;

let n;
assume A139: n in F(( T . t ));
then A140: ( t ^ <* n *> ) in ( succ t2 ) by A133,A135;
T2 in E by A66,A130,FUNCT_1:def 3;
then ( T2 . ( t ^ <* n *> ) ) = ( T . ( t ^ <* n *> ) ) by A112,A140;
hence thesis by A130,A133,A134,A139;
end;
