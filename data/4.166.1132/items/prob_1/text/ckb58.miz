environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FUNCT_1,XREAL_0,ORDINAL1,SEQ_1,XXREAL_0,SEQ_2,ORDINAL2,CARD_1,ARYTM_3,COMPLEX1,ARYTM_1,SETFAM_1,FINSUB_1,ZFMISC_1,TARSKI,RELAT_1,CARD_3,EQREL_1,FUNCT_7,FUNCOP_1,NAT_1,RPR_1,REAL_1,VALUED_0,XXREAL_1,PROB_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,FINSUB_1,RELAT_1,FUNCT_1,REAL_1,FUNCT_2,FUNCOP_1,FUNCT_7,ORDINAL1,CARD_3,NUMBERS,VALUED_0,XREAL_0,COMPLEX1,NAT_1,SEQ_1,SEQ_2,SETFAM_1,XXREAL_0,XXREAL_1,CKB2,CKB6,CKB17,CKB19,CKB21,CKB22,CKB26,CKB27,CKB28,CKB31,CKB36,CKB38,CKB39,CKB48,CKB49,CKB50,CKB51,CKB57;
definitions FINSUB_1,TARSKI,SUBSET_1,MEMBERED,CARD_3,FUNCT_2,VALUED_0,CKB2,CKB21,CKB22,CKB26,CKB27,CKB28,CKB48;
theorems TARSKI,ZFMISC_1,FUNCT_1,FUNCT_2,ABSVALUE,SEQ_2,SETFAM_1,SUBSET_1,RELAT_1,RELSET_1,FINSUB_1,FUNCOP_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,XXREAL_1,FUNCT_7,NAT_1,ORDINAL1,CKB1,CKB2,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB18,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB32,CKB33,CKB37,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB48,CKB52,CKB53,CKB54,CKB55,CKB56;
schemes FUNCT_2,PARTFUN1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,XXREAL_1,RELAT_1,VALUED_0,RELSET_1,CKB3,CKB4,CKB5,CKB13,CKB29,CKB30,CKB34,CKB35,CKB47;
constructors SETFAM_1,FINSUB_1,XXREAL_1,COMPLEX1,REAL_1,SEQ_2,CARD_3,MEMBERED,SEQ_1,FUNCT_7,RELSET_1,CKB2,CKB19,CKB21,CKB22,CKB26,CKB27,CKB28,CKB39,CKB48,CKB49,CKB50,CKB51,CKB57;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve m for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve Omega for non empty set;
reserve Sigma for (SigmaField of Omega);
reserve A for (Event of Sigma);
reserve B for (Event of Sigma);
reserve ASeq for (SetSequence of Sigma);
reserve P for (Function of Sigma,( REAL ));
reserve D for (Subset of Omega);
definition
let Omega;
let Sigma;
mode Probability of Sigma
 -> (Function of Sigma,( REAL ))
means :Def13: ((((for A holds ( 0 ) <= ( it . A )) & ( it . Omega ) = 1) & (for A holds (for B holds (A misses B implies ( it . ( A \/ B ) ) = ( ( it . A ) + ( it . B ) ))))) & (for ASeq holds (ASeq is  non-ascending implies (( it * ASeq ) is  convergent & ( lim ( it * ASeq ) ) = ( it . ( Intersection ASeq ) )))));
existence
proof
set p = the (Element of Omega);
consider P such that A1: (for D holds (D in Sigma implies ((p in D implies ( P . D ) = 1) & ((not p in D) implies ( P . D ) = ( 0 ))))) by CKB55:1;
take P;
thus (for A holds ( 0 ) <= ( P . A )) by A1;
( [#] Sigma ) in Sigma;
hence ( P . Omega ) = 1 by A1;
thus (for A holds (for B holds (A misses B implies ( P . ( A \/ B ) ) = ( ( P . A ) + ( P . B ) ))))
proof
let A;
let B;
assume that
A20: A misses B;
A21: ((p in A & (not p in B)) implies p in ( A \/ B )) by XBOOLE_0:def 3;
A22: (((not p in A) & p in B) implies (( P . A ) = ( 0 ) & ( P . B ) = 1)) by A1;
A23: (((not p in A) & p in B) implies p in ( A \/ B )) by XBOOLE_0:def 3;
A24: (((not p in A) & (not p in B)) implies (( P . A ) = ( 0 ) & ( P . B ) = ( 0 ))) by A1;
A25: (((not p in A) & (not p in B)) implies (not p in ( A \/ B ))) by XBOOLE_0:def 3;
((p in A & (not p in B)) implies (( P . A ) = 1 & ( P . B ) = ( 0 ))) by A1;
hence thesis by A1,A20,A21,A22,A23,A24,A25,XBOOLE_0:3;
end;

let ASeq;
A3: (for n holds ( ( P * ASeq ) . n ) = ( P . ( ASeq . n ) ))
proof
let n;
( dom ( P * ASeq ) ) = ( NAT ) by FUNCT_2:def 1;
hence thesis by FUNCT_1:12;
end;
A4: ((for n holds p in ( ASeq . n )) implies (for n holds ( ( P * ASeq ) . n ) = 1))
proof
assume A5: (for n holds p in ( ASeq . n ));
(for n holds ( ( P * ASeq ) . n ) = 1)
proof
let n;
A6: (( rng ASeq ) c= Sigma & ( ASeq . n ) in ( rng ASeq )) by NAT_1:51,RELAT_1:def 19;
p in ( ASeq . n ) by A5;
then ( P . ( ASeq . n ) ) = 1 by A1,A6;
hence thesis by A3;
end;
hence thesis;
end;
assume A7: ASeq is  non-ascending;
A8: ((not (for n holds p in ( ASeq . n ))) implies (ex m st (for n holds (m <= n implies ( ( P * ASeq ) . n ) = ( 0 )))))
proof
assume (not (for n holds p in ( ASeq . n )));
then consider m such that A9: (not p in ( ASeq . m ));
take m;
(for n holds (m <= n implies ( ( P * ASeq ) . n ) = ( 0 )))
proof
let n;
assume m <= n;
then ( ASeq . n ) c= ( ASeq . m ) by A7,CKB26:def 1;
then A10: (not p in ( ASeq . n )) by A9;
(( rng ASeq ) c= Sigma & ( ASeq . n ) in ( rng ASeq )) by NAT_1:51,RELAT_1:def 19;
then ( P . ( ASeq . n ) ) = ( 0 ) by A1,A10;
hence thesis by A3;
end;
hence thesis;
end;
A11: ((ex m st (for n holds (m <= n implies ( ( P * ASeq ) . n ) = ( 0 )))) implies (( P * ASeq ) is  convergent & ( lim ( P * ASeq ) ) = ( 0 ))) by CKB1:1;
( rng ASeq ) c= Sigma by RELAT_1:def 19;
then A13: ( Intersection ASeq ) in Sigma by CKB28:def 1;
reconsider r = 1 as Real;
A15: ((for n holds ( ( P * ASeq ) . n ) = 1) implies (( P * ASeq ) is  convergent & ( lim ( P * ASeq ) ) = 1))
proof
assume A16: (for n holds ( ( P * ASeq ) . n ) = 1);
(ex m st (for n holds (m <= n implies ( ( P * ASeq ) . n ) = r)))
proof
take ( 0 );
thus thesis by A16;
end;
hence thesis by CKB1:1;
end;
per cases ;
suppose A14: (not (for n holds p in ( ASeq . n )));

then (not p in ( Intersection ASeq )) by CKB23:1;
hence thesis by A1,A8,A11,A14,A13;
end;
suppose A18: (for n holds p in ( ASeq . n ));

then p in ( Intersection ASeq ) by CKB23:1;
hence thesis by A1,A4,A15,A18,A13;
end;
end;
end;
