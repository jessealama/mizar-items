environ
vocabularies PRE_TOPC,RLVECT_1,FUNCT_1,ARYTM_3,ARYTM_1,FINSEQ_1,FINSEQ_2,XXREAL_2,FINSET_1,MEMBERED,RVSUM_1,RELAT_1,COMPLEX1,SQUARE_1,RCOMP_1,XBOOLE_0,PARTFUN1,NORMSP_1,LOPBAN_1,FDIFF_1,PDIFF_1,REAL_NS1,BORSUK_1,EUCLID,XREAL_0,NUMBERS,STRUCT_0,CFCONT_1,FUNCT_4,REAL_1,SUBSET_1,CARD_1,TARSKI,XXREAL_0,CARD_3,NAT_1,SEQ_4,UNIALG_1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,COMPLEX1,BINOP_2,XXREAL_2,FINSEQ_1,FINSEQ_2,SEQ_1,RVSUM_1,SEQ_4,FUNCT_7,STRUCT_0,PRE_TOPC,RLVECT_1,NORMSP_0,EUCLID,LOPBAN_1,NFCONT_1,NDIFF_1,REAL_NS1,PDIFF_1;
definitions XBOOLE_0,SQUARE_1,FINSEQ_1,FINSEQ_2,NORMSP_0,EUCLID,LOPBAN_1;
theorems ABSVALUE,EUCLID,XREAL_1,COMPLEX1,FINSEQ_1,FINSEQ_2,FINSEQ_3,ORDINAL1,NAT_1,FINSET_1,XXREAL_0,FUNCT_7,RVSUM_1,RELAT_1,FUNCT_1,FUNCT_2,SQUARE_1,NORMSP_1,LOPBAN_1,PARTFUN1,NFCONT_1,NDIFF_1,REAL_NS1,VALUED_1,PDIFF_1,XXREAL_2,XCMPLX_1,PDIFF_6,SEQ_4,FUNCOP_1,GRCAT_1,PDIFF_7,LOPBAN_2,JORDAN2B,SERIES_3,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20;
schemes NAT_1,FINSEQ_1;
registrations FUNCT_1,ORDINAL1,RELSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,MEMBERED,VALUED_0,XXREAL_2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,EUCLID,LOPBAN_1,JORDAN2B,REAL_NS1,PDIFF_6,CARD_1;
constructors RELSET_1,REAL_1,SQUARE_1,NAT_D,BINOP_2,SEQ_1,FINSEQOP,SEQ_4,FINSEQ_7,MONOID_0,RSSPACE3,NFCONT_1,NDIFF_1,PDIFF_1;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
theorem
Th20: (for m,n being non empty (Element of ( NAT )) holds (for f being (PartFunc of ( REAL-NS m ),( REAL-NS n )) holds (for X being (Subset of ( REAL-NS m )) holds (for i being (Element of ( NAT )) holds (((1 <= i & i <= m) & X is  open) implies ((f is_partial_differentiable_on X,i & ( f `partial| (X,i) ) is_continuous_on X) iff (for j being (Element of ( NAT )) holds ((1 <= j & j <= n) implies (( ( Proj (j,n) ) * f ) is_partial_differentiable_on X,i & ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) is_continuous_on X)))))))))
proof
let m being non empty (Element of ( NAT )),n being non empty (Element of ( NAT ));
let f being (PartFunc of ( REAL-NS m ),( REAL-NS n ));
let X being (Subset of ( REAL-NS m ));
let i being (Element of ( NAT ));
assume A1: ((1 <= i & i <= m) & X is  open);
hereby
assume A2: (f is_partial_differentiable_on X,i & ( f `partial| (X,i) ) is_continuous_on X);
then A3: X c= ( dom f ) by A1,PDIFF_7:8;
thus (for j being (Element of ( NAT )) holds ((1 <= j & j <= n) implies (( ( Proj (j,n) ) * f ) is_partial_differentiable_on X,i & ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) is_continuous_on X)))
proof
let j being (Element of ( NAT ));
assume A4: (1 <= j & j <= n);
A5: ( dom ( Proj (j,n) ) ) = (the carrier of ( REAL-NS n )) by FUNCT_2:def 1;
( rng f ) c= (the carrier of ( REAL-NS n ));
then A6: X c= ( dom ( ( Proj (j,n) ) * f ) ) by A5,A3,RELAT_1:27;
now
let x0 being (Point of ( REAL-NS m ));
assume x0 in X;
then f is_partial_differentiable_in x0,i by A2,A1,PDIFF_7:8;
then ( f * ( reproj (i,x0) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by PDIFF_1:def 9;
then ( ( Proj (j,n) ) * ( f * ( reproj (i,x0) ) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by A4,PDIFF_6:29;
then ( ( ( Proj (j,n) ) * f ) * ( reproj (i,x0) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by RELAT_1:36;
hence ( ( Proj (j,n) ) * f ) is_partial_differentiable_in x0,i by PDIFF_1:def 9;
end;
hence A7: ( ( Proj (j,n) ) * f ) is_partial_differentiable_on X,i by A6,A1,PDIFF_7:8;
then A8: X c= ( dom ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) ) by PDIFF_1:def 20;
A9: (for x0 being (Point of ( REAL-NS m )) holds (x0 in X implies ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) = ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) )))
proof
let x0 being (Point of ( REAL-NS m ));
assume A10: x0 in X;
then f is_partial_differentiable_in x0,i by A2,A1,PDIFF_7:8;
then A11: ( f * ( reproj (i,x0) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by PDIFF_1:def 9;
thus ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) = ( partdiff (( ( Proj (j,n) ) * f ),x0,i) ) by A7,A10,PDIFF_1:def 20
.= ( diff (( ( ( Proj (j,n) ) * f ) * ( reproj (i,x0) ) ),( ( Proj (i,m) ) . x0 )) ) by PDIFF_1:def 10
.= ( diff (( ( Proj (j,n) ) * ( f * ( reproj (i,x0) ) ) ),( ( Proj (i,m) ) . x0 )) ) by RELAT_1:36
.= ( ( Proj (j,n) ) * ( diff (( f * ( reproj (i,x0) ) ),( ( Proj (i,m) ) . x0 )) ) ) by A11,A4,PDIFF_6:28
.= ( ( Proj (j,n) ) * ( partdiff (f,x0,i) ) ) by PDIFF_1:def 10
.= ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) ) by A2,A10,PDIFF_1:def 20;
end;
(for x0 being (Point of ( REAL-NS m )) holds (for r being Real holds ((x0 in X & ( 0 ) < r) implies (ex s being Real st (( 0 ) < s & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < s) implies ||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| < r)))))))
proof
let x0 being (Point of ( REAL-NS m ));
let r being Real;
assume A12: (x0 in X & ( 0 ) < r);
then consider s being Real such that A13: (( 0 ) < s & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < s) implies ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| < r))) by A2,NFCONT_1:19;
take s;
thus ( 0 ) < s by A13;
let x1 being (Point of ( REAL-NS m ));
assume A14: (x1 in X & ||. ( x1 - x0 ) .|| < s);
then A15: ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| < r by A13;
A16: ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) = ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) ) by A9,A12;
reconsider p1 = ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x1 ) ) as (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS 1 ),( REAL-NS 1 )) )) by CKB7:1,A4;
reconsider p0 = ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) ) as (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS 1 ),( REAL-NS 1 )) )) by CKB7:1,A4;
||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| = ||. ( p1 - p0 ) .|| by A9,A14,A16;
then ||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| <= ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| by CKB15:1,A4;
hence ||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| < r by A15,XXREAL_0:2;
end;
hence ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) is_continuous_on X by A8,NFCONT_1:19;
end;

end;
assume A17: (for j being (Element of ( NAT )) holds ((1 <= j & j <= n) implies (( ( Proj (j,n) ) * f ) is_partial_differentiable_on X,i & ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) is_continuous_on X)));
1 <= n by NAT_1:14;
then ( ( Proj (1,n) ) * f ) is_partial_differentiable_on X,i by A17;
then A18: X c= ( dom ( ( Proj (1,n) ) * f ) ) by PDIFF_1:def 19;
A19: ( dom ( Proj (1,n) ) ) = (the carrier of ( REAL-NS n )) by FUNCT_2:def 1;
( rng f ) c= (the carrier of ( REAL-NS n ));
then A20: X c= ( dom f ) by A18,A19,RELAT_1:27;
A21:now
let x0 being (Point of ( REAL-NS m ));
assume A22: x0 in X;
now
let j being (Element of ( NAT ));
assume (1 <= j & j <= n);
then ( ( Proj (j,n) ) * f ) is_partial_differentiable_on X,i by A17;
then ( ( Proj (j,n) ) * f ) is_partial_differentiable_in x0,i by A22,A1,PDIFF_7:8;
then ( ( ( Proj (j,n) ) * f ) * ( reproj (i,x0) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by PDIFF_1:def 9;
hence ( ( Proj (j,n) ) * ( f * ( reproj (i,x0) ) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by RELAT_1:36;
end;
then ( f * ( reproj (i,x0) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by PDIFF_6:29;
hence f is_partial_differentiable_in x0,i by PDIFF_1:def 9;
end;
hence A23: f is_partial_differentiable_on X,i by A1,A20,PDIFF_7:8;
then A24: X c= ( dom ( f `partial| (X,i) ) ) by PDIFF_1:def 20;
A25: (for x0 being (Point of ( REAL-NS m )) holds (for j being (Element of ( NAT )) holds (((x0 in X & 1 <= j) & j <= n) implies ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) ) = ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ))))
proof
let x0 being (Point of ( REAL-NS m ));
let j being (Element of ( NAT ));
assume A26: ((x0 in X & 1 <= j) & j <= n);
then f is_partial_differentiable_in x0,i by A21;
then A27: ( f * ( reproj (i,x0) ) ) is_differentiable_in ( ( Proj (i,m) ) . x0 ) by PDIFF_1:def 9;
A28: ( ( Proj (j,n) ) * f ) is_partial_differentiable_on X,i by A17,A26;
thus ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) ) = ( ( Proj (j,n) ) * ( partdiff (f,x0,i) ) ) by A26,A23,PDIFF_1:def 20
.= ( ( Proj (j,n) ) * ( diff (( f * ( reproj (i,x0) ) ),( ( Proj (i,m) ) . x0 )) ) ) by PDIFF_1:def 10
.= ( diff (( ( Proj (j,n) ) * ( f * ( reproj (i,x0) ) ) ),( ( Proj (i,m) ) . x0 )) ) by A27,A26,PDIFF_6:28
.= ( diff (( ( ( Proj (j,n) ) * f ) * ( reproj (i,x0) ) ),( ( Proj (i,m) ) . x0 )) ) by RELAT_1:36
.= ( partdiff (( ( Proj (j,n) ) * f ),x0,i) ) by PDIFF_1:def 10
.= ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) by A28,A26,PDIFF_1:def 20;
end;
(for x0 being (Point of ( REAL-NS m )) holds (for r being Real holds ((x0 in X & ( 0 ) < r) implies (ex s being Real st (( 0 ) < s & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < s) implies ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| < r)))))))
proof
let x0 being (Point of ( REAL-NS m ));
let r0 being Real;
assume A29: (x0 in X & ( 0 ) < r0);
set r = ( r0 / 2 );
defpred P[ set,set ]
 means
(ex j being (Element of ( NAT )) st (ex sj being Real st ((($2 = sj & $1 = j) & ( 0 ) < sj) & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < sj) implies ||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| < ( r / n ))))));
A30: (for j0 being Nat holds (j0 in ( Seg n ) implies (ex x being (Element of ( REAL )) st P[ j0,x ])))
proof
let j0 being Nat;
assume j0 in ( Seg n );
then A31: (1 <= j0 & j0 <= n) by FINSEQ_1:1;
reconsider j = j0 as (Element of ( NAT )) by ORDINAL1:def 12;
( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) is_continuous_on X by A17,A31;
then consider sj being Real such that A32: (( 0 ) < sj & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < sj) implies ||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| < ( r / n )))) by A29,NFCONT_1:19;
thus thesis by A32;
end;
consider s0 being (FinSequence of ( REAL )) such that A33: (( dom s0 ) = ( Seg n ) & (for k being Nat holds (k in ( Seg n ) implies P[ k,( s0 . k ) ]))) from FINSEQ_1:sch 5(A30);
A34: ( rng s0 ) is  finite by A33,FINSET_1:8;
n in ( Seg n ) by FINSEQ_1:3;
then reconsider rs0 = ( rng s0 ) as non empty  ext-real-membered set by A33,FUNCT_1:3;
reconsider rs0 as  left_end  right_end non empty  ext-real-membered set by A34;
A35: ( min rs0 ) in ( rng s0 ) by XXREAL_2:def 7;
then reconsider s = ( min rs0 ) as Real;
take s;
consider i1 being set such that A36: (i1 in ( dom s0 ) & s = ( s0 . i1 )) by A35,FUNCT_1:def 3;
(ex j being (Element of ( NAT )) st (ex sj being Real st (((( s0 . i1 ) = sj & i1 = j) & ( 0 ) < sj) & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < sj) implies ||. ( ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| < ( r / n )))))) by A33,A36;
hence ( 0 ) < s by A36;
let x1 being (Point of ( REAL-NS m ));
assume A37: (x1 in X & ||. ( x1 - x0 ) .|| < s);
now
let j being (Element of ( NAT ));
let p1 being (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS 1 ),( REAL-NS 1 )) )),p0 being (Point of ( R_NormSpace_of_BoundedLinearOperators (( REAL-NS 1 ),( REAL-NS 1 )) ));
assume A38: (((p1 = ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x1 ) ) & p0 = ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) )) & 1 <= j) & j <= n);
then A39: j in ( Seg n );
then consider jj being (Element of ( NAT )),sj being Real such that A40: (((( s0 . j ) = sj & jj = j) & ( 0 ) < sj) & (for x1 being (Point of ( REAL-NS m )) holds ((x1 in X & ||. ( x1 - x0 ) .|| < sj) implies ||. ( ( ( ( ( Proj (jj,n) ) * f ) `partial| (X,i) ) /. x1 ) - ( ( ( ( Proj (jj,n) ) * f ) `partial| (X,i) ) /. x0 ) ) .|| < ( r / n )))) by A33;
A41: ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x0 ) ) = ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x0 ) by A25,A29,A38;
A42: ( ( Proj (j,n) ) * ( ( f `partial| (X,i) ) /. x1 ) ) = ( ( ( ( Proj (j,n) ) * f ) `partial| (X,i) ) /. x1 ) by A25,A37,A38;
sj in ( rng s0 ) by A39,A40,A33,FUNCT_1:3;
then s <= sj by XXREAL_2:def 7;
then ||. ( x1 - x0 ) .|| < sj by A37,XXREAL_0:2;
hence ||. ( p1 - p0 ) .|| <= ( r / n ) by A40,A37,A38,A41,A42;
end;
then ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| <= ( n * ( r / n ) ) by CKB20:1;
then A43: ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| <= r by XCMPLX_1:87;
r < r0 by A29,XREAL_1:216;
hence ||. ( ( ( f `partial| (X,i) ) /. x1 ) - ( ( f `partial| (X,i) ) /. x0 ) ) .|| < r0 by A43,XXREAL_0:2;
end;
hence thesis by A24,NFCONT_1:19;
end;
