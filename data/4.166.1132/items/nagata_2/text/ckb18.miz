environ
vocabularies NUMBERS,SUBSET_1,REAL_1,XREAL_0,ORDINAL1,XBOOLE_0,PRE_TOPC,ZFMISC_1,STRUCT_0,FUNCT_1,PSCOMP_1,SEQFUNC,SEQ_1,XXREAL_0,CARD_1,NEWTON,RELAT_1,ARYTM_3,INT_1,NAT_1,ARYTM_1,FUNCT_7,FUNCT_2,TARSKI,METRIC_1,RCOMP_1,MCART_1,SETFAM_1,ORDINAL2,TOPMETR,TMAP_1,SEQ_4,NAGATA_1,XXREAL_2,COMPLEX1,RELAT_2,VALUED_0,PCOMPS_1,PBOOLE,SERIES_1,CARD_3,VALUED_1,SEQ_2,FINSEQ_1,PREPOWER,BINOP_1,SETWISEO,FINSOP_1,ORDINAL4,CARD_5,RLVECT_3,FINSET_1,COH_SP,PARTFUN1,WELLORD1,PCOMPS_2,NATTRA_1,NAGATA_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,SETWISEO,BORSUK_1,RELAT_1,RELAT_2,ORDINAL1,XCMPLX_0,XXREAL_0,XXREAL_2,XREAL_0,FUNCT_1,COMPLEX1,REAL_1,RELSET_1,PARTFUN1,VALUED_0,VALUED_1,SEQ_1,FUNCT_2,FUNCT_3,DOMAIN_1,BINOP_1,PRE_TOPC,NAT_1,NAT_D,CARD_1,NUMBERS,FINSET_1,STRUCT_0,FINSEQ_1,PCOMPS_1,PCOMPS_2,NEWTON,TOPS_2,METRIC_1,PROB_1,SEQFUNC,PREPOWER,TOPMETR,PSCOMP_1,MEASURE6,TMAP_1,NAGATA_1,SEQ_2,SEQ_4,SERIES_1,FINSOP_1,CANTOR_1,WELLORD1,FUNCT_7,CKB2,CKB4,CKB7;
definitions FUNCT_2,TARSKI,TOPS_2,XBOOLE_0,BINOP_1,SUBSET_1,STRUCT_0,PRE_TOPC,XXREAL_2,CKB2,CKB4,CKB7;
theorems NAT_1,NEWTON,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_3,FUNCT_1,METRIC_1,XCMPLX_1,ABSVALUE,TOPMETR,TMAP_1,BORSUK_1,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,FINSEQ_1,CARD_4,TOPREAL6,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SERIES_1,PREPOWER,SEQFUNC,PARTFUN1,JGRAPH_2,URYSOHN1,FINSEQ_3,FINSEQ_4,FINSOP_1,SETWISEO,PROB_1,URYSOHN3,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,FUNCT_7,RSSPACE2,RSSPACE,BHSP_5,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,NAT_D,VALUED_1,XXREAL_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17;
schemes FUNCT_2,NAT_1,SEQFUNC,FRAENKEL,BINOP_1,PCOMPS_2;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,STRUCT_0,TOPS_1,METRIC_1,BORSUK_1,TOPMETR,MEASURE6,TOPREAL6,VALUED_0,VALUED_1,FUNCT_2,BORSUK_4,BORSUK_6,CARD_1,PRE_TOPC,FUNCT_1,PSCOMP_1;
constructors SETFAM_1,WELLORD1,FUNCT_3,SETWISEO,REAL_1,SQUARE_1,NAT_1,NAT_D,SEQM_3,PROB_1,FINSOP_1,NEWTON,PREPOWER,SERIES_1,FUNCT_7,TOPS_2,COMPTS_1,TMAP_1,CANTOR_1,PCOMPS_2,MEASURE6,URYSOHN3,NAGATA_1,SEQ_1,BORSUK_4,XXREAL_2,SEQFUNC,SEQ_4,BINOP_2,SEQ_2,RVSUM_1,PSCOMP_1,PCOMPS_1,CKB2,CKB4,CKB7;
requirements BOOLE,SUBSET,NUMERALS,REAL,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve rn for  real number;
reserve x for set;
reserve T for non  empty TopSpace;
reserve p for (Point of T);
reserve q for (Point of T);
reserve f for (RealMap of T);
reserve f1 for (RealMap of T);
reserve seq for Real_Sequence;
theorem
Th14: (for FS1 being (Functional_Sequence of (the carrier of T),( REAL )) holds (((for n holds (ex f st ((( FS1 . n ) = f & f is  continuous) & (for p holds ( f . p ) >= ( 0 ))))) & (ex seq st (seq is  summable & (for n holds (for p holds ( ( FS1 # p ) . n ) <= ( seq . n )))))) implies (for f holds ((for p holds ( f . p ) = ( Sum ( FS1 # p ) )) implies f is  continuous))))
proof
let FS1 being (Functional_Sequence of (the carrier of T),( REAL ));
assume that
A1: (for n holds (ex f st ((( FS1 . n ) = f & f is  continuous) & (for p holds ( f . p ) >= ( 0 )))))
and
A2: (ex seq st (seq is  summable & (for n holds (for p holds ( ( FS1 # p ) . n ) <= ( seq . n )))));
let f;
assume that
A3: (for p holds ( f . p ) = ( Sum ( FS1 # p ) ));
reconsider fR = f as (Function of T,( R^1 )) by TOPMETR:17;
now
let p;
(for R being (Subset of ( R^1 )) holds ((R is  open & ( fR . p ) in R) implies (ex U being (Subset of T) st ((U is  open & p in U) & ( fR .: U ) c= R))))
proof
reconsider fRp = ( (fR qua  real-valued Function) . p ) as (Point of ( RealSpace )) by METRIC_1:def 13;
let R being (Subset of ( R^1 ));
assume (R is  open & ( fR . p ) in R);
then consider rn such that A4: rn > ( 0 ) and A5: ( Ball (fRp,rn) ) c= R by TOPMETR:15,TOPMETR:def 6;
set r2 = ( rn / 2 );
set r4 = ( rn / 4 );
reconsider r2,r4 as Real;
A6: r4 > ( 0 ) by A4,XREAL_1:224;
consider seq such that A7: seq is  summable and A8: (for n holds (for q holds ( ( FS1 # q ) . n ) <= ( seq . n ))) by A2;
( Partial_Sums seq ) is  convergent by A7,SERIES_1:def 2;
then consider n such that A9: (for m holds (n <= m implies ( abs ( ( ( Partial_Sums seq ) . m ) - ( lim ( Partial_Sums seq ) ) ) ) < r4)) by A6,SEQ_2:def 7;
defpred Sn[ set,set ]
 means
(ex SS being (Subset of T) st (((SS = $2 & SS is  open) & p in SS) & (for f1 holds (( FS1 . $1 ) = f1 implies (for f1p being (Point of ( RealSpace )) holds (f1p = ( f1 . p ) implies ( f1 .: SS ) c= ( Ball (f1p,( r2 / ( n + 1 ) )) )))))));
A10: (for k being set holds (k in ( { ( 0 ) } \/ ( Seg n ) ) implies (ex U being set st (U in ( bool (the carrier of T) ) & Sn[ k,U ]))))
proof
let k being set;
assume k in ( { ( 0 ) } \/ ( Seg n ) );
then (k in ( Seg n ) or k in { ( 0 ) }) by XBOOLE_0:def 3;
then reconsider k as (Element of ( NAT )) by TARSKI:def 1;
consider f1 such that A11: ( FS1 . k ) = f1 and A12: f1 is  continuous and (for p holds ( f1 . p ) >= ( 0 )) by A1;
reconsider f19 = f1 as (Function of T,( R^1 )) by TOPMETR:17;
reconsider f1p = ( (f19 qua  real-valued Function) . p ) as (Point of ( RealSpace )) by METRIC_1:def 13;
set B = ( Ball (f1p,( r2 / ( n + 1 ) )) );
reconsider B as (Subset of ( R^1 )) by METRIC_1:def 13,TOPMETR:17;
(( dist (f1p,f1p) ) = ( 0 ) & r2 > ( 0 )) by A4,METRIC_1:1,XREAL_1:215;
then ( dist (f1p,f1p) ) < ( r2 / ( n + 1 ) ) by XREAL_1:139;
then A13: f1p in B by METRIC_1:11;
f19 is  continuous by A12,TOPREAL6:74;
then (B is  open & f19 is_continuous_at p) by TMAP_1:50,TOPMETR:14,TOPMETR:def 6;
then consider U being (Subset of T) such that A14: (U is  open & p in U) and A15: ( f19 .: U ) c= B by A13,TMAP_1:43;
(for f1 holds (( FS1 . k ) = f1 implies (for f1p being (Point of ( RealSpace )) holds (f1p = ( f1 . p ) implies ( f1 .: U ) c= ( Ball (f1p,( r2 / ( n + 1 ) )) ))))) by A11,A15;
hence thesis by A14;
end;
consider FSn being (Function of ( { ( 0 ) } \/ ( Seg n ) ),( bool (the carrier of T) )) such that A16: (for k being set holds (k in ( { ( 0 ) } \/ ( Seg n ) ) implies Sn[ k,( FSn . k ) ])) from FUNCT_2:sch 1(A10);
A17: (for k holds (for q holds ( ( FS1 # q ) . k ) >= ( 0 )))
proof
let k;
let q;
((ex f1 st ((( FS1 . k ) = f1 & f1 is  continuous) & (for q holds ( f1 . q ) >= ( 0 )))) & ( ( FS1 . k ) . q ) = ( ( FS1 # q ) . k )) by A1,SEQFUNC:def 10;
hence thesis;
end;
A18: (for k holds ( ( seq ^\ ( n + 1 ) ) . k ) >= ( 0 ))
proof
let k;
(( 0 ) <= ( ( FS1 # p ) . ( ( n + 1 ) + k ) ) & ( seq . ( ( n + 1 ) + k ) ) = ( ( seq ^\ ( n + 1 ) ) . k )) by A17,NAT_1:def 3;
hence thesis by A8;
end;
reconsider RNG = ( rng FSn ) as (Subset-Family of T);
A19: RNG is  open
proof
let Q being (Subset of T);
assume Q in RNG;
then consider x such that A20: x in ( dom FSn ) and A21: ( FSn . x ) = Q by FUNCT_1:def 3;
(ex SS being (Subset of T) st (((SS = ( FSn . x ) & SS is  open) & p in SS) & (for f1 holds (( FS1 . x ) = f1 implies (for f1p being (Point of ( RealSpace )) holds (f1p = ( f1 . p ) implies ( f1 .: SS ) c= ( Ball (f1p,( r2 / ( n + 1 ) )) ))))))) by A16,A20;
hence thesis by A21;
end;
( 0 ) in { ( 0 ) } by TARSKI:def 1;
then ( 0 ) in ( { ( 0 ) } \/ ( Seg n ) ) by XBOOLE_0:def 3;
then reconsider RNG as non  empty (Subset-Family of T) by FUNCT_2:4;
A22: (( lim ( Partial_Sums seq ) ) = ( Sum seq ) & ( Sum seq ) = ( ( ( Partial_Sums seq ) . n ) + ( Sum ( seq ^\ ( n + 1 ) ) ) )) by A7,SERIES_1:15,SERIES_1:def 3;
( abs ( ( ( Partial_Sums seq ) . n ) - ( lim ( Partial_Sums seq ) ) ) ) < r4 by A9;
then ( abs ( - ( Sum ( seq ^\ ( n + 1 ) ) ) ) ) < r4 by A22;
then A23: ( abs ( Sum ( seq ^\ ( n + 1 ) ) ) ) < r4 by COMPLEX1:52;
( seq ^\ ( n + 1 ) ) is  summable by A7,SERIES_1:12;
then ( Sum ( seq ^\ ( n + 1 ) ) ) >= ( 0 ) by A18,SERIES_1:18;
then A24: ( Sum ( seq ^\ ( n + 1 ) ) ) < r4 by A23,ABSVALUE:def 1;
A25: (for q holds ((( FS1 # q ) is  summable & ( 0 ) <= ( Sum ( ( FS1 # q ) ^\ ( n + 1 ) ) )) & ( Sum ( ( FS1 # q ) ^\ ( n + 1 ) ) ) < r4))
proof
let q;
set F = ( FS1 # q );
A26:now
let k;
A27: ( seq . ( ( n + 1 ) + k ) ) = ( ( seq ^\ ( n + 1 ) ) . k ) by NAT_1:def 3;
(( 0 ) <= ( F . ( ( n + 1 ) + k ) ) & ( F . ( ( n + 1 ) + k ) ) <= ( seq . ( ( n + 1 ) + k ) )) by A8,A17;
hence (( 0 ) <= ( ( F ^\ ( n + 1 ) ) . k ) & ( ( F ^\ ( n + 1 ) ) . k ) <= ( ( seq ^\ ( n + 1 ) ) . k )) by A27,NAT_1:def 3;
end;
A28: (for k holds (( 0 ) <= ( F . k ) & ( F . k ) <= ( seq . k ))) by A8,A17;
then F is  summable by A7,SERIES_1:20;
then A29: ( F ^\ ( n + 1 ) ) is  summable by SERIES_1:12;
( seq ^\ ( n + 1 ) ) is  summable by A7,SERIES_1:12;
then ( Sum ( F ^\ ( n + 1 ) ) ) <= ( Sum ( seq ^\ ( n + 1 ) ) ) by A26,SERIES_1:20;
hence thesis by A7,A24,A28,A26,A29,SERIES_1:18,SERIES_1:20,XXREAL_0:2;
end;
A30: ( fR .: ( meet RNG ) ) c= R
proof
let fRq being set;
assume fRq in ( fR .: ( meet RNG ) );
then consider q being set such that A31: q in ( dom fR ) and A32: q in ( meet RNG ) and A33: fRq = ( fR . q ) by FUNCT_1:def 6;
reconsider q as (Point of T) by A31;
set sp = ( FS1 # p );
set sq = ( FS1 # q );
set spn = ( sp ^\ ( n + 1 ) );
set sqn = ( sq ^\ ( n + 1 ) );
set absPSpq = ( Partial_Sums ( abs ( sp - sq ) ) );
(for k holds (k <= n implies ( ( abs ( sp - sq ) ) . k ) <= ( r2 / ( n + 1 ) )))
proof
let k;
assume that
A34: k <= n;
(k = ( 0 ) or k >= 1) by NAT_1:14;
then (k in { ( 0 ) } or k in ( Seg n )) by A34,FINSEQ_1:1,TARSKI:def 1;
then A35: k in ( { ( 0 ) } \/ ( Seg n ) ) by XBOOLE_0:def 3;
then ( FSn . k ) in RNG by FUNCT_2:4;
then A36: q in ( FSn . k ) by A32,SETFAM_1:def 1;
( dom ( sp - sq ) ) = ( NAT ) by FUNCT_2:def 1;
then A37: ( ( sp - sq ) . k ) = ( ( sp . k ) - ( sq . k ) ) by VALUED_1:13;
consider f1 such that A38: ( FS1 . k ) = f1 and f1 is  continuous and (for p holds ( f1 . p ) >= ( 0 )) by A1;
reconsider f1p = ( f1 . p ),f1q = ( f1 . q ) as (Point of ( RealSpace )) by METRIC_1:def 13;
(ex SS being (Subset of T) st (((SS = ( FSn . k ) & SS is  open) & p in SS) & (for f1 holds (( FS1 . k ) = f1 implies (for f1p being (Point of ( RealSpace )) holds (f1p = ( f1 . p ) implies ( f1 .: SS ) c= ( Ball (f1p,( r2 / ( n + 1 ) )) ))))))) by A16,A35;
then A39: ( f1 .: ( FSn . k ) ) c= ( Ball (f1p,( r2 / ( n + 1 ) )) ) by A38;
( dom f1 ) = (the carrier of T) by FUNCT_2:def 1;
then f1q in ( f1 .: ( FSn . k ) ) by A36,FUNCT_1:def 6;
then ( dist (f1p,f1q) ) < ( r2 / ( n + 1 ) ) by A39,METRIC_1:11;
then A40: ( abs ( ( f1 . p ) - ( f1 . q ) ) ) < ( r2 / ( n + 1 ) ) by TOPMETR:11;
( f1 . p ) = ( sp . k ) by A38,SEQFUNC:def 10;
then ( abs ( ( sp . k ) - ( sq . k ) ) ) < ( r2 / ( n + 1 ) ) by A38,A40,SEQFUNC:def 10;
hence thesis by A37,SEQ_1:12;
end;
then A41: ( absPSpq . n ) <= ( ( r2 / ( n + 1 ) ) * ( n + 1 ) ) by CKB16:1;
set PSp = ( Partial_Sums sp );
set PSq = ( Partial_Sums sq );
set PSpq = ( Partial_Sums ( sp - sq ) );
(( PSp - PSq ) = PSpq & ( dom ( PSp - PSq ) ) = ( NAT )) by SEQ_1:1,SERIES_1:6;
then A42: ( abs ( ( PSp . n ) - ( PSq . n ) ) ) = ( abs ( PSpq . n ) ) by VALUED_1:13;
( abs ( PSpq . n ) ) <= ( absPSpq . n ) by CKB17:1;
then ( abs ( ( PSp . n ) - ( PSq . n ) ) ) <= ( ( r2 / ( n + 1 ) ) * ( n + 1 ) ) by A42,A41,XXREAL_0:2;
then A43: ( abs ( ( PSp . n ) - ( PSq . n ) ) ) <= r2 by XCMPLX_1:87;
( 0 ) <= ( Sum spn ) by A25;
then A44: ( abs ( Sum spn ) ) = ( Sum spn ) by ABSVALUE:def 1;
( 0 ) <= ( Sum sqn ) by A25;
then A45: ( abs ( Sum sqn ) ) = ( Sum sqn ) by ABSVALUE:def 1;
reconsider fRq = ( (fR qua  real-valued Function) . q ) as (Point of ( RealSpace )) by METRIC_1:def 13;
A46: ( abs ( ( Sum spn ) - ( Sum sqn ) ) ) <= ( ( abs ( Sum spn ) ) + ( abs ( Sum sqn ) ) ) by COMPLEX1:57;
A47: (fRp = ( Sum sp ) & fRq = ( Sum sq )) by A3;
(( Sum sp ) = ( ( PSp . n ) + ( Sum spn ) ) & ( Sum sq ) = ( ( PSq . n ) + ( Sum sqn ) )) by A25,SERIES_1:15;
then ( abs ( ( fR . p ) - ( fR . q ) ) ) = ( abs ( ( ( PSp . n ) - ( PSq . n ) ) + ( ( Sum spn ) - ( Sum sqn ) ) ) ) by A47;
then A48: ( abs ( ( fR . p ) - ( fR . q ) ) ) <= ( ( abs ( ( PSp . n ) - ( PSq . n ) ) ) + ( abs ( ( Sum spn ) - ( Sum sqn ) ) ) ) by COMPLEX1:56;
(( Sum spn ) < r4 & ( Sum sqn ) < r4) by A25;
then ( ( abs ( Sum spn ) ) + ( abs ( Sum sqn ) ) ) < ( r4 + r4 ) by A44,A45,XREAL_1:8;
then ( abs ( ( Sum spn ) - ( Sum sqn ) ) ) < r2 by A46,XXREAL_0:2;
then ( ( abs ( ( PSp . n ) - ( PSq . n ) ) ) + ( abs ( ( Sum spn ) - ( Sum sqn ) ) ) ) < ( r2 + r2 ) by A43,XREAL_1:8;
then ( abs ( ( fR . p ) - ( fR . q ) ) ) < rn by A48,XXREAL_0:2;
then ( dist (fRp,fRq) ) < rn by TOPMETR:11;
then fRq in ( Ball (fRp,rn) ) by METRIC_1:11;
hence thesis by A5,A33;
end;
now
let Fx being set;
assume Fx in RNG;
then consider x such that A49: x in ( dom FSn ) and A50: ( FSn . x ) = Fx by FUNCT_1:def 3;
(ex SS being (Subset of T) st (((SS = ( FSn . x ) & SS is  open) & p in SS) & (for f1 holds (( FS1 . x ) = f1 implies (for f1p being (Point of ( RealSpace )) holds (f1p = ( f1 . p ) implies ( f1 .: SS ) c= ( Ball (f1p,( r2 / ( n + 1 ) )) ))))))) by A16,A49;
hence p in Fx by A50;
end;
then p in ( meet RNG ) by SETFAM_1:def 1;
hence thesis by A19,A30,TOPS_2:20;
end;
hence fR is_continuous_at p by TMAP_1:43;
end;
then fR is  continuous by TMAP_1:50;
hence thesis by TOPREAL6:74;
end;
