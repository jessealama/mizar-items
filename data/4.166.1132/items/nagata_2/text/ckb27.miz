environ
vocabularies NUMBERS,SUBSET_1,REAL_1,XREAL_0,ORDINAL1,XBOOLE_0,PRE_TOPC,ZFMISC_1,STRUCT_0,FUNCT_1,PSCOMP_1,SEQFUNC,SEQ_1,XXREAL_0,CARD_1,NEWTON,RELAT_1,ARYTM_3,INT_1,NAT_1,ARYTM_1,FUNCT_7,FUNCT_2,TARSKI,METRIC_1,RCOMP_1,MCART_1,SETFAM_1,ORDINAL2,TOPMETR,TMAP_1,SEQ_4,NAGATA_1,XXREAL_2,COMPLEX1,RELAT_2,VALUED_0,PCOMPS_1,PBOOLE,SERIES_1,CARD_3,VALUED_1,SEQ_2,FINSEQ_1,PREPOWER,BINOP_1,SETWISEO,FINSOP_1,ORDINAL4,CARD_5,RLVECT_3,FINSET_1,COH_SP,PARTFUN1,WELLORD1,PCOMPS_2,NATTRA_1,NAGATA_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,SETWISEO,BORSUK_1,RELAT_1,RELAT_2,ORDINAL1,XCMPLX_0,XXREAL_0,XXREAL_2,XREAL_0,FUNCT_1,COMPLEX1,REAL_1,RELSET_1,PARTFUN1,VALUED_0,VALUED_1,SEQ_1,FUNCT_2,FUNCT_3,DOMAIN_1,BINOP_1,PRE_TOPC,NAT_1,NAT_D,CARD_1,NUMBERS,FINSET_1,STRUCT_0,FINSEQ_1,PCOMPS_1,PCOMPS_2,NEWTON,TOPS_2,METRIC_1,PROB_1,SEQFUNC,PREPOWER,TOPMETR,PSCOMP_1,MEASURE6,TMAP_1,NAGATA_1,SEQ_2,SEQ_4,SERIES_1,FINSOP_1,CANTOR_1,WELLORD1,FUNCT_7,CKB2,CKB4,CKB7;
definitions FUNCT_2,TARSKI,TOPS_2,XBOOLE_0,BINOP_1,SUBSET_1,STRUCT_0,PRE_TOPC,XXREAL_2,CKB2,CKB4,CKB7;
theorems NAT_1,NEWTON,FUNCT_2,PCOMPS_1,PCOMPS_2,NAGATA_1,SUBSET_1,METRIC_6,FUNCT_3,FUNCT_1,METRIC_1,XCMPLX_1,ABSVALUE,TOPMETR,TMAP_1,BORSUK_1,XBOOLE_1,TARSKI,SETFAM_1,XBOOLE_0,TOPS_1,TOPS_2,PRE_TOPC,FINSEQ_1,CARD_4,TOPREAL6,ZFMISC_1,BINOP_1,SEQ_2,SEQ_4,SEQ_1,SERIES_1,PREPOWER,SEQFUNC,PARTFUN1,JGRAPH_2,URYSOHN1,FINSEQ_3,FINSEQ_4,FINSOP_1,SETWISEO,PROB_1,URYSOHN3,WELLORD1,WELLORD2,TBSP_1,RELAT_1,RELAT_2,YELLOW_9,FUNCT_7,RSSPACE2,RSSPACE,BHSP_5,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,NAT_D,VALUED_1,XXREAL_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26;
schemes FUNCT_2,NAT_1,SEQFUNC,FRAENKEL,BINOP_1,PCOMPS_2;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,FINSEQ_1,STRUCT_0,TOPS_1,METRIC_1,BORSUK_1,TOPMETR,MEASURE6,TOPREAL6,VALUED_0,VALUED_1,FUNCT_2,BORSUK_4,BORSUK_6,CARD_1,PRE_TOPC,FUNCT_1,PSCOMP_1,CKB23;
constructors SETFAM_1,WELLORD1,FUNCT_3,SETWISEO,REAL_1,SQUARE_1,NAT_1,NAT_D,SEQM_3,PROB_1,FINSOP_1,NEWTON,PREPOWER,SERIES_1,FUNCT_7,TOPS_2,COMPTS_1,TMAP_1,CANTOR_1,PCOMPS_2,MEASURE6,URYSOHN3,NAGATA_1,SEQ_1,BORSUK_4,XXREAL_2,SEQFUNC,SEQ_4,BINOP_2,SEQ_2,RVSUM_1,PSCOMP_1,PCOMPS_1,CKB2,CKB4,CKB7;
requirements BOOLE,SUBSET,NUMERALS,REAL,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve r for Real;
reserve s for Real;
reserve x for set;
reserve T for non  empty TopSpace;
reserve p for (Point of T);
reserve q for (Point of T);
reserve A for (Subset of T);
reserve B for (Subset of T);
theorem
Th21: (for T holds (T is  metrizable implies (ex Un being (FamilySequence of T) st Un is  Basis_sigma_discrete)))
proof
let T;
assume that
A1: T is  metrizable;
consider metr being (Function of [: (the carrier of T),(the carrier of T) :],( REAL )) such that A2: metr is_metric_of (the carrier of T) and A3: ( Family_open_set ( SpaceMetr ((the carrier of T),metr) ) ) = (the topology of T) by A1,PCOMPS_1:def 8;
set bbcT = ( bool ( bool (the carrier of T) ) );
reconsider PM = ( SpaceMetr ((the carrier of T),metr) ) as non  empty MetrSpace by A2,PCOMPS_1:36;
deffunc BALL(set) = { ( Ball (x,( 1 / ( 2 |^ ( In ($1,( NAT )) ) ) )) ) where x is (Point of PM): x is (Point of PM) };
A4: (for k being set holds (k in ( NAT ) implies BALL(k) in ( bool ( bool (the carrier of T) ) )))
proof
let k being set;
assume k in ( NAT );
then reconsider k as (Element of ( NAT ));
BALL(k) c= ( bool (the carrier of T) )
proof
A5: ( In (k,( NAT )) ) = k by FUNCT_7:def 1;
let B being set;
assume B in BALL(k);
then (ex x being (Point of PM) st (B = ( Ball (x,( 1 / ( 2 |^ k ) )) ) & x is (Point of PM))) by A5;
then B in ( Family_open_set PM ) by PCOMPS_1:29;
hence thesis by A3;
end;
hence thesis;
end;
consider FB being (FamilySequence of T) such that A6: (for k being set holds (k in ( NAT ) implies ( FB . k ) = BALL(k))) from FUNCT_2:sch 2(A4);
defpred U[ set,set ]
 means
(ex FS being (FamilySequence of T) st (((($2 = FS & ( Union FS ) is  open) & ( Union FS ) is (Cover of T)) & ( Union FS ) is_finer_than ( FB . $1 )) & FS is  sigma_discrete));
set TPM = ( TopSpaceMetr PM );
A7: TPM = TopStruct (# (the carrier of PM),( Family_open_set PM ) #) by PCOMPS_1:def 5;
then A8: ( [#] T ) = ( [#] TPM ) by A2,PCOMPS_2:4;
A9: (for n being (Element of ( NAT )) holds (ex Un being (Element of ( Funcs (( NAT ),bbcT) )) st U[ n,Un ]))
proof
let n being (Element of ( NAT ));
A10: n = ( In (n,( NAT )) ) by FUNCT_7:def 1;
now
let U being (Subset of T);
assume U in ( FB . n );
then U in BALL(n) by A6;
then (ex x being (Point of PM) st (U = ( Ball (x,( 1 / ( 2 |^ n ) )) ) & x is (Point of PM))) by A10;
then U in (the topology of T) by A3,PCOMPS_1:29;
hence U is  open by PRE_TOPC:def 2;
end;
then A11: ( FB . n ) is  open by TOPS_2:def 1;
A12: ( [#] TPM ) c= ( union ( FB . n ) )
proof
let x;
assume x in ( [#] TPM );
then reconsider x9 = x as (Element of PM) by A7;
( 2 |^ n ) > ( 0 ) by NEWTON:83;
then A13: x9 in ( Ball (x9,( 1 / ( 2 |^ n ) )) ) by TBSP_1:11,XREAL_1:139;
( Ball (x9,( 1 / ( 2 |^ n ) )) ) in BALL(n) by A10;
then ( Ball (x9,( 1 / ( 2 |^ n ) )) ) in ( FB . n ) by A6;
hence thesis by A13,TARSKI:def 4;
end;
( union ( FB . n ) ) c= ( [#] TPM )
proof
given x such that
A14: x in ( union ( FB . n ) )
and
A15: (not x in ( [#] TPM ));

consider A being set such that A16: x in A and A17: A in ( FB . n ) by A14,TARSKI:def 4;
A in BALL(n) by A6,A17;
then (ex y being (Point of PM) st (A = ( Ball (y,( 1 / ( 2 |^ n ) )) ) & y is (Point of PM))) by A10;
hence thesis by A7,A15,A16;
end;
then ( [#] TPM ) = ( union ( FB . n ) ) by A12,XBOOLE_0:def 10;
then ( FB . n ) is (Cover of T) by A8,SETFAM_1:45;
then consider Un being (FamilySequence of T) such that A18: (((( Union Un ) is  open & ( Union Un ) is (Cover of T)) & ( Union Un ) is_finer_than ( FB . n )) & Un is  sigma_discrete) by A1,A11,CKB26:1;
Un in ( Funcs (( NAT ),bbcT) ) by FUNCT_2:8;
hence thesis by A18;
end;
consider Un being (Function of ( NAT ),( Funcs (( NAT ),bbcT) )) such that A19: (for n being (Element of ( NAT )) holds U[ n,( Un . n ) ]) from FUNCT_2:sch 3(A9);
defpred X[ set,set ]
 means
(for n holds (for m holds (( ( PairFunc ) . [ n,m ] ) = $1 implies (for Unn being (FamilySequence of T) holds (Unn = ( Un . n ) implies $2 = ( Unn . m ))))));
A20: (for k being set holds (k in ( NAT ) implies (ex Ux being set st (Ux in bbcT & X[ k,Ux ]))))
proof
let k being set;
assume k in ( NAT );
then reconsider k9 = k as (Element of ( NAT ));
( NAT ) = ( rng ( PairFunc ) ) by CKB3:1,FUNCT_2:def 3;
then consider nm being set such that A21: nm in ( dom ( PairFunc ) ) and A22: k9 = ( ( PairFunc ) . nm ) by FUNCT_1:def 3;
consider n,m being set such that A23: n in ( NAT ) and A24: m in ( NAT ) and A25: nm = [ n,m ] by A21,ZFMISC_1:def 2;
reconsider Unn = ( Un . n ) as (FamilySequence of T) by A23,FUNCT_2:5,FUNCT_2:66;
take Ux = ( Unn . m );
( dom Unn ) = ( NAT ) by PARTFUN1:def 2;
then m in ( dom Unn ) by A24;
then Ux in ( rng Unn ) by FUNCT_1:3;
hence Ux in bbcT;
now
let n1 being (Element of ( NAT ));
let m1 being (Element of ( NAT ));
assume that
A26: ( ( PairFunc ) . [ n1,m1 ] ) = k;
now
let Unn being (FamilySequence of T);
assume that
A27: Unn = ( Un . n1 );
A28: [ n,m ] = [ n1,m1 ] by A21,A22,A25,A26,CKB3:1,FUNCT_2:19;
then n1 = n by ZFMISC_1:27;
hence Ux = ( Unn . m1 ) by A27,A28,ZFMISC_1:27;
end;
hence (for Unn being (FamilySequence of T) holds (Unn = ( Un . n1 ) implies Ux = ( Unn . m1 )));
end;
hence thesis;
end;
consider UX being (Function of ( NAT ),bbcT) such that A29: (for k being set holds (k in ( NAT ) implies X[ k,( UX . k ) ])) from FUNCT_2:sch 1(A20);
A30: (for A holds (A is  open implies (for p holds (p in A implies (ex B st ((B in ( Union UX ) & p in B) & B c= A))))))
proof
let A;
assume A is  open;
then A31: A in ( Family_open_set PM ) by A3,PRE_TOPC:def 2;
let p;
assume that
A32: p in A;
reconsider p as (Element of PM) by A32,A31;
consider r such that A33: r > ( 0 ) and A34: ( Ball (p,r) ) c= A by A32,A31,PCOMPS_1:def 4;
consider n such that A35: ( 1 / ( 2 |^ n ) ) <= r by A33,PREPOWER:92;
consider Unn1 being (FamilySequence of T) such that A36: ( Un . ( n + 1 ) ) = Unn1 and ( Union Unn1 ) is  open and A37: ( Union Unn1 ) is (Cover of T) and A38: ( Union Unn1 ) is_finer_than ( FB . ( n + 1 ) ) and Unn1 is  sigma_discrete by A19;
( union ( Union Unn1 ) ) = ( [#] T ) by A37,SETFAM_1:45;
then consider B being set such that A39: p in B and A40: B in ( Union Unn1 ) by TARSKI:def 4;
reconsider B as (Subset of PM) by A2,A40,PCOMPS_2:4;
consider B1 being set such that A41: B1 in ( FB . ( n + 1 ) ) and A42: B c= B1 by A38,A40,SETFAM_1:def 2;
consider k such that A43: B in ( Unn1 . k ) by A40,PROB_1:12;
(( n + 1 ) = ( In (( n + 1 ),( NAT )) ) & B1 in BALL(( n + 1 ))) by A6,A41,FUNCT_7:def 1;
then consider q being (Point of PM) such that A44: B1 = ( Ball (q,( 1 / ( 2 |^ ( n + 1 ) ) )) ) and q is (Element of PM);
now
let s being (Element of PM);
assume s in B;
then A45: ( dist (q,s) ) < ( 1 / ( 2 |^ ( n + 1 ) ) ) by A42,A44,METRIC_1:11;
( dist (q,p) ) < ( 1 / ( 2 |^ ( n + 1 ) ) ) by A39,A42,A44,METRIC_1:11;
then (( dist (p,s) ) <= ( ( dist (q,p) ) + ( dist (q,s) ) ) & ( ( dist (q,p) ) + ( dist (q,s) ) ) < ( ( 1 / ( 2 |^ ( n + 1 ) ) ) + ( 1 / ( 2 |^ ( n + 1 ) ) ) )) by A45,METRIC_1:4,XREAL_1:8;
then ( dist (p,s) ) < ( 2 * ( 1 / ( 2 |^ ( n + 1 ) ) ) ) by XXREAL_0:2;
then ( dist (p,s) ) < ( ( 1 / ( ( 2 |^ n ) * 2 ) ) * 2 ) by NEWTON:6;
then ( dist (p,s) ) < ( 1 / ( 2 |^ n ) ) by XCMPLX_1:92;
then ( dist (p,s) ) < r by A35,XXREAL_0:2;
hence s in ( Ball (p,r) ) by METRIC_1:11;
end;
then A46: B c= ( Ball (p,r) ) by SUBSET_1:2;
( UX . ( ( PairFunc ) . [ ( n + 1 ),k ] ) ) = ( Unn1 . k ) by A29,A36;
then B in ( Union UX ) by A43,PROB_1:12;
hence thesis by A34,A39,A46,XBOOLE_1:1;
end;
(for k holds ( UX . k ) is  discrete)
proof
let k;
( NAT ) = ( rng ( PairFunc ) ) by CKB3:1,FUNCT_2:def 3;
then consider nm being set such that A47: nm in ( dom ( PairFunc ) ) and A48: k = ( ( PairFunc ) . nm ) by FUNCT_1:def 3;
consider n,m being set such that A49: n in ( NAT ) and A50: m in ( NAT ) and A51: nm = [ n,m ] by A47,ZFMISC_1:def 2;
consider FS being (FamilySequence of T) such that A52: ( Un . n ) = FS and ( Union FS ) is  open and ( Union FS ) is (Cover of T) and ( Union FS ) is_finer_than ( FB . n ) and A53: FS is  sigma_discrete by A19,A49;
( dom FS ) = ( NAT ) by PARTFUN1:def 2;
then m in ( dom FS ) by A50;
then ( FS . m ) in ( rng FS ) by FUNCT_1:3;
then ( FS . m ) in bbcT;
then reconsider FSm = ( FS . m ) as (Subset-Family of T);
FSm is  discrete by A50,A53,NAGATA_1:def 2;
hence thesis by A29,A48,A49,A50,A51,A52;
end;
then A54: UX is  sigma_discrete by NAGATA_1:def 2;
( Union UX ) c= (the topology of T)
proof
let UXk being set;
assume UXk in ( Union UX );
then consider k such that A55: UXk in ( UX . k ) by PROB_1:12;
reconsider UXk9 = UXk as (Subset of T) by A55;
( NAT ) = ( rng ( PairFunc ) ) by CKB3:1,FUNCT_2:def 3;
then consider nm being set such that A56: nm in ( dom ( PairFunc ) ) and A57: k = ( ( PairFunc ) . nm ) by FUNCT_1:def 3;
consider n,m being set such that A58: n in ( NAT ) and A59: m in ( NAT ) and A60: nm = [ n,m ] by A56,ZFMISC_1:def 2;
reconsider Unn = ( Un . n ) as (FamilySequence of T) by A58,FUNCT_2:5,FUNCT_2:66;
UXk in ( Unn . m ) by A29,A55,A57,A58,A59,A60;
then A61: UXk in ( Union Unn ) by A59,PROB_1:12;
(ex FS being (FamilySequence of T) st ((((( Un . n ) = FS & ( Union FS ) is  open) & ( Union FS ) is (Cover of T)) & ( Union FS ) is_finer_than ( FB . n )) & FS is  sigma_discrete)) by A19,A58;
then UXk9 is  open by A61,TOPS_2:def 1;
hence thesis by PRE_TOPC:def 2;
end;
then ( Union UX ) is (Basis of T) by A30,YELLOW_9:32;
then UX is  Basis_sigma_discrete by A54,NAGATA_1:def 5;
hence thesis;
end;
