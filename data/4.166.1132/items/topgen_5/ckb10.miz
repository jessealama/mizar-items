environ
vocabularies NUMBERS,SUBSET_1,XXREAL_0,XREAL_0,ORDINAL1,FUNCT_1,PARTFUN1,FUNCT_4,RELAT_1,XBOOLE_0,TARSKI,FUNCT_6,FUNCOP_1,FUNCT_2,FUNCT_5,ZFMISC_1,MCART_1,CARD_3,FINSEQ_1,CARD_1,CARD_2,COMPLEX1,EUCLID,SQUARE_1,ARYTM_3,PRE_TOPC,RCOMP_1,ORDINAL2,STRUCT_0,METRIC_1,ARYTM_1,SUPINF_2,REAL_1,TOPGEN_3,TOPGEN_2,CANTOR_1,PBOOLE,SETFAM_1,RAT_1,TOPS_1,TOPGEN_1,XXREAL_1,RLVECT_3,BORSUK_1,CARD_5,TOPMETR,TOPS_2,VALUED_1,FINSET_1,LIMFUNC1,TOPGEN_5;
notations TARSKI,XBOOLE_0,ZFMISC_1,RELAT_1,FINSET_1,SUBSET_1,MCART_1,SETFAM_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,BINOP_1,FINSEQ_1,FUNCT_4,FUNCOP_1,PBOOLE,ORDINAL1,CARD_1,CARD_2,CARD_3,FUNCT_5,FUNCT_6,NUMBERS,XCMPLX_0,SQUARE_1,COMPLEX1,REAL_1,XREAL_0,XXREAL_2,RAT_1,RCOMP_1,LIMFUNC1,DOMAIN_1,STRUCT_0,PRE_TOPC,TOPS_1,TOPS_2,RLVECT_1,EUCLID,CANTOR_1,TOPMETR,TOPREAL9,TOPGEN_1,TOPGEN_2,TOPGEN_3,XXREAL_0;
definitions RELAT_1,TARSKI,XBOOLE_0,FUNCT_1,PARTFUN1,FUNCOP_1,WELLORD2,PBOOLE,PRE_TOPC,TOPS_3,URYSOHN1,TOPGEN_1,FUNCT_6,BINOP_1,SQUARE_1,SUBSET_1,STRUCT_0,LIMFUNC1,PROB_1,COMPTS_1;
theorems TOPS_3,TARSKI,XBOOLE_0,XBOOLE_1,ZFMISC_1,FUNCT_1,EUCLID,PBOOLE,EUCLID_2,TOPREAL9,TOPGEN_3,SETWISEO,XREAL_1,XREAL_0,XCMPLX_1,TOPRNS_1,TOPREAL6,ABSVALUE,SPPOL_2,FINSEQ_1,COMPLEX1,JGRAPH_1,YELLOW_9,NUMBERS,CARD_5,TOPGEN_2,SUBSET_1,YELLOW_8,TOPS_1,PRE_TOPC,TOPGEN_1,SQUARE_1,RAT_1,CARD_1,CARD_2,CARD_3,CARD_4,FINSEQ_3,MCART_1,FUNCT_6,BORSUK_1,TOPALG_1,TOPS_2,FUNCT_2,TIETZE,JGRAPH_5,URYSOHN1,TOPMETR,BOOLMARK,FUNCOP_1,FUNCT_4,RELAT_1,RELSET_1,CANTOR_1,PARTFUN1,SETFAM_1,JORDAN6,YELLOW12,FUNCT_7,DICKSON,FUNCT_5,FRECHET,TSP_1,JORDAN,XXREAL_0,TSEP_1,XXREAL_1,XXREAL_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8;
schemes SUBSET_1,FUNCT_1,FRAENKEL,PRE_CIRC,FUNCT_5,CLASSES1,FINSET_1,FUNCT_2,CKB9;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,FUNCT_2,FUNCOP_1,FINSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,SQUARE_1,RAT_1,CARD_1,MEMBERED,FINSEQ_1,ASYMPT_0,STRUCT_0,PRE_TOPC,TOPS_1,BORSUK_1,MONOID_0,EUCLID,TOPMETR,TOPGRP_1,BORSUK_4,BORSUK_6,TOPGEN_1,VALUED_0,XXREAL_2,RELSET_1;
constructors SETFAM_1,WELLORD2,FUNCT_4,REAL_1,SQUARE_1,COMPLEX1,CARD_2,PROB_1,RCOMP_1,LIMFUNC1,FUNCT_6,TOPS_1,TSP_1,MONOID_0,BORSUK_4,TOPGEN_2,TOPREAL9,TOPGEN_1,TOPGEN_3,XXREAL_2,BINOP_2;
requirements BOOLE,SUBSET,NUMERALS,ARITHM,REAL;
begin
reserve u for set;
reserve v for set;
scheme SCH2 { P,Q[set],A,B,C() -> non empty set,F1,F2,F3(set) -> set } : (ex f being (Function of C(),B()) st (for a being (Element of A()) holds (a in C() implies (((P[ a ] implies ( f . a ) = F1(a)) & (((not P[ a ]) & Q[ a ]) implies ( f . a ) = F2(a))) & (((not P[ a ]) & (not Q[ a ])) implies ( f . a ) = F3(a))))))
provided
A1: C() c= A()
and
A2: (for a being (Element of A()) holds (a in C() implies (((P[ a ] implies F1(a) in B()) & (((not P[ a ]) & Q[ a ]) implies F2(a) in B())) & (((not P[ a ]) & (not Q[ a ])) implies F3(a) in B()))))
proof
set D = { a where a is (Element of C()): (P[ a ] or Q[ a ]) };
per cases ;
suppose A3: D = ( {} );

consider f being Function such that A4: (( dom f ) = C() & (for u holds (u in C() implies ( f . u ) = F3(u)))) from FUNCT_1:sch 3;
( rng f ) c= B()
proof
let v;
assume v in ( rng f );
then consider u such that A5: u in ( dom f ) and A6: v = ( f . u ) by FUNCT_1:def 3;
A7: v = F3(u) by A4,A5,A6;
A8: (not u in D) by A3;
then A9: (not Q[ u ]) by A4,A5;
(not P[ u ]) by A8,A4,A5;
hence thesis by A9,A7,A1,A2,A4,A5;
end;
then reconsider f as (Function of C(),B()) by A4,FUNCT_2:2;
take f;
let a being (Element of A());
assume A10: a in C();
(not a in D) by A3;
hence thesis by A4,A10;
end;
suppose D <> ( {} );

then reconsider D as non empty set;
defpred PQ[ set ]
 means
(P[ $1 ] or Q[ $1 ]);
A11: (for a being set holds (a in D implies ((P[ a ] implies F1(a) in B()) & ((not P[ a ]) implies F2(a) in B()))))
proof
let a being set;
assume a in D;
then A12: (ex b being (Element of C()) st (a = b & (P[ b ] or Q[ b ])));
then a in C();
hence thesis by A12,A1,A2;
end;
consider g being (Function of D,B()) such that A13: (for x being set holds (x in D implies ((P[ x ] implies ( g . x ) = F1(x)) & ((not P[ x ]) implies ( g . x ) = F2(x))))) from FUNCT_2:sch 5(A11);
deffunc F12(set) = ( g . $1 );
A14: (for a being set holds (a in C() implies ((PQ[ a ] implies F12(a) in B()) & ((not PQ[ a ]) implies F3(a) in B()))))
proof
let a being set;
assume A15: a in C();
hereby
assume PQ[ a ];
then A16: a in D by A15;
then A17: ((not P[ a ]) implies F2(a) in B()) by A11;
(P[ a ] implies F1(a) in B()) by A16,A11;
hence F12(a) in B() by A17,A16,A13;
end;
thus thesis by A1,A2,A15;
end;
consider f being (Function of C(),B()) such that A18: (for x being set holds (x in C() implies ((PQ[ x ] implies ( f . x ) = F12(x)) & ((not PQ[ x ]) implies ( f . x ) = F3(x))))) from FUNCT_2:sch 5(A14);
take f;
let a being (Element of A());
assume A19: a in C();
then (PQ[ a ] implies (( f . a ) = ( g . a ) & a in D)) by A18;
hence ((P[ a ] implies ( f . a ) = F1(a)) & (((not P[ a ]) & Q[ a ]) implies ( f . a ) = F2(a))) by A13;
thus thesis by A18,A19;
end;
end;
