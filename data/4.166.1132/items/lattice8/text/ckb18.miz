environ
vocabularies NUMBERS,ORDERS_2,XBOOLE_0,STRUCT_0,EQREL_1,SUBSET_1,FINSEQ_1,LATTICE5,LATTICES,WAYBEL_0,ZFMISC_1,GROUP_6,FUNCT_1,RELAT_1,XXREAL_0,FINSET_1,ABIAN,CARD_1,ARYTM_3,CAT_1,YELLOW_0,ORDINAL2,ORDINAL1,TARSKI,WELLORD1,SEQM_3,LATTICE3,WAYBEL_1,MCART_1,VALUED_0,RELAT_2,PARTFUN1,FUNCOP_1,FUNCT_6,NAT_1,FUNCT_2,LATTICE8;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_6,NUMBERS,NAT_1,ORDINAL1,ORDINAL2,MCART_1,DOMAIN_1,PARTFUN1,FUNCOP_1,STRUCT_0,ORDERS_2,EQREL_1,FINSEQ_1,LATTICE3,BINOP_1,YELLOW_0,YELLOW_2,LATTICE5,YELLOW11,WAYBEL_1,WAYBEL_0,ABIAN,XXREAL_0,CKB1,CKB2,CKB16;
definitions TARSKI,LATTICE3,FUNCOP_1,WAYBEL_0,YELLOW_0,YELLOW11,LATTICE5,XBOOLE_0,BINOP_1,YELLOW_2,RELSET_1,CKB1,CKB2,CKB16;
theorems EQREL_1,RELAT_1,RELAT_2,FINSEQ_1,FINSEQ_2,ORDERS_2,TARSKI,ORDINAL1,ORDINAL3,TREES_2,PARTFUN1,GRFUNC_1,FUNCT_6,MCART_1,NAT_1,BINOP_1,ZFMISC_1,FUNCT_1,FUNCT_2,LATTICE3,YELLOW_0,YELLOW_3,YELLOW_5,WAYBEL_0,WAYBEL_1,WAYBEL_6,RELSET_1,LATTICE5,YELLOW11,WAYBEL13,ORDERS_3,TEX_1,SYSREL,XBOOLE_0,XBOOLE_1,REALSET1,ORDERS_1,STRUCT_0,CKB1,CKB2,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16;
schemes RECDEF_1,ORDINAL2,NAT_1,FINSEQ_1,BINOP_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCOP_1,XREAL_0,INT_1,CARD_1,FINSEQ_1,EQREL_1,REALSET1,ABIAN,STRUCT_0,LATTICE3,YELLOW_0,YELLOW_2,WAYBEL_1,WAYBEL10,LATTICE5,YELLOW11,WAYBEL21,LATTICE7,ZFMISC_1,FUNCT_1,CKB3,CKB6,CKB17;
constructors ORDINAL2,FUNCT_6,RFUNCT_3,ABIAN,REALSET2,ORDERS_3,WAYBEL_1,LATTICE5,YELLOW11,RELSET_1,CKB1,CKB2,CKB16;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
definition
let A being non  empty set;
let L being  lower-bounded LATTICE;
let d being (BiFunction of A,L);
let q being (Element of [: A,A,(the carrier of L),(the carrier of L) :]);
func new_bi_fun2 (d,q) -> (BiFunction of ( new_set2 A ),L) means 
:Def5: ((((((for u,v being (Element of A) holds ( it . (u,v) ) = ( d . (u,v) )) & ( it . ({ A },{ A }) ) = ( Bottom L )) & ( it . ({ { A } },{ { A } }) ) = ( Bottom L )) & ( it . ({ A },{ { A } }) ) = ( ( ( d . (( q `1 ),( q `2 )) ) "\/" ( q `3 ) ) "/\" ( q `4 ) )) & ( it . ({ { A } },{ A }) ) = ( ( ( d . (( q `1 ),( q `2 )) ) "\/" ( q `3 ) ) "/\" ( q `4 ) )) & (for u being (Element of A) holds (((( it . (u,{ A }) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) ) & ( it . ({ A },u) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) )) & ( it . (u,{ { A } }) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `3 ) )) & ( it . ({ { A } },u) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `3 ) ))));
existence
proof
reconsider a = ( q `3 ),b = ( q `4 ) as (Element of L);
set x = ( q `1 );
set y = ( q `2 );
defpred X[ (Element of ( new_set2 A )),(Element of ( new_set2 A )),set ]
 means
(((((((($1 in A & $2 in A) implies $3 = ( d . ($1,$2) )) & ((($1 = { A } & $2 = { { A } }) or ($2 = { A } & $1 = { { A } })) implies $3 = ( ( ( d . (x,y) ) "\/" a ) "/\" b ))) & ((($1 = { A } or $1 = { { A } }) & $2 = $1) implies $3 = ( Bottom L ))) & (($1 in A & $2 = { A }) implies (ex p9 being (Element of A) st (p9 = $1 & $3 = ( ( d . (p9,x) ) "\/" a ))))) & (($1 in A & $2 = { { A } }) implies (ex p9 being (Element of A) st (p9 = $1 & $3 = ( ( d . (p9,y) ) "\/" a ))))) & (($2 in A & $1 = { A }) implies (ex q9 being (Element of A) st (q9 = $2 & $3 = ( ( d . (q9,x) ) "\/" a ))))) & (($2 in A & $1 = { { A } }) implies (ex q9 being (Element of A) st (q9 = $2 & $3 = ( ( d . (q9,y) ) "\/" a )))));
{ { A } } in { { A },{ { A } } } by TARSKI:def 2;
then A1: { { A } } in ( new_set2 A ) by XBOOLE_0:def 3;
A2: (for p,q being (Element of ( new_set2 A )) holds (ex r being (Element of L) st X[ p,q,r ]))
proof
let p being (Element of ( new_set2 A ));
let q being (Element of ( new_set2 A ));
A3: (p in A or p in { { A },{ { A } } }) by XBOOLE_0:def 3;
A4: (q in A or q in { { A },{ { A } } }) by XBOOLE_0:def 3;
A5: (((p = { A } or p = { { A } }) & p = q) iff ((p = { A } & q = { A }) or (p = { { A } } & q = { { A } })));
A6: (not { A } in A) by TARSKI:def 1;
A7: { A } <> { { A } }
proof
assume { A } = { { A } };
then { A } in { A } by TARSKI:def 1;
hence contradiction;
end;
A8: (not { { A } } in A)
proof
A9: (A in { A } & { A } in { { A } }) by TARSKI:def 1;
assume { { A } } in A;
hence contradiction by A9,ORDINAL1:1;
end;
per cases  by A3,A4,A5,TARSKI:def 2;
suppose (p in A & q in A);

then reconsider p9 = p,q9 = q as (Element of A);
take ( d . (p9,q9) );
thus thesis by A6,A8;
end;
suppose A10: ((p = { A } & q = { { A } }) or (q = { A } & p = { { A } }));

take ( ( ( d . (x,y) ) "\/" a ) "/\" b );
thus thesis by A7,A8,A10,TARSKI:def 1;
end;
suppose A11: ((p = { A } or p = { { A } }) & q = p);

take ( Bottom L );
thus thesis by A7,A8,A11,TARSKI:def 1;
end;
suppose A12: (p in A & q = { A });

then reconsider p9 = p as (Element of A);
take ( ( d . (p9,x) ) "\/" a );
thus thesis by A7,A8,A12,TARSKI:def 1;
end;
suppose A13: (p in A & q = { { A } });

then reconsider p9 = p as (Element of A);
take ( ( d . (p9,y) ) "\/" a );
thus thesis by A7,A8,A13,TARSKI:def 1;
end;
suppose A14: (q in A & p = { A });

then reconsider q9 = q as (Element of A);
take ( ( d . (q9,x) ) "\/" a );
thus thesis by A7,A8,A14,TARSKI:def 1;
end;
suppose A15: (q in A & p = { { A } });

then reconsider q9 = q as (Element of A);
take ( ( d . (q9,y) ) "\/" a );
thus thesis by A7,A8,A15,TARSKI:def 1;
end;
end;
consider f being (Function of [: ( new_set2 A ),( new_set2 A ) :],(the carrier of L)) such that A16: (for p,q being (Element of ( new_set2 A )) holds X[ p,q,( f . (p,q) ) ]) from BINOP_1:sch 3(A2);
reconsider f as (BiFunction of ( new_set2 A ),L);
{ A } in { { A },{ { A } } } by TARSKI:def 2;
then A17: { A } in ( new_set2 A ) by XBOOLE_0:def 3;
A18: (for u being (Element of A) holds (( f . ({ A },u) ) = ( ( d . (u,x) ) "\/" a ) & ( f . ({ { A } },u) ) = ( ( d . (u,y) ) "\/" a )))
proof
let u being (Element of A);
reconsider u9 = u as (Element of ( new_set2 A )) by XBOOLE_0:def 3;
(ex u1 being (Element of A) st (u1 = u9 & ( f . ({ A },u9) ) = ( ( d . (u1,x) ) "\/" a ))) by A17,A16;
hence ( f . ({ A },u) ) = ( ( d . (u,x) ) "\/" a );
(ex u2 being (Element of A) st (u2 = u9 & ( f . ({ { A } },u9) ) = ( ( d . (u2,y) ) "\/" a ))) by A1,A16;
hence thesis;
end;
take f;
A19: (for u,v being (Element of A) holds ( f . (u,v) ) = ( d . (u,v) ))
proof
let u being (Element of A);
let v being (Element of A);
reconsider u9 = u,v9 = v as (Element of ( new_set2 A )) by XBOOLE_0:def 3;
thus ( f . (u,v) ) = ( f . (u9,v9) )
.= ( d . (u,v) ) by A16;
end;
(for u being (Element of A) holds (( f . (u,{ A }) ) = ( ( d . (u,x) ) "\/" a ) & ( f . (u,{ { A } }) ) = ( ( d . (u,y) ) "\/" a )))
proof
let u being (Element of A);
reconsider u9 = u as (Element of ( new_set2 A )) by XBOOLE_0:def 3;
(ex u1 being (Element of A) st (u1 = u9 & ( f . (u9,{ A }) ) = ( ( d . (u1,x) ) "\/" a ))) by A17,A16;
hence ( f . (u,{ A }) ) = ( ( d . (u,x) ) "\/" a );
(ex u2 being (Element of A) st (u2 = u9 & ( f . (u9,{ { A } }) ) = ( ( d . (u2,y) ) "\/" a ))) by A1,A16;
hence thesis;
end;
hence thesis by A17,A1,A16,A19,A18;
end;
uniqueness
proof
set x = ( q `1 );
set y = ( q `2 );
set a = ( q `3 );
let f1 being (BiFunction of ( new_set2 A ),L);
let f2 being (BiFunction of ( new_set2 A ),L);
assume that
A20: (for u,v being (Element of A) holds ( f1 . (u,v) ) = ( d . (u,v) ))
and
A21: ( f1 . ({ A },{ A }) ) = ( Bottom L )
and
A22: ( f1 . ({ { A } },{ { A } }) ) = ( Bottom L )
and
A23: ( f1 . ({ A },{ { A } }) ) = ( ( ( d . (( q `1 ),( q `2 )) ) "\/" ( q `3 ) ) "/\" ( q `4 ) )
and
A24: ( f1 . ({ { A } },{ A }) ) = ( ( ( d . (( q `1 ),( q `2 )) ) "\/" ( q `3 ) ) "/\" ( q `4 ) )
and
A25: (for u being (Element of A) holds (((( f1 . (u,{ A }) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) ) & ( f1 . ({ A },u) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) )) & ( f1 . (u,{ { A } }) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `3 ) )) & ( f1 . ({ { A } },u) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `3 ) )))
and
A26: (for u,v being (Element of A) holds ( f2 . (u,v) ) = ( d . (u,v) ))
and
A27: ( f2 . ({ A },{ A }) ) = ( Bottom L )
and
A28: ( f2 . ({ { A } },{ { A } }) ) = ( Bottom L )
and
A29: ( f2 . ({ A },{ { A } }) ) = ( ( ( d . (( q `1 ),( q `2 )) ) "\/" ( q `3 ) ) "/\" ( q `4 ) )
and
A30: ( f2 . ({ { A } },{ A }) ) = ( ( ( d . (( q `1 ),( q `2 )) ) "\/" ( q `3 ) ) "/\" ( q `4 ) )
and
A31: (for u being (Element of A) holds (((( f2 . (u,{ A }) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) ) & ( f2 . ({ A },u) ) = ( ( d . (u,( q `1 )) ) "\/" ( q `3 ) )) & ( f2 . (u,{ { A } }) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `3 ) )) & ( f2 . ({ { A } },u) ) = ( ( d . (u,( q `2 )) ) "\/" ( q `3 ) )));
now
let p being (Element of ( new_set2 A ));
let q being (Element of ( new_set2 A ));
A32: (p in A or p in { { A },{ { A } } }) by XBOOLE_0:def 3;
A33: (q in A or q in { { A },{ { A } } }) by XBOOLE_0:def 3;
per cases  by A32,A33,TARSKI:def 2;
suppose A34: (p in A & q in A);

hence ( f1 . (p,q) ) = ( d . (p,q) ) by A20
.= ( f2 . (p,q) ) by A26,A34;
end;
suppose A35: (p in A & q = { A });

then reconsider p9 = p as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (p9,x) ) "\/" a ) by A25,A35
.= ( f2 . (p,q) ) by A31,A35;
end;
suppose A36: (p in A & q = { { A } });

then reconsider p9 = p as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (p9,y) ) "\/" a ) by A25,A36
.= ( f2 . (p,q) ) by A31,A36;
end;
suppose A37: (p = { A } & q in A);

then reconsider q9 = q as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (q9,x) ) "\/" a ) by A25,A37
.= ( f2 . (p,q) ) by A31,A37;
end;
suppose (p = { A } & q = { A });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A21,A27;
end;
suppose (p = { A } & q = { { A } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A23,A29;
end;
suppose A38: (p = { { A } } & q in A);

then reconsider q9 = q as (Element of A);
thus ( f1 . (p,q) ) = ( ( d . (q9,y) ) "\/" a ) by A25,A38
.= ( f2 . (p,q) ) by A31,A38;
end;
suppose (p = { { A } } & q = { A });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A24,A30;
end;
suppose (p = { { A } } & q = { { A } });

hence ( f1 . (p,q) ) = ( f2 . (p,q) ) by A22,A28;
end;
end;
hence f1 = f2 by BINOP_1:2;
end;
end;
