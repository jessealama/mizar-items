environ
vocabularies NUMBERS,ORDERS_2,XBOOLE_0,STRUCT_0,EQREL_1,SUBSET_1,FINSEQ_1,LATTICE5,LATTICES,WAYBEL_0,ZFMISC_1,GROUP_6,FUNCT_1,RELAT_1,XXREAL_0,FINSET_1,ABIAN,CARD_1,ARYTM_3,CAT_1,YELLOW_0,ORDINAL2,ORDINAL1,TARSKI,WELLORD1,SEQM_3,LATTICE3,WAYBEL_1,MCART_1,VALUED_0,RELAT_2,PARTFUN1,FUNCOP_1,FUNCT_6,NAT_1,FUNCT_2,LATTICE8;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_6,NUMBERS,NAT_1,ORDINAL1,ORDINAL2,MCART_1,DOMAIN_1,PARTFUN1,FUNCOP_1,STRUCT_0,ORDERS_2,EQREL_1,FINSEQ_1,LATTICE3,BINOP_1,YELLOW_0,YELLOW_2,LATTICE5,YELLOW11,WAYBEL_1,WAYBEL_0,ABIAN,XXREAL_0,CKB1,CKB2;
definitions TARSKI,LATTICE3,FUNCOP_1,WAYBEL_0,YELLOW_0,YELLOW11,LATTICE5,XBOOLE_0,BINOP_1,YELLOW_2,RELSET_1,CKB1,CKB2;
theorems EQREL_1,RELAT_1,RELAT_2,FINSEQ_1,FINSEQ_2,ORDERS_2,TARSKI,ORDINAL1,ORDINAL3,TREES_2,PARTFUN1,GRFUNC_1,FUNCT_6,MCART_1,NAT_1,BINOP_1,ZFMISC_1,FUNCT_1,FUNCT_2,LATTICE3,YELLOW_0,YELLOW_3,YELLOW_5,WAYBEL_0,WAYBEL_1,WAYBEL_6,RELSET_1,LATTICE5,YELLOW11,WAYBEL13,ORDERS_3,TEX_1,SYSREL,XBOOLE_0,XBOOLE_1,REALSET1,ORDERS_1,STRUCT_0,CKB1,CKB2,CKB4,CKB5;
schemes RECDEF_1,ORDINAL2,NAT_1,FINSEQ_1,BINOP_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCOP_1,XREAL_0,INT_1,CARD_1,FINSEQ_1,EQREL_1,REALSET1,ABIAN,STRUCT_0,LATTICE3,YELLOW_0,YELLOW_2,WAYBEL_1,WAYBEL10,LATTICE5,YELLOW11,WAYBEL21,LATTICE7,ZFMISC_1,FUNCT_1,CKB3;
constructors ORDINAL2,FUNCT_6,RFUNCT_3,ABIAN,REALSET2,ORDERS_3,WAYBEL_1,LATTICE5,YELLOW11,RELSET_1,CKB1,CKB2;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
registration
let A being non  trivial set;
cluster non  trivial  finitely_typed  full for non  empty non  empty (Sublattice of ( EqRelLATT A ));
existence
proof
reconsider e1 = ( nabla A ),e2 = ( id A ) as (Element of ( EqRelLATT A )) by LATTICE5:4;
set a = the (Element of A);
set b = the (Element of ( A \ { a } ));
set Y = ( subrelstr { e1,e2 } );
A1: (the carrier of Y) = { e1,e2 } by YELLOW_0:def 15;
e1 = [: A,A :] by EQREL_1:def 1;
then A2: e2 <= e1 by LATTICE5:6;
A3: (for x,y being (Element of ( EqRelLATT A )) holds (((x in (the carrier of Y) & y in (the carrier of Y)) &  ex_inf_of { x,y },( EqRelLATT A )) implies ( inf { x,y } ) in (the carrier of Y)))
proof
let x being (Element of ( EqRelLATT A ));
let y being (Element of ( EqRelLATT A ));
assume that
A4: (x in (the carrier of Y) & y in (the carrier of Y))
and
 ex_inf_of { x,y },( EqRelLATT A );
per cases  by A1,A4,TARSKI:def 2;
suppose (x = e1 & y = e1);

then ( inf { x,y } ) = ( e1 "/\" e1 ) by YELLOW_0:40
.= e1 by YELLOW_5:2;
hence thesis by A1,TARSKI:def 2;
end;
suppose (x = e1 & y = e2);

then ( inf { x,y } ) = ( e1 "/\" e2 ) by YELLOW_0:40
.= e2 by A2,YELLOW_5:10;
hence thesis by A1,TARSKI:def 2;
end;
suppose (x = e2 & y = e1);

then ( inf { x,y } ) = ( e2 "/\" e1 ) by YELLOW_0:40
.= e2 by A2,YELLOW_5:10;
hence thesis by A1,TARSKI:def 2;
end;
suppose (x = e2 & y = e2);

then ( inf { x,y } ) = ( e2 "/\" e2 ) by YELLOW_0:40
.= e2 by YELLOW_5:2;
hence thesis by A1,TARSKI:def 2;
end;
end;
A5: Y is  finitely_typed
proof
take A;
thus (for e being set holds (e in (the carrier of Y) implies e is (Equivalence_Relation of A))) by A1,TARSKI:def 2;
take o = 3;
thus (for eq1,eq2 being (Equivalence_Relation of A) holds (for x1,y1 being set holds (((eq1 in (the carrier of Y) & eq2 in (the carrier of Y)) & [ x1,y1 ] in ( eq1 "\/" eq2 )) implies (ex F being non  empty (FinSequence of A) st (( len F ) = o & x1,y1 are_joint_by F,eq1,eq2)))))
proof
let eq1 being (Equivalence_Relation of A);
let eq2 being (Equivalence_Relation of A);
let x1 being set;
let y1 being set;
assume that
A6: eq1 in (the carrier of Y)
and
A7: eq2 in (the carrier of Y)
and
A8: [ x1,y1 ] in ( eq1 "\/" eq2 );
(eq1 = e2 or eq1 <> e2);
then consider z being set such that A9: ((eq1 = e2 & z = x1) or (eq1 <> e2 & z = y1));
(ex x2,y2 being set st (([ x1,y1 ] = [ x2,y2 ] & x2 in A) & y2 in A)) by A8,RELSET_1:2;
then (x1 in A & y1 in A) by ZFMISC_1:27;
then reconsider F = <* x1,z,y1 *> as non  empty (FinSequence of A) by A9,FINSEQ_2:14;
take F;
per cases  by A9;
suppose A10: (eq1 = e2 & z = x1);

then A11: ( F . 2 ) = x1 by FINSEQ_1:45;
A12: ( F . 1 ) = x1 by FINSEQ_1:45;
A13: (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len F )) implies ((i is  odd implies [ ( F . i ),( F . ( i + 1 ) ) ] in eq1) & (i is  even implies [ ( F . i ),( F . ( i + 1 ) ) ] in eq2))))
proof
let i being (Element of ( NAT ));
assume that
A14: 1 <= i
and
A15: i < ( len F );
i < ( 2 + 1 ) by A15,FINSEQ_1:45;
then i <= 2 by NAT_1:13;
then A16: ((i = ( 0 ) or i = 1) or i = 2) by NAT_1:26;
per cases  by A1,A7,A10,A14,A16,CKB4:1,CKB5:1,TARSKI:def 2;
suppose A17: (((i = 1 & i is  odd) & eq1 = e2) & eq2 = e1);

(ex x2,y2 being set st (([ x1,y1 ] = [ x2,y2 ] & x2 in A) & y2 in A)) by A8,RELSET_1:2;
then x1 in A by ZFMISC_1:27;
hence thesis by A12,A11,A17,EQREL_1:5;
end;
suppose A18: (((i = 1 & i is  odd) & eq1 = e2) & eq2 = e2);

(ex x2,y2 being set st (([ x1,y1 ] = [ x2,y2 ] & x2 in A) & y2 in A)) by A8,RELSET_1:2;
then x1 in A by ZFMISC_1:27;
hence thesis by A12,A11,A18,EQREL_1:5;
end;
suppose A19: (((i = 2 & i is  even) & eq1 = e2) & eq2 = e1);

then ( eq1 "\/" eq2 ) = ( e2 "\/" e1 ) by LATTICE5:10
.= eq2 by A2,A19,YELLOW_5:8;
hence thesis by A8,A11,A19,FINSEQ_1:45;
end;
suppose (((i = 2 & i is  even) & eq1 = e2) & eq2 = e2);

hence thesis by A8,A11,FINSEQ_1:45;
end;
end;
(( len F ) = 3 & ( F . 3 ) = y1) by FINSEQ_1:45;
hence thesis by A12,A13,LATTICE5:def 3;
end;
suppose A20: (eq1 <> e2 & z = y1);

then A21: ( F . 2 ) = y1 by FINSEQ_1:45;
A22: ( F . 3 ) = y1 by FINSEQ_1:45;
A23: (for i being (Element of ( NAT )) holds ((1 <= i & i < ( len F )) implies ((i is  odd implies [ ( F . i ),( F . ( i + 1 ) ) ] in eq1) & (i is  even implies [ ( F . i ),( F . ( i + 1 ) ) ] in eq2))))
proof
let i being (Element of ( NAT ));
assume that
A24: 1 <= i
and
A25: i < ( len F );
i < ( 2 + 1 ) by A25,FINSEQ_1:45;
then i <= 2 by NAT_1:13;
then A26: ((i = ( 0 ) or i = 1) or i = 2) by NAT_1:26;
per cases  by A1,A6,A7,A20,A24,A26,CKB4:1,CKB5:1,TARSKI:def 2;
suppose (((i = 1 & i is  odd) & eq1 = e1) & eq2 = e1);

hence thesis by A8,A21,FINSEQ_1:45;
end;
suppose A27: (((i = 1 & i is  odd) & eq1 = e1) & eq2 = e2);

then ( eq1 "\/" eq2 ) = ( e1 "\/" e2 ) by LATTICE5:10
.= eq1 by A2,A27,YELLOW_5:8;
hence thesis by A8,A21,A27,FINSEQ_1:45;
end;
suppose A28: (((i = 2 & i is  even) & eq1 = e1) & eq2 = e1);

(ex x2,y2 being set st (([ x1,y1 ] = [ x2,y2 ] & x2 in A) & y2 in A)) by A8,RELSET_1:2;
then y1 in A by ZFMISC_1:27;
hence thesis by A21,A22,A28,EQREL_1:5;
end;
suppose A29: (((i = 2 & i is  even) & eq1 = e1) & eq2 = e2);

(ex x2,y2 being set st (([ x1,y1 ] = [ x2,y2 ] & x2 in A) & y2 in A)) by A8,RELSET_1:2;
then y1 in A by ZFMISC_1:27;
hence thesis by A21,A22,A29,EQREL_1:5;
end;
end;
(( len F ) = 3 & ( F . 1 ) = x1) by FINSEQ_1:45;
hence thesis by A22,A23,LATTICE5:def 3;
end;
end;

end;
A30: (for x,y being (Element of ( EqRelLATT A )) holds (((x in (the carrier of Y) & y in (the carrier of Y)) &  ex_sup_of { x,y },( EqRelLATT A )) implies ( sup { x,y } ) in (the carrier of Y)))
proof
let x being (Element of ( EqRelLATT A ));
let y being (Element of ( EqRelLATT A ));
assume that
A31: (x in (the carrier of Y) & y in (the carrier of Y))
and
 ex_sup_of { x,y },( EqRelLATT A );
per cases  by A1,A31,TARSKI:def 2;
suppose (x = e1 & y = e1);

then ( sup { x,y } ) = ( e1 "\/" e1 ) by YELLOW_0:41
.= e1 by YELLOW_5:1;
hence thesis by A1,TARSKI:def 2;
end;
suppose (x = e1 & y = e2);

then ( sup { x,y } ) = ( e1 "\/" e2 ) by YELLOW_0:41
.= e1 by A2,YELLOW_5:8;
hence thesis by A1,TARSKI:def 2;
end;
suppose (x = e2 & y = e1);

then ( sup { x,y } ) = ( e2 "\/" e1 ) by YELLOW_0:41
.= e1 by A2,YELLOW_5:8;
hence thesis by A1,TARSKI:def 2;
end;
suppose (x = e2 & y = e2);

then ( sup { x,y } ) = ( e2 "\/" e2 ) by YELLOW_0:41
.= e2 by YELLOW_5:1;
hence thesis by A1,TARSKI:def 2;
end;
end;
A32: a <> b by ZFMISC_1:56;
A33: Y is non  trivial
proof
assume Y is  trivial;
then (ex s being (Element of Y) st (the carrier of Y) = { s }) by TEX_1:def 1;
then ( nabla A ) = ( id A ) by A1,ZFMISC_1:5;
then [: A,A :] = ( id A ) by EQREL_1:def 1;
then [ a,b ] in ( id A ) by ZFMISC_1:def 2;
hence contradiction by A32,RELAT_1:def 10;
end;
reconsider Y as  full non  empty (Sublattice of ( EqRelLATT A )) by A3,A30,YELLOW_0:def 16,YELLOW_0:def 17;
take Y;
thus thesis by A33,A5;
end;
end;
