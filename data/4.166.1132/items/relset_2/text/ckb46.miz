environ
vocabularies RELAT_1,EQREL_1,XBOOLE_0,SUBSET_1,TARSKI,SETFAM_1,ZFMISC_1,FUNCT_1,RELSET_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,EQREL_1,CKB1,CKB15,CKB16,CKB22,CKB23,CKB27,CKB29,CKB30;
definitions XBOOLE_0,TARSKI,EQREL_1,SUBSET_1,RELAT_1,CKB22,CKB29;
theorems RELAT_1,TARSKI,SETFAM_1,ZFMISC_1,XBOOLE_1,SUBSET_1,RELSET_1,XBOOLE_0,FUNCT_1,FUNCT_2,MSSUBFAM,EQREL_1,SYSREL,ORDERS_1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB28,CKB29,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45;
schemes CLASSES1,DOMAIN_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,PARTFUN1,RELSET_1;
constructors SETFAM_1,FUNCT_2,EQREL_1,RELSET_1,DOMAIN_1,CKB15,CKB16,CKB22,CKB27,CKB29,CKB30;
requirements SUBSET,BOOLE;
begin
reserve x for set;
reserve A for set;
reserve B for set;
reserve P for Relation;
reserve X for (Subset of A);
reserve Y for (Subset of B);
reserve R for (Subset of [: A,B :]);
reserve FR for (Subset-Family of [: A,B :]);
theorem
(for G being (Subset-Family of B) holds (G = { ( R .:^ X ) where R is (Subset of [: A,B :]): R in FR } implies ( ( Intersect FR ) .:^ X ) = ( Intersect G )))
proof
let G being (Subset-Family of B);
assume A1: G = { ( R .:^ X ) where R is (Subset of [: A,B :]): R in FR };
A2: (for x being set holds (G = { x } implies ( Intersect G ) = x))
proof
let x being set;
assume G = { x };
then ( Intersect G ) = ( meet { x } ) by SETFAM_1:def 9;
hence thesis by SETFAM_1:10;
end;
per cases ;
suppose A3: X = ( {} );

then A4: ( ( Intersect FR ) .:^ X ) = B by CKB37:1;
G c= { B }
proof
let a being set;
assume a in G;
then (ex R being (Subset of [: A,B :]) st (a = ( R .:^ X ) & R in FR)) by A1;
then a = B by A3,CKB37:1;
hence thesis by TARSKI:def 1;
end;
then (G = ( {} ) or G = { B }) by ZFMISC_1:33;
hence thesis by A2,A4,SETFAM_1:def 9;
end;
suppose A5: X <> ( {} );

per cases ;
suppose A6: FR = ( {} );

then ( Intersect FR ) = [: A,B :] by SETFAM_1:def 9;
then A7: ( ( Intersect FR ) .:^ X ) = B by CKB45:1;
G c= { B }
proof
let a being set;
assume a in G;
then (ex R being (Subset of [: A,B :]) st (a = ( R .:^ X ) & R in FR)) by A1;
hence thesis by A6;
end;
then (G = ( {} ) or G = { B }) by ZFMISC_1:33;
hence thesis by A2,A7,SETFAM_1:def 9;
end;
suppose A8: FR <> ( {} );

per cases ;
suppose A9: B = ( {} );

then [: A,B :] = ( {} ) by ZFMISC_1:90;
then (FR = ( {} ) or FR = { ( {} ) }) by ZFMISC_1:1,ZFMISC_1:33;
then ( Intersect FR ) = ( meet { ( {} ) } ) by A8,SETFAM_1:def 9;
then ( ( Intersect FR ) .:^ X ) = ( {} ) by A5,CKB44:1,SETFAM_1:10;
hence thesis by A9;
end;
suppose B <> ( {} );

then reconsider B as non  empty set;
thus ( ( Intersect FR ) .:^ X ) c= ( Intersect G )
proof
let a being set;
assume A10: a in ( ( Intersect FR ) .:^ X );
then A11: a in B;
reconsider a as (Element of B) by A10;
(G <> ( {} ) implies a in ( Intersect G ))
proof
assume A12: G <> ( {} );
then A13: ( Intersect G ) = ( meet G ) by SETFAM_1:def 9;
(for Y being set holds (Y in G implies a in Y))
proof
let Y being set;
assume Y in G;
then consider R being (Subset of [: A,B :]) such that A14: Y = ( R .:^ X ) and A15: R in FR by A1;
(for x being set holds (x in X implies a in ( Im (R,x) )))
proof
let x being set;
assume x in X;
then a in ( Im (( Intersect FR ),x) ) by A10,CKB32:1;
then [ x,a ] in ( Intersect FR ) by CKB10:1;
then [ x,a ] in ( meet FR ) by A8,SETFAM_1:def 9;
then [ x,a ] in R by A15,SETFAM_1:def 1;
hence thesis by CKB10:1;
end;
hence thesis by A14,CKB33:1;
end;
hence thesis by A12,A13,SETFAM_1:def 1;
end;
hence thesis by A11,SETFAM_1:def 9;
end;

let a being set;
assume A16: a in ( Intersect G );
then reconsider a as (Element of B);
consider R being (Subset of [: A,B :]) such that A17: R in FR by A8,SUBSET_1:4;
( R .:^ X ) in G by A1,A17;
then A18: a in ( meet G ) by A16,SETFAM_1:def 9;
(for x being set holds (x in X implies a in ( Im (( Intersect FR ),x) )))
proof
let x being set;
assume that
A19: x in X;
(for Y being set holds (Y in FR implies [ x,a ] in Y))
proof
let P being set;
assume A20: P in FR;
then reconsider P as (Subset of [: A,B :]);
set S = ( P .:^ X );
S in G by A1,A20;
then a in ( P .:^ X ) by A18,SETFAM_1:def 1;
then a in ( Im (P,x) ) by A19,CKB32:1;
hence thesis by CKB10:1;
end;
then [ x,a ] in ( meet FR ) by A8,SETFAM_1:def 1;
then [ x,a ] in ( Intersect FR ) by A8,SETFAM_1:def 9;
hence thesis by CKB10:1;
end;
hence thesis by CKB33:1;
end;
end;
end;
end;
