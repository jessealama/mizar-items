environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,NAT_1,FDIFF_1,SUBSET_1,RELAT_1,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,FUNCOP_1,XREAL_0,ORDINAL1,XXREAL_2,XBOOLE_0,XXREAL_1;
notations TARSKI,SUBSET_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,NAT_1,VALUED_0,COMPLEX1,BINOP_2,VALUED_1,SEQ_1,SEQ_2,RCOMP_1,FDIFF_1,STRUCT_0,PRE_TOPC,RLVECT_1,VFUNCT_1,NORMSP_0,NORMSP_1,NDIFF_1,NFCONT_3,CKB3,CKB5,CKB6,CKB8,CKB15,CKB16,CKB17;
definitions RCOMP_1,SUBSET_1,XBOOLE_0,TARSKI,CKB3,CKB6,CKB15,CKB16,CKB17;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,ORDINAL1,SEQ_4,NORMSP_1,LOPBAN_1,LOPBAN_3,PARTFUN1,PARTFUN2,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,NORMSP_0,XREAL_0,RCOMP_1,SEQM_3,RFUNCT_2,NFCONT_3,CKB1,CKB2,CKB3,CKB6,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes FUNCT_2,SEQ_1;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,NORMSP_0,NORMSP_1,RELAT_1,SUBSET_1,XXREAL_0,LOPBAN_2,FUNCOP_1,NAT_1,RCOMP_1,VALUED_1,SEQ_4,FDIFF_1,CKB4,CKB7;
constructors REAL_1,FDIFF_1,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,RVSUM_1,BINOP_2,INTEGR15,NAT_D,MEASURE6,NFCONT_3,CKB3,CKB6,CKB15,CKB16,CKB17;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve F for non  trivial RealNormSpace;
reserve x for Real;
reserve x0 for Real;
reserve Z for  open (Subset of ( REAL ));
reserve f for (PartFunc of ( REAL ),(the carrier of F));
reserve R for (REST of F);
reserve L for (LINEAR of F);
theorem
Th10: (f is_differentiable_on Z iff (Z c= ( dom f ) & (for x holds (x in Z implies f is_differentiable_in x))))
proof
thus (f is_differentiable_on Z implies (Z c= ( dom f ) & (for x holds (x in Z implies f is_differentiable_in x))))
proof
assume A1: f is_differentiable_on Z;
hence A2: Z c= ( dom f ) by CKB17:def 1;
let x0;
assume A3: x0 in Z;
then ( f | Z ) is_differentiable_in x0 by A1,CKB17:def 1;
then consider N being (Neighbourhood of x0) such that A4: N c= ( dom ( f | Z ) ) and A5: (ex L st (ex R st (for x holds (x in N implies ( ( ( f | Z ) /. x ) - ( ( f | Z ) /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ))))) by CKB15:def 1;
take N;
( dom ( f | Z ) ) = ( ( dom f ) /\ Z ) by RELAT_1:61;
then ( dom ( f | Z ) ) c= ( dom f ) by XBOOLE_1:17;
hence N c= ( dom f ) by A4,XBOOLE_1:1;
consider L,R such that A6: (for x holds (x in N implies ( ( ( f | Z ) /. x ) - ( ( f | Z ) /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ))) by A5;
now
let x;
assume A7: x in N;
then A8: ( ( ( f | Z ) /. x ) - ( ( f | Z ) /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A6;
( ( f /. x ) - ( ( f | Z ) /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A8,A4,A7,PARTFUN2:15;
hence ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A2,A3,PARTFUN2:17;
end;
hence thesis;
end;

assume that
A9: Z c= ( dom f )
and
A10: (for x holds (x in Z implies f is_differentiable_in x));
thus Z c= ( dom f ) by A9;
let x0;
assume A11: x0 in Z;
then consider N1 being (Neighbourhood of x0) such that A12: N1 c= Z by RCOMP_1:18;
f is_differentiable_in x0 by A10,A11;
then consider N being (Neighbourhood of x0) such that A13: N c= ( dom f ) and A14: (ex L st (ex R st (for x holds (x in N implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ))))) by CKB15:def 1;
consider N2 being (Neighbourhood of x0) such that A15: N2 c= N1 and A16: N2 c= N by RCOMP_1:17;
A17: N2 c= Z by A12,A15,XBOOLE_1:1;
take N2;
N2 c= ( dom f ) by A13,A16,XBOOLE_1:1;
then N2 c= ( ( dom f ) /\ Z ) by A17,XBOOLE_1:19;
hence A18: N2 c= ( dom ( f | Z ) ) by RELAT_1:61;
consider L,R such that A19: (for x holds (x in N implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ))) by A14;
A20: x0 in N2 by RCOMP_1:16;
take L;
take R;
now
let x;
assume A21: x in N2;
then ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A16,A19;
then ( ( ( f | Z ) /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A21,A18,PARTFUN2:15;
hence ( ( ( f | Z ) /. x ) - ( ( f | Z ) /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A20,A18,PARTFUN2:15;
end;
hence thesis;
end;
