environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,MEMBERED,ORDINAL1,FINSET_1,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,FINSEQ_5,RFINSEQ,JORDAN3,CARD_3,XCMPLX_0,AFINSQ_2,BINOP_1,SETWISEO,FINSOP_1,FUNCOP_1,BINOP_2,VALUED_0,FUNCT_2,INT_1,PRGCOR_2,XREAL_0,SEQ_1,SERIES_1,VALUED_1,RAT_1,SQUARE_1,COMPLEX1,PARTFUN3,PRE_POLY,AMISTD_1,AMISTD_2;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,XREAL_0,NUMBERS,RELAT_1,FUNCT_1,XCMPLX_0,NAT_1,FINSET_1,ORDINAL1,XXREAL_0,NAT_D,AFINSQ_1,SEQ_1,MEMBERED,VALUED_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,INT_1,BINOP_1,BINOP_2,SETWISEO,FINSOP_1,FINSEQ_1,RECDEF_1,VALUED_0,SERIES_1,RAT_1,PARTFUN3,CKB33,CKB36,CKB47;
definitions TARSKI,XBOOLE_0,FUNCT_1,VALUED_1,CKB33,CKB36,CKB47;
theorems TARSKI,FUNCT_1,NAT_1,ZFMISC_1,RELAT_1,CARD_2,XBOOLE_0,XBOOLE_1,FINSET_1,ORDINAL1,CARD_1,XREAL_1,AFINSQ_1,XXREAL_0,NAT_2,FINSEQ_2,WELLORD2,MEMBERED,VALUED_0,VALUED_1,XREAL_0,NAT_D,SERIES_1,PARTFUN3,BINOP_1,BINOP_2,SETWISEO,FUNCOP_1,FINSOP_1,FINSEQ_1,FUNCT_2,XCMPLX_0,GRFUNC_1,CKB1,CKB2,CKB3,CKB5,CKB6,CKB7,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB41,CKB42,CKB43,CKB44,CKB45,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53;
schemes NAT_1,AFINSQ_1,FUNCT_2,BINOP_1,CKB8;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FINSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,BINOP_2,CARD_1,FINSEQ_1,AFINSQ_1,RELSET_1,ORDINAL3,VALUED_1,VALUED_0,MEMBERED,CKB4,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB35,CKB40,CKB46,CKB54;
constructors SERIES_1,PARTFUN3,WELLORD2,SETWISEO,REAL_1,FINSOP_1,NAT_D,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,AFINSQ_1,MATRIX_7,SQUARE_1,FINSEQ_4,BINOP_1,CKB33,CKB36,CKB47;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve k for Nat;
reserve n for Nat;
reserve m for Nat;
reserve x for set;
reserve y for set;
reserve z for set;
reserve X for set;
reserve p for XFinSequence;
reserve q for XFinSequence;
reserve k1 for Nat;
reserve k2 for Nat;
definition
let X being  finite  natural-membered set;
func Sgm0 X -> (XFinSequence of ( NAT )) means 
:Def5: (( rng it ) = X & (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len it )) & k1 = ( it . l )) & k2 = ( it . m )) implies k1 < k2)));
existence
proof
defpred P[ Nat ]
 means
(for X being set holds (X c= $1 implies (ex p being (XFinSequence of ( NAT )) st (( rng p ) = X & (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len p )) & k1 = ( p . l )) & k2 = ( p . m )) implies k1 < k2))))));
A1: (ex k being Nat st X c= k) by CKB5:1;
A2: (for k being Nat holds (P[ k ] implies P[ ( k + 1 ) ]))
proof
let k being Nat;
assume that
A3: (for X being set holds (X c= k implies (ex p being (XFinSequence of ( NAT )) st (( rng p ) = X & (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len p )) & k1 = ( p . l )) & k2 = ( p . m )) implies k1 < k2))))));
let X being set;
assume A4: X c= ( k + 1 );
now
set Y = ( X \ { k } );
assume (not X c= k);
then consider x such that A5: x in X and A6: (not x in k) by TARSKI:def 3;
reconsider n = x as (Element of ( NAT )) by A4,A5,CKB3:1;
n < ( k + 1 ) by A4,A5,NAT_1:44;
then A7: n <= k by NAT_1:13;
(not n < k) by A6,NAT_1:44;
then A8: n = k by A7,XXREAL_0:1;
A9: Y c= k
proof
let x;
assume A10: x in Y;
then A11: x in X;
then reconsider m = x as (Element of ( NAT )) by A4,CKB3:1;
(not x in { k }) by A10,XBOOLE_0:def 5;
then A12: m <> k by TARSKI:def 1;
m < ( k + 1 ) by A4,A11,NAT_1:44;
then m <= k by NAT_1:13;
then m < k by A12,XXREAL_0:1;
hence thesis by NAT_1:44;
end;
then consider p being (XFinSequence of ( NAT )) such that A13: ( rng p ) = Y and A14: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len p )) & k1 = ( p . l )) & k2 = ( p . m )) implies k1 < k2)) by A3;
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
consider q being (XFinSequence of ( NAT )) such that A15: q = ( p ^ <% k %> );
A16: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len q )) & k1 = ( q . l )) & k2 = ( q . m )) implies k1 < k2))
proof
let l being Nat;
let m being Nat;
let k1 being Nat;
let k2 being Nat;
assume that
A17: l < m
and
A18: m < ( len q )
and
A19: k1 = ( q . l )
and
A20: k2 = ( q . m );
( m + 1 ) <= ( len q ) by A18,NAT_1:13;
then A21: m <= ( ( len q ) - 1 ) by XREAL_1:19;
then l < ( ( len ( p ^ <% k %> ) ) - 1 ) by A15,A17,XXREAL_0:2;
then l < ( ( ( len p ) + ( len <% k %> ) ) - 1 ) by AFINSQ_1:17;
then l < ( ( ( len p ) + 1 ) - 1 ) by AFINSQ_1:34;
then A22: l in ( dom p ) by NAT_1:44;
A23: m <= ( ( len q ) -' 1 ) by A21,XREAL_0:def 2;
A24:now
A25: k1 = ( p . l ) by A15,A19,A22,AFINSQ_1:def 3;
assume m <> ( ( len q ) -' 1 );
then m < ( ( len ( p ^ <% k %> ) ) -' 1 ) by A15,A23,XXREAL_0:1;
then m < ( ( ( len p ) + ( len <% k %> ) ) -' 1 ) by AFINSQ_1:17;
then m < ( ( ( len p ) + 1 ) -' 1 ) by AFINSQ_1:34;
then A26: m < ( len p ) by NAT_D:34;
then m in ( dom p ) by NAT_1:44;
then k2 = ( p . m ) by A15,A20,AFINSQ_1:def 3;
hence thesis by A14,A17,A26,A25;
end;
now
assume m = ( ( len q ) -' 1 );
then A27: ( q . m ) = ( ( p ^ <% k %> ) . ( ( ( len p ) + ( len <% k %> ) ) -' 1 ) ) by A15,AFINSQ_1:17
.= ( ( p ^ <% k %> ) . ( ( ( len p ) + 1 ) -' 1 ) ) by AFINSQ_1:34
.= ( ( p ^ <% k %> ) . ( len p ) ) by NAT_D:34
.= k by AFINSQ_1:36;
k1 = ( p . l ) by A15,A19,A22,AFINSQ_1:def 3;
then k1 in Y by A13,A22,FUNCT_1:def 3;
hence thesis by A9,A20,A27,NAT_1:44;
end;
hence thesis by A24;
end;
A28: { k } c= X by A5,A8,ZFMISC_1:31;
( rng q ) = ( ( rng p ) \/ ( rng <% k %> ) ) by A15,AFINSQ_1:26
.= ( Y \/ { k } ) by A13,AFINSQ_1:33
.= ( X \/ { k } ) by XBOOLE_1:39
.= X by A28,XBOOLE_1:12;
hence thesis by A16;
end;
hence thesis by A3;
end;
A29: P[ ( 0 ) ]
proof
let X being set;
assume A30: X c= ( 0 );
take ( <%> ( NAT ) );
thus ( rng ( <%> ( NAT ) ) ) = X by A30;
thus thesis;
end;
(for k2 being Nat holds P[ k2 ]) from NAT_1:sch 2(A29,A2);
hence thesis by A1;
end;
uniqueness
proof
defpred S[ XFinSequence ]
 means
(for X holds ((ex k being Nat st X c= k) implies ((($1 is (XFinSequence of ( NAT )) & ( rng $1 ) = X) & (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len $1 )) & k1 = ( $1 . l )) & k2 = ( $1 . m )) implies k1 < k2))) implies (for q being (XFinSequence of ( NAT )) holds ((( rng q ) = X & (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len q )) & k1 = ( q . l )) & k2 = ( q . m )) implies k1 < k2))) implies q = $1)))));
let p being (XFinSequence of ( NAT ));
let q being (XFinSequence of ( NAT ));
assume that
A31: ( rng p ) = X
and
A32: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len p )) & k1 = ( p . l )) & k2 = ( p . m )) implies k1 < k2))
and
A33: ( rng q ) = X
and
A34: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len q )) & k1 = ( q . l )) & k2 = ( q . m )) implies k1 < k2));
A35: (for p being XFinSequence holds (for x being set holds (S[ p ] implies S[ ( p ^ <% x %> ) ])))
proof
let p being XFinSequence;
let x being set;
assume A36: S[ p ];
let X being set;
given k being Nat such that
A37: X c= k;

assume that
A38: ( p ^ <% x %> ) is (XFinSequence of ( NAT ))
and
A39: ( rng ( p ^ <% x %> ) ) = X
and
A40: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len ( p ^ <% x %> ) )) & k1 = ( ( p ^ <% x %> ) . l )) & k2 = ( ( p ^ <% x %> ) . m )) implies k1 < k2));
let q being (XFinSequence of ( NAT ));
assume that
A41: ( rng q ) = X
and
A42: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len q )) & k1 = ( q . l )) & k2 = ( q . m )) implies k1 < k2));
deffunc F(Nat) = ( q . $1 );
( len q ) <> ( 0 )
proof
assume ( len q ) = ( 0 );
then ( p ^ <% x %> ) = ( {} ) by A39,A41,AFINSQ_1:15,RELAT_1:38;
then ( 0 ) = ( len ( p ^ <% x %> ) )
.= ( ( len p ) + ( len <% x %> ) ) by AFINSQ_1:17
.= ( 1 + ( len p ) ) by AFINSQ_1:34;
hence contradiction;
end;
then consider n being Nat such that A43: ( len q ) = ( n + 1 ) by NAT_1:6;
A44: (ex m being Nat st (m = x & (for l being Nat holds ((l in X & l <> x) implies l < m))))
proof
<% x %> is (XFinSequence of ( NAT )) by A38,AFINSQ_1:31;
then ( rng <% x %> ) c= ( NAT ) by RELAT_1:def 19;
then { x } c= ( NAT ) by AFINSQ_1:33;
then reconsider m = x as (Element of ( NAT )) by ZFMISC_1:31;
take m;
thus m = x;
thus (for l being Nat holds ((l in X & l <> x) implies l < m))
proof
( len <% x %> ) = 1 by AFINSQ_1:34;
then A45: m = ( ( p ^ <% x %> ) . ( ( ( len p ) + ( len <% x %> ) ) - 1 ) ) by AFINSQ_1:36
.= ( ( p ^ <% x %> ) . ( ( len ( p ^ <% x %> ) ) - 1 ) ) by AFINSQ_1:17;
( len ( p ^ <% x %> ) ) < ( ( len ( p ^ <% x %> ) ) + 1 ) by XREAL_1:29;
then A46: ( ( len ( p ^ <% x %> ) ) - 1 ) < ( len ( p ^ <% x %> ) ) by XREAL_1:19;
let l being Nat;
assume that
A47: l in X
and
A48: l <> x;
consider y such that A49: y in ( dom ( p ^ <% x %> ) ) and A50: l = ( ( p ^ <% x %> ) . y ) by A39,A47,FUNCT_1:def 3;
reconsider k = y as (Element of ( NAT )) by A49;
k < ( len ( p ^ <% x %> ) ) by A49,NAT_1:44;
then k < ( ( len p ) + ( len <% x %> ) ) by AFINSQ_1:17;
then k < ( ( len p ) + 1 ) by AFINSQ_1:34;
then A51: k <= ( len p ) by NAT_1:13;
k <> ( len p ) by A48,A50,AFINSQ_1:36;
then k < ( ( ( len p ) + 1 ) - 1 ) by A51,XXREAL_0:1;
then k < ( ( ( len p ) + ( len <% x %> ) ) - 1 ) by AFINSQ_1:34;
then A52: k < ( ( len ( p ^ <% x %> ) ) - 1 ) by AFINSQ_1:17;
then ( ( len ( p ^ <% x %> ) ) -' 1 ) = ( ( len ( p ^ <% x %> ) ) - 1 ) by XREAL_0:def 2;
hence thesis by A40,A50,A52,A46,A45;
end;

end;
then reconsider m = x as Nat;
A53: (not x in ( rng p ))
proof
( ( len p ) + 1 ) = ( ( len p ) + ( len <% x %> ) ) by AFINSQ_1:34
.= ( len ( p ^ <% x %> ) ) by AFINSQ_1:17;
then A54: ( len p ) < ( len ( p ^ <% x %> ) ) by XREAL_1:29;
A55: m = ( ( p ^ <% x %> ) . ( len p ) ) by AFINSQ_1:36;
assume x in ( rng p );
then consider y such that A56: y in ( dom p ) and A57: x = ( p . y ) by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A56;
A58: y < ( len p ) by A56,NAT_1:44;
m = ( ( p ^ <% x %> ) . y ) by A56,A57,AFINSQ_1:def 3;
hence contradiction by A40,A58,A54,A55;
end;
A59: (for z holds (z in ( ( ( rng p ) \/ { x } ) \ { x } ) iff z in ( rng p )))
proof
let z;
thus (z in ( ( ( rng p ) \/ { x } ) \ { x } ) implies z in ( rng p ))
proof
assume A60: z in ( ( ( rng p ) \/ { x } ) \ { x } );
then (not z in { x }) by XBOOLE_0:def 5;
hence thesis by A60,XBOOLE_0:def 3;
end;

assume A61: z in ( rng p );
then A62: z in ( ( rng p ) \/ { x } ) by XBOOLE_0:def 3;
(not z in { x }) by A53,A61,TARSKI:def 1;
hence thesis by A62,XBOOLE_0:def 5;
end;
deffunc Q(set) = ( q . $1 );
consider q9 being XFinSequence such that A63: ( len q9 ) = n and A64: (for m being Nat holds (m in n implies ( q9 . m ) = Q(m))) from AFINSQ_1:sch 2;
now
let x;
assume x in ( rng q9 );
then consider y such that A65: y in ( dom q9 ) and A66: x = ( q9 . y ) by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A65;
( q . y ) in ( NAT );
hence x in ( NAT ) by A63,A64,A65,A66;
end;
then ( rng q9 ) c= ( NAT ) by TARSKI:def 3;
then reconsider f = q9 as (XFinSequence of ( NAT )) by RELAT_1:def 19;
A67: p is (XFinSequence of ( NAT )) by A38,AFINSQ_1:31;
A68: (for m being Nat holds (m in ( dom <% x %> ) implies ( q . ( ( len q9 ) + m ) ) = ( <% x %> . m )))
proof
let m being Nat;
assume m in ( dom <% x %> );
then m in ( len <% x %> );
then A69: m in 1 by AFINSQ_1:34;
( (( 0 ) qua (Element of ( NAT ))) + 1 ) = ( ( 0 ) \/ { ( 0 ) } ) by AFINSQ_1:2;
then A70: m = ( 0 ) by A69,TARSKI:def 1;
( q . ( ( len q9 ) + m ) ) = x
proof
x in { x } by TARSKI:def 1;
then x in ( rng <% x %> ) by AFINSQ_1:33;
then x in ( ( rng p ) \/ ( rng <% x %> ) ) by XBOOLE_0:def 3;
then x in ( rng q ) by A39,A41,AFINSQ_1:26;
then consider y such that A71: y in ( dom q ) and A72: x = ( q . y ) by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A71;
y < ( len q ) by A71,NAT_1:44;
then ( y + 1 ) <= ( len q ) by NAT_1:13;
then A73: y <= ( ( len q ) - 1 ) by XREAL_1:19;
( len q ) < ( ( len q ) + 1 ) by XREAL_1:29;
then ( ( len q ) - 1 ) < ( len q ) by XREAL_1:19;
then ( ( len q ) - 1 ) in ( dom q ) by A43,NAT_1:44;
then A74: ( q . ( ( len q ) - 1 ) ) in X by A41,FUNCT_1:def 3;
( len q ) < ( ( len q ) + 1 ) by XREAL_1:29;
then A75: ((y < ( ( len q ) - 1 ) & ( ( len q ) - 1 ) < ( len q )) or y = ( ( len q ) - 1 )) by A73,XREAL_1:19,XXREAL_0:1;
set k = ( q . ( ( len q ) - 1 ) );
consider d being Nat such that A76: d = x and A77: (for l being Nat holds ((l in X & l <> x) implies l < d)) by A44;
assume ( q . ( ( len q9 ) + m ) ) <> x;
then k < d by A43,A63,A70,A77,A74;
hence contradiction by A42,A43,A76,A72,A75;
end;
hence thesis by A70,AFINSQ_1:34;
end;
A78: ( dom q ) = ( ( len q9 ) + ( len <% x %> ) ) by A43,A63,AFINSQ_1:34;
then A79: ( q9 ^ <% x %> ) = q by A63,A64,A68,AFINSQ_1:def 3;
A80: (not x in ( rng f ))
proof
( ( len f ) + 1 ) = ( ( len f ) + ( len <% x %> ) ) by AFINSQ_1:34
.= ( len ( f ^ <% x %> ) ) by AFINSQ_1:17;
then A81: ( len f ) < ( len ( f ^ <% x %> ) ) by XREAL_1:29;
A82: m = ( q . ( len f ) ) by A79,AFINSQ_1:36;
assume x in ( rng f );
then consider y such that A83: y in ( dom f ) and A84: x = ( f . y ) by FUNCT_1:def 3;
reconsider y as (Element of ( NAT )) by A83;
A85: y < ( len f ) by A83,NAT_1:44;
m = ( q . y ) by A63,A64,A83,A84;
hence contradiction by A42,A79,A85,A81,A82;
end;
A86: (for z holds (z in ( ( ( rng f ) \/ { x } ) \ { x } ) iff z in ( rng f )))
proof
let z;
thus (z in ( ( ( rng f ) \/ { x } ) \ { x } ) implies z in ( rng f ))
proof
assume A87: z in ( ( ( rng f ) \/ { x } ) \ { x } );
then (not z in { x }) by XBOOLE_0:def 5;
hence thesis by A87,XBOOLE_0:def 3;
end;

assume A88: z in ( rng f );
then A89: z in ( ( rng f ) \/ { x } ) by XBOOLE_0:def 3;
(not z in { x }) by A80,A88,TARSKI:def 1;
hence thesis by A89,XBOOLE_0:def 5;
end;
X = ( ( rng p ) \/ ( rng <% x %> ) ) by A39,AFINSQ_1:26
.= ( ( rng p ) \/ { x } ) by AFINSQ_1:33;
then A90: ( rng p ) = ( X \ { x } ) by A59,TARSKI:1;
A91: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len p )) & k1 = ( p . l )) & k2 = ( p . m )) implies k1 < k2))
proof
let l being Nat;
let m being Nat;
let k1 being Nat;
let k2 being Nat;
assume that
A92: l < m
and
A93: m < ( len p )
and
A94: k1 = ( p . l )
and
A95: k2 = ( p . m );
l < ( len p ) by A92,A93,XXREAL_0:2;
then l in ( dom p ) by NAT_1:44;
then A96: k1 = ( ( p ^ <% x %> ) . l ) by A94,AFINSQ_1:def 3;
( len p ) < ( ( len p ) + 1 ) by XREAL_1:29;
then m < ( ( len p ) + 1 ) by A93,XXREAL_0:2;
then m < ( ( len p ) + ( len <% x %> ) ) by AFINSQ_1:34;
then A97: m < ( len ( p ^ <% x %> ) ) by AFINSQ_1:17;
m in ( dom p ) by A93,NAT_1:44;
then k2 = ( ( p ^ <% x %> ) . m ) by A95,AFINSQ_1:def 3;
hence thesis by A40,A92,A96,A97;
end;
A98: (for l,m,k1,k2 being Nat holds ((((l < m & m < ( len f )) & k1 = ( f . l )) & k2 = ( f . m )) implies k1 < k2))
proof
let l being Nat;
let m being Nat;
let k1 being Nat;
let k2 being Nat;
assume that
A99: l < m
and
A100: m < ( len f )
and
A101: k1 = ( f . l )
and
A102: k2 = ( f . m );
m in n by A63,A100,NAT_1:44;
then A103: k2 = ( q . m ) by A64,A102;
l < n by A63,A99,A100,XXREAL_0:2;
then l in n by NAT_1:44;
then A104: k1 = ( q . l ) by A64,A101;
m < ( len q ) by A43,A63,A100,NAT_1:13;
hence thesis by A42,A99,A104,A103;
end;
X = ( ( rng f ) \/ ( rng <% x %> ) ) by A41,A79,AFINSQ_1:26
.= ( ( rng f ) \/ { x } ) by AFINSQ_1:33;
then A105: ( rng f ) = ( X \ { x } ) by A86,TARSKI:1;
(ex m being Nat st ( X \ { x } ) c= m) by A37,XBOOLE_1:1;
then q9 = p by A36,A91,A67,A90,A98,A105;
hence thesis by A63,A64,A78,A68,AFINSQ_1:def 3;
end;
A106: S[ ( {} ) ];
A107: (for p being XFinSequence holds S[ p ]) from AFINSQ_1:sch 3(A106,A35);
(ex k being Nat st X c= k) by CKB5:1;
hence thesis by A31,A32,A33,A34,A107;
end;
end;
