environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB23;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2,CKB14,CKB22;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0,CKB10,CKB15,CKB16,CKB17;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve p for Real;
reserve S for non  trivial RealNormSpace;
reserve T for non  trivial RealNormSpace;
reserve F for non  trivial RealNormSpace;
reserve x0 for (Point of S);
reserve G for RealNormSpace-Sequence;
reserve f for (PartFunc of ( product G ),F);
reserve x for (Element of ( product G ));
theorem
FDAF20: (for S,T being non  trivial RealNormSpace holds (for f being (PartFunc of S,T) holds (for p,q being (Point of S) holds (for M being Real holds (for L being (Point of ( R_NormSpace_of_BoundedLinearOperators (S,T) )) holds (((([. p,q .] c= ( dom f ) & (for x being (Point of S) holds (x in [. p,q .] implies f is_continuous_in x))) & (for x being (Point of S) holds (x in ]. p,q .[ implies f is_differentiable_in x))) & (for x being (Point of S) holds (x in ]. p,q .[ implies ||. ( ( diff (f,x) ) - L ) .|| <= M))) implies ||. ( ( ( f /. q ) - ( f /. p ) ) - ( L . ( q - p ) ) ) .|| <= ( M * ||. ( q - p ) .|| )))))))
proof
let S being non  trivial RealNormSpace;
let T being non  trivial RealNormSpace;
let f being (PartFunc of S,T);
let p being (Point of S);
let q being (Point of S);
let M being Real;
let L being (Point of ( R_NormSpace_of_BoundedLinearOperators (S,T) ));
assume that
A1: [. p,q .] c= ( dom f )
and
A2: (((for x being (Point of S) holds (x in [. p,q .] implies f is_continuous_in x)) & (for x being (Point of S) holds (x in ]. p,q .[ implies f is_differentiable_in x))) & (for x being (Point of S) holds (x in ]. p,q .[ implies ||. ( ( diff (f,x) ) - L ) .|| <= M)));
reconsider LP = L as  bounded (LinearOperator of S,T) by LOPBAN_1:def 9;
deffunc LL((Point of S)) = ( L . ( $1 - p ) );
consider L0 being (Function of (the carrier of S),(the carrier of T)) such that P0: (for t being (Element of (the carrier of S)) holds ( L0 . t ) = LL(t)) from FUNCT_2:sch 4;
D1: ( dom L0 ) = (the carrier of S) by FUNCT_2:def 1;
now
let x1 being (Point of S);
let x2 being (Point of S);
assume (x1 in ( dom L0 ) & x2 in ( dom L0 ));
A4: ( - 1 ) is Real by XREAL_0:def 1;
(( L0 /. x1 ) = ( L . ( x1 - p ) ) & ( L0 /. x2 ) = ( L . ( x2 - p ) )) by P0;
then ||. ( ( L0 /. x1 ) - ( L0 /. x2 ) ) .|| = ||. ( ( LP . ( x1 - p ) ) + ( ( - 1 ) * ( LP . ( x2 - p ) ) ) ) .|| by RLVECT_1:16
.= ||. ( ( LP . ( x1 - p ) ) + ( LP . ( ( - 1 ) * ( x2 - p ) ) ) ) .|| by A4,LOPBAN_1:def 5
.= ||. ( LP . ( ( x1 - p ) + ( ( - 1 ) * ( x2 - p ) ) ) ) .|| by GRCAT_1:def 8
.= ||. ( LP . ( ( x1 - p ) - ( x2 - p ) ) ) .|| by RLVECT_1:16
.= ||. ( LP . ( x1 - ( ( x2 - p ) + p ) ) ) .|| by RLVECT_1:27
.= ||. ( LP . ( x1 - ( x2 - ( p - p ) ) ) ) .|| by RLVECT_1:29
.= ||. ( LP . ( x1 - ( x2 - ( 0. S ) ) ) ) .|| by RLVECT_1:15
.= ||. ( LP . ( x1 - x2 ) ) .|| by RLVECT_1:13;
then A5: ||. ( ( L0 /. x1 ) - ( L0 /. x2 ) ) .|| <= ( ||. L .|| * ||. ( x1 - x2 ) .|| ) by LOPBAN_1:32;
( (( 0 ) qua Real) + ||. L .|| ) < ( (1 qua Real) + ||. L .|| ) by XREAL_1:8;
then ( ||. L .|| * ||. ( x1 - x2 ) .|| ) <= ( ( ||. L .|| + 1 ) * ||. ( x1 - x2 ) .|| ) by XREAL_1:64;
hence ||. ( ( L0 /. x1 ) - ( L0 /. x2 ) ) .|| <= ( ( ||. L .|| + 1 ) * ||. ( x1 - x2 ) .|| ) by A5,XXREAL_0:2;
end;
then L0 is_Lipschitzian_on ( dom L0 ) by NFCONT_1:def 9;
then D3: L0 is_continuous_on ( dom L0 ) by NFCONT_1:45;
reconsider R = ( (the carrier of S) --> ( 0. T ) ) as (PartFunc of S,T);
A6: ( dom R ) = (the carrier of S) by FUNCOP_1:13;
now
let h being  convergent_to_0 (sequence of S);
A7:now
let n being Nat;
A8: ( R /. ( h . n ) ) = ( R . ( h . n ) ) by A6,PARTFUN1:def 6
.= ( 0. T ) by FUNCOP_1:7;
A9: ( rng h ) c= ( dom R ) by A6;
A10: n in ( NAT ) by ORDINAL1:def 12;
hence ( ( ( ||. h .|| " ) (#) ( R /* h ) ) . n ) = ( ( ( ||. h .|| " ) . n ) * ( ( R /* h ) . n ) ) by NDIFF_1:def 2
.= ( ( ( ||. h .|| " ) . n ) * ( R /. ( h . n ) ) ) by A10,A9,FUNCT_2:109
.= ( 0. T ) by A8,RLVECT_1:10;
end;
then A11: ( ( ||. h .|| " ) (#) ( R /* h ) ) is  constant by VALUED_0:def 18;
hence ( ( ||. h .|| " ) (#) ( R /* h ) ) is  convergent by NDIFF_1:18;
( ( ( ||. h .|| " ) (#) ( R /* h ) ) . ( 0 ) ) = ( 0. T ) by A7;
hence ( lim ( ( ||. h .|| " ) (#) ( R /* h ) ) ) = ( 0. T ) by A11,NDIFF_1:18;
end;
then reconsider R as (REST of S,T) by NDIFF_1:def 5;
A12:now
let x0 being (Point of S);
set N = the (Neighbourhood of x0);
A15: (for x being (Point of S) holds (x in N implies ( ( L0 /. x ) - ( L0 /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) )))
proof
let x being (Point of S);
A16: ( R /. ( x - x0 ) ) = ( R . ( x - x0 ) ) by A6,PARTFUN1:def 6
.= ( 0. T ) by FUNCOP_1:7;
A40: ( - 1 ) is Real by XREAL_0:def 1;
assume x in N;
thus ( ( L0 /. x ) - ( L0 /. x0 ) ) = ( ( L . ( x - p ) ) - ( L0 . x0 ) ) by P0
.= ( ( L . ( x - p ) ) - ( L . ( x0 - p ) ) ) by P0
.= ( ( LP . ( x - p ) ) + ( ( - 1 ) * ( LP . ( x0 - p ) ) ) ) by RLVECT_1:16
.= ( ( LP . ( x - p ) ) + ( LP . ( ( - 1 ) * ( x0 - p ) ) ) ) by A40,LOPBAN_1:def 5
.= ( LP . ( ( x - p ) + ( ( - 1 ) * ( x0 - p ) ) ) ) by GRCAT_1:def 8
.= ( LP . ( ( x - p ) - ( x0 - p ) ) ) by RLVECT_1:16
.= ( LP . ( x - ( ( x0 - p ) + p ) ) ) by RLVECT_1:27
.= ( LP . ( x - ( x0 - ( p - p ) ) ) ) by RLVECT_1:29
.= ( LP . ( x - ( x0 - ( 0. S ) ) ) ) by RLVECT_1:15
.= ( LP . ( x - x0 ) ) by RLVECT_1:13
.= ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ) by A16,RLVECT_1:4;
end;
hence L0 is_differentiable_in x0 by D1,NDIFF_1:def 6;
hence ( diff (L0,x0) ) = L by D1,A15,NDIFF_1:def 7;
end;
set g = ( f - L0 );
P1: ( dom g ) = ( ( dom f ) /\ ( dom L0 ) ) by VFUNCT_1:def 2
.= ( dom f ) by D1,XBOOLE_1:28;
F0: (for x being (Point of S) holds (x in ( dom g ) implies ( g /. x ) = ( ( f /. x ) - ( L . ( x - p ) ) )))
proof
let x being (Point of S);
assume x in ( dom g );
hence ( g /. x ) = ( ( f /. x ) - ( L0 /. x ) ) by VFUNCT_1:def 2
.= ( ( f /. x ) - ( L . ( x - p ) ) ) by P0;
end;
P2: (for x being (Point of S) holds (x in [. p,q .] implies g is_continuous_in x))
proof
let x being (Point of S);
assume x in [. p,q .];
then P20: f is_continuous_in x by A2;
( L0 | ( dom L0 ) ) is_continuous_in x by D1,D3,NFCONT_1:def 7;
then L0 is_continuous_in x by RELAT_1:68;
hence thesis by P20,NFCONT_1:15;
end;
P3: (for x being (Point of S) holds (x in ]. p,q .[ implies g is_differentiable_in x))
proof
let x being (Point of S);
assume x in ]. p,q .[;
then (f is_differentiable_in x & L0 is_differentiable_in x) by A2,A12;
hence g is_differentiable_in x by NDIFF_1:36;
end;
(for x being (Point of S) holds (x in ]. p,q .[ implies ||. ( diff (g,x) ) .|| <= M))
proof
let x being (Point of S);
assume P40: x in ]. p,q .[;
then Z1: f is_differentiable_in x by A2;
(L0 is_differentiable_in x & ( diff (L0,x) ) = L) by A12;
then ( diff (g,x) ) = ( ( diff (f,x) ) - L ) by Z1,NDIFF_1:36;
hence ||. ( diff (g,x) ) .|| <= M by A2,P40;
end;
then P5: ||. ( ( g /. q ) - ( g /. p ) ) .|| <= ( M * ||. ( q - p ) .|| ) by CKB29:1,A1,P1,P2,P3;
p in [. p,q .] by RLTOPSP1:68;
then ( g /. p ) = ( ( f /. p ) - ( L . ( p - p ) ) ) by A1,P1,F0;
then H1: ( g /. p ) = ( ( f /. p ) - ( LP . ( 0. S ) ) ) by RLVECT_1:15
.= ( ( f /. p ) - ( LP . ( ( 0 ) * p ) ) ) by RLVECT_1:10
.= ( ( f /. p ) - ( ( 0 ) * ( LP . p ) ) ) by LOPBAN_1:def 5
.= ( ( f /. p ) - ( 0. T ) ) by RLVECT_1:10
.= ( f /. p ) by RLVECT_1:13;
q in [. p,q .] by RLTOPSP1:68;
then ( g /. q ) = ( ( f /. q ) - ( L . ( q - p ) ) ) by A1,P1,F0;
then ( ( f /. q ) - ( ( L . ( q - p ) ) + ( f /. p ) ) ) = ( ( g /. q ) - ( g /. p ) ) by H1,RLVECT_1:27;
hence thesis by P5,RLVECT_1:27;
end;
