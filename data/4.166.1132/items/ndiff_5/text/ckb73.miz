environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB23,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0,CKB10,CKB15,CKB16,CKB17,CKB49;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve j for set;
ZE:now
let G being RealLinearSpace-Sequence;
( len ( carr G ) ) = ( len G ) by PRVECT_2:def 4;
hence ( dom ( carr G ) ) = ( Seg ( len G ) ) by FINSEQ_1:def 3
.= ( dom G ) by FINSEQ_1:def 3;
end;
reserve G for  non-trivial RealNormSpace-Sequence;
reserve x for (Point of ( product G ));
theorem
Th46: (for G being  non-trivial RealNormSpace-Sequence holds (for h being (FinSequence of ( product G )) holds (for y,x being (Point of ( product G )) holds (for y0,Z being (Element of ( product ( carr G ) )) holds (for j being (Element of ( NAT )) holds ((((((y = y0 & Z = ( 0. ( product G ) )) & ( len h ) = ( ( len G ) + 1 )) & 1 <= j) & j <= ( len G )) & (for i being Nat holds (i in ( dom h ) implies ( h /. i ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' i ) ) ) )))) implies ( x + ( h /. j ) ) = ( ( reproj (( modetrans (G,( ( ( len G ) + 1 ) -' j )) ),( x + ( h /. ( j + 1 ) ) )) ) . ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) )))))))
proof
let G being  non-trivial RealNormSpace-Sequence;
let h being (FinSequence of ( product G ));
let y being (Point of ( product G ));
let x being (Point of ( product G ));
let y0 being (Element of ( product ( carr G ) ));
let Z being (Element of ( product ( carr G ) ));
let j being (Element of ( NAT ));
assume that
A1: y = y0
and
A2: Z = ( 0. ( product G ) )
and
A3: ( len h ) = ( ( len G ) + 1 )
and
A4: (1 <= j & j <= ( len G ))
and
A5: (for i being Nat holds (i in ( dom h ) implies ( h /. i ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' i ) ) ) )));
( len G ) <= ( len h ) by A3,NAT_1:11;
then j <= ( len h ) by A4,XXREAL_0:2;
then j in ( Seg ( len h ) ) by A4;
then j in ( dom h ) by FINSEQ_1:def 3;
then X1: ( h /. j ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) ) by A5;
(1 <= ( j + 1 ) & ( j + 1 ) <= ( len h )) by A3,A4,NAT_1:12,XREAL_1:6;
then ( j + 1 ) in ( Seg ( len h ) );
then ( j + 1 ) in ( dom h ) by FINSEQ_1:def 3;
then X2: ( h /. ( j + 1 ) ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) ) by A5;
j in ( Seg ( len G ) ) by A4;
then ( ( ( len G ) -' j ) + 1 ) in ( Seg ( len G ) ) by NAT_2:6;
then ( ( ( len G ) + 1 ) -' j ) in ( Seg ( len G ) ) by A4,NAT_D:38;
then ( ( ( len G ) + 1 ) -' j ) in ( dom G ) by FINSEQ_1:def 3;
then A6: ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) = ( ( ( len G ) + 1 ) -' j ) by CKB33:def 1;
set xh = ( x + ( h /. ( j + 1 ) ) );
reconsider x1 = x,y1 = y as (Element of ( product ( carr G ) )) by CKB12:1;
reconsider xy = ( x + y ) as (Element of ( product ( carr G ) )) by CKB12:1;
xh is (Element of ( product ( carr G ) )) by CKB12:1;
then consider g being Function such that H2: ((xh = g & ( dom g ) = ( dom ( carr G ) )) & (for y being set holds (y in ( dom ( carr G ) ) implies ( g . y ) in ( ( carr G ) . y )))) by CARD_3:def 5;
PO: ( dom xh ) = ( dom G ) by H2,ZE;
( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) = ( xy . ( ( ( len G ) + 1 ) -' j ) ) by A6,CKB31:def 1;
then A8: ( ( reproj (( modetrans (G,( ( ( len G ) + 1 ) -' j )) ),( x + ( h /. ( j + 1 ) ) )) ) . ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) ) = ( xh +* (( modetrans (G,( ( ( len G ) + 1 ) -' j )) ),( xy . ( ( ( len G ) + 1 ) -' j ) )) ) by CKB32:def 1
.= ( xh +* ( ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) .--> ( xy . ( ( ( len G ) + 1 ) -' j ) ) ) ) by FUNCT_7:def 3,PO
.= ( xh +* ( { ( ( ( len G ) + 1 ) -' j ) } --> ( xy . ( ( ( len G ) + 1 ) -' j ) ) ) ) by A6,FUNCOP_1:def 9;
reconsider F1 = ( x + ( h /. j ) ) as ( len G ) -element FinSequence;
reconsider F2 = ( ( reproj (( modetrans (G,( ( ( len G ) + 1 ) -' j )) ),( x + ( h /. ( j + 1 ) ) )) ) . ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) ) as ( len G ) -element FinSequence;
reconsider h1 = ( h /. j ) as (Element of ( product ( carr G ) )) by CKB12:1;
reconsider xh1 = ( x + ( h /. j ) ) as (Element of ( product ( carr G ) )) by CKB12:1;
reconsider h2 = ( h /. ( j + 1 ) ) as (Element of ( product ( carr G ) )) by CKB12:1;
A9: (( len F1 ) = ( len G ) & ( len F2 ) = ( len G )) by CARD_1:def 7;
(for k being Nat holds ((1 <= k & k <= ( len F1 )) implies ( F1 . k ) = ( F2 . k )))
proof
let k being Nat;
assume W1: (1 <= k & k <= ( len F1 ));
then BB: k in ( Seg ( len F1 ) ) by FINSEQ_1:1;
then reconsider k1 = k as (Element of ( dom G )) by A9,FINSEQ_1:def 3;
( ( proj k1 ) . xh1 ) = ( ( ( proj k1 ) . x ) + ( ( proj k1 ) . ( h /. j ) ) ) by CKB53:1;
then B2: ( F1 . k ) = ( ( ( proj k1 ) . x ) + ( ( proj k1 ) . ( h /. j ) ) ) by CKB31:def 1;
y0 is (Element of (the carrier of ( product G ))) by CKB12:1;
then C0: ( dom y0 ) = ( Seg ( len G ) ) by FINSEQ_1:89;
G0: ( ( proj k1 ) . ( h /. j ) ) = ( h1 . k ) by CKB31:def 1;
G1: ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) ) = ( ( dom y0 ) /\ ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) by RELAT_1:61;
ZZ: (the carrier of ( product G )) = ( product ( carr G ) ) by CKB12:1;
per cases ;
suppose H1: (not k in ( Seg ( ( ( len G ) + 1 ) -' j ) ));

then (not k in ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) )) by G1,XBOOLE_0:def 4;
then ( ( proj k1 ) . ( h /. j ) ) = ( Z . k ) by G0,X1,FUNCT_4:11;
then H4: ( ( proj k1 ) . ( h /. j ) ) = ( ( proj k1 ) . ( 0. ( product G ) ) ) by A2,CKB31:def 1;
((not 1 <= k) or (not k <= ( ( ( len G ) + 1 ) -' j ))) by H1,FINSEQ_1:1;
then (not k in ( dom ( { ( ( ( len G ) + 1 ) -' j ) } --> ( xy . ( ( ( len G ) + 1 ) -' j ) ) ) )) by W1,TARSKI:def 1;
then ( ( xh +* ( { ( ( ( len G ) + 1 ) -' j ) } --> ( xy . ( ( ( len G ) + 1 ) -' j ) ) ) ) . k1 ) = ( xh . k1 ) by FUNCT_4:11;
then H3: ( F2 . k ) = ( ( proj k1 ) . ( x + ( h /. ( j + 1 ) ) ) ) by ZZ,A8,CKB31:def 1;
H2: ( ( proj k1 ) . ( h /. ( j + 1 ) ) ) = ( h2 . k ) by CKB31:def 1;
( ( ( len G ) + 1 ) -' ( j + 1 ) ) <= ( ( ( len G ) + 1 ) -' j ) by NAT_1:11,NAT_D:41;
then ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) c= ( Seg ( ( ( len G ) + 1 ) -' j ) ) by FINSEQ_1:5;
then (not k in ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) )) by H1;
then (not k in ( ( dom y0 ) /\ ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) )) by XBOOLE_0:def 4;
then (not k in ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) )) by RELAT_1:61;
then ( ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) ) . k ) = ( Z . k ) by FUNCT_4:11;
then ( ( proj k1 ) . ( h /. ( j + 1 ) ) ) = ( ( proj k1 ) . ( 0. ( product G ) ) ) by A2,H2,X2,CKB31:def 1;
hence ( F1 . k ) = ( F2 . k ) by H4,B2,H3,CKB53:1;
end;
suppose G7: k in ( Seg ( ( ( len G ) + 1 ) -' j ) );

then G2: k in ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) ) by G1,BB,C0,A9,XBOOLE_0:def 4;
then ( ( proj k1 ) . ( h /. j ) ) = ( ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) . k ) by G0,X1,FUNCT_4:13;
then ( ( proj k1 ) . ( h /. j ) ) = ( y0 . k ) by G2,FUNCT_1:47;
then G5: ( ( proj k1 ) . ( h /. j ) ) = ( ( proj k1 ) . y ) by A1,CKB31:def 1;
then H5: ( F1 . k ) = ( ( proj k1 ) . ( x + y ) ) by B2,CKB53:1;
per cases ;
suppose G4: k = ( ( ( len G ) + 1 ) -' j );

G3: k in { k } by TARSKI:def 1;
then k in ( dom ( { k } --> ( xy . k ) ) ) by FUNCOP_1:13;
then ( ( xh +* ( { k } --> ( xy . k ) ) ) . k1 ) = ( ( { k } --> ( xy . k ) ) . k ) by FUNCT_4:13;
then ( F2 . k ) = ( xy . k ) by A8,G3,G4,FUNCOP_1:7;
hence ( F1 . k ) = ( F2 . k ) by H5,CKB31:def 1;
end;
suppose G8: k <> ( ( ( len G ) + 1 ) -' j );

then (not k in ( dom ( { ( ( ( len G ) + 1 ) -' j ) } --> ( xy . ( ( ( len G ) + 1 ) -' j ) ) ) )) by TARSKI:def 1;
then ( F2 . k ) = ( xh . k ) by A8,FUNCT_4:11;
then G6: ( F2 . k ) = ( ( proj k1 ) . ( x + ( h /. ( j + 1 ) ) ) ) by ZZ,CKB31:def 1;
k <= ( ( ( len G ) + 1 ) -' j ) by G7,FINSEQ_1:1;
then k < ( ( ( len G ) + 1 ) -' j ) by G8,XXREAL_0:1;
then k <= ( ( ( ( len G ) + 1 ) -' j ) -' 1 ) by NAT_D:49;
then k <= ( ( ( len G ) + 1 ) -' ( j + 1 ) ) by NAT_2:30;
then k in ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) by W1,FINSEQ_1:1;
then W2: k in ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) ) by BB,C0,A9,RELAT_1:57;
( ( proj k1 ) . ( h /. ( j + 1 ) ) ) = ( h2 . k ) by CKB31:def 1;
then ( ( proj k1 ) . ( h /. ( j + 1 ) ) ) = ( ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) . k1 ) by X2,W2,FUNCT_4:13;
then ( ( proj k1 ) . ( h /. ( j + 1 ) ) ) = ( y0 . k ) by W2,FUNCT_1:47;
then ( ( proj k1 ) . ( h /. ( j + 1 ) ) ) = ( ( proj k1 ) . y ) by A1,CKB31:def 1;
hence ( F1 . k ) = ( F2 . k ) by G5,B2,G6,CKB53:1;
end;
end;
end;
hence thesis by A9,FINSEQ_1:def 17;
end;
