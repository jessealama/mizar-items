environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB23,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0,CKB10,CKB15,CKB16,CKB17,CKB49;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve p for Real;
reserve S for non  trivial RealNormSpace;
reserve x0 for (Point of S);
LmX:now
let S being RealLinearSpace;
let p being (Point of S);
let q being (Point of S);
let z1 being Real;
thus ( p + ( z1 * ( q - p ) ) ) = ( p + ( ( z1 * q ) + ( z1 * ( - p ) ) ) ) by RLVECT_1:def 5
.= ( p + ( ( z1 * q ) + ( - ( z1 * p ) ) ) ) by RLVECT_1:25
.= ( ( p + ( - ( z1 * p ) ) ) + ( z1 * q ) ) by RLVECT_1:def 3
.= ( ( ( 1 * p ) - ( z1 * p ) ) + ( z1 * q ) ) by RLVECT_1:def 8
.= ( ( ( 1 - z1 ) * p ) + ( z1 * q ) ) by RLVECT_1:35;
end;
reserve G for  non-trivial RealNormSpace-Sequence;
reserve F for non  trivial RealNormSpace;
reserve i for (Element of ( dom G ));
reserve f for (PartFunc of ( product G ),F);
reserve x for (Point of ( product G ));
theorem
XTh42: (for G being  non-trivial RealNormSpace-Sequence holds (for F being non  trivial RealNormSpace holds (for f being (PartFunc of ( product G ),F) holds (for x being (Point of ( product G )) holds (for i being set holds (for M being Real holds (for L being (Point of ( R_NormSpace_of_BoundedLinearOperators (( G . ( modetrans (G,i) ) ),F) )) holds (for p,q being (Point of ( G . ( modetrans (G,i) ) )) holds ((((i in ( dom G ) & (for h being (Point of ( G . ( modetrans (G,i) ) )) holds (h in ]. p,q .[ implies ||. ( ( partdiff (f,( ( reproj (( modetrans (G,i) ),x) ) . h ),i) ) - L ) .|| <= M))) & (for h being (Point of ( G . ( modetrans (G,i) ) )) holds (h in [. p,q .] implies ( ( reproj (( modetrans (G,i) ),x) ) . h ) in ( dom f )))) & (for h being (Point of ( G . ( modetrans (G,i) ) )) holds (h in [. p,q .] implies f is_partial_differentiable_in ( ( reproj (( modetrans (G,i) ),x) ) . h ),i))) implies ||. ( ( ( f /. ( ( reproj (( modetrans (G,i) ),x) ) . q ) ) - ( f /. ( ( reproj (( modetrans (G,i) ),x) ) . p ) ) ) - ( L . ( q - p ) ) ) .|| <= ( M * ||. ( q - p ) .|| ))))))))))
proof
let G being  non-trivial RealNormSpace-Sequence;
let F being non  trivial RealNormSpace;
let f being (PartFunc of ( product G ),F);
let x being (Point of ( product G ));
let i being set;
let M being Real;
let L being (Point of ( R_NormSpace_of_BoundedLinearOperators (( G . ( modetrans (G,i) ) ),F) ));
let p being (Point of ( G . ( modetrans (G,i) ) ));
let q being (Point of ( G . ( modetrans (G,i) ) ));
assume A1: (((i in ( dom G ) & (for h being (Point of ( G . ( modetrans (G,i) ) )) holds (h in ]. p,q .[ implies ||. ( ( partdiff (f,( ( reproj (( modetrans (G,i) ),x) ) . h ),i) ) - L ) .|| <= M))) & (for h being (Point of ( G . ( modetrans (G,i) ) )) holds (h in [. p,q .] implies ( ( reproj (( modetrans (G,i) ),x) ) . h ) in ( dom f )))) & (for h being (Point of ( G . ( modetrans (G,i) ) )) holds (h in [. p,q .] implies f is_partial_differentiable_in ( ( reproj (( modetrans (G,i) ),x) ) . h ),i)));
set m = ( len G );
set S = ( G . ( modetrans (G,i) ) );
set g = ( f * ( reproj (( modetrans (G,i) ),x) ) );
A6:now
let h being set;
assume A2: h in [. p,q .];
then reconsider h1 = h as (Point of S);
A3: ( dom ( reproj (( modetrans (G,i) ),x) ) ) = (the carrier of S) by FUNCT_2:def 1;
( ( reproj (( modetrans (G,i) ),x) ) . h1 ) in ( dom f ) by A1,A2;
hence h in ( dom g ) by A3,FUNCT_1:11;
end;
then A4: [. p,q .] c= ( dom g ) by TARSKI:def 3;
A5:now
let x0 being (Point of S);
assume A6: x0 in [. p,q .];
set y = ( ( reproj (( modetrans (G,i) ),x) ) . x0 );
A7: ( ( proj ( modetrans (G,i) ) ) . y ) = x0 by CKB65:1;
f is_partial_differentiable_in y,i by A1,A6;
then ( f * ( reproj (( modetrans (G,i) ),y) ) ) is_differentiable_in x0 by A7,CKB34:def 1;
hence g is_differentiable_in x0 by CKB67:1;
end;
now
let z being set;
assume z in ]. p,q .[;
then consider z1 being Real such that AB: ((z = ( p + ( z1 * ( q - p ) ) ) & ( 0 ) < z1) & z1 < 1);
z = ( ( ( 1 - z1 ) * p ) + ( z1 * q ) ) by AB,LmX;
then z in { ( ( ( 1 - r1 ) * p ) + ( r1 * q ) ) where r1 is Real: (( 0 ) <= r1 & r1 <= 1) } by AB;
hence z in [. p,q .] by RLTOPSP1:def 2;
end;
then ]. p,q .[ c= [. p,q .] by TARSKI:def 3;
then A10: (for x being (Point of S) holds (x in ]. p,q .[ implies g is_differentiable_in x)) by A5;
A11: (for x being (Point of S) holds (x in [. p,q .] implies g is_continuous_in x)) by A5,NDIFF_1:44;
U0:now
let h being (Point of S);
set y = ( ( reproj (( modetrans (G,i) ),x) ) . h );
assume h in ]. p,q .[;
then X1: ||. ( ( partdiff (f,y,i) ) - L ) .|| <= M by A1;
( ( proj ( modetrans (G,i) ) ) . y ) = h by CKB65:1;
hence ||. ( ( diff (g,h) ) - L ) .|| <= M by X1,CKB67:1;
end;
U1: (p in ( dom g ) & q in ( dom g )) by A6,RLTOPSP1:68;
(( f /. ( ( reproj (( modetrans (G,i) ),x) ) . p ) ) = ( f /. ( ( reproj (( modetrans (G,i) ),x) ) /. p ) ) & ( f /. ( ( reproj (( modetrans (G,i) ),x) ) . q ) ) = ( f /. ( ( reproj (( modetrans (G,i) ),x) ) /. q ) ));
then (( f /. ( ( reproj (( modetrans (G,i) ),x) ) . p ) ) = ( g /. p ) & ( f /. ( ( reproj (( modetrans (G,i) ),x) ) . q ) ) = ( g /. q )) by U1,PARTFUN2:3;
hence ||. ( ( ( f /. ( ( reproj (( modetrans (G,i) ),x) ) . q ) ) - ( f /. ( ( reproj (( modetrans (G,i) ),x) ) . p ) ) ) - ( L . ( q - p ) ) ) .|| <= ( M * ||. ( q - p ) .|| ) by U0,CKB30:1,A4,A10,A11;
end;
