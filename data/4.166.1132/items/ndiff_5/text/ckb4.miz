environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve r for Real;
reserve S for non  trivial RealNormSpace;
reserve T for non  trivial RealNormSpace;
theorem
NDIFF211: (for R1 being (REST of S) holds (( R1 /. ( 0 ) ) = ( 0. S ) implies (for R2 being (REST of S,T) holds (( R2 /. ( 0. S ) ) = ( 0. T ) implies (for L being (LINEAR of S) holds ( R2 * ( L + R1 ) ) is (REST of T))))))
proof
let R1 being (REST of S);
assume ( R1 /. ( 0 ) ) = ( 0. S );
then consider d0 being Real such that A1: ( 0 ) < d0 and A2: (for h being Real holds (|. h .| < d0 implies ||. ( R1 /. h ) .|| <= ( 1 * |. h .| ))) by CKB2:1;
let R2 being (REST of S,T);
assume that
A3: ( R2 /. ( 0. S ) ) = ( 0. T );
let L being (LINEAR of S);
consider r being (Point of S) such that A4: (for h being Real holds ( L . h ) = ( h * r )) by NDIFF_3:def 2;
reconsider K = ||. r .|| as Real;
R2 is  total by NDIFF_1:def 5;
then ( dom R2 ) = (the carrier of S) by PARTFUN1:def 2;
then A6: ( rng ( L + R1 ) ) c= ( dom R2 );
R1 is  total by NDIFF_3:def 1;
then ( L + R1 ) is  total by VFUNCT_1:32;
then A8: ( dom ( L + R1 ) ) = ( REAL ) by PARTFUN1:def 2;
then ( dom ( R2 * ( L + R1 ) ) ) = ( REAL ) by A6,RELAT_1:27;
then A9: ( R2 * ( L + R1 ) ) is  total by PARTFUN1:def 2;
now
let e being Real;
assume that
A10: e > ( 0 );
A11: ( e / 2 ) < e by A10,XREAL_1:216;
set e1 = ( ( e / 2 ) / ( 1 + K ) );
consider d being Real such that A12: ( 0 ) < d and A13: (for z being (Point of S) holds (||. z .|| < d implies ||. ( R2 /. z ) .|| <= ( e1 * ||. z .|| ))) by A3,A10,NDIFF_2:7;
set d1 = ( d / ( 1 + K ) );
set dd1 = ( min (d0,d1) );
A14: (dd1 <= d1 & dd1 <= d0) by XXREAL_0:17;
A16:now
let h being Real;
assume that
A17: h <> ( 0 )
and
A18: |. h .| < dd1;
|. h .| < d0 by A14,A18,XXREAL_0:2;
then A19: ||. ( R1 /. h ) .|| <= ( 1 * |. h .| ) by A2;
reconsider p0 = ( 0 ) as Real;
( L . h ) = ( h * r ) by A4;
then ( ( ||. ( L . h ) .|| - ( K * |. h .| ) ) + ( K * |. h .| ) ) <= ( p0 + ( K * |. h .| ) ) by NORMSP_1:def 1;
then (||. ( ( L . h ) + ( R1 /. h ) ) .|| <= ( ||. ( L . h ) .|| + ||. ( R1 /. h ) .|| ) & ( ||. ( L . h ) .|| + ||. ( R1 /. h ) .|| ) <= ( ( K * |. h .| ) + ( 1 * |. h .| ) )) by A19,NORMSP_1:def 1,XREAL_1:7;
then A20: ||. ( ( L . h ) + ( R1 /. h ) ) .|| <= ( ( K + 1 ) * |. h .| ) by XXREAL_0:2;
then A21: ( e1 * ||. ( ( L . h ) + ( R1 /. h ) ) .|| ) <= ( e1 * ( ( K + 1 ) * |. h .| ) ) by A10,XREAL_1:64;
|. h .| < d1 by A14,A18,XXREAL_0:2;
then ( ( K + 1 ) * |. h .| ) < ( ( K + 1 ) * d1 ) by XREAL_1:68;
then ||. ( ( L . h ) + ( R1 /. h ) ) .|| < ( ( K + 1 ) * d1 ) by A20,XXREAL_0:2;
then ||. ( ( L . h ) + ( R1 /. h ) ) .|| < d by XCMPLX_1:87;
then ||. ( R2 /. ( ( L . h ) + ( R1 /. h ) ) ) .|| <= ( e1 * ||. ( ( L . h ) + ( R1 /. h ) ) .|| ) by A13;
then A22: ||. ( R2 /. ( ( L . h ) + ( R1 /. h ) ) ) .|| <= ( e1 * ( ( K + 1 ) * |. h .| ) ) by A21,XXREAL_0:2;
A23: ( R2 /. ( ( L . h ) + ( R1 /. h ) ) ) = ( R2 /. ( ( L /. h ) + ( R1 /. h ) ) )
.= ( R2 /. ( ( L + R1 ) /. h ) ) by A8,VFUNCT_1:def 1
.= ( ( R2 * ( L + R1 ) ) /. h ) by A8,A6,PARTFUN2:5;
A24: |. h .| <> ( 0 ) by A17,COMPLEX1:45;
then |. h .| > ( 0 ) by COMPLEX1:46;
then ( ( |. h .| " ) * ||. ( ( R2 * ( L + R1 ) ) /. h ) .|| ) <= ( ( |. h .| " ) * ( ( e1 * ( K + 1 ) ) * |. h .| ) ) by A23,A22,XREAL_1:64;
then ( ( |. h .| " ) * ||. ( ( R2 * ( L + R1 ) ) /. h ) .|| ) <= ( ( ( |. h .| * ( |. h .| " ) ) * e1 ) * ( K + 1 ) );
then ( ( |. h .| " ) * ||. ( ( R2 * ( L + R1 ) ) /. h ) .|| ) <= ( ( 1 * e1 ) * ( K + 1 ) ) by A24,XCMPLX_0:def 7;
then ( ( |. h .| " ) * ||. ( ( R2 * ( L + R1 ) ) /. h ) .|| ) <= ( e / 2 ) by XCMPLX_1:87;
hence ( ( |. h .| " ) * ||. ( ( R2 * ( L + R1 ) ) /. h ) .|| ) < e by A11,XXREAL_0:2;
end;
( 0 ) < dd1 by A1,A12,XXREAL_0:15;
hence (ex dd1 being Real st (dd1 > ( 0 ) & (for h being Real holds ((h <> ( 0 ) & |. h .| < dd1) implies ( ( |. h .| " ) * ||. ( ( R2 * ( L + R1 ) ) /. h ) .|| ) < e)))) by A16;
end;
hence thesis by A9,CKB1:1;
end;
