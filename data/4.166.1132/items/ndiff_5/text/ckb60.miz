environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB23,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0,CKB10,CKB15,CKB16,CKB17,CKB49;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve r for Real;
reserve S for non  trivial RealNormSpace;
reserve G for  non-trivial RealNormSpace-Sequence;
reserve F for non  trivial RealNormSpace;
reserve i for (Element of ( dom G ));
reserve f for (PartFunc of ( product G ),F);
reserve x for (Point of ( product G ));
theorem
Lm8: (for G being  non-trivial RealNormSpace-Sequence holds (for S being non  trivial RealNormSpace holds (for f being (PartFunc of ( product G ),S) holds (for x being (Point of ( product G )) holds (ex L being  bounded (LinearOperator of ( product G ),S) st (for h being (Element of ( product G )) holds (ex w being (FinSequence of S) st ((( dom w ) = ( Seg ( len G ) ) & (for i being (Element of ( NAT )) holds (i in ( Seg ( len G ) ) implies ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . h ) )))) & ( L . h ) = ( Sum w )))))))))
proof
let G being  non-trivial RealNormSpace-Sequence;
let S being non  trivial RealNormSpace;
let f being (PartFunc of ( product G ),S);
let x being (Point of ( product G ));
set m = ( len G );
defpred LX[ set,set ]
 means
(ex w being (FinSequence of S) st ((( dom w ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . $1 ) )))) & $2 = ( Sum w )));
A1: (for v being (Element of ( product G )) holds (ex y being (Element of S) st LX[ v,y ]))
proof
let v being (Element of ( product G ));
defpred YX[ set,set ]
 means
(ex i being (Element of ( NAT )) st (i = $1 & $2 = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . v ) )));
A2: (for i being Nat holds (i in ( Seg m ) implies (ex r being (Element of S) st YX[ i,r ])))
proof
let i being Nat;
assume i in ( Seg m );
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
( ( partdiff (f,x,i0) ) . ( ( proj ( modetrans (G,i0) ) ) . v ) ) in (the carrier of S);
hence thesis;
end;
consider w being (FinSequence of S) such that A3: (( dom w ) = ( Seg m ) & (for i being Nat holds (i in ( Seg m ) implies YX[ i,( w . i ) ]))) from FINSEQ_1:sch 5(A2);
A4:now
let i being (Element of ( NAT ));
assume i in ( Seg m );
then YX[ i,( w . i ) ] by A3;
hence ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . v ) );
end;
reconsider w0 = ( Sum w ) as (Element of S);
(ex w being (FinSequence of S) st ((( dom w ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . v ) )))) & w0 = ( Sum w ))) by A4,A3;
hence (ex y0 being (Element of S) st LX[ v,y0 ]);
end;
consider L being (Function of ( product G ),S) such that A5: (for h being (Element of ( product G )) holds LX[ h,( L . h ) ]) from FUNCT_2:sch 3(A1);
A6: (for s,t being (Element of ( product G )) holds ( L . ( s + t ) ) = ( ( L . s ) + ( L . t ) ))
proof
let s being (Element of ( product G ));
let t being (Element of ( product G ));
consider w being (FinSequence of S) such that A7: ((( dom w ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . s ) )))) & ( L . s ) = ( Sum w )) by A5;
consider v being (FinSequence of S) such that A8: ((( dom v ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( v . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . t ) )))) & ( L . t ) = ( Sum v )) by A5;
consider u being (FinSequence of S) such that A9: ((( dom u ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( u . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . ( s + t ) ) )))) & ( L . ( s + t ) ) = ( Sum u )) by A5;
B1: ( len w ) = m by A7,FINSEQ_1:def 3;
B2: ( len v ) = m by A8,FINSEQ_1:def 3;
B3: ( len u ) = m by A9,FINSEQ_1:def 3;
now
let i being (Element of ( NAT ));
assume A11: i in ( dom w );
then A12: (1 <= i & i <= m) by A7,FINSEQ_1:1;
then ( w /. i ) = ( w . i ) by B1,FINSEQ_4:15;
then A13: ( w /. i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . s ) ) by A7,A11;
( v /. i ) = ( v . i ) by A12,B2,FINSEQ_4:15;
then A14: ( v /. i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . t ) ) by A7,A8,A11;
F1: ( partdiff (f,x,i) ) is  bounded  bounded (LinearOperator of ( G . ( modetrans (G,i) ) ),S) by LOPBAN_1:def 9;
( u . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . ( s + t ) ) ) by A7,A9,A11;
then ( u . i ) = ( ( partdiff (f,x,i) ) . ( ( ( proj ( modetrans (G,i) ) ) . s ) + ( ( proj ( modetrans (G,i) ) ) . t ) ) ) by CKB53:1;
hence ( u . i ) = ( ( w /. i ) + ( v /. i ) ) by A13,A14,F1,GRCAT_1:def 8;
end;
hence ( L . ( s + t ) ) = ( ( L . s ) + ( L . t ) ) by A9,A7,A8,B1,B2,B3,RLVECT_2:2;
end;
(for s being (Element of ( product G )) holds (for r being Real holds ( L . ( r * s ) ) = ( r * ( L . s ) )))
proof
let s being (Element of ( product G ));
let r being Real;
consider w being (FinSequence of S) such that A15: ((( dom w ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . s ) )))) & ( L . s ) = ( Sum w )) by A5;
consider u being (FinSequence of S) such that A16: ((( dom u ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( u . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . ( r * s ) ) )))) & ( L . ( r * s ) ) = ( Sum u )) by A5;
B1: (( len w ) = m & ( len u ) = m) by A15,A16,FINSEQ_1:def 3;
now
let i being (Element of ( NAT ));
assume A17: i in ( dom w );
then (1 <= i & i <= m) by A15,FINSEQ_1:1;
then ( w /. i ) = ( w . i ) by B1,FINSEQ_4:15;
then A19: ( w /. i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . s ) ) by A15,A17;
F1: ( partdiff (f,x,i) ) is  bounded  bounded (LinearOperator of ( G . ( modetrans (G,i) ) ),S) by LOPBAN_1:def 9;
( u . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . ( r * s ) ) ) by A15,A16,A17;
then ( u . i ) = ( ( partdiff (f,x,i) ) . ( r * ( ( proj ( modetrans (G,i) ) ) . s ) ) ) by CKB58:1;
hence ( u . i ) = ( r * ( w /. i ) ) by A19,F1,LOPBAN_1:def 5;
end;
hence ( L . ( r * s ) ) = ( r * ( L . s ) ) by A15,A16,B1,RLVECT_2:3;
end;
then reconsider L as (LinearOperator of ( product G ),S) by A6,GRCAT_1:def 8,LOPBAN_1:def 5;
defpred YXL[ set,set ]
 means
(ex i being (Element of ( NAT )) st (i = $1 & $2 = ||. ( partdiff (f,x,i) ) .||));
XA2: (for i being Nat holds (i in ( Seg m ) implies (ex r being (Element of ( REAL )) st YXL[ i,r ])))
proof
let i being Nat;
assume i in ( Seg m );
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider r = ||. ( partdiff (f,x,i0) ) .|| as (Element of ( REAL ));
YXL[ i,r ];
hence thesis;
end;
consider Kw being (FinSequence of ( REAL )) such that LK10: (( dom Kw ) = ( Seg m ) & (for i being Nat holds (i in ( Seg m ) implies YXL[ i,( Kw . i ) ]))) from FINSEQ_1:sch 5(XA2);
LK1:now
let i being (Element of ( NAT ));
assume i in ( Seg m );
then YXL[ i,( Kw . i ) ] by LK10;
hence ( Kw . i ) = ||. ( partdiff (f,x,i) ) .||;
end;
LK20:now
let i being Nat;
assume i in ( dom Kw );
then ( Kw . i ) = ||. ( partdiff (f,x,i) ) .|| by LK1,LK10;
hence ( 0 ) <= ( Kw . i );
end;
set LK = ( Sum Kw );
LK2: ( 0 ) <= LK by LK20,RVSUM_1:84;
(for s being (Element of ( product G )) holds ||. ( L . s ) .|| <= ( LK * ||. s .|| ))
proof
let s being (Element of ( product G ));
consider w being (FinSequence of S) such that H1: ((( dom w ) = ( Seg m ) & (for i being (Element of ( NAT )) holds (i in ( Seg m ) implies ( w . i ) = ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . s ) )))) & ( L . s ) = ( Sum w )) by A5;
defpred YXD[ set,set ]
 means
(ex i being (Element of ( NAT )) st (i = $1 & $2 = ( ||. ( partdiff (f,x,i) ) .|| * ||. s .|| )));
XA3: (for i being Nat holds (i in ( Seg m ) implies (ex r being (Element of ( REAL )) st YXD[ i,r ])))
proof
let i being Nat;
assume i in ( Seg m );
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider r = ( ||. ( partdiff (f,x,i0) ) .|| * ||. s .|| ) as (Element of ( REAL ));
YXD[ i,r ];
hence thesis;
end;
consider Dw being (FinSequence of ( REAL )) such that LK30: (( dom Dw ) = ( Seg m ) & (for i being Nat holds (i in ( Seg m ) implies YXD[ i,( Dw . i ) ]))) from FINSEQ_1:sch 5(XA3);
LK3:now
let i being (Element of ( NAT ));
assume i in ( Seg m );
then YXD[ i,( Dw . i ) ] by LK30;
hence ( Dw . i ) = ( ||. ( partdiff (f,x,i) ) .|| * ||. s .|| );
end;
defpred YXH[ set,set ]
 means
(ex i being (Element of ( NAT )) st (i = $1 & $2 = ||. ( w /. i ) .||));
XA4: (for i being Nat holds (i in ( Seg m ) implies (ex r being (Element of ( REAL )) st YXH[ i,r ])))
proof
let i being Nat;
assume i in ( Seg m );
reconsider i0 = i as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider r = ||. ( w /. i0 ) .|| as (Element of ( REAL ));
YXH[ i,r ];
hence thesis;
end;
consider yseq being (FinSequence of ( REAL )) such that H20: (( dom yseq ) = ( Seg m ) & (for i being Nat holds (i in ( Seg m ) implies YXH[ i,( yseq . i ) ]))) from FINSEQ_1:sch 5(XA4);
H2:now
let i being (Element of ( NAT ));
assume i in ( Seg m );
then YXH[ i,( yseq . i ) ] by H20;
hence ( yseq . i ) = ||. ( w /. i ) .||;
end;
( len w ) = ( len yseq ) by H1,H20,FINSEQ_3:29;
then H3: ||. ( L . s ) .|| <= ( Sum yseq ) by H1,H2,CKB7:1;
m = ( len yseq ) by H20,FINSEQ_1:def 3;
then X1: yseq is (Element of ( m -tuples_on ( REAL ) )) by FINSEQ_2:92;
( len Dw ) = m by LK30,FINSEQ_1:def 3;
then X1A: Dw is (Element of ( m -tuples_on ( REAL ) )) by FINSEQ_2:92;
now
let i being Nat;
assume H40: i in ( Seg m );
then H41: ( yseq . i ) = ||. ( w /. i ) .|| by H2;
( w /. i ) = ( w . i ) by H40,H1,PARTFUN1:def 6;
then H5: ||. ( w /. i ) .|| = ||. ( ( partdiff (f,x,i) ) . ( ( proj ( modetrans (G,i) ) ) . s ) ) .|| by H1,H40;
reconsider DF1 = ( partdiff (f,x,i) ) as  bounded (LinearOperator of ( G . ( modetrans (G,i) ) ),S) by LOPBAN_1:def 9;
H6: ||. ( DF1 . ( ( proj ( modetrans (G,i) ) ) . s ) ) .|| <= ( ||. ( partdiff (f,x,i) ) .|| * ||. ( ( proj ( modetrans (G,i) ) ) . s ) .|| ) by LOPBAN_1:32;
( product G ) = NORMSTR (# ( product ( carr G ) ),( zeros G ),[: ( addop G ) :],[: ( multop G ) :],( productnorm G ) #) by PRVECT_2:6;
then reconsider ss = s as (Element of ( product ( carr G ) ));
reconsider xi = ( ( proj ( modetrans (G,i) ) ) . s ) as (Point of ( G . ( modetrans (G,i) ) ));
xi = ( ss . ( modetrans (G,i) ) ) by CKB31:def 1;
then ( ||. ( partdiff (f,x,i) ) .|| * ||. ( ( proj ( modetrans (G,i) ) ) . s ) .|| ) <= ( ||. ( partdiff (f,x,i) ) .|| * ||. s .|| ) by PRVECT_2:10,XREAL_1:64;
then ||. ( w /. i ) .|| <= ( ||. ( partdiff (f,x,i) ) .|| * ||. s .|| ) by H5,H6,XXREAL_0:2;
hence ( yseq . i ) <= ( Dw . i ) by LK3,H40,H41;
end;
then H7: ( Sum yseq ) <= ( Sum Dw ) by X1,X1A,RVSUM_1:82;
( len Kw ) = m by LK10,FINSEQ_1:def 3;
then reconsider KKw = Kw as (Element of ( m -tuples_on ( REAL ) )) by FINSEQ_2:92;
( ||. s .|| * KKw ) in ( m -tuples_on ( REAL ) );
then (ex t being (Element of ( ( REAL ) * )) st (t = ( ||. s .|| * KKw ) & ( len t ) = m));
then Z1: ( dom Dw ) = ( dom ( ||. s .|| * Kw ) ) by LK30,FINSEQ_1:def 3;
now
let k being Nat;
assume Z3: k in ( dom Dw );
then ( Dw . k ) = ( ||. ( partdiff (f,x,k) ) .|| * ||. s .|| ) by LK3,LK30;
then ( Dw . k ) = ( ||. s .|| * ( Kw . k ) ) by LK1,Z3,LK30;
hence ( Dw . k ) = ( ( ||. s .|| * Kw ) . k ) by RVSUM_1:45;
end;
then Dw = ( ||. s .|| * Kw ) by Z1,FINSEQ_1:13;
then ( Sum Dw ) = ( ( Sum Kw ) * ||. s .|| ) by RVSUM_1:87;
hence thesis by H3,H7,XXREAL_0:2;
end;
then reconsider L as  bounded (LinearOperator of ( product G ),S) by LK2,LOPBAN_1:def 8;
take L;
thus thesis by A5;
end;
