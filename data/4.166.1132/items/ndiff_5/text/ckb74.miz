environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB23,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0,CKB10,CKB15,CKB16,CKB17,CKB49;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve j for set;
reserve G for  non-trivial RealNormSpace-Sequence;
reserve x for (Point of ( product G ));
theorem
Th46X: (for G being  non-trivial RealNormSpace-Sequence holds (for h being (FinSequence of ( product G )) holds (for y,x being (Point of ( product G )) holds (for y0,Z being (Element of ( product ( carr G ) )) holds (for j being (Element of ( NAT )) holds ((((((y = y0 & Z = ( 0. ( product G ) )) & ( len h ) = ( ( len G ) + 1 )) & 1 <= j) & j <= ( len G )) & (for i being Nat holds (i in ( dom h ) implies ( h /. i ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' i ) ) ) )))) implies ( ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) - ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + ( h /. ( j + 1 ) ) ) ) ) = ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . y )))))))
proof
let G being  non-trivial RealNormSpace-Sequence;
let h being (FinSequence of ( product G ));
let y being (Point of ( product G ));
let x being (Point of ( product G ));
let y0 being (Element of ( product ( carr G ) ));
let Z being (Element of ( product ( carr G ) ));
let j being (Element of ( NAT ));
assume that
A1: y = y0
and
A2: Z = ( 0. ( product G ) )
and
A3: ((( len h ) = ( ( len G ) + 1 ) & 1 <= j) & j <= ( len G ))
and
A4: (for i being Nat holds (i in ( dom h ) implies ( h /. i ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' i ) ) ) )));
( x + ( h /. j ) ) = ( ( reproj (( modetrans (G,( ( ( len G ) + 1 ) -' j )) ),( x + ( h /. ( j + 1 ) ) )) ) . ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) ) by A1,A2,A3,A4,CKB73:1;
then ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + ( h /. j ) ) ) = ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) by CKB65:1;
then A6: ( ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) - ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + ( h /. ( j + 1 ) ) ) ) ) = ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( ( x + ( h /. j ) ) - ( x + ( h /. ( j + 1 ) ) ) ) ) by CKB55:1;
( ( x + ( h /. j ) ) - ( x + ( h /. ( j + 1 ) ) ) ) = ( ( ( ( h /. j ) + x ) - x ) - ( h /. ( j + 1 ) ) ) by RLVECT_1:27
.= ( ( ( h /. j ) + ( x - x ) ) - ( h /. ( j + 1 ) ) ) by RLVECT_1:28
.= ( ( ( h /. j ) + ( 0. ( product G ) ) ) - ( h /. ( j + 1 ) ) ) by RLVECT_1:15
.= ( ( h /. j ) - ( h /. ( j + 1 ) ) ) by RLVECT_1:4;
then A7: ( ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) - ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + ( h /. ( j + 1 ) ) ) ) ) = ( ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( h /. j ) ) - ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( h /. ( j + 1 ) ) ) ) by A6,CKB55:1;
y0 is (Element of (the carrier of ( product G ))) by CKB12:1;
then B1: ( dom y0 ) = ( Seg ( len G ) ) by FINSEQ_1:89;
j in ( Seg ( len G ) ) by A3;
then ( ( ( len G ) -' j ) + 1 ) in ( Seg ( len G ) ) by NAT_2:6;
then B2: ( ( ( len G ) + 1 ) -' j ) in ( Seg ( len G ) ) by A3,NAT_D:38;
A8: j < ( ( len G ) + 1 ) by A3,NAT_1:13;
then ( ( ( len G ) + 1 ) -' j ) in ( Seg ( ( ( len G ) + 1 ) -' j ) ) by FINSEQ_1:3,NAT_D:36;
then B5: ( ( ( len G ) + 1 ) -' j ) in ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) ) by B1,B2,RELAT_1:57;
( ( ( len G ) + 1 ) -' j ) = ( ( ( ( len G ) + 1 ) -' ( j + 1 ) ) + 1 ) by A8,NAT_2:7;
then C1: ( ( ( len G ) + 1 ) -' ( j + 1 ) ) < ( ( ( len G ) + 1 ) -' j ) by NAT_1:13;
( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) ) c= ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) by RELAT_1:58;
then C3: (not ( ( ( len G ) + 1 ) -' j ) in ( dom ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) )) by C1,FINSEQ_1:1;
reconsider h1 = ( h /. j ) as (Element of ( product ( carr G ) )) by CKB12:1;
reconsider h2 = ( h /. ( j + 1 ) ) as (Element of ( product ( carr G ) )) by CKB12:1;
j in ( Seg ( len h ) ) by A3,A8;
then j in ( dom h ) by FINSEQ_1:def 3;
then B6: ( h /. j ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) ) by A4;
( ( ( len G ) + 1 ) -' j ) in ( dom G ) by B2,FINSEQ_1:def 3;
then B3: ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) = ( ( ( len G ) + 1 ) -' j ) by CKB33:def 1;
then B7: ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( h /. j ) ) = ( h1 . ( ( ( len G ) + 1 ) -' j ) ) by CKB31:def 1
.= ( ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) . ( ( ( len G ) + 1 ) -' j ) ) by B5,B6,FUNCT_4:13
.= ( y0 . ( ( ( len G ) + 1 ) -' j ) ) by B5,FUNCT_1:47
.= ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . y ) by A1,B3,CKB31:def 1;
(1 <= ( j + 1 ) & ( j + 1 ) <= ( len h )) by A3,NAT_1:12,XREAL_1:6;
then ( j + 1 ) in ( Seg ( len h ) );
then ( j + 1 ) in ( dom h ) by FINSEQ_1:def 3;
then B8: ( h /. ( j + 1 ) ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' ( j + 1 ) ) ) ) ) by A4;
( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( h /. ( j + 1 ) ) ) = ( h2 . ( ( ( len G ) + 1 ) -' j ) ) by B3,CKB31:def 1
.= ( Z . ( ( ( len G ) + 1 ) -' j ) ) by B8,C3,FUNCT_4:11
.= ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( 0. ( product G ) ) ) by B3,A2,CKB31:def 1;
hence ( ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + y ) ) - ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( x + ( h /. ( j + 1 ) ) ) ) ) = ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . ( y - ( 0. ( product G ) ) ) ) by A7,B7,CKB55:1
.= ( ( proj ( modetrans (G,( ( ( len G ) + 1 ) -' j )) ) ) . y ) by RLVECT_1:13;
end;
