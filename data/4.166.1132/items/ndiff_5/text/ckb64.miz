environ
vocabularies NUMBERS,REAL_1,ZFMISC_1,NORMSP_1,PRE_TOPC,PARTFUN1,FUNCT_1,FUNCT_4,NAT_1,FDIFF_1,SUBSET_1,SEQ_4,RELAT_1,GLIB_000,LOPBAN_1,ORDINAL4,RFINSEQ,RCOMP_1,TARSKI,SEQ_1,ARYTM_3,VALUED_1,FUNCT_2,ARYTM_1,SEQ_2,ORDINAL2,SUPINF_2,FCONT_1,COMPLEX1,STRUCT_0,CARD_1,VALUED_0,XXREAL_0,GROUP_2,FUNCOP_1,XREAL_0,ORDINAL1,MEMBERED,FINSEQ_5,XXREAL_2,XBOOLE_0,CARD_3,FINSEQ_1,FINSEQ_2,AFINSQ_1,RLVECT_1,SQUARE_1,RVSUM_1,XXREAL_1,PDIFF_1,PRVECT_1,PRVECT_2,ALGSTR_0,EUCLID,CFCONT_1,RFINSEQ2,NORMSP_0,NFCONT_1,MONOID_0,RLTOPSP1;
notations TARSKI,XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FUNCT_4,CARD_1,NUMBERS,XXREAL_0,XREAL_0,REAL_1,SQUARE_1,NAT_1,MEMBERED,VALUED_0,COMPLEX1,NAT_D,BINOP_2,XXREAL_2,CARD_3,FINSEQ_1,VALUED_1,FINSEQ_2,SEQ_1,SEQ_2,RVSUM_1,RFINSEQ,SEQ_4,RCOMP_1,FCONT_1,FDIFF_1,FINSEQ_5,FINSEQ_7,RFINSEQ2,STRUCT_0,MONOID_0,ALGSTR_0,PRE_TOPC,RLVECT_1,NORMSP_0,NORMSP_1,VFUNCT_1,EUCLID,LOPBAN_1,PRVECT_1,NFCONT_1,NDIFF_1,PRVECT_2,NFCONT_3,NDIFF_3,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB23,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
definitions TARSKI,FUNCT_2,RLVECT_1,LOPBAN_1,EUCLID,RFINSEQ2,FINSEQ_1,FINSEQ_2,STRUCT_0,MONOID_0,ALGSTR_0,NORMSP_0,RCOMP_1,XCMPLX_0,PRVECT_2,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,SEQ_1,SEQ_2,NAT_1,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,FUNCT_3,FINSEQ_4,RLVECT_2,FINSEQ_3,ORDINAL1,FINSEQ_1,CARD_3,FUNCT_4,SEQ_4,NORMSP_1,LOPBAN_1,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,NDIFF_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,VALUED_0,GRCAT_1,NORMSP_0,XREAL_0,RCOMP_1,FINSEQ_2,FINSEQ_7,RVSUM_1,SQUARE_1,PRVECT_1,PRVECT_2,PDIFF_7,EUCLID,TOPREAL7,XXREAL_2,FINSEQ_5,NAT_D,RFINSEQ2,INTEGRA5,FCONT_1,NAT_2,NFCONT_3,NDIFF_2,NDIFF_3,CARD_1,ROLLE,XXREAL_1,RLTOPSP1,FUNCT_7,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63;
schemes FUNCT_2,SEQ_1,FINSEQ_1,NAT_1,FINSEQ_2;
registrations RELSET_1,STRUCT_0,ORDINAL1,XREAL_0,MEMBERED,FUNCT_1,NDIFF_1,FUNCT_2,NUMBERS,XBOOLE_0,VALUED_0,PRVECT_2,FINSEQ_2,FINSEQ_1,CARD_3,NORMSP_0,NORMSP_1,RELAT_1,XXREAL_0,LOPBAN_1,LOPBAN_2,PRVECT_3,FUNCOP_1,NAT_1,FINSEQ_5,XXREAL_2,RCOMP_1,VALUED_1,FDIFF_1,NFCONT_3,FINSET_1,XCMPLX_0,PARTFUN1,CARD_1,MONOID_0,CKB10,CKB15,CKB16,CKB17,CKB49;
constructors REAL_1,SQUARE_1,SEQ_2,FDIFF_1,NFCONT_1,RSSPACE,VFUNCT_1,NDIFF_1,SEQ_1,RELSET_1,FINSEQ_7,FINSEQ_5,RVSUM_1,BINOP_2,PRVECT_2,RLVECT_2,NAT_D,FINSEQOP,RFINSEQ,RFINSEQ2,SEQ_4,FCONT_1,NFCONT_3,NDIFF_3,MONOID_0,RLTOPSP1,FUNCT_7,CKB11,CKB14,CKB22,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB42;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve j for set;
reserve S for non  trivial RealNormSpace;
reserve T for non  trivial RealNormSpace;
reserve g for (PartFunc of S,T);
reserve G for  non-trivial RealNormSpace-Sequence;
reserve F for non  trivial RealNormSpace;
reserve i for (Element of ( dom G ));
reserve f for (PartFunc of ( product G ),F);
reserve x for (Point of ( product G ));
theorem
Th28: (for G being  non-trivial RealNormSpace-Sequence holds (for S being non  trivial RealNormSpace holds (for f being (PartFunc of ( product G ),S) holds (for x,y being (Point of ( product G )) holds (ex h being (FinSequence of ( product G )) st (ex g being (FinSequence of S) st (ex Z,y0 being (Element of ( product ( carr G ) )) st (((((((y0 = y & Z = ( 0. ( product G ) )) & ( len h ) = ( ( len G ) + 1 )) & ( len g ) = ( len G )) & (for i being Nat holds (i in ( dom h ) implies ( h /. i ) = ( Z +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' i ) ) ) )))) & (for i being Nat holds (i in ( dom g ) implies ( g /. i ) = ( ( f /. ( x + ( h /. i ) ) ) - ( f /. ( x + ( h /. ( i + 1 ) ) ) ) )))) & (for i being Nat holds (for hi being (Point of ( product G )) holds ((i in ( dom h ) & ( h /. i ) = hi) implies ||. hi .|| <= ||. y .||)))) & ( ( f /. ( x + y ) ) - ( f /. x ) ) = ( Sum g )))))))))
proof
let G being  non-trivial RealNormSpace-Sequence;
let S being non  trivial RealNormSpace;
let f being (PartFunc of ( product G ),S);
let x being (Point of ( product G ));
let y being (Point of ( product G ));
set m = ( len G );
CG1: (the carrier of ( product G )) = ( product ( carr G ) ) by CKB12:1;
reconsider Z0 = ( 0. ( product G ) ) as (Element of ( product ( carr G ) )) by CKB12:1;
reconsider y0 = y as (Element of ( product ( carr G ) )) by CKB12:1;
reconsider y1 = y as ( len G ) -element FinSequence;
reconsider Z1 = ( 0. ( product G ) ) as ( len G ) -element FinSequence;
( len y1 ) = m by CARD_1:def 7;
then B1: ( dom y1 ) = ( dom G ) by FINSEQ_3:29;
( len Z1 ) = m by CARD_1:def 7;
then B2: ( dom Z1 ) = ( dom G ) by FINSEQ_3:29;
defpred H[ Nat,set ]
 means
$2 = ( Z0 +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' $1 ) ) ) );
A2: (for k being Nat holds (k in ( Seg ( m + 1 ) ) implies (ex x being (Element of ( product G )) st H[ k,x ])))
proof
let k being Nat;
assume k in ( Seg ( m + 1 ) );
( Z0 +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' k ) ) ) ) is (Element of ( product ( carr G ) )) by CARD_3:79;
hence thesis by CG1;
end;
consider h being (FinSequence of ( product G )) such that A6: (( dom h ) = ( Seg ( m + 1 ) ) & (for j being Nat holds (j in ( Seg ( m + 1 ) ) implies H[ j,( h . j ) ]))) from FINSEQ_1:sch 5(A2);
A7:now
let j being Nat;
assume A8: j in ( dom h );
then ( h /. j ) = ( h . j ) by PARTFUN1:def 6;
hence ( h /. j ) = ( Z0 +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' j ) ) ) ) by A8,A6;
end;
deffunc Z(Nat) = ( f /. ( x + ( h /. $1 ) ) );
consider z being (FinSequence of S) such that A9: (( len z ) = ( m + 1 ) & (for j being Nat holds (j in ( dom z ) implies ( z . j ) = Z(j)))) from FINSEQ_2:sch 1;
A10:now
let j being Nat;
assume A11: j in ( dom z );
then ( z /. j ) = ( z . j ) by PARTFUN1:def 6;
hence ( z /. j ) = ( f /. ( x + ( h /. j ) ) ) by A11,A9;
end;
deffunc G(Nat) = ( ( z /. $1 ) - ( z /. ( $1 + 1 ) ) );
consider g being (FinSequence of S) such that A12: (( len g ) = m & (for j being Nat holds (j in ( dom g ) implies ( g . j ) = G(j)))) from FINSEQ_2:sch 1;
A13:now
let j being Nat;
assume A14: j in ( dom g );
then ( g /. j ) = ( g . j ) by PARTFUN1:def 6;
hence ( g /. j ) = ( ( z /. j ) - ( z /. ( j + 1 ) ) ) by A14,A12;
end;
A16: ( ( m + 1 ) -' 1 ) = ( ( m + 1 ) - 1 ) by NAT_1:11,XREAL_1:233;
reconsider zz0 = ( 0 ) as (Element of ( NAT ));
1 <= ( m + 1 ) by NAT_1:11;
then C2: 1 in ( dom h ) by A6;
then ( h /. 1 ) = ( Z0 +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' 1 ) ) ) ) by A7
.= ( Z0 +* ( y0 | ( dom G ) ) ) by A16,FINSEQ_1:def 3
.= ( Z0 +* y0 ) by B1,RELAT_1:69;
then A17: ( h /. 1 ) = y by B1,B2,FUNCT_4:19;
A19: ( ( m + 1 ) -' ( len z ) ) = ( ( m + 1 ) - ( len z ) ) by A9,XREAL_1:233;
(1 <= ( len z ) & ( len z ) <= ( m + 1 )) by A9,NAT_1:14;
then C3: ( len z ) in ( dom h ) by A6;
then A21: ( h /. ( len z ) ) = ( Z0 +* ( y0 | ( Seg ( 0 ) ) ) ) by A7,A19,A9
.= ( 0. ( product G ) ) by FUNCT_4:21;
C1: ( dom h ) = ( dom z ) by A6,A9,FINSEQ_1:def 3;
then A22: ( z /. 1 ) = ( f /. ( x + y ) ) by A10,A17,C2;
( z /. ( len z ) ) = ( f /. ( x + ( h /. ( len z ) ) ) ) by A10,C1,C3;
then A23: ( z /. ( len z ) ) = ( f /. x ) by A21,RLVECT_1:def 4;
take h;
take g;
take Z0;
take y0;
A24:now
let i being Nat;
assume A25: i in ( dom g );
then A26: i in ( Seg m ) by A12,FINSEQ_1:def 3;
then (1 <= i & i <= m) by FINSEQ_1:1;
then A29: ( i + 1 ) <= ( m + 1 ) by XREAL_1:6;
m <= ( m + 1 ) by NAT_1:11;
then ( Seg m ) c= ( Seg ( m + 1 ) ) by FINSEQ_1:5;
then A28: ( z /. i ) = ( f /. ( x + ( h /. i ) ) ) by A10,A6,A26,C1;
1 <= ( i + 1 ) by NAT_1:11;
then ( i + 1 ) in ( Seg ( m + 1 ) ) by A29;
then ( i + 1 ) in ( dom z ) by A9,FINSEQ_1:def 3;
then ( z /. ( i + 1 ) ) = ( f /. ( x + ( h /. ( i + 1 ) ) ) ) by A10;
hence ( g /. i ) = ( ( f /. ( x + ( h /. i ) ) ) - ( f /. ( x + ( h /. ( i + 1 ) ) ) ) ) by A13,A25,A28;
end;
now
let i being Nat;
let hi being (Element of ( product G ));
assume ASD: (i in ( dom h ) & ( h /. i ) = hi);
then ( h /. i ) = ( Z0 +* ( y0 | ( Seg ( ( ( len G ) + 1 ) -' i ) ) ) ) by A7;
hence ||. hi .|| <= ||. y .|| by CKB63:1,ASD;
end;
hence thesis by A7,A22,A23,A24,A9,A13,CKB61:1,A6,A12,FINSEQ_1:def 3;
end;
