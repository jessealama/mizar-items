environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,MATRIX_1,FINSEQ_2,ZFMISC_1,RELAT_1,TARSKI,CARD_1,ARYTM_3,FUNCT_1,FREEALG,FINSET_1,FINSEQ_1,MESFUNC1,GROUP_1,SUPINF_2,LAPLACE,XBOOLE_0,MATRIX_2,ARYTM_1,XXREAL_0,POLYNOM1,POLYNOM2,MATRIX_3,CARD_3,AFINSQ_1,ORDINAL4,POLYNOM3,STRUCT_0,PARTFUN1,RANKNULL,RLSUB_1,RLVECT_5,PRVECT_1,RLVECT_3,ALGSTR_0,VECTSP10,MATRLIN,MATRLIN2,POLYNOM5,NEWTON,MONOID_0,BINOP_1,RLVECT_1,LATTICES,RLSUB_2,FINSEQ_4,MCART_1,RLVECT_2,VALUED_1,FUNCT_2,VECTSP11,MSSUBFAM,UNIALG_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,MATRIX_2,NAT_D,GROUP_4,MATRIX_3,DOMAIN_1,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,VECTSP_9,FINSEQOP,MATRIX13,MATRLIN,LAPLACE,MOD_2,RANKNULL,POLYNOM3,MONOID_0,ALGSEQ_1,POLYNOM4,POLYNOM5,MATRLIN2,GRCAT_1,CKB11,CKB14,CKB15,CKB25,CKB33;
definitions STRUCT_0,TARSKI,XBOOLE_0,RLVECT_1,FINSEQ_1,VECTSP_4,FVSUM_1,LAPLACE,MATRIX13,RANKNULL,VECTSP_6,MATRLIN2,CKB11,CKB14,CKB15,CKB25,CKB33;
theorems ZFMISC_1,RLVECT_1,MATRIX_1,MATRIX_3,VECTSP_1,NAT_1,FINSEQ_1,FINSEQ_3,FINSEQ_2,CARD_1,CARD_2,FINSEQOP,FINSOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GROUP_1,LAPLACE,MATRIX13,MATRIXR2,MATRLIN,ORDINAL1,PARTFUN1,RELAT_1,STIRL2_1,STRUCT_0,TARSKI,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,MOD_2,RANKNULL,MONOID_0,GROUP_4,SYSREL,SUBSET_1,FINSEQ_5,ALGSEQ_1,POLYNOM4,POLYNOM5,HILBASIS,MATRIXJ1,MATRLIN2,VALUED_0,NAT_D,GRCAT_1,RLVECT_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60;
schemes NAT_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,FINSET_1,STRUCT_0,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,SEQM_3,MATRIX13,XREAL_0,VECTSP_9,RANKNULL,POLYNOM3,POLYNOM5,MONOID_0,CARD_1,RELSET_1,MOD_2,GRCAT_1,PRVECT_1,MATRLIN2,CKB10,CKB13,CKB31;
constructors FINSOP_1,XXREAL_0,GROUP_4,VECTSP_7,VECTSP_9,MATRIX13,REALSET1,LAPLACE,VECTSP_5,RANKNULL,MONOID_0,POLYNOM1,POLYNOM4,POLYNOM5,SEQ_1,MATRLIN2,BINOP_2,NAT_D,RELSET_1,GRCAT_1,MEASURE6,CKB11,CKB14,CKB15,CKB25,CKB33;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve x for set;
reserve y for set;
reserve K for Field;
reserve V1 for (VectSp of K);
reserve V2 for (VectSp of K);
reserve v1 for (Vector of V1);
theorem
Th43: (for L being (Linear_Combination of V1) holds (for F being (FinSequence of V1) holds (for f being (linear-transformation of V1,V2) holds ((( f | ( ( Carrier L ) /\ ( rng F ) ) ) is  one-to-one & ( rng F ) c= ( Carrier L )) implies (ex Lf being (Linear_Combination of V2) st ((( Carrier Lf ) = ( f .: ( ( Carrier L ) /\ ( rng F ) ) ) & ( f * ( L (#) F ) ) = ( Lf (#) ( f * F ) )) & (for v1 holds (v1 in ( ( Carrier L ) /\ ( rng F ) ) implies ( L . v1 ) = ( Lf . ( f . v1 ) )))))))))
proof
let L being (Linear_Combination of V1);
let F being (FinSequence of V1);
let f being (linear-transformation of V1,V2);
assume that
A1: ( f | ( ( Carrier L ) /\ ( rng F ) ) ) is  one-to-one
and
A2: ( rng F ) c= ( Carrier L );
set R = ( rng F );
set C = ( Carrier L );
defpred P[ set,set ]
 means
(((not $1 in ( f .: ( C /\ R ) )) implies $2 = ( 0. K )) & ($1 in ( f .: ( C /\ R ) ) implies (for v1 being (Vector of V1) holds ((v1 in ( C /\ R ) & ( f . v1 ) = $1) implies $2 = ( L . v1 )))));
A3: (for x holds (x in (the carrier of V2) implies (ex y st (y in (the carrier of K) & P[ x,y ]))))
proof
let x;
assume that
x in (the carrier of V2);
per cases ;
suppose A4: (not x in ( f .: ( C /\ R ) ));

take ( 0. K );
thus thesis by A4;
end;
suppose A5: x in ( f .: ( C /\ R ) );

then consider y such that y in ( dom f ) and A6: y in ( C /\ R ) and A7: x = ( f . y ) by FUNCT_1:def 6;
reconsider y as (Vector of V1) by A6;
take ( L . y );
now
A8: ( dom f ) = ( [#] V1 ) by FUNCT_2:def 1;
then A9: y in ( dom ( f | ( C /\ R ) ) ) by A6,RELAT_1:57;
A10: ( ( f | ( C /\ R ) ) . y ) = x by A6,A7,FUNCT_1:49;
let v1 being (Vector of V1);
assume that
A11: v1 in ( C /\ R )
and
A12: ( f . v1 ) = x;
A13: ( ( f | ( C /\ R ) ) . v1 ) = x by A11,A12,FUNCT_1:49;
v1 in ( dom ( f | ( C /\ R ) ) ) by A11,A8,RELAT_1:57;
hence ( L . y ) = ( L . v1 ) by A1,A9,A13,A10,FUNCT_1:def 4;
end;
hence thesis by A5;
end;
end;
consider Lf being (Function of V2,K) such that A14: (for x holds (x in (the carrier of V2) implies P[ x,( Lf . x ) ])) from FUNCT_2:sch 1(A3);
reconsider Lf as (Element of ( Funcs ((the carrier of V2),(the carrier of K)) )) by FUNCT_2:8;
(for v2 being (Element of V2) holds ((not v2 in ( f .: ( C /\ R ) )) implies ( Lf . v2 ) = ( 0. K ))) by A14;
then reconsider Lf as (Linear_Combination of V2) by VECTSP_6:def 1;
A15: ( dom f ) = ( [#] V1 ) by FUNCT_2:def 1;
take Lf;
A16: ( f .: ( C /\ R ) ) c= ( Carrier Lf )
proof
let y;
assume that
A17: y in ( f .: ( C /\ R ) );
consider v1 being set such that v1 in ( dom f ) and A18: v1 in ( C /\ R ) and A19: ( f . v1 ) = y by A17,FUNCT_1:def 6;
reconsider v1 as (Vector of V1) by A18;
v1 in C by A18,XBOOLE_0:def 4;
then A20: ( L . v1 ) <> ( 0. K ) by VECTSP_6:2;
reconsider v2 = y as (Vector of V2) by A17;
( Lf . v2 ) = ( L . v1 ) by A14,A17,A18,A19;
hence thesis by A20;
end;
( Carrier Lf ) c= ( f .: ( C /\ R ) )
proof
let x;
assume that
A21: x in ( Carrier Lf );
reconsider v2 = x as (Vector of V2) by A21;
( Lf . v2 ) <> ( 0. K ) by A21,VECTSP_6:2;
hence thesis by A14;
end;
hence ( Carrier Lf ) = ( f .: ( C /\ R ) ) by A16,XBOOLE_0:def 10;
( len ( L (#) F ) ) = ( len F ) by VECTSP_6:def 5;
then A22: ( dom ( L (#) F ) ) = ( dom F ) by FINSEQ_3:29;
( rng F ) c= ( [#] V1 ) by RELAT_1:def 19;
then A23: ( dom ( f * F ) ) = ( dom F ) by A15,RELAT_1:27;
( len ( Lf (#) ( f * F ) ) ) = ( len ( f * F ) ) by VECTSP_6:def 5;
then A24: ( dom ( Lf (#) ( f * F ) ) ) = ( dom ( f * F ) ) by FINSEQ_3:29;
A25:now
let x;
assume that
A26: x in ( dom F );
reconsider k = x as Nat by A26;
A27: ( ( f * F ) . k ) = ( ( f * F ) /. k ) by A23,A26,PARTFUN1:def 6;
A28: ( F /. k ) = ( F . k ) by A26,PARTFUN1:def 6;
then A29: ( ( f * F ) . k ) = ( f . ( F /. k ) ) by A23,A26,FUNCT_1:12;
( F . k ) in R by A26,FUNCT_1:def 3;
then A30: ( F . k ) in ( C /\ R ) by A2,XBOOLE_0:def 4;
then ( ( f * F ) /. k ) in ( f .: ( C /\ R ) ) by A15,A28,A29,A27,FUNCT_1:def 6;
then A31: ( L . ( F /. k ) ) = ( Lf . ( ( f * F ) /. k ) ) by A14,A28,A29,A27,A30;
thus ( ( f * ( L (#) F ) ) . x ) = ( f . ( ( L (#) F ) . k ) ) by A22,A26,FUNCT_1:13
.= ( f . ( ( L . ( F /. k ) ) * ( F /. k ) ) ) by A22,A26,VECTSP_6:def 5
.= ( ( Lf . ( ( f * F ) /. k ) ) * ( ( f * F ) /. k ) ) by A29,A27,A31,MOD_2:def 2
.= ( ( Lf (#) ( f * F ) ) . x ) by A24,A23,A26,VECTSP_6:def 5;
end;
( rng ( L (#) F ) ) c= ( [#] V1 ) by RELAT_1:def 19;
then ( dom ( f * ( L (#) F ) ) ) = ( dom ( L (#) F ) ) by A15,RELAT_1:27;
hence ( f * ( L (#) F ) ) = ( Lf (#) ( f * F ) ) by A22,A24,A23,A25,FUNCT_1:2;
let v1 being (Vector of V1);
assume that
A32: v1 in ( C /\ R );
( f . v1 ) in ( f .: ( C /\ R ) ) by A15,A32,FUNCT_1:def 6;
hence thesis by A14,A32;
end;
