environ
vocabularies NUMBERS,NAT_1,VECTSP_1,SUBSET_1,MATRIX_1,FINSEQ_2,ZFMISC_1,RELAT_1,TARSKI,CARD_1,ARYTM_3,FUNCT_1,FREEALG,FINSET_1,FINSEQ_1,MESFUNC1,GROUP_1,SUPINF_2,LAPLACE,XBOOLE_0,MATRIX_2,ARYTM_1,XXREAL_0,POLYNOM1,POLYNOM2,MATRIX_3,CARD_3,AFINSQ_1,ORDINAL4,POLYNOM3,STRUCT_0,PARTFUN1,RANKNULL,RLSUB_1,RLVECT_5,PRVECT_1,RLVECT_3,ALGSTR_0,VECTSP10,MATRLIN,MATRLIN2,POLYNOM5,NEWTON,MONOID_0,BINOP_1,RLVECT_1,LATTICES,RLSUB_2,FINSEQ_4,MCART_1,RLVECT_2,VALUED_1,FUNCT_2,VECTSP11,MSSUBFAM,UNIALG_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,CARD_1,XCMPLX_0,ALGSTR_0,XXREAL_0,NAT_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,STRUCT_0,RLVECT_1,GROUP_1,VECTSP_1,FINSEQ_2,MATRIX_1,MATRIX_2,NAT_D,GROUP_4,MATRIX_3,DOMAIN_1,MEASURE6,PRVECT_1,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,VECTSP_9,FINSEQOP,MATRIX13,MATRLIN,LAPLACE,MOD_2,RANKNULL,POLYNOM3,MONOID_0,ALGSEQ_1,POLYNOM4,POLYNOM5,MATRLIN2,GRCAT_1,CKB11,CKB14,CKB15,CKB25,CKB33;
definitions STRUCT_0,TARSKI,XBOOLE_0,RLVECT_1,FINSEQ_1,VECTSP_4,FVSUM_1,LAPLACE,MATRIX13,RANKNULL,VECTSP_6,MATRLIN2,CKB11,CKB14,CKB15,CKB25,CKB33;
theorems ZFMISC_1,RLVECT_1,MATRIX_1,MATRIX_3,VECTSP_1,NAT_1,FINSEQ_1,FINSEQ_3,FINSEQ_2,CARD_1,CARD_2,FINSEQOP,FINSOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GROUP_1,LAPLACE,MATRIX13,MATRIXR2,MATRLIN,ORDINAL1,PARTFUN1,RELAT_1,STIRL2_1,STRUCT_0,TARSKI,VECTSP_4,VECTSP_5,VECTSP_6,VECTSP_7,VECTSP_9,VECTSP10,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,MOD_2,RANKNULL,MONOID_0,GROUP_4,SYSREL,SUBSET_1,FINSEQ_5,ALGSEQ_1,POLYNOM4,POLYNOM5,HILBASIS,MATRIXJ1,MATRLIN2,VALUED_0,NAT_D,GRCAT_1,RLVECT_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59;
schemes NAT_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,FINSET_1,STRUCT_0,VECTSP_1,FUNCT_2,ORDINAL1,XXREAL_0,NAT_1,FINSEQ_1,RELAT_1,FINSEQ_2,SEQM_3,MATRIX13,XREAL_0,VECTSP_9,RANKNULL,POLYNOM3,POLYNOM5,MONOID_0,CARD_1,RELSET_1,MOD_2,GRCAT_1,PRVECT_1,MATRLIN2,CKB10,CKB13,CKB31;
constructors FINSOP_1,XXREAL_0,GROUP_4,VECTSP_7,VECTSP_9,MATRIX13,REALSET1,LAPLACE,VECTSP_5,RANKNULL,MONOID_0,POLYNOM1,POLYNOM4,POLYNOM5,SEQ_1,MATRLIN2,BINOP_2,NAT_D,RELSET_1,GRCAT_1,MEASURE6,CKB11,CKB14,CKB15,CKB25,CKB33;
requirements ARITHM,NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve n for Nat;
reserve x for set;
reserve y for set;
reserve K for Field;
reserve V1 for (VectSp of K);
reserve V2 for (VectSp of K);
reserve f for (linear-transformation of V1,V1);
reserve L for (Scalar of K);
reserve S for 1-sorted;
reserve F for (Function of S,S);
theorem
(for f being (linear-transformation of V1,V2) holds (for A being (Subset of V1) holds (for B being (Subset of V2) holds (( f .: A ) = B implies ( f .: (the carrier of ( Lin A )) ) = (the carrier of ( Lin B ))))))
proof
let f being (linear-transformation of V1,V2);
A1: ( dom f ) = ( [#] V1 ) by FUNCT_2:def 1;
let A being (Subset of V1);
let B being (Subset of V2);
assume that
A2: ( f .: A ) = B;
thus ( f .: (the carrier of ( Lin A )) ) c= (the carrier of ( Lin B ))
proof
let y;
assume y in ( f .: (the carrier of ( Lin A )) );
then consider x such that x in ( dom f ) and A3: x in (the carrier of ( Lin A )) and A4: ( f . x ) = y by FUNCT_1:def 6;
x in ( Lin A ) by A3,STRUCT_0:def 5;
then consider L being (Linear_Combination of A) such that A5: x = ( Sum L ) by VECTSP_7:7;
consider F being (FinSequence of V1) such that F is  one-to-one and A6: ( rng F ) = ( Carrier L ) and A7: x = ( Sum ( L (#) F ) ) by A5,VECTSP_6:def 6;
set LF = ( L (#) F );
consider g being (Function of ( NAT ),(the carrier of V1)) such that A8: x = ( g . ( len LF ) ) and A9: ( g . ( 0 ) ) = ( 0. V1 ) and A10: (for j being (Element of ( NAT )) holds (for v being (Vector of V1) holds ((j < ( len LF ) & v = ( LF . ( j + 1 ) )) implies ( g . ( j + 1 ) ) = ( ( g . j ) + v )))) by A7,RLVECT_1:def 12;
defpred P[ Nat ]
 means
($1 <= ( len F ) implies ( f . ( g . $1 ) ) in ( Lin B ));
A11: ( len LF ) = ( len F ) by VECTSP_6:def 5;
then A12: ( dom LF ) = ( dom F ) by FINSEQ_3:29;
A13: (for n holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n;
assume that
A14: P[ n ];
reconsider N = n as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider gn = ( g . N ) as (Vector of V1);
set N1 = ( N + 1 );
assume A15: ( n + 1 ) <= ( len F );
then A16: N < ( len F ) by NAT_1:13;
A17: (( Carrier L ) c= A & ( dom f ) = ( [#] V1 )) by FUNCT_2:def 1,VECTSP_6:def 4;
1 <= ( n + 1 ) by NAT_1:14;
then A18: ( n + 1 ) in ( dom F ) by A15,FINSEQ_3:25;
then (( F /. N1 ) = ( F . N1 ) & ( F . N1 ) in ( Carrier L )) by A6,FUNCT_1:def 3,PARTFUN1:def 6;
then ( f . ( F /. N1 ) ) in B by A2,A17,FUNCT_1:def 6;
then A19: ( ( L . ( F /. N1 ) ) * ( f . ( F /. N1 ) ) ) in ( Lin B ) by VECTSP_4:21,VECTSP_7:8;
( LF . N1 ) = ( ( L . ( F /. N1 ) ) * ( F /. N1 ) ) by A12,A18,VECTSP_6:def 5;
then ( g . N1 ) = ( gn + ( ( L . ( F /. N1 ) ) * ( F /. N1 ) ) ) by A11,A10,A16;
then ( f . ( g . ( n + 1 ) ) ) = ( ( f . gn ) + ( f . ( ( L . ( F /. N1 ) ) * ( F /. N1 ) ) ) ) by GRCAT_1:def 8
.= ( ( f . gn ) + ( ( L . ( F /. N1 ) ) * ( f . ( F /. N1 ) ) ) ) by MOD_2:def 2;
hence thesis by A14,A15,A19,NAT_1:13,VECTSP_4:20;
end;
( f . ( 0. V1 ) ) = ( 0. V2 ) by RANKNULL:9;
then A20: P[ ( 0 ) ] by A9,VECTSP_4:17;
(for n holds P[ n ]) from NAT_1:sch 2(A20,A13);
then P[ ( len F ) ];
hence thesis by A4,A11,A8,STRUCT_0:def 5;
end;

let x;
assume x in (the carrier of ( Lin B ));
then x in ( Lin B ) by STRUCT_0:def 5;
then consider L being (Linear_Combination of B) such that A21: x = ( Sum L ) by VECTSP_7:7;
( Carrier L ) c= B by VECTSP_6:def 4;
then consider M being (Linear_Combination of A) such that A22: ( f . ( Sum M ) ) = ( Sum L ) by A2,CKB59:1;
( Sum M ) in ( Lin A ) by VECTSP_7:7;
then ( Sum M ) in (the carrier of ( Lin A )) by STRUCT_0:def 5;
hence thesis by A21,A22,A1,FUNCT_1:def 6;
end;
