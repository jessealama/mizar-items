environ
vocabularies YELLOW_1,PBOOLE,CARD_3,WAYBEL18,WAYBEL_3,XBOOLE_0,PRE_TOPC,STRUCT_0,ORDERS_2,WAYBEL24,WAYBEL25,RELAT_2,MONOID_0,SUBSET_1,ORDINAL2,FUNCT_1,XXREAL_0,CAT_1,YELLOW_0,NEWTON,TARSKI,YELLOW_9,WAYBEL11,ZFMISC_1,CARD_1,RCOMP_1,FUNCT_3,RELAT_1,WELLORD1,VALUED_1,T_0TOPSP,WAYBEL_0,SEQM_3,BINOP_1,FUNCOP_1,BORSUK_1,GROUP_6,YELLOW16,TOPS_2,REWRITE1,LATTICE3,EQREL_1,FUNCTOR0,WAYBEL_1,FUNCT_6,RLVECT_2,FUNCT_2,CANTOR_1,FUNCT_4,WAYBEL_9,MCART_1,FINSET_1,SETFAM_1,WAYBEL26;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,MCART_1,FINSET_1,RELAT_1,FUNCT_1,PBOOLE,RELSET_1,PARTFUN1,TOPS_2,FUNCT_3,FUNCT_4,NUMBERS,SETFAM_1,FUNCT_2,FUNCOP_1,STRUCT_0,CARD_3,ZF_FUND1,FUNCT_6,MONOID_0,PRALG_1,FUNCT_7,WELLORD1,ORDERS_2,LATTICE3,PRE_TOPC,CANTOR_1,T_0TOPSP,BORSUK_1,QUANTAL1,YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,YELLOW_9,WAYBEL_3,WAYBEL_9,WAYBEL11,WAYBEL18,WAYBEL24,WAYBEL25,YELLOW16,CKB1,CKB2,CKB3,CKB9,CKB14,CKB15,CKB52;
definitions TARSKI,RELAT_1,YELLOW_0,BORSUK_1,WAYBEL_0,WAYBEL_1,T_0TOPSP,YELLOW16,URYSOHN1,XBOOLE_0,YELLOW_2,STRUCT_0,CKB3,CKB14,CKB15,CKB52;
theorems YELLOW_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,PRE_TOPC,BORSUK_1,ORDERS_2,YELLOW12,WAYBEL10,WAYBEL24,WAYBEL25,RELAT_1,FUNCT_2,FUNCT_1,TOPS_2,TOPS_3,ENUMSET1,FUNCT_3,WAYBEL_3,PBOOLE,FUNCOP_1,CARD_3,TARSKI,ZFMISC_1,RELSET_1,WELLORD1,TSP_1,TOPS_1,WAYBEL21,QUANTAL1,CANTOR_1,FUNCT_7,YELLOW_9,WAYBEL18,WAYBEL20,MCART_1,YELLOW14,WAYBEL11,FINSET_1,WAYBEL15,PRALG_1,YELLOW16,WAYBEL14,FUNCT_5,CARD_5,SETFAM_1,XBOOLE_0,XBOOLE_1,FUNCT_6,STRUCT_0,PARTFUN1,CKB3,CKB6,CKB7,CKB8,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB50,CKB52,CKB53,CKB54;
schemes FUNCT_1,PBOOLE;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,FINSET_1,STRUCT_0,PRE_TOPC,BORSUK_1,LATTICE3,YELLOW_0,TSP_1,MONOID_0,WAYBEL_0,YELLOW_1,YELLOW_2,WAYBEL_1,WAYBEL_2,WAYBEL_3,YELLOW_6,WAYBEL10,WAYBEL17,YELLOW_9,WAYBEL18,WAYBEL24,YELLOW14,WAYBEL25,YELLOW16,FUNCT_1,CKB4,CKB5,CKB10,CKB36,CKB37,CKB49,CKB51;
constructors TOLER_1,FUNCT_7,ZF_FUND1,TOPS_2,BORSUK_1,T_0TOPSP,CANTOR_1,MONOID_0,QUANTAL1,ORDERS_3,PRALG_3,WAYBEL_1,WAYBEL11,YELLOW_9,WAYBEL18,WAYBEL24,WAYBEL25,YELLOW16,CKB3,CKB9,CKB14,CKB15,CKB52;
requirements SUBSET,BOOLE;
begin
reserve x for set;
reserve f for Function;
theorem
Th41: (for X,Y being non  empty TopSpace holds (for S being  Scott (TopAugmentation of ( InclPoset (the topology of Y) )) holds (for f being (Function of X,S) holds (( *graph f ) is  open  open (Subset of [: X,Y :]) implies f is  continuous))))
proof
let X being non  empty TopSpace;
let Y being non  empty TopSpace;
let S being  Scott (TopAugmentation of ( InclPoset (the topology of Y) ));
let f being (Function of X,S);
A1: ( the RelStr of S ) = ( the RelStr of ( InclPoset (the topology of Y) ) ) by YELLOW_9:def 4;
A2: ( dom f ) = (the carrier of X) by FUNCT_2:def 1;
assume ( *graph f ) is  open  open (Subset of [: X,Y :]);
then consider AA being (Subset-Family of [: X,Y :]) such that A3: ( *graph f ) = ( union AA ) and A4: (for e being set holds (e in AA implies (ex X1 being (Subset of X) st (ex Y1 being (Subset of Y) st ((e = [: X1,Y1 :] & X1 is  open) & Y1 is  open))))) by BORSUK_1:5;
A5: (the carrier of ( InclPoset (the topology of Y) )) = (the topology of Y) by YELLOW_1:1;
A6:now
let P being (Subset of S);
assume A7: P is  open;
now
let x being set;
hereby
defpred P[ set,set ]
 means
((x in ( $2 `1 ) & $1 in ( $2 `2 )) & [: ( $2 `1 ),( $2 `2 ) :] c= ( *graph f ));
assume A8: x in ( f " P );
then reconsider y = x as (Element of X);
A9:now
let e being set;
assume e in ( f . x );
then [ x,e ] in ( *graph f ) by A2,A8,CKB53:1;
then consider V being set such that A10: [ x,e ] in V and A11: V in AA by A3,TARSKI:def 4;
consider A being (Subset of X),B being (Subset of Y) such that A12: V = [: A,B :] and A13: (A is  open & B is  open) by A4,A11;
reconsider u = [ A,B ] as set;
take u;
(A in (the topology of X) & B in (the topology of Y)) by A13,PRE_TOPC:def 2;
hence u in [: (the topology of X),(the topology of Y) :] by ZFMISC_1:87;
(A = ( u `1 ) & B = ( u `2 )) by MCART_1:7;
hence P[ e,u ] by A3,A10,A11,A12,ZFMISC_1:74,ZFMISC_1:87;
end;
consider g being Function such that A14: (( dom g ) = ( f . x ) & ( rng g ) c= [: (the topology of X),(the topology of Y) :]) and A15: (for a being set holds (a in ( f . x ) implies P[ a,( g . a ) ])) from FUNCT_1:sch 5(A9);
set J = { ( union A ) where A is (Subset of ( proj2 ( rng g ) )): A is  finite };
A16: ( proj2 ( rng g ) ) c= (the topology of Y) by A14,FUNCT_5:11;
A17: J c= (the topology of Y)
proof
let x being set;
assume x in J;
then consider A being (Subset of ( proj2 ( rng g ) )) such that A18: x = ( union A ) and A is  finite;
A19: A c= (the topology of Y) by A16,XBOOLE_1:1;
then A is (Subset-Family of Y) by XBOOLE_1:1;
hence thesis by A18,A19,PRE_TOPC:def 1;
end;
( {} ( proj2 ( rng g ) ) ) in J by ZFMISC_1:2;
then reconsider J as non  empty (Subset of ( InclPoset (the topology of Y) )) by A17,YELLOW_1:1;
J is  directed
proof
let a being (Element of ( InclPoset (the topology of Y) ));
let b being (Element of ( InclPoset (the topology of Y) ));
assume a in J;
then consider A being (Subset of ( proj2 ( rng g ) )) such that A20: a = ( union A ) and A21: A is  finite;
assume b in J;
then consider B being (Subset of ( proj2 ( rng g ) )) such that A22: b = ( union B ) and A23: B is  finite;
reconsider AB = ( A \/ B ) as  finite (Subset of ( proj2 ( rng g ) )) by A21,A23;
take ab = ( a "\/" b );
A24: ( a \/ b ) = ab by WAYBEL14:18;
( union AB ) = ( a \/ b ) by A20,A22,ZFMISC_1:78;
hence ab in J by A24;
(a c= ab & b c= ab) by A24,XBOOLE_1:7;
hence thesis by YELLOW_1:3;
end;
then reconsider J9 = J as non  empty  directed (Subset of S) by A1,WAYBEL_0:3;
A25: ( proj2 ( rng g ) ) c= ( bool ( f . x ) )
proof
let z being set;
assume z in ( proj2 ( rng g ) );
then consider z1 being set such that A26: [ z1,z ] in ( rng g ) by RELAT_1:def 5;
A27: ( [ z1,z ] `1 ) = z1 by MCART_1:7;
A28: (ex a being set st (a in ( dom g ) & [ z1,z ] = ( g . a ))) by A26,FUNCT_1:def 3;
then A29: x in z1 by A14,A15,A27;
( [ z1,z ] `2 ) = z by MCART_1:7;
then A30: [: z1,z :] c= ( *graph f ) by A14,A15,A28,A27;
z c= ( f . x )
proof
let a being set;
assume a in z;
then [ x,a ] in [: z1,z :] by A29,ZFMISC_1:87;
hence thesis by A30,CKB53:1;
end;
hence thesis;
end;
( union J ) = ( f . y )
proof
thus ( union J ) c= ( f . y )
proof
let a being set;
assume a in ( union J );
then consider u being set such that A31: a in u and A32: u in J by TARSKI:def 4;
consider A being (Subset of ( proj2 ( rng g ) )) such that A33: u = ( union A ) and A is  finite by A32;
A c= ( bool ( f . y ) ) by A25,XBOOLE_1:1;
then u c= ( union ( bool ( f . y ) ) ) by A33,ZFMISC_1:77;
then u c= ( f . y ) by ZFMISC_1:81;
hence thesis by A31;
end;

let a being set;
assume A34: a in ( f . y );
then A35: ( g . a ) in ( rng g ) by A14,FUNCT_1:def 3;
then ( g . a ) = [ ( ( g . a ) `1 ),( ( g . a ) `2 ) ] by A14,MCART_1:21;
then ( ( g . a ) `2 ) in ( proj2 ( rng g ) ) by A35,RELAT_1:def 5;
then reconsider A = { ( ( g . a ) `2 ) } as (Subset of ( proj2 ( rng g ) )) by ZFMISC_1:31;
( union A ) = ( ( g . a ) `2 ) by ZFMISC_1:25;
then A36: ( ( g . a ) `2 ) in J;
a in ( ( g . a ) `2 ) by A15,A34;
hence thesis by A36,TARSKI:def 4;
end;
then ( sup J ) = ( f . y ) by YELLOW_1:22;
then A37: ( sup J9 ) = ( f . y ) by A1,YELLOW_0:17,YELLOW_0:26;
( f . y ) in (the topology of Y) by A5,A1;
then reconsider W = ( f . y ) as  open (Subset of Y) by PRE_TOPC:def 2;
A38: ( proj1 ( rng g ) ) c= (the topology of X) by A14,FUNCT_5:11;
defpred P[ set,set ]
 means
(ex c1 being set st (((([ c1,$1 ] = ( g . $2 ) & x in c1) & $2 in $1) & $2 in ( f . x )) & [: c1,$1 :] c= ( *graph f )));
( f . x ) in P by A8,FUNCT_2:38;
then J meets P by A7,A37,WAYBEL11:def 1;
then consider a being set such that A39: a in J and A40: a in P by XBOOLE_0:3;
reconsider a as (Element of S) by A40;
consider A being (Subset of ( proj2 ( rng g ) )) such that A41: a = ( union A ) and A42: A is  finite by A39;
A43:now
let c being set;
assume c in A;
then consider c1 being set such that A44: [ c1,c ] in ( rng g ) by RELAT_1:def 5;
consider a being set such that A45: a in ( dom g ) and A46: [ c1,c ] = ( g . a ) by A44,FUNCT_1:def 3;
take a;
thus a in W by A14,A45;
A47: ( [ c1,c ] `1 ) = c1 by MCART_1:7;
then A48: x in c1 by A14,A15,A45,A46;
A49: ( [ c1,c ] `2 ) = c by MCART_1:7;
then [: c1,c :] c= ( *graph f ) by A14,A15,A45,A46,A47;
hence P[ c,a ] by A14,A15,A45,A46,A49,A48;
end;
consider hh being Function such that A50: (( dom hh ) = A & ( rng hh ) c= W) and A51: (for c being set holds (c in A implies P[ c,( hh . c ) ])) from FUNCT_1:sch 5(A43);
set B = ( proj1 ( g .: ( rng hh ) ) );
( g .: ( rng hh ) ) c= ( rng g ) by RELAT_1:111;
then B c= ( proj1 ( rng g ) ) by FUNCT_5:3;
then A52: B c= (the topology of X) by A38,XBOOLE_1:1;
then reconsider B as (Subset-Family of X) by XBOOLE_1:1;
reconsider B as (Subset-Family of X);
reconsider Q = ( Intersect B ) as (Subset of X);
take Q;
( g .: ( rng hh ) ) is  finite by A42,A50,FINSET_1:5,FINSET_1:8;
then B is  finite by CKB54:1;
then Q in ( FinMeetCl (the topology of X) ) by A52,CANTOR_1:def 3;
then Q in (the topology of X) by CANTOR_1:5;
hence Q is  open by PRE_TOPC:def 2;
thus Q c= ( f " P )
proof
let z being set;
assume A53: z in Q;
then reconsider zz = z as (Element of X);
reconsider fz = ( f . zz ),aa = a as (Element of ( InclPoset (the topology of Y) )) by A1;
a c= ( f . zz )
proof
let p being set;
assume p in a;
then consider q being set such that A54: p in q and A55: q in A by A41,TARSKI:def 4;
consider q1 being set such that A56: [ q1,q ] = ( g . ( hh . q ) ) and x in q1 and ( hh . q ) in q and A57: ( hh . q ) in ( f . x ) and A58: [: q1,q :] c= ( *graph f ) by A51,A55;
( hh . q ) in ( rng hh ) by A50,A55,FUNCT_1:def 3;
then [ q1,q ] in ( g .: ( rng hh ) ) by A14,A56,A57,FUNCT_1:def 6;
then q1 in B by RELAT_1:def 4;
then zz in q1 by A53,SETFAM_1:43;
then [ zz,p ] in [: q1,q :] by A54,ZFMISC_1:87;
hence thesis by A58,CKB53:1;
end;
then aa <= fz by YELLOW_1:3;
then a <= ( f . zz ) by A1,YELLOW_0:1;
then ( f . zz ) in P by A7,A40,WAYBEL_0:def 20;
hence thesis by FUNCT_2:38;
end;

now
let c1 being set;
assume c1 in B;
then consider c being set such that A59: [ c1,c ] in ( g .: ( rng hh ) ) by RELAT_1:def 4;
consider b being set such that b in ( dom g ) and A60: b in ( rng hh ) and A61: [ c1,c ] = ( g . b ) by A59,FUNCT_1:def 6;
consider c9 being set such that A62: c9 in ( dom hh ) and A63: b = ( hh . c9 ) by A60,FUNCT_1:def 3;
(ex c91 being set st (((([ c91,c9 ] = ( g . ( hh . c9 ) ) & x in c91) & ( hh . c9 ) in c9) & ( hh . c9 ) in ( f . x )) & [: c91,c9 :] c= ( *graph f ))) by A50,A51,A62;
hence x in c1 by A61,A63,ZFMISC_1:27;
end;
hence x in Q by A8,SETFAM_1:43;
end;
assume (ex Q being (Subset of X) st ((Q is  open & Q c= ( f " P )) & x in Q));
hence x in ( f " P );
end;
hence ( f " P ) is  open by TOPS_1:25;
end;
( [#] S ) <> ( {} );
hence thesis by A6,TOPS_2:43;
end;
