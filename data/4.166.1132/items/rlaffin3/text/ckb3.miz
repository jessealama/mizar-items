environ
vocabularies ALGSTR_0,AOFA_I00,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,COMPLEX1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCOP_1,FUNCSDOM,FUNCT_1,FUNCT_2,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,METRIC_1,MONOID_0,NAT_1,NUMBERS,ORDINAL1,ORDINAL2,ORDINAL4,PARTFUN1,PCOMPS_1,PRE_TOPC,PROB_1,PRVECT_1,QC_LANG1,RCOMP_1,REAL_1,RELAT_1,RFINSEQ,RLAFFIN1,RLSUB_1,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,SEMI_AF1,SETFAM_1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TOPMETR,TOPS_1,TOPS_2,VALUED_0,VALUED_1,VECTSP_1,XBOOLE_0,XCMPLX_0,XREAL_0,XXREAL_0,XXREAL_1,ZFMISC_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,NAT_1,XXREAL_0,CARD_1,XREAL_0,REAL_1,FINSET_1,DOMAIN_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,FUNCOP_1,STRUCT_0,FINSEQ_2,FINSEQOP,RVSUM_1,RLVECT_1,RLVECT_2,RUSUB_4,CONVEX1,RLAFFIN1,COMPLEX1,VALUED_0,METRIC_1,BINOP_2,PRE_TOPC,PCOMPS_1,ALGSTR_0,FUNCSDOM,TOPS_2,RLTOPSP1,EUCLID,VFUNCT_1,FVSUM_1,RLSUB_1,RLVECT_3,RLVECT_5,CARD_3,RCOMP_1,EUCLID_9,VECTSP_1,MATRIX_1,NAT_D,MATRIX_3,MATRIX_6,VECTSP_6,VECTSP_7,MATRIX13,MATRLIN,RLSUB_2,RFINSEQ,TOPMETR,RLAFFIN2,SETFAM_1,PRVECT_1,TOPREAL9,MATRTOP1;
definitions FINSEQ_1,MATRIX13,MATRTOP1,RLTOPSP1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0;
theorems BORSUK_5,CARD_1,CARD_2,CARD_3,CARD_FIN,COMPLEX1,CONVEX1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GOBOARD6,JORDAN2B,JORDAN2C,JORDAN6,LAPLACE,MATRIX_6,MATRIX13,MATRLIN,MATRLIN2,MATRTOP1,MATRTOP2,METRIC_1,METRIZTS,NAT_1,ORDINAL1,PARTFUN1,PCOMPS_1,PRALG_3,PRE_TOPC,RELAT_1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_1,RLSUB_2,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,RVSUM_1,SETFAM_1,SPPOL_1,STIRL2_1,STRUCT_0,TARSKI,TOPGRP_1,TOPMETR,TOPREAL7,TOPREAL9,TOPS_1,TOPS_2,TREAL_1,TSEP_1,URYSOHN1,VECTSP_1,VECTSP_4,VECTSP_7,VECTSP_9,VFUNCT_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,ZFMISC_1,NAT_D,CKB1,CKB2;
schemes FINSEQ_1,FUNCT_2,TREES_2;
registrations CARD_1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,JORDAN2B,MATRIX13,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRE_TOPC,PRVECT_1,REAL_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLTOPSP1,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TEX_1,TOPGEN_1,TOPMETR,TOPREAL1,TOPREALC,TOPS_1,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1;
constructors BINOP_2,CONVEX1,EUCLID_9,FUNCSDOM,FVSUM_1,MATRIX_6,MATRIX13,MATRTOP1,MONOID_0,NAT_D,RANKNULL,RCOMP_1,REAL_1,REALSET1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_2,RLVECT_3,RLVECT_5,RUSUB_5,SEQ_1,TDLAT_3,TOPMETR,TOPREAL9,TOPS_2,VECTSP_7,VFUNCT_1,WELLORD2,SEQ_4;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
theorem
Th2: (for f1,f2 being FinSequence holds (x in ( product ( f1 ^ f2 ) ) iff (ex p1,p2 being FinSequence st ((x = ( p1 ^ p2 ) & p1 in ( product f1 )) & p2 in ( product f2 )))))
proof
let f1 being FinSequence;
let f2 being FinSequence;
set f12 = ( f1 ^ f2 );
A1: ( len f12 ) = ( ( len f1 ) + ( len f2 ) ) by FINSEQ_1:22;
( dom f1 ) = ( Seg ( len f1 ) ) by FINSEQ_1:def 3;
then A2: ( f12 | ( Seg ( len f1 ) ) ) = f1 by FINSEQ_1:21;
hereby
assume A3: x in ( product f12 );
then consider g being Function such that A4: x = g and A5: ( dom g ) = ( dom f12 ) and A6: (for y being set holds (y in ( dom f12 ) implies ( g . y ) in ( f12 . y ))) by CARD_3:def 5;
( dom f12 ) = ( Seg ( len f12 ) ) by FINSEQ_1:def 3;
then reconsider g as FinSequence by A5,FINSEQ_1:def 2;
set p1 = ( g | ( len f1 ) );
consider p2 being FinSequence such that A7: g = ( p1 ^ p2 ) by FINSEQ_1:80;
take p1;
take p2;
thus (x = ( p1 ^ p2 ) & p1 in ( product f1 )) by A2,A3,A4,A7,PRALG_3:1;
A8: ( len f12 ) = ( len g ) by A5,FINSEQ_3:29;
then A9: ( len f1 ) = ( len p1 ) by A1,FINSEQ_1:59,NAT_1:11;
( len g ) = ( ( len p1 ) + ( len p2 ) ) by A7,FINSEQ_1:22;
then A10: ( dom f2 ) = ( dom p2 ) by A1,A8,A9,FINSEQ_3:29;
now
let y being set;
assume A11: y in ( dom f2 );
then reconsider i = y as Nat;
( i + ( len f1 ) ) in ( dom f12 ) by A11,FINSEQ_1:28;
then (( g . ( i + ( len f1 ) ) ) in ( f12 . ( i + ( len f1 ) ) ) & ( f12 . ( i + ( len f1 ) ) ) = ( f2 . i )) by A6,A11,FINSEQ_1:def 7;
hence ( p2 . y ) in ( f2 . y ) by A7,A9,A10,A11,FINSEQ_1:def 7;
end;
hence p2 in ( product f2 ) by A10,CARD_3:def 5;
end;
given p1 being FinSequence,p2 being FinSequence such that
A12: x = ( p1 ^ p2 )
and
A13: p1 in ( product f1 )
and
A14: p2 in ( product f2 );

A15: (ex g being Function st ((p2 = g & ( dom g ) = ( dom f2 )) & (for y being set holds (y in ( dom f2 ) implies ( g . y ) in ( f2 . y ))))) by A14,CARD_3:def 5;
A16: (ex g being Function st ((p1 = g & ( dom g ) = ( dom f1 )) & (for y being set holds (y in ( dom f1 ) implies ( g . y ) in ( f1 . y ))))) by A13,CARD_3:def 5;
then A17: ( len p1 ) = ( len f1 ) by FINSEQ_3:29;
A18:now
let y being set;
assume A19: y in ( dom f12 );
then reconsider i = y as Nat;
per cases  by A19,FINSEQ_1:25;
suppose A20: i in ( dom f1 );

then (( f12 . y ) = ( f1 . i ) & ( ( p1 ^ p2 ) . y ) = ( p1 . i )) by A16,FINSEQ_1:def 7;
hence ( ( p1 ^ p2 ) . y ) in ( f12 . y ) by A16,A20;
end;
suppose (ex j being Nat st (j in ( dom f2 ) & i = ( ( len f1 ) + j )));

then consider j being Nat such that A21: j in ( dom f2 ) and A22: i = ( ( len f1 ) + j );
(( f12 . y ) = ( f2 . j ) & ( ( p1 ^ p2 ) . y ) = ( p2 . j )) by A15,A17,A21,A22,FINSEQ_1:def 7;
hence ( ( p1 ^ p2 ) . y ) in ( f12 . y ) by A15,A21;
end;
end;
(( len ( p1 ^ p2 ) ) = ( ( len p1 ) + ( len p2 ) ) & ( len p2 ) = ( len f2 )) by A15,FINSEQ_1:22,FINSEQ_3:29;
then ( dom ( p1 ^ p2 ) ) = ( dom f12 ) by A1,A17,FINSEQ_3:29;
hence thesis by A12,A18,CARD_3:def 5;
end;
