environ
vocabularies ALGSTR_0,AOFA_I00,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,COMPLEX1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCOP_1,FUNCSDOM,FUNCT_1,FUNCT_2,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,METRIC_1,MONOID_0,NAT_1,NUMBERS,ORDINAL1,ORDINAL2,ORDINAL4,PARTFUN1,PCOMPS_1,PRE_TOPC,PROB_1,PRVECT_1,QC_LANG1,RCOMP_1,REAL_1,RELAT_1,RFINSEQ,RLAFFIN1,RLSUB_1,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,SEMI_AF1,SETFAM_1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TOPMETR,TOPS_1,TOPS_2,VALUED_0,VALUED_1,VECTSP_1,XBOOLE_0,XCMPLX_0,XREAL_0,XXREAL_0,XXREAL_1,ZFMISC_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,NAT_1,XXREAL_0,CARD_1,XREAL_0,REAL_1,FINSET_1,DOMAIN_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,FUNCOP_1,STRUCT_0,FINSEQ_2,FINSEQOP,RVSUM_1,RLVECT_1,RLVECT_2,RUSUB_4,CONVEX1,RLAFFIN1,COMPLEX1,VALUED_0,METRIC_1,BINOP_2,PRE_TOPC,PCOMPS_1,ALGSTR_0,FUNCSDOM,TOPS_2,RLTOPSP1,EUCLID,VFUNCT_1,FVSUM_1,RLSUB_1,RLVECT_3,RLVECT_5,CARD_3,RCOMP_1,EUCLID_9,VECTSP_1,MATRIX_1,NAT_D,MATRIX_3,MATRIX_6,VECTSP_6,VECTSP_7,MATRIX13,MATRLIN,RLSUB_2,RFINSEQ,TOPMETR,RLAFFIN2,SETFAM_1,PRVECT_1,TOPREAL9,MATRTOP1,CKB23,CKB24,CKB28;
definitions FINSEQ_1,MATRIX13,MATRTOP1,RLTOPSP1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,CKB23,CKB28;
theorems BORSUK_5,CARD_1,CARD_2,CARD_3,CARD_FIN,COMPLEX1,CONVEX1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GOBOARD6,JORDAN2B,JORDAN2C,JORDAN6,LAPLACE,MATRIX_6,MATRIX13,MATRLIN,MATRLIN2,MATRTOP1,MATRTOP2,METRIC_1,METRIZTS,NAT_1,ORDINAL1,PARTFUN1,PCOMPS_1,PRALG_3,PRE_TOPC,RELAT_1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_1,RLSUB_2,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,RVSUM_1,SETFAM_1,SPPOL_1,STIRL2_1,STRUCT_0,TARSKI,TOPGRP_1,TOPMETR,TOPREAL7,TOPREAL9,TOPS_1,TOPS_2,TREAL_1,TSEP_1,URYSOHN1,VECTSP_1,VECTSP_4,VECTSP_7,VECTSP_9,VFUNCT_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,ZFMISC_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB21,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes FINSEQ_1,FUNCT_2,TREES_2;
registrations CARD_1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,JORDAN2B,MATRIX13,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRE_TOPC,PRVECT_1,REAL_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLTOPSP1,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TEX_1,TOPGEN_1,TOPMETR,TOPREAL1,TOPREALC,TOPS_1,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB6,CKB7,CKB8,CKB18,CKB20,CKB22;
constructors BINOP_2,CONVEX1,EUCLID_9,FUNCSDOM,FVSUM_1,MATRIX_6,MATRIX13,MATRTOP1,MONOID_0,NAT_D,RANKNULL,RCOMP_1,REAL_1,REALSET1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_2,RLVECT_3,RLVECT_5,RUSUB_5,SEQ_1,TDLAT_3,TOPMETR,TOPREAL9,TOPS_2,VECTSP_7,VFUNCT_1,WELLORD2,SEQ_4,CKB23,CKB24,CKB28;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve n for Nat;
reserve k for Nat;
reserve V for RealLinearSpace;
reserve Affv for  finite  affinely-independent (Subset of V);
reserve EV for (Enumeration of Affv);
theorem
(for EV holds (x in ( Affin Affv ) implies (x in ( Affin ( EV .: ( Seg k ) ) ) iff ( x |-- EV ) = ( ( ( x |-- EV ) | k ) ^ ( ( ( card Affv ) -' k ) |-> ( 0 ) ) ))))
proof
let E being (Enumeration of Affv);
set B = ( E .: ( Seg k ) );
set cA = ( card Affv );
set cAk = ( cA -' k );
set xE = ( x |-- E );
set xEk = ( xE | k );
set cAk0 = ( cAk |-> ( 0 ) );
A1: B c= ( rng E ) by RELAT_1:111;
assume A2: x in ( Affin Affv );
then reconsider v = x as (Element of V);
A3: ( len xE ) = cA by CKB29:1;
A4: ( rng E ) = Affv by CKB23:def 1;
then A5: ( len E ) = cA by FINSEQ_4:62;
per cases ;
suppose A6: k > cA;

then ( Seg cA ) c= ( Seg k ) by FINSEQ_1:5;
then ( dom E ) c= ( Seg k ) by A5,FINSEQ_1:def 3;
then ( ( dom E ) /\ ( Seg k ) ) = ( dom E ) by XBOOLE_1:28;
then A7: B = ( E .: ( dom E ) ) by RELAT_1:112;
( cA - k ) < ( 0 ) by A6,XREAL_1:49;
then cAk = ( 0 ) by XREAL_0:def 2;
then A8: cAk0 is  empty;
xEk = xE by A3,A6,FINSEQ_1:58;
hence thesis by A2,A4,A8,A7,FINSEQ_1:34,RELAT_1:113;
end;
suppose A9: k <= cA;

A10: ( len cAk0 ) = cAk by CARD_1:def 7;
A11: ( len xEk ) = k by A3,A9,FINSEQ_1:59;
cAk = ( cA - k ) by A9,XREAL_1:233;
then A12: ( len ( xEk ^ cAk0 ) ) = ( k + ( cA - k ) ) by A11,A10,FINSEQ_1:22;
hereby
assume A13: x in ( Affin B );
now
let i being Nat;
assume A14: (1 <= i & i <= ( len xE ));
then A15: i in ( dom xE ) by FINSEQ_3:25;
A16: i in ( dom E ) by A3,A5,A14,FINSEQ_3:25;
A17: i in ( dom ( xEk ^ cAk0 ) ) by A3,A12,A14,FINSEQ_3:25;
per cases  by A11,A17,FINSEQ_1:25;
suppose A18: i in ( dom xEk );

hence ( ( xEk ^ cAk0 ) . i ) = ( xEk . i ) by FINSEQ_1:def 7
.= ( xE . i ) by A18,FUNCT_1:47;
end;
suppose (ex n being Nat st (n in ( dom cAk0 ) & i = ( k + n )));

then consider n being Nat such that A19: n in ( dom cAk0 ) and A20: i = ( k + n );
A21: (not ( E . i ) in B)
proof
assume ( E . i ) in B;
then consider t being set such that A22: ((t in ( dom E ) & t in ( Seg k )) & ( E . t ) = ( E . i )) by FUNCT_1:def 6;
i in ( Seg k ) by A16,A22,FUNCT_1:def 4;
then A23: i <= k by FINSEQ_1:1;
i >= k by A20,NAT_1:11;
then i = k by A23,XXREAL_0:1;
hence contradiction by A19,A20,FINSEQ_3:25;
end;
( cAk0 . n ) = ( 0 );
then ( ( xEk ^ cAk0 ) . i ) = ( 0 ) by A11,A19,A20,FINSEQ_1:def 7;
hence ( xE . i ) = ( ( xEk ^ cAk0 ) . i ) by A2,A1,A4,A13,A15,A21,CKB33:1;
end;
end;
hence xE = ( xEk ^ cAk0 ) by A12,CKB29:1,FINSEQ_1:14;
end;
assume A24: xE = ( xEk ^ cAk0 );
A25: ( dom ( xEk ^ cAk0 ) ) = ( dom xE ) by A3,A12,FINSEQ_3:29;
now
let y being set;
assume that
A26: y in ( dom xE )
and
A27: (not ( E . y ) in B);
reconsider i = y as Nat by A26;
i in ( dom E ) by A3,A5,A26,FINSEQ_3:29;
then (not i in ( Seg k )) by A27,FUNCT_1:def 6;
then (not i in ( dom xEk )) by A11,FINSEQ_1:def 3;
then consider n being Nat such that A28: (n in ( dom cAk0 ) & i = ( k + n )) by A11,A25,A26,FINSEQ_1:25;
( cAk0 . n ) = ( 0 );
hence ( xE . y ) = ( 0 ) by A11,A24,A28,FINSEQ_1:def 7;
end;
hence x in ( Affin B ) by A2,A1,A4,CKB33:1;
end;
end;
