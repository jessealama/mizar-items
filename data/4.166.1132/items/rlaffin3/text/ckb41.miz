environ
vocabularies ALGSTR_0,AOFA_I00,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,COMPLEX1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCOP_1,FUNCSDOM,FUNCT_1,FUNCT_2,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,METRIC_1,MONOID_0,NAT_1,NUMBERS,ORDINAL1,ORDINAL2,ORDINAL4,PARTFUN1,PCOMPS_1,PRE_TOPC,PROB_1,PRVECT_1,QC_LANG1,RCOMP_1,REAL_1,RELAT_1,RFINSEQ,RLAFFIN1,RLSUB_1,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,SEMI_AF1,SETFAM_1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TOPMETR,TOPS_1,TOPS_2,VALUED_0,VALUED_1,VECTSP_1,XBOOLE_0,XCMPLX_0,XREAL_0,XXREAL_0,XXREAL_1,ZFMISC_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,NAT_1,XXREAL_0,CARD_1,XREAL_0,REAL_1,FINSET_1,DOMAIN_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,FUNCOP_1,STRUCT_0,FINSEQ_2,FINSEQOP,RVSUM_1,RLVECT_1,RLVECT_2,RUSUB_4,CONVEX1,RLAFFIN1,COMPLEX1,VALUED_0,METRIC_1,BINOP_2,PRE_TOPC,PCOMPS_1,ALGSTR_0,FUNCSDOM,TOPS_2,RLTOPSP1,EUCLID,VFUNCT_1,FVSUM_1,RLSUB_1,RLVECT_3,RLVECT_5,CARD_3,RCOMP_1,EUCLID_9,VECTSP_1,MATRIX_1,NAT_D,MATRIX_3,MATRIX_6,VECTSP_6,VECTSP_7,MATRIX13,MATRLIN,RLSUB_2,RFINSEQ,TOPMETR,RLAFFIN2,SETFAM_1,PRVECT_1,TOPREAL9,MATRTOP1,CKB23,CKB24,CKB28;
definitions FINSEQ_1,MATRIX13,MATRTOP1,RLTOPSP1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,CKB23,CKB28;
theorems BORSUK_5,CARD_1,CARD_2,CARD_3,CARD_FIN,COMPLEX1,CONVEX1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GOBOARD6,JORDAN2B,JORDAN2C,JORDAN6,LAPLACE,MATRIX_6,MATRIX13,MATRLIN,MATRLIN2,MATRTOP1,MATRTOP2,METRIC_1,METRIZTS,NAT_1,ORDINAL1,PARTFUN1,PCOMPS_1,PRALG_3,PRE_TOPC,RELAT_1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_1,RLSUB_2,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,RVSUM_1,SETFAM_1,SPPOL_1,STIRL2_1,STRUCT_0,TARSKI,TOPGRP_1,TOPMETR,TOPREAL7,TOPREAL9,TOPS_1,TOPS_2,TREAL_1,TSEP_1,URYSOHN1,VECTSP_1,VECTSP_4,VECTSP_7,VECTSP_9,VFUNCT_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,ZFMISC_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB21,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40;
schemes FINSEQ_1,FUNCT_2,TREES_2;
registrations CARD_1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,JORDAN2B,MATRIX13,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRE_TOPC,PRVECT_1,REAL_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLTOPSP1,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TEX_1,TOPGEN_1,TOPMETR,TOPREAL1,TOPREALC,TOPS_1,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB6,CKB7,CKB8,CKB18,CKB20,CKB22;
constructors BINOP_2,CONVEX1,EUCLID_9,FUNCSDOM,FVSUM_1,MATRIX_6,MATRIX13,MATRTOP1,MONOID_0,NAT_D,RANKNULL,RCOMP_1,REAL_1,REALSET1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_2,RLVECT_3,RLVECT_5,RUSUB_5,SEQ_1,TDLAT_3,TOPMETR,TOPREAL9,TOPS_2,VECTSP_7,VFUNCT_1,WELLORD2,SEQ_4,CKB23,CKB24,CKB28;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve n for Nat;
reserve k for Nat;
reserve V for RealLinearSpace;
reserve v for (VECTOR of V);
reserve u for (VECTOR of V);
theorem
Lm7: (for n holds (for k holds (for A being non  empty  finite  affinely-independent (Subset of ( TOP-REAL n )) holds (k < ( card A ) implies (for E being (Enumeration of A) holds (( E . ( len E ) ) = ( 0* n ) implies (for P being (Subset of ( TOP-REAL k )) holds (for B being (Subset of ( ( TOP-REAL n ) | ( Affin A ) )) holds (B = { v where v is (Element of ( ( TOP-REAL n ) | ( Affin A ) )): ( ( v |-- E ) | k ) in P } implies (P is  open iff B is  open))))))))))
proof
let n being Nat;
let k being Nat;
set TRn = ( TOP-REAL n );
let A being non  empty  finite  affinely-independent (Subset of TRn);
assume that
A1: k < ( card A );
reconsider c1 = ( ( card A ) - 1 ) as (Element of ( NAT )) by NAT_1:14,NAT_1:21;
set AA = ( Affin A );
let E being (Enumeration of A);
assume that
A2: ( E . ( len E ) ) = ( 0* n );
A3: ( rng E ) = A by CKB23:def 1;
then A4: ( len E ) = ( card A ) by FINSEQ_4:62;
then A5: ( len E ) >= 1 by NAT_1:14;
then A6: ( len E ) in ( dom E ) by FINSEQ_3:25;
then A7: ( 0* n ) in ( rng E ) by A2,FUNCT_1:def 3;
A8: ( 0. TRn ) = ( 0* n ) by EUCLID:66;
then A9: ( 0. TRn ) in A by A2,A3,A6,FUNCT_1:def 3;
then A10: ( A \ { ( 0. TRn ) } ) is  linearly-independent by RLAFFIN1:46;
( card A ) <= ( 1 + ( dim TRn ) ) by CKB10:1;
then ( c1 + 1 ) <= ( 1 + n ) by CKB9:1;
then A11: c1 <= n by XREAL_1:6;
set nc = ( n -' c1 );
let P being (Subset of ( TOP-REAL k ));
let B being (Subset of ( TRn | AA ));
assume that
A12: B = { v where v is (Element of ( TRn | AA )): ( ( v |-- E ) | k ) in P };
A13: ( [#] ( TRn | AA ) ) = AA by PRE_TOPC:def 5;
consider F being FinSequence such that A14: ( rng F ) = ( A \ { ( 0. TRn ) } ) and A15: F is  one-to-one by FINSEQ_4:58;
set V = ( n -VectSp_over ( F_Real ) );
reconsider Bn = ( MX2FinS ( 1. (( F_Real ),n) ) ) as (OrdBasis of V) by MATRLIN2:45;
( len Bn ) = n by MATRTOP1:19;
then reconsider BnC = ( FinS2MX ( Bn | c1 ) ) as (Matrix of c1,n,( F_Real )) by A11,FINSEQ_1:59;
reconsider MBC = ( Mx2Tran BnC ) as Function;
A20: ( c1 + 1 ) = ( card A );
A21: ( len F ) = ( card ( A \ { ( 0. TRn ) } ) ) by A14,A15,FINSEQ_4:62
.= c1 by A9,A20,STIRL2_1:55;
set MBc = ( Mx2Tran BnC );
set TRc = ( TOP-REAL c1 );
A22: (( dom MBc ) = ( [#] TRc ) & ( MBc . ( 0. TRc ) ) = ( 0. TRn )) by FUNCT_2:def 1,MATRTOP1:29;
( rng Bn ) is (Basis of V) by MATRLIN:def 2;
then ( rng Bn ) is  linearly-independent by VECTSP_7:def 3;
then A23: ( rng ( Bn | c1 ) ) is  linearly-independent by RELAT_1:70,VECTSP_7:1;
reconsider F as (FinSequence of TRn) by A14,FINSEQ_1:def 4;
( [#] ( Lin ( rng ( Bn | ( len F ) ) ) ) ) c= (the carrier of V) by VECTSP_4:def 2;
then reconsider BF = ( [#] ( Lin ( rng ( Bn | ( len F ) ) ) ) ) as (Subset of TRn) by CKB13:1;
A24: ( rng MBC ) = BF by A21,MATRTOP2:18;
consider M being (Matrix of n,( F_Real )) such that A25: M is  invertible and A26: ( M | ( len F ) ) = F by A10,A14,A15,MATRTOP2:19;
set MTI = ( Mx2Tran ( M ~ ) );
A27: ( [#] ( TRn | BF ) ) = BF by PRE_TOPC:def 5;
( M ~ ) is  invertible by A25,MATRIX_6:16;
then A28: ( Det ( M ~ ) ) <> ( 0. ( F_Real ) ) by LAPLACE:34;
then A29: ( the_rank_of ( M ~ ) ) = n by MATRIX13:83;
then reconsider MTe = ( MTI * E ) as (Enumeration of ( MTI .: A )) by CKB27:1;
A30: ( rng MTe ) = ( MTI .: A ) by CKB23:def 1;
(( dom MTI ) = ( [#] TRn ) & MTI is  one-to-one) by A28,FUNCT_2:def 1,MATRTOP1:40;
then A,( MTI .: A ) are_equipotent  by CARD_1:33;
then A31: ( card A ) = ( card ( MTI .: A ) ) by CARD_1:5;
then ( len MTe ) = ( len E ) by A4,A30,FINSEQ_4:62;
then ( len E ) in ( dom MTe ) by A5,FINSEQ_3:25;
then A32: ( MTe . ( len E ) ) = ( MTI . ( 0. TRn ) ) by A2,A8,FUNCT_1:12
.= ( 0. TRn ) by MATRTOP1:29;
set MT = ( Mx2Tran M );
( Affin A ) = ( [#] ( Lin A ) ) by A3,A7,CKB17:1
.= ( [#] ( Lin ( rng F ) ) ) by A14,CKB4:1;
then A33: ( MT .: BF ) = AA by A10,A14,A15,A25,A26,MATRTOP2:21;
then A34: ( rng ( MT | BF ) ) = AA by RELAT_1:115;
A35: ( dom MT ) = ( [#] TRn ) by FUNCT_2:def 1;
then ( dom ( MT | BF ) ) = BF by RELAT_1:62;
then reconsider MT1 = ( MT | BF ) as (Function of ( TRn | BF ),( TRn | AA )) by A13,A27,A34,FUNCT_2:1;
reconsider MT as Function;
A36: ( Det M ) <> ( 0. ( F_Real ) ) by A25,LAPLACE:34;
then A37: ( MT " ) = MTI by MATRTOP1:43;
MT1 is  being_homeomorphism by A25,A33,METRIZTS:2;
then A38: (( MT1 " B ) is  open iff B is  open) by TOPGRP_1:26;
set nc0 = ( nc |-> ( 0 ) );
set Vc1 = { ( v ^ nc0 ) where v is (Element of TRc): (not contradiction) };
A39: nc = ( n - c1 ) by A11,XREAL_1:233;
then A40: n = ( c1 + nc );
A41: MT is  one-to-one by A36,MATRTOP1:40;
then A42: ( MT " AA ) = BF by A33,A35,FUNCT_1:94;
A43: ( MT " A ) c= ( MT " AA ) by RELAT_1:143,RLAFFIN1:49;
then A44: ( MTI .: A ) c= BF by A37,A41,A42,FUNCT_1:85;
Bn is  one-to-one by MATRLIN:def 2;
then ( Bn | c1 ) is  one-to-one by FUNCT_1:52;
then A45: ( the_rank_of BnC ) = c1 by A23,MATRIX13:121;
then A46: MBC is  one-to-one by MATRTOP1:39;
then A47: ( dom ( MBC " ) ) = ( rng MBC ) by FUNCT_1:33;
then reconsider MBCe = ( ( MBC " ) * MTe ) as FinSequence by A24,A30,A44,FINSEQ_1:16;
A48: ( rng MBCe ) = ( ( MBC " ) .: ( MTI .: A ) ) by A30,RELAT_1:127;
( MTI .: A ) is  affinely-independent by A29,MATRTOP2:24;
then ( MBc " ( MTI .: A ) ) is  affinely-independent by A45,MATRTOP2:27;
then reconsider R = ( rng MBCe ) as  finite  affinely-independent (Subset of TRc) by A46,A48,FUNCT_1:85;
reconsider MBCe as (Enumeration of R) by A46,CKB23:def 1;
reconsider MBCeE = ( MBc * MBCe ) as (Enumeration of ( ( Mx2Tran BnC ) .: R )) by A45,CKB27:1;
( MBC * ( MBC " ) ) = ( id ( rng MBC ) ) by A46,FUNCT_1:39;
then A49: MBCeE = ( ( id ( rng MBC ) ) * MTe ) by RELAT_1:36
.= MTe by A24,A30,A44,RELAT_1:53;
set PPP = { v where v is (Element of TRc): ( ( v |-- MBCe ) | k ) in P };
A50: PPP c= ( [#] TRc )
proof
let x being set;
assume x in PPP;
then (ex v being (Element of TRc) st (x = v & ( ( v |-- MBCe ) | k ) in P));
hence thesis;
end;
A51: ( MTI .: A ) = ( MT " A ) by A37,A41,FUNCT_1:85;
A52: ( MT " B ) c= ( MT " AA ) by A13,RELAT_1:143;
A53: ( MTI .: A ),R are_equipotent  by A24,A46,A47,A44,A48,CARD_1:33;
then A54: ( c1 + 1 ) = ( card R ) by A31,CARD_1:5;
then A55: (k <= c1 & R is non  empty) by A1,NAT_1:13;
reconsider PPP as (Subset of TRc) by A50;
set nPP = { v where v is (Element of TRn): (( v | c1 ) in PPP & v in BF) };
( dim TRc ) = c1 by CKB9:1;
then A56: ( Affin R ) = ( [#] TRc ) by A54,CKB11:1;
A57: ( ( Mx2Tran BnC ) .: R ) = ( MBC .: ( ( MBC " ) .: ( MTI .: A ) ) ) by A30,RELAT_1:127
.= ( ( MBC * ( MBC " ) ) .: ( MTI .: A ) ) by RELAT_1:126
.= ( ( id ( rng MBC ) ) .: ( MTI .: A ) ) by A46,FUNCT_1:39
.= ( MTI .: A ) by A51,A42,A43,A24,FUNCT_1:92;
A58: ( MT " B ) c= nPP
proof
let x being set;
assume A59: x in ( MT " B );
then reconsider w = x as (Element of ( TRn | BF )) by A33,A27,A35,A41,A52,FUNCT_1:94;
( MT . x ) in B by A59,FUNCT_1:def 7;
then consider v being (Element of ( TRn | AA )) such that A60: ( MT . x ) = v and A61: ( ( v |-- E ) | k ) in P by A12;
x in ( dom MT ) by A59,FUNCT_1:def 7;
then A62: ( MTI . v ) = x by A37,A41,A60,FUNCT_1:34;
x in BF by A42,A52,A59;
then reconsider W = x as (Element of TRn);
A63: v in AA by A13;
consider u being set such that A64: u in ( dom MBc ) and A65: ( MBc . u ) = w by A42,A52,A24,A59,FUNCT_1:def 3;
A66: ( W | c1 ) = u by A64,A65,MATRTOP1:38;
reconsider u as (Element of TRc) by A64;
( u |-- MBCe ) = ( w |-- MTe ) by A65,A57,A49,A45,A56,CKB32:1
.= ( v |-- E ) by A29,A62,A63,CKB32:1;
then u in PPP by A61;
hence thesis by A42,A52,A59,A66;
end;
A67: BF c= Vc1
proof
let x being set;
assume A68: x in BF;
then reconsider f = x as (Element of TRn);
( len f ) = n by CARD_1:def 7;
then ( len ( f | c1 ) ) = c1 by A11,FINSEQ_1:59;
then ( f | c1 ) is c1 -element by CARD_1:def 7;
then A69: ( f | c1 ) is (Element of TRc) by CKB1:1;
f in ( Lin ( rng ( Bn | c1 ) ) ) by A21,A68,STRUCT_0:def 5;
then f = ( ( f | c1 ) ^ nc0 ) by MATRTOP2:20;
hence thesis by A69;
end;
Vc1 c= BF
proof
let x being set;
assume x in Vc1;
then consider v being (Element of TRc) such that A70: x = ( v ^ nc0 ) and (not contradiction);
( len v ) = c1 by CARD_1:def 7;
then ( ( v ^ ( nc |-> ( 0 ) ) ) | c1 ) = ( ( v ^ ( nc |-> ( 0 ) ) ) | ( dom v ) ) by FINSEQ_1:def 3
.= v by FINSEQ_1:21;
then ( v ^ ( nc |-> ( 0 ) ) ) in ( Lin ( rng ( Bn | c1 ) ) ) by A39,MATRTOP2:20;
hence thesis by A21,A70,STRUCT_0:def 5;
end;
then A71: BF = Vc1 by A67,XBOOLE_0:def 10;
A72: nPP c= ( MT " B )
proof
let x being set;
assume x in nPP;
then consider v being (Element of TRn) such that A73: x = v and A74: ( v | c1 ) in PPP and A75: v in BF;
consider v1 being (Element of TRc) such that A76: v = ( v1 ^ nc0 ) by A71,A75;
consider u being (Element of TRc) such that A77: u = ( v | c1 ) and A78: ( ( u |-- MBCe ) | k ) in P by A74;
set w = ( MBc . u );
A79: w = ( MTI . ( MT . w ) ) by A35,A37,A41,FUNCT_1:34;
( dom MBc ) = ( [#] TRc ) by FUNCT_2:def 1;
then A80: w in BF by A24,FUNCT_1:def 3;
then A81: ( MT . w ) in AA by A33,A35,FUNCT_1:def 6;
( u |-- MBCe ) = ( w |-- MBCeE ) by A45,A56,CKB32:1
.= ( ( MT . w ) |-- E ) by A29,A79,A81,CKB32:1,A57,A49;
then A82: ( MT . w ) in B by A12,A13,A78,A81;
consider w1 being (Element of TRc) such that A83: w = ( w1 ^ nc0 ) by A71,A80;
w1 = ( w | ( dom w1 ) ) by A83,FINSEQ_1:21
.= ( w | ( Seg ( len w1 ) ) ) by FINSEQ_1:def 3
.= ( w | c1 ) by CARD_1:def 7
.= ( v | c1 ) by A77,MATRTOP1:38
.= ( v | ( Seg ( len v1 ) ) ) by CARD_1:def 7
.= ( v | ( dom v1 ) ) by FINSEQ_1:def 3
.= v1 by A76,FINSEQ_1:21;
hence thesis by A35,A73,A83,A76,A82,FUNCT_1:def 7;
end;
A84: ( len MBCe ) = ( len E ) by A4,A54,FINSEQ_4:62;
then ( len E ) in ( dom MBCe ) by A5,FINSEQ_3:25;
then ( MBCe . ( len E ) ) = ( ( MBC " ) . ( 0. TRn ) ) by A32,FUNCT_1:12
.= ( 0. TRc ) by A46,A22,FUNCT_1:34;
then A85: ( MBCe . ( len MBCe ) ) = ( 0* c1 ) by A84,EUCLID:70;
( MT1 " B ) = ( BF /\ ( MT " B ) ) by FUNCT_1:70
.= ( MT " B ) by A13,A42,RELAT_1:143,XBOOLE_1:28;
then ( MT1 " B ) = nPP by A58,A72,XBOOLE_0:def 10;
then A86: (PPP is  open iff B is  open) by A38,A71,A40,CKB14:1;
( card R ) = ( c1 + 1 ) by A31,A53,CARD_1:5;
hence thesis by A85,A86,A55,CKB40:1;
end;
