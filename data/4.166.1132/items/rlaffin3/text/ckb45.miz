environ
vocabularies ALGSTR_0,AOFA_I00,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,COMPLEX1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCOP_1,FUNCSDOM,FUNCT_1,FUNCT_2,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,METRIC_1,MONOID_0,NAT_1,NUMBERS,ORDINAL1,ORDINAL2,ORDINAL4,PARTFUN1,PCOMPS_1,PRE_TOPC,PROB_1,PRVECT_1,QC_LANG1,RCOMP_1,REAL_1,RELAT_1,RFINSEQ,RLAFFIN1,RLSUB_1,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,SEMI_AF1,SETFAM_1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TOPMETR,TOPS_1,TOPS_2,VALUED_0,VALUED_1,VECTSP_1,XBOOLE_0,XCMPLX_0,XREAL_0,XXREAL_0,XXREAL_1,ZFMISC_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,NAT_1,XXREAL_0,CARD_1,XREAL_0,REAL_1,FINSET_1,DOMAIN_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,FUNCOP_1,STRUCT_0,FINSEQ_2,FINSEQOP,RVSUM_1,RLVECT_1,RLVECT_2,RUSUB_4,CONVEX1,RLAFFIN1,COMPLEX1,VALUED_0,METRIC_1,BINOP_2,PRE_TOPC,PCOMPS_1,ALGSTR_0,FUNCSDOM,TOPS_2,RLTOPSP1,EUCLID,VFUNCT_1,FVSUM_1,RLSUB_1,RLVECT_3,RLVECT_5,CARD_3,RCOMP_1,EUCLID_9,VECTSP_1,MATRIX_1,NAT_D,MATRIX_3,MATRIX_6,VECTSP_6,VECTSP_7,MATRIX13,MATRLIN,RLSUB_2,RFINSEQ,TOPMETR,RLAFFIN2,SETFAM_1,PRVECT_1,TOPREAL9,MATRTOP1,CKB23,CKB24,CKB28;
definitions FINSEQ_1,MATRIX13,MATRTOP1,RLTOPSP1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,CKB23,CKB28;
theorems BORSUK_5,CARD_1,CARD_2,CARD_3,CARD_FIN,COMPLEX1,CONVEX1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GOBOARD6,JORDAN2B,JORDAN2C,JORDAN6,LAPLACE,MATRIX_6,MATRIX13,MATRLIN,MATRLIN2,MATRTOP1,MATRTOP2,METRIC_1,METRIZTS,NAT_1,ORDINAL1,PARTFUN1,PCOMPS_1,PRALG_3,PRE_TOPC,RELAT_1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_1,RLSUB_2,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,RVSUM_1,SETFAM_1,SPPOL_1,STIRL2_1,STRUCT_0,TARSKI,TOPGRP_1,TOPMETR,TOPREAL7,TOPREAL9,TOPS_1,TOPS_2,TREAL_1,TSEP_1,URYSOHN1,VECTSP_1,VECTSP_4,VECTSP_7,VECTSP_9,VFUNCT_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,ZFMISC_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB21,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43;
schemes FINSEQ_1,FUNCT_2,TREES_2;
registrations CARD_1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,JORDAN2B,MATRIX13,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRE_TOPC,PRVECT_1,REAL_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLTOPSP1,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TEX_1,TOPGEN_1,TOPMETR,TOPREAL1,TOPREALC,TOPS_1,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB6,CKB7,CKB8,CKB18,CKB20,CKB22,CKB44;
constructors BINOP_2,CONVEX1,EUCLID_9,FUNCSDOM,FVSUM_1,MATRIX_6,MATRIX13,MATRTOP1,MONOID_0,NAT_D,RANKNULL,RCOMP_1,REAL_1,REALSET1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_2,RLVECT_3,RLVECT_5,RUSUB_5,SEQ_1,TDLAT_3,TOPMETR,TOPREAL9,TOPS_2,VECTSP_7,VFUNCT_1,WELLORD2,SEQ_4,CKB23,CKB24,CKB28;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve n for Nat;
reserve k for Nat;
reserve V for RealLinearSpace;
reserve u for (VECTOR of V);
reserve w for (VECTOR of V);
reserve Affn for  affinely-independent (Subset of ( TOP-REAL n ));
reserve Ak for (Subset of ( TOP-REAL k ));
reserve EN for (Enumeration of Affn);
reserve pnA for (Element of ( ( TOP-REAL n ) | ( Affin Affn ) ));
theorem
Th27: (for EN holds (for B being (Subset of ( ( TOP-REAL n ) | ( Affin Affn ) )) holds ((k < ( card Affn ) & B = { pnA: ( ( pnA |-- EN ) | k ) in Ak }) implies (Ak is  open iff B is  open))))
proof
let EN;
set E = EN;
set Tn = ( TOP-REAL n );
set Tk = ( TOP-REAL k );
set A = Affn;
set cA = ( ( card A ) -' 1 );
set TcA = ( TOP-REAL cA );
set AA = ( Affin A );
let B being (Subset of ( Tn | AA ));
assume that
A1: k < ( card A )
and
A2: B = { v where v is (Element of ( Tn | AA )): ( ( v |-- E ) | k ) in Ak };
set BB = { u where u is (Element of Tn): (u in AA & ( ( u |-- E ) | k ) in Ak) };
A3: ( [#] ( Tn | AA ) ) = AA by PRE_TOPC:def 5;
A4: BB c= B
proof
let x being set;
assume x in BB;
then consider u being (Element of Tn) such that A5: ((x = u & u in AA) & ( ( u |-- E ) | k ) in Ak);
thus thesis by A2,A3,A5;
end;
A6: A is non  empty by A1;
B c= BB
proof
let x being set;
assume x in B;
then consider u being (Element of ( Tn | AA )) such that A7: (x = u & ( ( u |-- E ) | k ) in Ak) by A2;
AA is non  empty by A6;
then u in AA by A3;
hence thesis by A7;
end;
then A8: BB = B by A4,XBOOLE_0:def 10;
A9: ( rng E ) = A by CKB23:def 1;
then A10: ( len E ) = ( card A ) by FINSEQ_4:62;
then A11: ( len E ) >= 1 by A1,NAT_1:14;
then A12: ( len E ) in ( dom E ) by FINSEQ_3:25;
then ( E . ( len E ) ) in A by A9,FUNCT_1:def 3;
then reconsider EL = ( E . ( len E ) ) as (Element of Tn);
( len E ) in ( Seg ( card A ) ) by A10,A11;
then A13: ( ( ( card A ) |-> ( - EL ) ) . ( len E ) ) = ( - EL ) by FINSEQ_2:57;
A14: k < ( card ( ( - EL ) + A ) ) by A1,RLAFFIN1:7;
set T = ( transl (( - EL ),Tn) );
set TAA = ( T .: AA );
A15: ( [#] ( Tn | TAA ) ) = TAA by PRE_TOPC:def 5;
A16: ( rng ( T | AA ) ) = ( T .: AA ) by RELAT_1:115;
A17: ( dom T ) = ( [#] Tn ) by FUNCT_2:52;
then ( dom ( T | AA ) ) = AA by RELAT_1:62;
then reconsider TA = ( T | AA ) as (Function of ( Tn | AA ),( Tn | TAA )) by A3,A15,A16,FUNCT_2:1;
reconsider TAB = ( TA .: B ) as (Subset of ( Tn | TAA ));
A18: TA is  being_homeomorphism by METRIZTS:2;
reconsider Ev = ( E + ( ( card A ) |-> ( - EL ) ) ) as (Enumeration of ( ( - EL ) + A )) by CKB25:1;
A19: ( card ( ( - EL ) + A ) ) = ( card A ) by RLAFFIN1:7;
then A20: ( ( - EL ) + A ) is non  empty by A1;
A21: ( rng Ev ) = ( ( - EL ) + A ) by CKB23:def 1;
then ( len Ev ) = ( card A ) by A19,FINSEQ_4:62;
then ( dom E ) = ( dom Ev ) by A10,FINSEQ_3:29;
then ( Ev . ( len E ) ) = ( EL + ( - EL ) ) by A12,A13,FVSUM_1:17
.= ( 0. Tn ) by RLVECT_1:5
.= ( 0* n ) by EUCLID:70;
then A22: ( Ev . ( len Ev ) ) = ( 0* n ) by A10,A19,A21,FINSEQ_4:62;
set Tab = { w where w is (Element of ( Tn | TAA )): ( ( w |-- Ev ) | k ) in Ak };
A23: ( ( - EL ) + AA ) = ( Affin ( ( - EL ) + A ) ) by RLAFFIN1:53;
then A24: ( T .: AA ) = ( Affin ( ( - EL ) + A ) ) by RLTOPSP1:33;
( TA .: B ) = ( T .: B ) by A3,RELAT_1:129;
then A25: TAB = { w where w is (Element of Tn): (w in ( Affin ( ( - EL ) + A ) ) & ( ( w |-- Ev ) | k ) in Ak) } by A8,CKB39:1;
A26: TAB c= Tab
proof
let x being set;
assume x in TAB;
then consider w being (Element of Tn) such that A27: x = w and A28: w in ( Affin ( ( - EL ) + A ) ) and A29: ( ( w |-- Ev ) | k ) in Ak by A25;
w in TAA by A23,A28,RLTOPSP1:33;
hence thesis by A15,A27,A29;
end;
A30: ( T .: AA ) is non  empty by A6,A17,RELAT_1:119;
Tab c= TAB
proof
let x being set;
assume x in Tab;
then consider w being (Element of ( Tn | TAA )) such that A31: (x = w & ( ( w |-- Ev ) | k ) in Ak);
w in TAA by A15,A30;
hence thesis by A24,A25,A31;
end;
then TAB = Tab by A26,XBOOLE_0:def 10;
then (TAB is  open iff Ak is  open) by A24,A22,A14,A20,CKB41:1;
hence thesis by A6,A18,A30,TOPGRP_1:25;
end;
