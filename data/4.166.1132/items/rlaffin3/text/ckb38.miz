environ
vocabularies ALGSTR_0,AOFA_I00,ARYTM_1,ARYTM_3,CARD_1,CARD_3,CLASSES1,COMPLEX1,CONVEX1,EUCLID,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSET_1,FUNCOP_1,FUNCSDOM,FUNCT_1,FUNCT_2,LMOD_7,MATRIX_1,MATRIX_3,MATRIX13,MATRLIN,MATRLIN2,MESFUNC1,METRIC_1,MONOID_0,NAT_1,NUMBERS,ORDINAL1,ORDINAL2,ORDINAL4,PARTFUN1,PCOMPS_1,PRE_TOPC,PROB_1,PRVECT_1,QC_LANG1,RCOMP_1,REAL_1,RELAT_1,RFINSEQ,RLAFFIN1,RLSUB_1,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,SEMI_AF1,SETFAM_1,STRUCT_0,SUBSET_1,SUPINF_2,TARSKI,TOPMETR,TOPS_1,TOPS_2,VALUED_0,VALUED_1,VECTSP_1,XBOOLE_0,XCMPLX_0,XREAL_0,XXREAL_0,XXREAL_1,ZFMISC_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,NAT_1,XXREAL_0,CARD_1,XREAL_0,REAL_1,FINSET_1,DOMAIN_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,FUNCOP_1,STRUCT_0,FINSEQ_2,FINSEQOP,RVSUM_1,RLVECT_1,RLVECT_2,RUSUB_4,CONVEX1,RLAFFIN1,COMPLEX1,VALUED_0,METRIC_1,BINOP_2,PRE_TOPC,PCOMPS_1,ALGSTR_0,FUNCSDOM,TOPS_2,RLTOPSP1,EUCLID,VFUNCT_1,FVSUM_1,RLSUB_1,RLVECT_3,RLVECT_5,CARD_3,RCOMP_1,EUCLID_9,VECTSP_1,MATRIX_1,NAT_D,MATRIX_3,MATRIX_6,VECTSP_6,VECTSP_7,MATRIX13,MATRLIN,RLSUB_2,RFINSEQ,TOPMETR,RLAFFIN2,SETFAM_1,PRVECT_1,TOPREAL9,MATRTOP1,CKB23,CKB24,CKB28;
definitions FINSEQ_1,MATRIX13,MATRTOP1,RLTOPSP1,STRUCT_0,SUBSET_1,TARSKI,XBOOLE_0,CKB23,CKB28;
theorems BORSUK_5,CARD_1,CARD_2,CARD_3,CARD_FIN,COMPLEX1,CONVEX1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,FUNCOP_1,FUNCT_1,FUNCT_2,FVSUM_1,GOBOARD6,JORDAN2B,JORDAN2C,JORDAN6,LAPLACE,MATRIX_6,MATRIX13,MATRLIN,MATRLIN2,MATRTOP1,MATRTOP2,METRIC_1,METRIZTS,NAT_1,ORDINAL1,PARTFUN1,PCOMPS_1,PRALG_3,PRE_TOPC,RELAT_1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_1,RLSUB_2,RLTOPSP1,RLVECT_1,RLVECT_2,RLVECT_3,RLVECT_5,RUSUB_4,RVSUM_1,SETFAM_1,SPPOL_1,STIRL2_1,STRUCT_0,TARSKI,TOPGRP_1,TOPMETR,TOPREAL7,TOPREAL9,TOPS_1,TOPS_2,TREAL_1,TSEP_1,URYSOHN1,VECTSP_1,VECTSP_4,VECTSP_7,VECTSP_9,VFUNCT_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,ZFMISC_1,NAT_D,CKB1,CKB2,CKB3,CKB4,CKB5,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB19,CKB21,CKB23,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37;
schemes FINSEQ_1,FUNCT_2,TREES_2;
registrations CARD_1,EUCLID,EUCLID_7,EUCLID_9,FINSEQ_1,FINSEQ_2,FINSET_1,FUNCT_1,JORDAN2B,MATRIX13,MATRTOP1,MEMBERED,MONOID_0,NAT_1,NUMBERS,PRE_TOPC,PRVECT_1,REAL_1,REALSET1,RELAT_1,RELSET_1,RLAFFIN1,RLTOPSP1,RLVECT_5,RVSUM_1,STRUCT_0,SUBSET_1,TEX_1,TOPGEN_1,TOPMETR,TOPREAL1,TOPREALC,TOPS_1,VALUED_0,VECTSP_1,VECTSP_9,XBOOLE_0,XREAL_0,XXREAL_0,ZFMISC_1,CKB6,CKB7,CKB8,CKB18,CKB20,CKB22;
constructors BINOP_2,CONVEX1,EUCLID_9,FUNCSDOM,FVSUM_1,MATRIX_6,MATRIX13,MATRTOP1,MONOID_0,NAT_D,RANKNULL,RCOMP_1,REAL_1,REALSET1,RFINSEQ,RLAFFIN1,RLAFFIN2,RLSUB_2,RLVECT_3,RLVECT_5,RUSUB_5,SEQ_1,TDLAT_3,TOPMETR,TOPREAL9,TOPS_2,VECTSP_7,VFUNCT_1,WELLORD2,SEQ_4,CKB23,CKB24,CKB28;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve n for Nat;
reserve k for Nat;
reserve V for RealLinearSpace;
reserve v for (VECTOR of V);
reserve u for (VECTOR of V);
reserve Affn for  affinely-independent (Subset of ( TOP-REAL n ));
reserve EN for (Enumeration of Affn);
theorem
Th24: (for A being (Subset of ( n -VectSp_over ( F_Real ) )) holds (((Affn = A & ( 0* n ) in Affn) & ( EN . ( len EN ) ) = ( 0* n )) implies (for B being (OrdBasis of ( Lin A )) holds (B = ( EN | ( ( card Affn ) -' 1 ) ) implies (for v being (Element of ( Lin A )) holds ( v |-- B ) = ( ( v |-- EN ) | ( ( card Affn ) -' 1 ) ))))))
proof
reconsider Z = ( 0 ) as (Element of ( REAL )) by CKB37:1;
set TR = ( TOP-REAL n );
set A = Affn;
set V = ( n -VectSp_over ( F_Real ) );
set E = EN;
let A1 being (Subset of V);
assume that
A1: A = A1
and
A2: ( 0* n ) in A
and
A3: ( E . ( len E ) ) = ( 0* n );
deffunc F(set) = Z;
A4: ( Affin A ) = ( [#] ( Lin A ) ) by A2,CKB17:1;
set cA = ( ( card A ) -' 1 );
let B being (OrdBasis of ( Lin A1 ));
assume that
A5: B = ( E | cA );
A6: ( rng B ) = ( A \ { ( 0* n ) } ) by A2,A3,A5,CKB36:1;
then reconsider rB = ( rng B ) as (Subset of TR);
let v being (Element of ( Lin A1 ));
set vB = ( v |-- B );
consider KV being (Linear_Combination of ( Lin A1 )) such that A7: v = ( Sum KV ) and A8: ( Carrier KV ) c= ( rng B ) and A9: (for k being Nat holds ((1 <= k & k <= ( len vB )) implies ( vB /. k ) = ( KV . ( B /. k ) ))) by MATRLIN:def 7;
A10: ( ( v |-- E ) | cA ) = ( ( v |-- A ) * ( E | cA ) ) by RELAT_1:83;
( dom ( v |-- A ) ) = ( [#] TR ) by FUNCT_2:def 1;
then rB c= ( dom ( v |-- A ) );
then A11: ( len ( ( v |-- E ) | cA ) ) = ( len B ) by A5,A10,FINSEQ_2:29;
A12: ( [#] ( Lin A1 ) ) = ( [#] ( Lin A ) ) by A1,MATRTOP2:6;
then reconsider RB = rB as (Subset of ( Lin A ));
reconsider KR = KV as (Linear_Combination of ( Lin A )) by A12,MATRTOP2:11;
A13: ( Carrier KR ) = ( Carrier KV ) by MATRTOP2:12;
consider KR1 being (Linear_Combination of TR) such that A14: ( Carrier KR1 ) = ( Carrier KR ) and A15: ( Sum KR1 ) = ( Sum KR ) by RLVECT_5:11;
( rng B ) c= A by A6,XBOOLE_1:36;
then A16: ( Carrier KR1 ) c= A by A8,A13,A14,XBOOLE_1:1;
reconsider KR2 = ( KR1 | ( [#] ( Lin A ) ) ) as (Linear_Combination of ( Lin A )) by MATRTOP2:10;
A17: (( Carrier KR2 ) = ( Carrier KR1 ) & ( Sum KR2 ) = ( Sum KR1 )) by A14,RLVECT_5:10;
reconsider KR1 as (Linear_Combination of A) by A16,RLVECT_2:def 6;
consider KR0 being (Function of (the carrier of TR),( REAL )) such that A18: ( KR0 . ( 0. TR ) ) = ( 1 - ( sum KR1 ) ) and A19: (for u being (Element of TR) holds (u <> ( 0. TR ) implies ( KR0 . u ) = F(u))) from FUNCT_2:sch 6;
reconsider KR0 as (Element of ( Funcs ((the carrier of TR),( REAL )) )) by FUNCT_2:8;
now
let u being (VECTOR of TR);
assume (not u in { ( 0. TR ) });
then u <> ( 0. TR ) by TARSKI:def 1;
hence ( KR0 . u ) = ( 0 ) by A19;
end;
then reconsider KR0 as (Linear_Combination of TR) by RLVECT_2:def 3;
( Carrier KR0 ) c= { ( 0. TR ) }
proof
let x;
assume that
A20: x in ( Carrier KR0 )
and
A21: (not x in { ( 0. TR ) });
(( KR0 . x ) <> ( 0 ) & x <> ( 0. TR )) by A20,A21,RLVECT_2:19,TARSKI:def 1;
hence thesis by A19,A20;
end;
then reconsider KR0 as (Linear_Combination of { ( 0. TR ) }) by RLVECT_2:def 6;
A22: ( Carrier KR0 ) c= { ( 0. TR ) } by RLVECT_2:def 6;
( rng B ) is (Basis of ( Lin A1 )) by MATRLIN:def 2;
then ( rng B ) is  linearly-independent by VECTSP_7:def 3;
then ( rng B ) is  linearly-independent  linearly-independent (Subset of V) by VECTSP_9:11;
then rB is  linearly-independent by MATRTOP2:7;
then A23: RB is  linearly-independent by RLVECT_5:15;
A24: ( len vB ) = ( len B ) by MATRLIN:def 7;
A25: ( Sum KR0 ) = ( ( KR0 . ( 0. TR ) ) * ( 0. TR ) ) by RLVECT_2:32
.= ( 0. TR ) by RLVECT_1:10;
A26: ( 0. TR ) = ( 0* n ) by EUCLID:66;
then { ( 0. TR ) } c= A by A2,ZFMISC_1:31;
then reconsider KR0 as (Linear_Combination of A) by RLVECT_2:21;
reconsider K = ( KR1 + KR0 ) as (Linear_Combination of A) by RLVECT_2:38;
A27: ( sum K ) = ( ( sum KR1 ) + ( sum KR0 ) ) by RLAFFIN1:34
.= ( ( sum KR1 ) + ( 1 - ( sum KR1 ) ) ) by A18,A22,RLAFFIN1:32
.= 1;
( Sum K ) = ( ( Sum KR1 ) + ( Sum KR0 ) ) by RLVECT_3:1
.= ( Sum KR1 ) by A25,RLVECT_1:def 4
.= v by A7,A15,MATRTOP2:12;
then A28: ( v |-- A ) = K by A12,A4,A27,RLAFFIN1:def 7;
now
let k being Nat;
reconsider Bk = ( B /. k ) as (Element of TR) by A12,RLSUB_1:10;
assume A29: (1 <= k & k <= ( len B ));
then A30: (( vB /. k ) = ( KV . Bk ) & k in ( dom ( ( v |-- E ) | cA ) )) by A24,A9,A11,FINSEQ_3:25;
A31: k in ( dom B ) by A29,FINSEQ_3:25;
then A32: Bk = ( B . k ) by PARTFUN1:def 6;
then Bk in ( rng B ) by A31,FUNCT_1:def 3;
then Bk <> ( 0. TR ) by A6,A26,ZFMISC_1:56;
then (not Bk in ( Carrier KR0 )) by A22,TARSKI:def 1;
then A33: ( KR0 . Bk ) = ( 0 ) by RLVECT_2:19;
k in ( dom vB ) by A24,A29,FINSEQ_3:25;
then A34: ( vB . k ) = ( vB /. k ) by PARTFUN1:def 6;
( K . Bk ) = ( ( KR1 . Bk ) + ( KR0 . Bk ) ) by RLVECT_2:def 10;
then ( K . Bk ) = ( KR2 . Bk ) by A12,A33,FUNCT_1:49
.= ( KV . Bk ) by A23,A8,A13,A14,A15,A17,RLVECT_5:1;
hence ( ( ( v |-- E ) | cA ) . k ) = ( vB . k ) by A5,A28,A10,A30,A34,A32,FUNCT_1:12;
end;
hence thesis by A24,A11,FINSEQ_1:14;
end;
