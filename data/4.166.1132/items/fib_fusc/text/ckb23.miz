environ
vocabularies NUMBERS,CARD_1,INT_1,POWER,SUBSET_1,XXREAL_0,RELAT_1,ARYTM_3,ARYTM_1,NAT_1,AMI_3,AFINSQ_1,AMI_1,ORDINAL4,GRAPHSP,SCM_1,FINSEQ_1,MSUALG_1,FUNCT_1,PRE_FF,FSM_1,NEWTON,FIB_FUSC,SCMNORM,PARTFUN1,TARSKI;
notations TARSKI,ENUMSET1,XCMPLX_0,SUBSET_1,NUMBERS,INT_1,NAT_1,NEWTON,POWER,CARD_3,ORDINAL4,RELAT_1,FUNCT_1,PARTFUN1,AFINSQ_1,FINSEQ_1,MEMSTR_0,COMPOS_1,EXTPRO_1,SCM_1,AMI_3,PRE_FF,XXREAL_0,CKB17,CKB20,CKB21;
definitions AFINSQ_1,MEMSTR_0,CKB17,CKB20,CKB21;
theorems NAT_1,INT_1,POWER,NEWTON,SCM_1,PRE_FF,AMI_3,XREAL_1,XXREAL_0,ORDINAL1,COMPOS_1,EXTPRO_1,AFINSQ_1,GRFUNC_1,CARD_1,ENUMSET1,RELAT_1,MEMSTR_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22;
schemes NAT_1;
registrations SETFAM_1,NUMBERS,XREAL_0,INT_1,AMI_3,XBOOLE_0,ORDINAL1,AFINSQ_1,CARD_3,FUNCT_1,RELSET_1,COMPOS_1,SCM_1,PBOOLE,REAL_1,MEMSTR_0;
constructors XXREAL_0,REAL_1,NAT_1,NEWTON,POWER,PRE_FF,SCM_1,AFINSQ_1,ORDINAL4,FINSUB_1,CARD_3,ENUMSET1,PRE_POLY,NAT_D,MEMSTR_0,CKB17,CKB20,CKB21;
requirements REAL,NUMERALS,SUBSET,ARITHM,BOOLE;
begin
reserve F for  total ( NAT ) -defined (the Instructions of ( SCM )) -valued Function;
theorem
(( Fib_Program ) c= F implies (for N being (Element of ( NAT )) holds (for k,Fk,Fk1 being (Element of ( NAT )) holds (for s being 3 -started (State-consisting of ( 0 ),( ( ( <* 1 *> ^ <* N *> ) ^ <* Fk *> ) ^ <* Fk1 *> )) holds (((N > ( 0 ) & Fk = ( Fib k )) & Fk1 = ( Fib ( k + 1 ) )) implies ((F halts_on s & ( LifeSpan (F,s) ) = ( ( 6 * N ) - 4 )) & (ex m being (Element of ( NAT )) st ((m = ( ( k + N ) - 1 ) & ( ( Result (F,s) ) . ( dl. 2 ) ) = ( Fib m )) & ( ( Result (F,s) ) . ( dl. 3 ) ) = ( Fib ( m + 1 ) )))))))))
proof
assume A1: ( Fib_Program ) c= F;
defpred P[ (Element of ( NAT )) ]
 means
(for k,Fk,Fk1 being (Element of ( NAT )) holds (for s being 3 -started (State-consisting of ( 0 ),( ( ( <* 1 *> ^ <* $1 *> ) ^ <* Fk *> ) ^ <* Fk1 *> )) holds ((($1 > ( 0 ) & Fk = ( Fib k )) & Fk1 = ( Fib ( k + 1 ) )) implies ((F halts_on s & ( LifeSpan (F,s) ) = ( ( 6 * $1 ) - 4 )) & (ex m being (Element of ( NAT )) st ((m = ( ( k + $1 ) - 1 ) & ( ( Result (F,s) ) . ( dl. 2 ) ) = ( Fib m )) & ( ( Result (F,s) ) . ( dl. 3 ) ) = ( Fib ( m + 1 ) )))))));
A2: (for N being (Element of ( NAT )) holds (P[ N ] implies P[ ( N + 1 ) ]))
proof
set C1 = ( dl. ( 0 ) );
set n = ( dl. 1 );
set FP = ( dl. 2 );
set FC = ( dl. 3 );
set AUX = ( dl. 4 );
let N being (Element of ( NAT ));
assume A3: P[ N ];
A4: N >= ( 0 ) by NAT_1:2;
let k being (Element of ( NAT )),Fk being (Element of ( NAT )),Fk1 being (Element of ( NAT ));
let s being 3 -started (State-consisting of ( 0 ),( ( ( <* 1 *> ^ <* ( N + 1 ) *> ) ^ <* Fk *> ) ^ <* Fk1 *> ));
assume that
( N + 1 ) > ( 0 )
and
A5: Fk = ( Fib k )
and
A6: Fk1 = ( Fib ( k + 1 ) );
A7: ( F . 3 ) = ( SubFrom (n,C1) ) by A1,CKB18:1;
set s0 = ( Comput (F,s,( 0 )) );
set s1 = ( Comput (F,s,( ( 0 ) + 1 )) );
A9: ( F . 1 ) = ( halt ( SCM ) ) by A1,CKB18:1;
A10: (( IC s ) = 3 & s = s0) by EXTPRO_1:2,MEMSTR_0:def 9;
then A11: ( IC s1 ) = ( 3 + 1 ) by A7,SCM_1:6
.= 4;
set s2 = ( Comput (F,s,( 1 + 1 )) );
A13: ( F . 4 ) = ( n =0_goto 1 ) by A1,CKB18:1;
( s . FC ) = Fk1 by SCM_1:1;
then ( s1 . FC ) = Fk1 by A7,A10,CKB11:1,SCM_1:6;
then A14: ( s2 . FC ) = Fk1 by A13,A11,SCM_1:10;
A15: ( F . 7 ) = ( AddTo (FC,AUX) ) by A1,CKB18:1;
( s . FP ) = Fk by SCM_1:1;
then ( s1 . FP ) = Fk by A7,A10,CKB10:1,SCM_1:6;
then A16: ( s2 . FP ) = Fk by A13,A11,SCM_1:10;
A17: ( F . 6 ) = ( FP := FC ) by A1,CKB18:1;
A18: ( s . C1 ) = 1 by SCM_1:1;
then ( s1 . C1 ) = 1 by A7,A10,CKB7:1,SCM_1:6;
then A19: ( s2 . C1 ) = 1 by A13,A11,SCM_1:10;
( s . n ) = ( N + 1 ) by SCM_1:1;
then A20: ( s1 . n ) = ( ( N + 1 ) - 1 ) by A7,A18,A10,SCM_1:6
.= N;
then A21: ( s2 . n ) = N by A13,A11,SCM_1:10;
A22: ( F . 5 ) = ( AUX := FP ) by A1,CKB18:1;
A23: ( F . 8 ) = ( SCM-goto 3 ) by A1,CKB18:1;
per cases  by A4,XXREAL_0:1;
suppose A24: N = ( 0 );

then A25: ( F . ( IC s2 ) ) = ( halt ( SCM ) ) by A9,A13,A20,A11,SCM_1:10;
hence F halts_on s by EXTPRO_1:30;
( F . ( IC s1 ) ) <> ( halt ( SCM ) ) by A13,A11,SCM_1:12;
hence ( LifeSpan (F,s) ) = ( ( 6 * ( N + 1 ) ) - 4 ) by A24,A25,EXTPRO_1:32;
take m = k;
thus m = ( ( k + ( N + 1 ) ) - 1 ) by A24;
thus thesis by A5,A6,A16,A14,A25,EXTPRO_1:31;
end;
suppose A26: N > ( 0 );

then A27: ( ( 6 * N ) - 4 ) > ( 0 ) by CKB6:1;
set Fk2 = ( Fib ( ( k + 1 ) + 1 ) );
set s6 = ( Comput (F,s,( 5 + 1 )) );
set s5 = ( Comput (F,s,( 4 + 1 )) );
set s4 = ( Comput (F,s,( 3 + 1 )) );
set s3 = ( Comput (F,s,( 2 + 1 )) );
A28: ( IC s2 ) = ( 4 + 1 ) by A13,A20,A11,A26,SCM_1:10;
then A29: ( IC s3 ) = ( 5 + 1 ) by A22,SCM_1:4;
then A30: ( IC s4 ) = ( 6 + 1 ) by A17,SCM_1:4;
then A31: ( IC s5 ) = ( 7 + 1 ) by A15,SCM_1:5;
A32: ( s3 . FC ) = ( Fib ( k + 1 ) ) by A6,A22,A14,A28,CKB16:1,SCM_1:4;
then A33: ( s4 . FC ) = ( Fib ( k + 1 ) ) by A17,A29,CKB12:1,SCM_1:4;
( s4 . FP ) = ( Fib ( k + 1 ) ) by A17,A29,A32,SCM_1:4;
then ( s5 . FP ) = ( Fib ( k + 1 ) ) by A15,A30,CKB12:1,SCM_1:5;
then A34: ( s6 . FP ) = ( Fib ( k + 1 ) ) by A23,A31,SCM_1:9;
( s3 . C1 ) = 1 by A22,A19,A28,CKB13:1,SCM_1:4;
then ( s4 . C1 ) = 1 by A17,A29,CKB8:1,SCM_1:4;
then ( s5 . C1 ) = 1 by A15,A30,CKB9:1,SCM_1:5;
then A35: ( s6 . C1 ) = 1 by A23,A31,SCM_1:9;
( s3 . AUX ) = ( Fib k ) by A5,A22,A16,A28,SCM_1:4;
then A36: ( s4 . AUX ) = ( Fib k ) by A17,A29,CKB15:1,SCM_1:4;
( s5 . FC ) = ( ( s4 . AUX ) + ( s4 . FC ) ) by A15,A30,SCM_1:5
.= ( Fib ( ( k + 1 ) + 1 ) ) by A33,A36,PRE_FF:1;
then A37: ( s6 . FC ) = ( Fib ( ( k + 1 ) + 1 ) ) by A23,A31,SCM_1:9;
( s3 . n ) = N by A22,A21,A28,CKB14:1,SCM_1:4;
then ( s4 . n ) = N by A17,A29,CKB10:1,SCM_1:4;
then ( s5 . n ) = N by A15,A30,CKB11:1,SCM_1:5;
then A38: ( s6 . n ) = N by A23,A31,SCM_1:9;
( IC s6 ) = 3 by A23,A31,SCM_1:9;
then A39: s6 is 3 -started 3 -started (State-consisting of ( 0 ),( ( ( <* 1 *> ^ <* N *> ) ^ <* Fk1 *> ) ^ <* Fk2 *> )) by A6,A35,A38,A34,A37,MEMSTR_0:def 9,SCM_1:13;
then consider m being (Element of ( NAT )) such that A40: m = ( ( ( k + 1 ) + N ) - 1 ) and ( ( Result (F,s6) ) . ( dl. 2 ) ) = ( Fib m ) and ( ( Result (F,s6) ) . ( dl. 3 ) ) = ( Fib ( m + 1 ) ) by A3,A6,A26;
A41: F halts_on s6 by A3,A6,A26,A39;
hence F halts_on s by EXTPRO_1:22;
( LifeSpan (F,s6) ) = ( ( 6 * N ) - 4 ) by A3,A6,A26,A39;
hence ( LifeSpan (F,s) ) = ( 6 + ( ( 6 * N ) - 4 ) ) by A41,A27,EXTPRO_1:34
.= ( ( 6 * ( N + 1 ) ) - 4 );
take m;
thus m = ( ( k + ( N + 1 ) ) - 1 ) by A40;
(ex m being (Element of ( NAT )) st ((m = ( ( ( k + 1 ) + N ) - 1 ) & ( ( Result (F,s6) ) . ( dl. 2 ) ) = ( Fib m )) & ( ( Result (F,s6) ) . ( dl. 3 ) ) = ( Fib ( m + 1 ) ))) by A3,A6,A26,A39;
hence thesis by A40,A41,EXTPRO_1:35;
end;
end;
A42: P[ ( 0 ) ];
thus (for N being (Element of ( NAT )) holds P[ N ]) from NAT_1:sch 1(A42,A2);
end;
