environ
vocabularies XBOOLE_0,ORDERS_2,OSALG_1,PBOOLE,STRUCT_0,SUBSET_1,XXREAL_0,RELAT_1,FUNCT_1,TARSKI,FINSEQ_1,CARD_3,MEMBER_1,MSUALG_3,MSUALG_1,GROUP_6,MARGREL1,NAT_1,PARTFUN1,SEQM_3,OSALG_2,MSUALG_2,UNIALG_2,OSALG_3;
notations TARSKI,XBOOLE_0,SUBSET_1,NAT_1,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FINSEQ_1,FINSEQ_2,CARD_3,ORDERS_2,PBOOLE,STRUCT_0,MSUALG_1,MSUALG_2,OSALG_1,OSALG_2,MSUALG_3,CKB1,CKB10,CKB13,CKB14;
definitions TARSKI,OSALG_1,CKB1,CKB10;
theorems XBOOLE_1,FUNCT_1,FUNCT_2,FINSEQ_1,PBOOLE,CARD_3,MSUALG_1,ZFMISC_1,MSUALG_9,FINSEQ_3,MSUALG_2,TARSKI,RELAT_1,OSALG_1,OSALG_2,MSUALG_3,MSAFREE3,ORDINAL1,PARTFUN1,FINSEQ_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB15,CKB16,CKB17,CKB18,CKB19,CKB22;
registrations XBOOLE_0,FUNCT_1,RELSET_1,FUNCOP_1,FINSEQ_1,PBOOLE,STRUCT_0,MSUALG_1,MSUALG_3,ORDERS_3,MSUALG_9,OSALG_1,CKB6,CKB20,CKB21;
constructors MSUALG_3,ORDERS_3,OSALG_2,CARD_3,RELSET_1,CKB1,CKB10,CKB13,CKB14;
requirements BOOLE,SUBSET;
begin
reserve S1 for OrderSortedSign;
theorem
(for U1,U2 being  non-empty (OSAlgebra of S1) holds (for F being (ManySortedFunction of U1,U2) holds ((F is_homomorphism U1,U2 & F is  order-sorted) implies (ex F1 being (ManySortedFunction of U1,( Image F )) st (ex F2 being (ManySortedFunction of ( Image F ),U2) st ((((F1 is_epimorphism U1,( Image F ) & F2 is_monomorphism ( Image F ),U2) & F = ( F2 ** F1 )) & F1 is  order-sorted) & F2 is  order-sorted))))))
proof
let U1 being  non-empty (OSAlgebra of S1),U2 being  non-empty (OSAlgebra of S1);
let F being (ManySortedFunction of U1,U2);
assume that
A1: F is_homomorphism U1,U2
and
A2: F is  order-sorted;
(for H being (ManySortedFunction of ( Image F ),( Image F )) holds H is (ManySortedFunction of ( Image F ),U2))
proof
let H being (ManySortedFunction of ( Image F ),( Image F ));
(for i being set holds (i in (the carrier of S1) implies ( H . i ) is (Function of ( (the Sorts of ( Image F )) . i ),( (the Sorts of U2) . i ))))
proof
let i being set;
assume A3: i in (the carrier of S1);
then reconsider f = ( F . i ) as (Function of ( (the Sorts of U1) . i ),( (the Sorts of U2) . i )) by PBOOLE:def 15;
reconsider h = ( H . i ) as (Function of ( (the Sorts of ( Image F )) . i ),( (the Sorts of ( Image F )) . i )) by A3,PBOOLE:def 15;
A4: ( dom f ) = ( (the Sorts of U1) . i ) by A3,FUNCT_2:def 1;
(the Sorts of ( Image F )) = ( F .:.: (the Sorts of U1) ) by A1,MSUALG_3:def 12;
then ( (the Sorts of ( Image F )) . i ) = ( f .: ( (the Sorts of U1) . i ) ) by A3,PBOOLE:def 20
.= ( rng f ) by A4,RELAT_1:113;
then h is (Function of ( (the Sorts of ( Image F )) . i ),( (the Sorts of U2) . i )) by FUNCT_2:7;
hence thesis;
end;
hence thesis by PBOOLE:def 15;
end;
then reconsider F2 = ( id (the Sorts of ( Image F )) ) as (ManySortedFunction of ( Image F ),U2);
consider F1 being (ManySortedFunction of U1,( Image F )) such that A5: (F1 = F & F1 is  order-sorted) and A6: F1 is_epimorphism U1,( Image F ) by A1,A2,CKB22:1;
take F1;
take F2;
thus F1 is_epimorphism U1,( Image F ) by A6;
thus F2 is_monomorphism ( Image F ),U2 by MSUALG_3:22;
thus (F = ( F2 ** F1 ) & F1 is  order-sorted) by A5,MSUALG_3:4;
( Image F ) is  order-sorted by A1,A2,CKB16:1;
then (the Sorts of ( Image F )) is (OrderSortedSet of S1) by OSALG_1:17;
hence thesis;
end;
