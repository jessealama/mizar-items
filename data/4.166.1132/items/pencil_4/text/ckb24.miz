environ
vocabularies NUMBERS,NAT_1,ARYTM_3,XXREAL_0,ARYTM_1,FINSET_1,CARD_1,SUBSET_1,TARSKI,XBOOLE_0,VECTSP_1,RLSUB_1,STRUCT_0,SUPINF_2,RLSUB_2,RLVECT_5,SETFAM_1,ZFMISC_1,RLVECT_3,RELAT_1,PRE_TOPC,PENCIL_1,PENCIL_4;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,CARD_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,NAT_D,SETFAM_1,DOMAIN_1,STRUCT_0,FINSET_1,PRE_TOPC,PENCIL_1,RLVECT_1,VECTSP_1,VECTSP_4,VECTSP_5,VECTSP_7,MATRLIN,VECTSP_9,CKB7,CKB9,CKB11,CKB14,CKB22;
definitions TARSKI,XBOOLE_0,STRUCT_0,PENCIL_1,VECTSP_4,RLVECT_1,CKB7,CKB9,CKB11,CKB14,CKB22;
theorems XBOOLE_0,ZFMISC_1,NAT_1,TARSKI,PENCIL_1,CARD_1,XBOOLE_1,CARD_2,STRUCT_0,SUBSET_1,VECTSP_5,VECTSP_9,VECTSP_4,RLVECT_1,VECTSP_7,VECTSP10,VECTSP_1,EULER_1,XREAL_1,XXREAL_0,ORDINAL1,NAT_D,FINSEQ_4,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23;
schemes NAT_1,XBOOLE_0,SUBSET_1;
registrations SUBSET_1,FINSET_1,XXREAL_0,XREAL_0,REALSET1,STRUCT_0,MATRLIN,VECTSP_9,PENCIL_1,ORDINAL1,CARD_1;
constructors XXREAL_0,REALSET1,VECTSP_5,VECTSP_7,VECTSP_9,PENCIL_1,NAT_D,CKB7,CKB9,CKB11,CKB14,CKB22;
requirements REAL,BOOLE,SUBSET,NUMERALS,ARITHM;
begin
theorem
Th20: (for F being Field holds (for V being  finite-dimensional (VectSp of F) holds (for k being Nat holds (((1 <= k & k < ( dim V )) & 3 <= ( dim V )) implies ( PencilSpace (V,k) ) is non  degenerated))))
proof
let F being Field;
let V being  finite-dimensional (VectSp of F);
let k being Nat;
assume that
A1: 1 <= k
and
A2: k < ( dim V )
and
A3: 3 <= ( dim V );
set S = ( PencilSpace (V,k) );
now
let B being (Block of S);
(the topology of S) is non  empty by A1,A2,CKB15:1;
then consider W1,W2 being (Subspace of V) such that A4: W1 is (Subspace of W2) and A5: ( ( dim W1 ) + 1 ) = k and A6: ( dim W2 ) = ( k + 1 ) and A7: B = ( pencil (W1,W2,k) ) by CKB14:def 1;
A8: (the carrier of W1) c= (the carrier of V) by VECTSP_4:def 2;
per cases  by A2,A3,CKB1:1;
suppose ( k + 1 ) < ( dim V );

then A9: ( (Omega). W2 ) <> ( (Omega). V ) by A6,VECTSP_9:28;
A10:now
assume A11: (the carrier of V) = (the carrier of W2);
( (Omega). W2 ) is (Subspace of V) by CKB5:1;
hence contradiction by A9,A11,VECTSP_4:29;
end;
(the carrier of W2) c= (the carrier of V) by VECTSP_4:def 2;
then (not (the carrier of V) c= (the carrier of W2)) by A10,XBOOLE_0:def 10;
then consider v being set such that A12: v in (the carrier of V) and A13: (not v in (the carrier of W2)) by TARSKI:def 3;
reconsider v as (Vector of V) by A12;
set X = ( W1 + ( Lin { v } ) );
A14:now
v in { v } by TARSKI:def 1;
then v in ( Lin { v } ) by VECTSP_7:8;
then v in X by VECTSP_5:2;
then A15: v in (the carrier of X) by STRUCT_0:def 5;
assume X in B;
then X is (Subspace of W2) by A7,CKB12:1;
then (the carrier of X) c= (the carrier of W2) by VECTSP_4:def 2;
hence contradiction by A13,A15;
end;
(not v in W2) by A13,STRUCT_0:def 5;
then ( dim X ) = k by A4,A5,CKB18:1,VECTSP_4:8;
hence (the carrier of S) <> B by A14,VECTSP_9:def 2;
end;
suppose A16: (2 <= k & ( k + 1 ) >= ( dim V ));

set I = the (Basis of W1);
reconsider I1 = I as  finite (Subset of W1) by VECTSP_9:20;
( 2 - 1 ) <= ( ( ( dim W1 ) + 1 ) - 1 ) by A5,A16,XREAL_1:9;
then 1 <= ( card I1 ) by VECTSP_9:def 1;
then I1 is non  empty;
then consider i being set such that A17: i in I by XBOOLE_0:def 1;
reconsider i as (Vector of W1) by A17;
reconsider J = ( I1 \ { i } ) as  finite (Subset of V) by A8,XBOOLE_1:1;
I is  linearly-independent by VECTSP_7:def 3;
then ( I \ { i } ) is  linearly-independent by VECTSP_7:1,XBOOLE_1:36;
then reconsider JJ = ( I \ { i } ) as  linearly-independent (Subset of V) by VECTSP_9:11;
J c= (the carrier of ( Lin J ))
proof
let a being set;
assume a in J;
then a in ( Lin J ) by VECTSP_7:8;
hence thesis by STRUCT_0:def 5;
end;
then reconsider JJJ = JJ as  linearly-independent (Subset of ( Lin J )) by VECTSP_9:12;
( Lin JJJ ) = ( Lin J ) by VECTSP_9:17;
then A18: J is (Basis of ( Lin J )) by VECTSP_7:def 3;
A19: ( card I ) = ( dim W1 ) by VECTSP_9:def 1;
set T = the (Linear_Compl of W1);
A20: V is_the_direct_sum_of W1,T by VECTSP_5:38;
then A21: ( W1 /\ T ) = ( (0). V ) by VECTSP_5:def 4;
( k + 1 ) <= ( dim V ) by A2,NAT_1:13;
then ( dim V ) = ( k + 1 ) by A16,XXREAL_0:1;
then ( ( k + 1 ) - ( ( dim W1 ) + 1 ) ) = ( ( ( dim W1 ) + ( dim T ) ) - ( ( dim W1 ) + 1 ) ) by A20,VECTSP_9:34;
then consider u,v being (Vector of T) such that A22: u <> v and A23: { u,v } is  linearly-independent and A24: ( (Omega). T ) = ( Lin { u,v } ) by A5,VECTSP_9:31;
A25: v in (the carrier of T);
((the carrier of T) c= (the carrier of V) & u in (the carrier of T)) by VECTSP_4:def 2;
then reconsider u1 = u,v1 = v as (Vector of V) by A25;
reconsider Y = { u,v } as  linearly-independent (Subset of V) by A23,VECTSP_9:11;
A26: Y = { u,v };
( Lin ( I \ { i } ) ) is (Subspace of ( Lin I )) by VECTSP_7:13,XBOOLE_1:36;
then A27: ( Lin J ) is (Subspace of W1) by VECTSP_9:17;
(the carrier of ( ( Lin J ) /\ ( Lin { u1,v1 } ) )) c= (the carrier of ( (0). V ))
proof
let a being set;
assume a in (the carrier of ( ( Lin J ) /\ ( Lin { u1,v1 } ) ));
then A28: a in ( ( Lin J ) /\ ( Lin { u1,v1 } ) ) by STRUCT_0:def 5;
then a in ( Lin { u1,v1 } ) by VECTSP_5:3;
then a in ( Lin { u,v } ) by VECTSP_9:17;
then a in (the carrier of ( the VectSpStr of T )) by A24,STRUCT_0:def 5;
then A29: a in T by STRUCT_0:def 5;
a in ( Lin J ) by A28,VECTSP_5:3;
then a in W1 by A27,VECTSP_4:8;
then a in ( W1 /\ T ) by A29,VECTSP_5:3;
hence thesis by A21,STRUCT_0:def 5;
end;
then A30: (( (0). V ) is (Subspace of ( ( Lin J ) /\ ( Lin { u1,v1 } ) )) & ( ( Lin J ) /\ ( Lin { u1,v1 } ) ) is (Subspace of ( (0). V ))) by VECTSP_4:27,VECTSP_4:39;
( card J ) = ( ( card I1 ) - ( card { i } ) ) by A17,EULER_1:4
.= ( ( dim W1 ) - 1 ) by A19,CARD_1:30;
then ( dim ( Lin J ) ) = ( ( dim W1 ) - 1 ) by A18,VECTSP_9:def 1;
then A31: ( dim ( ( Lin J ) + ( Lin { u1,v1 } ) ) ) = ( ( ( dim W1 ) - 1 ) + 2 ) by A22,A26,A30,CKB19:1,VECTSP_4:25;
A32: ( Lin I ) = ( (Omega). W1 ) by VECTSP_7:def 3;
A33: i in W1 by STRUCT_0:def 5;
now
A34:now
reconsider IV = I as (Subset of V) by A8,XBOOLE_1:1;
assume A35: i in ( ( Lin J ) + ( Lin { u1,v1 } ) );
IV c= (the carrier of ( ( Lin J ) + ( Lin { u1,v1 } ) ))
proof
let a being set;
{ i } c= I by A17,ZFMISC_1:31;
then A36: ( ( I \ { i } ) \/ { i } ) = I by XBOOLE_1:45;
assume A37: a in IV;
per cases  by A37,A36,XBOOLE_0:def 3;
suppose a in J;

then A38: a in ( Lin J ) by VECTSP_7:8;
then a in V by VECTSP_4:9;
then reconsider o = a as (Vector of V) by STRUCT_0:def 5;
o in ( ( Lin J ) + ( Lin { u1,v1 } ) ) by A38,VECTSP_5:2;
hence thesis by STRUCT_0:def 5;
end;
suppose a in { i };

then a = i by TARSKI:def 1;
hence thesis by A35,STRUCT_0:def 5;
end;
end;
then ( Lin IV ) is (Subspace of ( ( Lin J ) + ( Lin { u1,v1 } ) )) by VECTSP_9:16;
then ( Lin I ) is (Subspace of ( ( Lin J ) + ( Lin { u1,v1 } ) )) by VECTSP_9:17;
then A39: W1 is (Subspace of ( ( Lin J ) + ( Lin { u1,v1 } ) )) by A32,CKB6:1;
(the carrier of ( W1 /\ ( Lin { u1,v1 } ) )) c= (the carrier of ( (0). V ))
proof
let a being set;
assume a in (the carrier of ( W1 /\ ( Lin { u1,v1 } ) ));
then A40: a in ( W1 /\ ( Lin { u1,v1 } ) ) by STRUCT_0:def 5;
then a in ( Lin { u1,v1 } ) by VECTSP_5:3;
then a in ( Lin { u,v } ) by VECTSP_9:17;
then a in (the carrier of ( the VectSpStr of T )) by A24,STRUCT_0:def 5;
then A41: a in T by STRUCT_0:def 5;
a in W1 by A40,VECTSP_5:3;
then a in ( W1 /\ T ) by A41,VECTSP_5:3;
hence thesis by A21,STRUCT_0:def 5;
end;
then (( (0). V ) is (Subspace of ( W1 /\ ( Lin { u1,v1 } ) )) & ( W1 /\ ( Lin { u1,v1 } ) ) is (Subspace of ( (0). V ))) by VECTSP_4:27,VECTSP_4:39;
then A42: ( dim ( W1 + ( Lin { u1,v1 } ) ) ) = ( ( dim W1 ) + 2 ) by A22,A26,CKB19:1,VECTSP_4:25;
( Lin { u1,v1 } ) is (Subspace of ( ( Lin J ) + ( Lin { u1,v1 } ) )) by VECTSP_5:7;
then ( W1 + ( Lin { u1,v1 } ) ) is (Subspace of ( ( Lin J ) + ( Lin { u1,v1 } ) )) by A39,VECTSP_5:34;
then ( ( ( dim W1 ) + 1 ) + 1 ) <= ( ( dim W1 ) + 1 ) by A31,A42,VECTSP_9:25;
hence contradiction by NAT_1:13;
end;
assume ( ( Lin J ) + ( Lin { u1,v1 } ) ) in B;
then W1 is (Subspace of ( ( Lin J ) + ( Lin { u1,v1 } ) )) by A7,CKB12:1;
hence contradiction by A33,A34,VECTSP_4:8;
end;
hence (the carrier of S) <> B by A5,A31,VECTSP_9:def 2;
end;
end;
then (not (the carrier of S) is (Block of S));
hence S is non  degenerated by PENCIL_1:def 5;
end;
