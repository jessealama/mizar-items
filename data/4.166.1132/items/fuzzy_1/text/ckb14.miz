environ
vocabularies NUMBERS,XBOOLE_0,SUBSET_1,FUNCT_3,XXREAL_1,CARD_1,RELAT_1,TARSKI,FUNCT_1,VALUED_0,LATTICE3,XXREAL_0,PARTFUN1,INTEGRA1,SEQ_4,ARYTM_1,ARYTM_3,COMPLEX1,FUZZY_1,MEASURE5;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XXREAL_0,SQUARE_1,COMPLEX1,REAL_1,RELAT_1,RELSET_1,FUNCT_1,PARTFUN1,FUNCT_2,VALUED_0,SEQ_1,SEQ_4,RFUNCT_1,MEASURE5,INTEGRA1,RCOMP_1,CKB3,CKB6,CKB7,CKB8,CKB13;
definitions RELAT_1,CKB6,CKB8,CKB13;
theorems TARSKI,FUNCT_1,FUNCT_3,ABSVALUE,PARTFUN1,ZFMISC_1,INTEGRA1,INTEGRA2,XBOOLE_0,XBOOLE_1,COMPLEX1,XREAL_1,XXREAL_0,XXREAL_1,FUNCT_2,RELAT_1,MEASURE5,CKB4,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13;
schemes SEQ_1,PARTFUN1;
registrations RELSET_1,NUMBERS,XXREAL_0,MEMBERED,INTEGRA1,XBOOLE_0,VALUED_0,RFUNCT_1,FUNCT_2,MEASURE5,CKB1,CKB2,CKB5;
constructors REAL_1,SQUARE_1,COMPLEX1,RFUNCT_1,INTEGRA1,SEQ_1,SEQ_4,RELSET_1,CKB6,CKB8,CKB13;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve y for set;
reserve y1 for set;
reserve y2 for set;
definition
let C being non empty set;
let h being (Membership_Func of C);
let g being (Membership_Func of C);
func max (h,g) -> (Membership_Func of C)
means
:Def5: (for c being (Element of C) holds ( it . c ) = ( max (( h . c ),( g . c )) ));
existence
proof
defpred P[ set,set ]
 means
$2 = ( max (( h . $1 ),( g . $1 )) );
A1: (for x holds (for y1 holds (for y2 holds (((x in C & P[ x,y1 ]) & P[ x,y2 ]) implies y1 = y2))));
A2: (for x holds (for y holds ((x in C & P[ x,y ]) implies y in ( REAL ))));
consider IT being (PartFunc of C,( REAL )) such that A3: ((for x holds (x in ( dom IT ) iff (x in C & (ex y st P[ x,y ])))) & (for x holds (x in ( dom IT ) implies P[ x,( IT . x ) ]))) from PARTFUN1:sch 2(A2,A1);
(for x being set holds (x in C implies x in ( dom IT )))
proof
let x being set;
A4: (ex y st y = ( max (( h . x ),( g . x )) ));
assume x in C;
hence thesis by A3,A4;
end;
then C c= ( dom IT ) by TARSKI:def 3;
then A5: ( dom IT ) = C by XBOOLE_0:def 10;
then A6: (for c being (Element of C) holds ( IT . c ) = ( max (( h . c ),( g . c )) )) by A3;
A7: ( rng h ) c= [. ( 0 ),1 .] by RELAT_1:def 19;
A8: ( rng g ) c= [. ( 0 ),1 .] by RELAT_1:def 19;
(for y being set holds (y in ( rng IT ) implies y in [. ( 0 ),1 .]))
proof
reconsider A = [. ( 0 ),1 .] as non empty  closed_interval (Subset of ( REAL )) by MEASURE5:14;
let y being set;
assume y in ( rng IT );
then consider x being (Element of C) such that A9: x in ( dom IT ) and A10: y = ( IT . x ) by PARTFUN1:3;
A11: A = [. ( lower_bound A ),( upper_bound A ) .] by INTEGRA1:4;
then A12: ( 0 ) = ( lower_bound A ) by INTEGRA1:5;
A13: x in C;
then x in ( dom h ) by FUNCT_2:def 1;
then A14: ( h . x ) in ( rng h ) by FUNCT_1:def 3;
then ( 0 ) <= ( h . x ) by A7,A12,INTEGRA2:1;
then ( 0 ) <= ( max (( h . x ),( g . x )) ) by XXREAL_0:30;
then A15: ( 0 ) <= ( IT . x ) by A3,A9;
A16: 1 = ( upper_bound A ) by A11,INTEGRA1:5;
x in ( dom g ) by A13,FUNCT_2:def 1;
then ( g . x ) in ( rng g ) by FUNCT_1:def 3;
then A17: ( g . x ) <= 1 by A8,A16,INTEGRA2:1;
( h . x ) <= 1 by A7,A16,A14,INTEGRA2:1;
then ( max (( h . x ),( g . x )) ) <= 1 by A17,XXREAL_0:28;
then ( IT . x ) <= 1 by A3,A9;
hence thesis by A10,A12,A16,A15,INTEGRA2:1;
end;
then A18: ( rng IT ) c= [. ( 0 ),1 .] by TARSKI:def 3;
IT is  total by A5,PARTFUN1:def 2;
then IT is (Membership_Func of C) by A18,RELAT_1:def 19;
hence thesis by A6;
end;
uniqueness
proof
let F being (Membership_Func of C),G being (Membership_Func of C);
assume that
A19: (for c being (Element of C) holds ( F . c ) = ( max (( h . c ),( g . c )) ))
and
A20: (for c being (Element of C) holds ( G . c ) = ( max (( h . c ),( g . c )) ));
A21: (for c being (Element of C) holds (c in C implies ( F . c ) = ( G . c )))
proof
let c being (Element of C);
( F . c ) = ( max (( h . c ),( g . c )) ) by A19;
hence thesis by A20;
end;
(C = ( dom F ) & C = ( dom G )) by FUNCT_2:def 1;
hence thesis by A21,PARTFUN1:5;
end;
idempotence;
commutativity;
end;
