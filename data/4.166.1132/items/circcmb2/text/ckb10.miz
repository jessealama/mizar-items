environ
vocabularies NAT_1,FUNCT_1,FINSEQ_2,MARGREL1,CIRCCOMB,LATTICES,FINSET_1,XBOOLE_0,MSUALG_1,FSM_1,CIRCUIT1,RELAT_1,CIRCUIT2,STRUCT_0,MSAFREE2,GLIB_000,ARYTM_3,CARD_1,XXREAL_0,PBOOLE,NUMBERS,MCART_1,FUNCT_4,PARTFUN1,FACIRC_1,TARSKI;
notations TARSKI,XBOOLE_0,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,MCART_1,FINSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_2,FUNCT_4,PBOOLE,MARGREL1,STRUCT_0,MSUALG_1,MSAFREE2,CIRCUIT1,CIRCUIT2,CIRCCOMB,FACIRC_1;
definitions CIRCUIT2,MSAFREE2;
theorems TARSKI,FUNCT_1,RELAT_1,ZFMISC_1,NAT_1,MCART_1,PBOOLE,CIRCCOMB,FACIRC_1,FUNCT_4,FRECHET,CIRCUIT1,CIRCUIT2,XBOOLE_0,XBOOLE_1,XXREAL_0,ORDINAL1,CKB2,CKB3,CKB4,CKB5;
schemes NAT_1,PBOOLE,CKB6,CKB7,CKB8,CKB9;
registrations RELAT_1,FUNCT_1,ORDINAL1,XREAL_0,CARD_3,STRUCT_0,CIRCCOMB,FACIRC_1,NAT_1,MARGREL1,CKB1;
constructors LIMFUNC1,CIRCUIT1,CIRCUIT2,FACIRC_1,NAT_1,RELSET_1,MARGREL1,DOMAIN_1,ENUMSET1,BINOP_1;
requirements NUMERALS,SUBSET,BOOLE,ARITHM;
begin
defpred Pl[ set,set,set ]
 means
(not contradiction);
scheme CIRCCMB29sch5 { S0() -> non  empty ManySortedSign,o0() -> set,S(set,set,set) -> non  empty ManySortedSign,o(set,set) -> set,n() -> Nat } : (for S1,S2 being non  empty ManySortedSign holds (((ex f,h being (ManySortedSet of ( NAT )) st (((S1 = ( f . n() ) & ( f . ( 0 ) ) = S0()) & ( h . ( 0 ) ) = o0()) & (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds ((S = ( f . n ) & x = ( h . n )) implies (( f . ( n + 1 ) ) = S(S,x,n) & ( h . ( n + 1 ) ) = o(x,n)))))))) & (ex f,h being (ManySortedSet of ( NAT )) st (((S2 = ( f . n() ) & ( f . ( 0 ) ) = S0()) & ( h . ( 0 ) ) = o0()) & (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds ((S = ( f . n ) & x = ( h . n )) implies (( f . ( n + 1 ) ) = S(S,x,n) & ( h . ( n + 1 ) ) = o(x,n))))))))) implies S1 = S2))
proof
let S1 being non  empty ManySortedSign;
let S2 being non  empty ManySortedSign;
given f1 being (ManySortedSet of ( NAT )),h1 being (ManySortedSet of ( NAT )) such that
A1: S1 = ( f1 . n() )
and
A2: ( f1 . ( 0 ) ) = S0()
and
A3: ( h1 . ( 0 ) ) = o0()
and
A4: (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds ((S = ( f1 . n ) & x = ( h1 . n )) implies (( f1 . ( n + 1 ) ) = S(S,x,n) & ( h1 . ( n + 1 ) ) = o(x,n))))));

A5: (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds ((S = ( f1 . n ) & x = ( h1 . n )) implies (( f1 . ( n + 1 ) ) = S(S,x,n) & ( h1 . ( n + 1 ) ) = o(x,n)))))) by A4;
A6: (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds (((S = ( f1 . n ) & x = ( h1 . n )) & Pl[ S,x,n ]) implies Pl[ S(S,x,n),o(x,n),( n + 1 ) ]))));
A7: (ex S being non  empty ManySortedSign st (ex x being set st ((S = ( f1 . ( 0 ) ) & x = ( h1 . ( 0 ) )) & Pl[ S,x,( 0 ) ]))) by A2;
A8: (for n being Nat holds (ex S being non  empty ManySortedSign st (S = ( f1 . n ) & Pl[ S,( h1 . n ),n ]))) from CKB7:sch 1(A7,A5,A6);
given f2 being (ManySortedSet of ( NAT )),h2 being (ManySortedSet of ( NAT )) such that
A9: S2 = ( f2 . n() )
and
A10: ( f2 . ( 0 ) ) = S0()
and
A11: ( h2 . ( 0 ) ) = o0()
and
A12: (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds ((S = ( f2 . n ) & x = ( h2 . n )) implies (( f2 . ( n + 1 ) ) = S(S,x,n) & ( h2 . ( n + 1 ) ) = o(x,n))))));

A13: (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds ((S = ( f2 . n ) & x = ( h2 . n )) implies (( f2 . ( n + 1 ) ) = S(S,x,n) & ( h2 . ( n + 1 ) ) = o(x,n)))))) by A12;
defpred A[ Nat ]
 means
( h1 . $1 ) = ( h2 . $1 );
A14: (for n being Nat holds (for S being non  empty ManySortedSign holds (for x being set holds (((S = ( f2 . n ) & x = ( h2 . n )) & Pl[ S,x,n ]) implies Pl[ S(S,x,n),o(x,n),( n + 1 ) ]))));
A15: (ex S being non  empty ManySortedSign st (ex x being set st ((S = ( f2 . ( 0 ) ) & x = ( h2 . ( 0 ) )) & Pl[ S,x,( 0 ) ]))) by A10;
A16: (for n being Nat holds (ex S being non  empty ManySortedSign st (S = ( f2 . n ) & Pl[ S,( h2 . n ),n ]))) from CKB7:sch 1(A15,A13,A14);
A17:now
let n being Nat;
assume A18: A[ n ];
(ex S being non  empty ManySortedSign st (S = ( f1 . n ) & Pl[ S,( h1 . n ),n ])) by A8;
then A19: ( h1 . ( n + 1 ) ) = o(( h1 . n ),n) by A4;
(ex S being non  empty ManySortedSign st (S = ( f2 . n ) & Pl[ S,( h2 . n ),n ])) by A16;
hence A[ ( n + 1 ) ] by A12,A18,A19;
end;
defpred B[ Nat ]
 means
( f1 . $1 ) = ( f2 . $1 );
A20: A[ ( 0 ) ] by A3,A11;
(for i being Nat holds A[ i ]) from NAT_1:sch 2(A20,A17);
then (for i being set holds (i in ( NAT ) implies ( h1 . i ) = ( h2 . i )));
then A21: h1 = h2 by PBOOLE:3;
A22:now
let n being Nat;
assume A23: B[ n ];
consider S being non  empty ManySortedSign such that A24: S = ( f1 . n ) and Pl[ S,( h1 . n ),n ] by A8;
( f1 . ( n + 1 ) ) = S(S,( h1 . n ),n) by A4,A24
.= ( f2 . ( n + 1 ) ) by A12,A21,A23,A24;
hence B[ ( n + 1 ) ];
end;
A25: B[ ( 0 ) ] by A2,A10;
(for i being Nat holds B[ i ]) from NAT_1:sch 2(A25,A22);
hence thesis by A1,A9;
end;
