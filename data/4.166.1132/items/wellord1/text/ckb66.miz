environ
vocabularies RELAT_1,RELAT_2,XBOOLE_0,SUBSET_1,TARSKI,FUNCT_1,ZFMISC_1,WELLORD1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,RELAT_2,FUNCT_1,CKB5,CKB8,CKB9,CKB11,CKB12,CKB19,CKB47,CKB49,CKB59;
definitions TARSKI,XBOOLE_0,FUNCT_1,RELAT_1,CKB5,CKB8,CKB9,CKB11,CKB12,CKB19,CKB47,CKB49,CKB59;
theorems TARSKI,XBOOLE_0,FUNCT_1,RELAT_1,RELAT_2,ZFMISC_1,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65;
schemes XBOOLE_0,FUNCT_1;
registrations FUNCT_1,RELAT_1;
constructors TARSKI,SUBSET_1,FUNCT_1,RELAT_2,CKB5,CKB8,CKB9,CKB11,CKB12,CKB19,CKB47,CKB49,CKB59;
requirements SUBSET,BOOLE;
begin
reserve a for set;
reserve b for set;
reserve c for set;
reserve d for set;
reserve x for set;
reserve Z for set;
reserve R for Relation;
reserve S for Relation;
reserve F for Function;
theorem
Th63: ((R is  well-ordering & S is  well-ordering) implies ((R,S are_isomorphic  or (ex a st (a in ( field R ) & ( R |_2 ( R -Seg a ) ),S are_isomorphic ))) or (ex a st (a in ( field S ) & R,( S |_2 ( S -Seg a ) ) are_isomorphic ))))
proof
assume that
A1: R is  well-ordering
and
A2: S is  well-ordering;
A3: S is  antisymmetric by A2,CKB11:def 1;
A4: R is  reflexive by A1,CKB11:def 1;
A5: R is  connected by A1,CKB11:def 1;
defpred P[ set ]
 means
(ex b st (b in ( field S ) & ( R |_2 ( R -Seg $1 ) ),( S |_2 ( S -Seg b ) ) are_isomorphic ));
consider Z such that A6: (a in Z iff (a in ( field R ) & P[ a ])) from XBOOLE_0:sch 1;
A7: Z c= ( field R )
proof
let x;
thus thesis by A6;
end;
defpred P[ set,set ]
 means
($2 in ( field S ) & ( R |_2 ( R -Seg $1 ) ),( S |_2 ( S -Seg $2 ) ) are_isomorphic );
A8: (for a holds (for b holds (for c holds ((P[ a,b ] & P[ a,c ]) implies b = c))))
proof
let a;
let b;
let c;
assume that
A9: b in ( field S )
and
A10: ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg b ) ) are_isomorphic 
and
A11: (c in ( field S ) & ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg c ) ) are_isomorphic );
( S |_2 ( S -Seg b ) ),( R |_2 ( R -Seg a ) ) are_isomorphic  by A10,CKB53:1;
hence thesis by A2,A9,A11,CKB55:1,CKB61:1;
end;
consider F such that A12: ([ a,b ] in F iff (a in ( field R ) & P[ a,b ])) from FUNCT_1:sch 1(A8);
A13: Z = ( dom F )
proof
thus (a in Z implies a in ( dom F ))
proof
assume A14: a in Z;
then consider b such that A15: (b in ( field S ) & ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg b ) ) are_isomorphic ) by A6;
a in ( field R ) by A6,A14;
then [ a,b ] in F by A12,A15;
hence thesis by RELAT_1:def 4;
end;

let a;
assume a in ( dom F );
then consider b such that A16: [ a,b ] in F by RELAT_1:def 4;
A17: ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg b ) ) are_isomorphic  by A12,A16;
(a in ( field R ) & b in ( field S )) by A12,A16;
hence thesis by A6,A17;
end;
A18: ( rng F ) c= ( field S )
proof
let a;
assume a in ( rng F );
then consider b such that A19: (b in ( dom F ) & a = ( F . b )) by FUNCT_1:def 3;
[ b,a ] in F by A19,FUNCT_1:1;
hence thesis by A12;
end;
A20: S is  reflexive by A2,CKB11:def 1;
A21: F is_isomorphism_of ( R |_2 ( dom F ) ),( S |_2 ( rng F ) )
proof
thus (( dom F ) = ( field ( R |_2 ( dom F ) ) ) & ( rng F ) = ( field ( S |_2 ( rng F ) ) )) by A1,A2,A7,A18,A13,CKB42:1;
thus A22: F is  one-to-one
proof
let a;
let b;
assume that
A23: a in ( dom F )
and
A24: b in ( dom F )
and
A25: ( F . a ) = ( F . b );
A26: [ b,( F . b ) ] in F by A24,FUNCT_1:1;
then ( R |_2 ( R -Seg b ) ),( S |_2 ( S -Seg ( F . a ) ) ) are_isomorphic  by A12,A25;
then A27: ( S |_2 ( S -Seg ( F . a ) ) ),( R |_2 ( R -Seg b ) ) are_isomorphic  by CKB53:1;
[ a,( F . a ) ] in F by A23,FUNCT_1:1;
then A28: (a in ( field R ) & ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg ( F . a ) ) ) are_isomorphic ) by A12;
b in ( field R ) by A12,A26;
hence thesis by A1,A28,A27,CKB55:1,CKB61:1;
end;

let a;
let b;
set P = ( R |_2 ( R -Seg a ) );
A29: (( field P ) = ( R -Seg a ) & P is  well-ordering) by A1,CKB36:1,CKB43:1;
thus ([ a,b ] in ( R |_2 ( dom F ) ) implies ((a in ( field ( R |_2 ( dom F ) ) ) & b in ( field ( R |_2 ( dom F ) ) )) & [ ( F . a ),( F . b ) ] in ( S |_2 ( rng F ) )))
proof
assume A30: [ a,b ] in ( R |_2 ( dom F ) );
hence A31: (a in ( field ( R |_2 ( dom F ) ) ) & b in ( field ( R |_2 ( dom F ) ) )) by RELAT_1:15;
then A32: a in ( dom F ) by CKB23:1;
then A33: [ a,( F . a ) ] in F by FUNCT_1:1;
then A34: ( F . a ) in ( field S ) by A12;
A35: b in ( dom F ) by A31,CKB23:1;
then A36: [ b,( F . b ) ] in F by FUNCT_1:1;
then A37: b in ( field R ) by A12;
A38: (( F . b ) in ( field S ) & ( R |_2 ( R -Seg b ) ),( S |_2 ( S -Seg ( F . b ) ) ) are_isomorphic ) by A12,A36;
A39: [ a,b ] in R by A30,XBOOLE_0:def 4;
A40: ( F . b ) in ( rng F ) by A35,FUNCT_1:def 3;
( F . a ) in ( rng F ) by A32,FUNCT_1:def 3;
then A41: [ ( F . a ),( F . b ) ] in [: ( rng F ),( rng F ) :] by A40,ZFMISC_1:87;
a in ( field R ) by A12,A33;
then A42: ( R -Seg a ) c= ( R -Seg b ) by A1,A37,A39,CKB40:1;
A43: ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg ( F . a ) ) ) are_isomorphic  by A12,A33;
A44:now
set P = ( R |_2 ( R -Seg b ) );
A45: (( field P ) = ( R -Seg b ) & P is  well-ordering) by A1,CKB36:1,CKB43:1;
assume a <> b;
then A46: a in ( R -Seg b ) by A39,CKB6:1;
then ( P -Seg a ) = ( R -Seg a ) by A1,CKB38:1;
then ( P |_2 ( P -Seg a ) ),( S |_2 ( S -Seg ( F . a ) ) ) are_isomorphic  by A43,A42,CKB33:1;
then [ ( F . a ),( F . b ) ] in S by A2,A34,A38,A46,A45,CKB65:1;
hence thesis by A41,XBOOLE_0:def 4;
end;
(a = b implies thesis)
proof
assume a = b;
then [ ( F . a ),( F . b ) ] in S by A20,A34,CKB1:1;
hence thesis by A41,XBOOLE_0:def 4;
end;
hence thesis by A44;
end;

assume that
A47: a in ( field ( R |_2 ( dom F ) ) )
and
A48: b in ( field ( R |_2 ( dom F ) ) )
and
A49: [ ( F . a ),( F . b ) ] in ( S |_2 ( rng F ) );
A50: [ ( F . a ),( F . b ) ] in S by A49,XBOOLE_0:def 4;
A51: a in ( dom F ) by A47,CKB23:1;
then A52: [ a,( F . a ) ] in F by FUNCT_1:1;
then A53: a in ( field R ) by A12;
assume (not [ a,b ] in ( R |_2 ( dom F ) ));
then A54: ((not [ a,b ] in R) or (not [ a,b ] in [: ( dom F ),( dom F ) :])) by XBOOLE_0:def 4;
then A55: a <> b by A4,A51,A53,CKB1:1,ZFMISC_1:87;
A56: b in ( dom F ) by A48,CKB23:1;
then A57: [ b,( F . b ) ] in F by FUNCT_1:1;
then A58: ( R |_2 ( R -Seg b ) ),( S |_2 ( S -Seg ( F . b ) ) ) are_isomorphic  by A12;
A59: b in ( field R ) by A12,A57;
then A60: [ b,a ] in R by A5,A51,A56,A54,A53,A55,CKB4:1,ZFMISC_1:87;
then A61: ( R -Seg b ) c= ( R -Seg a ) by A1,A53,A59,CKB40:1;
A62: b in ( R -Seg a ) by A51,A56,A54,A60,CKB6:1,ZFMISC_1:87;
then ( P -Seg b ) = ( R -Seg b ) by A1,CKB38:1;
then A63: ( P |_2 ( P -Seg b ) ),( S |_2 ( S -Seg ( F . b ) ) ) are_isomorphic  by A58,A61,CKB33:1;
A64: ( F . b ) in ( field S ) by A12,A57;
(( F . a ) in ( field S ) & ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg ( F . a ) ) ) are_isomorphic ) by A12,A52;
then [ ( F . b ),( F . a ) ] in S by A2,A64,A62,A29,A63,CKB65:1;
then ( F . a ) = ( F . b ) by A3,A50,CKB3:1;
hence contradiction by A22,A51,A56,A55,FUNCT_1:def 4;
end;
A65:now
given a such that
A66: a in ( field R )
and
A67: Z = ( R -Seg a );

given b such that
A68: b in ( field S )
and
A69: ( rng F ) = ( S -Seg b );

( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg b ) ) are_isomorphic  by A13,A21,A67,A69,CKB49:def 1;
then a in Z by A6,A66,A68;
hence contradiction by A67,CKB6:1;
end;
A70:now
let a;
assume that
A71: a in Z;
consider c such that A72: c in ( field S ) and A73: ( R |_2 ( R -Seg a ) ),( S |_2 ( S -Seg c ) ) are_isomorphic  by A6,A71;
let b;
assume that
A74: [ b,a ] in R;
A75: a in ( field R ) by A6,A71;
now
set Q = ( S |_2 ( S -Seg c ) );
set P = ( R |_2 ( R -Seg a ) );
P is  well-ordering by A1,CKB36:1;
then A76: ( canonical_isomorphism_of (P,Q) ) is_isomorphism_of P,Q by A73,CKB59:def 1;
assume a <> b;
then A77: b in ( R -Seg a ) by A74,CKB6:1;
then A78: ( P -Seg b ) = ( R -Seg b ) by A1,CKB38:1;
A79: b in ( field R ) by A74,RELAT_1:15;
then ( R -Seg b ) c= ( R -Seg a ) by A1,A75,A77,CKB41:1;
then A80: ( P |_2 ( R -Seg b ) ) = ( R |_2 ( R -Seg b ) ) by CKB33:1;
( field P ) = ( R -Seg a ) by A1,CKB43:1;
then consider d such that A81: d in ( field Q ) and A82: ( P |_2 ( P -Seg b ) ),( Q |_2 ( Q -Seg d ) ) are_isomorphic  by A1,A76,A77,CKB36:1,CKB64:1;
A83: ( S -Seg c ) = ( field Q ) by A2,CKB43:1;
then A84: ( Q -Seg d ) = ( S -Seg d ) by A2,A81,CKB38:1;
[ d,c ] in S by A81,A83,CKB6:1;
then A85: d in ( field S ) by RELAT_1:15;
then ( S -Seg d ) c= ( S -Seg c ) by A2,A72,A81,A83,CKB41:1;
then ( R |_2 ( R -Seg b ) ),( S |_2 ( S -Seg d ) ) are_isomorphic  by A82,A78,A84,A80,CKB33:1;
hence b in Z by A6,A79,A85;
end;
hence b in Z by A71;
end;
A86: ( R |_2 Z ),( S |_2 ( rng F ) ) are_isomorphic  by A13,A21,CKB49:def 1;
A87:now
assume A88: Z = ( field R );
given a such that
A89: a in ( field S )
and
A90: ( rng F ) = ( S -Seg a );

take a;
thus a in ( field S ) by A89;
thus R,( S |_2 ( S -Seg a ) ) are_isomorphic  by A86,A88,A90,CKB34:1;
end;
A91:now
let a;
assume that
A92: a in ( rng F );
consider c such that A93: (c in ( dom F ) & a = ( F . c )) by A92,FUNCT_1:def 3;
A94: [ c,a ] in F by A93,FUNCT_1:1;
then A95: a in ( field S ) by A12;
let b;
assume that
A96: [ b,a ] in S;
A97: ( R |_2 ( R -Seg c ) ),( S |_2 ( S -Seg a ) ) are_isomorphic  by A12,A94;
A98: c in ( field R ) by A12,A94;
now
set Q = ( S |_2 ( S -Seg a ) );
set P = ( R |_2 ( R -Seg c ) );
assume a <> b;
then A99: b in ( S -Seg a ) by A96,CKB6:1;
then A100: ( Q -Seg b ) = ( S -Seg b ) by A2,CKB38:1;
A101: b in ( field S ) by A96,RELAT_1:15;
then ( S -Seg b ) c= ( S -Seg a ) by A2,A95,A99,CKB41:1;
then A102: ( Q |_2 ( S -Seg b ) ) = ( S |_2 ( S -Seg b ) ) by CKB33:1;
(Q,P are_isomorphic  & Q is  well-ordering) by A2,A97,CKB36:1,CKB53:1;
then A103: ( canonical_isomorphism_of (Q,P) ) is_isomorphism_of Q,P by CKB59:def 1;
( field Q ) = ( S -Seg a ) by A2,CKB43:1;
then consider d such that A104: d in ( field P ) and A105: ( Q |_2 ( Q -Seg b ) ),( P |_2 ( P -Seg d ) ) are_isomorphic  by A2,A103,A99,CKB36:1,CKB64:1;
A106: ( R -Seg c ) = ( field P ) by A1,CKB43:1;
then A107: ( P -Seg d ) = ( R -Seg d ) by A1,A104,CKB38:1;
[ d,c ] in R by A104,A106,CKB6:1;
then A108: d in ( field R ) by RELAT_1:15;
then ( R -Seg d ) c= ( R -Seg c ) by A1,A98,A104,A106,CKB41:1;
then ( S |_2 ( S -Seg b ) ),( R |_2 ( R -Seg d ) ) are_isomorphic  by A105,A100,A107,A102,CKB33:1;
then ( R |_2 ( R -Seg d ) ),( S |_2 ( S -Seg b ) ) are_isomorphic  by CKB53:1;
then [ d,b ] in F by A12,A101,A108;
then (d in ( dom F ) & b = ( F . d )) by FUNCT_1:1;
hence b in ( rng F ) by FUNCT_1:def 3;
end;
hence b in ( rng F ) by A92;
end;
A109:now
assume A110: ( rng F ) = ( field S );
given a such that
A111: a in ( field R )
and
A112: Z = ( R -Seg a );

take a;
thus a in ( field R ) by A111;
thus ( R |_2 ( R -Seg a ) ),S are_isomorphic  by A86,A110,A112,CKB34:1;
end;
now
assume A113: (Z = ( field R ) & ( rng F ) = ( field S ));
(( R |_2 ( field R ) ) = R & ( S |_2 ( field S ) ) = S) by CKB34:1;
hence R,S are_isomorphic  by A13,A21,A113,CKB49:def 1;
end;
hence thesis by A1,A2,A7,A18,A70,A91,A65,A87,A109,CKB39:1;
end;
