environ
vocabularies NUMBERS,XBOOLE_0,NAT_1,FINSEQ_2,MARGREL1,BINARITH,ARYTM_3,POWER,SUBSET_1,ORDINAL4,FINSEQ_1,FUNCOP_1,XBOOLEAN,CARD_1,RELAT_1,REAL_1,FINSEQ_5,EUCLID,XXREAL_0,FUNCT_1,PARTFUN1,ARYTM_1,BINARI_2,ZFMISC_1,INT_1,ABIAN,BINARI_3;
notations XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,REAL_1,XXREAL_0,NAT_1,NAT_D,POWER,ABIAN,SERIES_1,MARGREL1,FUNCT_1,PARTFUN1,FUNCOP_1,FINSEQ_1,FINSEQ_5,FINSEQOP,ZFMISC_1,FINSEQ_2,BINARITH,BINARI_2,EUCLID,CKB25;
definitions FINSEQ_2,EUCLID,XBOOLEAN,CKB25;
theorems TARSKI,NAT_1,NAT_2,MARGREL1,POWER,FUNCOP_1,FINSEQ_1,FINSEQ_2,FINSEQ_4,FINSEQ_5,FINSEQ_6,BINARITH,BINARI_2,XREAL_1,XCMPLX_1,XBOOLEAN,NAT_D,PARTFUN1,XXREAL_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38;
schemes NAT_1,NAT_2,FINSEQ_2;
registrations RELSET_1,XREAL_0,NAT_1,XBOOLEAN,MARGREL1,ZFMISC_1,NAT_2,ORDINAL1,XBOOLE_0,FINSEQ_2,INT_1,CARD_1,FINSEQ_1;
constructors XXREAL_0,NAT_1,NAT_D,FINSEQOP,SERIES_1,ZFMISC_1,BINARITH,FINSEQ_5,BINARI_2,ABIAN,EUCLID,BINOP_2,RELSET_1,CKB25;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
theorem
(for n,i being Nat holds ( ( n + 1 ) -BinarySequence i ) = ( <* ( i mod 2 ) *> ^ ( n -BinarySequence ( i div 2 ) ) ))
proof
let n being Nat,i being Nat;
A1: ( len ( ( n + 1 ) -BinarySequence i ) ) = ( n + 1 ) by CARD_1:def 7;
then A2: ( dom ( ( n + 1 ) -BinarySequence i ) ) = ( Seg ( n + 1 ) ) by FINSEQ_1:def 3;
A3: ( len ( <* ( i mod 2 ) *> ^ ( n -BinarySequence ( i div 2 ) ) ) ) = ( 1 + ( len ( n -BinarySequence ( i div 2 ) ) ) ) by FINSEQ_5:8
.= ( n + 1 ) by CARD_1:def 7;
now
let j being Nat;
reconsider z = j as Nat;
assume A4: j in ( dom ( ( n + 1 ) -BinarySequence i ) );
then A5: 1 <= j by A2,FINSEQ_1:1;
A6: j <= ( n + 1 ) by A2,A4,FINSEQ_1:1;
A7: ( len <* ( i mod 2 ) *> ) = 1 by FINSEQ_1:39;
now
per cases  by A5,XXREAL_0:1;
suppose A8: j > 1;

A9: ( 2 to_power ( ( ( j -' 1 ) -' 1 ) + 1 ) ) = ( ( 2 to_power ( ( j -' 1 ) -' 1 ) ) * ( 2 to_power 1 ) ) by POWER:27
.= ( 2 * ( 2 to_power ( ( j -' 1 ) -' 1 ) ) ) by POWER:25;
( j - 1 ) > ( 1 - 1 ) by A8,XREAL_1:9;
then ( j -' 1 ) > ( 0 ) by A5,XREAL_1:233;
then A10: ( j -' 1 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
then A11: ( i div ( 2 to_power ( j -' 1 ) ) ) = ( i div ( 2 to_power ( ( ( j -' 1 ) -' 1 ) + 1 ) ) ) by XREAL_1:235
.= ( ( i div 2 ) div ( 2 to_power ( ( j -' 1 ) -' 1 ) ) ) by A9,NAT_2:27;
( j - 1 ) <= n by A6,XREAL_1:20;
then A12: ( j -' 1 ) <= n by A5,XREAL_1:233;
then A13: ( j -' 1 ) <= ( len ( n -BinarySequence ( i div 2 ) ) ) by CARD_1:def 7;
A14: ( j -' 1 ) in ( Seg n ) by A10,A12,FINSEQ_1:1;
j <= ( len ( ( n + 1 ) -BinarySequence i ) ) by A6,CARD_1:def 7;
hence ( ( ( n + 1 ) -BinarySequence i ) . j ) = ( ( ( n + 1 ) -BinarySequence i ) /. z ) by A5,FINSEQ_4:15
.= ( IFEQ (( ( i div ( 2 to_power ( j -' 1 ) ) ) mod 2 ),( 0 ),( FALSE ),( TRUE )) ) by A2,A4,CKB25:def 1
.= ( ( n -BinarySequence ( i div 2 ) ) /. ( j -' 1 ) ) by A14,A11,CKB25:def 1
.= ( ( n -BinarySequence ( i div 2 ) ) . ( j -' 1 ) ) by A10,A13,FINSEQ_4:15
.= ( ( n -BinarySequence ( i div 2 ) ) . ( j - 1 ) ) by A5,XREAL_1:233
.= ( ( <* ( i mod 2 ) *> ^ ( n -BinarySequence ( i div 2 ) ) ) . j ) by A3,A6,A7,A8,FINSEQ_1:24;
end;
suppose A15: j = 1;

A16:now
per cases ;
suppose ( i mod 2 ) = ( 0 );

hence ( IFEQ (( i mod 2 ),( 0 ),( FALSE ),( TRUE )) ) = ( i mod 2 ) by FUNCOP_1:def 8;
end;
suppose A17: ( i mod 2 ) <> ( 0 );

hence ( IFEQ (( i mod 2 ),( 0 ),( FALSE ),( TRUE )) ) = 1 by FUNCOP_1:def 8
.= ( i mod 2 ) by A17,NAT_D:12;
end;
end;
A18: ( 2 to_power ( 0 ) ) = 1 by POWER:24;
thus ( ( ( n + 1 ) -BinarySequence i ) . j ) = ( ( ( n + 1 ) -BinarySequence i ) /. z ) by A1,A5,A6,FINSEQ_4:15
.= ( IFEQ (( ( i div ( 2 to_power ( 1 -' 1 ) ) ) mod 2 ),( 0 ),( FALSE ),( TRUE )) ) by A2,A4,A15,CKB25:def 1
.= ( IFEQ (( ( i div 1 ) mod 2 ),( 0 ),( FALSE ),( TRUE )) ) by A18,XREAL_1:232
.= ( IFEQ (( i mod 2 ),( 0 ),( FALSE ),( TRUE )) ) by NAT_2:4
.= ( ( <* ( i mod 2 ) *> ^ ( n -BinarySequence ( i div 2 ) ) ) . j ) by A15,A16,FINSEQ_1:41;
end;
end;
hence ( ( ( n + 1 ) -BinarySequence i ) . j ) = ( ( <* ( i mod 2 ) *> ^ ( n -BinarySequence ( i div 2 ) ) ) . j );
end;
hence thesis by A1,A3,FINSEQ_2:9;
end;
