environ
vocabularies NUMBERS,CARD_1,FUNCT_1,RELAT_1,XBOOLE_0,ARYTM_3,NEWTON,TARSKI,FINSET_1,MCART_1,CARD_3,FINSEQ_1,SUBSET_1,ARYTM_1,XXREAL_0,FUNCT_2,PARTFUN1,INT_2,NAT_1,BINOP_1,BINOP_2,REALSET1,ZFMISC_1,INT_3,SUPINF_2,ALGSTR_0,GROUP_1,MESFUNC1,INT_1,VECTSP_1,STRUCT_0,GROUP_2,GRAPH_1,FINSEQ_2,EC_PF_1,RLVECT_1,LATTICES,EQREL_1,RELAT_2,UNIROOTS,PROB_2,REAL_1,MOD_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELAT_2,RELSET_1,PARTFUN1,MCART_1,FUNCT_2,BINOP_1,DOMAIN_1,FINSET_1,CARD_1,CARD_3,NUMBERS,XCMPLX_0,XXREAL_0,REAL_1,NAT_1,INT_1,NAT_D,REALSET1,FINSEQ_1,FINSEQ_2,EQREL_1,RVSUM_1,NEWTON,WSIERP_1,MOD_2,STRUCT_0,ALGSTR_0,RLVECT_1,GROUP_1,VECTSP_1,GROUP_2,GR_CY_1,INT_3,UNIROOTS,PROB_2,BINOM,CKB1,CKB13,CKB16,CKB17,CKB48,CKB49,CKB52;
definitions STRUCT_0,GROUP_1,INT_3,CARD_1,ALGSTR_0,BINOP_1,FINSEQ_1,REALSET1,TARSKI,FINSEQ_2,VECTSP_1,RLVECT_1,EQREL_1,BINOM,CARD_3,CKB1,CKB16,CKB48,CKB49,CKB52;
theorems TARSKI,XBOOLE_0,ZFMISC_1,ORDINAL1,FUNCT_1,FUNCT_2,VECTSP_1,INT_1,RELAT_1,RLVECT_1,GR_CY_1,FUNCT_7,NAT_1,INT_2,INT_3,PEPIN,NAT_D,NUMBERS,CARD_1,GROUP_1,GROUP_2,STRUCT_0,XREAL_1,NEWTON,XXREAL_0,ALGSEQ_1,NAT_3,RVSUM_1,CARD_2,EULER_1,XBOOLE_1,FINSEQ_1,RELSET_1,FUNCOP_1,PARTFUN1,FINSEQ_2,BINOP_1,ALGSTR_0,MCART_1,EQREL_1,UNIROOTS,RELAT_2,GR_CY_3,DIST_1,PROB_2,BINOM,MOD_2,CKB1,CKB2,CKB3,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB15,CKB16,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB46,CKB47,CKB48,CKB49,CKB50,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59;
schemes NAT_1,FUNCT_2,INT_1,FINSEQ_1;
registrations XBOOLE_0,STRUCT_0,XREAL_0,ORDINAL1,NAT_1,INT_1,GROUP_2,FINSET_1,GR_CY_1,ALGSTR_0,VECTSP_1,INT_3,XXREAL_0,NEWTON,SUBSET_1,CARD_1,VALUED_0,EQREL_1,RELSET_1,FINSEQ_2,UNIROOTS,NUMBERS,ALGSTR_1,MOD_2,MEMBERED,CKB4,CKB12,CKB14,CKB18,CKB19,CKB20,CKB45,CKB51;
constructors REAL_1,NAT_D,NAT_3,SEQ_1,REALSET1,GROUP_2,BINOP_1,GR_CY_1,INT_3,WSIERP_1,UPROOTS,BINOP_2,RELSET_1,FUNCT_7,UNIROOTS,PROB_2,GROUP_1,FINSET_1,BINOM,MOD_2,CKB1,CKB13,CKB16,CKB48,CKB49,CKB52;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve p for Prime;
reserve a for (Element of ( GF p ));
reserve b for (Element of ( GF p ));
theorem
QRRT1: (2 < p implies ( card { b: ( b |^ 2 ) = a } ) = ( 1 + ( Lege_p a ) ))
proof
assume AS: 2 < p;
per cases ;
suppose A1: a is  quadratic_residue;

then consider x being (Element of ( GF p )) such that P1: ( x |^ 2 ) = a by CKB48:def 1;
P2: x in { b: ( b |^ 2 ) = a } by P1;
( ( - x ) |^ 2 ) = ( ( - x ) * ( - x ) ) by CKB34:1
.= ( x * x ) by VECTSP_1:10
.= a by P1,CKB34:1;
then ( - x ) in { b: ( b |^ 2 ) = a };
then P4: { x,( - x ) } c= { b: ( b |^ 2 ) = a } by P2,ZFMISC_1:32;
P5: x <> ( - x )
proof
assume x = ( - x );
then ( x + x ) = ( 0. ( GF p ) ) by VECTSP_1:16;
then F2: x = ( 0. ( GF p ) ) by AS,CKB40:1;
( x |^ 2 ) = ( ( 0. ( GF p ) ) * ( 0. ( GF p ) ) ) by F2,CKB34:1
.= ( 0. ( GF p ) ) by VECTSP_1:12
.= ( 0 ) by CKB22:1;
hence contradiction by P1,A1,CKB48:def 1;
end;
now
let y being set;
assume y in { b: ( b |^ 2 ) = a };
then consider z being (Element of ( GF p )) such that P52: (y = z & ( z |^ 2 ) = a);
( z * z ) = ( z |^ 2 ) by CKB34:1
.= ( x * x ) by P1,P52,CKB34:1;
then (z = x or z = ( - x )) by CKB39:1;
hence y in { x,( - x ) } by P52,TARSKI:def 2;
end;
then { b: ( b |^ 2 ) = a } c= { x,( - x ) } by TARSKI:def 3;
hence ( card { b: ( b |^ 2 ) = a } ) = ( card { x,( - x ) } ) by P4,XBOOLE_0:def 10
.= ( 1 + 1 ) by P5,CARD_2:57
.= ( 1 + ( Lege_p a ) ) by A1,CKB52:def 1;
end;
suppose A1: (not a is  quadratic_residue);

now
per cases ;
suppose A10: a = ( 0 );

thus ( card { b: ( b |^ 2 ) = a } ) = ( 1 + ( Lege_p a ) )
proof
now
let x being set;
assume x in { b: ( b |^ 2 ) = a };
then consider b such that A101: (x = b & ( b |^ 2 ) = ( 0 )) by A10;
b = ( 0 ) by CKB38:1,A101
.= ( 0. ( GF p ) ) by CKB22:1;
hence x in { ( 0. ( GF p ) ) } by A101,TARSKI:def 1;
end;
then A11: { b: ( b |^ 2 ) = a } c= { ( 0. ( GF p ) ) } by TARSKI:def 3;
( ( 0. ( GF p ) ) |^ 2 ) = ( ( 0. ( GF p ) ) * ( 0. ( GF p ) ) ) by CKB34:1
.= ( 0. ( GF p ) ) by VECTSP_1:12
.= ( 0 ) by CKB22:1;
then ( 0. ( GF p ) ) in { b: ( b |^ 2 ) = a } by A10;
then { ( 0. ( GF p ) ) } c= { b: ( b |^ 2 ) = a } by ZFMISC_1:31;
then { b: ( b |^ 2 ) = a } = { ( 0. ( GF p ) ) } by A11,XBOOLE_0:def 10;
hence ( card { b: ( b |^ 2 ) = a } ) = ( 1 + ( 0 ) ) by CARD_2:42
.= ( 1 + ( Lege_p a ) ) by A10,CKB52:def 1;
end;

end;
suppose A11: a <> ( 0 );

A13: { b: ( b |^ 2 ) = a } = ( {} )
proof
assume { b: ( b |^ 2 ) = a } <> ( {} );
then consider x being set such that A131: x in { b: ( b |^ 2 ) = a } by XBOOLE_0:def 1;
(ex b st (x = b & ( b |^ 2 ) = a)) by A131;
hence contradiction by A1,CKB48:def 1,A11;
end;
thus ( card { b: ( b |^ 2 ) = a } ) = ( 1 + ( - 1 ) ) by A13
.= ( 1 + ( Lege_p a ) ) by A1,A11,CKB52:def 1;
end;
end;
hence ( card { b: ( b |^ 2 ) = a } ) = ( 1 + ( Lege_p a ) );
end;
end;
