environ
vocabularies ORDINAL6,CARD_1,RELAT_1,FUNCT_1,CLASSES2,NUMBERS,TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,ORDINAL2,WELLORD1,WELLORD2,ABIAN,CARD_3,MATROID0,ORDINAL4,NAT_1,ARYTM_3,CLASSES1,VALUED_0,AFINSQ_1,ORDINAL5,ZFMISC_1,FINSET_1,MESFUNC8,NAGATA_1,ORDINAL3,PRE_TOPC,AOFA_000;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSET_1,ORDINAL1,ORDINAL2,NAT_1,ORDINAL3,ABIAN,WELLORD1,WELLORD2,CARD_1,ORDINAL4,CARD_3,NAGATA_1,AFINSQ_1,CLASSES1,CLASSES2,NUMBERS,MATROID0,ORDINAL5,AOFA_000,CKB1,CKB25,CKB26,CKB32,CKB33,CKB41,CKB55,CKB72,CKB74;
definitions TARSKI,XBOOLE_0,FUNCT_1,WELLORD1,ABIAN,ORDINAL1,ORDINAL2,ORDINAL4,CARD_3,ORDINAL5,CKB1,CKB25,CKB26,CKB32,CKB33,CKB41,CKB55;
theorems XBOOLE_1,ZFMISC_1,RELAT_1,FUNCT_1,ORDINAL1,ORDINAL2,ORDINAL3,FUNCT_3,WELLORD1,WELLORD2,ORDERS_1,CARD_2,CARD_5,FUNCT_2,ORDINAL4,XBOOLE_0,TARSKI,ORDINAL5,NAT_1,CLASSES1,CLASSES2,CARD_1,AFINSQ_1,NAT_2,GRFUNC_1,ABIAN,CKB1,CKB4,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB25,CKB26,CKB31,CKB32,CKB33,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB70,CKB75,CKB76,CKB78;
schemes NAT_1,ORDINAL1,ORDINAL2,ORDINAL4,TREES_2,CKB77;
registrations XBOOLE_0,RELAT_1,RELSET_1,FUNCT_1,FINSET_1,FUNCT_2,ORDINAL1,ORDINAL2,CARD_1,WELLORD2,ORDINAL3,CLASSES2,CARD_5,ORDINAL4,CARD_LAR,ORDINAL5,CLASSES1,AFINSQ_1,SUBSET_1,CKB2,CKB3,CKB5,CKB6,CKB11,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB34,CKB35,CKB36,CKB48,CKB49,CKB50,CKB59,CKB69,CKB71,CKB73;
constructors WELLORD1,WELLORD2,CLASSES1,ABIAN,CARD_3,AFINSQ_1,ORDINAL3,ORDINAL5,NAT_1,RELSET_1,CKB1,CKB25,CKB32,CKB41,CKB55,CKB74;
requirements SUBSET,BOOLE,NUMERALS;
begin
reserve a for  ordinal number;
reserve b for  ordinal number;
reserve c for  ordinal number;
reserve x for set;
reserve y for set;
reserve z for set;
reserve n for Nat;
reserve U for Universe;
scheme CriticalNumber3 { U() -> Universe,a() -> (Ordinal of U()),phi(Ordinal) -> Ordinal } : (ex a being (Ordinal of U()) st (a() in a & phi(a) = a))
provided
A0: ( omega ) in U()
and
P0: (for a holds (a in U() implies phi(a) in U()))
and
A1: (for a holds (for b holds ((a in b & b in U()) implies phi(a) in phi(b))))
and
A2: (for a being (Ordinal of U()) holds (a is non  empty  limit_ordinal implies (for phi being Ordinal-Sequence holds ((( dom phi ) = a & (for b holds (b in a implies ( phi . b ) = phi(b)))) implies phi(a) is_limes_of phi))))
proof
assume A3: (not thesis);
deffunc F(Ordinal,Ordinal) = phi($2);
deffunc G(Ordinal,T-Sequence) = ( {} );
consider phi being Ordinal-Sequence such that A4: ( dom phi ) = ( omega ) and A5: (( {} ) in ( omega ) implies ( phi . ( {} ) ) = ( succ a() )) and A6: (for a holds (( succ a ) in ( omega ) implies ( phi . ( succ a ) ) = F(a,( phi . a )))) and (for a holds (((a in ( omega ) & a <> ( {} )) & a is  limit_ordinal) implies ( phi . a ) = G(a,( phi | a )))) from ORDINAL2:sch 11;
K0: ( rng phi ) c= ( On U() )
proof
let y;
assume y in ( rng phi );
then consider x such that K1: (x in ( dom phi ) & y = ( phi . x )) by FUNCT_1:def 3;
reconsider x as (Element of ( NAT )) by A4,K1;
defpred P[ Nat ]
 means
( phi . $1 ) in ( On U() );
K2: P[ ( 0 ) ] by A5,ORDINAL1:def 9;
K3: (P[ n ] implies P[ ( n + 1 ) ])
proof
assume P[ n ];
then K5: ( phi . n ) in U() by ORDINAL1:def 9;
K4: ( n + 1 ) = ( succ n ) by NAT_1:38;
(( phi . ( n + 1 ) ) = phi(( phi . n )) & phi(( phi . n )) in U()) by A6,K4,K5,P0;
hence P[ ( n + 1 ) ] by ORDINAL1:def 9;
end;
P[ n ] from NAT_1:sch 2(K2,K3);
then P[ x ];
hence thesis by K1;
end;
then reconsider phi as (Ordinal-Sequence of ( omega ),U()) by A4,FUNCT_2:2;
A7:now
defpred P[ Ordinal ]
 means
($1 in U() & $1 c/= phi($1));
assume A8: (ex a st P[ a ]);
consider a such that A9: P[ a ] and A10: (for b holds (P[ b ] implies a c= b)) from ORDINAL1:sch 1(A8);
phi(phi(a)) in phi(a) by A1,A9,ORDINAL1:16;
then phi(a) c/= phi(phi(a)) by ORDINAL1:5;
hence contradiction by A9,A10,P0;
end;
A11:now
let a;
assume (a() in a & a in U());
then (a c= phi(a) & a <> phi(a)) by A3,A7;
then a c< phi(a) by XBOOLE_0:def 8;
hence a in phi(a) by ORDINAL1:11;
end;
B1: (for a holds (a in ( omega ) implies a() in ( phi . a )))
proof
let a;
assume a in ( omega );
then reconsider a as (Element of ( omega ));
defpred N[ Nat ]
 means
a() in ( phi . $1 );
B01: N[ ( 0 ) ] by A5,ORDINAL1:6;
B02:now
let n being Nat;
assume B03: N[ n ];
(( n + 1 ) = ( succ n ) & ( n + 1 ) in ( omega )) by NAT_1:38;
then ( phi . ( n + 1 ) ) = phi(( phi . n )) by A6;
then ( phi . n ) in ( phi . ( n + 1 ) ) by B03,A11;
hence N[ ( n + 1 ) ] by B03,ORDINAL1:10;
end;
(for n being Nat holds N[ n ]) from NAT_1:sch 2(B01,B02);
then N[ a ];
hence thesis;
end;
A12: phi is  increasing
proof
let a;
let b;
assume A13: (a in b & b in ( dom phi ));
then A14: (ex c st (b = ( a +^ c ) & c <> ( {} ))) by ORDINAL3:28;
defpred R[ Ordinal ]
 means
((( a +^ $1 ) in ( omega ) & $1 <> ( {} )) implies ( phi . a ) in ( phi . ( a +^ $1 ) ));
A15: R[ ( {} ) ];
A16: (for c holds (R[ c ] implies R[ ( succ c ) ]))
proof
let c;
assume that
A17: ((( a +^ c ) in ( omega ) & c <> ( {} )) implies ( phi . a ) in ( phi . ( a +^ c ) ))
and
A18: (( a +^ ( succ c ) ) in ( omega ) & ( succ c ) <> ( {} ));
A19: (( a +^ c ) in ( succ ( a +^ c ) ) & ( a +^ ( succ c ) ) = ( succ ( a +^ c ) )) by ORDINAL1:6,ORDINAL2:28;
reconsider d = ( phi . ( a +^ c ) ) as Ordinal;
( a +^ c ) in ( omega ) by A18,A19,ORDINAL1:10;
then ((( phi . ( a +^ ( succ c ) ) ) = phi(d) & d in phi(d)) & ( a +^ (( {} ) qua Ordinal) ) = a) by A6,A11,A18,A19,B1,ORDINAL2:27;
hence thesis by A17,A18,A19,ORDINAL1:10;
end;
A20: (for b holds (((b <> ( {} ) & b is  limit_ordinal) & (for c holds (c in b implies R[ c ]))) implies R[ b ]))
proof
let b;
assume that
A21: (b <> ( {} ) & b is  limit_ordinal)
and
(for c holds (c in b implies ((( a +^ c ) in ( omega ) & c <> ( {} )) implies ( phi . a ) in ( phi . ( a +^ c ) ))))
and
A22: (( a +^ b ) in ( omega ) & b <> ( {} ));
( a +^ b ) <> ( {} ) by A22,ORDINAL3:26;
then (( a +^ b ) is  limit_ordinal & ( {} ) in ( a +^ b )) by A21,ORDINAL3:8,ORDINAL3:29;
hence thesis by A22;
end;
(for c holds R[ c ]) from ORDINAL2:sch 1(A15,A16,A20);
hence thesis by A4,A13,A14;
end;
J1: ( sup phi ) in U() by A0,CKB76:1;
deffunc phi(Ordinal) = phi($1);
consider fi being Ordinal-Sequence such that A23: (( dom fi ) = ( sup phi ) & (for a holds (a in ( sup phi ) implies ( fi . a ) = phi(a)))) from ORDINAL2:sch 3;
(( succ a() ) in ( rng phi ) & ( sup ( rng phi ) ) = ( sup phi )) by A4,A5,CKB78:1,FUNCT_1:def 3;
then A24: (( sup phi ) <> ( {} ) & ( sup phi ) is  limit_ordinal) by A4,A12,ORDINAL2:19,ORDINAL4:16;
then A25: phi(( sup phi )) is_limes_of fi by J1,A2,A23;
fi is  increasing
proof
let a;
let b;
assume A26: (a in b & b in ( dom fi ));
then ((( fi . a ) = phi(a) & ( fi . b ) = phi(b)) & b in U()) by J1,A23,ORDINAL1:10;
hence thesis by A1,A26;
end;
then A27: ( sup fi ) = ( lim fi ) by A23,A24,ORDINAL4:8
.= phi(( sup phi )) by A25,ORDINAL2:def 10;
ZZ: ( sup fi ) c= ( sup phi )
proof
let x being Ordinal;
assume A28: x in ( sup fi );
reconsider A = x as Ordinal;
consider b such that A29: (b in ( rng fi ) & A c= b) by A28,ORDINAL2:21;
consider y being set such that A30: (y in ( dom fi ) & b = ( fi . y )) by A29,FUNCT_1:def 3;
reconsider y as Ordinal by A30;
consider c such that A31: (c in ( rng phi ) & y c= c) by A23,A30,ORDINAL2:21;
C1: c in U() by K0,A31,ORDINAL1:def 9;
consider z being set such that A32: (z in ( dom phi ) & c = ( phi . z )) by A31,FUNCT_1:def 3;
reconsider z as Ordinal by A32;
( succ z ) in ( omega ) by A4,A32,ORDINAL1:28;
then A33: ((( phi . ( succ z ) ) = phi(c) & ( phi . ( succ z ) ) in ( rng phi )) & b = phi(y)) by A4,A6,A23,A30,A32,FUNCT_1:def 3;
(y c< c iff (y <> c & y c= c)) by XBOOLE_0:def 8;
then (phi(y) in phi(c) or y = c) by C1,A1,A31,ORDINAL1:11;
then (b c= phi(c) & phi(c) in ( sup phi )) by A33,ORDINAL1:def 2,ORDINAL2:19;
then b in ( sup phi ) by ORDINAL1:12;
hence thesis by A29,ORDINAL1:12;
end;
( phi . ( 0 ) ) in ( rng phi ) by A4,FUNCT_1:def 3;
then (a() in ( phi . ( 0 ) ) & ( phi . ( 0 ) ) in ( sup phi )) by B1,ORDINAL2:19;
then a() in ( sup phi ) by ORDINAL1:10;
hence contradiction by J1,A11,A27,ZZ,ORDINAL1:5;
end;
