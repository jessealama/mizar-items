environ
vocabularies FINANCE1,NUMBERS,XBOOLE_0,PROB_1,SUBSET_1,FUNCT_1,TARSKI,RELAT_1,CARD_1,ARYTM_1,CARD_3,PROB_3,NAT_1,ARYTM_3,XREAL_0,ORDINAL1,XXREAL_0,SERIES_1,EQREL_1,MEASURE6,SEQ_1,XXREAL_1,MESFUNC1,RANDOM_1,RANDOM_2,FUNCOP_1,VALUED_1;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,XXREAL_0,NAT_1,XREAL_0,NUMBERS,FUNCT_1,RELSET_1,FUNCT_2,PROB_3,SERIES_1,PROB_1,MEASURE6,SEQ_1,BINOP_2,MESFUNC1,MESFUNC6,RANDOM_1,INT_1,KOLMOG01,XXREAL_1,RCOMP_1,FUNCOP_1,VALUED_1,RANDOM_2,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
definitions XXREAL_0,PROB_1,SUBSET_1,TARSKI,FUNCT_2,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
theorems SERIES_1,PROB_1,PROB_3,XBOOLE_0,NAT_1,FUNCT_2,XXREAL_0,ORDINAL1,TARSKI,XREAL_1,XXREAL_1,MESFUNC1,MEASURE6,FINSUB_1,MESFUNC6,XREAL_0,RANDOM_1,RANDOM_2,FUNCOP_1,VALUED_1,FRECHET,XBOOLE_1,CKB3,CKB4,CKB5,CKB6,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29;
schemes NAT_1,FUNCT_2,RECDEF_1;
registrations XBOOLE_0,SUBSET_1,ORDINAL1,RELSET_1,NUMBERS,XREAL_0,MEMBERED,PROB_1,VALUED_0,XXREAL_0,NAT_1,XCMPLX_0,VALUED_1,FUNCT_2,CKB13,CKB20;
constructors REAL_1,SEQ_1,PROB_3,SERIES_1,BINOP_2,RELSET_1,MEASURE6,RCOMP_1,MESFUNC1,MESFUNC6,KOLMOG01,RANDOM_2,FUNCOP_1,CKB2,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
requirements SUBSET,NUMERALS,BOOLE,ARITHM,REAL;
begin
reserve Omega for non empty set;
reserve F for (SigmaField of Omega);
theorem
Th7: (for d being  natural number holds (d > ( 0 ) implies (for r being  real number holds (for phi being Real_Sequence holds (for G being (Function of ( NAT ),( set_of_random_variables_on (F,( Borel_Sets )) )) holds (( Element_Of (F,( Borel_Sets ),G,( 0 )) ) = ( Omega --> ( 1 + r ) ) implies (for w being (Element of Omega) holds ( PortfolioValueFutExt (r,d,phi,F,G,w) ) = ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( PortfolioValueFut (r,d,phi,F,G,w) ) ))))))))
proof
let d being  natural number;
assume A0: d > ( 0 );
let r being  real number;
let phi being Real_Sequence;
set X = ( set_of_random_variables_on (F,( Borel_Sets )) );
let G being (Function of ( NAT ),X);
assume A3: ( Element_Of (F,( Borel_Sets ),G,( 0 )) ) = ( Omega --> ( 1 + r ) );
let w being (Element of Omega);
A4: ( d - 1 ) is (Element of ( NAT )) by A0,NAT_1:20;
defpred J[ Nat ]
 means
( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( $1 + 1 ) ) = ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . $1 ) );
( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . ( 0 ) ) )
proof
( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( 0 ) ) + ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . 1 ) ) by SERIES_1:def 1;
then ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . ( 0 ) ) + ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . 1 ) ) by SERIES_1:def 1;
then ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . ( 0 ) ) + ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) . ( 0 ) ) ) by NAT_1:def 3;
then ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . ( 0 ) ) ) by SERIES_1:def 1;
then consider d being (Element of ( NAT )) such that AJ0: (d = ( 0 ) & ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( d + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . d ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . d ) ));
AJ1: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( d + 1 ) ) = ( ( ( ( ElementsOfPortfolioValueProb_fut (F,( G . d )) ) . w ) * ( phi . d ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . d ) ) by AJ0,CKB17:def 1;
set g = ( G . d );
set g2 = ( Change_Element_to_Func (F,( Borel_Sets ),g) );
( g2 . w ) = ( 1 + r )
proof
((( Element_Of (F,( Borel_Sets ),G,( 0 )) ) = ( G . ( 0 ) ) & g2 = ( G . ( 0 ) )) & ( Element_Of (F,( Borel_Sets ),G,( 0 )) ) = ( Omega --> ( 1 + r ) )) by A3,CKB16:def 1,CKB14:def 1,AJ0;
hence thesis by FUNCOP_1:7;
end;
hence thesis by AJ0,AJ1,CKB15:def 1;
end;
then TT0: J[ ( 0 ) ];
TT1: (for k being Nat holds (J[ k ] implies J[ ( k + 1 ) ]))
proof
let k being Nat;
assume T0: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( k + 1 ) ) = ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . k ) );
reconsider k as (Element of ( NAT )) by ORDINAL1:def 12;
( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( k + 1 ) + 1 ) ) = ( ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . k ) ) + ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) . ( ( k + 1 ) + 1 ) ) ) by T0,SERIES_1:def 1;
then ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( k + 1 ) + 1 ) ) = ( ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . k ) ) + ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) . ( k + 1 ) ) ) by NAT_1:def 3;
then ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( k + 1 ) + 1 ) ) = ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . k ) + ( ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) . ( k + 1 ) ) ) );
hence thesis by SERIES_1:def 1;
end;
(for k being Nat holds J[ k ]) from NAT_1:sch 2(TT0,TT1);
then ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ) . ( ( d - 1 ) + 1 ) ) = ( ( ( 1 + r ) * ( phi . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (r,phi,F,w,G) ) ^\ 1 ) ) . ( d - 1 ) ) ) by A4;
hence thesis;
end;
