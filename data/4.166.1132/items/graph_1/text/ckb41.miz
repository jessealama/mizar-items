environ
vocabularies NUMBERS,SUBSET_1,STRUCT_0,FUNCT_1,GLIB_000,XBOOLE_0,FUNCT_5,RELAT_1,PARTFUN1,RELAT_2,FINSET_1,TREES_2,FINSEQ_1,XXREAL_0,ARYTM_3,TARSKI,CARD_1,FUNCT_2,ZFMISC_1,MCART_1,GRAPH_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_5,FINSEQ_1,FINSET_1,PARTFUN1,CARD_1,NUMBERS,NAT_1,MCART_1,XXREAL_0,STRUCT_0,CKB1,CKB2,CKB3,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB23,CKB24,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40;
definitions FUNCT_1,TARSKI,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB24,CKB27,CKB30,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40;
theorems FUNCT_2,FUNCT_1,PARTFUN1,FINSEQ_1,NAT_1,ZFMISC_1,MCART_1,TARSKI,RELAT_1,FINSEQ_3,RELSET_1,XBOOLE_0,XBOOLE_1,XREAL_1,XXREAL_0,CARD_1,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB22,CKB24,CKB27,CKB30,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40;
schemes FUNCT_2,TARSKI,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FINSET_1,XREAL_0,FINSEQ_1,ORDINAL1,STRUCT_0,CARD_1,FUNCT_2,RELSET_1,CKB1,CKB4,CKB15,CKB16,CKB17,CKB18,CKB25,CKB26,CKB31,CKB35;
constructors PARTFUN1,FUNCT_2,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,FUNCT_5,RELSET_1,CKB1,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21,CKB23,CKB24,CKB27,CKB30,CKB34,CKB36,CKB37,CKB38,CKB39,CKB40;
requirements NUMERALS,REAL,SUBSET,BOOLE,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve G for Graph;
theorem
Lm2: (for p being (Chain of G) holds ( p | ( Seg n ) ) is (Chain of G))
proof
let p being (Chain of G);
reconsider q = ( p | ( Seg n ) ) as FinSequence by FINSEQ_1:15;
A1: (for n holds ((1 <= n & n <= ( len q )) implies ( q . n ) in (the carrier' of G)))
proof
let k being (Element of ( NAT ));
assume that
A2: 1 <= k
and
A3: k <= ( len q );
A4: k in ( dom q ) by A2,A3,FINSEQ_3:25;
( dom q ) c= ( dom p ) by RELAT_1:60;
then k <= ( len p ) by A4,FINSEQ_3:25;
then ( p . k ) in (the carrier' of G) by A2,CKB21:def 1;
hence thesis by A4,FUNCT_1:47;
end;
(ex q1 being FinSequence st ((( len q1 ) = ( ( len q ) + 1 ) & (for n holds ((1 <= n & n <= ( len q1 )) implies ( q1 . n ) in (the carrier of G)))) & (for n holds ((1 <= n & n <= ( len q )) implies (ex x9,y9 being (Vertex of G) st ((x9 = ( q1 . n ) & y9 = ( q1 . ( n + 1 ) )) & ( q . n ) joins x9,y9))))))
proof
consider q1 being FinSequence such that A5: ( len q1 ) = ( ( len p ) + 1 ) and A6: (for n holds ((1 <= n & n <= ( len q1 )) implies ( q1 . n ) in (the carrier of G))) and A7: (for n holds ((1 <= n & n <= ( len p )) implies (ex x9,y9 being (Vertex of G) st ((x9 = ( q1 . n ) & y9 = ( q1 . ( n + 1 ) )) & ( p . n ) joins x9,y9)))) by CKB21:def 1;
reconsider q2 = ( q1 | ( Seg ( n + 1 ) ) ) as FinSequence by FINSEQ_1:15;
take q2;
thus A8: ( len q2 ) = ( ( len q ) + 1 )
proof
A9: ( dom q2 ) = ( ( dom q1 ) /\ ( Seg ( n + 1 ) ) ) by RELAT_1:61
.= ( ( Seg ( ( len p ) + 1 ) ) /\ ( Seg ( n + 1 ) ) ) by A5,FINSEQ_1:def 3;
A10: ( dom q ) = ( ( dom p ) /\ ( Seg n ) ) by RELAT_1:61
.= ( ( Seg ( len p ) ) /\ ( Seg n ) ) by FINSEQ_1:def 3;
A11:now
assume A12: ( ( len p ) + 1 ) <= ( n + 1 );
then ( Seg ( ( len p ) + 1 ) ) c= ( Seg ( n + 1 ) ) by FINSEQ_1:5;
then ( dom q2 ) = ( Seg ( ( len p ) + 1 ) ) by A9,XBOOLE_1:28;
then A13: ( len q2 ) = ( ( len p ) + 1 ) by FINSEQ_1:def 3;
( len p ) <= n by A12,XREAL_1:6;
then ( Seg ( len p ) ) c= ( Seg n ) by FINSEQ_1:5;
then ( dom q ) = ( Seg ( len p ) ) by A10,XBOOLE_1:28;
hence thesis by A13,FINSEQ_1:def 3;
end;
now
assume A14: ( n + 1 ) <= ( ( len p ) + 1 );
then ( Seg ( n + 1 ) ) c= ( Seg ( ( len p ) + 1 ) ) by FINSEQ_1:5;
then ( dom q2 ) = ( Seg ( n + 1 ) ) by A9,XBOOLE_1:28;
then A15: ( len q2 ) = ( n + 1 ) by FINSEQ_1:def 3;
n <= ( len p ) by A14,XREAL_1:6;
then ( Seg n ) c= ( Seg ( len p ) ) by FINSEQ_1:5;
then ( dom q ) = ( Seg n ) by A10,XBOOLE_1:28;
hence thesis by A15,FINSEQ_1:def 3;
end;
hence thesis by A11;
end;

thus (for n holds ((1 <= n & n <= ( len q2 )) implies ( q2 . n ) in (the carrier of G)))
proof
let n being (Element of ( NAT ));
assume that
A16: 1 <= n
and
A17: n <= ( len q2 );
A18: n in ( dom q2 ) by A16,A17,FINSEQ_3:25;
( dom q2 ) c= ( dom q1 ) by RELAT_1:60;
then n <= ( len q1 ) by A18,FINSEQ_3:25;
then ( q1 . n ) in (the carrier of G) by A6,A16;
hence thesis by A18,FUNCT_1:47;
end;

let k;
assume that
A19: 1 <= k
and
A20: k <= ( len q );
A21: k in ( dom q ) by A19,A20,FINSEQ_3:25;
( dom q ) c= ( dom p ) by RELAT_1:60;
then k <= ( len p ) by A21,FINSEQ_3:25;
then consider x9,y9 being (Vertex of G) such that A22: x9 = ( q1 . k ) and A23: y9 = ( q1 . ( k + 1 ) ) and A24: ( p . k ) joins x9,y9 by A7,A19;
take x9;
take y9;
( len q ) <= ( ( len q ) + 1 ) by NAT_1:11;
then k <= ( len q2 ) by A8,A20,XXREAL_0:2;
then k in ( dom q2 ) by A19,FINSEQ_3:25;
hence x9 = ( q2 . k ) by A22,FUNCT_1:47;
A25: ( k + 1 ) <= ( len q2 ) by A8,A20,XREAL_1:7;
( 1 + 1 ) <= ( k + 1 ) by A19,XREAL_1:7;
then 1 <= ( k + 1 ) by XXREAL_0:2;
then ( k + 1 ) in ( dom q2 ) by A25,FINSEQ_3:25;
hence y9 = ( q2 . ( k + 1 ) ) by A23,FUNCT_1:47;
thus thesis by A21,A24,FUNCT_1:47;
end;
hence thesis by A1,CKB21:def 1;
end;
