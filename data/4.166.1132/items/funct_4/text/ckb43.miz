environ
vocabularies XBOOLE_0,FUNCT_1,TARSKI,ZFMISC_1,RELAT_1,FUNCOP_1,SUBSET_1,PARTFUN1,FUNCT_2,ORDINAL1,FUNCT_4;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,ORDINAL1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,BINOP_1,PARTFUN1,FUNCOP_1,CKB11;
definitions TARSKI,FUNCT_2,PARTFUN1,XBOOLE_0,BINOP_1,FUNCOP_1,FUNCT_1,CKB11;
theorems TARSKI,FUNCT_1,FUNCT_2,GRFUNC_1,PARTFUN1,FUNCOP_1,ZFMISC_1,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,ENUMSET1,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42;
schemes FUNCT_1,PARTFUN1,XBOOLE_0;
registrations XBOOLE_0,RELAT_1,FUNCT_1,FUNCOP_1,RELSET_1,ZFMISC_1;
constructors PARTFUN1,BINOP_1,FUNCOP_1,RELSET_1,ORDINAL1,CKB11;
requirements BOOLE,SUBSET;
begin
reserve x for set;
reserve x1 for set;
reserve x2 for set;
reserve y for set;
reserve y9 for set;
reserve y1 for set;
reserve y2 for set;
reserve z for set;
reserve z9 for set;
reserve D for non  empty set;
reserve f for Function;
reserve h for Function;
definition
let f;
func ~ f -> Function means 
:Def2: ((for x holds (x in ( dom it ) iff (ex y st (ex z st (x = [ z,y ] & [ y,z ] in ( dom f )))))) & (for y holds (for z holds ([ y,z ] in ( dom f ) implies ( it . (z,y) ) = ( f . (y,z) )))));
existence
proof
defpred P[ set,set ]
 means
(ex y st (ex z st ($1 = [ z,y ] & $2 = ( f . [ y,z ] ))));
defpred P[ set ]
 means
(ex y st [ $1,y ] in ( dom f ));
consider D1 being set such that A1: (x in D1 iff (x in ( union ( union ( dom f ) ) ) & P[ x ])) from XBOOLE_0:sch 1;
defpred P[ set ]
 means
(ex y st [ y,$1 ] in ( dom f ));
consider D2 being set such that A2: (y in D2 iff (y in ( union ( union ( dom f ) ) ) & P[ y ])) from XBOOLE_0:sch 1;
defpred P[ set ]
 means
(ex y st (ex z st ($1 = [ z,y ] & [ y,z ] in ( dom f ))));
consider D being set such that A3: (x in D iff (x in [: D2,D1 :] & P[ x ])) from XBOOLE_0:sch 1;
A4: (for x holds (for y1 holds (for y2 holds (((x in D & P[ x,y1 ]) & P[ x,y2 ]) implies y1 = y2))))
proof
let x;
let y1;
let y2;
assume that
x in D;
given y,z such that
A5: x = [ z,y ]
and
A6: y1 = ( f . [ y,z ] );

given y9,z9 such that
A7: x = [ z9,y9 ]
and
A8: y2 = ( f . [ y9,z9 ] );

z = z9 by A5,A7,ZFMISC_1:27;
hence thesis by A5,A6,A7,A8,ZFMISC_1:27;
end;
A9: (for x holds (x in D implies (ex y1 st P[ x,y1 ])))
proof
let x;
assume x in D;
then consider y,z such that A10: x = [ z,y ] and [ y,z ] in ( dom f ) by A3;
take ( f . [ y,z ] );
thus thesis by A10;
end;
consider h being Function such that A11: ( dom h ) = D and A12: (for x holds (x in D implies P[ x,( h . x ) ])) from FUNCT_1:sch 2(A4,A9);
take h;
thus A13: (for x holds (x in ( dom h ) iff (ex y st (ex z st (x = [ z,y ] & [ y,z ] in ( dom f ))))))
proof
let x;
thus (x in ( dom h ) implies (ex y st (ex z st (x = [ z,y ] & [ y,z ] in ( dom f ))))) by A3,A11;
given y,z such that
A14: x = [ z,y ]
and
A15: [ y,z ] in ( dom f );

y in ( union ( union ( dom f ) ) ) by A15,ZFMISC_1:134;
then A16: y in D1 by A1,A15;
z in ( union ( union ( dom f ) ) ) by A15,ZFMISC_1:134;
then z in D2 by A2,A15;
then [ z,y ] in [: D2,D1 :] by A16,ZFMISC_1:87;
hence thesis by A3,A11,A14,A15;
end;

let y;
let z;
assume [ y,z ] in ( dom f );
then [ z,y ] in D by A11,A13;
then consider y9,z9 such that A17: [ z,y ] = [ z9,y9 ] and A18: ( h . (z,y) ) = ( f . [ y9,z9 ] ) by A12;
z = z9 by A17,ZFMISC_1:27;
hence thesis by A17,A18,ZFMISC_1:27;
end;
uniqueness
proof
let h1 being Function;
let h2 being Function;
assume that
A19: (for x holds (x in ( dom h1 ) iff (ex y st (ex z st (x = [ z,y ] & [ y,z ] in ( dom f ))))))
and
A20: (for y holds (for z holds ([ y,z ] in ( dom f ) implies ( h1 . (z,y) ) = ( f . (y,z) ))))
and
A21: (for x holds (x in ( dom h2 ) iff (ex y st (ex z st (x = [ z,y ] & [ y,z ] in ( dom f ))))))
and
A22: (for y holds (for z holds ([ y,z ] in ( dom f ) implies ( h2 . (z,y) ) = ( f . (y,z) ))));
A23: (x in ( dom h1 ) implies ( h1 . x ) = ( h2 . x ))
proof
assume x in ( dom h1 );
then consider x1,x2 such that A24: x = [ x2,x1 ] and A25: [ x1,x2 ] in ( dom f ) by A19;
( h1 . (x2,x1) ) = ( f . (x1,x2) ) by A20,A25
.= ( h2 . (x2,x1) ) by A22,A25;
hence thesis by A24;
end;
(x in ( dom h1 ) iff x in ( dom h2 ))
proof
(x in ( dom h1 ) iff (ex y st (ex z st (x = [ z,y ] & [ y,z ] in ( dom f ))))) by A19;
hence thesis by A21;
end;
then ( dom h1 ) = ( dom h2 ) by TARSKI:1;
hence thesis by A23,FUNCT_1:2;
end;
end;
