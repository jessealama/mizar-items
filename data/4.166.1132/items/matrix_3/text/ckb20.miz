environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,VECTSP_1,SUPINF_2,MATRIX_1,FINSEQ_2,ARYTM_1,FINSEQ_1,TREES_1,RELAT_1,ZFMISC_1,XXREAL_0,CARD_1,ARYTM_3,SUBSET_1,FUNCT_1,INCSP_1,FVSUM_1,RVSUM_1,ALGSTR_0,MESFUNC1,RLVECT_1,CARD_3,ORDINAL4,TARSKI,STRUCT_0,MATRIX_2,QC_LANG1,FINSUB_1,BINOP_1,SETWISEO,FUNCOP_1,PARTFUN1,FINSEQOP,FUNCT_5,FINSOP_1,ABIAN,MATRIX_3;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XXREAL_0,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FINSEQ_1,BINOP_1,FINSEQ_4,STRUCT_0,ALGSTR_0,FUNCT_3,FUNCOP_1,RLVECT_1,GROUP_1,VECTSP_1,SETWISEO,FINSOP_1,SETWOP_2,FINSEQ_2,FINSEQOP,MATRIX_1,FINSUB_1,MATRIX_2,NAT_1,FVSUM_1,TREES_1,CAT_2,CKB1,CKB2,CKB3,CKB9,CKB10,CKB11,CKB12;
definitions BINOP_1,FINSEQ_2,ALGSTR_0,MATRIX_1,CKB1,CKB2,CKB3,CKB9,CKB11,CKB12;
theorems FINSEQ_1,FINSEQ_2,TARSKI,FUNCT_2,NAT_1,BINOP_1,TREES_1,FUNCT_1,SETWISEO,VECTSP_1,ZFMISC_1,FVSUM_1,SETWOP_2,MATRIX_1,MATRIX_2,FUNCT_3,FINSEQOP,FUNCOP_1,FINSUB_1,FUNCT_5,FINSEQ_3,RLVECT_1,RELAT_1,FINSOP_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,GROUP_1,ORDINAL1,XXREAL_0,CARD_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes FUNCT_2,FINSEQ_2,MATRIX_1,FINSEQ_1,FUNCT_3,SETWISEO,FUNCT_1,BINOP_1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FUNCT_2,FINSET_1,FINSUB_1,XXREAL_0,XREAL_0,NAT_1,STRUCT_0,VECTSP_1,MATRIX_2,FVSUM_1,RELAT_1,CARD_1,FINSEQ_1,FINSEQ_2;
constructors RELAT_2,PARTFUN1,SETWISEO,SQUARE_1,NAT_1,FINSEQOP,FINSOP_1,SETWOP_2,CAT_2,ALGSTR_1,MATRIX_2,FVSUM_1,RELSET_1,FINSEQ_4,CKB1,CKB2,CKB3,CKB9,CKB10,CKB11,CKB12;
requirements NUMERALS,REAL,BOOLE,SUBSET;
begin
reserve i for Nat;
reserve k for Nat;
theorem
Th14: (for K being  add-associative  right_zeroed  right_complementable non empty addLoopStr holds (for p being (FinSequence of K) holds (for i holds ((i in ( dom p ) & (for k holds ((k in ( dom p ) & k <> i) implies ( p . k ) = ( 0. K )))) implies ( Sum p ) = ( p . i )))))
proof
let K being  add-associative  right_zeroed  right_complementable non empty addLoopStr;
let p being (FinSequence of K);
let i;
assume that
A1: i in ( dom p )
and
A2: (for k holds ((k in ( dom p ) & k <> i) implies ( p . k ) = ( 0. K )));
reconsider a = ( p . i ) as (Element of K) by A1,FINSEQ_2:11;
reconsider p1 = ( p | ( Seg i ) ) as (FinSequence of K) by FINSEQ_1:18;
i <> ( 0 ) by A1,FINSEQ_3:25;
then i in ( Seg i ) by FINSEQ_1:3;
then i in ( ( dom p ) /\ ( Seg i ) ) by A1,XBOOLE_0:def 4;
then A3: i in ( dom p1 ) by RELAT_1:61;
then p1 <> ( {} );
then ( len p1 ) <> ( 0 );
then consider p3 being (FinSequence of K),x being (Element of K) such that A4: p1 = ( p3 ^ <* x *> ) by FINSEQ_2:19;
i in ( NAT ) by ORDINAL1:def 12;
then p1 is_a_prefix_of p by TREES_1:def 1;
then consider p2 being FinSequence such that A5: p = ( p1 ^ p2 ) by TREES_1:1;
reconsider p2 as (FinSequence of K) by A5,FINSEQ_1:36;
A6: ( dom p2 ) = ( Seg ( len p2 ) ) by FINSEQ_1:def 3;
A7: (for k holds (k in ( Seg ( len p2 ) ) implies ( p2 . k ) = ( 0. K )))
proof
let k;
A8: (i <= ( len p1 ) & ( len p1 ) <= ( ( len p1 ) + k )) by A3,FINSEQ_3:25,NAT_1:12;
assume k in ( Seg ( len p2 ) );
then A9: k in ( dom p2 ) by FINSEQ_1:def 3;
then ( 0 ) <> k by FINSEQ_3:25;
then A10: i <> ( ( len p1 ) + k ) by A8,XCMPLX_1:3,XXREAL_0:1;
thus ( p2 . k ) = ( p . ( ( len p1 ) + k ) ) by A5,A9,FINSEQ_1:def 7
.= ( 0. K ) by A2,A5,A9,A10,FINSEQ_1:28;
end;
A11:now
let j being Nat;
assume A12: j in ( dom p2 );
hence ( p2 . j ) = ( 0. K ) by A7,A6
.= ( ( ( len p2 ) |-> ( 0. K ) ) . j ) by A6,A12,FINSEQ_2:57;
end;
A13: ( dom p3 ) = ( Seg ( len p3 ) ) by FINSEQ_1:def 3;
i <= ( len p ) by A1,FINSEQ_3:25;
then A14: i = ( len p1 ) by FINSEQ_1:17
.= ( ( len p3 ) + ( len <* x *> ) ) by A4,FINSEQ_1:22
.= ( ( len p3 ) + 1 ) by FINSEQ_1:39;
then A15: x = ( p1 . i ) by A4,FINSEQ_1:42
.= a by A5,A3,FINSEQ_1:def 7;
A16: (for k holds (k in ( Seg ( len p3 ) ) implies ( p3 . k ) = ( 0. K )))
proof
let k;
assume A17: k in ( Seg ( len p3 ) );
then k <= ( len p3 ) by FINSEQ_1:1;
then A18: i <> k by A14,NAT_1:13;
A19: k in ( dom p3 ) by A17,FINSEQ_1:def 3;
then A20: k in ( dom p1 ) by A4,FINSEQ_2:15;
thus ( p3 . k ) = ( p1 . k ) by A4,A19,FINSEQ_1:def 7
.= ( p . k ) by A5,A20,FINSEQ_1:def 7
.= ( 0. K ) by A2,A5,A18,A20,FINSEQ_2:15;
end;
A21:now
let j being Nat;
assume A22: j in ( dom p3 );
hence ( p3 . j ) = ( 0. K ) by A16,A13
.= ( ( ( len p3 ) |-> ( 0. K ) ) . j ) by A13,A22,FINSEQ_2:57;
end;
( len ( ( len p3 ) |-> ( 0. K ) ) ) = ( len p3 ) by CARD_1:def 7;
then A23: p3 = ( ( len p3 ) |-> ( 0. K ) ) by A21,FINSEQ_2:9;
( len ( ( len p2 ) |-> ( 0. K ) ) ) = ( len p2 ) by CARD_1:def 7;
then p2 = ( ( len p2 ) |-> ( 0. K ) ) by A11,FINSEQ_2:9;
then ( Sum p ) = ( ( Sum ( p3 ^ <* x *> ) ) + ( Sum ( ( len p2 ) |-> ( 0. K ) ) ) ) by A5,A4,RLVECT_1:41
.= ( ( Sum ( p3 ^ <* x *> ) ) + ( 0. K ) ) by CKB19:1
.= ( Sum ( p3 ^ <* x *> ) ) by RLVECT_1:4
.= ( ( Sum ( ( len p3 ) |-> ( 0. K ) ) ) + x ) by A23,FVSUM_1:71
.= ( ( 0. K ) + a ) by A15,CKB19:1
.= ( p . i ) by RLVECT_1:4;
hence thesis;
end;
