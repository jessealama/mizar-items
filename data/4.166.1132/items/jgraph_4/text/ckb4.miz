environ
vocabularies NUMBERS,XREAL_0,ORDINAL1,PRE_TOPC,EUCLID,SUPINF_2,COMPLEX1,XXREAL_0,CARD_1,XBOOLE_0,FUNCT_1,TOPMETR,SUBSET_1,ORDINAL2,PARTFUN1,RCOMP_1,REAL_1,TARSKI,STRUCT_0,RELAT_1,ARYTM_3,TOPS_2,ARYTM_1,SQUARE_1,NAT_1,METRIC_1,JORDAN2C,XXREAL_2,PCOMPS_1,MCART_1,FUNCT_4,JGRAPH_4,FUNCT_2;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XREAL_0,NAT_1,REAL_1,COMPLEX1,RELAT_1,FUNCT_1,RELSET_1,FUNCT_2,DOMAIN_1,STRUCT_0,PARTFUN1,TOPMETR,RLVECT_1,EUCLID,COMPTS_1,TOPS_2,METRIC_1,PCOMPS_1,SQUARE_1,TBSP_1,RCOMP_1,PSCOMP_1,PRE_TOPC,JORDAN2C,FUNCT_4,XXREAL_0;
definitions TARSKI,SQUARE_1,EUCLID,STRUCT_0,PCOMPS_1,ALGSTR_0;
theorems TARSKI,RELAT_1,SUBSET_1,FUNCT_1,FUNCT_2,FUNCT_4,TOPS_1,TOPS_2,PARTFUN1,PRE_TOPC,TOPMETR,JORDAN6,EUCLID,JGRAPH_1,SQUARE_1,PSCOMP_1,METRIC_1,JGRAPH_2,GOBOARD6,GOBOARD9,TBSP_1,TOPREAL6,JGRAPH_3,ABSVALUE,JORDAN2C,TSEP_1,XREAL_0,XBOOLE_0,XBOOLE_1,TOPRNS_1,XCMPLX_0,XCMPLX_1,COMPLEX1,XREAL_1,JORDAN2B,XXREAL_0,ORDINAL1,CKB1,CKB2,CKB3;
schemes FUNCT_2,DOMAIN_1,JGRAPH_2,BINOP_2,JGRAPH_3;
registrations XBOOLE_0,RELAT_1,NUMBERS,XXREAL_0,XREAL_0,SQUARE_1,MEMBERED,STRUCT_0,PRE_TOPC,METRIC_1,EUCLID,TOPMETR,TOPREAL1,PSCOMP_1,FUNCT_2,COMPTS_1,TBSP_1,RELSET_1,FUNCT_1;
constructors FUNCT_4,REAL_1,SQUARE_1,BINOP_2,COMPLEX1,RCOMP_1,TOPS_2,COMPTS_1,TBSP_1,MONOID_0,TOPMETR,PSCOMP_1,JORDAN2C,SEQ_1,FUNCSDOM,PCOMPS_1,RELSET_1;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve p for (Point of ( TOP-REAL 2 ));
theorem
Th8: (for f being (Function of ( TOP-REAL 2 ),( TOP-REAL 2 )) holds (((f is  continuous  one-to-one & ( rng f ) = ( [#] ( TOP-REAL 2 ) )) & (for p2 being (Point of ( TOP-REAL 2 )) holds (ex K being non  empty  compact (Subset of ( TOP-REAL 2 )) st (K = ( f .: K ) & (ex V2 being (Subset of ( TOP-REAL 2 )) st (((p2 in V2 & V2 is  open) & V2 c= K) & ( f . p2 ) in V2)))))) implies f is  being_homeomorphism))
proof
let f being (Function of ( TOP-REAL 2 ),( TOP-REAL 2 ));
assume that
A1: f is  continuous  one-to-one
and
A2: ( rng f ) = ( [#] ( TOP-REAL 2 ) )
and
A3: (for p2 being (Point of ( TOP-REAL 2 )) holds (ex K being non  empty  compact (Subset of ( TOP-REAL 2 )) st (K = ( f .: K ) & (ex V2 being (Subset of ( TOP-REAL 2 )) st (((p2 in V2 & V2 is  open) & V2 c= K) & ( f . p2 ) in V2)))));
reconsider g = ( (f qua Function) " ) as (Function of ( TOP-REAL 2 ),( TOP-REAL 2 )) by A1,A2,FUNCT_2:25;
A4: ( dom f ) = (the carrier of ( TOP-REAL 2 )) by FUNCT_2:def 1;
(for p being (Point of ( TOP-REAL 2 )) holds (for V being (Subset of ( TOP-REAL 2 )) holds ((( g . p ) in V & V is  open) implies (ex W being (Subset of ( TOP-REAL 2 )) st ((p in W & W is  open) & ( g .: W ) c= V)))))
proof
let p being (Point of ( TOP-REAL 2 ));
let V being (Subset of ( TOP-REAL 2 ));
assume that
A5: ( g . p ) in V
and
A6: V is  open;
consider K being non  empty  compact (Subset of ( TOP-REAL 2 )) such that A7: K = ( f .: K ) and A8: (ex V2 being (Subset of ( TOP-REAL 2 )) st (((( g . p ) in V2 & V2 is  open) & V2 c= K) & ( f . ( g . p ) ) in V2)) by A3;
consider V2 being (Subset of ( TOP-REAL 2 )) such that A9: ( g . p ) in V2 and A10: V2 is  open and A11: V2 c= K and A12: ( f . ( g . p ) ) in V2 by A8;
A13: ( dom ( f | K ) ) = ( ( dom f ) /\ K ) by RELAT_1:61
.= K by A4,XBOOLE_1:28;
A14: ( g . p ) in ( V /\ V2 ) by A5,A9,XBOOLE_0:def 4;
(the carrier of ( ( TOP-REAL 2 ) | K )) = K by PRE_TOPC:8;
then reconsider R = ( ( V /\ V2 ) /\ K ) as (Subset of ( ( TOP-REAL 2 ) | K )) by XBOOLE_1:17;
A15: R = ( ( V /\ V2 ) /\ ( [#] ( ( TOP-REAL 2 ) | K ) ) ) by PRE_TOPC:def 5;
( V /\ V2 ) is  open by A6,A10,TOPS_1:11;
then A16: R is  open by A15,TOPS_2:24;
A17: p in V2 by A1,A2,A12,FUNCT_1:35;
then reconsider q = p as (Point of ( ( TOP-REAL 2 ) | K )) by A11,PRE_TOPC:8;
A18: ( rng ( f | K ) ) c= (the carrier of ( TOP-REAL 2 ));
( dom ( f | K ) ) = ( ( dom f ) /\ K ) by RELAT_1:61
.= ( (the carrier of ( TOP-REAL 2 )) /\ K ) by FUNCT_2:def 1
.= K by XBOOLE_1:28
.= (the carrier of ( ( TOP-REAL 2 ) | K )) by PRE_TOPC:8;
then reconsider h = ( f | K ) as (Function of ( ( TOP-REAL 2 ) | K ),( TOP-REAL 2 )) by A18,FUNCT_2:2;
A19: h is  one-to-one by A1,FUNCT_1:52;
A20: K = ( ( f | K ) .: K ) by A7,RELAT_1:129
.= ( rng ( f | K ) ) by A13,RELAT_1:113;
then consider f1 being (Function of ( ( TOP-REAL 2 ) | K ),( ( TOP-REAL 2 ) | K )) such that A21: h = f1 and A22: f1 is  being_homeomorphism by A1,A19,JGRAPH_1:46,TOPMETR:7;
A23: ( rng f1 ) = ( [#] ( ( TOP-REAL 2 ) | K ) ) by A22,TOPS_2:def 5;
B1: f1 is  onto by A23,FUNCT_2:def 3;
(( dom ( (f1 qua Function) " ) ) = ( rng f1 ) & ( rng ( (f1 qua Function) " ) ) = ( dom f1 )) by A19,A21,FUNCT_1:33;
then reconsider g1 = ( (f1 qua Function) " ) as (Function of ( ( TOP-REAL 2 ) | K ),( ( TOP-REAL 2 ) | K )) by A23,FUNCT_2:2;
g1 = ( f1 " ) by A19,A21,A23,B1,TOPS_2:def 4;
then A24: g1 is  continuous by A22,TOPS_2:def 5;
A25: ( f1 . ( g . p ) ) = ( f . ( g . p ) ) by A9,A11,A21,FUNCT_1:49
.= p by A1,A2,FUNCT_1:35;
A26: ( dom f1 ) = ( ( dom f ) /\ K ) by A21,RELAT_1:61
.= K by A4,XBOOLE_1:28;
( rng f1 ) = ( dom ( (f1 qua Function) " ) ) by A19,A21,FUNCT_1:33;
then A27: ( ( (f1 qua Function) " ) . p ) in ( rng ( (f1 qua Function) " ) ) by A11,A17,A20,A21,FUNCT_1:3;
A28: ( rng ( (f1 qua Function) " ) ) = ( dom f1 ) by A19,A21,FUNCT_1:33;
( f1 . ( ( (f1 qua Function) " ) . p ) ) = p by A11,A17,A19,A20,A21,FUNCT_1:35;
then ( ( (f1 qua Function) " ) . p ) = ( g . p ) by A8,A19,A21,A25,A26,A28,A27,FUNCT_1:def 4;
then ( ( (f1 qua Function) " ) . p ) in R by A9,A11,A14,XBOOLE_0:def 4;
then consider W3 being (Subset of ( ( TOP-REAL 2 ) | K )) such that A29: q in W3 and A30: W3 is  open and A31: ( ( (f1 qua Function) " ) .: W3 ) c= R by A16,A24,JGRAPH_2:10;
R = ( V /\ ( V2 /\ K ) ) by XBOOLE_1:16;
then A32: R c= V by XBOOLE_1:17;
consider W5 being (Subset of ( TOP-REAL 2 )) such that A33: W5 is  open and A34: W3 = ( W5 /\ ( [#] ( ( TOP-REAL 2 ) | K ) ) ) by A30,TOPS_2:24;
reconsider W4 = ( W5 /\ V2 ) as (Subset of ( TOP-REAL 2 ));
p in W5 by A29,A34,XBOOLE_0:def 4;
then A35: p in W4 by A17,XBOOLE_0:def 4;
A36: ( dom f1 ) = (the carrier of ( ( TOP-REAL 2 ) | K )) by FUNCT_2:def 1;
A37: ( ( (f qua Function) " ) .: W3 ) c= R
proof
let y being set;
assume y in ( ( (f qua Function) " ) .: W3 );
then consider x being set such that A38: x in ( dom ( (f qua Function) " ) ) and A39: x in W3 and A40: y = ( ( (f qua Function) " ) . x ) by FUNCT_1:def 6;
A41: x in ( rng f ) by A1,A38,FUNCT_1:33;
then A42: y in ( dom f ) by A1,A40,FUNCT_1:32;
A43: ( f . y ) = x by A1,A40,A41,FUNCT_1:32;
(the carrier of ( ( TOP-REAL 2 ) | K )) = K by PRE_TOPC:8;
then (ex z2 being set st ((z2 in ( dom f ) & z2 in K) & ( f . y ) = ( f . z2 ))) by A7,A39,A43,FUNCT_1:def 6;
then A44: y in K by A1,A42,FUNCT_1:def 4;
then A45: y in (the carrier of ( ( TOP-REAL 2 ) | K )) by PRE_TOPC:8;
A46: ( dom ( (f1 qua Function) " ) ) = (the carrier of ( ( TOP-REAL 2 ) | K )) by A19,A21,A23,FUNCT_1:33;
( f1 . y ) = x by A21,A43,A44,FUNCT_1:49;
then y = ( ( (f1 qua Function) " ) . x ) by A19,A21,A36,A45,FUNCT_1:32;
then y in ( ( (f1 qua Function) " ) .: W3 ) by A39,A46,FUNCT_1:def 6;
hence thesis by A31;
end;
W4 = ( W5 /\ ( V2 /\ K ) ) by A11,XBOOLE_1:28
.= ( ( W5 /\ K ) /\ V2 ) by XBOOLE_1:16
.= ( W3 /\ V2 ) by A34,PRE_TOPC:def 5;
then A47: ( g .: W4 ) c= ( ( g .: W3 ) /\ ( g .: V2 ) ) by RELAT_1:121;
( ( g .: W3 ) /\ ( g .: V2 ) ) c= ( g .: W3 ) by XBOOLE_1:17;
then ( g .: W4 ) c= ( g .: W3 ) by A47,XBOOLE_1:1;
then A48: ( g .: W4 ) c= R by A37,XBOOLE_1:1;
W4 is  open by A10,A33,TOPS_1:11;
hence thesis by A35,A48,A32,XBOOLE_1:1;
end;
then A49: g is  continuous by JGRAPH_2:10;
f is  onto by A2,FUNCT_2:def 3;
then g = ( f " ) by A1,A2,TOPS_2:def 4;
hence thesis by A1,A2,A4,A49,TOPS_2:def 5;
end;
