environ
vocabularies XBOOLE_0,ORDERS_2,PARTFUN1,STRUCT_0,FINSEQ_1,RELAT_1,TARSKI,RELAT_2,SUBSET_1,XXREAL_0,LATTICE3,WAYBEL_0,EQREL_1,LATTICES;
notations XBOOLE_0,TARSKI,SUBSET_1,RELSET_1,RELAT_2,STRUCT_0,ORDERS_2,YELLOW_0,WAYBEL_0,LATTICE3,CKB2,CKB3;
definitions RELAT_2,CKB2,CKB3;
theorems ZFMISC_1,RELAT_1,RELSET_1,ORDERS_2,RELAT_2,XBOOLE_0,XBOOLE_1,WAYBEL_0,YELLOW_0,YELLOW_5,CKB1,CKB2,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28;
registrations XBOOLE_0,RELSET_1,STRUCT_0,WAYBEL_0,CKB4,CKB5;
constructors LATTICE3,WAYBEL_0,RELSET_1,CKB2,CKB3;
requirements SUBSET,BOOLE;
begin
theorem
(for R,S being RelStr holds (((((( (the carrier of R) /\ (the carrier of S) ) is  upper  upper (Subset of R) & ( (the carrier of R) /\ (the carrier of S) ) is  lower  lower (Subset of S)) & R tolerates S) & R is  transitive) & S is  transitive) implies ( R [*] S ) is  transitive))
proof
let R being RelStr,S being RelStr;
set X = (the carrier of ( R [*] S ));
set F = (the InternalRel of ( R [*] S ));
assume that
A1: ( (the carrier of R) /\ (the carrier of S) ) is  upper  upper (Subset of R)
and
A2: ( (the carrier of R) /\ (the carrier of S) ) is  lower  lower (Subset of S)
and
A3: R tolerates S
and
A4: R is  transitive
and
A5: S is  transitive;
A6: (the InternalRel of S) is_transitive_in (the carrier of S) by A5,ORDERS_2:def 3;
A7: (the InternalRel of R) is_transitive_in (the carrier of R) by A4,ORDERS_2:def 3;
F is_transitive_in X
proof
let x being set,y being set,z being set;
assume that
A8: (x in X & y in X)
and
A9: z in X
and
A10: [ x,y ] in F
and
A11: [ y,z ] in F;
A12: (x in ( (the carrier of R) \/ (the carrier of S) ) & y in ( (the carrier of R) \/ (the carrier of S) )) by A8,CKB3:def 1;
A13: z in ( (the carrier of R) \/ (the carrier of S) ) by A9,CKB3:def 1;
per cases  by A12,A13,XBOOLE_0:def 3;
suppose A14: ((x in (the carrier of R) & y in (the carrier of R)) & z in (the carrier of R));

then ([ x,y ] in (the InternalRel of R) & [ y,z ] in (the InternalRel of R)) by A3,A4,A10,A11,CKB8:1;
then [ x,z ] in (the InternalRel of R) by A7,A14,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose A15: ((x in (the carrier of R) & y in (the carrier of R)) & z in (the carrier of S));

then A16: [ x,y ] in (the InternalRel of R) by A3,A4,A10,CKB8:1;
[ y,z ] in ( ( (the InternalRel of R) \/ (the InternalRel of S) ) \/ ( (the InternalRel of R) * (the InternalRel of S) ) ) by A11,CKB3:def 1;
then A17: ([ y,z ] in ( (the InternalRel of R) \/ (the InternalRel of S) ) or [ y,z ] in ( (the InternalRel of R) * (the InternalRel of S) )) by XBOOLE_0:def 3;
now
per cases  by A17,XBOOLE_0:def 3;
suppose A18: [ y,z ] in (the InternalRel of R);

then z in (the carrier of R) by ZFMISC_1:87;
then [ x,z ] in (the InternalRel of R) by A7,A15,A16,A18,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose [ y,z ] in (the InternalRel of S);

then [ x,z ] in ( (the InternalRel of R) * (the InternalRel of S) ) by A16,RELAT_1:def 8;
then [ x,z ] in ( ( (the InternalRel of R) \/ (the InternalRel of S) ) \/ ( (the InternalRel of R) * (the InternalRel of S) ) ) by XBOOLE_0:def 3;
hence thesis by CKB3:def 1;
end;
suppose [ y,z ] in ( (the InternalRel of R) * (the InternalRel of S) );

then consider a being set such that A19: [ y,a ] in (the InternalRel of R) and A20: [ a,z ] in (the InternalRel of S) by RELAT_1:def 8;
a in (the carrier of R) by A19,ZFMISC_1:87;
then [ x,a ] in (the InternalRel of R) by A7,A15,A16,A19,RELAT_2:def 8;
then [ x,z ] in ( (the InternalRel of R) * (the InternalRel of S) ) by A20,RELAT_1:def 8;
then [ x,z ] in ( ( (the InternalRel of R) \/ (the InternalRel of S) ) \/ ( (the InternalRel of R) * (the InternalRel of S) ) ) by XBOOLE_0:def 3;
hence thesis by CKB3:def 1;
end;
end;
hence thesis;
end;
suppose A21: ((x in (the carrier of R) & y in (the carrier of S)) & z in (the carrier of R));

then A22: y in (the carrier of R) by A2,A11,CKB25:1;
then ([ x,y ] in (the InternalRel of R) & [ y,z ] in (the InternalRel of R)) by A3,A4,A10,A11,A21,CKB8:1;
then [ x,z ] in (the InternalRel of R) by A7,A21,A22,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose A23: ((x in (the carrier of S) & y in (the carrier of R)) & z in (the carrier of R));

then A24: [ y,z ] in (the InternalRel of R) by A3,A4,A11,CKB8:1;
A25: x in (the carrier of R) by A2,A10,A23,CKB25:1;
then [ x,y ] in (the InternalRel of R) by A3,A4,A10,A23,CKB8:1;
then [ x,z ] in (the InternalRel of R) by A7,A23,A25,A24,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose A26: ((x in (the carrier of S) & y in (the carrier of S)) & z in (the carrier of R));

then A27: [ x,y ] in (the InternalRel of S) by A3,A5,A10,CKB9:1;
A28: z in (the carrier of S) by A1,A11,A26,CKB21:1;
then [ y,z ] in (the InternalRel of S) by A3,A5,A11,A26,CKB9:1;
then [ x,z ] in (the InternalRel of S) by A6,A26,A27,A28,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose A29: ((x in (the carrier of S) & y in (the carrier of S)) & z in (the carrier of S));

then ([ x,y ] in (the InternalRel of S) & [ y,z ] in (the InternalRel of S)) by A3,A5,A10,A11,CKB9:1;
then [ x,z ] in (the InternalRel of S) by A6,A29,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose A30: ((x in (the carrier of R) & y in (the carrier of S)) & z in (the carrier of S));

then A31: [ y,z ] in (the InternalRel of S) by A3,A5,A11,CKB9:1;
[ x,y ] in ( ( (the InternalRel of R) \/ (the InternalRel of S) ) \/ ( (the InternalRel of R) * (the InternalRel of S) ) ) by A10,CKB3:def 1;
then A32: ([ x,y ] in ( (the InternalRel of R) \/ (the InternalRel of S) ) or [ x,y ] in ( (the InternalRel of R) * (the InternalRel of S) )) by XBOOLE_0:def 3;
now
per cases  by A32,XBOOLE_0:def 3;
suppose [ x,y ] in (the InternalRel of R);

then [ x,z ] in ( (the InternalRel of R) * (the InternalRel of S) ) by A31,RELAT_1:def 8;
then [ x,z ] in ( ( (the InternalRel of R) \/ (the InternalRel of S) ) \/ ( (the InternalRel of R) * (the InternalRel of S) ) ) by XBOOLE_0:def 3;
hence thesis by CKB3:def 1;
end;
suppose A33: [ x,y ] in (the InternalRel of S);

then x in (the carrier of S) by ZFMISC_1:87;
then [ x,z ] in (the InternalRel of S) by A6,A30,A31,A33,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
suppose [ x,y ] in ( (the InternalRel of R) * (the InternalRel of S) );

then consider a being set such that A34: [ x,a ] in (the InternalRel of R) and A35: [ a,y ] in (the InternalRel of S) by RELAT_1:def 8;
a in (the carrier of S) by A35,ZFMISC_1:87;
then [ a,z ] in (the InternalRel of S) by A6,A30,A31,A35,RELAT_2:def 8;
then [ x,z ] in ( (the InternalRel of R) * (the InternalRel of S) ) by A34,RELAT_1:def 8;
then [ x,z ] in ( ( (the InternalRel of R) \/ (the InternalRel of S) ) \/ ( (the InternalRel of R) * (the InternalRel of S) ) ) by XBOOLE_0:def 3;
hence thesis by CKB3:def 1;
end;
end;
hence thesis;
end;
suppose A36: ((x in (the carrier of S) & y in (the carrier of R)) & z in (the carrier of S));

then A37: y in (the carrier of S) by A1,A10,CKB21:1;
then ([ x,y ] in (the InternalRel of S) & [ y,z ] in (the InternalRel of S)) by A3,A5,A10,A11,A36,CKB9:1;
then [ x,z ] in (the InternalRel of S) by A6,A36,A37,RELAT_2:def 8;
hence thesis by CKB10:1;
end;
end;
hence thesis by ORDERS_2:def 3;
end;
