environ
vocabularies NUMBERS,ORDINAL1,XBOOLE_0,ALGSTR_0,WELLORD1,QUOFIELD,RELAT_1,FUNCT_1,SUBSET_1,STRUCT_0,ORDINAL2,TARSKI,ORDINAL3,PRE_POLY,ARYTM_3,CARD_1,PBOOLE,FINSET_1,VALUED_0,FUNCOP_1,RLVECT_1,LATTICES,BINOP_1,POLYNOM1,FINSEQ_1,CARD_3,PARTFUN1,FINSEQ_2,NAT_1,VECTSP_1,ZFMISC_1,GROUP_1,SUPINF_2,XXREAL_0,FINSEQ_3,ORDINAL4,ARYTM_1,ORDERS_1,MSSUBFAM,POLYNOM6;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,XCMPLX_0,VALUED_0,VECTSP_1,RELAT_1,FUNCT_1,PARTFUN1,FUNCT_2,FUNCOP_1,POLYNOM1,STRUCT_0,ALGSTR_0,NAT_1,NAT_D,ORDERS_1,PBOOLE,RLVECT_1,FINSET_1,FINSEQ_1,FINSEQ_2,ORDINAL1,ORDINAL2,ORDINAL3,GROUP_1,QUOFIELD,GRCAT_1,WSIERP_1,PRE_POLY,FVSUM_1,POLYNOM3,GROUP_6,XXREAL_0,MATRLIN,CKB1,CKB2,CKB7;
definitions VECTSP_1,QUOFIELD,GRCAT_1,FUNCT_1,TARSKI,XBOOLE_0,STRUCT_0,VALUED_0,CKB7;
theorems POLYNOM1,TOPGRP_1,FUNCT_2,PBOOLE,FUNCT_1,ORDINAL3,ORDINAL1,ORDINAL2,FINSEQ_3,FINSEQ_2,FVSUM_1,FINSEQ_1,RELAT_1,FUNCOP_1,POLYALG1,FINSEQ_5,VECTSP_1,FINSEQ_4,FINSET_1,TARSKI,POLYNOM2,MATRLIN,RLVECT_1,NAT_1,SUBSET_1,CARD_3,POLYNOM3,ORDERS_1,RVSUM_1,XBOOLE_0,XBOOLE_1,XREAL_1,GROUP_6,XXREAL_0,GROUP_1,PARTFUN1,NAT_D,PRE_POLY,CKB3,CKB6,CKB7,CKB8,CKB9,CKB10;
schemes PBOOLE,FUNCT_2,FRAENKEL,FUNCT_1,RECDEF_1;
registrations FUNCT_1,ORDINAL1,RELSET_1,FUNCOP_1,FINSET_1,XREAL_0,FINSEQ_1,FINSEQ_2,STRUCT_0,VECTSP_1,QUOFIELD,PRE_POLY,POLYNOM1,POLYNOM2,VALUED_0,CARD_1,CKB4,CKB5;
constructors ORDINAL3,XXREAL_0,BINARITH,WSIERP_1,GRCAT_1,GROUP_6,TRIANG_1,QUOFIELD,POLYNOM1,POLYNOM3,NAT_D,RELSET_1,MATRLIN,FVSUM_1,VFUNCT_1,CKB2,CKB7;
requirements BOOLE,SUBSET,NUMERALS,REAL;
begin
reserve o1 for Ordinal;
reserve o2 for Ordinal;
theorem
Th6: (for c being (Element of ( Bags ( o1 +^ o2 ) )) holds (ex c1 being (Element of ( Bags o1 )) st (ex c2 being (Element of ( Bags o2 )) st c = ( c1 +^ c2 ))))
proof
let c being (Element of ( Bags ( o1 +^ o2 ) ));
per cases ;
suppose A1: o2 is  empty;

then reconsider c2 = ( {} ) as (Element of ( Bags o2 )) by PRE_POLY:51,TARSKI:def 1;
reconsider c1 = c as (Element of ( Bags o1 )) by A1,ORDINAL2:27;
take c1;
take c2;
thus thesis by A1,CKB8:1;
end;
suppose A2: o2 is non empty;

then reconsider o29 = o2 as non empty Ordinal;
A3: ( support ( c | o1 ) ) c= ( support c )
proof
let x being set;
assume x in ( support ( c | o1 ) );
then A4: ( ( c | o1 ) . x ) <> ( 0 ) by PRE_POLY:def 7;
then x in ( dom ( c | o1 ) ) by FUNCT_1:def 2;
then [ x,( ( c | o1 ) . x ) ] in ( c | o1 ) by FUNCT_1:1;
then [ x,( ( c | o1 ) . x ) ] in c by RELAT_1:def 11;
then ( ( c | o1 ) . x ) = ( c . x ) by FUNCT_1:1;
hence thesis by A4,PRE_POLY:def 7;
end;
( dom c ) = ( o1 +^ o2 ) by PARTFUN1:def 2;
then o1 c= ( dom c ) by ORDINAL3:24;
then ( dom ( c | o1 ) ) = o1 by RELAT_1:62;
then ( c | o1 ) is (bag of o1) by A3,PARTFUN1:def 2,PRE_POLY:def 8,RELAT_1:def 18;
then reconsider c1 = ( c | o1 ) as (Element of ( Bags o1 )) by PRE_POLY:def 12;
deffunc F((Element of ( o1 +^ o29 ))) = ( $1 -^ o1 );
defpred P[ set,set ]
 means
(for x1 being (Element of o2) holds (x1 = $1 implies $2 = ( c . ( o1 +^ x1 ) )));
take c1;
set B = { ( o9 -^ o1 ) where o9 is (Element of ( o1 +^ o29 )): (o1 c= o9 & o9 in ( support c )) };
set C = { F(o9) where o9 is (Element of ( o1 +^ o29 )): o9 in ( support c ) };
A5: B c= C
proof
let x being set;
assume x in B;
then (ex o9 being (Element of ( o1 +^ o29 )) st ((x = ( o9 -^ o1 ) & o1 c= o9) & o9 in ( support c )));
hence thesis;
end;
A6: (for i being set holds (i in o2 implies (ex j being set st P[ i,j ])))
proof
let i being set;
assume i in o2;
then reconsider x1 = i as (Element of o2);
take ( c . ( o1 +^ x1 ) );
thus thesis;
end;
consider f being (ManySortedSet of o2) such that A7: (for i being set holds (i in o2 implies P[ i,( f . i ) ])) from PBOOLE:sch 3(A6);
A8: ( support f ) c= B
proof
let x being set;
assume x in ( support f );
then A9: ( f . x ) <> ( 0 ) by PRE_POLY:def 7;
then x in ( dom f ) by FUNCT_1:def 2;
then reconsider o9 = x as (Element of o29) by PARTFUN1:def 2;
( c . ( o1 +^ o9 ) ) <> ( 0 ) by A7,A9;
then A10: ( o1 +^ o9 ) in ( support c ) by PRE_POLY:def 7;
reconsider o99 = ( o1 +^ o9 ) as (Element of ( o1 +^ o29 )) by ORDINAL2:32;
(o9 = ( o99 -^ o1 ) & o1 c= o99) by ORDINAL3:24,ORDINAL3:52;
hence thesis by A10;
end;
A11: f is  natural-valued
proof
let x being set;
assume A12: x in ( dom f );
then reconsider o = x as (Element of o2) by PARTFUN1:def 2;
x in o2 by A12,PARTFUN1:def 2;
then ( f . x ) = ( c . ( o1 +^ o ) ) by A7;
hence thesis;
end;
A13: ( support c ) is  finite;
C is  finite from FRAENKEL:sch 21(A13);
then f is  finite-support by A5,A8,PRE_POLY:def 8;
then reconsider c2 = f as (Element of ( Bags o2 )) by A11,PRE_POLY:def 12;
take c2;
now
let i being set;
assume A14: i in ( o1 +^ o2 );
per cases  by A14,XBOOLE_0:def 5;
suppose A15: i in o1;

then reconsider i9 = i as Ordinal;
( dom c1 ) = o1 by PARTFUN1:def 2;
then ( c . i9 ) = ( c1 . i9 ) by A15,FUNCT_1:47
.= ( ( c1 +^ c2 ) . i9 ) by A15,CKB7:def 1;
hence ( c . i ) = ( ( c1 +^ c2 ) . i );
end;
suppose A16: i in ( ( o1 +^ o2 ) \ o1 );

then reconsider i9 = i as Ordinal;
A17: ( i9 -^ o1 ) in o2 by A2,A16,ORDINAL3:60;
(not i9 in o1) by A16,XBOOLE_0:def 5;
then o1 c= i9 by ORDINAL1:16;
then ( c . i9 ) = ( c . ( o1 +^ ( i9 -^ o1 ) ) ) by ORDINAL3:def 5
.= ( c2 . ( i9 -^ o1 ) ) by A7,A17
.= ( ( c1 +^ c2 ) . i9 ) by A16,CKB7:def 1;
hence ( c . i ) = ( ( c1 +^ c2 ) . i );
end;
end;
hence thesis by PBOOLE:3;
end;
end;
