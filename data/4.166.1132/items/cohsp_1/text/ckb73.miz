environ
vocabularies XBOOLE_0,FUNCT_1,SUBSET_1,TARSKI,COH_SP,FINSET_1,RELAT_1,CLASSES1,ZFMISC_1,FINSUB_1,NUMBERS,CARD_1,ARYTM_3,ARYTM_1,MSSUBFAM,FUNCOP_1,PBOOLE,MCART_1,CARD_3,XBOOLEAN,FINSEQ_1,LATTICES,EQREL_1,COHSP_1;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,REAL_1,NAT_1,MCART_1,RELAT_1,FUNCT_1,FINSEQ_1,FINSET_1,FINSUB_1,CLASSES1,COH_SP,PBOOLE,CARD_3,PARTFUN1,FUNCT_2,FUNCOP_1,CKB2,CKB4,CKB5,CKB16,CKB17,CKB32,CKB34,CKB35,CKB40,CKB41,CKB43,CKB45,CKB46,CKB47,CKB48,CKB55,CKB56,CKB57;
definitions XBOOLE_0,TARSKI,RELAT_1,COH_SP,CLASSES1,FINSUB_1,CKB2,CKB4,CKB5,CKB16,CKB17,CKB35,CKB41,CKB43,CKB45,CKB46,CKB47,CKB48,CKB55,CKB56,CKB57;
theorems TARSKI,ENUMSET1,ZFMISC_1,RELAT_1,COH_SP,FUNCT_1,FUNCT_2,FINSEQ_1,FINSET_1,FINSUB_1,FUNCOP_1,MCART_1,CARD_1,CLASSES1,CARD_2,CARD_3,FUNCT_5,CARD_5,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,PARTFUN1,CKB1,CKB2,CKB4,CKB5,CKB6,CKB7,CKB8,CKB13,CKB16,CKB17,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB29,CKB33,CKB35,CKB37,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB51,CKB52,CKB55,CKB56,CKB57,CKB69,CKB70,CKB71,CKB72;
schemes NAT_1,SUBSET_1,FUNCT_1,FINSET_1,CARD_3,XBOOLE_0,CARD_2,CKB14;
registrations XBOOLE_0,SUBSET_1,RELSET_1,PARTFUN1,FINSET_1,FINSUB_1,XREAL_0,NAT_1,FINSEQ_1,ORDINAL1,CARD_1,RELAT_1,CKB3,CKB9,CKB10,CKB11,CKB12,CKB15,CKB18,CKB19,CKB27,CKB28,CKB30,CKB31,CKB36,CKB38,CKB39,CKB49,CKB50,CKB53,CKB54,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68;
constructors FINSUB_1,REAL_1,NAT_1,CARD_3,PBOOLE,BORSUK_1,COH_SP,CKB4,CKB5,CKB16,CKB17,CKB32,CKB35,CKB40,CKB41,CKB43,CKB45,CKB46,CKB47,CKB48,CKB55,CKB56,CKB57;
requirements NUMERALS,BOOLE,SUBSET;
begin
theorem
Th24: (for f being Function holds (( dom f ) is  subset-closed  d.union-closed implies (f is  U-linear iff (f is  c=-monotone & (for a,y being set holds ((a in ( dom f ) & y in ( f . a )) implies (ex x being set st ((x in a & y in ( f . { x } )) & (for b being set holds ((b c= a & y in ( f . b )) implies x in b))))))))))
proof
let f being Function;
assume A1: ( dom f ) is  subset-closed  d.union-closed;
then reconsider C = ( dom f ) as  subset-closed  d.union-closed set;
hereby
A2: ( {} ) is (Subset of ( dom f )) by XBOOLE_1:2;
assume A3: f is  U-linear;
hence f is  c=-monotone;
let a being set;
let y being set;
assume that
A4: a in ( dom f )
and
A5: y in ( f . a );
consider b being set such that b is  finite and A6: b c= a and A7: y in ( f . b ) and A8: (for c being set holds ((c c= a & y in ( f . c )) implies b c= c)) by A1,A3,A4,A5,CKB72:1;
A9: ( dom f ) = C;
( {} ) c= a by XBOOLE_1:2;
then ( {} ) in ( dom f ) by A4,A9,CLASSES1:def 1;
then ( f . ( {} ) ) = ( union ( f .: ( {} ) ) ) by A3,A2,CKB45:def 1,ZFMISC_1:2
.= ( {} ) by RELAT_1:116,ZFMISC_1:2;
then reconsider b as non  empty set by A7;
reconsider A = { { x } where x is (Element of b): (not contradiction) } as set;
A10: b in ( dom f ) by A4,A6,A9,CLASSES1:def 1;
A11: A c= ( dom f )
proof
let X being set;
assume X in A;
then (ex x being (Element of b) st X = { x });
then X c= b by ZFMISC_1:31;
hence thesis by A9,A10,CLASSES1:def 1;
end;
now
let X being set;
assume X in A;
then (ex x being (Element of b) st X = { x });
hence X c= b by ZFMISC_1:31;
end;
then ( union A ) c= b by ZFMISC_1:76;
then A12: ( union A ) in ( dom f ) by A9,A10,CLASSES1:def 1;
reconsider A as (Subset of ( dom f )) by A11;
b c= ( union A )
proof
let x being set;
assume x in b;
then { x } in A;
then { x } c= ( union A ) by ZFMISC_1:74;
hence thesis by ZFMISC_1:31;
end;
then A13: ( f . b ) c= ( f . ( union A ) ) by A3,A10,A12,CKB47:def 1;
( f . ( union A ) ) = ( union ( f .: A ) ) by A3,A12,CKB45:def 1;
then consider Y being set such that A14: y in Y and A15: Y in ( f .: A ) by A7,A13,TARSKI:def 4;
consider X being set such that X in ( dom f ) and A16: X in A and A17: Y = ( f . X ) by A15,FUNCT_1:def 6;
consider x being (Element of b) such that A18: X = { x } by A16;
reconsider x as set;
take x;
x in b;
hence (x in a & y in ( f . { x } )) by A6,A14,A17,A18;
let c being set;
assume (c c= a & y in ( f . c ));
then (x in b & b c= c) by A8;
hence x in c;
end;
assume that
A19: f is  c=-monotone
and
A20: (for a,y being set holds ((a in ( dom f ) & y in ( f . a )) implies (ex x being set st ((x in a & y in ( f . { x } )) & (for b being set holds ((b c= a & y in ( f . b )) implies x in b))))));
now
let a being set;
let y being set;
assume (a in ( dom f ) & y in ( f . a ));
then consider x being set such that A21: (x in a & y in ( f . { x } )) and A22: (for b being set holds ((b c= a & y in ( f . b )) implies x in b)) by A20;
reconsider b = { x } as set;
take b;
thus ((b is  finite & b c= a) & y in ( f . b )) by A21,ZFMISC_1:31;
let c being set;
assume (c c= a & y in ( f . c ));
then x in c by A22;
hence b c= c by ZFMISC_1:31;
end;
hence f is  U-stable by A1,A19,CKB72:1;
thus f is  union-distributive
proof
let A being (Subset of ( dom f ));
assume that
A23: ( union A ) in ( dom f );
thus ( f . ( union A ) ) c= ( union ( f .: A ) )
proof
let y being set;
assume y in ( f . ( union A ) );
then consider x being set such that A24: x in ( union A ) and A25: y in ( f . { x } ) and (for b being set holds ((b c= ( union A ) & y in ( f . b )) implies x in b)) by A20,A23;
consider a being set such that A26: x in a and A27: a in A by A24,TARSKI:def 4;
A28: { x } c= a by A26,ZFMISC_1:31;
then { x } in C by A27,CLASSES1:def 1;
then A29: ( f . { x } ) c= ( f . a ) by A19,A27,A28,CKB47:def 1;
( f . a ) in ( f .: A ) by A27,FUNCT_1:def 6;
hence thesis by A25,A29,TARSKI:def 4;
end;

now
let X being set;
assume X in ( f .: A );
then consider a being set such that A30: a in ( dom f ) and A31: a in A and A32: X = ( f . a ) by FUNCT_1:def 6;
a c= ( union A ) by A31,ZFMISC_1:74;
hence X c= ( f . ( union A ) ) by A19,A23,A30,A32,CKB47:def 1;
end;
hence thesis by ZFMISC_1:76;
end;

end;
