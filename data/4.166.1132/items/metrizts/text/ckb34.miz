environ
vocabularies NUMBERS,PRE_TOPC,SUBSET_1,SETFAM_1,PCOMPS_1,CARD_1,FINSET_1,T_0TOPSP,RELAT_1,XBOOLE_0,FUNCT_1,RCOMP_1,ORDINAL2,TOPS_2,WAYBEL23,TARSKI,RLVECT_3,STRUCT_0,ZFMISC_1,XXREAL_0,ARYTM_3,METRIC_1,CARD_5,NAGATA_1,TOPREAL7,CARD_2,MCART_1,ORDINAL1,WEIERSTR,TOPMETR,XREAL_0,ARYTM_1,COMPLEX1,XXREAL_1,TOPGEN_4,NAT_1,NEWTON,CARD_3,NATTRA_1,TOPGEN_1,TOPS_1,REAL_1,FUNCOP_1,EUCLID,FINSEQ_2,FINSEQ_1,CONNSP_1,METRIZTS,KURATO_2;
notations BINOP_1,TOPMETR,CARD_1,CANTOR_1,COMPLEX1,FINSET_1,TARSKI,XBOOLE_0,RELAT_1,SUBSET_1,ORDINAL1,NUMBERS,ZFMISC_1,XREAL_0,REAL_1,DOMAIN_1,METRIC_1,PCOMPS_1,CARD_3,KURATO_0,KURATO_2,WAYBEL23,TOPGEN_1,FUNCOP_1,XCMPLX_0,TOPS_1,CARD_2,NEWTON,BORSUK_1,NAGATA_1,TEX_2,TOPGEN_4,RCOMP_1,WEIERSTR,TOPREAL7,ORDERS_4,XXREAL_0,FUNCT_1,RELSET_1,FUNCT_2,FUNCT_3,NAT_1,FINSEQ_1,SETFAM_1,STRUCT_0,PRE_TOPC,CONNSP_1,TOPS_2,BORSUK_3,EUCLID,FINSEQ_2,CKB1;
definitions BINOP_1,CARD_3,METRIC_1,PCOMPS_1,PRE_TOPC,SUBSET_1,STRUCT_0,TARSKI,TOPS_2,XBOOLE_0,CKB1;
theorems ABSVALUE,BORSUK_1,BORSUK_5,CANTOR_1,CARD_1,CARD_2,CARD_3,CARD_4,COMPL_SP,CONNSP_1,FUNCOP_1,FUNCT_1,FUNCT_2,FUNCT_3,HAUSDORF,JGRAPH_2,JORDAN1K,MCART_1,METRIC_1,NAGATA_1,NAGATA_2,NEWTON,PARTIT1,PCOMPS_1,PCOMPS_2,PREPOWER,PRE_TOPC,PROB_1,SETFAM_1,SUBSET_1,TARSKI,TEX_2,TMAP_1,TOPGEN_1,TOPGEN_2,TOPGEN_4,TOPMETR,TOPREAL7,TOPS_1,TOPS_2,TSEP_1,TSP_1,WAYBEL23,WAYBEL29,XBOOLE_0,XBOOLE_1,XREAL_0,XREAL_1,XXREAL_0,XXREAL_1,YELLOW12,YELLOW_9,ZFMISC_1,T_0TOPSP,TOPGRP_1,RELAT_1,ORDERS_4,NUMBERS,TOPREAL6,TOPREALA,EUCLID,ORDINAL1,FINSEQ_2,YELLOW14,TOPS_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB15,CKB16,CKB18,CKB19,CKB22,CKB23,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
schemes BORSUK_2,CLASSES1,FRAENKEL,FUNCT_2,LMOD_7,NAT_1;
registrations TOPMETR,PRE_TOPC,PCOMPS_1,XREAL_0,SUBSET_1,STRUCT_0,TOPS_1,METRIC_1,XXREAL_0,YELLOW13,CARD_1,XBOOLE_0,FINSET_1,FUNCT_1,ORDINAL1,COMPTS_1,RELAT_1,XCMPLX_0,CARD_LAR,BORSUK_1,TOPGEN_4,MEMBERED,TOPREAL7,BORSUK_3,EUCLID,RELSET_1,KURATO_2,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB17,CKB20,CKB21,CKB24,CKB25;
constructors REAL_1,KURATO_2,CANTOR_1,TOPGEN_4,WAYBEL23,TOPGEN_1,TOPS_1,FUNCT_3,TOPREAL9,CARD_2,NEWTON,CARD_5,NAGATA_1,TEX_2,TSP_1,CONNSP_1,RCOMP_1,WEIERSTR,TOPREAL7,ORDERS_4,TOPS_2,BORSUK_3,FUNCSDOM,YELLOW13,YELLOW_2,KURATO_0,CKB1;
requirements ARITHM,BOOLE,NUMERALS,REAL,SUBSET;
begin
reserve TM for  metrizable TopSpace;
reserve Am for (Subset of TM);
reserve Bm for (Subset of TM);
reserve Fm for (Subset-Family of TM);
reserve iC for  infinite Cardinal;
theorem
Lm6: ((for Fm holds (((Fm is  open & (not ( {} ) in Fm)) & (for Am holds (for Bm holds (((Am in Fm & Bm in Fm) & Am <> Bm) implies Am misses Bm)))) implies ( card Fm ) c= iC)) implies ( density TM ) c= iC)
proof
assume A1: (for Fm holds (((Fm is  open & (not ( {} ) in Fm)) & (for Am holds (for Bm holds (((Am in Fm & Bm in Fm) & Am <> Bm) implies Am misses Bm)))) implies ( card Fm ) c= iC));
per cases ;
suppose A2: TM is  empty;

(ex D being (Subset of TM) st (D is  dense & ( density TM ) = ( card D ))) by TOPGEN_1:def 12;
hence thesis by A2;
end;
suppose A3: TM is non empty;

consider metr being (Function of [: (the carrier of TM),(the carrier of TM) :],( REAL )) such that A4: metr is_metric_of (the carrier of TM) and A5: ( Family_open_set ( SpaceMetr ((the carrier of TM),metr) ) ) = (the topology of TM) by PCOMPS_1:def 8;
reconsider M = ( SpaceMetr ((the carrier of TM),metr) ) as non empty MetrSpace by A3,A4,PCOMPS_1:36;
defpred P[ set,set ]
 means
(for n being Nat holds ($1 = n implies (ex G being (Subset of TM) st ((G = $2 & ( card G ) c= iC) & (for p being (Element of M) holds (ex q being (Element of M) st (q in G & ( dist (p,q) ) < ( 1 / ( 2 |^ n ) ))))))));
A6: (the carrier of TM) = (the carrier of M) by A3,A4,PCOMPS_2:4;
A7: (for x being set holds (x in ( NAT ) implies (ex y being set st (y in ( bool (the carrier of TM) ) & P[ x,y ]))))
proof
let x being set;
assume x in ( NAT );
then reconsider n = x as (Element of ( NAT ));
reconsider r = ( 1 / ( 2 |^ n ) ) as Real by XREAL_0:def 1;
A8: ( 2 |^ n ) > ( 0 ) by PREPOWER:6;
then consider A being (Subset of M) such that A9: (for p,q being (Point of M) holds (((p <> q & p in A) & q in A) implies ( dist (p,q) ) >= r)) and A10: (for p being (Point of M) holds (ex q being (Point of M) st (q in A & p in ( Ball (q,r) )))) by COMPL_SP:30;
set BALL = { ( Ball (p,( r / 2 )) ) where p is (Element of M): p in A };
A11: BALL c= (the topology of TM)
proof
let x being set;
assume x in BALL;
then (ex p being (Point of M) st (x = ( Ball (p,( r / 2 )) ) & p in A));
hence thesis by A5,PCOMPS_1:29;
end;
reconsider BALL as  open (Subset-Family of TM) by A11,TOPS_2:11,XBOOLE_1:1;
defpred Q[ set,set ]
 means
(for p being (Point of M) holds ((( Ball (p,( r / 2 )) ) = $1 & p in A) implies p = $2));
A12: (for x being set holds (x in BALL implies (ex y being set st (y in A & Q[ x,y ]))))
proof
let x being set;
assume x in BALL;
then consider p being (Point of M) such that A13: x = ( Ball (p,( r / 2 )) ) and A14: p in A;
A15: ( r / 2 ) < r by A8,XREAL_1:216;
take p;
thus p in A by A14;
let q being (Point of M);
assume that
A16: ( Ball (q,( r / 2 )) ) = x
and
A17: q in A;
( dist (p,p) ) = ( 0 ) by METRIC_1:1;
then p in ( Ball (p,( r / 2 )) ) by A8,METRIC_1:11;
then ( dist (q,p) ) < ( r / 2 ) by A13,A16,METRIC_1:11;
then ( dist (q,p) ) < r by A15,XXREAL_0:2;
hence thesis by A9,A14,A17;
end;
consider f being (Function of BALL,A) such that A18: (for x being set holds (x in BALL implies Q[ x,( f . x ) ])) from FUNCT_2:sch 1(A12);
reconsider RNG = ( rng f ) as (Subset of TM) by A6,XBOOLE_1:1;
(ex q being (Point of M) st (q in A & the (Point of M) in ( Ball (q,r) ))) by A10;
then A19: ( dom f ) = BALL by FUNCT_2:def 1;
then A20: ( card RNG ) c= ( card BALL ) by CARD_1:12;
A21: (for A9,B9 being (Subset of TM) holds (((A9 in BALL & B9 in BALL) & A9 <> B9) implies A9 misses B9))
proof
let A9 being (Subset of TM),B9 being (Subset of TM);
assume that
A22: A9 in BALL
and
A23: B9 in BALL
and
A24: A9 <> B9;
consider b being (Element of M) such that A25: ( Ball (b,( r / 2 )) ) = B9 and A26: b in A by A23;
consider a being (Element of M) such that A27: ( Ball (a,( r / 2 )) ) = A9 and A28: a in A by A22;
assume A9 meets B9;
then consider x being set such that A29: x in A9 and A30: x in B9 by XBOOLE_0:3;
reconsider x as (Element of M) by A27,A29;
A31: ( dist (a,x) ) < ( r / 2 ) by A27,A29,METRIC_1:11;
( dist (b,x) ) < ( r / 2 ) by A25,A30,METRIC_1:11;
then A32: (( dist (a,b) ) <= ( ( dist (a,x) ) + ( dist (x,b) ) ) & ( ( dist (a,x) ) + ( dist (x,b) ) ) < ( ( r / 2 ) + ( r / 2 ) )) by A31,METRIC_1:4,XREAL_1:8;
( dist (a,b) ) >= r by A9,A24,A25,A26,A27,A28;
hence thesis by A32,XXREAL_0:2;
end;
take RNG;
thus RNG in ( bool (the carrier of TM) );
let m being Nat;
assume that
A33: x = m;
A34:now
let p being (Element of M);
consider q being (Point of M) such that A35: q in A and A36: p in ( Ball (q,r) ) by A10;
take q;
A37: ( Ball (q,( r / 2 )) ) in BALL by A35;
then ( f . ( Ball (q,( r / 2 )) ) ) = q by A18,A35;
hence (q in RNG & ( dist (p,q) ) < ( 1 / ( 2 |^ m ) )) by A19,A33,A36,A37,FUNCT_1:def 3,METRIC_1:11;
end;
(not ( {} ) in BALL)
proof
assume ( {} ) in BALL;
then consider p being (Element of M) such that A38: ( Ball (p,( r / 2 )) ) = ( {} ) and p in A;
( dist (p,p) ) = ( 0 ) by METRIC_1:1;
hence thesis by A8,A38,METRIC_1:11;
end;
then ( card BALL ) c= iC by A1,A21;
hence thesis by A20,A34,XBOOLE_1:1;
end;
consider p being (Function of ( NAT ),( bool (the carrier of TM) )) such that A39: (for x being set holds (x in ( NAT ) implies P[ x,( p . x ) ])) from FUNCT_2:sch 1(A7);
reconsider Up = ( Union p ) as (Subset of TM);
(for U being (Subset of TM) holds ((U <> ( {} ) & U is  open) implies Up meets U))
proof
let U being (Subset of TM);
reconsider U9 = U as (Subset of M) by A3,A4,PCOMPS_2:4;
assume that
A40: U <> ( {} )
and
A41: U is  open;
consider q being set such that A42: q in U by A40,XBOOLE_0:def 1;
reconsider q as (Element of M) by A3,A4,A42,PCOMPS_2:4;
U9 in ( Family_open_set M ) by A5,A41,PRE_TOPC:def 2;
then consider r being Real such that A43: r > ( 0 ) and A44: ( Ball (q,r) ) c= U9 by A42,PCOMPS_1:def 4;
consider n being (Element of ( NAT )) such that A45: ( 1 / ( 2 |^ n ) ) <= r by A43,PREPOWER:92;
consider G being (Subset of TM) such that A46: G = ( p . n ) and ( card G ) c= iC and A47: (for p being (Element of M) holds (ex q being (Element of M) st (q in G & ( dist (p,q) ) < ( 1 / ( 2 |^ n ) )))) by A39;
consider qq being (Element of M) such that A48: qq in G and A49: ( dist (q,qq) ) < ( 1 / ( 2 |^ n ) ) by A47;
( dist (q,qq) ) < r by A45,A49,XXREAL_0:2;
then A50: qq in ( Ball (q,r) ) by METRIC_1:11;
qq in Up by A46,A48,PROB_1:12;
hence thesis by A44,A50,XBOOLE_0:3;
end;
then Up is  dense by TOPS_1:45;
then A51: ( density TM ) c= ( card Up ) by TOPGEN_1:def 12;
A52: (for x being set holds (x in ( dom p ) implies ( card ( p . x ) ) c= iC))
proof
let x being set;
assume x in ( dom p );
then reconsider n = x as (Element of ( NAT ));
(ex G being (Subset of TM) st ((G = ( p . n ) & ( card G ) c= iC) & (for p being (Element of M) holds (ex q being (Element of M) st (q in G & ( dist (p,q) ) < ( 1 / ( 2 |^ n ) )))))) by A39;
hence thesis;
end;
( card ( dom p ) ) = ( omega ) by CARD_1:47,FUNCT_2:def 1;
then A53: ( card Up ) c= ( ( omega ) *` iC ) by A52,CARD_2:86;
( ( omega ) *` iC ) = iC by CKB29:1;
hence thesis by A51,A53,XBOOLE_1:1;
end;
end;
