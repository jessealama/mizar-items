environ
vocabularies NUMBERS,FUNCOP_1,CARD_1,FUNCT_4,FUNCT_1,RELAT_1,PBOOLE,PRE_POLY,VALUED_0,XBOOLE_0,ARYTM_3,NEWTON,TARSKI,FINSET_1,ORDINAL1,NAT_3,CARD_3,UPROOTS,FINSEQ_1,SUBSET_1,ORDINAL4,ARYTM_1,XXREAL_0,FUNCT_2,CLASSES1,PARTFUN1,INT_2,NAT_1,POWER,RVSUM_1,BINOP_1,BINOP_2,REALSET1,ZFMISC_1,INT_3,SUPINF_2,FUNCT_7,ALGSTR_0,GROUP_1,MESFUNC1,INT_1,COMPLEX1,VECTSP_1,POLYNOM1,HURWITZ,POLYNOM5,POLYNOM3,POLYNOM2,AFINSQ_1,STRUCT_0,GROUP_4,GROUP_2,GRAPH_1,INT_7;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,FINSET_1,RVSUM_1,CARD_1,CLASSES1,DOMAIN_1,NUMBERS,XCMPLX_0,XXREAL_0,NAT_1,POWER,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,FINSEQ_1,FUNCT_4,STRUCT_0,ALGSTR_0,VFUNCT_1,GROUP_1,VECTSP_1,BINOP_1,PBOOLE,GROUP_2,BHSP_1,ALGSEQ_1,WSIERP_1,POLYNOM3,POLYNOM4,UPROOTS,NAT_3,POLYNOM5,GROUP_4,GR_CY_1,INT_1,FUNCT_7,NEWTON,INT_2,INT_3,HURWITZ,VALUED_0,REALSET1,RECDEF_1,PRE_POLY,POLYNOM2;
definitions STRUCT_0,GROUP_1,INT_3,CARD_1,ALGSTR_0,BINOP_1,FINSEQ_1,POLYNOM3,HURWITZ,REALSET1,TARSKI;
theorems TARSKI,XBOOLE_0,ZFMISC_1,ORDINAL1,FUNCT_1,FUNCT_2,VECTSP_1,INT_1,RELAT_1,RLVECT_1,ABSVALUE,GR_CY_1,FUNCT_7,NAT_1,INT_2,INT_3,PEPIN,NAT_D,XCMPLX_1,NUMBERS,PYTHTRIP,WSIERP_1,CARD_1,GROUP_1,GROUP_2,STRUCT_0,WELLORD2,XREAL_1,NEWTON,XXREAL_0,GR_CY_2,POWER,VALUED_0,ALGSEQ_1,NAT_3,UPROOTS,RVSUM_1,FINSEQ_4,FINSEQ_5,POLYNOM3,POLYNOM4,POLYNOM5,CARD_2,EULER_1,EULER_2,XBOOLE_1,FINSEQ_1,HURWITZ,GROUP_8,REALSET1,RELSET_1,FUNCT_4,FUNCOP_1,CLASSES1,PARTFUN1,PRE_POLY,FINSEQ_2,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes NAT_1,PRE_CIRC,FUNCT_2,RECDEF_1;
registrations XBOOLE_0,STRUCT_0,FUNCT_1,XREAL_0,ORDINAL1,NAT_1,INT_1,GROUP_1,GROUP_2,FINSET_1,FINSEQ_1,FUNCT_2,GR_CY_1,ALGSTR_0,MEMBERED,VECTSP_1,INT_3,XXREAL_0,NEWTON,SUBSET_1,RELAT_1,CARD_1,ALGSTR_1,NAT_3,VALUED_0,POLYNOM3,POLYNOM4,POLYNOM5,UPROOTS,RELSET_1,PRE_POLY,VFUNCT_1;
constructors REAL_1,NAT_D,NAT_3,SEQ_1,PEPIN,EUCLID,REALSET1,GROUP_4,GR_CY_1,INT_3,WSIERP_1,BHSP_1,POLYNOM2,POLYNOM4,POLYNOM5,WELLORD2,POWER,ALGSTR_1,HURWITZ,UPROOTS,FUNCT_4,RECDEF_1,BINOP_2,CLASSES1,RELSET_1,PBOOLE,FUNCT_7,VFUNCT_1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
theorem
Lm3: (for p being (bag of ( SetPrimes )) holds (for X being set holds (X c= ( support p ) implies (ex q,r being (bag of ( SetPrimes )) st (((((( support q ) = ( ( support p ) \ X ) & ( support r ) = X) & ( support q ) misses ( support r )) & ( q | ( support q ) ) = ( p | ( support q ) )) & ( r | ( support r ) ) = ( p | ( support r ) )) & ( q + r ) = p)))))
proof
let p being (bag of ( SetPrimes ));
let X being set;
set fq = ( p +* ( X --> ( 0 ) ) );
A1: ( rng fq ) c= ( ( rng p ) \/ ( rng ( X --> ( 0 ) ) ) ) by FUNCT_4:17;
A2: ( rng p ) c= ( NAT ) by VALUED_0:def 6;
then ( ( rng p ) \/ ( rng ( X --> ( 0 ) ) ) ) c= ( NAT ) by XBOOLE_1:8;
then A3: ( rng fq ) c= ( NAT ) by A1,XBOOLE_1:1;
set fr = ( p +* ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) );
A4: ( dom fr ) = ( ( dom p ) \/ ( dom ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) ) ) by FUNCT_4:def 1
.= ( ( dom p ) \/ ( ( SetPrimes ) \ X ) ) by FUNCOP_1:13
.= ( ( SetPrimes ) \/ ( ( SetPrimes ) \ X ) ) by PARTFUN1:def 2
.= ( SetPrimes ) by XBOOLE_1:12,XBOOLE_1:36;
A5: ( rng fr ) c= ( ( rng p ) \/ ( rng ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) ) ) by FUNCT_4:17;
( ( rng p ) \/ ( rng ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) ) ) c= ( NAT ) by A2,XBOOLE_1:8;
then ( rng fr ) c= ( NAT ) by A5,XBOOLE_1:1;
then reconsider fr as (Function of ( SetPrimes ),( NAT )) by A4,FUNCT_2:def 1,RELSET_1:4;
assume A6: X c= ( support p );
A7: (((not x in X) & x in ( SetPrimes )) implies ( fr . x ) = ( 0 ))
proof
assume that
A8: (not x in X)
and
A9: x in ( SetPrimes );
A10: x in ( ( SetPrimes ) \ X ) by A8,A9,XBOOLE_0:def 5;
then x in ( dom ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) ) by FUNCOP_1:13;
then ( fr . x ) = ( ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) . x ) by FUNCT_4:13;
hence thesis by A10,FUNCOP_1:7;
end;
A11: ( dom ( X --> ( 0 ) ) ) = X by FUNCOP_1:13;
then ( dom fq ) = ( ( dom p ) \/ X ) by FUNCT_4:def 1
.= ( ( SetPrimes ) \/ X ) by PARTFUN1:def 2
.= ( SetPrimes ) by A6,XBOOLE_1:1,XBOOLE_1:12;
then reconsider fq as (Function of ( SetPrimes ),( NAT )) by A3,FUNCT_2:def 1,RELSET_1:4;
A12: ( dom ( fq | ( support fq ) ) ) = ( ( dom fq ) /\ ( support fq ) ) by RELAT_1:61
.= ( support fq ) by PRE_POLY:37,XBOOLE_1:28;
A13: (for x being set holds ((not x in ( SetPrimes )) implies (( fr . x ) = ( 0 ) & ( fq . x ) = ( 0 ))))
proof
let x being set;
assume A14: (not x in ( SetPrimes ));
then A15: (not x in ( dom fr ));
(not x in ( dom fq )) by A14;
hence thesis by A15,FUNCT_1:def 2;
end;
A16: (x in X implies ( fr . x ) = ( p . x ))
proof
assume x in X;
then (not x in ( dom ( ( ( SetPrimes ) \ X ) --> ( 0 ) ) )) by XBOOLE_0:def 5;
hence thesis by FUNCT_4:11;
end;
A17: (for x being set holds ((x in ( SetPrimes ) & x in X) implies ( fr . x ) <> ( 0 )))
proof
let x being set;
assume that
x in ( SetPrimes )
and
A18: x in X;
( p . x ) <> ( 0 ) by A6,A18,PRE_POLY:def 7;
hence thesis by A16,A18;
end;
A19: (for x being set holds (x in X iff ( fr . x ) <> ( 0 )))
proof
let x being set;
now
per cases ;
suppose x in ( SetPrimes );

hence thesis by A7,A17;
end;
suppose A20: (not x in ( SetPrimes ));

X c= ( SetPrimes ) by A6,XBOOLE_1:1;
hence thesis by A13,A20;
end;
end;
hence thesis;
end;
then A21: ( support fr ) = X by PRE_POLY:def 7;
then reconsider r = fr as (bag of ( SetPrimes )) by A6,PRE_POLY:def 8;
A22: ( support p ) c= ( dom p ) by PRE_POLY:37;
A23: ( dom ( fr | ( support fr ) ) ) = ( ( dom fr ) /\ ( support fr ) ) by RELAT_1:61
.= ( support fr ) by PRE_POLY:37,XBOOLE_1:28
.= X by A19,PRE_POLY:def 7;
A24: (for x being set holds (x in ( dom ( fr | ( support fr ) ) ) implies ( ( fr | ( support fr ) ) . x ) = ( ( p | ( support fr ) ) . x )))
proof
let x being set;
assume A25: x in ( dom ( fr | ( support fr ) ) );
then A26: ( ( p | ( support fr ) ) . x ) = ( p . x ) by A21,A23,FUNCT_1:49;
( ( fr | ( support fr ) ) . x ) = ( fr . x ) by A21,A23,A25,FUNCT_1:49;
hence thesis by A16,A23,A25,A26;
end;
( dom ( p | ( support fr ) ) ) = ( ( dom p ) /\ ( support fr ) ) by RELAT_1:61
.= ( ( dom p ) /\ X ) by A19,PRE_POLY:def 7
.= X by A6,A22,XBOOLE_1:1,XBOOLE_1:28;
then A27: ( fr | ( support fr ) ) = ( p | ( support fr ) ) by A23,A24,FUNCT_1:def 11;
A28: (x in X implies ( fq . x ) = ( 0 ))
proof
assume A29: x in X;
hence ( fq . x ) = ( ( X --> ( 0 ) ) . x ) by A11,FUNCT_4:13
.= ( 0 ) by A29,FUNCOP_1:7;
end;
A30: (for x being set holds (x in ( ( support p ) \ X ) iff ( fq . x ) <> ( 0 )))
proof
let x being set;
per cases ;
suppose x in X;

hence thesis by A28,XBOOLE_0:def 5;
end;
suppose A31: (not x in X);

then A32: ( fq . x ) = ( p . x ) by A11,FUNCT_4:11;
per cases ;
suppose x in ( support p );

hence thesis by A31,A32,PRE_POLY:def 7,XBOOLE_0:def 5;
end;
suppose (not x in ( support p ));

hence thesis by A32,PRE_POLY:def 7,XBOOLE_0:def 5;
end;
end;
end;
then A33: ( support fq ) = ( ( support p ) \ X ) by PRE_POLY:def 7;
then reconsider q = fq as (bag of ( SetPrimes )) by PRE_POLY:def 8;
A34: ( dom ( p | ( support fq ) ) ) = ( ( dom p ) /\ ( support fq ) ) by RELAT_1:61
.= ( ( dom p ) /\ ( ( support p ) \ X ) ) by A30,PRE_POLY:def 7
.= ( ( ( dom p ) /\ ( support p ) ) \ X ) by XBOOLE_1:49
.= ( ( support p ) \ X ) by PRE_POLY:37,XBOOLE_1:28
.= ( support fq ) by A30,PRE_POLY:def 7;
( ( support p ) \ X ) misses X by XBOOLE_1:79;
then A35: ( ( support fq ) /\ ( support fr ) ) = ( {} ) by A21,A33,XBOOLE_0:def 7;
A36: (for x being set holds ((x in ( SetPrimes ) & x in ( support fq )) implies ( p . x ) = ( fq . x )))
proof
let x being set;
assume that
x in ( SetPrimes )
and
A37: x in ( support fq );
(not x in X) by A21,A35,A37,XBOOLE_0:def 4;
hence thesis by A11,FUNCT_4:11;
end;
(for x being set holds (x in ( dom ( fq | ( support fq ) ) ) implies ( ( fq | ( support fq ) ) . x ) = ( ( p | ( support fq ) ) . x )))
proof
let x being set;
assume A38: x in ( dom ( fq | ( support fq ) ) );
then A39: ( ( p | ( support fq ) ) . x ) = ( p . x ) by A12,FUNCT_1:49;
( ( fq | ( support fq ) ) . x ) = ( fq . x ) by A12,A38,FUNCT_1:49;
hence thesis by A12,A36,A38,A39;
end;
then A40: ( fq | ( support fq ) ) = ( p | ( support fq ) ) by A12,A34,FUNCT_1:def 11;
( ( support fr ) \/ ( support fq ) ) = ( ( support fr ) \/ ( ( support p ) \ ( support fr ) ) ) by A19,A33,PRE_POLY:def 7
.= ( ( support fr ) \/ ( support p ) ) by XBOOLE_1:39
.= ( support p ) by A6,A21,XBOOLE_1:12;
then ( q + r ) = p by A35,A40,A27,CKB3:1;
hence thesis by A21,A33,A40,A27,XBOOLE_1:79;
end;
