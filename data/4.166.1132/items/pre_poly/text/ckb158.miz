environ
vocabularies NUMBERS,SUBSET_1,RELAT_1,ORDINAL4,FINSEQ_1,XBOOLE_0,BINOP_1,FUNCT_1,FINSOP_1,SETWISEO,XXREAL_0,TARSKI,NAT_1,ARYTM_3,WELLORD1,FINSUB_1,SETFAM_1,ORDERS_1,FINSET_1,ZFMISC_1,CARD_1,FUNCT_3,PARTFUN1,ARROW,ORDINAL2,ORDINAL1,RELAT_2,ARYTM_1,FINSEQ_3,FUNCOP_1,PBOOLE,FUNCT_4,FINSEQ_2,CARD_3,MEMBER_1,VALUED_0,XREAL_0,FUNCT_2,BINOP_2,CLASSES1,PRE_POLY;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,ORDERS_1,RELAT_1,XXREAL_0,XCMPLX_0,RELAT_2,FUNCT_1,PBOOLE,RELSET_1,FINSET_1,FINSUB_1,SETWISEO,ORDINAL1,PARTFUN1,FUNCT_2,BINOP_2,FINSOP_1,FINSEQ_1,FINSEQ_4,FUNCT_3,BINOP_1,NAT_1,XREAL_0,FINSEQ_2,WELLORD1,CARD_3,WSIERP_1,FUNCOP_1,FUNCT_7,NAT_D,CLASSES1,VALUED_0,VALUED_1,ORDINAL2,SETFAM_1,DOMAIN_1,ARROW,FINSEQOP,CKB1,CKB3,CKB4,CKB5,CKB7,CKB21,CKB25,CKB28,CKB33,CKB35,CKB47,CKB62,CKB84,CKB85,CKB92,CKB94,CKB103,CKB108,CKB110,CKB115,CKB121,CKB122,CKB128,CKB138,CKB144,CKB149,CKB152;
definitions TARSKI,XBOOLE_0,FUNCT_1,CARD_3,RELAT_2,PBOOLE,RELSET_1,WELLORD2,RELAT_1,BINOP_1,FINSEQ_2,VALUED_0,FUNCOP_1,SETFAM_1,SEQM_3,WELLORD1,SUBSET_1,CKB7,CKB25,CKB33,CKB35,CKB84,CKB85,CKB92,CKB94,CKB108,CKB110,CKB115,CKB121,CKB128,CKB138,CKB144,CKB152;
theorems FUNCT_1,FINSET_1,FINSEQ_3,FINSEQ_4,ZFMISC_1,FINSEQ_1,FUNCT_2,FUNCOP_1,TARSKI,FUNCT_7,BINOP_1,RELAT_1,FINSEQ_2,CARD_3,RFINSEQ,RELSET_1,CARD_1,ORDINAL1,RVSUM_1,FINSEQ_5,NAT_1,PBOOLE,NAT_2,SUBSET_1,ORDERS_1,WELLSET1,WELLORD1,RELAT_2,ORDINAL3,FINSEQ_6,SETWISEO,SETWOP_2,CARD_2,FUNCT_5,FINSUB_1,PARTFUN2,XBOOLE_0,XBOOLE_1,PARTFUN1,BINOP_2,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,NAT_D,SETFAM_1,ARROW,WELLORD2,FINSOP_1,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB16,CKB24,CKB25,CKB26,CKB29,CKB30,CKB31,CKB32,CKB33,CKB35,CKB36,CKB37,CKB38,CKB39,CKB43,CKB46,CKB49,CKB50,CKB58,CKB64,CKB66,CKB67,CKB70,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB84,CKB85,CKB86,CKB87,CKB90,CKB91,CKB92,CKB93,CKB94,CKB101,CKB102,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116,CKB117,CKB118,CKB119,CKB120,CKB121,CKB123,CKB128,CKB129,CKB130,CKB131,CKB132,CKB133,CKB134,CKB135,CKB136,CKB137,CKB138,CKB139,CKB140,CKB141,CKB142,CKB144,CKB145,CKB148,CKB150,CKB152,CKB154,CKB155,CKB156,CKB157;
schemes SETWISEO,FUNCT_2,FINSEQ_2,FINSEQ_1,PBOOLE,RELSET_1,FINSEQ_4,ORDINAL1,FUNCT_7,SUBSET_1,XBOOLE_0,BINOP_1,NAT_1,PRE_CIRC,CLASSES1,CKB14,CKB22;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,ORDINAL3,FINSET_1,XXREAL_0,XREAL_0,NAT_1,BINOP_2,CARD_1,FINSEQ_1,FINSEQ_2,CARD_3,PARTFUN1,VALUED_0,VALUED_1,RELSET_1,FUNCT_2,SETFAM_1,FINSUB_1,CKB2,CKB6,CKB15,CKB17,CKB18,CKB19,CKB20,CKB23,CKB27,CKB34,CKB40,CKB41,CKB42,CKB44,CKB45,CKB48,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB59,CKB60,CKB61,CKB63,CKB65,CKB68,CKB69,CKB71,CKB72,CKB79,CKB80,CKB81,CKB82,CKB83,CKB88,CKB89,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB104,CKB105,CKB106,CKB124,CKB125,CKB126,CKB127,CKB143,CKB146,CKB147,CKB151,CKB153;
constructors WELLORD2,BINOP_1,SETWISEO,CARD_3,FINSEQOP,FINSOP_1,FINSEQ_4,RFINSEQ,RFUNCT_3,NAT_D,WSIERP_1,FUNCT_7,RECDEF_1,BINOP_2,CLASSES1,BINARITH,ARROW,TOLER_1,ORDINAL2,RELSET_1,ORDERS_1,RELAT_2,WELLORD1,DOMAIN_1,SETFAM_1,ORDINAL3,PBOOLE,CKB1,CKB3,CKB4,CKB5,CKB7,CKB21,CKB25,CKB28,CKB33,CKB35,CKB47,CKB62,CKB84,CKB85,CKB92,CKB94,CKB108,CKB110,CKB115,CKB121,CKB122,CKB128,CKB138,CKB144,CKB149,CKB152;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve k for (Element of ( NAT ));
reserve n for Nat;
definition
let n being Ordinal;
let b being (bag of n);
func decomp b -> (FinSequence of ( 2 -tuples_on ( Bags n ) )) means 
:Def17: (( dom it ) = ( dom ( divisors b ) ) & (for i being (Element of ( NAT )) holds (for p being (bag of n) holds ((i in ( dom it ) & p = ( ( divisors b ) /. i )) implies ( it /. i ) = <* p,( b -' p ) *>))));
existence
proof
defpred P[ Nat,set ]
 means
(for p being (bag of n) holds (p = ( ( divisors b ) /. $1 ) implies $2 = <* p,( b -' p ) *>));
A1: (for k being Nat holds (k in ( Seg ( len ( divisors b ) ) ) implies (ex d being (Element of ( 2 -tuples_on ( Bags n ) )) st P[ k,d ])))
proof
let k being Nat;
assume that
k in ( Seg ( len ( divisors b ) ) );
reconsider p = ( ( divisors b ) /. k ) as (bag of n);
reconsider b1 = p,b2 = ( b -' p ) as (Element of ( Bags n )) by CKB121:def 1;
( len <* p,( b -' p ) *> ) = 2 by FINSEQ_1:44;
then reconsider d = <* b1,b2 *> as (Element of ( 2 -tuples_on ( Bags n ) )) by FINSEQ_2:92;
take d;
thus thesis;
end;
consider f being (FinSequence of ( 2 -tuples_on ( Bags n ) )) such that A2: ( len f ) = ( len ( divisors b ) ) and A3: (for n being Nat holds (n in ( Seg ( len ( divisors b ) ) ) implies P[ n,( f /. n ) ])) from FINSEQ_4:sch 1(A1);
take f;
thus ( dom f ) = ( dom ( divisors b ) ) by A2,FINSEQ_3:29;
let i being (Element of ( NAT ));
let p being (bag of n);
assume that
A4: i in ( dom f )
and
A5: p = ( ( divisors b ) /. i );
i in ( Seg ( len ( divisors b ) ) ) by A2,A4,FINSEQ_1:def 3;
hence thesis by A3,A5;
end;
uniqueness
proof
let F being (FinSequence of ( 2 -tuples_on ( Bags n ) ));
let G being (FinSequence of ( 2 -tuples_on ( Bags n ) ));
assume that
A6: ( dom F ) = ( dom ( divisors b ) )
and
A7: (for i being (Element of ( NAT )) holds (for p being (bag of n) holds ((i in ( dom F ) & p = ( ( divisors b ) /. i )) implies ( F /. i ) = <* p,( b -' p ) *>)))
and
A8: ( dom G ) = ( dom ( divisors b ) )
and
A9: (for i being (Element of ( NAT )) holds (for p being (bag of n) holds ((i in ( dom G ) & p = ( ( divisors b ) /. i )) implies ( G /. i ) = <* p,( b -' p ) *>)));
now
let i being Nat;
reconsider p = ( ( divisors b ) /. i ) as (bag of n);
assume A10: i in ( dom F );
hence ( F /. i ) = <* p,( b -' p ) *> by A7
.= ( G /. i ) by A6,A8,A9,A10;
end;
hence thesis by A6,A8,FINSEQ_5:12;
end;
end;
