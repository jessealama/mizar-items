environ
vocabularies NUMBERS,SUBSET_1,RELAT_1,ORDINAL4,FINSEQ_1,XBOOLE_0,BINOP_1,FUNCT_1,FINSOP_1,SETWISEO,XXREAL_0,TARSKI,NAT_1,ARYTM_3,WELLORD1,FINSUB_1,SETFAM_1,ORDERS_1,FINSET_1,ZFMISC_1,CARD_1,FUNCT_3,PARTFUN1,ARROW,ORDINAL2,ORDINAL1,RELAT_2,ARYTM_1,FINSEQ_3,FUNCOP_1,PBOOLE,FUNCT_4,FINSEQ_2,CARD_3,MEMBER_1,VALUED_0,XREAL_0,FUNCT_2,BINOP_2,CLASSES1,PRE_POLY;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,CARD_1,NUMBERS,ORDERS_1,RELAT_1,XXREAL_0,XCMPLX_0,RELAT_2,FUNCT_1,PBOOLE,RELSET_1,FINSET_1,FINSUB_1,SETWISEO,ORDINAL1,PARTFUN1,FUNCT_2,BINOP_2,FINSOP_1,FINSEQ_1,FINSEQ_4,FUNCT_3,BINOP_1,NAT_1,XREAL_0,FINSEQ_2,WELLORD1,CARD_3,WSIERP_1,FUNCOP_1,FUNCT_7,NAT_D,CLASSES1,VALUED_0,VALUED_1,ORDINAL2,SETFAM_1,DOMAIN_1,ARROW,FINSEQOP,CKB1,CKB3,CKB4,CKB5,CKB7,CKB21,CKB25,CKB28,CKB33,CKB35,CKB47,CKB62;
definitions TARSKI,XBOOLE_0,FUNCT_1,CARD_3,RELAT_2,PBOOLE,RELSET_1,WELLORD2,RELAT_1,BINOP_1,FINSEQ_2,VALUED_0,FUNCOP_1,SETFAM_1,SEQM_3,WELLORD1,SUBSET_1,CKB7,CKB25,CKB33,CKB35;
theorems FUNCT_1,FINSET_1,FINSEQ_3,FINSEQ_4,ZFMISC_1,FINSEQ_1,FUNCT_2,FUNCOP_1,TARSKI,FUNCT_7,BINOP_1,RELAT_1,FINSEQ_2,CARD_3,RFINSEQ,RELSET_1,CARD_1,ORDINAL1,RVSUM_1,FINSEQ_5,NAT_1,PBOOLE,NAT_2,SUBSET_1,ORDERS_1,WELLSET1,WELLORD1,RELAT_2,ORDINAL3,FINSEQ_6,SETWISEO,SETWOP_2,CARD_2,FUNCT_5,FINSUB_1,PARTFUN2,XBOOLE_0,XBOOLE_1,PARTFUN1,BINOP_2,XREAL_1,XXREAL_0,VALUED_0,VALUED_1,NAT_D,SETFAM_1,ARROW,WELLORD2,FINSOP_1,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB16,CKB24,CKB25,CKB26,CKB29,CKB30,CKB31,CKB32,CKB33,CKB35,CKB36,CKB37,CKB38,CKB39,CKB43,CKB46,CKB49,CKB50,CKB58,CKB64,CKB66,CKB67,CKB70,CKB73,CKB74,CKB75,CKB76,CKB77;
schemes SETWISEO,FUNCT_2,FINSEQ_2,FINSEQ_1,PBOOLE,RELSET_1,FINSEQ_4,ORDINAL1,FUNCT_7,SUBSET_1,XBOOLE_0,BINOP_1,NAT_1,PRE_CIRC,CLASSES1,CKB14,CKB22;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,ORDINAL3,FINSET_1,XXREAL_0,XREAL_0,NAT_1,BINOP_2,CARD_1,FINSEQ_1,FINSEQ_2,CARD_3,PARTFUN1,VALUED_0,VALUED_1,RELSET_1,FUNCT_2,SETFAM_1,FINSUB_1,CKB2,CKB6,CKB15,CKB17,CKB18,CKB19,CKB20,CKB23,CKB27,CKB34,CKB40,CKB41,CKB42,CKB44,CKB45,CKB48,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB59,CKB60,CKB61,CKB63,CKB65,CKB68,CKB69,CKB71,CKB72;
constructors WELLORD2,BINOP_1,SETWISEO,CARD_3,FINSEQOP,FINSOP_1,FINSEQ_4,RFINSEQ,RFUNCT_3,NAT_D,WSIERP_1,FUNCT_7,RECDEF_1,BINOP_2,CLASSES1,BINARITH,ARROW,TOLER_1,ORDINAL2,RELSET_1,ORDERS_1,RELAT_2,WELLORD1,DOMAIN_1,SETFAM_1,ORDINAL3,PBOOLE,CKB1,CKB3,CKB4,CKB5,CKB7,CKB21,CKB25,CKB28,CKB33,CKB35,CKB47,CKB62;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve k for (Element of ( NAT ));
theorem
(for X,Y being non  empty set holds (for f being (FinSequence of ( X * )) holds (for v being (Function of X,Y) holds (ex F being (FinSequence of ( Y * )) st (F = ( ( ( dom f ) --> v ) ** f ) & ( v * ( FlattenSeq f ) ) = ( FlattenSeq F ))))))
proof
let X being non  empty set;
let Y being non  empty set;
let f being (FinSequence of ( X * ));
let v being (Function of X,Y);
reconsider F = ( ( ( dom f ) --> v ) ** f ) as (FinSequence of ( Y * )) by CKB77:1;
take F;
thus F = ( ( ( dom f ) --> v ) ** f );
set Fl = ( FlattenSeq F );
set fl = ( FlattenSeq f );
reconsider vfl = ( v * fl ) as (FinSequence of Y);
now
( len fl ) = ( len vfl ) by FINSEQ_2:33;
hence A1: ( dom fl ) = ( dom vfl ) by FINSEQ_3:29;
A2: ( dom F ) = ( ( dom ( ( dom f ) --> v ) ) /\ ( dom f ) ) by PBOOLE:def 19
.= ( ( dom f ) /\ ( dom f ) ) by FUNCOP_1:13
.= ( dom f );
A3:now
let k being set;
assume A4: k in ( dom f );
then reconsider k1 = k as (Element of ( NAT ));
A5: ( F . k ) = ( ( ( ( dom f ) --> v ) . k ) * ( f . k ) ) by A2,A4,PBOOLE:def 19
.= ( v * ( f . k ) ) by A4,FUNCOP_1:7;
( f . k1 ) in ( X * ) by A4,FINSEQ_2:11;
then reconsider fk = ( f . k ) as (FinSequence of X) by FINSEQ_1:def 11;
thus ( ( Card f ) . k ) = ( len fk ) by A4,CARD_3:def 2
.= ( len ( F . k ) ) by A5,FINSEQ_2:33
.= ( ( Card F ) . k ) by A2,A4,CARD_3:def 2;
end;
A6: (( dom f ) = ( dom ( Card f ) ) & ( dom f ) = ( dom ( Card F ) )) by A2,CARD_3:def 2;
then A7: ( Card f ) = ( Card F ) by A3,FUNCT_1:2;
( len fl ) = ( len Fl ) by A6,A3,CKB74:1,FUNCT_1:2;
hence ( dom fl ) = ( dom Fl ) by FINSEQ_3:29;
let k being Nat;
assume A8: k in ( dom fl );
then consider i,j being (Element of ( NAT )) such that A9: i in ( dom f ) and A10: j in ( dom ( f . i ) ) and A11: k = ( ( Sum ( Card ( f | ( i -' 1 ) ) ) ) + j ) and A12: ( ( f . i ) . j ) = ( fl . k ) by CKB75:1;
( f . i ) in ( X * ) by A9,FINSEQ_2:11;
then reconsider fi = ( f . i ) as (FinSequence of X) by FINSEQ_1:def 11;
( F . i ) = ( ( ( ( dom f ) --> v ) . i ) * ( f . i ) ) by A2,A9,PBOOLE:def 19
.= ( v * ( f . i ) ) by A9,FUNCOP_1:7;
then ( len fi ) = ( len ( F . i ) ) by FINSEQ_2:33;
then A13: j in ( dom ( F . i ) ) by A10,FINSEQ_3:29;
( f . i ) in ( X * ) by A9,FINSEQ_2:11;
then (( dom v ) = X & ( f . i ) is (FinSequence of X)) by FINSEQ_1:def 11,FUNCT_2:def 1;
then ( rng ( f . i ) ) c= ( dom v ) by FINSEQ_1:def 4;
then A14: j in ( dom ( v * ( f . i ) ) ) by A10,RELAT_1:27;
( Card ( F | ( i -' 1 ) ) ) = ( Card ( F | ( Seg ( i -' 1 ) ) ) ) by FINSEQ_1:def 15
.= ( ( Card f ) | ( Seg ( i -' 1 ) ) ) by A7,CKB64:1
.= ( Card ( f | ( Seg ( i -' 1 ) ) ) ) by CKB64:1
.= ( Card ( f | ( i -' 1 ) ) ) by FINSEQ_1:def 15;
then ( Fl . k ) = ( ( F . i ) . j ) by A2,A9,A11,A13,CKB76:1
.= ( ( ( ( ( dom f ) --> v ) . i ) * ( f . i ) ) . j ) by A2,A9,PBOOLE:def 19
.= ( ( v * ( f . i ) ) . j ) by A9,FUNCOP_1:7
.= ( v . ( ( f . i ) . j ) ) by A14,FUNCT_1:12;
hence ( vfl . k ) = ( Fl . k ) by A1,A8,A12,FUNCT_1:12;
end;
hence thesis by FINSEQ_1:13;
end;
