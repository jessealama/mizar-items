environ
vocabularies NUMBERS,NAT_1,FUNCT_1,SUBSET_1,XXREAL_0,TARSKI,XCMPLX_0,XBOOLE_0,CARD_1,ARYTM_3,RELAT_1,FINSET_1,ZFMISC_1,ORDINAL1,PARTFUN1,FUNCOP_1,ORDINAL4,ARYTM_1,REAL_1,FINSEQ_1,ORDINAL2,VALUED_0;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,XCMPLX_0,RELAT_1,FUNCT_1,FUNCOP_1,WELLORD2,ORDINAL1,REAL_1,NAT_1,CARD_1,NUMBERS,PARTFUN1,FINSET_1,XXREAL_0,FUNCT_2,INT_1,VALUED_0,CKB1,CKB2,CKB15,CKB17,CKB23,CKB24,CKB25,CKB35,CKB40,CKB45,CKB46,CKB49,CKB65,CKB67,CKB71,CKB72,CKB87,CKB91;
definitions TARSKI,FINSET_1,FUNCT_1,WELLORD2,XBOOLE_0,RELAT_1,CARD_1,CKB1,CKB15,CKB24,CKB35,CKB45,CKB46,CKB49,CKB67,CKB71,CKB72,CKB91;
theorems TARSKI,AXIOMS,FUNCT_1,NAT_1,ZFMISC_1,RELAT_1,RELSET_1,WELLORD2,ORDINAL1,CARD_1,FINSET_1,XBOOLE_0,XBOOLE_1,FUNCOP_1,XREAL_1,XXREAL_0,SETFAM_1,ORDINAL3,SUBSET_1,VALUED_0,CKB1,CKB3,CKB5,CKB6,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB20,CKB21,CKB24,CKB26,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB37,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB66,CKB67,CKB70,CKB71,CKB72,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB89,CKB91;
schemes FUNCT_1,SUBSET_1,NAT_1,XBOOLE_0,RELAT_1,CLASSES1,CKB27,CKB28,CKB88;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FINSET_1,XXREAL_0,XREAL_0,NAT_1,CARD_1,NUMBERS,RELSET_1,INT_1,XCMPLX_0,VALUED_0,CKB4,CKB7,CKB16,CKB18,CKB19,CKB22,CKB36,CKB38,CKB39,CKB47,CKB48,CKB68,CKB69,CKB73,CKB74,CKB75,CKB76,CKB90,CKB92;
constructors WELLORD2,FUNCOP_1,FUNCT_4,XXREAL_0,XREAL_0,NAT_1,CARD_1,RELSET_1,XCMPLX_0,INT_1,VALUED_0,CKB1,CKB2,CKB15,CKB24,CKB25,CKB35,CKB40,CKB45,CKB46,CKB49,CKB65,CKB67,CKB71,CKB72,CKB87,CKB91;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve k for Nat;
reserve n for Nat;
reserve i for Nat;
reserve x for set;
reserve y for set;
reserve z for set;
reserve y1 for set;
reserve y2 for set;
reserve p for FinSequence;
reserve q for FinSequence;
defpred P[ set,set ]
 means
(ex k st ($1 = k & $2 = ( k + 1 )));
theorem
(((( rng p ) = ( rng q ) & p is  one-to-one) & q is  one-to-one) implies ( len p ) = ( len q ))
proof
defpred P[ FinSequence ]
 means
($1 is  one-to-one implies (for q holds ((( rng $1 ) = ( rng q ) & q is  one-to-one) implies ( len $1 ) = ( len q ))));
A1: P[ ( {} ) ] by RELAT_1:41;
now
let p;
let x;
assume A2: (p is  one-to-one implies (for q holds ((( rng p ) = ( rng q ) & q is  one-to-one) implies ( len p ) = ( len q ))));
assume A3: ( p ^ <* x *> ) is  one-to-one;
let q;
assume that
A4: ( rng ( p ^ <* x *> ) ) = ( rng q )
and
A5: q is  one-to-one;
A6: ( rng ( p ^ <* x *> ) ) = ( ( rng p ) \/ ( rng <* x *> ) ) by CKB60:1
.= ( ( rng p ) \/ { x } ) by CKB78:1;
x in { x } by TARSKI:def 1;
then x in ( rng q ) by A4,A6,XBOOLE_0:def 3;
then consider y such that A7: y in ( dom q ) and A8: x = ( q . y ) by FUNCT_1:def 3;
A9: y in ( Seg ( len q ) ) by A7,CKB24:def 1;
reconsider y as (Element of ( NAT )) by A7;
A10: 1 <= y by A9,CKB3:1;
then consider k being Nat such that A11: ( 1 + k ) = y by NAT_1:10;
A12: y <= ( len q ) by A9,CKB3:1;
then consider n being Nat such that A13: ( y + n ) = ( len q ) by NAT_1:10;
reconsider k,n as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider q1 = ( q | ( Seg k ) ) as FinSequence by CKB32:1;
defpred P[ Nat,set ]
 means
$2 = ( q . ( y + $1 ) );
A14: (for j being Nat holds (j in ( Seg n ) implies (ex x st P[ j,x ])));
consider q2 being FinSequence such that A15: ( dom q2 ) = ( Seg n ) and A16: (for j being Nat holds (j in ( Seg n ) implies P[ j,( q2 . j ) ])) from CKB27:sch 1(A14);
k <= y by A11,NAT_1:12;
then A17: k <= ( len q ) by A12,XXREAL_0:2;
then A18: ( len q1 ) = k by CKB34:1;
( ( len ( q1 ^ <* x *> ) ) + ( len q2 ) ) = ( ( ( len q1 ) + ( len <* x *> ) ) + ( len q2 ) ) by CKB51:1
.= ( ( k + 1 ) + ( len q2 ) ) by A18,CKB79:1
.= ( len q ) by A11,A13,A15,CKB24:def 1;
then A19: ( dom q ) = ( Seg ( ( len ( q1 ^ <* x *> ) ) + ( len q2 ) ) ) by CKB24:def 1;
A20: ( rng ( q1 ^ q2 ) ) = ( ( rng q ) \ { x } )
proof
thus ( rng ( q1 ^ q2 ) ) c= ( ( rng q ) \ { x } )
proof
let z being set;
assume z in ( rng ( q1 ^ q2 ) );
then A21: z in ( ( rng q1 ) \/ ( rng q2 ) ) by CKB60:1;
A22:now
assume A23: z in ( rng q1 );
A24: (( rng q1 ) = ( q .: ( Seg k ) ) & ( q .: ( Seg k ) ) c= ( rng q )) by RELAT_1:111,RELAT_1:115;
consider y1 such that A25: y1 in ( dom q1 ) and A26: ( q1 . y1 ) = z by A23,FUNCT_1:def 3;
A27: ( q1 . y1 ) = ( q . y1 ) by A25,FUNCT_1:47;
A28: y1 in ( Seg ( len q1 ) ) by A25,CKB24:def 1;
reconsider y1 as (Element of ( NAT )) by A25;
A29: y1 <= k by A18,A28,CKB3:1;
A30: k < y by A11,XREAL_1:29;
( Seg k ) c= ( Seg ( len q ) ) by A17,CKB9:1;
then ( dom q1 ) c= ( Seg ( len q ) ) by A17,CKB34:1;
then ( dom q1 ) c= ( dom q ) by CKB24:def 1;
then x <> z by A5,A7,A8,A25,A26,A27,A29,A30,FUNCT_1:def 4;
then (not z in { x }) by TARSKI:def 1;
hence thesis by A23,A24,XBOOLE_0:def 5;
end;
now
assume z in ( rng q2 );
then consider y1 such that A31: y1 in ( dom q2 ) and A32: ( q2 . y1 ) = z by FUNCT_1:def 3;
reconsider y1 as (Element of ( NAT )) by A31;
A33: ( q2 . y1 ) = ( q . ( y + y1 ) ) by A15,A16,A31;
A34: 1 <= ( y + y1 ) by A10,NAT_1:12;
y1 <= n by A15,A31,CKB3:1;
then ( y + y1 ) <= ( len q ) by A13,XREAL_1:7;
then ( y + y1 ) in ( Seg ( len q ) ) by A34;
then A35: ( y + y1 ) in ( dom q ) by CKB24:def 1;
then A36: z in ( rng q ) by A32,A33,FUNCT_1:def 3;
y1 <> ( 0 ) by A15,A31,CKB3:1;
then y <> ( y + y1 );
then x <> z by A5,A7,A8,A32,A33,A35,FUNCT_1:def 4;
then (not z in { x }) by TARSKI:def 1;
hence thesis by A36,XBOOLE_0:def 5;
end;
hence thesis by A21,A22,XBOOLE_0:def 3;
end;

let z being set;
assume A37: z in ( ( rng q ) \ { x } );
then consider y1 such that A38: y1 in ( dom q ) and A39: z = ( q . y1 ) by FUNCT_1:def 3;
A40: y1 in ( Seg ( len q ) ) by A38,CKB24:def 1;
reconsider y1 as (Element of ( NAT )) by A38;
(not z in { x }) by A37,XBOOLE_0:def 5;
then A41: y <> y1 by A8,A39,TARSKI:def 1;
A42:now
assume A43: y < y1;
then consider j being Nat such that A44: y1 = ( y + j ) by NAT_1:10;
reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
A45: 1 <= j by A43,A44,NAT_1:19;
( y + j ) <= ( len q ) by A40,A44,CKB3:1;
then j <= n by A13,XREAL_1:6;
then A46: j in ( Seg n ) by A45;
then z = ( q2 . j ) by A16,A39,A44;
hence z in ( rng q2 ) by A15,A46,FUNCT_1:def 3;
end;
now
assume A47: y1 < y;
A48: 1 <= y1 by A40,CKB3:1;
y1 <= k by A11,A47,NAT_1:13;
then y1 in ( Seg k ) by A48;
then A49: y1 in ( dom q1 ) by A17,CKB34:1;
then ( q1 . y1 ) = z by A39,FUNCT_1:47;
hence z in ( rng q1 ) by A49,FUNCT_1:def 3;
end;
then z in ( ( rng q1 ) \/ ( rng q2 ) ) by A41,A42,XBOOLE_0:def 3,XXREAL_0:1;
hence thesis by CKB60:1;
end;
A50: p = ( ( p ^ <* x *> ) | ( dom p ) ) by CKB50:1;
A51: ( rng p ) = ( ( rng ( p ^ <* x *> ) ) \ { x } )
proof
thus ( rng p ) c= ( ( rng ( p ^ <* x *> ) ) \ { x } )
proof
let z being set;
assume A52: z in ( rng p );
A53: ( rng p ) c= ( rng ( p ^ <* x *> ) ) by A50,RELAT_1:70;
consider y1 such that A54: y1 in ( dom p ) and A55: ( p . y1 ) = z by A52,FUNCT_1:def 3;
A56: y1 in ( Seg ( len p ) ) by A54,CKB24:def 1;
reconsider y1 as (Element of ( NAT )) by A54;
A57: ( ( p ^ <* x *> ) . ( ( len p ) + 1 ) ) = x by CKB82:1;
A58: ( ( p ^ <* x *> ) . y1 ) = ( p . y1 ) by A50,A54,FUNCT_1:47;
A59: y1 <= ( len p ) by A56,CKB3:1;
A60: ( len p ) < ( ( len p ) + 1 ) by XREAL_1:29;
A61: 1 <= y1 by A56,CKB3:1;
y1 <= ( ( len p ) + 1 ) by A59,A60,XXREAL_0:2;
then A62: y1 in ( Seg ( ( len p ) + 1 ) ) by A61;
A63: ( ( len p ) + 1 ) in ( Seg ( ( len p ) + 1 ) ) by CKB6:1;
A64: y1 in ( Seg ( ( len p ) + ( len <* x *> ) ) ) by A62,CKB80:1;
A65: ( ( len p ) + 1 ) in ( Seg ( ( len p ) + ( len <* x *> ) ) ) by A63,CKB80:1;
A66: y1 in ( dom ( p ^ <* x *> ) ) by A64,CKB49:def 1;
( ( len p ) + 1 ) in ( dom ( p ^ <* x *> ) ) by A65,CKB49:def 1;
then x <> z by A3,A55,A57,A58,A59,A60,A66,FUNCT_1:def 4;
then (not z in { x }) by TARSKI:def 1;
hence thesis by A52,A53,XBOOLE_0:def 5;
end;

let z being set;
assume A67: z in ( ( rng ( p ^ <* x *> ) ) \ { x } );
then A68: z in ( rng ( p ^ <* x *> ) );
A69: (not z in { x }) by A67,XBOOLE_0:def 5;
z in ( ( rng p ) \/ ( rng <* x *> ) ) by A68,CKB60:1;
then (z in ( rng p ) or z in ( rng <* x *> )) by XBOOLE_0:def 3;
hence thesis by A69,CKB78:1;
end;
A70: ( q1 ^ q2 ) is  one-to-one
proof
let y1;
let y2;
assume that
A71: (y1 in ( dom ( q1 ^ q2 ) ) & y2 in ( dom ( q1 ^ q2 ) ))
and
A72: ( ( q1 ^ q2 ) . y1 ) = ( ( q1 ^ q2 ) . y2 );
reconsider m1 = y1,m2 = y2 as (Element of ( NAT )) by A71;
A73: q1 is  one-to-one by A5,FUNCT_1:52;
A74:now
assume A75: (m1 in ( dom q1 ) & m2 in ( dom q1 ));
then (( ( q1 ^ q2 ) . m1 ) = ( q1 . m1 ) & ( ( q1 ^ q2 ) . m2 ) = ( q1 . m2 )) by CKB49:def 1;
hence thesis by A72,A73,A75,FUNCT_1:def 4;
end;
A76:now
assume A77: m1 in ( dom q1 );
given j being Nat such that
A78: j in ( dom q2 )
and
A79: m2 = ( ( len q1 ) + j );

reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
A80: ( ( q1 ^ q2 ) . m2 ) = ( q2 . j ) by A78,A79,CKB49:def 1;
(( ( q1 ^ q2 ) . m1 ) = ( q1 . m1 ) & ( q1 . m1 ) = ( q . m1 )) by A77,CKB49:def 1,FUNCT_1:47;
then A81: ( q . m1 ) = ( q . ( y + j ) ) by A15,A16,A72,A78,A80;
1 <= j by A15,A78,CKB3:1;
then A82: 1 <= ( y + j ) by NAT_1:12;
j <= n by A15,A78,CKB3:1;
then ( y + j ) <= ( len q ) by A13,XREAL_1:7;
then ( y + j ) in ( Seg ( len q ) ) by A82;
then A83: ( y + j ) in ( dom q ) by CKB24:def 1;
m1 in ( Seg k ) by A17,A77,CKB34:1;
then A84: m1 <= k by CKB3:1;
k < y by A11,XREAL_1:29;
then A85: m1 < y by A84,XXREAL_0:2;
(( dom q1 ) c= ( dom q ) & y <= ( y + j )) by NAT_1:12,RELAT_1:60;
hence thesis by A5,A77,A81,A83,A85,FUNCT_1:def 4;
end;
A86:now
assume A87: m2 in ( dom q1 );
given j being Nat such that
A88: j in ( dom q2 )
and
A89: m1 = ( ( len q1 ) + j );

reconsider j as (Element of ( NAT )) by ORDINAL1:def 12;
A90: ( ( q1 ^ q2 ) . m1 ) = ( q2 . j ) by A88,A89,CKB49:def 1;
(( ( q1 ^ q2 ) . m2 ) = ( q1 . m2 ) & ( q1 . m2 ) = ( q . m2 )) by A87,CKB49:def 1,FUNCT_1:47;
then A91: ( q . m2 ) = ( q . ( y + j ) ) by A15,A16,A72,A88,A90;
1 <= j by A15,A88,CKB3:1;
then A92: 1 <= ( y + j ) by NAT_1:12;
j <= n by A15,A88,CKB3:1;
then ( y + j ) <= ( len q ) by A13,XREAL_1:7;
then ( y + j ) in ( Seg ( len q ) ) by A92;
then A93: ( y + j ) in ( dom q ) by CKB24:def 1;
m2 in ( Seg k ) by A17,A87,CKB34:1;
then A94: m2 <= k by CKB3:1;
k < y by A11,XREAL_1:29;
then A95: m2 < y by A94,XXREAL_0:2;
(( dom q1 ) c= ( dom q ) & y <= ( y + j )) by NAT_1:12,RELAT_1:60;
hence thesis by A5,A87,A91,A93,A95,FUNCT_1:def 4;
end;
now
given j1 being Nat such that
A96: j1 in ( dom q2 )
and
A97: m1 = ( ( len q1 ) + j1 );

given j2 being Nat such that
A98: j2 in ( dom q2 )
and
A99: m2 = ( ( len q1 ) + j2 );

reconsider j1,j2 as (Element of ( NAT )) by ORDINAL1:def 12;
A100: ( ( q1 ^ q2 ) . m1 ) = ( q2 . j1 ) by A96,A97,CKB49:def 1;
A101: ( ( q1 ^ q2 ) . m2 ) = ( q2 . j2 ) by A98,A99,CKB49:def 1;
A102: ( ( q1 ^ q2 ) . m1 ) = ( q . ( y + j1 ) ) by A15,A16,A96,A100;
A103: ( ( q1 ^ q2 ) . m2 ) = ( q . ( y + j2 ) ) by A15,A16,A98,A101;
A104: 1 <= j1 by A15,A96,CKB3:1;
A105: 1 <= j2 by A15,A98,CKB3:1;
A106: 1 <= ( y + j1 ) by A104,NAT_1:12;
A107: 1 <= ( y + j2 ) by A105,NAT_1:12;
A108: j1 <= n by A15,A96,CKB3:1;
A109: j2 <= n by A15,A98,CKB3:1;
A110: ( y + j1 ) <= ( len q ) by A13,A108,XREAL_1:7;
A111: ( y + j2 ) <= ( len q ) by A13,A109,XREAL_1:7;
A112: ( y + j1 ) in ( Seg ( len q ) ) by A106,A110;
A113: ( y + j2 ) in ( Seg ( len q ) ) by A107,A111;
A114: ( y + j1 ) in ( dom q ) by A112,CKB24:def 1;
( y + j2 ) in ( dom q ) by A113,CKB24:def 1;
then ( y + j1 ) = ( y + j2 ) by A5,A72,A102,A103,A114,FUNCT_1:def 4;
hence thesis by A97,A99;
end;
hence thesis by A71,A74,A76,A86,CKB54:1;
end;
A115:now
let j being Nat;
assume A116: j in ( dom ( q1 ^ <* x *> ) );
A117:now
assume A118: j in ( dom q1 );
then ( ( q1 ^ <* x *> ) . j ) = ( q1 . j ) by CKB49:def 1;
hence ( q . j ) = ( ( q1 ^ <* x *> ) . j ) by A118,FUNCT_1:47;
end;
now
given i being Nat such that
A119: i in ( dom <* x *> )
and
A120: j = ( ( len q1 ) + i );

i in { 1 } by A119,CKB5:1,CKB78:1;
then i = 1 by TARSKI:def 1;
hence ( q . j ) = ( ( q1 ^ <* x *> ) . j ) by A8,A11,A18,A120,CKB82:1;
end;
hence ( q . j ) = ( ( q1 ^ <* x *> ) . j ) by A116,A117,CKB54:1;
end;
now
let j being Nat;
assume j in ( dom q2 );
hence ( q2 . j ) = ( q . ( ( ( len q1 ) + 1 ) + j ) ) by A11,A15,A16,A18
.= ( q . ( ( ( len q1 ) + ( len <* x *> ) ) + j ) ) by CKB79:1
.= ( q . ( ( len ( q1 ^ <* x *> ) ) + j ) ) by CKB51:1;
end;
then ( ( q1 ^ <* x *> ) ^ q2 ) = q by A19,A115,CKB49:def 1;
then A121: ( len q ) = ( ( len ( q1 ^ <* x *> ) ) + ( len q2 ) ) by CKB51:1
.= ( ( ( len <* x *> ) + ( len q1 ) ) + ( len q2 ) ) by CKB51:1
.= ( ( 1 + ( len q1 ) ) + ( len q2 ) ) by CKB80:1
.= ( 1 + ( ( len q1 ) + ( len q2 ) ) )
.= ( ( len ( q1 ^ q2 ) ) + 1 ) by CKB51:1;
( len ( p ^ <* x *> ) ) = ( ( len p ) + ( len <* x *> ) ) by CKB51:1
.= ( ( len p ) + 1 ) by CKB80:1;
hence ( len ( p ^ <* x *> ) ) = ( len q ) by A2,A3,A4,A20,A50,A51,A70,A121,FUNCT_1:52;
end;
then A122: (for p holds (for x holds (P[ p ] implies P[ ( p ^ <* x *> ) ])));
(for p holds P[ p ]) from CKB88:sch 1(A1,A122);
hence thesis;
end;
