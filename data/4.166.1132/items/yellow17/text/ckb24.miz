environ
vocabularies FUNCT_1,SUBSET_1,CARD_3,RELAT_1,XBOOLE_0,FUNCT_4,TARSKI,WAYBEL18,WAYBEL_3,PBOOLE,STRUCT_0,RLVECT_2,PRE_TOPC,RCOMP_1,SETFAM_1,FINSET_1,CANTOR_1,YELLOW_1,ZFMISC_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,STRUCT_0,RELAT_1,FUNCT_1,RELSET_1,FUNCT_7,FINSET_1,PBOOLE,PRALG_1,CARD_3,PRE_TOPC,TOPS_2,COMPTS_1,CANTOR_1,YELLOW_1,WAYBEL_3,WAYBEL18;
definitions TARSKI,COMPTS_1,XBOOLE_0,STRUCT_0;
theorems TARSKI,ZFMISC_1,RELAT_1,FUNCT_1,FUNCT_7,CARD_3,PRE_TOPC,TOPS_2,COMPTS_1,YELLOW_1,WAYBEL_3,WAYBEL_7,YELLOW_6,WAYBEL18,XBOOLE_0,XBOOLE_1,TOPMETR,PARTFUN1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23;
schemes CLASSES1,PRE_CIRC,FUNCT_1,CKB9;
registrations SUBSET_1,RELSET_1,FINSET_1,CARD_3,STRUCT_0,PRE_TOPC,MONOID_0,YELLOW_1,YELLOW_6,WAYBEL18;
constructors SETFAM_1,FUNCT_7,TOPS_2,COMPTS_1,CANTOR_1,MONOID_0,WAYBEL18,RELSET_1,FUNCT_4;
requirements SUBSET,BOOLE;
begin
theorem
Th23: (for I being non  empty set holds (for J being  TopSpace-yielding  non-Empty (ManySortedSet of I) holds (for i being (Element of I) holds (for F being (Subset of ( product_prebasis J )) holds (((for i being (Element of I) holds ( J . i ) is  compact) & (for G being  finite (Subset of F) holds (not ( [#] ( product J ) ) c= ( union G )))) implies (ex xi being (Element of ( J . i )) st (for G being  finite (Subset of F) holds (not ( ( proj (J,i) ) " { xi } ) c= ( union G )))))))))
proof
defpred P[ set ]
 means
(not contradiction);
let I being non  empty set;
let J being  TopSpace-yielding  non-Empty (ManySortedSet of I);
let i being (Element of I);
let F being (Subset of ( product_prebasis J ));
assume that
A1: (for i being (Element of I) holds ( J . i ) is  compact)
and
A2: (for G being  finite (Subset of F) holds (not ( [#] ( product J ) ) c= ( union G )));
deffunc F(set) = ( ( proj (J,i) ) " $1 );
defpred P[ set,set ]
 means
(($1 in $2 & ( ( proj (J,i) ) " $2 ) in F) & (for V being (Subset of ( J . i )) holds (V = $2 implies V is  open)));
assume A3: (for xi being (Element of ( J . i )) holds (ex G being  finite (Subset of F) st ( ( proj (J,i) ) " { xi } ) c= ( union G )));
A4: (for xi being set holds (xi in (the carrier of ( J . i )) implies (ex Ai being set st (Ai in ( bool (the carrier of ( J . i )) ) & P[ xi,Ai ]))))
proof
let xi being set;
assume xi in (the carrier of ( J . i ));
then reconsider xi9 = xi as (Element of ( J . i ));
consider G being  finite (Subset of F) such that A5: ( ( proj (J,i) ) " { xi9 } ) c= ( union G ) by A3;
consider Ai being (Subset of ( J . i )) such that Ai <> ( [#] ( J . i ) ) and A6: xi in Ai and A7: ( ( proj (J,i) ) " Ai ) in G and A8: Ai is  open by A2,A5,CKB23:1;
take Ai;
thus Ai in ( bool (the carrier of ( J . i )) );
thus xi in Ai by A6;
thus ( ( proj (J,i) ) " Ai ) in F by A7;
let V being (Subset of ( J . i ));
assume V = Ai;
hence thesis by A8;
end;
consider h being Function such that A9: ( dom h ) = (the carrier of ( J . i )) and A10: ( rng h ) c= ( bool (the carrier of ( J . i )) ) and A11: (for xi being set holds (xi in (the carrier of ( J . i )) implies P[ xi,( h . xi ) ])) from FUNCT_1:sch 5(A4);
reconsider bGip = ( rng h ) as (Subset-Family of ( J . i )) by A10;
reconsider bGip as (Subset-Family of ( J . i ));
A12: ( [#] ( J . i ) ) c= ( union bGip )
proof
let x being set;
assume x in ( [#] ( J . i ) );
then (x in ( h . x ) & ( h . x ) in bGip) by A9,A11,FUNCT_1:def 3;
hence thesis by TARSKI:def 4;
end;
(for P being (Subset of ( J . i )) holds (P in bGip implies P is  open))
proof
let P being (Subset of ( J . i ));
assume P in bGip;
then (ex x being set st (x in ( dom h ) & P = ( h . x ))) by FUNCT_1:def 3;
hence thesis by A9,A11;
end;
then A13: bGip is  open by TOPS_2:def 1;
( J . i ) is  compact by A1;
then consider Gip being (Subset-Family of ( J . i )) such that A14: Gip c= bGip and A15: ( [#] ( J . i ) ) c= ( union Gip ) and A16: Gip is  finite by A12,A13,CKB16:1;
reconsider Gip as non  empty  finite (Subset-Family of ( J . i )) by A15,A16,ZFMISC_1:2;
set Gp = { F(Ai) where Ai is (Element of Gip): P[ Ai ] };
A17: Gp c= F
proof
let A being set;
assume A in Gp;
then consider Ai being (Element of Gip) such that A18: A = ( ( proj (J,i) ) " Ai );
Ai in Gip;
then (ex x being set st (x in ( dom h ) & ( h . x ) = Ai)) by A14,FUNCT_1:def 3;
hence thesis by A9,A11,A18;
end;
Gp is  finite from PRE_CIRC:sch 1;
then reconsider Gp as  finite (Subset of F) by A17;
( [#] ( product J ) ) c= ( union Gp ) by A15,CKB20:1;
hence contradiction by A2;
end;
