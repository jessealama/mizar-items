environ
vocabularies XBOOLE_0,SUBSET_1,FUNCT_2,RELAT_1,FUNCT_1,TARSKI,ZFMISC_1,RELAT_2,ANALOAF,STRUCT_0,DIRAF,PARSP_1,INCSP_1,AFF_1,TRANSGEO;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_2,FUNCT_1,RELSET_1,STRUCT_0,ANALOAF,DIRAF,PARTFUN1,FUNCT_2,AFF_1,CKB1,CKB4,CKB17,CKB22,CKB29,CKB31,CKB33,CKB40,CKB42,CKB49,CKB65,CKB86,CKB100,CKB107;
definitions RELAT_2,CKB4,CKB17,CKB22,CKB29,CKB31,CKB40,CKB42,CKB49,CKB65,CKB86,CKB100,CKB107;
theorems DOMAIN_1,FUNCT_1,FUNCT_2,ANALOAF,DIRAF,AFF_1,PASCH,TARSKI,ZFMISC_1,RELAT_1,XBOOLE_0,STRUCT_0,CKB2,CKB3,CKB4,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49,CKB50,CKB51,CKB52,CKB53,CKB54,CKB55,CKB56,CKB57,CKB58,CKB59,CKB60,CKB61,CKB62,CKB63,CKB64,CKB65,CKB66,CKB67,CKB68,CKB69,CKB70,CKB71,CKB72,CKB73,CKB74,CKB75,CKB76,CKB77,CKB78,CKB79,CKB80,CKB81,CKB82,CKB83,CKB84,CKB85,CKB86,CKB87,CKB88,CKB89,CKB90,CKB91,CKB92,CKB93,CKB94,CKB95,CKB96,CKB97,CKB98,CKB99,CKB100,CKB101,CKB102,CKB103,CKB104,CKB105,CKB106,CKB107,CKB108,CKB109,CKB110,CKB111,CKB112,CKB113,CKB114,CKB115,CKB116;
schemes FUNCT_2,CKB5;
registrations XBOOLE_0,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,STRUCT_0,ANALOAF,DIRAF,CKB32;
constructors RELAT_2,PARTFUN1,DOMAIN_1,AFF_1,RELSET_1,CKB1,CKB4,CKB17,CKB22,CKB29,CKB31,CKB40,CKB42,CKB49,CKB65,CKB86,CKB100,CKB107;
requirements SUBSET,BOOLE;
begin
reserve A for non  empty set;
reserve a for (Element of A);
reserve b for (Element of A);
reserve x for (Element of A);
reserve y for (Element of A);
reserve f for (Permutation of A);
reserve AFP for AffinPlane;
reserve A for (Subset of AFP);
reserve C for (Subset of AFP);
reserve a for (Element of AFP);
reserve b for (Element of AFP);
reserve c for (Element of AFP);
reserve d for (Element of AFP);
reserve p for (Element of AFP);
reserve x for (Element of AFP);
reserve y for (Element of AFP);
reserve f for (Permutation of (the carrier of AFP));
theorem
((for A holds (A is  being_line implies ( f .: A ) is  being_line)) implies f is  collineation)
proof
assume A1: (for A holds (A is  being_line implies ( f .: A ) is  being_line));
A2: (a <> b implies ( f .: ( Line (a,b) ) ) = ( Line (( f . a ),( f . b )) ))
proof
set A = ( Line (a,b) );
set x = ( f . a );
set y = ( f . b );
set K = ( Line (x,y) );
set M = ( f .: A );
assume A3: a <> b;
then x <> y by FUNCT_2:58;
then A4: K is  being_line by AFF_1:def 3;
A is  being_line by A3,AFF_1:def 3;
then A5: M is  being_line by A1;
a in A by AFF_1:15;
then A6: x in M by CKB111:1;
b in A by AFF_1:15;
then A7: y in M by CKB111:1;
(x in K & y in K) by AFF_1:15;
hence thesis by A3,A4,A5,A6,A7,AFF_1:18,FUNCT_2:58;
end;
A8: (( f .: A ) is  being_line implies A is  being_line)
proof
set K = ( f .: A );
assume ( f .: A ) is  being_line;
then consider x,y such that A9: x <> y and A10: K = ( Line (x,y) ) by AFF_1:def 3;
y in K by A10,AFF_1:15;
then consider b such that b in A and A11: ( f . b ) = y by CKB112:1;
x in K by A10,AFF_1:15;
then consider a such that a in A and A12: ( f . a ) = x by CKB112:1;
set C = ( Line (a,b) );
(C is  being_line & ( f .: C ) = K) by A2,A9,A10,A12,A11,AFF_1:def 3;
hence thesis by CKB113:1;
end;
A13: (( f .: A ) // ( f .: C ) implies A // C)
proof
set K = ( f .: A );
set M = ( f .: C );
assume A14: ( f .: A ) // ( f .: C );
then M is  being_line by AFF_1:36;
then A15: C is  being_line by A8;
K is  being_line by A14,AFF_1:36;
then A17: A is  being_line by A8;
now
assume A18: A <> C;
assume (not A // C);
then consider p such that A19: (p in A & p in C) by A17,A15,AFF_1:58;
set x = ( f . p );
(x in K & x in M) by A19,CKB111:1;
hence contradiction by A14,A18,CKB113:1,AFF_1:45;
end;
hence thesis by A17,AFF_1:41;
end;
A20: (( f . a ),( f . b ) // ( f . c ),( f . d ) implies a,b // c,d)
proof
set x = ( f . a );
set y = ( f . b );
set z = ( f . c );
set t = ( f . d );
assume A21: ( f . a ),( f . b ) // ( f . c ),( f . d );
now
set C = ( Line (c,d) );
set A = ( Line (a,b) );
set K = ( f .: A );
set M = ( f .: C );
A22: (c in C & d in C) by AFF_1:15;
assume A23: (a <> b & c <> d);
then A24: (x <> y & z <> t) by FUNCT_2:58;
(K = ( Line (x,y) ) & M = ( Line (z,t) )) by A2,A23;
then A25: K // M by A21,A24,AFF_1:37;
(a in A & b in A) by AFF_1:15;
hence thesis by A13,A22,A25,AFF_1:39;
end;
hence thesis by AFF_1:3;
end;
A26: (A // C implies ( f .: A ) // ( f .: C ))
proof
assume A27: A // C;
then C is  being_line by AFF_1:36;
then A28: ( f .: C ) is  being_line by A1;
A is  being_line by A27,AFF_1:36;
then A30: ( f .: A ) is  being_line by A1;
then A31: ( f .: A ) // ( f .: A ) by AFF_1:41;
(A <> C implies ( f .: A ) // ( f .: C ))
proof
assume A32: A <> C;
assume (not ( f .: A ) // ( f .: C ));
then consider x such that A33: x in ( f .: A ) and A34: x in ( f .: C ) by A30,A28,AFF_1:58;
consider b such that A35: b in C and A36: x = ( f . b ) by A34,CKB112:1;
consider a such that A37: a in A and A38: x = ( f . a ) by A33,CKB112:1;
a = b by A38,A36,FUNCT_2:58;
hence contradiction by A27,A32,A37,A35,AFF_1:45;
end;
hence thesis by A31;
end;
(a,b // c,d implies ( f . a ),( f . b ) // ( f . c ),( f . d ))
proof
assume A39: a,b // c,d;
now
set C = ( Line (c,d) );
set A = ( Line (a,b) );
set K = ( f .: A );
set M = ( f .: C );
a in A by AFF_1:15;
then A40: ( f . a ) in K by CKB111:1;
b in A by AFF_1:15;
then A41: ( f . b ) in K by CKB111:1;
d in C by AFF_1:15;
then A42: ( f . d ) in M by CKB111:1;
c in C by AFF_1:15;
then A43: ( f . c ) in M by CKB111:1;
assume (a <> b & c <> d);
then A // C by A39,AFF_1:37;
hence thesis by A26,A40,A41,A43,A42,AFF_1:39;
end;
hence thesis by AFF_1:3;
end;
hence thesis by A20,CKB108:1;
end;
