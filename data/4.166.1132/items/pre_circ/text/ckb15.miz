environ
vocabularies NUMBERS,FINSET_1,XBOOLE_0,SUBSET_1,TARSKI,FUNCT_1,RELAT_1,FUNCOP_1,FUNCT_4,PBOOLE,FINSEQ_1,CARD_3,PARTFUN1,FUNCT_5,FUNCT_2,ZFMISC_1,FUNCT_6,NAT_1,CARD_1,ARYTM_3,MCART_1,FINSEQ_2,TREES_1,TREES_3,TREES_2,ORDINAL4,TREES_A,XXREAL_0,TREES_4,ARYTM_1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NUMBERS,XCMPLX_0,XREAL_0,MCART_1,CARD_1,RELAT_1,FUNCT_1,FINSET_1,PARTFUN1,FUNCT_2,XXREAL_0,XXREAL_2,BINOP_1,FUNCOP_1,FUNCT_4,FUNCT_7,CARD_3,TREES_2,TREES_1,TREES_3,TREES_4,FUNCT_5,FUNCT_6,PBOOLE,FINSEQ_1,FINSEQ_2,NAT_1;
definitions TARSKI,FUNCOP_1,WELLORD2,FUNCT_1,RELAT_1,PBOOLE,XBOOLE_0,SEQ_4,FINSEQ_2,FINSET_1;
theorems TARSKI,ZFMISC_1,FINSEQ_1,FINSEQ_3,GRFUNC_1,FUNCT_1,FUNCT_2,FUNCT_4,FUNCT_5,TREES_1,TREES_2,TREES_3,TREES_4,NAT_1,RELAT_1,CARD_3,FUNCOP_1,MCART_1,PBOOLE,CARD_2,CARD_1,FUNCT_6,FINSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_1,ORDERS_1,XREAL_1,XXREAL_0,XXREAL_2,XREAL_0,PARTFUN1,FUNCT_7,FINSEQ_2,CKB2,CKB3,CKB9,CKB10,CKB11,CKB14;
schemes DOMAIN_1,PBOOLE,FUNCT_1,FRAENKEL,FINSEQ_1,NAT_1,CKB1,CKB4,CKB12,CKB13;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSET_1,XREAL_0,MEMBERED,FINSEQ_1,CARD_3,PBOOLE,TREES_2,TREES_3,XXREAL_2,CARD_1,RELSET_1,TREES_1,CKB5,CKB6,CKB7,CKB8;
constructors WELLORD2,BINOP_1,FUNCT_4,SETWISEO,XXREAL_0,NAT_1,FUNCT_5,CARD_3,SEQ_4,PBOOLE,TREES_4,BINARITH,INT_1,SEQ_1,XXREAL_2,PARTFUN1,RELSET_1,FUNCT_7;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve i for set;
reserve x for set;
reserve y for set;
reserve g for Function;
theorem
(for A,B being non empty set holds (for C being  non-empty (ManySortedSet of A) holds (for InpFs being (ManySortedFunction of ( A --> B ),C) holds (for b being (Element of B) holds (ex c being (ManySortedSet of A) st (c = ( ( commute InpFs ) . b ) & c in C))))))
proof
let A being non empty set,B being non empty set;
let C being  non-empty (ManySortedSet of A);
let InpFs being (ManySortedFunction of ( A --> B ),C);
let b being (Element of B);
A1: ( dom InpFs ) = A by PARTFUN1:def 2;
( dom ( uncurry InpFs ) ) = [: A,B :]
proof
thus ( dom ( uncurry InpFs ) ) c= [: A,B :]
proof
let i;
assume i in ( dom ( uncurry InpFs ) );
then consider x,g,y such that A2: i = [ x,y ] and A3: x in ( dom InpFs ) and A4: g = ( InpFs . x ) and A5: y in ( dom g ) by FUNCT_5:def 2;
g is (Function of ( ( A --> B ) . x ),( C . x )) by A1,A3,A4,PBOOLE:def 15;
then ( dom g ) = ( ( A --> B ) . x ) by A1,A3,FUNCT_2:def 1;
then ( dom g ) = B by A1,A3,FUNCOP_1:7;
hence thesis by A1,A2,A3,A5,ZFMISC_1:87;
end;

let i1 being set,i2 being set;
reconsider g = ( InpFs . ( [ i1,i2 ] `1 ) ) as Function;
assume A6: [ i1,i2 ] in [: A,B :];
then A7: ( [ i1,i2 ] `1 ) in ( dom InpFs ) by A1,MCART_1:10;
g is (Function of ( ( A --> B ) . ( [ i1,i2 ] `1 ) ),( C . ( [ i1,i2 ] `1 ) )) by A6,MCART_1:10,PBOOLE:def 15;
then ( dom g ) = ( ( A --> B ) . ( [ i1,i2 ] `1 ) ) by A1,A7,FUNCT_2:def 1;
then ( dom g ) = B by A6,FUNCOP_1:7,MCART_1:10;
then A8: ( [ i1,i2 ] `2 ) in ( dom g ) by A6,MCART_1:10;
[ i1,i2 ] = [ ( [ i1,i2 ] `1 ),( [ i1,i2 ] `2 ) ] by A6,MCART_1:21;
hence thesis by A7,A8,FUNCT_5:38;
end;
then A9: (( commute InpFs ) = ( curry' ( uncurry InpFs ) ) & (ex g being Function st (((( ( curry' ( uncurry InpFs ) ) . b ) = g & ( dom g ) = A) & ( rng g ) c= ( rng ( uncurry InpFs ) )) & (for i holds (i in A implies ( g . i ) = ( ( uncurry InpFs ) . (i,b) )))))) by FUNCT_5:32,FUNCT_6:def 10;
then reconsider c = ( ( commute InpFs ) . b ) as (ManySortedSet of A) by PARTFUN1:def 2,RELAT_1:def 18;
take c;
thus c = ( ( commute InpFs ) . b );
let i;
reconsider h = ( InpFs . i ) as Function;
assume A10: i in A;
then ( ( A --> B ) . i ) = B by FUNCOP_1:7;
then A11: h is (Function of B,( C . i )) by A10,PBOOLE:def 15;
then A12: ( dom h ) = B by A10,FUNCT_2:def 1;
( c . i ) = ( ( uncurry InpFs ) . (i,b) ) by A9,A10
.= ( h . b ) by A1,A10,A12,FUNCT_5:38;
hence thesis by A10,A11,FUNCT_2:5;
end;
