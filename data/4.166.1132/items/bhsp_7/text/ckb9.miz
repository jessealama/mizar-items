environ
vocabularies NUMBERS,BHSP_1,PRE_TOPC,REAL_1,COMPLEX1,ARYTM_1,ARYTM_3,XXREAL_0,XREAL_0,ORDINAL1,CARD_1,SUBSET_1,RELAT_1,HAHNBAN,BHSP_6,FINSET_1,XBOOLE_0,TARSKI,BHSP_5,STRUCT_0,BINOP_2,FUNCT_1,ZFMISC_1,NAT_1,SEQ_2,ALGSTR_0,BINOP_1,SETWISEO,PROB_2,FINSEQ_1,FINSOP_1,SQUARE_1,NORMSP_1,SEMI_AF1,SUPINF_2,RSSPACE2;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,XREAL_0,BINOP_2,STRUCT_0,ALGSTR_0,COMPLEX1,REAL_1,NAT_1,FUNCT_1,FUNCT_2,RELAT_1,PRE_TOPC,BHSP_1,SQUARE_1,SEQ_2,BINOP_1,FINSET_1,SETWISEO,HAHNBAN,FINSEQ_1,FINSOP_1,BHSP_5,BHSP_6,RSSPACE2,PARTFUN1,XXREAL_0;
definitions TARSKI,SQUARE_1,RLVECT_1;
theorems XBOOLE_1,SQUARE_1,ZFMISC_1,XREAL_0,ABSVALUE,FUNCT_1,NAT_1,FUNCT_2,RLVECT_1,SEQ_2,SEQ_4,BHSP_1,BHSP_5,BHSP_6,UNIFORM1,CHAIN_1,XCMPLX_1,BINOP_2,XREAL_1,COMPLEX1,XXREAL_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8;
schemes NAT_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,XREAL_0,BINOP_2,MEMBERED,STRUCT_0,BHSP_5;
constructors BINOP_1,DOMAIN_1,SETWISEO,REAL_1,SQUARE_1,BINOP_2,COMPLEX1,SEQ_2,FINSOP_1,BHSP_3,BHSP_5,BHSP_6,SEQ_1,SUPINF_1,RELSET_1;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
theorem
Th6: (for X being RealHilbertSpace holds (((the addF of X) is  commutative  associative & (the addF of X) is  having_a_unity) implies (for S being (OrthonormalFamily of X) holds (for H being (Functional of X) holds ((S c= ( dom H ) & (for x being (Point of X) holds (x in S implies ( H . x ) = ( x .|. x )))) implies (S is  summable_set iff S is_summable_set_by H))))))
proof
let X being RealHilbertSpace;
assume that
A1: ((the addF of X) is  commutative  associative & (the addF of X) is  having_a_unity);
let S being (OrthonormalFamily of X);
let H being (Functional of X);
assume that
A2: S c= ( dom H )
and
A3: (for x being (Point of X) holds (x in S implies ( H . x ) = ( x .|. x )));
A4:now
assume A5: S is  summable_set;
now
let e being Real;
assume that
A6: ( 0 ) < e;
set e9 = ( sqrt e );
( 0 ) < e9 by A6,SQUARE_1:25;
then consider e1 being Real such that A7: ( 0 ) < e1 and A8: e1 < e9 by CHAIN_1:1;
( e1 ^2 ) < ( e9 ^2 ) by A7,A8,SQUARE_1:16;
then A9: ( e1 * e1 ) < e by A6,SQUARE_1:def 2;
consider Y0 being  finite (Subset of X) such that A10: (Y0 is non empty & Y0 c= S) and A11: (for Y1 being  finite (Subset of X) holds (((Y1 is non empty & Y1 c= S) & Y0 misses Y1) implies ||. ( setsum Y1 ) .|| < e1)) by A1,A5,A7,BHSP_6:10;
take Y0;
thus (Y0 is non empty & Y0 c= S) by A10;
let Y1 being  finite (Subset of X);
assume that
A12: Y1 is non empty
and
A13: Y1 c= S
and
A14: Y0 misses Y1;
Y1 is  finite  finite (OrthonormalFamily of X) by A13,CKB8:1;
then A15: Y1 is  finite  finite (OrthogonalFamily of X) by BHSP_5:def 9;
(for x being (Point of X) holds (x in Y1 implies ( H . x ) = ( x .|. x ))) by A3,A13;
then A16: ( ( setsum Y1 ) .|. ( setsum Y1 ) ) = ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) ) by A1,A2,A12,A13,A15,CKB6:1,XBOOLE_1:1;
( 0 ) <= ||. ( setsum Y1 ) .|| by BHSP_1:28;
then ( ||. ( setsum Y1 ) .|| ^2 ) < ( e1 ^2 ) by A11,A12,A13,A14,SQUARE_1:16;
then A17: ( ||. ( setsum Y1 ) .|| ^2 ) < e by A9,XXREAL_0:2;
(||. ( setsum Y1 ) .|| = ( sqrt ( ( setsum Y1 ) .|. ( setsum Y1 ) ) ) & ( 0 ) <= ( ( setsum Y1 ) .|. ( setsum Y1 ) )) by BHSP_1:def 2,BHSP_1:def 4;
then A18: ( ||. ( setsum Y1 ) .|| ^2 ) = ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) ) by A16,SQUARE_1:def 2;
( 0 ) <= ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) ) by A16,BHSP_1:def 2;
hence ( abs ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) ) ) < e by A17,A18,ABSVALUE:def 1;
end;
hence S is_summable_set_by H by CKB4:1;
end;
now
assume A19: S is_summable_set_by H;
now
let e being Real;
assume that
A20: ( 0 ) < e;
set e1 = ( e * e );
( 0 ) < e1 by A20,XREAL_1:129;
then consider Y0 being  finite (Subset of X) such that A21: (Y0 is non empty & Y0 c= S) and A22: (for Y1 being  finite (Subset of X) holds (((Y1 is non empty & Y1 c= S) & Y0 misses Y1) implies ( abs ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) ) ) < e1)) by A19,CKB4:1;
now
let Y1 being  finite (Subset of X);
assume that
A23: Y1 is non empty
and
A24: Y1 c= S
and
A25: Y0 misses Y1;
set F = ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) );
Y1 is  finite  finite (OrthonormalFamily of X) by A24,CKB8:1;
then A26: Y1 is  finite  finite (OrthogonalFamily of X) by BHSP_5:def 9;
( abs F ) < e1 by A22,A23,A24,A25;
then ( F - e1 ) < ( ( abs F ) - ( abs F ) ) by ABSVALUE:4,XREAL_1:15;
then A27: F < e1 by XREAL_1:48;
(for x being (Point of X) holds (x in Y1 implies ( H . x ) = ( x .|. x ))) by A3,A24;
then A28: ( ( setsum Y1 ) .|. ( setsum Y1 ) ) = F by A1,A2,A23,A24,A26,CKB6:1,XBOOLE_1:1;
(( 0 ) <= ( ( setsum Y1 ) .|. ( setsum Y1 ) ) & ||. ( setsum Y1 ) .|| = ( sqrt ( ( setsum Y1 ) .|. ( setsum Y1 ) ) )) by BHSP_1:def 2,BHSP_1:def 4;
then ( ||. ( setsum Y1 ) .|| ^2 ) < e1 by A27,A28,SQUARE_1:def 2;
then ( sqrt ( ||. ( setsum Y1 ) .|| ^2 ) ) < ( sqrt ( e ^2 ) ) by SQUARE_1:27,XREAL_1:63;
then ( sqrt ( ||. ( setsum Y1 ) .|| ^2 ) ) < e by A20,SQUARE_1:22;
hence ||. ( setsum Y1 ) .|| < e by BHSP_1:28,SQUARE_1:22;
end;
hence (ex Y0 being  finite (Subset of X) st ((Y0 is non empty & Y0 c= S) & (for Y1 being  finite (Subset of X) holds (((Y1 is non empty & Y1 c= S) & Y0 misses Y1) implies ||. ( setsum Y1 ) .|| < e)))) by A21;
end;
hence S is  summable_set by A1,BHSP_6:10;
end;
hence thesis by A4;
end;
