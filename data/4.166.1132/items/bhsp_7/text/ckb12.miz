environ
vocabularies NUMBERS,BHSP_1,PRE_TOPC,REAL_1,COMPLEX1,ARYTM_1,ARYTM_3,XXREAL_0,XREAL_0,ORDINAL1,CARD_1,SUBSET_1,RELAT_1,HAHNBAN,BHSP_6,FINSET_1,XBOOLE_0,TARSKI,BHSP_5,STRUCT_0,BINOP_2,FUNCT_1,ZFMISC_1,NAT_1,SEQ_2,ALGSTR_0,BINOP_1,SETWISEO,PROB_2,FINSEQ_1,FINSOP_1,SQUARE_1,NORMSP_1,SEMI_AF1,SUPINF_2,RSSPACE2;
notations TARSKI,XBOOLE_0,SUBSET_1,ZFMISC_1,ORDINAL1,NUMBERS,XREAL_0,BINOP_2,STRUCT_0,ALGSTR_0,COMPLEX1,REAL_1,NAT_1,FUNCT_1,FUNCT_2,RELAT_1,PRE_TOPC,BHSP_1,SQUARE_1,SEQ_2,BINOP_1,FINSET_1,SETWISEO,HAHNBAN,FINSEQ_1,FINSOP_1,BHSP_5,BHSP_6,RSSPACE2,PARTFUN1,XXREAL_0;
definitions TARSKI,SQUARE_1,RLVECT_1;
theorems XBOOLE_1,SQUARE_1,ZFMISC_1,XREAL_0,ABSVALUE,FUNCT_1,NAT_1,FUNCT_2,RLVECT_1,SEQ_2,SEQ_4,BHSP_1,BHSP_5,BHSP_6,UNIFORM1,CHAIN_1,XCMPLX_1,BINOP_2,XREAL_1,COMPLEX1,XXREAL_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11;
schemes NAT_1,FUNCT_2;
registrations XBOOLE_0,FUNCT_1,ORDINAL1,RELSET_1,FUNCT_2,FINSET_1,NUMBERS,XREAL_0,BINOP_2,MEMBERED,STRUCT_0,BHSP_5;
constructors BINOP_1,DOMAIN_1,SETWISEO,REAL_1,SQUARE_1,BINOP_2,COMPLEX1,SEQ_2,FINSOP_1,BHSP_3,BHSP_5,BHSP_6,SEQ_1,SUPINF_1,RELSET_1;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
theorem
(for X being RealHilbertSpace holds (((the addF of X) is  commutative  associative & (the addF of X) is  having_a_unity) implies (for S being (OrthonormalFamily of X) holds (for H being (Functional of X) holds ((S c= ( dom H ) & (for x being (Point of X) holds (x in S implies ( H . x ) = ( x .|. x )))) implies (S is  summable_set implies ( ( sum S ) .|. ( sum S ) ) = ( sum_byfunc (S,H) )))))))
proof
let X being RealHilbertSpace;
assume that
A1: ((the addF of X) is  commutative  associative & (the addF of X) is  having_a_unity);
let S being (OrthonormalFamily of X);
let H being (Functional of X);
assume that
A2: S c= ( dom H )
and
A3: (for x being (Point of X) holds (x in S implies ( H . x ) = ( x .|. x )));
A4: (for Y1 being  finite (Subset of X) holds ((Y1 is non empty & Y1 c= S) implies ( ( setsum Y1 ) .|. ( setsum Y1 ) ) = ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) )))
proof
let Y1 being  finite (Subset of X);
assume that
A5: Y1 is non empty
and
A6: Y1 c= S;
Y1 is  finite  finite (OrthonormalFamily of X) by A6,CKB8:1;
then A7: Y1 is  finite  finite (OrthogonalFamily of X) by BHSP_5:def 9;
(for x being (Point of X) holds (x in Y1 implies ( H . x ) = ( x .|. x ))) by A3,A6;
hence thesis by A1,A2,A5,A6,A7,CKB6:1,XBOOLE_1:1;
end;
set p1 = ( ( sum S ) .|. ( sum S ) );
set p2 = ( sum_byfunc (S,H) );
assume A8: S is  summable_set;
then A9: S is_summable_set_by H by A1,A2,A3,CKB9:1;
(for e being Real holds (( 0 ) < e implies ( abs ( p1 - p2 ) ) < e))
proof
let e being Real;
assume ( 0 ) < e;
then A10: ( ( 0 ) / 2 ) < ( e / 2 ) by XREAL_1:74;
then consider Y02 being  finite (Subset of X) such that Y02 is non empty and A11: Y02 c= S and A12: (for Y1 being  finite (Subset of X) holds ((Y02 c= Y1 & Y1 c= S) implies ( abs ( p2 - ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) ) ) ) < ( e / 2 ))) by A9,BHSP_6:def 7;
consider Y01 being  finite (Subset of X) such that A13: Y01 is non empty and A14: Y01 c= S and A15: (for Y1 being  finite (Subset of X) holds ((Y01 c= Y1 & Y1 c= S) implies ( abs ( p1 - ( ( setsum Y1 ) .|. ( setsum Y1 ) ) ) ) < ( e / 2 ))) by A8,A10,CKB10:1;
set Y1 = ( Y01 \/ Y02 );
A16: Y1 c= S by A14,A11,XBOOLE_1:8;
reconsider Y011 = Y01 as non empty set by A13;
set r = ( setopfunc (Y1,(the carrier of X),( REAL ),H,( addreal )) );
Y1 = ( Y011 \/ Y02 );
then ( ( setsum Y1 ) .|. ( setsum Y1 ) ) = r by A4,A14,A11,XBOOLE_1:8;
then (Y02 c= Y1 & ( abs ( p1 - r ) ) < ( e / 2 )) by A15,A16,XBOOLE_1:7;
then ( ( abs ( p1 - r ) ) + ( abs ( p2 - r ) ) ) < ( ( e / 2 ) + ( e / 2 ) ) by A12,A16,XREAL_1:8;
then A17: ( ( abs ( p1 - r ) ) + ( abs ( r - p2 ) ) ) < e by UNIFORM1:11;
( p1 - p2 ) = ( ( p1 - r ) + ( r - p2 ) );
then ( abs ( p1 - p2 ) ) <= ( ( abs ( p1 - r ) ) + ( abs ( r - p2 ) ) ) by COMPLEX1:56;
hence thesis by A17,XXREAL_0:2;
end;
hence thesis by CKB11:1;
end;
