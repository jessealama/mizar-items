environ
vocabularies NUMBERS,REAL_1,SUBSET_1,SEQ_1,FDIFF_1,FUNCT_1,RCOMP_1,PARTFUN1,ARYTM_1,VALUED_0,SEQ_2,ORDINAL2,CARD_1,RELAT_1,ARYTM_3,XREAL_0,ORDINAL1,XXREAL_0,COMPLEX1,NAT_1,TARSKI,VALUED_1,FUNCT_2,FUNCOP_1,XXREAL_1,FCONT_1,SQUARE_1,XBOOLE_0,ORDINAL4,LIMFUNC1;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,FUNCT_1,FUNCT_2,VALUED_0,VALUED_1,SEQ_1,RELSET_1,SEQ_2,PARTFUN1,SQUARE_1,PARTFUN2,RFUNCT_1,RCOMP_1,FCONT_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB1;
definitions TARSKI,XBOOLE_0,FDIFF_1,SQUARE_1,SUBSET_1,LIMFUNC1,PROB_1,VALUED_0,VALUED_1,SEQM_3;
theorems TARSKI,FUNCT_1,FUNCT_2,NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,PARTFUN1,PARTFUN2,RCOMP_1,RFUNCT_1,RFUNCT_2,FCONT_1,FDIFF_1,SCHEME1,ROLLE,FCONT_3,FUNCT_3,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,COMPLEX1,FUNCOP_1,XREAL_1,XXREAL_0,ORDINAL1,VALUED_1,XXREAL_1,VALUED_0,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13;
schemes NAT_1,RECDEF_1,SEQ_1,SCHEME1,FUNCT_2,CKB11;
registrations ORDINAL1,RELSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,MEMBERED,SEQM_3,RCOMP_1,RFUNCT_2,FDIFF_1,FCONT_3,VALUED_0,VALUED_1,FUNCT_2,FUNCOP_1,SEQ_4;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,PARTFUN2,RFUNCT_1,RFUNCT_2,FCONT_1,LIMFUNC1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,RELSET_1,BINOP_2,RVSUM_1,CKB1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve x0 for Real;
reserve g for Real;
reserve n for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve h for  convergent_to_0 Real_Sequence;
reserve c for  constant Real_Sequence;
reserve f for (PartFunc of ( REAL ),( REAL ));
theorem
Th11: (f is_differentiable_in x0 iff ((ex N being (Neighbourhood of x0) st N c= ( dom f )) & (for h holds (for c holds ((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom f )) implies ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent)))))
proof
thus (f is_differentiable_in x0 implies ((ex N being (Neighbourhood of x0) st N c= ( dom f )) & (for h holds (for c holds ((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom f )) implies ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent)))))
proof
assume A1: f is_differentiable_in x0;
then consider N being (Neighbourhood of x0) such that A2: N c= ( dom f ) and (ex L being LINEAR st (ex R being REST st (for g holds (g in N implies ( ( f . g ) - ( f . x0 ) ) = ( ( L . ( g - x0 ) ) + ( R . ( g - x0 ) ) ))))) by FDIFF_1:def 4;
thus (ex N being (Neighbourhood of x0) st N c= ( dom f )) by A2;
let h;
let c;
assume that
A3: ( rng c ) = { x0 }
and
A4: ( rng ( h + c ) ) c= ( dom f );
A5: ( lim h ) = ( 0 ) by FDIFF_1:def 1;
consider r being  real number such that A6: ( 0 ) < r and A7: N = ]. ( x0 - r ),( x0 + r ) .[ by RCOMP_1:def 6;
h is  convergent by FDIFF_1:def 1;
then consider k such that A8: (for n holds (k <= n implies ( abs ( ( h . n ) - ( 0 ) ) ) < r)) by A5,A6,SEQ_2:def 7;
set h1 = ( h ^\ k );
( rng ( h1 + c ) ) c= N
proof
let x;
assume x in ( rng ( h1 + c ) );
then consider n such that A9: x = ( ( h1 + c ) . n ) by FUNCT_2:113;
( c . n ) in ( rng c ) by VALUED_0:28;
then ( c . n ) = x0 by A3,TARSKI:def 1;
then A10: x = ( ( h1 . n ) + x0 ) by A9,SEQ_1:7
.= ( ( h . ( n + k ) ) + x0 ) by NAT_1:def 3;
( abs ( ( h . ( n + k ) ) - ( 0 ) ) ) < r by A8,NAT_1:12;
then ( h . ( n + k ) ) in ]. ( ( 0 ) - r ),( ( 0 ) + r ) .[ by RCOMP_1:1;
then ( h . ( n + k ) ) in { g: (( - r ) < g & g < r) } by RCOMP_1:def 2;
then A11: (ex g st ((g = ( h . ( n + k ) ) & ( - r ) < g) & g < r));
then A12: ( ( h . ( n + k ) ) + x0 ) < ( x0 + r ) by XREAL_1:6;
( x0 + ( - r ) ) < ( ( h . ( n + k ) ) + x0 ) by A11,XREAL_1:6;
then ( ( h . ( n + k ) ) + x0 ) in { g: (( x0 - r ) < g & g < ( x0 + r )) } by A12;
hence thesis by A7,A10,RCOMP_1:def 2;
end;
then A13: ( ( h1 " ) (#) ( ( f /* ( h1 + c ) ) - ( f /* c ) ) ) is  convergent by A1,A2,A3,FDIFF_1:12;
A14: { x0 } c= ( dom f )
proof
let x;
assume x in { x0 };
then A15: x = x0 by TARSKI:def 1;
x0 in N by RCOMP_1:16;
hence thesis by A2,A15;
end;
( c ^\ k ) = c by VALUED_0:26;
then ( ( h1 " ) (#) ( ( f /* ( h1 + c ) ) - ( f /* c ) ) ) = ( ( h1 " ) (#) ( ( f /* ( ( h + c ) ^\ k ) ) - ( f /* ( c ^\ k ) ) ) ) by SEQM_3:15
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) ^\ k ) - ( f /* ( c ^\ k ) ) ) ) by A4,VALUED_0:27
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) ^\ k ) - ( ( f /* c ) ^\ k ) ) ) by A3,A14,VALUED_0:27
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ k ) ) by SEQM_3:17
.= ( ( ( h " ) ^\ k ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ k ) ) by SEQM_3:18
.= ( ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) ^\ k ) by SEQM_3:19;
hence thesis by A13,SEQ_4:21;
end;

assume that
A16: (ex N being (Neighbourhood of x0) st N c= ( dom f ))
and
A17: (for h holds (for c holds ((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom f )) implies ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent)));
thus thesis by A16,A17,CKB13:1;
end;
