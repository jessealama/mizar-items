environ
vocabularies NUMBERS,REAL_1,SUBSET_1,SEQ_1,FDIFF_1,FUNCT_1,RCOMP_1,PARTFUN1,ARYTM_1,VALUED_0,SEQ_2,ORDINAL2,CARD_1,RELAT_1,ARYTM_3,XREAL_0,ORDINAL1,XXREAL_0,COMPLEX1,NAT_1,TARSKI,VALUED_1,FUNCT_2,FUNCOP_1,XXREAL_1,FCONT_1,SQUARE_1,XBOOLE_0,ORDINAL4,LIMFUNC1;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,FUNCT_1,FUNCT_2,VALUED_0,VALUED_1,SEQ_1,RELSET_1,SEQ_2,PARTFUN1,SQUARE_1,PARTFUN2,RFUNCT_1,RCOMP_1,FCONT_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB1;
definitions TARSKI,XBOOLE_0,FDIFF_1,SQUARE_1,SUBSET_1,LIMFUNC1,PROB_1,VALUED_0,VALUED_1,SEQM_3;
theorems TARSKI,FUNCT_1,FUNCT_2,NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,PARTFUN1,PARTFUN2,RCOMP_1,RFUNCT_1,RFUNCT_2,FCONT_1,FDIFF_1,SCHEME1,ROLLE,FCONT_3,FUNCT_3,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,COMPLEX1,FUNCOP_1,XREAL_1,XXREAL_0,ORDINAL1,VALUED_1,XXREAL_1,VALUED_0,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25;
schemes NAT_1,RECDEF_1,SEQ_1,SCHEME1,FUNCT_2,CKB11;
registrations ORDINAL1,RELSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,MEMBERED,SEQM_3,RCOMP_1,RFUNCT_2,FDIFF_1,FCONT_3,VALUED_0,VALUED_1,FUNCT_2,FUNCOP_1,SEQ_4;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,PARTFUN2,RFUNCT_1,RFUNCT_2,FCONT_1,LIMFUNC1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,RELSET_1,BINOP_2,RVSUM_1,CKB1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve x0 for Real;
reserve A for  open (Subset of ( REAL ));
reserve f1 for (PartFunc of ( REAL ),( REAL ));
reserve f2 for (PartFunc of ( REAL ),( REAL ));
theorem
(((f1 is_differentiable_on A & f2 is_differentiable_on A) & (for x0 holds (x0 in A implies ( f2 . x0 ) <> ( 0 )))) implies (( f1 / f2 ) is_differentiable_on A & ( ( f1 / f2 ) `| A ) = ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) / ( f2 (#) f2 ) )))
proof
assume that
A1: f1 is_differentiable_on A
and
A2: f2 is_differentiable_on A
and
A3: (for x0 holds (x0 in A implies ( f2 . x0 ) <> ( 0 )));
A4: A c= ( dom f1 ) by A1,FDIFF_1:9;
A5: A c= ( dom f2 ) by A2,FDIFF_1:9;
A6: A c= ( ( dom f2 ) \ ( f2 " { ( 0 ) } ) )
proof
let x;
assume A7: x in A;
then reconsider x9 = x as Real;
assume (not x in ( ( dom f2 ) \ ( f2 " { ( 0 ) } ) ));
then ((not x in ( dom f2 )) or x in ( f2 " { ( 0 ) } )) by XBOOLE_0:def 5;
then ( f2 . x9 ) in { ( 0 ) } by A5,A7,FUNCT_1:def 7;
then ( f2 . x9 ) = ( 0 ) by TARSKI:def 1;
hence contradiction by A3,A7;
end;
then A c= ( ( dom f1 ) /\ ( ( dom f2 ) \ ( f2 " { ( 0 ) } ) ) ) by A4,XBOOLE_1:19;
then A8: A c= ( dom ( f1 / f2 ) ) by RFUNCT_1:def 1;
A9:now
let x0;
assume A10: x0 in A;
hence A11: ( f2 . x0 ) <> ( 0 ) by A3;
thus A12: f1 is_differentiable_in x0 by A1,A10,FDIFF_1:9;
thus f2 is_differentiable_in x0 by A2,A10,FDIFF_1:9;
hence ( f1 / f2 ) is_differentiable_in x0 by A11,A12,CKB18:1;
end;
then (for x0 holds (x0 in A implies ( f1 / f2 ) is_differentiable_in x0));
hence A13: ( f1 / f2 ) is_differentiable_on A by A8,FDIFF_1:9;
then A14: A = ( dom ( ( f1 / f2 ) `| A ) ) by FDIFF_1:def 7;
A15:now
let x0;
assume A16: x0 in ( dom ( ( f1 / f2 ) `| A ) );
then A17: f1 is_differentiable_in x0 by A9,A14;
( dom ( f2 `| A ) ) = A by A2,FDIFF_1:def 7;
then x0 in ( ( dom ( f2 `| A ) ) /\ ( dom f1 ) ) by A4,A14,A16,XBOOLE_0:def 4;
then A18: x0 in ( dom ( ( f2 `| A ) (#) f1 ) ) by VALUED_1:def 4;
( dom ( f1 `| A ) ) = A by A1,FDIFF_1:def 7;
then x0 in ( ( dom ( f1 `| A ) ) /\ ( dom f2 ) ) by A5,A14,A16,XBOOLE_0:def 4;
then x0 in ( dom ( ( f1 `| A ) (#) f2 ) ) by VALUED_1:def 4;
then x0 in ( ( dom ( ( f1 `| A ) (#) f2 ) ) /\ ( dom ( ( f2 `| A ) (#) f1 ) ) ) by A18,XBOOLE_0:def 4;
then A19: x0 in ( dom ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) ) by VALUED_1:12;
A20: ( f2 . x0 ) <> ( 0 ) by A9,A14,A16;
then ( ( f2 . x0 ) * ( f2 . x0 ) ) <> ( 0 );
then ( ( f2 (#) f2 ) . x0 ) <> ( 0 ) by VALUED_1:5;
then (not ( ( f2 (#) f2 ) . x0 ) in { ( 0 ) }) by TARSKI:def 1;
then A21: (not x0 in ( ( f2 (#) f2 ) " { ( 0 ) } )) by FUNCT_1:def 7;
x0 in ( ( dom f2 ) /\ ( dom f2 ) ) by A5,A14,A16;
then x0 in ( dom ( f2 (#) f2 ) ) by VALUED_1:def 4;
then x0 in ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) by A21,XBOOLE_0:def 5;
then x0 in ( ( dom ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by A19,XBOOLE_0:def 4;
then A22: x0 in ( dom ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) / ( f2 (#) f2 ) ) ) by RFUNCT_1:def 1;
A23: f2 is_differentiable_in x0 by A9,A14,A16;
thus ( ( ( f1 / f2 ) `| A ) . x0 ) = ( diff (( f1 / f2 ),x0) ) by A13,A14,A16,FDIFF_1:def 7
.= ( ( ( ( diff (f1,x0) ) * ( f2 . x0 ) ) - ( ( diff (f2,x0) ) * ( f1 . x0 ) ) ) / ( ( f2 . x0 ) ^2 ) ) by A20,A17,A23,CKB18:1
.= ( ( ( ( ( f1 `| A ) . x0 ) * ( f2 . x0 ) ) - ( ( diff (f2,x0) ) * ( f1 . x0 ) ) ) / ( ( f2 . x0 ) ^2 ) ) by A1,A14,A16,FDIFF_1:def 7
.= ( ( ( ( ( f1 `| A ) . x0 ) * ( f2 . x0 ) ) - ( ( ( f2 `| A ) . x0 ) * ( f1 . x0 ) ) ) / ( ( f2 . x0 ) ^2 ) ) by A2,A14,A16,FDIFF_1:def 7
.= ( ( ( ( ( f1 `| A ) (#) f2 ) . x0 ) - ( ( ( f2 `| A ) . x0 ) * ( f1 . x0 ) ) ) / ( ( f2 . x0 ) ^2 ) ) by VALUED_1:5
.= ( ( ( ( ( f1 `| A ) (#) f2 ) . x0 ) - ( ( ( f2 `| A ) (#) f1 ) . x0 ) ) / ( ( f2 . x0 ) ^2 ) ) by VALUED_1:5
.= ( ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) . x0 ) / ( ( f2 . x0 ) * ( f2 . x0 ) ) ) by A19,VALUED_1:13
.= ( ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) . x0 ) / ( ( f2 (#) f2 ) . x0 ) ) by VALUED_1:5
.= ( ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) . x0 ) * ( ( ( f2 (#) f2 ) . x0 ) " ) ) by XCMPLX_0:def 9
.= ( ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) / ( f2 (#) f2 ) ) . x0 ) by A22,RFUNCT_1:def 1;
end;
( dom ( ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) / ( f2 (#) f2 ) ) ) = ( ( dom ( ( ( f1 `| A ) (#) f2 ) - ( ( f2 `| A ) (#) f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by RFUNCT_1:def 1
.= ( ( ( dom ( ( f1 `| A ) (#) f2 ) ) /\ ( dom ( ( f2 `| A ) (#) f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by VALUED_1:12
.= ( ( ( ( dom ( f1 `| A ) ) /\ ( dom f2 ) ) /\ ( dom ( ( f2 `| A ) (#) f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by VALUED_1:def 4
.= ( ( ( A /\ ( dom f2 ) ) /\ ( dom ( ( f2 `| A ) (#) f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by A1,FDIFF_1:def 7
.= ( ( A /\ ( dom ( ( f2 `| A ) (#) f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by A5,XBOOLE_1:28
.= ( ( A /\ ( ( dom ( f2 `| A ) ) /\ ( dom f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by VALUED_1:def 4
.= ( ( A /\ ( A /\ ( dom f1 ) ) ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by A2,FDIFF_1:def 7
.= ( ( A /\ A ) /\ ( ( dom ( f2 (#) f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by A4,XBOOLE_1:28
.= ( A /\ ( ( ( dom f2 ) /\ ( dom f2 ) ) \ ( ( f2 (#) f2 ) " { ( 0 ) } ) ) ) by VALUED_1:def 4
.= ( A /\ ( ( dom f2 ) \ ( f2 " { ( 0 ) } ) ) ) by CKB25:1
.= ( dom ( ( f1 / f2 ) `| A ) ) by A6,A14,XBOOLE_1:28;
hence thesis by A15,PARTFUN1:5;
end;
