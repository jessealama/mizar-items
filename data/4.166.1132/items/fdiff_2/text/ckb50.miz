environ
vocabularies NUMBERS,REAL_1,SUBSET_1,SEQ_1,FDIFF_1,FUNCT_1,RCOMP_1,PARTFUN1,ARYTM_1,VALUED_0,SEQ_2,ORDINAL2,CARD_1,RELAT_1,ARYTM_3,XREAL_0,ORDINAL1,XXREAL_0,COMPLEX1,NAT_1,TARSKI,VALUED_1,FUNCT_2,FUNCOP_1,XXREAL_1,FCONT_1,SQUARE_1,XBOOLE_0,ORDINAL4,LIMFUNC1;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,FUNCT_1,FUNCT_2,VALUED_0,VALUED_1,SEQ_1,RELSET_1,SEQ_2,PARTFUN1,SQUARE_1,PARTFUN2,RFUNCT_1,RCOMP_1,FCONT_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB1;
definitions TARSKI,XBOOLE_0,FDIFF_1,SQUARE_1,SUBSET_1,LIMFUNC1,PROB_1,VALUED_0,VALUED_1,SEQM_3;
theorems TARSKI,FUNCT_1,FUNCT_2,NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,PARTFUN1,PARTFUN2,RCOMP_1,RFUNCT_1,RFUNCT_2,FCONT_1,FDIFF_1,SCHEME1,ROLLE,FCONT_3,FUNCT_3,RELAT_1,RELSET_1,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,COMPLEX1,FUNCOP_1,XREAL_1,XXREAL_0,ORDINAL1,VALUED_1,XXREAL_1,VALUED_0,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48,CKB49;
schemes NAT_1,RECDEF_1,SEQ_1,SCHEME1,FUNCT_2,CKB11;
registrations ORDINAL1,RELSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,NAT_1,MEMBERED,SEQM_3,RCOMP_1,RFUNCT_2,FDIFF_1,FCONT_3,VALUED_0,VALUED_1,FUNCT_2,FUNCOP_1,SEQ_4;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,PARTFUN2,RFUNCT_1,RFUNCT_2,FCONT_1,LIMFUNC1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,RELSET_1,BINOP_2,RVSUM_1,CKB1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve x0 for Real;
reserve g for Real;
reserve n for (Element of ( NAT ));
reserve b for Real_Sequence;
reserve h for  convergent_to_0 Real_Sequence;
reserve c for  constant Real_Sequence;
theorem
(for f being  one-to-one (PartFunc of ( REAL ),( REAL )) holds (((( [#] ( REAL ) ) c= ( dom f ) & f is_differentiable_on ( [#] ( REAL ) )) & ((for x0 holds ( 0 ) < ( diff (f,x0) )) or (for x0 holds ( diff (f,x0) ) < ( 0 )))) implies ((f is  one-to-one & ( f " ) is_differentiable_on ( dom ( f " ) )) & (for x0 holds (x0 in ( dom ( f " ) ) implies ( diff (( f " ),x0) ) = ( 1 / ( diff (f,( ( f " ) . x0 )) ) ))))))
proof
let f being  one-to-one (PartFunc of ( REAL ),( REAL ));
assume that
A1: ( [#] ( REAL ) ) c= ( dom f )
and
A2: f is_differentiable_on ( [#] ( REAL ) )
and
A3: ((for x0 holds ( 0 ) < ( diff (f,x0) )) or (for x0 holds ( diff (f,x0) ) < ( 0 )));
A4: ( rng f ) is  open by A1,A2,A3,CKB49:1;
thus f is  one-to-one;
A5: ( dom ( f " ) ) = ( rng f ) by FUNCT_1:33;
A6: ( rng ( f " ) ) = ( dom f ) by FUNCT_1:33;
A7: (for y0 being Real holds (y0 in ( dom ( f " ) ) implies (( f " ) is_differentiable_in y0 & ( diff (( f " ),y0) ) = ( 1 / ( diff (f,( ( f " ) . y0 )) ) ))))
proof
let y0 being Real;
assume A8: y0 in ( dom ( f " ) );
then consider x0 such that A9: x0 in ( dom f ) and A10: y0 = ( f . x0 ) by A5,PARTFUN1:3;
A11: (for h holds (for c holds ((( rng c ) = { y0 } & ( rng ( h + c ) ) c= ( dom ( f " ) )) implies (( ( h " ) (#) ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) ) is  convergent & ( lim ( ( h " ) (#) ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) ) ) = ( 1 / ( diff (f,( ( f " ) . y0 )) ) )))))
proof
reconsider a = ( ( NAT ) --> ( ( f " ) . y0 ) ) as Real_Sequence by FUNCOP_1:45;
let h;
let c;
assume that
A12: ( rng c ) = { y0 }
and
A13: ( rng ( h + c ) ) c= ( dom ( f " ) );
A14: ( lim ( h + c ) ) = y0 by A12,CKB5:1;
reconsider a as  constant Real_Sequence;
defpred P[ (Element of ( NAT )), real number ]
 means
(for r1,r2 being  real number holds ((r1 = ( ( h + c ) . $1 ) & r2 = ( a . $1 )) implies r1 = ( f . ( r2 + $2 ) )));
A15: (for n holds (ex r being Real st P[ n,r ]))
proof
let n;
( ( h + c ) . n ) in ( rng ( h + c ) ) by VALUED_0:28;
then consider g such that g in ( dom f ) and A16: ( ( h + c ) . n ) = ( f . g ) by A5,A13,PARTFUN1:3;
take r = ( g - x0 );
let r1 being  real number,r2 being  real number;
assume that
A17: r1 = ( ( h + c ) . n )
and
A18: r2 = ( a . n );
( a . n ) = ( ( f " ) . ( f . x0 ) ) by A10,FUNCOP_1:7
.= x0 by A9,FUNCT_1:34;
hence r1 = ( f . ( r2 + r ) ) by A16,A17,A18;
end;
consider b such that A19: (for n holds P[ n,( b . n ) ]) from FUNCT_2:sch 3(A15);
A20:now
let n;
( c . n ) in ( rng c ) by VALUED_0:28;
hence ( c . n ) = ( f . x0 ) by A10,A12,TARSKI:def 1;
end;
A21: h is  non-zero by FDIFF_1:def 1;
now
given n such that
A22: ( b . n ) = ( 0 );

A23: ( ( h + c ) . n ) = ( ( h . n ) + ( c . n ) ) by SEQ_1:7
.= ( ( h . n ) + ( f . x0 ) ) by A20;
( f . ( ( a . n ) + ( b . n ) ) ) = ( f . ( ( f " ) . ( f . x0 ) ) ) by A10,A22,FUNCOP_1:7
.= ( f . x0 ) by A9,FUNCT_1:34;
then ( ( h . n ) + ( f . x0 ) ) = ( f . x0 ) by A19,A23;
hence contradiction by A21,SEQ_1:5;
end;
then A24: b is  non-zero by SEQ_1:5;
A25: ( [#] ( REAL ) ) c= ( dom f ) by A2,FDIFF_1:def 6;
then ( dom f ) = ( REAL ) by XBOOLE_0:def 10;
then A26: f is  total by PARTFUN1:def 2;
A27: y0 in ( dom ( ( f " ) | ( rng f ) ) ) by A5,A8,RELAT_1:69;
(( f | ( [#] ( REAL ) ) ) is  increasing or ( f | ( [#] ( REAL ) ) ) is  decreasing) by A1,A2,A3,CKB42:1,CKB43:1;
then ( ( f " ) | ( rng f ) ) is  continuous by A26,FCONT_3:22;
then ( ( f " ) | ( dom ( f " ) ) ) is_continuous_in y0 by A5,A27,FCONT_1:def 2;
then A28: ( f " ) is_continuous_in y0 by RELAT_1:68;
A29:now
let n;
A30: ( ( b . n ) + ( a . n ) ) in ( [#] ( REAL ) );
thus ( ( ( ( f " ) /* ( h + c ) ) - a ) . n ) = ( ( ( ( f " ) /* ( h + c ) ) . n ) - ( a . n ) ) by RFUNCT_2:1
.= ( ( ( f " ) . ( ( h + c ) . n ) ) - ( a . n ) ) by A13,FUNCT_2:108
.= ( ( ( f " ) . ( f . ( ( b . n ) + ( a . n ) ) ) ) - ( a . n ) ) by A19
.= ( ( ( b . n ) + ( a . n ) ) - ( a . n ) ) by A25,A30,FUNCT_1:34
.= ( b . n );
end;
A31: ( h + c ) is  convergent by A12,CKB5:1;
then A32: ( ( f " ) /* ( h + c ) ) is  convergent by A13,A14,A28,FCONT_1:def 1;
then ( ( ( f " ) /* ( h + c ) ) - a ) is  convergent by SEQ_2:11;
then A33: b is  convergent by A29,FUNCT_2:63;
A34: ( lim a ) = ( a . ( 0 ) ) by SEQ_4:26
.= ( ( f " ) . y0 ) by FUNCOP_1:7;
( ( f " ) . y0 ) = ( lim ( ( f " ) /* ( h + c ) ) ) by A13,A31,A14,A28,FCONT_1:def 1;
then ( lim ( ( ( f " ) /* ( h + c ) ) - a ) ) = ( ( ( f " ) . y0 ) - ( ( f " ) . y0 ) ) by A32,A34,SEQ_2:12
.= ( 0 );
then A35: ( lim b ) = ( 0 ) by A29,FUNCT_2:63;
A36: ( rng ( b + a ) ) c= ( dom f )
proof
let x;
assume x in ( rng ( b + a ) );
then x in ( REAL );
hence thesis by A25;
end;
reconsider b as  convergent_to_0 Real_Sequence by A24,A33,A35,FDIFF_1:def 1;
A37: ( b " ) is  non-zero by A24,SEQ_1:33;
A38: ( rng a ) = { ( ( f " ) . y0 ) }
proof
thus ( rng a ) c= { ( ( f " ) . y0 ) }
proof
let x;
assume x in ( rng a );
then (ex n st x = ( a . n )) by FUNCT_2:113;
then x = ( ( f " ) . y0 ) by FUNCOP_1:7;
hence thesis by TARSKI:def 1;
end;

let x;
assume x in { ( ( f " ) . y0 ) };
then x = ( ( f " ) . y0 ) by TARSKI:def 1;
then ( a . ( 0 ) ) = x by FUNCOP_1:7;
hence thesis by VALUED_0:28;
end;
A39: ( rng a ) c= ( dom f )
proof
let x;
assume x in ( rng a );
then x = ( ( f " ) . y0 ) by A38,TARSKI:def 1;
hence thesis by A6,A8,FUNCT_1:def 3;
end;
now
let n;
( c . n ) in ( rng c ) by VALUED_0:28;
then A40: ( c . n ) = y0 by A12,TARSKI:def 1;
thus ( ( f /* a ) . n ) = ( f . ( a . n ) ) by A39,FUNCT_2:108
.= ( f . ( ( f " ) . y0 ) ) by FUNCOP_1:7
.= ( c . n ) by A5,A8,A40,FUNCT_1:35;
end;
then A41: ( f /* a ) = c by FUNCT_2:63;
now
let n;
( ( h + c ) . n ) = ( f . ( ( a . n ) + ( b . n ) ) ) by A19;
then ( ( h . n ) + ( c . n ) ) = ( f . ( ( a . n ) + ( b . n ) ) ) by SEQ_1:7;
hence ( h . n ) = ( ( f . ( ( b . n ) + ( a . n ) ) ) - ( ( f /* a ) . n ) ) by A41
.= ( ( f . ( ( b + a ) . n ) ) - ( ( f /* a ) . n ) ) by SEQ_1:7
.= ( ( ( f /* ( b + a ) ) . n ) - ( ( f /* a ) . n ) ) by A36,FUNCT_2:108
.= ( ( ( f /* ( b + a ) ) - ( f /* a ) ) . n ) by RFUNCT_2:1;
end;
then A42: h = ( ( f /* ( b + a ) ) - ( f /* a ) ) by FUNCT_2:63;
then ( ( f /* ( b + a ) ) - ( f /* a ) ) is  non-zero by FDIFF_1:def 1;
then A43: ( ( b " ) (#) ( ( f /* ( b + a ) ) - ( f /* a ) ) ) is  non-zero by A37,SEQ_1:35;
A44: ( rng c ) c= ( dom ( f " ) )
proof
let x;
assume x in ( rng c );
hence thesis by A8,A12,TARSKI:def 1;
end;
now
let n;
A45: ( ( a . n ) + ( b . n ) ) in ( [#] ( REAL ) );
( c . n ) in ( rng c ) by VALUED_0:28;
then A46: ( c . n ) = y0 by A12,TARSKI:def 1;
thus ( ( ( h " ) (#) ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) ) . n ) = ( ( ( h " ) . n ) * ( ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) . n ) ) by SEQ_1:8
.= ( ( ( h " ) . n ) * ( ( ( ( f " ) /* ( h + c ) ) . n ) - ( ( ( f " ) /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( ( h " ) . n ) * ( ( ( f " ) . ( ( h + c ) . n ) ) - ( ( ( f " ) /* c ) . n ) ) ) by A13,FUNCT_2:108
.= ( ( ( h " ) . n ) * ( ( ( f " ) . ( f . ( ( a . n ) + ( b . n ) ) ) ) - ( ( ( f " ) /* c ) . n ) ) ) by A19
.= ( ( ( h " ) . n ) * ( ( ( a . n ) + ( b . n ) ) - ( ( ( f " ) /* c ) . n ) ) ) by A25,A45,FUNCT_1:34
.= ( ( ( h " ) . n ) * ( ( ( a . n ) + ( b . n ) ) - ( ( f " ) . ( c . n ) ) ) ) by A44,FUNCT_2:108
.= ( ( ( h " ) . n ) * ( ( ( a . n ) + ( b . n ) ) - ( a . n ) ) ) by A46,FUNCOP_1:7
.= ( ( ( h " ) (#) ( ( b " ) " ) ) . n ) by SEQ_1:8
.= ( ( ( ( b " ) (#) ( ( f /* ( b + a ) ) - ( f /* a ) ) ) " ) . n ) by A42,SEQ_1:36;
end;
then A47: ( ( h " ) (#) ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) ) = ( ( ( b " ) (#) ( ( f /* ( b + a ) ) - ( f /* a ) ) ) " ) by FUNCT_2:63;
A48: f is_differentiable_in ( ( f " ) . y0 ) by A2,FDIFF_1:9;
then A49: ( lim ( ( b " ) (#) ( ( f /* ( b + a ) ) - ( f /* a ) ) ) ) = ( diff (f,( ( f " ) . y0 )) ) by A38,A36,CKB15:1;
( diff (f,( ( f " ) . y0 )) ) = ( diff (f,( ( f " ) . y0 )) );
then A50: ( ( b " ) (#) ( ( f /* ( b + a ) ) - ( f /* a ) ) ) is  convergent by A38,A36,A48,CKB15:1;
A51: ( 0 ) <> ( diff (f,( ( f " ) . y0 )) ) by A3;
hence ( ( h " ) (#) ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) ) is  convergent by A47,A43,A50,A49,SEQ_2:21;
thus ( lim ( ( h " ) (#) ( ( ( f " ) /* ( h + c ) ) - ( ( f " ) /* c ) ) ) ) = ( ( diff (f,( ( f " ) . y0 )) ) " ) by A47,A43,A50,A49,A51,SEQ_2:22
.= ( 1 / ( diff (f,( ( f " ) . y0 )) ) ) by XCMPLX_1:215;
end;
(ex N being (Neighbourhood of y0) st N c= ( dom ( f " ) )) by A4,A5,A8,RCOMP_1:18;
hence thesis by A11,CKB15:1;
end;
then (for y0 being Real holds (y0 in ( dom ( f " ) ) implies ( f " ) is_differentiable_in y0));
hence ( f " ) is_differentiable_on ( dom ( f " ) ) by A4,A5,FDIFF_1:9;
let x0;
assume x0 in ( dom ( f " ) );
hence thesis by A7;
end;
