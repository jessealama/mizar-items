environ
vocabularies NUMBERS,NAT_1,XBOOLE_0,VECTSP_1,FINSEQ_1,SUBSET_1,FUNCOP_1,MATRIX_1,FINSEQ_2,RELAT_1,XXREAL_0,CARD_1,TREES_1,FUNCT_1,ARYTM_3,ZFMISC_1,SUPINF_2,INCSP_1,FINSEQ_3,STRUCT_0,QC_LANG1,TARSKI,FUNCT_2,ALGSTR_0,BINOP_1,GROUP_1,ABIAN,INT_1,CARD_3,ARYTM_1,FINSET_1,FINSUB_1,MATRIX_2;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,FINSEQ_1,FUNCT_2,STRUCT_0,ALGSTR_0,NAT_1,NAT_D,GROUP_1,GROUP_4,BINOP_1,VECTSP_1,MATRIX_1,FINSET_1,FINSUB_1,FINSEQ_2,FINSEQ_3,FINSEQ_4,NUMBERS,XXREAL_0,CKB1,CKB2,CKB5,CKB8,CKB9,CKB11,CKB13,CKB14,CKB17,CKB18;
definitions STRUCT_0,FINSEQ_2,MATRIX_1,TARSKI,ALGSTR_0,CKB1,CKB5,CKB13,CKB14;
theorems FINSEQ_1,FINSEQ_2,FINSEQ_3,TARSKI,GROUP_1,FUNCT_1,FUNCT_2,ZFMISC_1,NAT_1,BINOP_1,FINSUB_1,FINSET_1,GROUP_4,FRAENKEL,MATRIX_1,RELAT_1,XBOOLE_0,FUNCOP_1,ORDINAL1,NAT_D,CARD_1,CKB1,CKB3,CKB4,CKB5,CKB6,CKB7,CKB10,CKB12,CKB13,CKB14,CKB19,CKB20,CKB21;
schemes BINOP_1,MATRIX_1,XBOOLE_0;
registrations XBOOLE_0,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,XXREAL_0,NAT_1,FINSEQ_1,FINSEQ_2,STRUCT_0,GROUP_1,MATRIX_1,ORDINAL1,CARD_1,CKB15,CKB16;
constructors RELAT_2,PARTFUN1,BINOP_1,FINSUB_1,XXREAL_0,NAT_1,NAT_D,FINSEQOP,FINSEQ_4,GROUP_4,MATRIX_1,VECTSP_1,RELSET_1,CKB1,CKB2,CKB5,CKB8,CKB9,CKB11,CKB13,CKB14;
requirements NUMERALS,REAL,BOOLE,SUBSET,ARITHM;
begin
reserve i for Nat;
reserve k for Nat;
reserve l for Nat;
reserve K for Field;
definition
let i;
let K;
let M being (Matrix of K);
func DelCol (M,i) -> (Matrix of K)
means
(( len it ) = ( len M ) & (for k holds (k in ( dom M ) implies ( it . k ) = ( Del (( Line (M,k) ),i) ))));
existence
proof
per cases ;
suppose A1: (not i in ( Seg ( width M ) ));

take M;
thus ( len M ) = ( len M );
let k;
assume that
A2: k in ( dom M );
( len ( Line (M,k) ) ) = ( width M ) by MATRIX_1:def 7;
then A3: (not i in ( dom ( Line (M,k) ) )) by A1,FINSEQ_1:def 3;
thus ( M . k ) = ( Line (M,k) ) by A2,CKB21:1
.= ( Del (( Line (M,k) ),i) ) by A3,FINSEQ_3:104;
end;
suppose A4: i in ( Seg ( width M ) );

defpred P[ Nat,Nat,(Element of K) ]
 means
$3 = ( ( Del (( Line (M,$1) ),i) ) . $2 );
per cases ;
suppose A5: ( len M ) = ( 0 );

then ( Seg ( len M ) ) = ( {} );
hence thesis by A4,A5,MATRIX_1:def 3;
end;
suppose A6: ( len M ) > ( 0 );

set n1 = ( width M );
per cases ;
suppose n1 = ( 0 );

hence thesis by A4;
end;
suppose n1 > ( 0 );

then consider m being Nat such that A7: n1 = ( m + 1 ) by NAT_1:6;
reconsider m as (Element of ( NAT )) by ORDINAL1:def 12;
A8: (for k holds (k in ( dom M ) implies ( len ( Del (( Line (M,k) ),i) ) ) = m))
proof
let k;
assume k in ( dom M );
A9: ( len ( Line (M,k) ) ) = n1 by MATRIX_1:def 7;
then i in ( dom ( Line (M,k) ) ) by A4,FINSEQ_1:def 3;
then (ex l being Nat st (( len ( Line (M,k) ) ) = ( l + 1 ) & ( len ( Del (( Line (M,k) ),i) ) ) = l)) by FINSEQ_3:104;
hence thesis by A7,A9;
end;
A10: (for k holds (for l holds ([ k,l ] in [: ( Seg ( len M ) ),( Seg m ) :] implies (ex x being (Element of K) st P[ k,l,x ]))))
proof
let k;
let l;
assume A11: [ k,l ] in [: ( Seg ( len M ) ),( Seg m ) :];
reconsider p = ( Del (( Line (M,k) ),i) ) as (FinSequence of K) by FINSEQ_3:105;
( dom M ) = ( Seg ( len M ) ) by FINSEQ_1:def 3;
then k in ( dom M ) by A11,ZFMISC_1:87;
then A12: ( len p ) = m by A8;
A13: ( dom p ) = ( Seg ( len p ) ) by FINSEQ_1:def 3;
l in ( Seg m ) by A11,ZFMISC_1:87;
then reconsider x = ( p . l ) as (Element of (the carrier of K)) by A12,A13,FINSEQ_2:11;
take x;
thus thesis;
end;
consider N being (Matrix of ( len M ),m,K) such that A15: (for k holds (for l holds ([ k,l ] in ( Indices N ) implies P[ k,l,( N * (k,l) ) ]))) from MATRIX_1:sch 2(A10);
( dom M ) = ( Seg ( len M ) ) by FINSEQ_1:def 3;
then A16: ( Indices N ) = [: ( dom M ),( Seg m ) :] by A6,MATRIX_1:23;
A17: (for k holds (for l holds ((k in ( dom M ) & l in ( Seg m )) implies ( N * (k,l) ) = ( ( Del (( Line (M,k) ),i) ) . l ))))
proof
let k;
let l;
assume (k in ( dom M ) & l in ( Seg m ));
then [ k,l ] in ( Indices N ) by A16,ZFMISC_1:87;
hence thesis by A15;
end;
A18: ( width N ) = m by A6,MATRIX_1:23;
reconsider N as (Matrix of K);
take N;
(for k holds (k in ( dom M ) implies ( N . k ) = ( Del (( Line (M,k) ),i) )))
proof
let k;
assume A19: k in ( dom M );
then k in ( Seg ( len M ) ) by FINSEQ_1:def 3;
then A20: ( N . k ) = ( Line (N,k) ) by CKB20:1;
then reconsider s = ( N . k ) as FinSequence;
A21: ( len s ) = m by A18,A20,MATRIX_1:def 7;
then A22: ( dom s ) = ( Seg m ) by FINSEQ_1:def 3;
A23:now
let j being Nat;
assume A24: j in ( dom s );
then ( ( Line (N,k) ) . j ) = ( N * (k,j) ) by A18,A22,MATRIX_1:def 7;
hence ( s . j ) = ( ( Del (( Line (M,k) ),i) ) . j ) by A17,A19,A20,A22,A24;
end;
( len ( Del (( Line (M,k) ),i) ) ) = m by A8,A19;
hence thesis by A21,A23,FINSEQ_2:9;
end;
hence thesis by A6,MATRIX_1:23;
end;
end;
end;
end;
uniqueness
proof
let M1 being (Matrix of K),M2 being (Matrix of K);
assume that
A25: ( len M1 ) = ( len M )
and
A26: (for k holds (k in ( dom M ) implies ( M1 . k ) = ( Del (( Line (M,k) ),i) )))
and
A27: ( len M2 ) = ( len M )
and
A28: (for k holds (k in ( dom M ) implies ( M2 . k ) = ( Del (( Line (M,k) ),i) )));
A29: ( dom M1 ) = ( dom M ) by A25,FINSEQ_3:29;
now
let k being Nat;
assume A30: k in ( dom M1 );
hence ( M1 . k ) = ( Del (( Line (M,k) ),i) ) by A26,A29
.= ( M2 . k ) by A28,A29,A30;
end;
hence thesis by A25,A27,FINSEQ_2:9;
end;
end;
