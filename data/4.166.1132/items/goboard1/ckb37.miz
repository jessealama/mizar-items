environ
vocabularies NUMBERS,PRE_TOPC,EUCLID,FINSEQ_1,REAL_1,SUBSET_1,COMPLEX1,ARYTM_1,XXREAL_0,ARYTM_3,CARD_1,NAT_1,RELAT_1,FINSEQ_3,FUNCT_1,XBOOLE_0,TARSKI,ORDINAL2,PARTFUN1,MCART_1,TOPREAL1,RLTOPSP1,MATRIX_1,TREES_1,INCSP_1,ZFMISC_1,MATRIX_2,STRUCT_0,ORDINAL4,GOBOARD1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,PARTFUN1,REAL_1,NUMBERS,XCMPLX_0,XXREAL_0,COMPLEX1,NAT_1,VALUED_0,FINSEQ_1,FINSEQ_3,SEQ_1,STRUCT_0,PRE_TOPC,EUCLID,TOPREAL1,MATRIX_1,MATRIX_2,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB14,CKB19,CKB33;
definitions TARSKI,XBOOLE_0,FUNCT_1,SEQM_3,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB19,CKB33;
theorems TARSKI,NAT_1,ZFMISC_1,FUNCT_1,FINSEQ_1,ABSVALUE,FINSEQ_2,FINSEQ_3,MATRIX_1,TOPREAL1,MATRIX_2,TOPREAL3,FINSEQ_4,RELAT_1,INT_1,CARD_1,PARTFUN2,XBOOLE_0,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,PARTFUN1,SEQM_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36;
schemes NAT_1,MATRIX_1,FINSEQ_1,FINSEQ_4;
registrations RELAT_1,ORDINAL1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,FINSEQ_1,STRUCT_0,EUCLID,MEMBERED,VALUED_0,CARD_1,CKB11;
constructors PARTFUN1,XXREAL_0,NAT_1,COMPLEX1,MATRIX_2,SEQ_1,TOPREAL1,SEQM_3,RELSET_1,REAL_1,CKB1,CKB2,CKB5,CKB6,CKB7,CKB8,CKB9,CKB19,CKB33;
requirements REAL,NUMERALS,BOOLE,SUBSET,ARITHM;
begin
reserve f1 for (FinSequence of ( TOP-REAL 2 ));
reserve f2 for (FinSequence of ( TOP-REAL 2 ));
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve i for (Element of ( NAT ));
reserve j for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve D for set;
reserve M for (Matrix of D);
theorem
((((for n holds ((n in ( dom f1 ) & ( n + 1 ) in ( dom f1 )) implies (for m holds (for k holds (for i holds (for j holds (((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( f1 /. n ) = ( M * (m,k) )) & ( f1 /. ( n + 1 ) ) = ( M * (i,j) )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1))))))) & (for n holds ((n in ( dom f2 ) & ( n + 1 ) in ( dom f2 )) implies (for m holds (for k holds (for i holds (for j holds (((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( f2 /. n ) = ( M * (m,k) )) & ( f2 /. ( n + 1 ) ) = ( M * (i,j) )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1)))))))) & (for m holds (for k holds (for i holds (for j holds (((((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( f1 /. ( len f1 ) ) = ( M * (m,k) )) & ( f2 /. 1 ) = ( M * (i,j) )) & ( len f1 ) in ( dom f1 )) & 1 in ( dom f2 )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1)))))) implies (for n holds ((n in ( dom ( f1 ^ f2 ) ) & ( n + 1 ) in ( dom ( f1 ^ f2 ) )) implies (for m holds (for k holds (for i holds (for j holds (((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( ( f1 ^ f2 ) /. n ) = ( M * (m,k) )) & ( ( f1 ^ f2 ) /. ( n + 1 ) ) = ( M * (i,j) )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1))))))))
proof
assume that
A1: (for n holds ((n in ( dom f1 ) & ( n + 1 ) in ( dom f1 )) implies (for m holds (for k holds (for i holds (for j holds (((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( f1 /. n ) = ( M * (m,k) )) & ( f1 /. ( n + 1 ) ) = ( M * (i,j) )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1)))))))
and
A2: (for n holds ((n in ( dom f2 ) & ( n + 1 ) in ( dom f2 )) implies (for m holds (for k holds (for i holds (for j holds (((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( f2 /. n ) = ( M * (m,k) )) & ( f2 /. ( n + 1 ) ) = ( M * (i,j) )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1)))))))
and
A3: (for m holds (for k holds (for i holds (for j holds (((((([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M )) & ( f1 /. ( len f1 ) ) = ( M * (m,k) )) & ( f2 /. 1 ) = ( M * (i,j) )) & ( len f1 ) in ( dom f1 )) & 1 in ( dom f2 )) implies ( ( abs ( m - i ) ) + ( abs ( k - j ) ) ) = 1)))));
let n;
assume that
A4: n in ( dom ( f1 ^ f2 ) )
and
A5: ( n + 1 ) in ( dom ( f1 ^ f2 ) );
let m;
let k;
let i;
let j;
assume that
A6: ([ m,k ] in ( Indices M ) & [ i,j ] in ( Indices M ))
and
A7: ( ( f1 ^ f2 ) /. n ) = ( M * (m,k) )
and
A8: ( ( f1 ^ f2 ) /. ( n + 1 ) ) = ( M * (i,j) );
A9: ( dom f1 ) = ( Seg ( len f1 ) ) by FINSEQ_1:def 3;
per cases  by A4,FINSEQ_1:25;
suppose A10: n in ( dom f1 );

then A11: ( f1 /. n ) = ( M * (m,k) ) by A7,FINSEQ_4:68;
now
per cases  by A5,FINSEQ_1:25;
suppose A12: ( n + 1 ) in ( dom f1 );

then ( f1 /. ( n + 1 ) ) = ( M * (i,j) ) by A8,FINSEQ_4:68;
hence thesis by A1,A6,A10,A11,A12;
end;
suppose (ex m being Nat st (m in ( dom f2 ) & ( n + 1 ) = ( ( len f1 ) + m )));

then consider mm being Nat such that A13: mm in ( dom f2 ) and A14: ( n + 1 ) = ( ( len f1 ) + mm );
1 <= mm by A13,FINSEQ_3:25;
then A15: ( 0 ) <= ( mm - 1 ) by XREAL_1:48;
( ( len f1 ) + ( mm - 1 ) ) <= ( ( len f1 ) + ( 0 ) ) by A9,A10,A14,FINSEQ_1:1;
then A16: ( mm - 1 ) = ( 0 ) by A15,XREAL_1:6;
then (( M * (i,j) ) = ( f2 /. 1 ) & ( M * (m,k) ) = ( f1 /. ( len f1 ) )) by A7,A8,A10,A13,A14,FINSEQ_4:68,FINSEQ_4:69;
hence thesis by A3,A6,A10,A13,A14,A16;
end;
end;
hence thesis;
end;
suppose (ex m being Nat st (m in ( dom f2 ) & n = ( ( len f1 ) + m )));

then consider mm being Nat such that A17: mm in ( dom f2 ) and A18: n = ( ( len f1 ) + mm );
A19: ( M * (m,k) ) = ( f2 /. mm ) by A7,A17,A18,FINSEQ_4:69;
A20: ( ( ( len f1 ) + mm ) + 1 ) = ( ( len f1 ) + ( mm + 1 ) );
( n + 1 ) <= ( len ( f1 ^ f2 ) ) by A5,FINSEQ_3:25;
then ( ( ( len f1 ) + mm ) + 1 ) <= ( ( len f1 ) + ( len f2 ) ) by A18,FINSEQ_1:22;
then (1 <= ( mm + 1 ) & ( mm + 1 ) <= ( len f2 )) by A20,NAT_1:11,XREAL_1:6;
then A21: ( mm + 1 ) in ( dom f2 ) by FINSEQ_3:25;
( M * (i,j) ) = ( ( f1 ^ f2 ) /. ( ( len f1 ) + ( mm + 1 ) ) ) by A8,A18
.= ( f2 /. ( mm + 1 ) ) by A21,FINSEQ_4:69;
hence thesis by A2,A6,A17,A21,A19;
end;
end;
