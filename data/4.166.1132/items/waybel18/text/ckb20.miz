environ
vocabularies SETFAM_1,XBOOLE_0,CANTOR_1,TARSKI,PRE_TOPC,RLVECT_3,RELAT_1,PRALG_1,FUNCT_1,PBOOLE,FUNCOP_1,WAYBEL_3,STRUCT_0,SUBSET_1,CARD_3,RLVECT_2,RCOMP_1,FUNCT_4,MONOID_0,ORDINAL2,FUNCTOR0,PARTFUN1,FUNCT_6,BORSUK_1,FUNCT_3,GROUP_6,WAYBEL_1,FUNCT_2,T_0TOPSP,TOPS_2,CARD_1,ZFMISC_1,RELAT_2,ORDERS_2,WAYBEL11,YELLOW_9,YELLOW_1,LATTICE3,FILTER_1,XXREAL_0,WAYBEL_0,CARD_FIL,FINSET_1,REWRITE1,WAYBEL_8,LATTICES,CAT_1,WAYBEL_9,WAYBEL18;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,PBOOLE,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,DOMAIN_1,NUMBERS,PRALG_3,STRUCT_0,PRE_TOPC,T_0TOPSP,FUNCT_3,FUNCT_6,FUNCT_7,CARD_3,FUNCOP_1,MONOID_0,PRALG_1,ORDERS_2,LATTICE3,YELLOW_1,CANTOR_1,FINSET_1,TOPS_2,BORSUK_1,TMAP_1,YELLOW_0,YELLOW_9,WAYBEL_0,WAYBEL_3,WAYBEL_8,WAYBEL_9,WAYBEL11,CKB3,CKB7,CKB8,CKB10,CKB12,CKB14,CKB15,CKB19;
definitions STRUCT_0,TARSKI,PRE_TOPC,FUNCOP_1,WAYBEL_1,WAYBEL_3,XBOOLE_0,PRALG_1,CKB3,CKB8,CKB10,CKB15,CKB19;
theorems TARSKI,PRE_TOPC,ENUMSET1,ZFMISC_1,T_0TOPSP,TOPS_1,TOPS_2,FINSET_1,FUNCT_2,FUNCT_3,RELAT_1,FUNCT_1,BORSUK_1,FUNCOP_1,CANTOR_1,LATTICE3,ORDERS_2,MSSUBFAM,PRALG_1,CARD_3,WAYBEL_3,FUNCT_6,FUNCT_7,TMAP_1,YELLOW_9,YELLOW_0,YELLOW_1,WAYBEL_0,WAYBEL_1,WAYBEL_7,WAYBEL_8,WAYBEL11,WAYBEL13,WAYBEL14,RELSET_1,SETFAM_1,XBOOLE_0,XBOOLE_1,ORDERS_1,MONOID_0,CARD_1,PARTFUN1,CKB1,CKB2,CKB3,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB19;
schemes SUBSET_1,CLASSES1,FUNCT_1,FRAENKEL;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,FUNCOP_1,CARD_3,STRUCT_0,PRE_TOPC,BORSUK_1,LATTICE3,YELLOW_0,MONOID_0,WAYBEL_0,YELLOW_1,WAYBEL_3,WAYBEL_8,WAYBEL11,YELLOW_9,WAYBEL17,CKB4,CKB5,CKB6,CKB11,CKB13;
constructors SETFAM_1,FUNCT_3,FUNCT_7,TOPS_2,BORSUK_1,LATTICE3,TMAP_1,T_0TOPSP,CANTOR_1,MONOID_0,PRALG_1,PRALG_3,WAYBEL_3,WAYBEL_5,WAYBEL_8,WAYBEL11,YELLOW_9,BINOP_1,CKB3,CKB7,CKB8,CKB10,CKB12,CKB14,CKB15,CKB19;
requirements SUBSET,BOOLE;
begin
theorem
Th8: (for I being non  empty set holds (for J being  TopSpace-yielding  non-Empty (ManySortedSet of I) holds ((for i being (Element of I) holds ( J . i ) is  injective) implies ( product J ) is  injective)))
proof
let I being non  empty set;
let J being  TopSpace-yielding  non-Empty (ManySortedSet of I);
assume A1: (for i being (Element of I) holds ( J . i ) is  injective);
set B = ( product_prebasis J );
let X being non  empty TopSpace;
let f being (Function of X,( product J ));
assume A2: f is  continuous;
let Y being non  empty TopSpace;
defpred P[ set,set ]
 means
(ex i1 being (Element of I) st (i1 = $1 & (ex g being (Function of Y,( J . i1 )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,i1) ) * f )) & $2 = g))));
assume A3: X is (SubSpace of Y);
A4: (for i being set holds (i in I implies (ex u being set st P[ i,u ])))
proof
let i being set;
assume i in I;
then reconsider i1 = i as (Element of I);
(( J . i1 ) is  injective & ( ( proj (J,i1) ) * f ) is  continuous) by A1,A2,CKB18:1;
then consider g being (Function of Y,( J . i1 )) such that A5: (g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,i1) ) * f )) by A3,CKB19:def 1;
take g;
take i1;
thus thesis by A5;
end;
consider G being Function such that A6: ( dom G ) = I and A7: (for i being set holds (i in I implies P[ i,( G . i ) ])) from CLASSES1:sch 1(A4);
A8: (the carrier of Y) c= ( dom <: G :> )
proof
let x being set;
consider i being set such that A9: i in I by XBOOLE_0:def 1;
assume A10: x in (the carrier of Y);
A11: (for f9 being Function holds (f9 in ( rng G ) implies x in ( dom f9 )))
proof
let f9 being Function;
assume f9 in ( rng G );
then consider k being set such that A12: k in ( dom G ) and A13: f9 = ( G . k ) by FUNCT_1:def 3;
(ex i1 being (Element of I) st (i1 = k & (ex ff being (Function of Y,( J . i1 )) st ((ff is  continuous & ( ff | (the carrier of X) ) = ( ( proj (J,i1) ) * f )) & ( G . k ) = ff)))) by A6,A7,A12;
hence thesis by A10,A13,FUNCT_2:def 1;
end;
consider j being (Element of I) such that j = i and A14: (ex g being (Function of Y,( J . j )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,j) ) * f )) & ( G . i ) = g)) by A7,A9;
consider g being (Function of Y,( J . j )) such that g is  continuous and ( g | (the carrier of X) ) = ( ( proj (J,j) ) * f ) and A15: ( G . i ) = g by A14;
g in ( rng G ) by A6,A9,A15,FUNCT_1:def 3;
hence thesis by A11,FUNCT_6:33;
end;
A16: G is  Function-yielding
proof
let j being set;
assume j in ( dom G );
then (ex i being (Element of I) st (i = j & (ex g being (Function of Y,( J . i )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f )) & ( G . j ) = g)))) by A6,A7;
hence thesis;
end;
A17: ( product ( rngs G ) ) c= ( product ( Carrier J ) )
proof
let y being set;
assume y in ( product ( rngs G ) );
then consider h being Function such that A18: y = h and A19: ( dom h ) = ( dom ( rngs G ) ) and A20: (for x being set holds (x in ( dom ( rngs G ) ) implies ( h . x ) in ( ( rngs G ) . x ))) by CARD_3:def 5;
A21: ( dom h ) = I by A6,A16,A19,FUNCT_6:60
.= ( dom ( Carrier J ) ) by PARTFUN1:def 2;
(for x being set holds (x in ( dom ( Carrier J ) ) implies ( h . x ) in ( ( Carrier J ) . x )))
proof
let x being set;
assume A22: x in ( dom ( Carrier J ) );
then A23: x in I by PARTFUN1:def 2;
then consider i being (Element of I) such that A24: i = x and A25: (ex g being (Function of Y,( J . i )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f )) & ( G . x ) = g)) by A7;
A26: (ex R being 1-sorted st (R = ( J . x ) & ( ( Carrier J ) . x ) = (the carrier of R))) by A23,PRALG_1:def 13;
consider g being (Function of Y,( J . i )) such that g is  continuous and ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f ) and A27: ( G . x ) = g by A25;
x in ( dom G ) by A6,A22,PARTFUN1:def 2;
then A28: ( ( rngs G ) . x ) = ( rng g ) by A27,FUNCT_6:22;
( h . x ) in ( ( rngs G ) . x ) by A19,A20,A21,A22;
hence thesis by A24,A28,A26;
end;
hence thesis by A18,A21,CARD_3:def 5;
end;
( dom <: G :> ) c= (the carrier of Y)
proof
let x being set;
assume A29: x in ( dom <: G :> );
consider j being set such that A30: j in I by XBOOLE_0:def 1;
consider i being (Element of I) such that i = j and A31: (ex g being (Function of Y,( J . i )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f )) & ( G . j ) = g)) by A7,A30;
consider g being (Function of Y,( J . i )) such that g is  continuous and ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f ) and A32: ( G . j ) = g by A31;
g in ( rng G ) by A6,A30,A32,FUNCT_1:def 3;
then x in ( dom g ) by A29,FUNCT_6:32;
hence thesis;
end;
then A33: ( dom <: G :> ) = (the carrier of Y) by A8,XBOOLE_0:def 10;
( rng <: G :> ) c= ( product ( rngs G ) ) by FUNCT_6:29;
then A34: ( rng <: G :> ) c= ( product ( Carrier J ) ) by A17,XBOOLE_1:1;
then ( rng <: G :> ) c= (the carrier of ( product J )) by CKB10:def 1;
then reconsider h = <: G :> as (Function of (the carrier of Y),(the carrier of ( product J ))) by A33,FUNCT_2:def 1,RELSET_1:4;
A35: ( dom ( h | (the carrier of X) ) ) = ( ( dom h ) /\ (the carrier of X) ) by RELAT_1:61
.= ( (the carrier of Y) /\ (the carrier of X) ) by FUNCT_2:def 1
.= (the carrier of X) by A3,BORSUK_1:1,XBOOLE_1:28
.= ( dom f ) by FUNCT_2:def 1;
A36: (for x being set holds (x in ( dom ( h | (the carrier of X) ) ) implies ( ( h | (the carrier of X) ) . x ) = ( f . x )))
proof
let x being set;
assume A37: x in ( dom ( h | (the carrier of X) ) );
then ( ( h | (the carrier of X) ) . x ) in ( rng ( h | (the carrier of X) ) ) by FUNCT_1:def 3;
then ( ( h | (the carrier of X) ) . x ) in (the carrier of ( product J ));
then ( ( h | (the carrier of X) ) . x ) in ( product ( Carrier J ) ) by CKB10:def 1;
then consider z being Function such that A38: ( ( h | (the carrier of X) ) . x ) = z and A39: ( dom z ) = ( dom ( Carrier J ) ) and (for i being set holds (i in ( dom ( Carrier J ) ) implies ( z . i ) in ( ( Carrier J ) . i ))) by CARD_3:def 5;
( f . x ) in ( rng f ) by A35,A37,FUNCT_1:def 3;
then ( f . x ) in (the carrier of ( product J ));
then A40: ( f . x ) in ( product ( Carrier J ) ) by CKB10:def 1;
then consider y being Function such that A41: ( f . x ) = y and A42: ( dom y ) = ( dom ( Carrier J ) ) and (for i being set holds (i in ( dom ( Carrier J ) ) implies ( y . i ) in ( ( Carrier J ) . i ))) by CARD_3:def 5;
A43: x in (the carrier of Y) by A37;
(for j being set holds (j in ( dom y ) implies ( y . j ) = ( z . j )))
proof
let j being set;
assume j in ( dom y );
then A44: j in I by A42,PARTFUN1:def 2;
then consider i being (Element of I) such that A45: i = j and A46: (ex g being (Function of Y,( J . i )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f )) & ( G . j ) = g)) by A7;
A47: y in ( dom ( proj (( Carrier J ),i) ) ) by A40,A41,CARD_3:def 16;
consider g being (Function of Y,( J . i )) such that g is  continuous and A48: ( g | (the carrier of X) ) = ( ( proj (J,i) ) * f ) and A49: ( G . j ) = g by A46;
(x in ( dom h ) & z = ( <: G :> . x )) by A35,A37,A43,A38,FUNCT_1:49,FUNCT_2:def 1;
hence ( z . j ) = ( g . x ) by A6,A44,A49,FUNCT_6:34
.= ( ( ( proj (J,i) ) * f ) . x ) by A35,A37,A48,FUNCT_1:49
.= ( ( proj (( Carrier J ),i) ) . y ) by A35,A37,A41,FUNCT_2:15
.= ( y . j ) by A45,A47,CARD_3:def 16;
end;
hence thesis by A41,A42,A38,A39,FUNCT_1:2;
end;
reconsider h as (Function of Y,( product J ));
A50: (for P being (Subset of ( product J )) holds (P in B implies ( h " P ) is  open))
proof
let P being (Subset of ( product J ));
reconsider p = P as (Subset of ( product ( Carrier J ) )) by CKB10:def 1;
assume P in B;
then consider i being set,T being TopStruct,V being (Subset of T) such that A51: i in I and A52: V is  open and A53: T = ( J . i ) and A54: p = ( product ( ( Carrier J ) +* (i,V) ) ) by CKB8:def 1;
consider j being (Element of I) such that A55: j = i and A56: (ex g being (Function of Y,( J . j )) st ((g is  continuous & ( g | (the carrier of X) ) = ( ( proj (J,j) ) * f )) & ( G . i ) = g)) by A7,A51;
reconsider V as (Subset of ( J . j )) by A53,A55;
A57: ( dom ( proj (J,j) ) ) = ( product ( Carrier J ) ) by CARD_3:def 16;
consider g being (Function of Y,( J . j )) such that A58: g is  continuous and ( g | (the carrier of X) ) = ( ( proj (J,j) ) * f ) and A59: ( G . i ) = g by A56;
A60: ( dom g ) = (the carrier of Y) by FUNCT_2:def 1
.= ( dom h ) by FUNCT_2:def 1;
A61: ( ( proj (J,j) ) " V ) = p by A54,A55,CKB16:1;
A62: ( h " P ) c= ( g " V )
proof
let x being set;
assume A63: x in ( h " P );
then A64: ( h . x ) in ( ( proj (J,j) ) " V ) by A61,FUNCT_1:def 7;
then ( h . x ) in ( product ( Carrier J ) ) by A57,FUNCT_1:def 7;
then consider y being Function such that A65: ( h . x ) = y and ( dom y ) = ( dom ( Carrier J ) ) and (for i being set holds (i in ( dom ( Carrier J ) ) implies ( y . i ) in ( ( Carrier J ) . i ))) by CARD_3:def 5;
( h . x ) in ( dom ( proj (J,j) ) ) by A64,FUNCT_1:def 7;
then ( ( proj (J,j) ) . ( h . x ) ) = ( y . j ) by A65,CARD_3:def 16;
then A66: ( y . j ) in V by A64,FUNCT_1:def 7;
x in ( dom h ) by A63,FUNCT_1:def 7;
then A67: ( g . x ) = ( y . j ) by A6,A55,A59,A65,FUNCT_6:34;
x in ( dom g ) by A60,A63,FUNCT_1:def 7;
hence thesis by A66,A67,FUNCT_1:def 7;
end;
A68: ( g " V ) c= ( h " P )
proof
let x being set;
assume A69: x in ( g " V );
then A70: x in ( dom h ) by A60,FUNCT_1:def 7;
then A71: ( h . x ) in ( rng h ) by FUNCT_1:def 3;
then consider y being Function such that A72: ( h . x ) = y and ( dom y ) = ( dom ( Carrier J ) ) and (for i being set holds (i in ( dom ( Carrier J ) ) implies ( y . i ) in ( ( Carrier J ) . i ))) by A34,CARD_3:def 5;
( h . x ) in ( product ( Carrier J ) ) by A34,A71;
then y in ( dom ( proj (( Carrier J ),j) ) ) by A72,CARD_3:def 16;
then A73: ( ( proj (J,j) ) . ( h . x ) ) = ( y . j ) by A72,CARD_3:def 16;
( g . x ) = ( y . j ) by A6,A55,A59,A70,A72,FUNCT_6:34;
then ( ( proj (J,j) ) . ( h . x ) ) in V by A69,A73,FUNCT_1:def 7;
then ( h . x ) in ( ( proj (J,j) ) " V ) by A34,A57,A71,FUNCT_1:def 7;
hence thesis by A61,A70,FUNCT_1:def 7;
end;
( [#] ( J . j ) ) <> ( {} );
then ( g " V ) is  open by A52,A53,A55,A58,TOPS_2:43;
hence thesis by A62,A68,XBOOLE_0:def 10;
end;
take h;
B is (prebasis of ( product J )) by CKB10:def 1;
hence h is  continuous by A50,YELLOW_9:36;
thus thesis by A35,A36,FUNCT_1:2;
end;
