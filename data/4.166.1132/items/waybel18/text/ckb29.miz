environ
vocabularies SETFAM_1,XBOOLE_0,CANTOR_1,TARSKI,PRE_TOPC,RLVECT_3,RELAT_1,PRALG_1,FUNCT_1,PBOOLE,FUNCOP_1,WAYBEL_3,STRUCT_0,SUBSET_1,CARD_3,RLVECT_2,RCOMP_1,FUNCT_4,MONOID_0,ORDINAL2,FUNCTOR0,PARTFUN1,FUNCT_6,BORSUK_1,FUNCT_3,GROUP_6,WAYBEL_1,FUNCT_2,T_0TOPSP,TOPS_2,CARD_1,ZFMISC_1,RELAT_2,ORDERS_2,WAYBEL11,YELLOW_9,YELLOW_1,LATTICE3,FILTER_1,XXREAL_0,WAYBEL_0,CARD_FIL,FINSET_1,REWRITE1,WAYBEL_8,LATTICES,CAT_1,WAYBEL_9,WAYBEL18;
notations TARSKI,XBOOLE_0,ENUMSET1,ZFMISC_1,SUBSET_1,SETFAM_1,RELAT_1,PBOOLE,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,DOMAIN_1,NUMBERS,PRALG_3,STRUCT_0,PRE_TOPC,T_0TOPSP,FUNCT_3,FUNCT_6,FUNCT_7,CARD_3,FUNCOP_1,MONOID_0,PRALG_1,ORDERS_2,LATTICE3,YELLOW_1,CANTOR_1,FINSET_1,TOPS_2,BORSUK_1,TMAP_1,YELLOW_0,YELLOW_9,WAYBEL_0,WAYBEL_3,WAYBEL_8,WAYBEL_9,WAYBEL11,CKB3,CKB7,CKB8,CKB10,CKB12,CKB14,CKB15,CKB19,CKB22,CKB25,CKB28;
definitions STRUCT_0,TARSKI,PRE_TOPC,FUNCOP_1,WAYBEL_1,WAYBEL_3,XBOOLE_0,PRALG_1,CKB3,CKB8,CKB10,CKB15,CKB19,CKB22,CKB25,CKB28;
theorems TARSKI,PRE_TOPC,ENUMSET1,ZFMISC_1,T_0TOPSP,TOPS_1,TOPS_2,FINSET_1,FUNCT_2,FUNCT_3,RELAT_1,FUNCT_1,BORSUK_1,FUNCOP_1,CANTOR_1,LATTICE3,ORDERS_2,MSSUBFAM,PRALG_1,CARD_3,WAYBEL_3,FUNCT_6,FUNCT_7,TMAP_1,YELLOW_9,YELLOW_0,YELLOW_1,WAYBEL_0,WAYBEL_1,WAYBEL_7,WAYBEL_8,WAYBEL11,WAYBEL13,WAYBEL14,RELSET_1,SETFAM_1,XBOOLE_0,XBOOLE_1,ORDERS_1,MONOID_0,CARD_1,PARTFUN1,CKB1,CKB2,CKB3,CKB8,CKB9,CKB10,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB24,CKB25,CKB26,CKB28;
schemes SUBSET_1,CLASSES1,FUNCT_1,FRAENKEL;
registrations XBOOLE_0,SUBSET_1,RELSET_1,FUNCT_2,FUNCOP_1,CARD_3,STRUCT_0,PRE_TOPC,BORSUK_1,LATTICE3,YELLOW_0,MONOID_0,WAYBEL_0,YELLOW_1,WAYBEL_3,WAYBEL_8,WAYBEL11,YELLOW_9,WAYBEL17,CKB4,CKB5,CKB6,CKB11,CKB13,CKB23,CKB27;
constructors SETFAM_1,FUNCT_3,FUNCT_7,TOPS_2,BORSUK_1,LATTICE3,TMAP_1,T_0TOPSP,CANTOR_1,MONOID_0,PRALG_1,PRALG_3,WAYBEL_3,WAYBEL_5,WAYBEL_8,WAYBEL11,YELLOW_9,BINOP_1,CKB3,CKB7,CKB8,CKB10,CKB12,CKB14,CKB15,CKB19,CKB22,CKB25,CKB28;
requirements SUBSET,BOOLE;
begin
theorem
Th12: (for T,S being non empty TopSpace holds (T is  injective implies (for f being (Function of T,S) holds (( corestr f ) is  being_homeomorphism implies T is_Retract_of S))))
proof
let T being non empty TopSpace,S being non empty TopSpace;
assume A1: T is  injective;
let f being (Function of T,S);
consider g being (Function of ( Image f ),T) such that A2: g = ( ( corestr f ) " );
assume A3: ( corestr f ) is  being_homeomorphism;
then g is  continuous by A2,TOPS_2:def 5;
then consider h being (Function of S,T) such that A4: h is  continuous and A5: ( h | (the carrier of ( Image f )) ) = g by A1,CKB19:def 1;
g is  being_homeomorphism by A3,A2,TOPS_2:56;
then A6: g is  one-to-one by TOPS_2:def 5;
A7: (the carrier of ( Image f )) = ( rng f ) by CKB24:1;
A8: (for x being set holds (x in (the carrier of T) implies ( ( h * f ) . x ) = x))
proof
let x being set;
assume A10: x in (the carrier of T);
then A11: x in ( dom ( corestr f ) ) by FUNCT_2:def 1;
A12: x in ( dom f ) by A10,FUNCT_2:def 1;
then A13: ( f . x ) in ( rng f ) by FUNCT_1:def 3;
A14: ( corestr f ) is  one-to-one by A3,TOPS_2:def 5;
thus ( ( h * f ) . x ) = ( h . ( f . x ) ) by A12,FUNCT_1:13
.= ( ( ( corestr f ) " ) . ( ( corestr f ) . x ) ) by A2,A5,A7,A13,FUNCT_1:49
.= ( ( (( corestr f ) qua Function) " ) . ( ( corestr f ) . x ) ) by A14,TOPS_2:def 4
.= x by A11,A14,FUNCT_1:34;
end;
( dom ( h * f ) ) = (the carrier of T) by FUNCT_2:def 1;
then A15: ( h * f ) = ( id (the carrier of T) ) by A8,FUNCT_1:17;
take F = ( f * h );
set H = ( h * ( incl ( Image F ) ) );
A16: ( dom H ) = ( [#] ( Image F ) ) by FUNCT_2:def 1;
( rng h ) c= (the carrier of T);
then A17: ( rng h ) c= ( dom f ) by FUNCT_2:def 1;
A18: ( rng F ) c= ( rng f )
proof
let y being set;
assume y in ( rng F );
then consider x being set such that A19: x in ( dom F ) and A20: y = ( F . x ) by FUNCT_1:def 3;
x in (the carrier of S) by A19;
then A21: x in ( dom h ) by FUNCT_2:def 1;
then A22: ( h . x ) in ( rng h ) by FUNCT_1:def 3;
( f . ( h . x ) ) = y by A20,A21,FUNCT_1:13;
hence thesis by A17,A22,FUNCT_1:def 3;
end;
A23: H is  one-to-one
proof
let x being (Element of ( Image F )),y being (Element of ( Image F ));
assume A24: ( H . x ) = ( H . y );
A25: x in (the carrier of ( Image F ));
then A26: x in ( dom ( incl ( Image F ) ) ) by FUNCT_2:def 1;
A27: y in (the carrier of ( Image F ));
then A28: y in ( dom ( incl ( Image F ) ) ) by FUNCT_2:def 1;
A29: y in ( rng F ) by A27,CKB24:1;
A30: x in ( rng F ) by A25,CKB24:1;
then reconsider a = x,b = y as (Point of S) by A29;
reconsider x9 = x,y9 = y as (Element of ( Image f )) by A18,A30,A29,CKB24:1;
( g . x9 ) = ( h . x ) by A5,FUNCT_1:49
.= ( h . ( ( incl ( Image F ) ) . a ) ) by TMAP_1:84
.= ( ( h * ( incl ( Image F ) ) ) . b ) by A24,A26,FUNCT_1:13
.= ( h . ( ( incl ( Image F ) ) . b ) ) by A28,FUNCT_1:13
.= ( h . y ) by TMAP_1:84
.= ( g . y9 ) by A5,FUNCT_1:49;
hence thesis by A6,WAYBEL_1:def 1;
end;
A31: ( dom ( incl ( Image F ) ) ) = (the carrier of ( Image F )) by FUNCT_2:def 1;
A32: ( rng H ) = ( [#] T )
proof
thus ( rng H ) c= ( [#] T );
let y being set;
assume A33: y in ( [#] T );
then A34: y in ( dom f ) by FUNCT_2:def 1;
then A35: ( F . ( f . y ) ) = ( ( ( f * h ) * f ) . y ) by FUNCT_1:13
.= ( ( f * ( id T ) ) . y ) by A15,RELAT_1:36
.= ( f . y ) by FUNCT_2:17;
A36: ( f . y ) in ( rng f ) by A34,FUNCT_1:def 3;
then reconsider pp = ( f . y ) as (Point of S);
( f . y ) in (the carrier of S) by A36;
then A37: ( f . y ) in ( dom F ) by FUNCT_2:def 1;
then ( F . ( f . y ) ) in ( rng F ) by FUNCT_1:def 3;
then A38: ( f . y ) in (the carrier of ( Image F )) by A35,CKB24:1;
then A39: y in ( dom ( ( incl ( Image F ) ) * f ) ) by A31,A34,FUNCT_1:11;
( dom H ) = ( rng F ) by A16,CKB24:1;
then A40: ( f . y ) in ( dom H ) by A37,A35,FUNCT_1:def 3;
( H . ( f . y ) ) = ( ( ( h * ( incl ( Image F ) ) ) * f ) . y ) by A34,FUNCT_1:13
.= ( ( h * ( ( incl ( Image F ) ) * f ) ) . y ) by RELAT_1:36
.= ( h . ( ( ( incl ( Image F ) ) * f ) . y ) ) by A39,FUNCT_1:13
.= ( h . ( ( incl ( Image F ) ) . pp ) ) by A34,FUNCT_1:13
.= ( h . ( f . y ) ) by A38,TMAP_1:84
.= ( ( id T ) . y ) by A15,A34,FUNCT_1:13
.= y by A33,FUNCT_1:18;
hence thesis by A40,FUNCT_1:def 3;
end;
reconsider p = ( incl ( Image f ) ) as (Function of ( Image f ),S);
A41: ( [#] S ) <> ( {} );
A42: ( dom ( p * ( corestr f ) ) ) = (the carrier of T) by FUNCT_2:def 1
.= ( dom f ) by FUNCT_2:def 1;
A43: (for P being (Subset of S) holds ( f " P ) = ( ( p * ( corestr f ) ) " P ))
proof
let P being (Subset of S);
hereby
let x being set;
assume A44: x in ( f " P );
then A45: x in ( dom f ) by FUNCT_1:def 7;
then ( f . x ) in ( rng f ) by FUNCT_1:def 3;
then A46: ( f . x ) in (the carrier of ( Image f )) by CKB24:1;
A47: ( f . x ) in P by A44,FUNCT_1:def 7;
then reconsider y = ( f . x ) as (Point of S);
( ( p * ( corestr f ) ) . x ) = ( p . ( f . x ) ) by A45,FUNCT_1:13
.= y by A46,TMAP_1:84;
hence x in ( ( p * ( corestr f ) ) " P ) by A42,A45,A47,FUNCT_1:def 7;
end;
let x being set;
assume A48: x in ( ( p * ( corestr f ) ) " P );
then A49: x in ( dom ( p * ( corestr f ) ) ) by FUNCT_1:def 7;
then A50: ( f . x ) in ( rng f ) by A42,FUNCT_1:def 3;
then reconsider y = ( f . x ) as (Point of S);
A51: ( ( p * ( corestr f ) ) . x ) in P by A48,FUNCT_1:def 7;
A52: ( f . x ) in (the carrier of ( Image f )) by A50,CKB24:1;
( ( p * ( corestr f ) ) . x ) = ( p . ( f . x ) ) by A42,A49,FUNCT_1:13
.= y by A52,TMAP_1:84;
hence thesis by A42,A49,A51,FUNCT_1:def 7;
end;
A53: ( corestr f ) is  continuous by A3,TOPS_2:def 5;
A54: (for P being (Subset of ( Image F )) holds (P is  open implies ( ( H " ) " P ) is  open))
proof
let P being (Subset of ( Image F ));
A55: p is  continuous by TMAP_1:87;
( ( incl ( Image F ) ) .: P ) = P
proof
hereby
let y being set;
assume y in ( ( incl ( Image F ) ) .: P );
then consider x being set such that A56: x in ( dom ( incl ( Image F ) ) ) and A57: (x in P & y = ( ( incl ( Image F ) ) . x )) by FUNCT_1:def 6;
x in (the carrier of ( Image F )) by A56;
then x in ( rng F ) by CKB24:1;
then reconsider xx = x as (Point of S);
( ( incl ( Image F ) ) . xx ) = x by A56,TMAP_1:84;
hence y in P by A57;
end;
let y being set;
assume A58: y in P;
then A59: y in (the carrier of ( Image F ));
then y in ( rng F ) by CKB24:1;
then reconsider yy = y as (Point of S);
A60: yy = ( ( incl ( Image F ) ) . y ) by A58,TMAP_1:84;
y in ( dom ( incl ( Image F ) ) ) by A59,FUNCT_2:def 1;
hence thesis by A58,A60,FUNCT_1:def 6;
end;
then A61: ( H .: P ) = ( h .: P ) by RELAT_1:126;
assume P is  open;
then P in (the topology of ( Image F )) by PRE_TOPC:def 2;
then consider Q being (Subset of S) such that A62: Q in (the topology of S) and A63: P = ( Q /\ ( [#] ( Image F ) ) ) by PRE_TOPC:def 4;
reconsider Q as (Subset of S);
A64: ( f " Q ) = ( h .: P )
proof
hereby
let x being set;
assume A65: x in ( f " Q );
then A66: x in ( dom f ) by FUNCT_1:def 7;
then A67: ( h . ( f . x ) ) = ( ( id T ) . x ) by A15,FUNCT_1:13
.= x by A65,FUNCT_1:18;
( f . x ) in ( rng f ) by A66,FUNCT_1:def 3;
then A68: ( f . x ) in (the carrier of S);
then A69: ( f . x ) in ( dom h ) by FUNCT_2:def 1;
A70: ( f . x ) in ( dom F ) by A68,FUNCT_2:def 1;
( F . ( f . x ) ) = ( f . ( h . ( f . x ) ) ) by A69,FUNCT_1:13
.= ( f . ( ( id T ) . x ) ) by A15,A66,FUNCT_1:13
.= ( f . x ) by A65,FUNCT_1:18;
then ( f . x ) in ( rng F ) by A70,FUNCT_1:def 3;
then A71: ( f . x ) in (the carrier of ( Image F )) by CKB24:1;
( f . x ) in Q by A65,FUNCT_1:def 7;
then ( f . x ) in P by A63,A71,XBOOLE_0:def 4;
hence x in ( h .: P ) by A69,A67,FUNCT_1:def 6;
end;
let x being set;
assume x in ( h .: P );
then consider y being set such that A72: y in ( dom h ) and A73: y in P and A74: x = ( h . y ) by FUNCT_1:def 6;
A75: y in Q by A63,A73,XBOOLE_0:def 4;
y in (the carrier of ( Image F )) by A73;
then A76: y in ( rng F ) by CKB24:1;
A77: x in ( rng h ) by A72,A74,FUNCT_1:def 3;
then ( f . x ) in ( rng f ) by A17,FUNCT_1:def 3;
then reconsider a = ( f . x ),b = y as (Element of ( Image f )) by A18,A76,CKB24:1;
( g . a ) = ( h . ( f . x ) ) by A5,FUNCT_1:49
.= ( ( id T ) . x ) by A17,A15,A77,FUNCT_1:13
.= ( h . y ) by A74,A77,FUNCT_1:18
.= ( g . b ) by A5,FUNCT_1:49;
then ( f . x ) in Q by A6,A75,WAYBEL_1:def 1;
hence thesis by A17,A77,FUNCT_1:def 7;
end;
Q is  open by A62,PRE_TOPC:def 2;
then ( ( p * ( corestr f ) ) " Q ) is  open by A41,A53,A55,TOPS_2:43;
then ( f " Q ) is  open by A43;
hence thesis by A32,A23,A64,A61,TOPS_2:54;
end;
A78: p is  continuous by TMAP_1:87;
A79: ( [#] T ) <> ( {} );
(for P being (Subset of S) holds (P is  open implies ( F " P ) is  open))
proof
let P being (Subset of S);
assume P is  open;
then ( ( p * ( corestr f ) ) " P ) is  open by A41,A53,A78,TOPS_2:43;
then ( f " P ) is  open by A43;
then ( h " ( f " P ) ) is  open by A79,A4,TOPS_2:43;
hence thesis by RELAT_1:146;
end;
hence F is  continuous by A41,TOPS_2:43;
thus ( F * F ) = ( ( ( f * h ) * f ) * h ) by RELAT_1:36
.= ( ( f * ( id T ) ) * h ) by A15,RELAT_1:36
.= F by FUNCT_2:17;
( [#] ( Image F ) ) <> ( {} );
then (( incl ( Image F ) ) is  continuous & ( H " ) is  continuous) by A54,TMAP_1:87,TOPS_2:43;
then H is  being_homeomorphism by A4,A16,A32,A23,TOPS_2:def 5;
hence thesis by T_0TOPSP:def 1;
end;
