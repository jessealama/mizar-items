environ
vocabularies NUMBERS,SUBSET_1,REAL_1,NORMSP_1,SEQ_1,NAT_1,PRE_TOPC,RCOMP_1,TARSKI,CARD_1,ARYTM_3,ARYTM_1,XXREAL_0,RELAT_1,FUNCT_1,SEQ_2,ORDINAL2,STRUCT_0,VALUED_0,SUPINF_2,RLVECT_1,VALUED_1,XREAL_0,ORDINAL1,COMPLEX1,XXREAL_2,FDIFF_1,ZFMISC_1,PARTFUN1,FUNCOP_1,FUNCT_2,LOPBAN_1,XBOOLE_0,FCONT_1,RSSPACE,NFCONT_1,CFCONT_1,LOPBAN_2;
notations TARSKI,SUBSET_1,FUNCT_1,RELSET_1,PARTFUN1,FUNCT_2,PRE_TOPC,XXREAL_0,XREAL_0,COMPLEX1,ORDINAL1,NUMBERS,REAL_1,NAT_1,RLVECT_1,STRUCT_0,FUNCOP_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SQUARE_1,VFUNCT_1,NORMSP_0,NORMSP_1,RSSPACE,LOPBAN_1,LOPBAN_2,NFCONT_1,FDIFF_1,RECDEF_1,CKB6,CKB9,CKB10,CKB21,CKB29,CKB31,CKB39,CKB40,CKB41,CKB45;
definitions TARSKI,XBOOLE_0,NFCONT_1,NORMSP_1,BHSP_3,RLVECT_1,SUBSET_1,VALUED_1,STRUCT_0,CKB6,CKB9,CKB10,CKB21,CKB29,CKB39,CKB40,CKB41,CKB45;
theorems TARSKI,ABSVALUE,XBOOLE_0,XBOOLE_1,SUBSET_1,RELSET_1,RLVECT_1,XCMPLX_0,XCMPLX_1,ZFMISC_1,XREAL_0,FUNCOP_1,SEQ_1,SEQ_2,NAT_1,SEQM_3,RELAT_1,FUNCT_1,VFUNCT_1,FUNCT_2,SEQ_4,NORMSP_1,LOPBAN_1,LOPBAN_2,LOPBAN_3,PARTFUN1,PARTFUN2,NFCONT_1,FDIFF_1,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,VALUED_1,STRUCT_0,VALUED_0,GRCAT_1,NORMSP_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB29,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46;
schemes NAT_1,SEQ_1,RECDEF_1,FUNCT_2;
registrations FUNCT_1,ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,STRUCT_0,LOPBAN_1,LOPBAN_2,VALUED_0,VALUED_1,FUNCT_2,FUNCOP_1,CKB27,CKB28,CKB30,CKB47;
constructors PARTFUN1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,PARTFUN2,FDIFF_1,BHSP_3,RSSPACE,VFUNCT_1,LOPBAN_3,NFCONT_1,SEQ_1,VALUED_1,RECDEF_1,NORMSP_1,RELSET_1,BINOP_2,RVSUM_1,CKB9,CKB10,CKB21,CKB29,CKB39,CKB40,CKB41,CKB45;
requirements SUBSET,REAL,BOOLE,NUMERALS,ARITHM;
begin
reserve n for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve y for set;
reserve S for non trivial RealNormSpace;
reserve T for non trivial RealNormSpace;
reserve f for (PartFunc of S,T);
reserve c for  constant (sequence of S);
reserve R for (REST of S,T);
reserve L for (Point of ( R_NormSpace_of_BoundedLinearOperators (S,T) ));
theorem
Th39: (for x0 being (Point of S) holds (for N being (Neighbourhood of x0) holds ((f is_differentiable_in x0 & N c= ( dom f )) implies (for h being  convergent_to_0 (sequence of S) holds (for c holds ((( rng c ) = { x0 } & ( rng ( h + c ) ) c= N) implies (( ( f /* ( h + c ) ) - ( f /* c ) ) is  convergent & ( lim ( ( f /* ( h + c ) ) - ( f /* c ) ) ) = ( 0. T ))))))))
proof
let x0 being (Point of S);
let N being (Neighbourhood of x0);
assume that
A1: f is_differentiable_in x0
and
A2: N c= ( dom f );
let h being  convergent_to_0 (sequence of S);
let c;
assume that
A3: ( rng c ) = { x0 }
and
A4: ( rng ( h + c ) ) c= N;
consider N1 being (Neighbourhood of x0) such that N1 c= ( dom f ) and A5: (ex L st (ex R st (for x being (Point of S) holds (x in N1 implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ))))) by A1,CKB39:def 1;
consider N2 being (Neighbourhood of x0) such that A6: N2 c= N and A7: N2 c= N1 by CKB1:1;
consider L,R such that A8: (for x being (Point of S) holds (x in N1 implies ( ( f /. x ) - ( f /. x0 ) ) = ( ( L . ( x - x0 ) ) + ( R /. ( x - x0 ) ) ))) by A5;
consider g being Real such that A9: ( 0 ) < g and A10: { y where y is (Point of S): ||. ( y - x0 ) .|| < g } c= N2 by NFCONT_1:def 1;
A11: x0 in N2 by NFCONT_1:4;
(ex n st (( rng ( c ^\ n ) ) c= N2 & ( rng ( ( h + c ) ^\ n ) ) c= N2))
proof
( c . ( 0 ) ) in ( rng c ) by NFCONT_1:6;
then ( c . ( 0 ) ) = x0 by A3,TARSKI:def 1;
then A12: ( lim c ) = x0 by CKB22:1;
A13: (c is  convergent & h is  convergent) by CKB21:def 1,CKB22:1;
then A14: ( h + c ) is  convergent by NORMSP_1:19;
( lim h ) = ( 0. S ) by CKB21:def 1;
then ( lim ( h + c ) ) = ( ( 0. S ) + x0 ) by A12,A13,NORMSP_1:25
.= x0 by RLVECT_1:4;
then consider n such that A15: (for m being (Element of ( NAT )) holds (n <= m implies ||. ( ( ( h + c ) . m ) - x0 ) .|| < g)) by A9,A14,NORMSP_1:def 7;
take n;
A16: ( rng ( c ^\ n ) ) = { x0 } by A3,VALUED_0:26;
thus ( rng ( c ^\ n ) ) c= N2
proof
let y;
assume y in ( rng ( c ^\ n ) );
hence thesis by A11,A16,TARSKI:def 1;
end;

let y being set;
assume y in ( rng ( ( h + c ) ^\ n ) );
then consider m being (Element of ( NAT )) such that A17: y = ( ( ( h + c ) ^\ n ) . m ) by NFCONT_1:6;
reconsider y1 = y as (Point of S) by A17;
( 0 ) <= m by NAT_1:2;
then ( n + ( 0 ) ) <= ( n + m ) by XREAL_1:7;
then ||. ( ( ( h + c ) . ( n + m ) ) - x0 ) .|| < g by A15;
then ||. ( ( ( ( h + c ) ^\ n ) . m ) - x0 ) .|| < g by NAT_1:def 3;
then y1 in { z where z is (Point of S): ||. ( z - x0 ) .|| < g } by A17;
hence thesis by A10;
end;
then consider n such that ( rng ( c ^\ n ) ) c= N2 and A18: ( rng ( ( h + c ) ^\ n ) ) c= N2;
A19: ( lim ( h ^\ n ) ) = ( 0. S ) by CKB21:def 1;
A20: (for k holds ( ( f /. ( ( ( h + c ) ^\ n ) . k ) ) - ( f /. ( ( c ^\ n ) . k ) ) ) = ( ( L . ( ( h ^\ n ) . k ) ) + ( R /. ( ( h ^\ n ) . k ) ) ))
proof
let k;
( ( ( h + c ) ^\ n ) . k ) in ( rng ( ( h + c ) ^\ n ) ) by NFCONT_1:6;
then A21: ( ( ( h + c ) ^\ n ) . k ) in N2 by A18;
(( ( c ^\ n ) . k ) in ( rng ( c ^\ n ) ) & ( rng ( c ^\ n ) ) = ( rng c )) by NFCONT_1:6,VALUED_0:26;
then A22: ( ( c ^\ n ) . k ) = x0 by A3,TARSKI:def 1;
( ( ( ( h + c ) ^\ n ) . k ) - ( ( c ^\ n ) . k ) ) = ( ( ( h + c ) . ( k + n ) ) - ( ( c ^\ n ) . k ) ) by NAT_1:def 3
.= ( ( ( h . ( k + n ) ) + ( c . ( k + n ) ) ) - ( ( c ^\ n ) . k ) ) by NORMSP_1:def 2
.= ( ( ( ( h ^\ n ) . k ) + ( c . ( k + n ) ) ) - ( ( c ^\ n ) . k ) ) by NAT_1:def 3
.= ( ( ( ( h ^\ n ) . k ) + ( ( c ^\ n ) . k ) ) - ( ( c ^\ n ) . k ) ) by NAT_1:def 3
.= ( ( ( h ^\ n ) . k ) + ( ( ( c ^\ n ) . k ) - ( ( c ^\ n ) . k ) ) ) by RLVECT_1:def 3
.= ( ( ( h ^\ n ) . k ) + ( 0. S ) ) by RLVECT_1:15
.= ( ( h ^\ n ) . k ) by RLVECT_1:4;
hence thesis by A8,A7,A21,A22;
end;
( R_NormSpace_of_BoundedLinearOperators (S,T) ) = NORMSTR (# ( BoundedLinearOperators (S,T) ),( Zero_ (( BoundedLinearOperators (S,T) ),( R_VectorSpace_of_LinearOperators (S,T) )) ),( Add_ (( BoundedLinearOperators (S,T) ),( R_VectorSpace_of_LinearOperators (S,T) )) ),( Mult_ (( BoundedLinearOperators (S,T) ),( R_VectorSpace_of_LinearOperators (S,T) )) ),( BoundedLinearOperatorsNorm (S,T) ) #) by LOPBAN_1:def 14;
then reconsider L as (Element of ( BoundedLinearOperators (S,T) ));
reconsider LP = ( modetrans (L,S,T) ) as (PartFunc of S,T);
A23: ( lim ( R /* ( h ^\ n ) ) ) = ( 0. T ) by CKB33:1;
A24: ( rng ( ( h + c ) ^\ n ) ) c= ( dom f )
proof
let y;
assume y in ( rng ( ( h + c ) ^\ n ) );
then y in N2 by A18;
then y in N by A6;
hence thesis by A2;
end;
R is  total by CKB29:def 1;
then ( dom R ) = (the carrier of S) by PARTFUN1:def 2;
then A25: ( rng ( h ^\ n ) ) c= ( dom R );
A26: ( rng ( c ^\ n ) ) c= ( dom f )
proof
let y;
assume A27: y in ( rng ( c ^\ n ) );
( rng ( c ^\ n ) ) = ( rng c ) by VALUED_0:26;
then y = x0 by A3,A27,TARSKI:def 1;
then y in N by NFCONT_1:4;
hence thesis by A2;
end;
A28: ( dom ( modetrans (L,S,T) ) ) = (the carrier of S) by FUNCT_2:def 1;
then A29: ( rng ( h ^\ n ) ) c= ( dom ( modetrans (L,S,T) ) );
now
let k;
thus ( ( ( f /* ( ( h + c ) ^\ n ) ) - ( f /* ( c ^\ n ) ) ) . k ) = ( ( ( f /* ( ( h + c ) ^\ n ) ) . k ) - ( ( f /* ( c ^\ n ) ) . k ) ) by NORMSP_1:def 3
.= ( ( f /. ( ( ( h + c ) ^\ n ) . k ) ) - ( ( f /* ( c ^\ n ) ) . k ) ) by A24,FUNCT_2:109
.= ( ( f /. ( ( ( h + c ) ^\ n ) . k ) ) - ( f /. ( ( c ^\ n ) . k ) ) ) by A26,FUNCT_2:109
.= ( ( L . ( ( h ^\ n ) . k ) ) + ( R /. ( ( h ^\ n ) . k ) ) ) by A20
.= ( ( ( modetrans (L,S,T) ) . ( ( h ^\ n ) . k ) ) + ( R /. ( ( h ^\ n ) . k ) ) ) by LOPBAN_1:def 11
.= ( ( LP /. ( ( h ^\ n ) . k ) ) + ( R /. ( ( h ^\ n ) . k ) ) ) by A28,PARTFUN1:def 6
.= ( ( ( LP /* ( h ^\ n ) ) . k ) + ( R /. ( ( h ^\ n ) . k ) ) ) by A29,FUNCT_2:109
.= ( ( ( LP /* ( h ^\ n ) ) . k ) + ( ( R /* ( h ^\ n ) ) . k ) ) by A25,FUNCT_2:109
.= ( ( ( LP /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) . k ) by NORMSP_1:def 2;
end;
then A30: ( ( f /* ( ( h + c ) ^\ n ) ) - ( f /* ( c ^\ n ) ) ) = ( ( LP /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) by FUNCT_2:63;
A31: ( dom ( modetrans (L,S,T) ) ) = (the carrier of S) by FUNCT_2:def 1;
LP is_Lipschitzian_on (the carrier of S)
proof
thus (the carrier of S) c= ( dom LP ) by FUNCT_2:def 1;
set LL = ( modetrans (L,S,T) );
consider K being Real such that A32: ( 0 ) <= K and A33: (for x being (VECTOR of S) holds ||. ( LL . x ) .|| <= ( K * ||. x .|| )) by LOPBAN_1:def 8;
take ( K + 1 );
A34: ( ( 0 ) + K ) < ( 1 + K ) by XREAL_1:8;
now
let x1 being (Point of S),x2 being (Point of S);
assume that
x1 in (the carrier of S)
and
x2 in (the carrier of S);
A35: ||. ( LL . ( x1 - x2 ) ) .|| <= ( K * ||. ( x1 - x2 ) .|| ) by A33;
( 0 ) <= ||. ( x1 - x2 ) .|| by NORMSP_1:4;
then A36: ( K * ||. ( x1 - x2 ) .|| ) <= ( ( K + 1 ) * ||. ( x1 - x2 ) .|| ) by A34,XREAL_1:64;
||. ( ( LP /. x1 ) - ( LP /. x2 ) ) .|| = ||. ( ( LL . x1 ) - ( LP /. x2 ) ) .|| by A31,PARTFUN1:def 6
.= ||. ( ( LL . x1 ) + ( - ( LL . x2 ) ) ) .|| by A31,PARTFUN1:def 6
.= ||. ( ( LL . x1 ) + ( ( - 1 ) * ( LL . x2 ) ) ) .|| by RLVECT_1:16
.= ||. ( ( LL . x1 ) + ( LL . ( ( - 1 ) * x2 ) ) ) .|| by LOPBAN_1:def 5
.= ||. ( LL . ( x1 + ( ( - 1 ) * x2 ) ) ) .|| by GRCAT_1:def 8
.= ||. ( LL . ( x1 - x2 ) ) .|| by RLVECT_1:16;
hence ||. ( ( LP /. x1 ) - ( LP /. x2 ) ) .|| <= ( ( K + 1 ) * ||. ( x1 - x2 ) .|| ) by A35,A36,XXREAL_0:2;
end;
hence thesis by A32;
end;
then A37: LP is_continuous_on (the carrier of S) by NFCONT_1:45;
A38: ( rng c ) c= ( dom f )
proof
let y;
assume y in ( rng c );
then y = x0 by A3,TARSKI:def 1;
then y in N by NFCONT_1:4;
hence thesis by A2;
end;
A39: (( h ^\ n ) is  convergent & ( rng ( h ^\ n ) ) c= (the carrier of S)) by CKB21:def 1;
then A40: ( LP /* ( h ^\ n ) ) is  convergent by A37,A19,NFCONT_1:18;
A41: ( R /* ( h ^\ n ) ) is  convergent by CKB33:1;
then A42: ( ( LP /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) is  convergent by A40,NORMSP_1:19;
( LP /. ( 0. S ) ) = ( ( modetrans (L,S,T) ) . ( 0. S ) ) by A31,PARTFUN1:def 6
.= ( ( modetrans (L,S,T) ) . ( ( 0 ) * ( 0. S ) ) ) by RLVECT_1:10
.= ( ( 0 ) * ( ( modetrans (L,S,T) ) . ( 0. S ) ) ) by LOPBAN_1:def 5
.= ( 0. T ) by RLVECT_1:10;
then ( lim ( LP /* ( h ^\ n ) ) ) = ( 0. T ) by A37,A39,A19,NFCONT_1:18;
then ( lim ( ( LP /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) ) = ( ( 0. T ) + ( 0. T ) ) by A41,A23,A40,NORMSP_1:25;
then A43: ( lim ( ( LP /* ( h ^\ n ) ) + ( R /* ( h ^\ n ) ) ) ) = ( 0. T ) by RLVECT_1:4;
( rng ( h + c ) ) c= ( dom f )
proof
let y;
assume y in ( rng ( h + c ) );
then y in N by A4;
hence thesis by A2;
end;
then ( ( f /* ( ( h + c ) ^\ n ) ) - ( f /* ( c ^\ n ) ) ) = ( ( ( f /* ( h + c ) ) ^\ n ) - ( f /* ( c ^\ n ) ) ) by VALUED_0:27
.= ( ( ( f /* ( h + c ) ) ^\ n ) - ( ( f /* c ) ^\ n ) ) by A38,VALUED_0:27
.= ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ n ) by CKB19:1;
hence thesis by A30,A42,A43,LOPBAN_3:10,LOPBAN_3:11;
end;
