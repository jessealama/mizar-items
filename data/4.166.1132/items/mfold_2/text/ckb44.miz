environ
vocabularies NUMBERS,SUBSET_1,XREAL_0,ORDINAL1,PRE_TOPC,EUCLID,ARYTM_1,ARYTM_3,SUPINF_2,XBOOLE_0,PRVECT_1,FUNCOP_1,XXREAL_0,RLSUB_2,ORDINAL2,METRIC_1,TARSKI,STRUCT_0,REAL_1,MATRIXR2,FINSEQ_1,FINSEQ_2,COMPTS_1,BINOP_2,TOPS_2,T_0TOPSP,CONNSP_2,FUNCT_1,RELAT_1,CARD_1,FUNCT_2,VALUED_1,WAYBEL23,RLVECT_3,FINSET_1,NAT_1,PARTFUN1,SETFAM_1,ORDINAL4,ALGSTR_0,EUCLID_7,CARD_3,RCOMP_1,TOPREALB,RVSUM_1,RLSUB_1,RLVECT_2,FUNCSDOM,RLVECT_1,RLTOPSP1,VECTSP_1,MATRIX_1,MATRLIN2,RLVECT_5,ZFMISC_1,PCOMPS_1,COMPLEX1,SQUARE_1,TOPMETR,INCSP_1,MFOLD_1,MFOLD_2;
notations TARSKI,XBOOLE_0,SUBSET_1,SETFAM_1,FUNCOP_1,FUNCT_1,TOPS_2,RELAT_1,CANTOR_1,RELSET_1,PARTFUN1,FUNCT_2,ORDINAL1,NAT_1,NUMBERS,VALUED_0,VALUED_1,XCMPLX_0,XREAL_0,XXREAL_0,COMPLEX1,REAL_1,RVSUM_1,PRE_TOPC,METRIC_1,TOPREAL9,ALGSTR_0,CONNSP_2,TSEP_1,METRIZTS,COMPTS_1,EUCLID,SQUARE_1,TOPMETR,TMAP_1,MEMBERED,XXREAL_2,TOPREAL6,WAYBEL23,CARD_1,TOPREALB,RLSUB_1,RLVECT_3,RLTOPSP1,PRVECT_1,VECTSP_1,MATRIX_1,MATRIX_6,MATRTOP1,RLVECT_2,RLVECT_5,FUNCSDOM,FINSEQ_1,FINSET_1,FINSEQ_2,EUCLID_7,STRUCT_0,RLVECT_1,FVSUM_1,RLSUB_2,CARD_3,T_0TOPSP,BORSUK_3,BINOP_2,ZFMISC_1,SEQ_1,NAT_D,PCOMPS_1,BINOP_1,RUSUB_4,CONVEX1,MONOID_0,MFOLD_1,CKB6,CKB30,CKB32,CKB36,CKB41,CKB43;
definitions EUCLID,FINSEQ_1,MATRTOP1,STRUCT_0,TARSKI,VECTSP_1,XBOOLE_0,FUNCT_1,CKB30,CKB32,CKB36,CKB41,CKB43;
theorems TOPREAL9,TOPREALB,METRIZTS,TSEP_1,YELLOW14,T_0TOPSP,RLVECT_5,ZFMISC_1,TARSKI,RELAT_1,FUNCT_1,RLTOPSP1,EUCLID,FUNCT_2,RLSUB_1,XBOOLE_0,EUCLID_2,JGRAPH_5,ORDINAL1,RLVECT_3,STRUCT_0,MATRTOP2,FUNCSDOM,FINSEQ_2,EUCLID_7,CARD_1,RLVECT_2,RLVECT_1,NAT_1,PARTFUN1,FINSEQ_3,MATRIX13,FINSEQ_1,RLSUB_2,RLVECT_4,XCMPLX_1,PRE_TOPC,WAYBEL23,TOPS_2,BORSUK_3,CONNSP_2,XBOOLE_1,TSP_1,SUBSET_1,INT_1,RVSUM_1,FUNCOP_1,VALUED_1,MATRIXR2,RELSET_1,XREAL_1,FINSEQ_4,PCOMPS_1,XREAL_0,JORDAN,REAL_NS1,SQUARE_1,ALGSTR_0,XXREAL_0,METRIC_1,TOPMETR,TOPREAL3,UNIFORM1,JGRAPH_1,JGRAPH_2,JGRAPH_6,TMAP_1,JORDAN2C,FRECHET,MFOLD_1,FUNCTOR0,RLAFFIN3,CKB3,CKB4,CKB5,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB43;
schemes NAT_1,FUNCT_2,CLASSES1;
registrations XBOOLE_0,XXREAL_0,XREAL_0,XCMPLX_0,SQUARE_1,NAT_1,MEMBERED,STRUCT_0,METRIC_1,MONOID_0,EUCLID,TOPALG_2,VALUED_0,FINSEQ_1,FUNCT_1,RELAT_1,PRE_TOPC,TOPS_1,CARD_1,TSEP_1,TOPREAL9,PCOMPS_1,RLVECT_1,COMPLEX1,TMAP_1,COMPTS_1,TOPMETR,XXREAL_2,TOPREAL6,SPPOL_1,WAYBEL23,METRIZTS,RLVECT_3,TOPREAL1,YELLOW13,YELLOW_8,KURATO_2,SUBSET_1,TOPREALB,PRVECT_1,VECTSP_1,RLVECT_2,RLVECT_5,EUCLID_7,FUNCSDOM,FINSET_1,FUNCT_2,FINSEQ_2,FUNCOP_1,FVSUM_1,RLSUB_1,REAL_1,ORDINAL1,ALGSTR_0,RLSUB_2,MATRTOP1,CANTOR_1,CARD_3,BORSUK_3,RVSUM_1,NUMBERS,RLTOPSP1,PARTFUN1,RELSET_1,GRFUNC_1,MFOLD_1,RLAFFIN3,CKB1,CKB2,CKB31,CKB42;
constructors MONOID_0,TOPREAL9,TOPREALB,SQUARE_1,FUNCSDOM,TOPS_1,TSEP_1,METRIZTS,PCOMPS_1,RLVECT_1,COMPLEX1,COMPTS_1,XCMPLX_0,NAT_1,EUCLID,BINOP_2,TOPMETR,TMAP_1,MEMBERED,XXREAL_2,TOPREAL6,WAYBEL23,RLSUB_1,RLVECT_3,RLTOPSP1,PRVECT_1,VECTSP_1,VECTSP_4,MATRIX_1,MATRIX_6,MATRTOP1,STRUCT_0,RLVECT_2,RLVECT_5,FINSEQ_1,FINSET_1,FINSEQ_2,EUCLID_7,FVSUM_1,RLSUB_2,CANTOR_1,CARD_3,BORSUK_3,SEQ_1,NAT_D,RELAT_1,RUSUB_4,CONVEX1,NUMBERS,MFOLD_1,CKB6,CKB30,CKB32,CKB36,CKB41,CKB43;
requirements NUMERALS,BOOLE,SUBSET,ARITHM,REAL;
begin
reserve n for  natural number;
reserve p for (Point of ( TOP-REAL n ));
theorem
Th31: (for S being (SubSpace of ( TOP-REAL n )) holds ((( [#] S ) = ( ( Sphere (( 0. ( TOP-REAL n ) ),1) ) \ { p } ) & p in ( Sphere (( 0. ( TOP-REAL n ) ),1) )) implies ( stereographic_projection (S,p) ) is  being_homeomorphism))
proof
let S being (SubSpace of ( TOP-REAL n ));
assume A1: ( [#] S ) = ( ( Sphere (( 0. ( TOP-REAL n ) ),1) ) \ { p } );
assume A2: p in ( Sphere (( 0. ( TOP-REAL n ) ),1) );
set f = ( stereographic_projection (S,p) );
set T = ( TPlane (p,( 0. ( TOP-REAL n ) )) );
A3: ( dom f ) = ( [#] S ) by FUNCT_2:def 1;
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider p1 = p as (Point of ( TOP-REAL n1 ));
|. ( p1 - ( 0. ( TOP-REAL n1 ) ) ) .| = 1 by A2,TOPREAL9:9;
then |. ( p1 + ( - ( 0. ( TOP-REAL n1 ) ) ) ) .| = 1 by EUCLID:41;
then |. ( p1 + ( ( - 1 ) * ( 0. ( TOP-REAL n1 ) ) ) ) .| = 1 by EUCLID:39;
then |. ( p1 + ( 0. ( TOP-REAL n1 ) ) ) .| = 1 by EUCLID:28;
then A4: |. p .| = 1 by EUCLID:27;
then |( p,p )| = ( 1 ^2 ) by EUCLID_2:4;
then A5: |( p,p )| = ( 1 * 1 ) by SQUARE_1:def 1;
defpred P[ set,set ]
 means
(for q being (Point of ( TOP-REAL n )) holds ((q = $1 & q in T) implies $2 = ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )));
A6: (for x being set holds (x in ( [#] T ) implies (ex y being set st (y in ( [#] S ) & P[ x,y ]))))
proof
let x being set;
assume A7: x in ( [#] T );
( [#] T ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
then reconsider q = x as (Point of ( TOP-REAL n )) by A7;
set y = ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) );
take y;
reconsider n1 = n as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider p1 = p as (Point of ( TOP-REAL n1 ));
q in ( Plane (p,( 0. ( TOP-REAL n ) )) ) by A7,PRE_TOPC:def 5;
then consider x1 being (Point of ( TOP-REAL n )) such that A8: (x1 = q & |( p,( x1 - ( 0. ( TOP-REAL n ) ) ) )| = ( 0 ));
|( p,( q + ( - ( 0. ( TOP-REAL n ) ) ) ) )| = ( 0 ) by A8,EUCLID:41;
then |( p,( q + ( ( - 1 ) * ( 0. ( TOP-REAL n ) ) ) ) )| = ( 0 ) by EUCLID:39;
then |( p,( q + ( 0. ( TOP-REAL n ) ) ) )| = ( 0 ) by EUCLID:28;
then A9: |( p,q )| = ( 0 ) by EUCLID:27;
A10: |( q,q )| >= ( 0 ) by EUCLID_2:35;
A11: (not y in { p })
proof
assume A12: y in { p };
A13: |( ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ),p )| = ( ( 2 * |( q,p )| ) + ( ( |( q,q )| - 1 ) * |( p,p )| ) ) by EUCLID_2:25
.= ( ( |( q,q )| - 1 ) * |( p,p )| ) by A9;
|( ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) ),p )| = ( ( 1 / ( |( q,q )| + 1 ) ) * |( ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ),p )| ) by EUCLID_2:19
.= ( ( ( 1 / ( |( q,q )| + 1 ) ) * ( |( q,q )| - 1 ) ) * |( p,p )| ) by A13;
then ( ( |( q,q )| + 1 ) * 1 ) = ( ( |( q,q )| + 1 ) * ( ( 1 / ( |( q,q )| + 1 ) ) * ( |( q,q )| - 1 ) ) ) by A5,A12,TARSKI:def 1
.= ( ( ( |( q,q )| + 1 ) * ( 1 / ( |( q,q )| + 1 ) ) ) * ( |( q,q )| - 1 ) )
.= ( ( ( |( q,q )| + 1 ) / ( |( q,q )| + 1 ) ) * ( |( q,q )| - 1 ) ) by XCMPLX_1:99
.= ( 1 * ( |( q,q )| - 1 ) ) by A10,XCMPLX_1:60;
hence contradiction;
end;
reconsider y1 = y as (Point of ( TOP-REAL n1 ));
A14: |( q,( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )| = ( ( 2 * |( q,q )| ) + ( ( |( q,q )| - 1 ) * |( p,q )| ) ) by EUCLID_2:25
.= ( 2 * |( q,q )| ) by A9;
A15: |( p,( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )| = ( ( 2 * |( q,p )| ) + ( ( |( q,q )| - 1 ) * |( p,p )| ) ) by EUCLID_2:25
.= ( |( q,q )| - 1 ) by A5,A9;
A16: |( ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ),( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )| = ( ( 2 * ( 2 * |( q,q )| ) ) + ( ( |( q,q )| - 1 ) * |( p,( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )| ) ) by A14,EUCLID_2:25
.= ( ( |( q,q )| + 1 ) * ( |( q,q )| + 1 ) ) by A15;
A17: |( ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ),( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) ) )| = ( ( 1 / ( |( q,q )| + 1 ) ) * |( ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ),( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )| ) by EUCLID_2:20;
|( ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) ),( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) ) )| = ( ( 1 / ( |( q,q )| + 1 ) ) * |( ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ),( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) ) )| ) by EUCLID_2:19
.= ( ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 1 / ( |( q,q )| + 1 ) ) * ( |( q,q )| + 1 ) ) ) * ( |( q,q )| + 1 ) ) by A16,A17
.= ( ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( |( q,q )| + 1 ) / ( |( q,q )| + 1 ) ) ) * ( |( q,q )| + 1 ) ) by XCMPLX_1:99
.= ( ( ( 1 / ( |( q,q )| + 1 ) ) * 1 ) * ( |( q,q )| + 1 ) ) by A10,XCMPLX_1:60
.= ( ( |( q,q )| + 1 ) / ( |( q,q )| + 1 ) ) by XCMPLX_1:99
.= 1 by A10,XCMPLX_1:60;
then |. y .| = 1 by EUCLID_2:5,SQUARE_1:18;
then |. ( y + ( 0. ( TOP-REAL n ) ) ) .| = 1 by EUCLID:27;
then |. ( y + ( ( - 1 ) * ( 0. ( TOP-REAL n ) ) ) ) .| = 1 by EUCLID:28;
then |. ( y + ( - ( 0. ( TOP-REAL n ) ) ) ) .| = 1 by EUCLID:39;
then |. ( y - ( 0. ( TOP-REAL n ) ) ) .| = 1 by EUCLID:41;
then y1 in ( Sphere (( 0. ( TOP-REAL n ) ),1) ) by TOPREAL9:9;
hence y in ( [#] S ) by A1,A11,XBOOLE_0:def 5;
thus P[ x,y ];
end;
consider g1 being (Function of ( [#] T ),( [#] S )) such that A18: (for x being set holds (x in ( [#] T ) implies P[ x,( g1 . x ) ])) from FUNCT_2:sch 1(A6);
reconsider g = g1 as (Function of T,S);
reconsider f1 = f as (Function of ( [#] S ),( [#] T ));
|. ( 0. ( TOP-REAL n ) ) .| <> |. p .| by A4,EUCLID_2:39;
then ( 0. ( TOP-REAL n ) ) <> ( ( 1 + 1 ) * p ) by EUCLID:31;
then ( 0. ( TOP-REAL n ) ) <> ( ( 1 * p ) + ( 1 * p ) ) by EUCLID:33;
then ( 0. ( TOP-REAL n ) ) <> ( ( 1 * p ) + p ) by EUCLID:29;
then ( 0. ( TOP-REAL n ) ) <> ( p + p ) by EUCLID:29;
then ( p + ( - p ) ) <> ( p + p ) by EUCLID:36;
then A19: (not ( - p ) in { p }) by TARSKI:def 1;
|. ( - p ) .| = 1 by A4,EUCLID:71;
then |. ( ( - p ) + ( 0. ( TOP-REAL n ) ) ) .| = 1 by EUCLID:27;
then |. ( ( - p ) + ( ( - 1 ) * ( 0. ( TOP-REAL n ) ) ) ) .| = 1 by EUCLID:28;
then |. ( ( - p ) + ( - ( 0. ( TOP-REAL n ) ) ) ) .| = 1 by EUCLID:39;
then |. ( ( - p ) - ( 0. ( TOP-REAL n ) ) ) .| = 1 by EUCLID:41;
then A20: ( - p ) in ( Sphere (( 0. ( TOP-REAL n1 ) ),1) ) by TOPREAL9:9;
then A21: ( [#] S ) <> ( {} ) by A1,A19,XBOOLE_0:def 5;
A22: (for y,x being set holds ((y in ( [#] T ) & ( g1 . y ) = x) iff (x in ( [#] S ) & ( f1 . x ) = y)))
proof
let y being set,x being set;
hereby
assume A23: y in ( [#] T );
assume A24: ( g1 . y ) = x;
hence A25: x in ( [#] S ) by A23,A21,FUNCT_2:5;
( [#] S ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
then reconsider qx = x as (Point of ( TOP-REAL n )) by A25;
( [#] T ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
then reconsider qy = y as (Point of ( TOP-REAL n )) by A23;
qy in T by A23,STRUCT_0:def 5;
then A26: qx = ( ( 1 / ( |( qy,qy )| + 1 ) ) * ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ) ) by A23,A18,A24;
qx in S by A25,STRUCT_0:def 5;
then A27: ( f . qx ) = ( ( 1 / ( 1 - |( qx,p )| ) ) * ( qx - ( |( qx,p )| * p ) ) ) by A2,CKB43:def 1;
qy in ( Plane (p,( 0. ( TOP-REAL n ) )) ) by A23,PRE_TOPC:def 5;
then consider y1 being (Point of ( TOP-REAL n )) such that A28: (y1 = qy & |( p,( y1 - ( 0. ( TOP-REAL n ) ) ) )| = ( 0 ));
|( p,( qy + ( - ( 0. ( TOP-REAL n ) ) ) ) )| = ( 0 ) by A28,EUCLID:41;
then |( p,( qy + ( ( - 1 ) * ( 0. ( TOP-REAL n ) ) ) ) )| = ( 0 ) by EUCLID:39;
then |( p,( qy + ( 0. ( TOP-REAL n ) ) ) )| = ( 0 ) by EUCLID:28;
then A29: |( p,qy )| = ( 0 ) by EUCLID:27;
A30: |( ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ),p )| = ( ( 2 * |( qy,p )| ) + ( ( |( qy,qy )| - 1 ) * |( p,p )| ) ) by EUCLID_2:25
.= ( |( qy,qy )| - 1 ) by A5,A29;
A31: |( qx,p )| = ( ( 1 / ( |( qy,qy )| + 1 ) ) * |( ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ),p )| ) by A26,EUCLID_2:19
.= ( ( ( |( qy,qy )| - 1 ) / ( |( qy,qy )| + 1 ) ) * 1 ) by A30,XCMPLX_1:75;
A32: |( qy,qy )| >= ( 0 ) by EUCLID_2:35;
A33: ( 1 - |( qx,p )| ) = ( ( ( |( qy,qy )| + 1 ) / ( |( qy,qy )| + 1 ) ) - ( ( |( qy,qy )| - 1 ) / ( |( qy,qy )| + 1 ) ) ) by A31,A32,XCMPLX_1:60
.= ( ( ( |( qy,qy )| + 1 ) - ( |( qy,qy )| - 1 ) ) / ( |( qy,qy )| + 1 ) ) by XCMPLX_1:120
.= ( 2 / ( |( qy,qy )| + 1 ) );
A34: ( 1 / ( 1 - |( qx,p )| ) ) = ( ( |( qy,qy )| + 1 ) / 2 ) by A33,XCMPLX_1:57;
A35: ( ( ( |( qy,qy )| + 1 ) / 2 ) * qx ) = ( ( ( ( |( qy,qy )| + 1 ) / 2 ) * ( 1 / ( |( qy,qy )| + 1 ) ) ) * ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ) ) by A26,EUCLID:30
.= ( ( ( ( |( qy,qy )| + 1 ) * 1 ) / ( 2 * ( |( qy,qy )| + 1 ) ) ) * ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ) ) by XCMPLX_1:76
.= ( ( ( ( |( qy,qy )| + 1 ) / ( |( qy,qy )| + 1 ) ) * ( 1 / 2 ) ) * ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ) ) by XCMPLX_1:76
.= ( ( 1 * ( 1 / 2 ) ) * ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ) ) by A32,XCMPLX_1:60
.= ( ( ( 1 / 2 ) * ( 2 * qy ) ) + ( ( 1 / 2 ) * ( ( |( qy,qy )| - 1 ) * p ) ) ) by EUCLID:32
.= ( ( ( ( 1 / 2 ) * 2 ) * qy ) + ( ( 1 / 2 ) * ( ( |( qy,qy )| - 1 ) * p ) ) ) by EUCLID:30
.= ( ( 1 * qy ) + ( ( ( 1 / 2 ) * ( |( qy,qy )| - 1 ) ) * p ) ) by EUCLID:30
.= ( qy + ( ( ( |( qy,qy )| - 1 ) / 2 ) * p ) ) by EUCLID:29;
A36: ( ( ( |( qy,qy )| + 1 ) / 2 ) * |( qx,p )| ) = ( ( ( |( qy,qy )| + 1 ) / ( |( qy,qy )| + 1 ) ) * ( ( |( qy,qy )| - 1 ) / 2 ) ) by A31,XCMPLX_1:85
.= ( 1 * ( ( |( qy,qy )| - 1 ) / 2 ) ) by A32,XCMPLX_1:60
.= ( ( |( qy,qy )| - 1 ) / 2 );
thus ( f1 . x ) = ( ( ( ( |( qy,qy )| + 1 ) / 2 ) * qx ) - ( ( ( |( qy,qy )| + 1 ) / 2 ) * ( |( qx,p )| * p ) ) ) by A27,A34,EUCLID:49
.= ( ( ( ( |( qy,qy )| + 1 ) / 2 ) * qx ) - ( ( ( |( qy,qy )| - 1 ) / 2 ) * p ) ) by A36,EUCLID:30
.= y by A35,EUCLID:48;
end;
assume A37: x in ( [#] S );
assume A38: ( f1 . x ) = y;
hence A39: y in ( [#] T ) by A37,FUNCT_2:5;
( [#] S ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
then reconsider qx = x as (Point of ( TOP-REAL n )) by A37;
qx in S by A37,STRUCT_0:def 5;
then A40: y = ( ( 1 / ( 1 - |( qx,p )| ) ) * ( qx - ( |( qx,p )| * p ) ) ) by A38,A2,CKB43:def 1;
then reconsider qy = y as (Point of ( TOP-REAL n ));
A41: qy in T by A39,STRUCT_0:def 5;
A42: ( g1 . qy ) = ( ( 1 / ( |( qy,qy )| + 1 ) ) * ( ( 2 * qy ) + ( ( |( qy,qy )| - 1 ) * p ) ) ) by A41,A39,A18;
reconsider qx1 = qx as (Point of ( TOP-REAL n1 ));
qx1 in ( Sphere (( 0. ( TOP-REAL n ) ),1) ) by A37,A1,XBOOLE_0:def 5;
then |. ( qx1 - ( 0. ( TOP-REAL n1 ) ) ) .| = 1 by TOPREAL9:9;
then |. ( qx1 + ( - ( 0. ( TOP-REAL n1 ) ) ) ) .| = 1 by EUCLID:41;
then |. ( qx1 + ( ( - 1 ) * ( 0. ( TOP-REAL n1 ) ) ) ) .| = 1 by EUCLID:39;
then |. ( qx1 + ( 0. ( TOP-REAL n1 ) ) ) .| = 1 by EUCLID:28;
then |. qx .| = 1 by EUCLID:27;
then |( qx,qx )| = ( 1 ^2 ) by EUCLID_2:4;
then A43: |( qx,qx )| = ( 1 * 1 ) by SQUARE_1:def 1;
A44: |( ( |( qx,p )| * p ),( qx - ( |( qx,p )| * p ) ) )| = ( |( ( |( qx,p )| * p ),qx )| - |( ( |( qx,p )| * p ),( |( qx,p )| * p ) )| ) by EUCLID_2:27
.= ( ( |( qx,p )| * |( qx,p )| ) - |( ( |( qx,p )| * p ),( |( qx,p )| * p ) )| ) by EUCLID_2:19
.= ( ( |( qx,p )| * |( qx,p )| ) - ( |( qx,p )| * |( p,( |( qx,p )| * p ) )| ) ) by EUCLID_2:19
.= ( ( |( qx,p )| * |( qx,p )| ) - ( |( qx,p )| * ( |( qx,p )| * |( p,p )| ) ) ) by EUCLID_2:20
.= ( 0 ) by A5;
A45: |( qx,( qx - ( |( qx,p )| * p ) ) )| = ( |( qx,qx )| - |( qx,( |( qx,p )| * p ) )| ) by EUCLID_2:24
.= ( 1 - ( |( qx,p )| * |( qx,p )| ) ) by A43,EUCLID_2:20;
A46: |( ( qx - ( |( qx,p )| * p ) ),( qx - ( |( qx,p )| * p ) ) )| = ( |( qx,( qx - ( |( qx,p )| * p ) ) )| - |( ( |( qx,p )| * p ),( qx - ( |( qx,p )| * p ) ) )| ) by EUCLID_2:24
.= ( ( 1 - ( |( qx,p )| * |( qx,p )| ) ) + ( 0 ) ) by A45,A44;
|( qx,p )| <> 1
proof
assume A47: |( qx,p )| = 1;
A48: (not qx in { p }) by A1,A37,XBOOLE_0:def 5;
( |( qx,p )| - |( qx,qx )| ) = ( 0 ) by A43,A47;
then A49: |( qx,( p - qx ) )| = ( 0 ) by EUCLID_2:27;
( |( p,p )| - |( qx,p )| ) = ( 0 ) by A5,A47;
then A50: |( ( p - qx ),p )| = ( 0 ) by EUCLID_2:24;
|( ( p - qx ),( p - qx ) )| = ( ( 0 ) - ( 0 ) ) by A49,A50,EUCLID_2:24;
then ( p - qx ) = ( 0. ( TOP-REAL n ) ) by EUCLID_2:41;
then p = qx by EUCLID:43;
hence contradiction by A48,TARSKI:def 1;
end;
then A51: ( 1 - |( qx,p )| ) <> ( 0 );
then A52: ( ( 1 - |( qx,p )| ) * ( 1 - |( qx,p )| ) ) <> ( 0 );
A53: |( qy,qy )| = ( ( 1 / ( 1 - |( qx,p )| ) ) * |( ( qx - ( |( qx,p )| * p ) ),qy )| ) by A40,EUCLID_2:19
.= ( ( 1 / ( 1 - |( qx,p )| ) ) * ( ( 1 / ( 1 - |( qx,p )| ) ) * |( ( qx - ( |( qx,p )| * p ) ),( qx - ( |( qx,p )| * p ) ) )| ) ) by A40,EUCLID_2:19
.= ( ( ( 1 / ( 1 - |( qx,p )| ) ) * ( 1 / ( 1 - |( qx,p )| ) ) ) * ( 1 - ( |( qx,p )| * |( qx,p )| ) ) ) by A46
.= ( ( 1 / ( ( 1 - |( qx,p )| ) * ( 1 - |( qx,p )| ) ) ) * ( 1 - ( |( qx,p )| * |( qx,p )| ) ) ) by XCMPLX_1:102
.= ( ( 1 - ( |( qx,p )| * |( qx,p )| ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) by XCMPLX_1:99;
A54: ( |( qy,qy )| + 1 ) = ( ( ( 1 - ( |( qx,p )| * |( qx,p )| ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) + ( ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) ) by A53,A52,XCMPLX_1:60
.= ( ( ( 1 - ( |( qx,p )| * |( qx,p )| ) ) + ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) by XCMPLX_1:62
.= ( ( 2 * ( 1 - |( qx,p )| ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) )
.= ( 2 * ( ( 1 - |( qx,p )| ) / ( ( 1 - |( qx,p )| ) * ( 1 - |( qx,p )| ) ) ) ) by XCMPLX_1:74
.= ( 2 * ( ( ( 1 - |( qx,p )| ) / ( 1 - |( qx,p )| ) ) / ( 1 - |( qx,p )| ) ) ) by XCMPLX_1:78
.= ( 2 * ( 1 / ( 1 - |( qx,p )| ) ) ) by A51,XCMPLX_1:60
.= ( ( 2 * 1 ) / ( 1 - |( qx,p )| ) ) by XCMPLX_1:74;
A55: ( |( qy,qy )| - 1 ) = ( ( ( 1 - ( |( qx,p )| * |( qx,p )| ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) - ( ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) ) by A53,A52,XCMPLX_1:60
.= ( ( ( 1 - ( |( qx,p )| * |( qx,p )| ) ) - ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) / ( ( 1 - ( 2 * |( qx,p )| ) ) + ( |( qx,p )| * |( qx,p )| ) ) ) by XCMPLX_1:120
.= ( ( ( 2 * |( qx,p )| ) * ( 1 - |( qx,p )| ) ) / ( ( 1 - |( qx,p )| ) * ( 1 - |( qx,p )| ) ) )
.= ( ( 2 * |( qx,p )| ) * ( ( 1 - |( qx,p )| ) / ( ( 1 - |( qx,p )| ) * ( 1 - |( qx,p )| ) ) ) ) by XCMPLX_1:74
.= ( ( 2 * |( qx,p )| ) * ( ( ( 1 - |( qx,p )| ) / ( 1 - |( qx,p )| ) ) / ( 1 - |( qx,p )| ) ) ) by XCMPLX_1:78
.= ( ( 2 * |( qx,p )| ) * ( 1 / ( 1 - |( qx,p )| ) ) ) by A51,XCMPLX_1:60
.= ( ( ( 2 * |( qx,p )| ) * 1 ) / ( 1 - |( qx,p )| ) ) by XCMPLX_1:74;
A56: ( 1 / ( |( qy,qy )| + 1 ) ) = ( ( 1 - |( qx,p )| ) / 2 ) by A54,XCMPLX_1:57;
A57: ( ( |( qy,qy )| - 1 ) / ( |( qy,qy )| + 1 ) ) = ( ( 2 * |( qx,p )| ) / ( ( 1 - |( qx,p )| ) * ( 2 / ( 1 - |( qx,p )| ) ) ) ) by A54,A55,XCMPLX_1:78
.= ( ( 2 * |( qx,p )| ) / ( ( 2 * ( 1 - |( qx,p )| ) ) / ( 1 - |( qx,p )| ) ) ) by XCMPLX_1:74
.= ( ( 2 * |( qx,p )| ) / ( 2 * ( ( 1 - |( qx,p )| ) / ( 1 - |( qx,p )| ) ) ) ) by XCMPLX_1:74
.= ( ( 2 * |( qx,p )| ) / ( 2 * 1 ) ) by A51,XCMPLX_1:60
.= |( qx,p )|;
A58: ( ( 1 - |( qx,p )| ) * qy ) = ( ( ( 1 - |( qx,p )| ) * ( 1 / ( 1 - |( qx,p )| ) ) ) * ( qx - ( |( qx,p )| * p ) ) ) by A40,EUCLID:30
.= ( ( ( ( 1 - |( qx,p )| ) * 1 ) / ( 1 - |( qx,p )| ) ) * ( qx - ( |( qx,p )| * p ) ) ) by XCMPLX_1:74
.= ( 1 * ( qx - ( |( qx,p )| * p ) ) ) by A51,XCMPLX_1:60
.= ( qx - ( |( qx,p )| * p ) ) by EUCLID:29;
thus ( g1 . y ) = ( ( ( 1 / ( |( qy,qy )| + 1 ) ) * ( 2 * qy ) ) + ( ( 1 / ( |( qy,qy )| + 1 ) ) * ( ( |( qy,qy )| - 1 ) * p ) ) ) by A42,EUCLID:32
.= ( ( ( ( 1 / ( |( qy,qy )| + 1 ) ) * 2 ) * qy ) + ( ( 1 / ( |( qy,qy )| + 1 ) ) * ( ( |( qy,qy )| - 1 ) * p ) ) ) by EUCLID:30
.= ( ( ( ( 1 / ( |( qy,qy )| + 1 ) ) * 2 ) * qy ) + ( ( ( 1 / ( |( qy,qy )| + 1 ) ) * ( |( qy,qy )| - 1 ) ) * p ) ) by EUCLID:30
.= ( ( ( 1 - |( qx,p )| ) * qy ) + ( ( ( 1 * ( |( qy,qy )| - 1 ) ) / ( |( qy,qy )| + 1 ) ) * p ) ) by A56,XCMPLX_1:74
.= ( qx - ( ( |( qx,p )| * p ) - ( |( qx,p )| * p ) ) ) by A57,A58,EUCLID:47
.= ( qx - ( 0. ( TOP-REAL n ) ) ) by EUCLID:42
.= ( qx + ( - ( 0. ( TOP-REAL n ) ) ) ) by EUCLID:41
.= ( qx + ( ( - 1 ) * ( 0. ( TOP-REAL n ) ) ) ) by EUCLID:39
.= ( qx + ( 0. ( TOP-REAL n ) ) ) by EUCLID:28
.= x by EUCLID:27;
end;
(for y being set holds (y in ( [#] T ) iff (ex x being set st (x in ( dom f ) & y = ( f . x )))))
proof
let y being set;
hereby
assume A59: y in ( [#] T );
set x = ( g . y );
take x;
thus x in ( dom f ) by A22,A3,A59;
thus y = ( f . x ) by A59,A22;
end;
given x being set such that
A60: (x in ( dom f ) & y = ( f . x ));

thus y in ( [#] T ) by A60,FUNCT_2:5;
end;
then A61: ( rng f ) = ( [#] T ) by FUNCT_1:def 3;
A62: f is  one-to-one
proof
let x1 being set,x2 being set;
assume A63: (x1 in ( dom f ) & x2 in ( dom f ));
assume A64: ( f . x1 ) = ( f . x2 );
(( g1 . ( f . x1 ) ) = x1 & ( g1 . ( f . x2 ) ) = x2) by A63,A22;
hence x1 = x2 by A64;
end;
A65: f is  continuous
proof
A66: ( [#] S ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
set f0 = ( InnerProduct p );
consider f1 being (Function of ( TOP-REAL n1 ),( R^1 )) such that A67: ((for q being (Point of ( TOP-REAL n )) holds ( f1 . q ) = 1) & f1 is  continuous) by JGRAPH_2:20;
consider f2 being (Function of ( TOP-REAL n ),( R^1 )) such that A68: ((for q being (Point of ( TOP-REAL n )) holds (for r1,r2 being  real number holds ((( f1 . q ) = r1 & ( f0 . q ) = r2) implies ( f2 . q ) = ( r1 - r2 )))) & f2 is  continuous) by A67,JGRAPH_2:21;
reconsider f2 as  continuous (Function of ( TOP-REAL n ),( R^1 )) by A68;
reconsider S1 = S as non empty TopSpace by A20,A1,A19,XBOOLE_0:def 5;
set f3 = ( f2 | S1 );
A69: (for q being (Point of ( TOP-REAL n )) holds (q in S1 implies ( f3 . q ) = ( 1 - |( q,p )| )))
proof
let q being (Point of ( TOP-REAL n ));
assume q in S1;
then A70: q in (the carrier of S1) by STRUCT_0:def 5;
A73a: ( [#] S1 ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
(( f0 . q ) = |( q,p )| & ( f1 . q ) = 1) by CKB30:def 1,A67;
then A71: ( f2 . q ) = ( 1 - |( q,p )| ) by A68;
thus ( f3 . q ) = ( ( f2 | (the carrier of S1) ) . q ) by A73a,TMAP_1:def 3
.= ( 1 - |( q,p )| ) by A71,A70,FUNCT_1:49;
end;
A72: (for q being (Point of S1) holds ( f3 . q ) <> ( 0 ))
proof
let q being (Point of S1);
q in ( [#] S );
then reconsider qx = q as (Point of ( TOP-REAL n )) by A66;
reconsider qx1 = qx as (Point of ( TOP-REAL n1 ));
qx1 in ( Sphere (( 0. ( TOP-REAL n ) ),1) ) by A1,XBOOLE_0:def 5;
then |. ( qx1 - ( 0. ( TOP-REAL n1 ) ) ) .| = 1 by TOPREAL9:9;
then |. ( qx1 + ( - ( 0. ( TOP-REAL n1 ) ) ) ) .| = 1 by EUCLID:41;
then |. ( qx1 + ( ( - 1 ) * ( 0. ( TOP-REAL n1 ) ) ) ) .| = 1 by EUCLID:39;
then |. ( qx1 + ( 0. ( TOP-REAL n1 ) ) ) .| = 1 by EUCLID:28;
then |. qx .| = 1 by EUCLID:27;
then |( qx,qx )| = ( 1 ^2 ) by EUCLID_2:4;
then A73: |( qx,qx )| = ( 1 * 1 ) by SQUARE_1:def 1;
|( qx,p )| <> 1
proof
assume A74: |( qx,p )| = 1;
A75: (not qx in { p }) by A1,XBOOLE_0:def 5;
( |( qx,p )| - |( qx,qx )| ) = ( 0 ) by A73,A74;
then A76: |( qx,( p - qx ) )| = ( 0 ) by EUCLID_2:27;
( |( p,p )| - |( qx,p )| ) = ( 0 ) by A5,A74;
then A77: |( ( p - qx ),p )| = ( 0 ) by EUCLID_2:24;
|( ( p - qx ),( p - qx ) )| = ( ( 0 ) - ( 0 ) ) by A76,A77,EUCLID_2:24;
then ( p - qx ) = ( 0. ( TOP-REAL n ) ) by EUCLID_2:41;
then p = qx by EUCLID:43;
hence contradiction by A75,TARSKI:def 1;
end;
then A78: ( 1 - |( qx,p )| ) <> ( 0 );
qx in S1 by STRUCT_0:def 5;
hence thesis by A69,A78;
end;
then consider f4 being (Function of S1,( R^1 )) such that A79: ((for q being (Point of S1) holds (for r1 being  real number holds (( f3 . q ) = r1 implies ( f4 . q ) = ( 1 / r1 )))) & f4 is  continuous) by JGRAPH_2:26;
consider f5 being (Function of S1,( TOP-REAL n1 )) such that A80: ((for a being (Point of S1) holds (for b being (Point of ( TOP-REAL n )) holds (for r being  real number holds ((a = b & ( f4 . a ) = r) implies ( f5 . b ) = ( r * b ))))) & f5 is  continuous) by A79,MFOLD_1:2;
set f6 = ( f0 | S1 );
A81: (for q being (Point of ( TOP-REAL n )) holds (q in S1 implies ( f6 . q ) = |( q,p )|))
proof
let q being (Point of ( TOP-REAL n ));
assume q in S1;
then A82: q in (the carrier of S1) by STRUCT_0:def 5;
A83: ( [#] S1 ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
A84: ( f0 . q ) = |( q,p )| by CKB30:def 1;
thus ( f6 . q ) = ( ( f0 | (the carrier of S1) ) . q ) by A83,TMAP_1:def 3
.= |( q,p )| by A84,A82,FUNCT_1:49;
end;
consider f7 being (Function of S1,( R^1 )) such that A85: ((for q being (Point of S1) holds (for r1,r2 being  real number holds ((( f6 . q ) = r1 & ( f3 . q ) = r2) implies ( f7 . q ) = ( r1 / r2 )))) & f7 is  continuous) by A72,JGRAPH_2:27;
reconsider p1 = ( - p ) as (Point of ( TOP-REAL n1 ));
consider f8 being (Function of S1,( TOP-REAL n1 )) such that A86: ((for r being (Point of S1) holds ( f8 . r ) = ( ( f7 . r ) * p1 )) & f8 is  continuous) by A85,JGRAPH_6:9;
consider f9 being (Function of S,( TOP-REAL n )) such that A87: ((for r being (Point of S1) holds ( f9 . r ) = ( ( f5 . r ) + ( f8 . r ) )) & f9 is  continuous) by A86,A80,JGRAPH_6:12;
A88: ( dom f ) = ( [#] S ) by FUNCT_2:def 1
.= ( dom f9 ) by FUNCT_2:def 1;
(for x being set holds (x in ( dom f ) implies ( f . x ) = ( f9 . x )))
proof
let x being set;
assume A89: x in ( dom f );
then x in ( [#] S );
then reconsider qx = x as (Point of ( TOP-REAL n )) by A66;
A90: qx in S by A89,STRUCT_0:def 5;
reconsider r = qx as (Point of S1) by A89;
A91: ( f3 . r ) = ( 1 - |( qx,p )| ) by A69,A90;
A92: ( f4 . r ) = ( 1 / ( 1 - |( qx,p )| ) ) by A91,A79;
A93: ( f6 . r ) = |( qx,p )| by A81,A90;
A94: ( f8 . r ) = ( ( f7 . r ) * ( - p ) ) by A86
.= ( ( |( qx,p )| / ( 1 - |( qx,p )| ) ) * ( - p ) ) by A91,A93,A85;
( f9 . x ) = ( ( f5 . r ) + ( f8 . r ) ) by A87
.= ( ( ( 1 / ( 1 - |( qx,p )| ) ) * qx ) + ( ( ( 1 * |( qx,p )| ) / ( 1 - |( qx,p )| ) ) * ( - p ) ) ) by A92,A80,A94
.= ( ( ( 1 / ( 1 - |( qx,p )| ) ) * qx ) + ( ( ( 1 / ( 1 - |( qx,p )| ) ) * |( qx,p )| ) * ( - p ) ) ) by XCMPLX_1:74
.= ( ( ( 1 / ( 1 - |( qx,p )| ) ) * qx ) + ( ( 1 / ( 1 - |( qx,p )| ) ) * ( |( qx,p )| * ( - p ) ) ) ) by EUCLID:30
.= ( ( 1 / ( 1 - |( qx,p )| ) ) * ( qx + ( |( qx,p )| * ( - p ) ) ) ) by EUCLID:32
.= ( ( 1 / ( 1 - |( qx,p )| ) ) * ( qx + ( - ( |( qx,p )| * p ) ) ) ) by EUCLID:40
.= ( ( 1 / ( 1 - |( qx,p )| ) ) * ( qx - ( |( qx,p )| * p ) ) ) by EUCLID:41;
hence ( f . x ) = ( f9 . x ) by A90,A2,CKB43:def 1;
end;
hence thesis by A87,A88,FUNCT_1:2,PRE_TOPC:27;
end;
A95: g is  continuous
proof
A96: (for q being (Point of ( TOP-REAL n )) holds (q in T implies ( g . q ) = ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) )))
proof
let q being (Point of ( TOP-REAL n ));
assume A97: q in T;
then q in ( [#] T ) by STRUCT_0:def 5;
hence ( g . q ) = ( ( 1 / ( |( q,q )| + 1 ) ) * ( ( 2 * q ) + ( ( |( q,q )| - 1 ) * p ) ) ) by A18,A97;
end;
consider g0 being (Function of ( TOP-REAL n1 ),( R^1 )) such that A98: ((for q being (Point of ( TOP-REAL n1 )) holds ( g0 . q ) = |. q .|) & g0 is  continuous) by JORDAN2C:84;
consider g1 being (Function of ( TOP-REAL n ),( R^1 )) such that A99: ((for q being (Point of ( TOP-REAL n )) holds (for r1 being  real number holds (( g0 . q ) = r1 implies ( g1 . q ) = ( r1 * r1 )))) & g1 is  continuous) by A98,JGRAPH_2:22;
consider g2 being (Function of ( TOP-REAL n ),( R^1 )) such that A100: ((for q being (Point of ( TOP-REAL n )) holds (for r1 being  real number holds (( g1 . q ) = r1 implies ( g2 . q ) = ( r1 + 1 )))) & g2 is  continuous) by A99,JGRAPH_2:24;
consider g3 being (Function of ( TOP-REAL n ),( R^1 )) such that A101: ((for q being (Point of ( TOP-REAL n )) holds (for r1 being  real number holds (( g1 . q ) = r1 implies ( g3 . q ) = ( r1 + ( - 1 ) )))) & g3 is  continuous) by A99,JGRAPH_2:24;
consider g4 being (Function of ( TOP-REAL n ),( R^1 )) such that A102: ((for q being (Point of ( TOP-REAL n )) holds ( g4 . q ) = 2) & g4 is  continuous) by JGRAPH_2:20;
A103: (for q being (Point of ( TOP-REAL n )) holds ( g2 . q ) <> ( 0 ))
proof
let q being (Point of ( TOP-REAL n ));
( g0 . q ) = |. q .| by A98;
then ( g1 . q ) = ( |. q .| * |. q .| ) by A99;
then ( g2 . q ) = ( ( |. q .| * |. q .| ) + 1 ) by A100;
hence ( g2 . q ) <> ( 0 );
end;
then consider g5 being (Function of ( TOP-REAL n ),( R^1 )) such that A104: ((for q being (Point of ( TOP-REAL n )) holds (for r1,r2 being  real number holds ((( g4 . q ) = r1 & ( g2 . q ) = r2) implies ( g5 . q ) = ( r1 / r2 )))) & g5 is  continuous) by A102,A100,JGRAPH_2:27;
reconsider g6 = ( g5 | T ) as  continuous (Function of T,( R^1 )) by A104;
consider g7 being (Function of T,( TOP-REAL n1 )) such that A105: ((for a being (Point of T) holds (for b being (Point of ( TOP-REAL n )) holds (for r being  real number holds ((a = b & ( g6 . a ) = r) implies ( g7 . b ) = ( r * b ))))) & g7 is  continuous) by MFOLD_1:2;
consider g8 being (Function of ( TOP-REAL n ),( R^1 )) such that A106: ((for q being (Point of ( TOP-REAL n )) holds (for r1,r2 being  real number holds ((( g3 . q ) = r1 & ( g2 . q ) = r2) implies ( g8 . q ) = ( r1 / r2 )))) & g8 is  continuous) by A103,A100,A101,JGRAPH_2:27;
reconsider p1 = p as (Point of ( TOP-REAL n1 ));
reconsider g9 = ( g8 | T ) as  continuous (Function of T,( R^1 )) by A106;
consider g10 being (Function of T,( TOP-REAL n1 )) such that A107: ((for r being (Point of T) holds ( g10 . r ) = ( ( g9 . r ) * p1 )) & g10 is  continuous) by JGRAPH_6:9;
consider g11 being (Function of T,( TOP-REAL n1 )) such that A108: ((for r being (Point of T) holds ( g11 . r ) = ( ( g7 . r ) + ( g10 . r ) )) & g11 is  continuous) by A105,A107,JGRAPH_6:12;
A109: ( dom g ) = ( [#] T ) by A21,FUNCT_2:def 1
.= ( dom g11 ) by FUNCT_2:def 1;
(for x being set holds (x in ( dom g ) implies ( g . x ) = ( g11 . x )))
proof
let x being set;
assume A110: x in ( dom g );
then A111: x in ( [#] T );
( [#] T ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
then reconsider qx = x as (Point of ( TOP-REAL n )) by A111;
A112: qx in T by A110,STRUCT_0:def 5;
reconsider r = qx as (Point of T) by A110;
A113: ( [#] T ) c= ( [#] ( TOP-REAL n ) ) by PRE_TOPC:def 4;
A114: ( g0 . qx ) = |. qx .| by A98;
A115: ( g1 . qx ) = ( |. qx .| * |. qx .| ) by A99,A114
.= ( |. qx .| ^2 ) by SQUARE_1:def 1
.= |( qx,qx )| by EUCLID_2:4;
A116: ( g2 . qx ) = ( |( qx,qx )| + 1 ) by A100,A115;
A117: ( g4 . qx ) = 2 by A102;
A118: ( g6 . qx ) = ( ( g5 | (the carrier of T) ) . qx ) by A113,TMAP_1:def 3
.= ( g5 . qx ) by A110,FUNCT_1:49
.= ( 2 / ( |( qx,qx )| + 1 ) ) by A104,A117,A116;
A119: ( g3 . qx ) = ( |( qx,qx )| + ( - 1 ) ) by A101,A115;
A120: ( g9 . qx ) = ( ( g8 | (the carrier of T) ) . qx ) by A113,TMAP_1:def 3
.= ( g8 . qx ) by A110,FUNCT_1:49
.= ( ( |( qx,qx )| - 1 ) / ( |( qx,qx )| + 1 ) ) by A116,A119,A106;
A121: ( g7 . r ) = ( ( 2 / ( |( qx,qx )| + 1 ) ) * qx ) by A105,A118;
( g11 . x ) = ( ( g7 . r ) + ( g10 . r ) ) by A108
.= ( ( ( ( 1 * 2 ) / ( |( qx,qx )| + 1 ) ) * qx ) + ( ( ( 1 * ( |( qx,qx )| - 1 ) ) / ( |( qx,qx )| + 1 ) ) * p ) ) by A120,A107,A121
.= ( ( ( ( 1 * 2 ) / ( |( qx,qx )| + 1 ) ) * qx ) + ( ( ( 1 / ( |( qx,qx )| + 1 ) ) * ( |( qx,qx )| - 1 ) ) * p ) ) by XCMPLX_1:74
.= ( ( ( ( 1 / ( |( qx,qx )| + 1 ) ) * 2 ) * qx ) + ( ( ( 1 / ( |( qx,qx )| + 1 ) ) * ( |( qx,qx )| - 1 ) ) * p ) ) by XCMPLX_1:74
.= ( ( ( ( 1 / ( |( qx,qx )| + 1 ) ) * 2 ) * qx ) + ( ( 1 / ( |( qx,qx )| + 1 ) ) * ( ( |( qx,qx )| - 1 ) * p ) ) ) by EUCLID:30
.= ( ( ( 1 / ( |( qx,qx )| + 1 ) ) * ( 2 * qx ) ) + ( ( 1 / ( |( qx,qx )| + 1 ) ) * ( ( |( qx,qx )| - 1 ) * p ) ) ) by EUCLID:30
.= ( ( 1 / ( |( qx,qx )| + 1 ) ) * ( ( 2 * qx ) + ( ( |( qx,qx )| - 1 ) * p ) ) ) by EUCLID:32;
hence ( g . x ) = ( g11 . x ) by A96,A112;
end;
hence thesis by A108,A109,FUNCT_1:2,PRE_TOPC:27;
end;
reconsider f2 = f1 as ( [#] T ) -valued Relation;
f2 is  onto by A61,FUNCT_2:def 3;
then A122: ( f1 " ) = ( (f1 qua Function) " ) by A62,TOPS_2:def 4;
g1 = ( (f1 qua Function) " ) by A61,A62,A22,A21,FUNCT_2:28;
hence thesis by A3,A61,A62,A65,A95,A122,TOPS_2:def 5;
end;
