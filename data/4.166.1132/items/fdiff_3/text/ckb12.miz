environ
vocabularies NUMBERS,FDIFF_1,SEQ_1,FUNCT_1,PARTFUN1,REAL_1,SUBSET_1,XXREAL_0,CARD_1,XXREAL_1,ARYTM_1,TARSKI,RELAT_1,ARYTM_3,FUNCOP_1,VALUED_0,SEQ_2,ORDINAL2,VALUED_1,FUNCT_2,NAT_1,LIMFUNC1,XBOOLE_0,XREAL_0,ORDINAL1,COMPLEX1,SQUARE_1,ORDINAL4,RCOMP_1,FDIFF_3;
notations TARSKI,ORDINAL1,SUBSET_1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SQUARE_1,RFUNCT_1,RCOMP_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB5,CKB6,CKB7,CKB8;
definitions TARSKI,XBOOLE_0,SQUARE_1,PROB_1,LIMFUNC1,VALUED_1,CKB5,CKB6,CKB7,CKB8;
theorems NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,RFUNCT_1,RFUNCT_2,RCOMP_1,FDIFF_1,LIMFUNC2,FDIFF_2,TARSKI,SCHEME1,ZFMISC_1,FCONT_3,FUNCT_1,FUNCT_2,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,XXREAL_1,XXREAL_2,VALUED_0,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11;
schemes SEQ_1,SCHEME1,FUNCT_2,FDIFF_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,FUNCOP_1,SEQ_4,SETFAM_1,REALSET1,FINSET_1;
constructors FUNCOP_1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,RFUNCT_1,RFUNCT_2,LIMFUNC1,PARTFUN1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,XXREAL_2,SETFAM_1,RELSET_1,BINOP_2,RVSUM_1,CKB5,CKB6,CKB7,CKB8;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve f for (PartFunc of ( REAL ),( REAL ));
reserve x0 for Real;
reserve r for Real;
reserve r1 for Real;
reserve g for Real;
reserve g1 for Real;
reserve g2 for Real;
reserve n for (Element of ( NAT ));
reserve a for Real_Sequence;
reserve d for Real_Sequence;
reserve x for set;
theorem
Th8: (((f is_Rcontinuous_in x0 & ( f . x0 ) <> g2) & (ex r st (r > ( 0 ) & [. x0,( x0 + r ) .] c= ( dom f )))) implies (ex r1 st ((r1 > ( 0 ) & [. x0,( x0 + r1 ) .] c= ( dom f )) & (for g holds (g in [. x0,( x0 + r1 ) .] implies ( f . g ) <> g2)))))
proof
assume that
A1: f is_Rcontinuous_in x0
and
A2: ( f . x0 ) <> g2;
given r such that
A3: r > ( 0 )
and
A4: [. x0,( x0 + r ) .] c= ( dom f );

defpred P[ (Element of ( NAT )),set ]
 means
(($2 in [. x0,( x0 + ( r / ( $1 + 1 ) ) ) .] & $2 in ( dom f )) & ( f . $2 ) = g2);
assume A5: (for r1 holds ((r1 > ( 0 ) & [. x0,( x0 + r1 ) .] c= ( dom f )) implies (ex g st (g in [. x0,( x0 + r1 ) .] & ( f . g ) = g2))));
A6: (for n holds (ex g being Real st P[ n,g ]))
proof
let n;
( x0 + ( 0 ) ) <= ( x0 + r ) by A3,XREAL_1:7;
then A7: x0 in [. x0,( x0 + r ) .] by XXREAL_1:1;
A8: ( 0 ) <= n by NAT_1:2;
then ( ( 0 ) + 1 ) <= ( n + 1 ) by XREAL_1:7;
then ( r / ( n + 1 ) ) <= ( r / 1 ) by A3,XREAL_1:118;
then A9: ( x0 + ( r / ( n + 1 ) ) ) <= ( x0 + r ) by XREAL_1:7;
( x0 + ( 0 ) ) = x0;
then x0 <= ( x0 + ( r / ( n + 1 ) ) ) by A3,A8,XREAL_1:7;
then ( x0 + ( r / ( n + 1 ) ) ) in { g1: (x0 <= g1 & g1 <= ( x0 + r )) } by A9;
then ( x0 + ( r / ( n + 1 ) ) ) in [. x0,( x0 + r ) .] by RCOMP_1:def 1;
then [. x0,( x0 + ( r / ( n + 1 ) ) ) .] c= [. x0,( x0 + r ) .] by A7,XXREAL_2:def 12;
then A10: [. x0,( x0 + ( r / ( n + 1 ) ) ) .] c= ( dom f ) by A4,XBOOLE_1:1;
then consider g such that A11: (g in [. x0,( x0 + ( r / ( n + 1 ) ) ) .] & ( f . g ) = g2) by A3,A5,A8,XREAL_1:139;
take g;
thus thesis by A10,A11;
end;
consider a such that A12: (for n holds P[ n,( a . n ) ]) from FUNCT_2:sch 3(A6);
A13: ( rng a ) c= ( ( right_open_halfline x0 ) /\ ( dom f ) )
proof
let x;
assume x in ( rng a );
then consider n such that A14: x = ( a . n ) by FUNCT_2:113;
( a . n ) in [. x0,( x0 + ( r / ( n + 1 ) ) ) .] by A12;
then ( a . n ) in { g1: (x0 <= g1 & g1 <= ( x0 + ( r / ( n + 1 ) ) )) } by RCOMP_1:def 1;
then A15: (ex g1 st ((g1 = ( a . n ) & x0 <= g1) & g1 <= ( x0 + ( r / ( n + 1 ) ) )));
x0 <> ( a . n ) by A2,A12;
then x0 < ( a . n ) by A15,XXREAL_0:1;
then ( a . n ) in { g1: x0 < g1 };
then A16: ( a . n ) in ( right_open_halfline x0 ) by XXREAL_1:230;
( a . n ) in ( dom f ) by A12;
hence thesis by A14,A16,XBOOLE_0:def 4;
end;
A17: ( ( right_open_halfline x0 ) /\ ( dom f ) ) c= ( dom f ) by XBOOLE_1:17;
A18: (for n holds ( ( f /* a ) . n ) = g2)
proof
let n;
thus g2 = ( f . ( a . n ) ) by A12
.= ( ( f /* a ) . n ) by A13,A17,FUNCT_2:108,XBOOLE_1:1;
end;
now
let n being Nat;
n in ( NAT ) by ORDINAL1:def 12;
then ( ( f /* a ) . n ) = g2 by A18;
hence ( ( f /* a ) . n ) = ( ( f /* a ) . ( n + 1 ) ) by A18;
end;
then A19: ( lim ( f /* a ) ) = ( ( f /* a ) . ( 0 ) ) by SEQ_4:26,VALUED_0:25
.= g2 by A18;
deffunc F((Element of ( NAT ))) = ( x0 + ( r / ( $1 + 1 ) ) );
reconsider b = ( ( NAT ) --> x0 ) as Real_Sequence;
A20: ( lim b ) = ( b . ( 0 ) ) by SEQ_4:26
.= x0 by FUNCOP_1:7;
consider d such that A21: (for n holds ( d . n ) = F(n)) from SEQ_1:sch 1;
A22:now
let n;
( a . n ) in [. x0,( x0 + ( r / ( n + 1 ) ) ) .] by A12;
then ( a . n ) in { g1: (x0 <= g1 & g1 <= ( x0 + ( r / ( n + 1 ) ) )) } by RCOMP_1:def 1;
then (ex g1 st ((g1 = ( a . n ) & x0 <= g1) & g1 <= ( x0 + ( r / ( n + 1 ) ) )));
hence (( b . n ) <= ( a . n ) & ( a . n ) <= ( d . n )) by A21,FUNCOP_1:7;
end;
(d is  convergent & ( lim d ) = x0) by A21,FCONT_3:6;
then (a is  convergent & ( lim a ) = x0) by A20,A22,SEQ_2:19,SEQ_2:20;
hence contradiction by A1,A2,A13,A19,CKB6:def 1;
end;
