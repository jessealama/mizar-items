environ
vocabularies NUMBERS,FDIFF_1,SEQ_1,FUNCT_1,PARTFUN1,REAL_1,SUBSET_1,XXREAL_0,CARD_1,XXREAL_1,ARYTM_1,TARSKI,RELAT_1,ARYTM_3,FUNCOP_1,VALUED_0,SEQ_2,ORDINAL2,VALUED_1,FUNCT_2,NAT_1,LIMFUNC1,XBOOLE_0,XREAL_0,ORDINAL1,COMPLEX1,SQUARE_1,ORDINAL4,RCOMP_1,FDIFF_3;
notations TARSKI,ORDINAL1,SUBSET_1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SQUARE_1,RFUNCT_1,RCOMP_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
definitions TARSKI,XBOOLE_0,SQUARE_1,PROB_1,LIMFUNC1,VALUED_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
theorems NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,RFUNCT_1,RFUNCT_2,RCOMP_1,FDIFF_1,LIMFUNC2,FDIFF_2,TARSKI,SCHEME1,ZFMISC_1,FCONT_3,FUNCT_1,FUNCT_2,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,XXREAL_1,XXREAL_2,VALUED_0,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24;
schemes SEQ_1,SCHEME1,FUNCT_2,FDIFF_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,FUNCOP_1,SEQ_4,SETFAM_1,REALSET1,FINSET_1;
constructors FUNCOP_1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,RFUNCT_1,RFUNCT_2,LIMFUNC1,PARTFUN1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,XXREAL_2,SETFAM_1,RELSET_1,BINOP_2,RVSUM_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve h for  convergent_to_0 Real_Sequence;
reserve c for  constant Real_Sequence;
reserve f1 for (PartFunc of ( REAL ),( REAL ));
reserve f2 for (PartFunc of ( REAL ),( REAL ));
reserve x0 for Real;
reserve r1 for Real;
reserve r2 for Real;
reserve g for Real;
reserve n for (Element of ( NAT ));
reserve x for set;
theorem
((f1 is_right_differentiable_in x0 & f2 is_right_differentiable_in x0) implies (( f1 - f2 ) is_right_differentiable_in x0 & ( Rdiff (( f1 - f2 ),x0) ) = ( ( Rdiff (f1,x0) ) - ( Rdiff (f2,x0) ) )))
proof
assume that
A1: f1 is_right_differentiable_in x0
and
A2: f2 is_right_differentiable_in x0;
consider r2 such that A3: r2 > ( 0 ) and A4: [. x0,( x0 + r2 ) .] c= ( dom f2 ) by A2,CKB7:def 1;
consider r1 such that A5: r1 > ( 0 ) and A6: [. x0,( x0 + r1 ) .] c= ( dom f1 ) by A1,CKB7:def 1;
set r = ( min (r1,r2) );
A7: ( 0 ) < r by A5,A3,XXREAL_0:15;
then A8: ( x0 + ( 0 ) ) <= ( x0 + r ) by XREAL_1:7;
r <= r2 by XXREAL_0:17;
then A9: ( x0 + r ) <= ( x0 + r2 ) by XREAL_1:7;
then ( x0 + r ) in { g: (x0 <= g & g <= ( x0 + r2 )) } by A8;
then A10: ( x0 + r ) in [. x0,( x0 + r2 ) .] by RCOMP_1:def 1;
x0 <= ( x0 + r2 ) by A8,A9,XXREAL_0:2;
then x0 in [. x0,( x0 + r2 ) .] by XXREAL_1:1;
then [. x0,( x0 + r ) .] c= [. x0,( x0 + r2 ) .] by A10,XXREAL_2:def 12;
then A11: [. x0,( x0 + r ) .] c= ( dom f2 ) by A4,XBOOLE_1:1;
r <= r1 by XXREAL_0:17;
then A12: ( x0 + r ) <= ( x0 + r1 ) by XREAL_1:7;
then ( x0 + r ) in { g: (x0 <= g & g <= ( x0 + r1 )) } by A8;
then A13: ( x0 + r ) in [. x0,( x0 + r1 ) .] by RCOMP_1:def 1;
x0 <= ( x0 + r1 ) by A12,A8,XXREAL_0:2;
then x0 in [. x0,( x0 + r1 ) .] by XXREAL_1:1;
then [. x0,( x0 + r ) .] c= [. x0,( x0 + r1 ) .] by A13,XXREAL_2:def 12;
then [. x0,( x0 + r ) .] c= ( dom f1 ) by A6,XBOOLE_1:1;
then A14: [. x0,( x0 + r ) .] c= ( ( dom f1 ) /\ ( dom f2 ) ) by A11,XBOOLE_1:19;
A15: (for h holds (for c holds (((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom ( f1 - f2 ) )) & (for n holds ( h . n ) > ( 0 ))) implies (( ( h " ) (#) ( ( ( f1 - f2 ) /* ( h + c ) ) - ( ( f1 - f2 ) /* c ) ) ) is  convergent & ( lim ( ( h " ) (#) ( ( ( f1 - f2 ) /* ( h + c ) ) - ( ( f1 - f2 ) /* c ) ) ) ) = ( ( Rdiff (f1,x0) ) - ( Rdiff (f2,x0) ) )))))
proof
let h;
let c;
assume that
A16: ( rng c ) = { x0 }
and
A17: ( rng ( h + c ) ) c= ( dom ( f1 - f2 ) )
and
A18: (for n holds ( h . n ) > ( 0 ));
A19: ( rng ( h + c ) ) c= ( ( dom f1 ) /\ ( dom f2 ) ) by A17,VALUED_1:12;
A20:now
let n;
A21: ( rng c ) c= ( ( dom f1 ) /\ ( dom f2 ) )
proof
let x;
assume x in ( rng c );
then A22: x = x0 by A16,TARSKI:def 1;
x0 in [. x0,( x0 + r ) .] by A8,XXREAL_1:1;
hence thesis by A14,A22;
end;
thus ( ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) - ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) . n ) = ( ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) - ( ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) . n ) ) by RFUNCT_2:1
.= ( ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f1 /* c ) . n ) ) - ( ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) . n ) ) by RFUNCT_2:1
.= ( ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f1 /* c ) . n ) ) - ( ( ( f2 /* ( h + c ) ) . n ) - ( ( f2 /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f2 /* ( h + c ) ) . n ) ) - ( ( ( f1 /* c ) . n ) - ( ( f2 /* c ) . n ) ) )
.= ( ( ( ( f1 /* ( h + c ) ) - ( f2 /* ( h + c ) ) ) . n ) - ( ( ( f1 /* c ) . n ) - ( ( f2 /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( ( ( f1 /* ( h + c ) ) - ( f2 /* ( h + c ) ) ) . n ) - ( ( ( f1 /* c ) - ( f2 /* c ) ) . n ) ) by RFUNCT_2:1
.= ( ( ( ( f1 /* ( h + c ) ) - ( f2 /* ( h + c ) ) ) - ( ( f1 /* c ) - ( f2 /* c ) ) ) . n ) by RFUNCT_2:1
.= ( ( ( ( f1 - f2 ) /* ( h + c ) ) - ( ( f1 /* c ) - ( f2 /* c ) ) ) . n ) by A19,RFUNCT_2:8
.= ( ( ( ( f1 - f2 ) /* ( h + c ) ) - ( ( f1 - f2 ) /* c ) ) . n ) by A21,RFUNCT_2:8;
end;
then A23: ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) - ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) = ( ( ( f1 - f2 ) /* ( h + c ) ) - ( ( f1 - f2 ) /* c ) ) by FUNCT_2:63;
( ( dom f1 ) /\ ( dom f2 ) ) c= ( dom f2 ) by XBOOLE_1:17;
then A24: ( rng ( h + c ) ) c= ( dom f2 ) by A19,XBOOLE_1:1;
then A25: ( lim ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) = ( Rdiff (f2,x0) ) by A2,A16,A18,CKB23:1;
( Rdiff (f2,x0) ) = ( Rdiff (f2,x0) );
then A26: ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) is  convergent by A2,A16,A18,A24,CKB23:1;
( ( dom f1 ) /\ ( dom f2 ) ) c= ( dom f1 ) by XBOOLE_1:17;
then A27: ( rng ( h + c ) ) c= ( dom f1 ) by A19,XBOOLE_1:1;
A28: ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) - ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) = ( ( h " ) (#) ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) - ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) by SEQ_1:21;
( Rdiff (f1,x0) ) = ( Rdiff (f1,x0) );
then A29: ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) is  convergent by A1,A16,A18,A27,CKB23:1;
then ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) - ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) is  convergent by A26,SEQ_2:11;
hence ( ( h " ) (#) ( ( ( f1 - f2 ) /* ( h + c ) ) - ( ( f1 - f2 ) /* c ) ) ) is  convergent by A28,A20,FUNCT_2:63;
( lim ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) = ( Rdiff (f1,x0) ) by A1,A16,A18,A27,CKB23:1;
hence thesis by A29,A26,A25,A28,A23,SEQ_2:12;
end;
[. x0,( x0 + r ) .] c= ( dom ( f1 - f2 ) ) by A14,VALUED_1:12;
hence thesis by A7,A15,CKB23:1;
end;
