environ
vocabularies NUMBERS,FDIFF_1,SEQ_1,FUNCT_1,PARTFUN1,REAL_1,SUBSET_1,XXREAL_0,CARD_1,XXREAL_1,ARYTM_1,TARSKI,RELAT_1,ARYTM_3,FUNCOP_1,VALUED_0,SEQ_2,ORDINAL2,VALUED_1,FUNCT_2,NAT_1,LIMFUNC1,XBOOLE_0,XREAL_0,ORDINAL1,COMPLEX1,SQUARE_1,ORDINAL4,RCOMP_1,FDIFF_3;
notations TARSKI,ORDINAL1,SUBSET_1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SQUARE_1,RFUNCT_1,RCOMP_1,FDIFF_1,LIMFUNC1,RECDEF_1;
definitions TARSKI,XBOOLE_0,SQUARE_1,PROB_1,LIMFUNC1,VALUED_1;
theorems NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,RFUNCT_1,RFUNCT_2,RCOMP_1,FDIFF_1,LIMFUNC2,FDIFF_2,TARSKI,SCHEME1,ZFMISC_1,FCONT_3,FUNCT_1,FUNCT_2,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,XXREAL_1,XXREAL_2,VALUED_0,ORDINAL1,CKB1,CKB2,CKB3;
schemes SEQ_1,SCHEME1,FUNCT_2,FDIFF_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,FUNCOP_1,SEQ_4,SETFAM_1,REALSET1,FINSET_1;
constructors FUNCOP_1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,RFUNCT_1,RFUNCT_2,LIMFUNC1,PARTFUN1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,XXREAL_2,SETFAM_1,RELSET_1,BINOP_2,RVSUM_1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve h for  convergent_to_0 Real_Sequence;
reserve h1 for  convergent_to_0 Real_Sequence;
reserve h2 for  convergent_to_0 Real_Sequence;
reserve c for  constant Real_Sequence;
reserve f for (PartFunc of ( REAL ),( REAL ));
reserve x0 for Real;
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve a for Real_Sequence;
reserve b for Real_Sequence;
reserve d for Real_Sequence;
reserve x for set;
theorem
Th4: (((for h holds (for c holds (((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom f )) & (for n holds ( h . n ) > ( 0 ))) implies ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent))) & { x0 } c= ( dom f )) implies (for h1 holds (for h2 holds (for c holds (((((( rng c ) = { x0 } & ( rng ( h1 + c ) ) c= ( dom f )) & ( rng ( h2 + c ) ) c= ( dom f )) & (for n holds ( h1 . n ) > ( 0 ))) & (for n holds ( h2 . n ) > ( 0 ))) implies ( lim ( ( h1 " ) (#) ( ( f /* ( h1 + c ) ) - ( f /* c ) ) ) ) = ( lim ( ( h2 " ) (#) ( ( f /* ( h2 + c ) ) - ( f /* c ) ) ) ))))))
proof
assume that
A1: (for h holds (for c holds (((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom f )) & (for n holds ( h . n ) > ( 0 ))) implies ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent)))
and
A2: { x0 } c= ( dom f );
let h1;
let h2;
let c;
assume that
A3: ( rng c ) = { x0 }
and
A4: ( rng ( h1 + c ) ) c= ( dom f )
and
A5: ( rng ( h2 + c ) ) c= ( dom f )
and
A6: (for n holds ( h1 . n ) > ( 0 ))
and
A7: (for n holds ( h2 . n ) > ( 0 ));
deffunc G((Element of ( NAT ))) = ( h2 . $1 );
deffunc F((Element of ( NAT ))) = ( h1 . $1 );
consider d such that A8: (for n holds (( d . ( 2 * n ) ) = F(n) & ( d . ( ( 2 * n ) + 1 ) ) = G(n))) from SCHEME1:sch 2;
A9: h2 is  non-zero by FDIFF_1:def 1;
A10: h1 is  non-zero by FDIFF_1:def 1;
now
let n;
consider m such that A11: (n = ( 2 * m ) or n = ( ( 2 * m ) + 1 )) by SCHEME1:1;
now
per cases  by A11;
suppose n = ( 2 * m );

then ( d . n ) = ( h1 . m ) by A8;
hence ( d . n ) <> ( 0 ) by A10,SEQ_1:5;
end;
suppose n = ( ( 2 * m ) + 1 );

then ( d . n ) = ( h2 . m ) by A8;
hence ( d . n ) <> ( 0 ) by A9,SEQ_1:5;
end;
end;
hence ( d . n ) <> ( 0 );
end;
then A12: d is  non-zero by SEQ_1:5;
A13: (h2 is  convergent & ( lim h2 ) = ( 0 )) by FDIFF_1:def 1;
(h1 is  convergent & ( lim h1 ) = ( 0 )) by FDIFF_1:def 1;
then (d is  convergent & ( lim d ) = ( 0 )) by A8,A13,FDIFF_2:1;
then reconsider d as  convergent_to_0 Real_Sequence by A12,FDIFF_1:def 1;
deffunc F((Element of ( NAT ))) = ( 2 * $1 );
consider a such that A14: (for n holds ( a . n ) = F(n)) from SEQ_1:sch 1;
deffunc F((Element of ( NAT ))) = ( ( 2 * $1 ) + 1 );
consider b such that A15: (for n holds ( b . n ) = F(n)) from SEQ_1:sch 1;
reconsider b as  increasing (sequence of ( NAT )) by A15,FDIFF_2:3;
A16: ( rng ( d + c ) ) c= ( dom f )
proof
let x;
assume x in ( rng ( d + c ) );
then consider n such that A17: x = ( ( d + c ) . n ) by FUNCT_2:113;
consider m such that A18: (n = ( 2 * m ) or n = ( ( 2 * m ) + 1 )) by SCHEME1:1;
now
per cases  by A18;
suppose n = ( 2 * m );

then x = ( ( d . ( 2 * m ) ) + ( c . ( 2 * m ) ) ) by A17,SEQ_1:7
.= ( ( h1 . m ) + ( c . ( 2 * m ) ) ) by A8
.= ( ( h1 . m ) + ( c . m ) ) by VALUED_0:23
.= ( ( h1 + c ) . m ) by SEQ_1:7;
then x in ( rng ( h1 + c ) ) by VALUED_0:28;
hence thesis by A4;
end;
suppose n = ( ( 2 * m ) + 1 );

then x = ( ( d . ( ( 2 * m ) + 1 ) ) + ( c . ( ( 2 * m ) + 1 ) ) ) by A17,SEQ_1:7
.= ( ( h2 . m ) + ( c . ( ( 2 * m ) + 1 ) ) ) by A8
.= ( ( h2 . m ) + ( c . m ) ) by VALUED_0:23
.= ( ( h2 + c ) . m ) by SEQ_1:7;
then x in ( rng ( h2 + c ) ) by VALUED_0:28;
hence thesis by A5;
end;
end;
hence thesis;
end;
now
let n;
thus ( ( ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) * b ) . n ) = ( ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) . ( b . n ) ) by FUNCT_2:15
.= ( ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) . ( ( 2 * n ) + 1 ) ) by A15
.= ( ( ( d " ) . ( ( 2 * n ) + 1 ) ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( ( 2 * n ) + 1 ) ) ) by SEQ_1:8
.= ( ( ( d . ( ( 2 * n ) + 1 ) ) " ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( ( 2 * n ) + 1 ) ) ) by VALUED_1:10
.= ( ( ( h2 . n ) " ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( ( 2 * n ) + 1 ) ) ) by A8
.= ( ( ( h2 " ) . n ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( ( 2 * n ) + 1 ) ) ) by VALUED_1:10
.= ( ( ( h2 " ) . n ) * ( ( ( f /* ( d + c ) ) . ( ( 2 * n ) + 1 ) ) - ( ( f /* c ) . ( ( 2 * n ) + 1 ) ) ) ) by RFUNCT_2:1
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( d + c ) . ( ( 2 * n ) + 1 ) ) ) - ( ( f /* c ) . ( ( 2 * n ) + 1 ) ) ) ) by A16,FUNCT_2:108
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( d + c ) . ( ( 2 * n ) + 1 ) ) ) - ( f . ( c . ( ( 2 * n ) + 1 ) ) ) ) ) by A2,A3,FUNCT_2:108
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( d . ( ( 2 * n ) + 1 ) ) + ( c . ( ( 2 * n ) + 1 ) ) ) ) - ( f . ( c . ( ( 2 * n ) + 1 ) ) ) ) ) by SEQ_1:7
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( h2 . n ) + ( c . ( ( 2 * n ) + 1 ) ) ) ) - ( f . ( c . ( ( 2 * n ) + 1 ) ) ) ) ) by A8
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( h2 . n ) + ( c . ( ( 2 * n ) + 1 ) ) ) ) - ( f . ( c . n ) ) ) ) by VALUED_0:23
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( h2 . n ) + ( c . n ) ) ) - ( f . ( c . n ) ) ) ) by VALUED_0:23
.= ( ( ( h2 " ) . n ) * ( ( f . ( ( h2 + c ) . n ) ) - ( f . ( c . n ) ) ) ) by SEQ_1:7
.= ( ( ( h2 " ) . n ) * ( ( ( f /* ( h2 + c ) ) . n ) - ( f . ( c . n ) ) ) ) by A5,FUNCT_2:108
.= ( ( ( h2 " ) . n ) * ( ( ( f /* ( h2 + c ) ) . n ) - ( ( f /* c ) . n ) ) ) by A2,A3,FUNCT_2:108
.= ( ( ( h2 " ) . n ) * ( ( ( f /* ( h2 + c ) ) - ( f /* c ) ) . n ) ) by RFUNCT_2:1
.= ( ( ( h2 " ) (#) ( ( f /* ( h2 + c ) ) - ( f /* c ) ) ) . n ) by SEQ_1:8;
end;
then A19: ( ( h2 " ) (#) ( ( f /* ( h2 + c ) ) - ( f /* c ) ) ) is (subsequence of ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) )) by FUNCT_2:63;
(for n holds ( d . n ) > ( 0 ))
proof
let n;
consider m such that A20: (n = ( 2 * m ) or n = ( ( 2 * m ) + 1 )) by SCHEME1:1;
now
per cases  by A20;
suppose n = ( 2 * m );

then ( d . n ) = ( h1 . m ) by A8;
hence thesis by A6;
end;
suppose n = ( ( 2 * m ) + 1 );

then ( d . n ) = ( h2 . m ) by A8;
hence thesis by A7;
end;
end;
hence thesis;
end;
then A21: ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) is  convergent by A1,A3,A16;
reconsider a as  increasing (sequence of ( NAT )) by A14,FDIFF_2:2;
now
let n;
thus ( ( ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) * a ) . n ) = ( ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) . ( a . n ) ) by FUNCT_2:15
.= ( ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) . ( 2 * n ) ) by A14
.= ( ( ( d " ) . ( 2 * n ) ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( 2 * n ) ) ) by SEQ_1:8
.= ( ( ( d . ( 2 * n ) ) " ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( 2 * n ) ) ) by VALUED_1:10
.= ( ( ( h1 . n ) " ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( 2 * n ) ) ) by A8
.= ( ( ( h1 " ) . n ) * ( ( ( f /* ( d + c ) ) - ( f /* c ) ) . ( 2 * n ) ) ) by VALUED_1:10
.= ( ( ( h1 " ) . n ) * ( ( ( f /* ( d + c ) ) . ( 2 * n ) ) - ( ( f /* c ) . ( 2 * n ) ) ) ) by RFUNCT_2:1
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( d + c ) . ( 2 * n ) ) ) - ( ( f /* c ) . ( 2 * n ) ) ) ) by A16,FUNCT_2:108
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( d + c ) . ( 2 * n ) ) ) - ( f . ( c . ( 2 * n ) ) ) ) ) by A2,A3,FUNCT_2:108
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( d . ( 2 * n ) ) + ( c . ( 2 * n ) ) ) ) - ( f . ( c . ( 2 * n ) ) ) ) ) by SEQ_1:7
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( h1 . n ) + ( c . ( 2 * n ) ) ) ) - ( f . ( c . ( 2 * n ) ) ) ) ) by A8
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( h1 . n ) + ( c . ( 2 * n ) ) ) ) - ( f . ( c . n ) ) ) ) by VALUED_0:23
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( h1 . n ) + ( c . n ) ) ) - ( f . ( c . n ) ) ) ) by VALUED_0:23
.= ( ( ( h1 " ) . n ) * ( ( f . ( ( h1 + c ) . n ) ) - ( f . ( c . n ) ) ) ) by SEQ_1:7
.= ( ( ( h1 " ) . n ) * ( ( ( f /* ( h1 + c ) ) . n ) - ( f . ( c . n ) ) ) ) by A4,FUNCT_2:108
.= ( ( ( h1 " ) . n ) * ( ( ( f /* ( h1 + c ) ) . n ) - ( ( f /* c ) . n ) ) ) by A2,A3,FUNCT_2:108
.= ( ( ( h1 " ) . n ) * ( ( ( f /* ( h1 + c ) ) - ( f /* c ) ) . n ) ) by RFUNCT_2:1
.= ( ( ( h1 " ) (#) ( ( f /* ( h1 + c ) ) - ( f /* c ) ) ) . n ) by SEQ_1:8;
end;
then ( ( h1 " ) (#) ( ( f /* ( h1 + c ) ) - ( f /* c ) ) ) is (subsequence of ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) )) by FUNCT_2:63;
then ( lim ( ( h1 " ) (#) ( ( f /* ( h1 + c ) ) - ( f /* c ) ) ) ) = ( lim ( ( d " ) (#) ( ( f /* ( d + c ) ) - ( f /* c ) ) ) ) by A21,SEQ_4:17;
hence thesis by A21,A19,SEQ_4:17;
end;
