environ
vocabularies NUMBERS,FDIFF_1,SEQ_1,FUNCT_1,PARTFUN1,REAL_1,SUBSET_1,XXREAL_0,CARD_1,XXREAL_1,ARYTM_1,TARSKI,RELAT_1,ARYTM_3,FUNCOP_1,VALUED_0,SEQ_2,ORDINAL2,VALUED_1,FUNCT_2,NAT_1,LIMFUNC1,XBOOLE_0,XREAL_0,ORDINAL1,COMPLEX1,SQUARE_1,ORDINAL4,RCOMP_1,FDIFF_3;
notations TARSKI,ORDINAL1,SUBSET_1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SQUARE_1,RFUNCT_1,RCOMP_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
definitions TARSKI,XBOOLE_0,SQUARE_1,PROB_1,LIMFUNC1,VALUED_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
theorems NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,RFUNCT_1,RFUNCT_2,RCOMP_1,FDIFF_1,LIMFUNC2,FDIFF_2,TARSKI,SCHEME1,ZFMISC_1,FCONT_3,FUNCT_1,FUNCT_2,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,XXREAL_1,XXREAL_2,VALUED_0,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25;
schemes SEQ_1,SCHEME1,FUNCT_2,FDIFF_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,FUNCOP_1,SEQ_4,SETFAM_1,REALSET1,FINSET_1;
constructors FUNCOP_1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,RFUNCT_1,RFUNCT_2,LIMFUNC1,PARTFUN1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,XXREAL_2,SETFAM_1,RELSET_1,BINOP_2,RVSUM_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve h for  convergent_to_0 Real_Sequence;
reserve c for  constant Real_Sequence;
reserve f1 for (PartFunc of ( REAL ),( REAL ));
reserve f2 for (PartFunc of ( REAL ),( REAL ));
reserve x0 for Real;
reserve r1 for Real;
reserve r2 for Real;
reserve g for Real;
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve x for set;
theorem
((f1 is_right_differentiable_in x0 & f2 is_right_differentiable_in x0) implies (( f1 (#) f2 ) is_right_differentiable_in x0 & ( Rdiff (( f1 (#) f2 ),x0) ) = ( ( ( Rdiff (f1,x0) ) * ( f2 . x0 ) ) + ( ( Rdiff (f2,x0) ) * ( f1 . x0 ) ) )))
proof
assume that
A1: f1 is_right_differentiable_in x0
and
A2: f2 is_right_differentiable_in x0;
A3: ( x0 + ( 0 ) ) = x0;
consider r2 such that A4: r2 > ( 0 ) and A5: [. x0,( x0 + r2 ) .] c= ( dom f2 ) by A2,CKB7:def 1;
consider r1 such that A6: r1 > ( 0 ) and A7: [. x0,( x0 + r1 ) .] c= ( dom f1 ) by A1,CKB7:def 1;
set r = ( min (r1,r2) );
( 0 ) <= r by A6,A4,XXREAL_0:15;
then A8: x0 <= ( x0 + r ) by A3,XREAL_1:7;
r <= r2 by XXREAL_0:17;
then A9: ( x0 + r ) <= ( x0 + r2 ) by XREAL_1:7;
then ( x0 + r ) in { g: (x0 <= g & g <= ( x0 + r2 )) } by A8;
then A10: ( x0 + r ) in [. x0,( x0 + r2 ) .] by RCOMP_1:def 1;
x0 <= ( x0 + r2 ) by A8,A9,XXREAL_0:2;
then x0 in [. x0,( x0 + r2 ) .] by XXREAL_1:1;
then [. x0,( x0 + r ) .] c= [. x0,( x0 + r2 ) .] by A10,XXREAL_2:def 12;
then A11: [. x0,( x0 + r ) .] c= ( dom f2 ) by A5,XBOOLE_1:1;
r <= r1 by XXREAL_0:17;
then A12: ( x0 + r ) <= ( x0 + r1 ) by XREAL_1:7;
then ( x0 + r ) in { g: (x0 <= g & g <= ( x0 + r1 )) } by A8;
then A13: ( x0 + r ) in [. x0,( x0 + r1 ) .] by RCOMP_1:def 1;
x0 <= ( x0 + r1 ) by A12,A8,XXREAL_0:2;
then x0 in [. x0,( x0 + r1 ) .] by XXREAL_1:1;
then [. x0,( x0 + r ) .] c= [. x0,( x0 + r1 ) .] by A13,XXREAL_2:def 12;
then A14: [. x0,( x0 + r ) .] c= ( dom f1 ) by A7,XBOOLE_1:1;
A15: ( 0 ) < r by A6,A4,XXREAL_0:15;
A16: (for h holds (for c holds (((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom ( f1 (#) f2 ) )) & (for n holds ( h . n ) > ( 0 ))) implies (( ( h " ) (#) ( ( ( f1 (#) f2 ) /* ( h + c ) ) - ( ( f1 (#) f2 ) /* c ) ) ) is  convergent & ( lim ( ( h " ) (#) ( ( ( f1 (#) f2 ) /* ( h + c ) ) - ( ( f1 (#) f2 ) /* c ) ) ) ) = ( ( ( Rdiff (f1,x0) ) * ( f2 . x0 ) ) + ( ( Rdiff (f2,x0) ) * ( f1 . x0 ) ) )))))
proof
let h;
let c;
assume that
A17: ( rng c ) = { x0 }
and
A18: ( rng ( h + c ) ) c= ( dom ( f1 (#) f2 ) )
and
A19: (for n holds ( h . n ) > ( 0 ));
A20: ( rng ( h + c ) ) c= ( ( dom f1 ) /\ ( dom f2 ) ) by A18,VALUED_1:def 4;
( x0 + ( 0 ) ) <= ( x0 + r ) by A15,XREAL_1:7;
then A21: x0 in [. x0,( x0 + r ) .] by XXREAL_1:1;
then A22: x0 in ( dom f2 ) by A11;
A23: ( rng c ) c= ( dom f2 )
proof
let x;
assume x in ( rng c );
hence thesis by A17,A22,TARSKI:def 1;
end;
A24: (for m holds ( c . m ) = x0)
proof
let m;
( c . m ) in ( rng c ) by VALUED_0:28;
hence thesis by A17,TARSKI:def 1;
end;
A25: (for g being  real number holds (( 0 ) < g implies (ex n st (for m holds (n <= m implies ( abs ( ( ( f2 /* c ) . m ) - ( f2 . x0 ) ) ) < g)))))
proof
let g being  real number;
assume that
A26: ( 0 ) < g;
take n = ( 0 );
let m;
assume that
n <= m;
( abs ( ( ( f2 /* c ) . m ) - ( f2 . x0 ) ) ) = ( abs ( ( f2 . ( c . m ) ) - ( f2 . x0 ) ) ) by A23,FUNCT_2:108
.= ( abs ( ( f2 . x0 ) - ( f2 . x0 ) ) ) by A24
.= ( 0 ) by ABSVALUE:def 1;
hence thesis by A26;
end;
then A27: ( f2 /* c ) is  convergent by SEQ_2:def 6;
( ( dom f1 ) /\ ( dom f2 ) ) c= ( dom f2 ) by XBOOLE_1:17;
then A28: ( rng ( h + c ) ) c= ( dom f2 ) by A20,XBOOLE_1:1;
then A29: ( lim ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) = ( Rdiff (f2,x0) ) by A2,A17,A19,CKB23:1;
now
let n;
A30: ( h . n ) <> ( 0 ) by A19;
thus ( ( h (#) ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) . n ) = ( ( ( h (#) ( h " ) ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) . n ) by SEQ_1:14
.= ( ( ( h (#) ( h " ) ) . n ) * ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) ) by SEQ_1:8
.= ( ( ( h . n ) * ( ( h " ) . n ) ) * ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) ) by SEQ_1:8
.= ( ( ( h . n ) * ( ( h . n ) " ) ) * ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) ) by VALUED_1:10
.= ( 1 * ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) ) by A30,XCMPLX_0:def 7
.= ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n );
end;
then A31: ( h (#) ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) = ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) by FUNCT_2:63;
A32: x0 in ( dom f1 ) by A14,A21;
A33: ( rng c ) c= ( dom f1 )
proof
let x;
assume x in ( rng c );
hence thesis by A17,A32,TARSKI:def 1;
end;
A34: (for g being  real number holds (( 0 ) < g implies (ex n st (for m holds (n <= m implies ( abs ( ( ( f1 /* c ) . m ) - ( f1 . x0 ) ) ) < g)))))
proof
let g being  real number;
assume that
A35: ( 0 ) < g;
take n = ( 0 );
let m;
assume that
n <= m;
( abs ( ( ( f1 /* c ) . m ) - ( f1 . x0 ) ) ) = ( abs ( ( f1 . ( c . m ) ) - ( f1 . x0 ) ) ) by A33,FUNCT_2:108
.= ( abs ( ( f1 . x0 ) - ( f1 . x0 ) ) ) by A24
.= ( 0 ) by ABSVALUE:def 1;
hence thesis by A35;
end;
then A36: ( f1 /* c ) is  convergent by SEQ_2:def 6;
( ( dom f1 ) /\ ( dom f2 ) ) c= ( dom f1 ) by XBOOLE_1:17;
then A37: ( rng ( h + c ) ) c= ( dom f1 ) by A20,XBOOLE_1:1;
then A38: ( lim ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) = ( Rdiff (f1,x0) ) by A1,A17,A19,CKB23:1;
( Rdiff (f1,x0) ) = ( Rdiff (f1,x0) );
then A39: ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) is  convergent by A1,A17,A19,A37,CKB23:1;
then A40: ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) is  convergent by A27,SEQ_2:14;
A41: ( rng c ) c= ( ( dom f1 ) /\ ( dom f2 ) ) by A33,A23,XBOOLE_1:19;
A42:now
let n;
thus ( ( ( h " ) (#) ( ( ( f1 (#) f2 ) /* ( h + c ) ) - ( ( f1 (#) f2 ) /* c ) ) ) . n ) = ( ( ( h " ) . n ) * ( ( ( ( f1 (#) f2 ) /* ( h + c ) ) - ( ( f1 (#) f2 ) /* c ) ) . n ) ) by SEQ_1:8
.= ( ( ( h " ) . n ) * ( ( ( ( f1 (#) f2 ) /* ( h + c ) ) . n ) - ( ( ( f1 (#) f2 ) /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( ( h " ) . n ) * ( ( ( ( f1 /* ( h + c ) ) (#) ( f2 /* ( h + c ) ) ) . n ) - ( ( ( f1 (#) f2 ) /* c ) . n ) ) ) by A20,RFUNCT_2:8
.= ( ( ( h " ) . n ) * ( ( ( ( f1 /* ( h + c ) ) (#) ( f2 /* ( h + c ) ) ) . n ) - ( ( ( f1 /* c ) (#) ( f2 /* c ) ) . n ) ) ) by A41,RFUNCT_2:8
.= ( ( ( h " ) . n ) * ( ( ( ( f1 /* ( h + c ) ) . n ) * ( ( f2 /* ( h + c ) ) . n ) ) - ( ( ( f1 /* c ) (#) ( f2 /* c ) ) . n ) ) ) by SEQ_1:8
.= ( ( ( h " ) . n ) * ( ( ( ( f1 /* ( h + c ) ) . n ) * ( ( f2 /* ( h + c ) ) . n ) ) - ( ( ( f1 /* c ) . n ) * ( ( f2 /* c ) . n ) ) ) ) by SEQ_1:8
.= ( ( ( ( ( h " ) . n ) * ( ( ( f2 /* ( h + c ) ) . n ) - ( ( f2 /* c ) . n ) ) ) * ( ( f1 /* ( h + c ) ) . n ) ) + ( ( ( ( h " ) . n ) * ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f1 /* c ) . n ) ) ) * ( ( f2 /* c ) . n ) ) )
.= ( ( ( ( ( h " ) . n ) * ( ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) . n ) ) * ( ( f1 /* ( h + c ) ) . n ) ) + ( ( ( ( h " ) . n ) * ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f1 /* c ) . n ) ) ) * ( ( f2 /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) . n ) * ( ( f1 /* ( h + c ) ) . n ) ) + ( ( ( ( h " ) . n ) * ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f1 /* c ) . n ) ) ) * ( ( f2 /* c ) . n ) ) ) by SEQ_1:8
.= ( ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) . n ) * ( ( f1 /* ( h + c ) ) . n ) ) + ( ( ( ( h " ) . n ) * ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) ) * ( ( f2 /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) . n ) * ( ( f1 /* ( h + c ) ) . n ) ) + ( ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) . n ) * ( ( f2 /* c ) . n ) ) ) by SEQ_1:8
.= ( ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) . n ) + ( ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) . n ) * ( ( f2 /* c ) . n ) ) ) by SEQ_1:8
.= ( ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) . n ) + ( ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) . n ) ) by SEQ_1:8
.= ( ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) + ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) ) . n ) by SEQ_1:7;
end;
then A43: ( ( h " ) (#) ( ( ( f1 (#) f2 ) /* ( h + c ) ) - ( ( f1 (#) f2 ) /* c ) ) ) = ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) + ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) ) by FUNCT_2:63;
now
let n;
thus ( ( ( f1 /* c ) + ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) . n ) = ( ( ( f1 /* c ) . n ) + ( ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) . n ) ) by SEQ_1:7
.= ( ( ( f1 /* c ) . n ) + ( ( ( f1 /* ( h + c ) ) . n ) - ( ( f1 /* c ) . n ) ) ) by RFUNCT_2:1
.= ( ( f1 /* ( h + c ) ) . n );
end;
then A44: ( ( f1 /* c ) + ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) = ( f1 /* ( h + c ) ) by FUNCT_2:63;
A45: ( lim h ) = ( 0 ) by FDIFF_1:def 1;
A46: (h is  convergent & ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) is  convergent) by A1,A17,A19,A37,CKB7:def 1,FDIFF_1:def 1;
then ( h (#) ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) is  convergent by SEQ_2:14;
then A47: ( f1 /* ( h + c ) ) is  convergent by A36,A31,A44,SEQ_2:5;
( lim ( h (#) ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) ) = ( ( lim h ) * ( lim ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) ) by A46,SEQ_2:15
.= ( 0 ) by A45;
then A48: ( 0 ) = ( ( lim ( f1 /* ( h + c ) ) ) - ( lim ( f1 /* c ) ) ) by A36,A31,A47,SEQ_2:12
.= ( ( lim ( f1 /* ( h + c ) ) ) - ( f1 . x0 ) ) by A34,A36,SEQ_2:def 7;
( Rdiff (f2,x0) ) = ( Rdiff (f2,x0) );
then A49: ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) is  convergent by A2,A17,A19,A28,CKB23:1;
then A50: ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) is  convergent by A47,SEQ_2:14;
( lim ( ( h " ) (#) ( ( ( f1 (#) f2 ) /* ( h + c ) ) - ( ( f1 (#) f2 ) /* c ) ) ) ) = ( lim ( ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) + ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) ) ) by A42,FUNCT_2:63
.= ( ( lim ( ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) (#) ( f1 /* ( h + c ) ) ) ) + ( lim ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) ) ) by A50,A40,SEQ_2:6
.= ( ( ( lim ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) * ( lim ( f1 /* ( h + c ) ) ) ) + ( lim ( ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) (#) ( f2 /* c ) ) ) ) by A49,A47,SEQ_2:15
.= ( ( ( lim ( ( h " ) (#) ( ( f2 /* ( h + c ) ) - ( f2 /* c ) ) ) ) * ( f1 . x0 ) ) + ( ( lim ( ( h " ) (#) ( ( f1 /* ( h + c ) ) - ( f1 /* c ) ) ) ) * ( lim ( f2 /* c ) ) ) ) by A39,A48,A27,SEQ_2:15
.= ( ( ( Rdiff (f1,x0) ) * ( f2 . x0 ) ) + ( ( Rdiff (f2,x0) ) * ( f1 . x0 ) ) ) by A38,A29,A25,A27,SEQ_2:def 7;
hence thesis by A50,A40,A43,SEQ_2:5;
end;
[. x0,( x0 + r ) .] c= ( ( dom f1 ) /\ ( dom f2 ) ) by A14,A11,XBOOLE_1:19;
then [. x0,( x0 + r ) .] c= ( dom ( f1 (#) f2 ) ) by VALUED_1:def 4;
hence thesis by A15,A16,CKB23:1;
end;
