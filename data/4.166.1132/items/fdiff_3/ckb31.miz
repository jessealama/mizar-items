environ
vocabularies NUMBERS,FDIFF_1,SEQ_1,FUNCT_1,PARTFUN1,REAL_1,SUBSET_1,XXREAL_0,CARD_1,XXREAL_1,ARYTM_1,TARSKI,RELAT_1,ARYTM_3,FUNCOP_1,VALUED_0,SEQ_2,ORDINAL2,VALUED_1,FUNCT_2,NAT_1,LIMFUNC1,XBOOLE_0,XREAL_0,ORDINAL1,COMPLEX1,SQUARE_1,ORDINAL4,RCOMP_1,FDIFF_3;
notations TARSKI,ORDINAL1,SUBSET_1,NUMBERS,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,RELSET_1,PARTFUN1,FUNCT_2,FUNCOP_1,VALUED_0,VALUED_1,SEQ_1,SEQ_2,SQUARE_1,RFUNCT_1,RCOMP_1,FDIFF_1,LIMFUNC1,RECDEF_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
definitions TARSKI,XBOOLE_0,SQUARE_1,PROB_1,LIMFUNC1,VALUED_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
theorems NAT_1,SEQ_1,SEQ_2,SEQM_3,SEQ_4,ABSVALUE,RFUNCT_1,RFUNCT_2,RCOMP_1,FDIFF_1,LIMFUNC2,FDIFF_2,TARSKI,SCHEME1,ZFMISC_1,FCONT_3,FUNCT_1,FUNCT_2,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,FUNCOP_1,XREAL_1,COMPLEX1,XXREAL_0,VALUED_1,XXREAL_1,XXREAL_2,VALUED_0,ORDINAL1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30;
schemes SEQ_1,SCHEME1,FUNCT_2,FDIFF_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,MEMBERED,FDIFF_1,VALUED_0,VALUED_1,FUNCT_2,XXREAL_2,FUNCOP_1,SEQ_4,SETFAM_1,REALSET1,FINSET_1;
constructors FUNCOP_1,REAL_1,SQUARE_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,RFUNCT_1,RFUNCT_2,LIMFUNC1,PARTFUN1,FDIFF_1,SEQ_1,VALUED_1,RECDEF_1,XXREAL_2,SETFAM_1,RELSET_1,BINOP_2,RVSUM_1,CKB5,CKB6,CKB7,CKB8,CKB13,CKB14;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve h for  convergent_to_0 Real_Sequence;
reserve c for  constant Real_Sequence;
reserve f for (PartFunc of ( REAL ),( REAL ));
reserve x0 for Real;
reserve r for Real;
reserve r1 for Real;
reserve r2 for Real;
reserve g for Real;
reserve g1 for Real;
reserve k for (Element of ( NAT ));
reserve n for (Element of ( NAT ));
reserve m for (Element of ( NAT ));
reserve x for set;
theorem
(((f is_right_differentiable_in x0 & f is_left_differentiable_in x0) & ( Rdiff (f,x0) ) = ( Ldiff (f,x0) )) implies ((f is_differentiable_in x0 & ( diff (f,x0) ) = ( Rdiff (f,x0) )) & ( diff (f,x0) ) = ( Ldiff (f,x0) )))
proof
assume that
A1: f is_right_differentiable_in x0
and
A2: f is_left_differentiable_in x0
and
A3: ( Rdiff (f,x0) ) = ( Ldiff (f,x0) );
A4: (ex N being (Neighbourhood of x0) st N c= ( dom f ))
proof
consider r2 such that A5: r2 > ( 0 ) and A6: [. x0,( x0 + r2 ) .] c= ( dom f ) by A1,CKB7:def 1;
consider r1 such that A7: r1 > ( 0 ) and A8: [. ( x0 - r1 ),x0 .] c= ( dom f ) by A2,CKB8:def 1;
set r = ( min (r1,r2) );
r > ( 0 ) by A7,A5,XXREAL_0:15;
then reconsider N = ]. ( x0 - r ),( x0 + r ) .[ as (Neighbourhood of x0) by RCOMP_1:def 6;
take N;
let x;
assume x in N;
then x in { g: (( x0 - r ) < g & g < ( x0 + r )) } by RCOMP_1:def 2;
then consider g such that A9: g = x and A10: ( x0 - r ) < g and A11: g < ( x0 + r );
now
per cases ;
suppose A12: g <= x0;

r <= r1 by XXREAL_0:17;
then ( x0 - r1 ) <= ( x0 - r ) by XREAL_1:13;
then ( x0 - r1 ) <= g by A10,XXREAL_0:2;
then g in { g1: (( x0 - r1 ) <= g1 & g1 <= x0) } by A12;
then g in [. ( x0 - r1 ),x0 .] by RCOMP_1:def 1;
hence thesis by A8,A9;
end;
suppose A13: g > x0;

r <= r2 by XXREAL_0:17;
then ( x0 + r ) <= ( x0 + r2 ) by XREAL_1:7;
then g <= ( x0 + r2 ) by A11,XXREAL_0:2;
then g in { g1: (x0 <= g1 & g1 <= ( x0 + r2 )) } by A13;
then g in [. x0,( x0 + r2 ) .] by RCOMP_1:def 1;
hence thesis by A6,A9;
end;
end;
hence thesis;
end;
(for h holds (for c holds ((( rng c ) = { x0 } & ( rng ( h + c ) ) c= ( dom f )) implies (( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent & ( lim ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) ) = ( Ldiff (f,x0) )))))
proof
let h;
let c;
assume that
A14: ( rng c ) = { x0 }
and
A15: ( rng ( h + c ) ) c= ( dom f );
A16: ( rng c ) c= ( dom f )
proof
consider S being (Neighbourhood of x0) such that A17: S c= ( dom f ) by A4;
x0 in S by RCOMP_1:16;
hence thesis by A14,A17,ZFMISC_1:31;
end;
now
per cases ;
suppose (ex N being (Element of ( NAT )) st (for n holds (n >= N implies ( h . n ) > ( 0 ))));

then consider N being (Element of ( NAT )) such that A18: (for n holds (n >= N implies ( h . n ) > ( 0 )));
set h1 = ( h ^\ N );
A19: (for n holds ( h1 . n ) > ( 0 ))
proof
let n;
( 0 ) <= n by NAT_1:2;
then (( h1 . n ) = ( h . ( n + N ) ) & ( N + ( 0 ) ) <= ( n + N )) by NAT_1:def 3,XREAL_1:7;
hence thesis by A18;
end;
set c1 = ( c ^\ N );
A20: ( rng c1 ) = { x0 }
proof
thus ( rng c1 ) c= { x0 } by A14,VALUED_0:21;
let x;
A21: ( c . N ) in ( rng c ) by VALUED_0:28;
assume x in { x0 };
then A22: x = x0 by TARSKI:def 1;
( c1 . ( 0 ) ) = ( c . ( ( 0 ) + N ) ) by NAT_1:def 3
.= ( c . N );
then ( c1 . ( 0 ) ) = x by A14,A22,A21,TARSKI:def 1;
hence thesis by VALUED_0:28;
end;
A23: ( h1 + c1 ) = ( ( h + c ) ^\ N ) by SEQM_3:15;
then A24: ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) = ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) ^\ N ) - ( f /* c1 ) ) ) by A15,VALUED_0:27
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) ^\ N ) - ( ( f /* c ) ^\ N ) ) ) by A16,VALUED_0:27
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ N ) ) by SEQM_3:17
.= ( ( ( h " ) ^\ N ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ N ) ) by SEQM_3:18
.= ( ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) ^\ N ) by SEQM_3:19;
( rng ( h1 + c1 ) ) c= ( rng ( h + c ) ) by A23,VALUED_0:21;
then A25: ( rng ( h1 + c1 ) ) c= ( dom f ) by A15,XBOOLE_1:1;
then A26: ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) is  convergent by A1,A3,A20,A19,CKB23:1;
hence ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent by A24,SEQ_4:21;
( lim ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) ) = ( Rdiff (f,x0) ) by A1,A20,A25,A19,CKB23:1;
hence ( lim ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) ) = ( Ldiff (f,x0) ) by A3,A26,A24,SEQ_4:22;
end;
suppose A27: (for N being (Element of ( NAT )) holds (ex n st (n >= N & ( h . n ) <= ( 0 ))));

now
per cases ;
suppose (ex M being (Element of ( NAT )) st (for m holds (m >= M implies ( h . m ) < ( 0 ))));

then consider M being (Element of ( NAT )) such that A28: (for n holds (n >= M implies ( h . n ) < ( 0 )));
set h1 = ( h ^\ M );
A29: (for n holds ( h1 . n ) < ( 0 ))
proof
let n;
( 0 ) <= n by NAT_1:2;
then (( h1 . n ) = ( h . ( n + M ) ) & ( M + ( 0 ) ) <= ( n + M )) by NAT_1:def 3,XREAL_1:7;
hence thesis by A28;
end;
set c1 = ( c ^\ M );
A30: ( rng c1 ) = { x0 }
proof
thus ( rng c1 ) c= { x0 } by A14,VALUED_0:21;
let x;
A31: ( c . M ) in ( rng c ) by VALUED_0:28;
assume x in { x0 };
then A32: x = x0 by TARSKI:def 1;
( c1 . ( 0 ) ) = ( c . ( ( 0 ) + M ) ) by NAT_1:def 3
.= ( c . M );
then ( c1 . ( 0 ) ) = x by A14,A32,A31,TARSKI:def 1;
hence thesis by VALUED_0:28;
end;
A33: ( h1 + c1 ) = ( ( h + c ) ^\ M ) by SEQM_3:15;
then A34: ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) = ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) ^\ M ) - ( f /* c1 ) ) ) by A15,VALUED_0:27
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) ^\ M ) - ( ( f /* c ) ^\ M ) ) ) by A16,VALUED_0:27
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ M ) ) by SEQM_3:17
.= ( ( ( h " ) ^\ M ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) ^\ M ) ) by SEQM_3:18
.= ( ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) ^\ M ) by SEQM_3:19;
( rng ( h1 + c1 ) ) c= ( rng ( h + c ) ) by A33,VALUED_0:21;
then A35: ( rng ( h1 + c1 ) ) c= ( dom f ) by A15,XBOOLE_1:1;
then A36: ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) is  convergent by A2,A3,A30,A29,CKB15:1;
hence ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) is  convergent by A34,SEQ_4:21;
( lim ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) ) = ( Ldiff (f,x0) ) by A2,A30,A35,A29,CKB15:1;
hence ( lim ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) ) = ( Ldiff (f,x0) ) by A36,A34,SEQ_4:22;
end;
suppose A37: (for M being (Element of ( NAT )) holds (ex m st (m >= M & ( h . m ) >= ( 0 ))));

set s = ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) );
defpred R[  real number ]
 means
$1 > ( 0 );
defpred P[  real number ]
 means
$1 < ( 0 );
A38: h is  non-zero by FDIFF_1:def 1;
A39: (for N being (Element of ( NAT )) holds (ex n st (n >= N & P[ ( h . n ) ])))
proof
let m;
consider n such that A40: n >= m and A41: ( h . n ) <= ( 0 ) by A27;
take n;
thus n >= m by A40;
( h . n ) <> ( 0 ) by A38,SEQ_1:5;
hence thesis by A41;
end;
consider q1 being  increasing (sequence of ( NAT )) such that A42: ((for n holds P[ ( ( h * q1 ) . n ) ]) & (for n holds ((for r holds (r = ( h . n ) implies P[ r ])) implies (ex m st n = ( q1 . m ))))) from FDIFF_2:sch 1(A39);
A43: (for N being (Element of ( NAT )) holds (ex n st (n >= N & R[ ( h . n ) ])))
proof
let m;
consider n such that A44: n >= m and A45: ( h . n ) >= ( 0 ) by A37;
take n;
thus n >= m by A44;
( h . n ) <> ( 0 ) by A38,SEQ_1:5;
hence thesis by A45;
end;
consider q2 being  increasing (sequence of ( NAT )) such that A46: ((for n holds R[ ( ( h * q2 ) . n ) ]) & (for n holds ((for r holds (r = ( h . n ) implies R[ r ])) implies (ex m st n = ( q2 . m ))))) from FDIFF_2:sch 1(A43);
set h1 = ( h * q1 );
reconsider h1 as (subsequence of h);
A47: h is  convergent by FDIFF_1:def 1;
then A48: h1 is  convergent by SEQ_4:16;
A49: ( lim h ) = ( 0 ) by FDIFF_1:def 1;
then A50: ( lim h1 ) = ( 0 ) by A47,SEQ_4:17;
set h2 = ( h * q2 );
A51: h2 is  convergent by A47,SEQ_4:16;
( lim h2 ) = ( 0 ) by A47,A49,SEQ_4:17;
then reconsider h2 as  convergent_to_0 Real_Sequence by A38,A51,FDIFF_1:def 1;
set c2 = ( c * q2 );
A52: ( rng c2 ) = { x0 } by A14,VALUED_0:26;
reconsider c2 as  constant Real_Sequence;
( rng ( ( h + c ) * q2 ) ) c= ( rng ( h + c ) ) by VALUED_0:21;
then ( rng ( ( h + c ) * q2 ) ) c= ( dom f ) by A15,XBOOLE_1:1;
then ( rng ( h2 + c2 ) ) c= ( dom f ) by RFUNCT_2:2;
then A53: (( ( h2 " ) (#) ( ( f /* ( h2 + c2 ) ) - ( f /* c2 ) ) ) is  convergent & ( lim ( ( h2 " ) (#) ( ( f /* ( h2 + c2 ) ) - ( f /* c2 ) ) ) ) = ( Ldiff (f,x0) )) by A1,A3,A46,A52,CKB23:1;
A54: ( ( h2 " ) (#) ( ( f /* ( h2 + c2 ) ) - ( f /* c2 ) ) ) = ( ( h2 " ) (#) ( ( f /* ( ( h + c ) * q2 ) ) - ( f /* c2 ) ) ) by RFUNCT_2:2
.= ( ( h2 " ) (#) ( ( ( f /* ( h + c ) ) * q2 ) - ( f /* c2 ) ) ) by A15,FUNCT_2:110
.= ( ( ( h " ) * q2 ) (#) ( ( ( f /* ( h + c ) ) * q2 ) - ( f /* c2 ) ) ) by RFUNCT_2:5
.= ( ( ( h " ) * q2 ) (#) ( ( ( f /* ( h + c ) ) * q2 ) - ( ( f /* c ) * q2 ) ) ) by A16,FUNCT_2:110
.= ( ( ( h " ) * q2 ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) * q2 ) ) by RFUNCT_2:2
.= ( ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) * q2 ) by RFUNCT_2:2;
reconsider h1 as  convergent_to_0 Real_Sequence by A38,A48,A50,FDIFF_1:def 1;
set c1 = ( c * q1 );
A55: ( rng c1 ) = { x0 } by A14,VALUED_0:26;
reconsider c1 as  constant Real_Sequence;
( rng ( ( h + c ) * q1 ) ) c= ( rng ( h + c ) ) by VALUED_0:21;
then ( rng ( ( h + c ) * q1 ) ) c= ( dom f ) by A15,XBOOLE_1:1;
then ( rng ( h1 + c1 ) ) c= ( dom f ) by RFUNCT_2:2;
then A56: (( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) is  convergent & ( lim ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) ) = ( Ldiff (f,x0) )) by A2,A3,A42,A55,CKB15:1;
A57: ( ( h1 " ) (#) ( ( f /* ( h1 + c1 ) ) - ( f /* c1 ) ) ) = ( ( h1 " ) (#) ( ( f /* ( ( h + c ) * q1 ) ) - ( f /* c1 ) ) ) by RFUNCT_2:2
.= ( ( h1 " ) (#) ( ( ( f /* ( h + c ) ) * q1 ) - ( f /* c1 ) ) ) by A15,FUNCT_2:110
.= ( ( ( h " ) * q1 ) (#) ( ( ( f /* ( h + c ) ) * q1 ) - ( f /* c1 ) ) ) by RFUNCT_2:5
.= ( ( ( h " ) * q1 ) (#) ( ( ( f /* ( h + c ) ) * q1 ) - ( ( f /* c ) * q1 ) ) ) by A16,FUNCT_2:110
.= ( ( ( h " ) * q1 ) (#) ( ( ( f /* ( h + c ) ) - ( f /* c ) ) * q1 ) ) by RFUNCT_2:2
.= ( ( ( h " ) (#) ( ( f /* ( h + c ) ) - ( f /* c ) ) ) * q1 ) by RFUNCT_2:2;
A58: (for g1 being  real number holds (( 0 ) < g1 implies (ex n st (for m holds (n <= m implies ( abs ( ( s . m ) - ( Ldiff (f,x0) ) ) ) < g1)))))
proof
let g1 being  real number;
assume A59: ( 0 ) < g1;
then consider n1 being (Element of ( NAT )) such that A60: (for m holds (n1 <= m implies ( abs ( ( ( s * q1 ) . m ) - ( Ldiff (f,x0) ) ) ) < g1)) by A56,A57,SEQ_2:def 7;
consider n2 being (Element of ( NAT )) such that A61: (for m holds (n2 <= m implies ( abs ( ( ( s * q2 ) . m ) - ( Ldiff (f,x0) ) ) ) < g1)) by A53,A54,A59,SEQ_2:def 7;
take n = ( max (( q1 . n1 ),( q2 . n2 )) );
let m;
assume that
A62: n <= m;
A63: n >= ( q2 . n2 ) by XXREAL_0:25;
A64: n >= ( q1 . n1 ) by XXREAL_0:25;
now
per cases ;
suppose ( h . m ) > ( 0 );

then (for r holds (r = ( h . m ) implies r > ( 0 )));
then consider k such that A65: m = ( q2 . k ) by A46;
(( dom q2 ) = ( NAT ) & ( q2 . k ) >= ( q2 . n2 )) by A62,A63,A65,FUNCT_2:def 1,XXREAL_0:2;
then (not k < n2) by VALUED_0:def 13;
then ( abs ( ( ( s * q2 ) . k ) - ( Ldiff (f,x0) ) ) ) < g1 by A61;
hence thesis by A65,FUNCT_2:15;
end;
suppose A66: ( h . m ) <= ( 0 );

( h . m ) <> ( 0 ) by A38,SEQ_1:5;
then (for r holds (r = ( h . m ) implies r < ( 0 ))) by A66;
then consider k such that A67: m = ( q1 . k ) by A42;
(( dom q1 ) = ( NAT ) & ( q1 . k ) >= ( q1 . n1 )) by A62,A64,A67,FUNCT_2:def 1,XXREAL_0:2;
then (not k < n1) by VALUED_0:def 13;
then ( abs ( ( ( s * q1 ) . k ) - ( Ldiff (f,x0) ) ) ) < g1 by A60;
hence thesis by A67,FUNCT_2:15;
end;
end;
hence thesis;
end;
hence s is  convergent by SEQ_2:def 6;
hence ( lim s ) = ( Ldiff (f,x0) ) by A58,SEQ_2:def 7;
end;
end;
hence thesis;
end;
end;
hence thesis;
end;
hence thesis by A3,A4,FDIFF_2:12;
end;
