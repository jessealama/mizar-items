environ
vocabularies XBOOLE_0,FUNCT_1,RELAT_1,PBOOLE,SUBSET_1,CARD_3,REALSET1,TARSKI,ZFMISC_1,PARTFUN1,STRUCT_0,MSUALG_1,MSUALG_2,PRELAMB,MSUALG_3,FINSEQ_1,MARGREL1,LANG1,TDGROUP,DTCONSTR,TREES_3,TREES_4,NAT_1,TREES_2,MCART_1,UNIALG_2,QC_LANG1,GROUP_6,MSAFREE;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,NAT_1,RELAT_1,RELSET_1,STRUCT_0,FUNCT_1,PARTFUN1,MCART_1,FUNCT_2,FINSEQ_1,PBOOLE,TREES_2,FINSEQ_2,CARD_3,LANG1,TREES_4,DTCONSTR,MSUALG_1,MSUALG_2,MSUALG_3,CKB2,CKB3,CKB4,CKB7,CKB11,CKB13,CKB14,CKB16,CKB18;
definitions TARSKI,XBOOLE_0,PBOOLE,MSUALG_3,CKB2,CKB3,CKB7,CKB11,CKB13,CKB14,CKB16,CKB18;
theorems TARSKI,FUNCT_1,FUNCT_2,MCART_1,ZFMISC_1,PBOOLE,CARD_3,MSUALG_1,MSUALG_2,MSUALG_3,RELAT_1,LANG1,DTCONSTR,FINSEQ_1,TREES_4,TREES_1,DOMAIN_1,RELSET_1,XBOOLE_0,XBOOLE_1,FUNCOP_1,TREES_3,PARTFUN1,FINSEQ_3,FINSEQ_2,CKB1,CKB2,CKB3,CKB7,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18;
schemes CLASSES1,FUNCT_1,RELSET_1,DTCONSTR,XBOOLE_0;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCOP_1,FINSEQ_1,PBOOLE,TREES_2,TREES_3,STRUCT_0,DTCONSTR,MSUALG_1,MSUALG_3,FUNCT_2,PARTFUN1,RELSET_1,PRE_POLY,CKB5,CKB6,CKB8,CKB9,CKB19;
constructors XXREAL_0,NAT_1,NAT_D,CARD_3,FINSEQOP,DTCONSTR,MSUALG_3,RELSET_1,PBOOLE,CKB2,CKB3,CKB7,CKB11,CKB13,CKB14,CKB16,CKB18;
requirements NUMERALS,BOOLE,SUBSET;
begin
theorem
Th6: (for S being non void non empty ManySortedSign holds (for X being (ManySortedSet of (the carrier of S)) holds ((( NonTerminals ( DTConMSA X ) ) c= [: (the carrier' of S),{ (the carrier of S) } :] & ( Union ( coprod X ) ) c= ( Terminals ( DTConMSA X ) )) & (X is  non-empty implies (( NonTerminals ( DTConMSA X ) ) = [: (the carrier' of S),{ (the carrier of S) } :] & ( Terminals ( DTConMSA X ) ) = ( Union ( coprod X ) ))))))
proof
let S being non void non empty ManySortedSign;
let X being (ManySortedSet of (the carrier of S));
set D = ( DTConMSA X );
set A = ( [: (the carrier' of S),{ (the carrier of S) } :] \/ ( Union ( coprod (X qua (ManySortedSet of (the carrier of S))) ) ) );
A1: (the carrier of D) = ( ( Terminals D ) \/ ( NonTerminals D ) ) by LANG1:1;
thus A2: ( NonTerminals D ) c= [: (the carrier' of S),{ (the carrier of S) } :]
proof
let x being set;
assume x in ( NonTerminals D );
then x in { s where s is (Symbol of D): (ex n being FinSequence st s ==> n) } by LANG1:def 3;
then consider s being (Symbol of D) such that A3: s = x and A4: (ex n being FinSequence st s ==> n);
consider n being FinSequence such that A5: s ==> n by A4;
[ s,n ] in (the Rules of D) by A5,LANG1:def 1;
then reconsider n as (Element of ( A * )) by ZFMISC_1:87;
reconsider s as (Element of A);
[ s,n ] in ( REL X ) by A5,LANG1:def 1;
hence thesis by A3,CKB16:def 1;
end;

A6: ( Union ( coprod X ) ) misses [: (the carrier' of S),{ (the carrier of S) } :] by CKB15:1;
thus A7: ( Union ( coprod X ) ) c= ( Terminals ( DTConMSA X ) )
proof
let x being set;
assume A8: x in ( Union ( coprod X ) );
then x in A by XBOOLE_0:def 3;
then (x in ( Terminals D ) or x in ( NonTerminals D )) by A1,XBOOLE_0:def 3;
hence thesis by A6,A2,A8,XBOOLE_0:3;
end;

assume A9: X is  non-empty;
thus ( NonTerminals D ) c= [: (the carrier' of S),{ (the carrier of S) } :] by A2;
thus A10: [: (the carrier' of S),{ (the carrier of S) } :] c= ( NonTerminals D )
proof
let x being set;
assume A11: x in [: (the carrier' of S),{ (the carrier of S) } :];
then consider o being (OperSymbol of S),x2 being (Element of { (the carrier of S) }) such that A12: x = [ o,x2 ] by DOMAIN_1:1;
set O = ( the_arity_of o );
defpred P[ set,set ]
 means
$2 in ( coprod (( O . $1 ),X) );
A13: (for a being set holds (a in ( Seg ( len O ) ) implies (ex b being set st P[ a,b ])))
proof
let a being set;
assume a in ( Seg ( len O ) );
then a in ( dom O ) by FINSEQ_1:def 3;
then A14: ( O . a ) in ( rng O ) by FUNCT_1:def 3;
A15: ( rng O ) c= (the carrier of S) by FINSEQ_1:def 4;
then consider x being set such that A16: x in ( X . ( O . a ) ) by A9,A14,XBOOLE_0:def 1;
take [ x,( O . a ) ];
thus thesis by A14,A15,A16,CKB3:def 1;
end;
consider b being Function such that A17: (( dom b ) = ( Seg ( len O ) ) & (for a being set holds (a in ( Seg ( len O ) ) implies P[ a,( b . a ) ]))) from CLASSES1:sch 1(A13);
reconsider b as FinSequence by A17,FINSEQ_1:def 2;
( rng b ) c= A
proof
let a being set;
A18: ( rng O ) c= (the carrier of S) by FINSEQ_1:def 4;
assume a in ( rng b );
then consider c being set such that A19: c in ( dom b ) and A20: ( b . c ) = a by FUNCT_1:def 3;
( dom O ) = ( Seg ( len O ) ) by FINSEQ_1:def 3;
then A21: ( O . c ) in ( rng O ) by A17,A19,FUNCT_1:def 3;
( dom ( coprod X ) ) = (the carrier of S) by PARTFUN1:def 2;
then ( ( coprod X ) . ( O . c ) ) in ( rng ( coprod X ) ) by A21,A18,FUNCT_1:def 3;
then A22: ( coprod (( O . c ),X) ) in ( rng ( coprod X ) ) by A21,A18,CKB7:def 1;
a in ( coprod (( O . c ),X) ) by A17,A19,A20;
then a in ( union ( rng ( coprod X ) ) ) by A22,TARSKI:def 4;
then a in ( Union ( coprod X ) ) by CARD_3:def 4;
hence thesis by XBOOLE_0:def 3;
end;
then reconsider b as (FinSequence of A) by FINSEQ_1:def 4;
reconsider b as (Element of ( A * )) by FINSEQ_1:def 11;
A23:now
let c being set;
assume A24: c in ( dom b );
( dom O ) = ( Seg ( len O ) ) by FINSEQ_1:def 3;
then A25: ( O . c ) in ( rng O ) by A17,A24,FUNCT_1:def 3;
A26: ( rng O ) c= (the carrier of S) by FINSEQ_1:def 4;
( dom ( coprod X ) ) = (the carrier of S) by PARTFUN1:def 2;
then ( ( coprod X ) . ( O . c ) ) in ( rng ( coprod X ) ) by A25,A26,FUNCT_1:def 3;
then A27: ( coprod (( O . c ),X) ) in ( rng ( coprod X ) ) by A25,A26,CKB7:def 1;
P[ c,( b . c ) ] by A17,A24;
then ( b . c ) in ( union ( rng ( coprod X ) ) ) by A27,TARSKI:def 4;
then ( b . c ) in ( Union ( coprod X ) ) by CARD_3:def 4;
hence (( b . c ) in [: (the carrier' of S),{ (the carrier of S) } :] implies (for o1 being (OperSymbol of S) holds ([ o1,(the carrier of S) ] = ( b . c ) implies ( the_result_sort_of o1 ) = ( O . c )))) by A6,XBOOLE_0:3;
assume ( b . c ) in ( Union ( coprod X ) );
thus ( b . c ) in ( coprod (( O . c ),X) ) by A17,A24;
end;
A28: (the carrier of S) = x2 by TARSKI:def 1;
then reconsider xa = [ o,(the carrier of S) ] as (Element of (the carrier of D)) by A11,A12,XBOOLE_0:def 3;
( len b ) = ( len O ) by A17,FINSEQ_1:def 3;
then [ xa,b ] in ( REL X ) by A23,CKB17:1;
then xa ==> b by LANG1:def 1;
then xa in { t where t is (Symbol of D): (ex n being FinSequence st t ==> n) };
hence thesis by A12,A28,LANG1:def 3;
end;

A29: ( Terminals D ) misses ( NonTerminals D ) by DTCONSTR:8;
thus ( Terminals D ) c= ( Union ( coprod X ) )
proof
let x being set;
assume x in ( Terminals D );
then (x in A & (not x in [: (the carrier' of S),{ (the carrier of S) } :])) by A1,A29,A10,XBOOLE_0:3,XBOOLE_0:def 3;
hence thesis by XBOOLE_0:def 3;
end;

thus thesis by A7;
end;
