environ
vocabularies NUMBERS,REAL_1,SUBSET_1,SEQ_1,PARTFUN1,XREAL_0,ORDINAL1,CARD_1,ARYTM_3,XXREAL_0,ARYTM_1,RELAT_1,TARSKI,VALUED_1,XBOOLE_0,LIMFUNC1,FUNCT_1,COMPLEX1,SEQ_2,ORDINAL2,XXREAL_1,FUNCT_2,LIMFUNC2,NAT_1,VALUED_0,XXREAL_2,ORDINAL4,LIMFUNC3;
notations TARSKI,XBOOLE_0,SUBSET_1,ORDINAL1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,COMPLEX1,REAL_1,NAT_1,RELAT_1,FUNCT_2,VALUED_0,VALUED_1,SEQ_1,PARTFUN1,SEQ_2,RCOMP_1,RFUNCT_1,LIMFUNC1,LIMFUNC2,RECDEF_1,CKB13,CKB14,CKB15,CKB35;
definitions TARSKI,XBOOLE_0,VALUED_1,PROB_1,LIMFUNC1,CKB13,CKB14,CKB15,CKB35;
theorems TARSKI,NAT_1,FUNCT_1,FUNCT_2,ABSVALUE,SEQ_1,SEQ_2,SEQM_3,SEQ_4,RFUNCT_1,RCOMP_1,RFUNCT_2,LIMFUNC1,LIMFUNC2,RELSET_1,XREAL_0,XBOOLE_0,XBOOLE_1,XCMPLX_0,XCMPLX_1,XREAL_1,COMPLEX1,XXREAL_0,ORDINAL1,VALUED_1,XXREAL_1,VALUED_0,RELAT_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33,CKB34,CKB35,CKB36,CKB37,CKB38,CKB39,CKB40,CKB41,CKB42,CKB43,CKB44,CKB45,CKB46,CKB47,CKB48;
schemes NAT_1,RECDEF_1,FUNCT_2;
registrations ORDINAL1,RELSET_1,NUMBERS,XXREAL_0,XREAL_0,NAT_1,MEMBERED,VALUED_0,VALUED_1,FUNCT_2,SEQ_4;
constructors REAL_1,NAT_1,COMPLEX1,SEQ_2,SEQM_3,PROB_1,RCOMP_1,PARTFUN1,RFUNCT_1,RFUNCT_2,LIMFUNC1,LIMFUNC2,VALUED_1,SEQ_1,RECDEF_1,RELSET_1,CKB13,CKB14,CKB15,CKB35;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve r for Real;
reserve r1 for Real;
reserve r2 for Real;
reserve g for Real;
reserve g1 for Real;
reserve g2 for Real;
reserve x0 for Real;
reserve n for (Element of ( NAT ));
reserve k for (Element of ( NAT ));
reserve f for (PartFunc of ( REAL ),( REAL ));
reserve f1 for (PartFunc of ( REAL ),( REAL ));
reserve f2 for (PartFunc of ( REAL ),( REAL ));
theorem
Th45: (((((f1 is_convergent_in x0 & f2 is_convergent_in x0) & ( lim (f1,x0) ) = ( lim (f2,x0) )) & (for r1 holds (for r2 holds ((r1 < x0 & x0 < r2) implies (ex g1 st (ex g2 st (((((r1 < g1 & g1 < x0) & g1 in ( dom f )) & g2 < r2) & x0 < g2) & g2 in ( dom f )))))))) & (ex r st ((( 0 ) < r & (for g holds (g in ( ( dom f ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) implies (( f1 . g ) <= ( f . g ) & ( f . g ) <= ( f2 . g ))))) & ((( ( dom f1 ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) & ( ( dom f ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) )) or (( ( dom f2 ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) & ( ( dom f ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r ),x0 .[ \/ ]. x0,( x0 + r ) .[ ) )))))) implies (f is_convergent_in x0 & ( lim (f,x0) ) = ( lim (f1,x0) )))
proof
assume that
A1: f1 is_convergent_in x0
and
A2: f2 is_convergent_in x0
and
A3: ( lim (f1,x0) ) = ( lim (f2,x0) )
and
A4: (for r1 holds (for r2 holds ((r1 < x0 & x0 < r2) implies (ex g1 st (ex g2 st (((((r1 < g1 & g1 < x0) & g1 in ( dom f )) & g2 < r2) & x0 < g2) & g2 in ( dom f )))))));
given r1 such that
A5: ( 0 ) < r1
and
A6: (for g holds (g in ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) implies (( f1 . g ) <= ( f . g ) & ( f . g ) <= ( f2 . g ))))
and
A7: ((( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) & ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) )) or (( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) & ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) )));

now
per cases  by A7;
suppose A8: (( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) & ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ));

A9:now
let s being Real_Sequence;
assume that
A10: s is  convergent
and
A11: ( lim s ) = x0
and
A12: ( rng s ) c= ( ( dom f ) \ { x0 } );
consider k such that A13: (for n holds (k <= n implies (( x0 - r1 ) < ( s . n ) & ( s . n ) < ( x0 + r1 )))) by A5,A10,A11,CKB11:1;
A14: ( rng ( s ^\ k ) ) c= ( rng s ) by VALUED_0:21;
then A15: ( rng ( s ^\ k ) ) c= ( ( dom f ) \ { x0 } ) by A12,XBOOLE_1:1;
now
let x being set;
assume A16: x in ( rng ( s ^\ k ) );
then consider n such that A17: x = ( ( s ^\ k ) . n ) by FUNCT_2:113;
A18: k <= ( n + k ) by NAT_1:12;
then ( s . ( n + k ) ) < ( x0 + r1 ) by A13;
then A19: ( ( s ^\ k ) . n ) < ( x0 + r1 ) by NAT_1:def 3;
( x0 - r1 ) < ( s . ( n + k ) ) by A13,A18;
then ( x0 - r1 ) < ( ( s ^\ k ) . n ) by NAT_1:def 3;
then ( ( s ^\ k ) . n ) in { g1: (( x0 - r1 ) < g1 & g1 < ( x0 + r1 )) } by A19;
then A20: ( ( s ^\ k ) . n ) in ]. ( x0 - r1 ),( x0 + r1 ) .[ by RCOMP_1:def 2;
(not ( ( s ^\ k ) . n ) in { x0 }) by A15,A16,A17,XBOOLE_0:def 5;
then x in ( ]. ( x0 - r1 ),( x0 + r1 ) .[ \ { x0 } ) by A17,A20,XBOOLE_0:def 5;
hence x in ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) by A5,CKB8:1;
end;
then A21: ( rng ( s ^\ k ) ) c= ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) by TARSKI:def 3;
A22: ( rng s ) c= ( dom f ) by A12,XBOOLE_1:1;
then ( rng ( s ^\ k ) ) c= ( dom f ) by A14,XBOOLE_1:1;
then A23: ( rng ( s ^\ k ) ) c= ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) by A21,XBOOLE_1:19;
then A24: ( rng ( s ^\ k ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) by A8,XBOOLE_1:1;
then A25: ( rng ( s ^\ k ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) by A8,XBOOLE_1:1;
A26: ( lim ( s ^\ k ) ) = x0 by A10,A11,SEQ_4:20;
A27: ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( dom f2 ) by XBOOLE_1:17;
then A28: ( rng ( s ^\ k ) ) c= ( dom f2 ) by A25,XBOOLE_1:1;
A29: ( rng ( s ^\ k ) ) c= ( ( dom f2 ) \ { x0 } )
proof
let x being set;
assume A30: x in ( rng ( s ^\ k ) );
then (not x in { x0 }) by A15,XBOOLE_0:def 5;
hence thesis by A28,A30,XBOOLE_0:def 5;
end;
then A31: ( lim ( f2 /* ( s ^\ k ) ) ) = ( lim (f2,x0) ) by A2,A10,A26,CKB35:def 1;
A32: ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( dom f1 ) by XBOOLE_1:17;
then A33: ( rng ( s ^\ k ) ) c= ( dom f1 ) by A24,XBOOLE_1:1;
A34: ( rng ( s ^\ k ) ) c= ( ( dom f1 ) \ { x0 } )
proof
let x being set;
assume A35: x in ( rng ( s ^\ k ) );
then (not x in { x0 }) by A15,XBOOLE_0:def 5;
hence thesis by A33,A35,XBOOLE_0:def 5;
end;
then A36: ( lim ( f1 /* ( s ^\ k ) ) ) = ( lim (f1,x0) ) by A1,A10,A26,CKB35:def 1;
A37:now
let n;
A38: ( ( s ^\ k ) . n ) in ( rng ( s ^\ k ) ) by VALUED_0:28;
then ( f . ( ( s ^\ k ) . n ) ) <= ( f2 . ( ( s ^\ k ) . n ) ) by A6,A23;
then A39: ( ( f /* ( s ^\ k ) ) . n ) <= ( f2 . ( ( s ^\ k ) . n ) ) by A14,A22,FUNCT_2:108,XBOOLE_1:1;
( f1 . ( ( s ^\ k ) . n ) ) <= ( f . ( ( s ^\ k ) . n ) ) by A6,A23,A38;
then ( f1 . ( ( s ^\ k ) . n ) ) <= ( ( f /* ( s ^\ k ) ) . n ) by A14,A22,FUNCT_2:108,XBOOLE_1:1;
hence (( ( f1 /* ( s ^\ k ) ) . n ) <= ( ( f /* ( s ^\ k ) ) . n ) & ( ( f /* ( s ^\ k ) ) . n ) <= ( ( f2 /* ( s ^\ k ) ) . n )) by A32,A27,A24,A25,A39,FUNCT_2:108,XBOOLE_1:1;
end;
A40: ( f2 /* ( s ^\ k ) ) is  convergent by A2,A3,A10,A26,A29,CKB35:def 1;
A41: ( f1 /* ( s ^\ k ) ) is  convergent by A1,A3,A10,A26,A34,CKB35:def 1;
then ( f /* ( s ^\ k ) ) is  convergent by A3,A36,A40,A31,A37,SEQ_2:19;
then A42: ( ( f /* s ) ^\ k ) is  convergent by A12,VALUED_0:27,XBOOLE_1:1;
hence ( f /* s ) is  convergent by SEQ_4:21;
( lim ( f /* ( s ^\ k ) ) ) = ( lim (f1,x0) ) by A3,A41,A36,A40,A31,A37,SEQ_2:20;
then ( lim ( ( f /* s ) ^\ k ) ) = ( lim (f1,x0) ) by A12,VALUED_0:27,XBOOLE_1:1;
hence ( lim ( f /* s ) ) = ( lim (f1,x0) ) by A42,SEQ_4:22;
end;
hence f is_convergent_in x0 by A4,CKB13:def 1;
hence thesis by A9,CKB35:def 1;
end;
suppose A43: (( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) & ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ));

A44:now
let s being Real_Sequence;
assume that
A45: s is  convergent
and
A46: ( lim s ) = x0
and
A47: ( rng s ) c= ( ( dom f ) \ { x0 } );
consider k such that A48: (for n holds (k <= n implies (( x0 - r1 ) < ( s . n ) & ( s . n ) < ( x0 + r1 )))) by A5,A45,A46,CKB11:1;
A49: ( rng ( s ^\ k ) ) c= ( rng s ) by VALUED_0:21;
then A50: ( rng ( s ^\ k ) ) c= ( ( dom f ) \ { x0 } ) by A47,XBOOLE_1:1;
now
let x being set;
assume A51: x in ( rng ( s ^\ k ) );
then consider n such that A52: x = ( ( s ^\ k ) . n ) by FUNCT_2:113;
A53: k <= ( n + k ) by NAT_1:12;
then ( s . ( n + k ) ) < ( x0 + r1 ) by A48;
then A54: ( ( s ^\ k ) . n ) < ( x0 + r1 ) by NAT_1:def 3;
( x0 - r1 ) < ( s . ( n + k ) ) by A48,A53;
then ( x0 - r1 ) < ( ( s ^\ k ) . n ) by NAT_1:def 3;
then ( ( s ^\ k ) . n ) in { g1: (( x0 - r1 ) < g1 & g1 < ( x0 + r1 )) } by A54;
then A55: ( ( s ^\ k ) . n ) in ]. ( x0 - r1 ),( x0 + r1 ) .[ by RCOMP_1:def 2;
(not ( ( s ^\ k ) . n ) in { x0 }) by A50,A51,A52,XBOOLE_0:def 5;
then x in ( ]. ( x0 - r1 ),( x0 + r1 ) .[ \ { x0 } ) by A52,A55,XBOOLE_0:def 5;
hence x in ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) by A5,CKB8:1;
end;
then A56: ( rng ( s ^\ k ) ) c= ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) by TARSKI:def 3;
A57: ( rng s ) c= ( dom f ) by A47,XBOOLE_1:1;
then ( rng ( s ^\ k ) ) c= ( dom f ) by A49,XBOOLE_1:1;
then A58: ( rng ( s ^\ k ) ) c= ( ( dom f ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) by A56,XBOOLE_1:19;
then A59: ( rng ( s ^\ k ) ) c= ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) by A43,XBOOLE_1:1;
then A60: ( rng ( s ^\ k ) ) c= ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) by A43,XBOOLE_1:1;
A61: ( lim ( s ^\ k ) ) = x0 by A45,A46,SEQ_4:20;
A62: ( ( dom f2 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( dom f2 ) by XBOOLE_1:17;
then A63: ( rng ( s ^\ k ) ) c= ( dom f2 ) by A59,XBOOLE_1:1;
A64: ( rng ( s ^\ k ) ) c= ( ( dom f2 ) \ { x0 } )
proof
let x being set;
assume A65: x in ( rng ( s ^\ k ) );
then (not x in { x0 }) by A50,XBOOLE_0:def 5;
hence thesis by A63,A65,XBOOLE_0:def 5;
end;
then A66: ( lim ( f2 /* ( s ^\ k ) ) ) = ( lim (f2,x0) ) by A2,A45,A61,CKB35:def 1;
A67: ( ( dom f1 ) /\ ( ]. ( x0 - r1 ),x0 .[ \/ ]. x0,( x0 + r1 ) .[ ) ) c= ( dom f1 ) by XBOOLE_1:17;
then A68: ( rng ( s ^\ k ) ) c= ( dom f1 ) by A60,XBOOLE_1:1;
A69: ( rng ( s ^\ k ) ) c= ( ( dom f1 ) \ { x0 } )
proof
let x being set;
assume A70: x in ( rng ( s ^\ k ) );
then (not x in { x0 }) by A50,XBOOLE_0:def 5;
hence thesis by A68,A70,XBOOLE_0:def 5;
end;
then A71: ( lim ( f1 /* ( s ^\ k ) ) ) = ( lim (f1,x0) ) by A1,A45,A61,CKB35:def 1;
A72:now
let n;
A73: ( ( s ^\ k ) . n ) in ( rng ( s ^\ k ) ) by VALUED_0:28;
then ( f . ( ( s ^\ k ) . n ) ) <= ( f2 . ( ( s ^\ k ) . n ) ) by A6,A58;
then A74: ( ( f /* ( s ^\ k ) ) . n ) <= ( f2 . ( ( s ^\ k ) . n ) ) by A49,A57,FUNCT_2:108,XBOOLE_1:1;
( f1 . ( ( s ^\ k ) . n ) ) <= ( f . ( ( s ^\ k ) . n ) ) by A6,A58,A73;
then ( f1 . ( ( s ^\ k ) . n ) ) <= ( ( f /* ( s ^\ k ) ) . n ) by A49,A57,FUNCT_2:108,XBOOLE_1:1;
hence (( ( f1 /* ( s ^\ k ) ) . n ) <= ( ( f /* ( s ^\ k ) ) . n ) & ( ( f /* ( s ^\ k ) ) . n ) <= ( ( f2 /* ( s ^\ k ) ) . n )) by A67,A62,A59,A60,A74,FUNCT_2:108,XBOOLE_1:1;
end;
A75: ( f2 /* ( s ^\ k ) ) is  convergent by A2,A3,A45,A61,A64,CKB35:def 1;
A76: ( f1 /* ( s ^\ k ) ) is  convergent by A1,A3,A45,A61,A69,CKB35:def 1;
then ( f /* ( s ^\ k ) ) is  convergent by A3,A71,A75,A66,A72,SEQ_2:19;
then A77: ( ( f /* s ) ^\ k ) is  convergent by A47,VALUED_0:27,XBOOLE_1:1;
hence ( f /* s ) is  convergent by SEQ_4:21;
( lim ( f /* ( s ^\ k ) ) ) = ( lim (f1,x0) ) by A3,A76,A71,A75,A66,A72,SEQ_2:20;
then ( lim ( ( f /* s ) ^\ k ) ) = ( lim (f1,x0) ) by A47,VALUED_0:27,XBOOLE_1:1;
hence ( lim ( f /* s ) ) = ( lim (f1,x0) ) by A77,SEQ_4:22;
end;
hence f is_convergent_in x0 by A4,CKB13:def 1;
hence thesis by A44,CKB35:def 1;
end;
end;
hence thesis;
end;
