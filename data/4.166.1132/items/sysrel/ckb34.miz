environ
vocabularies RELAT_1,XBOOLE_0,ZFMISC_1,TARSKI,SUBSET_1,SYSREL;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,CKB27;
definitions TARSKI,XBOOLE_0,RELAT_1,CKB27;
theorems ZFMISC_1,RELAT_1,TARSKI,XBOOLE_0,XBOOLE_1,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8,CKB9,CKB10,CKB11,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB21,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27,CKB28,CKB29,CKB30,CKB31,CKB32,CKB33;
registrations XBOOLE_0,RELAT_1;
constructors TARSKI,SUBSET_1,RELAT_1,CKB27;
requirements BOOLE,SUBSET;
begin
reserve x for set;
reserve y for set;
reserve z for set;
reserve R for Relation;
theorem
(((( R * R ) = R & ( R * ( R \ ( id ( dom R ) ) ) ) = ( {} )) implies (( dom ( CL R ) ) = ( rng R ) & ( rng ( CL R ) ) = ( rng R ))) & ((( R * R ) = R & ( ( R \ ( id ( dom R ) ) ) * R ) = ( {} )) implies (( dom ( CL R ) ) = ( dom R ) & ( rng ( CL R ) ) = ( dom R ))))
proof
thus ((( R * R ) = R & ( R * ( R \ ( id ( dom R ) ) ) ) = ( {} )) implies (( dom ( CL R ) ) = ( rng R ) & ( rng ( CL R ) ) = ( rng R )))
proof
assume that
A1: ( R * R ) = R
and
A2: ( R * ( R \ ( id ( dom R ) ) ) ) = ( {} );
(for y holds (y in ( rng R ) implies y in ( dom ( CL R ) )))
proof
let y;
assume y in ( rng R );
then consider x such that A3: [ x,y ] in R by RELAT_1:def 5;
consider z such that A4: [ x,z ] in R and A5: [ z,y ] in R by A1,A3,RELAT_1:def 8;
A6: z = y
proof
assume z <> y;
then (not [ z,y ] in ( id ( dom R ) )) by RELAT_1:def 10;
then [ z,y ] in ( R \ ( id ( dom R ) ) ) by A5,XBOOLE_0:def 5;
hence thesis by A2,A4,RELAT_1:def 8;
end;
z in ( dom R ) by A5,RELAT_1:6;
then [ z,y ] in ( id ( dom R ) ) by A6,RELAT_1:def 10;
then [ z,y ] in ( R /\ ( id ( dom R ) ) ) by A5,XBOOLE_0:def 4;
hence thesis by A6,RELAT_1:def 4;
end;
then A7: ( rng R ) c= ( dom ( CL R ) ) by TARSKI:def 3;
( CL R ) c= R by XBOOLE_1:17;
then ( rng ( CL R ) ) c= ( rng R ) by RELAT_1:11;
then ( dom ( CL R ) ) c= ( rng R ) by CKB29:1;
then ( dom ( CL R ) ) = ( rng R ) by A7,XBOOLE_0:def 10;
hence thesis by CKB29:1;
end;

thus ((( R * R ) = R & ( ( R \ ( id ( dom R ) ) ) * R ) = ( {} )) implies (( dom ( CL R ) ) = ( dom R ) & ( rng ( CL R ) ) = ( dom R )))
proof
assume that
A8: ( R * R ) = R
and
A9: ( ( R \ ( id ( dom R ) ) ) * R ) = ( {} );
(for x holds (x in ( dom R ) implies x in ( dom ( CL R ) )))
proof
let x;
assume A10: x in ( dom R );
then consider y such that A11: [ x,y ] in R by RELAT_1:def 4;
consider z such that A12: [ x,z ] in R and A13: [ z,y ] in R by A8,A11,RELAT_1:def 8;
A14: z = x
proof
assume z <> x;
then (not [ x,z ] in ( id ( dom R ) )) by RELAT_1:def 10;
then [ x,z ] in ( R \ ( id ( dom R ) ) ) by A12,XBOOLE_0:def 5;
hence thesis by A9,A13,RELAT_1:def 8;
end;
then [ x,z ] in ( id ( dom R ) ) by A10,RELAT_1:def 10;
then [ x,z ] in ( R /\ ( id ( dom R ) ) ) by A12,XBOOLE_0:def 4;
then z in ( rng ( CL R ) ) by RELAT_1:def 5;
hence thesis by A14,CKB29:1;
end;
then A15: ( dom R ) c= ( dom ( CL R ) ) by TARSKI:def 3;
( CL R ) c= R by XBOOLE_1:17;
then ( dom ( CL R ) ) c= ( dom R ) by RELAT_1:11;
then ( dom ( CL R ) ) = ( dom R ) by A15,XBOOLE_0:def 10;
hence thesis by CKB29:1;
end;

end;
