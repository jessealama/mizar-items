environ
vocabularies NUMBERS,SUBSET_1,FUNCT_1,NAT_1,TARSKI,FINSET_1,RELAT_1,AFINSQ_1,ARYTM_1,ARYTM_3,FINSEQ_1,XXREAL_0,CARD_1,XBOOLE_0,ORDINAL4,CARD_3,BINOP_1,FINSOP_1,FUNCOP_1,BINOP_2,FUNCT_2,INT_1,VALUED_1,NEWTON,REALSET1,ZFMISC_1,FUNCT_4,EQREL_1,SETFAM_1,STIRL2_1,CARD_FIN;
notations TARSKI,XBOOLE_0,SUBSET_1,CARD_1,NUMBERS,RELAT_1,FUNCT_1,NAT_1,FINSET_1,ORDINAL1,XXREAL_0,NAT_D,AFINSQ_1,VALUED_1,RELSET_1,PARTFUN1,DOMAIN_1,FUNCT_2,FUNCT_4,FUNCOP_1,INT_1,ENUMSET1,BINOP_1,BINOP_2,RECDEF_1,AFINSQ_2,ZFMISC_1,NEWTON,STIRL2_1,YELLOW20;
definitions TARSKI,XBOOLE_0,FUNCT_1,FUNCOP_1,FINSET_1,RELAT_1;
theorems AFINSQ_1,TARSKI,FUNCT_1,XBOOLE_0,ZFMISC_1,RELAT_1,XBOOLE_1,NAT_1,FUNCT_2,FINSET_1,XCMPLX_1,CARD_2,INT_1,WELLORD2,SUBSET_1,ENUMSET1,CARD_1,BINOP_2,NEWTON,XREAL_1,FUNCOP_1,STIRL2_1,ALTCAT_1,FUNCT_5,IRRAT_1,FUNCT_4,YELLOW20,XXREAL_0,NAT_D,XREAL_0,PRE_POLY,AFINSQ_2,ORDINAL1,VALUED_1,VALUED_0,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6;
schemes FUNCT_2,NAT_1,XBOOLE_0,STIRL2_1;
registrations XBOOLE_0,SUBSET_1,RELAT_1,FUNCT_1,ORDINAL1,FUNCT_2,FUNCOP_1,FUNCT_4,FINSET_1,FRAENKEL,NUMBERS,XXREAL_0,XREAL_0,NAT_1,INT_1,BINOP_2,CARD_1,WSIERP_1,AFINSQ_1,RELSET_1,VALUED_1,VALUED_0,AFINSQ_2;
constructors PARTFUN3,BINOM,WELLORD2,DOMAIN_1,SETWISEO,REAL_1,NAT_D,YELLOW20,RECDEF_1,BINOP_2,RELSET_1,ORDINAL4,SEQ_1,AFINSQ_1,SEQ_4,AFINSQ_2,STIRL2_1;
requirements REAL,NUMERALS,SUBSET,BOOLE,ARITHM;
begin
reserve x for set;
reserve X for  finite set;
reserve Y for  finite set;
reserve n for Nat;
reserve k for Nat;
reserve f for Function;
theorem
Th7: (( card X ) <= ( card Y ) implies ( card { F where F is (Function of X,Y): F is  one-to-one } ) = ( ( ( card Y ) ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ))
proof
defpred P[ Nat ]
 means
(for X holds (for Y holds ((( card Y ) = $1 & ( card X ) <= ( card Y )) implies ( card { F where F is (Function of X,Y): F is  one-to-one } ) = ( ( ( card Y ) ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ))));
A1: (for n holds (P[ n ] implies P[ ( n + 1 ) ]))
proof
let n;
assume that
A2: P[ n ];
let X;
let Y;
assume that
A3: ( card Y ) = ( n + 1 )
and
A4: ( card X ) <= ( card Y );
per cases ;
suppose A5: X is  empty;

set F1 = { F where F is (Function of X,Y): F is  one-to-one };
A6: F1 c= { ( {} ) }
proof
let x;
assume x in F1;
then (ex F being (Function of X,Y) st (x = F & F is  one-to-one));
then x = ( {} ) by A5;
hence thesis by TARSKI:def 1;
end;
A7: ( rng ( {} ) ) c= Y by XBOOLE_1:2;
( ( card Y ) - ( card X ) ) = ( card Y ) by A5,CARD_1:27;
then A8: ( ( ( card Y ) -' ( card X ) ) ! ) = ( ( card Y ) ! ) by XREAL_0:def 2;
( ( card Y ) ! ) > ( 0 ) by NEWTON:17;
then A9: ( ( ( card Y ) ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) = 1 by A8,XCMPLX_1:60;
( dom ( {} ) ) = X by A5;
then ( {} ) is (Function of X,Y) by A7,FUNCT_2:2;
then ( {} ) in F1;
then F1 = { ( {} ) } by A6,ZFMISC_1:33;
hence thesis by A9,CARD_1:30;
end;
suppose X is non  empty;

then consider x such that A10: x in X by XBOOLE_0:def 1;
defpred F[ Function ]
 means
$1 is  one-to-one;
( card Y ),Y are_equipotent  by CARD_1:def 2;
then consider f being Function such that A11: f is  one-to-one and A12: ( dom f ) = ( card Y ) and A13: ( rng f ) = Y by WELLORD2:def 4;
reconsider f as (Function of ( card Y ),Y) by A12,A13,FUNCT_2:1;
A14: Y is non  empty by A3;
A15: f is  onto  one-to-one by A11,A13,FUNCT_2:def 3;
consider F being (XFinSequence of ( NAT )) such that A16: ( dom F ) = ( card Y ) and A17: ( card { g where g is (Function of X,Y): F[ g ] } ) = ( Sum F ) and A18: (for k holds (k in ( dom F ) implies ( F . k ) = ( card { g where g is (Function of X,Y): (F[ g ] & ( g . x ) = ( f . k )) } ))) from STIRL2_1:sch 6(A15,A14,A10);
A19: (for k being Nat holds (k in ( dom F ) implies ( F . k ) = ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) )))
proof
( card X ) > ( 0 ) by A10;
then reconsider cX1 = ( ( card X ) - 1 ) as (Element of ( NAT )) by NAT_1:20;
set Xx = ( X \ { x } );
x in { x } by TARSKI:def 1;
then A20: (not x in Xx) by XBOOLE_0:def 5;
A21: X = ( Xx \/ { x } ) by A10,ZFMISC_1:116;
A22: ( ( cX1 + 1 ) - 1 ) <= ( ( n + 1 ) - 1 ) by A3,A4,XREAL_1:9;
then A23: ( n - cX1 ) >= ( cX1 - cX1 ) by XREAL_1:9;
let k being Nat;
assume that
A24: k in ( dom F );
A25: ( f . k ) in Y by A12,A13,A16,A24,FUNCT_1:def 3;
set Yy = ( Y \ { ( f . k ) } );
A26: Y = ( Yy \/ { ( f . k ) } ) by A25,ZFMISC_1:116;
( f . k ) in { ( f . k ) } by TARSKI:def 1;
then A27: (not ( f . k ) in Yy) by XBOOLE_0:def 5;
( cX1 + 1 ) <= ( n + 1 ) by A3,A4;
then A28: ( card Xx ) = cX1 by A10,STIRL2_1:55;
A29: ( card Yy ) = n by A3,A25,STIRL2_1:55;
then A30: (Yy is  empty implies Xx is  empty) by A22,A28,CARD_1:27;
A31: ( card { g where g is (Function of Xx,Yy): g is  one-to-one } ) = ( ( n ! ) / ( ( ( card Yy ) -' ( card Xx ) ) ! ) ) by A2,A22,A28,A29;
( ( card Y ) - ( card X ) ) >= ( ( card X ) - ( card X ) ) by A4,XREAL_1:9;
then ( ( card Y ) -' ( card X ) ) = ( ( ( ( card Yy ) + 1 ) - 1 ) - ( ( ( card Xx ) + 1 ) - 1 ) ) by A3,A28,A29,XREAL_0:def 2
.= ( ( card Yy ) -' ( card Xx ) ) by A28,A29,A23,XREAL_0:def 2;
then ( card { g where g is (Function of X,Y): (g is  one-to-one & ( g . x ) = ( f . k )) } ) = ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) by A31,A26,A21,A27,A20,A30,CKB5:1;
hence thesis by A18,A24;
end;
then (for k being Nat holds (k in ( dom F ) implies ( F . k ) >= ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) )));
then A32: ( Sum F ) >= ( ( len F ) * ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) ) by AFINSQ_2:60;
(for k being Nat holds (k in ( dom F ) implies ( F . k ) <= ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ))) by A19;
then ( Sum F ) <= ( ( len F ) * ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) ) by AFINSQ_2:59;
then ( Sum F ) = ( ( n + 1 ) * ( ( n ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) ) by A3,A16,A32,XXREAL_0:1
.= ( ( ( n + 1 ) * ( n ! ) ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) by XCMPLX_1:74
.= ( ( ( card Y ) ! ) / ( ( ( card Y ) -' ( card X ) ) ! ) ) by A3,NEWTON:15;
hence thesis by A17;
end;
end;
A33: P[ ( 0 ) ]
proof
let X;
let Y;
assume that
A34: ( card Y ) = ( 0 )
and
A35: ( card X ) <= ( card Y );
( ( card Y ) - ( card X ) ) = ( 0 ) by A34,A35;
then A36: ( ( ( card Y ) -' ( card X ) ) ! ) = 1 by NEWTON:12,XREAL_0:def 2;
set F1 = { F where F is (Function of X,Y): F is  one-to-one };
A37: F1 c= { ( {} ) }
proof
let x;
assume x in F1;
then A38: (ex F being (Function of X,Y) st (x = F & F is  one-to-one));
Y = ( {} ) by A34;
then x = ( {} ) by A38;
hence thesis by TARSKI:def 1;
end;
(( dom ( {} ) ) = X & ( rng ( {} ) ) = Y) by A34,A35;
then ( {} ) is (Function of X,Y) by FUNCT_2:1;
then ( {} ) in F1;
then F1 = { ( {} ) } by A37,ZFMISC_1:33;
hence thesis by A34,A36,CARD_1:30,NEWTON:12;
end;
(for n holds P[ n ]) from NAT_1:sch 2(A33,A1);
hence thesis;
end;
