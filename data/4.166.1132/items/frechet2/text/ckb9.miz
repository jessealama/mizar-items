environ
vocabularies XBOOLE_0,PRE_TOPC,RCOMP_1,TARSKI,NAT_1,NUMBERS,FUNCOP_1,FRECHET,SUBSET_1,CARD_1,STRUCT_0,ORDINAL2,RELAT_1,SEQ_1,VALUED_0,XXREAL_0,FUNCT_1,RLVECT_3,CARD_3,SETFAM_1,ORDINAL1,ZFMISC_1,FINSET_1,ARYTM_3,SEQ_2,METRIC_1,PCOMPS_1,METRIC_6,XREAL_0,REAL_1,WAYBEL_7,ARYTM_1,FUNCT_2,FRECHET2;
notations TARSKI,XBOOLE_0,SUBSET_1,NUMBERS,XCMPLX_0,XXREAL_0,XREAL_0,ORDINAL1,SETFAM_1,FINSET_1,CARD_3,TOPS_2,RELAT_1,FUNCT_1,RELSET_1,PARTFUN1,SEQ_1,FUNCT_2,REAL_1,NAT_1,XXREAL_2,LIMFUNC1,VALUED_0,METRIC_1,PCOMPS_1,TBSP_1,DOMAIN_1,STRUCT_0,PRE_TOPC,FUNCOP_1,METRIC_6,YELLOW_8,FRECHET,SEQ_4;
definitions TARSKI,SEQM_3,PRE_TOPC,TOPS_2,METRIC_6,FUNCT_1,FUNCT_2,FRECHET,XBOOLE_0;
theorems FRECHET,URYSOHN1,YELLOW_8,PRE_TOPC,TARSKI,FUNCOP_1,NORMSP_1,ZFMISC_1,PCOMPS_1,FUNCT_1,AXIOMS,CARD_1,RELAT_1,SETFAM_1,ORDINAL1,FUNCT_2,TOPS_2,FINSET_1,SUBSET_1,SEQM_3,NAT_1,INT_1,SEQ_1,TOPMETR,METRIC_6,RELSET_1,XBOOLE_0,XBOOLE_1,XREAL_0,XREAL_1,XXREAL_0,VALUED_0,XXREAL_2,CARD_3,CKB1,CKB2,CKB3,CKB4,CKB5,CKB6,CKB7,CKB8;
schemes CLASSES1,DOMAIN_1,NAT_1,RECDEF_1,SEQ_1,FUNCT_1,VALUED_1;
registrations SUBSET_1,FUNCT_1,RELSET_1,FUNCT_2,NUMBERS,XREAL_0,MEMBERED,REALSET1,STRUCT_0,METRIC_1,PCOMPS_1,FRECHET,VALUED_0,CARD_1,XXREAL_2,ORDINAL1,FINSET_1;
constructors SETFAM_1,PARTFUN1,NAT_1,NAT_D,SEQ_1,LIMFUNC1,REALSET1,CARD_3,TOPS_2,COMPTS_1,PCOMPS_1,BHSP_3,TBSP_1,URYSOHN1,METRIC_6,YELLOW_8,FRECHET,RECDEF_1,SEQ_4,XXREAL_2,SEQM_3,RELSET_1,FUNCOP_1;
requirements NUMERALS,BOOLE,SUBSET,ARITHM;
begin
theorem
Lm5: (for T being non empty TopSpace holds (T is  first-countable implies (for x being (Point of T) holds (ex B being (Basis of x) st (ex S being Function st ((( dom S ) = ( NAT ) & ( rng S ) = B) & (for n,m being (Element of ( NAT )) holds (m >= n implies ( S . m ) c= ( S . n )))))))))
proof
let T being non empty TopSpace;
assume A1: T is  first-countable;
let x being (Point of T);
consider B1 being (Basis of x) such that A2: B1 is  countable by A1,FRECHET:def 2;
consider f being (Function of ( NAT ),B1) such that A3: ( rng f ) = B1 by A2,CARD_3:96;
defpred P[ set,set ]
 means
$2 = ( meet ( f .: ( succ $1 ) ) );
A4: (for n being set holds (n in ( NAT ) implies (ex A being set st P[ n,A ])));
consider S being Function such that A5: ( dom S ) = ( NAT ) and A6: (for n being set holds (n in ( NAT ) implies P[ n,( S . n ) ])) from CLASSES1:sch 1(A4);
A7: ( rng S ) c= ( bool (the carrier of T) )
proof
let A being set;
assume A in ( rng S );
then consider n being set such that A8: (n in ( dom S ) & A = ( S . n )) by FUNCT_1:def 3;
reconsider fsuccn = ( f .: ( succ n ) ) as (Subset-Family of T) by XBOOLE_1:1;
( meet fsuccn ) = ( meet ( f .: ( succ n ) ) );
then ( meet ( f .: ( succ n ) ) ) in ( bool (the carrier of T) );
hence thesis by A5,A6,A8;
end;
then reconsider B = ( rng S ) as (Subset-Family of T);
reconsider B as (Subset-Family of T);
A9: (ex A being set st A in B)
proof
take A = ( meet ( f .: ( succ ( 0 ) ) ) );
A = ( S . ( 0 ) ) by A6;
hence thesis by A5,FUNCT_1:def 3;
end;
then A10: ( Intersect B ) = ( meet B ) by SETFAM_1:def 9;
(for A being set holds (A in B implies x in A))
proof
let A being set;
assume A in B;
then consider n being set such that A11: n in ( dom S ) and A12: A = ( S . n ) by FUNCT_1:def 3;
(( dom f ) = ( NAT ) & n in ( succ n )) by FUNCT_2:def 1,ORDINAL1:6;
then A13: ( f . n ) in ( f .: ( succ n ) ) by A5,A11,FUNCT_1:def 6;
A14: (for A1 being set holds (A1 in ( f .: ( succ n ) ) implies x in A1))
proof
let A1 being set;
assume A1 in ( f .: ( succ n ) );
then consider m being set such that A15: m in ( dom f ) and m in ( succ n ) and A16: A1 = ( f . m ) by FUNCT_1:def 6;
( f . m ) in ( rng f ) by A15,FUNCT_1:def 3;
then reconsider A2 = A1 as (Subset of T) by A3,A16;
reconsider A2 as (Subset of T);
A2 in B1 by A3,A15,A16,FUNCT_1:def 3;
hence thesis by YELLOW_8:12;
end;
A = ( meet ( f .: ( succ n ) ) ) by A5,A6,A11,A12;
hence thesis by A14,A13,SETFAM_1:def 1;
end;
then A17: x in ( meet B ) by A9,SETFAM_1:def 1;
A18: B c= (the topology of T)
proof
let A being set;
assume A in B;
then consider n being set such that A19: n in ( dom S ) and A20: A = ( S . n ) by FUNCT_1:def 3;
reconsider n9 = n as (Element of ( NAT )) by A5,A19;
reconsider C = ( f .: ( succ n ) ) as (Subset-Family of T) by XBOOLE_1:1;
A21: C is  open
proof
let P being (Subset of T);
assume P in C;
hence thesis by YELLOW_8:12;
end;
( succ n9 ) is  finite;
then ( f .: ( succ n ) ) is  finite;
then A22: ( meet C ) is  open by A21,TOPS_2:20;
A = ( meet ( f .: ( succ n ) ) ) by A5,A6,A19,A20;
hence thesis by A22,PRE_TOPC:def 2;
end;
(for O being (Subset of T) holds ((O is  open & x in O) implies (ex A being (Subset of T) st (A in B & A c= O))))
proof
let O being (Subset of T);
assume (O is  open & x in O);
then consider A1 being (Subset of T) such that A23: A1 in B1 and A24: A1 c= O by YELLOW_8:def 1;
consider n being set such that A25: n in ( dom f ) and A26: A1 = ( f . n ) by A3,A23,FUNCT_1:def 3;
( S . n ) in ( rng S ) by A5,A25,FUNCT_1:def 3;
then reconsider A = ( S . n ) as (Subset of T) by A7;
reconsider A as (Subset of T);
take A;
thus A in B by A5,A25,FUNCT_1:def 3;
n in ( succ n ) by ORDINAL1:6;
then ( f . n ) in ( f .: ( succ n ) ) by A25,FUNCT_1:def 6;
then ( meet ( f .: ( succ n ) ) ) c= A1 by A26,SETFAM_1:3;
then ( S . n ) c= A1 by A6,A25;
hence thesis by A24,XBOOLE_1:1;
end;
then reconsider B as (Basis of x) by A18,A10,A17,TOPS_2:64,YELLOW_8:def 1;
take B;
take S;
thus ( dom S ) = ( NAT ) by A5;
thus ( rng S ) = B;
(for n,m being (Element of ( NAT )) holds (m >= n implies ( S . m ) c= ( S . n )))
proof
let n being (Element of ( NAT )),m being (Element of ( NAT ));
assume m >= n;
then ( n + 1 ) <= ( m + 1 ) by XREAL_1:6;
then ( n + 1 ) c= ( m + 1 ) by NAT_1:39;
then ( succ n ) c= ( m + 1 ) by NAT_1:38;
then ( succ n ) c= ( succ m ) by NAT_1:38;
then A27: ( f .: ( succ n ) ) c= ( f .: ( succ m ) ) by RELAT_1:123;
(n in ( succ n ) & ( dom f ) = ( NAT )) by FUNCT_2:def 1,ORDINAL1:6;
then ( f . n ) in ( f .: ( succ n ) ) by FUNCT_1:def 6;
then ( meet ( f .: ( succ m ) ) ) c= ( meet ( f .: ( succ n ) ) ) by A27,SETFAM_1:6;
then ( S . m ) c= ( meet ( f .: ( succ n ) ) ) by A6;
hence thesis by A6;
end;
hence thesis;
end;
