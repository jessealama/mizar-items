environ
vocabularies NUMBERS,SUBSET_1,QC_LANG1,CQC_LANG,FINSEQ_1,PARTFUN1,XBOOLE_0,FUNCT_1,RELAT_1,XXREAL_0,NAT_1,TARSKI,FINSET_1,ZFMISC_1,ZF_LANG,CLASSES2,CARD_1,BVFUNC_2,ORDINAL4,REALSET1,XBOOLEAN,MARGREL1,MCART_1,ARYTM_3,SUBSTUT1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,CARD_1,NUMBERS,FINSEQ_1,NAT_1,QC_LANG1,QC_LANG3,PARTFUN1,SEQ_4,CQC_LANG,FINSET_1,RELSET_1,FUNCT_2,DOMAIN_1,MCART_1,XXREAL_0,CKB1,CKB3,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB22;
definitions TARSKI,FUNCT_1,QC_LANG1,QC_LANG3,CKB1,CKB5,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB22;
theorems TARSKI,FINSEQ_1,FUNCT_1,MCART_1,CQC_SIM1,XBOOLE_0,CQC_LANG,QC_LANG1,ZFMISC_1,RELAT_1,XBOOLE_1,CARD_2,CARD_3,FUNCT_2,PARTFUN1,RELSET_1,NAT_1,QC_LANG2,FINSEQ_3,CARD_1,XXREAL_0,ORDINAL1,CKB1,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22;
schemes FUNCT_1,FUNCT_2,QC_LANG1,QC_LANG3,NAT_1,XBOOLE_0,FRAENKEL,FINSEQ_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FINSET_1,MEMBERED,FINSEQ_1,RFINSEQ,QC_LANG1,CQC_LANG,XXREAL_0,CARD_1,CKB2,CKB4,CKB11,CKB21;
constructors PARTFUN1,DOMAIN_1,XXREAL_0,NAT_1,SEQ_4,QC_LANG3,CQC_SIM1,RELSET_1,CKB1,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB22;
requirements REAL,NUMERALS,SUBSET,BOOLE;
begin
reserve a for set;
reserve b for set;
reserve i for (Element of ( NAT ));
reserve finSub for  finite CQC_Substitution;
definition
let finSub;
func Sub_Var finSub ->  finite (Subset of ( NAT )) equals 
{ i: ( x. i ) in ( rng finSub ) };
coherence
proof
defpred P[ set,set ]
 means
(ex i st (i = $1 & $2 = ( x. i )));
set X = { i: ( x. i ) in ( rng finSub ) };
A1: X c= ( NAT )
proof
let a;
assume a in X;
then (ex i st (a = i & ( x. i ) in ( rng finSub )));
hence thesis;
end;
A2: (for a holds (a in ( NAT ) implies (ex b st P[ a,b ])))
proof
let a;
assume a in ( NAT );
then reconsider i = a as (Element of ( NAT ));
take ( x. i );
take i;
thus thesis;
end;
consider f being Function such that A3: (( dom f ) = ( NAT ) & (for a holds (a in ( NAT ) implies P[ a,( f . a ) ]))) from CLASSES1:sch 1(A2);
A4: ( rng ( f | X ) ) c= ( rng finSub )
proof
let b;
assume b in ( rng ( f | X ) );
then consider a such that A5: a in ( dom ( f | X ) ) and A6: b = ( ( f | X ) . a ) by FUNCT_1:def 3;
a in X by A5,RELAT_1:57;
then A7: (ex i st (a = i & ( x. i ) in ( rng finSub )));
(b = ( f . a ) & a in ( dom f )) by A5,A6,FUNCT_1:47,RELAT_1:57;
then (ex i st (i = a & b = ( x. i ))) by A3;
hence thesis by A7;
end;
f is  one-to-one
proof
let a1 being set;
let a2 being set;
assume that
A8: (a1 in ( dom f ) & a2 in ( dom f ))
and
A9: ( f . a1 ) = ( f . a2 );
((ex i1 being (Element of ( NAT )) st (i1 = a1 & ( f . a1 ) = ( x. i1 ))) & (ex i2 being (Element of ( NAT )) st (i2 = a2 & ( f . a2 ) = ( x. i2 )))) by A3,A8;
hence thesis by A9,ZFMISC_1:27;
end;
then ( f | X ) is  one-to-one by FUNCT_1:52;
then A10: ( dom ( f | X ) ) is  finite by A4,CARD_1:59;
reconsider X as (Subset of ( NAT )) by A1;
(a in ( dom ( f | X ) ) iff (a in X & a in ( dom f ))) by RELAT_1:57;
then ( dom ( f | X ) ) = ( X /\ ( NAT ) ) by A3,XBOOLE_0:def 4;
hence thesis by A10,XBOOLE_1:28;
end;
end;
