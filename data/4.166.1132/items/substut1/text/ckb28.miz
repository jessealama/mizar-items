environ
vocabularies NUMBERS,SUBSET_1,QC_LANG1,CQC_LANG,FINSEQ_1,PARTFUN1,XBOOLE_0,FUNCT_1,RELAT_1,XXREAL_0,NAT_1,TARSKI,FINSET_1,ZFMISC_1,ZF_LANG,CLASSES2,CARD_1,BVFUNC_2,ORDINAL4,REALSET1,XBOOLEAN,MARGREL1,MCART_1,ARYTM_3,SUBSTUT1;
notations TARSKI,XBOOLE_0,ZFMISC_1,SUBSET_1,RELAT_1,FUNCT_1,CARD_1,NUMBERS,FINSEQ_1,NAT_1,QC_LANG1,QC_LANG3,PARTFUN1,SEQ_4,CQC_LANG,FINSET_1,RELSET_1,FUNCT_2,DOMAIN_1,MCART_1,XXREAL_0,CKB1,CKB3,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27;
definitions TARSKI,FUNCT_1,QC_LANG1,QC_LANG3,CKB1,CKB5,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27;
theorems TARSKI,FINSEQ_1,FUNCT_1,MCART_1,CQC_SIM1,XBOOLE_0,CQC_LANG,QC_LANG1,ZFMISC_1,RELAT_1,XBOOLE_1,CARD_2,CARD_3,FUNCT_2,PARTFUN1,RELSET_1,NAT_1,QC_LANG2,FINSEQ_3,CARD_1,XXREAL_0,ORDINAL1,CKB1,CKB5,CKB6,CKB7,CKB8,CKB9,CKB12,CKB13,CKB14,CKB15,CKB16,CKB17,CKB18,CKB19,CKB20,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27;
schemes FUNCT_1,FUNCT_2,QC_LANG1,QC_LANG3,NAT_1,XBOOLE_0,FRAENKEL,FINSEQ_1,CLASSES1;
registrations XBOOLE_0,SUBSET_1,FUNCT_1,ORDINAL1,RELSET_1,PARTFUN1,FINSET_1,MEMBERED,FINSEQ_1,RFINSEQ,QC_LANG1,CQC_LANG,XXREAL_0,CARD_1,CKB2,CKB4,CKB11,CKB21;
constructors PARTFUN1,DOMAIN_1,XXREAL_0,NAT_1,SEQ_4,QC_LANG3,CQC_SIM1,RELSET_1,CKB1,CKB5,CKB7,CKB8,CKB9,CKB10,CKB12,CKB13,CKB14,CKB22,CKB23,CKB24,CKB25,CKB26,CKB27;
requirements REAL,NUMERALS,SUBSET,BOOLE;
begin
reserve a for set;
reserve b for set;
reserve b1 for set;
reserve b2 for set;
reserve c for set;
reserve p for QC-formula;
reserve Sub for CQC_Substitution;
definition
func QSub -> Function means 
(a in it iff (ex p st (ex Sub st (ex b st (a = [ [ p,Sub ],b ] & p,Sub PQSub b)))));
existence
proof
defpred P[ set,set ]
 means
(ex p st (ex Sub st ($1 = [ p,Sub ] & p,Sub PQSub $2)));
A1: (for a holds (for b1 holds (for b2 holds ((P[ a,b1 ] & P[ a,b2 ]) implies b1 = b2))))
proof
let a;
let b1;
let b2;
assume that
A2: (ex p st (ex Sub st (a = [ p,Sub ] & p,Sub PQSub b1)))
and
A3: (ex p st (ex Sub st (a = [ p,Sub ] & p,Sub PQSub b2)));
consider p1 being QC-formula,Sub1 being CQC_Substitution such that A4: a = [ p1,Sub1 ] and A5: p1,Sub1 PQSub b1 by A2;
consider p2 being QC-formula,Sub2 being CQC_Substitution such that A6: a = [ p2,Sub2 ] and A7: p2,Sub2 PQSub b2 by A3;
A8: p1 = p2 by A4,A6,ZFMISC_1:27;
A9: Sub1 = Sub2 by A4,A6,ZFMISC_1:27;
per cases ;
suppose A10: p1 is  universal;

then b1 = ( ExpandSub (( bound_in p1 ),( the_scope_of p1 ),( RestrictSub (( bound_in p1 ),p1,Sub1) )) ) by A5,CKB27:def 1;
hence thesis by A7,A8,A9,A10,CKB27:def 1;
end;
suppose A11: (not p1 is  universal);

then b1 = ( {} ) by A5,CKB27:def 1;
hence thesis by A7,A8,A11,CKB27:def 1;
end;
end;
consider f being Function such that A12: (for a holds (for b holds ([ a,b ] in f iff (a in [: ( QC-WFF ),( vSUB ) :] & P[ a,b ])))) from FUNCT_1:sch 1(A1);
take f;
(c in f iff (ex p st (ex Sub st (ex b st (c = [ [ p,Sub ],b ] & p,Sub PQSub b)))))
proof
thus (c in f implies (ex p st (ex Sub st (ex b st (c = [ [ p,Sub ],b ] & p,Sub PQSub b)))))
proof
assume A13: c in f;
then consider a,b such that A14: c = [ a,b ] by RELAT_1:def 1;
(ex p st (ex Sub st (a = [ p,Sub ] & p,Sub PQSub b))) by A12,A13,A14;
hence thesis by A14;
end;

thus thesis by A12;
end;
hence thesis;
end;
uniqueness
proof
let F1 being Function;
let F2 being Function;
assume that
A15: (for a holds (a in F1 iff (ex p st (ex Sub st (ex b st (a = [ [ p,Sub ],b ] & p,Sub PQSub b))))))
and
A16: (for a holds (a in F2 iff (ex p st (ex Sub st (ex b st (a = [ [ p,Sub ],b ] & p,Sub PQSub b))))));
now
let a;
(a in F1 iff (ex p st (ex Sub st (ex b st (a = [ [ p,Sub ],b ] & p,Sub PQSub b))))) by A15;
hence (a in F1 iff a in F2) by A16;
end;
hence thesis by TARSKI:1;
end;
end;
