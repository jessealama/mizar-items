:: Preliminaries to Polynomials
::  by Andrzej Trybulec
::
:: Received August 7, 2009
:: Copyright (c) 2009-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, RELAT_1, ORDINAL4, FINSEQ_1, XBOOLE_0,
      BINOP_1, FUNCT_1, FINSOP_1, SETWISEO, XXREAL_0, TARSKI, NAT_1, ARYTM_3,
      WELLORD1, FINSUB_1, SETFAM_1, ORDERS_1, FINSET_1, ZFMISC_1, CARD_1,
      FUNCT_3, PARTFUN1, ARROW, ORDINAL2, ORDINAL1, RELAT_2, ARYTM_1, FINSEQ_3,
      FUNCOP_1, PBOOLE, FUNCT_4, FINSEQ_2, CARD_3, MEMBER_1, VALUED_0, XREAL_0,
      FUNCT_2, BINOP_2, CLASSES1, PRE_POLY;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, CARD_1, NUMBERS, ORDERS_1,
      RELAT_1, XXREAL_0, XCMPLX_0, RELAT_2, FUNCT_1, PBOOLE, RELSET_1,
      FINSET_1, FINSUB_1, SETWISEO, ORDINAL1, PARTFUN1, FUNCT_2, BINOP_2,
      FINSOP_1, FINSEQ_1, FINSEQ_4, FUNCT_3, BINOP_1, NAT_1, XREAL_0, FINSEQ_2,
      WELLORD1, CARD_3, WSIERP_1, FUNCOP_1, FUNCT_7, NAT_D, CLASSES1, VALUED_0,
      VALUED_1, ORDINAL2, SETFAM_1, DOMAIN_1, ARROW, FINSEQOP;
 constructors WELLORD2, BINOP_1, SETWISEO, CARD_3, FINSEQOP, FINSOP_1,
      FINSEQ_4, RFINSEQ, RFUNCT_3, NAT_D, WSIERP_1, FUNCT_7, RECDEF_1, BINOP_2,
      CLASSES1, BINARITH, ARROW, TOLER_1, ORDINAL2, RELSET_1, ORDERS_1,
      RELAT_2, WELLORD1, DOMAIN_1, SETFAM_1, ORDINAL3, PBOOLE;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, ORDINAL1, FUNCOP_1,
      ORDINAL3, FINSET_1, XXREAL_0, XREAL_0, NAT_1, BINOP_2, CARD_1, FINSEQ_1,
      FINSEQ_2, CARD_3, PARTFUN1, VALUED_0, VALUED_1, RELSET_1, FUNCT_2,
      SETFAM_1, FINSUB_1;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, XBOOLE_0, FUNCT_1, CARD_3, RELAT_2, PBOOLE, RELSET_1,
      WELLORD2, RELAT_1, BINOP_1, FINSEQ_2, VALUED_0, FUNCOP_1, SETFAM_1,
      SEQM_3, WELLORD1, SUBSET_1;
 theorems FUNCT_1, FINSET_1, FINSEQ_3, FINSEQ_4, ZFMISC_1, FINSEQ_1, FUNCT_2,
      FUNCOP_1, TARSKI, FUNCT_7, BINOP_1, RELAT_1, FINSEQ_2, CARD_3, RFINSEQ,
      RELSET_1, CARD_1, ORDINAL1, RVSUM_1, FINSEQ_5, NAT_1, PBOOLE, NAT_2,
      SUBSET_1, ORDERS_1, WELLSET1, WELLORD1, RELAT_2, ORDINAL3, FINSEQ_6,
      SETWISEO, SETWOP_2, CARD_2, FUNCT_5, FINSUB_1, PARTFUN2, XBOOLE_0,
      XBOOLE_1, PARTFUN1, BINOP_2, XREAL_1, XXREAL_0, VALUED_0, VALUED_1,
      NAT_D, SETFAM_1, ARROW, WELLORD2, FINSOP_1;
 schemes SETWISEO, FUNCT_2, FINSEQ_2, FINSEQ_1, PBOOLE, RELSET_1, FINSEQ_4,
      ORDINAL1, FUNCT_7, SUBSET_1, XBOOLE_0, BINOP_1, NAT_1, PRE_CIRC,
      CLASSES1;

begin
definition
let C1 being set;
let C2 , C3 being (Element of ( C1 * ));
redefine func C2 ^ C3 -> (Element of ( C1 * ));

coherence
proof
L1: ( C2 ^ C3 ) is (FinSequence of C1);
thus L2: thesis by L1 , FINSEQ_1:def 11;
end;
end;
registration
let C4 being set;
cluster  empty for (Element of ( C4 * ));
existence
proof
L4: ( <*> C4 ) is (Element of ( C4 * )) by FINSEQ_1:def 11;
thus L5: thesis by L4;
end;
end;
definition
let C5 being set;
redefine func <*> C5 ->  empty (Element of ( C5 * ));

coherence by FINSEQ_1:def 11;
end;
definition
let C6 being non  empty set;
let C7 being (Element of C6);
redefine func <*C7 *> -> (Element of ( C6 * ));

coherence
proof
L8: <* C7 *> is (FinSequence of C6);
thus L9: thesis by L8 , FINSEQ_1:def 11;
end;
let C8 being (Element of C6);
redefine func <*C7 , C8 *> -> (Element of ( C6 * ));

coherence
proof
L10: <* C7 , C8 *> = ( <* C7 *> ^ <* C8 *> ) by FINSEQ_1:def 9;
thus L11: thesis by L10 , FINSEQ_1:def 11;
end;
end;
begin
registration
let C9 being set;
cluster  ->  FinSequence-like for (Element of ( C9 * ));
coherence;
end;
definition
let C10 being set;
let C11 being (FinSequence of ( C10 * ));
func FlattenSeq C11 -> (Element of ( C10 * )) means 
:L14: (ex B1 being (BinOp of ( C10 * )) st ((for B2 , B3 being (Element of ( C10 * )) holds ( B1 . (B2 , B3) ) = ( B2 ^ B3 )) & it = ( B1 "**" C11 )));
existence
proof
deffunc H1((Element of ( C10 * )) , (Element of ( C10 * ))) = ( $1 ^ $2 );
consider C12 being (BinOp of ( C10 * )) such that L15: (for B4 , B5 being (Element of ( C10 * )) holds ( C12 . (B4 , B5) ) = H1(B4 , B5)) from BINOP_1:sch 4;
take ( C12 "**" C11 );
take C12;
thus L16: thesis by L15;
end;
uniqueness
proof
let C13 , C14 being (Element of ( C10 * ));
given C15 being (BinOp of ( C10 * )) such that
L17: (for B6 , B7 being (Element of ( C10 * )) holds ( C15 . (B6 , B7) ) = ( B6 ^ B7 ))
and
L18: C13 = ( C15 "**" C11 );

given C16 being (BinOp of ( C10 * )) such that
L19: (for B8 , B9 being (Element of ( C10 * )) holds ( C16 . (B8 , B9) ) = ( B8 ^ B9 ))
and
L20: C14 = ( C16 "**" C11 );

L21:
now
let C17 , C18 being (Element of ( C10 * ));
thus L22: ( C15 . (C17 , C18) ) = ( C17 ^ C18 ) by L17
.= ( C16 . (C17 , C18) ) by L19;
end;
thus L23: thesis by L21 , L18 , L20 , BINOP_1:2;
end;
end;
theorem
L25: (for B10 being set holds (for B11 being (Element of ( B10 * )) holds ( FlattenSeq <* B11 *> ) = B11))
proof
let C19 being set;
let C20 being (Element of ( C19 * ));
L26: (ex B12 being (BinOp of ( C19 * )) st ((for B13 , B14 being (Element of ( C19 * )) holds ( B12 . (B13 , B14) ) = ( B13 ^ B14 )) & ( FlattenSeq <* C20 *> ) = ( B12 "**" <* C20 *> ))) by L14;
thus L27: thesis by L26 , FINSOP_1:11;
end;
theorem
L28: (for B15 being set holds ( FlattenSeq ( <*> ( B15 * ) ) ) = ( <*> B15 ))
proof
let C21 being set;
consider C22 being (BinOp of ( C21 * )) such that L29: (for B16 , B17 being (Element of ( C21 * )) holds ( C22 . (B16 , B17) ) = ( B16 ^ B17 )) and L30: ( FlattenSeq ( <*> ( C21 * ) ) ) = ( C22 "**" ( <*> ( C21 * ) ) ) by L14;
L31: ( {} ) is (Element of ( C21 * )) by FINSEQ_1:49;
reconsider D1 = ( {} ) as (Element of ( C21 * )) by FINSEQ_1:49;
L32:
now
let C23 being (Element of ( C21 * ));
thus L33: ( C22 . (( {} ) , C23) ) = ( ( {} ) ^ C23 ) by L29 , L31
.= C23 by FINSEQ_1:34;
thus L34: ( C22 . (C23 , ( {} )) ) = ( C23 ^ ( {} ) ) by L29 , L31
.= C23 by FINSEQ_1:34;
end;
L35: D1 is_a_unity_wrt C22 by L32 , BINOP_1:3;
L36: C22 is  having_a_unity by L35 , SETWISEO:def 2;
L37: ( C22 "**" ( <*> ( C21 * ) ) ) = ( the_unity_wrt C22 ) by L36 , FINSOP_1:10;
thus L38: thesis by L37 , L30 , L35 , BINOP_1:def 8;
end;
theorem
L39: (for B18 being set holds (for B19 , B20 being (FinSequence of ( B18 * )) holds ( FlattenSeq ( B19 ^ B20 ) ) = ( ( FlattenSeq B19 ) ^ ( FlattenSeq B20 ) )))
proof
let C24 being set;
let C25 , C26 being (FinSequence of ( C24 * ));
consider C27 being (BinOp of ( C24 * )) such that L40: (for B21 , B22 being (Element of ( C24 * )) holds ( C27 . (B21 , B22) ) = ( B21 ^ B22 )) and L41: ( FlattenSeq ( C25 ^ C26 ) ) = ( C27 "**" ( C25 ^ C26 ) ) by L14;
L42:
now
let C28 , C29 , C30 being (Element of ( C24 * ));
thus L43: ( C27 . (C28 , ( C27 . (C29 , C30) )) ) = ( C28 ^ ( C27 . (C29 , C30) ) ) by L40
.= ( C28 ^ ( C29 ^ C30 ) ) by L40
.= ( ( C28 ^ C29 ) ^ C30 ) by FINSEQ_1:32
.= ( ( C27 . (C28 , C29) ) ^ C30 ) by L40
.= ( C27 . (( C27 . (C28 , C29) ) , C30) ) by L40;
end;
L44: C27 is  associative by L42 , BINOP_1:def 3;
L45: ( {} ) is (Element of ( C24 * )) by FINSEQ_1:49;
reconsider D2 = ( {} ) as (Element of ( C24 * )) by FINSEQ_1:49;
L46:
now
let C31 being (Element of ( C24 * ));
thus L47: ( C27 . (( {} ) , C31) ) = ( ( {} ) ^ C31 ) by L40 , L45
.= C31 by FINSEQ_1:34;
thus L48: ( C27 . (C31 , ( {} )) ) = ( C31 ^ ( {} ) ) by L40 , L45
.= C31 by FINSEQ_1:34;
end;
L49: D2 is_a_unity_wrt C27 by L46 , BINOP_1:3;
L50: (C27 is  having_a_unity or (( len C25 ) >= 1 & ( len C26 ) >= 1)) by L49 , SETWISEO:def 2;
thus L51: ( FlattenSeq ( C25 ^ C26 ) ) = ( C27 . (( C27 "**" C25 ) , ( C27 "**" C26 )) ) by L50 , L41 , L44 , FINSOP_1:5
.= ( ( C27 "**" C25 ) ^ ( C27 "**" C26 ) ) by L40
.= ( ( FlattenSeq C25 ) ^ ( C27 "**" C26 ) ) by L40 , L14
.= ( ( FlattenSeq C25 ) ^ ( FlattenSeq C26 ) ) by L40 , L14;
end;
theorem
L52: (for B23 being set holds (for B24 , B25 being (Element of ( B23 * )) holds ( FlattenSeq <* B24 , B25 *> ) = ( B24 ^ B25 )))
proof
let C32 being set;
let C33 , C34 being (Element of ( C32 * ));
consider C35 being (BinOp of ( C32 * )) such that L53: (for B26 , B27 being (Element of ( C32 * )) holds ( C35 . (B26 , B27) ) = ( B26 ^ B27 )) and L54: ( FlattenSeq <* C33 , C34 *> ) = ( C35 "**" <* C33 , C34 *> ) by L14;
thus L55: ( FlattenSeq <* C33 , C34 *> ) = ( C35 . (C33 , C34) ) by L54 , FINSOP_1:12
.= ( C33 ^ C34 ) by L53;
end;
theorem
L56: (for B28 being set holds (for B29 , B30 , B31 being (Element of ( B28 * )) holds ( FlattenSeq <* B29 , B30 , B31 *> ) = ( ( B29 ^ B30 ) ^ B31 )))
proof
let C36 being set;
let C37 , C38 , C39 being (Element of ( C36 * ));
consider C40 being (BinOp of ( C36 * )) such that L57: (for B32 , B33 being (Element of ( C36 * )) holds ( C40 . (B32 , B33) ) = ( B32 ^ B33 )) and L58: ( FlattenSeq <* C37 , C38 , C39 *> ) = ( C40 "**" <* C37 , C38 , C39 *> ) by L14;
thus L59: ( FlattenSeq <* C37 , C38 , C39 *> ) = ( C40 . (( C40 . (C37 , C38) ) , C39) ) by L58 , FINSOP_1:14
.= ( ( C40 . (C37 , C38) ) ^ C39 ) by L57
.= ( ( C37 ^ C38 ) ^ C39 ) by L57;
end;
theorem
L60: (for B34 being set holds (for B35 , B36 being (FinSequence of ( B34 * )) holds (B35 c= B36 implies ( FlattenSeq B35 ) c= ( FlattenSeq B36 ))))
proof
let C41 being set;
let C42 , C43 being (FinSequence of ( C41 * ));
assume L61: C42 c= C43;
consider C44 being (FinSequence of ( C41 * )) such that L62: ( C42 ^ C44 ) = C43 by L61 , FINSEQ_4:82;
L63: ( ( FlattenSeq C42 ) ^ ( FlattenSeq C44 ) ) = ( FlattenSeq C43 ) by L62 , L39;
thus L64: thesis by L63 , FINSEQ_6:10;
end;
begin
scheme Regr1 { F1() -> Nat , P1[set] } : (for R5 being (Element of ( NAT )) holds (R5 <= F1() implies P1[ R5 ]))
provided
L65: P1[ F1() ]
and
L66: (for R5 being (Element of ( NAT )) holds ((R5 < F1() & P1[ ( R5 + 1 ) ]) implies P1[ R5 ]))
proof
reconsider D3 = F1() as (Element of ( NAT )) by ORDINAL1:def 12;
defpred S1[ Nat ] means ($1 <= F1() & (not P1[ $1 ]));
assume L67: (not thesis);
L68: (ex B37 being Nat st S1[ B37 ]) by L67;
L69: (for B38 being Nat holds (S1[ B38 ] implies B38 <= D3));
consider C45 being Nat such that L70: S1[ C45 ] and L71: (for B39 being Nat holds (S1[ B39 ] implies B39 <= C45)) from NAT_1:sch 6(L69 , L68);
L72: C45 in ( NAT ) by ORDINAL1:def 12;
L73: C45 < F1() by L65 , L70 , XXREAL_0:1;
L74: ( C45 + 1 ) <= F1() by L73 , NAT_1:13;
L75: P1[ ( C45 + 1 ) ] by L74 , L71 , XREAL_1:29;
thus L76: contradiction by L75 , L66 , L70 , L73 , L72;
end;
registration
let C46 being Nat;
cluster ( Seg ( C46 + 1 ) ) -> non  empty;
coherence;
end;
theorem
L78: (for R1 being set holds ( ( {} ) |_2 R1 ) = ( {} ));
registration
let C47 being set;
cluster non  empty for (Subset of ( Fin C47 ));
existence
proof
L79: ( {} ) in ( Fin C47 ) by FINSUB_1:7;
L80: { ( {} ) } is (Subset of ( Fin C47 )) by L79 , ZFMISC_1:31;
thus L81: thesis by L80;
end;
end;
registration
let C48 being non  empty set;
cluster non  empty  with_non-empty_elements for (Subset of ( Fin C48 ));
existence
proof
set D4 = the (Element of C48);
L83: { D4 } in ( Fin C48 ) by FINSUB_1:def 5;
reconsider D5 = { { D4 } } as (Subset of ( Fin C48 )) by L83 , SUBSET_1:33;
take D5;
thus L84: D5 is non  empty;
assume L85: ( {} ) in D5;
thus L86: contradiction by L85;
end;
end;
registration
let C49 being non  empty set;
let C50 being non  empty  with_non-empty_elements (Subset of ( Fin C49 ));
cluster non  empty for (Element of C50);
existence
proof
set D6 = the (Element of C50);
L88: D6 <> ( {} );
thus L89: thesis by L88;
end;
end;
registration
let C51 being non  empty set;
cluster  with_non-empty_element for (Subset of ( Fin C51 ));
existence
proof
set D7 = the (Element of C51);
L91: { D7 } in ( Fin C51 ) by FINSUB_1:def 5;
reconsider D8 = { { D7 } } as (Subset of ( Fin C51 )) by L91 , SUBSET_1:33;
take D8;
thus L92: thesis;
end;
end;
definition
let C52 being non  empty set;
let C53 being (Order of C52);
let C54 being (Subset of C52);
redefine func C53 |_2 C54 -> (Order of C54);

coherence
proof
L94: C53 partially_orders C52 by ORDERS_1:44;
thus L95: ( C53 |_2 C54 ) is (Order of C54) by L94 , ORDERS_1:35 , ORDERS_1:45;
end;
end;
scheme SubFinite { F2() -> set , F3() -> (Subset of F2()) , P2[set] } : P2[ F3() ]
provided
L97: F3() is  finite
and
L98: P2[ ( {} F2() ) ]
and
L99: (for B40 being (Element of F2()) holds (for B41 being (Subset of F2()) holds ((B40 in F3() & B41 c= F3() & P2[ B41 ]) implies P2[ ( B41 \/ { B40 } ) ])))
proof
L100:
now
defpred S2[ set ] means (ex B42 being set st (B42 = $1 & P2[ B42 ]));
assume L101: F3() <> ( {} );
consider C55 being set such that L102: (for B43 being set holds (B43 in C55 iff (B43 in ( bool F3() ) & S2[ B43 ]))) from XBOOLE_0:sch 1;
L103: C55 c= ( bool F3() )
proof
let C56 being set;
assume L104: C56 in C55;
thus L105: thesis by L104 , L102;
end;
reconsider D9 = C55 as (Subset-Family of F3()) by L103;
L106: ( {} ) c= F3() by XBOOLE_1:2;
L107: D9 <> ( {} ) by L106 , L98 , L102;
consider C57 being set such that L108: C57 in D9 and L109: (for B44 being set holds (B44 in D9 implies (C57 c= B44 implies C57 = B44))) by L107 , L97 , FINSET_1:6;
L110: (ex R1 being set st (R1 = C57 & P2[ R1 ])) by L102 , L108;
L111:
now
set D10 = the (Element of ( F3() \ C57 ));
assume L112: C57 <> F3();
L113: (not F3() c= C57) by L112 , L108 , XBOOLE_0:def 10;
L114: ( F3() \ C57 ) <> ( {} ) by L113 , XBOOLE_1:37;
L115: (not D10 in C57) by L114 , XBOOLE_0:def 5;
L116: (not { D10 } c= C57) by L115 , ZFMISC_1:31;
L117: ( C57 \/ { D10 } ) <> C57 by L116 , XBOOLE_1:7;
L118: D10 in F3() by L114 , XBOOLE_0:def 5;
L119: { D10 } c= F3() by L118 , ZFMISC_1:31;
L120: ( C57 \/ { D10 } ) c= F3() by L119 , L108 , XBOOLE_1:8;
L121: C57 is (Subset of F2()) by L108 , XBOOLE_1:1;
L122: P2[ ( C57 \/ { D10 } ) ] by L121 , L99 , L108 , L110 , L118;
L123: ( C57 \/ { D10 } ) in D9 by L122 , L102 , L120;
thus L124: contradiction by L123 , L109 , L117 , XBOOLE_1:7;
end;
thus L125: thesis by L111 , L110;
end;
thus L126: thesis by L100 , L98;
end;
registration
let C58 being non  empty set;
let C59 being  with_non-empty_element (Subset of ( Fin C58 ));
cluster  finite non  empty for (Element of C59);
existence
proof
consider C60 being non  empty set such that L127: C60 in C59 by SETFAM_1:def 10;
reconsider D11 = C60 as (Element of C59) by L127;
take D11;
thus L128: thesis;
end;
end;
theorem
L130: (for B45 , B46 being  finite set holds ((B45 c= B46 & ( card B45 ) = ( card B46 )) implies B45 = B46))
proof
let C61 , C62 being  finite set;
assume L131: C61 c= C62;
assume L132: ( card C61 ) = ( card C62 );
reconsider D12 = C61 as (Subset of C62) by L131;
set D13 = ( incl D12 );
L133: ( rng D13 ) = C62 by L132 , FINSEQ_4:63;
thus L134: thesis by L133;
end;
definition
let C63 being set;
let C64 being  finite (Subset of C63);
let C65 being (Order of C63);
assume L135: C65 linearly_orders C64;
func SgmX (C65 , C64) -> (FinSequence of C63) means 
:L136: (( rng it ) = C64 & (for B47 , B48 being Nat holds ((B47 in ( dom it ) & B48 in ( dom it ) & B47 < B48) implies (( it /. B47 ) <> ( it /. B48 ) & [ ( it /. B47 ) , ( it /. B48 ) ] in C65))));
existence
proof
per cases ;
suppose L137: C64 is  empty;

take ( <*> C63 );
thus L138: thesis by L137;
end;
suppose L139: C64 is non  empty;

reconsider D14 = C63 as non  empty set by L139;
reconsider D15 = C64 as non  empty  finite (Subset of D14) by L139;
reconsider D16 = C65 as (Order of D14);
deffunc H2(set) = $1;
deffunc H3((Element of D15)) = { H2(B49) where B49 is (Element of D15) : (B49 <=_ D16 , $1 & B49 <> $1) };
deffunc H4((Element of D15)) = ( ( card H3($1) ) +^ 1 );
L140: (for B50 being (Element of D15) holds H4(B50) is (Element of ( NAT )))
proof
let C66 being (Element of D15);
defpred S3[ (Element of D15) ] means ($1 <=_ D16 , C66 & $1 <> C66);
L141: { H2(B51) where B51 is (Element of D15) : S3[ B51 ] } is  finite from PRE_CIRC:sch 1;
reconsider D17 = { H2(B52) where B52 is (Element of D15) : S3[ B52 ] } as  finite set by L141;
reconsider D18 = ( card D17 ) as (Element of ( NAT ));
L142: ( D18 +^ 1 ) = ( D18 + 1 ) by CARD_2:36;
thus L143: H4(C66) is (Element of ( NAT )) by L142;
end;
consider C67 being (Function of D15 , ( NAT )) such that L144: (for B53 being (Element of D15) holds ( C67 . B53 ) = H4(B53)) from FUNCT_2:sch 9(L140);
L145: (for B54 being (Element of D15) holds (not B54 in H3(B54)))
proof
let C68 being (Element of D15);
assume L146: C68 in H3(C68);
L147: (ex B55 being (Element of D15) st (B55 = C68 & B55 <=_ D16 , C68 & B55 <> C68)) by L146;
thus L148: thesis by L147;
end;
L149: (for B56 being (Element of D15) holds H3(B56) c= D15)
proof
let C69 being (Element of D15);
let C70 being set;
assume L150: C70 in H3(C69);
L151: (ex B57 being (Element of D15) st (B57 = C70 & B57 <=_ D16 , C69 & B57 <> C69)) by L150;
thus L152: thesis by L151;
end;
L153: ( rng C67 ) c= ( Seg ( card D15 ) )
proof
let C71 being set;
assume L154: C71 in ( rng C67 );
consider C72 being set such that L155: C72 in ( dom C67 ) and L156: C71 = ( C67 . C72 ) by L154 , FUNCT_1:def 3;
reconsider D19 = C71 as Nat by L156;
reconsider D20 = C72 as (Element of D15) by L155;
defpred S4[ (Element of D15) ] means ($1 <=_ D16 , D20 & $1 <> D20);
L157: { H2(B58) where B58 is (Element of D15) : S4[ B58 ] } is  finite from PRE_CIRC:sch 1;
reconsider D21 = H3(D20) as  finite set by L157;
L158: D21 <> D15 by L145;
L159: ( card D21 ) <> ( card D15 ) by L158 , L149 , L130;
L160: ( card D21 ) <= ( card D15 ) by L149 , NAT_1:43;
L161: ( card D21 ) < ( card D15 ) by L160 , L159 , XXREAL_0:1;
L162: ( ( card D21 ) + 1 ) <= ( card D15 ) by L161 , NAT_1:13;
L163: C71 = ( ( card D21 ) +^ 1 ) by L144 , L156
.= ( ( card D21 ) + 1 ) by CARD_2:36;
L164: ( (( 0 ) qua Nat) + 1 ) <= D19 by L163 , XREAL_1:6;
thus L165: thesis by L164 , L162 , L163 , FINSEQ_1:1;
end;
reconsider D22 = C67 as (Function of D15 , ( Seg ( card D15 ) )) by L153 , FUNCT_2:6;
L166: ( C65 |_2 C64 ) c= C65 by XBOOLE_1:17;
L167: C65 is_connected_in C64 by L135 , ORDERS_1:def 8;
L168: ( C65 |_2 C64 ) is  connected by L167 , ORDERS_1:75;
L169: ( field ( D16 |_2 D15 ) ) = C64 by ORDERS_1:15;
L170: ( C65 |_2 C64 ) is_connected_in C64 by L169 , L168 , RELAT_2:def 14;
L171: D16 is_transitive_in C64 by L135 , ORDERS_1:def 8;
L172: D16 is_antisymmetric_in C64 by L135 , ORDERS_1:def 8;
L173: (for B59 , B60 being set holds ((B59 in D15 & B60 in D15 & ( C67 . B59 ) = ( C67 . B60 )) implies B59 = B60))
proof
let C73 , C74 being set;
assume that
L174: C73 in D15
and
L175: C74 in D15
and
L176: ( C67 . C73 ) = ( C67 . C74 );
reconsider D23 = C74 as (Element of D15) by L175;
reconsider D24 = C73 as (Element of D15) by L174;
defpred S5[ (Element of D15) ] means ($1 <=_ D16 , D24 & $1 <> D24);
L177: { H2(B61) where B61 is (Element of D15) : S5[ B61 ] } is  finite from PRE_CIRC:sch 1;
reconsider D25 = H3(D24) as  finite set by L177;
defpred S6[ (Element of D15) ] means ($1 <=_ D16 , D23 & $1 <> D23);
L178: { H2(B62) where B62 is (Element of D15) : S6[ B62 ] } is  finite from PRE_CIRC:sch 1;
reconsider D26 = H3(D23) as  finite set by L178;
L179: (for B63 , B64 being (Element of D15) holds (B63 <=_ ( C65 |_2 C64 ) , B64 implies H3(B63) c= H3(B64)))
proof
let C75 , C76 being (Element of D15);
assume L180: C75 <=_ ( C65 |_2 C64 ) , C76;
L181: [ C75 , C76 ] in ( C65 |_2 C64 ) by L180 , ARROW:def 4;
let R2 being set;
assume L182: R2 in H3(C75);
consider C77 being (Element of C64) such that L183: C77 = R2 and L184: C77 <=_ D16 , C75 and L185: C77 <> C75 by L182;
L186: [ C77 , C75 ] in D16 by L184 , ARROW:def 4;
L187: [ C77 , C76 ] in D16 by L186 , L181 , L166 , L171 , RELAT_2:def 8;
L188: C77 <=_ D16 , C76 by L187 , ARROW:def 4;
L189: C77 <> C76 by L185 , L186 , L181 , L166 , L172 , RELAT_2:def 4;
thus L190: R2 in H3(C76) by L189 , L183 , L188;
end;
L191: ( C67 . D24 ) = ( ( card D25 ) +^ 1 ) by L144
.= ( ( card D25 ) + 1 ) by CARD_2:36;
L192: ( ( card D25 ) + 1 ) = ( ( card D26 ) +^ 1 ) by L191 , L144 , L176
.= ( ( card D26 ) + 1 ) by CARD_2:36;
L193:
now
per cases ;
suppose L194: D24 = D23;

thus L195: thesis by L194;
end;
suppose L196: D24 <> D23;

L197: ([ D24 , D23 ] in ( C65 |_2 C64 ) or [ D23 , D24 ] in ( C65 |_2 C64 )) by L196 , L170 , RELAT_2:def 6;
L198: (for B65 , B66 being (Element of D15) holds ((B65 <> B66 & B65 <=_ ( C65 |_2 C64 ) , B66) implies B65 in H3(B66)))
proof
let C78 , C79 being (Element of D15);
assume that
L199: C78 <> C79;
assume L200: C78 <=_ ( C65 |_2 C64 ) , C79;
L201: [ C78 , C79 ] in ( C65 |_2 C64 ) by L200 , ARROW:def 4;
L202: C78 <=_ D16 , C79 by L201 , L166 , ARROW:def 4;
thus L203: C78 in H3(C79) by L202 , L199;
end;
L204:
now
per cases  by L197 , ARROW:def 4;
suppose L205: D24 <=_ ( C65 |_2 C64 ) , D23;

thus L206: D25 = D26 by L205 , L192 , L130 , L179;
end;
suppose L207: D23 <=_ ( C65 |_2 C64 ) , D24;

thus L208: D25 = D26 by L207 , L192 , L130 , L179;
end;
end;
L210:
now
assume L211: D24 <> D23;
L212: ([ D24 , D23 ] in ( C65 |_2 C64 ) or [ D23 , D24 ] in ( C65 |_2 C64 )) by L211 , L170 , RELAT_2:def 6;
per cases  by L212 , ARROW:def 4;
suppose L213: D24 <=_ ( C65 |_2 C64 ) , D23;

thus L214: contradiction by L213 , L204 , L145 , L211 , L198;
end;
suppose L215: D23 <=_ ( C65 |_2 C64 ) , D24;

thus L216: contradiction by L215 , L204 , L145 , L211 , L198;
end;
end;
thus L218: thesis by L210;
end;
end;
thus L220: thesis by L193;
end;
L221: D22 is  one-to-one by L173 , FUNCT_2:19;
L222: (for B67 , B68 being (Element of D15) holds ((( C67 . B67 ) qua Nat) < ( C67 . B68 ) implies (B67 <=_ D16 , B68 & B67 <> B68)))
proof
let C80 , C81 being (Element of D15);
defpred S7[ (Element of D15) ] means ($1 <=_ D16 , C80 & $1 <> C80);
L223: { H2(B69) where B69 is (Element of D15) : S7[ B69 ] } is  finite from PRE_CIRC:sch 1;
reconsider D27 = H3(C80) as  finite set by L223;
defpred S8[ (Element of D15) ] means ($1 <=_ D16 , C81 & $1 <> C81);
L224: { H2(B70) where B70 is (Element of D15) : S8[ B70 ] } is  finite from PRE_CIRC:sch 1;
reconsider D28 = H3(C81) as  finite set by L224;
assume L225: ( C67 . C80 ) < ( C67 . C81 );
L226: ( C67 . C80 ) = ( ( card D27 ) +^ 1 ) by L144
.= ( ( card D27 ) + 1 ) by CARD_2:36;
L227: ( C67 . C81 ) = ( ( card D28 ) +^ 1 ) by L144
.= ( ( card D28 ) + 1 ) by CARD_2:36;
L228: ( ( ( card D27 ) + 1 ) - 1 ) < ( ( ( card D28 ) + 1 ) - 1 ) by L227 , L226 , L225 , XREAL_1:9;
reconsider D29 = ( card D28 ) as Cardinal;
reconsider D30 = ( card D27 ) as Cardinal;
L229: ( card ( card D28 ) ) = ( card D28 );
L230: ( card ( card D27 ) ) = ( card D27 );
L231: D30 in D29 by L230 , L229 , L228 , NAT_1:41;
L232: ( D28 \ D27 ) <> ( {} ) by L231 , CARD_1:68;
consider C82 being set such that L233: C82 in ( D28 \ D27 ) by L232 , XBOOLE_0:def 1;
L234: (not C82 in D27) by L233 , XBOOLE_0:def 5;
L235: C82 in D28 by L233;
L236: D28 c= D15 by L149;
reconsider D31 = C82 as (Element of D15) by L236 , L235;
L237: (ex B71 being (Element of D15) st (D31 = B71 & B71 <=_ D16 , C81 & B71 <> C81)) by L235;
L238: [ D31 , C81 ] in D16 by L237 , ARROW:def 4;
L239:
now
per cases  by L234;
suppose L240: (not D31 <=_ D16 , C80);

L241: (not [ D31 , C80 ] in D16) by L240 , ARROW:def 4;
L242:
now
per cases ;
suppose L243: C80 = D31;

thus L244: thesis by L243 , L237;
end;
suppose L245: C80 <> D31;

L246: [ C80 , D31 ] in D16 by L245 , L167 , L241 , RELAT_2:def 6;
L247: [ C80 , C81 ] in D16 by L246 , L238 , L171 , RELAT_2:def 8;
thus L248: C80 <=_ D16 , C81 by L247 , ARROW:def 4;
assume L249: C80 = C81;
L250: D31 = C80 by L249 , L246 , L238 , L172 , RELAT_2:def 4;
thus L251: contradiction by L250 , L245;
end;
end;
thus L253: thesis by L242;
end;
suppose L254: D31 = C80;

thus L255: thesis by L254 , L237;
end;
end;
thus L257: thesis by L239;
end;
L258: ( card ( Seg ( card D15 ) ) ) = ( card D15 ) by FINSEQ_1:57;
L259: ( rng D22 ) = ( Seg ( card D15 ) ) by L258 , L221 , FINSEQ_4:63;
L260: ( dom ( (D22 qua Function) " ) ) = ( Seg ( card D15 ) ) by L259 , L221 , FUNCT_1:33;
reconsider D32 = ( (D22 qua Function) " ) as FinSequence by L260 , FINSEQ_1:def 2;
L261: ( dom D22 ) = C64 by FUNCT_2:def 1;
L262: ( rng D32 ) = C64 by L261 , L221 , FUNCT_1:33;
reconsider D33 = D32 as (FinSequence of C63) by L262 , FINSEQ_1:def 4;
take D33;
thus L263: ( rng D33 ) = C64 by L221 , L261 , FUNCT_1:33;
let C83 , C84 being Nat;
assume that
L264: C83 in ( dom D33 )
and
L265: C84 in ( dom D33 )
and
L266: C83 < C84;
reconsider D34 = ( D33 . C83 ) as (Element of D15) by L262 , L264 , FUNCT_1:def 3;
L267: C83 in ( rng C67 ) by L221 , L264 , FUNCT_1:33;
L268: C83 = ( C67 . D34 ) by L267 , L221 , FUNCT_1:35;
reconsider D35 = ( D33 . C84 ) as (Element of D15) by L262 , L265 , FUNCT_1:def 3;
L269: D35 = ( D33 /. C84 ) by L265 , PARTFUN1:def 6;
L270: C84 in ( rng C67 ) by L221 , L265 , FUNCT_1:33;
L271: C84 = ( C67 . D35 ) by L270 , L221 , FUNCT_1:35;
L272: D34 <=_ D16 , D35 by L271 , L222 , L266 , L268;
L273: [ D34 , D35 ] in C65 by L272 , ARROW:def 4;
L274: [ D34 , D35 ] in ( C65 |_2 C64 ) by L273 , XBOOLE_0:def 4;
L275: D34 = ( D33 /. C83 ) by L264 , PARTFUN1:def 6;
thus L276: thesis by L275 , L221 , L266 , L270 , L268 , L166 , L274 , L269 , FUNCT_1:35;
end;
end;
uniqueness
proof
let C85 , C86 being (FinSequence of C63);
assume that
L278: ( rng C85 ) = C64
and
L279: (for B72 , B73 being Nat holds ((B72 in ( dom C85 ) & B73 in ( dom C85 ) & B72 < B73) implies (( C85 /. B72 ) <> ( C85 /. B73 ) & [ ( C85 /. B72 ) , ( C85 /. B73 ) ] in C65)))
and
L280: ( rng C86 ) = C64
and
L281: (for B74 , B75 being Nat holds ((B74 in ( dom C86 ) & B75 in ( dom C86 ) & B74 < B75) implies (( C86 /. B74 ) <> ( C86 /. B75 ) & [ ( C86 /. B74 ) , ( C86 /. B75 ) ] in C65)));
per cases ;
suppose L282: C64 is  empty;

L283: C85 is  empty by L282 , L278;
thus L284: thesis by L283 , L280 , L282;
end;
suppose L285: C64 is non  empty;

reconsider D36 = C63 as non  empty set by L285;
reconsider D37 = C64 as non  empty  finite (Subset of D36) by L285;
set D38 = ( <*> D37 );
defpred S9[ (FinSequence of D37) ] means (($1 is (FinSequence of D37) & (for B76 , B77 being Nat holds ((B76 in ( dom $1 ) & B77 in ( dom $1 ) & B76 < B77) implies (( $1 /. B76 ) <> ( $1 /. B77 ) & [ ( $1 /. B76 ) , ( $1 /. B77 ) ] in C65)))) implies (for B78 being (FinSequence of D37) holds ((( rng B78 ) = ( rng $1 ) & (for B79 , B80 being Nat holds ((B79 in ( dom B78 ) & B80 in ( dom B78 ) & B79 < B80) implies (( B78 /. B79 ) <> ( B78 /. B80 ) & [ ( B78 /. B79 ) , ( B78 /. B80 ) ] in C65)))) implies B78 = $1)));
reconsider D39 = C85 , D40 = C86 as (FinSequence of D37) by L278 , L280 , FINSEQ_1:def 4;
L286: (for B81 being (FinSequence of D37) holds (for B82 being (Element of D37) holds (S9[ B81 ] implies S9[ (( B81 ^ <* B82 *> ) qua (FinSequence of D37)) ])))
proof
let C87 being (FinSequence of D37);
let C88 being (Element of D37);
assume L287: S9[ C87 ];
assume L288: ( C87 ^ <* C88 *> ) is (FinSequence of D37);
assume L289: (for B83 , B84 being Nat holds ((B83 in ( dom ( C87 ^ <* C88 *> ) ) & B84 in ( dom ( C87 ^ <* C88 *> ) ) & B83 < B84) implies (( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. B83 ) <> ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. B84 ) & [ ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. B83 ) , ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. B84 ) ] in C65)));
let C89 being (FinSequence of D37);
assume that
L290: ( rng C89 ) = ( rng ( C87 ^ <* C88 *> ) )
and
L291: (for B85 , B86 being Nat holds ((B85 in ( dom C89 ) & B86 in ( dom C89 ) & B85 < B86) implies (( C89 /. B85 ) <> ( C89 /. B86 ) & [ ( C89 /. B85 ) , ( C89 /. B86 ) ] in C65)));
deffunc H5(Nat) = ( C89 . $1 );
L292: C89 <> ( 0 ) by L290;
consider C90 being Nat such that L293: ( len C89 ) = ( C90 + 1 ) by L292 , NAT_1:6;
reconsider D41 = C90 as (Element of ( NAT )) by ORDINAL1:def 12;
L294: (ex B87 being FinSequence st (( len B87 ) = D41 & (for B88 being Nat holds (B88 in ( dom B87 ) implies ( B87 . B88 ) = H5(B88))))) from FINSEQ_1:sch 2;
consider C91 being FinSequence such that L295: ( len C91 ) = D41 and L296: (for B89 being Nat holds (B89 in ( dom C91 ) implies ( C91 . B89 ) = ( C89 . B89 ))) by L294;
L297: 1 in ( Seg 1 ) by FINSEQ_1:2 , TARSKI:def 1;
L298: 1 in ( dom <* C88 *> ) by L297 , FINSEQ_1:def 8;
L299: (ex B90 being (Element of D37) st (B90 = C88 & (for B91 being (Element of D37) holds ((B91 in ( rng ( C87 ^ <* C88 *> ) ) & B91 <> C88) implies [ B91 , B90 ] in C65))))
proof
reconsider D42 = C88 as (Element of D37);
take D42;
thus L300: D42 = C88;
thus L301: (for B92 being (Element of D37) holds ((B92 in ( rng ( C87 ^ <* C88 *> ) ) & B92 <> C88) implies [ B92 , D42 ] in C65))
proof
let C92 being (Element of D37);
assume that
L302: C92 in ( rng ( C87 ^ <* C88 *> ) )
and
L303: C92 <> C88;
consider R3 being set such that L304: R3 in ( dom ( C87 ^ <* C88 *> ) ) and L305: C92 = ( ( C87 ^ <* C88 *> ) . R3 ) by L302 , FUNCT_1:def 3;
L306: C92 = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. R3 ) by L304 , L305 , PARTFUN1:def 6;
reconsider D43 = R3 as (Element of ( NAT )) by L304;
L307: D43 <> ( ( len C87 ) + 1 )
proof
assume L308: D43 = ( ( len C87 ) + 1 );
L309: ( ( C87 ^ <* C88 *> ) . D43 ) = ( <* C88 *> . 1 ) by L308 , L298 , FINSEQ_1:def 7
.= C88 by FINSEQ_1:def 8;
thus L310: contradiction by L309 , L303 , L305;
end;
L311: R3 in ( Seg ( len ( C87 ^ <* C88 *> ) ) ) by L304 , FINSEQ_1:def 3;
L312: D43 <= ( len ( C87 ^ <* C88 *> ) ) by L311 , FINSEQ_1:1;
L313: D43 <= ( ( len C87 ) + ( len <* C88 *> ) ) by L312 , FINSEQ_1:22;
L314: D43 <= ( ( len C87 ) + 1 ) by L313 , FINSEQ_1:39;
L315: D43 < ( ( len C87 ) + 1 ) by L314 , L307 , XXREAL_0:1;
L316: D43 < ( ( len C87 ) + ( len <* C88 *> ) ) by L315 , FINSEQ_1:39;
L317: D43 < ( len ( C87 ^ <* C88 *> ) ) by L316 , FINSEQ_1:22;
L318: 1 <= D43 by L311 , FINSEQ_1:1;
L319: ( 1 - ( len ( C87 ^ <* C88 *> ) ) ) < ( D43 - D43 ) by L318 , L317 , XREAL_1:15;
L320: 1 < ( len ( C87 ^ <* C88 *> ) ) by L319 , XREAL_1:48;
L321: ( len ( C87 ^ <* C88 *> ) ) in ( Seg ( len ( C87 ^ <* C88 *> ) ) ) by L320 , FINSEQ_1:1;
L322: ( len ( C87 ^ <* C88 *> ) ) in ( dom ( C87 ^ <* C88 *> ) ) by L321 , FINSEQ_1:def 3;
L323: D42 = ( ( C87 ^ <* C88 *> ) . ( ( len C87 ) + 1 ) ) by FINSEQ_1:42
.= ( ( C87 ^ <* C88 *> ) . ( ( len C87 ) + ( len <* C88 *> ) ) ) by FINSEQ_1:39
.= ( ( C87 ^ <* C88 *> ) . ( len ( C87 ^ <* C88 *> ) ) ) by FINSEQ_1:22;
L324: D42 = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. ( len ( C87 ^ <* C88 *> ) ) ) by L323 , L322 , PARTFUN1:def 6;
thus L325: thesis by L324 , L289 , L304 , L306 , L317 , L322;
end;

end;
L302: (for B93 being Nat holds (B93 in ( dom <* C88 *> ) implies ( C89 . ( ( len C91 ) + B93 ) ) = ( <* C88 *> . B93 )))
proof
let C93 being Nat;
assume L303: C93 in ( dom <* C88 *> );
L304: C93 in { 1 } by L303 , FINSEQ_1:2 , FINSEQ_1:def 8;
L305: ( C89 . ( ( len C91 ) + C93 ) ) = C88
proof
consider C94 being (Element of D37) such that L306: C94 = C88 and L307: (for B94 being (Element of D37) holds ((B94 in ( rng ( C87 ^ <* C88 *> ) ) & B94 <> C88) implies [ B94 , C94 ] in C65)) by L299;
reconsider D44 = C94 as (Element of D37);
L308: ( len C89 ) in ( Seg ( len C89 ) ) by L292 , FINSEQ_1:3;
L309: ( len C89 ) in ( dom C89 ) by L308 , FINSEQ_1:def 3;
L310: ( C89 . ( len C89 ) ) in ( rng C89 ) by L309 , FUNCT_1:def 3;
reconsider D45 = ( C89 . ( len C89 ) ) as (Element of D37) by L310;
L311: D45 = ( C89 /. ( len C89 ) ) by L309 , PARTFUN1:def 6;
L312: ( field C65 ) = C63 by ORDERS_1:12;
L313: C65 is_antisymmetric_in C63 by L312 , RELAT_2:def 12;
assume L314: ( C89 . ( ( len C91 ) + C93 ) ) <> C88;
L315: ( C89 . ( len C89 ) ) <> C88 by L314 , L293 , L295 , L304 , TARSKI:def 1;
L316: C88 in { C88 } by TARSKI:def 1;
L317: C88 in ( rng <* C88 *> ) by L316 , FINSEQ_1:38;
L318: C88 in ( ( rng C87 ) \/ ( rng <* C88 *> ) ) by L317 , XBOOLE_0:def 3;
L319: C88 in ( rng C89 ) by L318 , L290 , FINSEQ_1:31;
consider R3 being set such that L320: R3 in ( dom C89 ) and L321: C88 = ( C89 . R3 ) by L319 , FUNCT_1:def 3;
L322: R3 in ( Seg ( len C89 ) ) by L320 , FINSEQ_1:def 3;
reconsider D46 = R3 as (Element of ( NAT )) by L320;
L323: D46 <= ( len C89 ) by L322 , FINSEQ_1:1;
L324: D46 < ( len C89 ) by L323 , L315 , L321 , XXREAL_0:1;
L325: ( C89 . ( len C89 ) ) in ( rng ( C87 ^ <* C88 *> ) ) by L290 , L309 , FUNCT_1:def 3;
L326: [ D45 , D44 ] in C65 by L325 , L315 , L307;
L327: D44 = ( C89 /. D46 ) by L306 , L320 , L321 , PARTFUN1:def 6;
L328: [ D44 , D45 ] in C65 by L327 , L291 , L320 , L309 , L324 , L311;
L329: D45 <> D44 by L291 , L320 , L309 , L324 , L311 , L327;
thus L330: contradiction by L329 , L326 , L328 , L313 , RELAT_2:def 4;
end;
L331: C93 = 1 by L304 , TARSKI:def 1;
thus L332: thesis by L331 , L305 , FINSEQ_1:40;
end;
L333:
now
let R2 being set;
L334: D41 <= ( D41 + 1 ) by NAT_1:11;
assume L335: R2 in ( rng C91 );
consider R3 being set such that L336: R3 in ( dom C91 ) and L337: R2 = ( C91 . R3 ) by L335 , FUNCT_1:def 3;
L338: R3 in ( Seg ( len C91 ) ) by L336 , FINSEQ_1:def 3;
reconsider D47 = R3 as (Element of ( NAT )) by L336;
L339: D47 <= D41 by L295 , L338 , FINSEQ_1:1;
L340: D47 <= ( D41 + 1 ) by L339 , L334 , XXREAL_0:2;
L341: 1 <= D47 by L338 , FINSEQ_1:1;
L342: D47 in ( dom C89 ) by L341 , L293 , L340 , FINSEQ_3:25;
L343: ( C89 . D47 ) in ( rng C89 ) by L342 , FUNCT_1:def 3;
L344: ( C89 . D47 ) in D37 by L343;
thus L345: R2 in D37 by L344 , L296 , L336 , L337;
end;
L346: ( rng C91 ) c= D37 by L333 , TARSKI:def 3;
reconsider D48 = C91 as (FinSequence of D37) by L346 , FINSEQ_1:def 4;
L347: ( dom C89 ) = ( Seg ( D41 + 1 ) ) by L293 , FINSEQ_1:def 3
.= ( Seg ( ( len C91 ) + ( len <* C88 *> ) ) ) by L295 , FINSEQ_1:39;
L348: ( C91 ^ <* C88 *> ) = C89 by L347 , L296 , L302 , FINSEQ_1:def 7;
L349: (not C88 in ( rng C87 ))
proof
L350: ( ( len C87 ) + 1 ) = ( ( len C87 ) + ( len <* C88 *> ) ) by FINSEQ_1:39
.= ( len ( C87 ^ <* C88 *> ) ) by FINSEQ_1:22;
L351: ( ( len C87 ) + 1 ) in ( Seg ( len ( C87 ^ <* C88 *> ) ) ) by L350 , FINSEQ_1:4;
L352: ( ( len C87 ) + 1 ) in ( dom ( C87 ^ <* C88 *> ) ) by L351 , FINSEQ_1:def 3;
assume L353: C88 in ( rng C87 );
consider R3 being set such that L354: R3 in ( dom C87 ) and L355: C88 = ( C87 . R3 ) by L353 , FUNCT_1:def 3;
L356: R3 in ( Seg ( len C87 ) ) by L354 , FINSEQ_1:def 3;
L357: ( dom C87 ) c= ( dom ( C87 ^ <* C88 *> ) ) by FINSEQ_1:26;
reconsider D49 = R3 as (Element of ( NAT )) by L354;
L358: C88 = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) . D49 ) by L354 , L355 , FINSEQ_1:def 7;
L359: C88 = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. D49 ) by L358 , L354 , L357 , PARTFUN1:def 6;
L360: D49 <= ( len C87 ) by L356 , FINSEQ_1:1;
L361: D49 < ( ( len C87 ) + 1 ) by L360 , NAT_1:13;
L362: C88 = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) . ( ( len C87 ) + 1 ) ) by FINSEQ_1:42;
L363: ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. D49 ) = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. ( ( len C87 ) + 1 ) ) by L362 , L352 , L359 , PARTFUN1:def 6;
thus L364: contradiction by L363 , L289 , L354 , L352 , L357 , L361;
end;
L365: (for R4 being set holds (R4 in ( ( ( rng C87 ) \/ { C88 } ) \ { C88 } ) iff R4 in ( rng C87 )))
proof
let R4 being set;
thus L366: (R4 in ( ( ( rng C87 ) \/ { C88 } ) \ { C88 } ) implies R4 in ( rng C87 ))
proof
assume L367: R4 in ( ( ( rng C87 ) \/ { C88 } ) \ { C88 } );
L368: (not R4 in { C88 }) by L367 , XBOOLE_0:def 5;
L369: R4 in ( ( rng C87 ) \/ { C88 } ) by L367 , XBOOLE_0:def 5;
thus L370: thesis by L369 , L368 , XBOOLE_0:def 3;
end;

assume L371: R4 in ( rng C87 );
L372: R4 in ( ( rng C87 ) \/ { C88 } ) by L371 , XBOOLE_0:def 3;
L373: (not R4 in { C88 }) by L349 , L371 , TARSKI:def 1;
thus L374: thesis by L373 , L372 , XBOOLE_0:def 5;
end;
L375: ( rng ( C87 ^ <* C88 *> ) ) = ( ( rng C87 ) \/ ( rng <* C88 *> ) ) by FINSEQ_1:31
.= ( ( rng C87 ) \/ { C88 } ) by FINSEQ_1:39;
L376: ( rng C87 ) = ( ( rng ( C87 ^ <* C88 *> ) ) \ { C88 } ) by L375 , L365 , TARSKI:1;
L377: (( rng D48 ) = ( rng C87 ) & (for B95 , B96 being Nat holds ((B95 in ( dom D48 ) & B96 in ( dom D48 ) & B95 < B96) implies (( D48 /. B95 ) <> ( D48 /. B96 ) & [ ( D48 /. B95 ) , ( D48 /. B96 ) ] in C65))))
proof
L378: (not C88 in ( rng D48 ))
proof
L379: ( ( len D48 ) + 1 ) = ( ( len D48 ) + ( len <* C88 *> ) ) by FINSEQ_1:39
.= ( len ( D48 ^ <* C88 *> ) ) by FINSEQ_1:22;
L380: ( ( len D48 ) + 1 ) in ( Seg ( len ( D48 ^ <* C88 *> ) ) ) by L379 , FINSEQ_1:4;
L381: ( ( len D48 ) + 1 ) in ( dom ( D48 ^ <* C88 *> ) ) by L380 , FINSEQ_1:def 3;
assume L382: C88 in ( rng D48 );
consider R3 being set such that L383: R3 in ( dom D48 ) and L384: C88 = ( D48 . R3 ) by L382 , FUNCT_1:def 3;
L385: R3 in ( Seg ( len D48 ) ) by L383 , FINSEQ_1:def 3;
L386: ( dom D48 ) c= ( dom ( D48 ^ <* C88 *> ) ) by FINSEQ_1:26;
reconsider D50 = R3 as (Element of ( NAT )) by L383;
L387: C88 = ( C89 . D50 ) by L296 , L383 , L384;
L388: C88 = ( C89 /. D50 ) by L387 , L348 , L383 , L386 , PARTFUN1:def 6;
L389: D50 <= ( len D48 ) by L385 , FINSEQ_1:1;
L390: D50 < ( ( len D48 ) + 1 ) by L389 , NAT_1:13;
L391: C88 = ( C89 . ( ( len D48 ) + 1 ) ) by L348 , FINSEQ_1:42;
L392: ( C89 /. D50 ) = ( C89 /. ( ( len D48 ) + 1 ) ) by L391 , L348 , L381 , L388 , PARTFUN1:def 6;
thus L393: contradiction by L392 , L291 , L348 , L383 , L381 , L386 , L390;
end;
L394: (for R4 being set holds (R4 in ( ( ( rng D48 ) \/ { C88 } ) \ { C88 } ) iff R4 in ( rng D48 )))
proof
let R4 being set;
thus L395:now
assume L396: R4 in ( ( ( rng D48 ) \/ { C88 } ) \ { C88 } );
L397: (not R4 in { C88 }) by L396 , XBOOLE_0:def 5;
L398: R4 in ( ( rng D48 ) \/ { C88 } ) by L396 , XBOOLE_0:def 5;
thus L399: R4 in ( rng D48 ) by L398 , L397 , XBOOLE_0:def 3;
end;
assume L400: R4 in ( rng D48 );
L401: R4 in ( ( rng D48 ) \/ { C88 } ) by L400 , XBOOLE_0:def 3;
L402: (not R4 in { C88 }) by L378 , L400 , TARSKI:def 1;
thus L403: thesis by L402 , L401 , XBOOLE_0:def 5;
end;
L404: ( rng ( D48 ^ <* C88 *> ) ) = ( ( rng D48 ) \/ ( rng <* C88 *> ) ) by FINSEQ_1:31
.= ( ( rng D48 ) \/ { C88 } ) by FINSEQ_1:39;
thus L405: ( rng D48 ) = ( rng C87 ) by L404 , L290 , L348 , L376 , L394 , TARSKI:1;
let C95 , C96 being Nat;
assume that
L406: C95 in ( dom D48 )
and
L407: C96 in ( dom D48 )
and
L408: C95 < C96;
L409: ( D48 . C96 ) = ( D48 /. C96 ) by L407 , PARTFUN1:def 6;
L410: ( dom D48 ) c= ( dom C89 ) by L348 , FINSEQ_1:26;
L411: ( C89 . C96 ) = ( C89 /. C96 ) by L410 , L407 , PARTFUN1:def 6;
L412: ( D48 /. C96 ) = ( C89 /. C96 ) by L411 , L296 , L407 , L409;
L413: ( D48 . C95 ) = ( D48 /. C95 ) by L406 , PARTFUN1:def 6;
L414: ( C89 . C95 ) = ( C89 /. C95 ) by L410 , L406 , PARTFUN1:def 6;
L415: ( D48 /. C95 ) = ( C89 /. C95 ) by L414 , L296 , L406 , L413;
thus L416: thesis by L415 , L291 , L410 , L406 , L407 , L408 , L412;
end;
L417: (C87 is (FinSequence of D37) & (for B97 , B98 being Nat holds ((B97 in ( dom C87 ) & B98 in ( dom C87 ) & B97 < B98) implies (( C87 /. B97 ) <> ( C87 /. B98 ) & [ ( C87 /. B97 ) , ( C87 /. B98 ) ] in C65))))
proof
thus L418: C87 is (FinSequence of D37);
let C97 , C98 being Nat;
assume that
L419: C97 in ( dom C87 )
and
L420: C98 in ( dom C87 )
and
L421: C97 < C98;
L422: ( dom C87 ) c= ( dom ( C87 ^ <* C88 *> ) ) by FINSEQ_1:26;
L423: ( C87 . C98 ) = ( ( C87 ^ <* C88 *> ) . C98 ) by L420 , FINSEQ_1:def 7;
L424: ( C87 . C98 ) = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. C98 ) by L423 , L420 , L422 , PARTFUN1:def 6;
L425: ( C87 /. C98 ) = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. C98 ) by L424 , L420 , PARTFUN1:def 6;
L426: ( C87 . C97 ) = ( ( C87 ^ <* C88 *> ) . C97 ) by L419 , FINSEQ_1:def 7;
L427: ( C87 . C97 ) = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. C97 ) by L426 , L419 , L422 , PARTFUN1:def 6;
L428: ( C87 /. C97 ) = ( (( C87 ^ <* C88 *> ) qua (FinSequence of D37)) /. C97 ) by L427 , L419 , PARTFUN1:def 6;
thus L429: thesis by L428 , L289 , L419 , L420 , L421 , L422 , L425;
end;
thus L430: thesis by L417 , L287 , L348 , L377;
end;
L431:
now
let C99 , C100 being Nat;
assume that
L432: C99 in ( dom D39 )
and
L433: C100 in ( dom D39 )
and
L434: C99 < C100;
L435: ( D39 /. C100 ) = ( D39 . C100 ) by L433 , PARTFUN1:def 6
.= ( C85 /. C100 ) by L433 , PARTFUN1:def 6;
L436: ( D39 /. C99 ) = ( D39 . C99 ) by L432 , PARTFUN1:def 6
.= ( C85 /. C99 ) by L432 , PARTFUN1:def 6;
thus L437: (( D39 /. C99 ) <> ( D39 /. C100 ) & [ ( D39 /. C99 ) , ( D39 /. C100 ) ] in C65) by L436 , L279 , L432 , L433 , L434 , L435;
end;
L438:
now
let C101 , C102 being Nat;
assume that
L439: C101 in ( dom D40 )
and
L440: C102 in ( dom D40 )
and
L441: C101 < C102;
L442: ( D40 /. C102 ) = ( D40 . C102 ) by L440 , PARTFUN1:def 6
.= ( C86 /. C102 ) by L440 , PARTFUN1:def 6;
L443: ( D40 /. C101 ) = ( D40 . C101 ) by L439 , PARTFUN1:def 6
.= ( C86 /. C101 ) by L439 , PARTFUN1:def 6;
thus L444: (( D40 /. C101 ) <> ( D40 /. C102 ) & [ ( D40 /. C101 ) , ( D40 /. C102 ) ] in C65) by L443 , L281 , L439 , L440 , L441 , L442;
end;
L445: S9[ D38 ];
L446: (for B99 being (FinSequence of D37) holds S9[ B99 ]) from FINSEQ_2:sch 2(L445 , L286);
thus L447: thesis by L446 , L278 , L280 , L431 , L438;
end;
end;
end;
theorem
L450: (for B100 being set holds (for B101 being  finite (Subset of B100) holds (for B102 being (Order of B100) holds (for B103 being (FinSequence of B100) holds ((( rng B103 ) = B101 & (for B104 , B105 being Nat holds ((B104 in ( dom B103 ) & B105 in ( dom B103 ) & B104 < B105) implies (( B103 /. B104 ) <> ( B103 /. B105 ) & [ ( B103 /. B104 ) , ( B103 /. B105 ) ] in B102)))) implies B103 = ( SgmX (B102 , B101) ))))))
proof
let C103 being set;
let C104 being  finite (Subset of C103);
let C105 being (Order of C103);
let C106 being (FinSequence of C103);
assume that
L451: ( rng C106 ) = C104
and
L452: (for B106 , B107 being Nat holds ((B106 in ( dom C106 ) & B107 in ( dom C106 ) & B106 < B107) implies (( C106 /. B106 ) <> ( C106 /. B107 ) & [ ( C106 /. B106 ) , ( C106 /. B107 ) ] in C105)));
L453:
now
let C107 , C108 being set;
assume that
L454: C107 in C104
and
L455: C108 in C104
and
L456: C107 <> C108;
consider C109 being Nat such that L457: C109 in ( dom C106 ) and L458: ( C106 . C109 ) = C107 by L451 , L454 , FINSEQ_2:10;
consider C110 being Nat such that L459: C110 in ( dom C106 ) and L460: ( C106 . C110 ) = C108 by L451 , L455 , FINSEQ_2:10;
L461: ( C106 /. C110 ) = ( C106 . C110 ) by L459 , PARTFUN1:def 6;
L462: ( C106 /. C109 ) = ( C106 . C109 ) by L457 , PARTFUN1:def 6;
L463:
now
assume that
L464: (not [ C107 , C108 ] in C105)
and
L465: (not [ C108 , C107 ] in C105);
per cases ;
suppose L466: C109 = C110;

thus L467: contradiction by L466 , L456 , L458 , L460;
end;
suppose L468: C109 <> C110;

L469:
now
per cases  by L468 , XXREAL_0:1;
suppose L470: C109 > C110;

thus L471: contradiction by L470 , L452 , L457 , L458 , L459 , L460 , L462 , L461 , L465;
end;
suppose L472: C110 > C109;

thus L473: contradiction by L472 , L452 , L457 , L458 , L459 , L460 , L462 , L461 , L464;
end;
end;
thus L475: contradiction by L469;
end;
end;
thus L477: ([ C107 , C108 ] in C105 or [ C108 , C107 ] in C105) by L463;
end;
L478: C105 is_connected_in C104 by L453 , RELAT_2:def 6;
L479: ( field C105 ) = C103 by ORDERS_1:12;
L480: C105 is_antisymmetric_in C103 by L479 , RELAT_2:def 12;
L481: C105 is_antisymmetric_in C104 by L480 , ORDERS_1:9;
L482: C105 is_transitive_in C103 by L479 , RELAT_2:def 16;
L483: C105 is_transitive_in C104 by L482 , ORDERS_1:10;
L484: C105 is_reflexive_in C103 by L479 , RELAT_2:def 9;
L485: C105 is_reflexive_in C104 by L484 , ORDERS_1:8;
L486: C105 linearly_orders C104 by L485 , L481 , L483 , L478 , ORDERS_1:def 8;
thus L487: thesis by L486 , L451 , L452 , L136;
end;
registration
let C111 being set;
let C112 being non  empty (Subset of ( Fin C111 ));
cluster  ->  finite for (Element of C112);
coherence;
end;
definition
let C113 being set;
let C114 being non  empty (Subset of ( Fin C113 ));
redefine mode Element of C114
 -> (Subset of C113);
coherence
proof
let C115 being (Element of C114);
thus L489: thesis by FINSUB_1:17;
end;
end;
theorem
L491: (for B108 being set holds (for B109 being  finite (Subset of B108) holds (for B110 being (Order of B108) holds (B110 linearly_orders B109 implies ( SgmX (B110 , B109) ) is  one-to-one))))
proof
let C116 being set;
let C117 being  finite (Subset of C116);
let C118 being (Order of C116);
set D51 = ( SgmX (C118 , C117) );
assume L492: C118 linearly_orders C117;
L493: ( rng D51 ) = C117 by L492 , L136;
reconsider D52 = D51 as (FinSequence of C117) by L493 , FINSEQ_1:def 4;
L494: D52 is  one-to-one
proof
let C119 , C120 being set;
assume that
L495: C119 in ( dom D52 )
and
L496: C120 in ( dom D52 )
and
L497: ( D52 . C119 ) = ( D52 . C120 );
reconsider D53 = C119 , D54 = C120 as (Element of ( NAT )) by L495 , L496;
reconsider D55 = ( D52 . D53 ) as (Element of C117) by L495 , FINSEQ_2:11;
reconsider D56 = ( D52 . D54 ) as (Element of C117) by L496 , FINSEQ_2:11;
L498: D56 = ( D52 /. D54 ) by L496 , PARTFUN1:def 6;
L499: D55 = ( D52 /. D53 ) by L495 , PARTFUN1:def 6;
L500:
now
L501: ( D52 /. D54 ) = ( D52 . D54 ) by L496 , PARTFUN1:def 6
.= ( ( SgmX (C118 , C117) ) /. D54 ) by L496 , PARTFUN1:def 6;
L502: ( D52 /. D53 ) = ( D52 . D53 ) by L495 , PARTFUN1:def 6
.= ( ( SgmX (C118 , C117) ) /. D53 ) by L495 , PARTFUN1:def 6;
assume L503: D53 <> D54;
per cases  by L503 , XXREAL_0:1;
suppose L504: D53 < D54;

thus L505: contradiction by L504 , L492 , L495 , L496 , L497 , L499 , L498 , L502 , L501 , L136;
end;
suppose L506: D54 < D53;

thus L507: contradiction by L506 , L492 , L495 , L496 , L497 , L499 , L498 , L502 , L501 , L136;
end;
end;
thus L509: thesis by L500;
end;
thus L510: thesis by L494;
end;
theorem
L511: (for B111 being set holds (for B112 being  finite (Subset of B111) holds (for B113 being (Order of B111) holds (B113 linearly_orders B112 implies ( len ( SgmX (B113 , B112) ) ) = ( card B112 )))))
proof
let C121 being set;
let C122 being  finite (Subset of C121);
let C123 being (Order of C121);
set D57 = ( SgmX (C123 , C122) );
L512: ( dom D57 ) = ( Seg ( len D57 ) ) by FINSEQ_1:def 3;
L513: ( Seg ( len D57 ) ) , ( len D57 ) are_equipotent  by FINSEQ_1:54;
L514: ( card ( Seg ( len D57 ) ) ) = ( card ( len D57 ) ) by L513 , CARD_1:5;
assume L515: C123 linearly_orders C122;
L516: D57 is  one-to-one by L515 , L491;
L517: ( rng D57 ) = C122 by L515 , L136;
L518: ( Seg ( len D57 ) ) , C122 are_equipotent  by L517 , L512 , L516 , WELLORD2:def 4;
thus L519: thesis by L518 , L514 , CARD_1:5;
end;
begin
theorem
L520: (for R6 being Nat holds (for B114 being FinSequence holds (( len B114 ) = ( R6 + 1 ) implies ( len ( Del (B114 , ( R6 + 1 )) ) ) = R6)))
proof
let R6 being Nat;
let C124 being FinSequence;
assume L521: ( len C124 ) = ( R6 + 1 );
L522: ( R6 + 1 ) in ( Seg ( len C124 ) ) by L521 , FINSEQ_1:4;
L523: ( R6 + 1 ) in ( dom C124 ) by L522 , FINSEQ_1:def 3;
thus L524: thesis by L523 , L521 , FINSEQ_3:109;
end;
theorem
L525: (for R6 being Nat holds (for B115 being FinSequence holds (( len B115 ) = ( R6 + 1 ) implies B115 = ( ( Del (B115 , ( len B115 )) ) ^ <* ( B115 . ( len B115 ) ) *> ))))
proof
let R6 being Nat;
let C125 being FinSequence;
assume L526: ( len C125 ) = ( R6 + 1 );
L527: C125 <> ( {} ) by L526;
consider C126 being FinSequence, R7 being set such that L528: C125 = ( C126 ^ <* R7 *> ) by L527 , FINSEQ_1:46;
L529: ( len C125 ) = ( ( len C126 ) + ( len <* R7 *> ) ) by L528 , FINSEQ_1:22
.= ( ( len C126 ) + 1 ) by FINSEQ_1:39;
L530: ( len ( Del (C125 , ( len C125 )) ) ) = ( len C126 ) by L529 , L520;
L531: ( dom C126 ) = ( Seg ( len C126 ) ) by FINSEQ_1:def 3;
L532:
now
let C127 being Nat;
assume L533: C127 in ( dom C126 );
L534: C127 <= ( len C126 ) by L533 , L531 , FINSEQ_1:1;
L535: (C127 in ( NAT ) & C127 < ( len C125 )) by L534 , L529 , NAT_1:13 , ORDINAL1:def 12;
thus L536: ( ( Del (C125 , ( len C125 )) ) . C127 ) = ( C125 . C127 ) by L535 , FINSEQ_3:110
.= ( C126 . C127 ) by L528 , L533 , FINSEQ_1:def 7;
end;
L537: ( C125 . ( len C125 ) ) = R7 by L528 , L529 , FINSEQ_1:42;
thus L538: thesis by L537 , L528 , L530 , L532 , FINSEQ_2:9;
end;
definition
let C128 being Function;
attr C128 is  FinSequence-yielding
means
:L539: (for R7 being set holds (R7 in ( dom C128 ) implies ( C128 . R7 ) is FinSequence));
end;
registration
cluster  FinSequence-yielding for Function;
existence
proof
set D58 = the FinSequence;
set D59 = the set;
take D60 = ( D59 --> D58 );
let R7 being set;
assume L541: R7 in ( dom D60 );
thus L542: thesis by L541 , FUNCOP_1:7;
end;
end;
definition
let C129 , C130 being  FinSequence-yielding Function;
func C129 ^^ C130 ->  FinSequence-yielding Function means 
:L544: (( dom it ) = ( ( dom C129 ) /\ ( dom C130 ) ) & (for B116 being set holds (B116 in ( dom it ) implies (for B117 , B118 being FinSequence holds ((B117 = ( C129 . B116 ) & B118 = ( C130 . B116 )) implies ( it . B116 ) = ( B117 ^ B118 ))))));
existence
proof
defpred S10[ set , set ] means (for B119 being FinSequence holds (for B120 being FinSequence holds ((B119 = ( C129 . $1 ) & B120 = ( C130 . $1 )) implies $2 = ( B119 ^ B120 ))));
L545: (for B121 being set holds (B121 in ( ( dom C129 ) /\ ( dom C130 ) ) implies (ex B122 being set st S10[ B121 , B122 ])))
proof
let C131 being set;
assume L546: C131 in ( ( dom C129 ) /\ ( dom C130 ) );
L547: (C131 in ( dom C129 ) & C131 in ( dom C130 )) by L546 , XBOOLE_0:def 4;
reconsider D61 = ( C129 . C131 ) , D62 = ( C130 . C131 ) as FinSequence by L547 , L539;
take ( D61 ^ D62 );
thus L548: thesis;
end;
consider C132 being Function such that L549: (( dom C132 ) = ( ( dom C129 ) /\ ( dom C130 ) ) & (for B123 being set holds (B123 in ( ( dom C129 ) /\ ( dom C130 ) ) implies S10[ B123 , ( C132 . B123 ) ]))) from CLASSES1:sch 1(L545);
L550: (for B124 being set holds (B124 in ( dom C132 ) implies ( C132 . B124 ) is FinSequence))
proof
let C133 being set;
assume L551: C133 in ( dom C132 );
L552: C133 in ( dom C129 ) by L551 , L549 , XBOOLE_0:def 4;
reconsider D63 = ( C129 . C133 ) as FinSequence by L552 , L539;
L553: C133 in ( dom C130 ) by L549 , L551 , XBOOLE_0:def 4;
reconsider D64 = ( C130 . C133 ) as FinSequence by L553 , L539;
L554: ( C132 . C133 ) = ( D63 ^ D64 ) by L549 , L551;
thus L555: thesis by L554;
end;
reconsider D65 = C132 as  FinSequence-yielding Function by L550 , L539;
take D65;
thus L556: thesis by L549;
end;
uniqueness
proof
let C134 , C135 being  FinSequence-yielding Function;
assume that
L557: ( dom C134 ) = ( ( dom C129 ) /\ ( dom C130 ) )
and
L558: (for B125 being set holds (B125 in ( dom C134 ) implies (for B126 , B127 being FinSequence holds ((B126 = ( C129 . B125 ) & B127 = ( C130 . B125 )) implies ( C134 . B125 ) = ( B126 ^ B127 )))))
and
L559: ( dom C135 ) = ( ( dom C129 ) /\ ( dom C130 ) )
and
L560: (for B128 being set holds (B128 in ( dom C135 ) implies (for B129 , B130 being FinSequence holds ((B129 = ( C129 . B128 ) & B130 = ( C130 . B128 )) implies ( C135 . B128 ) = ( B129 ^ B130 )))));
L561:
now
let R7 being set;
assume L562: R7 in ( dom C134 );
L563: (R7 in ( dom C129 ) & R7 in ( dom C130 )) by L562 , L557 , XBOOLE_0:def 4;
reconsider D66 = ( C129 . R7 ) , D67 = ( C130 . R7 ) as FinSequence by L563 , L539;
thus L564: ( C134 . R7 ) = ( D66 ^ D67 ) by L558 , L562
.= ( C135 . R7 ) by L557 , L559 , L560 , L562;
end;
thus L565: thesis by L561 , L557 , L559 , FUNCT_1:2;
end;
end;
begin
theorem
L567: (for B131 , B132 being non  empty set holds (ex B133 being (Element of ( PFuncs (B131 , B132) )) st B133 <> ( {} )))
proof
let C136 , C137 being non  empty set;
consider C138 being set such that L568: C138 in C136 by XBOOLE_0:def 1;
consider C139 being set such that L569: C139 in C137 by XBOOLE_0:def 1;
set D68 = { [ C138 , C139 ] };
L570: { C138 } c= C136 by L568 , ZFMISC_1:31;
L571: ( dom D68 ) c= C136 by L570 , RELAT_1:9;
L572: { C139 } c= C137 by L569 , ZFMISC_1:31;
L573: ( rng D68 ) c= C137 by L572 , RELAT_1:9;
reconsider D69 = D68 as (Element of ( PFuncs (C136 , C137) )) by L573 , L571 , PARTFUN1:def 3;
L574: D69 <> ( {} );
thus L575: thesis by L574;
end;
theorem
L576: (for R8 being set holds (for R9 being set holds (for B134 being (Element of ( PFuncs (R8 , R9) )) holds (for B135 being set holds (B135 c= B134 implies B135 in ( PFuncs (R8 , R9) ))))))
proof
let R8 being set;
let R9 being set;
let C140 being (Element of ( PFuncs (R8 , R9) ));
let C141 being set;
consider C142 being Function such that L577: C142 = C140 and L578: ( dom C142 ) c= R8 and L579: ( rng C142 ) c= R9 by PARTFUN1:def 3;
assume L580: C141 c= C140;
reconsider D70 = C141 as Function by L580;
L581: ( rng D70 ) c= ( rng C142 ) by L580 , L577 , RELAT_1:11;
L582: ( rng D70 ) c= R9 by L581 , L579 , XBOOLE_1:1;
L583: ( dom D70 ) c= ( dom C142 ) by L580 , L577 , RELAT_1:11;
L584: ( dom D70 ) c= R8 by L583 , L578 , XBOOLE_1:1;
thus L585: thesis by L584 , L582 , PARTFUN1:def 3;
end;
theorem
L586: (for R8 being set holds (for R9 being set holds ( PFuncs (R8 , R9) ) c= ( bool [: R8 , R9 :] )))
proof
let R8 being set;
let R9 being set;
let C143 being set;
assume L587: C143 in ( PFuncs (R8 , R9) );
consider C144 being Function such that L588: C143 = C144 and L589: ( dom C144 ) c= R8 and L590: ( rng C144 ) c= R9 by L587 , PARTFUN1:def 3;
L591: C144 c= [: ( dom C144 ) , ( rng C144 ) :] by RELAT_1:7;
L592: [: ( dom C144 ) , ( rng C144 ) :] c= [: R8 , R9 :] by L589 , L590 , ZFMISC_1:96;
L593: C144 c= [: R8 , R9 :] by L592 , L591 , XBOOLE_1:1;
thus L594: thesis by L593 , L588;
end;
theorem
L595: (for R8 being set holds (for R9 being set holds ((R8 is  finite & R9 is  finite) implies ( PFuncs (R8 , R9) ) is  finite)))
proof
let R8 being set;
let R9 being set;
assume that
L596: R8 is  finite
and
L597: R9 is  finite;
L598: ( PFuncs (R8 , R9) ) c= ( bool [: R8 , R9 :] ) by L586;
thus L599: thesis by L598 , L596 , L597;
end;
registration
cluster  functional  finite non  empty for set;
existence
proof
set D71 = the  finite non  empty set;
take D72 = ( PFuncs (D71 , D71) );
thus L600: D72 is  functional;
thus L601: D72 is  finite by L595;
thus L602: thesis;
end;
end;
begin
registration
let C145 being set;
cluster  ->  FinSequence-yielding for (FinSequence of ( C145 * ));
coherence
proof
let C146 being (FinSequence of ( C145 * ));
let C147 being set;
assume L604: C147 in ( dom C146 );
reconsider D73 = C147 as (Element of ( NAT )) by L604;
thus L605: thesis;
end;
end;
registration
cluster  FinSequence-yielding ->  Function-yielding for Function;
coherence
proof
let C148 being Function;
assume L607: C148 is  FinSequence-yielding;
let C149 being set;
thus L608: thesis by L607 , L539;
end;
end;
begin
theorem
L610: (for B136 being set holds (for B137 being Relation holds (( field B137 ) c= B136 implies B137 is (Relation of B136))))
proof
let C150 being set;
let C151 being Relation;
assume L611: ( field C151 ) c= C150;
L612: C151 c= [: C150 , C150 :]
proof
let C152 , C153 being set;
assume L613: [ C152 , C153 ] in C151;
L614: (C152 in ( field C151 ) & C153 in ( field C151 )) by L613 , RELAT_1:15;
thus L615: thesis by L614 , L611 , ZFMISC_1:def 2;
end;
thus L616: thesis by L612;
end;
registration
let C154 being set;
let C155 being (ManySortedSet of C154);
let C156 , C157 being set;
cluster ( C155 +* (C156 , C157) ) -> C154 -defined;
coherence
proof
L617: ( dom ( C155 +* (C156 , C157) ) ) = ( dom C155 ) by FUNCT_7:30
.= C154 by PARTFUN1:def 2;
thus L618: thesis by L617 , RELAT_1:def 18;
end;
end;
registration
let C158 being set;
let C159 being (ManySortedSet of C158);
let C160 , C161 being set;
cluster ( C159 +* (C160 , C161) ) ->  total for C158 -defined C158 -defined C158 -defined C158 -defined Function;
coherence
proof
L620: ( dom ( C159 +* (C160 , C161) ) ) = ( dom C159 ) by FUNCT_7:30
.= C158 by PARTFUN1:def 2;
thus L621: thesis by L620 , PARTFUN1:def 2;
end;
end;
theorem
L623: (for B138 being  one-to-one Function holds ( card B138 ) = ( card ( rng B138 ) ))
proof
let C162 being  one-to-one Function;
L624: (( rng C162 ) = ( dom ( C162 " ) ) & ( dom C162 ) = ( rng ( C162 " ) )) by FUNCT_1:33;
L625: (( card ( rng C162 ) ) c= ( card ( dom C162 ) ) & ( card ( rng ( C162 " ) ) ) c= ( card ( dom ( C162 " ) ) )) by CARD_2:61;
L626: ( card ( rng C162 ) ) = ( card ( dom C162 ) ) by L625 , L624 , XBOOLE_0:def 10;
thus L627: thesis by L626 , CARD_1:62;
end;
definition
let C163 being set;
let C164 being set;
let C165 being non  empty (FinSequenceSet of C163);
let C166 being (PartFunc of C164 , C165);
let C167 being set;
redefine func C166 /. C167 -> (Element of C165);

coherence;
end;
registration
let C168 being set;
cluster  being_linear-order  well-ordering for (Order of C168);
existence
proof
consider C169 being Relation such that L629: C169 is  well-ordering and L630: ( field C169 ) = C168 by WELLSET1:6;
reconsider D74 = C169 as (Relation of C168) by L630 , L610;
L631: D74 is  connected by L629 , WELLORD1:def 4;
L632: D74 is  reflexive by L629 , WELLORD1:def 4;
L633: D74 is_reflexive_in C168 by L632 , L630 , RELAT_2:def 9;
L634: ( dom D74 ) = C168 by L633 , ORDERS_1:13;
reconsider D75 = D74 as (Order of C168) by L634 , L629 , PARTFUN1:def 2 , WELLORD1:def 4;
take D75;
thus L635: thesis by L629 , L631 , ORDERS_1:def 5;
end;
end;
theorem
L637: (for B139 being non  empty set holds (for B140 being non  empty  finite (Subset of B139) holds (for B141 being (Order of B139) holds (for B142 being (Element of B139) holds ((B142 in B140 & B141 linearly_orders B140 & (for B143 being (Element of B139) holds (B143 in B140 implies [ B142 , B143 ] in B141))) implies ( ( SgmX (B141 , B140) ) /. 1 ) = B142)))))
proof
let C170 being non  empty set;
let C171 being non  empty  finite (Subset of C170);
let C172 being (Order of C170);
let C173 being (Element of C170);
assume that
L638: C173 in C171
and
L639: C172 linearly_orders C171
and
L640: (for B144 being (Element of C170) holds (B144 in C171 implies [ C173 , B144 ] in C172))
and
L641: ( ( SgmX (C172 , C171) ) /. 1 ) <> C173;
L642: C171 = ( rng ( SgmX (C172 , C171) ) ) by L639 , L136;
consider C174 being (Element of ( NAT )) such that L643: C174 in ( dom ( SgmX (C172 , C171) ) ) and L644: ( ( SgmX (C172 , C171) ) /. C174 ) = C173 by L642 , L638 , PARTFUN2:2;
L645: ( SgmX (C172 , C171) ) is non  empty by L639 , L136 , RELAT_1:38;
L646: 1 in ( dom ( SgmX (C172 , C171) ) ) by L645 , FINSEQ_5:6;
L647: ( ( SgmX (C172 , C171) ) /. 1 ) in C171 by L646 , L642 , PARTFUN2:2;
L648: [ C173 , ( ( SgmX (C172 , C171) ) /. 1 ) ] in C172 by L647 , L640;
L649: ( field C172 ) = C170 by ORDERS_1:12;
L650: C172 is_antisymmetric_in C170 by L649 , RELAT_2:def 12;
L651: 1 <= C174 by L643 , FINSEQ_3:25;
L652: 1 < C174 by L651 , L641 , L644 , XXREAL_0:1;
L653: [ ( ( SgmX (C172 , C171) ) /. 1 ) , C173 ] in C172 by L652 , L639 , L643 , L644 , L646 , L136;
thus L654: contradiction by L653 , L641 , L648 , L650 , RELAT_2:def 4;
end;
theorem
L655: (for B145 being non  empty set holds (for B146 being non  empty  finite (Subset of B145) holds (for B147 being (Order of B145) holds (for B148 being (Element of B145) holds ((B148 in B146 & B147 linearly_orders B146 & (for B149 being (Element of B145) holds (B149 in B146 implies [ B149 , B148 ] in B147))) implies ( ( SgmX (B147 , B146) ) /. ( len ( SgmX (B147 , B146) ) ) ) = B148)))))
proof
let C175 being non  empty set;
let C176 being non  empty  finite (Subset of C175);
let C177 being (Order of C175);
let C178 being (Element of C175);
assume that
L656: C178 in C176
and
L657: C177 linearly_orders C176
and
L658: (for B150 being (Element of C175) holds (B150 in C176 implies [ B150 , C178 ] in C177))
and
L659: ( ( SgmX (C177 , C176) ) /. ( len ( SgmX (C177 , C176) ) ) ) <> C178;
set D76 = ( len ( SgmX (C177 , C176) ) );
L660: C176 = ( rng ( SgmX (C177 , C176) ) ) by L657 , L136;
consider C179 being (Element of ( NAT )) such that L661: C179 in ( dom ( SgmX (C177 , C176) ) ) and L662: ( ( SgmX (C177 , C176) ) /. C179 ) = C178 by L660 , L656 , PARTFUN2:2;
L663: ( SgmX (C177 , C176) ) is non  empty by L657 , L136 , RELAT_1:38;
L664: D76 in ( dom ( SgmX (C177 , C176) ) ) by L663 , FINSEQ_5:6;
L665: ( ( SgmX (C177 , C176) ) /. D76 ) in C176 by L664 , L660 , PARTFUN2:2;
L666: [ ( ( SgmX (C177 , C176) ) /. D76 ) , C178 ] in C177 by L665 , L658;
L667: ( field C177 ) = C175 by ORDERS_1:12;
L668: C177 is_antisymmetric_in C175 by L667 , RELAT_2:def 12;
L669: C179 <= D76 by L661 , FINSEQ_3:25;
L670: C179 < D76 by L669 , L659 , L662 , XXREAL_0:1;
L671: [ C178 , ( ( SgmX (C177 , C176) ) /. D76 ) ] in C177 by L670 , L657 , L661 , L662 , L664 , L136;
thus L672: contradiction by L671 , L659 , L666 , L668 , RELAT_2:def 4;
end;
registration
let C180 being non  empty set;
let C181 being non  empty  finite (Subset of C180);
let C182 being  being_linear-order (Order of C180);
cluster ( SgmX (C182 , C181) ) -> non  empty  one-to-one;
coherence
proof
L673: ( field C182 ) = C180 by ORDERS_1:15;
L674: C182 linearly_orders C181 by L673 , ORDERS_1:37 , ORDERS_1:38;
thus L675: thesis by L674 , L491 , L136 , RELAT_1:38;
end;
end;
registration
cluster  empty ->  FinSequence-yielding for Function;
coherence
proof
let C183 being Function;
assume that
L677: C183 is  empty;
let C184 being set;
thus L678: thesis by L677;
end;
end;
registration
let C185 , C186 being  FinSequence-yielding FinSequence;
cluster ( C185 ^^ C186 ) ->  FinSequence-like;
coherence
proof
L680: ( dom ( C185 ^^ C186 ) ) = ( ( dom C185 ) /\ ( dom C186 ) ) by L544
.= ( ( Seg ( len C185 ) ) /\ ( dom C186 ) ) by FINSEQ_1:def 3
.= ( ( Seg ( len C185 ) ) /\ ( Seg ( len C186 ) ) ) by FINSEQ_1:def 3
.= ( Seg ( min (( len C185 ) , ( len C186 )) ) ) by FINSEQ_2:2;
thus L681: thesis by L680 , FINSEQ_1:def 2;
end;
end;
registration
let C187 being (Element of ( NAT ));
let C188 being FinSequence;
cluster ( C187 |-> C188 ) ->  FinSequence-yielding;
coherence
proof
let C189 being set;
assume L683: C189 in ( dom ( C187 |-> C188 ) );
L684: C189 in ( Seg C187 ) by L683 , FUNCOP_1:13;
thus L685: thesis by L684 , FUNCOP_1:7;
end;
end;
registration
let C190 being  FinSequence-yielding FinSequence;
let C191 being set;
cluster ( C190 . C191 ) ->  FinSequence-like;
coherence
proof
per cases ;
suppose L687: (not C191 in ( dom C190 ));

thus L688: thesis by L687 , FUNCT_1:def 2;
end;
suppose L689: C191 in ( dom C190 );

thus L690: thesis by L689 , L539;
end;
end;
end;
registration
let C192 being FinSequence;
cluster ( Card C192 ) ->  FinSequence-like;
coherence
proof
L693: ( dom ( Card C192 ) ) = ( dom C192 ) by CARD_3:def 2
.= ( Seg ( len C192 ) ) by FINSEQ_1:def 3;
thus L694: thesis by L693 , FINSEQ_1:def 2;
end;
end;
registration
cluster  Cardinal-yielding for FinSequence;
existence
proof
take ( {} );
thus L696: thesis;
end;
end;
theorem
L698: (for B151 being Function holds (B151 is  Cardinal-yielding iff (for B152 being set holds (B152 in ( rng B151 ) implies B152 is Cardinal))))
proof
let C193 being Function;
thus L699:now
assume L700: C193 is  Cardinal-yielding;
let C194 being set;
assume L701: C194 in ( rng C193 );
L702: (ex B153 being set st (B153 in ( dom C193 ) & C194 = ( C193 . B153 ))) by L701 , FUNCT_1:def 3;
thus L703: C194 is Cardinal by L702 , L700 , CARD_3:def 1;
end;
assume L704: (for B154 being set holds (B154 in ( rng C193 ) implies B154 is Cardinal));
let C195 being set;
assume L705: C195 in ( dom C193 );
L706: ( C193 . C195 ) in ( rng C193 ) by L705 , FUNCT_1:def 3;
thus L707: thesis by L706 , L704;
end;
registration
let C196 , C197 being  Cardinal-yielding FinSequence;
cluster ( C196 ^ C197 ) ->  Cardinal-yielding;
coherence
proof
L708: ( rng ( C196 ^ C197 ) ) = ( ( rng C196 ) \/ ( rng C197 ) ) by FINSEQ_1:31;
L709:
now
let C198 being set;
assume L710: C198 in ( rng ( C196 ^ C197 ) );
L711: (C198 in ( rng C196 ) or C198 in ( rng C197 )) by L710 , L708 , XBOOLE_0:def 3;
thus L712: C198 is Cardinal by L711 , L698;
end;
thus L713: thesis by L709 , L698;
end;
end;
registration
cluster  ->  Cardinal-yielding for (FinSequence of ( NAT ));
coherence
proof
let C199 being (FinSequence of ( NAT ));
let C200 being set;
assume L715: C200 in ( dom C199 );
thus L716: thesis;
end;
end;
registration
cluster  Cardinal-yielding for (FinSequence of ( NAT ));
existence
proof
take ( <*> ( NAT ) );
thus L718: thesis;
end;
end;
definition
let C201 being set;
let C202 being (FinSequence of ( C201 * ));
redefine func Card C202 ->  Cardinal-yielding (FinSequence of ( NAT ));

coherence
proof
L720: ( rng ( Card C202 ) ) c= ( NAT )
proof
let C203 being set;
assume L721: C203 in ( rng ( Card C202 ) );
consider C204 being set such that L722: C204 in ( dom ( Card C202 ) ) and L723: C203 = ( ( Card C202 ) . C204 ) by L721 , FUNCT_1:def 3;
reconsider D77 = ( C202 . C204 ) as  finite set;
L724: C204 in ( dom C202 ) by L722 , CARD_3:def 2;
L725: C203 = ( card D77 ) by L724 , L723 , CARD_3:def 2;
thus L726: thesis by L725;
end;
thus L727: thesis by L720 , FINSEQ_1:def 4;
end;
end;
registration
let C205 being (FinSequence of ( NAT ));
let C206 being (Element of ( NAT ));
cluster ( C205 | C206 ) ->  Cardinal-yielding;
coherence;
end;
theorem
L730: (for B155 being Function holds (for B156 being set holds ( Card ( B155 | B156 ) ) = ( ( Card B155 ) | B156 )))
proof
let C207 being Function;
let C208 being set;
L731: ( dom ( ( Card C207 ) | C208 ) ) = ( ( dom ( Card C207 ) ) /\ C208 ) by RELAT_1:61
.= ( ( dom C207 ) /\ C208 ) by CARD_3:def 2
.= ( dom ( C207 | C208 ) ) by RELAT_1:61;
L732:
now
let C209 being set;
L733: ( dom ( C207 | C208 ) ) c= ( dom C207 ) by RELAT_1:60;
assume L734: C209 in ( dom ( C207 | C208 ) );
thus L735: ( ( ( Card C207 ) | C208 ) . C209 ) = ( ( Card C207 ) . C209 ) by L734 , L731 , FUNCT_1:47
.= ( card ( C207 . C209 ) ) by L734 , L733 , CARD_3:def 2
.= ( card ( ( C207 | C208 ) . C209 ) ) by L734 , FUNCT_1:47;
end;
thus L736: thesis by L732 , L731 , CARD_3:def 2;
end;
registration
let C210 being  empty Function;
cluster ( Card C210 ) ->  empty;
coherence
proof
L737: ( dom C210 ) is  empty;
L738: ( dom ( Card C210 ) ) is  empty by L737 , CARD_3:def 2;
thus L739: thesis by L738;
end;
end;
theorem
L741: (for B157 being set holds ( Card <* B157 *> ) = <* ( card B157 ) *>)
proof
let C211 being set;
set D78 = <* ( card C211 ) *>;
L742: ( dom D78 ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:38;
L743:
now
let C212 being set;
assume L744: C212 in ( dom D78 );
L745: C212 = 1 by L744 , L742 , TARSKI:def 1;
thus L746: ( D78 . C212 ) is Cardinal by L745 , FINSEQ_1:40;
end;
reconsider D79 = D78 as Cardinal-Function by L743 , CARD_3:def 1;
L747: ( dom <* C211 *> ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:38;
L748:
now
let C213 being set;
assume L749: C213 in ( dom <* C211 *> );
L750: C213 = 1 by L749 , L747 , TARSKI:def 1;
thus L751: ( <* ( card C211 ) *> . C213 ) = ( card C211 ) by L750 , FINSEQ_1:40
.= ( card ( <* C211 *> . C213 ) ) by L750 , FINSEQ_1:40;
end;
L752: ( Card <* C211 *> ) = D79 by L748 , L742 , L747 , CARD_3:def 2;
thus L753: thesis by L752;
end;
theorem
L754: (for B158 , B159 being FinSequence holds ( Card ( B158 ^ B159 ) ) = ( ( Card B158 ) ^ ( Card B159 ) ))
proof
let C214 , C215 being FinSequence;
L755: ( dom ( Card C215 ) ) = ( dom C215 ) by CARD_3:def 2;
L756: ( len ( Card C215 ) ) = ( len C215 ) by L755 , FINSEQ_3:29;
L757: ( dom ( Card C214 ) ) = ( dom C214 ) by CARD_3:def 2;
L758: ( len ( Card C214 ) ) = ( len C214 ) by L757 , FINSEQ_3:29;
L759:
now
let C216 being set;
assume L760: C216 in ( dom ( C214 ^ C215 ) );
reconsider D80 = C216 as (Element of ( NAT )) by L760;
L761: C216 in ( Seg ( ( len C214 ) + ( len C215 ) ) ) by L760 , FINSEQ_1:def 7;
L762: 1 <= D80 by L761 , FINSEQ_1:1;
per cases ;
suppose L763: D80 <= ( len C214 );

L764: D80 in ( dom C214 ) by L763 , L762 , FINSEQ_3:25;
thus L765: ( ( ( Card C214 ) ^ ( Card C215 ) ) . C216 ) = ( ( Card C214 ) . D80 ) by L764 , L757 , FINSEQ_1:def 7
.= ( card ( C214 . D80 ) ) by L764 , CARD_3:def 2
.= ( card ( ( C214 ^ C215 ) . C216 ) ) by L764 , FINSEQ_1:def 7;
end;
suppose L766: ( len C214 ) < D80;

L767: (not D80 in ( dom C214 )) by L766 , FINSEQ_3:25;
consider C217 being Nat such that L768: C217 in ( dom C215 ) and L769: D80 = ( ( len C214 ) + C217 ) by L767 , L760 , FINSEQ_1:25;
thus L770: ( ( ( Card C214 ) ^ ( Card C215 ) ) . C216 ) = ( ( Card C215 ) . C217 ) by L755 , L758 , L768 , L769 , FINSEQ_1:def 7
.= ( card ( C215 . C217 ) ) by L768 , CARD_3:def 2
.= ( card ( ( C214 ^ C215 ) . C216 ) ) by L768 , L769 , FINSEQ_1:def 7;
end;
end;
L772: ( dom ( ( Card C214 ) ^ ( Card C215 ) ) ) = ( Seg ( ( len ( Card C214 ) ) + ( len ( Card C215 ) ) ) ) by FINSEQ_1:def 7
.= ( dom ( C214 ^ C215 ) ) by L758 , L756 , FINSEQ_1:def 7;
thus L773: thesis by L772 , L759 , CARD_3:def 2;
end;
registration
let C218 being set;
cluster ( <*> C218 ) ->  FinSequence-yielding;
coherence;
end;
registration
let C219 being FinSequence;
cluster <* C219 *> ->  FinSequence-yielding;
coherence
proof
let C220 being set;
assume L775: C220 in ( dom <* C219 *> );
L776: C220 in { 1 } by L775 , FINSEQ_1:2 , FINSEQ_1:38;
L777: C220 = 1 by L776 , TARSKI:def 1;
thus L778: thesis by L777 , FINSEQ_1:40;
end;
end;
theorem
L780: (for B160 being Function holds (B160 is  FinSequence-yielding iff (for B161 being set holds (B161 in ( rng B160 ) implies B161 is FinSequence))))
proof
let C221 being Function;
thus L781:now
assume L782: C221 is  FinSequence-yielding;
let C222 being set;
assume L783: C222 in ( rng C221 );
L784: (ex B162 being set st (B162 in ( dom C221 ) & C222 = ( C221 . B162 ))) by L783 , FUNCT_1:def 3;
thus L785: C222 is FinSequence by L784 , L782 , L539;
end;
assume L786: (for B163 being set holds (B163 in ( rng C221 ) implies B163 is FinSequence));
let C223 being set;
assume L787: C223 in ( dom C221 );
L788: ( C221 . C223 ) in ( rng C221 ) by L787 , FUNCT_1:def 3;
thus L789: thesis by L788 , L786;
end;
registration
let C224 , C225 being  FinSequence-yielding FinSequence;
cluster ( C224 ^ C225 ) ->  FinSequence-yielding;
coherence
proof
L790: ( rng ( C224 ^ C225 ) ) = ( ( rng C224 ) \/ ( rng C225 ) ) by FINSEQ_1:31;
L791:
now
let C226 being set;
assume L792: C226 in ( rng ( C224 ^ C225 ) );
L793: (C226 in ( rng C224 ) or C226 in ( rng C225 )) by L792 , L790 , XBOOLE_0:def 3;
thus L794: C226 is FinSequence by L793 , L780;
end;
thus L795: thesis by L791 , L780;
end;
end;
registration
let C227 being set;
let C228 being  empty (FinSequence of ( C227 * ));
cluster ( FlattenSeq C228 ) ->  empty;
coherence
proof
L797: C228 = ( <*> ( C227 * ) );
L798: ( FlattenSeq C228 ) = ( <*> C227 ) by L797 , L28;
thus L799: thesis by L798;
end;
end;
theorem
L801: (for B164 being set holds (for B165 being (FinSequence of ( B164 * )) holds ( len ( FlattenSeq B165 ) ) = ( Sum ( Card B165 ) )))
proof
let C229 being set;
defpred S11[ (FinSequence of ( C229 * )) ] means ( len ( FlattenSeq $1 ) ) = ( Sum ( Card $1 ) );
L802:
now
let C230 being (FinSequence of ( C229 * ));
let C231 being (Element of ( C229 * ));
assume that
L803: S11[ C230 ];
L804: ( len ( FlattenSeq ( C230 ^ <* C231 *> ) ) ) = ( len ( ( FlattenSeq C230 ) ^ ( FlattenSeq <* C231 *> ) ) ) by L39
.= ( ( Sum ( Card C230 ) ) + ( len ( FlattenSeq <* C231 *> ) ) ) by L803 , FINSEQ_1:22
.= ( ( Sum ( Card C230 ) ) + ( len C231 ) ) by L25
.= ( Sum ( ( Card C230 ) ^ <* ( len C231 ) *> ) ) by RVSUM_1:74
.= ( Sum ( ( Card C230 ) ^ ( Card <* C231 *> ) ) ) by L741
.= ( Sum ( Card ( C230 ^ <* C231 *> ) ) ) by L754;
thus L805: S11[ ( C230 ^ <* C231 *> ) ] by L804;
end;
L806: S11[ ( <*> ( C229 * ) ) ] by RVSUM_1:72;
thus L807: (for B166 being (FinSequence of ( C229 * )) holds S11[ B166 ]) from FINSEQ_2:sch 2(L806 , L802);
end;
theorem
L808: (for B167 , B168 being set holds (for B169 being (FinSequence of ( B167 * )) holds (for B170 being (FinSequence of ( B168 * )) holds (( Card B169 ) = ( Card B170 ) implies ( len ( FlattenSeq B169 ) ) = ( len ( FlattenSeq B170 ) )))))
proof
let C232 , C233 being set;
let C234 being (FinSequence of ( C232 * ));
let C235 being (FinSequence of ( C233 * ));
assume L809: ( Card C234 ) = ( Card C235 );
thus L810: ( len ( FlattenSeq C234 ) ) = ( Sum ( Card C235 ) ) by L809 , L801
.= ( len ( FlattenSeq C235 ) ) by L801;
end;
theorem
L811: (for B171 being set holds (for B172 being (FinSequence of ( B171 * )) holds (for B173 being set holds (B173 in ( dom ( FlattenSeq B172 ) ) implies (ex B174 , B175 being (Element of ( NAT )) st (B174 in ( dom B172 ) & B175 in ( dom ( B172 . B174 ) ) & B173 = ( ( Sum ( Card ( B172 | ( B174 -' 1 ) ) ) ) + B175 ) & ( ( B172 . B174 ) . B175 ) = ( ( FlattenSeq B172 ) . B173 )))))))
proof
let C236 being set;
set D81 = ( <*> ( C236 * ) );
defpred S12[ (FinSequence of ( C236 * )) ] means (for B176 being set holds (B176 in ( dom ( FlattenSeq $1 ) ) implies (ex B177 , B178 being (Element of ( NAT )) st (B177 in ( dom $1 ) & B178 in ( dom ( $1 . B177 ) ) & B176 = ( ( Sum ( Card ( $1 | ( B177 -' 1 ) ) ) ) + B178 ) & ( ( $1 . B177 ) . B178 ) = ( ( FlattenSeq $1 ) . B176 )))));
L812: (for B179 being (FinSequence of ( C236 * )) holds (for B180 being (Element of ( C236 * )) holds (S12[ B179 ] implies S12[ ( B179 ^ <* B180 *> ) ])))
proof
let C237 being (FinSequence of ( C236 * ));
let C238 being (Element of ( C236 * ));
assume L813: S12[ C237 ];
let C239 being set;
L814: ( FlattenSeq ( C237 ^ <* C238 *> ) ) = ( ( FlattenSeq C237 ) ^ ( FlattenSeq <* C238 *> ) ) by L39
.= ( ( FlattenSeq C237 ) ^ C238 ) by L25;
L815: (( Sum ( Card C237 ) ) = ( len ( FlattenSeq C237 ) ) & ( ( C237 ^ <* C238 *> ) | ( len C237 ) ) = C237) by L801 , FINSEQ_5:23;
assume L816: C239 in ( dom ( FlattenSeq ( C237 ^ <* C238 *> ) ) );
reconsider D82 = C239 as (Element of ( NAT )) by L816;
per cases ;
suppose L817: (not C239 in ( dom ( FlattenSeq C237 ) ));

take D83 = ( ( len C237 ) + 1 );
take D84 = ( D82 -' ( Sum ( Card ( ( C237 ^ <* C238 *> ) | ( D83 -' 1 ) ) ) ) );
L818: 1 <= ( ( len C237 ) + 1 ) by NAT_1:11;
L819: ( len ( C237 ^ <* C238 *> ) ) = ( ( len C237 ) + ( len <* C238 *> ) ) by FINSEQ_1:22
.= ( ( len C237 ) + 1 ) by FINSEQ_1:39;
thus L820: D83 in ( dom ( C237 ^ <* C238 *> ) ) by L819 , L818 , FINSEQ_3:25;
L821: ( Sum ( Card ( ( C237 ^ <* C238 *> ) | ( D83 -' 1 ) ) ) ) = ( len ( FlattenSeq C237 ) ) by L815 , NAT_D:34;
L822: D82 <= ( len ( ( FlattenSeq C237 ) ^ C238 ) ) by L816 , L814 , FINSEQ_3:25;
L823: D82 <= ( ( len ( FlattenSeq C237 ) ) + ( len C238 ) ) by L822 , FINSEQ_1:22;
L824: D84 <= ( len C238 ) by L823 , L821 , NAT_D:53;
L825: 1 in ( dom <* C238 *> ) by FINSEQ_5:6;
L826: ( ( C237 ^ <* C238 *> ) . D83 ) = ( <* C238 *> . 1 ) by L825 , FINSEQ_1:def 7
.= C238 by FINSEQ_1:40;
L827: 1 <= D82 by L816 , FINSEQ_3:25;
L828: ( len ( FlattenSeq C237 ) ) < D82 by L827 , L817 , FINSEQ_3:25;
L829: ( ( len ( FlattenSeq C237 ) ) + 1 ) <= D82 by L828 , NAT_1:13;
L830: 1 <= D84 by L829 , L821 , NAT_D:55;
thus L831: D84 in ( dom ( ( C237 ^ <* C238 *> ) . D83 ) ) by L830 , L826 , L824 , FINSEQ_3:25;
thus L832: C239 = ( ( Sum ( Card ( ( C237 ^ <* C238 *> ) | ( D83 -' 1 ) ) ) ) + D84 ) by L821 , L828 , XREAL_1:235;
thus L833: thesis by L832 , L814 , L821 , L826 , L831 , FINSEQ_1:def 7;
end;
suppose L834: C239 in ( dom ( FlattenSeq C237 ) );

consider C240 , C241 being (Element of ( NAT )) such that L835: C240 in ( dom C237 ) and L836: C241 in ( dom ( C237 . C240 ) ) and L837: C239 = ( ( Sum ( Card ( C237 | ( C240 -' 1 ) ) ) ) + C241 ) and L838: ( ( C237 . C240 ) . C241 ) = ( ( FlattenSeq C237 ) . C239 ) by L834 , L813;
take C240;
take C241;
L839: ( dom C237 ) c= ( dom ( C237 ^ <* C238 *> ) ) by FINSEQ_1:26;
thus L840: C240 in ( dom ( C237 ^ <* C238 *> ) ) by L839 , L835;
thus L841: C241 in ( dom ( ( C237 ^ <* C238 *> ) . C240 ) ) by L835 , L836 , FINSEQ_1:def 7;
L842: ( C240 -' 1 ) <= C240 by NAT_D:35;
L843: C240 <= ( len C237 ) by L835 , FINSEQ_3:25;
thus L844: C239 = ( ( Sum ( Card ( ( C237 ^ <* C238 *> ) | ( C240 -' 1 ) ) ) ) + C241 ) by L843 , L837 , L842 , FINSEQ_5:22 , XXREAL_0:2;
L845: ( ( C237 ^ <* C238 *> ) . C240 ) = ( C237 . C240 ) by L835 , FINSEQ_1:def 7;
thus L846: thesis by L845 , L814 , L834 , L838 , FINSEQ_1:def 7;
end;
end;
L848: S12[ D81 ];
thus L849: (for B181 being (FinSequence of ( C236 * )) holds S12[ B181 ]) from FINSEQ_2:sch 2(L848 , L812);
end;
theorem
L850: (for B182 being set holds (for B183 being (FinSequence of ( B182 * )) holds (for B184 , B185 being (Element of ( NAT )) holds ((B184 in ( dom B183 ) & B185 in ( dom ( B183 . B184 ) )) implies (( ( Sum ( Card ( B183 | ( B184 -' 1 ) ) ) ) + B185 ) in ( dom ( FlattenSeq B183 ) ) & ( ( B183 . B184 ) . B185 ) = ( ( FlattenSeq B183 ) . ( ( Sum ( Card ( B183 | ( B184 -' 1 ) ) ) ) + B185 ) ))))))
proof
let C242 being set;
set D85 = ( <*> ( C242 * ) );
defpred S13[ (FinSequence of ( C242 * )) ] means (for B186 , B187 being (Element of ( NAT )) holds ((B186 in ( dom $1 ) & B187 in ( dom ( $1 . B186 ) )) implies (( ( Sum ( Card ( $1 | ( B186 -' 1 ) ) ) ) + B187 ) in ( dom ( FlattenSeq $1 ) ) & ( ( $1 . B186 ) . B187 ) = ( ( FlattenSeq $1 ) . ( ( Sum ( Card ( $1 | ( B186 -' 1 ) ) ) ) + B187 ) ))));
L851: (for B188 being (FinSequence of ( C242 * )) holds (for B189 being (Element of ( C242 * )) holds (S13[ B188 ] implies S13[ ( B188 ^ <* B189 *> ) ])))
proof
let C243 being (FinSequence of ( C242 * ));
let C244 being (Element of ( C242 * ));
assume L852: (for B190 , B191 being (Element of ( NAT )) holds ((B190 in ( dom C243 ) & B191 in ( dom ( C243 . B190 ) )) implies (( ( Sum ( Card ( C243 | ( B190 -' 1 ) ) ) ) + B191 ) in ( dom ( FlattenSeq C243 ) ) & ( ( C243 . B190 ) . B191 ) = ( ( FlattenSeq C243 ) . ( ( Sum ( Card ( C243 | ( B190 -' 1 ) ) ) ) + B191 ) ))));
let C245 , C246 being (Element of ( NAT ));
assume that
L853: C245 in ( dom ( C243 ^ <* C244 *> ) )
and
L854: C246 in ( dom ( ( C243 ^ <* C244 *> ) . C245 ) );
L855: ( FlattenSeq ( C243 ^ <* C244 *> ) ) = ( ( FlattenSeq C243 ) ^ ( FlattenSeq <* C244 *> ) ) by L39
.= ( ( FlattenSeq C243 ) ^ C244 ) by L25;
per cases ;
suppose L856: (not C245 in ( dom C243 ));

L857: 1 <= C245 by L853 , FINSEQ_3:25;
L858: ( len C243 ) < C245 by L857 , L856 , FINSEQ_3:25;
L859: ( ( len C243 ) + 1 ) <= C245 by L858 , NAT_1:13;
L860: ( len ( C243 ^ <* C244 *> ) ) = ( ( len C243 ) + ( len <* C244 *> ) ) by FINSEQ_1:22
.= ( ( len C243 ) + 1 ) by FINSEQ_1:40;
L861: C245 <= ( len ( C243 ^ <* C244 *> ) ) by L853 , FINSEQ_3:25;
L862: C245 = ( ( len C243 ) + 1 ) by L861 , L860 , L859 , XXREAL_0:1;
L863: ( C245 -' 1 ) = ( len C243 ) by L862 , NAT_D:34;
L864: ( ( C243 ^ <* C244 *> ) | ( C245 -' 1 ) ) = C243 by L863 , FINSEQ_5:23;
L865: ( Sum ( Card C243 ) ) = ( len ( FlattenSeq C243 ) ) by L801;
L866: 1 in ( dom <* C244 *> ) by FINSEQ_5:6;
L867: ( ( C243 ^ <* C244 *> ) . C245 ) = ( <* C244 *> . 1 ) by L866 , L862 , FINSEQ_1:def 7
.= C244 by FINSEQ_1:40;
thus L868: ( ( Sum ( Card ( ( C243 ^ <* C244 *> ) | ( C245 -' 1 ) ) ) ) + C246 ) in ( dom ( FlattenSeq ( C243 ^ <* C244 *> ) ) ) by L867 , L854 , L855 , L864 , L865 , FINSEQ_1:28;
thus L869: thesis by L854 , L855 , L867 , L864 , L865 , FINSEQ_1:def 7;
end;
suppose L870: C245 in ( dom C243 );

L871: C246 in ( dom ( C243 . C245 ) ) by L870 , L854 , FINSEQ_1:def 7;
L872: ( ( Sum ( Card ( C243 | ( C245 -' 1 ) ) ) ) + C246 ) in ( dom ( FlattenSeq C243 ) ) by L871 , L852 , L870;
L873: ( C245 -' 1 ) <= C245 by NAT_D:35;
L874: C245 <= ( len C243 ) by L870 , FINSEQ_3:25;
L875: ( ( C243 ^ <* C244 *> ) | ( C245 -' 1 ) ) = ( C243 | ( C245 -' 1 ) ) by L874 , L873 , FINSEQ_5:22 , XXREAL_0:2;
L876: ( dom ( FlattenSeq C243 ) ) c= ( dom ( FlattenSeq ( C243 ^ <* C244 *> ) ) ) by L855 , FINSEQ_1:26;
thus L877: ( ( Sum ( Card ( ( C243 ^ <* C244 *> ) | ( C245 -' 1 ) ) ) ) + C246 ) in ( dom ( FlattenSeq ( C243 ^ <* C244 *> ) ) ) by L876 , L875 , L872;
thus L878: ( ( ( C243 ^ <* C244 *> ) . C245 ) . C246 ) = ( ( C243 . C245 ) . C246 ) by L870 , FINSEQ_1:def 7
.= ( ( FlattenSeq C243 ) . ( ( Sum ( Card ( C243 | ( C245 -' 1 ) ) ) ) + C246 ) ) by L852 , L870 , L871
.= ( ( FlattenSeq ( C243 ^ <* C244 *> ) ) . ( ( Sum ( Card ( ( C243 ^ <* C244 *> ) | ( C245 -' 1 ) ) ) ) + C246 ) ) by L855 , L875 , L872 , FINSEQ_1:def 7;
end;
end;
L880: S13[ D85 ];
thus L881: (for B192 being (FinSequence of ( C242 * )) holds S13[ B192 ]) from FINSEQ_2:sch 2(L880 , L851);
end;
theorem
L882: (for B193 , B194 being non  empty set holds (for B195 being (FinSequence of ( B193 * )) holds (for B196 being (Function of B193 , B194) holds ( ( ( dom B195 ) --> B196 ) ** B195 ) is (FinSequence of ( B194 * )))))
proof
let C247 , C248 being non  empty set;
let C249 being (FinSequence of ( C247 * ));
let C250 being (Function of C247 , C248);
set D86 = ( ( ( dom C249 ) --> C250 ) ** C249 );
L883: ( dom D86 ) = ( ( dom ( ( dom C249 ) --> C250 ) ) /\ ( dom C249 ) ) by PBOOLE:def 19
.= ( ( dom C249 ) /\ ( dom C249 ) ) by FUNCOP_1:13
.= ( dom C249 );
L884: ( rng D86 ) c= ( C248 * )
proof
let C251 being set;
assume L885: C251 in ( rng D86 );
consider C252 being set such that L886: C252 in ( dom D86 ) and L887: C251 = ( D86 . C252 ) by L885 , FUNCT_1:def 3;
reconsider D87 = C252 as (Element of ( NAT )) by L883 , L886;
L888: ( C249 . D87 ) in ( C247 * ) by L883 , L886 , FINSEQ_2:11;
L889: ( C249 . D87 ) is (FinSequence of C247) by L888 , FINSEQ_1:def 11;
L890: C251 = ( ( ( ( dom C249 ) --> C250 ) . D87 ) * ( C249 . D87 ) ) by L886 , L887 , PBOOLE:def 19
.= ( C250 * ( C249 . D87 ) ) by L883 , L886 , FUNCOP_1:7;
L891: C251 is (FinSequence of C248) by L890 , L889 , FINSEQ_2:32;
thus L892: thesis by L891 , FINSEQ_1:def 11;
end;
L893: ( dom D86 ) = ( Seg ( len C249 ) ) by L883 , FINSEQ_1:def 3;
L894: D86 is  FinSequence-like by L893 , FINSEQ_1:def 2;
thus L895: thesis by L894 , L884 , FINSEQ_1:def 4;
end;
theorem
L896: (for B197 , B198 being non  empty set holds (for B199 being (FinSequence of ( B197 * )) holds (for B200 being (Function of B197 , B198) holds (ex B201 being (FinSequence of ( B198 * )) st (B201 = ( ( ( dom B199 ) --> B200 ) ** B199 ) & ( B200 * ( FlattenSeq B199 ) ) = ( FlattenSeq B201 ))))))
proof
let C253 , C254 being non  empty set;
let C255 being (FinSequence of ( C253 * ));
let C256 being (Function of C253 , C254);
reconsider D88 = ( ( ( dom C255 ) --> C256 ) ** C255 ) as (FinSequence of ( C254 * )) by L882;
take D88;
thus L897: D88 = ( ( ( dom C255 ) --> C256 ) ** C255 );
set D89 = ( FlattenSeq D88 );
set D90 = ( FlattenSeq C255 );
reconsider D91 = ( C256 * D90 ) as (FinSequence of C254);
L898:
now
L899: ( len D90 ) = ( len D91 ) by FINSEQ_2:33;
thus L900: ( dom D90 ) = ( dom D91 ) by L899 , FINSEQ_3:29;
L901: ( dom D88 ) = ( ( dom ( ( dom C255 ) --> C256 ) ) /\ ( dom C255 ) ) by PBOOLE:def 19
.= ( ( dom C255 ) /\ ( dom C255 ) ) by FUNCOP_1:13
.= ( dom C255 );
L902:
now
let C257 being set;
assume L903: C257 in ( dom C255 );
reconsider D92 = C257 as (Element of ( NAT )) by L903;
L904: ( D88 . C257 ) = ( ( ( ( dom C255 ) --> C256 ) . C257 ) * ( C255 . C257 ) ) by L901 , L903 , PBOOLE:def 19
.= ( C256 * ( C255 . C257 ) ) by L903 , FUNCOP_1:7;
L905: ( C255 . D92 ) in ( C253 * ) by L903 , FINSEQ_2:11;
reconsider D93 = ( C255 . C257 ) as (FinSequence of C253) by L905 , FINSEQ_1:def 11;
thus L906: ( ( Card C255 ) . C257 ) = ( len D93 ) by L903 , CARD_3:def 2
.= ( len ( D88 . C257 ) ) by L904 , FINSEQ_2:33
.= ( ( Card D88 ) . C257 ) by L901 , L903 , CARD_3:def 2;
end;
L907: (( dom C255 ) = ( dom ( Card C255 ) ) & ( dom C255 ) = ( dom ( Card D88 ) )) by L901 , CARD_3:def 2;
L908: ( Card C255 ) = ( Card D88 ) by L907 , L902 , FUNCT_1:2;
L909: ( len D90 ) = ( len D89 ) by L907 , L902 , L808 , FUNCT_1:2;
thus L910: ( dom D90 ) = ( dom D89 ) by L909 , FINSEQ_3:29;
let C258 being Nat;
assume L911: C258 in ( dom D90 );
consider C259 , C260 being (Element of ( NAT )) such that L912: C259 in ( dom C255 ) and L913: C260 in ( dom ( C255 . C259 ) ) and L914: C258 = ( ( Sum ( Card ( C255 | ( C259 -' 1 ) ) ) ) + C260 ) and L915: ( ( C255 . C259 ) . C260 ) = ( D90 . C258 ) by L911 , L811;
L916: ( C255 . C259 ) in ( C253 * ) by L912 , FINSEQ_2:11;
reconsider D94 = ( C255 . C259 ) as (FinSequence of C253) by L916 , FINSEQ_1:def 11;
L917: ( D88 . C259 ) = ( ( ( ( dom C255 ) --> C256 ) . C259 ) * ( C255 . C259 ) ) by L901 , L912 , PBOOLE:def 19
.= ( C256 * ( C255 . C259 ) ) by L912 , FUNCOP_1:7;
L918: ( len D94 ) = ( len ( D88 . C259 ) ) by L917 , FINSEQ_2:33;
L919: C260 in ( dom ( D88 . C259 ) ) by L918 , L913 , FINSEQ_3:29;
L920: ( C255 . C259 ) in ( C253 * ) by L912 , FINSEQ_2:11;
L921: (( dom C256 ) = C253 & ( C255 . C259 ) is (FinSequence of C253)) by L920 , FINSEQ_1:def 11 , FUNCT_2:def 1;
L922: ( rng ( C255 . C259 ) ) c= ( dom C256 ) by L921 , FINSEQ_1:def 4;
L923: C260 in ( dom ( C256 * ( C255 . C259 ) ) ) by L922 , L913 , RELAT_1:27;
L924: ( Card ( D88 | ( C259 -' 1 ) ) ) = ( Card ( D88 | ( Seg ( C259 -' 1 ) ) ) ) by FINSEQ_1:def 15
.= ( ( Card C255 ) | ( Seg ( C259 -' 1 ) ) ) by L908 , L730
.= ( Card ( C255 | ( Seg ( C259 -' 1 ) ) ) ) by L730
.= ( Card ( C255 | ( C259 -' 1 ) ) ) by FINSEQ_1:def 15;
L925: ( D89 . C258 ) = ( ( D88 . C259 ) . C260 ) by L924 , L901 , L912 , L914 , L919 , L850
.= ( ( ( ( ( dom C255 ) --> C256 ) . C259 ) * ( C255 . C259 ) ) . C260 ) by L901 , L912 , PBOOLE:def 19
.= ( ( C256 * ( C255 . C259 ) ) . C260 ) by L912 , FUNCOP_1:7
.= ( C256 . ( ( C255 . C259 ) . C260 ) ) by L923 , FUNCT_1:12;
thus L926: ( D91 . C258 ) = ( D89 . C258 ) by L925 , L900 , L911 , L915 , FUNCT_1:12;
end;
thus L927: thesis by L898 , FINSEQ_1:13;
end;
begin
registration
let C261 being  natural-valued Function;
let C262 being set;
let C263 being Nat;
cluster ( C261 +* (C262 , C263) ) ->  natural-valued;
coherence
proof
set D95 = ( C261 +* (C262 , C263) );
let C264 being set;
assume that
L928: C264 in ( dom D95 );
per cases ;
suppose L929: (C262 in ( dom C261 ) & C262 = C264);

thus L930: thesis by L929 , FUNCT_7:31;
end;
suppose L931: (C262 in ( dom C261 ) & C262 <> C264);

L932: ( D95 . C264 ) = ( C261 . C264 ) by L931 , FUNCT_7:32;
thus L933: thesis by L932;
end;
suppose L934: (not C262 in ( dom C261 ));

L935: ( D95 . C264 ) = ( C261 . C264 ) by L934 , FUNCT_7:def 3;
thus L936: thesis by L935;
end;
end;
end;
registration
let C265 being  real-valued Function;
let C266 being set;
let C267 being  real number;
cluster ( C265 +* (C266 , C267) ) ->  real-valued;
coherence
proof
set D96 = ( C265 +* (C266 , C267) );
let C268 being set;
assume that
L939: C268 in ( dom D96 );
per cases ;
suppose L940: (C266 in ( dom C265 ) & C266 = C268);

thus L941: thesis by L940 , FUNCT_7:31;
end;
suppose L942: (C266 in ( dom C265 ) & C266 <> C268);

L943: ( D96 . C268 ) = ( C265 . C268 ) by L942 , FUNCT_7:32;
thus L944: thesis by L943;
end;
suppose L945: (not C266 in ( dom C265 ));

L946: ( D96 . C268 ) = ( C265 . C268 ) by L945 , FUNCT_7:def 3;
thus L947: thesis by L946;
end;
end;
end;
definition
let C269 being set;
let C270 , C271 being  complex-valued (ManySortedSet of C269);
redefine func C270 + C271 -> (ManySortedSet of C269) means 
:L950: (for B202 being set holds ( it . B202 ) = ( ( C270 . B202 ) + ( C271 . B202 ) ));
coherence;
compatibility
proof
let C272 being (ManySortedSet of C269);
L951: (( dom C270 ) = C269 & ( dom C271 ) = C269) by PARTFUN1:def 2;
L952: ( dom C272 ) = ( ( dom C270 ) /\ ( dom C271 ) ) by L951 , PARTFUN1:def 2;
thus L953: (C272 = ( C270 + C271 ) implies (for B203 being set holds ( C272 . B203 ) = ( ( C270 . B203 ) + ( C271 . B203 ) )))
proof
assume L954: C272 = ( C270 + C271 );
let C273 being set;
per cases ;
suppose L955: C273 in C269;

thus L956: thesis by L955 , L951 , L952 , L954 , VALUED_1:def 1;
end;
suppose L957: (not C273 in C269);

L958: (( C270 . C273 ) = ( 0 ) & ( C271 . C273 ) = ( 0 )) by L957 , L951 , FUNCT_1:def 2;
thus L959: thesis by L958 , L951 , L952 , L957 , FUNCT_1:def 2;
end;
end;

assume L961: (for B204 being set holds ( C272 . B204 ) = ( ( C270 . B204 ) + ( C271 . B204 ) ));
L962: (for B205 being set holds (B205 in ( dom C272 ) implies ( C272 . B205 ) = ( ( C270 . B205 ) + ( C271 . B205 ) ))) by L961;
thus L963: thesis by L962 , L952 , VALUED_1:def 1;
end;
end;
definition
let C274 being set;
let C275 , C276 being  natural-valued (ManySortedSet of C274);
func C275 -' C276 -> (ManySortedSet of C274) means 
:L965: (for B206 being set holds ( it . B206 ) = ( ( C275 . B206 ) -' ( C276 . B206 ) ));
existence
proof
deffunc H6(set) = ( ( C275 . $1 ) -' ( C276 . $1 ) );
consider C277 being (ManySortedSet of C274) such that L966: (for B207 being set holds (B207 in C274 implies ( C277 . B207 ) = H6(B207))) from PBOOLE:sch 4;
take C277;
let C278 being set;
per cases ;
suppose L967: C278 in C274;

thus L968: thesis by L967 , L966;
end;
suppose L969: (not C278 in C274);

L970: ( dom C276 ) = C274 by PARTFUN1:def 2;
L971: ( dom C275 ) = C274 by PARTFUN1:def 2;
L972: ( dom C277 ) = C274 by PARTFUN1:def 2;
thus L973: ( C277 . C278 ) = ( 0 ) by L972 , L969 , FUNCT_1:def 2
.= ( ( 0 ) -' ( 0 ) ) by XREAL_1:232
.= ( ( 0 ) -' ( C276 . C278 ) ) by L969 , L970 , FUNCT_1:def 2
.= ( ( C275 . C278 ) -' ( C276 . C278 ) ) by L969 , L971 , FUNCT_1:def 2;
end;
end;
uniqueness
proof
let C279 , C280 being (ManySortedSet of C274);
assume that
L975: (for B208 being set holds ( C279 . B208 ) = ( ( C275 . B208 ) -' ( C276 . B208 ) ))
and
L976: (for B209 being set holds ( C280 . B209 ) = ( ( C275 . B209 ) -' ( C276 . B209 ) ));
L977:
now
let C281 being set;
assume L978: C281 in C274;
thus L979: ( C279 . C281 ) = ( ( C275 . C281 ) -' ( C276 . C281 ) ) by L975
.= ( C280 . C281 ) by L976;
end;
thus L980: C279 = C280 by L977 , PBOOLE:3;
end;
end;
theorem
L982: (for B210 being set holds (for B211 , B212 , B213 being  real-valued (ManySortedSet of B210) holds ((for B214 being set holds (B214 in B210 implies ( B211 . B214 ) = ( ( B212 . B214 ) + ( B213 . B214 ) ))) implies B211 = ( B212 + B213 ))))
proof
let C282 being set;
let C283 , C284 , C285 being  real-valued (ManySortedSet of C282);
assume L983: (for B215 being set holds (B215 in C282 implies ( C283 . B215 ) = ( ( C284 . B215 ) + ( C285 . B215 ) )));
L984:
now
let C286 being set;
per cases ;
suppose L985: C286 in C282;

thus L986: ( C283 . C286 ) = ( ( C284 . C286 ) + ( C285 . C286 ) ) by L985 , L983;
end;
suppose L987: (not C286 in C282);

L988: ( dom C285 ) = C282 by PARTFUN1:def 2;
L989: ( dom C284 ) = C282 by PARTFUN1:def 2;
L990: ( dom C283 ) = C282 by PARTFUN1:def 2;
thus L991: ( C283 . C286 ) = ( (( 0 ) qua Nat) + (( 0 ) qua Nat) ) by L990 , L987 , FUNCT_1:def 2
.= ( (( 0 ) qua Nat) + ( C285 . C286 ) ) by L987 , L988 , FUNCT_1:def 2
.= ( ( C284 . C286 ) + ( C285 . C286 ) ) by L987 , L989 , FUNCT_1:def 2;
end;
end;
thus L993: thesis by L984 , L950;
end;
theorem
L994: (for B216 being set holds (for B217 , B218 , B219 being  natural-valued (ManySortedSet of B216) holds ((for B220 being set holds (B220 in B216 implies ( B217 . B220 ) = ( ( B218 . B220 ) -' ( B219 . B220 ) ))) implies B217 = ( B218 -' B219 ))))
proof
let C287 being set;
let C288 , C289 , C290 being  natural-valued (ManySortedSet of C287);
assume L995: (for B221 being set holds (B221 in C287 implies ( C288 . B221 ) = ( ( C289 . B221 ) -' ( C290 . B221 ) )));
L996:
now
let C291 being set;
per cases ;
suppose L997: C291 in C287;

thus L998: ( C288 . C291 ) = ( ( C289 . C291 ) -' ( C290 . C291 ) ) by L997 , L995;
end;
suppose L999: (not C291 in C287);

L1000: ( dom C290 ) = C287 by PARTFUN1:def 2;
L1001: ( dom C289 ) = C287 by PARTFUN1:def 2;
L1002: ( dom C288 ) = C287 by PARTFUN1:def 2;
thus L1003: ( C288 . C291 ) = ( 0 ) by L1002 , L999 , FUNCT_1:def 2
.= ( ( 0 ) -' ( 0 ) ) by XREAL_1:232
.= ( ( 0 ) -' ( C290 . C291 ) ) by L999 , L1000 , FUNCT_1:def 2
.= ( ( C289 . C291 ) -' ( C290 . C291 ) ) by L999 , L1001 , FUNCT_1:def 2;
end;
end;
thus L1005: thesis by L996 , L965;
end;
registration
let C292 being set;
let C293 , C294 being  natural-valued (ManySortedSet of C292);
cluster ( C293 + C294 ) ->  natural-valued;
coherence;
cluster ( C293 -' C294 ) ->  natural-valued;
coherence
proof
set D97 = ( C293 -' C294 );
L1006: ( rng D97 ) c= ( NAT )
proof
let C295 being set;
assume L1007: C295 in ( rng D97 );
consider C296 being set such that L1008: C296 in ( dom D97 ) and L1009: C295 = ( D97 . C296 ) by L1007 , FUNCT_1:def 3;
L1010: ( D97 . C296 ) = ( ( C293 . C296 ) -' ( C294 . C296 ) ) by L965;
thus L1011: thesis by L1010 , L1009;
end;
thus L1012: thesis by L1006 , VALUED_0:def 6;
end;
end;
theorem
L1014: (for B222 being set holds (for B223 , B224 , B225 being  real-valued (ManySortedSet of B222) holds ( ( B223 + B224 ) + B225 ) = ( B223 + ( B224 + B225 ) )))
proof
let C297 being set;
let C298 , C299 , C300 being  real-valued (ManySortedSet of C297);
L1015:
now
let C301 being set;
assume L1016: C301 in C297;
thus L1017: ( ( ( C298 + C299 ) + C300 ) . C301 ) = ( ( ( C298 + C299 ) . C301 ) + ( C300 . C301 ) ) by L950
.= ( ( ( C298 . C301 ) + ( C299 . C301 ) ) + ( C300 . C301 ) ) by L950
.= ( ( C298 . C301 ) + ( ( C299 . C301 ) + ( C300 . C301 ) ) )
.= ( ( C298 . C301 ) + ( ( C299 + C300 ) . C301 ) ) by L950
.= ( ( C298 + ( C299 + C300 ) ) . C301 ) by L950;
end;
thus L1018: thesis by L1015 , PBOOLE:3;
end;
theorem
L1019: (for B226 being set holds (for B227 , B228 , B229 being  natural-valued (ManySortedSet of B226) holds ( ( B227 -' B228 ) -' B229 ) = ( B227 -' ( B228 + B229 ) )))
proof
let C302 being set;
let C303 , C304 , C305 being  natural-valued (ManySortedSet of C302);
L1020:
now
let C306 being set;
assume L1021: C306 in C302;
thus L1022: ( ( ( C303 -' C304 ) -' C305 ) . C306 ) = ( ( ( C303 -' C304 ) . C306 ) -' ( C305 . C306 ) ) by L965
.= ( ( ( C303 . C306 ) -' ( C304 . C306 ) ) -' ( C305 . C306 ) ) by L965
.= ( ( C303 . C306 ) -' ( ( C304 . C306 ) + ( C305 . C306 ) ) ) by NAT_2:30
.= ( ( C303 . C306 ) -' ( ( C304 + C305 ) . C306 ) ) by L950;
end;
thus L1023: thesis by L1020 , L994;
end;
begin
definition
let C307 being Function;
func support C307 means 
:L1024: (for B230 being set holds (B230 in it iff ( C307 . B230 ) <> ( 0 )));
existence
proof
defpred S14[ set ] means ( C307 . $1 ) <> ( 0 );
consider C308 being set such that L1025: (for B231 being set holds (B231 in C308 iff (B231 in ( dom C307 ) & S14[ B231 ]))) from XBOOLE_0:sch 1;
take C308;
let C309 being set;
thus L1026: (C309 in C308 implies ( C307 . C309 ) <> ( 0 )) by L1025;
assume L1027: ( C307 . C309 ) <> ( 0 );
L1028: C309 in ( dom C307 ) by L1027 , FUNCT_1:def 2;
thus L1029: thesis by L1028 , L1025 , L1027;
end;
uniqueness
proof
let C310 , C311 being set;
assume that
L1030: (for B232 being set holds (B232 in C310 iff ( C307 . B232 ) <> ( 0 )))
and
L1031: (for B233 being set holds (B233 in C311 iff ( C307 . B233 ) <> ( 0 )));
L1032: (for B234 being set holds (B234 in C310 iff B234 in C311))
proof
let C312 being set;
L1033: (C312 in C310 iff ( C307 . C312 ) <> ( 0 )) by L1030;
thus L1034: thesis by L1033 , L1031;
end;
thus L1035: thesis by L1032 , TARSKI:1;
end;
end;
theorem
L1037: (for B235 being Function holds ( support B235 ) c= ( dom B235 ))
proof
let C313 being Function;
let C314 being set;
assume L1038: C314 in ( support C313 );
L1039: ( C313 . C314 ) <> ( 0 ) by L1038 , L1024;
thus L1040: thesis by L1039 , FUNCT_1:def 2;
end;
definition
let C315 being Function;
attr C315 is  finite-support
means
:L1041: ( support C315 ) is  finite;
end;
registration
cluster  finite ->  finite-support for Function;
coherence
proof
let C316 being Function;
assume L1043: C316 is  finite;
L1044: ( dom C316 ) is  finite by L1043;
thus L1045: ( support C316 ) is  finite by L1044 , L1037 , FINSET_1:1;
end;
end;
registration
cluster  natural-valued  finite-support non  empty for Function;
existence
proof
take D98 = ( ( 0 ) .--> 1 );
thus L1047: D98 is  natural-valued;
thus L1048: D98 is  finite-support;
thus L1049: thesis;
end;
end;
registration
let C317 being  finite-support Function;
cluster ( support C317 ) ->  finite;
coherence by L1041;
end;
registration
let C318 being set;
cluster  finite-support for (Function of C318 , ( NAT ));
existence
proof
set D99 = ( C318 --> ( 0 ) );
L1052: ( dom D99 ) = C318 by FUNCOP_1:13;
reconsider D100 = D99 as (Function of C318 , ( NAT ));
take D100;
L1053:
now
L1054: ( support D100 ) c= ( dom D100 ) by L1037;
assume L1055: ( support D100 ) <> ( {} );
consider C319 being set such that L1056: C319 in ( support D100 ) by L1055 , XBOOLE_0:def 1;
L1057: ( D100 . C319 ) <> ( 0 ) by L1056 , L1024;
thus L1058: contradiction by L1057 , L1052 , L1056 , L1054 , FUNCOP_1:7;
end;
thus L1059: ( support D100 ) is  finite by L1053;
end;
end;
registration
let C320 being  finite-support Function;
let C321 , C322 being set;
cluster ( C320 +* (C321 , C322) ) ->  finite-support;
coherence
proof
set D101 = ( C320 +* (C321 , C322) );
L1061: ( support D101 ) c= ( ( support C320 ) \/ { C321 } )
proof
let C323 being set;
assume L1062: C323 in ( support D101 );
L1063: ( D101 . C323 ) <> ( 0 ) by L1062 , L1024;
per cases ;
suppose L1064: (C321 in ( dom C320 ) & C323 = C321);

L1065: C323 in { C321 } by L1064 , TARSKI:def 1;
thus L1066: thesis by L1065 , XBOOLE_0:def 3;
end;
suppose L1067: (C321 in ( dom C320 ) & C323 <> C321);

L1068: ( D101 . C323 ) = ( C320 . C323 ) by L1067 , FUNCT_7:32;
L1069: C323 in ( support C320 ) by L1068 , L1063 , L1024;
thus L1070: thesis by L1069 , XBOOLE_0:def 3;
end;
suppose L1071: (not C321 in ( dom C320 ));

L1072: ( D101 . C323 ) = ( C320 . C323 ) by L1071 , FUNCT_7:def 3;
L1073: C323 in ( support C320 ) by L1072 , L1063 , L1024;
thus L1074: thesis by L1073 , XBOOLE_0:def 3;
end;
end;
thus L1076: ( support ( C320 +* (C321 , C322) ) ) is  finite by L1061;
end;
end;
registration
let C324 being set;
cluster  natural-valued  finite-support for (ManySortedSet of C324);
existence
proof
set D102 = ( C324 --> ( 0 ) );
L1078: ( dom D102 ) = C324 by FUNCOP_1:13;
reconsider D103 = D102 as (ManySortedSet of C324);
take D103;
thus L1079: D103 is  natural-valued;
L1080: ( support D103 ) = ( {} )
proof
assume L1081: (not thesis);
consider C325 being set such that L1082: C325 in ( support D103 ) by L1081 , XBOOLE_0:def 1;
L1083: ( support D103 ) c= ( dom D103 ) by L1037;
L1084: ( D103 . C325 ) = ( 0 ) by L1083 , L1078 , L1082 , FUNCOP_1:7;
thus L1085: contradiction by L1084 , L1082 , L1024;
end;
thus L1086: thesis by L1080 , L1041;
end;
end;
theorem
L1088: (for B236 being set holds (for B237 , B238 being  natural-valued (ManySortedSet of B236) holds ( support ( B237 + B238 ) ) = ( ( support B237 ) \/ ( support B238 ) )))
proof
let C326 being set;
let C327 , C328 being  natural-valued (ManySortedSet of C326);
L1089:
now
let C329 being set;
thus L1090:now
assume L1091: C329 in ( ( support C327 ) \/ ( support C328 ) );
L1092: (C329 in ( support C327 ) or C329 in ( support C328 )) by L1091 , XBOOLE_0:def 3;
L1093: (( C327 . C329 ) <> ( 0 ) or ( C328 . C329 ) <> ( 0 )) by L1092 , L1024;
L1094: ( ( C327 . C329 ) + ( C328 . C329 ) ) <> ( 0 ) by L1093;
thus L1095: ( ( C327 + C328 ) . C329 ) <> ( 0 ) by L1094 , L950;
end;
assume L1096: ( ( C327 + C328 ) . C329 ) <> ( 0 );
assume L1097: (not C329 in ( ( support C327 ) \/ ( support C328 ) ));
L1098: (not C329 in ( support C327 )) by L1097 , XBOOLE_0:def 3;
L1099: ( C327 . C329 ) = ( 0 ) by L1098 , L1024;
L1100: (not C329 in ( support C328 )) by L1097 , XBOOLE_0:def 3;
L1101: ( ( C327 . C329 ) + ( C328 . C329 ) ) = ( 0 ) by L1100 , L1099 , L1024;
thus L1102: contradiction by L1101 , L1096 , L950;
end;
thus L1103: thesis by L1089 , L1024;
end;
theorem
L1104: (for B239 being set holds (for B240 , B241 being  natural-valued (ManySortedSet of B239) holds ( support ( B240 -' B241 ) ) c= ( support B240 )))
proof
let C330 being set;
let C331 , C332 being  natural-valued (ManySortedSet of C330);
thus L1105: ( support ( C331 -' C332 ) ) c= ( support C331 )
proof
let C333 being set;
assume L1106: C333 in ( support ( C331 -' C332 ) );
assume L1107: (not C333 in ( support C331 ));
L1108: ( C331 . C333 ) = ( 0 ) by L1107 , L1024;
L1109: ( ( C331 . C333 ) -' ( C332 . C333 ) ) = ( 0 ) by L1108 , NAT_2:8;
L1110: ( ( C331 -' C332 ) . C333 ) = ( 0 ) by L1109 , L965;
thus L1111: contradiction by L1110 , L1106 , L1024;
end;

end;
begin
definition
let C334 being set;
mode bag of C334
 is  natural-valued  finite-support (ManySortedSet of C334);
end;
registration
let C335 being  finite set;
cluster  ->  finite-support for (ManySortedSet of C335);
coherence
proof
let C336 being (ManySortedSet of C335);
L1107: (( support C336 ) c= ( dom C336 ) & ( dom C336 ) = C335) by L1037 , PARTFUN1:def 2;
thus L1108: ( support C336 ) is  finite by L1107;
end;
end;
registration
let C337 being set;
let C338 , C339 being (bag of C337);
cluster ( C338 + C339 ) ->  finite-support;
coherence
proof
L1110: ( support ( C338 + C339 ) ) = ( ( support C338 ) \/ ( support C339 ) ) by L1088;
thus L1111: ( support ( C338 + C339 ) ) is  finite by L1110;
end;
cluster ( C338 -' C339 ) ->  finite-support;
coherence
proof
L1112: ( support ( C338 -' C339 ) ) c= ( support C338 ) by L1104;
thus L1113: ( support ( C338 -' C339 ) ) is  finite by L1112;
end;
end;
theorem
L1115: (for B242 being set holds ( B242 --> ( 0 ) ) is (bag of B242))
proof
let C340 being set;
set D104 = ( C340 --> ( 0 ) );
L1116: ( dom D104 ) = C340 by FUNCOP_1:13;
L1117: ( support D104 ) = ( {} )
proof
assume L1118: (not thesis);
consider C341 being set such that L1119: C341 in ( support D104 ) by L1118 , XBOOLE_0:def 1;
L1120: ( support D104 ) c= ( dom D104 ) by L1037;
L1121: ( D104 . C341 ) = ( 0 ) by L1120 , L1116 , L1119 , FUNCOP_1:7;
thus L1122: contradiction by L1121 , L1119 , L1024;
end;
thus L1123: thesis by L1117 , L1041;
end;
definition
let C342 being Ordinal;
let C343 , C344 being (bag of C342);
pred C343 < C344
means
:L1124: (ex B243 being Ordinal st (( C343 . B243 ) < ( C344 . B243 ) & (for B244 being Ordinal holds (B244 in B243 implies ( C343 . B244 ) = ( C344 . B244 )))))
;asymmetry
proof
let C345 , C346 being (bag of C342);
given C347 being Ordinal such that
L1125: ( C345 . C347 ) < ( C346 . C347 )
and
L1126: (for B245 being Ordinal holds (B245 in C347 implies ( C345 . B245 ) = ( C346 . B245 )));

given C348 being Ordinal such that
L1127: ( C346 . C348 ) < ( C345 . C348 )
and
L1128: (for B246 being Ordinal holds (B246 in C348 implies ( C346 . B246 ) = ( C345 . B246 )));

per cases  by ORDINAL1:14;
suppose L1129: C347 in C348;

thus L1130: contradiction by L1129 , L1125 , L1128;
end;
suppose L1131: C348 in C347;

thus L1132: contradiction by L1131 , L1126 , L1127;
end;
suppose L1133: C348 = C347;

thus L1134: contradiction by L1133 , L1125 , L1127;
end;
end;
end;
theorem
L1137: (for B247 being Ordinal holds (for B248 , B249 , B250 being (bag of B247) holds ((B248 < B249 & B249 < B250) implies B248 < B250)))
proof
let C349 being Ordinal;
let C350 , C351 , C352 being (bag of C349);
assume that
L1138: C350 < C351
and
L1139: C351 < C352;
consider C353 being Ordinal such that L1140: ( C350 . C353 ) < ( C351 . C353 ) and L1141: (for B251 being Ordinal holds (B251 in C353 implies ( C350 . B251 ) = ( C351 . B251 ))) by L1138 , L1124;
consider C354 being Ordinal such that L1142: ( C351 . C354 ) < ( C352 . C354 ) and L1143: (for B252 being Ordinal holds (B252 in C354 implies ( C351 . B252 ) = ( C352 . B252 ))) by L1139 , L1124;
take D105 = ( C353 /\ C354 );
L1144: ((D105 c= C354 & D105 <> C354) iff D105 c< C354) by XBOOLE_0:def 8;
L1145: ((D105 c= C353 & D105 <> C353) iff D105 c< C353) by XBOOLE_0:def 8;
L1146:
now
per cases  by ORDINAL1:14;
suppose L1147: C353 in C354;

thus L1148: ( C350 . D105 ) < ( C352 . D105 ) by L1147 , L1140 , L1143 , L1145 , L1144 , ORDINAL1:11 , ORDINAL3:13 , XBOOLE_1:17;
end;
suppose L1149: C354 in C353;

thus L1150: ( C350 . D105 ) < ( C352 . D105 ) by L1149 , L1141 , L1142 , L1145 , L1144 , ORDINAL1:11 , ORDINAL3:13 , XBOOLE_1:17;
end;
suppose L1151: C354 = C353;

thus L1152: ( C350 . D105 ) < ( C352 . D105 ) by L1151 , L1140 , L1142 , XXREAL_0:2;
end;
end;
thus L1154: ( C350 . D105 ) < ( C352 . D105 ) by L1146;
let C355 being Ordinal;
L1155: D105 c= C354 by XBOOLE_1:17;
assume L1156: C355 in D105;
L1157: D105 c= C353 by XBOOLE_1:17;
thus L1158: ( C350 . C355 ) = ( C351 . C355 ) by L1157 , L1141 , L1156
.= ( C352 . C355 ) by L1143 , L1155 , L1156;
end;
definition
let C356 being Ordinal;
let C357 , C358 being (bag of C356);
pred C357 <=' C358
means
:L1159: (C357 < C358 or C357 = C358)
;reflexivity
;
end;
theorem
L1161: (for B253 being Ordinal holds (for B254 , B255 , B256 being (bag of B253) holds ((B254 <=' B255 & B255 <=' B256) implies B254 <=' B256)))
proof
let C359 being Ordinal;
let C360 , C361 , C362 being (bag of C359);
assume that
L1162: C360 <=' C361
and
L1163: C361 <=' C362;
L1164: (C361 < C362 or C361 = C362) by L1163 , L1159;
L1165: (C360 < C361 or C360 = C361) by L1162 , L1159;
L1166: (C360 < C362 or C360 <=' C362) by L1165 , L1164 , L1137;
thus L1167: thesis by L1166 , L1159;
end;
theorem
L1168: (for B257 being Ordinal holds (for B258 , B259 , B260 being (bag of B257) holds ((B258 < B259 & B259 <=' B260) implies B258 < B260)))
proof
let C363 being Ordinal;
let C364 , C365 , C366 being (bag of C363);
assume that
L1169: C364 < C365
and
L1170: C365 <=' C366;
L1171: (C365 < C366 or C365 = C366) by L1170 , L1159;
thus L1172: thesis by L1171 , L1169 , L1137;
end;
theorem
L1173: (for B261 being Ordinal holds (for B262 , B263 , B264 being (bag of B261) holds ((B262 <=' B263 & B263 < B264) implies B262 < B264)))
proof
let C367 being Ordinal;
let C368 , C369 , C370 being (bag of C367);
assume that
L1174: C368 <=' C369
and
L1175: C369 < C370;
L1176: (C368 < C369 or C368 = C369) by L1174 , L1159;
thus L1177: thesis by L1176 , L1175 , L1137;
end;
theorem
L1178: (for B265 being Ordinal holds (for B266 , B267 being (bag of B265) holds (B266 <=' B267 or B267 <=' B266)))
proof
let C371 being Ordinal;
let C372 , C373 being (bag of C371);
assume L1179: (not C372 <=' C373);
consider C374 being set such that L1180: C374 in C371 and L1181: ( C372 . C374 ) <> ( C373 . C374 ) by L1179 , PBOOLE:3;
L1182: (not C372 < C373) by L1179 , L1159;
defpred S15[ set ] means ( C372 . $1 ) <> ( C373 . $1 );
L1183: (ex B268 being Ordinal st S15[ B268 ]) by L1180 , L1181;
consider C375 being Ordinal such that L1184: S15[ C375 ] and L1185: (for B269 being Ordinal holds (S15[ B269 ] implies C375 c= B269)) from ORDINAL1:sch 1(L1183);
L1186: (for B270 being Ordinal holds (B270 in C375 implies ( C373 . B270 ) = ( C372 . B270 ))) by L1185 , ORDINAL1:5;
per cases  by L1184 , XXREAL_0:1;
suppose L1187: ( C372 . C375 ) < ( C373 . C375 );

thus L1188: thesis by L1187 , L1182 , L1186 , L1124;
end;
suppose L1189: ( C372 . C375 ) > ( C373 . C375 );

L1190: C373 < C372 by L1189 , L1186 , L1124;
thus L1191: thesis by L1190 , L1159;
end;
end;
definition
let C376 being set;
let C377 , C378 being (bag of C376);
pred C377 divides C378
means
:L1193: (for B271 being set holds ( C377 . B271 ) <= ( C378 . B271 ))
;reflexivity
;
end;
theorem
L1195: (for B272 being set holds (for B273 , B274 being (bag of B272) holds ((for B275 being set holds (B275 in B272 implies ( B273 . B275 ) <= ( B274 . B275 ))) implies B273 divides B274)))
proof
let C379 being set;
let C380 , C381 being (bag of C379);
assume L1196: (for B276 being set holds (B276 in C379 implies ( C380 . B276 ) <= ( C381 . B276 )));
let C382 being set;
per cases ;
suppose L1197: C382 in ( dom C380 );

L1198: C382 in C379 by L1197;
thus L1199: thesis by L1198 , L1196;
end;
suppose L1200: (not C382 in ( dom C380 ));

thus L1201: thesis by L1200 , FUNCT_1:def 2;
end;
end;
theorem
L1203: (for B277 being Ordinal holds (for B278 , B279 being (bag of B277) holds (B278 divides B279 implies ( ( B279 -' B278 ) + B278 ) = B279)))
proof
let C383 being Ordinal;
let C384 , C385 being (bag of C383);
assume that
L1204: C384 divides C385;
L1205:
now
let C386 being set;
assume L1206: C386 in C383;
reconsider D106 = C386 as Ordinal by L1206;
L1207: ( C384 . D106 ) <= ( C385 . D106 ) by L1204 , L1193;
thus L1208: ( ( ( C385 -' C384 ) + C384 ) . C386 ) = ( ( ( C385 -' C384 ) . C386 ) + ( C384 . C386 ) ) by L950
.= ( ( ( C385 . C386 ) -' ( C384 . C386 ) ) + ( C384 . C386 ) ) by L965
.= ( ( ( C385 . C386 ) + ( C384 . C386 ) ) -' ( C384 . C386 ) ) by L1207 , NAT_D:38
.= ( C385 . C386 ) by NAT_D:34;
end;
thus L1209: thesis by L1205 , PBOOLE:3;
end;
theorem
L1210: (for B280 being set holds (for B281 , B282 being (bag of B280) holds ( ( B282 + B281 ) -' B281 ) = B282))
proof
let C387 being set;
let C388 , C389 being (bag of C387);
L1211:
now
let C390 being set;
assume L1212: C390 in C387;
thus L1213: ( ( ( C389 + C388 ) -' C388 ) . C390 ) = ( ( ( C389 + C388 ) . C390 ) -' ( C388 . C390 ) ) by L965
.= ( ( ( C389 . C390 ) + ( C388 . C390 ) ) -' ( C388 . C390 ) ) by L950
.= ( C389 . C390 ) by NAT_D:34;
end;
thus L1214: thesis by L1211 , PBOOLE:3;
end;
theorem
L1215: (for B283 being Ordinal holds (for B284 , B285 being (bag of B283) holds (B284 divides B285 implies B284 <=' B285)))
proof
let C391 being Ordinal;
let C392 , C393 being (bag of C391);
assume that
L1216: C392 divides C393
and
L1217: (not C392 < C393);
L1218:
now
defpred S16[ set ] means ( C392 . $1 ) < ( C393 . $1 );
let C394 being set;
assume L1219: C394 in C391;
reconsider D107 = C394 as Ordinal by L1219;
assume L1220: ( C392 . C394 ) <> ( C393 . C394 );
L1221: ( C392 . D107 ) <= ( C393 . D107 ) by L1216 , L1193;
L1222: ( C392 . D107 ) < ( C393 . D107 ) by L1221 , L1220 , XXREAL_0:1;
L1223: (ex B286 being Ordinal st S16[ B286 ]) by L1222;
consider C395 being Ordinal such that L1224: S16[ C395 ] and L1225: (for B287 being Ordinal holds (S16[ B287 ] implies C395 c= B287)) from ORDINAL1:sch 1(L1223);
L1226:
now
let C396 being Ordinal;
assume L1227: C396 in C395;
L1228: ( C393 . C396 ) <= ( C392 . C396 ) by L1227 , L1225 , ORDINAL1:5;
L1229: ( C392 . C396 ) <= ( C393 . C396 ) by L1216 , L1193;
thus L1230: ( C392 . C396 ) = ( C393 . C396 ) by L1229 , L1228 , XXREAL_0:1;
end;
thus L1231: contradiction by L1226 , L1217 , L1224 , L1124;
end;
thus L1232: thesis by L1218 , PBOOLE:3;
end;
theorem
L1233: (for B288 being set holds (for B289 , B290 , B291 being (bag of B288) holds (B289 = ( B290 + B291 ) implies B290 divides B289)))
proof
let C397 being set;
let C398 , C399 , C400 being (bag of C397);
assume L1234: C398 = ( C399 + C400 );
L1235:
now
let C401 being set;
assume L1236: C401 in C397;
L1237: ( C398 . C401 ) = ( ( C399 . C401 ) + ( C400 . C401 ) ) by L1234 , L950;
thus L1238: ( C399 . C401 ) <= ( C398 . C401 ) by L1237 , NAT_1:11;
end;
thus L1239: thesis by L1235 , L1195;
end;
definition
let C402 being set;
func Bags C402 means 
:L1240: (for B292 being set holds (B292 in it iff B292 is (bag of C402)));
existence
proof
defpred S17[ set ] means $1 is (bag of C402);
consider C403 being set such that L1241: (for B293 being set holds (B293 in C403 iff (B293 in ( Funcs (C402 , ( NAT )) ) & S17[ B293 ]))) from XBOOLE_0:sch 1;
take C403;
let C404 being set;
thus L1242: (C404 in C403 implies C404 is (bag of C402)) by L1241;
assume L1243: C404 is (bag of C402);
reconsider D108 = C404 as (bag of C402) by L1243;
L1244: (( dom D108 ) = C402 & ( rng D108 ) c= ( NAT )) by PARTFUN1:def 2 , VALUED_0:def 6;
L1245: C404 in ( Funcs (C402 , ( NAT )) ) by L1244 , FUNCT_2:def 2;
thus L1246: thesis by L1245 , L1241 , L1243;
end;
uniqueness
proof
let C405 , C406 being set;
assume that
L1247: (for B294 being set holds (B294 in C405 iff B294 is (bag of C402)))
and
L1248: (for B295 being set holds (B295 in C406 iff B295 is (bag of C402)));
L1249:
now
let C407 being set;
L1250: (C407 in C405 iff C407 is (bag of C402)) by L1247;
thus L1251: (C407 in C405 iff C407 in C406) by L1250 , L1248;
end;
thus L1252: thesis by L1249 , TARSKI:1;
end;
end;
definition
let C408 being set;
redefine func Bags C408 -> (Subset of ( Bags C408 ));

coherence
proof
L1254: ( Bags C408 ) c= ( Bags C408 );
thus L1255: thesis by L1254;
end;
end;
theorem
L1257: ( Bags ( {} ) ) = { ( {} ) }
proof
L1258:
now
let C409 being set;
thus L1259:now
assume L1260: C409 in { ( {} ) };
L1261: C409 = ( {} ) by L1260 , TARSKI:def 1;
thus L1262: C409 is (bag of ( {} )) by L1261 , PARTFUN1:def 2 , RELAT_1:38 , RELAT_1:def 18;
end;
assume L1263: C409 is (bag of ( {} ));
reconsider D109 = C409 as (ManySortedSet of ( {} )) by L1263;
L1264: D109 = ( {} );
thus L1265: C409 in { ( {} ) } by L1264 , TARSKI:def 1;
end;
thus L1266: thesis by L1258 , L1240;
end;
registration
let C410 being set;
cluster ( Bags C410 ) -> non  empty;
coherence
proof
L1267: ( C410 --> ( 0 ) ) is (bag of C410) by L1115;
thus L1268: thesis by L1267 , L1240;
end;
end;
registration
let C411 being set;
cluster  ->  functional for (Subset of ( Bags C411 ));
coherence
proof
let C412 being (Subset of ( Bags C411 ));
let R7 being set;
thus L1270: thesis by L1240;
end;
end;
registration
let C413 being set;
let C414 being (Subset of ( Bags C413 ));
cluster  -> C413 -defined for (Element of C414);
coherence
proof
let C415 being (Element of C414);
per cases ;
suppose L1272: C414 is non  empty;

reconsider D110 = C414 as non  empty (Subset of ( Bags C413 )) by L1272;
reconsider D111 = C415 as (Element of D110);
L1273: D111 is (bag of C413) by L1240;
thus L1274: thesis by L1273;
end;
suppose L1275: C414 is  empty;

L1276: C415 is  empty by L1275 , SUBSET_1:def 1;
thus L1277: thesis by L1276 , RELAT_1:171;
end;
end;
end;
registration
let C416 being set;
let C417 being non  empty (Subset of ( Bags C416 ));
cluster  ->  total  natural-valued  finite-support for (Element of C417);
coherence by L1240;
end;
definition
let C418 being set;
func EmptyBag C418 -> (Element of ( Bags C418 )) equals 
( C418 --> ( 0 ) );
coherence
proof
L1281: ( C418 --> ( 0 ) ) is (bag of C418) by L1115;
thus L1282: thesis by L1281 , L1240;
end;
end;
theorem
L1284: (for B296 , B297 being set holds ( ( EmptyBag B296 ) . B297 ) = ( 0 ))
proof
let C419 , C420 being set;
L1285: ( dom ( C419 --> ( 0 ) ) ) = C419 by FUNCOP_1:13;
per cases ;
suppose L1286: C420 in C419;

thus L1287: thesis by L1286 , FUNCOP_1:7;
end;
suppose L1288: (not C420 in C419);

thus L1289: thesis by L1288 , L1285 , FUNCT_1:def 2;
end;
end;
theorem
L1291: (for B298 being set holds (for B299 being (bag of B298) holds ( B299 + ( EmptyBag B298 ) ) = B299))
proof
let C421 being set;
let C422 being (bag of C421);
L1292:
now
let C423 being set;
assume L1293: C423 in C421;
L1294: ( ( EmptyBag C421 ) . C423 ) = ( 0 ) by L1293 , FUNCOP_1:7;
thus L1295: ( ( C422 + ( EmptyBag C421 ) ) . C423 ) = ( ( C422 . C423 ) + ( ( EmptyBag C421 ) . C423 ) ) by L950
.= ( C422 . C423 ) by L1294;
end;
thus L1296: thesis by L1292 , PBOOLE:3;
end;
theorem
L1297: (for B300 being set holds (for B301 being (bag of B300) holds ( B301 -' ( EmptyBag B300 ) ) = B301))
proof
let C424 being set;
let C425 being (bag of C424);
L1298:
now
let C426 being set;
assume L1299: C426 in C424;
L1300: ( ( EmptyBag C424 ) . C426 ) = ( 0 ) by L1299 , FUNCOP_1:7;
thus L1301: ( ( C425 -' ( EmptyBag C424 ) ) . C426 ) = ( ( C425 . C426 ) -' ( ( EmptyBag C424 ) . C426 ) ) by L965
.= ( C425 . C426 ) by L1300 , NAT_D:40;
end;
thus L1302: thesis by L1298 , PBOOLE:3;
end;
theorem
L1303: (for B302 being set holds (for B303 being (bag of B302) holds ( ( EmptyBag B302 ) -' B303 ) = ( EmptyBag B302 )))
proof
let C427 being set;
let C428 being (bag of C427);
L1304:
now
let C429 being set;
assume L1305: C429 in C427;
L1306: ( ( EmptyBag C427 ) . C429 ) = ( 0 ) by L1305 , FUNCOP_1:7;
thus L1307: ( ( ( EmptyBag C427 ) -' C428 ) . C429 ) = ( ( ( EmptyBag C427 ) . C429 ) -' ( C428 . C429 ) ) by L965
.= ( ( EmptyBag C427 ) . C429 ) by L1306 , NAT_2:8;
end;
thus L1308: thesis by L1304 , PBOOLE:3;
end;
theorem
L1309: (for B304 being set holds (for B305 being (bag of B304) holds ( B305 -' B305 ) = ( EmptyBag B304 )))
proof
let C430 being set;
let C431 being (bag of C430);
L1310:
now
let C432 being set;
assume L1311: C432 in C430;
thus L1312: ( ( C431 -' C431 ) . C432 ) = ( ( C431 . C432 ) -' ( C431 . C432 ) ) by L965
.= ( 0 ) by XREAL_1:232
.= ( ( EmptyBag C430 ) . C432 ) by L1284;
end;
thus L1313: thesis by L1310 , PBOOLE:3;
end;
theorem
L1314: (for B306 being set holds (for B307 , B308 being (bag of B306) holds ((B307 divides B308 & ( B308 -' B307 ) = ( EmptyBag B306 )) implies B308 = B307)))
proof
let C433 being set;
let C434 , C435 being (bag of C433);
assume that
L1315: C434 divides C435
and
L1316: ( C435 -' C434 ) = ( EmptyBag C433 );
L1317:
now
let C436 being set;
assume L1318: C436 in C433;
L1319: ( 0 ) = ( ( C435 -' C434 ) . C436 ) by L1316 , L1284
.= ( ( C435 . C436 ) -' ( C434 . C436 ) ) by L965;
L1320: ( C435 . C436 ) <= ( C434 . C436 ) by L1319 , NAT_D:36;
L1321: ( C434 . C436 ) <= ( C435 . C436 ) by L1315 , L1193;
thus L1322: ( C435 . C436 ) = ( C434 . C436 ) by L1321 , L1320 , XXREAL_0:1;
end;
thus L1323: thesis by L1317 , PBOOLE:3;
end;
theorem
L1324: (for B309 being set holds (for B310 being (bag of B309) holds (B310 divides ( EmptyBag B309 ) implies ( EmptyBag B309 ) = B310)))
proof
let C437 being set;
let C438 being (bag of C437);
assume L1325: C438 divides ( EmptyBag C437 );
L1326:
now
let C439 being set;
assume L1327: C439 in C437;
L1328: ( ( EmptyBag C437 ) . C439 ) = ( 0 ) by L1284;
thus L1329: ( ( EmptyBag C437 ) . C439 ) = ( C438 . C439 ) by L1328 , L1325 , L1193;
end;
thus L1330: thesis by L1326 , PBOOLE:3;
end;
theorem
L1331: (for B311 being set holds (for B312 being (bag of B311) holds ( EmptyBag B311 ) divides B312))
proof
let C440 being set;
let C441 being (bag of C440);
let C442 being set;
thus L1332: thesis by L1284;
end;
theorem
L1333: (for B313 being Ordinal holds (for B314 being (bag of B313) holds ( EmptyBag B313 ) <=' B314)) by L1215 , L1331;
definition
let C443 being Ordinal;
func BagOrder C443 -> (Order of ( Bags C443 )) means 
:L1334: (for B315 , B316 being (bag of C443) holds ([ B315 , B316 ] in it iff B315 <=' B316));
existence
proof
defpred S18[ set , set ] means (ex B317 , B318 being (Element of ( Bags C443 )) st ($1 = B317 & $2 = B318 & B317 <=' B318));
consider C444 being (Relation of ( Bags C443 ) , ( Bags C443 )) such that L1335: (for B319 , B320 being set holds ([ B319 , B320 ] in C444 iff (B319 in ( Bags C443 ) & B320 in ( Bags C443 ) & S18[ B319 , B320 ]))) from RELSET_1:sch 1;
L1336: C444 is_antisymmetric_in ( Bags C443 )
proof
let C445 , C446 being set;
assume that
L1337: C445 in ( Bags C443 )
and
L1338: C446 in ( Bags C443 )
and
L1339: [ C445 , C446 ] in C444
and
L1340: [ C446 , C445 ] in C444;
L1341: (ex B321 , B322 being (Element of ( Bags C443 )) st (C446 = B321 & C445 = B322 & B321 <=' B322)) by L1335 , L1340;
consider C447 , C448 being (Element of ( Bags C443 )) such that L1342: (C445 = C447 & C446 = C448) and L1343: C447 <=' C448 by L1335 , L1339;
L1344: (C447 < C448 or C447 = C448) by L1343 , L1159;
thus L1345: thesis by L1344 , L1342 , L1341 , L1159;
end;
L1346: C444 is_reflexive_in ( Bags C443 )
proof
let C449 being set;
assume L1347: C449 in ( Bags C443 );
thus L1348: thesis by L1347 , L1335;
end;
L1349: (( dom C444 ) = ( Bags C443 ) & ( field C444 ) = ( Bags C443 )) by L1346 , ORDERS_1:13;
L1350: C444 is_transitive_in ( Bags C443 )
proof
let C450 , C451 , C452 being set;
assume that
L1351: C450 in ( Bags C443 )
and
L1352: C451 in ( Bags C443 )
and
L1353: C452 in ( Bags C443 )
and
L1354: [ C450 , C451 ] in C444
and
L1355: [ C451 , C452 ] in C444;
consider C453 , C454 being (Element of ( Bags C443 )) such that L1356: C450 = C453 and L1357: (C451 = C454 & C453 <=' C454) by L1335 , L1354;
consider C455 , C456 being (Element of ( Bags C443 )) such that L1358: C451 = C455 and L1359: C452 = C456 and L1360: C455 <=' C456 by L1335 , L1355;
reconsider D112 = C453 , D113 = C456 as (bag of C443);
L1361: D112 <=' D113 by L1357 , L1358 , L1360 , L1161;
thus L1362: thesis by L1361 , L1335 , L1356 , L1359;
end;
reconsider D114 = C444 as (Order of ( Bags C443 )) by L1350 , L1346 , L1336 , L1349 , PARTFUN1:def 2 , RELAT_2:def 9 , RELAT_2:def 12 , RELAT_2:def 16;
take D114;
let C457 , C458 being (bag of C443);
thus L1363:now
assume L1364: [ C457 , C458 ] in D114;
L1365: (ex B323 , B324 being (Element of ( Bags C443 )) st (C457 = B323 & C458 = B324 & B323 <=' B324)) by L1364 , L1335;
thus L1366: C457 <=' C458 by L1365;
end;
L1367: (C457 in ( Bags C443 ) & C458 in ( Bags C443 )) by L1240;
thus L1368: thesis by L1367 , L1335;
end;
uniqueness
proof
let C459 , C460 being (Order of ( Bags C443 ));
assume that
L1369: (for B325 , B326 being (bag of C443) holds ([ B325 , B326 ] in C459 iff B325 <=' B326))
and
L1370: (for B327 , B328 being (bag of C443) holds ([ B327 , B328 ] in C460 iff B327 <=' B328));
let C461 , C462 being set;
thus L1371:now
assume L1372: [ C461 , C462 ] in C459;
consider C463 , C464 being set such that L1373: [ C461 , C462 ] = [ C463 , C464 ] and L1374: (C463 in ( Bags C443 ) & C464 in ( Bags C443 )) by L1372 , RELSET_1:2;
reconsider D115 = C463 , D116 = C464 as (bag of C443) by L1374;
L1375: D115 <=' D116 by L1369 , L1372 , L1373;
thus L1376: [ C461 , C462 ] in C460 by L1375 , L1370 , L1373;
end;
assume L1377: [ C461 , C462 ] in C460;
consider C465 , C466 being set such that L1378: [ C461 , C462 ] = [ C465 , C466 ] and L1379: (C465 in ( Bags C443 ) & C466 in ( Bags C443 )) by L1377 , RELSET_1:2;
reconsider D117 = C465 , D118 = C466 as (bag of C443) by L1379;
L1380: D117 <=' D118 by L1370 , L1377 , L1378;
thus L1381: thesis by L1380 , L1369 , L1378;
end;
end;
L1383: (for B329 being Ordinal holds ( BagOrder B329 ) is_reflexive_in ( Bags B329 ))
proof
let C467 being Ordinal;
let C468 being set;
assume L1384: C468 in ( Bags C467 );
reconsider D119 = C468 as (bag of C467) by L1384;
L1385: D119 <=' D119;
thus L1386: thesis by L1385 , L1334;
end;
L1387: (for B330 being Ordinal holds ( BagOrder B330 ) is_antisymmetric_in ( Bags B330 ))
proof
let C469 being Ordinal;
set D120 = ( BagOrder C469 );
let C470 , C471 being set;
assume that
L1388: (C470 in ( Bags C469 ) & C471 in ( Bags C469 ))
and
L1389: [ C470 , C471 ] in D120
and
L1390: [ C471 , C470 ] in D120;
reconsider D121 = C470 , D122 = C471 as (bag of C469) by L1388;
L1391: D121 <=' D122 by L1389 , L1334;
L1392: (D121 < D122 or D121 = D122) by L1391 , L1159;
reconsider D123 = C471 , D124 = C470 as (bag of C469) by L1388;
L1393: D123 <=' D124 by L1390 , L1334;
thus L1394: thesis by L1393 , L1392 , L1159;
end;
L1395: (for B331 being Ordinal holds ( BagOrder B331 ) is_transitive_in ( Bags B331 ))
proof
let C472 being Ordinal;
set D125 = ( BagOrder C472 );
let C473 , C474 , C475 being set;
assume that
L1396: C473 in ( Bags C472 )
and
L1397: C474 in ( Bags C472 )
and
L1398: C475 in ( Bags C472 )
and
L1399: ([ C473 , C474 ] in D125 & [ C474 , C475 ] in D125);
reconsider D126 = C474 , D127 = C475 as (bag of C472) by L1397 , L1398;
reconsider D128 = C473 , D129 = C474 as (bag of C472) by L1396 , L1397;
reconsider D130 = D128 , D131 = D127 as (bag of C472);
L1400: (D128 <=' D129 & D126 <=' D127) by L1399 , L1334;
L1401: D130 <=' D131 by L1400 , L1161;
thus L1402: thesis by L1401 , L1334;
end;
L1403: (for B332 being Ordinal holds ( BagOrder B332 ) linearly_orders ( Bags B332 ))
proof
let C476 being Ordinal;
set D132 = ( BagOrder C476 );
L1404: D132 is_transitive_in ( Bags C476 ) by L1395;
L1405: D132 is_connected_in ( Bags C476 )
proof
let C477 , C478 being set;
assume that
L1406: (C477 in ( Bags C476 ) & C478 in ( Bags C476 ))
and
L1407: C477 <> C478
and
L1408: (not [ C477 , C478 ] in D132);
reconsider D133 = C477 , D134 = C478 as (bag of C476) by L1406;
L1409: (not D133 <=' D134) by L1408 , L1334;
L1410: D134 <=' D133 by L1409 , L1178;
thus L1411: thesis by L1410 , L1334;
end;
L1412: (D132 is_reflexive_in ( Bags C476 ) & D132 is_antisymmetric_in ( Bags C476 )) by L1383 , L1387;
thus L1413: thesis by L1412 , L1404 , L1405 , ORDERS_1:def 8;
end;
registration
let C479 being Ordinal;
cluster ( BagOrder C479 ) ->  being_linear-order;
coherence
proof
set D135 = ( BagOrder C479 );
L1414: D135 linearly_orders ( Bags C479 ) by L1403;
L1415: (( field D135 ) = ( Bags C479 ) & D135 is_connected_in ( Bags C479 )) by L1414 , ORDERS_1:15 , ORDERS_1:def 8;
L1416: D135 is  connected by L1415 , RELAT_2:def 14;
thus L1417: thesis by L1416 , ORDERS_1:def 5;
end;
end;
definition
let C480 being set;
let C481 being (Function of C480 , ( NAT ));
func NatMinor C481 -> (Subset of ( Funcs (C480 , ( NAT )) )) means 
:L1419: (for B333 being  natural-valued (ManySortedSet of C480) holds (B333 in it iff (for B334 being set holds (B334 in C480 implies ( B333 . B334 ) <= ( C481 . B334 )))));
existence
proof
defpred S19[ set ] means (ex B335 being  natural-valued (ManySortedSet of C480) st ($1 = B335 & (for B336 being set holds (B336 in C480 implies ( B335 . B336 ) <= ( C481 . B336 )))));
consider C482 being (Subset of ( Funcs (C480 , ( NAT )) )) such that L1420: (for B337 being set holds (B337 in C482 iff (B337 in ( Funcs (C480 , ( NAT )) ) & S19[ B337 ]))) from SUBSET_1:sch 1;
take C482;
let C483 being  natural-valued (ManySortedSet of C480);
thus L1421:now
assume L1422: C483 in C482;
L1423: (ex B338 being  natural-valued (ManySortedSet of C480) st (B338 = C483 & (for B339 being set holds (B339 in C480 implies ( B338 . B339 ) <= ( C481 . B339 ))))) by L1422 , L1420;
thus L1424: (for B340 being set holds (B340 in C480 implies ( C483 . B340 ) <= ( C481 . B340 ))) by L1423;
end;
L1425: (( dom C483 ) = C480 & ( rng C483 ) c= ( NAT )) by PARTFUN1:def 2 , VALUED_0:def 6;
L1426: C483 is (Function of C480 , ( NAT )) by L1425 , RELSET_1:4;
L1427: C483 in ( Funcs (C480 , ( NAT )) ) by L1426 , FUNCT_2:8;
assume L1428: (for B341 being set holds (B341 in C480 implies ( C483 . B341 ) <= ( C481 . B341 )));
thus L1429: thesis by L1428 , L1420 , L1427;
end;
uniqueness
proof
let C484 , C485 being (Subset of ( Funcs (C480 , ( NAT )) ));
assume that
L1430: (for B342 being  natural-valued (ManySortedSet of C480) holds (B342 in C484 iff (for B343 being set holds (B343 in C480 implies ( B342 . B343 ) <= ( C481 . B343 )))))
and
L1431: (for B344 being  natural-valued (ManySortedSet of C480) holds (B344 in C485 iff (for B345 being set holds (B345 in C480 implies ( B344 . B345 ) <= ( C481 . B345 )))));
L1432:
now
let C486 being (Element of ( Funcs (C480 , ( NAT )) ));
thus L1433:now
assume L1434: C486 in C484;
L1435: (for B346 being set holds (B346 in C480 implies ( C486 . B346 ) <= ( C481 . B346 ))) by L1434 , L1430;
thus L1436: C486 in C485 by L1435 , L1431;
end;
assume L1437: C486 in C485;
L1438: (for B347 being set holds (B347 in C480 implies ( C486 . B347 ) <= ( C481 . B347 ))) by L1437 , L1431;
thus L1439: C486 in C484 by L1438 , L1430;
end;
thus L1440: thesis by L1432 , SUBSET_1:3;
end;
end;
theorem
L1442: (for B348 being set holds (for B349 being (Function of B348 , ( NAT )) holds B349 in ( NatMinor B349 )))
proof
let C487 being set;
let C488 being (Function of C487 , ( NAT ));
L1443: (for B350 being set holds (B350 in C487 implies ( C488 . B350 ) <= ( C488 . B350 )));
thus L1444: thesis by L1443 , L1419;
end;
registration
let C489 being set;
let C490 being (Function of C489 , ( NAT ));
cluster ( NatMinor C490 ) -> non  empty  functional;
coherence by L1442;
end;
registration
let C491 being set;
let C492 being (Function of C491 , ( NAT ));
cluster  ->  natural-valued for (Element of ( NatMinor C492 ));
coherence
proof
let C493 being (Element of ( NatMinor C492 ));
L1446: ( rng C493 ) c= ( NAT ) by FUNCT_2:92;
thus L1447: thesis by L1446 , VALUED_0:def 6;
end;
end;
theorem
L1449: (for B351 being set holds (for B352 being  finite-support (Function of B351 , ( NAT )) holds ( NatMinor B352 ) c= ( Bags B351 )))
proof
let C494 being set;
let C495 being  finite-support (Function of C494 , ( NAT ));
let C496 being set;
assume L1450: C496 in ( NatMinor C495 );
reconsider D136 = C496 as (Element of ( NatMinor C495 )) by L1450;
L1451: ( dom D136 ) = C494 by FUNCT_2:92;
L1452: D136 is (ManySortedSet of C494) by L1451 , PARTFUN1:def 2 , RELAT_1:def 18;
L1453: ( support D136 ) c= ( support C495 )
proof
let C497 being set;
L1454: ( support D136 ) c= ( dom D136 ) by L1037;
assume L1455: C497 in ( support D136 );
L1456: ( D136 . C497 ) <> ( 0 ) by L1455 , L1024;
L1457: ( C495 . C497 ) <> ( 0 ) by L1456 , L1451 , L1452 , L1455 , L1454 , L1419;
thus L1458: thesis by L1457 , L1024;
end;
L1459: C496 is (bag of C494) by L1453 , L1451 , L1041 , PARTFUN1:def 2 , RELAT_1:def 18;
thus L1460: thesis by L1459 , L1240;
end;
definition
let C498 being set;
let C499 being  finite-support (Function of C498 , ( NAT ));
redefine func support C499 -> (Element of ( Fin C498 ));

coherence
proof
L1461: ( dom C499 ) = C498 by FUNCT_2:def 1;
L1462: ( support C499 ) c= C498 by L1461 , L1037;
thus L1463: thesis by L1462 , FINSUB_1:def 5;
end;
end;
theorem
L1465: (for B353 being non  empty set holds (for B354 being  finite-support (Function of B353 , ( NAT )) holds ( card ( NatMinor B354 ) ) = ( ( multnat ) $$ (( support B354 ) , ( ( addnat ) [:] (B354 , 1) )) )))
proof
let C500 being non  empty set;
defpred S20[ (Element of ( Fin C500 )) ] means (for B355 being (Function of C500 , ( NAT )) holds ((for B356 being (Element of C500) holds ((not B356 in $1) implies ( B355 . B356 ) = ( 0 ))) implies ( card ( NatMinor B355 ) ) = ( ( multnat ) $$ ($1 , ( ( addnat ) [:] (B355 , 1) )) )));
let C501 being  finite-support (Function of C500 , ( NAT ));
L1466: (for B357 being (Element of C500) holds ((not B357 in ( support C501 )) implies ( C501 . B357 ) = ( 0 ))) by L1024;
L1467: (for B358 being (Element of ( Fin C500 )) holds (for B359 being (Element of C500) holds ((S20[ B358 ] & (not B359 in B358)) implies S20[ ( B358 \/ {. B359 .} ) ])))
proof
let C502 being (Element of ( Fin C500 ));
let C503 being (Element of C500);
assume that
L1468: S20[ C502 ]
and
L1469: (not C503 in C502);
let C504 being (Function of C500 , ( NAT ));
assume that
L1470: (for B360 being (Element of C500) holds ((not B360 in ( C502 \/ { C503 } )) implies ( C504 . B360 ) = ( 0 )));
set D137 = ( C504 +* (C503 , ( 0 )) );
L1471: ( D137 | C502 ) = ( C504 | C502 ) by L1469 , FUNCT_7:92;
L1472: ( ( ( addnat ) [:] (D137 , 1) ) | C502 ) = ( ( ( addnat ) [:] (C504 , 1) ) | C502 ) by L1471 , FUNCOP_1:28;
L1473: ( ( multnat ) $$ (C502 , ( ( addnat ) [:] (D137 , 1) )) ) = ( ( multnat ) $$ (C502 , ( ( addnat ) [:] (C504 , 1) )) ) by L1472 , SETWOP_2:7;
L1474: ( dom C504 ) = C500 by FUNCT_2:def 1;
L1475: (for B361 being (Element of C500) holds ((not B361 in C502) implies ( D137 . B361 ) = ( 0 )))
proof
let C505 being (Element of C500);
assume that
L1476: (not C505 in C502);
per cases ;
suppose L1477: C505 = C503;

thus L1478: thesis by L1477 , L1474 , FUNCT_7:31;
end;
suppose L1479: C505 <> C503;

L1480:
now
assume L1481: C505 in ( C502 \/ { C503 } );
L1482: (C505 in C502 or C505 in { C503 }) by L1481 , XBOOLE_0:def 3;
thus L1483: contradiction by L1482 , L1476 , L1479 , TARSKI:def 1;
end;
thus L1484: ( D137 . C505 ) = ( C504 . C505 ) by L1479 , FUNCT_7:32
.= ( 0 ) by L1470 , L1480;
end;
end;
L1486: ( card ( NatMinor D137 ) ) = ( ( multnat ) $$ (C502 , ( ( addnat ) [:] (D137 , 1) )) ) by L1475 , L1468;
reconsider D138 = ( NatMinor D137 ) as  functional  finite non  empty set by L1486;
reconsider D139 = ( ( C504 . C503 ) + 1 ) as non  empty (Element of ( NAT ));
L1487: ( dom ( ( addnat ) [:] (C504 , 1) ) ) = C500 by FUNCT_2:def 1;
L1488: ( ( ( addnat ) [:] (C504 , 1) ) . C503 ) = ( ( addnat ) . (( C504 . C503 ) , 1) ) by L1487 , FUNCOP_1:27
.= ( ( C504 . C503 ) + 1 ) by BINOP_2:def 23;
set D140 = ( card D138 );
L1489: ( C504 . C503 ) < ( ( C504 . C503 ) + 1 ) by XREAL_1:29;
L1490: [: D138 , ( ( C504 . C503 ) + 1 ) :] , ( NatMinor C504 ) are_equipotent 
proof
deffunc H7((Element of D138) , (Element of D139)) = ( $1 +* (C503 , $2) );
L1491: (for B362 being (Element of D138) holds (for B363 being (Element of D139) holds H7(B362 , B363) in ( NatMinor C504 )))
proof
let C506 being (Element of D138);
let C507 being (Element of D139);
reconsider D141 = C506 as (Element of ( NatMinor D137 ));
L1492: (D139 c= ( NAT ) & C507 in D139);
reconsider D142 = C507 as (Element of ( NAT )) by L1492;
L1493: C506 in ( NatMinor D137 );
L1494: ( dom C506 ) = C500 by L1493 , FUNCT_2:92;
L1495: ( dom ( C506 +* (C503 , C507) ) ) = C500 by L1494 , FUNCT_7:30;
reconsider D143 = ( D141 +* (C503 , D142) ) as  natural-valued (ManySortedSet of C500) by L1495 , PARTFUN1:def 2 , RELAT_1:def 18;
L1496: (for B364 being set holds (B364 in C500 implies ( D143 . B364 ) <= ( C504 . B364 )))
proof
let C508 being set;
assume L1497: C508 in C500;
per cases ;
suppose L1498: C508 = C503;

L1499: D142 < D139 by NAT_1:44;
L1500: ( D143 . C508 ) = D142 by L1494 , L1498 , FUNCT_7:31;
thus L1501: thesis by L1500 , L1498 , L1499 , NAT_1:13;
end;
suppose L1502: C508 <> C503;

L1503: D141 is (ManySortedSet of C500) by L1494 , PARTFUN1:def 2 , RELAT_1:def 18;
L1504: ( D141 . C508 ) <= ( D137 . C508 ) by L1503 , L1497 , L1419;
L1505: ( D143 . C508 ) = ( D141 . C508 ) by L1502 , FUNCT_7:32;
thus L1506: thesis by L1505 , L1502 , L1504 , FUNCT_7:32;
end;
end;
thus L1508: thesis by L1496 , L1419;
end;
consider C509 being (Function of [: D138 , D139 :] , ( NatMinor C504 )) such that L1509: (for B365 being (Element of D138) holds (for B366 being (Element of D139) holds ( C509 . (B365 , B366) ) = H7(B365 , B366))) from FUNCT_7:sch 1(L1491);
take C509;
thus L1510: C509 is  one-to-one
proof
let C510 , C511 being set;
assume that
L1511: C510 in ( dom C509 )
and
L1512: C511 in ( dom C509 )
and
L1513: ( C509 . C510 ) = ( C509 . C511 );
consider C512 , C513 being set such that L1514: C511 = [ C512 , C513 ] by L1512 , RELAT_1:def 1;
reconsider D144 = C512 as (Element of ( NatMinor D137 )) by L1512 , L1514 , ZFMISC_1:87;
L1515: ( dom D144 ) = C500 by FUNCT_2:92;
L1516: C513 in D139 by L1512 , L1514 , ZFMISC_1:87;
consider C514 , C515 being set such that L1517: C510 = [ C514 , C515 ] by L1511 , RELAT_1:def 1;
reconsider D145 = C514 as (Element of ( NatMinor D137 )) by L1511 , L1517 , ZFMISC_1:87;
L1518: ( dom D145 ) = C500 by FUNCT_2:92;
reconsider D146 = D145 , D147 = D144 as  natural-valued (ManySortedSet of C500) by L1518 , L1515 , PARTFUN1:def 2 , RELAT_1:def 18;
L1519: C515 in D139 by L1511 , L1517 , ZFMISC_1:87;
L1520: ( D145 +* (C503 , C515) ) = ( C509 . (D145 , C515) ) by L1519 , L1509
.= ( C509 . (D144 , C513) ) by L1513 , L1517 , L1514
.= ( D144 +* (C503 , C513) ) by L1509 , L1516;
L1521:
now
let C516 being set;
assume L1522: C516 in C500;
per cases ;
suppose L1523: C516 = C503;

L1524: ( D137 . C503 ) = ( 0 ) by L1474 , FUNCT_7:31;
thus L1525: ( D146 . C516 ) = ( 0 ) by L1524 , L1523 , L1419
.= ( D147 . C516 ) by L1523 , L1524 , L1419;
end;
suppose L1526: C516 <> C503;

thus L1527: ( D146 . C516 ) = ( ( D145 +* (C503 , C515) ) . C516 ) by L1526 , FUNCT_7:32
.= ( D147 . C516 ) by L1520 , L1526 , FUNCT_7:32;
end;
end;
L1529: C515 = ( ( D145 +* (C503 , C515) ) . C503 ) by L1518 , FUNCT_7:31
.= C513 by L1520 , L1515 , FUNCT_7:31;
thus L1530: thesis by L1529 , L1517 , L1514 , L1521 , PBOOLE:3;
end;

thus L1531: ( dom C509 ) = [: D138 , ( ( C504 . C503 ) + 1 ) :] by FUNCT_2:def 1;
thus L1532: ( rng C509 ) c= ( NatMinor C504 );
thus L1533: ( NatMinor C504 ) c= ( rng C509 )
proof
let C517 being set;
assume L1534: C517 in ( NatMinor C504 );
reconsider D148 = C517 as (Element of ( NatMinor C504 )) by L1534;
L1535: ( dom D148 ) = C500 by FUNCT_2:92;
L1536: ( dom ( D148 +* (C503 , ( 0 )) ) ) = C500 by L1535 , FUNCT_7:30;
reconsider D149 = ( D148 +* (C503 , ( 0 )) ) as  natural-valued (ManySortedSet of C500) by L1536 , PARTFUN1:def 2 , RELAT_1:def 18;
L1537: D148 is (ManySortedSet of C500) by L1535 , PARTFUN1:def 2 , RELAT_1:def 18;
L1538:
now
let C518 being set;
assume L1539: C518 in C500;
per cases ;
suppose L1540: C518 = C503;

thus L1541: ( D149 . C518 ) <= ( D137 . C518 ) by L1540 , L1535 , FUNCT_7:31;
end;
suppose L1542: C518 <> C503;

L1543: ( D149 . C518 ) = ( D148 . C518 ) by L1542 , FUNCT_7:32;
L1544: ( D148 . C518 ) <= ( C504 . C518 ) by L1537 , L1539 , L1419;
thus L1545: ( D149 . C518 ) <= ( D137 . C518 ) by L1544 , L1542 , L1543 , FUNCT_7:32;
end;
end;
reconsider D150 = D149 as (Element of ( NatMinor D137 )) by L1538 , L1419;
L1547: ( D148 . C503 ) <= ( C504 . C503 ) by L1537 , L1419;
L1548: ( D148 . C503 ) < D139 by L1547 , L1489 , XXREAL_0:2;
L1549: ( D148 . C503 ) in D139 by L1548 , NAT_1:44;
L1550: [ D150 , ( D148 . C503 ) ] in ( dom C509 ) by L1549 , L1531 , ZFMISC_1:87;
L1551: D148 = ( D148 +* (C503 , ( D148 . C503 )) ) by FUNCT_7:35
.= ( D150 +* (C503 , ( D148 . C503 )) ) by FUNCT_7:34;
L1552: D148 = ( C509 . (D150 , ( D148 . C503 )) ) by L1551 , L1509 , L1549;
thus L1553: thesis by L1552 , L1550 , FUNCT_1:def 3;
end;

end;
thus L1534: ( card ( NatMinor C504 ) ) = ( card [: D138 , ( ( C504 . C503 ) + 1 ) :] ) by L1490 , CARD_1:5
.= ( D140 * ( card ( ( C504 . C503 ) + 1 ) ) ) by CARD_2:46
.= ( D140 * ( ( C504 . C503 ) + 1 ) ) by CARD_1:def 2
.= ( ( multnat ) . (( ( multnat ) $$ (C502 , ( ( addnat ) [:] (C504 , 1) )) ) , ( ( C504 . C503 ) + 1 )) ) by L1486 , L1473 , BINOP_2:def 24
.= ( ( multnat ) $$ (( C502 \/ {. C503 .} ) , ( ( addnat ) [:] (C504 , 1) )) ) by L1469 , L1488 , SETWOP_2:2;
end;
L1535: S20[ ( {}. C500 ) ]
proof
let C519 being (Function of C500 , ( NAT ));
assume that
L1536: (for B367 being (Element of C500) holds ((not B367 in ( {}. C500 )) implies ( C519 . B367 ) = ( 0 )));
L1537:
now
let C520 being set;
thus L1538:now
assume L1539: C520 in ( NatMinor C519 );
reconsider D151 = C520 as (Function of C500 , ( NAT )) by L1539 , FUNCT_2:66;
L1540:
now
let C521 being (Element of C500);
L1541: ( C519 . C521 ) = ( 0 ) by L1536;
thus L1542: ( D151 . C521 ) = ( C519 . C521 ) by L1541 , L1539 , L1419;
end;
thus L1543: C520 = C519 by L1540 , FUNCT_2:63;
end;
thus L1544: (C520 = C519 implies C520 in ( NatMinor C519 )) by L1442;
end;
L1545: ( NatMinor C519 ) = { C519 } by L1537 , TARSKI:def 1;
thus L1546: ( card ( NatMinor C519 ) ) = 1 by L1545 , CARD_1:30
.= ( ( multnat ) $$ (( {}. C500 ) , ( ( addnat ) [:] (C519 , 1) )) ) by BINOP_2:10 , SETWISEO:31;
end;
L1547: (for B368 being (Element of ( Fin C500 )) holds S20[ B368 ]) from SETWISEO:sch 2(L1535 , L1467);
thus L1548: thesis by L1547 , L1466;
end;
registration
let C522 being set;
let C523 being  finite-support (Function of C522 , ( NAT ));
cluster ( NatMinor C523 ) ->  finite;
coherence
proof
per cases ;
suppose L1549: C522 is  empty;

L1550: ( NatMinor C523 ) c= ( Funcs (( {} ) , ( NAT )) ) by L1549;
L1551: ( NatMinor C523 ) c= { ( {} ) } by L1550 , FUNCT_5:57;
thus L1552: thesis by L1551;
end;
suppose L1553: (not C522 is  empty);

reconsider D152 = C522 as non  empty set by L1553;
reconsider D153 = C523 as  finite-support (Function of D152 , ( NAT ));
L1554: ( card ( NatMinor D153 ) ) = ( ( multnat ) $$ (( support D153 ) , ( ( addnat ) [:] (D153 , 1) )) ) by L1465;
thus L1555: thesis by L1554;
end;
end;
end;
definition
let C524 being Ordinal;
let C525 being (bag of C524);
func divisors C525 -> (FinSequence of ( Bags C524 )) means 
:L1558: (ex B369 being non  empty  finite (Subset of ( Bags C524 )) st (it = ( SgmX (( BagOrder C524 ) , B369) ) & (for B370 being (bag of C524) holds (B370 in B369 iff B370 divides C525))));
existence
proof
L1559: (( dom C525 ) = C524 & ( rng C525 ) c= ( NAT )) by PARTFUN1:def 2 , VALUED_0:def 6;
reconsider D154 = C525 as  finite-support (Function of C524 , ( NAT )) by L1559 , RELSET_1:4;
reconsider D155 = ( NatMinor D154 ) as non  empty  finite (Subset of ( Bags C524 )) by L1449;
take D156 = ( SgmX (( BagOrder C524 ) , D155) );
take D155;
thus L1560: D156 = ( SgmX (( BagOrder C524 ) , D155) );
let C526 being (bag of C524);
thus L1561: (C526 in D155 implies C526 divides C525)
proof
assume L1562: C526 in D155;
L1563: (for B371 being set holds (B371 in C524 implies ( C526 . B371 ) <= ( C525 . B371 ))) by L1562 , L1419;
thus L1564: thesis by L1563 , L1195;
end;

assume L1565: C526 divides C525;
L1566: (for B372 being set holds (B372 in C524 implies ( C526 . B372 ) <= ( C525 . B372 ))) by L1565 , L1193;
thus L1567: thesis by L1566 , L1419;
end;
uniqueness
proof
let C527 , C528 being (FinSequence of ( Bags C524 ));
given C529 being non  empty  finite (Subset of ( Bags C524 )) such that
L1568: C527 = ( SgmX (( BagOrder C524 ) , C529) )
and
L1569: (for B373 being (bag of C524) holds (B373 in C529 iff B373 divides C525));

given C530 being non  empty  finite (Subset of ( Bags C524 )) such that
L1570: C528 = ( SgmX (( BagOrder C524 ) , C530) )
and
L1571: (for B374 being (bag of C524) holds (B374 in C530 iff B374 divides C525));

L1572:
now
let C531 being set;
thus L1573:now
assume L1574: C531 in C529;
reconsider D157 = C531 as (Element of ( Bags C524 )) by L1574;
L1575: D157 divides C525 by L1569 , L1574;
thus L1576: C531 in C530 by L1575 , L1571;
end;
assume L1577: C531 in C530;
reconsider D158 = C531 as (Element of ( Bags C524 )) by L1577;
L1578: D158 divides C525 by L1571 , L1577;
thus L1579: C531 in C529 by L1578 , L1569;
end;
thus L1580: thesis by L1572 , L1568 , L1570 , TARSKI:1;
end;
end;
registration
let C532 being Ordinal;
let C533 being (bag of C532);
cluster ( divisors C533 ) -> non  empty  one-to-one;
coherence
proof
L1582: (ex B375 being non  empty  finite (Subset of ( Bags C532 )) st (( divisors C533 ) = ( SgmX (( BagOrder C532 ) , B375) ) & (for B376 being (bag of C532) holds (B376 in B375 iff B376 divides C533)))) by L1558;
thus L1583: thesis by L1582;
end;
end;
theorem
L1585: (for B377 being Ordinal holds (for B378 being (Element of ( NAT )) holds (for B379 being (bag of B377) holds (B378 in ( dom ( divisors B379 ) ) implies (( ( divisors B379 ) /. B378 ) qua (Element of ( Bags B377 ))) divides B379))))
proof
let C534 being Ordinal;
let C535 being (Element of ( NAT ));
let C536 being (bag of C534);
assume L1586: C535 in ( dom ( divisors C536 ) );
L1587: (( ( divisors C536 ) /. C535 ) = ( ( divisors C536 ) . C535 ) & ( ( divisors C536 ) . C535 ) in ( rng ( divisors C536 ) )) by L1586 , FUNCT_1:def 3 , PARTFUN1:def 6;
reconsider D159 = ( ( divisors C536 ) /. C535 ) as (bag of C534);
consider C537 being non  empty  finite (Subset of ( Bags C534 )) such that L1588: ( divisors C536 ) = ( SgmX (( BagOrder C534 ) , C537) ) and L1589: (for B380 being (bag of C534) holds (B380 in C537 iff B380 divides C536)) by L1558;
L1590: ( BagOrder C534 ) linearly_orders C537 by L1403 , ORDERS_1:38;
L1591: D159 in C537 by L1590 , L1588 , L1587 , L136;
thus L1592: thesis by L1591 , L1589;
end;
theorem
L1593: (for B381 being Ordinal holds (for B382 being (bag of B381) holds (( ( divisors B382 ) /. 1 ) = ( EmptyBag B381 ) & ( ( divisors B382 ) /. ( len ( divisors B382 ) ) ) = B382)))
proof
let C538 being Ordinal;
let C539 being (bag of C538);
consider C540 being non  empty  finite (Subset of ( Bags C538 )) such that L1594: ( divisors C539 ) = ( SgmX (( BagOrder C538 ) , C540) ) and L1595: (for B383 being (bag of C538) holds (B383 in C540 iff B383 divides C539)) by L1558;
L1596:
now
let C541 being (Element of ( Bags C538 ));
assume L1597: C541 in C540;
L1598: C541 divides C539 by L1597 , L1595;
L1599: C541 <=' C539 by L1598 , L1215;
thus L1600: [ C541 , C539 ] in ( BagOrder C538 ) by L1599 , L1334;
end;
L1601:
now
let C542 being (Element of ( Bags C538 ));
assume L1602: C542 in C540;
L1603: ( EmptyBag C538 ) <=' C542 by L1215 , L1331;
thus L1604: [ ( EmptyBag C538 ) , C542 ] in ( BagOrder C538 ) by L1603 , L1334;
end;
L1605: ( BagOrder C538 ) linearly_orders C540 by L1403 , ORDERS_1:38;
L1606: ( EmptyBag C538 ) divides C539 by L1331;
L1607: ( EmptyBag C538 ) in C540 by L1606 , L1595;
thus L1608: ( ( divisors C539 ) /. 1 ) = ( EmptyBag C538 ) by L1607 , L1594 , L1605 , L1601 , L637;
L1609: C539 in C540 by L1595;
thus L1610: thesis by L1609 , L1594 , L1605 , L1596 , L655;
end;
theorem
L1611: (for B384 being Ordinal holds (for B385 being Nat holds (for B386 , B387 , B388 being (bag of B384) holds ((B385 > 1 & B385 < ( len ( divisors B386 ) )) implies (( ( divisors B386 ) /. B385 ) <> ( EmptyBag B384 ) & ( ( divisors B386 ) /. B385 ) <> B386)))))
proof
let C543 being Ordinal;
let C544 being Nat;
let C545 , C546 , C547 being (bag of C543);
L1612: (1 in ( dom ( divisors C545 ) ) & ( len ( divisors C545 ) ) in ( dom ( divisors C545 ) )) by FINSEQ_5:6;
L1613: (( ( divisors C545 ) /. 1 ) = ( EmptyBag C543 ) & ( ( divisors C545 ) /. ( len ( divisors C545 ) ) ) = C545) by L1593;
assume L1614: (C544 > 1 & C544 < ( len ( divisors C545 ) ));
L1615: C544 in ( dom ( divisors C545 ) ) by L1614 , FINSEQ_3:25;
thus L1616: thesis by L1615 , L1613 , L1612 , L1614 , PARTFUN2:10;
end;
theorem
L1617: (for B389 being Ordinal holds ( divisors ( EmptyBag B389 ) ) = <* ( EmptyBag B389 ) *>)
proof
let C548 being Ordinal;
consider C549 being non  empty  finite (Subset of ( Bags C548 )) such that L1618: ( divisors ( EmptyBag C548 ) ) = ( SgmX (( BagOrder C548 ) , C549) ) and L1619: (for B390 being (bag of C548) holds (B390 in C549 iff B390 divides ( EmptyBag C548 ))) by L1558;
L1620: C549 c= { ( EmptyBag C548 ) }
proof
let C550 being set;
assume L1621: C550 in C549;
reconsider D160 = C550 as (bag of C548) by L1621;
L1622: D160 divides ( EmptyBag C548 ) by L1619 , L1621;
L1623: D160 = ( EmptyBag C548 ) by L1622 , L1324;
thus L1624: thesis by L1623 , TARSKI:def 1;
end;
L1625: ( BagOrder C548 ) linearly_orders C549 by L1403 , ORDERS_1:38;
L1626: ( EmptyBag C548 ) in C549 by L1619;
L1627: { ( EmptyBag C548 ) } c= C549 by L1626 , ZFMISC_1:31;
L1628: C549 = { ( EmptyBag C548 ) } by L1627 , L1620 , XBOOLE_0:def 10;
L1629: ( rng ( divisors ( EmptyBag C548 ) ) ) = { ( EmptyBag C548 ) } by L1628 , L1618 , L1625 , L136;
L1630: ( len ( divisors ( EmptyBag C548 ) ) ) = ( card ( rng ( divisors ( EmptyBag C548 ) ) ) ) by L623
.= 1 by L1629 , CARD_1:30;
thus L1631: thesis by L1630 , L1629 , FINSEQ_1:39;
end;
definition
let C551 being Ordinal;
let C552 being (bag of C551);
func decomp C552 -> (FinSequence of ( 2 -tuples_on ( Bags C551 ) )) means 
:L1632: (( dom it ) = ( dom ( divisors C552 ) ) & (for B391 being (Element of ( NAT )) holds (for B392 being (bag of C551) holds ((B391 in ( dom it ) & B392 = ( ( divisors C552 ) /. B391 )) implies ( it /. B391 ) = <* B392 , ( C552 -' B392 ) *>))));
existence
proof
defpred S21[ Nat , set ] means (for B393 being (bag of C551) holds (B393 = ( ( divisors C552 ) /. $1 ) implies $2 = <* B393 , ( C552 -' B393 ) *>));
L1633: (for B394 being Nat holds (B394 in ( Seg ( len ( divisors C552 ) ) ) implies (ex B395 being (Element of ( 2 -tuples_on ( Bags C551 ) )) st S21[ B394 , B395 ])))
proof
let C553 being Nat;
assume that
L1634: C553 in ( Seg ( len ( divisors C552 ) ) );
reconsider D161 = ( ( divisors C552 ) /. C553 ) as (bag of C551);
reconsider D162 = D161 , D163 = ( C552 -' D161 ) as (Element of ( Bags C551 )) by L1240;
L1635: ( len <* D161 , ( C552 -' D161 ) *> ) = 2 by FINSEQ_1:44;
reconsider D164 = <* D162 , D163 *> as (Element of ( 2 -tuples_on ( Bags C551 ) )) by L1635 , FINSEQ_2:92;
take D164;
thus L1636: thesis;
end;
consider C554 being (FinSequence of ( 2 -tuples_on ( Bags C551 ) )) such that L1637: ( len C554 ) = ( len ( divisors C552 ) ) and L1638: (for B396 being Nat holds (B396 in ( Seg ( len ( divisors C552 ) ) ) implies S21[ B396 , ( C554 /. B396 ) ])) from FINSEQ_4:sch 1(L1633);
take C554;
thus L1639: ( dom C554 ) = ( dom ( divisors C552 ) ) by L1637 , FINSEQ_3:29;
let C555 being (Element of ( NAT ));
let C556 being (bag of C551);
assume that
L1640: C555 in ( dom C554 )
and
L1641: C556 = ( ( divisors C552 ) /. C555 );
L1642: C555 in ( Seg ( len ( divisors C552 ) ) ) by L1637 , L1640 , FINSEQ_1:def 3;
thus L1643: thesis by L1642 , L1638 , L1641;
end;
uniqueness
proof
let C557 , C558 being (FinSequence of ( 2 -tuples_on ( Bags C551 ) ));
assume that
L1644: ( dom C557 ) = ( dom ( divisors C552 ) )
and
L1645: (for B397 being (Element of ( NAT )) holds (for B398 being (bag of C551) holds ((B397 in ( dom C557 ) & B398 = ( ( divisors C552 ) /. B397 )) implies ( C557 /. B397 ) = <* B398 , ( C552 -' B398 ) *>)))
and
L1646: ( dom C558 ) = ( dom ( divisors C552 ) )
and
L1647: (for B399 being (Element of ( NAT )) holds (for B400 being (bag of C551) holds ((B399 in ( dom C558 ) & B400 = ( ( divisors C552 ) /. B399 )) implies ( C558 /. B399 ) = <* B400 , ( C552 -' B400 ) *>)));
L1648:
now
let C559 being Nat;
reconsider D165 = ( ( divisors C552 ) /. C559 ) as (bag of C551);
assume L1649: C559 in ( dom C557 );
thus L1650: ( C557 /. C559 ) = <* D165 , ( C552 -' D165 ) *> by L1649 , L1645
.= ( C558 /. C559 ) by L1644 , L1646 , L1647 , L1649;
end;
thus L1651: thesis by L1648 , L1644 , L1646 , FINSEQ_5:12;
end;
end;
theorem
L1653: (for B401 being Ordinal holds (for B402 being (Element of ( NAT )) holds (for B403 being (bag of B401) holds (B402 in ( dom ( decomp B403 ) ) implies (ex B404 , B405 being (bag of B401) st (( ( decomp B403 ) /. B402 ) = <* B404 , B405 *> & B403 = ( B404 + B405 )))))))
proof
let C560 being Ordinal;
let C561 being (Element of ( NAT ));
let C562 being (bag of C560);
reconsider D166 = ( ( divisors C562 ) /. C561 ) as (bag of C560);
assume L1654: C561 in ( dom ( decomp C562 ) );
take D166;
take ( C562 -' D166 );
thus L1655: ( ( decomp C562 ) /. C561 ) = <* D166 , ( C562 -' D166 ) *> by L1654 , L1632;
L1656: C561 in ( dom ( divisors C562 ) ) by L1654 , L1632;
thus L1657: thesis by L1656 , L1203 , L1585;
end;
theorem
L1658: (for B406 being Ordinal holds (for B407 , B408 , B409 being (bag of B406) holds (B407 = ( B408 + B409 ) implies (ex B410 being (Element of ( NAT )) st (B410 in ( dom ( decomp B407 ) ) & ( ( decomp B407 ) /. B410 ) = <* B408 , B409 *>)))))
proof
let C563 being Ordinal;
let C564 , C565 , C566 being (bag of C563);
consider C567 being non  empty  finite (Subset of ( Bags C563 )) such that L1659: ( divisors C564 ) = ( SgmX (( BagOrder C563 ) , C567) ) and L1660: (for B411 being (bag of C563) holds (B411 in C567 iff B411 divides C564)) by L1558;
L1661: ( BagOrder C563 ) linearly_orders C567 by L1403 , ORDERS_1:38;
assume L1662: C564 = ( C565 + C566 );
L1663: C565 divides C564 by L1662 , L1233;
L1664: C565 in C567 by L1663 , L1660;
L1665: C565 in ( rng ( divisors C564 ) ) by L1664 , L1659 , L1661 , L136;
consider C568 being (Element of ( NAT )) such that L1666: C568 in ( dom ( divisors C564 ) ) and L1667: ( ( divisors C564 ) /. C568 ) = C565 by L1665 , PARTFUN2:2;
take C568;
thus L1668: C568 in ( dom ( decomp C564 ) ) by L1666 , L1632;
L1669: ( ( decomp C564 ) /. C568 ) = <* C565 , ( C564 -' C565 ) *> by L1668 , L1667 , L1632;
thus L1670: thesis by L1669 , L1662 , L1210;
end;
theorem
L1671: (for B412 being Ordinal holds (for B413 being (Element of ( NAT )) holds (for B414 , B415 , B416 being (bag of B412) holds ((B413 in ( dom ( decomp B414 ) ) & ( ( decomp B414 ) /. B413 ) = <* B415 , B416 *>) implies B415 = ( ( divisors B414 ) /. B413 )))))
proof
let C569 being Ordinal;
let C570 being (Element of ( NAT ));
let C571 , C572 , C573 being (bag of C569);
reconsider D167 = ( ( divisors C571 ) /. C570 ) as (bag of C569);
assume L1672: (C570 in ( dom ( decomp C571 ) ) & ( ( decomp C571 ) /. C570 ) = <* C572 , C573 *>);
L1673: <* C572 , C573 *> = <* D167 , ( C571 -' D167 ) *> by L1672 , L1632;
thus L1674: thesis by L1673 , FINSEQ_1:77;
end;
registration
let C574 being Ordinal;
let C575 being (bag of C574);
cluster ( decomp C575 ) -> non  empty  one-to-one  FinSequence-yielding;
coherence
proof
L1675: ( dom ( divisors C575 ) ) = ( dom ( decomp C575 ) ) by L1632;
thus L1676: ( decomp C575 ) is non  empty by L1675;
L1677:
now
let C576 , C577 being (Element of ( NAT ));
assume L1678: C576 in ( dom ( decomp C575 ) );
assume L1679: C577 in ( dom ( decomp C575 ) );
consider C578 , C579 being (bag of C574) such that L1680: ( ( decomp C575 ) /. C577 ) = <* C578 , C579 *> and L1681: C575 = ( C578 + C579 ) by L1679 , L1653;
assume L1682: ( ( decomp C575 ) /. C576 ) = ( ( decomp C575 ) /. C577 );
L1683: ( ( divisors C575 ) /. C576 ) = C578 by L1682 , L1678 , L1680 , L1671
.= ( ( divisors C575 ) /. C577 ) by L1679 , L1680 , L1671;
thus L1684: C576 = C577 by L1683 , L1675 , L1678 , L1679 , PARTFUN2:10;
end;
thus L1685: ( decomp C575 ) is  one-to-one by L1677 , PARTFUN2:9;
let C580 being set;
assume L1686: C580 in ( dom ( decomp C575 ) );
reconsider D168 = C580 as (Element of ( NAT )) by L1686;
reconsider D169 = ( ( divisors C575 ) /. D168 ) as (bag of C574);
thus L1687: thesis;
end;
end;
registration
let C581 being Ordinal;
let C582 being (Element of ( Bags C581 ));
cluster ( decomp C582 ) -> non  empty  one-to-one  FinSequence-yielding;
coherence;
end;
theorem
L1690: (for B417 being Ordinal holds (for B418 being (bag of B417) holds (( ( decomp B418 ) /. 1 ) = <* ( EmptyBag B417 ) , B418 *> & ( ( decomp B418 ) /. ( len ( decomp B418 ) ) ) = <* B418 , ( EmptyBag B417 ) *>)))
proof
let C583 being Ordinal;
let C584 being (bag of C583);
reconsider D170 = ( ( divisors C584 ) /. 1 ) as (bag of C583);
L1691: (D170 = ( EmptyBag C583 ) & 1 in ( dom ( decomp C584 ) )) by L1593 , FINSEQ_5:6;
thus L1692: ( ( decomp C584 ) /. 1 ) = <* ( EmptyBag C583 ) , ( C584 -' ( EmptyBag C583 ) ) *> by L1691 , L1632
.= <* ( EmptyBag C583 ) , C584 *> by L1297;
reconsider D171 = ( ( divisors C584 ) /. ( len ( decomp C584 ) ) ) as (bag of C583);
L1693: ( dom ( decomp C584 ) ) = ( dom ( divisors C584 ) ) by L1632;
L1694: ( len ( decomp C584 ) ) = ( len ( divisors C584 ) ) by L1693 , FINSEQ_3:29;
L1695: D171 = C584 by L1694 , L1593;
L1696: ( len ( decomp C584 ) ) in ( dom ( decomp C584 ) ) by FINSEQ_5:6;
thus L1697: ( ( decomp C584 ) /. ( len ( decomp C584 ) ) ) = <* C584 , ( C584 -' C584 ) *> by L1696 , L1695 , L1632
.= <* C584 , ( EmptyBag C583 ) *> by L1309;
end;
theorem
L1698: (for B419 being Ordinal holds (for B420 being Nat holds (for B421 , B422 , B423 being (bag of B419) holds ((B420 > 1 & B420 < ( len ( decomp B421 ) ) & ( ( decomp B421 ) /. B420 ) = <* B422 , B423 *>) implies (B422 <> ( EmptyBag B419 ) & B423 <> ( EmptyBag B419 ))))))
proof
let C585 being Ordinal;
let C586 being Nat;
let C587 , C588 , C589 being (bag of C585);
assume that
L1699: (C586 > 1 & C586 < ( len ( decomp C587 ) ))
and
L1700: ( ( decomp C587 ) /. C586 ) = <* C588 , C589 *>;
reconsider D172 = ( ( divisors C587 ) /. C586 ) as (bag of C585);
L1701: C586 in ( dom ( decomp C587 ) ) by L1699 , FINSEQ_3:25;
L1702: ( ( decomp C587 ) /. C586 ) = <* D172 , ( C587 -' D172 ) *> by L1701 , L1632;
L1703: C589 = ( C587 -' D172 ) by L1702 , L1700 , FINSEQ_1:77;
L1704: ( dom ( decomp C587 ) ) = ( dom ( divisors C587 ) ) by L1632;
L1705: ( len ( decomp C587 ) ) = ( len ( divisors C587 ) ) by L1704 , FINSEQ_3:29;
L1706: C588 = D172 by L1700 , L1702 , FINSEQ_1:77;
thus L1707: C588 <> ( EmptyBag C585 ) by L1706 , L1699 , L1705 , L1611;
assume L1708: C589 = ( EmptyBag C585 );
L1709: D172 = C587 by L1708 , L1704 , L1701 , L1703 , L1314 , L1585;
thus L1710: contradiction by L1709 , L1699 , L1705 , L1611;
end;
theorem
L1711: (for B424 being Ordinal holds ( decomp ( EmptyBag B424 ) ) = <* <* ( EmptyBag B424 ) , ( EmptyBag B424 ) *> *>)
proof
let C590 being Ordinal;
L1712: ( len <* ( EmptyBag C590 ) , ( EmptyBag C590 ) *> ) = 2 by FINSEQ_1:44;
reconsider D173 = <* ( EmptyBag C590 ) , ( EmptyBag C590 ) *> as (Element of ( 2 -tuples_on ( Bags C590 ) )) by L1712 , FINSEQ_2:92;
reconsider D174 = <* D173 *> as (FinSequence of ( 2 -tuples_on ( Bags C590 ) ));
L1713: ( dom D174 ) = ( Seg 1 ) by FINSEQ_1:38;
L1714: <* ( EmptyBag C590 ) *> = ( divisors ( EmptyBag C590 ) ) by L1617;
L1715: (for B425 being (Element of ( NAT )) holds (for B426 being (bag of C590) holds ((B425 in ( dom D174 ) & B426 = ( ( divisors ( EmptyBag C590 ) ) /. B425 )) implies ( D174 /. B425 ) = <* B426 , ( ( EmptyBag C590 ) -' B426 ) *>)))
proof
let C591 being (Element of ( NAT ));
let C592 being (bag of C590);
assume that
L1716: C591 in ( dom D174 )
and
L1717: C592 = ( ( divisors ( EmptyBag C590 ) ) /. C591 );
L1718: C591 = 1 by L1713 , L1716 , FINSEQ_1:2 , TARSKI:def 1;
L1719: ( ( divisors ( EmptyBag C590 ) ) /. C591 ) = ( EmptyBag C590 ) by L1718 , L1714 , FINSEQ_4:16;
thus L1720: ( D174 /. C591 ) = D173 by L1718 , FINSEQ_4:16
.= <* C592 , ( ( EmptyBag C590 ) -' C592 ) *> by L1717 , L1719 , L1297;
end;
L1721: ( dom D174 ) = ( dom ( divisors ( EmptyBag C590 ) ) ) by L1714 , L1713 , FINSEQ_1:38;
thus L1722: thesis by L1721 , L1715 , L1632;
end;
theorem
L1723: (for B427 being Ordinal holds (for B428 being (bag of B427) holds (for B429 , B430 being (FinSequence of ( ( 3 -tuples_on ( Bags B427 ) ) * )) holds ((( dom B429 ) = ( dom ( decomp B428 ) ) & ( dom B430 ) = ( dom ( decomp B428 ) ) & (for B431 being Nat holds (B431 in ( dom B429 ) implies ( B429 . B431 ) = ( ( decomp (( (( ( decomp B428 ) /. B431 ) qua (Element of ( 2 -tuples_on ( Bags B427 ) ))) /. 1 ) qua (Element of ( Bags B427 ))) ) ^^ ( ( len ( decomp (( (( ( decomp B428 ) /. B431 ) qua (Element of ( 2 -tuples_on ( Bags B427 ) ))) /. 1 ) qua (Element of ( Bags B427 ))) ) ) |-> <* ( (( ( decomp B428 ) /. B431 ) qua (Element of ( 2 -tuples_on ( Bags B427 ) ))) /. 2 ) *> ) ))) & (for B432 being Nat holds (B432 in ( dom B430 ) implies ( B430 . B432 ) = ( ( ( len ( decomp (( (( ( decomp B428 ) /. B432 ) qua (Element of ( 2 -tuples_on ( Bags B427 ) ))) /. 2 ) qua (Element of ( Bags B427 ))) ) ) |-> <* ( (( ( decomp B428 ) /. B432 ) qua (Element of ( 2 -tuples_on ( Bags B427 ) ))) /. 1 ) *> ) ^^ ( decomp (( (( ( decomp B428 ) /. B432 ) qua (Element of ( 2 -tuples_on ( Bags B427 ) ))) /. 2 ) qua (Element of ( Bags B427 ))) ) )))) implies (ex B433 being (Permutation of ( dom ( FlattenSeq B429 ) )) st ( FlattenSeq B430 ) = ( ( FlattenSeq B429 ) * B433 ))))))
proof
let C593 being Ordinal;
let C594 being (bag of C593);
let C595 , C596 being (FinSequence of ( ( 3 -tuples_on ( Bags C593 ) ) * ));
assume that
L1724: ( dom C595 ) = ( dom ( decomp C594 ) )
and
L1725: ( dom C596 ) = ( dom ( decomp C594 ) )
and
L1726: (for B434 being Nat holds (B434 in ( dom C595 ) implies ( C595 . B434 ) = ( ( decomp (( (( ( decomp C594 ) /. B434 ) qua (Element of ( 2 -tuples_on ( Bags C593 ) ))) /. 1 ) qua (Element of ( Bags C593 ))) ) ^^ ( ( len ( decomp (( (( ( decomp C594 ) /. B434 ) qua (Element of ( 2 -tuples_on ( Bags C593 ) ))) /. 1 ) qua (Element of ( Bags C593 ))) ) ) |-> <* ( (( ( decomp C594 ) /. B434 ) qua (Element of ( 2 -tuples_on ( Bags C593 ) ))) /. 2 ) *> ) )))
and
L1727: (for B435 being Nat holds (B435 in ( dom C596 ) implies ( C596 . B435 ) = ( ( ( len ( decomp (( (( ( decomp C594 ) /. B435 ) qua (Element of ( 2 -tuples_on ( Bags C593 ) ))) /. 2 ) qua (Element of ( Bags C593 ))) ) ) |-> <* ( (( ( decomp C594 ) /. B435 ) qua (Element of ( 2 -tuples_on ( Bags C593 ) ))) /. 1 ) *> ) ^^ ( decomp (( (( ( decomp C594 ) /. B435 ) qua (Element of ( 2 -tuples_on ( Bags C593 ) ))) /. 2 ) qua (Element of ( Bags C593 ))) ) )));
set D175 = ( FlattenSeq C595 );
set D176 = ( FlattenSeq C596 );
set D177 = ( decomp C594 );
L1728: D176 is  one-to-one
proof
let C597 , C598 being set;
assume that
L1729: C597 in ( dom D176 )
and
L1730: C598 in ( dom D176 )
and
L1731: ( D176 . C597 ) = ( D176 . C598 );
consider C599 , C600 being (Element of ( NAT )) such that L1732: C599 in ( dom C596 ) and L1733: C600 in ( dom ( C596 . C599 ) ) and L1734: C597 = ( ( Sum ( Card ( C596 | ( C599 -' 1 ) ) ) ) + C600 ) and L1735: ( ( C596 . C599 ) . C600 ) = ( D176 . C597 ) by L1729 , L811;
reconsider D178 = ( D177 /. C599 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D179 = ( decomp (( D178 /. 2 ) qua (Element of ( Bags C593 ))) );
L1736: ( C596 . C599 ) = ( ( ( len D179 ) |-> <* ( D178 /. 1 ) *> ) ^^ D179 ) by L1727 , L1732;
L1737: ( dom ( C596 . C599 ) ) = ( ( dom D179 ) /\ ( dom ( ( len D179 ) |-> <* ( D178 /. 1 ) *> ) ) ) by L1736 , L544
.= ( ( dom D179 ) /\ ( Seg ( len D179 ) ) ) by FUNCOP_1:13
.= ( ( dom D179 ) /\ ( dom D179 ) ) by FINSEQ_1:def 3
.= ( dom D179 );
L1738: ( D179 /. C600 ) = ( D179 . C600 ) by L1737 , L1733 , PARTFUN1:def 6;
L1739: ( dom D179 ) = ( Seg ( len D179 ) ) by FINSEQ_1:def 3;
L1740: ( ( ( len D179 ) |-> <* ( D178 /. 1 ) *> ) . C600 ) = <* ( D178 /. 1 ) *> by L1739 , L1733 , L1737 , FUNCOP_1:7;
consider C601 , C602 being (bag of C593) such that L1741: ( D177 /. C599 ) = <* C601 , C602 *> and L1742: C594 = ( C601 + C602 ) by L1725 , L1732 , L1653;
reconsider D180 = C601 , D181 = C602 as (Element of ( Bags C593 )) by L1240;
L1743: (D180 = C601 & D181 = C602);
L1744: ( D178 /. 2 ) = C602 by L1743 , L1741 , FINSEQ_4:17;
consider C603 , C604 being (bag of C593) such that L1745: ( D179 /. C600 ) = <* C603 , C604 *> and L1746: C602 = ( C603 + C604 ) by L1744 , L1733 , L1737 , L1653;
L1747: ( D178 /. 1 ) = C601 by L1741 , L1743 , FINSEQ_4:17;
L1748: ( ( C596 . C599 ) . C600 ) = ( <* C601 *> ^ <* C603 , C604 *> ) by L1747 , L1733 , L1736 , L1745 , L1738 , L1740 , L544
.= <* C601 , C603 , C604 *> by FINSEQ_1:43;
consider C605 , C606 being (Element of ( NAT )) such that L1749: C605 in ( dom C596 ) and L1750: C606 in ( dom ( C596 . C605 ) ) and L1751: C598 = ( ( Sum ( Card ( C596 | ( C605 -' 1 ) ) ) ) + C606 ) and L1752: ( ( C596 . C605 ) . C606 ) = ( D176 . C598 ) by L1730 , L811;
reconsider D182 = ( D177 /. C605 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D183 = ( decomp (( D182 /. 2 ) qua (Element of ( Bags C593 ))) );
L1753: ( C596 . C605 ) = ( ( ( len D183 ) |-> <* ( D182 /. 1 ) *> ) ^^ D183 ) by L1727 , L1749;
L1754: ( dom ( C596 . C605 ) ) = ( ( dom D183 ) /\ ( dom ( ( len D183 ) |-> <* ( D182 /. 1 ) *> ) ) ) by L1753 , L544
.= ( ( dom D183 ) /\ ( Seg ( len D183 ) ) ) by FUNCOP_1:13
.= ( ( dom D183 ) /\ ( dom D183 ) ) by FINSEQ_1:def 3
.= ( dom D183 );
L1755: ( D183 /. C606 ) = ( D183 . C606 ) by L1754 , L1750 , PARTFUN1:def 6;
L1756: ( dom D183 ) = ( Seg ( len D183 ) ) by FINSEQ_1:def 3;
L1757: ( ( ( len D183 ) |-> <* ( D182 /. 1 ) *> ) . C606 ) = <* ( D182 /. 1 ) *> by L1756 , L1750 , L1754 , FUNCOP_1:7;
consider C607 , C608 being (bag of C593) such that L1758: ( D177 /. C605 ) = <* C607 , C608 *> and L1759: C594 = ( C607 + C608 ) by L1725 , L1749 , L1653;
reconsider D184 = C607 , D185 = C608 as (Element of ( Bags C593 )) by L1240;
L1760: (D184 = C607 & D185 = C608);
L1761: ( D182 /. 2 ) = C608 by L1760 , L1758 , FINSEQ_4:17;
consider C609 , C610 being (bag of C593) such that L1762: ( D183 /. C606 ) = <* C609 , C610 *> and L1763: C608 = ( C609 + C610 ) by L1761 , L1750 , L1754 , L1653;
L1764: ( D182 /. 1 ) = C607 by L1758 , L1760 , FINSEQ_4:17;
L1765: ( ( C596 . C605 ) . C606 ) = ( <* C607 *> ^ <* C609 , C610 *> ) by L1764 , L1750 , L1753 , L1762 , L1755 , L1757 , L544
.= <* C607 , C609 , C610 *> by FINSEQ_1:43;
L1766: (C603 = C609 & C604 = C610) by L1765 , L1731 , L1735 , L1752 , L1748 , FINSEQ_1:78;
L1767: ( D177 /. C605 ) = ( D177 . C605 ) by L1725 , L1749 , PARTFUN1:def 6;
L1768: ( D177 /. C599 ) = ( D177 . C599 ) by L1725 , L1732 , PARTFUN1:def 6;
L1769: C601 = C607 by L1731 , L1735 , L1752 , L1748 , L1765 , FINSEQ_1:78;
L1770: C599 = C605 by L1769 , L1725 , L1732 , L1749 , L1768 , L1741 , L1746 , L1767 , L1758 , L1763 , L1766 , FUNCT_1:def 4;
thus L1771: thesis by L1770 , L1733 , L1734 , L1750 , L1751 , L1745 , L1738 , L1754 , L1762 , L1755 , L1766 , FUNCT_1:def 4;
end;
L1772:
now
let C611 being set;
thus L1773:now
assume L1774: C611 in ( rng D175 );
consider C612 being set such that L1775: C612 in ( dom D175 ) and L1776: C611 = ( D175 . C612 ) by L1774 , FUNCT_1:def 3;
reconsider D186 = C612 as (Element of ( NAT )) by L1775;
consider C613 , C614 being (Element of ( NAT )) such that L1777: C613 in ( dom C595 ) and L1778: C614 in ( dom ( C595 . C613 ) ) and L1779: D186 = ( ( Sum ( Card ( C595 | ( C613 -' 1 ) ) ) ) + C614 ) and L1780: ( ( C595 . C613 ) . C614 ) = ( D175 . D186 ) by L1775 , L811;
reconsider D187 = ( D177 /. C613 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D188 = ( decomp (( D187 /. 1 ) qua (Element of ( Bags C593 ))) );
L1781: ( C595 . C613 ) = ( D188 ^^ ( ( len D188 ) |-> <* ( D187 /. 2 ) *> ) ) by L1726 , L1777;
L1782: ( dom ( C595 . C613 ) ) = ( ( dom D188 ) /\ ( dom ( ( len D188 ) |-> <* ( D187 /. 2 ) *> ) ) ) by L1781 , L544
.= ( ( dom D188 ) /\ ( Seg ( len D188 ) ) ) by FUNCOP_1:13
.= ( ( dom D188 ) /\ ( dom D188 ) ) by FINSEQ_1:def 3
.= ( dom D188 );
L1783: ( dom D188 ) = ( Seg ( len D188 ) ) by FINSEQ_1:def 3;
L1784: ( ( ( len D188 ) |-> <* ( D187 /. 2 ) *> ) . C614 ) = <* ( D187 /. 2 ) *> by L1783 , L1778 , L1782 , FUNCOP_1:7;
consider C615 , C616 being (bag of C593) such that L1785: ( D177 /. C613 ) = <* C615 , C616 *> and L1786: C594 = ( C615 + C616 ) by L1724 , L1777 , L1653;
reconsider D189 = C615 , D190 = C616 as (Element of ( Bags C593 )) by L1240;
L1787: (D189 = C615 & D190 = C616);
L1788: ( D187 /. 2 ) = C616 by L1787 , L1785 , FINSEQ_4:17;
L1789: ( D187 /. 1 ) = C615 by L1785 , L1787 , FINSEQ_4:17;
consider C617 , C618 being (bag of C593) such that L1790: ( D188 /. C614 ) = <* C617 , C618 *> and L1791: C615 = ( C617 + C618 ) by L1789 , L1778 , L1782 , L1653;
L1792: C594 = ( C617 + ( C618 + C616 ) ) by L1786 , L1791 , L1014;
consider C619 being (Element of ( NAT )) such that L1793: C619 in ( dom ( decomp C594 ) ) and L1794: ( ( decomp C594 ) /. C619 ) = <* C617 , ( C618 + C616 ) *> by L1792 , L1658;
set D191 = ( C618 + C616 );
reconsider D192 = C617 , D193 = D191 as (Element of ( Bags C593 )) by L1240;
consider C620 being (Element of ( NAT )) such that L1795: C620 in ( dom ( decomp D191 ) ) and L1796: ( ( decomp D191 ) /. C620 ) = <* C618 , C616 *> by L1658;
reconsider D194 = ( ( decomp C594 ) /. C619 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D195 = ( decomp (( D194 /. 2 ) qua (Element of ( Bags C593 ))) );
L1797: ( ( decomp C594 ) /. C619 ) = <* D192 , D193 *> by L1794;
L1798: (( D194 /. 1 ) = C617 & D195 = ( decomp D191 )) by L1797 , FINSEQ_4:17;
L1799: ( C596 . C619 ) = ( ( ( len D195 ) |-> <* ( D194 /. 1 ) *> ) ^^ D195 ) by L1725 , L1727 , L1793;
L1800: ( dom ( C596 . C619 ) ) = ( ( dom ( ( len D195 ) |-> <* ( D194 /. 1 ) *> ) ) /\ ( dom D195 ) ) by L1799 , L544
.= ( ( Seg ( len D195 ) ) /\ ( dom D195 ) ) by FUNCOP_1:13
.= ( ( dom D195 ) /\ ( dom D195 ) ) by FINSEQ_1:def 3
.= ( dom D195 );
L1801: C620 in ( dom ( C596 . C619 ) ) by L1800 , L1795 , L1797 , FINSEQ_4:17;
L1802: C620 in ( Seg ( len D195 ) ) by L1801 , L1800 , FINSEQ_1:def 3;
L1803: ( ( decomp D191 ) /. C620 ) = ( ( decomp D191 ) . C620 ) by L1795 , PARTFUN1:def 6;
set D196 = ( ( Sum ( Card ( C596 | ( C619 -' 1 ) ) ) ) + C620 );
L1804: (D196 in ( dom D176 ) & ( D176 . D196 ) = ( ( C596 . C619 ) . C620 )) by L1725 , L1793 , L1801 , L850;
L1805: ( ( C596 . C619 ) . C620 ) = ( ( ( ( len D195 ) |-> <* ( D194 /. 1 ) *> ) . C620 ) ^ ( D195 . C620 ) ) by L1799 , L1801 , L544
.= ( <* C617 *> ^ <* C618 , C616 *> ) by L1796 , L1798 , L1802 , L1803 , FUNCOP_1:7
.= <* C617 , C618 , C616 *> by FINSEQ_1:43;
L1806: ( D188 /. C614 ) = ( D188 . C614 ) by L1778 , L1782 , PARTFUN1:def 6;
L1807: ( ( C595 . C613 ) . C614 ) = ( <* C617 , C618 *> ^ <* C616 *> ) by L1806 , L1778 , L1781 , L1788 , L1790 , L1784 , L544
.= <* C617 , C618 , C616 *> by FINSEQ_1:43;
thus L1808: C611 in ( rng D176 ) by L1807 , L1776 , L1780 , L1805 , L1804 , FUNCT_1:def 3;
end;
assume L1809: C611 in ( rng D176 );
consider C621 being set such that L1810: C621 in ( dom D176 ) and L1811: C611 = ( D176 . C621 ) by L1809 , FUNCT_1:def 3;
reconsider D197 = C621 as (Element of ( NAT )) by L1810;
consider C622 , C623 being (Element of ( NAT )) such that L1812: C622 in ( dom C596 ) and L1813: C623 in ( dom ( C596 . C622 ) ) and L1814: D197 = ( ( Sum ( Card ( C596 | ( C622 -' 1 ) ) ) ) + C623 ) and L1815: ( ( C596 . C622 ) . C623 ) = ( D176 . D197 ) by L1810 , L811;
reconsider D198 = ( D177 /. C622 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D199 = ( decomp (( D198 /. 2 ) qua (Element of ( Bags C593 ))) );
L1816: ( C596 . C622 ) = ( ( ( len D199 ) |-> <* ( D198 /. 1 ) *> ) ^^ D199 ) by L1727 , L1812;
L1817: ( dom ( C596 . C622 ) ) = ( ( dom D199 ) /\ ( dom ( ( len D199 ) |-> <* ( D198 /. 1 ) *> ) ) ) by L1816 , L544
.= ( ( dom D199 ) /\ ( Seg ( len D199 ) ) ) by FUNCOP_1:13
.= ( ( dom D199 ) /\ ( dom D199 ) ) by FINSEQ_1:def 3
.= ( dom D199 );
L1818: ( dom D199 ) = ( Seg ( len D199 ) ) by FINSEQ_1:def 3;
L1819: ( ( ( len D199 ) |-> <* ( D198 /. 1 ) *> ) . C623 ) = <* ( D198 /. 1 ) *> by L1818 , L1813 , L1817 , FUNCOP_1:7;
consider C624 , C625 being (bag of C593) such that L1820: ( D177 /. C622 ) = <* C624 , C625 *> and L1821: C594 = ( C624 + C625 ) by L1725 , L1812 , L1653;
reconsider D200 = C624 , D201 = C625 as (Element of ( Bags C593 )) by L1240;
L1822: (D200 = C624 & D201 = C625);
L1823: ( D198 /. 1 ) = C624 by L1822 , L1820 , FINSEQ_4:17;
L1824: ( D198 /. 2 ) = C625 by L1820 , L1822 , FINSEQ_4:17;
consider C626 , C627 being (bag of C593) such that L1825: ( D199 /. C623 ) = <* C626 , C627 *> and L1826: C625 = ( C626 + C627 ) by L1824 , L1813 , L1817 , L1653;
L1827: ( D199 /. C623 ) = ( D199 . C623 ) by L1813 , L1817 , PARTFUN1:def 6;
L1828: ( ( C596 . C622 ) . C623 ) = ( <* C624 *> ^ <* C626 , C627 *> ) by L1827 , L1813 , L1816 , L1823 , L1825 , L1819 , L544
.= <* C624 , C626 , C627 *> by FINSEQ_1:43;
set D202 = ( C624 + C626 );
reconsider D203 = D202 , D204 = C627 as (Element of ( Bags C593 )) by L1240;
consider C628 being (Element of ( NAT )) such that L1829: C628 in ( dom ( decomp D202 ) ) and L1830: ( ( decomp D202 ) /. C628 ) = <* C624 , C626 *> by L1658;
L1831: ( ( decomp D202 ) /. C628 ) = ( ( decomp D202 ) . C628 ) by L1829 , PARTFUN1:def 6;
L1832: C594 = ( ( C624 + C626 ) + C627 ) by L1821 , L1826 , L1014;
consider C629 being (Element of ( NAT )) such that L1833: C629 in ( dom ( decomp C594 ) ) and L1834: ( ( decomp C594 ) /. C629 ) = <* ( C624 + C626 ) , C627 *> by L1832 , L1658;
reconsider D205 = ( ( decomp C594 ) /. C629 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D206 = ( decomp (( D205 /. 1 ) qua (Element of ( Bags C593 ))) );
set D207 = ( ( Sum ( Card ( C595 | ( C629 -' 1 ) ) ) ) + C628 );
L1835: ( ( decomp C594 ) /. C629 ) = <* D203 , D204 *> by L1834;
L1836: ( D205 /. 1 ) = D202 by L1835 , FINSEQ_4:17;
L1837: C628 in ( Seg ( len D206 ) ) by L1836 , L1829 , FINSEQ_1:def 3;
L1838: ( C595 . C629 ) = ( D206 ^^ ( ( len D206 ) |-> <* ( D205 /. 2 ) *> ) ) by L1724 , L1726 , L1833;
L1839: ( dom ( C595 . C629 ) ) = ( ( dom ( ( len D206 ) |-> <* ( D205 /. 2 ) *> ) ) /\ ( dom D206 ) ) by L1838 , L544
.= ( ( Seg ( len D206 ) ) /\ ( dom D206 ) ) by FUNCOP_1:13
.= ( ( dom D206 ) /\ ( dom D206 ) ) by FINSEQ_1:def 3
.= ( dom D206 );
L1840: (D207 in ( dom D175 ) & ( D175 . D207 ) = ( ( C595 . C629 ) . C628 )) by L1839 , L1724 , L1833 , L1829 , L1836 , L850;
L1841: ( D205 /. 2 ) = C627 by L1835 , FINSEQ_4:17;
L1842: ( ( C595 . C629 ) . C628 ) = ( ( D206 . C628 ) ^ ( ( ( len D206 ) |-> <* ( D205 /. 2 ) *> ) . C628 ) ) by L1829 , L1838 , L1836 , L1839 , L544
.= ( <* C624 , C626 *> ^ <* C627 *> ) by L1830 , L1841 , L1836 , L1837 , L1831 , FUNCOP_1:7
.= <* C624 , C626 , C627 *> by FINSEQ_1:43;
thus L1843: C611 in ( rng D175 ) by L1842 , L1811 , L1815 , L1828 , L1840 , FUNCT_1:def 3;
end;
L1844: ( rng D175 ) = ( rng D176 ) by L1772 , TARSKI:1;
L1845: D175 is  one-to-one
proof
let C630 , C631 being set;
assume that
L1846: C630 in ( dom D175 )
and
L1847: C631 in ( dom D175 )
and
L1848: ( D175 . C630 ) = ( D175 . C631 );
consider C632 , C633 being (Element of ( NAT )) such that L1849: C632 in ( dom C595 ) and L1850: C633 in ( dom ( C595 . C632 ) ) and L1851: C630 = ( ( Sum ( Card ( C595 | ( C632 -' 1 ) ) ) ) + C633 ) and L1852: ( ( C595 . C632 ) . C633 ) = ( D175 . C630 ) by L1846 , L811;
reconsider D208 = ( D177 /. C632 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D209 = ( decomp (( D208 /. 1 ) qua (Element of ( Bags C593 ))) );
L1853: ( C595 . C632 ) = ( D209 ^^ ( ( len D209 ) |-> <* ( D208 /. 2 ) *> ) ) by L1726 , L1849;
L1854: ( dom ( C595 . C632 ) ) = ( ( dom D209 ) /\ ( dom ( ( len D209 ) |-> <* ( D208 /. 2 ) *> ) ) ) by L1853 , L544
.= ( ( dom D209 ) /\ ( Seg ( len D209 ) ) ) by FUNCOP_1:13
.= ( ( dom D209 ) /\ ( dom D209 ) ) by FINSEQ_1:def 3
.= ( dom D209 );
L1855: ( D209 /. C633 ) = ( D209 . C633 ) by L1854 , L1850 , PARTFUN1:def 6;
L1856: ( dom D209 ) = ( Seg ( len D209 ) ) by FINSEQ_1:def 3;
L1857: ( ( ( len D209 ) |-> <* ( D208 /. 2 ) *> ) . C633 ) = <* ( D208 /. 2 ) *> by L1856 , L1850 , L1854 , FUNCOP_1:7;
consider C634 , C635 being (bag of C593) such that L1858: ( D177 /. C632 ) = <* C634 , C635 *> and L1859: C594 = ( C634 + C635 ) by L1724 , L1849 , L1653;
reconsider D210 = C634 , D211 = C635 as (Element of ( Bags C593 )) by L1240;
L1860: (D210 = C634 & D211 = C635);
L1861: ( D208 /. 1 ) = C634 by L1860 , L1858 , FINSEQ_4:17;
consider C636 , C637 being (bag of C593) such that L1862: ( D209 /. C633 ) = <* C636 , C637 *> and L1863: C634 = ( C636 + C637 ) by L1861 , L1850 , L1854 , L1653;
L1864: ( D208 /. 2 ) = C635 by L1858 , L1860 , FINSEQ_4:17;
L1865: ( ( C595 . C632 ) . C633 ) = ( <* C636 , C637 *> ^ <* C635 *> ) by L1864 , L1850 , L1853 , L1862 , L1855 , L1857 , L544
.= <* C636 , C637 , C635 *> by FINSEQ_1:43;
consider C638 , C639 being (Element of ( NAT )) such that L1866: C638 in ( dom C595 ) and L1867: C639 in ( dom ( C595 . C638 ) ) and L1868: C631 = ( ( Sum ( Card ( C595 | ( C638 -' 1 ) ) ) ) + C639 ) and L1869: ( ( C595 . C638 ) . C639 ) = ( D175 . C631 ) by L1847 , L811;
reconsider D212 = ( D177 /. C638 ) as (Element of ( 2 -tuples_on ( Bags C593 ) ));
set D213 = ( decomp (( D212 /. 1 ) qua (Element of ( Bags C593 ))) );
L1870: ( C595 . C638 ) = ( D213 ^^ ( ( len D213 ) |-> <* ( D212 /. 2 ) *> ) ) by L1726 , L1866;
L1871: ( dom ( C595 . C638 ) ) = ( ( dom D213 ) /\ ( dom ( ( len D213 ) |-> <* ( D212 /. 2 ) *> ) ) ) by L1870 , L544
.= ( ( dom D213 ) /\ ( Seg ( len D213 ) ) ) by FUNCOP_1:13
.= ( ( dom D213 ) /\ ( dom D213 ) ) by FINSEQ_1:def 3
.= ( dom D213 );
L1872: ( D213 /. C639 ) = ( D213 . C639 ) by L1871 , L1867 , PARTFUN1:def 6;
L1873: ( dom D213 ) = ( Seg ( len D213 ) ) by FINSEQ_1:def 3;
L1874: ( ( ( len D213 ) |-> <* ( D212 /. 2 ) *> ) . C639 ) = <* ( D212 /. 2 ) *> by L1873 , L1867 , L1871 , FUNCOP_1:7;
consider C640 , C641 being (bag of C593) such that L1875: ( D177 /. C638 ) = <* C640 , C641 *> and L1876: C594 = ( C640 + C641 ) by L1724 , L1866 , L1653;
reconsider D214 = C640 , D215 = C641 as (Element of ( Bags C593 )) by L1240;
L1877: (D214 = C640 & D215 = C641);
L1878: ( D212 /. 1 ) = C640 by L1877 , L1875 , FINSEQ_4:17;
consider C642 , C643 being (bag of C593) such that L1879: ( D213 /. C639 ) = <* C642 , C643 *> and L1880: C640 = ( C642 + C643 ) by L1878 , L1867 , L1871 , L1653;
L1881: ( D212 /. 2 ) = C641 by L1875 , L1877 , FINSEQ_4:17;
L1882: ( ( C595 . C638 ) . C639 ) = ( <* C642 , C643 *> ^ <* C641 *> ) by L1881 , L1867 , L1870 , L1879 , L1872 , L1874 , L544
.= <* C642 , C643 , C641 *> by FINSEQ_1:43;
L1883: (C636 = C642 & C637 = C643) by L1882 , L1848 , L1852 , L1869 , L1865 , FINSEQ_1:78;
L1884: ( D177 /. C638 ) = ( D177 . C638 ) by L1724 , L1866 , PARTFUN1:def 6;
L1885: ( D177 /. C632 ) = ( D177 . C632 ) by L1724 , L1849 , PARTFUN1:def 6;
L1886: C635 = C641 by L1848 , L1852 , L1869 , L1865 , L1882 , FINSEQ_1:78;
L1887: C632 = C638 by L1886 , L1724 , L1849 , L1866 , L1885 , L1858 , L1863 , L1884 , L1875 , L1880 , L1883 , FUNCT_1:def 4;
thus L1888: thesis by L1887 , L1850 , L1851 , L1867 , L1868 , L1862 , L1855 , L1871 , L1879 , L1872 , L1883 , FUNCT_1:def 4;
end;
L1889: D175 , D176 are_fiberwise_equipotent  by L1845 , L1844 , L1728 , RFINSEQ:26;
thus L1890: thesis by L1889 , RFINSEQ:4;
end;
theorem
L1891: (for B436 being set holds (for B437 , B438 being  real-valued (ManySortedSet of B436) holds ( support ( B437 + B438 ) ) c= ( ( support B437 ) \/ ( support B438 ) )))
proof
let C644 being set;
let C645 , C646 being  real-valued (ManySortedSet of C644);
let C647 being set;
assume L1892: C647 in ( support ( C645 + C646 ) );
L1893: ( ( C645 + C646 ) . C647 ) <> ( 0 ) by L1892 , L1024;
assume L1894: (not C647 in ( ( support C645 ) \/ ( support C646 ) ));
L1895: (not C647 in ( support C645 )) by L1894 , XBOOLE_0:def 3;
L1896: ( C645 . C647 ) = ( 0 ) by L1895 , L1024;
L1897: (not C647 in ( support C646 )) by L1894 , XBOOLE_0:def 3;
L1898: ( ( C645 . C647 ) + ( C646 . C647 ) ) = ( 0 ) by L1897 , L1896 , L1024;
thus L1899: contradiction by L1898 , L1893 , L950;
end;
registration
let C648 being non  empty set;
let C649 being (Element of ( NAT ));
cluster  ->  FinSequence-yielding for (FinSequence of ( C649 -tuples_on C648 ));
coherence
proof
let C650 being (FinSequence of ( C649 -tuples_on C648 ));
let C651 being set;
assume L1900: C651 in ( dom C650 );
reconsider D216 = C651 as (Element of ( NAT )) by L1900;
thus L1901: thesis;
end;
end;
registration
let C652 being (Element of ( NAT ));
let C653 being non  empty set;
let C654 being (FinSequence of ( C652 -tuples_on C653 ));
let C655 being set;
cluster ( C654 /. C655 ) ->  Function-like  Relation-like;
coherence;
end;
registration
let C656 being (Element of ( NAT ));
let C657 being non  empty set;
let C658 being (FinSequence of ( C656 -tuples_on C657 ));
let C659 being set;
cluster ( C658 /. C659 ) -> C657 -valued  FinSequence-like;
coherence;
end;
