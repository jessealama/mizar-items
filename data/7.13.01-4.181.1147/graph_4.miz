:: Oriented Simple Chains Included in Oriented Chains
::  by Yatsuka Nakamura and Piotr Rudnicki
::
:: Received August 19, 1998
:: Copyright (c) 1998-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, FINSEQ_1, SUBSET_1, GRAPH_1, FUNCT_1, STRUCT_0, TREES_2,
      XBOOLE_0, ARYTM_3, XXREAL_0, PARTFUN1, GRAPH_2, RELAT_1, TARSKI, CARD_1,
      NAT_1, ARYTM_1, ORDINAL4, GLIB_000, FINSET_1, FINSEQ_2, GRAPH_4;
 notations TARSKI, XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, PARTFUN1, FINSEQ_1,
      FINSEQ_2, CARD_1, FINSET_1, NUMBERS, XCMPLX_0, ORDINAL1, NAT_1, NAT_D,
      STRUCT_0, GRAPH_1, GRAPH_2, XXREAL_0;
 constructors RECDEF_1, GRAPH_2, NAT_D, FINSEQ_2, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, XXREAL_0, XREAL_0, NAT_1, FINSEQ_1,
      GRAPH_2, ORDINAL1, CARD_1, STRUCT_0, GRAPH_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, FINSEQ_2;
 theorems TARSKI, NAT_1, FINSEQ_1, FINSEQ_2, GRAPH_1, RELAT_1, FUNCT_1,
      GRFUNC_1, FUNCT_2, FINSET_1, FINSEQ_3, FINSEQ_4, GRAPH_2, XBOOLE_0,
      XBOOLE_1, XREAL_1, CARD_1, XXREAL_0, ORDINAL1, NAT_D, XREAL_0;
 schemes NAT_1, FINSEQ_1, FUNCT_1;

begin
definition
let R10 being Graph;
let R11 being (Element of R10);
let R12 being (Element of R10);
let R3 being set;
pred R3 orientedly_joins R11 , R12
means
:L1: (( (the Source of R10) . R3 ) = R11 & ( (the Target of R10) . R3 ) = R12)
;end;
theorem
L3: (for R3 being set holds (for R10 being Graph holds (for R14 being (Element of R10) holds (for R15 being (Element of R10) holds (R3 orientedly_joins R14 , R15 implies R3 joins R14 , R15)))))
proof
let R3 being set;
let R10 being Graph;
let R14 being (Element of R10);
let R15 being (Element of R10);
assume L4: R3 orientedly_joins R14 , R15;
L5: ( (the Source of R10) . R3 ) = R14 by L4 , L1;
L6: ( (the Target of R10) . R3 ) = R15 by L4 , L1;
thus L7: thesis by L6 , L5 , GRAPH_1:def 12;
end;
definition
let R10 being Graph;
let C1 , C2 being (Element of (the carrier of R10));
pred C1 , C2 are_orientedly_incident 
means
(ex B1 being set st (B1 in (the carrier' of R10) & B1 orientedly_joins C1 , C2))
;end;
theorem
L9: (for R3 being set holds (for R10 being Graph holds (for R14 being (Element of R10) holds (for R15 being (Element of R10) holds (for R16 being (Element of R10) holds (for R17 being (Element of R10) holds ((R3 orientedly_joins R14 , R15 & R3 orientedly_joins R16 , R17) implies (R14 = R16 & R15 = R17))))))))
proof
let R3 being set;
let R10 being Graph;
let R14 being (Element of R10);
let R15 being (Element of R10);
let R16 being (Element of R10);
let R17 being (Element of R10);
assume that
L10: R3 orientedly_joins R14 , R15
and
L11: R3 orientedly_joins R16 , R17;
L12: ( (the Source of R10) . R3 ) = R14 by L10 , L1;
L13: ( (the Target of R10) . R3 ) = R15 by L10 , L1;
thus L14: thesis by L13 , L11 , L12 , L1;
end;
definition
let R10 being Graph;
let R4 being set;
func R10 -SVSet R4 -> set equals 
{ R13 where R13 is (Element of R10) : (ex B2 being (Element of (the carrier' of R10)) st (B2 in R4 & R13 = ( (the Source of R10) . B2 ))) };
correctness;
end;
definition
let R10 being Graph;
let R4 being set;
func R10 -TVSet R4 -> set equals 
{ R13 where R13 is (Element of R10) : (ex B3 being (Element of (the carrier' of R10)) st (B3 in R4 & R13 = ( (the Target of R10) . B3 ))) };
correctness;
end;
theorem
L17: (for R10 being Graph holds (( R10 -SVSet ( {} ) ) = ( {} ) & ( R10 -TVSet ( {} ) ) = ( {} )))
proof
let R10 being Graph;
set D1 = ( {} );
L18:
now
assume L19: ( R10 -SVSet D1 ) <> ( {} );
set D2 = the (Element of ( R10 -SVSet D1 ));
L20: D2 in ( R10 -SVSet D1 ) by L19;
L21: (ex R13 being (Element of R10) st (R13 = D2 & (ex B4 being (Element of (the carrier' of R10)) st (B4 in D1 & R13 = ( (the Source of R10) . B4 ))))) by L20;
thus L22: contradiction by L21;
end;
L23:
now
assume L24: ( R10 -TVSet D1 ) <> ( {} );
set D3 = the (Element of ( R10 -TVSet D1 ));
L25: D3 in ( R10 -TVSet D1 ) by L24;
L26: (ex R13 being (Element of R10) st (R13 = D3 & (ex B5 being (Element of (the carrier' of R10)) st (B5 in D1 & R13 = ( (the Target of R10) . B5 ))))) by L25;
thus L27: contradiction by L26;
end;
thus L28: thesis by L23 , L18;
end;
definition
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let C3 being FinSequence;
pred R18 is_oriented_vertex_seq_of C3
means
:L29: (( len R18 ) = ( ( len C3 ) + 1 ) & (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 <= ( len C3 )) implies ( C3 . R9 ) orientedly_joins ( R18 /. R9 ) , ( R18 /. ( R9 + 1 ) ))))
;end;
theorem
L31: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (R18 is_oriented_vertex_seq_of R21 implies R18 is_vertex_seq_of R21))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume L32: R18 is_oriented_vertex_seq_of R21;
L33: ( len R18 ) = ( ( len R21 ) + 1 ) by L32 , L29;
L34: (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 <= ( len R21 )) implies ( R21 . R9 ) joins ( R18 /. R9 ) , ( R18 /. ( R9 + 1 ) )))
proof
let R9 being (Element of ( NAT ));
assume that
L35: 1 <= R9
and
L36: R9 <= ( len R21 );
L37: ( R21 . R9 ) orientedly_joins ( R18 /. R9 ) , ( R18 /. ( R9 + 1 ) ) by L32 , L35 , L36 , L29;
thus L38: thesis by L37 , L3;
end;
thus L39: thesis by L34 , L33 , GRAPH_2:def 6;
end;
theorem
L40: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (R18 is_oriented_vertex_seq_of R21 implies ( R10 -SVSet ( rng R21 ) ) c= ( rng R18 )))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume L41: R18 is_oriented_vertex_seq_of R21;
L42: ( len R18 ) = ( ( len R21 ) + 1 ) by L41 , L29;
L43: ( R10 -SVSet ( rng R21 ) ) c= ( rng R18 )
proof
let C4 being set;
assume L44: C4 in ( R10 -SVSet ( rng R21 ) );
consider C5 being (Element of R10) such that L45: C5 = C4 and L46: (ex B6 being (Element of (the carrier' of R10)) st (B6 in ( rng R21 ) & C5 = ( (the Source of R10) . B6 ))) by L44;
consider C6 being (Element of (the carrier' of R10)) such that L47: C6 in ( rng R21 ) and L48: C5 = ( (the Source of R10) . C6 ) by L46;
consider C7 being set such that L49: C7 in ( dom R21 ) and L50: C6 = ( R21 . C7 ) by L47 , FUNCT_1:def 3;
reconsider D4 = C7 as (Element of ( NAT )) by L49;
L51: 1 <= D4 by L49 , FINSEQ_3:25;
L52: D4 <= ( len R21 ) by L49 , FINSEQ_3:25;
L53: D4 <= ( len R18 ) by L52 , L42 , NAT_1:12;
set D5 = ( R18 /. D4 );
set D6 = ( R18 /. ( D4 + 1 ) );
L54: D5 = ( R18 . D4 ) by L51 , L53 , FINSEQ_4:15;
L55: ( R21 . D4 ) orientedly_joins D5 , D6 by L41 , L51 , L52 , L29;
L56: C5 = D5 by L55 , L48 , L50 , L1;
L57: D4 in ( dom R18 ) by L51 , L53 , FINSEQ_3:25;
thus L58: thesis by L57 , L45 , L54 , L56 , FUNCT_1:def 3;
end;
thus L59: thesis by L43;
end;
theorem
L60: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (R18 is_oriented_vertex_seq_of R21 implies ( R10 -TVSet ( rng R21 ) ) c= ( rng R18 )))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume L61: R18 is_oriented_vertex_seq_of R21;
L62: ( len R18 ) = ( ( len R21 ) + 1 ) by L61 , L29;
let C8 being set;
assume L63: C8 in ( R10 -TVSet ( rng R21 ) );
consider C9 being (Element of R10) such that L64: C9 = C8 and L65: (ex B7 being (Element of (the carrier' of R10)) st (B7 in ( rng R21 ) & C9 = ( (the Target of R10) . B7 ))) by L63;
consider C10 being (Element of (the carrier' of R10)) such that L66: C10 in ( rng R21 ) and L67: C9 = ( (the Target of R10) . C10 ) by L65;
consider C11 being set such that L68: C11 in ( dom R21 ) and L69: C10 = ( R21 . C11 ) by L66 , FUNCT_1:def 3;
reconsider D7 = C11 as (Element of ( NAT )) by L68;
L70: 1 <= D7 by L68 , FINSEQ_3:25;
L71: D7 <= ( len R21 ) by L68 , FINSEQ_3:25;
L72: 1 <= ( D7 + 1 ) by NAT_1:12;
L73: ( D7 + 1 ) <= ( len R18 ) by L62 , L71 , XREAL_1:7;
set D8 = ( R18 /. D7 );
set D9 = ( R18 /. ( D7 + 1 ) );
L74: D9 = ( R18 . ( D7 + 1 ) ) by L62 , L71 , L72 , FINSEQ_4:15 , XREAL_1:7;
L75: ( R21 . D7 ) orientedly_joins D8 , D9 by L61 , L70 , L71 , L29;
L76: C9 = D9 by L75 , L67 , L69 , L1;
L77: ( D7 + 1 ) in ( dom R18 ) by L72 , L73 , FINSEQ_3:25;
thus L78: thesis by L77 , L64 , L74 , L76 , FUNCT_1:def 3;
end;
theorem
L79: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds ((R21 <> ( {} ) & R18 is_oriented_vertex_seq_of R21) implies ( rng R18 ) c= ( ( R10 -SVSet ( rng R21 ) ) \/ ( R10 -TVSet ( rng R21 ) ) )))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume that
L80: R21 <> ( {} )
and
L81: R18 is_oriented_vertex_seq_of R21;
L82: ( len R18 ) = ( ( len R21 ) + 1 ) by L81 , L29;
let C12 being set;
assume L83: C12 in ( rng R18 );
consider C13 being set such that L84: C13 in ( dom R18 ) and L85: C12 = ( R18 . C13 ) by L83 , FUNCT_1:def 3;
reconsider D10 = C13 as (Element of ( NAT )) by L84;
L86: 1 <= D10 by L84 , FINSEQ_3:25;
L87: D10 <= ( len R18 ) by L84 , FINSEQ_3:25;
per cases  by L82 , L87 , NAT_1:8;
suppose L88: D10 <= ( len R21 );

L89: D10 in ( dom R21 ) by L88 , L86 , FINSEQ_3:25;
L90: ( R21 . D10 ) in ( rng R21 ) by L89 , FUNCT_1:def 3;
L91: ( rng R21 ) c= (the carrier' of R10) by FINSEQ_1:def 4;
reconsider D11 = ( R21 . D10 ) as (Element of (the carrier' of R10)) by L91 , L90;
set D12 = ( R18 /. D10 );
set D13 = ( R18 /. ( D10 + 1 ) );
L92: D12 = ( R18 . D10 ) by L86 , L87 , FINSEQ_4:15;
L93: ( R21 . D10 ) orientedly_joins D12 , D13 by L81 , L86 , L88 , L29;
L94: D12 = ( (the Source of R10) . D11 ) by L93 , L1;
L95: D10 in ( dom R21 ) by L86 , L88 , FINSEQ_3:25;
L96: D11 in ( rng R21 ) by L95 , FUNCT_1:def 3;
L97: C12 in ( R10 -SVSet ( rng R21 ) ) by L96 , L85 , L92 , L94;
thus L98: thesis by L97 , XBOOLE_0:def 3;
end;
suppose L99: D10 = ( ( len R21 ) + 1 );

set D14 = ( len R21 );
L100: ( ( 0 ) + 1 ) = 1;
L101: 1 <= D14 by L100 , L80 , NAT_1:13;
L102: D14 in ( dom R21 ) by L101 , FINSEQ_3:25;
L103: ( R21 . D14 ) in ( rng R21 ) by L102 , FUNCT_1:def 3;
L104: ( rng R21 ) c= (the carrier' of R10) by FINSEQ_1:def 4;
reconsider D15 = ( R21 . D14 ) as (Element of (the carrier' of R10)) by L104 , L103;
set D16 = ( R18 /. D14 );
set D17 = ( R18 /. ( D14 + 1 ) );
L105: D17 = ( R18 . ( D14 + 1 ) ) by L82 , L86 , L99 , FINSEQ_4:15;
L106: ( R21 . D14 ) orientedly_joins D16 , D17 by L81 , L101 , L29;
L107: D17 = ( (the Target of R10) . D15 ) by L106 , L1;
L108: D14 in ( dom R21 ) by L101 , FINSEQ_3:25;
L109: D15 in ( rng R21 ) by L108 , FUNCT_1:def 3;
L110: C12 in ( R10 -TVSet ( rng R21 ) ) by L109 , L85 , L99 , L105 , L107;
thus L111: thesis by L110 , XBOOLE_0:def 3;
end;
end;
begin
theorem
L113: (for R10 being Graph holds (for R13 being (Element of R10) holds <* R13 *> is_oriented_vertex_seq_of ( {} )))
proof
let R10 being Graph;
let R13 being (Element of R10);
set D18 = ( {} );
thus L114: ( len <* R13 *> ) = ( ( len D18 ) + 1 ) by FINSEQ_1:40;
let R9 being (Element of ( NAT ));
assume that
L115: 1 <= R9
and
L116: R9 <= ( len D18 );
thus L117: thesis by L115 , L116;
end;
theorem
L118: (for R10 being Graph holds (for R21 being  oriented (Chain of R10) holds (ex R18 being (FinSequence of (the carrier of R10)) st R18 is_oriented_vertex_seq_of R21)))
proof
let R10 being Graph;
let R21 being  oriented (Chain of R10);
L119:
now
per cases ;
case L120: R21 <> ( {} );
defpred S1[ Nat , set ] means (($1 = ( ( len R21 ) + 1 ) implies $2 = ( (the Target of R10) . ( R21 . ( len R21 ) ) )) & ($1 <> ( ( len R21 ) + 1 ) implies $2 = ( (the Source of R10) . ( R21 . $1 ) )));
L121: (for B8 being Nat holds (B8 in ( Seg ( ( len R21 ) + 1 ) ) implies (ex B9 being set st S1[ B8 , B9 ])))
proof
let C14 being Nat;
assume L122: C14 in ( Seg ( ( len R21 ) + 1 ) );
L123:
now
per cases ;
case L124: C14 = ( ( len R21 ) + 1 );
thus L125: thesis by L124;
end;
case L126: C14 <> ( ( len R21 ) + 1 );
thus L127: thesis by L126;
end;
end;
thus L129: thesis by L123;
end;
L130: (ex R1 being FinSequence st (( dom R1 ) = ( Seg ( ( len R21 ) + 1 ) ) & (for B10 being Nat holds (B10 in ( Seg ( ( len R21 ) + 1 ) ) implies S1[ B10 , ( R1 . B10 ) ])))) from FINSEQ_1:sch 1(L121);
consider R1 being FinSequence such that L131: ( dom R1 ) = ( Seg ( ( len R21 ) + 1 ) ) and L132: (for B11 being Nat holds (B11 in ( Seg ( ( len R21 ) + 1 ) ) implies ((B11 = ( ( len R21 ) + 1 ) implies ( R1 . B11 ) = ( (the Target of R10) . ( R21 . ( len R21 ) ) )) & (B11 <> ( ( len R21 ) + 1 ) implies ( R1 . B11 ) = ( (the Source of R10) . ( R21 . B11 ) ))))) by L130;
L133: ( len R1 ) = ( ( len R21 ) + 1 ) by L131 , FINSEQ_1:def 3;
L134: ( rng R1 ) c= (the carrier of R10)
proof
let C15 being set;
assume L135: C15 in ( rng R1 );
consider C16 being set such that L136: C16 in ( dom R1 ) and L137: C15 = ( R1 . C16 ) by L135 , FUNCT_1:def 3;
reconsider D19 = C16 as (Element of ( NAT )) by L136;
L138: 1 <= D19 by L131 , L136 , FINSEQ_1:1;
L139: D19 <= ( ( len R21 ) + 1 ) by L131 , L136 , FINSEQ_1:1;
L140:
now
per cases ;
case L141: D19 = ( ( len R21 ) + 1 );
L142: C15 = ( (the Target of R10) . ( R21 . ( len R21 ) ) ) by L141 , L131 , L132 , L136 , L137;
L143: ( len R21 ) >= ( ( 0 ) + 1 ) by L120 , NAT_1:13;
L144: ( len R21 ) in ( Seg ( len R21 ) ) by L143 , FINSEQ_1:1;
L145: ( len R21 ) in ( dom R21 ) by L144 , FINSEQ_1:def 3;
L146: ( R21 . ( len R21 ) ) in ( rng R21 ) by L145 , FUNCT_1:def 3;
L147: ( rng R21 ) c= (the carrier' of R10) by FINSEQ_1:def 4;
thus L148: thesis by L147 , L142 , L146 , FUNCT_2:5;
end;
case L149: D19 <> ( ( len R21 ) + 1 );
L150: C15 = ( (the Source of R10) . ( R21 . D19 ) ) by L149 , L131 , L132 , L136 , L137;
L151: D19 < ( ( len R21 ) + 1 ) by L139 , L149 , XXREAL_0:1;
L152: D19 <= ( len R21 ) by L151 , NAT_1:13;
L153: D19 in ( Seg ( len R21 ) ) by L152 , L138 , FINSEQ_1:1;
L154: D19 in ( dom R21 ) by L153 , FINSEQ_1:def 3;
L155: ( R21 . D19 ) in ( rng R21 ) by L154 , FUNCT_1:def 3;
L156: ( rng R21 ) c= (the carrier' of R10) by FINSEQ_1:def 4;
thus L157: thesis by L156 , L150 , L155 , FUNCT_2:5;
end;
end;
thus L159: thesis by L140;
end;
reconsider D20 = R1 as (FinSequence of (the carrier of R10)) by L134 , FINSEQ_1:def 4;
L160: (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 <= ( len R21 )) implies ( R21 . R9 ) orientedly_joins ( D20 /. R9 ) , ( D20 /. ( R9 + 1 ) )))
proof
let R9 being (Element of ( NAT ));
assume that
L161: 1 <= R9
and
L162: R9 <= ( len R21 );
per cases ;
suppose L163: R9 = ( len R21 );

L164: R9 < ( ( len R21 ) + 1 ) by L163 , NAT_1:13;
L165: R9 in ( Seg ( ( len R21 ) + 1 ) ) by L164 , L161 , FINSEQ_1:1;
L166: ( R1 . R9 ) = ( (the Source of R10) . ( R21 . R9 ) ) by L165 , L132 , L164;
L167: 1 < ( R9 + 1 ) by L161 , NAT_1:13;
L168: ( R9 + 1 ) in ( Seg ( ( len R21 ) + 1 ) ) by L167 , L163 , FINSEQ_1:1;
L169: ( R1 . ( R9 + 1 ) ) = ( (the Target of R10) . ( R21 . ( len R21 ) ) ) by L168 , L132 , L163;
L170: ( (the Source of R10) . ( R21 . R9 ) ) = ( D20 /. R9 ) by L133 , L161 , L164 , L166 , FINSEQ_4:15;
L171: 1 < ( R9 + 1 ) by L161 , NAT_1:13;
L172: ( (the Target of R10) . ( R21 . R9 ) ) = ( D20 /. ( R9 + 1 ) ) by L171 , L133 , L163 , L169 , FINSEQ_4:15;
thus L173: thesis by L172 , L170 , L1;
end;
suppose L174: R9 <> ( len R21 );

L175: R9 < ( len R21 ) by L174 , L162 , XXREAL_0:1;
L176: ( R9 + 1 ) <= ( len R21 ) by L175 , NAT_1:13;
L177: ( R9 + 1 ) < ( ( len R21 ) + 1 ) by L176 , NAT_1:13;
L178: R9 < ( ( len R21 ) + 1 ) by L162 , NAT_1:13;
L179: R9 in ( Seg ( ( len R21 ) + 1 ) ) by L178 , L161 , FINSEQ_1:1;
L180: ( R1 . R9 ) = ( (the Source of R10) . ( R21 . R9 ) ) by L179 , L132 , L178;
L181: 1 < ( R9 + 1 ) by L161 , NAT_1:13;
L182: ( R9 + 1 ) in ( Seg ( ( len R21 ) + 1 ) ) by L181 , L177 , FINSEQ_1:1;
L183: ( R1 . ( R9 + 1 ) ) = ( (the Source of R10) . ( R21 . ( R9 + 1 ) ) ) by L182 , L132 , L177;
L184: ( (the Source of R10) . ( R21 . R9 ) ) = ( D20 /. R9 ) by L133 , L161 , L178 , L180 , FINSEQ_4:15;
L185: 1 < ( R9 + 1 ) by L161 , NAT_1:13;
L186: ( D20 /. ( R9 + 1 ) ) = ( R1 . ( R9 + 1 ) ) by L185 , L133 , L177 , FINSEQ_4:15;
L187: ( (the Target of R10) . ( R21 . R9 ) ) = ( D20 /. ( R9 + 1 ) ) by L186 , L161 , L175 , L183 , GRAPH_1:def 15;
thus L188: thesis by L187 , L184 , L1;
end;
end;
L190: D20 is_oriented_vertex_seq_of R21 by L160 , L133 , L29;
thus L191: thesis by L190;
end;
case L192: R21 = ( {} );
set D21 = the (Element of R10);
set D22 = <* D21 *>;
L193: ( len R21 ) = ( 0 ) by L192;
L194: ( len D22 ) = ( ( len R21 ) + 1 ) by L193 , FINSEQ_1:40;
L195: (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 <= ( len R21 )) implies ( R21 . R9 ) orientedly_joins ( D22 /. R9 ) , ( D22 /. ( R9 + 1 ) ))) by L192;
L196: D22 is_oriented_vertex_seq_of R21 by L195 , L194 , L29;
thus L197: thesis by L196;
end;
end;
thus L199: thesis by L119;
end;
theorem
L200: (for R10 being Graph holds (for R19 being (FinSequence of (the carrier of R10)) holds (for R20 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds ((R21 <> ( {} ) & R19 is_oriented_vertex_seq_of R21 & R20 is_oriented_vertex_seq_of R21) implies R19 = R20)))))
proof
let R10 being Graph;
let R19 being (FinSequence of (the carrier of R10));
let R20 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume that
L201: R21 <> ( {} )
and
L202: R19 is_oriented_vertex_seq_of R21
and
L203: R20 is_oriented_vertex_seq_of R21;
L204: ( len R19 ) = ( ( len R21 ) + 1 ) by L202 , L29;
L205: ( len R20 ) = ( ( len R21 ) + 1 ) by L203 , L29;
L206: (for B12 being Nat holds ((1 <= B12 & B12 <= ( len R19 )) implies ( R19 . B12 ) = ( R20 . B12 )))
proof
let C17 being Nat;
assume that
L207: 1 <= C17
and
L208: C17 <= ( len R19 );
L209: C17 <= ( ( len R21 ) + 1 ) by L202 , L208 , L29;
L210: C17 in ( NAT ) by ORDINAL1:def 12;
per cases ;
suppose L211: C17 < ( ( len R21 ) + 1 );

L212: C17 <= ( len R21 ) by L211 , NAT_1:13;
L213: ( R21 . C17 ) orientedly_joins ( R19 /. C17 ) , ( R19 /. ( C17 + 1 ) ) by L212 , L202 , L207 , L210 , L29;
L214: ( (the Source of R10) . ( R21 . C17 ) ) = ( R19 /. C17 ) by L213 , L1;
L215: ( R21 . C17 ) orientedly_joins ( R20 /. C17 ) , ( R20 /. ( C17 + 1 ) ) by L203 , L207 , L210 , L212 , L29;
L216: ( (the Source of R10) . ( R21 . C17 ) ) = ( R20 /. C17 ) by L215 , L1;
L217: ( R19 . C17 ) = ( R19 /. C17 ) by L207 , L208 , FINSEQ_4:15;
thus L218: thesis by L217 , L204 , L205 , L207 , L208 , L214 , L216 , FINSEQ_4:15;
end;
suppose L219: C17 >= ( ( len R21 ) + 1 );

L220: C17 = ( ( len R21 ) + 1 ) by L219 , L209 , XXREAL_0:1;
L221: ( C17 - 1 ) = ( len R21 ) by L220;
L222: ( ( 0 ) + 1 ) <= ( len R21 ) by L201 , NAT_1:13;
L223: ( C17 - 1 ) = ( C17 -' 1 ) by L222 , L220 , NAT_D:39;
L224: ( C17 -' 1 ) = ( len R21 ) by L221 , L222 , NAT_D:39;
L225: ( R21 . ( C17 -' 1 ) ) orientedly_joins ( R19 /. ( C17 -' 1 ) ) , ( R19 /. ( ( C17 -' 1 ) + 1 ) ) by L224 , L202 , L222 , L29;
L226: ( (the Target of R10) . ( R21 . ( C17 -' 1 ) ) ) = ( R19 /. ( ( C17 -' 1 ) + 1 ) ) by L225 , L1;
L227: ( R21 . ( C17 -' 1 ) ) orientedly_joins ( R20 /. ( C17 -' 1 ) ) , ( R20 /. ( ( C17 -' 1 ) + 1 ) ) by L203 , L222 , L224 , L29;
L228: ( (the Target of R10) . ( R21 . ( C17 -' 1 ) ) ) = ( R20 /. ( ( C17 -' 1 ) + 1 ) ) by L227 , L1;
L229: ( R19 . C17 ) = ( R19 /. C17 ) by L207 , L208 , FINSEQ_4:15;
thus L230: thesis by L229 , L204 , L205 , L207 , L208 , L223 , L226 , L228 , FINSEQ_4:15;
end;
end;
thus L232: thesis by L206 , L204 , L205 , FINSEQ_1:14;
end;
definition
let R10 being Graph;
let R21 being  oriented (Chain of R10);
assume L233: R21 <> ( {} );
func oriented-vertex-seq R21 -> (FinSequence of (the carrier of R10)) means 
it is_oriented_vertex_seq_of R21;
existence by L118;
uniqueness by L233 , L200;
end;
theorem
L235: (for R9 being (Element of ( NAT )) holds (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R19 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (for R22 being  oriented (Chain of R10) holds ((R18 is_oriented_vertex_seq_of R21 & R22 = ( R21 | ( Seg R9 ) ) & R19 = ( R18 | ( Seg ( R9 + 1 ) ) )) implies R19 is_oriented_vertex_seq_of R22)))))))
proof
let R9 being (Element of ( NAT ));
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R19 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
let R22 being  oriented (Chain of R10);
assume L236: R18 is_oriented_vertex_seq_of R21;
L237: ( len R18 ) = ( ( len R21 ) + 1 ) by L236 , L29;
assume that
L238: R22 = ( R21 | ( Seg R9 ) )
and
L239: R19 = ( R18 | ( Seg ( R9 + 1 ) ) );
L240:
now
per cases ;
suppose L241: R9 <= ( len R21 );

L242: ( R9 + 1 ) <= ( len R18 ) by L241 , L237 , XREAL_1:6;
L243: ( len R22 ) = R9 by L238 , L241 , FINSEQ_1:17;
L244: ( len R19 ) = ( R9 + 1 ) by L239 , L242 , FINSEQ_1:17;
thus L245: ( len R19 ) = ( ( len R22 ) + 1 ) by L239 , L242 , L243 , FINSEQ_1:17;
let C18 being (Element of ( NAT ));
assume that
L246: 1 <= C18
and
L247: C18 <= ( len R22 );
L248: C18 <= ( len R21 ) by L241 , L243 , L247 , XXREAL_0:2;
L249: C18 in ( Seg R9 ) by L243 , L246 , L247 , FINSEQ_1:1;
L250: ( R22 . C18 ) = ( R21 . C18 ) by L249 , L238 , FUNCT_1:49;
L251: C18 <= ( len R18 ) by L237 , L248 , NAT_1:12;
L252: C18 <= ( R9 + 1 ) by L243 , L247 , NAT_1:12;
L253: C18 in ( Seg ( R9 + 1 ) ) by L252 , L246 , FINSEQ_1:1;
L254: 1 <= ( C18 + 1 ) by NAT_1:12;
L255: ( C18 + 1 ) <= ( ( len R22 ) + 1 ) by L247 , XREAL_1:7;
L256: ( C18 + 1 ) in ( Seg ( R9 + 1 ) ) by L255 , L243 , L254 , FINSEQ_1:1;
L257: ( R19 . C18 ) = ( R18 . C18 ) by L239 , L253 , FUNCT_1:49;
L258: ( R19 . ( C18 + 1 ) ) = ( R18 . ( C18 + 1 ) ) by L239 , L256 , FUNCT_1:49;
L259: ( R18 /. C18 ) = ( R18 . C18 ) by L246 , L251 , FINSEQ_4:15;
L260: ( R18 /. ( C18 + 1 ) ) = ( R18 . ( C18 + 1 ) ) by L237 , L248 , L254 , FINSEQ_4:15 , XREAL_1:7;
L261: ( R19 /. C18 ) = ( R19 . C18 ) by L244 , L246 , L252 , FINSEQ_4:15;
L262: ( R19 /. ( C18 + 1 ) ) = ( R19 . ( C18 + 1 ) ) by L243 , L244 , L247 , L254 , FINSEQ_4:15 , XREAL_1:7;
thus L263: ( R22 . C18 ) orientedly_joins ( R19 /. C18 ) , ( R19 /. ( C18 + 1 ) ) by L262 , L236 , L246 , L248 , L250 , L257 , L258 , L259 , L260 , L261 , L29;
end;
suppose L264: ( len R21 ) <= R9;

L265: ( len R18 ) <= ( R9 + 1 ) by L264 , L237 , XREAL_1:6;
L266: R22 = R21 by L238 , L264 , FINSEQ_2:20;
L267: R19 = R18 by L239 , L265 , FINSEQ_2:20;
thus L268: (( len R19 ) = ( ( len R22 ) + 1 ) & (for B13 being (Element of ( NAT )) holds ((1 <= B13 & B13 <= ( len R22 )) implies ( R22 . B13 ) orientedly_joins ( R19 /. B13 ) , ( R19 /. ( B13 + 1 ) )))) by L267 , L236 , L266 , L29;
end;
end;
thus L270: thesis by L240 , L29;
end;
theorem
L271: (for R2 being FinSequence holds (for R8 being (Element of ( NAT )) holds (for R9 being (Element of ( NAT )) holds (for R10 being Graph holds (for R21 being  oriented (Chain of R10) holds ((1 <= R8 & R8 <= R9 & R9 <= ( len R21 ) & R2 = ( (R8 , R9) -cut R21 )) implies R2 is  oriented  oriented  oriented  oriented (Chain of R10)))))))
proof
let R2 being FinSequence;
let R8 being (Element of ( NAT ));
let R9 being (Element of ( NAT ));
let R10 being Graph;
let R21 being  oriented (Chain of R10);
assume that
L272: 1 <= R8
and
L273: R8 <= R9
and
L274: R9 <= ( len R21 )
and
L275: R2 = ( (R8 , R9) -cut R21 );
consider R18 being (FinSequence of (the carrier of R10)) such that L276: R18 is_oriented_vertex_seq_of R21 by L118;
L277: ( ( ( len R2 ) + R8 ) - R8 ) = ( ( R9 + 1 ) - R8 ) by L272 , L273 , L274 , L275 , GRAPH_2:def 1;
reconsider D23 = R2 as (Chain of R10) by L272 , L273 , L274 , L275 , GRAPH_2:41;
L278: (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 < ( len R2 )) implies ( (the Source of R10) . ( R2 . ( R9 + 1 ) ) ) = ( (the Target of R10) . ( R2 . R9 ) )))
proof
let C19 being (Element of ( NAT ));
assume that
L279: 1 <= C19
and
L280: C19 < ( len R2 );
L281: ( 1 - 1 ) <= ( R8 - 1 ) by L272 , XREAL_1:9;
L282: ( R8 - 1 ) = ( R8 -' 1 ) by L281 , XREAL_0:def 2;
reconsider D24 = ( R8 - 1 ) as (Element of ( NAT )) by L282;
reconsider D25 = ( D24 + C19 ) as (Element of ( NAT ));
set D26 = ( R18 /. D25 );
set D27 = ( R18 /. ( D25 + 1 ) );
L283: ( ( 0 ) + 1 ) <= C19 by L279;
consider R6 being (Element of ( NAT )) such that L284: ( 0 ) <= R6 and L285: R6 < ( len R2 ) and L286: C19 = ( R6 + 1 ) by L283 , L280 , GRAPH_2:1;
L287: D25 = ( R8 + R6 ) by L286;
L288: ( D25 + 1 ) = ( R8 + ( R6 + 1 ) ) by L286;
L289: ( R21 . ( D25 + 1 ) ) = ( R2 . ( C19 + 1 ) ) by L288 , L272 , L273 , L274 , L275 , L280 , GRAPH_2:def 1;
L290: ( R21 . D25 ) = ( R2 . C19 ) by L272 , L273 , L274 , L275 , L285 , L286 , L287 , GRAPH_2:def 1;
L291: ( 1 - 1 ) <= ( R8 - 1 ) by L272 , XREAL_1:9;
L292: ( ( 0 ) + 1 ) <= ( ( R8 - 1 ) + C19 ) by L291 , L279 , XREAL_1:7;
L293: D25 <= ( ( R8 - 1 ) + ( R9 - ( R8 - 1 ) ) ) by L277 , L280 , XREAL_1:6;
L294: D25 <= ( len R21 ) by L293 , L274 , XXREAL_0:2;
L295: ( R21 . D25 ) orientedly_joins D26 , D27 by L294 , L276 , L292 , L29;
L296: ( (the Target of R10) . ( R21 . D25 ) ) = D27 by L295 , L1;
L297: 1 < ( D25 + 1 ) by L292 , NAT_1:13;
L298: ( C19 + R8 ) < ( R9 + 1 ) by L277 , L280 , XREAL_1:6;
L299: ( C19 + R8 ) <= R9 by L298 , NAT_1:13;
L300: ( R8 + C19 ) <= ( len R21 ) by L299 , L274 , XXREAL_0:2;
L301: ( R21 . ( D25 + 1 ) ) orientedly_joins D27 , ( R18 /. ( ( D25 + 1 ) + 1 ) ) by L300 , L276 , L297 , L29;
thus L302: thesis by L301 , L289 , L290 , L296 , L1;
end;
L303: D23 is  oriented by L278 , GRAPH_1:def 15;
thus L304: thesis by L303;
end;
theorem
L305: (for R8 being (Element of ( NAT )) holds (for R9 being (Element of ( NAT )) holds (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R19 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (for R22 being  oriented (Chain of R10) holds ((1 <= R8 & R8 <= R9 & R9 <= ( len R21 ) & R22 = ( (R8 , R9) -cut R21 ) & R18 is_oriented_vertex_seq_of R21 & R19 = ( (R8 , ( R9 + 1 )) -cut R18 )) implies R19 is_oriented_vertex_seq_of R22))))))))
proof
let R8 being (Element of ( NAT ));
let R9 being (Element of ( NAT ));
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R19 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
let R22 being  oriented (Chain of R10);
assume that
L306: 1 <= R8
and
L307: R8 <= R9
and
L308: R9 <= ( len R21 );
assume L309: R22 = ( (R8 , R9) -cut R21 );
assume that
L310: R18 is_oriented_vertex_seq_of R21
and
L311: R19 = ( (R8 , ( R9 + 1 )) -cut R18 );
L312: ( len R18 ) = ( ( len R21 ) + 1 ) by L310 , L29;
L313: R8 <= ( R9 + 1 ) by L307 , NAT_1:12;
L314: ( R9 + 1 ) <= ( len R18 ) by L308 , L312 , XREAL_1:6;
L315: ( ( len R22 ) + R8 ) = ( R9 + 1 ) by L306 , L307 , L308 , L309 , GRAPH_2:def 1;
L316: ( ( len R19 ) + R8 ) = ( ( R9 + 1 ) + 1 ) by L306 , L311 , L313 , L314 , GRAPH_2:def 1;
thus L317: ( len R19 ) = ( ( len R22 ) + 1 ) by L316 , L315;
let C20 being (Element of ( NAT ));
assume that
L318: 1 <= C20
and
L319: C20 <= ( len R22 );
L320: ( ( 0 ) + 1 ) <= C20 by L318;
consider R6 being (Element of ( NAT )) such that L321: ( 0 ) <= R6 and L322: R6 < ( len R22 ) and L323: C20 = ( R6 + 1 ) by L320 , L319 , GRAPH_2:1;
set D28 = ( R8 + R6 );
set D29 = ( R18 /. D28 );
set D30 = ( R18 /. ( D28 + 1 ) );
L324: ( R8 + C20 ) <= ( ( len R22 ) + R8 ) by L319 , XREAL_1:7;
L325: ( ( ( R8 + R6 ) + 1 ) - 1 ) <= ( ( ( len R22 ) + R8 ) - 1 ) by L324 , L323 , XREAL_1:9;
L326: 1 <= D28 by L306 , NAT_1:12;
L327: D28 <= ( len R21 ) by L308 , L315 , L325 , XXREAL_0:2;
L328: ( R21 . D28 ) orientedly_joins D29 , D30 by L327 , L310 , L326 , L29;
L329: R6 < ( len R19 ) by L317 , L322 , NAT_1:13;
L330: ( R19 . C20 ) = ( R18 . D28 ) by L329 , L306 , L311 , L313 , L314 , L323 , GRAPH_2:def 1;
L331: ( R6 + 1 ) < ( len R19 ) by L317 , L322 , XREAL_1:6;
L332: ( ( R8 + R6 ) + 1 ) = ( R8 + ( R6 + 1 ) );
L333: ( R19 . ( C20 + 1 ) ) = ( R18 . ( D28 + 1 ) ) by L332 , L306 , L311 , L313 , L314 , L323 , L331 , GRAPH_2:def 1;
L334: D28 <= ( len R18 ) by L312 , L327 , NAT_1:12;
L335: 1 <= ( D28 + 1 ) by NAT_1:12;
L336: ( R18 /. D28 ) = ( R18 . D28 ) by L306 , L334 , FINSEQ_4:15 , NAT_1:12;
L337: ( R18 /. ( D28 + 1 ) ) = ( R18 . ( D28 + 1 ) ) by L312 , L327 , L335 , FINSEQ_4:15 , XREAL_1:7;
L338: ( ( 0 ) + 1 ) = 1;
L339: 1 <= C20 by L338 , L323 , NAT_1:13;
L340: C20 <= ( len R22 ) by L322 , L323 , NAT_1:13;
L341: C20 <= ( len R19 ) by L340 , L317 , NAT_1:12;
L342: 1 <= ( C20 + 1 ) by NAT_1:12;
L343: ( R19 /. C20 ) = ( R19 . C20 ) by L339 , L341 , FINSEQ_4:15;
L344: ( R19 /. ( C20 + 1 ) ) = ( R19 . ( C20 + 1 ) ) by L317 , L340 , L342 , FINSEQ_4:15 , XREAL_1:7;
thus L345: thesis by L344 , L306 , L307 , L308 , L309 , L322 , L323 , L328 , L330 , L333 , L336 , L337 , L343 , GRAPH_2:def 1;
end;
theorem
L346: (for R10 being Graph holds (for R19 being (FinSequence of (the carrier of R10)) holds (for R20 being (FinSequence of (the carrier of R10)) holds (for R22 being  oriented (Chain of R10) holds (for R23 being  oriented (Chain of R10) holds ((R19 is_oriented_vertex_seq_of R22 & R20 is_oriented_vertex_seq_of R23 & ( R19 . ( len R19 ) ) = ( R20 . 1 )) implies ( R22 ^ R23 ) is  oriented  oriented  oriented  oriented (Chain of R10)))))))
proof
let R10 being Graph;
let R19 being (FinSequence of (the carrier of R10));
let R20 being (FinSequence of (the carrier of R10));
let R22 being  oriented (Chain of R10);
let R23 being  oriented (Chain of R10);
assume that
L347: R19 is_oriented_vertex_seq_of R22
and
L348: R20 is_oriented_vertex_seq_of R23
and
L349: ( R19 . ( len R19 ) ) = ( R20 . 1 );
L350: R19 is_vertex_seq_of R22 by L347 , L31;
L351: R20 is_vertex_seq_of R23 by L348 , L31;
L352: ( len R19 ) = ( ( len R22 ) + 1 ) by L347 , L29;
L353: ( len R20 ) = ( ( len R23 ) + 1 ) by L348 , L29;
set D31 = ( R22 ^ R23 );
set D32 = ( R19 ^' R20 );
thus L354: ( R22 ^ R23 ) is  oriented  oriented  oriented  oriented (Chain of R10)
proof
reconsider D33 = ( R22 ^ R23 ) as (Chain of R10) by L349 , L350 , L351 , GRAPH_2:43;
L355: (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 < ( len D31 )) implies ( (the Source of R10) . ( D31 . ( R9 + 1 ) ) ) = ( (the Target of R10) . ( D31 . R9 ) )))
proof
let R9 being (Element of ( NAT ));
assume that
L356: 1 <= R9
and
L357: R9 < ( len D31 );
L358: R9 in ( dom D31 ) by L356 , L357 , FINSEQ_3:25;
L359: ( R9 + 1 ) <= ( len D31 ) by L357 , NAT_1:13;
L360: 1 < ( R9 + 1 ) by L356 , NAT_1:13;
L361:
now
per cases  by L358 , FINSEQ_1:25;
case L362: R9 in ( dom R22 );
L363: ( D31 . R9 ) = ( R22 . R9 ) by L362 , FINSEQ_1:def 7;
set D34 = ( R19 /. R9 );
set D35 = ( R19 /. ( R9 + 1 ) );
L364: 1 <= R9 by L362 , FINSEQ_3:25;
L365: R9 <= ( len R22 ) by L362 , FINSEQ_3:25;
L366: ( R22 . R9 ) orientedly_joins D34 , D35 by L365 , L347 , L364 , L29;
L367: R9 <= ( len R19 ) by L352 , L365 , NAT_1:12;
L368: ( R9 + 1 ) <= ( ( len R22 ) + 1 ) by L365 , XREAL_1:6;
L369: ( R9 + 1 ) <= ( len R19 ) by L368 , L347 , L29;
L370: ( R19 /. R9 ) = ( R19 . R9 ) by L364 , L367 , FINSEQ_4:15;
L371: ( R19 /. ( R9 + 1 ) ) = ( R19 . ( R9 + 1 ) ) by L369 , FINSEQ_4:15 , NAT_1:12;
L372: ( D32 . R9 ) = ( R19 . R9 ) by L364 , L367 , GRAPH_2:14;
L373: ( D32 . ( R9 + 1 ) ) = ( R19 . ( R9 + 1 ) ) by L369 , GRAPH_2:14 , NAT_1:12;
thus L374: (ex B14 , B15 being (Element of R10) st (B14 = ( D32 . R9 ) & B15 = ( D32 . ( R9 + 1 ) ) & ( D31 . R9 ) orientedly_joins B14 , B15)) by L373 , L363 , L366 , L370 , L371 , L372;
end;
case L375: (ex B16 being Nat st (B16 in ( dom R23 ) & R9 = ( ( len R22 ) + B16 )));
consider C21 being Nat such that L376: C21 in ( dom R23 ) and L377: R9 = ( ( len R22 ) + C21 ) by L375;
reconsider D36 = C21 as (Element of ( NAT )) by ORDINAL1:def 12;
L378: ( D31 . R9 ) = ( R23 . D36 ) by L376 , L377 , FINSEQ_1:def 7;
L379: 1 <= D36 by L376 , FINSEQ_3:25;
L380: D36 <= ( len R23 ) by L376 , FINSEQ_3:25;
L381: 1 <= ( D36 + 1 ) by NAT_1:12;
L382: D36 <= ( len R20 ) by L353 , L380 , NAT_1:12;
set D37 = ( R20 /. D36 );
set D38 = ( R20 /. ( D36 + 1 ) );
L383: ( R20 /. D36 ) = ( R20 . D36 ) by L379 , L382 , FINSEQ_4:15;
L384: ( R20 /. ( D36 + 1 ) ) = ( R20 . ( D36 + 1 ) ) by L353 , L380 , L381 , FINSEQ_4:15 , XREAL_1:7;
L385: ( R23 . D36 ) orientedly_joins D37 , D38 by L348 , L379 , L380 , L29;
L386: D36 <= ( len R20 ) by L353 , L380 , NAT_1:12;
L387: ( ( 0 ) + 1 ) <= D36 by L376 , FINSEQ_3:25;
consider R6 being (Element of ( NAT )) such that L388: ( 0 ) <= R6 and L389: R6 < ( len R20 ) and L390: D36 = ( R6 + 1 ) by L387 , L386 , GRAPH_2:1;
L391: ( D32 . R9 ) = ( R20 . D36 )
proof
per cases  by L379 , XXREAL_0:1;
suppose L392: 1 = D36;

L393: ( ( 0 ) + 1 ) <= ( len R19 ) by L352 , NAT_1:13;
thus L394: ( D32 . R9 ) = ( D32 . ( len R19 ) ) by L347 , L377 , L392 , L29
.= ( R20 . D36 ) by L349 , L392 , L393 , GRAPH_2:14;
end;
suppose L395: 1 < D36;

L396: 1 <= R6 by L395 , L390 , NAT_1:13;
thus L397: ( D32 . R9 ) = ( D32 . ( ( ( len R22 ) + 1 ) + R6 ) ) by L377 , L390
.= ( D32 . ( ( len R19 ) + R6 ) ) by L347 , L29
.= ( R20 . D36 ) by L389 , L390 , L396 , GRAPH_2:15;
end;
end;
L399: D36 < ( len R20 ) by L353 , L380 , NAT_1:13;
L400: ( D32 . ( R9 + 1 ) ) = ( D32 . ( ( ( len R22 ) + 1 ) + D36 ) ) by L377
.= ( D32 . ( ( len R19 ) + D36 ) ) by L347 , L29
.= ( R20 . ( D36 + 1 ) ) by L379 , L399 , GRAPH_2:15;
thus L401: (ex B17 , B18 being (Element of R10) st (B17 = ( D32 . R9 ) & B18 = ( D32 . ( R9 + 1 ) ) & ( D31 . R9 ) orientedly_joins B17 , B18)) by L400 , L378 , L383 , L384 , L385 , L391;
end;
end;
consider C22 , C23 being (Element of R10) such that L403: C22 = ( D32 . R9 ) and L404: C23 = ( D32 . ( R9 + 1 ) ) and L405: ( D31 . R9 ) orientedly_joins C22 , C23 by L361;
L406: ( R9 + 1 ) in ( dom D31 ) by L359 , L360 , FINSEQ_3:25;
L407:
now
per cases  by L406 , FINSEQ_1:25;
case L408: ( R9 + 1 ) in ( dom R22 );
L409: ( D31 . ( R9 + 1 ) ) = ( R22 . ( R9 + 1 ) ) by L408 , FINSEQ_1:def 7;
set D39 = ( R19 /. ( R9 + 1 ) );
set D40 = ( R19 /. ( ( R9 + 1 ) + 1 ) );
L410: 1 <= ( R9 + 1 ) by L408 , FINSEQ_3:25;
L411: ( R9 + 1 ) <= ( len R22 ) by L408 , FINSEQ_3:25;
L412: ( R22 . ( R9 + 1 ) ) orientedly_joins D39 , D40 by L411 , L347 , L410 , L29;
L413: ( R9 + 1 ) <= ( len R19 ) by L352 , L411 , NAT_1:12;
L414: ( ( R9 + 1 ) + 1 ) <= ( ( len R22 ) + 1 ) by L411 , XREAL_1:6;
L415: ( ( R9 + 1 ) + 1 ) <= ( len R19 ) by L414 , L347 , L29;
L416: ( R19 /. ( R9 + 1 ) ) = ( R19 . ( R9 + 1 ) ) by L410 , L413 , FINSEQ_4:15;
L417: ( R19 /. ( ( R9 + 1 ) + 1 ) ) = ( R19 . ( ( R9 + 1 ) + 1 ) ) by L415 , FINSEQ_4:15 , NAT_1:12;
L418: ( D32 . ( R9 + 1 ) ) = ( R19 . ( R9 + 1 ) ) by L410 , L413 , GRAPH_2:14;
L419: ( D32 . ( ( R9 + 1 ) + 1 ) ) = ( R19 . ( ( R9 + 1 ) + 1 ) ) by L415 , GRAPH_2:14 , NAT_1:12;
thus L420: (ex B19 , B20 being (Element of R10) st (B19 = ( D32 . ( R9 + 1 ) ) & B20 = ( D32 . ( ( R9 + 1 ) + 1 ) ) & ( D31 . ( R9 + 1 ) ) orientedly_joins B19 , B20)) by L419 , L409 , L412 , L416 , L417 , L418;
end;
case L421: (ex B21 being Nat st (B21 in ( dom R23 ) & ( R9 + 1 ) = ( ( len R22 ) + B21 )));
consider C24 being Nat such that L422: C24 in ( dom R23 ) and L423: ( R9 + 1 ) = ( ( len R22 ) + C24 ) by L421;
reconsider D41 = C24 as (Element of ( NAT )) by ORDINAL1:def 12;
L424: ( D31 . ( R9 + 1 ) ) = ( R23 . D41 ) by L422 , L423 , FINSEQ_1:def 7;
L425: 1 <= D41 by L422 , FINSEQ_3:25;
L426: D41 <= ( len R23 ) by L422 , FINSEQ_3:25;
L427: 1 <= ( D41 + 1 ) by NAT_1:12;
L428: D41 <= ( len R20 ) by L353 , L426 , NAT_1:12;
set D42 = ( R20 /. D41 );
set D43 = ( R20 /. ( D41 + 1 ) );
L429: ( R20 /. D41 ) = ( R20 . D41 ) by L425 , L428 , FINSEQ_4:15;
L430: ( R20 /. ( D41 + 1 ) ) = ( R20 . ( D41 + 1 ) ) by L353 , L426 , L427 , FINSEQ_4:15 , XREAL_1:7;
L431: ( R23 . D41 ) orientedly_joins D42 , D43 by L348 , L425 , L426 , L29;
L432: D41 <= ( len R20 ) by L353 , L426 , NAT_1:12;
L433: ( ( 0 ) + 1 ) <= D41 by L422 , FINSEQ_3:25;
consider R6 being (Element of ( NAT )) such that L434: ( 0 ) <= R6 and L435: R6 < ( len R20 ) and L436: D41 = ( R6 + 1 ) by L433 , L432 , GRAPH_2:1;
L437: ( D32 . ( R9 + 1 ) ) = ( R20 . D41 )
proof
per cases  by L425 , XXREAL_0:1;
suppose L438: 1 = D41;

L439: ( ( 0 ) + 1 ) <= ( len R19 ) by L352 , NAT_1:13;
thus L440: ( D32 . ( R9 + 1 ) ) = ( D32 . ( len R19 ) ) by L347 , L423 , L438 , L29
.= ( R20 . D41 ) by L349 , L438 , L439 , GRAPH_2:14;
end;
suppose L441: 1 < D41;

L442: 1 <= R6 by L441 , L436 , NAT_1:13;
thus L443: ( D32 . ( R9 + 1 ) ) = ( D32 . ( ( ( len R22 ) + 1 ) + R6 ) ) by L423 , L436
.= ( D32 . ( ( len R19 ) + R6 ) ) by L347 , L29
.= ( R20 . D41 ) by L435 , L436 , L442 , GRAPH_2:15;
end;
end;
L445: D41 < ( len R20 ) by L353 , L426 , NAT_1:13;
L446: ( D32 . ( ( R9 + 1 ) + 1 ) ) = ( D32 . ( ( ( len R22 ) + 1 ) + D41 ) ) by L423
.= ( D32 . ( ( len R19 ) + D41 ) ) by L347 , L29
.= ( R20 . ( D41 + 1 ) ) by L425 , L445 , GRAPH_2:15;
thus L447: (ex B22 , B23 being (Element of R10) st (B22 = ( D32 . ( R9 + 1 ) ) & B23 = ( D32 . ( ( R9 + 1 ) + 1 ) ) & ( D31 . ( R9 + 1 ) ) orientedly_joins B22 , B23)) by L446 , L424 , L429 , L430 , L431 , L437;
end;
end;
L449: ( (the Target of R10) . ( D31 . R9 ) ) = C23 by L405 , L1;
thus L450: thesis by L449 , L404 , L407 , L1;
end;
L451: D33 is  oriented by L355 , GRAPH_1:def 15;
thus L452: thesis by L451;
end;

end;
theorem
L355: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R19 being (FinSequence of (the carrier of R10)) holds (for R20 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (for R22 being  oriented (Chain of R10) holds (for R23 being  oriented (Chain of R10) holds ((R19 is_oriented_vertex_seq_of R22 & R20 is_oriented_vertex_seq_of R23 & ( R19 . ( len R19 ) ) = ( R20 . 1 ) & R21 = ( R22 ^ R23 ) & R18 = ( R19 ^' R20 )) implies R18 is_oriented_vertex_seq_of R21))))))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R19 being (FinSequence of (the carrier of R10));
let R20 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
let R22 being  oriented (Chain of R10);
let R23 being  oriented (Chain of R10);
assume that
L356: R19 is_oriented_vertex_seq_of R22
and
L357: R20 is_oriented_vertex_seq_of R23
and
L358: ( R19 . ( len R19 ) ) = ( R20 . 1 );
assume that
L359: R21 = ( R22 ^ R23 )
and
L360: R18 = ( R19 ^' R20 );
L361: ( len R19 ) = ( ( len R22 ) + 1 ) by L356 , L29;
L362: ( len R20 ) = ( ( len R23 ) + 1 ) by L357 , L29;
L363: R20 <> ( {} ) by L362;
set D44 = ( R22 ^ R23 );
set D45 = ( R19 ^' R20 );
L364: ( ( len D45 ) + 1 ) = ( ( len R19 ) + ( len R20 ) ) by L363 , GRAPH_2:13;
L365: ( len D45 ) = ( ( ( len R22 ) + ( len R23 ) ) + 1 ) by L364 , L361 , L362
.= ( ( len D44 ) + 1 ) by FINSEQ_1:22;
reconsider D46 = D45 as (FinSequence of (the carrier of R10));
L366:
now
let C25 being (Element of ( NAT ));
assume that
L367: 1 <= C25
and
L368: C25 <= ( len D44 );
L369: C25 <= ( len D46 ) by L365 , L368 , NAT_1:12;
L370: 1 <= ( C25 + 1 ) by NAT_1:12;
L371: ( D46 /. C25 ) = ( D46 . C25 ) by L367 , L369 , FINSEQ_4:15;
L372: ( D46 /. ( C25 + 1 ) ) = ( D46 . ( C25 + 1 ) ) by L365 , L368 , L370 , FINSEQ_4:15 , XREAL_1:7;
L373: C25 in ( dom D44 ) by L367 , L368 , FINSEQ_3:25;
per cases  by L373 , FINSEQ_1:25;
suppose L374: C25 in ( dom R22 );

set D47 = ( R19 /. C25 );
set D48 = ( R19 /. ( C25 + 1 ) );
L375: 1 <= C25 by L374 , FINSEQ_3:25;
L376: C25 <= ( len R22 ) by L374 , FINSEQ_3:25;
L377: ( R22 . C25 ) orientedly_joins D47 , D48 by L376 , L356 , L375 , L29;
L378: C25 <= ( len R19 ) by L361 , L376 , NAT_1:12;
L379: ( C25 + 1 ) <= ( ( len R22 ) + 1 ) by L376 , XREAL_1:6;
L380: ( C25 + 1 ) <= ( len R19 ) by L379 , L356 , L29;
L381: ( R19 /. C25 ) = ( R19 . C25 ) by L375 , L378 , FINSEQ_4:15;
L382: ( R19 /. ( C25 + 1 ) ) = ( R19 . ( C25 + 1 ) ) by L380 , FINSEQ_4:15 , NAT_1:12;
L383: ( D46 . C25 ) = ( R19 . C25 ) by L375 , L378 , GRAPH_2:14;
L384: ( D46 . ( C25 + 1 ) ) = ( R19 . ( C25 + 1 ) ) by L380 , GRAPH_2:14 , NAT_1:12;
thus L385: ( D44 . C25 ) orientedly_joins ( D46 /. C25 ) , ( D46 /. ( C25 + 1 ) ) by L384 , L371 , L372 , L374 , L377 , L381 , L382 , L383 , FINSEQ_1:def 7;
end;
suppose L386: (ex B24 being Nat st (B24 in ( dom R23 ) & C25 = ( ( len R22 ) + B24 )));

consider C26 being Nat such that L387: C26 in ( dom R23 ) and L388: C25 = ( ( len R22 ) + C26 ) by L386;
reconsider D49 = C26 as (Element of ( NAT )) by ORDINAL1:def 12;
L389: ( D44 . C25 ) = ( R23 . D49 ) by L387 , L388 , FINSEQ_1:def 7;
L390: 1 <= D49 by L387 , FINSEQ_3:25;
L391: D49 <= ( len R23 ) by L387 , FINSEQ_3:25;
L392: 1 <= ( D49 + 1 ) by NAT_1:12;
L393: D49 <= ( len R20 ) by L362 , L391 , NAT_1:12;
L394: ( R20 /. D49 ) = ( R20 . D49 ) by L393 , L390 , FINSEQ_4:15;
L395: ( R20 /. ( D49 + 1 ) ) = ( R20 . ( D49 + 1 ) ) by L362 , L391 , L392 , FINSEQ_4:15 , XREAL_1:7;
L396: D49 <= ( len R20 ) by L362 , L391 , NAT_1:12;
L397: ( ( 0 ) + 1 ) <= D49 by L387 , FINSEQ_3:25;
consider R6 being (Element of ( NAT )) such that L398: ( 0 ) <= R6 and L399: R6 < ( len R20 ) and L400: D49 = ( R6 + 1 ) by L397 , L396 , GRAPH_2:1;
L401: ( D46 . C25 ) = ( R20 . D49 )
proof
per cases  by L390 , XXREAL_0:1;
suppose L402: 1 = D49;

L403: ( ( 0 ) + 1 ) <= ( len R19 ) by L361 , NAT_1:13;
thus L404: ( D46 . C25 ) = ( D46 . ( len R19 ) ) by L356 , L388 , L402 , L29
.= ( R20 . D49 ) by L358 , L402 , L403 , GRAPH_2:14;
end;
suppose L405: 1 < D49;

L406: 1 <= R6 by L405 , L400 , NAT_1:13;
thus L407: ( D46 . C25 ) = ( D46 . ( ( ( len R22 ) + 1 ) + R6 ) ) by L388 , L400
.= ( D46 . ( ( len R19 ) + R6 ) ) by L356 , L29
.= ( R20 . D49 ) by L399 , L400 , L406 , GRAPH_2:15;
end;
end;
L409: D49 < ( len R20 ) by L362 , L391 , NAT_1:13;
L410: ( D46 . ( C25 + 1 ) ) = ( D46 . ( ( ( len R22 ) + 1 ) + D49 ) ) by L388
.= ( D46 . ( ( len R19 ) + D49 ) ) by L356 , L29
.= ( R20 . ( D49 + 1 ) ) by L390 , L409 , GRAPH_2:15;
thus L411: ( D44 . C25 ) orientedly_joins ( D46 /. C25 ) , ( D46 /. ( C25 + 1 ) ) by L410 , L357 , L371 , L372 , L389 , L390 , L391 , L394 , L395 , L401 , L29;
end;
end;
thus L413: thesis by L366 , L359 , L360 , L365 , L29;
end;
begin
L414: (for R10 being Graph holds (for R13 being (Element of R10) holds <* R13 *> is_oriented_vertex_seq_of ( {} )))
proof
let R10 being Graph;
let R13 being (Element of R10);
set D50 = <* R13 *>;
set D51 = ( {} );
L415: ( len D50 ) = ( ( 0 ) + 1 ) by FINSEQ_1:39
.= ( ( len D51 ) + 1 );
L416: (for R9 being (Element of ( NAT )) holds ((1 <= R9 & R9 <= ( len D51 )) implies ( D51 . R9 ) orientedly_joins ( D50 /. R9 ) , ( D50 /. ( R9 + 1 ) )));
thus L417: thesis by L416 , L415 , L29;
end;
definition
let R10 being Graph;
let C27 being  oriented (Chain of R10);
attr C27 is  Simple
means
:L418: (ex R18 being (FinSequence of (the carrier of R10)) st (R18 is_oriented_vertex_seq_of C27 & (for R9 being (Element of ( NAT )) holds (for R8 being (Element of ( NAT )) holds ((1 <= R9 & R9 < R8 & R8 <= ( len R18 ) & ( R18 . R9 ) = ( R18 . R8 )) implies (R9 = 1 & R8 = ( len R18 )))))));
end;
registration
let R10 being Graph;
cluster  Simple for  oriented  oriented  oriented  oriented (Chain of R10);
existence
proof
set D52 = the  empty  oriented (Chain of R10);
set D53 = the (Element of R10);
reconsider D54 = <* D53 *> as (FinSequence of (the carrier of R10));
L420: D54 is_oriented_vertex_seq_of D52 by L414;
L421: (for R9 being (Element of ( NAT )) holds (for R8 being (Element of ( NAT )) holds ((1 <= R9 & R9 < R8 & R8 <= ( len D54 ) & ( D54 . R9 ) = ( D54 . R8 )) implies (R9 = 1 & R8 = ( len D54 )))))
proof
let R9 being (Element of ( NAT ));
let R8 being (Element of ( NAT ));
assume that
L422: 1 <= R9
and
L423: R9 < R8
and
L424: R8 <= ( len D54 )
and
L425: ( D54 . R9 ) = ( D54 . R8 );
L426: 1 < R8 by L422 , L423 , XXREAL_0:2;
thus L427: thesis by L426 , L424 , FINSEQ_1:39;
end;
L428: D52 is  Simple by L421 , L420 , L418;
thus L429: thesis by L428;
end;
end;
registration
let R10 being Graph;
cluster  oriented  simple for (Chain of R10);
existence
proof
set D55 = the  empty  oriented (Chain of R10);
set D56 = the (Element of R10);
reconsider D57 = <* D56 *> as (FinSequence of (the carrier of R10));
L431: D57 is_vertex_seq_of D55 by L414 , L31;
reconsider D58 = D55 as (Chain of R10);
L432: (for R9 being (Element of ( NAT )) holds (for R8 being (Element of ( NAT )) holds ((1 <= R9 & R9 < R8 & R8 <= ( len D57 ) & ( D57 . R9 ) = ( D57 . R8 )) implies (R9 = 1 & R8 = ( len D57 )))))
proof
let R9 being (Element of ( NAT ));
let R8 being (Element of ( NAT ));
assume that
L433: 1 <= R9
and
L434: R9 < R8
and
L435: R8 <= ( len D57 )
and
L436: ( D57 . R9 ) = ( D57 . R8 );
L437: 1 < R8 by L433 , L434 , XXREAL_0:2;
thus L438: thesis by L437 , L435 , FINSEQ_1:39;
end;
L439: D58 is  simple by L432 , L431 , GRAPH_2:def 9;
thus L440: thesis by L439;
end;
end;
theorem
L442: (for R9 being (Element of ( NAT )) holds (for R10 being Graph holds (for B25 being  oriented (Chain of R10) holds ( B25 | ( Seg R9 ) ) is  oriented  oriented  oriented  oriented (Chain of R10))))
proof
let R9 being (Element of ( NAT ));
let R10 being Graph;
let C28 being  oriented (Chain of R10);
reconsider D59 = ( C28 | ( Seg R9 ) ) as FinSequence by FINSEQ_1:15;
L443: (for R5 being (Element of ( NAT )) holds ((1 <= R5 & R5 < ( len D59 )) implies ( (the Source of R10) . ( ( C28 | ( Seg R9 ) ) . ( R5 + 1 ) ) ) = ( (the Target of R10) . ( ( C28 | ( Seg R9 ) ) . R5 ) )))
proof
let R5 being (Element of ( NAT ));
assume that
L444: 1 <= R5
and
L445: R5 < ( len D59 );
per cases ;
suppose L446: R9 >= ( len C28 );

L447: ( C28 | ( Seg R9 ) ) = C28 by L446 , FINSEQ_3:49;
thus L448: thesis by L447 , L444 , L445 , GRAPH_1:def 15;
end;
suppose L449: R9 < ( len C28 );

L450: ( len D59 ) = R9 by L449 , FINSEQ_1:17;
L451: R5 < ( len C28 ) by L450 , L445 , L449 , XXREAL_0:2;
L452: R5 in ( Seg R9 ) by L444 , L445 , L450 , FINSEQ_1:1;
L453: ( ( C28 | ( Seg R9 ) ) . R5 ) = ( C28 . R5 ) by L452 , FUNCT_1:49;
L454: ( R5 + 1 ) <= R9 by L445 , L450 , NAT_1:13;
L455: 1 < ( R5 + 1 ) by L444 , NAT_1:13;
L456: ( R5 + 1 ) in ( Seg R9 ) by L455 , L454 , FINSEQ_1:1;
L457: ( ( C28 | ( Seg R9 ) ) . ( R5 + 1 ) ) = ( C28 . ( R5 + 1 ) ) by L456 , FUNCT_1:49;
thus L458: thesis by L457 , L444 , L451 , L453 , GRAPH_1:def 15;
end;
end;
thus L460: thesis by L443 , GRAPH_1:4 , GRAPH_1:def 15;
end;
theorem
L461: (for R9 being (Element of ( NAT )) holds (for R10 being Graph holds (for R24 being  oriented  simple (Chain of R10) holds ( R24 | ( Seg R9 ) ) is  oriented  simple  oriented  simple  oriented  simple  oriented  simple (Chain of R10)))) by L442 , GRAPH_2:45;
theorem
L462: (for R10 being Graph holds (for R24 being  oriented  simple (Chain of R10) holds (for B26 being  oriented (Chain of R10) holds (B26 = R24 implies B26 is  Simple))))
proof
let R10 being Graph;
let R24 being  oriented  simple (Chain of R10);
let C29 being  oriented (Chain of R10);
assume L463: C29 = R24;
consider R18 being (FinSequence of (the carrier of R10)) such that L464: R18 is_oriented_vertex_seq_of C29 by L118;
L465: R18 is_vertex_seq_of R24 by L463 , L464 , L31;
L466: (for R9 being (Element of ( NAT )) holds (for R8 being (Element of ( NAT )) holds ((1 <= R9 & R9 < R8 & R8 <= ( len R18 ) & ( R18 . R9 ) = ( R18 . R8 )) implies (R9 = 1 & R8 = ( len R18 ))))) by L465 , GRAPH_2:47;
thus L467: thesis by L466 , L464 , L418;
end;
theorem
L468: (for R10 being Graph holds (for B27 being  Simple  oriented (Chain of R10) holds B27 is  oriented  simple  oriented  simple  oriented  simple  oriented  simple (Chain of R10)))
proof
let R10 being Graph;
let C30 being  Simple  oriented (Chain of R10);
consider R18 being (FinSequence of (the carrier of R10)) such that L469: R18 is_oriented_vertex_seq_of C30 and L470: (for R9 being (Element of ( NAT )) holds (for R8 being (Element of ( NAT )) holds ((1 <= R9 & R9 < R8 & R8 <= ( len R18 ) & ( R18 . R9 ) = ( R18 . R8 )) implies (R9 = 1 & R8 = ( len R18 ))))) by L418;
L471: R18 is_vertex_seq_of C30 by L469 , L31;
thus L472: thesis by L471 , L470 , GRAPH_2:def 9;
end;
L473: (for B28 being FinSequence holds (for B29 , B30 being (Element of ( NAT )) holds ((1 <= B29 & B29 <= ( B30 + 1 ) & B30 <= ( len B28 )) implies (( ( len ( (B29 , B30) -cut B28 ) ) + B29 ) = ( B30 + 1 ) & (for B31 being (Element of ( NAT )) holds (B31 < ( len ( (B29 , B30) -cut B28 ) ) implies ( ( (B29 , B30) -cut B28 ) . ( B31 + 1 ) ) = ( B28 . ( B29 + B31 ) )))))))
proof
let C31 being FinSequence;
let C32 , C33 being (Element of ( NAT ));
assume that
L474: 1 <= C32
and
L475: C32 <= ( C33 + 1 )
and
L476: C33 <= ( len C31 );
L477: (C32 = ( C33 + 1 ) or C32 < ( C33 + 1 )) by L475 , XXREAL_0:1;
per cases  by L477 , NAT_1:13;
suppose L478: C32 = ( C33 + 1 );

L479: C33 < C32 by L478 , XREAL_1:29;
L480: (not (1 <= C32 & C32 <= C33 & C33 <= ( len C31 ))) by L478 , XREAL_1:29;
L481: ( (C32 , C33) -cut C31 ) = ( {} ) by L479 , GRAPH_2:def 1;
thus L482: ( ( len ( (C32 , C33) -cut C31 ) ) + C32 ) = ( C33 + 1 ) by L481 , L478 , CARD_1:27;
thus L483: thesis by L480 , CARD_1:27 , GRAPH_2:def 1;
end;
suppose L484: C32 <= C33;

thus L485: thesis by L484 , L474 , L476 , GRAPH_2:def 1;
end;
end;
theorem
L487: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (((not R21 is  Simple) & R18 is_oriented_vertex_seq_of R21) implies (ex B32 being (Subset of R21) st (ex B33 being (Subset of R18) st (ex R22 being  oriented (Chain of R10) st (ex R19 being (FinSequence of (the carrier of R10)) st (( len R22 ) < ( len R21 ) & R19 is_oriented_vertex_seq_of R22 & ( len R19 ) < ( len R18 ) & ( R18 . 1 ) = ( R19 . 1 ) & ( R18 . ( len R18 ) ) = ( R19 . ( len R19 ) ) & ( Seq B32 ) = R22 & ( Seq B33 ) = R19)))))))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume that
L488: (not R21 is  Simple)
and
L489: R18 is_oriented_vertex_seq_of R21;
consider C34 , C35 being (Element of ( NAT )) such that L490: 1 <= C34 and L491: C34 < C35 and L492: C35 <= ( len R18 ) and L493: ( R18 . C34 ) = ( R18 . C35 ) and L494: (C34 <> 1 or C35 <> ( len R18 )) by L488 , L489 , L418;
L495: ( len R18 ) = ( ( len R21 ) + 1 ) by L489 , L29;
L496: ( C35 - C34 ) > ( C34 - C34 ) by L491 , XREAL_1:9;
reconsider D60 = ( C34 -' 1 ) as (Element of ( NAT ));
L497: ( 1 - 1 ) <= ( C34 - 1 ) by L490 , XREAL_1:9;
L498: ( C34 - 1 ) = ( C34 -' 1 ) by L497 , XREAL_0:def 2;
L499: ( D60 + 1 ) = ( ( C34 - 1 ) + 1 ) by L497 , XREAL_0:def 2
.= C34;
per cases  by L494;
suppose L500: (C34 <> 1 & C35 <> ( len R18 ));

L501: 1 < C34 by L500 , L490 , XXREAL_0:1;
L502: ( 1 + 1 ) <= C34 by L501 , NAT_1:13;
L503: ( ( 1 + 1 ) - 1 ) <= ( C34 - 1 ) by L502 , XREAL_1:9;
L504: C34 < ( len R18 ) by L491 , L492 , XXREAL_0:2;
L505: ( C34 - 1 ) < ( ( ( len R21 ) + 1 ) - 1 ) by L504 , L495 , XREAL_1:9;
L506: 1 <= ( D60 + 1 ) by NAT_1:12;
L507: C35 < ( len R18 ) by L492 , L500 , XXREAL_0:1;
L508: C35 <= ( len R21 ) by L507 , L495 , NAT_1:13;
L509: 1 <= C35 by L490 , L491 , XXREAL_0:2;
L510: C35 <= ( len R21 ) by L495 , L507 , NAT_1:13;
reconsider D61 = ( (1 , D60) -cut R21 ) as  oriented (Chain of R10) by L498 , L503 , L505 , L271;
reconsider D62 = ( (C35 , ( len R21 )) -cut R21 ) as  oriented (Chain of R10) by L509 , L510 , L271;
set D63 = ( (1 , C34) -cut R18 );
set D64 = ( (C35 , ( ( len R21 ) + 1 )) -cut R18 );
set D65 = ( (( C35 + 1 ) , ( ( len R21 ) + 1 )) -cut R18 );
reconsider D66 = D63 as (FinSequence of (the carrier of R10));
reconsider D67 = D64 as (FinSequence of (the carrier of R10));
L511: C34 <= ( len R18 ) by L491 , L492 , XXREAL_0:2;
L512: 1 <= C35 by L490 , L491 , XXREAL_0:2;
L513: C35 <= ( ( len R21 ) + 1 ) by L489 , L492 , L29;
L514: ( ( len R21 ) + 1 ) <= ( len R18 ) by L489 , L29;
L515: D66 is_oriented_vertex_seq_of D61 by L489 , L499 , L503 , L505 , L305;
L516: D67 is_oriented_vertex_seq_of D62 by L489 , L509 , L510 , L305;
L517: ( len D66 ) = ( ( len D61 ) + 1 ) by L515 , L29;
L518: ( len D67 ) = ( ( len D62 ) + 1 ) by L516 , L29;
L519: ( 1 - 1 ) <= ( C35 - 1 ) by L509 , XREAL_1:9;
L520: ( C35 -' 1 ) = ( C35 - 1 ) by L519 , XREAL_0:def 2;
reconsider D68 = ( C35 - 1 ) as (Element of ( NAT )) by L520;
L521: C35 = ( D68 + 1 );
L522: ( ( len D62 ) + C35 ) = ( ( len R21 ) + 1 ) by L509 , L510 , GRAPH_2:def 1;
L523: ( C35 - C35 ) <= ( ( len R21 ) - C35 ) by L508 , XREAL_1:9;
L524: ( ( len D62 ) -' 1 ) = ( ( len D62 ) - 1 ) by L523 , L522 , XREAL_0:def 2;
reconsider D69 = ( ( len D62 ) - 1 ) as (Element of ( NAT )) by L524;
L525: ( C35 + D69 ) = ( D68 + ( len D62 ) );
L526: ( ( 0 ) + 1 ) = 1;
L527: 1 <= ( len D67 ) by L526 , L518 , NAT_1:13;
L528: D67 = ( (( ( 0 ) + 1 ) , ( len D67 )) -cut D67 ) by GRAPH_2:7
.= ( ( (( ( 0 ) + 1 ) , 1) -cut D67 ) ^ ( (( 1 + 1 ) , ( len D67 )) -cut D67 ) ) by L527 , GRAPH_2:8;
L529: D68 <= C35 by L521 , NAT_1:12;
L530: D67 = ( ( (( D68 + 1 ) , C35) -cut R18 ) ^ ( (( C35 + 1 ) , ( ( len R21 ) + 1 )) -cut R18 ) ) by L529 , L492 , L495 , GRAPH_2:8;
L531: ( (1 , 1) -cut D67 ) = <* ( D67 . ( ( 0 ) + 1 ) ) *> by L527 , GRAPH_2:6
.= <* ( R18 . ( C35 + ( 0 ) ) ) *> by L512 , L513 , L514 , L518 , GRAPH_2:def 1
.= ( (C35 , C35) -cut R18 ) by L492 , L509 , GRAPH_2:6;
L532: D65 = ( (2 , ( len D67 )) -cut D67 ) by L531 , L528 , L530 , FINSEQ_1:33;
set D70 = { R7 where R7 is (Element of ( NAT )) : ((1 <= R7 & R7 <= D60) or (C35 <= R7 & R7 <= ( len R21 ))) };
deffunc H1(set) = ( R21 . $1 );
consider C36 being Function such that L533: ( dom C36 ) = D70 and L534: (for R25 being set holds (R25 in D70 implies ( C36 . R25 ) = H1(R25))) from FUNCT_1:sch 3;
L535: D70 c= ( Seg ( len R21 ) )
proof
let C37 being set;
assume L536: C37 in D70;
consider C38 being (Element of ( NAT )) such that L537: C37 = C38 and L538: ((1 <= C38 & C38 <= D60) or (C35 <= C38 & C38 <= ( len R21 ))) by L536;
L539: 1 <= C38 by L509 , L538 , XXREAL_0:2;
L540: C38 <= ( len R21 ) by L498 , L505 , L538 , XXREAL_0:2;
thus L541: thesis by L540 , L537 , L539 , FINSEQ_1:1;
end;
reconsider D71 = C36 as FinSubsequence by L535 , L533 , FINSEQ_1:def 12;
L542: D71 c= R21
proof
let C39 being set;
assume L543: C39 in D71;
consider C40 , C41 being set such that L544: [ C40 , C41 ] = C39 by L543 , RELAT_1:def 1;
L545: C40 in ( dom D71 ) by L543 , L544 , FUNCT_1:1;
L546: C41 = ( D71 . C40 ) by L543 , L544 , FUNCT_1:1;
consider C42 being (Element of ( NAT )) such that L547: C40 = C42 and L548: ((1 <= C42 & C42 <= D60) or (C35 <= C42 & C42 <= ( len R21 ))) by L533 , L545;
L549: 1 <= C42 by L509 , L548 , XXREAL_0:2;
L550: C42 <= ( len R21 ) by L498 , L505 , L548 , XXREAL_0:2;
L551: C40 in ( dom R21 ) by L550 , L547 , L549 , FINSEQ_3:25;
L552: C41 = ( R21 . C42 ) by L533 , L534 , L545 , L546 , L547;
thus L553: thesis by L552 , L544 , L547 , L551 , FUNCT_1:1;
end;
reconsider D72 = D71 as (Subset of R21) by L542;
take D72;
set D73 = { R7 where R7 is (Element of ( NAT )) : ((1 <= R7 & R7 <= C34) or (( C35 + 1 ) <= R7 & R7 <= ( len R18 ))) };
deffunc H2(set) = ( R18 . $1 );
consider C43 being Function such that L554: ( dom C43 ) = D73 and L555: (for R25 being set holds (R25 in D73 implies ( C43 . R25 ) = H2(R25))) from FUNCT_1:sch 3;
L556: D73 c= ( Seg ( len R18 ) )
proof
let C44 being set;
assume L557: C44 in D73;
consider C45 being (Element of ( NAT )) such that L558: C44 = C45 and L559: ((1 <= C45 & C45 <= C34) or (( C35 + 1 ) <= C45 & C45 <= ( len R18 ))) by L557;
L560: 1 <= ( C35 + 1 ) by NAT_1:12;
L561: 1 <= C45 by L560 , L559 , XXREAL_0:2;
L562: C45 <= ( len R18 ) by L511 , L559 , XXREAL_0:2;
thus L563: thesis by L562 , L558 , L561 , FINSEQ_1:1;
end;
reconsider D74 = C43 as FinSubsequence by L556 , L554 , FINSEQ_1:def 12;
L564: D74 c= R18
proof
let C46 being set;
assume L565: C46 in D74;
consider C47 , C48 being set such that L566: [ C47 , C48 ] = C46 by L565 , RELAT_1:def 1;
L567: C47 in ( dom D74 ) by L565 , L566 , FUNCT_1:1;
L568: C48 = ( D74 . C47 ) by L565 , L566 , FUNCT_1:1;
consider C49 being (Element of ( NAT )) such that L569: C47 = C49 and L570: ((1 <= C49 & C49 <= C34) or (( C35 + 1 ) <= C49 & C49 <= ( len R18 ))) by L554 , L567;
L571: 1 <= ( C35 + 1 ) by NAT_1:12;
L572: 1 <= C49 by L571 , L570 , XXREAL_0:2;
L573: C49 <= ( len R18 ) by L511 , L570 , XXREAL_0:2;
L574: C47 in ( dom R18 ) by L573 , L569 , L572 , FINSEQ_3:25;
L575: C48 = ( R18 . C49 ) by L554 , L555 , L567 , L568 , L569;
thus L576: thesis by L575 , L566 , L569 , L574 , FUNCT_1:1;
end;
reconsider D75 = D74 as (Subset of R18) by L564;
take D75;
L577: ( D67 . 1 ) = ( R18 . C35 ) by L512 , L513 , L514 , GRAPH_2:12;
L578: ( D66 . ( len D66 ) ) = ( R18 . C34 ) by L490 , L511 , GRAPH_2:12;
reconsider D76 = ( D61 ^ D62 ) as  oriented (Chain of R10) by L578 , L493 , L515 , L516 , L577 , L346;
take D76;
take D77 = ( D66 ^' D67 );
L579: D77 = ( D66 ^ D65 ) by L532 , GRAPH_2:def 2;
L580: ( ( len D61 ) + 1 ) = ( D60 + 1 ) by L498 , L505 , L506 , L473;
L581: ( - ( - ( C35 - C34 ) ) ) = ( C35 - C34 );
L582: ( - ( C35 - C34 ) ) < ( 0 ) by L581 , L496;
L583: ( len D76 ) = ( ( C34 - 1 ) + ( ( ( len R21 ) - C35 ) + 1 ) ) by L498 , L522 , L580 , FINSEQ_1:22
.= ( ( len R21 ) + ( C34 + ( - C35 ) ) );
thus L584: ( len D76 ) < ( len R21 ) by L583 , L582 , XREAL_1:30;
thus L585: D77 is_oriented_vertex_seq_of D76 by L493 , L515 , L516 , L577 , L578 , L355;
L586: ( len D77 ) = ( ( len D76 ) + 1 ) by L585 , L29;
thus L587: ( len D77 ) < ( len R18 ) by L586 , L495 , L584 , XREAL_1:6;
L588: 1 <= ( 1 + ( len D61 ) ) by NAT_1:12;
L589: 1 <= ( len D66 ) by L588 , L515 , L29;
L590: ( D77 . 1 ) = ( D66 . 1 ) by L589 , GRAPH_2:14;
thus L591: ( R18 . 1 ) = ( D77 . 1 ) by L590 , L490 , L511 , GRAPH_2:12;
L592: ( D67 . ( len D67 ) ) = ( R18 . ( ( len R21 ) + 1 ) ) by L512 , L513 , L514 , GRAPH_2:12;
L593: ( C35 - C35 ) <= ( ( len R21 ) - C35 ) by L510 , XREAL_1:9;
L594: ( ( 0 ) + 1 ) <= ( ( ( len R21 ) - C35 ) + 1 ) by L593 , XREAL_1:6;
L595: 1 < ( len D67 ) by L594 , L518 , L522 , NAT_1:13;
thus L596: ( R18 . ( len R18 ) ) = ( D77 . ( len D77 ) ) by L595 , L495 , L592 , GRAPH_2:16;
set D78 = { B34 where B34 is (Element of ( NAT )) : (1 <= B34 & B34 <= D60) };
set D79 = { B35 where B35 is (Element of ( NAT )) : (C35 <= B35 & B35 <= ( len R21 )) };
L597:
now
let C50 being set;
thus L598:now
assume L599: C50 in D70;
L600: (ex B36 being (Element of ( NAT )) st (C50 = B36 & ((1 <= B36 & B36 <= D60) or (C35 <= B36 & B36 <= ( len R21 ))))) by L599;
L601: (C50 in D78 or C50 in D79) by L600;
thus L602: C50 in ( D78 \/ D79 ) by L601 , XBOOLE_0:def 3;
end;
assume L603: C50 in ( D78 \/ D79 );
per cases  by L603 , XBOOLE_0:def 3;
suppose L604: C50 in D78;

L605: (ex B37 being (Element of ( NAT )) st (C50 = B37 & 1 <= B37 & B37 <= D60)) by L604;
thus L606: C50 in D70 by L605;
end;
suppose L607: C50 in D79;

L608: (ex B38 being (Element of ( NAT )) st (C50 = B38 & C35 <= B38 & B38 <= ( len R21 ))) by L607;
thus L609: C50 in D70 by L608;
end;
end;
L611: D70 = ( D78 \/ D79 ) by L597 , TARSKI:1;
L612: (D78 c= ( Seg ( len R21 ) ) & D79 c= ( Seg ( len R21 ) ))
proof
thus L613:now
let C51 being set;
assume L614: C51 in D78;
consider C52 being (Element of ( NAT )) such that L615: C51 = C52 and L616: 1 <= C52 and L617: C52 <= D60 by L614;
L618: C52 <= ( len R21 ) by L498 , L505 , L617 , XXREAL_0:2;
thus L619: C51 in ( Seg ( len R21 ) ) by L618 , L615 , L616 , FINSEQ_1:1;
end;
let C53 being set;
assume L620: C53 in D79;
consider C54 being (Element of ( NAT )) such that L621: C53 = C54 and L622: C35 <= C54 and L623: C54 <= ( len R21 ) by L620;
L624: 1 <= C54 by L512 , L622 , XXREAL_0:2;
thus L625: thesis by L624 , L621 , L623 , FINSEQ_1:1;
end;
reconsider D80 = D78 as  finite set by L612 , FINSET_1:1;
reconsider D81 = D79 as  finite set by L612 , FINSET_1:1;
L626:
now
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume L627: R5 in D80;
consider C55 being (Element of ( NAT )) such that L628: C55 = R5 and L629: 1 <= C55 and L630: C55 <= D60 by L627;
assume L631: R6 in D81;
L632: (ex B39 being (Element of ( NAT )) st (B39 = R6 & C35 <= B39 & B39 <= ( len R21 ))) by L631;
L633: D60 < C35 by L491 , L499 , NAT_1:13;
L634: C55 < C35 by L633 , L630 , XXREAL_0:2;
thus L635: R5 < R6 by L634 , L628 , L632 , XXREAL_0:2;
end;
L636: ( Sgm ( D80 \/ D81 ) ) = ( ( Sgm D80 ) ^ ( Sgm D81 ) ) by L626 , L612 , FINSEQ_3:42;
L637: ( C35 + D69 ) = ( len R21 ) by L522;
L638: ( card D81 ) = ( ( ( len D62 ) + ( - 1 ) ) + 1 ) by L637 , GRAPH_2:4
.= ( len D62 );
L639: ( len ( Sgm D81 ) ) = ( card D81 ) by L612 , FINSEQ_3:39;
L640: D80 = ( Seg D60 ) by FINSEQ_1:def 1;
L641: ( Sgm D80 ) = ( idseq D60 ) by L640 , FINSEQ_3:48;
L642: ( dom ( Sgm D80 ) ) = ( Seg D60 ) by L641 , RELAT_1:45;
L643: ( rng ( Sgm D80 ) ) = D80 by L612 , FINSEQ_1:def 13;
L644: ( rng ( Sgm D80 ) ) c= ( dom D72 ) by L643 , L533 , L611 , XBOOLE_1:7;
L645: ( rng ( Sgm D81 ) ) = D81 by L612 , FINSEQ_1:def 13;
L646: ( rng ( Sgm D81 ) ) c= ( dom D72 ) by L645 , L533 , L611 , XBOOLE_1:7;
set D82 = ( Sgm D80 );
set D83 = ( Sgm D81 );
L647:
now
let C56 being set;
thus L648:now
assume L649: C56 in D61;
consider C57 , C58 being set such that L650: C56 = [ C57 , C58 ] by L649 , RELAT_1:def 1;
L651: C57 in ( dom D61 ) by L649 , L650 , FUNCT_1:1;
L652: C58 = ( D61 . C57 ) by L649 , L650 , FUNCT_1:1;
reconsider D84 = C57 as (Element of ( NAT )) by L651;
L653: 1 <= D84 by L651 , FINSEQ_3:25;
L654: D84 <= ( len D61 ) by L651 , FINSEQ_3:25;
L655: C57 in ( dom D82 ) by L654 , L580 , L642 , L653 , FINSEQ_1:1;
L656: D84 = ( D82 . D84 ) by L655 , L641 , L642 , FUNCT_1:18;
L657: D84 in D70 by L580 , L653 , L654;
L658: C57 in ( dom ( D72 * D82 ) ) by L657 , L533 , L655 , L656 , FUNCT_1:11;
L659: ( ( 0 ) + 1 ) <= D84 by L651 , FINSEQ_3:25;
consider C59 being (Element of ( NAT )) such that L660: ( 0 ) <= C59 and L661: C59 < D60 and L662: D84 = ( C59 + 1 ) by L659 , L580 , L654 , GRAPH_2:1;
L663: ( ( D72 * D82 ) . C57 ) = ( D72 . D84 ) by L656 , L658 , FUNCT_1:12
.= ( R21 . ( 1 + C59 ) ) by L533 , L657 , L662 , GRFUNC_1:2
.= C58 by L498 , L505 , L506 , L580 , L652 , L661 , L662 , L473;
thus L664: C56 in ( D72 * ( Sgm D80 ) ) by L663 , L650 , L658 , FUNCT_1:1;
end;
assume L665: C56 in ( D72 * ( Sgm D80 ) );
consider C60 , C61 being set such that L666: C56 = [ C60 , C61 ] by L665 , RELAT_1:def 1;
L667: C60 in ( dom ( D72 * D82 ) ) by L665 , L666 , FUNCT_1:1;
L668: C61 = ( ( D72 * D82 ) . C60 ) by L665 , L666 , FUNCT_1:1;
L669: ( ( D72 * D82 ) . C60 ) = ( D72 . ( D82 . C60 ) ) by L667 , FUNCT_1:12;
L670: C60 in ( dom D82 ) by L667 , FUNCT_1:11;
L671: C60 in { B40 where B40 is (Element of ( NAT )) : (1 <= B40 & B40 <= D60) } by L670 , L642 , FINSEQ_1:def 1;
consider R7 being (Element of ( NAT )) such that L672: R7 = C60 and L673: 1 <= R7 and L674: R7 <= D60 by L671;
L675: R7 in ( dom D72 ) by L533 , L673 , L674;
L676: R7 = ( D82 . R7 ) by L641 , L642 , L670 , L672 , FUNCT_1:18;
L677: R7 in ( dom D61 ) by L580 , L673 , L674 , FINSEQ_3:25;
L678: ( ( 0 ) + 1 ) <= R7 by L673;
L679: (ex B41 being (Element of ( NAT )) st (( 0 ) <= B41 & B41 < D60 & R7 = ( B41 + 1 ))) by L678 , L674 , GRAPH_2:1;
L680: ( D61 . R7 ) = ( R21 . R7 ) by L679 , L498 , L505 , L506 , L580 , L473
.= C61 by L668 , L669 , L672 , L675 , L676 , GRFUNC_1:2;
thus L681: C56 in D61 by L680 , L666 , L672 , L677 , FUNCT_1:1;
end;
L682: D61 = ( D72 * ( Sgm D80 ) ) by L647 , TARSKI:1;
L683:
now
let C62 being set;
thus L684:now
assume L685: C62 in D62;
consider C63 , C64 being set such that L686: C62 = [ C63 , C64 ] by L685 , RELAT_1:def 1;
L687: C63 in ( dom D62 ) by L685 , L686 , FUNCT_1:1;
L688: C64 = ( D62 . C63 ) by L685 , L686 , FUNCT_1:1;
reconsider D85 = C63 as (Element of ( NAT )) by L687;
L689: 1 <= D85 by L687 , FINSEQ_3:25;
L690: D85 <= ( len D62 ) by L687 , FINSEQ_3:25;
L691: C63 in ( dom D83 ) by L638 , L639 , L687 , FINSEQ_3:29;
L692: ( D68 + D85 ) = ( D83 . D85 ) by L521 , L522 , L525 , L689 , L690 , GRAPH_2:5;
L693: ( D83 . D85 ) in ( rng D83 ) by L691 , FUNCT_1:def 3;
L694: C63 in ( dom ( D72 * D83 ) ) by L693 , L646 , L691 , FUNCT_1:11;
L695: ( ( 0 ) + 1 ) <= D85 by L687 , FINSEQ_3:25;
consider C65 being (Element of ( NAT )) such that L696: ( 0 ) <= C65 and L697: C65 < ( len D62 ) and L698: D85 = ( C65 + 1 ) by L695 , L690 , GRAPH_2:1;
L699: ( ( D72 * D83 ) . C63 ) = ( D72 . ( D68 + D85 ) ) by L692 , L694 , FUNCT_1:12
.= ( R21 . ( C35 + C65 ) ) by L646 , L692 , L693 , L698 , GRFUNC_1:2
.= C64 by L509 , L510 , L688 , L697 , L698 , GRAPH_2:def 1;
thus L700: C62 in ( D72 * ( Sgm D81 ) ) by L699 , L686 , L694 , FUNCT_1:1;
end;
assume L701: C62 in ( D72 * ( Sgm D81 ) );
consider C66 , C67 being set such that L702: C62 = [ C66 , C67 ] by L701 , RELAT_1:def 1;
L703: C66 in ( dom ( D72 * D83 ) ) by L701 , L702 , FUNCT_1:1;
L704: C67 = ( ( D72 * D83 ) . C66 ) by L701 , L702 , FUNCT_1:1;
L705: C66 in ( dom D83 ) by L703 , FUNCT_1:11;
L706: ( D83 . C66 ) in ( dom D72 ) by L703 , FUNCT_1:11;
reconsider D86 = C66 as (Element of ( NAT )) by L705;
L707: D86 in ( dom D62 ) by L638 , L639 , L705 , FINSEQ_3:29;
L708: 1 <= D86 by L705 , FINSEQ_3:25;
L709: D86 <= ( len D62 ) by L638 , L639 , L705 , FINSEQ_3:25;
L710: ( D68 + D86 ) = ( D83 . D86 ) by L709 , L521 , L522 , L525 , L708 , GRAPH_2:5;
L711: ( ( 0 ) + 1 ) <= D86 by L705 , FINSEQ_3:25;
consider C68 being (Element of ( NAT )) such that L712: ( 0 ) <= C68 and L713: C68 < ( len D62 ) and L714: D86 = ( C68 + 1 ) by L711 , L709 , GRAPH_2:1;
L715: ( D62 . D86 ) = ( R21 . ( ( D68 + 1 ) + C68 ) ) by L509 , L510 , L713 , L714 , GRAPH_2:def 1
.= ( D72 . ( D83 . D86 ) ) by L706 , L710 , L714 , GRFUNC_1:2
.= C67 by L704 , L705 , FUNCT_1:13;
thus L716: C62 in D62 by L715 , L702 , L707 , FUNCT_1:1;
end;
L717: D62 = ( D72 * ( Sgm D81 ) ) by L683 , TARSKI:1;
L718: ( Seq D72 ) = ( D72 * ( ( Sgm D80 ) ^ ( Sgm D81 ) ) ) by L533 , L611 , L636 , FINSEQ_1:def 14;
thus L719: ( Seq D72 ) = D76 by L718 , L644 , L646 , L682 , L717 , GRAPH_2:24;
set D87 = { B42 where B42 is (Element of ( NAT )) : (1 <= B42 & B42 <= C34) };
set D88 = { B43 where B43 is (Element of ( NAT )) : (( C35 + 1 ) <= B43 & B43 <= ( len R18 )) };
L720:
now
let C69 being set;
thus L721:now
assume L722: C69 in D73;
L723: (ex B44 being (Element of ( NAT )) st (C69 = B44 & ((1 <= B44 & B44 <= C34) or (( C35 + 1 ) <= B44 & B44 <= ( len R18 ))))) by L722;
L724: (C69 in D87 or C69 in D88) by L723;
thus L725: C69 in ( D87 \/ D88 ) by L724 , XBOOLE_0:def 3;
end;
assume L726: C69 in ( D87 \/ D88 );
per cases  by L726 , XBOOLE_0:def 3;
suppose L727: C69 in D87;

L728: (ex B45 being (Element of ( NAT )) st (C69 = B45 & 1 <= B45 & B45 <= C34)) by L727;
thus L729: C69 in D73 by L728;
end;
suppose L730: C69 in D88;

L731: (ex B46 being (Element of ( NAT )) st (C69 = B46 & ( C35 + 1 ) <= B46 & B46 <= ( len R18 ))) by L730;
thus L732: C69 in D73 by L731;
end;
end;
L734: D73 = ( D87 \/ D88 ) by L720 , TARSKI:1;
L735: (D87 c= ( Seg ( len R18 ) ) & D88 c= ( Seg ( len R18 ) ))
proof
thus L736:now
let C70 being set;
assume L737: C70 in D87;
consider C71 being (Element of ( NAT )) such that L738: C70 = C71 and L739: 1 <= C71 and L740: C71 <= C34 by L737;
L741: C71 <= ( len R18 ) by L511 , L740 , XXREAL_0:2;
thus L742: C70 in ( Seg ( len R18 ) ) by L741 , L738 , L739 , FINSEQ_1:1;
end;
let C72 being set;
assume L743: C72 in D88;
consider C73 being (Element of ( NAT )) such that L744: C72 = C73 and L745: ( C35 + 1 ) <= C73 and L746: C73 <= ( len R18 ) by L743;
L747: 1 <= ( C35 + 1 ) by NAT_1:12;
L748: 1 <= C73 by L747 , L745 , XXREAL_0:2;
thus L749: thesis by L748 , L744 , L746 , FINSEQ_1:1;
end;
reconsider D89 = D87 as  finite set by L735 , FINSET_1:1;
reconsider D90 = D88 as  finite set by L735 , FINSET_1:1;
L750:
now
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume L751: R5 in D89;
consider C74 being (Element of ( NAT )) such that L752: C74 = R5 and L753: 1 <= C74 and L754: C74 <= C34 by L751;
assume L755: R6 in D90;
consider C75 being (Element of ( NAT )) such that L756: C75 = R6 and L757: ( C35 + 1 ) <= C75 and L758: C75 <= ( len R18 ) by L755;
L759: C35 <= ( C35 + 1 ) by NAT_1:12;
L760: C35 <= C75 by L759 , L757 , XXREAL_0:2;
L761: C74 < C35 by L491 , L754 , XXREAL_0:2;
thus L762: R5 < R6 by L761 , L752 , L756 , L760 , XXREAL_0:2;
end;
L763: ( Sgm ( D89 \/ D90 ) ) = ( ( Sgm D89 ) ^ ( Sgm D90 ) ) by L750 , L735 , FINSEQ_3:42;
L764: 1 <= ( len D67 ) by L518 , NAT_1:12;
L765: ( 1 - 1 ) <= ( ( len D67 ) - 1 ) by L764 , XREAL_1:9;
L766: ( ( len D67 ) -' 1 ) = ( ( len D67 ) - 1 ) by L765 , XREAL_0:def 2;
reconsider D91 = ( ( len D67 ) - 1 ) as (Element of ( NAT )) by L766;
L767: ( D91 -' 1 ) = ( D91 - 1 ) by L518 , L522 , L523 , XREAL_0:def 2;
reconsider D92 = ( D91 - 1 ) as (Element of ( NAT )) by L767;
L768: ( ( C35 + 1 ) + D92 ) = ( C35 + ( ( D91 - 1 ) + 1 ) )
.= ( C35 + ( ( ( ( ( len R21 ) - C35 ) + 1 ) + 1 ) - 1 ) ) by L516 , L522 , L29
.= ( ( len R21 ) + 1 );
L769: ( card D90 ) = ( D92 + 1 ) by L768 , L495 , GRAPH_2:4
.= D91;
L770: 1 <= ( C35 + 1 ) by NAT_1:12;
L771: ( C35 + 1 ) <= ( ( ( len R21 ) + 1 ) + 1 ) by L513 , XREAL_1:6;
L772: ( ( len D67 ) + C35 ) = ( ( ( len R21 ) + 1 ) + 1 ) by L512 , L513 , L514 , GRAPH_2:def 1
.= ( ( len D65 ) + ( C35 + 1 ) ) by L514 , L770 , L771 , L473
.= ( ( ( len D65 ) + 1 ) + C35 );
L773: ( len ( Sgm D90 ) ) = ( card D90 ) by L735 , FINSEQ_3:39;
L774: D89 = ( Seg C34 ) by FINSEQ_1:def 1;
L775: ( Sgm D89 ) = ( idseq C34 ) by L774 , FINSEQ_3:48;
L776: ( dom ( Sgm D89 ) ) = ( Seg C34 ) by L775 , RELAT_1:45;
L777: ( rng ( Sgm D89 ) ) = D89 by L735 , FINSEQ_1:def 13;
L778: ( rng ( Sgm D89 ) ) c= ( dom D75 ) by L777 , L554 , L734 , XBOOLE_1:7;
L779: ( rng ( Sgm D90 ) ) = D90 by L735 , FINSEQ_1:def 13;
L780: ( rng ( Sgm D90 ) ) c= ( dom D75 ) by L779 , L554 , L734 , XBOOLE_1:7;
set D93 = ( Sgm D89 );
set D94 = ( Sgm D90 );
L781:
now
let C76 being set;
thus L782:now
assume L783: C76 in D66;
consider C77 , C78 being set such that L784: C76 = [ C77 , C78 ] by L783 , RELAT_1:def 1;
L785: C77 in ( dom D66 ) by L783 , L784 , FUNCT_1:1;
L786: C78 = ( D66 . C77 ) by L783 , L784 , FUNCT_1:1;
reconsider D95 = C77 as (Element of ( NAT )) by L785;
L787: 1 <= D95 by L785 , FINSEQ_3:25;
L788: D95 <= ( len D66 ) by L785 , FINSEQ_3:25;
L789: C77 in ( dom D93 ) by L788 , L498 , L517 , L580 , L776 , L787 , FINSEQ_1:1;
L790: D95 = ( D93 . D95 ) by L789 , L775 , L776 , FUNCT_1:18;
L791: D95 in D73 by L498 , L517 , L580 , L787 , L788;
L792: C77 in ( dom ( D75 * D93 ) ) by L791 , L554 , L789 , L790 , FUNCT_1:11;
L793: ( ( 0 ) + 1 ) <= D95 by L785 , FINSEQ_3:25;
consider C79 being (Element of ( NAT )) such that L794: ( 0 ) <= C79 and L795: C79 < C34 and L796: D95 = ( C79 + 1 ) by L793 , L498 , L517 , L580 , L788 , GRAPH_2:1;
L797: ( ( D75 * D93 ) . C77 ) = ( D75 . D95 ) by L790 , L792 , FUNCT_1:12
.= ( R18 . ( 1 + C79 ) ) by L554 , L791 , L796 , GRFUNC_1:2
.= C78 by L490 , L498 , L511 , L517 , L580 , L786 , L795 , L796 , GRAPH_2:def 1;
thus L798: C76 in ( D75 * ( Sgm D89 ) ) by L797 , L784 , L792 , FUNCT_1:1;
end;
assume L799: C76 in ( D75 * ( Sgm D89 ) );
consider C80 , C81 being set such that L800: C76 = [ C80 , C81 ] by L799 , RELAT_1:def 1;
L801: C80 in ( dom ( D75 * D93 ) ) by L799 , L800 , FUNCT_1:1;
L802: C81 = ( ( D75 * D93 ) . C80 ) by L799 , L800 , FUNCT_1:1;
L803: ( ( D75 * D93 ) . C80 ) = ( D75 . ( D93 . C80 ) ) by L801 , FUNCT_1:12;
L804: C80 in ( dom D93 ) by L801 , FUNCT_1:11;
L805: C80 in { B47 where B47 is (Element of ( NAT )) : (1 <= B47 & B47 <= C34) } by L804 , L776 , FINSEQ_1:def 1;
consider R7 being (Element of ( NAT )) such that L806: R7 = C80 and L807: 1 <= R7 and L808: R7 <= C34 by L805;
L809: R7 in ( dom D75 ) by L554 , L807 , L808;
L810: R7 = ( D93 . R7 ) by L775 , L776 , L804 , L806 , FUNCT_1:18;
L811: R7 in ( dom D66 ) by L498 , L517 , L580 , L807 , L808 , FINSEQ_3:25;
L812: ( ( 0 ) + 1 ) <= R7 by L807;
L813: (ex B48 being (Element of ( NAT )) st (( 0 ) <= B48 & B48 < C34 & R7 = ( B48 + 1 ))) by L812 , L808 , GRAPH_2:1;
L814: ( D66 . R7 ) = ( R18 . R7 ) by L813 , L490 , L498 , L511 , L517 , L580 , GRAPH_2:def 1
.= C81 by L802 , L803 , L806 , L809 , L810 , GRFUNC_1:2;
thus L815: C76 in D66 by L814 , L800 , L806 , L811 , FUNCT_1:1;
end;
L816: D66 = ( D75 * ( Sgm D89 ) ) by L781 , TARSKI:1;
L817: ( ( C35 + 1 ) + D92 ) = ( C35 + D91 );
L818: 1 <= ( C35 + 1 ) by NAT_1:12;
L819: ( C35 + 1 ) <= ( ( ( len R21 ) + 1 ) + 1 ) by L492 , L495 , XREAL_1:7;
L820:
now
let C82 being set;
thus L821:now
assume L822: C82 in D65;
consider C83 , C84 being set such that L823: C82 = [ C83 , C84 ] by L822 , RELAT_1:def 1;
L824: C83 in ( dom D65 ) by L822 , L823 , FUNCT_1:1;
L825: C84 = ( D65 . C83 ) by L822 , L823 , FUNCT_1:1;
reconsider D96 = C83 as (Element of ( NAT )) by L824;
L826: 1 <= D96 by L824 , FINSEQ_3:25;
L827: D96 <= ( len D65 ) by L824 , FINSEQ_3:25;
L828: C83 in ( dom D94 ) by L769 , L772 , L773 , L824 , FINSEQ_3:29;
L829: ( C35 + D96 ) = ( D94 . D96 ) by L495 , L768 , L772 , L817 , L826 , L827 , GRAPH_2:5;
L830: ( D94 . D96 ) in ( rng D94 ) by L828 , FUNCT_1:def 3;
L831: C83 in ( dom ( D75 * D94 ) ) by L830 , L780 , L828 , FUNCT_1:11;
L832: ( ( 0 ) + 1 ) <= D96 by L824 , FINSEQ_3:25;
consider C85 being (Element of ( NAT )) such that L833: ( 0 ) <= C85 and L834: C85 < ( len D65 ) and L835: D96 = ( C85 + 1 ) by L832 , L827 , GRAPH_2:1;
L836: ( ( D75 * D94 ) . C83 ) = ( D75 . ( C35 + D96 ) ) by L829 , L831 , FUNCT_1:12
.= ( R18 . ( ( C35 + 1 ) + C85 ) ) by L780 , L829 , L830 , L835 , GRFUNC_1:2
.= C84 by L495 , L818 , L819 , L825 , L834 , L835 , L473;
thus L837: C82 in ( D75 * ( Sgm D90 ) ) by L836 , L823 , L831 , FUNCT_1:1;
end;
assume L838: C82 in ( D75 * ( Sgm D90 ) );
consider C86 , C87 being set such that L839: C82 = [ C86 , C87 ] by L838 , RELAT_1:def 1;
L840: C86 in ( dom ( D75 * D94 ) ) by L838 , L839 , FUNCT_1:1;
L841: C87 = ( ( D75 * D94 ) . C86 ) by L838 , L839 , FUNCT_1:1;
L842: C86 in ( dom D94 ) by L840 , FUNCT_1:11;
L843: ( D94 . C86 ) in ( dom D75 ) by L840 , FUNCT_1:11;
reconsider D97 = C86 as (Element of ( NAT )) by L842;
L844: D97 in ( dom D65 ) by L769 , L772 , L773 , L842 , FINSEQ_3:29;
L845: 1 <= D97 by L842 , FINSEQ_3:25;
L846: D97 <= ( len D65 ) by L769 , L772 , L773 , L842 , FINSEQ_3:25;
L847: ( C35 + D97 ) = ( D94 . D97 ) by L846 , L495 , L768 , L772 , L817 , L845 , GRAPH_2:5;
L848: ( ( 0 ) + 1 ) <= D97 by L842 , FINSEQ_3:25;
consider C88 being (Element of ( NAT )) such that L849: ( 0 ) <= C88 and L850: C88 < ( len D65 ) and L851: D97 = ( C88 + 1 ) by L848 , L846 , GRAPH_2:1;
L852: ( D65 . D97 ) = ( R18 . ( ( C35 + 1 ) + C88 ) ) by L495 , L818 , L819 , L850 , L851 , L473
.= ( D75 . ( D94 . D97 ) ) by L843 , L847 , L851 , GRFUNC_1:2
.= C87 by L841 , L842 , FUNCT_1:13;
thus L853: C82 in D65 by L852 , L839 , L844 , FUNCT_1:1;
end;
L854: D65 = ( D75 * ( Sgm D90 ) ) by L820 , TARSKI:1;
L855: ( Seq D75 ) = ( D75 * ( ( Sgm D89 ) ^ ( Sgm D90 ) ) ) by L554 , L734 , L763 , FINSEQ_1:def 14;
thus L856: thesis by L855 , L579 , L778 , L780 , L816 , L854 , GRAPH_2:24;
end;
suppose L857: (C34 = 1 & C35 <> ( len R18 ));

L858: C35 < ( len R18 ) by L857 , L492 , XXREAL_0:1;
L859: C35 <= ( len R21 ) by L858 , L495 , NAT_1:13;
L860: 1 < C35 by L490 , L491 , XXREAL_0:2;
L861: 1 <= C35 by L490 , L491 , XXREAL_0:2;
L862: C35 <= ( len R21 ) by L495 , L858 , NAT_1:13;
reconsider D98 = ( (C35 , ( len R21 )) -cut R21 ) as  oriented (Chain of R10) by L859 , L860 , L271;
set D99 = ( (C35 , ( ( len R21 ) + 1 )) -cut R18 );
L863: D99 is_oriented_vertex_seq_of D98 by L489 , L859 , L860 , L305;
set D100 = { R7 where R7 is (Element of ( NAT )) : (C35 <= R7 & R7 <= ( len R21 )) };
deffunc H3(set) = ( R21 . $1 );
consider C89 being Function such that L864: ( dom C89 ) = D100 and L865: (for R25 being set holds (R25 in D100 implies ( C89 . R25 ) = H3(R25))) from FUNCT_1:sch 3;
L866: D100 c= ( Seg ( len R21 ) )
proof
let C90 being set;
assume L867: C90 in D100;
consider C91 being (Element of ( NAT )) such that L868: C90 = C91 and L869: C35 <= C91 and L870: C91 <= ( len R21 ) by L867;
L871: 1 <= C91 by L860 , L869 , XXREAL_0:2;
thus L872: thesis by L871 , L868 , L870 , FINSEQ_1:1;
end;
reconsider D101 = C89 as FinSubsequence by L866 , L864 , FINSEQ_1:def 12;
L873: D101 c= R21
proof
let C92 being set;
assume L874: C92 in D101;
consider C93 , C94 being set such that L875: [ C93 , C94 ] = C92 by L874 , RELAT_1:def 1;
L876: C93 in ( dom D101 ) by L874 , L875 , FUNCT_1:1;
L877: C94 = ( D101 . C93 ) by L874 , L875 , FUNCT_1:1;
consider C95 being (Element of ( NAT )) such that L878: C93 = C95 and L879: C35 <= C95 and L880: C95 <= ( len R21 ) by L864 , L876;
L881: 1 <= C95 by L860 , L879 , XXREAL_0:2;
L882: C93 in ( dom R21 ) by L881 , L878 , L880 , FINSEQ_3:25;
L883: C94 = ( R21 . C95 ) by L864 , L865 , L876 , L877 , L878;
thus L884: thesis by L883 , L875 , L878 , L882 , FUNCT_1:1;
end;
reconsider D102 = D101 as (Subset of R21) by L873;
take D102;
set D103 = { R7 where R7 is (Element of ( NAT )) : (C35 <= R7 & R7 <= ( len R18 )) };
deffunc H4(set) = ( R18 . $1 );
consider C96 being Function such that L885: ( dom C96 ) = D103 and L886: (for R25 being set holds (R25 in D103 implies ( C96 . R25 ) = H4(R25))) from FUNCT_1:sch 3;
L887: D103 c= ( Seg ( len R18 ) )
proof
let C97 being set;
assume L888: C97 in D103;
consider C98 being (Element of ( NAT )) such that L889: C97 = C98 and L890: C35 <= C98 and L891: C98 <= ( len R18 ) by L888;
L892: 1 <= C98 by L860 , L890 , XXREAL_0:2;
thus L893: thesis by L892 , L889 , L891 , FINSEQ_1:1;
end;
reconsider D104 = C96 as FinSubsequence by L887 , L885 , FINSEQ_1:def 12;
L894: D104 c= R18
proof
let C99 being set;
assume L895: C99 in D104;
consider R25 being set, R26 being set such that L896: [ R25 , R26 ] = C99 by L895 , RELAT_1:def 1;
L897: R25 in ( dom D104 ) by L895 , L896 , FUNCT_1:1;
L898: R26 = ( D104 . R25 ) by L895 , L896 , FUNCT_1:1;
consider C100 being (Element of ( NAT )) such that L899: R25 = C100 and L900: C35 <= C100 and L901: C100 <= ( len R18 ) by L885 , L897;
L902: 1 <= C100 by L860 , L900 , XXREAL_0:2;
L903: R25 in ( dom R18 ) by L902 , L899 , L901 , FINSEQ_3:25;
L904: R26 = ( R18 . C100 ) by L885 , L886 , L897 , L898 , L899;
thus L905: thesis by L904 , L896 , L899 , L903 , FUNCT_1:1;
end;
reconsider D105 = D104 as (Subset of R18) by L894;
take D105;
take D106 = D98;
take D107 = D99;
L906: ( ( len D98 ) + C35 ) = ( ( len R21 ) + 1 ) by L491 , L492 , L495 , L857 , L473;
L907: ( C35 - C35 ) <= ( ( len R21 ) - C35 ) by L859 , XREAL_1:9;
L908: ( 1 - 1 ) <= ( C35 - 1 ) by L860 , XREAL_1:9;
L909: ( C35 -' 1 ) = ( C35 - 1 ) by L908 , XREAL_0:def 2;
reconsider D108 = ( C35 - 1 ) as (Element of ( NAT )) by L909;
L910: C35 = ( D108 + 1 );
L911: ( ( len D98 ) -' 1 ) = ( ( len D98 ) - 1 ) by L906 , L907 , XREAL_0:def 2;
reconsider D109 = ( ( len D98 ) - 1 ) as (Element of ( NAT )) by L911;
L912: ( C35 + D109 ) = ( D108 + ( len D98 ) );
L913: C35 <= ( ( ( len R21 ) + 1 ) + 1 ) by L492 , L495 , NAT_1:12;
L914: ( ( len R21 ) + 1 ) <= ( len R18 ) by L489 , L29;
L915: ( ( len D99 ) + C35 ) = ( ( ( len R21 ) + 1 ) + 1 ) by L914 , L491 , L857 , L913 , L473;
L916: ( len D99 ) = ( ( ( ( len R21 ) - C35 ) + 1 ) + 1 ) by L915;
L917: 1 <= ( len D99 ) by L916 , L906 , NAT_1:12;
L918: ( len D98 ) = ( ( len R21 ) + ( ( - C35 ) + 1 ) ) by L906;
L919: ( 1 - 1 ) < ( C35 - 1 ) by L860 , XREAL_1:9;
L920: ( 0 ) < ( - ( - ( C35 - 1 ) ) ) by L919;
L921: ( - ( C35 - 1 ) ) < ( 0 ) by L920;
thus L922: ( len D106 ) < ( len R21 ) by L921 , L918 , XREAL_1:30;
thus L923: D107 is_oriented_vertex_seq_of D106 by L489 , L861 , L862 , L305;
L924: ( len D107 ) = ( ( len D106 ) + 1 ) by L863 , L29;
thus L925: ( len D107 ) < ( len R18 ) by L924 , L495 , L922 , XREAL_1:6;
thus L926: ( R18 . 1 ) = ( D107 . 1 ) by L491 , L492 , L493 , L495 , L857 , GRAPH_2:12;
thus L927: ( R18 . ( len R18 ) ) = ( D107 . ( len D107 ) ) by L491 , L492 , L495 , L857 , GRAPH_2:12;
L928: D100 c= ( Seg ( len R21 ) )
proof
let C101 being set;
assume L929: C101 in D100;
consider C102 being (Element of ( NAT )) such that L930: C101 = C102 and L931: C35 <= C102 and L932: C102 <= ( len R21 ) by L929;
L933: 1 <= C102 by L860 , L931 , XXREAL_0:2;
thus L934: thesis by L933 , L930 , L932 , FINSEQ_1:1;
end;
reconsider D110 = D100 as  finite set by L928 , FINSET_1:1;
L935: ( ( len D98 ) -' 1 ) = ( ( len D98 ) - 1 ) by L906 , L907 , XREAL_0:def 2;
reconsider D111 = ( ( len D98 ) - 1 ) as (Element of ( NAT )) by L935;
L936: ( C35 + D111 ) = ( len R21 ) by L906;
L937: ( card D110 ) = ( ( ( len D98 ) + ( - 1 ) ) + 1 ) by L936 , GRAPH_2:4
.= ( len D98 );
L938: ( len ( Sgm D110 ) ) = ( card D110 ) by L928 , FINSEQ_3:39;
L939: ( rng ( Sgm D110 ) ) c= ( dom D102 ) by L864 , L928 , FINSEQ_1:def 13;
set D112 = ( Sgm D110 );
L940:
now
let C103 being set;
thus L941:now
assume L942: C103 in D98;
consider C104 , C105 being set such that L943: C103 = [ C104 , C105 ] by L942 , RELAT_1:def 1;
L944: C104 in ( dom D98 ) by L942 , L943 , FUNCT_1:1;
L945: C105 = ( D98 . C104 ) by L942 , L943 , FUNCT_1:1;
reconsider D113 = C104 as (Element of ( NAT )) by L944;
L946: 1 <= D113 by L944 , FINSEQ_3:25;
L947: D113 <= ( len D98 ) by L944 , FINSEQ_3:25;
L948: C104 in ( dom D112 ) by L937 , L938 , L944 , FINSEQ_3:29;
L949: ( D108 + D113 ) = ( D112 . D113 ) by L906 , L910 , L912 , L946 , L947 , GRAPH_2:5;
L950: ( D112 . D113 ) in ( rng D112 ) by L948 , FUNCT_1:def 3;
L951: C104 in ( dom ( D102 * D112 ) ) by L950 , L939 , L948 , FUNCT_1:11;
L952: ( ( 0 ) + 1 ) <= D113 by L944 , FINSEQ_3:25;
consider C106 being (Element of ( NAT )) such that L953: ( 0 ) <= C106 and L954: C106 < ( len D98 ) and L955: D113 = ( C106 + 1 ) by L952 , L947 , GRAPH_2:1;
L956: ( ( D102 * D112 ) . C104 ) = ( D102 . ( D108 + D113 ) ) by L949 , L951 , FUNCT_1:12
.= ( R21 . ( C35 + C106 ) ) by L939 , L949 , L950 , L955 , GRFUNC_1:2
.= C105 by L491 , L492 , L495 , L857 , L945 , L954 , L955 , L473;
thus L957: C103 in ( D102 * ( Sgm D110 ) ) by L956 , L943 , L951 , FUNCT_1:1;
end;
assume L958: C103 in ( D102 * ( Sgm D110 ) );
consider C107 , C108 being set such that L959: C103 = [ C107 , C108 ] by L958 , RELAT_1:def 1;
L960: C107 in ( dom ( D102 * D112 ) ) by L958 , L959 , FUNCT_1:1;
L961: C108 = ( ( D102 * D112 ) . C107 ) by L958 , L959 , FUNCT_1:1;
L962: C107 in ( dom D112 ) by L960 , FUNCT_1:11;
L963: ( D112 . C107 ) in ( dom D102 ) by L960 , FUNCT_1:11;
reconsider D114 = C107 as (Element of ( NAT )) by L962;
L964: D114 in ( dom D98 ) by L937 , L938 , L962 , FINSEQ_3:29;
L965: 1 <= D114 by L962 , FINSEQ_3:25;
L966: D114 <= ( len D98 ) by L937 , L938 , L962 , FINSEQ_3:25;
L967: ( D108 + D114 ) = ( D112 . D114 ) by L966 , L906 , L910 , L912 , L965 , GRAPH_2:5;
L968: ( ( 0 ) + 1 ) <= D114 by L962 , FINSEQ_3:25;
consider C109 being (Element of ( NAT )) such that L969: ( 0 ) <= C109 and L970: C109 < ( len D98 ) and L971: D114 = ( C109 + 1 ) by L968 , L966 , GRAPH_2:1;
L972: ( D98 . D114 ) = ( R21 . ( ( D108 + 1 ) + C109 ) ) by L491 , L492 , L495 , L857 , L970 , L971 , L473
.= ( D102 . ( D112 . D114 ) ) by L963 , L967 , L971 , GRFUNC_1:2
.= C108 by L961 , L962 , FUNCT_1:13;
thus L973: C103 in D98 by L972 , L959 , L964 , FUNCT_1:1;
end;
L974: D98 = ( D102 * ( Sgm D110 ) ) by L940 , TARSKI:1;
thus L975: ( Seq D102 ) = D106 by L974 , L864 , FINSEQ_1:def 14;
L976: D103 c= ( Seg ( len R18 ) )
proof
let C110 being set;
assume L977: C110 in D103;
consider C111 being (Element of ( NAT )) such that L978: C110 = C111 and L979: C35 <= C111 and L980: C111 <= ( len R18 ) by L977;
L981: 1 <= C111 by L860 , L979 , XXREAL_0:2;
thus L982: thesis by L981 , L978 , L980 , FINSEQ_1:1;
end;
reconsider D115 = D103 as  finite set by L976 , FINSET_1:1;
L983: ( 1 - 1 ) <= ( ( len D99 ) - 1 ) by L917 , XREAL_1:9;
L984: ( ( len D99 ) -' 1 ) = ( ( len D99 ) - 1 ) by L983 , XREAL_0:def 2;
reconsider D116 = ( ( len D99 ) - 1 ) as (Element of ( NAT )) by L984;
L985: ( C35 + D116 ) = ( ( len R21 ) + 1 ) by L915;
L986: ( C35 + D116 ) = ( D108 + ( len D99 ) );
L987: ( card D115 ) = ( ( ( len D99 ) + ( - 1 ) ) + 1 ) by L495 , L985 , GRAPH_2:4
.= ( len D99 );
L988: ( len ( Sgm D115 ) ) = ( card D115 ) by L976 , FINSEQ_3:39;
L989: ( rng ( Sgm D115 ) ) c= ( dom D105 ) by L885 , L976 , FINSEQ_1:def 13;
set D117 = ( Sgm D115 );
L990:
now
let C112 being set;
thus L991:now
assume L992: C112 in D99;
consider C113 , C114 being set such that L993: C112 = [ C113 , C114 ] by L992 , RELAT_1:def 1;
L994: C113 in ( dom D99 ) by L992 , L993 , FUNCT_1:1;
L995: C114 = ( D99 . C113 ) by L992 , L993 , FUNCT_1:1;
reconsider D118 = C113 as (Element of ( NAT )) by L994;
L996: 1 <= D118 by L994 , FINSEQ_3:25;
L997: D118 <= ( len D99 ) by L994 , FINSEQ_3:25;
L998: C113 in ( dom D117 ) by L987 , L988 , L994 , FINSEQ_3:29;
L999: ( D108 + D118 ) = ( D117 . D118 ) by L495 , L910 , L915 , L986 , L996 , L997 , GRAPH_2:5;
L1000: ( D117 . D118 ) in ( rng D117 ) by L998 , FUNCT_1:def 3;
L1001: C113 in ( dom ( D105 * D117 ) ) by L1000 , L989 , L998 , FUNCT_1:11;
L1002: ( ( 0 ) + 1 ) <= D118 by L994 , FINSEQ_3:25;
consider C115 being (Element of ( NAT )) such that L1003: ( 0 ) <= C115 and L1004: C115 < ( len D99 ) and L1005: D118 = ( C115 + 1 ) by L1002 , L997 , GRAPH_2:1;
L1006: ( ( D105 * D117 ) . C113 ) = ( D105 . ( D108 + D118 ) ) by L999 , L1001 , FUNCT_1:12
.= ( R18 . ( C35 + C115 ) ) by L989 , L999 , L1000 , L1005 , GRFUNC_1:2
.= C114 by L491 , L857 , L913 , L914 , L995 , L1004 , L1005 , L473;
thus L1007: C112 in ( D105 * ( Sgm D115 ) ) by L1006 , L993 , L1001 , FUNCT_1:1;
end;
assume L1008: C112 in ( D105 * ( Sgm D115 ) );
consider C116 , C117 being set such that L1009: C112 = [ C116 , C117 ] by L1008 , RELAT_1:def 1;
L1010: C116 in ( dom ( D105 * D117 ) ) by L1008 , L1009 , FUNCT_1:1;
L1011: C117 = ( ( D105 * D117 ) . C116 ) by L1008 , L1009 , FUNCT_1:1;
L1012: C116 in ( dom D117 ) by L1010 , FUNCT_1:11;
L1013: ( D117 . C116 ) in ( dom D105 ) by L1010 , FUNCT_1:11;
reconsider D119 = C116 as (Element of ( NAT )) by L1012;
L1014: D119 in ( dom D99 ) by L987 , L988 , L1012 , FINSEQ_3:29;
L1015: 1 <= D119 by L1012 , FINSEQ_3:25;
L1016: D119 <= ( len D99 ) by L987 , L988 , L1012 , FINSEQ_3:25;
L1017: ( D108 + D119 ) = ( D117 . D119 ) by L1016 , L495 , L910 , L915 , L986 , L1015 , GRAPH_2:5;
L1018: ( ( 0 ) + 1 ) <= D119 by L1012 , FINSEQ_3:25;
consider C118 being (Element of ( NAT )) such that L1019: ( 0 ) <= C118 and L1020: C118 < ( len D99 ) and L1021: D119 = ( C118 + 1 ) by L1018 , L1016 , GRAPH_2:1;
L1022: ( D99 . D119 ) = ( R18 . ( ( D108 + 1 ) + C118 ) ) by L491 , L857 , L913 , L914 , L1020 , L1021 , L473
.= ( D105 . ( D117 . D119 ) ) by L1013 , L1017 , L1021 , GRFUNC_1:2
.= C117 by L1011 , L1012 , FUNCT_1:13;
thus L1023: C112 in D99 by L1022 , L1009 , L1014 , FUNCT_1:1;
end;
L1024: D99 = ( D105 * ( Sgm D115 ) ) by L990 , TARSKI:1;
thus L1025: thesis by L1024 , L885 , FINSEQ_1:def 14;
end;
suppose L1026: (C34 <> 1 & C35 = ( len R18 ));

L1027: 1 < C34 by L1026 , L490 , XXREAL_0:1;
L1028: ( 1 + 1 ) <= C34 by L1027 , NAT_1:13;
L1029: ( ( 1 + 1 ) - 1 ) <= ( C34 - 1 ) by L1028 , XREAL_1:9;
L1030: C34 < ( len R18 ) by L491 , L492 , XXREAL_0:2;
L1031: ( C34 - 1 ) < ( ( ( len R21 ) + 1 ) - 1 ) by L1030 , L495 , XREAL_1:9;
L1032: 1 <= ( D60 + 1 ) by NAT_1:12;
reconsider D120 = ( (1 , D60) -cut R21 ) as  oriented (Chain of R10) by L498 , L1029 , L1031 , L271;
set D121 = ( (1 , C34) -cut R18 );
L1033: C34 <= ( len R18 ) by L491 , L492 , XXREAL_0:2;
L1034: D121 is_oriented_vertex_seq_of D120 by L489 , L499 , L1029 , L1031 , L305;
L1035: ( len D121 ) = ( ( len D120 ) + 1 ) by L1034 , L29;
set D122 = { R7 where R7 is (Element of ( NAT )) : (1 <= R7 & R7 <= D60) };
deffunc H5(set) = ( R21 . $1 );
consider C119 being Function such that L1036: ( dom C119 ) = D122 and L1037: (for R25 being set holds (R25 in D122 implies ( C119 . R25 ) = H5(R25))) from FUNCT_1:sch 3;
L1038: D122 c= ( Seg ( len R21 ) )
proof
let C120 being set;
assume L1039: C120 in D122;
consider C121 being (Element of ( NAT )) such that L1040: C120 = C121 and L1041: 1 <= C121 and L1042: C121 <= D60 by L1039;
L1043: C121 <= ( len R21 ) by L498 , L1031 , L1042 , XXREAL_0:2;
thus L1044: thesis by L1043 , L1040 , L1041 , FINSEQ_1:1;
end;
reconsider D123 = C119 as FinSubsequence by L1038 , L1036 , FINSEQ_1:def 12;
L1045: D123 c= R21
proof
let C122 being set;
assume L1046: C122 in D123;
consider C123 , C124 being set such that L1047: [ C123 , C124 ] = C122 by L1046 , RELAT_1:def 1;
L1048: C123 in ( dom D123 ) by L1046 , L1047 , FUNCT_1:1;
L1049: C124 = ( D123 . C123 ) by L1046 , L1047 , FUNCT_1:1;
consider C125 being (Element of ( NAT )) such that L1050: C123 = C125 and L1051: 1 <= C125 and L1052: C125 <= D60 by L1036 , L1048;
L1053: C125 <= ( len R21 ) by L498 , L1031 , L1052 , XXREAL_0:2;
L1054: C123 in ( dom R21 ) by L1053 , L1050 , L1051 , FINSEQ_3:25;
L1055: C124 = ( R21 . C125 ) by L1036 , L1037 , L1048 , L1049 , L1050;
thus L1056: thesis by L1055 , L1047 , L1050 , L1054 , FUNCT_1:1;
end;
reconsider D124 = D123 as (Subset of R21) by L1045;
take D124;
set D125 = { R7 where R7 is (Element of ( NAT )) : (1 <= R7 & R7 <= C34) };
deffunc H6(set) = ( R18 . $1 );
consider C126 being Function such that L1057: ( dom C126 ) = D125 and L1058: (for R25 being set holds (R25 in D125 implies ( C126 . R25 ) = H6(R25))) from FUNCT_1:sch 3;
L1059: D125 c= ( Seg ( len R18 ) )
proof
let C127 being set;
assume L1060: C127 in D125;
consider C128 being (Element of ( NAT )) such that L1061: C127 = C128 and L1062: 1 <= C128 and L1063: C128 <= C34 by L1060;
L1064: C128 <= ( len R18 ) by L1033 , L1063 , XXREAL_0:2;
thus L1065: thesis by L1064 , L1061 , L1062 , FINSEQ_1:1;
end;
reconsider D126 = C126 as FinSubsequence by L1059 , L1057 , FINSEQ_1:def 12;
L1066: D126 c= R18
proof
let C129 being set;
assume L1067: C129 in D126;
consider C130 , C131 being set such that L1068: [ C130 , C131 ] = C129 by L1067 , RELAT_1:def 1;
L1069: C130 in ( dom D126 ) by L1067 , L1068 , FUNCT_1:1;
L1070: C131 = ( D126 . C130 ) by L1067 , L1068 , FUNCT_1:1;
consider C132 being (Element of ( NAT )) such that L1071: C130 = C132 and L1072: 1 <= C132 and L1073: C132 <= C34 by L1057 , L1069;
L1074: C132 <= ( len R18 ) by L1033 , L1073 , XXREAL_0:2;
L1075: C130 in ( dom R18 ) by L1074 , L1071 , L1072 , FINSEQ_3:25;
L1076: C131 = ( R18 . C132 ) by L1057 , L1058 , L1069 , L1070 , L1071;
thus L1077: thesis by L1076 , L1068 , L1071 , L1075 , FUNCT_1:1;
end;
reconsider D127 = D126 as (Subset of R18) by L1066;
take D127;
take D128 = D120;
take D129 = D121;
L1078: ( ( len D120 ) + 1 ) = ( D60 + 1 ) by L498 , L1031 , L1032 , L473;
L1079: ( len D120 ) = ( C34 - 1 ) by L1078 , L497 , XREAL_0:def 2;
thus L1080: ( len D128 ) < ( len R21 ) by L497 , L1031 , L1078 , XREAL_0:def 2;
thus L1081: D129 is_oriented_vertex_seq_of D128 by L489 , L499 , L1029 , L1031 , L305;
L1082: ( len D129 ) = ( ( len D120 ) + 1 ) by L1034 , L29;
thus L1083: ( len D129 ) < ( len R18 ) by L1082 , L491 , L492 , L1079 , XXREAL_0:2;
thus L1084: ( R18 . 1 ) = ( D129 . 1 ) by L490 , L1033 , GRAPH_2:12;
thus L1085: ( R18 . ( len R18 ) ) = ( D129 . ( len D129 ) ) by L490 , L491 , L493 , L1026 , GRAPH_2:12;
L1086: D122 c= ( Seg ( len R21 ) )
proof
let C133 being set;
assume L1087: C133 in D122;
consider C134 being (Element of ( NAT )) such that L1088: C133 = C134 and L1089: 1 <= C134 and L1090: C134 <= D60 by L1087;
L1091: C134 <= ( len R21 ) by L498 , L1031 , L1090 , XXREAL_0:2;
thus L1092: thesis by L1091 , L1088 , L1089 , FINSEQ_1:1;
end;
reconsider D130 = D122 as  finite set by L1086 , FINSET_1:1;
L1093: D130 = ( Seg D60 ) by FINSEQ_1:def 1;
L1094: ( Sgm D130 ) = ( idseq D60 ) by L1093 , FINSEQ_3:48;
L1095: ( dom ( Sgm D130 ) ) = ( Seg D60 ) by L1094 , RELAT_1:45;
set D131 = ( Sgm D130 );
L1096:
now
let C135 being set;
thus L1097:now
assume L1098: C135 in D120;
consider C136 , C137 being set such that L1099: C135 = [ C136 , C137 ] by L1098 , RELAT_1:def 1;
L1100: C136 in ( dom D120 ) by L1098 , L1099 , FUNCT_1:1;
L1101: C137 = ( D120 . C136 ) by L1098 , L1099 , FUNCT_1:1;
reconsider D132 = C136 as (Element of ( NAT )) by L1100;
L1102: 1 <= D132 by L1100 , FINSEQ_3:25;
L1103: D132 <= ( len D120 ) by L1100 , FINSEQ_3:25;
L1104: C136 in ( dom D131 ) by L1103 , L1078 , L1095 , L1102 , FINSEQ_1:1;
L1105: D132 = ( D131 . D132 ) by L1104 , L1094 , L1095 , FUNCT_1:18;
L1106: D132 in D130 by L1078 , L1102 , L1103;
L1107: C136 in ( dom ( D124 * D131 ) ) by L1106 , L1036 , L1104 , L1105 , FUNCT_1:11;
L1108: ( ( 0 ) + 1 ) <= D132 by L1100 , FINSEQ_3:25;
consider C138 being (Element of ( NAT )) such that L1109: ( 0 ) <= C138 and L1110: C138 < D60 and L1111: D132 = ( C138 + 1 ) by L1108 , L1078 , L1103 , GRAPH_2:1;
L1112: ( ( D124 * D131 ) . C136 ) = ( D124 . D132 ) by L1105 , L1107 , FUNCT_1:12
.= ( R21 . ( 1 + C138 ) ) by L1036 , L1106 , L1111 , GRFUNC_1:2
.= C137 by L498 , L1031 , L1032 , L1078 , L1101 , L1110 , L1111 , L473;
thus L1113: C135 in ( D124 * ( Sgm D130 ) ) by L1112 , L1099 , L1107 , FUNCT_1:1;
end;
assume L1114: C135 in ( D124 * ( Sgm D130 ) );
consider C139 , C140 being set such that L1115: C135 = [ C139 , C140 ] by L1114 , RELAT_1:def 1;
L1116: C139 in ( dom ( D124 * D131 ) ) by L1114 , L1115 , FUNCT_1:1;
L1117: C140 = ( ( D124 * D131 ) . C139 ) by L1114 , L1115 , FUNCT_1:1;
L1118: ( ( D124 * D131 ) . C139 ) = ( D124 . ( D131 . C139 ) ) by L1116 , FUNCT_1:12;
L1119: C139 in ( dom D131 ) by L1116 , FUNCT_1:11;
L1120: C139 in { B49 where B49 is (Element of ( NAT )) : (1 <= B49 & B49 <= D60) } by L1119 , L1095 , FINSEQ_1:def 1;
consider R7 being (Element of ( NAT )) such that L1121: R7 = C139 and L1122: 1 <= R7 and L1123: R7 <= D60 by L1120;
L1124: R7 in ( dom D124 ) by L1036 , L1122 , L1123;
L1125: R7 = ( D131 . R7 ) by L1094 , L1095 , L1119 , L1121 , FUNCT_1:18;
L1126: R7 in ( dom D120 ) by L1078 , L1122 , L1123 , FINSEQ_3:25;
L1127: ( ( 0 ) + 1 ) <= R7 by L1122;
L1128: (ex B50 being (Element of ( NAT )) st (( 0 ) <= B50 & B50 < D60 & R7 = ( B50 + 1 ))) by L1127 , L1123 , GRAPH_2:1;
L1129: ( D120 . R7 ) = ( R21 . R7 ) by L1128 , L498 , L1031 , L1032 , L1078 , L473
.= C140 by L1117 , L1118 , L1121 , L1124 , L1125 , GRFUNC_1:2;
thus L1130: C135 in D120 by L1129 , L1115 , L1121 , L1126 , FUNCT_1:1;
end;
L1131: D120 = ( D124 * ( Sgm D130 ) ) by L1096 , TARSKI:1;
thus L1132: ( Seq D124 ) = D128 by L1131 , L1036 , FINSEQ_1:def 14;
L1133: D125 c= ( Seg ( len R18 ) )
proof
let C141 being set;
assume L1134: C141 in D125;
consider C142 being (Element of ( NAT )) such that L1135: C141 = C142 and L1136: 1 <= C142 and L1137: C142 <= C34 by L1134;
L1138: C142 <= ( len R18 ) by L1033 , L1137 , XXREAL_0:2;
thus L1139: thesis by L1138 , L1135 , L1136 , FINSEQ_1:1;
end;
reconsider D133 = D125 as  finite set by L1133 , FINSET_1:1;
L1140: D133 = ( Seg C34 ) by FINSEQ_1:def 1;
L1141: ( Sgm D133 ) = ( idseq C34 ) by L1140 , FINSEQ_3:48;
L1142: ( dom ( Sgm D133 ) ) = ( Seg C34 ) by L1141 , RELAT_1:45;
set D134 = ( Sgm D133 );
L1143:
now
let C143 being set;
thus L1144:now
assume L1145: C143 in D121;
consider C144 , C145 being set such that L1146: C143 = [ C144 , C145 ] by L1145 , RELAT_1:def 1;
L1147: C144 in ( dom D121 ) by L1145 , L1146 , FUNCT_1:1;
L1148: C145 = ( D121 . C144 ) by L1145 , L1146 , FUNCT_1:1;
reconsider D135 = C144 as (Element of ( NAT )) by L1147;
L1149: 1 <= D135 by L1147 , FINSEQ_3:25;
L1150: D135 <= ( len D121 ) by L1147 , FINSEQ_3:25;
L1151: C144 in ( dom D134 ) by L1150 , L1035 , L1079 , L1142 , L1149 , FINSEQ_1:1;
L1152: D135 = ( D134 . D135 ) by L1151 , L1141 , L1142 , FUNCT_1:18;
L1153: D135 in D133 by L1035 , L1079 , L1149 , L1150;
L1154: C144 in ( dom ( D127 * D134 ) ) by L1153 , L1057 , L1151 , L1152 , FUNCT_1:11;
L1155: ( ( 0 ) + 1 ) <= D135 by L1147 , FINSEQ_3:25;
consider C146 being (Element of ( NAT )) such that L1156: ( 0 ) <= C146 and L1157: C146 < C34 and L1158: D135 = ( C146 + 1 ) by L1155 , L1035 , L1079 , L1150 , GRAPH_2:1;
L1159: ( ( D127 * D134 ) . C144 ) = ( D127 . D135 ) by L1152 , L1154 , FUNCT_1:12
.= ( R18 . ( 1 + C146 ) ) by L1057 , L1153 , L1158 , GRFUNC_1:2
.= C145 by L490 , L1033 , L1035 , L1079 , L1148 , L1157 , L1158 , GRAPH_2:def 1;
thus L1160: C143 in ( D127 * ( Sgm D133 ) ) by L1159 , L1146 , L1154 , FUNCT_1:1;
end;
assume L1161: C143 in ( D127 * ( Sgm D133 ) );
consider C147 , C148 being set such that L1162: C143 = [ C147 , C148 ] by L1161 , RELAT_1:def 1;
L1163: C147 in ( dom ( D127 * D134 ) ) by L1161 , L1162 , FUNCT_1:1;
L1164: C148 = ( ( D127 * D134 ) . C147 ) by L1161 , L1162 , FUNCT_1:1;
L1165: ( ( D127 * D134 ) . C147 ) = ( D127 . ( D134 . C147 ) ) by L1163 , FUNCT_1:12;
L1166: C147 in ( dom D134 ) by L1163 , FUNCT_1:11;
L1167: C147 in { B51 where B51 is (Element of ( NAT )) : (1 <= B51 & B51 <= C34) } by L1166 , L1142 , FINSEQ_1:def 1;
consider R7 being (Element of ( NAT )) such that L1168: R7 = C147 and L1169: 1 <= R7 and L1170: R7 <= C34 by L1167;
L1171: R7 in ( dom D127 ) by L1057 , L1169 , L1170;
L1172: R7 = ( D134 . R7 ) by L1141 , L1142 , L1166 , L1168 , FUNCT_1:18;
L1173: R7 in ( dom D121 ) by L1035 , L1079 , L1169 , L1170 , FINSEQ_3:25;
L1174: ( ( 0 ) + 1 ) <= R7 by L1169;
L1175: (ex B52 being (Element of ( NAT )) st (( 0 ) <= B52 & B52 < C34 & R7 = ( B52 + 1 ))) by L1174 , L1170 , GRAPH_2:1;
L1176: ( D121 . R7 ) = ( R18 . R7 ) by L1175 , L490 , L1033 , L1035 , L1079 , GRAPH_2:def 1
.= C148 by L1164 , L1165 , L1168 , L1171 , L1172 , GRFUNC_1:2;
thus L1177: C143 in D121 by L1176 , L1162 , L1168 , L1173 , FUNCT_1:1;
end;
L1178: D121 = ( D127 * ( Sgm D133 ) ) by L1143 , TARSKI:1;
thus L1179: thesis by L1178 , L1057 , FINSEQ_1:def 14;
end;
end;
theorem
L1181: (for R10 being Graph holds (for R18 being (FinSequence of (the carrier of R10)) holds (for R21 being  oriented (Chain of R10) holds (R18 is_oriented_vertex_seq_of R21 implies (ex B53 being (Subset of R21) st (ex B54 being (Subset of R18) st (ex R24 being  oriented  simple (Chain of R10) st (ex R19 being (FinSequence of (the carrier of R10)) st (( Seq B53 ) = R24 & ( Seq B54 ) = R19 & R19 is_oriented_vertex_seq_of R24 & ( R18 . 1 ) = ( R19 . 1 ) & ( R18 . ( len R18 ) ) = ( R19 . ( len R19 ) ))))))))))
proof
let R10 being Graph;
let R18 being (FinSequence of (the carrier of R10));
let R21 being  oriented (Chain of R10);
assume L1182: R18 is_oriented_vertex_seq_of R21;
per cases ;
suppose L1183: R21 is  Simple;

reconsider D136 = R21 as (Subset of R21) by GRAPH_2:26;
reconsider D137 = R18 as (Subset of R18) by GRAPH_2:26;
reconsider D138 = R21 as  oriented  simple (Chain of R10) by L1183 , L468;
take D136;
take D137;
take D138;
take R18;
thus L1184: (( Seq D136 ) = D138 & ( Seq D137 ) = R18) by FINSEQ_3:116;
thus L1185: R18 is_oriented_vertex_seq_of D138 by L1182;
thus L1186: thesis;
end;
suppose L1187: (not R21 is  Simple);

defpred S2[ Nat ] means (ex B55 being (Subset of R21) st (ex B56 being (Subset of R18) st (ex R22 being  oriented (Chain of R10) st (ex R19 being (FinSequence of (the carrier of R10)) st (( Seq B55 ) = R22 & ( Seq B56 ) = R19 & R19 is_oriented_vertex_seq_of R22 & ( R18 . 1 ) = ( R19 . 1 ) & ( R18 . ( len R18 ) ) = ( R19 . ( len R19 ) ) & ( len R22 ) = $1 & (not R22 is  Simple))))));
L1188: S2[ ( len R21 ) ]
proof
reconsider D139 = R21 as (Subset of R21) by GRAPH_2:26;
reconsider D140 = R18 as (Subset of R18) by GRAPH_2:26;
take D139;
take D140;
take R21;
take R18;
thus L1189: (( Seq D139 ) = R21 & ( Seq D140 ) = R18) by FINSEQ_3:116;
thus L1190: R18 is_oriented_vertex_seq_of R21 by L1182;
thus L1191: (( R18 . 1 ) = ( R18 . 1 ) & ( R18 . ( len R18 ) ) = ( R18 . ( len R18 ) ));
thus L1192: thesis by L1187;
end;
L1193: (ex B57 being Nat st S2[ B57 ]) by L1188;
consider C149 being Nat such that L1194: (S2[ C149 ] & (for B58 being Nat holds (S2[ B58 ] implies C149 <= B58))) from NAT_1:sch 5(L1193);
consider C150 being (Subset of R21), C151 being (Subset of R18), R22 being  oriented (Chain of R10), R19 being (FinSequence of (the carrier of R10)) such that L1195: ( Seq C150 ) = R22 and L1196: ( Seq C151 ) = R19 and L1197: R19 is_oriented_vertex_seq_of R22 and L1198: ( R18 . 1 ) = ( R19 . 1 ) and L1199: ( R18 . ( len R18 ) ) = ( R19 . ( len R19 ) ) and L1200: ( len R22 ) = C149 and L1201: (not R22 is  Simple) by L1194;
consider C152 being (Subset of R22), C153 being (Subset of R19), R23 being  oriented (Chain of R10), R20 being (FinSequence of (the carrier of R10)) such that L1202: ( len R23 ) < ( len R22 ) and L1203: R20 is_oriented_vertex_seq_of R23 and L1204: ( len R20 ) < ( len R19 ) and L1205: ( R19 . 1 ) = ( R20 . 1 ) and L1206: ( R19 . ( len R19 ) ) = ( R20 . ( len R20 ) ) and L1207: ( Seq C152 ) = R23 and L1208: ( Seq C153 ) = R20 by L1197 , L1201 , L487;
reconsider D141 = ( C150 | ( rng ( ( Sgm ( dom C150 ) ) | ( dom C152 ) ) ) ) as (Subset of R21) by GRAPH_2:27;
L1209: ( Seq D141 ) = R23 by L1195 , L1207 , GRAPH_2:28;
reconsider D142 = ( C151 | ( rng ( ( Sgm ( dom C151 ) ) | ( dom C153 ) ) ) ) as (Subset of R18) by GRAPH_2:27;
L1210: ( Seq D142 ) = R20 by L1196 , L1208 , GRAPH_2:28;
L1211:
now
assume L1212: R23 is  Simple  oriented  Simple  oriented  Simple  oriented  Simple  oriented (Chain of R10);
reconsider D143 = R23 as  oriented  simple (Chain of R10) by L1212 , L468;
take D144 = D141;
take D145 = D143;
L1213: ( Seq D144 ) = D145 by L1195 , L1207 , GRAPH_2:28;
thus L1214: thesis by L1213 , L1198 , L1199 , L1203 , L1205 , L1206 , L1210;
end;
thus L1215: thesis by L1211 , L1194 , L1198 , L1199 , L1200 , L1202 , L1203 , L1205 , L1206 , L1209 , L1210;
end;
end;
theorem
L1217: (for R1 being FinSequence holds (for R9 being (Element of ( NAT )) holds (for R10 being Graph holds (R1 is (OrientedPath of R10) implies ( R1 | ( Seg R9 ) ) is (OrientedPath of R10)))))
proof
let R1 being FinSequence;
let R9 being (Element of ( NAT ));
let R10 being Graph;
assume L1218: R1 is (OrientedPath of R10);
reconsider D146 = ( R1 | ( Seg R9 ) ) as  oriented (Chain of R10) by L1218 , L442;
reconsider D147 = ( R1 | ( Seg R9 ) ) as FinSequence by FINSEQ_1:15;
L1219:
now
let C154 , C155 being (Element of ( NAT ));
assume that
L1220: 1 <= C154
and
L1221: C154 < C155
and
L1222: C155 <= ( len D147 );
L1223: 1 < C155 by L1220 , L1221 , XXREAL_0:2;
L1224: C155 in ( dom D147 ) by L1223 , L1222 , FINSEQ_3:25;
L1225: ( D147 . C155 ) = ( R1 . C155 ) by L1224 , FUNCT_1:47;
L1226: C154 < ( len D147 ) by L1221 , L1222 , XXREAL_0:2;
L1227: C154 in ( dom D147 ) by L1226 , L1220 , FINSEQ_3:25;
L1228: ( D147 . C154 ) = ( R1 . C154 ) by L1227 , FUNCT_1:47;
L1229: ( dom D147 ) c= ( dom R1 ) by RELAT_1:60;
L1230: ( dom D147 ) c= ( Seg ( len R1 ) ) by L1229 , FINSEQ_1:def 3;
L1231: ( Seg ( len D147 ) ) c= ( Seg ( len R1 ) ) by L1230 , FINSEQ_1:def 3;
L1232: ( len D147 ) <= ( len R1 ) by L1231 , FINSEQ_1:5;
L1233: C155 <= ( len R1 ) by L1232 , L1222 , XXREAL_0:2;
thus L1234: ( D147 . C154 ) <> ( D147 . C155 ) by L1233 , L1218 , L1220 , L1221 , L1225 , L1228 , GRAPH_1:def 16;
end;
L1235: D146 is (Path of R10) by L1219 , GRAPH_1:def 16;
thus L1236: thesis by L1235;
end;
theorem
L1237: (for R10 being Graph holds (for R24 being  oriented  simple (Chain of R10) holds R24 is (OrientedPath of R10)))
proof
let R10 being Graph;
let R24 being  oriented  simple (Chain of R10);
assume L1238: (not R24 is (OrientedPath of R10));
consider R8 being (Element of ( NAT )), R9 being (Element of ( NAT )) such that L1239: 1 <= R8 and L1240: R8 < R9 and L1241: R9 <= ( len R24 ) and L1242: ( R24 . R8 ) = ( R24 . R9 ) by L1238 , GRAPH_1:def 16;
L1243: R24 is  Simple by L462;
consider R18 being (FinSequence of (the carrier of R10)) such that L1244: R18 is_oriented_vertex_seq_of R24 and L1245: (for R9 being (Element of ( NAT )) holds (for R8 being (Element of ( NAT )) holds ((1 <= R9 & R9 < R8 & R8 <= ( len R18 ) & ( R18 . R9 ) = ( R18 . R8 )) implies (R9 = 1 & R8 = ( len R18 ))))) by L1243 , L418;
L1246: ( len R18 ) = ( ( len R24 ) + 1 ) by L1244 , L29;
L1247: R8 <= ( len R24 ) by L1240 , L1241 , XXREAL_0:2;
L1248: 1 <= R9 by L1239 , L1240 , XXREAL_0:2;
L1249: R9 <= ( len R18 ) by L1241 , L1246 , NAT_1:12;
L1250: ( R8 + 1 ) < ( R9 + 1 ) by L1240 , XREAL_1:6;
L1251: ( R9 + 1 ) <= ( len R18 ) by L1241 , L1246 , XREAL_1:6;
L1252: R8 < ( R9 + 1 ) by L1250 , NAT_1:12;
set D148 = ( R18 /. R8 );
set D149 = ( R18 /. ( R8 + 1 ) );
L1253: ( R24 . R8 ) orientedly_joins D148 , D149 by L1239 , L1244 , L1247 , L29;
set D150 = ( R18 /. R9 );
set D151 = ( R18 /. ( R9 + 1 ) );
L1254: ( R24 . R9 ) orientedly_joins D150 , D151 by L1241 , L1244 , L1248 , L29;
L1255: D148 = D150 by L1254 , L1242 , L1253 , L9;
L1256: D149 = D151 by L1242 , L1253 , L1254 , L9;
L1257: R8 <= ( len R18 ) by L1251 , L1252 , XXREAL_0:2;
L1258: ( R8 + 1 ) <= ( len R18 ) by L1250 , L1251 , XXREAL_0:2;
L1259: D148 = ( R18 . R8 ) by L1239 , L1257 , FINSEQ_4:15;
L1260: D149 = ( R18 . ( R8 + 1 ) ) by L1258 , FINSEQ_4:15 , NAT_1:12;
L1261: D150 = ( R18 . R9 ) by L1248 , L1249 , FINSEQ_4:15;
L1262: D151 = ( R18 . ( R9 + 1 ) ) by L1251 , FINSEQ_4:15 , NAT_1:12;
L1263: R8 = 1 by L1239 , L1240 , L1245 , L1249 , L1255 , L1259 , L1261;
thus L1264: contradiction by L1263 , L1245 , L1250 , L1251 , L1256 , L1260 , L1262;
end;
theorem
L1265: (for R10 being Graph holds (for B59 being FinSequence holds ((B59 is  Simple  oriented  Simple  oriented  Simple  oriented  Simple  oriented (Chain of R10) iff B59 is  oriented  simple  oriented  simple  oriented  simple  oriented  simple (Chain of R10)) & (B59 is  oriented  simple  oriented  simple  oriented  simple  oriented  simple (Chain of R10) implies B59 is (OrientedPath of R10))))) by L462 , L468 , L1237;
