:: Pigeon Hole Principle
::  by Wojciech A. Trybulec
::
:: Received April 8, 1990
:: Copyright (c) 1990-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, FUNCT_1, FINSEQ_1, NAT_1, RELAT_1, FINSET_1, CARD_1,
      XBOOLE_0, TARSKI, XXREAL_0, SUBSET_1, PARTFUN1, ARYTM_1, ARYTM_3,
      ORDINAL4, FINSEQ_4, FUNCT_2, EQREL_1, CARD_3, SETFAM_1;
 notations TARSKI, XBOOLE_0, ENUMSET1, SUBSET_1, ORDINAL1, RELAT_1, CARD_1,
      SETFAM_1, EQREL_1, NUMBERS, XCMPLX_0, FUNCT_1, PARTFUN1, FUNCT_2,
      FINSET_1, NAT_1, FINSEQ_1, FINSEQ_3, XXREAL_0;
 constructors ENUMSET1, WELLORD2, FUNCT_2, XXREAL_0, REAL_1, PARTFUN1, NAT_1,
      INT_1, FINSEQ_3, RELSET_1, EQREL_1, SETFAM_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, FINSET_1, XREAL_0, INT_1, FINSEQ_1,
      ORDINAL1, CARD_1, RELSET_1, SUBSET_1, EQREL_1, NAT_1, PARTFUN1, FUNCT_2,
      XXREAL_0, MEMBERED;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions RELAT_1, FUNCT_1, TARSKI, XBOOLE_0, FINSEQ_1;
 theorems CARD_1, CARD_2, ENUMSET1, FINSEQ_1, FINSEQ_2, FINSEQ_3, FUNCT_1,
      FUNCT_2, INT_1, NAT_1, PARTFUN1, TARSKI, WELLORD2, ZFMISC_1, RELAT_1,
      XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, ORDINAL1, GRFUNC_1, EQREL_1,
      RELSET_1, SETFAM_1;
 schemes FINSEQ_1, FINSET_1, NAT_1, FUNCT_1, FINSEQ_2, FUNCT_2;

begin
definition
let R1 being Function;
let R7 being set;
pred R1 is_one-to-one_at R7
means
:L1: ( R1 " ( Im (R1 , R7) ) ) = { R7 }
;end;
theorem
L3: (for R1 being Function holds (for R7 being set holds (R1 is_one-to-one_at R7 implies R7 in ( dom R1 ))))
proof
let R1 being Function;
let R7 being set;
assume L4: R1 is_one-to-one_at R7;
L5: ( R1 " ( Im (R1 , R7) ) ) = { R7 } by L4 , L1;
L6: R7 in ( R1 " ( Im (R1 , R7) ) ) by L5 , TARSKI:def 1;
thus L7: thesis by L6 , FUNCT_1:def 7;
end;
theorem
L8: (for R1 being Function holds (for R7 being set holds (R1 is_one-to-one_at R7 iff (R7 in ( dom R1 ) & ( R1 " { ( R1 . R7 ) } ) = { R7 }))))
proof
let R1 being Function;
let R7 being set;
thus L9: (R1 is_one-to-one_at R7 implies (R7 in ( dom R1 ) & ( R1 " { ( R1 . R7 ) } ) = { R7 }))
proof
assume L10: R1 is_one-to-one_at R7;
thus L11: R7 in ( dom R1 ) by L10 , L3;
L12: ( R1 " ( Im (R1 , R7) ) ) = { R7 } by L10 , L1;
thus L13: thesis by L12 , L11 , FUNCT_1:59;
end;

assume L14: (R7 in ( dom R1 ) & ( R1 " { ( R1 . R7 ) } ) = { R7 });
thus L15: ( R1 " ( Im (R1 , R7) ) ) = { R7 } by L14 , FUNCT_1:59;
end;
theorem
L16: (for R1 being Function holds (for R7 being set holds (R1 is_one-to-one_at R7 iff (R7 in ( dom R1 ) & (for R11 being set holds ((R11 in ( dom R1 ) & R7 <> R11) implies ( R1 . R7 ) <> ( R1 . R11 )))))))
proof
let R1 being Function;
let R7 being set;
thus L17: (R1 is_one-to-one_at R7 implies (R7 in ( dom R1 ) & (for R11 being set holds ((R11 in ( dom R1 ) & R7 <> R11) implies ( R1 . R7 ) <> ( R1 . R11 )))))
proof
assume L18: R1 is_one-to-one_at R7;
thus L19: R7 in ( dom R1 ) by L18 , L3;
let R11 being set;
assume that
L20: R11 in ( dom R1 )
and
L21: R7 <> R11
and
L22: ( R1 . R7 ) = ( R1 . R11 );
L23: ( R1 . R7 ) in { ( R1 . R7 ) } by TARSKI:def 1;
L24: R11 in ( R1 " { ( R1 . R7 ) } ) by L23 , L20 , L22 , FUNCT_1:def 7;
L25: R11 in { R7 } by L24 , L18 , L8;
thus L26: thesis by L25 , L21 , TARSKI:def 1;
end;

assume that
L27: R7 in ( dom R1 )
and
L28: (for R11 being set holds ((R11 in ( dom R1 ) & R7 <> R11) implies ( R1 . R7 ) <> ( R1 . R11 )))
and
L29: (not R1 is_one-to-one_at R7);
L30: ( R1 " { ( R1 . R7 ) } ) <> { R7 } by L27 , L29 , L8;
consider R10 being set such that L31: ((R10 in ( R1 " { ( R1 . R7 ) } ) & (not R10 in { R7 })) or (R10 in { R7 } & (not R10 in ( R1 " { ( R1 . R7 ) } )))) by L30 , TARSKI:1;
L32: ( R1 . R7 ) in { ( R1 . R7 ) } by TARSKI:def 1;
L33: R7 in ( R1 " { ( R1 . R7 ) } ) by L32 , L27 , FUNCT_1:def 7;
L34:
now
per cases  by L31;
suppose L35: (R10 in ( R1 " { ( R1 . R7 ) } ) & (not R10 in { R7 }));

L36: ( R1 . R10 ) in { ( R1 . R7 ) } by L35 , FUNCT_1:def 7;
L37: ( R1 . R10 ) = ( R1 . R7 ) by L36 , TARSKI:def 1;
L38: (R10 in ( dom R1 ) & R7 <> R10) by L35 , FUNCT_1:def 7 , TARSKI:def 1;
thus L39: thesis by L38 , L28 , L37;
end;
suppose L40: ((not R10 in ( R1 " { ( R1 . R7 ) } )) & R10 in { R7 });

thus L41: thesis by L40 , L33 , TARSKI:def 1;
end;
end;
thus L43: thesis by L34;
end;
theorem
L44: (for R1 being Function holds ((for R7 being set holds (R7 in ( dom R1 ) implies R1 is_one-to-one_at R7)) iff R1 is  one-to-one))
proof
let R1 being Function;
thus L45: ((for R7 being set holds (R7 in ( dom R1 ) implies R1 is_one-to-one_at R7)) implies R1 is  one-to-one)
proof
assume L46: (for R7 being set holds (R7 in ( dom R1 ) implies R1 is_one-to-one_at R7));
let R8 being set;
let R9 being set;
assume that
L47: R8 in ( dom R1 )
and
L48: (R9 in ( dom R1 ) & ( R1 . R8 ) = ( R1 . R9 ));
L49: R1 is_one-to-one_at R8 by L46 , L47;
thus L50: thesis by L49 , L48 , L16;
end;

assume L51: R1 is  one-to-one;
let R7 being set;
assume L52: R7 in ( dom R1 );
L53: (for R11 being set holds ((R11 in ( dom R1 ) & R7 <> R11) implies ( R1 . R7 ) <> ( R1 . R11 ))) by L52 , L51 , FUNCT_1:def 4;
thus L54: thesis by L53 , L52 , L16;
end;
definition
let C1 being Relation;
let C2 being set;
pred C1 just_once_values C2
means
:L55: ( card ( Coim (C1 , C2) ) ) = 1
;end;
theorem
L57: (for R1 being Function holds (for R10 being set holds (R1 just_once_values R10 implies R10 in ( rng R1 ))))
proof
let R1 being Function;
let R10 being set;
assume L58: R1 just_once_values R10;
L59: ( card ( Coim (R1 , R10) ) ) = 1 by L58 , L55;
L60: ( rng R1 ) meets { R10 } by L59 , CARD_1:27 , RELAT_1:138;
consider C3 being set such that L61: C3 in ( ( rng R1 ) /\ { R10 } ) by L60 , XBOOLE_0:4;
L62: C3 in { R10 } by L61 , XBOOLE_0:def 4;
L63: R10 = C3 by L62 , TARSKI:def 1;
thus L64: thesis by L63 , L61 , XBOOLE_0:def 4;
end;
theorem
L65: (for R1 being Function holds (for R10 being set holds (R1 just_once_values R10 iff (ex R7 being set st { R7 } = ( R1 " { R10 } )))))
proof
let R1 being Function;
let R10 being set;
thus L66: (R1 just_once_values R10 implies (ex R7 being set st { R7 } = ( R1 " { R10 } )))
proof
assume L67: R1 just_once_values R10;
L68: R10 in ( rng R1 ) by L67 , L57;
consider R7 being set such that L69: R7 in ( dom R1 ) and L70: ( R1 . R7 ) = R10 by L68 , FUNCT_1:def 3;
take R7;
L71: ( card ( Coim (R1 , R10) ) ) = 1 by L67 , L55;
consider R11 being set such that L72: ( R1 " { R10 } ) = { R11 } by L71 , CARD_2:42;
L73: ( R1 . R7 ) in { R10 } by L70 , TARSKI:def 1;
L74: R7 in { R11 } by L73 , L69 , L72 , FUNCT_1:def 7;
thus L75: thesis by L74 , L72 , TARSKI:def 1;
end;

assume L76: (ex R7 being set st { R7 } = ( R1 " { R10 } ));
thus L77: ( card ( Coim (R1 , R10) ) ) = 1 by L76 , CARD_1:30;
end;
theorem
L78: (for R1 being Function holds (for R10 being set holds (R1 just_once_values R10 iff (ex R7 being set st (R7 in ( dom R1 ) & R10 = ( R1 . R7 ) & (for R11 being set holds ((R11 in ( dom R1 ) & R11 <> R7) implies ( R1 . R11 ) <> R10)))))))
proof
let R1 being Function;
let R10 being set;
thus L79: (R1 just_once_values R10 implies (ex R7 being set st (R7 in ( dom R1 ) & R10 = ( R1 . R7 ) & (for R11 being set holds ((R11 in ( dom R1 ) & R11 <> R7) implies ( R1 . R11 ) <> R10)))))
proof
assume L80: R1 just_once_values R10;
L81: ( card ( Coim (R1 , R10) ) ) = 1 by L80 , L55;
L82: R10 in ( rng R1 ) by L80 , L57;
consider R8 being set such that L83: R8 in ( dom R1 ) and L84: ( R1 . R8 ) = R10 by L82 , FUNCT_1:def 3;
L85: ( R1 . R8 ) in { R10 } by L84 , TARSKI:def 1;
L86: R8 in ( R1 " { R10 } ) by L85 , L83 , FUNCT_1:def 7;
take R8;
thus L87: (R8 in ( dom R1 ) & R10 = ( R1 . R8 )) by L83 , L84;
let R11 being set;
assume that
L88: R11 in ( dom R1 )
and
L89: R11 <> R8
and
L90: ( R1 . R11 ) = R10;
L91: ( R1 " { R10 } ) is  finite by L81;
L92: ( R1 . R11 ) in { R10 } by L90 , TARSKI:def 1;
L93: R11 in ( R1 " { R10 } ) by L92 , L88 , FUNCT_1:def 7;
L94: { R11 , R8 } c= ( R1 " { R10 } ) by L93 , L86 , ZFMISC_1:32;
L95: ( card { R11 , R8 } ) <= 1 by L94 , L91 , L81 , NAT_1:43;
L96: 2 <= 1 by L95 , L89 , CARD_2:57;
thus L97: thesis by L96;
end;

given R7 being set such that
L98: R7 in ( dom R1 )
and
L99: R10 = ( R1 . R7 )
and
L100: (for R11 being set holds ((R11 in ( dom R1 ) & R11 <> R7) implies ( R1 . R11 ) <> R10));

L101: { R7 } = ( R1 " { R10 } )
proof
thus L102: { R7 } c= ( R1 " { R10 } )
proof
let R8 being set;
assume L103: R8 in { R7 };
L104: R8 = R7 by L103 , TARSKI:def 1;
L105: ( R1 . R7 ) in { R10 } by L99 , TARSKI:def 1;
thus L106: thesis by L105 , L98 , L104 , FUNCT_1:def 7;
end;

let R8 being set;
assume L107: R8 in ( R1 " { R10 } );
L108: ( R1 . R8 ) in { R10 } by L107 , FUNCT_1:def 7;
L109: ( R1 . R8 ) = R10 by L108 , TARSKI:def 1;
L110: R8 in ( dom R1 ) by L107 , FUNCT_1:def 7;
L111: R8 = R7 by L110 , L100 , L109;
thus L112: thesis by L111 , TARSKI:def 1;
end;
L113: ( card ( Coim (R1 , R10) ) ) = 1 by L101 , CARD_1:30;
thus L114: thesis by L113 , L55;
end;
theorem
L115: (for R1 being Function holds (R1 is  one-to-one iff (for R10 being set holds (R10 in ( rng R1 ) implies R1 just_once_values R10))))
proof
let R1 being Function;
thus L116: (R1 is  one-to-one implies (for R10 being set holds (R10 in ( rng R1 ) implies R1 just_once_values R10)))
proof
assume L117: R1 is  one-to-one;
let R10 being set;
assume L118: R10 in ( rng R1 );
consider R7 being set such that L119: (R7 in ( dom R1 ) & ( R1 . R7 ) = R10) by L118 , FUNCT_1:def 3;
L120: (for R11 being set holds ((R11 in ( dom R1 ) & R11 <> R7) implies ( R1 . R11 ) <> R10)) by L117 , L119 , FUNCT_1:def 4;
thus L121: thesis by L120 , L119 , L78;
end;

assume L122: (for R10 being set holds (R10 in ( rng R1 ) implies R1 just_once_values R10));
let R7 being set;
let R10 being set;
assume that
L123: R7 in ( dom R1 )
and
L124: (R10 in ( dom R1 ) & ( R1 . R7 ) = ( R1 . R10 ));
L125: ( R1 . R7 ) in ( rng R1 ) by L123 , FUNCT_1:def 3;
L126: R1 just_once_values ( R1 . R7 ) by L125 , L122;
consider R8 being set such that L127: { R8 } = ( R1 " { ( R1 . R7 ) } ) by L126 , L65;
L128: ( R1 . R7 ) in { ( R1 . R7 ) } by TARSKI:def 1;
L129: R10 in ( R1 " { ( R1 . R7 ) } ) by L128 , L124 , FUNCT_1:def 7;
L130: R7 in ( R1 " { ( R1 . R7 ) } ) by L123 , L128 , FUNCT_1:def 7;
L131: R7 = R8 by L130 , L127 , TARSKI:def 1;
thus L132: thesis by L131 , L127 , L129 , TARSKI:def 1;
end;
theorem
L133: (for R1 being Function holds (for R7 being set holds (R1 is_one-to-one_at R7 iff (R7 in ( dom R1 ) & R1 just_once_values ( R1 . R7 )))))
proof
let R1 being Function;
let R7 being set;
thus L134: (R1 is_one-to-one_at R7 implies (R7 in ( dom R1 ) & R1 just_once_values ( R1 . R7 )))
proof
assume L135: R1 is_one-to-one_at R7;
thus L136: R7 in ( dom R1 ) by L135 , L3;
L137: { R7 } = ( R1 " { ( R1 . R7 ) } ) by L135 , L8;
thus L138: thesis by L137 , L65;
end;

assume that
L139: R7 in ( dom R1 )
and
L140: R1 just_once_values ( R1 . R7 );
consider R11 being set such that L141: ( R1 " { ( R1 . R7 ) } ) = { R11 } by L140 , L65;
L142: ( R1 . R7 ) in { ( R1 . R7 ) } by TARSKI:def 1;
L143: R7 in { R11 } by L142 , L139 , L141 , FUNCT_1:def 7;
L144: R7 = R11 by L143 , TARSKI:def 1;
thus L145: thesis by L144 , L139 , L141 , L8;
end;
definition
let R1 being Function;
let R10 being set;
assume L146: R1 just_once_values R10;
func R1 <- R10 -> set means 
:L147: (it in ( dom R1 ) & ( R1 . it ) = R10);
existence
proof
L148: R10 in ( rng R1 ) by L146 , L57;
consider R7 being set such that L149: (R7 in ( dom R1 ) & ( R1 . R7 ) = R10) by L148 , FUNCT_1:def 3;
take R7;
thus L150: thesis by L149;
end;
uniqueness
proof
let R8 being set;
let R9 being set;
assume that
L151: (R8 in ( dom R1 ) & ( R1 . R8 ) = R10)
and
L152: (R9 in ( dom R1 ) & ( R1 . R9 ) = R10);
consider R7 being set such that L153: R7 in ( dom R1 ) and L154: ( R1 . R7 ) = R10 and L155: (for R11 being set holds ((R11 in ( dom R1 ) & R11 <> R7) implies ( R1 . R11 ) <> R10)) by L146 , L78;
L156: R7 = R8 by L151 , L155;
thus L157: thesis by L156 , L152 , L155;
end;
end;
theorem
L159: (for R1 being Function holds (for R10 being set holds (R1 just_once_values R10 implies ( Im (R1 , ( R1 <- R10 )) ) = { R10 })))
proof
let R1 being Function;
let R10 being set;
assume L160: R1 just_once_values R10;
L161: ( R1 <- R10 ) in ( dom R1 ) by L160 , L147;
thus L162: ( Im (R1 , ( R1 <- R10 )) ) = { ( R1 . ( R1 <- R10 ) ) } by L161 , FUNCT_1:59
.= { R10 } by L160 , L147;
end;
theorem
L163: (for R1 being Function holds (for R10 being set holds (R1 just_once_values R10 implies ( R1 " { R10 } ) = { ( R1 <- R10 ) })))
proof
let R1 being Function;
let R10 being set;
assume L164: R1 just_once_values R10;
consider R7 being set such that L165: { R7 } = ( R1 " { R10 } ) by L164 , L65;
L166: R7 in ( R1 " { R10 } ) by L165 , ZFMISC_1:31;
L167: ( R1 . R7 ) in { R10 } by L166 , FUNCT_1:def 7;
L168: ( R1 . R7 ) = R10 by L167 , TARSKI:def 1;
L169: R7 in ( dom R1 ) by L166 , FUNCT_1:def 7;
thus L170: thesis by L169 , L164 , L165 , L168 , L147;
end;
theorem
L171: (for R1 being Function holds (for R10 being set holds ((R1 is  one-to-one & R10 in ( rng R1 )) implies ( ( R1 " ) . R10 ) = ( R1 <- R10 ))))
proof
let R1 being Function;
let R10 being set;
assume that
L172: R1 is  one-to-one
and
L173: R10 in ( rng R1 );
consider R7 being set such that L174: (R7 in ( dom R1 ) & ( R1 . R7 ) = R10) by L173 , FUNCT_1:def 3;
L175: R1 just_once_values R10 by L172 , L173 , L115;
L176: R7 = ( R1 <- R10 ) by L175 , L174 , L147;
thus L177: thesis by L176 , L172 , L174 , FUNCT_1:32;
end;
theorem
L178: (for R1 being Function holds (for R7 being set holds (R1 is_one-to-one_at R7 implies ( R1 <- ( R1 . R7 ) ) = R7)))
proof
let R1 being Function;
let R7 being set;
assume L179: R1 is_one-to-one_at R7;
L180: (R7 in ( dom R1 ) & R1 just_once_values ( R1 . R7 )) by L179 , L133;
thus L181: thesis by L180 , L147;
end;
theorem
L182: (for R1 being Function holds (for R10 being set holds (R1 just_once_values R10 implies R1 is_one-to-one_at ( R1 <- R10 ))))
proof
let R1 being Function;
let R10 being set;
assume L183: R1 just_once_values R10;
L184:
now
let R7 being set;
assume L185: (R7 in ( dom R1 ) & R7 <> ( R1 <- R10 ));
L186: ( R1 . R7 ) <> R10 by L185 , L183 , L147;
thus L187: ( R1 . R7 ) <> ( R1 . ( R1 <- R10 ) ) by L186 , L183 , L147;
end;
L188: ( R1 <- R10 ) in ( dom R1 ) by L183 , L147;
thus L189: thesis by L188 , L184 , L16;
end;
definition
let R17 being non  empty set;
let R19 being (Element of R17);
let R20 being (Element of R17);
redefine func <*R19 , R20 *> -> (FinSequence of R17);

coherence by FINSEQ_2:13;
end;
definition
let R17 being non  empty set;
let R19 being (Element of R17);
let R20 being (Element of R17);
let R21 being (Element of R17);
redefine func <*R19 , R20 , R21 *> -> (FinSequence of R17);

coherence by FINSEQ_2:14;
end;
theorem
L192: (for B1 being Nat holds (for B2 being set holds (for B3 being (FinSequence of B2) holds ((1 <= B1 & B1 <= ( len B3 )) implies ( B3 /. B1 ) = ( B3 . B1 )))))
proof
let C4 being Nat;
let C5 being set;
let C6 being (FinSequence of C5);
assume L193: (1 <= C4 & C4 <= ( len C6 ));
L194: C4 in ( dom C6 ) by L193 , FINSEQ_3:25;
thus L195: thesis by L194 , PARTFUN1:def 6;
end;
theorem
L196: (for R17 being non  empty set holds (for R18 being (Element of R17) holds ( <* R18 *> /. 1 ) = R18))
proof
let R17 being non  empty set;
let R18 being (Element of R17);
L197: 1 in { 1 } by FINSEQ_1:2;
L198: (( dom <* R18 *> ) = { 1 } & ( <* R18 *> . 1 ) = R18) by FINSEQ_1:2 , FINSEQ_1:def 8;
thus L199: thesis by L198 , L197 , PARTFUN1:def 6;
end;
theorem
L200: (for R17 being non  empty set holds (for R19 being (Element of R17) holds (for R20 being (Element of R17) holds (( <* R19 , R20 *> /. 1 ) = R19 & ( <* R19 , R20 *> /. 2 ) = R20))))
proof
let R17 being non  empty set;
let R19 being (Element of R17);
let R20 being (Element of R17);
set D1 = <* R19 , R20 *>;
L201: (( D1 . 2 ) = R20 & 1 in { 1 , 2 }) by FINSEQ_1:2 , FINSEQ_1:44;
L202: 2 in { 1 , 2 } by FINSEQ_1:2;
L203: (( dom D1 ) = { 1 , 2 } & ( D1 . 1 ) = R19) by FINSEQ_1:2 , FINSEQ_1:44 , FINSEQ_1:89;
thus L204: thesis by L203 , L201 , L202 , PARTFUN1:def 6;
end;
theorem
L205: (for R17 being non  empty set holds (for R19 being (Element of R17) holds (for R20 being (Element of R17) holds (for R21 being (Element of R17) holds (( <* R19 , R20 , R21 *> /. 1 ) = R19 & ( <* R19 , R20 , R21 *> /. 2 ) = R20 & ( <* R19 , R20 , R21 *> /. 3 ) = R21)))))
proof
let R17 being non  empty set;
let R19 being (Element of R17);
let R20 being (Element of R17);
let R21 being (Element of R17);
set D2 = <* R19 , R20 , R21 *>;
L206: (( D2 . 2 ) = R20 & ( D2 . 3 ) = R21) by FINSEQ_1:45;
L207: (1 in { 1 , 2 , 3 } & 2 in { 1 , 2 , 3 }) by FINSEQ_3:1;
L208: 3 in { 1 , 2 , 3 } by FINSEQ_3:1;
L209: (( dom D2 ) = { 1 , 2 , 3 } & ( D2 . 1 ) = R19) by FINSEQ_1:45 , FINSEQ_1:89 , FINSEQ_3:1;
thus L210: thesis by L209 , L206 , L207 , L208 , PARTFUN1:def 6;
end;
definition
let R2 being FinSequence;
let R7 being set;
func R7 .. R2 -> (Element of ( NAT )) equals 
( ( Sgm ( R2 " { R7 } ) ) . 1 );
coherence
proof
set D3 = ( Sgm ( R2 " { R7 } ) );
per cases ;
suppose L211: (not 1 in ( dom D3 ));

L212: ( D3 . 1 ) = ( 0 ) by L211 , FUNCT_1:def 2;
thus L213: thesis by L212;
end;
suppose L214: 1 in ( dom D3 );

L215: ( rng D3 ) c= ( NAT ) by FINSEQ_1:def 4;
L216: ( D3 . 1 ) in ( rng D3 ) by L214 , FUNCT_1:def 3;
thus L217: thesis by L216 , L215;
end;
end;
end;
theorem
L220: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( R2 . ( R7 .. R2 ) ) = R7)))
proof
let R2 being FinSequence;
let R7 being set;
set D4 = ( Sgm ( R2 " { R7 } ) );
L221: (( R2 " { R7 } ) c= ( dom R2 ) & ( dom R2 ) = ( Seg ( len R2 ) )) by FINSEQ_1:def 3 , RELAT_1:132;
assume L222: R7 in ( rng R2 );
L223: ( R2 " { R7 } ) <> ( {} ) by L222 , FUNCT_1:72;
L224: ( rng D4 ) <> ( {} ) by L223 , L221 , FINSEQ_1:def 13;
L225: 1 in ( dom D4 ) by L224 , FINSEQ_3:32;
L226: ( D4 . 1 ) in ( rng D4 ) by L225 , FUNCT_1:def 3;
L227: ( rng D4 ) = ( R2 " { R7 } ) by L221 , FINSEQ_1:def 13;
L228: ( R2 . ( R7 .. R2 ) ) in { R7 } by L227 , L226 , FUNCT_1:def 7;
thus L229: thesis by L228 , TARSKI:def 1;
end;
theorem
L230: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( R7 .. R2 ) in ( dom R2 ))))
proof
let R2 being FinSequence;
let R7 being set;
L231: (( R2 " { R7 } ) c= ( dom R2 ) & ( dom R2 ) = ( Seg ( len R2 ) )) by FINSEQ_1:def 3 , RELAT_1:132;
assume L232: R7 in ( rng R2 );
L233: ( R2 " { R7 } ) <> ( {} ) by L232 , FUNCT_1:72;
L234: ( rng ( Sgm ( R2 " { R7 } ) ) ) <> ( {} ) by L233 , L231 , FINSEQ_1:def 13;
L235: 1 in ( dom ( Sgm ( R2 " { R7 } ) ) ) by L234 , FINSEQ_3:32;
L236: ( R7 .. R2 ) in ( rng ( Sgm ( R2 " { R7 } ) ) ) by L235 , FUNCT_1:def 3;
L237: ( R7 .. R2 ) in ( R2 " { R7 } ) by L236 , L231 , FINSEQ_1:def 13;
thus L238: thesis by L237 , FUNCT_1:def 7;
end;
theorem
L239: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies (1 <= ( R7 .. R2 ) & ( R7 .. R2 ) <= ( len R2 )))))
proof
let R2 being FinSequence;
let R7 being set;
assume L240: R7 in ( rng R2 );
L241: ( R7 .. R2 ) in ( dom R2 ) by L240 , L230;
thus L242: thesis by L241 , FINSEQ_3:25;
end;
theorem
L243: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies (( ( R7 .. R2 ) - 1 ) is (Element of ( NAT )) & ( ( len R2 ) - ( R7 .. R2 ) ) is (Element of ( NAT ))))))
proof
let R2 being FinSequence;
let R7 being set;
assume L244: R7 in ( rng R2 );
L245: (1 <= ( R7 .. R2 ) & ( R7 .. R2 ) <= ( len R2 )) by L244 , L239;
thus L246: thesis by L245 , INT_1:5;
end;
theorem
L247: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( R7 .. R2 ) in ( R2 " { R7 } ))))
proof
let R2 being FinSequence;
let R7 being set;
assume L248: R7 in ( rng R2 );
L249: ( R2 . ( R7 .. R2 ) ) = R7 by L248 , L220;
L250: ( R2 . ( R7 .. R2 ) ) in { R7 } by L249 , TARSKI:def 1;
L251: ( R7 .. R2 ) in ( dom R2 ) by L248 , L230;
thus L252: thesis by L251 , L250 , FUNCT_1:def 7;
end;
theorem
L253: (for R2 being FinSequence holds (for R7 being set holds (for R12 being Nat holds ((R12 in ( dom R2 ) & R12 < ( R7 .. R2 )) implies ( R2 . R12 ) <> R7))))
proof
let R2 being FinSequence;
let R7 being set;
let R12 being Nat;
set D5 = ( Sgm ( R2 " { R7 } ) );
assume that
L254: R12 in ( dom R2 )
and
L255: R12 < ( R7 .. R2 )
and
L256: ( R2 . R12 ) = R7;
L257: R7 in { R7 } by TARSKI:def 1;
L258: (( R2 " { R7 } ) c= ( dom R2 ) & ( dom R2 ) = ( Seg ( len R2 ) )) by FINSEQ_1:def 3 , RELAT_1:132;
L259: ( rng D5 ) = ( R2 " { R7 } ) by L258 , FINSEQ_1:def 13;
L260: R12 in ( rng D5 ) by L259 , L254 , L256 , L257 , FUNCT_1:def 7;
consider R10 being set such that L261: R10 in ( dom D5 ) and L262: ( D5 . R10 ) = R12 by L260 , FUNCT_1:def 3;
reconsider D6 = R10 as (Element of ( NAT )) by L261;
L263:
now
assume L264: (not 1 < D6);
L265: (1 = D6 or D6 < 1) by L264 , XXREAL_0:1;
thus L266: contradiction by L265 , L255 , L261 , L262 , FINSEQ_3:24 , NAT_1:14;
end;
L267: ( dom D5 ) = ( Seg ( len D5 ) ) by FINSEQ_1:def 3;
L268: D6 <= ( len D5 ) by L267 , L261 , FINSEQ_1:1;
thus L269: contradiction by L268 , L255 , L258 , L262 , L263 , FINSEQ_1:def 13;
end;
theorem
L270: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 implies ( R2 <- R7 ) = ( R7 .. R2 ))))
proof
let R2 being FinSequence;
let R7 being set;
assume L271: R2 just_once_values R7;
L272: R7 in ( rng R2 ) by L271 , L57;
L273: (( R7 .. R2 ) in ( dom R2 ) & ( R2 . ( R7 .. R2 ) ) = R7) by L272 , L220 , L230;
thus L274: thesis by L273 , L271 , L147;
end;
theorem
L275: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 implies (for R12 being Nat holds ((R12 in ( dom R2 ) & R12 <> ( R7 .. R2 )) implies ( R2 . R12 ) <> R7)))))
proof
let R2 being FinSequence;
let R7 being set;
assume L276: R2 just_once_values R7;
let R12 being Nat;
assume L277: (R12 in ( dom R2 ) & R12 <> ( R7 .. R2 ) & ( R2 . R12 ) = R7);
L278: ( R2 <- R7 ) = ( R7 .. R2 ) by L276 , L270;
thus L279: thesis by L278 , L276 , L277 , L147;
end;
theorem
L280: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & (for R12 being Nat holds ((R12 in ( dom R2 ) & R12 <> ( R7 .. R2 )) implies ( R2 . R12 ) <> R7))) implies R2 just_once_values R7)))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L281: R7 in ( rng R2 )
and
L282: (for R12 being Nat holds ((R12 in ( dom R2 ) & R12 <> ( R7 .. R2 )) implies ( R2 . R12 ) <> R7));
L283: (for R11 being set holds ((R11 in ( dom R2 ) & R11 <> ( R7 .. R2 )) implies ( R2 . R11 ) <> R7)) by L282;
L284: (( R2 . ( R7 .. R2 ) ) = R7 & ( R7 .. R2 ) in ( dom R2 )) by L281 , L220 , L230;
thus L285: thesis by L284 , L283 , L78;
end;
theorem
L286: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 iff (R7 in ( rng R2 ) & { ( R7 .. R2 ) } = ( R2 " { R7 } )))))
proof
let R2 being FinSequence;
let R7 being set;
thus L287: (R2 just_once_values R7 implies (R7 in ( rng R2 ) & { ( R7 .. R2 ) } = ( R2 " { R7 } )))
proof
assume L288: R2 just_once_values R7;
L289: ( R7 .. R2 ) = ( R2 <- R7 ) by L288 , L270;
thus L290: thesis by L289 , L288 , L57 , L163;
end;

assume that
L291: R7 in ( rng R2 )
and
L292: { ( R7 .. R2 ) } = ( R2 " { R7 } );
L293:
now
let R11 being set;
assume that
L294: R11 in ( dom R2 )
and
L295: R11 <> ( R7 .. R2 )
and
L296: ( R2 . R11 ) = R7;
L297: ( R2 . R11 ) in { R7 } by L296 , TARSKI:def 1;
L298: R11 in ( R2 " { R7 } ) by L297 , L294 , FUNCT_1:def 7;
thus L299: contradiction by L298 , L292 , L295 , TARSKI:def 1;
end;
L300: (( R2 . ( R7 .. R2 ) ) = R7 & ( R7 .. R2 ) in ( dom R2 )) by L291 , L220 , L230;
thus L301: thesis by L300 , L293 , L78;
end;
theorem
L302: (for R2 being FinSequence holds (for R7 being set holds ((R2 is  one-to-one & R7 in ( rng R2 )) implies { ( R7 .. R2 ) } = ( R2 " { R7 } ))))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L303: R2 is  one-to-one
and
L304: R7 in ( rng R2 );
thus L305: { ( R7 .. R2 ) } c= ( R2 " { R7 } )
proof
let R10 being set;
assume L306: R10 in { ( R7 .. R2 ) };
L307: R10 = ( R7 .. R2 ) by L306 , TARSKI:def 1;
thus L308: thesis by L307 , L304 , L247;
end;

let R10 being set;
assume L309: R10 in ( R2 " { R7 } );
L310: R10 in ( dom R2 ) by L309 , FUNCT_1:def 7;
L311: ( R2 . R10 ) in { R7 } by L309 , FUNCT_1:def 7;
L312: ( R2 . R10 ) = R7 by L311 , TARSKI:def 1;
L313: (( R2 . ( R7 .. R2 ) ) = R7 & ( R7 .. R2 ) in ( dom R2 )) by L304 , L220 , L230;
L314: ( R7 .. R2 ) = R10 by L313 , L303 , L310 , L312 , FUNCT_1:def 4;
thus L315: thesis by L314 , TARSKI:def 1;
end;
theorem
L316: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 iff ( len ( R2 - { R7 } ) ) = ( ( len R2 ) - 1 ))))
proof
let R2 being FinSequence;
let R7 being set;
thus L317: (R2 just_once_values R7 implies ( len ( R2 - { R7 } ) ) = ( ( len R2 ) - 1 ))
proof
assume L318: R2 just_once_values R7;
L319: (( len ( R2 - { R7 } ) ) = ( ( len R2 ) - ( card ( R2 " { R7 } ) ) ) & ( R2 " { R7 } ) = { ( R7 .. R2 ) }) by L318 , L286 , FINSEQ_3:59;
thus L320: thesis by L319 , CARD_1:30;
end;

L321: ( R2 " { R7 } ) = ( Coim (R2 , R7) );
assume L322: ( len ( R2 - { R7 } ) ) = ( ( len R2 ) - 1 );
L323: ( ( len R2 ) + ( - 1 ) ) = ( ( len R2 ) - ( card ( R2 " { R7 } ) ) ) by L322 , FINSEQ_3:59
.= ( ( len R2 ) + ( - ( card ( R2 " { R7 } ) ) ) );
thus L324: thesis by L323 , L321 , L55;
end;
theorem
L325: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 implies (for R12 being Nat holds (R12 in ( dom ( R2 - { R7 } ) ) implies ((R12 < ( R7 .. R2 ) implies ( ( R2 - { R7 } ) . R12 ) = ( R2 . R12 )) & (( R7 .. R2 ) <= R12 implies ( ( R2 - { R7 } ) . R12 ) = ( R2 . ( R12 + 1 ) ))))))))
proof
let R2 being FinSequence;
let R7 being set;
assume L326: R2 just_once_values R7;
set D7 = ( R2 - { R7 } );
let R12 being Nat;
assume L327: R12 in ( dom ( R2 - { R7 } ) );
set D8 = { R22 where R22 is (Element of ( NAT )) : (R22 in ( dom R2 ) & R22 <= R12 & ( R2 . R22 ) in { R7 }) };
L328: ( dom ( R2 - { R7 } ) ) c= ( dom R2 ) by FINSEQ_3:63;
thus L329: (R12 < ( R7 .. R2 ) implies ( ( R2 - { R7 } ) . R12 ) = ( R2 . R12 ))
proof
assume L330: R12 < ( R7 .. R2 );
L331: D8 c= ( {} )
proof
let R10 being set;
assume L332: R10 in D8;
consider R22 being (Element of ( NAT )) such that L333: R10 = R22 and L334: (R22 in ( dom R2 ) & R22 <= R12) and L335: ( R2 . R22 ) in { R7 } by L332;
L336: ( R2 . R22 ) <> R7 by L326 , L330 , L334 , L275;
thus L337: thesis by L336 , L335 , TARSKI:def 1;
end;
L338: D8 = ( {} ) by L331;
L339: ( R2 . R12 ) <> R7 by L326 , L327 , L328 , L330 , L275;
L340: (not ( R2 . R12 ) in { R7 }) by L339 , TARSKI:def 1;
L341: ( D7 . ( R12 - ( 0 ) ) ) = ( R2 . R12 ) by L340 , L327 , L328 , L338 , CARD_1:27 , FINSEQ_3:85;
thus L342: thesis by L341;
end;

set D9 = { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom R2 ) & R23 <= ( R12 + 1 ) & ( R2 . R23 ) in { R7 }) };
assume L343: ( R7 .. R2 ) <= R12;
L344: R7 in ( rng R2 ) by L326 , L57;
L345: D9 = { ( R7 .. R2 ) }
proof
thus L346: D9 c= { ( R7 .. R2 ) }
proof
let R10 being set;
assume L347: R10 in D9;
consider R23 being (Element of ( NAT )) such that L348: R23 = R10 and L349: R23 in ( dom R2 ) and L350: R23 <= ( R12 + 1 ) and L351: ( R2 . R23 ) in { R7 } by L347;
L352: ( R2 . R23 ) = R7 by L351 , TARSKI:def 1;
L353: R23 = ( R7 .. R2 ) by L352 , L326 , L349 , L275;
thus L354: thesis by L353 , L348 , TARSKI:def 1;
end;

let R10 being set;
assume L355: R10 in { ( R7 .. R2 ) };
L356: R10 = ( R7 .. R2 ) by L355 , TARSKI:def 1;
L357: ( R2 . ( R7 .. R2 ) ) = R7 by L344 , L220;
L358: ( R2 . ( R7 .. R2 ) ) in { R7 } by L357 , TARSKI:def 1;
L359: (( R7 .. R2 ) in ( dom R2 ) & ( R7 .. R2 ) <= ( R12 + 1 )) by L344 , L343 , L230 , NAT_1:12;
thus L360: thesis by L359 , L356 , L358;
end;
reconsider D10 = D9 as  finite set by L345;
L361: (( dom D7 ) = ( Seg ( len D7 ) ) & ( len ( R2 - { R7 } ) ) = ( ( len R2 ) - 1 )) by L326 , L316 , FINSEQ_1:def 3;
L362: R12 <= ( ( len R2 ) - 1 ) by L361 , L327 , FINSEQ_1:1;
L363: (1 <= ( R12 + 1 ) & ( R12 + 1 ) <= ( len R2 )) by L362 , NAT_1:12 , XREAL_1:19;
L364: ( R12 + 1 ) in ( Seg ( len R2 ) ) by L363;
L365: ( R12 + 1 ) in ( dom R2 ) by L364 , FINSEQ_1:def 3;
L366:
now
L367: ( R7 .. R2 ) <> ( R12 + 1 ) by L343 , XREAL_1:29;
L368: ( R2 . ( R12 + 1 ) ) <> R7 by L367 , L326 , L365 , L275;
assume L369: ( R2 . ( R12 + 1 ) ) in { R7 };
thus L370: contradiction by L369 , L368 , TARSKI:def 1;
end;
L371: ( ( R2 - { R7 } ) . ( ( R12 + 1 ) - ( card D10 ) ) ) = ( R2 . ( R12 + 1 ) ) by L366 , L365 , FINSEQ_3:85;
L372: ( D7 . ( ( R12 + 1 ) - 1 ) ) = ( R2 . ( R12 + 1 ) ) by L371 , L345 , CARD_1:30;
thus L373: thesis by L372;
end;
theorem
L374: (for R2 being FinSequence holds (for R7 being set holds ((R2 is  one-to-one & R7 in ( rng R2 )) implies (for R12 being Nat holds (R12 in ( dom ( R2 - { R7 } ) ) implies ((( ( R2 - { R7 } ) . R12 ) = ( R2 . R12 ) iff R12 < ( R7 .. R2 )) & (( ( R2 - { R7 } ) . R12 ) = ( R2 . ( R12 + 1 ) ) iff ( R7 .. R2 ) <= R12)))))))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L375: R2 is  one-to-one
and
L376: R7 in ( rng R2 );
set D11 = ( R2 - { R7 } );
let R12 being Nat;
assume L377: R12 in ( dom ( R2 - { R7 } ) );
L378: R2 just_once_values R7 by L375 , L376 , L115;
L379: (( dom D11 ) = ( Seg ( len D11 ) ) & ( len ( R2 - { R7 } ) ) = ( ( len R2 ) - 1 )) by L378 , L316 , FINSEQ_1:def 3;
L380: R12 <= ( ( len R2 ) - 1 ) by L379 , L377 , FINSEQ_1:1;
L381: (1 <= ( R12 + 1 ) & ( R12 + 1 ) <= ( len R2 )) by L380 , NAT_1:12 , XREAL_1:19;
L382: ( R12 + 1 ) in ( Seg ( len R2 ) ) by L381;
L383: (( dom ( R2 - { R7 } ) ) c= ( dom R2 ) & ( R12 + 1 ) in ( dom R2 )) by L382 , FINSEQ_1:def 3 , FINSEQ_3:63;
thus L384: (( ( R2 - { R7 } ) . R12 ) = ( R2 . R12 ) implies R12 < ( R7 .. R2 ))
proof
assume that
L385: ( ( R2 - { R7 } ) . R12 ) = ( R2 . R12 )
and
L386: (not R12 < ( R7 .. R2 ));
L387: ( D11 . R12 ) = ( R2 . ( R12 + 1 ) ) by L378 , L377 , L386 , L325;
L388: ( R12 + ( 0 ) ) = ( R12 + 1 ) by L387 , L375 , L377 , L383 , L385 , FUNCT_1:def 4;
thus L389: thesis by L388;
end;

thus L390: (R12 < ( R7 .. R2 ) implies ( ( R2 - { R7 } ) . R12 ) = ( R2 . R12 )) by L378 , L377 , L325;
thus L391: (( ( R2 - { R7 } ) . R12 ) = ( R2 . ( R12 + 1 ) ) implies ( R7 .. R2 ) <= R12)
proof
assume L392: ( ( R2 - { R7 } ) . R12 ) = ( R2 . ( R12 + 1 ) );
assume L393: (not ( R7 .. R2 ) <= R12);
L394: ( R2 . ( R12 + 1 ) ) = ( R2 . R12 ) by L393 , L378 , L377 , L392 , L325;
L395: ( R12 + ( 0 ) ) = ( R12 + 1 ) by L394 , L375 , L377 , L383 , FUNCT_1:def 4;
thus L396: thesis by L395;
end;

thus L397: thesis by L378 , L377 , L325;
end;
definition
let R2 being FinSequence;
let R7 being set;
assume L398: R7 in ( rng R2 );
func R2 -| R7 -> FinSequence means 
:L399: (ex R15 being Nat st (R15 = ( ( R7 .. R2 ) - 1 ) & it = ( R2 | ( Seg R15 ) )));
existence
proof
reconsider D12 = ( ( R7 .. R2 ) - 1 ) as (Element of ( NAT )) by L398 , L243;
reconsider D13 = ( R2 | ( Seg D12 ) ) as FinSequence by FINSEQ_1:15;
take D13;
thus L400: thesis;
end;
uniqueness;
end;
theorem
L402: (for R2 being FinSequence holds (for R7 being set holds (for R15 being Nat holds ((R7 in ( rng R2 ) & R15 = ( ( R7 .. R2 ) - 1 )) implies ( R2 | ( Seg R15 ) ) = ( R2 -| R7 )))))
proof
let R2 being FinSequence;
let R7 being set;
let R15 being Nat;
assume L403: R7 in ( rng R2 );
L404: (ex R14 being Nat st (R14 = ( ( R7 .. R2 ) - 1 ) & ( R2 | ( Seg R14 ) ) = ( R2 -| R7 ))) by L403 , L399;
thus L405: thesis by L404;
end;
theorem
L406: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( len ( R2 -| R7 ) ) = ( ( R7 .. R2 ) - 1 ))))
proof
let R2 being FinSequence;
let R7 being set;
assume L407: R7 in ( rng R2 );
consider R15 being Nat such that L408: R15 = ( ( R7 .. R2 ) - 1 ) and L409: ( R2 | ( Seg R15 ) ) = ( R2 -| R7 ) by L407 , L399;
L410: R15 <= ( R15 + 1 ) by NAT_1:12;
L411: ( R15 + 1 ) <= ( len R2 ) by L407 , L408 , L239;
L412: R15 <= ( len R2 ) by L411 , L410 , XXREAL_0:2;
thus L413: thesis by L412 , L408 , L409 , FINSEQ_1:17;
end;
theorem
L414: (for R2 being FinSequence holds (for R7 being set holds (for R15 being Nat holds ((R7 in ( rng R2 ) & R15 = ( ( R7 .. R2 ) - 1 )) implies ( dom ( R2 -| R7 ) ) = ( Seg R15 )))))
proof
let R2 being FinSequence;
let R7 being set;
let R15 being Nat;
assume L415: R7 in ( rng R2 );
L416: ( len ( R2 -| R7 ) ) = ( ( R7 .. R2 ) - 1 ) by L415 , L406;
thus L417: thesis by L416 , FINSEQ_1:def 3;
end;
theorem
L418: (for R2 being FinSequence holds (for R7 being set holds (for R12 being Nat holds ((R7 in ( rng R2 ) & R12 in ( dom ( R2 -| R7 ) )) implies ( R2 . R12 ) = ( ( R2 -| R7 ) . R12 )))))
proof
let R2 being FinSequence;
let R7 being set;
let R12 being Nat;
assume that
L419: R7 in ( rng R2 )
and
L420: R12 in ( dom ( R2 -| R7 ) );
L421: (ex R15 being Nat st (R15 = ( ( R7 .. R2 ) - 1 ) & ( R2 | ( Seg R15 ) ) = ( R2 -| R7 ))) by L419 , L399;
thus L422: thesis by L421 , L420 , FUNCT_1:47;
end;
theorem
L423: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies (not R7 in ( rng ( R2 -| R7 ) )))))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L424: R7 in ( rng R2 )
and
L425: R7 in ( rng ( R2 -| R7 ) );
reconsider D14 = ( ( R7 .. R2 ) - 1 ) as (Element of ( NAT )) by L424 , L243;
set D15 = ( R2 | ( Seg D14 ) );
L426: D15 = ( R2 -| R7 ) by L424 , L402;
consider R10 being set such that L427: R10 in ( dom D15 ) and L428: ( D15 . R10 ) = R7 by L426 , L425 , FUNCT_1:def 3;
L429: ( dom D15 ) = ( Seg D14 ) by L424 , L426 , L414;
reconsider D16 = R10 as (Element of ( NAT )) by L429 , L427;
L430: D16 <= D14 by L427 , L429 , FINSEQ_1:1;
L431: ( D16 + 1 ) <= ( R7 .. R2 ) by L430 , XREAL_1:19;
L432: D16 < ( D16 + 1 ) by XREAL_1:29;
L433: (( dom D15 ) c= ( dom R2 ) & D16 < ( R7 .. R2 )) by L432 , L431 , RELAT_1:60 , XXREAL_0:2;
L434: ( R2 . D16 ) <> R7 by L433 , L427 , L253;
thus L435: thesis by L434 , L427 , L428 , FUNCT_1:47;
end;
theorem
L436: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( rng ( R2 -| R7 ) ) misses { R7 })))
proof
let R2 being FinSequence;
let R7 being set;
assume L437: R7 in ( rng R2 );
L438: (not R7 in ( rng ( R2 -| R7 ) )) by L437 , L423;
L439: (for R10 being set holds (R10 in ( rng ( R2 -| R7 ) ) implies (not R10 in { R7 }))) by L438 , TARSKI:def 1;
thus L440: thesis by L439 , XBOOLE_0:3;
end;
theorem
L441: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( rng ( R2 -| R7 ) ) c= ( rng R2 ))))
proof
let R2 being FinSequence;
let R7 being set;
assume L442: R7 in ( rng R2 );
L443: (ex R15 being Nat st (R15 = ( ( R7 .. R2 ) - 1 ) & ( R2 | ( Seg R15 ) ) = ( R2 -| R7 ))) by L442 , L399;
thus L444: thesis by L443 , RELAT_1:70;
end;
theorem
L445: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies (( R7 .. R2 ) = 1 iff ( R2 -| R7 ) = ( {} )))))
proof
let R2 being FinSequence;
let R7 being set;
assume L446: R7 in ( rng R2 );
thus L447: (( R7 .. R2 ) = 1 implies ( R2 -| R7 ) = ( {} ))
proof
assume L448: ( R7 .. R2 ) = 1;
L449: ( len ( R2 -| R7 ) ) = ( ( R7 .. R2 ) - 1 ) by L446 , L406
.= ( 0 ) by L448;
thus L450: thesis by L449;
end;

assume L451: ( R2 -| R7 ) = ( {} );
L452: ( len ( R2 -| R7 ) ) = ( 0 ) by L451;
L453: ( len ( R2 -| R7 ) ) = ( ( R7 .. R2 ) - 1 ) by L446 , L406;
thus L454: thesis by L453 , L452;
end;
theorem
L455: (for R2 being FinSequence holds (for R7 being set holds (for R17 being non  empty set holds ((R7 in ( rng R2 ) & R2 is (FinSequence of R17)) implies ( R2 -| R7 ) is (FinSequence of R17)))))
proof
let R2 being FinSequence;
let R7 being set;
let R17 being non  empty set;
assume L456: R7 in ( rng R2 );
L457: (ex R15 being Nat st (R15 = ( ( R7 .. R2 ) - 1 ) & ( R2 | ( Seg R15 ) ) = ( R2 -| R7 ))) by L456 , L399;
thus L458: thesis by L457 , FINSEQ_1:18;
end;
definition
let R2 being FinSequence;
let R7 being set;
assume L459: R7 in ( rng R2 );
func R2 |-- R7 -> FinSequence means 
:L460: (( len it ) = ( ( len R2 ) - ( R7 .. R2 ) ) & (for R12 being Nat holds (R12 in ( dom it ) implies ( it . R12 ) = ( R2 . ( R12 + ( R7 .. R2 ) ) ))));
existence
proof
deffunc H1(Nat) = ( R2 . ( $1 + ( R7 .. R2 ) ) );
reconsider D17 = ( ( len R2 ) - ( R7 .. R2 ) ) as (Element of ( NAT )) by L459 , L243;
consider R3 being FinSequence such that L461: (( len R3 ) = D17 & (for B4 being Nat holds (B4 in ( dom R3 ) implies ( R3 . B4 ) = H1(B4)))) from FINSEQ_1:sch 2;
take R3;
thus L462: thesis by L461;
end;
uniqueness
proof
let C7 , C8 being FinSequence;
assume that
L463: ( len C7 ) = ( ( len R2 ) - ( R7 .. R2 ) )
and
L464: (for R12 being Nat holds (R12 in ( dom C7 ) implies ( C7 . R12 ) = ( R2 . ( R12 + ( R7 .. R2 ) ) )));
assume that
L465: ( len C8 ) = ( ( len R2 ) - ( R7 .. R2 ) )
and
L466: (for R12 being Nat holds (R12 in ( dom C8 ) implies ( C8 . R12 ) = ( R2 . ( R12 + ( R7 .. R2 ) ) )));
L467:
now
let C9 being Nat;
L468: (( dom C7 ) = ( Seg ( len C7 ) ) & ( dom C8 ) = ( Seg ( len C8 ) )) by FINSEQ_1:def 3;
assume L469: C9 in ( dom C7 );
L470: ( C7 . C9 ) = ( R2 . ( C9 + ( R7 .. R2 ) ) ) by L469 , L464;
thus L471: ( C7 . C9 ) = ( C8 . C9 ) by L470 , L463 , L465 , L466 , L469 , L468;
end;
thus L472: thesis by L467 , L463 , L465 , FINSEQ_2:9;
end;
end;
theorem
L474: (for R2 being FinSequence holds (for R7 being set holds (for R15 being Nat holds ((R7 in ( rng R2 ) & R15 = ( ( len R2 ) - ( R7 .. R2 ) )) implies ( dom ( R2 |-- R7 ) ) = ( Seg R15 )))))
proof
let R2 being FinSequence;
let R7 being set;
let R15 being Nat;
assume L475: R7 in ( rng R2 );
L476: ( len ( R2 |-- R7 ) ) = ( ( len R2 ) - ( R7 .. R2 ) ) by L475 , L460;
thus L477: thesis by L476 , FINSEQ_1:def 3;
end;
theorem
L478: (for R2 being FinSequence holds (for R7 being set holds (for R15 being Nat holds ((R7 in ( rng R2 ) & R15 in ( dom ( R2 |-- R7 ) )) implies ( R15 + ( R7 .. R2 ) ) in ( dom R2 )))))
proof
let R2 being FinSequence;
let R7 being set;
let R15 being Nat;
assume that
L479: R7 in ( rng R2 )
and
L480: R15 in ( dom ( R2 |-- R7 ) );
reconsider D18 = ( ( len R2 ) - ( R7 .. R2 ) ) as (Element of ( NAT )) by L479 , L243;
L481: R15 in ( Seg D18 ) by L479 , L480 , L474;
L482: R15 <= ( ( len R2 ) - ( R7 .. R2 ) ) by L481 , FINSEQ_1:1;
L483: ( R15 + ( R7 .. R2 ) ) <= ( len R2 ) by L482 , XREAL_1:19;
L484: 1 <= R15 by L480 , FINSEQ_3:25;
L485: 1 <= ( R15 + ( R7 .. R2 ) ) by L484 , NAT_1:12;
thus L486: thesis by L485 , L483 , FINSEQ_3:25;
end;
theorem
L487: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies ( rng ( R2 |-- R7 ) ) c= ( rng R2 ))))
proof
let R2 being FinSequence;
let R7 being set;
assume L488: R7 in ( rng R2 );
let R10 being set;
assume L489: R10 in ( rng ( R2 |-- R7 ) );
consider R11 being set such that L490: R11 in ( dom ( R2 |-- R7 ) ) and L491: ( ( R2 |-- R7 ) . R11 ) = R10 by L489 , FUNCT_1:def 3;
reconsider D19 = R11 as (Element of ( NAT )) by L490;
L492: (R10 = ( R2 . ( D19 + ( R7 .. R2 ) ) ) & ( D19 + ( R7 .. R2 ) ) in ( dom R2 )) by L488 , L490 , L491 , L460 , L478;
thus L493: thesis by L492 , FUNCT_1:def 3;
end;
theorem
L494: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 iff (R7 in ( rng R2 ) & (not R7 in ( rng ( R2 |-- R7 ) ))))))
proof
let R2 being FinSequence;
let R7 being set;
thus L495: (R2 just_once_values R7 implies (R7 in ( rng R2 ) & (not R7 in ( rng ( R2 |-- R7 ) ))))
proof
assume L496: R2 just_once_values R7;
thus L497: R7 in ( rng R2 ) by L496 , L57;
assume L498: R7 in ( rng ( R2 |-- R7 ) );
consider R11 being set such that L499: R11 in ( dom ( R2 |-- R7 ) ) and L500: ( ( R2 |-- R7 ) . R11 ) = R7 by L498 , FUNCT_1:def 3;
reconsider D20 = R11 as (Element of ( NAT )) by L499;
L501: (( ( R2 |-- R7 ) . D20 ) = ( R2 . ( D20 + ( R7 .. R2 ) ) ) & ( D20 + ( R7 .. R2 ) ) in ( dom R2 )) by L497 , L499 , L460 , L478;
L502: ( D20 + ( R7 .. R2 ) ) = ( ( 0 ) + ( R7 .. R2 ) ) by L501 , L496 , L500 , L275;
thus L503: thesis by L502 , L499 , FINSEQ_3:24;
end;

assume that
L504: R7 in ( rng R2 )
and
L505: (not R7 in ( rng ( R2 |-- R7 ) ));
L506:
now
let R12 being Nat;
assume that
L507: R12 in ( dom R2 )
and
L508: R12 <> ( R7 .. R2 )
and
L509: ( R2 . R12 ) = R7;
L510:
now
per cases  by L508 , XXREAL_0:1;
suppose L511: R12 < ( R7 .. R2 );

L512: ( R12 + 1 ) <= ( R7 .. R2 ) by L511 , NAT_1:13;
L513: R12 <= ( ( R7 .. R2 ) - 1 ) by L512 , XREAL_1:19;
L514: R12 <= ( len ( R2 -| R7 ) ) by L513 , L504 , L406;
L515: 1 <= R12 by L507 , FINSEQ_3:25;
L516: R12 in ( dom ( R2 -| R7 ) ) by L515 , L514 , FINSEQ_3:25;
L517: R7 = ( ( R2 -| R7 ) . R12 ) by L516 , L504 , L509 , L418;
L518: R7 in ( rng ( R2 -| R7 ) ) by L517 , L516 , FUNCT_1:def 3;
thus L519: contradiction by L518 , L504 , L423;
end;
suppose L520: ( R7 .. R2 ) < R12;

consider C10 being Nat such that L521: R12 = ( ( R7 .. R2 ) + C10 ) by L520 , NAT_1:10;
L522: ( ( R7 .. R2 ) + ( 0 ) ) < ( ( R7 .. R2 ) + C10 ) by L520 , L521;
L523: ( 0 ) < C10 by L522;
L524: ( ( 0 ) + 1 ) <= C10 by L523 , NAT_1:13;
L525: ( C10 + ( R7 .. R2 ) ) <= ( len R2 ) by L507 , L521 , FINSEQ_3:25;
L526: C10 <= ( ( len R2 ) - ( R7 .. R2 ) ) by L525 , XREAL_1:19;
L527: C10 <= ( len ( R2 |-- R7 ) ) by L526 , L504 , L460;
L528: C10 in ( dom ( R2 |-- R7 ) ) by L527 , L524 , FINSEQ_3:25;
L529: ( ( R2 |-- R7 ) . C10 ) = ( R2 . R12 ) by L528 , L504 , L521 , L460;
thus L530: contradiction by L529 , L505 , L509 , L528 , FUNCT_1:def 3;
end;
end;
thus L532: contradiction by L510;
end;
thus L533: thesis by L506 , L504 , L280;
end;
theorem
L534: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & R2 is  one-to-one) implies (not R7 in ( rng ( R2 |-- R7 ) )))))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L535: R7 in ( rng R2 )
and
L536: R2 is  one-to-one
and
L537: R7 in ( rng ( R2 |-- R7 ) );
L538: ( len ( R2 |-- R7 ) ) = ( ( len R2 ) - ( R7 .. R2 ) ) by L535 , L460;
consider R10 being set such that L539: R10 in ( dom ( R2 |-- R7 ) ) and L540: ( ( R2 |-- R7 ) . R10 ) = R7 by L537 , FUNCT_1:def 3;
reconsider D21 = R10 as (Element of ( NAT )) by L539;
L541: 1 <= ( D21 + ( R7 .. R2 ) ) by L535 , L239 , NAT_1:12;
L542: D21 in ( Seg ( len ( R2 |-- R7 ) ) ) by L539 , FINSEQ_1:def 3;
L543: D21 <= ( len ( R2 |-- R7 ) ) by L542 , FINSEQ_1:1;
L544: ( D21 + ( R7 .. R2 ) ) <= ( len R2 ) by L543 , L538 , XREAL_1:19;
L545: ( D21 + ( R7 .. R2 ) ) in ( Seg ( len R2 ) ) by L544 , L541;
L546: ( D21 + ( R7 .. R2 ) ) in ( dom R2 ) by L545 , FINSEQ_1:def 3;
L547: (( R7 .. R2 ) in ( dom R2 ) & ( R2 . ( R7 .. R2 ) ) = R7) by L535 , L220 , L230;
L548: ( ( R2 |-- R7 ) . D21 ) = ( R2 . ( D21 + ( R7 .. R2 ) ) ) by L535 , L539 , L460;
L549: ( ( 0 ) + ( R7 .. R2 ) ) = ( D21 + ( R7 .. R2 ) ) by L548 , L536 , L540 , L547 , L546 , FUNCT_1:def 4;
thus L550: thesis by L549 , L542 , FINSEQ_1:1;
end;
theorem
L551: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 iff (R7 in ( rng R2 ) & ( rng ( R2 |-- R7 ) ) misses { R7 }))))
proof
let R2 being FinSequence;
let R7 being set;
thus L552: (R2 just_once_values R7 implies (R7 in ( rng R2 ) & ( rng ( R2 |-- R7 ) ) misses { R7 }))
proof
assume L553: R2 just_once_values R7;
thus L554: R7 in ( rng R2 ) by L553 , L494;
assume L555: (not ( rng ( R2 |-- R7 ) ) misses { R7 });
L556: (ex R10 being set st (R10 in ( rng ( R2 |-- R7 ) ) & R10 in { R7 })) by L555 , XBOOLE_0:3;
L557: (not R7 in ( rng ( R2 |-- R7 ) )) by L553 , L494;
thus L558: thesis by L557 , L556 , TARSKI:def 1;
end;

assume that
L559: R7 in ( rng R2 )
and
L560: ( rng ( R2 |-- R7 ) ) misses { R7 };
L561:
now
L562: R7 in { R7 } by TARSKI:def 1;
assume L563: R7 in ( rng ( R2 |-- R7 ) );
thus L564: contradiction by L563 , L560 , L562 , XBOOLE_0:3;
end;
thus L565: thesis by L561 , L559 , L494;
end;
theorem
L566: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & R2 is  one-to-one) implies ( rng ( R2 |-- R7 ) ) misses { R7 })))
proof
let R2 being FinSequence;
let R7 being set;
assume L567: (R7 in ( rng R2 ) & R2 is  one-to-one);
L568: (not R7 in ( rng ( R2 |-- R7 ) )) by L567 , L534;
L569: (for R10 being set holds (R10 in ( rng ( R2 |-- R7 ) ) implies (not R10 in { R7 }))) by L568 , TARSKI:def 1;
thus L570: thesis by L569 , XBOOLE_0:3;
end;
theorem
L571: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies (( R7 .. R2 ) = ( len R2 ) iff ( R2 |-- R7 ) = ( {} )))))
proof
let R2 being FinSequence;
let R7 being set;
assume L572: R7 in ( rng R2 );
thus L573: (( R7 .. R2 ) = ( len R2 ) implies ( R2 |-- R7 ) = ( {} ))
proof
assume L574: ( R7 .. R2 ) = ( len R2 );
L575: ( len ( R2 |-- R7 ) ) = ( ( len R2 ) - ( R7 .. R2 ) ) by L572 , L460
.= ( 0 ) by L574;
thus L576: thesis by L575;
end;

assume L577: ( R2 |-- R7 ) = ( {} );
L578: ( len ( R2 |-- R7 ) ) = ( 0 ) by L577;
L579: ( len ( R2 |-- R7 ) ) = ( ( len R2 ) - ( R7 .. R2 ) ) by L572 , L460;
thus L580: thesis by L579 , L578;
end;
theorem
L581: (for R2 being FinSequence holds (for R7 being set holds (for R17 being non  empty set holds ((R7 in ( rng R2 ) & R2 is (FinSequence of R17)) implies ( R2 |-- R7 ) is (FinSequence of R17)))))
proof
let R2 being FinSequence;
let R7 being set;
let R17 being non  empty set;
assume that
L582: R7 in ( rng R2 )
and
L583: R2 is (FinSequence of R17);
L584: ( rng ( R2 |-- R7 ) ) c= R17
proof
L585: ( len ( R2 |-- R7 ) ) = ( ( len R2 ) - ( R7 .. R2 ) ) by L582 , L460;
let R10 being set;
assume L586: R10 in ( rng ( R2 |-- R7 ) );
consider R11 being set such that L587: R11 in ( dom ( R2 |-- R7 ) ) and L588: ( ( R2 |-- R7 ) . R11 ) = R10 by L586 , FUNCT_1:def 3;
reconsider D22 = R11 as (Element of ( NAT )) by L587;
L589: ( dom ( R2 |-- R7 ) ) = ( Seg ( len ( R2 |-- R7 ) ) ) by FINSEQ_1:def 3;
L590: D22 <= ( len ( R2 |-- R7 ) ) by L589 , L587 , FINSEQ_1:1;
L591: ( D22 + ( R7 .. R2 ) ) <= ( len R2 ) by L590 , L585 , XREAL_1:19;
L592: 1 <= ( D22 + ( R7 .. R2 ) ) by L582 , L239 , NAT_1:12;
L593: ( D22 + ( R7 .. R2 ) ) in ( Seg ( len R2 ) ) by L592 , L591;
L594: ( D22 + ( R7 .. R2 ) ) in ( dom R2 ) by L593 , FINSEQ_1:def 3;
L595: R10 = ( R2 . ( D22 + ( R7 .. R2 ) ) ) by L582 , L587 , L588 , L460;
L596: R10 in ( rng R2 ) by L595 , L594 , FUNCT_1:def 3;
L597: ( rng R2 ) c= R17 by L583 , FINSEQ_1:def 4;
thus L598: thesis by L597 , L596;
end;
thus L599: thesis by L584 , FINSEQ_1:def 4;
end;
theorem
L600: (for R2 being FinSequence holds (for R7 being set holds (R7 in ( rng R2 ) implies R2 = ( ( ( R2 -| R7 ) ^ <* R7 *> ) ^ ( R2 |-- R7 ) ))))
proof
let R2 being FinSequence;
let R7 being set;
set D23 = ( R2 -| R7 );
set D24 = ( R2 |-- R7 );
set D25 = ( D23 ^ <* R7 *> );
assume L601: R7 in ( rng R2 );
L602:
now
let C11 being (Element of ( NAT ));
assume L603: C11 in ( dom D24 );
L604: ( D24 . C11 ) = ( R2 . ( ( ( ( R7 .. R2 ) - 1 ) + 1 ) + C11 ) ) by L603 , L601 , L460
.= ( R2 . ( ( ( len D23 ) + 1 ) + C11 ) ) by L601 , L406
.= ( R2 . ( ( ( len D23 ) + ( len <* R7 *> ) ) + C11 ) ) by FINSEQ_1:40
.= ( R2 . ( ( len D25 ) + C11 ) ) by FINSEQ_1:22;
thus L605: ( R2 . ( ( len D25 ) + C11 ) ) = ( D24 . C11 ) by L604;
end;
L606:
now
let C12 being (Element of ( NAT ));
assume L607: C12 in ( dom D25 );
L608:
now
per cases  by L607 , FINSEQ_1:25;
suppose L609: C12 in ( dom D23 );

thus L610: ( D25 . C12 ) = ( D23 . C12 ) by L609 , FINSEQ_1:def 7
.= ( R2 . C12 ) by L601 , L609 , L418;
end;
suppose L611: (ex B5 being Nat st (B5 in ( dom <* R7 *> ) & C12 = ( ( len D23 ) + B5 )));

consider C13 being Nat such that L612: C13 in ( dom <* R7 *> ) and L613: C12 = ( ( len D23 ) + C13 ) by L611;
L614: C13 in { 1 } by L612 , FINSEQ_1:2 , FINSEQ_1:def 8;
L615: C13 = 1 by L614 , TARSKI:def 1;
thus L616: ( D25 . C12 ) = ( <* R7 *> . 1 ) by L615 , L612 , L613 , FINSEQ_1:def 7
.= R7 by FINSEQ_1:def 8
.= ( R2 . ( ( ( R7 .. R2 ) - 1 ) + 1 ) ) by L601 , L220
.= ( R2 . C12 ) by L601 , L613 , L615 , L406;
end;
end;
thus L618: ( R2 . C12 ) = ( D25 . C12 ) by L608;
end;
L619: ( len R2 ) = ( ( ( len R2 ) - ( R7 .. R2 ) ) + ( R7 .. R2 ) )
.= ( ( ( ( R7 .. R2 ) - 1 ) + 1 ) + ( len D24 ) ) by L601 , L460
.= ( ( ( len D23 ) + 1 ) + ( len D24 ) ) by L601 , L406
.= ( ( ( len D23 ) + ( len <* R7 *> ) ) + ( len D24 ) ) by FINSEQ_1:40
.= ( ( len D25 ) + ( len D24 ) ) by FINSEQ_1:22;
thus L620: thesis by L619 , L606 , L602 , FINSEQ_3:38;
end;
theorem
L621: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & R2 is  one-to-one) implies ( R2 -| R7 ) is  one-to-one)))
proof
let R2 being FinSequence;
let R7 being set;
assume L622: R7 in ( rng R2 );
L623: R2 = ( ( ( R2 -| R7 ) ^ <* R7 *> ) ^ ( R2 |-- R7 ) ) by L622 , L600
.= ( ( R2 -| R7 ) ^ ( <* R7 *> ^ ( R2 |-- R7 ) ) ) by FINSEQ_1:32;
thus L624: thesis by L623 , FINSEQ_3:91;
end;
theorem
L625: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & R2 is  one-to-one) implies ( R2 |-- R7 ) is  one-to-one)))
proof
let R2 being FinSequence;
let R7 being set;
assume L626: R7 in ( rng R2 );
L627: R2 = ( ( ( R2 -| R7 ) ^ <* R7 *> ) ^ ( R2 |-- R7 ) ) by L626 , L600;
thus L628: thesis by L627 , FINSEQ_3:91;
end;
theorem
L629: (for R2 being FinSequence holds (for R7 being set holds (R2 just_once_values R7 iff (R7 in ( rng R2 ) & ( R2 - { R7 } ) = ( ( R2 -| R7 ) ^ ( R2 |-- R7 ) )))))
proof
let R2 being FinSequence;
let R7 being set;
set D26 = ( R2 - { R7 } );
set D27 = ( R2 -| R7 );
set D28 = ( R2 |-- R7 );
thus L630: (R2 just_once_values R7 implies (R7 in ( rng R2 ) & ( R2 - { R7 } ) = ( ( R2 -| R7 ) ^ ( R2 |-- R7 ) )))
proof
assume L631: R2 just_once_values R7;
thus L632: R7 in ( rng R2 ) by L631 , L57;
L633:
now
L634: ( R7 .. R2 ) <= ( len R2 ) by L632 , L239;
L635: ( ( R7 .. R2 ) - 1 ) <= ( ( len R2 ) - 1 ) by L634 , XREAL_1:9;
L636: ( len D27 ) <= ( ( len R2 ) - 1 ) by L635 , L632 , L406;
L637: ( len D27 ) <= ( len D26 ) by L636 , L631 , L316;
L638: ( Seg ( len D27 ) ) c= ( Seg ( len D26 ) ) by L637 , FINSEQ_1:5;
let C14 being Nat;
L639: (( Seg ( len D27 ) ) = ( dom D27 ) & ( Seg ( len D26 ) ) = ( dom D26 )) by FINSEQ_1:def 3;
assume L640: C14 in ( dom D27 );
L641: C14 in ( Seg ( len D27 ) ) by L640 , FINSEQ_1:def 3;
L642: C14 <= ( len D27 ) by L641 , FINSEQ_1:1;
L643: C14 <= ( ( R7 .. R2 ) - 1 ) by L642 , L632 , L406;
L644: ( C14 + 1 ) <= ( R7 .. R2 ) by L643 , XREAL_1:19;
L645: C14 < ( C14 + 1 ) by XREAL_1:29;
L646: C14 < ( R7 .. R2 ) by L645 , L644 , XXREAL_0:2;
L647: ( D27 . C14 ) = ( R2 . C14 ) by L632 , L640 , L418;
thus L648: ( D26 . C14 ) = ( D27 . C14 ) by L647 , L631 , L640 , L638 , L639 , L646 , L325;
end;
L649:
now
reconsider D29 = ( ( R7 .. R2 ) - 1 ) as (Element of ( NAT )) by L632 , L243;
let C15 being Nat;
set D30 = ( C15 + D29 );
assume L650: C15 in ( dom D28 );
L651: ( D28 . C15 ) = ( R2 . ( C15 + ( R7 .. R2 ) ) ) by L650 , L632 , L460;
L652: ( dom D28 ) = ( Seg ( len D28 ) ) by FINSEQ_1:def 3;
L653: 1 <= C15 by L652 , L650 , FINSEQ_1:1;
L654: ( ( R7 .. R2 ) + 1 ) <= ( C15 + ( R7 .. R2 ) ) by L653 , XREAL_1:7;
L655: ( R7 .. R2 ) <= ( ( C15 + ( R7 .. R2 ) ) - 1 ) by L654 , XREAL_1:19;
L656: C15 <= ( len D28 ) by L650 , L652 , FINSEQ_1:1;
L657: C15 <= ( ( len R2 ) - ( R7 .. R2 ) ) by L656 , L632 , L460;
L658: ( C15 + ( R7 .. R2 ) ) <= ( len R2 ) by L657 , XREAL_1:19;
L659: ( ( C15 + ( R7 .. R2 ) ) - 1 ) <= ( ( len R2 ) - 1 ) by L658 , XREAL_1:9;
L660: ( ( C15 + ( R7 .. R2 ) ) - 1 ) <= ( len D26 ) by L659 , L631 , L316;
L661: 1 <= ( R7 .. R2 ) by L632 , L239;
L662: ( 1 + 1 ) <= ( C15 + ( R7 .. R2 ) ) by L661 , L653 , XREAL_1:7;
L663: 1 <= ( ( C15 + ( R7 .. R2 ) ) - 1 ) by L662 , XREAL_1:19;
L664: ( dom D26 ) = ( Seg ( len D26 ) ) by FINSEQ_1:def 3;
L665: D30 in ( dom D26 ) by L664 , L663 , L660;
L666: ( D26 . D30 ) = ( R2 . ( D30 + 1 ) ) by L665 , L631 , L655 , L325
.= ( R2 . ( C15 + ( R7 .. R2 ) ) );
thus L667: ( D26 . ( ( len D27 ) + C15 ) ) = ( D28 . C15 ) by L666 , L632 , L651 , L406;
end;
L668: ( ( len D27 ) + ( len D28 ) ) = ( ( ( R7 .. R2 ) - 1 ) + ( len D28 ) ) by L632 , L406
.= ( ( ( R7 .. R2 ) - 1 ) + ( ( len R2 ) - ( R7 .. R2 ) ) ) by L632 , L460
.= ( ( len R2 ) - 1 )
.= ( len D26 ) by L631 , L316;
L669: ( dom D26 ) = ( Seg ( ( len D27 ) + ( len D28 ) ) ) by L668 , FINSEQ_1:def 3;
thus L670: thesis by L669 , L633 , L649 , FINSEQ_1:def 7;
end;

assume L671: R7 in ( rng R2 );
assume L672: ( R2 - { R7 } ) = ( ( R2 -| R7 ) ^ ( R2 |-- R7 ) );
L673:
now
let R12 being Nat;
assume that
L674: R12 in ( dom R2 )
and
L675: R12 <> ( R7 .. R2 )
and
L676: ( R2 . R12 ) = R7;
L677: { ( R7 .. R2 ) , R12 } c= ( R2 " { R7 } )
proof
let R10 being set;
assume L678: R10 in { ( R7 .. R2 ) , R12 };
L679: R7 in { R7 } by TARSKI:def 1;
L680: (( R7 .. R2 ) in ( dom R2 ) & ( R2 . ( R7 .. R2 ) ) = R7) by L671 , L220 , L230;
L681: ( R7 .. R2 ) in ( R2 " { R7 } ) by L680 , L679 , FUNCT_1:def 7;
L682: R12 in ( R2 " { R7 } ) by L674 , L676 , L679 , FUNCT_1:def 7;
thus L683: thesis by L682 , L678 , L681 , TARSKI:def 2;
end;
L684: ( card { ( R7 .. R2 ) , R12 } ) <= ( card ( R2 " { R7 } ) ) by L677 , NAT_1:43;
L685: 2 <= ( card ( R2 " { R7 } ) ) by L684 , L675 , CARD_2:57;
L686: ( len D26 ) = ( ( len R2 ) - ( card ( R2 " { R7 } ) ) ) by FINSEQ_3:59
.= ( ( len R2 ) + ( - ( card ( R2 " { R7 } ) ) ) );
L687: ( len D26 ) = ( ( len D27 ) + ( len D28 ) ) by L672 , FINSEQ_1:22
.= ( ( ( R7 .. R2 ) - 1 ) + ( len D28 ) ) by L671 , L406
.= ( ( ( R7 .. R2 ) - 1 ) + ( ( len R2 ) - ( R7 .. R2 ) ) ) by L671 , L460
.= ( ( len R2 ) + ( - 1 ) );
thus L688: contradiction by L687 , L686 , L685;
end;
thus L689: thesis by L673 , L671 , L280;
end;
theorem
L690: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & R2 is  one-to-one) implies ( R2 - { R7 } ) = ( ( R2 -| R7 ) ^ ( R2 |-- R7 ) ))))
proof
let R2 being FinSequence;
let R7 being set;
assume L691: (R7 in ( rng R2 ) & R2 is  one-to-one);
L692: R2 just_once_values R7 by L691 , L115;
thus L693: thesis by L692 , L629;
end;
theorem
L694: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & ( R2 - { R7 } ) is  one-to-one & ( R2 - { R7 } ) = ( ( R2 -| R7 ) ^ ( R2 |-- R7 ) )) implies R2 is  one-to-one)))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L695: R7 in ( rng R2 )
and
L696: ( R2 - { R7 } ) is  one-to-one
and
L697: ( R2 - { R7 } ) = ( ( R2 -| R7 ) ^ ( R2 |-- R7 ) );
set D31 = ( R2 - { R7 } );
let R8 being set;
let R9 being set;
assume that
L698: R8 in ( dom R2 )
and
L699: R9 in ( dom R2 )
and
L700: ( R2 . R8 ) = ( R2 . R9 );
reconsider D32 = R8 , D33 = R9 as (Element of ( NAT )) by L698 , L699;
L701: R2 just_once_values R7 by L695 , L697 , L629;
L702:
now
per cases  by XXREAL_0:1;
suppose L703: (R8 = ( R7 .. R2 ) & R9 = ( R7 .. R2 ));

thus L704: thesis by L703;
end;
suppose L705: (R8 = ( R7 .. R2 ) & ( R7 .. R2 ) < D33);

thus L706: thesis by L705 , L695 , L699 , L700 , L701 , L220 , L275;
end;
suppose L707: (R8 = ( R7 .. R2 ) & D33 < ( R7 .. R2 ));

thus L708: thesis by L707 , L695 , L699 , L700 , L701 , L220 , L275;
end;
suppose L709: (D32 < ( R7 .. R2 ) & ( R7 .. R2 ) = R9);

thus L710: thesis by L709 , L695 , L698 , L700 , L701 , L220 , L275;
end;
suppose L711: (D32 < ( R7 .. R2 ) & ( R7 .. R2 ) < D33);

L712: ( R7 .. R2 ) <= ( len R2 ) by L695 , L239;
L713: D32 < ( len R2 ) by L712 , L711 , XXREAL_0:2;
L714: ( D32 + 1 ) <= ( len R2 ) by L713 , NAT_1:13;
L715: D32 <= ( ( len R2 ) - 1 ) by L714 , XREAL_1:19;
L716: D32 <= ( len D31 ) by L715 , L701 , L316;
L717: D32 in ( Seg ( len R2 ) ) by L698 , FINSEQ_1:def 3;
L718: 1 <= D32 by L717 , FINSEQ_1:1;
L719: D32 in ( Seg ( len D31 ) ) by L718 , L716;
L720: D32 in ( dom D31 ) by L719 , FINSEQ_1:def 3;
L721: ( D31 . D32 ) = ( R2 . D32 ) by L720 , L701 , L711 , L325;
consider C16 being Nat such that L722: D33 = ( C16 + 1 ) by L711 , NAT_1:6;
reconsider D34 = C16 as (Element of ( NAT )) by ORDINAL1:def 12;
L723: ( R7 .. R2 ) <= D34 by L711 , L722 , NAT_1:13;
L724: D33 in ( Seg ( len R2 ) ) by L699 , FINSEQ_1:def 3;
L725: D33 <= ( len R2 ) by L724 , FINSEQ_1:1;
L726: D34 <= ( ( len R2 ) - 1 ) by L725 , L722 , XREAL_1:19;
L727: D34 <= ( len D31 ) by L726 , L701 , L316;
L728: 1 <= ( R7 .. R2 ) by L695 , L239;
L729: 1 <= D34 by L728 , L723 , XXREAL_0:2;
L730: D34 in ( Seg ( len D31 ) ) by L729 , L727;
L731: D34 in ( dom ( R2 - { R7 } ) ) by L730 , FINSEQ_1:def 3;
L732: ( D31 . D34 ) = ( R2 . D33 ) by L731 , L701 , L722 , L723 , L325;
thus L733: thesis by L732 , L696 , L700 , L711 , L720 , L723 , L731 , L721 , FUNCT_1:def 4;
end;
suppose L734: (D32 < ( R7 .. R2 ) & D33 < ( R7 .. R2 ));

L735: ( R7 .. R2 ) <= ( len R2 ) by L695 , L239;
L736: D33 < ( len R2 ) by L735 , L734 , XXREAL_0:2;
L737: ( D33 + 1 ) <= ( len R2 ) by L736 , NAT_1:13;
L738: D33 <= ( ( len R2 ) - 1 ) by L737 , XREAL_1:19;
L739: D33 <= ( len D31 ) by L738 , L701 , L316;
L740: D33 in ( Seg ( len R2 ) ) by L699 , FINSEQ_1:def 3;
L741: 1 <= D33 by L740 , FINSEQ_1:1;
L742: D33 in ( Seg ( len D31 ) ) by L741 , L739;
L743: D33 in ( dom D31 ) by L742 , FINSEQ_1:def 3;
L744: ( R2 . D33 ) = ( ( R2 - { R7 } ) . D33 ) by L743 , L701 , L734 , L325;
L745: D32 < ( len R2 ) by L734 , L735 , XXREAL_0:2;
L746: ( D32 + 1 ) <= ( len R2 ) by L745 , NAT_1:13;
L747: D32 <= ( ( len R2 ) - 1 ) by L746 , XREAL_1:19;
L748: D32 <= ( len D31 ) by L747 , L701 , L316;
L749: D32 in ( Seg ( len R2 ) ) by L698 , FINSEQ_1:def 3;
L750: 1 <= D32 by L749 , FINSEQ_1:1;
L751: D32 in ( Seg ( len D31 ) ) by L750 , L748;
L752: D32 in ( dom D31 ) by L751 , FINSEQ_1:def 3;
L753: ( R2 . D32 ) = ( ( R2 - { R7 } ) . D32 ) by L752 , L701 , L734 , L325;
thus L754: thesis by L753 , L696 , L700 , L752 , L743 , L744 , FUNCT_1:def 4;
end;
suppose L755: (( R7 .. R2 ) < D32 & ( R7 .. R2 ) < D33);

consider C17 being Nat such that L756: D33 = ( C17 + 1 ) by L755 , NAT_1:6;
consider C18 being Nat such that L757: D32 = ( C18 + 1 ) by L755 , NAT_1:6;
reconsider D35 = C18 , D36 = C17 as (Element of ( NAT )) by ORDINAL1:def 12;
L758: D33 in ( Seg ( len R2 ) ) by L699 , FINSEQ_1:def 3;
L759: D33 <= ( len R2 ) by L758 , FINSEQ_1:1;
L760: D36 <= ( ( len R2 ) - 1 ) by L759 , L756 , XREAL_1:19;
L761: D36 <= ( len D31 ) by L760 , L701 , L316;
L762: 1 <= ( R7 .. R2 ) by L695 , L239;
L763: ( R7 .. R2 ) <= D36 by L755 , L756 , NAT_1:13;
L764: 1 <= D36 by L763 , L762 , XXREAL_0:2;
L765: D36 in ( Seg ( len D31 ) ) by L764 , L761;
L766: D36 in ( dom ( R2 - { R7 } ) ) by L765 , FINSEQ_1:def 3;
L767: ( R2 . D33 ) = ( ( R2 - { R7 } ) . D36 ) by L766 , L701 , L756 , L763 , L325;
L768: D32 in ( Seg ( len R2 ) ) by L698 , FINSEQ_1:def 3;
L769: D32 <= ( len R2 ) by L768 , FINSEQ_1:1;
L770: D35 <= ( ( len R2 ) - 1 ) by L769 , L757 , XREAL_1:19;
L771: D35 <= ( len D31 ) by L770 , L701 , L316;
L772: ( R7 .. R2 ) <= D35 by L755 , L757 , NAT_1:13;
L773: 1 <= D35 by L772 , L762 , XXREAL_0:2;
L774: D35 in ( Seg ( len D31 ) ) by L773 , L771;
L775: D35 in ( dom ( R2 - { R7 } ) ) by L774 , FINSEQ_1:def 3;
L776: ( R2 . D32 ) = ( ( R2 - { R7 } ) . D35 ) by L775 , L701 , L757 , L772 , L325;
thus L777: thesis by L776 , L696 , L700 , L757 , L756 , L775 , L766 , L767 , FUNCT_1:def 4;
end;
suppose L778: (( R7 .. R2 ) < D32 & ( R7 .. R2 ) = R9);

thus L779: thesis by L778 , L695 , L698 , L700 , L701 , L220 , L275;
end;
suppose L780: (( R7 .. R2 ) < D32 & D33 < ( R7 .. R2 ));

L781: ( R7 .. R2 ) <= ( len R2 ) by L695 , L239;
L782: D33 < ( len R2 ) by L781 , L780 , XXREAL_0:2;
L783: ( D33 + 1 ) <= ( len R2 ) by L782 , NAT_1:13;
L784: D33 <= ( ( len R2 ) - 1 ) by L783 , XREAL_1:19;
L785: D33 <= ( len D31 ) by L784 , L701 , L316;
L786: D33 in ( Seg ( len R2 ) ) by L699 , FINSEQ_1:def 3;
L787: 1 <= D33 by L786 , FINSEQ_1:1;
L788: D33 in ( Seg ( len D31 ) ) by L787 , L785;
L789: D33 in ( dom D31 ) by L788 , FINSEQ_1:def 3;
L790: ( D31 . D33 ) = ( R2 . D33 ) by L789 , L701 , L780 , L325;
consider C19 being Nat such that L791: D32 = ( C19 + 1 ) by L780 , NAT_1:6;
reconsider D37 = C19 as (Element of ( NAT )) by ORDINAL1:def 12;
L792: ( R7 .. R2 ) <= D37 by L780 , L791 , NAT_1:13;
L793: D32 in ( Seg ( len R2 ) ) by L698 , FINSEQ_1:def 3;
L794: D32 <= ( len R2 ) by L793 , FINSEQ_1:1;
L795: D37 <= ( ( len R2 ) - 1 ) by L794 , L791 , XREAL_1:19;
L796: D37 <= ( len D31 ) by L795 , L701 , L316;
L797: 1 <= ( R7 .. R2 ) by L695 , L239;
L798: 1 <= D37 by L797 , L792 , XXREAL_0:2;
L799: D37 in ( Seg ( len D31 ) ) by L798 , L796;
L800: D37 in ( dom ( R2 - { R7 } ) ) by L799 , FINSEQ_1:def 3;
L801: ( D31 . D37 ) = ( R2 . D32 ) by L800 , L701 , L791 , L792 , L325;
thus L802: thesis by L801 , L696 , L700 , L780 , L789 , L792 , L800 , L790 , FUNCT_1:def 4;
end;
end;
thus L804: thesis by L702;
end;
theorem
L805: (for R2 being FinSequence holds (for R7 being set holds ((R7 in ( rng R2 ) & R2 is  one-to-one) implies ( rng ( R2 -| R7 ) ) misses ( rng ( R2 |-- R7 ) ))))
proof
let R2 being FinSequence;
let R7 being set;
assume that
L806: R7 in ( rng R2 )
and
L807: R2 is  one-to-one;
L808: R2 = ( ( ( R2 -| R7 ) ^ <* R7 *> ) ^ ( R2 |-- R7 ) ) by L806 , L600;
L809: ( rng ( R2 |-- R7 ) ) misses ( rng ( ( R2 -| R7 ) ^ <* R7 *> ) ) by L808 , L807 , FINSEQ_3:91;
thus L810: thesis by L809 , FINSEQ_1:29 , XBOOLE_1:63;
end;
theorem
L811: (for R4 being set holds (R4 is  finite implies (ex R2 being FinSequence st (( rng R2 ) = R4 & R2 is  one-to-one))))
proof
let R4 being set;
defpred S1[ set ] means (ex R2 being FinSequence st (( rng R2 ) = $1 & R2 is  one-to-one));
L812: ( rng ( {} ) ) = ( {} );
L813: S1[ ( {} ) ] by L812;
L814:
now
let R5 being set;
let R6 being set;
assume that
L815: R5 in R4
and
L816: R6 c= R4;
given R2 being FinSequence such that
L817: ( rng R2 ) = R6
and
L818: R2 is  one-to-one;

L819:
now
assume L820: (not R5 in R6);
take D38 = ( R2 ^ <* R5 *> );
thus L821: ( rng D38 ) = ( ( rng R2 ) \/ ( rng <* R5 *> ) ) by FINSEQ_1:31
.= ( R6 \/ { R5 } ) by L817 , FINSEQ_1:38;
thus L822: D38 is  one-to-one
proof
let R7 being set;
let R10 being set;
assume that
L823: (R7 in ( dom D38 ) & R10 in ( dom D38 ))
and
L824: ( D38 . R7 ) = ( D38 . R10 );
reconsider D39 = R7 , D40 = R10 as (Element of ( NAT )) by L823;
L825:
now
assume L826: D39 in ( dom R2 );
given C20 being Nat such that
L827: C20 in ( dom <* R5 *> )
and
L828: D40 = ( ( len R2 ) + C20 );

L829: C20 in { 1 } by L827 , FINSEQ_1:2 , FINSEQ_1:38;
L830: C20 = 1 by L829 , TARSKI:def 1;
L831: ( <* R5 *> . C20 ) = ( D38 . D39 ) by L824 , L827 , L828 , FINSEQ_1:def 7
.= ( R2 . D39 ) by L826 , FINSEQ_1:def 7;
L832: R5 = ( R2 . D39 ) by L831 , L830 , FINSEQ_1:def 8;
thus L833: thesis by L832 , L817 , L820 , L826 , FUNCT_1:def 3;
end;
L834:
now
assume L835: D40 in ( dom R2 );
given C21 being Nat such that
L836: C21 in ( dom <* R5 *> )
and
L837: D39 = ( ( len R2 ) + C21 );

L838: C21 in { 1 } by L836 , FINSEQ_1:2 , FINSEQ_1:38;
L839: C21 = 1 by L838 , TARSKI:def 1;
L840: ( <* R5 *> . C21 ) = ( D38 . D40 ) by L824 , L836 , L837 , FINSEQ_1:def 7
.= ( R2 . D40 ) by L835 , FINSEQ_1:def 7;
L841: R5 = ( R2 . D40 ) by L840 , L839 , FINSEQ_1:def 8;
thus L842: thesis by L841 , L817 , L820 , L835 , FUNCT_1:def 3;
end;
L843:
now
given C22 being Nat such that
L844: C22 in ( dom <* R5 *> )
and
L845: D39 = ( ( len R2 ) + C22 );

L846: C22 in { 1 } by L844 , FINSEQ_1:2 , FINSEQ_1:def 8;
L847: C22 = 1 by L846 , TARSKI:def 1;
given C23 being Nat such that
L848: C23 in ( dom <* R5 *> )
and
L849: D40 = ( ( len R2 ) + C23 );

L850: C23 in { 1 } by L848 , FINSEQ_1:2 , FINSEQ_1:def 8;
thus L851: thesis by L850 , L845 , L849 , L847 , TARSKI:def 1;
end;
L852:
now
assume L853: (D39 in ( dom R2 ) & D40 in ( dom R2 ));
L854: (( D38 . D39 ) = ( R2 . D39 ) & ( D38 . D40 ) = ( R2 . D40 )) by L853 , FINSEQ_1:def 7;
thus L855: thesis by L854 , L818 , L824 , L853 , FUNCT_1:def 4;
end;
thus L856: thesis by L852 , L823 , L825 , L834 , L843 , FINSEQ_1:25;
end;

end;
L823:
now
assume L824: R5 in R6;
take D41 = R2;
thus L825: (( rng D41 ) = ( R6 \/ { R5 } ) & D41 is  one-to-one) by L817 , L818 , L824 , ZFMISC_1:40;
end;
thus L826: (ex R2 being FinSequence st (( rng R2 ) = ( R6 \/ { R5 } ) & R2 is  one-to-one)) by L823 , L819;
end;
L827: (for B6 , B7 being set holds ((B6 in R4 & B7 c= R4 & S1[ B7 ]) implies S1[ ( B7 \/ { B6 } ) ])) by L814;
assume L828: R4 is  finite;
thus L829: S1[ R4 ] from FINSET_1:sch 2(L828 , L813 , L827);
end;
theorem
L830: (for R2 being FinSequence holds ((( rng R2 ) c= ( dom R2 ) & R2 is  one-to-one) implies ( rng R2 ) = ( dom R2 )))
proof
let R2 being FinSequence;
defpred S2[ Nat ] means (for R3 being FinSequence holds ((( len R3 ) = $1 & ( rng R3 ) c= ( dom R3 ) & R3 is  one-to-one) implies ( rng R3 ) = ( dom R3 )));
L831: ( len R2 ) = ( len R2 );
L832:
now
let R12 being Nat;
assume L833: (for R3 being FinSequence holds ((( len R3 ) = R12 & ( rng R3 ) c= ( dom R3 ) & R3 is  one-to-one) implies ( rng R3 ) = ( dom R3 )));
let R3 being FinSequence;
assume that
L834: ( len R3 ) = ( R12 + 1 )
and
L835: ( rng R3 ) c= ( dom R3 )
and
L836: R3 is  one-to-one;
L837: ( dom R3 ) = ( Seg ( R12 + 1 ) ) by L834 , FINSEQ_1:def 3;
L838: ( dom R3 ) c= ( rng R3 )
proof
let R7 being set;
assume L839: R7 in ( dom R3 );
reconsider D42 = R7 as (Element of ( NAT )) by L839;
per cases ;
suppose L840: ( R12 + 1 ) in ( rng R3 );

L841:
now
per cases ;
suppose L842: D42 = ( R12 + 1 );

thus L843: thesis by L842 , L840;
end;
suppose L844: D42 <> ( R12 + 1 );

L845: (not R7 in { ( R12 + 1 ) }) by L844 , TARSKI:def 1;
L846: R7 in ( ( Seg ( R12 + 1 ) ) \ { ( R12 + 1 ) } ) by L845 , L837 , L839 , XBOOLE_0:def 5;
L847: R7 in ( Seg R12 ) by L846 , FINSEQ_1:10;
set D43 = ( R3 - { ( R12 + 1 ) } );
L848: ( len D43 ) = ( ( R12 + 1 ) - 1 ) by L834 , L836 , L840 , FINSEQ_3:90;
L849: ( dom D43 ) = ( Seg R12 ) by L848 , FINSEQ_1:def 3;
L850: ( rng D43 ) = ( ( rng R3 ) \ { ( R12 + 1 ) } ) by FINSEQ_3:65;
L851: ( rng D43 ) c= ( ( Seg ( R12 + 1 ) ) \ { ( R12 + 1 ) } ) by L850 , L835 , L837 , XBOOLE_1:33;
L852: ( rng D43 ) c= ( dom D43 ) by L851 , L849 , FINSEQ_1:10;
L853: ( rng D43 ) = ( dom D43 ) by L852 , L833 , L836 , L848 , FINSEQ_3:87;
thus L854: thesis by L853 , L850 , L849 , L847;
end;
end;
thus L856: thesis by L841;
end;
suppose L857: (not ( R12 + 1 ) in ( rng R3 ));

L858: ( rng R3 ) c= ( Seg R12 )
proof
let R7 being set;
assume L859: R7 in ( rng R3 );
L860: (not R7 in { ( R12 + 1 ) }) by L859 , L857 , TARSKI:def 1;
L861: R7 in ( ( Seg ( R12 + 1 ) ) \ { ( R12 + 1 ) } ) by L860 , L835 , L837 , L859 , XBOOLE_0:def 5;
thus L862: thesis by L861 , FINSEQ_1:10;
end;
L863: ( R12 + 1 ) in ( Seg ( R12 + 1 ) ) by FINSEQ_1:4;
L864: ( R3 . ( R12 + 1 ) ) in ( rng R3 ) by L863 , L837 , FUNCT_1:def 3;
reconsider D44 = ( R3 | ( Seg R12 ) ) as FinSequence by FINSEQ_1:15;
L865: (( dom D44 ) c= ( dom R3 ) & R12 < ( R12 + 1 )) by RELAT_1:60 , XREAL_1:29;
L866: ( len D44 ) = R12 by L834 , FINSEQ_3:53;
L867: ( dom D44 ) = ( Seg R12 ) by L866 , FINSEQ_1:def 3;
L868: (( rng D44 ) c= ( rng R3 ) & D44 is  one-to-one) by L836 , FUNCT_1:52 , RELAT_1:70;
L869: ( rng D44 ) = ( dom D44 ) by L868 , L833 , L866 , L867 , L858 , XBOOLE_1:1;
consider R7 being set such that L870: R7 in ( dom D44 ) and L871: ( D44 . R7 ) = ( R3 . ( R12 + 1 ) ) by L869 , L867 , L858 , L864 , FUNCT_1:def 3;
reconsider D45 = R7 as (Element of ( NAT )) by L870;
L872: (( D44 . R7 ) = ( R3 . R7 ) & D45 <= R12) by L867 , L870 , FINSEQ_1:1 , FUNCT_1:49;
thus L873: thesis by L872 , L836 , L837 , L863 , L870 , L871 , L865 , FUNCT_1:def 4;
end;
end;
thus L875: ( rng R3 ) = ( dom R3 ) by L838 , L835 , XBOOLE_0:def 10;
end;
L876: (for R12 being Nat holds (S2[ R12 ] implies S2[ ( R12 + 1 ) ])) by L832;
L877:
now
let R3 being FinSequence;
assume L878: ( len R3 ) = ( 0 );
assume that
L879: ( rng R3 ) c= ( dom R3 )
and
L880: R3 is  one-to-one;
L881: R3 = ( {} ) by L878;
thus L882: ( rng R3 ) = ( dom R3 ) by L881 , RELAT_1:38;
end;
L883: S2[ ( 0 ) ] by L877;
L884: (for R12 being Nat holds S2[ R12 ]) from NAT_1:sch 2(L883 , L876);
thus L885: thesis by L884 , L831;
end;
theorem
L886: (for R2 being FinSequence holds (( rng R2 ) = ( dom R2 ) implies R2 is  one-to-one))
proof
let R2 being FinSequence;
defpred S3[ Nat ] means (for R2 being FinSequence holds ((( len R2 ) = $1 & ( rng R2 ) = ( dom R2 )) implies R2 is  one-to-one));
L887: ( len R2 ) = ( len R2 );
L888:
now
let R12 being Nat;
assume L889: S3[ R12 ];
thus L890: S3[ ( R12 + 1 ) ]
proof
set D46 = ( R12 + 1 );
let R2 being FinSequence;
set D47 = ( R2 - { ( R12 + 1 ) } );
assume that
L891: ( len R2 ) = ( R12 + 1 )
and
L892: ( rng R2 ) = ( dom R2 );
L893: ( dom R2 ) = ( Seg ( R12 + 1 ) ) by L891 , FINSEQ_1:def 3;
L894: ( R12 + 1 ) in ( rng R2 ) by L893 , L892 , FINSEQ_1:4;
L895:
now
L896: ( rng D47 ) = ( ( Seg ( R12 + 1 ) ) \ { ( R12 + 1 ) } ) by L892 , L893 , FINSEQ_3:65
.= ( Seg R12 ) by FINSEQ_1:10;
L897: ( card ( rng D47 ) ) = R12 by L896 , FINSEQ_1:57;
L898: ( card R12 ) = ( card ( rng D47 ) ) by L897;
L899: ( R2 . ( D46 .. R2 ) ) = D46 by L892 , L893 , L220 , FINSEQ_1:4;
L900: ( R2 . ( D46 .. R2 ) ) in { ( R12 + 1 ) } by L899 , TARSKI:def 1;
let R13 being Nat;
assume that
L901: R13 in ( dom R2 )
and
L902: R13 <> ( ( R12 + 1 ) .. R2 )
and
L903: ( R2 . R13 ) = ( R12 + 1 );
L904: ( card { ( D46 .. R2 ) , R13 } ) = 2 by L902 , CARD_2:57;
L905: ( R2 . R13 ) in { ( R12 + 1 ) } by L903 , TARSKI:def 1;
L906: R13 in ( R2 " { D46 } ) by L905 , L901 , FUNCT_1:def 7;
L907: ( D46 .. R2 ) in ( dom R2 ) by L892 , L893 , L230 , FINSEQ_1:4;
L908: ( D46 .. R2 ) in ( R2 " { D46 } ) by L907 , L900 , FUNCT_1:def 7;
L909: { ( D46 .. R2 ) , R13 } c= ( R2 " { ( R12 + 1 ) } ) by L908 , L906 , ZFMISC_1:32;
L910: 2 <= ( card ( R2 " { ( R12 + 1 ) } ) ) by L909 , L904 , NAT_1:43;
L911: ( len D47 ) = ( ( R12 + 1 ) - ( card ( R2 " { ( R12 + 1 ) } ) ) ) by L891 , FINSEQ_3:59;
L912: ( 2 + ( len D47 ) ) <= ( ( card ( R2 " { D46 } ) ) + ( ( R12 + 1 ) - ( card ( R2 " { ( R12 + 1 ) } ) ) ) ) by L911 , L910 , XREAL_1:6;
L913: ( ( ( len D47 ) + 1 ) + 1 ) <= ( R12 + 1 ) by L912;
L914: ( ( len D47 ) + 1 ) <= R12 by L913 , XREAL_1:6;
L915: ( len D47 ) <= ( R12 - 1 ) by L914 , XREAL_1:19;
L916: ( dom D47 ) = ( Seg ( len D47 ) ) by FINSEQ_1:def 3;
L917: (( card ( rng D47 ) ) c= ( card ( dom D47 ) ) & ( card ( len D47 ) ) = ( card ( dom D47 ) )) by L916 , CARD_1:12 , FINSEQ_1:57;
L918: R12 <= ( len D47 ) by L917 , L898 , NAT_1:40;
L919: R12 <= ( R12 - 1 ) by L918 , L915 , XXREAL_0:2;
L920: ( R12 + 1 ) <= ( R12 + ( 0 ) ) by L919 , XREAL_1:19;
thus L921: contradiction by L920 , XREAL_1:6;
end;
L922: R2 just_once_values ( R12 + 1 ) by L895 , L894 , L280;
L923: ( len D47 ) = ( ( R12 + 1 ) - 1 ) by L922 , L891 , L316
.= R12;
L924: D47 = ( ( R2 -| ( R12 + 1 ) ) ^ ( R2 |-- ( R12 + 1 ) ) ) by L922 , L629;
L925: ( rng D47 ) = ( ( Seg ( R12 + 1 ) ) \ { ( R12 + 1 ) } ) by L892 , L893 , FINSEQ_3:65
.= ( Seg R12 ) by FINSEQ_1:10;
L926: ( dom D47 ) = ( rng D47 ) by L925 , L923 , FINSEQ_1:def 3;
thus L927: thesis by L926 , L889 , L894 , L923 , L924 , L694;
end;

end;
L891: S3[ ( 0 ) ]
proof
let R2 being FinSequence;
assume L892: ( len R2 ) = ( 0 );
L893: R2 = ( {} ) by L892;
thus L894: thesis by L893;
end;
L895: (for R12 being Nat holds S3[ R12 ]) from NAT_1:sch 2(L891 , L888);
thus L896: thesis by L895 , L887;
end;
theorem
L897: (for R2 being FinSequence holds (for R3 being FinSequence holds ((( rng R2 ) = ( rng R3 ) & ( len R2 ) = ( len R3 ) & R3 is  one-to-one) implies R2 is  one-to-one)))
proof
let R2 being FinSequence;
let R3 being FinSequence;
assume that
L898: ( rng R2 ) = ( rng R3 )
and
L899: ( len R2 ) = ( len R3 )
and
L900: R3 is  one-to-one;
L901: ( rng R2 ) = ( dom ( R3 " ) ) by L898 , L900 , FUNCT_1:33;
L902: ( dom ( ( R3 " ) * R2 ) ) = ( dom R2 ) by L901 , RELAT_1:27
.= ( Seg ( len R2 ) ) by FINSEQ_1:def 3;
reconsider D48 = ( ( R3 " ) * R2 ) as FinSequence by L902 , FINSEQ_1:def 2;
L903: ( rng D48 ) = ( rng ( R3 " ) ) by L901 , RELAT_1:28
.= ( dom R3 ) by L900 , FUNCT_1:33
.= ( Seg ( len R3 ) ) by FINSEQ_1:def 3;
L904: D48 is  one-to-one by L903 , L899 , L902 , L886;
thus L905: thesis by L904 , L901 , FUNCT_1:26;
end;
L906: (for B8 , B9 being  finite set holds (for B10 being (Function of B8 , B9) holds ((( card B8 ) = ( card B9 ) & ( rng B10 ) = B9) implies B10 is  one-to-one)))
proof
let C24 , C25 being  finite set;
let C26 being (Function of C24 , C25);
assume that
L907: ( card C24 ) = ( card C25 )
and
L908: ( rng C26 ) = C25;
L909: C24 , C25 are_equipotent  by L907 , CARD_1:5;
consider R2 being FinSequence such that L910: ( rng R2 ) = C24 and L911: R2 is  one-to-one by L811;
L912: ( dom R2 ) , ( R2 .: ( dom R2 ) ) are_equipotent  by L911 , CARD_1:33;
L913: ( dom R2 ) , C24 are_equipotent  by L912 , L910 , RELAT_1:113;
L914: ( dom R2 ) , C25 are_equipotent  by L913 , L909 , WELLORD2:15;
reconsider D49 = ( dom R2 ) as  finite set;
consider R3 being FinSequence such that L915: ( rng R3 ) = C25 and L916: R3 is  one-to-one by L811;
L917: ( dom R3 ) = ( Seg ( len R3 ) ) by FINSEQ_1:def 3;
L918: ( dom R3 ) , ( R3 .: ( dom R3 ) ) are_equipotent  by L916 , CARD_1:33;
L919: ( dom R3 ) , C25 are_equipotent  by L918 , L915 , RELAT_1:113;
L920: ( dom R2 ) , ( dom R3 ) are_equipotent  by L919 , L914 , WELLORD2:15;
L921: ( card D49 ) = ( card ( Seg ( len R3 ) ) ) by L920 , L917 , CARD_1:5
.= ( len R3 ) by FINSEQ_1:57;
L922: ( len R3 ) = ( card ( Seg ( len R2 ) ) ) by L921 , FINSEQ_1:def 3
.= ( len R2 ) by FINSEQ_1:57;
L923:
now
per cases ;
suppose L924: C25 = ( {} );

thus L925: thesis by L924;
end;
suppose L926: C25 <> ( {} );

L927: ( rng R2 ) = ( dom C26 ) by L926 , L910 , FUNCT_2:def 1;
L928: ( rng ( C26 * R2 ) ) = C25 by L927 , L908 , RELAT_1:28
.= ( dom ( R3 " ) ) by L915 , L916 , FUNCT_1:33;
L929: ( dom ( R3 " ) ) = ( rng R3 ) by L916 , FUNCT_1:33;
L930: ( rng C26 ) c= ( dom ( R3 " ) ) by L929 , L915 , RELAT_1:def 19;
L931: ( dom ( ( R3 " ) * C26 ) ) = ( dom C26 ) by L930 , RELAT_1:27;
L932: ( rng R2 ) = ( dom ( ( R3 " ) * C26 ) ) by L931 , L910 , L926 , FUNCT_2:def 1;
L933: ( dom ( ( ( R3 " ) * C26 ) * R2 ) ) = ( dom R2 ) by L932 , RELAT_1:27
.= ( Seg ( len R2 ) ) by FINSEQ_1:def 3;
reconsider D50 = ( ( ( R3 " ) * C26 ) * R2 ) as FinSequence by L933 , FINSEQ_1:def 2;
L934: D50 = ( ( R3 " ) * ( C26 * R2 ) ) by RELAT_1:36;
L935: ( rng D50 ) = ( rng ( R3 " ) ) by L934 , L928 , RELAT_1:28
.= ( dom R3 ) by L916 , FUNCT_1:33
.= ( Seg ( len R3 ) ) by FINSEQ_1:def 3;
L936: D50 is  one-to-one by L935 , L922 , L933 , L886;
L937: ( R3 * D50 ) = ( R3 * ( ( R3 " ) * ( C26 * R2 ) ) ) by RELAT_1:36
.= ( ( R3 * ( R3 " ) ) * ( C26 * R2 ) ) by RELAT_1:36
.= ( ( id ( rng R3 ) ) * ( C26 * R2 ) ) by L916 , FUNCT_1:39
.= ( ( ( id ( rng R3 ) ) * C26 ) * R2 ) by RELAT_1:36
.= ( C26 * R2 ) by L908 , L915 , RELAT_1:54;
L938: ( ( R3 * D50 ) * ( R2 " ) ) = ( C26 * ( R2 * ( R2 " ) ) ) by L937 , RELAT_1:36
.= ( C26 * ( id ( rng R2 ) ) ) by L911 , FUNCT_1:39
.= ( C26 * ( id ( dom C26 ) ) ) by L910 , L926 , FUNCT_2:def 1
.= C26 by RELAT_1:52;
thus L939: thesis by L938 , L911 , L916 , L936;
end;
end;
thus L941: thesis by L923;
end;
theorem
L942: (for R2 being FinSequence holds (R2 is  one-to-one iff ( card ( rng R2 ) ) = ( len R2 )))
proof
let R2 being FinSequence;
thus L943: (R2 is  one-to-one implies ( card ( rng R2 ) ) = ( len R2 ))
proof
assume L944: R2 is  one-to-one;
L945: ( dom R2 ) , ( R2 .: ( dom R2 ) ) are_equipotent  by L944 , CARD_1:33;
L946: ( dom R2 ) , ( rng R2 ) are_equipotent  by L945 , RELAT_1:113;
L947: ( Seg ( len R2 ) ) , ( rng R2 ) are_equipotent  by L946 , FINSEQ_1:def 3;
L948: ( card ( Seg ( len R2 ) ) ) = ( card ( rng R2 ) ) by L947 , CARD_1:5;
thus L949: thesis by L948 , FINSEQ_1:57;
end;

reconsider D51 = R2 as (Function of ( dom R2 ) , ( rng R2 )) by FUNCT_2:1;
reconsider D52 = ( dom R2 ) as  finite set;
assume L950: ( card ( rng R2 ) ) = ( len R2 );
L951: ( card ( rng R2 ) ) = ( card ( Seg ( len R2 ) ) ) by L950 , FINSEQ_1:57;
L952: ( card ( rng R2 ) ) = ( card D52 ) by L951 , FINSEQ_1:def 3;
L953: ( dom D51 ) is  finite;
thus L954: thesis by L953 , L952 , L906;
end;
theorem
L955: (for B11 , B12 being  finite set holds (for B13 being (Function of B11 , B12) holds ((( card B11 ) = ( card B12 ) & B13 is  one-to-one) implies ( rng B13 ) = B12)))
proof
let C27 , C28 being  finite set;
let C29 being (Function of C27 , C28);
assume that
L956: ( card C27 ) = ( card C28 )
and
L957: C29 is  one-to-one;
L958: C27 , C28 are_equipotent  by L956 , CARD_1:5;
consider R2 being FinSequence such that L959: ( rng R2 ) = C27 and L960: R2 is  one-to-one by L811;
L961: ( dom R2 ) , ( R2 .: ( dom R2 ) ) are_equipotent  by L960 , CARD_1:33;
L962: ( dom R2 ) , C27 are_equipotent  by L961 , L959 , RELAT_1:113;
L963: ( dom R2 ) , C28 are_equipotent  by L962 , L958 , WELLORD2:15;
consider R3 being FinSequence such that L964: ( rng R3 ) = C28 and L965: R3 is  one-to-one by L811;
L966: ( dom R3 ) = ( Seg ( len R3 ) ) by FINSEQ_1:def 3;
L967: ( dom R3 ) , ( R3 .: ( dom R3 ) ) are_equipotent  by L965 , CARD_1:33;
L968: ( dom R3 ) , C28 are_equipotent  by L967 , L964 , RELAT_1:113;
L969: ( dom R2 ) , ( dom R3 ) are_equipotent  by L968 , L963 , WELLORD2:15;
L970: ( card ( dom R2 ) ) = ( card ( Seg ( len R3 ) ) ) by L969 , L966 , CARD_1:5
.= ( len R3 ) by FINSEQ_1:57;
L971: ( len R3 ) = ( card ( Seg ( len R2 ) ) ) by L970 , FINSEQ_1:def 3
.= ( len R2 ) by FINSEQ_1:57;
per cases ;
suppose L972: C28 = ( {} );

thus L973: thesis by L972;
end;
suppose L974: C28 <> ( {} );

L975: ( dom ( R3 " ) ) = ( rng R3 ) by L965 , FUNCT_1:33;
L976: ( rng C29 ) c= ( dom ( R3 " ) ) by L975 , L964 , RELAT_1:def 19;
L977: ( dom ( ( R3 " ) * C29 ) ) = ( dom C29 ) by L976 , RELAT_1:27;
L978: ( rng R2 ) = ( dom ( ( R3 " ) * C29 ) ) by L977 , L959 , L974 , FUNCT_2:def 1;
L979: ( dom ( ( ( R3 " ) * C29 ) * R2 ) ) = ( dom R2 ) by L978 , RELAT_1:27
.= ( Seg ( len R2 ) ) by FINSEQ_1:def 3;
reconsider D53 = ( ( ( R3 " ) * C29 ) * R2 ) as FinSequence by L979 , FINSEQ_1:def 2;
L980: D53 = ( ( R3 " ) * ( C29 * R2 ) ) by RELAT_1:36;
L981: ( rng D53 ) c= ( rng ( R3 " ) ) by L980 , RELAT_1:26;
L982: ( rng D53 ) c= ( dom R3 ) by L981 , L965 , FUNCT_1:33;
L983: ( rng D53 ) c= ( dom D53 ) by L982 , L971 , L979 , FINSEQ_1:def 3;
L984: ( rng D53 ) = ( dom D53 ) by L983 , L957 , L960 , L965 , L830;
L985: ( rng D53 ) = ( dom R3 ) by L984 , L971 , L979 , FINSEQ_1:def 3;
L986: ( rng ( R3 * D53 ) ) = C28 by L985 , L964 , RELAT_1:28;
L987: ( rng C29 ) c= ( rng R3 ) by L964 , RELAT_1:def 19;
L988: ( rng R2 ) = ( dom C29 ) by L959 , L974 , FUNCT_2:def 1;
L989: ( R3 * D53 ) = ( R3 * ( ( R3 " ) * ( C29 * R2 ) ) ) by RELAT_1:36
.= ( ( R3 * ( R3 " ) ) * ( C29 * R2 ) ) by RELAT_1:36
.= ( ( id ( rng R3 ) ) * ( C29 * R2 ) ) by L965 , FUNCT_1:39
.= ( ( ( id ( rng R3 ) ) * C29 ) * R2 ) by RELAT_1:36
.= ( C29 * R2 ) by L987 , RELAT_1:53;
thus L990: thesis by L989 , L986 , L988 , RELAT_1:28;
end;
end;
theorem
L992: (for B14 , B15 being  finite set holds (for B16 being (Function of B14 , B15) holds ((( card B14 ) = ( card B15 ) & ( rng B16 ) = B15) implies B16 is  one-to-one))) by L906;
::$N Dirichlet Principle
::$N Pigeon Hole Principle
theorem
L993: (for R4 being set holds (for R5 being set holds (for R24 being (Function of R4 , R5) holds ((( card R5 ) in ( card R4 ) & R5 <> ( {} )) implies (ex R7 being set st (ex R10 being set st (R7 in R4 & R10 in R4 & R7 <> R10 & ( R24 . R7 ) = ( R24 . R10 ))))))))
proof
let R4 being set;
let R5 being set;
let R24 being (Function of R4 , R5);
assume that
L994: ( card R5 ) in ( card R4 )
and
L995: R5 <> ( {} )
and
L996: (for R7 being set holds (for R10 being set holds ((R7 in R4 & R10 in R4 & R7 <> R10) implies ( R24 . R7 ) <> ( R24 . R10 ))));
L997: ( dom R24 ) = R4 by L995 , FUNCT_2:def 1;
L998: (for R7 being set holds (for R10 being set holds ((R7 in ( dom R24 ) & R10 in ( dom R24 ) & ( R24 . R7 ) = ( R24 . R10 )) implies R7 = R10))) by L997 , L996;
L999: R24 is  one-to-one by L998 , FUNCT_1:def 4;
L1000: ( dom R24 ) , ( R24 .: ( dom R24 ) ) are_equipotent  by L999 , CARD_1:33;
L1001: ( dom R24 ) , ( rng R24 ) are_equipotent  by L1000 , RELAT_1:113;
L1002: ( card R4 ) = ( card ( rng R24 ) ) by L1001 , L997 , CARD_1:5;
L1003: ( rng R24 ) c= R5 by RELAT_1:def 19;
L1004: ( card R4 ) c= ( card R5 ) by L1003 , L1002 , CARD_1:11;
thus L1005: contradiction by L1004 , L994 , CARD_1:4;
end;
theorem
L1006: (for R4 being set holds (for R5 being set holds (for R24 being (Function of R4 , R5) holds (( card R4 ) in ( card R5 ) implies (ex R7 being set st (R7 in R5 & (for R10 being set holds (R10 in R4 implies ( R24 . R10 ) <> R7))))))))
proof
let R4 being set;
let R5 being set;
let R24 being (Function of R4 , R5);
assume that
L1007: ( card R4 ) in ( card R5 )
and
L1008: (for R7 being set holds (R7 in R5 implies (ex R10 being set st (R10 in R4 & ( R24 . R10 ) = R7))));
L1009: ( dom R24 ) = R4 by L1007 , CARD_1:27 , FUNCT_2:def 1;
L1010: ( rng R24 ) = R5
proof
thus L1011: ( rng R24 ) c= R5 by RELAT_1:def 19;
let R7 being set;
assume L1012: R7 in R5;
L1013: (ex R10 being set st (R10 in R4 & ( R24 . R10 ) = R7)) by L1012 , L1008;
thus L1014: thesis by L1013 , L1009 , FUNCT_1:def 3;
end;
L1015: ( card R5 ) c= ( card R4 ) by L1010 , L1009 , CARD_1:12;
thus L1016: thesis by L1015 , L1007 , CARD_1:4;
end;
begin
theorem
L1017: (for B17 being non  empty set holds (for B18 being (FinSequence of B17) holds (for B19 being (Element of B17) holds ( ( B18 ^ <* B19 *> ) /. ( ( len B18 ) + 1 ) ) = B19)))
proof
let C30 being non  empty set;
let C31 being (FinSequence of C30);
let C32 being (Element of C30);
L1018: ( len ( C31 ^ <* C32 *> ) ) = ( ( len C31 ) + ( len <* C32 *> ) ) by FINSEQ_1:22;
L1019: (1 <= ( ( len C31 ) + 1 ) & ( ( len C31 ) + 1 ) <= ( len ( C31 ^ <* C32 *> ) )) by L1018 , FINSEQ_1:39 , NAT_1:11;
L1020: ( ( len C31 ) + 1 ) in ( dom ( C31 ^ <* C32 *> ) ) by L1019 , FINSEQ_3:25;
thus L1021: ( ( C31 ^ <* C32 *> ) /. ( ( len C31 ) + 1 ) ) = ( ( C31 ^ <* C32 *> ) . ( ( len C31 ) + 1 ) ) by L1020 , PARTFUN1:def 6
.= C32 by FINSEQ_1:42;
end;
theorem
L1022: (for R12 being Nat holds (for B20 being non  empty set holds (for B21 , B22 being (FinSequence of B20) holds (R12 in ( dom B21 ) implies ( ( B21 ^ B22 ) /. R12 ) = ( B21 /. R12 )))))
proof
let R12 being Nat;
let C33 being non  empty set;
let C34 , C35 being (FinSequence of C33);
assume L1023: R12 in ( dom C34 );
L1024: R12 in ( dom ( C34 ^ C35 ) ) by L1023 , FINSEQ_3:22;
thus L1025: ( ( C34 ^ C35 ) /. R12 ) = ( ( C34 ^ C35 ) . R12 ) by L1024 , PARTFUN1:def 6
.= ( C34 . R12 ) by L1023 , FINSEQ_1:def 7
.= ( C34 /. R12 ) by L1023 , PARTFUN1:def 6;
end;
theorem
L1026: (for R12 being Nat holds (for B23 being non  empty set holds (for B24 , B25 being (FinSequence of B23) holds (R12 in ( dom B25 ) implies ( ( B24 ^ B25 ) /. ( ( len B24 ) + R12 ) ) = ( B25 /. R12 )))))
proof
let R12 being Nat;
let C36 being non  empty set;
let C37 , C38 being (FinSequence of C36);
assume L1027: R12 in ( dom C38 );
L1028: ( ( len C37 ) + R12 ) in ( dom ( C37 ^ C38 ) ) by L1027 , FINSEQ_1:28;
thus L1029: ( ( C37 ^ C38 ) /. ( ( len C37 ) + R12 ) ) = ( ( C37 ^ C38 ) . ( ( len C37 ) + R12 ) ) by L1028 , PARTFUN1:def 6
.= ( C38 . R12 ) by L1027 , FINSEQ_1:def 7
.= ( C38 /. R12 ) by L1027 , PARTFUN1:def 6;
end;
theorem
L1030: (for R16 being Nat holds (for B26 being Nat holds (for B27 being set holds (for B28 being (FinSequence of B27) holds (R16 in ( dom ( B28 | B26 ) ) implies ( (( B28 | B26 ) qua (FinSequence of B27)) /. R16 ) = ( B28 /. R16 ))))))
proof
let R16 being Nat;
let C39 being Nat;
let C40 being set;
let C41 being (FinSequence of C40);
assume L1031: R16 in ( dom ( C41 | C39 ) );
L1032: R16 in ( ( dom C41 ) /\ ( Seg C39 ) ) by L1031 , RELAT_1:61;
L1033: R16 in ( dom C41 ) by L1032 , XBOOLE_0:def 4;
thus L1034: ( ( C41 | C39 ) /. R16 ) = ( ( C41 | ( Seg C39 ) ) . R16 ) by L1031 , PARTFUN1:def 6
.= ( C41 . R16 ) by L1031 , FUNCT_1:47
.= ( C41 /. R16 ) by L1033 , PARTFUN1:def 6;
end;
theorem
L1035: (for B29 being set holds (for B30 being (FinSequence of B29) holds (for R15 being Nat holds (for R14 being Nat holds ((R15 in ( dom B30 ) & R14 in ( Seg R15 )) implies (R14 in ( dom B30 ) & ( ( B30 | R15 ) /. R14 ) = ( B30 /. R14 )))))))
proof
let C42 being set;
let C43 being (FinSequence of C42);
let R15 being Nat;
let R14 being Nat;
assume that
L1036: R15 in ( dom C43 )
and
L1037: R14 in ( Seg R15 );
L1038: (( dom C43 ) = ( Seg ( len C43 ) ) & R15 <= ( len C43 )) by L1036 , FINSEQ_1:def 3 , FINSEQ_3:25;
L1039: ( Seg R15 ) c= ( dom C43 ) by L1038 , FINSEQ_1:5;
thus L1040: R14 in ( dom C43 ) by L1039 , L1037;
L1041: ( Seg R15 ) = ( ( dom C43 ) /\ ( Seg R15 ) ) by L1039 , XBOOLE_1:28
.= ( dom ( C43 | R15 ) ) by RELAT_1:61;
thus L1042: ( ( C43 | R15 ) /. R14 ) = ( ( C43 | R15 ) . R14 ) by L1041 , L1037 , PARTFUN1:def 6
.= ( C43 . R14 ) by L1037 , L1041 , FUNCT_1:47
.= ( C43 /. R14 ) by L1037 , L1039 , PARTFUN1:def 6;
end;
theorem
L1043: (for R15 being Nat holds (for B31 being  finite set holds (R15 <= ( card B31 ) implies (ex B32 being  finite (Subset of B31) st ( card B32 ) = R15))))
proof
let R15 being Nat;
let C44 being  finite set;
assume that
L1044: R15 <= ( card C44 );
consider C45 being FinSequence such that L1045: ( rng C45 ) = C44 and L1046: C45 is  one-to-one by L811;
reconsider D54 = ( C45 | ( Seg R15 ) ) as FinSequence by FINSEQ_1:15;
L1047: R15 <= ( len C45 ) by L1044 , L1045 , L1046 , L942;
L1048: ( len D54 ) = R15 by L1047 , FINSEQ_1:17;
reconsider D55 = ( rng D54 ) as (Subset of C44) by L1045 , RELAT_1:70;
L1049: D54 is  one-to-one by L1046 , FUNCT_1:52;
L1050: ( card D55 ) = R15 by L1049 , L1048 , L942;
thus L1051: thesis by L1050;
end;
theorem
L1052: (for R7 being set holds (for R25 being Function holds ((R25 is  one-to-one & R7 in ( rng R25 )) implies ( card ( Coim (R25 , R7) ) ) = 1)))
proof
let R7 being set;
let R25 being Function;
assume L1053: (R25 is  one-to-one & R7 in ( rng R25 ));
L1054: R25 just_once_values R7 by L1053 , L115;
thus L1055: thesis by L1054 , L55;
end;
definition
let C46 , C47 , C48 , C49 being set;
func <*C46 , C47 , C48 , C49 *> -> set equals 
( <* C46 , C47 , C48 *> ^ <* C49 *> );
correctness;
let C50 being set;
func <*C46 , C47 , C48 , C49 , C50 *> -> set equals 
( <* C46 , C47 , C48 *> ^ <* C49 , C50 *> );
correctness;
end;
registration
let C51 , C52 , C53 , C54 being set;
cluster <* C51 , C52 , C53 , C54 *> -> non  empty  Function-like  Relation-like;
coherence;
let C55 being set;
cluster <* C51 , C52 , C53 , C54 , C55 *> -> non  empty  Function-like  Relation-like;
coherence;
end;
registration
let C56 , C57 , C58 , C59 being set;
cluster <* C56 , C57 , C58 , C59 *> ->  FinSequence-like;
coherence;
let C60 being set;
cluster <* C56 , C57 , C58 , C59 , C60 *> ->  FinSequence-like;
coherence;
end;
definition
let C61 being non  empty set;
let C62 , C63 , C64 , C65 being (Element of C61);
redefine func <*C62 , C63 , C64 , C65 *> -> (FinSequence of C61);

coherence
proof
L1059: <* C62 , C63 , C64 , C65 *> = ( <* C62 , C63 , C64 *> ^ <* C65 *> );
thus L1060: thesis by L1059;
end;
end;
definition
let C66 being non  empty set;
let C67 , C68 , C69 , C70 , C71 being (Element of C66);
redefine func <*C67 , C68 , C69 , C70 , C71 *> -> (FinSequence of C66);

coherence
proof
L1062: <* C67 , C68 , C69 , C70 , C71 *> = ( <* C67 , C68 , C69 *> ^ <* C70 , C71 *> );
thus L1063: thesis by L1062;
end;
end;
theorem
L1065: (for R26 being set holds (for R27 being set holds (for R28 being set holds (for R29 being set holds (<* R26 , R27 , R28 , R29 *> = ( <* R26 , R27 , R28 *> ^ <* R29 *> ) & <* R26 , R27 , R28 , R29 *> = ( <* R26 , R27 *> ^ <* R28 , R29 *> ) & <* R26 , R27 , R28 , R29 *> = ( <* R26 *> ^ <* R27 , R28 , R29 *> ) & <* R26 , R27 , R28 , R29 *> = ( ( ( <* R26 *> ^ <* R27 *> ) ^ <* R28 *> ) ^ <* R29 *> ))))))
proof
let R26 being set;
let R27 being set;
let R28 being set;
let R29 being set;
thus L1066: <* R26 , R27 , R28 , R29 *> = ( <* R26 , R27 , R28 *> ^ <* R29 *> );
thus L1067: <* R26 , R27 , R28 , R29 *> = ( <* R26 , R27 *> ^ <* R28 , R29 *> ) by FINSEQ_1:32;
thus L1068: <* R26 , R27 , R28 , R29 *> = ( <* R26 *> ^ ( <* R27 *> ^ <* R28 , R29 *> ) ) by L1067 , FINSEQ_1:32
.= ( <* R26 *> ^ <* R27 , R28 , R29 *> ) by FINSEQ_1:43;
thus L1069: thesis;
end;
theorem
L1070: (for R26 being set holds (for R27 being set holds (for R28 being set holds (for R29 being set holds (for R30 being set holds (<* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 , R27 , R28 *> ^ <* R29 , R30 *> ) & <* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 , R27 , R28 , R29 *> ^ <* R30 *> ) & <* R26 , R27 , R28 , R29 , R30 *> = ( ( ( ( <* R26 *> ^ <* R27 *> ) ^ <* R28 *> ) ^ <* R29 *> ) ^ <* R30 *> ) & <* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 , R27 *> ^ <* R28 , R29 , R30 *> ) & <* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 *> ^ <* R27 , R28 , R29 , R30 *> )))))))
proof
let R26 being set;
let R27 being set;
let R28 being set;
let R29 being set;
let R30 being set;
thus L1071: <* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 , R27 , R28 *> ^ <* R29 , R30 *> );
thus L1072: <* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 , R27 , R28 , R29 *> ^ <* R30 *> ) by FINSEQ_1:32;
thus L1073: <* R26 , R27 , R28 , R29 , R30 *> = ( ( ( ( <* R26 *> ^ <* R27 *> ) ^ <* R28 *> ) ^ <* R29 *> ) ^ <* R30 *> ) by FINSEQ_1:32;
thus L1074: <* R26 , R27 , R28 , R29 , R30 *> = ( ( <* R26 , R27 *> ^ ( <* R28 *> ^ <* R29 *> ) ) ^ <* R30 *> ) by L1072 , FINSEQ_1:32
.= ( <* R26 , R27 *> ^ <* R28 , R29 , R30 *> ) by FINSEQ_1:32;
thus L1075: <* R26 , R27 , R28 , R29 , R30 *> = ( <* R26 *> ^ ( <* R27 *> ^ <* R28 , R29 , R30 *> ) ) by L1074 , FINSEQ_1:32
.= ( <* R26 *> ^ <* R27 , R28 , R29 , R30 *> ) by L1065;
end;
theorem
L1076: (for R26 being set holds (for R27 being set holds (for R28 being set holds (for R29 being set holds (for R31 being FinSequence holds (R31 = <* R26 , R27 , R28 , R29 *> iff (( len R31 ) = 4 & ( R31 . 1 ) = R26 & ( R31 . 2 ) = R27 & ( R31 . 3 ) = R28 & ( R31 . 4 ) = R29)))))))
proof
let R26 being set;
let R27 being set;
let R28 being set;
let R29 being set;
let R31 being FinSequence;
thus L1077: (R31 = <* R26 , R27 , R28 , R29 *> implies (( len R31 ) = 4 & ( R31 . 1 ) = R26 & ( R31 . 2 ) = R27 & ( R31 . 3 ) = R28 & ( R31 . 4 ) = R29))
proof
set D56 = <* R26 , R27 , R28 *>;
assume L1078: R31 = <* R26 , R27 , R28 , R29 *>;
thus L1079: ( len R31 ) = ( ( len <* R26 , R27 , R28 *> ) + ( len <* R29 *> ) ) by L1078 , FINSEQ_1:22
.= ( 3 + ( len <* R29 *> ) ) by FINSEQ_1:45
.= ( 3 + 1 ) by FINSEQ_1:40
.= 4;
L1080: ( dom D56 ) = { 1 , 2 , 3 } by FINSEQ_3:1 , FINSEQ_1:89;
L1081: 1 in ( dom D56 ) by L1080 , ENUMSET1:def 1;
thus L1082: ( R31 . 1 ) = ( D56 . 1 ) by L1081 , L1078 , FINSEQ_1:def 7
.= R26 by FINSEQ_1:45;
L1083: 2 in ( dom D56 ) by L1080 , ENUMSET1:def 1;
thus L1084: ( R31 . 2 ) = ( D56 . 2 ) by L1083 , L1078 , FINSEQ_1:def 7
.= R27 by FINSEQ_1:45;
L1085: 3 in ( dom D56 ) by L1080 , ENUMSET1:def 1;
thus L1086: ( R31 . 3 ) = ( D56 . 3 ) by L1085 , L1078 , FINSEQ_1:def 7
.= R28 by FINSEQ_1:45;
L1087: 1 in { 1 } by TARSKI:def 1;
L1088: 1 in ( dom <* R29 *> ) by L1087 , FINSEQ_1:2 , FINSEQ_1:def 8;
thus L1089: ( R31 . 4 ) = ( ( D56 ^ <* R29 *> ) . ( 3 + 1 ) ) by L1078
.= ( ( D56 ^ <* R29 *> ) . ( ( len D56 ) + 1 ) ) by FINSEQ_1:45
.= ( <* R29 *> . 1 ) by L1088 , FINSEQ_1:def 7
.= R29 by FINSEQ_1:def 8;
end;

assume that
L1090: ( len R31 ) = 4
and
L1091: ( R31 . 1 ) = R26
and
L1092: ( R31 . 2 ) = R27
and
L1093: ( R31 . 3 ) = R28
and
L1094: ( R31 . 4 ) = R29;
L1095: (for B33 being Nat holds (B33 in ( dom <* R26 , R27 , R28 *> ) implies ( R31 . B33 ) = ( <* R26 , R27 , R28 *> . B33 )))
proof
L1096: ( len <* R26 , R27 , R28 *> ) = 3 by FINSEQ_1:45;
let C72 being Nat;
assume L1097: C72 in ( dom <* R26 , R27 , R28 *> );
L1098: C72 in { 1 , 2 , 3 } by L1097 , L1096 , FINSEQ_1:def 3 , FINSEQ_3:1;
per cases  by L1098 , ENUMSET1:def 1;
suppose L1099: C72 = 1;

thus L1100: thesis by L1099 , L1091 , FINSEQ_1:45;
end;
suppose L1101: C72 = 2;

thus L1102: thesis by L1101 , L1092 , FINSEQ_1:45;
end;
suppose L1103: C72 = 3;

thus L1104: thesis by L1103 , L1093 , FINSEQ_1:45;
end;
end;
L1106: (for B34 being Nat holds (B34 in ( dom <* R29 *> ) implies ( R31 . ( ( len <* R26 , R27 , R28 *> ) + B34 ) ) = ( <* R29 *> . B34 )))
proof
let C73 being Nat;
assume L1107: C73 in ( dom <* R29 *> );
L1108: C73 in { 1 } by L1107 , FINSEQ_1:2 , FINSEQ_1:def 8;
L1109: C73 = 1 by L1108 , TARSKI:def 1;
thus L1110: ( R31 . ( ( len <* R26 , R27 , R28 *> ) + C73 ) ) = ( R31 . ( 3 + 1 ) ) by L1109 , FINSEQ_1:45
.= ( <* R29 *> . C73 ) by L1094 , L1109 , FINSEQ_1:def 8;
end;
L1111: ( dom R31 ) = ( Seg ( 3 + 1 ) ) by L1090 , FINSEQ_1:def 3
.= ( Seg ( ( len <* R26 , R27 , R28 *> ) + 1 ) ) by FINSEQ_1:45
.= ( Seg ( ( len <* R26 , R27 , R28 *> ) + ( len <* R29 *> ) ) ) by FINSEQ_1:39;
thus L1112: thesis by L1111 , L1095 , L1106 , FINSEQ_1:def 7;
end;
canceled 1;
theorem
L1113: (for R26 being set holds (for R27 being set holds (for R28 being set holds (for R29 being set holds (for R30 being set holds (for R31 being FinSequence holds (R31 = <* R26 , R27 , R28 , R29 , R30 *> iff (( len R31 ) = 5 & ( R31 . 1 ) = R26 & ( R31 . 2 ) = R27 & ( R31 . 3 ) = R28 & ( R31 . 4 ) = R29 & ( R31 . 5 ) = R30))))))))
proof
let R26 being set;
let R27 being set;
let R28 being set;
let R29 being set;
let R30 being set;
let R31 being FinSequence;
set D57 = <* R26 , R27 , R28 , R29 *>;
thus L1114: (R31 = <* R26 , R27 , R28 , R29 , R30 *> implies (( len R31 ) = 5 & ( R31 . 1 ) = R26 & ( R31 . 2 ) = R27 & ( R31 . 3 ) = R28 & ( R31 . 4 ) = R29 & ( R31 . 5 ) = R30))
proof
set D58 = <* R26 , R27 , R28 , R29 *>;
L1115: 1 in { 1 } by TARSKI:def 1;
L1116: 1 in ( dom <* R30 *> ) by L1115 , FINSEQ_1:2 , FINSEQ_1:def 8;
assume L1117: R31 = <* R26 , R27 , R28 , R29 , R30 *>;
L1118: R31 = ( D58 ^ <* R30 *> ) by L1117 , L1070;
thus L1119: ( len R31 ) = ( len ( <* R26 , R27 , R28 , R29 *> ^ <* R30 *> ) ) by L1117 , L1070
.= ( ( len <* R26 , R27 , R28 , R29 *> ) + ( len <* R30 *> ) ) by FINSEQ_1:22
.= ( 4 + ( len <* R30 *> ) ) by L1076
.= ( 4 + 1 ) by FINSEQ_1:40
.= 5;
L1120: ( dom D58 ) = { 1 , 2 , 3 , 4 } by FINSEQ_1:89 , FINSEQ_3:2;
L1121: 1 in ( dom D58 ) by L1120 , ENUMSET1:def 2;
thus L1122: ( R31 . 1 ) = ( D58 . 1 ) by L1121 , L1118 , FINSEQ_1:def 7
.= R26 by L1076;
L1123: 2 in ( dom D58 ) by L1120 , ENUMSET1:def 2;
thus L1124: ( R31 . 2 ) = ( D58 . 2 ) by L1123 , L1118 , FINSEQ_1:def 7
.= R27 by L1076;
L1125: 3 in ( dom D58 ) by L1120 , ENUMSET1:def 2;
thus L1126: ( R31 . 3 ) = ( D58 . 3 ) by L1125 , L1118 , FINSEQ_1:def 7
.= R28 by L1076;
L1127: 4 in ( dom D58 ) by L1120 , ENUMSET1:def 2;
thus L1128: ( R31 . 4 ) = ( D58 . 4 ) by L1127 , L1118 , FINSEQ_1:def 7
.= R29 by L1076;
thus L1129: ( R31 . 5 ) = ( ( D58 ^ <* R30 *> ) . ( 4 + 1 ) ) by L1117 , L1070
.= ( ( D58 ^ <* R30 *> ) . ( ( len D58 ) + 1 ) ) by L1076
.= ( <* R30 *> . 1 ) by L1116 , FINSEQ_1:def 7
.= R30 by FINSEQ_1:def 8;
end;

assume that
L1130: ( len R31 ) = 5
and
L1131: ( R31 . 1 ) = R26
and
L1132: ( R31 . 2 ) = R27
and
L1133: ( R31 . 3 ) = R28
and
L1134: ( R31 . 4 ) = R29
and
L1135: ( R31 . 5 ) = R30;
L1136: (for B35 being Nat holds (B35 in ( dom D57 ) implies ( R31 . B35 ) = ( D57 . B35 )))
proof
L1137: ( len D57 ) = 4 by L1076;
let C74 being Nat;
assume L1138: C74 in ( dom D57 );
L1139: C74 in { 1 , 2 , 3 , 4 } by L1138 , L1137 , FINSEQ_1:def 3 , FINSEQ_3:2;
per cases  by L1139 , ENUMSET1:def 2;
suppose L1140: C74 = 1;

thus L1141: thesis by L1140 , L1131 , L1076;
end;
suppose L1142: C74 = 2;

thus L1143: thesis by L1142 , L1132 , L1076;
end;
suppose L1144: C74 = 3;

thus L1145: thesis by L1144 , L1133 , L1076;
end;
suppose L1146: C74 = 4;

thus L1147: thesis by L1146 , L1134 , L1076;
end;
end;
L1149: (for B36 being Nat holds (B36 in ( dom <* R30 *> ) implies ( R31 . ( ( len D57 ) + B36 ) ) = ( <* R30 *> . B36 )))
proof
let C75 being Nat;
assume L1150: C75 in ( dom <* R30 *> );
L1151: C75 in { 1 } by L1150 , FINSEQ_1:2 , FINSEQ_1:def 8;
L1152: C75 = 1 by L1151 , TARSKI:def 1;
thus L1153: ( R31 . ( ( len D57 ) + C75 ) ) = ( R31 . ( 4 + 1 ) ) by L1152 , L1076
.= ( <* R30 *> . C75 ) by L1135 , L1152 , FINSEQ_1:def 8;
end;
L1154: ( dom R31 ) = ( Seg ( 4 + 1 ) ) by L1130 , FINSEQ_1:def 3
.= ( Seg ( ( len D57 ) + 1 ) ) by L1076
.= ( Seg ( ( len D57 ) + ( len <* R30 *> ) ) ) by FINSEQ_1:39;
thus L1155: R31 = ( D57 ^ <* R30 *> ) by L1154 , L1136 , L1149 , FINSEQ_1:def 7
.= <* R26 , R27 , R28 , R29 , R30 *> by L1070;
end;
canceled 1;
theorem
L1156: (for R32 being non  empty set holds (for R33 being (Element of R32) holds (for R34 being (Element of R32) holds (for R35 being (Element of R32) holds (for R36 being (Element of R32) holds (( <* R33 , R34 , R35 , R36 *> /. 1 ) = R33 & ( <* R33 , R34 , R35 , R36 *> /. 2 ) = R34 & ( <* R33 , R34 , R35 , R36 *> /. 3 ) = R35 & ( <* R33 , R34 , R35 , R36 *> /. 4 ) = R36))))))
proof
let R32 being non  empty set;
let R33 being (Element of R32);
let R34 being (Element of R32);
let R35 being (Element of R32);
let R36 being (Element of R32);
set D59 = <* R33 , R34 , R35 , R36 *>;
L1157: (2 in { 1 , 2 , 3 , 4 } & 3 in { 1 , 2 , 3 , 4 }) by FINSEQ_3:2;
L1158: (( D59 . 2 ) = R34 & ( D59 . 3 ) = R35) by L1076;
L1159: 4 in { 1 , 2 , 3 , 4 } by FINSEQ_3:2;
L1160: (( D59 . 4 ) = R36 & 1 in { 1 , 2 , 3 , 4 }) by L1076 , FINSEQ_3:2;
L1161: (( dom D59 ) = { 1 , 2 , 3 , 4 } & ( D59 . 1 ) = R33) by L1076 , FINSEQ_1:89 , FINSEQ_3:2;
thus L1162: thesis by L1161 , L1158 , L1160 , L1157 , L1159 , PARTFUN1:def 6;
end;
theorem
L1163: (for R32 being non  empty set holds (for R33 being (Element of R32) holds (for R34 being (Element of R32) holds (for R35 being (Element of R32) holds (for R36 being (Element of R32) holds (for R37 being (Element of R32) holds (( <* R33 , R34 , R35 , R36 , R37 *> /. 1 ) = R33 & ( <* R33 , R34 , R35 , R36 , R37 *> /. 2 ) = R34 & ( <* R33 , R34 , R35 , R36 , R37 *> /. 3 ) = R35 & ( <* R33 , R34 , R35 , R36 , R37 *> /. 4 ) = R36 & ( <* R33 , R34 , R35 , R36 , R37 *> /. 5 ) = R37)))))))
proof
let R32 being non  empty set;
let R33 being (Element of R32);
let R34 being (Element of R32);
let R35 being (Element of R32);
let R36 being (Element of R32);
let R37 being (Element of R32);
set D60 = <* R33 , R34 , R35 , R36 , R37 *>;
set D61 = { 1 , 2 , 3 , 4 , 5 };
L1164: (1 in D61 & 2 in D61) by FINSEQ_3:3;
L1165: (3 in D61 & 4 in D61) by FINSEQ_3:3;
L1166: (( D60 . 4 ) = R36 & ( D60 . 5 ) = R37) by L1113;
L1167: (( D60 . 2 ) = R34 & ( D60 . 3 ) = R35) by L1113;
L1168: 5 in D61 by FINSEQ_3:3;
L1169: (( dom D60 ) = D61 & ( D60 . 1 ) = R33) by L1113 , FINSEQ_1:89 , FINSEQ_3:3;
thus L1170: thesis by L1169 , L1167 , L1166 , L1164 , L1165 , L1168 , PARTFUN1:def 6;
end;
scheme Sch1 { F1() -> non  empty set , F2() -> Nat , P1[set , set] } : (ex B37 being (FinSequence of F1()) st (( len B37 ) = F2() & (for R15 being Nat holds (R15 in ( Seg F2() ) implies P1[ R15 , ( B37 /. R15 ) ]))))
provided
L1171: (for R15 being Nat holds (R15 in ( Seg F2() ) implies (ex B38 being (Element of F1()) st P1[ R15 , B38 ])))
proof
defpred S4[ set , set ] means (P1[ $1 , $2 ] & $2 in F1());
reconsider D62 = F1() as set;
L1172:
now
let C76 being set;
assume L1173: C76 in ( Seg F2() );
reconsider D63 = C76 as (Element of ( NAT )) by L1173;
consider C77 being (Element of F1()) such that L1174: P1[ D63 , C77 ] by L1171 , L1173;
reconsider D64 = C77 as set;
take D65 = D64;
thus L1175: (D65 in D62 & S4[ C76 , D65 ]) by L1174;
end;
consider C78 being Function such that L1176: (( dom C78 ) = ( Seg F2() ) & ( rng C78 ) c= D62 & (for B39 being set holds (B39 in ( Seg F2() ) implies S4[ B39 , ( C78 . B39 ) ]))) from FUNCT_1:sch 5(L1172);
reconsider D66 = C78 as FinSequence by L1176 , FINSEQ_1:def 2;
reconsider D67 = D66 as (FinSequence of F1()) by L1176 , FINSEQ_1:def 4;
take D67;
L1177: F2() in ( NAT ) by ORDINAL1:def 12;
thus L1178: ( len D67 ) = F2() by L1177 , L1176 , FINSEQ_1:def 3;
let R15 being Nat;
assume L1179: R15 in ( Seg F2() );
L1180: P1[ R15 , ( D67 . R15 ) ] by L1179 , L1176;
thus L1181: thesis by L1180 , L1176 , L1179 , PARTFUN1:def 6;
end;
theorem
L1182: (for B40 being non  empty set holds (for B41 , B42 being (FinSequence of B40) holds (B41 c= B42 implies (ex B43 being (FinSequence of B40) st ( B41 ^ B43 ) = B42))))
proof
let C79 being non  empty set;
let C80 , C81 being (FinSequence of C79);
assume L1183: C80 c= C81;
L1184: (( dom C80 ) = ( Seg ( len C80 ) ) & ( dom C81 ) = ( Seg ( len C81 ) )) by FINSEQ_1:def 3;
L1185: ( Seg ( len C80 ) ) c= ( Seg ( len C81 ) ) by L1184 , L1183 , GRFUNC_1:2;
L1186: ( len C80 ) <= ( len C81 ) by L1185 , FINSEQ_1:5;
reconsider D68 = ( ( len C81 ) - ( len C80 ) ) as (Element of ( NAT )) by L1186 , INT_1:3 , XREAL_1:48;
defpred S5[ Nat , set ] means ( C81 /. ( ( len C80 ) + $1 ) ) = $2;
L1187: (for B44 being Nat holds (B44 in ( Seg D68 ) implies (ex B45 being (Element of C79) st S5[ B44 , B45 ])));
consider C82 being (FinSequence of C79) such that L1188: ( len C82 ) = D68 and L1189: (for B46 being Nat holds (B46 in ( Seg D68 ) implies S5[ B46 , ( C82 /. B46 ) ])) from Sch1(L1187);
take C82;
L1190: ( len ( C80 ^ C82 ) ) = ( ( len C80 ) + D68 ) by L1188 , FINSEQ_1:22
.= ( len C81 );
L1191:
now
let C83 being Nat;
assume that
L1192: 1 <= C83
and
L1193: C83 <= ( len ( C80 ^ C82 ) );
L1194: C83 in ( NAT ) by ORDINAL1:def 12;
L1195: C83 in ( Seg ( len C81 ) ) by L1194 , L1190 , L1192 , L1193;
L1196: C83 in ( dom C81 ) by L1195 , FINSEQ_1:def 3;
per cases ;
suppose L1197: C83 <= ( len C80 );

L1198: C83 in ( Seg ( len C80 ) ) by L1197 , L1192 , L1194;
L1199: C83 in ( dom C80 ) by L1198 , FINSEQ_1:def 3;
thus L1200: ( ( C80 ^ C82 ) . C83 ) = ( C80 . C83 ) by L1199 , FINSEQ_1:def 7
.= ( C81 . C83 ) by L1183 , L1199 , GRFUNC_1:2;
end;
suppose L1201: ( len C80 ) < C83;

L1202: ( C83 - ( len C80 ) ) > ( 0 ) by L1201 , XREAL_1:50;
reconsider D69 = ( C83 - ( len C80 ) ) as (Element of ( NAT )) by L1202 , INT_1:3;
L1203: C83 <= ( ( len C80 ) + ( len C82 ) ) by L1193 , FINSEQ_1:22;
L1204: D69 <= ( ( ( len C80 ) + ( len C82 ) ) - ( len C80 ) ) by L1203 , XREAL_1:9;
L1205: ( C83 - ( len C80 ) ) >= ( ( 0 ) + 1 ) by L1201 , INT_1:7 , XREAL_1:50;
L1206: D69 in ( Seg ( len C82 ) ) by L1205 , L1204;
L1207: D69 in ( dom C82 ) by L1206 , FINSEQ_1:def 3;
thus L1208: ( ( C80 ^ C82 ) . C83 ) = ( C82 . D69 ) by L1193 , L1201 , FINSEQ_1:24
.= ( C82 /. D69 ) by L1207 , PARTFUN1:def 6
.= ( C81 /. ( ( len C80 ) + D69 ) ) by L1188 , L1189 , L1206
.= ( C81 . C83 ) by L1196 , PARTFUN1:def 6;
end;
end;
thus L1210: thesis by L1191 , L1190 , FINSEQ_1:14;
end;
theorem
L1211: (for B47 being non  empty set holds (for B48 , B49 being (FinSequence of B47) holds (for B50 being (Element of ( NAT )) holds ((B48 c= B49 & 1 <= B50 & B50 <= ( len B48 )) implies ( B49 . B50 ) = ( B48 . B50 )))))
proof
let C84 being non  empty set;
let C85 , C86 being (FinSequence of C84);
let C87 being (Element of ( NAT ));
assume L1212: C85 c= C86;
L1213: (ex B51 being (FinSequence of C84) st ( C85 ^ B51 ) = C86) by L1212 , L1182;
assume L1214: (1 <= C87 & C87 <= ( len C85 ));
thus L1215: thesis by L1214 , L1213 , FINSEQ_1:64;
end;
scheme PiLambdaD { F3() -> non  empty set , F4() -> Nat , F5(set) -> (Element of F3()) } : (ex B52 being (FinSequence of F3()) st (( len B52 ) = F4() & (for B53 being Nat holds (B53 in ( dom B52 ) implies ( B52 /. B53 ) = F5(B53)))))
proof
consider C88 being (FinSequence of F3()) such that L1216: (( len C88 ) = F4() & (for B54 being Nat holds (B54 in ( dom C88 ) implies ( C88 . B54 ) = F5(B54)))) from FINSEQ_2:sch 1;
take C88;
thus L1217: ( len C88 ) = F4() by L1216;
let C89 being Nat;
assume L1218: C89 in ( dom C88 );
L1219: ( C88 . C89 ) = F5(C89) by L1218 , L1216;
thus L1220: thesis by L1219 , L1218 , PARTFUN1:def 6;
end;
registration
let C90 , C91 , C92 , C93 being set;
cluster <* C90 , C91 , C92 , C93 *> -> 4 -element;
coherence;
let C94 being set;
cluster <* C90 , C91 , C92 , C93 , C94 *> -> 5 -element;
coherence;
end;
begin
theorem
L1222: (for B55 , B56 being Nat holds (B55 < B56 implies (ex B57 being (Element of ( NAT )) st (B56 = ( B55 + B57 ) & 1 <= B57))))
proof
let C95 , C96 being Nat;
assume L1223: C95 < C96;
consider C97 being Nat such that L1224: C96 = ( C95 + C97 ) by L1223 , NAT_1:10;
reconsider D70 = C97 as (Element of ( NAT )) by ORDINAL1:def 12;
take D70;
thus L1225: C96 = ( C95 + D70 ) by L1224;
assume L1226: D70 < 1;
L1227: D70 < ( ( 0 ) + 1 ) by L1226;
L1228: D70 = ( 0 ) by L1227 , NAT_1:13;
thus L1229: contradiction by L1228 , L1223 , L1224;
end;
theorem
L1230: (for B58 being set holds (for B59 , B60 being non  empty set holds (for B61 being (Function of B58 , B59) holds (for B62 being (Function of B59 , B60) holds ((B61 is  bijective & B62 is  bijective) implies ( B62 * B61 ) is  bijective)))))
proof
let C98 being set;
let C99 , C100 being non  empty set;
let C101 being (Function of C98 , C99);
let C102 being (Function of C99 , C100);
set D71 = ( C102 * C101 );
L1231: ( dom C102 ) = C99 by FUNCT_2:def 1;
assume L1232: (C101 is  bijective & C102 is  bijective);
L1233: (( rng C102 ) = C100 & ( rng C101 ) = C99) by L1232 , FUNCT_2:def 3;
L1234: ( rng D71 ) = C100 by L1233 , L1231 , RELAT_1:28;
L1235: D71 is  one-to-one  onto by L1234 , L1232 , FUNCT_2:def 3;
thus L1236: thesis by L1235;
end;
theorem
L1237: (for B63 being set holds (for B64 , B65 being (Equivalence_Relation of B63) holds (( Class B64 ) = ( Class B65 ) implies B64 = B65)))
proof
let C103 being set;
let C104 , C105 being (Equivalence_Relation of C103);
assume that
L1238: ( Class C104 ) = ( Class C105 );
L1239:
now
let C106 being set;
thus L1240:now
assume L1241: C106 in C104;
consider C107 , C108 being set such that L1242: C106 = [ C107 , C108 ] and L1243: C107 in C103 and L1244: C108 in C103 by L1241 , RELSET_1:2;
reconsider D72 = C107 , D73 = C108 as (Element of C103) by L1243 , L1244;
L1245: ( Class (C104 , D73) ) in ( Class C105 ) by L1238 , L1243 , EQREL_1:def 3;
consider C109 being set such that L1246: C109 in C103 and L1247: ( Class (C104 , D73) ) = ( Class (C105 , C109) ) by L1245 , EQREL_1:def 3;
L1248: D73 in ( Class (C104 , D73) ) by L1243 , EQREL_1:20;
L1249: [ D73 , C109 ] in C105 by L1248 , L1247 , EQREL_1:19;
L1250: [ C109 , D73 ] in C105 by L1249 , EQREL_1:6;
L1251: D72 in ( Class (C104 , D73) ) by L1241 , L1242 , EQREL_1:19;
L1252: [ D72 , C109 ] in C105 by L1251 , L1247 , EQREL_1:19;
thus L1253: C106 in C105 by L1252 , L1242 , L1250 , EQREL_1:7;
end;
assume L1254: C106 in C105;
consider C110 , C111 being set such that L1255: C106 = [ C110 , C111 ] and L1256: C110 in C103 and L1257: C111 in C103 by L1254 , RELSET_1:2;
reconsider D74 = C110 , D75 = C111 as (Element of C103) by L1256 , L1257;
L1258: ( Class (C105 , D75) ) in ( Class C104 ) by L1238 , L1256 , EQREL_1:def 3;
consider C112 being set such that L1259: C112 in C103 and L1260: ( Class (C105 , D75) ) = ( Class (C104 , C112) ) by L1258 , EQREL_1:def 3;
L1261: D75 in ( Class (C105 , D75) ) by L1256 , EQREL_1:20;
L1262: [ D75 , C112 ] in C104 by L1261 , L1260 , EQREL_1:19;
L1263: [ C112 , D75 ] in C104 by L1262 , EQREL_1:6;
L1264: D74 in ( Class (C105 , D75) ) by L1254 , L1255 , EQREL_1:19;
L1265: [ D74 , C112 ] in C104 by L1264 , L1260 , EQREL_1:19;
thus L1266: C106 in C104 by L1265 , L1255 , L1263 , EQREL_1:7;
end;
thus L1267: thesis by L1239 , TARSKI:1;
end;
registration
let C113 being  finite set;
cluster  ->  finite for (a_partition of C113);
coherence;
end;
registration
let C114 being non  empty  finite set;
cluster non  empty  finite for (a_partition of C114);
existence
proof
set D76 = the (a_partition of C114);
take D76;
thus L1269: thesis;
end;
end;
theorem
L1271: (for B66 being non  empty set holds (for B67 being (a_partition of B66) holds (for B68 being set holds (B68 in B67 implies (ex B69 being (Element of B66) st B69 in B68)))))
proof
let C115 being non  empty set;
let C116 being (a_partition of C115);
let C117 being set;
assume L1272: C117 in C116;
reconsider D77 = C117 as (Element of C116) by L1272;
set D78 = the (Element of D77);
L1273: D77 <> ( {} ) by EQREL_1:def 4;
L1274: D78 in D77 by L1273;
reconsider D79 = D78 as (Element of C115) by L1274;
take D79;
thus L1275: thesis by L1273;
end;
theorem
L1276: (for R38 being non  empty  finite set holds (for R40 being (a_partition of R38) holds ( card R40 ) <= ( card R38 )))
proof
let R38 being non  empty  finite set;
let R40 being (a_partition of R38);
assume L1277: ( card R40 ) > ( card R38 );
L1278: ( card ( card R38 ) ) in ( card ( card R40 ) ) by L1277 , NAT_1:41;
consider C118 being set such that L1279: C118 in R40 and L1280: (for B70 being set holds (B70 in R38 implies ( ( proj R40 ) . B70 ) <> C118)) by L1278 , L1006;
reconsider D80 = C118 as (Element of R40) by L1279;
consider C119 being (Element of R38) such that L1281: C119 in D80 by L1271;
reconsider D81 = ( ( proj R40 ) . C119 ) as (Element of R40);
L1282: (D81 = D80 or D81 misses D80) by EQREL_1:def 4;
L1283: C119 in D81 by EQREL_1:def 9;
thus L1284: contradiction by L1283 , L1280 , L1281 , L1282 , XBOOLE_0:3;
end;
theorem
L1285: (for R39 being non  empty  finite set holds (for R41 being (a_partition of R39) holds (for R42 being (a_partition of R39) holds (R41 is_finer_than R42 implies ( card R42 ) <= ( card R41 )))))
proof
let R39 being non  empty  finite set;
let R41 being (a_partition of R39);
let R42 being (a_partition of R39);
defpred S6[ set , set ] means $1 c= $2;
assume L1286: R41 is_finer_than R42;
L1287: (for B71 being set holds (B71 in R41 implies (ex B72 being set st (B72 in R42 & S6[ B71 , B72 ])))) by L1286 , SETFAM_1:def 2;
consider C120 being (Function of R41 , R42) such that L1288: (for B73 being set holds (B73 in R41 implies S6[ B73 , ( C120 . B73 ) ])) from FUNCT_2:sch 1(L1287);
assume L1289: ( card R41 ) < ( card R42 );
L1290: ( card ( card R41 ) ) in ( card ( card R42 ) ) by L1289 , NAT_1:41;
consider C121 being set such that L1291: C121 in R42 and L1292: (for B74 being set holds (B74 in R41 implies ( C120 . B74 ) <> C121)) by L1290 , L1006;
reconsider D82 = C121 as (Element of R42) by L1291;
consider C122 being (Element of R39) such that L1293: C122 in D82 by L1271;
reconsider D83 = ( C120 . ( ( proj R41 ) . C122 ) ) as (Element of R42);
L1294: (D83 = D82 or D83 misses D82) by EQREL_1:def 4;
L1295: (C122 in ( ( proj R41 ) . C122 ) & ( ( proj R41 ) . C122 ) c= D83) by L1288 , EQREL_1:def 9;
thus L1296: contradiction by L1295 , L1292 , L1293 , L1294 , XBOOLE_0:3;
end;
theorem
L1297: (for R39 being non  empty  finite set holds (for R41 being (a_partition of R39) holds (for R42 being (a_partition of R39) holds (R41 is_finer_than R42 implies (for B75 being (Element of R42) holds (ex B76 being (Element of R41) st B76 c= B75))))))
proof
let R39 being non  empty  finite set;
let R41 being (a_partition of R39);
let R42 being (a_partition of R39);
assume L1298: R41 is_finer_than R42;
let C123 being (Element of R42);
consider C124 being (Equivalence_Relation of R39) such that L1299: R41 = ( Class C124 ) by EQREL_1:34;
reconsider D84 = C123 as (Subset of R39);
consider C125 being (Equivalence_Relation of R39) such that L1300: R42 = ( Class C125 ) by EQREL_1:34;
consider C126 being set such that L1301: C126 in R39 and L1302: D84 = ( Class (C125 , C126) ) by L1300 , EQREL_1:def 3;
L1303: C126 in ( Class (C124 , C126) ) by L1301 , EQREL_1:20;
reconsider D85 = ( Class (C124 , C126) ) as (Element of R41) by L1299 , L1301 , EQREL_1:def 3;
consider C127 being set such that L1304: C127 in R42 and L1305: D85 c= C127 by L1298 , SETFAM_1:def 2;
reconsider D86 = C127 as (Subset of R39) by L1304;
take D85;
L1306: (ex B77 being set st (B77 in R39 & D86 = ( Class (C125 , B77) ))) by L1300 , L1304 , EQREL_1:def 3;
thus L1307: thesis by L1306 , L1302 , L1305 , L1303 , EQREL_1:23;
end;
theorem
L1308: (for R39 being non  empty  finite set holds (for R41 being (a_partition of R39) holds (for R42 being (a_partition of R39) holds ((R41 is_finer_than R42 & ( card R41 ) = ( card R42 )) implies R41 = R42))))
proof
let R39 being non  empty  finite set;
let R41 being (a_partition of R39);
let R42 being (a_partition of R39);
defpred S7[ set , set ] means $1 c= $2;
assume that
L1309: R41 is_finer_than R42
and
L1310: ( card R41 ) = ( card R42 );
L1311: (for B78 being set holds (B78 in R41 implies (ex B79 being set st (B79 in R42 & S7[ B78 , B79 ])))) by L1309 , SETFAM_1:def 2;
consider C128 being (Function of R41 , R42) such that L1312: (for B80 being set holds (B80 in R41 implies S7[ B80 , ( C128 . B80 ) ])) from FUNCT_2:sch 1(L1311);
L1313: ( dom C128 ) = R41 by FUNCT_2:def 1;
L1314: R42 c= ( rng C128 )
proof
let C129 being set;
assume L1315: C129 in R42;
reconsider D87 = C129 as (Element of R42) by L1315;
consider C130 being (Element of R41) such that L1316: C130 c= D87 by L1309 , L1297;
reconsider D88 = ( C128 . C130 ) as (Subset of R39) by TARSKI:def 3;
L1317: C130 c= ( C128 . C130 ) by L1312;
L1318: D87 meets ( C128 . C130 )
proof
L1319: (ex B81 being (Element of R39) st B81 in C130) by L1271;
thus L1320: thesis by L1319 , L1316 , L1317 , XBOOLE_0:3;
end;
L1321: D87 = D88 by L1318 , EQREL_1:def 4;
thus L1322: thesis by L1321 , L1313 , FUNCT_1:def 3;
end;
L1323: ( rng C128 ) c= R42 by RELAT_1:def 19;
L1324: ( rng C128 ) = R42 by L1323 , L1314 , XBOOLE_0:def 10;
L1325: C128 is  one-to-one by L1324 , L1310 , L906;
L1326: (for B82 being (Element of R41) holds B82 = ( C128 . B82 ))
proof
let C131 being (Element of R41);
reconsider D89 = ( C128 . C131 ) as (Subset of R39) by TARSKI:def 3;
consider C132 being (Equivalence_Relation of R39) such that L1327: R41 = ( Class C132 ) by EQREL_1:34;
assume L1328: C131 <> ( C128 . C131 );
consider C133 being set such that L1329: ((C133 in C131 & (not C133 in ( C128 . C131 ))) or (C133 in ( C128 . C131 ) & (not C133 in C131))) by L1328 , TARSKI:1;
L1330: D89 c= R39;
L1331: C133 in ( Class (C132 , C133) ) by L1330 , L1329 , EQREL_1:20;
reconsider D90 = ( Class (C132 , C133) ) as (Element of R41) by L1330 , L1329 , L1327 , EQREL_1:def 3;
reconsider D91 = ( C128 . D90 ) as (Subset of R39) by TARSKI:def 3;
L1332: C131 c= ( C128 . C131 ) by L1312;
L1333: D90 c= ( C128 . D90 ) by L1312;
L1334: D89 meets D91 by L1333 , L1332 , L1329 , L1331 , XBOOLE_0:3;
L1335: D89 = D91 by L1334 , EQREL_1:def 4;
thus L1336: contradiction by L1335 , L1313 , L1325 , L1332 , L1329 , L1331 , FUNCT_1:def 4;
end;
L1337:
now
let C134 being set;
thus L1338:now
assume L1339: C134 in R41;
reconsider D92 = C134 as (Element of R41) by L1339;
set D93 = ( C128 . D92 );
L1340: D93 in R42;
thus L1341: C134 in R42 by L1340 , L1326;
end;
assume L1342: C134 in R42;
consider C135 being set such that L1343: C135 in ( dom C128 ) and L1344: C134 = ( C128 . C135 ) by L1342 , L1314 , FUNCT_1:def 3;
reconsider D94 = C135 as (Element of R41) by L1343 , FUNCT_2:def 1;
L1345: D94 = ( C128 . D94 ) by L1326;
thus L1346: C134 in R41 by L1345 , L1344;
end;
thus L1347: thesis by L1337 , TARSKI:1;
end;
registration
let C136 being set;
let C137 being (FinSequence of ( C136 * ));
let R12 being Nat;
cluster ( C137 /. R12 ) ->  Function-like  Relation-like;
coherence;
end;
registration
let C138 being set;
let C139 being (FinSequence of ( C138 * ));
let R12 being Nat;
cluster ( C139 /. R12 ) ->  FinSequence-like C138 -valued for Function;
coherence by FINSEQ_1:def 11;
end;
