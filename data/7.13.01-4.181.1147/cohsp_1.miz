:: Continuous, Stable, and Linear Maps of Coherence Spaces
::  by Grzegorz Bancerek
::
:: Received August 30, 1995
:: Copyright (c) 1995-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, FUNCT_1, SUBSET_1, TARSKI, COH_SP, FINSET_1, RELAT_1,
      CLASSES1, ZFMISC_1, FINSUB_1, NUMBERS, CARD_1, ARYTM_3, ARYTM_1,
      MSSUBFAM, FUNCOP_1, PBOOLE, MCART_1, CARD_3, XBOOLEAN, FINSEQ_1,
      LATTICES, EQREL_1, COHSP_1;
 notations TARSKI, XBOOLE_0, ENUMSET1, ZFMISC_1,
      XTUPLE_0, SUBSET_1, CARD_1, NUMBERS,
      REAL_1, NAT_1, MCART_1, RELAT_1, FUNCT_1, FINSEQ_1, FINSET_1, FINSUB_1,
      CLASSES1, COH_SP, PBOOLE, CARD_3, PARTFUN1, FUNCT_2, FUNCOP_1;
 constructors FINSUB_1, REAL_1, NAT_1, CARD_3, PBOOLE, BORSUK_1, COH_SP,
      XTUPLE_0;
 registrations XBOOLE_0, SUBSET_1, RELSET_1, PARTFUN1, FINSET_1, FINSUB_1,
      XREAL_0, NAT_1, FINSEQ_1, ORDINAL1, CARD_1, RELAT_1, XTUPLE_0;
 requirements NUMERALS, BOOLE, SUBSET;
 definitions XBOOLE_0, TARSKI, RELAT_1, COH_SP, CLASSES1, FINSUB_1, XTUPLE_0;
 theorems TARSKI, ENUMSET1, ZFMISC_1, RELAT_1, COH_SP, FUNCT_1, FUNCT_2,
      FINSEQ_1, FINSET_1, FINSUB_1, FUNCOP_1, MCART_1, CARD_1, CLASSES1,
      CARD_2, CARD_3, FUNCT_5, CARD_5, RELSET_1, XBOOLE_0, XBOOLE_1, XCMPLX_1,
      PARTFUN1, XTUPLE_0;
 schemes NAT_1, SUBSET_1, FUNCT_1, FINSET_1, XBOOLE_0, CARD_2;

begin
L1: (for B1 , B2 being non  empty set holds (for B3 being (Function of B1 , B2) holds (for B4 being (Element of B1) holds (for B5 being set holds (B5 in ( B3 . B4 ) implies B5 in ( union B2 )))))) by TARSKI:def 4;
definition
let C1 being set;
redefine attr C1 is  binary_complete
means
:L2: (for B6 being set holds ((for B7 , B8 being set holds ((B7 in B6 & B8 in B6) implies ( B7 \/ B8 ) in C1)) implies ( union B6 ) in C1));
compatibility
proof
thus L3: (C1 is  binary_complete implies (for B9 being set holds ((for B10 , B11 being set holds ((B10 in B9 & B11 in B9) implies ( B10 \/ B11 ) in C1)) implies ( union B9 ) in C1)))
proof
assume L4: (for B12 being set holds ((B12 c= C1 & (for B13 , B14 being set holds ((B13 in B12 & B14 in B12) implies ( B13 \/ B14 ) in C1))) implies ( union B12 ) in C1));
let C2 being set;
assume L5: (for B15 , B16 being set holds ((B15 in C2 & B16 in C2) implies ( B15 \/ B16 ) in C1));
L6: C2 c= C1
proof
let C3 being set;
assume L7: C3 in C2;
L8: ( C3 \/ C3 ) in C1 by L7 , L5;
thus L9: thesis by L8;
end;
thus L10: thesis by L6 , L4 , L5;
end;

assume L11: (for B17 being set holds ((for B18 , B19 being set holds ((B18 in B17 & B19 in B17) implies ( B18 \/ B19 ) in C1)) implies ( union B17 ) in C1));
thus L12: (for B20 being set holds ((B20 c= C1 & (for B21 , B22 being set holds ((B21 in B20 & B22 in B20) implies ( B21 \/ B22 ) in C1))) implies ( union B20 ) in C1)) by L11;
end;
end;
registration
cluster  finite for Coherence_Space;
existence by COH_SP:3;
end;
definition
let C4 being set;
func FlatCoh C4 -> set equals 
( CohSp ( id C4 ) );
correctness;
func Sub_of_Fin C4 -> (Subset of C4) means 
:L15: (for B23 being set holds (B23 in it iff (B23 in C4 & B23 is  finite)));
existence
proof
defpred S1[ set ] means $1 is  finite;
thus L16: (ex B24 being (Subset of C4) st (for B25 being set holds (B25 in B24 iff (B25 in C4 & S1[ B25 ])))) from SUBSET_1:sch 1;
end;
correctness
proof
let C5 , C6 being (Subset of C4);
assume L17: (not thesis);
consider C7 being set such that L18: (not (C7 in C5 iff C7 in C6)) by L17 , TARSKI:1;
L19: (C7 in C6 iff (not (C7 in C4 & C7 is  finite))) by L17 , L18;
thus L20: thesis by L19 , L17;
end;
end;
theorem
L22: (for B26 , B27 being set holds (B27 in ( FlatCoh B26 ) iff (B27 = ( {} ) or (ex B28 being set st (B27 = { B28 } & B28 in B26)))))
proof
let C8 , C9 being set;
thus L23:now
assume L24: C9 in ( FlatCoh C8 );
assume L25: C9 <> ( {} );
reconsider D1 = C9 as non  empty set by L25;
set D2 = the (Element of D1);
reconsider D3 = D2 as set;
take D4 = D3;
thus L26: C9 = { D4 }
proof
thus L27:now
let C10 being set;
assume L28: C10 in C9;
L29: [ D4 , C10 ] in ( id C8 ) by L28 , L24 , COH_SP:def 3;
L30: C10 = D4 by L29 , RELAT_1:def 10;
thus L31: C10 in { D4 } by L30 , TARSKI:def 1;
end;
thus L32: thesis by ZFMISC_1:31;
end;

L33: [ D4 , D4 ] in ( id C8 ) by L24 , COH_SP:def 3;
thus L34: D4 in C8 by L33 , RELAT_1:def 10;
end;
L35:
now
given C11 being set such that
L36: C9 = { C11 }
and
L37: C11 in C8;

let C12 , C13 being set;
assume L38: (C12 in C9 & C13 in C9);
L39: (C12 = C11 & C13 = C11) by L38 , L36 , TARSKI:def 1;
thus L40: [ C12 , C13 ] in ( id C8 ) by L39 , L37 , RELAT_1:def 10;
end;
assume L41: (C9 = ( {} ) or (ex B29 being set st (C9 = { B29 } & B29 in C8)));
thus L42: thesis by L41 , L35 , COH_SP:1 , COH_SP:def 3;
end;
theorem
L43: (for B30 being set holds ( union ( FlatCoh B30 ) ) = B30)
proof
let C14 being set;
thus L44:now
let C15 being set;
assume L45: C15 in ( union ( FlatCoh C14 ) );
consider C16 being set such that L46: C15 in C16 and L47: C16 in ( FlatCoh C14 ) by L45 , TARSKI:def 4;
L48: (ex B31 being set st (C16 = { B31 } & B31 in C14)) by L46 , L47 , L22;
thus L49: C15 in C14 by L48 , L46 , TARSKI:def 1;
end;
let C17 being set;
assume L50: C17 in C14;
L51: (C17 in { C17 } & { C17 } in ( FlatCoh C14 )) by L50 , L22 , TARSKI:def 1;
thus L52: thesis by L51 , TARSKI:def 4;
end;
theorem
L53: (for B32 being  finite  subset-closed set holds ( Sub_of_Fin B32 ) = B32)
proof
let C18 being  finite  subset-closed set;
thus L54: ( Sub_of_Fin C18 ) c= C18;
let C19 being set;
assume L55: C19 in C18;
L56: ( bool C19 ) c= C18
proof
let C20 being set;
assume L57: C20 in ( bool C19 );
thus L58: thesis by L57 , L55 , CLASSES1:def 1;
end;
L59: C19 is  finite by L56;
thus L60: thesis by L59 , L55 , L15;
end;
registration
cluster { ( {} ) } ->  subset-closed  binary_complete;
coherence by COH_SP:3;
let C21 being set;
cluster ( bool C21 ) ->  subset-closed  binary_complete;
coherence by COH_SP:2;
cluster ( FlatCoh C21 ) -> non  empty  subset-closed  binary_complete;
coherence;
end;
registration
let C22 being non  empty  subset-closed set;
cluster ( Sub_of_Fin C22 ) -> non  empty  subset-closed;
coherence
proof
set D5 = the (Element of C22);
L62: ( {} ) c= D5 by XBOOLE_1:2;
L63: ( {} ) in C22 by L62 , CLASSES1:def 1;
thus L64: ( Sub_of_Fin C22 ) is non  empty by L63 , L15;
let C23 , C24 being set;
assume L65: C23 in ( Sub_of_Fin C22 );
L66: C23 is  finite by L65 , L15;
assume L67: C24 c= C23;
L68: C24 in C22 by L67 , L65 , CLASSES1:def 1;
thus L69: thesis by L68 , L66 , L67 , L15;
end;
end;
theorem
L71: ( Web { ( {} ) } ) = ( {} )
proof
L72: ( union { ( {} ) } ) = ( {} ) by ZFMISC_1:25;
thus L73: thesis by L72;
end;
scheme MinimalElementwrtIncl { F1 , F2() -> set , P1[set] } : (ex B33 being set st (B33 in F2() & P1[ B33 ] & (for B34 being set holds ((B34 in F2() & P1[ B34 ] & B34 c= B33) implies B34 = B33))))
provided
L74: (F1() in F2() & P1[ F1() ])
and
L75: F1() is  finite
proof
reconsider D6 = F1() as  finite set by L75;
defpred S2[ set ] means ($1 c= F1() & P1[ $1 ]);
consider C25 being set such that L76: (for B35 being set holds (B35 in C25 iff (B35 in F2() & S2[ B35 ]))) from XBOOLE_0:sch 1;
L77: (( bool D6 ) is  finite & C25 c= ( bool D6 ))
proof
thus L78: ( bool D6 ) is  finite;
let C26 being set;
assume L79: C26 in C25;
L80: C26 c= D6 by L79 , L76;
thus L81: thesis by L80;
end;
defpred S3[ set , set ] means $1 c= $2;
L82: (for B36 , B37 being set holds ((S3[ B36 , B37 ] & S3[ B37 , B36 ]) implies B36 = B37)) by XBOOLE_0:def 10;
L83: (for B38 , B39 , B40 being set holds ((S3[ B38 , B39 ] & S3[ B39 , B40 ]) implies S3[ B38 , B40 ])) by XBOOLE_1:1;
reconsider D7 = C25 as  finite set by L77;
L84: D7 <> ( {} ) by L74 , L76;
consider C27 being set such that L85: (C27 in D7 & (for B41 being set holds ((B41 in D7 & B41 <> C27) implies (not S3[ B41 , C27 ])))) from CARD_2:sch 1(L84 , L82 , L83);
take C27;
thus L86: (C27 in F2() & P1[ C27 ]) by L76 , L85;
let C28 being set;
assume that
L87: (C28 in F2() & P1[ C28 ])
and
L88: C28 c= C27;
L89: C27 c= D6 by L76 , L85;
L90: C28 c= D6 by L89 , L88 , XBOOLE_1:1;
L91: C28 in D7 by L90 , L76 , L87;
thus L92: thesis by L91 , L85 , L88;
end;
registration
let C29 being Coherence_Space;
cluster  finite for (Element of C29);
existence
proof
reconsider D8 = ( {} ) as (Element of C29) by COH_SP:1;
take D8;
thus L93: thesis;
end;
end;
definition
let C30 being set;
attr C30 is  c=directed
means
(for B42 being  finite (Subset of C30) holds (ex B43 being set st (( union B42 ) c= B43 & B43 in C30)));
attr C30 is  c=filtered
means
(for B44 being  finite (Subset of C30) holds (ex B45 being set st ((for B46 being set holds (B46 in B44 implies B45 c= B46)) & B45 in C30)));
end;
registration
cluster  c=directed -> non  empty for set;
coherence
proof
let C31 being set;
assume L96: (for B47 being  finite (Subset of C31) holds (ex B48 being set st (( union B47 ) c= B48 & B48 in C31)));
L97: (ex B49 being set st (( union ( {} C31 ) ) c= B49 & B49 in C31)) by L96;
thus L98: thesis by L97;
end;
cluster  c=filtered -> non  empty for set;
coherence
proof
let C32 being set;
assume L99: (for B50 being  finite (Subset of C32) holds (ex B51 being set st ((for B52 being set holds (B52 in B50 implies B51 c= B52)) & B51 in C32)));
L100: (ex B53 being set st ((for B54 being set holds (B54 in ( {} C32 ) implies B53 c= B54)) & B53 in C32)) by L99;
thus L101: thesis by L100;
end;
end;
theorem
L103: (for B55 being set holds (B55 is  c=directed implies (for B56 , B57 being set holds ((B56 in B55 & B57 in B55) implies (ex B58 being set st (( B56 \/ B57 ) c= B58 & B58 in B55))))))
proof
let C33 being set;
assume L104: (for B59 being  finite (Subset of C33) holds (ex B60 being set st (( union B59 ) c= B60 & B60 in C33)));
let C34 , C35 being set;
assume L105: (C34 in C33 & C35 in C33);
L106: { C34 , C35 } is  finite  finite  finite  finite (Subset of C33) by L105 , ZFMISC_1:32;
L107: ( union { C34 , C35 } ) = ( C34 \/ C35 ) by ZFMISC_1:75;
thus L108: thesis by L107 , L104 , L106;
end;
theorem
L109: (for B61 being non  empty set holds ((for B62 , B63 being set holds ((B62 in B61 & B63 in B61) implies (ex B64 being set st (( B62 \/ B63 ) c= B64 & B64 in B61)))) implies B61 is  c=directed))
proof
let C36 being non  empty set;
assume that
L110: (for B65 , B66 being set holds ((B65 in C36 & B66 in C36) implies (ex B67 being set st (( B65 \/ B66 ) c= B67 & B67 in C36))));
set D9 = the (Element of C36);
defpred S4[ set ] means (ex B68 being set st (( union $1 ) c= B68 & B68 in C36));
let C37 being  finite (Subset of C36);
L111:
now
let C38 , C39 being set;
assume that
L112: C38 in C37
and
L113: C39 c= C37;
assume L114: S4[ C39 ];
consider C40 being set such that L115: ( union C39 ) c= C40 and L116: C40 in C36 by L114;
consider C41 being set such that L117: (( C40 \/ C38 ) c= C41 & C41 in C36) by L110 , L112 , L116;
thus L118: S4[ ( C39 \/ { C38 } ) ]
proof
take C41;
L119: ( union ( C39 \/ { C38 } ) ) = ( ( union C39 ) \/ ( union { C38 } ) ) by ZFMISC_1:78
.= ( ( union C39 ) \/ C38 ) by ZFMISC_1:25;
L120: ( union ( C39 \/ { C38 } ) ) c= ( C40 \/ C38 ) by L119 , L115 , XBOOLE_1:9;
thus L121: thesis by L120 , L117 , XBOOLE_1:1;
end;

end;
L119: ( union ( {} ) ) c= D9 by XBOOLE_1:2 , ZFMISC_1:2;
L120: S4[ ( {} ) ] by L119;
L121: C37 is  finite;
thus L122: S4[ C37 ] from FINSET_1:sch 2(L121 , L120 , L111);
end;
theorem
L123: (for B69 being set holds (B69 is  c=filtered implies (for B70 , B71 being set holds ((B70 in B69 & B71 in B69) implies (ex B72 being set st (B72 c= ( B70 /\ B71 ) & B72 in B69))))))
proof
let C42 being set;
assume L124: (for B73 being  finite (Subset of C42) holds (ex B74 being set st ((for B75 being set holds (B75 in B73 implies B74 c= B75)) & B74 in C42)));
let C43 , C44 being set;
assume L125: (C43 in C42 & C44 in C42);
L126: { C43 , C44 } c= C42 by L125 , ZFMISC_1:32;
consider C45 being set such that L127: (for B76 being set holds (B76 in { C43 , C44 } implies C45 c= B76)) and L128: C45 in C42 by L126 , L124;
take C45;
L129: C44 in { C43 , C44 } by TARSKI:def 2;
L130: C45 c= C44 by L129 , L127;
L131: C43 in { C43 , C44 } by TARSKI:def 2;
L132: C45 c= C43 by L131 , L127;
thus L133: thesis by L132 , L128 , L130 , XBOOLE_1:19;
end;
theorem
L134: (for B77 being non  empty set holds ((for B78 , B79 being set holds ((B78 in B77 & B79 in B77) implies (ex B80 being set st (B80 c= ( B78 /\ B79 ) & B80 in B77)))) implies B77 is  c=filtered))
proof
let C46 being non  empty set;
assume that
L135: (for B81 , B82 being set holds ((B81 in C46 & B82 in C46) implies (ex B83 being set st (B83 c= ( B81 /\ B82 ) & B83 in C46))));
set D10 = the (Element of C46);
defpred S5[ set ] means (ex B84 being set st ((for B85 being set holds (B85 in $1 implies B84 c= B85)) & B84 in C46));
let C47 being  finite (Subset of C46);
L136:
now
let C48 , C49 being set;
assume that
L137: C48 in C47
and
L138: C49 c= C47;
assume L139: S5[ C49 ];
consider C50 being set such that L140: (for B86 being set holds (B86 in C49 implies C50 c= B86)) and L141: C50 in C46 by L139;
consider C51 being set such that L142: C51 c= ( C50 /\ C48 ) and L143: C51 in C46 by L135 , L137 , L141;
L144: (( C50 /\ C48 ) c= C50 & ( C50 /\ C48 ) c= C48) by XBOOLE_1:17;
thus L145: S5[ ( C49 \/ { C48 } ) ]
proof
take C51;
thus L146:now
let C52 being set;
assume L147: C52 in ( C49 \/ { C48 } );
L148: (C52 in C49 or C52 in { C48 }) by L147 , XBOOLE_0:def 3;
L149: ((C50 c= C52 & C51 c= C50) or (C52 = C48 & C51 c= C48)) by L148 , L140 , L142 , L144 , TARSKI:def 1 , XBOOLE_1:1;
thus L150: C51 c= C52 by L149 , XBOOLE_1:1;
end;
thus L151: thesis by L143;
end;

end;
L146: (for B87 being set holds (B87 in ( {} ) implies D10 c= B87));
L147: S5[ ( {} ) ] by L146;
L148: C47 is  finite;
thus L149: S5[ C47 ] from FINSET_1:sch 2(L148 , L147 , L136);
end;
theorem
L150: (for B88 being set holds { B88 } is  c=directed  c=filtered)
proof
let C53 being set;
set D11 = { C53 };
thus L151:now
let C54 being  finite (Subset of D11);
take D12 = C53;
L152: ( union C54 ) c= ( union D11 ) by ZFMISC_1:77;
thus L153: (( union C54 ) c= D12 & D12 in D11) by L152 , TARSKI:def 1 , ZFMISC_1:25;
end;
let C55 being  finite (Subset of D11);
take C53;
thus L154: (for B89 being set holds (B89 in C55 implies C53 c= B89)) by TARSKI:def 1;
thus L155: thesis by TARSKI:def 1;
end;
L156:
now
let C56 , C57 being set;
thus L157: ( union { C56 , C57 , ( C56 \/ C57 ) } ) = ( union ( { C56 , C57 } \/ { ( C56 \/ C57 ) } ) ) by ENUMSET1:3
.= ( ( union { C56 , C57 } ) \/ ( union { ( C56 \/ C57 ) } ) ) by ZFMISC_1:78
.= ( ( C56 \/ C57 ) \/ ( union { ( C56 \/ C57 ) } ) ) by ZFMISC_1:75
.= ( ( C56 \/ C57 ) \/ ( C56 \/ C57 ) ) by ZFMISC_1:25
.= ( C56 \/ C57 );
end;
theorem
L158: (for B90 , B91 being set holds { B90 , B91 , ( B90 \/ B91 ) } is  c=directed)
proof
let C58 , C59 being set;
set D13 = { C58 , C59 , ( C58 \/ C59 ) };
let C60 being  finite (Subset of D13);
take D14 = ( C58 \/ C59 );
L159: ( union D13 ) = D14 by L156;
thus L160: ( union C60 ) c= D14 by L159 , ZFMISC_1:77;
thus L161: thesis by ENUMSET1:def 1;
end;
theorem
L162: (for B92 , B93 being set holds { B92 , B93 , ( B92 /\ B93 ) } is  c=filtered)
proof
let C61 , C62 being set;
let C63 being  finite (Subset of { C61 , C62 , ( C61 /\ C62 ) });
take D15 = ( C61 /\ C62 );
thus L163:now
let C64 being set;
assume L164: C64 in C63;
L165: (C64 = C61 or C64 = C62 or C64 = ( C61 /\ C62 )) by L164 , ENUMSET1:def 1;
thus L166: D15 c= C64 by L165 , XBOOLE_1:17;
end;
thus L167: thesis by ENUMSET1:def 1;
end;
registration
cluster  c=directed  c=filtered  finite for set;
existence
proof
take { ( {} ) };
thus L168: thesis by L150;
end;
end;
registration
let C65 being non  empty set;
cluster  c=directed  c=filtered  finite for (Subset of C65);
existence
proof
set D16 = the (Element of C65);
L170: ({ D16 } is (Subset of C65) & { D16 } is  c=directed  c=filtered  finite) by L150 , ZFMISC_1:31;
thus L171: thesis by L170;
end;
end;
theorem
L173: (for B94 being set holds ( Fin B94 ) is  c=directed  c=filtered)
proof
let C66 being set;
L174:
now
let C67 , C68 being set;
assume L175: (C67 in ( Fin C66 ) & C68 in ( Fin C66 ));
take D17 = ( C67 \/ C68 );
thus L176: ( C67 \/ C68 ) c= D17;
L177: (C67 c= C66 & C68 c= C66) by L175 , FINSUB_1:def 5;
L178: ( C67 \/ C68 ) c= C66 by L177 , XBOOLE_1:8;
thus L179: D17 in ( Fin C66 ) by L178 , L175 , FINSUB_1:def 5;
end;
thus L180: ( Fin C66 ) is  c=directed by L174 , L109;
L181:
now
reconsider D18 = ( {} ) as set;
let C69 , C70 being set;
assume that
L182: C69 in ( Fin C66 )
and
L183: C70 in ( Fin C66 );
take D19 = D18;
thus L184: D19 c= ( C69 /\ C70 ) by XBOOLE_1:2;
thus L185: D19 in ( Fin C66 ) by FINSUB_1:7;
end;
thus L186: thesis by L181 , L134;
end;
registration
let C71 being set;
cluster ( Fin C71 ) ->  c=directed  c=filtered;
coherence by L173;
end;
L188:
now
let C72 being  subset-closed non  empty set;
let C73 being (Element of C72);
thus L189: ( Fin C73 ) c= C72
proof
let C74 being set;
assume L190: C74 in ( Fin C73 );
L191: C74 c= C73 by L190 , FINSUB_1:def 5;
thus L192: thesis by L191 , CLASSES1:def 1;
end;

end;
registration
let C75 being  subset-closed non  empty set;
cluster  preBoolean non  empty for (Subset of C75);
existence
proof
set D20 = the (Element of C75);
reconsider D21 = ( Fin D20 ) as (Subset of C75) by L188;
take D21;
thus L190: thesis;
end;
end;
definition
let C76 being  subset-closed non  empty set;
let C77 being (Element of C76);
redefine func Fin C77 ->  preBoolean non  empty (Subset of C76);

coherence
proof
L192: ( Fin C77 ) c= C76
proof
let C78 being set;
assume L193: C78 in ( Fin C77 );
L194: C78 c= C77 by L193 , FINSUB_1:def 5;
thus L195: thesis by L194 , CLASSES1:def 1;
end;
thus L196: thesis by L192;
end;
end;
theorem
L198: (for B95 being non  empty set holds (for B96 being set holds ((B95 is  c=directed & B96 c= ( union B95 ) & B96 is  finite) implies (ex B97 being set st (B97 in B95 & B96 c= B97)))))
proof
let C79 being non  empty set;
let C80 being set;
set D22 = the (Element of C79);
defpred S6[ (Element of ( NAT )) ] means (for B98 being set holds ((B98 c= ( union C79 ) & B98 is  finite & ( card B98 ) = $1) implies (ex B99 being set st (B99 in C79 & B98 c= B99))));
assume L199: C79 is  c=directed;
L200:
now
let C81 being (Element of ( NAT ));
assume L201: S6[ C81 ];
thus L202: S6[ ( C81 + 1 ) ]
proof
let C82 being set;
assume that
L203: C82 c= ( union C79 )
and
L204: C82 is  finite
and
L205: ( card C82 ) = ( C81 + 1 );
reconsider D23 = C82 as non  empty set by L205;
set D24 = the (Element of D23);
L206: ( C82 \ { D24 } ) c= ( union C79 ) by L203 , XBOOLE_1:1;
L207: D24 in C82;
consider C83 being set such that L208: D24 in C83 and L209: C83 in C79 by L207 , L203 , TARSKI:def 4;
L210: ( ( C81 + 1 ) - 1 ) = C81 by XCMPLX_1:26;
L211: ({ D24 } c= C82 & ( card { D24 } ) = 1) by CARD_1:30 , ZFMISC_1:31;
L212: ( card ( C82 \ { D24 } ) ) = C81 by L211 , L204 , L205 , L210 , CARD_2:44;
consider C84 being set such that L213: C84 in C79 and L214: ( C82 \ { D24 } ) c= C84 by L212 , L201 , L204 , L206;
consider C85 being set such that L215: ( C84 \/ C83 ) c= C85 and L216: C85 in C79 by L199 , L213 , L209 , L103;
take C85;
thus L217: C85 in C79 by L216;
thus L218: C82 c= C85
proof
let C86 being set;
L219: (C86 in { D24 } or (not C86 in { D24 }));
assume L220: C86 in C82;
L221: (C86 = D24 or C86 in ( C82 \ { D24 } )) by L220 , L219 , TARSKI:def 1 , XBOOLE_0:def 5;
L222: C86 in ( C84 \/ C83 ) by L221 , L214 , L208 , XBOOLE_0:def 3;
thus L223: thesis by L222 , L215;
end;

end;

end;
L203: S6[ ( 0 ) ]
proof
let C87 being set;
assume that
L204: C87 c= ( union C79 )
and
L205: C87 is  finite
and
L206: ( card C87 ) = ( 0 );
L207: C87 = ( {} ) by L206;
L208: C87 c= D22 by L207 , XBOOLE_1:2;
thus L209: thesis by L208;
end;
L210: (for B100 being (Element of ( NAT )) holds S6[ B100 ]) from NAT_1:sch 1(L203 , L200);
assume that
L211: C80 c= ( union C79 )
and
L212: C80 is  finite;
reconsider D25 = C80 as  finite set by L212;
L213: ( card C80 ) = ( card D25 );
thus L214: thesis by L213 , L210 , L211;
end;
notation
let C88 being set;
synonym C88 is  multiplicative for C88 is  cap-closed;
end;
definition
let C89 being set;
attr C89 is  d.union-closed
means
:L216: (for B101 being (Subset of C89) holds (B101 is  c=directed implies ( union B101 ) in C89));
end;
registration
cluster  subset-closed ->  multiplicative for set;
coherence
proof
let C90 being set;
assume that
L218: C90 is  subset-closed;
let C91 , C92 being set;
L219: ( C91 /\ C92 ) c= C91 by XBOOLE_1:17;
thus L220: thesis by L219 , L218 , CLASSES1:def 1;
end;
end;
theorem
L222: (for B102 being Coherence_Space holds (for B103 being  c=directed (Subset of B102) holds ( union B103 ) in B102))
proof
let C93 being Coherence_Space;
let C94 being  c=directed (Subset of C93);
L223:
now
let C95 , C96 being set;
assume L224: (C95 in C94 & C96 in C94);
L225: (ex B104 being set st (( C95 \/ C96 ) c= B104 & B104 in C94)) by L224 , L103;
thus L226: ( C95 \/ C96 ) in C93 by L225 , CLASSES1:def 1;
end;
thus L227: thesis by L223 , L2;
end;
registration
cluster  ->  d.union-closed for Coherence_Space;
coherence
proof
let C97 being Coherence_Space;
let C98 being (Subset of C97);
thus L228: thesis by L222;
end;
end;
registration
cluster  multiplicative  d.union-closed for Coherence_Space;
existence
proof
set D26 = the Coherence_Space;
take D26;
thus L230: thesis;
end;
end;
definition
let C99 being  d.union-closed non  empty set;
let C100 being  c=directed (Subset of C99);
redefine func union C100 -> (Element of C99);

coherence by L216;
end;
definition
let C101 , C102 being set;
pred C101 includes_lattice_of C102
means
(for B105 , B106 being set holds ((B105 in C102 & B106 in C102) implies (( B105 /\ B106 ) in C101 & ( B105 \/ B106 ) in C101)))
;end;
theorem
L234: (for B107 being non  empty set holds (B107 includes_lattice_of B107 implies B107 is  c=directed  c=filtered))
proof
let C103 being non  empty set;
assume that
L235: (for B108 , B109 being set holds ((B108 in C103 & B109 in C103) implies (( B108 /\ B109 ) in C103 & ( B108 \/ B109 ) in C103)));
L236: (for B110 , B111 being set holds ((B110 in C103 & B111 in C103) implies (ex B112 being set st (( B110 \/ B111 ) c= B112 & B112 in C103)))) by L235;
thus L237: C103 is  c=directed by L236 , L109;
L238: (for B113 , B114 being set holds ((B113 in C103 & B114 in C103) implies (ex B115 being set st (B115 c= ( B113 /\ B114 ) & B115 in C103)))) by L235;
thus L239: thesis by L238 , L134;
end;
definition
let C104 , C105 , C106 being set;
pred C104 includes_lattice_of C105 , C106
means
C104 includes_lattice_of { C105 , C106 }
;end;
theorem
L241: (for B116 , B117 , B118 being set holds (B116 includes_lattice_of B117 , B118 iff (B117 in B116 & B118 in B116 & ( B117 /\ B118 ) in B116 & ( B117 \/ B118 ) in B116)))
proof
let C107 , C108 , C109 being set;
thus L242: (C107 includes_lattice_of C108 , C109 implies (C108 in C107 & C109 in C107 & ( C108 /\ C109 ) in C107 & ( C108 \/ C109 ) in C107))
proof
L243: (( C108 \/ C108 ) = C108 & ( C109 \/ C109 ) = C109);
L244: (C108 in { C108 , C109 } & C109 in { C108 , C109 }) by TARSKI:def 2;
assume L245: (for B119 , B120 being set holds ((B119 in { C108 , C109 } & B120 in { C108 , C109 }) implies (( B119 /\ B120 ) in C107 & ( B119 \/ B120 ) in C107)));
thus L246: thesis by L245 , L244 , L243;
end;

assume L247: (C108 in C107 & C109 in C107 & ( C108 /\ C109 ) in C107 & ( C108 \/ C109 ) in C107);
let C110 , C111 being set;
assume that
L248: C110 in { C108 , C109 }
and
L249: C111 in { C108 , C109 };
L250: (C111 = C108 or C111 = C109) by L249 , TARSKI:def 2;
L251: (C110 = C108 or C110 = C109) by L248 , TARSKI:def 2;
thus L252: thesis by L251 , L247 , L250;
end;
begin
definition
let C112 being Function;
attr C112 is  union-distributive
means
:L253: (for B121 being (Subset of ( dom C112 )) holds (( union B121 ) in ( dom C112 ) implies ( C112 . ( union B121 ) ) = ( union ( C112 .: B121 ) )));
attr C112 is  d.union-distributive
means
:L254: (for B122 being (Subset of ( dom C112 )) holds ((B122 is  c=directed & ( union B122 ) in ( dom C112 )) implies ( C112 . ( union B122 ) ) = ( union ( C112 .: B122 ) )));
end;
definition
let C113 being Function;
attr C113 is  c=-monotone
means
:L256: (for B123 , B124 being set holds ((B123 in ( dom C113 ) & B124 in ( dom C113 ) & B123 c= B124) implies ( C113 . B123 ) c= ( C113 . B124 )));
attr C113 is  cap-distributive
means
:L257: (for B125 , B126 being set holds (( dom C113 ) includes_lattice_of B125 , B126 implies ( C113 . ( B125 /\ B126 ) ) = ( ( C113 . B125 ) /\ ( C113 . B126 ) )));
end;
registration
cluster  d.union-distributive ->  c=-monotone for Function;
coherence
proof
let C114 being Function;
assume L259: (for B127 being (Subset of ( dom C114 )) holds ((B127 is  c=directed & ( union B127 ) in ( dom C114 )) implies ( C114 . ( union B127 ) ) = ( union ( C114 .: B127 ) )));
let C115 , C116 being set;
assume that
L260: C115 in ( dom C114 )
and
L261: C116 in ( dom C114 )
and
L262: C115 c= C116;
reconsider D27 = { C115 , C116 } as (Subset of ( dom C114 )) by L260 , L261 , ZFMISC_1:32;
L263: D27 is  c=directed
proof
let C117 being  finite (Subset of D27);
take C116;
L264: ( union C117 ) c= ( union D27 ) by ZFMISC_1:77;
L265: ( union C117 ) c= ( C115 \/ C116 ) by L264 , ZFMISC_1:75;
thus L266: thesis by L265 , L262 , TARSKI:def 2 , XBOOLE_1:12;
end;
L267: C115 in D27 by TARSKI:def 2;
L268: ( C114 . C115 ) in ( C114 .: D27 ) by L267 , FUNCT_1:def 6;
L269: ( union D27 ) = ( C115 \/ C116 ) by ZFMISC_1:75
.= C116 by L262 , XBOOLE_1:12;
L270: ( union ( C114 .: D27 ) ) = ( C114 . C116 ) by L269 , L259 , L261 , L263;
thus L271: thesis by L270 , L268 , ZFMISC_1:74;
end;
cluster  union-distributive ->  d.union-distributive for Function;
coherence
proof
let C118 being Function;
assume L272: (for B128 being (Subset of ( dom C118 )) holds (( union B128 ) in ( dom C118 ) implies ( C118 . ( union B128 ) ) = ( union ( C118 .: B128 ) )));
let C119 being (Subset of ( dom C118 ));
thus L273: thesis by L272;
end;
end;
theorem
L275: (for B129 being Function holds (B129 is  union-distributive implies (for B130 , B131 being set holds ((B130 in ( dom B129 ) & B131 in ( dom B129 ) & ( B130 \/ B131 ) in ( dom B129 )) implies ( B129 . ( B130 \/ B131 ) ) = ( ( B129 . B130 ) \/ ( B129 . B131 ) )))))
proof
let C120 being Function;
assume that
L276: C120 is  union-distributive;
let C121 , C122 being set;
set D28 = { C121 , C122 };
assume that
L277: (C121 in ( dom C120 ) & C122 in ( dom C120 ))
and
L278: ( C121 \/ C122 ) in ( dom C120 );
L279: ( union D28 ) = ( C121 \/ C122 ) by ZFMISC_1:75;
L280: D28 c= ( dom C120 ) by L277 , ZFMISC_1:32;
thus L281: ( C120 . ( C121 \/ C122 ) ) = ( union ( C120 .: D28 ) ) by L280 , L276 , L278 , L279 , L253
.= ( union { ( C120 . C121 ) , ( C120 . C122 ) } ) by L277 , FUNCT_1:60
.= ( ( C120 . C121 ) \/ ( C120 . C122 ) ) by ZFMISC_1:75;
end;
theorem
L282: (for B132 being Function holds (B132 is  union-distributive implies ( B132 . ( {} ) ) = ( {} )))
proof
let C123 being Function;
assume that
L283: (for B133 being (Subset of ( dom C123 )) holds (( union B133 ) in ( dom C123 ) implies ( C123 . ( union B133 ) ) = ( union ( C123 .: B133 ) )));
L284: (( {} ) c= ( dom C123 ) & ( C123 .: ( {} ) ) = ( {} )) by XBOOLE_1:2;
L285: ((not ( {} ) in ( dom C123 )) implies ( C123 . ( {} ) ) = ( {} )) by FUNCT_1:def 2;
thus L286: thesis by L285 , L283 , L284 , ZFMISC_1:2;
end;
registration
let C124 , C125 being Coherence_Space;
cluster  union-distributive  cap-distributive for (Function of C124 , C125);
existence
proof
reconsider D29 = ( {} ) as (Element of C125) by COH_SP:1;
take D30 = ( C124 --> D29 );
L287: ( dom D30 ) = C124 by FUNCOP_1:13;
thus L288: D30 is  union-distributive
proof
let C126 being (Subset of ( dom D30 ));
assume L289: ( union C126 ) in ( dom D30 );
L290: ( D30 . ( union C126 ) ) = ( {} ) by L289 , L287 , FUNCOP_1:7;
L291: ( D30 .: C126 ) c= { ( {} ) }
proof
let C127 being set;
assume L292: C127 in ( D30 .: C126 );
L293: (ex B134 being set st (B134 in ( dom D30 ) & B134 in C126 & C127 = ( D30 . B134 ))) by L292 , FUNCT_1:def 6;
L294: C127 = ( {} ) by L293 , L287 , FUNCOP_1:7;
thus L295: thesis by L294 , TARSKI:def 1;
end;
L296: ( union ( D30 .: C126 ) ) c= ( union { ( {} ) } ) by L291 , ZFMISC_1:77;
L297: ( union { ( {} ) } ) = ( {} ) by ZFMISC_1:25;
thus L298: thesis by L297 , L290 , L296;
end;

let C128 , C129 being set;
assume L299: ( dom D30 ) includes_lattice_of C128 , C129;
L300: C128 in ( dom D30 ) by L299 , L241;
L301: ( D30 . C128 ) = ( {} ) by L300 , L287 , FUNCOP_1:7;
L302: ( C128 /\ C129 ) in ( dom D30 ) by L299 , L241;
thus L303: thesis by L302 , L287 , L301 , FUNCOP_1:7;
end;
end;
registration
let C130 being Coherence_Space;
cluster  union-distributive  cap-distributive for (ManySortedSet of C130);
existence
proof
set D31 = the  union-distributive  cap-distributive (Function of C130 , C130);
L305: ( dom D31 ) = C130 by FUNCT_2:52;
reconsider D32 = D31 as (ManySortedSet of C130) by L305 , PARTFUN1:def 2;
take D32;
thus L306: thesis;
end;
end;
definition
let C131 being Function;
attr C131 is  U-continuous
means
:L308: (( dom C131 ) is  d.union-closed & C131 is  d.union-distributive);
end;
definition
let C132 being Function;
attr C132 is  U-stable
means
:L310: (( dom C132 ) is  multiplicative & C132 is  U-continuous  cap-distributive);
end;
definition
let C133 being Function;
attr C133 is  U-linear
means
:L312: C133 is  U-stable  union-distributive;
end;
registration
cluster  U-continuous ->  d.union-distributive for Function;
coherence by L308;
cluster  U-stable ->  cap-distributive  U-continuous for Function;
coherence by L310;
cluster  U-linear ->  union-distributive  U-stable for Function;
coherence by L312;
end;
registration
let C134 being  d.union-closed set;
cluster  d.union-distributive ->  U-continuous for (ManySortedSet of C134);
coherence
proof
let C135 being (ManySortedSet of C134);
L315: ( dom C135 ) = C134 by PARTFUN1:def 2;
thus L316: thesis by L315 , L308;
end;
end;
registration
let C136 being  multiplicative set;
cluster  U-continuous  cap-distributive ->  U-stable for (ManySortedSet of C136);
coherence
proof
let C137 being (ManySortedSet of C136);
L318: ( dom C137 ) = C136 by PARTFUN1:def 2;
thus L319: thesis by L318 , L310;
end;
end;
registration
cluster  U-stable  union-distributive ->  U-linear for Function;
coherence by L312;
end;
registration
cluster  U-linear for Function;
existence
proof
set D33 = the Coherence_Space;
set D34 = the  union-distributive  cap-distributive (ManySortedSet of D33);
take D34;
thus L322: thesis;
end;
let C138 being Coherence_Space;
cluster  U-linear for (ManySortedSet of C138);
existence
proof
set D35 = the  union-distributive  cap-distributive (ManySortedSet of C138);
take D35;
thus L323: thesis;
end;
let C139 being Coherence_Space;
cluster  U-linear for (Function of C139 , C138);
existence
proof
set D36 = the  union-distributive  cap-distributive (Function of C139 , C138);
take D36;
L324: ( dom D36 ) = C139 by FUNCT_2:def 1;
reconsider D37 = D36 as  union-distributive  cap-distributive (ManySortedSet of C139) by L324 , PARTFUN1:def 2;
L325: D37 is  U-linear;
thus L326: thesis by L325;
end;
end;
registration
let C140 being  U-continuous Function;
cluster ( dom C140 ) ->  d.union-closed;
coherence by L308;
end;
registration
let C141 being  U-stable Function;
cluster ( dom C141 ) ->  multiplicative;
coherence by L310;
end;
theorem
L330: (for B135 being set holds ( union ( Fin B135 ) ) = B135)
proof
let C142 being set;
L331: ( union ( Fin C142 ) ) c= ( union ( bool C142 ) ) by FINSUB_1:13 , ZFMISC_1:77;
thus L332: ( union ( Fin C142 ) ) c= C142 by L331 , ZFMISC_1:81;
let C143 being set;
assume L333: C143 in C142;
L334: { C143 } c= C142 by L333 , ZFMISC_1:31;
L335: { C143 } in ( Fin C142 ) by L334 , FINSUB_1:def 5;
L336: C143 in { C143 } by TARSKI:def 1;
thus L337: thesis by L336 , L335 , TARSKI:def 4;
end;
theorem
L338: (for B136 being  U-continuous Function holds (( dom B136 ) is  subset-closed implies (for B137 being set holds (B137 in ( dom B136 ) implies ( B136 . B137 ) = ( union ( B136 .: ( Fin B137 ) ) )))))
proof
let C144 being  U-continuous Function;
assume that
L339: ( dom C144 ) is  subset-closed;
let C145 being set;
assume L340: C145 in ( dom C144 );
reconsider D38 = ( dom C144 ) as  d.union-closed  subset-closed non  empty set by L340 , L339;
reconsider D39 = C145 as (Element of D38) by L340;
L341: ( C144 . D39 ) = ( C144 . ( union ( Fin D39 ) ) ) by L330;
thus L342: thesis by L341 , L254;
end;
theorem
L343: (for B138 being Function holds (( dom B138 ) is  subset-closed implies (B138 is  U-continuous iff (( dom B138 ) is  d.union-closed & B138 is  c=-monotone & (for B139 , B140 being set holds ((B139 in ( dom B138 ) & B140 in ( B138 . B139 )) implies (ex B141 being set st (B141 is  finite & B141 c= B139 & B140 in ( B138 . B141 )))))))))
proof
let C146 being Function;
assume that
L344: ( dom C146 ) is  subset-closed;
thus L345:now
assume L346: C146 is  U-continuous;
thus L347: (( dom C146 ) is  d.union-closed & C146 is  c=-monotone) by L346;
reconsider D40 = ( dom C146 ) as  d.union-closed  subset-closed set by L344 , L346;
let C147 , C148 being set;
assume that
L348: C147 in ( dom C146 )
and
L349: C148 in ( C146 . C147 );
reconsider D41 = { B142 where B142 is (Subset of C147) : B142 is  finite } as set;
L350: D41 is  c=directed
proof
let C149 being  finite (Subset of D41);
take ( union C149 );
L351:
now
let C150 being set;
assume L352: C150 in C149;
L353: C150 in D41 by L352;
L354: (ex B143 being (Subset of C147) st (C150 = B143 & B143 is  finite)) by L353;
thus L355: C150 c= C147 by L354;
end;
L356: ( union C149 ) c= C147 by L351 , ZFMISC_1:76;
L357:
now
let C151 being set;
assume L358: C151 in C149;
L359: C151 in D41 by L358;
L360: (ex B144 being (Subset of C147) st (C151 = B144 & B144 is  finite)) by L359;
thus L361: C151 is  finite by L360;
end;
L362: ( union C149 ) is  finite by L357 , FINSET_1:7;
thus L363: thesis by L362 , L356;
end;
L364: ( union D41 ) = C147
proof
thus L365: ( union D41 ) c= C147
proof
let C152 being set;
assume L366: C152 in ( union D41 );
consider C153 being set such that L367: C152 in C153 and L368: C153 in D41 by L366 , TARSKI:def 4;
L369: (ex B145 being (Subset of C147) st (C153 = B145 & B145 is  finite)) by L368;
thus L370: thesis by L369 , L367;
end;

let C154 being set;
assume L371: C154 in C147;
L372: { C154 } c= C147 by L371 , ZFMISC_1:31;
L373: (C154 in { C154 } & { C154 } in D41) by L372 , TARSKI:def 1;
thus L374: thesis by L373 , TARSKI:def 4;
end;
L375: D41 c= D40
proof
let C155 being set;
assume L376: C155 in D41;
L377: (ex B146 being (Subset of C147) st (C155 = B146 & B146 is  finite)) by L376;
thus L378: thesis by L377 , L348 , CLASSES1:def 1;
end;
L379: ( union D41 ) in D40 by L375 , L350 , L216;
L380: ( C146 . ( union D41 ) ) = ( union ( C146 .: D41 ) ) by L379 , L346 , L350 , L375 , L254;
consider C156 being set such that L381: C148 in C156 and L382: C156 in ( C146 .: D41 ) by L380 , L349 , L364 , TARSKI:def 4;
consider C157 being set such that L383: C157 in ( dom C146 ) and L384: C157 in D41 and L385: C156 = ( C146 . C157 ) by L382 , FUNCT_1:def 6;
take D42 = C157;
L386: (ex B147 being (Subset of C147) st (D42 = B147 & B147 is  finite)) by L384;
thus L387: (D42 is  finite & D42 c= C147 & C148 in ( C146 . D42 )) by L386 , L381 , L385;
end;
assume L388: ( dom C146 ) is  d.union-closed;
reconsider D43 = ( dom C146 ) as  d.union-closed set by L388;
assume that
L389: (for B148 , B149 being set holds ((B148 in ( dom C146 ) & B149 in ( dom C146 ) & B148 c= B149) implies ( C146 . B148 ) c= ( C146 . B149 )))
and
L390: (for B150 , B151 being set holds ((B150 in ( dom C146 ) & B151 in ( C146 . B150 )) implies (ex B152 being set st (B152 is  finite & B152 c= B150 & B151 in ( C146 . B152 )))));
L391: D43 is  d.union-closed;
thus L392: ( dom C146 ) is  d.union-closed by L391;
thus L393: C146 is  d.union-distributive
proof
let C158 being (Subset of ( dom C146 ));
assume that
L394: C158 is  c=directed
and
L395: ( union C158 ) in ( dom C146 );
reconsider D44 = C158 as (Subset of D43);
thus L396: ( C146 . ( union C158 ) ) c= ( union ( C146 .: C158 ) )
proof
let C159 being set;
assume L397: C159 in ( C146 . ( union C158 ) );
consider C160 being set such that L398: (C160 is  finite & C160 c= ( union D44 )) and L399: C159 in ( C146 . C160 ) by L397 , L390 , L395;
consider C161 being set such that L400: C161 in C158 and L401: C160 c= C161 by L394 , L398 , L198;
L402: C160 in D43 by L344 , L400 , L401 , CLASSES1:def 1;
L403: ( C146 . C160 ) c= ( C146 . C161 ) by L402 , L389 , L400 , L401;
L404: ( C146 . C161 ) in ( C146 .: C158 ) by L400 , FUNCT_1:def 6;
thus L405: thesis by L404 , L399 , L403 , TARSKI:def 4;
end;

let C162 being set;
assume L406: C162 in ( union ( C146 .: C158 ) );
consider C163 being set such that L407: C162 in C163 and L408: C163 in ( C146 .: C158 ) by L406 , TARSKI:def 4;
L409: (ex B153 being set st (B153 in ( dom C146 ) & B153 in C158 & C163 = ( C146 . B153 ))) by L408 , FUNCT_1:def 6;
L410: C163 c= ( C146 . ( union D44 ) ) by L409 , L389 , L395 , ZFMISC_1:74;
thus L411: thesis by L410 , L407;
end;

end;
theorem
L394: (for B154 being Function holds (( dom B154 ) is  subset-closed  d.union-closed implies (B154 is  U-stable iff (B154 is  c=-monotone & (for B155 , B156 being set holds ((B155 in ( dom B154 ) & B156 in ( B154 . B155 )) implies (ex B157 being set st (B157 is  finite & B157 c= B155 & B156 in ( B154 . B157 ) & (for B158 being set holds ((B158 c= B155 & B156 in ( B154 . B158 )) implies B157 c= B158))))))))))
proof
let C164 being Function;
assume that
L395: ( dom C164 ) is  subset-closed  d.union-closed;
reconsider D45 = ( dom C164 ) as  subset-closed  d.union-closed set by L395;
thus L396:now
assume L397: C164 is  U-stable;
reconsider D46 = C164 as  U-stable Function by L397;
L398: ( dom D46 ) is  multiplicative;
thus L399: C164 is  c=-monotone by L398;
defpred S7[ set , set ] means $1 c= $2;
let C165 , C166 being set;
set D47 = ( dom D46 );
assume that
L400: C165 in ( dom C164 )
and
L401: C166 in ( C164 . C165 );
consider C167 being set such that L402: C167 is  finite and L403: C167 c= C165 and L404: C166 in ( D46 . C167 ) by L395 , L400 , L401 , L343;
L405: C167 c= C167;
L406: C167 in { B159 where B159 is (Subset of C167) : C166 in ( C164 . B159 ) } by L405 , L404;
reconsider D48 = { B160 where B160 is (Subset of C167) : C166 in ( C164 . B160 ) } as non  empty set by L406;
L407: (( bool C167 ) is  finite & D48 c= ( bool C167 ))
proof
thus L408: ( bool C167 ) is  finite by L402;
let C168 being set;
assume L409: C168 in D48;
L410: (ex B161 being (Subset of C167) st (C168 = B161 & C166 in ( C164 . B161 ))) by L409;
thus L411: thesis by L410;
end;
L412: (for B162 , B163 , B164 being set holds ((S7[ B162 , B163 ] & S7[ B163 , B164 ]) implies S7[ B162 , B164 ])) by XBOOLE_1:1;
L413: (for B165 , B166 being set holds ((S7[ B165 , B166 ] & S7[ B166 , B165 ]) implies B165 = B166)) by XBOOLE_0:def 10;
reconsider D49 = D48 as  finite non  empty set by L407;
L414: D49 <> ( {} );
consider C169 being set such that L415: (C169 in D49 & (for B167 being set holds ((B167 in D49 & B167 <> C169) implies (not S7[ B167 , C169 ])))) from CARD_2:sch 1(L414 , L413 , L412);
L416: (ex B168 being (Subset of C167) st (C169 = B168 & C166 in ( C164 . B168 ))) by L415;
reconsider D50 = C169 as (Subset of C167) by L416;
reconsider D51 = D50 as  finite (Subset of C167) by L402;
take D52 = C169;
L417: (ex B169 being (Subset of C167) st (D52 = B169 & C166 in ( C164 . B169 ))) by L415;
thus L418: (D52 is  finite & D52 c= C165 & C166 in ( C164 . D52 )) by L417 , L402 , L403 , XBOOLE_1:1;
L419: D51 in D47 by L418 , L395 , L400 , CLASSES1:def 1;
let C170 being set;
assume that
L420: C170 c= C165
and
L421: C166 in ( C164 . C170 );
L422: C170 in D47 by L395 , L400 , L420 , CLASSES1:def 1;
L423: ( D52 \/ C170 ) c= C165 by L418 , L420 , XBOOLE_1:8;
L424: ( D52 \/ C170 ) in ( dom C164 ) by L423 , L395 , L400 , CLASSES1:def 1;
L425: ( D52 /\ C170 ) c= D51 by XBOOLE_1:17;
L426: ( D52 /\ C170 ) in ( dom C164 ) by L425 , L395 , L419 , CLASSES1:def 1;
L427: ( dom C164 ) includes_lattice_of D52 , C170 by L426 , L419 , L422 , L424 , L241;
L428: ( C164 . ( D52 /\ C170 ) ) = ( ( C164 . D52 ) /\ ( C164 . C170 ) ) by L427 , L419 , L257;
L429: C166 in ( C164 . ( D52 /\ C170 ) ) by L428 , L417 , L421 , XBOOLE_0:def 4;
L430: ( D52 /\ C170 ) is  finite  finite  finite  finite (Subset of C167) by L425 , XBOOLE_1:1;
L431: (( D52 /\ C170 ) c= C170 & ( D52 /\ C170 ) in D49) by L430 , L429 , XBOOLE_1:17;
thus L432: D52 c= C170 by L431 , L415 , XBOOLE_1:17;
end;
assume that
L433: C164 is  c=-monotone
and
L434: (for B170 , B171 being set holds ((B170 in ( dom C164 ) & B171 in ( C164 . B170 )) implies (ex B172 being set st (B172 is  finite & B172 c= B170 & B171 in ( C164 . B172 ) & (for B173 being set holds ((B173 c= B170 & B171 in ( C164 . B173 )) implies B172 c= B173))))));
L435: D45 is  subset-closed  subset-closed  subset-closed  subset-closed set;
thus L436: ( dom C164 ) is  multiplicative by L435;
L437:
now
let C171 , C172 being set;
assume L438: (C171 in ( dom C164 ) & C172 in ( C164 . C171 ));
L439: (ex B174 being set st (B174 is  finite & B174 c= C171 & C172 in ( C164 . B174 ) & (for B175 being set holds ((B175 c= C171 & C172 in ( C164 . B175 )) implies B174 c= B175)))) by L438 , L434;
thus L440: (ex B176 being set st (B176 is  finite & B176 c= C171 & C172 in ( C164 . B176 ))) by L439;
end;
thus L441: C164 is  U-continuous by L437 , L395 , L433 , L343;
thus L442: C164 is  cap-distributive
proof
let C173 , C174 being set;
L443: ( C173 /\ C174 ) c= C174 by XBOOLE_1:17;
assume L444: ( dom C164 ) includes_lattice_of C173 , C174;
L445: ( C173 /\ C174 ) in ( dom C164 ) by L444 , L241;
L446: C174 in ( dom C164 ) by L444 , L241;
L447: ( C164 . ( C173 /\ C174 ) ) c= ( C164 . C174 ) by L446 , L433 , L445 , L443 , L256;
L448: C173 in ( dom C164 ) by L444 , L241;
L449: ( C173 /\ C174 ) c= C173 by XBOOLE_1:17;
L450: ( C164 . ( C173 /\ C174 ) ) c= ( C164 . C173 ) by L449 , L433 , L448 , L445 , L256;
thus L451: ( C164 . ( C173 /\ C174 ) ) c= ( ( C164 . C173 ) /\ ( C164 . C174 ) ) by L450 , L447 , XBOOLE_1:19;
let C175 being set;
assume L452: C175 in ( ( C164 . C173 ) /\ ( C164 . C174 ) );
L453: C175 in ( C164 . C173 ) by L452 , XBOOLE_0:def 4;
L454: ( C173 \/ C174 ) in ( dom C164 ) by L444 , L241;
L455: C173 c= ( C173 \/ C174 ) by XBOOLE_1:7;
L456: ( C164 . C173 ) c= ( C164 . ( C173 \/ C174 ) ) by L455 , L433 , L448 , L454 , L256;
consider C176 being set such that L457: C176 is  finite and L458: C176 c= ( C173 \/ C174 ) and L459: C175 in ( C164 . C176 ) and L460: (for B177 being set holds ((B177 c= ( C173 \/ C174 ) & C175 in ( C164 . B177 )) implies C176 c= B177)) by L456 , L434 , L454 , L453;
L461: C176 c= C173 by L453 , L460 , XBOOLE_1:7;
L462: C175 in ( C164 . C174 ) by L452 , XBOOLE_0:def 4;
L463: C176 c= C174 by L462 , L460 , XBOOLE_1:7;
L464: C176 c= ( C173 /\ C174 ) by L463 , L461 , XBOOLE_1:19;
L465: D45 = ( dom C164 );
L466: C176 in ( dom C164 ) by L465 , L448 , L461 , CLASSES1:def 1;
L467: ( C164 . C176 ) c= ( C164 . ( C173 /\ C174 ) ) by L466 , L433 , L445 , L464 , L256;
thus L468: thesis by L467 , L459;
end;

end;
theorem
L443: (for B178 being Function holds (( dom B178 ) is  subset-closed  d.union-closed implies (B178 is  U-linear iff (B178 is  c=-monotone & (for B179 , B180 being set holds ((B179 in ( dom B178 ) & B180 in ( B178 . B179 )) implies (ex B181 being set st (B181 in B179 & B180 in ( B178 . { B181 } ) & (for B182 being set holds ((B182 c= B179 & B180 in ( B178 . B182 )) implies B181 in B182))))))))))
proof
let C177 being Function;
assume L444: ( dom C177 ) is  subset-closed  d.union-closed;
reconsider D53 = ( dom C177 ) as  subset-closed  d.union-closed set by L444;
thus L445:now
L446: ( {} ) is (Subset of ( dom C177 )) by XBOOLE_1:2;
assume L447: C177 is  U-linear;
thus L448: C177 is  c=-monotone by L447;
let C178 , C179 being set;
assume that
L449: C178 in ( dom C177 )
and
L450: C179 in ( C177 . C178 );
consider C180 being set such that L451: C180 is  finite and L452: C180 c= C178 and L453: C179 in ( C177 . C180 ) and L454: (for B183 being set holds ((B183 c= C178 & C179 in ( C177 . B183 )) implies C180 c= B183)) by L444 , L447 , L449 , L450 , L394;
L455: ( dom C177 ) = D53;
L456: ( {} ) c= C178 by XBOOLE_1:2;
L457: ( {} ) in ( dom C177 ) by L456 , L449 , L455 , CLASSES1:def 1;
L458: ( C177 . ( {} ) ) = ( union ( C177 .: ( {} ) ) ) by L457 , L447 , L446 , L253 , ZFMISC_1:2
.= ( {} ) by ZFMISC_1:2;
reconsider D54 = C180 as non  empty set by L458 , L453;
reconsider D55 = { { B184 } where B184 is (Element of D54) : (not contradiction) } as set;
L459: D54 in ( dom C177 ) by L449 , L452 , L455 , CLASSES1:def 1;
L460: D55 c= ( dom C177 )
proof
let C181 being set;
assume L461: C181 in D55;
L462: (ex B185 being (Element of D54) st C181 = { B185 }) by L461;
L463: C181 c= D54 by L462 , ZFMISC_1:31;
thus L464: thesis by L463 , L455 , L459 , CLASSES1:def 1;
end;
L465:
now
let C182 being set;
assume L466: C182 in D55;
L467: (ex B186 being (Element of D54) st C182 = { B186 }) by L466;
thus L468: C182 c= D54 by L467 , ZFMISC_1:31;
end;
L469: ( union D55 ) c= D54 by L465 , ZFMISC_1:76;
L470: ( union D55 ) in ( dom C177 ) by L469 , L455 , L459 , CLASSES1:def 1;
reconsider D56 = D55 as (Subset of ( dom C177 )) by L460;
L471: D54 c= ( union D56 )
proof
let C183 being set;
assume L472: C183 in D54;
L473: { C183 } in D56 by L472;
L474: { C183 } c= ( union D56 ) by L473 , ZFMISC_1:74;
thus L475: thesis by L474 , ZFMISC_1:31;
end;
L476: ( C177 . D54 ) c= ( C177 . ( union D56 ) ) by L471 , L447 , L459 , L470 , L256;
L477: ( C177 . ( union D56 ) ) = ( union ( C177 .: D56 ) ) by L447 , L470 , L253;
consider C184 being set such that L478: C179 in C184 and L479: C184 in ( C177 .: D56 ) by L477 , L453 , L476 , TARSKI:def 4;
consider C185 being set such that L480: C185 in ( dom C177 ) and L481: C185 in D56 and L482: C184 = ( C177 . C185 ) by L479 , FUNCT_1:def 6;
consider C186 being (Element of D54) such that L483: C185 = { C186 } by L481;
reconsider D57 = C186 as set;
take D58 = D57;
L484: D58 in D54;
thus L485: (D58 in C178 & C179 in ( C177 . { D58 } )) by L484 , L452 , L478 , L482 , L483;
let C187 being set;
assume L486: (C187 c= C178 & C179 in ( C177 . C187 ));
L487: (D58 in D54 & D54 c= C187) by L486 , L454;
thus L488: D58 in C187 by L487;
end;
assume that
L489: C177 is  c=-monotone
and
L490: (for B187 , B188 being set holds ((B187 in ( dom C177 ) & B188 in ( C177 . B187 )) implies (ex B189 being set st (B189 in B187 & B188 in ( C177 . { B189 } ) & (for B190 being set holds ((B190 c= B187 & B188 in ( C177 . B190 )) implies B189 in B190))))));
L491:
now
let C188 , C189 being set;
assume L492: (C188 in ( dom C177 ) & C189 in ( C177 . C188 ));
consider C190 being set such that L493: (C190 in C188 & C189 in ( C177 . { C190 } )) and L494: (for B191 being set holds ((B191 c= C188 & C189 in ( C177 . B191 )) implies C190 in B191)) by L492 , L490;
reconsider D59 = { C190 } as set;
take D60 = D59;
thus L495: (D60 is  finite & D60 c= C188 & C189 in ( C177 . D60 )) by L493 , ZFMISC_1:31;
let C191 being set;
assume L496: (C191 c= C188 & C189 in ( C177 . C191 ));
L497: C190 in C191 by L496 , L494;
thus L498: D60 c= C191 by L497 , ZFMISC_1:31;
end;
thus L499: C177 is  U-stable by L491 , L444 , L489 , L394;
thus L500: C177 is  union-distributive
proof
let C192 being (Subset of ( dom C177 ));
assume that
L501: ( union C192 ) in ( dom C177 );
thus L502: ( C177 . ( union C192 ) ) c= ( union ( C177 .: C192 ) )
proof
let C193 being set;
assume L503: C193 in ( C177 . ( union C192 ) );
consider C194 being set such that L504: C194 in ( union C192 ) and L505: C193 in ( C177 . { C194 } ) and L506: (for B192 being set holds ((B192 c= ( union C192 ) & C193 in ( C177 . B192 )) implies C194 in B192)) by L503 , L490 , L501;
consider C195 being set such that L507: C194 in C195 and L508: C195 in C192 by L504 , TARSKI:def 4;
L509: { C194 } c= C195 by L507 , ZFMISC_1:31;
L510: { C194 } in D53 by L509 , L508 , CLASSES1:def 1;
L511: ( C177 . { C194 } ) c= ( C177 . C195 ) by L510 , L489 , L508 , L509 , L256;
L512: ( C177 . C195 ) in ( C177 .: C192 ) by L508 , FUNCT_1:def 6;
thus L513: thesis by L512 , L505 , L511 , TARSKI:def 4;
end;

L514:
now
let C196 being set;
assume L515: C196 in ( C177 .: C192 );
consider C197 being set such that L516: C197 in ( dom C177 ) and L517: C197 in C192 and L518: C196 = ( C177 . C197 ) by L515 , FUNCT_1:def 6;
L519: C197 c= ( union C192 ) by L517 , ZFMISC_1:74;
thus L520: C196 c= ( C177 . ( union C192 ) ) by L519 , L489 , L501 , L516 , L518 , L256;
end;
thus L521: thesis by L514 , ZFMISC_1:76;
end;

end;
begin
definition
let C198 being Function;
func graph C198 -> set means 
:L501: (for B193 being set holds (B193 in it iff (ex B194 being  finite set st (ex B195 being set st (B193 = [ B194 , B195 ] & B194 in ( dom C198 ) & B195 in ( C198 . B194 ))))));
existence
proof
defpred S8[ set ] means (ex B196 being  finite set st (ex B197 being set st ($1 = [ B196 , B197 ] & B196 in ( dom C198 ) & B197 in ( C198 . B196 ))));
consider C199 being set such that L502: (for B198 being set holds (B198 in C199 iff (B198 in [: ( dom C198 ) , ( union ( rng C198 ) ) :] & S8[ B198 ]))) from XBOOLE_0:sch 1;
take C199;
let C200 being set;
L503:
now
given C201 being  finite set , C202 being set such that
L504: C200 = [ C201 , C202 ]
and
L505: C201 in ( dom C198 )
and
L506: C202 in ( C198 . C201 );

L507: ( C198 . C201 ) in ( rng C198 ) by L505 , FUNCT_1:def 3;
L508: C202 in ( union ( rng C198 ) ) by L507 , L506 , TARSKI:def 4;
thus L509: C200 in [: ( dom C198 ) , ( union ( rng C198 ) ) :] by L508 , L504 , L505 , ZFMISC_1:87;
end;
thus L510: thesis by L503 , L502;
end;
uniqueness
proof
let C203 , C204 being set;
assume L511: (not thesis);
consider C205 being set such that L512: (not (C205 in C203 iff C205 in C204)) by L511 , TARSKI:1;
L513: (C205 in C204 iff (not (ex B199 being  finite set st (ex B200 being set st (C205 = [ B199 , B200 ] & B199 in ( dom C198 ) & B200 in ( C198 . B199 )))))) by L511 , L512;
thus L514: thesis by L513 , L511;
end;
end;
definition
let C206 , C207 being non  empty set;
let C208 being (Function of C206 , C207);
redefine func graph C208 -> (Subset of [: C206 , ( union C207 ) :]);

coherence
proof
L516: ( graph C208 ) c= [: C206 , ( union C207 ) :]
proof
let C209 being set;
assume L517: C209 in ( graph C208 );
consider C210 being  finite set, C211 being set such that L518: C209 = [ C210 , C211 ] and L519: C210 in ( dom C208 ) and L520: C211 in ( C208 . C210 ) by L517 , L501;
L521: (( rng C208 ) c= C207 & ( C208 . C210 ) in ( rng C208 )) by L519 , FUNCT_1:def 3 , RELAT_1:def 19;
L522: (( dom C208 ) = C206 & C211 in ( union C207 )) by L521 , L520 , FUNCT_2:def 1 , TARSKI:def 4;
thus L523: thesis by L522 , L518 , L519 , ZFMISC_1:87;
end;
thus L524: thesis by L516;
end;
end;
registration
let C212 being Function;
cluster ( graph C212 ) ->  Relation-like;
coherence
proof
let C213 being set;
assume L526: C213 in ( graph C212 );
L527: (ex B201 being  finite set st (ex B202 being set st (C213 = [ B201 , B202 ] & B201 in ( dom C212 ) & B202 in ( C212 . B201 )))) by L526 , L501;
thus L528: thesis by L527;
end;
end;
theorem
L530: (for B203 being Function holds (for B204 , B205 being set holds ([ B204 , B205 ] in ( graph B203 ) iff (B204 is  finite & B204 in ( dom B203 ) & B205 in ( B203 . B204 )))))
proof
let C214 being Function;
let C215 , C216 being set;
L531:
now
given C217 being  finite set , C218 being set such that
L532: [ C215 , C216 ] = [ C217 , C218 ]
and
L533: (C217 in ( dom C214 ) & C218 in ( C214 . C217 ));

L534: C215 = C217 by L532 , XTUPLE_0:1;
thus L535: (C215 is  finite & C215 in ( dom C214 ) & C216 in ( C214 . C215 )) by L534 , L532 , L533 , XTUPLE_0:1;
end;
thus L536: thesis by L531 , L501;
end;
theorem
L537: (for B206 being  c=-monotone Function holds (for B207 , B208 being set holds ((B208 in ( dom B206 ) & B207 c= B208 & B208 is  finite) implies (for B209 being set holds ([ B207 , B209 ] in ( graph B206 ) implies [ B208 , B209 ] in ( graph B206 ))))))
proof
let C219 being  c=-monotone Function;
let C220 , C221 being set;
assume that
L538: C221 in ( dom C219 )
and
L539: C220 c= C221
and
L540: C221 is  finite;
let C222 being set;
assume L541: [ C220 , C222 ] in ( graph C219 );
L542: C220 in ( dom C219 ) by L541 , L530;
L543: ( C219 . C220 ) c= ( C219 . C221 ) by L542 , L538 , L539 , L256;
L544: C222 in ( C219 . C220 ) by L541 , L530;
thus L545: thesis by L544 , L538 , L540 , L543 , L530;
end;
theorem
L546: (for B210 , B211 being Coherence_Space holds (for B212 being (Function of B210 , B211) holds (for B213 being (Element of B210) holds (for B214 , B215 being set holds (([ B213 , B214 ] in ( graph B212 ) & [ B213 , B215 ] in ( graph B212 )) implies { B214 , B215 } in B211)))))
proof
let C223 , C224 being Coherence_Space;
let C225 being (Function of C223 , C224);
let C226 being (Element of C223);
let C227 , C228 being set;
assume L547: ([ C226 , C227 ] in ( graph C225 ) & [ C226 , C228 ] in ( graph C225 ));
L548: (C227 in ( C225 . C226 ) & C228 in ( C225 . C226 )) by L547 , L530;
L549: { C227 , C228 } c= ( C225 . C226 ) by L548 , ZFMISC_1:32;
thus L550: thesis by L549 , CLASSES1:def 1;
end;
theorem
L551: (for B216 , B217 being Coherence_Space holds (for B218 being  c=-monotone (Function of B216 , B217) holds (for B219 , B220 being (Element of B216) holds (( B219 \/ B220 ) in B216 implies (for B221 , B222 being set holds (([ B219 , B221 ] in ( graph B218 ) & [ B220 , B222 ] in ( graph B218 )) implies { B221 , B222 } in B217))))))
proof
let C229 , C230 being Coherence_Space;
let C231 being  c=-monotone (Function of C229 , C230);
let C232 , C233 being (Element of C229);
assume that
L552: ( C232 \/ C233 ) in C229;
let C234 , C235 being set;
assume L553: ([ C232 , C234 ] in ( graph C231 ) & [ C233 , C235 ] in ( graph C231 ));
L554: (C232 is  finite & C233 is  finite) by L553 , L530;
reconsider D61 = ( C232 \/ C233 ) as  finite (Element of C229) by L554 , L552;
L555: ( dom C231 ) = C229 by FUNCT_2:def 1;
L556: ([ D61 , C234 ] in ( graph C231 ) & [ D61 , C235 ] in ( graph C231 )) by L555 , L553 , L537 , XBOOLE_1:7;
thus L557: thesis by L556 , L546;
end;
theorem
L558: (for B223 , B224 being Coherence_Space holds (for B225 , B226 being  U-continuous (Function of B223 , B224) holds (( graph B225 ) = ( graph B226 ) implies B225 = B226)))
proof
let C236 , C237 being Coherence_Space;
let C238 , C239 being  U-continuous (Function of C236 , C237);
L559: ( dom C238 ) = C236 by FUNCT_2:def 1;
L560: ( dom C239 ) = C236 by FUNCT_2:def 1;
L561:
now
let C240 being  finite (Element of C236);
let C241 , C242 being  U-continuous (Function of C236 , C237);
L562: ( dom C241 ) = C236 by FUNCT_2:def 1;
assume L563: ( graph C241 ) = ( graph C242 );
thus L564: ( C241 . C240 ) c= ( C242 . C240 )
proof
let C243 being set;
assume L565: C243 in ( C241 . C240 );
L566: [ C240 , C243 ] in ( graph C241 ) by L565 , L562 , L530;
thus L567: thesis by L566 , L563 , L530;
end;

end;
L565:
now
let C244 being (Element of C236);
let C245 , C246 being  U-continuous (Function of C236 , C237);
L566: ( dom C246 ) = C236 by FUNCT_2:def 1;
assume L567: ( graph C245 ) = ( graph C246 );
thus L568: ( C245 .: ( Fin C244 ) ) c= ( C246 .: ( Fin C244 ) )
proof
let C247 being set;
assume L569: C247 in ( C245 .: ( Fin C244 ) );
consider C248 being set such that L570: C248 in ( dom C245 ) and L571: C248 in ( Fin C244 ) and L572: C247 = ( C245 . C248 ) by L569 , FUNCT_1:def 6;
L573: (( C245 . C248 ) c= ( C246 . C248 ) & ( C246 . C248 ) c= ( C245 . C248 )) by L561 , L567 , L571;
L574: ( C245 . C248 ) = ( C246 . C248 ) by L573 , XBOOLE_0:def 10;
thus L575: thesis by L574 , L566 , L571 , L572 , FUNCT_1:def 6;
end;

end;
assume L569: ( graph C238 ) = ( graph C239 );
L570:
now
let C249 being (Element of C236);
L571: (( C238 .: ( Fin C249 ) ) c= ( C239 .: ( Fin C249 ) ) & ( C239 .: ( Fin C249 ) ) c= ( C238 .: ( Fin C249 ) )) by L569 , L565;
L572: ( C238 .: ( Fin C249 ) ) = ( C239 .: ( Fin C249 ) ) by L571 , XBOOLE_0:def 10;
thus L573: ( C238 . C249 ) = ( union ( C238 .: ( Fin C249 ) ) ) by L559 , L338
.= ( C239 . C249 ) by L560 , L572 , L338;
end;
thus L574: thesis by L570 , FUNCT_2:63;
end;
L575: (for B227 , B228 being Coherence_Space holds (for B229 being (Subset of [: B227 , ( union B228 ) :]) holds (((for B230 being set holds (B230 in B229 implies ( B230 `1 ) is  finite)) & (for B231 , B232 being  finite (Element of B227) holds (B231 c= B232 implies (for B233 being set holds ([ B231 , B233 ] in B229 implies [ B232 , B233 ] in B229)))) & (for B234 being  finite (Element of B227) holds (for B235 , B236 being set holds (([ B234 , B235 ] in B229 & [ B234 , B236 ] in B229) implies { B235 , B236 } in B228)))) implies (ex B237 being  U-continuous (Function of B227 , B228) st (B229 = ( graph B237 ) & (for B238 being (Element of B227) holds ( B237 . B238 ) = ( B229 .: ( Fin B238 ) )))))))
proof
let C250 , C251 being Coherence_Space;
let C252 being (Subset of [: C250 , ( union C251 ) :]);
assume that
L576: (for B239 being set holds (B239 in C252 implies ( B239 `1 ) is  finite))
and
L577: (for B240 , B241 being  finite (Element of C250) holds (B240 c= B241 implies (for B242 being set holds ([ B240 , B242 ] in C252 implies [ B241 , B242 ] in C252))))
and
L578: (for B243 being  finite (Element of C250) holds (for B244 , B245 being set holds (([ B243 , B244 ] in C252 & [ B243 , B245 ] in C252) implies { B244 , B245 } in C251)));
deffunc H1(set) = ( C252 .: ( Fin $1 ) );
consider C253 being Function such that L579: (( dom C253 ) = C250 & (for B246 being set holds (B246 in C250 implies ( C253 . B246 ) = H1(B246)))) from FUNCT_1:sch 3;
L580: ( rng C253 ) c= C251
proof
let C254 being set;
assume L581: C254 in ( rng C253 );
consider C255 being set such that L582: C255 in ( dom C253 ) and L583: C254 = ( C253 . C255 ) by L581 , FUNCT_1:def 3;
reconsider D62 = C255 as (Element of C250) by L579 , L582;
L584: C254 = ( C252 .: ( Fin D62 ) ) by L579 , L583;
L585:
now
let C256 , C257 being set;
assume L586: C256 in C254;
consider C258 being set such that L587: [ C258 , C256 ] in C252 and L588: C258 in ( Fin D62 ) by L586 , L584 , RELAT_1:def 13;
assume L589: C257 in C254;
consider C259 being set such that L590: [ C259 , C257 ] in C252 and L591: C259 in ( Fin D62 ) by L589 , L584 , RELAT_1:def 13;
reconsider D63 = C258 , D64 = C259 as  finite (Element of C250) by L588 , L591;
L592: ( D63 \/ D64 ) in ( Fin D62 ) by L588 , L591 , FINSUB_1:1;
reconsider D65 = ( D63 \/ D64 ) as  finite (Element of C250) by L592;
L593: [ D65 , C257 ] in C252 by L577 , L590 , XBOOLE_1:7;
L594: [ D65 , C256 ] in C252 by L577 , L587 , XBOOLE_1:7;
thus L595: { C256 , C257 } in C251 by L594 , L578 , L593;
end;
thus L596: thesis by L585 , COH_SP:6;
end;
L597:
now
let C260 , C261 being set;
assume that
L598: C260 in ( dom C253 )
and
L599: C261 in ( C253 . C260 );
L600: C261 in ( C252 .: ( Fin C260 ) ) by L579 , L598 , L599;
consider C262 being set such that L601: [ C262 , C261 ] in C252 and L602: C262 in ( Fin C260 ) by L600 , RELAT_1:def 13;
L603: C262 c= C260 by L602 , FINSUB_1:def 5;
L604: C262 in C250 by L603 , L579 , L598 , CLASSES1:def 1;
L605: ( C253 . C262 ) = ( C252 .: ( Fin C262 ) ) by L604 , L579;
take D66 = C262;
L606: D66 in ( Fin D66 ) by L602 , FINSUB_1:def 5;
thus L607: (D66 is  finite & D66 c= C260 & C261 in ( C253 . D66 )) by L606 , L601 , L602 , L605 , FINSUB_1:def 5 , RELAT_1:def 13;
end;
L608: C253 is  c=-monotone
proof
let C263 , C264 being set;
assume that
L609: (C263 in ( dom C253 ) & C264 in ( dom C253 ))
and
L610: C263 c= C264;
reconsider D67 = C263 , D68 = C264 as (Element of C250) by L579 , L609;
L611: ( Fin D67 ) c= ( Fin D68 ) by L610 , FINSUB_1:10;
L612: ( C252 .: ( Fin D67 ) ) c= ( C252 .: ( Fin D68 ) ) by L611 , RELAT_1:123;
L613: ( C253 . D67 ) = ( C252 .: ( Fin D67 ) ) by L579;
thus L614: thesis by L613 , L579 , L612;
end;
reconsider D69 = C253 as  U-continuous (Function of C250 , C251) by L608 , L579 , L580 , L597 , L343 , FUNCT_2:def 1 , RELSET_1:4;
take D69;
thus L615: C252 = ( graph D69 )
proof
let C265 , C266 being set;
thus L616:now
assume L617: [ C265 , C266 ] in C252;
L618: ( [ C265 , C266 ] `1 ) = C265;
reconsider D70 = C265 as  finite (Element of C250) by L618 , L576 , L617 , ZFMISC_1:87;
L619: D70 in ( Fin C265 ) by FINSUB_1:def 5;
L620: C266 in ( C252 .: ( Fin C265 ) ) by L619 , L617 , RELAT_1:def 13;
L621: ( D69 . D70 ) = ( C252 .: ( Fin C265 ) ) by L579;
thus L622: [ C265 , C266 ] in ( graph D69 ) by L621 , L579 , L620 , L530;
end;
assume L623: [ C265 , C266 ] in ( graph D69 );
reconsider D71 = C265 as  finite (Element of C250) by L623 , L579 , L530;
L624: ( D69 . D71 ) = ( C252 .: ( Fin D71 ) ) by L579;
L625: C266 in ( D69 . D71 ) by L623 , L530;
consider C267 being set such that L626: [ C267 , C266 ] in C252 and L627: C267 in ( Fin D71 ) by L625 , L624 , RELAT_1:def 13;
L628: C267 c= D71 by L627 , FINSUB_1:def 5;
thus L629: thesis by L628 , L577 , L626 , L627;
end;

thus L630: thesis by L579;
end;
theorem
L631: (for B247 , B248 being Coherence_Space holds (for B249 being (Subset of [: B247 , ( union B248 ) :]) holds (((for B250 being set holds (B250 in B249 implies ( B250 `1 ) is  finite)) & (for B251 , B252 being  finite (Element of B247) holds (B251 c= B252 implies (for B253 being set holds ([ B251 , B253 ] in B249 implies [ B252 , B253 ] in B249)))) & (for B254 being  finite (Element of B247) holds (for B255 , B256 being set holds (([ B254 , B255 ] in B249 & [ B254 , B256 ] in B249) implies { B255 , B256 } in B248)))) implies (ex B257 being  U-continuous (Function of B247 , B248) st B249 = ( graph B257 )))))
proof
let C268 , C269 being Coherence_Space;
let C270 being (Subset of [: C268 , ( union C269 ) :]);
assume L632: (not thesis);
L633: (ex B258 being  U-continuous (Function of C268 , C269) st (C270 = ( graph B258 ) & (for B259 being (Element of C268) holds ( B258 . B259 ) = ( C270 .: ( Fin B259 ) )))) by L632 , L575;
thus L634: thesis by L633 , L632;
end;
theorem
L635: (for B260 , B261 being Coherence_Space holds (for B262 being  U-continuous (Function of B260 , B261) holds (for B263 being (Element of B260) holds ( B262 . B263 ) = ( ( graph B262 ) .: ( Fin B263 ) ))))
proof
let C271 , C272 being Coherence_Space;
let C273 being  U-continuous (Function of C271 , C272);
let C274 being (Element of C271);
set D72 = ( graph C273 );
L636:
now
let C275 being set;
assume L637: C275 in D72;
L638: (ex B264 being  finite set st (ex B265 being set st (C275 = [ B264 , B265 ] & B264 in ( dom C273 ) & B265 in ( C273 . B264 )))) by L637 , L501;
thus L639: ( C275 `1 ) is  finite by L638 , MCART_1:7;
end;
L640: ( dom C273 ) = C271 by FUNCT_2:def 1;
L641: (for B266 , B267 being  finite (Element of C271) holds (B266 c= B267 implies (for B268 being set holds ([ B266 , B268 ] in D72 implies [ B267 , B268 ] in D72)))) by L640 , L537;
L642: (for B269 being  finite (Element of C271) holds (for B270 , B271 being set holds (([ B269 , B270 ] in D72 & [ B269 , B271 ] in D72) implies { B270 , B271 } in C272))) by L546;
consider C276 being  U-continuous (Function of C271 , C272) such that L643: D72 = ( graph C276 ) and L644: (for B272 being (Element of C271) holds ( C276 . B272 ) = ( D72 .: ( Fin B272 ) )) by L642 , L636 , L641 , L575;
L645: ( C276 . C274 ) = ( D72 .: ( Fin C274 ) ) by L644;
thus L646: thesis by L645 , L643 , L558;
end;
begin
definition
let C277 being Function;
func Trace C277 -> set means 
:L647: (for B273 being set holds (B273 in it iff (ex B274 , B275 being set st (B273 = [ B274 , B275 ] & B274 in ( dom C277 ) & B275 in ( C277 . B274 ) & (for B276 being set holds ((B276 in ( dom C277 ) & B276 c= B274 & B275 in ( C277 . B276 )) implies B274 = B276))))));
existence
proof
defpred S9[ set ] means (ex B277 , B278 being set st ($1 = [ B277 , B278 ] & B277 in ( dom C277 ) & B278 in ( C277 . B277 ) & (for B279 being set holds ((B279 in ( dom C277 ) & B279 c= B277 & B278 in ( C277 . B279 )) implies B277 = B279))));
consider C278 being set such that L648: (for B280 being set holds (B280 in C278 iff (B280 in [: ( dom C277 ) , ( Union C277 ) :] & S9[ B280 ]))) from XBOOLE_0:sch 1;
take C278;
let C279 being set;
L649:
now
given C280 , C281 being set such that
L650: C279 = [ C280 , C281 ]
and
L651: C280 in ( dom C277 )
and
L652: C281 in ( C277 . C280 )
and
L653: (for B281 being set holds ((B281 in ( dom C277 ) & B281 c= C280 & C281 in ( C277 . B281 )) implies C280 = B281));

L654: C281 in ( Union C277 ) by L651 , L652 , CARD_5:2;
thus L655: C279 in [: ( dom C277 ) , ( Union C277 ) :] by L654 , L650 , L651 , ZFMISC_1:87;
end;
thus L656: thesis by L649 , L648;
end;
uniqueness
proof
let C282 , C283 being set;
assume L657: (not thesis);
consider C284 being set such that L658: (not (C284 in C282 iff C284 in C283)) by L657 , TARSKI:1;
L659: (C284 in C283 iff (not (ex B282 , B283 being set st (C284 = [ B282 , B283 ] & B282 in ( dom C277 ) & B283 in ( C277 . B282 ) & (for B284 being set holds ((B284 in ( dom C277 ) & B284 c= B282 & B283 in ( C277 . B284 )) implies B282 = B284)))))) by L657 , L658;
thus L660: contradiction by L659 , L657;
end;
end;
theorem
L662: (for B285 being Function holds (for B286 , B287 being set holds ([ B286 , B287 ] in ( Trace B285 ) iff (B286 in ( dom B285 ) & B287 in ( B285 . B286 ) & (for B288 being set holds ((B288 in ( dom B285 ) & B288 c= B286 & B287 in ( B285 . B288 )) implies B286 = B288))))))
proof
let C285 being Function;
let C286 , C287 being set;
L663:
now
given C288 , C289 being set such that
L664: [ C286 , C287 ] = [ C288 , C289 ]
and
L665: (C288 in ( dom C285 ) & C289 in ( C285 . C288 ) & (for B289 being set holds ((B289 in ( dom C285 ) & B289 c= C288 & C289 in ( C285 . B289 )) implies C288 = B289)));

L666: (C286 = C288 & C287 = C289) by L664 , XTUPLE_0:1;
thus L667: (C286 in ( dom C285 ) & C287 in ( C285 . C286 ) & (for B290 being set holds ((B290 in ( dom C285 ) & B290 c= C286 & C287 in ( C285 . B290 )) implies C286 = B290))) by L666 , L665;
end;
thus L668: thesis by L663 , L647;
end;
definition
let C290 , C291 being non  empty set;
let C292 being (Function of C290 , C291);
redefine func Trace C292 -> (Subset of [: C290 , ( union C291 ) :]);

coherence
proof
L669: ( Trace C292 ) c= [: C290 , ( union C291 ) :]
proof
let C293 being set;
assume L670: C293 in ( Trace C292 );
consider C294 , C295 being set such that L671: C293 = [ C294 , C295 ] and L672: C294 in ( dom C292 ) and L673: C295 in ( C292 . C294 ) and L674: (for B291 being set holds ((B291 in ( dom C292 ) & B291 c= C294 & C295 in ( C292 . B291 )) implies C294 = B291)) by L670 , L647;
L675: (( rng C292 ) c= C291 & ( C292 . C294 ) in ( rng C292 )) by L672 , FUNCT_1:def 3 , RELAT_1:def 19;
L676: (( dom C292 ) = C290 & C295 in ( union C291 )) by L675 , L673 , FUNCT_2:def 1 , TARSKI:def 4;
thus L677: thesis by L676 , L671 , L672 , ZFMISC_1:87;
end;
thus L678: thesis by L669;
end;
end;
registration
let C296 being Function;
cluster ( Trace C296 ) ->  Relation-like;
coherence
proof
let C297 being set;
assume L680: C297 in ( Trace C296 );
L681: (ex B292 , B293 being set st (C297 = [ B292 , B293 ] & B292 in ( dom C296 ) & B293 in ( C296 . B292 ) & (for B294 being set holds ((B294 in ( dom C296 ) & B294 c= B292 & B293 in ( C296 . B294 )) implies B292 = B294)))) by L680 , L647;
thus L682: thesis by L681;
end;
end;
theorem
L684: (for B295 being  U-continuous Function holds (( dom B295 ) is  subset-closed implies ( Trace B295 ) c= ( graph B295 )))
proof
let C298 being  U-continuous Function;
assume that
L685: ( dom C298 ) is  subset-closed;
let C299 , C300 being set;
assume L686: [ C299 , C300 ] in ( Trace C298 );
consider C301 , C302 being set such that L687: [ C299 , C300 ] = [ C301 , C302 ] and L688: C301 in ( dom C298 ) and L689: C302 in ( C298 . C301 ) and L690: (for B296 being set holds ((B296 in ( dom C298 ) & B296 c= C301 & C302 in ( C298 . B296 )) implies C301 = B296)) by L686 , L647;
consider C303 being set such that L691: C303 is  finite and L692: C303 c= C301 and L693: C302 in ( C298 . C303 ) by L685 , L688 , L689 , L343;
L694: C303 in ( dom C298 ) by L685 , L688 , L692 , CLASSES1:def 1;
L695: C301 = C303 by L694 , L690 , L692 , L693;
thus L696: thesis by L695 , L687 , L688 , L689 , L691 , L530;
end;
theorem
L697: (for B297 being  U-continuous Function holds (( dom B297 ) is  subset-closed implies (for B298 , B299 being set holds ([ B298 , B299 ] in ( Trace B297 ) implies B298 is  finite))))
proof
let C304 being  U-continuous Function;
assume that
L698: ( dom C304 ) is  subset-closed;
let C305 , C306 being set;
assume L699: [ C305 , C306 ] in ( Trace C304 );
L700: C305 in ( dom C304 ) by L699 , L662;
L701: C306 in ( C304 . C305 ) by L699 , L662;
consider C307 being set such that L702: C307 is  finite and L703: C307 c= C305 and L704: C306 in ( C304 . C307 ) by L701 , L698 , L700 , L343;
L705: C307 in ( dom C304 ) by L698 , L700 , L703 , CLASSES1:def 1;
thus L706: thesis by L705 , L699 , L702 , L703 , L704 , L662;
end;
theorem
L707: (for B300 , B301 being Coherence_Space holds (for B302 being  c=-monotone (Function of B300 , B301) holds (for B303 , B304 being set holds (( B303 \/ B304 ) in B300 implies (for B305 , B306 being set holds (([ B303 , B305 ] in ( Trace B302 ) & [ B304 , B306 ] in ( Trace B302 )) implies { B305 , B306 } in B301))))))
proof
let C308 , C309 being Coherence_Space;
let C310 being  c=-monotone (Function of C308 , C309);
L708: ( dom C310 ) = C308 by FUNCT_2:def 1;
let C311 , C312 being set;
set D73 = ( C311 \/ C312 );
assume L709: D73 in C308;
reconsider D74 = D73 as (Element of C308) by L709;
L710: C312 c= D74 by XBOOLE_1:7;
L711: C312 in C308 by L710 , CLASSES1:def 1;
L712: ( C310 . C312 ) c= ( C310 . D74 ) by L711 , L708 , L710 , L256;
let C313 , C314 being set;
assume L713: ([ C311 , C313 ] in ( Trace C310 ) & [ C312 , C314 ] in ( Trace C310 ));
L714: (C313 in ( C310 . C311 ) & C314 in ( C310 . C312 )) by L713 , L662;
L715: C311 c= D74 by XBOOLE_1:7;
L716: C311 in C308 by L715 , CLASSES1:def 1;
L717: ( C310 . C311 ) c= ( C310 . D74 ) by L716 , L708 , L715 , L256;
L718: { C313 , C314 } c= ( C310 . D74 ) by L717 , L712 , L714 , ZFMISC_1:32;
thus L719: thesis by L718 , CLASSES1:def 1;
end;
theorem
L720: (for B307 , B308 being Coherence_Space holds (for B309 being  cap-distributive (Function of B307 , B308) holds (for B310 , B311 being set holds (( B310 \/ B311 ) in B307 implies (for B312 being set holds (([ B310 , B312 ] in ( Trace B309 ) & [ B311 , B312 ] in ( Trace B309 )) implies B310 = B311))))))
proof
let C315 , C316 being Coherence_Space;
let C317 being  cap-distributive (Function of C315 , C316);
L721: ( dom C317 ) = C315 by FUNCT_2:def 1;
let C318 , C319 being set;
set D75 = ( C318 \/ C319 );
assume L722: D75 in C315;
L723: C319 c= D75 by XBOOLE_1:7;
L724: C319 in C315 by L723 , L722 , CLASSES1:def 1;
L725: C318 c= D75 by XBOOLE_1:7;
L726: C318 in C315 by L725 , L722 , CLASSES1:def 1;
reconsider D76 = ( C318 /\ C319 ) as (Element of C315) by L726 , L724 , FINSUB_1:def 2;
L727: D76 in C315;
L728: C315 includes_lattice_of C318 , C319 by L727 , L722 , L726 , L724 , L241;
let C320 being set;
assume that
L729: [ C318 , C320 ] in ( Trace C317 )
and
L730: [ C319 , C320 ] in ( Trace C317 );
L731: (C320 in ( C317 . C318 ) & C320 in ( C317 . C319 )) by L729 , L730 , L662;
L732: C320 in ( ( C317 . C318 ) /\ ( C317 . C319 ) ) by L731 , XBOOLE_0:def 4;
L733: C320 in ( C317 . D76 ) by L732 , L721 , L728 , L257;
L734: D76 c= C318 by XBOOLE_1:17;
L735: (D76 c= C319 & D76 = C318) by L734 , L721 , L729 , L733 , L662 , XBOOLE_1:17;
thus L736: thesis by L735 , L721 , L730 , L733 , L662;
end;
theorem
L737: (for B313 , B314 being Coherence_Space holds (for B315 , B316 being  U-stable (Function of B313 , B314) holds (( Trace B315 ) c= ( Trace B316 ) implies (for B317 being (Element of B313) holds ( B315 . B317 ) c= ( B316 . B317 )))))
proof
let C321 , C322 being Coherence_Space;
let C323 , C324 being  U-stable (Function of C321 , C322);
assume L738: ( Trace C323 ) c= ( Trace C324 );
let C325 being (Element of C321);
L739: ( dom C323 ) = C321 by FUNCT_2:def 1;
let C326 being set;
assume L740: C326 in ( C323 . C325 );
consider C327 being set such that L741: C327 is  finite and L742: C327 c= C325 and L743: C326 in ( C323 . C327 ) and L744: (for B318 being set holds ((B318 c= C325 & C326 in ( C323 . B318 )) implies C327 c= B318)) by L740 , L739 , L394;
reconsider D77 = C327 as (Element of C321) by L742 , CLASSES1:def 1;
L745:
now
let C328 being set;
assume that
L746: C328 in ( dom C323 )
and
L747: C328 c= D77
and
L748: C326 in ( C323 . C328 );
L749: C328 c= C325 by L742 , L747 , XBOOLE_1:1;
L750: D77 c= C328 by L749 , L744 , L748;
thus L751: D77 = C328 by L750 , L747 , XBOOLE_0:def 10;
end;
L752: [ D77 , C326 ] in ( Trace C323 ) by L745 , L739 , L743 , L662;
L753: C326 in ( C324 . D77 ) by L752 , L738 , L662;
L754: ( dom C324 ) = C321 by FUNCT_2:def 1;
L755: ( C324 . D77 ) c= ( C324 . C325 ) by L754 , L742 , L256;
thus L756: thesis by L755 , L753;
end;
theorem
L757: (for B319 , B320 being Coherence_Space holds (for B321 , B322 being  U-stable (Function of B319 , B320) holds (( Trace B321 ) = ( Trace B322 ) implies B321 = B322)))
proof
let C329 , C330 being Coherence_Space;
let C331 , C332 being  U-stable (Function of C329 , C330);
L758: ( dom C331 ) = C329 by FUNCT_2:def 1;
L759: ( dom C332 ) = C329 by FUNCT_2:def 1;
L760:
now
let C333 being (Element of C329);
let C334 , C335 being  U-stable (Function of C329 , C330);
L761: ( dom C335 ) = C329 by FUNCT_2:def 1;
assume L762: ( Trace C334 ) = ( Trace C335 );
thus L763: ( C334 .: ( Fin C333 ) ) c= ( C335 .: ( Fin C333 ) )
proof
let C336 being set;
assume L764: C336 in ( C334 .: ( Fin C333 ) );
consider C337 being set such that L765: C337 in ( dom C334 ) and L766: C337 in ( Fin C333 ) and L767: C336 = ( C334 . C337 ) by L764 , FUNCT_1:def 6;
L768: (( C334 . C337 ) c= ( C335 . C337 ) & ( C335 . C337 ) c= ( C334 . C337 )) by L762 , L766 , L737;
L769: ( C334 . C337 ) = ( C335 . C337 ) by L768 , XBOOLE_0:def 10;
thus L770: thesis by L769 , L761 , L766 , L767 , FUNCT_1:def 6;
end;

end;
assume L764: ( Trace C331 ) = ( Trace C332 );
L765:
now
let C338 being (Element of C329);
L766: (( C331 .: ( Fin C338 ) ) c= ( C332 .: ( Fin C338 ) ) & ( C332 .: ( Fin C338 ) ) c= ( C331 .: ( Fin C338 ) )) by L764 , L760;
L767: ( C331 .: ( Fin C338 ) ) = ( C332 .: ( Fin C338 ) ) by L766 , XBOOLE_0:def 10;
thus L768: ( C331 . C338 ) = ( union ( C331 .: ( Fin C338 ) ) ) by L758 , L338
.= ( C332 . C338 ) by L759 , L767 , L338;
end;
thus L769: thesis by L765 , FUNCT_2:63;
end;
L770: (for B323 , B324 being Coherence_Space holds (for B325 being (Subset of [: B323 , ( union B324 ) :]) holds (((for B326 being set holds (B326 in B325 implies ( B326 `1 ) is  finite)) & (for B327 , B328 being (Element of B323) holds (( B327 \/ B328 ) in B323 implies (for B329 , B330 being set holds (([ B327 , B329 ] in B325 & [ B328 , B330 ] in B325) implies { B329 , B330 } in B324)))) & (for B331 , B332 being (Element of B323) holds (( B331 \/ B332 ) in B323 implies (for B333 being set holds (([ B331 , B333 ] in B325 & [ B332 , B333 ] in B325) implies B331 = B332))))) implies (ex B334 being  U-stable (Function of B323 , B324) st (B325 = ( Trace B334 ) & (for B335 being (Element of B323) holds ( B334 . B335 ) = ( B325 .: ( Fin B335 ) )))))))
proof
let C339 , C340 being Coherence_Space;
let C341 being (Subset of [: C339 , ( union C340 ) :]);
assume that
L771: (for B336 being set holds (B336 in C341 implies ( B336 `1 ) is  finite))
and
L772: (for B337 , B338 being (Element of C339) holds (( B337 \/ B338 ) in C339 implies (for B339 , B340 being set holds (([ B337 , B339 ] in C341 & [ B338 , B340 ] in C341) implies { B339 , B340 } in C340))))
and
L773: (for B341 , B342 being (Element of C339) holds (( B341 \/ B342 ) in C339 implies (for B343 being set holds (([ B341 , B343 ] in C341 & [ B342 , B343 ] in C341) implies B341 = B342))));
deffunc H2(set) = ( C341 .: ( Fin $1 ) );
consider C342 being Function such that L774: (( dom C342 ) = C339 & (for B344 being set holds (B344 in C339 implies ( C342 . B344 ) = H2(B344)))) from FUNCT_1:sch 3;
L775:
now
let C343 , C344 being set;
assume that
L776: C343 in ( dom C342 )
and
L777: C344 in ( C342 . C343 );
reconsider D78 = C343 as (Element of C339) by L774 , L776;
L778: C344 in ( C341 .: ( Fin C343 ) ) by L774 , L776 , L777;
consider C345 being set such that L779: [ C345 , C344 ] in C341 and L780: C345 in ( Fin C343 ) by L778 , RELAT_1:def 13;
L781: C345 c= C343 by L780 , FINSUB_1:def 5;
L782: C345 in C339 by L781 , L774 , L776 , CLASSES1:def 1;
L783: ( C342 . C345 ) = ( C341 .: ( Fin C345 ) ) by L782 , L774;
take D79 = C345;
L784: D79 in ( Fin D79 ) by L780 , FINSUB_1:def 5;
thus L785: (D79 is  finite & D79 c= C343 & C344 in ( C342 . D79 )) by L784 , L779 , L780 , L783 , FINSUB_1:def 5 , RELAT_1:def 13;
let C346 being set;
assume that
L786: C346 c= C343
and
L787: C344 in ( C342 . C346 );
L788: C346 c= D78 by L786;
L789: C346 in ( dom C342 ) by L788 , L774 , CLASSES1:def 1;
L790: C344 in ( C341 .: ( Fin C346 ) ) by L789 , L774 , L787;
consider C347 being set such that L791: [ C347 , C344 ] in C341 and L792: C347 in ( Fin C346 ) by L790 , RELAT_1:def 13;
L793: ( Fin C346 ) c= ( Fin C343 ) by L786 , FINSUB_1:10;
L794: C347 in ( Fin D78 ) by L793 , L792;
L795: ( D79 \/ C347 ) in ( Fin D78 ) by L780 , L792 , L793 , FINSUB_1:1;
L796: D79 = C347 by L795 , L773 , L779 , L780 , L791 , L794;
thus L797: D79 c= C346 by L796 , L792 , FINSUB_1:def 5;
end;
L798: ( rng C342 ) c= C340
proof
let C348 being set;
assume L799: C348 in ( rng C342 );
consider C349 being set such that L800: C349 in ( dom C342 ) and L801: C348 = ( C342 . C349 ) by L799 , FUNCT_1:def 3;
reconsider D80 = C349 as (Element of C339) by L774 , L800;
L802: C348 = ( C341 .: ( Fin D80 ) ) by L774 , L801;
L803:
now
let C350 , C351 being set;
assume L804: C350 in C348;
consider C352 being set such that L805: [ C352 , C350 ] in C341 and L806: C352 in ( Fin D80 ) by L804 , L802 , RELAT_1:def 13;
assume L807: C351 in C348;
consider C353 being set such that L808: [ C353 , C351 ] in C341 and L809: C353 in ( Fin D80 ) by L807 , L802 , RELAT_1:def 13;
L810: ( C352 \/ C353 ) in ( Fin D80 ) by L806 , L809 , FINSUB_1:1;
thus L811: { C350 , C351 } in C340 by L810 , L772 , L805 , L806 , L808 , L809;
end;
thus L812: thesis by L803 , COH_SP:6;
end;
L813: C342 is  c=-monotone
proof
let C354 , C355 being set;
assume that
L814: (C354 in ( dom C342 ) & C355 in ( dom C342 ))
and
L815: C354 c= C355;
reconsider D81 = C354 , D82 = C355 as (Element of C339) by L774 , L814;
L816: ( Fin D81 ) c= ( Fin D82 ) by L815 , FINSUB_1:10;
L817: ( C341 .: ( Fin D81 ) ) c= ( C341 .: ( Fin D82 ) ) by L816 , RELAT_1:123;
L818: ( C342 . D81 ) = ( C341 .: ( Fin D81 ) ) by L774;
thus L819: thesis by L818 , L774 , L817;
end;
reconsider D83 = C342 as  U-stable (Function of C339 , C340) by L813 , L774 , L798 , L775 , L394 , FUNCT_2:def 1 , RELSET_1:4;
take D83;
thus L820: C341 = ( Trace D83 )
proof
let C356 , C357 being set;
thus L821:now
assume L822: [ C356 , C357 ] in C341;
L823: ( [ C356 , C357 ] `1 ) = C356;
reconsider D84 = C356 as  finite (Element of C339) by L823 , L771 , L822 , ZFMISC_1:87;
L824: D84 in ( Fin C356 ) by FINSUB_1:def 5;
L825: C357 in ( C341 .: ( Fin C356 ) ) by L824 , L822 , RELAT_1:def 13;
L826:
now
let C358 being set;
assume that
L827: C358 in ( dom D83 )
and
L828: C358 c= D84
and
L829: C357 in ( D83 . C358 );
reconsider D85 = C358 as (Element of C339) by L774 , L827;
L830: C357 in ( C341 .: ( Fin D85 ) ) by L774 , L829;
consider C359 being set such that L831: [ C359 , C357 ] in C341 and L832: C359 in ( Fin D85 ) by L830 , RELAT_1:def 13;
L833: C359 c= C358 by L832 , FINSUB_1:def 5;
L834: ( C359 \/ D84 ) = D84 by L833 , L828 , XBOOLE_1:1 , XBOOLE_1:12;
L835: C359 = C356 by L834 , L773 , L822 , L831 , L832;
thus L836: D84 = C358 by L835 , L828 , L833 , XBOOLE_0:def 10;
end;
L837: ( D83 . D84 ) = ( C341 .: ( Fin C356 ) ) by L774;
thus L838: [ C356 , C357 ] in ( Trace D83 ) by L837 , L774 , L825 , L826 , L662;
end;
assume L839: [ C356 , C357 ] in ( Trace D83 );
L840: (C356 in ( dom D83 ) & C357 in ( D83 . C356 )) by L839 , L662;
L841: C357 in ( C341 .: ( Fin C356 ) ) by L840 , L774;
consider C360 being set such that L842: [ C360 , C357 ] in C341 and L843: C360 in ( Fin C356 ) by L841 , RELAT_1:def 13;
reconsider D86 = C356 as (Element of C339) by L774 , L839 , L662;
L844: C360 in ( Fin D86 ) by L843;
reconsider D87 = C360 as  finite (Element of C339) by L844;
L845: D87 in ( Fin D87 ) by FINSUB_1:def 5;
L846: C357 in ( C341 .: ( Fin D87 ) ) by L845 , L842 , RELAT_1:def 13;
L847: C357 in ( D83 . D87 ) by L846 , L774;
L848: D87 c= D86 by L843 , FINSUB_1:def 5;
thus L849: thesis by L848 , L774 , L839 , L842 , L847 , L662;
end;

thus L850: thesis by L774;
end;
theorem
L851: (for B345 , B346 being Coherence_Space holds (for B347 being (Subset of [: B345 , ( union B346 ) :]) holds (((for B348 being set holds (B348 in B347 implies ( B348 `1 ) is  finite)) & (for B349 , B350 being (Element of B345) holds (( B349 \/ B350 ) in B345 implies (for B351 , B352 being set holds (([ B349 , B351 ] in B347 & [ B350 , B352 ] in B347) implies { B351 , B352 } in B346)))) & (for B353 , B354 being (Element of B345) holds (( B353 \/ B354 ) in B345 implies (for B355 being set holds (([ B353 , B355 ] in B347 & [ B354 , B355 ] in B347) implies B353 = B354))))) implies (ex B356 being  U-stable (Function of B345 , B346) st B347 = ( Trace B356 )))))
proof
let C361 , C362 being Coherence_Space;
let C363 being (Subset of [: C361 , ( union C362 ) :]);
assume L852: (not thesis);
L853: (ex B357 being  U-stable (Function of C361 , C362) st (C363 = ( Trace B357 ) & (for B358 being (Element of C361) holds ( B357 . B358 ) = ( C363 .: ( Fin B358 ) )))) by L852 , L770;
thus L854: thesis by L853 , L852;
end;
theorem
L855: (for B359 , B360 being Coherence_Space holds (for B361 being  U-stable (Function of B359 , B360) holds (for B362 being (Element of B359) holds ( B361 . B362 ) = ( ( Trace B361 ) .: ( Fin B362 ) ))))
proof
let C364 , C365 being Coherence_Space;
let C366 being  U-stable (Function of C364 , C365);
let C367 being (Element of C364);
set D88 = ( Trace C366 );
L856: ( dom C366 ) = C364 by FUNCT_2:def 1;
L857:
now
let C368 being set;
assume L858: C368 in D88;
consider C369 , C370 being set such that L859: C368 = [ C369 , C370 ] and L860: C369 in ( dom C366 ) and L861: C370 in ( C366 . C369 ) and L862: (for B363 being set holds ((B363 in ( dom C366 ) & B363 c= C369 & C370 in ( C366 . B363 )) implies C369 = B363)) by L858 , L647;
L863: C369 is  finite by L856 , L858 , L859 , L697;
thus L864: ( C368 `1 ) is  finite by L863 , L859 , MCART_1:7;
end;
L865: ((for B364 , B365 being (Element of C364) holds (( B364 \/ B365 ) in C364 implies (for B366 , B367 being set holds (([ B364 , B366 ] in D88 & [ B365 , B367 ] in D88) implies { B366 , B367 } in C365)))) & (for B368 , B369 being (Element of C364) holds (( B368 \/ B369 ) in C364 implies (for B370 being set holds (([ B368 , B370 ] in D88 & [ B369 , B370 ] in D88) implies B368 = B369))))) by L707 , L720;
consider C371 being  U-stable (Function of C364 , C365) such that L866: D88 = ( Trace C371 ) and L867: (for B371 being (Element of C364) holds ( C371 . B371 ) = ( D88 .: ( Fin B371 ) )) by L865 , L857 , L770;
L868: ( C371 . C367 ) = ( D88 .: ( Fin C367 ) ) by L867;
thus L869: thesis by L868 , L866 , L757;
end;
theorem
L870: (for B372 , B373 being Coherence_Space holds (for B374 being  U-stable (Function of B372 , B373) holds (for B375 being (Element of B372) holds (for B376 being set holds (B376 in ( B374 . B375 ) iff (ex B377 being (Element of B372) st ([ B377 , B376 ] in ( Trace B374 ) & B377 c= B375)))))))
proof
let C372 , C373 being Coherence_Space;
let C374 being  U-stable (Function of C372 , C373);
let C375 being (Element of C372);
let C376 being set;
L871: ( dom C374 ) = C372 by FUNCT_2:def 1;
thus L872:now
assume L873: C376 in ( C374 . C375 );
consider C377 being set such that L874: C377 is  finite and L875: C377 c= C375 and L876: C376 in ( C374 . C377 ) and L877: (for B378 being set holds ((B378 c= C375 & C376 in ( C374 . B378 )) implies C377 c= B378)) by L873 , L871 , L394;
reconsider D89 = C377 as (Element of C372) by L875 , CLASSES1:def 1;
take D90 = D89;
L878:
now
let C378 being set;
assume that
L879: C378 in ( dom C374 )
and
L880: C378 c= D90
and
L881: C376 in ( C374 . C378 );
L882: C378 c= C375 by L875 , L880 , XBOOLE_1:1;
L883: D90 c= C378 by L882 , L877 , L881;
thus L884: D90 = C378 by L883 , L880 , XBOOLE_0:def 10;
end;
thus L885: [ D90 , C376 ] in ( Trace C374 ) by L878 , L871 , L876 , L662;
thus L886: D90 c= C375 by L875;
end;
given C379 being (Element of C372) such that
L887: [ C379 , C376 ] in ( Trace C374 )
and
L888: C379 c= C375;

L889: C376 in ( C374 . C379 ) by L887 , L662;
L890: ( C374 . C379 ) c= ( C374 . C375 ) by L871 , L888 , L256;
thus L891: thesis by L890 , L889;
end;
theorem
L892: (for B379 , B380 being Coherence_Space holds (ex B381 being  U-stable (Function of B379 , B380) st ( Trace B381 ) = ( {} )))
proof
let C380 , C381 being Coherence_Space;
reconsider D91 = ( {} ) as (Subset of [: C380 , ( union C381 ) :]) by XBOOLE_1:2;
L893: (for B382 , B383 being (Element of C380) holds (( B382 \/ B383 ) in C380 implies (for B384 being set holds (([ B382 , B384 ] in D91 & [ B383 , B384 ] in D91) implies B382 = B383))));
L894: ((for B385 being set holds (B385 in D91 implies ( B385 `1 ) is  finite)) & (for B386 , B387 being (Element of C380) holds (( B386 \/ B387 ) in C380 implies (for B388 , B389 being set holds (([ B386 , B388 ] in D91 & [ B387 , B389 ] in D91) implies { B388 , B389 } in C381)))));
thus L895: thesis by L894 , L893 , L851;
end;
theorem
L896: (for B390 , B391 being Coherence_Space holds (for B392 being  finite (Element of B390) holds (for B393 being set holds (B393 in ( union B391 ) implies (ex B394 being  U-stable (Function of B390 , B391) st ( Trace B394 ) = { [ B392 , B393 ] })))))
proof
let C382 , C383 being Coherence_Space;
let C384 being  finite (Element of C382);
let C385 being set;
assume L897: C385 in ( union C383 );
L898: [ C384 , C385 ] in [: C382 , ( union C383 ) :] by L897 , ZFMISC_1:87;
reconsider D92 = { [ C384 , C385 ] } as (Subset of [: C382 , ( union C383 ) :]) by L898 , ZFMISC_1:31;
L899:
now
let C386 , C387 being (Element of C382);
assume L900: ( C386 \/ C387 ) in C382;
let C388 , C389 being set;
assume that
L901: [ C386 , C388 ] in D92
and
L902: [ C387 , C389 ] in D92;
L903: [ C387 , C389 ] = [ C384 , C385 ] by L902 , TARSKI:def 1;
L904: C389 = C385 by L903 , XTUPLE_0:1;
L905: [ C386 , C388 ] = [ C384 , C385 ] by L901 , TARSKI:def 1;
L906: C388 = C385 by L905 , XTUPLE_0:1;
L907: { C388 , C389 } = { C385 } by L906 , L904 , ENUMSET1:29;
thus L908: { C388 , C389 } in C383 by L907 , L897 , COH_SP:4;
end;
L909:
now
let C390 , C391 being (Element of C382);
assume L910: ( C390 \/ C391 ) in C382;
let C392 being set;
assume L911: ([ C390 , C392 ] in D92 & [ C391 , C392 ] in D92);
L912: ([ C390 , C392 ] = [ C384 , C385 ] & [ C391 , C392 ] = [ C384 , C385 ]) by L911 , TARSKI:def 1;
thus L913: C390 = C391 by L912 , XTUPLE_0:1;
end;
L914:
now
let C393 being set;
assume L915: C393 in D92;
L916: C393 = [ C384 , C385 ] by L915 , TARSKI:def 1;
thus L917: ( C393 `1 ) is  finite by L916 , MCART_1:7;
end;
thus L918: thesis by L914 , L899 , L909 , L851;
end;
theorem
L919: (for B395 , B396 being Coherence_Space holds (for B397 being (Element of B395) holds (for B398 being set holds (for B399 being  U-stable (Function of B395 , B396) holds (( Trace B399 ) = { [ B397 , B398 ] } implies (for B400 being (Element of B395) holds ((B397 c= B400 implies ( B399 . B400 ) = { B398 }) & ((not B397 c= B400) implies ( B399 . B400 ) = ( {} )))))))))
proof
let C394 , C395 being Coherence_Space;
let C396 being (Element of C394);
let C397 being set;
let C398 being  U-stable (Function of C394 , C395);
assume L920: ( Trace C398 ) = { [ C396 , C397 ] };
let C399 being (Element of C394);
L921: [ C396 , C397 ] in ( Trace C398 ) by L920 , TARSKI:def 1;
thus L922:now
L923: ( C398 . C399 ) c= { C397 }
proof
let C400 being set;
assume L924: C400 in ( C398 . C399 );
consider C401 being (Element of C394) such that L925: [ C401 , C400 ] in ( Trace C398 ) and L926: C401 c= C399 by L924 , L870;
L927: [ C401 , C400 ] = [ C396 , C397 ] by L920 , L925 , TARSKI:def 1;
L928: C400 = C397 by L927 , XTUPLE_0:1;
thus L929: thesis by L928 , TARSKI:def 1;
end;
assume L930: C396 c= C399;
L931: C397 in ( C398 . C399 ) by L930 , L921 , L870;
L932: { C397 } c= ( C398 . C399 ) by L931 , ZFMISC_1:31;
thus L933: ( C398 . C399 ) = { C397 } by L932 , L923 , XBOOLE_0:def 10;
end;
assume that
L934: (not C396 c= C399)
and
L935: ( C398 . C399 ) <> ( {} );
reconsider D93 = ( C398 . C399 ) as non  empty set by L935;
set D94 = the (Element of D93);
consider C402 being (Element of C394) such that L936: [ C402 , D94 ] in ( Trace C398 ) and L937: C402 c= C399 by L870;
L938: [ C402 , D94 ] = [ C396 , C397 ] by L920 , L936 , TARSKI:def 1;
thus L939: thesis by L938 , L934 , L937 , XTUPLE_0:1;
end;
theorem
L940: (for B401 , B402 being Coherence_Space holds (for B403 being  U-stable (Function of B401 , B402) holds (for B404 being (Subset of ( Trace B403 )) holds (ex B405 being  U-stable (Function of B401 , B402) st ( Trace B405 ) = B404))))
proof
let C403 , C404 being Coherence_Space;
let C405 being  U-stable (Function of C403 , C404);
let C406 being (Subset of ( Trace C405 ));
L941: (for B406 , B407 being (Element of C403) holds (( B406 \/ B407 ) in C403 implies (for B408 being set holds (([ B406 , B408 ] in C406 & [ B407 , B408 ] in C406) implies B406 = B407)))) by L720;
L942:
now
let C407 being set;
assume L943: C407 in C406;
consider C408 , C409 being set such that L944: C407 = [ C408 , C409 ] and L945: C408 in ( dom C405 ) and L946: C409 in ( C405 . C408 ) and L947: (for B409 being set holds ((B409 in ( dom C405 ) & B409 c= C408 & C409 in ( C405 . B409 )) implies C408 = B409)) by L943 , L647;
L948: ( dom C405 ) = C403 by FUNCT_2:def 1;
L949: C408 is  finite by L948 , L943 , L944 , L697;
thus L950: ( C407 `1 ) is  finite by L949 , L944 , MCART_1:7;
end;
L951: (C406 is (Subset of [: C403 , ( union C404 ) :]) & (for B410 , B411 being (Element of C403) holds (( B410 \/ B411 ) in C403 implies (for B412 , B413 being set holds (([ B410 , B412 ] in C406 & [ B411 , B413 ] in C406) implies { B412 , B413 } in C404))))) by L707 , XBOOLE_1:1;
thus L952: thesis by L951 , L942 , L941 , L851;
end;
theorem
L953: (for B414 , B415 being Coherence_Space holds (for B416 being set holds ((for B417 , B418 being set holds ((B417 in B416 & B418 in B416) implies (ex B419 being  U-stable (Function of B414 , B415) st ( B417 \/ B418 ) = ( Trace B419 )))) implies (ex B420 being  U-stable (Function of B414 , B415) st ( union B416 ) = ( Trace B420 )))))
proof
let C410 , C411 being Coherence_Space;
let C412 being set;
assume that
L954: (for B421 , B422 being set holds ((B421 in C412 & B422 in C412) implies (ex B423 being  U-stable (Function of C410 , C411) st ( B421 \/ B422 ) = ( Trace B423 ))));
set D95 = ( union C412 );
L955:
now
let C413 , C414 being (Element of C410);
assume that
L956: ( C413 \/ C414 ) in C410;
let C415 , C416 being set;
assume L957: [ C413 , C415 ] in D95;
consider C417 being set such that L958: [ C413 , C415 ] in C417 and L959: C417 in C412 by L957 , TARSKI:def 4;
assume L960: [ C414 , C416 ] in D95;
consider C418 being set such that L961: [ C414 , C416 ] in C418 and L962: C418 in C412 by L960 , TARSKI:def 4;
L963: (C417 c= ( C417 \/ C418 ) & C418 c= ( C417 \/ C418 )) by XBOOLE_1:7;
L964: (ex B424 being  U-stable (Function of C410 , C411) st ( C417 \/ C418 ) = ( Trace B424 )) by L954 , L959 , L962;
thus L965: { C415 , C416 } in C411 by L964 , L956 , L958 , L961 , L963 , L707;
end;
L966:
now
let C419 , C420 being (Element of C410);
assume that
L967: ( C419 \/ C420 ) in C410;
let C421 being set;
assume L968: [ C419 , C421 ] in D95;
consider C422 being set such that L969: [ C419 , C421 ] in C422 and L970: C422 in C412 by L968 , TARSKI:def 4;
assume L971: [ C420 , C421 ] in D95;
consider C423 being set such that L972: [ C420 , C421 ] in C423 and L973: C423 in C412 by L971 , TARSKI:def 4;
L974: (C422 c= ( C422 \/ C423 ) & C423 c= ( C422 \/ C423 )) by XBOOLE_1:7;
L975: (ex B425 being  U-stable (Function of C410 , C411) st ( C422 \/ C423 ) = ( Trace B425 )) by L954 , L970 , L973;
thus L976: C419 = C420 by L975 , L967 , L969 , L972 , L974 , L720;
end;
L977:
now
let C424 being set;
assume L978: C424 in D95;
consider C425 being set such that L979: C424 in C425 and L980: C425 in C412 by L978 , TARSKI:def 4;
L981: ( C425 \/ C425 ) = C425;
consider C426 being  U-stable (Function of C410 , C411) such that L982: C425 = ( Trace C426 ) by L981 , L954 , L980;
consider C427 , C428 being set such that L983: C424 = [ C427 , C428 ] and L984: C427 in ( dom C426 ) and L985: C428 in ( C426 . C427 ) and L986: (for B426 being set holds ((B426 in ( dom C426 ) & B426 c= C427 & C428 in ( C426 . B426 )) implies C427 = B426)) by L979 , L982 , L647;
L987: ( dom C426 ) = C410 by FUNCT_2:def 1;
L988: C427 is  finite by L987 , L979 , L982 , L983 , L697;
thus L989: ( C424 `1 ) is  finite by L988 , L983 , MCART_1:7;
end;
L990: D95 c= [: C410 , ( union C411 ) :]
proof
let C429 being set;
assume L991: C429 in D95;
consider C430 being set such that L992: C429 in C430 and L993: C430 in C412 by L991 , TARSKI:def 4;
L994: ( C430 \/ C430 ) = C430;
L995: (ex B427 being  U-stable (Function of C410 , C411) st C430 = ( Trace B427 )) by L994 , L954 , L993;
thus L996: thesis by L995 , L992;
end;
thus L997: thesis by L990 , L977 , L955 , L966 , L851;
end;
definition
let C431 , C432 being Coherence_Space;
func StabCoh (C431 , C432) -> set means 
:L998: (for B428 being set holds (B428 in it iff (ex B429 being  U-stable (Function of C431 , C432) st B428 = ( Trace B429 ))));
uniqueness
proof
let C433 , C434 being set;
assume L999: (not thesis);
consider C435 being set such that L1000: (not (C435 in C433 iff C435 in C434)) by L999 , TARSKI:1;
L1001: (C435 in C434 iff (not (ex B430 being  U-stable (Function of C431 , C432) st C435 = ( Trace B430 )))) by L999 , L1000;
thus L1002: thesis by L1001 , L999;
end;
existence
proof
defpred S10[ set ] means (ex B431 being  U-stable (Function of C431 , C432) st $1 = ( Trace B431 ));
consider C436 being set such that L1003: (for B432 being set holds (B432 in C436 iff (B432 in ( bool [: C431 , ( union C432 ) :] ) & S10[ B432 ]))) from XBOOLE_0:sch 1;
take C436;
let C437 being set;
thus L1004: thesis by L1003;
end;
end;
registration
let C438 , C439 being Coherence_Space;
cluster ( StabCoh (C438 , C439) ) -> non  empty  subset-closed  binary_complete;
coherence
proof
set D96 = ( StabCoh (C438 , C439) );
set D97 = the  U-stable (Function of C438 , C439);
L1006: ( Trace D97 ) in D96 by L998;
thus L1007: D96 is non  empty by L1006;
thus L1008: D96 is  subset-closed
proof
let C440 , C441 being set;
assume L1009: C440 in D96;
L1010: (ex B433 being  U-stable (Function of C438 , C439) st C440 = ( Trace B433 )) by L1009 , L998;
assume L1011: C441 c= C440;
L1012: (ex B434 being  U-stable (Function of C438 , C439) st ( Trace B434 ) = C441) by L1011 , L1010 , L940;
thus L1013: thesis by L1012 , L998;
end;

let C442 being set;
assume L1014: (for B435 , B436 being set holds ((B435 in C442 & B436 in C442) implies ( B435 \/ B436 ) in D96));
L1015:
now
let C443 , C444 being set;
assume L1016: (C443 in C442 & C444 in C442);
L1017: ( C443 \/ C444 ) in D96 by L1016 , L1014;
thus L1018: (ex B437 being  U-stable (Function of C438 , C439) st ( C443 \/ C444 ) = ( Trace B437 )) by L1017 , L998;
end;
L1019: (ex B438 being  U-stable (Function of C438 , C439) st ( union C442 ) = ( Trace B438 )) by L1015 , L953;
thus L1020: thesis by L1019 , L998;
end;
end;
theorem
L1022: (for B439 , B440 being Coherence_Space holds (for B441 being  U-stable (Function of B439 , B440) holds ( Trace B441 ) c= [: ( Sub_of_Fin B439 ) , ( union B440 ) :]))
proof
let C445 , C446 being Coherence_Space;
let C447 being  U-stable (Function of C445 , C446);
let C448 , C449 being set;
assume L1023: [ C448 , C449 ] in ( Trace C447 );
consider C450 , C451 being set such that L1024: [ C448 , C449 ] = [ C450 , C451 ] and L1025: C450 in ( dom C447 ) and L1026: C451 in ( C447 . C450 ) and L1027: (for B442 being set holds ((B442 in ( dom C447 ) & B442 c= C450 & C451 in ( C447 . B442 )) implies C450 = B442)) by L1023 , L647;
L1028: ( dom C447 ) = C445 by FUNCT_2:def 1;
L1029: C450 is  finite by L1028 , L1023 , L1024 , L697;
L1030: C450 in ( Sub_of_Fin C445 ) by L1029 , L1025 , L1028 , L15;
L1031: C451 in ( union C446 ) by L1025 , L1026 , L1028 , L1;
thus L1032: thesis by L1031 , L1024 , L1030 , ZFMISC_1:87;
end;
theorem
L1033: (for B443 , B444 being Coherence_Space holds ( union ( StabCoh (B443 , B444) ) ) = [: ( Sub_of_Fin B443 ) , ( union B444 ) :])
proof
let C452 , C453 being Coherence_Space;
thus L1034: ( union ( StabCoh (C452 , C453) ) ) c= [: ( Sub_of_Fin C452 ) , ( union C453 ) :]
proof
let C454 being set;
assume L1035: C454 in ( union ( StabCoh (C452 , C453) ) );
consider C455 being set such that L1036: C454 in C455 and L1037: C455 in ( StabCoh (C452 , C453) ) by L1035 , TARSKI:def 4;
L1038: (ex B445 being  U-stable (Function of C452 , C453) st C455 = ( Trace B445 )) by L1037 , L998;
L1039: C455 c= [: ( Sub_of_Fin C452 ) , ( union C453 ) :] by L1038 , L1022;
thus L1040: thesis by L1039 , L1036;
end;

let C456 , C457 being set;
assume L1041: [ C456 , C457 ] in [: ( Sub_of_Fin C452 ) , ( union C453 ) :];
L1042: C457 in ( union C453 ) by L1041 , ZFMISC_1:87;
L1043: C456 in ( Sub_of_Fin C452 ) by L1041 , ZFMISC_1:87;
L1044: C456 is  finite by L1043 , L15;
L1045: (ex B446 being  U-stable (Function of C452 , C453) st ( Trace B446 ) = { [ C456 , C457 ] }) by L1044 , L1043 , L1042 , L896;
L1046: ([ C456 , C457 ] in { [ C456 , C457 ] } & { [ C456 , C457 ] } in ( StabCoh (C452 , C453) )) by L1045 , L998 , TARSKI:def 1;
thus L1047: thesis by L1046 , TARSKI:def 4;
end;
theorem
L1048: (for B447 , B448 being Coherence_Space holds (for B449 , B450 being  finite (Element of B447) holds (for B451 , B452 being set holds ([ [ B449 , B451 ] , [ B450 , B452 ] ] in ( Web ( StabCoh (B447 , B448) ) ) iff (((not ( B449 \/ B450 ) in B447) & B451 in ( union B448 ) & B452 in ( union B448 )) or ([ B451 , B452 ] in ( Web B448 ) & (B451 = B452 implies B449 = B450)))))))
proof
let C458 , C459 being Coherence_Space;
let C460 , C461 being  finite (Element of C458);
let C462 , C463 being set;
thus L1049:now
assume L1050: [ [ C460 , C462 ] , [ C461 , C463 ] ] in ( Web ( StabCoh (C458 , C459) ) );
L1051: { [ C460 , C462 ] , [ C461 , C463 ] } in ( StabCoh (C458 , C459) ) by L1050 , COH_SP:5;
L1052: (ex B453 being  U-stable (Function of C458 , C459) st { [ C460 , C462 ] , [ C461 , C463 ] } = ( Trace B453 )) by L1051 , L998;
L1053: ([ C460 , C462 ] in { [ C460 , C462 ] , [ C461 , C463 ] } & [ C461 , C463 ] in { [ C460 , C462 ] , [ C461 , C463 ] }) by TARSKI:def 2;
assume L1054: (( C460 \/ C461 ) in C458 or (not C462 in ( union C459 )) or (not C463 in ( union C459 )));
L1055: { C462 , C463 } in C459 by L1054 , L1052 , L1053 , L707 , ZFMISC_1:87;
thus L1056: [ C462 , C463 ] in ( Web C459 ) by L1055 , COH_SP:5;
thus L1057: (C462 = C463 implies C460 = C461) by L1052 , L1053 , L1054 , L720 , ZFMISC_1:87;
end;
assume L1058: (((not ( C460 \/ C461 ) in C458) & C462 in ( union C459 ) & C463 in ( union C459 )) or ([ C462 , C463 ] in ( Web C459 ) & (C462 = C463 implies C460 = C461)));
L1059: C463 in ( union C459 ) by L1058 , ZFMISC_1:87;
L1060: [ C461 , C463 ] in [: C458 , ( union C459 ) :] by L1059 , ZFMISC_1:87;
L1061: C462 in ( union C459 ) by L1058 , ZFMISC_1:87;
L1062: [ C460 , C462 ] in [: C458 , ( union C459 ) :] by L1061 , ZFMISC_1:87;
reconsider D98 = { [ C460 , C462 ] , [ C461 , C463 ] } as (Subset of [: C458 , ( union C459 ) :]) by L1062 , L1060 , ZFMISC_1:32;
L1063:
now
let C464 , C465 being (Element of C458);
assume L1064: ( C464 \/ C465 ) in C458;
let C466 , C467 being set;
assume that
L1065: [ C464 , C466 ] in D98
and
L1066: [ C465 , C467 ] in D98;
L1067: ([ C465 , C467 ] = [ C460 , C462 ] or [ C465 , C467 ] = [ C461 , C463 ]) by L1066 , TARSKI:def 2;
L1068: ((C467 = C462 & C465 = C460) or (C465 = C461 & C467 = C463)) by L1067 , XTUPLE_0:1;
L1069: ([ C464 , C466 ] = [ C460 , C462 ] or [ C464 , C466 ] = [ C461 , C463 ]) by L1065 , TARSKI:def 2;
L1070: ((C466 = C462 & C464 = C460) or (C464 = C461 & C466 = C463)) by L1069 , XTUPLE_0:1;
L1071: ({ C466 , C467 } = { C462 } or { C466 , C467 } in C459 or { C466 , C467 } = { C463 }) by L1070 , L1058 , L1064 , L1068 , COH_SP:5 , ENUMSET1:29;
thus L1072: { C466 , C467 } in C459 by L1071 , L1061 , L1059 , COH_SP:4;
end;
L1073:
now
let C468 , C469 being (Element of C458);
assume L1074: ( C468 \/ C469 ) in C458;
let C470 being set;
assume that
L1075: [ C468 , C470 ] in D98
and
L1076: [ C469 , C470 ] in D98;
L1077: ([ C468 , C470 ] = [ C460 , C462 ] or [ C468 , C470 ] = [ C461 , C463 ]) by L1075 , TARSKI:def 2;
L1078: ((C468 = C460 & C470 = C462) or (C468 = C461 & C470 = C463)) by L1077 , XTUPLE_0:1;
L1079: ([ C469 , C470 ] = [ C460 , C462 ] or [ C469 , C470 ] = [ C461 , C463 ]) by L1076 , TARSKI:def 2;
thus L1080: C468 = C469 by L1079 , L1058 , L1074 , L1078 , XTUPLE_0:1;
end;
L1081:
now
let C471 being set;
assume L1082: C471 in D98;
L1083: (C471 = [ C460 , C462 ] or C471 = [ C461 , C463 ]) by L1082 , TARSKI:def 2;
thus L1084: ( C471 `1 ) is  finite by L1083 , MCART_1:7;
end;
L1085: (ex B454 being  U-stable (Function of C458 , C459) st D98 = ( Trace B454 )) by L1081 , L1063 , L1073 , L851;
L1086: D98 in ( StabCoh (C458 , C459) ) by L1085 , L998;
thus L1087: thesis by L1086 , COH_SP:5;
end;
begin
theorem
L1088: (for B455 , B456 being Coherence_Space holds (for B457 being  U-stable (Function of B455 , B456) holds (B457 is  U-linear iff (for B458 , B459 being set holds ([ B458 , B459 ] in ( Trace B457 ) implies (ex B460 being set st B458 = { B460 }))))))
proof
let C472 , C473 being Coherence_Space;
let C474 being  U-stable (Function of C472 , C473);
L1089: ( dom C474 ) = C472 by FUNCT_2:def 1;
thus L1090:now
assume L1091: C474 is  U-linear;
let C475 , C476 being set;
assume L1092: [ C475 , C476 ] in ( Trace C474 );
L1093: C475 in ( dom C474 ) by L1092 , L662;
L1094: C476 in ( C474 . C475 ) by L1092 , L662;
consider C477 being set such that L1095: C477 in C475 and L1096: C476 in ( C474 . { C477 } ) and L1097: (for B461 being set holds ((B461 c= C475 & C476 in ( C474 . B461 )) implies C477 in B461)) by L1094 , L1089 , L1091 , L1093 , L443;
L1098: { C477 } c= C475 by L1095 , ZFMISC_1:31;
take D99 = C477;
L1099: { D99 , D99 } = { D99 } by ENUMSET1:29;
L1100: { D99 , D99 } in C472 by L1089 , L1093 , L1095 , COH_SP:6;
thus L1101: C475 = { D99 } by L1100 , L1089 , L1092 , L1096 , L1098 , L1099 , L662;
end;
assume L1102: (for B462 , B463 being set holds ([ B462 , B463 ] in ( Trace C474 ) implies (ex B464 being set st B462 = { B464 })));
L1103:
now
let C478 , C479 being set;
assume that
L1104: C478 in ( dom C474 )
and
L1105: C479 in ( C474 . C478 );
consider C480 being set such that L1106: C480 is  finite and L1107: C480 c= C478 and L1108: C479 in ( C474 . C480 ) and L1109: (for B465 being set holds ((B465 c= C478 & C479 in ( C474 . B465 )) implies C480 c= B465)) by L1089 , L1104 , L1105 , L394;
L1110:
now
thus L1111: C480 in ( dom C474 ) by L1089 , L1104 , L1107 , CLASSES1:def 1;
let C481 being set;
assume that
L1112: C481 in ( dom C474 )
and
L1113: C481 c= C480
and
L1114: C479 in ( C474 . C481 );
L1115: C481 c= C478 by L1107 , L1113 , XBOOLE_1:1;
L1116: C480 c= C481 by L1115 , L1109 , L1114;
thus L1117: C480 = C481 by L1116 , L1113 , XBOOLE_0:def 10;
end;
L1118: [ C480 , C479 ] in ( Trace C474 ) by L1110 , L1108 , L662;
consider C482 being set such that L1119: C480 = { C482 } by L1118 , L1102;
take D100 = C482;
L1120: D100 in C480 by L1119 , TARSKI:def 1;
thus L1121: (D100 in C478 & C479 in ( C474 . { D100 } )) by L1120 , L1107 , L1108 , L1119;
let C483 being set;
assume L1122: (C483 c= C478 & C479 in ( C474 . C483 ));
L1123: C480 c= C483 by L1122 , L1109;
thus L1124: D100 in C483 by L1123 , L1119 , ZFMISC_1:31;
end;
thus L1125: thesis by L1103 , L1089 , L443;
end;
definition
let C484 being Function;
func LinTrace C484 -> set means 
:L1126: (for B466 being set holds (B466 in it iff (ex B467 , B468 being set st (B466 = [ B467 , B468 ] & [ { B467 } , B468 ] in ( Trace C484 )))));
uniqueness
proof
let C485 , C486 being set;
assume L1127: (not thesis);
consider C487 being set such that L1128: (not (C487 in C485 iff C487 in C486)) by L1127 , TARSKI:1;
L1129: (C487 in C486 iff (not (ex B469 , B470 being set st (C487 = [ B469 , B470 ] & [ { B469 } , B470 ] in ( Trace C484 ))))) by L1127 , L1128;
thus L1130: thesis by L1129 , L1127;
end;
existence
proof
defpred S11[ set ] means (ex B471 , B472 being set st ($1 = [ B471 , B472 ] & [ { B471 } , B472 ] in ( Trace C484 )));
set D101 = ( dom C484 );
set D102 = ( rng C484 );
consider C488 being set such that L1131: (for B473 being set holds (B473 in C488 iff (B473 in [: ( union D101 ) , ( union D102 ) :] & S11[ B473 ]))) from XBOOLE_0:sch 1;
take C488;
let C489 being set;
L1132:
now
given C490 , C491 being set such that
L1133: C489 = [ C490 , C491 ]
and
L1134: [ { C490 } , C491 ] in ( Trace C484 );

L1135: { C490 } in D101 by L1134 , L662;
L1136: ( C484 . { C490 } ) in D102 by L1135 , FUNCT_1:def 3;
L1137: C491 in ( C484 . { C490 } ) by L1134 , L662;
L1138: C491 in ( union D102 ) by L1137 , L1136 , TARSKI:def 4;
L1139: C490 in { C490 } by TARSKI:def 1;
L1140: C490 in ( union D101 ) by L1139 , L1135 , TARSKI:def 4;
thus L1141: C489 in [: ( union D101 ) , ( union D102 ) :] by L1140 , L1133 , L1138 , ZFMISC_1:87;
end;
thus L1142: thesis by L1132 , L1131;
end;
end;
theorem
L1144: (for B474 being Function holds (for B475 , B476 being set holds ([ B475 , B476 ] in ( LinTrace B474 ) iff [ { B475 } , B476 ] in ( Trace B474 ))))
proof
let C492 being Function;
let C493 , C494 being set;
L1145:
now
given C495 , C496 being set such that
L1146: [ C493 , C494 ] = [ C495 , C496 ]
and
L1147: [ { C495 } , C496 ] in ( Trace C492 );

L1148: C493 = C495 by L1146 , XTUPLE_0:1;
thus L1149: [ { C493 } , C494 ] in ( Trace C492 ) by L1148 , L1146 , L1147 , XTUPLE_0:1;
end;
thus L1150: thesis by L1145 , L1126;
end;
theorem
L1151: (for B477 being Function holds (( B477 . ( {} ) ) = ( {} ) implies (for B478 , B479 being set holds (({ B478 } in ( dom B477 ) & B479 in ( B477 . { B478 } )) implies [ B478 , B479 ] in ( LinTrace B477 )))))
proof
let C497 being Function;
assume L1152: ( C497 . ( {} ) ) = ( {} );
let C498 , C499 being set;
set D103 = { C498 };
L1153: ([ C498 , C499 ] in ( LinTrace C497 ) iff [ { C498 } , C499 ] in ( Trace C497 )) by L1144;
L1154: ([ C498 , C499 ] in ( LinTrace C497 ) iff ({ C498 } in ( dom C497 ) & C499 in ( C497 . { C498 } ) & (for B480 being set holds ((B480 in ( dom C497 ) & B480 c= D103 & C499 in ( C497 . B480 )) implies D103 = B480)))) by L1153 , L662;
thus L1155: thesis by L1154 , L1152 , ZFMISC_1:33;
end;
theorem
L1156: (for B481 being Function holds (for B482 , B483 being set holds ([ B482 , B483 ] in ( LinTrace B481 ) implies ({ B482 } in ( dom B481 ) & B483 in ( B481 . { B482 } )))))
proof
let C500 being Function;
let C501 , C502 being set;
assume L1157: [ C501 , C502 ] in ( LinTrace C500 );
L1158: [ { C501 } , C502 ] in ( Trace C500 ) by L1157 , L1144;
thus L1159: thesis by L1158 , L662;
end;
definition
let C503 , C504 being non  empty set;
let C505 being (Function of C503 , C504);
redefine func LinTrace C505 -> (Subset of [: ( union C503 ) , ( union C504 ) :]);

coherence
proof
L1160: ( LinTrace C505 ) c= [: ( union C503 ) , ( union C504 ) :]
proof
let C506 being set;
assume L1161: C506 in ( LinTrace C505 );
consider C507 , C508 being set such that L1162: C506 = [ C507 , C508 ] and L1163: [ { C507 } , C508 ] in ( Trace C505 ) by L1161 , L1126;
L1164: C507 in { C507 } by TARSKI:def 1;
L1165: ( dom C505 ) = C503 by FUNCT_2:def 1;
L1166: { C507 } in C503 by L1165 , L1163 , L662;
L1167: C507 in ( union C503 ) by L1166 , L1164 , TARSKI:def 4;
L1168: C508 in ( union C504 ) by L1163 , ZFMISC_1:87;
thus L1169: thesis by L1168 , L1162 , L1167 , ZFMISC_1:87;
end;
thus L1170: thesis by L1160;
end;
end;
registration
let C509 being Function;
cluster ( LinTrace C509 ) ->  Relation-like;
coherence
proof
let C510 being set;
assume L1172: C510 in ( LinTrace C509 );
L1173: (ex B484 , B485 being set st (C510 = [ B484 , B485 ] & [ { B484 } , B485 ] in ( Trace C509 ))) by L1172 , L1126;
thus L1174: thesis by L1173;
end;
end;
definition
let C511 , C512 being Coherence_Space;
func LinCoh (C511 , C512) -> set means 
:L1176: (for B486 being set holds (B486 in it iff (ex B487 being  U-linear (Function of C511 , C512) st B486 = ( LinTrace B487 ))));
uniqueness
proof
let C513 , C514 being set;
assume L1177: (not thesis);
consider C515 being set such that L1178: (not (C515 in C513 iff C515 in C514)) by L1177 , TARSKI:1;
L1179: (C515 in C514 iff (not (ex B488 being  U-linear (Function of C511 , C512) st C515 = ( LinTrace B488 )))) by L1177 , L1178;
thus L1180: thesis by L1179 , L1177;
end;
existence
proof
defpred S12[ set ] means (ex B489 being  U-linear (Function of C511 , C512) st $1 = ( LinTrace B489 ));
consider C516 being set such that L1181: (for B490 being set holds (B490 in C516 iff (B490 in ( bool [: ( union C511 ) , ( union C512 ) :] ) & S12[ B490 ]))) from XBOOLE_0:sch 1;
take C516;
let C517 being set;
thus L1182: thesis by L1181;
end;
end;
theorem
L1184: (for B491 , B492 being Coherence_Space holds (for B493 being  c=-monotone (Function of B491 , B492) holds (for B494 , B495 being set holds ({ B494 , B495 } in B491 implies (for B496 , B497 being set holds (([ B494 , B496 ] in ( LinTrace B493 ) & [ B495 , B497 ] in ( LinTrace B493 )) implies { B496 , B497 } in B492))))))
proof
let C518 , C519 being Coherence_Space;
let C520 being  c=-monotone (Function of C518 , C519);
L1185: ( dom C520 ) = C518 by FUNCT_2:def 1;
let C521 , C522 being set;
assume L1186: { C521 , C522 } in C518;
reconsider D104 = { C521 , C522 } as (Element of C518) by L1186;
L1187: { C522 } c= D104 by ZFMISC_1:7;
L1188: { C522 } in C518 by L1187 , CLASSES1:def 1;
L1189: ( C520 . { C522 } ) c= ( C520 . D104 ) by L1188 , L1185 , L1187 , L256;
let C523 , C524 being set;
assume L1190: ([ C521 , C523 ] in ( LinTrace C520 ) & [ C522 , C524 ] in ( LinTrace C520 ));
L1191: (C523 in ( C520 . { C521 } ) & C524 in ( C520 . { C522 } )) by L1190 , L1156;
L1192: { C521 } c= D104 by ZFMISC_1:7;
L1193: { C521 } in C518 by L1192 , CLASSES1:def 1;
L1194: ( C520 . { C521 } ) c= ( C520 . D104 ) by L1193 , L1185 , L1192 , L256;
L1195: { C523 , C524 } c= ( C520 . D104 ) by L1194 , L1189 , L1191 , ZFMISC_1:32;
thus L1196: thesis by L1195 , CLASSES1:def 1;
end;
theorem
L1197: (for B498 , B499 being Coherence_Space holds (for B500 being  cap-distributive (Function of B498 , B499) holds (for B501 , B502 being set holds ({ B501 , B502 } in B498 implies (for B503 being set holds (([ B501 , B503 ] in ( LinTrace B500 ) & [ B502 , B503 ] in ( LinTrace B500 )) implies B501 = B502))))))
proof
let C525 , C526 being Coherence_Space;
let C527 being  cap-distributive (Function of C525 , C526);
let C528 , C529 being set;
set D105 = { C528 , C529 };
assume L1198: D105 in C525;
let C530 being set;
L1199: D105 = ( { C528 } \/ { C529 } ) by ENUMSET1:1;
assume L1200: ([ C528 , C530 ] in ( LinTrace C527 ) & [ C529 , C530 ] in ( LinTrace C527 ));
L1201: ([ { C528 } , C530 ] in ( Trace C527 ) & [ { C529 } , C530 ] in ( Trace C527 )) by L1200 , L1144;
L1202: { C528 } = { C529 } by L1201 , L1198 , L1199 , L720;
thus L1203: thesis by L1202 , ZFMISC_1:3;
end;
theorem
L1204: (for B504 , B505 being Coherence_Space holds (for B506 , B507 being  U-linear (Function of B504 , B505) holds (( LinTrace B506 ) = ( LinTrace B507 ) implies B506 = B507)))
proof
let C531 , C532 being Coherence_Space;
let C533 , C534 being  U-linear (Function of C531 , C532);
assume L1205: ( LinTrace C533 ) = ( LinTrace C534 );
L1206: ( Trace C533 ) = ( Trace C534 )
proof
let C535 , C536 being set;
thus L1207:now
assume L1208: [ C535 , C536 ] in ( Trace C533 );
consider C537 being set such that L1209: C535 = { C537 } by L1208 , L1088;
L1210: [ C537 , C536 ] in ( LinTrace C533 ) by L1208 , L1209 , L1144;
thus L1211: [ C535 , C536 ] in ( Trace C534 ) by L1210 , L1205 , L1209 , L1144;
end;
assume L1212: [ C535 , C536 ] in ( Trace C534 );
consider C538 being set such that L1213: C535 = { C538 } by L1212 , L1088;
L1214: [ C538 , C536 ] in ( LinTrace C534 ) by L1212 , L1213 , L1144;
thus L1215: thesis by L1214 , L1205 , L1213 , L1144;
end;
thus L1216: thesis by L1206 , L757;
end;
L1217: (for B508 , B509 being Coherence_Space holds (for B510 being (Subset of [: ( union B508 ) , ( union B509 ) :]) holds (((for B511 , B512 being set holds ({ B511 , B512 } in B508 implies (for B513 , B514 being set holds (([ B511 , B513 ] in B510 & [ B512 , B514 ] in B510) implies { B513 , B514 } in B509)))) & (for B515 , B516 being set holds ({ B515 , B516 } in B508 implies (for B517 being set holds (([ B515 , B517 ] in B510 & [ B516 , B517 ] in B510) implies B515 = B516))))) implies (ex B518 being  U-linear (Function of B508 , B509) st (B510 = ( LinTrace B518 ) & (for B519 being (Element of B508) holds ( B518 . B519 ) = ( B510 .: B519 )))))))
proof
let C539 , C540 being Coherence_Space;
let C541 being (Subset of [: ( union C539 ) , ( union C540 ) :]);
assume that
L1218: (for B520 , B521 being set holds ({ B520 , B521 } in C539 implies (for B522 , B523 being set holds (([ B520 , B522 ] in C541 & [ B521 , B523 ] in C541) implies { B522 , B523 } in C540))))
and
L1219: (for B524 , B525 being set holds ({ B524 , B525 } in C539 implies (for B526 being set holds (([ B524 , B526 ] in C541 & [ B525 , B526 ] in C541) implies B524 = B525))));
deffunc H3(set) = ( C541 .: $1 );
consider C542 being Function such that L1220: (( dom C542 ) = C539 & (for B527 being set holds (B527 in C539 implies ( C542 . B527 ) = H3(B527)))) from FUNCT_1:sch 3;
L1221:
now
let C543 , C544 being set;
assume that
L1222: C543 in ( dom C542 )
and
L1223: C544 in ( C542 . C543 );
reconsider D106 = C543 as (Element of C539) by L1220 , L1222;
L1224: C544 in ( C541 .: C543 ) by L1220 , L1222 , L1223;
consider C545 being set such that L1225: [ C545 , C544 ] in C541 and L1226: C545 in C543 by L1224 , RELAT_1:def 13;
take D107 = C545;
L1227: { D107 } c= C543 by L1226 , ZFMISC_1:31;
L1228: { D107 } in C539 by L1227 , L1220 , L1222 , CLASSES1:def 1;
L1229: (D107 in { D107 } & ( C542 . { D107 } ) = ( C541 .: { D107 } )) by L1228 , L1220 , TARSKI:def 1;
thus L1230: (D107 in C543 & C544 in ( C542 . { D107 } )) by L1229 , L1225 , L1226 , RELAT_1:def 13;
let C546 being set;
assume that
L1231: C546 c= C543
and
L1232: C544 in ( C542 . C546 );
L1233: C546 c= D106 by L1231;
L1234: C546 in ( dom C542 ) by L1233 , L1220 , CLASSES1:def 1;
L1235: C544 in ( C541 .: C546 ) by L1234 , L1220 , L1232;
consider C547 being set such that L1236: [ C547 , C544 ] in C541 and L1237: C547 in C546 by L1235 , RELAT_1:def 13;
L1238: { D107 , C547 } c= D106 by L1226 , L1231 , L1237 , ZFMISC_1:32;
L1239: { D107 , C547 } in C539 by L1238 , CLASSES1:def 1;
thus L1240: D107 in C546 by L1239 , L1219 , L1225 , L1236 , L1237;
end;
L1241: ( rng C542 ) c= C540
proof
let C548 being set;
assume L1242: C548 in ( rng C542 );
consider C549 being set such that L1243: C549 in ( dom C542 ) and L1244: C548 = ( C542 . C549 ) by L1242 , FUNCT_1:def 3;
reconsider D108 = C549 as (Element of C539) by L1220 , L1243;
L1245: C548 = ( C541 .: D108 ) by L1220 , L1244;
L1246:
now
let C550 , C551 being set;
assume L1247: C550 in C548;
consider C552 being set such that L1248: [ C552 , C550 ] in C541 and L1249: C552 in D108 by L1247 , L1245 , RELAT_1:def 13;
assume L1250: C551 in C548;
consider C553 being set such that L1251: [ C553 , C551 ] in C541 and L1252: C553 in D108 by L1250 , L1245 , RELAT_1:def 13;
L1253: { C552 , C553 } in C539 by L1249 , L1252 , COH_SP:6;
thus L1254: { C550 , C551 } in C540 by L1253 , L1218 , L1248 , L1251;
end;
thus L1255: thesis by L1246 , COH_SP:6;
end;
L1256: C542 is  c=-monotone
proof
let C554 , C555 being set;
assume that
L1257: (C554 in ( dom C542 ) & C555 in ( dom C542 ))
and
L1258: C554 c= C555;
reconsider D109 = C554 , D110 = C555 as (Element of C539) by L1220 , L1257;
L1259: ( C542 . D109 ) = ( C541 .: D109 ) by L1220;
L1260: ( C541 .: D109 ) c= ( C541 .: D110 ) by L1258 , RELAT_1:123;
thus L1261: thesis by L1260 , L1220 , L1259;
end;
reconsider D111 = C542 as  U-linear (Function of C539 , C540) by L1256 , L1220 , L1241 , L1221 , L443 , FUNCT_2:def 1 , RELSET_1:4;
take D111;
thus L1262: C541 = ( LinTrace D111 )
proof
let C556 , C557 being set;
thus L1263:now
assume L1264: [ C556 , C557 ] in C541;
L1265: C556 in ( union C539 ) by L1264 , ZFMISC_1:87;
consider C558 being set such that L1266: C556 in C558 and L1267: C558 in C539 by L1265 , TARSKI:def 4;
L1268: { C556 } c= C558 by L1266 , ZFMISC_1:31;
reconsider D112 = { C556 } as (Element of C539) by L1268 , L1267 , CLASSES1:def 1;
L1269: (( D111 . D112 ) = ( C541 .: D112 ) & ( D111 . ( {} ) ) = ( {} )) by L1220 , L282;
L1270: C556 in { C556 } by TARSKI:def 1;
L1271: C557 in ( C541 .: D112 ) by L1270 , L1264 , RELAT_1:def 13;
thus L1272: [ C556 , C557 ] in ( LinTrace D111 ) by L1271 , L1220 , L1269 , L1151;
end;
assume L1273: [ C556 , C557 ] in ( LinTrace D111 );
L1274: C557 in ( D111 . { C556 } ) by L1273 , L1156;
L1275: C557 in ( C541 .: { C556 } ) by L1274 , L1220 , L1273 , L1156;
L1276: (ex B528 being set st ([ B528 , C557 ] in C541 & B528 in { C556 })) by L1275 , RELAT_1:def 13;
thus L1277: thesis by L1276 , TARSKI:def 1;
end;

thus L1278: thesis by L1220;
end;
theorem
L1279: (for B529 , B530 being Coherence_Space holds (for B531 being (Subset of [: ( union B529 ) , ( union B530 ) :]) holds (((for B532 , B533 being set holds ({ B532 , B533 } in B529 implies (for B534 , B535 being set holds (([ B532 , B534 ] in B531 & [ B533 , B535 ] in B531) implies { B534 , B535 } in B530)))) & (for B536 , B537 being set holds ({ B536 , B537 } in B529 implies (for B538 being set holds (([ B536 , B538 ] in B531 & [ B537 , B538 ] in B531) implies B536 = B537))))) implies (ex B539 being  U-linear (Function of B529 , B530) st B531 = ( LinTrace B539 )))))
proof
let C559 , C560 being Coherence_Space;
let C561 being (Subset of [: ( union C559 ) , ( union C560 ) :]);
assume L1280: (not thesis);
L1281: (ex B540 being  U-linear (Function of C559 , C560) st (C561 = ( LinTrace B540 ) & (for B541 being (Element of C559) holds ( B540 . B541 ) = ( C561 .: B541 )))) by L1280 , L1217;
thus L1282: thesis by L1281 , L1280;
end;
theorem
L1283: (for B542 , B543 being Coherence_Space holds (for B544 being  U-linear (Function of B542 , B543) holds (for B545 being (Element of B542) holds ( B544 . B545 ) = ( ( LinTrace B544 ) .: B545 ))))
proof
let C562 , C563 being Coherence_Space;
let C564 being  U-linear (Function of C562 , C563);
let C565 being (Element of C562);
set D113 = ( LinTrace C564 );
L1284: ((for B546 , B547 being set holds ({ B546 , B547 } in C562 implies (for B548 , B549 being set holds (([ B546 , B548 ] in D113 & [ B547 , B549 ] in D113) implies { B548 , B549 } in C563)))) & (for B550 , B551 being set holds ({ B550 , B551 } in C562 implies (for B552 being set holds (([ B550 , B552 ] in D113 & [ B551 , B552 ] in D113) implies B550 = B551))))) by L1184 , L1197;
consider C566 being  U-linear (Function of C562 , C563) such that L1285: D113 = ( LinTrace C566 ) and L1286: (for B553 being (Element of C562) holds ( C566 . B553 ) = ( D113 .: B553 )) by L1284 , L1217;
L1287: ( C566 . C565 ) = ( D113 .: C565 ) by L1286;
thus L1288: thesis by L1287 , L1285 , L1204;
end;
theorem
L1289: (for B554 , B555 being Coherence_Space holds (ex B556 being  U-linear (Function of B554 , B555) st ( LinTrace B556 ) = ( {} )))
proof
let C567 , C568 being Coherence_Space;
reconsider D114 = ( {} ) as (Subset of [: ( union C567 ) , ( union C568 ) :]) by XBOOLE_1:2;
L1290: ((for B557 , B558 being set holds ({ B557 , B558 } in C567 implies (for B559 , B560 being set holds (([ B557 , B559 ] in D114 & [ B558 , B560 ] in D114) implies { B559 , B560 } in C568)))) & (for B561 , B562 being set holds ({ B561 , B562 } in C567 implies (for B563 being set holds (([ B561 , B563 ] in D114 & [ B562 , B563 ] in D114) implies B561 = B562)))));
thus L1291: thesis by L1290 , L1279;
end;
theorem
L1292: (for B564 , B565 being Coherence_Space holds (for B566 being set holds (for B567 being set holds ((B566 in ( union B564 ) & B567 in ( union B565 )) implies (ex B568 being  U-linear (Function of B564 , B565) st ( LinTrace B568 ) = { [ B566 , B567 ] })))))
proof
let C569 , C570 being Coherence_Space;
let C571 , C572 being set;
assume that
L1293: C571 in ( union C569 )
and
L1294: C572 in ( union C570 );
L1295: [ C571 , C572 ] in [: ( union C569 ) , ( union C570 ) :] by L1293 , L1294 , ZFMISC_1:87;
reconsider D115 = { [ C571 , C572 ] } as (Subset of [: ( union C569 ) , ( union C570 ) :]) by L1295 , ZFMISC_1:31;
L1296:
now
let C573 , C574 being set;
assume L1297: { C573 , C574 } in C569;
let C575 , C576 being set;
assume that
L1298: [ C573 , C575 ] in D115
and
L1299: [ C574 , C576 ] in D115;
L1300: [ C574 , C576 ] = [ C571 , C572 ] by L1299 , TARSKI:def 1;
L1301: C576 = C572 by L1300 , XTUPLE_0:1;
L1302: [ C573 , C575 ] = [ C571 , C572 ] by L1298 , TARSKI:def 1;
L1303: C575 = C572 by L1302 , XTUPLE_0:1;
L1304: { C575 , C576 } = { C572 } by L1303 , L1301 , ENUMSET1:29;
thus L1305: { C575 , C576 } in C570 by L1304 , L1294 , COH_SP:4;
end;
L1306:
now
let C577 , C578 being set;
assume L1307: { C577 , C578 } in C569;
let C579 being set;
assume L1308: ([ C577 , C579 ] in D115 & [ C578 , C579 ] in D115);
L1309: ([ C577 , C579 ] = [ C571 , C572 ] & [ C578 , C579 ] = [ C571 , C572 ]) by L1308 , TARSKI:def 1;
thus L1310: C577 = C578 by L1309 , XTUPLE_0:1;
end;
thus L1311: thesis by L1306 , L1296 , L1279;
end;
theorem
L1312: (for B569 , B570 being Coherence_Space holds (for B571 being set holds (for B572 being set holds (B571 in ( union B569 ) implies (for B573 being  U-linear (Function of B569 , B570) holds (( LinTrace B573 ) = { [ B571 , B572 ] } implies (for B574 being (Element of B569) holds ((B571 in B574 implies ( B573 . B574 ) = { B572 }) & ((not B571 in B574) implies ( B573 . B574 ) = ( {} ))))))))))
proof
let C580 , C581 being Coherence_Space;
let C582 , C583 being set;
assume L1313: C582 in ( union C580 );
reconsider D116 = { C582 } as (Element of C580) by L1313 , COH_SP:4;
let C584 being  U-linear (Function of C580 , C581);
assume L1314: ( LinTrace C584 ) = { [ C582 , C583 ] };
let C585 being (Element of C580);
L1315: [ C582 , C583 ] in ( LinTrace C584 ) by L1314 , TARSKI:def 1;
L1316: C583 in ( C584 . { C582 } ) by L1315 , L1156;
thus L1317:now
L1318: ( C584 . C585 ) c= { C583 }
proof
let C586 being set;
assume L1319: C586 in ( C584 . C585 );
consider C587 being (Element of C580) such that L1320: [ C587 , C586 ] in ( Trace C584 ) and L1321: C587 c= C585 by L1319 , L870;
consider C588 being set such that L1322: C587 = { C588 } by L1320 , L1088;
L1323: [ C588 , C586 ] in ( LinTrace C584 ) by L1320 , L1322 , L1144;
L1324: [ C588 , C586 ] = [ C582 , C583 ] by L1323 , L1314 , TARSKI:def 1;
L1325: C586 = C583 by L1324 , XTUPLE_0:1;
thus L1326: thesis by L1325 , TARSKI:def 1;
end;
assume L1327: C582 in C585;
L1328: D116 c= C585 by L1327 , ZFMISC_1:31;
L1329: ( dom C584 ) = C580 by FUNCT_2:def 1;
L1330: ( C584 . D116 ) c= ( C584 . C585 ) by L1329 , L1328 , L256;
L1331: { C583 } c= ( C584 . C585 ) by L1330 , L1316 , ZFMISC_1:31;
thus L1332: ( C584 . C585 ) = { C583 } by L1331 , L1318 , XBOOLE_0:def 10;
end;
assume that
L1333: (not C582 in C585)
and
L1334: ( C584 . C585 ) <> ( {} );
reconsider D117 = ( C584 . C585 ) as non  empty set by L1334;
set D118 = the (Element of D117);
consider C589 being (Element of C580) such that L1335: [ C589 , D118 ] in ( Trace C584 ) and L1336: C589 c= C585 by L870;
consider C590 being set such that L1337: C589 = { C590 } by L1335 , L1088;
L1338: C590 in C589 by L1337 , TARSKI:def 1;
L1339: C590 in C585 by L1338 , L1336;
L1340: [ C590 , D118 ] in ( LinTrace C584 ) by L1335 , L1337 , L1144;
L1341: [ C590 , D118 ] = [ C582 , C583 ] by L1340 , L1314 , TARSKI:def 1;
thus L1342: thesis by L1341 , L1333 , L1339 , XTUPLE_0:1;
end;
theorem
L1343: (for B575 , B576 being Coherence_Space holds (for B577 being  U-linear (Function of B575 , B576) holds (for B578 being (Subset of ( LinTrace B577 )) holds (ex B579 being  U-linear (Function of B575 , B576) st ( LinTrace B579 ) = B578))))
proof
let C591 , C592 being Coherence_Space;
let C593 being  U-linear (Function of C591 , C592);
let C594 being (Subset of ( LinTrace C593 ));
L1344: (for B580 , B581 being set holds ({ B580 , B581 } in C591 implies (for B582 being set holds (([ B580 , B582 ] in C594 & [ B581 , B582 ] in C594) implies B580 = B581)))) by L1197;
L1345: (C594 is (Subset of [: ( union C591 ) , ( union C592 ) :]) & (for B583 , B584 being set holds ({ B583 , B584 } in C591 implies (for B585 , B586 being set holds (([ B583 , B585 ] in C594 & [ B584 , B586 ] in C594) implies { B585 , B586 } in C592))))) by L1184 , XBOOLE_1:1;
thus L1346: thesis by L1345 , L1344 , L1279;
end;
theorem
L1347: (for B587 , B588 being Coherence_Space holds (for B589 being set holds ((for B590 , B591 being set holds ((B590 in B589 & B591 in B589) implies (ex B592 being  U-linear (Function of B587 , B588) st ( B590 \/ B591 ) = ( LinTrace B592 )))) implies (ex B593 being  U-linear (Function of B587 , B588) st ( union B589 ) = ( LinTrace B593 )))))
proof
let C595 , C596 being Coherence_Space;
let C597 being set;
assume that
L1348: (for B594 , B595 being set holds ((B594 in C597 & B595 in C597) implies (ex B596 being  U-linear (Function of C595 , C596) st ( B594 \/ B595 ) = ( LinTrace B596 ))));
set D119 = ( union C597 );
L1349:
now
let C598 , C599 being set;
assume that
L1350: { C598 , C599 } in C595;
let C600 , C601 being set;
assume L1351: [ C598 , C600 ] in D119;
consider C602 being set such that L1352: [ C598 , C600 ] in C602 and L1353: C602 in C597 by L1351 , TARSKI:def 4;
assume L1354: [ C599 , C601 ] in D119;
consider C603 being set such that L1355: [ C599 , C601 ] in C603 and L1356: C603 in C597 by L1354 , TARSKI:def 4;
L1357: (C602 c= ( C602 \/ C603 ) & C603 c= ( C602 \/ C603 )) by XBOOLE_1:7;
L1358: (ex B597 being  U-linear (Function of C595 , C596) st ( C602 \/ C603 ) = ( LinTrace B597 )) by L1348 , L1353 , L1356;
thus L1359: { C600 , C601 } in C596 by L1358 , L1350 , L1352 , L1355 , L1357 , L1184;
end;
L1360:
now
let C604 , C605 being set;
assume that
L1361: { C604 , C605 } in C595;
let C606 being set;
assume L1362: [ C604 , C606 ] in D119;
consider C607 being set such that L1363: [ C604 , C606 ] in C607 and L1364: C607 in C597 by L1362 , TARSKI:def 4;
assume L1365: [ C605 , C606 ] in D119;
consider C608 being set such that L1366: [ C605 , C606 ] in C608 and L1367: C608 in C597 by L1365 , TARSKI:def 4;
L1368: (C607 c= ( C607 \/ C608 ) & C608 c= ( C607 \/ C608 )) by XBOOLE_1:7;
L1369: (ex B598 being  U-linear (Function of C595 , C596) st ( C607 \/ C608 ) = ( LinTrace B598 )) by L1348 , L1364 , L1367;
thus L1370: C604 = C605 by L1369 , L1361 , L1363 , L1366 , L1368 , L1197;
end;
L1371: D119 c= [: ( union C595 ) , ( union C596 ) :]
proof
let C609 being set;
assume L1372: C609 in D119;
consider C610 being set such that L1373: C609 in C610 and L1374: C610 in C597 by L1372 , TARSKI:def 4;
L1375: ( C610 \/ C610 ) = C610;
L1376: (ex B599 being  U-linear (Function of C595 , C596) st C610 = ( LinTrace B599 )) by L1375 , L1348 , L1374;
thus L1377: thesis by L1376 , L1373;
end;
thus L1378: thesis by L1371 , L1349 , L1360 , L1279;
end;
registration
let C611 , C612 being Coherence_Space;
cluster ( LinCoh (C611 , C612) ) -> non  empty  subset-closed  binary_complete;
coherence
proof
set D120 = ( LinCoh (C611 , C612) );
set D121 = the  U-linear (Function of C611 , C612);
L1379: ( LinTrace D121 ) in D120 by L1176;
thus L1380: D120 is non  empty by L1379;
thus L1381: D120 is  subset-closed
proof
let C613 , C614 being set;
assume L1382: C613 in D120;
L1383: (ex B600 being  U-linear (Function of C611 , C612) st C613 = ( LinTrace B600 )) by L1382 , L1176;
assume L1384: C614 c= C613;
L1385: (ex B601 being  U-linear (Function of C611 , C612) st ( LinTrace B601 ) = C614) by L1384 , L1383 , L1343;
thus L1386: thesis by L1385 , L1176;
end;

let C615 being set;
assume L1387: (for B602 , B603 being set holds ((B602 in C615 & B603 in C615) implies ( B602 \/ B603 ) in D120));
L1388:
now
let C616 , C617 being set;
assume L1389: (C616 in C615 & C617 in C615);
L1390: ( C616 \/ C617 ) in D120 by L1389 , L1387;
thus L1391: (ex B604 being  U-linear (Function of C611 , C612) st ( C616 \/ C617 ) = ( LinTrace B604 )) by L1390 , L1176;
end;
L1392: (ex B605 being  U-linear (Function of C611 , C612) st ( union C615 ) = ( LinTrace B605 )) by L1388 , L1347;
thus L1393: thesis by L1392 , L1176;
end;
end;
theorem
L1395: (for B606 , B607 being Coherence_Space holds ( union ( LinCoh (B606 , B607) ) ) = [: ( union B606 ) , ( union B607 ) :])
proof
let C618 , C619 being Coherence_Space;
thus L1396: ( union ( LinCoh (C618 , C619) ) ) c= [: ( union C618 ) , ( union C619 ) :]
proof
let C620 being set;
assume L1397: C620 in ( union ( LinCoh (C618 , C619) ) );
consider C621 being set such that L1398: C620 in C621 and L1399: C621 in ( LinCoh (C618 , C619) ) by L1397 , TARSKI:def 4;
L1400: (ex B608 being  U-linear (Function of C618 , C619) st C621 = ( LinTrace B608 )) by L1399 , L1176;
thus L1401: thesis by L1400 , L1398;
end;

let C622 , C623 being set;
assume L1402: [ C622 , C623 ] in [: ( union C618 ) , ( union C619 ) :];
L1403: C623 in ( union C619 ) by L1402 , ZFMISC_1:87;
L1404: C622 in ( union C618 ) by L1402 , ZFMISC_1:87;
L1405: (ex B609 being  U-linear (Function of C618 , C619) st ( LinTrace B609 ) = { [ C622 , C623 ] }) by L1404 , L1403 , L1292;
L1406: ([ C622 , C623 ] in { [ C622 , C623 ] } & { [ C622 , C623 ] } in ( LinCoh (C618 , C619) )) by L1405 , L1176 , TARSKI:def 1;
thus L1407: thesis by L1406 , TARSKI:def 4;
end;
theorem
L1408: (for B610 , B611 being Coherence_Space holds (for B612 , B613 being set holds (for B614 , B615 being set holds ([ [ B612 , B614 ] , [ B613 , B615 ] ] in ( Web ( LinCoh (B610 , B611) ) ) iff (B612 in ( union B610 ) & B613 in ( union B610 ) & (((not [ B612 , B613 ] in ( Web B610 )) & B614 in ( union B611 ) & B615 in ( union B611 )) or ([ B614 , B615 ] in ( Web B611 ) & (B614 = B615 implies B612 = B613))))))))
proof
let C624 , C625 being Coherence_Space;
let C626 , C627 , C628 , C629 being set;
thus L1409:now
assume L1410: [ [ C626 , C628 ] , [ C627 , C629 ] ] in ( Web ( LinCoh (C624 , C625) ) );
L1411: { [ C626 , C628 ] , [ C627 , C629 ] } in ( LinCoh (C624 , C625) ) by L1410 , COH_SP:5;
consider C630 being  U-linear (Function of C624 , C625) such that L1412: { [ C626 , C628 ] , [ C627 , C629 ] } = ( LinTrace C630 ) by L1411 , L1176;
L1413: [ C626 , C628 ] in ( LinTrace C630 ) by L1412 , TARSKI:def 2;
L1414: [ { C626 } , C628 ] in ( Trace C630 ) by L1413 , L1144;
L1415: { C626 } in ( dom C630 ) by L1414 , L662;
L1416: [ C627 , C629 ] in ( LinTrace C630 ) by L1412 , TARSKI:def 2;
L1417: [ { C627 } , C629 ] in ( Trace C630 ) by L1416 , L1144;
L1418: { C627 } in ( dom C630 ) by L1417 , L662;
L1419: (C626 in { C626 } & C627 in { C627 }) by TARSKI:def 1;
L1420: ( Trace C630 ) in ( StabCoh (C624 , C625) ) by L998;
L1421: ( dom C630 ) = C624 by FUNCT_2:def 1;
L1422: { [ { C626 } , C628 ] , [ { C627 } , C629 ] } c= ( Trace C630 ) by L1414 , L1417 , ZFMISC_1:32;
L1423: { [ { C626 } , C628 ] , [ { C627 } , C629 ] } in ( StabCoh (C624 , C625) ) by L1422 , L1420 , CLASSES1:def 1;
L1424: [ [ { C626 } , C628 ] , [ { C627 } , C629 ] ] in ( Web ( StabCoh (C624 , C625) ) ) by L1423 , COH_SP:5;
L1425: (((not ( { C626 } \/ { C627 } ) in C624) & C628 in ( union C625 ) & C629 in ( union C625 )) or ([ C628 , C629 ] in ( Web C625 ) & (C628 = C629 implies { C626 } = { C627 }))) by L1424 , L1415 , L1418 , L1421 , L1048;
L1426: (((not { C626 , C627 } in C624) & C628 in ( union C625 ) & C629 in ( union C625 )) or ([ C628 , C629 ] in ( Web C625 ) & (C628 = C629 implies C626 = C627))) by L1425 , ENUMSET1:1 , ZFMISC_1:3;
thus L1427: (C626 in ( union C624 ) & C627 in ( union C624 ) & (((not [ C626 , C627 ] in ( Web C624 )) & C628 in ( union C625 ) & C629 in ( union C625 )) or ([ C628 , C629 ] in ( Web C625 ) & (C628 = C629 implies C626 = C627)))) by L1426 , L1415 , L1418 , L1421 , L1419 , COH_SP:5 , TARSKI:def 4;
end;
assume L1428: (C626 in ( union C624 ) & C627 in ( union C624 ));
reconsider D122 = { C626 } , D123 = { C627 } as (Element of C624) by L1428 , COH_SP:4;
assume L1429: (((not [ C626 , C627 ] in ( Web C624 )) & C628 in ( union C625 ) & C629 in ( union C625 )) or ([ C628 , C629 ] in ( Web C625 ) & (C628 = C629 implies C626 = C627)));
L1430: (((not { C626 , C627 } in C624) & C628 in ( union C625 ) & C629 in ( union C625 )) or ([ C628 , C629 ] in ( Web C625 ) & (C628 = C629 implies D122 = D123))) by L1429 , COH_SP:5;
L1431: (((not ( D122 \/ D123 ) in C624) & C628 in ( union C625 ) & C629 in ( union C625 )) or ([ C628 , C629 ] in ( Web C625 ) & (C628 = C629 implies D122 = D123))) by L1430 , ENUMSET1:1;
L1432: [ [ D122 , C628 ] , [ D123 , C629 ] ] in ( Web ( StabCoh (C624 , C625) ) ) by L1431 , L1048;
L1433: { [ D122 , C628 ] , [ D123 , C629 ] } in ( StabCoh (C624 , C625) ) by L1432 , COH_SP:5;
consider C631 being  U-stable (Function of C624 , C625) such that L1434: { [ D122 , C628 ] , [ D123 , C629 ] } = ( Trace C631 ) by L1433 , L998;
L1435:
now
let C632 , C633 being set;
assume L1436: [ C632 , C633 ] in ( Trace C631 );
L1437: ([ C632 , C633 ] = [ D122 , C628 ] or [ C632 , C633 ] = [ D123 , C629 ]) by L1436 , L1434 , TARSKI:def 2;
L1438: (C632 = { C626 } or C632 = { C627 }) by L1437 , XTUPLE_0:1;
thus L1439: (ex B616 being set st C632 = { B616 }) by L1438;
end;
L1440: C631 is  U-linear by L1435 , L1088;
L1441: ( LinTrace C631 ) in ( LinCoh (C624 , C625) ) by L1440 , L1176;
L1442: { [ C626 , C628 ] , [ C627 , C629 ] } c= ( LinTrace C631 )
proof
let C634 , C635 being set;
assume L1443: [ C634 , C635 ] in { [ C626 , C628 ] , [ C627 , C629 ] };
L1444: (([ C634 , C635 ] = [ C626 , C628 ] & [ D122 , C628 ] in ( Trace C631 )) or ([ C634 , C635 ] = [ C627 , C629 ] & [ D123 , C629 ] in ( Trace C631 ))) by L1443 , L1434 , TARSKI:def 2;
thus L1445: thesis by L1444 , L1144;
end;
L1446: { [ C626 , C628 ] , [ C627 , C629 ] } in ( LinCoh (C624 , C625) ) by L1442 , L1441 , CLASSES1:def 1;
thus L1447: thesis by L1446 , COH_SP:5;
end;
begin
definition
let C636 being Coherence_Space;
func 'not' C636 -> set equals 
{ B617 where B617 is (Subset of ( union C636 )) : (for B618 being (Element of C636) holds (ex B619 being set st ( B617 /\ B618 ) c= { B619 })) };
correctness;
end;
theorem
L1449: (for B620 being Coherence_Space holds (for B621 being set holds (B621 in ( 'not' B620 ) iff (B621 c= ( union B620 ) & (for B622 being (Element of B620) holds (ex B623 being set st ( B621 /\ B622 ) c= { B623 }))))))
proof
let C637 being Coherence_Space;
let C638 being set;
L1450: (C638 in ( 'not' C637 ) iff (ex B624 being (Subset of ( union C637 )) st (C638 = B624 & (for B625 being (Element of C637) holds (ex B626 being set st ( B624 /\ B625 ) c= { B626 })))));
thus L1451: thesis by L1450;
end;
registration
let C639 being Coherence_Space;
cluster ( 'not' C639 ) -> non  empty  subset-closed  binary_complete;
coherence
proof
reconsider D124 = ( {} ) as (Subset of ( union C639 )) by XBOOLE_1:2;
L1452:
now
let C640 being (Element of C639);
take D125 = ( {} );
thus L1453: ( D124 /\ C640 ) c= { D125 } by XBOOLE_1:2;
end;
L1454: D124 in ( 'not' C639 ) by L1452;
thus L1455: ( 'not' C639 ) is non  empty by L1454;
thus L1456:now
let C641 , C642 being set;
assume L1457: C641 in ( 'not' C639 );
consider C643 being (Subset of ( union C639 )) such that L1458: C641 = C643 and L1459: (for B627 being (Element of C639) holds (ex B628 being set st ( C643 /\ B627 ) c= { B628 })) by L1457;
assume L1460: C642 c= C641;
reconsider D126 = C642 as (Subset of ( union C639 )) by L1460 , L1458 , XBOOLE_1:1;
L1461:
now
let C644 being (Element of C639);
consider C645 being set such that L1462: ( C643 /\ C644 ) c= { C645 } by L1459;
take D127 = C645;
L1463: ( C642 /\ C644 ) c= ( C641 /\ C644 ) by L1460 , XBOOLE_1:26;
thus L1464: ( D126 /\ C644 ) c= { D127 } by L1463 , L1458 , L1462 , XBOOLE_1:1;
end;
thus L1465: C642 in ( 'not' C639 ) by L1461;
end;
let C646 being set;
assume that
L1466: (for B629 , B630 being set holds ((B629 in C646 & B630 in C646) implies ( B629 \/ B630 ) in ( 'not' C639 )));
L1467: C646 c= ( bool ( union C639 ) )
proof
let C647 being set;
assume L1468: C647 in C646;
L1469: ( C647 \/ C647 ) in ( 'not' C639 ) by L1468 , L1466;
L1470: (ex B631 being (Subset of ( union C639 )) st (C647 = B631 & (for B632 being (Element of C639) holds (ex B633 being set st ( B631 /\ B632 ) c= { B633 })))) by L1469;
thus L1471: thesis by L1470;
end;
L1472: ( union C646 ) c= ( union ( bool ( union C639 ) ) ) by L1467 , ZFMISC_1:77;
reconsider D128 = ( union C646 ) as (Subset of ( union C639 )) by L1472 , ZFMISC_1:81;
L1473:
now
let C648 being (Element of C639);
per cases ;
suppose L1474: ( D128 /\ C648 ) = ( {} );

take D129 = ( {} );
thus L1475: ( D128 /\ C648 ) c= { D129 } by L1474 , XBOOLE_1:2;
end;
suppose L1476: ( D128 /\ C648 ) <> ( {} );

reconsider D130 = ( D128 /\ C648 ) as non  empty set by L1476;
set D131 = the (Element of D130);
reconsider D132 = D131 as set;
take D133 = D132;
thus L1477: ( D128 /\ C648 ) c= { D133 }
proof
let C649 being set;
assume L1478: C649 in ( D128 /\ C648 );
L1479: C649 in C648 by L1478 , XBOOLE_0:def 4;
L1480: D131 in D128 by XBOOLE_0:def 4;
consider C650 being set such that L1481: D131 in C650 and L1482: C650 in C646 by L1480 , TARSKI:def 4;
L1483: C649 in D128 by L1478 , XBOOLE_0:def 4;
consider C651 being set such that L1484: C649 in C651 and L1485: C651 in C646 by L1483 , TARSKI:def 4;
L1486: ( C650 \/ C651 ) in ( 'not' C639 ) by L1466 , L1485 , L1482;
consider C652 being (Subset of ( union C639 )) such that L1487: ( C650 \/ C651 ) = C652 and L1488: (for B634 being (Element of C639) holds (ex B635 being set st ( C652 /\ B634 ) c= { B635 })) by L1486;
consider C653 being set such that L1489: ( C652 /\ C648 ) c= { C653 } by L1488;
L1490: (D131 in C648 & D131 in C652) by L1481 , L1487 , XBOOLE_0:def 3 , XBOOLE_0:def 4;
L1491: D131 in ( C652 /\ C648 ) by L1490 , XBOOLE_0:def 4;
L1492: C649 in C652 by L1484 , L1487 , XBOOLE_0:def 3;
L1493: C649 in ( C652 /\ C648 ) by L1492 , L1479 , XBOOLE_0:def 4;
L1494: C649 in { C653 } by L1493 , L1489;
thus L1495: thesis by L1494 , L1489 , L1491 , TARSKI:def 1;
end;

end;
end;
thus L1479: thesis by L1473;
end;
end;
theorem
L1481: (for B636 being Coherence_Space holds ( union ( 'not' B636 ) ) = ( union B636 ))
proof
let C654 being Coherence_Space;
thus L1482:now
let C655 being set;
assume L1483: C655 in ( union ( 'not' C654 ) );
consider C656 being set such that L1484: C655 in C656 and L1485: C656 in ( 'not' C654 ) by L1483 , TARSKI:def 4;
L1486: C656 c= ( union C654 ) by L1485 , L1449;
thus L1487: C655 in ( union C654 ) by L1486 , L1484;
end;
let C657 being set;
assume L1488: C657 in ( union C654 );
L1489: { C657 } c= ( union C654 ) by L1488 , ZFMISC_1:31;
L1490: (for B637 being (Element of C654) holds (ex B638 being set st ( { C657 } /\ B637 ) c= { B638 })) by XBOOLE_1:17;
L1491: (C657 in { C657 } & { C657 } in ( 'not' C654 )) by L1490 , L1489 , ZFMISC_1:31;
thus L1492: thesis by L1491 , TARSKI:def 4;
end;
theorem
L1493: (for B639 being Coherence_Space holds (for B640 , B641 being set holds ((B640 <> B641 & { B640 , B641 } in B639) implies (not { B640 , B641 } in ( 'not' B639 )))))
proof
let C658 being Coherence_Space;
let C659 , C660 being set;
assume that
L1494: C659 <> C660
and
L1495: ({ C659 , C660 } in C658 & { C659 , C660 } in ( 'not' C658 ));
consider C661 being set such that L1496: ( { C659 , C660 } /\ { C659 , C660 } ) c= { C661 } by L1495 , L1449;
L1497: C659 = C661 by L1496 , ZFMISC_1:20;
thus L1498: contradiction by L1497 , L1494 , L1496 , ZFMISC_1:20;
end;
theorem
L1499: (for B642 being Coherence_Space holds (for B643 , B644 being set holds (({ B643 , B644 } c= ( union B642 ) & (not { B643 , B644 } in B642)) implies { B643 , B644 } in ( 'not' B642 ))))
proof
let C662 being Coherence_Space;
let C663 , C664 being set;
assume that
L1500: { C663 , C664 } c= ( union C662 )
and
L1501: (not { C663 , C664 } in C662);
L1502:
now
let C665 being (Element of C662);
L1503: (C663 in C665 or (not C663 in C665));
consider C666 being set such that L1504: ((C663 in C665 & C666 = C663) or ((not C663 in C665) & C666 = C664)) by L1503;
take D134 = C666;
thus L1505: ( { C663 , C664 } /\ C665 ) c= { D134 }
proof
let C667 being set;
assume L1506: C667 in ( { C663 , C664 } /\ C665 );
L1507: C667 in { C663 , C664 } by L1506 , XBOOLE_0:def 4;
L1508: C667 in C665 by L1506 , XBOOLE_0:def 4;
per cases  by L1507 , TARSKI:def 2;
suppose L1509: C667 = C663;

thus L1510: thesis by L1509 , L1504 , L1506 , TARSKI:def 1 , XBOOLE_0:def 4;
end;
suppose L1511: C667 = C664;

L1512: (C663 in C665 implies { C663 , C664 } c= C665) by L1511 , L1508 , ZFMISC_1:32;
thus L1513: thesis by L1512 , L1501 , L1504 , L1511 , CLASSES1:def 1 , TARSKI:def 1;
end;
end;

end;
thus L1506: thesis by L1502 , L1500;
end;
theorem
L1507: (for B645 being Coherence_Space holds (for B646 , B647 being set holds ([ B646 , B647 ] in ( Web ( 'not' B645 ) ) iff (B646 in ( union B645 ) & B647 in ( union B645 ) & (B646 = B647 or (not [ B646 , B647 ] in ( Web B645 )))))))
proof
let C668 being Coherence_Space;
let C669 , C670 being set;
L1508: (({ C669 , C670 } c= ( union C668 ) & (not { C669 , C670 } in C668)) implies { C669 , C670 } in ( 'not' C668 )) by L1499;
L1509: ( union ( 'not' C668 ) ) = ( union C668 ) by L1481;
L1510: ((C669 <> C670 & { C669 , C670 } in C668) implies (not { C669 , C670 } in ( 'not' C668 ))) by L1493;
thus L1511: ([ C669 , C670 ] in ( Web ( 'not' C668 ) ) implies (C669 in ( union C668 ) & C670 in ( union C668 ) & (C669 = C670 or (not [ C669 , C670 ] in ( Web C668 ))))) by L1510 , L1509 , COH_SP:5 , ZFMISC_1:87;
assume that
L1512: C669 in ( union C668 )
and
L1513: C670 in ( union C668 )
and
L1514: (C669 = C670 or (not [ C669 , C670 ] in ( Web C668 )));
L1515: ((C669 = C670 & { C669 } in ( 'not' C668 ) & { C669 } = { C669 , C670 }) or (not { C669 , C670 } in C668)) by L1509 , L1512 , L1514 , COH_SP:4 , COH_SP:5 , ENUMSET1:29;
thus L1516: thesis by L1515 , L1508 , L1512 , L1513 , COH_SP:5 , ZFMISC_1:32;
end;
L1517: (for B648 being Coherence_Space holds ( 'not' ( 'not' B648 ) ) c= B648)
proof
let C671 being Coherence_Space;
let C672 being set;
assume L1518: C672 in ( 'not' ( 'not' C671 ) );
consider C673 being (Subset of ( union ( 'not' C671 ) )) such that L1519: C672 = C673 and L1520: (for B649 being (Element of ( 'not' C671 )) holds (ex B650 being set st ( C673 /\ B649 ) c= { B650 })) by L1518;
L1521: ( union ( 'not' C671 ) ) = ( union C671 ) by L1481;
L1522:
now
let C674 , C675 being set;
assume that
L1523: C674 in C673
and
L1524: C675 in C673
and
L1525: (not { C674 , C675 } in C671);
L1526: { C674 , C675 } c= ( union C671 ) by L1521 , L1523 , L1524 , ZFMISC_1:32;
L1527: { C674 , C675 } in ( 'not' C671 ) by L1526 , L1525 , L1499;
consider C676 being set such that L1528: ( C673 /\ { C674 , C675 } ) c= { C676 } by L1527 , L1520;
L1529: C675 in { C674 , C675 } by TARSKI:def 2;
L1530: C675 in ( C673 /\ { C674 , C675 } ) by L1529 , L1524 , XBOOLE_0:def 4;
L1531: C675 = C676 by L1530 , L1528 , TARSKI:def 1;
L1532: C674 in { C674 , C675 } by TARSKI:def 2;
L1533: C674 in ( C673 /\ { C674 , C675 } ) by L1532 , L1523 , XBOOLE_0:def 4;
L1534: C674 = C676 by L1533 , L1528 , TARSKI:def 1;
L1535: { C674 , C675 } = { C674 } by L1534 , L1531 , ENUMSET1:29;
thus L1536: contradiction by L1535 , L1521 , L1523 , L1525 , COH_SP:4;
end;
thus L1537: thesis by L1522 , L1519 , COH_SP:6;
end;
theorem
L1538: (for B651 being Coherence_Space holds ( 'not' ( 'not' B651 ) ) = B651)
proof
let C677 being Coherence_Space;
thus L1539: ( 'not' ( 'not' C677 ) ) c= C677 by L1517;
let C678 being set;
assume L1540: C678 in C677;
L1541: (( union C677 ) = ( union ( 'not' C677 ) ) & ( union ( 'not' C677 ) ) = ( union ( 'not' ( 'not' C677 ) ) )) by L1481;
L1542:
now
let C679 , C680 being set;
assume that
L1543: C679 in C678
and
L1544: C680 in C678;
L1545: C679 in ( union C677 ) by L1540 , L1543 , TARSKI:def 4;
L1546: { C679 , C680 } c= C678 by L1543 , L1544 , ZFMISC_1:32;
L1547: { C679 , C680 } in C677 by L1546 , L1540 , CLASSES1:def 1;
L1548: (C679 <> C680 implies (not { C679 , C680 } in ( 'not' C677 ))) by L1547 , L1493;
L1549: C680 in ( union C677 ) by L1540 , L1544 , TARSKI:def 4;
L1550: { C679 , C680 } c= ( union C677 ) by L1549 , L1545 , ZFMISC_1:32;
L1551: { C679 , C679 } = { C679 } by ENUMSET1:29;
thus L1552: { C679 , C680 } in ( 'not' ( 'not' C677 ) ) by L1551 , L1541 , L1545 , L1550 , L1548 , L1499 , COH_SP:4;
end;
thus L1553: thesis by L1542 , COH_SP:6;
end;
theorem
L1554: ( 'not' { ( {} ) } ) = { ( {} ) }
proof
L1555: ( union ( 'not' { ( {} ) } ) ) = ( union { ( {} ) } ) by L1481
.= ( {} ) by ZFMISC_1:25;
thus L1556: ( 'not' { ( {} ) } ) c= { ( {} ) } by L1555 , ZFMISC_1:1 , ZFMISC_1:82;
L1557: ( {} ) in ( 'not' { ( {} ) } ) by COH_SP:1;
thus L1558: thesis by L1557 , ZFMISC_1:31;
end;
theorem
L1559: (for B652 being set holds (( 'not' ( FlatCoh B652 ) ) = ( bool B652 ) & ( 'not' ( bool B652 ) ) = ( FlatCoh B652 )))
proof
let C681 being set;
thus L1560: ( 'not' ( FlatCoh C681 ) ) = ( bool C681 )
proof
thus L1561:now
let C682 being set;
assume L1562: C682 in ( 'not' ( FlatCoh C681 ) );
L1563: C682 c= ( union ( FlatCoh C681 ) ) by L1562 , L1449;
L1564: C682 c= C681 by L1563 , L43;
thus L1565: C682 in ( bool C681 ) by L1564;
end;
let C683 being set;
L1566:
now
let C684 being (Element of ( FlatCoh C681 ));
per cases  by L22;
suppose L1567: C684 = ( {} );

L1568: ( C683 /\ C684 ) c= { ( 0 ) } by L1567 , XBOOLE_1:2;
thus L1569: (ex B653 being set st ( C683 /\ C684 ) c= { B653 }) by L1568;
end;
suppose L1570: (ex B654 being set st (C684 = { B654 } & B654 in C681));

consider C685 being set such that L1571: C684 = { C685 } and L1572: C685 in C681 by L1570;
take D135 = C685;
thus L1573: ( C683 /\ C684 ) c= { D135 } by L1571 , XBOOLE_1:17;
end;
end;
assume L1575: C683 in ( bool C681 );
L1576: C683 c= C681 by L1575;
L1577: C683 c= ( union ( FlatCoh C681 ) ) by L1576 , L43;
thus L1578: thesis by L1577 , L1566;
end;

thus L1579: thesis by L1560 , L1538;
end;
begin
definition
let C686 , C687 being set;
func C686 U+ C687 -> set equals 
( Union ( disjoin <* C686 , C687 *> ) );
correctness;
end;
theorem
L1581: (for B655 , B656 being set holds ( B655 U+ B656 ) = ( [: B655 , { 1 } :] \/ [: B656 , { 2 } :] ))
proof
let C688 , C689 being set;
L1582: ( len <* C688 , C689 *> ) = 2 by FINSEQ_1:44;
L1583: ( dom <* C688 , C689 *> ) = { 1 , 2 } by L1582 , FINSEQ_1:2 , FINSEQ_1:def 3;
L1584:
now
let C690 being set;
L1585: (( C690 `2 ) in { 1 , 2 } iff (( C690 `2 ) = 1 or ( C690 `2 ) = 2)) by TARSKI:def 2;
L1586: (C690 in [: C688 , { 1 } :] iff (( C690 `1 ) in C688 & ( C690 `2 ) = 1 & C690 = [ ( C690 `1 ) , ( C690 `2 ) ])) by MCART_1:13 , MCART_1:21 , ZFMISC_1:106;
L1587: (C690 in [: C689 , { 2 } :] iff (( C690 `1 ) in C689 & ( C690 `2 ) = 2 & C690 = [ ( C690 `1 ) , ( C690 `2 ) ])) by MCART_1:13 , MCART_1:21 , ZFMISC_1:106;
L1588: (C690 in ( C688 U+ C689 ) iff (( C690 `2 ) in { 1 , 2 } & ( C690 `1 ) in ( <* C688 , C689 *> . ( C690 `2 ) ) & C690 = [ ( C690 `1 ) , ( C690 `2 ) ])) by L1583 , CARD_3:22;
thus L1589: (C690 in ( C688 U+ C689 ) iff C690 in ( [: C688 , { 1 } :] \/ [: C689 , { 2 } :] )) by L1588 , L1585 , L1586 , L1587 , FINSEQ_1:44 , XBOOLE_0:def 3;
end;
thus L1590: thesis by L1584 , TARSKI:1;
end;
theorem
L1591: (for B657 being set holds (( B657 U+ ( {} ) ) = [: B657 , { 1 } :] & ( ( {} ) U+ B657 ) = [: B657 , { 2 } :]))
proof
let C691 being set;
thus L1592: ( C691 U+ ( {} ) ) = ( [: C691 , { 1 } :] \/ [: ( {} ) , { 2 } :] ) by L1581
.= ( [: C691 , { 1 } :] \/ ( {} ) ) by ZFMISC_1:90
.= [: C691 , { 1 } :];
thus L1593: ( ( {} ) U+ C691 ) = ( [: ( {} ) , { 1 } :] \/ [: C691 , { 2 } :] ) by L1581
.= ( ( {} ) \/ [: C691 , { 2 } :] ) by ZFMISC_1:90
.= [: C691 , { 2 } :];
end;
theorem
L1594: (for B658 , B659 , B660 being set holds (B660 in ( B658 U+ B659 ) implies (B660 = [ ( B660 `1 ) , ( B660 `2 ) ] & ((( B660 `2 ) = 1 & ( B660 `1 ) in B658) or (( B660 `2 ) = 2 & ( B660 `1 ) in B659)))))
proof
let C692 , C693 , C694 being set;
assume L1595: C694 in ( C692 U+ C693 );
L1596: C694 in ( [: C692 , { 1 } :] \/ [: C693 , { 2 } :] ) by L1595 , L1581;
L1597: (C694 in [: C692 , { 1 } :] or C694 in [: C693 , { 2 } :]) by L1596 , XBOOLE_0:def 3;
thus L1598: thesis by L1597 , MCART_1:13 , MCART_1:21;
end;
theorem
L1599: (for B661 , B662 , B663 being set holds ([ B663 , 1 ] in ( B661 U+ B662 ) iff B663 in B661))
proof
let C695 , C696 , C697 being set;
L1600: ( C695 U+ C696 ) = ( [: C695 , { 1 } :] \/ [: C696 , { 2 } :] ) by L1581;
L1601: ([ C697 , 1 ] in ( C695 U+ C696 ) iff ([ C697 , 1 ] in [: C695 , { 1 } :] or ([ C697 , 1 ] in [: C696 , { 2 } :] & 1 <> 2))) by L1600 , XBOOLE_0:def 3;
thus L1602: thesis by L1601 , ZFMISC_1:106;
end;
theorem
L1603: (for B664 , B665 , B666 being set holds ([ B666 , 2 ] in ( B664 U+ B665 ) iff B666 in B665))
proof
let C698 , C699 , C700 being set;
L1604: ( C698 U+ C699 ) = ( [: C698 , { 1 } :] \/ [: C699 , { 2 } :] ) by L1581;
L1605: ([ C700 , 2 ] in ( C698 U+ C699 ) iff (([ C700 , 2 ] in [: C698 , { 1 } :] & 1 <> 2) or [ C700 , 2 ] in [: C699 , { 2 } :])) by L1604 , XBOOLE_0:def 3;
thus L1606: thesis by L1605 , ZFMISC_1:106;
end;
theorem
L1607: (for B667 , B668 , B669 , B670 being set holds (( B667 U+ B668 ) c= ( B669 U+ B670 ) iff (B667 c= B669 & B668 c= B670)))
proof
let C701 , C702 , C703 , C704 being set;
thus L1608:now
assume L1609: ( C701 U+ C702 ) c= ( C703 U+ C704 );
thus L1610: C701 c= C703
proof
let C705 being set;
assume L1611: C705 in C701;
L1612: [ C705 , 1 ] in ( C701 U+ C702 ) by L1611 , L1599;
thus L1613: thesis by L1612 , L1609 , L1599;
end;

thus L1614: C702 c= C704
proof
let C706 being set;
assume L1615: C706 in C702;
L1616: [ C706 , 2 ] in ( C701 U+ C702 ) by L1615 , L1603;
thus L1617: thesis by L1616 , L1609 , L1603;
end;

end;
assume L1615: (C701 c= C703 & C702 c= C704);
let C707 being set;
assume L1616: C707 in ( C701 U+ C702 );
L1617: ((( C707 `2 ) = 1 & ( C707 `1 ) in C701) or (( C707 `2 ) = 2 & ( C707 `1 ) in C702)) by L1616 , L1594;
L1618: C707 = [ ( C707 `1 ) , ( C707 `2 ) ] by L1616 , L1594;
thus L1619: thesis by L1618 , L1615 , L1617 , L1599 , L1603;
end;
theorem
L1620: (for B671 , B672 , B673 being set holds (B673 c= ( B671 U+ B672 ) implies (ex B674 , B675 being set st (B673 = ( B674 U+ B675 ) & B674 c= B671 & B675 c= B672))))
proof
let C708 , C709 , C710 being set;
assume L1621: C710 c= ( C708 U+ C709 );
take D136 = ( proj1 ( C710 /\ [: C708 , { 1 } :] ) );
take D137 = ( proj1 ( C710 /\ [: C709 , { 2 } :] ) );
L1622: ( C708 U+ C709 ) = ( [: C708 , { 1 } :] \/ [: C709 , { 2 } :] ) by L1581;
thus L1623: C710 = ( D136 U+ D137 )
proof
thus L1624:now
let C711 being set;
assume L1625: C711 in C710;
L1626: C711 = [ ( C711 `1 ) , ( C711 `2 ) ] by L1625 , L1621 , L1594;
L1627: (C711 in [: C708 , { 1 } :] or C711 in [: C709 , { 2 } :]) by L1621 , L1622 , L1625 , XBOOLE_0:def 3;
L1628: ((C711 in ( C710 /\ [: C708 , { 1 } :] ) & ( C711 `2 ) = 1) or (C711 in ( C710 /\ [: C709 , { 2 } :] ) & ( C711 `2 ) = 2)) by L1627 , L1625 , L1626 , XBOOLE_0:def 4 , ZFMISC_1:106;
L1629: ((( C711 `1 ) in D136 & ( C711 `2 ) = 1) or (( C711 `1 ) in D137 & ( C711 `2 ) = 2)) by L1628 , L1626 , XTUPLE_0:def 12;
thus L1630: C711 in ( D136 U+ D137 ) by L1629 , L1626 , L1599 , L1603;
end;
let C712 being set;
assume L1631: C712 in ( D136 U+ D137 );
L1632: C712 = [ ( C712 `1 ) , ( C712 `2 ) ] by L1631 , L1594;
per cases  by L1631 , L1594;
suppose L1633: (( C712 `2 ) = 1 & ( C712 `1 ) in D136);

consider C713 being set such that L1634: [ ( C712 `1 ) , C713 ] in ( C710 /\ [: C708 , { 1 } :] ) by L1633 , XTUPLE_0:def 12;
L1635: ([ ( C712 `1 ) , C713 ] in C710 & [ ( C712 `1 ) , C713 ] in [: C708 , { 1 } :]) by L1634 , XBOOLE_0:def 4;
thus L1636: thesis by L1635 , L1632 , L1633 , ZFMISC_1:106;
end;
suppose L1637: (( C712 `2 ) = 2 & ( C712 `1 ) in D137);

consider C714 being set such that L1638: [ ( C712 `1 ) , C714 ] in ( C710 /\ [: C709 , { 2 } :] ) by L1637 , XTUPLE_0:def 12;
L1639: ([ ( C712 `1 ) , C714 ] in C710 & [ ( C712 `1 ) , C714 ] in [: C709 , { 2 } :]) by L1638 , XBOOLE_0:def 4;
thus L1640: thesis by L1639 , L1632 , L1637 , ZFMISC_1:106;
end;
end;

L1642: ( C710 /\ [: C709 , { 2 } :] ) c= [: C709 , { 2 } :] by XBOOLE_1:17;
L1643: D137 c= ( proj1 [: C709 , { 2 } :] ) by L1642 , XTUPLE_0:8;
L1644: ( C710 /\ [: C708 , { 1 } :] ) c= [: C708 , { 1 } :] by XBOOLE_1:17;
L1645: D136 c= ( proj1 [: C708 , { 1 } :] ) by L1644 , XTUPLE_0:8;
thus L1646: thesis by L1645 , L1643 , FUNCT_5:9;
end;
theorem
L1647: (for B676 , B677 , B678 , B679 being set holds (( B676 U+ B677 ) = ( B678 U+ B679 ) iff (B676 = B678 & B677 = B679)))
proof
let C715 , C716 , C717 , C718 being set;
L1648: (( C715 U+ C716 ) c= ( C717 U+ C718 ) iff (C715 c= C717 & C716 c= C718)) by L1607;
L1649: (( C717 U+ C718 ) c= ( C715 U+ C716 ) iff (C717 c= C715 & C718 c= C716)) by L1607;
thus L1650: thesis by L1649 , L1648 , XBOOLE_0:def 10;
end;
theorem
L1651: (for B680 , B681 , B682 , B683 being set holds ( ( B680 U+ B681 ) \/ ( B682 U+ B683 ) ) = ( ( B680 \/ B682 ) U+ ( B681 \/ B683 ) ))
proof
let C719 , C720 , C721 , C722 being set;
set D138 = [: C719 , { 1 } :];
set D139 = [: C721 , { 1 } :];
set D140 = [: C720 , { 2 } :];
set D141 = [: C722 , { 2 } :];
set D142 = [: ( C719 \/ C721 ) , { 1 } :];
set D143 = [: ( C720 \/ C722 ) , { 2 } :];
L1652: D142 = ( D138 \/ D139 ) by ZFMISC_1:97;
L1653: (( ( C719 \/ C721 ) U+ ( C720 \/ C722 ) ) = ( D142 \/ D143 ) & D143 = ( D140 \/ D141 )) by L1581 , ZFMISC_1:97;
L1654: (( C719 U+ C720 ) = ( D138 \/ D140 ) & ( C721 U+ C722 ) = ( D139 \/ D141 )) by L1581;
thus L1655: ( ( C719 U+ C720 ) \/ ( C721 U+ C722 ) ) = ( ( ( D138 \/ D140 ) \/ D139 ) \/ D141 ) by L1654 , XBOOLE_1:4
.= ( ( D142 \/ D140 ) \/ D141 ) by L1652 , XBOOLE_1:4
.= ( ( C719 \/ C721 ) U+ ( C720 \/ C722 ) ) by L1653 , XBOOLE_1:4;
end;
theorem
L1656: (for B684 , B685 , B686 , B687 being set holds ( ( B684 U+ B685 ) /\ ( B686 U+ B687 ) ) = ( ( B684 /\ B686 ) U+ ( B685 /\ B687 ) ))
proof
let C723 , C724 , C725 , C726 being set;
set D144 = [: C723 , { 1 } :];
set D145 = [: C725 , { 1 } :];
set D146 = [: C724 , { 2 } :];
set D147 = [: C726 , { 2 } :];
set D148 = [: ( C723 /\ C725 ) , { 1 } :];
set D149 = [: ( C724 /\ C726 ) , { 2 } :];
L1657: D148 = ( D144 /\ D145 ) by ZFMISC_1:99;
L1658: { 1 } misses { 2 } by ZFMISC_1:11;
L1659: D146 misses D145 by L1658 , ZFMISC_1:104;
L1660: (D149 = ( D146 /\ D147 ) & ( D146 /\ D145 ) = ( {} )) by L1659 , XBOOLE_0:def 7 , ZFMISC_1:99;
L1661: D144 misses D147 by L1658 , ZFMISC_1:104;
L1662: ( D144 /\ D147 ) = ( {} ) by L1661 , XBOOLE_0:def 7;
L1663: (( C723 U+ C724 ) = ( D144 \/ D146 ) & ( C725 U+ C726 ) = ( D145 \/ D147 )) by L1581;
thus L1664: ( ( C723 U+ C724 ) /\ ( C725 U+ C726 ) ) = ( ( ( D144 \/ D146 ) /\ D145 ) \/ ( ( D144 \/ D146 ) /\ D147 ) ) by L1663 , XBOOLE_1:23
.= ( ( D148 \/ ( D146 /\ D145 ) ) \/ ( ( D144 \/ D146 ) /\ D147 ) ) by L1657 , XBOOLE_1:23
.= ( D148 \/ ( ( D144 /\ D147 ) \/ D149 ) ) by L1660 , XBOOLE_1:23
.= ( ( C723 /\ C725 ) U+ ( C724 /\ C726 ) ) by L1662 , L1581;
end;
definition
let C727 , C728 being Coherence_Space;
func C727 "/\" C728 -> set equals 
{ ( B688 U+ B689 ) where B688 is (Element of C727) , B689 is (Element of C728) : (not contradiction) };
correctness;
func C727 "\/" C728 -> set equals 
( { ( B690 U+ ( {} ) ) where B690 is (Element of C727) : (not contradiction) } \/ { ( ( {} ) U+ B691 ) where B691 is (Element of C728) : (not contradiction) } );
correctness;
end;
theorem
L1666: (for B692 , B693 being Coherence_Space holds (for B694 being set holds (B694 in ( B692 "/\" B693 ) iff (ex B695 being (Element of B692) st (ex B696 being (Element of B693) st B694 = ( B695 U+ B696 ))))));
theorem
L1667: (for B697 , B698 being Coherence_Space holds (for B699 , B700 being set holds (( B699 U+ B700 ) in ( B697 "/\" B698 ) iff (B699 in B697 & B700 in B698))))
proof
let C729 , C730 being Coherence_Space;
let C731 , C732 being set;
L1668:
now
given C733 being (Element of C729) , C734 being (Element of C730) such that
L1669: ( C731 U+ C732 ) = ( C733 U+ C734 );

take D150 = C733;
take D151 = C734;
thus L1670: (C731 = D150 & C732 = D151) by L1669 , L1647;
end;
thus L1671: thesis by L1668;
end;
theorem
L1672: (for B701 , B702 being Coherence_Space holds ( union ( B701 "/\" B702 ) ) = ( ( union B701 ) U+ ( union B702 ) ))
proof
let C735 , C736 being Coherence_Space;
thus L1673: ( union ( C735 "/\" C736 ) ) c= ( ( union C735 ) U+ ( union C736 ) )
proof
let C737 being set;
assume L1674: C737 in ( union ( C735 "/\" C736 ) );
consider C738 being set such that L1675: C737 in C738 and L1676: C738 in ( C735 "/\" C736 ) by L1674 , TARSKI:def 4;
consider C739 being (Element of C735), C740 being (Element of C736) such that L1677: C738 = ( C739 U+ C740 ) by L1676;
L1678: (C739 c= ( union C735 ) & C740 c= ( union C736 )) by ZFMISC_1:74;
L1679: C738 c= ( ( union C735 ) U+ ( union C736 ) ) by L1678 , L1677 , L1607;
thus L1680: thesis by L1679 , L1675;
end;

let C741 being set;
assume L1681: C741 in ( ( union C735 ) U+ ( union C736 ) );
L1682: C741 = [ ( C741 `1 ) , ( C741 `2 ) ] by L1681 , L1594;
per cases  by L1681 , L1594;
suppose L1683: (( C741 `2 ) = 1 & ( C741 `1 ) in ( union C735 ));

set D152 = the (Element of C736);
consider C742 being set such that L1684: ( C741 `1 ) in C742 and L1685: C742 in C735 by L1683 , TARSKI:def 4;
reconsider D153 = C742 as (Element of C735) by L1685;
L1686: ( D153 U+ D152 ) in ( C735 "/\" C736 );
L1687: C741 in ( D153 U+ D152 ) by L1682 , L1683 , L1684 , L1599;
thus L1688: thesis by L1687 , L1686 , TARSKI:def 4;
end;
suppose L1689: (( C741 `2 ) = 2 & ( C741 `1 ) in ( union C736 ));

set D154 = the (Element of C735);
consider C743 being set such that L1690: ( C741 `1 ) in C743 and L1691: C743 in C736 by L1689 , TARSKI:def 4;
reconsider D155 = C743 as (Element of C736) by L1691;
L1692: ( D154 U+ D155 ) in ( C735 "/\" C736 );
L1693: C741 in ( D154 U+ D155 ) by L1682 , L1689 , L1690 , L1603;
thus L1694: thesis by L1693 , L1692 , TARSKI:def 4;
end;
end;
theorem
L1696: (for B703 , B704 being Coherence_Space holds (for B705 , B706 being set holds (( B705 U+ B706 ) in ( B703 "\/" B704 ) iff ((B705 in B703 & B706 = ( {} )) or (B705 = ( {} ) & B706 in B704)))))
proof
let C744 , C745 being Coherence_Space;
let C746 , C747 being set;
L1697:
now
given C748 being (Element of C744) such that
L1698: ( C746 U+ C747 ) = ( C748 U+ ( {} ) );

L1699: C746 = C748 by L1698 , L1647;
thus L1700: (C746 in C744 & C747 = ( {} )) by L1699 , L1698 , L1647;
end;
L1701:
now
given C749 being (Element of C745) such that
L1702: ( C746 U+ C747 ) = ( ( {} ) U+ C749 );

L1703: C747 = C749 by L1702 , L1647;
thus L1704: (C747 in C745 & C746 = ( {} )) by L1703 , L1702 , L1647;
end;
L1705: (( C746 U+ C747 ) in ( C744 "\/" C745 ) iff (( C746 U+ C747 ) in { ( B707 U+ ( {} ) ) where B707 is (Element of C744) : (not contradiction) } or ( C746 U+ C747 ) in { ( ( {} ) U+ B708 ) where B708 is (Element of C745) : (not contradiction) })) by XBOOLE_0:def 3;
thus L1706: thesis by L1705 , L1697 , L1701;
end;
theorem
L1707: (for B709 , B710 being Coherence_Space holds (for B711 being set holds (B711 in ( B709 "\/" B710 ) implies (ex B712 being (Element of B709) st (ex B713 being (Element of B710) st (B711 = ( B712 U+ B713 ) & (B712 = ( {} ) or B713 = ( {} ))))))))
proof
let C750 , C751 being Coherence_Space;
let C752 being set;
assume L1708: C752 in ( C750 "\/" C751 );
L1709: (C752 in { ( B714 U+ ( {} ) ) where B714 is (Element of C750) : (not contradiction) } or C752 in { ( ( {} ) U+ B715 ) where B715 is (Element of C751) : (not contradiction) }) by L1708 , XBOOLE_0:def 3;
L1710: ((( {} ) in C751 & (ex B716 being (Element of C750) st C752 = ( B716 U+ ( {} ) ))) or (( {} ) in C750 & (ex B717 being (Element of C751) st C752 = ( ( {} ) U+ B717 )))) by L1709 , COH_SP:1;
thus L1711: thesis by L1710;
end;
theorem
L1712: (for B718 , B719 being Coherence_Space holds ( union ( B718 "\/" B719 ) ) = ( ( union B718 ) U+ ( union B719 ) ))
proof
let C753 , C754 being Coherence_Space;
thus L1713: ( union ( C753 "\/" C754 ) ) c= ( ( union C753 ) U+ ( union C754 ) )
proof
let C755 being set;
assume L1714: C755 in ( union ( C753 "\/" C754 ) );
consider C756 being set such that L1715: C755 in C756 and L1716: C756 in ( C753 "\/" C754 ) by L1714 , TARSKI:def 4;
consider C757 being (Element of C753), C758 being (Element of C754) such that L1717: C756 = ( C757 U+ C758 ) and L1718: (C757 = ( {} ) or C758 = ( {} )) by L1716 , L1707;
L1719: (C757 c= ( union C753 ) & C758 c= ( union C754 )) by ZFMISC_1:74;
L1720: C756 c= ( ( union C753 ) U+ ( union C754 ) ) by L1719 , L1717 , L1607;
thus L1721: thesis by L1720 , L1715;
end;

let C759 being set;
assume L1722: C759 in ( ( union C753 ) U+ ( union C754 ) );
L1723: C759 = [ ( C759 `1 ) , ( C759 `2 ) ] by L1722 , L1594;
per cases  by L1722 , L1594;
suppose L1724: (( C759 `2 ) = 1 & ( C759 `1 ) in ( union C753 ));

reconsider D156 = ( {} ) as (Element of C754) by COH_SP:1;
consider C760 being set such that L1725: ( C759 `1 ) in C760 and L1726: C760 in C753 by L1724 , TARSKI:def 4;
reconsider D157 = C760 as (Element of C753) by L1726;
L1727: ( D157 U+ D156 ) in ( C753 "\/" C754 ) by L1696;
L1728: C759 in ( D157 U+ D156 ) by L1723 , L1724 , L1725 , L1599;
thus L1729: thesis by L1728 , L1727 , TARSKI:def 4;
end;
suppose L1730: (( C759 `2 ) = 2 & ( C759 `1 ) in ( union C754 ));

reconsider D158 = ( {} ) as (Element of C753) by COH_SP:1;
consider C761 being set such that L1731: ( C759 `1 ) in C761 and L1732: C761 in C754 by L1730 , TARSKI:def 4;
reconsider D159 = C761 as (Element of C754) by L1732;
L1733: ( D158 U+ D159 ) in ( C753 "\/" C754 ) by L1696;
L1734: C759 in ( D158 U+ D159 ) by L1723 , L1730 , L1731 , L1603;
thus L1735: thesis by L1734 , L1733 , TARSKI:def 4;
end;
end;
registration
let C762 , C763 being Coherence_Space;
cluster ( C762 "/\" C763 ) -> non  empty  subset-closed  binary_complete;
coherence
proof
set D160 = the (Element of C762);
set D161 = the (Element of C763);
L1737: ( D160 U+ D161 ) in ( C762 "/\" C763 );
thus L1738: ( C762 "/\" C763 ) is non  empty by L1737;
thus L1739:now
let C764 , C765 being set;
assume L1740: C764 in ( C762 "/\" C763 );
consider C766 being (Element of C762), C767 being (Element of C763) such that L1741: C764 = ( C766 U+ C767 ) by L1740;
assume L1742: C765 c= C764;
consider C768 , C769 being set such that L1743: C765 = ( C768 U+ C769 ) and L1744: (C768 c= C766 & C769 c= C767) by L1742 , L1741 , L1620;
L1745: (C768 in C762 & C769 in C763) by L1744 , CLASSES1:def 1;
thus L1746: C765 in ( C762 "/\" C763 ) by L1745 , L1743;
end;
let C770 being set;
assume that
L1747: (for B720 , B721 being set holds ((B720 in C770 & B721 in C770) implies ( B720 \/ B721 ) in ( C762 "/\" C763 )));
set D162 = { B722 where B722 is (Element of C763) : (ex B723 being (Element of C762) st ( B723 U+ B722 ) in C770) };
L1748:
now
let C771 , C772 being set;
assume L1749: C771 in D162;
consider C773 being (Element of C763) such that L1750: C771 = C773 and L1751: (ex B724 being (Element of C762) st ( B724 U+ C773 ) in C770) by L1749;
consider C774 being (Element of C762) such that L1752: ( C774 U+ C773 ) in C770 by L1751;
assume L1753: C772 in D162;
consider C775 being (Element of C763) such that L1754: C772 = C775 and L1755: (ex B725 being (Element of C762) st ( B725 U+ C775 ) in C770) by L1753;
consider C776 being (Element of C762) such that L1756: ( C776 U+ C775 ) in C770 by L1755;
L1757: ( ( C774 U+ C773 ) \/ ( C776 U+ C775 ) ) in ( C762 "/\" C763 ) by L1747 , L1752 , L1756;
L1758: ( ( C774 \/ C776 ) U+ ( C773 \/ C775 ) ) in ( C762 "/\" C763 ) by L1757 , L1651;
thus L1759: ( C771 \/ C772 ) in C763 by L1758 , L1750 , L1754 , L1667;
end;
L1760: ( union D162 ) in C763 by L1748 , L2;
set D163 = { B726 where B726 is (Element of C762) : (ex B727 being (Element of C763) st ( B726 U+ B727 ) in C770) };
L1761: ( ( union D163 ) U+ ( union D162 ) ) = ( union C770 )
proof
thus L1762:now
let C777 being set;
assume L1763: C777 in ( ( union D163 ) U+ ( union D162 ) );
L1764: C777 = [ ( C777 `1 ) , ( C777 `2 ) ] by L1763 , L1594;
per cases  by L1763 , L1594;
suppose L1765: (( C777 `2 ) = 1 & ( C777 `1 ) in ( union D163 ));

consider C778 being set such that L1766: ( C777 `1 ) in C778 and L1767: C778 in D163 by L1765 , TARSKI:def 4;
consider C779 being (Element of C762) such that L1768: C778 = C779 and L1769: (ex B728 being (Element of C763) st ( C779 U+ B728 ) in C770) by L1767;
consider C780 being (Element of C763) such that L1770: ( C779 U+ C780 ) in C770 by L1769;
L1771: C777 in ( C779 U+ C780 ) by L1764 , L1765 , L1766 , L1768 , L1599;
thus L1772: C777 in ( union C770 ) by L1771 , L1770 , TARSKI:def 4;
end;
suppose L1773: (( C777 `2 ) = 2 & ( C777 `1 ) in ( union D162 ));

consider C781 being set such that L1774: ( C777 `1 ) in C781 and L1775: C781 in D162 by L1773 , TARSKI:def 4;
consider C782 being (Element of C763) such that L1776: C781 = C782 and L1777: (ex B729 being (Element of C762) st ( B729 U+ C782 ) in C770) by L1775;
consider C783 being (Element of C762) such that L1778: ( C783 U+ C782 ) in C770 by L1777;
L1779: C777 in ( C783 U+ C782 ) by L1764 , L1773 , L1774 , L1776 , L1603;
thus L1780: C777 in ( union C770 ) by L1779 , L1778 , TARSKI:def 4;
end;
end;
let C784 being set;
assume L1782: C784 in ( union C770 );
consider C785 being set such that L1783: C784 in C785 and L1784: C785 in C770 by L1782 , TARSKI:def 4;
L1785: ( C785 \/ C785 ) in ( C762 "/\" C763 ) by L1747 , L1784;
consider C786 being (Element of C762), C787 being (Element of C763) such that L1786: C785 = ( C786 U+ C787 ) by L1785;
L1787: C787 in D162 by L1784 , L1786;
L1788: C787 c= ( union D162 ) by L1787 , ZFMISC_1:74;
L1789: C786 in D163 by L1784 , L1786;
L1790: C786 c= ( union D163 ) by L1789 , ZFMISC_1:74;
L1791: ( C786 U+ C787 ) c= ( ( union D163 ) U+ ( union D162 ) ) by L1790 , L1788 , L1607;
thus L1792: thesis by L1791 , L1783 , L1786;
end;
L1793:
now
let C788 , C789 being set;
assume L1794: C788 in D163;
consider C790 being (Element of C762) such that L1795: C788 = C790 and L1796: (ex B730 being (Element of C763) st ( C790 U+ B730 ) in C770) by L1794;
consider C791 being (Element of C763) such that L1797: ( C790 U+ C791 ) in C770 by L1796;
assume L1798: C789 in D163;
consider C792 being (Element of C762) such that L1799: C789 = C792 and L1800: (ex B731 being (Element of C763) st ( C792 U+ B731 ) in C770) by L1798;
consider C793 being (Element of C763) such that L1801: ( C792 U+ C793 ) in C770 by L1800;
L1802: ( ( C790 U+ C791 ) \/ ( C792 U+ C793 ) ) in ( C762 "/\" C763 ) by L1747 , L1797 , L1801;
L1803: ( ( C790 \/ C792 ) U+ ( C791 \/ C793 ) ) in ( C762 "/\" C763 ) by L1802 , L1651;
thus L1804: ( C788 \/ C789 ) in C762 by L1803 , L1795 , L1799 , L1667;
end;
L1805: ( union D163 ) in C762 by L1793 , L2;
thus L1806: thesis by L1805 , L1760 , L1761;
end;
cluster ( C762 "\/" C763 ) -> non  empty  subset-closed  binary_complete;
coherence
proof
set D164 = the (Element of C762);
L1807: ( D164 U+ ( {} ) ) in ( C762 "\/" C763 ) by L1696;
thus L1808: ( C762 "\/" C763 ) is non  empty by L1807;
thus L1809:now
let C794 , C795 being set;
assume L1810: C794 in ( C762 "\/" C763 );
consider C796 being (Element of C762), C797 being (Element of C763) such that L1811: C794 = ( C796 U+ C797 ) and L1812: (C796 = ( {} ) or C797 = ( {} )) by L1810 , L1707;
assume L1813: C795 c= C794;
consider C798 , C799 being set such that L1814: C795 = ( C798 U+ C799 ) and L1815: (C798 c= C796 & C799 c= C797) by L1813 , L1811 , L1620;
L1816: (C798 in C762 & C799 in C763) by L1815 , CLASSES1:def 1;
L1817: (C798 = ( {} ) or C799 = ( {} )) by L1812 , L1815;
thus L1818: C795 in ( C762 "\/" C763 ) by L1817 , L1814 , L1816 , L1696;
end;
let C800 being set;
set D165 = { B732 where B732 is (Element of C762) : (ex B733 being (Element of C763) st ( B732 U+ B733 ) in C800) };
set D166 = { B734 where B734 is (Element of C763) : (ex B735 being (Element of C762) st ( B735 U+ B734 ) in C800) };
assume L1819: (for B736 , B737 being set holds ((B736 in C800 & B737 in C800) implies ( B736 \/ B737 ) in ( C762 "\/" C763 )));
L1820:
now
let C801 , C802 being set;
assume L1821: C801 in D166;
consider C803 being (Element of C763) such that L1822: C801 = C803 and L1823: (ex B738 being (Element of C762) st ( B738 U+ C803 ) in C800) by L1821;
consider C804 being (Element of C762) such that L1824: ( C804 U+ C803 ) in C800 by L1823;
assume L1825: C802 in D166;
consider C805 being (Element of C763) such that L1826: C802 = C805 and L1827: (ex B739 being (Element of C762) st ( B739 U+ C805 ) in C800) by L1825;
consider C806 being (Element of C762) such that L1828: ( C806 U+ C805 ) in C800 by L1827;
L1829: ( ( C804 U+ C803 ) \/ ( C806 U+ C805 ) ) in ( C762 "\/" C763 ) by L1819 , L1824 , L1828;
L1830: ( ( C804 \/ C806 ) U+ ( C803 \/ C805 ) ) in ( C762 "\/" C763 ) by L1829 , L1651;
L1831: (( C801 \/ C802 ) in C763 or ( C801 \/ C802 ) = ( {} )) by L1830 , L1822 , L1826 , L1696;
thus L1832: ( C801 \/ C802 ) in C763 by L1831 , COH_SP:1;
end;
L1833: ( union D166 ) in C763 by L1820 , L2;
L1834: ( ( union D165 ) U+ ( union D166 ) ) = ( union C800 )
proof
thus L1835:now
let C807 being set;
assume L1836: C807 in ( ( union D165 ) U+ ( union D166 ) );
L1837: C807 = [ ( C807 `1 ) , ( C807 `2 ) ] by L1836 , L1594;
per cases  by L1836 , L1594;
suppose L1838: (( C807 `2 ) = 1 & ( C807 `1 ) in ( union D165 ));

consider C808 being set such that L1839: ( C807 `1 ) in C808 and L1840: C808 in D165 by L1838 , TARSKI:def 4;
consider C809 being (Element of C762) such that L1841: C808 = C809 and L1842: (ex B740 being (Element of C763) st ( C809 U+ B740 ) in C800) by L1840;
consider C810 being (Element of C763) such that L1843: ( C809 U+ C810 ) in C800 by L1842;
L1844: C807 in ( C809 U+ C810 ) by L1837 , L1838 , L1839 , L1841 , L1599;
thus L1845: C807 in ( union C800 ) by L1844 , L1843 , TARSKI:def 4;
end;
suppose L1846: (( C807 `2 ) = 2 & ( C807 `1 ) in ( union D166 ));

consider C811 being set such that L1847: ( C807 `1 ) in C811 and L1848: C811 in D166 by L1846 , TARSKI:def 4;
consider C812 being (Element of C763) such that L1849: C811 = C812 and L1850: (ex B741 being (Element of C762) st ( B741 U+ C812 ) in C800) by L1848;
consider C813 being (Element of C762) such that L1851: ( C813 U+ C812 ) in C800 by L1850;
L1852: C807 in ( C813 U+ C812 ) by L1837 , L1846 , L1847 , L1849 , L1603;
thus L1853: C807 in ( union C800 ) by L1852 , L1851 , TARSKI:def 4;
end;
end;
let C814 being set;
assume L1855: C814 in ( union C800 );
consider C815 being set such that L1856: C814 in C815 and L1857: C815 in C800 by L1855 , TARSKI:def 4;
L1858: ( C815 \/ C815 ) in ( C762 "\/" C763 ) by L1819 , L1857;
consider C816 being (Element of C762), C817 being (Element of C763) such that L1859: C815 = ( C816 U+ C817 ) and L1860: (C816 = ( {} ) or C817 = ( {} )) by L1858 , L1707;
L1861: C817 in D166 by L1857 , L1859;
L1862: C817 c= ( union D166 ) by L1861 , ZFMISC_1:74;
L1863: C816 in D165 by L1857 , L1859;
L1864: C816 c= ( union D165 ) by L1863 , ZFMISC_1:74;
L1865: ( C816 U+ C817 ) c= ( ( union D165 ) U+ ( union D166 ) ) by L1864 , L1862 , L1607;
thus L1866: thesis by L1865 , L1856 , L1859;
end;
L1867:
now
assume L1868: ( union D165 ) <> ( {} );
reconsider D167 = ( union D165 ) as non  empty set by L1868;
set D168 = the (Element of D167);
consider C818 being set such that L1869: D168 in C818 and L1870: C818 in D165 by TARSKI:def 4;
consider C819 being (Element of C762) such that L1871: C818 = C819 and L1872: (ex B742 being (Element of C763) st ( C819 U+ B742 ) in C800) by L1870;
consider C820 being (Element of C763) such that L1873: ( C819 U+ C820 ) in C800 by L1872;
assume L1874: ( union D166 ) <> ( {} );
reconsider D169 = ( union D166 ) as non  empty set by L1874;
set D170 = the (Element of D169);
consider C821 being set such that L1875: D170 in C821 and L1876: C821 in D166 by TARSKI:def 4;
consider C822 being (Element of C763) such that L1877: C821 = C822 and L1878: (ex B743 being (Element of C762) st ( B743 U+ C822 ) in C800) by L1876;
consider C823 being (Element of C762) such that L1879: ( C823 U+ C822 ) in C800 by L1878;
L1880: ( ( C819 U+ C820 ) \/ ( C823 U+ C822 ) ) in ( C762 "\/" C763 ) by L1819 , L1873 , L1879;
L1881: ( ( C819 \/ C823 ) U+ ( C820 \/ C822 ) ) in ( C762 "\/" C763 ) by L1880 , L1651;
thus L1882: contradiction by L1881 , L1869 , L1871 , L1875 , L1877 , L1696;
end;
L1883:
now
let C824 , C825 being set;
assume L1884: C824 in D165;
consider C826 being (Element of C762) such that L1885: C824 = C826 and L1886: (ex B744 being (Element of C763) st ( C826 U+ B744 ) in C800) by L1884;
consider C827 being (Element of C763) such that L1887: ( C826 U+ C827 ) in C800 by L1886;
assume L1888: C825 in D165;
consider C828 being (Element of C762) such that L1889: C825 = C828 and L1890: (ex B745 being (Element of C763) st ( C828 U+ B745 ) in C800) by L1888;
consider C829 being (Element of C763) such that L1891: ( C828 U+ C829 ) in C800 by L1890;
L1892: ( ( C826 U+ C827 ) \/ ( C828 U+ C829 ) ) in ( C762 "\/" C763 ) by L1819 , L1887 , L1891;
L1893: ( ( C826 \/ C828 ) U+ ( C827 \/ C829 ) ) in ( C762 "\/" C763 ) by L1892 , L1651;
L1894: (( C824 \/ C825 ) in C762 or ( C824 \/ C825 ) = ( {} )) by L1893 , L1885 , L1889 , L1696;
thus L1895: ( C824 \/ C825 ) in C762 by L1894 , COH_SP:1;
end;
L1896: ( union D165 ) in C762 by L1883 , L2;
thus L1897: thesis by L1896 , L1833 , L1867 , L1834 , L1696;
end;
end;
theorem
L1899: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B746 , B747 being set holds ([ [ B746 , 1 ] , [ B747 , 1 ] ] in ( Web ( R1 "/\" R2 ) ) iff [ B746 , B747 ] in ( Web R1 )))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C830 , C831 being set;
L1900: ([ [ C830 , 1 ] , [ C831 , 1 ] ] in ( Web ( R1 "/\" R2 ) ) iff { [ C830 , 1 ] , [ C831 , 1 ] } in ( R1 "/\" R2 )) by COH_SP:5;
L1901: ([ C830 , C831 ] in ( Web R1 ) iff { C830 , C831 } in R1) by COH_SP:5;
L1902: [: { C830 , C831 } , { 1 } :] = { [ C830 , 1 ] , [ C831 , 1 ] } by ZFMISC_1:30;
L1903: (( { C830 , C831 } U+ ( {} ) ) = [: { C830 , C831 } , { 1 } :] & ( {} ) in R2) by L1591 , COH_SP:1;
thus L1904: thesis by L1903 , L1900 , L1901 , L1902 , L1667;
end;
theorem
L1905: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B748 , B749 being set holds ([ [ B748 , 2 ] , [ B749 , 2 ] ] in ( Web ( R1 "/\" R2 ) ) iff [ B748 , B749 ] in ( Web R2 )))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C832 , C833 being set;
L1906: ([ [ C832 , 2 ] , [ C833 , 2 ] ] in ( Web ( R1 "/\" R2 ) ) iff { [ C832 , 2 ] , [ C833 , 2 ] } in ( R1 "/\" R2 )) by COH_SP:5;
L1907: ([ C832 , C833 ] in ( Web R2 ) iff { C832 , C833 } in R2) by COH_SP:5;
L1908: [: { C832 , C833 } , { 2 } :] = { [ C832 , 2 ] , [ C833 , 2 ] } by ZFMISC_1:30;
L1909: (( ( {} ) U+ { C832 , C833 } ) = [: { C832 , C833 } , { 2 } :] & ( {} ) in R1) by L1591 , COH_SP:1;
thus L1910: thesis by L1909 , L1906 , L1907 , L1908 , L1667;
end;
theorem
L1911: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B750 , B751 being set holds ((B750 in ( union R1 ) & B751 in ( union R2 )) implies ([ [ B750 , 1 ] , [ B751 , 2 ] ] in ( Web ( R1 "/\" R2 ) ) & [ [ B751 , 2 ] , [ B750 , 1 ] ] in ( Web ( R1 "/\" R2 ) ))))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C834 , C835 being set;
assume L1912: (C834 in ( union R1 ) & C835 in ( union R2 ));
L1913: ({ C834 } in R1 & { C835 } in R2) by L1912 , COH_SP:4;
L1914: ( { C834 } U+ { C835 } ) in ( R1 "/\" R2 ) by L1913;
L1915: ( [: { C834 } , { 1 } :] \/ [: { C835 } , { 2 } :] ) in ( R1 "/\" R2 ) by L1914 , L1581;
L1916: ( { [ C834 , 1 ] } \/ [: { C835 } , { 2 } :] ) in ( R1 "/\" R2 ) by L1915 , ZFMISC_1:29;
L1917: ( { [ C834 , 1 ] } \/ { [ C835 , 2 ] } ) in ( R1 "/\" R2 ) by L1916 , ZFMISC_1:29;
L1918: { [ C834 , 1 ] , [ C835 , 2 ] } in ( R1 "/\" R2 ) by L1917 , ENUMSET1:1;
thus L1919: [ [ C834 , 1 ] , [ C835 , 2 ] ] in ( Web ( R1 "/\" R2 ) ) by L1918 , COH_SP:5;
thus L1920: thesis by L1918 , COH_SP:5;
end;
theorem
L1921: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B752 , B753 being set holds ([ [ B752 , 1 ] , [ B753 , 1 ] ] in ( Web ( R1 "\/" R2 ) ) iff [ B752 , B753 ] in ( Web R1 )))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C836 , C837 being set;
L1922: ([ [ C836 , 1 ] , [ C837 , 1 ] ] in ( Web ( R1 "\/" R2 ) ) iff { [ C836 , 1 ] , [ C837 , 1 ] } in ( R1 "\/" R2 )) by COH_SP:5;
L1923: ([ C836 , C837 ] in ( Web R1 ) iff { C836 , C837 } in R1) by COH_SP:5;
L1924: (( { C836 , C837 } U+ ( {} ) ) = [: { C836 , C837 } , { 1 } :] & [: { C836 , C837 } , { 1 } :] = { [ C836 , 1 ] , [ C837 , 1 ] }) by L1591 , ZFMISC_1:30;
thus L1925: thesis by L1924 , L1922 , L1923 , L1696;
end;
theorem
L1926: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B754 , B755 being set holds ([ [ B754 , 2 ] , [ B755 , 2 ] ] in ( Web ( R1 "\/" R2 ) ) iff [ B754 , B755 ] in ( Web R2 )))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C838 , C839 being set;
L1927: ([ [ C838 , 2 ] , [ C839 , 2 ] ] in ( Web ( R1 "\/" R2 ) ) iff { [ C838 , 2 ] , [ C839 , 2 ] } in ( R1 "\/" R2 )) by COH_SP:5;
L1928: ([ C838 , C839 ] in ( Web R2 ) iff { C838 , C839 } in R2) by COH_SP:5;
L1929: (( ( {} ) U+ { C838 , C839 } ) = [: { C838 , C839 } , { 2 } :] & [: { C838 , C839 } , { 2 } :] = { [ C838 , 2 ] , [ C839 , 2 ] }) by L1591 , ZFMISC_1:30;
thus L1930: thesis by L1929 , L1927 , L1928 , L1696;
end;
theorem
L1931: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B756 , B757 being set holds ((not [ [ B756 , 1 ] , [ B757 , 2 ] ] in ( Web ( R1 "\/" R2 ) )) & (not [ [ B757 , 2 ] , [ B756 , 1 ] ] in ( Web ( R1 "\/" R2 ) ))))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C840 , C841 being set;
L1932: ( { C840 } U+ { C841 } ) = ( [: { C840 } , { 1 } :] \/ [: { C841 } , { 2 } :] ) by L1581
.= ( { [ C840 , 1 ] } \/ [: { C841 } , { 2 } :] ) by ZFMISC_1:29
.= ( { [ C840 , 1 ] } \/ { [ C841 , 2 ] } ) by ZFMISC_1:29
.= { [ C840 , 1 ] , [ C841 , 2 ] } by ENUMSET1:1;
L1933: (not ( { C840 } U+ { C841 } ) in ( R1 "\/" R2 )) by L1696;
thus L1934: (not [ [ C840 , 1 ] , [ C841 , 2 ] ] in ( Web ( R1 "\/" R2 ) )) by L1933 , L1932 , COH_SP:5;
thus L1935: thesis by L1933 , L1932 , COH_SP:5;
end;
theorem
L1936: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds ( 'not' ( R1 "/\" R2 ) ) = ( ( 'not' R1 ) "\/" ( 'not' R2 ) )))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
set D171 = ( R1 "/\" R2 );
thus L1937: ( 'not' ( R1 "/\" R2 ) ) c= ( ( 'not' R1 ) "\/" ( 'not' R2 ) )
proof
let C842 being set;
L1938: ( union D171 ) = ( ( union R1 ) U+ ( union R2 ) ) by L1672;
assume L1939: C842 in ( 'not' ( R1 "/\" R2 ) );
L1940: C842 c= ( union D171 ) by L1939 , L1449;
consider C843 , C844 being set such that L1941: C842 = ( C843 U+ C844 ) and L1942: C843 c= ( union R1 ) and L1943: C844 c= ( union R2 ) by L1940 , L1938 , L1620;
L1944:
now
reconsider D172 = ( {} ) as (Element of R2) by COH_SP:1;
let C845 being (Element of R1);
L1945: ( C845 U+ D172 ) in D171;
consider C846 being set such that L1946: ( C842 /\ ( C845 U+ D172 ) ) c= { C846 } by L1945 , L1939 , L1449;
L1947: ( ( C843 /\ C845 ) U+ ( C844 /\ D172 ) ) c= { C846 } by L1941 , L1946 , L1656;
L1948: ([: ( C843 /\ C845 ) , { 1 } :] c= ( [: ( C843 /\ C845 ) , { 1 } :] \/ [: ( C844 /\ D172 ) , { 2 } :] ) & ( [: ( C843 /\ C845 ) , { 1 } :] \/ [: ( C844 /\ D172 ) , { 2 } :] ) c= { C846 }) by L1947 , L1581 , XBOOLE_1:7;
L1949: [: ( C843 /\ C845 ) , { 1 } :] c= { C846 } by L1948 , XBOOLE_1:1;
L1950:
now
thus L1951: (( C843 /\ C845 ) = ( {} ) implies ( C843 /\ C845 ) c= { ( 0 ) }) by XBOOLE_1:2;
assume L1952: ( C843 /\ C845 ) <> ( {} );
reconsider D173 = ( C843 /\ C845 ) as non  empty set by L1952;
set D174 = the (Element of D173);
reconsider D175 = D174 as set;
take D176 = D175;
thus L1953: ( C843 /\ C845 ) c= { D176 }
proof
let C847 being set;
L1954: 1 in { 1 } by TARSKI:def 1;
assume L1955: C847 in ( C843 /\ C845 );
L1956: [ C847 , 1 ] in [: ( C843 /\ C845 ) , { 1 } :] by L1955 , L1954 , ZFMISC_1:87;
L1957: [ C847 , 1 ] = C846 by L1956 , L1949 , TARSKI:def 1;
L1958: [ D174 , 1 ] in [: ( C843 /\ C845 ) , { 1 } :] by L1954 , ZFMISC_1:87;
L1959: [ D174 , 1 ] = C846 by L1958 , L1949 , TARSKI:def 1;
L1960: C847 = D174 by L1959 , L1957 , XTUPLE_0:1;
thus L1961: thesis by L1960 , TARSKI:def 1;
end;

end;
thus L1954: (ex B758 being set st ( C843 /\ C845 ) c= { B758 }) by L1950;
end;
reconsider D177 = C843 as (Element of ( 'not' R1 )) by L1944 , L1942 , L1449;
L1955:
now
reconsider D178 = ( {} ) as (Element of R1) by COH_SP:1;
let C848 being (Element of R2);
L1956: ( D178 U+ C848 ) in D171;
consider C849 being set such that L1957: ( C842 /\ ( D178 U+ C848 ) ) c= { C849 } by L1956 , L1939 , L1449;
L1958: ( ( D177 /\ D178 ) U+ ( C844 /\ C848 ) ) c= { C849 } by L1941 , L1957 , L1656;
L1959: ([: ( C844 /\ C848 ) , { 2 } :] c= ( [: ( D177 /\ D178 ) , { 1 } :] \/ [: ( C844 /\ C848 ) , { 2 } :] ) & ( [: ( D177 /\ D178 ) , { 1 } :] \/ [: ( C844 /\ C848 ) , { 2 } :] ) c= { C849 }) by L1958 , L1581 , XBOOLE_1:7;
L1960: [: ( C844 /\ C848 ) , { 2 } :] c= { C849 } by L1959 , XBOOLE_1:1;
L1961:
now
thus L1962: (( C844 /\ C848 ) = ( {} ) implies ( C844 /\ C848 ) c= { ( 0 ) }) by XBOOLE_1:2;
assume L1963: ( C844 /\ C848 ) <> ( {} );
reconsider D179 = ( C844 /\ C848 ) as non  empty set by L1963;
set D180 = the (Element of D179);
reconsider D181 = D180 as set;
take D182 = D181;
thus L1964: ( C844 /\ C848 ) c= { D182 }
proof
let C850 being set;
L1965: 2 in { 2 } by TARSKI:def 1;
assume L1966: C850 in ( C844 /\ C848 );
L1967: [ C850 , 2 ] in [: ( C844 /\ C848 ) , { 2 } :] by L1966 , L1965 , ZFMISC_1:87;
L1968: [ C850 , 2 ] = C849 by L1967 , L1960 , TARSKI:def 1;
L1969: [ D180 , 2 ] in [: ( C844 /\ C848 ) , { 2 } :] by L1965 , ZFMISC_1:87;
L1970: [ D180 , 2 ] = C849 by L1969 , L1960 , TARSKI:def 1;
L1971: C850 = D180 by L1970 , L1968 , XTUPLE_0:1;
thus L1972: thesis by L1971 , TARSKI:def 1;
end;

end;
thus L1965: (ex B759 being set st ( C844 /\ C848 ) c= { B759 }) by L1961;
end;
reconsider D183 = C844 as (Element of ( 'not' R2 )) by L1955 , L1943 , L1449;
L1966:
now
thus L1967: (D177 in ( 'not' R1 ) & D183 in ( 'not' R2 ));
assume L1968: (D177 <> ( {} ) & D183 <> ( {} ));
reconsider D184 = D177 , D185 = D183 as non  empty set by L1968;
set D186 = the (Element of D184);
set D187 = the (Element of D185);
L1969: ( union ( 'not' R2 ) ) = ( union R2 ) by L1481;
L1970: D187 in ( union R2 ) by L1969 , TARSKI:def 4;
L1971: { D187 } in R2 by L1970 , COH_SP:4;
L1972: ( union ( 'not' R1 ) ) = ( union R1 ) by L1481;
L1973: D186 in ( union R1 ) by L1972 , TARSKI:def 4;
L1974: { D186 } in R1 by L1973 , COH_SP:4;
L1975: ( { D186 } U+ { D187 } ) in D171 by L1974 , L1971;
consider C851 being set such that L1976: ( C842 /\ ( { D186 } U+ { D187 } ) ) c= { C851 } by L1975 , L1939 , L1449;
L1977: ( ( D184 /\ { D186 } ) U+ ( D185 /\ { D187 } ) ) c= { C851 } by L1941 , L1976 , L1656;
L1978: D187 in { D187 } by TARSKI:def 1;
L1979: D187 in ( D185 /\ { D187 } ) by L1978 , XBOOLE_0:def 4;
L1980: [ D187 , 2 ] in ( ( D184 /\ { D186 } ) U+ ( D185 /\ { D187 } ) ) by L1979 , L1603;
L1981: [ D187 , 2 ] = C851 by L1980 , L1977 , TARSKI:def 1;
L1982: D186 in { D186 } by TARSKI:def 1;
L1983: D186 in ( D184 /\ { D186 } ) by L1982 , XBOOLE_0:def 4;
L1984: [ D186 , 1 ] in ( ( D184 /\ { D186 } ) U+ ( D185 /\ { D187 } ) ) by L1983 , L1599;
L1985: [ D186 , 1 ] = C851 by L1984 , L1977 , TARSKI:def 1;
thus L1986: contradiction by L1985 , L1981 , XTUPLE_0:1;
end;
thus L1987: thesis by L1966 , L1941 , L1696;
end;

let C852 being set;
assume L1988: C852 in ( ( 'not' R1 ) "\/" ( 'not' R2 ) );
consider C853 being (Element of ( 'not' R1 )), C854 being (Element of ( 'not' R2 )) such that L1989: C852 = ( C853 U+ C854 ) and L1990: (C853 = ( {} ) or C854 = ( {} )) by L1988 , L1707;
L1991: (for B760 being (Element of D171) holds (ex B761 being set st ( C852 /\ B760 ) c= { B761 }))
proof
let C855 being (Element of D171);
consider C856 being (Element of R1), C857 being (Element of R2) such that L1992: C855 = ( C856 U+ C857 ) by L1666;
L1993: ( C852 /\ C855 ) = ( ( C853 /\ C856 ) U+ ( C854 /\ C857 ) ) by L1989 , L1992 , L1656;
consider C858 being set such that L1994: ( C854 /\ C857 ) c= { C858 } by L1449;
consider C859 being set such that L1995: ( C853 /\ C856 ) c= { C859 } by L1449;
L1996: (C853 = ( {} ) or C853 <> ( {} ));
consider C860 being set such that L1997: ((C860 = [ C858 , 2 ] & C853 = ( {} )) or (C860 = [ C859 , 1 ] & C853 <> ( {} ))) by L1996;
take C860;
let C861 being set;
assume L1998: C861 in ( C852 /\ C855 );
L1999: C861 = [ ( C861 `1 ) , ( C861 `2 ) ] by L1998 , L1993 , L1594;
L2000: ((( C861 `2 ) = 1 & ( C861 `1 ) in ( C853 /\ C856 )) or (( C861 `2 ) = 2 & ( C861 `1 ) in ( C854 /\ C857 ))) by L1993 , L1998 , L1594;
per cases  by L1997;
suppose L2001: (C860 = [ C858 , 2 ] & C853 = ( {} ));

L2002: ( C861 `1 ) = C858 by L2001 , L1994 , L2000 , TARSKI:def 1;
thus L2003: thesis by L2002 , L1999 , L2000 , L2001 , TARSKI:def 1;
end;
suppose L2004: (C860 = [ C859 , 1 ] & C853 <> ( {} ));

L2005: ( C861 `1 ) = C859 by L2004 , L1990 , L1995 , L2000 , TARSKI:def 1;
thus L2006: thesis by L2005 , L1990 , L1999 , L2000 , L2004 , TARSKI:def 1;
end;
end;
L2008: C854 c= ( union ( 'not' R2 ) ) by ZFMISC_1:74;
L2009: C854 c= ( union R2 ) by L2008 , L1481;
L2010: C853 c= ( union ( 'not' R1 ) ) by ZFMISC_1:74;
L2011: C853 c= ( union R1 ) by L2010 , L1481;
L2012: C852 c= ( ( union R1 ) U+ ( union R2 ) ) by L2011 , L1989 , L2009 , L1607;
L2013: C852 c= ( union D171 ) by L2012 , L1672;
thus L2014: thesis by L2013 , L1991;
end;
definition
let C862 , C863 being Coherence_Space;
func C862 [*] C863 -> set equals 
( union { ( bool [: B762 , B763 :] ) where B762 is (Element of C862) , B763 is (Element of C863) : (not contradiction) } );
correctness;
end;
theorem
L2016: (for B764 , B765 being Coherence_Space holds (for B766 being set holds (B766 in ( B764 [*] B765 ) iff (ex B767 being (Element of B764) st (ex B768 being (Element of B765) st B766 c= [: B767 , B768 :])))))
proof
let C864 , C865 being Coherence_Space;
let C866 being set;
thus L2017:now
assume L2018: C866 in ( C864 [*] C865 );
consider C867 being set such that L2019: C866 in C867 and L2020: C867 in { ( bool [: B769 , B770 :] ) where B769 is (Element of C864) , B770 is (Element of C865) : (not contradiction) } by L2018 , TARSKI:def 4;
consider C868 being (Element of C864), C869 being (Element of C865) such that L2021: C867 = ( bool [: C868 , C869 :] ) by L2020;
take D188 = C868;
take D189 = C869;
thus L2022: C866 c= [: D188 , D189 :] by L2019 , L2021;
end;
given C870 being (Element of C864) , C871 being (Element of C865) such that
L2023: C866 c= [: C870 , C871 :];

L2024: ( bool [: C870 , C871 :] ) in { ( bool [: B771 , B772 :] ) where B771 is (Element of C864) , B772 is (Element of C865) : (not contradiction) };
thus L2025: thesis by L2024 , L2023 , TARSKI:def 4;
end;
registration
let C872 , C873 being Coherence_Space;
cluster ( C872 [*] C873 ) -> non  empty;
coherence
proof
set D190 = the (Element of C872);
set D191 = the (Element of C873);
L2026: [: D190 , D191 :] in ( C872 [*] C873 ) by L2016;
thus L2027: thesis by L2026;
end;
end;
theorem
L2029: (for B773 , B774 being Coherence_Space holds (for B775 being (Element of ( B773 [*] B774 )) holds (( proj1 B775 ) in B773 & ( proj2 B775 ) in B774 & B775 c= [: ( proj1 B775 ) , ( proj2 B775 ) :])))
proof
let C874 , C875 being Coherence_Space;
let C876 being (Element of ( C874 [*] C875 ));
consider C877 being (Element of C874), C878 being (Element of C875) such that L2030: C876 c= [: C877 , C878 :] by L2016;
L2031: (( proj1 C876 ) c= C877 & ( proj2 C876 ) c= C878) by L2030 , FUNCT_5:11;
thus L2032: (( proj1 C876 ) in C874 & ( proj2 C876 ) in C875) by L2031 , CLASSES1:def 1;
let C879 being set;
assume L2033: C879 in C876;
L2034: C879 = [ ( C879 `1 ) , ( C879 `2 ) ] by L2033 , L2030 , MCART_1:21;
L2035: (( C879 `1 ) in ( proj1 C876 ) & ( C879 `2 ) in ( proj2 C876 )) by L2034 , L2033 , XTUPLE_0:def 12 , XTUPLE_0:def 13;
thus L2036: thesis by L2035 , L2034 , ZFMISC_1:87;
end;
registration
let C880 , C881 being Coherence_Space;
cluster ( C880 [*] C881 ) ->  subset-closed  binary_complete;
coherence
proof
thus L2037: ( C880 [*] C881 ) is  subset-closed
proof
let C882 , C883 being set;
assume L2038: C882 in ( C880 [*] C881 );
consider C884 being (Element of C880), C885 being (Element of C881) such that L2039: C882 c= [: C884 , C885 :] by L2038 , L2016;
assume L2040: C883 c= C882;
L2041: C883 c= [: C884 , C885 :] by L2040 , L2039 , XBOOLE_1:1;
thus L2042: thesis by L2041 , L2016;
end;

let C886 being set;
set D192 = { ( proj1 B776 ) where B776 is (Element of ( C880 [*] C881 )) : B776 in C886 };
set D193 = { ( proj2 B777 ) where B777 is (Element of ( C880 [*] C881 )) : B777 in C886 };
assume L2043: (for B778 , B779 being set holds ((B778 in C886 & B779 in C886) implies ( B778 \/ B779 ) in ( C880 [*] C881 )));
L2044:
now
let C887 , C888 being set;
assume L2045: C887 in D193;
consider C889 being (Element of ( C880 [*] C881 )) such that L2046: C887 = ( proj2 C889 ) and L2047: C889 in C886 by L2045;
assume L2048: C888 in D193;
consider C890 being (Element of ( C880 [*] C881 )) such that L2049: C888 = ( proj2 C890 ) and L2050: C890 in C886 by L2048;
L2051: ( C889 \/ C890 ) in ( C880 [*] C881 ) by L2043 , L2047 , L2050;
L2052: ( proj2 ( C889 \/ C890 ) ) in C881 by L2051 , L2029;
thus L2053: ( C887 \/ C888 ) in C881 by L2052 , L2046 , L2049 , XTUPLE_0:27;
end;
L2054: ( union D193 ) in C881 by L2044 , L2;
L2055: ( union C886 ) c= [: ( union D192 ) , ( union D193 ) :]
proof
let C891 being set;
assume L2056: C891 in ( union C886 );
consider C892 being set such that L2057: C891 in C892 and L2058: C892 in C886 by L2056 , TARSKI:def 4;
L2059: ( C892 \/ C892 ) in ( C880 [*] C881 ) by L2043 , L2058;
L2060: ( proj2 C892 ) in D193 by L2059 , L2058;
L2061: ( proj2 C892 ) c= ( union D193 ) by L2060 , ZFMISC_1:74;
L2062: C892 c= [: ( proj1 C892 ) , ( proj2 C892 ) :] by L2059 , L2029;
L2063: C891 in [: ( proj1 C892 ) , ( proj2 C892 ) :] by L2062 , L2057;
L2064: ( proj1 C892 ) in D192 by L2058 , L2059;
L2065: ( proj1 C892 ) c= ( union D192 ) by L2064 , ZFMISC_1:74;
L2066: [: ( proj1 C892 ) , ( proj2 C892 ) :] c= [: ( union D192 ) , ( union D193 ) :] by L2065 , L2061 , ZFMISC_1:96;
thus L2067: thesis by L2066 , L2063;
end;
L2068:
now
let C893 , C894 being set;
assume L2069: C893 in D192;
consider C895 being (Element of ( C880 [*] C881 )) such that L2070: C893 = ( proj1 C895 ) and L2071: C895 in C886 by L2069;
assume L2072: C894 in D192;
consider C896 being (Element of ( C880 [*] C881 )) such that L2073: C894 = ( proj1 C896 ) and L2074: C896 in C886 by L2072;
L2075: ( C895 \/ C896 ) in ( C880 [*] C881 ) by L2043 , L2071 , L2074;
L2076: ( proj1 ( C895 \/ C896 ) ) in C880 by L2075 , L2029;
thus L2077: ( C893 \/ C894 ) in C880 by L2076 , L2070 , L2073 , XTUPLE_0:23;
end;
L2078: ( union D192 ) in C880 by L2068 , L2;
thus L2079: thesis by L2078 , L2054 , L2055 , L2016;
end;
end;
theorem
L2081: (for B780 , B781 being Coherence_Space holds ( union ( B780 [*] B781 ) ) = [: ( union B780 ) , ( union B781 ) :])
proof
let C897 , C898 being Coherence_Space;
thus L2082: ( union ( C897 [*] C898 ) ) c= [: ( union C897 ) , ( union C898 ) :]
proof
let C899 being set;
assume L2083: C899 in ( union ( C897 [*] C898 ) );
consider C900 being set such that L2084: C899 in C900 and L2085: C900 in ( C897 [*] C898 ) by L2083 , TARSKI:def 4;
consider C901 being (Element of C897), C902 being (Element of C898) such that L2086: C900 c= [: C901 , C902 :] by L2085 , L2016;
L2087: (C901 c= ( union C897 ) & C902 c= ( union C898 )) by ZFMISC_1:74;
L2088: [: C901 , C902 :] c= [: ( union C897 ) , ( union C898 ) :] by L2087 , ZFMISC_1:96;
L2089: C900 c= [: ( union C897 ) , ( union C898 ) :] by L2088 , L2086 , XBOOLE_1:1;
thus L2090: thesis by L2089 , L2084;
end;

let C903 , C904 being set;
assume L2091: [ C903 , C904 ] in [: ( union C897 ) , ( union C898 ) :];
L2092: C903 in ( union C897 ) by L2091 , ZFMISC_1:87;
consider C905 being set such that L2093: C903 in C905 and L2094: C905 in C897 by L2092 , TARSKI:def 4;
L2095: C904 in ( union C898 ) by L2091 , ZFMISC_1:87;
consider C906 being set such that L2096: C904 in C906 and L2097: C906 in C898 by L2095 , TARSKI:def 4;
L2098: [: C905 , C906 :] in ( C897 [*] C898 ) by L2094 , L2097 , L2016;
L2099: [ C903 , C904 ] in [: C905 , C906 :] by L2093 , L2096 , ZFMISC_1:87;
thus L2100: thesis by L2099 , L2098 , TARSKI:def 4;
end;
theorem
L2101: (for R1 being Coherence_Space holds (for R2 being Coherence_Space holds (for B782 , B783 , B784 , B785 being set holds ([ [ B782 , B784 ] , [ B783 , B785 ] ] in ( Web ( R1 [*] R2 ) ) iff ([ B782 , B783 ] in ( Web R1 ) & [ B784 , B785 ] in ( Web R2 ))))))
proof
let R1 being Coherence_Space;
let R2 being Coherence_Space;
let C907 , C908 , C909 , C910 being set;
L2102: { [ C907 , C909 ] , [ C908 , C910 ] } c= [: { C907 , C908 } , { C909 , C910 } :]
proof
let C911 , C912 being set;
assume L2103: [ C911 , C912 ] in { [ C907 , C909 ] , [ C908 , C910 ] };
L2104: (([ C911 , C912 ] = [ C907 , C909 ] & C907 in { C907 , C908 } & C909 in { C909 , C910 }) or ([ C911 , C912 ] = [ C908 , C910 ] & C908 in { C907 , C908 } & C910 in { C909 , C910 })) by L2103 , TARSKI:def 2;
thus L2105: thesis by L2104 , ZFMISC_1:87;
end;
L2106: (( proj1 { [ C907 , C909 ] , [ C908 , C910 ] } ) = { C907 , C908 } & ( proj2 { [ C907 , C909 ] , [ C908 , C910 ] } ) = { C909 , C910 }) by FUNCT_5:13;
thus L2107:now
assume L2108: [ [ C907 , C909 ] , [ C908 , C910 ] ] in ( Web ( R1 [*] R2 ) );
L2109: { [ C907 , C909 ] , [ C908 , C910 ] } in ( R1 [*] R2 ) by L2108 , COH_SP:5;
L2110: ({ C907 , C908 } in R1 & { C909 , C910 } in R2) by L2109 , L2106 , L2029;
thus L2111: ([ C907 , C908 ] in ( Web R1 ) & [ C909 , C910 ] in ( Web R2 )) by L2110 , COH_SP:5;
end;
assume L2112: ([ C907 , C908 ] in ( Web R1 ) & [ C909 , C910 ] in ( Web R2 ));
L2113: ({ C907 , C908 } in R1 & { C909 , C910 } in R2) by L2112 , COH_SP:5;
L2114: { [ C907 , C909 ] , [ C908 , C910 ] } in ( R1 [*] R2 ) by L2113 , L2102 , L2016;
thus L2115: thesis by L2114 , COH_SP:5;
end;
