:: Solutions of Linear Equations
::  by Karol P\c{a}k
::
:: Received December 18, 2007
:: Copyright (c) 2007-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, NAT_1, VECTSP_1, FREEALG, FINSET_1, SUBSET_1, MATRIX_1,
      TREES_1, FINSEQ_1, RELAT_1, XXREAL_0, INCSP_1, FVSUM_1, CARD_3, RVSUM_1,
      GROUP_1, ARYTM_1, SUPINF_2, FUNCT_1, ARYTM_3, CARD_1, XBOOLE_0, ALGSTR_0,
      ORDINAL4, STRUCT_0, FINSEQ_2, TARSKI, RLVECT_1, PARTFUN1, VALUED_1,
      ZFMISC_1, CLASSES1, XCMPLX_0, MATRIX_3, MATRIX13, LAPLACE, PRVECT_1,
      RLVECT_3, LMOD_7, QC_LANG1, RLSUB_1, MESFUNC1, PRE_POLY, MATRIX11,
      MATRIXR1, AFINSQ_1, MATRIX_2, FINSEQ_3, FUNCT_2, SETWISEO, FINSOP_1,
      RLVECT_2, RLVECT_5, FUNCOP_1, FUNCT_4, MATRIX_6, MATRIX15;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, NUMBERS, CARD_1, XCMPLX_0,
      ALGSTR_0, XXREAL_0, ORDINAL1, NAT_1, FINSET_1, RELAT_1, FUNCT_1,
      PARTFUN1, FUNCT_2, SETWOP_2, FINSEQ_1, STRUCT_0, FUNCOP_1, RLVECT_1,
      GROUP_1, VECTSP_1, FINSEQ_2, MATRIX_1, MATRIX_2, FVSUM_1, FINSOP_1,
      NAT_D, GROUP_4, MATRIX_3, MATRIX_6, MATRIX_7, FINSEQ_7, FUNCT_4,
      DOMAIN_1, MATRIX11, MEASURE6, VECTSP_4, VECTSP_6, VECTSP_7, VECTSP_9,
      PRVECT_1, MATRIX13, PRE_POLY, MATRLIN, FUNCT_7, PNPROC_1, LAPLACE;
 constructors SETWISEO, FINSOP_1, ALGSTR_1, FVSUM_1, GROUP_4, FINSEQ_7,
      WELLORD2, VECTSP_6, VECTSP_7, VECTSP_9, MATRIX_6, MATRIX_7, MATRIX11,
      MATRIX13, PNPROC_1, REALSET1, LAPLACE, BINARITH, RELSET_1;
 registrations XBOOLE_0, FUNCT_1, FINSET_1, STRUCT_0, FVSUM_1, VECTSP_1,
      FUNCT_2, ORDINAL1, XXREAL_0, NAT_1, FINSEQ_1, RELAT_1, CARD_1, FUNCOP_1,
      SETFAM_1, FINSEQ_2, MATRLIN, MATRIX13, XREAL_0, VECTSP_9, VALUED_0,
      RELSET_1, PRVECT_1;
 requirements ARITHM, NUMERALS, REAL, BOOLE, SUBSET;
 definitions TARSKI, XBOOLE_0, FINSEQ_1, FINSEQ_2, MATRIX_1, GROUP_4, MATRIX_3,
      MATRIX_7, VECTSP_4, RELAT_1, LAPLACE, MATRIX13, FVSUM_1, ALGSTR_0;
 theorems CARD_1, CARD_2, CARD_FIN, FINSEQ_1, FINSEQ_2, FINSEQ_3, FINSEQOP,
      FINSOP_1, FRECHET, FUNCT_1, FUNCT_2, FUNCT_7, FUNCOP_1, FVSUM_1, GROUP_1,
      LAPLACE, MATRIX_1, MATRIX_2, MATRIX_3, MATRIX_4, MATRIX_5, MATRIX_6,
      MATRIX_7, MATRIX11, MATRIX13, MATRIXR1, MATRIXR2, MATRLIN, NAT_1,
      ORDINAL1, PARTFUN1, PNPROC_1, RELAT_1, RLVECT_1, STIRL2_1, STRUCT_0,
      TARSKI, WELLORD2, VECTSP_1, VECTSP_4, VECTSP_6, VECTSP_7, VECTSP_9,
      XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, ZFMISC_1, NAT_D, PRE_POLY,
      MEASURE6;
 schemes FINSEQ_2, NAT_1, MATRIX_1;

begin
theorem
L1: (for R9 being Field holds (for R11 being (Element of R9) holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (( width R13 ) = ( len R14 ) implies ( ( R11 * R13 ) * R14 ) = ( R11 * ( R13 * R14 ) ))))))
proof
let R9 being Field;
let R11 being (Element of R9);
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
set D1 = ( R11 * R13 );
set D2 = ( R13 * R14 );
set D3 = ( R11 * D2 );
assume L2: ( width R13 ) = ( len R14 );
L3: ( width D2 ) = ( width R14 ) by L2 , MATRIX_3:def 4;
L4: ( len D3 ) = ( len D2 ) by MATRIX_3:def 5;
L5: ( len D3 ) = ( len R13 ) by L4 , L2 , MATRIX_3:def 4;
L6: ( width D1 ) = ( width R13 ) by MATRIX_3:def 5;
L7: (( len D1 ) = ( len R13 ) & ( len D1 ) = ( len ( D1 * R14 ) )) by L6 , L2 , MATRIX_3:def 4 , MATRIX_3:def 5;
L8:
now
let R3 being Nat;
let R4 being Nat;
assume L9: [ R3 , R4 ] in ( Indices D3 );
L10: [ R3 , R4 ] in ( Indices D2 ) by L9 , MATRIXR1:18;
L11: R3 in ( dom D2 ) by L10 , ZFMISC_1:87;
L12: R3 in ( Seg ( len R13 ) ) by L11 , L4 , L5 , FINSEQ_1:def 3;
L13: (1 <= R3 & R3 <= ( len R13 )) by L12 , FINSEQ_1:1;
L14: ( dom D2 ) = ( Seg ( len D2 ) ) by FINSEQ_1:def 3
.= ( dom ( D1 * R14 ) ) by L4 , L5 , L7 , FINSEQ_1:def 3;
L15: [ R3 , R4 ] in ( Indices ( D1 * R14 ) ) by L14 , L2 , L6 , L3 , L10 , MATRIX_3:def 4;
thus L16: ( D3 * (R3 , R4) ) = ( R11 * ( D2 * (R3 , R4) ) ) by L10 , MATRIX_3:def 5
.= ( R11 * ( ( Line (R13 , R3) ) "*" ( Col (R14 , R4) ) ) ) by L2 , L10 , MATRIX_3:def 4
.= ( Sum ( R11 * ( mlt (( Line (R13 , R3) ) , ( Col (R14 , R4) )) ) ) ) by FVSUM_1:73
.= ( Sum ( mlt (( R11 * ( Line (R13 , R3) ) ) , ( Col (R14 , R4) )) ) ) by L2 , FVSUM_1:68
.= ( ( Line (D1 , R3) ) "*" ( Col (R14 , R4) ) ) by L13 , MATRIXR1:20
.= ( ( D1 * R14 ) * (R3 , R4) ) by L2 , L6 , L15 , MATRIX_3:def 4;
end;
L17: (( width D3 ) = ( width D2 ) & ( width R14 ) = ( width ( D1 * R14 ) )) by L2 , L6 , MATRIX_3:def 4 , MATRIX_3:def 5;
thus L18: thesis by L17 , L3 , L5 , L7 , L8 , MATRIX_1:21;
end;
theorem
L19: (for R9 being Field holds (for R11 being (Element of R9) holds (for R12 being (Element of R9) holds (for R13 being (Matrix of R9) holds (( ( 1_ R9 ) * R13 ) = R13 & ( R11 * ( R12 * R13 ) ) = ( ( R11 * R12 ) * R13 ))))))
proof
let R9 being Field;
let R11 being (Element of R9);
let R12 being (Element of R9);
let R13 being (Matrix of R9);
set D4 = ( ( 1_ R9 ) * R13 );
set D5 = ( R12 * R13 );
set D6 = ( R11 * R12 );
set D7 = ( D6 * R13 );
L20:
now
let R3 being Nat;
let R4 being Nat;
assume that
L21: [ R3 , R4 ] in ( Indices R13 );
thus L22: ( R13 * (R3 , R4) ) = ( ( 1_ R9 ) * ( R13 * (R3 , R4) ) ) by VECTSP_1:def 6
.= ( D4 * (R3 , R4) ) by L21 , MATRIX_3:def 5;
end;
L23: ( len ( R11 * D5 ) ) = ( len D5 ) by MATRIX_3:def 5
.= ( len R13 ) by MATRIX_3:def 5
.= ( len D7 ) by MATRIX_3:def 5;
L24:
now
L25: ( Indices D5 ) = ( Indices R13 ) by MATRIXR1:18;
L26: ( Indices ( R11 * D5 ) ) = ( Indices D5 ) by MATRIXR1:18;
let R3 being Nat;
let R4 being Nat;
assume that
L27: [ R3 , R4 ] in ( Indices ( R11 * D5 ) );
thus L28: ( ( R11 * D5 ) * (R3 , R4) ) = ( R11 * ( D5 * (R3 , R4) ) ) by L27 , L26 , MATRIX_3:def 5
.= ( R11 * ( R12 * ( R13 * (R3 , R4) ) ) ) by L27 , L26 , L25 , MATRIX_3:def 5
.= ( ( R11 * R12 ) * ( R13 * (R3 , R4) ) ) by GROUP_1:def 3
.= ( D7 * (R3 , R4) ) by L27 , L26 , L25 , MATRIX_3:def 5;
end;
L29: ( width ( R11 * D5 ) ) = ( width D5 ) by MATRIX_3:def 5
.= ( width R13 ) by MATRIX_3:def 5
.= ( width D7 ) by MATRIX_3:def 5;
L30: (( len D4 ) = ( len R13 ) & ( width D4 ) = ( width R13 )) by MATRIX_3:def 5;
thus L31: thesis by L30 , L20 , L23 , L29 , L24 , MATRIX_1:21;
end;
L32: (for R9 being Field holds (for R13 being (Matrix of R9) holds ( Indices R13 ) = ( Indices ( - R13 ) )))
proof
let R9 being Field;
let R13 being (Matrix of R9);
L33: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3
.= ( Seg ( len ( - R13 ) ) ) by MATRIX_3:def 2
.= ( dom ( - R13 ) ) by FINSEQ_1:def 3;
thus L34: thesis by L33 , MATRIX_3:def 2;
end;
L35: (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (R11 <> ( 0. R9 ) implies ( ( power R9 ) . (R11 , R8) ) <> ( 0. R9 )))))
proof
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
defpred S1[ Nat ] means (for R8 being Nat holds (R8 = $1 implies ( ( power R9 ) . (R11 , R8) ) <> ( 0. R9 )));
assume L36: R11 <> ( 0. R9 );
L37: (for R5 being Nat holds (S1[ R5 ] implies S1[ ( R5 + 1 ) ]))
proof
let R5 being Nat;
assume L38: S1[ R5 ];
L39: ( ( power R9 ) . (R11 , R5) ) <> ( 0. R9 ) by L38;
L40: R5 in ( NAT ) by ORDINAL1:def 12;
let R8 being Nat;
assume L41: R8 = ( R5 + 1 );
L42: ( ( power R9 ) . (R11 , R8) ) = ( ( ( power R9 ) . (R11 , R5) ) * R11 ) by L41 , L40 , GROUP_1:def 7;
thus L43: thesis by L42 , L36 , L39 , VECTSP_1:12;
end;
L44: S1[ ( 0 ) ]
proof
L45: ( 1_ R9 ) <> ( 0. R9 );
let R8 being Nat;
assume L46: R8 = ( 0 );
thus L47: thesis by L46 , L45 , GROUP_1:def 7;
end;
L48: (for R5 being Nat holds S1[ R5 ]) from NAT_1:sch 2(L44 , L37);
thus L49: thesis by L48;
end;
theorem
L50: (for B1 being non  empty addLoopStr holds (for B2 , B3 , B4 , B5 being (FinSequence of B1) holds ((( len B2 ) = ( len B3 ) & ( len B4 ) = ( len B5 )) implies ( ( B2 ^ B4 ) + ( B3 ^ B5 ) ) = ( ( B2 + B3 ) ^ ( B4 + B5 ) ))))
proof
let C1 being non  empty addLoopStr;
let C2 , C3 , C4 , C5 being (FinSequence of C1);
assume that
L51: ( len C2 ) = ( len C3 )
and
L52: ( len C4 ) = ( len C5 );
set D8 = (the carrier of C1);
reconsider D9 = C4 , D10 = C5 as (Element of ( ( len C4 ) -tuples_on D8 )) by L52 , FINSEQ_2:92;
reconsider D11 = C2 , D12 = C3 as (Element of ( ( len C2 ) -tuples_on D8 )) by L51 , FINSEQ_2:92;
reconsider D13 = ( D11 ^ D9 ) , D14 = ( D12 ^ D10 ) , D15 = ( ( D11 + D12 ) ^ ( D9 + D10 ) ) as (Tuple of ( ( len C2 ) + ( len C4 ) ) , D8);
reconsider D16 = D13 , D17 = D14 , D18 = D15 as (Element of ( ( ( len C2 ) + ( len C4 ) ) -tuples_on D8 )) by FINSEQ_2:131;
L53:
now
let R3 being Nat;
assume that
L54: R3 in ( Seg ( ( len C2 ) + ( len C4 ) ) );
L55: R3 in ( dom D16 ) by L54 , FINSEQ_2:124;
L56:
now
per cases  by L55 , FINSEQ_1:25;
suppose L57: R3 in ( dom C2 );

L58: (( rng C2 ) c= D8 & ( rng C3 ) c= D8) by RELAT_1:def 19;
L59: ( dom ( D11 + D12 ) ) = ( Seg ( len C2 ) ) by FINSEQ_2:124;
L60: ( C2 . R3 ) in ( rng C2 ) by L57 , FUNCT_1:def 3;
L61: ( dom D11 ) = ( Seg ( len C2 ) ) by FINSEQ_2:124;
L62: ( dom D12 ) = ( Seg ( len C2 ) ) by FINSEQ_2:124;
L63: ( C3 . R3 ) in ( rng C3 ) by L62 , L57 , L61 , FUNCT_1:def 3;
reconsider D19 = ( C2 . R3 ) , D20 = ( C3 . R3 ) as (Element of C1) by L63 , L60 , L58;
L64: ( D16 . R3 ) = D19 by L57 , FINSEQ_1:def 7;
L65: ( D17 . R3 ) = D20 by L57 , L61 , L62 , FINSEQ_1:def 7;
thus L66: ( ( D16 + D17 ) . R3 ) = ( D19 + D20 ) by L65 , L54 , L64 , FVSUM_1:18
.= ( ( D11 + D12 ) . R3 ) by L57 , L61 , FVSUM_1:18
.= ( D18 . R3 ) by L57 , L61 , L59 , FINSEQ_1:def 7;
end;
suppose L67: (ex R8 being Nat st (R8 in ( dom C4 ) & R3 = ( ( len C2 ) + R8 )));

consider R8 being Nat such that L68: R8 in ( dom C4 ) and L69: R3 = ( ( len C2 ) + R8 ) by L67;
L70: ( C4 . R8 ) in ( rng C4 ) by L68 , FUNCT_1:def 3;
L71: (( rng C4 ) c= D8 & ( rng C5 ) c= D8) by RELAT_1:def 19;
L72: ( dom D9 ) = ( Seg ( len C4 ) ) by FINSEQ_2:124;
L73: ( dom D10 ) = ( Seg ( len C4 ) ) by FINSEQ_2:124;
L74: ( C5 . R8 ) in ( rng C5 ) by L73 , L68 , L72 , FUNCT_1:def 3;
reconsider D21 = ( C4 . R8 ) , D22 = ( C5 . R8 ) as (Element of C1) by L74 , L70 , L71;
L75: ( D16 . R3 ) = D21 by L68 , L69 , FINSEQ_1:def 7;
L76: (( dom ( D9 + D10 ) ) = ( Seg ( len C4 ) ) & ( len ( D11 + D12 ) ) = ( len C2 )) by CARD_1:def 7 , FINSEQ_2:124;
L77: ( D17 . R3 ) = D22 by L51 , L68 , L69 , L72 , L73 , FINSEQ_1:def 7;
thus L78: ( ( D16 + D17 ) . R3 ) = ( D21 + D22 ) by L77 , L54 , L75 , FVSUM_1:18
.= ( ( D9 + D10 ) . R8 ) by L68 , L72 , FVSUM_1:18
.= ( D18 . R3 ) by L68 , L69 , L72 , L76 , FINSEQ_1:def 7;
end;
end;
thus L80: ( ( D16 + D17 ) . R3 ) = ( D18 . R3 ) by L56;
end;
thus L81: thesis by L53 , FINSEQ_2:119;
end;
theorem
L82: (for B6 being non  empty multMagma holds (for B7 , B8 being (FinSequence of B6) holds (for B9 being (Element of B6) holds ( B9 * ( B7 ^ B8 ) ) = ( ( B9 * B7 ) ^ ( B9 * B8 ) ))))
proof
let C6 being non  empty multMagma;
let C7 , C8 being (FinSequence of C6);
let C9 being (Element of C6);
set D23 = (the carrier of C6);
reconsider D24 = C7 as (Element of ( ( len C7 ) -tuples_on D23 )) by FINSEQ_2:92;
reconsider D25 = C8 as (Element of ( ( len C8 ) -tuples_on D23 )) by FINSEQ_2:92;
reconsider D26 = ( D24 ^ D25 ) , D27 = ( ( C9 * D24 ) ^ ( C9 * D25 ) ) as (Element of ( ( ( len C7 ) + ( len C8 ) ) -tuples_on D23 )) by FINSEQ_2:131;
L83:
now
let R3 being Nat;
assume that
L84: R3 in ( Seg ( ( len C7 ) + ( len C8 ) ) );
L85: R3 in ( dom D26 ) by L84 , FINSEQ_2:124;
L86:
now
per cases  by L85 , FINSEQ_1:25;
suppose L87: R3 in ( dom C7 );

L88: ( rng C7 ) c= D23 by RELAT_1:def 19;
L89: ( C7 . R3 ) in ( rng C7 ) by L87 , FUNCT_1:def 3;
reconsider D28 = ( C7 . R3 ) as (Element of C6) by L89 , L88;
L90: ( dom D24 ) = ( Seg ( len C7 ) ) by FINSEQ_2:124;
L91: ( dom ( C9 * D24 ) ) = ( Seg ( len C7 ) ) by FINSEQ_2:124;
L92: ( D26 . R3 ) = D28 by L87 , FINSEQ_1:def 7;
thus L93: ( ( C9 * D26 ) . R3 ) = ( C9 * D28 ) by L92 , L84 , FVSUM_1:51
.= ( ( C9 * D24 ) . R3 ) by L87 , L90 , FVSUM_1:51
.= ( D27 . R3 ) by L87 , L90 , L91 , FINSEQ_1:def 7;
end;
suppose L94: (ex R8 being Nat st (R8 in ( dom C8 ) & R3 = ( ( len C7 ) + R8 )));

L95: ( rng C8 ) c= D23 by RELAT_1:def 19;
L96: (( dom ( C9 * D25 ) ) = ( Seg ( len C8 ) ) & ( len ( C9 * D24 ) ) = ( len C7 )) by CARD_1:def 7 , FINSEQ_2:124;
consider R8 being Nat such that L97: R8 in ( dom C8 ) and L98: R3 = ( ( len C7 ) + R8 ) by L94;
L99: ( C8 . R8 ) in ( rng C8 ) by L97 , FUNCT_1:def 3;
reconsider D29 = ( C8 . R8 ) as (Element of C6) by L99 , L95;
L100: ( dom D25 ) = ( Seg ( len C8 ) ) by FINSEQ_2:124;
L101: ( D26 . R3 ) = D29 by L97 , L98 , FINSEQ_1:def 7;
thus L102: ( ( C9 * D26 ) . R3 ) = ( C9 * D29 ) by L101 , L84 , FVSUM_1:51
.= ( ( C9 * D25 ) . R8 ) by L97 , L100 , FVSUM_1:51
.= ( D27 . R3 ) by L97 , L98 , L100 , L96 , FINSEQ_1:def 7;
end;
end;
thus L104: ( ( C9 * D26 ) . R3 ) = ( D27 . R3 ) by L86;
end;
thus L105: thesis by L83 , FINSEQ_2:119;
end;
theorem
L106: (for B10 being Function holds (for B11 , B12 , B13 , B14 being FinSequence holds ((( rng B11 ) c= ( dom B10 ) & ( rng B12 ) c= ( dom B10 ) & B13 = ( B10 * B11 ) & B14 = ( B10 * B12 )) implies ( B10 * ( B11 ^ B12 ) ) = ( B13 ^ B14 ))))
proof
let C10 being Function;
let C11 , C12 , C13 , C14 being FinSequence;
assume that
L107: ( rng C11 ) c= ( dom C10 )
and
L108: ( rng C12 ) c= ( dom C10 )
and
L109: C13 = ( C10 * C11 )
and
L110: C14 = ( C10 * C12 );
L111: ( dom ( C11 ^ C12 ) ) = ( Seg ( ( len C11 ) + ( len C12 ) ) ) by FINSEQ_1:def 7;
L112: ( rng ( C11 ^ C12 ) ) = ( ( rng C11 ) \/ ( rng C12 ) ) by FINSEQ_1:31;
L113: ( dom ( C10 * ( C11 ^ C12 ) ) ) = ( dom ( C11 ^ C12 ) ) by L112 , L107 , L108 , RELAT_1:27 , XBOOLE_1:8;
L114: ( dom C13 ) = ( dom C11 ) by L107 , L109 , RELAT_1:27;
L115: ( len C13 ) = ( len C11 ) by L114 , FINSEQ_3:29;
L116: ( dom C14 ) = ( dom C12 ) by L108 , L110 , RELAT_1:27;
L117: ( len C14 ) = ( len C12 ) by L116 , FINSEQ_3:29;
L118: ( dom ( C13 ^ C14 ) ) = ( dom ( C10 * ( C11 ^ C12 ) ) ) by L117 , L113 , L115 , L111 , FINSEQ_1:def 7;
L119:
now
let R1 being set;
assume that
L120: R1 in ( dom ( C13 ^ C14 ) );
reconsider D30 = R1 as (Element of ( NAT )) by L120;
L121:
now
per cases ;
suppose L122: D30 in ( dom C11 );

thus L123: ( ( C13 ^ C14 ) . D30 ) = ( C13 . D30 ) by L122 , L114 , FINSEQ_1:def 7
.= ( C10 . ( C11 . D30 ) ) by L109 , L114 , L122 , FUNCT_1:12
.= ( C10 . ( ( C11 ^ C12 ) . D30 ) ) by L122 , FINSEQ_1:def 7
.= ( ( C10 * ( C11 ^ C12 ) ) . D30 ) by L118 , L120 , FUNCT_1:12;
end;
suppose L124: (not D30 in ( dom C11 ));

consider R8 being Nat such that L125: R8 in ( dom C12 ) and L126: D30 = ( ( len C11 ) + R8 ) by L124 , L114 , L116 , L115 , L120 , FINSEQ_1:25;
thus L127: ( ( C13 ^ C14 ) . D30 ) = ( C14 . R8 ) by L116 , L115 , L125 , L126 , FINSEQ_1:def 7
.= ( C10 . ( C12 . R8 ) ) by L110 , L116 , L125 , FUNCT_1:12
.= ( C10 . ( ( C11 ^ C12 ) . D30 ) ) by L125 , L126 , FINSEQ_1:def 7
.= ( ( C10 * ( C11 ^ C12 ) ) . D30 ) by L118 , L120 , FUNCT_1:12;
end;
end;
thus L129: ( ( C13 ^ C14 ) . R1 ) = ( ( C10 * ( C11 ^ C12 ) ) . R1 ) by L121;
end;
thus L130: thesis by L119 , L118 , FUNCT_1:2;
end;
theorem
L131: (for B15 being (FinSequence of ( NAT )) holds (for R8 being Nat holds ((B15 is  one-to-one & ( rng B15 ) c= ( Seg R8 ) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom B15 ) & R4 in ( dom B15 ) & R3 < R4) implies ( B15 . R3 ) < ( B15 . R4 ))))) implies ( Sgm ( rng B15 ) ) = B15)))
proof
defpred S2[ Nat ] means (for B16 being (FinSequence of ( NAT )) holds (for R8 being Nat holds ((( len B16 ) = $1 & ( rng B16 ) c= ( Seg R8 ) & B16 is  one-to-one & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom B16 ) & R4 in ( dom B16 ) & R3 < R4) implies ( B16 . R3 ) < ( B16 . R4 ))))) implies ( Sgm ( rng B16 ) ) = B16)));
L132: S2[ ( 0 ) ]
proof
let C15 being (FinSequence of ( NAT ));
let R8 being Nat;
assume that
L133: ( len C15 ) = ( 0 )
and
L134: ( rng C15 ) c= ( Seg R8 )
and
L135: C15 is  one-to-one
and
L136: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom C15 ) & R4 in ( dom C15 ) & R3 < R4) implies ( C15 . R3 ) < ( C15 . R4 ))));
L137: C15 = ( {} ) by L133;
thus L138: thesis by L137 , FINSEQ_3:43;
end;
L139: (for R8 being Nat holds (S2[ R8 ] implies S2[ ( R8 + 1 ) ]))
proof
let R8 being Nat;
assume that
L140: S2[ R8 ];
set D31 = ( R8 + 1 );
let C16 being (FinSequence of ( NAT ));
let R5 being Nat;
assume that
L141: ( len C16 ) = D31
and
L142: ( rng C16 ) c= ( Seg R5 )
and
L143: C16 is  one-to-one
and
L144: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom C16 ) & R4 in ( dom C16 ) & R3 < R4) implies ( C16 . R3 ) < ( C16 . R4 ))));
set D32 = ( C16 | R8 );
L145: C16 = ( D32 ^ <* ( C16 . D31 ) *> ) by L141 , FINSEQ_3:55;
L146: ( rng D32 ) c= ( rng C16 ) by L145 , FINSEQ_1:29;
L147: ( dom D32 ) c= ( dom C16 ) by L145 , FINSEQ_1:26;
L148: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom D32 ) & R4 in ( dom D32 ) & R3 < R4) implies ( D32 . R3 ) < ( D32 . R4 ))))
proof
let R3 being Nat;
let R4 being Nat;
assume that
L149: (R3 in ( dom D32 ) & R4 in ( dom D32 ))
and
L150: R3 < R4;
L151: (( D32 . R3 ) = ( C16 . R3 ) & ( D32 . R4 ) = ( C16 . R4 )) by L145 , L149 , FINSEQ_1:def 7;
thus L152: thesis by L151 , L144 , L147 , L149 , L150;
end;
L153: ( len D32 ) = R8 by L141 , FINSEQ_3:53;
L154:
now
L155: (D31 in ( Seg D31 ) & ( dom C16 ) = ( Seg D31 )) by L141 , FINSEQ_1:4 , FINSEQ_1:def 3;
let C17 , C18 being (Element of ( NAT ));
assume that
L156: C17 in ( rng D32 )
and
L157: C18 in { ( C16 . D31 ) };
consider R1 being set such that L158: R1 in ( dom D32 ) and L159: ( D32 . R1 ) = C17 by L156 , FUNCT_1:def 3;
reconsider D33 = R1 as (Element of ( NAT )) by L158;
L160: ( C16 . D33 ) = ( D32 . D33 ) by L145 , L158 , FINSEQ_1:def 7;
L161: ( dom D32 ) = ( Seg R8 ) by L153 , FINSEQ_1:def 3;
L162: D33 <= R8 by L161 , L158 , FINSEQ_1:1;
L163: D33 < D31 by L162 , NAT_1:13;
L164: ( C16 . D33 ) < ( C16 . D31 ) by L163 , L144 , L147 , L158 , L155;
thus L165: C17 < C18 by L164 , L157 , L159 , L160 , TARSKI:def 1;
end;
L166: D32 is  one-to-one by L143 , FUNCT_1:52;
L167: ( Sgm ( rng D32 ) ) = D32 by L166 , L140 , L142 , L153 , L146 , L148 , XBOOLE_1:1;
L168: ( rng <* ( C16 . D31 ) *> ) = { ( C16 . D31 ) } by FINSEQ_1:39;
L169: ( rng <* ( C16 . D31 ) *> ) c= ( rng C16 ) by L145 , FINSEQ_1:30;
L170: { ( C16 . D31 ) } c= ( Seg R5 ) by L169 , L142 , L168 , XBOOLE_1:1;
L171: ( rng C16 ) = ( ( rng D32 ) \/ ( rng <* ( C16 . D31 ) *> ) ) by L145 , FINSEQ_1:31;
L172: ( C16 . D31 ) in { ( C16 . D31 ) } by TARSKI:def 1;
L173: ( rng D32 ) c= ( Seg R5 ) by L142 , L146 , XBOOLE_1:1;
thus L174: ( Sgm ( rng C16 ) ) = ( D32 ^ ( Sgm { ( C16 . D31 ) } ) ) by L173 , L171 , L168 , L170 , L167 , L154 , FINSEQ_3:42
.= C16 by L145 , L170 , L172 , FINSEQ_3:44;
end;
let C19 being (FinSequence of ( NAT ));
let R8 being Nat;
assume that
L175: (C19 is  one-to-one & ( rng C19 ) c= ( Seg R8 ) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom C19 ) & R4 in ( dom C19 ) & R3 < R4) implies ( C19 . R3 ) < ( C19 . R4 )))));
L176: (for R8 being Nat holds S2[ R8 ]) from NAT_1:sch 2(L132 , L139);
L177: (for B17 being (FinSequence of ( NAT )) holds (for R8 being Nat holds ((( len B17 ) = ( len C19 ) & ( rng B17 ) c= ( Seg R8 ) & B17 is  one-to-one & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom B17 ) & R4 in ( dom B17 ) & R3 < R4) implies ( B17 . R3 ) < ( B17 . R4 ))))) implies ( Sgm ( rng B17 ) ) = B17))) by L176;
thus L178: thesis by L177 , L175;
end;
theorem
L179: (for B18 being  Abelian  add-associative  right_zeroed  right_complementable non  empty addLoopStr holds (for B19 being (FinSequence of B18) holds (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( dom B19 ) & R4 in ( dom B19 ) & R3 <> R4 & (for R5 being Nat holds ((R5 in ( dom B19 ) & R5 <> R3 & R5 <> R4) implies ( B19 . R5 ) = ( 0. B18 )))) implies ( Sum B19 ) = ( ( B19 /. R3 ) + ( B19 /. R4 ) ))))))
proof
let C20 being  Abelian  add-associative  right_zeroed  right_complementable non  empty addLoopStr;
let C21 being (FinSequence of C20);
L180:
now
let R3 being Nat;
let R4 being Nat;
assume that
L181: R3 in ( dom C21 )
and
L182: R4 in ( dom C21 )
and
L183: R3 < R4
and
L184: (for R5 being Nat holds ((R5 in ( dom C21 ) & R5 <> R3 & R5 <> R4) implies ( C21 . R5 ) = ( 0. C20 )));
L185: ( dom C21 ) = ( Seg ( len C21 ) ) by FINSEQ_1:def 3;
L186: (R3 in ( NAT ) & 1 <= R3) by L185 , L181 , FINSEQ_1:1;
L187: R3 in ( Seg R3 ) by L186;
set D34 = ( C21 | R3 );
consider C22 being FinSequence such that L188: C21 = ( D34 ^ C22 ) by FINSEQ_1:80;
reconsider D35 = C22 as (FinSequence of C20) by L188 , FINSEQ_1:36;
L189: R3 <= ( len C21 ) by L181 , L185 , FINSEQ_1:1;
L190: ( len D34 ) = R3 by L189 , FINSEQ_1:17;
L191: ( dom D34 ) = ( Seg R3 ) by L189 , FINSEQ_1:17;
L192: (not R4 in ( dom D34 )) by L191 , L183 , FINSEQ_1:1;
consider C23 being Nat such that L193: C23 in ( dom D35 ) and L194: R4 = ( R3 + C23 ) by L192 , L182 , L188 , L190 , FINSEQ_1:25;
L195:
now
let R5 being Nat;
assume that
L196: R5 in ( dom D35 )
and
L197: R5 <> C23;
reconsider D36 = R5 as (Element of ( NAT )) by ORDINAL1:def 12;
L198: ( R3 + D36 ) <> ( R3 + C23 ) by L197;
L199: ( dom D35 ) = ( Seg ( len D35 ) ) by FINSEQ_1:def 3;
L200: R5 >= 1 by L199 , L196 , FINSEQ_1:1;
L201: ( R5 + R3 ) >= ( R3 + 1 ) by L200 , XREAL_1:7;
L202: ( R3 + D36 ) <> R3 by L201 , NAT_1:13;
thus L203: ( D35 . R5 ) = ( C21 . ( R3 + D36 ) ) by L188 , L190 , L196 , FINSEQ_1:def 7
.= ( 0. C20 ) by L184 , L188 , L190 , L194 , L196 , L202 , L198 , FINSEQ_1:28;
end;
L204: ( Sum D35 ) = ( D35 . C23 ) by L195 , L193 , MATRIX_3:12
.= ( C21 . R4 ) by L188 , L190 , L193 , L194 , FINSEQ_1:def 7
.= ( C21 /. R4 ) by L182 , PARTFUN1:def 6;
L205: ( Seg R3 ) c= ( Seg ( len C21 ) ) by L189 , FINSEQ_1:5;
L206:
now
let R5 being Nat;
assume that
L207: R5 in ( dom D34 )
and
L208: R5 <> R3;
reconsider D37 = R5 as (Element of ( NAT )) by ORDINAL1:def 12;
L209: R5 <> R4 by L183 , L191 , L207 , FINSEQ_1:1;
thus L210: ( D34 . R5 ) = ( C21 . D37 ) by L188 , L207 , FINSEQ_1:def 7
.= ( 0. C20 ) by L184 , L185 , L191 , L205 , L207 , L208 , L209;
end;
L211: ( Sum D34 ) = ( D34 . R3 ) by L206 , L187 , L191 , MATRIX_3:12
.= ( C21 . R3 ) by L188 , L187 , L191 , FINSEQ_1:def 7
.= ( C21 /. R3 ) by L185 , L187 , L205 , PARTFUN1:def 6;
thus L212: ( Sum C21 ) = ( ( C21 /. R3 ) + ( C21 /. R4 ) ) by L211 , L188 , L204 , RLVECT_1:41;
end;
let R3 being Nat;
let R4 being Nat;
assume that
L213: (R3 in ( dom C21 ) & R4 in ( dom C21 ))
and
L214: R3 <> R4
and
L215: (for R5 being Nat holds ((R5 in ( dom C21 ) & R5 <> R3 & R5 <> R4) implies ( C21 . R5 ) = ( 0. C20 )));
L216: (R3 < R4 or R4 < R3) by L214 , XXREAL_0:1;
L217: (for R5 being Nat holds ((R5 in ( dom C21 ) & R5 <> R4 & R5 <> R3) implies ( C21 . R5 ) = ( 0. C20 ))) by L215;
thus L218: thesis by L217 , L180 , L213 , L215 , L216;
end;
theorem
L219: (for R3 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (R3 in ( Seg R7 ) implies ( ( Sgm ( ( Seg ( R8 + R7 ) ) \ ( Seg R8 ) ) ) . R3 ) = ( R8 + R3 )))))
proof
let R3 being Nat;
let R7 being Nat;
let R8 being Nat;
assume L220: R3 in ( Seg R7 );
reconsider D38 = R8 as (Element of ( NAT )) by ORDINAL1:def 12;
set D39 = ( idseq R7 );
L221: ( dom D39 ) = ( Seg ( len D39 ) ) by FINSEQ_1:def 3;
L222: ( len D39 ) = R7 by CARD_1:def 7;
L223: ( dom ( D38 Shift D39 ) ) = { ( D38 + B20 ) where B20 is (Element of ( NAT )) : B20 in ( dom D39 ) } by PNPROC_1:def 14;
L224: ( ( Seg ( R8 + R7 ) ) \ ( Seg R8 ) ) c= ( dom ( D38 Shift D39 ) )
proof
let R1 being set;
assume that
L225: R1 in ( ( Seg ( R8 + R7 ) ) \ ( Seg R8 ) );
reconsider D40 = R1 as (Element of ( NAT )) by L225;
L226: D40 in ( Seg ( R8 + R7 ) ) by L225 , XBOOLE_0:def 5;
L227: (not D40 in ( Seg R8 )) by L225 , XBOOLE_0:def 5;
L228: (D40 < 1 or D40 > R8) by L227;
reconsider D41 = ( D40 - R8 ) as (Element of ( NAT )) by L228 , L226 , FINSEQ_1:1 , NAT_1:21;
L229: ( R8 + D41 ) = D40;
L230: D40 <= ( R8 + R7 ) by L226 , FINSEQ_1:1;
L231: D41 <= R7 by L230 , L229 , XREAL_1:8;
L232: D41 >= 1 by L226 , L228 , L229 , FINSEQ_1:1 , NAT_1:19;
L233: D41 in ( dom D39 ) by L232 , L221 , L222 , L231;
L234: ( R8 + D41 ) in ( dom ( D38 Shift D39 ) ) by L233 , L223;
thus L235: thesis by L234;
end;
L236: ( dom ( D38 Shift D39 ) ) c= ( ( Seg ( R8 + R7 ) ) \ ( Seg R8 ) )
proof
let R1 being set;
assume L237: R1 in ( dom ( D38 Shift D39 ) );
consider C24 being (Element of ( NAT )) such that L238: ( R8 + C24 ) = R1 and L239: C24 in ( dom D39 ) by L237 , L223;
L240: C24 <= R7 by L221 , L222 , L239 , FINSEQ_1:1;
L241: ( R8 + C24 ) <= ( R8 + R7 ) by L240 , XREAL_1:7;
L242: 1 <= C24 by L221 , L239 , FINSEQ_1:1;
L243: ( R8 + 1 ) <= ( R8 + C24 ) by L242 , XREAL_1:7;
L244: ( R8 + C24 ) > R8 by L243 , NAT_1:13;
L245: (not ( C24 + R8 ) in ( Seg R8 )) by L244 , FINSEQ_1:1;
L246: 1 <= ( R8 + 1 ) by NAT_1:11;
L247: 1 <= ( R8 + C24 ) by L246 , L243 , XXREAL_0:2;
L248: ( R8 + C24 ) in ( Seg ( R8 + R7 ) ) by L247 , L241;
thus L249: thesis by L248 , L238 , L245 , XBOOLE_0:def 5;
end;
L250: ( ( Seg ( R8 + R7 ) ) \ ( Seg R8 ) ) = ( dom ( D38 Shift D39 ) ) by L236 , L224 , XBOOLE_0:def 10;
thus L251: thesis by L250 , L220 , L221 , L222 , PNPROC_1:56;
end;
theorem
L252: (for B21 being non  empty set holds (for B22 being (Matrix of B21) holds (for B23 , B24 , B25 , B26 being  without_zero  finite (Subset of ( NAT )) holds (([: B23 , B24 :] c= ( Indices B22 ) & [: B25 , B26 :] c= ( Indices B22 )) implies (for B27 being (Matrix of ( card B23 ) , ( card B24 ) , B21) holds (for B28 being (Matrix of ( card B25 ) , ( card B26 ) , B21) holds ((for B29 , B30 , B31 , B32 , B33 , B34 being Nat holds (([ B29 , B30 ] in ( [: B23 , B24 :] /\ [: B25 , B26 :] ) & B31 = ( ( ( Sgm B23 ) " ) . B29 ) & B32 = ( ( ( Sgm B24 ) " ) . B30 ) & B33 = ( ( ( Sgm B25 ) " ) . B29 ) & B34 = ( ( ( Sgm B26 ) " ) . B30 )) implies ( B27 * (B31 , B32) ) = ( B28 * (B33 , B34) ))) implies (ex B35 being (Matrix of ( len B22 ) , ( width B22 ) , B21) st (( Segm (B35 , B23 , B24) ) = B27 & ( Segm (B35 , B25 , B26) ) = B28 & (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( ( Indices B35 ) \ ( [: B23 , B24 :] \/ [: B25 , B26 :] ) ) implies ( B35 * (R3 , R4) ) = ( B22 * (R3 , R4) )))))))))))))
proof
let C25 being non  empty set;
let C26 being (Matrix of C25);
let C27 , C28 , C29 , C30 being  without_zero  finite (Subset of ( NAT ));
assume that
L253: [: C27 , C28 :] c= ( Indices C26 )
and
L254: [: C29 , C30 :] c= ( Indices C26 );
set D42 = ( width C26 );
set D43 = ( len C26 );
set D44 = ( card C30 );
set D45 = ( card C29 );
set D46 = ( card C28 );
set D47 = ( card C27 );
let C31 being (Matrix of D47 , D46 , C25);
let C32 being (Matrix of D45 , D44 , C25);
assume that
L255: (for B36 , B37 , B38 , B39 , B40 , B41 being Nat holds (([ B36 , B37 ] in ( [: C27 , C28 :] /\ [: C29 , C30 :] ) & B38 = ( ( ( Sgm C27 ) " ) . B36 ) & B39 = ( ( ( Sgm C28 ) " ) . B37 ) & B40 = ( ( ( Sgm C29 ) " ) . B36 ) & B41 = ( ( ( Sgm C30 ) " ) . B37 )) implies ( C31 * (B38 , B39) ) = ( C32 * (B40 , B41) )));
L256: (ex B42 being Nat st C28 c= ( Seg B42 )) by MATRIX13:43;
L257: ( rng ( Sgm C28 ) ) = C28 by L256 , FINSEQ_1:def 13;
defpred S3[ set , set , set ] means (for R3 being Nat holds (for R4 being Nat holds (($1 = R3 & $2 = R4) implies (([ R3 , R4 ] in [: C27 , C28 :] implies ((ex R7 being Nat st (ex R8 being Nat st (R7 in ( dom ( Sgm C27 ) ) & R8 in ( dom ( Sgm C28 ) ) & ( ( Sgm C27 ) . R7 ) = R3 & ( ( Sgm C28 ) . R8 ) = R4))) & (for R7 being Nat holds (for R8 being Nat holds ((R7 in ( dom ( Sgm C27 ) ) & R8 in ( dom ( Sgm C28 ) ) & ( ( Sgm C27 ) . R7 ) = R3 & ( ( Sgm C28 ) . R8 ) = R4) implies $3 = ( C31 * (R7 , R8) )))))) & ([ R3 , R4 ] in [: C29 , C30 :] implies ((ex R7 being Nat st (ex R8 being Nat st (R7 in ( dom ( Sgm C29 ) ) & R8 in ( dom ( Sgm C30 ) ) & ( ( Sgm C29 ) . R7 ) = R3 & ( ( Sgm C30 ) . R8 ) = R4))) & (for R7 being Nat holds (for R8 being Nat holds ((R7 in ( dom ( Sgm C29 ) ) & R8 in ( dom ( Sgm C30 ) ) & ( ( Sgm C29 ) . R7 ) = R3 & ( ( Sgm C30 ) . R8 ) = R4) implies $3 = ( C32 * (R7 , R8) )))))) & ((not [ R3 , R4 ] in ( [: C27 , C28 :] \/ [: C29 , C30 :] )) implies $3 = ( C26 * (R3 , R4) ))))));
L258: (ex B43 being Nat st C27 c= ( Seg B43 )) by MATRIX13:43;
L259: ( rng ( Sgm C27 ) ) = C27 by L258 , FINSEQ_1:def 13;
L260: ( dom ( Sgm C28 ) ) = ( Seg D46 ) by L256 , FINSEQ_3:40;
L261: ( Sgm C28 ) is  one-to-one by L256 , FINSEQ_3:92;
L262: ( Sgm C27 ) is  one-to-one by L258 , FINSEQ_3:92;
L263: (ex B44 being Nat st C30 c= ( Seg B44 )) by MATRIX13:43;
L264: ( rng ( Sgm C30 ) ) = C30 by L263 , FINSEQ_1:def 13;
L265: ( Sgm C30 ) is  one-to-one by L263 , FINSEQ_3:92;
L266: (ex B45 being Nat st C29 c= ( Seg B45 )) by MATRIX13:43;
L267: ( rng ( Sgm C29 ) ) = C29 by L266 , FINSEQ_1:def 13;
L268: ( Sgm C29 ) is  one-to-one by L266 , FINSEQ_3:92;
L269: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in [: ( Seg D43 ) , ( Seg D42 ) :] implies (ex B46 being (Element of C25) st S3[ R3 , R4 , B46 ]))))
proof
let R3 being Nat;
let R4 being Nat;
assume that
L270: [ R3 , R4 ] in [: ( Seg D43 ) , ( Seg D42 ) :];
per cases ;
suppose L271: ([ R3 , R4 ] in [: C27 , C28 :] & [ R3 , R4 ] in [: C29 , C30 :]);

L272: R4 in C30 by L271 , ZFMISC_1:87;
consider C33 being set such that L273: C33 in ( dom ( Sgm C30 ) ) and L274: ( ( Sgm C30 ) . C33 ) = R4 by L272 , L264 , FUNCT_1:def 3;
L275: R4 in C28 by L271 , ZFMISC_1:87;
consider R2 being set such that L276: R2 in ( dom ( Sgm C28 ) ) and L277: ( ( Sgm C28 ) . R2 ) = R4 by L275 , L257 , FUNCT_1:def 3;
L278: R3 in C29 by L271 , ZFMISC_1:87;
consider C34 being set such that L279: C34 in ( dom ( Sgm C29 ) ) and L280: ( ( Sgm C29 ) . C34 ) = R3 by L278 , L267 , FUNCT_1:def 3;
L281: R3 in C27 by L271 , ZFMISC_1:87;
consider R1 being set such that L282: R1 in ( dom ( Sgm C27 ) ) and L283: ( ( Sgm C27 ) . R1 ) = R3 by L281 , L259 , FUNCT_1:def 3;
reconsider D48 = R1 , D49 = R2 as (Element of ( NAT )) by L282 , L276;
take D50 = ( C31 * (D48 , D49) );
L284:
now
let R7 being Nat;
let R8 being Nat;
assume L285: (R7 in ( dom ( Sgm C29 ) ) & R8 in ( dom ( Sgm C30 ) ) & ( ( Sgm C29 ) . R7 ) = R3 & ( ( Sgm C30 ) . R8 ) = R4);
L286: (( ( ( Sgm C29 ) " ) . R3 ) = R7 & ( ( ( Sgm C30 ) " ) . R4 ) = R8) by L285 , L268 , L265 , FUNCT_1:32;
L287: ( ( ( Sgm C28 ) " ) . R4 ) = D49 by L261 , L276 , L277 , FUNCT_1:32;
L288: ([ R3 , R4 ] in ( [: C27 , C28 :] /\ [: C29 , C30 :] ) & ( ( ( Sgm C27 ) " ) . R3 ) = D48) by L262 , L271 , L282 , L283 , FUNCT_1:32 , XBOOLE_0:def 4;
thus L289: D50 = ( C32 * (R7 , R8) ) by L288 , L255 , L287 , L286;
end;
L290:
now
let R7 being Nat;
let R8 being Nat;
assume that
L291: R7 in ( dom ( Sgm C27 ) )
and
L292: R8 in ( dom ( Sgm C28 ) )
and
L293: ( ( Sgm C27 ) . R7 ) = R3
and
L294: ( ( Sgm C28 ) . R8 ) = R4;
L295: D48 = R7 by L262 , L282 , L283 , L291 , L293 , FUNCT_1:def 4;
thus L296: D50 = ( C31 * (R7 , R8) ) by L295 , L261 , L276 , L277 , L292 , L294 , FUNCT_1:def 4;
end;
thus L297: thesis by L290 , L271 , L282 , L283 , L276 , L277 , L279 , L280 , L273 , L274 , L284 , XBOOLE_0:def 3;
end;
suppose L298: ([ R3 , R4 ] in [: C27 , C28 :] & (not [ R3 , R4 ] in [: C29 , C30 :]));

L299: R4 in C28 by L298 , ZFMISC_1:87;
consider R2 being set such that L300: R2 in ( dom ( Sgm C28 ) ) and L301: ( ( Sgm C28 ) . R2 ) = R4 by L299 , L257 , FUNCT_1:def 3;
L302: R3 in C27 by L298 , ZFMISC_1:87;
consider R1 being set such that L303: R1 in ( dom ( Sgm C27 ) ) and L304: ( ( Sgm C27 ) . R1 ) = R3 by L302 , L259 , FUNCT_1:def 3;
reconsider D51 = R1 , D52 = R2 as (Element of ( NAT )) by L303 , L300;
take D53 = ( C31 * (D51 , D52) );
L305:
now
let R7 being Nat;
let R8 being Nat;
assume that
L306: R7 in ( dom ( Sgm C27 ) )
and
L307: R8 in ( dom ( Sgm C28 ) )
and
L308: ( ( Sgm C27 ) . R7 ) = R3
and
L309: ( ( Sgm C28 ) . R8 ) = R4;
L310: D51 = R7 by L262 , L303 , L304 , L306 , L308 , FUNCT_1:def 4;
thus L311: D53 = ( C31 * (R7 , R8) ) by L310 , L261 , L300 , L301 , L307 , L309 , FUNCT_1:def 4;
end;
thus L312: thesis by L305 , L298 , L303 , L304 , L300 , L301 , XBOOLE_0:def 3;
end;
suppose L313: ((not [ R3 , R4 ] in [: C27 , C28 :]) & [ R3 , R4 ] in [: C29 , C30 :]);

L314: R4 in C30 by L313 , ZFMISC_1:87;
consider R2 being set such that L315: R2 in ( dom ( Sgm C30 ) ) and L316: ( ( Sgm C30 ) . R2 ) = R4 by L314 , L264 , FUNCT_1:def 3;
L317: R3 in C29 by L313 , ZFMISC_1:87;
consider R1 being set such that L318: R1 in ( dom ( Sgm C29 ) ) and L319: ( ( Sgm C29 ) . R1 ) = R3 by L317 , L267 , FUNCT_1:def 3;
reconsider D54 = R1 , D55 = R2 as (Element of ( NAT )) by L318 , L315;
take D56 = ( C32 * (D54 , D55) );
L320:
now
let R7 being Nat;
let R8 being Nat;
assume that
L321: R7 in ( dom ( Sgm C29 ) )
and
L322: R8 in ( dom ( Sgm C30 ) )
and
L323: ( ( Sgm C29 ) . R7 ) = R3
and
L324: ( ( Sgm C30 ) . R8 ) = R4;
L325: D54 = R7 by L268 , L318 , L319 , L321 , L323 , FUNCT_1:def 4;
thus L326: D56 = ( C32 * (R7 , R8) ) by L325 , L265 , L315 , L316 , L322 , L324 , FUNCT_1:def 4;
end;
thus L327: thesis by L320 , L313 , L318 , L319 , L315 , L316 , XBOOLE_0:def 3;
end;
suppose L328: ((not [ R3 , R4 ] in [: C27 , C28 :]) & (not [ R3 , R4 ] in [: C29 , C30 :]));

take ( C26 * (R3 , R4) );
thus L329: thesis by L328;
end;
end;
consider C35 being (Matrix of D43 , D42 , C25) such that L331: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( Indices C35 ) implies S3[ R3 , R4 , ( C35 * (R3 , R4) ) ]))) from MATRIX_1:sch 2(L269);
set D57 = ( Segm (C35 , C27 , C28) );
take C35;
L332: C26 is (Matrix of D43 , D42 , C25) by MATRIX_2:7;
L333: ( Indices C26 ) = ( Indices C35 ) by L332 , MATRIX_1:26;
L334: ( dom ( Sgm C27 ) ) = ( Seg D47 ) by L258 , FINSEQ_3:40;
L335:
now
let R3 being Nat;
let R4 being Nat;
assume that
L336: [ R3 , R4 ] in ( Indices D57 );
L337: D47 <> ( 0 ) by L336 , MATRIX_1:22;
L338: ( Indices D57 ) = [: ( Seg D47 ) , ( Seg D46 ) :] by L337 , MATRIX_1:23;
L339: R4 in ( Seg D46 ) by L338 , L336 , ZFMISC_1:87;
L340: ( ( Sgm C28 ) . R4 ) in C28 by L339 , L257 , L260 , FUNCT_1:def 3;
L341: R3 in ( Seg D47 ) by L336 , L338 , ZFMISC_1:87;
L342: ( ( Sgm C27 ) . R3 ) in C27 by L341 , L259 , L334 , FUNCT_1:def 3;
L343: [ ( ( Sgm C27 ) . R3 ) , ( ( Sgm C28 ) . R4 ) ] in [: C27 , C28 :] by L342 , L340 , ZFMISC_1:87;
thus L344: ( C31 * (R3 , R4) ) = ( C35 * (( ( Sgm C27 ) . R3 ) , ( ( Sgm C28 ) . R4 )) ) by L343 , L253 , L334 , L260 , L331 , L333 , L341 , L339
.= ( D57 * (R3 , R4) ) by L336 , MATRIX13:def 1;
end;
thus L345: D57 = C31 by L335 , MATRIX_1:27;
set D58 = ( Segm (C35 , C29 , C30) );
L346: ( dom ( Sgm C30 ) ) = ( Seg D44 ) by L263 , FINSEQ_3:40;
L347: ( dom ( Sgm C29 ) ) = ( Seg D45 ) by L266 , FINSEQ_3:40;
L348:
now
let R3 being Nat;
let R4 being Nat;
assume that
L349: [ R3 , R4 ] in ( Indices D58 );
L350: D45 <> ( 0 ) by L349 , MATRIX_1:22;
L351: ( Indices D58 ) = [: ( Seg D45 ) , ( Seg D44 ) :] by L350 , MATRIX_1:23;
L352: R4 in ( Seg D44 ) by L351 , L349 , ZFMISC_1:87;
L353: ( ( Sgm C30 ) . R4 ) in C30 by L352 , L264 , L346 , FUNCT_1:def 3;
L354: R3 in ( Seg D45 ) by L349 , L351 , ZFMISC_1:87;
L355: ( ( Sgm C29 ) . R3 ) in C29 by L354 , L267 , L347 , FUNCT_1:def 3;
L356: [ ( ( Sgm C29 ) . R3 ) , ( ( Sgm C30 ) . R4 ) ] in [: C29 , C30 :] by L355 , L353 , ZFMISC_1:87;
thus L357: ( C32 * (R3 , R4) ) = ( C35 * (( ( Sgm C29 ) . R3 ) , ( ( Sgm C30 ) . R4 )) ) by L356 , L254 , L347 , L346 , L331 , L333 , L354 , L352
.= ( D58 * (R3 , R4) ) by L349 , MATRIX13:def 1;
end;
thus L358: D58 = C32 by L348 , MATRIX_1:27;
let R3 being Nat;
let R4 being Nat;
assume that
L359: [ R3 , R4 ] in ( ( Indices C35 ) \ ( [: C27 , C28 :] \/ [: C29 , C30 :] ) );
L360: (not [ R3 , R4 ] in ( [: C27 , C28 :] \/ [: C29 , C30 :] )) by L359 , XBOOLE_0:def 5;
thus L361: thesis by L360 , L331 , L359;
end;
theorem
L362: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for B47 , B48 , B49 being  without_zero  finite (Subset of ( NAT )) holds ([: B47 , B49 :] c= ( Indices R13 ) implies (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( ( dom R13 ) \ B47 ) & R4 in ( ( Seg ( width R13 ) ) \ B48 ) & ( R13 * (R3 , R4) ) <> ( 0. R9 ) & B48 c= B49 & ( ( Line (R13 , R3) ) * ( Sgm B49 ) ) = ( ( card B49 ) |-> ( 0. R9 ) )) implies ( the_rank_of R13 ) > ( the_rank_of ( Segm (R13 , B47 , B48) ) ))))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let C36 , C37 , C38 being  without_zero  finite (Subset of ( NAT ));
assume that
L363: [: C36 , C38 :] c= ( Indices R13 );
let R3 being Nat;
let R4 being Nat;
assume that
L364: R3 in ( ( dom R13 ) \ C36 )
and
L365: R4 in ( ( Seg ( width R13 ) ) \ C37 )
and
L366: ( R13 * (R3 , R4) ) <> ( 0. R9 )
and
L367: C37 c= C38
and
L368: ( ( Line (R13 , R3) ) * ( Sgm C38 ) ) = ( ( card C38 ) |-> ( 0. R9 ) );
L369: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3;
L370: R3 in ( Seg ( len R13 ) ) by L369 , L364 , XBOOLE_0:def 5;
L371: [: C36 , C37 :] c= [: C36 , C38 :] by L367 , ZFMISC_1:95;
L372: [: C36 , C37 :] c= ( Indices R13 ) by L371 , L363 , XBOOLE_1:1;
reconsider D59 = R3 , D60 = R4 as non  zero (Element of ( NAT )) by L364 , L365 , L369;
L373: R4 in ( Seg ( width R13 ) ) by L365 , XBOOLE_0:def 5;
set D61 = ( Segm (R13 , C36 , C37) );
consider C39 , C40 being  without_zero  finite (Subset of ( NAT )) such that L374: [: C39 , C40 :] c= ( Indices D61 ) and L375: ( card C39 ) = ( card C40 ) and L376: ( card C39 ) = ( the_rank_of D61 ) and L377: ( Det ( EqSegm (D61 , C39 , C40) ) ) <> ( 0. R9 ) by MATRIX13:def 4;
L378: (C39 = ( {} ) iff C40 = ( {} )) by L375;
consider C41 , C42 being  without_zero  finite (Subset of ( NAT )) such that L379: C41 c= C36 and L380: C42 c= C37 and L381: C41 = ( ( Sgm C36 ) .: C39 ) and L382: C42 = ( ( Sgm C37 ) .: C40 ) and L383: ( card C41 ) = ( card C39 ) and L384: ( card C42 ) = ( card C40 ) and L385: ( Segm (D61 , C39 , C40) ) = ( Segm (R13 , C41 , C42) ) by L378 , L374 , MATRIX13:57;
set D62 = ( C42 \/ { D60 } );
set D63 = ( C41 \/ { D59 } );
set D64 = ( EqSegm (R13 , D63 , D62) );
set D65 = ( Segm (R13 , D63 , D62) );
per cases ;
suppose L386: [: C36 , C37 :] = ( {} );

L387: (( card C36 ) = ( 0 ) or ( card C37 ) = ( 0 )) by L386 , CARD_1:27 , ZFMISC_1:90;
L388: ( the_rank_of D61 ) = ( 0 ) by L387 , MATRIX13:77;
L389: [ R3 , R4 ] in ( Indices R13 ) by L369 , L370 , L373 , ZFMISC_1:87;
thus L390: thesis by L389 , L366 , L388 , MATRIX13:94;
end;
suppose L391: [: C36 , C37 :] <> ( {} );

L392: C36 c= ( dom R13 ) by L391 , L372 , ZFMISC_1:114;
L393: C41 c= ( dom R13 ) by L392 , L379 , XBOOLE_1:1;
L394: [: C36 , C38 :] <> ( {} ) by L371 , L391 , XBOOLE_1:3;
L395: C38 c= ( Seg ( width R13 ) ) by L394 , L363 , ZFMISC_1:114;
L396: ( dom ( Sgm C38 ) ) = ( Seg ( card C38 ) ) by L395 , FINSEQ_3:40;
L397: C37 c= ( Seg ( width R13 ) ) by L372 , L391 , ZFMISC_1:114;
L398: C42 c= ( Seg ( width R13 ) ) by L397 , L380 , XBOOLE_1:1;
L399: { D60 } c= ( Seg ( width R13 ) ) by L373 , ZFMISC_1:31;
L400: ( Sgm D62 ) is  one-to-one by L399 , L398 , FINSEQ_3:92 , XBOOLE_1:8;
L401: D62 c= ( Seg ( width R13 ) ) by L398 , L399 , XBOOLE_1:8;
L402: ( rng ( Sgm D62 ) ) = D62 by L401 , FINSEQ_1:def 13;
L403: { D59 } c= ( dom R13 ) by L369 , L370 , ZFMISC_1:31;
L404: D63 c= ( dom R13 ) by L403 , L393 , XBOOLE_1:8;
L405: [: D63 , D62 :] c= ( Indices R13 ) by L404 , L401 , ZFMISC_1:96;
L406: ( dom ( Sgm D63 ) ) = ( Seg ( card D63 ) ) by L369 , L393 , L403 , FINSEQ_3:40 , XBOOLE_1:8;
L407: R3 in { R3 } by TARSKI:def 1;
L408: R3 in D63 by L407 , XBOOLE_0:def 3;
L409: (not R3 in C41) by L364 , L379 , XBOOLE_0:def 5;
L410: ( card D63 ) = ( ( card C41 ) + 1 ) by L409 , CARD_2:41;
L411: ( ( card D63 ) -' 1 ) = ( card C39 ) by L410 , L383 , NAT_D:34;
L412: (not R4 in C42) by L365 , L380 , XBOOLE_0:def 5;
L413: ( card D62 ) = ( ( card C42 ) + 1 ) by L412 , CARD_2:41;
L414: D64 = D65 by L413 , L375 , L383 , L384 , L409 , CARD_2:41 , MATRIX13:def 3;
L415: R4 in { R4 } by TARSKI:def 1;
L416: R4 in D62 by L415 , XBOOLE_0:def 3;
consider R2 being set such that L417: R2 in ( dom ( Sgm D62 ) ) and L418: ( ( Sgm D62 ) . R2 ) = R4 by L416 , L402 , FUNCT_1:def 3;
L419: ( rng ( Sgm D63 ) ) = D63 by L369 , L404 , FINSEQ_1:def 13;
consider R1 being set such that L420: R1 in ( dom ( Sgm D63 ) ) and L421: ( ( Sgm D63 ) . R1 ) = R3 by L419 , L408 , FUNCT_1:def 3;
reconsider D66 = R1 , D67 = R2 as (Element of ( NAT )) by L420 , L417;
L422: ( - ( 1_ R9 ) ) <> ( 0. R9 ) by VECTSP_1:28;
L423: ( ( power R9 ) . (( - ( 1_ R9 ) ) , ( D66 + D67 )) ) <> ( 0. R9 ) by L422 , L35;
set D68 = ( LaplaceExpL (D64 , D66) );
L424: ( dom D68 ) = ( Seg ( len D68 ) ) by FINSEQ_1:def 3
.= ( Seg ( card D63 ) ) by LAPLACE:def 7;
L425: D67 in ( dom D68 ) by L424 , L375 , L383 , L384 , L398 , L399 , L410 , L413 , L417 , FINSEQ_3:40 , XBOOLE_1:8;
L426: ( dom ( Sgm D62 ) ) = ( Seg ( card D62 ) ) by L398 , L399 , FINSEQ_3:40 , XBOOLE_1:8;
L427: ( Delete (D64 , D66 , D67) ) = ( EqSegm (R13 , ( D63 \ { R3 } ) , ( D62 \ { R4 } )) ) by L426 , L375 , L383 , L384 , L410 , L413 , L406 , L420 , L421 , L417 , L418 , MATRIX13:64
.= ( EqSegm (R13 , C41 , ( D62 \ { R4 } )) ) by L409 , ZFMISC_1:117
.= ( EqSegm (R13 , C41 , C42) ) by L412 , ZFMISC_1:117
.= ( Segm (R13 , C41 , C42) ) by L375 , L383 , L384 , MATRIX13:def 3
.= ( EqSegm (D61 , C39 , C40) ) by L375 , L385 , MATRIX13:def 3;
L428: ( ( ( power R9 ) . (( - ( 1_ R9 ) ) , ( D66 + D67 )) ) * ( Det ( Delete (D64 , D66 , D67) ) ) ) <> ( 0. R9 ) by L427 , L377 , L411 , L423 , VECTSP_1:12;
L429: ( Indices D64 ) = [: ( Seg ( card D63 ) ) , ( Seg ( card D63 ) ) :] by MATRIX_1:24;
L430: [ D66 , D67 ] in ( Indices D64 ) by L429 , L375 , L383 , L384 , L410 , L413 , L406 , L426 , L420 , L417 , ZFMISC_1:87;
L431: ( rng ( Sgm C38 ) ) = C38 by L395 , FINSEQ_1:def 13;
L432:
now
let R5 being Nat;
assume that
L433: R5 in ( dom D68 )
and
L434: R5 <> D67;
L435: ( ( Sgm D62 ) . R5 ) <> R4 by L375 , L383 , L384 , L410 , L413 , L426 , L400 , L417 , L418 , L424 , L433 , L434 , FUNCT_1:def 4;
L436: (not ( ( Sgm D62 ) . R5 ) in { R4 }) by L435 , TARSKI:def 1;
L437: ( ( Sgm D62 ) . R5 ) in D62 by L375 , L383 , L384 , L410 , L413 , L402 , L426 , L424 , L433 , FUNCT_1:def 3;
L438: ( ( Sgm D62 ) . R5 ) in C42 by L437 , L436 , XBOOLE_0:def 3;
L439: ( ( Sgm D62 ) . R5 ) in C37 by L438 , L380;
L440: ( ( Sgm D62 ) . R5 ) in C38 by L439 , L367;
consider C43 being set such that L441: C43 in ( dom ( Sgm C38 ) ) and L442: ( ( Sgm C38 ) . C43 ) = ( ( Sgm D62 ) . R5 ) by L367 , L431 , L439 , FUNCT_1:def 3;
reconsider D69 = C43 as (Element of ( NAT )) by L441;
L443: [ D66 , R5 ] in ( Indices D64 ) by L406 , L420 , L424 , L429 , L433 , ZFMISC_1:87;
L444: ( D64 * (D66 , R5) ) = ( R13 * (R3 , ( ( Sgm D62 ) . R5 )) ) by L443 , L421 , L414 , MATRIX13:def 1
.= ( ( Line (R13 , R3) ) . ( ( Sgm C38 ) . D69 ) ) by L395 , L442 , L440 , MATRIX_1:def 7
.= ( ( ( card C38 ) |-> ( 0. R9 ) ) . D69 ) by L368 , L441 , FUNCT_1:13
.= ( 0. R9 ) by L396 , L441 , FINSEQ_2:57;
thus L445: ( D68 . R5 ) = ( ( 0. R9 ) * ( Cofactor (D64 , D66 , R5) ) ) by L444 , L433 , LAPLACE:def 7
.= ( 0. R9 ) by VECTSP_1:7;
end;
L446: ( D68 . D67 ) = ( Sum D68 ) by L432 , L425 , MATRIX_3:12
.= ( Det D64 ) by L406 , L420 , LAPLACE:25;
L447: ( D68 . D67 ) = ( ( D65 * (D66 , D67) ) * ( Cofactor (D64 , D66 , D67) ) ) by L425 , L414 , LAPLACE:def 7
.= ( ( R13 * (R3 , R4) ) * ( ( ( power R9 ) . (( - ( 1_ R9 ) ) , ( D66 + D67 )) ) * ( Det ( Delete (D64 , D66 , D67) ) ) ) ) by L421 , L418 , L414 , L430 , MATRIX13:def 1;
L448: ( Det D64 ) <> ( 0. R9 ) by L447 , L366 , L446 , L428 , VECTSP_1:12;
L449: ( the_rank_of R13 ) >= ( card D63 ) by L448 , L375 , L383 , L384 , L410 , L413 , L405 , MATRIX13:def 4;
thus L450: thesis by L449 , L376 , L383 , L410 , NAT_1:13;
end;
end;
theorem
L452: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((R10 c= ( dom R13 ) & (for R3 being Nat holds (R3 in ( ( dom R13 ) \ R10 ) implies ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) )))) implies ( the_rank_of R13 ) = ( the_rank_of ( Segm (R13 , R10 , ( Seg ( width R13 ) )) ) )))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L453: R10 c= ( dom R13 )
and
L454: (for R3 being Nat holds (R3 in ( ( dom R13 ) \ R10 ) implies ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) )));
set D70 = ( width R13 );
set D71 = ( len R13 );
reconsider D72 = R13 as (Matrix of ( len R13 ) , ( width R13 ) , R9) by MATRIX_2:7;
set D73 = ( Segm (D72 , R10 , ( Seg ( width D72 ) )) );
consider C44 being  finite (Subset of ( D70 -VectSp_over R9 )) such that L455: C44 is  linearly-independent and L456: C44 c= ( lines D72 ) and L457: ( card C44 ) = ( the_rank_of D72 ) by MATRIX13:123;
L458: C44 c= ( lines D73 )
proof
let R1 being set;
assume that
L459: R1 in C44;
consider C45 being Nat such that L460: C45 in ( Seg D71 ) and L461: R1 = ( Line (D72 , C45) ) by L456 , L459 , MATRIX13:103;
L462: ( dom R13 ) = ( Seg D71 ) by FINSEQ_1:def 3;
L463: C45 in R10
proof
assume L464: (not C45 in R10);
L465: C45 in ( ( dom R13 ) \ R10 ) by L464 , L460 , L462 , XBOOLE_0:def 5;
L466: R1 = ( D70 |-> ( 0. R9 ) ) by L465 , L454 , L461
.= ( 0. ( D70 -VectSp_over R9 ) ) by MATRIX13:102;
thus L467: thesis by L466 , L455 , L459 , VECTSP_7:2;
end;
L468: ( rng ( Sgm R10 ) ) = R10 by L453 , L462 , FINSEQ_1:def 13;
consider C46 being set such that L469: C46 in ( dom ( Sgm R10 ) ) and L470: ( ( Sgm R10 ) . C46 ) = C45 by L468 , L463 , FUNCT_1:def 3;
reconsider D74 = C46 as (Element of ( NAT )) by L469;
L471: ( dom ( Sgm R10 ) ) = ( Seg ( card R10 ) ) by L453 , L462 , FINSEQ_3:40;
L472: ( Line (D73 , D74) ) = R1 by L471 , L461 , L469 , L470 , MATRIX13:48;
thus L473: thesis by L472 , L469 , L471 , MATRIX13:103;
end;
L474:
now
let C47 being  finite (Subset of ( D70 -VectSp_over R9 ));
assume that
L475: C47 is  linearly-independent
and
L476: C47 c= ( lines D73 );
L477: ( dom R13 ) = ( Seg D71 ) by FINSEQ_1:def 3;
L478: ( lines D73 ) c= ( lines D72 ) by L477 , L453 , MATRIX13:118;
L479: C47 c= ( lines D72 ) by L478 , L476 , XBOOLE_1:1;
thus L480: ( card C47 ) <= ( the_rank_of D72 ) by L479 , L475 , MATRIX13:123;
end;
L481: D70 = ( card ( Seg D70 ) ) by FINSEQ_1:57;
thus L482: thesis by L481 , L455 , L457 , L458 , L474 , MATRIX13:123;
end;
theorem
L483: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((R10 c= ( Seg ( width R13 ) ) & (for R3 being Nat holds (R3 in ( ( Seg ( width R13 ) ) \ R10 ) implies ( Col (R13 , R3) ) = ( ( len R13 ) |-> ( 0. R9 ) )))) implies ( the_rank_of R13 ) = ( the_rank_of ( Segm (R13 , ( Seg ( len R13 ) ) , R10) ) )))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L484: R10 c= ( Seg ( width R13 ) )
and
L485: (for R3 being Nat holds (R3 in ( ( Seg ( width R13 ) ) \ R10 ) implies ( Col (R13 , R3) ) = ( ( len R13 ) |-> ( 0. R9 ) )));
L486: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3;
per cases ;
suppose L487: ( card R10 ) = ( 0 );

L488: ( the_rank_of R13 ) = ( 0 )
proof
L489: R10 = ( {} ) by L487;
assume L490: ( the_rank_of R13 ) <> ( 0 );
consider R3 being Nat, R4 being Nat such that L491: [ R3 , R4 ] in ( Indices R13 ) and L492: ( R13 * (R3 , R4) ) <> ( 0. R9 ) by L490 , MATRIX13:94;
L493: R4 in ( Seg ( width R13 ) ) by L491 , ZFMISC_1:87;
L494: R3 in ( dom R13 ) by L491 , ZFMISC_1:87;
L495: ( 0. R9 ) = ( ( ( len R13 ) |-> ( 0. R9 ) ) . R3 ) by L494 , L486 , FINSEQ_2:57
.= ( ( Col (R13 , R4) ) . R3 ) by L485 , L493 , L489
.= ( R13 * (R3 , R4) ) by L494 , MATRIX_1:def 8;
thus L496: thesis by L495 , L492;
end;
thus L497: thesis by L488 , L487 , MATRIX13:77;
end;
suppose L498: ( card R10 ) > ( 0 );

L499: R10 <> ( {} ) by L498;
L500: ( Seg ( width R13 ) ) <> ( {} ) by L499 , L484 , XBOOLE_1:3;
L501: ( width R13 ) <> ( 0 ) by L500;
L502: ( len R13 ) <> ( 0 ) by L501 , MATRIX_1:def 3;
set D75 = ( R13 @ );
L503: [: ( dom R13 ) , R10 :] c= ( Indices R13 ) by L484 , ZFMISC_1:95;
L504: ( width D75 ) = ( len R13 ) by L501 , MATRIX_2:10;
L505: ( len D75 ) = ( width R13 ) by L501 , MATRIX_2:10;
L506: R10 c= ( dom D75 ) by L505 , L484 , FINSEQ_1:def 3;
L507: ( dom D75 ) = ( Seg ( len D75 ) ) by FINSEQ_1:def 3;
L508:
now
let R3 being Nat;
assume that
L509: R3 in ( ( dom D75 ) \ R10 );
L510: R3 in ( dom D75 ) by L509 , XBOOLE_0:def 5;
thus L511: ( Line (D75 , R3) ) = ( Col (R13 , R3) ) by L510 , L505 , L507 , MATRIX_2:15
.= ( ( width D75 ) |-> ( 0. R9 ) ) by L485 , L505 , L504 , L507 , L509;
end;
thus L512: ( the_rank_of R13 ) = ( the_rank_of D75 ) by MATRIX13:84
.= ( the_rank_of ( Segm (D75 , R10 , ( Seg ( len R13 ) )) ) ) by L504 , L506 , L508 , L452
.= ( the_rank_of ( ( Segm (R13 , ( Seg ( len R13 ) ) , R10) ) @ ) ) by L486 , L498 , L502 , L503 , MATRIX13:61
.= ( the_rank_of ( Segm (R13 , ( Seg ( len R13 ) ) , R10) ) ) by MATRIX13:84;
end;
end;
theorem
L514: (for R9 being Field holds (for B50 being (VectSp of R9) holds (for B51 being  finite (Subset of B50) holds (for B52 , B53 being (Vector of B50) holds (for R11 being (Element of R9) holds ((B52 in B51 & B53 in B51) implies ( Lin ( ( B51 \ { B52 } ) \/ { ( B52 + ( R11 * B53 ) ) } ) ) is (Subspace of ( Lin B51 ))))))))
proof
let R9 being Field;
let C48 being (VectSp of R9);
let C49 being  finite (Subset of C48);
let C50 , C51 being (Vector of C48);
let R11 being (Element of R9);
assume that
L515: (C50 in C49 & C51 in C49);
set D76 = ( C50 + ( R11 * C51 ) );
set D77 = ( C49 \ { C50 } );
L516: ( D77 \/ { D76 } ) c= (the carrier of ( Lin C49 ))
proof
let R1 being set;
assume that
L517: R1 in ( D77 \/ { D76 } );
per cases  by L517 , XBOOLE_0:def 3;
suppose L518: R1 in D77;

L519: R1 in C49 by L518 , XBOOLE_0:def 5;
L520: R1 in ( Lin C49 ) by L519 , VECTSP_7:8;
thus L521: thesis by L520 , STRUCT_0:def 5;
end;
suppose L522: R1 in { D76 };

L523: (C50 in ( Lin C49 ) & ( R11 * C51 ) in ( Lin C49 )) by L515 , VECTSP_4:21 , VECTSP_7:8;
L524: R1 = D76 by L522 , TARSKI:def 1;
L525: R1 in ( Lin C49 ) by L524 , L523 , VECTSP_4:20;
thus L526: thesis by L525 , STRUCT_0:def 5;
end;
end;
thus L528: thesis by L516 , VECTSP_9:16;
end;
theorem
L529: (for R9 being Field holds (for B54 being (VectSp of R9) holds (for B55 being  finite (Subset of B54) holds (for B56 , B57 being (Vector of B54) holds (for R11 being (Element of R9) holds ((B56 in B55 & B57 in B55 & (B56 = B57 implies (R11 <> ( - ( 1_ R9 ) ) or B56 = ( 0. B54 )))) implies ( Lin ( ( B55 \ { B56 } ) \/ { ( B56 + ( R11 * B57 ) ) } ) ) = ( Lin B55 )))))))
proof
let R9 being Field;
let C52 being (VectSp of R9);
let C53 being  finite (Subset of C52);
let C54 , C55 being (Vector of C52);
let R11 being (Element of R9);
assume that
L530: C54 in C53
and
L531: C55 in C53
and
L532: (C54 = C55 implies (R11 <> ( - ( 1_ R9 ) ) or C54 = ( 0. C52 )));
set D78 = ( C54 + ( R11 * C55 ) );
set D79 = ( C53 \ { C54 } );
L533: C53 c= (the carrier of ( Lin ( D79 \/ { D78 } ) ))
proof
let R1 being set;
assume that
L534: R1 in C53;
per cases ;
suppose L535: R1 = C54;

per cases ;
suppose L536: C54 <> C55;

L537: ( D78 + ( ( - R11 ) * C55 ) ) = ( D78 - ( R11 * C55 ) ) by VECTSP_1:21
.= ( C54 + ( ( R11 * C55 ) - ( R11 * C55 ) ) ) by RLVECT_1:def 3
.= ( C54 + ( 0. C52 ) ) by VECTSP_1:16
.= C54 by RLVECT_1:def 4;
L538: D78 in { D78 } by TARSKI:def 1;
L539: D78 in ( D79 \/ { D78 } ) by L538 , XBOOLE_0:def 3;
L540: D78 in ( Lin ( D79 \/ { D78 } ) ) by L539 , VECTSP_7:8;
L541: C55 in D79 by L531 , L536 , ZFMISC_1:56;
L542: C55 in ( D79 \/ { D78 } ) by L541 , XBOOLE_0:def 3;
L543: ( ( - R11 ) * C55 ) in ( Lin ( D79 \/ { D78 } ) ) by L542 , VECTSP_4:21 , VECTSP_7:8;
L544: ( D78 + ( ( - R11 ) * C55 ) ) in ( Lin ( D79 \/ { D78 } ) ) by L543 , L540 , VECTSP_4:20;
thus L545: thesis by L544 , L535 , L537 , STRUCT_0:def 5;
end;
suppose L546: C54 = C55;

per cases  by L532 , L546;
suppose L547: R11 <> ( - ( 1_ R9 ) );

L548: ( 0. R9 ) <> ( ( - ( 1_ R9 ) ) - R11 ) by L547 , VECTSP_1:19;
L549: ( 0. R9 ) <> ( - ( ( - ( 1_ R9 ) ) - R11 ) ) by L548 , VECTSP_1:28;
L550: ( 0. R9 ) <> ( R11 + ( 1_ R9 ) ) by L549 , VECTSP_1:31;
L551: D78 in { D78 } by TARSKI:def 1;
L552: D78 in ( D79 \/ { D78 } ) by L551 , XBOOLE_0:def 3;
L553: D78 = ( ( ( 1_ R9 ) * C54 ) + ( R11 * C54 ) ) by L546 , VECTSP_1:def 17
.= ( ( ( 1. R9 ) + R11 ) * C54 ) by VECTSP_1:def 15;
L554: ( ( ( ( 1. R9 ) + R11 ) " ) * D78 ) = C54 by L553 , L550 , VECTSP_1:20;
L555: C54 in ( Lin ( D79 \/ { D78 } ) ) by L554 , L552 , VECTSP_4:21 , VECTSP_7:8;
thus L556: thesis by L555 , L535 , STRUCT_0:def 5;
end;
suppose L557: C54 = ( 0. C52 );

L558: R1 in ( Lin ( D79 \/ { D78 } ) ) by L557 , L535 , VECTSP_4:17;
thus L559: thesis by L558 , STRUCT_0:def 5;
end;
end;
end;
suppose L562: R1 <> C54;

L563: R1 in D79 by L562 , L534 , ZFMISC_1:56;
L564: R1 in ( D79 \/ { D78 } ) by L563 , XBOOLE_0:def 3;
L565: R1 in ( Lin ( D79 \/ { D78 } ) ) by L564 , VECTSP_7:8;
thus L566: thesis by L565 , STRUCT_0:def 5;
end;
end;
L568: ( Lin C53 ) is (Subspace of ( Lin ( D79 \/ { D78 } ) )) by L533 , VECTSP_9:16;
L569: (the carrier of ( Lin C53 )) c= (the carrier of ( Lin ( D79 \/ { D78 } ) )) by L568 , VECTSP_4:def 2;
L570: ( Lin ( D79 \/ { D78 } ) ) is (Subspace of ( Lin C53 )) by L530 , L531 , L514;
L571: (the carrier of ( Lin ( D79 \/ { D78 } ) )) c= (the carrier of ( Lin C53 )) by L570 , VECTSP_4:def 2;
L572: (the carrier of ( Lin C53 )) = (the carrier of ( Lin ( D79 \/ { D78 } ) )) by L571 , L569 , XBOOLE_0:def 10;
thus L573: thesis by L572 , VECTSP_4:29;
end;
begin
definition
let C56 being non  empty set;
let C57 , C58 , C59 being Nat;
let C60 being (Matrix of C57 , C58 , C56);
let C61 being (Matrix of C57 , C59 , C56);
redefine func C60 ^^ C61 -> (Matrix of C57 , ( ( width C60 ) + ( width C61 ) ) , C56);

coherence
proof
reconsider D80 = C57 as (Element of ( NAT )) by ORDINAL1:def 12;
set D81 = ( C60 ^^ C61 );
L574: ( dom C61 ) = ( Seg ( len C61 ) ) by FINSEQ_1:def 3
.= ( Seg C57 ) by MATRIX_1:def 2;
L575: ( dom C60 ) = ( Seg ( len C60 ) ) by FINSEQ_1:def 3
.= ( Seg C57 ) by MATRIX_1:def 2;
L576: ( dom D81 ) = ( ( Seg C57 ) /\ ( Seg C57 ) ) by L575 , L574 , PRE_POLY:def 4
.= ( Seg C57 );
L577: ( len D81 ) = D80 by L576 , FINSEQ_1:def 3;
per cases ;
suppose L578: D80 = ( 0 );

L579: D81 = ( {} ) by L578 , L576;
thus L580: thesis by L579 , L578 , MATRIX_1:13;
end;
suppose L581: D80 > ( 0 );

L582: D80 in ( Seg D80 ) by L581 , FINSEQ_1:3;
L583: (( C60 . D80 ) = ( Line (C60 , D80) ) & ( C61 . D80 ) = ( Line (C61 , D80) )) by L582 , MATRIX_2:8;
L584: ( D81 . D80 ) = ( ( Line (C60 , D80) ) ^ ( Line (C61 , D80) ) ) by L583 , L576 , L582 , PRE_POLY:def 4;
L585: ( len ( ( Line (C60 , D80) ) ^ ( Line (C61 , D80) ) ) ) = ( ( width C60 ) + ( width C61 ) ) by CARD_1:def 7;
L586: ( D81 . D80 ) in ( rng D81 ) by L576 , L582 , FUNCT_1:def 3;
L587: ( width D81 ) = ( ( width C60 ) + ( width C61 ) ) by L586 , L577 , L581 , L584 , L585 , MATRIX_1:def 3;
thus L588: thesis by L587 , L577 , MATRIX_2:7;
end;
end;
end;
theorem
L591: (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for B58 being non  empty set holds (for B59 being (Matrix of R8 , R7 , B58) holds (for B60 being (Matrix of R8 , R5 , B58) holds (for R3 being Nat holds (R3 in ( Seg R8 ) implies ( Line (( B59 ^^ B60 ) , R3) ) = ( ( Line (B59 , R3) ) ^ ( Line (B60 , R3) ) )))))))))
proof
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let C62 being non  empty set;
let C63 being (Matrix of R8 , R7 , C62);
let C64 being (Matrix of R8 , R5 , C62);
set D82 = ( C63 ^^ C64 );
L592: (( len D82 ) = R8 & ( dom D82 ) = ( Seg ( len D82 ) )) by FINSEQ_1:def 3 , MATRIX_1:def 2;
let R3 being Nat;
assume that
L593: R3 in ( Seg R8 );
L594: (( Line (C63 , R3) ) = ( C63 . R3 ) & ( Line (C64 , R3) ) = ( C64 . R3 )) by L593 , MATRIX_2:8;
thus L595: ( ( Line (C63 , R3) ) ^ ( Line (C64 , R3) ) ) = ( D82 . R3 ) by L594 , L593 , L592 , PRE_POLY:def 4
.= ( Line (D82 , R3) ) by L593 , MATRIX_2:8;
end;
theorem
L596: (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for B61 being non  empty set holds (for B62 being (Matrix of R8 , R7 , B61) holds (for B63 being (Matrix of R8 , R5 , B61) holds (for R3 being Nat holds (R3 in ( Seg ( width B62 ) ) implies ( Col (( B62 ^^ B63 ) , R3) ) = ( Col (B62 , R3) )))))))))
proof
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let C65 being non  empty set;
let C66 being (Matrix of R8 , R7 , C65);
let C67 being (Matrix of R8 , R5 , C65);
let R3 being Nat;
assume that
L597: R3 in ( Seg ( width C66 ) );
set D83 = ( C66 ^^ C67 );
L598: ( len D83 ) = R8 by MATRIX_1:def 2;
L599: ( len C66 ) = R8 by MATRIX_1:def 2;
L600:
now
let R4 being Nat;
assume that
L601: R4 in ( Seg R8 );
L602: R8 <> ( 0 ) by L601;
L603: ( width D83 ) = ( ( width C66 ) + ( width C67 ) ) by L602 , MATRIX_1:23;
L604: ( width C66 ) <= ( width D83 ) by L603 , NAT_1:11;
L605: ( Seg ( width C66 ) ) c= ( Seg ( width D83 ) ) by L604 , FINSEQ_1:5;
L606: ( dom C66 ) = ( Seg R8 ) by L599 , FINSEQ_1:def 3;
L607: ( dom ( Line (C66 , R4) ) ) = ( Seg ( width C66 ) ) by FINSEQ_2:124;
L608: ( dom D83 ) = ( Seg R8 ) by L598 , FINSEQ_1:def 3;
thus L609: ( ( Col (D83 , R3) ) . R4 ) = ( D83 * (R4 , R3) ) by L608 , L601 , MATRIX_1:def 8
.= ( ( Line (D83 , R4) ) . R3 ) by L597 , L605 , MATRIX_1:def 7
.= ( ( ( Line (C66 , R4) ) ^ ( Line (C67 , R4) ) ) . R3 ) by L601 , L591
.= ( ( Line (C66 , R4) ) . R3 ) by L597 , L607 , FINSEQ_1:def 7
.= ( C66 * (R4 , R3) ) by L597 , MATRIX_1:def 7
.= ( ( Col (C66 , R3) ) . R4 ) by L601 , L606 , MATRIX_1:def 8;
end;
thus L610: thesis by L600 , L599 , L598 , FINSEQ_2:119;
end;
theorem
L611: (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for B64 being non  empty set holds (for B65 being (Matrix of R8 , R7 , B64) holds (for B66 being (Matrix of R8 , R5 , B64) holds (for R3 being Nat holds (R3 in ( Seg ( width B66 ) ) implies ( Col (( B65 ^^ B66 ) , ( ( width B65 ) + R3 )) ) = ( Col (B66 , R3) )))))))))
proof
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let C68 being non  empty set;
let C69 being (Matrix of R8 , R7 , C68);
let C70 being (Matrix of R8 , R5 , C68);
let R3 being Nat;
assume that
L612: R3 in ( Seg ( width C70 ) );
set D84 = ( C69 ^^ C70 );
L613: ( len D84 ) = R8 by MATRIX_1:def 2;
L614: ( len C70 ) = R8 by MATRIX_1:def 2;
L615:
now
L616: ( dom C70 ) = ( Seg R8 ) by L614 , FINSEQ_1:def 3;
let R4 being Nat;
assume that
L617: R4 in ( Seg R8 );
L618: R8 <> ( 0 ) by L617;
L619: ( width D84 ) = ( ( width C69 ) + ( width C70 ) ) by L618 , MATRIX_1:23;
L620: ( ( width C69 ) + R3 ) in ( Seg ( width D84 ) ) by L619 , L612 , FINSEQ_1:60;
L621: (( dom ( Line (C70 , R4) ) ) = ( Seg ( width C70 ) ) & ( len ( Line (C69 , R4) ) ) = ( width C69 )) by CARD_1:def 7 , FINSEQ_2:124;
L622: ( dom D84 ) = ( Seg R8 ) by L613 , FINSEQ_1:def 3;
thus L623: ( ( Col (D84 , ( ( width C69 ) + R3 )) ) . R4 ) = ( D84 * (R4 , ( ( width C69 ) + R3 )) ) by L622 , L617 , MATRIX_1:def 8
.= ( ( Line (D84 , R4) ) . ( ( width C69 ) + R3 ) ) by L620 , MATRIX_1:def 7
.= ( ( ( Line (C69 , R4) ) ^ ( Line (C70 , R4) ) ) . ( ( width C69 ) + R3 ) ) by L617 , L591
.= ( ( Line (C70 , R4) ) . R3 ) by L612 , L621 , FINSEQ_1:def 7
.= ( C70 * (R4 , R3) ) by L612 , MATRIX_1:def 7
.= ( ( Col (C70 , R3) ) . R4 ) by L617 , L616 , MATRIX_1:def 8;
end;
thus L624: thesis by L615 , L614 , L613 , FINSEQ_2:119;
end;
theorem
L625: (for R3 being Nat holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for B67 being non  empty set holds (for B68 being (Matrix of R8 , R7 , B67) holds (for B69 being (Matrix of R8 , R5 , B67) holds (for B70 , B71 being (FinSequence of B67) holds ((( len B70 ) = ( width B68 ) & ( len B71 ) = ( width B69 )) implies ( ReplaceLine (( B68 ^^ B69 ) , R3 , ( B70 ^ B71 )) ) = ( ( ReplaceLine (B68 , R3 , B70) ) ^^ ( ReplaceLine (B69 , R3 , B71) ) ))))))))))
proof
let R3 being Nat;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let C71 being non  empty set;
let C72 being (Matrix of R8 , R7 , C71);
let C73 being (Matrix of R8 , R5 , C71);
let C74 , C75 being (FinSequence of C71);
assume that
L626: ( len C74 ) = ( width C72 )
and
L627: ( len C75 ) = ( width C73 );
set D85 = ( RLine (C73 , R3 , C75) );
set D86 = ( RLine (C72 , R3 , C74) );
set D87 = ( C72 ^^ C73 );
set D88 = ( RLine (D87 , R3 , ( C74 ^ C75 )) );
set D89 = ( D86 ^^ D85 );
L628:
now
L629: (C74 is (Element of ( ( width C72 ) -tuples_on C71 )) & C75 is (Element of ( ( width C73 ) -tuples_on C71 ))) by L626 , L627 , FINSEQ_2:92;
L630: ( C74 ^ C75 ) is (Tuple of ( ( width C72 ) + ( width C73 ) ) , C71) by L629 , FINSEQ_2:107;
L631: ( C74 ^ C75 ) is (Element of ( ( ( width C72 ) + ( width C73 ) ) -tuples_on C71 )) by L630 , FINSEQ_2:131;
L632: ( len ( C74 ^ C75 ) ) = ( ( width C72 ) + ( width C73 ) ) by L631 , CARD_1:def 7;
let R4 being Nat;
assume that
L633: (1 <= R4 & R4 <= R8);
L634: R4 in ( NAT ) by ORDINAL1:def 12;
L635: R4 in ( Seg R8 ) by L634 , L633;
L636: ( width D87 ) = ( ( width C72 ) + ( width C73 ) ) by L633 , MATRIX_1:23;
L637:
now
per cases ;
suppose L638: R3 = R4;

L639: ( Line (D85 , R4) ) = C75 by L638 , L627 , L635 , MATRIX11:28;
L640: (( Line (D88 , R4) ) = ( C74 ^ C75 ) & ( Line (D86 , R4) ) = C74) by L626 , L635 , L632 , L636 , L638 , MATRIX11:28;
thus L641: ( Line (D88 , R4) ) = ( Line (D89 , R4) ) by L640 , L635 , L639 , L591;
end;
suppose L642: R3 <> R4;

L643: ( Line (D85 , R4) ) = ( Line (C73 , R4) ) by L642 , L635 , MATRIX11:28;
L644: (( Line (D88 , R4) ) = ( Line (D87 , R4) ) & ( Line (D86 , R4) ) = ( Line (C72 , R4) )) by L635 , L642 , MATRIX11:28;
thus L645: ( Line (D88 , R4) ) = ( ( Line (D86 , R4) ) ^ ( Line (D85 , R4) ) ) by L644 , L635 , L643 , L591
.= ( Line (D89 , R4) ) by L635 , L591;
end;
end;
thus L647: ( D88 . R4 ) = ( Line (D88 , R4) ) by L635 , MATRIX_2:8
.= ( D89 . R4 ) by L635 , L637 , MATRIX_2:8;
end;
L648: (( len D88 ) = R8 & ( len D89 ) = R8) by MATRIX_1:def 2;
thus L649: thesis by L648 , L628 , FINSEQ_1:14;
end;
theorem
L650: (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for B72 being non  empty set holds (for B73 being (Matrix of R8 , R7 , B72) holds (for B74 being (Matrix of R8 , R5 , B72) holds (( Segm (( B73 ^^ B74 ) , ( Seg R8 ) , ( Seg ( width B73 ) )) ) = B73 & ( Segm (( B73 ^^ B74 ) , ( Seg R8 ) , ( ( Seg ( ( width B73 ) + ( width B74 ) ) ) \ ( Seg ( width B73 ) ) )) ) = B74)))))))
proof
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let C76 being non  empty set;
let C77 being (Matrix of R8 , R7 , C76);
let C78 being (Matrix of R8 , R5 , C76);
set D90 = ( C77 ^^ C78 );
L651: ( card ( Seg R8 ) ) = R8 by FINSEQ_1:57;
L652: ( len C77 ) = R8 by MATRIX_1:def 2;
reconsider D91 = C77 as (Matrix of R8 , ( width C77 ) , C76) by L652 , MATRIX_2:7;
set D92 = ( Segm (D90 , ( Seg R8 ) , ( Seg ( width C77 ) )) );
L653: ( card ( Seg ( width C77 ) ) ) = ( width C77 ) by FINSEQ_1:57;
L654: ( len D90 ) = R8 by MATRIX_1:def 2;
L655:
now
let R3 being Nat;
let R4 being Nat;
assume that
L656: [ R3 , R4 ] in ( Indices D91 );
reconsider D93 = R3 , D94 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L657: ( dom C77 ) = ( Seg R8 ) by L652 , FINSEQ_1:def 3;
L658: R8 <> ( 0 ) by L656 , MATRIX_1:22;
L659: ( Indices D91 ) = [: ( Seg R8 ) , ( Seg ( width C77 ) ) :] by L658 , MATRIX_1:23;
L660: D93 in ( Seg R8 ) by L659 , L656 , ZFMISC_1:87;
L661: D94 in ( Seg ( width C77 ) ) by L656 , ZFMISC_1:87;
L662: D94 = ( ( idseq ( width C77 ) ) . D94 ) by L661 , FINSEQ_2:49
.= ( ( Sgm ( Seg ( width C77 ) ) ) . D94 ) by FINSEQ_3:48;
L663: ( dom D92 ) = ( Seg ( len D92 ) ) by FINSEQ_1:def 3
.= ( Seg R8 ) by L651 , MATRIX_1:def 2;
thus L664: ( D92 * (R3 , R4) ) = ( ( Col (D92 , D94) ) . D93 ) by L663 , L660 , MATRIX_1:def 8
.= ( ( Col (D90 , ( ( Sgm ( Seg ( width C77 ) ) ) . D94 )) ) . D93 ) by L654 , L653 , L661 , MATRIX13:50
.= ( ( Col (C77 , D94) ) . D93 ) by L661 , L662 , L596
.= ( C77 * (R3 , R4) ) by L660 , L657 , MATRIX_1:def 8;
end;
thus L665: C77 = D92 by L655 , L651 , L653 , MATRIX_1:27;
set D95 = ( ( width C77 ) + ( width C78 ) );
set D96 = ( ( Seg D95 ) \ ( Seg ( width C77 ) ) );
set D97 = ( Segm (D90 , ( Seg R8 ) , D96) );
L666: ( len C78 ) = R8 by MATRIX_1:def 2;
reconsider D98 = C78 as (Matrix of R8 , ( width C78 ) , C76) by L666 , MATRIX_2:7;
L667: ( width C77 ) <= D95 by NAT_1:11;
L668: (( card ( Seg ( ( width C77 ) + ( width C78 ) ) ) ) = ( ( width C77 ) + ( width C78 ) ) & ( Seg ( width C77 ) ) c= ( Seg D95 )) by L667 , FINSEQ_1:5 , FINSEQ_1:57;
L669: ( card D96 ) = ( D95 - ( width C77 ) ) by L668 , L653 , CARD_2:44
.= ( width C78 );
L670:
now
L671: ( dom C78 ) = ( Seg R8 ) by L666 , FINSEQ_1:def 3;
let R3 being Nat;
let R4 being Nat;
assume that
L672: [ R3 , R4 ] in ( Indices D98 );
reconsider D99 = R3 , D100 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L673: D100 in ( Seg ( width C78 ) ) by L672 , ZFMISC_1:87;
L674: R8 <> ( 0 ) by L672 , MATRIX_1:22;
L675: ( Indices D98 ) = [: ( Seg R8 ) , ( Seg ( width C78 ) ) :] by L674 , MATRIX_1:23;
L676: D99 in ( Seg R8 ) by L675 , L672 , ZFMISC_1:87;
L677: ( dom D97 ) = ( Seg ( len D97 ) ) by FINSEQ_1:def 3
.= ( Seg R8 ) by L651 , MATRIX_1:def 2;
thus L678: ( D97 * (R3 , R4) ) = ( ( Col (D97 , D100) ) . D99 ) by L677 , L676 , MATRIX_1:def 8
.= ( ( Col (D90 , ( ( Sgm D96 ) . D100 )) ) . D99 ) by L654 , L669 , L673 , MATRIX13:50
.= ( ( Col (D90 , ( ( width C77 ) + D100 )) ) . D99 ) by L673 , L219
.= ( ( Col (C78 , D100) ) . D99 ) by L673 , L611
.= ( D98 * (R3 , R4) ) by L676 , L671 , MATRIX_1:def 8;
end;
thus L679: thesis by L670 , L651 , L669 , MATRIX_1:27;
end;
theorem
L680: (for R9 being Field holds (for B75 , B76 being (Matrix of R9) holds (( len B75 ) = ( len B76 ) implies (( the_rank_of B75 ) <= ( the_rank_of ( B75 ^^ B76 ) ) & ( the_rank_of B76 ) <= ( the_rank_of ( B75 ^^ B76 ) )))))
proof
let R9 being Field;
let C79 , C80 being (Matrix of R9);
assume that
L681: ( len C79 ) = ( len C80 );
set D101 = ( len C79 );
reconsider D102 = C80 as (Matrix of D101 , ( width C80 ) , R9) by L681 , MATRIX_2:7;
reconsider D103 = C79 as (Matrix of D101 , ( width C79 ) , R9) by MATRIX_2:7;
set D104 = ( D103 ^^ D102 );
per cases ;
suppose L682: D101 = ( 0 );

thus L683: thesis by L682 , L681 , MATRIX13:74;
end;
suppose L684: D101 > ( 0 );

L685: ( Segm (D104 , ( Seg D101 ) , ( Seg ( width C79 ) )) ) = C79 by L650;
L686: ( Indices D104 ) = [: ( Seg D101 ) , ( Seg ( ( width C79 ) + ( width C80 ) ) ) :] by L684 , MATRIX_1:23;
L687: ( width D104 ) = ( ( width C79 ) + ( width C80 ) ) by L684 , MATRIX_1:23;
L688: ( width C79 ) <= ( width D104 ) by L687 , NAT_1:11;
L689: ( Seg ( width C79 ) ) c= ( Seg ( width D104 ) ) by L688 , FINSEQ_1:5;
L690: [: ( Seg D101 ) , ( Seg ( width C79 ) ) :] c= ( Indices D104 ) by L689 , L687 , L686 , ZFMISC_1:95;
L691: ( ( Seg ( width D104 ) ) \ ( Seg ( width C79 ) ) ) c= ( Seg ( width D104 ) ) by XBOOLE_1:36;
L692: [: ( Seg D101 ) , ( ( Seg ( width D104 ) ) \ ( Seg ( width C79 ) ) ) :] c= ( Indices D104 ) by L691 , L687 , L686 , ZFMISC_1:95;
L693: ( Segm (D104 , ( Seg D101 ) , ( ( Seg ( width D104 ) ) \ ( Seg ( width C79 ) ) )) ) = C80 by L687 , L650;
thus L694: thesis by L693 , L685 , L690 , L692 , MATRIX13:79;
end;
end;
theorem
L696: (for R9 being Field holds (for B77 , B78 being (Matrix of R9) holds ((( len B77 ) = ( len B78 ) & ( len B77 ) = ( the_rank_of B77 )) implies ( the_rank_of B77 ) = ( the_rank_of ( B77 ^^ B78 ) ))))
proof
let R9 being Field;
let C81 , C82 being (Matrix of R9);
assume that
L697: ( len C81 ) = ( len C82 )
and
L698: ( len C81 ) = ( the_rank_of C81 );
set D105 = ( len C81 );
reconsider D106 = C82 as (Matrix of D105 , ( width C82 ) , R9) by L697 , MATRIX_2:7;
reconsider D107 = C81 as (Matrix of D105 , ( width C81 ) , R9) by MATRIX_2:7;
L699: (( the_rank_of ( D107 ^^ D106 ) ) <= ( len ( D107 ^^ D106 ) ) & ( len ( D107 ^^ D106 ) ) = D105) by MATRIX13:74 , MATRIX_1:def 2;
L700: ( the_rank_of ( D107 ^^ D106 ) ) >= D105 by L697 , L698 , L680;
thus L701: thesis by L700 , L698 , L699 , XXREAL_0:1;
end;
theorem
L702: (for R9 being Field holds (for B79 , B80 being (Matrix of R9) holds ((( len B79 ) = ( len B80 ) & ( width B79 ) = ( 0 )) implies (( B79 ^^ B80 ) = B80 & ( B80 ^^ B79 ) = B80))))
proof
let R9 being Field;
let C83 , C84 being (Matrix of R9);
assume that
L703: ( len C83 ) = ( len C84 )
and
L704: ( width C83 ) = ( 0 );
L705: ( Seg ( width C83 ) ) = ( {} ) by L704;
set D108 = ( len C83 );
reconsider D109 = C84 as (Matrix of D108 , ( width C84 ) , R9) by L703 , MATRIX_2:7;
reconsider D110 = C83 as (Matrix of D108 , ( width C83 ) , R9) by MATRIX_2:7;
set D111 = ( D110 ^^ D109 );
set D112 = ( D109 ^^ D110 );
per cases ;
suppose L706: D108 = ( 0 );

L707: ( len D112 ) = ( 0 ) by L706 , MATRIX_1:def 2;
L708: D112 = ( {} ) by L707;
L709: ( len D111 ) = ( 0 ) by L706 , MATRIX_1:def 2;
L710: D111 = ( {} ) by L709;
thus L711: thesis by L710 , L703 , L706 , L708;
end;
suppose L712: D108 > ( 0 );

L713: (( width D111 ) = ( width C84 ) & ( len D111 ) = D108) by L712 , L704 , MATRIX_1:23;
thus L714: ( C83 ^^ C84 ) = ( Segm (D111 , ( Seg D108 ) , ( ( Seg ( width C84 ) ) \ ( Seg ( width C83 ) ) )) ) by L713 , L705 , MATRIX13:46
.= C84 by L704 , L650;
L715: (( width D112 ) = ( width C84 ) & ( len D112 ) = D108) by L704 , L712 , MATRIX_1:23;
thus L716: ( C84 ^^ C83 ) = ( Segm (D112 , ( Seg D108 ) , ( Seg ( width C84 ) )) ) by L715 , MATRIX13:46
.= C84 by L650;
end;
end;
theorem
L718: (for R7 being Nat holds (for R9 being Field holds (for B81 , B82 being (Matrix of R9) holds (B82 = ( 0. (R9 , ( len B81 ) , R7) ) implies ( the_rank_of B81 ) = ( the_rank_of ( B81 ^^ B82 ) )))))
proof
let R7 being Nat;
let R9 being Field;
let C85 , C86 being (Matrix of R9);
assume that
L719: C86 = ( 0. (R9 , ( len C85 ) , R7) );
L720: ( len C86 ) = ( len C85 ) by L719 , MATRIX_1:def 2;
set D113 = ( len C85 );
reconsider D114 = C86 as (Matrix of D113 , ( width C86 ) , R9) by L720 , MATRIX_2:7;
reconsider D115 = C85 as (Matrix of D113 , ( width C85 ) , R9) by MATRIX_2:7;
set D116 = ( D115 ^^ D114 );
per cases ;
suppose L721: ( width C86 ) = ( 0 );

thus L722: thesis by L721 , L720 , L702;
end;
suppose L723: ( width C86 ) > ( 0 );

L724: D113 > ( 0 ) by L723 , L720 , MATRIX_1:def 3;
L725: ( width D116 ) = ( ( width C85 ) + ( width C86 ) ) by L724 , MATRIX_1:23;
L726: ( len D116 ) = D113 by L724 , MATRIX_1:23;
L727:
now
set D117 = ( ( len D116 ) |-> ( 0. R9 ) );
let R3 being Nat;
assume that
L728: R3 in ( ( Seg ( width D116 ) ) \ ( Seg ( width C85 ) ) );
L729: R3 in ( Seg ( width D116 ) ) by L728 , XBOOLE_0:def 5;
L730: (not R3 in ( Seg ( width C85 ) )) by L728 , XBOOLE_0:def 5;
L731: (R3 < 1 or R3 > ( width C85 )) by L730 , L728;
reconsider D118 = ( R3 - ( width C85 ) ) as (Element of ( NAT )) by L731 , L729 , FINSEQ_1:1 , NAT_1:21;
L732: R3 = ( D118 + ( width C85 ) );
L733: D118 <> ( 0 ) by L729 , L731 , FINSEQ_1:1;
L734: D118 in ( Seg ( width C86 ) ) by L733 , L725 , L729 , L732 , FINSEQ_1:61;
L735:
now
let R3 being Nat;
assume that
L736: (1 <= R3 & R3 <= D113);
L737: R3 in ( NAT ) by ORDINAL1:def 12;
L738: R3 in ( Seg D113 ) by L737 , L736;
L739: ( D117 . R3 ) = ( 0. R9 ) by L738 , L726 , FINSEQ_2:57;
L740: ( Seg D113 ) = ( dom C86 ) by L720 , FINSEQ_1:def 3;
L741: (( ( Col (D114 , D118) ) . R3 ) = ( D114 * (R3 , D118) ) & [ R3 , D118 ] in ( Indices C86 )) by L740 , L734 , L738 , MATRIX_1:def 8 , ZFMISC_1:87;
thus L742: ( ( Col (D114 , D118) ) . R3 ) = ( D117 . R3 ) by L741 , L719 , L739 , MATRIX_3:1;
end;
L743: (( len ( Col (C86 , D118) ) ) = D113 & ( len D117 ) = D113) by L720 , L726 , CARD_1:def 7;
L744: ( Col (D116 , R3) ) = ( Col (D114 , D118) ) by L732 , L734 , L611;
thus L745: ( Col (D116 , R3) ) = ( ( len D116 ) |-> ( 0. R9 ) ) by L744 , L743 , L735 , FINSEQ_1:14;
end;
L746: ( width C85 ) <= ( width D116 ) by L725 , NAT_1:11;
L747: ( Seg ( width C85 ) ) c= ( Seg ( width D116 ) ) by L746 , FINSEQ_1:5;
thus L748: ( the_rank_of ( C85 ^^ C86 ) ) = ( the_rank_of ( Segm (D116 , ( Seg ( len D116 ) ) , ( Seg ( width C85 ) )) ) ) by L747 , L727 , L483
.= ( the_rank_of C85 ) by L726 , L650;
end;
end;
theorem
L750: (for R9 being Field holds (for B83 , B84 being (Matrix of R9) holds ((( the_rank_of B83 ) = ( the_rank_of ( B83 ^^ B84 ) ) & ( len B83 ) = ( len B84 )) implies (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((R10 c= ( dom B83 ) & (for R3 being Nat holds (R3 in R10 implies ( Line (B83 , R3) ) = ( ( width B83 ) |-> ( 0. R9 ) )))) implies (for R3 being Nat holds (R3 in R10 implies ( Line (B84 , R3) ) = ( ( width B84 ) |-> ( 0. R9 ) ))))))))
proof
let R9 being Field;
let C87 , C88 being (Matrix of R9);
assume that
L751: ( the_rank_of C87 ) = ( the_rank_of ( C87 ^^ C88 ) )
and
L752: ( len C87 ) = ( len C88 );
reconsider D119 = C88 as (Matrix of ( len C87 ) , ( width C88 ) , R9) by L752 , MATRIX_2:7;
reconsider D120 = C87 as (Matrix of ( len C87 ) , ( width C87 ) , R9) by MATRIX_2:7;
set D121 = ( D120 ^^ D119 );
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L753: R10 c= ( dom C87 )
and
L754: (for R3 being Nat holds (R3 in R10 implies ( Line (C87 , R3) ) = ( ( width C87 ) |-> ( 0. R9 ) )));
let R3 being Nat;
assume that
L755: R3 in R10;
L756: ( dom C87 ) <> ( {} ) by L753 , L755;
L757: ( Seg ( len C87 ) ) <> ( {} ) by L756 , FINSEQ_1:def 3;
L758: ( len C87 ) <> ( 0 ) by L757;
L759: ( width D121 ) = ( ( width C87 ) + ( width C88 ) ) by L758 , MATRIX_1:23;
L760: ( width C87 ) <= ( width D121 ) by L759 , NAT_1:11;
L761: ( Seg ( width C87 ) ) c= ( Seg ( width D121 ) ) by L760 , FINSEQ_1:5;
L762: ( card ( Seg ( len C87 ) ) ) = ( len C87 ) by FINSEQ_1:57;
L763: ( Segm (D121 , ( Seg ( len C87 ) ) , ( Seg ( width C87 ) )) ) = C87 by L650;
L764: ( dom C87 ) = ( Seg ( len C87 ) ) by FINSEQ_1:def 3;
L765: ( ( Sgm ( Seg ( len C87 ) ) ) . R3 ) = ( ( idseq ( len C87 ) ) . R3 ) by FINSEQ_3:48
.= R3 by L753 , L755 , L764 , FINSEQ_2:49;
L766: ( card ( Seg ( width C87 ) ) ) = ( width C87 ) by FINSEQ_1:57;
L767: ( ( card ( Seg ( width C87 ) ) ) |-> ( 0. R9 ) ) = ( Line (C87 , R3) ) by L766 , L754 , L755
.= ( ( Line (D121 , R3) ) * ( Sgm ( Seg ( width C87 ) ) ) ) by L753 , L755 , L764 , L763 , L761 , L762 , L765 , MATRIX13:47;
assume L768: ( Line (C88 , R3) ) <> ( ( width C88 ) |-> ( 0. R9 ) );
consider R4 being Nat such that L769: R4 in ( Seg ( width C88 ) ) and L770: ( ( Line (C88 , R3) ) . R4 ) <> ( ( ( width C88 ) |-> ( 0. R9 ) ) . R4 ) by L768 , FINSEQ_2:119;
L771: (( len ( Line (D120 , R3) ) ) = ( width D120 ) & 1 <= R4) by L769 , FINSEQ_1:1 , MATRIX_1:def 7;
L772: ( len ( Line (D119 , R3) ) ) = ( width D119 ) by MATRIX_1:def 7;
L773: R4 <= ( len ( Line (D119 , R3) ) ) by L772 , L769 , FINSEQ_1:1;
L774: ( R4 + ( width C87 ) ) in ( Seg ( width D121 ) ) by L769 , L759 , FINSEQ_1:60;
L775: ( D121 * (R3 , ( R4 + ( width C87 ) )) ) = ( ( Line (D121 , R3) ) . ( R4 + ( width C87 ) ) ) by L774 , MATRIX_1:def 7
.= ( ( ( Line (D120 , R3) ) ^ ( Line (D119 , R3) ) ) . ( R4 + ( width C87 ) ) ) by L753 , L755 , L764 , L591
.= ( ( Line (D119 , R3) ) . R4 ) by L771 , L773 , FINSEQ_1:65;
L776: ( D121 * (R3 , ( R4 + ( width C87 ) )) ) <> ( 0. R9 ) by L775 , L769 , L770 , FINSEQ_2:57;
consider C89 , C90 being  without_zero  finite (Subset of ( NAT )) such that L777: [: C89 , C90 :] c= ( Indices D120 ) and L778: ( card C89 ) = ( card C90 ) and L779: ( card C89 ) = ( the_rank_of D120 ) and L780: ( Det ( EqSegm (D120 , C89 , C90) ) ) <> ( 0. R9 ) by MATRIX13:def 4;
L781: (C89 = ( {} ) iff C90 = ( {} )) by L778;
consider C91 , C92 being  without_zero  finite (Subset of ( NAT )) such that L782: C91 c= ( Seg ( len C87 ) ) and L783: C92 c= ( Seg ( width C87 ) ) and L784: C91 = ( ( Sgm ( Seg ( len C87 ) ) ) .: C89 ) and L785: C92 = ( ( Sgm ( Seg ( width C87 ) ) ) .: C90 ) and L786: ( card C91 ) = ( card C89 ) and L787: ( card C92 ) = ( card C90 ) and L788: ( Segm (C87 , C89 , C90) ) = ( Segm (D121 , C91 , C92) ) by L781 , L777 , L763 , MATRIX13:57;
L789: ( Segm (D121 , C91 , C92) ) = ( EqSegm (C87 , C89 , C90) ) by L778 , L788 , MATRIX13:def 3;
L790: (( dom D121 ) = ( Seg ( len D121 ) ) & ( len D121 ) = ( len C87 )) by L758 , FINSEQ_1:def 3 , MATRIX_1:23;
L791: [: C91 , ( Seg ( width C87 ) ) :] c= ( Indices D121 ) by L790 , L782 , L761 , ZFMISC_1:96;
L792: R4 >= 1 by L769 , FINSEQ_1:1;
L793: ( R4 + ( width C87 ) ) >= ( 1 + ( width C87 ) ) by L792 , XREAL_1:6;
L794: ( R4 + ( width C87 ) ) > ( width C87 ) by L793 , NAT_1:13;
L795: (not ( R4 + ( width C87 ) ) in C92) by L794 , L783 , FINSEQ_1:1;
L796: ( R4 + ( width C87 ) ) in ( ( Seg ( width D121 ) ) \ C92 ) by L795 , L774 , XBOOLE_0:def 5;
L797: (not R3 in C91)
proof
L798: ( Line (C87 , R3) ) = ( ( width C87 ) |-> ( 0. R9 ) ) by L754 , L755
.= ( ( 0. R9 ) * ( Line (C87 , R3) ) ) by FVSUM_1:58;
L799: ( Sgm ( Seg ( len C87 ) ) ) = ( idseq ( len C87 ) ) by FINSEQ_3:48
.= ( id ( Seg ( len C87 ) ) );
L800: C89 c= ( Seg ( len C87 ) ) by L777 , L778 , MATRIX13:67;
L801: ( rng ( Sgm C89 ) ) = C89 by L800 , FINSEQ_1:def 13;
assume L802: R3 in C91;
L803: R3 in C89 by L802 , L784 , L799 , L800 , FUNCT_1:92;
consider R1 being set such that L804: R1 in ( dom ( Sgm C89 ) ) and L805: ( ( Sgm C89 ) . R1 ) = R3 by L803 , L801 , FUNCT_1:def 3;
reconsider D122 = R1 as (Element of ( NAT )) by L804;
L806: ( Segm (C87 , C89 , C90) ) = ( EqSegm (C87 , C89 , C90) ) by L778 , MATRIX13:def 3;
L807: C90 c= ( Seg ( width C87 ) ) by L777 , L778 , MATRIX13:67;
L808: ( rng ( Sgm C90 ) ) = C90 by L807 , FINSEQ_1:def 13;
L809: ( dom ( Sgm C89 ) ) = ( Seg ( card C89 ) ) by L800 , FINSEQ_3:40;
L810: (( dom ( Line (C87 , R3) ) ) = ( Seg ( width C87 ) ) & ( Line (( Segm (C87 , C89 , C90) ) , D122) ) = ( ( Line (C87 , R3) ) * ( Sgm C90 ) )) by L809 , L807 , L804 , L805 , FINSEQ_2:124 , MATRIX13:47;
L811: ( Line (( Segm (C87 , C89 , C90) ) , D122) ) = ( ( 0. R9 ) * ( Line (( Segm (C87 , C89 , C90) ) , D122) ) ) by L810 , L807 , L808 , L798 , MATRIX13:87;
L812: ( ( 0. R9 ) * ( Det ( EqSegm (C87 , C89 , C90) ) ) ) = ( Det ( RLine (( EqSegm (C87 , C89 , C90) ) , D122 , ( Line (( EqSegm (C87 , C89 , C90) ) , D122) )) ) ) by L811 , L809 , L804 , L806 , MATRIX11:35
.= ( Det ( EqSegm (C87 , C89 , C90) ) ) by MATRIX11:30;
thus L813: thesis by L812 , L780 , VECTSP_1:6;
end;
L814: R3 in ( ( dom D121 ) \ C91 ) by L797 , L753 , L755 , L764 , L790 , XBOOLE_0:def 5;
L815: ( card C89 ) > ( the_rank_of ( Segm (D121 , C91 , C92) ) ) by L814 , L751 , L776 , L779 , L783 , L791 , L796 , L767 , L362;
thus L816: thesis by L815 , L780 , L789 , MATRIX13:83;
end;
begin
definition
let C93 being non  empty set;
let C94 being (FinSequence of C93);
func LineVec2Mx C94 -> (Matrix of 1 , ( len C94 ) , C93) equals 
<* C94 *>;
coherence;
func ColVec2Mx C94 -> (Matrix of ( len C94 ) , 1 , C93) equals 
( <* C94 *> @ );
coherence
proof
set D123 = <* C94 *>;
L817: ( len D123 ) = 1 by MATRIX_1:23;
L818: ( width D123 ) = ( len C94 ) by MATRIX_1:23;
L819: ( len ( D123 @ ) ) = ( width D123 ) by MATRIX_1:def 6;
per cases ;
suppose L820: ( len C94 ) = ( 0 );

L821: ( D123 @ ) = ( {} ) by L820 , L819 , MATRIX_1:23;
thus L822: thesis by L821 , L820 , MATRIX_1:13;
end;
suppose L823: ( len C94 ) > ( 0 );

L824: ( width ( D123 @ ) ) = ( len D123 ) by L823 , L818 , MATRIX_2:10;
thus L825: thesis by L824 , L817 , L818 , L819 , MATRIX_2:7;
end;
end;
end;
theorem
L828: (for R22 being non  empty set holds (for R23 being (FinSequence of R22) holds (for R27 being (Matrix of R22) holds (R27 = ( LineVec2Mx R23 ) iff (( Line (R27 , 1) ) = R23 & ( len R27 ) = 1)))))
proof
let R22 being non  empty set;
let R23 being (FinSequence of R22);
let R27 being (Matrix of R22);
thus L829: (R27 = ( LineVec2Mx R23 ) implies (( Line (R27 , 1) ) = R23 & ( len R27 ) = 1))
proof
L830: 1 in ( Seg 1 );
L831: ( Line (( LineVec2Mx R23 ) , 1) ) = ( ( LineVec2Mx R23 ) . 1 ) by L830 , MATRIX_2:8;
assume L832: R27 = ( LineVec2Mx R23 );
thus L833: thesis by L832 , L831 , FINSEQ_1:40;
end;

assume that
L834: ( Line (R27 , 1) ) = R23
and
L835: ( len R27 ) = 1;
reconsider D124 = R27 as (Matrix of 1 , ( width R27 ) , R22) by L835 , MATRIX_2:7;
L836: 1 in ( Seg 1 );
L837: ( D124 . 1 ) = R23 by L836 , L834 , MATRIX_2:8;
thus L838: thesis by L837 , L835 , FINSEQ_1:40;
end;
theorem
L839: (for R22 being non  empty set holds (for R23 being (FinSequence of R22) holds (for R27 being (Matrix of R22) holds ((( len R27 ) <> ( 0 ) or ( len R23 ) <> ( 0 )) implies (R27 = ( ColVec2Mx R23 ) iff (( Col (R27 , 1) ) = R23 & ( width R27 ) = 1))))))
proof
let R22 being non  empty set;
let R23 being (FinSequence of R22);
let R27 being (Matrix of R22);
assume L840: (( len R27 ) <> ( 0 ) or ( len R23 ) <> ( 0 ));
thus L841: (R27 = ( ColVec2Mx R23 ) implies (( Col (R27 , 1) ) = R23 & ( width R27 ) = 1))
proof
L842: ( len ( LineVec2Mx R23 ) ) = 1 by L828;
L843: ( dom ( LineVec2Mx R23 ) ) = ( Seg 1 ) by L842 , FINSEQ_1:def 3;
assume L844: R27 = ( ColVec2Mx R23 );
L845: 1 in ( Seg 1 );
thus L846: ( Col (R27 , 1) ) = ( Line (( LineVec2Mx R23 ) , 1) ) by L845 , L844 , L843 , MATRIX_2:14
.= R23 by L828;
L847: ( len R27 ) = ( len R23 ) by L844 , MATRIX_1:def 2;
thus L848: thesis by L847 , L840 , L844 , MATRIX_1:23;
end;

assume that
L849: ( Col (R27 , 1) ) = R23
and
L850: ( width R27 ) = 1;
L851: ( len R27 ) > ( 0 ) by L840 , L849 , MATRIX_1:def 8;
L852: ( len ( R27 @ ) ) = 1 by L850 , MATRIX_1:def 6;
L853: 1 in ( Seg 1 );
L854: ( Line (( R27 @ ) , 1) ) = R23 by L853 , L849 , L850 , MATRIX_2:15;
L855: ( ( LineVec2Mx R23 ) @ ) = ( ( R27 @ ) @ ) by L854 , L852 , L828
.= R27 by L850 , L851 , MATRIX_2:13;
thus L856: thesis by L855;
end;
theorem
L857: (for R9 being Field holds (for R25 being (FinSequence of R9) holds (for R26 being (FinSequence of R9) holds (( len R25 ) = ( len R26 ) implies ( ( LineVec2Mx R25 ) + ( LineVec2Mx R26 ) ) = ( LineVec2Mx ( R25 + R26 ) )))))
proof
let R9 being Field;
let R25 being (FinSequence of R9);
let R26 being (FinSequence of R9);
set D125 = ( LineVec2Mx R25 );
set D126 = ( LineVec2Mx R26 );
L858: ( len D125 ) = 1 by CARD_1:def 7;
assume L859: ( len R25 ) = ( len R26 );
reconsider D127 = R25 , D128 = R26 as (Element of ( ( len R25 ) -tuples_on (the carrier of R9) )) by L859 , FINSEQ_2:92;
L860: ( width D126 ) = ( len R25 ) by L859 , MATRIX_1:23;
set D129 = ( D127 + D128 );
set D130 = ( LineVec2Mx D129 );
L861: (( len D129 ) = ( len R25 ) & ( len D130 ) = 1) by CARD_1:def 7;
L862: ( width D130 ) = ( len D129 ) by MATRIX_1:23;
L863: ( len ( D125 + D126 ) ) = ( len D125 ) by MATRIX_3:def 3;
L864: ( width ( D125 + D126 ) ) = ( width D125 ) by MATRIX_3:def 3;
L865: ( width D125 ) = ( len R25 ) by MATRIX_1:23;
per cases ;
suppose L866: ( len R25 ) = ( 0 );

L867: ( Seg ( len R25 ) ) = ( {} ) by L866;
L868: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( Indices ( D125 + D126 ) ) implies ( ( D125 + D126 ) * (R3 , R4) ) = ( D130 * (R3 , R4) )))) by L867 , L864 , L865 , ZFMISC_1:90;
thus L869: thesis by L868 , L861 , L858 , L863 , L864 , L865 , L862 , MATRIX_1:21;
end;
suppose L870: ( len R25 ) > ( 0 );

L871: (( dom D125 ) = ( Seg 1 ) & 1 in ( Seg 1 )) by L858 , FINSEQ_1:def 3;
L872: ( len R25 ) in ( Seg ( len R25 ) ) by L870 , FINSEQ_1:3;
L873: [ 1 , ( len R25 ) ] in ( Indices D125 ) by L872 , L865 , L871 , ZFMISC_1:87;
L874: ( Line (( D125 + D126 ) , 1) ) = ( ( Line (D125 , 1) ) + ( Line (D126 , 1) ) ) by L873 , L860 , MATRIX_1:23 , MATRIX_4:59
.= ( R25 + ( Line (D126 , 1) ) ) by L828
.= ( R25 + R26 ) by L828;
thus L875: thesis by L874 , L858 , L863 , L828;
end;
end;
theorem
L877: (for R9 being Field holds (for R25 being (FinSequence of R9) holds (for R26 being (FinSequence of R9) holds (( len R25 ) = ( len R26 ) implies ( ( ColVec2Mx R25 ) + ( ColVec2Mx R26 ) ) = ( ColVec2Mx ( R25 + R26 ) )))))
proof
let R9 being Field;
let R25 being (FinSequence of R9);
let R26 being (FinSequence of R9);
set D131 = ( ColVec2Mx R25 );
set D132 = ( ColVec2Mx R26 );
L878: ( len D131 ) = ( len R25 ) by MATRIX_1:def 2;
assume L879: ( len R25 ) = ( len R26 );
reconsider D133 = R25 , D134 = R26 as (Element of ( ( len R25 ) -tuples_on (the carrier of R9) )) by L879 , FINSEQ_2:92;
L880: ( len D132 ) = ( len R25 ) by L879 , MATRIX_1:def 2;
set D135 = ( D133 + D134 );
set D136 = ( ColVec2Mx D135 );
L881: ( len D136 ) = ( len D135 ) by MATRIX_1:def 2;
L882: (( len D135 ) = ( len R25 ) & ( width ( D131 + D132 ) ) = ( width D131 )) by CARD_1:def 7 , MATRIX_3:def 3;
L883: ( len ( D131 + D132 ) ) = ( len D131 ) by MATRIX_3:def 3;
per cases ;
suppose L884: ( len R25 ) = ( 0 );

L885: ( D131 + D132 ) = ( {} ) by L884 , L883 , MATRIX_1:def 2;
thus L886: thesis by L885 , L881 , L884;
end;
suppose L887: ( len R25 ) > ( 0 );

L888: (( dom D131 ) = ( Seg ( len R25 ) ) & 1 in ( Seg 1 )) by L878 , FINSEQ_1:def 3;
L889: ( width D131 ) = 1 by L887 , MATRIX_1:23;
L890: ( len R25 ) in ( Seg ( len R25 ) ) by L887 , FINSEQ_1:3;
L891: [ ( len R25 ) , 1 ] in ( Indices D131 ) by L890 , L888 , L889 , ZFMISC_1:87;
L892: ( Col (( D131 + D132 ) , 1) ) = ( ( Col (D131 , 1) ) + ( Col (D132 , 1) ) ) by L891 , L878 , L880 , MATRIX_4:60
.= ( R25 + ( Col (D132 , 1) ) ) by L887 , L839
.= ( R25 + R26 ) by L879 , L887 , L839;
thus L893: thesis by L892 , L882 , L887 , L889 , L839;
end;
end;
theorem
L895: (for R9 being Field holds (for R11 being (Element of R9) holds (for R25 being (FinSequence of R9) holds ( R11 * ( LineVec2Mx R25 ) ) = ( LineVec2Mx ( R11 * R25 ) ))))
proof
let R9 being Field;
let R11 being (Element of R9);
let R25 being (FinSequence of R9);
L896: ( len ( R11 * ( LineVec2Mx R25 ) ) ) = ( len ( LineVec2Mx R25 ) ) by MATRIX_3:def 5;
L897: ( len ( LineVec2Mx R25 ) ) = 1 by MATRIX_1:def 2;
L898: ( Line (( R11 * ( LineVec2Mx R25 ) ) , 1) ) = ( R11 * ( Line (( LineVec2Mx R25 ) , 1) ) ) by L897 , MATRIXR1:20
.= ( R11 * R25 ) by L828;
thus L899: thesis by L898 , L897 , L896 , L828;
end;
theorem
L900: (for R9 being Field holds (for R11 being (Element of R9) holds (for R25 being (FinSequence of R9) holds ( R11 * ( ColVec2Mx R25 ) ) = ( ColVec2Mx ( R11 * R25 ) ))))
proof
let R9 being Field;
let R11 being (Element of R9);
let R25 being (FinSequence of R9);
L901: ( len R25 ) = ( len ( R11 * R25 ) ) by MATRIXR1:16;
per cases ;
suppose L902: ( len R25 ) = ( 0 );

L903: ( len ( ColVec2Mx R25 ) ) = ( len ( R11 * ( ColVec2Mx R25 ) ) ) by MATRIX_3:def 5;
L904: ( R11 * ( ColVec2Mx R25 ) ) = ( {} ) by L903 , L902 , MATRIX_1:def 2;
L905: ( len ( ColVec2Mx ( R11 * R25 ) ) ) = ( 0 ) by L901 , L902 , MATRIX_1:def 2;
thus L906: thesis by L905 , L904;
end;
suppose L907: ( len R25 ) > ( 0 );

L908: ( width ( R11 * ( ColVec2Mx R25 ) ) ) = ( width ( ColVec2Mx R25 ) ) by MATRIX_3:def 5;
L909: ( width ( ColVec2Mx R25 ) ) = 1 by L907 , MATRIX_1:23;
L910: ( Col (( R11 * ( ColVec2Mx R25 ) ) , 1) ) = ( R11 * ( Col (( ColVec2Mx R25 ) , 1) ) ) by L909 , MATRIXR1:19
.= ( R11 * R25 ) by L907 , L839;
thus L911: thesis by L910 , L901 , L907 , L909 , L908 , L839;
end;
end;
theorem
L913: (for R5 being Nat holds (for R9 being Field holds ( LineVec2Mx ( R5 |-> ( 0. R9 ) ) ) = ( 0. (R9 , 1 , R5) )))
proof
let R5 being Nat;
let R9 being Field;
reconsider D137 = ( LineVec2Mx ( R5 |-> ( 0. R9 ) ) ) as (Matrix of 1 , R5 , R9) by CARD_1:def 7;
set D138 = ( 0. (R9 , 1 , R5) );
L914:
now
L915: ( width D137 ) = R5 by MATRIX_1:23;
L916: (( dom D137 ) = ( Seg ( len D137 ) ) & ( len D137 ) = 1) by FINSEQ_1:def 3 , MATRIX_1:def 2;
let R3 being Nat;
let R4 being Nat;
assume that
L917: [ R3 , R4 ] in ( Indices D137 );
L918: R4 in ( Seg ( width D137 ) ) by L917 , ZFMISC_1:87;
L919: R3 in ( dom D137 ) by L917 , ZFMISC_1:87;
L920: R3 = 1 by L919 , L916 , FINSEQ_1:2 , TARSKI:def 1;
L921: ( Indices D138 ) = ( Indices D137 ) by MATRIX_1:26;
thus L922: ( D138 * (R3 , R4) ) = ( 0. R9 ) by L921 , L917 , MATRIX_3:1
.= ( ( R5 |-> ( 0. R9 ) ) . R4 ) by L918 , L915 , FINSEQ_2:57
.= ( ( Line (D137 , R3) ) . R4 ) by L920 , L828
.= ( D137 * (R3 , R4) ) by L918 , MATRIX_1:def 7;
end;
thus L923: thesis by L914 , MATRIX_1:27;
end;
theorem
L924: (for R5 being Nat holds (for R9 being Field holds ( ColVec2Mx ( R5 |-> ( 0. R9 ) ) ) = ( 0. (R9 , R5 , 1) )))
proof
let R5 being Nat;
let R9 being Field;
reconsider D139 = ( ColVec2Mx ( R5 |-> ( 0. R9 ) ) ) as (Matrix of R5 , 1 , R9) by CARD_1:def 7;
set D140 = ( 0. (R9 , R5 , 1) );
L925:
now
L926: ( len ( R5 |-> ( 0. R9 ) ) ) = R5 by CARD_1:def 7;
let R3 being Nat;
let R4 being Nat;
assume that
L927: [ R3 , R4 ] in ( Indices D139 );
L928: R3 in ( dom D139 ) by L927 , ZFMISC_1:87;
L929: R4 in ( Seg ( width D139 ) ) by L927 , ZFMISC_1:87;
L930: (( dom D139 ) = ( Seg ( len D139 ) ) & ( len D139 ) = ( len ( R5 |-> ( 0. R9 ) ) )) by FINSEQ_1:def 3 , MATRIX_1:def 2;
L931: ( width D139 ) = 1 by L930 , L928 , L926 , L839;
L932: R4 = 1 by L931 , L929 , FINSEQ_1:2 , TARSKI:def 1;
L933: ( Indices D140 ) = ( Indices D139 ) by MATRIX_1:26;
thus L934: ( D140 * (R3 , R4) ) = ( 0. R9 ) by L933 , L927 , MATRIX_3:1
.= ( ( R5 |-> ( 0. R9 ) ) . R3 ) by L928 , L930 , L926 , FINSEQ_2:57
.= ( ( Col (D139 , R4) ) . R3 ) by L928 , L930 , L926 , L932 , L839
.= ( D139 * (R3 , R4) ) by L928 , MATRIX_1:def 8;
end;
thus L935: thesis by L925 , MATRIX_1:27;
end;
begin
definition
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
func Solutions_of (R13 , R14) equals 
{ R17 where R17 is (Matrix of R9) : (( len R17 ) = ( width R13 ) & ( width R17 ) = ( width R14 ) & ( R13 * R17 ) = R14) };
coherence;
end;
theorem
L937: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (( Solutions_of (R13 , R14) ) is non  empty implies ( len R13 ) = ( len R14 )))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
assume L938: ( Solutions_of (R13 , R14) ) is non  empty;
consider R1 being set such that L939: R1 in ( Solutions_of (R13 , R14) ) by L938 , XBOOLE_0:def 1;
L940: (ex R17 being (Matrix of R9) st (R17 = R1 & ( len R17 ) = ( width R13 ) & ( width R17 ) = ( width R14 ) & ( R13 * R17 ) = R14)) by L939;
thus L941: thesis by L940 , MATRIX_3:def 4;
end;
theorem
L942: (for R3 being Nat holds (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for R17 being (Matrix of R9) holds ((R17 in ( Solutions_of (R13 , R14) ) & R3 in ( Seg ( width R17 ) ) & ( Col (R17 , R3) ) = ( ( len R17 ) |-> ( 0. R9 ) )) implies ( Col (R14 , R3) ) = ( ( len R14 ) |-> ( 0. R9 ) )))))))
proof
let R3 being Nat;
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let R17 being (Matrix of R9);
assume that
L943: R17 in ( Solutions_of (R13 , R14) )
and
L944: R3 in ( Seg ( width R17 ) )
and
L945: ( Col (R17 , R3) ) = ( ( len R17 ) |-> ( 0. R9 ) );
set D141 = ( ( len R14 ) |-> ( 0. R9 ) );
consider R18 being (Matrix of R9) such that L946: R17 = R18 and L947: ( len R18 ) = ( width R13 ) and L948: ( width R18 ) = ( width R14 ) and L949: ( R13 * R18 ) = R14 by L943;
L950:
now
let R5 being Nat;
assume that
L951: (1 <= R5 & R5 <= ( len R14 ));
L952: R5 in ( NAT ) by ORDINAL1:def 12;
L953: R5 in ( Seg ( len R14 ) ) by L952 , L951;
L954: ( Indices R14 ) = [: ( Seg ( len R14 ) ) , ( Seg ( width R14 ) ) :] by FINSEQ_1:def 3;
L955: [ R5 , R3 ] in ( Indices R14 ) by L954 , L944 , L946 , L948 , L953 , ZFMISC_1:87;
L956: ( R14 * (R5 , R3) ) = ( ( Line (R13 , R5) ) "*" ( Col (R18 , R3) ) ) by L955 , L947 , L949 , MATRIX_3:def 4
.= ( Sum ( ( 0. R9 ) * ( Line (R13 , R5) ) ) ) by L945 , L946 , L947 , FVSUM_1:66
.= ( ( 0. R9 ) * ( Sum ( Line (R13 , R5) ) ) ) by FVSUM_1:73
.= ( 0. R9 ) by VECTSP_1:6
.= ( D141 . R5 ) by L953 , FINSEQ_2:57;
L957: R5 in ( dom R14 ) by L953 , FINSEQ_1:def 3;
thus L958: ( ( Col (R14 , R3) ) . R5 ) = ( D141 . R5 ) by L957 , L956 , MATRIX_1:def 8;
end;
L959: (( len ( Col (R14 , R3) ) ) = ( len R14 ) & ( len D141 ) = ( len R14 )) by CARD_1:def 7;
thus L960: thesis by L959 , L950 , FINSEQ_1:14;
end;
theorem
L961: (for R9 being Field holds (for R11 being (Element of R9) holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for R17 being (Matrix of R9) holds (R17 in ( Solutions_of (R13 , R14) ) implies (( R11 * R17 ) in ( Solutions_of (R13 , ( R11 * R14 )) ) & R17 in ( Solutions_of (( R11 * R13 ) , ( R11 * R14 )) ))))))))
proof
let R9 being Field;
let R11 being (Element of R9);
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let R17 being (Matrix of R9);
L962: (( width ( R11 * R14 ) ) = ( width R14 ) & ( width ( R11 * R13 ) ) = ( width R13 )) by MATRIX_3:def 5;
assume L963: R17 in ( Solutions_of (R13 , R14) );
consider R18 being (Matrix of R9) such that L964: (R17 = R18 & ( len R18 ) = ( width R13 )) and L965: (( width R18 ) = ( width R14 ) & ( R13 * R18 ) = R14) by L963;
L966: (( len ( R11 * R17 ) ) = ( width R13 ) & ( width ( R11 * R17 ) ) = ( width R18 )) by L964 , MATRIX_3:def 5;
L967: (( R13 * ( R11 * R17 ) ) = ( R11 * ( R13 * R17 ) ) & ( ( R11 * R13 ) * R17 ) = ( R11 * ( R13 * R17 ) )) by L964 , L1 , MATRIXR1:22;
thus L968: thesis by L967 , L964 , L965 , L966 , L962;
end;
theorem
L969: (for R9 being Field holds (for R11 being (Element of R9) holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (R11 <> ( 0. R9 ) implies ( Solutions_of (R13 , R14) ) = ( Solutions_of (( R11 * R13 ) , ( R11 * R14 )) ))))))
proof
let R9 being Field;
let R11 being (Element of R9);
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
assume L970: R11 <> ( 0. R9 );
thus L971: ( Solutions_of (R13 , R14) ) c= ( Solutions_of (( R11 * R13 ) , ( R11 * R14 )) )
proof
let R1 being set;
assume that
L972: R1 in ( Solutions_of (R13 , R14) );
L973: (ex R17 being (Matrix of R9) st (R1 = R17 & ( len R17 ) = ( width R13 ) & ( width R17 ) = ( width R14 ) & ( R13 * R17 ) = R14)) by L972;
thus L974: thesis by L973 , L972 , L961;
end;

L975: ( ( R11 " ) * ( R11 * R13 ) ) = ( ( ( R11 " ) * R11 ) * R13 ) by L19
.= ( ( 1_ R9 ) * R13 ) by L970 , VECTSP_1:def 10
.= R13 by L19;
L976: ( ( R11 " ) * ( R11 * R14 ) ) = ( ( ( R11 " ) * R11 ) * R14 ) by L19
.= ( ( 1_ R9 ) * R14 ) by L970 , VECTSP_1:def 10
.= R14 by L19;
let R1 being set;
assume that
L977: R1 in ( Solutions_of (( R11 * R13 ) , ( R11 * R14 )) );
L978: (ex R17 being (Matrix of R9) st (R1 = R17 & ( len R17 ) = ( width ( R11 * R13 ) ) & ( width R17 ) = ( width ( R11 * R14 ) ) & ( ( R11 * R13 ) * R17 ) = ( R11 * R14 ))) by L977;
thus L979: thesis by L978 , L977 , L975 , L976 , L961;
end;
L980: (for B85 being non  empty set holds (for B86 , B87 being (Matrix of B85) holds ((( len B86 ) = ( len B87 ) & ( width B86 ) = ( 0 ) & ( width B87 ) = ( 0 )) implies B86 = B87)))
proof
let C95 being non  empty set;
let C96 , C97 being (Matrix of C95);
assume that
L981: ( len C96 ) = ( len C97 )
and
L982: ( width C96 ) = ( 0 )
and
L983: ( width C97 ) = ( 0 );
L984: ( Seg ( width C96 ) ) = ( {} ) by L982;
L985: ( Indices C96 ) = ( {} ) by L984 , ZFMISC_1:90;
L986: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( Indices C96 ) implies ( C96 * (R3 , R4) ) = ( C97 * (R3 , R4) )))) by L985;
thus L987: thesis by L986 , L981 , L982 , L983 , MATRIX_1:21;
end;
theorem
L988: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R15 being (Matrix of R9) holds (for R16 being (Matrix of R9) holds (for R18 being (Matrix of R9) holds (for R19 being (Matrix of R9) holds ((R18 in ( Solutions_of (R13 , R15) ) & R19 in ( Solutions_of (R13 , R16) ) & ( width R15 ) = ( width R16 )) implies ( R18 + R19 ) in ( Solutions_of (R13 , ( R15 + R16 )) ))))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R15 being (Matrix of R9);
let R16 being (Matrix of R9);
let R18 being (Matrix of R9);
let R19 being (Matrix of R9);
assume that
L989: R18 in ( Solutions_of (R13 , R15) )
and
L990: R19 in ( Solutions_of (R13 , R16) )
and
L991: ( width R15 ) = ( width R16 );
L992: (ex B88 being (Matrix of R9) st (B88 = R18 & ( len B88 ) = ( width R13 ) & ( width B88 ) = ( width R15 ) & ( R13 * B88 ) = R15)) by L989;
L993: ( width ( R18 + R19 ) ) = ( width R18 ) by MATRIX_3:def 3;
L994: ( len ( R18 + R19 ) ) = ( len R18 ) by MATRIX_3:def 3;
L995: (ex B89 being (Matrix of R9) st (B89 = R19 & ( len B89 ) = ( width R13 ) & ( width B89 ) = ( width R16 ) & ( R13 * B89 ) = R16)) by L990;
L996:
now
per cases ;
suppose L997: ( len R13 ) = ( 0 );

L998: ( len ( R13 * R18 ) ) = ( 0 ) by L997 , L992 , MATRIX_3:def 4;
L999: ( len ( ( R13 * R18 ) + ( R13 * R19 ) ) ) = ( 0 ) by L998 , MATRIX_3:def 3;
L1000: ( len ( R13 * ( R18 + R19 ) ) ) = ( 0 ) by L992 , L994 , L997 , MATRIX_3:def 4;
thus L1001: ( R13 * ( R18 + R19 ) ) = ( ( R13 * R18 ) + ( R13 * R19 ) ) by L1000 , L999 , CARD_2:64;
end;
suppose L1002: ( len R18 ) = ( 0 );

L1003: ( width ( R13 * R18 ) ) = ( 0 ) by L1002 , L992 , MATRIX_1:def 3;
L1004: (( width ( ( R13 * R18 ) + ( R13 * R19 ) ) ) = ( 0 ) & ( width ( R13 * ( R18 + R19 ) ) ) = ( 0 )) by L1003 , L992 , L994 , L993 , MATRIX_3:def 3 , MATRIX_3:def 4;
L1005: ( len ( R13 * R18 ) ) = ( len R13 ) by L992 , MATRIX_3:def 4;
L1006: ( len ( ( R13 * R18 ) + ( R13 * R19 ) ) ) = ( len R13 ) by L1005 , MATRIX_3:def 3;
L1007: ( len ( R13 * ( R18 + R19 ) ) ) = ( len R13 ) by L992 , L994 , MATRIX_3:def 4;
thus L1008: ( R13 * ( R18 + R19 ) ) = ( ( R13 * R18 ) + ( R13 * R19 ) ) by L1007 , L1006 , L1004 , L980;
end;
suppose L1009: (( len R13 ) > ( 0 ) & ( len R18 ) > ( 0 ));

thus L1010: ( R13 * ( R18 + R19 ) ) = ( ( R13 * R18 ) + ( R13 * R19 ) ) by L1009 , L991 , L992 , L995 , MATRIX_4:62;
end;
end;
L1012: ( width ( R15 + R16 ) ) = ( width R15 ) by MATRIX_3:def 3;
thus L1013: thesis by L1012 , L992 , L995 , L994 , L993 , L996;
end;
theorem
L1014: (for R3 being Nat holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (for R17 being (Matrix of R9) holds (for R20 being (Matrix of R7 , R8 , R9) holds (for R21 being (Matrix of R7 , R5 , R9) holds (R17 in ( Solutions_of (R20 , R21) ) implies R17 in ( Solutions_of (( RLine (R20 , R3 , ( R11 * ( Line (R20 , R3) ) )) ) , ( RLine (R21 , R3 , ( R11 * ( Line (R21 , R3) ) )) )) )))))))))))
proof
let R3 being Nat;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
let R17 being (Matrix of R9);
let R20 being (Matrix of R7 , R8 , R9);
let R21 being (Matrix of R7 , R5 , R9);
set D142 = ( Line (R20 , R3) );
set D143 = ( Line (R21 , R3) );
set D144 = ( RLine (R20 , R3 , ( R11 * D142 )) );
set D145 = ( RLine (R21 , R3 , ( R11 * D143 )) );
L1015: ( Indices D145 ) = ( Indices R21 ) by MATRIX_1:26;
L1016: (( len ( R11 * D143 ) ) = ( len D143 ) & ( len D143 ) = ( width R21 )) by CARD_1:def 7 , MATRIXR1:16;
L1017: ( width D145 ) = ( width R21 ) by L1016 , MATRIX11:def 3;
L1018: (( len ( R11 * D142 ) ) = ( len D142 ) & ( len D142 ) = ( width R20 )) by CARD_1:def 7 , MATRIXR1:16;
L1019: ( len D144 ) = ( len R20 ) by L1018 , MATRIX11:def 3;
assume L1020: R17 in ( Solutions_of (R20 , R21) );
consider C98 being (Matrix of R9) such that L1021: R17 = C98 and L1022: ( len C98 ) = ( width R20 ) and L1023: ( width C98 ) = ( width R21 ) and L1024: ( R20 * C98 ) = R21 by L1020;
set D146 = ( D144 * C98 );
L1025: ( width D144 ) = ( width R20 ) by L1018 , MATRIX11:def 3;
L1026: (( len D146 ) = ( len D144 ) & ( width D146 ) = ( width C98 )) by L1025 , L1022 , MATRIX_3:def 4;
L1027: ( len R20 ) = ( len R21 ) by L1020 , L937;
L1028: ( dom R21 ) = ( Seg ( len D144 ) ) by L1027 , L1019 , FINSEQ_1:def 3;
L1029: ( Indices D146 ) = ( Indices R21 ) by L1028 , L1023 , L1026 , FINSEQ_1:def 3;
L1030:
now
L1031: ( len R21 ) = R7 by MATRIX_1:def 2;
L1032: ( dom R21 ) = ( Seg R7 ) by L1031 , FINSEQ_1:def 3;
let R4 being Nat;
let R5 being Nat;
assume that
L1033: [ R4 , R5 ] in ( Indices D145 );
L1034: R4 in ( dom R21 ) by L1015 , L1033 , ZFMISC_1:87;
L1035: R5 in ( Seg ( width R21 ) ) by L1015 , L1033 , ZFMISC_1:87;
L1036: ( R21 * (R3 , R5) ) = ( D143 . R5 ) by L1035 , MATRIX_1:def 7;
reconsider D147 = ( D143 . R5 ) as (Element of R9) by L1036;
L1037: ( R21 * (R4 , R5) ) = ( ( Line (R20 , R4) ) "*" ( Col (C98 , R5) ) ) by L1022 , L1024 , L1015 , L1033 , MATRIX_3:def 4;
L1038:
now
per cases ;
suppose L1039: R4 = R3;

L1040: ( Line (D144 , R3) ) = ( R11 * D142 ) by L1039 , L1018 , L1034 , L1032 , MATRIX11:28;
thus L1041: ( D146 * (R4 , R5) ) = ( ( R11 * D142 ) "*" ( Col (C98 , R5) ) ) by L1040 , L1022 , L1025 , L1029 , L1015 , L1033 , L1039 , MATRIX_3:def 4
.= ( Sum ( R11 * ( mlt (D142 , ( Col (C98 , R5) )) ) ) ) by L1022 , FVSUM_1:68
.= ( R11 * ( Sum ( mlt (D142 , ( Col (C98 , R5) )) ) ) ) by FVSUM_1:73
.= ( R11 * D147 ) by L1035 , L1037 , L1039 , MATRIX_1:def 7
.= ( ( R11 * D143 ) . R5 ) by L1035 , FVSUM_1:51
.= ( D145 * (R4 , R5) ) by L1016 , L1015 , L1033 , L1039 , MATRIX11:def 3;
end;
suppose L1042: R4 <> R3;

L1043: ( Line (D144 , R4) ) = ( Line (R20 , R4) ) by L1042 , L1034 , L1032 , MATRIX11:28;
thus L1044: ( D146 * (R4 , R5) ) = ( ( Line (R20 , R4) ) "*" ( Col (C98 , R5) ) ) by L1043 , L1022 , L1025 , L1029 , L1015 , L1033 , MATRIX_3:def 4
.= ( R21 * (R4 , R5) ) by L1022 , L1024 , L1015 , L1033 , MATRIX_3:def 4
.= ( D145 * (R4 , R5) ) by L1016 , L1015 , L1033 , L1042 , MATRIX11:def 3;
end;
end;
thus L1046: ( D145 * (R4 , R5) ) = ( D146 * (R4 , R5) ) by L1038;
end;
L1047: ( len D145 ) = ( len R21 ) by L1016 , MATRIX11:def 3;
L1048: D146 = D145 by L1047 , L1023 , L1027 , L1019 , L1017 , L1026 , L1030 , MATRIX_1:21;
thus L1049: thesis by L1048 , L1021 , L1022 , L1023 , L1025 , L1017;
end;
L1050: (for R3 being Nat holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (for R20 being (Matrix of R7 , R8 , R9) holds (for R21 being (Matrix of R7 , R5 , R9) holds (R11 <> ( 0. R9 ) implies ( Solutions_of (R20 , R21) ) = ( Solutions_of (( RLine (R20 , R3 , ( R11 * ( Line (R20 , R3) ) )) ) , ( RLine (R21 , R3 , ( R11 * ( Line (R21 , R3) ) )) )) ))))))))))
proof
let R3 being Nat;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
let R20 being (Matrix of R7 , R8 , R9);
let R21 being (Matrix of R7 , R5 , R9);
assume L1051: R11 <> ( 0. R9 );
set D148 = ( RLine (R21 , R3 , ( R11 * ( Line (R21 , R3) ) )) );
set D149 = ( RLine (R20 , R3 , ( R11 * ( Line (R20 , R3) ) )) );
thus L1052: ( Solutions_of (R20 , R21) ) c= ( Solutions_of (D149 , D148) )
proof
let R1 being set;
assume that
L1053: R1 in ( Solutions_of (R20 , R21) );
L1054: (ex R17 being (Matrix of R9) st (R1 = R17 & ( len R17 ) = ( width R20 ) & ( width R17 ) = ( width R21 ) & ( R20 * R17 ) = R21)) by L1053;
thus L1055: thesis by L1054 , L1053 , L1014;
end;

let R1 being set;
assume that
L1056: R1 in ( Solutions_of (D149 , D148) );
per cases ;
suppose L1057: (not R3 in ( Seg R7 ));

L1058: ( len R20 ) = R7 by MATRIX_1:def 2;
L1059: (( len R21 ) = R7 & D149 = R20) by L1058 , L1057 , MATRIX13:40 , MATRIX_1:def 2;
thus L1060: thesis by L1059 , L1056 , L1057 , MATRIX13:40;
end;
suppose L1061: R3 in ( Seg R7 );

reconsider D150 = ( R11 * ( Line (R20 , R3) ) ) , D151 = ( R11 * ( Line (R21 , R3) ) ) , D152 = ( ( R11 " ) * ( Line (D149 , R3) ) ) , D153 = ( ( R11 " ) * ( Line (D148 , R3) ) ) as (Element of ( (the carrier of R9) * )) by FINSEQ_1:def 11;
set D154 = ( RLine (D148 , R3 , ( ( R11 " ) * ( Line (D148 , R3) ) )) );
set D155 = ( RLine (D149 , R3 , ( ( R11 " ) * ( Line (D149 , R3) ) )) );
L1062: (ex R17 being (Matrix of R9) st (R1 = R17 & ( len R17 ) = ( width D149 ) & ( width R17 ) = ( width D148 ) & ( D149 * R17 ) = D148)) by L1056;
L1063: ( len ( R11 * ( Line (R20 , R3) ) ) ) = ( width R20 ) by CARD_1:def 7;
L1064: ( ( R11 " ) * ( Line (D149 , R3) ) ) = ( ( R11 " ) * ( R11 * ( Line (R20 , R3) ) ) ) by L1063 , L1061 , MATRIX11:28
.= ( ( ( R11 " ) * R11 ) * ( Line (R20 , R3) ) ) by FVSUM_1:54
.= ( ( 1_ R9 ) * ( Line (R20 , R3) ) ) by L1051 , VECTSP_1:def 10
.= ( Line (R20 , R3) ) by FVSUM_1:57;
L1065: ( len ( R11 * ( Line (R21 , R3) ) ) ) = ( width R21 ) by CARD_1:def 7;
L1066: ( ( R11 " ) * ( Line (D148 , R3) ) ) = ( ( R11 " ) * ( R11 * ( Line (R21 , R3) ) ) ) by L1065 , L1061 , MATRIX11:28
.= ( ( ( R11 " ) * R11 ) * ( Line (R21 , R3) ) ) by FVSUM_1:54
.= ( ( 1_ R9 ) * ( Line (R21 , R3) ) ) by L1051 , VECTSP_1:def 10
.= ( Line (R21 , R3) ) by FVSUM_1:57;
L1067: ( width D148 ) = ( width R21 ) by L1065 , MATRIX11:def 3;
L1068: ( len ( ( R11 " ) * ( Line (D148 , R3) ) ) ) = ( width D148 ) by CARD_1:def 7;
L1069: D154 = ( Replace (D148 , R3 , D153) ) by L1068 , MATRIX11:29
.= ( Replace (( Replace (R21 , R3 , D151) ) , R3 , D153) ) by L1065 , MATRIX11:29
.= ( Replace (R21 , R3 , D153) ) by FUNCT_7:34
.= ( RLine (R21 , R3 , ( Line (R21 , R3) )) ) by L1068 , L1067 , L1066 , MATRIX11:29
.= R21 by MATRIX11:30;
L1070: ( width D149 ) = ( width R20 ) by L1063 , MATRIX11:def 3;
L1071: ( len ( ( R11 " ) * ( Line (D149 , R3) ) ) ) = ( width D149 ) by CARD_1:def 7;
L1072: D155 = ( Replace (D149 , R3 , D152) ) by L1071 , MATRIX11:29
.= ( Replace (( Replace (R20 , R3 , D150) ) , R3 , D152) ) by L1063 , MATRIX11:29
.= ( Replace (R20 , R3 , D152) ) by FUNCT_7:34
.= ( RLine (R20 , R3 , ( Line (R20 , R3) )) ) by L1071 , L1070 , L1064 , MATRIX11:29
.= R20 by MATRIX11:30;
thus L1073: thesis by L1072 , L1056 , L1062 , L1069 , L1014;
end;
end;
theorem
L1075: (for R3 being Nat holds (for R4 being Nat holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (for R17 being (Matrix of R9) holds (for R20 being (Matrix of R7 , R8 , R9) holds (for R21 being (Matrix of R7 , R5 , R9) holds ((R17 in ( Solutions_of (R20 , R21) ) & R4 in ( Seg R7 )) implies R17 in ( Solutions_of (( RLine (R20 , R3 , ( ( Line (R20 , R3) ) + ( R11 * ( Line (R20 , R4) ) ) )) ) , ( RLine (R21 , R3 , ( ( Line (R21 , R3) ) + ( R11 * ( Line (R21 , R4) ) ) )) )) ))))))))))))
proof
let R3 being Nat;
let R4 being Nat;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
let R17 being (Matrix of R9);
let R20 being (Matrix of R7 , R8 , R9);
let R21 being (Matrix of R7 , R5 , R9);
assume that
L1076: R17 in ( Solutions_of (R20 , R21) )
and
L1077: R4 in ( Seg R7 );
consider R18 being (Matrix of R9) such that L1078: R17 = R18 and L1079: ( len R18 ) = ( width R20 ) and L1080: ( width R18 ) = ( width R21 ) and L1081: ( R20 * R18 ) = R21 by L1076;
set D156 = ( Line (R20 , R4) );
set D157 = ( Line (R20 , R3) );
set D158 = ( RLine (R20 , R3 , ( D157 + ( R11 * D156 ) )) );
L1082: ( len ( D157 + ( R11 * D156 ) ) ) = ( width R20 ) by CARD_1:def 7;
L1083: ( len D158 ) = ( len R20 ) by L1082 , MATRIX11:def 3;
set D159 = ( D158 * R18 );
L1084: ( width D158 ) = ( width R20 ) by L1082 , MATRIX11:def 3;
L1085: (( len D159 ) = ( len D158 ) & ( width D159 ) = ( width R18 )) by L1084 , L1079 , MATRIX_3:def 4;
L1086: ( len R20 ) = ( len R21 ) by L1076 , L937;
L1087: ( dom R21 ) = ( Seg ( len D158 ) ) by L1086 , L1083 , FINSEQ_1:def 3;
L1088: ( Indices D159 ) = ( Indices R21 ) by L1087 , L1080 , L1085 , FINSEQ_1:def 3;
set D160 = ( Line (R21 , R4) );
set D161 = ( Line (R21 , R3) );
set D162 = ( RLine (R21 , R3 , ( D161 + ( R11 * D160 ) )) );
L1089: ( Indices D162 ) = ( Indices R21 ) by MATRIX_1:26;
L1090: ( len ( D161 + ( R11 * D160 ) ) ) = ( width R21 ) by CARD_1:def 7;
L1091: ( width D162 ) = ( width R21 ) by L1090 , MATRIX11:def 3;
L1092: (( len ( R11 * D156 ) ) = ( width R20 ) & ( len D157 ) = ( width R20 )) by CARD_1:def 7;
L1093:
now
L1094: ( rng ( R11 * D160 ) ) c= (the carrier of R9) by FINSEQ_1:def 4;
let C99 , C100 being Nat;
assume that
L1095: [ C99 , C100 ] in ( Indices D162 );
L1096: C99 in ( dom R21 ) by L1089 , L1095 , ZFMISC_1:87;
L1097: ( R21 * (C99 , C100) ) = ( ( Line (R20 , C99) ) "*" ( Col (R18 , C100) ) ) by L1079 , L1081 , L1089 , L1095 , MATRIX_3:def 4;
reconsider D163 = ( Col (R18 , C100) ) as (Element of ( ( width R20 ) -tuples_on (the carrier of R9) )) by L1079;
L1098: ( len ( Col (R18 , C100) ) ) = ( width R20 ) by L1079 , MATRIX_1:def 8;
L1099: C100 in ( Seg ( width R21 ) ) by L1089 , L1095 , ZFMISC_1:87;
L1100: (( R21 * (C99 , C100) ) = ( ( Line (R21 , C99) ) . C100 ) & ( R21 * (R4 , C100) ) = ( D160 . C100 )) by L1099 , MATRIX_1:def 7;
reconsider D164 = ( ( Line (R21 , C99) ) . C100 ) , D165 = ( D160 . C100 ) as (Element of (the carrier of R9)) by L1100;
L1101: C100 in ( dom ( R11 * D160 ) ) by L1099 , FINSEQ_2:124;
L1102: ( ( R11 * D160 ) . C100 ) in ( rng ( R11 * D160 ) ) by L1101 , FUNCT_1:def 3;
reconsider D166 = ( ( R11 * ( Line (R21 , R4) ) ) . C100 ) as (Element of R9) by L1102 , L1094;
L1103: ( len R21 ) = R7 by MATRIX_1:def 2;
L1104: ( dom R21 ) = ( Seg R7 ) by L1103 , FINSEQ_1:def 3;
L1105: [ R4 , C100 ] in ( Indices R21 ) by L1104 , L1077 , L1099 , ZFMISC_1:87;
L1106: ( R21 * (R4 , C100) ) = ( D156 "*" ( Col (R18 , C100) ) ) by L1105 , L1079 , L1081 , MATRIX_3:def 4;
L1107:
now
per cases ;
suppose L1108: C99 = R3;

L1109: ( Line (D158 , C99) ) = ( D157 + ( R11 * D156 ) ) by L1108 , L1082 , L1096 , L1104 , MATRIX11:28;
thus L1110: ( D159 * (C99 , C100) ) = ( ( D157 + ( R11 * D156 ) ) "*" D163 ) by L1109 , L1079 , L1084 , L1088 , L1089 , L1095 , MATRIX_3:def 4
.= ( Sum ( ( mlt (D157 , D163) ) + ( mlt (( R11 * D156 ) , D163) ) ) ) by L1092 , L1098 , MATRIX_4:56
.= ( Sum ( ( mlt (D157 , D163) ) + ( R11 * ( mlt (D156 , D163) ) ) ) ) by FVSUM_1:68
.= ( ( Sum ( mlt (D157 , D163) ) ) + ( Sum ( R11 * ( mlt (D156 , D163) ) ) ) ) by FVSUM_1:76
.= ( ( R21 * (C99 , C100) ) + ( R11 * ( R21 * (R4 , C100) ) ) ) by L1097 , L1106 , L1108 , FVSUM_1:73
.= ( D164 + ( R11 * ( R21 * (R4 , C100) ) ) ) by L1099 , MATRIX_1:def 7
.= ( D164 + ( R11 * D165 ) ) by L1099 , MATRIX_1:def 7
.= ( D164 + D166 ) by L1099 , FVSUM_1:51
.= ( ( D161 + ( R11 * D160 ) ) . C100 ) by L1099 , L1108 , FVSUM_1:18
.= ( D162 * (C99 , C100) ) by L1090 , L1089 , L1095 , L1108 , MATRIX11:def 3;
end;
suppose L1111: C99 <> R3;

L1112: ( Line (D158 , C99) ) = ( Line (R20 , C99) ) by L1111 , L1096 , L1104 , MATRIX11:28;
thus L1113: ( D159 * (C99 , C100) ) = ( ( Line (R20 , C99) ) "*" ( Col (R18 , C100) ) ) by L1112 , L1079 , L1084 , L1088 , L1089 , L1095 , MATRIX_3:def 4
.= ( R21 * (C99 , C100) ) by L1079 , L1081 , L1089 , L1095 , MATRIX_3:def 4
.= ( D162 * (C99 , C100) ) by L1090 , L1089 , L1095 , L1111 , MATRIX11:def 3;
end;
end;
thus L1115: ( D162 * (C99 , C100) ) = ( D159 * (C99 , C100) ) by L1107;
end;
L1116: ( len D162 ) = ( len R21 ) by L1090 , MATRIX11:def 3;
L1117: D159 = D162 by L1116 , L1080 , L1086 , L1083 , L1091 , L1085 , L1093 , MATRIX_1:21;
thus L1118: thesis by L1117 , L1078 , L1079 , L1080 , L1084 , L1091;
end;
L1119: (for R3 being Nat holds (for R4 being Nat holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (for R20 being (Matrix of R7 , R8 , R9) holds (for R21 being (Matrix of R7 , R5 , R9) holds ((R4 in ( Seg R7 ) & R3 <> R4) implies ( Solutions_of (R20 , R21) ) = ( Solutions_of (( RLine (R20 , R3 , ( ( Line (R20 , R3) ) + ( R11 * ( Line (R20 , R4) ) ) )) ) , ( RLine (R21 , R3 , ( ( Line (R21 , R3) ) + ( R11 * ( Line (R21 , R4) ) ) )) )) )))))))))))
proof
let R3 being Nat;
let R4 being Nat;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
let R20 being (Matrix of R7 , R8 , R9);
let R21 being (Matrix of R7 , R5 , R9);
assume that
L1120: R4 in ( Seg R7 )
and
L1121: R3 <> R4;
set D167 = ( Line (R21 , R4) );
set D168 = ( Line (R20 , R4) );
set D169 = ( RLine (R20 , R3 , ( ( Line (R20 , R3) ) + ( R11 * D168 ) )) );
set D170 = ( RLine (R21 , R3 , ( ( Line (R21 , R3) ) + ( R11 * D167 ) )) );
thus L1122: ( Solutions_of (R20 , R21) ) c= ( Solutions_of (D169 , D170) )
proof
let R1 being set;
assume that
L1123: R1 in ( Solutions_of (R20 , R21) );
L1124: (ex R17 being (Matrix of R9) st (R1 = R17 & ( len R17 ) = ( width R20 ) & ( width R17 ) = ( width R21 ) & ( R20 * R17 ) = R21)) by L1123;
thus L1125: thesis by L1124 , L1120 , L1123 , L1075;
end;

let R1 being set;
assume that
L1126: R1 in ( Solutions_of (D169 , D170) );
per cases ;
suppose L1127: (not R3 in ( Seg R7 ));

L1128: ( len R20 ) = R7 by MATRIX_1:def 2;
L1129: (( len R21 ) = R7 & D169 = R20) by L1128 , L1127 , MATRIX13:40 , MATRIX_1:def 2;
thus L1130: thesis by L1129 , L1126 , L1127 , MATRIX13:40;
end;
suppose L1131: R3 in ( Seg R7 );

reconsider D171 = ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) , D172 = ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) , D173 = ( ( Line (D169 , R3) ) + ( ( - R11 ) * ( Line (D169 , R4) ) ) ) , D174 = ( ( Line (D170 , R3) ) + ( ( - R11 ) * ( Line (D170 , R4) ) ) ) as (Element of ( (the carrier of R9) * )) by FINSEQ_1:def 11;
set D175 = ( RLine (D170 , R3 , ( ( Line (D170 , R3) ) + ( ( - R11 ) * ( Line (D170 , R4) ) ) )) );
set D176 = ( RLine (D169 , R3 , ( ( Line (D169 , R3) ) + ( ( - R11 ) * ( Line (D169 , R4) ) ) )) );
L1132: (ex R17 being (Matrix of R9) st (R1 = R17 & ( len R17 ) = ( width D169 ) & ( width R17 ) = ( width D170 ) & ( D169 * R17 ) = D170)) by L1126;
L1133: ( Line (D170 , R4) ) = D167 by L1120 , L1121 , MATRIX11:28;
L1134: ( len ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) ) = ( width R21 ) by CARD_1:def 7;
L1135: ( width D170 ) = ( width R21 ) by L1134 , MATRIX11:def 3;
L1136: ( Line (D170 , R3) ) = ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) by L1131 , L1134 , MATRIX11:28;
L1137: ( ( Line (D170 , R3) ) + ( ( - R11 ) * ( Line (D170 , R4) ) ) ) = ( ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) + ( ( - ( ( 1_ R9 ) * R11 ) ) * D167 ) ) by L1136 , L1133 , VECTSP_1:def 8
.= ( ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) + ( ( ( - ( 1_ R9 ) ) * R11 ) * D167 ) ) by VECTSP_1:9
.= ( ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) + ( ( - ( 1_ R9 ) ) * ( R11 * D167 ) ) ) by FVSUM_1:54
.= ( ( ( Line (R21 , R3) ) + ( R11 * D167 ) ) + ( - ( R11 * D167 ) ) ) by FVSUM_1:59
.= ( ( Line (R21 , R3) ) + ( ( R11 * D167 ) + ( - ( R11 * D167 ) ) ) ) by FINSEQOP:28
.= ( ( Line (R21 , R3) ) + ( ( width R21 ) |-> ( 0. R9 ) ) ) by FVSUM_1:26
.= ( Line (R21 , R3) ) by FVSUM_1:21;
L1138: ( len ( ( Line (D170 , R3) ) + ( ( - R11 ) * ( Line (D170 , R4) ) ) ) ) = ( width D170 ) by CARD_1:def 7;
L1139: D175 = ( Replace (D170 , R3 , D174) ) by L1138 , MATRIX11:29
.= ( Replace (( Replace (R21 , R3 , D172) ) , R3 , D174) ) by L1134 , MATRIX11:29
.= ( Replace (R21 , R3 , D174) ) by FUNCT_7:34
.= ( RLine (R21 , R3 , ( ( Line (D170 , R3) ) + ( ( - R11 ) * ( Line (D170 , R4) ) ) )) ) by L1138 , L1135 , MATRIX11:29
.= R21 by L1137 , MATRIX11:30;
L1140: ( Line (D169 , R4) ) = D168 by L1120 , L1121 , MATRIX11:28;
L1141: ( len ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) ) = ( width R20 ) by CARD_1:def 7;
L1142: ( width D169 ) = ( width R20 ) by L1141 , MATRIX11:def 3;
L1143: ( Line (D169 , R3) ) = ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) by L1131 , L1141 , MATRIX11:28;
L1144: ( ( Line (D169 , R3) ) + ( ( - R11 ) * ( Line (D169 , R4) ) ) ) = ( ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) + ( ( - ( ( 1_ R9 ) * R11 ) ) * D168 ) ) by L1143 , L1140 , VECTSP_1:def 8
.= ( ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) + ( ( ( - ( 1_ R9 ) ) * R11 ) * D168 ) ) by VECTSP_1:9
.= ( ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) + ( ( - ( 1_ R9 ) ) * ( R11 * D168 ) ) ) by FVSUM_1:54
.= ( ( ( Line (R20 , R3) ) + ( R11 * D168 ) ) + ( - ( R11 * D168 ) ) ) by FVSUM_1:59
.= ( ( Line (R20 , R3) ) + ( ( R11 * D168 ) + ( - ( R11 * D168 ) ) ) ) by FINSEQOP:28
.= ( ( Line (R20 , R3) ) + ( ( width R20 ) |-> ( 0. R9 ) ) ) by FVSUM_1:26
.= ( Line (R20 , R3) ) by FVSUM_1:21;
L1145: ( len ( ( Line (D169 , R3) ) + ( ( - R11 ) * ( Line (D169 , R4) ) ) ) ) = ( width D169 ) by CARD_1:def 7;
L1146: D176 = ( Replace (D169 , R3 , D173) ) by L1145 , MATRIX11:29
.= ( Replace (( Replace (R20 , R3 , D171) ) , R3 , D173) ) by L1141 , MATRIX11:29
.= ( Replace (R20 , R3 , D173) ) by FUNCT_7:34
.= ( RLine (R20 , R3 , ( ( Line (D169 , R3) ) + ( ( - R11 ) * ( Line (D169 , R4) ) ) )) ) by L1145 , L1142 , MATRIX11:29
.= R20 by L1144 , MATRIX11:30;
thus L1147: thesis by L1146 , L1120 , L1126 , L1132 , L1139 , L1075;
end;
end;
theorem
L1149: (for R3 being Nat holds (for R4 being Nat holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (for R20 being (Matrix of R7 , R8 , R9) holds (for R21 being (Matrix of R7 , R5 , R9) holds ((R4 in ( Seg R7 ) & (R3 = R4 implies R11 <> ( - ( 1_ R9 ) ))) implies ( Solutions_of (R20 , R21) ) = ( Solutions_of (( RLine (R20 , R3 , ( ( Line (R20 , R3) ) + ( R11 * ( Line (R20 , R4) ) ) )) ) , ( RLine (R21 , R3 , ( ( Line (R21 , R3) ) + ( R11 * ( Line (R21 , R4) ) ) )) )) )))))))))))
proof
let R3 being Nat;
let R4 being Nat;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
let R20 being (Matrix of R7 , R8 , R9);
let R21 being (Matrix of R7 , R5 , R9);
assume that
L1150: R4 in ( Seg R7 )
and
L1151: (R3 = R4 implies R11 <> ( - ( 1_ R9 ) ));
per cases ;
suppose L1152: R3 <> R4;

thus L1153: thesis by L1152 , L1150 , L1119;
end;
suppose L1154: R3 = R4;

L1155: ( ( 1_ R9 ) + R11 ) <> ( 0. R9 )
proof
assume L1156: ( ( 1_ R9 ) + R11 ) = ( 0. R9 );
L1157: ( - ( 1. R9 ) ) = ( ( - ( 1. R9 ) ) + ( ( 1_ R9 ) + R11 ) ) by L1156 , RLVECT_1:def 4
.= ( ( ( - ( 1. R9 ) ) + ( 1_ R9 ) ) + R11 ) by RLVECT_1:def 3
.= ( ( 0. R9 ) + R11 ) by VECTSP_1:19
.= R11 by RLVECT_1:def 4;
thus L1158: thesis by L1157 , L1151 , L1154;
end;
set D177 = ( Line (R21 , R3) );
set D178 = ( Line (R20 , R3) );
L1159: ( D177 + ( R11 * D177 ) ) = ( ( ( 1_ R9 ) * D177 ) + ( R11 * D177 ) ) by FVSUM_1:57
.= ( ( ( 1_ R9 ) + R11 ) * D177 ) by FVSUM_1:55;
L1160: ( D178 + ( R11 * D178 ) ) = ( ( ( 1_ R9 ) * D178 ) + ( R11 * D178 ) ) by FVSUM_1:57
.= ( ( ( 1_ R9 ) + R11 ) * D178 ) by FVSUM_1:55;
thus L1161: thesis by L1160 , L1154 , L1155 , L1159 , L1050;
end;
end;
theorem
L1163: (for R3 being Nat holds (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for R17 being (Matrix of R9) holds ((R17 in ( Solutions_of (R13 , R14) ) & R3 in ( dom R13 ) & ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) )) implies ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) )))))))
proof
let R3 being Nat;
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let R17 being (Matrix of R9);
assume that
L1164: R17 in ( Solutions_of (R13 , R14) )
and
L1165: R3 in ( dom R13 )
and
L1166: ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) );
set D179 = ( ( width R14 ) |-> ( 0. R9 ) );
set D180 = ( Line (R14 , R3) );
L1167: ( len D180 ) = ( width R14 ) by CARD_1:def 7;
L1168: (ex B90 being (Matrix of R9) st (R17 = B90 & ( len B90 ) = ( width R13 ) & ( width B90 ) = ( width R14 ) & ( R13 * B90 ) = R14)) by L1164;
L1169:
now
let R5 being Nat;
assume that
L1170: (1 <= R5 & R5 <= ( len D180 ));
L1171: R5 in ( NAT ) by ORDINAL1:def 12;
L1172: R5 in ( Seg ( width R14 ) ) by L1171 , L1167 , L1170;
L1173: ( len R13 ) = ( len R14 ) by L1164 , L937;
L1174: ( dom R13 ) = ( Seg ( len R14 ) ) by L1173 , FINSEQ_1:def 3;
L1175: R3 in ( dom R14 ) by L1174 , L1165 , FINSEQ_1:def 3;
L1176: [ R3 , R5 ] in ( Indices R14 ) by L1175 , L1172 , ZFMISC_1:87;
L1177: ( R14 * (R3 , R5) ) = ( ( Line (R13 , R3) ) "*" ( Col (R17 , R5) ) ) by L1176 , L1168 , MATRIX_3:def 4
.= ( Sum ( ( 0. R9 ) * ( Col (R17 , R5) ) ) ) by L1166 , L1168 , FVSUM_1:66
.= ( ( 0. R9 ) * ( Sum ( Col (R17 , R5) ) ) ) by FVSUM_1:73
.= ( 0. R9 ) by VECTSP_1:6
.= ( D179 . R5 ) by L1172 , FINSEQ_2:57;
thus L1178: ( D179 . R5 ) = ( D180 . R5 ) by L1177 , L1172 , MATRIX_1:def 7;
end;
L1179: ( len D179 ) = ( width R14 ) by CARD_1:def 7;
thus L1180: thesis by L1179 , L1167 , L1169 , FINSEQ_1:14;
end;
L1181: (for R3 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R13 being (Matrix of R9) holds (for B91 being (Element of ( R8 -tuples_on ( NAT ) )) holds (R3 in ( Seg R8 ) implies ( Line (( Segm (R13 , B91 , ( Sgm ( Seg ( width R13 ) ) )) ) , R3) ) = ( Line (R13 , ( B91 . R3 )) )))))))
proof
let R3 being Nat;
let R8 being Nat;
let R9 being Field;
let R13 being (Matrix of R9);
let C101 being (Element of ( R8 -tuples_on ( NAT ) ));
set D181 = ( Seg ( width R13 ) );
L1182: ( rng ( Sgm D181 ) ) = D181 by FINSEQ_1:def 13;
L1183: ( len ( Line (R13 , ( C101 . R3 )) ) ) = ( width R13 ) by MATRIX_1:def 7;
L1184: ( dom ( Line (R13 , ( C101 . R3 )) ) ) = D181 by L1183 , FINSEQ_1:def 3;
L1185: ( Sgm D181 ) = ( idseq ( width R13 ) ) by FINSEQ_3:48;
L1186: ( ( Line (R13 , ( C101 . R3 )) ) * ( Sgm D181 ) ) = ( Line (R13 , ( C101 . R3 )) ) by L1185 , L1184 , RELAT_1:52;
assume L1187: R3 in ( Seg R8 );
thus L1188: thesis by L1187 , L1186 , L1182 , MATRIX13:24;
end;
theorem
L1189: (for R8 being Nat holds (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for B92 being (Element of ( R8 -tuples_on ( NAT ) )) holds ((( rng B92 ) c= ( dom R13 ) & R8 > ( 0 )) implies ( Solutions_of (R13 , R14) ) c= ( Solutions_of (( Segm (R13 , B92 , ( Sgm ( Seg ( width R13 ) ) )) ) , ( Segm (R14 , B92 , ( Sgm ( Seg ( width R14 ) ) )) )) )))))))
proof
let R8 being Nat;
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let C102 being (Element of ( R8 -tuples_on ( NAT ) ));
assume that
L1190: ( rng C102 ) c= ( dom R13 )
and
L1191: R8 > ( 0 );
set D182 = ( Segm (R13 , C102 , ( Sgm ( Seg ( width R13 ) ) )) );
L1192: ( len D182 ) = R8 by L1191 , MATRIX_1:23;
L1193: ( width D182 ) = ( card ( Seg ( width R13 ) ) ) by L1191 , MATRIX_1:23;
L1194: ( width D182 ) = ( width R13 ) by L1193 , FINSEQ_1:57;
set D183 = ( Segm (R14 , C102 , ( Sgm ( Seg ( width R14 ) ) )) );
L1195: ( len D183 ) = R8 by L1191 , MATRIX_1:23;
L1196: ( width D183 ) = ( card ( Seg ( width R14 ) ) ) by L1191 , MATRIX_1:23;
L1197: ( width D183 ) = ( width R14 ) by L1196 , FINSEQ_1:57;
let R1 being set;
assume that
L1198: R1 in ( Solutions_of (R13 , R14) );
consider C103 being (Matrix of R9) such that L1199: R1 = C103 and L1200: ( len C103 ) = ( width R13 ) and L1201: ( width C103 ) = ( width R14 ) and L1202: ( R13 * C103 ) = R14 by L1198;
set D184 = ( D182 * C103 );
L1203: ( len R13 ) = ( len R14 ) by L1198 , L937;
L1204:
now
L1205: ( len D184 ) = ( len D182 ) by L1200 , L1194 , MATRIX_3:def 4;
let R4 being Nat;
let R5 being Nat;
assume that
L1206: [ R4 , R5 ] in ( Indices D184 );
L1207: R4 in ( dom D184 ) by L1206 , ZFMISC_1:87;
L1208: R4 in ( Seg R8 ) by L1207 , L1192 , L1205 , FINSEQ_1:def 3;
L1209: ( width D184 ) = ( width C103 ) by L1200 , L1194 , MATRIX_3:def 4;
L1210: R5 in ( Seg ( width R14 ) ) by L1209 , L1201 , L1206 , ZFMISC_1:87;
L1211: ( dom C102 ) = ( Seg R8 ) by FINSEQ_2:124;
L1212: ( C102 . R4 ) in ( rng C102 ) by L1211 , L1208 , FUNCT_1:def 3;
L1213: ( C102 . R4 ) in ( dom R13 ) by L1212 , L1190;
L1214: ( dom R13 ) = ( Seg ( len R14 ) ) by L1203 , FINSEQ_1:def 3;
L1215: ( C102 . R4 ) in ( dom R14 ) by L1214 , L1213 , FINSEQ_1:def 3;
L1216: [ ( C102 . R4 ) , R5 ] in ( Indices R14 ) by L1215 , L1210 , ZFMISC_1:87;
reconsider D185 = R4 , D186 = R5 as (Element of ( NAT )) by ORDINAL1:def 12;
L1217: ( Sgm ( Seg ( width R14 ) ) ) = ( idseq ( width R14 ) ) by FINSEQ_3:48;
L1218: ( ( Sgm ( Seg ( width R14 ) ) ) . D186 ) = R5 by L1217 , L1210 , FINSEQ_2:49;
L1219: R4 in ( dom D183 ) by L1195 , L1208 , FINSEQ_1:def 3;
L1220: [ R4 , R5 ] in ( Indices D183 ) by L1219 , L1197 , L1210 , ZFMISC_1:87;
L1221: ( Line (D182 , R4) ) = ( Line (R13 , ( C102 . R4 )) ) by L1208 , L1181;
thus L1222: ( D184 * (R4 , R5) ) = ( ( Line (R13 , ( C102 . R4 )) ) "*" ( Col (C103 , R5) ) ) by L1221 , L1200 , L1194 , L1206 , MATRIX_3:def 4
.= ( R14 * (( C102 . D185 ) , R5) ) by L1200 , L1202 , L1216 , MATRIX_3:def 4
.= ( D183 * (R4 , R5) ) by L1220 , L1218 , MATRIX13:def 1;
end;
L1223: (( len D184 ) = ( len D182 ) & ( width D184 ) = ( width C103 )) by L1200 , L1194 , MATRIX_3:def 4;
L1224: D184 = D183 by L1223 , L1201 , L1192 , L1195 , L1197 , L1204 , MATRIX_1:21;
thus L1225: thesis by L1224 , L1199 , L1200 , L1201 , L1194 , L1197;
end;
theorem
L1226: (for R8 being Nat holds (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for B93 being (Element of ( R8 -tuples_on ( NAT ) )) holds ((( rng B93 ) c= ( dom R13 ) & ( dom R13 ) = ( dom R14 ) & R8 > ( 0 ) & (for R3 being Nat holds (R3 in ( ( dom R13 ) \ ( rng B93 ) ) implies (( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) ))))) implies ( Solutions_of (R13 , R14) ) = ( Solutions_of (( Segm (R13 , B93 , ( Sgm ( Seg ( width R13 ) ) )) ) , ( Segm (R14 , B93 , ( Sgm ( Seg ( width R14 ) ) )) )) )))))))
proof
let R8 being Nat;
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let C104 being (Element of ( R8 -tuples_on ( NAT ) ));
assume that
L1227: ( rng C104 ) c= ( dom R13 )
and
L1228: ( dom R13 ) = ( dom R14 )
and
L1229: R8 > ( 0 )
and
L1230: (for R3 being Nat holds (R3 in ( ( dom R13 ) \ ( rng C104 ) ) implies (( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) ))));
set D187 = ( Segm (R14 , C104 , ( Sgm ( Seg ( width R14 ) ) )) );
set D188 = ( Segm (R13 , C104 , ( Sgm ( Seg ( width R13 ) ) )) );
L1231: ( Solutions_of (D188 , D187) ) c= ( Solutions_of (R13 , R14) )
proof
L1232: ( Seg ( len R13 ) ) = ( dom R14 ) by L1228 , FINSEQ_1:def 3;
L1233: ( width D187 ) = ( card ( Seg ( width R14 ) ) ) by L1229 , MATRIX_1:23;
L1234: ( width D187 ) = ( width R14 ) by L1233 , FINSEQ_1:57;
let R1 being set;
assume L1235: R1 in ( Solutions_of (D188 , D187) );
consider C105 being (Matrix of R9) such that L1236: R1 = C105 and L1237: ( len C105 ) = ( width D188 ) and L1238: ( width C105 ) = ( width D187 ) and L1239: ( D188 * C105 ) = D187 by L1235;
set D189 = ( R13 * C105 );
L1240: ( width D188 ) = ( card ( Seg ( width R13 ) ) ) by L1229 , MATRIX_1:23;
L1241: ( width D188 ) = ( width R13 ) by L1240 , FINSEQ_1:57;
L1242: ( width D189 ) = ( width C105 ) by L1241 , L1237 , MATRIX_3:def 4;
L1243: ( len D189 ) = ( len R13 ) by L1237 , L1241 , MATRIX_3:def 4;
L1244:
now
L1245: ( dom D189 ) = ( Seg ( len R13 ) ) by L1243 , FINSEQ_1:def 3;
let R4 being Nat;
let R5 being Nat;
assume that
L1246: [ R4 , R5 ] in ( Indices D189 );
L1247: R5 in ( Seg ( width D189 ) ) by L1246 , ZFMISC_1:87;
reconsider D190 = R4 , D191 = R5 as (Element of ( NAT )) by ORDINAL1:def 12;
L1248: R4 in ( dom D189 ) by L1246 , ZFMISC_1:87;
L1249:
now
per cases ;
suppose L1250: D190 in ( rng C104 );

L1251: ( dom C104 ) = ( Seg R8 ) by FINSEQ_2:124;
L1252: ( Sgm ( Seg ( width R14 ) ) ) = ( idseq ( width R14 ) ) by FINSEQ_3:48;
L1253: ( ( Sgm ( Seg ( width R14 ) ) ) . D191 ) = R5 by L1252 , L1238 , L1234 , L1242 , L1247 , FINSEQ_2:49;
consider C106 being set such that L1254: C106 in ( dom C104 ) and L1255: ( C104 . C106 ) = D190 by L1250 , FUNCT_1:def 3;
reconsider D192 = C106 as (Element of ( NAT )) by L1254;
L1256: ( Indices D187 ) = [: ( Seg R8 ) , ( Seg ( card ( Seg ( width R14 ) ) ) ) :] by L1229 , MATRIX_1:23;
L1257: [ D192 , R5 ] in ( Indices D187 ) by L1256 , L1238 , L1233 , L1242 , L1247 , L1254 , L1251 , ZFMISC_1:87;
L1258: ( Line (D188 , D192) ) = ( Line (R13 , D190) ) by L1254 , L1255 , L1251 , L1181;
thus L1259: ( D189 * (R4 , R5) ) = ( ( Line (D188 , D192) ) "*" ( Col (C105 , R5) ) ) by L1258 , L1237 , L1241 , L1246 , MATRIX_3:def 4
.= ( D187 * (D192 , D191) ) by L1237 , L1239 , L1257 , MATRIX_3:def 4
.= ( R14 * (R4 , R5) ) by L1255 , L1257 , L1253 , MATRIX13:def 1;
end;
suppose L1260: (not D190 in ( rng C104 ));

L1261: D190 in ( ( dom R13 ) \ ( rng C104 ) ) by L1260 , L1228 , L1232 , L1248 , L1245 , XBOOLE_0:def 5;
L1262: ( Line (R14 , R4) ) = ( ( width R14 ) |-> ( 0. R9 ) ) by L1261 , L1230;
L1263: ( Line (R13 , R4) ) = ( ( width R13 ) |-> ( 0. R9 ) ) by L1230 , L1261;
thus L1264: ( D189 * (R4 , R5) ) = ( ( ( width R13 ) |-> ( 0. R9 ) ) "*" ( Col (C105 , R5) ) ) by L1263 , L1237 , L1241 , L1246 , MATRIX_3:def 4
.= ( Sum ( ( 0. R9 ) * ( Col (C105 , R5) ) ) ) by L1237 , L1241 , FVSUM_1:66
.= ( ( 0. R9 ) * ( Sum ( Col (C105 , R5) ) ) ) by FVSUM_1:73
.= ( 0. R9 ) by VECTSP_1:6
.= ( ( Line (R14 , R4) ) . R5 ) by L1238 , L1234 , L1242 , L1247 , L1262 , FINSEQ_2:57
.= ( R14 * (R4 , R5) ) by L1238 , L1234 , L1242 , L1247 , MATRIX_1:def 7;
end;
end;
thus L1266: ( D189 * (R4 , R5) ) = ( R14 * (R4 , R5) ) by L1249;
end;
L1267: ( len D189 ) = ( len R14 ) by L1243 , L1232 , FINSEQ_1:def 3;
L1268: D189 = R14 by L1267 , L1238 , L1233 , L1242 , L1244 , FINSEQ_1:57 , MATRIX_1:21;
thus L1269: thesis by L1268 , L1236 , L1237 , L1238 , L1241 , L1234;
end;
L1270: ( Solutions_of (R13 , R14) ) c= ( Solutions_of (D188 , D187) ) by L1227 , L1229 , L1189;
thus L1271: thesis by L1270 , L1231 , XBOOLE_0:def 10;
end;
theorem
L1272: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((R10 c= ( dom R13 ) & R10 is non  empty) implies ( Solutions_of (R13 , R14) ) c= ( Solutions_of (( Segm (R13 , R10 , ( Seg ( width R13 ) )) ) , ( Segm (R14 , R10 , ( Seg ( width R14 ) )) )) ))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L1273: R10 c= ( dom R13 )
and
L1274: R10 is non  empty;
L1275: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3;
L1276: ( rng ( Sgm R10 ) ) = R10 by L1275 , L1273 , FINSEQ_1:def 13;
thus L1277: thesis by L1276 , L1273 , L1274 , L1189;
end;
theorem
L1278: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((R10 c= ( dom R13 ) & R10 is non  empty & ( dom R13 ) = ( dom R14 ) & (for R3 being Nat holds (R3 in ( ( dom R13 ) \ R10 ) implies (( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) ))))) implies ( Solutions_of (R13 , R14) ) = ( Solutions_of (( Segm (R13 , R10 , ( Seg ( width R13 ) )) ) , ( Segm (R14 , R10 , ( Seg ( width R14 ) )) )) ))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L1279: R10 c= ( dom R13 )
and
L1280: (R10 is non  empty & ( dom R13 ) = ( dom R14 ) & (for R3 being Nat holds (R3 in ( ( dom R13 ) \ R10 ) implies (( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) )))));
L1281: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3;
L1282: ( rng ( Sgm R10 ) ) = R10 by L1281 , L1279 , FINSEQ_1:def 13;
thus L1283: thesis by L1282 , L1279 , L1280 , L1226;
end;
theorem
L1284: (for R3 being Nat holds (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds ((R3 in ( dom R13 ) & ( len R13 ) > 1) implies ( Solutions_of (R13 , R14) ) c= ( Solutions_of (( DelLine (R13 , R3) ) , ( DelLine (R14 , R3) )) ))))))
proof
let R3 being Nat;
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
assume that
L1285: R3 in ( dom R13 )
and
L1286: ( len R13 ) > 1;
reconsider D193 = ( ( len R13 ) - 1 ) as (Element of ( NAT )) by L1286 , NAT_1:20;
L1287: D193 > ( 1 - 1 ) by L1286 , XREAL_1:9;
L1288: ( Seg ( len R13 ) ) = ( dom R13 ) by FINSEQ_1:def 3;
L1289: ( card ( Seg ( len R13 ) ) ) = ( D193 + 1 ) by FINSEQ_1:57;
L1290: ( card ( ( Seg ( len R13 ) ) \ { R3 } ) ) = D193 by L1289 , L1285 , L1288 , STIRL2_1:55;
L1291: ( Solutions_of (R13 , R14) ) c= ( Solutions_of (( Segm (R13 , ( ( Seg ( len R13 ) ) \ { R3 } ) , ( Seg ( width R13 ) )) ) , ( Segm (R14 , ( ( Seg ( len R13 ) ) \ { R3 } ) , ( Seg ( width R14 ) )) )) ) by L1290 , L1288 , L1287 , L1272 , CARD_1:27 , XBOOLE_1:36;
let R1 being set;
assume that
L1292: R1 in ( Solutions_of (R13 , R14) );
L1293: ( len R13 ) = ( len R14 ) by L1292 , L937;
L1294: (( Segm (R13 , ( ( Seg ( len R13 ) ) \ { R3 } ) , ( Seg ( width R13 ) )) ) = ( Del (R13 , R3) ) & ( Segm (R14 , ( ( Seg ( len R13 ) ) \ { R3 } ) , ( Seg ( width R14 ) )) ) = ( Del (R14 , R3) )) by L1293 , MATRIX13:51;
thus L1295: thesis by L1294 , L1291 , L1292;
end;
theorem
L1296: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R14 being (Matrix of R9) holds (for R3 being Nat holds ((R3 in ( dom R13 ) & ( len R13 ) > 1 & ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & R3 in ( dom R14 ) & ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) )) implies ( Solutions_of (R13 , R14) ) = ( Solutions_of (( DelLine (R13 , R3) ) , ( DelLine (R14 , R3) )) ))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R14 being (Matrix of R9);
let R3 being Nat;
assume that
L1297: R3 in ( dom R13 )
and
L1298: ( len R13 ) > 1
and
L1299: ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) )
and
L1300: R3 in ( dom R14 )
and
L1301: ( Line (R14 , R3) ) = ( ( width R14 ) |-> ( 0. R9 ) );
reconsider D194 = ( ( len R13 ) - 1 ) as (Element of ( NAT )) by L1298 , NAT_1:20;
L1302: D194 > ( 1 - 1 ) by L1298 , XREAL_1:9;
thus L1303: ( Solutions_of (R13 , R14) ) c= ( Solutions_of (( DelLine (R13 , R3) ) , ( DelLine (R14 , R3) )) ) by L1297 , L1298 , L1284;
let R1 being set;
assume that
L1304: R1 in ( Solutions_of (( DelLine (R13 , R3) ) , ( DelLine (R14 , R3) )) );
set D195 = ( Seg ( len R13 ) );
L1305: ( dom R13 ) = D195 by FINSEQ_1:def 3;
L1306:
now
let R4 being Nat;
assume L1307: R4 in ( ( dom R13 ) \ ( D195 \ { R3 } ) );
L1308: R4 in ( ( dom R13 ) /\ { R3 } ) by L1307 , L1305 , XBOOLE_1:48;
L1309: R4 in { R3 } by L1308 , XBOOLE_0:def 4;
thus L1310: (( Line (R13 , R4) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & ( Line (R14 , R4) ) = ( ( width R14 ) |-> ( 0. R9 ) )) by L1309 , L1299 , L1301 , TARSKI:def 1;
end;
L1311: ( card D195 ) = ( D194 + 1 ) by FINSEQ_1:57;
L1312: ( card ( D195 \ { R3 } ) ) = D194 by L1311 , L1297 , L1305 , STIRL2_1:55;
L1313: ((ex B94 being Nat st (( len R13 ) = ( B94 + 1 ) & ( len ( Del (R13 , R3) ) ) = B94)) & (ex B95 being Nat st (( len R14 ) = ( B95 + 1 ) & ( len ( Del (R14 , R3) ) ) = B95))) by L1297 , L1300 , FINSEQ_3:104;
L1314: ( len R14 ) = ( len R13 ) by L1313 , L1304 , L937;
L1315: ( dom R13 ) = ( dom R14 ) by L1314 , L1305 , FINSEQ_1:def 3;
L1316: ( Solutions_of (R13 , R14) ) = ( Solutions_of (( Segm (R13 , ( D195 \ { R3 } ) , ( Seg ( width R13 ) )) ) , ( Segm (R14 , ( D195 \ { R3 } ) , ( Seg ( width R14 ) )) )) ) by L1315 , L1305 , L1312 , L1302 , L1306 , L1278 , CARD_1:27 , XBOOLE_1:36
.= ( Solutions_of (( DelLine (R13 , R3) ) , ( Segm (R14 , ( D195 \ { R3 } ) , ( Seg ( width R14 ) )) )) ) by MATRIX13:51
.= ( Solutions_of (( DelLine (R13 , R3) ) , ( DelLine (R14 , R3) )) ) by L1314 , MATRIX13:51;
thus L1317: thesis by L1316 , L1304;
end;
theorem
L1318: (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B96 being (Matrix of R8 , R7 , R9) holds (for B97 being (Matrix of R8 , R5 , R9) holds (for B98 being (Function of ( Seg R8 ) , ( Seg R8 )) holds (( Solutions_of (B96 , B97) ) c= ( Solutions_of (( B96 * B98 ) , ( B97 * B98 )) ) & (B98 is  one-to-one implies ( Solutions_of (B96 , B97) ) = ( Solutions_of (( B96 * B98 ) , ( B97 * B98 )) ))))))))))
proof
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
set D196 = ( idseq R8 );
L1319: (( len D196 ) = R8 & D196 is (FinSequence of ( NAT ))) by CARD_1:def 7 , FINSEQ_2:48;
reconsider D197 = D196 as (Element of ( R8 -tuples_on ( NAT ) )) by L1319 , FINSEQ_2:92;
let C107 being (Matrix of R8 , R7 , R9);
let C108 being (Matrix of R8 , R5 , R9);
let C109 being (Function of ( Seg R8 ) , ( Seg R8 ));
L1320: ( rng C109 ) c= ( Seg R8 ) by RELAT_1:def 19;
L1321: ( dom D197 ) = ( Seg R8 ) by FUNCT_2:52;
reconsider D198 = ( D197 * C109 ) as (FinSequence of ( NAT )) by L1321 , FINSEQ_2:47;
L1322: ( dom C109 ) = ( Seg R8 ) by FUNCT_2:52;
L1323: (R8 in ( NAT ) & ( dom D198 ) = ( Seg R8 )) by L1322 , L1320 , ORDINAL1:def 12 , RELAT_1:53;
L1324: ( len D198 ) = R8 by L1323 , FINSEQ_1:def 3;
reconsider D199 = D198 as (Element of ( R8 -tuples_on ( NAT ) )) by L1324 , FINSEQ_2:92;
L1325: R8 = ( len C107 ) by MATRIX_1:def 2;
L1326: ( ( idseq R8 ) * C109 ) = C109 by L1320 , RELAT_1:53;
L1327: ( rng D199 ) c= ( dom C107 ) by L1326 , L1320 , L1325 , FINSEQ_1:def 3;
L1328: (D197 = ( Sgm ( Seg R8 ) ) & ( card ( Seg R8 ) ) = R8) by FINSEQ_1:57 , FINSEQ_3:48;
L1329: ( Segm (C107 , D199 , ( Sgm ( Seg ( width C107 ) ) )) ) = ( ( Segm (C107 , ( Seg ( len C107 ) ) , ( Seg ( width C107 ) )) ) * C109 ) by L1328 , L1325 , MATRIX13:33
.= ( C107 * C109 ) by MATRIX13:46;
L1330: ( len C108 ) = R8 by MATRIX_1:def 2;
L1331: ( Segm (C108 , D199 , ( Sgm ( Seg ( width C108 ) ) )) ) = ( ( Segm (C108 , ( Seg ( len C108 ) ) , ( Seg ( width C108 ) )) ) * C109 ) by L1330 , L1328 , MATRIX13:33
.= ( C108 * C109 ) by MATRIX13:46;
per cases ;
suppose L1332: R8 > ( 0 );

thus L1333: ( Solutions_of (C107 , C108) ) c= ( Solutions_of (( C107 * C109 ) , ( C108 * C109 )) ) by L1332 , L1329 , L1331 , L1327 , L1189;
L1334: ( card ( Seg R8 ) ) = ( card ( Seg R8 ) );
L1335: ( dom C107 ) = ( Seg R8 ) by L1325 , FINSEQ_1:def 3;
L1336: ( dom C108 ) = ( Seg R8 ) by L1330 , FINSEQ_1:def 3;
assume L1337: C109 is  one-to-one;
L1338: C109 is  onto by L1337 , L1334 , STIRL2_1:60;
L1339: ( rng C109 ) = ( Seg R8 ) by L1338 , FUNCT_2:def 3;
L1340: (for R3 being Nat holds (R3 in ( ( dom C107 ) \ ( rng D199 ) ) implies (( Line (C107 , R3) ) = ( ( width C107 ) |-> ( 0. R9 ) ) & ( Line (C108 , R3) ) = ( ( width C108 ) |-> ( 0. R9 ) )))) by L1339 , L1326 , L1335 , XBOOLE_1:37;
thus L1341: thesis by L1340 , L1320 , L1326 , L1329 , L1331 , L1332 , L1335 , L1336 , L1226;
end;
suppose L1342: R8 = ( 0 );

L1343: ( len C108 ) = ( 0 ) by L1342 , MATRIX_1:22;
L1344: C108 = ( {} ) by L1343;
L1345: ( len C107 ) = ( 0 ) by L1342 , MATRIX_1:22;
L1346: C107 = ( {} ) by L1345;
L1347: ( C107 * C109 ) = ( {} ) by L1342;
thus L1348: thesis by L1347 , L1346 , L1344;
end;
end;
theorem
L1350: (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B99 being (Matrix of R8 , R7 , R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((( card R10 ) = R8 & R10 c= ( Seg R7 ) & ( Segm (B99 , ( Seg R8 ) , R10) ) = ( 1. (R9 , R8) ) & R8 > ( 0 )) implies (ex B100 being (Matrix of ( R7 -' R8 ) , R7 , R9) st (( Segm (B100 , ( Seg ( R7 -' R8 ) ) , ( ( Seg R7 ) \ R10 )) ) = ( 1. (R9 , ( R7 -' R8 )) ) & ( Segm (B100 , ( Seg ( R7 -' R8 ) ) , R10) ) = ( - ( ( Segm (B99 , ( Seg R8 ) , ( ( Seg R7 ) \ R10 )) ) @ ) ) & (for R6 being Nat holds (for B101 being (Matrix of R7 , R6 , R9) holds ((for R3 being Nat holds (R3 in ( Seg R6 ) implies ((ex R4 being Nat st (R4 in ( Seg ( R7 -' R8 ) ) & ( Col (B101 , R3) ) = ( Line (B100 , R4) ))) or ( Col (B101 , R3) ) = ( R7 |-> ( 0. R9 ) )))) implies B101 in ( Solutions_of (B99 , ( 0. (R9 , R8 , R6) )) ))))))))))))
proof
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let C110 being (Matrix of R8 , R7 , R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L1351: ( card R10 ) = R8
and
L1352: R10 c= ( Seg R7 )
and
L1353: ( Segm (C110 , ( Seg R8 ) , R10) ) = ( 1. (R9 , R8) )
and
L1354: R8 > ( 0 );
set D200 = ( ( Seg R7 ) \ R10 );
L1355: (( R7 -' R8 ) = ( 0 ) or ( R7 -' R8 ) > ( 0 ));
L1356: ( card ( Seg R7 ) ) = R7 by FINSEQ_1:57;
L1357: ( card D200 ) = ( R7 - R8 ) by L1356 , L1351 , L1352 , CARD_2:44;
set D201 = ( 0. (R9 , ( R7 -' R8 ) , R7) );
L1358: D200 c= ( Seg R7 ) by XBOOLE_1:36;
L1359:
now
per cases ;
suppose L1360: ( R7 -' R8 ) = ( 0 );

L1361: ( Seg ( R7 -' R8 ) ) = ( {} ) by L1360;
L1362: ([: ( Seg ( R7 -' R8 ) ) , R10 :] = ( {} ) & [: ( Seg ( R7 -' R8 ) ) , D200 :] = ( {} )) by L1361 , ZFMISC_1:90;
thus L1363: ([: ( Seg ( R7 -' R8 ) ) , R10 :] c= ( Indices D201 ) & [: ( Seg ( R7 -' R8 ) ) , D200 :] c= ( Indices D201 )) by L1362 , XBOOLE_1:2;
end;
suppose L1364: ( R7 -' R8 ) > ( 0 );

L1365: ( Indices D201 ) = [: ( Seg ( R7 -' R8 ) ) , ( Seg R7 ) :] by L1364 , MATRIX_1:23;
thus L1366: ([: ( Seg ( R7 -' R8 ) ) , R10 :] c= ( Indices D201 ) & [: ( Seg ( R7 -' R8 ) ) , D200 :] c= ( Indices D201 )) by L1365 , L1352 , L1358 , ZFMISC_1:96;
end;
end;
set D202 = ( Segm (C110 , ( Seg R8 ) , D200) );
L1368: ( card ( Seg R8 ) ) = R8 by FINSEQ_1:57;
L1369: ( len D202 ) = R8 by L1368 , L1354 , MATRIX_1:23;
L1370: (( len ( D202 @ ) ) = ( len ( - ( D202 @ ) ) ) & ( width ( D202 @ ) ) = ( width ( - ( D202 @ ) ) )) by MATRIX_3:def 2;
L1371: ( width C110 ) = R7 by L1354 , MATRIX_1:23;
L1372: R8 c= ( card ( Seg R7 ) ) by L1351 , L1352 , CARD_1:11;
L1373: R8 <= R7 by L1372 , L1356 , NAT_1:39;
L1374: ( R7 -' R8 ) = ( R7 - R8 ) by L1373 , XREAL_1:233;
L1375: ( width D202 ) = ( R7 -' R8 ) by L1374 , L1354 , L1357 , MATRIX_1:23;
L1376: ((( len ( D202 @ ) ) = ( 0 ) & ( R7 -' R8 ) = ( 0 )) or (( len ( D202 @ ) ) = ( R7 -' R8 ) & ( width ( D202 @ ) ) = R8)) by L1375 , L1369 , L1355 , MATRIX_1:def 6 , MATRIX_2:10;
L1377: ((( - ( D202 @ ) ) = ( {} ) & ( R7 -' R8 ) = ( 0 )) or ( - ( D202 @ ) ) is (Matrix of ( R7 -' R8 ) , R8 , R9)) by L1376 , L1370 , MATRIX_2:7;
reconsider D203 = ( - ( D202 @ ) ) as (Matrix of ( R7 -' R8 ) , R8 , R9) by L1377 , MATRIX_1:13;
set D204 = ( 1. (R9 , ( R7 -' R8 )) );
L1378: R10 misses D200 by XBOOLE_1:79;
L1379: ( [: ( Seg ( R7 -' R8 ) ) , R10 :] /\ [: ( Seg ( R7 -' R8 ) ) , D200 :] ) = [: ( Seg ( R7 -' R8 ) ) , ( R10 /\ D200 ) :] by ZFMISC_1:99
.= [: ( Seg ( R7 -' R8 ) ) , ( {} ) :] by L1378 , XBOOLE_0:def 7
.= ( {} ) by ZFMISC_1:90;
L1380: (( card ( Seg ( R7 -' R8 ) ) ) = ( R7 -' R8 ) & (for B102 , B103 , B104 , B105 , B106 , B107 being Nat holds (([ B102 , B103 ] in ( [: ( Seg ( R7 -' R8 ) ) , R10 :] /\ [: ( Seg ( R7 -' R8 ) ) , D200 :] ) & B104 = ( ( ( Sgm ( Seg ( R7 -' R8 ) ) ) " ) . B102 ) & B105 = ( ( ( Sgm R10 ) " ) . B103 ) & B106 = ( ( ( Sgm ( Seg ( R7 -' R8 ) ) ) " ) . B102 ) & B107 = ( ( ( Sgm D200 ) " ) . B103 )) implies ( D203 * (B104 , B105) ) = ( D204 * (B106 , B107) )))) by L1379 , FINSEQ_1:57;
consider C111 being (Matrix of ( len D201 ) , ( width D201 ) , R9) such that L1381: ( Segm (C111 , ( Seg ( R7 -' R8 ) ) , R10) ) = D203 and L1382: ( Segm (C111 , ( Seg ( R7 -' R8 ) ) , D200) ) = D204 and L1383: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( ( Indices C111 ) \ ( [: ( Seg ( R7 -' R8 ) ) , R10 :] \/ [: ( Seg ( R7 -' R8 ) ) , D200 :] ) ) implies ( C111 * (R3 , R4) ) = ( D201 * (R3 , R4) )))) by L1380 , L1351 , L1359 , L1374 , L1357 , L252;
L1384: (( R7 -' R8 ) = ( 0 ) or ( R7 -' R8 ) > ( 0 ));
L1385: ((( len D201 ) = ( 0 ) & ( R7 -' R8 ) = ( 0 ) & ( len C111 ) = ( len D201 )) or (( len D201 ) = ( R7 -' R8 ) & ( width D201 ) = R7)) by L1384 , MATRIX_1:23 , MATRIX_1:def 2;
L1386: ((C111 = ( {} ) & ( R7 -' R8 ) = ( 0 )) or C111 is (Matrix of ( R7 -' R8 ) , R7 , R9)) by L1385;
reconsider D205 = C111 as (Matrix of ( R7 -' R8 ) , R7 , R9) by L1386;
take D205;
thus L1387: (( Segm (D205 , ( Seg ( R7 -' R8 ) ) , D200) ) = D204 & ( Segm (D205 , ( Seg ( R7 -' R8 ) ) , R10) ) = ( - ( D202 @ ) )) by L1381 , L1382;
let R6 being Nat;
let C112 being (Matrix of R7 , R6 , R9);
assume that
L1388: (for R3 being Nat holds (R3 in ( Seg R6 ) implies ((ex R4 being Nat st (R4 in ( Seg ( R7 -' R8 ) ) & ( Col (C112 , R3) ) = ( Line (D205 , R4) ))) or ( Col (C112 , R3) ) = ( R7 |-> ( 0. R9 ) ))));
set D206 = ( 0. (R9 , R8 , R6) );
L1389: ( len C112 ) = R7 by L1354 , L1373 , MATRIX_1:23;
L1390: ( width C112 ) = R6 by L1354 , L1373 , MATRIX_1:23;
L1391: ( width ( C110 * C112 ) ) = R6 by L1390 , L1371 , L1389 , MATRIX_3:def 4;
L1392: ( len C110 ) = R8 by L1354 , MATRIX_1:23;
L1393: ( len ( C110 * C112 ) ) = R8 by L1392 , L1371 , L1389 , MATRIX_3:def 4;
reconsider D207 = ( C110 * C112 ) as (Matrix of R8 , R6 , R9) by L1393 , L1391 , MATRIX_2:7;
L1394: ( Indices C110 ) = [: ( Seg R8 ) , ( Seg R7 ) :] by L1354 , MATRIX_1:23;
L1395: [: ( Seg R8 ) , R10 :] c= ( Indices C110 ) by L1394 , L1352 , ZFMISC_1:96;
L1396:
now
L1397: ( Indices D207 ) = ( Indices D206 ) by MATRIX_1:26;
let R3 being Nat;
let R4 being Nat;
assume that
L1398: [ R3 , R4 ] in ( Indices D207 );
reconsider D208 = R3 , D209 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L1399: ( Indices D207 ) = [: ( Seg R8 ) , ( Seg R6 ) :] by L1354 , MATRIX_1:23;
L1400: D208 in ( Seg R8 ) by L1399 , L1398 , ZFMISC_1:87;
L1401: D209 in ( Seg R6 ) by L1398 , L1399 , ZFMISC_1:87;
L1402:
now
per cases  by L1388 , L1401;
suppose L1403: (ex B108 being Nat st (B108 in ( Seg ( R7 -' R8 ) ) & ( Col (C112 , D209) ) = ( Line (D205 , B108) )));

consider C113 being Nat such that L1404: C113 in ( Seg ( R7 -' R8 ) ) and L1405: ( Col (C112 , D209) ) = ( Line (D205 , C113) ) by L1403;
L1406: C113 = ( ( idseq ( R7 -' R8 ) ) . C113 ) by L1404 , FINSEQ_2:49
.= ( ( Sgm ( Seg ( R7 -' R8 ) ) ) . C113 ) by FINSEQ_3:48;
L1407: ( Indices D204 ) = [: ( Seg ( R7 -' R8 ) ) , ( Seg ( R7 -' R8 ) ) :] by MATRIX_1:24;
L1408: [ C113 , C113 ] in ( Indices D204 ) by L1407 , L1404 , ZFMISC_1:87;
L1409: ( rng ( Sgm D200 ) ) = D200 by L1358 , FINSEQ_1:def 13;
L1410: ( dom ( Sgm D200 ) ) = ( Seg ( R7 -' R8 ) ) by L1374 , L1357 , FINSEQ_3:40 , XBOOLE_1:36;
L1411: ( ( Sgm D200 ) . C113 ) in D200 by L1410 , L1404 , L1409 , FUNCT_1:def 3;
L1412: ( ( Line (C110 , D208) ) . ( ( Sgm D200 ) . C113 ) ) = ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) by L1411 , L1371 , L1358 , MATRIX_1:def 7;
L1413: ( R7 -' R8 ) <> ( 0 ) by L1404;
L1414: ( width D205 ) = R7 by L1413 , MATRIX_1:23;
L1415: ( ( Line (D205 , C113) ) . ( ( Sgm D200 ) . C113 ) ) = ( D205 * (C113 , ( ( Sgm D200 ) . C113 )) ) by L1414 , L1358 , L1411 , MATRIX_1:def 7
.= ( D204 * (C113 , C113) ) by L1382 , L1406 , L1408 , MATRIX13:def 1
.= ( 1_ R9 ) by L1408 , MATRIX_1:def 11;
L1416: ( len ( Line (C110 , D208) ) ) = R7 by L1371 , MATRIX_1:def 7;
L1417: D208 = ( ( idseq R8 ) . D208 ) by L1400 , FINSEQ_2:49
.= ( ( Sgm ( Seg R8 ) ) . D208 ) by FINSEQ_3:48;
L1418: ( len ( Line (D205 , C113) ) ) = R7 by L1414 , MATRIX_1:def 7;
L1419: ( len ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) ) = R7 by L1418 , L1416 , MATRIX_3:6;
L1420: ( dom ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) ) = ( Seg R7 ) by L1419 , FINSEQ_1:def 3;
L1421: ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) /. ( ( Sgm D200 ) . C113 ) ) = ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) . ( ( Sgm D200 ) . C113 ) ) by L1420 , L1358 , L1411 , PARTFUN1:def 6
.= ( ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) * ( 1_ R9 ) ) by L1371 , L1358 , L1414 , L1411 , L1412 , L1415 , FVSUM_1:61
.= ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) by VECTSP_1:def 6;
L1422: (( Indices D205 ) = ( Indices D201 ) & ( rng ( Sgm ( Seg ( R7 -' R8 ) ) ) ) = ( Seg ( R7 -' R8 ) )) by FINSEQ_1:def 13 , MATRIX_1:26;
L1423: ( rng ( Sgm R10 ) ) = R10 by L1352 , FINSEQ_1:def 13;
L1424: ( rng ( Sgm ( Seg R8 ) ) ) = ( Seg R8 ) by FINSEQ_1:def 13;
L1425:
now
let C114 being Nat;
assume that
L1426: C114 in ( Seg R7 )
and
L1427: C114 <> ( ( Sgm D200 ) . C113 )
and
L1428: C114 <> ( ( Sgm R10 ) . D208 );
L1429:
now
per cases  by L1426 , XBOOLE_0:def 5;
suppose L1430: C114 in R10;

consider R1 being set such that L1431: R1 in ( dom ( Sgm R10 ) ) and L1432: ( ( Sgm R10 ) . R1 ) = C114 by L1430 , L1423 , FUNCT_1:def 3;
reconsider D210 = R1 as (Element of ( NAT )) by L1431;
L1433: ( ( Line (D205 , C113) ) . ( ( Sgm R10 ) . D210 ) ) = ( D205 * (C113 , ( ( Sgm R10 ) . D210 )) ) by L1414 , L1426 , L1432 , MATRIX_1:def 7;
L1434: [ ( ( Sgm ( Seg R8 ) ) . D208 ) , ( ( Sgm R10 ) . D210 ) ] in ( Indices C110 ) by L1394 , L1400 , L1417 , L1426 , L1432 , ZFMISC_1:87;
L1435: [ D208 , D210 ] in ( Indices ( Segm (C110 , ( Seg R8 ) , R10) ) ) by L1434 , L1395 , L1423 , L1424 , MATRIX13:17;
L1436: ( ( Line (C110 , D208) ) . ( ( Sgm R10 ) . D210 ) ) = ( C110 * (D208 , ( ( Sgm R10 ) . D210 )) ) by L1371 , L1426 , L1432 , MATRIX_1:def 7
.= ( ( Segm (C110 , ( Seg R8 ) , R10) ) * (D208 , D210) ) by L1417 , L1435 , MATRIX13:def 1
.= ( 0. R9 ) by L1353 , L1428 , L1432 , L1435 , MATRIX_1:def 11;
thus L1437: ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) . C114 ) = ( ( 0. R9 ) * ( D205 * (C113 , ( ( Sgm R10 ) . D210 )) ) ) by L1436 , L1371 , L1414 , L1426 , L1432 , L1433 , FVSUM_1:61
.= ( 0. R9 ) by VECTSP_1:7;
end;
suppose L1438: C114 in D200;

consider R1 being set such that L1439: R1 in ( dom ( Sgm D200 ) ) and L1440: ( ( Sgm D200 ) . R1 ) = C114 by L1438 , L1409 , FUNCT_1:def 3;
reconsider D211 = R1 as (Element of ( NAT )) by L1439;
L1441: ( ( Line (C110 , D208) ) . ( ( Sgm D200 ) . D211 ) ) = ( C110 * (D208 , ( ( Sgm D200 ) . D211 )) ) by L1371 , L1426 , L1440 , MATRIX_1:def 7;
L1442: [ C113 , D211 ] in ( Indices D204 ) by L1404 , L1410 , L1407 , L1439 , ZFMISC_1:87;
L1443: ( ( Line (D205 , C113) ) . ( ( Sgm D200 ) . D211 ) ) = ( D205 * (C113 , ( ( Sgm D200 ) . D211 )) ) by L1414 , L1426 , L1440 , MATRIX_1:def 7
.= ( D204 * (C113 , D211) ) by L1382 , L1406 , L1442 , MATRIX13:def 1
.= ( 0. R9 ) by L1427 , L1440 , L1442 , MATRIX_1:def 11;
thus L1444: ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) . C114 ) = ( ( C110 * (D208 , ( ( Sgm D200 ) . D211 )) ) * ( 0. R9 ) ) by L1443 , L1371 , L1414 , L1426 , L1440 , L1441 , FVSUM_1:61
.= ( 0. R9 ) by VECTSP_1:7;
end;
end;
thus L1446: ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) . C114 ) = ( 0. R9 ) by L1429;
end;
L1447: ( dom ( Sgm R10 ) ) = ( Seg R8 ) by L1351 , L1352 , FINSEQ_3:40;
L1448: ( ( Sgm R10 ) . D208 ) in R10 by L1447 , L1400 , L1423 , FUNCT_1:def 3;
L1449: ( ( Sgm D200 ) . C113 ) <> ( ( Sgm R10 ) . D208 ) by L1448 , L1378 , L1411 , XBOOLE_0:3;
L1450: [ ( ( Sgm ( Seg R8 ) ) . D208 ) , ( ( Sgm R10 ) . D208 ) ] in ( Indices C110 ) by L1352 , L1394 , L1400 , L1448 , L1417 , ZFMISC_1:87;
L1451: [ D208 , D208 ] in ( Indices ( Segm (C110 , ( Seg R8 ) , R10) ) ) by L1450 , L1395 , L1423 , L1424 , MATRIX13:17;
L1452: ( Indices D205 ) = [: ( Seg ( R7 -' R8 ) ) , ( Seg R7 ) :] by L1413 , MATRIX_1:23;
L1453: [ ( ( Sgm ( Seg ( R7 -' R8 ) ) ) . C113 ) , ( ( Sgm R10 ) . D208 ) ] in ( Indices D205 ) by L1452 , L1352 , L1404 , L1448 , L1406 , ZFMISC_1:87;
L1454: [ C113 , D208 ] in ( Indices ( Segm (D205 , ( Seg ( R7 -' R8 ) ) , R10) ) ) by L1453 , L1359 , L1423 , L1422 , MATRIX13:17;
L1455: ( Indices D203 ) = ( Indices ( D202 @ ) ) by L32;
L1456: [ D208 , C113 ] in ( Indices D202 ) by L1455 , L1381 , L1454 , MATRIX_1:def 6;
L1457: ( ( Line (D205 , C113) ) . ( ( Sgm R10 ) . D208 ) ) = ( D205 * (C113 , ( ( Sgm R10 ) . D208 )) ) by L1352 , L1414 , L1448 , MATRIX_1:def 7
.= ( ( Segm (D205 , ( Seg ( R7 -' R8 ) ) , R10) ) * (C113 , D208) ) by L1406 , L1454 , MATRIX13:def 1
.= ( - ( ( D202 @ ) * (C113 , D208) ) ) by L1381 , L1454 , L1455 , MATRIX_3:def 2
.= ( - ( D202 * (D208 , C113) ) ) by L1456 , MATRIX_1:def 6
.= ( - ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) ) by L1417 , L1456 , MATRIX13:def 1;
L1458: ( ( Line (C110 , D208) ) . ( ( Sgm R10 ) . D208 ) ) = ( C110 * (D208 , ( ( Sgm R10 ) . D208 )) ) by L1352 , L1371 , L1448 , MATRIX_1:def 7
.= ( ( Segm (C110 , ( Seg R8 ) , R10) ) * (D208 , D208) ) by L1417 , L1451 , MATRIX13:def 1
.= ( 1_ R9 ) by L1353 , L1451 , MATRIX_1:def 11;
L1459: ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) /. ( ( Sgm R10 ) . D208 ) ) = ( ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) . ( ( Sgm R10 ) . D208 ) ) by L1352 , L1420 , L1448 , PARTFUN1:def 6
.= ( ( 1_ R9 ) * ( - ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) ) ) by L1352 , L1371 , L1414 , L1448 , L1458 , L1457 , FVSUM_1:61
.= ( - ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) ) by VECTSP_1:def 6;
L1460: ( Sum ( mlt (( Line (C110 , D208) ) , ( Line (D205 , C113) )) ) ) = ( ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) + ( - ( C110 * (D208 , ( ( Sgm D200 ) . C113 )) ) ) ) by L1459 , L1352 , L1358 , L1420 , L1448 , L1411 , L1421 , L1449 , L1425 , L179
.= ( 0. R9 ) by VECTSP_1:16;
thus L1461: ( D206 * (R3 , R4) ) = ( ( Line (C110 , D208) ) "*" ( Line (D205 , C113) ) ) by L1460 , L1398 , L1397 , MATRIX_3:1
.= ( D207 * (R3 , R4) ) by L1371 , L1389 , L1398 , L1405 , MATRIX_3:def 4;
end;
suppose L1462: ( Col (C112 , D209) ) = ( R7 |-> ( 0. R9 ) );

thus L1463: ( D207 * (R3 , R4) ) = ( ( Line (C110 , D208) ) "*" ( R7 |-> ( 0. R9 ) ) ) by L1462 , L1371 , L1389 , L1398 , MATRIX_3:def 4
.= ( Sum ( ( 0. R9 ) * ( Line (C110 , D208) ) ) ) by L1371 , FVSUM_1:66
.= ( ( 0. R9 ) * ( Sum ( Line (C110 , D208) ) ) ) by FVSUM_1:73
.= ( 0. R9 ) by VECTSP_1:6
.= ( D206 * (R3 , R4) ) by L1398 , L1397 , MATRIX_3:1;
end;
end;
thus L1465: ( D207 * (R3 , R4) ) = ( D206 * (R3 , R4) ) by L1402;
end;
L1466: D207 = D206 by L1396 , MATRIX_1:27;
thus L1467: thesis by L1466 , L1371 , L1389 , L1390 , L1391;
end;
theorem
L1468: (for R6 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B109 being (Matrix of R8 , R7 , R9) holds (for B110 being (Matrix of R8 , R6 , R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((( card R10 ) = R8 & R10 c= ( Seg R7 ) & R8 > ( 0 ) & ( Segm (B109 , ( Seg R8 ) , R10) ) = ( 1. (R9 , R8) )) implies (ex B111 being (Matrix of R7 , R6 , R9) st (( Segm (B111 , ( ( Seg R7 ) \ R10 ) , ( Seg R6 )) ) = ( 0. (R9 , ( R7 -' R8 ) , R6) ) & ( Segm (B111 , R10 , ( Seg R6 )) ) = B110 & B111 in ( Solutions_of (B109 , B110) )))))))))))
proof
let R6 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let C115 being (Matrix of R8 , R7 , R9);
let C116 being (Matrix of R8 , R6 , R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L1469: ( card R10 ) = R8
and
L1470: R10 c= ( Seg R7 )
and
L1471: R8 > ( 0 )
and
L1472: ( Segm (C115 , ( Seg R8 ) , R10) ) = ( 1. (R9 , R8) );
L1473: ( width C115 ) = R7 by L1471 , MATRIX_1:23;
set D212 = ( 0. (R9 , R7 , R6) );
set D213 = ( ( Seg R7 ) \ R10 );
L1474: ( card ( Seg R7 ) ) = R7 by FINSEQ_1:57;
L1475: (( R7 -' R8 ) = ( R7 - R8 ) & ( card D213 ) = ( R7 - R8 )) by L1474 , L1469 , L1470 , CARD_2:44 , NAT_1:43 , XREAL_1:233;
set D214 = ( 0. (R9 , ( R7 -' R8 ) , R6) );
L1476: R10 misses D213 by XBOOLE_1:79;
L1477: ( [: R10 , ( Seg R6 ) :] /\ [: D213 , ( Seg R6 ) :] ) = [: ( R10 /\ D213 ) , ( Seg R6 ) :] by ZFMISC_1:99
.= [: ( {} ) , ( Seg R6 ) :] by L1476 , XBOOLE_0:def 7
.= ( {} ) by ZFMISC_1:90;
L1478: (for B112 , B113 , B114 , B115 , B116 , B117 being Nat holds (([ B112 , B113 ] in ( [: R10 , ( Seg R6 ) :] /\ [: D213 , ( Seg R6 ) :] ) & B114 = ( ( ( Sgm R10 ) " ) . B112 ) & B115 = ( ( ( Sgm ( Seg R6 ) ) " ) . B113 ) & B116 = ( ( ( Sgm D213 ) " ) . B112 ) & B117 = ( ( ( Sgm ( Seg R6 ) ) " ) . B113 )) implies ( C116 * (B114 , B115) ) = ( D214 * (B116 , B117) ))) by L1477;
L1479: ( Indices C115 ) = [: ( Seg R8 ) , ( Seg R7 ) :] by L1471 , MATRIX_1:23;
L1480: R8 <= ( card ( Seg R7 ) ) by L1469 , L1470 , NAT_1:43;
L1481: (( len D212 ) = R7 & ( width D212 ) = R6) by L1480 , L1471 , L1474 , MATRIX_1:23;
L1482: ( Indices D212 ) = [: ( Seg R7 ) , ( Seg R6 ) :] by L1471 , L1480 , L1474 , MATRIX_1:23;
L1483: [: R10 , ( Seg R6 ) :] c= ( Indices D212 ) by L1482 , L1470 , ZFMISC_1:95;
L1484: D213 c= ( Seg R7 ) by XBOOLE_1:36;
L1485: (( card ( Seg R6 ) ) = R6 & [: D213 , ( Seg R6 ) :] c= ( Indices D212 )) by L1484 , L1482 , FINSEQ_1:57 , ZFMISC_1:95;
consider C117 being (Matrix of R7 , R6 , R9) such that L1486: ( Segm (C117 , R10 , ( Seg R6 )) ) = C116 and L1487: ( Segm (C117 , D213 , ( Seg R6 )) ) = D214 and L1488: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( ( Indices C117 ) \ ( [: R10 , ( Seg R6 ) :] \/ [: D213 , ( Seg R6 ) :] ) ) implies ( C117 * (R3 , R4) ) = ( D212 * (R3 , R4) )))) by L1485 , L1469 , L1475 , L1481 , L1483 , L1478 , L252;
set D215 = ( C115 * C117 );
L1489: ( len C117 ) = R7 by L1471 , L1480 , L1474 , MATRIX_1:23;
L1490: ( dom C117 ) = ( Seg R7 ) by L1489 , FINSEQ_1:def 3;
L1491: ( len C115 ) = R8 by L1471 , MATRIX_1:23;
L1492: ( len D215 ) = R8 by L1491 , L1473 , L1489 , MATRIX_3:def 4;
take C117;
thus L1493: (( Segm (C117 , D213 , ( Seg R6 )) ) = D214 & ( Segm (C117 , R10 , ( Seg R6 )) ) = C116) by L1486 , L1487;
L1494: ( Indices C117 ) = [: ( Seg R7 ) , ( Seg R6 ) :] by L1471 , L1480 , L1474 , MATRIX_1:23;
L1495: ( width C116 ) = R6 by L1471 , MATRIX_1:23;
L1496: ( width C117 ) = R6 by L1471 , L1480 , L1474 , MATRIX_1:23;
L1497: ( width D215 ) = R6 by L1496 , L1473 , L1489 , MATRIX_3:def 4;
reconsider D216 = D215 as (Matrix of R8 , R6 , R9) by L1497 , L1492 , MATRIX_2:7;
L1498: ( Indices C116 ) = [: ( Seg R8 ) , ( Seg R6 ) :] by L1471 , MATRIX_1:23;
L1499:
now
L1500: [: R10 , ( Seg R6 ) :] c= ( Indices C117 ) by L1470 , L1494 , ZFMISC_1:95;
let R3 being Nat;
let R4 being Nat;
assume that
L1501: [ R3 , R4 ] in ( Indices D216 );
reconsider D217 = R3 , D218 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L1502: ( Indices D216 ) = ( Indices C116 ) by MATRIX_1:26;
L1503: R3 in ( Seg R8 ) by L1502 , L1498 , L1501 , ZFMISC_1:87;
L1504: (( len ( Line (C115 , R3) ) ) = R7 & ( len ( Col (C117 , R4) ) ) = R7) by L1473 , L1489 , CARD_1:def 7;
L1505: ( len ( mlt (( Line (C115 , R3) ) , ( Col (C117 , R4) )) ) ) = R7 by L1504 , MATRIX_3:6;
L1506: ( dom ( mlt (( Line (C115 , R3) ) , ( Col (C117 , R4) )) ) ) = ( Seg R7 ) by L1505 , FINSEQ_1:def 3;
L1507: ( rng ( Sgm ( Seg R6 ) ) ) = ( Seg R6 ) by FINSEQ_1:def 13;
L1508: (( rng ( Sgm ( Seg R8 ) ) ) = ( Seg R8 ) & [: ( Seg R8 ) , R10 :] c= ( Indices C115 )) by L1470 , L1479 , FINSEQ_1:def 13 , ZFMISC_1:95;
L1509: ( rng ( Sgm R10 ) ) = R10 by L1470 , FINSEQ_1:def 13;
L1510: ( dom ( Sgm R10 ) ) = ( Seg R8 ) by L1469 , L1470 , FINSEQ_3:40;
L1511: ( ( Sgm R10 ) . R3 ) in R10 by L1510 , L1503 , L1509 , FUNCT_1:def 3;
L1512: R4 in ( Seg R6 ) by L1495 , L1501 , L1502 , ZFMISC_1:87;
L1513: R4 = ( ( idseq R6 ) . R4 ) by L1512 , FINSEQ_2:49
.= ( ( Sgm ( Seg R6 ) ) . R4 ) by FINSEQ_3:48;
L1514: [ ( ( Sgm R10 ) . D217 ) , ( ( Sgm ( Seg R6 ) ) . D218 ) ] in ( Indices C117 ) by L1513 , L1470 , L1494 , L1512 , L1511 , ZFMISC_1:87;
L1515: [ D217 , D218 ] in ( Indices C116 ) by L1514 , L1486 , L1509 , L1507 , L1500 , MATRIX13:17;
L1516: ( rng ( Sgm D213 ) ) = D213 by L1484 , FINSEQ_1:def 13;
L1517: R3 = ( ( idseq R8 ) . R3 ) by L1503 , FINSEQ_2:49
.= ( ( Sgm ( Seg R8 ) ) . R3 ) by FINSEQ_3:48;
L1518: [ ( ( Sgm ( Seg R8 ) ) . R3 ) , ( ( Sgm R10 ) . R3 ) ] in ( Indices C115 ) by L1517 , L1470 , L1479 , L1503 , L1511 , ZFMISC_1:87;
L1519: [ D217 , D217 ] in ( Indices ( 1. (R9 , R8) ) ) by L1518 , L1472 , L1509 , L1508 , MATRIX13:17;
L1520: [: D213 , ( Seg R6 ) :] c= ( Indices C117 ) by L1484 , L1494 , ZFMISC_1:95;
L1521:
now
let C118 being Nat;
assume that
L1522: C118 in ( Seg R7 )
and
L1523: C118 <> ( ( Sgm R10 ) . D217 );
per cases  by L1522 , XBOOLE_0:def 5;
suppose L1524: C118 in R10;

consider R1 being set such that L1525: R1 in ( dom ( Sgm R10 ) ) and L1526: ( ( Sgm R10 ) . R1 ) = C118 by L1524 , L1509 , FUNCT_1:def 3;
reconsider D219 = R1 as (Element of ( NAT )) by L1525;
L1527: [ ( ( Sgm ( Seg R8 ) ) . R3 ) , ( ( Sgm R10 ) . D219 ) ] in ( Indices C115 ) by L1470 , L1479 , L1503 , L1517 , L1524 , L1526 , ZFMISC_1:87;
L1528: [ D217 , D219 ] in ( Indices ( 1. (R9 , R8) ) ) by L1527 , L1472 , L1509 , L1508 , MATRIX13:17;
L1529: ( ( Col (C117 , R4) ) . C118 ) = ( C117 * (C118 , R4) ) by L1470 , L1490 , L1524 , MATRIX_1:def 8;
L1530: ( ( Line (C115 , R3) ) . ( ( Sgm R10 ) . D219 ) ) = ( C115 * (D217 , ( ( Sgm R10 ) . D219 )) ) by L1470 , L1473 , L1524 , L1526 , MATRIX_1:def 7
.= ( ( Segm (C115 , ( Seg R8 ) , R10) ) * (D217 , D219) ) by L1472 , L1517 , L1528 , MATRIX13:def 1
.= ( 0. R9 ) by L1472 , L1523 , L1526 , L1528 , MATRIX_1:def 11;
thus L1531: ( ( mlt (( Line (C115 , R3) ) , ( Col (C117 , R4) )) ) . C118 ) = ( ( 0. R9 ) * ( C117 * (C118 , R4) ) ) by L1530 , L1470 , L1473 , L1489 , L1524 , L1526 , L1529 , FVSUM_1:61
.= ( 0. R9 ) by VECTSP_1:6;
end;
suppose L1532: C118 in D213;

consider R1 being set such that L1533: R1 in ( dom ( Sgm D213 ) ) and L1534: ( ( Sgm D213 ) . R1 ) = C118 by L1532 , L1516 , FUNCT_1:def 3;
reconsider D220 = R1 as (Element of ( NAT )) by L1533;
L1535: ( ( Line (C115 , R3) ) . C118 ) = ( C115 * (D217 , ( ( Sgm D213 ) . D220 )) ) by L1473 , L1522 , L1534 , MATRIX_1:def 7;
L1536: [ ( ( Sgm D213 ) . D220 ) , ( ( Sgm ( Seg R6 ) ) . D218 ) ] in ( Indices C117 ) by L1484 , L1494 , L1512 , L1513 , L1532 , L1534 , ZFMISC_1:87;
L1537: [ D220 , D218 ] in ( Indices D214 ) by L1536 , L1487 , L1507 , L1516 , L1520 , MATRIX13:17;
L1538: ( ( Col (C117 , R4) ) . C118 ) = ( C117 * (( ( Sgm D213 ) . D220 ) , ( ( Sgm ( Seg R6 ) ) . R4 )) ) by L1484 , L1490 , L1513 , L1532 , L1534 , MATRIX_1:def 8
.= ( D214 * (D220 , D218) ) by L1487 , L1537 , MATRIX13:def 1
.= ( 0. R9 ) by L1537 , MATRIX_3:1;
thus L1539: ( ( mlt (( Line (C115 , R3) ) , ( Col (C117 , R4) )) ) . C118 ) = ( ( C115 * (D217 , ( ( Sgm D213 ) . D220 )) ) * ( 0. R9 ) ) by L1538 , L1473 , L1489 , L1522 , L1535 , FVSUM_1:61
.= ( 0. R9 ) by VECTSP_1:6;
end;
end;
L1541: ( ( Col (C117 , R4) ) . ( ( Sgm R10 ) . R3 ) ) = ( C117 * (( ( Sgm R10 ) . R3 ) , R4) ) by L1470 , L1490 , L1511 , MATRIX_1:def 8
.= ( C116 * (D217 , D218) ) by L1486 , L1513 , L1515 , MATRIX13:def 1;
L1542: ( ( Line (C115 , R3) ) . ( ( Sgm R10 ) . R3 ) ) = ( C115 * (D217 , ( ( Sgm R10 ) . D217 )) ) by L1470 , L1473 , L1511 , MATRIX_1:def 7
.= ( ( Segm (C115 , ( Seg R8 ) , R10) ) * (D217 , D217) ) by L1472 , L1517 , L1519 , MATRIX13:def 1
.= ( 1_ R9 ) by L1472 , L1519 , MATRIX_1:def 11;
L1543: ( ( mlt (( Line (C115 , R3) ) , ( Col (C117 , R4) )) ) . ( ( Sgm R10 ) . R3 ) ) = ( ( 1_ R9 ) * ( C116 * (D217 , D218) ) ) by L1542 , L1470 , L1473 , L1489 , L1511 , L1541 , FVSUM_1:61
.= ( C116 * (D217 , D218) ) by VECTSP_1:def 4;
L1544: ( D216 * (R3 , R4) ) = ( ( Line (C115 , R3) ) "*" ( Col (C117 , R4) ) ) by L1473 , L1489 , L1501 , MATRIX_3:def 4
.= ( Sum ( mlt (( Line (C115 , R3) ) , ( Col (C117 , R4) )) ) );
thus L1545: ( D216 * (R3 , R4) ) = ( C116 * (R3 , R4) ) by L1544 , L1470 , L1511 , L1543 , L1506 , L1521 , MATRIX_3:12;
end;
L1546: D216 = C116 by L1499 , MATRIX_1:27;
thus L1547: thesis by L1546 , L1473 , L1495 , L1489 , L1496;
end;
theorem
L1548: (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B118 being (Matrix of ( 0 ) , R8 , R9) holds (for B119 being (Matrix of ( 0 ) , R7 , R9) holds ( Solutions_of (B118 , B119) ) = { ( {} ) })))))
proof
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let C119 being (Matrix of ( 0 ) , R8 , R9);
let C120 being (Matrix of ( 0 ) , R7 , R9);
L1549: ( len C119 ) = ( 0 ) by MATRIX_1:def 2;
L1550: ( Solutions_of (C119 , C120) ) c= { ( {} ) }
proof
let R1 being set;
assume L1551: R1 in ( Solutions_of (C119 , C120) );
L1552: (ex R17 being (Matrix of R9) st (R17 = R1 & ( len R17 ) = ( width C119 ) & ( width R17 ) = ( width C120 ) & ( C119 * R17 ) = C120)) by L1551;
L1553: R1 = ( {} ) by L1552 , L1549 , MATRIX_1:def 3;
thus L1554: thesis by L1553 , TARSKI:def 1;
end;
L1555: ( len C120 ) = ( 0 ) by MATRIX_1:def 2;
L1556: (C120 = ( {} ) & ( width C120 ) = ( 0 )) by L1555 , MATRIX_1:def 3;
L1557: ( width C119 ) = ( 0 ) by L1549 , MATRIX_1:def 3;
L1558: ( len ( C119 * C119 ) ) = ( 0 ) by L1557 , L1549 , MATRIX_3:def 4;
L1559: ( C119 * C119 ) = ( {} ) by L1558;
L1560: C119 in ( Solutions_of (C119 , C120) ) by L1559 , L1549 , L1557 , L1556;
thus L1561: thesis by L1560 , L1550 , ZFMISC_1:33;
end;
theorem
L1562: (for R5 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B120 being (Matrix of R9) holds (( Solutions_of (( 0. (R9 , R8 , R5) ) , B120) ) is non  empty implies B120 = ( 0. (R9 , R8 , ( width B120 )) ))))))
proof
let R5 being Nat;
let R8 being Nat;
let R9 being Field;
let C121 being (Matrix of R9);
set D221 = ( 0. (R9 , R8 , R5) );
set D222 = ( 0. (R9 , R8 , ( width C121 )) );
assume L1563: ( Solutions_of (( 0. (R9 , R8 , R5) ) , C121) ) is non  empty;
consider R1 being set such that L1564: R1 in ( Solutions_of (( 0. (R9 , R8 , R5) ) , C121) ) by L1563 , XBOOLE_0:def 1;
L1565: ( len D221 ) = R8 by MATRIX_1:def 2;
L1566: ( dom D221 ) = ( Seg R8 ) by L1565 , FINSEQ_1:def 3;
L1567: ( len D222 ) = R8 by MATRIX_1:def 2;
L1568: ( len C121 ) = ( len D222 ) by L1567 , L1564 , L1565 , L937;
reconsider D223 = C121 as (Matrix of R8 , ( width C121 ) , R9) by L1568 , L1567 , MATRIX_2:7;
L1569: (ex R17 being (Matrix of R9) st (R17 = R1 & ( len R17 ) = ( width D221 ) & ( width R17 ) = ( width C121 ) & ( D221 * R17 ) = C121)) by L1564;
L1570:
now
let R3 being Nat;
assume that
L1571: (1 <= R3 & R3 <= R8);
L1572: ( width D221 ) = R5 by L1571 , MATRIX_1:23;
L1573: R3 in ( NAT ) by ORDINAL1:def 12;
L1574: R3 in ( Seg R8 ) by L1573 , L1571;
L1575: ( Line (D221 , R3) ) = ( D221 . R3 ) by L1574 , MATRIX_2:8
.= ( ( width D221 ) |-> ( 0. R9 ) ) by L1574 , L1572 , FINSEQ_2:57;
L1576: ( ( width C121 ) |-> ( 0. R9 ) ) = ( Line (C121 , R3) ) by L1575 , L1564 , L1569 , L1566 , L1574 , L1163
.= ( D223 . R3 ) by L1574 , MATRIX_2:8;
thus L1577: ( C121 . R3 ) = ( D222 . R3 ) by L1576 , L1574 , FINSEQ_2:57;
end;
thus L1578: thesis by L1570 , L1567 , L1568 , FINSEQ_1:14;
end;
theorem
L1579: (for R1 being set holds (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B121 being (Matrix of R8 , R5 , R9) holds (for B122 being (Matrix of R8 , R7 , R9) holds (R8 > ( 0 ) implies (R1 in ( Solutions_of (B121 , B122) ) implies R1 is (Matrix of R5 , R7 , R9))))))))))
proof
let R1 being set;
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let C122 being (Matrix of R8 , R5 , R9);
let C123 being (Matrix of R8 , R7 , R9);
assume L1580: R8 > ( 0 );
L1581: (( width C122 ) = R5 & ( width C123 ) = R7) by L1580 , MATRIX_1:23;
assume L1582: R1 in ( Solutions_of (C122 , C123) );
L1583: (ex R17 being (Matrix of R9) st (R17 = R1 & ( len R17 ) = R5 & ( width R17 ) = R7 & ( C122 * R17 ) = C123)) by L1582 , L1581;
thus L1584: thesis by L1583 , MATRIX_2:7;
end;
theorem
L1585: (for R5 being Nat holds (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds ((R8 > ( 0 ) & R5 > ( 0 )) implies ( Solutions_of (( 0. (R9 , R8 , R5) ) , ( 0. (R9 , R8 , R7) )) ) = { B123 where B123 is (Matrix of R5 , R7 , R9) : (not contradiction) })))))
proof
let R5 being Nat;
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
assume that
L1586: R8 > ( 0 )
and
L1587: R5 > ( 0 );
set D224 = ( 0. (R9 , R8 , R7) );
L1588: ( width D224 ) = R7 by L1586 , MATRIX_1:23;
set D225 = { B124 where B124 is (Matrix of R5 , R7 , R9) : (not contradiction) };
set D226 = ( 0. (R9 , R8 , R5) );
thus L1589: ( Solutions_of (D226 , D224) ) c= D225
proof
let R1 being set;
assume L1590: R1 in ( Solutions_of (D226 , D224) );
L1591: R1 is (Matrix of R5 , R7 , R9) by L1590 , L1586 , L1579;
thus L1592: thesis by L1591;
end;

let R1 being set;
assume L1593: R1 in D225;
consider C124 being (Matrix of R5 , R7 , R9) such that L1594: R1 = C124 and L1595: (not contradiction) by L1593;
L1596: (( width D226 ) = R5 & ( len C124 ) = R5) by L1586 , L1587 , MATRIX_1:23;
L1597: ( width C124 ) = R7 by L1587 , MATRIX_1:23;
L1598: ( len D226 ) = R8 by L1586 , MATRIX_1:23;
L1599: ( D226 * C124 ) = D224 by L1598 , L1586 , L1587 , L1596 , L1597 , MATRIX_5:22;
thus L1600: thesis by L1599 , L1594 , L1588 , L1596 , L1597;
end;
theorem
L1601: (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds ((R8 > ( 0 ) & ( Solutions_of (( 0. (R9 , R8 , ( 0 )) ) , ( 0. (R9 , R8 , R7) )) ) is non  empty) implies R7 = ( 0 )))))
proof
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
assume that
L1602: R8 > ( 0 )
and
L1603: ( Solutions_of (( 0. (R9 , R8 , ( 0 )) ) , ( 0. (R9 , R8 , R7) )) ) is non  empty;
consider R1 being set such that L1604: R1 in ( Solutions_of (( 0. (R9 , R8 , ( 0 )) ) , ( 0. (R9 , R8 , R7) )) ) by L1603 , XBOOLE_0:def 1;
L1605: ( width ( 0. (R9 , R8 , ( 0 )) ) ) = ( 0 ) by L1602 , MATRIX_1:23;
L1606: (ex R17 being (Matrix of R9) st (R17 = R1 & ( len R17 ) = ( width ( 0. (R9 , R8 , ( 0 )) ) ) & ( width R17 ) = ( width ( 0. (R9 , R8 , R7) ) ) & ( ( 0. (R9 , R8 , ( 0 )) ) * R17 ) = ( 0. (R9 , R8 , R7) ))) by L1604;
thus L1607: ( 0 ) = ( width ( 0. (R9 , R8 , R7) ) ) by L1606 , L1605 , MATRIX_1:def 3
.= R7 by L1602 , MATRIX_1:23;
end;
theorem
L1608: (for R8 being Nat holds (for R9 being Field holds ( Solutions_of (( 0. (R9 , R8 , ( 0 )) ) , ( 0. (R9 , R8 , ( 0 )) )) ) = { ( {} ) }))
proof
let R8 being Nat;
let R9 being Field;
per cases ;
suppose L1609: R8 = ( 0 );

thus L1610: thesis by L1609 , L1548;
end;
suppose L1611: R8 > ( 0 );

set D227 = ( 0. (R9 , R8 , ( 0 )) );
set D228 = ( 0. (R9 , R8 , ( 0 )) );
reconsider D229 = ( {} ) as (Matrix of ( 0 ) , ( 0 ) , R9) by MATRIX_1:13;
L1612: ( width D228 ) = ( 0 ) by L1611 , MATRIX_1:23;
L1613: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( Indices D227 ) implies ( D227 * (R3 , R4) ) = ( ( D228 * D229 ) * (R3 , R4) )))) by L1612 , ZFMISC_1:90;
L1614: ( Solutions_of (D228 , D227) ) c= { ( {} ) }
proof
let R1 being set;
assume L1615: R1 in ( Solutions_of (D228 , D227) );
reconsider D230 = R1 as (Matrix of ( 0 ) , ( 0 ) , R9) by L1615 , L1611 , L1579;
L1616: ( len D230 ) = ( 0 ) by MATRIX_1:def 2;
L1617: D230 = ( {} ) by L1616;
thus L1618: thesis by L1617 , TARSKI:def 1;
end;
L1619: ( len D229 ) = ( 0 );
L1620: ( width D229 ) = ( 0 ) by MATRIX_1:24;
L1621: ( width ( D228 * D229 ) ) = ( 0 ) by L1620 , L1612 , L1619 , MATRIX_3:def 4;
L1622: ( len D228 ) = R8 by L1611 , MATRIX_1:23;
L1623: ( len ( D228 * D229 ) ) = R8 by L1622 , L1612 , L1619 , MATRIX_3:def 4;
L1624: ( D228 * D229 ) = D227 by L1623 , L1622 , L1612 , L1621 , L1613 , MATRIX_1:21;
L1625: D229 in ( Solutions_of (D228 , D227) ) by L1624 , L1612 , L1619 , L1620;
thus L1626: thesis by L1625 , L1614 , ZFMISC_1:33;
end;
end;
begin
scheme GAUSS1 { F1() -> Field , F2 , F3 , F4() -> Nat , F5() -> (Matrix of F2() , F3() , F1()) , F6() -> (Matrix of F2() , F4() , F1()) , F7((Matrix of F2() , F4() , F1()) , Nat , Nat , (Element of F1())) -> (Matrix of F2() , F4() , F1()) , P1[set , set] } : (ex B125 being (Matrix of F2() , F3() , F1()) st (ex B126 being (Matrix of F2() , F4() , F1()) st (ex B127 being  without_zero  finite (Subset of ( NAT )) st (B127 c= ( Seg F3() ) & ( the_rank_of F5() ) = ( the_rank_of B125 ) & ( the_rank_of F5() ) = ( card B127 ) & P1[ B125 , B126 ] & ( Segm (B125 , ( Seg ( card B127 ) ) , B127) ) is  diagonal & (for R3 being Nat holds (R3 in ( Seg ( card B127 ) ) implies ( B125 * (R3 , ( ( Sgm B127 ) /. R3 )) ) <> ( 0. F1() ))) & (for R3 being Nat holds ((R3 in ( dom B125 ) & R3 > ( card B127 )) implies ( Line (B125 , R3) ) = ( F3() |-> ( 0. F1() ) ))) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card B127 ) ) & R4 in ( Seg ( width B125 ) ) & R4 < ( ( Sgm B127 ) . R3 )) implies ( B125 * (R3 , R4) ) = ( 0. F1() ))))))))
provided
L1628: P1[ F5() , F6() ]
and
L1629: (for B128 being (Matrix of F2() , F3() , F1()) holds (for B129 being (Matrix of F2() , F4() , F1()) holds (P1[ B128 , B129 ] implies (for R3 being Nat holds (for R4 being Nat holds ((R3 <> R4 & R4 in ( dom B128 )) implies (for B130 being (Element of F1()) holds P1[ ( RLine (B128 , R3 , ( ( Line (B128 , R3) ) + ( B130 * ( Line (B128 , R4) ) ) )) ) , F7(B129 , R3 , R4 , B130) ])))))))
proof
defpred S4[ (FinSequence of ( NAT )) , Nat , Nat , (Matrix of F2() , F3() , F1()) ] means (( $4 * ($2 , ( $1 /. $2 )) ) <> ( 0. F1() ) & (($3 in ( dom $1 ) & $2 < $3) implies ( $1 /. $2 ) < ( $1 /. $3 )) & ($3 in ( ( dom $1 ) \ { $2 } ) implies ( $4 * ($3 , ( $1 /. $2 )) ) = ( 0. F1() )) & (($3 in ( Seg ( width $4 ) ) & $3 < ( $1 /. $2 )) implies ( $4 * ($2 , $3) ) = ( 0. F1() )));
set D231 = ( the_rank_of F5() );
L1630: (ex B131 being (Matrix of F2() , F3() , F1()) st (ex B132 being (Matrix of F2() , F4() , F1()) st (P1[ B131 , B132 ] & D231 = ( the_rank_of B131 ) & (for R3 being Nat holds ((R3 in ( dom B131 ) & R3 > D231) implies ( Line (B131 , R3) ) = ( F3() |-> ( 0. F1() ) ))) & (ex B133 being (FinSequence of ( NAT )) st (( len B133 ) = ( the_rank_of B131 ) & B133 is  one-to-one & ( rng B133 ) c= ( Seg ( width B131 ) ) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom B133 ) implies S4[ B133 , R3 , R4 , B131 ]))))))))
proof
per cases ;
suppose L1631: F2() = ( 0 );

take D232 = F5();
take D233 = F6();
L1632: (( dom D232 ) = ( Seg ( len D232 ) ) & ( len D232 ) = ( 0 )) by L1631 , FINSEQ_1:def 3 , MATRIX_1:def 2;
thus L1633: (P1[ D232 , D233 ] & D231 = ( the_rank_of D232 ) & (for R3 being Nat holds ((R3 in ( dom D232 ) & R3 > D231) implies ( Line (D232 , R3) ) = ( F3() |-> ( 0. F1() ) )))) by L1632 , L1628;
take ( <*> ( NAT ) );
L1634: ( len D232 ) = ( 0 ) by L1631 , MATRIX_1:22;
thus L1635: thesis by L1634 , MATRIX13:74 , XBOOLE_1:2;
end;
suppose L1636: F2() > ( 0 );

defpred S5[ Nat ] means ($1 <= F3() implies (ex B134 being (Matrix of F2() , F3() , F1()) st (ex B135 being (Matrix of F2() , F4() , F1()) st (P1[ B134 , B135 ] & D231 = ( the_rank_of B134 ) & (ex B136 being (FinSequence of ( NAT )) st ((for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices B134 ) & R3 > ( len B136 ) & R4 <= $1) implies ( B134 * (R3 , R4) ) = ( 0. F1() )))) & B136 is  one-to-one & ( len B136 ) <= $1 & ( len B136 ) <= F2() & ( rng B136 ) c= ( Seg $1 ) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom B136 ) implies S4[ B136 , R3 , R4 , B134 ])))))))));
L1637: (for R8 being Nat holds (S5[ R8 ] implies S5[ ( R8 + 1 ) ]))
proof
let R8 being Nat;
assume that
L1638: S5[ R8 ];
set D234 = ( R8 + 1 );
assume L1639: D234 <= F3();
consider C125 being (Matrix of F2() , F3() , F1()), C126 being (Matrix of F2() , F4() , F1()) such that L1640: (P1[ C125 , C126 ] & D231 = ( the_rank_of C125 )) and L1641: (ex B137 being (FinSequence of ( NAT )) st ((for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C125 ) & R3 > ( len B137 ) & R4 <= R8) implies ( C125 * (R3 , R4) ) = ( 0. F1() )))) & B137 is  one-to-one & ( len B137 ) <= R8 & ( len B137 ) <= F2() & ( rng B137 ) c= ( Seg R8 ) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom B137 ) implies S4[ B137 , R3 , R4 , C125 ]))))) by L1639 , L1638 , NAT_1:13;
consider C127 being (FinSequence of ( NAT )) such that L1642: (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C125 ) & R3 > ( len C127 ) & R4 <= R8) implies ( C125 * (R3 , R4) ) = ( 0. F1() )))) and L1643: C127 is  one-to-one and L1644: ( len C127 ) <= R8 and L1645: ( len C127 ) <= F2() and L1646: ( rng C127 ) c= ( Seg R8 ) and L1647: (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C127 ) implies S4[ C127 , R3 , R4 , C125 ]))) by L1641;
per cases ;
suppose L1648: (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C125 ) & R3 > ( len C127 ) & R4 = D234) implies ( C125 * (R3 , R4) ) = ( 0. F1() ))));

L1649:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1650: ([ R3 , R4 ] in ( Indices C125 ) & R3 > ( len C127 ))
and
L1651: R4 <= D234;
L1652: (R4 <= R8 or R4 = D234) by L1651 , NAT_1:8;
thus L1653: ( C125 * (R3 , R4) ) = ( 0. F1() ) by L1652 , L1642 , L1648 , L1650;
end;
L1654: R8 <= D234 by NAT_1:13;
L1655: ( Seg R8 ) c= ( Seg D234 ) by L1654 , FINSEQ_1:5;
L1656: ( rng C127 ) c= ( Seg D234 ) by L1655 , L1646 , XBOOLE_1:1;
L1657: ( len C127 ) <= D234 by L1644 , NAT_1:12;
thus L1658: thesis by L1657 , L1640 , L1643 , L1645 , L1647 , L1649 , L1656;
end;
suppose L1659: (ex R3 being Nat st (ex R4 being Nat st ([ R3 , R4 ] in ( Indices C125 ) & R3 > ( len C127 ) & R4 = D234 & ( C125 * (R3 , R4) ) <> ( 0. F1() ))));

consider C128 , C129 being Nat such that L1660: [ C128 , C129 ] in ( Indices C125 ) and L1661: C128 > ( len C127 ) and L1662: C129 = D234 and L1663: ( C125 * (C128 , C129) ) <> ( 0. F1() ) by L1659;
L1664: ( Indices C125 ) = [: ( Seg F2() ) , ( Seg F3() ) :] by L1636 , MATRIX_1:23;
L1665: D234 in ( Seg F3() ) by L1664 , L1660 , L1662 , ZFMISC_1:87;
L1666: C128 in ( Seg F2() ) by L1660 , L1664 , ZFMISC_1:87;
L1667: C128 <= F2() by L1666 , FINSEQ_1:1;
L1668: ( ( len C127 ) + 1 ) <= C128 by L1661 , NAT_1:13;
L1669: (( ( 0 ) + 1 ) <= ( ( len C127 ) + 1 ) & ( ( len C127 ) + 1 ) <= F2()) by L1668 , L1667 , XREAL_1:7 , XXREAL_0:2;
L1670: ( ( len C127 ) + 1 ) in ( Seg F2() ) by L1669;
defpred S6[ Nat ] means ($1 <= F2() implies (ex B138 being (Matrix of F2() , F3() , F1()) st (ex B139 being (Matrix of F2() , F4() , F1()) st (P1[ B138 , B139 ] & D231 = ( the_rank_of B138 ) & ( B138 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) & (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices B138 ) & R3 > ( len C127 ) & R4 <= R8) implies ( B138 * (R3 , R4) ) = ( 0. F1() )))) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C127 ) implies S4[ C127 , R3 , R4 , B138 ]))) & (for R4 being Nat holds ((R4 in ( ( dom B138 ) \ { ( ( len C127 ) + 1 ) } ) & R4 <= $1) implies ( B138 * (R4 , D234) ) = ( 0. F1() )))))));
L1671: ( dom C127 ) = ( Seg ( len C127 ) ) by FINSEQ_1:def 3;
L1672: R8 <= F3() by L1639 , NAT_1:13;
L1673: ( Seg R8 ) c= ( Seg F3() ) by L1672 , FINSEQ_1:5;
L1674: ( Seg ( len C127 ) ) c= ( Seg F2() ) by L1645 , FINSEQ_1:5;
L1675: (for R5 being Nat holds (S6[ R5 ] implies S6[ ( R5 + 1 ) ]))
proof
let R5 being Nat;
assume that
L1676: S6[ R5 ];
set D235 = ( R5 + 1 );
assume L1677: D235 <= F2();
consider C130 being (Matrix of F2() , F3() , F1()), C131 being (Matrix of F2() , F4() , F1()) such that L1678: P1[ C130 , C131 ] and L1679: D231 = ( the_rank_of C130 ) and L1680: ( C130 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) and L1681: (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C130 ) & R3 > ( len C127 ) & R4 <= R8) implies ( C130 * (R3 , R4) ) = ( 0. F1() )))) and L1682: (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C127 ) implies S4[ C127 , R3 , R4 , C130 ]))) and L1683: (for R4 being Nat holds ((R4 in ( ( dom C130 ) \ { ( ( len C127 ) + 1 ) } ) & R4 <= R5) implies ( C130 * (R4 , D234) ) = ( 0. F1() ))) by L1677 , L1676 , NAT_1:13;
L1684:
now
per cases ;
suppose L1685: D235 = ( ( len C127 ) + 1 );

take D236 = C130;
take D237 = C131;
L1686:
now
let R4 being Nat;
assume that
L1687: R4 in ( ( dom D236 ) \ { ( ( len C127 ) + 1 ) } )
and
L1688: R4 <= D235;
L1689: R4 <> ( ( len C127 ) + 1 ) by L1687 , ZFMISC_1:56;
L1690: R4 < ( R5 + 1 ) by L1689 , L1685 , L1688 , XXREAL_0:1;
L1691: R4 <= R5 by L1690 , NAT_1:13;
thus L1692: ( D236 * (R4 , D234) ) = ( 0. F1() ) by L1691 , L1683 , L1687;
end;
thus L1693: thesis by L1686 , L1678 , L1679 , L1680 , L1681 , L1682;
end;
suppose L1694: D235 <> ( ( len C127 ) + 1 );

set D238 = ( Line (C130 , D235) );
set D239 = ( Line (C130 , ( ( len C127 ) + 1 )) );
set D240 = ( C130 * (( ( len C127 ) + 1 ) , D234) );
set D241 = ( RLine (C130 , D235 , ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) )) );
L1695: ( width C130 ) = F3() by L1636 , MATRIX_1:23;
L1696: ( len ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) ) ) = F3() by L1695 , CARD_1:def 7;
L1697: ( Indices C125 ) = ( Indices C130 ) by MATRIX_1:26;
L1698: [ ( ( len C127 ) + 1 ) , D234 ] in ( Indices C130 ) by L1697 , L1664 , L1670 , L1665 , ZFMISC_1:87;
L1699: ( D241 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) by L1698 , L1680 , L1694 , L1695 , L1696 , MATRIX11:def 3;
L1700: ( Indices C125 ) = ( Indices D241 ) by MATRIX_1:26;
L1701:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1702: [ R3 , R4 ] in ( Indices D241 )
and
L1703: R3 > ( len C127 )
and
L1704: R4 <= R8;
L1705:
now
per cases ;
suppose L1706: R3 = D235;

L1707: R4 in ( Seg F3() ) by L1664 , L1700 , L1702 , ZFMISC_1:87;
L1708: (( ( len C127 ) + 1 ) > ( len C127 ) & [ ( ( len C127 ) + 1 ) , R4 ] in ( Indices C125 )) by L1707 , L1664 , L1670 , NAT_1:13 , ZFMISC_1:87;
L1709: ( C130 * (( ( len C127 ) + 1 ) , R4) ) = ( 0. F1() ) by L1708 , L1681 , L1697 , L1704;
L1710: ( D239 . R4 ) = ( 0. F1() ) by L1709 , L1695 , L1707 , MATRIX_1:def 7;
L1711: ( ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) . R4 ) = ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * ( 0. F1() ) ) by L1710 , L1695 , L1707 , FVSUM_1:51
.= ( 0. F1() ) by VECTSP_1:6;
L1712: ( D238 . R4 ) = ( C130 * (D235 , R4) ) by L1695 , L1707 , MATRIX_1:def 7
.= ( 0. F1() ) by L1681 , L1697 , L1700 , L1702 , L1703 , L1704 , L1706;
L1713: ( ( 0. F1() ) + ( 0. F1() ) ) = ( ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) ) . R4 ) by L1712 , L1695 , L1707 , L1711 , FVSUM_1:18
.= ( D241 * (R3 , R4) ) by L1697 , L1700 , L1695 , L1696 , L1702 , L1706 , MATRIX11:def 3;
thus L1714: ( D241 * (R3 , R4) ) = ( 0. F1() ) by L1713 , RLVECT_1:def 4;
end;
suppose L1715: R3 <> D235;

thus L1716: ( D241 * (R3 , R4) ) = ( C130 * (R3 , R4) ) by L1715 , L1697 , L1700 , L1695 , L1696 , L1702 , MATRIX11:def 3
.= ( 0. F1() ) by L1681 , L1697 , L1700 , L1702 , L1703 , L1704;
end;
end;
thus L1718: ( D241 * (R3 , R4) ) = ( 0. F1() ) by L1705;
end;
set D242 = F7(C131 , D235 , ( ( len C127 ) + 1 ) , ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ));
take D243 = D241;
take D244 = D242;
L1719: ( width D243 ) = F3() by L1636 , MATRIX_1:23;
L1720: ( len C130 ) = F2() by MATRIX_1:def 2;
L1721:
now
L1722: ( dom C130 ) = ( Seg ( len C130 ) ) by FINSEQ_1:def 3;
let R4 being Nat;
assume that
L1723: R4 in ( ( dom D243 ) \ { ( ( len C127 ) + 1 ) } )
and
L1724: R4 <= D235;
L1725: R4 in ( dom D243 ) by L1723 , XBOOLE_0:def 5;
L1726: [ R4 , D234 ] in ( Indices C130 ) by L1725 , L1665 , L1697 , L1700 , L1719 , ZFMISC_1:87;
L1727: (( dom D243 ) = ( Seg ( len D243 ) ) & ( len D243 ) = F2()) by FINSEQ_1:def 3 , MATRIX_1:def 2;
L1728:
now
per cases  by L1724 , NAT_1:8;
suppose L1729: R4 <= R5;

L1730: R4 < D235 by L1729 , NAT_1:13;
thus L1731: ( D243 * (R4 , D234) ) = ( C130 * (R4 , D234) ) by L1730 , L1695 , L1696 , L1726 , MATRIX11:def 3
.= ( 0. F1() ) by L1683 , L1720 , L1723 , L1727 , L1722 , L1729;
end;
suppose L1732: R4 = D235;

L1733: ( D239 . D234 ) = D240 by L1665 , L1695 , MATRIX_1:def 7;
L1734: ( ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) . D234 ) = ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D240 ) by L1733 , L1665 , L1695 , FVSUM_1:51
.= ( ( ( - ( C130 * (D235 , D234) ) ) * ( D240 " ) ) * D240 ) by VECTSP_1:9
.= ( ( - ( C130 * (D235 , D234) ) ) * ( ( D240 " ) * D240 ) ) by GROUP_1:def 3
.= ( ( - ( C130 * (D235 , D234) ) ) * ( 1_ F1() ) ) by L1680 , VECTSP_1:def 10
.= ( - ( C130 * (D235 , D234) ) ) by VECTSP_1:def 4;
L1735: ( D238 . D234 ) = ( C130 * (D235 , D234) ) by L1665 , L1695 , MATRIX_1:def 7;
L1736: ( ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) ) . D234 ) = ( ( C130 * (D235 , D234) ) + ( - ( C130 * (D235 , D234) ) ) ) by L1735 , L1665 , L1695 , L1734 , FVSUM_1:18
.= ( 0. F1() ) by VECTSP_1:19;
thus L1737: ( D243 * (R4 , D234) ) = ( 0. F1() ) by L1736 , L1695 , L1696 , L1726 , L1732 , MATRIX11:def 3;
end;
end;
thus L1739: ( D243 * (R4 , D234) ) = ( 0. F1() ) by L1728;
end;
L1740: ( dom C130 ) = ( Seg ( len C130 ) ) by FINSEQ_1:def 3;
L1741:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1742: R3 in ( dom C127 );
set D245 = ( C127 /. R3 );
L1743: (D245 = ( C127 . R3 ) & ( C127 . R3 ) in ( rng C127 )) by L1742 , FUNCT_1:def 3 , PARTFUN1:def 6;
L1744: D245 in ( Seg R8 ) by L1743 , L1646;
L1745: (( ( len C127 ) + 1 ) > ( len C127 ) & D245 <= R8) by L1646 , L1743 , FINSEQ_1:1 , NAT_1:13;
L1746: ([ ( ( len C127 ) + 1 ) , D245 ] in ( Indices C130 ) & ( D239 . D245 ) = ( C130 * (( ( len C127 ) + 1 ) , D245) )) by L1664 , L1673 , L1670 , L1697 , L1695 , L1744 , MATRIX_1:def 7 , ZFMISC_1:87;
L1747: ( D239 . D245 ) = ( 0. F1() ) by L1746 , L1681 , L1745;
L1748: ( ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) . D245 ) = ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * ( 0. F1() ) ) by L1747 , L1673 , L1695 , L1744 , FVSUM_1:51
.= ( 0. F1() ) by VECTSP_1:12;
L1749: ( D238 . D245 ) = ( C130 * (D235 , D245) ) by L1673 , L1695 , L1744 , MATRIX_1:def 7;
L1750: ( ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) ) . D245 ) = ( ( C130 * (D235 , D245) ) + ( 0. F1() ) ) by L1749 , L1673 , L1695 , L1744 , L1748 , FVSUM_1:18
.= ( C130 * (D235 , D245) ) by RLVECT_1:def 4;
L1751: [ R3 , D245 ] in ( Indices C130 ) by L1664 , L1673 , L1674 , L1671 , L1697 , L1742 , L1744 , ZFMISC_1:87;
L1752:
now
per cases ;
suppose L1753: R3 <> D235;

L1754: ( D243 * (R3 , D245) ) = ( C130 * (R3 , D245) ) by L1753 , L1695 , L1696 , L1751 , MATRIX11:def 3;
thus L1755: ( D243 * (R3 , D245) ) <> ( 0. F1() ) by L1754 , L1682 , L1742;
end;
suppose L1756: R3 = D235;

L1757: ( D243 * (R3 , D245) ) = ( C130 * (R3 , D245) ) by L1756 , L1695 , L1696 , L1751 , L1750 , MATRIX11:def 3;
thus L1758: ( D243 * (R3 , ( C127 /. R3 )) ) <> ( 0. F1() ) by L1757 , L1682 , L1742;
end;
end;
thus L1760: (( D243 * (R3 , D245) ) <> ( 0. F1() ) & ((R4 in ( dom C127 ) & R3 < R4) implies D245 < ( C127 /. R4 ))) by L1752 , L1647 , L1742;
thus L1761: (R4 in ( ( dom C127 ) \ { R3 } ) implies ( D243 * (R4 , D245) ) = ( 0. F1() ))
proof
assume L1762: R4 in ( ( dom C127 ) \ { R3 } );
L1763: R4 in ( Seg ( len C127 ) ) by L1762 , L1671 , XBOOLE_0:def 5;
L1764: [ R4 , D245 ] in ( Indices C130 ) by L1763 , L1664 , L1673 , L1674 , L1697 , L1744 , ZFMISC_1:87;
per cases ;
suppose L1765: R4 <> D235;

thus L1766: ( D243 * (R4 , D245) ) = ( C130 * (R4 , D245) ) by L1765 , L1695 , L1696 , L1764 , MATRIX11:def 3
.= ( 0. F1() ) by L1682 , L1742 , L1762;
end;
suppose L1767: R4 = D235;

thus L1768: ( D243 * (R4 , D245) ) = ( ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) ) . D245 ) by L1767 , L1695 , L1696 , L1764 , MATRIX11:def 3
.= ( 0. F1() ) by L1682 , L1742 , L1750 , L1762 , L1767;
end;
end;

thus L1770: ((R4 in ( Seg ( width D243 ) ) & R4 < ( C127 /. R3 )) implies ( D243 * (R3 , R4) ) = ( 0. F1() ))
proof
assume that
L1771: R4 in ( Seg ( width D243 ) )
and
L1772: R4 < ( C127 /. R3 );
L1773: [ ( ( len C127 ) + 1 ) , R4 ] in ( Indices C130 ) by L1670 , L1720 , L1740 , L1695 , L1719 , L1771 , ZFMISC_1:87;
L1774: [ R3 , R4 ] in ( Indices C130 ) by L1674 , L1671 , L1720 , L1740 , L1695 , L1719 , L1742 , L1771 , ZFMISC_1:87;
per cases ;
suppose L1775: R3 <> D235;

thus L1776: ( D243 * (R3 , R4) ) = ( C130 * (R3 , R4) ) by L1775 , L1695 , L1696 , L1774 , MATRIX11:def 3
.= ( 0. F1() ) by L1682 , L1695 , L1719 , L1742 , L1771 , L1772;
end;
suppose L1777: R3 = D235;

L1778: D245 <= R8 by L1646 , L1743 , FINSEQ_1:1;
L1779: R4 <= R8 by L1778 , L1772 , XXREAL_0:2;
L1780: ( ( len C127 ) + 1 ) > ( len C127 ) by NAT_1:13;
L1781: ( 0. F1() ) = ( C130 * (( ( len C127 ) + 1 ) , R4) ) by L1780 , L1681 , L1773 , L1779
.= ( D239 . R4 ) by L1695 , L1719 , L1771 , MATRIX_1:def 7;
L1782: ( ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) . R4 ) = ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * ( 0. F1() ) ) by L1781 , L1695 , L1719 , L1771 , FVSUM_1:51
.= ( 0. F1() ) by VECTSP_1:6;
L1783: ( D238 . R4 ) = ( C130 * (R3 , R4) ) by L1695 , L1719 , L1771 , L1777 , MATRIX_1:def 7
.= ( 0. F1() ) by L1682 , L1695 , L1719 , L1742 , L1771 , L1772;
L1784: ( ( D238 + ( ( - ( ( C130 * (D235 , D234) ) * ( D240 " ) ) ) * D239 ) ) . R4 ) = ( ( 0. F1() ) + ( 0. F1() ) ) by L1783 , L1695 , L1719 , L1771 , L1782 , FVSUM_1:18
.= ( 0. F1() ) by RLVECT_1:def 4;
thus L1785: thesis by L1784 , L1695 , L1696 , L1774 , L1777 , MATRIX11:def 3;
end;
end;

end;
L1771: ( ( len C127 ) + 1 ) in ( Seg ( len C130 ) ) by L1636 , L1670 , MATRIX_1:23;
L1772: D231 = ( the_rank_of D243 ) by L1771 , L1679 , L1694 , MATRIX13:92;
L1773: P1[ D243 , D244 ] by L1629 , L1678 , L1694 , L1771 , L1740;
thus L1774: thesis by L1773 , L1772 , L1699 , L1701 , L1741 , L1721;
end;
end;
thus L1776: thesis by L1684;
end;
L1777: C129 in ( Seg F3() ) by L1660 , L1664 , ZFMISC_1:87;
L1778: (ex B140 being (Matrix of F2() , F3() , F1()) st (ex B141 being (Matrix of F2() , F4() , F1()) st (P1[ B140 , B141 ] & D231 = ( the_rank_of B140 ) & ( B140 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) & (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices B140 ) & R3 > ( len C127 ) & R4 <= R8) implies ( B140 * (R3 , R4) ) = ( 0. F1() )))) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C127 ) implies S4[ C127 , R3 , R4 , B140 ]))))))
proof
per cases ;
suppose L1779: ( C125 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() );

thus L1780: thesis by L1779 , L1640 , L1642 , L1647;
end;
suppose L1781: ( C125 * (( ( len C127 ) + 1 ) , D234) ) = ( 0. F1() );

set D246 = F7(C126 , ( ( len C127 ) + 1 ) , C128 , ( 1_ F1() ));
set D247 = ( Line (C125 , C128) );
set D248 = ( Line (C125 , ( ( len C127 ) + 1 )) );
set D249 = ( RLine (C125 , ( ( len C127 ) + 1 ) , ( D248 + ( ( 1_ F1() ) * D247 ) )) );
take D249;
take D246;
L1782: (C128 in ( dom C125 ) & ( dom C125 ) = ( Seg ( len C125 ) )) by L1660 , FINSEQ_1:def 3 , ZFMISC_1:87;
thus L1783: (P1[ D249 , D246 ] & D231 = ( the_rank_of D249 )) by L1782 , L1629 , L1640 , L1662 , L1663 , L1781 , MATRIX13:92;
L1784: (( ( 1_ F1() ) * D247 ) = D247 & ( len ( D248 + D247 ) ) = ( width C125 )) by CARD_1:def 7 , FVSUM_1:57;
L1785: [ ( ( len C127 ) + 1 ) , C129 ] in ( Indices C125 ) by L1664 , L1670 , L1777 , ZFMISC_1:87;
L1786: ( D249 * (( ( len C127 ) + 1 ) , D234) ) = ( ( D248 + D247 ) . D234 ) by L1785 , L1662 , L1784 , MATRIX11:def 3;
L1787: ( width C125 ) = F3() by L1636 , MATRIX_1:23;
L1788: ( D247 . D234 ) = ( C125 * (C128 , D234) ) by L1787 , L1662 , L1777 , MATRIX_1:def 7;
L1789: ( D248 . D234 ) = ( 0. F1() ) by L1662 , L1777 , L1781 , L1787 , MATRIX_1:def 7;
L1790: ( D249 * (( ( len C127 ) + 1 ) , D234) ) = ( ( 0. F1() ) + ( C125 * (C128 , D234) ) ) by L1789 , L1665 , L1787 , L1786 , L1788 , FVSUM_1:18
.= ( C125 * (C128 , D234) ) by RLVECT_1:def 4;
thus L1791: ( D249 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) by L1790 , L1662 , L1663;
L1792: ( Indices D249 ) = ( Indices C125 ) by MATRIX_1:26;
L1793:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1794: [ R3 , R4 ] in ( Indices D249 )
and
L1795: R3 > ( len C127 )
and
L1796: R4 <= R8;
L1797: R4 in ( Seg F3() ) by L1787 , L1792 , L1794 , ZFMISC_1:87;
L1798: R3 >= ( ( len C127 ) + 1 ) by L1795 , NAT_1:13;
L1799:
now
per cases  by L1798 , XXREAL_0:1;
suppose L1800: R3 > ( ( len C127 ) + 1 );

thus L1801: ( D249 * (R3 , R4) ) = ( C125 * (R3 , R4) ) by L1800 , L1784 , L1792 , L1794 , MATRIX11:def 3
.= ( 0. F1() ) by L1642 , L1792 , L1794 , L1795 , L1796;
end;
suppose L1802: R3 = ( ( len C127 ) + 1 );

L1803: [ C128 , R4 ] in ( Indices C125 ) by L1664 , L1666 , L1797 , ZFMISC_1:87;
L1804: (( D248 . R4 ) = ( C125 * (( ( len C127 ) + 1 ) , R4) ) & ( D247 . R4 ) = ( C125 * (C128 , R4) )) by L1787 , L1797 , MATRIX_1:def 7;
L1805: ( D249 * (R3 , R4) ) = ( ( D248 + D247 ) . R4 ) by L1784 , L1792 , L1794 , L1802 , MATRIX11:def 3;
thus L1806: ( D249 * (R3 , R4) ) = ( ( C125 * (( ( len C127 ) + 1 ) , R4) ) + ( C125 * (C128 , R4) ) ) by L1805 , L1787 , L1797 , L1804 , FVSUM_1:18
.= ( ( 0. F1() ) + ( C125 * (C128 , R4) ) ) by L1642 , L1792 , L1794 , L1795 , L1796 , L1802
.= ( ( 0. F1() ) + ( 0. F1() ) ) by L1642 , L1661 , L1796 , L1803
.= ( 0. F1() ) by RLVECT_1:def 4;
end;
end;
thus L1808: ( D249 * (R3 , R4) ) = ( 0. F1() ) by L1799;
end;
thus L1809: (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices D249 ) & R3 > ( len C127 ) & R4 <= R8) implies ( D249 * (R3 , R4) ) = ( 0. F1() )))) by L1793;
let R3 being Nat;
let R4 being Nat;
assume that
L1810: R3 in ( dom C127 );
L1811: R3 <= ( len C127 ) by L1671 , L1810 , FINSEQ_1:1;
L1812: R3 < ( ( len C127 ) + 1 ) by L1811 , NAT_1:13;
L1813: (( C127 /. R3 ) = ( C127 . R3 ) & ( C127 . R3 ) in ( rng C127 )) by L1810 , FUNCT_1:def 3 , PARTFUN1:def 6;
L1814: ( C127 /. R3 ) in ( Seg R8 ) by L1813 , L1646;
L1815: [ R3 , ( C127 /. R3 ) ] in ( Indices C125 ) by L1814 , L1664 , L1673 , L1674 , L1671 , L1810 , ZFMISC_1:87;
L1816: ( D249 * (R3 , ( C127 /. R3 )) ) = ( C125 * (R3 , ( C127 /. R3 )) ) by L1815 , L1784 , L1812 , MATRIX11:def 3;
thus L1817: (( D249 * (R3 , ( C127 /. R3 )) ) <> ( 0. F1() ) & ((R4 in ( dom C127 ) & R3 < R4) implies ( C127 /. R3 ) < ( C127 /. R4 ))) by L1816 , L1647 , L1810;
thus L1818: (R4 in ( ( dom C127 ) \ { R3 } ) implies ( D249 * (R4 , ( C127 /. R3 )) ) = ( 0. F1() ))
proof
assume L1819: R4 in ( ( dom C127 ) \ { R3 } );
L1820: R4 in ( dom C127 ) by L1819 , XBOOLE_0:def 5;
L1821: R4 <= ( len C127 ) by L1820 , L1671 , FINSEQ_1:1;
L1822: R4 < ( ( len C127 ) + 1 ) by L1821 , NAT_1:13;
L1823: [ R4 , ( C127 /. R3 ) ] in ( Indices C125 ) by L1664 , L1673 , L1674 , L1671 , L1814 , L1820 , ZFMISC_1:87;
thus L1824: ( D249 * (R4 , ( C127 /. R3 )) ) = ( C125 * (R4 , ( C127 /. R3 )) ) by L1823 , L1784 , L1822 , MATRIX11:def 3
.= ( 0. F1() ) by L1647 , L1810 , L1819;
end;

assume that
L1825: R4 in ( Seg ( width D249 ) )
and
L1826: R4 < ( C127 /. R3 );
L1827: ( width D249 ) = ( width C125 ) by L1784 , MATRIX11:def 3;
L1828: [ R3 , R4 ] in ( Indices C125 ) by L1827 , L1664 , L1674 , L1671 , L1787 , L1810 , L1825 , ZFMISC_1:87;
thus L1829: ( D249 * (R3 , R4) ) = ( C125 * (R3 , R4) ) by L1828 , L1784 , L1812 , MATRIX11:def 3
.= ( 0. F1() ) by L1647 , L1810 , L1825 , L1826 , L1827;
end;
end;
consider C132 being (Matrix of F2() , F3() , F1()), C133 being (Matrix of F2() , F4() , F1()) such that L1831: (P1[ C132 , C133 ] & D231 = ( the_rank_of C132 ) & ( C132 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) & (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C132 ) & R3 > ( len C127 ) & R4 <= R8) implies ( C132 * (R3 , R4) ) = ( 0. F1() )))) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C127 ) implies S4[ C127 , R3 , R4 , C132 ])))) by L1778;
L1832: S6[ ( 0 ) ]
proof
assume L1833: ( 0 ) <= F2();
take C132;
take C133;
L1834:
now
L1835: ( dom C132 ) = ( Seg ( len C132 ) ) by FINSEQ_1:def 3;
let R4 being Nat;
assume L1836: (R4 in ( ( dom C132 ) \ { ( ( len C127 ) + 1 ) } ) & R4 <= ( 0 ));
thus L1837: ( C132 * (R4 , D234) ) = ( 0. F1() ) by L1836 , L1835;
end;
thus L1838: thesis by L1834 , L1831;
end;
L1839: (for R5 being Nat holds S6[ R5 ]) from NAT_1:sch 2(L1832 , L1675);
consider C134 being (Matrix of F2() , F3() , F1()), C135 being (Matrix of F2() , F4() , F1()) such that L1840: (P1[ C134 , C135 ] & D231 = ( the_rank_of C134 )) and L1841: ( C134 * (( ( len C127 ) + 1 ) , D234) ) <> ( 0. F1() ) and L1842: (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C134 ) & R3 > ( len C127 ) & R4 <= R8) implies ( C134 * (R3 , R4) ) = ( 0. F1() )))) and L1843: (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C127 ) implies S4[ C127 , R3 , R4 , C134 ]))) and L1844: (for R4 being Nat holds ((R4 in ( ( dom C134 ) \ { ( ( len C127 ) + 1 ) } ) & R4 <= F2()) implies ( C134 * (R4 , D234) ) = ( 0. F1() ))) by L1839;
take C134;
take C135;
thus L1845: (P1[ C134 , C135 ] & D231 = ( the_rank_of C134 )) by L1840;
take D250 = ( C127 ^ <* D234 *> );
L1846: ( len D250 ) = ( ( len C127 ) + 1 ) by FINSEQ_2:16;
L1847: (( len C134 ) = F2() & ( dom C134 ) = ( Seg ( len C134 ) )) by L1636 , FINSEQ_1:def 3 , MATRIX_1:23;
L1848:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1849: [ R3 , R4 ] in ( Indices C134 )
and
L1850: R3 > ( len D250 )
and
L1851: R4 <= D234;
per cases  by L1851 , NAT_1:8;
suppose L1852: R4 <= R8;

L1853: R3 > ( len C127 ) by L1846 , L1850 , NAT_1:13;
thus L1854: ( C134 * (R3 , R4) ) = ( 0. F1() ) by L1853 , L1842 , L1849 , L1852;
end;
suppose L1855: R4 = D234;

L1856: R3 in ( dom C134 ) by L1849 , ZFMISC_1:87;
L1857: (R3 in ( ( dom C134 ) \ { ( ( len C127 ) + 1 ) } ) & R3 <= F2()) by L1856 , L1846 , L1847 , L1850 , FINSEQ_1:1 , ZFMISC_1:56;
thus L1858: ( C134 * (R3 , R4) ) = ( 0. F1() ) by L1857 , L1844 , L1855;
end;
end;
L1860: ( width C134 ) = F3() by L1636 , MATRIX_1:23;
L1861: ( len D250 ) <= F2() by L1667 , L1668 , L1846 , XXREAL_0:2;
L1862:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1863: R3 in ( dom D250 );
L1864: ( dom D250 ) = ( Seg ( ( len C127 ) + 1 ) ) by L1846 , FINSEQ_1:def 3
.= ( ( dom C127 ) \/ { ( ( len C127 ) + 1 ) } ) by L1671 , FINSEQ_1:9;
L1865:
now
let R5 being Nat;
assume that
L1866: R5 in ( dom C127 );
L1867: R5 in ( dom D250 ) by L1864 , L1866 , XBOOLE_0:def 3;
thus L1868: ( C127 /. R5 ) = ( C127 . R5 ) by L1866 , PARTFUN1:def 6
.= ( D250 . R5 ) by L1866 , FINSEQ_1:def 7
.= ( D250 /. R5 ) by L1867 , PARTFUN1:def 6;
end;
L1869:
now
per cases  by L1863 , L1864 , XBOOLE_0:def 3;
suppose L1870: R3 in ( dom C127 );

L1871: ( C127 /. R3 ) = ( D250 /. R3 ) by L1870 , L1865;
thus L1872: ( C134 * (R3 , ( D250 /. R3 )) ) <> ( 0. F1() ) by L1871 , L1843 , L1870;
end;
suppose L1873: R3 in { ( ( len C127 ) + 1 ) };

L1874: ( D250 /. R3 ) = ( D250 . R3 ) by L1863 , PARTFUN1:def 6;
L1875: R3 = ( ( len C127 ) + 1 ) by L1873 , TARSKI:def 1;
thus L1876: ( C134 * (R3 , ( D250 /. R3 )) ) <> ( 0. F1() ) by L1875 , L1841 , L1874 , FINSEQ_1:42;
end;
end;
thus L1878: ( C134 * (R3 , ( D250 /. R3 )) ) <> ( 0. F1() ) by L1869;
thus L1879: ((R4 in ( dom D250 ) & R3 < R4) implies ( D250 /. R3 ) < ( D250 /. R4 ))
proof
assume that
L1880: R4 in ( dom D250 )
and
L1881: R3 < R4;
per cases  by L1863 , L1864 , L1880 , XBOOLE_0:def 3;
suppose L1882: (R4 in { ( ( len C127 ) + 1 ) } & R3 in { ( ( len C127 ) + 1 ) });

L1883: R3 = ( ( len C127 ) + 1 ) by L1882 , TARSKI:def 1;
thus L1884: thesis by L1883 , L1881 , L1882 , TARSKI:def 1;
end;
suppose L1885: (R4 in { ( ( len C127 ) + 1 ) } & R3 in ( dom C127 ));

L1886: ( ( len C127 ) + 1 ) = R4 by L1885 , TARSKI:def 1;
L1887: ( D250 . R4 ) = D234 by L1886 , FINSEQ_1:42;
L1888: (( C127 /. R3 ) = ( C127 . R3 ) & ( C127 . R3 ) in ( rng C127 )) by L1885 , FUNCT_1:def 3 , PARTFUN1:def 6;
L1889: ( C127 /. R3 ) <= R8 by L1888 , L1646 , FINSEQ_1:1;
L1890: ( D250 . R4 ) = ( D250 /. R4 ) by L1880 , PARTFUN1:def 6;
L1891: ( C127 /. R3 ) < ( D250 /. R4 ) by L1890 , L1889 , L1887 , NAT_1:13;
thus L1892: thesis by L1891 , L1865 , L1885;
end;
suppose L1893: (R4 in ( dom C127 ) & R3 in { ( ( len C127 ) + 1 ) });

L1894: (R4 <= ( len C127 ) & R3 = ( ( len C127 ) + 1 )) by L1893 , L1671 , FINSEQ_1:1 , TARSKI:def 1;
thus L1895: thesis by L1894 , L1881 , NAT_1:13;
end;
suppose L1896: (R4 in ( dom C127 ) & R3 in ( dom C127 ));

L1897: (( C127 /. R3 ) = ( D250 /. R3 ) & ( C127 /. R4 ) = ( D250 /. R4 )) by L1896 , L1865;
thus L1898: thesis by L1897 , L1647 , L1881 , L1896;
end;
end;

L1900: ( dom D250 ) = ( Seg ( len D250 ) ) by FINSEQ_1:def 3;
L1901: ( dom D250 ) c= ( dom C134 ) by L1900 , L1847 , L1861 , FINSEQ_1:5;
thus L1902: (R4 in ( ( dom D250 ) \ { R3 } ) implies ( C134 * (R4 , ( D250 /. R3 )) ) = ( 0. F1() ))
proof
assume L1903: R4 in ( ( dom D250 ) \ { R3 } );
per cases ;
suppose L1904: R3 = ( ( len C127 ) + 1 );

L1905: ( ( len C127 ) + 1 ) in { ( ( len C127 ) + 1 ) } by TARSKI:def 1;
L1906: ( ( len C127 ) + 1 ) in ( dom D250 ) by L1905 , L1864 , XBOOLE_0:def 3;
L1907: ( D250 . ( ( len C127 ) + 1 ) ) = ( D250 /. R3 ) by L1906 , L1904 , PARTFUN1:def 6;
L1908: R4 in ( dom D250 ) by L1903 , ZFMISC_1:56;
L1909: R4 <> R3 by L1903 , ZFMISC_1:56;
L1910: R4 in ( ( dom C134 ) \ { R3 } ) by L1909 , L1901 , L1908 , ZFMISC_1:56;
L1911: R4 <= F2() by L1847 , L1901 , L1908 , FINSEQ_1:1;
L1912: ( C134 * (R4 , D234) ) = ( 0. F1() ) by L1911 , L1844 , L1904 , L1910;
thus L1913: thesis by L1912 , L1907 , FINSEQ_1:42;
end;
suppose L1914: R3 <> ( ( len C127 ) + 1 );

L1915: R4 in ( dom D250 ) by L1903 , XBOOLE_0:def 5;
L1916: (R3 in ( dom C127 ) or R3 in { ( ( len C127 ) + 1 ) }) by L1863 , L1864 , XBOOLE_0:def 3;
L1917: ( C127 . R3 ) in ( rng C127 ) by L1916 , L1914 , FUNCT_1:def 3 , TARSKI:def 1;
L1918: (( C127 /. R3 ) = ( D250 /. R3 ) & ( C127 . R3 ) = ( C127 /. R3 )) by L1865 , L1914 , L1916 , PARTFUN1:def 6 , TARSKI:def 1;
L1919: 1 <= ( D250 /. R3 ) by L1918 , L1646 , L1917 , FINSEQ_1:1;
L1920: ( D250 /. R3 ) <= R8 by L1646 , L1918 , L1917 , FINSEQ_1:1;
L1921: R8 <= F3() by L1639 , NAT_1:13;
L1922: ( D250 /. R3 ) <= F3() by L1921 , L1920 , XXREAL_0:2;
L1923: ( D250 /. R3 ) in ( Seg ( width C134 ) ) by L1922 , L1860 , L1919;
L1924: [ R4 , ( D250 /. R3 ) ] in ( Indices C134 ) by L1923 , L1901 , L1915 , ZFMISC_1:87;
per cases ;
suppose L1925: R4 = ( ( len C127 ) + 1 );

L1926: R4 > ( len C127 ) by L1925 , NAT_1:13;
thus L1927: thesis by L1926 , L1842 , L1920 , L1924;
end;
suppose L1928: R4 <> ( ( len C127 ) + 1 );

L1929: R4 in ( dom D250 ) by L1903 , XBOOLE_0:def 5;
L1930: (R4 in ( dom C127 ) or R4 in { ( ( len C127 ) + 1 ) }) by L1929 , L1864 , XBOOLE_0:def 3;
L1931: R4 <> R3 by L1903 , ZFMISC_1:56;
L1932: R4 in ( ( dom C127 ) \ { R3 } ) by L1931 , L1928 , L1930 , TARSKI:def 1 , ZFMISC_1:56;
L1933: ( C134 * (R4 , ( C127 /. R3 )) ) = ( 0. F1() ) by L1932 , L1843 , L1914 , L1916 , TARSKI:def 1;
thus L1934: thesis by L1933 , L1865 , L1914 , L1916 , TARSKI:def 1;
end;
end;
end;

thus L1937: ((R4 in ( Seg ( width C134 ) ) & R4 < ( D250 /. R3 )) implies ( C134 * (R3 , R4) ) = ( 0. F1() ))
proof
assume that
L1938: R4 in ( Seg ( width C134 ) )
and
L1939: R4 < ( D250 /. R3 );
per cases ;
suppose L1940: R3 in ( dom C127 );

L1941: ( D250 /. R3 ) = ( C127 /. R3 ) by L1940 , L1865;
thus L1942: thesis by L1941 , L1843 , L1938 , L1939 , L1940;
end;
suppose L1943: (not R3 in ( dom C127 ));

L1944: (R3 in ( dom C127 ) or R3 in { ( ( len C127 ) + 1 ) }) by L1863 , L1864 , XBOOLE_0:def 3;
L1945: R3 = ( ( len C127 ) + 1 ) by L1944 , L1943 , TARSKI:def 1;
L1946: ( D250 . R3 ) = D234 by L1945 , FINSEQ_1:42;
L1947: ( D250 . R3 ) = ( D250 /. R3 ) by L1863 , PARTFUN1:def 6;
L1948: R4 <= R8 by L1947 , L1939 , L1946 , NAT_1:13;
L1949: R3 > ( len C127 ) by L1945 , NAT_1:13;
L1950: [ R3 , R4 ] in ( Indices C134 ) by L1863 , L1901 , L1938 , ZFMISC_1:87;
thus L1951: thesis by L1950 , L1842 , L1948 , L1949;
end;
end;

end;
L1938: (( rng <* D234 *> ) = { D234 } & ( ( rng C127 ) \/ { D234 } ) c= ( ( Seg R8 ) \/ { D234 } )) by L1646 , FINSEQ_1:38 , XBOOLE_1:9;
L1939: ( ( Seg R8 ) \/ { D234 } ) = ( Seg D234 ) by FINSEQ_1:9;
L1940: (( rng C127 ) misses { D234 } & <* D234 *> is  one-to-one) by L1646 , FINSEQ_3:14 , XBOOLE_1:63;
thus L1941: thesis by L1940 , L1643 , L1644 , L1667 , L1668 , L1846 , L1848 , L1938 , L1939 , L1862 , FINSEQ_1:31 , FINSEQ_3:91 , XREAL_1:6 , XXREAL_0:2;
end;
end;
L1943: S5[ ( 0 ) ]
proof
assume L1944: ( 0 ) <= F3();
take D251 = F5();
take D252 = F6();
thus L1945: (P1[ D251 , D252 ] & D231 = ( the_rank_of D251 )) by L1628;
take D253 = ( <*> ( NAT ) );
L1946:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1947: [ R3 , R4 ] in ( Indices D251 )
and
L1948: R3 > ( len D253 )
and
L1949: R4 <= ( 0 );
L1950: R4 in ( Seg ( width D251 ) ) by L1947 , ZFMISC_1:87;
thus L1951: ( D251 * (R3 , R4) ) = ( 0. F1() ) by L1950 , L1949;
end;
thus L1952: thesis by L1946;
end;
L1953: (for R8 being Nat holds S5[ R8 ]) from NAT_1:sch 2(L1943 , L1637);
consider C136 being (Matrix of F2() , F3() , F1()), C137 being (Matrix of F2() , F4() , F1()) such that L1954: P1[ C136 , C137 ] and L1955: D231 = ( the_rank_of C136 ) and L1956: (ex B142 being (FinSequence of ( NAT )) st ((for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C136 ) & R3 > ( len B142 ) & R4 <= F3()) implies ( C136 * (R3 , R4) ) = ( 0. F1() )))) & B142 is  one-to-one & ( len B142 ) <= F3() & ( len B142 ) <= F2() & ( rng B142 ) c= ( Seg F3() ) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom B142 ) implies S4[ B142 , R3 , R4 , C136 ]))))) by L1953;
consider C138 being (FinSequence of ( NAT )) such that L1957: (for R3 being Nat holds (for R4 being Nat holds (([ R3 , R4 ] in ( Indices C136 ) & R3 > ( len C138 ) & R4 <= F3()) implies ( C136 * (R3 , R4) ) = ( 0. F1() )))) and L1958: C138 is  one-to-one and L1959: ( len C138 ) <= F3() and L1960: ( len C138 ) <= F2() and L1961: ( rng C138 ) c= ( Seg F3() ) and L1962: (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C138 ) implies S4[ C138 , R3 , R4 , C136 ]))) by L1956;
L1963: ( len C136 ) = F2() by L1636 , MATRIX_1:23;
take C136;
take C137;
thus L1964: (P1[ C136 , C137 ] & D231 = ( the_rank_of C136 )) by L1954 , L1955;
L1965: ( dom C136 ) = ( Seg ( len C136 ) ) by FINSEQ_1:def 3;
set D254 = ( len C138 );
L1966: ( Seg D254 ) c= ( Seg F2() ) by L1960 , FINSEQ_1:5;
L1967: (( idseq D254 ) is (FinSequence of ( NAT )) & ( len ( idseq D254 ) ) = D254) by CARD_1:def 7 , FINSEQ_2:48;
reconsider D255 = ( idseq D254 ) , D256 = C138 as (Element of ( D254 -tuples_on ( NAT ) )) by L1967 , FINSEQ_2:92;
set D257 = ( Segm (C136 , D255 , D256) );
L1968: ( dom C138 ) = ( Seg D254 ) by FINSEQ_1:def 3;
set D258 = ( diagonal_of_Matrix D257 );
L1969: ( Indices D257 ) = [: ( Seg D254 ) , ( Seg D254 ) :] by MATRIX_1:24;
L1970: (for B143 being (Element of ( NAT )) holds (B143 in ( dom D258 ) implies ( D258 . B143 ) <> ( 0. F1() )))
proof
L1971: ( len D258 ) = D254 by MATRIX_3:def 10;
let C139 being (Element of ( NAT ));
assume L1972: C139 in ( dom D258 );
L1973: C139 in ( Seg D254 ) by L1972 , L1971 , FINSEQ_1:def 3;
L1974: [ C139 , C139 ] in ( Indices D257 ) by L1973 , L1969 , ZFMISC_1:87;
L1975: ( D257 * (C139 , C139) ) = ( C136 * (( D255 . C139 ) , ( C138 . C139 )) ) by L1974 , MATRIX13:def 1
.= ( C136 * (C139 , ( C138 . C139 )) ) by L1973 , FINSEQ_2:49
.= ( C136 * (C139 , ( C138 /. C139 )) ) by L1968 , L1973 , PARTFUN1:def 6;
L1976: ( D257 * (C139 , C139) ) <> ( 0. F1() ) by L1975 , L1962 , L1968 , L1973;
thus L1977: thesis by L1976 , L1973 , MATRIX_3:def 10;
end;
L1978: ( Product D258 ) <> ( 0. F1() ) by L1970 , FVSUM_1:82;
L1979:
now
let R3 being Nat;
let R4 being Nat;
assume that
L1980: [ R3 , R4 ] in ( Indices D257 );
L1981: R3 in ( Seg D254 ) by L1969 , L1980 , ZFMISC_1:87;
assume L1982: R3 > R4;
L1983: R3 in ( ( dom C138 ) \ { R4 } ) by L1982 , L1968 , L1981 , ZFMISC_1:56;
reconsider D259 = R3 , D260 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L1984: R4 in ( Seg D254 ) by L1969 , L1980 , ZFMISC_1:87;
thus L1985: ( D257 * (R3 , R4) ) = ( C136 * (( D255 . D259 ) , ( C138 . D260 )) ) by L1980 , MATRIX13:def 1
.= ( C136 * (R3 , ( C138 . R4 )) ) by L1981 , FINSEQ_2:49
.= ( C136 * (R3 , ( C138 /. R4 )) ) by L1968 , L1984 , PARTFUN1:def 6
.= ( 0. F1() ) by L1962 , L1968 , L1984 , L1983;
end;
L1986: D257 is (Upper_Triangular_Matrix of D254 , F1()) by L1979 , MATRIX_2:def 3;
L1987: ( Det D257 ) <> ( 0. F1() ) by L1986 , L1978 , MATRIX13:7;
L1988: ( len ( Segm (C136 , ( Seg D254 ) , ( Seg ( width C136 ) )) ) ) = ( card ( Seg D254 ) ) by MATRIX_1:def 2;
L1989: ( width C136 ) = F3() by L1636 , MATRIX_1:23;
L1990: ( rng D255 ) = ( Seg D254 ) by RELAT_1:45;
L1991: [: ( rng D255 ) , ( rng D256 ) :] c= ( Indices C136 ) by L1990 , L1961 , L1966 , L1963 , L1965 , L1989 , ZFMISC_1:96;
L1992: ( the_rank_of C136 ) >= D254 by L1991 , L1987 , MATRIX13:76;
L1993:
now
set D261 = ( ( width C136 ) |-> ( 0. F1() ) );
let R3 being Nat;
assume that
L1994: R3 in ( ( dom C136 ) \ ( Seg D254 ) );
set D262 = ( Line (C136 , R3) );
L1995:
now
L1996: (not R3 in ( Seg D254 )) by L1994 , XBOOLE_0:def 5;
L1997: (R3 > D254 or R3 < 1) by L1996 , L1994;
let R4 being Nat;
assume that
L1998: 1 <= R4
and
L1999: R4 <= ( width C136 );
L2000: R4 in ( NAT ) by ORDINAL1:def 12;
L2001: R4 in ( Seg ( width C136 ) ) by L2000 , L1998 , L1999;
L2002: R3 in ( dom C136 ) by L1994 , XBOOLE_0:def 5;
L2003: [ R3 , R4 ] in ( Indices C136 ) by L2002 , L2001 , ZFMISC_1:87;
thus L2004: ( D262 . R4 ) = ( C136 * (R3 , R4) ) by L2001 , MATRIX_1:def 7
.= ( 0. F1() ) by L1957 , L1965 , L1989 , L1999 , L2002 , L2003 , L1997 , FINSEQ_1:1
.= ( D261 . R4 ) by L2001 , FINSEQ_2:57;
end;
L2005: (( len D262 ) = ( width C136 ) & ( len D261 ) = ( width C136 )) by CARD_1:def 7;
thus L2006: ( Line (C136 , R3) ) = ( ( width C136 ) |-> ( 0. F1() ) ) by L2005 , L1995 , FINSEQ_1:14;
end;
L2007: ( the_rank_of C136 ) = ( the_rank_of ( Segm (C136 , ( Seg D254 ) , ( Seg ( width C136 ) )) ) ) by L1993 , L1966 , L1963 , L1965 , L452;
L2008: ( the_rank_of C136 ) <= ( card ( Seg D254 ) ) by L2007 , L1988 , MATRIX13:74;
L2009: ( the_rank_of C136 ) <= D254 by L2008 , FINSEQ_1:57;
L2010: D231 = D254 by L2009 , L1955 , L1992 , XXREAL_0:1;
thus L2011: (for R3 being Nat holds ((R3 in ( dom C136 ) & R3 > D231) implies ( Line (C136 , R3) ) = ( F3() |-> ( 0. F1() ) )))
proof
let R3 being Nat;
assume that
L2012: R3 in ( dom C136 )
and
L2013: R3 > D231;
L2014: (not R3 in ( Seg D254 )) by L2010 , L2013 , FINSEQ_1:1;
L2015: R3 in ( ( dom C136 ) \ ( Seg D254 ) ) by L2014 , L2012 , XBOOLE_0:def 5;
thus L2016: thesis by L2015 , L1989 , L1993;
end;

take C138;
thus L2017: thesis by L1636 , L1958 , L1961 , L1962 , L1992 , L2009 , MATRIX_1:23 , XXREAL_0:1;
end;
end;
consider C140 being (Matrix of F2() , F3() , F1()), C141 being (Matrix of F2() , F4() , F1()) such that L2019: P1[ C140 , C141 ] and L2020: D231 = ( the_rank_of C140 ) and L2021: (for R3 being Nat holds ((R3 in ( dom C140 ) & R3 > D231) implies ( Line (C140 , R3) ) = ( F3() |-> ( 0. F1() ) ))) and L2022: (ex B144 being (FinSequence of ( NAT )) st (( len B144 ) = ( the_rank_of C140 ) & B144 is  one-to-one & ( rng B144 ) c= ( Seg ( width C140 ) ) & (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom B144 ) implies S4[ B144 , R3 , R4 , C140 ]))))) by L1630;
consider C142 being (FinSequence of ( NAT )) such that L2023: ( len C142 ) = ( the_rank_of C140 ) and L2024: C142 is  one-to-one and L2025: ( rng C142 ) c= ( Seg ( width C140 ) ) and L2026: (for R3 being Nat holds (for R4 being Nat holds (R3 in ( dom C142 ) implies S4[ C142 , R3 , R4 , C140 ]))) by L2022;
L2027: (not ( 0 ) in ( rng C142 )) by L2025;
reconsider D263 = ( rng C142 ) as  without_zero  finite (Subset of ( NAT )) by L2027 , L2025 , MEASURE6:def 2 , XBOOLE_1:1;
L2028: (F2() = ( 0 ) or F2() > ( 0 ));
set D264 = ( Segm (C140 , ( Seg ( card D263 ) ) , D263) );
L2029: ( dom C142 ) = ( Seg D231 ) by L2020 , L2023 , FINSEQ_1:def 3;
take C140;
take C141;
take D263;
L2030: ( len C140 ) = F2() by MATRIX_1:def 2;
L2031: (( width C140 ) = ( 0 ) or ( width C140 ) = F3()) by L2030 , L2028 , MATRIX_1:23 , MATRIX_1:def 3;
L2032: ( Seg ( width C140 ) ) c= ( Seg F3() ) by L2031 , FINSEQ_1:5;
thus L2033: (D263 c= ( Seg F3() ) & D231 = ( the_rank_of C140 )) by L2032 , L2020 , L2025 , XBOOLE_1:1;
L2034: ( dom C142 ) , D263 are_equipotent  by L2024 , WELLORD2:def 4;
thus L2035: ( card D263 ) = ( card ( dom C142 ) ) by L2034 , CARD_1:5
.= ( card ( Seg D231 ) ) by L2020 , L2023 , FINSEQ_1:def 3
.= D231 by FINSEQ_1:57;
L2036:
now
let R3 being Nat;
let R4 being Nat;
assume that
L2037: (R3 in ( dom C142 ) & R4 in ( dom C142 ))
and
L2038: R3 < R4;
L2039: (( C142 . R3 ) = ( C142 /. R3 ) & ( C142 . R4 ) = ( C142 /. R4 )) by L2037 , PARTFUN1:def 6;
thus L2040: ( C142 . R3 ) < ( C142 . R4 ) by L2039 , L2026 , L2037 , L2038;
end;
L2041: ( Sgm D263 ) = C142 by L2036 , L2024 , L2025 , L131;
thus L2042: P1[ C140 , C141 ] by L2019;
L2043: ( card ( Seg ( card D263 ) ) ) = ( card D263 ) by FINSEQ_1:57;
L2044: ( Indices D264 ) = [: ( Seg D231 ) , ( Seg D231 ) :] by L2043 , L2035 , MATRIX_1:24;
L2045:
now
let C143 , C144 being (Element of ( NAT ));
assume that
L2046: C143 in ( Seg D231 )
and
L2047: C144 in ( Seg D231 )
and
L2048: C143 <> C144;
L2049: C143 in ( ( dom C142 ) \ { C144 } ) by L2029 , L2046 , L2048 , ZFMISC_1:56;
L2050: ( ( idseq D231 ) . C143 ) = C143 by L2046 , FINSEQ_2:49;
L2051: [ C143 , C144 ] in ( Indices D264 ) by L2044 , L2046 , L2047 , ZFMISC_1:87;
L2052: ( D264 * (C143 , C144) ) = ( C140 * (( ( Sgm ( Seg D231 ) ) . C143 ) , ( C142 . C144 )) ) by L2051 , L2035 , L2041 , MATRIX13:def 1
.= ( C140 * (C143 , ( C142 . C144 )) ) by L2050 , FINSEQ_3:48
.= ( C140 * (C143 , ( C142 /. C144 )) ) by L2029 , L2047 , PARTFUN1:def 6;
thus L2053: ( D264 * (C143 , C144) ) = ( 0. F1() ) by L2052 , L2026 , L2029 , L2047 , L2049;
end;
thus L2054: D264 is  diagonal by L2045 , L2035 , L2043 , MATRIX_7:def 2;
thus L2055: (for R3 being Nat holds (R3 in ( Seg ( card D263 ) ) implies ( C140 * (R3 , ( ( Sgm D263 ) /. R3 )) ) <> ( 0. F1() ))) by L2026 , L2035 , L2041 , L2029;
thus L2056: (for R3 being Nat holds ((R3 in ( dom C140 ) & R3 > ( card D263 )) implies ( Line (C140 , R3) ) = ( F3() |-> ( 0. F1() ) ))) by L2021 , L2035;
let R3 being Nat;
let R4 being Nat;
assume that
L2057: R3 in ( Seg ( card D263 ) )
and
L2058: R4 in ( Seg ( width C140 ) )
and
L2059: R4 < ( ( Sgm D263 ) . R3 );
L2060: R4 < ( C142 /. R3 ) by L2035 , L2041 , L2029 , L2057 , L2059 , PARTFUN1:def 6;
thus L2061: thesis by L2060 , L2026 , L2035 , L2029 , L2057 , L2058;
end;
scheme GAUSS2 { F8() -> Field , F9 , F10 , F11() -> Nat , F12() -> (Matrix of F9() , F10() , F8()) , F13() -> (Matrix of F9() , F11() , F8()) , F14((Matrix of F9() , F11() , F8()) , Nat , Nat , (Element of F8())) -> (Matrix of F9() , F11() , F8()) , P2[set , set] } : (ex B145 being (Matrix of F9() , F10() , F8()) st (ex B146 being (Matrix of F9() , F11() , F8()) st (ex B147 being  without_zero  finite (Subset of ( NAT )) st (B147 c= ( Seg F10() ) & ( the_rank_of F12() ) = ( the_rank_of B145 ) & ( the_rank_of F12() ) = ( card B147 ) & P2[ B145 , B146 ] & ( Segm (B145 , ( Seg ( card B147 ) ) , B147) ) = ( 1. (F8() , ( card B147 )) ) & (for R3 being Nat holds ((R3 in ( dom B145 ) & R3 > ( card B147 )) implies ( Line (B145 , R3) ) = ( F10() |-> ( 0. F8() ) ))) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card B147 ) ) & R4 in ( Seg ( width B145 ) ) & R4 < ( ( Sgm B147 ) . R3 )) implies ( B145 * (R3 , R4) ) = ( 0. F8() ))))))))
provided
L2062: P2[ F12() , F13() ]
and
L2063: (for B148 being (Matrix of F9() , F10() , F8()) holds (for B149 being (Matrix of F9() , F11() , F8()) holds (P2[ B148 , B149 ] implies (for B150 being (Element of F8()) holds (for R3 being Nat holds (for R4 being Nat holds ((R4 in ( dom B148 ) & (R3 = R4 implies B150 <> ( - ( 1_ F8() ) ))) implies P2[ ( RLine (B148 , R3 , ( ( Line (B148 , R3) ) + ( B150 * ( Line (B148 , R4) ) ) )) ) , F14(B149 , R3 , R4 , B150) ])))))))
proof
set D265 = ( the_rank_of F12() );
L2064: (for B151 being (Matrix of F9() , F10() , F8()) holds (for B152 being (Matrix of F9() , F11() , F8()) holds (P2[ B151 , B152 ] implies (for R3 being Nat holds (for R4 being Nat holds ((R3 <> R4 & R4 in ( dom B151 )) implies (for B153 being (Element of F8()) holds P2[ ( RLine (B151 , R3 , ( ( Line (B151 , R3) ) + ( B153 * ( Line (B151 , R4) ) ) )) ) , F14(B152 , R3 , R4 , B153) ]))))))) by L2063;
consider C145 being (Matrix of F9() , F10() , F8()), C146 being (Matrix of F9() , F11() , F8()), C147 being  without_zero  finite (Subset of ( NAT )) such that L2065: C147 c= ( Seg F10() ) and L2066: (D265 = ( the_rank_of C145 ) & D265 = ( card C147 )) and L2067: (P2[ C145 , C146 ] & ( Segm (C145 , ( Seg ( card C147 ) ) , C147) ) is  diagonal & (for R3 being Nat holds (R3 in ( Seg ( card C147 ) ) implies ( C145 * (R3 , ( ( Sgm C147 ) /. R3 )) ) <> ( 0. F8() ))) & (for R3 being Nat holds ((R3 in ( dom C145 ) & R3 > ( card C147 )) implies ( Line (C145 , R3) ) = ( F10() |-> ( 0. F8() ) ))) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R4 in ( Seg ( width C145 ) ) & R4 < ( ( Sgm C147 ) . R3 )) implies ( C145 * (R3 , R4) ) = ( 0. F8() ))))) from GAUSS1(L2062 , L2064);
set D266 = ( 1. (F8() , ( card C147 )) );
L2068: ( Indices D266 ) = [: ( Seg D265 ) , ( Seg D265 ) :] by L2066 , MATRIX_1:24;
defpred S7[ Nat ] means ($1 <= ( card C147 ) implies (ex B154 being (Matrix of F9() , F10() , F8()) st (ex B155 being (Matrix of F9() , F11() , F8()) st (D265 = ( the_rank_of B154 ) & (for R3 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R3 <= $1) implies ( B154 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( 1_ F8() ))) & P2[ B154 , B155 ] & ( Segm (B154 , ( Seg ( card C147 ) ) , C147) ) is  diagonal & (for R3 being Nat holds (R3 in ( Seg ( card C147 ) ) implies ( B154 * (R3 , ( ( Sgm C147 ) /. R3 )) ) <> ( 0. F8() ))) & (for R3 being Nat holds ((R3 in ( dom B154 ) & R3 > ( card C147 )) implies ( Line (B154 , R3) ) = ( F10() |-> ( 0. F8() ) ))) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R4 in ( Seg ( width B154 ) ) & R4 < ( ( Sgm C147 ) . R3 )) implies ( B154 * (R3 , R4) ) = ( 0. F8() ))))))));
L2069: (for R8 being Nat holds (S7[ R8 ] implies S7[ ( R8 + 1 ) ]))
proof
set D267 = ( Sgm C147 );
let R8 being Nat;
assume that
L2070: S7[ R8 ];
set D268 = ( R8 + 1 );
assume L2071: D268 <= ( card C147 );
consider C148 being (Matrix of F9() , F10() , F8()), C149 being (Matrix of F9() , F11() , F8()) such that L2072: D265 = ( the_rank_of C148 ) and L2073: (for R3 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R3 <= R8) implies ( C148 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( 1_ F8() ))) and L2074: P2[ C148 , C149 ] and L2075: ( Segm (C148 , ( Seg ( card C147 ) ) , C147) ) is  diagonal and L2076: (for R3 being Nat holds (R3 in ( Seg ( card C147 ) ) implies ( C148 * (R3 , ( ( Sgm C147 ) /. R3 )) ) <> ( 0. F8() ))) and L2077: (for R3 being Nat holds ((R3 in ( dom C148 ) & R3 > ( card C147 )) implies ( Line (C148 , R3) ) = ( F10() |-> ( 0. F8() ) ))) and L2078: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R4 in ( Seg ( width C148 ) ) & R4 < ( ( Sgm C147 ) . R3 )) implies ( C148 * (R3 , R4) ) = ( 0. F8() )))) by L2071 , L2070 , NAT_1:13;
set D269 = ( Line (C148 , D268) );
set D270 = ( D269 + ( ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) - ( 1_ F8() ) ) * D269 ) );
set D271 = ( RLine (C148 , D268 , D270) );
take D271;
take D272 = F14(C149 , D268 , D268 , ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) - ( 1_ F8() ) ));
L2079: ( len C148 ) = F9() by MATRIX_1:def 2;
set D273 = ( Segm (C148 , ( Seg ( card C147 ) ) , C147) );
set D274 = ( Segm (D271 , ( Seg ( card C147 ) ) , C147) );
L2080: ( len D270 ) = ( width C148 ) by CARD_1:def 7;
L2081: (D265 <= ( len C145 ) & ( len C145 ) = F9()) by L2066 , MATRIX13:74 , MATRIX_1:def 2;
L2082: ( Seg D265 ) c= ( Seg F9() ) by L2081 , FINSEQ_1:5;
L2083: 1 <= ( 1 + R8 ) by NAT_1:11;
L2084: D268 in ( Seg ( card C147 ) ) by L2083 , L2071;
L2085: F9() <> ( 0 ) by L2084 , L2066 , L2082;
L2086: ( width D271 ) = F10() by L2085 , MATRIX_1:23;
L2087: ( ( ( C148 * (D268 , ( ( Sgm C147 ) /. D268 )) ) " ) - ( 1_ F8() ) ) <> ( - ( 1. F8() ) )
proof
assume L2088: ( ( ( C148 * (D268 , ( ( Sgm C147 ) /. D268 )) ) " ) - ( 1_ F8() ) ) = ( - ( 1. F8() ) );
L2089: ( 0. F8() ) = ( ( 1_ F8() ) + ( - ( 1_ F8() ) ) ) by VECTSP_1:19
.= ( ( ( 1_ F8() ) + ( - ( 1_ F8() ) ) ) + ( ( C148 * (D268 , ( ( Sgm C147 ) /. D268 )) ) " ) ) by L2088 , RLVECT_1:def 3
.= ( ( 0. F8() ) + ( ( C148 * (D268 , ( ( Sgm C147 ) /. D268 )) ) " ) ) by VECTSP_1:19
.= ( ( C148 * (D268 , ( ( Sgm C147 ) /. D268 )) ) " ) by RLVECT_1:def 4;
L2090: ( C148 * (D268 , ( ( Sgm C147 ) /. D268 )) ) <> ( 0. F8() ) by L2076 , L2084;
thus L2091: thesis by L2090 , L2089 , VECTSP_1:25;
end;
thus L2092: ( the_rank_of D271 ) = D265 by L2087 , L2066 , L2072 , L2084 , L2082 , L2079 , MATRIX13:92;
L2093: ( width C148 ) = F10() by L2085 , MATRIX_1:23;
L2094: D270 = ( ( ( 1_ F8() ) * D269 ) + ( ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) - ( 1_ F8() ) ) * D269 ) ) by FVSUM_1:57
.= ( ( ( 1_ F8() ) + ( ( - ( 1_ F8() ) ) + ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) ) ) * D269 ) by FVSUM_1:55
.= ( ( ( ( 1_ F8() ) + ( - ( 1_ F8() ) ) ) + ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) ) * D269 ) by RLVECT_1:def 3
.= ( ( ( 0. F8() ) + ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) ) * D269 ) by VECTSP_1:19
.= ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * D269 ) by RLVECT_1:def 4;
L2095: ( dom C148 ) = ( Seg ( len C148 ) ) by FINSEQ_1:def 3;
L2096: ( rng ( Sgm C147 ) ) = C147 by L2065 , FINSEQ_1:def 13;
L2097: ( dom ( Sgm C147 ) ) = ( Seg ( card C147 ) ) by L2065 , FINSEQ_3:40;
thus L2098: (for R3 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R3 <= D268) implies ( D271 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( 1_ F8() )))
proof
let R3 being Nat;
assume that
L2099: R3 in ( Seg ( card C147 ) )
and
L2100: R3 <= D268;
L2101: (( D267 . R3 ) = ( D267 /. R3 ) & ( D267 . R3 ) in ( rng D267 )) by L2097 , L2099 , FUNCT_1:def 3 , PARTFUN1:def 6;
L2102: [ R3 , ( ( Sgm C147 ) /. R3 ) ] in ( Indices C148 ) by L2101 , L2065 , L2066 , L2096 , L2082 , L2095 , L2079 , L2093 , L2099 , ZFMISC_1:87;
per cases  by L2100 , NAT_1:8;
suppose L2103: R3 <= R8;

L2104: R3 < D268 by L2103 , NAT_1:13;
thus L2105: ( D271 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( C148 * (R3 , ( ( Sgm C147 ) /. R3 )) ) by L2104 , L2080 , L2102 , MATRIX11:def 3
.= ( 1_ F8() ) by L2073 , L2099 , L2103;
end;
suppose L2106: R3 = D268;

L2107: ( C148 * (R3 , ( D267 /. R3 )) ) <> ( 0. F8() ) by L2076 , L2099;
L2108: (( D271 * (R3 , ( D267 /. R3 )) ) = ( ( ( ( C148 * (R3 , ( D267 /. R3 )) ) " ) * D269 ) . ( D267 /. R3 ) ) & ( D269 . ( D267 /. R3 ) ) = ( C148 * (R3 , ( D267 /. R3 )) )) by L2065 , L2096 , L2080 , L2094 , L2093 , L2101 , L2102 , L2106 , MATRIX11:def 3 , MATRIX_1:def 7;
thus L2109: ( D271 * (R3 , ( D267 /. R3 )) ) = ( ( ( C148 * (R3 , ( D267 /. R3 )) ) " ) * ( C148 * (R3 , ( D267 /. R3 )) ) ) by L2108 , L2065 , L2096 , L2093 , L2101 , FVSUM_1:51
.= ( 1_ F8() ) by L2107 , VECTSP_1:def 10;
end;
end;

thus L2111: P2[ D271 , D272 ] by L2063 , L2066 , L2074 , L2084 , L2082 , L2095 , L2079 , L2087;
thus L2112: D274 is  diagonal
proof
L2113: ( Indices C148 ) = ( Indices D271 ) by MATRIX_1:26;
let R3 being Nat;
let R4 being Nat;
assume that
L2114: [ R3 , R4 ] in ( Indices D274 )
and
L2115: ( D274 * (R3 , R4) ) <> ( 0. F8() );
reconsider D275 = R3 , D276 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L2116: ( Indices D274 ) = [: ( Seg ( card ( Seg ( card C147 ) ) ) ) , ( Seg ( width D274 ) ) :] by MATRIX_1:25;
L2117: R3 in ( Seg ( card ( Seg ( card C147 ) ) ) ) by L2116 , L2114 , ZFMISC_1:87;
L2118: R3 in ( Seg ( card ( card C147 ) ) ) by L2117 , FINSEQ_1:55;
L2119: (( Sgm ( Seg ( card C147 ) ) ) = ( idseq ( card C147 ) ) & ( ( idseq ( card C147 ) ) . D275 ) = D275) by L2118 , FINSEQ_2:49 , FINSEQ_3:48;
L2120: ( D274 * (R3 , R4) ) = ( D271 * (D275 , ( ( Sgm C147 ) . D276 )) ) by L2119 , L2114 , MATRIX13:def 1;
L2121: (( rng ( Sgm ( Seg ( card C147 ) ) ) ) = ( Seg ( card C147 ) ) & [: ( Seg ( card C147 ) ) , C147 :] c= ( Indices C148 )) by L2065 , L2066 , L2082 , L2095 , L2079 , L2093 , FINSEQ_1:def 13 , ZFMISC_1:96;
L2122: [ D275 , ( ( Sgm C147 ) . D276 ) ] in ( Indices C148 ) by L2121 , L2096 , L2114 , L2113 , L2119 , MATRIX13:17;
L2123: ( ( Sgm C147 ) . D276 ) in ( Seg ( width C148 ) ) by L2122 , ZFMISC_1:87;
reconsider D277 = ( ( Sgm C147 ) . R4 ) as (Element of ( NAT )) by L2123;
L2124: ( Indices D274 ) = ( Indices D273 ) by MATRIX_1:26;
per cases ;
suppose L2125: D275 = D268;

thus L2126: R3 = R4
proof
assume L2127: R3 <> R4;
L2128: (( D271 * (D275 , ( ( Sgm C147 ) . D276 )) ) = ( ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * D269 ) . D277 ) & ( D269 . D277 ) = ( C148 * (D275 , D277) )) by L2080 , L2094 , L2122 , L2123 , L2125 , MATRIX11:def 3 , MATRIX_1:def 7;
L2129: ( D271 * (D275 , ( ( Sgm C147 ) . D276 )) ) = ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * ( C148 * (D275 , D277) ) ) by L2128 , L2123 , FVSUM_1:51
.= ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * ( D273 * (R3 , R4) ) ) by L2114 , L2124 , L2119 , MATRIX13:def 1
.= ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * ( 0. F8() ) ) by L2075 , L2114 , L2124 , L2127 , MATRIX_1:def 14
.= ( 0. F8() ) by VECTSP_1:6;
thus L2130: thesis by L2129 , L2114 , L2115 , L2119 , MATRIX13:def 1;
end;

end;
suppose L2127: D275 <> D268;

L2128: ( D271 * (D275 , ( ( Sgm C147 ) . D276 )) ) = ( C148 * (( ( Sgm ( Seg ( card C147 ) ) ) . D275 ) , ( ( Sgm C147 ) . D276 )) ) by L2127 , L2080 , L2119 , L2122 , MATRIX11:def 3
.= ( D273 * (R3 , R4) ) by L2114 , L2124 , MATRIX13:def 1;
thus L2129: thesis by L2128 , L2075 , L2114 , L2115 , L2124 , L2120 , MATRIX_1:def 14;
end;
end;

thus L2131: (for R3 being Nat holds (R3 in ( Seg ( card C147 ) ) implies ( D271 * (R3 , ( ( Sgm C147 ) /. R3 )) ) <> ( 0. F8() )))
proof
let R3 being Nat;
assume that
L2132: R3 in ( Seg ( card C147 ) );
L2133: (( D267 . R3 ) = ( D267 /. R3 ) & ( D267 . R3 ) in ( rng D267 )) by L2097 , L2132 , FUNCT_1:def 3 , PARTFUN1:def 6;
L2134: [ R3 , ( ( Sgm C147 ) /. R3 ) ] in ( Indices C148 ) by L2133 , L2065 , L2066 , L2096 , L2082 , L2095 , L2079 , L2093 , L2132 , ZFMISC_1:87;
per cases ;
suppose L2135: R3 = D268;

thus L2136: thesis by L2135 , L2098 , L2132;
end;
suppose L2137: R3 <> D268;

L2138: ( D271 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( C148 * (R3 , ( ( Sgm C147 ) /. R3 )) ) by L2137 , L2080 , L2134 , MATRIX11:def 3;
thus L2139: thesis by L2138 , L2076 , L2132;
end;
end;

thus L2141: (for R3 being Nat holds ((R3 in ( dom D271 ) & R3 > ( card C147 )) implies ( Line (D271 , R3) ) = ( F10() |-> ( 0. F8() ) )))
proof
L2142: (( dom D271 ) = ( Seg ( len D271 ) ) & ( len D271 ) = F9()) by FINSEQ_1:def 3 , MATRIX_1:def 2;
let R3 being Nat;
assume that
L2143: (R3 in ( dom D271 ) & R3 > ( card C147 ));
thus L2144: ( Line (D271 , R3) ) = ( Line (C148 , R3) ) by L2071 , L2143 , L2142 , MATRIX11:28
.= ( F10() |-> ( 0. F8() ) ) by L2077 , L2095 , L2079 , L2143 , L2142;
end;

let R3 being Nat;
let R4 being Nat;
assume that
L2145: R3 in ( Seg ( card C147 ) )
and
L2146: R4 in ( Seg ( width D271 ) )
and
L2147: R4 < ( ( Sgm C147 ) . R3 );
L2148: [ R3 , R4 ] in ( Indices C148 ) by L2066 , L2082 , L2095 , L2079 , L2093 , L2086 , L2145 , L2146 , ZFMISC_1:87;
per cases ;
suppose L2149: R3 = D268;

L2150: (( D271 * (R3 , R4) ) = ( ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * D269 ) . R4 ) & ( D269 . R4 ) = ( C148 * (R3 , R4) )) by L2149 , L2080 , L2094 , L2093 , L2086 , L2146 , L2148 , MATRIX11:def 3 , MATRIX_1:def 7;
thus L2151: ( D271 * (R3 , R4) ) = ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * ( C148 * (R3 , R4) ) ) by L2150 , L2093 , L2086 , L2146 , FVSUM_1:51
.= ( ( ( C148 * (D268 , ( D267 /. D268 )) ) " ) * ( 0. F8() ) ) by L2078 , L2093 , L2086 , L2145 , L2146 , L2147
.= ( 0. F8() ) by VECTSP_1:6;
end;
suppose L2152: R3 <> D268;

thus L2153: ( D271 * (R3 , R4) ) = ( C148 * (R3 , R4) ) by L2152 , L2080 , L2148 , MATRIX11:def 3
.= ( 0. F8() ) by L2078 , L2093 , L2086 , L2145 , L2146 , L2147;
end;
end;
L2155: (for R3 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R3 <= ( 0 )) implies ( C145 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( 1_ F8() )));
L2156: S7[ ( 0 ) ] by L2155 , L2066 , L2067;
L2157: (for R8 being Nat holds S7[ R8 ]) from NAT_1:sch 2(L2156 , L2069);
consider C150 being (Matrix of F9() , F10() , F8()), C151 being (Matrix of F9() , F11() , F8()) such that L2158: D265 = ( the_rank_of C150 ) and L2159: (for R3 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R3 <= ( card C147 )) implies ( C150 * (R3 , ( ( Sgm C147 ) /. R3 )) ) = ( 1_ F8() ))) and L2160: P2[ C150 , C151 ] and L2161: ( Segm (C150 , ( Seg ( card C147 ) ) , C147) ) is  diagonal and L2162: (for R3 being Nat holds (R3 in ( Seg ( card C147 ) ) implies ( C150 * (R3 , ( ( Sgm C147 ) /. R3 )) ) <> ( 0. F8() ))) and L2163: ((for R3 being Nat holds ((R3 in ( dom C150 ) & R3 > ( card C147 )) implies ( Line (C150 , R3) ) = ( F10() |-> ( 0. F8() ) ))) & (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card C147 ) ) & R4 in ( Seg ( width C150 ) ) & R4 < ( ( Sgm C147 ) . R3 )) implies ( C150 * (R3 , R4) ) = ( 0. F8() ))))) by L2157;
take C150;
take C151;
take C147;
thus L2164: (C147 c= ( Seg F10() ) & D265 = ( the_rank_of C150 ) & D265 = ( card C147 ) & P2[ C150 , C151 ]) by L2065 , L2066 , L2158 , L2160;
set D278 = ( Segm (C150 , ( Seg ( card C147 ) ) , C147) );
L2165: ( card ( Seg ( card C147 ) ) ) = ( card C147 ) by FINSEQ_1:57;
L2166: ( Indices D266 ) = ( Indices D278 ) by L2165 , MATRIX_1:26;
L2167:
now
L2168: ( dom ( Sgm C147 ) ) = ( Seg D265 ) by L2065 , L2066 , FINSEQ_3:40;
let R3 being Nat;
let R4 being Nat;
assume that
L2169: [ R3 , R4 ] in ( Indices D266 );
L2170: R4 in ( Seg D265 ) by L2068 , L2169 , ZFMISC_1:87;
reconsider D279 = R3 , D280 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L2171: R3 in ( Seg D265 ) by L2068 , L2169 , ZFMISC_1:87;
L2172: ( ( idseq D265 ) . D279 ) = D279 by L2171 , FINSEQ_2:49;
L2173: R3 <= D265 by L2171 , FINSEQ_1:1;
L2174: ( D278 * (R3 , R4) ) = ( C150 * (( ( Sgm ( Seg D265 ) ) . D279 ) , ( ( Sgm C147 ) . D280 )) ) by L2066 , L2166 , L2169 , MATRIX13:def 1
.= ( C150 * (D279 , ( ( Sgm C147 ) . D280 )) ) by L2172 , FINSEQ_3:48
.= ( C150 * (D279 , ( ( Sgm C147 ) /. D280 )) ) by L2170 , L2168 , PARTFUN1:def 6;
L2175:
now
per cases ;
suppose L2176: D279 = D280;

thus L2177: ( D278 * (R3 , R4) ) = ( 1_ F8() ) by L2176 , L2066 , L2159 , L2171 , L2173 , L2174
.= ( D266 * (R3 , R4) ) by L2169 , L2176 , MATRIX_1:def 11;
end;
suppose L2178: D279 <> D280;

thus L2179: ( D278 * (R3 , R4) ) = ( 0. F8() ) by L2178 , L2161 , L2166 , L2169 , MATRIX_1:def 14
.= ( D266 * (R3 , R4) ) by L2169 , L2178 , MATRIX_1:def 11;
end;
end;
thus L2181: ( D278 * (R3 , R4) ) = ( D266 * (R3 , R4) ) by L2175;
end;
thus L2182: thesis by L2167 , L2163 , L2165 , MATRIX_1:27;
end;
begin
theorem
L2183: (for R9 being Field holds (for B156 , B157 being (Matrix of R9) holds ((( len B156 ) = ( len B157 ) & (( width B156 ) = ( 0 ) implies ( width B157 ) = ( 0 ))) implies (( the_rank_of B156 ) = ( the_rank_of ( B156 ^^ B157 ) ) iff ( Solutions_of (B156 , B157) ) is non  empty))))
proof
let R9 being Field;
let C152 , C153 being (Matrix of R9);
assume that
L2184: ( len C152 ) = ( len C153 )
and
L2185: (( width C152 ) = ( 0 ) implies ( width C153 ) = ( 0 ));
set D281 = ( width C153 );
set D282 = ( len C152 );
reconsider D283 = C153 as (Matrix of D282 , D281 , R9) by L2184 , MATRIX_2:7;
set D284 = ( width C152 );
reconsider D285 = C152 as (Matrix of D282 , D284 , R9) by MATRIX_2:7;
deffunc H1((Matrix of D282 , D281 , R9) , Nat , Nat , (Element of R9)) = ( RLine ($1 , $2 , ( ( Line ($1 , $2) ) + ( $4 * ( Line ($1 , $3) ) ) )) );
defpred S8[ set , set ] means (for B158 being (Matrix of D282 , D284 , R9) holds (for B159 being (Matrix of D282 , D281 , R9) holds ((B158 = $1 & B159 = $2) implies (( the_rank_of ( D285 ^^ D283 ) ) = ( the_rank_of ( B158 ^^ B159 ) ) & ( Solutions_of (D285 , D283) ) = ( Solutions_of (B158 , B159) )))));
L2186: (for B160 being (Matrix of D282 , D284 , R9) holds (for B161 being (Matrix of D282 , D281 , R9) holds (S8[ B160 , B161 ] implies (for B162 being (Element of R9) holds (for R3 being Nat holds (for R4 being Nat holds ((R4 in ( dom B160 ) & (R3 = R4 implies B162 <> ( - ( 1_ R9 ) ))) implies S8[ ( RLine (B160 , R3 , ( ( Line (B160 , R3) ) + ( B162 * ( Line (B160 , R4) ) ) )) ) , H1(B161 , R3 , R4 , B162) ])))))))
proof
let C154 being (Matrix of D282 , D284 , R9);
let C155 being (Matrix of D282 , D281 , R9);
assume that
L2187: S8[ C154 , C155 ];
let C156 being (Element of R9);
let R3 being Nat;
let R4 being Nat;
assume that
L2188: R4 in ( dom C154 )
and
L2189: (R3 = R4 implies C156 <> ( - ( 1_ R9 ) ));
set D286 = ( Line (C154 , R4) );
set D287 = ( Line (C154 , R3) );
set D288 = ( RLine (C154 , R3 , ( D287 + ( C156 * D286 ) )) );
L2190: ( dom C154 ) = ( Seg ( len C154 ) ) by FINSEQ_1:def 3
.= ( Seg D282 ) by MATRIX_1:def 2;
L2191: ( Solutions_of (C154 , C155) ) = ( Solutions_of (D288 , H1(C155 , R3 , R4 , C156)) ) by L2190 , L2188 , L2189 , L1149;
set D289 = H1(C155 , R3 , R4 , C156);
set D290 = ( Line (C155 , R4) );
set D291 = ( Line (C155 , R3) );
L2192: (( len C154 ) = D282 & ( len C155 ) = D282) by MATRIX_1:def 2;
per cases ;
suppose L2193: (not R3 in ( Seg D282 ));

L2194: (D288 = C154 & D289 = C155) by L2193 , L2192 , MATRIX13:40;
thus L2195: thesis by L2194 , L2187;
end;
suppose L2196: R3 in ( Seg D282 );

L2197: ( len ( C154 ^^ C155 ) ) = D282 by MATRIX_1:def 2;
L2198: (( len ( C156 * D286 ) ) = ( width C154 ) & ( len ( C156 * D290 ) ) = ( width C155 )) by CARD_1:def 7;
L2199: (( len D287 ) = ( width C154 ) & ( len D291 ) = ( width C155 )) by CARD_1:def 7;
L2200: (( len ( D287 + ( C156 * D286 ) ) ) = ( width C154 ) & ( len ( D291 + ( C156 * D290 ) ) ) = ( width C155 )) by CARD_1:def 7;
L2201: ( D288 ^^ D289 ) = ( RLine (( C154 ^^ C155 ) , R3 , ( ( D287 + ( C156 * D286 ) ) ^ ( D291 + ( C156 * D290 ) ) )) ) by L2200 , L625
.= ( RLine (( C154 ^^ C155 ) , R3 , ( ( D287 ^ D291 ) + ( ( C156 * D286 ) ^ ( C156 * D290 ) ) )) ) by L2199 , L2198 , L50
.= ( RLine (( C154 ^^ C155 ) , R3 , ( ( D287 ^ D291 ) + ( C156 * ( D286 ^ D290 ) ) )) ) by L82
.= ( RLine (( C154 ^^ C155 ) , R3 , ( ( Line (( C154 ^^ C155 ) , R3) ) + ( C156 * ( D286 ^ D290 ) ) )) ) by L2196 , L591
.= ( RLine (( C154 ^^ C155 ) , R3 , ( ( Line (( C154 ^^ C155 ) , R3) ) + ( C156 * ( Line (( C154 ^^ C155 ) , R4) ) ) )) ) by L2188 , L2190 , L591;
L2202: ( the_rank_of ( D288 ^^ D289 ) ) = ( the_rank_of ( C154 ^^ C155 ) ) by L2201 , L2188 , L2189 , L2190 , L2197 , MATRIX13:92;
thus L2203: thesis by L2202 , L2187 , L2191;
end;
end;
L2205: S8[ D285 , D283 ];
consider C157 being (Matrix of D282 , D284 , R9), C158 being (Matrix of D282 , D281 , R9), R10 being  without_zero  finite (Subset of ( NAT )) such that L2206: R10 c= ( Seg D284 ) and L2207: (( the_rank_of D285 ) = ( the_rank_of C157 ) & ( the_rank_of D285 ) = ( card R10 )) and L2208: (S8[ C157 , C158 ] & ( Segm (C157 , ( Seg ( card R10 ) ) , R10) ) = ( 1. (R9 , ( card R10 )) )) and L2209: (for R3 being Nat holds ((R3 in ( dom C157 ) & R3 > ( card R10 )) implies ( Line (C157 , R3) ) = ( D284 |-> ( 0. R9 ) ))) and L2210: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card R10 ) ) & R4 in ( Seg ( width C157 ) ) & R4 < ( ( Sgm R10 ) . R3 )) implies ( C157 * (R3 , R4) ) = ( 0. R9 )))) from GAUSS2(L2205 , L2186);
per cases ;
suppose L2211: D282 = ( 0 );

L2212: (( len ( D285 ^^ D283 ) ) = ( 0 ) & ( the_rank_of C152 ) = ( 0 )) by L2211 , MATRIX13:74 , MATRIX_1:def 2;
thus L2213: thesis by L2212 , L2211 , L1548 , MATRIX13:74;
end;
suppose L2214: D282 > ( 0 );

per cases ;
suppose L2215: R10 <> ( {} );

set D292 = ( Seg ( card R10 ) );
set D293 = ( ( Seg D282 ) \ D292 );
L2216: ( card D292 ) = ( card R10 ) by FINSEQ_1:57;
reconsider D294 = ( ( Sgm D292 ) " D292 ) , D295 = ( ( Sgm ( Seg D284 ) ) " R10 ) as  without_zero  finite (Subset of ( NAT )) by MATRIX13:53;
L2217: (( dom ( Sgm D292 ) ) = ( Seg ( card D292 ) ) & ( rng ( Sgm D292 ) ) = D292) by FINSEQ_1:def 13 , FINSEQ_3:40;
L2218: D294 = D292 by L2217 , L2216 , RELAT_1:134;
L2219: ( rng ( Sgm ( Seg D284 ) ) ) = ( Seg D284 ) by FINSEQ_1:def 13;
L2220: ( ( Sgm ( Seg D284 ) ) .: D295 ) = R10 by L2219 , L2206 , FUNCT_1:77;
L2221: (D295 c= ( dom ( Sgm ( Seg D284 ) ) ) & ( Sgm ( Seg D284 ) ) is  one-to-one) by FINSEQ_3:92 , RELAT_1:132;
L2222: R10 , D295 are_equipotent  by L2221 , L2220 , CARD_1:33;
L2223: (( dom ( Sgm ( Seg D284 ) ) ) = ( Seg ( card ( Seg D284 ) ) ) & ( card R10 ) = ( card D295 )) by L2222 , CARD_1:5 , FINSEQ_3:40;
L2224: (( Seg ( len C157 ) ) = ( dom C157 ) & ( len C157 ) = D282) by L2214 , FINSEQ_1:def 3 , MATRIX_1:23;
L2225: ( width C157 ) = D284 by L2214 , MATRIX_1:23;
L2226:
now
let R3 being Nat;
assume that
L2227: R3 in D293;
L2228: (not R3 in D292) by L2227 , XBOOLE_0:def 5;
L2229: (R3 < 1 or R3 > ( card R10 )) by L2228 , L2227;
L2230: R3 in ( Seg D282 ) by L2227 , XBOOLE_0:def 5;
thus L2231: ( Line (C157 , R3) ) = ( ( width C157 ) |-> ( 0. R9 ) ) by L2230 , L2209 , L2224 , L2225 , L2229 , FINSEQ_1:1;
end;
L2232: ( card R10 ) <= D282 by L2207 , MATRIX13:74;
L2233: ( Seg ( card R10 ) ) c= ( Seg D282 ) by L2232 , FINSEQ_1:5;
L2234: ( len C158 ) = D282 by L2214 , MATRIX_1:23;
L2235: (( Seg ( len C158 ) ) = ( dom C158 ) & ( width C158 ) = D281) by L2214 , FINSEQ_1:def 3 , MATRIX_1:23;
thus L2236: (( the_rank_of C152 ) = ( the_rank_of ( C152 ^^ C153 ) ) implies ( Solutions_of (C152 , C153) ) is non  empty)
proof
assume L2237: ( the_rank_of C152 ) = ( the_rank_of ( C152 ^^ C153 ) );
L2238: ( the_rank_of C157 ) = ( the_rank_of ( C157 ^^ C158 ) ) by L2237 , L2207 , L2208;
L2239: (for R3 being Nat holds (R3 in ( ( dom C157 ) \ ( Seg ( card R10 ) ) ) implies (( Line (C157 , R3) ) = ( ( width C157 ) |-> ( 0. R9 ) ) & ( Line (C158 , R3) ) = ( ( width C158 ) |-> ( 0. R9 ) )))) by L2238 , L2224 , L2234 , L2226 , L750 , XBOOLE_1:36;
L2240: ( Solutions_of (C157 , C158) ) = ( Solutions_of (( Segm (C157 , D292 , ( Seg D284 )) ) , ( Segm (C158 , D292 , ( Seg D281 )) )) ) by L2239 , L2215 , L2233 , L2224 , L2234 , L2225 , L2235 , L1278;
L2241: ( Segm (( Segm (C157 , D292 , ( Seg D284 )) ) , D294 , D295) ) = ( 1. (R9 , ( card R10 )) ) by L2206 , L2208 , MATRIX13:56;
L2242: (ex B163 being (Matrix of ( card ( Seg D284 ) ) , ( card ( Seg D281 ) ) , R9) st (( Segm (B163 , ( ( Seg ( card ( Seg D284 ) ) ) \ D295 ) , ( Seg ( card ( Seg D281 ) ) )) ) = ( 0. (R9 , ( ( card ( Seg D284 ) ) -' ( card D292 ) ) , ( card ( Seg D281 ) )) ) & ( Segm (B163 , D295 , ( Seg ( card ( Seg D281 ) ) )) ) = ( Segm (C158 , D292 , ( Seg D281 )) ) & B163 in ( Solutions_of (( Segm (C157 , D292 , ( Seg D284 )) ) , ( Segm (C158 , D292 , ( Seg D281 )) )) ))) by L2241 , L2215 , L2216 , L2218 , L2223 , L1468 , RELAT_1:132;
thus L2243: thesis by L2242 , L2208 , L2240;
end;

L2244: ( ( Seg D282 ) \ ( Seg ( card R10 ) ) ) c= ( Seg D282 ) by XBOOLE_1:36;
thus L2245: (( Solutions_of (C152 , C153) ) is non  empty implies ( the_rank_of C152 ) = ( the_rank_of ( C152 ^^ C153 ) ))
proof
assume L2246: ( Solutions_of (C152 , C153) ) is non  empty;
L2247: ( Solutions_of (C157 , C158) ) is non  empty by L2246 , L2208;
consider R1 being set such that L2248: R1 in ( Solutions_of (C157 , C158) ) by L2247 , XBOOLE_0:def 1;
set D296 = ( C157 ^^ C158 );
L2249: ( len ( Segm (D296 , D292 , ( Seg ( width D296 ) )) ) ) = ( card D292 ) by MATRIX_1:def 2;
L2250: (( dom D296 ) = ( Seg ( len D296 ) ) & ( len D296 ) = D282) by L2214 , FINSEQ_1:def 3 , MATRIX_1:23;
reconsider D297 = R1 as (Matrix of D284 , D281 , R9) by L2214 , L2248 , L1579;
L2251: ( the_rank_of ( Segm (D296 , ( Seg D282 ) , ( Seg ( width C157 ) )) ) ) = ( card R10 ) by L2207 , L650;
L2252: ( width D296 ) = ( ( width C157 ) + ( width C158 ) ) by L2214 , MATRIX_1:23;
L2253:
now
let R3 being Nat;
assume that
L2254: R3 in D293;
L2255: ( Line (C157 , R3) ) = ( ( width C157 ) |-> ( 0. R9 ) ) by L2226 , L2254;
L2256: ((D297 in ( Solutions_of (C157 , C158) ) & R3 in ( dom C157 ) & ( Line (C157 , R3) ) = ( ( width C157 ) |-> ( 0. R9 ) )) implies ( Line (C158 , R3) ) = ( ( width C158 ) |-> ( 0. R9 ) )) by L1163;
thus L2257: ( Line (D296 , R3) ) = ( ( Line (C157 , R3) ) ^ ( Line (C158 , R3) ) ) by L2244 , L2254 , L591
.= ( ( width D296 ) |-> ( 0. R9 ) ) by L2224 , L2244 , L2248 , L2252 , L2254 , L2255 , L2256 , FINSEQ_2:123;
end;
L2258: ( the_rank_of ( Segm (D296 , D292 , ( Seg ( width D296 ) )) ) ) = ( the_rank_of D296 ) by L2253 , L2233 , L2250 , L452;
L2259: ( the_rank_of D296 ) <= ( card D292 ) by L2258 , L2249 , MATRIX13:74;
L2260: ( the_rank_of D296 ) <= ( card R10 ) by L2259 , FINSEQ_1:57;
L2261: ( width C157 ) <= ( width D296 ) by L2252 , NAT_1:11;
L2262: ( Seg ( width C157 ) ) c= ( Seg ( width D296 ) ) by L2261 , FINSEQ_1:5;
L2263: [: ( Seg D282 ) , ( Seg ( width C157 ) ) :] c= ( Indices D296 ) by L2262 , L2250 , ZFMISC_1:95;
L2264: ( card R10 ) <= ( the_rank_of D296 ) by L2263 , L2251 , MATRIX13:79;
L2265: ( the_rank_of D296 ) = ( card R10 ) by L2264 , L2260 , XXREAL_0:1;
thus L2266: thesis by L2265 , L2207 , L2208;
end;

end;
suppose L2246: R10 = ( {} );

set D298 = ( 0. (R9 , D282 , D284) );
L2247:
now
let R3 being Nat;
assume that
L2248: (1 <= R3 & R3 <= D282);
L2249: (( dom C157 ) = ( Seg ( len C157 ) ) & ( len C157 ) = D282) by FINSEQ_1:def 3 , MATRIX_1:def 2;
L2250: R3 in ( NAT ) by ORDINAL1:def 12;
L2251: R3 in ( Seg D282 ) by L2250 , L2248;
thus L2252: ( D298 . R3 ) = ( D284 |-> ( 0. R9 ) ) by L2251 , FINSEQ_2:57
.= ( Line (C157 , R3) ) by L2209 , L2246 , L2251 , L2249
.= ( C157 . R3 ) by L2251 , MATRIX_2:8;
end;
L2253: ( len D298 ) = D282 by L2214 , MATRIX_1:23;
L2254: ( width C157 ) = D284 by L2214 , MATRIX_1:23;
L2255: ( len C157 ) = D282 by L2214 , MATRIX_1:23;
L2256: D298 = C157 by L2255 , L2253 , L2247 , FINSEQ_1:14;
L2257: ( the_rank_of C152 ) = ( 0 ) by L2256 , L2207 , L2253 , L2254 , MATRIX13:95;
L2258: D298 = C152 by L2257 , MATRIX13:95;
L2259: ( Indices ( D285 ^^ D283 ) ) = [: ( Seg D282 ) , ( Seg ( D284 + D281 ) ) :] by L2214 , MATRIX_1:23;
thus L2260: (( the_rank_of C152 ) = ( the_rank_of ( C152 ^^ C153 ) ) implies ( Solutions_of (C152 , C153) ) is non  empty)
proof
set D299 = the (Matrix of D284 , D281 , R9);
assume L2261: ( the_rank_of C152 ) = ( the_rank_of ( C152 ^^ C153 ) );
L2262: ( ( Seg ( D284 + D281 ) ) \ ( Seg D284 ) ) c= ( Seg ( D284 + D281 ) ) by XBOOLE_1:36;
L2263: [: ( Seg D282 ) , ( ( Seg ( D284 + D281 ) ) \ ( Seg D284 ) ) :] c= ( Indices ( C152 ^^ C153 ) ) by L2262 , L2259 , ZFMISC_1:95;
L2264: ( Segm (( D285 ^^ D283 ) , ( Seg D282 ) , ( ( Seg ( D284 + D281 ) ) \ ( Seg D284 ) )) ) = C153 by L650;
L2265: ( 0 ) = ( the_rank_of C153 ) by L2264 , L2257 , L2261 , L2263 , MATRIX13:79;
L2266: C153 = ( 0. (R9 , D282 , D281) ) by L2265 , L2184 , MATRIX13:95;
L2267: ((D284 = ( 0 ) & D281 = ( 0 )) or ( Solutions_of (D285 , D283) ) = { B164 where B164 is (Matrix of D284 , D281 , R9) : (not contradiction) }) by L2266 , L2185 , L2214 , L2258 , L1585;
L2268: (( Solutions_of (D285 , D283) ) = { ( {} ) } or D299 in ( Solutions_of (D285 , D283) )) by L2267 , L2258 , L2266 , L1608;
thus L2269: thesis by L2268;
end;

L2270: ( Indices D283 ) = [: ( Seg D282 ) , ( Seg D281 ) :] by L2214 , MATRIX_1:23;
L2271: ( D284 + D281 ) = ( width ( D285 ^^ D283 ) ) by L2214 , MATRIX_1:23;
L2272: ( Indices D298 ) = [: ( Seg D282 ) , ( Seg D284 ) :] by L2214 , MATRIX_1:23;
thus L2273: (( Solutions_of (C152 , C153) ) is non  empty implies ( the_rank_of C152 ) = ( the_rank_of ( C152 ^^ C153 ) ))
proof
assume L2274: ( Solutions_of (C152 , C153) ) is non  empty;
assume L2275: ( the_rank_of C152 ) <> ( the_rank_of ( C152 ^^ C153 ) );
consider R3 being Nat, R4 being Nat such that L2276: [ R3 , R4 ] in ( Indices ( D285 ^^ D283 ) ) and L2277: ( ( D285 ^^ D283 ) * (R3 , R4) ) <> ( 0. R9 ) by L2275 , L2257 , MATRIX13:94;
L2278: R4 in ( Seg ( D284 + D281 ) ) by L2271 , L2276 , ZFMISC_1:87;
L2279: ( dom ( Line (( D285 ^^ D283 ) , R3) ) ) = ( Seg ( D284 + D281 ) ) by L2271 , FINSEQ_2:124;
L2280: ( len ( Line (D285 , R3) ) ) = D284 by CARD_1:def 7;
L2281: ( dom ( Line (D283 , R3) ) ) = ( Seg D281 ) by FINSEQ_2:124;
L2282: ( dom ( Line (D285 , R3) ) ) = ( Seg D284 ) by FINSEQ_2:124;
L2283: R3 in ( Seg D282 ) by L2259 , L2276 , ZFMISC_1:87;
L2284: ( Line (( D285 ^^ D283 ) , R3) ) = ( ( Line (D285 , R3) ) ^ ( Line (D283 , R3) ) ) by L2283 , L591;
per cases  by L2278 , L2280 , L2279 , L2284 , FINSEQ_1:25;
suppose L2285: R4 in ( dom ( Line (D285 , R3) ) );

L2286: [ R3 , R4 ] in ( Indices D298 ) by L2285 , L2272 , L2283 , L2282 , ZFMISC_1:87;
L2287: ( ( D285 ^^ D283 ) * (R3 , R4) ) = ( ( Line (( D285 ^^ D283 ) , R3) ) . R4 ) by L2271 , L2278 , MATRIX_1:def 7
.= ( ( Line (D285 , R3) ) . R4 ) by L2284 , L2285 , FINSEQ_1:def 7
.= ( D285 * (R3 , R4) ) by L2282 , L2285 , MATRIX_1:def 7
.= ( 0. R9 ) by L2258 , L2286 , MATRIX_3:1;
thus L2288: thesis by L2287 , L2277;
end;
suppose L2289: (ex R8 being Nat st (R8 in ( dom ( Line (D283 , R3) ) ) & R4 = ( D284 + R8 )));

consider R8 being Nat such that L2290: R8 in ( dom ( Line (D283 , R3) ) ) and L2291: R4 = ( D284 + R8 ) by L2289;
L2292: [ R3 , R8 ] in ( Indices C153 ) by L2270 , L2283 , L2281 , L2290 , ZFMISC_1:87;
L2293: C153 = ( 0. (R9 , D282 , D281) ) by L2258 , L2274 , L1562;
L2294: ( ( D285 ^^ D283 ) * (R3 , R4) ) = ( ( Line (( D285 ^^ D283 ) , R3) ) . R4 ) by L2271 , L2278 , MATRIX_1:def 7
.= ( ( Line (D283 , R3) ) . R8 ) by L2280 , L2284 , L2290 , L2291 , FINSEQ_1:def 7
.= ( D283 * (R3 , R8) ) by L2281 , L2290 , MATRIX_1:def 7
.= ( 0. R9 ) by L2292 , L2293 , MATRIX_3:1;
thus L2295: thesis by L2294 , L2277;
end;
end;

end;
end;
end;
begin
definition
let R9 being Field;
let C159 being (Matrix of R9);
let C160 being (FinSequence of R9);
func Solutions_of (C159 , C160) equals 
{ R25 where R25 is (FinSequence of R9) : ( ColVec2Mx R25 ) in ( Solutions_of (C159 , ( ColVec2Mx C160 )) ) };
coherence;
end;
theorem
L2277: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R24 being (FinSequence of R9) holds (for R1 being set holds (R1 in ( Solutions_of (R13 , ( ColVec2Mx R24 )) ) implies (ex R25 being (FinSequence of R9) st (R1 = ( ColVec2Mx R25 ) & ( len R25 ) = ( width R13 ))))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R24 being (FinSequence of R9);
let R1 being set;
assume that
L2278: R1 in ( Solutions_of (R13 , ( ColVec2Mx R24 )) );
consider R17 being (Matrix of R9) such that L2279: R17 = R1 and L2280: ( len R17 ) = ( width R13 ) and L2281: ( width R17 ) = ( width ( ColVec2Mx R24 ) ) and L2282: ( R13 * R17 ) = ( ColVec2Mx R24 ) by L2278;
per cases ;
suppose L2283: ( len R17 ) = ( 0 );

take D300 = ( ( 0 ) |-> ( 0. R9 ) );
L2284: ( len ( ColVec2Mx D300 ) ) = ( 0 ) by MATRIX_1:def 2;
thus L2285: thesis by L2284 , L2279 , L2280 , L2283 , CARD_2:64;
end;
suppose L2286: ( len R17 ) > ( 0 );

take ( Col (R17 , 1) );
L2287: ( len R13 ) = ( len ( ColVec2Mx R24 ) ) by L2278 , L937;
L2288: ( len R13 ) <> ( 0 ) by L2280 , L2286 , MATRIX_1:def 3;
L2289: ( len R24 ) > ( 0 ) by L2288 , L2287 , MATRIX_1:def 2;
L2290: ( width R17 ) = 1 by L2289 , L2281 , MATRIX_1:23;
thus L2291: thesis by L2290 , L2279 , L2280 , L2286 , L839 , MATRIX_1:def 8;
end;
end;
theorem
L2293: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R24 being (FinSequence of R9) holds (for R25 being (FinSequence of R9) holds (( ColVec2Mx R25 ) in ( Solutions_of (R13 , ( ColVec2Mx R24 )) ) implies ( len R25 ) = ( width R13 ))))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R24 being (FinSequence of R9);
let R25 being (FinSequence of R9);
assume L2294: ( ColVec2Mx R25 ) in ( Solutions_of (R13 , ( ColVec2Mx R24 )) );
L2295: (ex R26 being (FinSequence of R9) st (( ColVec2Mx R25 ) = ( ColVec2Mx R26 ) & ( len R26 ) = ( width R13 ))) by L2294 , L2277;
L2296: ( len ( ColVec2Mx R25 ) ) = ( len R25 ) by MATRIX_1:def 2;
thus L2297: thesis by L2296 , L2295 , MATRIX_1:def 2;
end;
definition
let R9 being Field;
let C161 being (Matrix of R9);
let C162 being (FinSequence of R9);
redefine func Solutions_of (C161 , C162) -> (Subset of ( ( width C161 ) -VectSp_over R9 ));

coherence
proof
L2298: ( Solutions_of (C161 , C162) ) c= (the carrier of ( ( width C161 ) -VectSp_over R9 ))
proof
let R1 being set;
assume L2299: R1 in ( Solutions_of (C161 , C162) );
consider R25 being (FinSequence of R9) such that L2300: R1 = R25 and L2301: ( ColVec2Mx R25 ) in ( Solutions_of (C161 , ( ColVec2Mx C162 )) ) by L2299;
L2302: ( len R25 ) = ( width C161 ) by L2301 , L2293;
L2303: (( ( width C161 ) -tuples_on (the carrier of R9) ) = (the carrier of ( ( width C161 ) -VectSp_over R9 )) & R25 is (Element of ( ( width C161 ) -tuples_on (the carrier of R9) ))) by L2302 , FINSEQ_2:92 , MATRIX13:102;
thus L2304: thesis by L2303 , L2300;
end;
thus L2305: thesis by L2298;
end;
end;
registration
let R9 being Field;
let C163 being (Matrix of R9);
let C164 being (Element of ( NAT ));
cluster ( Solutions_of (C163 , ( C164 |-> ( 0. R9 ) )) ) ->  linearly-closed for (Subset of ( ( width C163 ) -VectSp_over R9 ));
coherence
proof
set D301 = ( ( width C163 ) -VectSp_over R9 );
set D302 = ( C164 |-> ( 0. R9 ) );
set D303 = ( Solutions_of (C163 , D302) );
L2307: ( ColVec2Mx D302 ) = ( 0. (R9 , C164 , 1) ) by L924;
L2308:
now
let C165 being (Element of R9);
let C166 being (Element of D301);
assume L2309: C166 in D303;
consider R25 being (FinSequence of R9) such that L2310: C166 = R25 and L2311: ( ColVec2Mx R25 ) in ( Solutions_of (C163 , ( ColVec2Mx D302 )) ) by L2309;
reconsider D304 = R25 as (Element of ( ( width C163 ) -tuples_on (the carrier of R9) )) by L2310 , MATRIX13:102;
L2312:
now
per cases ;
suppose L2313: C164 = ( 0 );

L2314: (( len ( C165 * ( 0. (R9 , C164 , 1) ) ) ) = ( len ( 0. (R9 , C164 , 1) ) ) & ( 0. (R9 , C164 , 1) ) = ( {} )) by L2313 , MATRIX_3:def 5;
thus L2315: ( 0. (R9 , C164 , 1) ) = ( C165 * ( 0. (R9 , C164 , 1) ) ) by L2314;
end;
suppose L2316: C164 > ( 0 );

L2317: (( len ( 0. (R9 , C164 , 1) ) ) = C164 & ( width ( 0. (R9 , C164 , 1) ) ) = 1) by L2316 , MATRIX_1:23;
thus L2318: ( C165 * ( 0. (R9 , C164 , 1) ) ) = ( C165 * ( ( 0. R9 ) * ( 0. (R9 , C164 , 1) ) ) ) by L2317 , L2316 , MATRIX_5:24
.= ( ( C165 * ( 0. R9 ) ) * ( 0. (R9 , C164 , 1) ) ) by MATRIX_5:11
.= ( ( 0. R9 ) * ( 0. (R9 , C164 , 1) ) ) by VECTSP_1:6
.= ( 0. (R9 , C164 , 1) ) by L2316 , L2317 , MATRIX_5:24;
end;
end;
L2320: ( C165 * ( ColVec2Mx D304 ) ) in ( Solutions_of (C163 , ( 0. (R9 , C164 , 1) )) ) by L2312 , L2307 , L2311 , L961;
L2321: ( ColVec2Mx ( C165 * D304 ) ) in ( Solutions_of (C163 , ( 0. (R9 , C164 , 1) )) ) by L2320 , L900;
L2322: ( C165 * D304 ) in ( Solutions_of (C163 , D302) ) by L2321 , L2307;
thus L2323: ( C165 * C166 ) in D303 by L2322 , L2310 , MATRIX13:102;
end;
L2324:
now
let C167 , C168 being (Element of D301);
assume that
L2325: C167 in D303
and
L2326: C168 in D303;
consider R25 being (FinSequence of R9) such that L2327: C167 = R25 and L2328: ( ColVec2Mx R25 ) in ( Solutions_of (C163 , ( ColVec2Mx D302 )) ) by L2325;
consider R26 being (FinSequence of R9) such that L2329: C168 = R26 and L2330: ( ColVec2Mx R26 ) in ( Solutions_of (C163 , ( ColVec2Mx D302 )) ) by L2326;
L2331: ( len R26 ) = ( width C163 ) by L2330 , L2293;
reconsider D305 = R25 , D306 = R26 as (Element of ( ( width C163 ) -tuples_on (the carrier of R9) )) by L2327 , L2329 , MATRIX13:102;
L2332: ( ( ColVec2Mx D305 ) + ( ColVec2Mx D306 ) ) in ( Solutions_of (C163 , ( ( 0. (R9 , C164 , 1) ) + ( 0. (R9 , C164 , 1) ) )) ) by L2307 , L2328 , L2330 , L988;
L2333: ( ( ColVec2Mx D305 ) + ( ColVec2Mx D306 ) ) in ( Solutions_of (C163 , ( 0. (R9 , C164 , 1) )) ) by L2332 , MATRIX_3:4;
L2334: ( ColVec2Mx ( D305 + D306 ) ) in ( Solutions_of (C163 , ( 0. (R9 , C164 , 1) )) ) by L2333 , L2328 , L2331 , L877 , L2293;
L2335: ( D305 + D306 ) in D303 by L2334 , L2307;
thus L2336: ( C167 + C168 ) in D303 by L2335 , L2327 , L2329 , MATRIX13:102;
end;
thus L2337: thesis by L2324 , L2308 , VECTSP_4:def 1;
end;
end;
theorem
L2339: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R24 being (FinSequence of R9) holds ((( Solutions_of (R13 , R24) ) is non  empty & ( width R13 ) = ( 0 )) implies ( len R13 ) = ( 0 )))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R24 being (FinSequence of R9);
set D307 = ( Solutions_of (R13 , R24) );
assume that
L2340: D307 is non  empty
and
L2341: ( width R13 ) = ( 0 );
consider R1 being set such that L2342: R1 in D307 by L2340 , XBOOLE_0:def 1;
consider R25 being (FinSequence of R9) such that L2343: R1 = R25 and L2344: ( ColVec2Mx R25 ) in ( Solutions_of (R13 , ( ColVec2Mx R24 )) ) by L2342;
consider R17 being (Matrix of R9) such that L2345: ( ColVec2Mx R25 ) = R17 and L2346: ( len R17 ) = ( width R13 ) and L2347: ( width R17 ) = ( width ( ColVec2Mx R24 ) ) and L2348: ( R13 * R17 ) = ( ColVec2Mx R24 ) by L2344;
L2349: ( width ( R13 * R17 ) ) = ( width R17 ) by L2346 , MATRIX_3:def 4
.= ( 0 ) by L2341 , L2346 , MATRIX_1:def 3;
thus L2350: ( 0 ) = ( len R24 ) by L2349 , L2348 , MATRIX_1:23
.= ( len ( ColVec2Mx R24 ) ) by MATRIX_1:def 2
.= ( len R13 ) by L2344 , L937;
end;
theorem
L2351: (for R9 being Field holds (for R13 being (Matrix of R9) holds ((( width R13 ) <> ( 0 ) or ( len R13 ) = ( 0 )) implies ( Solutions_of (R13 , ( ( len R13 ) |-> ( 0. R9 ) )) ) is non  empty)))
proof
let R9 being Field;
let R13 being (Matrix of R9);
set D308 = ( ( len R13 ) |-> ( 0. R9 ) );
L2352: ( len D308 ) = ( len R13 ) by CARD_1:def 7;
reconsider D309 = R13 as (Matrix of ( len R13 ) , ( width R13 ) , R9) by MATRIX_2:7;
assume L2353: (( width R13 ) <> ( 0 ) or ( len R13 ) = ( 0 ));
per cases  by L2353;
suppose L2354: ( len R13 ) = ( 0 );

L2355: ( Solutions_of (D309 , ( ColVec2Mx D308 )) ) = { ( {} ) } by L2354 , L2352 , L1548;
L2356: ( {} ) in ( Solutions_of (D309 , ( ColVec2Mx D308 )) ) by L2355 , TARSKI:def 1;
consider R25 being (FinSequence of R9) such that L2357: ( {} ) = ( ColVec2Mx R25 ) and L2358: ( len R25 ) = ( width R13 ) by L2356 , L2277;
L2359: R25 in ( Solutions_of (R13 , D308) ) by L2356 , L2357;
thus L2360: thesis by L2359;
end;
suppose L2361: ( width R13 ) > ( 0 );

L2362: ( ColVec2Mx D308 ) = ( 0. (R9 , ( len R13 ) , 1) ) by L924;
L2363: (( len ( ColVec2Mx D308 ) ) = ( len D308 ) & ( the_rank_of R13 ) = ( the_rank_of ( R13 ^^ ( ColVec2Mx D308 ) ) )) by L2362 , L718 , MATRIX_1:def 2;
L2364: ( Solutions_of (R13 , ( ColVec2Mx D308 )) ) is non  empty by L2363 , L2352 , L2361 , L2183;
consider R1 being set such that L2365: R1 in ( Solutions_of (R13 , ( ColVec2Mx D308 )) ) by L2364 , XBOOLE_0:def 1;
consider R25 being (FinSequence of R9) such that L2366: R1 = ( ColVec2Mx R25 ) and L2367: ( len R25 ) = ( width R13 ) by L2365 , L2277;
L2368: R25 in ( Solutions_of (R13 , D308) ) by L2365 , L2366;
thus L2369: thesis by L2368;
end;
end;
definition
let R9 being Field;
let C169 being (Matrix of R9);
assume L2371: (( width C169 ) = ( 0 ) implies ( len C169 ) = ( 0 ));
func Space_of_Solutions_of C169 ->  strict (Subspace of ( ( width C169 ) -VectSp_over R9 )) means 
:L2372: (the carrier of it) = ( Solutions_of (C169 , ( ( len C169 ) |-> ( 0. R9 ) )) );
existence
proof
L2373: ( Solutions_of (C169 , ( ( len C169 ) |-> ( 0. R9 ) )) ) is non  empty by L2371 , L2351;
thus L2374: thesis by L2373 , VECTSP_4:34;
end;
uniqueness by VECTSP_4:29;
end;
theorem
L2376: (for R9 being Field holds (for B165 being (Matrix of R9) holds (for B166 being (FinSequence of R9) holds (( Solutions_of (B165 , B166) ) is non  empty implies ( Solutions_of (B165 , B166) ) is (Coset of ( Space_of_Solutions_of B165 ))))))
proof
let R9 being Field;
let C170 being (Matrix of R9);
let C171 being (FinSequence of R9);
set D310 = ( ( width C170 ) -VectSp_over R9 );
reconsider D311 = C171 as (Element of ( ( len C171 ) -tuples_on (the carrier of R9) )) by FINSEQ_2:92;
set D312 = ( ColVec2Mx D311 );
assume L2377: ( Solutions_of (C170 , C171) ) is non  empty;
consider R1 being set such that L2378: R1 in ( Solutions_of (C170 , D311) ) by L2377 , XBOOLE_0:def 1;
consider R25 being (FinSequence of R9) such that L2379: R1 = R25 and L2380: ( ColVec2Mx R25 ) in ( Solutions_of (C170 , D312) ) by L2378;
set D313 = ( ColVec2Mx R25 );
L2381: ( len R25 ) = ( width C170 ) by L2380 , L2293;
reconsider D314 = R25 as (Element of ( ( width C170 ) -tuples_on (the carrier of R9) )) by L2381 , FINSEQ_2:92;
reconsider D315 = D314 as (Element of D310) by MATRIX13:102;
L2382: (( len D312 ) = ( len D311 ) & ( len C170 ) = ( len D312 )) by L2380 , L937 , MATRIX_1:def 2;
L2383: (( width C170 ) = ( 0 ) implies ( len C170 ) = ( 0 )) by L2378 , L2339;
L2384: (the carrier of ( Space_of_Solutions_of C170 )) = ( Solutions_of (C170 , ( ( len C170 ) |-> ( 0. R9 ) )) ) by L2383 , L2372;
L2385: ( Solutions_of (C170 , C171) ) c= ( D315 + ( Space_of_Solutions_of C170 ) )
proof
L2386: (( len D311 ) = ( len ( ( - ( 1_ R9 ) ) * D311 ) ) & ( ( - ( 1_ R9 ) ) * D312 ) = ( ColVec2Mx ( ( - ( 1_ R9 ) ) * D311 ) )) by L900 , CARD_1:def 7;
L2387: ( D312 + ( ( - ( 1_ R9 ) ) * D312 ) ) = ( ColVec2Mx ( D311 + ( ( - ( 1_ R9 ) ) * D311 ) ) ) by L2386 , L877
.= ( ColVec2Mx ( D311 + ( - D311 ) ) ) by FVSUM_1:59
.= ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) ) by L2382 , FVSUM_1:26;
let R2 being set;
assume L2388: R2 in ( Solutions_of (C170 , C171) );
consider R26 being (FinSequence of R9) such that L2389: R2 = R26 and L2390: ( ColVec2Mx R26 ) in ( Solutions_of (C170 , D312) ) by L2388;
L2391: ( len R26 ) = ( width C170 ) by L2390 , L2293;
reconsider D316 = R26 as (Element of ( ( width C170 ) -tuples_on (the carrier of R9) )) by L2391 , FINSEQ_2:92;
set D317 = ( ColVec2Mx D316 );
reconsider D318 = ( D316 + ( ( - ( 1_ R9 ) ) * D314 ) ) as (Element of D310) by MATRIX13:102;
L2392: ( len D314 ) = ( len ( ( - ( 1_ R9 ) ) * D314 ) ) by L2381 , CARD_1:def 7;
L2393: (( width D312 ) = ( width ( ( - ( 1_ R9 ) ) * D312 ) ) & ( ( - ( 1_ R9 ) ) * D313 ) in ( Solutions_of (C170 , ( ( - ( 1_ R9 ) ) * D312 )) )) by L2380 , L961 , MATRIX_3:def 5;
L2394: ( D317 + ( ( - ( 1_ R9 ) ) * D313 ) ) in ( Solutions_of (C170 , ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) )) ) by L2393 , L2390 , L2387 , L988;
L2395: ( D317 + ( ( - ( 1_ R9 ) ) * D313 ) ) = ( D317 + ( ColVec2Mx ( ( - ( 1_ R9 ) ) * D314 ) ) ) by L900
.= ( ColVec2Mx ( D316 + ( ( - ( 1_ R9 ) ) * D314 ) ) ) by L2381 , L2390 , L2392 , L877 , L2293;
L2396: ( D316 + ( ( - ( 1_ R9 ) ) * D314 ) ) in ( Solutions_of (C170 , ( ( len C170 ) |-> ( 0. R9 ) )) ) by L2395 , L2394;
L2397: D318 in ( Space_of_Solutions_of C170 ) by L2396 , L2384 , STRUCT_0:def 5;
L2398: ( D314 + ( D316 + ( ( - ( 1_ R9 ) ) * D314 ) ) ) = ( D314 + ( ( ( - ( 1_ R9 ) ) * D314 ) + D316 ) ) by FINSEQOP:33
.= ( D314 + ( ( - D314 ) + D316 ) ) by FVSUM_1:59
.= ( ( D314 + ( - D314 ) ) + D316 ) by FINSEQOP:28
.= ( ( ( width C170 ) |-> ( 0. R9 ) ) + D316 ) by FVSUM_1:26
.= D316 by FVSUM_1:21;
L2399: ( D315 + D318 ) = D316 by L2398 , MATRIX13:102;
thus L2400: thesis by L2399 , L2389 , L2397;
end;
L2401: ( D315 + ( Space_of_Solutions_of C170 ) ) c= ( Solutions_of (C170 , C171) )
proof
let R2 being set;
L2402: (( len C170 ) = ( 0 ) or ( len C170 ) <> ( 0 ));
L2403: ( len ( ( len C170 ) |-> ( 0. R9 ) ) ) = ( len C170 ) by CARD_1:def 7;
L2404: ((( width D312 ) = 1 & ( width ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) ) ) = 1) or (( width D312 ) = ( 0 ) & ( width ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) ) ) = ( 0 ))) by L2403 , L2382 , L2402 , L839 , MATRIX_1:22;
L2405: ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) ) = ( 0. (R9 , ( len C170 ) , 1) ) by L924;
L2406: ( D312 + ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) ) ) = D312 by L2405 , L2382 , MATRIX_3:4;
assume L2407: R2 in ( D315 + ( Space_of_Solutions_of C170 ) );
consider C172 being (Element of D310) such that L2408: C172 in ( Space_of_Solutions_of C170 ) and L2409: R2 = ( D315 + C172 ) by L2407 , VECTSP_4:42;
reconsider D319 = C172 as (Element of ( ( width C170 ) -tuples_on (the carrier of R9) )) by MATRIX13:102;
L2410: D319 in ( Solutions_of (C170 , ( ( len C170 ) |-> ( 0. R9 ) )) ) by L2384 , L2408 , STRUCT_0:def 5;
consider R26 being (FinSequence of R9) such that L2411: D319 = R26 and L2412: ( ColVec2Mx R26 ) in ( Solutions_of (C170 , ( ColVec2Mx ( ( len C170 ) |-> ( 0. R9 ) ) )) ) by L2410;
L2413: ( width C170 ) = ( len R26 ) by L2412 , L2293;
L2414: ( ColVec2Mx ( D314 + R26 ) ) = ( D313 + ( ColVec2Mx R26 ) ) by L2413 , L2380 , L877 , L2293;
L2415: ( ColVec2Mx ( D314 + R26 ) ) in ( Solutions_of (C170 , D312) ) by L2414 , L2380 , L2412 , L2404 , L2406 , L988;
L2416: ( D314 + R26 ) in ( Solutions_of (C170 , C171) ) by L2415;
thus L2417: thesis by L2416 , L2409 , L2411 , MATRIX13:102;
end;
L2418: ( D315 + ( Space_of_Solutions_of C170 ) ) = ( Solutions_of (C170 , C171) ) by L2401 , L2385 , XBOOLE_0:def 10;
thus L2419: thesis by L2418 , VECTSP_4:def 6;
end;
theorem
L2420: (for R9 being Field holds (for R13 being (Matrix of R9) holds (((( width R13 ) = ( 0 ) implies ( len R13 ) = ( 0 )) & ( the_rank_of R13 ) = ( 0 )) implies ( Space_of_Solutions_of R13 ) = ( ( width R13 ) -VectSp_over R9 ))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
assume that
L2421: (( width R13 ) = ( 0 ) implies ( len R13 ) = ( 0 ))
and
L2422: ( the_rank_of R13 ) = ( 0 );
set D320 = ( ( len R13 ) |-> ( 0. R9 ) );
L2423: (the carrier of ( ( width R13 ) -VectSp_over R9 )) c= ( Solutions_of (R13 , D320) )
proof
let R1 being set;
assume that
L2424: R1 in (the carrier of ( ( width R13 ) -VectSp_over R9 ));
reconsider D321 = R1 as (Element of ( ( width R13 ) -tuples_on (the carrier of R9) )) by L2424 , MATRIX13:102;
L2425: (R13 = ( 0. (R9 , ( len R13 ) , ( width R13 )) ) & ( ColVec2Mx D320 ) = ( 0. (R9 , ( len R13 ) , 1) )) by L2422 , L924 , MATRIX13:95;
per cases ;
suppose L2426: ( len R13 ) = ( 0 );

L2427: ( Solutions_of (R13 , ( ColVec2Mx D320 )) ) = { ( {} ) } by L2426 , L2425 , L1548;
L2428: ( {} ) in ( Solutions_of (R13 , ( ColVec2Mx D320 )) ) by L2427 , TARSKI:def 1;
consider R25 being (FinSequence of R9) such that L2429: ( {} ) = ( ColVec2Mx R25 ) and L2430: ( len R25 ) = ( width R13 ) by L2428 , L2277;
L2431: ( width R13 ) = ( 0 ) by L2426 , MATRIX_1:def 3;
L2432: (the carrier of ( ( width R13 ) -VectSp_over R9 )) = ( ( 0 ) -tuples_on (the carrier of R9) ) by L2431 , MATRIX13:102
.= { ( <*> (the carrier of R9) ) } by FINSEQ_2:94;
L2433: R1 = ( <*> (the carrier of R9) ) by L2432 , L2424 , TARSKI:def 1;
L2434: R25 = R1 by L2433 , L2426 , L2430 , MATRIX_1:def 3;
thus L2435: thesis by L2434 , L2428 , L2429;
end;
suppose L2436: ( len R13 ) > ( 0 );

L2437: ( len D321 ) = ( width R13 ) by CARD_1:def 7;
L2438: ( Solutions_of (R13 , ( ColVec2Mx D320 )) ) = { B167 where B167 is (Matrix of ( width R13 ) , 1 , R9) : (not contradiction) } by L2421 , L2425 , L2436 , L1585;
L2439: ( ColVec2Mx D321 ) in ( Solutions_of (R13 , ( ColVec2Mx D320 )) ) by L2438 , L2437;
thus L2440: thesis by L2439;
end;
end;
L2442: (the carrier of ( ( width R13 ) -VectSp_over R9 )) = ( Solutions_of (R13 , D320) ) by L2423 , XBOOLE_0:def 10
.= (the carrier of ( Space_of_Solutions_of R13 )) by L2421 , L2372;
thus L2443: thesis by L2442 , VECTSP_4:31;
end;
theorem
L2444: (for R9 being Field holds (for R13 being (Matrix of R9) holds (( Space_of_Solutions_of R13 ) = ( ( width R13 ) -VectSp_over R9 ) implies ( the_rank_of R13 ) = ( 0 ))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
assume that
L2445: ( Space_of_Solutions_of R13 ) = ( ( width R13 ) -VectSp_over R9 );
assume L2446: ( the_rank_of R13 ) <> ( 0 );
consider R3 being Nat, R4 being Nat such that L2447: [ R3 , R4 ] in ( Indices R13 ) and L2448: ( R13 * (R3 , R4) ) <> ( 0. R9 ) by L2446 , MATRIX13:94;
L2449: R4 in ( Seg ( width R13 ) ) by L2447 , ZFMISC_1:87;
L2450: ( width R13 ) <> ( 0 ) by L2449;
set D322 = ( Line (( 1. (R9 , ( width R13 )) ) , R4) );
L2451: ( width ( 1. (R9 , ( width R13 )) ) ) = ( width R13 ) by MATRIX_1:24;
L2452: ( dom D322 ) = ( Seg ( width R13 ) ) by L2451 , FINSEQ_2:124;
L2453: ( Indices ( 1. (R9 , ( width R13 )) ) ) = [: ( Seg ( width R13 ) ) , ( Seg ( width R13 ) ) :] by MATRIX_1:24;
L2454:
now
let R5 being Nat;
assume that
L2455: R5 in ( dom D322 )
and
L2456: R5 <> R4;
L2457: [ R4 , R5 ] in ( Indices ( 1. (R9 , ( width R13 )) ) ) by L2449 , L2452 , L2453 , L2455 , ZFMISC_1:87;
thus L2458: ( 0. R9 ) = ( ( 1. (R9 , ( width R13 )) ) * (R4 , R5) ) by L2457 , L2456 , MATRIX_1:def 11
.= ( D322 . R5 ) by L2451 , L2452 , L2455 , MATRIX_1:def 7;
end;
L2459: ( dom ( Line (R13 , R3) ) ) = ( Seg ( width R13 ) ) by FINSEQ_2:124;
L2460: [ R4 , R4 ] in ( Indices ( 1. (R9 , ( width R13 )) ) ) by L2449 , L2453 , ZFMISC_1:87;
L2461: ( 1_ R9 ) = ( ( 1. (R9 , ( width R13 )) ) * (R4 , R4) ) by L2460 , MATRIX_1:def 11
.= ( D322 . R4 ) by L2449 , L2451 , MATRIX_1:def 7;
L2462: ( Sum ( mlt (D322 , ( Line (R13 , R3) )) ) ) = ( ( Line (R13 , R3) ) . R4 ) by L2461 , L2449 , L2452 , L2459 , L2454 , MATRIX_3:17
.= ( R13 * (R3 , R4) ) by L2449 , MATRIX_1:def 7;
L2463: ( ColVec2Mx ( ( len R13 ) |-> ( 0. R9 ) ) ) = ( 0. (R9 , ( len R13 ) , 1) ) by L924;
L2464: R3 in ( dom R13 ) by L2447 , ZFMISC_1:87;
L2465: D322 in ( ( width R13 ) -tuples_on (the carrier of R9) ) by L2451;
L2466: D322 in (the carrier of ( Space_of_Solutions_of R13 )) by L2465 , L2445 , MATRIX13:102;
L2467: D322 in ( Solutions_of (R13 , ( ( len R13 ) |-> ( 0. R9 ) )) ) by L2466 , L2372 , L2450;
consider R25 being (FinSequence of R9) such that L2468: R25 = D322 and L2469: ( ColVec2Mx R25 ) in ( Solutions_of (R13 , ( ColVec2Mx ( ( len R13 ) |-> ( 0. R9 ) ) )) ) by L2467;
consider R17 being (Matrix of R9) such that L2470: R17 = ( ColVec2Mx R25 ) and L2471: ( len R17 ) = ( width R13 ) and L2472: ( width R17 ) = ( width ( ColVec2Mx ( ( len R13 ) |-> ( 0. R9 ) ) ) ) and L2473: ( R13 * R17 ) = ( ColVec2Mx ( ( len R13 ) |-> ( 0. R9 ) ) ) by L2469;
L2474: 1 in ( Seg 1 );
L2475: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3;
L2476: ( len R13 ) <> ( 0 ) by L2475 , L2447 , ZFMISC_1:87;
L2477: ( Indices ( ColVec2Mx ( ( len R13 ) |-> ( 0. R9 ) ) ) ) = [: ( Seg ( len R13 ) ) , ( Seg 1 ) :] by L2476 , L2463 , MATRIX_1:23;
L2478: [ R3 , 1 ] in ( Indices ( ColVec2Mx ( ( len R13 ) |-> ( 0. R9 ) ) ) ) by L2477 , L2464 , L2475 , L2474 , ZFMISC_1:87;
L2479: ( ( Line (R13 , R3) ) "*" ( Col (R17 , 1) ) ) = ( ( 0. (R9 , ( len R13 ) , 1) ) * (R3 , 1) ) by L2478 , L2471 , L2473 , L2463 , MATRIX_3:def 4
.= ( 0. R9 ) by L2463 , L2478 , MATRIX_3:1;
L2480: ( 0. R9 ) = ( ( Col (R17 , 1) ) "*" ( Line (R13 , R3) ) ) by L2479 , FVSUM_1:90
.= ( Sum ( mlt (R25 , ( Line (R13 , R3) )) ) ) by L2470 , L2471 , L839 , L2450;
thus L2481: thesis by L2480 , L2448 , L2468 , L2462;
end;
theorem
L2482: (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for R11 being (Element of R9) holds (for R20 being (Matrix of R7 , R8 , R9) holds (for R3 being Nat holds (for R4 being Nat holds ((R4 in ( Seg R7 ) & R8 > ( 0 ) & (R3 = R4 implies R11 <> ( - ( 1_ R9 ) ))) implies ( Space_of_Solutions_of R20 ) = ( Space_of_Solutions_of ( RLine (R20 , R3 , ( ( Line (R20 , R3) ) + ( R11 * ( Line (R20 , R4) ) ) )) ) )))))))))
proof
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let R11 being (Element of R9);
let R20 being (Matrix of R7 , R8 , R9);
let R3 being Nat;
let R4 being Nat;
assume that
L2483: R4 in ( Seg R7 )
and
L2484: R8 > ( 0 )
and
L2485: (R3 = R4 implies R11 <> ( - ( 1_ R9 ) ));
set D323 = ( ( len R20 ) |-> ( 0. R9 ) );
set D324 = ( RLine (R20 , R3 , ( ( Line (R20 , R3) ) + ( R11 * ( Line (R20 , R4) ) ) )) );
L2486: R7 <> ( 0 ) by L2483;
L2487: ( width D324 ) = R8 by L2486 , MATRIX_1:23;
L2488: ( len D323 ) = ( len R20 ) by CARD_1:def 7;
reconsider D325 = ( ColVec2Mx D323 ) as (Matrix of R7 , 1 , R9) by L2488 , MATRIX_1:def 2;
set D326 = ( RLine (D325 , R3 , ( ( Line (D325 , R3) ) + ( R11 * ( Line (D325 , R4) ) ) )) );
L2489: D325 = ( 0. (R9 , ( len R20 ) , 1) ) by L924;
L2490:
now
let C173 , C174 being Nat;
assume that
L2491: [ C173 , C174 ] in ( Indices D325 );
reconsider D327 = C173 , D328 = C174 as (Element of ( NAT )) by ORDINAL1:def 12;
L2492: ( len ( ( Line (D325 , R3) ) + ( R11 * ( Line (D325 , R4) ) ) ) ) = ( width D325 ) by CARD_1:def 7;
L2493:
now
per cases ;
suppose L2494: C173 = R3;

L2495: 1 = ( width D325 ) by L2486 , MATRIX_1:23;
L2496: C174 in ( Seg 1 ) by L2495 , L2491 , ZFMISC_1:87;
L2497: ( ( Line (D325 , R4) ) . C174 ) = ( D325 * (R4 , C174) ) by L2496 , L2495 , MATRIX_1:def 7;
L2498: ( ( R11 * ( Line (D325 , R4) ) ) . C174 ) = ( R11 * ( D325 * (R4 , C174) ) ) by L2497 , L2495 , L2496 , FVSUM_1:51;
L2499: ( Indices D325 ) = [: ( Seg R7 ) , ( Seg 1 ) :] by L2486 , MATRIX_1:23;
L2500: [ R4 , C174 ] in ( Indices D325 ) by L2499 , L2483 , L2496 , ZFMISC_1:87;
L2501: ( ( Line (D325 , R3) ) . C174 ) = ( D325 * (R3 , C174) ) by L2495 , L2496 , MATRIX_1:def 7;
L2502: ( ( ( Line (D325 , R3) ) + ( R11 * ( Line (D325 , R4) ) ) ) . C174 ) = ( ( D325 * (R3 , C174) ) + ( R11 * ( D325 * (R4 , C174) ) ) ) by L2501 , L2495 , L2496 , L2498 , FVSUM_1:18
.= ( ( 0. R9 ) + ( R11 * ( D325 * (R4 , C174) ) ) ) by L2489 , L2491 , L2494 , MATRIX_3:1
.= ( ( 0. R9 ) + ( R11 * ( 0. R9 ) ) ) by L2489 , L2500 , MATRIX_3:1
.= ( ( 0. R9 ) + ( 0. R9 ) ) by VECTSP_1:6
.= ( 0. R9 ) by RLVECT_1:def 4
.= ( D325 * (C173 , C174) ) by L2489 , L2491 , MATRIX_3:1;
thus L2503: ( D325 * (D327 , D328) ) = ( D326 * (D327 , D328) ) by L2502 , L2491 , L2492 , L2494 , MATRIX11:def 3;
end;
suppose L2504: R3 <> C173;

thus L2505: ( D325 * (D327 , D328) ) = ( D326 * (D327 , D328) ) by L2504 , L2491 , L2492 , MATRIX11:def 3;
end;
end;
thus L2507: ( D325 * (C173 , C174) ) = ( D326 * (C173 , C174) ) by L2493;
end;
L2508: D326 = D325 by L2490 , MATRIX_1:27;
L2509: ( Solutions_of (R20 , D325) ) = ( Solutions_of (D324 , D325) ) by L2508 , L2483 , L2485 , L1149;
set D329 = ( Space_of_Solutions_of D324 );
L2510: (( len R20 ) = R7 & ( len D324 ) = R7) by L2486 , MATRIX_1:23;
L2511: (the carrier of D329) = ( Solutions_of (D324 , D323) ) by L2510 , L2484 , L2487 , L2372;
set D330 = ( Space_of_Solutions_of R20 );
L2512: ( width R20 ) = R8 by L2486 , MATRIX_1:23;
L2513: (the carrier of D330) = ( Solutions_of (R20 , D323) ) by L2512 , L2484 , L2372;
thus L2514: thesis by L2513 , L2512 , L2487 , L2509 , L2511 , VECTSP_4:29;
end;
theorem
L2515: (for R9 being Field holds (for R13 being (Matrix of R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((R10 c= ( dom R13 ) & R10 is non  empty & ( width R13 ) > ( 0 ) & (for R3 being Nat holds (R3 in ( ( dom R13 ) \ R10 ) implies ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) )))) implies ( Space_of_Solutions_of R13 ) = ( Space_of_Solutions_of ( Segm (R13 , R10 , ( Seg ( width R13 ) )) ) )))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L2516: R10 c= ( dom R13 )
and
L2517: R10 is non  empty
and
L2518: ( width R13 ) > ( 0 )
and
L2519: (for R3 being Nat holds (R3 in ( ( dom R13 ) \ R10 ) implies ( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) )));
set D331 = ( ( len R13 ) |-> ( 0. R9 ) );
set D332 = ( ColVec2Mx D331 );
L2520: ( len D331 ) = ( len R13 ) by CARD_1:def 7;
set D333 = ( Segm (R13 , R10 , ( Seg ( width R13 ) )) );
L2521: ( width D333 ) = ( card ( Seg ( width R13 ) ) ) by L2517 , MATRIX_1:23;
L2522: ( width R13 ) = ( width D333 ) by L2521 , FINSEQ_1:57;
set D334 = ( Space_of_Solutions_of D333 );
L2523: ( len D333 ) = ( card R10 ) by MATRIX_1:def 2;
L2524: (the carrier of D334) = ( Solutions_of (D333 , ( ( card R10 ) |-> ( 0. R9 ) )) ) by L2523 , L2518 , L2521 , L2372;
set D335 = ( Space_of_Solutions_of R13 );
L2525: (the carrier of D335) = ( Solutions_of (R13 , D331) ) by L2518 , L2372;
L2526: D332 = ( 0. (R9 , ( len R13 ) , 1) ) by L924;
L2527: ( len D332 ) = ( len D331 ) by MATRIX_1:def 2;
L2528: ( dom D332 ) = ( dom R13 ) by L2527 , L2520 , FINSEQ_3:29;
L2529: ( dom R13 ) = ( Seg ( len R13 ) ) by FINSEQ_1:def 3;
L2530: ( Seg ( len R13 ) ) <> ( {} ) by L2529 , L2516 , L2517 , XBOOLE_1:3;
L2531: ( width D332 ) = 1 by L2530 , L839;
L2532: ( card ( Seg ( width D332 ) ) ) = 1 by L2531 , FINSEQ_1:57;
L2533:
now
L2534: ( rng ( Sgm ( Seg 1 ) ) ) = ( Seg 1 ) by FINSEQ_1:def 13;
L2535: ( Indices ( Segm (D332 , R10 , ( Seg ( width D332 ) )) ) ) = ( Indices ( 0. (R9 , ( card R10 ) , 1) ) ) by L2532 , MATRIX_1:26;
let R5 being Nat;
let R6 being Nat;
assume that
L2536: [ R5 , R6 ] in ( Indices ( Segm (D332 , R10 , ( Seg ( width D332 ) )) ) );
reconsider D336 = R5 , D337 = R6 as (Element of ( NAT )) by ORDINAL1:def 12;
L2537: ([: R10 , ( Seg ( width D332 ) ) :] c= ( Indices D332 ) & ( rng ( Sgm R10 ) ) = R10) by L2516 , L2529 , L2528 , FINSEQ_1:def 13 , ZFMISC_1:95;
L2538: [ ( ( Sgm R10 ) . D336 ) , ( ( Sgm ( Seg ( width D332 ) ) ) . D337 ) ] in ( Indices D332 ) by L2537 , L2531 , L2536 , L2534 , MATRIX13:17;
thus L2539: ( ( Segm (D332 , R10 , ( Seg ( width D332 ) )) ) * (R5 , R6) ) = ( D332 * (( ( Sgm R10 ) . D336 ) , ( ( Sgm ( Seg ( width D332 ) ) ) . D337 )) ) by L2536 , MATRIX13:def 1
.= ( 0. R9 ) by L2526 , L2538 , MATRIX_3:1
.= ( ( 0. (R9 , ( card R10 ) , 1) ) * (R5 , R6) ) by L2536 , L2535 , MATRIX_3:1;
end;
L2540: ( Segm (D332 , R10 , ( Seg ( width D332 ) )) ) = ( 0. (R9 , ( card R10 ) , 1) ) by L2533 , L2532 , MATRIX_1:27
.= ( ColVec2Mx ( ( card R10 ) |-> ( 0. R9 ) ) ) by L924;
L2541:
now
let R3 being Nat;
assume that
L2542: R3 in ( ( dom R13 ) \ R10 );
L2543: R3 in ( dom R13 ) by L2542 , XBOOLE_0:def 5;
L2544: ( Line (D332 , R3) ) = ( D332 . R3 ) by L2543 , L2520 , L2529 , MATRIX_2:8
.= ( ( ( len R13 ) |-> ( ( width D332 ) |-> ( 0. R9 ) ) ) . R3 ) by L2526 , L2530 , L839
.= ( ( width D332 ) |-> ( 0. R9 ) ) by L2529 , L2543 , FINSEQ_2:57;
thus L2545: (( Line (R13 , R3) ) = ( ( width R13 ) |-> ( 0. R9 ) ) & ( Line (D332 , R3) ) = ( ( width D332 ) |-> ( 0. R9 ) )) by L2544 , L2519 , L2542;
end;
L2546: ( Solutions_of (R13 , D332) ) = ( Solutions_of (( Segm (R13 , R10 , ( Seg ( width R13 ) )) ) , ( Segm (D332 , R10 , ( Seg ( width D332 ) )) )) ) by L2541 , L2516 , L2517 , L2528 , L1278;
thus L2547: thesis by L2546 , L2540 , L2522 , L2525 , L2524 , VECTSP_4:29;
end;
L2548: (for R9 being Field holds (for R26 being (FinSequence of R9) holds (for B168 being set holds (B168 c= ( dom R26 ) implies (ex B169 , B170 being (FinSequence of R9) st (B169 = ( R26 * ( Sgm B168 ) ) & B170 = ( R26 * ( Sgm ( ( dom R26 ) \ B168 ) ) ) & ( Sum R26 ) = ( ( Sum B169 ) + ( Sum B170 ) )))))))
proof
let R9 being Field;
let R26 being (FinSequence of R9);
L2549: ( rng R26 ) c= (the carrier of R9) by FINSEQ_1:def 4;
set D338 = (the addF of R9);
L2550: ( dom R26 ) = ( Seg ( len R26 ) ) by FINSEQ_1:def 3;
L2551: (( dom R26 ) = ( rng ( idseq ( len R26 ) ) ) & ( dom R26 ) = ( dom ( idseq ( len R26 ) ) )) by L2550 , RELAT_1:45;
let C175 being set;
assume that
L2552: C175 c= ( dom R26 );
L2553: ( rng ( Sgm C175 ) ) = C175 by L2552 , L2550 , FINSEQ_1:def 13;
L2554: ( ( idseq ( len R26 ) ) " C175 ) = C175 by L2552 , L2550 , FUNCT_2:94;
L2555: ( ( dom R26 ) \ C175 ) c= ( dom R26 ) by XBOOLE_1:36;
L2556: ( rng ( Sgm ( ( dom R26 ) \ C175 ) ) ) = ( ( dom R26 ) \ C175 ) by L2555 , L2550 , FINSEQ_1:def 13;
reconsider D339 = ( R26 * ( Sgm C175 ) ) , D340 = ( R26 * ( Sgm ( ( dom R26 ) \ C175 ) ) ) as FinSequence by L2556 , L2552 , L2553 , FINSEQ_1:16 , XBOOLE_1:36;
L2557: ( ( idseq ( len R26 ) ) " ( ( dom R26 ) \ C175 ) ) = ( ( dom R26 ) \ C175 ) by L2550 , L2555 , FUNCT_2:94;
L2558: ( ( Sgm C175 ) ^ ( Sgm ( ( dom R26 ) \ C175 ) ) ) is (Permutation of ( dom R26 )) by L2557 , L2554 , L2551 , FINSEQ_3:114;
reconsider D341 = ( R26 * ( ( Sgm C175 ) ^ ( Sgm ( ( dom R26 ) \ C175 ) ) ) ) as (FinSequence of R9) by L2558 , L2550 , FINSEQ_2:46;
L2559: ( rng D339 ) c= ( rng R26 ) by RELAT_1:26;
L2560: ( rng D339 ) c= (the carrier of R9) by L2559 , L2549 , XBOOLE_1:1;
L2561: ( rng D340 ) c= ( rng R26 ) by RELAT_1:26;
L2562: ( rng D340 ) c= (the carrier of R9) by L2561 , L2549 , XBOOLE_1:1;
reconsider D342 = D339 , D343 = D340 as (FinSequence of R9) by L2562 , L2560 , FINSEQ_1:def 4;
take D342;
take D343;
L2563: ( D338 $$ R26 ) = ( D338 "**" D341 ) by L2558 , FINSOP_1:7 , FVSUM_1:8
.= ( D338 "**" ( D342 ^ D343 ) ) by L2552 , L2555 , L2553 , L2556 , L106
.= ( ( Sum D342 ) + ( Sum D343 ) ) by FINSOP_1:5 , FVSUM_1:8;
thus L2564: thesis by L2563;
end;
theorem
L2565: (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B171 being (Matrix of R8 , R7 , R9) holds (for R10 being  without_zero  finite (Subset of ( NAT )) holds ((( card R10 ) = R8 & R10 c= ( Seg R7 ) & ( Segm (B171 , ( Seg R8 ) , R10) ) = ( 1. (R9 , R8) ) & R8 > ( 0 ) & ( R7 -' R8 ) > ( 0 )) implies (ex B172 being (Matrix of ( R7 -' R8 ) , R7 , R9) st (( Segm (B172 , ( Seg ( R7 -' R8 ) ) , ( ( Seg R7 ) \ R10 )) ) = ( 1. (R9 , ( R7 -' R8 )) ) & ( Segm (B172 , ( Seg ( R7 -' R8 ) ) , R10) ) = ( - ( ( Segm (B171 , ( Seg R8 ) , ( ( Seg R7 ) \ R10 )) ) @ ) ) & ( Lin ( lines B172 ) ) = ( Space_of_Solutions_of B171 )))))))))
proof
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let C176 being (Matrix of R8 , R7 , R9);
let R10 being  without_zero  finite (Subset of ( NAT ));
assume that
L2566: ( card R10 ) = R8
and
L2567: R10 c= ( Seg R7 )
and
L2568: ( Segm (C176 , ( Seg R8 ) , R10) ) = ( 1. (R9 , R8) )
and
L2569: R8 > ( 0 )
and
L2570: ( R7 -' R8 ) > ( 0 );
L2571: ( Seg R7 ) <> ( {} ) by L2566 , L2567 , L2569 , CARD_1:27 , XBOOLE_1:3;
L2572: R7 <> ( 0 ) by L2571;
consider C177 being (Matrix of ( R7 -' R8 ) , R7 , R9) such that L2573: ( Segm (C177 , ( Seg ( R7 -' R8 ) ) , ( ( Seg R7 ) \ R10 )) ) = ( 1. (R9 , ( R7 -' R8 )) ) and L2574: ( Segm (C177 , ( Seg ( R7 -' R8 ) ) , R10) ) = ( - ( ( Segm (C176 , ( Seg R8 ) , ( ( Seg R7 ) \ R10 )) ) @ ) ) and L2575: (for R6 being Nat holds (for B173 being (Matrix of R7 , R6 , R9) holds ((for R3 being Nat holds (R3 in ( Seg R6 ) implies ((ex R4 being Nat st (R4 in ( Seg ( R7 -' R8 ) ) & ( Col (B173 , R3) ) = ( Line (C177 , R4) ))) or ( Col (B173 , R3) ) = ( R7 |-> ( 0. R9 ) )))) implies B173 in ( Solutions_of (C176 , ( 0. (R9 , R8 , R6) )) )))) by L2566 , L2567 , L2568 , L2569 , L1350;
L2576: ( width C177 ) = R7 by L2570 , MATRIX_1:23;
L2577: (( len C177 ) = ( R7 -' R8 ) & ( len C177 ) >= ( the_rank_of C177 )) by MATRIX13:74 , MATRIX_1:def 2;
L2578: ( Indices C177 ) = [: ( Seg ( R7 -' R8 ) ) , ( Seg R7 ) :] by L2570 , MATRIX_1:23;
L2579: ( ( Seg R7 ) \ R10 ) c= ( Seg R7 ) by XBOOLE_1:36;
L2580: [: ( Seg ( R7 -' R8 ) ) , ( ( Seg R7 ) \ R10 ) :] c= ( Indices C177 ) by L2579 , L2578 , ZFMISC_1:95;
L2581: ( width C176 ) = R7 by L2569 , MATRIX_1:23;
L2582: ( len C176 ) = R8 by L2569 , MATRIX_1:23;
L2583: ( lines C177 ) c= ( Solutions_of (C176 , ( ( len C176 ) |-> ( 0. R9 ) )) )
proof
let R1 being set;
assume L2584: R1 in ( lines C177 );
consider R5 being Nat such that L2585: R5 in ( Seg ( R7 -' R8 ) ) and L2586: R1 = ( Line (C177 , R5) ) by L2584 , MATRIX13:103;
set D344 = ( ColVec2Mx ( Line (C177 , R5) ) );
L2587: R7 = ( width C177 ) by L2570 , MATRIX_1:23
.= ( len ( Line (C177 , R5) ) ) by CARD_1:def 7;
L2588:
now
let R3 being Nat;
assume L2589: R3 in ( Seg 1 );
L2590: R3 = 1 by L2589 , FINSEQ_1:2 , TARSKI:def 1;
L2591: ( Col (D344 , 1) ) = ( Line (C177 , R5) ) by L2572 , L2587 , L839;
thus L2592: ((ex R4 being Nat st (R4 in ( Seg ( R7 -' R8 ) ) & ( Col (D344 , R3) ) = ( Line (C177 , R4) ))) or ( Col (D344 , R3) ) = ( R7 |-> ( 0. R9 ) )) by L2591 , L2585 , L2590;
end;
L2593: D344 in ( Solutions_of (C176 , ( 0. (R9 , R8 , 1) )) ) by L2588 , L2575 , L2587;
L2594: D344 in ( Solutions_of (C176 , ( ColVec2Mx ( ( len C176 ) |-> ( 0. R9 ) ) )) ) by L2593 , L2582 , L924;
thus L2595: thesis by L2594 , L2586;
end;
L2596: ( Lin ( lines C177 ) ) is (Subspace of ( Lin ( Solutions_of (C176 , ( ( len C176 ) |-> ( 0. R9 ) )) ) )) by L2583 , L2581 , VECTSP_7:13;
L2597: (the carrier of ( Lin ( lines C177 ) )) c= (the carrier of ( Lin ( Solutions_of (C176 , ( ( len C176 ) |-> ( 0. R9 ) )) ) )) by L2596 , VECTSP_4:def 2;
L2598: ( ( R7 -' R8 ) + ( 0 ) ) > ( 0 ) by L2570;
L2599: ( R7 -' R8 ) >= 1 by L2598 , NAT_1:19;
L2600: ( Det ( 1. (R9 , ( R7 -' R8 )) ) ) = ( 1_ R9 ) by L2599 , MATRIX_7:16;
L2601: ( 0. R9 ) <> ( 1_ R9 );
L2602: ( card ( Seg R7 ) ) = R7 by FINSEQ_1:57;
L2603: ( R7 -' R8 ) = ( R7 - R8 ) by L2602 , L2566 , L2567 , NAT_1:43 , XREAL_1:233;
L2604: ( card ( ( Seg R7 ) \ R10 ) ) = ( R7 - R8 ) by L2566 , L2567 , L2602 , CARD_2:44;
L2605: ( card ( Seg ( R7 -' R8 ) ) ) = ( card ( ( Seg R7 ) \ R10 ) ) by L2604 , L2603 , FINSEQ_1:57;
L2606: ( EqSegm (C177 , ( Seg ( R7 -' R8 ) ) , ( ( Seg R7 ) \ R10 )) ) = ( 1. (R9 , ( R7 -' R8 )) ) by L2573 , L2603 , L2604 , FINSEQ_1:57 , MATRIX13:def 3;
L2607: ( R7 -' R8 ) <= ( the_rank_of C177 ) by L2606 , L2603 , L2604 , L2605 , L2580 , L2600 , L2601 , MATRIX13:def 4;
L2608: ( the_rank_of C177 ) = ( R7 -' R8 ) by L2607 , L2577 , XXREAL_0:1;
L2609: (the carrier of ( Space_of_Solutions_of C176 )) c= (the carrier of ( Lin ( lines C177 ) ))
proof
set D345 = ( ( Seg R7 ) \ R10 );
let R2 being set;
assume L2610: R2 in (the carrier of ( Space_of_Solutions_of C176 ));
L2611: R2 in ( Solutions_of (C176 , ( ( len C176 ) |-> ( 0. R9 ) )) ) by L2610 , L2572 , L2581 , L2372;
consider R25 being (FinSequence of R9) such that L2612: R25 = R2 and L2613: ( ColVec2Mx R25 ) in ( Solutions_of (C176 , ( ColVec2Mx ( ( len C176 ) |-> ( 0. R9 ) ) )) ) by L2611;
L2614: ( len R25 ) = R7 by L2581 , L2613 , L2293;
deffunc H2(Nat) = ( ( R25 /. ( ( Sgm D345 ) . $1 ) ) * ( Line (C177 , $1) ) );
L2615: ( dom R25 ) = ( Seg ( len R25 ) ) by FINSEQ_1:def 3;
consider C178 being (FinSequence of ( ( width C177 ) -tuples_on (the carrier of R9) )) such that L2616: ( len C178 ) = ( R7 -' R8 ) and L2617: (for R4 being Nat holds (R4 in ( dom C178 ) implies ( C178 . R4 ) = H2(R4))) from FINSEQ_2:sch 1;
L2618: ( dom C178 ) = ( Seg ( R7 -' R8 ) ) by L2616 , FINSEQ_1:def 3;
reconsider D346 = C178 as (FinSequence of (the carrier of ( R7 -VectSp_over R9 ))) by L2576 , MATRIX13:102;
reconsider D347 = ( FinS2MX D346 ) as (Matrix of ( R7 -' R8 ) , R7 , R9) by L2616;
L2619:
now
let R3 being Nat;
assume that
L2620: R3 in ( Seg ( R7 -' R8 ) );
take D348 = ( R25 /. ( ( Sgm D345 ) . R3 ) );
thus L2621: ( Line (D347 , R3) ) = ( D347 . R3 ) by L2620 , MATRIX_2:8
.= ( D348 * ( Line (C177 , R3) ) ) by L2617 , L2618 , L2620;
end;
consider C179 being (Linear_Combination of ( lines C177 )) such that L2622: ( C179 (#) ( MX2FinS C177 ) ) = D347 by L2619 , L2608 , MATRIX13:105 , MATRIX13:108;
reconsider D349 = ( Sum C179 ) , D350 = R25 as (Element of ( R7 -tuples_on (the carrier of R9) )) by L2614 , FINSEQ_2:92 , MATRIX13:102;
L2623:
now
let R3 being Nat;
assume that
L2624: R3 in ( Seg R7 );
L2625: D345 c= ( Seg R7 ) by XBOOLE_1:36;
L2626:
now
per cases ;
suppose L2627: R3 in R10;

consider R17 being (Matrix of R9) such that L2628: R17 = ( ColVec2Mx D350 ) and L2629: ( len R17 ) = ( width C176 ) and L2630: ( width R17 ) = ( width ( ColVec2Mx ( ( len C176 ) |-> ( 0. R9 ) ) ) ) and L2631: ( C176 * R17 ) = ( ColVec2Mx ( ( len C176 ) |-> ( 0. R9 ) ) ) by L2613;
L2632: D350 = ( Col (R17 , 1) ) by L2572 , L2581 , L2628 , L2629 , L839;
reconsider D351 = D350 as (Element of ( ( width C176 ) -tuples_on (the carrier of R9) )) by L2569 , MATRIX_1:23;
L2633: ( rng ( Sgm ( Seg ( R7 -' R8 ) ) ) ) = ( Seg ( R7 -' R8 ) ) by FINSEQ_1:def 13;
L2634: ( rng ( Sgm R10 ) ) = R10 by L2567 , FINSEQ_1:def 13;
consider R1 being set such that L2635: R1 in ( dom ( Sgm R10 ) ) and L2636: ( ( Sgm R10 ) . R1 ) = R3 by L2634 , L2627 , FUNCT_1:def 3;
reconsider D352 = R1 as (Element of ( NAT )) by L2635;
set D353 = ( Line (C176 , D352) );
L2637: ( dom ( mlt (D353 , D351) ) ) = ( Seg R7 ) by L2581 , FINSEQ_2:124;
consider C180 , C181 being (FinSequence of R9) such that L2638: C180 = ( ( mlt (D353 , D351) ) * ( Sgm R10 ) ) and L2639: C181 = ( ( mlt (D353 , D351) ) * ( Sgm D345 ) ) and L2640: ( Sum ( mlt (D353 , D351) ) ) = ( ( Sum C180 ) + ( Sum C181 ) ) by L2637 , L2567 , L2548;
L2641: ( dom ( Sgm R10 ) ) = ( Seg ( card R10 ) ) by L2567 , FINSEQ_3:40;
L2642: ( dom C180 ) = ( Seg R8 ) by L2641 , L2566 , L2567 , L2634 , L2637 , L2638 , RELAT_1:27;
L2643: ( Indices ( 1. (R9 , R8) ) ) = [: ( Seg R8 ) , ( Seg R8 ) :] by MATRIX_1:24;
L2644: [ D352 , D352 ] in ( Indices ( 1. (R9 , R8) ) ) by L2643 , L2566 , L2641 , L2635 , ZFMISC_1:87;
L2645: ( ( Sgm R10 ) . D352 ) in R10 by L2634 , L2635 , FUNCT_1:def 3;
L2646: (( D351 . ( ( Sgm R10 ) . D352 ) ) = ( D351 /. ( ( Sgm R10 ) . D352 ) ) & ( D353 . ( ( Sgm R10 ) . D352 ) ) = ( C176 * (D352 , ( ( Sgm R10 ) . D352 )) )) by L2645 , L2567 , L2581 , L2614 , L2615 , MATRIX_1:def 7 , PARTFUN1:def 6;
L2647: D352 = ( ( idseq R8 ) . D352 ) by L2566 , L2641 , L2635 , FINSEQ_2:49
.= ( ( Sgm ( Seg R8 ) ) . D352 ) by FINSEQ_3:48;
L2648:
now
let R4 being Nat;
assume that
L2649: R4 in ( dom C180 )
and
L2650: R4 <> D352;
L2651: ( Indices ( 1. (R9 , R8) ) ) = [: ( Seg R8 ) , ( Seg R8 ) :] by MATRIX_1:24;
L2652: [ D352 , R4 ] in ( Indices ( 1. (R9 , R8) ) ) by L2651 , L2566 , L2641 , L2635 , L2642 , L2649 , ZFMISC_1:87;
L2653: ( ( Sgm R10 ) . R4 ) in R10 by L2566 , L2634 , L2641 , L2642 , L2649 , FUNCT_1:def 3;
L2654: (( D351 . ( ( Sgm R10 ) . R4 ) ) = ( D351 /. ( ( Sgm R10 ) . R4 ) ) & ( D353 . ( ( Sgm R10 ) . R4 ) ) = ( C176 * (D352 , ( ( Sgm R10 ) . R4 )) )) by L2653 , L2567 , L2581 , L2614 , L2615 , MATRIX_1:def 7 , PARTFUN1:def 6;
thus L2655: ( C180 . R4 ) = ( ( mlt (D353 , D351) ) . ( ( Sgm R10 ) . R4 ) ) by L2638 , L2649 , FUNCT_1:12
.= ( ( D351 /. ( ( Sgm R10 ) . R4 ) ) * ( C176 * (( ( Sgm ( Seg R8 ) ) . D352 ) , ( ( Sgm R10 ) . R4 )) ) ) by L2567 , L2581 , L2647 , L2653 , L2654 , FVSUM_1:61
.= ( ( D351 /. ( ( Sgm R10 ) . R4 ) ) * ( ( 1. (R9 , R8) ) * (D352 , R4) ) ) by L2568 , L2652 , MATRIX13:def 1
.= ( ( D351 /. ( ( Sgm R10 ) . R4 ) ) * ( 0. R9 ) ) by L2650 , L2652 , MATRIX_1:def 11
.= ( 0. R9 ) by VECTSP_1:6;
end;
L2656: ( Sum C180 ) = ( C180 . D352 ) by L2648 , L2566 , L2641 , L2635 , L2642 , MATRIX_3:12;
L2657: ( Sum C180 ) = ( ( mlt (D353 , D351) ) . ( ( Sgm R10 ) . D352 ) ) by L2656 , L2566 , L2641 , L2635 , L2638 , L2642 , FUNCT_1:12
.= ( ( D351 /. ( ( Sgm R10 ) . D352 ) ) * ( C176 * (( ( Sgm ( Seg R8 ) ) . D352 ) , ( ( Sgm R10 ) . D352 )) ) ) by L2567 , L2581 , L2647 , L2645 , L2646 , FVSUM_1:61
.= ( ( D351 /. ( ( Sgm R10 ) . D352 ) ) * ( ( 1. (R9 , R8) ) * (D352 , D352) ) ) by L2568 , L2644 , MATRIX13:def 1
.= ( ( D351 /. ( ( Sgm R10 ) . D352 ) ) * ( 1_ R9 ) ) by L2644 , MATRIX_1:def 11
.= ( D351 /. R3 ) by L2636 , VECTSP_1:def 4
.= ( D350 . R3 ) by L2614 , L2615 , L2624 , PARTFUN1:def 6;
L2658: ( dom ( Sgm D345 ) ) = ( Seg ( card D345 ) ) by FINSEQ_3:40 , XBOOLE_1:36;
L2659: ( rng ( Sgm D345 ) ) = D345 by L2625 , FINSEQ_1:def 13;
L2660: ( dom C181 ) = ( Seg ( R7 -' R8 ) ) by L2659 , L2603 , L2604 , L2637 , L2639 , L2658 , RELAT_1:27 , XBOOLE_1:36;
L2661: ( len C181 ) = ( R7 -' R8 ) by L2660 , FINSEQ_1:def 3;
L2662: ( ColVec2Mx ( ( len C176 ) |-> ( 0. R9 ) ) ) = ( 0. (R9 , ( len C176 ) , 1) ) by L924;
L2663: (( Indices ( 0. (R9 , ( len C176 ) , 1) ) ) = [: ( Seg ( len C176 ) ) , ( Seg 1 ) :] & 1 in ( Seg 1 )) by L2569 , L2582 , MATRIX_1:23;
L2664: [ D352 , 1 ] in ( Indices ( 0. (R9 , ( len C176 ) , 1) ) ) by L2663 , L2566 , L2582 , L2641 , L2635 , ZFMISC_1:87;
L2665: ( 0. R9 ) = ( ( ColVec2Mx ( ( len C176 ) |-> ( 0. R9 ) ) ) * (D352 , 1) ) by L2664 , L2662 , MATRIX_3:1
.= ( ( Line (C176 , D352) ) "*" ( Col (R17 , 1) ) ) by L2629 , L2631 , L2662 , L2664 , MATRIX_3:def 4
.= ( Sum ( mlt (( Line (C176 , D352) ) , ( Col (R17 , 1) )) ) );
reconsider D354 = C181 as (Element of ( ( R7 -' R8 ) -tuples_on (the carrier of R9) )) by L2661 , FINSEQ_2:92;
L2666: ( width D347 ) = R7 by L2570 , MATRIX_1:23;
L2667:
now
let R4 being Nat;
assume that
L2668: R4 in ( Seg ( R7 -' R8 ) );
L2669: R4 = ( ( idseq ( R7 -' R8 ) ) . R4 ) by L2668 , FINSEQ_2:49
.= ( ( Sgm ( Seg ( R7 -' R8 ) ) ) . R4 ) by FINSEQ_3:48;
L2670: ( Line (D347 , R4) ) = ( D347 . R4 ) by L2668 , MATRIX_2:8
.= ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( Line (C177 , R4) ) ) by L2617 , L2618 , L2668;
L2671: ( ( Sgm D345 ) . R4 ) in D345 by L2603 , L2604 , L2659 , L2658 , L2668 , FUNCT_1:def 3;
L2672: (( D350 /. ( ( Sgm D345 ) . R4 ) ) = ( D351 . ( ( Sgm D345 ) . R4 ) ) & ( C176 * (D352 , ( ( Sgm D345 ) . R4 )) ) = ( D353 . ( ( Sgm D345 ) . R4 ) )) by L2671 , L2581 , L2614 , L2615 , L2625 , MATRIX_1:def 7 , PARTFUN1:def 6;
L2673: ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( C176 * (D352 , ( ( Sgm D345 ) . R4 )) ) ) = ( ( mlt (D353 , D351) ) . ( ( Sgm D345 ) . R4 ) ) by L2672 , L2581 , L2625 , L2671 , FVSUM_1:61
.= ( D354 . R4 ) by L2603 , L2604 , L2639 , L2658 , L2668 , FUNCT_1:13;
L2674: D352 = ( ( idseq R8 ) . D352 ) by L2566 , L2641 , L2635 , FINSEQ_2:49
.= ( ( Sgm ( Seg R8 ) ) . D352 ) by FINSEQ_3:48;
L2675: [: ( Seg ( R7 -' R8 ) ) , R10 :] c= ( Indices C177 ) by L2567 , L2578 , ZFMISC_1:95;
L2676: [ R4 , R3 ] in ( Indices C177 ) by L2567 , L2578 , L2627 , L2668 , ZFMISC_1:87;
L2677: [ R4 , D352 ] in ( Indices ( Segm (C177 , ( Seg ( R7 -' R8 ) ) , R10) ) ) by L2676 , L2634 , L2636 , L2633 , L2669 , L2675 , MATRIX13:17;
L2678: [ R4 , D352 ] in ( Indices ( ( Segm (C176 , ( Seg R8 ) , D345) ) @ ) ) by L2677 , L2574 , L32;
L2679: [ D352 , R4 ] in ( Indices ( Segm (C176 , ( Seg R8 ) , D345) ) ) by L2678 , MATRIX_1:def 6;
L2680: ( ( Line (C177 , R4) ) . R3 ) = ( C177 * (( ( Sgm ( Seg ( R7 -' R8 ) ) ) . R4 ) , ( ( Sgm R10 ) . D352 )) ) by L2576 , L2624 , L2636 , L2669 , MATRIX_1:def 7
.= ( ( - ( ( Segm (C176 , ( Seg R8 ) , ( ( Seg R7 ) \ R10 )) ) @ ) ) * (R4 , D352) ) by L2574 , L2677 , MATRIX13:def 1
.= ( - ( ( ( Segm (C176 , ( Seg R8 ) , ( ( Seg R7 ) \ R10 )) ) @ ) * (R4 , D352) ) ) by L2678 , MATRIX_3:def 2
.= ( - ( ( Segm (C176 , ( Seg R8 ) , D345) ) * (D352 , R4) ) ) by L2679 , MATRIX_1:def 6
.= ( - ( C176 * (D352 , ( ( Sgm D345 ) . R4 )) ) ) by L2679 , L2674 , MATRIX13:def 1;
L2681: ( dom D347 ) = ( Seg ( R7 -' R8 ) ) by L2616 , FINSEQ_1:def 3;
thus L2682: ( ( Col (D347 , R3) ) . R4 ) = ( D347 * (R4 , R3) ) by L2681 , L2668 , MATRIX_1:def 8
.= ( ( Line (D347 , R4) ) . R3 ) by L2624 , L2666 , MATRIX_1:def 7
.= ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( - ( C176 * (D352 , ( ( Sgm D345 ) . R4 )) ) ) ) by L2567 , L2576 , L2627 , L2670 , L2680 , FVSUM_1:51
.= ( - ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( C176 * (D352 , ( ( Sgm D345 ) . R4 )) ) ) ) by VECTSP_1:8
.= ( ( - D354 ) . R4 ) by L2668 , L2673 , FVSUM_1:23;
end;
L2683: ( Col (D347 , R3) ) = ( - D354 ) by L2667 , L2616 , FINSEQ_2:119;
thus L2684: ( Sum ( Col (D347 , R3) ) ) = ( - ( Sum D354 ) ) by L2683 , FVSUM_1:75
.= ( ( - ( Sum D354 ) ) + ( ( Sum D354 ) + ( Sum C180 ) ) ) by L2665 , L2632 , L2640 , RLVECT_1:def 4
.= ( ( ( - ( Sum D354 ) ) + ( Sum D354 ) ) + ( Sum C180 ) ) by RLVECT_1:def 3
.= ( ( 0. R9 ) + ( Sum C180 ) ) by VECTSP_1:19
.= ( D350 . R3 ) by L2657 , RLVECT_1:def 4;
end;
suppose L2685: (not R3 in R10);

L2686: ( rng ( Sgm D345 ) ) = D345 by L2625 , FINSEQ_1:def 13;
L2687: R3 in D345 by L2624 , L2685 , XBOOLE_0:def 5;
consider R1 being set such that L2688: R1 in ( dom ( Sgm D345 ) ) and L2689: ( ( Sgm D345 ) . R1 ) = R3 by L2687 , L2686 , FUNCT_1:def 3;
reconsider D355 = R1 as (Element of ( NAT )) by L2688;
L2690: ( dom ( Sgm D345 ) ) = ( Seg ( card D345 ) ) by FINSEQ_3:40 , XBOOLE_1:36;
L2691: ( Line (D347 , D355) ) = ( D347 . D355 ) by L2690 , L2603 , L2604 , L2688 , MATRIX_2:8
.= ( ( D350 /. ( ( Sgm D345 ) . D355 ) ) * ( Line (C177 , D355) ) ) by L2603 , L2604 , L2617 , L2618 , L2690 , L2688;
L2692: [ D355 , D355 ] in [: ( Seg ( R7 -' R8 ) ) , ( Seg ( R7 -' R8 ) ) :] by L2603 , L2604 , L2690 , L2688 , ZFMISC_1:87;
L2693: [ D355 , D355 ] in ( Indices ( 1. (R9 , ( R7 -' R8 )) ) ) by L2692 , MATRIX_1:24;
L2694: D355 = ( ( idseq ( R7 -' R8 ) ) . D355 ) by L2603 , L2604 , L2690 , L2688 , FINSEQ_2:49
.= ( ( Sgm ( Seg ( R7 -' R8 ) ) ) . D355 ) by FINSEQ_3:48;
L2695: ( ( Line (C177 , D355) ) . R3 ) = ( C177 * (( ( Sgm ( Seg ( R7 -' R8 ) ) ) . D355 ) , ( ( Sgm D345 ) . D355 )) ) by L2694 , L2576 , L2624 , L2689 , MATRIX_1:def 7
.= ( ( 1. (R9 , ( R7 -' R8 )) ) * (D355 , D355) ) by L2573 , L2693 , MATRIX13:def 1
.= ( 1_ R9 ) by L2693 , MATRIX_1:def 11;
L2696: ( dom ( Col (D347 , R3) ) ) = ( Seg ( len D347 ) ) by FINSEQ_2:124;
L2697: ( dom D347 ) = ( Seg ( len D347 ) ) by FINSEQ_1:def 3;
L2698: ( len D347 ) = ( R7 - R8 ) by L2570 , L2603 , MATRIX_1:23;
L2699: ( width D347 ) = R7 by L2570 , MATRIX_1:23;
L2700:
now
let R4 being Nat;
assume that
L2701: R4 in ( dom ( Col (D347 , R3) ) )
and
L2702: D355 <> R4;
L2703: ( Line (D347 , R4) ) = ( D347 . R4 ) by L2696 , L2701 , MATRIX_2:8
.= ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( Line (C177 , R4) ) ) by L2617 , L2696 , L2697 , L2701;
L2704: [ R4 , D355 ] in [: ( Seg ( R7 -' R8 ) ) , ( Seg ( R7 -' R8 ) ) :] by L2603 , L2604 , L2690 , L2688 , L2696 , L2698 , L2701 , ZFMISC_1:87;
L2705: [ R4 , D355 ] in ( Indices ( 1. (R9 , ( R7 -' R8 )) ) ) by L2704 , MATRIX_1:24;
L2706: R4 = ( ( idseq ( R7 -' R8 ) ) . R4 ) by L2603 , L2696 , L2698 , L2701 , FINSEQ_2:49
.= ( ( Sgm ( Seg ( R7 -' R8 ) ) ) . R4 ) by FINSEQ_3:48;
L2707: ( ( Line (C177 , R4) ) . R3 ) = ( C177 * (( ( Sgm ( Seg ( R7 -' R8 ) ) ) . R4 ) , ( ( Sgm D345 ) . D355 )) ) by L2706 , L2576 , L2624 , L2689 , MATRIX_1:def 7
.= ( ( 1. (R9 , ( R7 -' R8 )) ) * (R4 , D355) ) by L2573 , L2705 , MATRIX13:def 1
.= ( 0. R9 ) by L2702 , L2705 , MATRIX_1:def 11;
thus L2708: ( ( Col (D347 , R3) ) . R4 ) = ( D347 * (R4 , R3) ) by L2696 , L2697 , L2701 , MATRIX_1:def 8
.= ( ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( Line (C177 , R4) ) ) . R3 ) by L2624 , L2699 , L2703 , MATRIX_1:def 7
.= ( ( D350 /. ( ( Sgm D345 ) . R4 ) ) * ( 0. R9 ) ) by L2576 , L2624 , L2707 , FVSUM_1:51
.= ( 0. R9 ) by VECTSP_1:6;
end;
L2709: ( ( Col (D347 , R3) ) . D355 ) = ( D347 * (D355 , R3) ) by L2604 , L2690 , L2688 , L2698 , L2697 , MATRIX_1:def 8
.= ( ( Line (D347 , D355) ) . R3 ) by L2624 , L2699 , MATRIX_1:def 7
.= ( ( D350 /. ( ( Sgm D345 ) . D355 ) ) * ( 1_ R9 ) ) by L2576 , L2624 , L2695 , L2691 , FVSUM_1:51
.= ( D350 /. R3 ) by L2689 , VECTSP_1:def 4
.= ( D350 . R3 ) by L2614 , L2615 , L2624 , PARTFUN1:def 6;
thus L2710: ( Sum ( Col (D347 , R3) ) ) = ( D350 . R3 ) by L2709 , L2604 , L2690 , L2688 , L2696 , L2698 , L2700 , MATRIX_3:12;
end;
end;
L2712: ( Carrier C179 ) c= ( lines C177 ) by VECTSP_6:def 4;
thus L2713: ( D349 . R3 ) = ( D350 . R3 ) by L2712 , L2608 , L2622 , L2624 , L2626 , MATRIX13:105 , MATRIX13:107;
end;
L2714: D349 = D350 by L2623 , FINSEQ_2:119;
L2715: (the carrier of ( Lin ( lines C177 ) )) = { ( Sum B174 ) where B174 is (Linear_Combination of ( lines C177 )) : (not contradiction) } by VECTSP_7:def 2;
thus L2716: thesis by L2715 , L2612 , L2714;
end;
take C177;
L2717: ( Solutions_of (C176 , ( ( len C176 ) |-> ( 0. R9 ) )) ) = (the carrier of ( Space_of_Solutions_of C176 )) by L2572 , L2581 , L2372;
L2718: (the carrier of ( Lin ( lines C177 ) )) c= (the carrier of ( Space_of_Solutions_of C176 )) by L2717 , L2597 , VECTSP_7:11;
L2719: (the carrier of ( Lin ( lines C177 ) )) = (the carrier of ( Space_of_Solutions_of C176 )) by L2718 , L2609 , XBOOLE_0:def 10;
thus L2720: thesis by L2719 , L2581 , L2573 , L2574 , VECTSP_4:29;
end;
L2721: (for R8 being Nat holds (for R9 being Field holds ( dim ( Space_of_Solutions_of ( 1. (R9 , R8) ) ) ) = ( 0 )))
proof
let R8 being Nat;
let R9 being Field;
set D356 = ( 1. (R9 , R8) );
set D357 = ( Space_of_Solutions_of D356 );
L2722: (the carrier of D357) c= (the carrier of ( (0). D357 ))
proof
let R1 being set;
assume that
L2723: R1 in (the carrier of D357);
L2724: ( len D356 ) = R8 by MATRIX_1:24;
L2725: ( width D356 ) = R8 by MATRIX_1:24;
L2726: (( width D356 ) = ( 0 ) implies ( len D356 ) = ( 0 )) by L2725 , MATRIX_1:24;
L2727: R1 in ( Solutions_of (D356 , ( R8 |-> ( 0. R9 ) )) ) by L2726 , L2723 , L2724 , L2372;
consider R25 being (FinSequence of R9) such that L2728: R25 = R1 and L2729: ( ColVec2Mx R25 ) in ( Solutions_of (D356 , ( ColVec2Mx ( R8 |-> ( 0. R9 ) ) )) ) by L2727;
consider R17 being (Matrix of R9) such that L2730: R17 = ( ColVec2Mx R25 ) and L2731: ( len R17 ) = ( width D356 ) and L2732: ( width R17 ) = ( width ( ColVec2Mx ( R8 |-> ( 0. R9 ) ) ) ) and L2733: ( D356 * R17 ) = ( ColVec2Mx ( R8 |-> ( 0. R9 ) ) ) by L2729;
L2734:
now
per cases ;
suppose L2735: R8 > ( 0 );

L2736: ( D356 * R17 ) = R17 by L2725 , L2731 , MATRIXR2:68;
thus L2737: ( R8 |-> ( 0. R9 ) ) = ( Col (R17 , 1) ) by L2736 , L2733 , L2735 , L839
.= R25 by L2725 , L2730 , L2731 , L2735 , L839;
end;
suppose L2738: R8 = ( 0 );

L2739: R25 = ( {} ) by L2738 , L2725 , L2730 , L2731 , MATRIX_1:def 2;
thus L2740: R25 = ( R8 |-> ( 0. R9 ) ) by L2739 , L2738;
end;
end;
L2742: ( 0. D357 ) = ( 0. ( ( width D356 ) -VectSp_over R9 ) ) by VECTSP_4:11
.= ( R8 |-> ( 0. R9 ) ) by L2725 , MATRIX13:102;
L2743: R25 in { ( 0. D357 ) } by L2742 , L2734 , TARSKI:def 1;
thus L2744: thesis by L2743 , L2728 , VECTSP_4:def 3;
end;
L2745: (the carrier of ( (0). D357 )) c= (the carrier of D357) by VECTSP_4:def 2;
L2746: (the carrier of D357) = (the carrier of ( (0). D357 )) by L2745 , L2722 , XBOOLE_0:def 10;
L2747: ( (0). D357 ) = ( (Omega). D357 ) by L2746 , VECTSP_4:29;
thus L2748: thesis by L2747 , VECTSP_9:29;
end;
theorem
L2749: (for R9 being Field holds (for R13 being (Matrix of R9) holds ((( width R13 ) = ( 0 ) implies ( len R13 ) = ( 0 )) implies ( dim ( Space_of_Solutions_of R13 ) ) = ( ( width R13 ) - ( the_rank_of R13 ) ))))
proof
let R9 being Field;
let R13 being (Matrix of R9);
assume that
L2750: (( width R13 ) = ( 0 ) implies ( len R13 ) = ( 0 ));
set D358 = ( width R13 );
set D359 = ( len R13 );
reconsider D360 = R13 as (Matrix of D359 , D358 , R9) by MATRIX_2:7;
per cases ;
suppose L2751: ( the_rank_of R13 ) = ( 0 );

L2752: ( dim ( ( width R13 ) -VectSp_over R9 ) ) = ( width R13 ) by MATRIX13:112;
thus L2753: thesis by L2752 , L2750 , L2751 , L2420;
end;
suppose L2754: ( the_rank_of R13 ) > ( 0 );

defpred S9[ set , set ] means (for B175 being (Matrix of D359 , D358 , R9) holds (B175 = $1 implies ( Space_of_Solutions_of D360 ) = ( Space_of_Solutions_of B175 )));
deffunc H3((Matrix of D359 , D358 , R9) , Nat , Nat , (Element of R9)) = $1;
L2755: D358 > ( 0 ) by L2754 , MATRIX13:74;
L2756: (for B176 being (Matrix of D359 , D358 , R9) holds (for B177 being (Matrix of D359 , D358 , R9) holds (S9[ B176 , B177 ] implies (for B178 being (Element of R9) holds (for R3 being Nat holds (for R4 being Nat holds ((R4 in ( dom B176 ) & (R3 = R4 implies B178 <> ( - ( 1_ R9 ) ))) implies S9[ ( RLine (B176 , R3 , ( ( Line (B176 , R3) ) + ( B178 * ( Line (B176 , R4) ) ) )) ) , H3(B177 , R3 , R4 , B178) ])))))))
proof
let C182 being (Matrix of D359 , D358 , R9);
let C183 being (Matrix of D359 , D358 , R9);
assume that
L2757: S9[ C182 , C183 ];
let C184 being (Element of R9);
L2758: ( dom C182 ) = ( Seg ( len C182 ) ) by FINSEQ_1:def 3
.= ( Seg D359 ) by MATRIX_1:def 2;
let R3 being Nat;
let R4 being Nat;
assume L2759: (R4 in ( dom C182 ) & (R3 = R4 implies C184 <> ( - ( 1_ R9 ) )));
L2760: ( Space_of_Solutions_of ( RLine (C182 , R3 , ( ( Line (C182 , R3) ) + ( C184 * ( Line (C182 , R4) ) ) )) ) ) = ( Space_of_Solutions_of C182 ) by L2759 , L2755 , L2758 , L2482
.= ( Space_of_Solutions_of D360 ) by L2757;
thus L2761: thesis by L2760;
end;
L2762: S9[ D360 , D360 ];
consider C185 being (Matrix of D359 , D358 , R9), C186 being (Matrix of D359 , D358 , R9), R10 being  without_zero  finite (Subset of ( NAT )) such that L2763: R10 c= ( Seg D358 ) and L2764: (( the_rank_of D360 ) = ( the_rank_of C185 ) & ( the_rank_of D360 ) = ( card R10 )) and L2765: (S9[ C185 , C186 ] & ( Segm (C185 , ( Seg ( card R10 ) ) , R10) ) = ( 1. (R9 , ( card R10 )) )) and L2766: (for R3 being Nat holds ((R3 in ( dom C185 ) & R3 > ( card R10 )) implies ( Line (C185 , R3) ) = ( D358 |-> ( 0. R9 ) ))) and L2767: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card R10 ) ) & R4 in ( Seg ( width C185 ) ) & R4 < ( ( Sgm R10 ) . R3 )) implies ( C185 * (R3 , R4) ) = ( 0. R9 )))) from GAUSS2(L2762 , L2756);
L2768: ( 0 ) < D359 by L2754 , MATRIX13:74;
L2769: ( width C185 ) = D358 by L2768 , MATRIX_1:23;
L2770: ( card ( Seg ( width C185 ) ) ) = D358 by L2769 , FINSEQ_1:57;
L2771: ( card ( ( Seg D358 ) \ R10 ) ) = ( D358 - ( card R10 ) ) by L2770 , L2763 , L2769 , CARD_2:44;
set D361 = ( Segm (C185 , ( Seg ( card R10 ) ) , ( Seg ( width C185 ) )) );
L2772: ( Seg ( card R10 ) ) c= ( Seg ( card R10 ) );
L2773: ( D358 -' ( card R10 ) ) = ( D358 - ( card R10 ) ) by L2763 , L2769 , L2770 , NAT_1:43 , XREAL_1:233;
L2774: ( Sgm ( Seg ( card R10 ) ) ) = ( idseq ( card R10 ) ) by FINSEQ_3:48
.= ( id ( Seg ( card R10 ) ) );
L2775: ( Seg ( card R10 ) ) = ( ( Sgm ( Seg ( card R10 ) ) ) " ( Seg ( card R10 ) ) ) by L2774 , L2772 , FUNCT_2:94;
L2776: ( Sgm ( Seg ( width C185 ) ) ) = ( idseq ( width C185 ) ) by FINSEQ_3:48
.= ( id ( Seg ( width C185 ) ) );
L2777: R10 = ( ( Sgm ( Seg ( width C185 ) ) ) " R10 ) by L2776 , L2763 , L2769 , FUNCT_2:94;
L2778: ( Segm (D361 , ( Seg ( card R10 ) ) , R10) ) = ( 1. (R9 , ( card R10 )) ) by L2777 , L2763 , L2765 , L2769 , L2775 , MATRIX13:56;
L2779: ( card ( Seg ( card R10 ) ) ) = ( card R10 ) by FINSEQ_1:57;
L2780: ( Seg ( len C185 ) ) = ( dom C185 ) by FINSEQ_1:def 3;
L2781:
now
let R3 being Nat;
assume that
L2782: R3 in ( ( dom C185 ) \ ( Seg ( card R10 ) ) );
L2783: (not R3 in ( Seg ( card R10 ) )) by L2782 , XBOOLE_0:def 5;
L2784: (R3 < 1 or R3 > ( card R10 )) by L2783 , L2782;
L2785: R3 in ( dom C185 ) by L2782 , XBOOLE_0:def 5;
thus L2786: ( Line (C185 , R3) ) = ( ( width C185 ) |-> ( 0. R9 ) ) by L2785 , L2766 , L2780 , L2769 , L2784 , FINSEQ_1:1;
end;
L2787: ( card R10 ) <= ( len C185 ) by L2764 , MATRIX13:74;
L2788: ( Seg ( card R10 ) ) c= ( Seg ( len C185 ) ) by L2787 , FINSEQ_1:5;
L2789: ( width C185 ) > ( 0 ) by L2755 , L2768 , MATRIX_1:23;
L2790: ( Space_of_Solutions_of D361 ) = ( Space_of_Solutions_of C185 ) by L2789 , L2754 , L2764 , L2788 , L2780 , L2781 , L2515
.= ( Space_of_Solutions_of D360 ) by L2765;
per cases ;
suppose L2791: ( D358 -' ( card R10 ) ) = ( 0 );

L2792: D361 = ( 1. (R9 , ( card R10 )) ) by L2791 , L2763 , L2765 , L2769 , L2779 , L2773 , CARD_FIN:1;
thus L2793: thesis by L2792 , L2764 , L2790 , L2773 , L2791 , L2721;
end;
suppose L2794: ( D358 -' ( card R10 ) ) > ( 0 );

L2795: ( ( D358 -' ( card R10 ) ) + ( 0 ) ) > ( 0 ) by L2794;
L2796: ( D358 -' ( card R10 ) ) >= 1 by L2795 , NAT_1:19;
L2797: ( Det ( 1. (R9 , ( D358 -' ( card R10 ) )) ) ) = ( 1_ R9 ) by L2796 , MATRIX_7:16;
L2798: (( card ( Seg ( D358 -' ( card R10 ) ) ) ) = ( D358 -' ( card R10 ) ) & ( 0. R9 ) <> ( 1_ R9 )) by FINSEQ_1:57;
consider C187 being (Matrix of ( D358 -' ( card R10 ) ) , D358 , R9) such that L2799: ( Segm (C187 , ( Seg ( D358 -' ( card R10 ) ) ) , ( ( Seg D358 ) \ R10 )) ) = ( 1. (R9 , ( D358 -' ( card R10 ) )) ) and L2800: ( Segm (C187 , ( Seg ( D358 -' ( card R10 ) ) ) , R10) ) = ( - ( ( Segm (D361 , ( Seg ( card R10 ) ) , ( ( Seg D358 ) \ R10 )) ) @ ) ) and L2801: ( Lin ( lines C187 ) ) = ( Space_of_Solutions_of D360 ) by L2754 , L2763 , L2764 , L2790 , L2779 , L2770 , L2778 , L2794 , L2565;
L2802: ( len C187 ) = ( D358 -' ( card R10 ) ) by L2794 , MATRIX_1:23;
L2803: ( D358 -' ( card R10 ) ) >= ( the_rank_of C187 ) by L2802 , MATRIX13:74;
L2804: ( ( Seg D358 ) \ R10 ) c= ( Seg D358 ) by XBOOLE_1:36;
L2805: ( Indices C187 ) = [: ( Seg ( D358 -' ( card R10 ) ) ) , ( Seg D358 ) :] by L2794 , MATRIX_1:23;
L2806: [: ( Seg ( D358 -' ( card R10 ) ) ) , ( ( Seg D358 ) \ R10 ) :] c= ( Indices C187 ) by L2805 , L2804 , ZFMISC_1:95;
reconsider D362 = ( lines C187 ) as (Subset of ( D358 -VectSp_over R9 ));
L2807: (( dom C187 ) = ( Seg ( len C187 ) ) & ( len C187 ) = ( D358 -' ( card R10 ) )) by FINSEQ_1:def 3 , MATRIX_1:def 2;
L2808: ( EqSegm (C187 , ( Seg ( D358 -' ( card R10 ) ) ) , ( ( Seg D358 ) \ R10 )) ) = ( 1. (R9 , ( D358 -' ( card R10 ) )) ) by L2771 , L2773 , L2799 , FINSEQ_1:57 , MATRIX13:def 3;
L2809: ( D358 -' ( card R10 ) ) <= ( the_rank_of C187 ) by L2808 , L2771 , L2773 , L2806 , L2797 , L2798 , MATRIX13:def 4;
L2810: C187 is  without_repeated_line by L2809 , L2803 , MATRIX13:105 , XXREAL_0:1;
L2811: ( Seg ( D358 -' ( card R10 ) ) ) , D362 are_equipotent  by L2810 , L2807 , WELLORD2:def 4;
L2812: ( card D362 ) = ( card ( Seg ( D358 -' ( card R10 ) ) ) ) by L2811 , CARD_1:5
.= ( D358 -' ( card R10 ) ) by FINSEQ_1:57;
L2813: ( the_rank_of C187 ) = ( D358 -' ( card R10 ) ) by L2809 , L2803 , XXREAL_0:1;
L2814: ( lines C187 ) is  linearly-independent by L2813 , MATRIX13:121;
thus L2815: thesis by L2814 , L2764 , L2773 , L2801 , L2812 , VECTSP_9:26;
end;
end;
end;
theorem
L2818: (for R7 being Nat holds (for R8 being Nat holds (for R9 being Field holds (for B179 being (Matrix of R8 , R7 , R9) holds (for R3 being Nat holds (for R4 being Nat holds (for R11 being (Element of R9) holds ((B179 is  without_repeated_line & R4 in ( dom B179 ) & (R3 = R4 implies R11 <> ( - ( 1_ R9 ) ))) implies ( Lin ( lines B179 ) ) = ( Lin ( lines ( RLine (B179 , R3 , ( ( Line (B179 , R3) ) + ( R11 * ( Line (B179 , R4) ) ) )) ) ) )))))))))
proof
let R7 being Nat;
let R8 being Nat;
let R9 being Field;
let C188 being (Matrix of R8 , R7 , R9);
let R3 being Nat;
let R4 being Nat;
let R11 being (Element of R9);
assume that
L2819: C188 is  without_repeated_line
and
L2820: R4 in ( dom C188 )
and
L2821: (R3 = R4 implies R11 <> ( - ( 1_ R9 ) ));
L2822: ( len C188 ) = R8 by MATRIX_1:def 2;
set D363 = ( ( Line (C188 , R3) ) + ( R11 * ( Line (C188 , R4) ) ) );
L2823: ( dom C188 ) = ( Seg ( len C188 ) ) by FINSEQ_1:def 3;
set D364 = ( RLine (C188 , R3 , D363) );
per cases ;
suppose L2824: (not R3 in ( dom C188 ));

thus L2825: thesis by L2824 , L2823 , MATRIX13:40;
end;
suppose L2826: R3 in ( dom C188 );

L2827: R8 <> ( 0 ) by L2826 , L2823 , L2822;
L2828: ( width C188 ) = R7 by L2827 , MATRIX_1:23;
reconsider D365 = ( Line (C188 , R3) ) , D366 = ( Line (C188 , R4) ) as (Vector of ( R7 -VectSp_over R9 )) by L2828 , MATRIX13:102;
L2829: ( R11 * D366 ) = ( R11 * ( Line (C188 , R4) ) ) by L2828 , MATRIX13:102;
L2830: D363 = ( D365 + ( R11 * D366 ) ) by L2829 , L2828 , MATRIX13:102;
L2831: (D365 = D366 implies (R11 <> ( - ( 1_ R9 ) ) or D365 = ( 0. ( R7 -VectSp_over R9 ) )))
proof
assume L2832: D365 = D366;
L2833: (D365 = ( C188 . R3 ) & D366 = ( C188 . R4 )) by L2820 , L2823 , L2822 , L2826 , MATRIX_2:8;
thus L2834: thesis by L2833 , L2819 , L2820 , L2821 , L2826 , L2832 , FUNCT_1:def 4;
end;
reconsider D367 = D363 as (Element of ( (the carrier of R9) * )) by FINSEQ_1:def 11;
reconsider D368 = D367 as set;
set D369 = ( { R3 } --> D367 );
L2835: ( len D363 ) = ( width C188 ) by CARD_1:def 7;
L2836: D364 = ( C188 +* (R3 , D368) ) by L2835 , MATRIX11:29
.= ( C188 +* ( R3 .--> D368 ) ) by L2826 , FUNCT_7:def 3
.= ( C188 +* D369 ) by FUNCOP_1:def 9;
L2837: ( C188 .: ( ( dom C188 ) \ ( dom D369 ) ) ) = ( ( C188 .: ( dom C188 ) ) \ ( C188 .: ( dom D369 ) ) ) by L2819 , FUNCT_1:64
.= ( ( rng C188 ) \ ( C188 .: ( dom D369 ) ) ) by RELAT_1:113
.= ( ( rng C188 ) \ ( Im (C188 , R3) ) ) by FUNCOP_1:13
.= ( ( rng C188 ) \ { ( C188 . R3 ) } ) by L2826 , FUNCT_1:59
.= ( ( rng C188 ) \ { ( Line (C188 , R3) ) } ) by L2823 , L2822 , L2826 , MATRIX_2:8;
L2838: ( lines D364 ) = ( ( ( lines C188 ) \ { ( Line (C188 , R3) ) } ) \/ ( rng D369 ) ) by L2837 , L2836 , FRECHET:12
.= ( ( ( lines C188 ) \ { ( Line (C188 , R3) ) } ) \/ { D363 } ) by FUNCOP_1:8;
L2839: D366 in ( lines C188 ) by L2820 , L2823 , L2822 , MATRIX13:103;
L2840: D365 in ( lines C188 ) by L2823 , L2822 , L2826 , MATRIX13:103;
thus L2841: thesis by L2840 , L2830 , L2838 , L2839 , L2831 , L529;
end;
end;
theorem
L2843: (for R7 being Nat holds (for R9 being Field holds (for B180 being (Subspace of ( R7 -VectSp_over R9 )) holds (ex B181 being (Matrix of ( dim B180 ) , R7 , R9) st (ex B182 being  without_zero  finite (Subset of ( NAT )) st (B182 c= ( Seg R7 ) & ( dim B180 ) = ( card B182 ) & ( Segm (B181 , ( Seg ( dim B180 ) ) , B182) ) = ( 1. (R9 , ( dim B180 )) ) & ( the_rank_of B181 ) = ( dim B180 ) & ( lines B181 ) is (Basis of B180)))))))
proof
let R7 being Nat;
let R9 being Field;
let C189 being (Subspace of ( R7 -VectSp_over R9 ));
consider C190 being  finite (Subset of C189) such that L2844: C190 is (Basis of C189) by MATRLIN:def 1;
L2845: C190 is  linearly-independent by L2844 , VECTSP_7:def 3;
reconsider D370 = C190 as  linearly-independent (Subset of ( R7 -VectSp_over R9 )) by L2845 , VECTSP_9:11;
defpred S10[ set , set ] means (for B183 being (Matrix of ( card C190 ) , R7 , R9) holds (for B184 being (Matrix of ( card C190 ) , R7 , R9) holds ($1 = B183 implies (B183 is  without_repeated_line & ( lines B183 ) is  linearly-independent & ( Lin ( lines B183 ) ) = ( (Omega). C189 )))));
deffunc H4((Matrix of ( card C190 ) , R7 , R9) , Nat , Nat , (Element of R9)) = $1;
consider C191 being (Matrix of ( card C190 ) , R7 , R9) such that L2846: (C191 is  without_repeated_line & ( lines C191 ) = D370) by MATRIX13:104;
L2847: (for B185 being (Matrix of ( card C190 ) , R7 , R9) holds (for B186 being (Matrix of ( card C190 ) , R7 , R9) holds (S10[ B185 , B186 ] implies (for B187 being (Element of R9) holds (for R3 being Nat holds (for R4 being Nat holds ((R4 in ( dom B185 ) & (R3 = R4 implies B187 <> ( - ( 1_ R9 ) ))) implies S10[ ( RLine (B185 , R3 , ( ( Line (B185 , R3) ) + ( B187 * ( Line (B185 , R4) ) ) )) ) , H4(B186 , R3 , R4 , B187) ])))))))
proof
let C192 being (Matrix of ( card C190 ) , R7 , R9);
let C193 being (Matrix of ( card C190 ) , R7 , R9);
assume that
L2848: S10[ C192 , C193 ];
L2849: ( dom C192 ) = ( Seg ( len C192 ) ) by FINSEQ_1:def 3;
let C194 being (Element of R9);
let R3 being Nat;
let R4 being Nat;
assume that
L2850: (R4 in ( dom C192 ) & (R3 = R4 implies C194 <> ( - ( 1_ R9 ) )));
set D371 = ( RLine (C192 , R3 , ( ( Line (C192 , R3) ) + ( C194 * ( Line (C192 , R4) ) ) )) );
L2851: C192 is  without_repeated_line by L2848;
L2852: ( Lin ( lines C192 ) ) = ( Lin ( lines D371 ) ) by L2851 , L2850 , L2818;
L2853: ( lines C192 ) is  linearly-independent by L2848;
L2854: ( card C190 ) = ( the_rank_of C192 ) by L2853 , L2851 , MATRIX13:121
.= ( the_rank_of D371 ) by L2850 , L2849 , MATRIX13:92;
thus L2855: thesis by L2854 , L2848 , L2852 , MATRIX13:121;
end;
L2856: ( Lin C190 ) = ( the VectSpStr of C189 ) by L2844 , VECTSP_7:def 3;
L2857: S10[ C191 , C191 ] by L2856 , L2846 , VECTSP_9:17;
consider C195 being (Matrix of ( card C190 ) , R7 , R9), C196 being (Matrix of ( card C190 ) , R7 , R9), R10 being  without_zero  finite (Subset of ( NAT )) such that L2858: R10 c= ( Seg R7 ) and L2859: (( the_rank_of C191 ) = ( the_rank_of C195 ) & ( the_rank_of C191 ) = ( card R10 ) & S10[ C195 , C196 ]) and L2860: ( Segm (C195 , ( Seg ( card R10 ) ) , R10) ) = ( 1. (R9 , ( card R10 )) ) and L2861: (for R3 being Nat holds ((R3 in ( dom C195 ) & R3 > ( card R10 )) implies ( Line (C195 , R3) ) = ( R7 |-> ( 0. R9 ) ))) and L2862: (for R3 being Nat holds (for R4 being Nat holds ((R3 in ( Seg ( card R10 ) ) & R4 in ( Seg ( width C195 ) ) & R4 < ( ( Sgm R10 ) . R3 )) implies ( C195 * (R3 , R4) ) = ( 0. R9 )))) from GAUSS2(L2857 , L2847);
reconsider D372 = C195 as (Matrix of ( dim C189 ) , R7 , R9) by L2844 , VECTSP_9:def 1;
L2863: ( lines D372 ) c= (the carrier of ( Lin ( lines D372 ) ))
proof
let R1 being set;
assume L2864: R1 in ( lines D372 );
L2865: R1 in ( Lin ( lines D372 ) ) by L2864 , VECTSP_7:8;
thus L2866: thesis by L2865 , STRUCT_0:def 5;
end;
reconsider D373 = ( lines D372 ) as  linearly-independent (Subset of C189) by L2863 , L2859 , VECTSP_9:12;
take D372;
take R10;
L2867: ( Lin D373 ) = ( Lin ( lines D372 ) ) by VECTSP_9:17;
L2868: ( the_rank_of C191 ) = ( card C190 ) by L2846 , MATRIX13:121;
L2869: ( card C190 ) = ( dim C189 ) by L2844 , VECTSP_9:def 1;
L2870: ( Lin ( lines D372 ) ) = ( the VectSpStr of C189 ) by L2859;
thus L2871: thesis by L2870 , L2869 , L2858 , L2859 , L2860 , L2868 , L2867 , VECTSP_7:def 3;
end;
theorem
L2872: (for R7 being Nat holds (for R9 being Field holds (for B188 being  strict (Subspace of ( R7 -VectSp_over R9 )) holds (( dim B188 ) < R7 implies (ex B189 being (Matrix of ( R7 -' ( dim B188 ) ) , R7 , R9) st (ex B190 being  without_zero  finite (Subset of ( NAT )) st (( card B190 ) = ( R7 -' ( dim B188 ) ) & B190 c= ( Seg R7 ) & ( Segm (B189 , ( Seg ( R7 -' ( dim B188 ) ) ) , B190) ) = ( 1. (R9 , ( R7 -' ( dim B188 ) )) ) & B188 = ( Space_of_Solutions_of B189 ))))))))
proof
let R7 being Nat;
let R9 being Field;
let C197 being  strict (Subspace of ( R7 -VectSp_over R9 ));
assume that
L2873: ( dim C197 ) < R7;
per cases ;
suppose L2874: ( dim C197 ) = ( 0 );

reconsider D374 = ( 1. (R9 , R7) ) as (Matrix of ( R7 -' ( dim C197 ) ) , R7 , R9) by L2874 , NAT_D:40;
take D374;
take ( Seg R7 );
L2875: ( len ( 1. (R9 , R7) ) ) = R7 by MATRIX_1:24;
L2876: ( dim ( Space_of_Solutions_of D374 ) ) = ( 0 ) by L2721;
L2877: ( R7 -' ( dim C197 ) ) = R7 by L2874 , NAT_D:40;
L2878: ( width ( 1. (R9 , R7) ) ) = R7 by MATRIX_1:24;
L2879: ( Space_of_Solutions_of D374 ) = ( (Omega). ( Space_of_Solutions_of D374 ) )
.= ( (0). ( Space_of_Solutions_of D374 ) ) by L2876 , VECTSP_9:29
.= ( (0). C197 ) by L2878 , VECTSP_4:37
.= ( (Omega). C197 ) by L2874 , VECTSP_9:29
.= C197;
thus L2880: thesis by L2879 , L2877 , L2875 , L2878 , FINSEQ_1:57 , MATRIX13:46;
end;
suppose L2881: ( dim C197 ) > ( 0 );

set D375 = ( 0. (R9 , ( R7 -' ( dim C197 ) ) , R7) );
L2882: ( R7 - ( dim C197 ) ) > ( ( dim C197 ) - ( dim C197 ) ) by L2873 , XREAL_1:9;
L2883: ( R7 -' ( dim C197 ) ) = ( R7 - ( dim C197 ) ) by L2873 , XREAL_1:233;
L2884: (( len D375 ) = ( R7 -' ( dim C197 ) ) & ( width D375 ) = R7) by L2883 , L2882 , MATRIX_1:23;
L2885: ( card ( Seg R7 ) ) = R7 by FINSEQ_1:57;
consider C198 being (Matrix of ( dim C197 ) , R7 , R9), R10 being  without_zero  finite (Subset of ( NAT )) such that L2886: R10 c= ( Seg R7 ) and L2887: ( dim C197 ) = ( card R10 ) and L2888: ( Segm (C198 , ( Seg ( dim C197 ) ) , R10) ) = ( 1. (R9 , ( dim C197 )) ) and L2889: ( the_rank_of C198 ) = ( dim C197 ) and L2890: ( lines C198 ) is (Basis of C197) by L2843;
set D376 = ( Segm (C198 , ( Seg ( dim C197 ) ) , ( ( Seg R7 ) \ R10 )) );
L2891: ( card ( ( Seg R7 ) \ R10 ) ) = ( ( card ( Seg R7 ) ) - ( card R10 ) ) by L2886 , CARD_2:44;
L2892: ( width D376 ) = ( R7 - ( card R10 ) ) by L2891 , L2881 , L2885 , MATRIX_1:23;
L2893: ( card ( Seg ( dim C197 ) ) ) = ( dim C197 ) by FINSEQ_1:57;
L2894: ( len D376 ) = ( dim C197 ) by L2893 , L2881 , MATRIX_1:23;
L2895: ( width ( D376 @ ) ) = ( dim C197 ) by L2894 , L2887 , L2882 , L2892 , MATRIX_2:10;
L2896: ( width ( - ( D376 @ ) ) ) = ( dim C197 ) by L2895 , MATRIX_3:def 2;
L2897: ( card ( Seg ( R7 -' ( dim C197 ) ) ) ) = ( R7 -' ( dim C197 ) ) by FINSEQ_1:57;
reconsider D377 = ( 1. (R9 , ( R7 -' ( dim C197 ) )) ) as (Matrix of ( card ( Seg ( R7 -' ( dim C197 ) ) ) ) , ( card ( ( Seg R7 ) \ R10 ) ) , R9) by L2897 , L2873 , L2887 , L2891 , L2885 , XREAL_1:233;
L2898: (( ( Seg R7 ) \ ( ( Seg R7 ) \ R10 ) ) = ( ( Seg R7 ) /\ R10 ) & ( R7 -' ( R7 -' ( dim C197 ) ) ) = ( R7 - ( R7 -' ( dim C197 ) ) )) by NAT_D:35 , XBOOLE_1:48 , XREAL_1:233;
L2899: ( Indices D375 ) = [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( Seg R7 ) :] by L2883 , L2882 , MATRIX_1:23;
L2900: [: ( Seg ( R7 -' ( dim C197 ) ) ) , R10 :] c= ( Indices D375 ) by L2899 , L2886 , ZFMISC_1:95;
L2901: ( len ( D376 @ ) ) = ( R7 - ( dim C197 ) ) by L2887 , L2882 , L2892 , MATRIX_2:10;
L2902: ( len ( - ( D376 @ ) ) ) = ( R7 -' ( dim C197 ) ) by L2901 , L2883 , MATRIX_3:def 2;
reconsider D378 = ( - ( D376 @ ) ) as (Matrix of ( card ( Seg ( R7 -' ( dim C197 ) ) ) ) , ( card R10 ) , R9) by L2902 , L2887 , L2897 , L2896 , MATRIX_2:7;
L2903: R10 misses ( ( Seg R7 ) \ R10 ) by XBOOLE_1:79;
L2904: ( ( Seg R7 ) \ R10 ) c= ( Seg R7 ) by XBOOLE_1:36;
L2905: [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( ( Seg R7 ) \ R10 ) :] c= ( Indices D375 ) by L2904 , L2899 , ZFMISC_1:95;
L2906: ( [: ( Seg ( R7 -' ( dim C197 ) ) ) , R10 :] /\ [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( ( Seg R7 ) \ R10 ) :] ) = [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( R10 /\ ( ( Seg R7 ) \ R10 ) ) :] by ZFMISC_1:99
.= [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( {} ) :] by L2903 , XBOOLE_0:def 7
.= ( {} ) by ZFMISC_1:90;
L2907: (for B191 , B192 , B193 , B194 , B195 , B196 being Nat holds (([ B191 , B192 ] in ( [: ( Seg ( R7 -' ( dim C197 ) ) ) , R10 :] /\ [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( ( Seg R7 ) \ R10 ) :] ) & B193 = ( ( ( Sgm ( Seg ( R7 -' ( dim C197 ) ) ) ) " ) . B191 ) & B194 = ( ( ( Sgm R10 ) " ) . B192 ) & B195 = ( ( ( Sgm ( Seg ( R7 -' ( dim C197 ) ) ) ) " ) . B191 ) & B196 = ( ( ( Sgm ( ( Seg R7 ) \ R10 ) ) " ) . B192 )) implies ( D378 * (B193 , B194) ) = ( D377 * (B195 , B196) ))) by L2906;
consider C199 being (Matrix of ( R7 -' ( dim C197 ) ) , R7 , R9) such that L2908: ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , R10) ) = D378 and L2909: ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , ( ( Seg R7 ) \ R10 )) ) = D377 and L2910: (for R3 being Nat holds (for R4 being Nat holds ([ R3 , R4 ] in ( ( Indices C199 ) \ ( [: ( Seg ( R7 -' ( dim C197 ) ) ) , R10 :] \/ [: ( Seg ( R7 -' ( dim C197 ) ) ) , ( ( Seg R7 ) \ R10 ) :] ) ) implies ( C199 * (R3 , R4) ) = ( D375 * (R3 , R4) )))) by L2907 , L2884 , L2900 , L2905 , L252;
L2911: ( ( Seg R7 ) /\ R10 ) = R10 by L2886 , XBOOLE_1:28;
consider C200 being (Matrix of ( dim C197 ) , R7 , R9) such that L2912: ( Segm (C200 , ( Seg ( dim C197 ) ) , R10) ) = ( 1. (R9 , ( dim C197 )) ) and L2913: ( Segm (C200 , ( Seg ( dim C197 ) ) , ( ( Seg R7 ) \ R10 )) ) = ( - ( ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , R10) ) @ ) ) and L2914: ( Lin ( lines C200 ) ) = ( Space_of_Solutions_of C199 ) by L2911 , L2881 , L2887 , L2883 , L2882 , L2891 , L2885 , L2909 , L2898 , L2565 , XBOOLE_1:36;
L2915:
now
L2916: ( Indices C198 ) = [: ( Seg ( dim C197 ) ) , ( Seg R7 ) :] by L2881 , MATRIX_1:23;
let R3 being Nat;
let R4 being Nat;
assume that
L2917: [ R3 , R4 ] in ( Indices C198 );
L2918: R3 in ( Seg ( dim C197 ) ) by L2917 , L2916 , ZFMISC_1:87;
L2919: ( Indices C198 ) = ( Indices C200 ) by MATRIX_1:26;
L2920: ( rng ( Sgm ( Seg ( dim C197 ) ) ) ) = ( Seg ( dim C197 ) ) by FINSEQ_1:def 13;
L2921: ( dom ( Sgm ( Seg ( dim C197 ) ) ) ) = ( Seg ( dim C197 ) ) by L2893 , FINSEQ_3:40;
consider R1 being set such that L2922: R1 in ( Seg ( dim C197 ) ) and L2923: ( ( Sgm ( Seg ( dim C197 ) ) ) . R1 ) = R3 by L2921 , L2918 , L2920 , FUNCT_1:def 3;
reconsider D379 = R1 as (Element of ( NAT )) by L2922;
L2924: R4 in ( Seg R7 ) by L2917 , L2916 , ZFMISC_1:87;
L2925:
now
per cases ;
suppose L2926: R4 in R10;

L2927: [ R3 , R4 ] in [: ( Seg ( dim C197 ) ) , R10 :] by L2926 , L2918 , ZFMISC_1:87;
L2928: ( rng ( Sgm R10 ) ) = R10 by L2886 , FINSEQ_1:def 13;
L2929: ( dom ( Sgm R10 ) ) = ( Seg ( dim C197 ) ) by L2886 , L2887 , FINSEQ_3:40;
consider R2 being set such that L2930: R2 in ( Seg ( dim C197 ) ) and L2931: ( ( Sgm R10 ) . R2 ) = R4 by L2929 , L2926 , L2928 , FUNCT_1:def 3;
reconsider D380 = R2 as (Element of ( NAT )) by L2930;
L2932: [: ( Seg ( dim C197 ) ) , R10 :] c= ( Indices C198 ) by L2886 , L2916 , ZFMISC_1:95;
L2933: [ D379 , D380 ] in ( Indices ( Segm (C200 , ( Seg ( dim C197 ) ) , R10) ) ) by L2932 , L2919 , L2920 , L2923 , L2928 , L2931 , L2927 , MATRIX13:17;
L2934: [ D379 , D380 ] in ( Indices ( Segm (C198 , ( Seg ( dim C197 ) ) , R10) ) ) by L2920 , L2923 , L2928 , L2931 , L2932 , L2927 , MATRIX13:17;
thus L2935: ( C198 * (R3 , R4) ) = ( ( Segm (C200 , ( Seg ( dim C197 ) ) , R10) ) * (D379 , D380) ) by L2934 , L2888 , L2912 , L2923 , L2931 , MATRIX13:def 1
.= ( C200 * (R3 , R4) ) by L2923 , L2931 , L2933 , MATRIX13:def 1;
end;
suppose L2936: (not R4 in R10);

L2937: R4 in ( ( Seg R7 ) \ R10 ) by L2936 , L2924 , XBOOLE_0:def 5;
L2938: [ R3 , R4 ] in [: ( Seg ( dim C197 ) ) , ( ( Seg R7 ) \ R10 ) :] by L2937 , L2918 , ZFMISC_1:87;
L2939: ( rng ( Sgm ( ( Seg R7 ) \ R10 ) ) ) = ( ( Seg R7 ) \ R10 ) by L2904 , FINSEQ_1:def 13;
L2940: ( dom ( Sgm ( ( Seg R7 ) \ R10 ) ) ) = ( Seg ( R7 -' ( dim C197 ) ) ) by L2887 , L2883 , L2891 , L2885 , FINSEQ_3:40 , XBOOLE_1:36;
consider R2 being set such that L2941: R2 in ( Seg ( R7 -' ( dim C197 ) ) ) and L2942: ( ( Sgm ( ( Seg R7 ) \ R10 ) ) . R2 ) = R4 by L2940 , L2937 , L2939 , FUNCT_1:def 3;
reconsider D381 = R2 as (Element of ( NAT )) by L2941;
L2943: [: ( Seg ( dim C197 ) ) , ( ( Seg R7 ) \ R10 ) :] c= ( Indices C198 ) by L2904 , L2916 , ZFMISC_1:95;
L2944: [ D379 , D381 ] in ( Indices ( Segm (C198 , ( Seg ( dim C197 ) ) , ( ( Seg R7 ) \ R10 )) ) ) by L2943 , L2920 , L2923 , L2939 , L2942 , L2938 , MATRIX13:17;
L2945: [ D379 , D381 ] in ( Indices ( Segm (C200 , ( Seg ( dim C197 ) ) , ( ( Seg R7 ) \ R10 )) ) ) by L2919 , L2920 , L2923 , L2939 , L2942 , L2943 , L2938 , MATRIX13:17;
L2946: [ D379 , D381 ] in ( Indices ( ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , R10) ) @ ) ) by L2945 , L2913 , L32;
L2947: [ D381 , D379 ] in ( Indices ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , R10) ) ) by L2946 , MATRIX_1:def 6;
L2948: [ D381 , D379 ] in ( Indices ( D376 @ ) ) by L2947 , L2908 , L32;
thus L2949: ( C200 * (R3 , R4) ) = ( ( - ( ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , R10) ) @ ) ) * (D379 , D381) ) by L2913 , L2923 , L2942 , L2945 , MATRIX13:def 1
.= ( - ( ( ( Segm (C199 , ( Seg ( R7 -' ( dim C197 ) ) ) , R10) ) @ ) * (D379 , D381) ) ) by L2946 , MATRIX_3:def 2
.= ( - ( ( - ( D376 @ ) ) * (D381 , D379) ) ) by L2908 , L2947 , MATRIX_1:def 6
.= ( - ( - ( ( D376 @ ) * (D381 , D379) ) ) ) by L2948 , MATRIX_3:def 2
.= ( ( D376 @ ) * (D381 , D379) ) by RLVECT_1:17
.= ( D376 * (D379 , D381) ) by L2944 , MATRIX_1:def 6
.= ( C198 * (R3 , R4) ) by L2923 , L2942 , L2944 , MATRIX13:def 1;
end;
end;
thus L2951: ( C198 * (R3 , R4) ) = ( C200 * (R3 , R4) ) by L2925;
end;
reconsider D382 = ( lines C200 ) as (Subset of C197) by L2915 , L2890 , MATRIX_1:27;
take C199;
take ( ( Seg R7 ) \ R10 );
L2952: C200 = C198 by L2915 , MATRIX_1:27;
L2953: ( Lin D382 ) = ( the VectSpStr of C197 ) by L2952 , L2890 , VECTSP_7:def 3;
thus L2954: thesis by L2953 , L2873 , L2887 , L2891 , L2885 , L2909 , L2914 , VECTSP_9:17 , XBOOLE_1:36 , XREAL_1:233;
end;
end;
theorem
L2956: (for R9 being Field holds (for B197 , B198 being (Matrix of R9) holds ((( width B197 ) = ( len B198 ) & (( width B197 ) = ( 0 ) implies ( len B197 ) = ( 0 )) & (( width B198 ) = ( 0 ) implies ( len B198 ) = ( 0 ))) implies ( Space_of_Solutions_of B198 ) is (Subspace of ( Space_of_Solutions_of ( B197 * B198 ) )))))
proof
let R9 being Field;
let C201 , C202 being (Matrix of R9);
assume that
L2957: ( width C201 ) = ( len C202 )
and
L2958: (( width C201 ) = ( 0 ) implies ( len C201 ) = ( 0 ))
and
L2959: (( width C202 ) = ( 0 ) implies ( len C202 ) = ( 0 ));
set D383 = ( C201 * C202 );
L2960: ( len D383 ) = ( len C201 ) by L2957 , MATRIX_3:def 4;
L2961: ( width D383 ) = ( width C202 ) by L2957 , MATRIX_3:def 4;
reconsider D384 = D383 as (Matrix of ( len C201 ) , ( width C202 ) , R9) by L2961 , L2960 , MATRIX_2:7;
L2962: (the carrier of ( Space_of_Solutions_of C202 )) c= (the carrier of ( Space_of_Solutions_of D384 ))
proof
let R1 being set;
assume L2963: R1 in (the carrier of ( Space_of_Solutions_of C202 ));
L2964: R1 in ( Solutions_of (C202 , ( ( len C202 ) |-> ( 0. R9 ) )) ) by L2963 , L2959 , L2372;
consider R25 being (FinSequence of R9) such that L2965: R25 = R1 and L2966: ( ColVec2Mx R25 ) in ( Solutions_of (C202 , ( ColVec2Mx ( ( len C202 ) |-> ( 0. R9 ) ) )) ) by L2964;
consider R17 being (Matrix of R9) such that L2967: R17 = ( ColVec2Mx R25 ) and L2968: ( len R17 ) = ( width C202 ) and L2969: ( width R17 ) = ( width ( ColVec2Mx ( ( len C202 ) |-> ( 0. R9 ) ) ) ) and L2970: ( C202 * R17 ) = ( ColVec2Mx ( ( len C202 ) |-> ( 0. R9 ) ) ) by L2966;
L2971: ( ColVec2Mx ( ( len D384 ) |-> ( 0. R9 ) ) ) = ( 0. (R9 , ( len C201 ) , 1) ) by L2960 , L924;
L2972: ( ColVec2Mx ( ( len C202 ) |-> ( 0. R9 ) ) ) = ( 0. (R9 , ( len C202 ) , 1) ) by L924;
L2973:
now
per cases ;
suppose L2974: ( len C201 ) = ( 0 );

L2975: (( Solutions_of (D384 , ( ColVec2Mx ( ( len D384 ) |-> ( 0. R9 ) ) )) ) = { ( {} ) } & R17 = ( {} )) by L2974 , L2960 , L2961 , L2968 , L2971 , L1548 , MATRIX_1:def 3;
thus L2976: R17 in ( Solutions_of (D384 , ( ColVec2Mx ( ( len D384 ) |-> ( 0. R9 ) ) )) ) by L2975 , TARSKI:def 1;
end;
suppose L2977: ( len C201 ) <> ( 0 );

L2978: ( width ( ColVec2Mx ( ( len D384 ) |-> ( 0. R9 ) ) ) ) = 1 by L2977 , L2960 , L839
.= ( width ( ColVec2Mx ( ( len C202 ) |-> ( 0. R9 ) ) ) ) by L2957 , L2958 , L2977 , L839;
L2979: ( ColVec2Mx ( ( len D384 ) |-> ( 0. R9 ) ) ) = ( C201 * ( C202 * R17 ) ) by L2957 , L2958 , L2970 , L2972 , L2971 , L2977 , MATRIXR2:18
.= ( D384 * R17 ) by L2957 , L2968 , MATRIX_3:33;
thus L2980: R17 in ( Solutions_of (D384 , ( ColVec2Mx ( ( len D384 ) |-> ( 0. R9 ) ) )) ) by L2979 , L2961 , L2968 , L2969 , L2978;
end;
end;
L2982: R25 in ( Solutions_of (D384 , ( ( len D384 ) |-> ( 0. R9 ) )) ) by L2973 , L2967;
thus L2983: thesis by L2982 , L2957 , L2958 , L2959 , L2960 , L2961 , L2965 , L2372;
end;
thus L2984: thesis by L2962 , L2961 , VECTSP_4:27;
end;
theorem
L2985: (for R9 being Field holds (for B199 , B200 being (Matrix of R9) holds (( width B199 ) = ( len B200 ) implies (( the_rank_of ( B199 * B200 ) ) <= ( the_rank_of B199 ) & ( the_rank_of ( B199 * B200 ) ) <= ( the_rank_of B200 )))))
proof
let R9 being Field;
let C203 , C204 being (Matrix of R9);
assume that
L2986: ( width C203 ) = ( len C204 );
set D385 = ( C203 * C204 );
L2987: ( width D385 ) = ( width C204 ) by L2986 , MATRIX_3:def 4;
per cases ;
suppose L2988: ( the_rank_of D385 ) = ( 0 );

thus L2989: thesis by L2988;
end;
suppose L2990: ( the_rank_of D385 ) > ( 0 );

set D386 = ( C203 @ );
L2991: ( width D385 ) > ( 0 ) by L2990 , MATRIX13:74;
L2992: ( width C203 ) > ( 0 ) by L2991 , L2986 , L2987 , MATRIX_1:def 3;
L2993: ( len D386 ) = ( width C203 ) by L2992 , MATRIX_2:10;
set D387 = ( C204 @ );
set D388 = ( D387 * D386 );
L2994: ( width D386 ) = ( len C203 ) by L2992 , MATRIX_2:10;
L2995: (( width D386 ) = ( 0 ) implies ( len D386 ) = ( 0 )) by L2994 , L2992 , MATRIX_1:def 3;
L2996: ( dim ( Space_of_Solutions_of D386 ) ) = ( ( width D386 ) - ( the_rank_of D386 ) ) by L2995 , L2749;
L2997: ( width D387 ) = ( len C204 ) by L2987 , L2991 , MATRIX_2:10;
L2998: (( width D387 ) = ( 0 ) implies ( len D387 ) = ( 0 )) by L2997 , L2987 , L2991 , MATRIX_1:def 3;
L2999: ( Space_of_Solutions_of D386 ) is (Subspace of ( Space_of_Solutions_of D388 )) by L2998 , L2986 , L2993 , L2997 , L2995 , L2956;
L3000: ( width D388 ) = ( width D386 ) by L2986 , L2993 , L2997 , MATRIX_3:def 4;
L3001: ( dim ( Space_of_Solutions_of D388 ) ) = ( ( width D388 ) - ( the_rank_of D388 ) ) by L3000 , L2992 , L2995 , L2749 , MATRIX_2:10;
L3002: ( ( width D386 ) - ( the_rank_of D386 ) ) <= ( ( width D386 ) - ( the_rank_of D388 ) ) by L3001 , L3000 , L2999 , L2996 , VECTSP_9:25;
L3003: ( the_rank_of D386 ) >= ( the_rank_of D388 ) by L3002 , XREAL_1:10;
L3004: ( the_rank_of C203 ) >= ( the_rank_of D388 ) by L3003 , MATRIX13:84;
L3005: (( width C203 ) = ( 0 ) implies ( len C203 ) = ( 0 )) by L2986 , L2987 , L2991 , MATRIX_1:def 3;
L3006: ( Space_of_Solutions_of C204 ) is (Subspace of ( Space_of_Solutions_of D385 )) by L3005 , L2986 , L2987 , L2991 , L2956;
L3007: (( dim ( Space_of_Solutions_of C204 ) ) = ( ( width C204 ) - ( the_rank_of C204 ) ) & ( dim ( Space_of_Solutions_of D385 ) ) = ( ( width D385 ) - ( the_rank_of D385 ) )) by L2987 , L2991 , L2749;
L3008: ( ( width C204 ) - ( the_rank_of C204 ) ) <= ( ( width C204 ) - ( the_rank_of D385 ) ) by L3007 , L2987 , L3006 , VECTSP_9:25;
L3009: D388 = ( D385 @ ) by L2986 , L2987 , L2991 , MATRIX_3:22;
thus L3010: thesis by L3009 , L3008 , L3004 , MATRIX13:84 , XREAL_1:10;
end;
end;
theorem
L3012: (for R8 being Nat holds (for R9 being Field holds (for B201 being (Matrix of R8 , R8 , R9) holds (for B202 being (Matrix of R9) holds ((( Det B201 ) <> ( 0. R9 ) & ( width B201 ) = ( len B202 ) & (( width B202 ) = ( 0 ) implies ( len B202 ) = ( 0 ))) implies ( Space_of_Solutions_of B202 ) = ( Space_of_Solutions_of ( B201 * B202 ) ))))))
proof
let R8 being Nat;
let R9 being Field;
let C205 being (Matrix of R8 , R8 , R9);
let C206 being (Matrix of R9);
assume that
L3013: ( Det C205 ) <> ( 0. R9 )
and
L3014: ( width C205 ) = ( len C206 )
and
L3015: (( width C206 ) = ( 0 ) implies ( len C206 ) = ( 0 ));
set D389 = ( C205 * C206 );
L3016: ( len D389 ) = ( len C205 ) by L3014 , MATRIX_3:def 4;
L3017: ( width D389 ) = ( width C206 ) by L3014 , MATRIX_3:def 4;
L3018: ( len C205 ) = R8 by MATRIX_1:24;
reconsider D390 = D389 as (Matrix of R8 , ( width C206 ) , R9) by L3016 , L3017 , MATRIX_1:24 , MATRIX_2:7;
L3019: ( width C205 ) = R8 by MATRIX_1:24;
L3020: (the carrier of ( Space_of_Solutions_of D390 )) c= (the carrier of ( Space_of_Solutions_of C206 ))
proof
L3021: C205 is  invertible by L3013 , LAPLACE:34;
L3022: C205 is_reverse_of ( C205 ~ ) by L3021 , MATRIX_6:def 4;
L3023: ( 1. (R9 , R8) ) = ( ( C205 ~ ) * C205 ) by L3022 , MATRIX_6:def 2;
L3024: ( len ( C205 ~ ) ) = R8 by MATRIX_1:24;
let R1 being set;
assume L3025: R1 in (the carrier of ( Space_of_Solutions_of D390 ));
L3026: R1 in ( Solutions_of (D390 , ( ( len D390 ) |-> ( 0. R9 ) )) ) by L3025 , L3014 , L3015 , L3018 , L3019 , L3016 , L3017 , L2372;
consider R25 being (FinSequence of R9) such that L3027: R25 = R1 and L3028: ( ColVec2Mx R25 ) in ( Solutions_of (D390 , ( ColVec2Mx ( ( len D390 ) |-> ( 0. R9 ) ) )) ) by L3026;
consider R17 being (Matrix of R9) such that L3029: R17 = ( ColVec2Mx R25 ) and L3030: ( len R17 ) = ( width D390 ) and L3031: ( width R17 ) = ( width ( ColVec2Mx ( ( len D390 ) |-> ( 0. R9 ) ) ) ) and L3032: ( D390 * R17 ) = ( ColVec2Mx ( ( len D390 ) |-> ( 0. R9 ) ) ) by L3028;
L3033: ( width ( C205 ~ ) ) = R8 by MATRIX_1:24;
set D391 = ( C206 * R17 );
L3034: ( len D391 ) = ( len C206 ) by L3017 , L3030 , MATRIX_3:def 4;
L3035: D391 = ( ( 1. (R9 , R8) ) * D391 ) by L3034 , L3014 , L3019 , MATRIXR2:68
.= ( ( C205 ~ ) * ( C205 * D391 ) ) by L3014 , L3018 , L3023 , L3033 , L3034 , MATRIX_3:33
.= ( ( C205 ~ ) * ( ColVec2Mx ( ( len D390 ) |-> ( 0. R9 ) ) ) ) by L3014 , L3017 , L3030 , L3032 , MATRIX_3:33
.= ( ( C205 ~ ) * ( 0. (R9 , ( len D390 ) , 1) ) ) by L924;
L3036:
now
per cases ;
suppose L3037: R8 = ( 0 );

L3038: ( 0. (R9 , ( len D390 ) , 1) ) = ( {} ) by L3037 , L3018 , L3016;
thus L3039: D391 = ( 0. (R9 , ( len D390 ) , 1) ) by L3038 , L3014 , L3034 , L3037 , MATRIX_1:24;
end;
suppose L3040: R8 > ( 0 );

thus L3041: D391 = ( 0. (R9 , ( len D390 ) , 1) ) by L3040 , L3018 , L3016 , L3024 , L3033 , L3035 , MATRIXR2:18;
end;
end;
L3043: D391 = ( ColVec2Mx ( ( len D390 ) |-> ( 0. R9 ) ) ) by L3036 , L924;
L3044: ( ColVec2Mx R25 ) in ( Solutions_of (C206 , ( ColVec2Mx ( ( len C206 ) |-> ( 0. R9 ) ) )) ) by L3043 , L3014 , L3018 , L3019 , L3016 , L3017 , L3029 , L3030 , L3031;
L3045: R25 in ( Solutions_of (C206 , ( ( len C206 ) |-> ( 0. R9 ) )) ) by L3044;
thus L3046: thesis by L3045 , L3015 , L3027 , L2372;
end;
L3047: (( width C205 ) = ( 0 ) implies ( len C205 ) = ( 0 )) by L3018 , MATRIX_1:24;
L3048: ( Space_of_Solutions_of C206 ) is (Subspace of ( Space_of_Solutions_of ( C205 * C206 ) )) by L3047 , L3014 , L3015 , L2956;
L3049: (the carrier of ( Space_of_Solutions_of C206 )) c= (the carrier of ( Space_of_Solutions_of ( C205 * C206 ) )) by L3048 , VECTSP_4:def 2;
L3050: (the carrier of ( Space_of_Solutions_of C206 )) = (the carrier of ( Space_of_Solutions_of ( C205 * C206 ) )) by L3049 , L3020 , XBOOLE_0:def 10;
thus L3051: thesis by L3050 , L3017 , VECTSP_4:29;
end;
theorem
L3052: (for R8 being Nat holds (for R9 being Field holds (for B203 being (Matrix of R8 , R8 , R9) holds (for B204 being (Matrix of R9) holds ((( width B203 ) = ( len B204 ) & ( Det B203 ) <> ( 0. R9 )) implies ( the_rank_of ( B203 * B204 ) ) = ( the_rank_of B204 ))))))
proof
let R8 being Nat;
let R9 being Field;
let C207 being (Matrix of R8 , R8 , R9);
let C208 being (Matrix of R9);
assume that
L3053: ( width C207 ) = ( len C208 )
and
L3054: ( Det C207 ) <> ( 0. R9 );
set D392 = ( C207 * C208 );
L3055: ( len D392 ) = ( len C207 ) by L3053 , MATRIX_3:def 4;
L3056: (( len C207 ) = R8 & ( width C207 ) = R8) by MATRIX_1:24;
L3057: ( width D392 ) = ( width C208 ) by L3053 , MATRIX_3:def 4;
per cases ;
suppose L3058: ( width D392 ) = ( 0 );

thus L3059: thesis by L3058 , L3053 , L3055 , L3057 , L3056 , L980;
end;
suppose L3060: ( width D392 ) > ( 0 );

L3061: (( Space_of_Solutions_of C208 ) = ( Space_of_Solutions_of D392 ) & ( dim ( Space_of_Solutions_of C208 ) ) = ( ( width C208 ) - ( the_rank_of C208 ) )) by L3060 , L3053 , L3054 , L3057 , L2749 , L3012;
L3062: ( ( width C208 ) - ( the_rank_of C208 ) ) = ( ( width C208 ) - ( the_rank_of D392 ) ) by L3061 , L3057 , L3060 , L2749;
thus L3063: thesis by L3062;
end;
end;
theorem
L3065: (for R8 being Nat holds (for R9 being Field holds (for B205 being (Matrix of R8 , R8 , R9) holds (for B206 being (Matrix of R9) holds ((( len B205 ) = ( width B206 ) & ( Det B205 ) <> ( 0. R9 )) implies ( the_rank_of ( B206 * B205 ) ) = ( the_rank_of B206 ))))))
proof
let R8 being Nat;
let R9 being Field;
let C209 being (Matrix of R8 , R8 , R9);
let C210 being (Matrix of R9);
assume that
L3066: ( width C210 ) = ( len C209 )
and
L3067: ( Det C209 ) <> ( 0. R9 );
set D393 = ( C210 * C209 );
L3068: ( len D393 ) = ( len C210 ) by L3066 , MATRIX_3:def 4;
L3069: ( width D393 ) = ( width C209 ) by L3066 , MATRIX_3:def 4;
L3070: (( len C209 ) = R8 & ( width C209 ) = R8) by MATRIX_1:24;
per cases ;
suppose L3071: ( width D393 ) = ( 0 );

thus L3072: thesis by L3071 , L3066 , L3068 , L3069 , L3070 , L980;
end;
suppose L3073: ( width D393 ) > ( 0 );

L3074: (( width ( C209 @ ) ) = ( len C209 ) & ( len ( C210 @ ) ) = ( width C210 )) by L3073 , L3066 , L3069 , L3070 , MATRIX_2:10;
L3075: ( Det ( C209 @ ) ) <> ( 0. R9 ) by L3067 , MATRIXR2:43;
thus L3076: ( the_rank_of ( C210 * C209 ) ) = ( the_rank_of ( ( C210 * C209 ) @ ) ) by MATRIX13:84
.= ( the_rank_of ( ( C209 @ ) * ( C210 @ ) ) ) by L3066 , L3069 , L3073 , MATRIX_3:22
.= ( the_rank_of ( C210 @ ) ) by L3066 , L3075 , L3074 , L3052
.= ( the_rank_of C210 ) by MATRIX13:84;
end;
end;
