:: Reduction Relations
::  by Grzegorz Bancerek
::
:: Received November 14, 1995
:: Copyright (c) 1995-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, FINSEQ_1, ORDINAL4, XBOOLE_0, SUBSET_1, ARYTM_3,
      RELAT_1, XXREAL_0, CARD_1, NAT_1, FUNCT_1, FINSEQ_5, ARYTM_1, TARSKI,
      WELLORD1, PBOOLE, RELAT_2, FUNCOP_1, EQREL_1, REWRITE1;
 notations TARSKI, XBOOLE_0, SUBSET_1, NUMBERS, XCMPLX_0, XXREAL_0, ORDINAL1,
      NAT_1, FUNCT_1, RELAT_1, RELAT_2, WELLORD1, EQREL_1, FINSEQ_1, FUNCOP_1,
      PBOOLE, FINSEQ_5;
 constructors SETFAM_1, WELLORD1, XXREAL_0, XREAL_0, NAT_1, EQREL_1, PBOOLE,
      FINSEQ_5, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, ORDINAL1, PARTFUN1, NAT_1, XXREAL_0,
      XREAL_0, FINSEQ_1, CARD_1;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, RELAT_1, RELAT_2, WELLORD1;
 theorems TARSKI, ZFMISC_1, NAT_1, WELLORD1, RELAT_1, RELAT_2, FUNCT_1,
      FUNCOP_1, FINSEQ_1, FINSEQ_5, EQREL_1, WELLORD2, XBOOLE_0, XBOOLE_1,
      XREAL_1, XXREAL_0, ORDINAL1, CARD_1, PARTFUN1, XTUPLE_0;
 schemes NAT_1, RELAT_1, EQREL_1, TREES_2;

begin
definition
let C1 , C2 being FinSequence;
func C1 $^ C2 -> FinSequence means 
:L1: it = ( C1 ^ C2 ) if (C1 = ( {} ) or C2 = ( {} )) otherwise (ex B1 being (Element of ( NAT )) st (ex B2 being FinSequence st (( len C1 ) = ( B1 + 1 ) & B2 = ( C1 | ( Seg B1 ) ) & it = ( B2 ^ C2 ))));
existence
proof
thus L2: ((C1 = ( {} ) or C2 = ( {} )) implies (ex B3 being FinSequence st B3 = ( C1 ^ C2 )));
assume that
L3: C1 <> ( {} )
and
L4: C2 <> ( {} );
L5: ( len C1 ) >= ( ( 0 ) + 1 ) by L3 , NAT_1:13;
consider C3 being Nat such that L6: ( len C1 ) = ( 1 + C3 ) by L5 , NAT_1:10;
reconsider D1 = C3 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D2 = ( C1 | ( Seg D1 ) ) as FinSequence by FINSEQ_1:15;
take ( D2 ^ C2 );
take D1;
take D2;
thus L7: thesis by L6;
end;
uniqueness;
consistency;
end;
L9:
now
let C4 being FinSequence;
let C5 being Nat;
assume L10: C5 in ( dom C4 );
L11: C5 in ( Seg ( len C4 ) ) by L10 , FINSEQ_1:def 3;
thus L12: (C5 <= ( len C4 ) & C5 >= ( ( 0 ) + 1 )) by L11 , FINSEQ_1:1;
thus L13: C5 > ( 0 ) by L11 , FINSEQ_1:1;
end;
L14:
now
let C6 being FinSequence;
let C7 being Nat;
assume L15: ( C7 + 1 ) in ( dom C6 );
L16: ( C7 + 1 ) <= ( len C6 ) by L15 , L9;
thus L17: C7 < ( len C6 ) by L16 , NAT_1:13;
end;
L18:
now
let C8 being FinSequence;
let C9 being Nat;
assume that
L19: (C9 <= ( len C8 ) or C9 < ( len C8 ))
and
L20: (C9 >= 1 or C9 > ( 0 ));
L21: C9 >= ( ( 0 ) + 1 ) by L20 , NAT_1:13;
L22: C9 in ( Seg ( len C8 ) ) by L21 , L19 , FINSEQ_1:1;
thus L23: C9 in ( dom C8 ) by L22 , FINSEQ_1:def 3;
end;
L24:
now
let C10 being FinSequence;
let C11 being Nat;
assume L25: C11 < ( len C10 );
L26: ( C11 + 1 ) <= ( len C10 ) by L25 , NAT_1:13;
thus L27: ( C11 + 1 ) in ( dom C10 ) by L26 , L18;
end;
theorem
L28: (for R1 being FinSequence holds (( ( {} ) $^ R1 ) = R1 & ( R1 $^ ( {} ) ) = R1))
proof
let R1 being FinSequence;
L29: (( ( {} ) ^ R1 ) = R1 & ( R1 ^ ( {} ) ) = R1) by FINSEQ_1:34;
thus L30: thesis by L29 , L1;
end;
theorem
L31: (for R1 being FinSequence holds (for R2 being FinSequence holds (for R4 being set holds (R2 <> ( {} ) implies ( ( R1 ^ <* R4 *> ) $^ R2 ) = ( R1 ^ R2 )))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
let R4 being set;
L32: ( len <* R4 *> ) = 1 by FINSEQ_1:40;
L33: ( len ( R1 ^ <* R4 *> ) ) = ( ( len R1 ) + 1 ) by L32 , FINSEQ_1:22;
assume L34: R2 <> ( {} );
consider C12 being (Element of ( NAT )), C13 being FinSequence such that L35: ( len ( R1 ^ <* R4 *> ) ) = ( C12 + 1 ) and L36: C13 = ( ( R1 ^ <* R4 *> ) | ( Seg C12 ) ) and L37: ( ( R1 ^ <* R4 *> ) $^ R2 ) = ( C13 ^ R2 ) by L34 , L1;
L38: C12 <= ( C12 + 1 ) by NAT_1:11;
L39: ( len C13 ) = C12 by L38 , L35 , L36 , FINSEQ_1:17;
L40: (ex B4 being FinSequence st ( R1 ^ <* R4 *> ) = ( C13 ^ B4 )) by L36 , FINSEQ_1:80;
consider C14 being FinSequence such that L41: ( R1 ^ C14 ) = C13 by L40 , L35 , L33 , L39 , FINSEQ_1:47;
L42: ( ( len C13 ) + ( 0 ) ) = ( ( len R1 ) + ( len C14 ) ) by L41 , FINSEQ_1:22;
L43: C14 = ( {} ) by L42 , L35 , L33 , L39;
thus L44: thesis by L43 , L37 , L41 , FINSEQ_1:34;
end;
theorem
L45: (for R1 being FinSequence holds (for R2 being FinSequence holds (for R4 being set holds (for R5 being set holds ( ( R1 ^ <* R4 *> ) $^ ( <* R5 *> ^ R2 ) ) = ( ( R1 ^ <* R5 *> ) ^ R2 )))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
let R4 being set;
let R5 being set;
L46: ( ( R1 ^ <* R5 *> ) ^ R2 ) = ( R1 ^ ( <* R5 *> ^ R2 ) ) by FINSEQ_1:32;
thus L47: thesis by L46 , L31;
end;
theorem
L48: (for R2 being FinSequence holds (for R4 being set holds (R2 <> ( {} ) implies ( <* R4 *> $^ R2 ) = R2)))
proof
let R2 being FinSequence;
let R4 being set;
L49: (( ( {} ) ^ <* R4 *> ) = <* R4 *> & ( ( {} ) ^ R2 ) = R2) by FINSEQ_1:34;
thus L50: thesis by L49 , L31;
end;
theorem
L51: (for R1 being FinSequence holds (R1 <> ( {} ) implies (ex R4 being set st (ex R2 being FinSequence st (R1 = ( <* R4 *> ^ R2 ) & ( len R1 ) = ( ( len R2 ) + 1 ))))))
proof
let R1 being FinSequence;
defpred S1[ (Element of ( NAT )) ] means (for R1 being FinSequence holds ((R1 <> ( {} ) & ( len R1 ) = $1) implies (ex R4 being set st (ex R2 being FinSequence st (R1 = ( <* R4 *> ^ R2 ) & ( len R1 ) = ( ( len R2 ) + 1 ))))));
assume L52: R1 <> ( {} );
L53:
now
let C15 being (Element of ( NAT ));
assume L54: (for R1 being FinSequence holds ((R1 <> ( {} ) & ( len R1 ) = C15) implies (ex R4 being set st (ex R2 being FinSequence st (R1 = ( <* R4 *> ^ R2 ) & ( len R1 ) = ( ( len R2 ) + 1 ))))));
let R1 being FinSequence;
assume that
L55: R1 <> ( {} )
and
L56: ( len R1 ) = ( C15 + 1 );
consider R2 being FinSequence, R5 being set such that L57: R1 = ( R2 ^ <* R5 *> ) by L55 , FINSEQ_1:46;
L58: ( len R1 ) = ( ( len R2 ) + ( len <* R5 *> ) ) by L57 , FINSEQ_1:22;
L59: ( len <* R5 *> ) = 1 by FINSEQ_1:39;
per cases ;
suppose L60: R2 = ( {} );

L61: R1 = <* R5 *> by L60 , L57 , FINSEQ_1:34
.= ( <* R5 *> ^ ( {} ) ) by FINSEQ_1:34;
thus L62: (ex R4 being set st (ex R2 being FinSequence st (R1 = ( <* R4 *> ^ R2 ) & ( len R1 ) = ( ( len R2 ) + 1 )))) by L61 , L59 , L58 , L60;
end;
suppose L63: R2 <> ( {} );

consider R4 being set, R3 being FinSequence such that L64: R2 = ( <* R4 *> ^ R3 ) and L65: ( len R2 ) = ( ( len R3 ) + 1 ) by L63 , L54 , L56 , L59 , L58;
L66: ( len ( R3 ^ <* R5 *> ) ) = ( ( len R3 ) + 1 ) by L59 , FINSEQ_1:22;
L67: R1 = ( <* R4 *> ^ ( R3 ^ <* R5 *> ) ) by L57 , L64 , FINSEQ_1:32;
thus L68: (ex R4 being set st (ex R2 being FinSequence st (R1 = ( <* R4 *> ^ R2 ) & ( len R1 ) = ( ( len R2 ) + 1 )))) by L67 , L59 , L58 , L65 , L66;
end;
end;
L70: (for B5 being (Element of ( NAT )) holds (S1[ B5 ] implies S1[ ( B5 + 1 ) ])) by L53;
L71: S1[ ( 0 ) ];
L72: (for B6 being (Element of ( NAT )) holds S1[ B6 ]) from NAT_1:sch 1(L71 , L70);
thus L73: thesis by L72 , L52;
end;
scheme PathCatenation { P1[set , set] , F1 , F2() -> FinSequence } : (for B7 being (Element of ( NAT )) holds ((B7 in ( dom ( F1() $^ F2() ) ) & ( B7 + 1 ) in ( dom ( F1() $^ F2() ) )) implies (for B8 , B9 being set holds ((B8 = ( ( F1() $^ F2() ) . B7 ) & B9 = ( ( F1() $^ F2() ) . ( B7 + 1 ) )) implies P1[ B8 , B9 ]))))
provided
L74: (for B10 being (Element of ( NAT )) holds ((B10 in ( dom F1() ) & ( B10 + 1 ) in ( dom F1() )) implies P1[ ( F1() . B10 ) , ( F1() . ( B10 + 1 ) ) ]))
and
L75: (for B11 being (Element of ( NAT )) holds ((B11 in ( dom F2() ) & ( B11 + 1 ) in ( dom F2() )) implies P1[ ( F2() . B11 ) , ( F2() . ( B11 + 1 ) ) ]))
and
L76: (( len F1() ) > ( 0 ) & ( len F2() ) > ( 0 ) & ( F1() . ( len F1() ) ) = ( F2() . 1 ))
proof
L77: F1() <> ( {} ) by L76;
consider C16 being FinSequence, C17 being set such that L78: F1() = ( C16 ^ <* C17 *> ) by L77 , FINSEQ_1:46;
L79: F2() <> ( {} ) by L76;
L80: ( F1() $^ F2() ) = ( C16 ^ F2() ) by L79 , L78 , L31;
L81: ( ( 0 ) + 1 ) <= ( len F2() ) by L76 , NAT_1:13;
L82: 1 in ( Seg ( len F2() ) ) by L81 , FINSEQ_1:1;
L83: ( Seg ( len F2() ) ) = ( dom F2() ) by FINSEQ_1:def 3;
let C18 being (Element of ( NAT ));
assume that
L84: C18 in ( dom ( F1() $^ F2() ) )
and
L85: ( C18 + 1 ) in ( dom ( F1() $^ F2() ) );
L86: C18 >= ( ( 0 ) + 1 ) by L84 , L9;
let C19 , C20 being set;
L87: ( C18 + 1 ) >= 1 by NAT_1:11;
L88: ( len F1() ) = ( ( len C16 ) + ( len <* C17 *> ) ) by L78 , FINSEQ_1:22
.= ( ( len C16 ) + 1 ) by FINSEQ_1:40;
assume that
L89: C19 = ( ( F1() $^ F2() ) . C18 )
and
L90: C20 = ( ( F1() $^ F2() ) . ( C18 + 1 ) );
per cases ;
suppose L91: C18 < ( len F1() );

L92: (C18 in ( dom F1() ) & ( C18 + 1 ) in ( dom F1() )) by L91 , L86 , L18 , L24;
L93: P1[ ( F1() . C18 ) , ( F1() . ( C18 + 1 ) ) ] by L92 , L74;
L94:
now
assume L95: ( C18 + 1 ) <= ( len C16 );
L96: ( C18 + 1 ) in ( Seg ( len C16 ) ) by L95 , L87 , FINSEQ_1:1;
L97: ( C18 + 1 ) in ( dom C16 ) by L96 , FINSEQ_1:def 3;
thus L98: (C20 = ( C16 . ( C18 + 1 ) ) & ( C16 . ( C18 + 1 ) ) = ( F1() . ( C18 + 1 ) )) by L97 , L90 , L78 , L80 , FINSEQ_1:def 7;
end;
L99: C18 <= ( len C16 ) by L88 , L91 , NAT_1:13;
L100: C18 in ( Seg ( len C16 ) ) by L99 , L86 , FINSEQ_1:1;
L101: C18 in ( dom C16 ) by L100 , FINSEQ_1:def 3;
L102: (C19 = ( C16 . C18 ) & ( C16 . C18 ) = ( F1() . C18 )) by L101 , L89 , L78 , L80 , FINSEQ_1:def 7;
L103: (C18 = ( len C16 ) or C18 < ( len C16 )) by L99 , XXREAL_0:1;
thus L104: thesis by L103 , L76 , L82 , L83 , L90 , L80 , L88 , L93 , L102 , L94 , FINSEQ_1:def 7 , NAT_1:13;
end;
suppose L105: C18 >= ( len F1() );

consider C21 being Nat such that L106: C18 = ( ( len F1() ) + C21 ) by L105 , NAT_1:10;
reconsider D3 = C21 as (Element of ( NAT )) by ORDINAL1:def 12;
L107: C18 = ( ( len C16 ) + ( 1 + D3 ) ) by L88 , L106;
L108: ( len ( F1() $^ F2() ) ) = ( ( len C16 ) + ( len F2() ) ) by L80 , FINSEQ_1:22;
L109: ( D3 + 1 ) < ( len F2() ) by L108 , L85 , L107 , L14 , XREAL_1:7;
L110: ( ( D3 + 1 ) + 1 ) in ( dom F2() ) by L109 , L24;
L111: ( D3 + 1 ) in ( dom F2() ) by L109 , L18;
L112: C19 = ( F2() . ( D3 + 1 ) ) by L111 , L89 , L80 , L107 , FINSEQ_1:def 7;
L113: ( ( ( len C16 ) + ( 1 + D3 ) ) + 1 ) = ( ( len C16 ) + ( ( D3 + 1 ) + 1 ) );
L114: C20 = ( F2() . ( ( D3 + 1 ) + 1 ) ) by L113 , L90 , L80 , L88 , L106 , L110 , FINSEQ_1:def 7;
thus L115: thesis by L114 , L75 , L111 , L110 , L112;
end;
end;
definition
let C22 being Relation;
mode RedSequence of C22
 -> FinSequence
means :L117: (( len it ) > ( 0 ) & (for B12 being (Element of ( NAT )) holds ((B12 in ( dom it ) & ( B12 + 1 ) in ( dom it )) implies [ ( it . B12 ) , ( it . ( B12 + 1 ) ) ] in C22)));
existence
proof
take D4 = <* ( {} ) *>;
thus L118: ( len D4 ) > ( 0 );
let C23 being (Element of ( NAT ));
assume that
L119: C23 in ( dom D4 )
and
L120: ( C23 + 1 ) in ( dom D4 );
L121: ( dom D4 ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:38;
L122: C23 = 1 by L121 , L119 , TARSKI:def 1;
thus L123: thesis by L122 , L121 , L120 , TARSKI:def 1;
end;
end;
registration
let C24 being Relation;
cluster  -> non  empty for (RedSequence of C24);
coherence by L117 , CARD_1:27;
end;
theorem
L126: (for B13 being Relation holds (for B14 being set holds <* B14 *> is (RedSequence of B13)))
proof
let C25 being Relation;
let C26 being set;
set D5 = <* C26 *>;
thus L127: ( len D5 ) > ( 0 );
let C27 being (Element of ( NAT ));
assume that
L128: C27 in ( dom D5 )
and
L129: ( C27 + 1 ) in ( dom D5 );
L130: ( dom D5 ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:38;
L131: C27 = 1 by L130 , L128 , TARSKI:def 1;
thus L132: thesis by L131 , L130 , L129 , TARSKI:def 1;
end;
theorem
L133: (for B15 being Relation holds (for B16 , B17 being set holds ([ B16 , B17 ] in B15 implies <* B16 , B17 *> is (RedSequence of B15))))
proof
let C28 being Relation;
let C29 , C30 being set;
assume L134: [ C29 , C30 ] in C28;
set D6 = <* C29 , C30 *>;
thus L135: ( len D6 ) > ( 0 );
let C31 being (Element of ( NAT ));
assume that
L136: C31 in ( dom D6 )
and
L137: ( C31 + 1 ) in ( dom D6 );
L138: ( len D6 ) = ( 1 + 1 ) by FINSEQ_1:44;
L139: ( C31 + 1 ) <= ( 1 + 1 ) by L138 , L137 , L9;
L140: C31 <= 1 by L139 , XREAL_1:6;
L141: C31 >= 1 by L136 , L9;
L142: (( D6 . 1 ) = C29 & C31 = 1) by L141 , L140 , FINSEQ_1:44 , XXREAL_0:1;
thus L143: thesis by L142 , L134 , FINSEQ_1:44;
end;
theorem
L144: (for B18 being Relation holds (for B19 , B20 being (RedSequence of B18) holds (( B19 . ( len B19 ) ) = ( B20 . 1 ) implies ( B19 $^ B20 ) is (RedSequence of B18))))
proof
let C32 being Relation;
let C33 , C34 being (RedSequence of C32);
defpred S2[ set , set ] means [ $1 , $2 ] in C32;
set D7 = ( C33 $^ C34 );
consider C35 being FinSequence, C36 being set such that L145: C33 = ( C35 ^ <* C36 *> ) by FINSEQ_1:46;
assume L146: ( C33 . ( len C33 ) ) = ( C34 . 1 );
L147: (( len C33 ) > ( 0 ) & ( len C34 ) > ( 0 ) & ( C33 . ( len C33 ) ) = ( C34 . 1 )) by L146;
L148: D7 = ( C35 ^ C34 ) by L145 , L31;
thus L149: ( len D7 ) > ( 0 ) by L148;
L150: (for B21 being (Element of ( NAT )) holds ((B21 in ( dom C34 ) & ( B21 + 1 ) in ( dom C34 )) implies S2[ ( C34 . B21 ) , ( C34 . ( B21 + 1 ) ) ])) by L117;
L151: (for B22 being (Element of ( NAT )) holds ((B22 in ( dom C33 ) & ( B22 + 1 ) in ( dom C33 )) implies S2[ ( C33 . B22 ) , ( C33 . ( B22 + 1 ) ) ])) by L117;
L152: (for B23 being (Element of ( NAT )) holds ((B23 in ( dom ( C33 $^ C34 ) ) & ( B23 + 1 ) in ( dom ( C33 $^ C34 ) )) implies (for B24 , B25 being set holds ((B24 = ( ( C33 $^ C34 ) . B23 ) & B25 = ( ( C33 $^ C34 ) . ( B23 + 1 ) )) implies S2[ B24 , B25 ])))) from PathCatenation(L151 , L150 , L147);
thus L153: thesis by L152;
end;
theorem
L154: (for B26 being Relation holds (for B27 being (RedSequence of B26) holds ( Rev B27 ) is (RedSequence of ( B26 ~ ))))
proof
let C37 being Relation;
let C38 being (RedSequence of C37);
L155: ( len C38 ) > ( 0 );
thus L156: ( len ( Rev C38 ) ) > ( 0 ) by L155 , FINSEQ_5:def 3;
let C39 being (Element of ( NAT ));
assume that
L157: C39 in ( dom ( Rev C38 ) )
and
L158: ( C39 + 1 ) in ( dom ( Rev C38 ) );
L159: ( len ( Rev C38 ) ) = ( len C38 ) by FINSEQ_5:def 3;
L160: ( dom ( Rev C38 ) ) = ( Seg ( len C38 ) ) by L159 , FINSEQ_1:def 3;
L161: ( C39 + 1 ) <= ( len C38 ) by L159 , L158 , L9;
reconsider D8 = ( ( ( len C38 ) - ( C39 + 1 ) ) + 1 ) as (Element of ( NAT )) by L161 , FINSEQ_5:1;
L162: ( dom C38 ) = ( Seg ( len C38 ) ) by FINSEQ_1:def 3;
L163: D8 in ( dom C38 ) by L162 , L160 , L158 , FINSEQ_5:2;
L164: D8 = ( ( len C38 ) - C39 );
L165: ( D8 + 1 ) in ( dom C38 ) by L164 , L160 , L162 , L157 , FINSEQ_5:2;
L166: [ ( C38 . D8 ) , ( C38 . ( D8 + 1 ) ) ] in C37 by L165 , L163 , L117;
L167: (( ( Rev C38 ) . C39 ) = ( C38 . ( ( ( len C38 ) - C39 ) + 1 ) ) & ( ( Rev C38 ) . ( C39 + 1 ) ) = ( C38 . ( ( ( len C38 ) - ( C39 + 1 ) ) + 1 ) )) by L157 , L158 , FINSEQ_5:def 3;
thus L168: thesis by L167 , L166 , RELAT_1:def 7;
end;
theorem
L169: (for B28 , B29 being Relation holds (B28 c= B29 implies (for B30 being (RedSequence of B28) holds B30 is (RedSequence of B29))))
proof
let C40 , C41 being Relation;
assume that
L170: C40 c= C41;
let C42 being (RedSequence of C40);
thus L171: ( len C42 ) > ( 0 );
let C43 being (Element of ( NAT ));
assume L172: (C43 in ( dom C42 ) & ( C43 + 1 ) in ( dom C42 ));
L173: [ ( C42 . C43 ) , ( C42 . ( C43 + 1 ) ) ] in C40 by L172 , L117;
thus L174: thesis by L173 , L170;
end;
begin
definition
let C44 being Relation;
let C45 , C46 being set;
pred C44 reduces C45 , C46
means
:L175: (ex B31 being (RedSequence of C44) st (( B31 . 1 ) = C45 & ( B31 . ( len B31 ) ) = C46))
;end;
definition
let C47 being Relation;
let C48 , C49 being set;
pred C48 , C49 are_convertible_wrt C47
means
:L177: ( C47 \/ ( C47 ~ ) ) reduces C48 , C49
;end;
theorem
L179: (for B32 being Relation holds (for B33 , B34 being set holds (B32 reduces B33 , B34 iff (ex B35 being FinSequence st (( len B35 ) > ( 0 ) & ( B35 . 1 ) = B33 & ( B35 . ( len B35 ) ) = B34 & (for B36 being (Element of ( NAT )) holds ((B36 in ( dom B35 ) & ( B36 + 1 ) in ( dom B35 )) implies [ ( B35 . B36 ) , ( B35 . ( B36 + 1 ) ) ] in B32)))))))
proof
let C50 being Relation;
let C51 , C52 being set;
thus L180: (C50 reduces C51 , C52 implies (ex B37 being FinSequence st (( len B37 ) > ( 0 ) & ( B37 . 1 ) = C51 & ( B37 . ( len B37 ) ) = C52 & (for B38 being (Element of ( NAT )) holds ((B38 in ( dom B37 ) & ( B38 + 1 ) in ( dom B37 )) implies [ ( B37 . B38 ) , ( B37 . ( B38 + 1 ) ) ] in C50)))))
proof
given C53 being (RedSequence of C50) such that
L181: (( C53 . 1 ) = C51 & ( C53 . ( len C53 ) ) = C52);

take C53;
thus L182: thesis by L181 , L117;
end;

given C54 being FinSequence such that
L183: ( len C54 ) > ( 0 )
and
L184: (( C54 . 1 ) = C51 & ( C54 . ( len C54 ) ) = C52)
and
L185: (for B39 being (Element of ( NAT )) holds ((B39 in ( dom C54 ) & ( B39 + 1 ) in ( dom C54 )) implies [ ( C54 . B39 ) , ( C54 . ( B39 + 1 ) ) ] in C50));

reconsider D9 = C54 as (RedSequence of C50) by L183 , L185 , L117;
take D9;
thus L186: thesis by L184;
end;
theorem
L187: (for B40 being Relation holds (for B41 being set holds B40 reduces B41 , B41))
proof
let C55 being Relation;
let C56 being set;
reconsider D10 = <* C56 *> as (RedSequence of C55) by L126;
take D10;
L188: ( len D10 ) = 1 by FINSEQ_1:40;
thus L189: thesis by L188 , FINSEQ_1:40;
end;
theorem
L190: (for B42 , B43 being set holds (( {} ) reduces B42 , B43 implies B42 = B43))
proof
let C57 , C58 being set;
given C59 being (RedSequence of ( {} )) such that
L191: (( C59 . 1 ) = C57 & ( C59 . ( len C59 ) ) = C58);

L192:
now
assume L193: ( len C59 ) > 1;
L194: (1 in ( dom C59 ) & ( 1 + 1 ) in ( dom C59 )) by L193 , L18 , L24;
thus L195: contradiction by L194 , L117;
end;
L196: ( len C59 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
thus L197: thesis by L196 , L191 , L192 , XXREAL_0:1;
end;
theorem
L198: (for B44 being Relation holds (for B45 , B46 being set holds ((B44 reduces B45 , B46 & (not B45 in ( field B44 ))) implies B45 = B46)))
proof
let C60 being Relation;
let C61 , C62 being set;
given C63 being (RedSequence of C60) such that
L199: ( C63 . 1 ) = C61
and
L200: ( C63 . ( len C63 ) ) = C62;

assume L201: (not C61 in ( field C60 ));
L202:
now
assume L203: ( len C63 ) > 1;
L204: (1 in ( dom C63 ) & ( 1 + 1 ) in ( dom C63 )) by L203 , L18 , L24;
L205: [ ( C63 . 1 ) , ( C63 . ( 1 + 1 ) ) ] in C60 by L204 , L117;
thus L206: contradiction by L205 , L199 , L201 , RELAT_1:15;
end;
L207: ( len C63 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
thus L208: thesis by L207 , L199 , L200 , L202 , XXREAL_0:1;
end;
theorem
L209: (for B47 being Relation holds (for B48 , B49 being set holds ([ B48 , B49 ] in B47 implies B47 reduces B48 , B49)))
proof
let C64 being Relation;
let C65 , C66 being set;
assume L210: [ C65 , C66 ] in C64;
reconsider D11 = <* C65 , C66 *> as (RedSequence of C64) by L210 , L133;
take D11;
L211: ( len D11 ) = 2 by FINSEQ_1:44;
thus L212: thesis by L211 , FINSEQ_1:44;
end;
theorem
L213: (for B50 being Relation holds (for B51 , B52 , B53 being set holds ((B50 reduces B51 , B52 & B50 reduces B52 , B53) implies B50 reduces B51 , B53)))
proof
let C67 being Relation;
let C68 , C69 , C70 being set;
given C71 being (RedSequence of C67) such that
L214: ( C71 . 1 ) = C68
and
L215: ( C71 . ( len C71 ) ) = C69;

given C72 being (RedSequence of C67) such that
L216: ( C72 . 1 ) = C69
and
L217: ( C72 . ( len C72 ) ) = C70;

reconsider D12 = ( C71 $^ C72 ) as (RedSequence of C67) by L215 , L216 , L144;
take D12;
consider C73 being FinSequence, C74 being set such that L218: C71 = ( C73 ^ <* C74 *> ) by FINSEQ_1:46;
L219: ( ( 0 ) + 1 ) <= ( len C72 ) by NAT_1:13;
L220: ( len C72 ) in ( Seg ( len C72 ) ) by L219 , FINSEQ_1:1;
L221: ( len C72 ) in ( dom C72 ) by L220 , FINSEQ_1:def 3;
L222: D12 = ( C73 ^ C72 ) by L218 , L31;
L223: (C73 = ( {} ) or ( len C73 ) >= ( ( 0 ) + 1 )) by NAT_1:13;
L224: ((D12 = C72 & C71 = <* C74 *>) or 1 in ( Seg ( len C73 ) )) by L223 , L218 , L222 , FINSEQ_1:1 , FINSEQ_1:34;
L225: (1 in ( dom C73 ) or (( len C71 ) = 1 & D12 = C72)) by L224 , FINSEQ_1:40 , FINSEQ_1:def 3;
L226: ((( D12 . 1 ) = ( C73 . 1 ) & ( C73 . 1 ) = C68) or (( D12 . 1 ) = C69 & C69 = C68)) by L225 , L214 , L215 , L216 , L218 , L222 , FINSEQ_1:def 7;
thus L227: ( D12 . 1 ) = C68 by L226;
L228: ( len D12 ) = ( ( len C73 ) + ( len C72 ) ) by L222 , FINSEQ_1:22;
thus L229: thesis by L228 , L217 , L222 , L221 , FINSEQ_1:def 7;
end;
theorem
L230: (for B54 being Relation holds (for B55 being (RedSequence of B54) holds (for B56 , B57 being (Element of ( NAT )) holds ((B56 in ( dom B55 ) & B57 in ( dom B55 ) & B56 <= B57) implies B54 reduces ( B55 . B56 ) , ( B55 . B57 )))))
proof
let C75 being Relation;
let C76 being (RedSequence of C75);
let C77 , C78 being (Element of ( NAT ));
defpred S3[ (Element of ( NAT )) ] means (( C77 + $1 ) in ( dom C76 ) implies C75 reduces ( C76 . C77 ) , ( C76 . ( C77 + $1 ) ));
assume that
L231: C77 in ( dom C76 )
and
L232: C78 in ( dom C76 )
and
L233: C77 <= C78;
consider C79 being Nat such that L234: C78 = ( C77 + C79 ) by L233 , NAT_1:10;
L235:
now
L236: C77 >= 1 by L231 , L9;
let C80 being (Element of ( NAT ));
assume that
L237: (( C77 + C80 ) in ( dom C76 ) implies C75 reduces ( C76 . C77 ) , ( C76 . ( C77 + C80 ) ))
and
L238: ( C77 + ( C80 + 1 ) ) in ( dom C76 );
L239: ( C77 + ( C80 + 1 ) ) = ( ( C77 + C80 ) + 1 );
L240: ( C77 + C80 ) < ( len C76 ) by L239 , L238 , L14;
L241: ( C77 + C80 ) in ( dom C76 ) by L240 , L236 , L18;
L242: [ ( C76 . ( C77 + C80 ) ) , ( C76 . ( C77 + ( C80 + 1 ) ) ) ] in C75 by L241 , L238 , L239 , L117;
L243: C75 reduces ( C76 . ( C77 + C80 ) ) , ( C76 . ( C77 + ( C80 + 1 ) ) ) by L242 , L209;
thus L244: C75 reduces ( C76 . C77 ) , ( C76 . ( C77 + ( C80 + 1 ) ) ) by L243 , L237 , L236 , L240 , L18 , L213;
end;
L245: (for B58 being (Element of ( NAT )) holds (S3[ B58 ] implies S3[ ( B58 + 1 ) ])) by L235;
L246: S3[ ( 0 ) ] by L187;
L247: (for B59 being (Element of ( NAT )) holds S3[ B59 ]) from NAT_1:sch 1(L246 , L245);
L248: C79 in ( NAT ) by ORDINAL1:def 12;
thus L249: thesis by L248 , L232 , L247 , L234;
end;
theorem
L250: (for B60 being Relation holds (for B61 , B62 being set holds ((B60 reduces B61 , B62 & B61 <> B62) implies (B61 in ( field B60 ) & B62 in ( field B60 )))))
proof
let C81 being Relation;
let C82 , C83 being set;
given C84 being (RedSequence of C81) such that
L251: C82 = ( C84 . 1 )
and
L252: C83 = ( C84 . ( len C84 ) );

L253: ( len C84 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
assume L254: C82 <> C83;
L255: ( len C84 ) > 1 by L254 , L251 , L252 , L253 , XXREAL_0:1;
L256: ( 1 + 1 ) in ( dom C84 ) by L255 , L24;
L257: 1 in ( dom C84 ) by L253 , L18;
L258: [ C82 , ( C84 . 2 ) ] in C81 by L257 , L251 , L256 , L117;
thus L259: C82 in ( field C81 ) by L258 , RELAT_1:15;
defpred S4[ (Element of ( NAT )) ] means ($1 in ( dom C84 ) implies ( C84 . $1 ) in ( field C81 ));
L260: ( len C84 ) in ( dom C84 ) by FINSEQ_5:6;
L261:
now
let C85 being (Element of ( NAT ));
assume that
L262: (C85 in ( dom C84 ) implies ( C84 . C85 ) in ( field C81 ))
and
L263: ( C85 + 1 ) in ( dom C84 );
L264: C85 < ( len C84 ) by L263 , L14;
per cases ;
suppose L265: C85 = ( 0 );

thus L266: ( C84 . ( C85 + 1 ) ) in ( field C81 ) by L265 , L251 , L258 , RELAT_1:15;
end;
suppose L267: C85 > ( 0 );

L268: C85 in ( dom C84 ) by L267 , L264 , L18;
L269: [ ( C84 . C85 ) , ( C84 . ( C85 + 1 ) ) ] in C81 by L268 , L263 , L117;
thus L270: ( C84 . ( C85 + 1 ) ) in ( field C81 ) by L269 , RELAT_1:15;
end;
end;
L272: (for B63 being (Element of ( NAT )) holds (S4[ B63 ] implies S4[ ( B63 + 1 ) ])) by L261;
L273: S4[ ( 0 ) ] by L9;
L274: (for B64 being (Element of ( NAT )) holds S4[ B64 ]) from NAT_1:sch 1(L273 , L272);
thus L275: thesis by L274 , L252 , L260;
end;
theorem
L276: (for B65 being Relation holds (for B66 , B67 being set holds (B65 reduces B66 , B67 implies (B66 in ( field B65 ) iff B67 in ( field B65 ))))) by L250;
theorem
L277: (for B68 being Relation holds (for B69 , B70 being set holds (B68 reduces B69 , B70 iff (B69 = B70 or [ B69 , B70 ] in ( B68 [*] )))))
proof
let C86 being Relation;
let C87 , C88 being set;
thus L278:now
assume L279: C86 reduces C87 , C88;
consider C89 being (RedSequence of C86) such that L280: (C87 = ( C89 . 1 ) & C88 = ( C89 . ( len C89 ) )) by L279 , L175;
L281:
now
let C90 being Nat;
assume L282: (C90 >= 1 & C90 < ( len C89 ));
L283: (C90 in ( dom C89 ) & ( C90 + 1 ) in ( dom C89 )) by L282 , L18 , L24;
thus L284: [ ( C89 . C90 ) , ( C89 . ( C90 + 1 ) ) ] in C86 by L283 , L117;
end;
assume L285: C87 <> C88;
L286: (C87 in ( field C86 ) & C88 in ( field C86 )) by L285 , L279 , L250;
L287: ( len C89 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
thus L288: [ C87 , C88 ] in ( C86 [*] ) by L287 , L280 , L286 , L281 , FINSEQ_1:def 16;
end;
assume that
L289: (C87 = C88 or [ C87 , C88 ] in ( C86 [*] ))
and
L290: (not C86 reduces C87 , C88);
consider C91 being FinSequence such that L291: ( len C91 ) >= 1 and L292: (( C91 . 1 ) = C87 & ( C91 . ( len C91 ) ) = C88) and L293: (for B71 being Nat holds ((B71 >= 1 & B71 < ( len C91 )) implies [ ( C91 . B71 ) , ( C91 . ( B71 + 1 ) ) ] in C86)) by L289 , L290 , L187 , FINSEQ_1:def 16;
L294: C91 is (RedSequence of C86)
proof
thus L295: ( len C91 ) > ( 0 ) by L291;
let C92 being (Element of ( NAT ));
assume that
L296: C92 in ( dom C91 )
and
L297: ( C92 + 1 ) in ( dom C91 );
L298: C92 >= 1 by L296 , L9;
thus L299: thesis by L298 , L293 , L297 , L14;
end;
thus L300: contradiction by L294 , L290 , L292 , L175;
end;
theorem
L301: (for B72 being Relation holds (for B73 , B74 being set holds (B72 reduces B73 , B74 iff ( B72 [*] ) reduces B73 , B74)))
proof
let C93 being Relation;
let C94 , C95 being set;
L302: (C93 reduces C94 , C95 iff (C94 = C95 or [ C94 , C95 ] in ( C93 [*] ))) by L277;
thus L303: (C93 reduces C94 , C95 implies ( C93 [*] ) reduces C94 , C95) by L302 , L187 , L209;
given C96 being (RedSequence of ( C93 [*] )) such that
L304: C94 = ( C96 . 1 )
and
L305: C95 = ( C96 . ( len C96 ) );

defpred S5[ (Element of ( NAT )) ] means ($1 in ( dom C96 ) implies C93 reduces C94 , ( C96 . $1 ));
L306:
now
let C97 being (Element of ( NAT ));
assume that
L307: (C97 in ( dom C96 ) implies C93 reduces C94 , ( C96 . C97 ))
and
L308: ( C97 + 1 ) in ( dom C96 );
L309: C97 < ( len C96 ) by L308 , L14;
per cases ;
suppose L310: C97 = ( 0 );

thus L311: C93 reduces C94 , ( C96 . ( C97 + 1 ) ) by L310 , L304 , L187;
end;
suppose L312: C97 > ( 0 );

L313: C97 in ( dom C96 ) by L312 , L309 , L18;
L314: [ ( C96 . C97 ) , ( C96 . ( C97 + 1 ) ) ] in ( C93 [*] ) by L313 , L308 , L117;
L315: C93 reduces ( C96 . C97 ) , ( C96 . ( C97 + 1 ) ) by L314 , L277;
thus L316: C93 reduces C94 , ( C96 . ( C97 + 1 ) ) by L315 , L307 , L309 , L312 , L18 , L213;
end;
end;
L318: (for B75 being (Element of ( NAT )) holds (S5[ B75 ] implies S5[ ( B75 + 1 ) ])) by L306;
L319: ( len C96 ) in ( dom C96 ) by FINSEQ_5:6;
L320: S5[ ( 0 ) ] by L9;
L321: (for B76 being (Element of ( NAT )) holds S5[ B76 ]) from NAT_1:sch 1(L320 , L318);
thus L322: thesis by L321 , L305 , L319;
end;
theorem
L323: (for B77 , B78 being Relation holds (B77 c= B78 implies (for B79 , B80 being set holds (B77 reduces B79 , B80 implies B78 reduces B79 , B80))))
proof
let C98 , C99 being Relation;
assume that
L324: C98 c= C99;
let C100 , C101 being set;
given C102 being (RedSequence of C98) such that
L325: (( C102 . 1 ) = C100 & ( C102 . ( len C102 ) ) = C101);

L326: C102 is (RedSequence of C99) by L324 , L169;
thus L327: (ex B81 being (RedSequence of C99) st (( B81 . 1 ) = C100 & ( B81 . ( len B81 ) ) = C101)) by L326 , L325;
end;
theorem
L328: (for B82 being Relation holds (for B83 being set holds (for B84 , B85 being set holds (B82 reduces B84 , B85 iff ( B82 \/ ( id B83 ) ) reduces B84 , B85))))
proof
let C103 being Relation;
let C104 being set;
let C105 , C106 being set;
thus L329: (C103 reduces C105 , C106 implies ( C103 \/ ( id C104 ) ) reduces C105 , C106) by L323 , XBOOLE_1:7;
given C107 being (RedSequence of ( C103 \/ ( id C104 ) )) such that
L330: ( C107 . 1 ) = C105
and
L331: ( C107 . ( len C107 ) ) = C106;

defpred S6[ (Element of ( NAT )) ] means ($1 in ( dom C107 ) implies C103 reduces C105 , ( C107 . $1 ));
L332:
now
let C108 being (Element of ( NAT ));
assume L333: (C108 in ( dom C107 ) implies C103 reduces C105 , ( C107 . C108 ));
assume L334: ( C108 + 1 ) in ( dom C107 );
per cases ;
suppose L335: C108 in ( dom C107 );

L336: [ ( C107 . C108 ) , ( C107 . ( C108 + 1 ) ) ] in ( C103 \/ ( id C104 ) ) by L335 , L334 , L117;
L337: ([ ( C107 . C108 ) , ( C107 . ( C108 + 1 ) ) ] in C103 or [ ( C107 . C108 ) , ( C107 . ( C108 + 1 ) ) ] in ( id C104 )) by L336 , XBOOLE_0:def 3;
L338: (C103 reduces ( C107 . C108 ) , ( C107 . ( C108 + 1 ) ) or ( C107 . C108 ) = ( C107 . ( C108 + 1 ) )) by L337 , L209 , RELAT_1:def 10;
thus L339: C103 reduces C105 , ( C107 . ( C108 + 1 ) ) by L338 , L333 , L335 , L213;
end;
suppose L340: (not C108 in ( dom C107 ));

L341: (C108 < ( ( 0 ) + 1 ) or (C108 > ( len C107 ) & ( C108 + 1 ) <= ( len C107 ))) by L340 , L334 , L9 , L18;
L342: C108 = ( 0 ) by L341 , NAT_1:13;
thus L343: C103 reduces C105 , ( C107 . ( C108 + 1 ) ) by L342 , L330 , L187;
end;
end;
L345: (for B86 being (Element of ( NAT )) holds (S6[ B86 ] implies S6[ ( B86 + 1 ) ])) by L332;
L346: ( len C107 ) in ( dom C107 ) by L18;
L347: S6[ ( 0 ) ] by L9;
L348: (for B87 being (Element of ( NAT )) holds S6[ B87 ]) from NAT_1:sch 1(L347 , L345);
thus L349: thesis by L348 , L331 , L346;
end;
theorem
L350: (for B88 being Relation holds (for B89 , B90 being set holds (B88 reduces B89 , B90 implies ( B88 ~ ) reduces B90 , B89)))
proof
let C109 being Relation;
let C110 , C111 being set;
given C112 being (RedSequence of C109) such that
L351: ( C112 . 1 ) = C110
and
L352: ( C112 . ( len C112 ) ) = C111;

reconsider D13 = ( Rev C112 ) as (RedSequence of ( C109 ~ )) by L154;
take D13;
L353: 1 in ( dom D13 ) by FINSEQ_5:6;
thus L354: ( D13 . 1 ) = ( C112 . ( ( ( len C112 ) - 1 ) + 1 ) ) by L353 , FINSEQ_5:def 3
.= C111 by L352;
L355: (( len D13 ) in ( dom D13 ) & ( len D13 ) = ( len C112 )) by FINSEQ_5:6 , FINSEQ_5:def 3;
thus L356: ( D13 . ( len D13 ) ) = ( C112 . ( ( ( len C112 ) - ( len C112 ) ) + 1 ) ) by L355 , FINSEQ_5:def 3
.= C110 by L351;
end;
L357: (for B91 being Relation holds (for B92 , B93 being set holds (B92 , B93 are_convertible_wrt B91 implies B93 , B92 are_convertible_wrt B91)))
proof
let C113 being Relation;
let C114 , C115 being set;
assume L358: ( C113 \/ ( C113 ~ ) ) reduces C114 , C115;
L359: ( ( C113 \/ ( C113 ~ ) ) ~ ) reduces C115 , C114 by L358 , L350;
L360: ( ( C113 ~ ) \/ ( ( C113 ~ ) ~ ) ) reduces C115 , C114 by L359 , RELAT_1:23;
thus L361: ( C113 \/ ( C113 ~ ) ) reduces C115 , C114 by L360;
end;
theorem
L362: (for B94 being Relation holds (for B95 , B96 being set holds (B94 reduces B95 , B96 implies (B95 , B96 are_convertible_wrt B94 & B96 , B95 are_convertible_wrt B94))))
proof
let C116 being Relation;
let C117 , C118 being set;
given C119 being (RedSequence of C116) such that
L363: (( C119 . 1 ) = C117 & ( C119 . ( len C119 ) ) = C118);

L364: C119 is (RedSequence of ( C116 \/ ( C116 ~ ) ))
proof
thus L365: ( len C119 ) > ( 0 );
let C120 being (Element of ( NAT ));
assume L366: (C120 in ( dom C119 ) & ( C120 + 1 ) in ( dom C119 ));
L367: [ ( C119 . C120 ) , ( C119 . ( C120 + 1 ) ) ] in C116 by L366 , L117;
thus L368: thesis by L367 , XBOOLE_0:def 3;
end;
L369: ( C116 \/ ( C116 ~ ) ) reduces C117 , C118 by L364 , L363 , L175;
thus L370: C117 , C118 are_convertible_wrt C116 by L369 , L177;
thus L371: thesis by L370 , L357;
end;
theorem
L372: (for B97 being Relation holds (for B98 being set holds B98 , B98 are_convertible_wrt B97))
proof
let C121 being Relation;
let C122 being set;
L373: C121 reduces C122 , C122 by L187;
thus L374: thesis by L373 , L362;
end;
theorem
L375: (for B99 , B100 being set holds (B99 , B100 are_convertible_wrt ( {} ) implies B99 = B100))
proof
let C123 , C124 being set;
assume L376: C123 , C124 are_convertible_wrt ( {} );
L377: ( ( {} ) \/ ( (( {} ) qua Relation) ~ ) ) reduces C123 , C124 by L376 , L177;
thus L378: thesis by L377 , L190;
end;
theorem
L379: (for B101 being Relation holds (for B102 , B103 being set holds ((B102 , B103 are_convertible_wrt B101 & (not B102 in ( field B101 ))) implies B102 = B103)))
proof
let C125 being Relation;
let C126 , C127 being set;
L380: (( field C125 ) = ( field ( C125 ~ ) ) & ( field ( C125 \/ ( C125 ~ ) ) ) = ( ( field C125 ) \/ ( field ( C125 ~ ) ) )) by RELAT_1:18 , RELAT_1:21;
assume L381: ( C125 \/ ( C125 ~ ) ) reduces C126 , C127;
thus L382: thesis by L381 , L380 , L198;
end;
theorem
L383: (for B104 being Relation holds (for B105 , B106 being set holds ([ B105 , B106 ] in B104 implies B105 , B106 are_convertible_wrt B104)))
proof
let C128 being Relation;
let C129 , C130 being set;
assume L384: [ C129 , C130 ] in C128;
L385: C128 reduces C129 , C130 by L384 , L209;
thus L386: thesis by L385 , L362;
end;
theorem
L387: (for B107 being Relation holds (for B108 , B109 , B110 being set holds ((B108 , B109 are_convertible_wrt B107 & B109 , B110 are_convertible_wrt B107) implies B108 , B110 are_convertible_wrt B107)))
proof
let C131 being Relation;
let C132 , C133 , C134 being set;
assume L388: (( C131 \/ ( C131 ~ ) ) reduces C132 , C133 & ( C131 \/ ( C131 ~ ) ) reduces C133 , C134);
thus L389: ( C131 \/ ( C131 ~ ) ) reduces C132 , C134 by L388 , L213;
end;
theorem
L390: (for B111 being Relation holds (for B112 , B113 being set holds (B112 , B113 are_convertible_wrt B111 implies B113 , B112 are_convertible_wrt B111))) by L357;
theorem
L391: (for B114 being Relation holds (for B115 , B116 being set holds ((B115 , B116 are_convertible_wrt B114 & B115 <> B116) implies (B115 in ( field B114 ) & B116 in ( field B114 )))))
proof
let C135 being Relation;
let C136 , C137 being set;
L392: ( field ( C135 \/ ( C135 ~ ) ) ) = ( ( field C135 ) \/ ( field ( C135 ~ ) ) ) by RELAT_1:18
.= ( ( field C135 ) \/ ( field C135 ) ) by RELAT_1:21
.= ( field C135 );
assume L393: ( C135 \/ ( C135 ~ ) ) reduces C136 , C137;
thus L394: thesis by L393 , L392 , L250;
end;
definition
let C138 being Relation;
let C139 being set;
pred C139 is_a_normal_form_wrt C138
means
(not (ex B117 being set st [ C139 , B117 ] in C138))
;end;
theorem
L396: (for B118 being Relation holds (for B119 , B120 being set holds ((B119 is_a_normal_form_wrt B118 & B118 reduces B119 , B120) implies B119 = B120)))
proof
let C140 being Relation;
let C141 , C142 being set;
assume L397: (not (ex B121 being set st [ C141 , B121 ] in C140));
assume L398: C140 reduces C141 , C142;
consider C143 being FinSequence such that L399: ( len C143 ) > ( 0 ) and L400: ( C143 . 1 ) = C141 and L401: ( C143 . ( len C143 ) ) = C142 and L402: (for B122 being (Element of ( NAT )) holds ((B122 in ( dom C143 ) & ( B122 + 1 ) in ( dom C143 )) implies [ ( C143 . B122 ) , ( C143 . ( B122 + 1 ) ) ] in C140)) by L398 , L179;
L403:
now
assume L404: ( len C143 ) > 1;
L405: (1 in ( dom C143 ) & ( 1 + 1 ) in ( dom C143 )) by L404 , L18 , L24;
L406: [ C141 , ( C143 . ( 1 + 1 ) ) ] in C140 by L405 , L400 , L402;
thus L407: contradiction by L406 , L397;
end;
L408: ( len C143 ) >= ( ( 0 ) + 1 ) by L399 , NAT_1:13;
thus L409: thesis by L408 , L400 , L401 , L403 , XXREAL_0:1;
end;
theorem
L410: (for B123 being Relation holds (for B124 being set holds ((not B124 in ( field B123 )) implies B124 is_a_normal_form_wrt B123)))
proof
let C144 being Relation;
let C145 being set;
assume that
L411: (not C145 in ( field C144 ));
assume L412: (ex B125 being set st [ C145 , B125 ] in C144);
thus L413: contradiction by L412 , L411 , RELAT_1:15;
end;
definition
let C146 being Relation;
let C147 , C148 being set;
pred C148 is_a_normal_form_of C147 , C146
means
:L414: (C148 is_a_normal_form_wrt C146 & C146 reduces C147 , C148)
;pred C147 , C148 are_convergent_wrt C146
means
:L415: (ex B126 being set st (C146 reduces C147 , B126 & C146 reduces C148 , B126))
;pred C147 , C148 are_divergent_wrt C146
means
:L416: (ex B127 being set st (C146 reduces B127 , C147 & C146 reduces B127 , C148))
;pred C147 , C148 are_convergent<=1_wrt C146
means
:L417: (ex B128 being set st (([ C147 , B128 ] in C146 or C147 = B128) & ([ C148 , B128 ] in C146 or C148 = B128)))
;pred C147 , C148 are_divergent<=1_wrt C146
means
:L418: (ex B129 being set st (([ B129 , C147 ] in C146 or C147 = B129) & ([ B129 , C148 ] in C146 or C148 = B129)))
;end;
theorem
L420: (for B130 being Relation holds (for B131 being set holds ((not B131 in ( field B130 )) implies B131 is_a_normal_form_of B131 , B130)))
proof
let C149 being Relation;
let C150 being set;
assume L421: (not C150 in ( field C149 ));
thus L422: (C150 is_a_normal_form_wrt C149 & C149 reduces C150 , C150) by L421 , L187 , L410;
end;
theorem
L423: (for B132 being Relation holds (for B133 , B134 being set holds (B132 reduces B133 , B134 implies (B133 , B134 are_convergent_wrt B132 & B133 , B134 are_divergent_wrt B132 & B134 , B133 are_convergent_wrt B132 & B134 , B133 are_divergent_wrt B132))))
proof
let C151 being Relation;
let C152 , C153 being set;
L424: (C151 reduces C152 , C152 & C151 reduces C153 , C153) by L187;
thus L425: thesis by L424 , L415 , L416;
end;
theorem
L426: (for B135 being Relation holds (for B136 , B137 being set holds ((B136 , B137 are_convergent_wrt B135 or B136 , B137 are_divergent_wrt B135) implies B136 , B137 are_convertible_wrt B135)))
proof
let C154 being Relation;
let C155 , C156 being set;
assume L427: (C155 , C156 are_convergent_wrt C154 or C155 , C156 are_divergent_wrt C154);
per cases  by L427;
suppose L428: C155 , C156 are_convergent_wrt C154;

consider C157 being set such that L429: (C154 reduces C155 , C157 & C154 reduces C156 , C157) by L428 , L415;
L430: (C155 , C157 are_convertible_wrt C154 & C157 , C156 are_convertible_wrt C154) by L429 , L362;
thus L431: thesis by L430 , L387;
end;
suppose L432: C155 , C156 are_divergent_wrt C154;

consider C158 being set such that L433: (C154 reduces C158 , C155 & C154 reduces C158 , C156) by L432 , L416;
L434: (C158 , C156 are_convertible_wrt C154 & C155 , C158 are_convertible_wrt C154) by L433 , L362;
thus L435: thesis by L434 , L387;
end;
end;
theorem
L437: (for B138 being Relation holds (for B139 being set holds (B139 , B139 are_convergent_wrt B138 & B139 , B139 are_divergent_wrt B138)))
proof
let C159 being Relation;
let C160 being set;
thus L438: ((ex B140 being set st (C159 reduces C160 , B140 & C159 reduces C160 , B140)) & (ex B141 being set st (C159 reduces B141 , C160 & C159 reduces B141 , C160))) by L187;
end;
theorem
L439: (for B142 , B143 being set holds ((B142 , B143 are_convergent_wrt ( {} ) or B142 , B143 are_divergent_wrt ( {} )) implies B142 = B143))
proof
let C161 , C162 being set;
L440:
now
assume L441: C161 , C162 are_convergent_wrt ( {} );
consider C163 being set such that L442: ( {} ) reduces C161 , C163 and L443: ( {} ) reduces C162 , C163 by L441 , L415;
L444: C161 = C163 by L442 , L190;
thus L445: thesis by L444 , L443 , L190;
end;
L446:
now
assume L447: C161 , C162 are_divergent_wrt ( {} );
consider C164 being set such that L448: ( {} ) reduces C164 , C161 and L449: ( {} ) reduces C164 , C162 by L447 , L416;
L450: C161 = C164 by L448 , L190;
thus L451: thesis by L450 , L449 , L190;
end;
assume L452: (C161 , C162 are_convergent_wrt ( {} ) or C161 , C162 are_divergent_wrt ( {} ));
thus L453: thesis by L452 , L440 , L446;
end;
theorem
L454: (for B144 being Relation holds (for B145 , B146 being set holds (B145 , B146 are_convergent_wrt B144 implies B146 , B145 are_convergent_wrt B144)))
proof
let C165 being Relation;
let C166 , C167 being set;
assume L455: (ex B147 being set st (C165 reduces C166 , B147 & C165 reduces C167 , B147));
thus L456: (ex B148 being set st (C165 reduces C167 , B148 & C165 reduces C166 , B148)) by L455;
end;
theorem
L457: (for B149 being Relation holds (for B150 , B151 being set holds (B150 , B151 are_divergent_wrt B149 implies B151 , B150 are_divergent_wrt B149)))
proof
let C168 being Relation;
let C169 , C170 being set;
assume L458: (ex B152 being set st (C168 reduces B152 , C169 & C168 reduces B152 , C170));
thus L459: (ex B153 being set st (C168 reduces B153 , C170 & C168 reduces B153 , C169)) by L458;
end;
theorem
L460: (for B154 being Relation holds (for B155 , B156 , B157 being set holds (((B154 reduces B155 , B156 & B156 , B157 are_convergent_wrt B154) or (B155 , B156 are_convergent_wrt B154 & B154 reduces B157 , B156)) implies B155 , B157 are_convergent_wrt B154)))
proof
let C171 being Relation;
let C172 , C173 , C174 being set;
assume L461: ((C171 reduces C172 , C173 & C173 , C174 are_convergent_wrt C171) or (C172 , C173 are_convergent_wrt C171 & C171 reduces C174 , C173));
per cases  by L461;
suppose L462: (C171 reduces C172 , C173 & C173 , C174 are_convergent_wrt C171);

consider C175 being set such that L463: C171 reduces C173 , C175 and L464: C171 reduces C174 , C175 by L462 , L415;
L465: C171 reduces C172 , C175 by L462 , L463 , L213;
thus L466: thesis by L465 , L464 , L415;
end;
suppose L467: (C172 , C173 are_convergent_wrt C171 & C171 reduces C174 , C173);

consider C176 being set such that L468: C171 reduces C172 , C176 and L469: C171 reduces C173 , C176 by L467 , L415;
L470: C171 reduces C174 , C176 by L467 , L469 , L213;
thus L471: thesis by L470 , L468 , L415;
end;
end;
theorem
L473: (for B158 being Relation holds (for B159 , B160 , B161 being set holds (((B158 reduces B160 , B159 & B160 , B161 are_divergent_wrt B158) or (B159 , B160 are_divergent_wrt B158 & B158 reduces B160 , B161)) implies B159 , B161 are_divergent_wrt B158)))
proof
let C177 being Relation;
let C178 , C179 , C180 being set;
assume L474: ((C177 reduces C179 , C178 & C179 , C180 are_divergent_wrt C177) or (C178 , C179 are_divergent_wrt C177 & C177 reduces C179 , C180));
per cases  by L474;
suppose L475: (C177 reduces C179 , C178 & C179 , C180 are_divergent_wrt C177);

consider C181 being set such that L476: C177 reduces C181 , C179 and L477: C177 reduces C181 , C180 by L475 , L416;
L478: C177 reduces C181 , C178 by L475 , L476 , L213;
thus L479: thesis by L478 , L477 , L416;
end;
suppose L480: (C178 , C179 are_divergent_wrt C177 & C177 reduces C179 , C180);

consider C182 being set such that L481: C177 reduces C182 , C178 and L482: C177 reduces C182 , C179 by L480 , L416;
L483: C177 reduces C182 , C180 by L480 , L482 , L213;
thus L484: thesis by L483 , L481 , L416;
end;
end;
theorem
L486: (for B162 being Relation holds (for B163 , B164 being set holds (B163 , B164 are_convergent<=1_wrt B162 implies B163 , B164 are_convergent_wrt B162)))
proof
let C183 being Relation;
let C184 , C185 being set;
given C186 being set such that
L487: (([ C184 , C186 ] in C183 or C184 = C186) & ([ C185 , C186 ] in C183 or C185 = C186));

take C186;
thus L488: thesis by L487 , L187 , L209;
end;
theorem
L489: (for B165 being Relation holds (for B166 , B167 being set holds (B166 , B167 are_divergent<=1_wrt B165 implies B166 , B167 are_divergent_wrt B165)))
proof
let C187 being Relation;
let C188 , C189 being set;
given C190 being set such that
L490: (([ C190 , C188 ] in C187 or C188 = C190) & ([ C190 , C189 ] in C187 or C189 = C190));

take C190;
thus L491: thesis by L490 , L187 , L209;
end;
definition
let C191 being Relation;
let C192 being set;
pred C192 has_a_normal_form_wrt C191
means
:L492: (ex B168 being set st B168 is_a_normal_form_of C192 , C191)
;end;
theorem
L494: (for B169 being Relation holds (for B170 being set holds ((not B170 in ( field B169 )) implies B170 has_a_normal_form_wrt B169)))
proof
let C193 being Relation;
let C194 being set;
assume L495: (not C194 in ( field C193 ));
thus L496: (ex B171 being set st B171 is_a_normal_form_of C194 , C193) by L495 , L420;
end;
definition
let C195 being Relation;
let C196 being set;
assume that
L497: C196 has_a_normal_form_wrt C195
and
L498: (for B172 , B173 being set holds ((B172 is_a_normal_form_of C196 , C195 & B173 is_a_normal_form_of C196 , C195) implies B172 = B173));
func nf (C196 , C195) means 
:L499: it is_a_normal_form_of C196 , C195;
existence by L497 , L492;
uniqueness by L498;
end;
begin
definition
let C197 being Relation;
attr C197 is  co-well_founded
means
:L501: ( C197 ~ ) is  well_founded;
attr C197 is  weakly-normalizing
means
:L502: (for B174 being set holds (B174 in ( field C197 ) implies B174 has_a_normal_form_wrt C197));
attr C197 is  strongly-normalizing
means
(for B175 being (ManySortedSet of ( NAT )) holds (ex B176 being (Element of ( NAT )) st (not [ ( B175 . B176 ) , ( B175 . ( B176 + 1 ) ) ] in C197)));
end;
definition
let C198 being Relation;
redefine attr C198 is  co-well_founded
means
:L504: (for B177 being set holds ((B177 c= ( field C198 ) & B177 <> ( {} )) implies (ex B178 being set st (B178 in B177 & (for B179 being set holds ((B179 in B177 & B178 <> B179) implies (not [ B178 , B179 ] in C198)))))));
compatibility
proof
L505: ( field C198 ) = ( field ( C198 ~ ) ) by RELAT_1:21;
thus L506:now
assume L507: C198 is  co-well_founded;
L508: ( C198 ~ ) is  well_founded by L507 , L501;
let C199 being set;
assume L509: (C199 c= ( field C198 ) & C199 <> ( {} ));
consider C200 being set such that L510: C200 in C199 and L511: ( ( C198 ~ ) -Seg C200 ) misses C199 by L509 , L505 , L508 , WELLORD1:def 2;
take D14 = C200;
thus L512: D14 in C199 by L510;
let C201 being set;
assume L513: C201 in C199;
L514: (not C201 in ( ( C198 ~ ) -Seg D14 )) by L513 , L511 , XBOOLE_0:3;
L515: (D14 = C201 or (not [ C201 , D14 ] in ( C198 ~ ))) by L514 , WELLORD1:1;
thus L516: (D14 <> C201 implies (not [ D14 , C201 ] in C198)) by L515 , RELAT_1:def 7;
end;
thus L517:now
assume L518: (for B180 being set holds ((B180 c= ( field C198 ) & B180 <> ( {} )) implies (ex B181 being set st (B181 in B180 & (for B182 being set holds ((B182 in B180 & B181 <> B182) implies (not [ B181 , B182 ] in C198)))))));
L519: ( C198 ~ ) is  well_founded
proof
let C202 being set;
assume L520: (C202 c= ( field ( C198 ~ ) ) & C202 <> ( {} ));
consider C203 being set such that L521: C203 in C202 and L522: (for B183 being set holds ((B183 in C202 & C203 <> B183) implies (not [ C203 , B183 ] in C198))) by L520 , L505 , L518;
take C203;
thus L523: C203 in C202 by L521;
L524:
now
assume L525: ( ( ( C198 ~ ) -Seg C203 ) /\ C202 ) is non  empty;
reconsider D15 = ( ( ( C198 ~ ) -Seg C203 ) /\ C202 ) as non  empty set by L525;
set D16 = the (Element of D15);
L526: D16 in ( ( C198 ~ ) -Seg C203 ) by XBOOLE_0:def 4;
L527: (D16 in C202 & D16 <> C203) by L526 , WELLORD1:1 , XBOOLE_0:def 4;
L528: (not [ C203 , D16 ] in C198) by L527 , L522;
L529: [ D16 , C203 ] in ( C198 ~ ) by L526 , WELLORD1:1;
thus L530: contradiction by L529 , L528 , RELAT_1:def 7;
end;
thus L531: thesis by L524 , XBOOLE_0:def 7;
end;
thus L532: C198 is  co-well_founded by L519 , L501;
end;
end;
end;
scheme coNoetherianInduction { F3() -> Relation , P2[set] } : (for B184 being set holds (B184 in ( field F3() ) implies P2[ B184 ]))
provided
L519: F3() is  co-well_founded
and
L520: (for B185 being set holds ((for B186 being set holds (([ B185 , B186 ] in F3() & B185 <> B186) implies P2[ B186 ])) implies P2[ B185 ]))
proof
given C204 being set such that
L521: C204 in ( field F3() )
and
L522: (not P2[ C204 ]);

reconsider D17 = ( field F3() ) as non  empty set by L521;
reconsider D18 = C204 as (Element of D17) by L521;
set D19 = { B187 where B187 is (Element of D17) : (not P2[ B187 ]) };
L523: D18 in D19 by L522;
L524: D19 c= ( field F3() )
proof
let C205 being set;
assume L525: C205 in D19;
L526: (ex B188 being (Element of D17) st (C205 = B188 & (not P2[ B188 ]))) by L525;
thus L527: thesis by L526;
end;
consider C206 being set such that L528: C206 in D19 and L529: (for B189 being set holds ((B189 in D19 & C206 <> B189) implies (not [ C206 , B189 ] in F3()))) by L524 , L519 , L523 , L504;
L530:
now
let C207 being set;
assume that
L531: ([ C206 , C207 ] in F3() & C206 <> C207)
and
L532: (not P2[ C207 ]);
L533: ((not C207 in D19) & C207 in D17) by L529 , L531 , RELAT_1:15;
thus L534: contradiction by L533 , L532;
end;
L535: (ex B190 being (Element of D17) st (C206 = B190 & (not P2[ B190 ]))) by L528;
thus L536: thesis by L535 , L520 , L530;
end;
registration
cluster  strongly-normalizing ->  irreflexive  co-well_founded for Relation;
coherence
proof
defpred S7[ set ] means (not contradiction);
let C208 being Relation;
assume that
L537: (for B191 being (ManySortedSet of ( NAT )) holds (ex B192 being (Element of ( NAT )) st (not [ ( B191 . B192 ) , ( B191 . ( B192 + 1 ) ) ] in C208)));
thus L538: C208 is  irreflexive
proof
given C209 being set such that
L539: C209 in ( field C208 )
and
L540: [ C209 , C209 ] in C208;

L541: ( dom ( ( NAT ) --> C209 ) ) = ( NAT ) by FUNCOP_1:13;
reconsider D20 = ( ( NAT ) --> C209 ) as (ManySortedSet of ( NAT )) by L541 , PARTFUN1:def 2 , RELAT_1:def 18;
consider C210 being (Element of ( NAT )) such that L542: (not [ ( D20 . C210 ) , ( D20 . ( C210 + 1 ) ) ] in C208) by L537;
L543: ( D20 . C210 ) = C209 by FUNCOP_1:7;
thus L544: contradiction by L543 , L540 , L542 , FUNCOP_1:7;
end;

defpred S8[ set , set ] means [ $1 , $2 ] in C208;
let C211 being set;
assume that
L545: C211 c= ( field C208 )
and
L546: C211 <> ( {} )
and
L547: (for B193 being set holds (B193 in C211 implies (ex B194 being set st (B194 in C211 & B193 <> B194 & [ B193 , B194 ] in C208))));
reconsider D21 = C211 as non  empty set by L546;
L548:
now
let C212 being set;
assume L549: C212 in D21;
L550: (ex B195 being set st (B195 in D21 & C212 <> B195 & [ C212 , B195 ] in C208)) by L549 , L547;
thus L551: (ex B196 being set st (B196 in D21 & [ C212 , B196 ] in C208)) by L550;
end;
L552: (for B197 being set holds ((B197 in D21 & S7[ B197 ]) implies (ex B198 being set st (B198 in D21 & S8[ B197 , B198 ] & S7[ B198 ])))) by L548;
set D22 = the (Element of D21);
L553: (D22 in D21 & S7[ D22 ]);
consider C213 being Function such that L554: (( dom C213 ) = ( NAT ) & ( rng C213 ) c= D21 & ( C213 . ( 0 ) ) = D22) and L555: (for B199 being (Element of ( NAT )) holds (S8[ ( C213 . B199 ) , ( C213 . ( B199 + 1 ) ) ] & S7[ ( C213 . B199 ) ])) from TREES_2:sch 5(L553 , L552);
L556: C213 is (ManySortedSet of ( NAT )) by L554 , PARTFUN1:def 2 , RELAT_1:def 18;
thus L557: thesis by L556 , L537 , L555;
end;
cluster  co-well_founded  irreflexive ->  strongly-normalizing for Relation;
coherence
proof
let C214 being Relation;
assume that
L558: (for B200 being set holds ((B200 c= ( field C214 ) & B200 <> ( {} )) implies (ex B201 being set st (B201 in B200 & (for B202 being set holds ((B202 in B200 & B201 <> B202) implies (not [ B201 , B202 ] in C214)))))));
assume L559: (for B203 being set holds (B203 in ( field C214 ) implies (not [ B203 , B203 ] in C214)));
let C215 being (ManySortedSet of ( NAT ));
assume L560: (for B204 being (Element of ( NAT )) holds [ ( C215 . B204 ) , ( C215 . ( B204 + 1 ) ) ] in C214);
L561: ( rng C215 ) c= ( field C214 )
proof
let C216 being set;
assume L562: C216 in ( rng C215 );
consider C217 being set such that L563: C217 in ( dom C215 ) and L564: C216 = ( C215 . C217 ) by L562 , FUNCT_1:def 3;
reconsider D23 = C217 as (Element of ( NAT )) by L563 , PARTFUN1:def 2;
L565: [ C216 , ( C215 . ( D23 + 1 ) ) ] in C214 by L560 , L564;
thus L566: thesis by L565 , RELAT_1:15;
end;
L567: ( dom C215 ) = ( NAT ) by PARTFUN1:def 2;
L568: ( C215 . ( 0 ) ) in ( rng C215 ) by L567 , FUNCT_1:def 3;
consider C218 being set such that L569: C218 in ( rng C215 ) and L570: (for B205 being set holds ((B205 in ( rng C215 ) & C218 <> B205) implies (not [ C218 , B205 ] in C214))) by L568 , L558 , L561;
consider C219 being set such that L571: C219 in ( dom C215 ) and L572: C218 = ( C215 . C219 ) by L569 , FUNCT_1:def 3;
reconsider D24 = C219 as (Element of ( NAT )) by L571 , PARTFUN1:def 2;
L573: ( C215 . ( D24 + 1 ) ) in ( rng C215 ) by L567 , FUNCT_1:def 3;
L574: [ C218 , ( C215 . ( D24 + 1 ) ) ] in C214 by L560 , L572;
L575: C218 <> ( C215 . ( D24 + 1 ) ) by L574 , L559 , L561 , L569;
thus L576: contradiction by L575 , L570 , L574 , L573;
end;
end;
registration
cluster  empty ->  weakly-normalizing  strongly-normalizing for Relation;
coherence
proof
let C220 being Relation;
assume L578: C220 is  empty;
thus L579: C220 is  weakly-normalizing
proof
let C221 being set;
thus L580: thesis by L578 , RELAT_1:40;
end;

thus L581: C220 is  strongly-normalizing
proof
let C222 being (ManySortedSet of ( NAT ));
take ( 0 );
thus L582: thesis by L578;
end;

end;
end;
theorem
L583: (for B206 being  co-well_founded Relation holds (for B207 being Relation holds (B207 c= B206 implies B207 is  co-well_founded)))
proof
let C223 being  co-well_founded Relation;
let C224 being Relation;
assume L584: C224 c= C223;
let C225 being set;
assume that
L585: C225 c= ( field C224 )
and
L586: C225 <> ( {} );
L587: ( field C224 ) c= ( field C223 ) by L584 , RELAT_1:16;
L588: C225 c= ( field C223 ) by L587 , L585 , XBOOLE_1:1;
consider C226 being set such that L589: C226 in C225 and L590: (for B208 being set holds ((B208 in C225 & C226 <> B208) implies (not [ C226 , B208 ] in C223))) by L588 , L586 , L504;
take C226;
thus L591: C226 in C225 by L589;
let C227 being set;
assume L592: (C227 in C225 & C226 <> C227);
thus L593: thesis by L592 , L584 , L590;
end;
registration
cluster  strongly-normalizing ->  weakly-normalizing for Relation;
coherence
proof
let C228 being Relation;
assume that
L594: C228 is  strongly-normalizing;
let C229 being set;
assume L595: C229 in ( field C228 );
reconsider D25 = ( field C228 ) as non  empty set by L595;
set D26 = { B209 where B209 is (Element of D25) : C228 reduces C229 , B209 };
L596: D26 c= ( field C228 )
proof
let C230 being set;
assume L597: C230 in D26;
L598: (ex B210 being (Element of D25) st (C230 = B210 & C228 reduces C229 , B210)) by L597;
thus L599: thesis by L598;
end;
L600: C228 reduces C229 , C229 by L187;
L601: C229 in D26 by L600 , L595;
consider C231 being set such that L602: C231 in D26 and L603: (for B211 being set holds ((B211 in D26 & C231 <> B211) implies (not [ C231 , B211 ] in C228))) by L601 , L594 , L596 , L504;
take C231;
L604: (ex B212 being (Element of D25) st (C231 = B212 & C228 reduces C229 , B212)) by L602;
thus L605:now
L606: C228 is_irreflexive_in ( field C228 ) by L594 , RELAT_2:def 10;
L607: (not [ C231 , C231 ] in C228) by L606 , L596 , L602 , RELAT_2:def 2;
given C232 being set such that
L608: [ C231 , C232 ] in C228;

L609: C228 reduces C231 , C232 by L608 , L209;
L610: C228 reduces C229 , C232 by L609 , L604 , L213;
L611: C232 in D25 by L608 , RELAT_1:15;
L612: C232 in D26 by L611 , L610;
thus L613: contradiction by L612 , L603 , L608 , L607;
end;
thus L614: thesis by L604;
end;
end;
begin
definition
let C233 , C234 being Relation;
pred C233 commutes-weakly_with C234
means
(for B213 , B214 , B215 being set holds (([ B213 , B214 ] in C233 & [ B213 , B215 ] in C234) implies (ex B216 being set st (C234 reduces B214 , B216 & C233 reduces B215 , B216))))
;symmetry
proof
let C235 , C236 being Relation;
assume that
L616: (for B217 , B218 , B219 being set holds (([ B217 , B218 ] in C235 & [ B217 , B219 ] in C236) implies (ex B220 being set st (C236 reduces B218 , B220 & C235 reduces B219 , B220))));
let C237 , C238 , C239 being set;
assume L617: ([ C237 , C238 ] in C236 & [ C237 , C239 ] in C235);
L618: (ex B221 being set st (C236 reduces C239 , B221 & C235 reduces C238 , B221)) by L617 , L616;
thus L619: thesis by L618;
end;
pred C233 commutes_with C234
means
:L620: (for B222 , B223 , B224 being set holds ((C233 reduces B222 , B223 & C234 reduces B222 , B224) implies (ex B225 being set st (C234 reduces B223 , B225 & C233 reduces B224 , B225))))
;symmetry
proof
let C240 , C241 being Relation;
assume that
L621: (for B226 , B227 , B228 being set holds ((C240 reduces B226 , B227 & C241 reduces B226 , B228) implies (ex B229 being set st (C241 reduces B227 , B229 & C240 reduces B228 , B229))));
let C242 , C243 , C244 being set;
assume L622: (C241 reduces C242 , C243 & C240 reduces C242 , C244);
L623: (ex B230 being set st (C241 reduces C244 , B230 & C240 reduces C243 , B230)) by L622 , L621;
thus L624: thesis by L623;
end;
end;
theorem
L626: (for B231 , B232 being Relation holds (B231 commutes_with B232 implies B231 commutes-weakly_with B232))
proof
let C245 , C246 being Relation;
assume L627: (for B233 , B234 , B235 being set holds ((C245 reduces B233 , B234 & C246 reduces B233 , B235) implies (ex B236 being set st (C246 reduces B234 , B236 & C245 reduces B235 , B236))));
let C247 , C248 , C249 being set;
assume L628: ([ C247 , C248 ] in C245 & [ C247 , C249 ] in C246);
L629: (C245 reduces C247 , C248 & C246 reduces C247 , C249) by L628 , L209;
thus L630: thesis by L629 , L627;
end;
definition
let C250 being Relation;
attr C250 is  with_UN_property
means
:L631: (for B237 , B238 being set holds ((B237 is_a_normal_form_wrt C250 & B238 is_a_normal_form_wrt C250 & B237 , B238 are_convertible_wrt C250) implies B237 = B238));
attr C250 is  with_NF_property
means
(for B239 , B240 being set holds ((B239 is_a_normal_form_wrt C250 & B239 , B240 are_convertible_wrt C250) implies C250 reduces B240 , B239));
attr C250 is  subcommutative
means
:L632: (for B241 , B242 , B243 being set holds (([ B241 , B242 ] in C250 & [ B241 , B243 ] in C250) implies B242 , B243 are_convergent<=1_wrt C250));
attr C250 is  confluent
means
:L633: (for B244 , B245 being set holds (B244 , B245 are_divergent_wrt C250 implies B244 , B245 are_convergent_wrt C250));
attr C250 is  with_Church-Rosser_property
means
:L634: (for B246 , B247 being set holds (B246 , B247 are_convertible_wrt C250 implies B246 , B247 are_convergent_wrt C250));
attr C250 is  locally-confluent
means
:L635: (for B248 , B249 , B250 being set holds (([ B248 , B249 ] in C250 & [ B248 , B250 ] in C250) implies B249 , B250 are_convergent_wrt C250));
end;
theorem
L637: (for B251 being Relation holds (B251 is  subcommutative implies (for B252 , B253 , B254 being set holds ((B251 reduces B252 , B253 & [ B252 , B254 ] in B251) implies B253 , B254 are_convergent_wrt B251))))
proof
let C251 being Relation;
assume L638: C251 is  subcommutative;
let C252 , C253 , C254 being set;
given C255 being (RedSequence of C251) such that
L639: ( C255 . 1 ) = C252
and
L640: ( C255 . ( len C255 ) ) = C253;

defpred S9[ (Element of ( NAT )) ] means ($1 in ( dom C255 ) implies (ex B255 being set st (([ ( C255 . $1 ) , B255 ] in C251 or ( C255 . $1 ) = B255) & C251 reduces C254 , B255)));
assume L641: [ C252 , C254 ] in C251;
L642:
now
let C256 being (Element of ( NAT ));
assume that
L643: (C256 in ( dom C255 ) implies S9[ C256 ])
and
L644: ( C256 + 1 ) in ( dom C255 );
per cases ;
suppose L645: C256 = ( 0 );

L646: C251 reduces C254 , C254 by L187;
thus L647: S9[ ( C256 + 1 ) ] by L646 , L639 , L641 , L645;
end;
suppose L648: C256 > ( 0 );

L649: C256 < ( len C255 ) by L644 , L14;
consider C257 being set such that L650: ([ ( C255 . C256 ) , C257 ] in C251 or ( C255 . C256 ) = C257) and L651: C251 reduces C254 , C257 by L649 , L643 , L648 , L18;
L652: C256 in ( dom C255 ) by L648 , L649 , L18;
L653: [ ( C255 . C256 ) , ( C255 . ( C256 + 1 ) ) ] in C251 by L652 , L644 , L117;
L654:
now
assume L655: [ ( C255 . C256 ) , C257 ] in C251;
L656: ( C255 . ( C256 + 1 ) ) , C257 are_convergent<=1_wrt C251 by L655 , L638 , L653 , L632;
consider C258 being set such that L657: ([ ( C255 . ( C256 + 1 ) ) , C258 ] in C251 or ( C255 . ( C256 + 1 ) ) = C258) and L658: ([ C257 , C258 ] in C251 or C257 = C258) by L656 , L417;
take D27 = C258;
thus L659: ([ ( C255 . ( C256 + 1 ) ) , D27 ] in C251 or ( C255 . ( C256 + 1 ) ) = D27) by L657;
L660: C251 reduces C257 , D27 by L658 , L187 , L209;
thus L661: C251 reduces C254 , D27 by L660 , L651 , L213;
end;
L662:
now
assume L663: ( C255 . C256 ) = C257;
L664: C251 reduces C257 , ( C255 . ( C256 + 1 ) ) by L663 , L653 , L209;
thus L665: C251 reduces C254 , ( C255 . ( C256 + 1 ) ) by L664 , L651 , L213;
end;
thus L666: S9[ ( C256 + 1 ) ] by L662 , L650 , L654;
end;
end;
L668: (for B256 being (Element of ( NAT )) holds (S9[ B256 ] implies S9[ ( B256 + 1 ) ])) by L642;
L669: ( len C255 ) in ( dom C255 ) by FINSEQ_5:6;
L670: S9[ ( 0 ) ] by L9;
L671: (for B257 being (Element of ( NAT )) holds S9[ B257 ]) from NAT_1:sch 1(L670 , L668);
consider C259 being set such that L672: (([ C253 , C259 ] in C251 or C253 = C259) & C251 reduces C254 , C259) by L671 , L640 , L669;
take C259;
thus L673: thesis by L672 , L187 , L209;
end;
theorem
L674: (for B258 being Relation holds (B258 is  confluent iff B258 commutes_with B258))
proof
let C260 being Relation;
thus L675:now
assume L676: C260 is  confluent;
thus L677: C260 commutes_with C260
proof
let C261 , C262 , C263 being set;
assume L678: (C260 reduces C261 , C262 & C260 reduces C261 , C263);
L679: C262 , C263 are_divergent_wrt C260 by L678 , L416;
L680: C262 , C263 are_convergent_wrt C260 by L679 , L676 , L633;
thus L681: thesis by L680 , L415;
end;

end;
assume L678: (for B259 , B260 , B261 being set holds ((C260 reduces B259 , B260 & C260 reduces B259 , B261) implies (ex B262 being set st (C260 reduces B260 , B262 & C260 reduces B261 , B262))));
let C264 , C265 being set;
assume L679: (ex B263 being set st (C260 reduces B263 , C264 & C260 reduces B263 , C265));
thus L680: (ex B264 being set st (C260 reduces C264 , B264 & C260 reduces C265 , B264)) by L679 , L678;
end;
theorem
L681: (for B265 being Relation holds (B265 is  confluent iff (for B266 , B267 , B268 being set holds ((B265 reduces B266 , B267 & [ B266 , B268 ] in B265) implies B267 , B268 are_convergent_wrt B265))))
proof
let C266 being Relation;
thus L682:now
assume L683: C266 is  confluent;
let C267 , C268 , C269 being set;
assume that
L684: C266 reduces C267 , C268
and
L685: [ C267 , C269 ] in C266;
L686: C266 reduces C267 , C269 by L685 , L209;
L687: C268 , C269 are_divergent_wrt C266 by L686 , L684 , L416;
thus L688: C268 , C269 are_convergent_wrt C266 by L687 , L683 , L633;
end;
assume L689: (for B269 , B270 , B271 being set holds ((C266 reduces B269 , B270 & [ B269 , B271 ] in C266) implies B270 , B271 are_convergent_wrt C266));
let C270 , C271 being set;
given C272 being set such that
L690: C266 reduces C272 , C270
and
L691: C266 reduces C272 , C271;

consider C273 being (RedSequence of C266) such that L692: ( C273 . 1 ) = C272 and L693: ( C273 . ( len C273 ) ) = C270 by L690 , L175;
consider C274 being (RedSequence of C266) such that L694: ( C274 . 1 ) = C272 and L695: ( C274 . ( len C274 ) ) = C271 by L691 , L175;
defpred S10[ (Element of ( NAT )) , (Element of ( NAT )) ] means ( C273 . $1 ) , ( C274 . $2 ) are_convergent_wrt C266;
defpred S11[ (Element of ( NAT )) ] means ($1 in ( dom C273 ) implies (for B272 being (Element of ( NAT )) holds (B272 in ( dom C274 ) implies S10[ $1 , B272 ])));
L696: (for B273 being (Element of ( NAT )) holds (S11[ B273 ] implies S11[ ( B273 + 1 ) ]))
proof
let C275 being (Element of ( NAT ));
assume that
L697: (C275 in ( dom C273 ) implies (for B274 being (Element of ( NAT )) holds (B274 in ( dom C274 ) implies S10[ C275 , B274 ])))
and
L698: ( C275 + 1 ) in ( dom C273 );
defpred S12[ (Element of ( NAT )) ] means ($1 in ( dom C274 ) implies S10[ ( C275 + 1 ) , $1 ]);
L699: (for B275 being (Element of ( NAT )) holds (S12[ B275 ] implies S12[ ( B275 + 1 ) ]))
proof
L700: 1 in ( dom C273 ) by FINSEQ_5:6;
L701: C266 reduces C272 , ( C273 . ( C275 + 1 ) ) by L700 , L692 , L698 , L230 , NAT_1:11;
let C276 being (Element of ( NAT ));
assume that
L702: (C276 in ( dom C274 ) implies S10[ ( C275 + 1 ) , C276 ])
and
L703: ( C276 + 1 ) in ( dom C274 );
per cases ;
suppose L704: C276 = ( 0 );

thus L705: thesis by L704 , L694 , L701 , L423;
end;
suppose L706: C276 > ( 0 );

L707: C276 < ( len C274 ) by L703 , L14;
consider C277 being set such that L708: C266 reduces ( C273 . ( C275 + 1 ) ) , C277 and L709: C266 reduces ( C274 . C276 ) , C277 by L707 , L702 , L706 , L415 , L18;
L710: C276 in ( dom C274 ) by L706 , L707 , L18;
L711: [ ( C274 . C276 ) , ( C274 . ( C276 + 1 ) ) ] in C266 by L710 , L703 , L117;
L712: C277 , ( C274 . ( C276 + 1 ) ) are_convergent_wrt C266 by L711 , L689 , L709;
thus L713: thesis by L712 , L708 , L460;
end;
end;
L715: S12[ ( 0 ) ] by L9;
thus L716: (for B276 being (Element of ( NAT )) holds S12[ B276 ]) from NAT_1:sch 1(L715 , L699);
end;
L717: (( len C273 ) in ( dom C273 ) & ( len C274 ) in ( dom C274 )) by FINSEQ_5:6;
L718: S11[ ( 0 ) ] by L9;
L719: (for B277 being (Element of ( NAT )) holds S11[ B277 ]) from NAT_1:sch 1(L718 , L696);
thus L720: thesis by L719 , L693 , L695 , L717;
end;
theorem
L721: (for B278 being Relation holds (B278 is  locally-confluent iff B278 commutes-weakly_with B278))
proof
let C278 being Relation;
thus L722:now
assume L723: C278 is  locally-confluent;
thus L724: C278 commutes-weakly_with C278
proof
let C279 , C280 , C281 being set;
assume L725: ([ C279 , C280 ] in C278 & [ C279 , C281 ] in C278);
L726: C280 , C281 are_convergent_wrt C278 by L725 , L723 , L635;
thus L727: thesis by L726 , L415;
end;

end;
assume L725: (for B279 , B280 , B281 being set holds (([ B279 , B280 ] in C278 & [ B279 , B281 ] in C278) implies (ex B282 being set st (C278 reduces B280 , B282 & C278 reduces B281 , B282))));
let C282 , C283 , C284 being set;
assume L726: ([ C282 , C283 ] in C278 & [ C282 , C284 ] in C278);
thus L727: (ex B283 being set st (C278 reduces C283 , B283 & C278 reduces C284 , B283)) by L726 , L725;
end;
registration
cluster  with_Church-Rosser_property ->  confluent for Relation;
coherence
proof
let C285 being Relation;
assume L728: (for B284 , B285 being set holds (B284 , B285 are_convertible_wrt C285 implies B284 , B285 are_convergent_wrt C285));
let C286 , C287 being set;
assume L729: C286 , C287 are_divergent_wrt C285;
L730: C286 , C287 are_convertible_wrt C285 by L729 , L426;
thus L731: thesis by L730 , L728;
end;
cluster  confluent ->  locally-confluent  with_Church-Rosser_property for Relation;
coherence
proof
let C288 being Relation;
assume L732: (for B286 , B287 being set holds (B286 , B287 are_divergent_wrt C288 implies B286 , B287 are_convergent_wrt C288));
thus L733:now
let C289 , C290 , C291 being set;
assume L734: ([ C289 , C290 ] in C288 & [ C289 , C291 ] in C288);
L735: (C288 reduces C289 , C290 & C288 reduces C289 , C291) by L734 , L209;
L736: C290 , C291 are_divergent_wrt C288 by L735 , L416;
thus L737: C290 , C291 are_convergent_wrt C288 by L736 , L732;
end;
let C292 , C293 being set;
given C294 being (RedSequence of ( C288 \/ ( C288 ~ ) )) such that
L738: ( C294 . 1 ) = C292
and
L739: ( C294 . ( len C294 ) ) = C293;

defpred S13[ (Element of ( NAT )) ] means ($1 in ( dom C294 ) implies C292 , ( C294 . $1 ) are_convergent_wrt C288);
L740:
now
let C295 being (Element of ( NAT ));
assume that
L741: (C295 in ( dom C294 ) implies C292 , ( C294 . C295 ) are_convergent_wrt C288)
and
L742: ( C295 + 1 ) in ( dom C294 );
per cases ;
suppose L743: C295 in ( dom C294 );

consider C296 being set such that L744: C288 reduces C292 , C296 and L745: C288 reduces ( C294 . C295 ) , C296 by L743 , L741 , L415;
L746: [ ( C294 . C295 ) , ( C294 . ( C295 + 1 ) ) ] in ( C288 \/ ( C288 ~ ) ) by L742 , L743 , L117;
L747: ([ ( C294 . C295 ) , ( C294 . ( C295 + 1 ) ) ] in C288 or [ ( C294 . C295 ) , ( C294 . ( C295 + 1 ) ) ] in ( C288 ~ )) by L746 , XBOOLE_0:def 3;
L748: ([ ( C294 . C295 ) , ( C294 . ( C295 + 1 ) ) ] in C288 or [ ( C294 . ( C295 + 1 ) ) , ( C294 . C295 ) ] in C288) by L747 , RELAT_1:def 7;
L749: (C288 reduces ( C294 . C295 ) , ( C294 . ( C295 + 1 ) ) or C288 reduces ( C294 . ( C295 + 1 ) ) , ( C294 . C295 )) by L748 , L209;
L750: (C296 , ( C294 . ( C295 + 1 ) ) are_divergent_wrt C288 or C288 reduces ( C294 . ( C295 + 1 ) ) , C296) by L749 , L745 , L416 , L213;
L751: (C296 , ( C294 . ( C295 + 1 ) ) are_convergent_wrt C288 or C292 , ( C294 . ( C295 + 1 ) ) are_convergent_wrt C288) by L750 , L732 , L744 , L415;
thus L752: C292 , ( C294 . ( C295 + 1 ) ) are_convergent_wrt C288 by L751 , L744 , L460;
end;
suppose L753: (not C295 in ( dom C294 ));

L754: (C295 < ( ( 0 ) + 1 ) or (C295 > ( len C294 ) & ( C295 + 1 ) <= ( len C294 ))) by L753 , L742 , L9 , L18;
L755: C295 = ( 0 ) by L754 , NAT_1:13;
thus L756: C292 , ( C294 . ( C295 + 1 ) ) are_convergent_wrt C288 by L755 , L738 , L437;
end;
end;
L758: (for B288 being (Element of ( NAT )) holds (S13[ B288 ] implies S13[ ( B288 + 1 ) ])) by L740;
L759: ( len C294 ) in ( dom C294 ) by FINSEQ_5:6;
L760: S13[ ( 0 ) ] by L9;
L761: (for B289 being (Element of ( NAT )) holds S13[ B289 ]) from NAT_1:sch 1(L760 , L758);
thus L762: thesis by L761 , L739 , L759;
end;
cluster  subcommutative ->  confluent for Relation;
coherence
proof
let C297 being Relation;
assume L763: C297 is  subcommutative;
L764: (for B290 , B291 , B292 being set holds ((C297 reduces B290 , B291 & [ B290 , B292 ] in C297) implies B291 , B292 are_convergent_wrt C297)) by L763 , L637;
thus L765: thesis by L764 , L681;
end;
cluster  with_Church-Rosser_property ->  with_NF_property for Relation;
coherence
proof
let C298 being Relation;
assume L766: C298 is  with_Church-Rosser_property;
let C299 , C300 being set;
assume L767: C299 is_a_normal_form_wrt C298;
assume L768: C299 , C300 are_convertible_wrt C298;
L769: C299 , C300 are_convergent_wrt C298 by L768 , L766 , L634;
L770: (ex B293 being set st (C298 reduces C299 , B293 & C298 reduces C300 , B293)) by L769 , L415;
thus L771: thesis by L770 , L767 , L396;
end;
cluster  with_NF_property ->  with_UN_property for Relation;
coherence
proof
let C301 being Relation;
assume that
L772: (for B294 , B295 being set holds ((B294 is_a_normal_form_wrt C301 & B294 , B295 are_convertible_wrt C301) implies C301 reduces B295 , B294));
let C302 , C303 being set;
assume L773: (C302 is_a_normal_form_wrt C301 & C303 is_a_normal_form_wrt C301 & C302 , C303 are_convertible_wrt C301);
thus L774: thesis by L773 , L772 , L396;
end;
cluster  with_UN_property  weakly-normalizing ->  with_Church-Rosser_property for Relation;
coherence
proof
let C304 being Relation;
assume that
L775: (for B296 , B297 being set holds ((B296 is_a_normal_form_wrt C304 & B297 is_a_normal_form_wrt C304 & B296 , B297 are_convertible_wrt C304) implies B296 = B297))
and
L776: (for B298 being set holds (B298 in ( field C304 ) implies B298 has_a_normal_form_wrt C304));
let C305 , C306 being set;
assume L777: ( C304 \/ ( C304 ~ ) ) reduces C305 , C306;
L778: ( field ( C304 \/ ( C304 ~ ) ) ) = ( ( field C304 ) \/ ( field ( C304 ~ ) ) ) by RELAT_1:18
.= ( ( field C304 ) \/ ( field C304 ) ) by RELAT_1:21
.= ( field C304 );
per cases ;
suppose L779: C305 = C306;

thus L780: thesis by L779 , L437;
end;
suppose L781: C305 <> C306;

L782: C306 in ( field C304 ) by L781 , L777 , L778 , L250;
L783: C306 has_a_normal_form_wrt C304 by L782 , L776;
consider C307 being set such that L784: C307 is_a_normal_form_of C306 , C304 by L783 , L492;
L785: C305 in ( field C304 ) by L777 , L778 , L781 , L250;
L786: C305 has_a_normal_form_wrt C304 by L785 , L776;
consider C308 being set such that L787: C308 is_a_normal_form_of C305 , C304 by L786 , L492;
L788: C308 is_a_normal_form_wrt C304 by L787 , L414;
L789: C305 , C306 are_convertible_wrt C304 by L777 , L177;
L790: C304 reduces C305 , C308 by L787 , L414;
L791: C308 , C305 are_convertible_wrt C304 by L790 , L362;
L792: C308 , C306 are_convertible_wrt C304 by L791 , L789 , L387;
L793: C307 is_a_normal_form_wrt C304 by L784 , L414;
L794: C304 reduces C306 , C307 by L784 , L414;
L795: C306 , C307 are_convertible_wrt C304 by L794 , L362;
L796: C308 = C307 by L795 , L775 , L788 , L793 , L792 , L387;
thus L797: thesis by L796 , L790 , L794 , L415;
end;
end;
end;
registration
cluster  empty ->  subcommutative for Relation;
coherence
proof
let C309 being Relation;
assume L800: C309 is  empty;
let C310 being set;
thus L801: thesis by L800;
end;
end;
theorem
L803: (for B299 being  with_UN_property Relation holds (for B300 , B301 , B302 being set holds ((B301 is_a_normal_form_of B300 , B299 & B302 is_a_normal_form_of B300 , B299) implies B301 = B302)))
proof
let C311 being  with_UN_property Relation;
let C312 , C313 , C314 being set;
assume that
L804: C313 is_a_normal_form_wrt C311
and
L805: C311 reduces C312 , C313
and
L806: C314 is_a_normal_form_wrt C311
and
L807: C311 reduces C312 , C314;
L808: C313 , C314 are_divergent_wrt C311 by L805 , L807 , L416;
L809: C313 , C314 are_convertible_wrt C311 by L808 , L426;
thus L810: thesis by L809 , L804 , L806 , L631;
end;
theorem
L811: (for B303 being  with_UN_property  weakly-normalizing Relation holds (for B304 being set holds ( nf (B304 , B303) ) is_a_normal_form_of B304 , B303))
proof
let C315 being  with_UN_property  weakly-normalizing Relation;
let C316 being set;
L812: (C316 in ( field C315 ) or (not C316 in ( field C315 )));
L813: C316 has_a_normal_form_wrt C315 by L812 , L502 , L494;
L814: (for B305 , B306 being set holds ((B305 is_a_normal_form_of C316 , C315 & B306 is_a_normal_form_of C316 , C315) implies B305 = B306)) by L803;
thus L815: thesis by L814 , L813 , L499;
end;
theorem
L816: (for B307 being  with_UN_property  weakly-normalizing Relation holds (for B308 , B309 being set holds (B308 , B309 are_convertible_wrt B307 implies ( nf (B308 , B307) ) = ( nf (B309 , B307) ))))
proof
let C317 being  with_UN_property  weakly-normalizing Relation;
let C318 , C319 being set;
L817: ( nf (C319 , C317) ) is_a_normal_form_of C319 , C317 by L811;
L818: ( nf (C319 , C317) ) is_a_normal_form_wrt C317 by L817 , L414;
L819: C317 reduces C319 , ( nf (C319 , C317) ) by L817 , L414;
L820: C319 , ( nf (C319 , C317) ) are_convertible_wrt C317 by L819 , L362;
L821: ( nf (C318 , C317) ) is_a_normal_form_of C318 , C317 by L811;
L822: C317 reduces C318 , ( nf (C318 , C317) ) by L821 , L414;
L823: ( nf (C318 , C317) ) , C318 are_convertible_wrt C317 by L822 , L362;
assume L824: C318 , C319 are_convertible_wrt C317;
L825: ( nf (C318 , C317) ) , C319 are_convertible_wrt C317 by L824 , L823 , L387;
L826: ( nf (C318 , C317) ) , ( nf (C319 , C317) ) are_convertible_wrt C317 by L825 , L820 , L387;
L827: ( nf (C318 , C317) ) is_a_normal_form_wrt C317 by L821 , L414;
thus L828: thesis by L827 , L818 , L826 , L631;
end;
registration
cluster  strongly-normalizing  locally-confluent ->  confluent for Relation;
coherence
proof
let C320 being Relation;
assume L829: C320 is  strongly-normalizing;
defpred S14[ set ] means (for B310 , B311 being set holds ((C320 reduces $1 , B310 & C320 reduces $1 , B311) implies B310 , B311 are_convergent_wrt C320));
assume L830: (for B312 , B313 , B314 being set holds (([ B312 , B313 ] in C320 & [ B312 , B314 ] in C320) implies B313 , B314 are_convergent_wrt C320));
L831: (for B315 being set holds ((for B316 being set holds (([ B315 , B316 ] in C320 & B315 <> B316) implies S14[ B316 ])) implies S14[ B315 ]))
proof
let C321 being set;
assume L832: (for B317 being set holds (([ C321 , B317 ] in C320 & C321 <> B317) implies S14[ B317 ]));
let C322 , C323 being set;
assume that
L833: C320 reduces C321 , C322
and
L834: C320 reduces C321 , C323;
consider C324 being (RedSequence of C320) such that L835: C321 = ( C324 . 1 ) and L836: C322 = ( C324 . ( len C324 ) ) by L833 , L175;
L837: ( len C324 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
consider C325 being (RedSequence of C320) such that L838: C321 = ( C325 . 1 ) and L839: C323 = ( C325 . ( len C325 ) ) by L834 , L175;
L840: ( len C325 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
per cases ;
suppose L841: ( len C324 ) = 1;

thus L842: thesis by L841 , L834 , L835 , L836 , L423;
end;
suppose L843: ( len C325 ) = 1;

thus L844: thesis by L843 , L833 , L838 , L839 , L423;
end;
suppose L845: (( len C324 ) <> 1 & ( len C325 ) <> 1);

L846: ( len C325 ) > 1 by L845 , L840 , XXREAL_0:1;
L847: ( 1 + 1 ) <= ( len C325 ) by L846 , NAT_1:13;
L848: ( 1 + 1 ) in ( dom C325 ) by L847 , L18;
L849: ( len C325 ) in ( dom C325 ) by FINSEQ_5:6;
L850: C320 reduces ( C325 . 2 ) , C323 by L849 , L839 , L847 , L848 , L230;
L851: ( len C324 ) > 1 by L837 , L845 , XXREAL_0:1;
L852: ( 1 + 1 ) <= ( len C324 ) by L851 , NAT_1:13;
L853: ( 1 + 1 ) in ( dom C324 ) by L852 , L18;
L854: ( len C324 ) in ( dom C324 ) by FINSEQ_5:6;
L855: C320 reduces ( C324 . 2 ) , C322 by L854 , L836 , L852 , L853 , L230;
L856: 1 in ( dom C324 ) by L837 , L18;
L857: [ C321 , ( C324 . 2 ) ] in C320 by L856 , L835 , L853 , L117;
L858: C321 in ( field C320 ) by L857 , RELAT_1:15;
L859: 1 in ( dom C325 ) by L840 , L18;
L860: [ C321 , ( C325 . 2 ) ] in C320 by L859 , L838 , L848 , L117;
L861: ( C324 . 2 ) , ( C325 . 2 ) are_convergent_wrt C320 by L860 , L830 , L857;
consider C326 being set such that L862: C320 reduces ( C324 . 2 ) , C326 and L863: C320 reduces ( C325 . 2 ) , C326 by L861 , L415;
L864: C320 is_irreflexive_in ( field C320 ) by L829 , RELAT_2:def 10;
L865: C321 <> ( C325 . 2 ) by L864 , L860 , L858 , RELAT_2:def 2;
L866: C321 <> ( C324 . 2 ) by L857 , L858 , L864 , RELAT_2:def 2;
L867: C322 , C326 are_convergent_wrt C320 by L866 , L832 , L857 , L862 , L855;
consider C327 being set such that L868: C320 reduces C322 , C327 and L869: C320 reduces C326 , C327 by L867 , L415;
L870: C320 reduces ( C325 . 2 ) , C327 by L863 , L869 , L213;
L871: C327 , C323 are_convergent_wrt C320 by L870 , L832 , L860 , L865 , L850;
thus L872: thesis by L871 , L868 , L460;
end;
end;
L874: C320 is  co-well_founded by L829;
L875: (for B318 being set holds (B318 in ( field C320 ) implies S14[ B318 ])) from coNoetherianInduction(L874 , L831);
given C328 , C329 being set such that
L876: C328 , C329 are_divergent_wrt C320
and
L877: (not C328 , C329 are_convergent_wrt C320);

consider C330 being set such that L878: (C320 reduces C330 , C328 & C320 reduces C330 , C329) by L876 , L416;
L879: (C328 <> C330 or C329 <> C330) by L877 , L437;
L880: C330 in ( field C320 ) by L879 , L878 , L250;
thus L881: thesis by L880 , L877 , L878 , L875;
end;
end;
definition
let C331 being Relation;
attr C331 is  complete
means
:L883: C331 is  confluent  strongly-normalizing;
end;
registration
cluster  complete ->  confluent  strongly-normalizing for Relation;
coherence by L883;
cluster  confluent  strongly-normalizing ->  complete for Relation;
coherence by L883;
end;
registration
cluster  complete for non  empty non  empty non  empty non  empty Relation;
existence
proof
reconsider D28 = { [ ( 0 ) , 1 ] } as non  empty Relation;
take D28;
L886: ( field D28 ) = { ( 0 ) , 1 } by RELAT_1:17;
thus L887: D28 is  confluent
proof
let C332 , C333 being set;
given C334 being set such that
L888: D28 reduces C334 , C332
and
L889: D28 reduces C334 , C333;

per cases ;
suppose L890: C332 = C333;

thus L891: thesis by L890 , L437;
end;
suppose L892: C332 <> C333;

L893: (C332 <> C334 or C333 <> C334) by L892;
L894: C334 in ( field D28 ) by L893 , L888 , L889 , L250;
L895: C332 in { ( 0 ) , 1 } by L894 , L886 , L888 , L250;
L896: (C332 = ( 0 ) or C332 = 1) by L895 , TARSKI:def 2;
L897: C333 in { ( 0 ) , 1 } by L886 , L889 , L894 , L250;
L898: (C333 = ( 0 ) or C333 = 1) by L897 , TARSKI:def 2;
L899: [ ( 0 ) , 1 ] in D28 by TARSKI:def 1;
L900: D28 reduces ( 0 ) , 1 by L899 , L209;
L901: D28 reduces 1 , 1 by L187;
thus L902: thesis by L901 , L896 , L898 , L900 , L415;
end;
end;

L904: D28 is  co-well_founded
proof
let C335 being set;
assume that
L905: C335 c= ( field D28 )
and
L906: C335 <> ( {} );
reconsider D29 = C335 as non  empty set by L906;
set D30 = the (Element of D29);
per cases ;
suppose L907: 1 in C335;

take 1;
thus L908: 1 in C335 by L907;
let C336 being set;
assume that
L909: C336 in C335
and
L910: 1 <> C336;
L911: [ ( 0 ) , 1 ] <> [ 1 , C336 ] by XTUPLE_0:1;
thus L912: thesis by L911 , TARSKI:def 1;
end;
suppose L913: ((not 1 in C335) & D30 in C335);

take ( 0 );
thus L914: ( 0 ) in C335 by L886 , L905 , L913 , TARSKI:def 2;
let C337 being set;
assume L915: C337 in C335;
thus L916: thesis by L915 , L886 , L905 , L913 , TARSKI:def 2;
end;
end;
L918: D28 is  irreflexive
proof
let C338 being set;
assume that
L919: C338 in ( field D28 )
and
L920: [ C338 , C338 ] in D28;
L921: [ C338 , C338 ] = [ ( 0 ) , 1 ] by L920 , TARSKI:def 1;
L922: C338 = ( 0 ) by L921 , XTUPLE_0:1;
thus L923: contradiction by L922 , L921 , XTUPLE_0:1;
end;
thus L924: thesis by L918 , L904;
end;
end;
theorem
L926: (for B319 , B320 being  with_Church-Rosser_property Relation holds (B319 commutes_with B320 implies ( B319 \/ B320 ) is  with_Church-Rosser_property))
proof
let C339 , C340 being  with_Church-Rosser_property Relation;
assume L927: C339 commutes_with C340;
L928: ( C339 \/ C340 ) is  confluent
proof
let C341 , C342 being set;
given C343 being set such that
L929: ( C339 \/ C340 ) reduces C343 , C341
and
L930: ( C339 \/ C340 ) reduces C343 , C342;

consider C344 being (RedSequence of ( C339 \/ C340 )) such that L931: C343 = ( C344 . 1 ) and L932: C341 = ( C344 . ( len C344 ) ) by L929 , L175;
defpred S15[ (Element of ( NAT )) ] means ($1 in ( dom C344 ) implies ( C344 . $1 ) , C342 are_convergent_wrt ( C339 \/ C340 ));
L933:
now
let C345 being (Element of ( NAT ));
assume that
L934: (C345 in ( dom C344 ) implies ( C344 . C345 ) , C342 are_convergent_wrt ( C339 \/ C340 ))
and
L935: ( C345 + 1 ) in ( dom C344 );
per cases ;
suppose L936: C345 = ( 0 );

thus L937: ( C344 . ( C345 + 1 ) ) , C342 are_convergent_wrt ( C339 \/ C340 ) by L936 , L930 , L931 , L423;
end;
suppose L938: C345 > ( 0 );

L939: C345 < ( len C344 ) by L935 , L14;
consider C346 being set such that L940: ( C339 \/ C340 ) reduces ( C344 . C345 ) , C346 and L941: ( C339 \/ C340 ) reduces C342 , C346 by L939 , L934 , L938 , L415 , L18;
consider C347 being (RedSequence of ( C339 \/ C340 )) such that L942: ( C344 . C345 ) = ( C347 . 1 ) and L943: C346 = ( C347 . ( len C347 ) ) by L940 , L175;
defpred S16[ (Element of ( NAT )) ] means ($1 in ( dom C347 ) implies (ex B321 being set st (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , B321 & (C339 reduces ( C347 . $1 ) , B321 or C340 reduces ( C347 . $1 ) , B321))));
L944: C345 in ( dom C344 ) by L938 , L939 , L18;
L945: [ ( C344 . C345 ) , ( C344 . ( C345 + 1 ) ) ] in ( C339 \/ C340 ) by L944 , L935 , L117;
L946: ([ ( C344 . C345 ) , ( C344 . ( C345 + 1 ) ) ] in C339 or [ ( C344 . C345 ) , ( C344 . ( C345 + 1 ) ) ] in C340) by L945 , XBOOLE_0:def 3;
L947:
now
let C348 being (Element of ( NAT ));
assume that
L948: (C348 in ( dom C347 ) implies (ex B322 being set st (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , B322 & (C339 reduces ( C347 . C348 ) , B322 or C340 reduces ( C347 . C348 ) , B322))))
and
L949: ( C348 + 1 ) in ( dom C347 );
L950: C348 < ( len C347 ) by L949 , L14;
per cases ;
suppose L951: C348 = ( 0 );

L952: ( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , ( C344 . ( C345 + 1 ) ) by L187;
L953: (C339 reduces ( C347 . ( C348 + 1 ) ) , ( C344 . ( C345 + 1 ) ) or C340 reduces ( C347 . ( C348 + 1 ) ) , ( C344 . ( C345 + 1 ) )) by L942 , L946 , L951 , L209;
thus L954: (ex B323 being set st (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , B323 & (C339 reduces ( C347 . ( C348 + 1 ) ) , B323 or C340 reduces ( C347 . ( C348 + 1 ) ) , B323))) by L953 , L952;
end;
suppose L955: C348 > ( 0 );

consider C349 being set such that L956: ( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , C349 and L957: (C339 reduces ( C347 . C348 ) , C349 or C340 reduces ( C347 . C348 ) , C349) by L955 , L948 , L950 , L18;
L958:
now
assume L959: (C339 reduces ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) & C340 reduces ( C347 . C348 ) , C349);
consider C350 being set such that L960: C340 reduces ( C347 . ( C348 + 1 ) ) , C350 and L961: C339 reduces C349 , C350 by L959 , L927 , L620;
take D31 = C350;
L962: ( C339 \/ C340 ) reduces C349 , D31 by L961 , L323 , XBOOLE_1:7;
thus L963: (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , D31 & (C339 reduces ( C347 . ( C348 + 1 ) ) , D31 or C340 reduces ( C347 . ( C348 + 1 ) ) , D31)) by L962 , L956 , L960 , L213;
end;
L964:
now
assume L965: (C340 reduces ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) & C340 reduces ( C347 . C348 ) , C349);
L966: C349 , ( C347 . ( C348 + 1 ) ) are_divergent_wrt C340 by L965 , L416;
L967: C349 , ( C347 . ( C348 + 1 ) ) are_convergent_wrt C340 by L966 , L633;
consider C351 being set such that L968: C340 reduces C349 , C351 and L969: C340 reduces ( C347 . ( C348 + 1 ) ) , C351 by L967 , L415;
take D32 = C351;
L970: ( C339 \/ C340 ) reduces C349 , D32 by L968 , L323 , XBOOLE_1:7;
thus L971: (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , D32 & (C339 reduces ( C347 . ( C348 + 1 ) ) , D32 or C340 reduces ( C347 . ( C348 + 1 ) ) , D32)) by L970 , L956 , L969 , L213;
end;
L972:
now
assume L973: (C339 reduces ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) & C339 reduces ( C347 . C348 ) , C349);
L974: C349 , ( C347 . ( C348 + 1 ) ) are_divergent_wrt C339 by L973 , L416;
L975: C349 , ( C347 . ( C348 + 1 ) ) are_convergent_wrt C339 by L974 , L633;
consider C352 being set such that L976: C339 reduces C349 , C352 and L977: C339 reduces ( C347 . ( C348 + 1 ) ) , C352 by L975 , L415;
take D33 = C352;
L978: ( C339 \/ C340 ) reduces C349 , D33 by L976 , L323 , XBOOLE_1:7;
thus L979: (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , D33 & (C339 reduces ( C347 . ( C348 + 1 ) ) , D33 or C340 reduces ( C347 . ( C348 + 1 ) ) , D33)) by L978 , L956 , L977 , L213;
end;
L980:
now
assume L981: (C340 reduces ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) & C339 reduces ( C347 . C348 ) , C349);
consider C353 being set such that L982: C339 reduces ( C347 . ( C348 + 1 ) ) , C353 and L983: C340 reduces C349 , C353 by L981 , L927 , L620;
take D34 = C353;
L984: ( C339 \/ C340 ) reduces C349 , D34 by L983 , L323 , XBOOLE_1:7;
thus L985: (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , D34 & (C339 reduces ( C347 . ( C348 + 1 ) ) , D34 or C340 reduces ( C347 . ( C348 + 1 ) ) , D34)) by L984 , L956 , L982 , L213;
end;
L986: C348 in ( dom C347 ) by L950 , L955 , L18;
L987: [ ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) ] in ( C339 \/ C340 ) by L986 , L949 , L117;
L988: ([ ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) ] in C339 or [ ( C347 . C348 ) , ( C347 . ( C348 + 1 ) ) ] in C340) by L987 , XBOOLE_0:def 3;
thus L989: (ex B324 being set st (( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , B324 & (C339 reduces ( C347 . ( C348 + 1 ) ) , B324 or C340 reduces ( C347 . ( C348 + 1 ) ) , B324))) by L988 , L957 , L972 , L964 , L958 , L980 , L209;
end;
end;
L991: (for B325 being (Element of ( NAT )) holds (S16[ B325 ] implies S16[ ( B325 + 1 ) ])) by L947;
L992: S16[ ( 0 ) ] by L9;
L993: (for B326 being (Element of ( NAT )) holds S16[ B326 ]) from NAT_1:sch 1(L992 , L991);
thus L994: ( C344 . ( C345 + 1 ) ) , C342 are_convergent_wrt ( C339 \/ C340 )
proof
L995: ( len C347 ) in ( dom C347 ) by FINSEQ_5:6;
consider C354 being set such that L996: ( C339 \/ C340 ) reduces ( C344 . ( C345 + 1 ) ) , C354 and L997: (C339 reduces C346 , C354 or C340 reduces C346 , C354) by L995 , L943 , L993;
take C354;
L998: ( C339 \/ C340 ) reduces C346 , C354 by L997 , L323 , XBOOLE_1:7;
thus L999: thesis by L998 , L941 , L996 , L213;
end;

end;
end;
L996: (for B327 being (Element of ( NAT )) holds (S15[ B327 ] implies S15[ ( B327 + 1 ) ])) by L933;
L997: ( len C344 ) in ( dom C344 ) by FINSEQ_5:6;
L998: S15[ ( 0 ) ] by L9;
L999: (for B328 being (Element of ( NAT )) holds S15[ B328 ]) from NAT_1:sch 1(L998 , L996);
thus L1000: thesis by L999 , L932 , L997;
end;
thus L1001: thesis by L928;
end;
theorem
L1002: (for B329 being Relation holds (B329 is  confluent iff ( B329 [*] ) is  locally-confluent))
proof
let C355 being Relation;
thus L1003:now
assume L1004: C355 is  confluent;
thus L1005: ( C355 [*] ) is  locally-confluent
proof
let C356 , C357 , C358 being set;
assume L1006: ([ C356 , C357 ] in ( C355 [*] ) & [ C356 , C358 ] in ( C355 [*] ));
L1007: (C355 reduces C356 , C357 & C355 reduces C356 , C358) by L1006 , L277;
L1008: C357 , C358 are_divergent_wrt C355 by L1007 , L416;
L1009: C357 , C358 are_convergent_wrt C355 by L1008 , L1004 , L633;
consider C359 being set such that L1010: (C355 reduces C357 , C359 & C355 reduces C358 , C359) by L1009 , L415;
take C359;
thus L1011: thesis by L1010 , L301;
end;

end;
assume L1006: (for B330 , B331 , B332 being set holds (([ B330 , B331 ] in ( C355 [*] ) & [ B330 , B332 ] in ( C355 [*] )) implies B331 , B332 are_convergent_wrt ( C355 [*] )));
let C360 , C361 being set;
given C362 being set such that
L1007: C355 reduces C362 , C360
and
L1008: C355 reduces C362 , C361;

L1009: ([ C362 , C361 ] in ( C355 [*] ) or C362 = C361) by L1008 , L277;
L1010: ([ C362 , C360 ] in ( C355 [*] ) or C362 = C360) by L1007 , L277;
L1011: (C360 , C361 are_convergent_wrt ( C355 [*] ) or ( C355 [*] ) reduces C360 , C361 or ( C355 [*] ) reduces C361 , C360) by L1010 , L1006 , L1009 , L209 , L437;
L1012: C360 , C361 are_convergent_wrt ( C355 [*] ) by L1011 , L423;
consider C363 being set such that L1013: (( C355 [*] ) reduces C360 , C363 & ( C355 [*] ) reduces C361 , C363) by L1012 , L415;
take C363;
thus L1014: thesis by L1013 , L301;
end;
theorem
L1015: (for B333 being Relation holds (B333 is  confluent iff ( B333 [*] ) is  subcommutative))
proof
let C364 being Relation;
thus L1016:now
assume L1017: C364 is  confluent;
thus L1018: ( C364 [*] ) is  subcommutative
proof
let C365 , C366 , C367 being set;
assume L1019: ([ C365 , C366 ] in ( C364 [*] ) & [ C365 , C367 ] in ( C364 [*] ));
L1020: (C364 reduces C365 , C366 & C364 reduces C365 , C367) by L1019 , L277;
L1021: C366 , C367 are_divergent_wrt C364 by L1020 , L416;
L1022: C366 , C367 are_convergent_wrt C364 by L1021 , L1017 , L633;
consider C368 being set such that L1023: (C364 reduces C366 , C368 & C364 reduces C367 , C368) by L1022 , L415;
take C368;
thus L1024: thesis by L1023 , L277;
end;

end;
assume L1019: (for B334 , B335 , B336 being set holds (([ B334 , B335 ] in ( C364 [*] ) & [ B334 , B336 ] in ( C364 [*] )) implies B335 , B336 are_convergent<=1_wrt ( C364 [*] )));
let C369 , C370 being set;
given C371 being set such that
L1020: C364 reduces C371 , C369
and
L1021: C364 reduces C371 , C370;

L1022: ([ C371 , C370 ] in ( C364 [*] ) or C371 = C370) by L1021 , L277;
L1023: ([ C371 , C369 ] in ( C364 [*] ) or C371 = C369) by L1020 , L277;
L1024: C369 , C370 are_convergent<=1_wrt ( C364 [*] ) by L1023 , L1019 , L1022 , L417;
L1025: C369 , C370 are_convergent_wrt ( C364 [*] ) by L1024 , L486;
consider C372 being set such that L1026: (( C364 [*] ) reduces C369 , C372 & ( C364 [*] ) reduces C370 , C372) by L1025 , L415;
take C372;
thus L1027: thesis by L1026 , L301;
end;
begin
definition
let C373 , C374 being Relation;
pred C373 , C374 are_equivalent 
means
(for B337 , B338 being set holds (B337 , B338 are_convertible_wrt C373 iff B337 , B338 are_convertible_wrt C374))
;symmetry
;
end;
definition
let C375 being Relation;
let C376 , C377 being set;
pred C376 , C377 are_critical_wrt C375
means
:L1029: (C376 , C377 are_divergent<=1_wrt C375 & (not C376 , C377 are_convergent_wrt C375))
;end;
theorem
L1031: (for B339 being Relation holds (for B340 , B341 being set holds (B340 , B341 are_critical_wrt B339 implies B340 , B341 are_convertible_wrt B339)))
proof
let C378 being Relation;
let C379 , C380 being set;
assume that
L1032: C379 , C380 are_divergent<=1_wrt C378
and
L1033: (not C379 , C380 are_convergent_wrt C378);
thus L1034: thesis by L1032 , L426 , L489;
end;
theorem
L1035: (for B342 being Relation holds ((not (ex B343 , B344 being set st B343 , B344 are_critical_wrt B342)) implies B342 is  locally-confluent))
proof
let C381 being Relation;
assume that
L1036: (not (ex B345 , B346 being set st B345 , B346 are_critical_wrt C381));
let C382 , C383 , C384 being set;
assume L1037: ([ C382 , C383 ] in C381 & [ C382 , C384 ] in C381);
L1038: C383 , C384 are_divergent<=1_wrt C381 by L1037 , L418;
L1039: (not C383 , C384 are_critical_wrt C381) by L1036;
thus L1040: thesis by L1039 , L1038 , L1029;
end;
theorem
L1041: (for B347 , B348 being Relation holds ((for B349 , B350 being set holds ([ B349 , B350 ] in B348 implies B349 , B350 are_critical_wrt B347)) implies B347 , ( B347 \/ B348 ) are_equivalent ))
proof
let C385 , C386 being Relation;
assume L1042: (for B351 , B352 being set holds ([ B351 , B352 ] in C386 implies B351 , B352 are_critical_wrt C385));
let C387 , C388 being set;
L1043: C385 c= ( C385 \/ C386 ) by XBOOLE_1:7;
L1044: ( C385 ~ ) c= ( ( C385 \/ C386 ) ~ )
proof
let C389 , C390 being set;
assume L1045: [ C389 , C390 ] in ( C385 ~ );
L1046: [ C390 , C389 ] in C385 by L1045 , RELAT_1:def 7;
thus L1047: thesis by L1046 , L1043 , RELAT_1:def 7;
end;
thus L1048:now
assume L1049: C387 , C388 are_convertible_wrt C385;
L1050: ( C385 \/ ( C385 ~ ) ) reduces C387 , C388 by L1049 , L177;
L1051: ( ( C385 \/ C386 ) \/ ( ( C385 \/ C386 ) ~ ) ) reduces C387 , C388 by L1050 , L1043 , L1044 , L323 , XBOOLE_1:13;
thus L1052: C387 , C388 are_convertible_wrt ( C385 \/ C386 ) by L1051 , L177;
end;
given C391 being (RedSequence of ( ( C385 \/ C386 ) \/ ( ( C385 \/ C386 ) ~ ) )) such that
L1053: C387 = ( C391 . 1 )
and
L1054: C388 = ( C391 . ( len C391 ) );

defpred S17[ (Element of ( NAT )) ] means ($1 in ( dom C391 ) implies C387 , ( C391 . $1 ) are_convertible_wrt C385);
L1055:
now
let C392 being (Element of ( NAT ));
assume that
L1056: (C392 in ( dom C391 ) implies C387 , ( C391 . C392 ) are_convertible_wrt C385)
and
L1057: ( C392 + 1 ) in ( dom C391 );
L1058: C392 < ( len C391 ) by L1057 , L14;
per cases ;
suppose L1059: C392 = ( 0 );

thus L1060: C387 , ( C391 . ( C392 + 1 ) ) are_convertible_wrt C385 by L1059 , L1053 , L372;
end;
suppose L1061: C392 > ( 0 );

L1062: C392 in ( dom C391 ) by L1061 , L1058 , L18;
L1063: [ ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) ] in ( ( C385 \/ C386 ) \/ ( ( C385 \/ C386 ) ~ ) ) by L1062 , L1057 , L117;
L1064: ([ ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) ] in ( C385 \/ C386 ) or [ ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) ] in ( ( C385 \/ C386 ) ~ )) by L1063 , XBOOLE_0:def 3;
L1065: ([ ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) ] in ( C385 \/ C386 ) or [ ( C391 . ( C392 + 1 ) ) , ( C391 . C392 ) ] in ( C385 \/ C386 )) by L1064 , RELAT_1:def 7;
L1066: ([ ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) ] in C385 or [ ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) ] in C386 or [ ( C391 . ( C392 + 1 ) ) , ( C391 . C392 ) ] in C385 or [ ( C391 . ( C392 + 1 ) ) , ( C391 . C392 ) ] in C386) by L1065 , XBOOLE_0:def 3;
L1067: (( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) are_convertible_wrt C385 or ( C391 . ( C392 + 1 ) ) , ( C391 . C392 ) are_convertible_wrt C385) by L1066 , L1042 , L383 , L1031;
L1068: ( C391 . C392 ) , ( C391 . ( C392 + 1 ) ) are_convertible_wrt C385 by L1067 , L357;
thus L1069: C387 , ( C391 . ( C392 + 1 ) ) are_convertible_wrt C385 by L1068 , L1056 , L1058 , L1061 , L18 , L387;
end;
end;
L1071: (for B353 being (Element of ( NAT )) holds (S17[ B353 ] implies S17[ ( B353 + 1 ) ])) by L1055;
L1072: ( len C391 ) in ( dom C391 ) by FINSEQ_5:6;
L1073: S17[ ( 0 ) ] by L9;
L1074: (for B354 being (Element of ( NAT )) holds S17[ B354 ]) from NAT_1:sch 1(L1073 , L1071);
thus L1075: thesis by L1074 , L1054 , L1072;
end;
theorem
L1076: (for B355 being Relation holds (ex B356 being  complete Relation st (( field B356 ) c= ( field B355 ) & (for B357 , B358 being set holds (B357 , B358 are_convertible_wrt B355 iff B357 , B358 are_convergent_wrt B356)))))
proof
let C393 being Relation;
per cases ;
suppose L1077: C393 = ( {} );

take D35 = ( {} );
thus L1078: ( field D35 ) c= ( field C393 ) by XBOOLE_1:2;
let C394 , C395 being set;
L1079: (C394 , C395 are_convertible_wrt C393 iff C394 = C395) by L1077 , L372 , L375;
thus L1080: thesis by L1079 , L437 , L439;
end;
suppose L1081: C393 <> ( {} );

reconsider D36 = C393 as non  empty Relation by L1081;
set D37 = the (Element of D36);
consider C396 , C397 being set such that L1082: D37 = [ C396 , C397 ] by RELAT_1:def 1;
defpred S18[ set , set ] means $1 , $2 are_convertible_wrt C393;
L1083: (for B359 , B360 being set holds (S18[ B359 , B360 ] implies S18[ B360 , B359 ])) by L357;
L1084: (for B361 , B362 , B363 being set holds ((S18[ B361 , B362 ] & S18[ B362 , B363 ]) implies S18[ B361 , B363 ])) by L387;
L1085: (for R4 being set holds (R4 in ( field C393 ) implies S18[ R4 , R4 ])) by L372;
consider C398 being (Equivalence_Relation of ( field C393 )) such that L1086: (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in C398 iff (R4 in ( field C393 ) & R5 in ( field C393 ) & S18[ R4 , R5 ])))) from EQREL_1:sch 1(L1085 , L1083 , L1084);
L1087: ((for B364 being set holds (B364 in ( Class C398 ) implies B364 <> ( {} ))) & (for B365 , B366 being set holds ((B365 in ( Class C398 ) & B366 in ( Class C398 ) & B365 <> B366) implies B365 misses B366))) by EQREL_1:def 4;
L1088: C396 in ( field C393 ) by L1082 , RELAT_1:15;
L1089: ( Class (C398 , C396) ) in ( Class C398 ) by L1088 , EQREL_1:def 3;
consider C399 being set such that L1090: (for B367 being set holds (B367 in ( Class C398 ) implies (ex R4 being set st ( C399 /\ B367 ) = { R4 }))) by L1089 , L1087 , WELLORD2:18;
defpred S19[ set , set ] means ($1 <> $2 & $1 , $2 are_convertible_wrt C393 & $2 in C399);
consider C400 being Relation such that L1091: (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in C400 iff (R4 in ( field C393 ) & R5 in ( field C393 ) & S19[ R4 , R5 ])))) from RELAT_1:sch 1;
L1092: C400 is  locally-confluent
proof
let C401 , C402 , C403 being set;
assume that
L1093: [ C401 , C402 ] in C400
and
L1094: [ C401 , C403 ] in C400;
L1095: C401 in ( field C393 ) by L1091 , L1093;
L1096: ( Class (C398 , C401) ) in ( Class C398 ) by L1095 , EQREL_1:def 3;
consider R4 being set such that L1097: ( C399 /\ ( Class (C398 , C401) ) ) = { R4 } by L1096 , L1090;
L1098: (C403 in ( field C393 ) & C401 , C403 are_convertible_wrt C393) by L1091 , L1094;
L1099: [ C401 , C403 ] in C398 by L1098 , L1086 , L1095;
L1100: [ C403 , C401 ] in C398 by L1099 , EQREL_1:6;
L1101: C403 in ( Class (C398 , C401) ) by L1100 , EQREL_1:19;
L1102: C403 in C399 by L1091 , L1094;
L1103: C403 in { R4 } by L1102 , L1101 , L1097 , XBOOLE_0:def 4;
L1104: C403 = R4 by L1103 , TARSKI:def 1;
L1105: (C402 in ( field C393 ) & C401 , C402 are_convertible_wrt C393) by L1091 , L1093;
L1106: [ C401 , C402 ] in C398 by L1105 , L1086 , L1095;
L1107: [ C402 , C401 ] in C398 by L1106 , EQREL_1:6;
L1108: C402 in ( Class (C398 , C401) ) by L1107 , EQREL_1:19;
take C402;
L1109: C402 in C399 by L1091 , L1093;
L1110: C402 in { R4 } by L1109 , L1108 , L1097 , XBOOLE_0:def 4;
L1111: C402 = R4 by L1110 , TARSKI:def 1;
thus L1112: thesis by L1111 , L1104 , L187;
end;
L1113: (for R4 being set holds (for R5 being set holds (C400 reduces R4 , R5 implies R4 , R5 are_convertible_wrt C393)))
proof
let R4 being set;
let R5 being set;
given C404 being (RedSequence of C400) such that
L1114: R4 = ( C404 . 1 )
and
L1115: R5 = ( C404 . ( len C404 ) );

defpred S20[ (Element of ( NAT )) ] means ($1 in ( dom C404 ) implies R4 , ( C404 . $1 ) are_convertible_wrt C393);
L1116:
now
let C405 being (Element of ( NAT ));
assume that
L1117: (C405 in ( dom C404 ) implies R4 , ( C404 . C405 ) are_convertible_wrt C393)
and
L1118: ( C405 + 1 ) in ( dom C404 );
L1119: C405 < ( len C404 ) by L1118 , L14;
per cases ;
suppose L1120: C405 = ( 0 );

thus L1121: R4 , ( C404 . ( C405 + 1 ) ) are_convertible_wrt C393 by L1120 , L1114 , L372;
end;
suppose L1122: C405 > ( 0 );

L1123: C405 in ( dom C404 ) by L1122 , L1119 , L18;
L1124: [ ( C404 . C405 ) , ( C404 . ( C405 + 1 ) ) ] in C400 by L1123 , L1118 , L117;
L1125: ( C404 . C405 ) , ( C404 . ( C405 + 1 ) ) are_convertible_wrt C393 by L1124 , L1091;
thus L1126: R4 , ( C404 . ( C405 + 1 ) ) are_convertible_wrt C393 by L1125 , L1117 , L1119 , L1122 , L18 , L387;
end;
end;
L1128: (for B368 being (Element of ( NAT )) holds (S20[ B368 ] implies S20[ ( B368 + 1 ) ])) by L1116;
L1129: ( len C404 ) in ( dom C404 ) by FINSEQ_5:6;
L1130: S20[ ( 0 ) ] by L9;
L1131: (for B369 being (Element of ( NAT )) holds S20[ B369 ]) from NAT_1:sch 1(L1130 , L1128);
thus L1132: thesis by L1131 , L1115 , L1129;
end;
L1133: C400 is  strongly-normalizing
proof
let C406 being (ManySortedSet of ( NAT ));
per cases ;
suppose L1134: (not [ ( C406 . ( 0 ) ) , ( C406 . ( ( 0 ) + 1 ) ) ] in C400);

thus L1135: thesis by L1134;
end;
suppose L1136: [ ( C406 . ( 0 ) ) , ( C406 . ( ( 0 ) + 1 ) ) ] in C400;

take D38 = ( ( 0 ) + 1 );
L1137: ( C406 . D38 ) in C399 by L1091 , L1136;
assume L1138: [ ( C406 . D38 ) , ( C406 . ( D38 + 1 ) ) ] in C400;
L1139: ( C406 . D38 ) in ( field C393 ) by L1138 , L1091;
L1140: ( Class (C398 , ( C406 . D38 )) ) in ( Class C398 ) by L1139 , EQREL_1:def 3;
consider R4 being set such that L1141: ( C399 /\ ( Class (C398 , ( C406 . D38 )) ) ) = { R4 } by L1140 , L1090;
L1142: (( C406 . ( D38 + 1 ) ) in ( field C393 ) & ( C406 . D38 ) , ( C406 . ( D38 + 1 ) ) are_convertible_wrt C393) by L1091 , L1138;
L1143: [ ( C406 . D38 ) , ( C406 . ( D38 + 1 ) ) ] in C398 by L1142 , L1086 , L1139;
L1144: [ ( C406 . ( D38 + 1 ) ) , ( C406 . D38 ) ] in C398 by L1143 , EQREL_1:6;
L1145: ( C406 . ( D38 + 1 ) ) in ( Class (C398 , ( C406 . D38 )) ) by L1144 , EQREL_1:19;
L1146: ( C406 . D38 ) in ( Class (C398 , ( C406 . D38 )) ) by L1139 , EQREL_1:20;
L1147: ( C406 . D38 ) in ( C399 /\ ( Class (C398 , ( C406 . D38 )) ) ) by L1146 , L1137 , XBOOLE_0:def 4;
L1148: ( C406 . D38 ) = R4 by L1147 , L1141 , TARSKI:def 1;
L1149: ( C406 . ( D38 + 1 ) ) in C399 by L1091 , L1138;
L1150: ( C406 . ( D38 + 1 ) ) in ( C399 /\ ( Class (C398 , ( C406 . D38 )) ) ) by L1149 , L1145 , XBOOLE_0:def 4;
L1151: ( C406 . ( D38 + 1 ) ) = R4 by L1150 , L1141 , TARSKI:def 1;
thus L1152: contradiction by L1151 , L1091 , L1138 , L1148;
end;
end;
reconsider D39 = C400 as  strongly-normalizing  locally-confluent Relation by L1133 , L1092;
take D39;
thus L1154: ( field D39 ) c= ( field C393 )
proof
let R4 being set;
assume L1155: R4 in ( field D39 );
L1156: (R4 in ( dom D39 ) or R4 in ( rng D39 )) by L1155 , XBOOLE_0:def 3;
L1157: ((ex R5 being set st [ R4 , R5 ] in D39) or (ex R5 being set st [ R5 , R4 ] in D39)) by L1156 , XTUPLE_0:def 12 , XTUPLE_0:def 13;
thus L1158: thesis by L1157 , L1091;
end;

let C407 , C408 being set;
thus L1159: thesis
proof
per cases ;
suppose L1160: C407 = C408;

thus L1161: thesis by L1160 , L372 , L437;
end;
suppose L1162: C407 <> C408;

thus L1163:now
assume L1164: C407 , C408 are_convertible_wrt C393;
L1165: C408 in ( field C393 ) by L1164 , L1162 , L391;
L1166: ( Class (C398 , C408) ) in ( Class C398 ) by L1165 , EQREL_1:def 3;
consider R4 being set such that L1167: ( C399 /\ ( Class (C398 , C408) ) ) = { R4 } by L1166 , L1090;
L1168: C407 in ( field C393 ) by L1162 , L1164 , L391;
L1169: [ C407 , C408 ] in C398 by L1168 , L1086 , L1164 , L1165;
thus L1170: C407 , C408 are_convergent_wrt D39
proof
take R4;
L1171: R4 in { R4 } by TARSKI:def 1;
L1172: R4 in C399 by L1171 , L1167 , XBOOLE_0:def 4;
L1173: R4 in ( Class (C398 , C408) ) by L1167 , L1171 , XBOOLE_0:def 4;
L1174: [ R4 , C408 ] in C398 by L1173 , EQREL_1:19;
L1175: [ C408 , R4 ] in C398 by L1174 , EQREL_1:6;
L1176: C408 , R4 are_convertible_wrt C393 by L1175 , L1086;
L1177: (C408 = R4 or [ C408 , R4 ] in D39) by L1176 , L1091 , L1165 , L1167 , L1171 , L1172;
L1178: C407 in ( Class (C398 , C408) ) by L1169 , EQREL_1:19;
L1179: [ C407 , R4 ] in C398 by L1178 , L1173 , EQREL_1:22;
L1180: C407 , R4 are_convertible_wrt C393 by L1179 , L1086;
L1181: (C407 = R4 or [ C407 , R4 ] in D39) by L1180 , L1091 , L1168 , L1167 , L1171 , L1172;
thus L1182: thesis by L1181 , L1177 , L187 , L209;
end;

end;
given C409 being set such that
L1171: (D39 reduces C407 , C409 & D39 reduces C408 , C409);

L1172: (C407 , C409 are_convertible_wrt C393 & C409 , C408 are_convertible_wrt C393) by L1113 , L1171 , L357;
thus L1173: thesis by L1172 , L387;
end;
end;

end;
end;
definition
let C410 being Relation;
mode Completion of C410
 ->  complete Relation
means :L1161: (for B370 , B371 being set holds (B370 , B371 are_convertible_wrt C410 iff B370 , B371 are_convergent_wrt it));
existence
proof
L1162: (ex B372 being  complete Relation st (( field B372 ) c= ( field C410 ) & (for B373 , B374 being set holds (B373 , B374 are_convertible_wrt C410 iff B373 , B374 are_convergent_wrt B372)))) by L1076;
thus L1163: thesis by L1162;
end;
end;
theorem
L1165: (for B375 being Relation holds (for B376 being (Completion of B375) holds B375 , B376 are_equivalent ))
proof
let C411 being Relation;
let C412 being (Completion of C411);
let C413 , C414 being set;
L1166: (C413 , C414 are_convertible_wrt C411 iff C413 , C414 are_convergent_wrt C412) by L1161;
thus L1167: thesis by L1166 , L634 , L426;
end;
theorem
L1168: (for B377 being Relation holds (for B378 being  complete Relation holds (B377 , B378 are_equivalent  implies B378 is (Completion of B377))))
proof
let C415 being Relation;
let C416 being  complete Relation;
assume that
L1169: (for B379 , B380 being set holds (B379 , B380 are_convertible_wrt C415 iff B379 , B380 are_convertible_wrt C416));
let C417 , C418 being set;
L1170: (C417 , C418 are_convertible_wrt C415 iff C417 , C418 are_convertible_wrt C416) by L1169;
thus L1171: thesis by L1170 , L634 , L426;
end;
theorem
L1172: (for B381 being Relation holds (for B382 being (Completion of B381) holds (for B383 , B384 being set holds (B383 , B384 are_convertible_wrt B381 iff ( nf (B383 , B382) ) = ( nf (B384 , B382) )))))
proof
let C419 being Relation;
let C420 being (Completion of C419);
let C421 , C422 being set;
L1173: ( nf (C421 , C420) ) is_a_normal_form_of C421 , C420 by L811;
L1174: C420 reduces C421 , ( nf (C421 , C420) ) by L1173 , L414;
L1175: (C421 , C422 are_convergent_wrt C420 implies C421 , C422 are_convertible_wrt C420) by L426;
thus L1176: (C421 , C422 are_convertible_wrt C419 implies ( nf (C421 , C420) ) = ( nf (C422 , C420) )) by L1175 , L1161 , L816;
L1177: ( nf (C422 , C420) ) is_a_normal_form_of C422 , C420 by L811;
L1178: C420 reduces C422 , ( nf (C422 , C420) ) by L1177 , L414;
L1179: (C421 , C422 are_convertible_wrt C419 iff C421 , C422 are_convergent_wrt C420) by L1161;
thus L1180: thesis by L1179 , L1174 , L1178 , L415;
end;
