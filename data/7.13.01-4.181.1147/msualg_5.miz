:: Lattice of Congruences in a Many Sorted Algebra
::  by Robert Milewski
::
:: Received January 11, 1996
:: Copyright (c) 1996-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, PBOOLE, RELAT_1, EQREL_1, TARSKI, XBOOLE_0, STRUCT_0,
      LATTICES, FUNCT_1, SUBSET_1, BINOP_1, MSUALG_4, ZFMISC_1, CARD_3,
      MSUALG_1, FINSEQ_1, MARGREL1, PARTFUN1, ARYTM_3, ORDINAL4, NAT_1,
      XXREAL_0, CARD_1, RELAT_2, ARYTM_1, NAT_LAT, REALSET1, XXREAL_2,
      MSUALG_5;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, RELAT_1, RELAT_2, FUNCT_1,
      REALSET1, NUMBERS, XCMPLX_0, FINSEQ_2, STRUCT_0, PARTFUN1, FUNCT_2,
      RELSET_1, EQREL_1, BINOP_1, PBOOLE, MSUALG_1, MSUALG_3, MSUALG_4,
      LATTICES, NAT_LAT, CARD_3, FINSEQ_1, ORDINAL1, NAT_1, XXREAL_0;
 constructors BINOP_1, XXREAL_0, NAT_1, NAT_D, EQREL_1, REALSET1, NAT_LAT,
      MSUALG_3, MSUALG_4, RELSET_1, PRALG_2, FUNCOP_1, FINSEQ_2;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, PARTFUN1, XREAL_0, NAT_1,
      FINSEQ_1, EQREL_1, PBOOLE, STRUCT_0, LATTICES, NAT_LAT, PRALG_1,
      MSUALG_1, MSUALG_3, MSUALG_4, ORDINAL1, CARD_1, RELAT_2;
 requirements NUMERALS, REAL, BOOLE, SUBSET;
 definitions PBOOLE, BINOP_1, REALSET1, EQREL_1, FUNCOP_1;
 theorems BINOP_1, PBOOLE, MSUALG_4, EQREL_1, TARSKI, NAT_LAT, LATTICES,
      RELAT_1, RELAT_2, FUNCT_2, CARD_3, ZFMISC_1, MSUALG_1, FUNCT_1, MSUALG_3,
      FINSEQ_1, NAT_1, MSAFREE2, XBOOLE_0, XBOOLE_1, FINSEQ_3, XCMPLX_1,
      ORDERS_1, XREAL_1, XXREAL_0, PARTFUN1, FINSEQ_2;
 schemes PBOOLE, BINOP_1, NAT_1, FINSEQ_1, XBOOLE_0;

begin
definition
let C1 being set;
let C2 being (Relation of C1);
func EqCl C2 -> (Equivalence_Relation of C1) means 
:L1: (C2 c= it & (for B1 being (Equivalence_Relation of C1) holds (C2 c= B1 implies it c= B1)));
existence by EQREL_1:12;
uniqueness
proof
let C3 , C4 being (Equivalence_Relation of C1);
assume that
L2: C2 c= C3
and
L3: (for B2 being (Equivalence_Relation of C1) holds (C2 c= B2 implies C3 c= B2))
and
L4: C2 c= C4
and
L5: (for B3 being (Equivalence_Relation of C1) holds (C2 c= B3 implies C4 c= B3));
L6: C4 c= C3 by L2 , L5;
L7: C3 c= C4 by L3 , L4;
thus L8: C3 = C4 by L7 , L6 , XBOOLE_0:def 10;
end;
end;
theorem
L10: (for R2 being set holds (for R7 being (Equivalence_Relation of R2) holds (for R8 being (Equivalence_Relation of R2) holds ( R7 "\/" R8 ) = ( EqCl ( R7 \/ R8 ) ))))
proof
let R2 being set;
let R7 being (Equivalence_Relation of R2);
let R8 being (Equivalence_Relation of R2);
L11: (for B4 being (Equivalence_Relation of R2) holds (( R7 \/ R8 ) c= B4 implies ( R7 "\/" R8 ) c= B4)) by EQREL_1:def 2;
L12: ( R7 \/ R8 ) c= ( R7 "\/" R8 ) by EQREL_1:def 2;
thus L13: thesis by L12 , L11 , L1;
end;
theorem
L14: (for R2 being set holds (for R7 being (Equivalence_Relation of R2) holds ( EqCl R7 ) = R7))
proof
let R2 being set;
let R7 being (Equivalence_Relation of R2);
L15: (for B5 being (Equivalence_Relation of R2) holds (R7 c= B5 implies R7 c= B5));
thus L16: thesis by L15 , L1;
end;
begin
definition
let C5 being set;
func EqRelLatt C5 ->  strict Lattice means 
:L17: ((the carrier of it) = { B6 where B6 is (Relation of C5 , C5) : B6 is (Equivalence_Relation of C5) } & (for B7 , B8 being (Equivalence_Relation of C5) holds (( (the L_meet of it) . (B7 , B8) ) = ( B7 /\ B8 ) & ( (the L_join of it) . (B7 , B8) ) = ( B7 "\/" B8 ))));
existence
proof
set D1 = { B9 where B9 is (Relation of C5 , C5) : B9 is (Equivalence_Relation of C5) };
L18: ( id C5 ) in D1;
reconsider D2 = D1 as non  empty set by L18;
defpred S1[ (Element of D2) , (Element of D2) , (Element of D2) ] means (( $1 \/ $2 ) c= $3 & (for B10 being (Element of D2) holds (( $1 \/ $2 ) c= B10 implies $3 c= B10)));
L19: (for B11 , B12 being (Element of D2) holds (ex B13 being (Element of D2) st S1[ B11 , B12 , B13 ]))
proof
let C6 , C7 being (Element of D2);
L20: C7 in D2;
L21: (ex B14 being (Relation of C5 , C5) st (C7 = B14 & B14 is (Equivalence_Relation of C5))) by L20;
L22: C6 in D2;
L23: (ex B15 being (Relation of C5 , C5) st (C6 = B15 & B15 is (Equivalence_Relation of C5))) by L22;
reconsider D3 = C6 , D4 = C7 as (Equivalence_Relation of C5) by L23 , L21;
consider C8 being (Equivalence_Relation of C5) such that L24: ( D3 \/ D4 ) c= C8 and L25: (for B16 being (Equivalence_Relation of C5) holds (( D3 \/ D4 ) c= B16 implies C8 c= B16)) by EQREL_1:12;
L26: C8 in D2;
reconsider D5 = C8 as (Element of D2) by L26;
take D5;
thus L27: ( C6 \/ C7 ) c= D5 by L24;
thus L28:now
let C9 being (Element of D2);
assume that
L29: ( C6 \/ C7 ) c= C9;
L30: C9 in D2;
L31: (ex B17 being (Relation of C5 , C5) st (C9 = B17 & B17 is (Equivalence_Relation of C5))) by L30;
reconsider D6 = C9 as (Equivalence_Relation of C5) by L31;
L32: ( C6 \/ C7 ) c= D6 by L29;
thus L33: D5 c= C9 by L32 , L25;
end;
end;
consider C10 being (BinOp of D2) such that L29: (for B18 , B19 being (Element of D2) holds S1[ B18 , B19 , ( C10 . (B18 , B19) ) ]) from BINOP_1:sch 3(L19);
defpred S2[ (Element of D2) , (Element of D2) , (Element of D2) ] means $3 = ( $1 /\ $2 );
L30: (for B20 , B21 being (Element of D2) holds (ex B22 being (Element of D2) st S2[ B20 , B21 , B22 ]))
proof
let C11 , C12 being (Element of D2);
L31: C12 in D2;
L32: (ex B23 being (Relation of C5 , C5) st (C12 = B23 & B23 is (Equivalence_Relation of C5))) by L31;
L33: C11 in D2;
L34: (ex B24 being (Relation of C5 , C5) st (C11 = B24 & B24 is (Equivalence_Relation of C5))) by L33;
reconsider D7 = C11 , D8 = C12 as (Equivalence_Relation of C5) by L34 , L32;
set D9 = ( D7 /\ D8 );
L35: D9 in D2;
reconsider D10 = D9 as (Element of D2) by L35;
take D10;
thus L36: thesis;
end;
consider C13 being (BinOp of D2) such that L37: (for B25 , B26 being (Element of D2) holds S2[ B25 , B26 , ( C13 . (B25 , B26) ) ]) from BINOP_1:sch 3(L30);
reconsider D11 = LattStr (# D2 , C10 , C13 #) as non  empty LattStr;
L38:
now
let C14 , C15 being (Equivalence_Relation of C5);
L39: C15 in D2;
L40: C14 in D2;
reconsider D12 = C14 , D13 = C15 as (Element of D2) by L40 , L39;
reconsider D14 = ( C10 . (D12 , D13) ) as (Element of D2);
L41: D14 in D2;
L42: (ex B27 being (Relation of C5 , C5) st (D14 = B27 & B27 is (Equivalence_Relation of C5))) by L41;
reconsider D15 = D14 as (Equivalence_Relation of C5) by L42;
L43: (for B28 being (Element of D2) holds (( D12 \/ D13 ) c= B28 implies ( C10 . (D12 , D13) ) c= B28)) by L29;
L44:
now
let C16 being (Equivalence_Relation of C5);
assume that
L45: ( C14 \/ C15 ) c= C16;
L46: C16 in D2;
reconsider D16 = C16 as (Element of D2) by L46;
L47: ( C14 \/ C15 ) c= D16 by L45;
thus L48: ( C10 . (C14 , C15) ) c= C16 by L47 , L43;
end;
L49: ( D12 \/ D13 ) c= ( C10 . (D12 , D13) ) by L29;
L50: D15 = ( C14 "\/" C15 ) by L49 , L44 , EQREL_1:def 2;
thus L51: ( C10 . (C14 , C15) ) = ( C14 "\/" C15 ) by L50;
end;
L52:
now
let C17 , C18 , C19 being (Element of D2);
L53: C18 in D2;
L54: (ex B29 being (Relation of C5 , C5) st (C18 = B29 & B29 is (Equivalence_Relation of C5))) by L53;
L55: C19 in D2;
L56: (ex B30 being (Relation of C5 , C5) st (C19 = B30 & B30 is (Equivalence_Relation of C5))) by L55;
L57: C17 in D2;
L58: (ex B31 being (Relation of C5 , C5) st (C17 = B31 & B31 is (Equivalence_Relation of C5))) by L57;
reconsider D17 = C17 , D18 = C18 , D19 = C19 as (Equivalence_Relation of C5) by L58 , L54 , L56;
thus L59: ( C10 . (C17 , ( C10 . (C18 , C19) )) ) = ( C10 . (C17 , ( D18 "\/" D19 )) ) by L38
.= ( D17 "\/" ( D18 "\/" D19 ) ) by L38
.= ( ( D17 "\/" D18 ) "\/" D19 ) by EQREL_1:13
.= ( C10 . (( D17 "\/" D18 ) , C19) ) by L38
.= ( C10 . (( C10 . (C17 , C18) ) , C19) ) by L38;
end;
L60: (for B32 , B33 , B34 being (Element of D11) holds ( B32 "\/" ( B33 "\/" B34 ) ) = ( ( B32 "\/" B33 ) "\/" B34 ))
proof
let C20 , C21 , C22 being (Element of D11);
reconsider D20 = C20 , D21 = C21 , D22 = C22 as (Element of D2);
L61: ( (the L_join of D11) . (C20 , C21) ) = ( C20 "\/" C21 ) by LATTICES:def 1;
thus L62: ( C20 "\/" ( C21 "\/" C22 ) ) = ( (the L_join of D11) . (C20 , ( C21 "\/" C22 )) ) by LATTICES:def 1
.= ( C10 . (D20 , ( C10 . (D21 , D22) )) ) by LATTICES:def 1
.= ( (the L_join of D11) . (( (the L_join of D11) . (C20 , C21) ) , C22) ) by L52
.= ( ( C20 "\/" C21 ) "\/" C22 ) by L61 , LATTICES:def 1;
end;
L63:
now
let C23 , C24 being (Element of D2);
L64: C24 in D2;
L65: (ex B35 being (Relation of C5 , C5) st (C24 = B35 & B35 is (Equivalence_Relation of C5))) by L64;
L66: C23 in D2;
L67: (ex B36 being (Relation of C5 , C5) st (C23 = B36 & B36 is (Equivalence_Relation of C5))) by L66;
reconsider D23 = C23 , D24 = C24 as (Equivalence_Relation of C5) by L67 , L65;
thus L68: ( C10 . (C23 , C24) ) = ( D24 "\/" D23 ) by L38
.= ( C10 . (C24 , C23) ) by L38;
end;
L69: (for B37 , B38 being (Element of D11) holds ( B37 "\/" B38 ) = ( B38 "\/" B37 ))
proof
let C25 , C26 being (Element of D11);
reconsider D25 = C25 , D26 = C26 as (Element of D2);
thus L70: ( C25 "\/" C26 ) = ( C10 . (D25 , D26) ) by LATTICES:def 1
.= ( (the L_join of D11) . (C26 , C25) ) by L63
.= ( C26 "\/" C25 ) by LATTICES:def 1;
end;
L71:
now
let C27 , C28 being (Equivalence_Relation of C5);
L72: C28 in D2;
L73: C27 in D2;
reconsider D27 = C27 , D28 = C28 as (Element of D2) by L73 , L72;
L74: ( C13 . (D27 , D28) ) = ( D27 /\ D28 ) by L37;
thus L75: ( C13 . (C27 , C28) ) = ( C27 /\ C28 ) by L74;
end;
L76:
now
let C29 , C30 , C31 being (Element of D2);
L77: C30 in D2;
L78: (ex B39 being (Relation of C5 , C5) st (C30 = B39 & B39 is (Equivalence_Relation of C5))) by L77;
L79: C31 in D2;
L80: (ex B40 being (Relation of C5 , C5) st (C31 = B40 & B40 is (Equivalence_Relation of C5))) by L79;
L81: C29 in D2;
L82: (ex B41 being (Relation of C5 , C5) st (C29 = B41 & B41 is (Equivalence_Relation of C5))) by L81;
reconsider D29 = C29 , D30 = C30 , D31 = C31 as (Equivalence_Relation of C5) by L82 , L78 , L80;
thus L83: ( C13 . (C29 , ( C13 . (C30 , C31) )) ) = ( C13 . (C29 , ( D30 /\ D31 )) ) by L71
.= ( D29 /\ ( D30 /\ D31 ) ) by L71
.= ( ( D29 /\ D30 ) /\ D31 ) by XBOOLE_1:16
.= ( C13 . (( D29 /\ D30 ) , C31) ) by L71
.= ( C13 . (( C13 . (C29 , C30) ) , C31) ) by L71;
end;
L84: (for B42 , B43 , B44 being (Element of D11) holds ( B42 "/\" ( B43 "/\" B44 ) ) = ( ( B42 "/\" B43 ) "/\" B44 ))
proof
let C32 , C33 , C34 being (Element of D11);
reconsider D32 = C32 , D33 = C33 , D34 = C34 as (Element of D2);
L85: ( (the L_meet of D11) . (C32 , C33) ) = ( C32 "/\" C33 ) by LATTICES:def 2;
thus L86: ( C32 "/\" ( C33 "/\" C34 ) ) = ( (the L_meet of D11) . (C32 , ( C33 "/\" C34 )) ) by LATTICES:def 2
.= ( C13 . (D32 , ( C13 . (D33 , D34) )) ) by LATTICES:def 2
.= ( (the L_meet of D11) . (( (the L_meet of D11) . (C32 , C33) ) , C34) ) by L76
.= ( ( C32 "/\" C33 ) "/\" C34 ) by L85 , LATTICES:def 2;
end;
L87: (for B45 , B46 being (Element of D11) holds ( B45 "/\" ( B45 "\/" B46 ) ) = B45)
proof
let C35 , C36 being (Element of D11);
reconsider D35 = C35 , D36 = C36 as (Element of D2);
L88: ( C13 . (D35 , ( C10 . (D35 , D36) )) ) = D35
proof
L89: D36 in D2;
L90: (ex B47 being (Relation of C5 , C5) st (D36 = B47 & B47 is (Equivalence_Relation of C5))) by L89;
L91: D35 in D2;
L92: (ex B48 being (Relation of C5 , C5) st (D35 = B48 & B48 is (Equivalence_Relation of C5))) by L91;
reconsider D37 = D35 , D38 = D36 as (Equivalence_Relation of C5) by L92 , L90;
L93: ( C10 . (D35 , D36) ) = ( D37 "\/" D38 ) by L38;
thus L94: ( C13 . (D35 , ( C10 . (D35 , D36) )) ) = ( D37 /\ ( D37 "\/" D38 ) ) by L93 , L71
.= D35 by EQREL_1:16;
end;
thus L95: ( C35 "/\" ( C35 "\/" C36 ) ) = ( (the L_meet of D11) . (C35 , ( C35 "\/" C36 )) ) by LATTICES:def 2
.= C35 by L88 , LATTICES:def 1;
end;
L96:
now
let C37 , C38 being (Element of D2);
L97: C38 in D2;
L98: (ex B49 being (Relation of C5 , C5) st (C38 = B49 & B49 is (Equivalence_Relation of C5))) by L97;
L99: C37 in D2;
L100: (ex B50 being (Relation of C5 , C5) st (C37 = B50 & B50 is (Equivalence_Relation of C5))) by L99;
reconsider D39 = C37 , D40 = C38 as (Equivalence_Relation of C5) by L100 , L98;
thus L101: ( C13 . (C37 , C38) ) = ( D40 /\ D39 ) by L71
.= ( C13 . (C38 , C37) ) by L71;
end;
L102: (for B51 , B52 being (Element of D11) holds ( B51 "/\" B52 ) = ( B52 "/\" B51 ))
proof
let C39 , C40 being (Element of D11);
reconsider D41 = C39 , D42 = C40 as (Element of D2);
thus L103: ( C39 "/\" C40 ) = ( C13 . (D41 , D42) ) by LATTICES:def 2
.= ( (the L_meet of D11) . (C40 , C39) ) by L96
.= ( C40 "/\" C39 ) by LATTICES:def 2;
end;
L104: (for B53 , B54 being (Element of D11) holds ( ( B53 "/\" B54 ) "\/" B54 ) = B54)
proof
let C41 , C42 being (Element of D11);
reconsider D43 = C41 , D44 = C42 as (Element of D2);
L105: ( C10 . (( C13 . (D43 , D44) ) , D44) ) = D44
proof
L106: D44 in D2;
L107: (ex B55 being (Relation of C5 , C5) st (D44 = B55 & B55 is (Equivalence_Relation of C5))) by L106;
L108: D43 in D2;
L109: (ex B56 being (Relation of C5 , C5) st (D43 = B56 & B56 is (Equivalence_Relation of C5))) by L108;
reconsider D45 = D43 , D46 = D44 as (Equivalence_Relation of C5) by L109 , L107;
L110: ( C13 . (D43 , D44) ) = ( D45 /\ D46 ) by L71;
thus L111: ( C10 . (( C13 . (D43 , D44) ) , D44) ) = ( D46 "\/" ( D45 /\ D46 ) ) by L110 , L38
.= D44 by EQREL_1:17;
end;
thus L112: ( ( C41 "/\" C42 ) "\/" C42 ) = ( (the L_join of D11) . (( C41 "/\" C42 ) , C42) ) by LATTICES:def 1
.= C42 by L105 , LATTICES:def 2;
end;
L113: D11 is  join-commutative  join-associative  meet-absorbing  meet-commutative  meet-associative  join-absorbing by L104 , L69 , L60 , L102 , L84 , L87 , LATTICES:def 4 , LATTICES:def 5 , LATTICES:def 6 , LATTICES:def 7 , LATTICES:def 8 , LATTICES:def 9;
reconsider D47 = D11 as  strict Lattice by L113;
take D47;
thus L114: (the carrier of D47) = { B57 where B57 is (Relation of C5 , C5) : B57 is (Equivalence_Relation of C5) };
thus L115: thesis by L38 , L71;
end;
uniqueness
proof
let C43 , C44 being  strict Lattice;
assume that
L116: (the carrier of C43) = { B58 where B58 is (Relation of C5 , C5) : B58 is (Equivalence_Relation of C5) }
and
L117: (for B59 , B60 being (Equivalence_Relation of C5) holds (( (the L_meet of C43) . (B59 , B60) ) = ( B59 /\ B60 ) & ( (the L_join of C43) . (B59 , B60) ) = ( B59 "\/" B60 )))
and
L118: (the carrier of C44) = { B61 where B61 is (Relation of C5 , C5) : B61 is (Equivalence_Relation of C5) }
and
L119: (for B62 , B63 being (Equivalence_Relation of C5) holds (( (the L_meet of C44) . (B62 , B63) ) = ( B62 /\ B63 ) & ( (the L_join of C44) . (B62 , B63) ) = ( B62 "\/" B63 )));
reconsider D48 = (the carrier of C43) as non  empty set;
L120:
now
let C45 , C46 being (Element of D48);
L121: C46 in D48;
L122: (ex B64 being (Relation of C5 , C5) st (C46 = B64 & B64 is (Equivalence_Relation of C5))) by L121 , L116;
L123: C45 in D48;
L124: (ex B65 being (Relation of C5 , C5) st (C45 = B65 & B65 is (Equivalence_Relation of C5))) by L123 , L116;
reconsider D49 = C45 , D50 = C46 as (Equivalence_Relation of C5) by L124 , L122;
thus L125: ( (the L_meet of C43) . (C45 , C46) ) = ( D49 /\ D50 ) by L117
.= ( (the L_meet of C44) . (C45 , C46) ) by L119;
end;
L126: (the L_meet of C43) = (the L_meet of C44) by L120 , L116 , L118 , BINOP_1:2;
L127:
now
let C47 , C48 being (Element of D48);
L128: C48 in D48;
L129: (ex B66 being (Relation of C5 , C5) st (C48 = B66 & B66 is (Equivalence_Relation of C5))) by L128 , L116;
L130: C47 in D48;
L131: (ex B67 being (Relation of C5 , C5) st (C47 = B67 & B67 is (Equivalence_Relation of C5))) by L130 , L116;
reconsider D51 = C47 , D52 = C48 as (Equivalence_Relation of C5) by L131 , L129;
thus L132: ( (the L_join of C43) . (C47 , C48) ) = ( D51 "\/" D52 ) by L117
.= ( (the L_join of C44) . (C47 , C48) ) by L119;
end;
thus L133: thesis by L127 , L116 , L118 , L126 , BINOP_1:2;
end;
end;
begin
registration
let R1 being set;
let R6 being (ManySortedSet of R1);
cluster  MSEquivalence_Relation-like for (ManySortedRelation of R6);
existence
proof
deffunc H1(set) = ( id ( R6 . $1 ) );
consider C49 being (ManySortedSet of R1) such that L135: (for R4 being set holds (R4 in R1 implies ( C49 . R4 ) = H1(R4))) from PBOOLE:sch 4;
L136: (for B68 being set holds (B68 in R1 implies ( C49 . B68 ) is (Relation of ( R6 . B68 ) , ( R6 . B68 ))))
proof
let C50 being set;
assume L137: C50 in R1;
L138: ( C49 . C50 ) = ( id ( R6 . C50 ) ) by L137 , L135;
thus L139: thesis by L138;
end;
reconsider D53 = C49 as (ManySortedRelation of R6) by L136 , MSUALG_4:def 1;
take D53;
L140: (for B69 being set holds (for B70 being (Relation of ( R6 . B69 )) holds ((B69 in R1 & ( D53 . B69 ) = B70) implies B70 is (Equivalence_Relation of ( R6 . B69 )))))
proof
let C51 being set;
let C52 being (Relation of ( R6 . C51 ));
assume that
L141: C51 in R1
and
L142: ( D53 . C51 ) = C52;
L143: C52 = ( id ( R6 . C51 ) ) by L135 , L141 , L142;
thus L144: thesis by L143;
end;
thus L145: thesis by L140 , MSUALG_4:def 2;
end;
end;
definition
let R1 being set;
let R6 being (ManySortedSet of R1);
mode Equivalence_Relation of R6
 is  MSEquivalence_Relation-like (ManySortedRelation of R6);
end;
definition
let C53 being non  empty set;
let C54 being (ManySortedSet of C53);
let C55 being (ManySortedRelation of C54);
func EqCl C55 -> (Equivalence_Relation of C54) means 
:L148: (for B71 being (Element of C53) holds ( it . B71 ) = ( EqCl ( C55 . B71 ) ));
existence
proof
deffunc H2((Element of C53)) = ( EqCl ( C55 . $1 ) );
consider C56 being (ManySortedSet of C53) such that L149: (for B72 being (Element of C53) holds ( C56 . B72 ) = H2(B72)) from PBOOLE:sch 5;
L150: (for B73 being set holds (B73 in C53 implies ( C56 . B73 ) is (Relation of ( C54 . B73 ))))
proof
let C57 being set;
assume L151: C57 in C53;
reconsider D54 = C57 as (Element of C53) by L151;
L152: ( C56 . C57 ) = ( EqCl ( C55 . D54 ) ) by L149;
thus L153: thesis by L152;
end;
reconsider D55 = C56 as (ManySortedRelation of C54) by L150 , MSUALG_4:def 1;
L154: (for B74 being set holds (for B75 being (Relation of ( C54 . B74 )) holds ((B74 in C53 & ( D55 . B74 ) = B75) implies B75 is (Equivalence_Relation of ( C54 . B74 )))))
proof
let C58 being set;
let C59 being (Relation of ( C54 . C58 ));
assume that
L155: C58 in C53
and
L156: ( D55 . C58 ) = C59;
reconsider D56 = C58 as (Element of C53) by L155;
L157: C59 = ( EqCl ( C55 . D56 ) ) by L149 , L156;
thus L158: thesis by L157;
end;
reconsider D57 = D55 as (Equivalence_Relation of C54) by L154 , MSUALG_4:def 2;
take D57;
thus L159: thesis by L149;
end;
uniqueness
proof
let C60 , C61 being (Equivalence_Relation of C54);
assume that
L160: (for B76 being (Element of C53) holds ( C60 . B76 ) = ( EqCl ( C55 . B76 ) ))
and
L161: (for B77 being (Element of C53) holds ( C61 . B77 ) = ( EqCl ( C55 . B77 ) ));
L162:
now
let R5 being set;
assume L163: R5 in C53;
reconsider D58 = R5 as (Element of C53) by L163;
thus L164: ( C60 . R5 ) = ( EqCl ( C55 . D58 ) ) by L160
.= ( C61 . R5 ) by L161;
end;
thus L165: C60 = C61 by L162 , PBOOLE:3;
end;
end;
theorem
L167: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R11 being (Equivalence_Relation of R10) holds ( EqCl R11 ) = R11)))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R11 being (Equivalence_Relation of R10);
L168:
now
let C62 being (Element of R9);
reconsider D59 = ( R11 . C62 ) as (Equivalence_Relation of ( R10 . C62 )) by MSUALG_4:def 2;
thus L169: ( R11 . C62 ) = ( EqCl D59 ) by L14
.= ( EqCl ( R11 . C62 ) );
end;
thus L170: thesis by L168 , L148;
end;
begin
definition
let C63 being non  empty set;
let C64 being (ManySortedSet of C63);
let C65 , C66 being (Equivalence_Relation of C64);
func C65 "\/" C66 -> (Equivalence_Relation of C64) means 
:L171: (ex B78 being (ManySortedRelation of C64) st (B78 = ( C65 \/ C66 ) & it = ( EqCl B78 )));
existence
proof
deffunc H3(set) = ( ( C65 \/ C66 ) . $1 );
consider C67 being (ManySortedSet of C63) such that L172: (for R5 being set holds (R5 in C63 implies ( C67 . R5 ) = H3(R5))) from PBOOLE:sch 4;
L173: (for B79 being set holds (B79 in C63 implies ( C67 . B79 ) is (Relation of ( C64 . B79 ))))
proof
let C68 being set;
assume L174: C68 in C63;
reconsider D60 = C68 as (Element of C63) by L174;
L175: ( C67 . C68 ) = ( ( C65 \/ C66 ) . C68 ) by L172 , L174
.= ( ( C65 . D60 ) \/ ( C66 . D60 ) ) by PBOOLE:def 4;
thus L176: thesis by L175;
end;
reconsider D61 = C67 as (ManySortedRelation of C64) by L173 , MSUALG_4:def 1;
take ( EqCl D61 );
take D61;
thus L177: thesis by L172 , PBOOLE:3;
end;
uniqueness;
commutativity
;
end;
theorem
L179: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R12 being (Equivalence_Relation of R10) holds (for R13 being (Equivalence_Relation of R10) holds ( R12 \/ R13 ) c= ( R12 "\/" R13 )))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R12 being (Equivalence_Relation of R10);
let R13 being (Equivalence_Relation of R10);
consider C69 being (ManySortedRelation of R10) such that L180: C69 = ( R12 \/ R13 ) and L181: ( R12 "\/" R13 ) = ( EqCl C69 ) by L171;
L182:
now
let R5 being set;
assume L183: R5 in R9;
reconsider D62 = R5 as (Element of R9) by L183;
L184: ( C69 . R5 ) c= ( EqCl ( C69 . D62 ) ) by L1;
thus L185: ( C69 . R5 ) c= ( ( R12 "\/" R13 ) . R5 ) by L184 , L181 , L148;
end;
thus L186: thesis by L182 , L180 , PBOOLE:def 2;
end;
theorem
L187: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R12 being (Equivalence_Relation of R10) holds (for R13 being (Equivalence_Relation of R10) holds (for B80 being (Equivalence_Relation of R10) holds (( R12 \/ R13 ) c= B80 implies ( R12 "\/" R13 ) c= B80))))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R12 being (Equivalence_Relation of R10);
let R13 being (Equivalence_Relation of R10);
consider C70 being (ManySortedRelation of R10) such that L188: C70 = ( R12 \/ R13 ) and L189: ( R12 "\/" R13 ) = ( EqCl C70 ) by L171;
let C71 being (Equivalence_Relation of R10);
assume that
L190: ( R12 \/ R13 ) c= C71;
L191:
now
let R5 being set;
assume L192: R5 in R9;
reconsider D63 = R5 as (Element of R9) by L192;
L193: ( C71 . D63 ) is (Relation of ( R10 . R5 ));
reconsider D64 = ( C71 . R5 ) as (Equivalence_Relation of ( R10 . R5 )) by L193 , MSUALG_4:def 2;
L194: ( C70 . R5 ) c= D64 by L190 , L188 , L192 , PBOOLE:def 2;
L195: ( EqCl ( C70 . D63 ) ) c= D64 by L194 , L1;
thus L196: ( ( R12 "\/" R13 ) . R5 ) c= ( C71 . R5 ) by L195 , L189 , L148;
end;
thus L197: thesis by L191 , PBOOLE:def 2;
end;
theorem
L198: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R12 being (Equivalence_Relation of R10) holds (for R13 being (Equivalence_Relation of R10) holds (for R14 being (Equivalence_Relation of R10) holds ((( R12 \/ R13 ) c= R14 & (for B81 being (Equivalence_Relation of R10) holds (( R12 \/ R13 ) c= B81 implies R14 c= B81))) implies R14 = ( R12 "\/" R13 )))))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R12 being (Equivalence_Relation of R10);
let R13 being (Equivalence_Relation of R10);
let R14 being (Equivalence_Relation of R10);
assume that
L199: ( R12 \/ R13 ) c= R14
and
L200: (for B82 being (Equivalence_Relation of R10) holds (( R12 \/ R13 ) c= B82 implies R14 c= B82));
L201: ( R12 "\/" R13 ) c= R14 by L199 , L187;
L202: R14 c= ( R12 "\/" R13 ) by L200 , L179;
thus L203: thesis by L202 , L201 , PBOOLE:146;
end;
theorem
L204: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R11 being (Equivalence_Relation of R10) holds ( R11 "\/" R11 ) = R11)))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R11 being (Equivalence_Relation of R10);
L205: (for R14 being (Equivalence_Relation of R10) holds (( R11 \/ R11 ) c= R14 implies R11 c= R14));
thus L206: thesis by L205 , L198;
end;
theorem
L207: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R12 being (Equivalence_Relation of R10) holds (for R13 being (Equivalence_Relation of R10) holds (for R14 being (Equivalence_Relation of R10) holds ( ( R12 "\/" R13 ) "\/" R14 ) = ( R12 "\/" ( R13 "\/" R14 ) ))))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R12 being (Equivalence_Relation of R10);
let R13 being (Equivalence_Relation of R10);
let R14 being (Equivalence_Relation of R10);
L208: (for R15 being (Equivalence_Relation of R10) holds (R15 = ( R12 "\/" ( R13 "\/" R14 ) ) implies ( ( R12 "\/" R13 ) "\/" R14 ) c= R15))
proof
let R15 being (Equivalence_Relation of R10);
L209: ( R13 \/ R14 ) c= ( R13 "\/" R14 ) by L179;
assume L210: R15 = ( R12 "\/" ( R13 "\/" R14 ) );
L211: ( R12 \/ ( R13 "\/" R14 ) ) c= R15 by L210 , L179;
L212: ( R13 "\/" R14 ) c= ( R12 \/ ( R13 "\/" R14 ) ) by PBOOLE:14;
L213: ( R13 "\/" R14 ) c= R15 by L212 , L211 , PBOOLE:13;
L214: ( R13 \/ R14 ) c= R15 by L213 , L209 , PBOOLE:13;
L215: R13 c= ( R13 \/ R14 ) by PBOOLE:14;
L216: R13 c= R15 by L215 , L214 , PBOOLE:13;
L217: R12 c= ( R12 \/ ( R13 "\/" R14 ) ) by PBOOLE:14;
L218: R12 c= R15 by L217 , L211 , PBOOLE:13;
L219: ( R12 \/ R13 ) c= R15 by L218 , L216 , PBOOLE:16;
L220: ( R12 "\/" R13 ) c= R15 by L219 , L187;
L221: R14 c= ( R13 \/ R14 ) by PBOOLE:14;
L222: R14 c= R15 by L221 , L214 , PBOOLE:13;
L223: ( ( R12 "\/" R13 ) \/ R14 ) c= R15 by L222 , L220 , PBOOLE:16;
thus L224: thesis by L223 , L187;
end;
L225: ( ( R12 "\/" R13 ) "\/" R14 ) c= ( R12 "\/" ( R13 "\/" R14 ) ) by L208;
L226: (for R15 being (Equivalence_Relation of R10) holds (R15 = ( ( R12 "\/" R13 ) "\/" R14 ) implies ( R12 "\/" ( R13 "\/" R14 ) ) c= R15))
proof
let R15 being (Equivalence_Relation of R10);
L227: ( R12 \/ R13 ) c= ( R12 "\/" R13 ) by L179;
assume L228: R15 = ( ( R12 "\/" R13 ) "\/" R14 );
L229: ( ( R12 "\/" R13 ) \/ R14 ) c= R15 by L228 , L179;
L230: ( R12 "\/" R13 ) c= ( ( R12 "\/" R13 ) \/ R14 ) by PBOOLE:14;
L231: ( R12 "\/" R13 ) c= R15 by L230 , L229 , PBOOLE:13;
L232: ( R12 \/ R13 ) c= R15 by L231 , L227 , PBOOLE:13;
L233: R14 c= ( ( R12 "\/" R13 ) \/ R14 ) by PBOOLE:14;
L234: R14 c= R15 by L233 , L229 , PBOOLE:13;
L235: R13 c= ( R12 \/ R13 ) by PBOOLE:14;
L236: R13 c= R15 by L235 , L232 , PBOOLE:13;
L237: ( R13 \/ R14 ) c= R15 by L236 , L234 , PBOOLE:16;
L238: ( R13 "\/" R14 ) c= R15 by L237 , L187;
L239: R12 c= ( R12 \/ R13 ) by PBOOLE:14;
L240: R12 c= R15 by L239 , L232 , PBOOLE:13;
L241: ( R12 \/ ( R13 "\/" R14 ) ) c= R15 by L240 , L238 , PBOOLE:16;
thus L242: thesis by L241 , L187;
end;
L243: ( R12 "\/" ( R13 "\/" R14 ) ) c= ( ( R12 "\/" R13 ) "\/" R14 ) by L226;
thus L244: thesis by L243 , L225 , PBOOLE:146;
end;
theorem
L245: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R12 being (Equivalence_Relation of R10) holds (for R13 being (Equivalence_Relation of R10) holds ( R12 /\ ( R12 "\/" R13 ) ) = R12))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R12 being (Equivalence_Relation of R10);
let R13 being (Equivalence_Relation of R10);
L246: ( R12 /\ ( R12 "\/" R13 ) ) c= R12 by PBOOLE:15;
L247: R12 c= ( R12 \/ R13 ) by PBOOLE:14;
L248: ( R12 \/ R13 ) c= ( R12 "\/" R13 ) by L179;
L249: R12 c= ( R12 "\/" R13 ) by L248 , L247 , PBOOLE:13;
L250: R12 c= ( R12 /\ ( R12 "\/" R13 ) ) by L249 , PBOOLE:17;
thus L251: thesis by L250 , L246 , PBOOLE:146;
end;
theorem
L252: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for R12 being (Equivalence_Relation of R10) holds (for R13 being (Equivalence_Relation of R10) holds (for B83 being (Equivalence_Relation of R10) holds (B83 = ( R12 /\ R13 ) implies ( R12 "\/" B83 ) = R12))))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let R12 being (Equivalence_Relation of R10);
let R13 being (Equivalence_Relation of R10);
L253: R12 = ( R12 \/ ( R12 /\ R13 ) ) by PBOOLE:31;
L254: (for R15 being (Equivalence_Relation of R10) holds (( R12 \/ ( R12 /\ R13 ) ) c= R15 implies R12 c= R15)) by PBOOLE:31;
let C72 being (Equivalence_Relation of R10);
assume L255: C72 = ( R12 /\ R13 );
thus L256: thesis by L255 , L253 , L254 , L198;
end;
theorem
L257: (for R9 being non  empty set holds (for R10 being (ManySortedSet of R9) holds (for B84 , B85 being (Equivalence_Relation of R10) holds ( B84 /\ B85 ) is (Equivalence_Relation of R10))))
proof
let R9 being non  empty set;
let R10 being (ManySortedSet of R9);
let C73 , C74 being (Equivalence_Relation of R10);
L258: (for B86 being set holds (B86 in R9 implies ( ( C73 /\ C74 ) . B86 ) is (Relation of ( R10 . B86 ) , ( R10 . B86 ))))
proof
let C75 being set;
assume L259: C75 in R9;
reconsider D65 = ( C73 . C75 ) as (Relation of ( R10 . C75 ) , ( R10 . C75 )) by L259 , MSUALG_4:def 1;
reconsider D66 = ( C74 . C75 ) as (Relation of ( R10 . C75 ) , ( R10 . C75 )) by L259 , MSUALG_4:def 1;
L260: ( ( C73 /\ C74 ) . C75 ) = ( D65 /\ D66 ) by L259 , PBOOLE:def 5;
thus L261: thesis by L260;
end;
reconsider D67 = ( C73 /\ C74 ) as (ManySortedRelation of R10) by L258 , MSUALG_4:def 1;
L262: (for B87 being set holds (for B88 being (Relation of ( R10 . B87 )) holds ((B87 in R9 & ( D67 . B87 ) = B88) implies B88 is (Equivalence_Relation of ( R10 . B87 )))))
proof
let C76 being set;
let C77 being (Relation of ( R10 . C76 ));
assume that
L263: C76 in R9
and
L264: ( D67 . C76 ) = C77;
reconsider D68 = ( C74 . C76 ) as (Relation of ( R10 . C76 )) by L263 , MSUALG_4:def 1;
reconsider D69 = D68 as (Equivalence_Relation of ( R10 . C76 )) by L263 , MSUALG_4:def 2;
reconsider D70 = ( C73 . C76 ) as (Relation of ( R10 . C76 )) by L263 , MSUALG_4:def 1;
reconsider D71 = D70 as (Equivalence_Relation of ( R10 . C76 )) by L263 , MSUALG_4:def 2;
L265: ( D71 /\ D69 ) is (Equivalence_Relation of ( R10 . C76 ));
thus L266: thesis by L265 , L263 , L264 , PBOOLE:def 5;
end;
thus L267: thesis by L262 , MSUALG_4:def 2;
end;
definition
let C78 being non  empty set;
let C79 being (ManySortedSet of C78);
func EqRelLatt C79 ->  strict Lattice means 
:L268: ((for B89 being set holds (B89 in (the carrier of it) iff B89 is (Equivalence_Relation of C79))) & (for B90 , B91 being (Equivalence_Relation of C79) holds (( (the L_meet of it) . (B90 , B91) ) = ( B90 /\ B91 ) & ( (the L_join of it) . (B90 , B91) ) = ( B90 "\/" B91 ))));
existence
proof
set D72 = the (Equivalence_Relation of C79);
defpred S3[ set ] means $1 is (Equivalence_Relation of C79);
deffunc H4((Element of C78)) = ( bool [: ( C79 . $1 ) , ( C79 . $1 ) :] );
consider C80 being (ManySortedSet of C78) such that L269: (for B92 being (Element of C78) holds ( C80 . B92 ) = H4(B92)) from PBOOLE:sch 5;
consider C81 being set such that L270: (for B93 being set holds (B93 in C81 iff (B93 in ( product C80 ) & S3[ B93 ]))) from XBOOLE_0:sch 1;
L271: (for B94 being (Equivalence_Relation of C79) holds B94 in ( product C80 ))
proof
let C82 being (Equivalence_Relation of C79);
L272: (for B95 being set holds (B95 in ( dom C80 ) implies ( C82 . B95 ) in ( C80 . B95 )))
proof
let C83 being set;
assume L273: C83 in ( dom C80 );
reconsider D73 = C83 as (Element of C78) by L273;
L274: ( C82 . D73 ) is (Subset of [: ( C79 . D73 ) , ( C79 . D73 ) :]);
L275: ( C80 . D73 ) = ( bool [: ( C79 . D73 ) , ( C79 . D73 ) :] ) by L269;
thus L276: thesis by L275 , L274;
end;
L277: ( dom C82 ) = C78 by PARTFUN1:def 2
.= ( dom C80 ) by PARTFUN1:def 2;
thus L278: thesis by L277 , L272 , CARD_3:9;
end;
L279: D72 in ( product C80 ) by L271;
reconsider D74 = C81 as non  empty set by L279 , L270;
defpred S4[ (Element of D74) , (Element of D74) , (Element of D74) ] means (for B96 , B97 being (Equivalence_Relation of C79) holds ((B96 = $1 & B97 = $2) implies (ex B98 being (ManySortedRelation of C79) st (B98 = ( B96 \/ B97 ) & $3 = ( EqCl B98 )))));
L280: (for B99 , B100 being (Element of D74) holds (ex B101 being (Element of D74) st S4[ B99 , B100 , B101 ]))
proof
let C84 , C85 being (Element of D74);
reconsider D75 = C84 , D76 = C85 as (Equivalence_Relation of C79) by L270;
set D77 = ( D75 "\/" D76 );
L281: D77 in ( product C80 ) by L271;
reconsider D78 = D77 as (Element of D74) by L281 , L270;
take D78;
let C86 , C87 being (Equivalence_Relation of C79);
assume that
L282: C86 = C84
and
L283: C87 = C85;
thus L284: thesis by L282 , L283 , L171;
end;
consider C88 being (BinOp of D74) such that L285: (for B102 , B103 being (Element of D74) holds S4[ B102 , B103 , ( C88 . (B102 , B103) ) ]) from BINOP_1:sch 3(L280);
defpred S5[ (Element of D74) , (Element of D74) , (Element of D74) ] means (for B104 , B105 being (Equivalence_Relation of C79) holds ((B104 = $1 & B105 = $2) implies $3 = ( B104 /\ B105 )));
L286: (for B106 , B107 being (Element of D74) holds (ex B108 being (Element of D74) st S5[ B106 , B107 , B108 ]))
proof
let C89 , C90 being (Element of D74);
reconsider D79 = C89 , D80 = C90 as (Equivalence_Relation of C79) by L270;
set D81 = ( D79 /\ D80 );
L287: (for B109 being set holds (B109 in C78 implies ( D81 . B109 ) is (Relation of ( C79 . B109 ))))
proof
let C91 being set;
assume L288: C91 in C78;
reconsider D82 = C91 as (Element of C78) by L288;
L289: ( D81 . C91 ) = ( ( D79 . D82 ) /\ ( D80 . D82 ) ) by PBOOLE:def 5;
thus L290: thesis by L289;
end;
reconsider D83 = D81 as (ManySortedRelation of C79) by L287 , MSUALG_4:def 1;
L291: (for B110 being set holds (for B111 being (Relation of ( C79 . B110 )) holds ((B110 in C78 & ( D83 . B110 ) = B111) implies B111 is (Equivalence_Relation of ( C79 . B110 )))))
proof
let C92 being set;
let C93 being (Relation of ( C79 . C92 ));
assume that
L292: C92 in C78
and
L293: ( D83 . C92 ) = C93;
reconsider D84 = C92 as (Element of C78) by L292;
reconsider D85 = ( D79 . D84 ) , D86 = ( D80 . D84 ) as (Relation of ( C79 . C92 ));
reconsider D87 = D85 , D88 = D86 as (Equivalence_Relation of ( C79 . C92 )) by MSUALG_4:def 2;
L294: C93 = ( D87 /\ D88 ) by L293 , PBOOLE:def 5;
thus L295: thesis by L294;
end;
reconsider D89 = D83 as (Equivalence_Relation of C79) by L291 , MSUALG_4:def 2;
L296: D89 in ( product C80 ) by L271;
reconsider D90 = D89 as (Element of D74) by L296 , L270;
take D90;
thus L297: thesis;
end;
consider C94 being (BinOp of D74) such that L298: (for B112 , B113 being (Element of D74) holds S5[ B112 , B113 , ( C94 . (B112 , B113) ) ]) from BINOP_1:sch 3(L286);
reconsider D91 = LattStr (# D74 , C88 , C94 #) as non  empty LattStr;
L299:
now
let C95 , C96 being (Equivalence_Relation of C79);
L300: C96 in ( product C80 ) by L271;
L301: C95 in ( product C80 ) by L271;
reconsider D92 = C95 , D93 = C96 as (Element of D74) by L301 , L270 , L300;
L302: (ex B114 being (ManySortedRelation of C79) st (B114 = ( C95 \/ C96 ) & ( C88 . (D92 , D93) ) = ( EqCl B114 ))) by L285;
thus L303: ( C88 . (C95 , C96) ) = ( C95 "\/" C96 ) by L302 , L171;
end;
L304:
now
let C97 , C98 , C99 being (Element of D74);
reconsider D94 = C97 , D95 = C98 , D96 = C99 as (Equivalence_Relation of C79) by L270;
thus L305: ( C88 . (C97 , ( C88 . (C98 , C99) )) ) = ( C88 . (C97 , ( D95 "\/" D96 )) ) by L299
.= ( D94 "\/" ( D95 "\/" D96 ) ) by L299
.= ( ( D94 "\/" D95 ) "\/" D96 ) by L207
.= ( C88 . (( D94 "\/" D95 ) , C99) ) by L299
.= ( C88 . (( C88 . (C97 , C98) ) , C99) ) by L299;
end;
L306: (for B115 , B116 , B117 being (Element of D91) holds ( B115 "\/" ( B116 "\/" B117 ) ) = ( ( B115 "\/" B116 ) "\/" B117 ))
proof
let C100 , C101 , C102 being (Element of D91);
reconsider D97 = C100 , D98 = C101 , D99 = C102 as (Element of D74);
L307: ( (the L_join of D91) . (C100 , C101) ) = ( C100 "\/" C101 ) by LATTICES:def 1;
thus L308: ( C100 "\/" ( C101 "\/" C102 ) ) = ( (the L_join of D91) . (C100 , ( C101 "\/" C102 )) ) by LATTICES:def 1
.= ( C88 . (D97 , ( C88 . (D98 , D99) )) ) by LATTICES:def 1
.= ( (the L_join of D91) . (( (the L_join of D91) . (C100 , C101) ) , C102) ) by L304
.= ( ( C100 "\/" C101 ) "\/" C102 ) by L307 , LATTICES:def 1;
end;
L309:
now
let C103 , C104 being (Equivalence_Relation of C79);
L310: C104 in ( product C80 ) by L271;
L311: C103 in ( product C80 ) by L271;
reconsider D100 = C103 , D101 = C104 as (Element of D74) by L311 , L270 , L310;
L312: D101 = C104;
L313: D100 = C103;
thus L314: ( C94 . (C103 , C104) ) = ( C103 /\ C104 ) by L313 , L298 , L312;
end;
L315:
now
let C105 , C106 , C107 being (Element of D74);
reconsider D102 = C105 , D103 = C106 , D104 = C107 as (Equivalence_Relation of C79) by L270;
reconsider D105 = ( D103 /\ D104 ) as (Equivalence_Relation of C79) by L257;
reconsider D106 = ( D102 /\ D103 ) as (Equivalence_Relation of C79) by L257;
thus L316: ( C94 . (C105 , ( C94 . (C106 , C107) )) ) = ( C94 . (C105 , D105) ) by L309
.= ( D102 /\ ( D103 /\ D104 ) ) by L309
.= ( ( D102 /\ D103 ) /\ D104 ) by PBOOLE:29
.= ( C94 . (D106 , C107) ) by L309
.= ( C94 . (( C94 . (C105 , C106) ) , C107) ) by L309;
end;
L317: (for B118 , B119 , B120 being (Element of D91) holds ( B118 "/\" ( B119 "/\" B120 ) ) = ( ( B118 "/\" B119 ) "/\" B120 ))
proof
let C108 , C109 , C110 being (Element of D91);
reconsider D107 = C108 , D108 = C109 , D109 = C110 as (Element of D74);
L318: ( (the L_meet of D91) . (C108 , C109) ) = ( C108 "/\" C109 ) by LATTICES:def 2;
thus L319: ( C108 "/\" ( C109 "/\" C110 ) ) = ( (the L_meet of D91) . (C108 , ( C109 "/\" C110 )) ) by LATTICES:def 2
.= ( C94 . (D107 , ( C94 . (D108 , D109) )) ) by LATTICES:def 2
.= ( (the L_meet of D91) . (( (the L_meet of D91) . (C108 , C109) ) , C110) ) by L315
.= ( ( C108 "/\" C109 ) "/\" C110 ) by L318 , LATTICES:def 2;
end;
L320:
now
let C111 , C112 being (Element of D74);
reconsider D110 = C111 , D111 = C112 as (Equivalence_Relation of C79) by L270;
thus L321: ( C88 . (C111 , C112) ) = ( D110 "\/" D111 ) by L299
.= ( C88 . (C112 , C111) ) by L299;
end;
L322: (for B121 , B122 being (Element of D91) holds ( B121 "\/" B122 ) = ( B122 "\/" B121 ))
proof
let C113 , C114 being (Element of D91);
reconsider D112 = C113 , D113 = C114 as (Element of D74);
thus L323: ( C113 "\/" C114 ) = ( C88 . (D112 , D113) ) by LATTICES:def 1
.= ( (the L_join of D91) . (C114 , C113) ) by L320
.= ( C114 "\/" C113 ) by LATTICES:def 1;
end;
L324: (for B123 , B124 being (Element of D91) holds ( ( B123 "/\" B124 ) "\/" B124 ) = B124)
proof
let C115 , C116 being (Element of D91);
reconsider D114 = C115 , D115 = C116 as (Element of D74);
L325: ( C88 . (( C94 . (D114 , D115) ) , D115) ) = D115
proof
reconsider D116 = D114 , D117 = D115 as (Equivalence_Relation of C79) by L270;
reconsider D118 = ( D116 /\ D117 ) as (Equivalence_Relation of C79) by L257;
L326: ( C94 . (D114 , D115) ) = ( D116 /\ D117 ) by L309;
thus L327: ( C88 . (( C94 . (D114 , D115) ) , D115) ) = ( D118 "\/" D117 ) by L326 , L299
.= D115 by L252;
end;
thus L328: ( ( C115 "/\" C116 ) "\/" C116 ) = ( (the L_join of D91) . (( C115 "/\" C116 ) , C116) ) by LATTICES:def 1
.= C116 by L325 , LATTICES:def 2;
end;
L329:
now
let C117 , C118 being (Element of D74);
reconsider D119 = C117 , D120 = C118 as (Equivalence_Relation of C79) by L270;
thus L330: ( C94 . (C117 , C118) ) = ( D120 /\ D119 ) by L309
.= ( C94 . (C118 , C117) ) by L309;
end;
L331: (for B125 , B126 being (Element of D91) holds ( B125 "/\" B126 ) = ( B126 "/\" B125 ))
proof
let C119 , C120 being (Element of D91);
reconsider D121 = C119 , D122 = C120 as (Element of D74);
thus L332: ( C119 "/\" C120 ) = ( C94 . (D121 , D122) ) by LATTICES:def 2
.= ( (the L_meet of D91) . (C120 , C119) ) by L329
.= ( C120 "/\" C119 ) by LATTICES:def 2;
end;
L333: (for B127 , B128 being (Element of D91) holds ( B127 "/\" ( B127 "\/" B128 ) ) = B127)
proof
let C121 , C122 being (Element of D91);
reconsider D123 = C121 , D124 = C122 as (Element of D74);
L334: ( C94 . (D123 , ( C88 . (D123 , D124) )) ) = D123
proof
reconsider D125 = D123 , D126 = D124 as (Equivalence_Relation of C79) by L270;
L335: ( C88 . (D123 , D124) ) = ( D125 "\/" D126 ) by L299;
thus L336: ( C94 . (D123 , ( C88 . (D123 , D124) )) ) = ( D125 /\ ( D125 "\/" D126 ) ) by L335 , L309
.= D123 by L245;
end;
thus L337: ( C121 "/\" ( C121 "\/" C122 ) ) = ( (the L_meet of D91) . (C121 , ( C121 "\/" C122 )) ) by LATTICES:def 2
.= C121 by L334 , LATTICES:def 1;
end;
L338: D91 is  join-commutative  join-associative  meet-absorbing  meet-commutative  meet-associative  join-absorbing by L333 , L322 , L306 , L324 , L331 , L317 , LATTICES:def 4 , LATTICES:def 5 , LATTICES:def 6 , LATTICES:def 7 , LATTICES:def 8 , LATTICES:def 9;
reconsider D127 = D91 as  strict Lattice by L338;
take D127;
thus L339: (for B129 being set holds (B129 in (the carrier of D127) iff B129 is (Equivalence_Relation of C79)))
proof
let C123 being set;
thus L340: (C123 in (the carrier of D127) implies C123 is (Equivalence_Relation of C79)) by L270;
thus L341: (C123 is (Equivalence_Relation of C79) implies C123 in (the carrier of D127))
proof
assume L342: C123 is (Equivalence_Relation of C79);
L343: C123 in ( product C80 ) by L342 , L271;
thus L344: thesis by L343 , L270 , L342;
end;

end;

thus L342: thesis by L299 , L309;
end;
uniqueness
proof
let C124 , C125 being  strict Lattice;
assume that
L343: (for B130 being set holds (B130 in (the carrier of C124) iff B130 is (Equivalence_Relation of C79)))
and
L344: (for B131 , B132 being (Equivalence_Relation of C79) holds (( (the L_meet of C124) . (B131 , B132) ) = ( B131 /\ B132 ) & ( (the L_join of C124) . (B131 , B132) ) = ( B131 "\/" B132 )))
and
L345: (for B133 being set holds (B133 in (the carrier of C125) iff B133 is (Equivalence_Relation of C79)))
and
L346: (for B134 , B135 being (Equivalence_Relation of C79) holds (( (the L_meet of C125) . (B134 , B135) ) = ( B134 /\ B135 ) & ( (the L_join of C125) . (B134 , B135) ) = ( B134 "\/" B135 )));
reconsider D128 = (the carrier of C124) as non  empty set;
L347:
now
let C126 being set;
L348: (C126 is (Equivalence_Relation of C79) iff C126 in (the carrier of C125)) by L345;
thus L349: (C126 in (the carrier of C124) iff C126 in (the carrier of C125)) by L348 , L343;
end;
L350: (the carrier of C124) = (the carrier of C125) by L347 , TARSKI:1;
L351:
now
let C127 , C128 being (Element of D128);
reconsider D129 = C127 , D130 = C128 as (Equivalence_Relation of C79) by L343;
thus L352: ( (the L_meet of C124) . (C127 , C128) ) = ( D129 /\ D130 ) by L344
.= ( (the L_meet of C125) . (C127 , C128) ) by L346;
thus L353: ( (the L_join of C124) . (C127 , C128) ) = ( D129 "\/" D130 ) by L344
.= ( (the L_join of C125) . (C127 , C128) ) by L346;
end;
L354: (the L_meet of C124) = (the L_meet of C125) by L351 , L350 , BINOP_1:2;
thus L355: thesis by L354 , L350 , L351 , BINOP_1:2;
end;
end;
begin
registration
let C129 being non  empty ManySortedSign;
let C130 being MSAlgebra over C129;
cluster  MSEquivalence-like ->  MSEquivalence_Relation-like for (ManySortedRelation of C130);
coherence by MSUALG_4:def 3;
end;
theorem
L358: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds (for B136 being (OperSymbol of R16) holds (for B137 , B138 being (MSCongruence of R17) holds (for B139 , B140 being set holds (for B141 , B142 being FinSequence holds ([ B139 , B140 ] in ( ( B137 . ( ( the_arity_of B136 ) /. ( ( len B141 ) + 1 ) ) ) \/ ( B138 . ( ( the_arity_of B136 ) /. ( ( len B141 ) + 1 ) ) ) ) implies (for B143 , B144 being (Element of ( Args (B136 , R17) )) holds ((B143 = ( ( B141 ^ <* B139 *> ) ^ B142 ) & B144 = ( ( B141 ^ <* B140 *> ) ^ B142 )) implies [ ( ( Den (B136 , R17) ) . B143 ) , ( ( Den (B136 , R17) ) . B144 ) ] in ( ( B137 . ( the_result_sort_of B136 ) ) \/ ( B138 . ( the_result_sort_of B136 ) ) ))))))))))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
let C131 being (OperSymbol of R16);
let C132 , C133 being (MSCongruence of R17);
let C134 , C135 being set;
let C136 , C137 being FinSequence;
assume L359: [ C134 , C135 ] in ( ( C132 . ( ( the_arity_of C131 ) /. ( ( len C136 ) + 1 ) ) ) \/ ( C133 . ( ( the_arity_of C131 ) /. ( ( len C136 ) + 1 ) ) ) );
let C138 , C139 being (Element of ( Args (C131 , R17) ));
assume that
L360: C138 = ( ( C136 ^ <* C134 *> ) ^ C137 )
and
L361: C139 = ( ( C136 ^ <* C135 *> ) ^ C137 );
L362: C139 = ( C136 ^ ( <* C135 *> ^ C137 ) ) by L361 , FINSEQ_1:32;
L363: C138 = ( C136 ^ ( <* C134 *> ^ C137 ) ) by L360 , FINSEQ_1:32;
L364:
now
per cases  by L359 , XBOOLE_0:def 3;
suppose L365: [ C134 , C135 ] in ( C132 . ( ( the_arity_of C131 ) /. ( ( len C136 ) + 1 ) ) );

L366: (for B145 being Nat holds (B145 in ( dom C138 ) implies [ ( C138 . B145 ) , ( C139 . B145 ) ] in ( C132 . ( ( the_arity_of C131 ) /. B145 ) )))
proof
let C140 being Nat;
assume L367: C140 in ( dom C138 );
reconsider D131 = ( dom ( the_arity_of C131 ) ) as non  empty set by L367 , MSUALG_3:6;
L368: C140 in ( dom ( the_arity_of C131 ) ) by L367 , MSUALG_3:6;
L369: C140 in ( dom ( (the Sorts of R17) * ( the_arity_of C131 ) ) ) by L368 , PARTFUN1:def 2;
reconsider D132 = ( (the Sorts of R17) * ( the_arity_of C131 ) ) as  non-empty (ManySortedSet of D131);
L370: ( product D132 ) is non  empty;
L371: ( pi (( Args (C131 , R17) ) , C140) ) = ( pi (( ( ( (the Sorts of R17) # ) * (the Arity of R16) ) . C131 ) , C140) ) by MSUALG_1:def 4
.= ( pi (( ( (the Sorts of R17) # ) . ( (the Arity of R16) . C131 ) ) , C140) ) by FUNCT_2:15
.= ( pi (( ( (the Sorts of R17) # ) . ( the_arity_of C131 ) ) , C140) ) by MSUALG_1:def 1
.= ( pi (( product ( (the Sorts of R17) * ( the_arity_of C131 ) ) ) , C140) ) by FINSEQ_2:def 5
.= ( ( (the Sorts of R17) * ( the_arity_of C131 ) ) . C140 ) by L369 , L370 , CARD_3:12
.= ( (the Sorts of R17) . ( ( the_arity_of C131 ) . C140 ) ) by L368 , FUNCT_1:13
.= ( (the Sorts of R17) . ( ( the_arity_of C131 ) /. C140 ) ) by L368 , PARTFUN1:def 6;
L372: ( C138 . C140 ) in ( (the Sorts of R17) . ( ( the_arity_of C131 ) /. C140 ) ) by L371 , CARD_3:def 6;
L373: (C140 in ( dom ( C136 ^ <* C134 *> ) ) or (ex B146 being Nat st (B146 in ( dom C137 ) & C140 = ( ( len ( C136 ^ <* C134 *> ) ) + B146 )))) by L360 , L367 , FINSEQ_1:25;
L374:
now
per cases  by L373 , FINSEQ_1:25;
suppose L375: C140 in ( dom C136 );

L376: ( C139 . C140 ) = ( C136 . C140 ) by L375 , L362 , FINSEQ_1:def 7;
L377: ( C138 . C140 ) = ( C136 . C140 ) by L363 , L375 , FINSEQ_1:def 7;
thus L378: thesis by L377 , L372 , L376 , EQREL_1:5;
end;
suppose L379: (ex B147 being Nat st (B147 in ( dom <* C134 *> ) & C140 = ( ( len C136 ) + B147 )));

consider C141 being Nat such that L380: C141 in ( dom <* C134 *> ) and L381: C140 = ( ( len C136 ) + C141 ) by L379;
L382: C141 in ( Seg 1 ) by L380 , FINSEQ_1:38;
L383: C141 = 1 by L382 , FINSEQ_1:2 , TARSKI:def 1;
L384: C140 in ( Seg ( ( len C136 ) + 1 ) ) by L383 , L381 , FINSEQ_1:4;
L385: C140 in ( Seg ( ( len C136 ) + ( len <* C135 *> ) ) ) by L384 , FINSEQ_1:40;
L386: C140 in ( Seg ( len ( C136 ^ <* C135 *> ) ) ) by L385 , FINSEQ_1:22;
L387: C140 in ( dom ( C136 ^ <* C135 *> ) ) by L386 , FINSEQ_1:def 3;
L388: ( C139 . C140 ) = ( ( C136 ^ <* C135 *> ) . ( ( len C136 ) + 1 ) ) by L387 , L361 , L381 , L383 , FINSEQ_1:def 7
.= C135 by FINSEQ_1:42;
L389: C140 in ( Seg ( ( len C136 ) + ( len <* C134 *> ) ) ) by L384 , FINSEQ_1:40;
L390: C140 in ( Seg ( len ( C136 ^ <* C134 *> ) ) ) by L389 , FINSEQ_1:22;
L391: C140 in ( dom ( C136 ^ <* C134 *> ) ) by L390 , FINSEQ_1:def 3;
L392: ( C138 . C140 ) = ( ( C136 ^ <* C134 *> ) . ( ( len C136 ) + 1 ) ) by L391 , L360 , L381 , L383 , FINSEQ_1:def 7
.= C134 by FINSEQ_1:42;
thus L393: thesis by L392 , L365 , L381 , L382 , L388 , FINSEQ_1:2 , TARSKI:def 1;
end;
suppose L394: (ex B148 being (Element of ( NAT )) st (B148 in ( dom C137 ) & C140 = ( ( len ( C136 ^ <* C134 *> ) ) + B148 )));

consider C142 being (Element of ( NAT )) such that L395: C142 in ( dom C137 ) and L396: C140 = ( ( len ( C136 ^ <* C134 *> ) ) + C142 ) by L394;
L397: C140 = ( ( ( len C136 ) + ( len <* C134 *> ) ) + C142 ) by L396 , FINSEQ_1:22;
L398: C140 = ( ( ( len C136 ) + 1 ) + C142 ) by L397 , FINSEQ_1:40;
L399: C140 = ( ( ( len C136 ) + ( len <* C135 *> ) ) + C142 ) by L398 , FINSEQ_1:40;
L400: C140 = ( ( len ( C136 ^ <* C135 *> ) ) + C142 ) by L399 , FINSEQ_1:22;
L401: ( C139 . C140 ) = ( C137 . C142 ) by L400 , L361 , L395 , FINSEQ_1:def 7;
L402: ( C138 . C140 ) = ( C137 . C142 ) by L360 , L395 , L396 , FINSEQ_1:def 7;
thus L403: thesis by L402 , L372 , L401 , EQREL_1:5;
end;
end;
thus L405: thesis by L374;
end;
L406: [ ( ( Den (C131 , R17) ) . C138 ) , ( ( Den (C131 , R17) ) . C139 ) ] in ( C132 . ( the_result_sort_of C131 ) ) by L366 , MSUALG_4:def 4;
thus L407: thesis by L406 , XBOOLE_0:def 3;
end;
suppose L408: [ C134 , C135 ] in ( C133 . ( ( the_arity_of C131 ) /. ( ( len C136 ) + 1 ) ) );

L409: (for B149 being Nat holds (B149 in ( dom C138 ) implies [ ( C138 . B149 ) , ( C139 . B149 ) ] in ( C133 . ( ( the_arity_of C131 ) /. B149 ) )))
proof
let C143 being Nat;
assume L410: C143 in ( dom C138 );
reconsider D133 = ( dom ( the_arity_of C131 ) ) as non  empty set by L410 , MSUALG_3:6;
L411: C143 in ( dom ( the_arity_of C131 ) ) by L410 , MSUALG_3:6;
L412: C143 in ( dom ( (the Sorts of R17) * ( the_arity_of C131 ) ) ) by L411 , PARTFUN1:def 2;
reconsider D134 = ( (the Sorts of R17) * ( the_arity_of C131 ) ) as  non-empty (ManySortedSet of D133);
L413: ( product D134 ) is non  empty;
L414: ( pi (( Args (C131 , R17) ) , C143) ) = ( pi (( ( ( (the Sorts of R17) # ) * (the Arity of R16) ) . C131 ) , C143) ) by MSUALG_1:def 4
.= ( pi (( ( (the Sorts of R17) # ) . ( (the Arity of R16) . C131 ) ) , C143) ) by FUNCT_2:15
.= ( pi (( ( (the Sorts of R17) # ) . ( the_arity_of C131 ) ) , C143) ) by MSUALG_1:def 1
.= ( pi (( product ( (the Sorts of R17) * ( the_arity_of C131 ) ) ) , C143) ) by FINSEQ_2:def 5
.= ( ( (the Sorts of R17) * ( the_arity_of C131 ) ) . C143 ) by L412 , L413 , CARD_3:12
.= ( (the Sorts of R17) . ( ( the_arity_of C131 ) . C143 ) ) by L411 , FUNCT_1:13
.= ( (the Sorts of R17) . ( ( the_arity_of C131 ) /. C143 ) ) by L411 , PARTFUN1:def 6;
L415: ( C138 . C143 ) in ( (the Sorts of R17) . ( ( the_arity_of C131 ) /. C143 ) ) by L414 , CARD_3:def 6;
L416: (C143 in ( dom ( C136 ^ <* C134 *> ) ) or (ex B150 being Nat st (B150 in ( dom C137 ) & C143 = ( ( len ( C136 ^ <* C134 *> ) ) + B150 )))) by L360 , L410 , FINSEQ_1:25;
L417:
now
per cases  by L416 , FINSEQ_1:25;
suppose L418: C143 in ( dom C136 );

L419: ( C139 . C143 ) = ( C136 . C143 ) by L418 , L362 , FINSEQ_1:def 7;
L420: ( C138 . C143 ) = ( C136 . C143 ) by L363 , L418 , FINSEQ_1:def 7;
thus L421: thesis by L420 , L415 , L419 , EQREL_1:5;
end;
suppose L422: (ex B151 being Nat st (B151 in ( dom <* C134 *> ) & C143 = ( ( len C136 ) + B151 )));

consider C144 being Nat such that L423: C144 in ( dom <* C134 *> ) and L424: C143 = ( ( len C136 ) + C144 ) by L422;
L425: C144 in ( Seg 1 ) by L423 , FINSEQ_1:38;
L426: C144 = 1 by L425 , FINSEQ_1:2 , TARSKI:def 1;
L427: C143 in ( Seg ( ( len C136 ) + 1 ) ) by L426 , L424 , FINSEQ_1:4;
L428: C143 in ( Seg ( ( len C136 ) + ( len <* C135 *> ) ) ) by L427 , FINSEQ_1:40;
L429: C143 in ( Seg ( len ( C136 ^ <* C135 *> ) ) ) by L428 , FINSEQ_1:22;
L430: C143 in ( dom ( C136 ^ <* C135 *> ) ) by L429 , FINSEQ_1:def 3;
L431: ( C139 . C143 ) = ( ( C136 ^ <* C135 *> ) . ( ( len C136 ) + 1 ) ) by L430 , L361 , L424 , L426 , FINSEQ_1:def 7
.= C135 by FINSEQ_1:42;
L432: C143 in ( Seg ( ( len C136 ) + ( len <* C134 *> ) ) ) by L427 , FINSEQ_1:40;
L433: C143 in ( Seg ( len ( C136 ^ <* C134 *> ) ) ) by L432 , FINSEQ_1:22;
L434: C143 in ( dom ( C136 ^ <* C134 *> ) ) by L433 , FINSEQ_1:def 3;
L435: ( C138 . C143 ) = ( ( C136 ^ <* C134 *> ) . ( ( len C136 ) + 1 ) ) by L434 , L360 , L424 , L426 , FINSEQ_1:def 7
.= C134 by FINSEQ_1:42;
thus L436: thesis by L435 , L408 , L424 , L425 , L431 , FINSEQ_1:2 , TARSKI:def 1;
end;
suppose L437: (ex B152 being (Element of ( NAT )) st (B152 in ( dom C137 ) & C143 = ( ( len ( C136 ^ <* C134 *> ) ) + B152 )));

consider C145 being (Element of ( NAT )) such that L438: C145 in ( dom C137 ) and L439: C143 = ( ( len ( C136 ^ <* C134 *> ) ) + C145 ) by L437;
L440: C143 = ( ( ( len C136 ) + ( len <* C134 *> ) ) + C145 ) by L439 , FINSEQ_1:22;
L441: C143 = ( ( ( len C136 ) + 1 ) + C145 ) by L440 , FINSEQ_1:40;
L442: C143 = ( ( ( len C136 ) + ( len <* C135 *> ) ) + C145 ) by L441 , FINSEQ_1:40;
L443: C143 = ( ( len ( C136 ^ <* C135 *> ) ) + C145 ) by L442 , FINSEQ_1:22;
L444: ( C139 . C143 ) = ( C137 . C145 ) by L443 , L361 , L438 , FINSEQ_1:def 7;
L445: ( C138 . C143 ) = ( C137 . C145 ) by L360 , L438 , L439 , FINSEQ_1:def 7;
thus L446: thesis by L445 , L415 , L444 , EQREL_1:5;
end;
end;
thus L448: thesis by L417;
end;
L449: [ ( ( Den (C131 , R17) ) . C138 ) , ( ( Den (C131 , R17) ) . C139 ) ] in ( C133 . ( the_result_sort_of C131 ) ) by L409 , MSUALG_4:def 4;
thus L450: thesis by L449 , XBOOLE_0:def 3;
end;
end;
thus L452: thesis by L364;
end;
theorem
L453: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds (for B153 being (OperSymbol of R16) holds (for B154 , B155 being (MSCongruence of R17) holds (for B156 being  MSEquivalence-like (ManySortedRelation of R17) holds (B156 = ( B154 "\/" B155 ) implies (for B157 , B158 being set holds (for B159 being (Element of ( NAT )) holds (for B160 , B161 , B162 being FinSequence holds ((( len B160 ) = B159 & ( len B160 ) = ( len B161 ) & (for B163 being (Element of ( NAT )) holds (B163 in ( dom B160 ) implies [ ( B160 . B163 ) , ( B161 . B163 ) ] in ( B156 . ( ( the_arity_of B153 ) /. B163 ) )))) implies (([ ( ( Den (B153 , R17) ) . ( ( B160 ^ <* B157 *> ) ^ B162 ) ) , ( ( Den (B153 , R17) ) . ( ( B161 ^ <* B157 *> ) ^ B162 ) ) ] in ( B156 . ( the_result_sort_of B153 ) ) & [ B157 , B158 ] in ( B156 . ( ( the_arity_of B153 ) /. ( B159 + 1 ) ) )) implies (for B164 being (Element of ( Args (B153 , R17) )) holds (B164 = ( ( B160 ^ <* B157 *> ) ^ B162 ) implies [ ( ( Den (B153 , R17) ) . B164 ) , ( ( Den (B153 , R17) ) . ( ( B161 ^ <* B158 *> ) ^ B162 ) ) ] in ( B156 . ( the_result_sort_of B153 ) ))))))))))))))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
let C146 being (OperSymbol of R16);
let C147 , C148 being (MSCongruence of R17);
let C149 being  MSEquivalence-like (ManySortedRelation of R17);
assume that
L454: C149 = ( C147 "\/" C148 );
consider C150 being (ManySortedRelation of (the Sorts of R17)) such that L455: C150 = ( C147 \/ C148 ) and L456: ( C147 "\/" C148 ) = ( EqCl C150 ) by L171;
L457: ( ( C147 . ( the_result_sort_of C146 ) ) "\/" ( C148 . ( the_result_sort_of C146 ) ) ) = ( EqCl ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) ) by L10
.= ( EqCl ( C150 . ( the_result_sort_of C146 ) ) ) by L455 , PBOOLE:def 4
.= ( ( C147 "\/" C148 ) . ( the_result_sort_of C146 ) ) by L456 , L148;
consider C151 being (ManySortedRelation of (the Sorts of R17)) such that L458: C151 = ( C147 \/ C148 ) and L459: ( C147 "\/" C148 ) = ( EqCl C151 ) by L171;
let C152 , C153 being set;
let C154 being (Element of ( NAT ));
let C155 , C156 , C157 being FinSequence;
assume that
L460: ( len C155 ) = C154
and
L461: ( len C155 ) = ( len C156 )
and
L462: (for B165 being (Element of ( NAT )) holds (B165 in ( dom C155 ) implies [ ( C155 . B165 ) , ( C156 . B165 ) ] in ( C149 . ( ( the_arity_of C146 ) /. B165 ) )));
L463: ( ( C147 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) "\/" ( C148 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) ) = ( EqCl ( ( C147 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) \/ ( C148 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) ) ) by L10
.= ( EqCl ( C151 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) ) by L458 , PBOOLE:def 4
.= ( ( C147 "\/" C148 ) . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) by L459 , L148;
set D135 = ( ( C156 ^ <* C153 *> ) ^ C157 );
assume that
L464: [ ( ( Den (C146 , R17) ) . ( ( C155 ^ <* C152 *> ) ^ C157 ) ) , ( ( Den (C146 , R17) ) . ( ( C156 ^ <* C152 *> ) ^ C157 ) ) ] in ( C149 . ( the_result_sort_of C146 ) )
and
L465: [ C152 , C153 ] in ( C149 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) );
let C158 being (Element of ( Args (C146 , R17) ));
assume that
L466: C158 = ( ( C155 ^ <* C152 *> ) ^ C157 );
L467: ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) = ( (the Sorts of R17) . ( (the ResultSort of R16) . C146 ) ) by MSUALG_1:def 2
.= ( ( (the Sorts of R17) * (the ResultSort of R16) ) . C146 ) by FUNCT_2:15
.= ( Result (C146 , R17) ) by MSUALG_1:def 5;
L468: ( ( Den (C146 , R17) ) . C158 ) in ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) by L467;
consider C159 being FinSequence such that L469: 1 <= ( len C159 ) and L470: ( ( Den (C146 , R17) ) . ( ( C155 ^ <* C152 *> ) ^ C157 ) ) = ( C159 . 1 ) and L471: ( ( Den (C146 , R17) ) . ( ( C156 ^ <* C152 *> ) ^ C157 ) ) = ( C159 . ( len C159 ) ) and L472: (for B166 being (Element of ( NAT )) holds ((1 <= B166 & B166 < ( len C159 )) implies [ ( C159 . B166 ) , ( C159 . ( B166 + 1 ) ) ] in ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ))) by L468 , L454 , L464 , L466 , L457 , EQREL_1:28;
L473: C152 in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) by L465 , ZFMISC_1:87;
consider C160 being FinSequence such that L474: 1 <= ( len C160 ) and L475: C152 = ( C160 . 1 ) and L476: C153 = ( C160 . ( len C160 ) ) and L477: (for B167 being (Element of ( NAT )) holds ((1 <= B167 & B167 < ( len C160 )) implies [ ( C160 . B167 ) , ( C160 . ( B167 + 1 ) ) ] in ( ( C147 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) \/ ( C148 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) ))) by L473 , L454 , L465 , L463 , EQREL_1:28;
deffunc H5(Nat) = ( ( Den (C146 , R17) ) . ( ( C156 ^ <* ( C160 . $1 ) *> ) ^ C157 ) );
consider C161 being FinSequence such that L478: (( len C161 ) = ( len C160 ) & (for B168 being Nat holds (B168 in ( dom C161 ) implies ( C161 . B168 ) = H5(B168)))) from FINSEQ_1:sch 2;
L479: ( dom C161 ) = ( Seg ( len C160 ) ) by L478 , FINSEQ_1:def 3;
L480: ( dom C158 ) = ( Seg ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) ) by L466 , FINSEQ_1:def 3
.= ( Seg ( len ( C155 ^ ( <* C152 *> ^ C157 ) ) ) ) by FINSEQ_1:32
.= ( Seg ( ( len C156 ) + ( len ( <* C152 *> ^ C157 ) ) ) ) by L461 , FINSEQ_1:22
.= ( Seg ( len ( C156 ^ ( <* C152 *> ^ C157 ) ) ) ) by FINSEQ_1:22
.= ( Seg ( len ( ( C156 ^ <* C152 *> ) ^ C157 ) ) ) by FINSEQ_1:32
.= ( dom ( ( C156 ^ <* C152 *> ) ^ C157 ) ) by FINSEQ_1:def 3;
L481: (ex B169 being FinSequence st (1 <= ( len B169 ) & ( ( Den (C146 , R17) ) . C158 ) = ( B169 . 1 ) & ( ( Den (C146 , R17) ) . D135 ) = ( B169 . ( len B169 ) ) & (for B170 being (Element of ( NAT )) holds ((1 <= B170 & B170 < ( len B169 )) implies [ ( B169 . B170 ) , ( B169 . ( B170 + 1 ) ) ] in ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) )))))
proof
take D136 = ( C159 ^ C161 );
L482: ( len D136 ) = ( ( len C159 ) + ( len C161 ) ) by FINSEQ_1:22;
thus L483: 1 <= ( len D136 ) by L482 , L469 , NAT_1:12;
L484: 1 in ( dom C159 ) by L469 , FINSEQ_3:25;
thus L485: ( D136 . 1 ) = ( ( Den (C146 , R17) ) . C158 ) by L484 , L466 , L470 , FINSEQ_1:def 7;
L486: ( len C161 ) in ( Seg ( len C160 ) ) by L474 , L478 , FINSEQ_1:1;
L487: ( len C161 ) in ( dom C161 ) by L486 , L478 , FINSEQ_1:def 3;
thus L488: ( D136 . ( len D136 ) ) = ( C161 . ( len C161 ) ) by L487 , L482 , FINSEQ_1:def 7
.= ( ( Den (C146 , R17) ) . D135 ) by L476 , L478 , L479 , L486;
L489: ( len C159 ) <> ( 0 ) by L469;
thus L490:now
let C162 being (Element of ( NAT ));
assume that
L491: 1 <= C162
and
L492: C162 < ( len D136 );
L493: ((1 <= C162 & C162 < ( len C159 )) or (( ( len C159 ) + 1 ) <= C162 & C162 < ( len D136 )) or C162 = ( len C159 ))
proof
assume that
L494: (not (1 <= C162 & C162 < ( len C159 )))
and
L495: (not (( ( len C159 ) + 1 ) <= C162 & C162 < ( len D136 )));
L496: C162 <= ( len C159 ) by L492 , L495 , NAT_1:13;
thus L497: thesis by L496 , L491 , L494 , XXREAL_0:1;
end;
L498: ( Seg ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) ) = ( dom C158 ) by L466 , FINSEQ_1:def 3
.= ( dom ( the_arity_of C146 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C146 ) ) ) by FINSEQ_1:def 3;
L499: ( len ( ( C156 ^ <* C152 *> ) ^ C157 ) ) = ( len ( C156 ^ ( <* C152 *> ^ C157 ) ) ) by FINSEQ_1:32
.= ( ( len C156 ) + ( len ( <* C152 *> ^ C157 ) ) ) by FINSEQ_1:22
.= ( len ( C155 ^ ( <* C152 *> ^ C157 ) ) ) by L461 , FINSEQ_1:22
.= ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) by FINSEQ_1:32
.= ( len ( the_arity_of C146 ) ) by L498 , FINSEQ_1:6;
L500:
now
let C163 being (Element of ( NAT ));
assume L501: C163 in ( dom C158 );
L502: C163 in ( Seg ( len ( the_arity_of C146 ) ) ) by L501 , L480 , L499 , FINSEQ_1:def 3;
L503: C163 in ( dom ( the_arity_of C146 ) ) by L502 , FINSEQ_1:def 3;
L504: C163 in ( dom ( (the Sorts of R17) * ( the_arity_of C146 ) ) ) by L503 , PARTFUN1:def 2;
reconsider D137 = ( dom ( the_arity_of C146 ) ) as non  empty set by L502 , FINSEQ_1:def 3;
reconsider D138 = ( (the Sorts of R17) * ( the_arity_of C146 ) ) as  non-empty (ManySortedSet of D137);
L505: ( product D138 ) is non  empty;
L506: ( pi (( Args (C146 , R17) ) , C163) ) = ( pi (( ( ( (the Sorts of R17) # ) * (the Arity of R16) ) . C146 ) , C163) ) by MSUALG_1:def 4
.= ( pi (( ( (the Sorts of R17) # ) . ( (the Arity of R16) . C146 ) ) , C163) ) by FUNCT_2:15
.= ( pi (( ( (the Sorts of R17) # ) . ( the_arity_of C146 ) ) , C163) ) by MSUALG_1:def 1
.= ( pi (( product ( (the Sorts of R17) * ( the_arity_of C146 ) ) ) , C163) ) by FINSEQ_2:def 5
.= ( ( (the Sorts of R17) * ( the_arity_of C146 ) ) . C163 ) by L504 , L505 , CARD_3:12
.= ( (the Sorts of R17) . ( ( the_arity_of C146 ) . C163 ) ) by L503 , FUNCT_1:13
.= ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. C163 ) ) by L503 , PARTFUN1:def 6;
thus L507: ( C158 . C163 ) in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. C163 ) ) by L506 , CARD_3:def 6;
end;
L508: (ex B171 being Nat st ( len C159 ) = ( B171 + 1 )) by L489 , NAT_1:6;
L509:
now
per cases  by L493;
suppose L510: (1 <= C162 & C162 < ( len C159 ));

L511: ( C162 + 1 ) <= ( len C159 ) by L510 , NAT_1:13;
L512: 1 <= ( C162 + 1 ) by L510 , NAT_1:13;
L513: ( C162 + 1 ) in ( dom C159 ) by L512 , L511 , FINSEQ_3:25;
L514: ( D136 . ( C162 + 1 ) ) = ( C159 . ( C162 + 1 ) ) by L513 , FINSEQ_1:def 7;
L515: C162 in ( dom C159 ) by L510 , FINSEQ_3:25;
L516: ( D136 . C162 ) = ( C159 . C162 ) by L515 , FINSEQ_1:def 7;
thus L517: [ ( D136 . C162 ) , ( D136 . ( C162 + 1 ) ) ] in ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) by L516 , L472 , L510 , L514;
end;
suppose L518: C162 = ( len C159 );

L519: C162 in ( Seg ( len C159 ) ) by L518 , L508 , FINSEQ_1:4;
L520: C162 in ( dom C159 ) by L519 , FINSEQ_1:def 3;
L521: ( D136 . C162 ) = ( ( Den (C146 , R17) ) . ( ( C156 ^ <* C152 *> ) ^ C157 ) ) by L520 , L471 , L518 , FINSEQ_1:def 7;
L522: 1 in ( Seg ( len C161 ) ) by L474 , L478 , FINSEQ_1:1;
L523: 1 in ( dom C161 ) by L522 , FINSEQ_1:def 3;
L524: ( D136 . ( C162 + 1 ) ) = ( C161 . 1 ) by L523 , L518 , FINSEQ_1:def 7
.= ( ( Den (C146 , R17) ) . ( ( C156 ^ <* C152 *> ) ^ C157 ) ) by L475 , L478 , L479 , L522;
L525: (for B172 being Nat holds (B172 in ( dom ( ( C156 ^ <* C152 *> ) ^ C157 ) ) implies ( ( ( C156 ^ <* C152 *> ) ^ C157 ) . B172 ) in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. B172 ) )))
proof
let C164 being Nat;
assume L526: C164 in ( dom ( ( C156 ^ <* C152 *> ) ^ C157 ) );
L527: C164 in ( dom ( C156 ^ ( <* C152 *> ^ C157 ) ) ) by L526 , FINSEQ_1:32;
L528:
now
per cases  by L527 , FINSEQ_1:25;
suppose L529: C164 in ( dom C156 );

L530: C164 in ( Seg ( len C156 ) ) by L529 , FINSEQ_1:def 3;
L531: C164 in ( dom C155 ) by L530 , L461 , FINSEQ_1:def 3;
L532: [ ( C155 . C164 ) , ( C156 . C164 ) ] in ( C149 . ( ( the_arity_of C146 ) /. C164 ) ) by L531 , L462;
L533: ( ( ( C156 ^ <* C152 *> ) ^ C157 ) . C164 ) = ( ( C156 ^ ( <* C152 *> ^ C157 ) ) . C164 ) by FINSEQ_1:32
.= ( C156 . C164 ) by L529 , FINSEQ_1:def 7;
thus L534: thesis by L533 , L532 , ZFMISC_1:87;
end;
suppose L535: (ex B173 being Nat st (B173 in ( dom ( <* C152 *> ^ C157 ) ) & C164 = ( ( len C156 ) + B173 )));

consider C165 being Nat such that L536: C165 in ( dom ( <* C152 *> ^ C157 ) ) and L537: C164 = ( ( len C156 ) + C165 ) by L535;
L538: ( ( ( C156 ^ <* C152 *> ) ^ C157 ) . C164 ) = ( ( C156 ^ ( <* C152 *> ^ C157 ) ) . C164 ) by FINSEQ_1:32
.= ( ( <* C152 *> ^ C157 ) . C165 ) by L536 , L537 , FINSEQ_1:def 7
.= ( ( C155 ^ ( <* C152 *> ^ C157 ) ) . C164 ) by L461 , L536 , L537 , FINSEQ_1:def 7
.= ( C158 . C164 ) by L466 , FINSEQ_1:32;
thus L539: thesis by L538 , L480 , L500 , L526;
end;
end;
thus L541: thesis by L528;
end;
reconsider D139 = ( ( C156 ^ <* C152 *> ) ^ C157 ) as (Element of ( Args (C146 , R17) )) by L525 , L499 , MSAFREE2:5;
L542: ( field ( C148 . ( the_result_sort_of C146 ) ) ) = ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) by EQREL_1:9;
L543: ( field ( C147 . ( the_result_sort_of C146 ) ) ) = ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) by EQREL_1:9;
L544: ( field ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) ) = ( ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) \/ ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) ) by L543 , L542 , RELAT_1:18
.= ( (the Sorts of R17) . ( the_result_sort_of C146 ) );
L545: ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) is_reflexive_in ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) by L544 , RELAT_2:def 9;
L546: ( ( Den (C146 , R17) ) . D139 ) in ( (the Sorts of R17) . ( the_result_sort_of C146 ) ) by L467;
thus L547: [ ( D136 . C162 ) , ( D136 . ( C162 + 1 ) ) ] in ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) by L546 , L521 , L524 , L545 , RELAT_2:def 1;
end;
suppose L548: (( ( len C159 ) + 1 ) <= C162 & C162 < ( len D136 ));

L549: ( len C159 ) < C162 by L548 , NAT_1:13;
reconsider D140 = ( C162 - ( len C159 ) ) as (Element of ( NAT )) by L549 , NAT_1:21;
L550: 1 <= ( D140 + 1 ) by NAT_1:12;
L551: ( len C160 ) = ( ( len D136 ) - ( len C159 ) ) by L478 , L482 , XCMPLX_1:26;
L552: D140 < ( len C160 ) by L551 , L548 , XREAL_1:9;
L553: ( D140 + 1 ) <= ( len C160 ) by L552 , NAT_1:13;
L554: ( D140 + 1 ) in ( Seg ( len C160 ) ) by L553 , L550 , FINSEQ_1:1;
L555: ( ( C162 + 1 ) - ( len C159 ) ) in ( Seg ( len C160 ) ) by L554 , XCMPLX_1:29;
L556: 1 <= D140 by L548 , XREAL_1:19;
L557: [ ( C160 . D140 ) , ( C160 . ( D140 + 1 ) ) ] in ( ( C147 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) \/ ( C148 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) ) by L556 , L477 , L552;
L558: ( C160 . ( ( C162 - ( len C159 ) ) + 1 ) ) in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) by L557 , ZFMISC_1:87;
L559: (for B174 being Nat holds (B174 in ( dom ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) ) implies ( ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) . B174 ) in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. B174 ) )))
proof
let C166 being Nat;
assume L560: C166 in ( dom ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) );
L561: (C166 in ( dom ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) or (ex B175 being Nat st (B175 in ( dom C157 ) & C166 = ( ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + B175 )))) by L560 , FINSEQ_1:25;
L562:
now
per cases  by L561 , FINSEQ_1:25;
suppose L563: C166 in ( dom C156 );

L564: C166 in ( Seg ( len C156 ) ) by L563 , FINSEQ_1:def 3;
L565: C166 in ( dom C155 ) by L564 , L461 , FINSEQ_1:def 3;
L566: [ ( C155 . C166 ) , ( C156 . C166 ) ] in ( C149 . ( ( the_arity_of C146 ) /. C166 ) ) by L565 , L462;
L567: ( ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) . C166 ) = ( ( C156 ^ ( <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ^ C157 ) ) . C166 ) by FINSEQ_1:32
.= ( C156 . C166 ) by L563 , FINSEQ_1:def 7;
thus L568: thesis by L567 , L566 , ZFMISC_1:87;
end;
suppose L569: (ex B176 being Nat st (B176 in ( dom <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) & C166 = ( ( len C156 ) + B176 )));

consider C167 being Nat such that L570: C167 in ( dom <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) and L571: C166 = ( ( len C156 ) + C167 ) by L569;
L572: C167 in ( Seg 1 ) by L570 , FINSEQ_1:38;
L573: C166 = ( ( len C155 ) + 1 ) by L572 , L461 , L571 , FINSEQ_1:2 , TARSKI:def 1;
L574: C166 in ( Seg ( ( len C156 ) + 1 ) ) by L573 , L461 , FINSEQ_1:4;
L575: C166 in ( Seg ( ( len C156 ) + ( len <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) ) by L574 , FINSEQ_1:40;
L576: C166 in ( Seg ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) ) by L575 , FINSEQ_1:22;
L577: C166 in ( dom ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) by L576 , FINSEQ_1:def 3;
L578: ( ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) . C166 ) = ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) . C166 ) by L577 , FINSEQ_1:def 7
.= ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) by L461 , L573 , FINSEQ_1:42;
thus L579: thesis by L578 , L460 , L558 , L573 , XCMPLX_1:29;
end;
suppose L580: (ex B177 being (Element of ( NAT )) st (B177 in ( dom C157 ) & C166 = ( ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + B177 )));

L581: ( len ( C155 ^ <* C152 *> ) ) = ( ( len C155 ) + ( len <* C152 *> ) ) by FINSEQ_1:22
.= ( ( len C156 ) + 1 ) by L461 , FINSEQ_1:40
.= ( ( len C156 ) + ( len <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) by FINSEQ_1:40
.= ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) by FINSEQ_1:22;
L582: ( dom C158 ) = ( Seg ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) ) by L466 , FINSEQ_1:def 3
.= ( Seg ( ( len ( C155 ^ <* C152 *> ) ) + ( len C157 ) ) ) by FINSEQ_1:22
.= ( Seg ( ( ( len C155 ) + ( len <* C152 *> ) ) + ( len C157 ) ) ) by FINSEQ_1:22
.= ( Seg ( ( ( len C156 ) + 1 ) + ( len C157 ) ) ) by L461 , FINSEQ_1:40
.= ( Seg ( ( ( len C156 ) + ( len <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) ) by FINSEQ_1:40
.= ( Seg ( ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) ) by FINSEQ_1:22
.= ( Seg ( len ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) ) ) by FINSEQ_1:22
.= ( dom ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) ) by FINSEQ_1:def 3;
consider C168 being (Element of ( NAT )) such that L583: C168 in ( dom C157 ) and L584: C166 = ( ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + C168 ) by L580;
L585: ( ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) . C166 ) = ( C157 . C168 ) by L583 , L584 , FINSEQ_1:def 7
.= ( C158 . C166 ) by L466 , L583 , L584 , L581 , FINSEQ_1:def 7;
thus L586: thesis by L585 , L500 , L560 , L582;
end;
end;
thus L588: thesis by L562;
end;
L589: ( C160 . ( C162 - ( len C159 ) ) ) in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) by L557 , ZFMISC_1:87;
L590: (for B178 being Nat holds (B178 in ( dom ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) ) implies ( ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) . B178 ) in ( (the Sorts of R17) . ( ( the_arity_of C146 ) /. B178 ) )))
proof
let C169 being Nat;
assume L591: C169 in ( dom ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) );
L592: (C169 in ( dom ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) or (ex B179 being Nat st (B179 in ( dom C157 ) & C169 = ( ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + B179 )))) by L591 , FINSEQ_1:25;
L593:
now
per cases  by L592 , FINSEQ_1:25;
suppose L594: C169 in ( dom C156 );

L595: C169 in ( Seg ( len C156 ) ) by L594 , FINSEQ_1:def 3;
L596: C169 in ( dom C155 ) by L595 , L461 , FINSEQ_1:def 3;
L597: [ ( C155 . C169 ) , ( C156 . C169 ) ] in ( C149 . ( ( the_arity_of C146 ) /. C169 ) ) by L596 , L462;
L598: ( ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) . C169 ) = ( ( C156 ^ ( <* ( C160 . ( C162 - ( len C159 ) ) ) *> ^ C157 ) ) . C169 ) by FINSEQ_1:32
.= ( C156 . C169 ) by L594 , FINSEQ_1:def 7;
thus L599: thesis by L598 , L597 , ZFMISC_1:87;
end;
suppose L600: (ex B180 being Nat st (B180 in ( dom <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) & C169 = ( ( len C156 ) + B180 )));

consider C170 being Nat such that L601: C170 in ( dom <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) and L602: C169 = ( ( len C156 ) + C170 ) by L600;
L603: C170 in ( Seg 1 ) by L601 , FINSEQ_1:38;
L604: C169 = ( ( len C155 ) + 1 ) by L603 , L461 , L602 , FINSEQ_1:2 , TARSKI:def 1;
L605: C169 in ( Seg ( ( len C156 ) + 1 ) ) by L604 , L461 , FINSEQ_1:4;
L606: C169 in ( Seg ( ( len C156 ) + ( len <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) ) by L605 , FINSEQ_1:40;
L607: C169 in ( Seg ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) ) by L606 , FINSEQ_1:22;
L608: C169 in ( dom ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) by L607 , FINSEQ_1:def 3;
L609: ( ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) . C169 ) = ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) . C169 ) by L608 , FINSEQ_1:def 7
.= ( C160 . ( C162 - ( len C159 ) ) ) by L461 , L604 , FINSEQ_1:42;
thus L610: thesis by L609 , L460 , L461 , L589 , L602 , L603 , FINSEQ_1:2 , TARSKI:def 1;
end;
suppose L611: (ex B181 being (Element of ( NAT )) st (B181 in ( dom C157 ) & C169 = ( ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + B181 )));

L612: ( len ( C155 ^ <* C152 *> ) ) = ( ( len C155 ) + ( len <* C152 *> ) ) by FINSEQ_1:22
.= ( ( len C156 ) + 1 ) by L461 , FINSEQ_1:40
.= ( ( len C156 ) + ( len <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) by FINSEQ_1:40
.= ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) by FINSEQ_1:22;
L613: ( dom C158 ) = ( Seg ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) ) by L466 , FINSEQ_1:def 3
.= ( Seg ( ( len ( C155 ^ <* C152 *> ) ) + ( len C157 ) ) ) by FINSEQ_1:22
.= ( Seg ( ( ( len C155 ) + ( len <* C152 *> ) ) + ( len C157 ) ) ) by FINSEQ_1:22
.= ( Seg ( ( ( len C156 ) + 1 ) + ( len C157 ) ) ) by L461 , FINSEQ_1:40
.= ( Seg ( ( ( len C156 ) + ( len <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) ) by FINSEQ_1:40
.= ( Seg ( ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) ) by FINSEQ_1:22
.= ( Seg ( len ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) ) ) by FINSEQ_1:22
.= ( dom ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) ) by FINSEQ_1:def 3;
consider C171 being (Element of ( NAT )) such that L614: C171 in ( dom C157 ) and L615: C169 = ( ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + C171 ) by L611;
L616: ( ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) . C169 ) = ( C157 . C171 ) by L614 , L615 , FINSEQ_1:def 7
.= ( C158 . C169 ) by L466 , L614 , L615 , L612 , FINSEQ_1:def 7;
thus L617: thesis by L616 , L500 , L591 , L613;
end;
end;
thus L619: thesis by L593;
end;
L620: 1 <= D140 by L548 , XREAL_1:19;
L621: D140 <= ( len C160 ) by L478 , L482 , L548 , XREAL_1:19;
L622: ( C162 - ( len C159 ) ) in ( Seg ( len C160 ) ) by L621 , L620 , FINSEQ_1:1;
L623: ( Seg ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) ) = ( dom C158 ) by L466 , FINSEQ_1:def 3
.= ( dom ( the_arity_of C146 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C146 ) ) ) by FINSEQ_1:def 3;
L624: ( len ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) ) = ( ( len ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) by FINSEQ_1:22
.= ( ( ( len C156 ) + ( len <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) by FINSEQ_1:22
.= ( ( ( len C156 ) + 1 ) + ( len C157 ) ) by FINSEQ_1:40
.= ( ( ( len C155 ) + ( len <* C152 *> ) ) + ( len C157 ) ) by L461 , FINSEQ_1:40
.= ( ( len ( C155 ^ <* C152 *> ) ) + ( len C157 ) ) by FINSEQ_1:22
.= ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) by FINSEQ_1:22
.= ( len ( the_arity_of C146 ) ) by L623 , FINSEQ_1:6;
L625: ( len ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) ) = ( ( len ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) by FINSEQ_1:22
.= ( ( ( len C156 ) + ( len <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ) + ( len C157 ) ) by FINSEQ_1:22
.= ( ( ( len C156 ) + 1 ) + ( len C157 ) ) by FINSEQ_1:40
.= ( ( ( len C155 ) + ( len <* C152 *> ) ) + ( len C157 ) ) by L461 , FINSEQ_1:40
.= ( ( len ( C155 ^ <* C152 *> ) ) + ( len C157 ) ) by FINSEQ_1:22
.= ( len ( ( C155 ^ <* C152 *> ) ^ C157 ) ) by FINSEQ_1:22
.= ( len ( the_arity_of C146 ) ) by L623 , FINSEQ_1:6;
reconsider D141 = ( ( C156 ^ <* ( C160 . ( C162 - ( len C159 ) ) ) *> ) ^ C157 ) , D142 = ( ( C156 ^ <* ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) *> ) ^ C157 ) as (Element of ( Args (C146 , R17) )) by L625 , L590 , L559 , L624 , MSAFREE2:5;
L626: ( D136 . C162 ) = ( C161 . ( C162 - ( len C159 ) ) ) by L482 , L548 , FINSEQ_1:23
.= ( ( Den (C146 , R17) ) . D141 ) by L478 , L479 , L622;
L627: ( ( C162 + 1 ) - ( len C159 ) ) = ( ( C162 - ( len C159 ) ) + 1 ) by XCMPLX_1:29;
L628: [ ( C160 . ( C162 - ( len C159 ) ) ) , ( C160 . ( ( C162 + 1 ) - ( len C159 ) ) ) ] in ( ( C147 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) \/ ( C148 . ( ( the_arity_of C146 ) /. ( C154 + 1 ) ) ) ) by L627 , L477 , L556 , L552;
L629: ( C162 + 1 ) <= ( len D136 ) by L548 , NAT_1:13;
L630: ( ( len C159 ) + 1 ) <= ( C162 + 1 ) by L548 , NAT_1:12;
L631: ( D136 . ( C162 + 1 ) ) = ( C161 . ( ( C162 + 1 ) - ( len C159 ) ) ) by L630 , L482 , L629 , FINSEQ_1:23
.= ( ( Den (C146 , R17) ) . D142 ) by L478 , L479 , L555;
thus L632: [ ( D136 . C162 ) , ( D136 . ( C162 + 1 ) ) ] in ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) by L631 , L460 , L461 , L626 , L628 , L358;
end;
end;
thus L634: [ ( D136 . C162 ) , ( D136 . ( C162 + 1 ) ) ] in ( ( C147 . ( the_result_sort_of C146 ) ) \/ ( C148 . ( the_result_sort_of C146 ) ) ) by L509;
end;
end;
thus L491: thesis by L481 , L454 , L457 , L467 , EQREL_1:28;
end;
theorem
L492: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds (for B182 being (OperSymbol of R16) holds (for B183 , B184 being (MSCongruence of R17) holds (for B185 being  MSEquivalence-like (ManySortedRelation of R17) holds (B185 = ( B183 "\/" B184 ) implies (for B186 , B187 being (Element of ( Args (B182 , R17) )) holds ((for B188 being Nat holds (B188 in ( dom B186 ) implies [ ( B186 . B188 ) , ( B187 . B188 ) ] in ( B185 . ( ( the_arity_of B182 ) /. B188 ) ))) implies [ ( ( Den (B182 , R17) ) . B186 ) , ( ( Den (B182 , R17) ) . B187 ) ] in ( B185 . ( the_result_sort_of B182 ) )))))))))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
set D143 = ( {} );
let C172 being (OperSymbol of R16);
let C173 , C174 being (MSCongruence of R17);
let C175 being  MSEquivalence-like (ManySortedRelation of R17);
assume that
L493: C175 = ( C173 "\/" C174 );
let C176 , C177 being (Element of ( Args (C172 , R17) ));
defpred S6[ (Element of ( NAT )) ] means (for B189 , B190 , B191 being FinSequence holds ((( len B189 ) = $1 & ( len B189 ) = ( len B190 ) & C176 = ( B189 ^ B191 ) & (for B192 being Nat holds (B192 in ( dom B189 ) implies [ ( C176 . B192 ) , ( ( B190 ^ B191 ) . B192 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B192 ) )))) implies [ ( ( Den (C172 , R17) ) . C176 ) , ( ( Den (C172 , R17) ) . ( B190 ^ B191 ) ) ] in ( C175 . ( the_result_sort_of C172 ) )));
L494: (for B193 being (Element of ( NAT )) holds (S6[ B193 ] implies S6[ ( B193 + 1 ) ]))
proof
let C178 being (Element of ( NAT ));
assume that
L495: (for B194 , B195 , B196 being FinSequence holds ((( len B194 ) = C178 & ( len B194 ) = ( len B195 ) & C176 = ( B194 ^ B196 ) & (for B197 being Nat holds (B197 in ( dom B194 ) implies [ ( C176 . B197 ) , ( ( B195 ^ B196 ) . B197 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B197 ) )))) implies [ ( ( Den (C172 , R17) ) . C176 ) , ( ( Den (C172 , R17) ) . ( B195 ^ B196 ) ) ] in ( C175 . ( the_result_sort_of C172 ) )));
let C179 , C180 , C181 being FinSequence;
assume that
L496: ( len C179 ) = ( C178 + 1 )
and
L497: ( len C179 ) = ( len C180 )
and
L498: C176 = ( C179 ^ C181 )
and
L499: (for B198 being Nat holds (B198 in ( dom C179 ) implies [ ( C176 . B198 ) , ( ( C180 ^ C181 ) . B198 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B198 ) )));
L500: ( C178 + 1 ) in ( Seg ( len C179 ) ) by L496 , FINSEQ_1:4;
L501: ( C178 + 1 ) in ( dom C180 ) by L500 , L497 , FINSEQ_1:def 3;
set D144 = ( C180 ^ C181 );
L502: C180 <> ( {} ) by L496 , L497;
consider C182 being FinSequence, C183 being set such that L503: C180 = ( C182 ^ <* C183 *> ) by L502 , FINSEQ_1:46;
L504: ( C178 + 1 ) = ( ( len C182 ) + ( len <* C183 *> ) ) by L496 , L497 , L503 , FINSEQ_1:22
.= ( ( len C182 ) + 1 ) by FINSEQ_1:40;
L505: C183 = ( C180 . ( C178 + 1 ) ) by L504 , L503 , FINSEQ_1:42
.= ( D144 . ( C178 + 1 ) ) by L501 , FINSEQ_1:def 7;
L506: C179 <> ( {} ) by L496;
consider C184 being FinSequence, C185 being set such that L507: C179 = ( C184 ^ <* C185 *> ) by L506 , FINSEQ_1:46;
L508: ( C178 + 1 ) = ( ( len C184 ) + ( len <* C185 *> ) ) by L496 , L507 , FINSEQ_1:22
.= ( ( len C184 ) + 1 ) by FINSEQ_1:40;
L509: ( len C184 ) = ( len C182 ) by L508 , L504 , XCMPLX_1:2;
L510: ( dom C184 ) = ( Seg ( len C184 ) ) by FINSEQ_1:def 3
.= ( dom C182 ) by L509 , FINSEQ_1:def 3;
L511: (for B199 being (Element of ( NAT )) holds (B199 in ( dom C184 ) implies [ ( C184 . B199 ) , ( C182 . B199 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B199 ) )))
proof
let C186 being (Element of ( NAT ));
L512: ( len C184 ) <= ( len C179 ) by L496 , L508 , NAT_1:11;
L513: ( Seg ( len C184 ) ) c= ( Seg ( len C179 ) ) by L512 , FINSEQ_1:5;
assume L514: C186 in ( dom C184 );
L515: C186 in ( Seg ( len C184 ) ) by L514 , FINSEQ_1:def 3;
L516: C186 in ( Seg ( len C179 ) ) by L515 , L513;
L517: C186 in ( dom C179 ) by L516 , FINSEQ_1:def 3;
L518: ( C176 . C186 ) = ( C179 . C186 ) by L517 , L498 , FINSEQ_1:def 7
.= ( C184 . C186 ) by L507 , L514 , FINSEQ_1:def 7;
L519: ( dom C179 ) = ( Seg ( len C179 ) ) by FINSEQ_1:def 3
.= ( dom C180 ) by L497 , FINSEQ_1:def 3;
L520: ( D144 . C186 ) = ( C180 . C186 ) by L519 , L517 , FINSEQ_1:def 7
.= ( C182 . C186 ) by L503 , L510 , L514 , FINSEQ_1:def 7;
thus L521: thesis by L520 , L499 , L517 , L518;
end;
L522: ( C178 + 1 ) in ( dom C179 ) by L500 , FINSEQ_1:def 3;
L523: ( ( C184 ^ <* C185 *> ) ^ C181 ) = ( C184 ^ ( <* C185 *> ^ C181 ) ) by FINSEQ_1:32;
L524: ( ( C182 ^ <* C185 *> ) ^ C181 ) = ( C182 ^ ( <* C185 *> ^ C181 ) ) by FINSEQ_1:32;
L525: (for B200 being Nat holds (B200 in ( dom C184 ) implies [ ( C176 . B200 ) , ( ( ( C182 ^ <* C185 *> ) ^ C181 ) . B200 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B200 ) )))
proof
let C187 being Nat;
assume L526: C187 in ( dom C184 );
L527: ( ( ( C182 ^ <* C185 *> ) ^ C181 ) . C187 ) = ( C182 . C187 ) by L526 , L510 , L524 , FINSEQ_1:def 7;
L528: ( C176 . C187 ) = ( C184 . C187 ) by L498 , L507 , L523 , L526 , FINSEQ_1:def 7;
thus L529: thesis by L528 , L511 , L526 , L527;
end;
L530: C185 = ( C179 . ( C178 + 1 ) ) by L507 , L508 , FINSEQ_1:42
.= ( C176 . ( C178 + 1 ) ) by L498 , L522 , FINSEQ_1:def 7;
L531: [ C185 , C183 ] in ( C175 . ( ( the_arity_of C172 ) /. ( C178 + 1 ) ) ) by L530 , L499 , L522 , L505;
L532: ( len C184 ) = C178 by L508 , XCMPLX_1:2;
L533: [ ( ( Den (C172 , R17) ) . C176 ) , ( ( Den (C172 , R17) ) . ( ( C182 ^ <* C185 *> ) ^ C181 ) ) ] in ( C175 . ( the_result_sort_of C172 ) ) by L532 , L495 , L498 , L507 , L509 , L523 , L524 , L525;
thus L534: thesis by L533 , L493 , L498 , L507 , L503 , L508 , L509 , L511 , L531 , L453;
end;
L535: ( dom C177 ) = ( dom ( the_arity_of C172 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C172 ) ) ) by FINSEQ_1:def 3;
L536: ( dom C176 ) = ( dom ( the_arity_of C172 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C172 ) ) ) by FINSEQ_1:def 3;
reconsider D145 = C176 , D146 = C177 as FinSequence by L536 , L535 , FINSEQ_1:def 2;
assume L537: (for B201 being Nat holds (B201 in ( dom C176 ) implies [ ( C176 . B201 ) , ( C177 . B201 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B201 ) )));
L538: ( Seg ( len D146 ) ) = ( dom D146 ) by FINSEQ_1:def 3
.= ( dom ( the_arity_of C172 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C172 ) ) ) by FINSEQ_1:def 3;
L539: ( Seg ( len D145 ) ) = ( dom D145 ) by FINSEQ_1:def 3
.= ( dom ( the_arity_of C172 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C172 ) ) ) by FINSEQ_1:def 3;
L540: ( len D145 ) = ( len D146 ) by L539 , L538 , FINSEQ_1:6;
L541: C176 = ( D145 ^ D143 ) by FINSEQ_1:34;
L542: C177 = ( D146 ^ D143 ) by FINSEQ_1:34;
L543: S6[ ( 0 ) ]
proof
L544: ( field ( C175 . ( the_result_sort_of C172 ) ) ) = ( (the Sorts of R17) . ( the_result_sort_of C172 ) ) by ORDERS_1:12;
L545: ( C175 . ( the_result_sort_of C172 ) ) is_reflexive_in ( (the Sorts of R17) . ( the_result_sort_of C172 ) ) by L544 , RELAT_2:def 9;
L546: ( (the Sorts of R17) . ( the_result_sort_of C172 ) ) = ( (the Sorts of R17) . ( (the ResultSort of R16) . C172 ) ) by MSUALG_1:def 2
.= ( ( (the Sorts of R17) * (the ResultSort of R16) ) . C172 ) by FUNCT_2:15
.= ( Result (C172 , R17) ) by MSUALG_1:def 5;
let C188 , C189 , C190 being FinSequence;
assume that
L547: ( len C188 ) = ( 0 )
and
L548: ( len C188 ) = ( len C189 )
and
L549: C176 = ( C188 ^ C190 )
and
L550: (for B202 being Nat holds (B202 in ( dom C188 ) implies [ ( C176 . B202 ) , ( ( C189 ^ C190 ) . B202 ) ] in ( C175 . ( ( the_arity_of C172 ) /. B202 ) )));
L551: C188 = ( {} ) by L547;
L552: C189 = ( {} ) by L547 , L548;
thus L553: thesis by L552 , L549 , L551 , L546 , L545 , RELAT_2:def 1;
end;
L554: (for B203 being (Element of ( NAT )) holds S6[ B203 ]) from NAT_1:sch 1(L543 , L494);
thus L555: thesis by L554 , L537 , L540 , L541 , L542;
end;
theorem
L556: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds (for B204 , B205 being (MSCongruence of R17) holds ( B204 "\/" B205 ) is (MSCongruence of R17))))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
let C191 , C192 being (MSCongruence of R17);
reconsider D147 = ( C191 "\/" C192 ) as  MSEquivalence_Relation-like (ManySortedRelation of (the Sorts of R17));
reconsider D148 = D147 as (ManySortedRelation of R17);
reconsider D149 = D148 as  MSEquivalence-like (ManySortedRelation of R17) by MSUALG_4:def 3;
L557: (for B206 being (OperSymbol of R16) holds (for B207 , B208 being (Element of ( Args (B206 , R17) )) holds ((for B209 being Nat holds (B209 in ( dom B207 ) implies [ ( B207 . B209 ) , ( B208 . B209 ) ] in ( D149 . ( ( the_arity_of B206 ) /. B209 ) ))) implies [ ( ( Den (B206 , R17) ) . B207 ) , ( ( Den (B206 , R17) ) . B208 ) ] in ( D149 . ( the_result_sort_of B206 ) )))) by L492;
thus L558: thesis by L557 , MSUALG_4:def 4;
end;
theorem
L559: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds (for B210 , B211 being (MSCongruence of R17) holds ( B210 /\ B211 ) is (MSCongruence of R17))))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
let C193 , C194 being (MSCongruence of R17);
reconsider D150 = ( C193 /\ C194 ) as (Equivalence_Relation of (the Sorts of R17)) by L257;
reconsider D151 = D150 as  MSEquivalence_Relation-like (ManySortedRelation of (the Sorts of R17));
reconsider D152 = D151 as (ManySortedRelation of R17);
reconsider D153 = D152 as  MSEquivalence-like (ManySortedRelation of R17) by MSUALG_4:def 3;
L560: (for B212 being (OperSymbol of R16) holds (for B213 , B214 being (Element of ( Args (B212 , R17) )) holds ((for B215 being Nat holds (B215 in ( dom B213 ) implies [ ( B213 . B215 ) , ( B214 . B215 ) ] in ( D153 . ( ( the_arity_of B212 ) /. B215 ) ))) implies [ ( ( Den (B212 , R17) ) . B213 ) , ( ( Den (B212 , R17) ) . B214 ) ] in ( D153 . ( the_result_sort_of B212 ) ))))
proof
let C195 being (OperSymbol of R16);
let C196 , C197 being (Element of ( Args (C195 , R17) ));
assume that
L561: (for B216 being Nat holds (B216 in ( dom C196 ) implies [ ( C196 . B216 ) , ( C197 . B216 ) ] in ( D153 . ( ( the_arity_of C195 ) /. B216 ) )));
L562: (for B217 being Nat holds (B217 in ( dom C196 ) implies [ ( C196 . B217 ) , ( C197 . B217 ) ] in ( C193 . ( ( the_arity_of C195 ) /. B217 ) )))
proof
let C198 being Nat;
assume L563: C198 in ( dom C196 );
L564: [ ( C196 . C198 ) , ( C197 . C198 ) ] in ( D153 . ( ( the_arity_of C195 ) /. C198 ) ) by L563 , L561;
L565: [ ( C196 . C198 ) , ( C197 . C198 ) ] in ( ( C193 . ( ( the_arity_of C195 ) /. C198 ) ) /\ ( C194 . ( ( the_arity_of C195 ) /. C198 ) ) ) by L564 , PBOOLE:def 5;
thus L566: thesis by L565 , XBOOLE_0:def 4;
end;
L567: [ ( ( Den (C195 , R17) ) . C196 ) , ( ( Den (C195 , R17) ) . C197 ) ] in ( C193 . ( the_result_sort_of C195 ) ) by L562 , MSUALG_4:def 4;
L568: (for B218 being Nat holds (B218 in ( dom C196 ) implies [ ( C196 . B218 ) , ( C197 . B218 ) ] in ( C194 . ( ( the_arity_of C195 ) /. B218 ) )))
proof
let C199 being Nat;
assume L569: C199 in ( dom C196 );
L570: [ ( C196 . C199 ) , ( C197 . C199 ) ] in ( D153 . ( ( the_arity_of C195 ) /. C199 ) ) by L569 , L561;
L571: [ ( C196 . C199 ) , ( C197 . C199 ) ] in ( ( C193 . ( ( the_arity_of C195 ) /. C199 ) ) /\ ( C194 . ( ( the_arity_of C195 ) /. C199 ) ) ) by L570 , PBOOLE:def 5;
thus L572: thesis by L571 , XBOOLE_0:def 4;
end;
L573: [ ( ( Den (C195 , R17) ) . C196 ) , ( ( Den (C195 , R17) ) . C197 ) ] in ( C194 . ( the_result_sort_of C195 ) ) by L568 , MSUALG_4:def 4;
L574: ( ( C193 . ( the_result_sort_of C195 ) ) /\ ( C194 . ( the_result_sort_of C195 ) ) ) = ( D153 . ( the_result_sort_of C195 ) ) by PBOOLE:def 5;
thus L575: thesis by L574 , L567 , L573 , XBOOLE_0:def 4;
end;
thus L576: thesis by L560 , MSUALG_4:def 4;
end;
definition
let R16 being non  void non  empty ManySortedSign;
let C200 being  non-empty MSAlgebra over R16;
func CongrLatt C200 ->  strict (SubLattice of ( EqRelLatt (the Sorts of C200) )) means 
:L577: (for B219 being set holds (B219 in (the carrier of it) iff B219 is (MSCongruence of C200)));
existence
proof
set D154 = (the carrier of ( EqRelLatt (the Sorts of C200) ));
set D155 = the (MSCongruence of C200);
defpred S7[ set ] means $1 is (MSCongruence of C200);
deffunc H6((Element of R16)) = ( bool [: ( (the Sorts of C200) . $1 ) , ( (the Sorts of C200) . $1 ) :] );
consider C201 being (ManySortedSet of (the carrier of R16)) such that L578: (for B220 being (Element of (the carrier of R16)) holds ( C201 . B220 ) = H6(B220)) from PBOOLE:sch 5;
consider C202 being set such that L579: (for B221 being set holds (B221 in C202 iff (B221 in ( product C201 ) & S7[ B221 ]))) from XBOOLE_0:sch 1;
L580: (for B222 being (MSCongruence of C200) holds B222 in ( product C201 ))
proof
let C203 being (MSCongruence of C200);
L581:
now
let C204 being set;
assume L582: C204 in ( dom C201 );
reconsider D156 = C204 as (Element of (the carrier of R16)) by L582;
L583: ( C203 . D156 ) is (Subset of [: ( (the Sorts of C200) . D156 ) , ( (the Sorts of C200) . D156 ) :]);
L584: ( C201 . D156 ) = ( bool [: ( (the Sorts of C200) . D156 ) , ( (the Sorts of C200) . D156 ) :] ) by L578;
thus L585: ( C203 . C204 ) in ( C201 . C204 ) by L584 , L583;
end;
L586: ( dom C203 ) = (the carrier of R16) by PARTFUN1:def 2
.= ( dom C201 ) by PARTFUN1:def 2;
thus L587: thesis by L586 , L581 , CARD_3:9;
end;
L588: (for B223 being set holds (B223 in C202 iff B223 is (MSCongruence of C200)))
proof
let C205 being set;
thus L589: (C205 in C202 implies C205 is (MSCongruence of C200)) by L579;
thus L590: (C205 is (MSCongruence of C200) implies C205 in C202)
proof
assume L591: C205 is (MSCongruence of C200);
L592: C205 in ( product C201 ) by L591 , L580;
thus L593: thesis by L592 , L579 , L591;
end;

end;
L591: D155 in C202 by L588;
reconsider D157 = C202 as non  empty set by L591;
set D158 = ( (the L_join of ( EqRelLatt (the Sorts of C200) )) || D157 );
set D159 = ( (the L_meet of ( EqRelLatt (the Sorts of C200) )) || D157 );
L592:
now
let R3 being set;
assume L593: R3 in D157;
L594: R3 is (MSCongruence of C200) by L593 , L588;
thus L595: R3 in (the carrier of ( EqRelLatt (the Sorts of C200) )) by L594 , L268;
end;
L596: D157 c= D154 by L592 , TARSKI:def 3;
L597: [: D157 , D157 :] c= [: D154 , D154 :] by L596 , ZFMISC_1:96;
reconsider D160 = D158 , D161 = D159 as (Function of [: D157 , D157 :] , D154) by L597 , FUNCT_2:32;
L598: ( dom D161 ) = [: D157 , D157 :] by FUNCT_2:def 1;
L599:
now
let C206 being set;
assume L600: C206 in [: D157 , D157 :];
consider C207 , C208 being set such that L601: C206 = [ C207 , C208 ] by L600 , RELAT_1:def 1;
L602: C208 in D157 by L600 , L601 , ZFMISC_1:87;
L603: C207 in D157 by L600 , L601 , ZFMISC_1:87;
reconsider D162 = C207 , D163 = C208 as (MSCongruence of C200) by L603 , L588 , L602;
L604: D163 in D157 by L588;
L605: D162 in D157 by L588;
L606: [ C207 , C208 ] in [: D157 , D157 :] by L605 , L604 , ZFMISC_1:87;
L607: ( D161 . C206 ) = ( (the L_meet of ( EqRelLatt (the Sorts of C200) )) . (C207 , C208) ) by L606 , L601 , FUNCT_1:49
.= ( D162 /\ D163 ) by L268;
L608: ( D161 . C206 ) is (MSCongruence of C200) by L607 , L559;
thus L609: ( D161 . C206 ) in D157 by L608 , L588;
end;
reconsider D164 = D161 as (BinOp of D157) by L599 , L598 , FUNCT_2:3;
L610: ( dom D160 ) = [: D157 , D157 :] by FUNCT_2:def 1;
L611:
now
let C209 being set;
assume L612: C209 in [: D157 , D157 :];
consider C210 , C211 being set such that L613: C209 = [ C210 , C211 ] by L612 , RELAT_1:def 1;
L614: C211 in D157 by L612 , L613 , ZFMISC_1:87;
L615: C210 in D157 by L612 , L613 , ZFMISC_1:87;
reconsider D165 = C210 , D166 = C211 as (MSCongruence of C200) by L615 , L588 , L614;
L616: D166 in D157 by L588;
L617: D165 in D157 by L588;
L618: [ C210 , C211 ] in [: D157 , D157 :] by L617 , L616 , ZFMISC_1:87;
L619: ( D160 . C209 ) = ( (the L_join of ( EqRelLatt (the Sorts of C200) )) . (C210 , C211) ) by L618 , L613 , FUNCT_1:49
.= ( D165 "\/" D166 ) by L268;
L620: ( D160 . C209 ) is (MSCongruence of C200) by L619 , L556;
thus L621: ( D160 . C209 ) in D157 by L620 , L588;
end;
reconsider D167 = D160 as (BinOp of D157) by L611 , L610 , FUNCT_2:3;
reconsider D168 = LattStr (# D157 , D167 , D164 #) as non  empty LattStr;
L622: (for B224 , B225 being (MSCongruence of C200) holds (( D167 . (B224 , B225) ) = ( B224 "\/" B225 ) & ( D164 . (B224 , B225) ) = ( B224 /\ B225 )))
proof
let C212 , C213 being (MSCongruence of C200);
L623: C213 in D157 by L588;
L624: C212 in D157 by L588;
L625: [ C212 , C213 ] in [: D157 , D157 :] by L624 , L623 , ZFMISC_1:87;
thus L626: ( D167 . (C212 , C213) ) = ( (the L_join of ( EqRelLatt (the Sorts of C200) )) . (C212 , C213) ) by L625 , FUNCT_1:49
.= ( C212 "\/" C213 ) by L268;
thus L627: ( D164 . (C212 , C213) ) = ( (the L_meet of ( EqRelLatt (the Sorts of C200) )) . (C212 , C213) ) by L625 , FUNCT_1:49
.= ( C212 /\ C213 ) by L268;
end;
L628:
now
let C214 , C215 being (Element of D157);
reconsider D169 = C214 , D170 = C215 as (MSCongruence of C200) by L588;
thus L629: ( D167 . (C214 , C215) ) = ( D169 "\/" D170 ) by L622
.= ( D167 . (C215 , C214) ) by L622;
end;
L630: (for B226 , B227 being (Element of D168) holds ( B226 "\/" B227 ) = ( B227 "\/" B226 ))
proof
let C216 , C217 being (Element of D168);
thus L631: ( C216 "\/" C217 ) = ( D167 . (C216 , C217) ) by LATTICES:def 1
.= ( (the L_join of D168) . (C217 , C216) ) by L628
.= ( C217 "\/" C216 ) by LATTICES:def 1;
end;
L632:
now
let C218 , C219 , C220 being (Element of D157);
reconsider D171 = C218 , D172 = C219 , D173 = C220 as (MSCongruence of C200) by L588;
reconsider D174 = ( D172 /\ D173 ) as (MSCongruence of C200) by L559;
reconsider D175 = ( D171 /\ D172 ) as (MSCongruence of C200) by L559;
thus L633: ( D164 . (C218 , ( D164 . (C219 , C220) )) ) = ( D164 . (C218 , D174) ) by L622
.= ( D171 /\ ( D172 /\ D173 ) ) by L622
.= ( ( D171 /\ D172 ) /\ D173 ) by PBOOLE:29
.= ( D164 . (D175 , C220) ) by L622
.= ( D164 . (( D164 . (C218 , C219) ) , C220) ) by L622;
end;
L634: (for B228 , B229 , B230 being (Element of D168) holds ( B228 "/\" ( B229 "/\" B230 ) ) = ( ( B228 "/\" B229 ) "/\" B230 ))
proof
let C221 , C222 , C223 being (Element of D168);
thus L635: ( C221 "/\" ( C222 "/\" C223 ) ) = ( (the L_meet of D168) . (C221 , ( C222 "/\" C223 )) ) by LATTICES:def 2
.= ( D164 . (C221 , ( D164 . (C222 , C223) )) ) by LATTICES:def 2
.= ( (the L_meet of D168) . (( (the L_meet of D168) . (C221 , C222) ) , C223) ) by L632
.= ( (the L_meet of D168) . (( C221 "/\" C222 ) , C223) ) by LATTICES:def 2
.= ( ( C221 "/\" C222 ) "/\" C223 ) by LATTICES:def 2;
end;
L636:
now
let C224 , C225 , C226 being (Element of D157);
reconsider D176 = C224 , D177 = C225 , D178 = C226 as (MSCongruence of C200) by L588;
reconsider D179 = ( D177 "\/" D178 ) as (MSCongruence of C200) by L556;
reconsider D180 = ( D176 "\/" D177 ) as (MSCongruence of C200) by L556;
thus L637: ( D167 . (C224 , ( D167 . (C225 , C226) )) ) = ( D167 . (C224 , D179) ) by L622
.= ( D176 "\/" ( D177 "\/" D178 ) ) by L622
.= ( ( D176 "\/" D177 ) "\/" D178 ) by L207
.= ( D167 . (D180 , C226) ) by L622
.= ( D167 . (( D167 . (C224 , C225) ) , C226) ) by L622;
end;
L638: (for B231 , B232 , B233 being (Element of D168) holds ( B231 "\/" ( B232 "\/" B233 ) ) = ( ( B231 "\/" B232 ) "\/" B233 ))
proof
let C227 , C228 , C229 being (Element of D168);
thus L639: ( C227 "\/" ( C228 "\/" C229 ) ) = ( (the L_join of D168) . (C227 , ( C228 "\/" C229 )) ) by LATTICES:def 1
.= ( D167 . (C227 , ( D167 . (C228 , C229) )) ) by LATTICES:def 1
.= ( (the L_join of D168) . (( (the L_join of D168) . (C227 , C228) ) , C229) ) by L636
.= ( (the L_join of D168) . (( C227 "\/" C228 ) , C229) ) by LATTICES:def 1
.= ( ( C227 "\/" C228 ) "\/" C229 ) by LATTICES:def 1;
end;
L640:
now
let C230 , C231 being (Element of D157);
reconsider D181 = C230 , D182 = C231 as (MSCongruence of C200) by L588;
thus L641: ( D164 . (C230 , C231) ) = ( D182 /\ D181 ) by L622
.= ( D164 . (C231 , C230) ) by L622;
end;
L642: (for B234 , B235 being (Element of D168) holds ( B234 "/\" B235 ) = ( B235 "/\" B234 ))
proof
let C232 , C233 being (Element of D168);
thus L643: ( C232 "/\" C233 ) = ( D164 . (C232 , C233) ) by LATTICES:def 2
.= ( (the L_meet of D168) . (C233 , C232) ) by L640
.= ( C233 "/\" C232 ) by LATTICES:def 2;
end;
L644: (for B236 , B237 being (Element of D168) holds ( B236 "/\" ( B236 "\/" B237 ) ) = B236)
proof
let C234 , C235 being (Element of D168);
L645: ( D164 . (C234 , ( D167 . (C234 , C235) )) ) = C234
proof
reconsider D183 = C234 , D184 = C235 as (MSCongruence of C200) by L588;
reconsider D185 = ( D183 "\/" D184 ) as (MSCongruence of C200) by L556;
thus L646: ( D164 . (C234 , ( D167 . (C234 , C235) )) ) = ( D164 . (C234 , D185) ) by L622
.= ( D183 /\ ( D183 "\/" D184 ) ) by L622
.= C234 by L245;
end;
thus L647: ( C234 "/\" ( C234 "\/" C235 ) ) = ( (the L_meet of D168) . (C234 , ( C234 "\/" C235 )) ) by LATTICES:def 2
.= C234 by L645 , LATTICES:def 1;
end;
L648: (for B238 , B239 being (Element of D168) holds ( ( B238 "/\" B239 ) "\/" B239 ) = B239)
proof
let C236 , C237 being (Element of D168);
L649: ( D167 . (( D164 . (C236 , C237) ) , C237) ) = C237
proof
reconsider D186 = C236 , D187 = C237 as (MSCongruence of C200) by L588;
reconsider D188 = ( D186 /\ D187 ) as (MSCongruence of C200) by L559;
thus L650: ( D167 . (( D164 . (C236 , C237) ) , C237) ) = ( D167 . (( D186 /\ D187 ) , D187) ) by L622
.= ( D188 "\/" D187 ) by L622
.= C237 by L252;
end;
thus L651: ( ( C236 "/\" C237 ) "\/" C237 ) = ( (the L_join of D168) . (( C236 "/\" C237 ) , C237) ) by LATTICES:def 1
.= C237 by L649 , LATTICES:def 2;
end;
L652: D168 is  join-commutative  join-associative  meet-absorbing  meet-commutative  meet-associative  join-absorbing by L648 , L630 , L638 , L642 , L634 , L644 , LATTICES:def 4 , LATTICES:def 5 , LATTICES:def 6 , LATTICES:def 7 , LATTICES:def 8 , LATTICES:def 9;
reconsider D189 = D168 as Lattice by L652;
reconsider D190 = D189 as  strict (SubLattice of ( EqRelLatt (the Sorts of C200) )) by L596 , NAT_LAT:def 12;
take D190;
thus L653: thesis by L588;
end;
uniqueness
proof
let C238 , C239 being  strict (SubLattice of ( EqRelLatt (the Sorts of C200) ));
assume that
L654: (for B240 being set holds (B240 in (the carrier of C238) iff B240 is (MSCongruence of C200)))
and
L655: (for B241 being set holds (B241 in (the carrier of C239) iff B241 is (MSCongruence of C200)));
L656:
now
let C240 being set;
L657: (C240 in (the carrier of C239) iff C240 is (MSCongruence of C200)) by L655;
thus L658: (C240 in (the carrier of C238) iff C240 in (the carrier of C239)) by L657 , L654;
end;
L659: (the carrier of C238) = (the carrier of C239) by L656 , TARSKI:1;
L660: (the L_join of C238) = ( (the L_join of ( EqRelLatt (the Sorts of C200) )) || (the carrier of C239) ) by L659 , NAT_LAT:def 12
.= (the L_join of C239) by NAT_LAT:def 12;
L661: (the L_meet of C238) = ( (the L_meet of ( EqRelLatt (the Sorts of C200) )) || (the carrier of C239) ) by L659 , NAT_LAT:def 12
.= (the L_meet of C239) by NAT_LAT:def 12;
thus L662: thesis by L661 , L656 , L660 , TARSKI:1;
end;
end;
theorem
L664: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds ( id (the Sorts of R17) ) is (MSCongruence of R17)))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
set D191 = ( id (the Sorts of R17) );
L665: (for B242 being set holds (B242 in (the carrier of R16) implies ( D191 . B242 ) is (Relation of ( (the Sorts of R17) . B242 ))))
proof
let C241 being set;
assume L666: C241 in (the carrier of R16);
L667: ( D191 . C241 ) = ( id ( (the Sorts of R17) . C241 ) ) by L666 , MSUALG_3:def 1;
thus L668: thesis by L667;
end;
reconsider D192 = D191 as (ManySortedRelation of (the Sorts of R17)) by L665 , MSUALG_4:def 1;
L669: (for B243 being set holds (for B244 being (Relation of ( (the Sorts of R17) . B243 )) holds ((B243 in (the carrier of R16) & ( D192 . B243 ) = B244) implies B244 is (Equivalence_Relation of ( (the Sorts of R17) . B243 )))))
proof
let C242 being set;
let C243 being (Relation of ( (the Sorts of R17) . C242 ));
assume that
L670: C242 in (the carrier of R16)
and
L671: ( D192 . C242 ) = C243;
L672: ( D192 . C242 ) = ( id ( (the Sorts of R17) . C242 ) ) by L670 , MSUALG_3:def 1;
thus L673: thesis by L672 , L671;
end;
reconsider D193 = D192 as  MSEquivalence_Relation-like (ManySortedRelation of (the Sorts of R17)) by L669 , MSUALG_4:def 2;
reconsider D194 = D193 as (ManySortedRelation of R17);
reconsider D195 = D194 as  MSEquivalence-like (ManySortedRelation of R17) by MSUALG_4:def 3;
L674: (for B245 being (OperSymbol of R16) holds (for B246 , B247 being (Element of ( Args (B245 , R17) )) holds ((for B248 being Nat holds (B248 in ( dom B246 ) implies [ ( B246 . B248 ) , ( B247 . B248 ) ] in ( D195 . ( ( the_arity_of B245 ) /. B248 ) ))) implies [ ( ( Den (B245 , R17) ) . B246 ) , ( ( Den (B245 , R17) ) . B247 ) ] in ( D195 . ( the_result_sort_of B245 ) ))))
proof
let C244 being (OperSymbol of R16);
let C245 , C246 being (Element of ( Args (C244 , R17) ));
assume that
L675: (for B249 being Nat holds (B249 in ( dom C245 ) implies [ ( C245 . B249 ) , ( C246 . B249 ) ] in ( D195 . ( ( the_arity_of C244 ) /. B249 ) )));
L676: ( dom C246 ) = ( dom ( the_arity_of C244 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C244 ) ) ) by FINSEQ_1:def 3;
L677: ( dom C245 ) = ( dom ( the_arity_of C244 ) ) by MSUALG_3:6
.= ( Seg ( len ( the_arity_of C244 ) ) ) by FINSEQ_1:def 3;
reconsider D196 = C245 , D197 = C246 as FinSequence by L677 , L676 , FINSEQ_1:def 2;
L678:
now
let C247 being Nat;
assume that
L679: C247 in ( dom C245 );
L680: ( D195 . ( ( the_arity_of C244 ) /. C247 ) ) = ( id ( (the Sorts of R17) . ( ( the_arity_of C244 ) /. C247 ) ) ) by MSUALG_3:def 1;
L681: [ ( C245 . C247 ) , ( C246 . C247 ) ] in ( id ( (the Sorts of R17) . ( ( the_arity_of C244 ) /. C247 ) ) ) by L680 , L675 , L679;
thus L682: ( D196 . C247 ) = ( D197 . C247 ) by L681 , RELAT_1:def 10;
end;
L683: C245 = C246 by L678 , L677 , L676 , FINSEQ_1:13;
L684: ( ( Den (C244 , R17) ) . C245 ) in ( Result (C244 , R17) );
L685: ( ( Den (C244 , R17) ) . C245 ) in ( ( (the Sorts of R17) * (the ResultSort of R16) ) . C244 ) by L684 , MSUALG_1:def 5;
L686: C244 in (the carrier' of R16);
L687: C244 in ( dom (the ResultSort of R16) ) by L686 , FUNCT_2:def 1;
L688: ( ( Den (C244 , R17) ) . C245 ) in ( (the Sorts of R17) . ( (the ResultSort of R16) . C244 ) ) by L687 , L685 , FUNCT_1:13;
L689: ( ( Den (C244 , R17) ) . C245 ) in ( (the Sorts of R17) . ( the_result_sort_of C244 ) ) by L688 , MSUALG_1:def 2;
L690: ( D195 . ( the_result_sort_of C244 ) ) = ( id ( (the Sorts of R17) . ( the_result_sort_of C244 ) ) ) by MSUALG_3:def 1;
thus L691: thesis by L690 , L683 , L689 , RELAT_1:def 10;
end;
thus L692: thesis by L674 , MSUALG_4:def 4;
end;
theorem
L693: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds [| (the Sorts of R17) , (the Sorts of R17) |] is (MSCongruence of R17)))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
set D198 = [| (the Sorts of R17) , (the Sorts of R17) |];
L694: (for B250 being set holds (B250 in (the carrier of R16) implies ( D198 . B250 ) is (Relation of ( (the Sorts of R17) . B250 ))))
proof
let C248 being set;
assume L695: C248 in (the carrier of R16);
L696: ( D198 . C248 ) c= [: ( (the Sorts of R17) . C248 ) , ( (the Sorts of R17) . C248 ) :] by L695 , PBOOLE:def 16;
thus L697: thesis by L696;
end;
reconsider D199 = D198 as (ManySortedRelation of (the Sorts of R17)) by L694 , MSUALG_4:def 1;
L698: (for B251 being set holds (for B252 being (Relation of ( (the Sorts of R17) . B251 )) holds ((B251 in (the carrier of R16) & ( D199 . B251 ) = B252) implies B252 is (Equivalence_Relation of ( (the Sorts of R17) . B251 )))))
proof
let C249 being set;
let C250 being (Relation of ( (the Sorts of R17) . C249 ));
assume that
L699: C249 in (the carrier of R16)
and
L700: ( D199 . C249 ) = C250;
L701: ( D199 . C249 ) = ( nabla ( (the Sorts of R17) . C249 ) ) by L699 , PBOOLE:def 16;
thus L702: thesis by L701 , L700;
end;
reconsider D200 = D199 as  MSEquivalence_Relation-like (ManySortedRelation of (the Sorts of R17)) by L698 , MSUALG_4:def 2;
reconsider D201 = D200 as  MSEquivalence-like (ManySortedRelation of R17) by MSUALG_4:def 3;
L703: (for B253 being (OperSymbol of R16) holds (for B254 , B255 being (Element of ( Args (B253 , R17) )) holds ((for B256 being Nat holds (B256 in ( dom B254 ) implies [ ( B254 . B256 ) , ( B255 . B256 ) ] in ( D201 . ( ( the_arity_of B253 ) /. B256 ) ))) implies [ ( ( Den (B253 , R17) ) . B254 ) , ( ( Den (B253 , R17) ) . B255 ) ] in ( D201 . ( the_result_sort_of B253 ) ))))
proof
let C251 being (OperSymbol of R16);
let C252 , C253 being (Element of ( Args (C251 , R17) ));
assume that
L704: (for B257 being Nat holds (B257 in ( dom C252 ) implies [ ( C252 . B257 ) , ( C253 . B257 ) ] in ( D201 . ( ( the_arity_of C251 ) /. B257 ) )));
L705: C251 in (the carrier' of R16);
L706: C251 in ( dom (the ResultSort of R16) ) by L705 , FUNCT_2:def 1;
L707: ( ( Den (C251 , R17) ) . C253 ) in ( Result (C251 , R17) );
L708: ( ( Den (C251 , R17) ) . C253 ) in ( ( (the Sorts of R17) * (the ResultSort of R16) ) . C251 ) by L707 , MSUALG_1:def 5;
L709: ( ( Den (C251 , R17) ) . C253 ) in ( (the Sorts of R17) . ( (the ResultSort of R16) . C251 ) ) by L708 , L706 , FUNCT_1:13;
L710: ( ( Den (C251 , R17) ) . C253 ) in ( (the Sorts of R17) . ( the_result_sort_of C251 ) ) by L709 , MSUALG_1:def 2;
L711: ( ( Den (C251 , R17) ) . C252 ) in ( Result (C251 , R17) );
L712: ( ( Den (C251 , R17) ) . C252 ) in ( ( (the Sorts of R17) * (the ResultSort of R16) ) . C251 ) by L711 , MSUALG_1:def 5;
L713: ( ( Den (C251 , R17) ) . C252 ) in ( (the Sorts of R17) . ( (the ResultSort of R16) . C251 ) ) by L712 , L706 , FUNCT_1:13;
L714: ( ( Den (C251 , R17) ) . C252 ) in ( (the Sorts of R17) . ( the_result_sort_of C251 ) ) by L713 , MSUALG_1:def 2;
L715: ( D201 . ( the_result_sort_of C251 ) ) = [: ( (the Sorts of R17) . ( the_result_sort_of C251 ) ) , ( (the Sorts of R17) . ( the_result_sort_of C251 ) ) :] by PBOOLE:def 16;
thus L716: thesis by L715 , L714 , L710 , ZFMISC_1:87;
end;
thus L717: thesis by L703 , MSUALG_4:def 4;
end;
registration
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
cluster ( CongrLatt R17 ) ->  bounded;
coherence
proof
L718: (ex B258 being (Element of ( CongrLatt R17 )) st (for B259 being (Element of ( CongrLatt R17 )) holds (( B258 "\/" B259 ) = B258 & ( B259 "\/" B258 ) = B258)))
proof
reconsider D202 = [| (the Sorts of R17) , (the Sorts of R17) |] as (MSCongruence of R17) by L693;
L719: (the L_join of ( CongrLatt R17 )) = ( (the L_join of ( EqRelLatt (the Sorts of R17) )) || (the carrier of ( CongrLatt R17 )) ) by NAT_LAT:def 12;
reconsider D203 = D202 as (Element of ( CongrLatt R17 )) by L577;
take D203;
let C254 being (Element of ( CongrLatt R17 ));
L720: [ D203 , C254 ] in [: (the carrier of ( CongrLatt R17 )) , (the carrier of ( CongrLatt R17 )) :] by ZFMISC_1:87;
reconsider D204 = C254 as (MSCongruence of R17) by L577;
L721:
now
let C255 being set;
assume L722: C255 in (the carrier of R16);
reconsider D205 = C255 as (Element of R16) by L722;
L723: (ex B260 being (ManySortedRelation of (the Sorts of R17)) st (B260 = ( D202 \/ D204 ) & ( D202 "\/" D204 ) = ( EqCl B260 ))) by L171;
reconsider D206 = ( D202 . D205 ) , D207 = ( D204 . D205 ) as (Equivalence_Relation of ( (the Sorts of R17) . C255 ));
L724: ( ( D202 \/ D204 ) . C255 ) = ( ( D202 . C255 ) \/ ( D204 . C255 ) ) by L722 , PBOOLE:def 4
.= ( ( nabla ( (the Sorts of R17) . C255 ) ) \/ D207 ) by PBOOLE:def 16
.= ( nabla ( (the Sorts of R17) . C255 ) ) by EQREL_1:1
.= ( D202 . C255 ) by L722 , PBOOLE:def 16;
thus L725: ( ( D202 "\/" D204 ) . C255 ) = ( EqCl D206 ) by L724 , L723 , L148
.= ( D202 . C255 ) by L14;
end;
thus L726: ( D203 "\/" C254 ) = ( (the L_join of ( CongrLatt R17 )) . (D203 , C254) ) by LATTICES:def 1
.= ( (the L_join of ( EqRelLatt (the Sorts of R17) )) . (D203 , C254) ) by L719 , L720 , FUNCT_1:49
.= ( D202 "\/" D204 ) by L268
.= D203 by L721 , PBOOLE:3;
thus L727: thesis by L726;
end;
L728: ( CongrLatt R17 ) is  upper-bounded by L718 , LATTICES:def 14;
L729: (ex B261 being (Element of ( CongrLatt R17 )) st (for B262 being (Element of ( CongrLatt R17 )) holds (( B261 "/\" B262 ) = B261 & ( B262 "/\" B261 ) = B261)))
proof
reconsider D208 = ( id (the Sorts of R17) ) as (MSCongruence of R17) by L664;
L730: (the L_meet of ( CongrLatt R17 )) = ( (the L_meet of ( EqRelLatt (the Sorts of R17) )) || (the carrier of ( CongrLatt R17 )) ) by NAT_LAT:def 12;
reconsider D209 = D208 as (Element of ( CongrLatt R17 )) by L577;
take D209;
let C256 being (Element of ( CongrLatt R17 ));
L731: [ D209 , C256 ] in [: (the carrier of ( CongrLatt R17 )) , (the carrier of ( CongrLatt R17 )) :] by ZFMISC_1:87;
reconsider D210 = C256 as (MSCongruence of R17) by L577;
L732:
now
let C257 being set;
assume L733: C257 in (the carrier of R16);
reconsider D211 = C257 as (Element of R16) by L733;
reconsider D212 = ( D210 . D211 ) as (Equivalence_Relation of ( (the Sorts of R17) . C257 ));
thus L734: ( ( D208 /\ D210 ) . C257 ) = ( ( D208 . C257 ) /\ ( D210 . C257 ) ) by L733 , PBOOLE:def 5
.= ( ( id ( (the Sorts of R17) . C257 ) ) /\ D212 ) by MSUALG_3:def 1
.= ( id ( (the Sorts of R17) . C257 ) ) by EQREL_1:10
.= ( D208 . C257 ) by L733 , MSUALG_3:def 1;
end;
thus L735: ( D209 "/\" C256 ) = ( (the L_meet of ( CongrLatt R17 )) . (D209 , C256) ) by LATTICES:def 2
.= ( (the L_meet of ( EqRelLatt (the Sorts of R17) )) . (D209 , C256) ) by L730 , L731 , FUNCT_1:49
.= ( D208 /\ D210 ) by L268
.= D209 by L732 , PBOOLE:3;
thus L736: thesis by L735;
end;
L737: ( CongrLatt R17 ) is  lower-bounded by L729 , LATTICES:def 13;
thus L738: thesis by L737 , L728;
end;
end;
theorem
L740: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds ( Bottom ( CongrLatt R17 ) ) = ( id (the Sorts of R17) )))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
set D213 = ( id (the Sorts of R17) );
L741: D213 is (MSCongruence of R17) by L664;
reconsider D214 = D213 as (Element of ( CongrLatt R17 )) by L741 , L577;
L742: (the L_meet of ( CongrLatt R17 )) = ( (the L_meet of ( EqRelLatt (the Sorts of R17) )) || (the carrier of ( CongrLatt R17 )) ) by NAT_LAT:def 12;
L743:
now
let C258 being (Element of ( CongrLatt R17 ));
reconsider D215 = D214 , D216 = C258 as (Equivalence_Relation of (the Sorts of R17)) by L577;
L744: [ D214 , C258 ] in [: (the carrier of ( CongrLatt R17 )) , (the carrier of ( CongrLatt R17 )) :] by ZFMISC_1:87;
L745:
now
let C259 being set;
assume L746: C259 in (the carrier of R16);
reconsider D217 = C259 as (Element of R16) by L746;
reconsider D218 = ( D216 . D217 ) as (Equivalence_Relation of ( (the Sorts of R17) . C259 )) by MSUALG_4:def 2;
thus L747: ( ( D215 /\ D216 ) . C259 ) = ( ( D215 . C259 ) /\ ( D216 . C259 ) ) by L746 , PBOOLE:def 5
.= ( ( id ( (the Sorts of R17) . C259 ) ) /\ D218 ) by MSUALG_3:def 1
.= ( id ( (the Sorts of R17) . C259 ) ) by EQREL_1:10
.= ( D215 . C259 ) by L746 , MSUALG_3:def 1;
end;
thus L748: ( D214 "/\" C258 ) = ( (the L_meet of ( CongrLatt R17 )) . (D214 , C258) ) by LATTICES:def 2
.= ( (the L_meet of ( EqRelLatt (the Sorts of R17) )) . (D214 , C258) ) by L742 , L744 , FUNCT_1:49
.= ( D215 /\ D216 ) by L268
.= D214 by L745 , PBOOLE:3;
thus L749: ( C258 "/\" D214 ) = D214 by L748;
end;
thus L750: thesis by L743 , LATTICES:def 16;
end;
theorem
L751: (for R16 being non  void non  empty ManySortedSign holds (for R17 being  non-empty MSAlgebra over R16 holds ( Top ( CongrLatt R17 ) ) = [| (the Sorts of R17) , (the Sorts of R17) |]))
proof
let R16 being non  void non  empty ManySortedSign;
let R17 being  non-empty MSAlgebra over R16;
set D219 = [| (the Sorts of R17) , (the Sorts of R17) |];
L752: D219 is (MSCongruence of R17) by L693;
reconsider D220 = D219 as (Element of ( CongrLatt R17 )) by L752 , L577;
L753: (the L_join of ( CongrLatt R17 )) = ( (the L_join of ( EqRelLatt (the Sorts of R17) )) || (the carrier of ( CongrLatt R17 )) ) by NAT_LAT:def 12;
L754:
now
let C260 being (Element of ( CongrLatt R17 ));
reconsider D221 = D220 , D222 = C260 as (Equivalence_Relation of (the Sorts of R17)) by L577;
L755: [ D220 , C260 ] in [: (the carrier of ( CongrLatt R17 )) , (the carrier of ( CongrLatt R17 )) :] by ZFMISC_1:87;
L756:
now
let C261 being set;
assume L757: C261 in (the carrier of R16);
reconsider D223 = C261 as (Element of R16) by L757;
L758: (ex B263 being (ManySortedRelation of (the Sorts of R17)) st (B263 = ( D221 \/ D222 ) & ( D221 "\/" D222 ) = ( EqCl B263 ))) by L171;
reconsider D224 = ( D221 . D223 ) , D225 = ( D222 . D223 ) as (Equivalence_Relation of ( (the Sorts of R17) . C261 )) by MSUALG_4:def 2;
L759: ( ( D221 \/ D222 ) . C261 ) = ( ( D221 . C261 ) \/ ( D222 . C261 ) ) by L757 , PBOOLE:def 4
.= ( ( nabla ( (the Sorts of R17) . C261 ) ) \/ D225 ) by PBOOLE:def 16
.= ( nabla ( (the Sorts of R17) . C261 ) ) by EQREL_1:1
.= ( D221 . C261 ) by L757 , PBOOLE:def 16;
thus L760: ( ( D221 "\/" D222 ) . C261 ) = ( EqCl D224 ) by L759 , L758 , L148
.= ( D221 . C261 ) by L14;
end;
thus L761: ( D220 "\/" C260 ) = ( (the L_join of ( CongrLatt R17 )) . (D220 , C260) ) by LATTICES:def 1
.= ( (the L_join of ( EqRelLatt (the Sorts of R17) )) . (D220 , C260) ) by L753 , L755 , FUNCT_1:49
.= ( D221 "\/" D222 ) by L268
.= D220 by L756 , PBOOLE:3;
thus L762: ( C260 "\/" D220 ) = D220 by L761;
end;
thus L763: thesis by L754 , LATTICES:def 17;
end;
theorem
L764: (for R3 being set holds (for B264 being set holds (R3 in (the carrier of ( EqRelLatt B264 )) iff R3 is (Equivalence_Relation of B264))))
proof
let R3 being set;
let C262 being set;
L765: (the carrier of ( EqRelLatt C262 )) = { B265 where B265 is (Relation of C262 , C262) : B265 is (Equivalence_Relation of C262) } by L17;
thus L766: (R3 in (the carrier of ( EqRelLatt C262 )) implies R3 is (Equivalence_Relation of C262))
proof
assume L767: R3 in (the carrier of ( EqRelLatt C262 ));
L768: (ex B266 being (Relation of C262 , C262) st (R3 = B266 & B266 is (Equivalence_Relation of C262))) by L767 , L765;
thus L769: thesis by L768;
end;

thus L770: thesis by L765;
end;
