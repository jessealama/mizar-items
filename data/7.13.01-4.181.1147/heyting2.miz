:: Lattice of Substitutions Is a Heyting Algebra
::  by Adam Grabowski
::
:: Received December 31, 1998
:: Copyright (c) 1998-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies SUBSET_1, SUBSTLAT, FINSET_1, FUNCT_1, FINSUB_1, PARTFUN1,
      TARSKI, XBOOLE_0, SETWISEO, ORDINAL4, NORMFORM, RELAT_1, ARYTM_1,
      LATTICES, FUNCT_2, HEYTING1, BINOP_1, STRUCT_0, ZFMISC_1, FDIFF_1,
      EQREL_1, LATTICE2, PBOOLE, FUNCOP_1, FILTER_0, XBOOLEAN, HEYTING2;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, RELAT_1, FUNCT_1, RELSET_1,
      FUNCOP_1, BINOP_1, FINSET_1, FINSUB_1, FUNCT_2, PARTFUN1, LATTICES,
      STRUCT_0, SUBSTLAT, SETWISEO, HEYTING1, LATTICE2, FILTER_0;
 constructors FUNCOP_1, SETWISEO, FILTER_0, LATTICE2, HEYTING1, SUBSTLAT,
      RELSET_1;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, PARTFUN1, FINSET_1,
      FINSUB_1, SETWISEO, STRUCT_0, LATTICES, SUBSTLAT, FUNCT_2, RELSET_1,
      PRE_POLY, LATTICE2;
 requirements SUBSET, BOOLE;
 definitions TARSKI, FILTER_0, XBOOLE_0;
 theorems ZFMISC_1, TARSKI, FINSUB_1, FINSET_1, PARTFUN1, BINOP_1, LATTICES,
      LATTICE2, RELAT_1, FUNCT_1, FUNCT_2, SUBSTLAT, SETWISEO, FUNCOP_1,
      FILTER_0, HEYTING1, RELSET_1, XBOOLE_0, XBOOLE_1, PRE_POLY;
 schemes FRAENKEL, BINOP_1, LATTICE3, PRE_CIRC, FUNCT_1, FUNCT_2, XBOOLE_0;

begin
theorem
L1: (for R1 being set holds (for R2 being set holds (for B1 , B2 being set holds ((B2 in ( SubstitutionSet (R1 , R2) ) & B1 in B2) implies B1 is  finite  finite  finite  finite Function))))
proof
let R1 being set;
let R2 being set;
let C1 , C2 being set;
assume that
L2: C2 in ( SubstitutionSet (R1 , R2) )
and
L3: C1 in C2;
L4: C2 in { B3 where B3 is (Element of ( Fin ( PFuncs (R1 , R2) ) )) : ((for B4 being set holds (B4 in B3 implies B4 is  finite)) & (for B5 , B6 being (Element of ( PFuncs (R1 , R2) )) holds ((B5 in B3 & B6 in B3 & B5 c= B6) implies B5 = B6))) } by L2 , SUBSTLAT:def 1;
L5: (ex B7 being (Element of ( Fin ( PFuncs (R1 , R2) ) )) st (B7 = C2 & (for B8 being set holds (B8 in B7 implies B8 is  finite)) & (for B9 , B10 being (Element of ( PFuncs (R1 , R2) )) holds ((B9 in B7 & B10 in B7 & B9 c= B10) implies B9 = B10)))) by L4;
thus L6: thesis by L5 , L2 , L3;
end;
L7: (for B11 , B12 , B13 being set holds ((B11 = ( B12 \/ B13 ) & B11 c= B12) implies B11 = B12))
proof
let C3 , C4 , C5 being set;
assume that
L8: C3 = ( C4 \/ C5 )
and
L9: C3 c= C4;
L10: C4 c= C3 by L8 , XBOOLE_1:7;
thus L11: thesis by L10 , L9 , XBOOLE_0:def 10;
end;
begin
theorem
L12: (for R1 being set holds (for R2 being set holds (for B14 being  finite (Element of ( PFuncs (R1 , R2) )) holds { B14 } in ( SubstitutionSet (R1 , R2) ))))
proof
let R1 being set;
let R2 being set;
let C6 being  finite (Element of ( PFuncs (R1 , R2) ));
L13: (for B15 , B16 being (Element of ( PFuncs (R1 , R2) )) holds ((B15 in { C6 } & B16 in { C6 } & B15 c= B16) implies B15 = B16))
proof
let C7 , C8 being (Element of ( PFuncs (R1 , R2) ));
assume that
L14: C7 in { C6 }
and
L15: C8 in { C6 }
and
L16: C7 c= C8;
L17: C7 = C6 by L14 , TARSKI:def 1;
thus L18: thesis by L17 , L15 , TARSKI:def 1;
end;
L19: (for B17 being set holds (B17 in { C6 } implies B17 is  finite));
L20: {. C6 .} in { B18 where B18 is (Element of ( Fin ( PFuncs (R1 , R2) ) )) : ((for B19 being set holds (B19 in B18 implies B19 is  finite)) & (for B20 , B21 being (Element of ( PFuncs (R1 , R2) )) holds ((B20 in B18 & B21 in B18 & B20 c= B21) implies B20 = B21))) } by L19 , L13;
thus L21: thesis by L20 , SUBSTLAT:def 1;
end;
theorem
L22: (for R1 being set holds (for R2 being set holds (for R6 being (Element of ( SubstitutionSet (R1 , R2) )) holds (for R7 being (Element of ( SubstitutionSet (R1 , R2) )) holds (( R6 ^ R7 ) = R6 implies (for B22 being set holds (B22 in R6 implies (ex B23 being set st (B23 in R7 & B23 c= B22)))))))))
proof
let R1 being set;
let R2 being set;
let R6 being (Element of ( SubstitutionSet (R1 , R2) ));
let R7 being (Element of ( SubstitutionSet (R1 , R2) ));
assume L23: ( R6 ^ R7 ) = R6;
let C9 being set;
assume L24: C9 in R6;
consider C10 , C11 being set such that L25: C10 in R6 and L26: C11 in R7 and L27: C9 = ( C10 \/ C11 ) by L24 , L23 , SUBSTLAT:15;
take C11;
thus L28: thesis by L26 , L27 , XBOOLE_1:7;
end;
theorem
L29: (for R1 being set holds (for R2 being set holds (for R6 being (Element of ( SubstitutionSet (R1 , R2) )) holds (for R7 being (Element of ( SubstitutionSet (R1 , R2) )) holds (( mi ( R6 ^ R7 ) ) = R6 implies (for B24 being set holds (B24 in R6 implies (ex B25 being set st (B25 in R7 & B25 c= B24)))))))))
proof
let R1 being set;
let R2 being set;
let R6 being (Element of ( SubstitutionSet (R1 , R2) ));
let R7 being (Element of ( SubstitutionSet (R1 , R2) ));
assume L30: ( mi ( R6 ^ R7 ) ) = R6;
let C12 being set;
L31: ( mi ( R6 ^ R7 ) ) c= ( R6 ^ R7 ) by SUBSTLAT:8;
assume L32: C12 in R6;
consider C13 , C14 being set such that L33: C13 in R6 and L34: C14 in R7 and L35: C12 = ( C13 \/ C14 ) by L32 , L30 , L31 , SUBSTLAT:15;
take C14;
thus L36: thesis by L34 , L35 , XBOOLE_1:7;
end;
theorem
L37: (for R1 being set holds (for R2 being set holds (for R6 being (Element of ( SubstitutionSet (R1 , R2) )) holds (for R7 being (Element of ( SubstitutionSet (R1 , R2) )) holds ((for B26 being set holds (B26 in R6 implies (ex B27 being set st (B27 in R7 & B27 c= B26)))) implies ( mi ( R6 ^ R7 ) ) = R6)))))
proof
let R1 being set;
let R2 being set;
let R6 being (Element of ( SubstitutionSet (R1 , R2) ));
let R7 being (Element of ( SubstitutionSet (R1 , R2) ));
assume L38: (for B28 being set holds (B28 in R6 implies (ex B29 being set st (B29 in R7 & B29 c= B28))));
L39: ( mi ( R6 ^ R7 ) ) c= ( R6 ^ R7 ) by SUBSTLAT:8;
thus L40: ( mi ( R6 ^ R7 ) ) c= R6
proof
let C15 being set;
L41: R6 c= ( PFuncs (R1 , R2) ) by FINSUB_1:def 5;
assume L42: C15 in ( mi ( R6 ^ R7 ) );
consider C16 , C17 being set such that L43: C16 in R6 and L44: C17 in R7 and L45: C15 = ( C16 \/ C17 ) by L42 , L39 , SUBSTLAT:15;
L46: C16 c= C15 by L45 , XBOOLE_1:7;
consider C18 being set such that L47: C18 in R7 and L48: C18 c= C16 by L38 , L43;
L49: R7 c= ( PFuncs (R1 , R2) ) by FINSUB_1:def 5;
reconsider D1 = C16 , D2 = C18 as (Element of ( PFuncs (R1 , R2) )) by L49 , L43 , L47 , L41;
L50: C16 = ( C18 \/ C16 ) by L48 , XBOOLE_1:12;
L51: D2 tolerates D1 by L48 , PARTFUN1:54;
L52: C16 in ( R6 ^ R7 ) by L51 , L43 , L47 , L50 , SUBSTLAT:16;
thus L53: thesis by L52 , L42 , L43 , L46 , SUBSTLAT:6;
end;

thus L54: R6 c= ( mi ( R6 ^ R7 ) )
proof
let C19 being set;
L55: R6 c= ( PFuncs (R1 , R2) ) by FINSUB_1:def 5;
assume L56: C19 in R6;
consider C20 being set such that L57: C20 in R7 and L58: C20 c= C19 by L56 , L38;
L59: R7 c= ( PFuncs (R1 , R2) ) by FINSUB_1:def 5;
reconsider D3 = C19 , D4 = C20 as (Element of ( PFuncs (R1 , R2) )) by L59 , L56 , L57 , L55;
L60: D3 tolerates D4 by L58 , PARTFUN1:54;
L61: C19 in ( mi R6 ) by L56 , SUBSTLAT:11;
L62: (for B30 being  finite set holds ((B30 in ( R6 ^ R7 ) & B30 c= C19) implies B30 = C19))
proof
let C21 being  finite set;
assume that
L63: C21 in ( R6 ^ R7 )
and
L64: C21 c= C19;
consider C22 , C23 being set such that L65: C22 in R6 and L66: C23 in R7 and L67: C21 = ( C22 \/ C23 ) by L63 , SUBSTLAT:15;
L68: C22 c= C21 by L67 , XBOOLE_1:7;
L69: C22 c= C19 by L68 , L64 , XBOOLE_1:1;
L70: C22 = C19 by L69 , L61 , L65 , SUBSTLAT:6;
thus L71: thesis by L70 , L64 , L67 , L7;
end;
L72: D3 = ( D3 \/ D4 ) by L58 , XBOOLE_1:12;
L73: D3 in ( R6 ^ R7 ) by L72 , L56 , L57 , L60 , SUBSTLAT:16;
L74: C19 is  finite by L56 , L1;
thus L75: thesis by L74 , L73 , L62 , SUBSTLAT:7;
end;

end;
definition
let C24 being set;
let C25 being  finite set;
let C26 being (Element of ( Fin ( PFuncs (C24 , C25) ) ));
func Involved C26 means
:L55: (for R3 being set holds (R3 in it iff (ex B31 being  finite Function st (B31 in C26 & R3 in ( dom B31 )))));
existence
proof
defpred S1[ set ] means (ex B32 being  finite Function st (B32 in C26 & $1 in ( dom B32 )));
consider C27 being set such that L56: (for R3 being set holds (R3 in C27 iff (R3 in C24 & S1[ R3 ]))) from XBOOLE_0:sch 1;
take C27;
let C28 being set;
thus L57: (C28 in C27 implies (ex B33 being  finite Function st (B33 in C26 & C28 in ( dom B33 )))) by L56;
given C29 being  finite Function such that
L58: C29 in C26
and
L59: C28 in ( dom C29 );

L60: C26 c= ( PFuncs (C24 , C25) ) by FINSUB_1:def 5;
L61: (ex B34 being Function st (C29 = B34 & ( dom B34 ) c= C24 & ( rng B34 ) c= C25)) by L60 , L58 , PARTFUN1:def 3;
thus L62: thesis by L61 , L56 , L58 , L59;
end;
uniqueness
proof
defpred S2[ set ] means (ex B35 being  finite Function st (B35 in C26 & $1 in ( dom B35 )));
let C30 , C31 being set;
assume that
L63: (for R3 being set holds (R3 in C30 iff (ex B36 being  finite Function st (B36 in C26 & R3 in ( dom B36 )))))
and
L64: (for R3 being set holds (R3 in C31 iff (ex B37 being  finite Function st (B37 in C26 & R3 in ( dom B37 )))));
L65: (for B38 , B39 being set holds (((for B40 being set holds (B40 in B38 iff S2[ B40 ])) & (for B41 being set holds (B41 in B39 iff S2[ B41 ]))) implies B38 = B39)) from XBOOLE_0:sch 3;
thus L66: thesis by L65 , L63 , L64;
end;
end;
theorem
L68: (for B42 being set holds (for B43 being  finite set holds (for B44 being (Element of ( Fin ( PFuncs (B42 , B43) ) )) holds ( Involved B44 ) c= B42)))
proof
let C32 being set;
let C33 being  finite set;
let C34 being (Element of ( Fin ( PFuncs (C32 , C33) ) ));
let C35 being set;
assume L69: C35 in ( Involved C34 );
consider C36 being  finite Function such that L70: C36 in C34 and L71: C35 in ( dom C36 ) by L69 , L55;
L72: C34 c= ( PFuncs (C32 , C33) ) by FINSUB_1:def 5;
L73: (ex B45 being Function st (C36 = B45 & ( dom B45 ) c= C32 & ( rng B45 ) c= C33)) by L72 , L70 , PARTFUN1:def 3;
thus L74: thesis by L73 , L71;
end;
L75: (for B46 being set holds (for B47 being  finite set holds (for B48 being non  empty (Element of ( Fin ( PFuncs (B46 , B47) ) )) holds ( Involved B48 ) is  finite)))
proof
deffunc H1(Function) = ( dom $1 );
let C37 being set;
let C38 being  finite set;
let C39 being non  empty (Element of ( Fin ( PFuncs (C37 , C38) ) ));
defpred S3[ set ] means ($1 in C39 & $1 is  finite);
defpred S4[ set ] means $1 in C39;
set D5 = { H1(B49) where B49 is (Element of ( PFuncs (C37 , C38) )) : S3[ B49 ] };
L76: (for B50 being set holds (B50 in D5 implies B50 is  finite))
proof
let C40 being set;
assume L77: C40 in D5;
L78: (ex B51 being (Element of ( PFuncs (C37 , C38) )) st (C40 = ( dom B51 ) & B51 in C39 & B51 is  finite)) by L77;
thus L79: thesis by L78;
end;
L80: C39 is  finite;
L81: { H1(B52) where B52 is (Element of ( PFuncs (C37 , C38) )) : B52 in C39 } is  finite from FRAENKEL:sch 21(L80);
L82: (for R3 being set holds (R3 in ( Involved C39 ) iff (ex B53 being set st (R3 in B53 & B53 in D5))))
proof
let R3 being set;
thus L83:now
assume L84: R3 in ( Involved C39 );
consider C41 being  finite Function such that L85: C41 in C39 and L86: R3 in ( dom C41 ) by L84 , L55;
L87: C39 c= ( PFuncs (C37 , C38) ) by FINSUB_1:def 5;
L88: ( dom C41 ) in D5 by L87 , L85;
thus L89: (ex B54 being set st (R3 in B54 & B54 in D5)) by L88 , L86;
end;
given C42 being set such that
L90: R3 in C42
and
L91: C42 in D5;

L92: (ex B55 being (Element of ( PFuncs (C37 , C38) )) st (C42 = ( dom B55 ) & B55 in C39 & B55 is  finite)) by L91;
thus L93: thesis by L92 , L90 , L55;
end;
L94: ( Involved C39 ) = ( union D5 ) by L82 , TARSKI:def 4;
L95: (for B56 being (Element of ( PFuncs (C37 , C38) )) holds (S3[ B56 ] implies S4[ B56 ]));
L96: D5 c= { H1(B57) where B57 is (Element of ( PFuncs (C37 , C38) )) : S4[ B57 ] } from FRAENKEL:sch 1(L95);
thus L97: thesis by L96 , L81 , L94 , L76 , FINSET_1:7;
end;
theorem
L98: (for B58 being set holds (for B59 being  finite set holds (for B60 being (Element of ( Fin ( PFuncs (B58 , B59) ) )) holds (B60 = ( {} ) implies ( Involved B60 ) = ( {} )))))
proof
let C43 being set;
let C44 being  finite set;
let C45 being (Element of ( Fin ( PFuncs (C43 , C44) ) ));
assume L99: C45 = ( {} );
assume L100: ( Involved C45 ) <> ( {} );
consider C46 being set such that L101: C46 in ( Involved C45 ) by L100 , XBOOLE_0:def 1;
L102: (ex B61 being  finite Function st (B61 in C45 & C46 in ( dom B61 ))) by L101 , L55;
thus L103: thesis by L102 , L99;
end;
registration
let C47 being set;
let C48 being  finite set;
let C49 being (Element of ( Fin ( PFuncs (C47 , C48) ) ));
cluster ( Involved C49 ) ->  finite;
coherence
proof
per cases ;
suppose L104: C49 is non  empty;

thus L105: thesis by L104 , L75;
end;
suppose L106: C49 is  empty;

thus L107: thesis by L106 , L98;
end;
end;
end;
theorem
L110: (for B62 being  finite set holds (for B63 being (Element of ( Fin ( PFuncs (( {} ) , B62) ) )) holds ( Involved B63 ) = ( {} ))) by L68 , XBOOLE_1:3;
definition
let C50 being set;
let C51 being  finite set;
let C52 being (Element of ( Fin ( PFuncs (C50 , C51) ) ));
func - C52 -> (Element of ( Fin ( PFuncs (C50 , C51) ) )) equals
{ B64 where B64 is (Element of ( PFuncs (( Involved C52 ) , C51) )) : (for B65 being (Element of ( PFuncs (C50 , C51) )) holds (B65 in C52 implies (not B64 tolerates B65))) };
coherence
proof
deffunc H2(set) = $1;
defpred S5[ set ] means (not contradiction);
defpred S6[ (Element of ( PFuncs (( Involved C52 ) , C51) )) ] means (for B66 being (Element of ( PFuncs (C50 , C51) )) holds (B66 in C52 implies (not $1 tolerates B66)));
set D6 = { B67 where B67 is (Element of ( PFuncs (( Involved C52 ) , C51) )) : (for B68 being (Element of ( PFuncs (C50 , C51) )) holds (B68 in C52 implies (not B67 tolerates B68))) };
L111: { B69 where B69 is (Element of ( PFuncs (( Involved C52 ) , C51) )) : (not contradiction) } c= ( PFuncs (( Involved C52 ) , C51) )
proof
let C53 being set;
assume L112: C53 in { B70 where B70 is (Element of ( PFuncs (( Involved C52 ) , C51) )) : (not contradiction) };
L113: (ex B71 being (Element of ( PFuncs (( Involved C52 ) , C51) )) st (B71 = C53 & (not contradiction))) by L112;
thus L114: thesis by L113;
end;
L115: (for B72 being (Element of ( PFuncs (( Involved C52 ) , C51) )) holds (S6[ B72 ] implies S5[ B72 ]));
L116: { H2(B73) where B73 is (Element of ( PFuncs (( Involved C52 ) , C51) )) : S6[ B73 ] } c= { H2(B74) where B74 is (Element of ( PFuncs (( Involved C52 ) , C51) )) : S5[ B74 ] } from FRAENKEL:sch 1(L115);
L117: D6 c= ( PFuncs (C50 , C51) )
proof
let C54 being set;
assume L118: C54 in D6;
L119: (ex B75 being (Element of ( PFuncs (( Involved C52 ) , C51) )) st (B75 = C54 & (for B76 being (Element of ( PFuncs (C50 , C51) )) holds (B76 in C52 implies (not B75 tolerates B76))))) by L118;
L120: C54 in ( PFuncs (( Involved C52 ) , C51) ) by L119;
L121: ( Involved C52 ) c= C50 by L68;
L122: ( PFuncs (( Involved C52 ) , C51) ) c= ( PFuncs (C50 , C51) ) by L121 , PARTFUN1:50;
thus L123: thesis by L122 , L120;
end;
L124: ( PFuncs (( Involved C52 ) , C51) ) is  finite by PRE_POLY:17;
thus L125: thesis by L124 , L116 , L111 , L117 , FINSUB_1:def 5;
end;
end;
theorem
L127: (for R1 being set holds (for R8 being finite set holds (for R6 being (Element of ( SubstitutionSet (R1 , R8) )) holds ( R6 ^ ( - R6 ) ) = ( {} ))))
proof
let R1 being set;
let R8 being  finite set;
let R6 being (Element of ( SubstitutionSet (R1 , R8) ));
assume L128: ( R6 ^ ( - R6 ) ) <> ( {} );
consider C55 being set such that L129: C55 in ( R6 ^ ( - R6 ) ) by L128 , XBOOLE_0:def 1;
L130: C55 in { ( B77 \/ B78 ) where B77 , B78 is (Element of ( PFuncs (R1 , R8) )) : (B77 in R6 & B78 in ( - R6 ) & B77 tolerates B78) } by L129 , SUBSTLAT:def 3;
consider C56 , C57 being (Element of ( PFuncs (R1 , R8) )) such that L131: C55 = ( C56 \/ C57 ) and L132: C56 in R6 and L133: C57 in ( - R6 ) and L134: C56 tolerates C57 by L130;
L135: (ex B79 being (Element of ( PFuncs (( Involved R6 ) , R8) )) st (B79 = C57 & (for B80 being (Element of ( PFuncs (R1 , R8) )) holds (B80 in R6 implies (not B79 tolerates B80))))) by L133;
thus L136: thesis by L135 , L132 , L134;
end;
theorem
L137: (for R1 being set holds (for R8 being finite set holds (for R6 being (Element of ( SubstitutionSet (R1 , R8) )) holds (R6 = ( {} ) implies ( - R6 ) = { ( {} ) }))))
proof
let R1 being set;
let R8 being  finite set;
let R6 being (Element of ( SubstitutionSet (R1 , R8) ));
defpred S7[ (Element of ( PFuncs (( Involved R6 ) , R8) )) ] means (for B81 being (Element of ( PFuncs (R1 , R8) )) holds (B81 in R6 implies (not $1 tolerates B81)));
assume L138: R6 = ( {} );
L139: (for B82 being (Element of ( PFuncs (R1 , R8) )) holds (B82 in R6 implies (not ( {} ) tolerates B82))) by L138;
L140: { B83 where B83 is (Element of ( PFuncs (( Involved R6 ) , R8) )) : S7[ B83 ] } c= ( PFuncs (( Involved R6 ) , R8) ) from FRAENKEL:sch 10;
L141: ( - R6 ) c= ( PFuncs (( {} ) , R8) ) by L140 , L138 , L98;
L142: ( - R6 ) c= { ( {} ) } by L141 , PARTFUN1:48;
L143: ( {} ) in { ( {} ) } by TARSKI:def 1;
L144: ( {} ) in ( PFuncs (( {} ) , R8) ) by L143 , PARTFUN1:48;
L145: ( {} ) in ( PFuncs (( Involved R6 ) , R8) ) by L144 , L138 , L98;
L146: ( {} ) in ( - R6 ) by L145 , L139;
L147: { ( {} ) } c= ( - R6 ) by L146 , ZFMISC_1:31;
thus L148: thesis by L147 , L142 , XBOOLE_0:def 10;
end;
theorem
L149: (for R1 being set holds (for R8 being finite set holds (for R6 being (Element of ( SubstitutionSet (R1 , R8) )) holds (R6 = { ( {} ) } implies ( - R6 ) = ( {} )))))
proof
let R1 being set;
let R8 being  finite set;
let R6 being (Element of ( SubstitutionSet (R1 , R8) ));
assume L150: R6 = { ( {} ) };
assume L151: ( - R6 ) <> ( {} );
consider C58 being set such that L152: C58 in ( - R6 ) by L151 , XBOOLE_0:def 1;
consider C59 being (Element of ( PFuncs (( Involved R6 ) , R8) )) such that L153: C58 = C59 and L154: (for B84 being (Element of ( PFuncs (R1 , R8) )) holds (B84 in { ( {} ) } implies (not C59 tolerates B84))) by L150 , L152;
L155: ( {} ) in { ( {} ) } by TARSKI:def 1;
L156: ( {} ) is (PartFunc of R1 , R8) by RELSET_1:12;
L157: ( {} ) in ( PFuncs (R1 , R8) ) by L156 , PARTFUN1:45;
L158: C59 tolerates ( {} ) by PARTFUN1:59;
thus L159: thesis by L158 , L154 , L157 , L155;
end;
theorem
L160: (for B85 being set holds (for B86 being  finite set holds (for B87 being (Element of ( SubstitutionSet (B85 , B86) )) holds ( mi ( B87 ^ ( - B87 ) ) ) = ( Bottom ( SubstLatt (B85 , B86) ) ))))
proof
let C60 being set;
let C61 being  finite set;
let C62 being (Element of ( SubstitutionSet (C60 , C61) ));
L161: ( mi ( C62 ^ ( - C62 ) ) ) = ( {} ) by L127 , SUBSTLAT:9
.= ( Bottom ( SubstLatt (C60 , C61) ) ) by SUBSTLAT:26;
thus L162: thesis by L161;
end;
theorem
L163: (for B88 being non  empty set holds (for B89 being  finite non  empty set holds (for B90 being (Element of ( SubstitutionSet (B88 , B89) )) holds (B90 = ( {} ) implies ( mi ( - B90 ) ) = ( Top ( SubstLatt (B88 , B89) ) )))))
proof
let C63 being non  empty set;
let C64 being  finite non  empty set;
let C65 being (Element of ( SubstitutionSet (C63 , C64) ));
assume L164: C65 = ( {} );
L165: ( - C65 ) = { ( {} ) } by L164 , L137;
L166: ( - C65 ) in ( SubstitutionSet (C63 , C64) ) by L165 , SUBSTLAT:2;
L167: ( mi ( - C65 ) ) = { ( {} ) } by L166 , L165 , SUBSTLAT:11;
thus L168: thesis by L167 , SUBSTLAT:27;
end;
theorem
L169: (for B91 being set holds (for B92 being  finite set holds (for B93 being (Element of ( SubstitutionSet (B91 , B92) )) holds (for B94 being (Element of ( PFuncs (B91 , B92) )) holds (for B95 being (Element of ( SubstitutionSet (B91 , B92) )) holds (B95 = { B94 } implies (( B93 ^ B95 ) = ( {} ) implies (ex B96 being  finite set st (B96 in ( - B93 ) & B96 c= B94)))))))))
proof
let R1 being set;
let R8 being  finite set;
let C66 being (Element of ( SubstitutionSet (R1 , R8) ));
let C67 being (Element of ( PFuncs (R1 , R8) ));
let C68 being (Element of ( SubstitutionSet (R1 , R8) ));
assume that
L170: C68 = { C67 };
assume L171: ( C66 ^ C68 ) = ( {} );
per cases ;
suppose L172: C66 is non  empty;

reconsider D7 = C66 as  finite non  empty set by L172;
defpred S8[ (Element of ( PFuncs (R1 , R8) )) , set ] means ($2 in ( ( dom $1 ) /\ ( dom C67 ) ) & ( $1 . $2 ) <> ( C67 . $2 ));
defpred S9[ set ] means (not contradiction);
L173: (ex B97 being Function st (B97 = C67 & ( dom B97 ) c= R1 & ( rng B97 ) c= R8)) by PARTFUN1:def 3;
L174:
now
let C69 being (Element of ( PFuncs (R1 , R8) ));
assume that
L175: C69 in C66;
L176: (not C69 tolerates C67)
proof
assume L177: C69 tolerates C67;
L178: C67 in C68 by L170 , TARSKI:def 1;
L179: ( C69 \/ C67 ) in { ( B98 \/ B99 ) where B98 , B99 is (Element of ( PFuncs (R1 , R8) )) : (B98 in C66 & B99 in C68 & B98 tolerates B99) } by L178 , L175 , L177;
thus L180: thesis by L179 , L171 , SUBSTLAT:def 3;
end;
consider C70 being set such that L181: C70 in ( ( dom C69 ) /\ ( dom C67 ) ) and L182: ( C69 . C70 ) <> ( C67 . C70 ) by L176 , PARTFUN1:def 4;
consider C71 being Function such that L183: C71 = C67 and L184: ( dom C71 ) c= R1 and L185: ( rng C71 ) c= R8 by PARTFUN1:def 3;
L186: ( ( dom C69 ) /\ ( dom C67 ) ) c= ( dom C71 ) by L183 , XBOOLE_1:17;
L187: ( ( dom C69 ) /\ ( dom C67 ) ) c= R1 by L186 , L184 , XBOOLE_1:1;
reconsider D8 = C70 as (Element of [ R1 ]) by L187 , L181 , HEYTING1:def 2;
take D9 = D8;
thus L188: S8[ C69 , D9 ] by L181 , L182;
end;
consider C72 being (Element of ( Funcs (( PFuncs (R1 , R8) ) , [ R1 ]) )) such that L189: (for B100 being (Element of ( PFuncs (R1 , R8) )) holds (B100 in C66 implies S8[ B100 , ( C72 . B100 ) ])) from FRAENKEL:sch 27(L174);
deffunc H3(set) = ( C72 . $1 );
L190: C66 = [ C66 ] by L172 , HEYTING1:def 2;
L191: { H3(B101) where B101 is (Element of D7) : S9[ B101 ] } is  finite from PRE_CIRC:sch 1;
reconsider D10 = { ( C72 . B102 ) where B102 is (Element of [ C66 ]) : (not contradiction) } as  finite set by L191 , L190;
set D11 = ( C67 | D10 );
L192: ( dom D11 ) c= ( Involved C66 )
proof
let C73 being set;
assume L193: C73 in ( dom D11 );
L194: C73 in D10 by L193 , RELAT_1:57;
consider C74 being (Element of [ C66 ]) such that L195: C73 = ( C72 . C74 ) by L194;
reconsider D12 = C74 as  finite Function by L190 , L1;
reconsider D13 = D12 as (Element of ( PFuncs (R1 , R8) )) by L190 , SETWISEO:9;
L196: ( C72 . D13 ) in ( ( dom D13 ) /\ ( dom C67 ) ) by L190 , L189;
L197: C73 in ( dom D12 ) by L196 , L195 , XBOOLE_0:def 4;
thus L198: thesis by L197 , L190 , L55;
end;
L199: ( rng D11 ) c= ( rng C67 ) by RELAT_1:70;
L200: ( rng D11 ) c= R8 by L199 , L173 , XBOOLE_1:1;
reconsider D14 = D11 as (Element of ( PFuncs (( Involved C66 ) , R8) )) by L200 , L192 , PARTFUN1:def 3;
L201: (for B103 being (Element of ( PFuncs (R1 , R8) )) holds (B103 in C66 implies (not D11 tolerates B103)))
proof
let C75 being (Element of ( PFuncs (R1 , R8) ));
reconsider D15 = C75 as Function;
assume L202: C75 in C66;
L203: (ex B104 being set st (B104 in ( ( dom C75 ) /\ ( dom D11 ) ) & ( D15 . B104 ) <> ( D11 . B104 )))
proof
set D16 = ( C72 . C75 );
take D16;
L204: D16 in ( ( dom C75 ) /\ ( dom C67 ) ) by L189 , L202;
L205: D16 in ( dom C67 ) by L204 , XBOOLE_0:def 4;
L206: D16 in { ( C72 . B105 ) where B105 is (Element of [ C66 ]) : (not contradiction) } by L190 , L202;
L207: D16 in ( ( dom C67 ) /\ D10 ) by L206 , L205 , XBOOLE_0:def 4;
L208: D16 in ( dom D11 ) by L207 , RELAT_1:61;
L209: D16 in ( dom C75 ) by L204 , XBOOLE_0:def 4;
thus L210: D16 in ( ( dom C75 ) /\ ( dom D11 ) ) by L209 , L208 , XBOOLE_0:def 4;
L211: ( C75 . D16 ) <> ( C67 . D16 ) by L189 , L202;
thus L212: thesis by L211 , L208 , FUNCT_1:47;
end;
thus L213: thesis by L203 , PARTFUN1:def 4;
end;
L214: D14 in { B106 where B106 is (Element of ( PFuncs (( Involved C66 ) , R8) )) : (for B107 being (Element of ( PFuncs (R1 , R8) )) holds (B107 in C66 implies (not B106 tolerates B107))) } by L201;
thus L215: thesis by L214 , RELAT_1:59;
end;
suppose L216: C66 is  empty;

reconsider D17 = ( {} ) as  finite set;
take D17;
L217: ( - C66 ) = { ( {} ) } by L216 , L137;
thus L218: thesis by L217 , TARSKI:def 1 , XBOOLE_1:2;
end;
end;
definition
let C76 being set;
let C77 being  finite set;
let C78 , C79 being (Element of ( Fin ( PFuncs (C76 , C77) ) ));
func C78 =>> C79 -> (Element of ( Fin ( PFuncs (C76 , C77) ) )) equals
( ( PFuncs (C76 , C77) ) /\ { ( union { ( ( B108 . B109 ) \ B109 ) where B109 is (Element of ( PFuncs (C76 , C77) )) : B109 in C78 } ) where B108 is (Element of ( PFuncs (C78 , C79) )) : ( dom B108 ) = C78 } );
coherence
proof
reconsider D18 = ( PFuncs (C78 , C79) ) as  functional  finite non  empty set by PRE_POLY:17;
set D19 = { ( union { ( ( B110 . B111 ) \ B111 ) where B111 is (Element of ( PFuncs (C76 , C77) )) : B111 in C78 } ) where B110 is (Element of ( PFuncs (C78 , C79) )) : ( dom B110 ) = C78 };
set D20 = ( ( PFuncs (C76 , C77) ) /\ D19 );
L220: D19 c= { ( union { ( ( B112 . B113 ) \ B113 ) where B113 is (Element of ( PFuncs (C76 , C77) )) : B113 in C78 } ) where B112 is (Element of ( PFuncs (C78 , C79) )) : (B112 in ( PFuncs (C78 , C79) ) & ( dom B112 ) = C78) }
proof
let C80 being set;
assume L221: C80 in D19;
L222: (ex B114 being (Element of ( PFuncs (C78 , C79) )) st (C80 = ( union { ( ( B114 . B115 ) \ B115 ) where B115 is (Element of ( PFuncs (C76 , C77) )) : B115 in C78 } ) & ( dom B114 ) = C78)) by L221;
thus L223: thesis by L222;
end;
defpred S10[ (Element of D18) ] means ($1 in ( PFuncs (C78 , C79) ) & ( dom $1 ) = C78);
deffunc H4((Element of D18)) = ( union { ( ( $1 . B116 ) \ B116 ) where B116 is (Element of ( PFuncs (C76 , C77) )) : B116 in C78 } );
L224: { H4(B117) where B117 is (Element of D18) : S10[ B117 ] } is  finite from PRE_CIRC:sch 1;
L225: D20 c= ( PFuncs (C76 , C77) ) by XBOOLE_1:17;
thus L226: thesis by L225 , L220 , L224 , FINSUB_1:def 5;
end;
end;
theorem
L228: (for R1 being set holds (for R8 being  finite set holds (for B118 , B119 being (Element of ( Fin ( PFuncs (R1 , R8) ) )) holds (for B120 being set holds (B120 in ( B118 =>> B119 ) implies (ex B121 being (PartFunc of B118 , B119) st (B120 = ( union { ( ( B121 . B122 ) \ B122 ) where B122 is (Element of ( PFuncs (R1 , R8) )) : B122 in B118 } ) & ( dom B121 ) = B118)))))))
proof
let R1 being set;
let R8 being  finite set;
let C81 , C82 being (Element of ( Fin ( PFuncs (R1 , R8) ) ));
let C83 being set;
assume L229: C83 in ( C81 =>> C82 );
L230: C83 in { ( union { ( ( B123 . B124 ) \ B124 ) where B124 is (Element of ( PFuncs (R1 , R8) )) : B124 in C81 } ) where B123 is (Element of ( PFuncs (C81 , C82) )) : ( dom B123 ) = C81 } by L229 , XBOOLE_0:def 4;
consider C84 being (Element of ( PFuncs (C81 , C82) )) such that L231: C83 = ( union { ( ( C84 . B125 ) \ B125 ) where B125 is (Element of ( PFuncs (R1 , R8) )) : B125 in C81 } ) and L232: ( dom C84 ) = C81 by L230;
L233: C84 is (PartFunc of C81 , C82) by PARTFUN1:47;
thus L234: thesis by L233 , L231 , L232;
end;
L235: (for R4 being set holds (for B126 being set holds (for B127 being  finite set holds (for B128 being (Element of ( Fin ( PFuncs (B126 , B127) ) )) holds (for B129 being (Element of ( SubstitutionSet (B126 , B127) )) holds (R4 in ( B128 ^ ( B128 =>> B129 ) ) implies (ex R5 being set st (R5 in B129 & R5 c= R4))))))))
proof
let R4 being set;
let C85 being set;
let C86 being  finite set;
let C87 being (Element of ( Fin ( PFuncs (C85 , C86) ) ));
let C88 being (Element of ( SubstitutionSet (C85 , C86) ));
L236: C88 c= ( PFuncs (C85 , C86) ) by FINSUB_1:def 5;
assume L237: R4 in ( C87 ^ ( C87 =>> C88 ) );
consider C89 , C90 being set such that L238: C89 in C87 and L239: C90 in ( C87 =>> C88 ) and L240: R4 = ( C89 \/ C90 ) by L237 , SUBSTLAT:15;
L241: C87 c= ( PFuncs (C85 , C86) ) by FINSUB_1:def 5;
reconsider D21 = C89 as (Element of ( PFuncs (C85 , C86) )) by L241 , L238;
consider C91 being (PartFunc of C87 , C88) such that L242: C90 = ( union { ( ( C91 . B130 ) \ B130 ) where B130 is (Element of ( PFuncs (C85 , C86) )) : B130 in C87 } ) and L243: ( dom C91 ) = C87 by L239 , L228;
L244: ( C91 . C89 ) in C88 by L238 , L243 , PARTFUN1:4;
reconsider D22 = ( C91 . C89 ) as (Element of ( PFuncs (C85 , C86) )) by L244 , L236;
take D22;
thus L245: D22 in C88 by L238 , L243 , PARTFUN1:4;
L246: ( D22 \ D21 ) in { ( ( C91 . B131 ) \ B131 ) where B131 is (Element of ( PFuncs (C85 , C86) )) : B131 in C87 } by L238;
thus L247: thesis by L246 , L240 , L242 , XBOOLE_1:44 , ZFMISC_1:74;
end;
theorem
L248: (for B132 being set holds (for B133 being  finite set holds (for B134 being (Element of ( Fin ( PFuncs (B132 , B133) ) )) holds (B134 = ( {} ) implies ( B134 =>> B134 ) = { ( {} ) }))))
proof
deffunc H5(set) = ( {} );
let C92 being set;
let C93 being  finite set;
let C94 being (Element of ( Fin ( PFuncs (C92 , C93) ) ));
defpred S11[ Function ] means ( dom $1 ) = C94;
deffunc H6((Element of ( PFuncs (C94 , C94) ))) = ( union { ( ( $1 . B135 ) \ B135 ) where B135 is (Element of ( PFuncs (C92 , C93) )) : B135 in C94 } );
L249: (ex B136 being (Element of ( PFuncs (C94 , C94) )) st S11[ B136 ])
proof
reconsider D23 = ( id C94 ) as (Element of ( PFuncs (C94 , C94) )) by PARTFUN1:45;
take D23;
thus L250: thesis by RELAT_1:45;
end;
L251: { ( {} ) where B137 is (Element of ( PFuncs (C94 , C94) )) : S11[ B137 ] } = { ( {} ) } from LATTICE3:sch 1(L249);
assume L252: C94 = ( {} );
L253:
now
let C95 being (Element of ( PFuncs (C94 , C94) ));
L254: (not (ex B138 being set st B138 in { ( ( C95 . B139 ) \ B139 ) where B139 is (Element of ( PFuncs (C92 , C93) )) : B139 in C94 }))
proof
given C96 being set such that
L255: C96 in { ( ( C95 . B140 ) \ B140 ) where B140 is (Element of ( PFuncs (C92 , C93) )) : B140 in C94 };

L256: (ex B141 being (Element of ( PFuncs (C92 , C93) )) st (C96 = ( ( C95 . B141 ) \ B141 ) & B141 in C94)) by L255;
thus L257: contradiction by L256 , L252;
end;
thus L258: { ( ( C95 . B142 ) \ B142 ) where B142 is (Element of ( PFuncs (C92 , C93) )) : B142 in C94 } = ( {} ) by L254 , XBOOLE_0:def 1;
end;
L259: (for B143 being (Element of ( PFuncs (C94 , C94) )) holds (S11[ B143 ] implies H6(B143) = H5(B143))) by L253 , ZFMISC_1:2;
L260: { H6(B144) where B144 is (Element of ( PFuncs (C94 , C94) )) : S11[ B144 ] } = { H5(B145) where B145 is (Element of ( PFuncs (C94 , C94) )) : S11[ B145 ] } from FRAENKEL:sch 6(L259);
L261: ( {} ) is (PartFunc of C92 , C93) by RELSET_1:12;
L262: ( {} ) in ( PFuncs (C92 , C93) ) by L261 , PARTFUN1:45;
L263: { ( {} ) } c= ( PFuncs (C92 , C93) ) by L262 , ZFMISC_1:31;
thus L264: thesis by L263 , L260 , L251 , XBOOLE_1:28;
end;
L265: (for R1 being set holds (for R8 being  finite set holds (for R15 being (Element of ( SubstitutionSet (R1 , R8) )) holds (for B146 being set holds (B146 c= R15 implies B146 in ( SubstitutionSet (R1 , R8) ))))))
proof
let R1 being set;
let R8 being  finite set;
let R15 being (Element of ( SubstitutionSet (R1 , R8) ));
let C97 being set;
assume L266: C97 c= R15;
L267: R15 c= ( PFuncs (R1 , R8) ) by FINSUB_1:def 5;
L268: C97 c= ( PFuncs (R1 , R8) ) by L267 , L266 , XBOOLE_1:1;
reconsider D24 = C97 as (Element of ( Fin ( PFuncs (R1 , R8) ) )) by L268 , L266 , FINSUB_1:def 5;
L269: (for R13 being (Element of ( PFuncs (R1 , R8) )) holds (for R14 being (Element of ( PFuncs (R1 , R8) )) holds ((R13 in D24 & R14 in D24 & R13 c= R14) implies R13 = R14))) by L266 , SUBSTLAT:5;
L270: (for B147 being set holds (B147 in C97 implies B147 is  finite)) by L266 , L1;
L271: C97 in { B148 where B148 is (Element of ( Fin ( PFuncs (R1 , R8) ) )) : ((for B149 being set holds (B149 in B148 implies B149 is  finite)) & (for B150 , B151 being (Element of ( PFuncs (R1 , R8) )) holds ((B150 in B148 & B151 in B148 & B150 c= B151) implies B150 = B151))) } by L270 , L269;
thus L272: thesis by L271 , SUBSTLAT:def 1;
end;
theorem
L273: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for B152 being set holds (B152 c= R9 implies B152 is (Element of ( SubstLatt (R1 , R8) )))))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let C98 being set;
reconsider D25 = R9 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
assume L274: C98 c= R9;
L275: C98 c= D25 by L274;
L276: C98 in ( SubstitutionSet (R1 , R8) ) by L275 , L265;
thus L277: thesis by L276 , SUBSTLAT:def 4;
end;
begin
definition
let R1 being set;
let R8 being  finite set;
func pseudo_compl (R1 , R8) -> (UnOp of (the carrier of ( SubstLatt (R1 , R8) ))) means
:L278: (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for B153 being (Element of ( SubstitutionSet (R1 , R8) )) holds (B153 = R9 implies ( it . R9 ) = ( mi ( - B153 ) ))));
existence
proof
deffunc H7((Element of ( SubstitutionSet (R1 , R8) ))) = ( mi ( - $1 ) );
consider C99 being (Function of ( SubstitutionSet (R1 , R8) ) , ( SubstitutionSet (R1 , R8) )) such that L279: (for B154 being (Element of ( SubstitutionSet (R1 , R8) )) holds ( C99 . B154 ) = H7(B154)) from FUNCT_2:sch 4;
L280: ( SubstitutionSet (R1 , R8) ) = (the carrier of ( SubstLatt (R1 , R8) )) by SUBSTLAT:def 4;
reconsider D26 = C99 as (UnOp of (the carrier of ( SubstLatt (R1 , R8) ))) by L280;
take D26;
thus L281: thesis by L279;
end;
correctness
proof
let C100 , C101 being (UnOp of (the carrier of ( SubstLatt (R1 , R8) )));
assume that
L282: (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for B155 being (Element of ( SubstitutionSet (R1 , R8) )) holds (B155 = R9 implies ( C100 . R9 ) = ( mi ( - B155 ) ))))
and
L283: (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for B156 being (Element of ( SubstitutionSet (R1 , R8) )) holds (B156 = R9 implies ( C101 . R9 ) = ( mi ( - B156 ) ))));
L284:
now
let R9 being (Element of ( SubstLatt (R1 , R8) ));
reconsider D27 = R9 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
thus L285: ( C100 . R9 ) = ( mi ( - D27 ) ) by L282
.= ( C101 . R9 ) by L283;
end;
thus L286: C100 = C101 by L284 , FUNCT_2:63;
end;
func StrongImpl (R1 , R8) -> (BinOp of (the carrier of ( SubstLatt (R1 , R8) ))) means
:L287: (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds (for B157 , B158 being (Element of ( SubstitutionSet (R1 , R8) )) holds ((B157 = R9 & B158 = R10) implies ( it . (R9 , R10) ) = ( mi ( B157 =>> B158 ) )))));
existence
proof
set D28 = (the carrier of ( SubstLatt (R1 , R8) ));
defpred S12[ set , set , set ] means (for B159 , B160 being (Element of ( SubstitutionSet (R1 , R8) )) holds ((B159 = $1 & B160 = $2) implies $3 = ( mi ( B159 =>> B160 ) )));
L288: (for B161 , B162 being (Element of D28) holds (ex B163 being (Element of D28) st S12[ B161 , B162 , B163 ]))
proof
let C102 , C103 being (Element of D28);
reconsider D29 = C102 , D30 = C103 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
reconsider D31 = ( mi ( D29 =>> D30 ) ) as (Element of D28) by SUBSTLAT:def 4;
take D31;
let C104 , C105 being (Element of ( SubstitutionSet (R1 , R8) ));
assume that
L289: C104 = C102
and
L290: C105 = C103;
thus L291: thesis by L289 , L290;
end;
consider C106 being (BinOp of (the carrier of ( SubstLatt (R1 , R8) ))) such that L292: (for B164 , B165 being (Element of ( SubstLatt (R1 , R8) )) holds S12[ B164 , B165 , ( C106 . (B164 , B165) ) ]) from BINOP_1:sch 3(L288);
take C106;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
let C107 , C108 being (Element of ( SubstitutionSet (R1 , R8) ));
assume that
L293: C107 = R9
and
L294: C108 = R10;
thus L295: thesis by L292 , L293 , L294;
end;
correctness
proof
let C109 , C110 being (BinOp of (the carrier of ( SubstLatt (R1 , R8) )));
assume that
L296: (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds (for B166 , B167 being (Element of ( SubstitutionSet (R1 , R8) )) holds ((B166 = R9 & B167 = R10) implies ( C109 . (R9 , R10) ) = ( mi ( B166 =>> B167 ) )))))
and
L297: (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds (for B168 , B169 being (Element of ( SubstitutionSet (R1 , R8) )) holds ((B168 = R9 & B169 = R10) implies ( C110 . (R9 , R10) ) = ( mi ( B168 =>> B169 ) )))));
L298:
now
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
reconsider D32 = R9 , D33 = R10 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
thus L299: ( C109 . (R9 , R10) ) = ( mi ( D32 =>> D33 ) ) by L296
.= ( C110 . (R9 , R10) ) by L297;
end;
thus L300: C109 = C110 by L298 , BINOP_1:2;
end;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
func SUB R9 -> (Element of ( Fin (the carrier of ( SubstLatt (R1 , R8) )) )) equals
( bool R9 );
coherence
proof
reconsider D34 = R9 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
L301: ( bool R9 ) c= (the carrier of ( SubstLatt (R1 , R8) ))
proof
let C111 being set;
assume L302: C111 in ( bool R9 );
L303: C111 is (Element of ( SubstLatt (R1 , R8) )) by L302 , L273;
thus L304: thesis by L303;
end;
L305: D34 is  finite;
thus L306: thesis by L305 , L301 , FINSUB_1:def 5;
end;
correctness;
func diff R9 -> (UnOp of (the carrier of ( SubstLatt (R1 , R8) ))) means
:L307: (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ( it . R10 ) = ( R9 \ R10 ));
existence
proof
deffunc H8(set) = ( R9 \ $1 );
consider C112 being Function such that L308: (( dom C112 ) = (the carrier of ( SubstLatt (R1 , R8) )) & (for B170 being set holds (B170 in (the carrier of ( SubstLatt (R1 , R8) )) implies ( C112 . B170 ) = H8(B170)))) from FUNCT_1:sch 3;
L309: R9 in (the carrier of ( SubstLatt (R1 , R8) ));
L310: R9 in ( SubstitutionSet (R1 , R8) ) by L309 , SUBSTLAT:def 4;
L311: (for B171 being set holds (B171 in (the carrier of ( SubstLatt (R1 , R8) )) implies ( C112 . B171 ) in ( Fin ( PFuncs (R1 , R8) ) )))
proof
let C113 being set;
assume L312: C113 in (the carrier of ( SubstLatt (R1 , R8) ));
L313: ( C112 . C113 ) = ( R9 \ C113 ) by L312 , L308;
L314: ( R9 \ C113 ) in ( SubstitutionSet (R1 , R8) ) by L310 , L265;
thus L315: thesis by L314 , L313;
end;
reconsider D35 = C112 as (Function of (the carrier of ( SubstLatt (R1 , R8) )) , ( Fin ( PFuncs (R1 , R8) ) )) by L311 , L308 , FUNCT_2:3;
L316:
now
let C114 being (Element of ( SubstLatt (R1 , R8) ));
L317: ( R9 \ C114 ) in ( SubstitutionSet (R1 , R8) ) by L310 , L265;
L318: ( D35 . C114 ) in ( SubstitutionSet (R1 , R8) ) by L317 , L308;
thus L319: ( D35 . C114 ) in (the carrier of ( SubstLatt (R1 , R8) )) by L318 , SUBSTLAT:def 4;
end;
reconsider D36 = D35 as (UnOp of (the carrier of ( SubstLatt (R1 , R8) ))) by L316 , HEYTING1:1;
take D36;
let R10 being (Element of ( SubstLatt (R1 , R8) ));
thus L320: thesis by L308;
end;
correctness
proof
let C115 , C116 being (UnOp of (the carrier of ( SubstLatt (R1 , R8) )));
assume that
L321: (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ( C115 . R10 ) = ( R9 \ R10 ))
and
L322: (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ( C116 . R10 ) = ( R9 \ R10 ));
L323:
now
let C117 being (Element of ( SubstLatt (R1 , R8) ));
thus L324: ( C115 . C117 ) = ( R9 \ C117 ) by L321
.= ( C116 . C117 ) by L322;
end;
thus L325: C115 = C116 by L323 , FUNCT_2:63;
end;
end;
L327: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds (R10 in ( SUB R9 ) implies ( R10 "\/" ( ( diff R9 ) . R10 ) ) = R9)))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
assume L328: R10 in ( SUB R9 );
reconsider D37 = R9 , D38 = R10 , D39 = ( ( diff R9 ) . R10 ) as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
L329: ( R9 \ R10 ) = ( ( diff R9 ) . R10 ) by L307;
thus L330: ( R10 "\/" ( ( diff R9 ) . R10 ) ) = ( (the L_join of ( SubstLatt (R1 , R8) )) . (R10 , ( ( diff R9 ) . R10 )) ) by LATTICES:def 1
.= ( mi ( D38 \/ D39 ) ) by SUBSTLAT:def 4
.= ( mi D37 ) by L328 , L329 , XBOOLE_1:45
.= R9 by SUBSTLAT:11;
end;
L331: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R13 being (Element of ( PFuncs (R1 , R8) )) holds (for B172 being (Element of ( Fin ( PFuncs (R1 , R8) ) )) holds (B172 = { R13 } implies (ex B173 being (Element of ( SubstitutionSet (R1 , R8) )) st (B173 in ( SUB R9 ) & ( B173 ^ B172 ) = ( {} ) & (for R14 being (Element of ( PFuncs (R1 , R8) )) holds (R14 in ( ( diff R9 ) . B173 ) implies R14 tolerates R13))))))))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R13 being (Element of ( PFuncs (R1 , R8) ));
deffunc H9(set) = $1;
let C118 being (Element of ( Fin ( PFuncs (R1 , R8) ) ));
assume that
L332: C118 = { R13 };
deffunc H10((Element of ( PFuncs (R1 , R8) )) , (Element of ( PFuncs (R1 , R8) ))) = ( $1 \/ $2 );
defpred S13[ (Element of ( PFuncs (R1 , R8) )) ] means ((not $1 tolerates R13) & $1 in R9 & $1 tolerates R13);
deffunc H11((Element of ( PFuncs (R1 , R8) )) , (Element of ( PFuncs (R1 , R8) ))) = ( $1 \/ $2 );
defpred S14[ (Element of ( PFuncs (R1 , R8) )) ] means ($1 is  finite & (not $1 tolerates R13));
set D40 = { H9(B174) where B174 is (Element of ( PFuncs (R1 , R8) )) : (H9(B174) in R9 & S14[ B174 ]) };
defpred S15[ (Element of ( PFuncs (R1 , R8) )) , (Element of ( PFuncs (R1 , R8) )) ] means ($1 in D40 & $2 in { R13 } & $1 tolerates $2);
defpred S16[ (Element of ( PFuncs (R1 , R8) )) , (Element of ( PFuncs (R1 , R8) )) ] means ($2 = R13 & $1 in D40 & $1 tolerates $2);
defpred S17[ (Element of ( PFuncs (R1 , R8) )) ] means ($1 in D40 & $1 tolerates R13);
defpred S18[ (Element of ( PFuncs (R1 , R8) )) , (Element of ( PFuncs (R1 , R8) )) ] means ($1 in D40 & $1 tolerates $2);
deffunc H12((Element of ( PFuncs (R1 , R8) ))) = ( $1 \/ R13 );
L333: D40 c= R9 from FRAENKEL:sch 17;
reconsider D41 = D40 as (Element of ( SubstLatt (R1 , R8) )) by L333 , L273;
reconsider D42 = D41 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
take D42;
thus L334: D42 in ( SUB R9 ) by L333;
L335: (for R11 being (Element of ( PFuncs (R1 , R8) )) holds (for R12 being (Element of ( PFuncs (R1 , R8) )) holds (S15[ R11 , R12 ] iff S16[ R11 , R12 ]))) by TARSKI:def 1;
L336: { H11(R11 , R12) where R11 is (Element of ( PFuncs (R1 , R8) )) , R12 is (Element of ( PFuncs (R1 , R8) )) : S15[ R11 , R12 ] } = { H11(B175 , B176) where B175 , B176 is (Element of ( PFuncs (R1 , R8) )) : S16[ B175 , B176 ] } from FRAENKEL:sch 4(L335);
L337: (for R11 being (Element of ( PFuncs (R1 , R8) )) holds (R11 in D40 iff (R11 is  finite & (not R11 tolerates R13) & R11 in R9)))
proof
let R11 being (Element of ( PFuncs (R1 , R8) ));
thus L338: (R11 in D40 implies (R11 is  finite & (not R11 tolerates R13) & R11 in R9))
proof
assume L339: R11 in D40;
L340: (ex B177 being (Element of ( PFuncs (R1 , R8) )) st (B177 = R11 & B177 in R9 & B177 is  finite & (not B177 tolerates R13))) by L339;
thus L341: thesis by L340;
end;

thus L342: thesis;
end;
L343: (for R11 being (Element of ( PFuncs (R1 , R8) )) holds (S17[ R11 ] iff S13[ R11 ])) by L337;
L344: { H12(B178) where B178 is (Element of ( PFuncs (R1 , R8) )) : S17[ B178 ] } = { H12(R11) where R11 is (Element of ( PFuncs (R1 , R8) )) : S13[ R11 ] } from FRAENKEL:sch 3(L343);
L345: { H10(R11 , B179) where R11 is (Element of ( PFuncs (R1 , R8) )) , B179 is (Element of ( PFuncs (R1 , R8) )) : (B179 = R13 & S18[ R11 , B179 ]) } = { H10(B180 , R13) where B180 is (Element of ( PFuncs (R1 , R8) )) : S18[ B180 , R13 ] } from FRAENKEL:sch 20;
L346: ( D42 ^ C118 ) = { ( R11 \/ R13 ) where R11 is (Element of ( PFuncs (R1 , R8) )) : ((not R11 tolerates R13) & R11 in R9 & R11 tolerates R13) } by L345 , L332 , L336 , L344 , SUBSTLAT:def 3;
thus L347: ( D42 ^ C118 ) = ( {} )
proof
assume L348: ( D42 ^ C118 ) <> ( {} );
consider C119 being set such that L349: C119 in ( D42 ^ C118 ) by L348 , XBOOLE_0:def 1;
L350: (ex B181 being (Element of ( PFuncs (R1 , R8) )) st (C119 = ( B181 \/ R13 ) & (not B181 tolerates R13) & B181 in R9 & B181 tolerates R13)) by L346 , L349;
thus L351: thesis by L350;
end;

let R14 being (Element of ( PFuncs (R1 , R8) ));
assume L352: R14 in ( ( diff R9 ) . D42 );
L353: R14 in ( R9 \ D42 ) by L352 , L307;
L354: (not R14 in D40) by L353 , XBOOLE_0:def 5;
L355: R9 in (the carrier of ( SubstLatt (R1 , R8) ));
L356: R9 in ( SubstitutionSet (R1 , R8) ) by L355 , SUBSTLAT:def 4;
L357: R14 is  finite by L356 , L353 , L1;
thus L358: thesis by L357 , L353 , L354;
end;
definition
let R1 being set;
let R8 being  finite set;
func Atom (R1 , R8) -> (Function of ( PFuncs (R1 , R8) ) , (the carrier of ( SubstLatt (R1 , R8) ))) means
:L359: (for B182 being (Element of ( PFuncs (R1 , R8) )) holds ( it . B182 ) = ( mi {. B182 .} ));
existence
proof
deffunc H13((Element of ( PFuncs (R1 , R8) ))) = ( mi {. $1 .} );
consider C120 being (Function of ( PFuncs (R1 , R8) ) , ( SubstitutionSet (R1 , R8) )) such that L360: (for B183 being (Element of ( PFuncs (R1 , R8) )) holds ( C120 . B183 ) = H13(B183)) from FUNCT_2:sch 4;
L361: (the carrier of ( SubstLatt (R1 , R8) )) = ( SubstitutionSet (R1 , R8) ) by SUBSTLAT:def 4;
L362:
now
let C121 being set;
assume L363: C121 in ( PFuncs (R1 , R8) );
reconsider D43 = C121 as (Element of ( PFuncs (R1 , R8) )) by L363;
L364: ( C120 . D43 ) = ( mi {. D43 .} ) by L360;
thus L365: ( C120 . C121 ) in (the carrier of ( SubstLatt (R1 , R8) )) by L364 , L361;
end;
L366: ( dom C120 ) = ( PFuncs (R1 , R8) ) by FUNCT_2:def 1;
reconsider D44 = C120 as (Function of ( PFuncs (R1 , R8) ) , (the carrier of ( SubstLatt (R1 , R8) ))) by L366 , L362 , FUNCT_2:3;
take D44;
thus L367: thesis by L360;
end;
correctness
proof
let C122 , C123 being (Function of ( PFuncs (R1 , R8) ) , (the carrier of ( SubstLatt (R1 , R8) )));
assume that
L368: (for R13 being (Element of ( PFuncs (R1 , R8) )) holds ( C122 . R13 ) = ( mi {. R13 .} ))
and
L369: (for R13 being (Element of ( PFuncs (R1 , R8) )) holds ( C123 . R13 ) = ( mi {. R13 .} ));
L370:
now
let R13 being (Element of ( PFuncs (R1 , R8) ));
L371: ( C122 . R13 ) = ( mi {. R13 .} ) by L368;
thus L372: ( C122 . R13 ) = ( C123 . R13 ) by L371 , L369;
end;
thus L373: thesis by L370 , FUNCT_2:63;
end;
end;
L375: (for R1 being set holds (for R8 being  finite set holds (for B184 being (Element of ( PFuncs (R1 , R8) )) holds (B184 is  finite implies ( ( Atom (R1 , R8) ) . B184 ) = { B184 }))))
proof
let R1 being set;
let R8 being  finite set;
let C124 being (Element of ( PFuncs (R1 , R8) ));
L376: (for B185 , B186 being (Element of ( PFuncs (R1 , R8) )) holds ((B185 in { C124 } & B186 in { C124 } & B185 c= B186) implies B185 = B186))
proof
let C125 , C126 being (Element of ( PFuncs (R1 , R8) ));
assume that
L377: C125 in { C124 }
and
L378: C126 in { C124 }
and
L379: C125 c= C126;
L380: C125 = C124 by L377 , TARSKI:def 1;
thus L381: thesis by L380 , L378 , TARSKI:def 1;
end;
assume L382: C124 is  finite;
L383: (for B187 being set holds (B187 in { C124 } implies B187 is  finite)) by L382;
L384: {. C124 .} in { B188 where B188 is (Element of ( Fin ( PFuncs (R1 , R8) ) )) : ((for B189 being set holds (B189 in B188 implies B189 is  finite)) & (for B190 , B191 being (Element of ( PFuncs (R1 , R8) )) holds ((B190 in B188 & B191 in B188 & B190 c= B191) implies B190 = B191))) } by L383 , L376;
L385: { C124 } in ( SubstitutionSet (R1 , R8) ) by L384 , SUBSTLAT:def 1;
L386: { C124 } = ( mi {. C124 .} ) by L385 , SUBSTLAT:11
.= ( ( Atom (R1 , R8) ) . C124 ) by L359;
thus L387: thesis by L386;
end;
theorem
L388: (for R1 being set holds (for R8 being  finite set holds (for R15 being (Element of ( SubstitutionSet (R1 , R8) )) holds ( FinJoin (R15 , ( Atom (R1 , R8) )) ) = ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ))))
proof
let R1 being set;
let R8 being  finite set;
let R15 being (Element of ( SubstitutionSet (R1 , R8) ));
deffunc H14((Element of ( Fin ( PFuncs (R1 , R8) ) ))) = ( mi $1 );
L389: ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) c= ( mi ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) )
proof
let C127 being set;
assume L390: C127 in ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) );
consider C128 being (Element of ( PFuncs (R1 , R8) )) such that L391: C128 in R15 and L392: C127 in ( ( singleton ( PFuncs (R1 , R8) ) ) . C128 ) by L390 , SETWISEO:57;
L393: C127 = C128 by L392 , SETWISEO:55;
L394:
now
L395: R15 in ( SubstitutionSet (R1 , R8) );
L396: R15 in { B192 where B192 is (Element of ( Fin ( PFuncs (R1 , R8) ) )) : ((for B193 being set holds (B193 in B192 implies B193 is  finite)) & (for B194 , B195 being (Element of ( PFuncs (R1 , R8) )) holds ((B194 in B192 & B195 in B192 & B194 c= B195) implies B194 = B195))) } by L395 , SUBSTLAT:def 1;
L397: (ex B196 being (Element of ( Fin ( PFuncs (R1 , R8) ) )) st (R15 = B196 & (for B197 being set holds (B197 in B196 implies B197 is  finite)) & (for B198 , B199 being (Element of ( PFuncs (R1 , R8) )) holds ((B198 in B196 & B199 in B196 & B198 c= B199) implies B198 = B199)))) by L396;
let C129 being  finite set;
assume that
L398: C129 in ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) )
and
L399: C129 c= C127;
consider R12 being (Element of ( PFuncs (R1 , R8) )) such that L400: R12 in R15 and L401: C129 in ( ( singleton ( PFuncs (R1 , R8) ) ) . R12 ) by L398 , SETWISEO:57;
L402: C129 = R12 by L401 , SETWISEO:55;
thus L403: C129 = C127 by L402 , L391 , L393 , L399 , L400 , L397;
end;
L404: C127 is  finite by L391 , L393 , L1;
thus L405: thesis by L404 , L390 , L394 , SUBSTLAT:7;
end;
consider C130 being (Function of ( Fin ( PFuncs (R1 , R8) ) ) , ( SubstitutionSet (R1 , R8) )) such that L406: (for B200 being (Element of ( Fin ( PFuncs (R1 , R8) ) )) holds ( C130 . B200 ) = H14(B200)) from FUNCT_2:sch 4;
reconsider D45 = C130 as (Function of ( Fin ( PFuncs (R1 , R8) ) ) , (the carrier of ( SubstLatt (R1 , R8) ))) by SUBSTLAT:def 4;
L407:
now
let C131 , C132 being (Element of ( Fin ( PFuncs (R1 , R8) ) ));
L408: ( D45 . C131 ) = ( mi C131 ) by L406;
L409: ( D45 . C132 ) = ( mi C132 ) by L406;
thus L410: ( D45 . ( C131 \/ C132 ) ) = ( mi ( C131 \/ C132 ) ) by L406
.= ( mi ( ( mi C131 ) \/ C132 ) ) by SUBSTLAT:13
.= ( mi ( ( mi C131 ) \/ ( mi C132 ) ) ) by SUBSTLAT:13
.= ( (the L_join of ( SubstLatt (R1 , R8) )) . (( D45 . C131 ) , ( D45 . C132 )) ) by L408 , L409 , SUBSTLAT:def 4;
end;
L411:
now
let C133 being set;
assume L412: C133 in R15;
reconsider D46 = C133 as (Element of ( PFuncs (R1 , R8) )) by L412 , SETWISEO:9;
L413: D46 is  finite by L412 , L1;
reconsider D47 = { D46 } as (Element of ( SubstitutionSet (R1 , R8) )) by L413 , L12;
thus L414: ( ( ( D45 * ( singleton ( PFuncs (R1 , R8) ) ) ) | R15 ) . C133 ) = ( ( D45 * ( singleton ( PFuncs (R1 , R8) ) ) ) . C133 ) by L412 , FUNCT_1:49
.= ( D45 . ( ( singleton ( PFuncs (R1 , R8) ) ) . D46 ) ) by FUNCT_2:15
.= ( D45 . { C133 } ) by SETWISEO:54
.= ( mi D47 ) by L406
.= D47 by SUBSTLAT:11
.= ( ( Atom (R1 , R8) ) . D46 ) by L413 , L375
.= ( ( ( Atom (R1 , R8) ) | R15 ) . C133 ) by L412 , FUNCT_1:49;
end;
L415: ( mi ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) ) c= ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) by SUBSTLAT:8;
L416: ( rng ( singleton ( PFuncs (R1 , R8) ) ) ) c= ( Fin ( PFuncs (R1 , R8) ) );
L417: R15 c= ( PFuncs (R1 , R8) ) by FINSUB_1:def 5;
L418: R15 c= ( dom ( Atom (R1 , R8) ) ) by L417 , FUNCT_2:def 1;
L419: ( dom ( ( Atom (R1 , R8) ) | R15 ) ) = R15 by L418 , RELAT_1:62;
reconsider D48 = ( D45 * ( singleton ( PFuncs (R1 , R8) ) ) ) as (Function of ( PFuncs (R1 , R8) ) , (the carrier of ( SubstLatt (R1 , R8) )));
L420: ( D45 . ( {}. ( PFuncs (R1 , R8) ) ) ) = ( mi ( {}. ( PFuncs (R1 , R8) ) ) ) by L406
.= ( {} ) by SUBSTLAT:9
.= ( Bottom ( SubstLatt (R1 , R8) ) ) by SUBSTLAT:26
.= ( the_unity_wrt (the L_join of ( SubstLatt (R1 , R8) )) ) by LATTICE2:18;
L421: ( dom D45 ) = ( Fin ( PFuncs (R1 , R8) ) ) by FUNCT_2:def 1;
L422: ( dom ( D45 * ( singleton ( PFuncs (R1 , R8) ) ) ) ) = ( dom ( singleton ( PFuncs (R1 , R8) ) ) ) by L421 , L416 , RELAT_1:27;
L423: ( dom ( singleton ( PFuncs (R1 , R8) ) ) ) = ( PFuncs (R1 , R8) ) by FUNCT_2:def 1;
L424: ( dom ( ( D45 * ( singleton ( PFuncs (R1 , R8) ) ) ) | R15 ) ) = R15 by L423 , L417 , L422 , RELAT_1:62;
thus L425: ( FinJoin (R15 , ( Atom (R1 , R8) )) ) = ( FinJoin (R15 , D48) ) by L424 , L419 , L411 , FUNCT_1:2 , LATTICE2:53
.= ( (the L_join of ( SubstLatt (R1 , R8) )) $$ (R15 , D48) ) by LATTICE2:def 3
.= ( D45 . ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) ) by L420 , L407 , SETWISEO:53
.= ( mi ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) ) by L406
.= ( FinUnion (R15 , ( singleton ( PFuncs (R1 , R8) ) )) ) by L415 , L389 , XBOOLE_0:def 10;
end;
theorem
L426: (for R1 being set holds (for R8 being  finite set holds (for B201 being (Element of ( SubstitutionSet (R1 , R8) )) holds B201 = ( FinJoin (B201 , ( Atom (R1 , R8) )) ))))
proof
let R1 being set;
let R8 being  finite set;
let C134 being (Element of ( SubstitutionSet (R1 , R8) ));
thus L427: C134 = ( FinUnion (C134 , ( singleton ( PFuncs (R1 , R8) ) )) ) by SETWISEO:58
.= ( FinJoin (C134 , ( Atom (R1 , R8) )) ) by L388;
end;
L428: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ((for B202 being set holds (B202 in R9 implies (ex B203 being set st (B203 in R10 & B203 c= B202)))) implies R9 [= R10)))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
assume L429: (for B204 being set holds (B204 in R9 implies (ex B205 being set st (B205 in R10 & B205 c= B204))));
reconsider D49 = R9 , D50 = R10 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
L430: ( R9 "/\" R10 ) = ( (the L_meet of ( SubstLatt (R1 , R8) )) . (D49 , D50) ) by LATTICES:def 2
.= ( mi ( D49 ^ D50 ) ) by SUBSTLAT:def 4
.= D49 by L429 , L37;
thus L431: thesis by L430 , LATTICES:4;
end;
theorem
L432: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ( ( diff R9 ) . R10 ) [= R9))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
L433: ( ( diff R9 ) . R10 ) = ( R9 \ R10 ) by L307;
L434: (for B206 being set holds (B206 in ( ( diff R9 ) . R10 ) implies (ex B207 being set st (B207 in R9 & B207 c= B206)))) by L433;
thus L435: thesis by L434 , L428;
end;
theorem
L436: (for R1 being set holds (for R8 being  finite set holds (for B208 being (Element of ( PFuncs (R1 , R8) )) holds (B208 is  finite implies (for B209 being set holds (B209 in ( ( Atom (R1 , R8) ) . B208 ) implies B209 = B208))))))
proof
let R1 being set;
let R8 being  finite set;
let C135 being (Element of ( PFuncs (R1 , R8) ));
assume L437: C135 is  finite;
L438: ( ( Atom (R1 , R8) ) . C135 ) = { C135 } by L437 , L375;
thus L439: thesis by L438 , TARSKI:def 1;
end;
theorem
L440: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R15 being (Element of ( SubstitutionSet (R1 , R8) )) holds (for R16 being (Element of ( SubstitutionSet (R1 , R8) )) holds (for B210 being (Element of ( PFuncs (R1 , R8) )) holds ((R15 = { B210 } & R16 = R9 & ( R16 ^ R15 ) = ( {} )) implies ( ( Atom (R1 , R8) ) . B210 ) [= ( ( pseudo_compl (R1 , R8) ) . R9 ))))))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R15 being (Element of ( SubstitutionSet (R1 , R8) ));
let R16 being (Element of ( SubstitutionSet (R1 , R8) ));
let C136 being (Element of ( PFuncs (R1 , R8) ));
assume that
L441: R15 = { C136 }
and
L442: R16 = R9
and
L443: ( R16 ^ R15 ) = ( {} );
L444: C136 in R15 by L441 , TARSKI:def 1;
L445: C136 is  finite by L444 , L1;
L446:
now
let C137 being set;
assume L447: C137 in ( ( Atom (R1 , R8) ) . C136 );
reconsider D51 = C137 as (Element of ( PFuncs (R1 , R8) )) by L447 , L445 , L436;
L448: C137 = C136 by L445 , L447 , L436;
consider C138 being  finite set such that L449: C138 in ( - R16 ) and L450: C138 c= D51 by L448 , L441 , L443 , L169;
consider C139 being set such that L451: C139 c= C138 and L452: C139 in ( mi ( - R16 ) ) by L449 , SUBSTLAT:10;
take D52 = C139;
thus L453: D52 in ( ( pseudo_compl (R1 , R8) ) . R9 ) by L442 , L452 , L278;
thus L454: D52 c= C137 by L450 , L451 , XBOOLE_1:1;
end;
thus L455: thesis by L446 , L428;
end;
theorem
L456: (for R1 being set holds (for R8 being  finite set holds (for B211 being  finite (Element of ( PFuncs (R1 , R8) )) holds B211 in ( ( Atom (R1 , R8) ) . B211 ))))
proof
let R1 being set;
let R8 being  finite set;
let C140 being  finite (Element of ( PFuncs (R1 , R8) ));
L457: ( ( Atom (R1 , R8) ) . C140 ) = { C140 } by L375;
thus L458: thesis by L457 , TARSKI:def 1;
end;
L459: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds (R9 [= R10 implies (for B212 being set holds (B212 in R9 implies (ex B213 being set st (B213 in R10 & B213 c= B212)))))))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
reconsider D53 = R9 , D54 = R10 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
assume L460: R9 [= R10;
L461: R9 = ( R9 "/\" R10 ) by L460 , LATTICES:4
.= ( (the L_meet of ( SubstLatt (R1 , R8) )) . (R9 , R10) ) by LATTICES:def 2
.= ( mi ( D53 ^ D54 ) ) by SUBSTLAT:def 4;
thus L462: thesis by L461 , L29;
end;
theorem
L463: (for R1 being set holds (for R8 being  finite set holds (for R13 being (Element of ( PFuncs (R1 , R8) )) holds (for B214 , B215 being (Element of ( SubstitutionSet (R1 , R8) )) holds ((for B216 being set holds (B216 in B214 implies (ex B217 being set st (B217 in B215 & B217 c= ( B216 \/ R13 ))))) implies (ex B218 being set st (B218 in ( B214 =>> B215 ) & B218 c= R13)))))))
proof
let R1 being set;
let R8 being  finite set;
let R13 being (Element of ( PFuncs (R1 , R8) ));
let C141 , C142 being (Element of ( SubstitutionSet (R1 , R8) ));
reconsider D55 = C141 as (Element of ( SubstLatt (R1 , R8) )) by SUBSTLAT:def 4;
defpred S19[ set , set ] means ($2 in C142 & $2 c= ( $1 \/ R13 ));
assume that
L464: (for B219 being set holds (B219 in C141 implies (ex B220 being set st (B220 in C142 & B220 c= ( B219 \/ R13 )))));
L465:
now
let C143 being (Element of ( PFuncs (R1 , R8) ));
assume L466: C143 in C141;
consider C144 being set such that L467: C144 in C142 and L468: C144 c= ( C143 \/ R13 ) by L466 , L464;
L469: C142 c= ( PFuncs (R1 , R8) ) by FINSUB_1:def 5;
reconsider D56 = C144 as (Element of ( PFuncs (R1 , R8) )) by L469 , L467;
take D57 = D56;
thus L470: S19[ C143 , D57 ] by L467 , L468;
end;
consider C145 being (Element of ( Funcs (( PFuncs (R1 , R8) ) , ( PFuncs (R1 , R8) )) )) such that L471: (for R14 being (Element of ( PFuncs (R1 , R8) )) holds (R14 in C141 implies S19[ R14 , ( C145 . R14 ) ])) from FRAENKEL:sch 27(L465);
set D58 = ( C145 | C141 );
consider C146 being Function such that L472: C145 = C146 and L473: ( dom C146 ) = ( PFuncs (R1 , R8) ) and L474: ( rng C146 ) c= ( PFuncs (R1 , R8) ) by FUNCT_2:def 2;
L475: C141 c= ( PFuncs (R1 , R8) ) by FINSUB_1:def 5;
L476: D58 is (Function of C141 , ( PFuncs (R1 , R8) )) by L475 , FUNCT_2:32;
L477: ( dom D58 ) = C141 by L476 , FUNCT_2:def 1;
L478: (for B221 being set holds (B221 in C141 implies ( D58 . B221 ) in C142))
proof
let C147 being set;
assume L479: C147 in C141;
L480: C141 c= ( PFuncs (R1 , R8) ) by FINSUB_1:def 5;
reconsider D59 = C147 as (Element of ( PFuncs (R1 , R8) )) by L480 , L479;
L481: ( D58 . D59 ) = ( C146 . D59 ) by L472 , L479 , FUNCT_1:49;
thus L482: thesis by L481 , L471 , L472 , L479;
end;
L483: D58 is (Function of C141 , C142) by L478 , L477 , FUNCT_2:3;
L484: ( rng D58 ) c= C142 by L483 , RELAT_1:def 19;
L485: (for B222 being set holds (B222 in D55 implies ( D58 . B222 ) c= ( B222 \/ R13 )))
proof
let C148 being set;
assume L486: C148 in D55;
L487: C141 c= ( PFuncs (R1 , R8) ) by FINSUB_1:def 5;
reconsider D60 = C148 as (Element of ( PFuncs (R1 , R8) )) by L487 , L486;
L488: ( D58 . D60 ) = ( C146 . D60 ) by L472 , L486 , FUNCT_1:49;
thus L489: thesis by L488 , L471 , L472 , L486;
end;
reconsider D61 = D58 as (Element of ( PFuncs (C141 , C142) )) by L477 , L484 , PARTFUN1:def 3;
set D62 = ( union { ( ( D61 . B223 ) \ B223 ) where B223 is (Element of ( PFuncs (R1 , R8) )) : B223 in D55 } );
L490: D62 c= R13
proof
let C149 being set;
assume L491: C149 in D62;
consider C150 being set such that L492: C149 in C150 and L493: C150 in { ( ( D61 . B224 ) \ B224 ) where B224 is (Element of ( PFuncs (R1 , R8) )) : B224 in D55 } by L491 , TARSKI:def 4;
consider C151 being (Element of ( PFuncs (R1 , R8) )) such that L494: C150 = ( ( D61 . C151 ) \ C151 ) and L495: C151 in D55 by L493;
L496: ( D61 . C151 ) c= ( C151 \/ R13 ) by L485 , L495;
L497: ( ( D61 . C151 ) \ C151 ) c= R13 by L496 , XBOOLE_1:43;
thus L498: thesis by L497 , L492 , L494;
end;
reconsider D63 = D62 as (Element of ( PFuncs (R1 , R8) )) by L490 , PRE_POLY:15;
take D63;
L499: D63 in { ( union { ( ( B225 . B226 ) \ B226 ) where B226 is (Element of ( PFuncs (R1 , R8) )) : B226 in C141 } ) where B225 is (Element of ( PFuncs (C141 , C142) )) : ( dom B225 ) = C141 } by L477;
thus L500: D63 in ( C141 =>> C142 ) by L499 , XBOOLE_0:def 4;
thus L501: thesis by L490;
end;
theorem
L502: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds (for B227 being  finite (Element of ( PFuncs (R1 , R8) )) holds (((for B228 being (Element of ( PFuncs (R1 , R8) )) holds (B228 in R9 implies B228 tolerates B227)) & ( R9 "/\" ( ( Atom (R1 , R8) ) . B227 ) ) [= R10) implies ( ( Atom (R1 , R8) ) . B227 ) [= ( ( StrongImpl (R1 , R8) ) . (R9 , R10) )))))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
let C152 being  finite (Element of ( PFuncs (R1 , R8) ));
assume that
L503: (for B229 being (Element of ( PFuncs (R1 , R8) )) holds (B229 in R9 implies B229 tolerates C152))
and
L504: ( R9 "/\" ( ( Atom (R1 , R8) ) . C152 ) ) [= R10;
reconsider D64 = R9 , D65 = R10 , D66 = ( ( Atom (R1 , R8) ) . C152 ) as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
L505:
now
let C153 being set;
L506: C152 in D66 by L456;
assume L507: C153 in R9;
L508: C153 in D64 by L507;
reconsider D67 = C153 as (Element of ( PFuncs (R1 , R8) )) by L508 , SETWISEO:9;
L509: D67 tolerates C152 by L503 , L507;
L510: ( C153 \/ C152 ) in { ( B230 \/ B231 ) where B230 , B231 is (Element of ( PFuncs (R1 , R8) )) : (B230 in D64 & B231 in D66 & B230 tolerates B231) } by L509 , L507 , L506;
L511: ( C153 \/ C152 ) in ( D64 ^ D66 ) by L510 , SUBSTLAT:def 3;
L512: C153 is  finite by L508 , L1;
consider C154 being set such that L513: C154 c= ( C153 \/ C152 ) and L514: C154 in ( mi ( D64 ^ D66 ) ) by L512 , L511 , SUBSTLAT:10;
L515: C154 in ( (the L_meet of ( SubstLatt (R1 , R8) )) . (R9 , ( ( Atom (R1 , R8) ) . C152 )) ) by L514 , SUBSTLAT:def 4;
L516: C154 in ( R9 "/\" ( ( Atom (R1 , R8) ) . C152 ) ) by L515 , LATTICES:def 2;
consider C155 being set such that L517: C155 in R10 and L518: C155 c= C154 by L516 , L504 , L459;
take D68 = C155;
thus L519: D68 in R10 by L517;
thus L520: D68 c= ( C153 \/ C152 ) by L513 , L518 , XBOOLE_1:1;
end;
L521:
now
let C156 being set;
assume L522: C156 in ( ( Atom (R1 , R8) ) . C152 );
L523: C156 = C152 by L522 , L436;
consider C157 being set such that L524: C157 in ( D64 =>> D65 ) and L525: C157 c= C156 by L523 , L505 , L463;
L526: C156 in D66 by L522;
L527: C156 is  finite by L526 , L1;
consider C158 being set such that L528: C158 c= C157 and L529: C158 in ( mi ( D64 =>> D65 ) ) by L527 , L524 , L525 , SUBSTLAT:10;
take D69 = C158;
thus L530: D69 in ( ( StrongImpl (R1 , R8) ) . (R9 , R10) ) by L529 , L287;
thus L531: D69 c= C156 by L525 , L528 , XBOOLE_1:1;
end;
thus L532: thesis by L521 , L428;
end;
deffunc H15(set , set) = (the L_meet of ( SubstLatt ($1 , $2) ));
theorem
L533: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds ( R9 "/\" ( ( pseudo_compl (R1 , R8) ) . R9 ) ) = ( Bottom ( SubstLatt (R1 , R8) ) ))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
reconsider D70 = R9 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
thus L534: ( R9 "/\" ( ( pseudo_compl (R1 , R8) ) . R9 ) ) = ( H15(R1 , R8) . (R9 , ( ( pseudo_compl (R1 , R8) ) . R9 )) ) by LATTICES:def 2
.= ( H15(R1 , R8) . (R9 , ( mi ( - D70 ) )) ) by L278
.= ( mi ( D70 ^ ( mi ( - D70 ) ) ) ) by SUBSTLAT:def 4
.= ( mi ( D70 ^ ( - D70 ) ) ) by SUBSTLAT:20
.= ( Bottom ( SubstLatt (R1 , R8) ) ) by L160;
end;
theorem
L535: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ( R9 "/\" ( ( StrongImpl (R1 , R8) ) . (R9 , R10) ) ) [= R10))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
L536:
now
reconsider D71 = R9 , D72 = R10 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
let C159 being set;
assume L537: C159 in ( R9 "/\" ( ( StrongImpl (R1 , R8) ) . (R9 , R10) ) );
L538: ( R9 "/\" ( ( StrongImpl (R1 , R8) ) . (R9 , R10) ) ) = ( H15(R1 , R8) . (R9 , ( ( StrongImpl (R1 , R8) ) . (R9 , R10) )) ) by LATTICES:def 2
.= ( H15(R1 , R8) . (R9 , ( mi ( D71 =>> D72 ) )) ) by L287
.= ( mi ( D71 ^ ( mi ( D71 =>> D72 ) ) ) ) by SUBSTLAT:def 4
.= ( mi ( D71 ^ ( D71 =>> D72 ) ) ) by SUBSTLAT:20;
L539: C159 in ( D71 ^ ( D71 =>> D72 ) ) by L538 , L537 , SUBSTLAT:6;
thus L540: (ex B232 being set st (B232 in R10 & B232 c= C159)) by L539 , L235;
end;
thus L541: thesis by L536 , L428;
end;
L542:
now
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
deffunc H16((Element of ( SubstLatt (R1 , R8) )) , (Element of ( SubstLatt (R1 , R8) ))) = ( FinJoin (( SUB $1 ) , ( H15(R1 , R8) .: (( pseudo_compl (R1 , R8) ) , ( ( StrongImpl (R1 , R8) ) [:] (( diff $1 ) , $2) )) )) );
set D73 = ( H15(R1 , R8) .: (( pseudo_compl (R1 , R8) ) , ( ( StrongImpl (R1 , R8) ) [:] (( diff R9 ) , R10) )) );
reconsider D74 = R10 as (Element of ( SubstitutionSet (R1 , R8) )) by SUBSTLAT:def 4;
L543:
now
let C160 being (Element of ( SubstLatt (R1 , R8) ));
set D75 = ( ( diff R9 ) . C160 );
set D76 = ( ( pseudo_compl (R1 , R8) ) . C160 );
set D77 = ( ( StrongImpl (R1 , R8) ) . (D75 , R10) );
L544: ( C160 "/\" ( D76 "/\" D77 ) ) = ( ( C160 "/\" D76 ) "/\" D77 ) by LATTICES:def 7
.= ( ( Bottom ( SubstLatt (R1 , R8) ) ) "/\" D77 ) by L533
.= ( Bottom ( SubstLatt (R1 , R8) ) );
assume L545: C160 in ( SUB R9 );
L546: ( C160 "\/" D75 ) = R9 by L545 , L327;
L547: ( ( H15(R1 , R8) [;] (R9 , D73) ) . C160 ) = ( H15(R1 , R8) . (R9 , ( D73 . C160 )) ) by FUNCOP_1:53
.= ( R9 "/\" ( D73 . C160 ) ) by LATTICES:def 2
.= ( R9 "/\" ( H15(R1 , R8) . (D76 , ( ( ( StrongImpl (R1 , R8) ) [:] (( diff R9 ) , R10) ) . C160 )) ) ) by FUNCOP_1:37
.= ( R9 "/\" ( D76 "/\" ( ( ( StrongImpl (R1 , R8) ) [:] (( diff R9 ) , R10) ) . C160 ) ) ) by LATTICES:def 2
.= ( R9 "/\" ( D76 "/\" D77 ) ) by FUNCOP_1:48
.= ( ( C160 "/\" ( D76 "/\" D77 ) ) "\/" ( D75 "/\" ( D76 "/\" D77 ) ) ) by L546 , LATTICES:def 11
.= ( D75 "/\" ( D77 "/\" D76 ) ) by L544 , LATTICES:14
.= ( ( D75 "/\" D77 ) "/\" D76 ) by LATTICES:def 7;
L548: ( ( H15(R1 , R8) [;] (R9 , D73) ) . C160 ) [= ( D75 "/\" D77 ) by L547 , LATTICES:6;
L549: ( D75 "/\" D77 ) [= R10 by L535;
thus L550: ( ( H15(R1 , R8) [;] (R9 , D73) ) . C160 ) [= R10 by L549 , L548 , LATTICES:7;
end;
L551: ( R9 "/\" H16(R9 , R10) ) = ( FinJoin (( SUB R9 ) , ( H15(R1 , R8) [;] (R9 , D73) )) ) by LATTICE2:66;
thus L552: ( R9 "/\" H16(R9 , R10) ) [= R10 by L551 , L543 , LATTICE2:54;
let C161 being (Element of ( SubstLatt (R1 , R8) ));
assume L553: ( R9 "/\" R10 ) [= C161;
L554: R10 = ( FinJoin (D74 , ( Atom (R1 , R8) )) ) by L426;
L555: ( R9 "/\" R10 ) = ( FinJoin (D74 , ( H15(R1 , R8) [;] (R9 , ( Atom (R1 , R8) )) )) ) by L554 , LATTICE2:66;
L556:
now
set D78 = ( pseudo_compl (R1 , R8) );
set D79 = ( ( StrongImpl (R1 , R8) ) [:] (( diff R9 ) , C161) );
let C162 being (Element of ( PFuncs (R1 , R8) ));
reconsider D80 = {. C162 .} as (Element of ( Fin ( PFuncs (R1 , R8) ) ));
consider C163 being (Element of ( SubstitutionSet (R1 , R8) )) such that L557: C163 in ( SUB R9 ) and L558: ( C163 ^ D80 ) = ( {} ) and L559: (for B233 being (Element of ( PFuncs (R1 , R8) )) holds (B233 in ( ( diff R9 ) . C163 ) implies B233 tolerates C162)) by L331;
assume L560: C162 in D74;
L561: C162 is  finite by L560 , L1;
reconsider D81 = C163 as (Element of ( SubstLatt (R1 , R8) )) by SUBSTLAT:def 4;
set D82 = ( ( diff R9 ) . D81 );
L562: ( ( H15(R1 , R8) [;] (R9 , ( Atom (R1 , R8) )) ) . C162 ) [= C161 by L555 , L553 , L560 , LATTICE2:31;
L563: ( H15(R1 , R8) . (R9 , ( ( Atom (R1 , R8) ) . C162 )) ) [= C161 by L562 , FUNCOP_1:53;
L564: ( R9 "/\" ( ( Atom (R1 , R8) ) . C162 ) ) [= C161 by L563 , LATTICES:def 2;
L565: C162 is  finite by L560 , L1;
reconsider D83 = { C162 } as (Element of ( SubstitutionSet (R1 , R8) )) by L565 , L12;
L566: ( C163 ^ D83 ) = ( {} ) by L558;
L567: ( ( Atom (R1 , R8) ) . C162 ) [= ( D78 . D81 ) by L566 , L440;
L568: ( D82 "/\" ( ( Atom (R1 , R8) ) . C162 ) ) [= ( R9 "/\" ( ( Atom (R1 , R8) ) . C162 ) ) by L432 , LATTICES:9;
L569: ( D82 "/\" ( ( Atom (R1 , R8) ) . C162 ) ) [= C161 by L568 , L564 , LATTICES:7;
L570: ( ( Atom (R1 , R8) ) . C162 ) [= ( ( StrongImpl (R1 , R8) ) . (( ( diff R9 ) . D81 ) , C161) ) by L569 , L559 , L561 , L502;
L571: ( ( Atom (R1 , R8) ) . C162 ) [= ( D79 . D81 ) by L570 , FUNCOP_1:48;
L572: ( ( D78 . D81 ) "/\" ( D79 . D81 ) ) = ( H15(R1 , R8) . (( D78 . D81 ) , ( D79 . D81 )) ) by LATTICES:def 2
.= ( ( H15(R1 , R8) .: (D78 , D79) ) . D81 ) by FUNCOP_1:37;
L573: ( ( Atom (R1 , R8) ) . C162 ) [= ( ( H15(R1 , R8) .: (D78 , D79) ) . D81 ) by L572 , L567 , L571 , FILTER_0:7;
thus L574: ( ( Atom (R1 , R8) ) . C162 ) [= H16(R9 , C161) by L573 , L557 , LATTICE2:29;
end;
thus L575: R10 [= H16(R9 , C161) by L556 , L554 , LATTICE2:54;
end;
L576: (for R1 being set holds (for R8 being  finite set holds ( SubstLatt (R1 , R8) ) is  implicative))
proof
let R1 being set;
let R8 being  finite set;
let C164 , C165 being (Element of ( SubstLatt (R1 , R8) ));
take D84 = ( FinJoin (( SUB C164 ) , ( H15(R1 , R8) .: (( pseudo_compl (R1 , R8) ) , ( ( StrongImpl (R1 , R8) ) [:] (( diff C164 ) , C165) )) )) );
thus L577: (( C164 "/\" D84 ) [= C165 & (for B234 being (Element of ( SubstLatt (R1 , R8) )) holds (( C164 "/\" B234 ) [= C165 implies B234 [= D84))) by L542;
end;
registration
let R1 being set;
let R8 being  finite set;
cluster ( SubstLatt (R1 , R8) ) ->  implicative;
coherence by L576;
end;
theorem
L579: (for R1 being set holds (for R8 being  finite set holds (for R9 being (Element of ( SubstLatt (R1 , R8) )) holds (for R10 being (Element of ( SubstLatt (R1 , R8) )) holds ( R9 => R10 ) = ( FinJoin (( SUB R9 ) , ( (the L_meet of ( SubstLatt (R1 , R8) )) .: (( pseudo_compl (R1 , R8) ) , ( ( StrongImpl (R1 , R8) ) [:] (( diff R9 ) , R10) )) )) )))))
proof
let R1 being set;
let R8 being  finite set;
let R9 being (Element of ( SubstLatt (R1 , R8) ));
let R10 being (Element of ( SubstLatt (R1 , R8) ));
deffunc H17((Element of ( SubstLatt (R1 , R8) )) , (Element of ( SubstLatt (R1 , R8) ))) = ( FinJoin (( SUB $1 ) , ( H15(R1 , R8) .: (( pseudo_compl (R1 , R8) ) , ( ( StrongImpl (R1 , R8) ) [:] (( diff $1 ) , $2) )) )) );
L580: (for B235 being (Element of ( SubstLatt (R1 , R8) )) holds (( R9 "/\" B235 ) [= R10 implies B235 [= H17(R9 , R10))) by L542;
L581: ( R9 "/\" H17(R9 , R10) ) [= R10 by L542;
thus L582: thesis by L581 , L580 , FILTER_0:def 7;
end;
