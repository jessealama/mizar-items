:: Lower Tolerance. {P}reliminaries to {W}roclaw Taxonomy
::  by Mariusz Giero and Roman Matuszewski
::
:: Received December 5, 2000
:: Copyright (c) 2000-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, XBOOLE_0, PARTFUN1, ZFMISC_1, XREAL_0, ORDINAL1,
      XXREAL_0, CARD_1, FINSEQ_1, NAT_1, ARYTM_3, RELAT_1, FUNCT_1, RELAT_2,
      TARSKI, REWRITE1, FINSEQ_5, ARYTM_1, SUBSET_1, EQREL_1, SETFAM_1,
      PARTIT1, METRIC_1, SUPINF_2, FINSET_1, STRUCT_0, XXREAL_2, MEASURE5,
      TAXONOM1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, SETFAM_1, ORDINAL1, NUMBERS,
      XCMPLX_0, XXREAL_0, XREAL_0, PARTFUN1, STRUCT_0, RELAT_1, RELAT_2,
      FUNCT_1, RELSET_1, FUNCT_2, PARTIT1, METRIC_1, TBSP_1, FINSET_1, EQREL_1,
      ALG_1, REWRITE1, FINSEQ_1, XXREAL_2, NAT_1, LANG1, FINSEQ_5;
 constructors NAT_1, PARTIT1, FINSEQ_5, REWRITE1, TBSP_1, LANG1, XXREAL_2,
      RELSET_1;
 registrations XBOOLE_0, SUBSET_1, RELSET_1, FINSET_1, NUMBERS, XXREAL_0,
      XREAL_0, MEMBERED, EQREL_1, STRUCT_0, TBSP_1, XXREAL_2;
 requirements NUMERALS, BOOLE, SUBSET, REAL, ARITHM;
 definitions TARSKI, SETFAM_1, BINOP_1, EQREL_1, STRUCT_0;
 theorems EQREL_1, ZFMISC_1, PARTIT1, TARSKI, SETFAM_1, RELAT_2, METRIC_1,
      RELAT_1, REWRITE1, FINSEQ_1, LANG1, FINSEQ_5, RELSET_1, NAT_1, FUNCT_1,
      FUNCT_2, FINSEQ_3, TBSP_1, MSUALG_9, XBOOLE_0, XBOOLE_1, PARTFUN1,
      ORDERS_1, XREAL_1, XXREAL_0, ORDINAL1, XXREAL_2;
 schemes RELSET_1, LMOD_7, NAT_1, XBOOLE_0;

begin
registration
cluster non  negative for  real  real  real  real number;
existence
proof
take ( 0 );
thus L1: thesis;
end;
end;
theorem
L3: (for B1 being FinSequence holds (for B2 being Nat holds ((( B2 + 1 ) in ( dom B1 ) & (not B2 in ( dom B1 ))) implies B2 = ( 0 ))))
proof
let C1 being FinSequence;
let C2 being Nat;
assume that
L4: ( C2 + 1 ) in ( dom C1 )
and
L5: (not C2 in ( dom C1 ));
assume L6: C2 <> ( 0 );
L7: C2 >= 1 by L6 , NAT_1:14;
L8: (C2 <= ( C2 + 1 ) & ( C2 + 1 ) <= ( len C1 )) by L4 , FINSEQ_3:25 , NAT_1:12;
L9: C2 <= ( len C1 ) by L8 , XXREAL_0:2;
thus L10: thesis by L9 , L5 , L7 , FINSEQ_3:25;
end;
theorem
L11: (for B3 being FinSequence holds (for B4 , B5 being Nat holds ((B4 in ( dom B3 ) & B5 in ( dom B3 ) & (for B6 being Nat holds ((B6 in ( dom B3 ) & ( B6 + 1 ) in ( dom B3 )) implies ( B3 . B6 ) = ( B3 . ( B6 + 1 ) )))) implies ( B3 . B4 ) = ( B3 . B5 ))))
proof
let C3 being FinSequence;
let C4 , C5 being Nat;
assume that
L12: (C4 in ( dom C3 ) & C5 in ( dom C3 ))
and
L13: (for B7 being Nat holds ((B7 in ( dom C3 ) & ( B7 + 1 ) in ( dom C3 )) implies ( C3 . B7 ) = ( C3 . ( B7 + 1 ) )));
defpred S1[ Nat ] means (for B8 being Nat holds (($1 in ( dom C3 ) & B8 in ( dom C3 )) implies ( C3 . $1 ) = ( C3 . B8 )));
L14: (for B9 being Nat holds (S1[ B9 ] implies S1[ ( B9 + 1 ) ]))
proof
let C6 being Nat;
assume that
L15: S1[ C6 ];
let C7 being Nat;
assume that
L16: ( C6 + 1 ) in ( dom C3 )
and
L17: C7 in ( dom C3 );
per cases ;
suppose L18: C6 in ( dom C3 );

thus L19: ( C3 . ( C6 + 1 ) ) = ( C3 . C6 ) by L18 , L13 , L16
.= ( C3 . C7 ) by L15 , L17 , L18;
end;
suppose L20: (not C6 in ( dom C3 ));

defpred S2[ Nat ] means ($1 in ( dom C3 ) implies ( C3 . $1 ) = ( C3 . 1 ));
L21: (for B10 being Nat holds (S2[ B10 ] implies S2[ ( B10 + 1 ) ]))
proof
let C8 being Nat;
assume that
L22: S2[ C8 ];
assume L23: ( C8 + 1 ) in ( dom C3 );
per cases ;
suppose L24: C8 in ( dom C3 );

thus L25: thesis by L24 , L13 , L22 , L23;
end;
suppose L26: (not C8 in ( dom C3 ));

L27: C8 = ( 0 ) by L26 , L23 , L3;
thus L28: thesis by L27;
end;
end;
L30: S2[ ( 0 ) ] by FINSEQ_3:24;
L31: (for B11 being Nat holds S2[ B11 ]) from NAT_1:sch 2(L30 , L21);
L32: C6 = ( 0 ) by L16 , L20 , L3;
thus L33: thesis by L32 , L17 , L31;
end;
end;
L35: S1[ ( 0 ) ] by FINSEQ_3:24;
L36: (for B12 being Nat holds S1[ B12 ]) from NAT_1:sch 2(L35 , L14);
thus L37: thesis by L36 , L12;
end;
theorem
L38: (for B13 being set holds (for B14 being (Relation of B13) holds (B14 is_reflexive_in B13 implies ( dom B14 ) = B13)))
proof
let C9 being set;
let C10 being (Relation of C9);
assume that
L39: C10 is_reflexive_in C9;
L40: (for B15 being set holds (B15 in C9 implies (ex B16 being set st [ B15 , B16 ] in C10)))
proof
let C11 being set;
assume that
L41: C11 in C9;
take C11;
thus L42: thesis by L39 , L41 , RELAT_2:def 1;
end;
thus L43: thesis by L40 , RELSET_1:9;
end;
theorem
L44: (for B17 being set holds (for B18 being (Relation of B17) holds (B18 is_reflexive_in B17 implies ( rng B18 ) = B17)))
proof
let C12 being set;
let C13 being (Relation of C12);
assume that
L45: C13 is_reflexive_in C12;
L46: (for B19 being set holds (B19 in C12 implies (ex B20 being set st [ B20 , B19 ] in C13)))
proof
let C14 being set;
assume that
L47: C14 in C12;
consider C15 being set such that L48: C15 = C14;
take C15;
thus L49: thesis by L45 , L47 , L48 , RELAT_2:def 1;
end;
thus L50: thesis by L46 , RELSET_1:10;
end;
theorem
L51: (for B21 being set holds (for B22 being (Relation of B21) holds (B22 is_reflexive_in B21 implies ( B22 [*] ) is_reflexive_in B21)))
proof
let C16 being set;
let C17 being (Relation of C16);
assume that
L52: C17 is_reflexive_in C16;
L53:
now
let C18 being set;
assume L54: C18 in C16;
L55: [ C18 , C18 ] in C17 by L54 , L52 , RELAT_2:def 1;
L56: C17 c= ( C17 [*] ) by LANG1:18;
thus L57: [ C18 , C18 ] in ( C17 [*] ) by L56 , L55;
end;
thus L58: thesis by L53 , RELAT_2:def 1;
end;
theorem
L59: (for B23 , B24 , B25 being set holds (for B26 being (Relation of B23) holds (B26 is_reflexive_in B23 implies ((B26 reduces B24 , B25 & B24 in B23) implies [ B24 , B25 ] in ( B26 [*] )))))
proof
let C19 , C20 , C21 being set;
let C22 being (Relation of C19);
assume that
L60: C22 is_reflexive_in C19;
assume that
L61: C22 reduces C20 , C21
and
L62: C20 in C19;
per cases  by L61 , REWRITE1:20;
suppose L63: [ C20 , C21 ] in ( C22 [*] );

thus L64: thesis by L63;
end;
suppose L65: C20 = C21;

L66: ( C22 [*] ) is_reflexive_in C19 by L60 , L51;
thus L67: thesis by L66 , L62 , L65 , RELAT_2:def 1;
end;
end;
theorem
L69: (for B27 being set holds (for B28 being (Relation of B27) holds (B28 is_symmetric_in B27 implies ( B28 [*] ) is_symmetric_in B27)))
proof
let C23 being set;
let C24 being (Relation of C23);
assume that
L70: C24 is_symmetric_in C23;
L71:
now
let C25 , C26 being set;
assume that
L72: C25 in C23
and
L73: C26 in C23
and
L74: [ C25 , C26 ] in ( C24 [*] );
L75: (C25 in ( field C24 ) & C26 in ( field C24 )) by L74 , FINSEQ_1:def 16;
consider C27 being FinSequence such that L76: ( len C27 ) >= 1 and L77: ( C27 . 1 ) = C25 and L78: ( C27 . ( len C27 ) ) = C26 and L79: (for B29 being Nat holds ((B29 >= 1 & B29 < ( len C27 )) implies [ ( C27 . B29 ) , ( C27 . ( B29 + 1 ) ) ] in C24)) by L74 , FINSEQ_1:def 16;
consider C28 being FinSequence such that L80: C28 = ( Rev C27 );
L81:
now
let C29 being Nat;
assume that
L82: C29 >= 1
and
L83: C29 < ( len C28 );
L84: ( ( len C27 ) - ( 0 ) ) > ( ( len C27 ) - C29 ) by L82 , XREAL_1:10;
L85: C29 <= ( len C27 ) by L80 , L83 , FINSEQ_5:def 3;
L86: C29 in ( Seg ( len C27 ) ) by L85 , L82 , FINSEQ_1:1;
L87: C29 in ( dom C27 ) by L86 , FINSEQ_1:def 3;
L88: ( C28 . C29 ) = ( C27 . ( ( ( len C27 ) - C29 ) + 1 ) ) by L87 , L80 , FINSEQ_5:58;
L89: C29 < ( len C27 ) by L80 , L83 , FINSEQ_5:def 3;
L90: ( len C27 ) >= ( C29 + 1 ) by L89 , NAT_1:13;
L91: ( C29 + 1 ) >= 1 by NAT_1:11;
L92: ( C29 + 1 ) in ( Seg ( len C27 ) ) by L91 , L90 , FINSEQ_1:1;
L93: ( C29 + 1 ) in ( dom C27 ) by L92 , FINSEQ_1:def 3;
L94: ( ( len C27 ) - C29 ) is Nat by L89 , NAT_1:21;
L95: ( ( len C27 ) - C29 ) in ( NAT ) by L94 , ORDINAL1:def 12;
consider C30 being (Element of ( NAT )) such that L96: C30 = ( ( len C27 ) - C29 ) by L95;
L97: C30 >= 1 by L90 , L96 , XREAL_1:19;
L98: [ ( C27 . ( ( len C27 ) - C29 ) ) , ( C27 . ( ( ( len C27 ) - C29 ) + 1 ) ) ] in C24 by L97 , L79 , L96 , L84;
L99: (( C27 . ( ( len C27 ) - C29 ) ) in C23 & ( C27 . ( ( ( len C27 ) - C29 ) + 1 ) ) in C23) by L98 , ZFMISC_1:87;
L100: [ ( C27 . ( ( ( len C27 ) - C29 ) + 1 ) ) , ( C27 . ( ( ( len C27 ) - ( C29 + 1 ) ) + 1 ) ) ] in C24 by L99 , L70 , L98 , RELAT_2:def 3;
thus L101: [ ( C28 . C29 ) , ( C28 . ( C29 + 1 ) ) ] in C24 by L100 , L80 , L93 , L88 , FINSEQ_5:58;
end;
L102: ( C28 . ( len C28 ) ) = ( C28 . ( len C27 ) ) by L80 , FINSEQ_5:def 3
.= C25 by L77 , L80 , FINSEQ_5:62;
L103: (( len C28 ) >= 1 & ( C28 . 1 ) = C26) by L76 , L78 , L80 , FINSEQ_5:62 , FINSEQ_5:def 3;
thus L104: [ C26 , C25 ] in ( C24 [*] ) by L103 , L75 , L102 , L81 , FINSEQ_1:def 16;
end;
thus L105: thesis by L71 , RELAT_2:def 3;
end;
theorem
L106: (for B30 being set holds (for B31 being (Relation of B30) holds (B31 is_reflexive_in B30 implies ( B31 [*] ) is_transitive_in B30)))
proof
let C31 being set;
let C32 being (Relation of C31);
assume that
L107: C32 is_reflexive_in C31;
L108:
now
let C33 , C34 , C35 being set;
assume that
L109: C33 in C31
and
L110: C34 in C31
and
L111: C35 in C31
and
L112: ([ C33 , C34 ] in ( C32 [*] ) & [ C34 , C35 ] in ( C32 [*] ));
L113: (C32 reduces C33 , C34 & C32 reduces C34 , C35) by L112 , REWRITE1:20;
thus L114: [ C33 , C35 ] in ( C32 [*] ) by L113 , L107 , L109 , L59 , REWRITE1:16;
end;
thus L115: thesis by L108 , RELAT_2:def 8;
end;
theorem
L116: (for B32 being non  empty set holds (for B33 being (Relation of B32) holds ((B33 is_reflexive_in B32 & B33 is_symmetric_in B32) implies ( B33 [*] ) is (Equivalence_Relation of B32))))
proof
let C36 being non  empty set;
let C37 being (Relation of C36);
assume that
L117: C37 is_reflexive_in C36
and
L118: C37 is_symmetric_in C36;
L119: ( C37 [*] ) is_reflexive_in C36 by L117 , L51;
L120: (( dom ( C37 [*] ) ) = C36 & ( field ( C37 [*] ) ) = C36) by L119 , ORDERS_1:13;
L121: (( C37 [*] ) is_symmetric_in C36 & ( C37 [*] ) is_transitive_in C36) by L117 , L118 , L69 , L106;
thus L122: thesis by L121 , L120 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
end;
theorem
L123: (for R2 being non  empty set holds (for B34 , B35 being (Relation of R2) holds (B34 c= B35 implies ( B34 [*] ) c= ( B35 [*] ))))
proof
let R2 being non  empty set;
let C38 , C39 being (Relation of R2);
assume L124: C38 c= C39;
L125:
now
L126: ( field C38 ) c= ( field C39 ) by L124 , RELAT_1:16;
let C40 being set;
assume that
L127: C40 in ( C38 [*] );
consider C41 , C42 being set such that L128: C40 = [ C41 , C42 ] by L127 , RELAT_1:def 1;
consider C43 being FinSequence such that L129: (( len C43 ) >= 1 & ( C43 . 1 ) = C41 & ( C43 . ( len C43 ) ) = C42) and L130: (for B36 being Nat holds ((B36 >= 1 & B36 < ( len C43 )) implies [ ( C43 . B36 ) , ( C43 . ( B36 + 1 ) ) ] in C38)) by L127 , L128 , FINSEQ_1:def 16;
L131:
now
let C44 being Nat;
assume L132: (C44 >= 1 & C44 < ( len C43 ));
L133: [ ( C43 . C44 ) , ( C43 . ( C44 + 1 ) ) ] in C38 by L132 , L130;
thus L134: [ ( C43 . C44 ) , ( C43 . ( C44 + 1 ) ) ] in C39 by L133 , L124;
end;
L135: (C41 in ( field C38 ) & C42 in ( field C38 )) by L127 , L128 , FINSEQ_1:def 16;
thus L136: C40 in ( C39 [*] ) by L135 , L128 , L129 , L126 , L131 , FINSEQ_1:def 16;
end;
thus L137: thesis by L125 , TARSKI:def 3;
end;
L138:
now
let R1 being non  empty set;
let C45 , C46 being (a_partition of R1);
assume that
L139: C45 in { { R1 } }
and
L140: C46 in { { R1 } };
L141: C45 = { R1 } by L139 , TARSKI:def 1;
thus L142: (C45 is_finer_than C46 or C46 is_finer_than C45) by L141 , L140 , TARSKI:def 1;
end;
theorem
L143: (for R1 being non  empty set holds ( SmallestPartition R1 ) is_finer_than { R1 })
proof
let R1 being non  empty set;
let C47 being set;
assume L144: C47 in ( SmallestPartition R1 );
take R1;
thus L145: thesis by L144 , TARSKI:def 1;
end;
begin
definition
let C48 being non  empty set;
mode Classification of C48
 -> (Subset of ( PARTITIONS C48 ))
means :L146: (for B37 , B38 being (a_partition of C48) holds ((B37 in it & B38 in it) implies (B37 is_finer_than B38 or B38 is_finer_than B37)));
existence
proof
L147: { C48 } is (a_partition of C48) by EQREL_1:39;
L148: { C48 } in ( PARTITIONS C48 ) by L147 , PARTIT1:def 3;
reconsider D1 = { { C48 } } as (Subset of ( PARTITIONS C48 )) by L148 , ZFMISC_1:31;
take D1;
thus L149: thesis by L138;
end;
end;
theorem
L151: (for R1 being non  empty set holds { { R1 } } is (Classification of R1))
proof
let R1 being non  empty set;
L152: { R1 } is (a_partition of R1) by EQREL_1:39;
L153: { R1 } in ( PARTITIONS R1 ) by L152 , PARTIT1:def 3;
reconsider D2 = { { R1 } } as (Subset of ( PARTITIONS R1 )) by L153 , ZFMISC_1:31;
L154: D2 is (Classification of R1)
proof
let C49 being (a_partition of R1);
thus L155: thesis by L138;
end;
thus L156: thesis by L154;
end;
theorem
L157: (for R1 being non  empty set holds { ( SmallestPartition R1 ) } is (Classification of R1))
proof
let R1 being non  empty set;
L158: ( SmallestPartition R1 ) in ( PARTITIONS R1 ) by PARTIT1:def 3;
reconsider D3 = { ( SmallestPartition R1 ) } as (Subset of ( PARTITIONS R1 )) by L158 , ZFMISC_1:31;
L159: D3 is (Classification of R1)
proof
let C50 , C51 being (a_partition of R1);
assume that
L160: C50 in D3
and
L161: C51 in D3;
L162: C50 = ( SmallestPartition R1 ) by L160 , TARSKI:def 1;
thus L163: thesis by L162 , L161 , TARSKI:def 1;
end;
thus L164: thesis by L159;
end;
theorem
L165: (for R1 being non  empty set holds (for B39 being (Subset of ( PARTITIONS R1 )) holds (B39 = { { R1 } , ( SmallestPartition R1 ) } implies B39 is (Classification of R1))))
proof
let R1 being non  empty set;
let C52 being (Subset of ( PARTITIONS R1 ));
assume L166: C52 = { { R1 } , ( SmallestPartition R1 ) };
let C53 , C54 being (a_partition of R1);
assume that
L167: C53 in C52
and
L168: C54 in C52;
per cases  by L166 , L167 , TARSKI:def 2;
suppose L169: C53 = { R1 };

per cases  by L166 , L168 , TARSKI:def 2;
suppose L170: C54 = { R1 };

thus L171: thesis by L170 , L169;
end;
suppose L172: C54 = ( SmallestPartition R1 );

thus L173: thesis by L172 , L169 , L143;
end;
end;
suppose L175: C53 = ( SmallestPartition R1 );

per cases  by L166 , L168 , TARSKI:def 2;
suppose L176: C54 = ( SmallestPartition R1 );

thus L177: thesis by L176 , L175;
end;
suppose L178: C54 = { R1 };

thus L179: thesis by L178 , L175 , L143;
end;
end;
end;
definition
let C55 being non  empty set;
mode Strong_Classification of C55
 -> (Subset of ( PARTITIONS C55 ))
means :L182: (it is (Classification of C55) & { C55 } in it & ( SmallestPartition C55 ) in it);
existence
proof
L183: { C55 } is (a_partition of C55) by EQREL_1:39;
L184: { C55 } in ( PARTITIONS C55 ) by L183 , PARTIT1:def 3;
L185: ( SmallestPartition C55 ) in ( PARTITIONS C55 ) by PARTIT1:def 3;
reconsider D4 = { { C55 } , ( SmallestPartition C55 ) } as (Subset of ( PARTITIONS C55 )) by L185 , L184 , ZFMISC_1:32;
take D4;
thus L186: thesis by L165 , TARSKI:def 2;
end;
end;
theorem
L188: (for R1 being non  empty set holds (for B40 being (Subset of ( PARTITIONS R1 )) holds (B40 = { { R1 } , ( SmallestPartition R1 ) } implies B40 is (Strong_Classification of R1))))
proof
let R1 being non  empty set;
let C56 being (Subset of ( PARTITIONS R1 ));
assume that
L189: C56 = { { R1 } , ( SmallestPartition R1 ) };
L190: ( SmallestPartition R1 ) in C56 by L189 , TARSKI:def 2;
L191: (C56 is (Classification of R1) & { R1 } in C56) by L189 , L165 , TARSKI:def 2;
thus L192: thesis by L191 , L190 , L182;
end;
begin
definition
let C57 being non  empty set;
let C58 being (PartFunc of [: C57 , C57 :] , ( REAL ));
let C59 being  real number;
func low_toler (C58 , C59) -> (Relation of C57) means 
:L193: (for B41 , B42 being (Element of C57) holds ([ B41 , B42 ] in it iff ( C58 . (B41 , B42) ) <= C59));
existence
proof
defpred S3[ (Element of C57) , (Element of C57) ] means ( C58 . ($1 , $2) ) <= C59;
consider C60 being (Relation of C57 , C57) such that L194: (for B43 , B44 being (Element of C57) holds ([ B43 , B44 ] in C60 iff S3[ B43 , B44 ])) from RELSET_1:sch 2;
take C60;
thus L195: thesis by L194;
end;
uniqueness
proof
let C61 , C62 being (Relation of C57);
assume that
L196: (for B45 , B46 being (Element of C57) holds ([ B45 , B46 ] in C61 iff ( C58 . (B45 , B46) ) <= C59))
and
L197: (for B47 , B48 being (Element of C57) holds ([ B47 , B48 ] in C62 iff ( C58 . (B47 , B48) ) <= C59));
L198: (for B49 , B50 being set holds ([ B49 , B50 ] in C62 implies [ B49 , B50 ] in C61))
proof
let C63 , C64 being set;
assume L199: [ C63 , C64 ] in C62;
reconsider D5 = C63 , D6 = C64 as (Element of C57) by L199 , ZFMISC_1:87;
L200: ( C58 . (D5 , D6) ) <= C59 by L197 , L199;
thus L201: thesis by L200 , L196;
end;
L202: (for B51 , B52 being set holds ([ B51 , B52 ] in C61 implies [ B51 , B52 ] in C62))
proof
let C65 , C66 being set;
assume L203: [ C65 , C66 ] in C61;
reconsider D7 = C65 , D8 = C66 as (Element of C57) by L203 , ZFMISC_1:87;
L204: ( C58 . (D7 , D8) ) <= C59 by L196 , L203;
thus L205: thesis by L204 , L197;
end;
thus L206: thesis by L202 , L198 , RELAT_1:def 2;
end;
end;
theorem
L208: (for R2 being non  empty set holds (for R3 being (PartFunc of [: R2 , R2 :] , ( REAL )) holds (for R4 being  real number holds ((R3 is  Reflexive & R4 >= ( 0 )) implies ( low_toler (R3 , R4) ) is_reflexive_in R2))))
proof
let R2 being non  empty set;
let R3 being (PartFunc of [: R2 , R2 :] , ( REAL ));
let R4 being  real number;
assume L209: (R3 is  Reflexive & R4 >= ( 0 ));
L210:
now
let C67 being set;
assume L211: C67 in R2;
reconsider D9 = C67 as (Element of R2) by L211;
L212: ( R3 . (D9 , D9) ) <= R4 by L209 , METRIC_1:def 2;
thus L213: [ C67 , C67 ] in ( low_toler (R3 , R4) ) by L212 , L193;
end;
thus L214: thesis by L210 , RELAT_2:def 1;
end;
theorem
L215: (for R2 being non  empty set holds (for R3 being (PartFunc of [: R2 , R2 :] , ( REAL )) holds (for R4 being  real number holds (R3 is  symmetric implies ( low_toler (R3 , R4) ) is_symmetric_in R2))))
proof
let R2 being non  empty set;
let R3 being (PartFunc of [: R2 , R2 :] , ( REAL ));
let R4 being  real number;
assume L216: R3 is  symmetric;
L217:
now
let C68 , C69 being set;
assume that
L218: (C68 in R2 & C69 in R2)
and
L219: [ C68 , C69 ] in ( low_toler (R3 , R4) );
reconsider D10 = C68 , D11 = C69 as (Element of R2) by L218;
L220: ( R3 . (D10 , D11) ) <= R4 by L219 , L193;
L221: ( R3 . (D11 , D10) ) <= R4 by L220 , L216 , METRIC_1:def 4;
thus L222: [ C69 , C68 ] in ( low_toler (R3 , R4) ) by L221 , L193;
end;
thus L223: thesis by L217 , RELAT_2:def 3;
end;
theorem
L224: (for R2 being non  empty set holds (for R3 being (PartFunc of [: R2 , R2 :] , ( REAL )) holds (for R4 being  real number holds ((R4 >= ( 0 ) & R3 is  Reflexive  symmetric) implies ( low_toler (R3 , R4) ) is (Tolerance of R2)))))
proof
let R2 being non  empty set;
let R3 being (PartFunc of [: R2 , R2 :] , ( REAL ));
let R4 being  real number;
set D12 = ( low_toler (R3 , R4) );
assume that
L225: R4 >= ( 0 )
and
L226: R3 is  Reflexive  symmetric;
L227: ( low_toler (R3 , R4) ) is_reflexive_in R2 by L225 , L226 , L208;
L228: ( dom D12 ) = R2 by L225 , L226 , L38 , L208;
L229: ( field D12 ) = ( R2 \/ ( rng ( low_toler (R3 , R4) ) ) ) by L228 , RELAT_1:def 6
.= R2 by XBOOLE_1:12;
L230: D12 is_symmetric_in ( field D12 ) by L229 , L226 , L215;
thus L231: thesis by L230 , L227 , L228 , L229 , PARTFUN1:def 2 , RELAT_2:def 9 , RELAT_2:def 11;
end;
theorem
L232: (for B53 being non  empty set holds (for B54 being (PartFunc of [: B53 , B53 :] , ( REAL )) holds (for B55 , B56 being  real number holds (B55 <= B56 implies ( low_toler (B54 , B55) ) c= ( low_toler (B54 , B56) )))))
proof
let C70 being non  empty set;
let C71 being (PartFunc of [: C70 , C70 :] , ( REAL ));
let C72 , C73 being  real number;
assume that
L233: C72 <= C73;
L234:
now
let C74 being set;
assume that
L235: C74 in ( low_toler (C71 , C72) );
consider C75 , C76 being set such that L236: (C75 in C70 & C76 in C70) and L237: C74 = [ C75 , C76 ] by L235 , ZFMISC_1:def 2;
reconsider D13 = C75 , D14 = C76 as (Element of C70) by L236;
L238: ( C71 . (D13 , D14) ) <= C72 by L235 , L237 , L193;
L239: ( C71 . (D13 , D14) ) <= C73 by L238 , L233 , XXREAL_0:2;
thus L240: C74 in ( low_toler (C71 , C73) ) by L239 , L237 , L193;
end;
thus L241: thesis by L234 , TARSKI:def 3;
end;
definition
let C77 being set;
let C78 being (PartFunc of [: C77 , C77 :] , ( REAL ));
attr C78 is  nonnegative
means
:L242: (for B57 , B58 being (Element of C77) holds ( C78 . (B57 , B58) ) >= ( 0 ));
end;
theorem
L244: (for B59 being non  empty set holds (for B60 being (PartFunc of [: B59 , B59 :] , ( REAL )) holds (for B61 , B62 being set holds (B60 is  nonnegative  Reflexive  discerning implies ([ B61 , B62 ] in ( low_toler (B60 , ( 0 )) ) implies B61 = B62)))))
proof
let C79 being non  empty set;
let C80 being (PartFunc of [: C79 , C79 :] , ( REAL ));
let C81 , C82 being set;
assume that
L245: C80 is  nonnegative  Reflexive  discerning;
assume L246: [ C81 , C82 ] in ( low_toler (C80 , ( 0 )) );
reconsider D15 = C81 , D16 = C82 as (Element of C79) by L246 , ZFMISC_1:87;
L247: ( C80 . (D15 , D16) ) <= ( 0 ) by L246 , L193;
L248: ( C80 . (D15 , D16) ) = ( 0 ) by L247 , L245 , L242;
thus L249: thesis by L248 , L245 , METRIC_1:def 3;
end;
theorem
L250: (for B63 being non  empty set holds (for B64 being (PartFunc of [: B63 , B63 :] , ( REAL )) holds (for B65 being (Element of B63) holds (B64 is  Reflexive  discerning implies [ B65 , B65 ] in ( low_toler (B64 , ( 0 )) )))))
proof
let C83 being non  empty set;
let C84 being (PartFunc of [: C83 , C83 :] , ( REAL ));
let C85 being (Element of C83);
assume L251: C84 is  Reflexive  discerning;
L252: ( C84 . (C85 , C85) ) = ( 0 ) by L251 , METRIC_1:def 2;
thus L253: thesis by L252 , L193;
end;
theorem
L254: (for B66 being non  empty set holds (for B67 being (PartFunc of [: B66 , B66 :] , ( REAL )) holds (for B68 being  real number holds ((( low_toler (B67 , B68) ) is_reflexive_in B66 & B67 is  symmetric) implies ( ( low_toler (B67 , B68) ) [*] ) is (Equivalence_Relation of B66)))))
proof
let C86 being non  empty set;
let C87 being (PartFunc of [: C86 , C86 :] , ( REAL ));
let C88 being  real number;
assume that
L255: ( low_toler (C87 , C88) ) is_reflexive_in C86
and
L256: C87 is  symmetric;
L257:
now
let C89 , C90 being set;
assume that
L258: (C89 in C86 & C90 in C86)
and
L259: [ C89 , C90 ] in ( low_toler (C87 , C88) );
reconsider D17 = C89 , D18 = C90 as (Element of C86) by L258;
L260: ( C87 . (D17 , D18) ) <= C88 by L259 , L193;
L261: ( C87 . (D18 , D17) ) <= C88 by L260 , L256 , METRIC_1:def 4;
thus L262: [ C90 , C89 ] in ( low_toler (C87 , C88) ) by L261 , L193;
end;
L263: ( low_toler (C87 , C88) ) is_symmetric_in C86 by L257 , RELAT_2:def 3;
thus L264: thesis by L263 , L255 , L116;
end;
L265: (for B69 being set holds (for B70 being non  empty set holds (for B71 , B72 being non  negative  real number holds (B71 <= B72 implies (for B73 being (PartFunc of [: B70 , B70 :] , ( REAL )) holds (for B74 , B75 being (Equivalence_Relation of B70) holds ((B74 = ( ( low_toler (B73 , B71) ) [*] ) & B75 = ( ( low_toler (B73 , B72) ) [*] )) implies ( Class (B74 , B69) ) c= ( Class (B75 , B69) ))))))))
proof
let C91 being set;
let C92 being non  empty set;
let C93 , C94 being non  negative  real number;
assume that
L266: C93 <= C94;
let C95 being (PartFunc of [: C92 , C92 :] , ( REAL ));
let C96 , C97 being (Equivalence_Relation of C92);
assume that
L267: (C96 = ( ( low_toler (C95 , C93) ) [*] ) & C97 = ( ( low_toler (C95 , C94) ) [*] ));
L268:
now
let C98 being set;
assume L269: C98 in ( Class (C96 , C91) );
L270: [ C98 , C91 ] in C96 by L269 , EQREL_1:19;
L271: C96 c= C97 by L266 , L267 , L123 , L232;
thus L272: C98 in ( Class (C97 , C91) ) by L271 , L270 , EQREL_1:19;
end;
thus L273: thesis by L268 , TARSKI:def 3;
end;
begin
theorem
L274: (for B76 being non  empty set holds (for B77 being (PartFunc of [: B76 , B76 :] , ( REAL )) holds (B77 is  nonnegative  Reflexive  discerning implies ( ( low_toler (B77 , ( 0 )) ) [*] ) = ( low_toler (B77 , ( 0 )) ))))
proof
let C99 being non  empty set;
let C100 being (PartFunc of [: C99 , C99 :] , ( REAL ));
assume that
L275: C100 is  nonnegative  Reflexive  discerning;
L276:
now
let C101 being set;
assume that
L277: C101 in ( ( low_toler (C100 , ( 0 )) ) [*] );
consider C102 , C103 being set such that L278: C101 = [ C102 , C103 ] by L277 , RELAT_1:def 1;
L279: ( low_toler (C100 , ( 0 )) ) reduces C102 , C103 by L277 , L278 , REWRITE1:20;
consider C104 being (RedSequence of ( low_toler (C100 , ( 0 )) )) such that L280: (( C104 . 1 ) = C102 & ( C104 . ( len C104 ) ) = C103) by L279 , REWRITE1:def 3;
L281:
now
let C105 being Nat;
assume L282: (C105 in ( dom C104 ) & ( C105 + 1 ) in ( dom C104 ));
L283: [ ( C104 . C105 ) , ( C104 . ( C105 + 1 ) ) ] in ( low_toler (C100 , ( 0 )) ) by L282 , REWRITE1:def 2;
thus L284: ( C104 . C105 ) = ( C104 . ( C105 + 1 ) ) by L283 , L275 , L244;
end;
L285: C102 is (Element of C99) by L277 , L278 , ZFMISC_1:87;
L286: ( 0 ) < ( len C104 ) by REWRITE1:def 2;
L287: ( ( 0 ) + 1 ) <= ( len C104 ) by L286 , NAT_1:13;
L288: (1 in ( dom C104 ) & ( len C104 ) in ( dom C104 )) by L287 , FINSEQ_3:25;
L289: ( C104 . 1 ) = ( C104 . ( len C104 ) ) by L288 , L281 , L11;
thus L290: C101 in ( low_toler (C100 , ( 0 )) ) by L289 , L275 , L278 , L280 , L285 , L250;
end;
L291: (( low_toler (C100 , ( 0 )) ) c= ( ( low_toler (C100 , ( 0 )) ) [*] ) & ( ( low_toler (C100 , ( 0 )) ) [*] ) c= ( low_toler (C100 , ( 0 )) )) by L276 , LANG1:18 , TARSKI:def 3;
thus L292: thesis by L291 , XBOOLE_0:def 10;
end;
theorem
L293: (for B78 being non  empty set holds (for B79 being (PartFunc of [: B78 , B78 :] , ( REAL )) holds (for B80 being (Equivalence_Relation of B78) holds ((B80 = ( ( low_toler (B79 , ( 0 )) ) [*] ) & B79 is  nonnegative  Reflexive  discerning) implies B80 = ( id B78 )))))
proof
let C106 being non  empty set;
let C107 being (PartFunc of [: C106 , C106 :] , ( REAL ));
let C108 being (Equivalence_Relation of C106);
assume that
L294: C108 = ( ( low_toler (C107 , ( 0 )) ) [*] )
and
L295: C107 is  nonnegative  Reflexive  discerning;
L296: (for B81 , B82 being set holds ((B81 in C106 & B81 = B82) implies [ B81 , B82 ] in ( ( low_toler (C107 , ( 0 )) ) [*] )))
proof
let C109 , C110 being set;
assume L297: (C109 in C106 & C109 = C110);
L298: [ C109 , C110 ] in ( low_toler (C107 , ( 0 )) ) by L297 , L295 , L250;
thus L299: thesis by L298 , L295 , L274;
end;
L300: (for B83 , B84 being set holds ([ B83 , B84 ] in ( ( low_toler (C107 , ( 0 )) ) [*] ) implies (B83 in C106 & B83 = B84)))
proof
let C111 , C112 being set;
assume L301: [ C111 , C112 ] in ( ( low_toler (C107 , ( 0 )) ) [*] );
L302: [ C111 , C112 ] in ( low_toler (C107 , ( 0 )) ) by L301 , L295 , L274;
thus L303: thesis by L302 , L295 , L244 , ZFMISC_1:87;
end;
thus L304: thesis by L300 , L294 , L296 , RELAT_1:def 10;
end;
theorem
L305: (for B85 being non  empty set holds (for B86 being (PartFunc of [: B85 , B85 :] , ( REAL )) holds (for B87 being (Equivalence_Relation of B85) holds ((B87 = ( ( low_toler (B86 , ( 0 )) ) [*] ) & B86 is  nonnegative  Reflexive  discerning) implies ( Class B87 ) = ( SmallestPartition B85 ))))) by L293;
theorem
L306: (for B88 being  finite non  empty (Subset of ( REAL )) holds (for B89 being (Function of [: B88 , B88 :] , ( REAL )) holds (for B90 being  finite non  empty (Subset of ( REAL )) holds (for B91 being  real number holds ((B90 = ( rng B89 ) & B91 >= ( max B90 )) implies (for B92 , B93 being (Element of B88) holds ( B89 . (B92 , B93) ) <= B91))))))
proof
let C113 being  finite non  empty (Subset of ( REAL ));
let C114 being (Function of [: C113 , C113 :] , ( REAL ));
let C115 being  finite non  empty (Subset of ( REAL ));
let C116 being  real number;
assume that
L307: C115 = ( rng C114 )
and
L308: C116 >= ( max C115 );
L309:
now
let C117 , C118 being (Element of C113);
L310: ( C114 . [ C117 , C118 ] ) = ( C114 . (C117 , C118) );
reconsider D19 = ( C114 . [ C117 , C118 ] ) as  real number by L310;
L311: ( dom C114 ) = [: C113 , C113 :] by FUNCT_2:def 1;
L312: [ C117 , C118 ] in ( dom C114 ) by L311 , ZFMISC_1:def 2;
L313: D19 in C115 by L312 , L307 , FUNCT_1:def 3;
L314: ( C114 . (C117 , C118) ) <= ( max C115 ) by L313 , XXREAL_2:def 8;
thus L315: ( C114 . (C117 , C118) ) <= C116 by L314 , L308 , XXREAL_0:2;
end;
thus L316: thesis by L309;
end;
theorem
L317: (for B94 being  finite non  empty (Subset of ( REAL )) holds (for B95 being (Function of [: B94 , B94 :] , ( REAL )) holds (for B96 being  finite non  empty (Subset of ( REAL )) holds (for B97 being  real number holds ((B96 = ( rng B95 ) & B97 >= ( max B96 )) implies (for B98 being (Equivalence_Relation of B94) holds (B98 = ( ( low_toler (B95 , B97) ) [*] ) implies ( Class B98 ) = { B94 })))))))
proof
let C119 being  finite non  empty (Subset of ( REAL ));
let C120 being (Function of [: C119 , C119 :] , ( REAL ));
let C121 being  finite non  empty (Subset of ( REAL ));
let C122 being  real number;
assume that
L318: (C121 = ( rng C120 ) & C122 >= ( max C121 ));
L319:
now
let C123 being (Equivalence_Relation of C119);
assume that
L320: C123 = ( ( low_toler (C120 , C122) ) [*] );
L321: (for B99 being set holds (B99 in C119 implies C119 = ( Class (C123 , B99) )))
proof
let C124 being set;
assume L322: C124 in C119;
reconsider D20 = C124 as (Element of C119) by L322;
L323:
now
let C125 being set;
assume L324: C125 in C119;
reconsider D21 = C125 as (Element of C119) by L324;
L325: ( C120 . (D21 , D20) ) <= C122 by L318 , L306;
L326: [ C125 , C124 ] in ( low_toler (C120 , C122) ) by L325 , L193;
L327: ( low_toler (C120 , C122) ) c= ( ( low_toler (C120 , C122) ) [*] ) by LANG1:18;
thus L328: C125 in ( Class (C123 , C124) ) by L327 , L320 , L326 , EQREL_1:19;
end;
L329: C119 c= ( Class (C123 , C124) ) by L323 , TARSKI:def 3;
thus L330: thesis by L329 , XBOOLE_0:def 10;
end;
L331:
now
let C126 being set;
assume L332: C126 in { C119 };
L333: C126 = C119 by L332 , TARSKI:def 1;
consider C127 being set such that L334: C127 in C119 by XBOOLE_0:def 1;
L335: C119 = ( Class (C123 , C127) ) by L321 , L334;
thus L336: C126 in ( Class C123 ) by L335 , L333 , L334 , EQREL_1:def 3;
end;
L337: { C119 } c= ( Class C123 ) by L331 , TARSKI:def 3;
L338:
now
let C128 being set;
assume L339: C128 in ( Class C123 );
L340: (ex B100 being set st (B100 in C119 & C128 = ( Class (C123 , B100) ))) by L339 , EQREL_1:def 3;
L341: C128 = C119 by L340 , L321;
thus L342: C128 in { C119 } by L341 , TARSKI:def 1;
end;
L343: ( Class C123 ) c= { C119 } by L338 , TARSKI:def 3;
thus L344: ( Class C123 ) = { C119 } by L343 , L337 , XBOOLE_0:def 10;
end;
thus L345: thesis by L319;
end;
theorem
L346: (for B101 being  finite non  empty (Subset of ( REAL )) holds (for B102 being (Function of [: B101 , B101 :] , ( REAL )) holds (for B103 being  finite non  empty (Subset of ( REAL )) holds (for B104 being  real number holds ((B103 = ( rng B102 ) & B104 >= ( max B103 )) implies ( ( low_toler (B102 , B104) ) [*] ) = ( low_toler (B102 , B104) ))))))
proof
let C129 being  finite non  empty (Subset of ( REAL ));
let C130 being (Function of [: C129 , C129 :] , ( REAL ));
let C131 being  finite non  empty (Subset of ( REAL ));
let C132 being  real number;
assume that
L347: (C131 = ( rng C130 ) & C132 >= ( max C131 ));
L348:
now
let C133 being set;
assume L349: C133 in ( ( low_toler (C130 , C132) ) [*] );
consider C134 , C135 being set such that L350: (C134 in C129 & C135 in C129) and L351: C133 = [ C134 , C135 ] by L349 , ZFMISC_1:def 2;
reconsider D22 = C134 , D23 = C135 as (Element of C129) by L350;
L352: ( C130 . (D22 , D23) ) <= C132 by L347 , L306;
thus L353: C133 in ( low_toler (C130 , C132) ) by L352 , L351 , L193;
end;
L354: (( low_toler (C130 , C132) ) c= ( ( low_toler (C130 , C132) ) [*] ) & ( ( low_toler (C130 , C132) ) [*] ) c= ( low_toler (C130 , C132) )) by L348 , LANG1:18 , TARSKI:def 3;
thus L355: thesis by L354 , XBOOLE_0:def 10;
end;
begin
definition
let C136 being non  empty set;
let C137 being (PartFunc of [: C136 , C136 :] , ( REAL ));
func fam_class C137 -> (Subset of ( PARTITIONS C136 )) means 
:L356: (for B105 being set holds (B105 in it iff (ex B106 being non  negative  real number st (ex B107 being (Equivalence_Relation of C136) st (B107 = ( ( low_toler (C137 , B106) ) [*] ) & ( Class B107 ) = B105)))));
existence
proof
defpred S4[ set ] means (ex B108 being non  negative  real number st (ex B109 being (Equivalence_Relation of C136) st (B109 = ( ( low_toler (C137 , B108) ) [*] ) & ( Class B109 ) = $1)));
consider C138 being set such that L357: (for B110 being set holds (B110 in C138 iff (B110 in ( PARTITIONS C136 ) & S4[ B110 ]))) from XBOOLE_0:sch 1;
L358: C138 c= ( PARTITIONS C136 )
proof
let C139 being set;
assume L359: C139 in C138;
thus L360: thesis by L359 , L357;
end;
reconsider D24 = C138 as (Subset of ( PARTITIONS C136 )) by L358;
take D24;
let C140 being set;
thus L361: (C140 in D24 implies (ex B111 being non  negative  real number st (ex B112 being (Equivalence_Relation of C136) st (B112 = ( ( low_toler (C137 , B111) ) [*] ) & ( Class B112 ) = C140)))) by L357;
given C141 being non  negative  real number , C142 being (Equivalence_Relation of C136) such that
L362: (C142 = ( ( low_toler (C137 , C141) ) [*] ) & ( Class C142 ) = C140);

L363: ( Class C142 ) in ( PARTITIONS C136 ) by PARTIT1:def 3;
thus L364: thesis by L363 , L357 , L362;
end;
uniqueness
proof
defpred S5[ set ] means (ex B113 being non  negative  real number st (ex B114 being (Equivalence_Relation of C136) st (B114 = ( ( low_toler (C137 , B113) ) [*] ) & ( Class B114 ) = $1)));
L365: (for B115 , B116 being (Subset of ( PARTITIONS C136 )) holds (((for B117 being set holds (B117 in B115 iff S5[ B117 ])) & (for B118 being set holds (B118 in B116 iff S5[ B118 ]))) implies B115 = B116)) from LMOD_7:sch 1;
let C143 , C144 being (Subset of ( PARTITIONS C136 ));
assume L366: ((for B119 being set holds (B119 in C143 iff (ex B120 being non  negative  real number st (ex B121 being (Equivalence_Relation of C136) st (B121 = ( ( low_toler (C137 , B120) ) [*] ) & ( Class B121 ) = B119))))) & (for B122 being set holds (B122 in C144 iff (ex B123 being non  negative  real number st (ex B124 being (Equivalence_Relation of C136) st (B124 = ( ( low_toler (C137 , B123) ) [*] ) & ( Class B124 ) = B122))))));
thus L367: thesis by L366 , L365;
end;
end;
theorem
L369: (for B125 being non  empty set holds (for B126 being (PartFunc of [: B125 , B125 :] , ( REAL )) holds (for B127 being non  negative  real number holds ((( low_toler (B126 , B127) ) is_reflexive_in B125 & B126 is  symmetric) implies ( fam_class B126 ) is non  empty non  empty non  empty non  empty set))))
proof
let C145 being non  empty set;
let C146 being (PartFunc of [: C145 , C145 :] , ( REAL ));
let C147 being non  negative  real number;
assume L370: (( low_toler (C146 , C147) ) is_reflexive_in C145 & C146 is  symmetric);
reconsider D25 = ( ( low_toler (C146 , C147) ) [*] ) as (Equivalence_Relation of C145) by L370 , L254;
reconsider D26 = ( Class D25 ) as set;
L371: D26 in ( fam_class C146 ) by L356;
thus L372: thesis by L371;
end;
theorem
L373: (for B128 being  finite non  empty (Subset of ( REAL )) holds (for B129 being (Function of [: B128 , B128 :] , ( REAL )) holds (B129 is  symmetric  nonnegative implies { B128 } in ( fam_class B129 ))))
proof
let C148 being  finite non  empty (Subset of ( REAL ));
let C149 being (Function of [: C148 , C148 :] , ( REAL ));
assume that
L374: C149 is  symmetric  nonnegative;
L375: ( dom C149 ) = [: C148 , C148 :] by FUNCT_2:def 1;
reconsider D27 = ( rng C149 ) as  finite non  empty (Subset of ( REAL )) by L375 , RELAT_1:42;
reconsider D28 = ( max D27 ) as  real number;
L376:
now
set D29 = the (Element of C148);
assume L377: D28 is  negative;
L378: ( C149 . (D29 , D29) ) <= D28 by L306;
thus L379: contradiction by L378 , L374 , L377 , L242;
end;
reconsider D30 = D28 as non  negative  real number by L376;
L380:
now
let C150 being set;
assume L381: C150 in C148;
reconsider D31 = C150 as (Element of C148) by L381;
L382: ( C149 . (D31 , D31) ) <= D28 by L306;
thus L383: [ C150 , C150 ] in ( low_toler (C149 , D28) ) by L382 , L193;
end;
L384: ( low_toler (C149 , D30) ) is_reflexive_in C148 by L380 , RELAT_2:def 1;
reconsider D32 = ( ( low_toler (C149 , D30) ) [*] ) as (Equivalence_Relation of C148) by L384 , L374 , L254;
L385: ( Class D32 ) in ( fam_class C149 ) by L356;
thus L386: thesis by L385 , L317;
end;
theorem
L387: (for B130 being non  empty set holds (for B131 being (PartFunc of [: B130 , B130 :] , ( REAL )) holds ( fam_class B131 ) is (Classification of B130)))
proof
let C151 being non  empty set;
let C152 being (PartFunc of [: C151 , C151 :] , ( REAL ));
L388: (for B132 , B133 being (a_partition of C151) holds ((B132 in ( fam_class C152 ) & B133 in ( fam_class C152 )) implies (B132 is_finer_than B133 or B133 is_finer_than B132)))
proof
let C153 , C154 being (a_partition of C151);
assume that
L389: C153 in ( fam_class C152 )
and
L390: C154 in ( fam_class C152 );
consider C155 being non  negative  real number, C156 being (Equivalence_Relation of C151) such that L391: C156 = ( ( low_toler (C152 , C155) ) [*] ) and L392: ( Class C156 ) = C153 by L389 , L356;
consider C157 being non  negative  real number, C158 being (Equivalence_Relation of C151) such that L393: C158 = ( ( low_toler (C152 , C157) ) [*] ) and L394: ( Class C158 ) = C154 by L390 , L356;
L395:
now
per cases ;
suppose L396: C155 <= C157;

L397:
now
let C159 being set;
assume L398: C159 in C153;
consider C160 being set such that L399: C160 in C151 and L400: C159 = ( Class (C156 , C160) ) by L398 , L392 , EQREL_1:def 3;
consider C161 being set such that L401: C161 = ( Class (C158 , C160) );
take D33 = C161;
thus L402: D33 in C154 by L394 , L399 , L401 , EQREL_1:def 3;
thus L403: C159 c= D33 by L391 , L393 , L396 , L400 , L401 , L265;
end;
thus L404: thesis by L397 , SETFAM_1:def 2;
end;
suppose L405: C155 > C157;

L406:
now
let C162 being set;
assume L407: C162 in C154;
consider C163 being set such that L408: C163 in C151 and L409: C162 = ( Class (C158 , C163) ) by L407 , L394 , EQREL_1:def 3;
consider C164 being set such that L410: C164 = ( Class (C156 , C163) );
take D34 = C164;
thus L411: D34 in C153 by L392 , L408 , L410 , EQREL_1:def 3;
thus L412: C162 c= D34 by L391 , L393 , L405 , L409 , L410 , L265;
end;
thus L413: thesis by L406 , SETFAM_1:def 2;
end;
end;
thus L415: thesis by L395;
end;
thus L416: thesis by L388 , L146;
end;
theorem
L417: (for B134 being  finite non  empty (Subset of ( REAL )) holds (for B135 being (Function of [: B134 , B134 :] , ( REAL )) holds ((( SmallestPartition B134 ) in ( fam_class B135 ) & B135 is  symmetric  nonnegative) implies ( fam_class B135 ) is (Strong_Classification of B134))))
proof
let C165 being  finite non  empty (Subset of ( REAL ));
let C166 being (Function of [: C165 , C165 :] , ( REAL ));
assume that
L418: ( SmallestPartition C165 ) in ( fam_class C166 )
and
L419: C166 is  symmetric  nonnegative;
L420: ( fam_class C166 ) is (Classification of C165) by L387;
L421: { C165 } in ( fam_class C166 ) by L419 , L373;
thus L422: thesis by L421 , L418 , L420 , L182;
end;
begin
definition
let C167 being MetrStruct;
let C168 being  real number;
let C169 , C170 being (Element of C167);
pred C169 , C170 are_in_tolerance_wrt C168
means
:L423: ( dist (C169 , C170) ) <= C168
;end;
definition
let C171 being non  empty MetrStruct;
let C172 being  real number;
func dist_toler (C171 , C172) -> (Relation of C171) means 
:L425: (for B136 , B137 being (Element of C171) holds ([ B136 , B137 ] in it iff B136 , B137 are_in_tolerance_wrt C172));
existence
proof
defpred S6[ (Element of C171) , (Element of C171) ] means $1 , $2 are_in_tolerance_wrt C172;
consider C173 being (Relation of (the carrier of C171) , (the carrier of C171)) such that L426: (for B138 , B139 being (Element of C171) holds ([ B138 , B139 ] in C173 iff S6[ B138 , B139 ])) from RELSET_1:sch 2;
reconsider D35 = C173 as (Relation of C171);
take D35;
thus L427: thesis by L426;
end;
uniqueness
proof
let C174 , C175 being (Relation of C171);
assume that
L428: (for B140 , B141 being (Element of C171) holds ([ B140 , B141 ] in C174 iff B140 , B141 are_in_tolerance_wrt C172))
and
L429: (for B142 , B143 being (Element of C171) holds ([ B142 , B143 ] in C175 iff B142 , B143 are_in_tolerance_wrt C172));
L430: (for B144 , B145 being set holds ([ B144 , B145 ] in C175 implies [ B144 , B145 ] in C174))
proof
let C176 , C177 being set;
assume L431: [ C176 , C177 ] in C175;
reconsider D36 = C176 , D37 = C177 as (Element of C171) by L431 , ZFMISC_1:87;
L432: D36 , D37 are_in_tolerance_wrt C172 by L429 , L431;
thus L433: thesis by L432 , L428;
end;
L434: (for B146 , B147 being set holds ([ B146 , B147 ] in C174 implies [ B146 , B147 ] in C175))
proof
let C178 , C179 being set;
assume L435: [ C178 , C179 ] in C174;
reconsider D38 = C178 , D39 = C179 as (Element of C171) by L435 , ZFMISC_1:87;
L436: D38 , D39 are_in_tolerance_wrt C172 by L428 , L435;
thus L437: thesis by L436 , L429;
end;
thus L438: thesis by L434 , L430 , RELAT_1:def 2;
end;
end;
theorem
L440: (for B148 being non  empty MetrStruct holds (for B149 being  real number holds ( dist_toler (B148 , B149) ) = ( low_toler ((the distance of B148) , B149) )))
proof
let C180 being non  empty MetrStruct;
let C181 being  real number;
L441:
now
let C182 being set;
assume that
L442: C182 in ( low_toler ((the distance of C180) , C181) );
consider C183 , C184 being set such that L443: (C183 in (the carrier of C180) & C184 in (the carrier of C180)) and L444: C182 = [ C183 , C184 ] by L442 , ZFMISC_1:def 2;
reconsider D40 = C183 , D41 = C184 as (Element of C180) by L443;
L445: ( dist (D40 , D41) ) = ( (the distance of C180) . (D40 , D41) ) by METRIC_1:def 1;
L446: ( dist (D40 , D41) ) <= C181 by L445 , L442 , L444 , L193;
L447: D40 , D41 are_in_tolerance_wrt C181 by L446 , L423;
thus L448: C182 in ( dist_toler (C180 , C181) ) by L447 , L444 , L425;
end;
L449: ( low_toler ((the distance of C180) , C181) ) c= ( dist_toler (C180 , C181) ) by L441 , TARSKI:def 3;
L450:
now
let C185 being set;
assume that
L451: C185 in ( dist_toler (C180 , C181) );
consider C186 , C187 being set such that L452: (C186 in (the carrier of C180) & C187 in (the carrier of C180)) and L453: C185 = [ C186 , C187 ] by L451 , ZFMISC_1:def 2;
reconsider D42 = C186 , D43 = C187 as (Element of C180) by L452;
L454: (( (the distance of C180) . (D42 , D43) ) = ( dist (D42 , D43) ) & D42 , D43 are_in_tolerance_wrt C181) by L451 , L453 , L425 , METRIC_1:def 1;
L455: ( (the distance of C180) . (D42 , D43) ) <= C181 by L454 , L423;
thus L456: C185 in ( low_toler ((the distance of C180) , C181) ) by L455 , L453 , L193;
end;
L457: ( dist_toler (C180 , C181) ) c= ( low_toler ((the distance of C180) , C181) ) by L450 , TARSKI:def 3;
thus L458: thesis by L457 , L449 , XBOOLE_0:def 10;
end;
theorem
L459: (for B150 being non  empty  Reflexive  symmetric MetrStruct holds (for B151 being  real number holds (for B152 being (Relation of (the carrier of B150) , (the carrier of B150)) holds ((B152 = ( dist_toler (B150 , B151) ) & B151 >= ( 0 )) implies B152 is (Tolerance of (the carrier of B150))))))
proof
let C188 being non  empty  Reflexive  symmetric MetrStruct;
let C189 being  real number;
let C190 being (Relation of (the carrier of C188) , (the carrier of C188));
assume that
L460: C190 = ( dist_toler (C188 , C189) )
and
L461: C189 >= ( 0 );
L462: ((the distance of C188) is  symmetric & (the distance of C188) is  Reflexive) by METRIC_1:def 6 , METRIC_1:def 8;
L463: C190 = ( low_toler ((the distance of C188) , C189) ) by L460 , L440;
thus L464: thesis by L463 , L461 , L462 , L224;
end;
definition
let C191 being  Reflexive  symmetric non  empty MetrStruct;
func fam_class_metr C191 -> (Subset of ( PARTITIONS (the carrier of C191) )) means 
:L465: (for B153 being set holds (B153 in it iff (ex B154 being non  negative  real number st (ex B155 being (Equivalence_Relation of C191) st (B155 = ( ( dist_toler (C191 , B154) ) [*] ) & ( Class B155 ) = B153)))));
existence
proof
defpred S7[ set ] means (ex B156 being non  negative  real number st (ex B157 being (Equivalence_Relation of C191) st (B157 = ( ( dist_toler (C191 , B156) ) [*] ) & ( Class B157 ) = $1)));
consider C192 being set such that L466: (for B158 being set holds (B158 in C192 iff (B158 in ( PARTITIONS (the carrier of C191) ) & S7[ B158 ]))) from XBOOLE_0:sch 1;
L467: C192 c= ( PARTITIONS (the carrier of C191) )
proof
let C193 being set;
assume L468: C193 in C192;
thus L469: thesis by L468 , L466;
end;
reconsider D44 = C192 as (Subset of ( PARTITIONS (the carrier of C191) )) by L467;
take D44;
let C194 being set;
thus L470: (C194 in D44 implies (ex B159 being non  negative  real number st (ex B160 being (Equivalence_Relation of C191) st (B160 = ( ( dist_toler (C191 , B159) ) [*] ) & ( Class B160 ) = C194)))) by L466;
given C195 being non  negative  real number , C196 being (Equivalence_Relation of C191) such that
L471: (C196 = ( ( dist_toler (C191 , C195) ) [*] ) & ( Class C196 ) = C194);

L472: ( Class C196 ) in ( PARTITIONS (the carrier of C191) ) by PARTIT1:def 3;
thus L473: thesis by L472 , L466 , L471;
end;
uniqueness
proof
defpred S8[ set ] means (ex B161 being non  negative  real number st (ex B162 being (Equivalence_Relation of C191) st (B162 = ( ( dist_toler (C191 , B161) ) [*] ) & ( Class B162 ) = $1)));
L474: (for B163 , B164 being (Subset of ( PARTITIONS (the carrier of C191) )) holds (((for B165 being set holds (B165 in B163 iff S8[ B165 ])) & (for B166 being set holds (B166 in B164 iff S8[ B166 ]))) implies B163 = B164)) from LMOD_7:sch 1;
let C197 , C198 being (Subset of ( PARTITIONS (the carrier of C191) ));
assume L475: ((for B167 being set holds (B167 in C197 iff (ex B168 being non  negative  real number st (ex B169 being (Equivalence_Relation of C191) st (B169 = ( ( dist_toler (C191 , B168) ) [*] ) & ( Class B169 ) = B167))))) & (for B170 being set holds (B170 in C198 iff (ex B171 being non  negative  real number st (ex B172 being (Equivalence_Relation of C191) st (B172 = ( ( dist_toler (C191 , B171) ) [*] ) & ( Class B172 ) = B170))))));
thus L476: thesis by L475 , L474;
end;
end;
theorem
L478: (for B173 being  Reflexive  symmetric non  empty MetrStruct holds ( fam_class_metr B173 ) = ( fam_class (the distance of B173) ))
proof
let C199 being  Reflexive  symmetric non  empty MetrStruct;
L479:
now
let C200 being set;
assume L480: C200 in ( fam_class (the distance of C199) );
consider C201 being non  negative  real number, C202 being (Equivalence_Relation of (the carrier of C199)) such that L481: C202 = ( ( low_toler ((the distance of C199) , C201) ) [*] ) and L482: ( Class C202 ) = C200 by L480 , L356;
reconsider D45 = C202 as (Equivalence_Relation of C199);
L483: D45 = ( ( dist_toler (C199 , C201) ) [*] ) by L481 , L440;
thus L484: C200 in ( fam_class_metr C199 ) by L483 , L482 , L465;
end;
L485: ( fam_class (the distance of C199) ) c= ( fam_class_metr C199 ) by L479 , TARSKI:def 3;
L486:
now
let C203 being set;
assume L487: C203 in ( fam_class_metr C199 );
consider C204 being non  negative  real number, C205 being (Equivalence_Relation of C199) such that L488: C205 = ( ( dist_toler (C199 , C204) ) [*] ) and L489: ( Class C205 ) = C203 by L487 , L465;
L490: C205 = ( ( low_toler ((the distance of C199) , C204) ) [*] ) by L488 , L440;
thus L491: C203 in ( fam_class (the distance of C199) ) by L490 , L489 , L356;
end;
L492: ( fam_class_metr C199 ) c= ( fam_class (the distance of C199) ) by L486 , TARSKI:def 3;
thus L493: thesis by L492 , L485 , XBOOLE_0:def 10;
end;
theorem
L494: (for B174 being non  empty MetrSpace holds (for B175 being (Equivalence_Relation of B174) holds (B175 = ( ( dist_toler (B174 , ( 0 )) ) [*] ) implies ( Class B175 ) = ( SmallestPartition (the carrier of B174) ))))
proof
let C206 being non  empty MetrSpace;
L495:
now
let C207 , C208 being (Element of C206);
L496: ( dist (C207 , C208) ) >= ( 0 ) by METRIC_1:5;
thus L497: ( (the distance of C206) . (C207 , C208) ) >= ( 0 ) by L496 , METRIC_1:def 1;
end;
L498: (the distance of C206) is  nonnegative by L495 , L242;
let C209 being (Equivalence_Relation of C206);
assume L499: C209 = ( ( dist_toler (C206 , ( 0 )) ) [*] );
L500: ((the distance of C206) is  Reflexive  discerning & ( ( low_toler ((the distance of C206) , ( 0 )) ) [*] ) = C209) by L499 , L440 , METRIC_1:def 6 , METRIC_1:def 7;
thus L501: thesis by L500 , L498 , L293;
end;
theorem
L502: (for R4 being  real number holds (for B176 being  Reflexive  symmetric  bounded non  empty MetrStruct holds (R4 >= ( diameter ( [#] B176 ) ) implies ( dist_toler (B176 , R4) ) = ( nabla (the carrier of B176) ))))
proof
let R4 being  real number;
let C210 being  Reflexive  symmetric  bounded non  empty MetrStruct;
assume that
L503: R4 >= ( diameter ( [#] C210 ) );
L504:
now
let C211 being set;
assume L505: C211 in ( nabla (the carrier of C210) );
consider C212 , C213 being set such that L506: (C212 in (the carrier of C210) & C213 in (the carrier of C210)) and L507: C211 = [ C212 , C213 ] by L505 , ZFMISC_1:def 2;
reconsider D46 = C212 , D47 = C213 as (Element of C210) by L506;
L508: ( dist (D46 , D47) ) <= ( diameter ( [#] C210 ) ) by TBSP_1:def 8;
L509: ( dist (D46 , D47) ) <= R4 by L508 , L503 , XXREAL_0:2;
L510: D46 , D47 are_in_tolerance_wrt R4 by L509 , L423;
thus L511: C211 in ( dist_toler (C210 , R4) ) by L510 , L507 , L425;
end;
L512: ( nabla (the carrier of C210) ) c= ( dist_toler (C210 , R4) ) by L504 , TARSKI:def 3;
thus L513: thesis by L512 , XBOOLE_0:def 10;
end;
theorem
L514: (for R4 being  real number holds (for B177 being  Reflexive  symmetric  bounded non  empty MetrStruct holds (R4 >= ( diameter ( [#] B177 ) ) implies ( dist_toler (B177 , R4) ) = ( ( dist_toler (B177 , R4) ) [*] ))))
proof
let R4 being  real number;
let C214 being  Reflexive  symmetric  bounded non  empty MetrStruct;
assume that
L515: R4 >= ( diameter ( [#] C214 ) );
L516: ( ( dist_toler (C214 , R4) ) [*] ) c= ( nabla (the carrier of C214) );
L517: (( dist_toler (C214 , R4) ) c= ( ( dist_toler (C214 , R4) ) [*] ) & ( ( dist_toler (C214 , R4) ) [*] ) c= ( dist_toler (C214 , R4) )) by L516 , L515 , L502 , LANG1:18;
thus L518: thesis by L517 , XBOOLE_0:def 10;
end;
theorem
L519: (for R4 being  real number holds (for B178 being  Reflexive  symmetric  bounded non  empty MetrStruct holds (R4 >= ( diameter ( [#] B178 ) ) implies ( ( dist_toler (B178 , R4) ) [*] ) = ( nabla (the carrier of B178) ))))
proof
let R4 being  real number;
let C215 being  Reflexive  symmetric  bounded non  empty MetrStruct;
assume that
L520: R4 >= ( diameter ( [#] C215 ) );
L521: ( dist_toler (C215 , R4) ) = ( ( dist_toler (C215 , R4) ) [*] ) by L520 , L514;
thus L522: thesis by L521 , L520 , L502;
end;
theorem
L523: (for B179 being  Reflexive  symmetric  bounded non  empty MetrStruct holds (for B180 being (Equivalence_Relation of B179) holds (for B181 being non  negative  real number holds ((B181 >= ( diameter ( [#] B179 ) ) & B180 = ( ( dist_toler (B179 , B181) ) [*] )) implies ( Class B180 ) = { (the carrier of B179) }))))
proof
let C216 being  Reflexive  symmetric  bounded non  empty MetrStruct;
let C217 being (Equivalence_Relation of C216);
let C218 being non  negative  real number;
assume that
L524: (C218 >= ( diameter ( [#] C216 ) ) & C217 = ( ( dist_toler (C216 , C218) ) [*] ));
L525: ( Class ( nabla (the carrier of C216) ) ) = { (the carrier of C216) } by MSUALG_9:4;
thus L526: thesis by L525 , L524 , L519;
end;
registration
let C219 being  Reflexive  symmetric  triangle non  empty MetrStruct;
let C220 being non  empty  bounded (Subset of C219);
cluster ( diameter C220 ) -> non  negative;
coherence by TBSP_1:21;
end;
theorem
L528: (for B182 being  bounded non  empty MetrSpace holds { (the carrier of B182) } in ( fam_class_metr B182 ))
proof
let C221 being  bounded non  empty MetrSpace;
set D48 = ( diameter ( [#] C221 ) );
L529: (the distance of C221) is  symmetric by METRIC_1:def 8;
L530: ( low_toler ((the distance of C221) , D48) ) is_symmetric_in (the carrier of C221) by L529 , L215;
L531: ( dist_toler (C221 , D48) ) is_symmetric_in (the carrier of C221) by L530 , L440;
L532: (the distance of C221) is  Reflexive by METRIC_1:def 6;
L533: ( low_toler ((the distance of C221) , D48) ) is_reflexive_in (the carrier of C221) by L532 , L208;
L534: ( dist_toler (C221 , D48) ) is_reflexive_in (the carrier of C221) by L533 , L440;
reconsider D49 = ( ( dist_toler (C221 , D48) ) [*] ) as (Equivalence_Relation of C221) by L534 , L531 , L116;
L535: ( Class D49 ) = { (the carrier of C221) } by L523;
thus L536: thesis by L535 , L465;
end;
theorem
L537: (for B183 being  Reflexive  symmetric non  empty MetrStruct holds ( fam_class_metr B183 ) is (Classification of (the carrier of B183)))
proof
let C222 being  Reflexive  symmetric non  empty MetrStruct;
L538: ( fam_class_metr C222 ) = ( fam_class (the distance of C222) ) by L478;
thus L539: thesis by L538 , L387;
end;
theorem
L540: (for B184 being  bounded non  empty MetrSpace holds ( fam_class_metr B184 ) is (Strong_Classification of (the carrier of B184)))
proof
reconsider D50 = ( 0 ) as non  negative  real number;
let C223 being  bounded non  empty MetrSpace;
L541: (the distance of C223) is  symmetric by METRIC_1:def 8;
L542: ( low_toler ((the distance of C223) , D50) ) is_symmetric_in (the carrier of C223) by L541 , L215;
L543: ( dist_toler (C223 , D50) ) is_symmetric_in (the carrier of C223) by L542 , L440;
L544: (the distance of C223) is  Reflexive by METRIC_1:def 6;
L545: ( low_toler ((the distance of C223) , D50) ) is_reflexive_in (the carrier of C223) by L544 , L208;
L546: ( dist_toler (C223 , D50) ) is_reflexive_in (the carrier of C223) by L545 , L440;
reconsider D51 = ( ( dist_toler (C223 , D50) ) [*] ) as (Equivalence_Relation of C223) by L546 , L543 , L116;
L547: ( Class D51 ) in ( fam_class_metr C223 ) by L465;
L548: ( SmallestPartition (the carrier of C223) ) in ( fam_class_metr C223 ) by L547 , L494;
L549: (( fam_class_metr C223 ) is (Classification of (the carrier of C223)) & { (the carrier of C223) } in ( fam_class_metr C223 )) by L528 , L537;
thus L550: thesis by L549 , L548 , L182;
end;
