:: Terms over many sorted universal algebra
::  by Grzegorz Bancerek
::
:: Received November 25, 1994
:: Copyright (c) 1994-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FINSEQ_1, RELAT_1, SUBSET_1, NUMBERS, ARYTM_3, XXREAL_0, NAT_1,
      CARD_1, FUNCT_1, TARSKI, STRUCT_0, XBOOLE_0, MSUALG_1, PBOOLE, TREES_3,
      MSAFREE, DTCONSTR, LANG1, ZFMISC_1, TREES_4, TDGROUP, CARD_3, TREES_2,
      FINSET_1, MARGREL1, PARTFUN1, TREES_9, ORDINAL4, ORDINAL1, TREES_1,
      MCART_1, FUNCT_6, TREES_A, QC_LANG1, MSATERM;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, NUMBERS, ORDINAL1, NAT_1,
      XTUPLE_0, MCART_1, RELAT_1, STRUCT_0, FUNCT_1, PARTFUN1, FINSEQ_1,
      FINSEQ_2, FUNCT_2, FINSET_1, TREES_1, TREES_2, CARD_3, FUNCT_6, LANG1,
      TREES_3, TREES_4, TREES_9, PBOOLE, MSUALG_1, DTCONSTR, MSUALG_3, MSAFREE,
      XXREAL_0;
 constructors NAT_1, NAT_D, TREES_9, MSUALG_3, MSAFREE, RELSET_1, XTUPLE_0;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, ORDINAL1, XREAL_0, FINSEQ_1, PBOOLE,
      TREES_2, TREES_3, TREES_9, STRUCT_0, DTCONSTR, MSUALG_1, MSUALG_2,
      MSAFREE, FINSET_1, TREES_1, RELSET_1, XTUPLE_0;
 requirements NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, PBOOLE, XBOOLE_0, XTUPLE_0;
 theorems TARSKI, NAT_1, ZFMISC_1, MCART_1, CARD_3, FUNCT_1, FINSEQ_1, FUNCT_2,
      FINSEQ_3, FINSEQ_4, CARD_5, FUNCT_6, TREES_1, TREES_2, TREES_3, TREES_4,
      LANG1, DTCONSTR, TREES_9, PBOOLE, MSUALG_1, MSAFREE, DOMAIN_1, RELAT_1,
      XBOOLE_0, FINSET_1, XREAL_1, ORDINAL1, PARTFUN1, FINSEQ_2, XTUPLE_0;
 schemes TREES_2, CLASSES1, DTCONSTR, PBOOLE;

begin
L1: (for B1 being set holds (for B2 being FinSequence holds (B1 in ( dom B2 ) implies (ex B3 being (Element of ( NAT )) st (B1 = ( B3 + 1 ) & B3 < ( len B2 ))))))
proof
let C1 being set;
let C2 being FinSequence;
assume L2: C1 in ( dom C2 );
reconsider D1 = C1 as (Element of ( NAT )) by L2;
L3: D1 >= 1 by L2 , FINSEQ_3:25;
consider C3 being Nat such that L4: D1 = ( 1 + C3 ) by L3 , NAT_1:10;
reconsider D2 = C3 as (Element of ( NAT )) by ORDINAL1:def 12;
take D2;
L5: D1 <= ( len C2 ) by L2 , FINSEQ_3:25;
thus L6: thesis by L5 , L4 , NAT_1:13;
end;
L7:
now
let C4 being (Element of ( NAT ));
let C5 being set;
let C6 being (FinSequence of C5);
L8: C4 >= ( 0 ) by NAT_1:2;
L9: ( C4 + 1 ) >= ( ( 0 ) + 1 ) by L8 , XREAL_1:7;
assume L10: C4 < ( len C6 );
L11: ( C4 + 1 ) <= ( len C6 ) by L10 , NAT_1:13;
L12: ( C4 + 1 ) in ( dom C6 ) by L11 , L9 , FINSEQ_3:25;
L13: ( C6 . ( C4 + 1 ) ) in ( rng C6 ) by L12 , FUNCT_1:def 3;
L14: ( rng C6 ) c= C5 by FINSEQ_1:def 4;
thus L15: ( C6 . ( C4 + 1 ) ) in C5 by L14 , L13;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C7 being (ManySortedSet of (the carrier of R1));
func R1 -Terms C7 -> (Subset of ( FinTrees (the carrier of ( DTConMSA C7 )) )) equals 
:L16: ( TS ( DTConMSA C7 ) );
correctness;
end;
registration
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
cluster ( R1 -Terms R2 ) -> non  empty;
correctness;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
mode Term of R1 , R2
 is (Element of ( R1 -Terms R2 ));
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C8 being (OperSymbol of R1);
redefine func Sym (C8 , R2) -> (NonTerminal of ( DTConMSA R2 ));

coherence
proof
L20: (the carrier of R1) in { (the carrier of R1) } by TARSKI:def 1;
L21: ( NonTerminals ( DTConMSA R2 ) ) = [: (the carrier' of R1) , { (the carrier of R1) } :] by MSAFREE:6;
L22: ( Sym (C8 , R2) ) = [ C8 , (the carrier of R1) ] by MSAFREE:def 9;
thus L23: thesis by L22 , L21 , L20 , ZFMISC_1:87;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C9 being (NonTerminal of ( DTConMSA R2 ));
mode ArgumentSeq of C9
 -> (FinSequence of ( R1 -Terms R2 ))
means :L25: it is (SubtreeSeq of C9);
existence
proof
set D3 = the (SubtreeSeq of C9);
L26: D3 is (FinSequence of ( R1 -Terms R2 ));
thus L27: thesis by L26;
end;
end;
theorem
L29: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B4 being (OperSymbol of R1) holds (for B5 being FinSequence holds ((( [ B4 , (the carrier of R1) ] -tree B5 ) in ( R1 -Terms R2 ) & B5 is  DTree-yielding) iff B5 is (ArgumentSeq of ( Sym (B4 , R2) )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C10 being (OperSymbol of R1);
let C11 being FinSequence;
L30: [ C10 , (the carrier of R1) ] = ( Sym (C10 , R2) ) by MSAFREE:def 9;
L31: ( R1 -Terms R2 ) = ( TS ( DTConMSA R2 ) );
thus L32:now
assume L33: ( [ C10 , (the carrier of R1) ] -tree C11 ) in ( R1 -Terms R2 );
reconsider D4 = ( [ C10 , (the carrier of R1) ] -tree C11 ) as (Element of ( TS ( DTConMSA R2 ) )) by L33;
assume L34: C11 is  DTree-yielding;
L35: ( D4 . ( {} ) ) = [ C10 , (the carrier of R1) ] by L34 , TREES_4:def 4;
consider C12 being (FinSequence of ( TS ( DTConMSA R2 ) )) such that L36: D4 = ( ( Sym (C10 , R2) ) -tree C12 ) and L37: ( Sym (C10 , R2) ) ==> ( roots C12 ) by L35 , L30 , DTCONSTR:10;
L38: C11 = C12 by L34 , L36 , TREES_4:15;
L39: C11 is (SubtreeSeq of ( Sym (C10 , R2) )) by L38 , L37 , DTCONSTR:def 6;
thus L40: C11 is (ArgumentSeq of ( Sym (C10 , R2) )) by L39 , L31 , L25;
end;
assume L41: C11 is (ArgumentSeq of ( Sym (C10 , R2) ));
reconsider D5 = C11 as (ArgumentSeq of ( Sym (C10 , R2) )) by L41;
reconsider D6 = D5 as (FinSequence of ( TS ( DTConMSA R2 ) )) by L16;
L42: D6 is (SubtreeSeq of ( Sym (C10 , R2) )) by L25;
L43: ( Sym (C10 , R2) ) ==> ( roots D6 ) by L42 , DTCONSTR:def 6;
thus L44: thesis by L43 , L30 , DTCONSTR:def 1;
end;
L45:
now
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C13 being set;
set D7 = R2;
set D8 = ( DTConMSA D7 );
L46: ( Terminals D8 ) = ( Union ( coprod D7 ) ) by MSAFREE:6;
thus L47:now
assume L48: C13 in ( Terminals D8 );
consider C14 being set such that L49: C14 in ( dom ( coprod D7 ) ) and L50: C13 in ( ( coprod D7 ) . C14 ) by L48 , L46 , CARD_5:2;
reconsider D9 = C14 as (SortSymbol of R1) by L49 , PARTFUN1:def 2;
L51: ( ( coprod D7 ) . D9 ) = ( coprod (D9 , D7) ) by MSAFREE:def 3;
L52: (ex B6 being set st (B6 in ( D7 . D9 ) & C13 = [ B6 , D9 ])) by L51 , L50 , MSAFREE:def 2;
thus L53: (ex B7 being (SortSymbol of R1) st (ex B8 being (Element of ( R2 . B7 )) st C13 = [ B8 , B7 ])) by L52;
end;
let C15 being (SortSymbol of R1);
let C16 being (Element of ( R2 . C15 ));
assume L54: C13 = [ C16 , C15 ];
L55: C13 in ( coprod (C15 , D7) ) by L54 , MSAFREE:def 2;
L56: C13 in ( ( coprod D7 ) . C15 ) by L55 , MSAFREE:def 3;
L57: ( dom ( coprod D7 ) ) = (the carrier of R1) by PARTFUN1:def 2;
thus L58: C13 in ( Terminals D8 ) by L57 , L46 , L56 , CARD_5:2;
end;
L59:
now
let R1 being non  void non  empty ManySortedSign;
let R3 being MSAlgebra over R1;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C17 being set;
set D10 = ( (the Sorts of R3) \/ R2 );
set D11 = ( DTConMSA D10 );
L60: ( dom ( coprod D10 ) ) = (the carrier of R1) by PARTFUN1:def 2;
L61: ( Terminals D11 ) = ( Union ( coprod D10 ) ) by MSAFREE:6;
thus L62:now
assume L63: C17 in ( Terminals D11 );
consider C18 being set such that L64: C18 in ( dom ( coprod D10 ) ) and L65: C17 in ( ( coprod D10 ) . C18 ) by L63 , L61 , CARD_5:2;
reconsider D12 = C18 as (SortSymbol of R1) by L64 , PARTFUN1:def 2;
L66: ( ( coprod D10 ) . D12 ) = ( coprod (D12 , D10) ) by MSAFREE:def 3;
consider C19 being set such that L67: C19 in ( D10 . D12 ) and L68: C17 = [ C19 , D12 ] by L66 , L65 , MSAFREE:def 2;
L69: ( D10 . D12 ) = ( ( (the Sorts of R3) . D12 ) \/ ( R2 . D12 ) ) by PBOOLE:def 4;
L70: (C19 in ( (the Sorts of R3) . D12 ) or C19 in ( R2 . D12 )) by L69 , L67 , XBOOLE_0:def 3;
thus L71: ((ex B9 being (SortSymbol of R1) st (ex B10 being set st (B10 in ( (the Sorts of R3) . B9 ) & C17 = [ B10 , B9 ]))) or (ex B11 being (SortSymbol of R1) st (ex B12 being (Element of ( R2 . B11 )) st C17 = [ B12 , B11 ]))) by L70 , L68;
end;
let C20 being (SortSymbol of R1);
L72: ( D10 . C20 ) = ( ( (the Sorts of R3) . C20 ) \/ ( R2 . C20 ) ) by PBOOLE:def 4;
thus L73:now
let C21 being set;
assume L74: C21 in ( (the Sorts of R3) . C20 );
L75: C21 in ( D10 . C20 ) by L74 , L72 , XBOOLE_0:def 3;
assume L76: C17 = [ C21 , C20 ];
L77: C17 in ( coprod (C20 , D10) ) by L76 , L75 , MSAFREE:def 2;
L78: C17 in ( ( coprod D10 ) . C20 ) by L77 , MSAFREE:def 3;
thus L79: C17 in ( Terminals D11 ) by L78 , L61 , L60 , CARD_5:2;
end;
let C22 being (Element of ( R2 . C20 ));
assume L80: C17 = [ C22 , C20 ];
L81: C22 in ( D10 . C20 ) by L72 , XBOOLE_0:def 3;
L82: C17 in ( coprod (C20 , D10) ) by L81 , L80 , MSAFREE:def 2;
L83: C17 in ( ( coprod D10 ) . C20 ) by L82 , MSAFREE:def 3;
thus L84: C17 in ( Terminals D11 ) by L83 , L61 , L60 , CARD_5:2;
end;
L85:
now
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
set D13 = ( DTConMSA R2 );
let C23 being set;
L86: ( NonTerminals D13 ) = [: (the carrier' of R1) , { (the carrier of R1) } :] by MSAFREE:6;
thus L87: (C23 is (NonTerminal of D13) iff C23 in [: (the carrier' of R1) , { (the carrier of R1) } :]) by L86;
end;
scheme TermInd { F1() -> non  void non  empty ManySortedSign , F2() ->  non-empty (ManySortedSet of (the carrier of F1())) , P1[set] } : (for B13 being (Term of F1() , F2()) holds P1[ B13 ])
provided
L88: (for B14 being (SortSymbol of F1()) holds (for B15 being (Element of ( F2() . B14 )) holds P1[ ( root-tree [ B15 , B14 ] ) ]))
and
L89: (for B16 being (OperSymbol of F1()) holds (for B17 being (ArgumentSeq of ( Sym (B16 , F2()) )) holds ((for B18 being (Term of F1() , F2()) holds (B18 in ( rng B17 ) implies P1[ B18 ])) implies P1[ ( [ B16 , (the carrier of F1()) ] -tree B17 ) ])))
proof
set D14 = F2();
set D15 = ( DTConMSA D14 );
L90: (for B19 being (Symbol of D15) holds (for B20 being (FinSequence of ( TS D15 )) holds ((B19 ==> ( roots B20 ) & (for B21 being (DecoratedTree of (the carrier of D15)) holds (B21 in ( rng B20 ) implies P1[ B21 ]))) implies P1[ ( B19 -tree B20 ) ])))
proof
let C24 being (Symbol of D15);
let C25 being (FinSequence of ( TS D15 ));
assume that
L91: C24 ==> ( roots C25 )
and
L92: (for B22 being (DecoratedTree of (the carrier of D15)) holds (B22 in ( rng C25 ) implies P1[ B22 ]));
L93: C24 in { B23 where B23 is (Symbol of D15) : (ex B24 being FinSequence st B23 ==> B24) } by L91;
reconsider D16 = C24 as (NonTerminal of D15) by L93 , LANG1:def 3;
reconsider D17 = C25 as (FinSequence of ( F1() -Terms D14 ));
L94: D16 in [: (the carrier' of F1()) , { (the carrier of F1()) } :] by L85;
consider C26 being (OperSymbol of F1()), C27 being (Element of { (the carrier of F1()) }) such that L95: D16 = [ C26 , C27 ] by L94 , DOMAIN_1:1;
L96: C27 = (the carrier of F1()) by TARSKI:def 1;
L97: [ C26 , (the carrier of F1()) ] = ( Sym (C26 , D14) ) by MSAFREE:def 9;
L98: C25 is (SubtreeSeq of ( Sym (C26 , D14) )) by L97 , L91 , L95 , L96 , DTCONSTR:def 6;
reconsider D18 = D17 as (ArgumentSeq of ( Sym (C26 , F2()) )) by L98 , L25;
L99: (for B25 being (Term of F1() , F2()) holds (B25 in ( rng D18 ) implies P1[ B25 ])) by L92;
thus L100: thesis by L99 , L89 , L95 , L96;
end;
L101: (for B26 being (Symbol of D15) holds (B26 in ( Terminals D15 ) implies P1[ ( root-tree B26 ) ]))
proof
let C28 being (Symbol of D15);
assume L102: C28 in ( Terminals D15 );
L103: (ex B27 being (SortSymbol of F1()) st (ex B28 being (Element of ( F2() . B27 )) st C28 = [ B28 , B27 ])) by L102 , L45;
thus L104: thesis by L103 , L88;
end;
L105: (for B29 being (DecoratedTree of (the carrier of D15)) holds (B29 in ( TS D15 ) implies P1[ B29 ])) from DTCONSTR:sch 7(L101 , L90);
thus L106: thesis by L105;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R3 being MSAlgebra over R1;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
mode c-Term of R3 , R2
 is (Term of R1 , ( (the Sorts of R3) \/ R2 ));
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R3 being MSAlgebra over R1;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C29 being (OperSymbol of R1);
mode ArgumentSeq of C29 , R3 , R2
 is (ArgumentSeq of ( Sym (C29 , ( (the Sorts of R3) \/ R2 )) ));
end;
scheme CTermInd { F3() -> non  void non  empty ManySortedSign , F4() ->  non-empty MSAlgebra over F3() , F5() ->  non-empty (ManySortedSet of (the carrier of F3())) , P2[set] } : (for B30 being (c-Term of F4() , F5()) holds P2[ B30 ])
provided
L109: (for B31 being (SortSymbol of F3()) holds (for B32 being (Element of ( (the Sorts of F4()) . B31 )) holds P2[ ( root-tree [ B32 , B31 ] ) ]))
and
L110: (for B33 being (SortSymbol of F3()) holds (for B34 being (Element of ( F5() . B33 )) holds P2[ ( root-tree [ B34 , B33 ] ) ]))
and
L111: (for B35 being (OperSymbol of F3()) holds (for B36 being (ArgumentSeq of B35 , F4() , F5()) holds ((for B37 being (c-Term of F4() , F5()) holds (B37 in ( rng B36 ) implies P2[ B37 ])) implies P2[ ( ( Sym (B35 , ( (the Sorts of F4()) \/ F5() )) ) -tree B36 ) ])))
proof
set D19 = ( (the Sorts of F4()) \/ F5() );
set D20 = ( DTConMSA D19 );
L112: (for B38 being (Symbol of D20) holds (for B39 being (FinSequence of ( TS D20 )) holds ((B38 ==> ( roots B39 ) & (for B40 being (DecoratedTree of (the carrier of D20)) holds (B40 in ( rng B39 ) implies P2[ B40 ]))) implies P2[ ( B38 -tree B39 ) ])))
proof
let C30 being (Symbol of D20);
let C31 being (FinSequence of ( TS D20 ));
assume that
L113: C30 ==> ( roots C31 )
and
L114: (for B41 being (DecoratedTree of (the carrier of D20)) holds (B41 in ( rng C31 ) implies P2[ B41 ]));
L115: C30 in { B42 where B42 is (Symbol of D20) : (ex B43 being FinSequence st B42 ==> B43) } by L113;
reconsider D21 = C30 as (NonTerminal of D20) by L115 , LANG1:def 3;
reconsider D22 = C31 as (FinSequence of ( F3() -Terms D19 ));
L116: D21 in [: (the carrier' of F3()) , { (the carrier of F3()) } :] by L85;
consider C32 being (OperSymbol of F3()), C33 being (Element of { (the carrier of F3()) }) such that L117: D21 = [ C32 , C33 ] by L116 , DOMAIN_1:1;
L118: [ C32 , (the carrier of F3()) ] = ( Sym (C32 , D19) ) by MSAFREE:def 9;
L119: C33 = (the carrier of F3()) by TARSKI:def 1;
L120: C31 is (SubtreeSeq of ( Sym (C32 , D19) )) by L119 , L113 , L117 , L118 , DTCONSTR:def 6;
reconsider D23 = D22 as (ArgumentSeq of ( Sym (C32 , ( (the Sorts of F4()) \/ F5() )) )) by L120 , L25;
L121: (for B44 being (c-Term of F4() , F5()) holds (B44 in ( rng D23 ) implies P2[ B44 ])) by L114;
thus L122: thesis by L121 , L111 , L117 , L119 , L118;
end;
L123: (for B45 being (Symbol of D20) holds (B45 in ( Terminals D20 ) implies P2[ ( root-tree B45 ) ]))
proof
let C34 being (Symbol of D20);
assume L124: C34 in ( Terminals D20 );
L125: ((ex B46 being (SortSymbol of F3()) st (ex B47 being set st (B47 in ( (the Sorts of F4()) . B46 ) & C34 = [ B47 , B46 ]))) or (ex B48 being (SortSymbol of F3()) st (ex B49 being (Element of ( F5() . B48 )) st C34 = [ B49 , B48 ]))) by L124 , L59;
thus L126: thesis by L125 , L109 , L110;
end;
L127: (for B50 being (DecoratedTree of (the carrier of D20)) holds (B50 in ( TS D20 ) implies P2[ B50 ])) from DTCONSTR:sch 7(L123 , L112);
thus L128: thesis by L127;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
let C35 being (Node of R4);
redefine func R4 . C35 -> (Symbol of ( DTConMSA R2 ));

coherence
proof
reconsider D24 = R4 as (Element of ( TS ( DTConMSA R2 ) ));
reconsider D25 = D24 as (DecoratedTree of (the carrier of ( DTConMSA R2 )));
reconsider D26 = C35 as (Node of D25);
L129: ( D25 . D26 ) = ( D25 . D26 );
thus L130: thesis by L129;
end;
end;
registration
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
cluster  ->  finite for (Term of R1 , R2);
coherence;
end;
L133:
now
let C36 being  with_terminals  with_nonterminals non  empty DTConstrStr;
let C37 being (Symbol of C36);
L134: (the carrier of C36) = ( ( Terminals C36 ) \/ ( NonTerminals C36 ) ) by LANG1:1;
thus L135: (C37 is (Terminal of C36) or C37 is (NonTerminal of C36)) by L134 , XBOOLE_0:def 3;
L136: ( Terminals C36 ) misses ( NonTerminals C36 ) by DTCONSTR:8;
thus L137: (not (C37 is (Terminal of C36) & C37 is (NonTerminal of C36))) by L136 , XBOOLE_0:3;
end;
theorem
L138: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds ((ex B51 being (SortSymbol of R1) st (ex B52 being (Element of ( R2 . B51 )) st ( R4 . ( {} ) ) = [ B52 , B51 ])) or ( R4 . ( {} ) ) in [: (the carrier' of R1) , { (the carrier of R1) } :]))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
set D27 = ( DTConMSA R2 );
L139: (the carrier of D27) = ( ( Terminals D27 ) \/ ( NonTerminals D27 ) ) by LANG1:1;
reconsider D28 = ( {} ) as (Node of R4) by TREES_1:22;
L140: ( NonTerminals D27 ) = [: (the carrier' of R1) , { (the carrier of R1) } :] by MSAFREE:6;
L141: (( R4 . D28 ) in ( Terminals D27 ) or ( R4 . D28 ) in [: (the carrier' of R1) , { (the carrier of R1) } :]) by L140 , L139 , XBOOLE_0:def 3;
thus L142: thesis by L141 , L45;
end;
theorem
L143: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B53 being (c-Term of R3 , R2) holds ((ex B54 being (SortSymbol of R1) st (ex B55 being set st (B55 in ( (the Sorts of R3) . B54 ) & ( B53 . ( {} ) ) = [ B55 , B54 ]))) or (ex B56 being (SortSymbol of R1) st (ex B57 being (Element of ( R2 . B56 )) st ( B53 . ( {} ) ) = [ B57 , B56 ])) or ( B53 . ( {} ) ) in [: (the carrier' of R1) , { (the carrier of R1) } :])))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C38 being (c-Term of R3 , R2);
set D29 = ( DTConMSA ( (the Sorts of R3) \/ R2 ) );
L144: (the carrier of D29) = ( ( Terminals D29 ) \/ ( NonTerminals D29 ) ) by LANG1:1;
reconsider D30 = ( {} ) as (Node of C38) by TREES_1:22;
L145: ( NonTerminals D29 ) = [: (the carrier' of R1) , { (the carrier of R1) } :] by MSAFREE:6;
L146: (( C38 . D30 ) in ( Terminals D29 ) or ( C38 . D30 ) in [: (the carrier' of R1) , { (the carrier of R1) } :]) by L145 , L144 , XBOOLE_0:def 3;
thus L147: thesis by L146 , L59;
end;
theorem
L148: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B58 being (SortSymbol of R1) holds (for B59 being (Element of ( R2 . B58 )) holds ( root-tree [ B59 , B58 ] ) is (Term of R1 , R2)))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C39 being (SortSymbol of R1);
let C40 being (Element of ( R2 . C39 ));
reconsider D31 = [ C40 , C39 ] as (Terminal of ( DTConMSA R2 )) by MSAFREE:7;
L149: ( root-tree D31 ) in ( TS ( DTConMSA R2 ) );
thus L150: thesis by L149;
end;
theorem
L151: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds (for B60 being (SortSymbol of R1) holds (for B61 being (Element of ( R2 . B60 )) holds (( R4 . ( {} ) ) = [ B61 , B60 ] implies R4 = ( root-tree [ B61 , B60 ] )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
let C41 being (SortSymbol of R1);
let C42 being (Element of ( R2 . C41 ));
set D32 = ( DTConMSA R2 );
reconsider D33 = [ C42 , C41 ] as (Terminal of D32) by L45;
reconsider D34 = R4 as (Element of ( TS D32 ));
L152: (( D34 . ( {} ) ) = D33 implies D34 = ( root-tree D33 )) by DTCONSTR:9;
thus L153: thesis by L152;
end;
theorem
L154: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B62 being (SortSymbol of R1) holds (for B63 being set holds (B63 in ( (the Sorts of R3) . B62 ) implies ( root-tree [ B63 , B62 ] ) is (c-Term of R3 , R2)))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C43 being (SortSymbol of R1);
let C44 being set;
L155: ( ( (the Sorts of R3) \/ R2 ) . C43 ) = ( ( (the Sorts of R3) . C43 ) \/ ( R2 . C43 ) ) by PBOOLE:def 4;
assume L156: C44 in ( (the Sorts of R3) . C43 );
L157: C44 in ( ( (the Sorts of R3) \/ R2 ) . C43 ) by L156 , L155 , XBOOLE_0:def 3;
reconsider D35 = [ C44 , C43 ] as (Terminal of ( DTConMSA ( (the Sorts of R3) \/ R2 ) )) by L157 , MSAFREE:7;
L158: ( root-tree D35 ) in ( TS ( DTConMSA ( (the Sorts of R3) \/ R2 ) ) );
thus L159: thesis by L158;
end;
theorem
L160: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B64 being (c-Term of R3 , R2) holds (for B65 being (SortSymbol of R1) holds (for B66 being set holds ((B66 in ( (the Sorts of R3) . B65 ) & ( B64 . ( {} ) ) = [ B66 , B65 ]) implies B64 = ( root-tree [ B66 , B65 ] ))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C45 being (c-Term of R3 , R2);
let C46 being (SortSymbol of R1);
let C47 being set;
set D36 = ( DTConMSA ( (the Sorts of R3) \/ R2 ) );
reconsider D37 = C45 as (Element of ( TS D36 ));
assume L161: C47 in ( (the Sorts of R3) . C46 );
reconsider D38 = [ C47 , C46 ] as (Terminal of D36) by L161 , L59;
L162: (( D37 . ( {} ) ) = D38 implies D37 = ( root-tree D38 )) by DTCONSTR:9;
thus L163: thesis by L162;
end;
theorem
L164: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B67 being (SortSymbol of R1) holds (for B68 being (Element of ( R2 . B67 )) holds ( root-tree [ B68 , B67 ] ) is (c-Term of R3 , R2))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C48 being (SortSymbol of R1);
let C49 being (Element of ( R2 . C48 ));
L165: ( ( (the Sorts of R3) \/ R2 ) . C48 ) = ( ( (the Sorts of R3) . C48 ) \/ ( R2 . C48 ) ) by PBOOLE:def 4;
L166: C49 in ( ( (the Sorts of R3) \/ R2 ) . C48 ) by L165 , XBOOLE_0:def 3;
reconsider D39 = [ C49 , C48 ] as (Terminal of ( DTConMSA ( (the Sorts of R3) \/ R2 ) )) by L166 , MSAFREE:7;
L167: ( root-tree D39 ) in ( TS ( DTConMSA ( (the Sorts of R3) \/ R2 ) ) );
thus L168: thesis by L167;
end;
theorem
L169: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B69 being (c-Term of R3 , R2) holds (for B70 being (SortSymbol of R1) holds (for B71 being (Element of ( R2 . B70 )) holds (( B69 . ( {} ) ) = [ B71 , B70 ] implies B69 = ( root-tree [ B71 , B70 ] ))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C50 being (c-Term of R3 , R2);
let C51 being (SortSymbol of R1);
let C52 being (Element of ( R2 . C51 ));
set D40 = ( DTConMSA ( (the Sorts of R3) \/ R2 ) );
reconsider D41 = [ C52 , C51 ] as (Terminal of D40) by L59;
reconsider D42 = C50 as (Element of ( TS D40 ));
L170: (( D42 . ( {} ) ) = D41 implies D42 = ( root-tree D41 )) by DTCONSTR:9;
thus L171: thesis by L170;
end;
theorem
L172: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds (for B72 being (OperSymbol of R1) holds (( R4 . ( {} ) ) = [ B72 , (the carrier of R1) ] implies (ex B73 being (ArgumentSeq of ( Sym (B72 , R2) )) st R4 = ( [ B72 , (the carrier of R1) ] -tree B73 )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
let C53 being (OperSymbol of R1);
assume that
L173: ( R4 . ( {} ) ) = [ C53 , (the carrier of R1) ];
set D43 = R2;
set D44 = ( DTConMSA D43 );
reconsider D45 = R4 as (Element of ( TS D44 ));
L174: [ C53 , (the carrier of R1) ] = ( Sym (C53 , D43) ) by MSAFREE:def 9;
consider C54 being (FinSequence of ( TS D44 )) such that L175: D45 = ( ( Sym (C53 , D43) ) -tree C54 ) and L176: ( Sym (C53 , D43) ) ==> ( roots C54 ) by L174 , L173 , DTCONSTR:10;
reconsider D46 = C54 as (FinSequence of ( R1 -Terms R2 ));
L177: D46 is (SubtreeSeq of ( Sym (C53 , D43) )) by L176 , DTCONSTR:def 6;
reconsider D47 = D46 as (ArgumentSeq of ( Sym (C53 , R2) )) by L177 , L25;
take D47;
thus L178: thesis by L175 , MSAFREE:def 9;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C55 being  non-empty MSAlgebra over R1;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C56 being (SortSymbol of R1);
let C57 being (Element of ( (the Sorts of C55) . C56 ));
func C57 -term (C55 , R2) -> (c-Term of C55 , R2) equals 
( root-tree [ C57 , C56 ] );
correctness by L154;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R3 being MSAlgebra over R1;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C58 being (SortSymbol of R1);
let C59 being (Element of ( R2 . C58 ));
func C59 -term R3 -> (c-Term of R3 , R2) equals 
( root-tree [ C59 , C58 ] );
correctness by L164;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C60 being (NonTerminal of ( DTConMSA R2 ));
let C61 being (ArgumentSeq of C60);
redefine func C60 -tree C61 -> (Term of R1 , R2);

coherence
proof
L181: C60 in [: (the carrier' of R1) , { (the carrier of R1) } :] by L85;
consider C62 being (OperSymbol of R1), C63 being (Element of { (the carrier of R1) }) such that L182: C60 = [ C62 , C63 ] by L181 , DOMAIN_1:1;
L183: C63 = (the carrier of R1) by TARSKI:def 1;
L184: C60 = ( Sym (C62 , R2) ) by L183 , L182 , MSAFREE:def 9;
thus L185: thesis by L184 , L182 , L183 , L29;
end;
end;
scheme TermInd2 { F6() -> non  void non  empty ManySortedSign , F7() ->  non-empty MSAlgebra over F6() , F8() ->  non-empty (ManySortedSet of (the carrier of F6())) , P3[set] } : (for B74 being (c-Term of F7() , F8()) holds P3[ B74 ])
provided
L187: (for B75 being (SortSymbol of F6()) holds (for B76 being (Element of ( (the Sorts of F7()) . B75 )) holds P3[ ( B76 -term (F7() , F8()) ) ]))
and
L188: (for B77 being (SortSymbol of F6()) holds (for B78 being (Element of ( F8() . B77 )) holds P3[ ( B78 -term F7() ) ]))
and
L189: (for B79 being (OperSymbol of F6()) holds (for B80 being (ArgumentSeq of ( Sym (B79 , ( (the Sorts of F7()) \/ F8() )) )) holds ((for B81 being (c-Term of F7() , F8()) holds (B81 in ( rng B80 ) implies P3[ B81 ])) implies P3[ ( ( Sym (B79 , ( (the Sorts of F7()) \/ F8() )) ) -tree B80 ) ])))
proof
L190:
now
let C64 being (SortSymbol of F6());
let C65 being (Element of ( (the Sorts of F7()) . C64 ));
L191: P3[ ( C65 -term (F7() , F8()) ) ] by L187;
thus L192: P3[ ( root-tree [ C65 , C64 ] ) ] by L191;
end;
L193:
now
let C66 being (SortSymbol of F6());
let C67 being (Element of ( F8() . C66 ));
L194: P3[ ( C67 -term F7() ) ] by L188;
thus L195: P3[ ( root-tree [ C67 , C66 ] ) ] by L194;
end;
L196: (for B82 being (OperSymbol of F6()) holds (for B83 being (ArgumentSeq of ( Sym (B82 , ( (the Sorts of F7()) \/ F8() )) )) holds ((for B84 being (c-Term of F7() , F8()) holds (B84 in ( rng B83 ) implies P3[ B84 ])) implies P3[ ( ( Sym (B82 , ( (the Sorts of F7()) \/ F8() )) ) -tree B83 ) ]))) by L189;
L197: (for B85 being (c-Term of F7() , F8()) holds P3[ B85 ]) from CTermInd(L190 , L193 , L196);
thus L198: thesis by L197;
end;
begin
theorem
L199: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B86 being (Term of R1 , R2) holds (ex B87 being (SortSymbol of R1) st B86 in ( FreeSort (R2 , B87) )))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C68 being (Term of R1 , R2);
set D48 = R2;
set D49 = ( DTConMSA D48 );
reconsider D50 = ( {} ) as (Node of C68) by TREES_1:22;
per cases ;
suppose L200: ( C68 . ( {} ) ) is (Terminal of D49);

reconsider D51 = ( C68 . ( {} ) ) as (Terminal of D49) by L200;
consider C69 being (SortSymbol of R1), C70 being set such that L201: C70 in ( D48 . C69 ) and L202: D51 = [ C70 , C69 ] by MSAFREE:7;
take C69;
L203: C68 = ( root-tree [ C70 , C69 ] ) by L202 , DTCONSTR:9;
L204: C68 in { B88 where B88 is (Element of ( TS D49 )) : ((ex B89 being set st (B89 in ( D48 . C69 ) & B88 = ( root-tree [ B89 , C69 ] ))) or (ex B90 being (OperSymbol of R1) st ([ B90 , (the carrier of R1) ] = ( B88 . ( {} ) ) & ( the_result_sort_of B90 ) = C69))) } by L203 , L201;
thus L205: thesis by L204 , MSAFREE:def 10;
end;
suppose L206: (not ( C68 . ( {} ) ) is (Terminal of D49));

reconsider D52 = ( C68 . D50 ) as (NonTerminal of D49) by L206 , L133;
L207: D52 in [: (the carrier' of R1) , { (the carrier of R1) } :] by L85;
consider C71 being (OperSymbol of R1), C72 being (Element of { (the carrier of R1) }) such that L208: D52 = [ C71 , C72 ] by L207 , DOMAIN_1:1;
take D53 = ( the_result_sort_of C71 );
L209: C72 = (the carrier of R1) by TARSKI:def 1;
L210: C68 in { B91 where B91 is (Element of ( TS D49 )) : ((ex B92 being set st (B92 in ( D48 . D53 ) & B91 = ( root-tree [ B92 , D53 ] ))) or (ex B93 being (OperSymbol of R1) st ([ B93 , (the carrier of R1) ] = ( B91 . ( {} ) ) & ( the_result_sort_of B93 ) = D53))) } by L209 , L208;
thus L211: thesis by L210 , MSAFREE:def 10;
end;
end;
theorem
L213: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B94 being (SortSymbol of R1) holds ( FreeSort (R2 , B94) ) c= ( R1 -Terms R2 ))));
theorem
L214: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds ( R1 -Terms R2 ) = ( Union ( FreeSort R2 ) )))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
set D54 = ( R1 -Terms R2 );
set D55 = R2;
L215: ( dom ( FreeSort D55 ) ) = (the carrier of R1) by PARTFUN1:def 2;
thus L216:now
let C73 being set;
assume L217: C73 in D54;
reconsider D56 = C73 as (Term of R1 , R2) by L217;
consider C74 being (SortSymbol of R1) such that L218: D56 in ( FreeSort (D55 , C74) ) by L199;
L219: ( FreeSort (D55 , C74) ) = ( ( FreeSort D55 ) . C74 ) by MSAFREE:def 11;
thus L220: C73 in ( Union ( FreeSort D55 ) ) by L219 , L215 , L218 , CARD_5:2;
end;
let C75 being set;
assume L221: C75 in ( Union ( FreeSort D55 ) );
consider C76 being set such that L222: C76 in ( dom ( FreeSort D55 ) ) and L223: C75 in ( ( FreeSort D55 ) . C76 ) by L221 , CARD_5:2;
reconsider D57 = C76 as (SortSymbol of R1) by L222 , PARTFUN1:def 2;
L224: C75 in ( FreeSort (D55 , D57) ) by L223 , MSAFREE:def 11;
thus L225: thesis by L224;
end;
L226: (for B95 being set holds (not B95 in B95));
definition
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
func the_sort_of R4 -> (SortSymbol of R1) means 
:L227: R4 in ( FreeSort (R2 , it) );
existence by L199;
uniqueness
proof
set D58 = R2;
let C77 , C78 being (SortSymbol of R1);
assume that
L228: R4 in ( FreeSort (D58 , C77) )
and
L229: R4 in ( FreeSort (D58 , C78) );
L230: ( FreeSort (D58 , C77) ) = { B96 where B96 is (Element of ( TS ( DTConMSA D58 ) )) : ((ex B97 being set st (B97 in ( D58 . C77 ) & B96 = ( root-tree [ B97 , C77 ] ))) or (ex B98 being (OperSymbol of R1) st ([ B98 , (the carrier of R1) ] = ( B96 . ( {} ) ) & ( the_result_sort_of B98 ) = C77))) } by MSAFREE:def 10;
consider C79 being (Element of ( TS ( DTConMSA D58 ) )) such that L231: R4 = C79 and L232: ((ex B99 being set st (B99 in ( D58 . C77 ) & C79 = ( root-tree [ B99 , C77 ] ))) or (ex B100 being (OperSymbol of R1) st ([ B100 , (the carrier of R1) ] = ( C79 . ( {} ) ) & ( the_result_sort_of B100 ) = C77))) by L230 , L228;
L233: ( FreeSort (D58 , C78) ) = { B101 where B101 is (Element of ( TS ( DTConMSA D58 ) )) : ((ex B102 being set st (B102 in ( D58 . C78 ) & B101 = ( root-tree [ B102 , C78 ] ))) or (ex B103 being (OperSymbol of R1) st ([ B103 , (the carrier of R1) ] = ( B101 . ( {} ) ) & ( the_result_sort_of B103 ) = C78))) } by MSAFREE:def 10;
consider C80 being (Element of ( TS ( DTConMSA D58 ) )) such that L234: R4 = C80 and L235: ((ex B104 being set st (B104 in ( D58 . C78 ) & C80 = ( root-tree [ B104 , C78 ] ))) or (ex B105 being (OperSymbol of R1) st ([ B105 , (the carrier of R1) ] = ( C80 . ( {} ) ) & ( the_result_sort_of B105 ) = C78))) by L233 , L229;
per cases  by L232;
suppose L236: (ex B106 being set st (B106 in ( D58 . C77 ) & C79 = ( root-tree [ B106 , C77 ] )));

consider C81 being set such that L237: C81 in ( D58 . C77 ) and L238: C79 = ( root-tree [ C81 , C77 ] ) by L236;
L239:
now
let C82 being (OperSymbol of R1);
assume L240: [ C82 , (the carrier of R1) ] = [ C81 , C77 ];
L241: (the carrier of R1) = C77 by L240 , XTUPLE_0:1;
thus L242: contradiction by L241 , L226;
end;
consider C83 being set such that L243: C83 in ( D58 . C78 ) and L244: C80 = ( root-tree [ C83 , C78 ] ) by L239 , L231 , L234 , L235 , L238 , TREES_4:3;
L245: [ C81 , C77 ] = [ C83 , C78 ] by L231 , L234 , L238 , L244 , TREES_4:4;
thus L246: thesis by L245 , XTUPLE_0:1;
end;
suppose L247: (ex B107 being (OperSymbol of R1) st ([ B107 , (the carrier of R1) ] = ( C79 . ( {} ) ) & ( the_result_sort_of B107 ) = C77));

consider C84 being (OperSymbol of R1) such that L248: [ C84 , (the carrier of R1) ] = ( C79 . ( {} ) ) and L249: ( the_result_sort_of C84 ) = C77 by L247;
L250:
now
given C85 being set such that
L251: C85 in ( D58 . C78 )
and
L252: C80 = ( root-tree [ C85 , C78 ] );

L253: [ C84 , (the carrier of R1) ] = [ C85 , C78 ] by L231 , L234 , L248 , L252 , TREES_4:3;
L254: (the carrier of R1) = C78 by L253 , XTUPLE_0:1;
thus L255: contradiction by L254 , L226;
end;
thus L256: thesis by L250 , L231 , L234 , L235 , L248 , L249 , XTUPLE_0:1;
end;
end;
end;
theorem
L259: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds (for B108 being (SortSymbol of R1) holds (for B109 being (Element of ( R2 . B108 )) holds (R4 = ( root-tree [ B109 , B108 ] ) implies ( the_sort_of R4 ) = B108))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
let C86 being (SortSymbol of R1);
let C87 being (Element of ( R2 . C86 ));
set D59 = R2;
set D60 = ( DTConMSA D59 );
set D61 = ( the_sort_of R4 );
L260: ( FreeSort (D59 , D61) ) = { B110 where B110 is (Element of ( TS D60 )) : ((ex B111 being set st (B111 in ( D59 . D61 ) & B110 = ( root-tree [ B111 , D61 ] ))) or (ex B112 being (OperSymbol of R1) st ([ B112 , (the carrier of R1) ] = ( B110 . ( {} ) ) & ( the_result_sort_of B112 ) = D61))) } by MSAFREE:def 10;
L261: R4 in ( FreeSort (R2 , ( the_sort_of R4 )) ) by L227;
consider C88 being (Element of ( TS D60 )) such that L262: R4 = C88 and L263: ((ex B113 being set st (B113 in ( D59 . D61 ) & C88 = ( root-tree [ B113 , D61 ] ))) or (ex B114 being (OperSymbol of R1) st ([ B114 , (the carrier of R1) ] = ( C88 . ( {} ) ) & ( the_result_sort_of B114 ) = D61))) by L261 , L260;
L264: [ C87 , C86 ] in ( Terminals D60 ) by L45;
assume L265: R4 = ( root-tree [ C87 , C86 ] );
L266: ( R4 . ( {} ) ) = [ C87 , C86 ] by L265 , TREES_4:3;
L267: (not ( R4 . ( {} ) ) is (NonTerminal of D60)) by L266 , L264 , L133;
L268: (not ( R4 . ( {} ) ) in [: (the carrier' of R1) , { (the carrier of R1) } :]) by L267 , L85;
L269: (the carrier of R1) in { (the carrier of R1) } by TARSKI:def 1;
consider C89 being set such that L270: C89 in ( D59 . D61 ) and L271: C88 = ( root-tree [ C89 , D61 ] ) by L269 , L262 , L263 , L268 , ZFMISC_1:87;
L272: [ C89 , D61 ] = [ C87 , C86 ] by L262 , L265 , L271 , TREES_4:4;
thus L273: thesis by L272 , XTUPLE_0:1;
end;
theorem
L274: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B115 being (c-Term of R3 , R2) holds (for B116 being (SortSymbol of R1) holds (for B117 being set holds ((B117 in ( (the Sorts of R3) . B116 ) & B115 = ( root-tree [ B117 , B116 ] )) implies ( the_sort_of B115 ) = B116)))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C90 being (c-Term of R3 , R2);
let C91 being (SortSymbol of R1);
let C92 being set;
assume L275: C92 in ( (the Sorts of R3) . C91 );
L276: C92 in ( ( (the Sorts of R3) . C91 ) \/ ( R2 . C91 ) ) by L275 , XBOOLE_0:def 3;
L277: C92 in ( ( (the Sorts of R3) \/ R2 ) . C91 ) by L276 , PBOOLE:def 4;
thus L278: thesis by L277 , L259;
end;
theorem
L279: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B118 being (c-Term of R3 , R2) holds (for B119 being (SortSymbol of R1) holds (for B120 being (Element of ( R2 . B119 )) holds (B118 = ( root-tree [ B120 , B119 ] ) implies ( the_sort_of B118 ) = B119)))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C93 being (c-Term of R3 , R2);
let C94 being (SortSymbol of R1);
let C95 being (Element of ( R2 . C94 ));
L280: C95 in ( ( (the Sorts of R3) . C94 ) \/ ( R2 . C94 ) ) by XBOOLE_0:def 3;
L281: C95 in ( ( (the Sorts of R3) \/ R2 ) . C94 ) by L280 , PBOOLE:def 4;
thus L282: thesis by L281 , L259;
end;
theorem
L283: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds (for B121 being (OperSymbol of R1) holds (( R4 . ( {} ) ) = [ B121 , (the carrier of R1) ] implies ( the_sort_of R4 ) = ( the_result_sort_of B121 ))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
let C96 being (OperSymbol of R1);
set D62 = R2;
set D63 = ( DTConMSA D62 );
set D64 = ( the_sort_of R4 );
L284: ( FreeSort (D62 , D64) ) = { B122 where B122 is (Element of ( TS D63 )) : ((ex B123 being set st (B123 in ( D62 . D64 ) & B122 = ( root-tree [ B123 , D64 ] ))) or (ex B124 being (OperSymbol of R1) st ([ B124 , (the carrier of R1) ] = ( B122 . ( {} ) ) & ( the_result_sort_of B124 ) = D64))) } by MSAFREE:def 10;
L285: R4 in ( FreeSort (R2 , ( the_sort_of R4 )) ) by L227;
consider C97 being (Element of ( TS D63 )) such that L286: R4 = C97 and L287: ((ex B125 being set st (B125 in ( D62 . D64 ) & C97 = ( root-tree [ B125 , D64 ] ))) or (ex B126 being (OperSymbol of R1) st ([ B126 , (the carrier of R1) ] = ( C97 . ( {} ) ) & ( the_result_sort_of B126 ) = D64))) by L285 , L284;
assume L288: ( R4 . ( {} ) ) = [ C96 , (the carrier of R1) ];
per cases  by L287;
suppose L289: (ex B127 being set st (B127 in ( D62 . D64 ) & C97 = ( root-tree [ B127 , D64 ] )));

consider C98 being set such that L290: C98 in ( D62 . D64 ) and L291: C97 = ( root-tree [ C98 , D64 ] ) by L289;
L292: [ C96 , (the carrier of R1) ] = [ C98 , D64 ] by L286 , L288 , L291 , TREES_4:3;
L293: (the carrier of R1) = D64 by L292 , XTUPLE_0:1;
thus L294: thesis by L293 , L226;
end;
suppose L295: (ex B128 being (OperSymbol of R1) st ([ B128 , (the carrier of R1) ] = ( C97 . ( {} ) ) & ( the_result_sort_of B128 ) = D64));

thus L296: thesis by L295 , L286 , L288 , XTUPLE_0:1;
end;
end;
theorem
L298: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B129 being  non-empty MSAlgebra over R1 holds (for B130 being (SortSymbol of R1) holds (for B131 being (Element of ( (the Sorts of B129) . B130 )) holds ( the_sort_of ( B131 -term (B129 , R2) ) ) = B130))))) by L274;
theorem
L299: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R3 being MSAlgebra over R1 holds (for B132 being (SortSymbol of R1) holds (for B133 being (Element of ( R2 . B132 )) holds ( the_sort_of ( B133 -term R3 ) ) = B132)))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R3 being MSAlgebra over R1;
let C99 being (SortSymbol of R1);
let C100 being (Element of ( R2 . C99 ));
L300: ( ( (the Sorts of R3) \/ R2 ) . C99 ) = ( ( (the Sorts of R3) . C99 ) \/ ( R2 . C99 ) ) by PBOOLE:def 4;
L301: C100 in ( ( (the Sorts of R3) \/ R2 ) . C99 ) by L300 , XBOOLE_0:def 3;
thus L302: thesis by L301 , L259;
end;
theorem
L303: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B134 being (OperSymbol of R1) holds (for B135 being (ArgumentSeq of ( Sym (B134 , R2) )) holds ( the_sort_of (( ( Sym (B134 , R2) ) -tree B135 ) qua (Term of R1 , R2)) ) = ( the_result_sort_of B134 )))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C101 being (OperSymbol of R1);
let C102 being (ArgumentSeq of ( Sym (C101 , R2) ));
L304: ( ( [ C101 , (the carrier of R1) ] -tree C102 ) . ( {} ) ) = [ C101 , (the carrier of R1) ] by TREES_4:def 4;
L305: [ C101 , (the carrier of R1) ] = ( Sym (C101 , R2) ) by MSAFREE:def 9;
thus L306: thesis by L305 , L304 , L283;
end;
begin
theorem
L307: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B136 being (OperSymbol of R1) holds (for B137 being (FinSequence of ( R1 -Terms R2 )) holds (B137 is (ArgumentSeq of ( Sym (B136 , R2) )) iff ( Sym (B136 , R2) ) ==> ( roots B137 ))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C103 being (OperSymbol of R1);
let C104 being (FinSequence of ( R1 -Terms R2 ));
L308: (C104 is (SubtreeSeq of ( Sym (C103 , R2) )) iff ( Sym (C103 , R2) ) ==> ( roots C104 )) by DTCONSTR:def 6;
thus L309: thesis by L308 , L25;
end;
L310: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B138 being (OperSymbol of R1) holds (for B139 being (ArgumentSeq of ( Sym (B138 , R2) )) holds (( len B139 ) = ( len ( the_arity_of B138 ) ) & ( dom B139 ) = ( dom ( the_arity_of B138 ) ) & (for B140 being Nat holds (B140 in ( dom B139 ) implies (ex B141 being (Term of R1 , R2) st (B141 = ( B139 . B140 ) & B141 = ( (B139 qua (FinSequence of (( R1 -Terms R2 ) qua non  empty set))) /. B140 ) & ( the_sort_of B141 ) = ( ( the_arity_of B138 ) . B140 ) & ( the_sort_of B141 ) = ( ( the_arity_of B138 ) /. B140 ))))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C105 being (OperSymbol of R1);
let C106 being (ArgumentSeq of ( Sym (C105 , R2) ));
set D65 = R2;
reconsider D66 = C106 as (FinSequence of ( TS ( DTConMSA D65 ) )) by L16;
L311: ( Sym (C105 , D65) ) ==> ( roots C106 ) by L307;
L312: D66 in ( ( ( ( FreeSort D65 ) # ) * (the Arity of R1) ) . C105 ) by L311 , MSAFREE:10;
L313: ( dom D66 ) = ( dom ( the_arity_of C105 ) ) by L312 , MSAFREE:9;
thus L314: (( len C106 ) = ( len ( the_arity_of C105 ) ) & ( dom C106 ) = ( dom ( the_arity_of C105 ) )) by L313 , FINSEQ_3:29;
let C107 being Nat;
reconsider D67 = ( (C106 qua (FinSequence of (( R1 -Terms R2 ) qua non  empty set))) /. C107 ) as (Term of R1 , R2);
assume L315: C107 in ( dom C106 );
L316: C107 <= ( len C106 ) by L315 , FINSEQ_3:25;
take D67;
L317: 1 <= C107 by L315 , FINSEQ_3:25;
thus L318: D67 = ( C106 . C107 ) by L317 , L316 , FINSEQ_4:15;
L319: D67 in ( FreeSort (D65 , ( ( the_arity_of C105 ) /. C107 )) ) by L318 , L312 , L315 , MSAFREE:9;
L320: ( the_sort_of D67 ) = ( ( the_arity_of C105 ) /. C107 ) by L319 , L227;
thus L321: thesis by L320 , L313 , L315 , PARTFUN1:def 6;
end;
theorem
L322: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B142 being (OperSymbol of R1) holds (for B143 being (ArgumentSeq of ( Sym (B142 , R2) )) holds (( len B143 ) = ( len ( the_arity_of B142 ) ) & ( dom B143 ) = ( dom ( the_arity_of B142 ) ) & (for B144 being Nat holds (B144 in ( dom B143 ) implies ( B143 . B144 ) is (Term of R1 , R2))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C108 being (OperSymbol of R1);
let C109 being (ArgumentSeq of ( Sym (C108 , R2) ));
thus L323: (( len C109 ) = ( len ( the_arity_of C108 ) ) & ( dom C109 ) = ( dom ( the_arity_of C108 ) )) by L310;
let C110 being Nat;
assume L324: C110 in ( dom C109 );
L325: (ex B145 being (Term of R1 , R2) st (B145 = ( C109 . C110 ) & B145 = ( (C109 qua (FinSequence of (( R1 -Terms R2 ) qua non  empty set))) /. C110 ) & ( the_sort_of B145 ) = ( ( the_arity_of C108 ) . C110 ) & ( the_sort_of B145 ) = ( ( the_arity_of C108 ) /. C110 ))) by L324 , L310;
thus L326: thesis by L325;
end;
theorem
L327: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B146 being (OperSymbol of R1) holds (for B147 being (ArgumentSeq of ( Sym (B146 , R2) )) holds (for B148 being Nat holds (B148 in ( dom B147 ) implies (for B149 being (Term of R1 , R2) holds (B149 = ( B147 . B148 ) implies (B149 = ( (B147 qua (FinSequence of (( R1 -Terms R2 ) qua non  empty set))) /. B148 ) & ( the_sort_of B149 ) = ( ( the_arity_of B146 ) . B148 ) & ( the_sort_of B149 ) = ( ( the_arity_of B146 ) /. B148 ))))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C111 being (OperSymbol of R1);
let C112 being (ArgumentSeq of ( Sym (C111 , R2) ));
let C113 being Nat;
assume L328: C113 in ( dom C112 );
L329: (ex B150 being (Term of R1 , R2) st (B150 = ( C112 . C113 ) & B150 = ( (C112 qua (FinSequence of (( R1 -Terms R2 ) qua non  empty set))) /. C113 ) & ( the_sort_of B150 ) = ( ( the_arity_of C111 ) . C113 ) & ( the_sort_of B150 ) = ( ( the_arity_of C111 ) /. C113 ))) by L328 , L310;
thus L330: thesis by L329;
end;
theorem
L331: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B151 being (OperSymbol of R1) holds (for B152 being FinSequence holds (((( len B152 ) = ( len ( the_arity_of B151 ) ) or ( dom B152 ) = ( dom ( the_arity_of B151 ) )) & ((for B153 being Nat holds (B153 in ( dom B152 ) implies (ex B154 being (Term of R1 , R2) st (B154 = ( B152 . B153 ) & ( the_sort_of B154 ) = ( ( the_arity_of B151 ) . B153 ))))) or (for B155 being Nat holds (B155 in ( dom B152 ) implies (ex B156 being (Term of R1 , R2) st (B156 = ( B152 . B155 ) & ( the_sort_of B156 ) = ( ( the_arity_of B151 ) /. B155 ))))))) implies B152 is (ArgumentSeq of ( Sym (B151 , R2) )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
set D68 = R2;
let C114 being (OperSymbol of R1);
let C115 being FinSequence;
assume that
L332: (( len C115 ) = ( len ( the_arity_of C114 ) ) or ( dom C115 ) = ( dom ( the_arity_of C114 ) ))
and
L333: ((for B157 being Nat holds (B157 in ( dom C115 ) implies (ex B158 being (Term of R1 , R2) st (B158 = ( C115 . B157 ) & ( the_sort_of B158 ) = ( ( the_arity_of C114 ) . B157 ))))) or (for B159 being Nat holds (B159 in ( dom C115 ) implies (ex B160 being (Term of R1 , R2) st (B160 = ( C115 . B159 ) & ( the_sort_of B160 ) = ( ( the_arity_of C114 ) /. B159 ))))));
L334: ( rng C115 ) c= ( TS ( DTConMSA D68 ) )
proof
let C116 being set;
assume L335: C116 in ( rng C115 );
consider C117 being set such that L336: C117 in ( dom C115 ) and L337: C116 = ( C115 . C117 ) by L335 , FUNCT_1:def 3;
reconsider D69 = C117 as Nat by L336;
L338: ((ex B161 being (Term of R1 , R2) st (B161 = ( C115 . D69 ) & ( the_sort_of B161 ) = ( ( the_arity_of C114 ) . D69 ))) or (ex B162 being (Term of R1 , R2) st (B162 = ( C115 . D69 ) & ( the_sort_of B162 ) = ( ( the_arity_of C114 ) /. D69 )))) by L333 , L336;
thus L339: thesis by L338 , L337;
end;
reconsider D70 = C115 as (FinSequence of ( TS ( DTConMSA D68 ) )) by L334 , FINSEQ_1:def 4;
L340: ( dom C115 ) = ( dom ( the_arity_of C114 ) ) by L332 , FINSEQ_3:29;
L341:
now
let C118 being Nat;
assume L342: C118 in ( dom D70 );
thus L343: ( D70 . C118 ) in ( FreeSort (D68 , ( ( the_arity_of C114 ) /. C118 )) )
proof
per cases  by L333 , L342;
suppose L344: (ex B163 being (Term of R1 , R2) st (B163 = ( C115 . C118 ) & ( the_sort_of B163 ) = ( ( the_arity_of C114 ) . C118 )));

consider C119 being (Term of R1 , R2) such that L345: C119 = ( C115 . C118 ) and L346: ( the_sort_of C119 ) = ( ( the_arity_of C114 ) . C118 ) by L344;
L347: ( the_sort_of C119 ) = ( ( the_arity_of C114 ) /. C118 ) by L340 , L342 , L346 , PARTFUN1:def 6;
thus L348: thesis by L347 , L345 , L227;
end;
suppose L349: (ex B164 being (Term of R1 , R2) st (B164 = ( C115 . C118 ) & ( the_sort_of B164 ) = ( ( the_arity_of C114 ) /. C118 )));

thus L350: thesis by L349 , L227;
end;
end;

end;
L344: D70 in ( ( ( ( FreeSort D68 ) # ) * (the Arity of R1) ) . C114 ) by L341 , L340 , MSAFREE:9;
L345: ( Sym (C114 , D68) ) ==> ( roots D70 ) by L344 , MSAFREE:10;
L346: ( R1 -Terms R2 ) = ( TS ( DTConMSA D68 ) );
thus L347: thesis by L346 , L345 , L307;
end;
theorem
L348: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for B165 being (OperSymbol of R1) holds (for B166 being (FinSequence of ( R1 -Terms R2 )) holds (((( len B166 ) = ( len ( the_arity_of B165 ) ) or ( dom B166 ) = ( dom ( the_arity_of B165 ) )) & ((for B167 being Nat holds (B167 in ( dom B166 ) implies (for B168 being (Term of R1 , R2) holds (B168 = ( B166 . B167 ) implies ( the_sort_of B168 ) = ( ( the_arity_of B165 ) . B167 ))))) or (for B169 being Nat holds (B169 in ( dom B166 ) implies (for B170 being (Term of R1 , R2) holds (B170 = ( B166 . B169 ) implies ( the_sort_of B170 ) = ( ( the_arity_of B165 ) /. B169 ))))))) implies B166 is (ArgumentSeq of ( Sym (B165 , R2) )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let C120 being (OperSymbol of R1);
let C121 being (FinSequence of ( R1 -Terms R2 ));
assume that
L349: (( len C121 ) = ( len ( the_arity_of C120 ) ) or ( dom C121 ) = ( dom ( the_arity_of C120 ) ))
and
L350: ((for B171 being Nat holds (B171 in ( dom C121 ) implies (for B172 being (Term of R1 , R2) holds (B172 = ( C121 . B171 ) implies ( the_sort_of B172 ) = ( ( the_arity_of C120 ) . B171 ))))) or (for B173 being Nat holds (B173 in ( dom C121 ) implies (for B174 being (Term of R1 , R2) holds (B174 = ( C121 . B173 ) implies ( the_sort_of B174 ) = ( ( the_arity_of C120 ) /. B173 ))))));
L351:
now
let C122 being Nat;
assume L352: C122 in ( dom C121 );
L353: ( C121 . C122 ) in ( rng C121 ) by L352 , FUNCT_1:def 3;
L354: ( rng C121 ) c= ( R1 -Terms R2 ) by FINSEQ_1:def 4;
thus L355: ( C121 . C122 ) in ( R1 -Terms R2 ) by L354 , L353;
end;
L356:
now
per cases  by L350;
case L357: (for B175 being Nat holds (B175 in ( dom C121 ) implies (for B176 being (Term of R1 , R2) holds (B176 = ( C121 . B175 ) implies ( the_sort_of B176 ) = ( ( the_arity_of C120 ) . B175 )))));
let C123 being Nat;
assume L358: C123 in ( dom C121 );
reconsider D71 = ( C121 . C123 ) as (Term of R1 , R2) by L358 , L351;
take D72 = D71;
thus L359: (D72 = ( C121 . C123 ) & ( the_sort_of D72 ) = ( ( the_arity_of C120 ) . C123 )) by L357 , L358;
end;
case L360: (for B177 being Nat holds (B177 in ( dom C121 ) implies (for B178 being (Term of R1 , R2) holds (B178 = ( C121 . B177 ) implies ( the_sort_of B178 ) = ( ( the_arity_of C120 ) /. B177 )))));
let C124 being Nat;
assume L361: C124 in ( dom C121 );
reconsider D73 = ( C121 . C124 ) as (Term of R1 , R2) by L361 , L351;
take D74 = D73;
thus L362: (D74 = ( C121 . C124 ) & ( the_sort_of D74 ) = ( ( the_arity_of C120 ) /. C124 )) by L360 , L361;
end;
end;
thus L364: thesis by L356 , L349 , L331;
end;
theorem
L365: (for B179 being non  void non  empty ManySortedSign holds (for B180 , B181 being  non-empty (ManySortedSet of (the carrier of B179)) holds (B180 c= B181 implies (for B182 being (Term of B179 , B180) holds B182 is (Term of B179 , B181)))))
proof
let C125 being non  void non  empty ManySortedSign;
let C126 , C127 being  non-empty (ManySortedSet of (the carrier of C125));
assume that
L366: (for B183 being set holds (B183 in (the carrier of C125) implies ( C126 . B183 ) c= ( C127 . B183 )));
defpred S1[ set ] means $1 is (Term of C125 , C127);
L367: (for B184 being (OperSymbol of C125) holds (for B185 being (ArgumentSeq of ( Sym (B184 , C126) )) holds ((for B186 being (Term of C125 , C126) holds (B186 in ( rng B185 ) implies S1[ B186 ])) implies S1[ ( [ B184 , (the carrier of C125) ] -tree B185 ) ])))
proof
let C128 being (OperSymbol of C125);
let C129 being (ArgumentSeq of ( Sym (C128 , C126) ));
assume L368: (for B187 being (Term of C125 , C126) holds (B187 in ( rng C129 ) implies B187 is (Term of C125 , C127)));
L369: ( rng C129 ) c= ( C125 -Terms C127 )
proof
let C130 being set;
assume L370: C130 in ( rng C129 );
L371: ( rng C129 ) c= ( C125 -Terms C126 ) by FINSEQ_1:def 4;
reconsider D75 = C130 as (Term of C125 , C126) by L371 , L370;
L372: D75 is (Term of C125 , C127) by L368 , L370;
thus L373: thesis by L372;
end;
reconsider D76 = C129 as (FinSequence of ( C125 -Terms C127 )) by L369 , FINSEQ_1:def 4;
L374:
now
let C131 being Nat;
assume L375: C131 in ( dom D76 );
consider C132 being (Term of C125 , C126) such that L376: C132 = ( D76 . C131 ) and L377: C132 = ( (C129 qua (FinSequence of (( C125 -Terms C126 ) qua non  empty set))) /. C131 ) and L378: ( the_sort_of C132 ) = ( ( the_arity_of C128 ) . C131 ) and L379: ( the_sort_of C132 ) = ( ( the_arity_of C128 ) /. C131 ) by L375 , L310;
L380: C132 in ( rng C129 ) by L375 , L376 , FUNCT_1:def 3;
reconsider D77 = C132 as (Term of C125 , C127) by L380 , L368;
take D78 = D77;
thus L381: D78 = ( D76 . C131 ) by L376;
thus L382: ( the_sort_of D78 ) = ( ( the_arity_of C128 ) . C131 )
proof
per cases  by L138;
suppose L383: (ex B188 being (SortSymbol of C125) st (ex B189 being (Element of ( C126 . B188 )) st ( C132 . ( {} ) ) = [ B189 , B188 ]));

consider C133 being (SortSymbol of C125), C134 being (Element of ( C126 . C133 )) such that L384: ( C132 . ( {} ) ) = [ C134 , C133 ] by L383;
L385: C132 = ( root-tree [ C134 , C133 ] ) by L384 , L151;
L386: ( C126 . C133 ) c= ( C127 . C133 ) by L366;
L387: C134 in ( C127 . C133 ) by L386 , TARSKI:def 3;
thus L388: ( the_sort_of D78 ) = C133 by L387 , L385 , L259
.= ( ( the_arity_of C128 ) . C131 ) by L378 , L385 , L259;
end;
suppose L389: ( C132 . ( {} ) ) in [: (the carrier' of C125) , { (the carrier of C125) } :];

consider C135 being (OperSymbol of C125), C136 being (Element of { (the carrier of C125) }) such that L390: ( C132 . ( {} ) ) = [ C135 , C136 ] by L389 , DOMAIN_1:1;
L391: C136 = (the carrier of C125) by TARSKI:def 1;
thus L392: ( the_sort_of D78 ) = ( the_result_sort_of C135 ) by L391 , L390 , L283
.= ( ( the_arity_of C128 ) . C131 ) by L378 , L390 , L391 , L283;
end;
end;

end;
L383: ( len C129 ) = ( len ( the_arity_of C128 ) ) by L310;
L384: D76 is (ArgumentSeq of ( Sym (C128 , C127) )) by L383 , L374 , L331;
thus L385: thesis by L384 , L29;
end;
L386: (for B190 being (SortSymbol of C125) holds (for B191 being (Element of ( C126 . B190 )) holds S1[ ( root-tree [ B191 , B190 ] ) ]))
proof
let C137 being (SortSymbol of C125);
let C138 being (Element of ( C126 . C137 ));
L387: ( C126 . C137 ) c= ( C127 . C137 ) by L366;
L388: C138 in ( C127 . C137 ) by L387 , TARSKI:def 3;
thus L389: thesis by L388 , L148;
end;
L390: (for B192 being (Term of C125 , C126) holds S1[ B192 ]) from TermInd(L386 , L367);
thus L391: thesis by L390;
end;
theorem
L392: (for B193 being non  void non  empty ManySortedSign holds (for B194 being MSAlgebra over B193 holds (for B195 being  non-empty (ManySortedSet of (the carrier of B193)) holds (for B196 being (Term of B193 , B195) holds B196 is (c-Term of B194 , B195))))) by L365 , PBOOLE:14;
begin
definition
let C139 being non  void non  empty ManySortedSign;
let C140 being  non-empty (ManySortedSet of (the carrier of C139));
mode CompoundTerm of C139 , C140
 -> (Term of C139 , C140)
means ( it . ( {} ) ) in [: (the carrier' of C139) , { (the carrier of C139) } :];
existence
proof
set D79 = the (OperSymbol of C139);
reconsider D80 = ( Sym (D79 , C140) ) as (NonTerminal of ( DTConMSA C140 ));
set D81 = the (SubtreeSeq of D80);
reconsider D82 = ( D80 -tree D81 ) as (Term of C139 , C140);
take D82;
L393: D80 = [ D79 , (the carrier of C139) ] by MSAFREE:def 9;
L394: [ D79 , (the carrier of C139) ] = ( D82 . ( {} ) ) by L393 , TREES_4:def 4;
L395: (the carrier of C139) in { (the carrier of C139) } by TARSKI:def 1;
thus L396: thesis by L395 , L394 , ZFMISC_1:87;
end;
end;
definition
let C141 being non  void non  empty ManySortedSign;
let C142 being  non-empty (ManySortedSet of (the carrier of C141));
mode SetWithCompoundTerm of C141 , C142
 -> non  empty (Subset of ( C141 -Terms C142 ))
means (ex B197 being (CompoundTerm of C141 , C142) st B197 in it);
existence
proof
set D83 = the (CompoundTerm of C141 , C142);
reconsider D84 = { D83 } as non  empty (Subset of ( C141 -Terms C142 )) by ZFMISC_1:31;
take D84;
take D83;
thus L398: thesis by TARSKI:def 1;
end;
end;
theorem
L400: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds ((not R4 is  root) implies R4 is (CompoundTerm of R1 , R2)))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
assume L401: (not R4 is  root);
per cases  by L138;
suppose L402: (ex B198 being (SortSymbol of R1) st (ex B199 being (Element of ( R2 . B198 )) st ( R4 . ( {} ) ) = [ B199 , B198 ]));

consider C143 being (SortSymbol of R1), C144 being (Element of ( R2 . C143 )) such that L403: ( R4 . ( {} ) ) = [ C144 , C143 ] by L402;
L404: R4 = ( root-tree [ C144 , C143 ] ) by L403 , L151;
thus L405: thesis by L404 , L401;
end;
suppose L406: ( R4 . ( {} ) ) in [: (the carrier' of R1) , { (the carrier of R1) } :];

thus L407: ( R4 . ( {} ) ) in [: (the carrier' of R1) , { (the carrier of R1) } :] by L406;
end;
end;
L409: (for B200 being (Element of ( NAT )) holds (for B201 being FinSequence holds (B200 < ( len B201 ) implies (( B200 + 1 ) in ( dom B201 ) & ( B201 . ( B200 + 1 ) ) in ( rng B201 )))))
proof
let C145 being (Element of ( NAT ));
let C146 being FinSequence;
L410: C145 >= ( 0 ) by NAT_1:2;
L411: ( C145 + 1 ) >= ( ( 0 ) + 1 ) by L410 , XREAL_1:7;
assume L412: C145 < ( len C146 );
L413: ( C145 + 1 ) <= ( len C146 ) by L412 , NAT_1:13;
L414: ( C145 + 1 ) in ( dom C146 ) by L413 , L411 , FINSEQ_3:25;
thus L415: thesis by L414 , FUNCT_1:def 3;
end;
theorem
L416: (for R1 being non  void non  empty ManySortedSign holds (for R2 being  non-empty (ManySortedSet of (the carrier of R1)) holds (for R4 being (Term of R1 , R2) holds (for B202 being (Node of R4) holds ( R4 | B202 ) is (Term of R1 , R2)))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being  non-empty (ManySortedSet of (the carrier of R1));
let R4 being (Term of R1 , R2);
defpred S2[ set ] means (for B203 being (Node of R4) holds (B203 = $1 implies ( R4 | B203 ) is (Term of R1 , R2)));
L417: (for B204 being (Node of R4) holds (for B205 being (Element of ( NAT )) holds ((S2[ B204 ] & ( B204 ^ <* B205 *> ) in ( dom R4 )) implies S2[ ( B204 ^ <* B205 *> ) ])))
proof
let C147 being (Node of R4);
let C148 being (Element of ( NAT ));
assume that
L418: (for B206 being (Node of R4) holds (B206 = C147 implies ( R4 | B206 ) is (Term of R1 , R2)))
and
L419: ( C147 ^ <* C148 *> ) in ( dom R4 );
reconsider D85 = ( R4 | C147 ) as (Term of R1 , R2) by L418;
L420: ( dom D85 ) = ( ( dom R4 ) | C147 ) by TREES_2:def 10;
L421: <* C148 *> in ( ( dom R4 ) | C147 ) by L419 , TREES_1:def 6;
L422:
now
given C149 being (SortSymbol of R1) , C150 being (Element of ( R2 . C149 )) such that
L423: ( D85 . ( {} ) ) = [ C150 , C149 ];

L424: D85 = ( root-tree [ C150 , C149 ] ) by L423 , L151;
L425: <* C148 *> in { ( {} ) } by L424 , L421 , L420 , TREES_1:29 , TREES_4:3;
thus L426: contradiction by L425 , TARSKI:def 1;
end;
L427: ((ex B207 being (SortSymbol of R1) st (ex B208 being (Element of ( R2 . B207 )) st ( D85 . ( {} ) ) = [ B208 , B207 ])) or ( D85 . ( {} ) ) in [: (the carrier' of R1) , { (the carrier of R1) } :]) by L138;
consider C151 being (OperSymbol of R1), C152 being (Element of { (the carrier of R1) }) such that L428: ( D85 . ( {} ) ) = [ C151 , C152 ] by L427 , L422 , DOMAIN_1:1;
L429: C152 = (the carrier of R1) by TARSKI:def 1;
consider C153 being (ArgumentSeq of ( Sym (C151 , R2) )) such that L430: D85 = ( [ C151 , (the carrier of R1) ] -tree C153 ) by L429 , L428 , L172;
consider C154 being (Element of ( NAT )), C155 being DecoratedTree, C156 being (Node of C155) such that L431: C154 < ( len C153 ) and L432: C155 = ( C153 . ( C154 + 1 ) ) and L433: <* C148 *> = ( <* C154 *> ^ C156 ) by L421 , L420 , L430 , TREES_4:11;
L434: C148 = ( <* C148 *> . 1 ) by FINSEQ_1:40
.= C154 by L433 , FINSEQ_1:41;
L435: ( D85 | <* C148 *> ) = ( C153 . ( C148 + 1 ) ) by L434 , L430 , L431 , TREES_4:def 4;
let C157 being (Node of R4);
assume L436: C157 = ( C147 ^ <* C148 *> );
L437: ( C148 + 1 ) in ( dom C153 ) by L431 , L434 , L409;
L438: (ex B209 being (Term of R1 , R2) st (B209 = ( D85 | <* C148 *> ) & B209 = ( (C153 qua (FinSequence of (( R1 -Terms R2 ) qua non  empty set))) /. ( C148 + 1 ) ) & ( the_sort_of B209 ) = ( ( the_arity_of C151 ) . ( C148 + 1 ) ) & ( the_sort_of B209 ) = ( ( the_arity_of C151 ) /. ( C148 + 1 ) ))) by L437 , L435 , L310;
thus L439: thesis by L438 , L436 , TREES_9:3;
end;
L440: S2[ ( {} ) ] by TREES_9:1;
L441: (for B210 being (Node of R4) holds S2[ B210 ]) from TREES_2:sch 1(L440 , L417);
thus L442: thesis by L441;
end;
definition
let C158 being non  void non  empty ManySortedSign;
let C159 being  non-empty (ManySortedSet of (the carrier of C158));
let C160 being (Term of C158 , C159);
let C161 being (Node of C160);
redefine func C160 | C161 -> (Term of C158 , C159);

coherence by L416;
end;
begin
definition
let C162 being non  void non  empty ManySortedSign;
let C163 being MSAlgebra over C162;
mode Variables of C163
 ->  non-empty (ManySortedSet of (the carrier of C162))
means :L444: it misses (the Sorts of C163);
existence
proof
deffunc H1(set) = { ( (the Sorts of C163) . $1 ) };
consider C164 being (ManySortedSet of (the carrier of C162)) such that L445: (for B211 being set holds (B211 in (the carrier of C162) implies ( C164 . B211 ) = H1(B211))) from PBOOLE:sch 4;
L446: C164 is  non-empty
proof
let C165 being set;
assume L447: C165 in (the carrier of C162);
L448: ( C164 . C165 ) = { ( (the Sorts of C163) . C165 ) } by L447 , L445;
thus L449: thesis by L448;
end;
reconsider D86 = C164 as  non-empty (ManySortedSet of (the carrier of C162)) by L446;
take D86;
let C166 being set;
assume L450: C166 in (the carrier of C162);
L451: ( D86 . C166 ) = { ( (the Sorts of C163) . C166 ) } by L450 , L445;
L452:
now
let C167 being set;
assume L453: C167 in ( D86 . C166 );
L454: C167 = ( (the Sorts of C163) . C166 ) by L453 , L451 , TARSKI:def 1;
thus L455: (not C167 in ( (the Sorts of C163) . C166 )) by L454;
end;
thus L456: thesis by L452 , XBOOLE_0:3;
end;
end;
theorem
L458: (for R1 being non  void non  empty ManySortedSign holds (for R3 being MSAlgebra over R1 holds (for B212 being (Variables of R3) holds (for B213 being (SortSymbol of R1) holds (for B214 being set holds (B214 in ( (the Sorts of R3) . B213 ) implies (for B215 being (Element of ( B212 . B213 )) holds B214 <> B215)))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R3 being MSAlgebra over R1;
let C168 being (Variables of R3);
let C169 being (SortSymbol of R1);
let C170 being set;
assume that
L459: C170 in ( (the Sorts of R3) . C169 );
let C171 being (Element of ( C168 . C169 ));
L460: C168 misses (the Sorts of R3) by L444;
L461: ( C168 . C169 ) misses ( (the Sorts of R3) . C169 ) by L460 , PBOOLE:def 8;
thus L462: thesis by L461 , L459 , XBOOLE_0:3;
end;
definition
let C172 being non  void non  empty ManySortedSign;
let C173 being  non-empty MSAlgebra over C172;
let C174 being  non-empty (ManySortedSet of (the carrier of C172));
let C175 being (c-Term of C173 , C174);
let C176 being (ManySortedFunction of C174 , (the Sorts of C173));
let C177 being  finite DecoratedTree;
pred C177 is_an_evaluation_of C175 , C176
means
:L463: (( dom C177 ) = ( dom C175 ) & (for B216 being (Node of C177) holds ((for B217 being (SortSymbol of C172) holds (for B218 being (Element of ( C174 . B217 )) holds (( C175 . B216 ) = [ B218 , B217 ] implies ( C177 . B216 ) = ( ( C176 . B217 ) . B218 )))) & (for B219 being (SortSymbol of C172) holds (for B220 being (Element of ( (the Sorts of C173) . B219 )) holds (( C175 . B216 ) = [ B220 , B219 ] implies ( C177 . B216 ) = B220))) & (for B221 being (OperSymbol of C172) holds (( C175 . B216 ) = [ B221 , (the carrier of C172) ] implies ( C177 . B216 ) = ( ( Den (B221 , C173) ) . ( succ (C177 , B216) ) ))))))
;end;
theorem
L465: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R8 being (c-Term of R6 , R7) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B222 being (SortSymbol of R5) holds (for B223 being (Element of ( (the Sorts of R6) . B222 )) holds (R8 = ( root-tree [ B223 , B222 ] ) implies ( root-tree B223 ) is_an_evaluation_of R8 , R9))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R8 being (c-Term of R6 , R7);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C178 being (SortSymbol of R5);
let C179 being (Element of ( (the Sorts of R6) . C178 ));
assume that
L466: R8 = ( root-tree [ C179 , C178 ] );
L467: ( R8 . ( {} ) ) = [ C179 , C178 ] by L466 , TREES_4:3;
set D87 = ( root-tree C179 );
L468: ( dom D87 ) = ( elementary_tree ( 0 ) ) by TREES_4:3;
thus L469: ( dom D87 ) = ( dom R8 ) by L468 , L466 , TREES_4:3;
let C180 being (Node of D87);
reconsider D88 = C180 as  empty (FinSequence of ( NAT )) by L468 , TARSKI:def 1 , TREES_1:29;
thus L470:now
let C181 being (SortSymbol of R5);
let C182 being (Element of ( R7 . C181 ));
assume L471: ( R8 . C180 ) = [ C182 , C181 ];
L472: [ C182 , C181 ] = ( R8 . D88 ) by L471
.= [ C179 , C178 ] by L466 , TREES_4:3;
L473: C179 = C182 by L472 , XTUPLE_0:1;
L474: C178 = C181 by L472 , XTUPLE_0:1;
thus L475: ( D87 . C180 ) = ( ( R9 . C181 ) . C182 ) by L474 , L473 , L458;
end;
L476: ( D87 . ( {} ) ) = C179 by TREES_4:3;
thus L477:now
let C183 being (SortSymbol of R5);
let C184 being (Element of ( (the Sorts of R6) . C183 ));
assume L478: ( R8 . C180 ) = [ C184 , C183 ];
L479: [ C184 , C183 ] = ( R8 . D88 ) by L478;
thus L480: ( D87 . C180 ) = C184 by L479 , L467 , L476 , XTUPLE_0:1;
end;
let C185 being (OperSymbol of R5);
assume L481: ( R8 . C180 ) = [ C185 , (the carrier of R5) ];
L482: (the carrier of R5) = ( ( R8 . D88 ) `2 ) by L481 , MCART_1:7
.= C178 by L467 , MCART_1:7;
thus L483: ( D87 . C180 ) = ( ( Den (C185 , R6) ) . ( succ (D87 , C180) ) ) by L482 , L226;
end;
theorem
L484: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R8 being (c-Term of R6 , R7) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B224 being (SortSymbol of R5) holds (for B225 being (Element of ( R7 . B224 )) holds (R8 = ( root-tree [ B225 , B224 ] ) implies ( root-tree ( ( R9 . B224 ) . B225 ) ) is_an_evaluation_of R8 , R9))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R8 being (c-Term of R6 , R7);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C186 being (SortSymbol of R5);
let C187 being (Element of ( R7 . C186 ));
assume that
L485: R8 = ( root-tree [ C187 , C186 ] );
set D89 = ( root-tree ( ( R9 . C186 ) . C187 ) );
L486: ( dom D89 ) = ( elementary_tree ( 0 ) ) by TREES_4:3;
thus L487: ( dom D89 ) = ( dom R8 ) by L486 , L485 , TREES_4:3;
let C188 being (Node of D89);
reconsider D90 = C188 as  empty (FinSequence of ( NAT )) by L486 , TARSKI:def 1 , TREES_1:29;
L488: ( R8 . ( {} ) ) = [ C187 , C186 ] by L485 , TREES_4:3;
thus L489:now
let C189 being (SortSymbol of R5);
let C190 being (Element of ( R7 . C189 ));
L490: D90 = C188;
assume L491: ( R8 . C188 ) = [ C190 , C189 ];
L492: [ C190 , C189 ] = ( R8 . D90 ) by L491;
L493: C186 = C189 by L492 , L488 , XTUPLE_0:1;
L494: C187 = C190 by L488 , L492 , XTUPLE_0:1;
thus L495: ( D89 . C188 ) = ( ( R9 . C189 ) . C190 ) by L494 , L493 , L490 , TREES_4:3;
end;
thus L496:now
let C191 being (SortSymbol of R5);
let C192 being (Element of ( (the Sorts of R6) . C191 ));
assume L497: ( R8 . C188 ) = [ C192 , C191 ];
L498: [ C192 , C191 ] = ( R8 . D90 ) by L497
.= [ C187 , C186 ] by L485 , TREES_4:3;
L499: C187 = C192 by L498 , XTUPLE_0:1;
L500: C186 = C191 by L498 , XTUPLE_0:1;
thus L501: ( D89 . C188 ) = C192 by L500 , L499 , L458;
end;
let C193 being (OperSymbol of R5);
assume L502: ( R8 . C188 ) = [ C193 , (the carrier of R5) ];
L503: (the carrier of R5) = ( ( R8 . D90 ) `2 ) by L502 , MCART_1:7
.= C186 by L488 , MCART_1:7;
thus L504: ( D89 . C188 ) = ( ( Den (C193 , R6) ) . ( succ (D89 , C188) ) ) by L503 , L226;
end;
theorem
L505: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B226 being (OperSymbol of R5) holds (for B227 being (ArgumentSeq of B226 , R6 , R7) holds (for B228 being  DTree-yielding FinSequence holds ((( len B228 ) = ( len B227 ) & (for B229 being Nat holds (for B230 being (c-Term of R6 , R7) holds ((B229 in ( dom B227 ) & B230 = ( B227 . B229 )) implies (ex B231 being  finite DecoratedTree st (B231 = ( B228 . B229 ) & B231 is_an_evaluation_of B230 , R9)))))) implies (ex B232 being  finite DecoratedTree st (B232 = ( ( ( Den (B226 , R6) ) . ( roots B228 ) ) -tree B228 ) & B232 is_an_evaluation_of (( ( Sym (B226 , ( (the Sorts of R6) \/ R7 )) ) -tree B227 ) qua (c-Term of R6 , R7)) , R9))))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C194 being (OperSymbol of R5);
let C195 being (ArgumentSeq of C194 , R6 , R7);
L506: ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) = [ C194 , (the carrier of R5) ] by MSAFREE:def 9;
L507: ( dom ( doms C195 ) ) = ( dom C195 ) by TREES_3:37;
L508: ( tree ( doms C195 ) ) = ( dom ( [ C194 , (the carrier of R5) ] -tree C195 ) ) by TREES_4:10;
L509: ( dom C195 ) = ( Seg ( len C195 ) ) by FINSEQ_1:def 3;
let C196 being  DTree-yielding FinSequence;
assume that
L510: ( len C196 ) = ( len C195 )
and
L511: (for B233 being Nat holds (for B234 being (c-Term of R6 , R7) holds ((B233 in ( dom C195 ) & B234 = ( C195 . B233 )) implies (ex B235 being  finite DecoratedTree st (B235 = ( C196 . B233 ) & B235 is_an_evaluation_of B234 , R9)))));
L512: ( dom C196 ) = ( Seg ( len C196 ) ) by FINSEQ_1:def 3;
L513:
now
let C197 being set;
L514: ( rng C195 ) c= ( R5 -Terms ( (the Sorts of R6) \/ R7 ) ) by FINSEQ_1:def 4;
assume L515: C197 in ( dom ( doms C196 ) );
L516: C197 in ( dom C196 ) by L515 , TREES_3:37;
L517: ( C195 . C197 ) in ( rng C195 ) by L516 , L510 , L509 , L512 , FUNCT_1:def 3;
reconsider D91 = ( C195 . C197 ) as (c-Term of R6 , R7) by L517 , L514;
reconsider D92 = C197 as Nat by L515;
consider C198 being  finite DecoratedTree such that L518: C198 = ( C196 . D92 ) and L519: C198 is_an_evaluation_of D91 , R9 by L510 , L511 , L509 , L512 , L516;
L520: ( ( doms C196 ) . C197 ) = ( dom C198 ) by L516 , L518 , FUNCT_6:22;
thus L521: ( ( doms C196 ) . C197 ) is  finite  finite  finite  finite Tree by L520;
end;
reconsider D93 = ( doms C196 ) as  FinTree-yielding FinSequence by L513 , TREES_3:23;
L522:
now
let C199 being Nat;
L523: ( rng C195 ) c= ( R5 -Terms ( (the Sorts of R6) \/ R7 ) ) by FINSEQ_1:def 4;
assume L524: C199 in ( dom C195 );
L525: ( C195 . C199 ) in ( rng C195 ) by L524 , FUNCT_1:def 3;
reconsider D94 = ( C195 . C199 ) as (c-Term of R6 , R7) by L525 , L523;
consider C200 being  finite DecoratedTree such that L526: C200 = ( C196 . C199 ) and L527: C200 is_an_evaluation_of D94 , R9 by L511 , L524;
thus L528: ( D93 . C199 ) = ( dom C200 ) by L510 , L509 , L512 , L524 , L526 , FUNCT_6:22
.= ( dom D94 ) by L527 , L463
.= ( ( doms C195 ) . C199 ) by L524 , FUNCT_6:22;
end;
set D95 = ( ( ( Den (C194 , R6) ) . ( roots C196 ) ) -tree C196 );
L529: ( len ( doms C196 ) ) = ( len C196 ) by TREES_3:38;
L530: ( dom D95 ) = ( tree D93 ) by TREES_4:10;
reconsider D96 = D95 as  finite DecoratedTree by L530 , FINSET_1:10;
take D96;
thus L531: D96 = ( ( ( Den (C194 , R6) ) . ( roots C196 ) ) -tree C196 );
L532: ( dom ( doms C196 ) ) = ( dom C196 ) by TREES_3:37;
thus L533: ( dom D96 ) = ( dom ( ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) -tree C195 ) ) by L532 , L506 , L510 , L509 , L512 , L530 , L508 , L507 , L522 , FINSEQ_1:13;
let C201 being (Node of D96);
L534: ( ( [ C194 , (the carrier of R5) ] -tree C195 ) . ( {} ) ) = [ C194 , (the carrier of R5) ] by TREES_4:def 4;
thus L535:now
let C202 being (SortSymbol of R5);
let C203 being (Element of ( R7 . C202 ));
assume L536: ( ( ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) -tree C195 ) . C201 ) = [ C203 , C202 ];
L537:
now
assume L538: C201 = ( {} );
L539: C202 = (the carrier of R5) by L538 , L506 , L534 , L536 , XTUPLE_0:1;
thus L540: contradiction by L539 , L226;
end;
consider C204 being (FinSequence of ( NAT )), C205 being (Element of ( NAT )) such that L541: C201 = ( <* C205 *> ^ C204 ) by L537 , FINSEQ_2:130;
L542: C204 in ( ( doms C196 ) . ( C205 + 1 ) ) by L530 , L541 , TREES_3:48;
L543: C205 < ( len C195 ) by L510 , L530 , L529 , L541 , TREES_3:48;
reconsider D97 = ( C195 . ( C205 + 1 ) ) as (c-Term of R6 , R7) by L543 , L7;
consider C206 being  finite DecoratedTree such that L544: C206 = ( C196 . ( C205 + 1 ) ) and L545: C206 is_an_evaluation_of D97 , R9 by L511 , L543 , L409;
L546: ( C205 + 1 ) in ( dom C195 ) by L543 , L409;
reconsider D98 = C204 as (Node of C206) by L546 , L510 , L509 , L512 , L542 , L544 , FUNCT_6:22;
L547: ( dom C206 ) = ( dom D97 ) by L545 , L463;
L548: ( D97 . D98 ) = [ C203 , C202 ] by L547 , L536 , L541 , L543 , TREES_4:12;
thus L549: ( D96 . C201 ) = ( C206 . D98 ) by L510 , L541 , L543 , L544 , TREES_4:12
.= ( ( R9 . C202 ) . C203 ) by L545 , L548 , L463;
end;
thus L550:now
let C207 being (SortSymbol of R5);
let C208 being (Element of ( (the Sorts of R6) . C207 ));
assume L551: ( ( ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) -tree C195 ) . C201 ) = [ C208 , C207 ];
L552:
now
assume L553: C201 = ( {} );
L554: C207 = (the carrier of R5) by L553 , L506 , L534 , L551 , XTUPLE_0:1;
thus L555: contradiction by L554 , L226;
end;
consider C209 being (FinSequence of ( NAT )), C210 being (Element of ( NAT )) such that L556: C201 = ( <* C210 *> ^ C209 ) by L552 , FINSEQ_2:130;
L557: C209 in ( ( doms C196 ) . ( C210 + 1 ) ) by L530 , L556 , TREES_3:48;
L558: C210 < ( len C195 ) by L510 , L530 , L529 , L556 , TREES_3:48;
reconsider D99 = ( C195 . ( C210 + 1 ) ) as (c-Term of R6 , R7) by L558 , L7;
consider C211 being  finite DecoratedTree such that L559: C211 = ( C196 . ( C210 + 1 ) ) and L560: C211 is_an_evaluation_of D99 , R9 by L511 , L558 , L409;
L561: ( C210 + 1 ) in ( dom C195 ) by L558 , L409;
reconsider D100 = C209 as (Node of C211) by L561 , L510 , L509 , L512 , L557 , L559 , FUNCT_6:22;
L562: ( dom C211 ) = ( dom D99 ) by L560 , L463;
L563: ( D99 . D100 ) = [ C208 , C207 ] by L562 , L551 , L556 , L558 , TREES_4:12;
thus L564: ( D96 . C201 ) = ( C211 . D100 ) by L510 , L556 , L558 , L559 , TREES_4:12
.= C208 by L560 , L563 , L463;
end;
let C212 being (OperSymbol of R5);
assume L565: ( ( ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) -tree C195 ) . C201 ) = [ C212 , (the carrier of R5) ];
per cases ;
suppose L566: C201 = ( {} );

L567: ( ( ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) -tree C195 ) . C201 ) = ( Sym (C194 , ( (the Sorts of R6) \/ R7 )) ) by L566 , TREES_4:def 4
.= [ C194 , (the carrier of R5) ] by MSAFREE:def 9;
L568: C194 = C212 by L567 , L565 , XTUPLE_0:1;
L569: ( succ (D96 , C201) ) = ( roots C196 ) by L566 , TREES_9:30;
thus L570: thesis by L569 , L566 , L568 , TREES_4:def 4;
end;
suppose L571: C201 <> ( {} );

consider C213 being (FinSequence of ( NAT )), C214 being (Element of ( NAT )) such that L572: C201 = ( <* C214 *> ^ C213 ) by L571 , FINSEQ_2:130;
reconsider D101 = <* C214 *> as (Node of D96) by L572 , TREES_1:21;
L573: C213 in ( ( doms C196 ) . ( C214 + 1 ) ) by L530 , L572 , TREES_3:48;
L574: C214 < ( len C195 ) by L510 , L530 , L529 , L572 , TREES_3:48;
reconsider D102 = ( C195 . ( C214 + 1 ) ) as (c-Term of R6 , R7) by L574 , L7;
consider C215 being  finite DecoratedTree such that L575: C215 = ( C196 . ( C214 + 1 ) ) and L576: C215 is_an_evaluation_of D102 , R9 by L511 , L574 , L409;
L577: C215 = ( D96 | D101 ) by L510 , L574 , L575 , TREES_4:def 4;
L578: ( C214 + 1 ) in ( dom C195 ) by L574 , L409;
reconsider D103 = C213 as (Node of C215) by L578 , L510 , L509 , L512 , L573 , L575 , FUNCT_6:22;
L579: ( dom C215 ) = ( dom D102 ) by L576 , L463;
L580: ( D102 . D103 ) = [ C212 , (the carrier of R5) ] by L579 , L565 , L572 , L574 , TREES_4:12;
L581: ( C215 . D103 ) = ( ( Den (C212 , R6) ) . ( succ (C215 , D103) ) ) by L580 , L576 , L463
.= ( ( Den (C212 , R6) ) . ( succ (D96 , C201) ) ) by L572 , L577 , TREES_9:31;
thus L582: thesis by L581 , L510 , L572 , L574 , L575 , TREES_4:12;
end;
end;
theorem
L584: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B236 being (c-Term of R6 , R7) holds (for B237 being  finite DecoratedTree holds (B237 is_an_evaluation_of B236 , R9 implies (for B238 being (Node of B236) holds (for B239 being (Node of B237) holds (B239 = B238 implies ( B237 | B239 ) is_an_evaluation_of ( B236 | B238 ) , R9))))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C216 being (c-Term of R6 , R7);
let C217 being  finite DecoratedTree;
assume that
L585: ( dom C217 ) = ( dom C216 )
and
L586: (for B240 being (Node of C217) holds ((for B241 being (SortSymbol of R5) holds (for B242 being (Element of ( R7 . B241 )) holds (( C216 . B240 ) = [ B242 , B241 ] implies ( C217 . B240 ) = ( ( R9 . B241 ) . B242 )))) & (for B243 being (SortSymbol of R5) holds (for B244 being (Element of ( (the Sorts of R6) . B243 )) holds (( C216 . B240 ) = [ B244 , B243 ] implies ( C217 . B240 ) = B244))) & (for B245 being (OperSymbol of R5) holds (( C216 . B240 ) = [ B245 , (the carrier of R5) ] implies ( C217 . B240 ) = ( ( Den (B245 , R6) ) . ( succ (C217 , B240) ) )))));
let C218 being (Node of C216);
let C219 being (Node of C217);
set D104 = ( C217 | C219 );
set D105 = ( C216 | C218 );
L587: ( dom D104 ) = ( ( dom C217 ) | C219 ) by TREES_2:def 10;
assume L588: C219 = C218;
thus L589: ( dom D104 ) = ( dom D105 ) by L588 , L585 , L587 , TREES_2:def 10;
let C220 being (Node of D104);
reconsider D106 = ( C219 ^ C220 ) as (Node of C217) by L587 , TREES_1:def 6;
reconsider D107 = ( C218 ^ C220 ) as (Node of C216) by L585 , L588 , L587 , TREES_1:def 6;
thus L590:now
let C221 being (SortSymbol of R5);
let C222 being (Element of ( R7 . C221 ));
assume L591: ( D105 . C220 ) = [ C222 , C221 ];
L592: ( C216 . D107 ) = [ C222 , C221 ] by L591 , L585 , L588 , L587 , TREES_2:def 10;
L593: ( C217 . D106 ) = ( ( R9 . C221 ) . C222 ) by L592 , L586 , L588;
thus L594: ( D104 . C220 ) = ( ( R9 . C221 ) . C222 ) by L593 , L587 , TREES_2:def 10;
end;
thus L595:now
let C223 being (SortSymbol of R5);
let C224 being (Element of ( (the Sorts of R6) . C223 ));
assume L596: ( D105 . C220 ) = [ C224 , C223 ];
L597: ( C216 . D107 ) = [ C224 , C223 ] by L596 , L585 , L588 , L587 , TREES_2:def 10;
L598: ( C217 . D106 ) = C224 by L597 , L586 , L588;
thus L599: ( D104 . C220 ) = C224 by L598 , L587 , TREES_2:def 10;
end;
let C225 being (OperSymbol of R5);
assume L600: ( D105 . C220 ) = [ C225 , (the carrier of R5) ];
L601: ( C216 . D107 ) = [ C225 , (the carrier of R5) ] by L600 , L585 , L588 , L587 , TREES_2:def 10;
L602: ( C217 . D106 ) = ( ( Den (C225 , R6) ) . ( succ (C217 , D106) ) ) by L601 , L586 , L588;
L603: ( D104 . C220 ) = ( ( Den (C225 , R6) ) . ( succ (C217 , ( C219 ^ C220 )) ) ) by L602 , L587 , TREES_2:def 10;
thus L604: thesis by L603 , TREES_9:31;
end;
theorem
L605: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B246 being (OperSymbol of R5) holds (for B247 being (ArgumentSeq of B246 , R6 , R7) holds (for B248 being  finite DecoratedTree holds (B248 is_an_evaluation_of (( ( Sym (B246 , ( (the Sorts of R6) \/ R7 )) ) -tree B247 ) qua (c-Term of R6 , R7)) , R9 implies (ex B249 being  DTree-yielding FinSequence st (( len B249 ) = ( len B247 ) & B248 = ( ( ( Den (B246 , R6) ) . ( roots B249 ) ) -tree B249 ) & (for B250 being Nat holds (for B251 being (c-Term of R6 , R7) holds ((B250 in ( dom B247 ) & B251 = ( B247 . B250 )) implies (ex B252 being  finite DecoratedTree st (B252 = ( B249 . B250 ) & B252 is_an_evaluation_of B251 , R9)))))))))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C226 being (OperSymbol of R5);
let C227 being (ArgumentSeq of C226 , R6 , R7);
let C228 being  finite DecoratedTree;
assume L606: C228 is_an_evaluation_of (( ( Sym (C226 , ( (the Sorts of R6) \/ R7 )) ) -tree C227 ) qua (c-Term of R6 , R7)) , R9;
reconsider D108 = ( {} ) as  empty (Element of ( dom C228 )) by TREES_1:22;
consider C229 being set, C230 being  DTree-yielding FinSequence such that L607: C228 = ( C229 -tree C230 ) by TREES_9:8;
L608: ( dom C228 ) = ( tree ( doms C230 ) ) by L607 , TREES_4:10;
take C230;
L609: ( len ( doms C230 ) ) = ( len C230 ) by TREES_3:38;
L610: ( Sym (C226 , ( (the Sorts of R6) \/ R7 )) ) = [ C226 , (the carrier of R5) ] by MSAFREE:def 9;
L611: ( dom C228 ) = ( dom ( [ C226 , (the carrier of R5) ] -tree C227 ) ) by L610 , L606 , L463;
L612: ( dom C228 ) = ( tree ( doms C227 ) ) by L611 , TREES_4:10;
L613: ( doms C230 ) = ( doms C227 ) by L612 , L608 , TREES_3:50;
thus L614: ( len C230 ) = ( len C227 ) by L613 , L609 , TREES_3:38;
L615: ( ( [ C226 , (the carrier of R5) ] -tree C227 ) . D108 ) = [ C226 , (the carrier of R5) ] by TREES_4:def 4;
L616: ( C228 . D108 ) = ( ( Den (C226 , R6) ) . ( succ (C228 , D108) ) ) by L615 , L610 , L606 , L463
.= ( ( Den (C226 , R6) ) . ( roots C230 ) ) by L607 , TREES_9:30;
thus L617: C228 = ( ( ( Den (C226 , R6) ) . ( roots C230 ) ) -tree C230 ) by L616 , L607 , TREES_4:def 4;
let C231 being Nat;
let C232 being (c-Term of R6 , R7);
assume that
L618: C231 in ( dom C227 )
and
L619: C232 = ( C227 . C231 );
reconsider D109 = ( {} ) as (Node of C232) by TREES_1:22;
consider C233 being (Element of ( NAT )) such that L620: C231 = ( C233 + 1 ) and L621: C233 < ( len C227 ) by L618 , L1;
L622: ( <* C233 *> ^ D109 ) = <* C233 *> by FINSEQ_1:34;
reconsider D110 = <* C233 *> as (Node of C228) by L622 , L611 , L619 , L620 , L621 , TREES_4:11;
take D111 = ( C228 | D110 );
L623: ( len ( doms C227 ) ) = ( len C227 ) by TREES_3:38;
thus L624: D111 = ( C230 . C231 ) by L623 , L607 , L613 , L609 , L620 , L621 , TREES_4:def 4;
reconsider D112 = D110 as (Node of ( [ C226 , (the carrier of R5) ] -tree C227 )) by L610 , L606 , L463;
L625: C232 = ( ( [ C226 , (the carrier of R5) ] -tree C227 ) | D112 ) by L619 , L620 , L621 , TREES_4:def 4;
thus L626: thesis by L625 , L610 , L606 , L584;
end;
theorem
L627: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R8 being (c-Term of R6 , R7) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (ex B253 being  finite DecoratedTree st B253 is_an_evaluation_of R8 , R9))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R8 being (c-Term of R6 , R7);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
defpred S3[ set ] means (ex B254 being (c-Term of R6 , R7) st (ex B255 being  finite DecoratedTree st (B254 = $1 & B255 is_an_evaluation_of B254 , R9)));
L628: (for B256 being (OperSymbol of R5) holds (for B257 being (ArgumentSeq of B256 , R6 , R7) holds ((for B258 being (c-Term of R6 , R7) holds (B258 in ( rng B257 ) implies S3[ B258 ])) implies S3[ ( ( Sym (B256 , ( (the Sorts of R6) \/ R7 )) ) -tree B257 ) ])))
proof
let C234 being (OperSymbol of R5);
let C235 being (ArgumentSeq of C234 , R6 , R7);
assume that
L629: (for B259 being (c-Term of R6 , R7) holds (B259 in ( rng C235 ) implies (ex B260 being (c-Term of R6 , R7) st (ex B261 being  finite DecoratedTree st (B260 = B259 & B261 is_an_evaluation_of B260 , R9)))));
defpred S4[ set , set ] means (ex B262 being (c-Term of R6 , R7) st (ex B263 being  finite DecoratedTree st ($2 = B263 & B262 = ( C235 . $1 ) & B263 is_an_evaluation_of B262 , R9)));
L630: (for B264 being set holds (B264 in ( dom C235 ) implies (ex B265 being set st S4[ B264 , B265 ])))
proof
let C236 being set;
assume L631: C236 in ( dom C235 );
L632: ( C235 . C236 ) in ( rng C235 ) by L631 , FUNCT_1:def 3;
L633: ( rng C235 ) c= ( R5 -Terms ( (the Sorts of R6) \/ R7 ) ) by FINSEQ_1:def 4;
reconsider D113 = ( C235 . C236 ) as (c-Term of R6 , R7) by L633 , L632;
L634: (ex B266 being (c-Term of R6 , R7) st (ex B267 being  finite DecoratedTree st (B266 = D113 & B267 is_an_evaluation_of B266 , R9))) by L629 , L632;
thus L635: thesis by L634;
end;
consider C237 being Function such that L636: (( dom C237 ) = ( dom C235 ) & (for B268 being set holds (B268 in ( dom C235 ) implies S4[ B268 , ( C237 . B268 ) ]))) from CLASSES1:sch 1(L630);
L637: ( dom C235 ) = ( Seg ( len C235 ) ) by FINSEQ_1:def 3;
reconsider D114 = C237 as FinSequence by L637 , L636 , FINSEQ_1:def 2;
L638: ( len C235 ) = ( len D114 ) by L636 , FINSEQ_3:29;
L639:
now
let C238 being set;
assume L640: C238 in ( dom D114 );
L641: (ex B269 being (c-Term of R6 , R7) st (ex B270 being  finite DecoratedTree st (( D114 . C238 ) = B270 & B269 = ( C235 . C238 ) & B270 is_an_evaluation_of B269 , R9))) by L640 , L636;
thus L642: ( D114 . C238 ) is DecoratedTree by L641;
end;
reconsider D115 = D114 as  DTree-yielding FinSequence by L639 , TREES_3:24;
L643:
now
let C239 being Nat;
let C240 being (c-Term of R6 , R7);
assume L644: C239 in ( dom C235 );
L645: (ex B271 being (c-Term of R6 , R7) st (ex B272 being  finite DecoratedTree st (( D115 . C239 ) = B272 & B271 = ( C235 . C239 ) & B272 is_an_evaluation_of B271 , R9))) by L644 , L636;
thus L646: (C240 = ( C235 . C239 ) implies (ex B273 being  finite DecoratedTree st (B273 = ( D115 . C239 ) & B273 is_an_evaluation_of C240 , R9))) by L645;
end;
L647: (ex B274 being  finite DecoratedTree st (B274 = ( ( ( Den (C234 , R6) ) . ( roots D115 ) ) -tree D115 ) & B274 is_an_evaluation_of (( ( Sym (C234 , ( (the Sorts of R6) \/ R7 )) ) -tree C235 ) qua (c-Term of R6 , R7)) , R9)) by L643 , L638 , L505;
thus L648: thesis by L647;
end;
L649: (for B275 being (SortSymbol of R5) holds (for B276 being (Element of ( R7 . B275 )) holds S3[ ( root-tree [ B276 , B275 ] ) ]))
proof
let C241 being (SortSymbol of R5);
let C242 being (Element of ( R7 . C241 ));
reconsider D116 = ( root-tree [ C242 , C241 ] ) as (c-Term of R6 , R7) by L164;
take D116;
take ( root-tree ( ( R9 . C241 ) . C242 ) );
thus L650: D116 = ( root-tree [ C242 , C241 ] );
thus L651: thesis by L484;
end;
L652: (for B277 being (SortSymbol of R5) holds (for B278 being (Element of ( (the Sorts of R6) . B277 )) holds S3[ ( root-tree [ B278 , B277 ] ) ]))
proof
let C243 being (SortSymbol of R5);
let C244 being (Element of ( (the Sorts of R6) . C243 ));
reconsider D117 = ( root-tree [ C244 , C243 ] ) as (c-Term of R6 , R7) by L154;
take D117;
take ( root-tree C244 );
thus L653: D117 = ( root-tree [ C244 , C243 ] );
thus L654: thesis by L465;
end;
L655: (for B279 being (c-Term of R6 , R7) holds S3[ B279 ]) from CTermInd(L652 , L649 , L628);
L656: (ex B280 being (c-Term of R6 , R7) st (ex B281 being  finite DecoratedTree st (B280 = R8 & B281 is_an_evaluation_of B280 , R9))) by L655;
thus L657: thesis by L656;
end;
theorem
L658: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R8 being (c-Term of R6 , R7) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B282 , B283 being  finite DecoratedTree holds ((B282 is_an_evaluation_of R8 , R9 & B283 is_an_evaluation_of R8 , R9) implies B282 = B283)))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R8 being (c-Term of R6 , R7);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
defpred S5[ (c-Term of R6 , R7) ] means (for B284 , B285 being  finite DecoratedTree holds ((B284 is_an_evaluation_of $1 , R9 & B285 is_an_evaluation_of $1 , R9) implies B284 = B285));
L659:
now
let C245 being (SortSymbol of R5);
let C246 being (Element of ( R7 . C245 ));
thus L660: S5[ ( C246 -term R6 ) ]
proof
let C247 , C248 being  finite DecoratedTree;
set D118 = ( C246 -term R6 );
assume that
L661: C247 is_an_evaluation_of D118 , R9
and
L662: C248 is_an_evaluation_of D118 , R9;
L663: ( dom C247 ) = ( dom D118 ) by L661 , L463;
L664: ( {} ) is (Node of C247) by TREES_1:22;
L665: ( ( root-tree [ C246 , C245 ] ) . ( {} ) ) = [ C246 , C245 ] by TREES_4:3;
L666: ( C247 . ( {} ) ) = ( ( R9 . C245 ) . C246 ) by L665 , L661 , L664 , L463;
L667: C247 = ( root-tree ( ( R9 . C245 ) . C246 ) ) by L666 , L663 , TREES_4:3 , TREES_4:5;
L668: ( dom C248 ) = ( dom D118 ) by L662 , L463;
L669: ( C248 . ( {} ) ) = ( ( R9 . C245 ) . C246 ) by L668 , L662 , L663 , L665 , L664 , L463;
thus L670: thesis by L669 , L668 , L667 , TREES_4:3 , TREES_4:5;
end;

end;
L661:
now
let C249 being (OperSymbol of R5);
let C250 being (ArgumentSeq of C249 , R6 , R7);
assume L662: (for B286 being (c-Term of R6 , R7) holds (B286 in ( rng C250 ) implies S5[ B286 ]));
thus L663: S5[ ( ( Sym (C249 , ( (the Sorts of R6) \/ R7 )) ) -tree C250 ) ]
proof
set D119 = ( ( Sym (C249 , ( (the Sorts of R6) \/ R7 )) ) -tree C250 );
let C251 , C252 being  finite DecoratedTree;
assume that
L664: C251 is_an_evaluation_of (D119 qua (c-Term of R6 , R7)) , R9
and
L665: C252 is_an_evaluation_of (D119 qua (c-Term of R6 , R7)) , R9;
consider C253 being  DTree-yielding FinSequence such that L666: ( len C253 ) = ( len C250 ) and L667: C251 = ( ( ( Den (C249 , R6) ) . ( roots C253 ) ) -tree C253 ) and L668: (for B287 being Nat holds (for B288 being (c-Term of R6 , R7) holds ((B287 in ( dom C250 ) & B288 = ( C250 . B287 )) implies (ex B289 being  finite DecoratedTree st (B289 = ( C253 . B287 ) & B289 is_an_evaluation_of B288 , R9))))) by L664 , L605;
consider C254 being  DTree-yielding FinSequence such that L669: ( len C254 ) = ( len C250 ) and L670: C252 = ( ( ( Den (C249 , R6) ) . ( roots C254 ) ) -tree C254 ) and L671: (for B290 being Nat holds (for B291 being (c-Term of R6 , R7) holds ((B290 in ( dom C250 ) & B291 = ( C250 . B290 )) implies (ex B292 being  finite DecoratedTree st (B292 = ( C254 . B290 ) & B292 is_an_evaluation_of B291 , R9))))) by L665 , L605;
L672:
now
let C255 being (Element of ( NAT ));
assume L673: C255 < ( len C250 );
reconsider D120 = ( C250 . ( C255 + 1 ) ) as (c-Term of R6 , R7) by L673 , L7;
L674: (ex B293 being  finite DecoratedTree st (B293 = ( C254 . ( C255 + 1 ) ) & B293 is_an_evaluation_of D120 , R9)) by L671 , L673 , L409;
L675: (ex B294 being  finite DecoratedTree st (B294 = ( C253 . ( C255 + 1 ) ) & B294 is_an_evaluation_of D120 , R9)) by L668 , L673 , L409;
thus L676: ( C253 . ( C255 + 1 ) ) = ( C254 . ( C255 + 1 ) ) by L675 , L662 , L673 , L674 , L409;
end;
L677:
now
let C256 being Nat;
assume L678: C256 in ( dom C253 );
L679: (ex B295 being (Element of ( NAT )) st (C256 = ( B295 + 1 ) & B295 < ( len C253 ))) by L678 , L1;
thus L680: ( C253 . C256 ) = ( C254 . C256 ) by L679 , L666 , L672;
end;
L681: ( dom C254 ) = ( Seg ( len C254 ) ) by FINSEQ_1:def 3;
L682: ( dom C253 ) = ( Seg ( len C253 ) ) by FINSEQ_1:def 3;
L683: C253 = C254 by L682 , L666 , L669 , L681 , L677 , FINSEQ_1:13;
thus L684: thesis by L683 , L667 , L670;
end;

end;
L664:
now
let C257 being (SortSymbol of R5);
let C258 being (Element of ( (the Sorts of R6) . C257 ));
thus L665: S5[ ( C258 -term (R6 , R7) ) ]
proof
let C259 , C260 being  finite DecoratedTree;
set D121 = ( C258 -term (R6 , R7) );
assume that
L666: C259 is_an_evaluation_of D121 , R9
and
L667: C260 is_an_evaluation_of D121 , R9;
L668: ( dom C259 ) = ( dom D121 ) by L666 , L463;
L669: ( {} ) is (Node of C259) by TREES_1:22;
L670: ( ( root-tree [ C258 , C257 ] ) . ( {} ) ) = [ C258 , C257 ] by TREES_4:3;
L671: ( C259 . ( {} ) ) = C258 by L670 , L666 , L669 , L463;
L672: C259 = ( root-tree C258 ) by L671 , L668 , TREES_4:3 , TREES_4:5;
L673: ( dom C260 ) = ( dom D121 ) by L667 , L463;
L674: ( C260 . ( {} ) ) = C258 by L673 , L667 , L668 , L670 , L669 , L463;
thus L675: thesis by L674 , L673 , L672 , TREES_4:3 , TREES_4:5;
end;

end;
L666: (for B296 being (c-Term of R6 , R7) holds S5[ B296 ]) from TermInd2(L664 , L659 , L661);
thus L667: thesis by L666;
end;
theorem
L668: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R8 being (c-Term of R6 , R7) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B297 being  finite DecoratedTree holds (B297 is_an_evaluation_of R8 , R9 implies ( B297 . ( {} ) ) in ( (the Sorts of R6) . ( the_sort_of R8 ) ))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R8 being (c-Term of R6 , R7);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
defpred S6[ (c-Term of R6 , R7) ] means (for B298 being  finite DecoratedTree holds (B298 is_an_evaluation_of $1 , R9 implies ( B298 . ( {} ) ) in ( (the Sorts of R6) . ( the_sort_of $1 ) )));
L669:
now
let C261 being (SortSymbol of R5);
let C262 being (Element of ( R7 . C261 ));
thus L670: S6[ ( C262 -term R6 ) ]
proof
let C263 being  finite DecoratedTree;
set D122 = ( C262 -term R6 );
assume L671: C263 is_an_evaluation_of D122 , R9;
L672: ( root-tree ( ( R9 . C261 ) . C262 ) ) is_an_evaluation_of D122 , R9 by L484;
L673: C263 = ( root-tree ( ( R9 . C261 ) . C262 ) ) by L672 , L671 , L658;
L674: ( C263 . ( {} ) ) = ( ( R9 . C261 ) . C262 ) by L673 , TREES_4:3;
L675: C261 = ( the_sort_of D122 ) by L299;
thus L676: thesis by L675 , L674;
end;

end;
L671:
now
let C264 being (OperSymbol of R5);
let C265 being (ArgumentSeq of C264 , R6 , R7);
assume L672: (for B299 being (c-Term of R6 , R7) holds (B299 in ( rng C265 ) implies S6[ B299 ]));
thus L673: S6[ ( ( Sym (C264 , ( (the Sorts of R6) \/ R7 )) ) -tree C265 ) ]
proof
let C266 being  finite DecoratedTree;
set D123 = ( ( Sym (C264 , ( (the Sorts of R6) \/ R7 )) ) -tree C265 );
L674: ( dom ( (the Sorts of R6) * (the ResultSort of R5) ) ) = (the carrier' of R5) by PARTFUN1:def 2;
assume L675: C266 is_an_evaluation_of (D123 qua (c-Term of R6 , R7)) , R9;
consider C267 being  DTree-yielding FinSequence such that L676: ( len C267 ) = ( len C265 ) and L677: C266 = ( ( ( Den (C264 , R6) ) . ( roots C267 ) ) -tree C267 ) and L678: (for B300 being Nat holds (for B301 being (c-Term of R6 , R7) holds ((B300 in ( dom C265 ) & B301 = ( C265 . B300 )) implies (ex B302 being  finite DecoratedTree st (B302 = ( C267 . B300 ) & B302 is_an_evaluation_of B301 , R9))))) by L675 , L605;
L679: ( C266 . ( {} ) ) = ( ( Den (C264 , R6) ) . ( roots C267 ) ) by L677 , TREES_4:def 4;
L680:
now
L681: ( rng ( the_arity_of C264 ) ) c= (the carrier of R5) by FINSEQ_1:def 4;
L682: ( dom (the Sorts of R6) ) = (the carrier of R5) by PARTFUN1:def 2;
L683: ( dom ( roots C267 ) ) = ( dom C267 ) by TREES_3:def 18;
thus L684: ( dom ( roots C267 ) ) = ( Seg ( len C267 ) ) by L683 , FINSEQ_1:def 3
.= ( Seg ( len ( the_arity_of C264 ) ) ) by L676 , L310
.= ( dom ( the_arity_of C264 ) ) by FINSEQ_1:def 3
.= ( dom ( (the Sorts of R6) * ( the_arity_of C264 ) ) ) by L682 , L681 , RELAT_1:27;
let C268 being set;
assume L685: C268 in ( dom ( (the Sorts of R6) * ( the_arity_of C264 ) ) );
consider C269 being (Element of ( NAT )) such that L686: C268 = ( C269 + 1 ) and L687: C269 < ( len C267 ) by L685 , L683 , L684 , L1;
L688: (ex B303 being DecoratedTree st (B303 = ( C267 . ( C269 + 1 ) ) & ( ( roots C267 ) . ( C269 + 1 ) ) = ( B303 . ( {} ) ))) by L683 , L684 , L685 , L686 , TREES_3:def 18;
L689: ( C269 + 1 ) in ( dom C265 ) by L676 , L687 , L409;
L690: (ex B304 being (c-Term of R6 , R7) st (B304 = ( C265 . ( C269 + 1 ) ) & B304 = ( (C265 qua (FinSequence of (( R5 -Terms ( (the Sorts of R6) \/ R7 ) ) qua non  empty set))) /. ( C269 + 1 ) ) & ( the_sort_of B304 ) = ( ( the_arity_of C264 ) . ( C269 + 1 ) ) & ( the_sort_of B304 ) = ( ( the_arity_of C264 ) /. ( C269 + 1 ) ))) by L689 , L310;
reconsider D124 = ( C265 . ( C269 + 1 ) ) as (c-Term of R6 , R7) by L676 , L687 , L7;
consider C270 being  finite DecoratedTree such that L691: C270 = ( C267 . ( C269 + 1 ) ) and L692: C270 is_an_evaluation_of D124 , R9 by L676 , L678 , L687 , L409;
L693: ( C270 . ( {} ) ) in ( (the Sorts of R6) . ( the_sort_of D124 ) ) by L672 , L676 , L687 , L692 , L409;
thus L694: ( ( roots C267 ) . C268 ) in ( ( (the Sorts of R6) * ( the_arity_of C264 ) ) . C268 ) by L693 , L685 , L686 , L688 , L691 , L690 , FUNCT_1:12;
end;
L695: ( roots C267 ) in ( product ( (the Sorts of R6) * ( the_arity_of C264 ) ) ) by L680 , CARD_3:9;
L696: ( roots C267 ) in ( ( (the Sorts of R6) # ) . ( the_arity_of C264 ) ) by L695 , FINSEQ_2:def 5;
L697: ( roots C267 ) in ( ( (the Sorts of R6) # ) . ( (the Arity of R5) . C264 ) ) by L696 , MSUALG_1:def 1;
L698: ( dom ( ( (the Sorts of R6) # ) * (the Arity of R5) ) ) = (the carrier' of R5) by PARTFUN1:def 2;
L699: ( roots C267 ) in ( ( ( (the Sorts of R6) # ) * (the Arity of R5) ) . C264 ) by L698 , L697 , FUNCT_1:12;
L700: ( roots C267 ) in ( Args (C264 , R6) ) by L699 , MSUALG_1:def 4;
L701: ( Result (C264 , R6) ) = ( ( (the Sorts of R6) * (the ResultSort of R5) ) . C264 ) by MSUALG_1:def 5
.= ( (the Sorts of R6) . ( (the ResultSort of R5) . C264 ) ) by L674 , FUNCT_1:12
.= ( (the Sorts of R6) . ( the_result_sort_of C264 ) ) by MSUALG_1:def 2
.= ( (the Sorts of R6) . ( the_sort_of (D123 qua (c-Term of R6 , R7)) ) ) by L303;
thus L702: thesis by L701 , L679 , L700 , FUNCT_2:5;
end;

end;
L674:
now
let C271 being (SortSymbol of R5);
let C272 being (Element of ( (the Sorts of R6) . C271 ));
thus L675: S6[ ( C272 -term (R6 , R7) ) ]
proof
let C273 being  finite DecoratedTree;
set D125 = ( C272 -term (R6 , R7) );
assume L676: C273 is_an_evaluation_of D125 , R9;
L677: ( root-tree C272 ) is_an_evaluation_of D125 , R9 by L465;
L678: C273 = ( root-tree C272 ) by L677 , L676 , L658;
L679: ( C273 . ( {} ) ) = C272 by L678 , TREES_4:3;
L680: C271 = ( the_sort_of D125 ) by L274;
thus L681: thesis by L680 , L679;
end;

end;
L676: (for B305 being (c-Term of R6 , R7) holds S6[ B305 ]) from TermInd2(L674 , L669 , L671);
thus L677: thesis by L676;
end;
definition
let C274 being non  void non  empty ManySortedSign;
let C275 being  non-empty MSAlgebra over C274;
let C276 being (Variables of C275);
let C277 being (c-Term of C275 , C276);
let C278 being (ManySortedFunction of C276 , (the Sorts of C275));
func C277 @ C278 -> (Element of ( (the Sorts of C275) . ( the_sort_of C277 ) )) means 
:L678: (ex B306 being  finite DecoratedTree st (B306 is_an_evaluation_of C277 , C278 & it = ( B306 . ( {} ) )));
existence
proof
consider C279 being  finite DecoratedTree such that L679: C279 is_an_evaluation_of C277 , C278 by L627;
reconsider D126 = ( C279 . ( {} ) ) as (Element of ( (the Sorts of C275) . ( the_sort_of C277 ) )) by L679 , L668;
take D126;
take C279;
thus L680: thesis by L679;
end;
uniqueness by L658;
end;
theorem
L682: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for R10 being (c-Term of R6 , R7) holds (for B307 being  finite DecoratedTree holds (B307 is_an_evaluation_of R10 , R9 implies ( R10 @ R9 ) = ( B307 . ( {} ) ))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let R10 being (c-Term of R6 , R7);
L683: (ex B308 being  finite DecoratedTree st (B308 is_an_evaluation_of R10 , R9 & ( R10 @ R9 ) = ( B308 . ( {} ) ))) by L678;
let C280 being  finite DecoratedTree;
assume L684: C280 is_an_evaluation_of R10 , R9;
thus L685: thesis by L684 , L683 , L658;
end;
theorem
L686: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for R10 being (c-Term of R6 , R7) holds (for B309 being  finite DecoratedTree holds (B309 is_an_evaluation_of R10 , R9 implies (for B310 being (Node of R10) holds ( B309 . B310 ) = ( ( R10 | B310 ) @ R9 )))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let R10 being (c-Term of R6 , R7);
let C281 being  finite DecoratedTree;
assume that
L687: C281 is_an_evaluation_of R10 , R9;
let C282 being (Node of R10);
reconsider D127 = C282 as (Node of C281) by L687 , L463;
L688: ( D127 ^ ( {} ) ) = D127 by FINSEQ_1:34;
L689: ( {} ) in ( ( dom C281 ) | C282 ) by TREES_1:22;
L690: ( ( R10 | C282 ) @ R9 ) = ( ( C281 | D127 ) . ( <*> ( NAT ) ) ) by L687 , L584 , L682;
thus L691: thesis by L690 , L688 , L689 , TREES_2:def 10;
end;
theorem
L692: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B311 being (SortSymbol of R5) holds (for B312 being (Element of ( (the Sorts of R6) . B311 )) holds ( ( B312 -term (R6 , R7) ) @ R9 ) = B312))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C283 being (SortSymbol of R5);
let C284 being (Element of ( (the Sorts of R6) . C283 ));
L693: C284 = ( ( root-tree C284 ) . ( {} ) ) by TREES_4:3;
thus L694: thesis by L693 , L465 , L682;
end;
theorem
L695: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B313 being (SortSymbol of R5) holds (for B314 being (Element of ( R7 . B313 )) holds ( ( B314 -term R6 ) @ R9 ) = ( ( R9 . B313 ) . B314 )))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C285 being (SortSymbol of R5);
let C286 being (Element of ( R7 . C285 ));
L696: ( ( R9 . C285 ) . C286 ) = ( ( root-tree ( ( R9 . C285 ) . C286 ) ) . ( {} ) ) by TREES_4:3;
thus L697: thesis by L696 , L484 , L682;
end;
theorem
L698: (for R5 being non  void non  empty ManySortedSign holds (for R6 being  non-empty MSAlgebra over R5 holds (for R7 being (Variables of R6) holds (for R9 being (ManySortedFunction of R7 , (the Sorts of R6)) holds (for B315 being (OperSymbol of R5) holds (for B316 being (ArgumentSeq of B315 , R6 , R7) holds (for B317 being FinSequence holds ((( len B317 ) = ( len B316 ) & (for B318 being Nat holds (B318 in ( dom B316 ) implies (for B319 being (c-Term of R6 , R7) holds (B319 = ( B316 . B318 ) implies ( B317 . B318 ) = ( B319 @ R9 )))))) implies ( (( ( Sym (B315 , ( (the Sorts of R6) \/ R7 )) ) -tree B316 ) qua (c-Term of R6 , R7)) @ R9 ) = ( ( Den (B315 , R6) ) . B317 )))))))))
proof
let R5 being non  void non  empty ManySortedSign;
let R6 being  non-empty MSAlgebra over R5;
let R7 being (Variables of R6);
let R9 being (ManySortedFunction of R7 , (the Sorts of R6));
let C287 being (OperSymbol of R5);
let C288 being (ArgumentSeq of C287 , R6 , R7);
let C289 being FinSequence;
assume that
L699: ( len C289 ) = ( len C288 )
and
L700: (for B320 being Nat holds (B320 in ( dom C288 ) implies (for B321 being (c-Term of R6 , R7) holds (B321 = ( C288 . B320 ) implies ( C289 . B320 ) = ( B321 @ R9 )))));
consider C290 being  finite DecoratedTree such that L701: C290 is_an_evaluation_of ( ( Sym (C287 , ( (the Sorts of R6) \/ R7 )) ) -tree C288 ) , R9 by L627;
consider C291 being  DTree-yielding FinSequence such that L702: ( len C291 ) = ( len C288 ) and L703: C290 = ( ( ( Den (C287 , R6) ) . ( roots C291 ) ) -tree C291 ) and L704: (for B322 being Nat holds (for B323 being (c-Term of R6 , R7) holds ((B322 in ( dom C288 ) & B323 = ( C288 . B322 )) implies (ex B324 being  finite DecoratedTree st (B324 = ( C291 . B322 ) & B324 is_an_evaluation_of B323 , R9))))) by L701 , L605;
L705:
now
thus L706: (( dom C288 ) = ( dom C288 ) & ( dom C289 ) = ( dom C288 ) & ( dom C291 ) = ( dom C288 )) by L699 , L702 , FINSEQ_3:29;
let C292 being (Element of ( NAT ));
assume L707: C292 in ( dom C291 );
reconsider D128 = ( C288 . C292 ) as (c-Term of R6 , R7) by L707 , L706 , L322;
consider C293 being  finite DecoratedTree such that L708: C293 = ( C291 . C292 ) and L709: C293 is_an_evaluation_of D128 , R9 by L704 , L706 , L707;
reconsider D129 = C293 as DecoratedTree;
take D130 = D129;
thus L710: D130 = ( C291 . C292 ) by L708;
thus L711: ( C289 . C292 ) = ( D128 @ R9 ) by L700 , L706 , L707
.= ( D130 . ( {} ) ) by L709 , L682;
end;
L712: C289 = ( roots C291 ) by L705 , TREES_3:def 18;
thus L713: ( (( ( Sym (C287 , ( (the Sorts of R6) \/ R7 )) ) -tree C288 ) qua (c-Term of R6 , R7)) @ R9 ) = ( ( ( ( Den (C287 , R6) ) . C289 ) -tree C291 ) . ( {} ) ) by L712 , L701 , L703 , L682
.= ( ( Den (C287 , R6) ) . C289 ) by TREES_4:def 4;
end;
