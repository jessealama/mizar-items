:: Semantic of MML Query
::  by Grzegorz Bancerek
:: 
:: Received December 18, 2011
:: Copyright (c) 2011-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies MMLQUERY, TARSKI, XBOOLE_0, SUBSET_1, SETFAM_1, RELAT_1, FUNCT_1,
      FUNCOP_1, ZFMISC_1, AOFA_000, CARD_1, FINSEQ_1, NAT_1, NUMBERS, XXREAL_0,
      CARD_3, ORDINAL1, FINSET_1, STRUCT_0, QC_LANG1, ARYTM_3;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, SETFAM_1, RELAT_1, FUNCT_1,
      RELSET_1, FUNCOP_1, ORDINAL1, FINSET_1, CARD_1, CARD_3, STRUCT_0,
      XCMPLX_0, XXREAL_0, NUMBERS, NAT_1, FINSEQ_1, AOFA_000, FINSEQ_4, PROB_3;
 constructors TARSKI, SUBSET_1, SETFAM_1, RELSET_1, FUNCT_1, FUNCOP_1,
      FINSEQ_1, CARD_1, XXREAL_0, CARD_3, FINSET_1, STRUCT_0, WELLORD2,
      FINSEQ_4, XCMPLX_0, NAT_1, PROB_3;
 registrations SUBSET_1, RELSET_1, ORDINAL1, FINSET_1, XXREAL_0, FINSEQ_1,
      CARD_1, XCMPLX_0, STRUCT_0;
 requirements BOOLE, SUBSET, NUMERALS, ARITHM;
 definitions TARSKI, XBOOLE_0, RELAT_1, STRUCT_0;
 theorems TARSKI, XBOOLE_0, XBOOLE_1, ZFMISC_1, RELAT_1, SYSREL, SETFAM_1,
      FUNCOP_1, XXREAL_0, CARD_1, FINSEQ_1, NAT_1, CARD_FIN, FUNCT_1, CARD_5,
      FINSEQ_2, CARD_3, RELSET_2, ORDINAL1, ORDINAL3, XTUPLE_0;
 schemes RELAT_1, NAT_1;

begin
definition
let C1 being set;
mode List of C1
 is (Subset of C1);
mode Operation of C1
 is (Relation of C1);
end;
definition
let C2 , C3 , C4 being set;
pred C2 , C3 in C4
means
:L2: [ C2 , C3 ] in C4
;end;
notation
let C5 , C6 , C7 being set;
antonym C5 , C6 nin C7 for C5 , C6 in C7;
end;
theorem
L5: (for B1 , B2 being Relation holds (B1 c= B2 iff (for R3 being set holds ( Im (B1 , R3) ) c= ( Im (B2 , R3) ))))
proof
let C8 , C9 being Relation;
thus L6:now
assume L7: C8 c= C9;
let R3 being set;
thus L8: ( Im (C8 , R3) ) c= ( Im (C9 , R3) )
proof
let R4 being set;
assume L9: R4 in ( Im (C8 , R3) );
consider C10 being set such that L10: ([ C10 , R4 ] in C8 & C10 in { R3 }) by L9 , RELAT_1:def 13;
thus L11: thesis by L7 , L10 , RELAT_1:def 13;
end;

end;
assume L9: (for R3 being set holds ( Im (C8 , R3) ) c= ( Im (C9 , R3) ));
let C11 , C12 being set;
assume L10: [ C11 , C12 ] in C8;
L11: (C12 in ( Im (C8 , C11) ) & ( Im (C8 , C11) ) c= ( Im (C9 , C11) )) by L10 , L9 , RELAT_1:169;
thus L12: thesis by L11 , RELAT_1:169;
end;
notation
let R1 being set;
let R11 being (Operation of R1);
let R10 being (Element of R1);
synonym R10 . R11 for Im (R11 , R10);
end;
definition
let R1 being set;
let R11 being (Operation of R1);
let R10 being (Element of R1);
redefine func R10 . R11 -> (List of R1);

coherence
proof
L14: ( R10 . R11 ) = ( R11 .: { R10 } );
thus L15: ( R10 . R11 ) is (Subset of R1) by L14;
end;
end;
theorem
L17: (for R1 being set holds (for R10 being (Element of R1) holds (for R11 being (Operation of R1) holds (for R17 being (Element of R1) holds (R10 , R17 in R11 iff R17 in ( R10 . R11 ))))))
proof
let R1 being set;
let R10 being (Element of R1);
let R11 being (Operation of R1);
let R17 being (Element of R1);
L18: (R10 , R17 in R11 iff [ R10 , R17 ] in R11) by L2;
thus L19: thesis by L18 , RELAT_1:169;
end;
notation
let R1 being set;
let R11 being (Operation of R1);
let R5 being (List of R1);
synonym R5 | R11 for R11 .: R5;
end;
definition
let R1 being set;
let R11 being (Operation of R1);
let R5 being (List of R1);
redefine func R5 | R11 -> (List of R1) equals 
( union { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } );
coherence
proof
thus L21: ( R11 .: R5 ) is (Subset of R1);
end;
compatibility
proof
L22: ( union { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } ) = ( R5 | R11 )
proof
thus L23: ( union { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } ) c= ( R5 | R11 )
proof
let C13 being set;
assume L24: C13 in ( union { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } );
consider C14 being set such that L25: (C13 in C14 & C14 in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 }) by L24 , TARSKI:def 4;
consider R10 being (Element of R1) such that L26: (C14 = ( R10 . R11 ) & R10 in R5) by L25;
L27: [ R10 , C13 ] in R11 by L25 , L26 , RELAT_1:169;
thus L28: thesis by L27 , L26 , RELAT_1:def 13;
end;

thus L29: ( R5 | R11 ) c= ( union { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } )
proof
let C15 being set;
assume L30: C15 in ( R5 | R11 );
consider C16 being set such that L31: ([ C16 , C15 ] in R11 & C16 in R5) by L30 , RELAT_1:def 13;
reconsider D1 = C16 as (Element of R1) by L31;
L32: (C15 in ( D1 . R11 ) & ( D1 . R11 ) in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 }) by L31 , RELAT_1:169;
thus L33: thesis by L32 , TARSKI:def 4;
end;

end;
thus L30: thesis by L22;
end;
func R5 \& R11 -> (List of R1) equals 
( meet { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } );
coherence
proof
L31: ( meet { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } ) c= R1
proof
let C17 being set;
assume L32: C17 in ( meet { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } );
L33: { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } <> ( {} ) by L32 , SETFAM_1:def 1;
consider C18 being set such that L34: C18 in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R5 } by L33 , XBOOLE_0:def 1;
consider R10 being (Element of R1) such that L35: (C18 = ( R10 . R11 ) & R10 in R5) by L34;
L36: C17 in ( R10 . R11 ) by L32 , L34 , L35 , SETFAM_1:def 1;
thus L37: thesis by L36;
end;
thus L38: thesis by L31;
end;
func R5 WHERE R11 -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (ex R17 being (Element of R1) st (R10 , R17 in R11 & R10 in R5)) };
coherence
proof
L39: { R10 where R10 is (Element of R1) : (ex R17 being (Element of R1) st (R10 , R17 in R11 & R10 in R5)) } c= R1
proof
let C19 being set;
assume L40: C19 in { R10 where R10 is (Element of R1) : (ex R17 being (Element of R1) st (R10 , R17 in R11 & R10 in R5)) };
consider R10 being (Element of R1) such that L41: (C19 = R10 & (ex R17 being (Element of R1) st (R10 , R17 in R11 & R10 in R5))) by L40;
thus L42: thesis by L41;
end;
thus L43: thesis by L39;
end;
let C20 being (Operation of R1);
func R5 WHEREeq (R11 , C20) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) = ( card ( R10 . C20 ) ) & R10 in R5) };
coherence
proof
L44: { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) = ( card ( R10 . C20 ) ) & R10 in R5) } c= R1
proof
let C21 being set;
assume L45: C21 in { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) = ( card ( R10 . C20 ) ) & R10 in R5) };
L46: (ex R10 being (Element of R1) st (C21 = R10 & ( card ( R10 . R11 ) ) = ( card ( R10 . C20 ) ) & R10 in R5)) by L45;
thus L47: thesis by L46;
end;
thus L48: thesis by L44;
end;
func R5 WHEREle (R11 , C20) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) c= ( card ( R10 . C20 ) ) & R10 in R5) };
coherence
proof
L49: { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) c= ( card ( R10 . C20 ) ) & R10 in R5) } c= R1
proof
let C22 being set;
assume L50: C22 in { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) c= ( card ( R10 . C20 ) ) & R10 in R5) };
L51: (ex R10 being (Element of R1) st (C22 = R10 & ( card ( R10 . R11 ) ) c= ( card ( R10 . C20 ) ) & R10 in R5)) by L50;
thus L52: thesis by L51;
end;
thus L53: thesis by L49;
end;
func R5 WHEREge (R11 , C20) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . C20 ) ) c= ( card ( R10 . R11 ) ) & R10 in R5) };
coherence
proof
L54: { R10 where R10 is (Element of R1) : (( card ( R10 . C20 ) ) c= ( card ( R10 . R11 ) ) & R10 in R5) } c= R1
proof
let C23 being set;
assume L55: C23 in { R10 where R10 is (Element of R1) : (( card ( R10 . C20 ) ) c= ( card ( R10 . R11 ) ) & R10 in R5) };
L56: (ex R10 being (Element of R1) st (C23 = R10 & ( card ( R10 . C20 ) ) c= ( card ( R10 . R11 ) ) & R10 in R5)) by L55;
thus L57: thesis by L56;
end;
thus L58: thesis by L54;
end;
func R5 WHERElt (R11 , C20) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) in ( card ( R10 . C20 ) ) & R10 in R5) };
coherence
proof
L59: { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) in ( card ( R10 . C20 ) ) & R10 in R5) } c= R1
proof
let C24 being set;
assume L60: C24 in { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) in ( card ( R10 . C20 ) ) & R10 in R5) };
L61: (ex R10 being (Element of R1) st (C24 = R10 & ( card ( R10 . R11 ) ) in ( card ( R10 . C20 ) ) & R10 in R5)) by L60;
thus L62: thesis by L61;
end;
thus L63: thesis by L59;
end;
func R5 WHEREgt (R11 , C20) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . C20 ) ) in ( card ( R10 . R11 ) ) & R10 in R5) };
coherence
proof
L64: { R10 where R10 is (Element of R1) : (( card ( R10 . C20 ) ) in ( card ( R10 . R11 ) ) & R10 in R5) } c= R1
proof
let C25 being set;
assume L65: C25 in { R10 where R10 is (Element of R1) : (( card ( R10 . C20 ) ) in ( card ( R10 . R11 ) ) & R10 in R5) };
L66: (ex R10 being (Element of R1) st (C25 = R10 & ( card ( R10 . C20 ) ) in ( card ( R10 . R11 ) ) & R10 in R5)) by L65;
thus L67: thesis by L66;
end;
thus L68: thesis by L64;
end;
end;
definition
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
let R18 being Nat;
func R5 WHEREeq (R11 , R18) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) = R18 & R10 in R5) };
coherence
proof
L70: { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) = R18 & R10 in R5) } c= R1
proof
let C26 being set;
assume L71: C26 in { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) = R18 & R10 in R5) };
L72: (ex R10 being (Element of R1) st (C26 = R10 & ( card ( R10 . R11 ) ) = R18 & R10 in R5)) by L71;
thus L73: thesis by L72;
end;
thus L74: thesis by L70;
end;
func R5 WHEREle (R11 , R18) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) c= R18 & R10 in R5) };
coherence
proof
L75: { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) c= R18 & R10 in R5) } c= R1
proof
let C27 being set;
assume L76: C27 in { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) c= R18 & R10 in R5) };
L77: (ex R10 being (Element of R1) st (C27 = R10 & ( card ( R10 . R11 ) ) c= R18 & R10 in R5)) by L76;
thus L78: thesis by L77;
end;
thus L79: thesis by L75;
end;
func R5 WHEREge (R11 , R18) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (R18 c= ( card ( R10 . R11 ) ) & R10 in R5) };
coherence
proof
L80: { R10 where R10 is (Element of R1) : (R18 c= ( card ( R10 . R11 ) ) & R10 in R5) } c= R1
proof
let C28 being set;
assume L81: C28 in { R10 where R10 is (Element of R1) : (R18 c= ( card ( R10 . R11 ) ) & R10 in R5) };
L82: (ex R10 being (Element of R1) st (C28 = R10 & R18 c= ( card ( R10 . R11 ) ) & R10 in R5)) by L81;
thus L83: thesis by L82;
end;
thus L84: thesis by L80;
end;
func R5 WHERElt (R11 , R18) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) in R18 & R10 in R5) };
coherence
proof
L85: { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) in R18 & R10 in R5) } c= R1
proof
let C29 being set;
assume L86: C29 in { R10 where R10 is (Element of R1) : (( card ( R10 . R11 ) ) in R18 & R10 in R5) };
L87: (ex R10 being (Element of R1) st (C29 = R10 & ( card ( R10 . R11 ) ) in R18 & R10 in R5)) by L86;
thus L88: thesis by L87;
end;
thus L89: thesis by L85;
end;
func R5 WHEREgt (R11 , R18) -> (List of R1) equals 
{ R10 where R10 is (Element of R1) : (R18 in ( card ( R10 . R11 ) ) & R10 in R5) };
coherence
proof
L90: { R10 where R10 is (Element of R1) : (R18 in ( card ( R10 . R11 ) ) & R10 in R5) } c= R1
proof
let C30 being set;
assume L91: C30 in { R10 where R10 is (Element of R1) : (R18 in ( card ( R10 . R11 ) ) & R10 in R5) };
L92: (ex R10 being (Element of R1) st (C30 = R10 & R18 in ( card ( R10 . R11 ) ) & R10 in R5)) by L91;
thus L93: thesis by L92;
end;
thus L94: thesis by L90;
end;
end;
theorem
L96: (for R1 being set holds (for R5 being (List of R1) holds (for R10 being (Element of R1) holds (for R11 being (Operation of R1) holds (R10 in ( R5 WHERE R11 ) iff (R10 in R5 & ( R10 . R11 ) <> ( {} )))))))
proof
let R1 being set;
let R5 being (List of R1);
let R10 being (Element of R1);
let R11 being (Operation of R1);
thus L97:now
assume L98: R10 in ( R5 WHERE R11 );
consider R17 being (Element of R1) such that L99: (R10 = R17 & (ex R15 being (Element of R1) st (R17 , R15 in R11 & R17 in R5))) by L98;
thus L100: (R10 in R5 & ( R10 . R11 ) <> ( {} )) by L99 , L17;
end;
assume L101: (R10 in R5 & ( R10 . R11 ) <> ( {} ));
set D2 = the (Element of ( R10 . R11 ));
L102: D2 in ( R10 . R11 ) by L101;
reconsider D3 = D2 as (Element of R1) by L102;
L103: R10 , D3 in R11 by L101 , L17;
thus L104: thesis by L103 , L101;
end;
theorem
L105: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds ( R5 WHERE R11 ) c= R5)))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
let R3 being set;
thus L106: thesis by L96;
end;
theorem
L107: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds (R5 c= ( dom R11 ) implies ( R5 WHERE R11 ) = R5))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
assume L108: R5 c= ( dom R11 );
thus L109: ( R5 WHERE R11 ) c= R5 by L105;
let R3 being set;
assume L110: R3 in R5;
reconsider D4 = R3 as (Element of R1) by L110;
L111: ( D4 . R11 ) <> ( {} ) by L108 , L110 , RELAT_1:170;
thus L112: thesis by L111 , L110 , L96;
end;
theorem
L113: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R18 being Nat holds ((R18 <> ( 0 ) & R6 c= R7) implies ( R6 WHEREge (R11 , R18) ) c= ( R7 WHERE R11 )))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R18 being Nat;
assume L114: (R18 <> ( 0 ) & R6 c= R7);
let R3 being set;
assume L115: R3 in ( R6 WHEREge (R11 , R18) );
consider R10 being (Element of R1) such that L116: (R3 = R10 & R18 c= ( card ( R10 . R11 ) ) & R10 in R6) by L115;
L117: ( R10 . R11 ) <> ( {} ) by L114 , L116;
thus L118: thesis by L117 , L114 , L116 , L96;
end;
theorem
L119: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds ( R5 WHEREge (R11 , 1) ) = ( R5 WHERE R11 ))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
thus L120: ( R5 WHEREge (R11 , 1) ) c= ( R5 WHERE R11 ) by L113;
let R3 being set;
assume L121: R3 in ( R5 WHERE R11 );
reconsider D5 = R3 as (Element of R1) by L121;
L122: (( D5 . R11 ) <> ( {} ) & D5 in R5) by L121 , L96;
L123: ( succ ( 0 ) ) c= ( card ( D5 . R11 ) ) by L122 , ORDINAL1:21 , ORDINAL3:8;
thus L124: thesis by L123 , L122;
end;
theorem
L125: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R18 being Nat holds (R6 c= R7 implies ( R6 WHEREgt (R11 , R18) ) c= ( R7 WHERE R11 )))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R18 being Nat;
assume L126: R6 c= R7;
let R3 being set;
assume L127: R3 in ( R6 WHEREgt (R11 , R18) );
consider R10 being (Element of R1) such that L128: (R3 = R10 & R18 in ( card ( R10 . R11 ) ) & R10 in R6) by L127;
L129: ( R10 . R11 ) <> ( {} ) by L128;
thus L130: thesis by L129 , L126 , L128 , L96;
end;
theorem
L131: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds ( R5 WHEREgt (R11 , ( 0 )) ) = ( R5 WHERE R11 ))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
thus L132: ( R5 WHEREgt (R11 , ( 0 )) ) c= ( R5 WHERE R11 ) by L125;
let R3 being set;
assume L133: R3 in ( R5 WHERE R11 );
reconsider D6 = R3 as (Element of R1) by L133;
L134: (( D6 . R11 ) <> ( {} ) & D6 in R5) by L133 , L96;
L135: ( 0 ) in ( card ( D6 . R11 ) ) by L134 , ORDINAL3:8;
thus L136: thesis by L135 , L134;
end;
theorem
L137: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R18 being Nat holds ((R18 <> ( 0 ) & R6 c= R7) implies ( R6 WHEREeq (R11 , R18) ) c= ( R7 WHERE R11 )))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R18 being Nat;
assume L138: (R18 <> ( 0 ) & R6 c= R7);
let R3 being set;
assume L139: R3 in ( R6 WHEREeq (R11 , R18) );
consider R10 being (Element of R1) such that L140: (R3 = R10 & ( card ( R10 . R11 ) ) = R18 & R10 in R6) by L139;
L141: ( R10 . R11 ) <> ( {} ) by L138 , L140;
thus L142: thesis by L141 , L138 , L140 , L96;
end;
theorem
L143: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds (for R18 being Nat holds ( R5 WHEREge (R11 , ( R18 + 1 )) ) = ( R5 WHEREgt (R11 , R18) )))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
let R18 being Nat;
thus L144: ( R5 WHEREge (R11 , ( R18 + 1 )) ) c= ( R5 WHEREgt (R11 , R18) )
proof
let R3 being set;
assume L145: R3 in ( R5 WHEREge (R11 , ( R18 + 1 )) );
consider R10 being (Element of R1) such that L146: (R3 = R10 & ( R18 + 1 ) c= ( card ( R10 . R11 ) ) & R10 in R5) by L145;
L147: ( R18 + 1 ) = ( succ R18 ) by NAT_1:38;
L148: R18 in ( card ( R10 . R11 ) ) by L147 , L146 , ORDINAL1:21;
thus L149: thesis by L148 , L146;
end;

let R3 being set;
assume L150: R3 in ( R5 WHEREgt (R11 , R18) );
consider R10 being (Element of R1) such that L151: (R3 = R10 & R18 in ( card ( R10 . R11 ) ) & R10 in R5) by L150;
L152: ( R18 + 1 ) = ( succ R18 ) by NAT_1:38;
L153: ( R18 + 1 ) c= ( card ( R10 . R11 ) ) by L152 , L151 , ORDINAL1:21;
thus L154: thesis by L153 , L151;
end;
theorem
L155: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds (for R18 being Nat holds ( R5 WHEREle (R11 , R18) ) = ( R5 WHERElt (R11 , ( R18 + 1 )) )))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
let R18 being Nat;
thus L156: ( R5 WHEREle (R11 , R18) ) c= ( R5 WHERElt (R11 , ( R18 + 1 )) )
proof
let R3 being set;
assume L157: R3 in ( R5 WHEREle (R11 , R18) );
consider R10 being (Element of R1) such that L158: (R3 = R10 & ( card ( R10 . R11 ) ) c= R18 & R10 in R5) by L157;
L159: ( R18 + 1 ) = ( succ R18 ) by NAT_1:38;
L160: ( card ( R10 . R11 ) ) in ( R18 + 1 ) by L159 , L158 , ORDINAL1:22;
thus L161: thesis by L160 , L158;
end;

let R3 being set;
assume L162: R3 in ( R5 WHERElt (R11 , ( R18 + 1 )) );
consider R10 being (Element of R1) such that L163: (R3 = R10 & ( card ( R10 . R11 ) ) in ( R18 + 1 ) & R10 in R5) by L162;
L164: ( R18 + 1 ) = ( succ R18 ) by NAT_1:38;
L165: ( card ( R10 . R11 ) ) c= R18 by L164 , L163 , ORDINAL1:22;
thus L166: thesis by L165 , L163;
end;
theorem
L167: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R18 being Nat holds (for R19 being Nat holds ((R18 <= R19 & R6 c= R7 & R12 c= R13) implies ( R6 WHEREge (R12 , R19) ) c= ( R7 WHEREge (R13 , R18) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R18 being Nat;
let R19 being Nat;
assume L168: (R18 <= R19 & R6 c= R7 & R12 c= R13);
let R3 being set;
assume L169: R3 in ( R6 WHEREge (R12 , R19) );
consider R10 being (Element of R1) such that L170: (R3 = R10 & R19 c= ( card ( R10 . R12 ) ) & R10 in R6) by L169;
L171: (R18 c= R19 & ( R10 . R12 ) c= ( R10 . R13 )) by L168 , L5 , NAT_1:39;
L172: (R18 c= ( card ( R10 . R12 ) ) & ( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) )) by L171 , L170 , CARD_1:11 , XBOOLE_1:1;
L173: R18 c= ( card ( R10 . R13 ) ) by L172 , XBOOLE_1:1;
thus L174: thesis by L173 , L168 , L170;
end;
theorem
L175: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R18 being Nat holds (for R19 being Nat holds ((R18 <= R19 & R6 c= R7 & R12 c= R13) implies ( R6 WHEREgt (R12 , R19) ) c= ( R7 WHEREgt (R13 , R18) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R18 being Nat;
let R19 being Nat;
assume L176: (R18 <= R19 & R6 c= R7 & R12 c= R13);
let R3 being set;
assume L177: R3 in ( R6 WHEREgt (R12 , R19) );
consider R10 being (Element of R1) such that L178: (R3 = R10 & R19 in ( card ( R10 . R12 ) ) & R10 in R6) by L177;
L179: (R18 c= R19 & ( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) )) by L176 , CARD_1:11 , NAT_1:39 , L5;
L180: R18 in ( card ( R10 . R13 ) ) by L179 , L178 , ORDINAL1:12;
thus L181: thesis by L180 , L176 , L178;
end;
theorem
L182: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R18 being Nat holds (for R19 being Nat holds ((R18 <= R19 & R6 c= R7 & R12 c= R13) implies ( R6 WHEREle (R13 , R18) ) c= ( R7 WHEREle (R12 , R19) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R18 being Nat;
let R19 being Nat;
assume L183: (R18 <= R19 & R6 c= R7 & R12 c= R13);
let R3 being set;
assume L184: R3 in ( R6 WHEREle (R13 , R18) );
consider R10 being (Element of R1) such that L185: (R3 = R10 & ( card ( R10 . R13 ) ) c= R18 & R10 in R6) by L184;
L186: (R18 c= R19 & ( R10 . R12 ) c= ( R10 . R13 )) by L183 , L5 , NAT_1:39;
L187: (( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) ) & ( card ( R10 . R13 ) ) c= R19) by L186 , L185 , CARD_1:11 , XBOOLE_1:1;
L188: ( card ( R10 . R12 ) ) c= R19 by L187 , XBOOLE_1:1;
thus L189: thesis by L188 , L183 , L185;
end;
theorem
L190: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R18 being Nat holds (for R19 being Nat holds ((R18 <= R19 & R6 c= R7 & R12 c= R13) implies ( R6 WHERElt (R13 , R18) ) c= ( R7 WHERElt (R12 , R19) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R18 being Nat;
let R19 being Nat;
assume L191: (R18 <= R19 & R6 c= R7 & R12 c= R13);
let R3 being set;
assume L192: R3 in ( R6 WHERElt (R13 , R18) );
consider R10 being (Element of R1) such that L193: (R3 = R10 & ( card ( R10 . R13 ) ) in R18 & R10 in R6) by L192;
L194: (R18 c= R19 & ( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) )) by L191 , CARD_1:11 , NAT_1:39 , L5;
L195: ( card ( R10 . R12 ) ) in R19 by L194 , L193 , ORDINAL1:12;
thus L196: thesis by L195 , L191 , L193;
end;
theorem
L197: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R14 being (Operation of R1) holds ((R12 c= R13 & R6 c= R7 & R11 c= R14) implies ( R6 WHEREge (R11 , R13) ) c= ( R7 WHEREge (R14 , R12) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R14 being (Operation of R1);
assume L198: (R12 c= R13 & R6 c= R7 & R11 c= R14);
let R3 being set;
assume L199: R3 in ( R6 WHEREge (R11 , R13) );
consider R10 being (Element of R1) such that L200: (R3 = R10 & ( card ( R10 . R13 ) ) c= ( card ( R10 . R11 ) ) & R10 in R6) by L199;
L201: (( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) ) & ( card ( R10 . R11 ) ) c= ( card ( R10 . R14 ) )) by L198 , L5 , CARD_1:11;
L202: ( card ( R10 . R12 ) ) c= ( card ( R10 . R11 ) ) by L201 , L200 , XBOOLE_1:1;
L203: ( card ( R10 . R12 ) ) c= ( card ( R10 . R14 ) ) by L202 , L201 , XBOOLE_1:1;
thus L204: R3 in ( R7 WHEREge (R14 , R12) ) by L203 , L200 , L198;
end;
theorem
L205: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R14 being (Operation of R1) holds ((R12 c= R13 & R6 c= R7 & R11 c= R14) implies ( R6 WHEREgt (R11 , R13) ) c= ( R7 WHEREgt (R14 , R12) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R14 being (Operation of R1);
assume L206: (R12 c= R13 & R6 c= R7 & R11 c= R14);
let R3 being set;
assume L207: R3 in ( R6 WHEREgt (R11 , R13) );
consider R10 being (Element of R1) such that L208: (R3 = R10 & ( card ( R10 . R13 ) ) in ( card ( R10 . R11 ) ) & R10 in R6) by L207;
L209: (( R10 . R12 ) c= ( R10 . R13 ) & ( R10 . R11 ) c= ( R10 . R14 )) by L206 , L5;
L210: (( card ( R10 . R12 ) ) in ( card ( R10 . R11 ) ) & ( card ( R10 . R11 ) ) c= ( card ( R10 . R14 ) )) by L209 , L208 , CARD_1:11 , ORDINAL1:12;
thus L211: R3 in ( R7 WHEREgt (R14 , R12) ) by L210 , L208 , L206;
end;
theorem
L212: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R14 being (Operation of R1) holds ((R12 c= R13 & R6 c= R7 & R11 c= R14) implies ( R6 WHEREle (R14 , R12) ) c= ( R7 WHEREle (R11 , R13) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R14 being (Operation of R1);
assume L213: (R12 c= R13 & R6 c= R7 & R11 c= R14);
let R3 being set;
assume L214: R3 in ( R6 WHEREle (R14 , R12) );
consider R10 being (Element of R1) such that L215: (R3 = R10 & ( card ( R10 . R14 ) ) c= ( card ( R10 . R12 ) ) & R10 in R6) by L214;
L216: (( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) ) & ( card ( R10 . R11 ) ) c= ( card ( R10 . R14 ) )) by L213 , L5 , CARD_1:11;
L217: ( card ( R10 . R14 ) ) c= ( card ( R10 . R13 ) ) by L216 , L215 , XBOOLE_1:1;
L218: ( card ( R10 . R11 ) ) c= ( card ( R10 . R13 ) ) by L217 , L216 , XBOOLE_1:1;
thus L219: R3 in ( R7 WHEREle (R11 , R13) ) by L218 , L215 , L213;
end;
theorem
L220: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (for R14 being (Operation of R1) holds ((R12 c= R13 & R6 c= R7 & R11 c= R14) implies ( R6 WHERElt (R14 , R12) ) c= ( R7 WHERElt (R11 , R13) )))))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R14 being (Operation of R1);
assume L221: (R12 c= R13 & R6 c= R7 & R11 c= R14);
let R3 being set;
assume L222: R3 in ( R6 WHERElt (R14 , R12) );
consider R10 being (Element of R1) such that L223: (R3 = R10 & ( card ( R10 . R14 ) ) in ( card ( R10 . R12 ) ) & R10 in R6) by L222;
L224: (( card ( R10 . R12 ) ) c= ( card ( R10 . R13 ) ) & ( card ( R10 . R11 ) ) c= ( card ( R10 . R14 ) )) by L221 , L5 , CARD_1:11;
L225: ( card ( R10 . R11 ) ) in ( card ( R10 . R13 ) ) by L224 , L223 , ORDINAL1:12;
thus L226: R3 in ( R7 WHERElt (R11 , R13) ) by L225 , L223 , L221;
end;
theorem
L227: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds (for R12 being (Operation of R1) holds ( R5 WHEREgt (R11 , R12) ) c= ( R5 WHERE R11 )))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
let R12 being (Operation of R1);
let R3 being set;
assume L228: R3 in ( R5 WHEREgt (R11 , R12) );
consider R10 being (Element of R1) such that L229: (R3 = R10 & ( card ( R10 . R12 ) ) in ( card ( R10 . R11 ) ) & R10 in R5) by L228;
L230: ( R10 . R11 ) <> ( {} ) by L229;
thus L231: thesis by L230 , L229 , L96;
end;
theorem
L232: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ((R12 c= R13 & R6 c= R7) implies ( R6 WHERE R12 ) c= ( R7 WHERE R13 )))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
assume L233: (R12 c= R13 & R6 c= R7);
let R3 being set;
assume L234: R3 in ( R6 WHERE R12 );
reconsider D7 = R3 as (Element of R1) by L234;
L235: (( D7 . R12 ) <> ( {} ) & D7 in R6) by L234 , L96;
L236: ( D7 . R12 ) c= ( D7 . R13 ) by L233 , L5;
L237: ( D7 . R13 ) <> ( {} ) by L236 , L235;
thus L238: thesis by L237 , L233 , L235 , L96;
end;
theorem
L239: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds (for R15 being (Element of R1) holds (R15 in ( R5 | R11 ) iff (ex R16 being (Element of R1) st (R15 in ( R16 . R11 ) & R16 in R5)))))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
let R15 being (Element of R1);
thus L240:now
assume L241: R15 in ( R5 | R11 );
consider C31 being set such that L242: ([ C31 , R15 ] in R11 & C31 in R5) by L241 , RELAT_1:def 13;
reconsider D8 = C31 as (Element of R1) by L242;
take D9 = D8;
thus L243: R15 in ( D9 . R11 ) by L242 , RELAT_1:169;
thus L244: D9 in R5 by L242;
end;
given R16 being (Element of R1) such that
L245: (R15 in ( R16 . R11 ) & R16 in R5);

L246: [ R16 , R15 ] in R11 by L245 , RELAT_1:169;
thus L247: R15 in ( R5 | R11 ) by L246 , L245 , RELAT_1:def 13;
end;
notation
let R1 being set;
let R8 being (List of R1);
let R9 being (List of R1);
synonym R8 AND R9 for R8 /\ R9;
synonym R8 OR R9 for R8 \/ R9;
synonym R8 BUTNOT R9 for R8 \ R9;
end;
definition
let R1 being set;
let R8 being (List of R1);
let R9 being (List of R1);
redefine func R8 AND R9 -> (List of R1);

coherence
proof
L249: ( R8 /\ R9 ) is (Subset of R1);
thus L250: thesis by L249;
end;
redefine func R8 OR R9 -> (List of R1);

coherence
proof
L251: ( R8 \/ R9 ) is (Subset of R1);
thus L252: thesis by L251;
end;
redefine func R8 BUTNOT R9 -> (List of R1);

coherence
proof
L253: ( R8 \ R9 ) is (Subset of R1);
thus L254: thesis by L253;
end;
end;
theorem
L256: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds ((R6 <> ( {} ) & R7 <> ( {} )) implies ( ( R6 OR R7 ) \& R11 ) = ( ( R6 \& R11 ) AND ( R7 \& R11 ) ))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
assume L257: (R6 <> ( {} ) & R7 <> ( {} ));
thus L258: ( ( R6 OR R7 ) \& R11 ) c= ( ( R6 \& R11 ) AND ( R7 \& R11 ) )
proof
let R3 being set;
assume L259: R3 in ( ( R6 OR R7 ) \& R11 );
L260:
now
set D10 = the (Element of R6);
L261: D10 in R6 by L257;
reconsider D11 = D10 as (Element of R1) by L261;
L262: ( D11 . R11 ) in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R6 } by L257;
thus L263: { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R6 } <> ( {} ) by L262;
let R2 being set;
assume L264: R2 in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R6 };
consider R10 being (Element of R1) such that L265: (R2 = ( R10 . R11 ) & R10 in R6) by L264;
L266: R10 in ( R6 OR R7 ) by L265 , XBOOLE_0:def 3;
L267: R2 in { ( R15 . R11 ) where R15 is (Element of R1) : R15 in ( R6 OR R7 ) } by L266 , L265;
thus L268: R3 in R2 by L267 , L259 , SETFAM_1:def 1;
end;
L269: R3 in ( R6 \& R11 ) by L260 , SETFAM_1:def 1;
L270:
now
set D12 = the (Element of R7);
L271: D12 in R7 by L257;
reconsider D13 = D12 as (Element of R1) by L271;
L272: ( D13 . R11 ) in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R7 } by L257;
thus L273: { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R7 } <> ( {} ) by L272;
let R2 being set;
assume L274: R2 in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R7 };
consider R10 being (Element of R1) such that L275: (R2 = ( R10 . R11 ) & R10 in R7) by L274;
L276: R10 in ( R6 OR R7 ) by L275 , XBOOLE_0:def 3;
L277: R2 in { ( R15 . R11 ) where R15 is (Element of R1) : R15 in ( R6 OR R7 ) } by L276 , L275;
thus L278: R3 in R2 by L277 , L259 , SETFAM_1:def 1;
end;
L279: R3 in ( R7 \& R11 ) by L270 , SETFAM_1:def 1;
thus L280: thesis by L279 , L269 , XBOOLE_0:def 4;
end;

let R3 being set;
assume L281: R3 in ( ( R6 \& R11 ) AND ( R7 \& R11 ) );
L282: (R3 in ( R6 \& R11 ) & R3 in ( R7 \& R11 )) by L281 , XBOOLE_0:def 4;
L283:
now
set D14 = the (Element of R7);
L284: D14 in R7 by L257;
reconsider D15 = D14 as (Element of R1) by L284;
L285: D15 in ( R6 OR R7 ) by L257 , XBOOLE_0:def 3;
L286: ( D15 . R11 ) in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in ( R6 OR R7 ) } by L285;
thus L287: { ( R10 . R11 ) where R10 is (Element of R1) : R10 in ( R6 OR R7 ) } <> ( {} ) by L286;
let R2 being set;
assume L288: R2 in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in ( R6 OR R7 ) };
consider R10 being (Element of R1) such that L289: (R2 = ( R10 . R11 ) & R10 in ( R6 OR R7 )) by L288;
L290: (R10 in R6 or R10 in R7) by L289 , XBOOLE_0:def 3;
L291: (R2 in { ( R15 . R11 ) where R15 is (Element of R1) : R15 in R6 } or R2 in { ( R16 . R11 ) where R16 is (Element of R1) : R16 in R7 }) by L290 , L289;
thus L292: R3 in R2 by L291 , L282 , SETFAM_1:def 1;
end;
thus L293: thesis by L283 , SETFAM_1:def 1;
end;
theorem
L294: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ((R6 c= R7 & R12 c= R13) implies ( R6 | R12 ) c= ( R7 | R13 )))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
assume L295: (R6 c= R7 & R12 c= R13);
L296: (( R6 | R12 ) c= ( R7 | R12 ) & ( R7 | R12 ) c= ( R7 | R13 )) by L295 , RELAT_1:123 , RELAT_1:124;
thus L297: thesis by L296 , XBOOLE_1:1;
end;
theorem
L298: (for R1 being set holds (for R5 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds (R12 c= R13 implies ( R5 \& R12 ) c= ( R5 \& R13 ))))))
proof
let R1 being set;
let R5 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
assume L299: R12 c= R13;
let R3 being set;
assume L300: R3 in ( R5 \& R12 );
L301: { ( R10 . R12 ) where R10 is (Element of R1) : R10 in R5 } <> ( {} ) by L300 , SETFAM_1:def 1;
consider R2 being set such that L302: R2 in { ( R10 . R12 ) where R10 is (Element of R1) : R10 in R5 } by L301 , XBOOLE_0:def 1;
consider R17 being (Element of R1) such that L303: (R2 = ( R17 . R12 ) & R17 in R5) by L302;
L304: ( R17 . R13 ) in { ( R10 . R13 ) where R10 is (Element of R1) : R10 in R5 } by L303;
L305:
now
let R2 being set;
assume L306: R2 in { ( R10 . R13 ) where R10 is (Element of R1) : R10 in R5 };
consider R15 being (Element of R1) such that L307: (R2 = ( R15 . R13 ) & R15 in R5) by L306;
L308: ( R15 . R12 ) in { ( R10 . R12 ) where R10 is (Element of R1) : R10 in R5 } by L307;
L309: (R3 in ( R15 . R12 ) & ( R15 . R12 ) c= R2) by L308 , L299 , L300 , L307 , L5 , SETFAM_1:def 1;
thus L310: R3 in R2 by L309;
end;
thus L311: thesis by L305 , L304 , SETFAM_1:def 1;
end;
theorem
L312: (for R1 being set holds (for R5 being (List of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( R5 \& ( R12 AND R13 ) ) = ( ( R5 \& R12 ) AND ( R5 \& R13 ) )))))
proof
let R1 being set;
let R5 being (List of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
L313: (( R5 \& ( R12 AND R13 ) ) c= ( R5 \& R12 ) & ( R5 \& ( R12 AND R13 ) ) c= ( R5 \& R13 )) by XBOOLE_1:17 , L298;
thus L314: ( R5 \& ( R12 AND R13 ) ) c= ( ( R5 \& R12 ) AND ( R5 \& R13 ) ) by L313 , XBOOLE_1:19;
let R3 being set;
assume L315: R3 in ( ( R5 \& R12 ) AND ( R5 \& R13 ) );
L316: (R3 in ( R5 \& R12 ) & R3 in ( R5 \& R13 )) by L315 , XBOOLE_0:def 4;
L317:
now
set D16 = ( R12 AND R13 );
set D17 = the (Element of R5);
L318: { ( R10 . R12 ) where R10 is (Element of R1) : R10 in R5 } <> ( {} ) by L316 , SETFAM_1:def 1;
consider C32 being set such that L319: C32 in { ( R10 . R12 ) where R10 is (Element of R1) : R10 in R5 } by L318 , XBOOLE_0:def 1;
consider R15 being (Element of R1) such that L320: (C32 = ( R15 . R12 ) & R15 in R5) by L319;
L321: ( R15 . D16 ) in { ( R10 . D16 ) where R10 is (Element of R1) : R10 in R5 } by L320;
thus L322: { ( R10 . D16 ) where R10 is (Element of R1) : R10 in R5 } <> ( {} ) by L321;
let R2 being set;
assume L323: R2 in { ( R10 . D16 ) where R10 is (Element of R1) : R10 in R5 };
consider R10 being (Element of R1) such that L324: (R2 = ( R10 . D16 ) & R10 in R5) by L323;
L325: R2 = ( ( R10 . R12 ) AND ( R10 . R13 ) ) by L324 , RELSET_2:11;
L326: ( R10 . R12 ) in { ( R17 . R12 ) where R17 is (Element of R1) : R17 in R5 } by L324;
L327: R3 in ( R10 . R12 ) by L326 , L316 , SETFAM_1:def 1;
L328: ( R10 . R13 ) in { ( R17 . R13 ) where R17 is (Element of R1) : R17 in R5 } by L324;
L329: R3 in ( R10 . R13 ) by L328 , L316 , SETFAM_1:def 1;
thus L330: R3 in R2 by L329 , L325 , L327 , XBOOLE_0:def 4;
end;
thus L331: thesis by L317 , SETFAM_1:def 1;
end;
theorem
L332: (for R1 being set holds (for R6 being (List of R1) holds (for R7 being (List of R1) holds (for R11 being (Operation of R1) holds ((R6 <> ( {} ) & R6 c= R7) implies ( R7 \& R11 ) c= ( R6 \& R11 ))))))
proof
let R1 being set;
let R6 being (List of R1);
let R7 being (List of R1);
let R11 being (Operation of R1);
assume L333: R6 <> ( {} );
assume L334: R6 c= R7;
let R3 being set;
assume L335: R3 in ( R7 \& R11 );
L336:
now
set D18 = the (Element of R6);
L337: D18 in R6 by L333;
reconsider D19 = D18 as (Element of R1) by L337;
L338: ( D19 . R11 ) in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R6 } by L333;
thus L339: { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R6 } <> ( {} ) by L338;
let R2 being set;
assume L340: R2 in { ( R10 . R11 ) where R10 is (Element of R1) : R10 in R6 };
consider R10 being (Element of R1) such that L341: (R2 = ( R10 . R11 ) & R10 in R6) by L340;
L342: R2 in { ( R15 . R11 ) where R15 is (Element of R1) : R15 in R7 } by L341 , L334;
thus L343: R3 in R2 by L342 , L335 , SETFAM_1:def 1;
end;
thus L344: R3 in ( R6 \& R11 ) by L336 , SETFAM_1:def 1;
end;
begin
theorem
L345: (for R1 being set holds (for B3 , B4 being (Operation of R1) holds ((for R10 being (Element of R1) holds ( R10 . B3 ) = ( R10 . B4 )) implies B3 = B4)))
proof
let R1 being set;
let C33 , C34 being (Operation of R1);
assume L346: (for R10 being (Element of R1) holds ( R10 . C33 ) = ( R10 . C34 ));
let C35 , C36 being set;
thus L347: ([ C35 , C36 ] in C33 implies [ C35 , C36 ] in C34)
proof
assume L348: [ C35 , C36 ] in C33;
reconsider D20 = C35 , D21 = C36 as (Element of R1) by L348 , ZFMISC_1:87;
L349: D21 in ( D20 . C33 ) by L348 , RELAT_1:169;
L350: D21 in ( D20 . C34 ) by L349 , L346;
thus L351: thesis by L350 , RELAT_1:169;
end;

assume L352: [ C35 , C36 ] in C34;
L353: (C35 in R1 & C36 in R1) by L352 , ZFMISC_1:87;
reconsider D22 = C35 , D23 = C36 as (Element of R1) by L352 , ZFMISC_1:87;
reconsider D24 = { D22 } as (Subset of R1) by L353 , ZFMISC_1:31;
L354: D23 in ( D22 . C34 ) by L352 , RELAT_1:169;
L355: D23 in ( D22 . C33 ) by L354 , L346;
thus L356: thesis by L355 , RELAT_1:169;
end;
theorem
L357: (for R1 being set holds (for B5 , B6 being (Operation of R1) holds ((for R5 being (List of R1) holds ( R5 | B5 ) = ( R5 | B6 )) implies B5 = B6)))
proof
let R1 being set;
let C37 , C38 being (Operation of R1);
assume L358: (for R5 being (List of R1) holds ( R5 | C37 ) = ( R5 | C38 ));
L359:
now
let R10 being (Element of R1);
per cases ;
suppose L360: R1 <> ( {} );

reconsider D25 = { R10 } as (Subset of R1) by L360 , ZFMISC_1:31;
thus L361: ( R10 . C37 ) = ( D25 | C37 )
.= ( R10 . C38 ) by L358;
end;
suppose L362: R1 = ( {} );

thus L363: ( R10 . C37 ) = ( R10 . C38 ) by L362;
end;
end;
thus L365: thesis by L359 , L345;
end;
definition
let R1 being set;
let R11 being (Operation of R1);
func NOT R11 -> (Operation of R1) means 
:L366: (for R5 being (List of R1) holds ( R5 | it ) = ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } ));
existence
proof
defpred S1[ set , set ] means (( Im (R11 , $1) ) = ( {} ) & $2 = $1);
consider C39 being Relation such that L367: (for B7 , B8 being set holds ([ B7 , B8 ] in C39 iff (B7 in R1 & B8 in R1 & S1[ B7 , B8 ]))) from RELAT_1:sch 1;
L368: C39 c= [: R1 , R1 :]
proof
let C40 , C41 being set;
assume L369: [ C40 , C41 ] in C39;
L370: (C40 in R1 & C41 in R1) by L369 , L367;
thus L371: thesis by L370 , ZFMISC_1:87;
end;
reconsider D26 = C39 as (Operation of R1) by L368;
take D26;
let R5 being (List of R1);
thus L372: ( R5 | D26 ) c= ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } )
proof
let C42 being set;
assume L373: C42 in ( R5 | D26 );
consider R16 being (Element of R1) such that L374: (C42 in ( R16 . D26 ) & R16 in R5) by L373 , L239;
L375: [ R16 , C42 ] in D26 by L374 , RELAT_1:169;
L376: (C42 = R16 & ( R16 . R11 ) = ( {} )) by L375 , L367;
L377: C42 in { R16 } by L376 , TARSKI:def 1;
L378: C42 in ( IFEQ (( R16 . R11 ) , ( {} ) , { R16 } , ( {} )) ) by L377 , L376 , FUNCOP_1:def 8;
L379: ( IFEQ (( R16 . R11 ) , ( {} ) , { R16 } , ( {} )) ) in { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } by L374;
thus L380: thesis by L379 , L378 , TARSKI:def 4;
end;

let C43 being set;
assume L381: C43 in ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } );
consider C44 being set such that L382: (C43 in C44 & C44 in { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 }) by L381 , TARSKI:def 4;
consider R10 being (Element of R1) such that L383: (C44 = ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) & R10 in R5) by L382;
L384: ( R10 . R11 ) = ( {} ) by L382 , L383 , FUNCOP_1:def 8;
L385: C44 = { R10 } by L384 , L383 , FUNCOP_1:def 8;
L386: C43 = R10 by L385 , L382 , TARSKI:def 1;
L387: [ R10 , C43 ] in D26 by L386 , L367 , L383 , L384;
thus L388: thesis by L387 , L383 , RELAT_1:def 13;
end;
uniqueness
proof
let C45 , C46 being (Operation of R1);
assume that
L389: (for R5 being (List of R1) holds ( R5 | C45 ) = ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } ))
and
L390: (for R5 being (List of R1) holds ( R5 | C46 ) = ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } ));
L391:
now
let R5 being (List of R1);
thus L392: ( R5 | C45 ) = ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in R5 } ) by L389
.= ( R5 | C46 ) by L390;
end;
thus L393: thesis by L391 , L357;
end;
end;
notation
let R1 being set;
let C47 , C48 being (Operation of R1);
synonym C47 AND C48 for C47 /\ C48;
synonym C47 OR C48 for C47 \/ C48;
synonym C47 BUTNOT C48 for C47 \ C48;
synonym C47 | C48 for C47 * C48;
end;
definition
let R1 being set;
let C49 , C50 being (Operation of R1);
redefine func C49 AND C50 -> (Operation of R1) means 
(for R5 being (List of R1) holds ( R5 | it ) = ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ));
coherence
proof
thus L396: ( C49 /\ C50 ) is (Subset of [: R1 , R1 :]);
end;
compatibility
proof
L397: (for B9 being (Operation of R1) holds (B9 = ( C49 AND C50 ) implies (for R5 being (List of R1) holds ( R5 | B9 ) = ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ))))
proof
let R11 being (Operation of R1);
assume L398: R11 = ( C49 /\ C50 );
defpred S2[ set , set ] means ([ $1 , $2 ] in C49 & [ $1 , $2 ] in C50);
let R5 being (List of R1);
thus L399: ( R5 | R11 ) c= ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } )
proof
let C51 being set;
assume L400: C51 in ( R5 | R11 );
consider C52 being set such that L401: ([ C52 , C51 ] in R11 & C52 in R5) by L400 , RELAT_1:def 13;
reconsider D27 = C52 , D28 = C51 as (Element of R1) by L401 , ZFMISC_1:87;
L402: ([ D27 , D28 ] in C49 & [ D27 , D28 ] in C50) by L398 , L401 , XBOOLE_0:def 4;
L403: (D28 in ( D27 . C49 ) & D28 in ( D27 . C50 )) by L402 , RELAT_1:169;
L404: (D28 in ( ( D27 . C49 ) AND ( D27 . C50 ) ) & ( ( D27 . C49 ) AND ( D27 . C50 ) ) in { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 }) by L403 , L401 , XBOOLE_0:def 4;
thus L405: thesis by L404 , TARSKI:def 4;
end;

let C53 being set;
assume L406: C53 in ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } );
consider C54 being set such that L407: (C53 in C54 & C54 in { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 }) by L406 , TARSKI:def 4;
consider R10 being (Element of R1) such that L408: (C54 = ( ( R10 . C49 ) AND ( R10 . C50 ) ) & R10 in R5) by L407;
L409: (C53 in ( R10 . C49 ) & C53 in ( R10 . C50 )) by L407 , L408 , XBOOLE_0:def 4;
reconsider D29 = C53 as (Element of R1) by L407 , L408;
L410: ([ R10 , D29 ] in C49 & [ R10 , D29 ] in C50) by L409 , RELAT_1:169;
L411: [ R10 , D29 ] in R11 by L410 , L398 , XBOOLE_0:def 4;
thus L412: thesis by L411 , L408 , RELAT_1:def 13;
end;
let C55 being (Operation of R1);
thus L413: (C55 = ( C49 AND C50 ) implies (for R5 being (List of R1) holds ( R5 | C55 ) = ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ))) by L397;
assume L414: (for R5 being (List of R1) holds ( R5 | C55 ) = ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ));
L415:
now
let R5 being (List of R1);
thus L416: ( R5 | C55 ) = ( union { ( ( R10 . C49 ) AND ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ) by L414
.= ( R5 | ( C49 /\ C50 ) ) by L397;
end;
thus L417: thesis by L415 , L357;
end;
redefine func C49 OR C50 -> (Operation of R1) means 
(for R5 being (List of R1) holds ( R5 | it ) = ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ));
coherence
proof
thus L418: ( C49 \/ C50 ) is (Subset of [: R1 , R1 :]);
end;
compatibility
proof
L419: (for B10 being (Operation of R1) holds (B10 = ( C49 OR C50 ) implies (for R5 being (List of R1) holds ( R5 | B10 ) = ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ))))
proof
let R11 being (Operation of R1);
assume L420: R11 = ( C49 \/ C50 );
defpred S3[ set , set ] means ([ $1 , $2 ] in C49 or [ $1 , $2 ] in C50);
let R5 being (List of R1);
thus L421: ( R5 | R11 ) c= ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } )
proof
let C56 being set;
assume L422: C56 in ( R5 | R11 );
consider C57 being set such that L423: ([ C57 , C56 ] in R11 & C57 in R5) by L422 , RELAT_1:def 13;
reconsider D30 = C57 , D31 = C56 as (Element of R1) by L423 , ZFMISC_1:87;
L424: ([ D30 , D31 ] in C49 or [ D30 , D31 ] in C50) by L420 , L423 , XBOOLE_0:def 3;
L425: (D31 in ( D30 . C49 ) or D31 in ( D30 . C50 )) by L424 , RELAT_1:169;
L426: (D31 in ( ( D30 . C49 ) OR ( D30 . C50 ) ) & ( ( D30 . C49 ) OR ( D30 . C50 ) ) in { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 }) by L425 , L423 , XBOOLE_0:def 3;
thus L427: thesis by L426 , TARSKI:def 4;
end;

let C58 being set;
assume L428: C58 in ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } );
consider C59 being set such that L429: (C58 in C59 & C59 in { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 }) by L428 , TARSKI:def 4;
consider R10 being (Element of R1) such that L430: (C59 = ( ( R10 . C49 ) OR ( R10 . C50 ) ) & R10 in R5) by L429;
L431: (C58 in ( R10 . C49 ) or C58 in ( R10 . C50 )) by L429 , L430 , XBOOLE_0:def 3;
reconsider D32 = C58 as (Element of R1) by L429 , L430;
L432: ([ R10 , D32 ] in C49 or [ R10 , D32 ] in C50) by L431 , RELAT_1:169;
L433: [ R10 , D32 ] in R11 by L432 , L420 , XBOOLE_0:def 3;
thus L434: thesis by L433 , L430 , RELAT_1:def 13;
end;
let C60 being (Operation of R1);
thus L435: (C60 = ( C49 OR C50 ) implies (for R5 being (List of R1) holds ( R5 | C60 ) = ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ))) by L419;
assume L436: (for R5 being (List of R1) holds ( R5 | C60 ) = ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ));
L437:
now
let R5 being (List of R1);
thus L438: ( R5 | C60 ) = ( union { ( ( R10 . C49 ) OR ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ) by L436
.= ( R5 | ( C49 \/ C50 ) ) by L419;
end;
thus L439: thesis by L437 , L357;
end;
redefine func C49 BUTNOT C50 -> (Operation of R1) means 
(for R5 being (List of R1) holds ( R5 | it ) = ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ));
coherence
proof
thus L440: ( C49 \ C50 ) is (Subset of [: R1 , R1 :]);
end;
compatibility
proof
L441: (for B11 being (Operation of R1) holds (B11 = ( C49 BUTNOT C50 ) implies (for R5 being (List of R1) holds ( R5 | B11 ) = ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ))))
proof
let R11 being (Operation of R1);
assume L442: R11 = ( C49 \ C50 );
defpred S4[ set , set ] means ([ $1 , $2 ] in C49 & (not [ $1 , $2 ] in C50));
let R5 being (List of R1);
thus L443: ( R5 | R11 ) c= ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } )
proof
let C61 being set;
assume L444: C61 in ( R5 | R11 );
consider C62 being set such that L445: ([ C62 , C61 ] in R11 & C62 in R5) by L444 , RELAT_1:def 13;
reconsider D33 = C62 , D34 = C61 as (Element of R1) by L445 , ZFMISC_1:87;
L446: ([ D33 , D34 ] in C49 & [ D33 , D34 ] nin C50) by L442 , L445 , XBOOLE_0:def 5;
L447: (D34 in ( D33 . C49 ) & D34 nin ( D33 . C50 )) by L446 , RELAT_1:169;
L448: (D34 in ( ( D33 . C49 ) BUTNOT ( D33 . C50 ) ) & ( ( D33 . C49 ) BUTNOT ( D33 . C50 ) ) in { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 }) by L447 , L445 , XBOOLE_0:def 5;
thus L449: thesis by L448 , TARSKI:def 4;
end;

let C63 being set;
assume L450: C63 in ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } );
consider C64 being set such that L451: (C63 in C64 & C64 in { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 }) by L450 , TARSKI:def 4;
consider R10 being (Element of R1) such that L452: (C64 = ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) & R10 in R5) by L451;
L453: (C63 in ( R10 . C49 ) & C63 nin ( R10 . C50 )) by L451 , L452 , XBOOLE_0:def 5;
reconsider D35 = C63 as (Element of R1) by L451 , L452;
L454: ([ R10 , D35 ] in C49 & [ R10 , D35 ] nin C50) by L453 , RELAT_1:169;
L455: [ R10 , D35 ] in R11 by L454 , L442 , XBOOLE_0:def 5;
thus L456: thesis by L455 , L452 , RELAT_1:def 13;
end;
let C65 being (Operation of R1);
thus L457: (C65 = ( C49 BUTNOT C50 ) implies (for R5 being (List of R1) holds ( R5 | C65 ) = ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ))) by L441;
assume L458: (for R5 being (List of R1) holds ( R5 | C65 ) = ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ));
L459:
now
let R5 being (List of R1);
thus L460: ( R5 | C65 ) = ( union { ( ( R10 . C49 ) BUTNOT ( R10 . C50 ) ) where R10 is (Element of R1) : R10 in R5 } ) by L458
.= ( R5 | ( C49 \ C50 ) ) by L441;
end;
thus L461: thesis by L459 , L357;
end;
redefine func C49 | C50 -> (Operation of R1) means 
(for R5 being (List of R1) holds ( R5 | it ) = ( ( R5 | C49 ) | C50 ));
coherence
proof
thus L462: ( C49 * C50 ) is (Relation of R1);
end;
compatibility
proof
let C66 being (Operation of R1);
thus L463: (C66 = ( C49 | C50 ) implies (for R5 being (List of R1) holds ( R5 | C66 ) = ( ( R5 | C49 ) | C50 ))) by RELAT_1:126;
assume L464: (for R5 being (List of R1) holds ( R5 | C66 ) = ( ( R5 | C49 ) | C50 ));
L465:
now
let R5 being (List of R1);
thus L466: ( R5 | C66 ) = ( ( R5 | C49 ) | C50 ) by L464
.= ( R5 | ( C49 * C50 ) ) by RELAT_1:126;
end;
thus L467: thesis by L465 , L357;
end;
func C49 \& C50 -> (Operation of R1) means 
:L468: (for R5 being (List of R1) holds ( R5 | it ) = ( union { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 } ));
existence
proof
defpred S5[ set , set ] means (ex R10 being (Element of R1) st ($1 = R10 & $2 in ( ( R10 . C49 ) \& C50 )));
consider C67 being Relation such that L469: (for R3 being set holds (for R4 being set holds ([ R3 , R4 ] in C67 iff (R3 in R1 & R4 in R1 & S5[ R3 , R4 ])))) from RELAT_1:sch 1;
L470: C67 c= [: R1 , R1 :]
proof
let R3 being set;
let R4 being set;
assume L471: [ R3 , R4 ] in C67;
L472: (R3 in R1 & R4 in R1) by L471 , L469;
thus L473: thesis by L472 , ZFMISC_1:87;
end;
reconsider D36 = C67 as (Operation of R1) by L470;
take D36;
let R5 being (List of R1);
thus L474: ( R5 | D36 ) c= ( union { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 } )
proof
let R3 being set;
assume L475: R3 in ( R5 | D36 );
consider R17 being (Element of R1) such that L476: (R3 in ( R17 . D36 ) & R17 in R5) by L475 , L239;
L477: [ R17 , R3 ] in D36 by L476 , RELAT_1:169;
L478: (ex R10 being (Element of R1) st (R17 = R10 & R3 in ( ( R10 . C49 ) \& C50 ))) by L477 , L469;
L479: (R3 in ( ( R17 . C49 ) \& C50 ) & ( ( R17 . C49 ) \& C50 ) in { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 }) by L478 , L476;
thus L480: thesis by L479 , TARSKI:def 4;
end;

let R3 being set;
assume L481: R3 in ( union { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 } );
consider R2 being set such that L482: (R3 in R2 & R2 in { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 }) by L481 , TARSKI:def 4;
consider R10 being (Element of R1) such that L483: (R2 = ( ( R10 . C49 ) \& C50 ) & R10 in R5) by L482;
L484: [ R10 , R3 ] in D36 by L469 , L482 , L483;
thus L485: thesis by L484 , L483 , RELAT_1:def 13;
end;
uniqueness
proof
let C68 , C69 being (Operation of R1);
assume that
L486: (for R5 being (List of R1) holds ( R5 | C68 ) = ( union { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 } ))
and
L487: (for R5 being (List of R1) holds ( R5 | C69 ) = ( union { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 } ));
L488:
now
let R5 being (List of R1);
thus L489: ( R5 | C68 ) = ( union { ( ( R10 . C49 ) \& C50 ) where R10 is (Element of R1) : R10 in R5 } ) by L486
.= ( R5 | C69 ) by L487;
end;
thus L490: thesis by L488 , L357;
end;
end;
theorem
L492: (for R1 being set holds (for R10 being (Element of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( R10 . ( R12 AND R13 ) ) = ( ( R10 . R12 ) AND ( R10 . R13 ) ))))) by RELSET_2:11;
theorem
L493: (for R1 being set holds (for R10 being (Element of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( R10 . ( R12 OR R13 ) ) = ( ( R10 . R12 ) OR ( R10 . R13 ) ))))) by RELSET_2:10;
theorem
L494: (for R1 being set holds (for R10 being (Element of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( R10 . ( R12 BUTNOT R13 ) ) = ( ( R10 . R12 ) BUTNOT ( R10 . R13 ) ))))) by RELSET_2:12;
theorem
L495: (for R1 being set holds (for R10 being (Element of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( R10 . ( R12 | R13 ) ) = ( ( R10 . R12 ) | R13 ))))) by RELAT_1:126;
theorem
L496: (for R1 being set holds (for R10 being (Element of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( R10 . ( R12 \& R13 ) ) = ( ( R10 . R12 ) \& R13 )))))
proof
let R1 being set;
let R10 being (Element of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
per cases ;
suppose L497: R1 = ( {} );

L498: (( R10 . ( R12 \& R13 ) ) = ( {} ) & ( ( R10 . R12 ) \& R13 ) = ( {} )) by L497;
thus L499: thesis by L498;
end;
suppose L500: R1 <> ( {} );

reconsider D37 = { R10 } as (List of R1) by L500 , ZFMISC_1:31;
L501: { ( ( R15 . R12 ) \& R13 ) where R15 is (Element of R1) : R15 in D37 } = { ( ( R10 . R12 ) \& R13 ) }
proof
thus L502: { ( ( R15 . R12 ) \& R13 ) where R15 is (Element of R1) : R15 in D37 } c= { ( ( R10 . R12 ) \& R13 ) }
proof
let R3 being set;
assume L503: R3 in { ( ( R15 . R12 ) \& R13 ) where R15 is (Element of R1) : R15 in D37 };
consider R15 being (Element of R1) such that L504: (R3 = ( ( R15 . R12 ) \& R13 ) & R15 in D37) by L503;
L505: R15 = R10 by L504 , TARSKI:def 1;
thus L506: thesis by L505 , L504 , TARSKI:def 1;
end;

let R3 being set;
assume L507: R3 in { ( ( R10 . R12 ) \& R13 ) };
L508: (R3 = ( ( R10 . R12 ) \& R13 ) & R10 in D37) by L507 , TARSKI:def 1;
thus L509: thesis by L508;
end;
thus L510: ( R10 . ( R12 \& R13 ) ) = ( union { ( ( R15 . R12 ) \& R13 ) where R15 is (Element of R1) : R15 in D37 } ) by L468
.= ( ( R10 . R12 ) \& R13 ) by L501 , ZFMISC_1:25;
end;
end;
theorem
L512: (for R1 being set holds (for R3 being set holds (for R4 being set holds (for R11 being (Operation of R1) holds ([ R3 , R4 ] in ( NOT R11 ) iff (R3 = R4 & R3 in R1 & R3 nin ( dom R11 )))))))
proof
let R1 being set;
let R3 being set;
let R4 being set;
let R11 being (Operation of R1);
thus L513: ([ R3 , R4 ] in ( NOT R11 ) implies (R3 = R4 & R3 in R1 & R3 nin ( dom R11 )))
proof
assume L514: [ R3 , R4 ] in ( NOT R11 );
L515: (R4 in ( Im (( NOT R11 ) , R3) ) & R3 in R1) by L514 , RELAT_1:169 , ZFMISC_1:87;
L516: (R4 in ( ( NOT R11 ) .: { R3 } ) & { R3 } c= R1) by L515 , ZFMISC_1:31;
L517: R4 in ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in { R3 } } ) by L516 , L366;
consider R2 being set such that L518: (R4 in R2 & R2 in { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in { R3 } }) by L517 , TARSKI:def 4;
consider R10 being (Element of R1) such that L519: (R2 = ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) & R10 in { R3 }) by L518;
L520: R10 = R3 by L519 , TARSKI:def 1;
L521: ( R10 . R11 ) = ( {} ) by L518 , L519 , FUNCOP_1:def 8;
L522: R4 in { R10 } by L521 , L518 , L519 , FUNCOP_1:def 8;
L523: (R4 = R10 & (for R4 being set holds [ R10 , R4 ] nin R11)) by L522 , L521 , RELAT_1:169 , TARSKI:def 1;
thus L524: (R3 = R4 & R3 in R1 & R3 nin ( dom R11 )) by L523 , L520 , L514 , XTUPLE_0:def 12 , ZFMISC_1:87;
end;

assume L525: (R3 = R4 & R3 in R1 & R3 nin ( dom R11 ));
reconsider D38 = R3 as (Element of R1) by L525;
L526: ( D38 . R11 ) c= ( {} )
proof
let C70 being set;
assume L527: C70 in ( D38 . R11 );
L528: [ D38 , C70 ] in R11 by L527 , RELAT_1:169;
thus L529: thesis by L528 , L525 , XTUPLE_0:def 12;
end;
L530: ( D38 . R11 ) = ( {} ) by L526;
L531: ( IFEQ (( D38 . R11 ) , ( {} ) , { D38 } , ( {} )) ) = { D38 } by L530 , FUNCOP_1:def 8;
L532: D38 in { D38 } by TARSKI:def 1;
reconsider D39 = { D38 } as (Subset of R1) by L525 , ZFMISC_1:31;
L533: { D38 } in { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in { D38 } } by L531 , L532;
L534: D38 in ( union { ( IFEQ (( R10 . R11 ) , ( {} ) , { R10 } , ( {} )) ) where R10 is (Element of R1) : R10 in { D38 } } ) by L533 , L532 , TARSKI:def 4;
L535: D38 in ( D39 | ( NOT R11 ) ) by L534 , L366;
L536: D38 in ( D38 . ( NOT R11 ) ) by L535;
thus L537: thesis by L536 , L525 , RELAT_1:169;
end;
theorem
L538: (for R1 being set holds (for R11 being (Operation of R1) holds ( NOT R11 ) = ( id ( R1 \ ( dom R11 ) ) )))
proof
let R1 being set;
let R11 being (Operation of R1);
let R3 being set;
let R4 being set;
thus L539: ([ R3 , R4 ] in ( NOT R11 ) implies [ R3 , R4 ] in ( id ( R1 \ ( dom R11 ) ) ))
proof
assume L540: [ R3 , R4 ] in ( NOT R11 );
L541: (R3 = R4 & R3 in R1 & R3 nin ( dom R11 )) by L540 , L512;
L542: R3 in ( R1 \ ( dom R11 ) ) by L541 , XBOOLE_0:def 5;
thus L543: thesis by L542 , L541 , RELAT_1:def 10;
end;

assume L544: [ R3 , R4 ] in ( id ( R1 \ ( dom R11 ) ) );
L545: (R3 = R4 & R3 in ( R1 \ ( dom R11 ) )) by L544 , RELAT_1:def 10;
L546: (R3 in R1 & R3 nin ( dom R11 )) by L545 , XBOOLE_0:def 5;
thus L547: thesis by L546 , L545 , L512;
end;
theorem
L548: (for R1 being set holds (for R11 being (Operation of R1) holds ( dom ( NOT ( NOT R11 ) ) ) = ( dom R11 )))
proof
let R1 being set;
let R11 being (Operation of R1);
thus L549: ( dom ( NOT ( NOT R11 ) ) ) = ( dom ( id ( R1 \ ( dom ( NOT R11 ) ) ) ) ) by L538
.= ( R1 \ ( dom ( NOT R11 ) ) ) by RELAT_1:45
.= ( R1 \ ( dom ( id ( R1 \ ( dom R11 ) ) ) ) ) by L538
.= ( R1 \ ( R1 \ ( dom R11 ) ) ) by RELAT_1:45
.= ( R1 /\ ( dom R11 ) ) by XBOOLE_1:48
.= ( dom R11 ) by XBOOLE_1:28;
end;
theorem
L550: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds ( R5 WHERE ( NOT ( NOT R11 ) ) ) = ( R5 WHERE R11 ))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
thus L551: ( R5 WHERE ( NOT ( NOT R11 ) ) ) c= ( R5 WHERE R11 )
proof
let R3 being set;
assume L552: R3 in ( R5 WHERE ( NOT ( NOT R11 ) ) );
reconsider D40 = R3 as (Element of R1) by L552;
L553: (D40 in R5 & ( D40 . ( NOT ( NOT R11 ) ) ) <> ( {} )) by L552 , L96;
L554: D40 in ( dom ( NOT ( NOT R11 ) ) ) by L553 , RELAT_1:170;
L555: D40 in ( dom R11 ) by L554 , L548;
L556: ( D40 . R11 ) <> ( {} ) by L555 , RELAT_1:170;
thus L557: thesis by L556 , L553 , L96;
end;

let R3 being set;
assume L558: R3 in ( R5 WHERE R11 );
reconsider D41 = R3 as (Element of R1) by L558;
L559: (R3 in R5 & ( D41 . R11 ) <> ( {} )) by L558 , L96;
L560: D41 in ( dom R11 ) by L559 , RELAT_1:170;
L561: D41 in ( dom ( NOT ( NOT R11 ) ) ) by L560 , L548;
L562: ( D41 . ( NOT ( NOT R11 ) ) ) <> ( {} ) by L561 , RELAT_1:170;
thus L563: thesis by L562 , L559 , L96;
end;
theorem
L564: (for R1 being set holds (for R5 being (List of R1) holds (for R11 being (Operation of R1) holds ( R5 WHEREeq (R11 , ( 0 )) ) = ( R5 WHERE ( NOT R11 ) ))))
proof
let R1 being set;
let R5 being (List of R1);
let R11 being (Operation of R1);
thus L565: ( R5 WHEREeq (R11 , ( 0 )) ) c= ( R5 WHERE ( NOT R11 ) )
proof
let R3 being set;
assume L566: R3 in ( R5 WHEREeq (R11 , ( 0 )) );
consider R10 being (Element of R1) such that L567: (R3 = R10 & ( card ( R10 . R11 ) ) = ( 0 ) & R10 in R5) by L566;
L568: ( R10 . R11 ) = ( {} ) by L567;
L569: R10 nin ( dom R11 ) by L568 , RELAT_1:170;
L570: [ R10 , R10 ] in ( NOT R11 ) by L569 , L567 , L512;
L571: R10 , R10 in ( NOT R11 ) by L570 , L2;
thus L572: thesis by L571 , L567;
end;

let R3 being set;
assume L573: R3 in ( R5 WHERE ( NOT R11 ) );
consider R10 being (Element of R1) such that L574: (R3 = R10 & (ex R17 being (Element of R1) st (R10 , R17 in ( NOT R11 ) & R10 in R5))) by L573;
consider R17 being (Element of R1) such that L575: (R10 , R17 in ( NOT R11 ) & R10 in R5) by L574;
L576: [ R10 , R17 ] in ( NOT R11 ) by L575 , L2;
L577: (R10 = R17 & R10 in R1 & R10 nin ( dom R11 )) by L576 , L512;
L578: ( R10 . R11 ) = ( {} ) by L577 , RELAT_1:170;
L579: ( card ( R10 . R11 ) ) = ( 0 ) by L578;
thus L580: thesis by L579 , L574;
end;
theorem
L581: (for R1 being set holds (for R11 being (Operation of R1) holds ( NOT ( NOT ( NOT R11 ) ) ) = ( NOT R11 )))
proof
let R1 being set;
let R11 being (Operation of R1);
thus L582: ( NOT ( NOT ( NOT R11 ) ) ) = ( id ( R1 \ ( dom ( NOT ( NOT R11 ) ) ) ) ) by L538
.= ( id ( R1 \ ( dom R11 ) ) ) by L548
.= ( NOT R11 ) by L538;
end;
theorem
L583: (for R1 being set holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( ( NOT R12 ) OR ( NOT R13 ) ) c= ( NOT ( R12 AND R13 ) ))))
proof
let R1 being set;
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R3 being set;
let R4 being set;
assume L584: [ R3 , R4 ] in ( ( NOT R12 ) OR ( NOT R13 ) );
L585: ([ R3 , R4 ] in ( NOT R12 ) or [ R3 , R4 ] in ( NOT R13 )) by L584 , XBOOLE_0:def 3;
L586: (R4 = R3 & R3 in R1 & (R3 nin ( dom R12 ) or R3 nin ( dom R13 ))) by L585 , L512;
L587: (R3 nin ( ( dom R12 ) /\ ( dom R13 ) ) & ( dom ( R12 AND R13 ) ) c= ( ( dom R12 ) /\ ( dom R13 ) )) by L586 , RELAT_1:2 , XBOOLE_0:def 4;
L588: R3 nin ( dom ( R12 AND R13 ) ) by L587;
thus L589: thesis by L588 , L586 , L512;
end;
theorem
L590: (for R1 being set holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( NOT ( R12 OR R13 ) ) = ( ( NOT R12 ) AND ( NOT R13 ) ))))
proof
let R1 being set;
let R12 being (Operation of R1);
let R13 being (Operation of R1);
let R3 being set;
let R4 being set;
thus L591: ([ R3 , R4 ] in ( NOT ( R12 OR R13 ) ) implies [ R3 , R4 ] in ( ( NOT R12 ) AND ( NOT R13 ) ))
proof
assume L592: [ R3 , R4 ] in ( NOT ( R12 OR R13 ) );
L593: (R3 = R4 & R3 in R1 & R3 nin ( dom ( R12 OR R13 ) )) by L592 , L512;
L594: R3 nin ( ( dom R12 ) \/ ( dom R13 ) ) by L593 , RELAT_1:1;
L595: (R3 nin ( dom R12 ) & R3 nin ( dom R13 )) by L594 , XBOOLE_0:def 3;
L596: ([ R3 , R4 ] in ( NOT R12 ) & [ R3 , R4 ] in ( NOT R13 )) by L595 , L593 , L512;
thus L597: thesis by L596 , XBOOLE_0:def 4;
end;

assume L598: [ R3 , R4 ] in ( ( NOT R12 ) AND ( NOT R13 ) );
L599: ([ R3 , R4 ] in ( NOT R12 ) & [ R3 , R4 ] in ( NOT R13 )) by L598 , XBOOLE_0:def 4;
L600: (R3 = R4 & R3 in R1 & R3 nin ( dom R12 ) & R3 nin ( dom R13 )) by L599 , L512;
L601: R3 nin ( ( dom R12 ) \/ ( dom R13 ) ) by L600 , XBOOLE_0:def 3;
L602: R3 nin ( dom ( R12 OR R13 ) ) by L601 , RELAT_1:1;
thus L603: thesis by L602 , L600 , L512;
end;
theorem
L604: (for R1 being set holds (for R11 being (Operation of R1) holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ((( dom R12 ) = R1 & ( dom R13 ) = R1) implies ( ( R12 OR R13 ) \& R11 ) = ( ( R12 \& R11 ) AND ( R13 \& R11 ) ))))))
proof
let R1 being set;
let R11 being (Operation of R1);
let R12 being (Operation of R1);
let R13 being (Operation of R1);
assume L605: (( dom R12 ) = R1 & ( dom R13 ) = R1);
let R3 being set;
let R4 being set;
thus L606: ([ R3 , R4 ] in ( ( R12 OR R13 ) \& R11 ) implies [ R3 , R4 ] in ( ( R12 \& R11 ) AND ( R13 \& R11 ) ))
proof
assume L607: [ R3 , R4 ] in ( ( R12 OR R13 ) \& R11 );
reconsider D42 = R3 , D43 = R4 as (Element of R1) by L607 , ZFMISC_1:87;
L608: D43 in ( D42 . ( ( R12 OR R13 ) \& R11 ) ) by L607 , RELAT_1:169;
L609: D43 in ( ( D42 . ( R12 OR R13 ) ) \& R11 ) by L608 , L496;
L610: (D43 in ( ( ( D42 . R12 ) OR ( D42 . R13 ) ) \& R11 ) & ( D42 . R12 ) <> ( {} ) & ( D42 . R13 ) <> ( {} )) by L609 , L605 , RELAT_1:170 , RELSET_2:10;
L611: D43 in ( ( ( D42 . R12 ) \& R11 ) AND ( ( D42 . R13 ) \& R11 ) ) by L610 , L256;
L612: D43 in ( ( D42 . ( R12 \& R11 ) ) AND ( ( D42 . R13 ) \& R11 ) ) by L611 , L496;
L613: D43 in ( ( D42 . ( R12 \& R11 ) ) AND ( D42 . ( R13 \& R11 ) ) ) by L612 , L496;
L614: D43 in ( D42 . ( ( R12 \& R11 ) AND ( R13 \& R11 ) ) ) by L613 , RELSET_2:11;
thus L615: thesis by L614 , RELAT_1:169;
end;

assume L616: [ R3 , R4 ] in ( ( R12 \& R11 ) AND ( R13 \& R11 ) );
reconsider D44 = R3 , D45 = R4 as (Element of R1) by L616 , ZFMISC_1:87;
L617: D45 in ( D44 . ( ( R12 \& R11 ) AND ( R13 \& R11 ) ) ) by L616 , RELAT_1:169;
L618: D45 in ( ( D44 . ( R12 \& R11 ) ) AND ( D44 . ( R13 \& R11 ) ) ) by L617 , RELSET_2:11;
L619: D45 in ( ( D44 . ( R12 \& R11 ) ) AND ( ( D44 . R13 ) \& R11 ) ) by L618 , L496;
L620: (D45 in ( ( ( D44 . R12 ) \& R11 ) AND ( ( D44 . R13 ) \& R11 ) ) & ( D44 . R12 ) <> ( {} ) & ( D44 . R13 ) <> ( {} )) by L619 , L496 , L605 , RELAT_1:170;
L621: D45 in ( ( ( D44 . R12 ) OR ( D44 . R13 ) ) \& R11 ) by L620 , L256;
L622: D45 in ( ( D44 . ( R12 OR R13 ) ) \& R11 ) by L621 , RELSET_2:10;
L623: D45 in ( D44 . ( ( R12 OR R13 ) \& R11 ) ) by L622 , L496;
thus L624: thesis by L623 , RELAT_1:169;
end;
definition
let R1 being set;
let R11 being (Operation of R1);
attr R11 is  filtering
means
:L625: R11 c= ( id R1 );
end;
theorem
L627: (for R1 being set holds (for R11 being (Operation of R1) holds (R11 is  filtering iff R11 = ( id ( dom R11 ) ))))
proof
let R1 being set;
let R11 being (Operation of R1);
thus L628: (R11 is  filtering implies R11 = ( id ( dom R11 ) ))
proof
assume L629: R11 c= ( id R1 );
let R3 being set;
let R4 being set;
thus L630: ([ R3 , R4 ] in R11 implies [ R3 , R4 ] in ( id ( dom R11 ) ))
proof
assume L631: [ R3 , R4 ] in R11;
L632: (R3 in ( dom R11 ) & R3 = R4) by L631 , L629 , RELAT_1:def 10 , XTUPLE_0:def 12;
thus L633: thesis by L632 , RELAT_1:def 10;
end;

assume L634: [ R3 , R4 ] in ( id ( dom R11 ) );
L635: (R3 in ( dom R11 ) & R3 = R4) by L634 , RELAT_1:def 10;
consider C71 being set such that L636: [ R3 , C71 ] in R11 by L635 , XTUPLE_0:def 12;
thus L637: thesis by L629 , L635 , L636 , RELAT_1:def 10;
end;

assume L638: R11 = ( id ( dom R11 ) );
thus L639: R11 c= ( id R1 ) by L638 , SYSREL:15;
end;
registration
let R1 being set;
let R11 being (Operation of R1);
cluster ( NOT R11 ) ->  filtering;
coherence
proof
L640: ( NOT R11 ) = ( id ( R1 \ ( dom R11 ) ) ) by L538;
thus L641: ( NOT R11 ) c= ( id R1 ) by L640 , SYSREL:15;
end;
end;
registration
let R1 being set;
cluster  filtering for (Operation of R1);
existence
proof
set D46 = the (Operation of R1);
take ( NOT D46 );
thus L643: thesis;
end;
end;
registration
let R1 being set;
let R20 being  filtering (Operation of R1);
let R11 being (Operation of R1);
cluster ( R20 AND R11 ) ->  filtering for (Operation of R1);
coherence
proof
let R12 being (Operation of R1);
assume L645: R12 = ( R20 AND R11 );
L646: (R12 c= R20 & R20 c= ( id R1 )) by L645 , L625 , XBOOLE_1:17;
thus L647: R12 c= ( id R1 ) by L646 , XBOOLE_1:1;
end;
cluster ( R11 AND R20 ) ->  filtering for (Operation of R1);
coherence;
cluster ( R20 BUTNOT R11 ) ->  filtering for (Operation of R1);
coherence
proof
let R12 being (Operation of R1);
assume L648: R12 = ( R20 BUTNOT R11 );
L649: (R12 c= R20 & R20 c= ( id R1 )) by L648 , L625 , XBOOLE_1:36;
thus L650: R12 c= ( id R1 ) by L649 , XBOOLE_1:1;
end;
end;
registration
let R1 being set;
let R21 being  filtering (Operation of R1);
let R22 being  filtering (Operation of R1);
cluster ( R21 OR R22 ) ->  filtering for (Operation of R1);
coherence
proof
let R12 being (Operation of R1);
assume L652: R12 = ( R21 OR R22 );
L653: (R21 c= ( id R1 ) & R22 c= ( id R1 )) by L625;
thus L654: R12 c= ( id R1 ) by L653 , L652 , XBOOLE_1:8;
end;
end;
theorem
L656: (for R1 being set holds (for R3 being set holds (for R10 being (Element of R1) holds (for R20 being  filtering (Operation of R1) holds (R3 in ( R10 . R20 ) implies R3 = R10)))))
proof
let R1 being set;
let R3 being set;
let R10 being (Element of R1);
let R20 being  filtering (Operation of R1);
assume L657: R3 in ( R10 . R20 );
L658: ([ R10 , R3 ] in R20 & R20 c= ( id R1 )) by L657 , L625 , RELAT_1:169;
thus L659: thesis by L658 , RELAT_1:def 10;
end;
theorem
L660: (for R1 being set holds (for R5 being (List of R1) holds (for R20 being  filtering (Operation of R1) holds ( R5 | R20 ) = ( R5 WHERE R20 ))))
proof
let R1 being set;
let R5 being (List of R1);
let R20 being  filtering (Operation of R1);
thus L661: ( R5 | R20 ) c= ( R5 WHERE R20 )
proof
let R3 being set;
assume L662: R3 in ( R5 | R20 );
consider R17 being (Element of R1) such that L663: (R3 in ( R17 . R20 ) & R17 in R5) by L662 , L239;
L664: R3 = R17 by L663 , L656;
thus L665: thesis by L664 , L663 , L96;
end;

let R3 being set;
assume L666: R3 in ( R5 WHERE R20 );
reconsider D47 = R3 as (Element of R1) by L666;
L667: (D47 in R5 & ( D47 . R20 ) <> ( {} )) by L666 , L96;
set D48 = the (Element of ( D47 . R20 ));
L668: [ D47 , D48 ] in R20 by L667 , RELAT_1:169;
L669: R20 c= ( id R1 ) by L625;
L670: D47 = D48 by L669 , L668 , RELAT_1:def 10;
thus L671: thesis by L670 , L667 , L239;
end;
theorem
L672: (for R1 being set holds (for R20 being  filtering (Operation of R1) holds ( NOT ( NOT R20 ) ) = R20))
proof
let R1 being set;
let R20 being  filtering (Operation of R1);
thus L673: ( NOT ( NOT R20 ) ) = ( id ( R1 \ ( dom ( NOT R20 ) ) ) ) by L538
.= ( id ( R1 \ ( dom ( id ( R1 \ ( dom R20 ) ) ) ) ) ) by L538
.= ( id ( R1 \ ( R1 \ ( dom R20 ) ) ) ) by RELAT_1:45
.= ( id ( R1 /\ ( dom R20 ) ) ) by XBOOLE_1:48
.= ( id ( dom R20 ) ) by XBOOLE_1:28
.= R20 by L627;
end;
theorem
L674: (for R1 being set holds (for R21 being  filtering (Operation of R1) holds (for R22 being  filtering (Operation of R1) holds ( NOT ( R21 AND R22 ) ) = ( ( NOT R21 ) OR ( NOT R22 ) ))))
proof
let R1 being set;
let R21 being  filtering (Operation of R1);
let R22 being  filtering (Operation of R1);
L675: (R21 = ( id ( dom R21 ) ) & R22 = ( id ( dom R22 ) )) by L627;
L676: ( NOT ( R21 AND R22 ) ) = ( id ( R1 \ ( dom ( R21 AND R22 ) ) ) ) by L538
.= ( id ( R1 \ ( dom ( id ( ( dom R21 ) AND ( dom R22 ) ) ) ) ) ) by L675 , SYSREL:14
.= ( id ( R1 \ ( ( dom R21 ) AND ( dom R22 ) ) ) ) by RELAT_1:45
.= ( id ( ( R1 \ ( dom R21 ) ) \/ ( R1 \ ( dom R22 ) ) ) ) by XBOOLE_1:54
.= ( ( id ( R1 \ ( dom R21 ) ) ) \/ ( id ( R1 \ ( dom R22 ) ) ) ) by SYSREL:14
.= ( ( NOT R21 ) \/ ( id ( R1 \ ( dom R22 ) ) ) ) by L538;
thus L677: thesis by L676 , L538;
end;
theorem
L678: (for R1 being set holds (for R11 being (Operation of R1) holds ( dom ( R11 OR ( NOT R11 ) ) ) = R1))
proof
let R1 being set;
let R11 being (Operation of R1);
thus L679: ( dom ( R11 OR ( NOT R11 ) ) ) = ( ( dom R11 ) OR ( dom ( NOT R11 ) ) ) by RELAT_1:1
.= ( ( dom R11 ) \/ ( dom ( id ( R1 \ ( dom R11 ) ) ) ) ) by L538
.= ( ( dom R11 ) OR ( R1 \ ( dom R11 ) ) ) by RELAT_1:45
.= ( ( dom R11 ) \/ R1 ) by XBOOLE_1:39
.= R1 by XBOOLE_1:12;
end;
theorem
L680: (for R1 being set holds (for R20 being  filtering (Operation of R1) holds ( R20 OR ( NOT R20 ) ) = ( id R1 )))
proof
let R1 being set;
let R20 being  filtering (Operation of R1);
L681: (( dom ( R20 OR ( NOT R20 ) ) ) = R1 & ( R20 OR ( NOT R20 ) ) c= ( id R1 )) by L678 , L625;
thus L682: thesis by L681 , SYSREL:17;
end;
theorem
L683: (for R1 being set holds (for R11 being (Operation of R1) holds ( R11 AND ( NOT R11 ) ) = ( {} )))
proof
let R1 being set;
let R11 being (Operation of R1);
L684: ( dom ( R11 AND ( NOT R11 ) ) ) = ( dom ( R11 /\ ( id ( R1 \ ( dom R11 ) ) ) ) ) by L538;
L685: ( dom ( R11 AND ( NOT R11 ) ) ) c= ( ( dom R11 ) /\ ( dom ( id ( R1 \ ( dom R11 ) ) ) ) ) by L684 , RELAT_1:2;
L686: ( ( dom R11 ) /\ ( dom ( id ( R1 \ ( dom R11 ) ) ) ) ) = ( ( dom R11 ) /\ ( R1 \ ( dom R11 ) ) ) by RELAT_1:45
.= ( ( ( dom R11 ) /\ R1 ) \ ( dom R11 ) ) by XBOOLE_1:49
.= ( ( dom R11 ) \ ( dom R11 ) ) by XBOOLE_1:28
.= ( {} ) by XBOOLE_1:37;
thus L687: thesis by L686 , L685 , RELAT_1:41 , XBOOLE_1:3;
end;
theorem
L688: (for R1 being set holds (for R12 being (Operation of R1) holds (for R13 being (Operation of R1) holds ( ( R12 OR R13 ) AND ( NOT R12 ) ) c= R13)))
proof
let R1 being set;
let R12 being (Operation of R1);
let R13 being (Operation of R1);
L689: ( ( R12 OR R13 ) AND ( NOT R12 ) ) = ( ( R12 AND ( NOT R12 ) ) OR ( R13 AND ( NOT R12 ) ) ) by XBOOLE_1:23
.= ( ( {} ) \/ ( R13 AND ( NOT R12 ) ) ) by L683
.= ( R13 AND ( NOT R12 ) );
thus L690: thesis by L689 , XBOOLE_1:17;
end;
begin
definition
let C72 being FinSequence;
let C73 being set;
func #occurrences (C73 , C72) -> Nat equals 
( card { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C72 ) & C73 in ( C72 . R23 )) } );
coherence
proof
L691: { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C72 ) & C73 in ( C72 . R23 )) } c= ( dom C72 )
proof
let R3 being set;
assume L692: R3 in { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C72 ) & C73 in ( C72 . R23 )) };
L693: (ex R23 being (Element of ( NAT )) st (R3 = R23 & R23 in ( dom C72 ) & C73 in ( C72 . R23 ))) by L692;
thus L694: thesis by L693;
end;
thus L695: thesis by L691;
end;
end;
theorem
L697: (for B12 being FinSequence holds (for B13 being set holds ( #occurrences (B13 , B12) ) <= ( len B12 )))
proof
let C74 being FinSequence;
let C75 being set;
L698: { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C74 ) & C75 in ( C74 . R23 )) } c= ( dom C74 )
proof
let R3 being set;
assume L699: R3 in { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C74 ) & C75 in ( C74 . R23 )) };
L700: (ex R23 being (Element of ( NAT )) st (R3 = R23 & R23 in ( dom C74 ) & C75 in ( C74 . R23 ))) by L699;
thus L701: thesis by L700;
end;
L702: (( #occurrences (C75 , C74) ) c= ( card ( dom C74 ) ) & ( dom C74 ) = ( Seg ( len C74 ) ) & ( card ( Seg ( len C74 ) ) ) = ( len C74 )) by L698 , CARD_1:11 , FINSEQ_1:57 , FINSEQ_1:def 3;
thus L703: ( #occurrences (C75 , C74) ) <= ( len C74 ) by L702 , NAT_1:39;
end;
theorem
L704: (for B14 being FinSequence holds (for B15 being set holds ((B14 <> ( {} ) & ( #occurrences (B15 , B14) ) = ( len B14 )) iff B15 in ( meet ( rng B14 ) ))))
proof
let C76 being FinSequence;
let C77 being set;
L705: { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C76 ) & C77 in ( C76 . R23 )) } c= ( dom C76 )
proof
let R3 being set;
assume L706: R3 in { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C76 ) & C77 in ( C76 . R23 )) };
L707: (ex R23 being (Element of ( NAT )) st (R3 = R23 & R23 in ( dom C76 ) & C77 in ( C76 . R23 ))) by L706;
thus L708: thesis by L707;
end;
L709: (( dom C76 ) = ( Seg ( len C76 ) ) & ( card ( Seg ( len C76 ) ) ) = ( len C76 )) by FINSEQ_1:57 , FINSEQ_1:def 3;
thus L710:now
assume L711: C76 <> ( {} );
L712: ( rng C76 ) <> ( {} ) by L711 , RELAT_1:41;
assume L713: ( #occurrences (C77 , C76) ) = ( len C76 );
L714: { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C76 ) & C77 in ( C76 . R23 )) } = ( dom C76 ) by L713 , L705 , L709 , CARD_FIN:1;
L715:
now
let R3 being set;
assume L716: R3 in ( rng C76 );
consider R4 being set such that L717: (R4 in ( dom C76 ) & R3 = ( C76 . R4 )) by L716 , FUNCT_1:def 3;
consider R23 being (Element of ( NAT )) such that L718: (R4 = R23 & R23 in ( dom C76 ) & C77 in ( C76 . R23 )) by L714 , L717;
thus L719: C77 in R3 by L717 , L718;
end;
thus L720: C77 in ( meet ( rng C76 ) ) by L715 , L712 , SETFAM_1:def 1;
end;
assume L721: C77 in ( meet ( rng C76 ) );
thus L722: C76 <> ( {} ) by L721 , RELAT_1:38 , SETFAM_1:def 1;
L723: ( dom C76 ) c= { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C76 ) & C77 in ( C76 . R23 )) }
proof
let R3 being set;
assume L724: R3 in ( dom C76 );
L725: ( C76 . R3 ) in ( rng C76 ) by L724 , FUNCT_1:def 3;
L726: C77 in ( C76 . R3 ) by L725 , L721 , SETFAM_1:def 1;
thus L727: thesis by L726 , L724;
end;
thus L728: ( #occurrences (C77 , C76) ) = ( len C76 ) by L723 , L709 , L705 , XBOOLE_0:def 10;
end;
definition
let C78 being FinSequence;
func max# C78 -> Nat means 
:L729: ((for B16 being set holds ( #occurrences (B16 , C78) ) <= it) & (for R18 being Nat holds ((for B17 being set holds ( #occurrences (B17 , C78) ) <= R18) implies it <= R18)));
existence
proof
defpred S6[ Nat ] means (for B18 being set holds ( #occurrences (B18 , C78) ) <= $1);
L730: S6[ ( len C78 ) ] by L697;
L731: (ex R18 being Nat st S6[ R18 ]) by L730;
consider R18 being Nat such that L732: (S6[ R18 ] & (for B19 being Nat holds (S6[ B19 ] implies R18 <= B19))) from NAT_1:sch 5(L731);
take R18;
thus L733: thesis by L732;
end;
uniqueness
proof
let C79 , C80 being Nat;
assume that
L734: ((for B20 being set holds ( #occurrences (B20 , C78) ) <= C79) & (for R18 being Nat holds ((for B21 being set holds ( #occurrences (B21 , C78) ) <= R18) implies C79 <= R18)))
and
L735: ((for B22 being set holds ( #occurrences (B22 , C78) ) <= C80) & (for R18 being Nat holds ((for B23 being set holds ( #occurrences (B23 , C78) ) <= R18) implies C80 <= R18)));
L736: (C79 <= C80 & C80 <= C79) by L734 , L735;
thus L737: thesis by L736 , XXREAL_0:1;
end;
end;
theorem
L739: (for B24 being FinSequence holds ( max# B24 ) <= ( len B24 ))
proof
let C81 being FinSequence;
L740: (for B25 being set holds ( #occurrences (B25 , C81) ) <= ( len C81 )) by L697;
thus L741: ( max# C81 ) <= ( len C81 ) by L740 , L729;
end;
theorem
L742: (for B26 being FinSequence holds (for B27 being set holds (( #occurrences (B27 , B26) ) = ( len B26 ) implies ( max# B26 ) = ( len B26 ))))
proof
let C82 being FinSequence;
let C83 being set;
assume L743: ( #occurrences (C83 , C82) ) = ( len C82 );
L744: (( len C82 ) <= ( max# C82 ) & ( max# C82 ) <= ( len C82 )) by L743 , L729 , L739;
thus L745: ( max# C82 ) = ( len C82 ) by L744 , XXREAL_0:1;
end;
definition
let R1 being set;
let C84 being (FinSequence of ( bool R1 ));
let C85 being Nat;
func ROUGH (C84 , C85) -> (List of R1) equals 
:L746: { R10 where R10 is (Element of R1) : C85 <= ( #occurrences (R10 , C84) ) } if R1 <> ( {} );
consistency;
coherence
proof
assume L747: R1 <> ( {} );
L748: { R10 where R10 is (Element of R1) : C85 <= ( #occurrences (R10 , C84) ) } c= R1
proof
let R3 being set;
assume L749: R3 in { R10 where R10 is (Element of R1) : C85 <= ( #occurrences (R10 , C84) ) };
L750: (ex R10 being (Element of R1) st (R3 = R10 & C85 <= ( #occurrences (R10 , C84) ))) by L749;
thus L751: thesis by L750 , L747;
end;
thus L752: { R10 where R10 is (Element of R1) : C85 <= ( #occurrences (R10 , C84) ) } is (List of R1) by L748;
end;
let C86 being Nat;
func ROUGH (C84 , C85 , C86) -> (List of R1) equals 
:L753: { R10 where R10 is (Element of R1) : (C85 <= ( #occurrences (R10 , C84) ) & ( #occurrences (R10 , C84) ) <= C86) } if R1 <> ( {} );
consistency;
coherence
proof
assume L754: R1 <> ( {} );
L755: { R10 where R10 is (Element of R1) : (C85 <= ( #occurrences (R10 , C84) ) & ( #occurrences (R10 , C84) ) <= C86) } c= R1
proof
let R3 being set;
assume L756: R3 in { R10 where R10 is (Element of R1) : (C85 <= ( #occurrences (R10 , C84) ) & ( #occurrences (R10 , C84) ) <= C86) };
L757: (ex R10 being (Element of R1) st (R3 = R10 & C85 <= ( #occurrences (R10 , C84) ) & ( #occurrences (R10 , C84) ) <= C86)) by L756;
thus L758: thesis by L757 , L754;
end;
thus L759: thesis by L755;
end;
end;
definition
let R1 being set;
let C87 being (FinSequence of ( bool R1 ));
func ROUGH C87 -> (List of R1) equals 
( ROUGH (C87 , ( max# C87 )) );
coherence;
end;
theorem
L762: (for R1 being set holds (for R18 being Nat holds (for B28 being (FinSequence of ( bool R1 )) holds ( ROUGH (B28 , R18 , ( len B28 )) ) = ( ROUGH (B28 , R18) ))))
proof
let R1 being set;
let R18 being Nat;
let C88 being (FinSequence of ( bool R1 ));
thus L763: ( ROUGH (C88 , R18 , ( len C88 )) ) c= ( ROUGH (C88 , R18) )
proof
let R3 being set;
assume L764: R3 in ( ROUGH (C88 , R18 , ( len C88 )) );
L765: R3 in { R10 where R10 is (Element of R1) : (R18 <= ( #occurrences (R10 , C88) ) & ( #occurrences (R10 , C88) ) <= ( len C88 )) } by L764 , L753;
L766: (ex R10 being (Element of R1) st (R3 = R10 & R18 <= ( #occurrences (R10 , C88) ) & ( #occurrences (R10 , C88) ) <= ( len C88 ))) by L765;
L767: R3 in { R10 where R10 is (Element of R1) : R18 <= ( #occurrences (R10 , C88) ) } by L766;
thus L768: thesis by L767 , L764 , L746;
end;

let R3 being set;
assume L769: R3 in ( ROUGH (C88 , R18) );
L770: R3 in { R10 where R10 is (Element of R1) : R18 <= ( #occurrences (R10 , C88) ) } by L769 , L746;
consider R10 being (Element of R1) such that L771: (R3 = R10 & R18 <= ( #occurrences (R10 , C88) )) by L770;
L772: ( #occurrences (R10 , C88) ) <= ( len C88 ) by L697;
L773: R3 in { B29 where B29 is (Element of R1) : (R18 <= ( #occurrences (B29 , C88) ) & ( #occurrences (B29 , C88) ) <= ( len C88 )) } by L772 , L771;
thus L774: thesis by L773 , L769 , L753;
end;
theorem
L775: (for R1 being set holds (for R18 being Nat holds (for R19 being Nat holds (for B30 being (FinSequence of ( bool R1 )) holds (R18 <= R19 implies ( ROUGH (B30 , R19) ) c= ( ROUGH (B30 , R18) ))))))
proof
let R1 being set;
let R18 being Nat;
let R19 being Nat;
let C89 being (FinSequence of ( bool R1 ));
assume L776: R18 <= R19;
let R3 being set;
assume L777: R3 in ( ROUGH (C89 , R19) );
L778: R3 in { R10 where R10 is (Element of R1) : R19 <= ( #occurrences (R10 , C89) ) } by L777 , L746;
consider R15 being (Element of R1) such that L779: (R3 = R15 & R19 <= ( #occurrences (R15 , C89) )) by L778;
L780: R18 <= ( #occurrences (R15 , C89) ) by L776 , L779 , XXREAL_0:2;
L781: R3 in { R10 where R10 is (Element of R1) : R18 <= ( #occurrences (R10 , C89) ) } by L780 , L779;
thus L782: R3 in ( ROUGH (C89 , R18) ) by L781 , L777 , L746;
end;
theorem
L783: (for R1 being set holds (for B31 being (FinSequence of ( bool R1 )) holds (for B32 , B33 , B34 , B35 being Nat holds ((B32 <= B34 & B33 <= B35) implies ( ROUGH (B31 , B34 , B33) ) c= ( ROUGH (B31 , B32 , B35) )))))
proof
let R1 being set;
let C90 being (FinSequence of ( bool R1 ));
let C91 , C92 , C93 , C94 being Nat;
assume L784: C91 <= C93;
assume L785: C92 <= C94;
let R3 being set;
assume L786: R3 in ( ROUGH (C90 , C93 , C92) );
L787: R3 in { R10 where R10 is (Element of R1) : (C93 <= ( #occurrences (R10 , C90) ) & ( #occurrences (R10 , C90) ) <= C92) } by L786 , L753;
consider R15 being (Element of R1) such that L788: (R3 = R15 & C93 <= ( #occurrences (R15 , C90) ) & ( #occurrences (R15 , C90) ) <= C92) by L787;
L789: (C91 <= ( #occurrences (R15 , C90) ) & ( #occurrences (R15 , C90) ) <= C94) by L784 , L785 , L788 , XXREAL_0:2;
L790: R3 in { R10 where R10 is (Element of R1) : (C91 <= ( #occurrences (R10 , C90) ) & ( #occurrences (R10 , C90) ) <= C94) } by L789 , L788;
thus L791: R3 in ( ROUGH (C90 , C91 , C94) ) by L790 , L786 , L753;
end;
theorem
L792: (for R1 being set holds (for R18 being Nat holds (for R19 being Nat holds (for B36 being (FinSequence of ( bool R1 )) holds ( ROUGH (B36 , R18 , R19) ) c= ( ROUGH (B36 , R18) )))))
proof
let R1 being set;
let R18 being Nat;
let R19 being Nat;
let C95 being (FinSequence of ( bool R1 ));
let R3 being set;
assume L793: R3 in ( ROUGH (C95 , R18 , R19) );
L794: R3 in { R10 where R10 is (Element of R1) : (R18 <= ( #occurrences (R10 , C95) ) & ( #occurrences (R10 , C95) ) <= R19) } by L793 , L753;
L795: (ex R10 being (Element of R1) st (R3 = R10 & R18 <= ( #occurrences (R10 , C95) ) & ( #occurrences (R10 , C95) ) <= R19)) by L794;
L796: R3 in { R10 where R10 is (Element of R1) : R18 <= ( #occurrences (R10 , C95) ) } by L795;
thus L797: R3 in ( ROUGH (C95 , R18) ) by L796 , L793 , L746;
end;
theorem
L798: (for R1 being set holds (for B37 being (FinSequence of ( bool R1 )) holds (B37 <> ( {} ) implies ( ROUGH (B37 , ( len B37 )) ) = ( meet ( rng B37 ) ))))
proof
let R1 being set;
let C96 being (FinSequence of ( bool R1 ));
assume that
L799: C96 <> ( {} );
thus L800: ( ROUGH (C96 , ( len C96 )) ) c= ( meet ( rng C96 ) )
proof
let R3 being set;
assume L801: R3 in ( ROUGH (C96 , ( len C96 )) );
L802: R3 in { R10 where R10 is (Element of R1) : ( len C96 ) <= ( #occurrences (R10 , C96) ) } by L801 , L746;
consider R10 being (Element of R1) such that L803: (R3 = R10 & ( len C96 ) <= ( #occurrences (R10 , C96) )) by L802;
L804: ( #occurrences (R10 , C96) ) <= ( len C96 ) by L697;
thus L805: thesis by L804 , L799 , L803 , L704 , XXREAL_0:1;
end;

let R3 being set;
assume L806: R3 in ( meet ( rng C96 ) );
L807: ( #occurrences (R3 , C96) ) = ( len C96 ) by L806 , L704;
L808: R3 in { R10 where R10 is (Element of R1) : ( len C96 ) <= ( #occurrences (R10 , C96) ) } by L807 , L806;
thus L809: thesis by L808 , L806 , L746;
end;
theorem
L810: (for R1 being set holds (for B38 being (FinSequence of ( bool R1 )) holds ( ROUGH (B38 , 1) ) = ( Union B38 )))
proof
let R1 being set;
let C97 being (FinSequence of ( bool R1 ));
thus L811: ( ROUGH (C97 , 1) ) c= ( Union C97 )
proof
let R3 being set;
assume L812: R3 in ( ROUGH (C97 , 1) );
L813: R3 in { R10 where R10 is (Element of R1) : 1 <= ( #occurrences (R10 , C97) ) } by L812 , L746;
consider R10 being (Element of R1) such that L814: (R3 = R10 & 1 <= ( #occurrences (R10 , C97) )) by L813;
L815: 1 = ( ( 0 ) + 1 );
L816: ( #occurrences (R10 , C97) ) > ( 0 ) by L815 , L814 , NAT_1:13;
L817: { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C97 ) & R10 in ( C97 . R23 )) } <> ( {} ) by L816;
consider R4 being set such that L818: R4 in { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C97 ) & R10 in ( C97 . R23 )) } by L817 , XBOOLE_0:def 1;
consider R23 being (Element of ( NAT )) such that L819: (R4 = R23 & R23 in ( dom C97 ) & R10 in ( C97 . R23 )) by L818;
thus L820: thesis by L814 , L819 , CARD_5:2;
end;

let R3 being set;
assume L821: R3 in ( Union C97 );
consider R4 being set such that L822: (R4 in ( dom C97 ) & R3 in ( C97 . R4 )) by L821 , CARD_5:2;
L823: R4 in { R23 where R23 is (Element of ( NAT )) : (R23 in ( dom C97 ) & R3 in ( C97 . R23 )) } by L822;
L824: ( card { R4 } ) c= ( #occurrences (R3 , C97) ) by L823 , CARD_1:11 , ZFMISC_1:31;
L825: 1 c= ( #occurrences (R3 , C97) ) by L824 , CARD_1:30;
L826: 1 <= ( #occurrences (R3 , C97) ) by L825 , NAT_1:39;
L827: R3 in { R10 where R10 is (Element of R1) : 1 <= ( #occurrences (R10 , C97) ) } by L826 , L821;
thus L828: thesis by L827 , L821 , L746;
end;
theorem
L829: (for R1 being set holds (for B39 , B40 being (List of R1) holds ( ROUGH (<* B39 , B40 *> , 2) ) = ( B39 AND B40 )))
proof
let R1 being set;
let C98 , C99 being (List of R1);
L830: (( len <* C98 , C99 *> ) = 2 & ( rng <* C98 , C99 *> ) = { C98 , C99 } & ( meet { C98 , C99 } ) = ( C98 AND C99 )) by FINSEQ_1:44 , FINSEQ_2:127 , SETFAM_1:11;
thus L831: ( ROUGH (<* C98 , C99 *> , 2) ) = ( C98 AND C99 ) by L830 , L798;
end;
theorem
L832: (for R1 being set holds (for B41 , B42 being (List of R1) holds ( ROUGH (<* B41 , B42 *> , 1) ) = ( B41 OR B42 )))
proof
let R1 being set;
let C100 , C101 being (List of R1);
L833: (( len <* C100 , C101 *> ) = 2 & ( rng <* C100 , C101 *> ) = { C100 , C101 } & ( union { C100 , C101 } ) = ( C100 OR C101 ) & ( Union <* C100 , C101 *> ) = ( union ( rng <* C100 , C101 *> ) )) by CARD_3:def 4 , FINSEQ_1:44 , FINSEQ_2:127 , ZFMISC_1:75;
thus L834: ( ROUGH (<* C100 , C101 *> , 1) ) = ( C100 OR C101 ) by L833 , L810;
end;
begin
definition
struct (1-sorted) ConstructorDB(# carrier -> set , Constrs -> (List of the carrier) , ref-operation -> (Relation of the carrier , the Constrs) #);
end;
definition
let C102 being 1-sorted;
mode List of C102
 is (List of (the carrier of C102));
mode Operation of C102
 is (Operation of (the carrier of C102));
end;
definition
let R1 being set;
let C103 being (Subset of R1);
let C104 being (Relation of R1 , C103);
func @ C104 -> (Relation of R1) equals 
C104;
coherence
proof
L837: [: R1 , C103 :] c= [: R1 , R1 :] by ZFMISC_1:96;
thus L838: thesis by L837 , XBOOLE_1:1;
end;
end;
definition
let C105 being ConstructorDB;
let C106 being (Element of C105);
func C106 ref -> (List of C105) equals 
( C106 . ( @ (the ref-operation of C105) ) );
coherence;
func C106 occur -> (List of C105) equals 
( C106 . ( ( @ (the ref-operation of C105) ) ~ ) );
coherence;
end;
theorem
L841: (for B43 being ConstructorDB holds (for B44 , B45 being (Element of B43) holds (B44 in ( B45 ref ) iff B45 in ( B44 occur ))))
proof
let C107 being ConstructorDB;
let C108 , C109 being (Element of C107);
thus L842:now
assume L843: C108 in ( C109 ref );
L844: [ C109 , C108 ] in ( @ (the ref-operation of C107) ) by L843 , RELAT_1:169;
L845: [ C108 , C109 ] in ( ( @ (the ref-operation of C107) ) ~ ) by L844 , RELAT_1:def 7;
thus L846: C109 in ( C108 occur ) by L845 , RELAT_1:169;
end;
assume L847: C109 in ( C108 occur );
L848: [ C108 , C109 ] in ( ( @ (the ref-operation of C107) ) ~ ) by L847 , RELAT_1:169;
L849: [ C109 , C108 ] in ( @ (the ref-operation of C107) ) by L848 , RELAT_1:def 7;
thus L850: C108 in ( C109 ref ) by L849 , RELAT_1:169;
end;
definition
let C110 being ConstructorDB;
attr C110 is  ref-finite
means
:L851: (for B46 being (Element of C110) holds ( B46 ref ) is  finite);
end;
registration
cluster  finite ->  ref-finite for ConstructorDB;
coherence
proof
let C111 being ConstructorDB;
assume L853: (the carrier of C111) is  finite;
let C112 being (Element of C111);
thus L854: thesis by L853;
end;
end;
registration
cluster  finite non  empty for ConstructorDB;
existence
proof
set D49 = the  finite non  empty set;
set D50 = the (Subset of D49);
set D51 = the (Relation of D49 , D50);
take D52 = ConstructorDB (# D49 , D50 , D51 #);
thus L856: (the carrier of D52) is  finite non  empty;
end;
end;
registration
let C113 being  ref-finite ConstructorDB;
let C114 being (Element of C113);
cluster ( C114 ref ) ->  finite;
coherence by L851;
end;
definition
let C115 being ConstructorDB;
let C116 being (FinSequence of (the Constrs of C115));
func ATLEAST C116 -> (List of C115) equals 
:L859: { B47 where B47 is (Element of C115) : ( rng C116 ) c= ( B47 ref ) } if (the carrier of C115) <> ( {} );
consistency;
coherence
proof
assume L860: (the carrier of C115) <> ( {} );
L861: { B48 where B48 is (Element of C115) : ( rng C116 ) c= ( B48 ref ) } c= (the carrier of C115)
proof
let R3 being set;
assume L862: R3 in { B49 where B49 is (Element of C115) : ( rng C116 ) c= ( B49 ref ) };
L863: (ex B50 being (Element of C115) st (R3 = B50 & ( rng C116 ) c= ( B50 ref ))) by L862;
thus L864: thesis by L863 , L860;
end;
thus L865: thesis by L861;
end;
func ATMOST C116 -> (List of C115) equals 
:L866: { B51 where B51 is (Element of C115) : ( B51 ref ) c= ( rng C116 ) } if (the carrier of C115) <> ( {} );
consistency;
coherence
proof
assume L867: (the carrier of C115) <> ( {} );
L868: { B52 where B52 is (Element of C115) : ( B52 ref ) c= ( rng C116 ) } c= (the carrier of C115)
proof
let R3 being set;
assume L869: R3 in { B53 where B53 is (Element of C115) : ( B53 ref ) c= ( rng C116 ) };
L870: (ex B54 being (Element of C115) st (R3 = B54 & ( B54 ref ) c= ( rng C116 ))) by L869;
thus L871: thesis by L870 , L867;
end;
thus L872: thesis by L868;
end;
func EXACTLY C116 -> (List of C115) equals 
:L873: { B55 where B55 is (Element of C115) : ( B55 ref ) = ( rng C116 ) } if (the carrier of C115) <> ( {} );
consistency;
coherence
proof
assume L874: (the carrier of C115) <> ( {} );
L875: { B56 where B56 is (Element of C115) : ( B56 ref ) = ( rng C116 ) } c= (the carrier of C115)
proof
let R3 being set;
assume L876: R3 in { B57 where B57 is (Element of C115) : ( B57 ref ) = ( rng C116 ) };
L877: (ex B58 being (Element of C115) st (R3 = B58 & ( B58 ref ) = ( rng C116 ))) by L876;
thus L878: thesis by L877 , L874;
end;
thus L879: thesis by L875;
end;
let C117 being Nat;
func ATLEAST- (C116 , C117) -> (List of C115) equals 
:L880: { B59 where B59 is (Element of C115) : ( card ( ( rng C116 ) \ ( B59 ref ) ) ) <= C117 } if (the carrier of C115) <> ( {} );
consistency;
coherence
proof
assume L881: (the carrier of C115) <> ( {} );
L882: { B60 where B60 is (Element of C115) : ( card ( ( rng C116 ) \ ( B60 ref ) ) ) <= C117 } c= (the carrier of C115)
proof
let R3 being set;
assume L883: R3 in { B61 where B61 is (Element of C115) : ( card ( ( rng C116 ) \ ( B61 ref ) ) ) <= C117 };
L884: (ex B62 being (Element of C115) st (R3 = B62 & ( card ( ( rng C116 ) \ ( B62 ref ) ) ) <= C117)) by L883;
thus L885: thesis by L884 , L881;
end;
thus L886: thesis by L882;
end;
end;
definition
let C118 being  ref-finite ConstructorDB;
let C119 being (FinSequence of (the Constrs of C118));
let C120 being Nat;
func ATMOST+ (C119 , C120) -> (List of C118) equals 
:L888: { B63 where B63 is (Element of C118) : ( card ( ( B63 ref ) \ ( rng C119 ) ) ) <= C120 } if (the carrier of C118) <> ( {} );
consistency;
coherence
proof
assume L889: (the carrier of C118) <> ( {} );
L890: { B64 where B64 is (Element of C118) : ( card ( ( B64 ref ) \ ( rng C119 ) ) ) <= C120 } c= (the carrier of C118)
proof
let R3 being set;
assume L891: R3 in { B65 where B65 is (Element of C118) : ( card ( ( B65 ref ) \ ( rng C119 ) ) ) <= C120 };
L892: (ex B66 being (Element of C118) st (R3 = B66 & ( card ( ( B66 ref ) \ ( rng C119 ) ) ) <= C120)) by L891;
thus L893: thesis by L892 , L889;
end;
thus L894: thesis by L890;
end;
let C121 being Nat;
func EXACTLY+- (C119 , C120 , C121) -> (List of C118) equals 
:L895: { B67 where B67 is (Element of C118) : (( card ( ( B67 ref ) \ ( rng C119 ) ) ) <= C120 & ( card ( ( rng C119 ) \ ( B67 ref ) ) ) <= C121) } if (the carrier of C118) <> ( {} );
consistency;
coherence
proof
assume L896: (the carrier of C118) <> ( {} );
L897: { B68 where B68 is (Element of C118) : (( card ( ( B68 ref ) \ ( rng C119 ) ) ) <= C120 & ( card ( ( rng C119 ) \ ( B68 ref ) ) ) <= C121) } c= (the carrier of C118)
proof
let R3 being set;
assume L898: R3 in { B69 where B69 is (Element of C118) : (( card ( ( B69 ref ) \ ( rng C119 ) ) ) <= C120 & ( card ( ( rng C119 ) \ ( B69 ref ) ) ) <= C121) };
L899: (ex B70 being (Element of C118) st (R3 = B70 & ( card ( ( B70 ref ) \ ( rng C119 ) ) ) <= C120 & ( card ( ( rng C119 ) \ ( B70 ref ) ) ) <= C121)) by L898;
thus L900: thesis by L899 , L896;
end;
thus L901: thesis by L897;
end;
end;
theorem
L903: (for R24 being ConstructorDB holds (for R25 being (FinSequence of (the Constrs of R24)) holds ( ATLEAST- (R25 , ( 0 )) ) = ( ATLEAST R25 )))
proof
let R24 being ConstructorDB;
let R25 being (FinSequence of (the Constrs of R24));
per cases ;
suppose L904: (the carrier of R24) = ( {} );

L905: (( ATLEAST- (R25 , ( 0 )) ) = ( {} ) & ( ATLEAST R25 ) = ( {} )) by L904;
thus L906: thesis by L905;
end;
suppose L907: (the carrier of R24) <> ( {} );

L908: ( ATLEAST- (R25 , ( 0 )) ) = { R26 where R26 is (Element of R24) : ( card ( ( rng R25 ) \ ( R26 ref ) ) ) <= ( 0 ) } by L907 , L880;
L909: ( ATLEAST R25 ) = { R26 where R26 is (Element of R24) : ( rng R25 ) c= ( R26 ref ) } by L907 , L859;
thus L910: ( ATLEAST- (R25 , ( 0 )) ) c= ( ATLEAST R25 )
proof
let R3 being set;
assume L911: R3 in ( ATLEAST- (R25 , ( 0 )) );
consider R26 being (Element of R24) such that L912: (R3 = R26 & ( card ( ( rng R25 ) \ ( R26 ref ) ) ) <= ( 0 )) by L911 , L908;
L913: ( ( rng R25 ) \ ( R26 ref ) ) = ( {} ) by L912 , NAT_1:3;
L914: ( rng R25 ) c= ( R26 ref ) by L913 , XBOOLE_1:37;
thus L915: thesis by L914 , L912 , L909;
end;

let R3 being set;
assume L916: R3 in ( ATLEAST R25 );
consider R26 being (Element of R24) such that L917: (R3 = R26 & ( rng R25 ) c= ( R26 ref )) by L916 , L909;
L918: ( ( rng R25 ) \ ( R26 ref ) ) = ( {} ) by L917 , XBOOLE_1:37;
L919: ( card ( ( rng R25 ) \ ( R26 ref ) ) ) = ( 0 ) by L918;
thus L920: R3 in ( ATLEAST- (R25 , ( 0 )) ) by L919 , L908 , L917;
end;
end;
theorem
L922: (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds ( ATMOST+ (R28 , ( 0 )) ) = ( ATMOST R28 )))
proof
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
per cases ;
suppose L923: (the carrier of R27) = ( {} );

L924: (( ATMOST+ (R28 , ( 0 )) ) = ( {} ) & ( ATMOST R28 ) = ( {} )) by L923;
thus L925: thesis by L924;
end;
suppose L926: (the carrier of R27) <> ( {} );

L927: ( ATMOST+ (R28 , ( 0 )) ) = { R29 where R29 is (Element of R27) : ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= ( 0 ) } by L926 , L888;
L928: ( ATMOST R28 ) = { R29 where R29 is (Element of R27) : ( R29 ref ) c= ( rng R28 ) } by L926 , L866;
thus L929: ( ATMOST+ (R28 , ( 0 )) ) c= ( ATMOST R28 )
proof
let R3 being set;
assume L930: R3 in ( ATMOST+ (R28 , ( 0 )) );
consider R29 being (Element of R27) such that L931: (R3 = R29 & ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= ( 0 )) by L930 , L927;
L932: ( ( R29 ref ) \ ( rng R28 ) ) = ( {} ) by L931 , NAT_1:3;
L933: ( R29 ref ) c= ( rng R28 ) by L932 , XBOOLE_1:37;
thus L934: thesis by L933 , L931 , L928;
end;

let R3 being set;
assume L935: R3 in ( ATMOST R28 );
consider R29 being (Element of R27) such that L936: (R3 = R29 & ( R29 ref ) c= ( rng R28 )) by L935 , L928;
L937: ( ( R29 ref ) \ ( rng R28 ) ) = ( {} ) by L936 , XBOOLE_1:37;
L938: ( card ( ( R29 ref ) \ ( rng R28 ) ) ) = ( 0 ) by L937;
thus L939: R3 in ( ATMOST+ (R28 , ( 0 )) ) by L938 , L927 , L936;
end;
end;
theorem
L941: (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds ( EXACTLY+- (R28 , ( 0 ) , ( 0 )) ) = ( EXACTLY R28 )))
proof
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
per cases ;
suppose L942: (the carrier of R27) = ( {} );

L943: (( EXACTLY+- (R28 , ( 0 ) , ( 0 )) ) = ( {} ) & ( EXACTLY R28 ) = ( {} )) by L942;
thus L944: thesis by L943;
end;
suppose L945: (the carrier of R27) <> ( {} );

L946: ( EXACTLY+- (R28 , ( 0 ) , ( 0 )) ) = { R29 where R29 is (Element of R27) : (( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= ( 0 ) & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= ( 0 )) } by L945 , L895;
L947: ( EXACTLY R28 ) = { R29 where R29 is (Element of R27) : ( R29 ref ) = ( rng R28 ) } by L945 , L873;
thus L948: ( EXACTLY+- (R28 , ( 0 ) , ( 0 )) ) c= ( EXACTLY R28 )
proof
let R3 being set;
assume L949: R3 in ( EXACTLY+- (R28 , ( 0 ) , ( 0 )) );
consider R29 being (Element of R27) such that L950: (R3 = R29 & ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= ( 0 ) & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= ( 0 )) by L949 , L946;
L951: (( ( R29 ref ) \ ( rng R28 ) ) = ( {} ) & ( ( rng R28 ) \ ( R29 ref ) ) = ( {} )) by L950 , NAT_1:3;
L952: (( R29 ref ) c= ( rng R28 ) & ( rng R28 ) c= ( R29 ref )) by L951 , XBOOLE_1:37;
L953: ( R29 ref ) = ( rng R28 ) by L952 , XBOOLE_0:def 10;
thus L954: thesis by L953 , L950 , L947;
end;

let R3 being set;
assume L955: R3 in ( EXACTLY R28 );
consider R29 being (Element of R27) such that L956: (R3 = R29 & ( R29 ref ) = ( rng R28 )) by L955 , L947;
L957: (( ( R29 ref ) \ ( rng R28 ) ) = ( {} ) & ( ( rng R28 ) \ ( R29 ref ) ) = ( {} )) by L956 , XBOOLE_1:37;
L958: (( card ( ( R29 ref ) \ ( rng R28 ) ) ) = ( 0 ) & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) = ( 0 )) by L957;
thus L959: R3 in ( EXACTLY+- (R28 , ( 0 ) , ( 0 )) ) by L958 , L946 , L956;
end;
end;
theorem
L961: (for R18 being Nat holds (for R19 being Nat holds (for R24 being ConstructorDB holds (for R25 being (FinSequence of (the Constrs of R24)) holds (R18 <= R19 implies ( ATLEAST- (R25 , R18) ) c= ( ATLEAST- (R25 , R19) ))))))
proof
let R18 being Nat;
let R19 being Nat;
let R24 being ConstructorDB;
let R25 being (FinSequence of (the Constrs of R24));
assume L962: R18 <= R19;
let R3 being set;
assume L963: R3 in ( ATLEAST- (R25 , R18) );
L964: R3 in { R26 where R26 is (Element of R24) : ( card ( ( rng R25 ) \ ( R26 ref ) ) ) <= R18 } by L963 , L880;
consider R26 being (Element of R24) such that L965: (R3 = R26 & ( card ( ( rng R25 ) \ ( R26 ref ) ) ) <= R18) by L964;
L966: ( card ( ( rng R25 ) \ ( R26 ref ) ) ) <= R19 by L962 , L965 , XXREAL_0:2;
L967: R26 in { B71 where B71 is (Element of R24) : ( card ( ( rng R25 ) \ ( B71 ref ) ) ) <= R19 } by L966;
thus L968: thesis by L967 , L963 , L965 , L880;
end;
theorem
L969: (for R18 being Nat holds (for R19 being Nat holds (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds (R18 <= R19 implies ( ATMOST+ (R28 , R18) ) c= ( ATMOST+ (R28 , R19) ))))))
proof
let R18 being Nat;
let R19 being Nat;
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
assume L970: R18 <= R19;
let R3 being set;
assume L971: R3 in ( ATMOST+ (R28 , R18) );
L972: R3 in { R29 where R29 is (Element of R27) : ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R18 } by L971 , L888;
consider R29 being (Element of R27) such that L973: (R3 = R29 & ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R18) by L972;
L974: ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R19 by L970 , L973 , XXREAL_0:2;
L975: R29 in { B72 where B72 is (Element of R27) : ( card ( ( B72 ref ) \ ( rng R28 ) ) ) <= R19 } by L974;
thus L976: thesis by L975 , L971 , L973 , L888;
end;
theorem
L977: (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds (for B73 , B74 , B75 , B76 being Nat holds ((B73 <= B75 & B74 <= B76) implies ( EXACTLY+- (R28 , B73 , B74) ) c= ( EXACTLY+- (R28 , B75 , B76) )))))
proof
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
let C122 , C123 , C124 , C125 being Nat;
assume L978: (C122 <= C124 & C123 <= C125);
let R3 being set;
assume L979: R3 in ( EXACTLY+- (R28 , C122 , C123) );
L980: R3 in { R29 where R29 is (Element of R27) : (( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= C122 & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= C123) } by L979 , L895;
consider R29 being (Element of R27) such that L981: (R3 = R29 & ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= C122 & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= C123) by L980;
L982: (( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= C124 & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= C125) by L978 , L981 , XXREAL_0:2;
L983: R29 in { B77 where B77 is (Element of R27) : (( card ( ( B77 ref ) \ ( rng R28 ) ) ) <= C124 & ( card ( ( rng R28 ) \ ( B77 ref ) ) ) <= C125) } by L982;
thus L984: thesis by L983 , L979 , L981 , L895;
end;
theorem
L985: (for R18 being Nat holds (for R24 being ConstructorDB holds (for R25 being (FinSequence of (the Constrs of R24)) holds ( ATLEAST R25 ) c= ( ATLEAST- (R25 , R18) ))))
proof
let R18 being Nat;
let R24 being ConstructorDB;
let R25 being (FinSequence of (the Constrs of R24));
L986: (( ATLEAST R25 ) = ( ATLEAST- (R25 , ( 0 )) ) & ( 0 ) <= R18) by L903 , NAT_1:2;
thus L987: thesis by L986 , L961;
end;
theorem
L988: (for R18 being Nat holds (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds ( ATMOST R28 ) c= ( ATMOST+ (R28 , R18) ))))
proof
let R18 being Nat;
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
L989: (( ATMOST R28 ) = ( ATMOST+ (R28 , ( 0 )) ) & ( 0 ) <= R18) by L922 , NAT_1:2;
thus L990: thesis by L989 , L969;
end;
theorem
L991: (for R18 being Nat holds (for R19 being Nat holds (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds ( EXACTLY R28 ) c= ( EXACTLY+- (R28 , R18 , R19) )))))
proof
let R18 being Nat;
let R19 being Nat;
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
L992: (( EXACTLY R28 ) = ( EXACTLY+- (R28 , ( 0 ) , ( 0 )) ) & ( 0 ) <= R18 & ( 0 ) <= R19) by L941 , NAT_1:2;
thus L993: thesis by L992 , L977;
end;
theorem
L994: (for R24 being ConstructorDB holds (for R25 being (FinSequence of (the Constrs of R24)) holds ( EXACTLY R25 ) = ( ( ATLEAST R25 ) AND ( ATMOST R25 ) )))
proof
let R24 being ConstructorDB;
let R25 being (FinSequence of (the Constrs of R24));
thus L995: ( EXACTLY R25 ) c= ( ( ATLEAST R25 ) AND ( ATMOST R25 ) )
proof
let R3 being set;
assume L996: R3 in ( EXACTLY R25 );
L997: R3 in { B78 where B78 is (Element of R24) : ( B78 ref ) = ( rng R25 ) } by L996 , L873;
consider C126 being (Element of R24) such that L998: (R3 = C126 & ( C126 ref ) = ( rng R25 )) by L997;
L999: R3 in { B79 where B79 is (Element of R24) : ( rng R25 ) c= ( B79 ref ) } by L998;
L1000: R3 in ( ATLEAST R25 ) by L999 , L996 , L859;
L1001: R3 in { B80 where B80 is (Element of R24) : ( B80 ref ) c= ( rng R25 ) } by L998;
L1002: R3 in ( ATMOST R25 ) by L1001 , L996 , L866;
thus L1003: thesis by L1002 , L1000 , XBOOLE_0:def 4;
end;

let R3 being set;
assume L1004: R3 in ( ( ATLEAST R25 ) AND ( ATMOST R25 ) );
L1005: (R3 in ( ATLEAST R25 ) & R3 in ( ATMOST R25 )) by L1004 , XBOOLE_0:def 4;
L1006: R3 in { B81 where B81 is (Element of R24) : ( B81 ref ) c= ( rng R25 ) } by L1005 , L866;
consider C127 being (Element of R24) such that L1007: (R3 = C127 & ( C127 ref ) c= ( rng R25 )) by L1006;
L1008: R3 in { B82 where B82 is (Element of R24) : ( rng R25 ) c= ( B82 ref ) } by L1005 , L859;
consider C128 being (Element of R24) such that L1009: (R3 = C128 & ( rng R25 ) c= ( C128 ref )) by L1008;
L1010: (R3 = C127 & ( C127 ref ) = ( rng R25 )) by L1007 , L1009 , XBOOLE_0:def 10;
L1011: R3 in { B83 where B83 is (Element of R24) : ( B83 ref ) = ( rng R25 ) } by L1010;
thus L1012: thesis by L1011 , L1004 , L873;
end;
theorem
L1013: (for R18 being Nat holds (for R19 being Nat holds (for R27 being  ref-finite ConstructorDB holds (for R28 being (FinSequence of (the Constrs of R27)) holds ( EXACTLY+- (R28 , R18 , R19) ) = ( ( ATLEAST- (R28 , R19) ) AND ( ATMOST+ (R28 , R18) ) )))))
proof
let R18 being Nat;
let R19 being Nat;
let R27 being  ref-finite ConstructorDB;
let R28 being (FinSequence of (the Constrs of R27));
thus L1014: ( EXACTLY+- (R28 , R18 , R19) ) c= ( ( ATLEAST- (R28 , R19) ) AND ( ATMOST+ (R28 , R18) ) )
proof
let R3 being set;
assume L1015: R3 in ( EXACTLY+- (R28 , R18 , R19) );
L1016: R3 in { B84 where B84 is (Element of R27) : (( card ( ( B84 ref ) \ ( rng R28 ) ) ) <= R18 & ( card ( ( rng R28 ) \ ( B84 ref ) ) ) <= R19) } by L1015 , L895;
consider C129 being (Element of R27) such that L1017: (R3 = C129 & ( card ( ( C129 ref ) \ ( rng R28 ) ) ) <= R18 & ( card ( ( rng R28 ) \ ( C129 ref ) ) ) <= R19) by L1016;
L1018: R3 in { R29 where R29 is (Element of R27) : ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= R19 } by L1017;
L1019: R3 in ( ATLEAST- (R28 , R19) ) by L1018 , L1015 , L880;
L1020: R3 in { R29 where R29 is (Element of R27) : ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R18 } by L1017;
L1021: R3 in ( ATMOST+ (R28 , R18) ) by L1020 , L1015 , L888;
thus L1022: R3 in ( ( ATLEAST- (R28 , R19) ) AND ( ATMOST+ (R28 , R18) ) ) by L1021 , L1019 , XBOOLE_0:def 4;
end;

let R3 being set;
assume L1023: R3 in ( ( ATLEAST- (R28 , R19) ) AND ( ATMOST+ (R28 , R18) ) );
L1024: (R3 in ( ATLEAST- (R28 , R19) ) & R3 in ( ATMOST+ (R28 , R18) )) by L1023 , XBOOLE_0:def 4;
L1025: R3 in { R29 where R29 is (Element of R27) : ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R18 } by L1024 , L888;
L1026: (ex R29 being (Element of R27) st (R3 = R29 & ( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R18)) by L1025;
L1027: R3 in { R29 where R29 is (Element of R27) : ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= R19 } by L1024 , L880;
L1028: (ex R29 being (Element of R27) st (R3 = R29 & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= R19)) by L1027;
L1029: R3 in { R29 where R29 is (Element of R27) : (( card ( ( R29 ref ) \ ( rng R28 ) ) ) <= R18 & ( card ( ( rng R28 ) \ ( R29 ref ) ) ) <= R19) } by L1028 , L1026;
thus L1030: thesis by L1029 , L1023 , L895;
end;
theorem
L1031: (for R24 being ConstructorDB holds (for R25 being (FinSequence of (the Constrs of R24)) holds (R25 <> ( {} ) implies ( ATLEAST R25 ) = ( meet { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } ))))
proof
let R24 being ConstructorDB;
let R25 being (FinSequence of (the Constrs of R24));
assume L1032: R25 <> ( {} );
L1033: ( rng R25 ) <> ( {} ) by L1032 , RELAT_1:41;
consider R4 being set such that L1034: R4 in ( rng R25 ) by L1033 , XBOOLE_0:def 1;
L1035: (R4 in (the Constrs of R24) & (the Constrs of R24) c= (the carrier of R24)) by L1034;
reconsider D53 = R4 as (Element of R24) by L1035;
L1036: ( D53 occur ) in { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } by L1034;
thus L1037: ( ATLEAST R25 ) c= ( meet { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } )
proof
let R3 being set;
assume L1038: R3 in ( ATLEAST R25 );
L1039: R3 in { B85 where B85 is (Element of R24) : ( rng R25 ) c= ( B85 ref ) } by L1038 , L859;
consider C130 being (Element of R24) such that L1040: (R3 = C130 & ( rng R25 ) c= ( C130 ref )) by L1039;
L1041:
now
let C131 being set;
assume L1042: C131 in { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) };
consider R26 being (Element of R24) such that L1043: (C131 = ( R26 occur ) & R26 in ( rng R25 )) by L1042;
thus L1044: R3 in C131 by L1040 , L1043 , L841;
end;
thus L1045: thesis by L1041 , L1036 , SETFAM_1:def 1;
end;

let R3 being set;
assume L1046: R3 in ( meet { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } );
L1047: R3 in ( D53 occur ) by L1046 , L1036 , SETFAM_1:def 1;
reconsider D54 = R3 as (Element of R24) by L1047;
L1048: ( rng R25 ) c= ( D54 ref )
proof
let R4 being set;
assume L1049: R4 in ( rng R25 );
L1050: R4 in (the Constrs of R24) by L1049;
reconsider D55 = R4 as (Element of R24) by L1050;
L1051: ( D55 occur ) in { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } by L1049;
L1052: D54 in ( D55 occur ) by L1051 , L1046 , SETFAM_1:def 1;
thus L1053: thesis by L1052 , L841;
end;
L1054: D54 in { R26 where R26 is (Element of R24) : ( rng R25 ) c= ( R26 ref ) } by L1048;
thus L1055: thesis by L1054 , L1047 , L859;
end;
theorem
L1056: (for R24 being ConstructorDB holds (for R25 being (FinSequence of (the Constrs of R24)) holds (for B86 , B87 being (Element of R24) holds (R25 = <* B86 , B87 *> implies ( ATLEAST R25 ) = ( ( B86 occur ) AND ( B87 occur ) )))))
proof
let R24 being ConstructorDB;
let R25 being (FinSequence of (the Constrs of R24));
let C132 , C133 being (Element of R24);
assume L1057: R25 = <* C132 , C133 *>;
L1058: ( rng R25 ) = { C132 , C133 } by L1057 , FINSEQ_2:127;
L1059: { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } = { ( C132 occur ) , ( C133 occur ) }
proof
thus L1060: { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } c= { ( C132 occur ) , ( C133 occur ) }
proof
let R3 being set;
assume L1061: R3 in { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) };
consider R26 being (Element of R24) such that L1062: (R3 = ( R26 occur ) & R26 in ( rng R25 )) by L1061;
L1063: (R26 = C132 or R26 = C133) by L1058 , L1062 , TARSKI:def 2;
thus L1064: thesis by L1063 , L1062 , TARSKI:def 2;
end;

let R3 being set;
assume L1065: R3 in { ( C132 occur ) , ( C133 occur ) };
L1066: (R3 = ( C132 occur ) or R3 = ( C133 occur )) by L1065 , TARSKI:def 2;
L1067: (C132 in ( rng R25 ) & C133 in ( rng R25 )) by L1058 , TARSKI:def 2;
thus L1068: thesis by L1067 , L1066;
end;
thus L1069: ( ATLEAST R25 ) = ( meet { ( R26 occur ) where R26 is (Element of R24) : R26 in ( rng R25 ) } ) by L1057 , L1031
.= ( ( C132 occur ) AND ( C133 occur ) ) by L1059 , SETFAM_1:11;
end;
