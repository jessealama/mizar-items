:: More on Products of Many Sorted Algebras
::  by Mariusz Giero
::
:: Received April 29, 1996
:: Copyright (c) 1996-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, PBOOLE, STRUCT_0, MSUALG_1, SUBSET_1, PRALG_2, EQREL_1,
      FUNCT_1, CARD_3, RELAT_1, SETFAM_1, RLVECT_2, FUNCT_6, TARSKI, FUNCT_2,
      MARGREL1, UNIALG_2, FUNCT_5, FUNCOP_1, FINSEQ_4, PARTFUN1, MSUALG_3,
      MEMBER_1, ARYTM_3, WELLORD1, PRALG_3;
 notations TARSKI, XBOOLE_0, SUBSET_1, SETFAM_1, RELAT_1, FUNCT_1, RELSET_1,
      PARTFUN1, STRUCT_0, FUNCT_2, FUNCOP_1, EQREL_1, FUNCT_5, FUNCT_6, CARD_3,
      PBOOLE, MSUALG_1, MSUALG_3, PRALG_2, PRALG_1, MSUALG_2;
 constructors EQREL_1, PRALG_1, PRALG_2, MSUALG_3, RELSET_1, FUNCT_5;
 registrations XBOOLE_0, SUBSET_1, SETFAM_1, RELAT_1, FUNCT_1, PARTFUN1,
      FUNCOP_1, EQREL_1, PBOOLE, STRUCT_0, MSUALG_1, PRALG_2, MSUALG_3, CARD_3,
      RELSET_1;
 requirements BOOLE, SUBSET;
 definitions XBOOLE_0, FUNCT_1, MSUALG_3, PRALG_2, PBOOLE, TARSKI;
 theorems PBOOLE, FUNCT_1, EQREL_1, PRALG_2, MSUALG_1, MSUALG_3, FUNCT_2,
      CARD_3, TARSKI, FUNCOP_1, MSUALG_2, PRALG_1, FUNCT_6, RELAT_1, RELSET_1,
      XBOOLE_0, XBOOLE_1, PARTFUN1;
 schemes PBOOLE, MSSUBFAM;

begin
registration
let C1 being set;
let R3 being non  void non  empty ManySortedSign;
let C2 being (MSAlgebra-Family of C1 , R3);
cluster ( product C2 ) ->  non-empty;
coherence by MSUALG_1:def 3;
end;
registration
let C3 being  with_non-empty_elements set;
cluster ( id C3 ) ->  non-empty;
coherence
proof
reconsider D1 = ( id C3 ) as (ManySortedSet of C3);
L2: D1 is  non-empty
proof
let C4 being set;
assume L3: C4 in C3;
thus L4: thesis by L3 , FUNCT_1:17;
end;
thus L5: thesis by L2;
end;
end;
theorem
L7: (for B1 , B2 being Function holds (for B3 being set holds (B1 in ( product B2 ) implies ( B1 | B3 ) in ( product ( B2 | B3 ) ))))
proof
let C5 , C6 being Function;
let C7 being set;
assume L8: C5 in ( product C6 );
L9: ( dom C5 ) = ( dom C6 ) by L8 , CARD_3:9;
L10: ( dom ( C5 | C7 ) ) = ( ( dom C6 ) /\ C7 ) by L9 , RELAT_1:61
.= ( dom ( C6 | C7 ) ) by RELAT_1:61;
L11: (for B4 being set holds (B4 in ( dom ( C6 | C7 ) ) implies ( ( C5 | C7 ) . B4 ) in ( ( C6 | C7 ) . B4 )))
proof
let C8 being set;
assume L12: C8 in ( dom ( C6 | C7 ) );
L13: C8 in ( ( dom C6 ) /\ C7 ) by L12 , RELAT_1:61;
L14: C8 in ( dom C6 ) by L13 , XBOOLE_0:def 4;
L15: (( ( C6 | C7 ) . C8 ) = ( C6 . C8 ) & ( ( C5 | C7 ) . C8 ) = ( C5 . C8 )) by L10 , L12 , FUNCT_1:47;
thus L16: thesis by L15 , L8 , L14 , CARD_3:9;
end;
thus L17: thesis by L11 , L10 , CARD_3:9;
end;
theorem
L18: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for B5 being (MSAlgebra-Family of R1 , R3) holds (for B6 being (SortSymbol of R3) holds (for B7 being non  empty (Subset of R1) holds (for B8 being (MSAlgebra-Family of B7 , R3) holds (( B5 | B7 ) = B8 implies ( Carrier (B8 , B6) ) = ( ( Carrier (B5 , B6) ) | B7 ))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let C9 being (MSAlgebra-Family of R1 , R3);
let C10 being (SortSymbol of R3);
let C11 being non  empty (Subset of R1);
let C12 being (MSAlgebra-Family of C11 , R3);
assume that
L19: ( C9 | C11 ) = C12;
L20: ( dom ( ( Carrier (C9 , C10) ) | C11 ) ) = ( ( dom ( Carrier (C9 , C10) ) ) /\ C11 ) by RELAT_1:61
.= ( R1 /\ C11 ) by PARTFUN1:def 2
.= C11 by XBOOLE_1:28;
reconsider D2 = ( ( Carrier (C9 , C10) ) | C11 ) as (ManySortedSet of C11) by L20 , PARTFUN1:def 2;
L21: (for B9 being set holds (B9 in C11 implies ( ( Carrier (C12 , C10) ) . B9 ) = ( D2 . B9 )))
proof
let C13 being set;
assume L22: C13 in C11;
reconsider D3 = C13 as (Element of C11) by L22;
reconsider D4 = D3 as (Element of R1);
L23: (( C12 . D3 ) = ( C9 . D3 ) & (ex B10 being MSAlgebra over R3 st (B10 = ( C9 . D4 ) & ( ( Carrier (C9 , C10) ) . D4 ) = ( (the Sorts of B10) . C10 )))) by L19 , FUNCT_1:49 , PRALG_2:def 9;
L24: (ex B11 being MSAlgebra over R3 st (B11 = ( C12 . C13 ) & ( ( Carrier (C12 , C10) ) . C13 ) = ( (the Sorts of B11) . C10 ))) by L22 , PRALG_2:def 9;
thus L25: thesis by L24 , L23 , FUNCT_1:49;
end;
thus L26: thesis by L21 , PBOOLE:3;
end;
theorem
L27: (for B12 being set holds (for B13 being non  empty set holds (for B14 being (Equivalence_Relation of B13) holds (for B15 , B16 being (Element of ( Class B14 )) holds ((B12 in B15 & B12 in B16) implies B15 = B16)))))
proof
let C14 being set;
let C15 being non  empty set;
let C16 being (Equivalence_Relation of C15);
let C17 , C18 being (Element of ( Class C16 ));
assume that
L28: C14 in C17
and
L29: C14 in C18;
consider C19 being set such that L30: C19 in C15 and L31: C17 = ( Class (C16 , C19) ) by EQREL_1:def 3;
L32: [ C14 , C19 ] in C16 by L28 , L31 , EQREL_1:19;
consider C20 being set such that L33: C20 in C15 and L34: C18 = ( Class (C16 , C20) ) by EQREL_1:def 3;
L35: [ C14 , C20 ] in C16 by L29 , L34 , EQREL_1:19;
L36: ( Class (C16 , C20) ) = ( Class (C16 , C14) ) by L35 , L28 , EQREL_1:35
.= C17 by L28 , L31 , L32 , EQREL_1:35;
thus L37: thesis by L36 , L34;
end;
L38: (for B17 being Function holds (for B18 being set holds (B18 in ( product B17 ) implies B18 is Function)));
theorem
L39: (for B19 being non  empty set holds (for B20 being (ManySortedFunction of B19) holds (for B21 being  with_common_domain  functional non  empty set holds (B21 = ( rng B20 ) implies (for B22 being (Element of B19) holds (for B23 being set holds (B23 in ( DOM B21 ) implies ( ( B20 . B22 ) . B23 ) = ( ( ( commute B20 ) . B23 ) . B22 ))))))))
proof
let C21 being non  empty set;
let C22 being (ManySortedFunction of C21);
set D5 = ( union { ( rng ( C22 . B24 ) ) where B24 is (Element of C21) : (not contradiction) } );
reconsider D6 = C22 as Function;
let C23 being  with_common_domain  functional non  empty set;
assume that
L40: C23 = ( rng C22 );
L41: ( rng D6 ) c= ( Funcs (( DOM C23 ) , D5) )
proof
let C24 being set;
assume L42: C24 in ( rng D6 );
consider C25 being set such that L43: C25 in ( dom C22 ) and L44: ( C22 . C25 ) = C24 by L42 , FUNCT_1:def 3;
reconsider D7 = C25 as (Element of C21) by L43;
consider C26 being Function such that L45: C26 = ( C22 . D7 );
L46: ( rng C26 ) c= D5
proof
L47: ( rng C26 ) in { ( rng ( C22 . B25 ) ) where B25 is (Element of C21) : (not contradiction) } by L45;
let C27 being set;
assume L48: C27 in ( rng C26 );
thus L49: thesis by L48 , L47 , TARSKI:def 4;
end;
L50: ( C22 . D7 ) in ( rng C22 ) by L43 , FUNCT_1:def 3;
L51: ( dom C26 ) = ( DOM C23 ) by L50 , L40 , L45 , CARD_3:108;
thus L52: thesis by L51 , L44 , L45 , L46 , FUNCT_2:def 2;
end;
let C28 being (Element of C21);
let C29 being set;
assume L53: C29 in ( DOM C23 );
L54: ( dom D6 ) = C21 by PARTFUN1:def 2;
L55: C22 in ( Funcs (C21 , ( Funcs (( DOM C23 ) , D5) )) ) by L54 , L41 , FUNCT_2:def 2;
thus L56: thesis by L55 , L53 , FUNCT_6:56;
end;
begin
definition
let R3 being non  void non  empty ManySortedSign;
let R8 being MSAlgebra over R3;
let C30 being (OperSymbol of R3);
func const (C30 , R8) equals 
( ( Den (C30 , R8) ) . ( {} ) );
correctness;
end;
theorem
L58: (for R3 being non  void non  empty ManySortedSign holds (for R8 being MSAlgebra over R3 holds (for R12 being (OperSymbol of R3) holds ((( the_arity_of R12 ) = ( {} ) & ( Result (R12 , R8) ) <> ( {} )) implies ( const (R12 , R8) ) in ( Result (R12 , R8) )))))
proof
let R3 being non  void non  empty ManySortedSign;
let R8 being MSAlgebra over R3;
let R12 being (OperSymbol of R3);
assume that
L59: ( the_arity_of R12 ) = ( {} )
and
L60: ( Result (R12 , R8) ) <> ( {} );
L61: ( dom ( Den (R12 , R8) ) ) = ( Args (R12 , R8) ) by L60 , FUNCT_2:def 1
.= { ( {} ) } by L59 , PRALG_2:4;
L62: ( {} ) in ( dom ( Den (R12 , R8) ) ) by L61 , TARSKI:def 1;
L63: ( ( Den (R12 , R8) ) . ( {} ) ) in ( rng ( Den (R12 , R8) ) ) by L62 , FUNCT_1:def 3;
thus L64: thesis by L63;
end;
theorem
L65: (for R3 being non  void non  empty ManySortedSign holds (for R8 being MSAlgebra over R3 holds (for R11 being (SortSymbol of R3) holds (( (the Sorts of R8) . R11 ) <> ( {} ) implies ( Constants (R8 , R11) ) = { ( const (B26 , R8) ) where B26 is (Element of (the carrier' of R3)) : (( the_result_sort_of B26 ) = R11 & ( the_arity_of B26 ) = ( {} )) }))))
proof
let R3 being non  void non  empty ManySortedSign;
let R8 being MSAlgebra over R3;
let R11 being (SortSymbol of R3);
assume L66: ( (the Sorts of R8) . R11 ) <> ( {} );
thus L67: ( Constants (R8 , R11) ) c= { ( const (B27 , R8) ) where B27 is (Element of (the carrier' of R3)) : (( the_result_sort_of B27 ) = R11 & ( the_arity_of B27 ) = ( {} )) }
proof
let C31 being set;
assume L68: C31 in ( Constants (R8 , R11) );
L69: (ex B28 being non  empty set st (B28 = ( (the Sorts of R8) . R11 ) & ( Constants (R8 , R11) ) = { B29 where B29 is (Element of B28) : (ex B30 being (OperSymbol of R3) st (( (the Arity of R3) . B30 ) = ( {} ) & ( (the ResultSort of R3) . B30 ) = R11 & B29 in ( rng ( Den (B30 , R8) ) ))) })) by L66 , MSUALG_2:def 3;
consider C32 being non  empty set such that L70: C32 = ( (the Sorts of R8) . R11 ) and L71: C31 in { B31 where B31 is (Element of C32) : (ex B32 being (OperSymbol of R3) st (( (the Arity of R3) . B32 ) = ( {} ) & ( (the ResultSort of R3) . B32 ) = R11 & B31 in ( rng ( Den (B32 , R8) ) ))) } by L69 , L68;
consider C33 being (Element of C32) such that L72: C33 = C31 and L73: (ex B33 being (OperSymbol of R3) st (( (the Arity of R3) . B33 ) = ( {} ) & ( (the ResultSort of R3) . B33 ) = R11 & C33 in ( rng ( Den (B33 , R8) ) ))) by L71;
consider C34 being (OperSymbol of R3) such that L74: ( (the Arity of R3) . C34 ) = ( {} ) and L75: ( (the ResultSort of R3) . C34 ) = R11 and L76: C33 in ( rng ( Den (C34 , R8) ) ) by L73;
L77: (ex B34 being set st (B34 in ( dom ( Den (C34 , R8) ) ) & C33 = ( ( Den (C34 , R8) ) . B34 ))) by L76 , FUNCT_1:def 3;
L78: ( the_result_sort_of C34 ) = R11 by L75 , MSUALG_1:def 2;
L79: ( the_arity_of C34 ) = ( {} ) by L74 , MSUALG_1:def 1;
L80: ( Args (C34 , R8) ) = { ( {} ) } by L79 , PRALG_2:4;
L81: C31 = ( const (C34 , R8) ) by L80 , L72 , L77 , TARSKI:def 1;
thus L82: thesis by L81 , L78 , L79;
end;

let C35 being set;
assume L83: C35 in { ( const (B35 , R8) ) where B35 is (Element of (the carrier' of R3)) : (( the_result_sort_of B35 ) = R11 & ( the_arity_of B35 ) = ( {} )) };
consider C36 being (Element of (the carrier' of R3)) such that L84: C35 = ( const (C36 , R8) ) and L85: ( the_result_sort_of C36 ) = R11 and L86: ( the_arity_of C36 ) = ( {} ) by L83;
L87: C36 in (the carrier' of R3);
L88: C36 in ( dom (the ResultSort of R3) ) by L87 , FUNCT_2:def 1;
L89: ( Result (C36 , R8) ) = ( ( (the Sorts of R8) * (the ResultSort of R3) ) . C36 ) by MSUALG_1:def 5
.= ( (the Sorts of R8) . ( (the ResultSort of R3) . C36 ) ) by L88 , FUNCT_1:13
.= ( (the Sorts of R8) . R11 ) by L85 , MSUALG_1:def 2;
thus L90: C35 in ( Constants (R8 , R11) )
proof
L91: (ex B36 being (OperSymbol of R3) st (( (the Arity of R3) . B36 ) = ( {} ) & ( (the ResultSort of R3) . B36 ) = R11 & C35 in ( rng ( Den (B36 , R8) ) )))
proof
take C36;
L92: (( Args (C36 , R8) ) = ( dom ( Den (C36 , R8) ) ) & ( Args (C36 , R8) ) = { ( {} ) }) by L66 , L86 , L89 , FUNCT_2:def 1 , PRALG_2:4;
L93: ( {} ) in ( dom ( Den (C36 , R8) ) ) by L92 , TARSKI:def 1;
thus L94: thesis by L93 , L84 , L85 , L86 , FUNCT_1:def 3 , MSUALG_1:def 1 , MSUALG_1:def 2;
end;
consider C37 being non  empty set such that L95: C37 = ( (the Sorts of R8) . R11 ) and L96: ( Constants (R8 , R11) ) = { B37 where B37 is (Element of C37) : (ex B38 being (OperSymbol of R3) st (( (the Arity of R3) . B38 ) = ( {} ) & ( (the ResultSort of R3) . B38 ) = R11 & B37 in ( rng ( Den (B38 , R8) ) ))) } by L66 , MSUALG_2:def 3;
L97: C35 is (Element of C37) by L84 , L86 , L89 , L95 , L58;
thus L98: thesis by L97 , L96 , L91;
end;

end;
theorem
L91: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (( the_arity_of R12 ) = ( {} ) implies ( ( commute ( OPER R6 ) ) . R12 ) in ( Funcs (R1 , ( Funcs ({ ( {} ) } , ( union { ( Result (R12 , ( R6 . B39 )) ) where B39 is (Element of R1) : (not contradiction) } )) )) ))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
set D8 = ( ( commute ( OPER R6 ) ) . R12 );
set D9 = ( union { ( Result (R12 , ( R6 . B40 )) ) where B40 is (Element of R1) : (not contradiction) } );
L92: ( commute ( OPER R6 ) ) in ( Funcs ((the carrier' of R3) , ( Funcs (R1 , ( rng ( uncurry ( OPER R6 ) ) )) )) ) by PRALG_2:6;
L93: (ex B41 being Function st (( commute ( OPER R6 ) ) = B41 & ( dom B41 ) = (the carrier' of R3) & ( rng B41 ) c= ( Funcs (R1 , ( rng ( uncurry ( OPER R6 ) ) )) ))) by L92 , FUNCT_2:def 2;
L94: D8 in ( rng ( commute ( OPER R6 ) ) ) by L93 , FUNCT_1:def 3;
L95: (ex B42 being Function st (B42 = D8 & ( dom B42 ) = R1 & ( rng B42 ) c= ( rng ( uncurry ( OPER R6 ) ) ))) by L94 , L93 , FUNCT_2:def 2;
assume L96: ( the_arity_of R12 ) = ( {} );
L97:
now
let C38 being set;
assume L98: C38 in ( rng D8 );
consider C39 being set such that L99: C39 in ( dom D8 ) and L100: ( D8 . C39 ) = C38 by L98 , FUNCT_1:def 3;
L101: D8 = ( R6 ?. R12 );
reconsider D10 = C38 as Function by L101 , L100;
reconsider D11 = C39 as (Element of R1) by L95 , L99;
L102: D10 = ( ( R6 ?. R12 ) . D11 ) by L100
.= ( Den (R12 , ( R6 . D11 )) ) by PRALG_2:7;
L103: ( dom D10 ) = ( Args (R12 , ( R6 . D11 )) ) by L102 , FUNCT_2:def 1
.= { ( {} ) } by L96 , PRALG_2:4;
L104:
now
let C40 being set;
assume L105: C40 in ( rng D10 );
consider C41 being set such that L106: C41 in ( dom D10 ) and L107: ( D10 . C41 ) = C40 by L105 , FUNCT_1:def 3;
L108: ( D10 . C41 ) = ( const (R12 , ( R6 . D11 )) ) by L102 , L103 , L106 , TARSKI:def 1;
L109: C40 is (Element of ( Result (R12 , ( R6 . D11 )) )) by L108 , L96 , L107 , L58;
L110: ( Result (R12 , ( R6 . D11 )) ) in { ( Result (R12 , ( R6 . B43 )) ) where B43 is (Element of R1) : (not contradiction) };
thus L111: C40 in D9 by L110 , L109 , TARSKI:def 4;
end;
L112: ( rng D10 ) c= D9 by L104 , TARSKI:def 3;
thus L113: C38 in ( Funcs ({ ( {} ) } , D9) ) by L112 , L103 , FUNCT_2:def 2;
end;
L114: ( rng D8 ) c= ( Funcs ({ ( {} ) } , D9) ) by L97 , TARSKI:def 3;
thus L115: thesis by L114 , L95 , FUNCT_2:def 2;
end;
theorem
L116: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (( the_arity_of R12 ) = ( {} ) implies ( const (R12 , ( product R6 )) ) in ( Funcs (R1 , ( union { ( Result (R12 , ( R6 . B44 )) ) where B44 is (Element of R1) : (not contradiction) } )) ))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
set D12 = ( ( commute ( OPER R6 ) ) . R12 );
set D13 = ( union { ( Result (R12 , ( R6 . B45 )) ) where B45 is (Element of R1) : (not contradiction) } );
assume L117: ( the_arity_of R12 ) = ( {} );
L118: D12 in ( Funcs (R1 , ( Funcs ({ ( {} ) } , D13) )) ) by L117 , L91;
reconsider D14 = D12 as Function;
L119: ( ( OPS R6 ) . R12 ) = ( IFEQ (( the_arity_of R12 ) , ( {} ) , ( commute ( R6 ?. R12 ) ) , ( Commute ( Frege ( R6 ?. R12 ) ) )) ) by PRALG_2:def 13
.= ( commute ( R6 ?. R12 ) ) by L117 , FUNCOP_1:def 8;
L120: ( const (R12 , ( product R6 )) ) = ( ( commute D14 ) . ( {} ) ) by L119 , MSUALG_1:def 6;
L121: ( commute D14 ) in ( Funcs ({ ( {} ) } , ( Funcs (R1 , D13) )) ) by L118 , FUNCT_6:55;
consider C42 being Function such that L122: C42 = ( commute D14 ) and L123: ( dom C42 ) = { ( {} ) } and L124: ( rng C42 ) c= ( Funcs (R1 , D13) ) by L121 , FUNCT_2:def 2;
L125: ( {} ) in { ( {} ) } by TARSKI:def 1;
L126: ( C42 . ( {} ) ) in ( rng C42 ) by L125 , L123 , FUNCT_1:def 3;
thus L127: thesis by L126 , L120 , L122 , L124;
end;
registration
let R3 being non  void non  empty ManySortedSign;
let R1 being non  empty set;
let R12 being (OperSymbol of R3);
let R6 being (MSAlgebra-Family of R1 , R3);
cluster ( const (R12 , ( product R6 )) ) ->  Relation-like  Function-like;
coherence
proof
L128: ( const (R12 , ( product R6 )) ) is Function
proof
per cases ;
suppose L129: ( the_arity_of R12 ) = ( {} );

L130: ( const (R12 , ( product R6 )) ) in ( Funcs (R1 , ( union { ( Result (R12 , ( R6 . B46 )) ) where B46 is (Element of R1) : (not contradiction) } )) ) by L129 , L116;
L131: (ex B47 being Function st (B47 = ( const (R12 , ( product R6 )) ) & ( dom B47 ) = R1 & ( rng B47 ) c= ( union { ( Result (R12 , ( R6 . B48 )) ) where B48 is (Element of R1) : (not contradiction) } ))) by L130 , FUNCT_2:def 2;
thus L132: thesis by L131;
end;
suppose L133: ( the_arity_of R12 ) <> ( {} );

L134: ( dom ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) = ( dom ( the_arity_of R12 ) ) by PRALG_2:3;
L135: ( dom ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) <> ( dom ( {} ) ) by L134 , L133;
L136: ( dom ( Den (R12 , ( product R6 )) ) ) = ( Args (R12 , ( product R6 )) ) by FUNCT_2:def 1
.= ( product ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) by PRALG_2:3;
L137: (not ( {} ) in ( dom ( Den (R12 , ( product R6 )) ) )) by L136 , L135 , CARD_3:9;
thus L138: thesis by L137 , FUNCT_1:def 2;
end;
end;
thus L140: thesis by L128;
end;
end;
theorem
L142: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R4 being (Element of R1) holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for B49 being (OperSymbol of R3) holds (( the_arity_of B49 ) = ( {} ) implies ( ( const (B49 , ( product R6 )) ) . R4 ) = ( const (B49 , ( R6 . R4 )) )))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R4 being (Element of R1);
let R6 being (MSAlgebra-Family of R1 , R3);
let C43 being (OperSymbol of R3);
assume that
L143: ( the_arity_of C43 ) = ( {} );
set D15 = ( ( commute ( OPER R6 ) ) . C43 );
set D16 = ( union { ( Result (C43 , ( R6 . B50 )) ) where B50 is (Element of R1) : (not contradiction) } );
L144: D15 in ( Funcs (R1 , ( Funcs ({ ( {} ) } , D16) )) ) by L143 , L91;
L145: ( ( OPS R6 ) . C43 ) = ( IFEQ (( the_arity_of C43 ) , ( {} ) , ( commute ( R6 ?. C43 ) ) , ( Commute ( Frege ( R6 ?. C43 ) ) )) ) by PRALG_2:def 13
.= ( commute ( R6 ?. C43 ) ) by L143 , FUNCOP_1:def 8;
L146: ( const (C43 , ( product R6 )) ) = ( ( commute D15 ) . ( {} ) ) by L145 , MSUALG_1:def 6;
L147: ( {} ) in { ( {} ) } by TARSKI:def 1;
L148: ( const (C43 , ( R6 . R4 )) ) = ( ( ( R6 ?. C43 ) . R4 ) . ( {} ) ) by PRALG_2:7
.= ( ( const (C43 , ( product R6 )) ) . R4 ) by L144 , L146 , L147 , FUNCT_6:56;
thus L149: thesis by L148;
end;
theorem
L150: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for R13 being Function holds ((( the_arity_of R12 ) = ( {} ) & ( dom R13 ) = R1 & (for B51 being (Element of R1) holds ( R13 . B51 ) = ( const (R12 , ( R6 . B51 )) ))) implies R13 = ( const (R12 , ( product R6 )) )))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let R13 being Function;
assume that
L151: ( the_arity_of R12 ) = ( {} )
and
L152: ( dom R13 ) = R1
and
L153: (for B52 being (Element of R1) holds ( R13 . B52 ) = ( const (R12 , ( R6 . B52 )) ));
L154:
now
let C44 being set;
assume L155: C44 in R1;
reconsider D17 = C44 as (Element of R1) by L155;
thus L156: ( R13 . C44 ) = ( const (R12 , ( R6 . D17 )) ) by L153
.= ( ( const (R12 , ( product R6 )) ) . C44 ) by L151 , L142;
end;
set D18 = ( union { ( Result (R12 , ( R6 . B53 )) ) where B53 is (Element of R1) : (not contradiction) } );
L157: ( const (R12 , ( product R6 )) ) in ( Funcs (R1 , D18) ) by L151 , L116;
L158: (ex B54 being Function st (B54 = ( const (R12 , ( product R6 )) ) & ( dom B54 ) = R1 & ( rng B54 ) c= D18)) by L157 , FUNCT_2:def 2;
thus L159: thesis by L158 , L152 , L154 , FUNCT_1:2;
end;
theorem
L160: (for R3 being non  void non  empty ManySortedSign holds (for R9 being MSAlgebra over R3 holds (for R10 being MSAlgebra over R3 holds (for R12 being (OperSymbol of R3) holds (for B55 being (Element of ( Args (R12 , R9) )) holds ((B55 = ( {} ) & ( the_arity_of R12 ) = ( {} ) & ( Args (R12 , R9) ) <> ( {} ) & ( Args (R12 , R10) ) <> ( {} )) implies (for B56 being (ManySortedFunction of R9 , R10) holds ( B56 # B55 ) = ( {} ))))))))
proof
let R3 being non  void non  empty ManySortedSign;
let R9 being MSAlgebra over R3;
let R10 being MSAlgebra over R3;
let R12 being (OperSymbol of R3);
let C45 being (Element of ( Args (R12 , R9) ));
assume that
L161: C45 = ( {} )
and
L162: ( the_arity_of R12 ) = ( {} )
and
L163: (( Args (R12 , R9) ) <> ( {} ) & ( Args (R12 , R10) ) <> ( {} ));
reconsider D19 = C45 as Function by L161;
let C46 being (ManySortedFunction of R9 , R10);
L164: ( rng ( the_arity_of R12 ) ) = ( {} ) by L162;
L165: ( rng ( the_arity_of R12 ) ) c= ( dom C46 ) by L164 , XBOOLE_1:2;
L166: ( dom ( C46 * ( the_arity_of R12 ) ) ) = ( dom ( the_arity_of R12 ) ) by L165 , RELAT_1:27
.= ( {} ) by L162;
L167: ( rng ( C46 * ( the_arity_of R12 ) ) ) = ( {} ) by L166 , RELAT_1:42;
L168: ( C46 * ( the_arity_of R12 ) ) is (Function of ( {} ) , ( {} )) by L167 , L166 , FUNCT_2:1;
L169: D19 in ( product ( doms ( C46 * ( the_arity_of R12 ) ) ) ) by L168 , L161 , CARD_3:10 , FUNCT_6:23 , TARSKI:def 1;
L170: ( C46 # C45 ) = ( ( Frege ( C46 * ( the_arity_of R12 ) ) ) . C45 ) by L163 , MSUALG_3:def 5
.= ( ( C46 * ( the_arity_of R12 ) ) .. D19 ) by L169 , PRALG_2:def 2;
reconsider D20 = ( C46 # C45 ) as Function by L170;
L171: ( dom D20 ) = ( {} ) by L166 , L170 , PRALG_1:def 17;
thus L172: thesis by L171;
end;
begin
theorem
L173: (for R3 being non  void non  empty ManySortedSign holds (for R12 being (OperSymbol of R3) holds (for B57 , B58 being  non-empty MSAlgebra over R3 holds (for B59 being (ManySortedFunction of B57 , B58) holds (for B60 being (Element of ( Args (R12 , B57) )) holds B60 in ( product ( doms ( B59 * ( the_arity_of R12 ) ) ) ))))))
proof
let R3 being non  void non  empty ManySortedSign;
let R12 being (OperSymbol of R3);
let C47 , C48 being  non-empty MSAlgebra over R3;
let C49 being (ManySortedFunction of C47 , C48);
let C50 being (Element of ( Args (R12 , C47) ));
L174: C50 in ( Args (R12 , C47) );
L175: C50 in ( product ( (the Sorts of C47) * ( the_arity_of R12 ) ) ) by L174 , PRALG_2:3;
L176: ( dom C50 ) = ( dom ( (the Sorts of C47) * ( the_arity_of R12 ) ) ) by L175 , CARD_3:9
.= ( dom ( the_arity_of R12 ) ) by PRALG_2:3;
L177: ( dom C49 ) = (the carrier of R3) by PARTFUN1:def 2;
L178: ( rng ( the_arity_of R12 ) ) c= ( dom C49 ) by L177;
L179:
now
let C51 being set;
assume L180: C51 in ( dom ( doms ( C49 * ( the_arity_of R12 ) ) ) );
L181: C51 in ( ( C49 * ( the_arity_of R12 ) ) " ( SubFuncs ( rng ( C49 * ( the_arity_of R12 ) ) ) ) ) by L180 , FUNCT_6:def 2;
L182: C51 in ( dom ( C49 * ( the_arity_of R12 ) ) ) by L181 , FUNCT_6:19;
thus L183: C51 in ( dom C50 ) by L182 , L178 , L176 , RELAT_1:27;
end;
L184: ( dom C50 ) = ( dom ( (the Sorts of C47) * ( the_arity_of R12 ) ) ) by L175 , CARD_3:9;
L185:
now
let C52 being set;
assume L186: C52 in ( dom ( doms ( C49 * ( the_arity_of R12 ) ) ) );
L187: C52 in ( dom ( the_arity_of R12 ) ) by L186 , L176 , L179;
L188: ( ( the_arity_of R12 ) . C52 ) in ( rng ( the_arity_of R12 ) ) by L187 , FUNCT_1:def 3;
reconsider D21 = ( ( the_arity_of R12 ) . C52 ) as (Element of (the carrier of R3)) by L188;
L189: C52 in ( dom ( C49 * ( the_arity_of R12 ) ) ) by L178 , L187 , RELAT_1:27;
L190: ( ( C49 * ( the_arity_of R12 ) ) . C52 ) = ( C49 . D21 ) by L189 , FUNCT_1:12;
L191: ( ( doms ( C49 * ( the_arity_of R12 ) ) ) . C52 ) = ( dom ( C49 . D21 ) ) by L190 , L189 , FUNCT_6:22
.= ( (the Sorts of C47) . D21 ) by FUNCT_2:def 1;
L192: C52 in ( dom ( (the Sorts of C47) * ( the_arity_of R12 ) ) ) by L184 , L179 , L186;
L193: ( C50 . C52 ) in ( ( (the Sorts of C47) * ( the_arity_of R12 ) ) . C52 ) by L192 , L175 , CARD_3:9;
thus L194: ( C50 . C52 ) in ( ( doms ( C49 * ( the_arity_of R12 ) ) ) . C52 ) by L193 , L184 , L179 , L186 , L191 , FUNCT_1:12;
end;
L195:
now
let C53 being set;
assume L196: C53 in ( dom C50 );
L197: C53 in ( dom ( C49 * ( the_arity_of R12 ) ) ) by L196 , L178 , L176 , RELAT_1:27;
L198: ( ( C49 * ( the_arity_of R12 ) ) . C53 ) is Function;
L199: C53 in ( ( C49 * ( the_arity_of R12 ) ) " ( SubFuncs ( rng ( C49 * ( the_arity_of R12 ) ) ) ) ) by L198 , L197 , FUNCT_6:19;
thus L200: C53 in ( dom ( doms ( C49 * ( the_arity_of R12 ) ) ) ) by L199 , FUNCT_6:def 2;
end;
L201: ( dom C50 ) c= ( dom ( doms ( C49 * ( the_arity_of R12 ) ) ) ) by L195 , TARSKI:def 3;
L202: ( dom ( doms ( C49 * ( the_arity_of R12 ) ) ) ) c= ( dom C50 ) by L179 , TARSKI:def 3;
L203: ( dom C50 ) = ( dom ( doms ( C49 * ( the_arity_of R12 ) ) ) ) by L202 , L201 , XBOOLE_0:def 10;
thus L204: thesis by L203 , L185 , CARD_3:9;
end;
theorem
L205: (for R3 being non  void non  empty ManySortedSign holds (for R12 being (OperSymbol of R3) holds (for B61 , B62 being  non-empty MSAlgebra over R3 holds (for B63 being (ManySortedFunction of B61 , B62) holds (for B64 being (Element of ( Args (R12 , B61) )) holds (for B65 being set holds (B65 in ( dom ( the_arity_of R12 ) ) implies ( ( B63 # B64 ) . B65 ) = ( ( B63 . ( ( the_arity_of R12 ) /. B65 ) ) . ( B64 . B65 ) ))))))))
proof
let R3 being non  void non  empty ManySortedSign;
let R12 being (OperSymbol of R3);
let C54 , C55 being  non-empty MSAlgebra over R3;
let C56 being (ManySortedFunction of C54 , C55);
let C57 being (Element of ( Args (R12 , C54) ));
let C58 being set;
assume that
L206: C58 in ( dom ( the_arity_of R12 ) );
L207: ( dom C56 ) = (the carrier of R3) by PARTFUN1:def 2;
L208: ( rng ( the_arity_of R12 ) ) c= ( dom C56 ) by L207;
L209: C58 in ( dom ( C56 * ( the_arity_of R12 ) ) ) by L208 , L206 , RELAT_1:27;
L210: C57 in ( product ( doms ( C56 * ( the_arity_of R12 ) ) ) ) by L173;
thus L211: ( ( C56 # C57 ) . C58 ) = ( ( ( Frege ( C56 * ( the_arity_of R12 ) ) ) . C57 ) . C58 ) by MSUALG_3:def 5
.= ( ( ( C56 * ( the_arity_of R12 ) ) .. C57 ) . C58 ) by L210 , PRALG_2:def 2
.= ( ( ( C56 * ( the_arity_of R12 ) ) . C58 ) . ( C57 . C58 ) ) by L209 , PRALG_1:def 17
.= ( ( C56 . ( ( the_arity_of R12 ) . C58 ) ) . ( C57 . C58 ) ) by L209 , FUNCT_1:12
.= ( ( C56 . ( ( the_arity_of R12 ) /. C58 ) ) . ( C57 . C58 ) ) by L206 , PARTFUN1:def 6;
end;
theorem
L212: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for B66 being (Element of ( Args (R12 , ( product R6 )) )) holds B66 in ( Funcs (( dom ( the_arity_of R12 ) ) , ( Funcs (R1 , ( union { ( (the Sorts of ( R6 . B67 )) . B68 ) where B67 is (Element of R1) , B68 is (Element of (the carrier of R3)) : (not contradiction) } )) )) ))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let C59 being (Element of ( Args (R12 , ( product R6 )) ));
set D22 = ( union { ( (the Sorts of ( R6 . B69 )) . B70 ) where B69 is (Element of R1) , B70 is (Element of (the carrier of R3)) : (not contradiction) } );
consider C60 being Function such that L213: C60 = C59;
L214: C59 in ( Args (R12 , ( product R6 )) );
L215: C59 in ( product ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) by L214 , PRALG_2:3;
L216: ( dom ( SORTS R6 ) ) = (the carrier of R3) by PARTFUN1:def 2;
L217: ( rng ( the_arity_of R12 ) ) c= ( dom ( SORTS R6 ) ) by L216;
L218:
now
let C61 being set;
assume L219: C61 in ( rng C60 );
consider C62 being set such that L220: C62 in ( dom C60 ) and L221: ( C60 . C62 ) = C61 by L219 , FUNCT_1:def 3;
L222: C62 in ( dom ( ( SORTS R6 ) * ( the_arity_of R12 ) ) ) by L215 , L213 , L220 , CARD_3:9;
L223: C62 in ( dom ( the_arity_of R12 ) ) by L222 , L217 , RELAT_1:27;
L224: ( ( the_arity_of R12 ) . C62 ) in ( rng ( the_arity_of R12 ) ) by L223 , FUNCT_1:def 3;
reconsider D23 = ( ( the_arity_of R12 ) . C62 ) as (Element of (the carrier of R3)) by L224;
L225: ( C60 . C62 ) in ( ( ( SORTS R6 ) * ( the_arity_of R12 ) ) . C62 ) by L215 , L213 , L222 , CARD_3:9;
L226: ( C60 . C62 ) in ( ( SORTS R6 ) . D23 ) by L225 , L222 , FUNCT_1:12;
L227: ( C60 . C62 ) in ( product ( Carrier (R6 , D23) ) ) by L226 , PRALG_2:def 10;
consider C63 being Function such that L228: C63 = ( C60 . C62 ) and L229: ( dom C63 ) = ( dom ( Carrier (R6 , D23) ) ) and L230: (for B71 being set holds (B71 in ( dom ( Carrier (R6 , D23) ) ) implies ( C63 . B71 ) in ( ( Carrier (R6 , D23) ) . B71 ))) by L227 , CARD_3:def 5;
L231:
now
let C64 being set;
assume L232: C64 in ( rng C63 );
consider C65 being set such that L233: C65 in ( dom C63 ) and L234: ( C63 . C65 ) = C64 by L232 , FUNCT_1:def 3;
reconsider D24 = C65 as (Element of R1) by L229 , L233;
L235: (ex B72 being MSAlgebra over R3 st (B72 = ( R6 . D24 ) & ( ( Carrier (R6 , D23) ) . D24 ) = ( (the Sorts of B72) . D23 ))) by PRALG_2:def 9;
L236: ( C63 . D24 ) in ( (the Sorts of ( R6 . D24 )) . D23 ) by L235 , L229 , L230 , L233;
L237: ( (the Sorts of ( R6 . D24 )) . D23 ) in { ( (the Sorts of ( R6 . B73 )) . B74 ) where B73 is (Element of R1) , B74 is (Element of (the carrier of R3)) : (not contradiction) };
thus L238: C64 in D22 by L237 , L234 , L236 , TARSKI:def 4;
end;
L239: ( rng C63 ) c= D22 by L231 , TARSKI:def 3;
L240: ( dom C63 ) = R1 by L229 , PARTFUN1:def 2;
thus L241: C61 in ( Funcs (R1 , D22) ) by L240 , L221 , L228 , L239 , FUNCT_2:def 2;
end;
L242: ( rng C60 ) c= ( Funcs (R1 , D22) ) by L218 , TARSKI:def 3;
L243: ( dom C59 ) = ( dom ( ( SORTS R6 ) * ( the_arity_of R12 ) ) ) by L215 , CARD_3:9
.= ( dom ( the_arity_of R12 ) ) by L217 , RELAT_1:27;
thus L244: thesis by L243 , L213 , L242 , FUNCT_2:def 2;
end;
theorem
L245: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for B75 being (Element of ( Args (R12 , ( product R6 )) )) holds (for B76 being set holds (B76 in ( dom ( the_arity_of R12 ) ) implies ( B75 . B76 ) in ( product ( Carrier (R6 , ( ( the_arity_of R12 ) /. B76 )) ) ))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let C66 being (Element of ( Args (R12 , ( product R6 )) ));
let C67 being set;
assume that
L246: C67 in ( dom ( the_arity_of R12 ) );
L247: ( dom ( SORTS R6 ) ) = (the carrier of R3) by PARTFUN1:def 2;
L248: ( rng ( the_arity_of R12 ) ) c= ( dom ( SORTS R6 ) ) by L247;
L249: C67 in ( dom ( ( SORTS R6 ) * ( the_arity_of R12 ) ) ) by L248 , L246 , RELAT_1:27;
L250: C66 in ( Args (R12 , ( product R6 )) );
L251: C66 in ( product ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) by L250 , PRALG_2:3;
L252: ( C66 . C67 ) in ( ( ( SORTS R6 ) * ( the_arity_of R12 ) ) . C67 ) by L251 , L249 , CARD_3:9;
L253: ( C66 . C67 ) in ( ( SORTS R6 ) . ( ( the_arity_of R12 ) . C67 ) ) by L252 , L249 , FUNCT_1:12;
L254: ( C66 . C67 ) in ( ( SORTS R6 ) . ( ( the_arity_of R12 ) /. C67 ) ) by L253 , L246 , PARTFUN1:def 6;
thus L255: thesis by L254 , PRALG_2:def 10;
end;
theorem
L256: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for B77 being (Element of R1) holds (for B78 being set holds (B78 in ( dom ( the_arity_of R12 ) ) implies (for B79 being (SortSymbol of R3) holds (B79 = ( ( the_arity_of R12 ) . B78 ) implies (for B80 being (Element of ( Args (R12 , ( product R6 )) )) holds (for B81 being Function holds (B81 = ( B80 . B78 ) implies ( B81 . B77 ) in ( (the Sorts of ( R6 . B77 )) . B79 )))))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let C68 being (Element of R1);
let C69 being set;
assume L257: C69 in ( dom ( the_arity_of R12 ) );
L258: C69 in ( dom ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) by L257 , PRALG_2:3;
let C70 being (SortSymbol of R3);
assume that
L259: C70 = ( ( the_arity_of R12 ) . C69 );
let C71 being (Element of ( Args (R12 , ( product R6 )) ));
L260: C71 in ( Args (R12 , ( product R6 )) );
L261: C71 in ( product ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) ) by L260 , PRALG_2:3;
let C72 being Function;
assume L262: C72 = ( C71 . C69 );
L263: C72 in ( ( (the Sorts of ( product R6 )) * ( the_arity_of R12 ) ) . C69 ) by L262 , L258 , L261 , CARD_3:9;
L264: C72 in ( (the Sorts of ( product R6 )) . C70 ) by L263 , L259 , L258 , FUNCT_1:12;
L265: C72 in ( product ( Carrier (R6 , C70) ) ) by L264 , PRALG_2:def 10;
L266: C68 in R1;
L267: C68 in ( dom ( Carrier (R6 , C70) ) ) by L266 , PARTFUN1:def 2;
L268: (ex B82 being MSAlgebra over R3 st (B82 = ( R6 . C68 ) & ( ( Carrier (R6 , C70) ) . C68 ) = ( (the Sorts of B82) . C70 ))) by PRALG_2:def 9;
thus L269: thesis by L268 , L267 , L265 , CARD_3:9;
end;
theorem
L270: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for B83 being (Element of ( Args (R12 , ( product R6 )) )) holds (( the_arity_of R12 ) <> ( {} ) implies ( commute B83 ) in ( product ( doms ( R6 ?. R12 ) ) )))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let C73 being (Element of ( Args (R12 , ( product R6 )) ));
set D25 = ( union { ( (the Sorts of ( R6 . B84 )) . B85 ) where B84 is (Element of R1) , B85 is (Element of (the carrier of R3)) : (not contradiction) } );
L271: C73 in ( Funcs (( dom ( the_arity_of R12 ) ) , ( Funcs (R1 , D25) )) ) by L212;
assume L272: ( the_arity_of R12 ) <> ( {} );
L273: ( commute C73 ) in ( Funcs (R1 , ( Funcs (( dom ( the_arity_of R12 ) ) , D25) )) ) by L272 , L271 , FUNCT_6:55;
L274: (ex B86 being Function st (B86 = ( commute C73 ) & ( dom B86 ) = R1 & ( rng B86 ) c= ( Funcs (( dom ( the_arity_of R12 ) ) , D25) ))) by L273 , FUNCT_2:def 2;
L275:
now
let C74 being set;
assume L276: C74 in ( dom ( doms ( R6 ?. R12 ) ) );
reconsider D26 = C74 as (Element of R1) by L276 , PRALG_2:11;
L277:
now
let C75 being set;
assume L278: C75 in ( dom ( (the Sorts of ( R6 . D26 )) * ( the_arity_of R12 ) ) );
L279: C75 in ( dom ( the_arity_of R12 ) ) by L278 , PRALG_2:3;
L280: ( ( the_arity_of R12 ) . C75 ) in ( rng ( the_arity_of R12 ) ) by L279 , FUNCT_1:def 3;
reconsider D27 = ( ( the_arity_of R12 ) . C75 ) as (SortSymbol of R3) by L280;
L281: (ex B87 being Function st (B87 = C73 & ( dom B87 ) = ( dom ( the_arity_of R12 ) ) & ( rng B87 ) c= ( Funcs (R1 , D25) ))) by L271 , FUNCT_2:def 2;
L282: C75 in ( dom C73 ) by L281 , L278 , PRALG_2:3;
L283: ( C73 . C75 ) in ( rng C73 ) by L282 , FUNCT_1:def 3;
consider C76 being Function such that L284: C76 = ( C73 . C75 ) and L285: ( dom C76 ) = R1 and L286: ( rng C76 ) c= D25 by L283 , L281 , FUNCT_2:def 2;
L287: (( ( ( commute C73 ) . D26 ) . C75 ) = ( C76 . D26 ) & ( C76 . D26 ) in ( (the Sorts of ( R6 . D26 )) . D27 )) by L271 , L279 , L284 , L256 , FUNCT_6:56;
thus L288: ( ( ( commute C73 ) . D26 ) . C75 ) in ( ( (the Sorts of ( R6 . D26 )) * ( the_arity_of R12 ) ) . C75 ) by L287 , L278 , FUNCT_1:12;
end;
L289: ( ( commute C73 ) . D26 ) in ( rng ( commute C73 ) ) by L274 , FUNCT_1:def 3;
L290: (ex B88 being Function st (B88 = ( ( commute C73 ) . D26 ) & ( dom B88 ) = ( dom ( the_arity_of R12 ) ) & ( rng B88 ) c= D25)) by L289 , L274 , FUNCT_2:def 2;
L291: ( dom ( ( commute C73 ) . D26 ) ) = ( dom ( (the Sorts of ( R6 . D26 )) * ( the_arity_of R12 ) ) ) by L290 , PRALG_2:3;
L292: ( ( commute C73 ) . D26 ) in ( product ( (the Sorts of ( R6 . D26 )) * ( the_arity_of R12 ) ) ) by L291 , L277 , CARD_3:9;
L293: ( ( commute C73 ) . D26 ) in ( Args (R12 , ( R6 . D26 )) ) by L292 , PRALG_2:3;
thus L294: ( ( commute C73 ) . C74 ) in ( ( doms ( R6 ?. R12 ) ) . C74 ) by L293 , PRALG_2:11;
end;
L295: ( dom ( commute C73 ) ) = ( dom ( doms ( R6 ?. R12 ) ) ) by L274 , PRALG_2:11;
thus L296: thesis by L295 , L275 , CARD_3:9;
end;
theorem
L297: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for B89 being (Element of ( Args (R12 , ( product R6 )) )) holds (( the_arity_of R12 ) <> ( {} ) implies B89 in ( dom ( Commute ( Frege ( R6 ?. R12 ) ) ) )))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let C77 being (Element of ( Args (R12 , ( product R6 )) ));
set D28 = ( union { ( (the Sorts of ( R6 . B90 )) . B91 ) where B90 is (Element of R1) , B91 is (Element of (the carrier of R3)) : (not contradiction) } );
assume L298: ( the_arity_of R12 ) <> ( {} );
L299: ( commute C77 ) in ( product ( doms ( R6 ?. R12 ) ) ) by L298 , L270;
L300: ( commute C77 ) in ( dom ( Frege ( R6 ?. R12 ) ) ) by L299 , PARTFUN1:def 2;
L301: C77 in ( Funcs (( dom ( the_arity_of R12 ) ) , ( Funcs (R1 , D28) )) ) by L212;
L302: C77 = ( commute ( commute C77 ) ) by L301 , L298 , FUNCT_6:57;
thus L303: thesis by L302 , L300 , PRALG_2:def 1;
end;
theorem
L304: (for B92 being set holds (for B93 being non  void non  empty ManySortedSign holds (for B94 being (MSAlgebra-Family of B92 , B93) holds (for B95 being (OperSymbol of B93) holds (for B96 being (Element of ( Args (B95 , ( product B94 )) )) holds ( ( Den (B95 , ( product B94 )) ) . B96 ) in ( product ( Carrier (B94 , ( the_result_sort_of B95 )) ) ))))))
proof
let C78 being set;
let C79 being non  void non  empty ManySortedSign;
let C80 being (MSAlgebra-Family of C78 , C79);
let C81 being (OperSymbol of C79);
let C82 being (Element of ( Args (C81 , ( product C80 )) ));
L305: ( Result (C81 , ( product C80 )) ) = ( ( SORTS C80 ) . ( the_result_sort_of C81 ) ) by PRALG_2:3
.= ( product ( Carrier (C80 , ( the_result_sort_of C81 )) ) ) by PRALG_2:def 10;
thus L306: thesis by L305;
end;
theorem
L307: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R4 being (Element of R1) holds (for B97 being (OperSymbol of R3) holds (( the_arity_of B97 ) <> ( {} ) implies (for B98 being  non-empty MSAlgebra over R3 holds (for B99 being (Element of ( Args (B97 , ( product R6 )) )) holds ( ( commute B99 ) . R4 ) is (Element of ( Args (B97 , ( R6 . R4 )) ))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R4 being (Element of R1);
let C83 being (OperSymbol of R3);
assume that
L308: ( the_arity_of C83 ) <> ( {} );
let C84 being  non-empty MSAlgebra over R3;
let C85 being (Element of ( Args (C83 , ( product R6 )) ));
L309: R4 in R1;
L310: R4 in ( dom ( doms ( R6 ?. C83 ) ) ) by L309 , PRALG_2:11;
L311: ( commute C85 ) in ( product ( doms ( R6 ?. C83 ) ) ) by L308 , L270;
L312: ( ( commute C85 ) . R4 ) in ( ( doms ( R6 ?. C83 ) ) . R4 ) by L311 , L310 , CARD_3:9;
thus L313: thesis by L312 , PRALG_2:11;
end;
theorem
L314: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R4 being (Element of R1) holds (for R12 being (OperSymbol of R3) holds (for B100 being (Element of ( Args (R12 , ( product R6 )) )) holds (for B101 being set holds (B101 in ( dom ( the_arity_of R12 ) ) implies (for B102 being Function holds (B102 = ( B100 . B101 ) implies ( ( ( commute B100 ) . R4 ) . B101 ) = ( B102 . R4 )))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R4 being (Element of R1);
let R12 being (OperSymbol of R3);
let C86 being (Element of ( Args (R12 , ( product R6 )) ));
let C87 being set;
assume that
L315: C87 in ( dom ( the_arity_of R12 ) );
set D29 = ( union { ( (the Sorts of ( R6 . B103 )) . B104 ) where B103 is (Element of R1) , B104 is (Element of (the carrier of R3)) : (not contradiction) } );
L316: C86 in ( Funcs (( dom ( the_arity_of R12 ) ) , ( Funcs (R1 , D29) )) ) by L212;
let C88 being Function;
assume L317: C88 = ( C86 . C87 );
thus L318: thesis by L317 , L315 , L316 , FUNCT_6:56;
end;
theorem
L319: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for B105 being (OperSymbol of R3) holds (( the_arity_of B105 ) <> ( {} ) implies (for B106 being (Element of ( Args (B105 , ( product R6 )) )) holds (for B107 being (Element of R1) holds (for B108 being Function holds (B108 = ( ( Den (B105 , ( product R6 )) ) . B106 ) implies ( B108 . B107 ) = ( ( Den (B105 , ( R6 . B107 )) ) . ( ( commute B106 ) . B107 ) ))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let C89 being (OperSymbol of R3);
assume that
L320: ( the_arity_of C89 ) <> ( {} );
let C90 being (Element of ( Args (C89 , ( product R6 )) ));
let C91 being (Element of R1);
L321: C90 in ( dom ( Commute ( Frege ( R6 ?. C89 ) ) ) ) by L320 , L297;
L322: ( commute C90 ) in ( product ( doms ( R6 ?. C89 ) ) ) by L320 , L270;
L323: ( Den (C89 , ( product R6 )) ) = ( ( OPS R6 ) . C89 ) by MSUALG_1:def 6
.= ( IFEQ (( the_arity_of C89 ) , ( {} ) , ( commute ( R6 ?. C89 ) ) , ( Commute ( Frege ( R6 ?. C89 ) ) )) ) by PRALG_2:def 13
.= ( Commute ( Frege ( R6 ?. C89 ) ) ) by L320 , FUNCOP_1:def 8;
L324: ( dom ( R6 ?. C89 ) ) = R1 by PARTFUN1:def 2;
let C92 being Function;
assume L325: C92 = ( ( Den (C89 , ( product R6 )) ) . C90 );
L326: C92 = ( ( Frege ( R6 ?. C89 ) ) . ( commute C90 ) ) by L325 , L323 , L321 , PRALG_2:def 1
.= ( ( R6 ?. C89 ) .. ( commute C90 ) ) by L322 , PRALG_2:def 2;
L327: ( C92 . C91 ) = ( ( ( R6 ?. C89 ) . C91 ) . ( ( commute C90 ) . C91 ) ) by L326 , L324 , PRALG_1:def 17
.= ( ( Den (C89 , ( R6 . C91 )) ) . ( ( commute C90 ) . C91 ) ) by PRALG_2:7;
thus L328: thesis by L327;
end;
begin
definition
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let C93 being (MSAlgebra-Family of R1 , R3);
let C94 being (Element of R1);
func proj (C93 , C94) -> (ManySortedFunction of ( product C93 ) , ( C93 . C94 )) means 
:L329: (for B109 being (Element of R3) holds ( it . B109 ) = ( proj (( Carrier (C93 , B109) ) , C94) ));
existence
proof
deffunc H1((Element of R3)) = ( proj (( Carrier (C93 , $1) ) , C94) );
consider C95 being (ManySortedSet of (the carrier of R3)) such that L330: (for B110 being (Element of R3) holds ( C95 . B110 ) = H1(B110)) from PBOOLE:sch 5;
L331: C95 is (ManySortedFunction of ( product C93 ) , ( C93 . C94 ))
proof
let C96 being set;
assume that
L332: C96 in (the carrier of R3);
L333: ( C95 . C96 ) is (Function of ( (the Sorts of ( product C93 )) . C96 ) , ( (the Sorts of ( C93 . C94 )) . C96 ))
proof
reconsider D30 = C96 as (Element of R3) by L332;
L334: ( C95 . C96 ) = ( proj (( Carrier (C93 , D30) ) , C94) ) by L330;
reconsider D31 = ( C95 . C96 ) as Function by L334;
L335: ( rng D31 ) c= ( (the Sorts of ( C93 . C94 )) . C96 )
proof
let C97 being set;
L336: (( dom ( Carrier (C93 , D30) ) ) = R1 & (ex B111 being MSAlgebra over R3 st (B111 = ( C93 . C94 ) & ( ( Carrier (C93 , D30) ) . C94 ) = ( (the Sorts of B111) . D30 )))) by PARTFUN1:def 2 , PRALG_2:def 9;
assume L337: C97 in ( rng D31 );
L338: C97 in ( rng ( proj (( Carrier (C93 , D30) ) , C94) ) ) by L337 , L330;
consider C98 being set such that L339: C98 in ( dom ( proj (( Carrier (C93 , D30) ) , C94) ) ) and L340: C97 = ( ( proj (( Carrier (C93 , D30) ) , C94) ) . C98 ) by L338 , FUNCT_1:def 3;
L341: C98 in ( product ( Carrier (C93 , D30) ) ) by L339;
reconsider D32 = C98 as Function by L341;
L342: C97 = ( D32 . C94 ) by L339 , L340 , CARD_3:def 16;
thus L343: thesis by L342 , L341 , L336 , CARD_3:9;
end;
L344: ( dom D31 ) = ( dom ( proj (( Carrier (C93 , D30) ) , C94) ) ) by L330
.= ( product ( Carrier (C93 , D30) ) ) by CARD_3:def 16
.= ( (the Sorts of ( product C93 )) . C96 ) by PRALG_2:def 10;
thus L345: thesis by L344 , L332 , L335 , FUNCT_2:def 1 , RELSET_1:4;
end;
thus L346: thesis by L333;
end;
reconsider D33 = C95 as (ManySortedFunction of ( product C93 ) , ( C93 . C94 )) by L331;
take D33;
thus L347: thesis by L330;
end;
uniqueness
proof
let C99 , C100 being (ManySortedFunction of ( product C93 ) , ( C93 . C94 ));
assume that
L348: (for B112 being (Element of R3) holds ( C99 . B112 ) = ( proj (( Carrier (C93 , B112) ) , C94) ))
and
L349: (for B113 being (Element of R3) holds ( C100 . B113 ) = ( proj (( Carrier (C93 , B113) ) , C94) ));
L350:
now
let C101 being set;
assume L351: C101 in (the carrier of R3);
reconsider D34 = C101 as (Element of R3) by L351;
thus L352: ( C99 . C101 ) = ( proj (( Carrier (C93 , D34) ) , C94) ) by L348
.= ( C100 . C101 ) by L349;
end;
thus L353: C99 = C100 by L350 , PBOOLE:3;
end;
end;
theorem
L355: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R12 being (OperSymbol of R3) holds (for B114 being (Element of ( Args (R12 , ( product R6 )) )) holds (( the_arity_of R12 ) <> ( {} ) implies (for B115 being (Element of R1) holds ( ( proj (R6 , B115) ) # B114 ) = ( ( commute B114 ) . B115 ))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R12 being (OperSymbol of R3);
let C102 being (Element of ( Args (R12 , ( product R6 )) ));
assume that
L356: ( the_arity_of R12 ) <> ( {} );
set D35 = ( union { ( (the Sorts of ( R6 . B116 )) . B117 ) where B116 is (Element of R1) , B117 is (Element of (the carrier of R3)) : (not contradiction) } );
let C103 being (Element of R1);
L357: C102 in ( Funcs (( dom ( the_arity_of R12 ) ) , ( Funcs (R1 , D35) )) ) by L212;
L358: ( commute C102 ) in ( Funcs (R1 , ( Funcs (( dom ( the_arity_of R12 ) ) , D35) )) ) by L357 , L356 , FUNCT_6:55;
L359: ( dom ( commute C102 ) ) = R1 by L358 , FUNCT_2:92;
L360: ( ( commute C102 ) . C103 ) in ( rng ( commute C102 ) ) by L359 , FUNCT_1:def 3;
L361:
now
L362: ( rng C102 ) c= ( Funcs (R1 , D35) ) by L357 , FUNCT_2:92;
let C104 being set;
assume that
L363: C104 in ( dom ( the_arity_of R12 ) );
L364: ( C102 . C104 ) in ( product ( Carrier (R6 , ( ( the_arity_of R12 ) /. C104 )) ) ) by L363 , L245;
L365: ( C102 . C104 ) in ( dom ( proj (( Carrier (R6 , ( ( the_arity_of R12 ) /. C104 )) ) , C103) ) ) by L364 , CARD_3:def 16;
L366: C104 in ( dom C102 ) by L357 , L363 , FUNCT_2:92;
L367: ( C102 . C104 ) in ( rng C102 ) by L366 , FUNCT_1:def 3;
consider C105 being Function such that L368: C105 = ( C102 . C104 ) and L369: ( dom C105 ) = R1 and L370: ( rng C105 ) c= D35 by L367 , L362 , FUNCT_2:def 2;
thus L371: ( ( ( proj (R6 , C103) ) # C102 ) . C104 ) = ( ( ( proj (R6 , C103) ) . ( ( the_arity_of R12 ) /. C104 ) ) . ( C102 . C104 ) ) by L363 , L205
.= ( ( proj (( Carrier (R6 , ( ( the_arity_of R12 ) /. C104 )) ) , C103) ) . ( C102 . C104 ) ) by L329
.= ( C105 . C103 ) by L368 , L365 , CARD_3:def 16
.= ( ( ( commute C102 ) . C103 ) . C104 ) by L357 , L363 , L368 , FUNCT_6:56;
end;
L372: C102 in ( product ( doms ( ( proj (R6 , C103) ) * ( the_arity_of R12 ) ) ) ) by L173;
L373: ( rng ( commute C102 ) ) c= ( Funcs (( dom ( the_arity_of R12 ) ) , D35) ) by L358 , FUNCT_2:92;
L374: ( dom ( ( commute C102 ) . C103 ) ) = ( dom ( the_arity_of R12 ) ) by L373 , L360 , FUNCT_2:92;
L375: ( dom ( proj (R6 , C103) ) ) = (the carrier of R3) by PARTFUN1:def 2;
L376: ( rng ( the_arity_of R12 ) ) c= ( dom ( proj (R6 , C103) ) ) by L375;
L377: ( dom ( ( proj (R6 , C103) ) # C102 ) ) = ( dom ( ( Frege ( ( proj (R6 , C103) ) * ( the_arity_of R12 ) ) ) . C102 ) ) by MSUALG_3:def 5
.= ( dom ( ( ( proj (R6 , C103) ) * ( the_arity_of R12 ) ) .. C102 ) ) by L372 , PRALG_2:def 2
.= ( dom ( ( proj (R6 , C103) ) * ( the_arity_of R12 ) ) ) by PRALG_1:def 17
.= ( dom ( the_arity_of R12 ) ) by L376 , RELAT_1:27;
thus L378: thesis by L377 , L374 , L361 , FUNCT_1:2;
end;
theorem
L379: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for B118 being (Element of R1) holds (for B119 being (MSAlgebra-Family of R1 , R3) holds ( proj (B119 , B118) ) is_homomorphism ( product B119 ) , ( B119 . B118 )))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let C106 being (Element of R1);
let C107 being (MSAlgebra-Family of R1 , R3);
thus L380: ( proj (C107 , C106) ) is_homomorphism ( product C107 ) , ( C107 . C106 )
proof
let C108 being (OperSymbol of R3);
assume that
L381: ( Args (C108 , ( product C107 )) ) <> ( {} );
let C109 being (Element of ( Args (C108 , ( product C107 )) ));
set D36 = ( proj (C107 , C106) );
set D37 = ( the_result_sort_of C108 );
L382: C108 in (the carrier' of R3);
L383: C108 in ( dom (the ResultSort of R3) ) by L382 , FUNCT_2:def 1;
L384: ( Result (C108 , ( product C107 )) ) = ( ( (the Sorts of ( product C107 )) * (the ResultSort of R3) ) . C108 ) by MSUALG_1:def 5
.= ( (the Sorts of ( product C107 )) . ( (the ResultSort of R3) . C108 ) ) by L383 , FUNCT_1:13
.= ( ( SORTS C107 ) . D37 ) by MSUALG_1:def 2
.= ( product ( Carrier (C107 , D37) ) ) by PRALG_2:def 10;
thus L385: ( ( D36 . D37 ) . ( ( Den (C108 , ( product C107 )) ) . C109 ) ) = ( ( Den (C108 , ( C107 . C106 )) ) . ( D36 # C109 ) )
proof
per cases ;
suppose L386: ( the_arity_of C108 ) = ( {} );

L387: ( const (C108 , ( product C107 )) ) in ( product ( Carrier (C107 , D37) ) ) by L386 , L384 , L58;
L388: ( const (C108 , ( product C107 )) ) in ( dom ( proj (( Carrier (C107 , D37) ) , C106) ) ) by L387 , CARD_3:def 16;
L389: ( Args (C108 , ( product C107 )) ) = { ( {} ) } by L386 , PRALG_2:4;
L390: C109 = ( {} ) by L389 , TARSKI:def 1;
L391: ( ( D36 . D37 ) . ( ( Den (C108 , ( product C107 )) ) . C109 ) ) = ( ( D36 . D37 ) . ( const (C108 , ( product C107 )) ) ) by L389 , TARSKI:def 1
.= ( ( proj (( Carrier (C107 , D37) ) , C106) ) . ( const (C108 , ( product C107 )) ) ) by L329
.= ( ( const (C108 , ( product C107 )) ) . C106 ) by L388 , CARD_3:def 16
.= ( const (C108 , ( C107 . C106 )) ) by L386 , L142
.= ( ( Den (C108 , ( C107 . C106 )) ) . ( D36 # C109 ) ) by L386 , L390 , L160;
thus L392: thesis by L391;
end;
suppose L393: ( the_arity_of C108 ) <> ( {} );

reconsider D38 = ( ( Den (C108 , ( product C107 )) ) . C109 ) as Function by L384;
L394: ( ( Den (C108 , ( product C107 )) ) . C109 ) in ( product ( Carrier (C107 , D37) ) ) by L384;
L395: ( ( Den (C108 , ( product C107 )) ) . C109 ) in ( dom ( proj (( Carrier (C107 , D37) ) , C106) ) ) by L394 , CARD_3:def 16;
L396: ( ( D36 . D37 ) . ( ( Den (C108 , ( product C107 )) ) . C109 ) ) = ( ( proj (( Carrier (C107 , D37) ) , C106) ) . ( ( Den (C108 , ( product C107 )) ) . C109 ) ) by L329
.= ( D38 . C106 ) by L395 , CARD_3:def 16
.= ( ( Den (C108 , ( C107 . C106 )) ) . ( ( commute C109 ) . C106 ) ) by L393 , L319
.= ( ( Den (C108 , ( C107 . C106 )) ) . ( ( proj (C107 , C106) ) # C109 ) ) by L393 , L355;
thus L397: thesis by L396;
end;
end;

end;

end;
theorem
L381: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R4 being (Element of R1) holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R11 being (SortSymbol of R3) holds (for B120 being  non-empty MSAlgebra over R3 holds (for B121 being (ManySortedFunction of R1) holds ((for B122 being (Element of R1) holds (ex B123 being (ManySortedFunction of B120 , ( R6 . B122 )) st (B123 = ( B121 . B122 ) & B123 is_homomorphism B120 , ( R6 . B122 )))) implies (B121 in ( Funcs (R1 , ( Funcs ((the carrier of R3) , { ( ( B121 . B125 ) . B124 ) where B124 is (SortSymbol of R3) , B125 is (Element of R1) : (not contradiction) }) )) ) & ( ( ( commute B121 ) . R11 ) . R4 ) = ( ( B121 . R4 ) . R11 ))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R4 being (Element of R1);
let R6 being (MSAlgebra-Family of R1 , R3);
let R11 being (SortSymbol of R3);
let C110 being  non-empty MSAlgebra over R3;
let C111 being (ManySortedFunction of R1);
assume that
L382: (for B126 being (Element of R1) holds (ex B127 being (ManySortedFunction of C110 , ( R6 . B126 )) st (B127 = ( C111 . B126 ) & B127 is_homomorphism C110 , ( R6 . B126 ))));
set D39 = { ( ( C111 . B129 ) . B128 ) where B128 is (SortSymbol of R3) , B129 is (Element of R1) : (not contradiction) };
set D40 = (the carrier of R3);
L383: ( rng C111 ) c= ( Funcs (D40 , D39) )
proof
let C112 being set;
assume L384: C112 in ( rng C111 );
consider C113 being set such that L385: C113 in ( dom C111 ) and L386: ( C111 . C113 ) = C112 by L384 , FUNCT_1:def 3;
reconsider D41 = C113 as (Element of R1) by L385;
consider C114 being (ManySortedFunction of C110 , ( R6 . D41 )) such that L387: C114 = ( C111 . D41 ) and L388: C114 is_homomorphism C110 , ( R6 . D41 ) by L382;
L389: ( rng C114 ) c= D39
proof
let C115 being set;
assume L390: C115 in ( rng C114 );
consider C116 being set such that L391: C116 in ( dom C114 ) and L392: ( C114 . C116 ) = C115 by L390 , FUNCT_1:def 3;
L393: C116 is (SortSymbol of R3) by L391;
thus L394: thesis by L393 , L387 , L392;
end;
L395: ( dom C114 ) = D40 by PARTFUN1:def 2;
thus L396: thesis by L395 , L386 , L387 , L389 , FUNCT_2:def 2;
end;
L397: ( dom C111 ) = R1 by PARTFUN1:def 2;
thus L398: C111 in ( Funcs (R1 , ( Funcs (D40 , D39) )) ) by L397 , L383 , FUNCT_2:def 2;
L399: C111 in ( Funcs (R1 , ( Funcs (D40 , D39) )) ) by L397 , L383 , FUNCT_2:def 2;
thus L400: thesis by L399 , FUNCT_6:56;
end;
theorem
L401: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R11 being (SortSymbol of R3) holds (for B130 being  non-empty MSAlgebra over R3 holds (for B131 being (ManySortedFunction of R1) holds ((for B132 being (Element of R1) holds (ex B133 being (ManySortedFunction of B130 , ( R6 . B132 )) st (B133 = ( B131 . B132 ) & B133 is_homomorphism B130 , ( R6 . B132 )))) implies ( ( commute B131 ) . R11 ) in ( Funcs (R1 , ( Funcs (( (the Sorts of B130) . R11 ) , ( union { ( (the Sorts of ( R6 . B134 )) . B135 ) where B134 is (Element of R1) , B135 is (SortSymbol of R3) : (not contradiction) } )) )) ))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R11 being (SortSymbol of R3);
let C117 being  non-empty MSAlgebra over R3;
let C118 being (ManySortedFunction of R1);
assume that
L402: (for B136 being (Element of R1) holds (ex B137 being (ManySortedFunction of C117 , ( R6 . B136 )) st (B137 = ( C118 . B136 ) & B137 is_homomorphism C117 , ( R6 . B136 ))));
set D42 = (the Sorts of C117);
set D43 = (the carrier of R3);
set D44 = ( union { ( (the Sorts of ( R6 . B138 )) . B139 ) where B138 is (Element of R1) , B139 is (SortSymbol of R3) : (not contradiction) } );
set D45 = { ( (the Sorts of ( R6 . B140 )) . B141 ) where B140 is (Element of R1) , B141 is (SortSymbol of R3) : (not contradiction) };
set D46 = { ( ( C118 . B143 ) . B142 ) where B142 is (SortSymbol of R3) , B143 is (Element of R1) : (not contradiction) };
L403: C118 in ( Funcs (R1 , ( Funcs (D43 , D46) )) ) by L402 , L381;
L404: ( commute C118 ) in ( Funcs (D43 , ( Funcs (R1 , D46) )) ) by L403 , FUNCT_6:55;
consider C119 being Function such that L405: (C119 = ( commute C118 ) & ( dom C119 ) = D43) and L406: ( rng C119 ) c= ( Funcs (R1 , D46) ) by L404 , FUNCT_2:def 2;
L407: ( ( commute C118 ) . R11 ) in ( rng C119 ) by L405 , FUNCT_1:def 3;
L408: (ex B144 being Function st (B144 = ( ( commute C118 ) . R11 ) & ( dom B144 ) = R1 & ( rng B144 ) c= D46)) by L407 , L406 , FUNCT_2:def 2;
L409: ( rng ( ( commute C118 ) . R11 ) ) c= ( Funcs (( D42 . R11 ) , D44) )
proof
let C120 being set;
assume L410: C120 in ( rng ( ( commute C118 ) . R11 ) );
consider C121 being set such that L411: C121 in ( dom ( ( commute C118 ) . R11 ) ) and L412: C120 = ( ( ( commute C118 ) . R11 ) . C121 ) by L410 , FUNCT_1:def 3;
reconsider D47 = C121 as (Element of R1) by L408 , L411;
consider C122 being (ManySortedFunction of C117 , ( R6 . D47 )) such that L413: C122 = ( C118 . D47 ) and L414: C122 is_homomorphism C117 , ( R6 . D47 ) by L402;
L415: ( (the Sorts of ( R6 . D47 )) . R11 ) c= D44
proof
L416: ( (the Sorts of ( R6 . D47 )) . R11 ) in D45;
let C123 being set;
assume L417: C123 in ( (the Sorts of ( R6 . D47 )) . R11 );
thus L418: thesis by L417 , L416 , TARSKI:def 4;
end;
L419: (( dom ( C122 . R11 ) ) = ( D42 . R11 ) & ( rng ( C122 . R11 ) ) c= D44) by L415 , FUNCT_2:def 1 , XBOOLE_1:1;
L420: C120 = ( C122 . R11 ) by L402 , L412 , L413 , L381;
thus L421: thesis by L420 , L419 , FUNCT_2:def 2;
end;
thus L422: thesis by L409 , L408 , FUNCT_2:def 2;
end;
theorem
L423: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R4 being (Element of R1) holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R11 being (SortSymbol of R3) holds (for B145 being  non-empty MSAlgebra over R3 holds (for B146 being (ManySortedFunction of R1) holds ((for B147 being (Element of R1) holds (ex B148 being (ManySortedFunction of B145 , ( R6 . B147 )) st (B148 = ( B146 . B147 ) & B148 is_homomorphism B145 , ( R6 . B147 )))) implies (for B149 being (ManySortedFunction of B145 , ( R6 . R4 )) holds (B149 = ( B146 . R4 ) implies (for B150 being set holds (B150 in ( (the Sorts of B145) . R11 ) implies (for B151 being Function holds (B151 = ( ( commute ( ( commute B146 ) . R11 ) ) . B150 ) implies ( B151 . R4 ) = ( ( B149 . R11 ) . B150 )))))))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R4 being (Element of R1);
let R6 being (MSAlgebra-Family of R1 , R3);
let R11 being (SortSymbol of R3);
let C124 being  non-empty MSAlgebra over R3;
set D48 = (the Sorts of C124);
set D49 = ( union { ( (the Sorts of ( R6 . B152 )) . B153 ) where B152 is (Element of R1) , B153 is (SortSymbol of R3) : (not contradiction) } );
let C125 being (ManySortedFunction of R1);
assume that
L424: (for B154 being (Element of R1) holds (ex B155 being (ManySortedFunction of C124 , ( R6 . B154 )) st (B155 = ( C125 . B154 ) & B155 is_homomorphism C124 , ( R6 . B154 ))));
L425: ( ( commute C125 ) . R11 ) in ( Funcs (R1 , ( Funcs (( D48 . R11 ) , D49) )) ) by L424 , L401;
L426: ( dom ( ( commute C125 ) . R11 ) ) = R1 by L425 , FUNCT_2:92;
L427: ( ( ( commute C125 ) . R11 ) . R4 ) in ( rng ( ( commute C125 ) . R11 ) ) by L426 , FUNCT_1:def 3;
reconsider D50 = ( ( commute C125 ) . R11 ) as Function;
L428: ( rng ( ( commute C125 ) . R11 ) ) c= ( Funcs (( D48 . R11 ) , D49) ) by L425 , FUNCT_2:92;
consider C126 being Function such that L429: C126 = ( D50 . R4 ) and L430: ( dom C126 ) = ( D48 . R11 ) and L431: ( rng C126 ) c= D49 by L428 , L427 , FUNCT_2:def 2;
let C127 being (ManySortedFunction of C124 , ( R6 . R4 ));
assume that
L432: C127 = ( C125 . R4 );
let C128 being set;
assume that
L433: C128 in ( (the Sorts of C124) . R11 );
let C129 being Function;
assume that
L434: C129 = ( ( commute ( ( commute C125 ) . R11 ) ) . C128 );
L435: C126 = ( C127 . R11 ) by L424 , L432 , L429 , L381;
thus L436: thesis by L435 , L433 , L434 , L425 , L429 , FUNCT_6:56;
end;
theorem
L437: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for R11 being (SortSymbol of R3) holds (for B156 being  non-empty MSAlgebra over R3 holds (for B157 being (ManySortedFunction of R1) holds ((for B158 being (Element of R1) holds (ex B159 being (ManySortedFunction of B156 , ( R6 . B158 )) st (B159 = ( B157 . B158 ) & B159 is_homomorphism B156 , ( R6 . B158 )))) implies (for B160 being set holds (B160 in ( (the Sorts of B156) . R11 ) implies ( ( commute ( ( commute B157 ) . R11 ) ) . B160 ) in ( product ( Carrier (R6 , R11) ) ))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R11 being (SortSymbol of R3);
let C130 being  non-empty MSAlgebra over R3;
set D51 = (the Sorts of C130);
set D52 = ( union { ( (the Sorts of ( R6 . B161 )) . B162 ) where B161 is (Element of R1) , B162 is (SortSymbol of R3) : (not contradiction) } );
let C131 being (ManySortedFunction of R1);
assume that
L438: (for B163 being (Element of R1) holds (ex B164 being (ManySortedFunction of C130 , ( R6 . B163 )) st (B164 = ( C131 . B163 ) & B164 is_homomorphism C130 , ( R6 . B163 ))));
L439: ( ( commute C131 ) . R11 ) in ( Funcs (R1 , ( Funcs (( D51 . R11 ) , D52) )) ) by L438 , L401;
L440: ( commute ( ( commute C131 ) . R11 ) ) in ( Funcs (( D51 . R11 ) , ( Funcs (R1 , D52) )) ) by L439 , FUNCT_6:55;
consider C132 being Function such that L441: C132 = ( commute ( ( commute C131 ) . R11 ) ) and L442: ( dom C132 ) = ( D51 . R11 ) and L443: ( rng C132 ) c= ( Funcs (R1 , D52) ) by L440 , FUNCT_2:def 2;
let C133 being set;
assume that
L444: C133 in ( (the Sorts of C130) . R11 );
L445: ( C132 . C133 ) in ( rng C132 ) by L444 , L442 , FUNCT_1:def 3;
consider C134 being Function such that L446: C134 = ( ( commute ( ( commute C131 ) . R11 ) ) . C133 ) and L447: ( dom C134 ) = R1 and L448: ( rng C134 ) c= D52 by L445 , L441 , L443 , FUNCT_2:def 2;
L449:
now
let C135 being set;
assume L450: C135 in ( dom ( Carrier (R6 , R11) ) );
reconsider D53 = C135 as (Element of R1) by L450;
consider C136 being (ManySortedFunction of C130 , ( R6 . D53 )) such that L451: C136 = ( C131 . D53 ) and L452: C136 is_homomorphism C130 , ( R6 . D53 ) by L438;
L453: C133 in ( dom ( C136 . R11 ) ) by L444 , FUNCT_2:def 1;
L454: ((ex B165 being MSAlgebra over R3 st (B165 = ( R6 . D53 ) & ( ( Carrier (R6 , R11) ) . D53 ) = ( (the Sorts of B165) . R11 ))) & ( ( C136 . R11 ) . C133 ) in ( rng ( C136 . R11 ) )) by L453 , FUNCT_1:def 3 , PRALG_2:def 9;
L455: ( C134 . D53 ) = ( ( C136 . R11 ) . C133 ) by L438 , L444 , L446 , L451 , L423;
thus L456: ( ( ( commute ( ( commute C131 ) . R11 ) ) . C133 ) . C135 ) in ( ( Carrier (R6 , R11) ) . C135 ) by L455 , L446 , L454;
end;
L457: ( dom ( ( commute ( ( commute C131 ) . R11 ) ) . C133 ) ) = ( dom ( Carrier (R6 , R11) ) ) by L446 , L447 , PARTFUN1:def 2;
thus L458: thesis by L457 , L449 , CARD_3:9;
end;
theorem
L459: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for R6 being (MSAlgebra-Family of R1 , R3) holds (for B166 being  non-empty MSAlgebra over R3 holds (for B167 being (ManySortedFunction of R1) holds ((for B168 being (Element of R1) holds (ex B169 being (ManySortedFunction of B166 , ( R6 . B168 )) st (B169 = ( B167 . B168 ) & B169 is_homomorphism B166 , ( R6 . B168 )))) implies (ex B170 being (ManySortedFunction of B166 , ( product R6 )) st (B170 is_homomorphism B166 , ( product R6 ) & (for B171 being (Element of R1) holds ( ( proj (R6 , B171) ) ** B170 ) = ( B167 . B171 ))))))))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let C137 being  non-empty MSAlgebra over R3;
let C138 being (ManySortedFunction of R1);
assume that
L460: (for B172 being (Element of R1) holds (ex B173 being (ManySortedFunction of C137 , ( R6 . B172 )) st (B173 = ( C138 . B172 ) & B173 is_homomorphism C137 , ( R6 . B172 ))));
set D54 = (the Sorts of C137);
set D55 = (the carrier of R3);
set D56 = ( union { ( (the Sorts of ( R6 . B174 )) . B175 ) where B174 is (Element of R1) , B175 is (SortSymbol of R3) : (not contradiction) } );
deffunc H2((Element of R3)) = ( commute ( ( commute C138 ) . $1 ) );
consider C139 being (ManySortedSet of (the carrier of R3)) such that L461: (for B176 being (Element of (the carrier of R3)) holds ( C139 . B176 ) = H2(B176)) from PBOOLE:sch 5;
L462:
now
let C140 being set;
assume L463: C140 in (the carrier of R3);
reconsider D57 = C140 as (SortSymbol of R3) by L463;
L464: ( ( commute C138 ) . C140 ) in ( Funcs (R1 , ( Funcs (( D54 . C140 ) , D56) )) ) by L460 , L463 , L401;
L465: ( commute ( ( commute C138 ) . C140 ) ) in ( Funcs (( D54 . C140 ) , ( Funcs (R1 , D56) )) ) by L464 , L463 , FUNCT_6:55;
L466: ( C139 . C140 ) in ( Funcs (( D54 . C140 ) , ( Funcs (R1 , D56) )) ) by L465 , L461 , L463;
consider C141 being Function such that L467: C141 = ( C139 . C140 ) and L468: ( dom C141 ) = ( D54 . C140 ) and L469: ( rng C141 ) c= ( Funcs (R1 , D56) ) by L466 , FUNCT_2:def 2;
L470: ( rng C141 ) c= ( (the Sorts of ( product R6 )) . C140 )
proof
let C142 being set;
assume L471: C142 in ( rng C141 );
consider C143 being Function such that L472: C143 = C142 and L473: ( dom C143 ) = R1 and L474: ( rng C143 ) c= D56 by L471 , L469 , FUNCT_2:def 2;
consider C144 being set such that L475: C144 in ( dom C141 ) and L476: ( C141 . C144 ) = C143 by L471 , L472 , FUNCT_1:def 3;
L477:
now
let C145 being set;
assume L478: C145 in ( dom ( Carrier (R6 , D57) ) );
reconsider D58 = C145 as (Element of R1) by L478;
consider C146 being (ManySortedFunction of C137 , ( R6 . D58 )) such that L479: C146 = ( C138 . D58 ) and L480: C146 is_homomorphism C137 , ( R6 . D58 ) by L460;
L481: ( C139 . D57 ) = ( commute ( ( commute C138 ) . D57 ) ) by L461;
L482: ( C143 . D58 ) = ( ( C146 . D57 ) . C144 ) by L481 , L460 , L467 , L468 , L475 , L476 , L479 , L423;
L483: ( dom ( C146 . D57 ) ) = ( dom C141 ) by L468 , FUNCT_2:def 1;
L484: ( ( C146 . C140 ) . C144 ) in ( rng ( C146 . C140 ) ) by L483 , L475 , FUNCT_1:def 3;
L485: ((ex B177 being MSAlgebra over R3 st (B177 = ( R6 . D58 ) & ( ( Carrier (R6 , D57) ) . D58 ) = ( (the Sorts of B177) . D57 ))) & ( rng ( C146 . D57 ) ) c= ( (the Sorts of ( R6 . D58 )) . D57 )) by PRALG_2:def 9;
thus L486: ( C143 . C145 ) in ( ( Carrier (R6 , D57) ) . C145 ) by L485 , L482 , L484;
end;
L487: ( dom ( Carrier (R6 , D57) ) ) = ( dom C143 ) by L473 , PARTFUN1:def 2;
L488: C143 in ( product ( Carrier (R6 , D57) ) ) by L487 , L477 , CARD_3:9;
thus L489: thesis by L488 , L472 , PRALG_2:def 10;
end;
thus L490: ( C139 . C140 ) is (Function of ( (the Sorts of C137) . C140 ) , ( (the Sorts of ( product R6 )) . C140 )) by L470 , L463 , L467 , L468 , FUNCT_2:def 1 , RELSET_1:4;
end;
reconsider D59 = C139 as (ManySortedFunction of C137 , ( product R6 )) by L462 , PBOOLE:def 15;
L491: D59 is_homomorphism C137 , ( product R6 )
proof
let C147 being (OperSymbol of R3);
assume that
L492: ( Args (C147 , C137) ) <> ( {} );
let C148 being (Element of ( Args (C147 , C137) ));
set D60 = ( the_result_sort_of C147 );
L493: ( Result (C147 , C137) ) = ( (the Sorts of C137) . ( the_result_sort_of C147 ) ) by PRALG_2:3;
L494: ( ( Den (C147 , C137) ) . C148 ) in ( D54 . D60 ) by L493;
thus L495: ( ( D59 . ( the_result_sort_of C147 ) ) . ( ( Den (C147 , C137) ) . C148 ) ) = ( ( Den (C147 , ( product R6 )) ) . ( D59 # C148 ) )
proof
per cases ;
suppose L496: ( the_arity_of C147 ) = ( {} );

set D61 = ( ( commute ( ( commute C138 ) . D60 ) ) . ( const (C147 , C137) ) );
L497: ( Args (C147 , C137) ) = { ( {} ) } by L496 , PRALG_2:4;
L498: C148 = ( {} ) by L497 , TARSKI:def 1;
L499:
now
let C149 being set;
assume L500: C149 in R1;
reconsider D62 = C149 as (Element of R1) by L500;
consider C150 being (ManySortedFunction of C137 , ( R6 . D62 )) such that L501: C150 = ( C138 . D62 ) and L502: C150 is_homomorphism C137 , ( R6 . D62 ) by L460;
L503: ( C150 # C148 ) = ( {} ) by L496 , L498 , L160;
thus L504: ( D61 . C149 ) = ( ( C150 . ( the_result_sort_of C147 ) ) . ( ( Den (C147 , C137) ) . C148 ) ) by L460 , L493 , L498 , L501 , L423
.= ( const (C147 , ( R6 . D62 )) ) by L502 , L503 , MSUALG_3:def 7
.= ( ( const (C147 , ( product R6 )) ) . C149 ) by L496 , L142;
end;
L505: ( const (C147 , ( product R6 )) ) in ( Funcs (R1 , ( union { ( Result (C147 , ( R6 . B178 )) ) where B178 is (Element of R1) : (not contradiction) } )) ) by L496 , L116;
L506: (ex B179 being Function st (B179 = ( const (C147 , ( product R6 )) ) & ( dom B179 ) = R1 & ( rng B179 ) c= ( union { ( Result (C147 , ( R6 . B180 )) ) where B180 is (Element of R1) : (not contradiction) } ))) by L505 , FUNCT_2:def 2;
L507: D61 in ( product ( Carrier (R6 , D60) ) ) by L460 , L494 , L498 , L437;
L508: ( dom D61 ) = ( dom ( Carrier (R6 , D60) ) ) by L507 , CARD_3:9
.= R1 by PARTFUN1:def 2;
L509: D61 = ( const (C147 , ( product R6 )) ) by L508 , L506 , L499 , FUNCT_1:2;
L510: ( D59 # C148 ) = ( {} ) by L496 , L498 , L160;
thus L511: thesis by L510 , L461 , L498 , L509;
end;
suppose L512: ( the_arity_of C147 ) <> ( {} );

L513: ( Den (C147 , ( product R6 )) ) = ( ( OPS R6 ) . C147 ) by MSUALG_1:def 6
.= ( IFEQ (( the_arity_of C147 ) , ( {} ) , ( commute ( R6 ?. C147 ) ) , ( Commute ( Frege ( R6 ?. C147 ) ) )) ) by PRALG_2:def 13
.= ( Commute ( Frege ( R6 ?. C147 ) ) ) by L512 , FUNCOP_1:def 8;
L514:
now
let C151 being (Element of ( Args (C147 , ( product R6 )) ));
L515: ( commute C151 ) in ( product ( doms ( R6 ?. C147 ) ) ) by L512 , L270;
L516: ( commute C151 ) in ( dom ( Frege ( R6 ?. C147 ) ) ) by L515 , PARTFUN1:def 2;
L517: C151 in ( dom ( Commute ( Frege ( R6 ?. C147 ) ) ) ) by L512 , L297;
L518: ( ( Den (C147 , ( product R6 )) ) . C151 ) = ( ( Frege ( R6 ?. C147 ) ) . ( commute C151 ) ) by L517 , L513 , PRALG_2:def 1;
thus L519: ( ( Den (C147 , ( product R6 )) ) . C151 ) in ( rng ( Frege ( R6 ?. C147 ) ) ) by L518 , L516 , FUNCT_1:def 3;
end;
reconsider D63 = ( ( Den (C147 , ( product R6 )) ) . ( D59 # C148 ) ) as Function by L514 , PRALG_2:8;
L520: D63 in ( rng ( Frege ( R6 ?. C147 ) ) ) by L514;
L521: ( dom D63 ) = R1 by L520 , PRALG_2:9;
set D64 = ( union { ( (the Sorts of ( R6 . B181 )) . B182 ) where B181 is (Element of R1) , B182 is (Element of (the carrier of R3)) : (not contradiction) } );
set D65 = ( ( commute ( ( commute C138 ) . D60 ) ) . ( ( Den (C147 , C137) ) . C148 ) );
L522: ( D59 # C148 ) in ( Funcs (( dom ( the_arity_of C147 ) ) , ( Funcs (R1 , D64) )) ) by L212;
L523:
now
let C152 being set;
assume L524: C152 in R1;
reconsider D66 = C152 as (Element of R1) by L524;
consider C153 being (ManySortedFunction of C137 , ( R6 . D66 )) such that L525: C153 = ( C138 . D66 ) and L526: C153 is_homomorphism C137 , ( R6 . D66 ) by L460;
L527: ( ( C153 . ( the_result_sort_of C147 ) ) . ( ( Den (C147 , C137) ) . C148 ) ) = ( ( Den (C147 , ( R6 . D66 )) ) . ( C153 # C148 ) ) by L526 , MSUALG_3:def 7;
L528:
now
let C154 being set;
assume L529: C154 in ( dom ( the_arity_of C147 ) );
L530: ( ( the_arity_of C147 ) . C154 ) in ( rng ( the_arity_of C147 ) ) by L529 , FUNCT_1:def 3;
reconsider D67 = ( ( the_arity_of C147 ) . C154 ) as (Element of (the carrier of R3)) by L530;
L531: ( ( C153 # C148 ) . C154 ) = ( ( C153 . ( ( the_arity_of C147 ) /. C154 ) ) . ( C148 . C154 ) ) by L529 , L205
.= ( ( C153 . D67 ) . ( C148 . C154 ) ) by L529 , PARTFUN1:def 6;
L532: C148 in ( Args (C147 , C137) );
L533: C148 in ( product ( (the Sorts of C137) * ( the_arity_of C147 ) ) ) by L532 , PRALG_2:3;
L534: ( dom C148 ) = ( dom ( (the Sorts of C137) * ( the_arity_of C147 ) ) ) by L533 , CARD_3:9;
L535: ( dom C148 ) = ( dom ( (the Sorts of C137) * ( the_arity_of C147 ) ) ) by L533 , CARD_3:9
.= ( dom ( the_arity_of C147 ) ) by PRALG_2:3;
L536: ( C148 . C154 ) in ( ( (the Sorts of C137) * ( the_arity_of C147 ) ) . C154 ) by L535 , L529 , L533 , L534 , CARD_3:9;
L537: ( C148 . C154 ) in ( D54 . D67 ) by L536 , L529 , L535 , L534 , FUNCT_1:12;
L538: ( ( D59 # C148 ) . C154 ) = ( ( D59 . ( ( the_arity_of C147 ) /. C154 ) ) . ( C148 . C154 ) ) by L529 , L205
.= ( ( D59 . D67 ) . ( C148 . C154 ) ) by L529 , PARTFUN1:def 6
.= ( ( commute ( ( commute C138 ) . D67 ) ) . ( C148 . C154 ) ) by L461;
reconsider D68 = ( ( D59 # C148 ) . C154 ) as Function by L538;
thus L539: ( ( ( commute ( D59 # C148 ) ) . D66 ) . C154 ) = ( D68 . D66 ) by L522 , L529 , FUNCT_6:56
.= ( ( C153 # C148 ) . C154 ) by L460 , L525 , L537 , L531 , L538 , L423;
end;
L540: ( dom C153 ) = (the carrier of R3) by PARTFUN1:def 2;
L541: ( rng ( the_arity_of C147 ) ) c= ( dom C153 ) by L540;
L542: ( commute ( D59 # C148 ) ) in ( Funcs (R1 , ( Funcs (( dom ( the_arity_of C147 ) ) , D64) )) ) by L512 , L522 , FUNCT_6:55;
consider C155 being Function such that L543: C155 = ( commute ( D59 # C148 ) ) and L544: ( dom C155 ) = R1 and L545: ( rng C155 ) c= ( Funcs (( dom ( the_arity_of C147 ) ) , D64) ) by L542 , FUNCT_2:def 2;
L546: ( C155 . D66 ) in ( rng C155 ) by L544 , FUNCT_1:def 3;
L547: (ex B183 being Function st (B183 = ( ( commute ( D59 # C148 ) ) . D66 ) & ( dom B183 ) = ( dom ( the_arity_of C147 ) ) & ( rng B183 ) c= D64)) by L546 , L543 , L545 , FUNCT_2:def 2;
L548: C148 in ( product ( doms ( C153 * ( the_arity_of C147 ) ) ) ) by L173;
L549: ( dom ( C153 # C148 ) ) = ( dom ( ( Frege ( C153 * ( the_arity_of C147 ) ) ) . C148 ) ) by MSUALG_3:def 5
.= ( dom ( ( C153 * ( the_arity_of C147 ) ) .. C148 ) ) by L548 , PRALG_2:def 2
.= ( dom ( C153 * ( the_arity_of C147 ) ) ) by PRALG_1:def 17
.= ( dom ( the_arity_of C147 ) ) by L541 , RELAT_1:27;
L550: ( C153 # C148 ) = ( ( commute ( D59 # C148 ) ) . D66 ) by L549 , L547 , L528 , FUNCT_1:2;
L551: ( D65 . C152 ) = ( ( Den (C147 , ( R6 . D66 )) ) . ( ( commute ( D59 # C148 ) ) . D66 ) ) by L550 , L460 , L493 , L525 , L527 , L423
.= ( D63 . C152 ) by L512 , L319;
thus L552: ( D65 . C152 ) = ( D63 . C152 ) by L551;
end;
L553: ( ( commute ( ( commute C138 ) . D60 ) ) . ( ( Den (C147 , C137) ) . C148 ) ) in ( product ( Carrier (R6 , D60) ) ) by L460 , L493 , L437;
L554: ( dom D65 ) = ( dom ( Carrier (R6 , D60) ) ) by L553 , CARD_3:9
.= R1 by PARTFUN1:def 2;
L555: ( ( commute ( ( commute C138 ) . D60 ) ) . ( ( Den (C147 , C137) ) . C148 ) ) = D63 by L554 , L521 , L523 , FUNCT_1:2;
thus L556: thesis by L555 , L461;
end;
end;

end;
take D59;
L496: (for B184 being (Element of R1) holds ( ( proj (R6 , B184) ) ** D59 ) = ( C138 . B184 ))
proof
let C156 being (Element of R1);
consider C157 being (ManySortedFunction of C137 , ( R6 . C156 )) such that L497: C157 = ( C138 . C156 ) and L498: C157 is_homomorphism C137 , ( R6 . C156 ) by L460;
L499: ( dom ( ( proj (R6 , C156) ) ** D59 ) ) = ( ( dom ( proj (R6 , C156) ) ) /\ ( dom D59 ) ) by PBOOLE:def 19
.= ( D55 /\ ( dom D59 ) ) by PARTFUN1:def 2
.= ( D55 /\ D55 ) by PARTFUN1:def 2
.= D55;
L500:
now
let C158 being set;
assume L501: C158 in D55;
reconsider D69 = C158 as (SortSymbol of R3) by L501;
L502: ( ( ( proj (R6 , C156) ) ** D59 ) . C158 ) = ( ( ( proj (R6 , C156) ) . D69 ) * ( D59 . D69 ) ) by L499 , PBOOLE:def 19
.= ( ( proj (( Carrier (R6 , D69) ) , C156) ) * ( D59 . D69 ) ) by L329
.= ( ( proj (( Carrier (R6 , D69) ) , C156) ) * ( commute ( ( commute C138 ) . D69 ) ) ) by L461;
L503: ( ( commute C138 ) . D69 ) in ( Funcs (R1 , ( Funcs (( D54 . D69 ) , D56) )) ) by L460 , L401;
L504: ( commute ( ( commute C138 ) . D69 ) ) in ( Funcs (( D54 . D69 ) , ( Funcs (R1 , D56) )) ) by L503 , FUNCT_6:55;
consider C159 being Function such that L505: C159 = ( commute ( ( commute C138 ) . D69 ) ) and L506: ( dom C159 ) = ( D54 . D69 ) and L507: ( rng C159 ) c= ( Funcs (R1 , D56) ) by L504 , FUNCT_2:def 2;
L508: ( rng C159 ) c= ( dom ( proj (( Carrier (R6 , D69) ) , C156) ) )
proof
let C160 being set;
assume L509: C160 in ( rng C159 );
consider C161 being set such that L510: C161 in ( dom C159 ) and L511: ( C159 . C161 ) = C160 by L509 , FUNCT_1:def 3;
L512: ( ( commute ( ( commute C138 ) . D69 ) ) . C161 ) in ( product ( Carrier (R6 , D69) ) ) by L460 , L506 , L510 , L437;
thus L513: thesis by L512 , L505 , L511 , CARD_3:def 16;
end;
L514: ( dom ( ( ( proj (R6 , C156) ) ** D59 ) . C158 ) ) = ( D54 . C158 ) by L508 , L505 , L506 , L502 , RELAT_1:27;
L515:
now
let C162 being set;
assume L516: C162 in ( D54 . C158 );
L517: ( ( commute ( ( commute C138 ) . D69 ) ) . C162 ) in ( product ( Carrier (R6 , D69) ) ) by L516 , L460 , L437;
L518: ( ( commute ( ( commute C138 ) . D69 ) ) . C162 ) in ( dom ( proj (( Carrier (R6 , D69) ) , C156) ) ) by L517 , CARD_3:def 16;
thus L519: ( ( ( ( proj (R6 , C156) ) ** D59 ) . C158 ) . C162 ) = ( ( proj (( Carrier (R6 , D69) ) , C156) ) . ( ( commute ( ( commute C138 ) . D69 ) ) . C162 ) ) by L502 , L514 , L516 , FUNCT_1:12
.= ( ( ( commute ( ( commute C138 ) . D69 ) ) . C162 ) . C156 ) by L518 , CARD_3:def 16
.= ( ( C157 . C158 ) . C162 ) by L460 , L497 , L516 , L423;
end;
L520: ( dom ( C157 . C158 ) ) = ( dom ( C157 . D69 ) )
.= ( D54 . C158 ) by FUNCT_2:def 1;
thus L521: ( ( ( proj (R6 , C156) ) ** D59 ) . C158 ) = ( C157 . C158 ) by L520 , L514 , L515 , FUNCT_1:2;
end;
L522: ( dom C157 ) = D55 by PARTFUN1:def 2;
thus L523: thesis by L522 , L497 , L499 , L500 , FUNCT_1:2;
end;
thus L524: thesis by L496 , L491;
end;
begin
definition
let R1 being non  empty set;
let R2 being (ManySortedSet of R1);
let R3 being non  void non  empty ManySortedSign;
mode MSAlgebra-Class of R3 , R2
 -> (ManySortedSet of R1)
means :L525: (for B185 being set holds (B185 in R1 implies ( it . B185 ) is (MSAlgebra-Family of ( R2 . B185 ) , R3)));
existence
proof
defpred S1[ set , set ] means $2 is (MSAlgebra-Family of ( R2 . $1 ) , R3);
L526: (for B186 being set holds (B186 in R1 implies (ex B187 being set st S1[ B186 , B187 ])))
proof
let C163 being set;
assume that
L527: C163 in R1;
set D70 = the (MSAlgebra-Family of ( R2 . C163 ) , R3);
take D70;
thus L528: thesis;
end;
consider C164 being (ManySortedSet of R1) such that L529: (for B188 being set holds (B188 in R1 implies S1[ B188 , ( C164 . B188 ) ])) from PBOOLE:sch 3(L526);
take C164;
thus L530: thesis by L529;
end;
end;
definition
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let R6 being (MSAlgebra-Family of R1 , R3);
let R7 being (Equivalence_Relation of R1);
func R6 / R7 -> (MSAlgebra-Class of R3 , ( id ( Class R7 ) )) means 
:L532: (for R5 being set holds (R5 in ( Class R7 ) implies ( it . R5 ) = ( R6 | R5 )));
existence
proof
thus L533: (ex B189 being (MSAlgebra-Class of R3 , ( id ( Class R7 ) )) st (for R5 being set holds (R5 in ( Class R7 ) implies ( B189 . R5 ) = ( R6 | R5 ))))
proof
deffunc H3(set) = ( R6 | $1 );
consider C165 being (ManySortedSet of ( Class R7 )) such that L534: (for R5 being set holds (R5 in ( Class R7 ) implies ( C165 . R5 ) = H3(R5))) from PBOOLE:sch 4;
L535: C165 is (MSAlgebra-Class of R3 , ( id ( Class R7 ) ))
proof
let C166 being set;
assume L536: C166 in ( Class R7 );
L537: ( dom ( R6 | C166 ) ) = ( ( dom R6 ) /\ C166 ) by RELAT_1:61
.= ( R1 /\ C166 ) by PARTFUN1:def 2
.= C166 by L536 , XBOOLE_1:28
.= ( ( id ( Class R7 ) ) . C166 ) by L536 , FUNCT_1:18;
reconsider D71 = ( R6 | C166 ) as (ManySortedSet of ( ( id ( Class R7 ) ) . C166 )) by L537 , PARTFUN1:def 2 , RELAT_1:def 18;
L538: D71 is (MSAlgebra-Family of ( ( id ( Class R7 ) ) . C166 ) , R3)
proof
let C167 being set;
assume L539: C167 in ( ( id ( Class R7 ) ) . C166 );
L540: ( dom D71 ) = C166 by L536 , L537 , FUNCT_1:18;
reconsider D72 = C167 as (Element of R1) by L540 , L536 , L537 , L539;
L541: ( R6 . D72 ) is  non-empty  non-empty  non-empty  non-empty MSAlgebra over R3;
thus L542: thesis by L541 , L537 , L539 , FUNCT_1:47;
end;
thus L543: thesis by L538 , L534 , L536;
end;
reconsider D73 = C165 as (MSAlgebra-Class of R3 , ( id ( Class R7 ) )) by L535;
take D73;
thus L544: thesis by L534;
end;

end;
uniqueness
proof
L534: (for B190 , B191 being (MSAlgebra-Class of R3 , ( id ( Class R7 ) )) holds (((for R5 being set holds (R5 in ( Class R7 ) implies ( B190 . R5 ) = ( R6 | R5 ))) & (for R5 being set holds (R5 in ( Class R7 ) implies ( B191 . R5 ) = ( R6 | R5 )))) implies B190 = B191))
proof
let C168 , C169 being (MSAlgebra-Class of R3 , ( id ( Class R7 ) ));
assume that
L535: (for R5 being set holds (R5 in ( Class R7 ) implies ( C168 . R5 ) = ( R6 | R5 )))
and
L536: (for R5 being set holds (R5 in ( Class R7 ) implies ( C169 . R5 ) = ( R6 | R5 )));
L537:
now
let R5 being set;
assume L538: R5 in ( Class R7 );
thus L539: ( C168 . R5 ) = ( R6 | R5 ) by L538 , L535
.= ( C169 . R5 ) by L536 , L538;
end;
thus L540: thesis by L537 , PBOOLE:3;
end;
thus L541: thesis by L534;
end;
end;
definition
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let C170 being  non-empty (ManySortedSet of R1);
let C171 being (MSAlgebra-Class of R3 , C170);
func product C171 -> (MSAlgebra-Family of R1 , R3) means 
:L543: (for R4 being (Element of R1) holds (R4 in R1 implies (ex B192 being non  empty set st (ex B193 being (MSAlgebra-Family of B192 , R3) st (B192 = ( C170 . R4 ) & B193 = ( C171 . R4 ) & ( it . R4 ) = ( product B193 ))))));
existence
proof
thus L544: (ex B194 being (MSAlgebra-Family of R1 , R3) st (for R4 being (Element of R1) holds (R4 in R1 implies (ex B195 being non  empty set st (ex B196 being (MSAlgebra-Family of B195 , R3) st (B195 = ( C170 . R4 ) & B196 = ( C171 . R4 ) & ( B194 . R4 ) = ( product B196 )))))))
proof
defpred S2[ set , set ] means (ex B197 being non  empty set st (ex B198 being (MSAlgebra-Family of B197 , R3) st (B197 = ( C170 . $1 ) & B198 = ( C171 . $1 ) & $2 = ( product B198 ))));
L545:
now
let C172 being set;
assume L546: C172 in R1;
reconsider D74 = ( C170 . C172 ) as non  empty set by L546;
reconsider D75 = ( C171 . C172 ) as (MSAlgebra-Family of D74 , R3) by L546 , L525;
L547: (ex B199 being set st B199 = ( product D75 ));
consider C173 being set such that L548: (ex B200 being non  empty set st (ex B201 being (MSAlgebra-Family of B200 , R3) st (B200 = ( C170 . C172 ) & B201 = ( C171 . C172 ) & C173 = ( product B201 )))) by L547;
take D76 = C173;
thus L549: S2[ C172 , D76 ] by L548;
end;
consider C174 being (ManySortedSet of R1) such that L550: (for B202 being set holds (B202 in R1 implies S2[ B202 , ( C174 . B202 ) ])) from PBOOLE:sch 3(L545);
L551:
now
let C175 being set;
assume L552: C175 in R1;
L553: (ex B203 being non  empty set st (ex B204 being (MSAlgebra-Family of B203 , R3) st (B203 = ( C170 . C175 ) & B204 = ( C171 . C175 ) & ( C174 . C175 ) = ( product B204 )))) by L552 , L550;
thus L554: ( C174 . C175 ) is  non-empty  non-empty  non-empty  non-empty MSAlgebra over R3 by L553;
end;
reconsider D77 = C174 as (MSAlgebra-Family of R1 , R3) by L551 , PRALG_2:def 5;
take D77;
thus L555: thesis by L550;
end;

end;
uniqueness
proof
L545: (for B205 , B206 being (MSAlgebra-Family of R1 , R3) holds (((for R4 being (Element of R1) holds (R4 in R1 implies (ex B207 being non  empty set st (ex B208 being (MSAlgebra-Family of B207 , R3) st (B207 = ( C170 . R4 ) & B208 = ( C171 . R4 ) & ( B205 . R4 ) = ( product B208 )))))) & (for R4 being (Element of R1) holds (R4 in R1 implies (ex B209 being non  empty set st (ex B210 being (MSAlgebra-Family of B209 , R3) st (B209 = ( C170 . R4 ) & B210 = ( C171 . R4 ) & ( B206 . R4 ) = ( product B210 ))))))) implies B205 = B206))
proof
let C176 , C177 being (MSAlgebra-Family of R1 , R3);
assume that
L546: ((for R4 being (Element of R1) holds (R4 in R1 implies (ex B211 being non  empty set st (ex B212 being (MSAlgebra-Family of B211 , R3) st (B211 = ( C170 . R4 ) & B212 = ( C171 . R4 ) & ( C176 . R4 ) = ( product B212 )))))) & (for R4 being (Element of R1) holds (R4 in R1 implies (ex B213 being non  empty set st (ex B214 being (MSAlgebra-Family of B213 , R3) st (B213 = ( C170 . R4 ) & B214 = ( C171 . R4 ) & ( C177 . R4 ) = ( product B214 )))))));
L547:
now
let C178 being set;
assume L548: C178 in R1;
reconsider D78 = C178 as (Element of R1) by L548;
L549: ((ex B215 being non  empty set st (ex B216 being (MSAlgebra-Family of B215 , R3) st (B215 = ( C170 . D78 ) & B216 = ( C171 . D78 ) & ( C176 . D78 ) = ( product B216 )))) & (ex B217 being non  empty set st (ex B218 being (MSAlgebra-Family of B217 , R3) st (B217 = ( C170 . D78 ) & B218 = ( C171 . D78 ) & ( C177 . D78 ) = ( product B218 ))))) by L546;
thus L550: ( C176 . C178 ) = ( C177 . C178 ) by L549;
end;
thus L551: thesis by L547 , PBOOLE:3;
end;
thus L552: thesis by L545;
end;
end;
theorem
L554: (for R1 being non  empty set holds (for R3 being non  void non  empty ManySortedSign holds (for B219 being (MSAlgebra-Family of R1 , R3) holds (for B220 being (Equivalence_Relation of R1) holds ( product B219 ) , ( product ( product ( B219 / B220 ) ) ) are_isomorphic ))))
proof
let R1 being non  empty set;
let R3 being non  void non  empty ManySortedSign;
let C179 being (MSAlgebra-Family of R1 , R3);
let C180 being (Equivalence_Relation of R1);
set D79 = ( product C179 );
set D80 = ( product ( product ( C179 / C180 ) ) );
set D81 = (the Sorts of D79);
set D82 = (the Sorts of D80);
defpred S3[ set , set , set ] means (for B221 , B222 being Function holds ((B221 = $2 & B222 = $1) implies (for B223 being (Element of ( Class C180 )) holds ( B222 . B223 ) = ( B221 | B223 ))));
L555: (for B224 being set holds (B224 in (the carrier of R3) implies (for B225 being set holds (B225 in ( D81 . B224 ) implies (ex B226 being set st (B226 in ( D82 . B224 ) & S3[ B226 , B225 , B224 ]))))))
proof
let C181 being set;
assume L556: C181 in (the carrier of R3);
reconsider D83 = C181 as (SortSymbol of R3) by L556;
L557: ( D81 . D83 ) = ( product ( Carrier (C179 , D83) ) ) by PRALG_2:def 10;
let C182 being set;
assume that
L558: C182 in ( D81 . C181 );
reconsider D84 = C182 as Function by L558 , L557;
deffunc H4(set) = ( D84 | $1 );
consider C183 being (ManySortedSet of ( Class C180 )) such that L559: (for R5 being set holds (R5 in ( Class C180 ) implies ( C183 . R5 ) = H4(R5))) from PBOOLE:sch 4;
L560: ( dom ( Carrier (( product ( C179 / C180 ) ) , D83) ) ) = ( Class C180 ) by PARTFUN1:def 2;
L561: (for B227 being set holds (B227 in ( dom ( Carrier (( product ( C179 / C180 ) ) , D83) ) ) implies ( C183 . B227 ) in ( ( Carrier (( product ( C179 / C180 ) ) , D83) ) . B227 )))
proof
set D85 = ( product ( C179 / C180 ) );
let C184 being set;
assume that
L562: C184 in ( dom ( Carrier (( product ( C179 / C180 ) ) , D83) ) );
L563: ( ( C179 / C180 ) . C184 ) = ( C179 | C184 ) by L562 , L532;
reconsider D86 = C184 as non  empty (Subset of R1) by L560 , L562;
L564: (ex B228 being MSAlgebra over R3 st (B228 = ( D85 . D86 ) & ( ( Carrier (D85 , D83) ) . D86 ) = ( (the Sorts of B228) . D83 ))) by L562 , PRALG_2:def 9;
L565: ( dom ( C179 | D86 ) ) = ( ( dom C179 ) /\ D86 ) by RELAT_1:61
.= ( R1 /\ D86 ) by PARTFUN1:def 2
.= D86 by XBOOLE_1:28;
reconsider D87 = ( C179 | D86 ) as (ManySortedSet of D86) by L565 , PARTFUN1:def 2;
L566: (for B229 being set holds (B229 in D86 implies ( D87 . B229 ) is  non-empty  non-empty  non-empty  non-empty MSAlgebra over R3))
proof
let C185 being set;
assume L567: C185 in D86;
L568: ( C179 . C185 ) is  non-empty  non-empty  non-empty  non-empty MSAlgebra over R3 by L567 , PRALG_2:def 5;
thus L569: thesis by L568 , L565 , L567 , FUNCT_1:47;
end;
reconsider D88 = D87 as (MSAlgebra-Family of D86 , R3) by L566 , PRALG_2:def 5;
L570: ( D84 | D86 ) in ( product ( ( Carrier (C179 , D83) ) | D86 ) ) by L558 , L557 , L7;
L571: ( D84 | D86 ) in ( product ( Carrier (D88 , D83) ) ) by L570 , L18;
consider C186 being non  empty set, C187 being (MSAlgebra-Family of C186 , R3) such that L572: C186 = ( ( id ( Class C180 ) ) . D86 ) and L573: (C187 = ( ( C179 / C180 ) . D86 ) & ( D85 . D86 ) = ( product C187 )) by L562 , L543;
L574: C186 = D86 by L562 , L572 , FUNCT_1:18;
L575: ( ( Carrier (D85 , D83) ) . D86 ) = ( product ( Carrier (D88 , D83) ) ) by L574 , L563 , L573 , L564 , PRALG_2:def 10;
thus L576: thesis by L575 , L559 , L562 , L571;
end;
take C183;
L577: ( dom ( Carrier (( product ( C179 / C180 ) ) , D83) ) ) = ( Class C180 ) by PARTFUN1:def 2
.= ( dom C183 ) by PARTFUN1:def 2;
L578: C183 in ( product ( Carrier (( product ( C179 / C180 ) ) , D83) ) ) by L577 , L561 , CARD_3:9;
thus L579: thesis by L578 , L559 , PRALG_2:def 10;
end;
consider C188 being (ManySortedFunction of D81 , D82) such that L580: (for B230 being set holds (B230 in (the carrier of R3) implies (ex B231 being (Function of ( D81 . B230 ) , ( D82 . B230 )) st (B231 = ( C188 . B230 ) & (for B232 being set holds (B232 in ( D81 . B230 ) implies S3[ ( B231 . B232 ) , B232 , B230 ])))))) from MSSUBFAM:sch 1(L555);
L581: C188 is_homomorphism D79 , D80
proof
let C189 being (OperSymbol of R3);
assume that
L582: ( Args (C189 , D79) ) <> ( {} );
let C190 being (Element of ( Args (C189 , D79) ));
thus L583: ( ( C188 . ( the_result_sort_of C189 ) ) . ( ( Den (C189 , D79) ) . C190 ) ) = ( ( Den (C189 , D80) ) . ( C188 # C190 ) )
proof
L584: ( ( Den (C189 , D79) ) . C190 ) in ( Result (C189 , D79) );
L585: ( ( Den (C189 , D79) ) . C190 ) in ( D81 . ( the_result_sort_of C189 ) ) by L584 , PRALG_2:3;
set D89 = ( the_result_sort_of C189 );
set D90 = ( product ( C179 / C180 ) );
L586: ( D82 . D89 ) = ( product ( Carrier (D90 , D89) ) ) by PRALG_2:def 10;
L587: (ex B233 being (Function of ( D81 . D89 ) , ( D82 . D89 )) st (B233 = ( C188 . D89 ) & (for B234 being set holds (B234 in ( D81 . D89 ) implies S3[ ( B233 . B234 ) , B234 , D89 ])))) by L580;
L588: ( dom ( C188 . D89 ) ) = ( ( SORTS C179 ) . D89 ) by FUNCT_2:def 1
.= ( product ( Carrier (C179 , D89) ) ) by PRALG_2:def 10;
L589: ( ( Den (C189 , D79) ) . C190 ) in ( product ( Carrier (C179 , D89) ) ) by L304;
per cases ;
suppose L590: ( the_arity_of C189 ) = ( {} );

L591: ( Args (C189 , D79) ) = { ( {} ) } by L590 , PRALG_2:4;
L592: C190 = ( {} ) by L591 , TARSKI:def 1;
L593: ( ( C188 . D89 ) . ( const (C189 , D79) ) ) in ( rng ( C188 . D89 ) ) by L592 , L588 , L589 , FUNCT_1:def 3;
reconsider D91 = ( ( C188 . D89 ) . ( const (C189 , D79) ) ) as Function by L586;
L594: ( dom ( const (C189 , D79) ) ) = ( dom ( Carrier (C179 , D89) ) ) by L589 , L592 , CARD_3:9
.= R1 by PARTFUN1:def 2;
L595:
now
let C191 being (Element of ( Class C180 ));
consider C192 being non  empty set, C193 being (MSAlgebra-Family of C192 , R3) such that L596: C192 = ( ( id ( Class C180 ) ) . C191 ) and L597: C193 = ( ( C179 / C180 ) . C191 ) and L598: ( D90 . C191 ) = ( product C193 ) by L543;
L599: ( dom ( ( const (C189 , ( product C179 )) ) | C191 ) ) = ( R1 /\ C191 ) by L594 , RELAT_1:61
.= C191 by XBOOLE_1:28;
L600:
now
let C194 being set;
L601: ( dom ( C179 | C191 ) ) = ( ( dom C179 ) /\ C191 ) by RELAT_1:61
.= ( R1 /\ C191 ) by PARTFUN1:def 2
.= C191 by XBOOLE_1:28;
assume L602: C194 in C191;
reconsider D92 = C194 as (Element of C192) by L602 , L596 , FUNCT_1:18;
reconsider D93 = D92 as (Element of R1) by L602;
L603: C193 = ( C179 | C191 ) by L597 , L532;
L604: ( C193 . D92 ) = ( C179 . D93 ) by L603 , L602 , L601 , FUNCT_1:47;
thus L605: ( ( ( const (C189 , ( product C179 )) ) | C191 ) . C194 ) = ( ( const (C189 , ( product C179 )) ) . C194 ) by L599 , L602 , FUNCT_1:47
.= ( const (C189 , ( C179 . D93 )) ) by L590 , L142
.= ( ( const (C189 , ( product C193 )) ) . C194 ) by L590 , L604 , L142;
end;
L606: ( const (C189 , ( product C193 )) ) in ( Funcs (C192 , ( union { ( Result (C189 , ( C193 . B235 )) ) where B235 is (Element of C192) : (not contradiction) } )) ) by L590 , L116;
L607: ( dom ( const (C189 , ( product C193 )) ) ) = C192 by L606 , FUNCT_2:92
.= C191 by L596 , FUNCT_1:18;
thus L608: ( ( const (C189 , D79) ) | C191 ) = ( const (C189 , ( D90 . C191 )) ) by L607 , L598 , L599 , L600 , FUNCT_1:2;
end;
L609: ( const (C189 , D79) ) in ( D81 . ( the_result_sort_of C189 ) ) by L584 , L592 , PRALG_2:3;
L610:
now
let C195 being set;
consider C196 being Function such that L611: C196 = ( const (C189 , D79) );
assume L612: C195 in ( Class C180 );
reconsider D94 = C195 as (Element of ( Class C180 )) by L612;
L613: ( D91 . D94 ) = ( C196 | D94 ) by L587 , L609 , L611;
thus L614: ( D91 . C195 ) = ( const (C189 , ( D90 . D94 )) ) by L613 , L595 , L611
.= ( ( const (C189 , ( product D90 )) ) . C195 ) by L590 , L142;
end;
L615: ( const (C189 , D80) ) in ( Funcs (( Class C180 ) , ( union { ( Result (C189 , ( D90 . B236 )) ) where B236 is (Element of ( Class C180 )) : (not contradiction) } )) ) by L590 , L116;
L616: ( dom ( const (C189 , D80) ) ) = ( Class C180 ) by L615 , FUNCT_2:92;
L617: ( dom D91 ) = ( dom ( Carrier (D90 , D89) ) ) by L586 , L593 , CARD_3:9
.= ( Class C180 ) by PARTFUN1:def 2;
L618: ( ( C188 . D89 ) . ( const (C189 , D79) ) ) = ( const (C189 , D80) ) by L617 , L616 , L610 , FUNCT_1:2;
thus L619: thesis by L618 , L590 , L592 , L160;
end;
suppose L620: ( the_arity_of C189 ) <> ( {} );

L621: ( ( Den (C189 , D80) ) . ( C188 # C190 ) ) in ( product ( Carrier (D90 , D89) ) ) by L304;
reconsider D95 = ( ( Den (C189 , D80) ) . ( C188 # C190 ) ) as Function by L621;
L622: ( dom D95 ) = ( dom ( Carrier (D90 , D89) ) ) by L621 , CARD_3:9
.= ( Class C180 ) by PARTFUN1:def 2;
L623: ( ( C188 . D89 ) . ( ( Den (C189 , D79) ) . C190 ) ) in ( rng ( C188 . D89 ) ) by L588 , L589 , FUNCT_1:def 3;
reconsider D96 = ( ( C188 . D89 ) . ( ( Den (C189 , D79) ) . C190 ) ) as Function by L586;
L624:
now
let C197 being (Element of ( Class C180 ));
consider C198 being non  empty set, C199 being (MSAlgebra-Family of C198 , R3) such that L625: C198 = ( ( id ( Class C180 ) ) . C197 ) and L626: C199 = ( ( C179 / C180 ) . C197 ) and L627: ( D90 . C197 ) = ( product C199 ) by L543;
L628: ( ( commute ( C188 # C190 ) ) . C197 ) is (Element of ( Args (C189 , ( D90 . C197 )) )) by L620 , L307;
L629: ( ( Den (C189 , ( D90 . C197 )) ) . ( ( commute ( C188 # C190 ) ) . C197 ) ) in ( product ( Carrier (C199 , D89) ) ) by L628 , L627 , L304;
reconsider D97 = ( ( Den (C189 , ( D90 . C197 )) ) . ( ( commute ( C188 # C190 ) ) . C197 ) ) as Function by L629;
L630:
now
let C200 being (Element of R1);
assume L631: C200 in C197;
reconsider D98 = C200 as (Element of C198) by L631 , L625 , FUNCT_1:18;
L632:
now
let C201 being set;
assume L633: C201 in ( dom ( the_arity_of C189 ) );
L634: ( ( the_arity_of C189 ) . C201 ) in ( rng ( the_arity_of C189 ) ) by L633 , FUNCT_1:def 3;
reconsider D99 = ( ( the_arity_of C189 ) . C201 ) as (SortSymbol of R3) by L634;
L635: ( C190 . C201 ) in ( product ( Carrier (C179 , ( ( the_arity_of C189 ) /. C201 )) ) ) by L633 , L245;
reconsider D100 = ( C190 . C201 ) as Function by L635;
L636: ( C190 . C201 ) in ( product ( Carrier (C179 , D99) ) ) by L633 , L635 , PARTFUN1:def 6;
L637: ( C190 . C201 ) in ( ( SORTS C179 ) . D99 ) by L636 , PRALG_2:def 10;
L638: ( dom D100 ) = ( dom ( Carrier (C179 , D99) ) ) by L636 , CARD_3:9
.= R1 by PARTFUN1:def 2;
L639: ( dom ( D100 | C197 ) ) = ( R1 /\ C197 ) by L638 , RELAT_1:61
.= C197 by XBOOLE_1:28;
L640: ( ( C188 # C190 ) . C201 ) in ( product ( Carrier (D90 , ( ( the_arity_of C189 ) /. C201 )) ) ) by L633 , L245;
reconsider D101 = ( ( C188 # C190 ) . C201 ) as Function by L640;
consider C202 being (Function of ( D81 . D99 ) , ( D82 . D99 )) such that L641: C202 = ( C188 . D99 ) and L642: (for B237 being set holds (B237 in ( D81 . D99 ) implies S3[ ( C202 . B237 ) , B237 , D99 ])) by L580;
L643: D101 = ( ( C188 . ( ( the_arity_of C189 ) /. C201 ) ) . ( C190 . C201 ) ) by L633 , L205
.= ( C202 . ( C190 . C201 ) ) by L633 , L641 , PARTFUN1:def 6;
L644: ( D101 . C197 ) = ( D100 | C197 ) by L643 , L637 , L642;
reconsider D102 = ( D101 . C197 ) as Function by L644;
L645: D102 = ( ( ( commute ( C188 # C190 ) ) . C197 ) . C201 ) by L633 , L314;
thus L646: ( ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . C200 ) . C201 ) = ( ( D100 | C197 ) . D98 ) by L645 , L627 , L628 , L633 , L644 , L314
.= ( D100 . D98 ) by L631 , L639 , FUNCT_1:47
.= ( ( ( commute C190 ) . C200 ) . C201 ) by L633 , L314;
end;
L647: ( ( commute C190 ) . C200 ) is (Element of ( Args (C189 , ( C179 . C200 )) )) by L620 , L307;
L648: ( ( commute C190 ) . C200 ) in ( Args (C189 , ( C179 . C200 )) ) by L647;
L649: ( ( commute C190 ) . C200 ) in ( product ( (the Sorts of ( C179 . C200 )) * ( the_arity_of C189 ) ) ) by L648 , PRALG_2:3;
L650: ( dom ( ( commute C190 ) . C200 ) ) = ( dom ( (the Sorts of ( C179 . C200 )) * ( the_arity_of C189 ) ) ) by L649 , CARD_3:9
.= ( dom ( the_arity_of C189 ) ) by PRALG_2:3;
L651: ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . D98 ) is (Element of ( Args (C189 , ( C199 . D98 )) )) by L620 , L627 , L628 , L307;
L652: ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . D98 ) in ( Args (C189 , ( C199 . D98 )) ) by L651;
L653: ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . D98 ) in ( product ( (the Sorts of ( C199 . D98 )) * ( the_arity_of C189 ) ) ) by L652 , PRALG_2:3;
L654: ( dom ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . C200 ) ) = ( dom ( (the Sorts of ( C199 . D98 )) * ( the_arity_of C189 ) ) ) by L653 , CARD_3:9
.= ( dom ( the_arity_of C189 ) ) by PRALG_2:3;
thus L655: ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . C200 ) = ( ( commute C190 ) . C200 ) by L654 , L650 , L632 , FUNCT_1:2;
end;
let C203 being Function;
assume that
L656: C203 = ( ( Den (C189 , D79) ) . C190 );
L657: ( dom C203 ) = ( dom ( Carrier (C179 , D89) ) ) by L589 , L656 , CARD_3:9
.= R1 by PARTFUN1:def 2;
L658: ( dom ( C203 | C197 ) ) = ( R1 /\ C197 ) by L657 , RELAT_1:61
.= C197 by XBOOLE_1:28;
L659: ( ( commute ( C188 # C190 ) ) . C197 ) is (Element of ( Args (C189 , ( product C199 )) )) by L620 , L627 , L307;
L660:
now
let C204 being set;
L661: ( dom ( C179 | C197 ) ) = ( ( dom C179 ) /\ C197 ) by RELAT_1:61
.= ( R1 /\ C197 ) by PARTFUN1:def 2
.= C197 by XBOOLE_1:28;
assume L662: C204 in C197;
reconsider D103 = C204 as (Element of C198) by L662 , L625 , FUNCT_1:18;
reconsider D104 = D103 as (Element of R1) by L662;
L663: C199 = ( C179 | C197 ) by L626 , L532;
L664: ( C199 . D103 ) = ( C179 . D104 ) by L663 , L662 , L661 , FUNCT_1:47;
thus L665: ( D97 . C204 ) = ( ( Den (C189 , ( C179 . D104 )) ) . ( ( commute ( ( commute ( C188 # C190 ) ) . C197 ) ) . D103 ) ) by L664 , L620 , L627 , L659 , L319
.= ( ( Den (C189 , ( C179 . D104 )) ) . ( ( commute C190 ) . D104 ) ) by L630 , L662
.= ( C203 . C204 ) by L620 , L656 , L319
.= ( ( C203 | C197 ) . C204 ) by L658 , L662 , FUNCT_1:47;
end;
L666: ( dom D97 ) = ( dom ( Carrier (C199 , D89) ) ) by L629 , CARD_3:9
.= C198 by PARTFUN1:def 2
.= C197 by L625 , FUNCT_1:18;
thus L667: ( C203 | C197 ) = ( ( Den (C189 , ( D90 . C197 )) ) . ( ( commute ( C188 # C190 ) ) . C197 ) ) by L666 , L658 , L660 , FUNCT_1:2;
end;
L668:
now
reconsider D105 = ( ( Den (C189 , D79) ) . C190 ) as Function by L589;
let C205 being set;
assume L669: C205 in ( Class C180 );
reconsider D106 = C205 as (Element of ( Class C180 )) by L669;
L670: ( D96 . D106 ) = ( D105 | D106 ) by L587 , L585;
thus L671: ( D96 . C205 ) = ( ( Den (C189 , ( D90 . D106 )) ) . ( ( commute ( C188 # C190 ) ) . D106 ) ) by L670 , L624
.= ( D95 . C205 ) by L620 , L319;
end;
L672: ( dom D96 ) = ( dom ( Carrier (D90 , D89) ) ) by L586 , L623 , CARD_3:9
.= ( Class C180 ) by PARTFUN1:def 2;
thus L673: thesis by L672 , L622 , L668 , FUNCT_1:2;
end;
end;

end;
L584: C188 is  "1-1"
proof
let C206 being set;
let C207 being Function;
assume that
L585: C206 in ( dom C188 )
and
L586: ( C188 . C206 ) = C207;
consider C208 being (Function of ( D81 . C206 ) , ( D82 . C206 )) such that L587: C208 = ( C188 . C206 ) and L588: (for B238 being set holds (B238 in ( D81 . C206 ) implies S3[ ( C208 . B238 ) , B238 , C206 ])) by L580 , L585;
let C209 , C210 being set;
assume that
L589: C209 in ( dom C207 )
and
L590: C210 in ( dom C207 )
and
L591: ( C207 . C209 ) = ( C207 . C210 );
L592: ( dom C208 ) = ( dom C207 ) by L586 , L587;
thus L593: C209 = C210
proof
reconsider D107 = C206 as (SortSymbol of R3) by L585;
L594: ( D81 . D107 ) = ( product ( Carrier (C179 , D107) ) ) by PRALG_2:def 10;
L595: (ex B239 being Function st (C209 = B239 & ( dom B239 ) = ( dom ( Carrier (C179 , D107) ) ) & (for B240 being set holds (B240 in ( dom ( Carrier (C179 , D107) ) ) implies ( B239 . B240 ) in ( ( Carrier (C179 , D107) ) . B240 ))))) by L594 , L589 , L592 , CARD_3:def 5;
L596: (ex B241 being Function st (C210 = B241 & ( dom B241 ) = ( dom ( Carrier (C179 , D107) ) ) & (for B242 being set holds (B242 in ( dom ( Carrier (C179 , D107) ) ) implies ( B241 . B242 ) in ( ( Carrier (C179 , D107) ) . B242 ))))) by L590 , L592 , L594 , CARD_3:def 5;
reconsider D108 = C210 as Function by L590 , L592 , L594;
L597: ( dom D108 ) = R1 by L596 , PARTFUN1:def 2;
reconsider D109 = C209 as Function by L589 , L592 , L594;
L598: ( D82 . C206 ) = ( product ( Carrier (( product ( C179 / C180 ) ) , D107) ) ) by PRALG_2:def 10;
L599: (for B243 being set holds (B243 in R1 implies ( D109 . B243 ) = ( D108 . B243 )))
proof
reconsider D110 = ( C208 . D108 ) as Function by L598;
let C211 being set;
assume L600: C211 in R1;
L601: ( Class (C180 , C211) ) is (Element of ( Class C180 )) by L600 , EQREL_1:def 3;
L602: ( D109 | ( Class (C180 , C211) ) ) = ( D110 . ( Class (C180 , C211) ) ) by L601 , L586 , L589 , L591 , L587 , L588 , L592
.= ( D108 | ( Class (C180 , C211) ) ) by L590 , L588 , L592 , L601;
L603: ( D109 . C211 ) = ( ( D108 | ( Class (C180 , C211) ) ) . C211 ) by L602 , L600 , EQREL_1:20 , FUNCT_1:49
.= ( D108 . C211 ) by L600 , EQREL_1:20 , FUNCT_1:49;
thus L604: thesis by L603;
end;
L605: ( dom D109 ) = R1 by L595 , PARTFUN1:def 2;
thus L606: thesis by L605 , L597 , L599 , FUNCT_1:2;
end;

end;
L594: C188 is_monomorphism D79 , D80 by L584 , L581 , MSUALG_3:def 9;
L595: C188 is  "onto"
proof
let C212 being set;
assume that
L596: C212 in (the carrier of R3);
reconsider D111 = C212 as (SortSymbol of R3) by L596;
consider C213 being (Function of ( D81 . C212 ) , ( D82 . C212 )) such that L597: C213 = ( C188 . C212 ) and L598: (for B244 being set holds (B244 in ( D81 . C212 ) implies S3[ ( C213 . B244 ) , B244 , C212 ])) by L580 , L596;
L599: ( D81 . D111 ) = ( product ( Carrier (C179 , D111) ) ) by PRALG_2:def 10;
L600: (for B245 being set holds (B245 in ( D82 . C212 ) iff (ex B246 being set st (B246 in ( dom C213 ) & B245 = ( C213 . B246 )))))
proof
let C214 being set;
L601: (C214 in ( D82 . C212 ) implies (ex B247 being set st (B247 in ( dom C213 ) & C214 = ( C213 . B247 ))))
proof
assume L602: C214 in ( D82 . C212 );
L603: C214 in ( product ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) by L602 , PRALG_2:def 10;
L604: (ex B248 being Function st (C214 = B248 & ( dom B248 ) = ( dom ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) & (for B249 being set holds (B249 in ( dom ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) implies ( B248 . B249 ) in ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . B249 ))))) by L603 , CARD_3:def 5;
reconsider D112 = C214 as Function by L603;
defpred S4[ set , set ] means (ex B250 being (Element of ( Class C180 )) st (ex B251 being Function st ($1 in B250 & B251 = ( D112 . B250 ) & $2 = ( B251 . $1 ))));
L605: (for B252 being set holds (B252 in R1 implies (ex B253 being set st S4[ B252 , B253 ])))
proof
let C215 being set;
assume that
L606: C215 in R1;
L607: ( Class (C180 , C215) ) in ( Class C180 ) by L606 , EQREL_1:def 3;
consider C216 being (Element of ( Class C180 )) such that L608: C216 = ( Class (C180 , C215) ) by L607;
consider C217 being non  empty set, C218 being (MSAlgebra-Family of C217 , R3) such that L609: C217 = ( ( id ( Class C180 ) ) . C216 ) and L610: C218 = ( ( C179 / C180 ) . C216 ) and L611: ( ( product ( C179 / C180 ) ) . C216 ) = ( product C218 ) by L543;
L612: (ex B254 being MSAlgebra over R3 st (B254 = ( ( product ( C179 / C180 ) ) . C216 ) & ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . C216 ) = ( (the Sorts of B254) . D111 ))) by PRALG_2:def 9;
L613: (( dom ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) = ( Class C180 ) & ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . C216 ) = ( product ( Carrier (C218 , D111) ) )) by L612 , L611 , PARTFUN1:def 2 , PRALG_2:def 10;
reconsider D113 = ( D112 . C216 ) as Function by L613 , L604 , L38;
L614: S4[ C215 , ( D113 . C215 ) ] by L606 , L608 , EQREL_1:20;
thus L615: thesis by L614;
end;
consider C219 being (ManySortedSet of R1) such that L616: (for B255 being set holds (B255 in R1 implies S4[ B255 , ( C219 . B255 ) ])) from PBOOLE:sch 3(L605);
L617: ( dom ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) = ( Class C180 ) by PARTFUN1:def 2;
L618: (for B256 being set holds (B256 in ( dom ( Carrier (C179 , D111) ) ) implies ( C219 . B256 ) in ( ( Carrier (C179 , D111) ) . B256 )))
proof
let C220 being set;
assume L619: C220 in ( dom ( Carrier (C179 , D111) ) );
L620: C220 in R1 by L619;
consider C221 being (Element of ( Class C180 )), C222 being Function such that L621: C220 in C221 and L622: (C222 = ( D112 . C221 ) & ( C219 . C220 ) = ( C222 . C220 )) by L620 , L616;
L623: ( dom ( ( Carrier (C179 , D111) ) | C221 ) ) = ( ( dom ( Carrier (C179 , D111) ) ) /\ C221 ) by RELAT_1:61
.= ( R1 /\ C221 ) by PARTFUN1:def 2
.= C221 by XBOOLE_1:28;
L624: ( ( ( Carrier (C179 , D111) ) | C221 ) . C220 ) = ( ( Carrier (C179 , D111) ) . C220 ) by L623 , L621 , FUNCT_1:47;
consider C223 being non  empty set, C224 being (MSAlgebra-Family of C223 , R3) such that L625: C223 = ( ( id ( Class C180 ) ) . C221 ) and L626: C224 = ( ( C179 / C180 ) . C221 ) and L627: ( ( product ( C179 / C180 ) ) . C221 ) = ( product C224 ) by L543;
L628: (C224 = ( C179 | C221 ) & C223 = C221) by L625 , L626 , L532 , FUNCT_1:18;
L629: ( Carrier (C224 , D111) ) = ( ( Carrier (C179 , D111) ) | C221 ) by L628 , L18;
L630: (ex B257 being MSAlgebra over R3 st (B257 = ( ( product ( C179 / C180 ) ) . C221 ) & ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . C221 ) = ( (the Sorts of B257) . D111 ))) by PRALG_2:def 9;
L631: ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . C221 ) = ( product ( Carrier (C224 , D111) ) ) by L630 , L627 , PRALG_2:def 10;
L632: ( D112 . C221 ) in ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . C221 ) by L604 , L617;
L633: (ex B258 being Function st (( D112 . C221 ) = B258 & ( dom B258 ) = ( dom ( Carrier (C224 , D111) ) ) & (for B259 being set holds (B259 in ( dom ( Carrier (C224 , D111) ) ) implies ( B258 . B259 ) in ( ( Carrier (C224 , D111) ) . B259 ))))) by L632 , L631 , CARD_3:def 5;
L634: ( dom ( Carrier (C224 , D111) ) ) = C223 by PARTFUN1:def 2
.= C221 by L625 , FUNCT_1:18;
thus L635: thesis by L634 , L621 , L622 , L633 , L624 , L629;
end;
L636: ( dom C219 ) = R1 by PARTFUN1:def 2
.= ( dom ( Carrier (C179 , D111) ) ) by PARTFUN1:def 2;
L637: C219 in ( D81 . D111 ) by L636 , L599 , L618 , CARD_3:9;
L638: C219 in ( dom C213 ) by L637 , FUNCT_2:def 1;
L639: ( C213 . C219 ) in ( rng C213 ) by L638 , FUNCT_1:def 3;
L640: ( C213 . C219 ) in ( D82 . C212 ) by L639;
L641: ( C213 . C219 ) in ( product ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) by L640 , PRALG_2:def 10;
reconsider D114 = ( C213 . C219 ) as Function by L641;
L642: (for B260 being set holds (B260 in ( Class C180 ) implies ( D112 . B260 ) = ( D114 . B260 )))
proof
let C225 being set;
assume L643: C225 in ( Class C180 );
reconsider D115 = C225 as (Element of ( Class C180 )) by L643;
consider C226 being non  empty set, C227 being (MSAlgebra-Family of C226 , R3) such that L644: C226 = ( ( id ( Class C180 ) ) . D115 ) and L645: C227 = ( ( C179 / C180 ) . D115 ) and L646: ( ( product ( C179 / C180 ) ) . D115 ) = ( product C227 ) by L543;
L647: (ex B261 being MSAlgebra over R3 st (B261 = ( ( product ( C179 / C180 ) ) . D115 ) & ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . D115 ) = ( (the Sorts of B261) . D111 ))) by PRALG_2:def 9;
L648: ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . D115 ) = ( product ( Carrier (C227 , D111) ) ) by L647 , L646 , PRALG_2:def 10;
L649: ( D112 . D115 ) in ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . D115 ) by L604 , L617;
reconsider D116 = ( D112 . D115 ) as Function by L649 , L648;
L650: ( dom ( C219 | D115 ) ) = ( ( dom C219 ) /\ D115 ) by RELAT_1:61
.= ( R1 /\ D115 ) by PARTFUN1:def 2
.= D115 by XBOOLE_1:28;
L651: (for B262 being set holds (B262 in D115 implies ( ( C219 | D115 ) . B262 ) = ( D116 . B262 )))
proof
let C228 being set;
assume L652: C228 in D115;
consider C229 being (Element of ( Class C180 )), C230 being Function such that L653: C228 in C229 and L654: (C230 = ( D112 . C229 ) & ( C219 . C228 ) = ( C230 . C228 )) by L652 , L616;
L655: D115 = C229 by L652 , L653 , L27;
thus L656: thesis by L655 , L650 , L652 , L654 , FUNCT_1:47;
end;
L657: (ex B263 being Function st (( D112 . D115 ) = B263 & ( dom B263 ) = ( dom ( Carrier (C227 , D111) ) ) & (for B264 being set holds (B264 in ( dom ( Carrier (C227 , D111) ) ) implies ( B263 . B264 ) in ( ( Carrier (C227 , D111) ) . B264 ))))) by L649 , L648 , CARD_3:def 5;
L658: ( dom D116 ) = C226 by L657 , PARTFUN1:def 2
.= D115 by L644 , FUNCT_1:18;
L659: ( C219 | D115 ) = D116 by L658 , L650 , L651 , FUNCT_1:def 11;
thus L660: thesis by L659 , L598 , L637;
end;
L661: (ex B265 being Function st (( C213 . C219 ) = B265 & ( dom B265 ) = ( dom ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) & (for B266 being set holds (B266 in ( dom ( Carrier (( product ( C179 / C180 ) ) , D111) ) ) implies ( B265 . B266 ) in ( ( Carrier (( product ( C179 / C180 ) ) , D111) ) . B266 ))))) by L641 , CARD_3:def 5;
L662: D112 = D114 by L661 , L604 , L617 , L642 , FUNCT_1:def 11;
thus L663: thesis by L662 , L638;
end;
L664: ((ex B267 being set st (B267 in ( dom C213 ) & C214 = ( C213 . B267 ))) implies C214 in ( D82 . C212 ))
proof
given C231 being set such that
L665: C231 in ( dom C213 )
and
L666: C214 = ( C213 . C231 );

L667: ( C213 . C231 ) in ( rng C213 ) by L665 , FUNCT_1:def 3;
thus L668: thesis by L667 , L666;
end;
thus L669: (C214 in ( D82 . C212 ) iff (ex B268 being set st (B268 in ( dom C213 ) & C214 = ( C213 . B268 )))) by L664 , L601;
end;
thus L670: thesis by L600 , L597 , FUNCT_1:def 3;
end;
L671: C188 is_epimorphism D79 , D80 by L595 , L581 , MSUALG_3:def 8;
L672: C188 is_isomorphism D79 , D80 by L671 , L594 , MSUALG_3:def 10;
thus L673: thesis by L672 , MSUALG_3:def 11;
end;
