:: Algebraic Operation on Subsets of Many Sorted Sets
::  by Agnieszka Julia Marasik
::
:: Received June 23, 1997
:: Copyright (c) 1997-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, STRUCT_0, PBOOLE, FUNCT_4, RELAT_1, CLOSURE2, SETFAM_1,
      MSUALG_1, TARSKI, MSUALG_2, UNIALG_2, MSSUBFAM, FUNCT_1, MARGREL1,
      SUBSET_1, FINSET_1, FUNCOP_1, WAYBEL_8, RELAT_2, MSAFREE2, BINOP_1,
      ZFMISC_1, CARD_3, FUNCT_2, CLOSURE3, PRE_POLY;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, SETFAM_1, RELAT_1, FUNCT_1,
      STRUCT_0, PARTFUN1, FUNCT_2, FINSET_1, FUNCT_4, FUNCOP_1, PBOOLE,
      FINSEQ_2, MSUALG_1, MSUALG_2, CARD_3,
      PRE_POLY, CLOSURE2, MSSUBFAM, MBOOLEAN;
 constructors SETFAM_1, FUNCT_4, MSSUBFAM, MSUALG_2, PRALG_2, CLOSURE2,
      RELSET_1, FINSEQ_2, PRE_POLY;
 registrations XBOOLE_0, SUBSET_1, FUNCT_1, RELSET_1, FUNCT_2, FINSET_1,
      PBOOLE, STRUCT_0, MSUALG_1, CLOSURE2, FINSEQ_1;
 requirements SUBSET, BOOLE;
 definitions TARSKI, XBOOLE_0, CLOSURE2, MSUALG_2, SETFAM_1, PBOOLE;
 theorems FUNCT_4, FUNCT_1, TARSKI, PBOOLE, MSUALG_1, MBOOLEAN, FUNCOP_1,
      MSUALG_2, CLOSURE2, ZFMISC_1, RELAT_1, CARD_3, MSSUBFAM, FUNCT_2,
      XBOOLE_0, XBOOLE_1, SETFAM_1, PARTFUN1, FINSET_1, PRE_POLY;
 schemes CLASSES1;

begin
registration
let C1 being non  empty 1-sorted;
cluster ( the 1-sorted of C1 ) -> non  empty;
coherence;
end;
theorem
L2: (for B1 being non  empty set holds (for B2 , B3 being (ManySortedSet of B1) holds ( B2 +* B3 ) = B3))
proof
let C2 being non  empty set;
let C3 , C4 being (ManySortedSet of C2);
L3: ( dom C3 ) = C2 by PARTFUN1:def 2
.= ( dom C4 ) by PARTFUN1:def 2;
thus L4: thesis by L3 , FUNCT_4:19;
end;
theorem
L5: (for B4 being set holds (for B5 , B6 being (ManySortedSet of B4) holds (for B7 being (SubsetFamily of B5) holds (B6 in B7 implies ( meet |: B7 :| ) c=' B6)))) by CLOSURE2:21 , MSSUBFAM:43;
theorem
L6: (for B8 being non  void non  empty ManySortedSign holds (for B9 being  strict  non-empty MSAlgebra over B8 holds (for B10 being (SubsetFamily of (the Sorts of B9)) holds (B10 c= ( SubSort B9 ) implies (for B11 being (MSSubset of B9) holds (B11 = ( meet |: B10 :| ) implies B11 is  opers_closed))))))
proof
let C5 being non  void non  empty ManySortedSign;
let C6 being  strict  non-empty MSAlgebra over C5;
let C7 being (SubsetFamily of (the Sorts of C6));
assume that
L7: C7 c= ( SubSort C6 );
let C8 being (MSSubset of C6);
assume that
L8: C8 = ( meet |: C7 :| );
per cases ;
suppose L9: C7 = ( {} );

set D1 = (the Sorts of C6);
reconsider D2 = |: C7 :| as (MSSubsetFamily of (the Sorts of C6));
set D3 = (the carrier of C5);
L10: D2 = ( [[0]] D3 ) by L9 , CLOSURE2:def 3;
L11: D1 = C8 by L10 , L8 , MSSUBFAM:41;
reconsider D4 = D1 as (MSSubset of C6) by PBOOLE:def 18;
L12: (for B12 being (OperSymbol of C5) holds D4 is_closed_on B12)
proof
let C9 being (OperSymbol of C5);
L13: (( (the ResultSort of C5) . C9 ) = ( the_result_sort_of C9 ) & ( dom (the ResultSort of C5) ) = (the carrier' of C5)) by FUNCT_2:def 1 , MSUALG_1:def 2;
L14: ( Result (C9 , C6) ) = ( ( D4 * (the ResultSort of C5) ) . C9 ) by MSUALG_1:def 5
.= ( D4 . ( the_result_sort_of C9 ) ) by L13 , FUNCT_1:13;
L15: ( rng ( ( Den (C9 , C6) ) | ( ( D4 # ) . ( the_arity_of C9 ) ) ) ) c= ( D4 . ( the_result_sort_of C9 ) ) by L14 , RELAT_1:def 19;
L16: (( (the Arity of C5) . C9 ) = ( the_arity_of C9 ) & ( dom (the Arity of C5) ) = (the carrier' of C5)) by FUNCT_2:def 1 , MSUALG_1:def 1;
L17: ( ( ( D4 # ) * (the Arity of C5) ) . C9 ) = ( ( D4 # ) . ( the_arity_of C9 ) ) by L16 , FUNCT_1:13;
L18: ( ( D4 * (the ResultSort of C5) ) . C9 ) = ( D4 . ( the_result_sort_of C9 ) ) by L13 , FUNCT_1:13;
thus L19: thesis by L18 , L17 , L15 , MSUALG_2:def 5;
end;
thus L20: thesis by L12 , L11 , MSUALG_2:def 6;
end;
suppose L21: C7 <> ( {} );

set D5 = C5;
let C10 being (OperSymbol of D5);
set D6 = ( the_result_sort_of C10 );
L22: ( (the ResultSort of D5) . C10 ) = ( the_result_sort_of C10 ) by MSUALG_1:def 2;
L23: ( dom (the ResultSort of D5) ) = (the carrier' of D5) by FUNCT_2:def 1;
L24: (( (the Arity of D5) . C10 ) = ( the_arity_of C10 ) & ( dom (the Arity of D5) ) = (the carrier' of D5)) by FUNCT_2:def 1 , MSUALG_1:def 1;
L25: ( ( ( C8 # ) * (the Arity of D5) ) . C10 ) = ( ( C8 # ) . ( the_arity_of C10 ) ) by L24 , FUNCT_1:13;
L26: ( Result (C10 , C6) ) = ( ( (the Sorts of C6) * (the ResultSort of D5) ) . C10 ) by MSUALG_1:def 5
.= ( (the Sorts of C6) . ( the_result_sort_of C10 ) ) by L22 , L23 , FUNCT_1:13;
L27: ( rng ( ( Den (C10 , C6) ) | ( ( C8 # ) . ( the_arity_of C10 ) ) ) ) c= ( (the Sorts of C6) . ( the_result_sort_of C10 ) ) by L26 , RELAT_1:def 19;
L28: ( rng ( ( Den (C10 , C6) ) | ( ( C8 # ) . ( the_arity_of C10 ) ) ) ) c= ( C8 . ( the_result_sort_of C10 ) )
proof
consider C11 being (Subset-Family of ( (the Sorts of C6) . D6 )) such that L29: C11 = ( |: C7 :| . D6 ) and L30: ( C8 . D6 ) = ( Intersect C11 ) by L8 , MSSUBFAM:def 1;
let C12 being set;
assume L31: C12 in ( rng ( ( Den (C10 , C6) ) | ( ( C8 # ) . ( the_arity_of C10 ) ) ) );
consider C13 being set such that L32: C13 in ( dom ( ( Den (C10 , C6) ) | ( ( C8 # ) . ( the_arity_of C10 ) ) ) ) and L33: C12 = ( ( ( Den (C10 , C6) ) | ( ( C8 # ) . ( the_arity_of C10 ) ) ) . C13 ) by L31 , FUNCT_1:def 3;
L34: (for B13 being set holds (B13 in C11 implies C12 in B13))
proof
L35: ( |: C7 :| . D6 ) = { ( B14 . D6 ) where B14 is (Element of ( Bool (the Sorts of C6) )) : B14 in C7 } by L21 , CLOSURE2:14;
let C14 being set;
assume L36: C14 in C11;
consider C15 being (Element of ( Bool (the Sorts of C6) )) such that L37: C14 = ( C15 . D6 ) and L38: C15 in C7 by L36 , L29 , L35;
reconsider D7 = C15 as (MSSubset of C6);
L39: D7 is  opers_closed by L7 , L38 , MSUALG_2:14;
L40: D7 is_closed_on C10 by L39 , MSUALG_2:def 6;
L41: ( rng ( ( Den (C10 , C6) ) | ( ( ( D7 # ) * (the Arity of D5) ) . C10 ) ) ) c= ( ( D7 * (the ResultSort of D5) ) . C10 ) by L40 , MSUALG_2:def 5;
L42: C8 c= D7 by L8 , L38 , CLOSURE2:21 , MSSUBFAM:43;
L43: ( ( Den (C10 , C6) ) | ( ( ( C8 # ) * (the Arity of D5) ) . C10 ) ) c= ( ( Den (C10 , C6) ) | ( ( ( D7 # ) * (the Arity of D5) ) . C10 ) ) by L42 , MSUALG_2:2 , RELAT_1:75;
L44: ( dom ( ( Den (C10 , C6) ) | ( ( ( C8 # ) * (the Arity of D5) ) . C10 ) ) ) c= ( dom ( ( Den (C10 , C6) ) | ( ( ( D7 # ) * (the Arity of D5) ) . C10 ) ) ) by L43 , RELAT_1:11;
L45: C12 = ( ( Den (C10 , C6) ) . C13 ) by L32 , L33 , FUNCT_1:47;
L46: C12 = ( ( ( Den (C10 , C6) ) | ( ( ( D7 # ) * (the Arity of D5) ) . C10 ) ) . C13 ) by L45 , L25 , L32 , L44 , FUNCT_1:47;
L47: C12 in ( rng ( ( Den (C10 , C6) ) | ( ( ( D7 # ) * (the Arity of D5) ) . C10 ) ) ) by L46 , L25 , L32 , L44 , FUNCT_1:def 3;
L48: ( ( Den (C10 , C6) ) . C13 ) in ( ( D7 * (the ResultSort of D5) ) . C10 ) by L47 , L41 , L45;
L49: ( ( Den (C10 , C6) ) . C13 ) in ( D7 . ( (the ResultSort of D5) . C10 ) ) by L48 , L23 , FUNCT_1:13;
L50: ( ( Den (C10 , C6) ) . C13 ) in ( D7 . D6 ) by L49 , MSUALG_1:def 2;
thus L51: thesis by L50 , L32 , L33 , L37 , FUNCT_1:47;
end;
thus L52: thesis by L34 , L27 , L31 , L30 , SETFAM_1:43;
end;
L53: ( ( C8 * (the ResultSort of D5) ) . C10 ) = ( C8 . ( the_result_sort_of C10 ) ) by L22 , L23 , FUNCT_1:13;
thus L54: thesis by L53 , L25 , L28 , MSUALG_2:def 5;
end;
end;
begin
theorem
L56: (for B15 , B16 , B17 being set holds ((B15 is_coarser_than B16 & B16 is_coarser_than B17) implies B15 is_coarser_than B17))
proof
let C16 , C17 , C18 being set;
assume that
L57: C16 is_coarser_than C17
and
L58: C17 is_coarser_than C18;
let C19 being set;
assume L59: C19 in C16;
consider C20 being set such that L60: C20 in C17 and L61: C20 c= C19 by L59 , L57 , SETFAM_1:def 3;
consider C21 being set such that L62: (C21 in C18 & C21 c= C20) by L58 , L60 , SETFAM_1:def 3;
take C21;
thus L63: thesis by L61 , L62 , XBOOLE_1:1;
end;
L64:
now
let C22 being non  empty set;
let C23 being (ManySortedSet of C22);
set D8 = { B18 where B18 is (Element of C22) : ( C23 . B18 ) <> ( {} ) };
thus L65: ( support C23 ) = D8
proof
thus L66: ( support C23 ) c= D8
proof
let C24 being set;
L67: ( dom C23 ) = C22 by PARTFUN1:def 2;
L68: ( support C23 ) c= ( dom C23 ) by PRE_POLY:37;
assume L69: C24 in ( support C23 );
L70: ( C23 . C24 ) <> ( {} ) by L69 , PRE_POLY:def 7;
thus L71: thesis by L70 , L67 , L68 , L69;
end;

let C25 being set;
assume L72: C25 in D8;
L73: (ex B19 being (Element of C22) st (C25 = B19 & ( C23 . B19 ) <> ( {} ))) by L72;
thus L74: thesis by L73 , PRE_POLY:def 7;
end;

end;
definition
let C26 being non  empty set;
let C27 being (ManySortedSet of C26);
redefine func support C27 equals 
{ B20 where B20 is (Element of C26) : ( C27 . B20 ) <> ( {} ) };
compatibility by L64;
end;
theorem
L67: (for B21 being non  empty set holds (for B22 being  non-empty (ManySortedSet of B21) holds B22 = ( ( [[0]] B21 ) +* ( B22 | ( support B22 ) ) )))
proof
let C28 being non  empty set;
let C29 being  non-empty (ManySortedSet of C28);
set D9 = ( C29 | ( support C29 ) );
L68: C28 c= ( support C29 )
proof
let C30 being set;
assume L69: C30 in C28;
L70: ( C29 . C30 ) <> ( {} ) by L69;
thus L71: thesis by L70 , L69;
end;
L72: ( dom C29 ) = C28 by PARTFUN1:def 2;
L73: D9 = C29 by L72 , L68 , RELAT_1:68;
thus L74: thesis by L73 , L2;
end;
theorem
L75: (for B23 being non  empty set holds (for B24 , B25 being  non-empty (ManySortedSet of B23) holds (( B24 | ( support B24 ) ) = ( B25 | ( support B25 ) ) implies B24 = B25)))
proof
let C31 being non  empty set;
let C32 , C33 being  non-empty (ManySortedSet of C31);
L76: ( dom C32 ) = C31 by PARTFUN1:def 2;
L77: ( dom C33 ) = C31 by PARTFUN1:def 2;
assume L78: ( C32 | ( support C32 ) ) = ( C33 | ( support C33 ) );
L79: (for B26 being set holds (B26 in C31 implies ( C32 . B26 ) = ( C33 . B26 )))
proof
let C34 being set;
L80: ( dom ( C33 | ( support C33 ) ) ) = ( ( dom C33 ) /\ ( support C33 ) ) by RELAT_1:61;
assume L81: C34 in C31;
L82: ( C32 . C34 ) is non  empty by L81;
L83: C34 in ( support C32 ) by L82 , L81;
L84: ( C33 . C34 ) is non  empty by L81;
L85: C34 in ( support C33 ) by L84 , L81;
L86: C34 in ( dom ( C33 | ( support C33 ) ) ) by L85 , L77 , L81 , L80 , XBOOLE_0:def 4;
L87: ( dom ( C32 | ( support C32 ) ) ) = ( ( dom C32 ) /\ ( support C32 ) ) by RELAT_1:61;
L88: C34 in ( dom ( C32 | ( support C32 ) ) ) by L87 , L76 , L81 , L83 , XBOOLE_0:def 4;
L89: ( C32 . C34 ) = ( ( C33 | ( support C33 ) ) . C34 ) by L88 , L78 , FUNCT_1:47
.= ( C33 . C34 ) by L86 , FUNCT_1:47;
thus L90: thesis by L89;
end;
thus L91: thesis by L79 , L76 , L77 , FUNCT_1:2;
end;
canceled 1;
theorem
L92: (for B27 being non  empty set holds (for B28 being (ManySortedSet of B27) holds (for B29 being (Element of ( Bool B28 )) holds (for B30 being (Element of B27) holds (for B31 being set holds (B31 in ( B29 . B30 ) implies (ex B32 being (Element of ( Bool B28 )) st (B31 in ( B32 . B30 ) & B32 is  finite-yielding & ( support B32 ) is  finite & B32 c= B29))))))))
proof
let C35 being non  empty set;
let C36 being (ManySortedSet of C35);
let C37 being (Element of ( Bool C36 ));
let C38 being (Element of C35);
let C39 being set;
assume that
L93: C39 in ( C37 . C38 );
set D10 = ( { C38 } --> { C39 } );
set D11 = ( ( [[0]] C35 ) +* D10 );
L94: ( dom D10 ) = { C38 } by FUNCOP_1:13;
L95: C38 in ( dom D10 ) by L94 , TARSKI:def 1;
L96: ( D10 . C38 ) = { C39 } by L95 , L94 , FUNCOP_1:7;
L97: ( D11 . C38 ) = { C39 } by L96 , L95 , FUNCT_4:13;
L98: ( dom D11 ) = ( ( dom ( [[0]] C35 ) ) \/ ( dom D10 ) ) by FUNCT_4:def 1
.= ( C35 \/ { C38 } ) by L94 , PARTFUN1:def 2
.= C35 by ZFMISC_1:40;
reconsider D12 = D11 as (ManySortedSet of C35) by L98 , PARTFUN1:def 2 , RELAT_1:def 18;
L99: (for B33 being set holds (B33 in C35 implies ( D12 . B33 ) c= ( C36 . B33 )))
proof
let C40 being set;
assume that
L100: C40 in C35;
per cases ;
suppose L101: C38 = C40;

reconsider D13 = C37 as (ManySortedSubset of C36);
let C41 being set;
assume L102: C41 in ( D12 . C40 );
L103: C41 in { C39 } by L102 , L95 , L96 , L101 , FUNCT_4:13;
L104: C41 in ( D13 . C40 ) by L103 , L93 , L101 , TARSKI:def 1;
L105: D13 c= C36 by PBOOLE:def 18;
L106: ( D13 . C40 ) c= ( C36 . C40 ) by L105 , L100 , PBOOLE:def 2;
thus L107: thesis by L106 , L104;
end;
suppose L108: C38 <> C40;

L109: (not C40 in { C38 }) by L108 , TARSKI:def 1;
L110: C40 in ( ( dom ( [[0]] C35 ) ) \/ ( dom D10 ) ) by L98 , L100 , FUNCT_4:def 1;
L111: ( D12 . C40 ) = ( ( C35 --> ( {} ) ) . C40 ) by L110 , L94 , L109 , FUNCT_4:def 1
.= ( {} ) by L100 , FUNCOP_1:7;
thus L112: thesis by L111 , XBOOLE_1:2;
end;
end;
L114: D12 c= C36 by L99 , PBOOLE:def 2;
reconsider D14 = D12 as (ManySortedSubset of C36) by L114 , PBOOLE:def 18;
reconsider D15 = D14 as (Element of ( Bool C36 )) by CLOSURE2:def 1;
L115: (for B34 being set holds (B34 in C35 implies ( D15 . B34 ) c= ( C37 . B34 )))
proof
let C42 being set;
assume that
L116: C42 in C35;
per cases ;
suppose L117: C38 = C42;

let C43 being set;
assume L118: C43 in ( D15 . C42 );
L119: ( D15 . C42 ) = { C39 } by L95 , L96 , L117 , FUNCT_4:13;
thus L120: thesis by L119 , L93 , L117 , L118 , TARSKI:def 1;
end;
suppose L121: C42 <> C38;

L122: (not C42 in { C38 }) by L121 , TARSKI:def 1;
L123: C42 in ( ( dom ( [[0]] C35 ) ) \/ ( dom D10 ) ) by L98 , L116 , FUNCT_4:def 1;
L124: ( D15 . C42 ) = ( ( C35 --> ( {} ) ) . C42 ) by L123 , L94 , L122 , FUNCT_4:def 1
.= ( {} ) by L116 , FUNCOP_1:7;
thus L125: thesis by L124 , XBOOLE_1:2;
end;
end;
L127: { B35 where B35 is (Element of C35) : ( D15 . B35 ) <> ( {} ) } = { C38 }
proof
thus L128: { B36 where B36 is (Element of C35) : ( D15 . B36 ) <> ( {} ) } c= { C38 }
proof
let C44 being set;
assume L129: C44 in { B37 where B37 is (Element of C35) : ( D15 . B37 ) <> ( {} ) };
L130: (ex B38 being (Element of C35) st (C44 = B38 & ( D15 . B38 ) <> ( {} ))) by L129;
assume L131: (not C44 in { C38 });
reconsider D16 = C44 as (Element of C35) by L130;
L132: D16 in ( dom D15 ) by L98;
L133: D16 in ( ( dom ( [[0]] C35 ) ) \/ ( dom D10 ) ) by L132 , FUNCT_4:def 1;
L134: ( D15 . D16 ) = ( ( C35 --> ( {} ) ) . D16 ) by L133 , L94 , L131 , FUNCT_4:def 1
.= ( {} ) by FUNCOP_1:7;
thus L135: contradiction by L134 , L130;
end;

let C45 being set;
assume L136: C45 in { C38 };
L137: C45 = C38 by L136 , TARSKI:def 1;
reconsider D17 = C45 as (Element of C35) by L136 , TARSKI:def 1;
L138: ( D15 . D17 ) = { C39 } by L95 , L96 , L137 , FUNCT_4:13;
thus L139: thesis by L138;
end;
take D15;
L140: (for B39 being set holds (B39 in C35 implies ( D15 . B39 ) is  finite))
proof
let C46 being set;
assume that
L141: C46 in C35;
per cases ;
suppose L142: C46 = C38;

thus L143: thesis by L142 , L95 , L96 , FUNCT_4:13;
end;
suppose L144: C46 <> C38;

L145: (not C46 in { C38 }) by L144 , TARSKI:def 1;
L146: C46 in ( ( dom ( [[0]] C35 ) ) \/ ( dom D10 ) ) by L98 , L141 , FUNCT_4:def 1;
L147: ( D15 . C46 ) = ( ( C35 --> ( {} ) ) . C46 ) by L146 , L94 , L145 , FUNCT_4:def 1
.= ( {} ) by L141 , FUNCOP_1:7;
thus L148: thesis by L147;
end;
end;
thus L150: thesis by L140 , L97 , L127 , L115 , FINSET_1:def 5 , PBOOLE:def 2 , TARSKI:def 1;
end;
definition
let C47 being set;
let C48 being (ManySortedSet of C47);
let C49 being (SubsetFamily of C48);
func MSUnion C49 -> (ManySortedSubset of C48) means 
:L151: (for B40 being set holds (B40 in C47 implies ( it . B40 ) = ( union { ( B41 . B40 ) where B41 is (Element of ( Bool C48 )) : B41 in C49 } )));
existence
proof
defpred S1[ set , set ] means $2 = ( union { ( B42 . $1 ) where B42 is (Element of ( Bool C48 )) : B42 in C49 } );
L152: (for B43 being set holds (B43 in C47 implies (ex B44 being set st S1[ B43 , B44 ])));
consider C50 being Function such that L153: ( dom C50 ) = C47 and L154: (for B45 being set holds (B45 in C47 implies S1[ B45 , ( C50 . B45 ) ])) from CLASSES1:sch 1(L152);
reconsider D18 = C50 as (ManySortedSet of C47) by L153 , PARTFUN1:def 2 , RELAT_1:def 18;
L155: (for B46 being set holds (B46 in C47 implies ( D18 . B46 ) c= ( C48 . B46 )))
proof
let C51 being set;
assume that
L156: C51 in C47;
L157: (for B47 being set holds (B47 in ( D18 . C51 ) implies B47 in ( C48 . C51 )))
proof
let C52 being set;
assume L158: C52 in ( D18 . C51 );
L159: ( D18 . C51 ) = ( union { ( B48 . C51 ) where B48 is (Element of ( Bool C48 )) : B48 in C49 } ) by L154 , L156;
consider C53 being set such that L160: C52 in C53 and L161: C53 in { ( B49 . C51 ) where B49 is (Element of ( Bool C48 )) : B49 in C49 } by L159 , L158 , TARSKI:def 4;
consider C54 being (Element of ( Bool C48 )) such that L162: ( C54 . C51 ) = C53 and L163: C54 in C49 by L161;
reconsider D19 = C54 as (ManySortedSubset of C48);
L164: D19 c= C48 by PBOOLE:def 18;
L165: ( D19 . C51 ) c= ( C48 . C51 ) by L164 , L156 , PBOOLE:def 2;
thus L166: thesis by L165 , L160 , L162;
end;
thus L167: thesis by L157 , TARSKI:def 3;
end;
L168: D18 c= C48 by L155 , PBOOLE:def 2;
reconsider D20 = D18 as (ManySortedSubset of C48) by L168 , PBOOLE:def 18;
take D20;
thus L169: thesis by L154;
end;
uniqueness
proof
let C55 , C56 being (ManySortedSubset of C48);
assume that
L170: (for B50 being set holds (B50 in C47 implies ( C55 . B50 ) = ( union { ( B51 . B50 ) where B51 is (Element of ( Bool C48 )) : B51 in C49 } )))
and
L171: (for B52 being set holds (B52 in C47 implies ( C56 . B52 ) = ( union { ( B53 . B52 ) where B53 is (Element of ( Bool C48 )) : B53 in C49 } )));
L172: (for B54 being set holds (B54 in C47 implies ( C55 . B54 ) = ( C56 . B54 )))
proof
let C57 being set;
assume L173: C57 in C47;
L174: ( C55 . C57 ) = ( union { ( B55 . C57 ) where B55 is (Element of ( Bool C48 )) : B55 in C49 } ) by L173 , L170
.= ( C56 . C57 ) by L171 , L173;
thus L175: thesis by L174;
end;
thus L176: thesis by L172 , PBOOLE:3;
end;
end;
registration
let C58 being set;
let C59 being (ManySortedSet of C58);
let C60 being  empty (SubsetFamily of C59);
cluster ( MSUnion C60 ) ->  empty-yielding;
coherence
proof
let C61 being set;
set D21 = ( MSUnion C60 );
assume L178: C61 in C58;
L179: ( D21 . C61 ) = ( union { ( B56 . C61 ) where B56 is (Element of ( Bool C59 )) : B56 in C60 } ) by L178 , L151;
assume L180: ( D21 . C61 ) is non  empty;
consider C62 being set such that L181: C62 in ( D21 . C61 ) by L180 , XBOOLE_0:def 1;
consider C63 being set such that L182: C62 in C63 and L183: C63 in { ( B57 . C61 ) where B57 is (Element of ( Bool C59 )) : B57 in C60 } by L179 , L181 , TARSKI:def 4;
L184: (ex B58 being (Element of ( Bool C59 )) st (C63 = ( B58 . C61 ) & B58 in C60)) by L183;
thus L185: contradiction by L184;
end;
end;
theorem
L187: (for B59 being set holds (for B60 being (ManySortedSet of B59) holds (for B61 being (SubsetFamily of B60) holds ( MSUnion B61 ) = ( union |: B61 :| ))))
proof
let C64 being set;
let C65 being (ManySortedSet of C64);
let C66 being (SubsetFamily of C65);
set D22 = |: C66 :|;
reconsider D23 = ( union D22 ) as (ManySortedSet of C64);
per cases ;
suppose L188: C66 is non  empty;

L189: (for B62 being set holds (B62 in C64 implies ( ( MSUnion C66 ) . B62 ) = ( D23 . B62 )))
proof
let C67 being set;
assume L190: C67 in C64;
L191: (( D22 . C67 ) = { ( B63 . C67 ) where B63 is (Element of ( Bool C65 )) : B63 in C66 } & ( D23 . C67 ) = ( union ( D22 . C67 ) )) by L190 , L188 , CLOSURE2:14 , MBOOLEAN:def 2;
thus L192: thesis by L191 , L190 , L151;
end;
thus L193: thesis by L189 , PBOOLE:3;
end;
suppose L194: C66 is  empty  empty  empty  empty (SubsetFamily of C65);

L195: (for B64 being set holds (B64 in C64 implies ( ( MSUnion C66 ) . B64 ) = ( D23 . B64 )))
proof
let C68 being set;
assume L196: C68 in C64;
L197: D22 = ( [[0]] C64 ) by L194 , CLOSURE2:def 3;
L198: D23 = ( [[0]] C64 ) by L197 , MBOOLEAN:21;
L199: ( D23 . C68 ) is  empty by L198;
thus L200: thesis by L199 , L194;
end;
thus L201: thesis by L195 , PBOOLE:3;
end;
end;
definition
let C69 being set;
let C70 being (ManySortedSet of C69);
let C71 , C72 being (SubsetFamily of C70);
redefine func C71 \/ C72 -> (SubsetFamily of C70);

correctness by CLOSURE2:3;
end;
theorem
L204: (for B65 being set holds (for B66 being (ManySortedSet of B65) holds (for B67 , B68 being (SubsetFamily of B66) holds ( MSUnion ( B67 \/ B68 ) ) = ( ( MSUnion B67 ) \/ ( MSUnion B68 ) ))))
proof
let C73 being set;
let C74 being (ManySortedSet of C73);
let C75 , C76 being (SubsetFamily of C74);
reconsider D24 = ( MSUnion ( C75 \/ C76 ) ) as (ManySortedSubset of C74);
reconsider D25 = D24 as (ManySortedSet of C73);
reconsider D26 = ( MSUnion C75 ) as (ManySortedSubset of C74);
reconsider D27 = D26 as (ManySortedSet of C73);
reconsider D28 = ( MSUnion C76 ) as (ManySortedSubset of C74);
reconsider D29 = D28 as (ManySortedSet of C73);
L205: (for B69 being set holds (B69 in C73 implies ( D25 . B69 ) = ( ( D27 \/ D29 ) . B69 )))
proof
let C77 being set;
assume L206: C77 in C73;
L207: ( D25 . C77 ) = ( union { ( B70 . C77 ) where B70 is (Element of ( Bool C74 )) : B70 in ( C75 \/ C76 ) } ) by L206 , L151;
L208: ( ( D27 \/ D29 ) . C77 ) = ( ( D27 . C77 ) \/ ( D29 . C77 ) ) by L206 , PBOOLE:def 4;
L209: (for B71 being set holds (B71 in ( ( D27 \/ D29 ) . C77 ) implies B71 in ( D25 . C77 )))
proof
let C78 being set;
assume L210: C78 in ( ( D27 \/ D29 ) . C77 );
L211: (C78 in ( D27 . C77 ) or C78 in ( D29 . C77 )) by L210 , L208 , XBOOLE_0:def 3;
per cases  by L206 , L211 , L151;
suppose L212: C78 in ( union { ( B72 . C77 ) where B72 is (Element of ( Bool C74 )) : B72 in C75 } );

consider C79 being set such that L213: C78 in C79 and L214: C79 in { ( B73 . C77 ) where B73 is (Element of ( Bool C74 )) : B73 in C75 } by L212 , TARSKI:def 4;
consider C80 being (Element of ( Bool C74 )) such that L215: C79 = ( C80 . C77 ) and L216: C80 in C75 by L214;
L217: C80 in ( C75 \/ C76 ) by L216 , XBOOLE_0:def 3;
L218: C79 in { ( B74 . C77 ) where B74 is (Element of ( Bool C74 )) : B74 in ( C75 \/ C76 ) } by L217 , L215;
thus L219: thesis by L218 , L207 , L213 , TARSKI:def 4;
end;
suppose L220: C78 in ( union { ( B75 . C77 ) where B75 is (Element of ( Bool C74 )) : B75 in C76 } );

consider C81 being set such that L221: C78 in C81 and L222: C81 in { ( B76 . C77 ) where B76 is (Element of ( Bool C74 )) : B76 in C76 } by L220 , TARSKI:def 4;
consider C82 being (Element of ( Bool C74 )) such that L223: C81 = ( C82 . C77 ) and L224: C82 in C76 by L222;
L225: C82 in ( C75 \/ C76 ) by L224 , XBOOLE_0:def 3;
L226: C81 in { ( B77 . C77 ) where B77 is (Element of ( Bool C74 )) : B77 in ( C75 \/ C76 ) } by L225 , L223;
thus L227: thesis by L226 , L207 , L221 , TARSKI:def 4;
end;
end;
L229: (( D27 . C77 ) = ( union { ( B78 . C77 ) where B78 is (Element of ( Bool C74 )) : B78 in C75 } ) & ( D29 . C77 ) = ( union { ( B79 . C77 ) where B79 is (Element of ( Bool C74 )) : B79 in C76 } )) by L206 , L151;
L230: (for B80 being set holds (B80 in ( D25 . C77 ) implies B80 in ( ( D27 \/ D29 ) . C77 )))
proof
let C83 being set;
assume L231: C83 in ( D25 . C77 );
consider C84 being set such that L232: C83 in C84 and L233: C84 in { ( B81 . C77 ) where B81 is (Element of ( Bool C74 )) : B81 in ( C75 \/ C76 ) } by L231 , L207 , TARSKI:def 4;
consider C85 being (Element of ( Bool C74 )) such that L234: C84 = ( C85 . C77 ) and L235: C85 in ( C75 \/ C76 ) by L233;
L236: (C85 in C75 or C85 in C76) by L235 , XBOOLE_0:def 3;
L237: (C84 in { ( B82 . C77 ) where B82 is (Element of ( Bool C74 )) : B82 in C75 } or C84 in { ( B83 . C77 ) where B83 is (Element of ( Bool C74 )) : B83 in C76 }) by L236 , L234;
L238: (C83 in ( union { ( B84 . C77 ) where B84 is (Element of ( Bool C74 )) : B84 in C75 } ) or C83 in ( union { ( B85 . C77 ) where B85 is (Element of ( Bool C74 )) : B85 in C76 } )) by L237 , L232 , TARSKI:def 4;
thus L239: thesis by L238 , L208 , L229 , XBOOLE_0:def 3;
end;
thus L240: thesis by L230 , L209 , TARSKI:1;
end;
thus L241: thesis by L205 , PBOOLE:3;
end;
theorem
L242: (for B86 being set holds (for B87 being (ManySortedSet of B86) holds (for B88 , B89 being (SubsetFamily of B87) holds (B88 c= B89 implies ( MSUnion B88 ) c= ( MSUnion B89 )))))
proof
let C86 being set;
let C87 being (ManySortedSet of C86);
let C88 , C89 being (SubsetFamily of C87);
reconsider D30 = ( MSUnion C88 ) as (ManySortedSubset of C87);
reconsider D31 = D30 as (ManySortedSet of C86);
reconsider D32 = ( MSUnion C89 ) as (ManySortedSubset of C87);
reconsider D33 = D32 as (ManySortedSet of C86);
assume L243: C88 c= C89;
L244: (for B90 being set holds (B90 in C86 implies ( D31 . B90 ) c= ( D33 . B90 )))
proof
let C90 being set;
assume that
L245: C90 in C86;
L246: (for B91 being set holds (B91 in ( D31 . C90 ) implies B91 in ( D33 . C90 )))
proof
L247: ( D31 . C90 ) = ( union { ( B92 . C90 ) where B92 is (Element of ( Bool C87 )) : B92 in C88 } ) by L245 , L151;
let C91 being set;
assume L248: C91 in ( D31 . C90 );
consider C92 being set such that L249: C91 in C92 and L250: C92 in { ( B93 . C90 ) where B93 is (Element of ( Bool C87 )) : B93 in C88 } by L248 , L247 , TARSKI:def 4;
L251: (ex B94 being (Element of ( Bool C87 )) st (C92 = ( B94 . C90 ) & B94 in C88)) by L250;
L252: C92 in { ( B95 . C90 ) where B95 is (Element of ( Bool C87 )) : B95 in C89 } by L251 , L243;
L253: C91 in ( union { ( B96 . C90 ) where B96 is (Element of ( Bool C87 )) : B96 in C89 } ) by L252 , L249 , TARSKI:def 4;
thus L254: thesis by L253 , L245 , L151;
end;
thus L255: thesis by L246 , TARSKI:def 3;
end;
thus L256: thesis by L244 , PBOOLE:def 2;
end;
definition
let C93 being set;
let C94 being (ManySortedSet of C93);
let C95 , C96 being (SubsetFamily of C94);
redefine func C95 /\ C96 -> (SubsetFamily of C94);

correctness by CLOSURE2:4;
end;
theorem
L258: (for B97 being set holds (for B98 being (ManySortedSet of B97) holds (for B99 , B100 being (SubsetFamily of B98) holds ( MSUnion ( B99 /\ B100 ) ) c= ( ( MSUnion B99 ) /\ ( MSUnion B100 ) ))))
proof
let C97 being set;
let C98 being (ManySortedSet of C97);
let C99 , C100 being (SubsetFamily of C98);
reconsider D34 = ( MSUnion ( C99 /\ C100 ) ) as (ManySortedSet of C97);
reconsider D35 = ( MSUnion C99 ) as (ManySortedSet of C97);
reconsider D36 = ( MSUnion C100 ) as (ManySortedSet of C97);
L259: (for B101 being set holds (B101 in C97 implies ( D34 . B101 ) c= ( ( D35 /\ D36 ) . B101 )))
proof
let C101 being set;
assume L260: C101 in C97;
L261: (( D35 . C101 ) = ( union { ( B102 . C101 ) where B102 is (Element of ( Bool C98 )) : B102 in C99 } ) & ( D36 . C101 ) = ( union { ( B103 . C101 ) where B103 is (Element of ( Bool C98 )) : B103 in C100 } )) by L260 , L151;
L262: ( D34 . C101 ) = ( union { ( B104 . C101 ) where B104 is (Element of ( Bool C98 )) : B104 in ( C99 /\ C100 ) } ) by L260 , L151;
L263: (for B105 being set holds (B105 in ( D34 . C101 ) implies B105 in ( ( D35 /\ D36 ) . C101 )))
proof
let C102 being set;
assume L264: C102 in ( D34 . C101 );
consider C103 being set such that L265: C102 in C103 and L266: C103 in { ( B106 . C101 ) where B106 is (Element of ( Bool C98 )) : B106 in ( C99 /\ C100 ) } by L264 , L262 , TARSKI:def 4;
consider C104 being (Element of ( Bool C98 )) such that L267: C103 = ( C104 . C101 ) and L268: C104 in ( C99 /\ C100 ) by L266;
L269: C104 in C100 by L268 , XBOOLE_0:def 4;
L270: C103 in { ( B107 . C101 ) where B107 is (Element of ( Bool C98 )) : B107 in C100 } by L269 , L267;
L271: C102 in ( union { ( B108 . C101 ) where B108 is (Element of ( Bool C98 )) : B108 in C100 } ) by L270 , L265 , TARSKI:def 4;
L272: C104 in C99 by L268 , XBOOLE_0:def 4;
L273: C103 in { ( B109 . C101 ) where B109 is (Element of ( Bool C98 )) : B109 in C99 } by L272 , L267;
L274: C102 in ( union { ( B110 . C101 ) where B110 is (Element of ( Bool C98 )) : B110 in C99 } ) by L273 , L265 , TARSKI:def 4;
L275: C102 in ( ( D35 . C101 ) /\ ( D36 . C101 ) ) by L274 , L261 , L271 , XBOOLE_0:def 4;
thus L276: thesis by L275 , L260 , PBOOLE:def 5;
end;
thus L277: thesis by L263 , TARSKI:def 3;
end;
thus L278: thesis by L259 , PBOOLE:def 2;
end;
theorem
L279: (for B111 being set holds (for B112 being (ManySortedSet of B111) holds (for B113 being set holds ((for B114 being set holds (B114 in B113 implies B114 is (SubsetFamily of B112))) implies (for B115 , B116 being (SubsetFamily of B112) holds ((B116 = { ( MSUnion B117 ) where B117 is (SubsetFamily of B112) : B117 in B113 } & B115 = ( union B113 )) implies ( MSUnion B116 ) = ( MSUnion B115 )))))))
proof
let C105 being set;
let C106 being (ManySortedSet of C105);
let C107 being set;
assume that
L280: (for B118 being set holds (B118 in C107 implies B118 is (SubsetFamily of C106)));
let C108 , C109 being (SubsetFamily of C106);
assume that
L281: C109 = { ( MSUnion B119 ) where B119 is (SubsetFamily of C106) : B119 in C107 }
and
L282: C108 = ( union C107 );
let C110 being set;
assume that
L283: C110 in C105;
thus L284: ( ( MSUnion C109 ) . C110 ) c= ( ( MSUnion C108 ) . C110 )
proof
let C111 being set;
thus L285: (C111 in ( ( MSUnion C109 ) . C110 ) implies C111 in ( ( MSUnion C108 ) . C110 ))
proof
assume L286: C111 in ( ( MSUnion C109 ) . C110 );
L287: C111 in ( union { ( B120 . C110 ) where B120 is (Element of ( Bool C106 )) : B120 in C109 } ) by L286 , L283 , L151;
consider C112 being set such that L288: C111 in C112 and L289: C112 in { ( B121 . C110 ) where B121 is (Element of ( Bool C106 )) : B121 in C109 } by L287 , TARSKI:def 4;
consider C113 being (Element of ( Bool C106 )) such that L290: ( C113 . C110 ) = C112 and L291: C113 in C109 by L289;
consider C114 being (SubsetFamily of C106) such that L292: C113 = ( MSUnion C114 ) and L293: C114 in C107 by L281 , L291;
L294: ( ( MSUnion C114 ) . C110 ) = ( union { ( B122 . C110 ) where B122 is (Element of ( Bool C106 )) : B122 in C114 } ) by L283 , L151;
consider C115 being set such that L295: C111 in C115 and L296: C115 in { ( B123 . C110 ) where B123 is (Element of ( Bool C106 )) : B123 in C114 } by L294 , L288 , L290 , L292 , TARSKI:def 4;
consider C116 being (Element of ( Bool C106 )) such that L297: C115 = ( C116 . C110 ) and L298: C116 in C114 by L296;
L299: C116 in ( union C107 ) by L293 , L298 , TARSKI:def 4;
L300: C115 in { ( B124 . C110 ) where B124 is (Element of ( Bool C106 )) : B124 in ( union C107 ) } by L299 , L297;
L301: C111 in ( union { ( B125 . C110 ) where B125 is (Element of ( Bool C106 )) : B125 in ( union C107 ) } ) by L300 , L295 , TARSKI:def 4;
thus L302: thesis by L301 , L282 , L283 , L151;
end;

end;

let C117 being set;
assume L286: C117 in ( ( MSUnion C108 ) . C110 );
L287: C117 in ( union { ( B126 . C110 ) where B126 is (Element of ( Bool C106 )) : B126 in C108 } ) by L286 , L283 , L151;
consider C118 being set such that L288: C117 in C118 and L289: C118 in { ( B127 . C110 ) where B127 is (Element of ( Bool C106 )) : B127 in C108 } by L287 , TARSKI:def 4;
consider C119 being (Element of ( Bool C106 )) such that L290: ( C119 . C110 ) = C118 and L291: C119 in C108 by L289;
consider C120 being set such that L292: C119 in C120 and L293: C120 in C107 by L282 , L291 , TARSKI:def 4;
reconsider D37 = C120 as (SubsetFamily of C106) by L280 , L293;
L294: ( C119 . C110 ) in { ( B128 . C110 ) where B128 is (Element of ( Bool C106 )) : B128 in D37 } by L292;
L295: C117 in ( union { ( B129 . C110 ) where B129 is (Element of ( Bool C106 )) : B129 in D37 } ) by L294 , L288 , L290 , TARSKI:def 4;
L296: ( ( MSUnion D37 ) . C110 ) = ( union { ( B130 . C110 ) where B130 is (Element of ( Bool C106 )) : B130 in D37 } ) by L283 , L151;
consider C121 being set such that L297: C117 in C121 and L298: C121 = ( ( MSUnion D37 ) . C110 ) by L296 , L295;
L299: ( MSUnion D37 ) in { ( MSUnion B131 ) where B131 is (SubsetFamily of C106) : B131 in C107 } by L293;
L300: C121 in { ( B132 . C110 ) where B132 is (Element of ( Bool C106 )) : B132 in C109 } by L299 , L281 , L298;
L301: C117 in ( union { ( B133 . C110 ) where B133 is (Element of ( Bool C106 )) : B133 in C109 } ) by L300 , L297 , TARSKI:def 4;
thus L302: thesis by L301 , L283 , L151;
end;
begin
definition
let C122 being non  empty set;
let C123 being (ManySortedSet of C122);
let C124 being (SetOp of C123);
attr C124 is  algebraic
means
(for B134 being (Element of ( Bool C123 )) holds (B134 = ( C124 . B134 ) implies (ex B135 being (SubsetFamily of C123) st (B135 = { ( C124 . B136 ) where B136 is (Element of ( Bool C123 )) : (B136 is  finite-yielding & ( support B136 ) is  finite & B136 c= B134) } & B134 = ( MSUnion B135 )))));
end;
registration
let C125 being non  empty set;
let C126 being (ManySortedSet of C125);
cluster  algebraic  reflexive  monotonic  idempotent for (SetOp of C126);
existence
proof
reconsider D38 = ( id ( Bool C126 ) ) as (SetOp of C126);
take D38;
thus L304: D38 is  algebraic
proof
let C127 being (Element of ( Bool C126 ));
assume that
L305: C127 = ( D38 . C127 );
set D39 = { ( D38 . B137 ) where B137 is (Element of ( Bool C126 )) : (B137 is  finite-yielding & ( support B137 ) is  finite & B137 c= C127) };
L306: D39 c= ( Bool C126 )
proof
let C128 being set;
assume L307: C128 in D39;
L308: (ex B138 being (Element of ( Bool C126 )) st (C128 = ( D38 . B138 ) & B138 is  finite-yielding & ( support B138 ) is  finite & B138 c= C127)) by L307;
thus L309: thesis by L308;
end;
reconsider D40 = D39 as (SubsetFamily of C126) by L306;
take D40;
thus L310: D40 = { ( D38 . B139 ) where B139 is (Element of ( Bool C126 )) : (B139 is  finite-yielding & ( support B139 ) is  finite & B139 c= C127) };
let C129 being (Element of C125);
thus L311: ( C127 . C129 ) c= ( ( MSUnion D40 ) . C129 )
proof
let C130 being set;
assume L312: C130 in ( C127 . C129 );
consider C131 being (Element of ( Bool C126 )) such that L313: C130 in ( C131 . C129 ) and L314: (C131 is  finite-yielding & ( support C131 ) is  finite & C131 c= C127) by L312 , L92;
L315: C131 = ( D38 . C131 ) by FUNCT_1:18;
L316: C131 in D40 by L315 , L314;
L317: ( C131 . C129 ) in { ( B140 . C129 ) where B140 is (Element of ( Bool C126 )) : B140 in D40 } by L316;
L318: C130 in ( union { ( B141 . C129 ) where B141 is (Element of ( Bool C126 )) : B141 in D40 } ) by L317 , L313 , TARSKI:def 4;
thus L319: thesis by L318 , L151;
end;

let C132 being set;
assume L320: C132 in ( ( MSUnion D40 ) . C129 );
L321: C132 in ( union { ( B142 . C129 ) where B142 is (Element of ( Bool C126 )) : B142 in D40 } ) by L320 , L151;
consider C133 being set such that L322: C132 in C133 and L323: C133 in { ( B143 . C129 ) where B143 is (Element of ( Bool C126 )) : B143 in D40 } by L321 , TARSKI:def 4;
consider C134 being (Element of ( Bool C126 )) such that L324: C133 = ( C134 . C129 ) and L325: C134 in D40 by L323;
consider C135 being (Element of ( Bool C126 )) such that L326: C134 = ( D38 . C135 ) and L327: C135 is  finite-yielding and L328: ( support C135 ) is  finite and L329: C135 c= C127 by L325;
L330: C134 = C135 by L326 , FUNCT_1:18;
L331: ( C134 . C129 ) c= ( C127 . C129 ) by L330 , L329 , PBOOLE:def 2;
thus L332: thesis by L331 , L322 , L324;
end;

thus L333: D38 is  reflexive
proof
let C136 being (Element of ( Bool C126 ));
thus L334: thesis by FUNCT_1:18;
end;

thus L335: D38 is  monotonic
proof
let C137 , C138 being (Element of ( Bool C126 ));
assume that
L336: C137 c= C138;
L337: ( D38 . C137 ) = C137 by FUNCT_1:18;
thus L338: thesis by L337 , L336 , FUNCT_1:18;
end;

thus L339: D38 is  idempotent
proof
let C139 being (Element of ( Bool C126 ));
thus L340: ( D38 . ( D38 . C139 ) ) = ( D38 . C139 ) by FUNCT_1:18;
end;

end;
end;
definition
let C140 being non  empty 1-sorted;
let C141 being (ClosureSystem of C140);
attr C141 is  algebraic
means
( ClSys->ClOp C141 ) is  algebraic;
end;
definition
let C142 being non  void non  empty ManySortedSign;
let C143 being  non-empty MSAlgebra over C142;
func SubAlgCl C143 ->  strict ClosureStr over ( the 1-sorted of C142 ) means 
:L342: ((the Sorts of it) = (the Sorts of C143) & (the Family of it) = ( SubSort C143 ));
existence
proof
reconsider D41 = (the Sorts of C143) as (ManySortedSet of (the carrier of ( the 1-sorted of C142 )));
L343: ( SubSort C143 ) c= ( Bool (the Sorts of C143) )
proof
let C144 being set;
assume L344: C144 in ( SubSort C143 );
L345: C144 is (ManySortedSubset of (the Sorts of C143)) by L344 , MSUALG_2:def 11;
thus L346: thesis by L345 , CLOSURE2:def 1;
end;
reconsider D42 = ( SubSort C143 ) as (SubsetFamily of D41) by L343;
take ClosureStr (# D41 , D42 #);
thus L347: thesis;
end;
uniqueness;
end;
theorem
L349: (for B144 being non  void non  empty ManySortedSign holds (for B145 being  strict  non-empty MSAlgebra over B144 holds ( SubSort B145 ) is  absolutely-multiplicative  absolutely-multiplicative  absolutely-multiplicative  absolutely-multiplicative (SubsetFamily of (the Sorts of B145))))
proof
let C145 being non  void non  empty ManySortedSign;
let C146 being  strict  non-empty MSAlgebra over C145;
L350: ( SubSort C146 ) c= ( Bool (the Sorts of C146) )
proof
let C147 being set;
assume L351: C147 in ( SubSort C146 );
L352: C147 is (ManySortedSubset of (the Sorts of C146)) by L351 , MSUALG_2:def 11;
thus L353: thesis by L352 , CLOSURE2:def 1;
end;
reconsider D43 = ( SubSort C146 ) as (SubsetFamily of (the Sorts of C146)) by L350;
L354: (for B146 being (SubsetFamily of (the Sorts of C146)) holds (B146 c= D43 implies ( meet |: B146 :| ) in D43))
proof
set D44 = ( bool ( Union (the Sorts of C146) ) );
set D45 = (the carrier of C145);
let C148 being (SubsetFamily of (the Sorts of C146));
assume that
L355: C148 c= D43;
set D46 = ( meet |: C148 :| );
L356: ( dom D46 ) = D45 by PARTFUN1:def 2;
L357: ( rng D46 ) c= D44
proof
let C149 being set;
assume L358: C149 in ( rng D46 );
consider C150 being set such that L359: C150 in ( dom D46 ) and L360: C149 = ( D46 . C150 ) by L358 , FUNCT_1:def 3;
L361: ( dom (the Sorts of C146) ) = D45 by PARTFUN1:def 2;
L362: ( (the Sorts of C146) . C150 ) in ( rng (the Sorts of C146) ) by L361 , L356 , L359 , FUNCT_1:def 3;
L363: ( (the Sorts of C146) . C150 ) c= ( union ( rng (the Sorts of C146) ) ) by L362 , ZFMISC_1:74;
L364: (ex B147 being (Subset-Family of ( (the Sorts of C146) . C150 )) st (B147 = ( |: C148 :| . C150 ) & C149 = ( Intersect B147 ))) by L356 , L359 , L360 , MSSUBFAM:def 1;
L365: C149 c= ( union ( rng (the Sorts of C146) ) ) by L364 , L363 , XBOOLE_1:1;
L366: C149 in ( bool ( union ( rng (the Sorts of C146) ) ) ) by L365;
thus L367: thesis by L366 , CARD_3:def 4;
end;
L368: D46 in ( Funcs (D45 , D44) ) by L357 , L356 , FUNCT_2:def 2;
reconsider D47 = D46 as (MSSubset of C146);
L369: (for B148 being (MSSubset of C146) holds (B148 = D47 implies B148 is  opers_closed)) by L355 , L6;
thus L370: thesis by L369 , L368 , MSUALG_2:def 11;
end;
thus L371: thesis by L354 , CLOSURE2:def 7;
end;
registration
let C151 being non  void non  empty ManySortedSign;
let C152 being  strict  non-empty MSAlgebra over C151;
cluster ( SubAlgCl C152 ) ->  absolutely-multiplicative;
coherence
proof
thus L372: ( SubAlgCl C152 ) is  absolutely-multiplicative
proof
reconsider D48 = ( SubSort C152 ) as  absolutely-multiplicative (SubsetFamily of (the Sorts of C152)) by L349;
set D49 = (the Family of ( SubAlgCl C152 ));
L373: ((the Sorts of ( SubAlgCl C152 )) = (the Sorts of C152) & D49 = D48) by L342;
thus L374: thesis by L373;
end;

end;
end;
registration
let C153 being non  void non  empty ManySortedSign;
let C154 being  strict  non-empty MSAlgebra over C153;
cluster ( SubAlgCl C154 ) ->  algebraic;
coherence
proof
set D50 = (the carrier of C153);
set D51 = ( ClSys->ClOp ( SubAlgCl C154 ) );
set D52 = (the Sorts of ( SubAlgCl C154 ));
let C155 being (Element of ( Bool D52 ));
assume that
L374: C155 = ( D51 . C155 );
set D53 = { ( D51 . B149 ) where B149 is (Element of ( Bool D52 )) : (B149 is  finite-yielding & ( support B149 ) is  finite & B149 c= C155) };
L375: D53 c= ( Bool D52 )
proof
let C156 being set;
assume L376: C156 in D53;
L377: (ex B150 being (Element of ( Bool D52 )) st (C156 = ( D51 . B150 ) & B150 is  finite-yielding & ( support B150 ) is  finite & B150 c= C155)) by L376;
reconsider D54 = C156 as (Element of ( Bool D52 )) by L377;
L378: D54 in ( Bool D52 );
thus L379: thesis by L378;
end;
reconsider D55 = D53 as (SubsetFamily of D52) by L375;
take D55;
thus L380: D55 = { ( D51 . B151 ) where B151 is (Element of ( Bool D52 )) : (B151 is  finite-yielding & ( support B151 ) is  finite & B151 c= C155) };
reconsider D56 = C155 , D57 = ( MSUnion D55 ) as (ManySortedSet of D50);
L381: D56 = D57
proof
let C157 being (Element of D50);
reconsider D58 = D51 as  reflexive (SetOp of D52);
thus L382: ( D56 . C157 ) c= ( D57 . C157 )
proof
let C158 being set;
assume L383: C158 in ( D56 . C157 );
consider C159 being (Element of ( Bool D52 )) such that L384: C158 in ( C159 . C157 ) and L385: (C159 is  finite-yielding & ( support C159 ) is  finite & C159 c= C155) by L383 , L92;
L386: C159 c=' ( D58 . C159 ) by CLOSURE2:def 10;
L387: ( C159 . C157 ) c= ( ( D58 . C159 ) . C157 ) by L386 , PBOOLE:def 2;
L388: ( D51 . C159 ) in D55 by L385;
L389: ( ( D58 . C159 ) . C157 ) in { ( B152 . C157 ) where B152 is (Element of ( Bool D52 )) : B152 in D55 } by L388;
L390: C158 in ( union { ( B153 . C157 ) where B153 is (Element of ( Bool D52 )) : B153 in D55 } ) by L389 , L384 , L387 , TARSKI:def 4;
thus L391: thesis by L390 , L151;
end;

reconsider D59 = D51 as  monotonic (SetOp of D52);
let C160 being set;
assume L392: C160 in ( D57 . C157 );
L393: C160 in ( union { ( B154 . C157 ) where B154 is (Element of ( Bool D52 )) : B154 in D55 } ) by L392 , L151;
consider C161 being set such that L394: C160 in C161 and L395: C161 in { ( B155 . C157 ) where B155 is (Element of ( Bool D52 )) : B155 in D55 } by L393 , TARSKI:def 4;
consider C162 being (Element of ( Bool D52 )) such that L396: C161 = ( C162 . C157 ) and L397: C162 in D55 by L395;
consider C163 being (Element of ( Bool D52 )) such that L398: C162 = ( D51 . C163 ) and L399: C163 is  finite-yielding and L400: ( support C163 ) is  finite and L401: C163 c=' C155 by L397;
L402: ( D59 . C163 ) c=' ( D59 . C155 ) by L401 , CLOSURE2:def 11;
L403: ( C162 . C157 ) c= ( C155 . C157 ) by L402 , L374 , L398 , PBOOLE:def 2;
thus L404: thesis by L403 , L394 , L396;
end;
thus L405: thesis by L381;
end;
end;
