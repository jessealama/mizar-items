:: On Defining Functions on Trees
::  by Grzegorz Bancerek and Piotr Rudnicki
::
:: Received October 12, 1993
:: Copyright (c) 1993-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, CARD_1, XBOOLE_0, FINSEQ_1, TREES_3, SUBSET_1, RELAT_1,
      FUNCT_1, TARSKI, TREES_2, TREES_4, ZFMISC_1, MCART_1, LANG1, STRUCT_0,
      TDGROUP, CARD_3, ARYTM_3, NAT_1, XXREAL_0, FINSET_1, TREES_1, TREES_A,
      FUNCT_6, PRE_POLY, ORDINAL4, FINSEQ_2, DTCONSTR;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, NUMBERS, XCMPLX_0, RELSET_1,
      RELAT_1, STRUCT_0, FUNCT_1, FUNCT_2, FINSEQ_1, FINSEQ_2, FINSET_1,
      XTUPLE_0, MCART_1, CARD_3, DOMAIN_1, LANG1, TREES_1, TREES_2, FINSEQ_4,
      TREES_3, TREES_4, FINSEQOP, XXREAL_0, ORDINAL1, NAT_1, PRE_POLY;
 constructors PARTFUN1, BINOP_1, DOMAIN_1, SETWISEO, XXREAL_0, XREAL_0, NAT_1,
      CARD_3, FINSEQOP, FINSEQ_4, FINSOP_1, TREES_4, LANG1, SEQ_1, RELSET_1,
      PRE_POLY, XTUPLE_0;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, ORDINAL1, XXREAL_0,
      XREAL_0, NAT_1, FINSEQ_1, TREES_1, TREES_2, TREES_3, STRUCT_0, LANG1,
      FINSET_1, CARD_1, FINSEQ_2, TREES_4, VALUED_0, XTUPLE_0;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, FINSEQ_1, XBOOLE_0, XTUPLE_0;
 theorems TARSKI, NAT_1, ZFMISC_1, RELAT_1, FUNCT_1, FUNCT_2, FUNCT_6, MCART_1,
      LANG1, FINSEQ_1, FINSEQ_2, CARD_5, TREES_1, TREES_3, TREES_4, CARD_3,
      RELSET_1, XBOOLE_0, XBOOLE_1, MEASURE2, XXREAL_0, ORDINAL1, PRE_POLY,
      CARD_1;
 schemes NAT_1, CQC_SIM1, FINSEQ_1, RELSET_1, FRAENKEL, FUNCT_2, FUNCT_1;

begin
deffunc H1(set) = ( 0 );
deffunc H2(set , set , set) = ( 0 );
theorem
L1: (for B1 being non  empty set holds (for B2 being (FinSequence of ( FinTrees B1 )) holds B2 is (FinSequence of ( Trees B1 ))))
proof
let C1 being non  empty set;
L2: ( FinTrees C1 ) is non  empty non  empty non  empty non  empty (Subset of ( Trees C1 )) by TREES_3:21;
thus L3: thesis by L2 , FINSEQ_2:24;
end;
theorem
L4: (for B3 , B4 being set holds (for B5 being (FinSequence of B3) holds (B4 in ( dom B5 ) implies ( B5 . B4 ) in B3)))
proof
let C2 , C3 being set;
let C4 being (FinSequence of C2);
assume L5: C3 in ( dom C4 );
L6: ( C4 . C3 ) in ( rng C4 ) by L5 , FUNCT_1:def 3;
L7: ( rng C4 ) c= C2 by FINSEQ_1:def 4;
thus L8: thesis by L7 , L6;
end;
registration
let C5 being non  empty set;
let C6 being (DTree-set of C5);
cluster  ->  DTree-yielding for (FinSequence of C6);
coherence;
end;
definition
let C7 being non  empty set;
let C8 being non  empty (DTree-set of C7);
let C9 being non  empty (Subset of C8);
redefine mode Element of C9
 -> (Element of C8);
coherence
proof
let C10 being (Element of C9);
thus L10: thesis;
end;
end;
definition
let C11 being non  empty set;
let C12 being (DTree-set of C11);
let C13 being (FinSequence of C12);
redefine func roots C13 -> (FinSequence of C11);

coherence
proof
let C14 being set;
assume L12: C14 in ( rng ( roots C13 ) );
consider C15 being set such that L13: C15 in ( dom ( roots C13 ) ) and L14: C14 = ( ( roots C13 ) . C15 ) by L12 , FUNCT_1:def 3;
reconsider D1 = C15 as (Element of ( NAT )) by L13;
L15: ( dom ( roots C13 ) ) = ( dom C13 ) by TREES_3:def 18;
consider C16 being DecoratedTree such that L16: C16 = ( C13 . D1 ) and L17: ( ( roots C13 ) . D1 ) = ( C16 . ( {} ) ) by L15 , L13 , TREES_3:def 18;
reconsider D2 = C16 as (DecoratedTree of C11) by L13 , L15 , L16 , L4 , TREES_3:def 6;
reconsider D3 = ( {} ) as (Node of D2) by TREES_1:22;
L18: ( D2 . D3 ) in C11;
thus L19: thesis by L18 , L14 , L17;
end;
end;
L21: ( dom ( roots ( {} ) ) ) = ( dom ( {} ) ) by TREES_3:def 18
.= ( {} );
theorem
L22: ( roots ( {} ) ) = ( {} ) by L21;
theorem
L23: (for B6 being DecoratedTree holds ( roots <* B6 *> ) = <* ( B6 . ( {} ) ) *>)
proof
let C17 being DecoratedTree;
L24: ( dom <* C17 *> ) = ( Seg 1 ) by FINSEQ_1:def 8;
L25: ( dom <* ( C17 . ( {} ) ) *> ) = ( Seg 1 ) by FINSEQ_1:def 8;
L26: ( <* C17 *> . 1 ) = C17 by FINSEQ_1:def 8;
L27: ( <* ( C17 . ( {} ) ) *> . 1 ) = ( C17 . ( {} ) ) by FINSEQ_1:def 8;
L28:
now
let C18 being (Element of ( NAT ));
assume L29: C18 in ( dom <* C17 *> );
take D4 = C17;
thus L30: (D4 = ( <* C17 *> . C18 ) & ( <* ( C17 . ( {} ) ) *> . C18 ) = ( D4 . ( {} ) )) by L24 , L26 , L27 , L29 , FINSEQ_1:2 , TARSKI:def 1;
end;
thus L31: thesis by L28 , L24 , L25 , TREES_3:def 18;
end;
theorem
L32: (for B7 being non  empty set holds (for B8 being (Subset of ( FinTrees B7 )) holds (for B9 being (FinSequence of B8) holds (( len ( roots B9 ) ) = 1 implies (ex B10 being (Element of ( FinTrees B7 )) st (B9 = <* B10 *> & B10 in B8))))))
proof
let C19 being non  empty set;
let C20 being (Subset of ( FinTrees C19 ));
let C21 being (FinSequence of C20);
assume L33: ( len ( roots C21 ) ) = 1;
L34: ( dom ( roots C21 ) ) = ( Seg 1 ) by L33 , FINSEQ_1:def 3;
L35: ( dom C21 ) = ( dom ( roots C21 ) ) by TREES_3:def 18;
L36: 1 in ( dom C21 ) by L35 , L34;
reconsider D5 = ( C21 . 1 ) as (Element of ( FinTrees C19 )) by L36 , L4;
take D5;
thus L37: thesis by L34 , L35 , L36 , L4 , FINSEQ_1:def 8;
end;
theorem
L38: (for B11 , B12 being DecoratedTree holds ( roots <* B11 , B12 *> ) = <* ( B11 . ( {} ) ) , ( B12 . ( {} ) ) *>)
proof
let C22 , C23 being DecoratedTree;
L39: ( len <* C22 , C23 *> ) = 2 by FINSEQ_1:44;
L40: ( len <* ( C22 . ( {} ) ) , ( C23 . ( {} ) ) *> ) = 2 by FINSEQ_1:44;
L41: ( <* C22 , C23 *> . 1 ) = C22 by FINSEQ_1:44;
L42: ( <* ( C22 . ( {} ) ) , ( C23 . ( {} ) ) *> . 1 ) = ( C22 . ( {} ) ) by FINSEQ_1:44;
L43: ( <* C22 , C23 *> . 2 ) = C23 by FINSEQ_1:44;
L44: ( <* ( C22 . ( {} ) ) , ( C23 . ( {} ) ) *> . 2 ) = ( C23 . ( {} ) ) by FINSEQ_1:44;
L45: ( dom <* C22 , C23 *> ) = ( Seg 2 ) by L39 , FINSEQ_1:def 3;
L46: ( dom <* ( C22 . ( {} ) ) , ( C23 . ( {} ) ) *> ) = ( Seg 2 ) by L40 , FINSEQ_1:def 3;
L47:
now
let C24 being (Element of ( NAT ));
assume L48: C24 in ( dom <* C22 , C23 *> );
L49: C24 in ( Seg 2 ) by L48 , L39 , FINSEQ_1:def 3;
L50: (C24 = 1 or C24 = 2) by L49 , FINSEQ_1:2 , TARSKI:def 2;
thus L51: (ex B13 being DecoratedTree st (B13 = ( <* C22 , C23 *> . C24 ) & ( <* ( C22 . ( {} ) ) , ( C23 . ( {} ) ) *> . C24 ) = ( B13 . ( {} ) ))) by L50 , L41 , L42 , L43 , L44;
end;
thus L52: thesis by L47 , L45 , L46 , TREES_3:def 18;
end;
definition
let C25 , C26 being set;
let C27 being (FinSequence of [: C25 , C26 :]);
redefine func pr1 C27 -> (FinSequence of C25);

coherence
proof
L53: ( dom ( pr1 C27 ) ) = ( dom C27 ) by MCART_1:def 12;
L54: ( dom C27 ) = ( Seg ( len C27 ) ) by FINSEQ_1:def 3;
reconsider D6 = ( pr1 C27 ) as FinSequence by L54 , L53 , FINSEQ_1:def 2;
L55: ( rng D6 ) c= C25
proof
let C28 being set;
assume L56: C28 in ( rng D6 );
consider C29 being set such that L57: C29 in ( dom D6 ) and L58: C28 = ( D6 . C29 ) by L56 , FUNCT_1:def 3;
L59: ( C27 . C29 ) in [: C25 , C26 :] by L53 , L57 , L4;
L60: C28 = ( ( C27 . C29 ) `1 ) by L53 , L57 , L58 , MCART_1:def 12;
thus L61: thesis by L60 , L59 , MCART_1:10;
end;
thus L62: thesis by L55 , FINSEQ_1:def 4;
end;
redefine func pr2 C27 -> (FinSequence of C26);

coherence
proof
L63: ( dom ( pr2 C27 ) ) = ( dom C27 ) by MCART_1:def 13;
L64: ( dom C27 ) = ( Seg ( len C27 ) ) by FINSEQ_1:def 3;
reconsider D7 = ( pr2 C27 ) as FinSequence by L64 , L63 , FINSEQ_1:def 2;
L65: ( rng D7 ) c= C26
proof
let C30 being set;
assume L66: C30 in ( rng D7 );
consider C31 being set such that L67: C31 in ( dom D7 ) and L68: C30 = ( D7 . C31 ) by L66 , FUNCT_1:def 3;
L69: ( C27 . C31 ) in [: C25 , C26 :] by L63 , L67 , L4;
L70: C30 = ( ( C27 . C31 ) `2 ) by L63 , L67 , L68 , MCART_1:def 13;
thus L71: thesis by L70 , L69 , MCART_1:10;
end;
thus L72: thesis by L65 , FINSEQ_1:def 4;
end;
end;
theorem
L74: (( pr1 ( {} ) ) = ( {} ) & ( pr2 ( {} ) ) = ( {} ))
proof
set D8 = ( <*> [: ( {} ) , ( {} ) :] );
L75: ( dom ( pr1 D8 ) ) = ( dom ( {} ) )
.= ( {} );
thus L76: ( pr1 ( {} ) ) = ( {} ) by L75;
L77: ( dom ( pr2 D8 ) ) = ( dom ( {} ) )
.= ( {} );
thus L78: thesis by L77;
end;
begin
registration
let C32 being non  empty set;
let C33 being (Relation of C32 , ( C32 * ));
cluster DTConstrStr (# C32 , C33 #) -> non  empty;
coherence;
end;
scheme DTConstrStrEx { F1() -> non  empty set , P1[set , set] } : (ex B14 being  strict non  empty DTConstrStr st ((the carrier of B14) = F1() & (for B15 being (Symbol of B14) holds (for B16 being (FinSequence of (the carrier of B14)) holds (B15 ==> B16 iff P1[ B15 , B16 ])))))
proof
consider C34 being (Relation of F1() , ( F1() * )) such that L80: (for B17 , B18 being set holds ([ B17 , B18 ] in C34 iff (B17 in F1() & B18 in ( F1() * ) & P1[ B17 , B18 ]))) from RELSET_1:sch 1;
take D9 = DTConstrStr (# F1() , C34 #);
thus L81: (the carrier of D9) = F1();
let C35 being (Symbol of D9);
let C36 being (FinSequence of (the carrier of D9));
thus L82:now
assume L83: C35 ==> C36;
L84: [ C35 , C36 ] in (the Rules of D9) by L83 , LANG1:def 1;
thus L85: P1[ C35 , C36 ] by L84 , L80;
end;
assume L86: P1[ C35 , C36 ];
L87: C36 in ( (the carrier of D9) * ) by FINSEQ_1:def 11;
L88: [ C35 , C36 ] in C34 by L87 , L80 , L86;
thus L89: thesis by L88 , LANG1:def 1;
end;
scheme DTConstrStrUniq { F2() -> non  empty set , P2[set , set] } : (for B19 , B20 being  strict non  empty DTConstrStr holds (((the carrier of B19) = F2() & (for B21 being (Symbol of B19) holds (for B22 being (FinSequence of (the carrier of B19)) holds (B21 ==> B22 iff P2[ B21 , B22 ]))) & (the carrier of B20) = F2() & (for B23 being (Symbol of B20) holds (for B24 being (FinSequence of (the carrier of B20)) holds (B23 ==> B24 iff P2[ B23 , B24 ])))) implies B19 = B20))
proof
let C37 , C38 being  strict non  empty DTConstrStr;
assume that
L90: (the carrier of C37) = F2()
and
L91: (for B25 being (Symbol of C37) holds (for B26 being (FinSequence of (the carrier of C37)) holds (B25 ==> B26 iff P2[ B25 , B26 ])))
and
L92: (the carrier of C38) = F2()
and
L93: (for B27 being (Symbol of C38) holds (for B28 being (FinSequence of (the carrier of C38)) holds (B27 ==> B28 iff P2[ B27 , B28 ])));
L94:
now
let C39 , C40 being set;
thus L95:now
assume L96: [ C39 , C40 ] in (the Rules of C37);
L97: C40 in ( (the carrier of C37) * ) by L96 , ZFMISC_1:87;
reconsider D10 = C39 as (Symbol of C37) by L96 , ZFMISC_1:87;
reconsider D11 = C40 as (FinSequence of (the carrier of C37)) by L97 , FINSEQ_2:def 3;
L98: (D10 ==> D11 iff P2[ D10 , D11 ]) by L91;
reconsider D12 = C39 as (Symbol of C38) by L90 , L92 , L96 , ZFMISC_1:87;
reconsider D13 = C40 as (FinSequence of (the carrier of C38)) by L90 , L92 , L97 , FINSEQ_2:def 3;
L99: D12 ==> D13 by L93 , L96 , L98 , LANG1:def 1;
thus L100: [ C39 , C40 ] in (the Rules of C38) by L99 , LANG1:def 1;
end;
assume L101: [ C39 , C40 ] in (the Rules of C38);
L102: C40 in ( (the carrier of C38) * ) by L101 , ZFMISC_1:87;
reconsider D14 = C39 as (Symbol of C38) by L101 , ZFMISC_1:87;
reconsider D15 = C40 as (FinSequence of (the carrier of C38)) by L102 , FINSEQ_2:def 3;
L103: (D14 ==> D15 iff P2[ D14 , D15 ]) by L93;
reconsider D16 = C39 as (Symbol of C37) by L90 , L92 , L101 , ZFMISC_1:87;
reconsider D17 = C40 as (FinSequence of (the carrier of C37)) by L90 , L92 , L102 , FINSEQ_2:def 3;
L104: D16 ==> D17 by L91 , L101 , L103 , LANG1:def 1;
thus L105: [ C39 , C40 ] in (the Rules of C37) by L104 , LANG1:def 1;
end;
thus L106: thesis by L94 , L90 , L92 , RELAT_1:def 2;
end;
theorem
L107: (for B29 being non  empty DTConstrStr holds ( Terminals B29 ) misses ( NonTerminals B29 ))
proof
let C41 being non  empty DTConstrStr;
L108: ( Terminals C41 ) = { B30 where B30 is (Symbol of C41) : (not (ex B31 being FinSequence st B30 ==> B31)) } by LANG1:def 2;
L109: ( NonTerminals C41 ) = { B32 where B32 is (Symbol of C41) : (ex B33 being FinSequence st B32 ==> B33) } by LANG1:def 3;
assume L110: (not thesis);
consider C42 being set such that L111: C42 in ( Terminals C41 ) and L112: C42 in ( NonTerminals C41 ) by L110 , XBOOLE_0:3;
L113: (ex B34 being (Symbol of C41) st (C42 = B34 & (not (ex B35 being FinSequence st B34 ==> B35)))) by L108 , L111;
L114: (ex B36 being (Symbol of C41) st (C42 = B36 & (ex B37 being FinSequence st B36 ==> B37))) by L109 , L112;
thus L115: contradiction by L114 , L113;
end;
scheme DTCMin { F3() -> Function , F4() -> non  empty DTConstrStr , F5() -> non  empty set , F6(set) -> (Element of F5()) , F7(set , set , set) -> (Element of F5()) } : (ex B38 being (Subset of ( FinTrees [: (the carrier of F4()) , F5() :] )) st (B38 = ( Union F3() ) & (for B39 being (Symbol of F4()) holds (B39 in ( Terminals F4() ) implies ( root-tree [ B39 , F6(B39) ] ) in B38)) & (for B40 being (Symbol of F4()) holds (for B41 being (FinSequence of B38) holds (B40 ==> ( pr1 ( roots B41 ) ) implies ( [ B40 , F7(B40 , ( pr1 ( roots B41 ) ) , ( pr2 ( roots B41 ) )) ] -tree B41 ) in B38))) & (for B42 being (Subset of ( FinTrees [: (the carrier of F4()) , F5() :] )) holds (((for B43 being (Symbol of F4()) holds (B43 in ( Terminals F4() ) implies ( root-tree [ B43 , F6(B43) ] ) in B42)) & (for B44 being (Symbol of F4()) holds (for B45 being (FinSequence of B42) holds (B44 ==> ( pr1 ( roots B45 ) ) implies ( [ B44 , F7(B44 , ( pr1 ( roots B45 ) ) , ( pr2 ( roots B45 ) )) ] -tree B45 ) in B42)))) implies B38 c= B42))))
provided
L116: ( dom F3() ) = ( NAT )
and
L117: ( F3() . ( 0 ) ) = { ( root-tree [ B46 , B47 ] ) where B46 is (Symbol of F4()) , B47 is (Element of F5()) : ((B46 in ( Terminals F4() ) & B47 = F6(B46)) or (B46 ==> ( {} ) & B47 = F7(B46 , ( {} ) , ( {} )))) }
and
L118: (for B48 being (Element of ( NAT )) holds ( F3() . ( B48 + 1 ) ) = ( ( F3() . B48 ) \/ { ( [ B49 , F7(B49 , ( pr1 ( roots B50 ) ) , ( pr2 ( roots B50 ) )) ] -tree B50 ) where B49 is (Symbol of F4()) , B50 is (Element of ( ( F3() . B48 ) * )) : (ex B51 being (FinSequence of ( FinTrees [: (the carrier of F4()) , F5() :] )) st (B50 = B51 & B49 ==> ( pr1 ( roots B51 ) ))) } ))
proof
set D18 = F3();
set D19 = F4();
set D20 = F5();
deffunc H3((Symbol of D19) , FinSequence) = F7($1 , ( pr1 ( roots $2 ) ) , ( pr2 ( roots $2 ) ));
L119: ( Union D18 ) c= ( FinTrees [: (the carrier of D19) , D20 :] )
proof
let C43 being set;
assume L120: C43 in ( Union D18 );
L121: (ex B52 being set st (B52 in ( NAT ) & C43 in ( D18 . B52 ))) by L120 , L116 , CARD_5:2;
defpred S1[ (Element of ( NAT )) ] means (for B53 being set holds (B53 in ( D18 . $1 ) implies B53 in ( FinTrees [: (the carrier of D19) , D20 :] )));
L122: S1[ ( 0 ) ]
proof
let C44 being set;
assume L123: C44 in ( D18 . ( 0 ) );
L124: (ex B54 being (Symbol of D19) st (ex B55 being (Element of D20) st (C44 = ( root-tree [ B54 , B55 ] ) & ((B54 in ( Terminals F4() ) & B55 = F6(B54)) or (B54 ==> ( {} ) & B55 = F7(B54 , ( {} ) , ( {} ))))))) by L123 , L117;
thus L125: thesis by L124;
end;
L126:
now
let C45 being (Element of ( NAT ));
assume that
L127: S1[ C45 ];
thus L128: S1[ ( C45 + 1 ) ]
proof
let C46 being set;
assume L129: C46 in ( D18 . ( C45 + 1 ) );
L130: C46 in ( ( D18 . C45 ) \/ { ( [ B56 , H3(B56 , B57) ] -tree B57 ) where B56 is (Symbol of D19) , B57 is (Element of ( ( D18 . C45 ) * )) : (ex B58 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (B57 = B58 & B56 ==> ( pr1 ( roots B58 ) ))) } ) by L129 , L118;
L131: (C46 in ( D18 . C45 ) or C46 in { ( [ B59 , H3(B59 , B60) ] -tree B60 ) where B59 is (Symbol of D19) , B60 is (Element of ( ( D18 . C45 ) * )) : (ex B61 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (B60 = B61 & B59 ==> ( pr1 ( roots B61 ) ))) }) by L130 , XBOOLE_0:def 3;
assume L132: (not C46 in ( FinTrees [: (the carrier of D19) , D20 :] ));
consider C47 being (Symbol of D19), C48 being (Element of ( ( D18 . C45 ) * )) such that L133: C46 = ( [ C47 , H3(C47 , C48) ] -tree C48 ) and L134: (ex B62 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (C48 = B62 & C47 ==> ( pr1 ( roots B62 ) ))) by L132 , L127 , L131;
reconsider D21 = C48 as (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) by L134;
L135: C46 = ( [ C47 , H3(C47 , D21) ] -tree D21 ) by L133;
thus L136: contradiction by L135 , L132;
end;

end;
L129: (for B63 being (Element of ( NAT )) holds S1[ B63 ]) from NAT_1:sch 1(L122 , L126);
thus L130: thesis by L129 , L121;
end;
reconsider D22 = ( Union D18 ) as (Subset of ( FinTrees [: (the carrier of D19) , D20 :] )) by L119;
take D22;
thus L131: D22 = ( Union D18 );
thus L132:now
let C49 being (Symbol of D19);
assume L133: C49 in ( Terminals D19 );
L134: ( root-tree [ C49 , F6(C49) ] ) in ( D18 . ( 0 ) ) by L133 , L117;
thus L135: ( root-tree [ C49 , F6(C49) ] ) in D22 by L134 , L116 , CARD_5:2;
end;
thus L136:now
let C50 being (Symbol of D19);
let C51 being (FinSequence of D22);
assume that
L137: C50 ==> ( pr1 ( roots C51 ) );
set D23 = ( pr1 ( roots C51 ) );
set D24 = ( pr2 ( roots C51 ) );
L138: ( dom C51 ) = ( Seg ( len C51 ) ) by FINSEQ_1:def 3;
defpred S2[ set , set ] means ( C51 . $1 ) in ( D18 . $2 );
L139: (for B64 being Nat holds (B64 in ( Seg ( len C51 ) ) implies (ex B65 being (Element of ( NAT )) st S2[ B64 , B65 ])))
proof
let C52 being Nat;
assume L140: C52 in ( Seg ( len C51 ) );
L141: ( C51 . C52 ) in ( rng C51 ) by L140 , L138 , FUNCT_1:def 3;
L142: ( rng C51 ) c= D22 by FINSEQ_1:def 4;
L143: (ex B66 being set st (B66 in ( NAT ) & ( C51 . C52 ) in ( D18 . B66 ))) by L142 , L116 , L141 , CARD_5:2;
thus L144: thesis by L143;
end;
consider C53 being (FinSequence of ( NAT )) such that L145: (( dom C53 ) = ( Seg ( len C51 ) ) & (for B67 being Nat holds (B67 in ( Seg ( len C51 ) ) implies S2[ B67 , ( C53 . B67 ) ]))) from FINSEQ_1:sch 5(L139);
L146:
now
defpred S3[ (Element of ( NAT )) , (Element of ( NAT )) ] means $1 >= $2;
assume L147: ( rng C53 ) <> ( {} );
L148: (( rng C53 ) is  finite & ( rng C53 ) <> ( {} ) & ( rng C53 ) c= ( NAT )) by L147 , FINSEQ_1:def 4;
L149: (for B68 , B69 being (Element of ( NAT )) holds (S3[ B68 , B69 ] or S3[ B69 , B68 ]));
L150: (for B70 , B71 , B72 being (Element of ( NAT )) holds ((S3[ B70 , B71 ] & S3[ B71 , B72 ]) implies S3[ B70 , B72 ])) by XXREAL_0:2;
consider C54 being (Element of ( NAT )) such that L151: (C54 in ( rng C53 ) & (for B73 being (Element of ( NAT )) holds (B73 in ( rng C53 ) implies S3[ C54 , B73 ]))) from CQC_SIM1:sch 4(L148 , L149 , L150);
take D25 = C54;
thus L152: ( rng C51 ) c= ( D18 . D25 )
proof
let C55 being set;
assume L153: C55 in ( rng C51 );
consider C56 being set such that L154: C56 in ( dom C51 ) and L155: C55 = ( C51 . C56 ) by L153 , FUNCT_1:def 3;
reconsider D26 = C56 as (Element of ( NAT )) by L154;
L156: ( C53 . D26 ) in ( rng C53 ) by L138 , L145 , L154 , FUNCT_1:def 3;
reconsider D27 = ( C53 . D26 ) as (Element of ( NAT )) by L156 , L148;
consider C57 being Nat such that L157: D25 = ( D27 + C57 ) by L151 , L156 , NAT_1:10;
deffunc H4(set , set) = { ( [ B74 , F7(B74 , ( pr1 ( roots B75 ) ) , ( pr2 ( roots B75 ) )) ] -tree B75 ) where B74 is (Symbol of F4()) , B75 is (Element of ( ( D18 . $1 ) * )) : (ex B76 being (FinSequence of ( FinTrees [: (the carrier of F4()) , F5() :] )) st (B75 = B76 & B74 ==> ( pr1 ( roots B76 ) ))) };
L158: (for B77 being (Element of ( NAT )) holds ( D18 . B77 ) c= ( D18 . ( B77 + 1 ) ))
proof
let C58 being (Element of ( NAT ));
L159: ( D18 . ( C58 + 1 ) ) = ( ( D18 . C58 ) \/ H4(C58 , ( D18 . C58 )) ) by L118;
thus L160: thesis by L159 , XBOOLE_1:7;
end;
L161: ( D18 . D27 ) c= ( D18 . D25 ) by L158 , L157 , MEASURE2:18 , NAT_1:11;
L162: C55 in ( D18 . ( C53 . D26 ) ) by L138 , L145 , L154 , L155;
thus L163: thesis by L162 , L161;
end;

end;
L153:
now
assume L154: ( rng C53 ) = ( {} );
L155: C53 = ( {} ) by L154;
L156: C51 = ( {} ) by L155 , L145;
L157: ( rng C51 ) = ( {} ) by L156;
thus L158: ( rng C51 ) c= ( D18 . ( 0 ) ) by L157 , XBOOLE_1:2;
end;
consider C59 being (Element of ( NAT )) such that L159: ( rng C51 ) c= ( D18 . C59 ) by L153 , L146;
L160: D22 = ( union ( rng D18 ) ) by CARD_3:def 4;
L161: ( D18 . C59 ) in ( rng D18 ) by L116 , FUNCT_1:def 3;
L162: ( D18 . C59 ) c= D22 by L161 , L160 , ZFMISC_1:74;
reconsider D28 = ( D18 . C59 ) as (Subset of ( FinTrees [: (the carrier of D19) , D20 :] )) by L162 , XBOOLE_1:1;
reconsider D29 = C51 as (FinSequence of D28) by L159 , FINSEQ_1:def 4;
reconsider D30 = D29 as (Element of ( D28 * )) by FINSEQ_1:def 11;
L163: ( [ C50 , F7(C50 , D23 , D24) ] -tree D30 ) in { ( [ B78 , H3(B78 , B79) ] -tree B79 ) where B78 is (Symbol of D19) , B79 is (Element of ( D28 * )) : (ex B80 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (B79 = B80 & B78 ==> ( pr1 ( roots B80 ) ))) } by L137;
L164: ( [ C50 , F7(C50 , D23 , D24) ] -tree D30 ) in ( ( D18 . C59 ) \/ { ( [ B81 , H3(B81 , B82) ] -tree B82 ) where B81 is (Symbol of D19) , B82 is (Element of ( D28 * )) : (ex B83 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (B82 = B83 & B81 ==> ( pr1 ( roots B83 ) ))) } ) by L163 , XBOOLE_0:def 3;
L165: ( [ C50 , F7(C50 , D23 , D24) ] -tree D30 ) in ( D18 . ( C59 + 1 ) ) by L164 , L118;
thus L166: ( [ C50 , F7(C50 , D23 , D24) ] -tree C51 ) in D22 by L165 , L116 , CARD_5:2;
end;
let C60 being (Subset of ( FinTrees [: (the carrier of D19) , D20 :] ));
assume that
L167: (for B84 being (Symbol of D19) holds (B84 in ( Terminals D19 ) implies ( root-tree [ B84 , F6(B84) ] ) in C60))
and
L168: (for B85 being (Symbol of D19) holds (for B86 being (FinSequence of C60) holds (B85 ==> ( pr1 ( roots B86 ) ) implies ( [ B85 , H3(B85 , B86) ] -tree B86 ) in C60)));
defpred S4[ (Element of ( NAT )) ] means ( D18 . $1 ) c= C60;
L169: S4[ ( 0 ) ]
proof
let C61 being set;
reconsider D31 = ( <*> C60 ) as (FinSequence of C60);
assume L170: C61 in ( D18 . ( 0 ) );
consider C62 being (Symbol of D19), C63 being (Element of D20) such that L171: C61 = ( root-tree [ C62 , C63 ] ) and L172: ((C62 in ( Terminals F4() ) & C63 = F6(C62)) or (C62 ==> ( pr1 ( roots D31 ) ) & C63 = H3(C62 , D31))) by L170 , L117 , L22 , L74;
L173: ( [ C62 , C63 ] -tree D31 ) = ( root-tree [ C62 , C63 ] ) by TREES_4:20;
thus L174: thesis by L173 , L167 , L168 , L171 , L172;
end;
L175:
now
let C64 being (Element of ( NAT ));
assume that
L176: S4[ C64 ];
thus L177: S4[ ( C64 + 1 ) ]
proof
let C65 being set;
assume that
L178: C65 in ( D18 . ( C64 + 1 ) )
and
L179: (not C65 in C60);
L180: C65 in ( ( D18 . C64 ) \/ { ( [ B87 , H3(B87 , B88) ] -tree B88 ) where B87 is (Symbol of D19) , B88 is (Element of ( ( D18 . C64 ) * )) : (ex B89 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (B88 = B89 & B87 ==> ( pr1 ( roots B89 ) ))) } ) by L118 , L178;
L181: (C65 in ( D18 . C64 ) or C65 in { ( [ B90 , H3(B90 , B91) ] -tree B91 ) where B90 is (Symbol of D19) , B91 is (Element of ( ( D18 . C64 ) * )) : (ex B92 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (B91 = B92 & B90 ==> ( pr1 ( roots B92 ) ))) }) by L180 , XBOOLE_0:def 3;
consider C66 being (Symbol of D19), C67 being (Element of ( ( D18 . C64 ) * )) such that L182: C65 = ( [ C66 , H3(C66 , C67) ] -tree C67 ) and L183: (ex B93 being (FinSequence of ( FinTrees [: (the carrier of D19) , D20 :] )) st (C67 = B93 & C66 ==> ( pr1 ( roots B93 ) ))) by L181 , L176 , L179;
L184: ( rng C67 ) c= ( D18 . C64 ) by FINSEQ_1:def 4;
L185: ( rng C67 ) c= C60 by L184 , L176 , XBOOLE_1:1;
reconsider D32 = C67 as (FinSequence of C60) by L185 , FINSEQ_1:def 4;
L186: C66 ==> ( pr1 ( roots D32 ) ) by L183;
thus L187: contradiction by L186 , L168 , L179 , L182;
end;

end;
L178: (for B94 being (Element of ( NAT )) holds S4[ B94 ]) from NAT_1:sch 1(L169 , L175);
thus L179: D22 c= C60
proof
let C68 being set;
assume L180: C68 in D22;
consider C69 being set such that L181: C69 in ( NAT ) and L182: C68 in ( D18 . C69 ) by L180 , L116 , CARD_5:2;
L183: ( D18 . C69 ) c= C60 by L178 , L181;
thus L184: thesis by L183 , L182;
end;

end;
scheme DTCSymbols { F8() -> Function , F9() -> non  empty DTConstrStr , F10() -> non  empty set , F11(set) -> (Element of F10()) , F12(set , set , set) -> (Element of F10()) } : (ex B95 being (Subset of ( FinTrees (the carrier of F9()) )) st (B95 = { ( B96 `1 ) where B96 is (Element of ( FinTrees [: (the carrier of F9()) , F10() :] )) : B96 in ( Union F8() ) } & (for B97 being (Symbol of F9()) holds (B97 in ( Terminals F9() ) implies ( root-tree B97 ) in B95)) & (for B98 being (Symbol of F9()) holds (for B99 being (FinSequence of B95) holds (B98 ==> ( roots B99 ) implies ( B98 -tree B99 ) in B95))) & (for B100 being (Subset of ( FinTrees (the carrier of F9()) )) holds (((for B101 being (Symbol of F9()) holds (B101 in ( Terminals F9() ) implies ( root-tree B101 ) in B100)) & (for B102 being (Symbol of F9()) holds (for B103 being (FinSequence of B100) holds (B102 ==> ( roots B103 ) implies ( B102 -tree B103 ) in B100)))) implies B95 c= B100))))
provided
L180: ( dom F8() ) = ( NAT )
and
L181: ( F8() . ( 0 ) ) = { ( root-tree [ B104 , B105 ] ) where B104 is (Symbol of F9()) , B105 is (Element of F10()) : ((B104 in ( Terminals F9() ) & B105 = F11(B104)) or (B104 ==> ( {} ) & B105 = F12(B104 , ( {} ) , ( {} )))) }
and
L182: (for B106 being (Element of ( NAT )) holds ( F8() . ( B106 + 1 ) ) = ( ( F8() . B106 ) \/ { ( [ B107 , F12(B107 , ( pr1 ( roots B108 ) ) , ( pr2 ( roots B108 ) )) ] -tree B108 ) where B107 is (Symbol of F9()) , B108 is (Element of ( ( F8() . B106 ) * )) : (ex B109 being (FinSequence of ( FinTrees [: (the carrier of F9()) , F10() :] )) st (B108 = B109 & B107 ==> ( pr1 ( roots B109 ) ))) } ))
proof
set D33 = F8();
set D34 = F9();
set D35 = F10();
set D36 = (the carrier of D34);
set D37 = [: D36 , D35 :];
deffunc H5((Symbol of D34) , FinSequence) = F12($1 , ( pr1 ( roots $2 ) ) , ( pr2 ( roots $2 ) ));
L183: ( F8() . ( 0 ) ) = { ( root-tree [ B110 , B111 ] ) where B110 is (Symbol of F9()) , B111 is (Element of F10()) : ((B110 in ( Terminals F9() ) & B111 = F11(B110)) or (B110 ==> ( {} ) & B111 = F12(B110 , ( {} ) , ( {} )))) } by L181;
L184: (for B112 being (Element of ( NAT )) holds ( F8() . ( B112 + 1 ) ) = ( ( F8() . B112 ) \/ { ( [ B113 , F12(B113 , ( pr1 ( roots B114 ) ) , ( pr2 ( roots B114 ) )) ] -tree B114 ) where B113 is (Symbol of F9()) , B114 is (Element of ( ( F8() . B112 ) * )) : (ex B115 being (FinSequence of ( FinTrees [: (the carrier of F9()) , F10() :] )) st (B114 = B115 & B113 ==> ( pr1 ( roots B115 ) ))) } )) by L182;
consider C70 being (Subset of ( FinTrees [: (the carrier of D34) , D35 :] )) such that L185: (C70 = ( Union D33 ) & (for B116 being (Symbol of D34) holds (B116 in ( Terminals D34 ) implies ( root-tree [ B116 , F11(B116) ] ) in C70)) & (for B117 being (Symbol of D34) holds (for B118 being (FinSequence of C70) holds (B117 ==> ( pr1 ( roots B118 ) ) implies ( [ B117 , F12(B117 , ( pr1 ( roots B118 ) ) , ( pr2 ( roots B118 ) )) ] -tree B118 ) in C70))) & (for B119 being (Subset of ( FinTrees [: (the carrier of D34) , D35 :] )) holds (((for B120 being (Symbol of D34) holds (B120 in ( Terminals D34 ) implies ( root-tree [ B120 , F11(B120) ] ) in B119)) & (for B121 being (Symbol of D34) holds (for B122 being (FinSequence of B119) holds (B121 ==> ( pr1 ( roots B122 ) ) implies ( [ B121 , F12(B121 , ( pr1 ( roots B122 ) ) , ( pr2 ( roots B122 ) )) ] -tree B122 ) in B119)))) implies C70 c= B119))) from DTCMin(L180 , L183 , L184);
set D38 = { ( B123 `1 ) where B123 is (Element of ( FinTrees [: (the carrier of D34) , D35 :] )) : B123 in ( Union D33 ) };
L186: D38 c= ( FinTrees (the carrier of D34) )
proof
let C71 being set;
assume L187: C71 in D38;
consider C72 being (Element of ( FinTrees [: (the carrier of D34) , D35 :] )) such that L188: C71 = ( C72 `1 ) and L189: C72 in ( Union D33 ) by L187;
L190: ( C72 `1 ) = ( ( pr1 ((the carrier of D34) , D35) ) * C72 ) by TREES_3:def 12;
L191: ( rng C72 ) c= [: (the carrier of D34) , D35 :] by RELAT_1:def 19;
L192: ( dom ( pr1 ((the carrier of D34) , D35) ) ) = [: (the carrier of D34) , D35 :] by FUNCT_2:def 1;
L193: ( dom ( C72 `1 ) ) = ( dom C72 ) by L192 , L190 , L191 , RELAT_1:27;
thus L194: thesis by L193 , L188 , TREES_3:def 8;
end;
reconsider D39 = D38 as (Subset of ( FinTrees (the carrier of F9()) )) by L186;
take D40 = D39;
thus L195: D40 = { ( B124 `1 ) where B124 is (Element of ( FinTrees [: (the carrier of D34) , D35 :] )) : B124 in ( Union D33 ) };
thus L196:now
let C73 being (Symbol of F9());
assume L197: C73 in ( Terminals F9() );
L198: ( ( root-tree [ C73 , F11(C73) ] ) `1 ) = ( root-tree C73 ) by TREES_4:25;
L199: ( root-tree [ C73 , F11(C73) ] ) in ( Union D33 ) by L185 , L197;
thus L200: ( root-tree C73 ) in D40 by L199 , L198;
end;
thus L201:now
let C74 being (Symbol of F9());
let C75 being (FinSequence of D40);
assume L202: C74 ==> ( roots C75 );
L203: ( dom C75 ) = ( Seg ( len C75 ) ) by FINSEQ_1:def 3;
defpred S5[ set , set ] means (ex B125 being (DecoratedTree of [: (the carrier of F9()) , F10() :]) st (B125 = $2 & ( B125 `1 ) = ( C75 . $1 ) & B125 in ( Union D33 )));
L204: (for B126 being Nat holds (B126 in ( Seg ( len C75 ) ) implies (ex B127 being (Element of ( FinTrees [: (the carrier of D34) , D35 :] )) st S5[ B126 , B127 ])))
proof
let C76 being Nat;
assume L205: C76 in ( Seg ( len C75 ) );
L206: ( C75 . C76 ) in ( rng C75 ) by L205 , L203 , FUNCT_1:def 3;
L207: ( rng C75 ) c= D40 by FINSEQ_1:def 4;
L208: ( C75 . C76 ) in D40 by L207 , L206;
L209: (ex B128 being (Element of ( FinTrees [: (the carrier of D34) , D35 :] )) st (( C75 . C76 ) = ( B128 `1 ) & B128 in ( Union D33 ))) by L208;
thus L210: thesis by L209;
end;
consider C77 being (FinSequence of ( FinTrees [: (the carrier of D34) , D35 :] )) such that L211: ( dom C77 ) = ( Seg ( len C75 ) ) and L212: (for B129 being Nat holds (B129 in ( Seg ( len C75 ) ) implies S5[ B129 , ( C77 . B129 ) ])) from FINSEQ_1:sch 5(L204);
L213: ( rng C77 ) c= ( Union D33 )
proof
let C78 being set;
assume L214: C78 in ( rng C77 );
consider C79 being set such that L215: C79 in ( dom C75 ) and L216: C78 = ( C77 . C79 ) by L214 , L203 , L211 , FUNCT_1:def 3;
reconsider D41 = C79 as (Element of ( NAT )) by L215;
L217: (ex B130 being (DecoratedTree of [: (the carrier of F9()) , F10() :]) st (B130 = C78 & ( B130 `1 ) = ( C75 . D41 ) & B130 in ( Union D33 ))) by L203 , L212 , L215 , L216;
thus L218: thesis by L217;
end;
reconsider D42 = C77 as (FinSequence of C70) by L213 , L185 , FINSEQ_1:def 4;
L219: ( dom ( roots C75 ) ) = ( dom C75 ) by TREES_3:def 18;
L220: ( dom ( pr1 ( roots D42 ) ) ) = ( dom ( roots D42 ) ) by MCART_1:def 12;
L221: ( dom ( pr1 ( roots D42 ) ) ) = ( dom C75 ) by L220 , L203 , L211 , TREES_3:def 18;
L222:
now
let C80 being Nat;
assume L223: C80 in ( dom C75 );
consider C81 being (DecoratedTree of [: (the carrier of F9()) , F10() :]) such that L224: C81 = ( D42 . C80 ) and L225: ( C81 `1 ) = ( C75 . C80 ) and L226: C81 in ( Union D33 ) by L223 , L203 , L212;
reconsider D43 = ( {} ) as (Node of C81) by TREES_1:22;
L227: (ex B131 being DecoratedTree st (B131 = ( C75 . C80 ) & ( ( roots C75 ) . C80 ) = ( B131 . ( {} ) ))) by L223 , TREES_3:def 18;
L228: ( ( roots C75 ) . C80 ) = ( ( C81 . D43 ) `1 ) by L227 , L225 , TREES_3:39;
L229: (ex B132 being DecoratedTree st (B132 = ( D42 . C80 ) & ( ( roots D42 ) . C80 ) = ( B132 . ( {} ) ))) by L203 , L211 , L223 , TREES_3:def 18;
thus L230: ( ( roots C75 ) . C80 ) = ( ( pr1 ( roots D42 ) ) . C80 ) by L229 , L220 , L221 , L223 , L224 , L228 , MCART_1:def 12;
end;
L231: ( roots C75 ) = ( pr1 ( roots D42 ) ) by L222 , L219 , L221 , FINSEQ_1:13;
L232: ( [ C74 , H5(C74 , D42) ] -tree D42 ) in C70 by L231 , L185 , L202;
L233: ( rng D42 ) c= ( FinTrees [: (the carrier of F9()) , F10() :] ) by FINSEQ_1:def 4;
L234: ( FinTrees [: (the carrier of F9()) , F10() :] ) c= ( Trees [: (the carrier of F9()) , F10() :] ) by TREES_3:21;
L235: ( rng D42 ) c= ( Trees [: (the carrier of F9()) , F10() :] ) by L234 , L233 , XBOOLE_1:1;
reconsider D44 = D42 as (FinSequence of ( Trees [: (the carrier of F9()) , F10() :] )) by L235 , FINSEQ_1:def 4;
L236: ( rng C75 ) c= ( FinTrees (the carrier of F9()) ) by FINSEQ_1:def 4;
L237: ( FinTrees (the carrier of F9()) ) c= ( Trees (the carrier of F9()) ) by TREES_3:21;
L238: ( rng C75 ) c= ( Trees (the carrier of F9()) ) by L237 , L236 , XBOOLE_1:1;
reconsider D45 = C75 as (FinSequence of ( Trees (the carrier of F9()) )) by L238 , FINSEQ_1:def 4;
L239:
now
let C82 being (Element of ( NAT ));
assume L240: C82 in ( dom D42 );
L241: (ex B133 being (DecoratedTree of [: (the carrier of D34) , D35 :]) st (B133 = ( D42 . C82 ) & ( B133 `1 ) = ( C75 . C82 ) & B133 in ( Union D33 ))) by L240 , L211 , L212;
let C83 being (DecoratedTree of [: (the carrier of F9()) , F10() :]);
assume L242: C83 = ( D42 . C82 );
thus L243: ( C75 . C82 ) = ( C83 `1 ) by L242 , L241;
end;
L244: ( ( [ C74 , H5(C74 , D42) ] -tree D44 ) `1 ) = ( C74 -tree D45 ) by L239 , L203 , L211 , TREES_4:27;
thus L245: ( C74 -tree C75 ) in D40 by L244 , L185 , L232;
end;
let C84 being (Subset of ( FinTrees (the carrier of D34) ));
assume that
L246: (for B134 being (Symbol of D34) holds (B134 in ( Terminals D34 ) implies ( root-tree B134 ) in C84))
and
L247: (for B135 being (Symbol of D34) holds (for B136 being (FinSequence of C84) holds (B135 ==> ( roots B136 ) implies ( B135 -tree B136 ) in C84)));
thus L248: D40 c= C84
proof
let C85 being set;
assume L249: C85 in D40;
consider C86 being (Element of ( FinTrees [: (the carrier of D34) , D35 :] )) such that L250: C85 = ( C86 `1 ) and L251: C86 in ( Union D33 ) by L249;
set D46 = { B137 where B137 is (Element of ( FinTrees D37 )) : ( B137 `1 ) in C84 };
L252: D46 c= ( FinTrees D37 )
proof
let C87 being set;
assume L253: C87 in D46;
L254: (ex B138 being (Element of ( FinTrees D37 )) st (C87 = B138 & ( B138 `1 ) in C84)) by L253;
thus L255: thesis by L254;
end;
reconsider D47 = D46 as (Subset of ( FinTrees D37 )) by L252;
L256:
now
let C88 being (Symbol of D34);
assume L257: C88 in ( Terminals D34 );
L258: ( root-tree C88 ) in C84 by L257 , L246;
L259: ( ( root-tree [ C88 , F11(C88) ] ) `1 ) = ( root-tree C88 ) by TREES_4:25;
thus L260: ( root-tree [ C88 , F11(C88) ] ) in D47 by L259 , L258;
end;
L261:
now
let C89 being (Symbol of D34);
let C90 being (FinSequence of D47);
assume L262: C89 ==> ( pr1 ( roots C90 ) );
consider C91 being (FinSequence of ( FinTrees D36 )) such that L263: ( dom C91 ) = ( dom C90 ) and L264: (for B139 being (Element of ( NAT )) holds (B139 in ( dom C90 ) implies (ex B140 being (Element of ( FinTrees D37 )) st (B140 = ( C90 . B139 ) & ( C91 . B139 ) = ( B140 `1 ))))) and L265: ( ( [ C89 , F12(C89 , ( pr1 ( roots C90 ) ) , ( pr2 ( roots C90 ) )) ] -tree C90 ) `1 ) = ( C89 -tree C91 ) by TREES_4:31;
L266: ( rng C91 ) c= C84
proof
let C92 being set;
assume L267: C92 in ( rng C91 );
consider C93 being set such that L268: C93 in ( dom C91 ) and L269: C92 = ( C91 . C93 ) by L267 , FUNCT_1:def 3;
reconsider D48 = C93 as (Element of ( NAT )) by L268;
L270: ( C90 . D48 ) in ( rng C90 ) by L263 , L268 , FUNCT_1:def 3;
L271: (ex B141 being (Element of ( FinTrees D37 )) st (B141 = ( C90 . D48 ) & C92 = ( B141 `1 ))) by L263 , L264 , L268 , L269;
L272: ( rng C90 ) c= D47 by FINSEQ_1:def 4;
L273: ( C90 . D48 ) in D47 by L272 , L270;
L274: (ex B142 being (Element of ( FinTrees D37 )) st (( C90 . D48 ) = B142 & ( B142 `1 ) in C84)) by L273;
thus L275: thesis by L274 , L271;
end;
reconsider D49 = C91 as (FinSequence of C84) by L266 , FINSEQ_1:def 4;
L276: ( dom ( roots D49 ) ) = ( dom D49 ) by TREES_3:def 18;
L277: ( dom ( pr1 ( roots C90 ) ) ) = ( dom ( roots C90 ) ) by MCART_1:def 12;
L278: ( dom ( pr1 ( roots C90 ) ) ) = ( dom D49 ) by L277 , L263 , TREES_3:def 18;
L279:
now
let C94 being Nat;
assume L280: C94 in ( dom D49 );
L281: ( C90 . C94 ) in ( rng C90 ) by L280 , L263 , FUNCT_1:def 3;
L282: (ex B143 being (Element of ( FinTrees D37 )) st (B143 = ( C90 . C94 ) & ( D49 . C94 ) = ( B143 `1 ))) by L263 , L264 , L280;
L283: ( rng C90 ) c= D47 by FINSEQ_1:def 4;
L284: ( C90 . C94 ) in D47 by L283 , L281;
consider C95 being (Element of ( FinTrees D37 )) such that L285: ( C90 . C94 ) = C95 and L286: ( C95 `1 ) in C84 by L284;
reconsider D50 = ( {} ) as (Node of C95) by TREES_1:22;
L287: (ex B144 being DecoratedTree st (B144 = ( D49 . C94 ) & ( ( roots D49 ) . C94 ) = ( B144 . ( {} ) ))) by L280 , TREES_3:def 18;
L288: ( ( roots D49 ) . C94 ) = ( ( C95 . D50 ) `1 ) by L287 , L282 , L285 , TREES_3:39;
L289: (ex B145 being DecoratedTree st (B145 = ( C90 . C94 ) & ( ( roots C90 ) . C94 ) = ( B145 . ( {} ) ))) by L263 , L280 , TREES_3:def 18;
thus L290: ( ( roots D49 ) . C94 ) = ( ( pr1 ( roots C90 ) ) . C94 ) by L289 , L277 , L278 , L280 , L285 , L288 , MCART_1:def 12;
end;
L291: ( pr1 ( roots C90 ) ) = ( roots D49 ) by L279 , L276 , L278 , FINSEQ_1:13;
L292: ( ( [ C89 , F12(C89 , ( pr1 ( roots C90 ) ) , ( pr2 ( roots C90 ) )) ] -tree C90 ) `1 ) in C84 by L291 , L247 , L262 , L265;
thus L293: ( [ C89 , H5(C89 , C90) ] -tree C90 ) in D47 by L292;
end;
L294: C70 c= D47 by L261 , L185 , L256;
L295: C86 in D47 by L294 , L185 , L251;
L296: (ex B146 being (Element of ( FinTrees D37 )) st (C86 = B146 & ( B146 `1 ) in C84)) by L295;
thus L297: thesis by L296 , L250;
end;

end;
scheme DTCHeight { F13() -> Function , F14() -> non  empty DTConstrStr , F15() -> non  empty set , F16(set) -> (Element of F15()) , F17(set , set , set) -> (Element of F15()) } : (for B147 being (Element of ( NAT )) holds (for B148 being (Element of ( FinTrees [: (the carrier of F14()) , F15() :] )) holds (B148 in ( Union F13() ) implies (B148 in ( F13() . B147 ) iff ( height ( dom B148 ) ) <= B147))))
provided
L249: ( dom F13() ) = ( NAT )
and
L250: ( F13() . ( 0 ) ) = { ( root-tree [ B149 , B150 ] ) where B149 is (Symbol of F14()) , B150 is (Element of F15()) : ((B149 in ( Terminals F14() ) & B150 = F16(B149)) or (B149 ==> ( {} ) & B150 = F17(B149 , ( {} ) , ( {} )))) }
and
L251: (for B151 being (Element of ( NAT )) holds ( F13() . ( B151 + 1 ) ) = ( ( F13() . B151 ) \/ { ( [ B152 , F17(B152 , ( pr1 ( roots B153 ) ) , ( pr2 ( roots B153 ) )) ] -tree B153 ) where B152 is (Symbol of F14()) , B153 is (Element of ( ( F13() . B151 ) * )) : (ex B154 being (FinSequence of ( FinTrees [: (the carrier of F14()) , F15() :] )) st (B153 = B154 & B152 ==> ( pr1 ( roots B154 ) ))) } ))
proof
set D51 = F13();
set D52 = F14();
set D53 = F15();
set D54 = [: (the carrier of D52) , D53 :];
deffunc H6((Symbol of D52) , FinSequence) = F17($1 , ( pr1 ( roots $2 ) ) , ( pr2 ( roots $2 ) ));
defpred S6[ (Element of ( NAT )) ] means (for B155 being (Element of ( FinTrees D54 )) holds (B155 in ( Union D51 ) implies (B155 in ( D51 . $1 ) iff ( height ( dom B155 ) ) <= $1)));
L252: S6[ ( 0 ) ]
proof
let C96 being (Element of ( FinTrees D54 ));
assume L253: C96 in ( Union D51 );
thus L254:now
assume L255: C96 in ( D51 . ( 0 ) );
L256: (ex B156 being (Symbol of D52) st (ex B157 being (Element of D53) st (C96 = ( root-tree [ B156 , B157 ] ) & ((B156 in ( Terminals F14() ) & B157 = F16(B156)) or (B156 ==> ( {} ) & B157 = F17(B156 , ( {} ) , ( {} ))))))) by L255 , L250;
thus L257: ( height ( dom C96 ) ) <= ( 0 ) by L256 , TREES_1:42 , TREES_4:3;
end;
assume L258: ( height ( dom C96 ) ) <= ( 0 );
L259: ( height ( dom C96 ) ) = ( 0 ) by L258;
defpred S7[ (Element of ( NAT )) ] means (not C96 in ( D51 . $1 ));
assume L260: S7[ ( 0 ) ];
L261:
now
let C97 being (Element of ( NAT ));
assume L262: S7[ C97 ];
thus L263: S7[ ( C97 + 1 ) ]
proof
assume L264: C96 in ( D51 . ( C97 + 1 ) );
L265: C96 in ( ( D51 . C97 ) \/ { ( [ B158 , H6(B158 , B159) ] -tree B159 ) where B158 is (Symbol of D52) , B159 is (Element of ( ( D51 . C97 ) * )) : (ex B160 being (FinSequence of ( FinTrees D54 )) st (B159 = B160 & B158 ==> ( pr1 ( roots B160 ) ))) } ) by L264 , L251;
L266: (C96 in ( D51 . C97 ) or C96 in { ( [ B161 , H6(B161 , B162) ] -tree B162 ) where B161 is (Symbol of D52) , B162 is (Element of ( ( D51 . C97 ) * )) : (ex B163 being (FinSequence of ( FinTrees D54 )) st (B162 = B163 & B161 ==> ( pr1 ( roots B163 ) ))) }) by L265 , XBOOLE_0:def 3;
consider C98 being (Symbol of D52), C99 being (Element of ( ( D51 . C97 ) * )) such that L267: C96 = ( [ C98 , H6(C98 , C99) ] -tree C99 ) and L268: (ex B164 being (FinSequence of ( FinTrees D54 )) st (C99 = B164 & C98 ==> ( pr1 ( roots B164 ) ))) by L266 , L262;
L269: C96 = ( root-tree ( C96 . ( {} ) ) ) by L259 , TREES_1:43 , TREES_4:5;
L270: C99 = ( {} ) by L269 , L267 , L268 , TREES_4:17;
L271: C96 = ( root-tree [ C98 , F17(C98 , ( {} ) , ( {} )) ] ) by L270 , L267 , L269 , L22 , L74 , TREES_4:def 4;
thus L272: contradiction by L271 , L250 , L260 , L268 , L270 , L22 , L74;
end;

end;
L264: (for B165 being (Element of ( NAT )) holds S7[ B165 ]) from NAT_1:sch 1(L260 , L261);
L265: (ex B166 being set st (B166 in ( NAT ) & C96 in ( D51 . B166 ))) by L249 , L253 , CARD_5:2;
thus L266: contradiction by L265 , L264;
end;
L267:
now
let C100 being (Element of ( NAT ));
assume L268: S6[ C100 ];
thus L269: S6[ ( C100 + 1 ) ]
proof
let C101 being (Element of ( FinTrees D54 ));
assume L270: C101 in ( Union D51 );
thus L271:now
assume L272: C101 in ( D51 . ( C100 + 1 ) );
L273: C101 in ( ( D51 . C100 ) \/ { ( [ B167 , H6(B167 , B168) ] -tree B168 ) where B167 is (Symbol of D52) , B168 is (Element of ( ( D51 . C100 ) * )) : (ex B169 being (FinSequence of ( FinTrees D54 )) st (B168 = B169 & B167 ==> ( pr1 ( roots B169 ) ))) } ) by L272 , L251;
L274: (C101 in ( D51 . C100 ) or C101 in { ( [ B170 , H6(B170 , B171) ] -tree B171 ) where B170 is (Symbol of D52) , B171 is (Element of ( ( D51 . C100 ) * )) : (ex B172 being (FinSequence of ( FinTrees D54 )) st (B171 = B172 & B170 ==> ( pr1 ( roots B172 ) ))) }) by L273 , XBOOLE_0:def 3;
per cases ;
suppose L275: C101 in ( D51 . C100 );

L276: ( height ( dom C101 ) ) <= C100 by L275 , L268 , L270;
L277: C100 <= ( C100 + 1 ) by NAT_1:11;
thus L278: ( height ( dom C101 ) ) <= ( C100 + 1 ) by L277 , L276 , XXREAL_0:2;
end;
suppose L279: (not C101 in ( D51 . C100 ));

consider C102 being (Symbol of D52), C103 being (Element of ( ( D51 . C100 ) * )) such that L280: C101 = ( [ C102 , H6(C102 , C103) ] -tree C103 ) and L281: (ex B173 being (FinSequence of ( FinTrees D54 )) st (C103 = B173 & C102 ==> ( pr1 ( roots B173 ) ))) by L279 , L274;
reconsider D55 = C103 as (FinSequence of ( FinTrees D54 )) by L281;
L282: ( dom C101 ) = ( tree ( doms D55 ) ) by L280 , TREES_4:10;
L283:
now
let C104 being  finite Tree;
assume L284: C104 in ( rng ( doms D55 ) );
consider C105 being set such that L285: C105 in ( dom ( doms D55 ) ) and L286: C104 = ( ( doms D55 ) . C105 ) by L284 , FUNCT_1:def 3;
L287: C105 in ( dom D55 ) by L285 , TREES_3:37;
L288: ( D55 . C105 ) in ( rng D55 ) by L287 , FUNCT_1:def 3;
L289: ( rng D55 ) c= ( FinTrees D54 ) by FINSEQ_1:def 4;
reconsider D56 = ( D55 . C105 ) as (Element of ( FinTrees D54 )) by L289 , L288;
L290: ( rng D55 ) c= ( D51 . C100 ) by FINSEQ_1:def 4;
L291: C104 = ( dom D56 ) by L286 , L287 , FUNCT_6:22;
L292: D56 in ( Union D51 ) by L249 , L288 , L290 , CARD_5:2;
thus L293: ( height C104 ) <= C100 by L292 , L268 , L288 , L290 , L291;
end;
thus L294: ( height ( dom C101 ) ) <= ( C100 + 1 ) by L283 , L282 , TREES_3:77;
end;
end;
assume L296: ( height ( dom C101 ) ) <= ( C100 + 1 );
defpred S8[ Nat ] means C101 in ( D51 . $1 );
L297: (ex B174 being set st (B174 in ( NAT ) & C101 in ( D51 . B174 ))) by L249 , L270 , CARD_5:2;
L298: (ex B175 being Nat st S8[ B175 ]) by L297;
consider C106 being Nat such that L299: (S8[ C106 ] & (for B176 being Nat holds (S8[ B176 ] implies C106 <= B176))) from NAT_1:sch 5(L298);
deffunc H7(set , set) = { ( [ B177 , F17(B177 , ( pr1 ( roots B178 ) ) , ( pr2 ( roots B178 ) )) ] -tree B178 ) where B177 is (Symbol of F14()) , B178 is (Element of ( ( D51 . $1 ) * )) : (ex B179 being (FinSequence of ( FinTrees [: (the carrier of F14()) , F15() :] )) st (B178 = B179 & B177 ==> ( pr1 ( roots B179 ) ))) };
L300: (for B180 being (Element of ( NAT )) holds ( D51 . B180 ) c= ( D51 . ( B180 + 1 ) ))
proof
let C107 being (Element of ( NAT ));
L301: ( D51 . ( C107 + 1 ) ) = ( ( D51 . C107 ) \/ H7(C107 , ( D51 . C107 )) ) by L251;
thus L302: thesis by L301 , XBOOLE_1:7;
end;
per cases  by NAT_1:6;
suppose L303: C106 = ( 0 );

L304: ( D51 . C106 ) c= ( D51 . ( ( 0 ) + ( C100 + 1 ) ) ) by L303 , L300 , MEASURE2:18;
thus L305: thesis by L304 , L299;
end;
suppose L306: (ex B181 being Nat st C106 = ( B181 + 1 ));

consider C108 being Nat such that L307: C106 = ( C108 + 1 ) by L306;
reconsider D57 = C108 as (Element of ( NAT )) by ORDINAL1:def 12;
L308: D57 < ( D57 + 1 ) by NAT_1:13;
L309: ( D51 . C106 ) = ( ( D51 . D57 ) \/ { ( [ B182 , H6(B182 , B183) ] -tree B183 ) where B182 is (Symbol of D52) , B183 is (Element of ( ( D51 . D57 ) * )) : (ex B184 being (FinSequence of ( FinTrees D54 )) st (B183 = B184 & B182 ==> ( pr1 ( roots B184 ) ))) } ) by L251 , L307;
L310: (C101 in ( D51 . D57 ) or C101 in { ( [ B185 , H6(B185 , B186) ] -tree B186 ) where B185 is (Symbol of D52) , B186 is (Element of ( ( D51 . D57 ) * )) : (ex B187 being (FinSequence of ( FinTrees D54 )) st (B186 = B187 & B185 ==> ( pr1 ( roots B187 ) ))) }) by L309 , L299 , XBOOLE_0:def 3;
consider C109 being (Symbol of D52), C110 being (Element of ( ( D51 . D57 ) * )) such that L311: C101 = ( [ C109 , H6(C109 , C110) ] -tree C110 ) and L312: (ex B188 being (FinSequence of ( FinTrees D54 )) st (C110 = B188 & C109 ==> ( pr1 ( roots B188 ) ))) by L310 , L299 , L307 , L308;
reconsider D58 = C110 as (FinSequence of ( FinTrees D54 )) by L312;
L313: ( dom C101 ) = ( tree ( doms D58 ) ) by L311 , TREES_4:10;
L314: ( rng D58 ) c= ( D51 . C100 )
proof
let C111 being set;
assume L315: C111 in ( rng D58 );
consider C112 being set such that L316: C112 in ( dom D58 ) and L317: C111 = ( D58 . C112 ) by L315 , FUNCT_1:def 3;
L318: C111 in ( rng D58 ) by L316 , L317 , FUNCT_1:def 3;
L319: ( rng D58 ) c= ( FinTrees D54 ) by FINSEQ_1:def 4;
reconsider D59 = C111 as (Element of ( FinTrees D54 )) by L319 , L318;
L320: C112 in ( dom ( doms D58 ) ) by L316 , L317 , FUNCT_6:22;
L321: ( dom D59 ) = ( ( doms D58 ) . C112 ) by L316 , L317 , FUNCT_6:22;
L322: ( dom D59 ) in ( rng ( doms D58 ) ) by L321 , L320 , FUNCT_1:def 3;
L323: ( height ( dom D59 ) ) < ( C100 + 1 ) by L322 , L296 , L313 , TREES_3:78 , XXREAL_0:2;
L324: ( height ( dom D59 ) ) <= C100 by L323 , NAT_1:13;
L325: ( rng D58 ) c= ( D51 . D57 ) by FINSEQ_1:def 4;
L326: D59 in ( rng D58 ) by L316 , L317 , FUNCT_1:def 3;
L327: D59 in ( Union D51 ) by L326 , L249 , L325 , CARD_5:2;
thus L328: thesis by L327 , L268 , L324;
end;
L329: D58 is (FinSequence of ( D51 . C100 )) by L314 , FINSEQ_1:def 4;
reconsider D60 = D58 as (Element of ( ( D51 . C100 ) * )) by L329 , FINSEQ_1:def 11;
L330: ( [ C109 , H6(C109 , D60) ] -tree D60 ) in { ( [ B189 , H6(B189 , B190) ] -tree B190 ) where B189 is (Symbol of D52) , B190 is (Element of ( ( D51 . C100 ) * )) : (ex B191 being (FinSequence of ( FinTrees D54 )) st (B190 = B191 & B189 ==> ( pr1 ( roots B191 ) ))) } by L312;
L331: C101 in ( ( D51 . C100 ) \/ { ( [ B192 , H6(B192 , B193) ] -tree B193 ) where B192 is (Symbol of D52) , B193 is (Element of ( ( D51 . C100 ) * )) : (ex B194 being (FinSequence of ( FinTrees D54 )) st (B193 = B194 & B192 ==> ( pr1 ( roots B194 ) ))) } ) by L330 , L311 , XBOOLE_0:def 3;
thus L332: thesis by L331 , L251;
end;
end;

end;
thus L270: (for B195 being (Element of ( NAT )) holds S6[ B195 ]) from NAT_1:sch 1(L252 , L267);
end;
scheme DTCUniq { F18() -> Function , F19() -> non  empty DTConstrStr , F20() -> non  empty set , F21(set) -> (Element of F20()) , F22(set , set , set) -> (Element of F20()) } : (for B196 , B197 being (DecoratedTree of [: (the carrier of F19()) , F20() :]) holds ((B196 in ( Union F18() ) & B197 in ( Union F18() ) & ( B196 `1 ) = ( B197 `1 )) implies B196 = B197))
provided
L271: ( dom F18() ) = ( NAT )
and
L272: ( F18() . ( 0 ) ) = { ( root-tree [ B198 , B199 ] ) where B198 is (Symbol of F19()) , B199 is (Element of F20()) : ((B198 in ( Terminals F19() ) & B199 = F21(B198)) or (B198 ==> ( {} ) & B199 = F22(B198 , ( {} ) , ( {} )))) }
and
L273: (for B200 being (Element of ( NAT )) holds ( F18() . ( B200 + 1 ) ) = ( ( F18() . B200 ) \/ { ( [ B201 , F22(B201 , ( pr1 ( roots B202 ) ) , ( pr2 ( roots B202 ) )) ] -tree B202 ) where B201 is (Symbol of F19()) , B202 is (Element of ( ( F18() . B200 ) * )) : (ex B203 being (FinSequence of ( FinTrees [: (the carrier of F19()) , F20() :] )) st (B202 = B203 & B201 ==> ( pr1 ( roots B203 ) ))) } ))
proof
set D61 = F18();
set D62 = F19();
set D63 = F20();
set D64 = (the carrier of D62);
set D65 = [: D64 , D63 :];
deffunc H8((Symbol of D62) , FinSequence) = F22($1 , ( pr1 ( roots $2 ) ) , ( pr2 ( roots $2 ) ));
L274: ( F18() . ( 0 ) ) = { ( root-tree [ B204 , B205 ] ) where B204 is (Symbol of F19()) , B205 is (Element of F20()) : ((B204 in ( Terminals F19() ) & B205 = F21(B204)) or (B204 ==> ( {} ) & B205 = F22(B204 , ( {} ) , ( {} )))) } by L272;
L275: (for B206 being (Element of ( NAT )) holds ( F18() . ( B206 + 1 ) ) = ( ( F18() . B206 ) \/ { ( [ B207 , F22(B207 , ( pr1 ( roots B208 ) ) , ( pr2 ( roots B208 ) )) ] -tree B208 ) where B207 is (Symbol of F19()) , B208 is (Element of ( ( F18() . B206 ) * )) : (ex B209 being (FinSequence of ( FinTrees [: (the carrier of F19()) , F20() :] )) st (B208 = B209 & B207 ==> ( pr1 ( roots B209 ) ))) } )) by L273;
defpred S9[ (Element of ( NAT )) ] means (for B210 , B211 being (DecoratedTree of D65) holds ((B210 in ( D61 . $1 ) & B211 in ( D61 . $1 ) & ( B210 `1 ) = ( B211 `1 )) implies B210 = B211));
L276: S9[ ( 0 ) ]
proof
let C113 , C114 being (DecoratedTree of D65);
assume that
L277: C113 in ( D61 . ( 0 ) )
and
L278: C114 in ( D61 . ( 0 ) )
and
L279: ( C113 `1 ) = ( C114 `1 );
consider C115 being (Symbol of D62), C116 being (Element of D63) such that L280: C113 = ( root-tree [ C115 , C116 ] ) and L281: ((C115 in ( Terminals D62 ) & C116 = F21(C115)) or (C115 ==> ( {} ) & C116 = F22(C115 , ( {} ) , ( {} )))) by L272 , L277;
consider C117 being (Symbol of D62), C118 being (Element of D63) such that L282: C114 = ( root-tree [ C117 , C118 ] ) and L283: ((C117 in ( Terminals D62 ) & C118 = F21(C117)) or (C117 ==> ( {} ) & C118 = F22(C117 , ( {} ) , ( {} )))) by L272 , L278;
L284: ( root-tree C115 ) = ( C113 `1 ) by L280 , TREES_4:25;
L285: ( root-tree C117 ) = ( C114 `1 ) by L282 , TREES_4:25;
L286: C115 = C117 by L285 , L279 , L284 , TREES_4:4;
L287:
now
let C119 being (Symbol of D62);
assume L288: C119 ==> ( {} );
L289: (not (ex B212 being (Symbol of D62) st (C119 = B212 & (not (ex B213 being FinSequence st B212 ==> B213))))) by L288;
L290: (not C119 in { B214 where B214 is (Symbol of D62) : (not (ex B215 being FinSequence st B214 ==> B215)) }) by L289;
thus L291: (not C119 in ( Terminals D62 )) by L290 , LANG1:def 2;
end;
thus L292: thesis by L287 , L280 , L281 , L282 , L283 , L286;
end;
L293:
now
let C120 being (Element of ( NAT ));
assume that
L294: S9[ C120 ];
thus L295: S9[ ( C120 + 1 ) ]
proof
let C121 , C122 being (DecoratedTree of D65);
assume that
L296: C121 in ( D61 . ( C120 + 1 ) )
and
L297: C122 in ( D61 . ( C120 + 1 ) )
and
L298: ( C121 `1 ) = ( C122 `1 );
L299: ( dom C121 ) = ( dom ( C121 `1 ) ) by TREES_4:24;
L300: ( dom C122 ) = ( dom ( C121 `1 ) ) by L298 , TREES_4:24;
L301: C121 in ( Union D61 ) by L271 , L296 , CARD_5:2;
L302: C122 in ( Union D61 ) by L271 , L297 , CARD_5:2;
L303: (ex B216 being (Subset of ( FinTrees [: (the carrier of F19()) , F20() :] )) st (B216 = ( Union F18() ) & (for B217 being (Symbol of F19()) holds (B217 in ( Terminals F19() ) implies ( root-tree [ B217 , F21(B217) ] ) in B216)) & (for B218 being (Symbol of F19()) holds (for B219 being (FinSequence of B216) holds (B218 ==> ( pr1 ( roots B219 ) ) implies ( [ B218 , F22(B218 , ( pr1 ( roots B219 ) ) , ( pr2 ( roots B219 ) )) ] -tree B219 ) in B216))) & (for B220 being (Subset of ( FinTrees [: (the carrier of F19()) , F20() :] )) holds (((for B221 being (Symbol of F19()) holds (B221 in ( Terminals F19() ) implies ( root-tree [ B221 , F21(B221) ] ) in B220)) & (for B222 being (Symbol of F19()) holds (for B223 being (FinSequence of B220) holds (B222 ==> ( pr1 ( roots B223 ) ) implies ( [ B222 , F22(B222 , ( pr1 ( roots B223 ) ) , ( pr2 ( roots B223 ) )) ] -tree B223 ) in B220)))) implies B216 c= B220)))) from DTCMin(L271 , L274 , L275);
reconsider D66 = C121 , D67 = C122 as (Element of ( FinTrees D65 )) by L303 , L301 , L302;
L304: (for B224 being (Element of ( NAT )) holds (for B225 being (Element of ( FinTrees [: (the carrier of F19()) , F20() :] )) holds (B225 in ( Union F18() ) implies (B225 in ( F18() . B224 ) iff ( height ( dom B225 ) ) <= B224)))) from DTCHeight(L271 , L274 , L275);
per cases ;
suppose L305: C121 in ( D61 . C120 );

L306: ( height ( dom D66 ) ) <= C120 by L305 , L301 , L304;
L307: D67 in ( D61 . C120 ) by L306 , L299 , L300 , L302 , L304;
thus L308: thesis by L307 , L294 , L298 , L305;
end;
suppose L309: (not C121 in ( D61 . C120 ));

L310: ( D61 . ( C120 + 1 ) ) = ( ( D61 . C120 ) \/ { ( [ B226 , H8(B226 , B227) ] -tree B227 ) where B226 is (Symbol of D62) , B227 is (Element of ( ( D61 . C120 ) * )) : (ex B228 being (FinSequence of ( FinTrees D65 )) st (B227 = B228 & B226 ==> ( pr1 ( roots B228 ) ))) } ) by L273;
L311: (C121 in ( D61 . C120 ) or C121 in { ( [ B229 , H8(B229 , B230) ] -tree B230 ) where B229 is (Symbol of D62) , B230 is (Element of ( ( D61 . C120 ) * )) : (ex B231 being (FinSequence of ( FinTrees D65 )) st (B230 = B231 & B229 ==> ( pr1 ( roots B231 ) ))) }) by L310 , L296 , XBOOLE_0:def 3;
consider C123 being (Symbol of D62), C124 being (Element of ( ( D61 . C120 ) * )) such that L312: C121 = ( [ C123 , H8(C123 , C124) ] -tree C124 ) and L313: (ex B232 being (FinSequence of ( FinTrees D65 )) st (C124 = B232 & C123 ==> ( pr1 ( roots B232 ) ))) by L311 , L309;
L314: ( height ( dom D66 ) ) > C120 by L301 , L304 , L309;
L315: (not D67 in ( D61 . C120 )) by L314 , L299 , L300 , L302 , L304;
L316: (C122 in ( D61 . C120 ) or C122 in { ( [ B233 , H8(B233 , B234) ] -tree B234 ) where B233 is (Symbol of D62) , B234 is (Element of ( ( D61 . C120 ) * )) : (ex B235 being (FinSequence of ( FinTrees D65 )) st (B234 = B235 & B233 ==> ( pr1 ( roots B235 ) ))) }) by L297 , L310 , XBOOLE_0:def 3;
consider C125 being (Symbol of D62), C126 being (Element of ( ( D61 . C120 ) * )) such that L317: C122 = ( [ C125 , H8(C125 , C126) ] -tree C126 ) and L318: (ex B236 being (FinSequence of ( FinTrees D65 )) st (C126 = B236 & C125 ==> ( pr1 ( roots B236 ) ))) by L316 , L315;
reconsider D68 = C124 as (FinSequence of ( FinTrees D65 )) by L313;
consider C127 being (FinSequence of ( FinTrees D64 )) such that L319: ( dom C127 ) = ( dom D68 ) and L320: (for B237 being (Element of ( NAT )) holds (B237 in ( dom D68 ) implies (ex B238 being (Element of ( FinTrees D65 )) st (B238 = ( D68 . B237 ) & ( C127 . B237 ) = ( B238 `1 ))))) and L321: ( ( [ C123 , H8(C123 , D68) ] -tree D68 ) `1 ) = ( C123 -tree C127 ) by TREES_4:31;
reconsider D69 = C126 as (FinSequence of ( FinTrees D65 )) by L318;
consider C128 being (FinSequence of ( FinTrees D64 )) such that L322: ( dom C128 ) = ( dom D69 ) and L323: (for B239 being (Element of ( NAT )) holds (B239 in ( dom D69 ) implies (ex B240 being (Element of ( FinTrees D65 )) st (B240 = ( D69 . B239 ) & ( C128 . B239 ) = ( B240 `1 ))))) and L324: ( ( [ C125 , H8(C125 , D69) ] -tree D69 ) `1 ) = ( C125 -tree C128 ) by TREES_4:31;
L325: C123 = C125 by L298 , L312 , L317 , L321 , L324 , TREES_4:15;
L326: C127 = C128 by L298 , L312 , L317 , L321 , L324 , TREES_4:15;
L327:
now
let C129 being Nat;
assume L328: C129 in ( dom C127 );
consider C130 being (Element of ( FinTrees D65 )) such that L329: C130 = ( D68 . C129 ) and L330: ( C127 . C129 ) = ( C130 `1 ) by L328 , L319 , L320;
consider C131 being (Element of ( FinTrees D65 )) such that L331: C131 = ( D69 . C129 ) and L332: ( C128 . C129 ) = ( C131 `1 ) by L322 , L323 , L326 , L328;
L333: C130 in ( D61 . C120 ) by L319 , L328 , L329 , L4;
L334: C131 in ( D61 . C120 ) by L322 , L326 , L328 , L331 , L4;
thus L335: ( D68 . C129 ) = ( D69 . C129 ) by L334 , L294 , L326 , L329 , L330 , L331 , L332 , L333;
end;
L336: D68 = D69 by L327 , L319 , L322 , L326 , FINSEQ_1:13;
thus L337: thesis by L336 , L312 , L317 , L325;
end;
end;

end;
L296: (for B241 being (Element of ( NAT )) holds S9[ B241 ]) from NAT_1:sch 1(L276 , L293);
let C132 , C133 being (DecoratedTree of D65);
assume that
L297: C132 in ( Union D61 )
and
L298: C133 in ( Union D61 )
and
L299: ( C132 `1 ) = ( C133 `1 );
consider C134 being set such that L300: C134 in ( NAT ) and L301: C132 in ( D61 . C134 ) by L271 , L297 , CARD_5:2;
consider C135 being set such that L302: C135 in ( NAT ) and L303: C133 in ( D61 . C135 ) by L271 , L298 , CARD_5:2;
reconsider D70 = C134 , D71 = C135 as (Element of ( NAT )) by L300 , L302;
deffunc H9(set , set) = { ( [ B242 , F22(B242 , ( pr1 ( roots B243 ) ) , ( pr2 ( roots B243 ) )) ] -tree B243 ) where B242 is (Symbol of F19()) , B243 is (Element of ( ( D61 . $1 ) * )) : (ex B244 being (FinSequence of ( FinTrees [: (the carrier of F19()) , F20() :] )) st (B243 = B244 & B242 ==> ( pr1 ( roots B244 ) ))) };
L304: (for B245 being (Element of ( NAT )) holds ( D61 . B245 ) c= ( D61 . ( B245 + 1 ) ))
proof
let C136 being (Element of ( NAT ));
L305: ( D61 . ( C136 + 1 ) ) = ( ( D61 . C136 ) \/ H9(C136 , ( D61 . C136 )) ) by L273;
thus L306: thesis by L305 , XBOOLE_1:7;
end;
L307: (for B246 , B247 being Nat holds ( D61 . B246 ) c= ( D61 . ( B246 + B247 ) ))
proof
let C137 , C138 being Nat;
reconsider D72 = C137 , D73 = C138 as (Element of ( NAT )) by ORDINAL1:def 12;
L308: D72 <= ( D72 + D73 ) by NAT_1:11;
thus L309: thesis by L308 , L304 , MEASURE2:18;
end;
L310: (D70 <= D71 or D70 >= D71);
L311: ((ex B248 being Nat st D71 = ( D70 + B248 )) or (ex B249 being Nat st D70 = ( D71 + B249 ))) by L310 , NAT_1:10;
L312: (( D61 . D70 ) c= ( D61 . D71 ) or ( D61 . D71 ) c= ( D61 . D70 )) by L311 , L307;
thus L313: thesis by L312 , L296 , L299 , L301 , L303;
end;
definition
let C139 being non  empty DTConstrStr;
func TS C139 -> (Subset of ( FinTrees (the carrier of C139) )) means 
:L314: ((for B250 being (Symbol of C139) holds (B250 in ( Terminals C139 ) implies ( root-tree B250 ) in it)) & (for B251 being (Symbol of C139) holds (for B252 being (FinSequence of it) holds (B251 ==> ( roots B252 ) implies ( B251 -tree B252 ) in it))) & (for B253 being (Subset of ( FinTrees (the carrier of C139) )) holds (((for B254 being (Symbol of C139) holds (B254 in ( Terminals C139 ) implies ( root-tree B254 ) in B253)) & (for B255 being (Symbol of C139) holds (for B256 being (FinSequence of B253) holds (B255 ==> ( roots B256 ) implies ( B255 -tree B256 ) in B253)))) implies it c= B253)));
existence
proof
deffunc H10(set , set) = ( $2 \/ { ( [ B257 , H2(B257 , ( pr1 ( roots B258 ) ) , ( pr2 ( roots B258 ) )) ] -tree B258 ) where B257 is (Symbol of C139) , B258 is (Element of ( $2 * )) : (ex B259 being (FinSequence of ( FinTrees [: (the carrier of C139) , ( NAT ) :] )) st (B258 = B259 & B257 ==> ( pr1 ( roots B259 ) ))) } );
consider C140 being Function such that L315: ( dom C140 ) = ( NAT ) and L316: ( C140 . ( 0 ) ) = { ( root-tree [ B260 , B261 ] ) where B260 is (Symbol of C139) , B261 is (Element of ( NAT )) : ((B260 in ( Terminals C139 ) & B261 = H1(B260)) or (B260 ==> ( {} ) & B261 = H2(B260 , ( {} ) , ( {} )))) } and L317: (for B262 being Nat holds ( C140 . ( B262 + 1 ) ) = H10(B262 , ( C140 . B262 ))) from NAT_1:sch 11;
L318: (for B263 being (Element of ( NAT )) holds ( C140 . ( B263 + 1 ) ) = ( ( C140 . B263 ) \/ { ( [ B264 , H2(B264 , ( pr1 ( roots B265 ) ) , ( pr2 ( roots B265 ) )) ] -tree B265 ) where B264 is (Symbol of C139) , B265 is (Element of ( ( C140 . B263 ) * )) : (ex B266 being (FinSequence of ( FinTrees [: (the carrier of C139) , ( NAT ) :] )) st (B265 = B266 & B264 ==> ( pr1 ( roots B266 ) ))) } )) by L317;
L319: (ex B267 being (Subset of ( FinTrees (the carrier of C139) )) st (B267 = { ( B268 `1 ) where B268 is (Element of ( FinTrees [: (the carrier of C139) , ( NAT ) :] )) : B268 in ( Union C140 ) } & (for B269 being (Symbol of C139) holds (B269 in ( Terminals C139 ) implies ( root-tree B269 ) in B267)) & (for B270 being (Symbol of C139) holds (for B271 being (FinSequence of B267) holds (B270 ==> ( roots B271 ) implies ( B270 -tree B271 ) in B267))) & (for B272 being (Subset of ( FinTrees (the carrier of C139) )) holds (((for B273 being (Symbol of C139) holds (B273 in ( Terminals C139 ) implies ( root-tree B273 ) in B272)) & (for B274 being (Symbol of C139) holds (for B275 being (FinSequence of B272) holds (B274 ==> ( roots B275 ) implies ( B274 -tree B275 ) in B272)))) implies B267 c= B272)))) from DTCSymbols(L315 , L316 , L318);
thus L320: thesis by L319;
end;
uniqueness
proof
let C141 , C142 being (Subset of ( FinTrees (the carrier of C139) ));
assume L321: (not thesis);
L322: C141 c= C142 by L321;
L323: C142 c= C141 by L321;
thus L324: contradiction by L323 , L321 , L322 , XBOOLE_0:def 10;
end;
end;
scheme DTConstrInd { F23() -> non  empty DTConstrStr , P3[set] } : (for B276 being (DecoratedTree of (the carrier of F23())) holds (B276 in ( TS F23() ) implies P3[ B276 ]))
provided
L326: (for B277 being (Symbol of F23()) holds (B277 in ( Terminals F23() ) implies P3[ ( root-tree B277 ) ]))
and
L327: (for B278 being (Symbol of F23()) holds (for B279 being (FinSequence of ( TS F23() )) holds ((B278 ==> ( roots B279 ) & (for B280 being (DecoratedTree of (the carrier of F23())) holds (B280 in ( rng B279 ) implies P3[ B280 ]))) implies P3[ ( B278 -tree B279 ) ])))
proof
deffunc H11(set , set) = ( $2 \/ { ( [ B281 , ( 0 ) ] -tree B282 ) where B281 is (Symbol of F23()) , B282 is (Element of ( $2 * )) : (ex B283 being (FinSequence of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B282 = B283 & B281 ==> ( pr1 ( roots B283 ) ))) } );
consider C143 being Function such that L328: ( dom C143 ) = ( NAT ) and L329: ( C143 . ( 0 ) ) = { ( root-tree [ B284 , B285 ] ) where B284 is (Symbol of F23()) , B285 is (Element of ( NAT )) : ((B284 in ( Terminals F23() ) & B285 = H1(B284)) or (B284 ==> ( {} ) & B285 = H2(B284 , ( {} ) , ( {} )))) } and L330: (for B286 being Nat holds ( C143 . ( B286 + 1 ) ) = H11(B286 , ( C143 . B286 ))) from NAT_1:sch 11;
L331: (for B287 being (Element of ( NAT )) holds ( C143 . ( B287 + 1 ) ) = ( ( C143 . B287 ) \/ { ( [ B288 , H2(B288 , ( pr1 ( roots B289 ) ) , ( pr2 ( roots B289 ) )) ] -tree B289 ) where B288 is (Symbol of F23()) , B289 is (Element of ( ( C143 . B287 ) * )) : (ex B290 being (FinSequence of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B289 = B290 & B288 ==> ( pr1 ( roots B290 ) ))) } )) by L330;
L332: (ex B291 being (Subset of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B291 = ( Union C143 ) & (for B292 being (Symbol of F23()) holds (B292 in ( Terminals F23() ) implies ( root-tree [ B292 , H1(B292) ] ) in B291)) & (for B293 being (Symbol of F23()) holds (for B294 being (FinSequence of B291) holds (B293 ==> ( pr1 ( roots B294 ) ) implies ( [ B293 , H2(B293 , ( pr1 ( roots B294 ) ) , ( pr2 ( roots B294 ) )) ] -tree B294 ) in B291))) & (for B295 being (Subset of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) holds (((for B296 being (Symbol of F23()) holds (B296 in ( Terminals F23() ) implies ( root-tree [ B296 , H1(B296) ] ) in B295)) & (for B297 being (Symbol of F23()) holds (for B298 being (FinSequence of B295) holds (B297 ==> ( pr1 ( roots B298 ) ) implies ( [ B297 , H2(B297 , ( pr1 ( roots B298 ) ) , ( pr2 ( roots B298 ) )) ] -tree B298 ) in B295)))) implies B291 c= B295)))) from DTCMin(L328 , L329 , L331);
consider C144 being (Subset of ( FinTrees (the carrier of F23()) )) such that L333: C144 = { ( B299 `1 ) where B299 is (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) : B299 in ( Union C143 ) } and L334: (for B300 being (Symbol of F23()) holds (B300 in ( Terminals F23() ) implies ( root-tree B300 ) in C144)) and L335: (for B301 being (Symbol of F23()) holds (for B302 being (FinSequence of C144) holds (B301 ==> ( roots B302 ) implies ( B301 -tree B302 ) in C144))) and L336: (for B303 being (Subset of ( FinTrees (the carrier of F23()) )) holds (((for B304 being (Symbol of F23()) holds (B304 in ( Terminals F23() ) implies ( root-tree B304 ) in B303)) & (for B305 being (Symbol of F23()) holds (for B306 being (FinSequence of B303) holds (B305 ==> ( roots B306 ) implies ( B305 -tree B306 ) in B303)))) implies C144 c= B303)) from DTCSymbols(L328 , L329 , L331);
L337: C144 = ( TS F23() ) by L334 , L335 , L336 , L314;
defpred S10[ (Element of ( NAT )) ] means (for B307 being (DecoratedTree of [: (the carrier of F23()) , ( NAT ) :]) holds (B307 in ( C143 . $1 ) implies P3[ ( B307 `1 ) ]));
L338: S10[ ( 0 ) ]
proof
let C145 being (DecoratedTree of [: (the carrier of F23()) , ( NAT ) :]);
set D74 = ( <*> ( TS F23() ) );
assume L339: C145 in ( C143 . ( 0 ) );
consider C146 being (Symbol of F23()), C147 being (Element of ( NAT )) such that L340: C145 = ( root-tree [ C146 , C147 ] ) and L341: ((C146 in ( Terminals F23() ) & C147 = ( 0 )) or (C146 ==> ( roots D74 ) & C147 = ( 0 ))) by L339 , L329 , L22;
L342: ( C145 `1 ) = ( root-tree C146 ) by L340 , TREES_4:25;
L343: ( C146 -tree D74 ) = ( root-tree C146 ) by TREES_4:20;
L344: (for B308 being (DecoratedTree of (the carrier of F23())) holds (B308 in ( rng D74 ) implies P3[ B308 ]));
thus L345: thesis by L344 , L326 , L327 , L341 , L342 , L343;
end;
L346:
now
let C148 being (Element of ( NAT ));
assume L347: S10[ C148 ];
thus L348: S10[ ( C148 + 1 ) ]
proof
let C149 being (DecoratedTree of [: (the carrier of F23()) , ( NAT ) :]);
assume that
L349: C149 in ( C143 . ( C148 + 1 ) )
and
L350: (not P3[ ( C149 `1 ) ]);
L351: C149 in ( ( C143 . C148 ) \/ { ( [ B309 , ( 0 ) ] -tree B310 ) where B309 is (Symbol of F23()) , B310 is (Element of ( ( C143 . C148 ) * )) : (ex B311 being (FinSequence of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B310 = B311 & B309 ==> ( pr1 ( roots B311 ) ))) } ) by L330 , L349;
L352: (C149 in ( C143 . C148 ) or C149 in { ( [ B312 , ( 0 ) ] -tree B313 ) where B312 is (Symbol of F23()) , B313 is (Element of ( ( C143 . C148 ) * )) : (ex B314 being (FinSequence of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B313 = B314 & B312 ==> ( pr1 ( roots B314 ) ))) }) by L351 , XBOOLE_0:def 3;
consider C150 being (Symbol of F23()), C151 being (Element of ( ( C143 . C148 ) * )) such that L353: C149 = ( [ C150 , ( 0 ) ] -tree C151 ) and L354: (ex B315 being (FinSequence of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (C151 = B315 & C150 ==> ( pr1 ( roots B315 ) ))) by L352 , L347 , L350;
L355: ( Union C143 ) = ( union ( rng C143 ) ) by CARD_3:def 4;
L356: ( C143 . C148 ) in ( rng C143 ) by L328 , FUNCT_1:def 3;
L357: ( rng C151 ) c= ( C143 . C148 ) by FINSEQ_1:def 4;
L358: ( C143 . C148 ) c= ( Union C143 ) by L355 , L356 , ZFMISC_1:74;
L359: ( dom C151 ) = ( Seg ( len C151 ) ) by FINSEQ_1:def 3;
defpred S11[ set , set ] means (ex B316 being (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B316 = ( C151 . $1 ) & ( B316 `1 ) = $2 & B316 in ( Union C143 )));
L360: (for B317 being Nat holds (B317 in ( Seg ( len C151 ) ) implies (ex B318 being (Element of ( FinTrees (the carrier of F23()) )) st S11[ B317 , B318 ])))
proof
let C152 being Nat;
assume L361: C152 in ( Seg ( len C151 ) );
L362: ( C151 . C152 ) in ( rng C151 ) by L361 , L359 , FUNCT_1:def 3;
L363: ( rng C151 ) c= ( Union C143 ) by L357 , L358 , XBOOLE_1:1;
L364: ( C151 . C152 ) in ( Union C143 ) by L363 , L362;
reconsider D75 = ( C151 . C152 ) as (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) by L364 , L332;
L365: ( D75 `1 ) = ( ( pr1 ((the carrier of F23()) , ( NAT )) ) * D75 ) by TREES_3:def 12;
L366: ( rng D75 ) c= [: (the carrier of F23()) , ( NAT ) :] by RELAT_1:def 19;
L367: ( dom ( pr1 ((the carrier of F23()) , ( NAT )) ) ) = [: (the carrier of F23()) , ( NAT ) :] by FUNCT_2:def 1;
L368: ( dom ( D75 `1 ) ) = ( dom D75 ) by L367 , L365 , L366 , RELAT_1:27;
reconsider D76 = ( D75 `1 ) as (Element of ( FinTrees (the carrier of F23()) )) by L368 , TREES_3:def 8;
take D76;
take D75;
thus L369: thesis by L362 , L363;
end;
consider C153 being (FinSequence of ( FinTrees (the carrier of F23()) )) such that L370: ( dom C153 ) = ( Seg ( len C151 ) ) and L371: (for B319 being Nat holds (B319 in ( Seg ( len C151 ) ) implies S11[ B319 , ( C153 . B319 ) ])) from FINSEQ_1:sch 5(L360);
reconsider D77 = C151 as (FinSequence of ( Trees [: (the carrier of F23()) , ( NAT ) :] )) by L354 , L1;
L372: ( dom ( roots C153 ) ) = ( dom C153 ) by TREES_3:def 18;
L373: ( dom ( pr1 ( roots D77 ) ) ) = ( dom ( roots D77 ) ) by MCART_1:def 12;
L374: ( dom ( pr1 ( roots D77 ) ) ) = ( dom C153 ) by L373 , L359 , L370 , TREES_3:def 18;
L375:
now
let C154 being Nat;
assume L376: C154 in ( dom C153 );
consider C155 being (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) such that L377: C155 = ( D77 . C154 ) and L378: ( C155 `1 ) = ( C153 . C154 ) and L379: C155 in ( Union C143 ) by L376 , L370 , L371;
reconsider D78 = ( {} ) as (Node of C155) by TREES_1:22;
L380: (ex B320 being DecoratedTree st (B320 = ( C153 . C154 ) & ( ( roots C153 ) . C154 ) = ( B320 . ( {} ) ))) by L376 , TREES_3:def 18;
L381: ( ( roots C153 ) . C154 ) = ( ( C155 . D78 ) `1 ) by L380 , L378 , TREES_3:39;
L382: (ex B321 being DecoratedTree st (B321 = ( D77 . C154 ) & ( ( roots D77 ) . C154 ) = ( B321 . ( {} ) ))) by L359 , L370 , L376 , TREES_3:def 18;
thus L383: ( ( roots C153 ) . C154 ) = ( ( pr1 ( roots D77 ) ) . C154 ) by L382 , L373 , L374 , L376 , L377 , L381 , MCART_1:def 12;
end;
L384: ( roots C153 ) = ( pr1 ( roots D77 ) ) by L375 , L372 , L374 , FINSEQ_1:13;
L385: ( rng C153 ) c= ( TS F23() )
proof
let C156 being set;
assume L386: C156 in ( rng C153 );
consider C157 being set such that L387: C157 in ( dom C153 ) and L388: C156 = ( C153 . C157 ) by L386 , FUNCT_1:def 3;
reconsider D79 = C157 as (Element of ( NAT )) by L387;
L389: (ex B322 being (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B322 = ( D77 . D79 ) & ( B322 `1 ) = ( C153 . D79 ) & B322 in ( Union C143 ))) by L370 , L371 , L387;
thus L390: thesis by L389 , L333 , L337 , L388;
end;
reconsider D80 = C153 as (FinSequence of ( TS F23() )) by L385 , FINSEQ_1:def 4;
L391:
now
let C158 being (DecoratedTree of (the carrier of F23()));
assume L392: C158 in ( rng D80 );
consider C159 being set such that L393: C159 in ( dom D80 ) and L394: C158 = ( D80 . C159 ) by L392 , FUNCT_1:def 3;
reconsider D81 = C159 as (Element of ( NAT )) by L393;
L395: (ex B323 being (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B323 = ( D77 . D81 ) & ( B323 `1 ) = ( D80 . D81 ) & B323 in ( Union C143 ))) by L370 , L371 , L393;
L396: ( D77 . D81 ) in ( rng D77 ) by L359 , L370 , L393 , FUNCT_1:def 3;
thus L397: P3[ C158 ] by L396 , L347 , L357 , L394 , L395;
end;
L398: P3[ ( C150 -tree D80 ) ] by L391 , L327 , L354 , L384;
reconsider D82 = D80 as (FinSequence of ( Trees (the carrier of F23()) )) by L1;
L399:
now
let C160 being (Element of ( NAT ));
assume L400: C160 in ( dom D77 );
L401: (ex B324 being (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) st (B324 = ( D77 . C160 ) & ( B324 `1 ) = ( D82 . C160 ) & B324 in ( Union C143 ))) by L400 , L359 , L371;
thus L402: (for B325 being (DecoratedTree of [: (the carrier of F23()) , ( NAT ) :]) holds (B325 = ( D77 . C160 ) implies ( D82 . C160 ) = ( B325 `1 ))) by L401;
end;
thus L403: contradiction by L399 , L350 , L353 , L359 , L370 , L398 , TREES_4:27;
end;

end;
L349: (for B326 being (Element of ( NAT )) holds S10[ B326 ]) from NAT_1:sch 1(L338 , L346);
let C161 being (DecoratedTree of (the carrier of F23()));
assume L350: C161 in ( TS F23() );
consider C162 being (Element of ( FinTrees [: (the carrier of F23()) , ( NAT ) :] )) such that L351: C161 = ( C162 `1 ) and L352: C162 in ( Union C143 ) by L350 , L333 , L337;
L353: (ex B327 being set st (B327 in ( NAT ) & C162 in ( C143 . B327 ))) by L328 , L352 , CARD_5:2;
thus L354: thesis by L353 , L349 , L351;
end;
scheme DTConstrIndDef { F24() -> non  empty DTConstrStr , F25() -> non  empty set , F26(set) -> (Element of F25()) , F27(set , set , set) -> (Element of F25()) } : (ex B328 being (Function of ( TS F24() ) , F25()) st ((for B329 being (Symbol of F24()) holds (B329 in ( Terminals F24() ) implies ( B328 . ( root-tree B329 ) ) = F26(B329))) & (for B330 being (Symbol of F24()) holds (for B331 being (FinSequence of ( TS F24() )) holds (B330 ==> ( roots B331 ) implies ( B328 . ( B330 -tree B331 ) ) = F27(B330 , ( roots B331 ) , ( B328 * B331 )))))))
proof
set D83 = F24();
deffunc H12((Symbol of D83) , FinSequence) = F27($1 , ( pr1 ( roots $2 ) ) , ( pr2 ( roots $2 ) ));
deffunc H13(set , set) = ( $2 \/ { ( [ B332 , F27(B332 , ( pr1 ( roots B333 ) ) , ( pr2 ( roots B333 ) )) ] -tree B333 ) where B332 is (Symbol of D83) , B333 is (Element of ( $2 * )) : (ex B334 being (FinSequence of ( FinTrees [: (the carrier of D83) , F25() :] )) st (B333 = B334 & B332 ==> ( pr1 ( roots B334 ) ))) } );
consider C163 being Function such that L355: ( dom C163 ) = ( NAT ) and L356: ( C163 . ( 0 ) ) = { ( root-tree [ B335 , B336 ] ) where B335 is (Symbol of D83) , B336 is (Element of F25()) : ((B335 in ( Terminals D83 ) & B336 = F26(B335)) or (B335 ==> ( {} ) & B336 = F27(B335 , ( {} ) , ( {} )))) } and L357: (for B337 being Nat holds ( C163 . ( B337 + 1 ) ) = H13(B337 , ( C163 . B337 ))) from NAT_1:sch 11;
L358: (for B338 being (Element of ( NAT )) holds ( C163 . ( B338 + 1 ) ) = ( ( C163 . B338 ) \/ { ( [ B339 , F27(B339 , ( pr1 ( roots B340 ) ) , ( pr2 ( roots B340 ) )) ] -tree B340 ) where B339 is (Symbol of D83) , B340 is (Element of ( ( C163 . B338 ) * )) : (ex B341 being (FinSequence of ( FinTrees [: (the carrier of D83) , F25() :] )) st (B340 = B341 & B339 ==> ( pr1 ( roots B341 ) ))) } )) by L357;
L359: (ex B342 being (Subset of ( FinTrees (the carrier of D83) )) st (B342 = { ( B343 `1 ) where B343 is (Element of ( FinTrees [: (the carrier of D83) , F25() :] )) : B343 in ( Union C163 ) } & (for B344 being (Symbol of D83) holds (B344 in ( Terminals D83 ) implies ( root-tree B344 ) in B342)) & (for B345 being (Symbol of D83) holds (for B346 being (FinSequence of B342) holds (B345 ==> ( roots B346 ) implies ( B345 -tree B346 ) in B342))) & (for B347 being (Subset of ( FinTrees (the carrier of D83) )) holds (((for B348 being (Symbol of D83) holds (B348 in ( Terminals D83 ) implies ( root-tree B348 ) in B347)) & (for B349 being (Symbol of D83) holds (for B350 being (FinSequence of B347) holds (B349 ==> ( roots B350 ) implies ( B349 -tree B350 ) in B347)))) implies B342 c= B347)))) from DTCSymbols(L355 , L356 , L358);
L360: ( TS D83 ) = { ( B351 `1 ) where B351 is (Element of ( FinTrees [: (the carrier of D83) , F25() :] )) : B351 in ( Union C163 ) } by L359 , L314;
defpred S12[ set , set ] means (for B352 being (DecoratedTree of [: (the carrier of D83) , F25() :]) holds ((B352 in ( Union C163 ) & $1 = ( B352 `1 )) implies $2 = ( ( B352 `2 ) . ( {} ) )));
L361: (for B353 being set holds (B353 in ( TS D83 ) implies (ex B354 being set st (B354 in F25() & S12[ B353 , B354 ]))))
proof
let C164 being set;
assume L362: C164 in ( TS D83 );
consider C165 being (Element of ( FinTrees [: (the carrier of D83) , F25() :] )) such that L363: C164 = ( C165 `1 ) and L364: C165 in ( Union C163 ) by L362 , L360;
reconsider D84 = ( {} ) as (Node of ( C165 `2 )) by TREES_1:22;
take D85 = ( ( C165 `2 ) . D84 );
thus L365: D85 in F25();
L366: (for B355 , B356 being (DecoratedTree of [: (the carrier of D83) , F25() :]) holds ((B355 in ( Union C163 ) & B356 in ( Union C163 ) & ( B355 `1 ) = ( B356 `1 )) implies B355 = B356)) from DTCUniq(L355 , L356 , L358);
let C166 being (DecoratedTree of [: (the carrier of D83) , F25() :]);
assume that
L367: C166 in ( Union C163 )
and
L368: C164 = ( C166 `1 );
thus L369: thesis by L363 , L364 , L366 , L367 , L368;
end;
consider C167 being Function such that L370: (( dom C167 ) = ( TS D83 ) & ( rng C167 ) c= F25()) and L371: (for B357 being set holds (B357 in ( TS D83 ) implies S12[ B357 , ( C167 . B357 ) ])) from FUNCT_1:sch 5(L361);
reconsider D86 = C167 as (Function of ( TS D83 ) , F25()) by L370 , FUNCT_2:def 1 , RELSET_1:4;
take D86;
consider C168 being (Subset of ( FinTrees [: (the carrier of D83) , F25() :] )) such that L372: C168 = ( Union C163 ) and L373: (for B358 being (Symbol of D83) holds (B358 in ( Terminals D83 ) implies ( root-tree [ B358 , F26(B358) ] ) in C168)) and L374: (for B359 being (Symbol of D83) holds (for B360 being (FinSequence of C168) holds (B359 ==> ( pr1 ( roots B360 ) ) implies ( [ B359 , F27(B359 , ( pr1 ( roots B360 ) ) , ( pr2 ( roots B360 ) )) ] -tree B360 ) in C168))) and L375: (for B361 being (Subset of ( FinTrees [: (the carrier of D83) , F25() :] )) holds (((for B362 being (Symbol of D83) holds (B362 in ( Terminals D83 ) implies ( root-tree [ B362 , F26(B362) ] ) in B361)) & (for B363 being (Symbol of D83) holds (for B364 being (FinSequence of B361) holds (B363 ==> ( pr1 ( roots B364 ) ) implies ( [ B363 , F27(B363 , ( pr1 ( roots B364 ) ) , ( pr2 ( roots B364 ) )) ] -tree B364 ) in B361)))) implies C168 c= B361)) from DTCMin(L355 , L356 , L358);
thus L376:now
let C169 being (Symbol of D83);
assume L377: C169 in ( Terminals D83 );
L378: ( ( root-tree [ C169 , F26(C169) ] ) `1 ) = ( root-tree C169 ) by TREES_4:25;
L379: ( ( root-tree [ C169 , F26(C169) ] ) `2 ) = ( root-tree F26(C169) ) by TREES_4:25;
L380: ( root-tree [ C169 , F26(C169) ] ) in ( Union C163 ) by L372 , L373 , L377;
L381: ( root-tree C169 ) in ( TS D83 ) by L380 , L360 , L378;
thus L382: ( D86 . ( root-tree C169 ) ) = ( ( root-tree F26(C169) ) . ( {} ) ) by L381 , L371 , L372 , L373 , L377 , L378 , L379
.= F26(C169) by TREES_4:3;
end;
let C170 being (Symbol of D83);
let C171 being (FinSequence of ( TS D83 ));
set D87 = ( roots C171 );
assume L383: C170 ==> D87;
set D88 = ( D86 * C171 );
L384: ( dom C171 ) = ( Seg ( len C171 ) ) by FINSEQ_1:def 3;
defpred S13[ set , set ] means (ex B365 being (DecoratedTree of [: (the carrier of D83) , F25() :]) st (B365 = $2 & ( B365 `1 ) = ( C171 . $1 ) & B365 in ( Union C163 )));
L385: (for B366 being Nat holds (B366 in ( Seg ( len C171 ) ) implies (ex B367 being (Element of ( FinTrees [: (the carrier of D83) , F25() :] )) st S13[ B366 , B367 ])))
proof
let C172 being Nat;
assume L386: C172 in ( Seg ( len C171 ) );
L387: ( C171 . C172 ) in ( rng C171 ) by L386 , L384 , FUNCT_1:def 3;
L388: ( rng C171 ) c= ( TS D83 ) by FINSEQ_1:def 4;
L389: ( C171 . C172 ) in ( TS D83 ) by L388 , L387;
L390: (ex B368 being (Element of ( FinTrees [: (the carrier of D83) , F25() :] )) st (( C171 . C172 ) = ( B368 `1 ) & B368 in ( Union C163 ))) by L389 , L360;
thus L391: thesis by L390;
end;
consider C173 being (FinSequence of ( FinTrees [: (the carrier of D83) , F25() :] )) such that L392: ( dom C173 ) = ( Seg ( len C171 ) ) and L393: (for B369 being Nat holds (B369 in ( Seg ( len C171 ) ) implies S13[ B369 , ( C173 . B369 ) ])) from FINSEQ_1:sch 5(L385);
L394: ( rng C173 ) c= C168
proof
let C174 being set;
assume L395: C174 in ( rng C173 );
consider C175 being set such that L396: C175 in ( dom C171 ) and L397: C174 = ( C173 . C175 ) by L395 , L384 , L392 , FUNCT_1:def 3;
reconsider D89 = C175 as (Element of ( NAT )) by L396;
L398: (ex B370 being (DecoratedTree of [: (the carrier of D83) , F25() :]) st (B370 = C174 & ( B370 `1 ) = ( C171 . D89 ) & B370 in ( Union C163 ))) by L384 , L393 , L396 , L397;
thus L399: thesis by L398 , L372;
end;
reconsider D90 = C173 as (FinSequence of C168) by L394 , FINSEQ_1:def 4;
L400: ( dom ( roots C171 ) ) = ( dom C171 ) by TREES_3:def 18;
L401: ( dom ( pr1 ( roots D90 ) ) ) = ( dom ( roots D90 ) ) by MCART_1:def 12;
L402: ( dom ( pr2 ( roots D90 ) ) ) = ( dom ( roots D90 ) ) by MCART_1:def 13;
L403: ( dom ( pr1 ( roots D90 ) ) ) = ( dom C171 ) by L384 , L392 , L401 , TREES_3:def 18;
L404: ( dom ( pr2 ( roots D90 ) ) ) = ( dom C171 ) by L384 , L392 , L402 , TREES_3:def 18;
L405:
now
let C176 being Nat;
assume L406: C176 in ( dom C171 );
consider C177 being (DecoratedTree of [: (the carrier of D83) , F25() :]) such that L407: C177 = ( D90 . C176 ) and L408: ( C177 `1 ) = ( C171 . C176 ) and L409: C177 in ( Union C163 ) by L406 , L384 , L393;
reconsider D91 = ( {} ) as (Node of C177) by TREES_1:22;
L410: (ex B371 being DecoratedTree st (B371 = ( C171 . C176 ) & ( ( roots C171 ) . C176 ) = ( B371 . ( {} ) ))) by L406 , TREES_3:def 18;
L411: ( ( roots C171 ) . C176 ) = ( ( C177 . D91 ) `1 ) by L410 , L408 , TREES_3:39;
L412: (ex B372 being DecoratedTree st (B372 = ( D90 . C176 ) & ( ( roots D90 ) . C176 ) = ( B372 . ( {} ) ))) by L384 , L392 , L406 , TREES_3:def 18;
thus L413: ( ( roots C171 ) . C176 ) = ( ( pr1 ( roots D90 ) ) . C176 ) by L412 , L401 , L403 , L406 , L407 , L411 , MCART_1:def 12;
end;
L414: ( roots C171 ) = ( pr1 ( roots D90 ) ) by L405 , L400 , L403 , FINSEQ_1:13;
L415: ( [ C170 , H12(C170 , D90) ] -tree D90 ) in C168 by L414 , L374 , L383;
L416: ( rng D90 ) c= ( FinTrees [: (the carrier of D83) , F25() :] ) by FINSEQ_1:def 4;
L417: ( FinTrees [: (the carrier of D83) , F25() :] ) c= ( Trees [: (the carrier of D83) , F25() :] ) by TREES_3:21;
L418: ( rng D90 ) c= ( Trees [: (the carrier of D83) , F25() :] ) by L417 , L416 , XBOOLE_1:1;
reconsider D92 = D90 as (FinSequence of ( Trees [: (the carrier of D83) , F25() :] )) by L418 , FINSEQ_1:def 4;
L419: ( rng C171 ) c= ( FinTrees (the carrier of D83) ) by FINSEQ_1:def 4;
L420: ( FinTrees (the carrier of D83) ) c= ( Trees (the carrier of D83) ) by TREES_3:21;
L421: ( rng C171 ) c= ( Trees (the carrier of D83) ) by L420 , L419 , XBOOLE_1:1;
reconsider D93 = C171 as (FinSequence of ( Trees (the carrier of D83) )) by L421 , FINSEQ_1:def 4;
L422:
now
let C178 being (Element of ( NAT ));
assume L423: C178 in ( dom D90 );
L424: (ex B373 being (DecoratedTree of [: (the carrier of D83) , F25() :]) st (B373 = ( D90 . C178 ) & ( B373 `1 ) = ( C171 . C178 ) & B373 in ( Union C163 ))) by L423 , L392 , L393;
let C179 being (DecoratedTree of [: (the carrier of D83) , F25() :]);
assume L425: C179 = ( D90 . C178 );
thus L426: ( C171 . C178 ) = ( C179 `1 ) by L425 , L424;
end;
L427: ( ( [ C170 , H12(C170 , D90) ] -tree D92 ) `1 ) = ( C170 -tree D93 ) by L422 , L384 , L392 , TREES_4:27;
L428: ( rng C171 ) c= ( dom D86 ) by L370 , FINSEQ_1:def 4;
L429: ( dom ( D86 * C171 ) ) = ( dom C171 ) by L428 , RELAT_1:27;
L430:
now
let C180 being Nat;
assume L431: C180 in ( dom C171 );
consider C181 being (DecoratedTree of [: (the carrier of D83) , F25() :]) such that L432: C181 = ( D90 . C180 ) and L433: ( C181 `1 ) = ( C171 . C180 ) and L434: C181 in ( Union C163 ) by L431 , L384 , L393;
reconsider D94 = ( {} ) as (Node of C181) by TREES_1:22;
L435: ( C171 . C180 ) in ( rng C171 ) by L431 , FUNCT_1:def 3;
L436: ( D88 . C180 ) = ( D86 . ( C181 `1 ) ) by L429 , L431 , L433 , FUNCT_1:12
.= ( ( C181 `2 ) . ( {} ) ) by L370 , L371 , L428 , L433 , L434 , L435
.= ( ( C181 . D94 ) `2 ) by TREES_3:39;
L437: (ex B374 being DecoratedTree st (B374 = ( D90 . C180 ) & ( ( roots D90 ) . C180 ) = ( B374 . D94 ))) by L384 , L392 , L431 , TREES_3:def 18;
thus L438: ( D88 . C180 ) = ( ( pr2 ( roots D90 ) ) . C180 ) by L437 , L401 , L403 , L431 , L432 , L436 , MCART_1:def 13;
end;
L439: D88 = ( pr2 ( roots D90 ) ) by L430 , L404 , L429 , FINSEQ_1:13;
reconsider D95 = ( {} ) as (Node of ( [ C170 , F27(C170 , D87 , D88) ] -tree D90 )) by TREES_1:22;
L440: ( C170 -tree C171 ) in ( TS D83 ) by L360 , L372 , L415 , L427;
L441: ( D86 . ( C170 -tree C171 ) ) = ( ( ( [ C170 , F27(C170 , D87 , D88) ] -tree D90 ) `2 ) . D95 ) by L440 , L371 , L372 , L374 , L383 , L414 , L427 , L439
.= ( ( ( [ C170 , F27(C170 , D87 , D88) ] -tree D90 ) . D95 ) `2 ) by TREES_3:39
.= ( [ C170 , F27(C170 , D87 , D88) ] `2 ) by TREES_4:def 4;
thus L442: thesis by L441;
end;
scheme DTConstrUniqDef { F28() -> non  empty DTConstrStr , F29() -> non  empty set , F30(set) -> (Element of F29()) , F31(set , set , set) -> (Element of F29()) , F32 , F33() -> (Function of ( TS F28() ) , F29()) } : F32() = F33()
provided
L443: ((for B375 being (Symbol of F28()) holds (B375 in ( Terminals F28() ) implies ( F32() . ( root-tree B375 ) ) = F30(B375))) & (for B376 being (Symbol of F28()) holds (for B377 being (FinSequence of ( TS F28() )) holds (B376 ==> ( roots B377 ) implies ( F32() . ( B376 -tree B377 ) ) = F31(B376 , ( roots B377 ) , ( F32() * B377 ))))))
and
L444: ((for B378 being (Symbol of F28()) holds (B378 in ( Terminals F28() ) implies ( F33() . ( root-tree B378 ) ) = F30(B378))) & (for B379 being (Symbol of F28()) holds (for B380 being (FinSequence of ( TS F28() )) holds (B379 ==> ( roots B380 ) implies ( F33() . ( B379 -tree B380 ) ) = F31(B379 , ( roots B380 ) , ( F33() * B380 ))))))
proof
set D96 = F28();
defpred S14[ set ] means ( F32() . $1 ) = ( F33() . $1 );
L445:
now
let C182 being (Symbol of D96);
assume L446: C182 in ( Terminals D96 );
L447: ( F32() . ( root-tree C182 ) ) = F30(C182) by L446 , L443
.= ( F33() . ( root-tree C182 ) ) by L444 , L446;
thus L448: S14[ ( root-tree C182 ) ] by L447;
end;
L449:
now
let C183 being (Symbol of D96);
let C184 being (FinSequence of ( TS D96 ));
assume that
L450: C183 ==> ( roots C184 )
and
L451: (for B381 being (DecoratedTree of (the carrier of D96)) holds (B381 in ( rng C184 ) implies S14[ B381 ]));
L452: ( rng C184 ) c= ( TS D96 ) by FINSEQ_1:def 4;
L453: ( rng C184 ) c= ( dom F32() ) by L452 , FUNCT_2:def 1;
L454: ( dom ( F32() * C184 ) ) = ( dom C184 ) by L453 , RELAT_1:27;
reconsider D97 = ( F32() * C184 ) as FinSequence;
reconsider D98 = D97 as (FinSequence of F29());
L455: ( rng C184 ) c= ( dom F33() ) by L452 , FUNCT_2:def 1;
L456: ( dom ( F33() * C184 ) ) = ( dom C184 ) by L455 , RELAT_1:27;
L457:
now
let C185 being set;
assume L458: C185 in ( dom C184 );
reconsider D99 = ( C184 . C185 ) as (Element of ( FinTrees (the carrier of D96) )) by L458 , L4;
L459: D99 in ( rng C184 ) by L458 , FUNCT_1:def 3;
L460: ( F32() . D99 ) = ( F33() . D99 ) by L459 , L451;
thus L461: ( ( F32() * C184 ) . C185 ) = ( F32() . D99 ) by L454 , L458 , FUNCT_1:12
.= ( ( F33() * C184 ) . C185 ) by L456 , L458 , L460 , FUNCT_1:12;
end;
L462: ( F32() * C184 ) = ( F33() * C184 ) by L457 , L454 , L456 , FUNCT_1:2;
L463: ( F32() . ( C183 -tree C184 ) ) = F31(C183 , ( roots C184 ) , D98) by L443 , L450
.= ( F33() . ( C183 -tree C184 ) ) by L444 , L450 , L462;
thus L464: S14[ ( C183 -tree C184 ) ] by L463;
end;
L465: (for B382 being (DecoratedTree of (the carrier of D96)) holds (B382 in ( TS D96 ) implies S14[ B382 ])) from DTConstrInd(L445 , L449);
L466: (for B383 being set holds (B383 in ( TS D96 ) implies ( F32() . B383 ) = ( F33() . B383 ))) by L465;
thus L467: thesis by L466 , FUNCT_2:12;
end;
begin
defpred S15[ set , set ] means ($1 = 1 & ($2 = <* ( 0 ) *> or $2 = <* 1 *>));
definition
func PeanoNat ->  strict non  empty DTConstrStr means 
:L468: ((the carrier of it) = { ( 0 ) , 1 } & (for B384 being (Symbol of it) holds (for B385 being (FinSequence of (the carrier of it)) holds (B384 ==> B385 iff (B384 = 1 & (B385 = <* ( 0 ) *> or B385 = <* 1 *>))))));
existence
proof
thus L469: (ex B386 being  strict non  empty DTConstrStr st ((the carrier of B386) = { ( 0 ) , 1 } & (for B387 being (Symbol of B386) holds (for B388 being (FinSequence of (the carrier of B386)) holds (B387 ==> B388 iff S15[ B387 , B388 ]))))) from DTConstrStrEx;
end;
uniqueness
proof
thus L470: (for B389 , B390 being  strict non  empty DTConstrStr holds (((the carrier of B389) = { ( 0 ) , 1 } & (for B391 being (Symbol of B389) holds (for B392 being (FinSequence of (the carrier of B389)) holds (B391 ==> B392 iff S15[ B391 , B392 ]))) & (the carrier of B390) = { ( 0 ) , 1 } & (for B393 being (Symbol of B390) holds (for B394 being (FinSequence of (the carrier of B390)) holds (B393 ==> B394 iff S15[ B393 , B394 ])))) implies B389 = B390)) from DTConstrStrUniq;
end;
end;
set D100 = ( PeanoNat );
L472: (the carrier of D100) = { ( 0 ) , 1 } by L468;
reconsider D101 = ( 0 ) , D102 = 1 as (Symbol of D100) by L472 , TARSKI:def 2;
L473: D102 ==> <* D101 *> by L468;
L474: D102 ==> <* D102 *> by L468;
L475: D102 ==> <* D101 *> by L468;
L476: D102 ==> <* D102 *> by L468;
L477: ( Terminals D100 ) = { B395 where B395 is (Symbol of D100) : (not (ex B396 being FinSequence st B395 ==> B396)) } by LANG1:def 2;
L478:
now
given C186 being FinSequence such that
L479: D101 ==> C186;

L480: [ D101 , C186 ] in (the Rules of D100) by L479 , LANG1:def 1;
L481: C186 in ( (the carrier of D100) * ) by L480 , ZFMISC_1:87;
L482: C186 is (FinSequence of (the carrier of D100)) by L481 , FINSEQ_2:def 3;
thus L483: contradiction by L482 , L479 , L468;
end;
L484: D101 in ( Terminals D100 ) by L478 , L477;
L485: ( Terminals D100 ) c= { D101 }
proof
let C187 being set;
assume L486: C187 in ( Terminals D100 );
consider C188 being (Symbol of D100) such that L487: C187 = C188 and L488: (not (ex B397 being FinSequence st C188 ==> B397)) by L486 , L477;
L489: (C188 = D101 or (C188 = D102 & { D101 , D102 } <> ( {} ))) by L472 , TARSKI:def 2;
thus L490: thesis by L489 , L487 , L488 , L475 , TARSKI:def 1;
end;
L491: ( NonTerminals D100 ) = { B398 where B398 is (Symbol of D100) : (ex B399 being FinSequence st B398 ==> B399) } by LANG1:def 3;
L492: D102 in ( NonTerminals D100 ) by L491 , L475;
L493: { D102 } c= ( NonTerminals D100 ) by L492 , ZFMISC_1:31;
L494: ( NonTerminals D100 ) c= { D102 }
proof
let C189 being set;
assume L495: C189 in ( NonTerminals D100 );
consider C190 being (Symbol of D100) such that L496: C189 = C190 and L497: (ex B400 being FinSequence st C190 ==> B400) by L495 , L491;
L498: (C190 = D101 or C190 = D102) by L472 , TARSKI:def 2;
thus L499: thesis by L498 , L496 , L497 , L478 , TARSKI:def 1;
end;
L500: ( NonTerminals D100 ) = { D102 } by L494 , L493 , XBOOLE_0:def 10;
reconsider D103 = ( TS D100 ) as non  empty (Subset of ( FinTrees (the carrier of D100) )) by L314 , L484;
begin
definition
let C191 being non  empty DTConstrStr;
attr C191 is  with_terminals
means
:L501: ( Terminals C191 ) <> ( {} );
attr C191 is  with_nonterminals
means
:L502: ( NonTerminals C191 ) <> ( {} );
attr C191 is  with_useful_nonterminals
means
:L503: (for B401 being (Symbol of C191) holds (B401 in ( NonTerminals C191 ) implies (ex B402 being (FinSequence of ( TS C191 )) st B401 ==> ( roots B402 ))));
end;
L505: D100 is  with_terminals  with_nonterminals  with_useful_nonterminals
proof
thus L506: ( Terminals D100 ) <> ( {} ) by L484;
thus L507: ( NonTerminals D100 ) <> ( {} ) by L492;
reconsider D104 = ( root-tree D101 ) as (Element of D103) by L314 , L484;
reconsider D105 = <* (D104 qua (Element of (D103 qua non  empty set))) *> as (FinSequence of D103);
reconsider D106 = D105 as (FinSequence of ( TS D100 ));
let C192 being (Symbol of D100);
assume L508: C192 in ( NonTerminals D100 );
L509: C192 = D102 by L508 , L494 , TARSKI:def 1;
take D106;
L510: ( dom <* D104 *> ) = ( Seg 1 ) by FINSEQ_1:38;
L511: ( dom <* D101 *> ) = ( Seg 1 ) by FINSEQ_1:38;
L512:
now
let C193 being (Element of ( NAT ));
assume L513: C193 in ( dom D106 );
reconsider D107 = D104 as DecoratedTree;
take D108 = D107;
L514: C193 = 1 by L510 , L513 , FINSEQ_1:2 , TARSKI:def 1;
L515: ( <* D101 *> . 1 ) = D101 by FINSEQ_1:40;
thus L516: (D108 = ( D106 . C193 ) & ( <* D101 *> . C193 ) = ( D108 . ( {} ) )) by L515 , L514 , FINSEQ_1:40 , TREES_4:3;
end;
thus L517: thesis by L512 , L509 , L510 , L511 , L475 , TREES_3:def 18;
end;
registration
cluster  with_terminals  with_nonterminals  with_useful_nonterminals  strict for non  empty non  empty non  empty non  empty DTConstrStr;
existence by L505;
end;
definition
let C194 being  with_terminals non  empty DTConstrStr;
redefine func Terminals C194 -> non  empty (Subset of C194);

coherence
proof
defpred S16[ (Element of C194) ] means (not (ex B403 being FinSequence st $1 ==> B403));
L519: { B404 where B404 is (Element of C194) : S16[ B404 ] } c= (the carrier of C194) from FRAENKEL:sch 10;
thus L520: thesis by L519 , L501 , LANG1:def 2;
end;
end;
registration
let C195 being  with_terminals non  empty DTConstrStr;
cluster ( TS C195 ) -> non  empty;
coherence
proof
L522: (ex B405 being set st B405 in ( Terminals C195 )) by XBOOLE_0:def 1;
thus L523: thesis by L522 , L314;
end;
end;
registration
let C196 being  with_useful_nonterminals non  empty DTConstrStr;
cluster ( TS C196 ) -> non  empty;
coherence
proof
set D109 = the (Symbol of C196);
per cases ;
suppose L525: (not (ex B406 being FinSequence st D109 ==> B406));

L526: D109 in { B407 where B407 is (Symbol of C196) : (not (ex B408 being FinSequence st B407 ==> B408)) } by L525;
L527: D109 in ( Terminals C196 ) by L526 , LANG1:def 2;
thus L528: thesis by L527 , L314;
end;
suppose L529: (ex B409 being FinSequence st D109 ==> B409);

L530: D109 in { B410 where B410 is (Symbol of C196) : (ex B411 being FinSequence st B410 ==> B411) } by L529;
L531: D109 in ( NonTerminals C196 ) by L530 , LANG1:def 3;
L532: (ex B412 being (FinSequence of ( TS C196 )) st D109 ==> ( roots B412 )) by L531 , L503;
thus L533: thesis by L532 , L314;
end;
end;
end;
definition
let C197 being  with_nonterminals non  empty DTConstrStr;
redefine func NonTerminals C197 -> non  empty (Subset of C197);

coherence
proof
defpred S17[ (Element of C197) ] means (ex B413 being FinSequence st $1 ==> B413);
L536: { B414 where B414 is (Element of C197) : S17[ B414 ] } c= (the carrier of C197) from FRAENKEL:sch 10;
thus L537: thesis by L536 , L502 , LANG1:def 3;
end;
end;
definition
let C198 being  with_terminals non  empty DTConstrStr;
mode Terminal of C198
 is (Element of ( Terminals C198 ));
end;
definition
let C199 being  with_nonterminals non  empty DTConstrStr;
mode NonTerminal of C199
 is (Element of ( NonTerminals C199 ));
end;
definition
let C200 being  with_nonterminals  with_useful_nonterminals non  empty DTConstrStr;
let C201 being (NonTerminal of C200);
mode SubtreeSeq of C201
 -> (FinSequence of ( TS C200 ))
means :L541: C201 ==> ( roots it );
existence by L503;
end;
definition
let C202 being  with_terminals non  empty DTConstrStr;
let C203 being (Terminal of C202);
redefine func root-tree C203 -> (Element of ( TS C202 ));

coherence by L314;
end;
definition
let C204 being  with_nonterminals  with_useful_nonterminals non  empty DTConstrStr;
let C205 being (NonTerminal of C204);
let C206 being (SubtreeSeq of C205);
redefine func C205 -tree C206 -> (Element of ( TS C204 ));

coherence
proof
L544: C205 ==> ( roots C206 ) by L541;
thus L545: thesis by L544 , L314;
end;
end;
theorem
L547: (for B415 being  with_terminals non  empty DTConstrStr holds (for B416 being (Element of ( TS B415 )) holds (for B417 being (Terminal of B415) holds (( B416 . ( {} ) ) = B417 implies B416 = ( root-tree B417 )))))
proof
let C207 being  with_terminals non  empty DTConstrStr;
let C208 being (Element of ( TS C207 ));
let C209 being (Terminal of C207);
assume L548: ( C208 . ( {} ) ) = C209;
defpred S18[ (DecoratedTree of (the carrier of C207)) ] means (for B418 being (Terminal of C207) holds (( $1 . ( {} ) ) = B418 implies $1 = ( root-tree B418 )));
L549: (for B419 being (Symbol of C207) holds (B419 in ( Terminals C207 ) implies S18[ ( root-tree B419 ) ])) by TREES_4:3;
L550:
now
let C210 being (Symbol of C207);
let C211 being (FinSequence of ( TS C207 ));
assume that
L551: C210 ==> ( roots C211 )
and
L552: (for B420 being (DecoratedTree of (the carrier of C207)) holds (B420 in ( rng C211 ) implies S18[ B420 ]));
thus L553: S18[ ( C210 -tree C211 ) ]
proof
let C212 being (Terminal of C207);
assume L554: ( ( C210 -tree C211 ) . ( {} ) ) = C212;
L555: ( ( C210 -tree C211 ) . ( {} ) ) = C210 by TREES_4:def 4;
L556: C212 in ( Terminals C207 );
L557: ( Terminals C207 ) = { B421 where B421 is (Symbol of C207) : (not (ex B422 being FinSequence st B421 ==> B422)) } by LANG1:def 2;
L558: (ex B423 being (Symbol of C207) st (C212 = B423 & (not (ex B424 being FinSequence st B423 ==> B424)))) by L557 , L556;
thus L559: thesis by L558 , L551 , L554 , L555;
end;

end;
L554: (for B425 being (DecoratedTree of (the carrier of C207)) holds (B425 in ( TS C207 ) implies S18[ B425 ])) from DTConstrInd(L549 , L550);
thus L555: thesis by L554 , L548;
end;
theorem
L556: (for B426 being  with_terminals  with_nonterminals non  empty DTConstrStr holds (for B427 being (Element of ( TS B426 )) holds (for B428 being (NonTerminal of B426) holds (( B427 . ( {} ) ) = B428 implies (ex B429 being (FinSequence of ( TS B426 )) st (B427 = ( B428 -tree B429 ) & B428 ==> ( roots B429 )))))))
proof
let C213 being  with_terminals  with_nonterminals non  empty DTConstrStr;
defpred S19[ (DecoratedTree of (the carrier of C213)) ] means (for B430 being (NonTerminal of C213) holds (( $1 . ( {} ) ) = B430 implies (ex B431 being (FinSequence of ( TS C213 )) st ($1 = ( B430 -tree B431 ) & B430 ==> ( roots B431 )))));
L557:
now
let C214 being (Symbol of C213);
assume L558: C214 in ( Terminals C213 );
thus L559: S19[ ( root-tree C214 ) ]
proof
let C215 being (NonTerminal of C213);
assume L560: ( ( root-tree C214 ) . ( {} ) ) = C215;
L561: C214 = C215 by L560 , TREES_4:3;
L562: ( Terminals C213 ) = { B432 where B432 is (Symbol of C213) : (not (ex B433 being FinSequence st B432 ==> B433)) } by LANG1:def 2;
L563: (ex B434 being (Symbol of C213) st (C214 = B434 & (not (ex B435 being FinSequence st B434 ==> B435)))) by L562 , L558;
L564: C215 in ( NonTerminals C213 );
L565: ( NonTerminals C213 ) = { B436 where B436 is (Symbol of C213) : (ex B437 being FinSequence st B436 ==> B437) } by LANG1:def 3;
L566: (ex B438 being (Symbol of C213) st (C215 = B438 & (ex B439 being FinSequence st B438 ==> B439))) by L565 , L564;
thus L567: thesis by L566 , L561 , L563;
end;

end;
L560:
now
let C216 being (Symbol of C213);
let C217 being (FinSequence of ( TS C213 ));
assume that
L561: C216 ==> ( roots C217 )
and
L562: (for B440 being (DecoratedTree of (the carrier of C213)) holds (B440 in ( rng C217 ) implies S19[ B440 ]));
thus L563: S19[ ( C216 -tree C217 ) ]
proof
let C218 being (NonTerminal of C213);
assume L564: ( ( C216 -tree C217 ) . ( {} ) ) = C218;
take D110 = C217;
thus L565: thesis by L561 , L564 , TREES_4:def 4;
end;

end;
L564: (for B441 being (DecoratedTree of (the carrier of C213)) holds (B441 in ( TS C213 ) implies S19[ B441 ])) from DTConstrInd(L557 , L560);
let C219 being (Element of ( TS C213 ));
let C220 being (NonTerminal of C213);
assume L565: ( C219 . ( {} ) ) = C220;
thus L566: thesis by L565 , L564;
end;
begin
registration
cluster ( PeanoNat ) ->  with_terminals  with_nonterminals  with_useful_nonterminals;
coherence by L505;
end;
set D111 = ( PeanoNat );
reconsider D112 = D101 as (Terminal of D111) by L484;
reconsider D113 = D102 as (NonTerminal of D111) by L492;
definition
let C221 being (NonTerminal of ( PeanoNat ));
let C222 being (Element of ( TS ( PeanoNat ) ));
redefine func C221 -tree C222 -> (Element of ( TS ( PeanoNat ) ));

coherence
proof
reconsider D114 = ( {} ) as (Node of C222) by TREES_1:22;
L568: (( C222 . D114 ) = ( 0 ) or ( C222 . D114 ) = 1) by L472 , TARSKI:def 2;
L569: (( roots <* C222 *> ) = <* ( 0 ) *> or ( roots <* C222 *> ) = <* 1 *>) by L568 , L23;
L570: C221 = D113 by L500 , TARSKI:def 1;
L571: ( C221 -tree <* C222 *> ) in ( TS D111 ) by L570 , L569 , L314 , L475 , L476;
thus L572: thesis by L571 , TREES_4:def 5;
end;
end;
definition
let C223 being (FinSequence of ( NAT ));
func plus-one C223 -> (Element of ( NAT )) equals 
( ( C223 . 1 ) + 1 );
coherence;
end;
deffunc H14(set , set , (FinSequence of ( NAT ))) = ( plus-one $3 );
definition
func PN-to-NAT -> (Function of ( TS ( PeanoNat ) ) , ( NAT )) means 
:L575: ((for B442 being (Symbol of ( PeanoNat )) holds (B442 in ( Terminals ( PeanoNat ) ) implies ( it . ( root-tree B442 ) ) = ( 0 ))) & (for B443 being (Symbol of ( PeanoNat )) holds (for B444 being (FinSequence of ( TS ( PeanoNat ) )) holds (B443 ==> ( roots B444 ) implies ( it . ( B443 -tree B444 ) ) = ( plus-one ( it * B444 ) )))));
existence
proof
thus L576: (ex B445 being (Function of ( TS ( PeanoNat ) ) , ( NAT )) st ((for B446 being (Symbol of ( PeanoNat )) holds (B446 in ( Terminals ( PeanoNat ) ) implies ( B445 . ( root-tree B446 ) ) = H1(B446))) & (for B447 being (Symbol of ( PeanoNat )) holds (for B448 being (FinSequence of ( TS ( PeanoNat ) )) holds (B447 ==> ( roots B448 ) implies ( B445 . ( B447 -tree B448 ) ) = H14(B447 , ( roots B448 ) , (( B445 * B448 ) qua (FinSequence of ( NAT ))))))))) from DTConstrIndDef;
end;
uniqueness
proof
let C224 , C225 being (Function of ( TS ( PeanoNat ) ) , ( NAT ));
assume that
L577: ((for B449 being (Symbol of ( PeanoNat )) holds (B449 in ( Terminals ( PeanoNat ) ) implies ( C224 . ( root-tree B449 ) ) = H1(B449))) & (for B450 being (Symbol of ( PeanoNat )) holds (for B451 being (FinSequence of ( TS ( PeanoNat ) )) holds (B450 ==> ( roots B451 ) implies ( C224 . ( B450 -tree B451 ) ) = H14(B450 , ( roots B451 ) , (( C224 * B451 ) qua (FinSequence of ( NAT ))))))))
and
L578: ((for B452 being (Symbol of ( PeanoNat )) holds (B452 in ( Terminals ( PeanoNat ) ) implies ( C225 . ( root-tree B452 ) ) = H1(B452))) & (for B453 being (Symbol of ( PeanoNat )) holds (for B454 being (FinSequence of ( TS ( PeanoNat ) )) holds (B453 ==> ( roots B454 ) implies ( C225 . ( B453 -tree B454 ) ) = H14(B453 , ( roots B454 ) , (( C225 * B454 ) qua (FinSequence of ( NAT ))))))));
thus L579: C224 = C225 from DTConstrUniqDef(L577 , L578);
end;
end;
definition
let C226 being (Element of ( TS ( PeanoNat ) ));
func PNsucc C226 -> (Element of ( TS ( PeanoNat ) )) equals 
( 1 -tree <* C226 *> );
coherence
proof
reconsider D115 = ( {} ) as (Node of C226) by TREES_1:22;
L581: ( roots <* C226 *> ) = <* ( C226 . D115 ) *> by L23;
L582: (( C226 . D115 ) = D112 or ( C226 . D115 ) = D113) by L472 , TARSKI:def 2;
thus L583: thesis by L582 , L581 , L314 , L475 , L476;
end;
end;
deffunc H15(set , (Element of ( TS ( PeanoNat ) ))) = ( PNsucc $2 );
definition
func NAT-to-PN -> (Function of ( NAT ) , ( TS ( PeanoNat ) )) means 
:L585: (( it . ( 0 ) ) = ( root-tree ( 0 ) ) & (for B455 being Nat holds ( it . ( B455 + 1 ) ) = ( PNsucc ( it . B455 ) )));
existence
proof
L586: (ex B456 being (Function of ( NAT ) , ( TS ( PeanoNat ) )) st (( B456 . ( 0 ) ) = ( root-tree D112 ) & (for B457 being Nat holds ( B456 . ( B457 + 1 ) ) = H15(B457 , (( B456 . B457 ) qua (Element of ( TS ( PeanoNat ) ))))))) from NAT_1:sch 12;
thus L587: thesis by L586;
end;
uniqueness
proof
let C227 , C228 being (Function of ( NAT ) , ( TS ( PeanoNat ) ));
assume L588: (not thesis);
L589: ( C227 . ( 0 ) ) = ( root-tree D112 ) by L588;
L590: (for B458 being Nat holds ( C227 . ( B458 + 1 ) ) = H15(B458 , (( C227 . B458 ) qua (Element of ( TS ( PeanoNat ) ))))) by L588;
L591: ( C228 . ( 0 ) ) = ( root-tree D112 ) by L588;
L592: (for B459 being Nat holds ( C228 . ( B459 + 1 ) ) = H15(B459 , (( C228 . B459 ) qua (Element of ( TS ( PeanoNat ) ))))) by L588;
L593: C227 = C228 from NAT_1:sch 16(L589 , L590 , L591 , L592);
thus L594: thesis by L593 , L588;
end;
end;
theorem
L596: (for B460 being (Element of ( TS ( PeanoNat ) )) holds B460 = ( ( NAT-to-PN ) . ( ( PN-to-NAT ) . B460 ) ))
proof
defpred S20[ (DecoratedTree of (the carrier of D111)) ] means $1 = ( ( NAT-to-PN ) . ( ( PN-to-NAT ) . $1 ) );
L597:
now
let C229 being (Symbol of D111);
assume L598: C229 in ( Terminals D111 );
L599: ( ( NAT-to-PN ) . ( ( PN-to-NAT ) . ( root-tree C229 ) ) ) = ( ( NAT-to-PN ) . ( 0 ) ) by L598 , L575
.= ( root-tree D112 ) by L585;
thus L600: S20[ ( root-tree C229 ) ] by L599 , L598 , L485 , TARSKI:def 1;
end;
L601:
now
let C230 being (Symbol of D111);
let C231 being (FinSequence of ( TS D111 ));
assume that
L602: C230 ==> ( roots C231 )
and
L603: (for B461 being (DecoratedTree of (the carrier of D111)) holds (B461 in ( rng C231 ) implies S20[ B461 ]));
L604: C230 <> D112 by L602 , L478;
L605: (( roots C231 ) = <* D112 *> or ( roots C231 ) = <* D113 *>) by L602 , L468;
L606: ( len ( roots C231 ) ) = 1 by L605 , FINSEQ_1:40;
consider C232 being (Element of ( FinTrees (the carrier of D111) )) such that L607: C231 = <* C232 *> and L608: C232 in ( TS D111 ) by L606 , L32;
reconsider D116 = C232 as (Element of ( TS D111 )) by L608;
L609: ( rng C231 ) = { D116 } by L607 , FINSEQ_1:38;
L610: D116 in ( rng C231 ) by L609 , TARSKI:def 1;
L611: D116 = ( ( NAT-to-PN ) . ( ( PN-to-NAT ) . D116 ) ) by L610 , L603;
L612: ( ( PN-to-NAT ) * C231 ) = <* ( ( PN-to-NAT ) . D116 ) *> by L607 , FINSEQ_2:35;
set D117 = ( ( PN-to-NAT ) . D116 );
L613: ( plus-one <* D117 *> ) = ( D117 + 1 ) by FINSEQ_1:40;
L614: ( ( NAT-to-PN ) . ( D117 + 1 ) ) = ( PNsucc D116 ) by L611 , L585
.= ( C230 -tree C231 ) by L604 , L607 , L472 , TARSKI:def 2;
thus L615: S20[ ( C230 -tree C231 ) ] by L614 , L602 , L612 , L613 , L575;
end;
L616: (for B462 being (DecoratedTree of (the carrier of D111)) holds (B462 in ( TS D111 ) implies S20[ B462 ])) from DTConstrInd(L597 , L601);
thus L617: thesis by L616;
end;
L618: ( 0 ) = ( ( PN-to-NAT ) . ( root-tree D112 ) ) by L575
.= ( ( PN-to-NAT ) . ( ( NAT-to-PN ) . ( 0 ) ) ) by L585;
L619:
now
let C233 being (Element of ( NAT ));
assume L620: C233 = ( ( PN-to-NAT ) . ( ( NAT-to-PN ) . C233 ) );
reconsider D118 = ( ( NAT-to-PN ) . C233 ) as (Element of ( TS D111 ));
reconsider D119 = ( {} ) as (Node of D118) by TREES_1:22;
L621: (( D118 . D119 ) = D112 or ( D118 . D119 ) = D113) by L472 , TARSKI:def 2;
L622: ( ( NAT-to-PN ) . ( C233 + 1 ) ) = ( PNsucc ( ( NAT-to-PN ) . C233 ) ) by L585
.= ( D113 -tree <* ( ( NAT-to-PN ) . C233 ) *> );
L623: D113 ==> ( roots <* ( ( NAT-to-PN ) . C233 ) *> ) by L621 , L473 , L474 , L23;
L624: <* ( ( PN-to-NAT ) . ( ( NAT-to-PN ) . C233 ) ) *> = ( ( PN-to-NAT ) * <* ( ( NAT-to-PN ) . C233 ) *> ) by FINSEQ_2:35;
L625: ( ( PN-to-NAT ) . ( D113 -tree <* ( ( NAT-to-PN ) . C233 ) *> ) ) = ( plus-one <* C233 *> ) by L624 , L620 , L623 , L575
.= ( C233 + 1 ) by FINSEQ_1:40;
thus L626: ( C233 + 1 ) = ( ( PN-to-NAT ) . ( ( NAT-to-PN ) . ( C233 + 1 ) ) ) by L625 , L622;
end;
theorem
L627: (for B463 being (Element of ( NAT )) holds B463 = ( ( PN-to-NAT ) . ( ( NAT-to-PN ) . B463 ) ))
proof
defpred S21[ (Element of ( NAT )) ] means $1 = ( ( PN-to-NAT ) . ( ( NAT-to-PN ) . $1 ) );
L628: S21[ ( 0 ) ] by L618;
L629: (for B464 being (Element of ( NAT )) holds (S21[ B464 ] implies S21[ ( B464 + 1 ) ])) by L619;
thus L630: (for B465 being (Element of ( NAT )) holds S21[ B465 ]) from NAT_1:sch 1(L628 , L629);
end;
begin
definition
let C234 being non  empty DTConstrStr;
let C235 being (DecoratedTree of (the carrier of C234));
assume L631: C235 in ( TS C234 );
defpred S22[ set ] means $1 in ( Terminals C234 );
deffunc H16(set) = <* $1 *>;
deffunc H17(set) = ( {} );
L632:
now
let C236 being set;
assume L633: C236 in (the carrier of C234);
thus L634:now
assume L635: S22[ C236 ];
reconsider D120 = ( Terminals C234 ) as non  empty set by L635;
reconsider D121 = C236 as (Element of D120) by L635;
L636: <* D121 *> is (FinSequence of D120);
thus L637: H16(C236) in ( ( Terminals C234 ) * ) by L636;
end;
assume L638: (not S22[ C236 ]);
L639: ( <*> ( Terminals C234 ) ) = ( {} );
thus L640: H17(C236) in ( ( Terminals C234 ) * ) by L639;
end;
consider C237 being (Function of (the carrier of C234) , ( ( Terminals C234 ) * )) such that L641: (for B466 being set holds (B466 in (the carrier of C234) implies ((S22[ B466 ] implies ( C237 . B466 ) = H16(B466)) & ((not S22[ B466 ]) implies ( C237 . B466 ) = H17(B466))))) from FUNCT_2:sch 5(L632);
deffunc H18((Symbol of C234)) = ( C237 . $1 );
deffunc H19(set , set , (FinSequence of ( ( Terminals C234 ) * ))) = ( FlattenSeq $3 );
deffunc H20(set) = <* $1 *>;
func TerminalString C235 -> (FinSequence of ( Terminals C234 )) means 
:L642: (ex B467 being (Function of ( TS C234 ) , ( ( Terminals C234 ) * )) st (it = ( B467 . C235 ) & (for B468 being (Symbol of C234) holds (B468 in ( Terminals C234 ) implies ( B467 . ( root-tree B468 ) ) = <* B468 *>)) & (for B469 being (Symbol of C234) holds (for B470 being (FinSequence of ( TS C234 )) holds (B469 ==> ( roots B470 ) implies ( B467 . ( B469 -tree B470 ) ) = ( FlattenSeq ( B467 * B470 ) ))))));
existence
proof
consider C238 being (Function of ( TS C234 ) , ( ( Terminals C234 ) * )) such that L643: ((for B471 being (Symbol of C234) holds (B471 in ( Terminals C234 ) implies ( C238 . ( root-tree B471 ) ) = H18(B471))) & (for B472 being (Symbol of C234) holds (for B473 being (FinSequence of ( TS C234 )) holds (B472 ==> ( roots B473 ) implies ( C238 . ( B472 -tree B473 ) ) = H19(B472 , ( roots B473 ) , ( C238 * B473 )))))) from DTConstrIndDef;
L644: ( C238 . C235 ) is (Element of ( ( Terminals C234 ) * )) by L631 , FUNCT_2:5;
reconsider D122 = ( C238 . C235 ) as (FinSequence of ( Terminals C234 )) by L644;
take D122;
take C238;
thus L645: D122 = ( C238 . C235 );
thus L646:now
let C239 being (Symbol of C234);
assume L647: C239 in ( Terminals C234 );
L648: ( C238 . ( root-tree C239 ) ) = ( C237 . C239 ) by L647 , L643;
thus L649: ( C238 . ( root-tree C239 ) ) = <* C239 *> by L648 , L641 , L647;
end;
thus L650: thesis by L643;
end;
uniqueness
proof
let C240 , C241 being (FinSequence of ( Terminals C234 ));
given C242 being (Function of ( TS C234 ) , ( ( Terminals C234 ) * )) such that
L651: C240 = ( C242 . C235 )
and
L652: (for B474 being (Symbol of C234) holds (B474 in ( Terminals C234 ) implies ( C242 . ( root-tree B474 ) ) = <* B474 *>))
and
L653: (for B475 being (Symbol of C234) holds (for B476 being (FinSequence of ( TS C234 )) holds (B475 ==> ( roots B476 ) implies ( C242 . ( B475 -tree B476 ) ) = ( FlattenSeq ( C242 * B476 ) ))));

given C243 being (Function of ( TS C234 ) , ( ( Terminals C234 ) * )) such that
L654: C241 = ( C243 . C235 )
and
L655: (for B477 being (Symbol of C234) holds (B477 in ( Terminals C234 ) implies ( C243 . ( root-tree B477 ) ) = <* B477 *>))
and
L656: (for B478 being (Symbol of C234) holds (for B479 being (FinSequence of ( TS C234 )) holds (B478 ==> ( roots B479 ) implies ( C243 . ( B478 -tree B479 ) ) = ( FlattenSeq ( C243 * B479 ) ))));

L657:
now
thus L658:now
let C244 being (Symbol of C234);
assume L659: C244 in ( Terminals C234 );
thus L660: ( C242 . ( root-tree C244 ) ) = <* C244 *> by L659 , L652
.= H18(C244) by L641 , L659;
end;
thus L661: (for B480 being (Symbol of C234) holds (for B481 being (FinSequence of ( TS C234 )) holds (B480 ==> ( roots B481 ) implies ( C242 . ( B480 -tree B481 ) ) = H19(B480 , ( roots B481 ) , ( C242 * B481 ))))) by L653;
end;
L662:
now
thus L663:now
let C245 being (Symbol of C234);
assume L664: C245 in ( Terminals C234 );
thus L665: ( C243 . ( root-tree C245 ) ) = <* C245 *> by L664 , L655
.= H18(C245) by L641 , L664;
end;
thus L666: (for B482 being (Symbol of C234) holds (for B483 being (FinSequence of ( TS C234 )) holds (B482 ==> ( roots B483 ) implies ( C243 . ( B482 -tree B483 ) ) = H19(B482 , ( roots B483 ) , ( C243 * B483 ))))) by L656;
end;
L667: C242 = C243 from DTConstrUniqDef(L657 , L662);
thus L668: thesis by L667 , L651 , L654;
end;
L669:
now
let C246 being set;
assume L670: C246 in (the carrier of C234);
reconsider D123 = C246 as (Element of C234) by L670;
L671: <* D123 *> is (FinSequence of (the carrier of C234));
thus L672: H20(C246) in ( (the carrier of C234) * ) by L671;
end;
consider C247 being (Function of (the carrier of C234) , ( (the carrier of C234) * )) such that L673: (for B484 being set holds (B484 in (the carrier of C234) implies ( C247 . B484 ) = H20(B484))) from FUNCT_2:sch 2(L669);
deffunc H21((Symbol of C234)) = ( C247 . $1 );
deffunc H22((Symbol of C234) , set , (FinSequence of ( (the carrier of C234) * ))) = ( ( C247 . $1 ) ^ ( FlattenSeq $3 ) );
func PreTraversal C235 -> (FinSequence of (the carrier of C234)) means 
:L674: (ex B485 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) st (it = ( B485 . C235 ) & (for B486 being (Symbol of C234) holds (B486 in ( Terminals C234 ) implies ( B485 . ( root-tree B486 ) ) = <* B486 *>)) & (for B487 being (Symbol of C234) holds (for B488 being (FinSequence of ( TS C234 )) holds (for B489 being FinSequence holds ((B489 = ( roots B488 ) & B487 ==> B489) implies (for B490 being (FinSequence of ( (the carrier of C234) * )) holds (B490 = ( B485 * B488 ) implies ( B485 . ( B487 -tree B488 ) ) = ( <* B487 *> ^ ( FlattenSeq B490 ) )))))))));
existence
proof
deffunc H23((Symbol of C234)) = ( C247 . $1 );
deffunc H24((Symbol of C234) , set , (FinSequence of ( (the carrier of C234) * ))) = ( ( C247 . $1 ) ^ ( FlattenSeq $3 ) );
consider C248 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) such that L675: ((for B491 being (Symbol of C234) holds (B491 in ( Terminals C234 ) implies ( C248 . ( root-tree B491 ) ) = H23(B491))) & (for B492 being (Symbol of C234) holds (for B493 being (FinSequence of ( TS C234 )) holds (B492 ==> ( roots B493 ) implies ( C248 . ( B492 -tree B493 ) ) = H24(B492 , ( roots B493 ) , ( C248 * B493 )))))) from DTConstrIndDef;
L676: ( C248 . C235 ) is (Element of ( (the carrier of C234) * )) by L631 , FUNCT_2:5;
reconsider D124 = ( C248 . C235 ) as (FinSequence of (the carrier of C234)) by L676;
take D124;
take C248;
thus L677: D124 = ( C248 . C235 );
thus L678:now
let C249 being (Symbol of C234);
assume L679: C249 in ( Terminals C234 );
L680: ( C248 . ( root-tree C249 ) ) = ( C247 . C249 ) by L679 , L675;
thus L681: ( C248 . ( root-tree C249 ) ) = <* C249 *> by L680 , L673;
end;
let C250 being (Symbol of C234);
let C251 being (FinSequence of ( TS C234 ));
let C252 being FinSequence;
assume that
L682: C252 = ( roots C251 )
and
L683: C250 ==> C252;
let C253 being (FinSequence of ( (the carrier of C234) * ));
assume L684: C253 = ( C248 * C251 );
thus L685: ( C248 . ( C250 -tree C251 ) ) = ( ( C247 . C250 ) ^ ( FlattenSeq C253 ) ) by L684 , L675 , L682 , L683
.= ( <* C250 *> ^ ( FlattenSeq C253 ) ) by L673;
end;
uniqueness
proof
let C254 , C255 being (FinSequence of (the carrier of C234));
given C256 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) such that
L686: C254 = ( C256 . C235 )
and
L687: (for B494 being (Symbol of C234) holds (B494 in ( Terminals C234 ) implies ( C256 . ( root-tree B494 ) ) = <* B494 *>))
and
L688: (for B495 being (Symbol of C234) holds (for B496 being (FinSequence of ( TS C234 )) holds (for B497 being FinSequence holds ((B497 = ( roots B496 ) & B495 ==> B497) implies (for B498 being (FinSequence of ( (the carrier of C234) * )) holds (B498 = ( C256 * B496 ) implies ( C256 . ( B495 -tree B496 ) ) = ( <* B495 *> ^ ( FlattenSeq B498 ) )))))));

given C257 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) such that
L689: C255 = ( C257 . C235 )
and
L690: (for B499 being (Symbol of C234) holds (B499 in ( Terminals C234 ) implies ( C257 . ( root-tree B499 ) ) = <* B499 *>))
and
L691: (for B500 being (Symbol of C234) holds (for B501 being (FinSequence of ( TS C234 )) holds (for B502 being FinSequence holds ((B502 = ( roots B501 ) & B500 ==> B502) implies (for B503 being (FinSequence of ( (the carrier of C234) * )) holds (B503 = ( C257 * B501 ) implies ( C257 . ( B500 -tree B501 ) ) = ( <* B500 *> ^ ( FlattenSeq B503 ) )))))));

L692:
now
thus L693:now
let C258 being (Symbol of C234);
assume L694: C258 in ( Terminals C234 );
thus L695: ( C256 . ( root-tree C258 ) ) = <* C258 *> by L694 , L687
.= H21(C258) by L673;
end;
let C259 being (Symbol of C234);
let C260 being (FinSequence of ( TS C234 ));
assume L696: C259 ==> ( roots C260 );
thus L697: ( C256 . ( C259 -tree C260 ) ) = ( <* C259 *> ^ ( FlattenSeq ( C256 * C260 ) ) ) by L696 , L688
.= H22(C259 , ( roots C260 ) , ( C256 * C260 )) by L673;
end;
L698:
now
thus L699:now
let C261 being (Symbol of C234);
assume L700: C261 in ( Terminals C234 );
thus L701: ( C257 . ( root-tree C261 ) ) = <* C261 *> by L700 , L690
.= H21(C261) by L673;
end;
let C262 being (Symbol of C234);
let C263 being (FinSequence of ( TS C234 ));
assume L702: C262 ==> ( roots C263 );
thus L703: ( C257 . ( C262 -tree C263 ) ) = ( <* C262 *> ^ ( FlattenSeq ( C257 * C263 ) ) ) by L702 , L691
.= H22(C262 , ( roots C263 ) , ( C257 * C263 )) by L673;
end;
L704: C256 = C257 from DTConstrUniqDef(L692 , L698);
thus L705: thesis by L704 , L686 , L689;
end;
deffunc H25((Symbol of C234)) = ( C247 . $1 );
deffunc H26((Symbol of C234) , set , (FinSequence of ( (the carrier of C234) * ))) = ( ( FlattenSeq $3 ) ^ ( C247 . $1 ) );
func PostTraversal C235 -> (FinSequence of (the carrier of C234)) means 
:L706: (ex B504 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) st (it = ( B504 . C235 ) & (for B505 being (Symbol of C234) holds (B505 in ( Terminals C234 ) implies ( B504 . ( root-tree B505 ) ) = <* B505 *>)) & (for B506 being (Symbol of C234) holds (for B507 being (FinSequence of ( TS C234 )) holds (for B508 being FinSequence holds ((B508 = ( roots B507 ) & B506 ==> B508) implies (for B509 being (FinSequence of ( (the carrier of C234) * )) holds (B509 = ( B504 * B507 ) implies ( B504 . ( B506 -tree B507 ) ) = ( ( FlattenSeq B509 ) ^ <* B506 *> )))))))));
existence
proof
consider C264 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) such that L707: ((for B510 being (Symbol of C234) holds (B510 in ( Terminals C234 ) implies ( C264 . ( root-tree B510 ) ) = H25(B510))) & (for B511 being (Symbol of C234) holds (for B512 being (FinSequence of ( TS C234 )) holds (B511 ==> ( roots B512 ) implies ( C264 . ( B511 -tree B512 ) ) = H26(B511 , ( roots B512 ) , ( C264 * B512 )))))) from DTConstrIndDef;
L708: ( C264 . C235 ) is (Element of ( (the carrier of C234) * )) by L631 , FUNCT_2:5;
reconsider D125 = ( C264 . C235 ) as (FinSequence of (the carrier of C234)) by L708;
take D125;
take C264;
thus L709: D125 = ( C264 . C235 );
thus L710:now
let C265 being (Symbol of C234);
assume L711: C265 in ( Terminals C234 );
L712: ( C264 . ( root-tree C265 ) ) = ( C247 . C265 ) by L711 , L707;
thus L713: ( C264 . ( root-tree C265 ) ) = <* C265 *> by L712 , L673;
end;
let C266 being (Symbol of C234);
let C267 being (FinSequence of ( TS C234 ));
let C268 being FinSequence;
assume that
L714: C268 = ( roots C267 )
and
L715: C266 ==> C268;
let C269 being (FinSequence of ( (the carrier of C234) * ));
assume L716: C269 = ( C264 * C267 );
thus L717: ( C264 . ( C266 -tree C267 ) ) = ( ( FlattenSeq C269 ) ^ ( C247 . C266 ) ) by L716 , L707 , L714 , L715
.= ( ( FlattenSeq C269 ) ^ <* C266 *> ) by L673;
end;
uniqueness
proof
let C270 , C271 being (FinSequence of (the carrier of C234));
given C272 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) such that
L718: C270 = ( C272 . C235 )
and
L719: (for B513 being (Symbol of C234) holds (B513 in ( Terminals C234 ) implies ( C272 . ( root-tree B513 ) ) = <* B513 *>))
and
L720: (for B514 being (Symbol of C234) holds (for B515 being (FinSequence of ( TS C234 )) holds (for B516 being FinSequence holds ((B516 = ( roots B515 ) & B514 ==> B516) implies (for B517 being (FinSequence of ( (the carrier of C234) * )) holds (B517 = ( C272 * B515 ) implies ( C272 . ( B514 -tree B515 ) ) = ( ( FlattenSeq B517 ) ^ <* B514 *> )))))));

given C273 being (Function of ( TS C234 ) , ( (the carrier of C234) * )) such that
L721: C271 = ( C273 . C235 )
and
L722: (for B518 being (Symbol of C234) holds (B518 in ( Terminals C234 ) implies ( C273 . ( root-tree B518 ) ) = <* B518 *>))
and
L723: (for B519 being (Symbol of C234) holds (for B520 being (FinSequence of ( TS C234 )) holds (for B521 being FinSequence holds ((B521 = ( roots B520 ) & B519 ==> B521) implies (for B522 being (FinSequence of ( (the carrier of C234) * )) holds (B522 = ( C273 * B520 ) implies ( C273 . ( B519 -tree B520 ) ) = ( ( FlattenSeq B522 ) ^ <* B519 *> )))))));

L724:
now
thus L725:now
let C274 being (Symbol of C234);
assume L726: C274 in ( Terminals C234 );
thus L727: ( C272 . ( root-tree C274 ) ) = <* C274 *> by L726 , L719
.= H25(C274) by L673;
end;
let C275 being (Symbol of C234);
let C276 being (FinSequence of ( TS C234 ));
assume L728: C275 ==> ( roots C276 );
thus L729: ( C272 . ( C275 -tree C276 ) ) = ( ( FlattenSeq ( C272 * C276 ) ) ^ <* C275 *> ) by L728 , L720
.= H26(C275 , ( roots C276 ) , ( C272 * C276 )) by L673;
end;
L730:
now
thus L731:now
let C277 being (Symbol of C234);
assume L732: C277 in ( Terminals C234 );
thus L733: ( C273 . ( root-tree C277 ) ) = <* C277 *> by L732 , L722
.= H25(C277) by L673;
end;
let C278 being (Symbol of C234);
let C279 being (FinSequence of ( TS C234 ));
assume L734: C278 ==> ( roots C279 );
thus L735: ( C273 . ( C278 -tree C279 ) ) = ( ( FlattenSeq ( C273 * C279 ) ) ^ <* C278 *> ) by L734 , L723
.= H26(C278 , ( roots C279 ) , ( C273 * C279 )) by L673;
end;
L736: C272 = C273 from DTConstrUniqDef(L724 , L730);
thus L737: thesis by L736 , L718 , L721;
end;
end;
definition
let C280 being  with_nonterminals non  empty non  empty DTConstrStr;
let C281 being (Symbol of C280);
func TerminalLanguage C281 -> (Subset of ( ( Terminals C280 ) * )) equals 
{ ( TerminalString B523 ) where B523 is (Element of ( FinTrees (the carrier of C280) )) : (B523 in ( TS C280 ) & ( B523 . ( {} ) ) = C281) };
coherence
proof
set D126 = { ( TerminalString B524 ) where B524 is (Element of ( FinTrees (the carrier of C280) )) : (B524 in ( TS C280 ) & ( B524 . ( {} ) ) = C281) };
L739: D126 c= ( ( Terminals C280 ) * )
proof
let C282 being set;
assume L740: C282 in D126;
L741: (ex B525 being (Element of ( FinTrees (the carrier of C280) )) st (C282 = ( TerminalString B525 ) & B525 in ( TS C280 ) & ( B525 . ( {} ) ) = C281)) by L740;
thus L742: thesis by L741 , FINSEQ_1:def 11;
end;
thus L743: thesis by L739;
end;
func PreTraversalLanguage C281 -> (Subset of ( (the carrier of C280) * )) equals 
{ ( PreTraversal B526 ) where B526 is (Element of ( FinTrees (the carrier of C280) )) : (B526 in ( TS C280 ) & ( B526 . ( {} ) ) = C281) };
coherence
proof
set D127 = { ( PreTraversal B527 ) where B527 is (Element of ( FinTrees (the carrier of C280) )) : (B527 in ( TS C280 ) & ( B527 . ( {} ) ) = C281) };
L744: D127 c= ( (the carrier of C280) * )
proof
let C283 being set;
assume L745: C283 in D127;
L746: (ex B528 being (Element of ( FinTrees (the carrier of C280) )) st (C283 = ( PreTraversal B528 ) & B528 in ( TS C280 ) & ( B528 . ( {} ) ) = C281)) by L745;
thus L747: thesis by L746 , FINSEQ_1:def 11;
end;
thus L748: thesis by L744;
end;
func PostTraversalLanguage C281 -> (Subset of ( (the carrier of C280) * )) equals 
{ ( PostTraversal B529 ) where B529 is (Element of ( FinTrees (the carrier of C280) )) : (B529 in ( TS C280 ) & ( B529 . ( {} ) ) = C281) };
coherence
proof
set D128 = { ( PostTraversal B530 ) where B530 is (Element of ( FinTrees (the carrier of C280) )) : (B530 in ( TS C280 ) & ( B530 . ( {} ) ) = C281) };
L749: D128 c= ( (the carrier of C280) * )
proof
let C284 being set;
assume L750: C284 in D128;
L751: (ex B531 being (Element of ( FinTrees (the carrier of C280) )) st (C284 = ( PostTraversal B531 ) & B531 in ( TS C280 ) & ( B531 . ( {} ) ) = C281)) by L750;
thus L752: thesis by L751 , FINSEQ_1:def 11;
end;
thus L753: thesis by L749;
end;
end;
theorem
L755: (for B532 being (DecoratedTree of (the carrier of ( PeanoNat ))) holds (B532 in ( TS ( PeanoNat ) ) implies ( TerminalString B532 ) = <* ( 0 ) *>))
proof
consider C285 being (Function of ( TS D111 ) , ( ( Terminals D111 ) * )) such that L756: ( TerminalString ( root-tree (D112 qua (Symbol of D111)) ) ) = ( C285 . ( root-tree D112 ) ) and L757: (for B533 being (Symbol of D111) holds (B533 in ( Terminals D111 ) implies ( C285 . ( root-tree B533 ) ) = <* B533 *>)) and L758: (for B534 being (Symbol of D111) holds (for B535 being (FinSequence of ( TS D111 )) holds (B534 ==> ( roots B535 ) implies ( C285 . ( B534 -tree B535 ) ) = ( FlattenSeq ( C285 * B535 ) )))) by L642;
defpred S23[ (DecoratedTree of (the carrier of D111)) ] means ( TerminalString $1 ) = <* ( 0 ) *>;
L759:
now
let C286 being (Symbol of D111);
assume L760: C286 in ( Terminals D111 );
L761: C286 = D112 by L760 , L485 , TARSKI:def 1;
thus L762: S23[ ( root-tree C286 ) ] by L761 , L756 , L757;
end;
L763:
now
let C287 being (Symbol of D111);
let C288 being (FinSequence of ( TS D111 ));
assume that
L764: C287 ==> ( roots C288 )
and
L765: (for B536 being (DecoratedTree of (the carrier of D111)) holds (B536 in ( rng C288 ) implies S23[ B536 ]));
L766: ( C287 -tree C288 ) in ( TS D111 ) by L764 , L314;
L767: (( roots C288 ) = <* D112 *> or ( roots C288 ) = <* 1 *>) by L764 , L468;
L768: ( len ( roots C288 ) ) = 1 by L767 , FINSEQ_1:40;
consider C289 being (Element of ( FinTrees (the carrier of D111) )) such that L769: C288 = <* C289 *> and L770: C289 in ( TS D111 ) by L768 , L32;
reconsider D129 = C289 as (Element of ( TS D111 )) by L770;
L771: ( rng C288 ) = { C289 } by L769 , FINSEQ_1:39;
L772: C289 in ( rng C288 ) by L771 , TARSKI:def 1;
L773: ( C285 . D129 ) is (Element of ( ( Terminals D111 ) * ));
L774: ( C285 . D129 ) = ( TerminalString C289 ) by L773 , L757 , L758 , L642
.= <* D112 *> by L765 , L772;
L775: ( C285 * C288 ) = <* ( C285 . C289 ) *> by L769 , FINSEQ_2:35;
L776: ( C285 . ( C287 -tree C288 ) ) = ( FlattenSeq <* ( C285 . D129 ) *> ) by L775 , L758 , L764
.= <* D112 *> by L774 , PRE_POLY:1;
thus L777: S23[ ( C287 -tree C288 ) ] by L776 , L757 , L758 , L766 , L642;
end;
thus L778: (for B537 being (DecoratedTree of (the carrier of D111)) holds (B537 in ( TS D111 ) implies S23[ B537 ])) from DTConstrInd(L759 , L763);
end;
theorem
L779: (for B538 being (Symbol of ( PeanoNat )) holds ( TerminalLanguage B538 ) = { <* ( 0 ) *> })
proof
let C290 being (Symbol of ( PeanoNat ));
L780: (C290 = D113 or C290 = D112) by L472 , TARSKI:def 2;
thus L781:now
let C291 being set;
assume L782: C291 in ( TerminalLanguage C290 );
L783: (ex B539 being (Element of ( FinTrees (the carrier of D111) )) st (C291 = ( TerminalString B539 ) & B539 in ( TS D111 ) & ( B539 . ( {} ) ) = C290)) by L782;
L784: C291 = <* D112 *> by L783 , L755;
thus L785: C291 in { <* ( 0 ) *> } by L784 , TARSKI:def 1;
end;
let C292 being set;
assume L786: C292 in { <* ( 0 ) *> };
L787: C292 = <* D112 *> by L786 , TARSKI:def 1;
reconsider D130 = ( root-tree D112 ) as (Element of (( TS D111 ) qua non  empty set));
reconsider D131 = ( root-tree D112 ) as (Element of ( TS D111 ));
reconsider D132 = <* D130 *> as (FinSequence of ( TS D111 ));
L788: ( D131 . ( {} ) ) = D112 by TREES_4:3;
L789: D113 ==> ( roots <* D131 *> ) by L788 , L475 , L23;
L790: ( D113 -tree <* D130 *> ) in ( TS D111 ) by L789 , L314;
L791: ( TerminalString ( D113 -tree D132 ) ) = C292 by L790 , L787 , L755;
L792: ( ( D113 -tree <* D131 *> ) . ( {} ) ) = D113 by TREES_4:def 4;
L793: ( TerminalString D131 ) = C292 by L787 , L755;
thus L794: thesis by L793 , L780 , L788 , L790 , L791 , L792;
end;
theorem
L795: (for B540 being (Element of ( TS ( PeanoNat ) )) holds ( PreTraversal B540 ) = ( ( ( height ( dom B540 ) ) |-> 1 ) ^ <* ( 0 ) *> ))
proof
consider C293 being (Function of ( TS D111 ) , ( (the carrier of D111) * )) such that L796: ( PreTraversal ( root-tree (D112 qua (Symbol of D111)) ) ) = ( C293 . ( root-tree D112 ) ) and L797: (for B541 being (Symbol of D111) holds (B541 in ( Terminals D111 ) implies ( C293 . ( root-tree B541 ) ) = <* B541 *>)) and L798: (for B542 being (Symbol of D111) holds (for B543 being (FinSequence of ( TS D111 )) holds (for B544 being FinSequence holds ((B544 = ( roots B543 ) & B542 ==> B544) implies (for B545 being (FinSequence of ( (the carrier of D111) * )) holds (B545 = ( C293 * B543 ) implies ( C293 . ( B542 -tree B543 ) ) = ( <* B542 *> ^ ( FlattenSeq B545 ) ))))))) by L674;
reconsider D133 = ( root-tree D112 ) as (Element of ( TS D111 ));
defpred S24[ (DecoratedTree of (the carrier of D111)) ] means (ex B546 being (Element of ( TS D111 )) st ($1 = B546 & ( PreTraversal B546 ) = ( ( ( height ( dom B546 ) ) |-> 1 ) ^ <* ( 0 ) *> )));
L799:
now
let C294 being (Symbol of D111);
assume L800: C294 in ( Terminals D111 );
thus L801: S24[ ( root-tree C294 ) ]
proof
take D134 = D133;
thus L802: ( root-tree C294 ) = D134 by L800 , L485 , TARSKI:def 1;
thus L803: ( PreTraversal D134 ) = <* D112 *> by L796 , L797
.= ( ( {} ) ^ <* D112 *> ) by FINSEQ_1:34
.= ( ( ( 0 ) |-> 1 ) ^ <* ( 0 ) *> )
.= ( ( ( height ( dom D134 ) ) |-> 1 ) ^ <* ( 0 ) *> ) by TREES_1:42 , TREES_4:3;
end;

end;
L802:
now
let C295 being (Symbol of D111);
let C296 being (FinSequence of ( TS D111 ));
assume that
L803: C295 ==> ( roots C296 )
and
L804: (for B547 being (DecoratedTree of (the carrier of D111)) holds (B547 in ( rng C296 ) implies S24[ B547 ]));
reconsider D135 = ( C295 -tree C296 ) as (Element of ( TS D111 )) by L803 , L314;
L805: C295 = D113 by L803 , L468;
L806: (( roots C296 ) = <* D112 *> or ( roots C296 ) = <* 1 *>) by L803 , L468;
L807: ( len ( roots C296 ) ) = 1 by L806 , FINSEQ_1:40;
consider C297 being (Element of ( FinTrees (the carrier of D111) )) such that L808: C296 = <* C297 *> and L809: C297 in ( TS D111 ) by L807 , L32;
reconsider D136 = C297 as (Element of ( TS D111 )) by L809;
L810: ( rng C296 ) = { C297 } by L808 , FINSEQ_1:39;
L811: C297 in ( rng C296 ) by L810 , TARSKI:def 1;
L812: (ex B548 being (Element of ( TS D111 )) st (C297 = B548 & ( PreTraversal B548 ) = ( ( ( height ( dom B548 ) ) |-> 1 ) ^ <* ( 0 ) *> ))) by L811 , L804;
L813: ( C293 . D136 ) is (Element of ( (the carrier of D111) * ));
L814: ( C293 . D136 ) = ( ( ( height ( dom D136 ) ) |-> 1 ) ^ <* ( 0 ) *> ) by L813 , L797 , L798 , L812 , L674;
L815: ( C293 * C296 ) = <* ( C293 . C297 ) *> by L808 , FINSEQ_2:35;
L816: ( C293 . ( C295 -tree C296 ) ) = ( <* C295 *> ^ ( FlattenSeq <* ( C293 . D136 ) *> ) ) by L815 , L798 , L803
.= ( <* C295 *> ^ ( ( ( height ( dom D136 ) ) |-> 1 ) ^ <* ( 0 ) *> ) ) by L814 , PRE_POLY:1
.= ( ( <* C295 *> ^ ( ( height ( dom D136 ) ) |-> 1 ) ) ^ <* ( 0 ) *> ) by FINSEQ_1:32
.= ( ( ( 1 |-> 1 ) ^ ( ( height ( dom D136 ) ) |-> 1 ) ) ^ <* ( 0 ) *> ) by L805 , FINSEQ_2:59
.= ( ( ( ( height ( dom D136 ) ) + 1 ) |-> 1 ) ^ <* ( 0 ) *> ) by FINSEQ_2:123
.= ( ( ( height ( ^ ( dom D136 ) ) ) |-> 1 ) ^ <* ( 0 ) *> ) by TREES_3:80;
L817: ( dom ( C295 -tree D136 ) ) = ( ^ ( dom D136 ) ) by TREES_4:13;
L818: D135 = ( C295 -tree D136 ) by L808 , TREES_4:def 5;
L819: ( C293 . D135 ) is (Element of ( (the carrier of D111) * ));
L820: ( PreTraversal ( C295 -tree C296 ) ) = ( C293 . ( C295 -tree C296 ) ) by L819 , L797 , L798 , L674;
thus L821: S24[ ( C295 -tree C296 ) ] by L820 , L816 , L817 , L818;
end;
L822: (for B549 being (DecoratedTree of (the carrier of D111)) holds (B549 in ( TS D111 ) implies S24[ B549 ])) from DTConstrInd(L799 , L802);
let C298 being (Element of ( TS ( PeanoNat ) ));
L823: S24[ C298 ] by L822;
thus L824: thesis by L823;
end;
theorem
L825: (for B550 being (Symbol of ( PeanoNat )) holds ((B550 = ( 0 ) implies ( PreTraversalLanguage B550 ) = { <* ( 0 ) *> }) & (B550 = 1 implies ( PreTraversalLanguage B550 ) = { ( ( B551 |-> 1 ) ^ <* ( 0 ) *> ) where B551 is (Element of ( NAT )) : B551 <> ( 0 ) })))
proof
let C299 being (Symbol of ( PeanoNat ));
reconsider D137 = ( root-tree D112 ) as (Element of ( TS D111 ));
L826: ( height ( dom ( root-tree ( 0 ) ) ) ) = ( 0 ) by TREES_1:42 , TREES_4:3;
L827: ( PreTraversal D137 ) = ( ( ( 0 ) |-> 1 ) ^ <* D112 *> ) by L826 , L795;
L828: ( PreTraversal D137 ) = ( ( {} ) ^ <* D112 *> ) by L827
.= <* D112 *> by FINSEQ_1:34;
thus L829: (C299 = ( 0 ) implies ( PreTraversalLanguage C299 ) = { <* ( 0 ) *> })
proof
assume L830: C299 = ( 0 );
thus L831:now
let C300 being set;
assume L832: C300 in ( PreTraversalLanguage C299 );
consider C301 being (Element of ( FinTrees (the carrier of D111) )) such that L833: C300 = ( PreTraversal C301 ) and L834: C301 in ( TS D111 ) and L835: ( C301 . ( {} ) ) = D112 by L832 , L830;
L836: C301 = ( root-tree D112 ) by L834 , L835 , L547;
thus L837: C300 in { <* ( 0 ) *> } by L836 , L828 , L833 , TARSKI:def 1;
end;
let C302 being set;
assume L838: C302 in { <* ( 0 ) *> };
L839: C302 = <* D112 *> by L838 , TARSKI:def 1;
L840: ( D137 . ( {} ) ) = D112 by TREES_4:3;
thus L841: thesis by L840 , L828 , L830 , L839;
end;

assume L842: C299 = 1;
thus L843:now
let C303 being set;
assume L844: C303 in ( PreTraversalLanguage C299 );
consider C304 being (Element of ( FinTrees (the carrier of D111) )) such that L845: C303 = ( PreTraversal C304 ) and L846: C304 in ( TS D111 ) and L847: ( C304 . ( {} ) ) = D113 by L844 , L842;
consider C305 being (FinSequence of ( TS D111 )) such that L848: C304 = ( D113 -tree C305 ) and L849: D113 ==> ( roots C305 ) by L846 , L847 , L556;
L850: (( roots C305 ) = <* ( 0 ) *> or ( roots C305 ) = <* 1 *>) by L849 , L468;
L851: ( len ( roots C305 ) ) = 1 by L850 , FINSEQ_1:40;
consider C306 being (Element of ( FinTrees (the carrier of D111) )) such that L852: C305 = <* C306 *> and L853: C306 in ( TS D111 ) by L851 , L32;
L854: C304 = ( D113 -tree C306 ) by L848 , L852 , TREES_4:def 5;
L855: ( dom C304 ) = ( ^ ( dom C306 ) ) by L854 , TREES_4:13;
L856: ( height ( dom C304 ) ) = ( ( height ( dom C306 ) ) + 1 ) by L855 , TREES_3:80;
L857: C303 = ( ( ( height ( dom C304 ) ) |-> 1 ) ^ <* ( 0 ) *> ) by L845 , L846 , L795;
thus L858: C303 in { ( ( B552 |-> 1 ) ^ <* ( 0 ) *> ) where B552 is (Element of ( NAT )) : B552 <> ( 0 ) } by L857 , L856;
end;
let C307 being set;
assume L859: C307 in { ( ( B553 |-> 1 ) ^ <* ( 0 ) *> ) where B553 is (Element of ( NAT )) : B553 <> ( 0 ) };
consider C308 being (Element of ( NAT )) such that L860: C307 = ( ( C308 |-> 1 ) ^ <* ( 0 ) *> ) and L861: C308 <> ( 0 ) by L859;
defpred S25[ (Element of ( NAT )) ] means ($1 <> ( 0 ) implies (ex B554 being (Element of ( TS D111 )) st (( B554 . ( {} ) ) = D113 & ( PreTraversal B554 ) = ( ( $1 |-> 1 ) ^ <* ( 0 ) *> ))));
L862: S25[ ( 0 ) ];
L863:
now
let C309 being (Element of ( NAT ));
assume L864: S25[ C309 ];
thus L865: S25[ ( C309 + 1 ) ]
proof
assume L866: ( C309 + 1 ) <> ( 0 );
per cases ;
suppose L867: C309 <> ( 0 );

consider C310 being (Element of ( TS D111 )) such that L868: ( C310 . ( {} ) ) = D113 and L869: ( PreTraversal C310 ) = ( ( C309 |-> 1 ) ^ <* ( 0 ) *> ) by L867 , L864;
L870: ( PreTraversal C310 ) = ( ( ( height ( dom C310 ) ) |-> 1 ) ^ <* ( 0 ) *> ) by L795;
L871: ( C309 |-> 1 ) = ( ( height ( dom C310 ) ) |-> 1 ) by L870 , L869 , FINSEQ_1:33;
L872: ( len ( C309 |-> 1 ) ) = C309 by CARD_1:def 7;
L873: ( height ( dom C310 ) ) = C309 by L872 , L871 , CARD_1:def 7;
take D138 = ( D113 -tree C310 );
L874: D138 = ( D113 -tree <* C310 *> ) by TREES_4:def 5;
L875: ( height ( dom D138 ) ) = ( height ( ^ ( dom C310 ) ) ) by TREES_4:13
.= ( C309 + 1 ) by L873 , TREES_3:80;
thus L876: thesis by L875 , L874 , L795 , TREES_4:def 4;
end;
suppose L877: C309 = ( 0 );

take D139 = ( D113 -tree D137 );
L878: D139 = ( D113 -tree <* D137 *> ) by TREES_4:def 5;
L879: ( height ( dom D139 ) ) = ( height ( ^ ( dom D137 ) ) ) by TREES_4:13
.= ( ( height ( dom D137 ) ) + 1 ) by TREES_3:80
.= ( C309 + 1 ) by L877 , TREES_1:42 , TREES_4:3;
thus L880: thesis by L879 , L878 , L795 , TREES_4:def 4;
end;
end;

end;
L866: (for B555 being (Element of ( NAT )) holds S25[ B555 ]) from NAT_1:sch 1(L862 , L863);
L867: (ex B556 being (Element of ( TS D111 )) st (( B556 . ( {} ) ) = D113 & ( PreTraversal B556 ) = ( ( C308 |-> 1 ) ^ <* ( 0 ) *> ))) by L866 , L861;
thus L868: thesis by L867 , L842 , L860;
end;
theorem
L869: (for B557 being (Element of ( TS ( PeanoNat ) )) holds ( PostTraversal B557 ) = ( <* ( 0 ) *> ^ ( ( height ( dom B557 ) ) |-> 1 ) ))
proof
consider C311 being (Function of ( TS D111 ) , ( (the carrier of D111) * )) such that L870: ( PostTraversal ( root-tree (D112 qua (Symbol of D111)) ) ) = ( C311 . ( root-tree D112 ) ) and L871: (for B558 being (Symbol of D111) holds (B558 in ( Terminals D111 ) implies ( C311 . ( root-tree B558 ) ) = <* B558 *>)) and L872: (for B559 being (Symbol of D111) holds (for B560 being (FinSequence of ( TS D111 )) holds (for B561 being FinSequence holds ((B561 = ( roots B560 ) & B559 ==> B561) implies (for B562 being (FinSequence of ( (the carrier of D111) * )) holds (B562 = ( C311 * B560 ) implies ( C311 . ( B559 -tree B560 ) ) = ( ( FlattenSeq B562 ) ^ <* B559 *> ))))))) by L706;
reconsider D140 = ( root-tree D112 ) as (Element of ( TS D111 ));
defpred S26[ (DecoratedTree of (the carrier of D111)) ] means (ex B563 being (Element of ( TS D111 )) st ($1 = B563 & ( PostTraversal B563 ) = ( <* ( 0 ) *> ^ ( ( height ( dom B563 ) ) |-> 1 ) )));
L873:
now
let C312 being (Symbol of D111);
assume L874: C312 in ( Terminals D111 );
thus L875: S26[ ( root-tree C312 ) ]
proof
take D141 = D140;
thus L876: ( root-tree C312 ) = D141 by L874 , L485 , TARSKI:def 1;
thus L877: ( PostTraversal D141 ) = <* D112 *> by L870 , L871
.= ( <* D112 *> ^ ( {} ) ) by FINSEQ_1:34
.= ( <* ( 0 ) *> ^ ( ( 0 ) |-> 1 ) )
.= ( <* ( 0 ) *> ^ ( ( height ( dom D141 ) ) |-> 1 ) ) by TREES_1:42 , TREES_4:3;
end;

end;
L876:
now
let C313 being (Symbol of D111);
let C314 being (FinSequence of ( TS D111 ));
assume that
L877: C313 ==> ( roots C314 )
and
L878: (for B564 being (DecoratedTree of (the carrier of D111)) holds (B564 in ( rng C314 ) implies S26[ B564 ]));
reconsider D142 = ( C313 -tree C314 ) as (Element of ( TS D111 )) by L877 , L314;
L879: C313 = D113 by L877 , L468;
L880: (( roots C314 ) = <* D112 *> or ( roots C314 ) = <* 1 *>) by L877 , L468;
L881: ( len ( roots C314 ) ) = 1 by L880 , FINSEQ_1:40;
consider C315 being (Element of ( FinTrees (the carrier of D111) )) such that L882: C314 = <* C315 *> and L883: C315 in ( TS D111 ) by L881 , L32;
reconsider D143 = C315 as (Element of ( TS D111 )) by L883;
L884: ( rng C314 ) = { C315 } by L882 , FINSEQ_1:39;
L885: C315 in ( rng C314 ) by L884 , TARSKI:def 1;
L886: (ex B565 being (Element of ( TS D111 )) st (C315 = B565 & ( PostTraversal B565 ) = ( <* D112 *> ^ ( ( height ( dom B565 ) ) |-> 1 ) ))) by L885 , L878;
L887: ( C311 . D143 ) is (Element of ( (the carrier of D111) * ));
L888: ( C311 . D143 ) = ( <* D112 *> ^ ( ( height ( dom D143 ) ) |-> 1 ) ) by L887 , L871 , L872 , L886 , L706;
L889: ( C311 * C314 ) = <* ( C311 . C315 ) *> by L882 , FINSEQ_2:35;
L890: ( C311 . ( C313 -tree C314 ) ) = ( ( FlattenSeq <* ( C311 . D143 ) *> ) ^ <* C313 *> ) by L889 , L872 , L877
.= ( ( <* D112 *> ^ ( ( height ( dom D143 ) ) |-> 1 ) ) ^ <* C313 *> ) by L888 , PRE_POLY:1
.= ( <* D112 *> ^ ( ( ( height ( dom D143 ) ) |-> 1 ) ^ <* C313 *> ) ) by FINSEQ_1:32
.= ( <* D112 *> ^ ( ( ( height ( dom D143 ) ) |-> 1 ) ^ ( 1 |-> 1 ) ) ) by L879 , FINSEQ_2:59
.= ( <* D112 *> ^ ( ( ( height ( dom D143 ) ) + 1 ) |-> 1 ) ) by FINSEQ_2:123
.= ( <* D112 *> ^ ( ( height ( ^ ( dom D143 ) ) ) |-> 1 ) ) by TREES_3:80;
L891: ( dom ( C313 -tree D143 ) ) = ( ^ ( dom D143 ) ) by TREES_4:13;
L892: D142 = ( C313 -tree D143 ) by L882 , TREES_4:def 5;
L893: ( C311 . D142 ) is (Element of ( (the carrier of D111) * ));
L894: ( PostTraversal ( C313 -tree C314 ) ) = ( C311 . ( C313 -tree C314 ) ) by L893 , L871 , L872 , L706;
thus L895: S26[ ( C313 -tree C314 ) ] by L894 , L890 , L891 , L892;
end;
L896: (for B566 being (DecoratedTree of (the carrier of D111)) holds (B566 in ( TS D111 ) implies S26[ B566 ])) from DTConstrInd(L873 , L876);
let C316 being (Element of ( TS ( PeanoNat ) ));
L897: S26[ C316 ] by L896;
thus L898: thesis by L897;
end;
theorem
L899: (for B567 being (Symbol of ( PeanoNat )) holds ((B567 = ( 0 ) implies ( PostTraversalLanguage B567 ) = { <* ( 0 ) *> }) & (B567 = 1 implies ( PostTraversalLanguage B567 ) = { ( <* ( 0 ) *> ^ ( B568 |-> 1 ) ) where B568 is (Element of ( NAT )) : B568 <> ( 0 ) })))
proof
let C317 being (Symbol of ( PeanoNat ));
reconsider D144 = ( root-tree D112 ) as (Element of ( TS D111 ));
L900: ( height ( dom ( root-tree ( 0 ) ) ) ) = ( 0 ) by TREES_1:42 , TREES_4:3;
L901: ( PostTraversal D144 ) = ( <* ( 0 ) *> ^ ( ( 0 ) |-> 1 ) ) by L900 , L869;
L902: ( PostTraversal D144 ) = ( <* D112 *> ^ ( {} ) ) by L901
.= <* D112 *> by FINSEQ_1:34;
thus L903: (C317 = ( 0 ) implies ( PostTraversalLanguage C317 ) = { <* ( 0 ) *> })
proof
assume L904: C317 = ( 0 );
thus L905:now
let C318 being set;
assume L906: C318 in ( PostTraversalLanguage C317 );
consider C319 being (Element of ( FinTrees (the carrier of D111) )) such that L907: C318 = ( PostTraversal C319 ) and L908: C319 in ( TS D111 ) and L909: ( C319 . ( {} ) ) = D112 by L906 , L904;
L910: C319 = ( root-tree D112 ) by L908 , L909 , L547;
thus L911: C318 in { <* ( 0 ) *> } by L910 , L902 , L907 , TARSKI:def 1;
end;
let C320 being set;
assume L912: C320 in { <* ( 0 ) *> };
L913: C320 = <* D112 *> by L912 , TARSKI:def 1;
L914: ( D144 . ( {} ) ) = D112 by TREES_4:3;
thus L915: thesis by L914 , L902 , L904 , L913;
end;

assume L916: C317 = 1;
thus L917:now
let C321 being set;
assume L918: C321 in ( PostTraversalLanguage C317 );
consider C322 being (Element of ( FinTrees (the carrier of D111) )) such that L919: C321 = ( PostTraversal C322 ) and L920: C322 in ( TS D111 ) and L921: ( C322 . ( {} ) ) = D113 by L918 , L916;
consider C323 being (FinSequence of ( TS D111 )) such that L922: C322 = ( D113 -tree C323 ) and L923: D113 ==> ( roots C323 ) by L920 , L921 , L556;
L924: (( roots C323 ) = <* ( 0 ) *> or ( roots C323 ) = <* 1 *>) by L923 , L468;
L925: ( len ( roots C323 ) ) = 1 by L924 , FINSEQ_1:40;
consider C324 being (Element of ( FinTrees (the carrier of D111) )) such that L926: C323 = <* C324 *> and L927: C324 in ( TS D111 ) by L925 , L32;
L928: C322 = ( D113 -tree C324 ) by L922 , L926 , TREES_4:def 5;
L929: ( dom C322 ) = ( ^ ( dom C324 ) ) by L928 , TREES_4:13;
L930: ( height ( dom C322 ) ) = ( ( height ( dom C324 ) ) + 1 ) by L929 , TREES_3:80;
L931: C321 = ( <* ( 0 ) *> ^ ( ( height ( dom C322 ) ) |-> 1 ) ) by L919 , L920 , L869;
thus L932: C321 in { ( <* ( 0 ) *> ^ ( B569 |-> 1 ) ) where B569 is (Element of ( NAT )) : B569 <> ( 0 ) } by L931 , L930;
end;
let C325 being set;
assume L933: C325 in { ( <* ( 0 ) *> ^ ( B570 |-> 1 ) ) where B570 is (Element of ( NAT )) : B570 <> ( 0 ) };
consider C326 being (Element of ( NAT )) such that L934: C325 = ( <* ( 0 ) *> ^ ( C326 |-> 1 ) ) and L935: C326 <> ( 0 ) by L933;
defpred S27[ (Element of ( NAT )) ] means ($1 <> ( 0 ) implies (ex B571 being (Element of ( TS D111 )) st (( B571 . ( {} ) ) = D113 & ( PostTraversal B571 ) = ( <* ( 0 ) *> ^ ( $1 |-> 1 ) ))));
L936: S27[ ( 0 ) ];
L937:
now
let C327 being (Element of ( NAT ));
assume L938: S27[ C327 ];
thus L939: S27[ ( C327 + 1 ) ]
proof
assume L940: ( C327 + 1 ) <> ( 0 );
per cases ;
suppose L941: C327 <> ( 0 );

consider C328 being (Element of ( TS D111 )) such that L942: ( C328 . ( {} ) ) = D113 and L943: ( PostTraversal C328 ) = ( <* ( 0 ) *> ^ ( C327 |-> 1 ) ) by L941 , L938;
L944: ( PostTraversal C328 ) = ( <* ( 0 ) *> ^ ( ( height ( dom C328 ) ) |-> 1 ) ) by L869;
L945: ( C327 |-> 1 ) = ( ( height ( dom C328 ) ) |-> 1 ) by L944 , L943 , FINSEQ_1:33;
L946: ( len ( C327 |-> 1 ) ) = C327 by CARD_1:def 7;
L947: ( height ( dom C328 ) ) = C327 by L946 , L945 , CARD_1:def 7;
take D145 = ( D113 -tree C328 );
L948: D145 = ( D113 -tree <* C328 *> ) by TREES_4:def 5;
L949: ( height ( dom D145 ) ) = ( height ( ^ ( dom C328 ) ) ) by TREES_4:13
.= ( C327 + 1 ) by L947 , TREES_3:80;
thus L950: thesis by L949 , L948 , L869 , TREES_4:def 4;
end;
suppose L951: C327 = ( 0 );

take D146 = ( D113 -tree D144 );
L952: D146 = ( D113 -tree <* D144 *> ) by TREES_4:def 5;
L953: ( height ( dom D146 ) ) = ( height ( ^ ( dom D144 ) ) ) by TREES_4:13
.= ( ( height ( dom D144 ) ) + 1 ) by TREES_3:80
.= ( C327 + 1 ) by L951 , TREES_1:42 , TREES_4:3;
thus L954: thesis by L953 , L952 , L869 , TREES_4:def 4;
end;
end;

end;
L940: (for B572 being (Element of ( NAT )) holds S27[ B572 ]) from NAT_1:sch 1(L936 , L937);
L941: (ex B573 being (Element of ( TS D111 )) st (( B573 . ( {} ) ) = D113 & ( PostTraversal B573 ) = ( <* ( 0 ) *> ^ ( C326 |-> 1 ) ))) by L940 , L935;
thus L942: thesis by L941 , L916 , L934;
end;
