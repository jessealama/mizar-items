:: Dilworth's Decomposition Theorem for Posets
::  by Piotr Rudnicki
::
:: Received September 17, 2009
:: Copyright (c) 2009-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, FINSET_1, XBOOLE_0, CARD_1, XXREAL_0, SUBSET_1, TARSKI,
      ORDINAL1, SETFAM_1, ZFMISC_1, EQREL_1, NAT_1, FUNCT_1, FINSEQ_1, ARYTM_3,
      RELAT_1, ORDERS_2, RELAT_2, COMBGRAS, STRUCT_0, ORDERS_1, CIRCUIT2,
      GROUP_10, RAMSEY_1, JORDAN4, WAYBEL_0, WAYBEL_4, YELLOW_0, FUNCT_2,
      LEXBFS, ARYTM_1, UPROOTS, CARD_3, FINSEQ_2, VALUED_0, SQUARE_1, ORDINAL2,
      XREAL_0, DILWORTH;
 notations TARSKI, RELAT_1, RELAT_2, RELSET_1, FINSET_1, SETFAM_1, XBOOLE_0,
      SUBSET_1, CARD_1, STRUCT_0, WAYBEL_0, WAYBEL_4, ORDERS_2, ORDINAL1,
      EQREL_1, FUNCT_1, FUNCT_2, NUMBERS, XREAL_0, XXREAL_0, YELLOW_0,
      XCMPLX_0, ZFMISC_1, LEXBFS, FINSEQ_1, SQUARE_1, UPROOTS, RVSUM_1, INT_5,
      FINSEQ_2, VALUED_0, GROUP_10, RAMSEY_1, DOMAIN_1;
 constructors DOMAIN_1, LEXBFS, WAYBEL_4, SQUARE_1, UPROOTS, WSIERP_1, INT_5,
      SEQ_1, RAMSEY_1, RELSET_1, BINOP_2;
 registrations STRUCT_0, XXREAL_0, RELSET_1, CARD_1, YELLOW_0, XREAL_0,
      FINSET_1, XBOOLE_0, NAT_1, INT_1, YELLOW_2, EQREL_1, FINSEQ_1, FUNCT_1,
      SUBSET_1, ORDINAL1, PEPIN, RVSUM_1, UPROOTS, FUNCT_2, FINSEQ_2, NUMBERS,
      PNPROC_1, RELAT_1, VALUED_0, ZFMISC_1, ORDERS_2;
 requirements ARITHM, SUBSET, BOOLE, NUMERALS, REAL;
 definitions TARSKI, STRUCT_0, FUNCT_1, RELAT_2, WAYBEL_0, XBOOLE_0, SQUARE_1,
      VALUED_0, ORDERS_2, GROUP_10;
 theorems CARD_1, CARD_2, NAT_1, XREAL_1, YELLOW_0, XBOOLE_0, TARSKI, ORDERS_2,
      XBOOLE_1, ZFMISC_1, EQREL_1, INT_1, EULER_1, ENUMSET1, FUNCT_1, FUNCT_2,
      LEXBFS, FINSEQ_4, RELAT_2, BAGORDER, WAYBEL_0, WAYBEL_4, XXREAL_0,
      RELAT_1, ORDERS_1, FINSET_1, ORDINAL1, PUA2MSS1, DICKSON, FINSEQ_1,
      INT_5, RVSUM_1, UPROOTS, FINSEQ_2, CARD_3, FINSEQ_3, GRFUNC_1, RAMSEY_1,
      SUBSET_1, PRE_POLY, XTUPLE_0;
 schemes NAT_1, FUNCT_2, XBOOLE_0, CLASSES1, FRAENKEL, TREES_2, RELSET_1;

begin
scheme FraenkelFinCard1 { F1() ->  finite non  empty set , P1[set] , F2() ->  finite set , F3(set) -> set } : ( card F2() ) <= ( card F1() )
provided
L1: F2() = { F3(B1) where B1 is (Element of F1()) : P1[ B1 ] }
proof
L2: F1() is  finite;
set D1 = { F3(B2) where B2 is (Element of F1()) : B2 in F1() };
L3: D1 is  finite from FRAENKEL:sch 21(L2);
reconsider D2 = D1 as  finite set by L3;
L4: D2 = { F3(B3) where B3 is (Element of F1()) : B3 in F1() };
L5: ( card D2 ) <= ( card F1() ) from TREES_2:sch 3(L4);
L6: F2() c= D2
proof
let C1 being set;
assume L7: C1 in F2();
L8: (ex B4 being (Element of F1()) st (C1 = F3(B4) & P1[ B4 ])) by L7 , L1;
thus L9: C1 in D2 by L8;
end;
L10: ( card F2() ) <= ( card D2 ) by L6 , NAT_1:43;
thus L11: ( card F2() ) <= ( card F1() ) by L10 , L5 , XXREAL_0:2;
end;
theorem
L12: (for B5 , B6 , B7 being set holds ((not B7 in B5) implies ( B5 \ ( B6 \/ { B7 } ) ) = ( B5 \ B6 )))
proof
let C2 , C3 , C4 being set;
assume L13: (not C4 in C2);
L14: (not C4 in ( C2 \ C3 )) by L13;
thus L15: ( C2 \ ( C3 \/ { C4 } ) ) = ( ( C2 \ C3 ) \ { C4 } ) by XBOOLE_1:41
.= ( C2 \ C3 ) by L14 , ZFMISC_1:57;
end;
theorem
L16: (for B8 , B9 being set holds (for B10 being (Subset-Family of B8) holds (for B11 being (Subset-Family of B9) holds ( B10 \/ B11 ) is (Subset-Family of ( B8 \/ B9 )))))
proof
let C5 , C6 being set;
let C7 being (Subset-Family of C5);
let C8 being (Subset-Family of C6);
L17: ( C7 \/ C8 ) c= ( ( bool C5 ) \/ ( bool C6 ) ) by XBOOLE_1:13;
L18: ( ( bool C5 ) \/ ( bool C6 ) ) c= ( bool ( C5 \/ C6 ) ) by ZFMISC_1:69;
thus L19: ( C7 \/ C8 ) is (Subset-Family of ( C5 \/ C6 )) by L18 , L17 , XBOOLE_1:1;
end;
theorem
L20: (for B12 , B13 being set holds (for B14 being (a_partition of B12) holds (for B15 being (a_partition of B13) holds (B12 misses B13 implies ( B14 \/ B15 ) is (a_partition of ( B12 \/ B13 ))))))
proof
let C9 , C10 being set;
let C11 being (a_partition of C9);
let C12 being (a_partition of C10);
assume that
L21: C9 misses C10;
set D3 = ( C11 \/ C12 );
set D4 = ( C9 \/ C10 );
L22: D3 is (Subset-Family of D4) by L16;
L23: ( union D3 ) = ( ( union C11 ) \/ ( union C12 ) ) by ZFMISC_1:78
.= ( C9 \/ ( union C12 ) ) by EQREL_1:def 4
.= ( C9 \/ C10 ) by EQREL_1:def 4;
L24:
now
let C13 being (Subset of D4);
assume that
L25: C13 in D3;
L26: (C13 in C11 or C13 in C12) by L25 , XBOOLE_0:def 3;
thus L27: C13 <> ( {} ) by L26 , EQREL_1:def 4;
let C14 being (Subset of D4);
assume that
L28: C14 in D3;
per cases  by L25 , L28 , XBOOLE_0:def 3;
suppose L29: ((C13 in C11 & C14 in C11) or (C13 in C12 & C14 in C12));

thus L30: (C13 = C14 or C13 misses C14) by L29 , EQREL_1:def 4;
end;
suppose L31: ((C13 in C11 & C14 in C12) or (C13 in C12 & C14 in C11));

thus L32: (C13 = C14 or C13 misses C14) by L31 , L21 , XBOOLE_1:64;
end;
end;
thus L34: ( C11 \/ C12 ) is (a_partition of ( C9 \/ C10 )) by L24 , L22 , L23 , EQREL_1:def 4;
end;
theorem
L35: (for B16 , B17 being set holds (for B18 being (a_partition of B17) holds (B17 c< B16 implies ( B18 \/ { ( B16 \ B17 ) } ) is (a_partition of B16))))
proof
let C15 , C16 being set;
let C17 being (a_partition of C16);
assume L36: C16 c< C15;
L37: ( C15 \ C16 ) <> ( {} ) by L36 , XBOOLE_1:105;
L38: C16 c= C15 by L36 , XBOOLE_0:def 8;
L39: ( C16 \/ ( C15 \ C16 ) ) = C15 by L38 , XBOOLE_1:45;
L40: { ( C15 \ C16 ) } is (a_partition of ( C15 \ C16 )) by L37 , EQREL_1:39;
thus L41: ( C17 \/ { ( C15 \ C16 ) } ) is (a_partition of C15) by L40 , L39 , L20 , XBOOLE_1:79;
end;
theorem
L42: (for B19 being  infinite set holds (for B20 being Nat holds (ex B21 being  finite (Subset of B19) st ( card B21 ) > B20)))
proof
let C18 being  infinite set;
let C19 being Nat;
consider C20 being (Function of ( NAT ) , C18) such that L43: C20 is  one-to-one by DICKSON:3;
set D5 = ( Seg ( C19 + 1 ) );
reconsider D6 = ( C20 | D5 ) as (Function of D5 , C18) by FUNCT_2:32;
L44: D6 is  one-to-one by L43 , FUNCT_1:52;
L45: ( card D6 ) = ( card ( rng D6 ) ) by L44 , PRE_POLY:19;
L46: ( card ( dom D6 ) ) = ( card ( rng D6 ) ) by L45 , CARD_1:62;
reconsider D7 = ( rng D6 ) as  finite (Subset of C18) by RELAT_1:def 19;
take D7;
L47: ( dom D6 ) = D5 by FUNCT_2:def 1;
L48: ( card ( dom D6 ) ) = ( C19 + 1 ) by L47 , FINSEQ_1:57;
thus L49: ( card D7 ) > C19 by L48 , L46 , NAT_1:13;
end;
begin
definition
let C21 being RelStr;
let C22 being (Subset of C21);
attr C22 is  connected
means
:L50: (the InternalRel of C21) is_connected_in C22;
end;
notation
let C23 being RelStr;
let C24 being (Subset of C23);
synonym C24 is  clique for C24 is  connected;
end;
registration
let C25 being RelStr;
cluster  trivial ->  clique for (Subset of C25);
coherence
proof
let C26 being (Subset of C25);
assume L53: C26 is  trivial;
let C27 , C28 being set;
thus L54: thesis by L53 , ZFMISC_1:def 10;
end;
end;
registration
let C29 being RelStr;
cluster  clique for (Subset of C29);
existence
proof
take ( {} C29 );
let C30 , C31 being set;
thus L56: thesis;
end;
end;
definition
let C32 being RelStr;
mode Clique of C32
 is  clique (Subset of C32);
end;
theorem
L59: (for B22 being RelStr holds (for B23 being (Subset of B22) holds (B23 is (Clique of B22) iff (for B24 , B25 being (Element of B22) holds ((B24 in B23 & B25 in B23 & B24 <> B25) implies (B24 <= B25 or B25 <= B24))))))
proof
let C33 being RelStr;
let C34 being (Subset of C33);
set D8 = (the InternalRel of C33);
thus L60:now
assume L61: C34 is (Clique of C33);
L62: D8 is_connected_in C34 by L61 , L50;
let C35 , C36 being (Element of C33);
assume L63: (C35 in C34 & C36 in C34 & C35 <> C36);
L64: ([ C35 , C36 ] in D8 or [ C36 , C35 ] in D8) by L63 , L62 , RELAT_2:def 6;
thus L65: (C35 <= C36 or C36 <= C35) by L64 , ORDERS_2:def 5;
end;
assume L66: (for B26 , B27 being (Element of C33) holds ((B26 in C34 & B27 in C34 & B26 <> B27) implies (B26 <= B27 or B27 <= B26)));
L67: D8 is_connected_in C34
proof
let C37 , C38 being set;
assume L68: (C37 in C34 & C38 in C34 & C37 <> C38);
reconsider D9 = C37 , D10 = C38 as (Element of C33) by L68;
L69: (D9 <= D10 or D10 <= D9) by L68 , L66;
thus L70: ([ C37 , C38 ] in D8 or [ C38 , C37 ] in D8) by L69 , ORDERS_2:def 5;
end;
thus L71: C34 is (Clique of C33) by L67 , L50;
end;
registration
let C39 being RelStr;
cluster  finite for (Clique of C39);
existence
proof
take ( {} C39 );
thus L72: thesis;
end;
end;
registration
let C40 being  reflexive RelStr;
cluster  connected ->  strongly_connected for (Subset of C40);
coherence
proof
let C41 being (Subset of C40);
set D11 = (the InternalRel of C40);
set D12 = (the carrier of C40);
assume L74: C41 is  clique;
L75: D11 is_connected_in C41 by L74 , L50;
L76: D11 is_reflexive_in D12 by ORDERS_2:def 2;
thus L77: C41 is  strongly_connected
proof
let C42 , C43 being set;
assume that
L78: C42 in C41
and
L79: C43 in C41;
per cases ;
suppose L80: C42 = C43;

thus L81: ([ C42 , C43 ] in (the InternalRel of C40) or [ C43 , C42 ] in (the InternalRel of C40)) by L80 , L78 , L76 , RELAT_2:def 1;
end;
suppose L82: C42 <> C43;

thus L83: ([ C42 , C43 ] in (the InternalRel of C40) or [ C43 , C42 ] in (the InternalRel of C40)) by L82 , L78 , L79 , L75 , RELAT_2:def 6;
end;
end;

end;
end;
registration
let C44 being non  empty RelStr;
cluster  finite non  empty for (Clique of C44);
existence
proof
L79: { the (Element of C44) } is  clique;
thus L80: thesis by L79;
end;
end;
theorem
L82: (for B28 being non  empty RelStr holds (for B29 , B30 being (Element of B28) holds ((B29 <> B30 & { B29 , B30 } is (Clique of B28)) implies (B29 <= B30 or B30 <= B29))))
proof
let C45 being non  empty RelStr;
let C46 , C47 being (Element of C45);
assume L83: C46 <> C47;
L84: (C46 in { C46 , C47 } & C47 in { C46 , C47 }) by TARSKI:def 2;
assume L85: { C46 , C47 } is (Clique of C45);
thus L86: thesis by L85 , L84 , L83 , L59;
end;
theorem
L87: (for B31 being non  empty RelStr holds (for B32 , B33 being (Element of B31) holds ((B32 <= B33 or B33 <= B32) implies { B32 , B33 } is (Clique of B31))))
proof
let C48 being non  empty RelStr;
let C49 , C50 being (Element of C48);
assume L88: (C49 <= C50 or C50 <= C49);
L89:
now
let C51 , C52 being (Element of C48);
assume L90: (C51 in { C49 , C50 } & C52 in { C49 , C50 });
L91: ((C51 = C49 or C51 = C50) & (C52 = C49 or C52 = C50)) by L90 , TARSKI:def 2;
assume L92: C51 <> C52;
thus L93: (C51 <= C52 or C52 <= C51) by L92 , L88 , L91;
end;
thus L94: thesis by L89 , L59;
end;
theorem
L95: (for B34 being RelStr holds (for B35 being (Clique of B34) holds (for B36 being (Subset of B35) holds B36 is (Clique of B34))))
proof
let C53 being RelStr;
let C54 being (Clique of C53);
let C55 being (Subset of C54);
set D13 = (the InternalRel of C53);
L96: D13 is_connected_in C54 by L50;
L97: D13 is_connected_in C55
proof
let C56 , C57 being set;
assume L98: (C56 in C55 & C57 in C55 & C56 <> C57);
thus L99: thesis by L98 , L96 , RELAT_2:def 6;
end;
thus L100: thesis by L97 , L50 , XBOOLE_1:1;
end;
theorem
L101: (for B37 being RelStr holds (for B38 being  finite (Clique of B37) holds (for B39 being Nat holds (B39 <= ( card B38 ) implies (ex B40 being  finite (Clique of B37) st (B40 c= B38 & ( card B40 ) = B39))))))
proof
let C58 being RelStr;
let C59 being  finite (Clique of C58);
let C60 being Nat;
assume that
L102: C60 <= ( card C59 );
consider C61 being  finite (Subset of C59) such that L103: ( card C61 ) = C60 by L102 , FINSEQ_4:72;
reconsider D14 = C61 as  finite (Clique of C58) by L95;
take D14;
thus L104: thesis by L103;
end;
theorem
L105: (for B41 being  transitive RelStr holds (for B42 being (Clique of B41) holds (for B43 , B44 being (Element of B41) holds ((B43 is_maximal_in B42 & B43 <= B44) implies ( B42 \/ { B44 } ) is (Clique of B41)))))
proof
let C62 being  transitive RelStr;
let C63 being (Clique of C62);
let C64 , C65 being (Element of C62);
assume that
L106: C64 is_maximal_in C63
and
L107: C64 <= C65;
L108: C64 in C63 by L106 , WAYBEL_4:55;
L109: (the carrier of C62) is non  empty by L106 , WAYBEL_4:55;
set D15 = ( C63 \/ { C65 } );
L110: D15 c= (the carrier of C62)
proof
let C66 being set;
assume L111: C66 in D15;
per cases  by L111 , XBOOLE_0:def 3;
suppose L112: C66 in C63;

thus L113: C66 in (the carrier of C62) by L112;
end;
suppose L114: C66 in { C65 };

L115: C66 = C65 by L114 , TARSKI:def 1;
thus L116: C66 in (the carrier of C62) by L115 , L109;
end;
end;
L118:
now
let C67 , C68 being (Element of C62);
assume that
L119: (C67 in D15 & C68 in D15)
and
L120: C67 <> C68;
per cases  by L119 , XBOOLE_0:def 3;
suppose L121: (C67 in C63 & C68 in C63);

thus L122: (C67 <= C68 or C68 <= C67) by L121 , L120 , L59;
end;
suppose that L123: C67 in C63
and
L124: C68 in { C65 };
L125: C68 = C65 by L124 , TARSKI:def 1;
L126: (not C64 < C67) by L106 , L123 , WAYBEL_4:55;
per cases ;
suppose L127: C64 <> C67;

L128: (C67 <= C64 or C64 <= C67) by L127 , L123 , L108 , L59;
thus L129: (C67 <= C68 or C68 <= C67) by L128 , L107 , L125 , L126 , ORDERS_2:3 , ORDERS_2:def 6;
end;
suppose L130: C64 = C67;

thus L131: (C67 <= C68 or C68 <= C67) by L130 , L107 , L124 , TARSKI:def 1;
end;
end;
suppose that L133: C67 in { C65 }
and
L134: C68 in C63;
L135: C67 = C65 by L133 , TARSKI:def 1;
L136: (not C64 < C68) by L106 , L134 , WAYBEL_4:55;
per cases ;
suppose L137: C64 <> C68;

L138: (C68 <= C64 or C64 <= C68) by L137 , L134 , L108 , L59;
thus L139: (C67 <= C68 or C68 <= C67) by L138 , L107 , L135 , L136 , ORDERS_2:3 , ORDERS_2:def 6;
end;
suppose L140: C64 = C68;

thus L141: (C67 <= C68 or C68 <= C67) by L140 , L107 , L133 , TARSKI:def 1;
end;
end;
suppose L143: (C67 in { C65 } & C68 in { C65 });

L144: (C67 = C65 & C68 = C65) by L143 , TARSKI:def 1;
thus L145: (C67 <= C68 or C68 <= C67) by L144 , L120;
end;
end;
thus L147: ( C63 \/ { C65 } ) is (Clique of C62) by L118 , L110 , L59;
end;
theorem
L148: (for B45 being  transitive RelStr holds (for B46 being (Clique of B45) holds (for B47 , B48 being (Element of B45) holds ((B47 is_minimal_in B46 & B48 <= B47) implies ( B46 \/ { B48 } ) is (Clique of B45)))))
proof
let C69 being  transitive RelStr;
let C70 being (Clique of C69);
let C71 , C72 being (Element of C69);
assume that
L149: C71 is_minimal_in C70
and
L150: C72 <= C71;
L151: C71 in C70 by L149 , WAYBEL_4:56;
L152: (the carrier of C69) is non  empty by L149 , WAYBEL_4:56;
set D16 = ( C70 \/ { C72 } );
L153: D16 c= (the carrier of C69)
proof
let C73 being set;
assume L154: C73 in D16;
per cases  by L154 , XBOOLE_0:def 3;
suppose L155: C73 in C70;

thus L156: C73 in (the carrier of C69) by L155;
end;
suppose L157: C73 in { C72 };

L158: C73 = C72 by L157 , TARSKI:def 1;
thus L159: C73 in (the carrier of C69) by L158 , L152;
end;
end;
L161:
now
let C74 , C75 being (Element of C69);
assume that
L162: (C74 in D16 & C75 in D16)
and
L163: C74 <> C75;
per cases  by L162 , XBOOLE_0:def 3;
suppose L164: (C74 in C70 & C75 in C70);

thus L165: (C74 <= C75 or C75 <= C74) by L164 , L163 , L59;
end;
suppose that L166: C74 in C70
and
L167: C75 in { C72 };
L168: C75 = C72 by L167 , TARSKI:def 1;
L169: (not C74 < C71) by L149 , L166 , WAYBEL_4:56;
per cases ;
suppose L170: C74 <> C71;

L171: (not C74 <= C71) by L170 , L169 , ORDERS_2:def 6;
L172: C71 <= C74 by L171 , L166 , L151 , L170 , L59;
thus L173: (C74 <= C75 or C75 <= C74) by L172 , L150 , L168 , ORDERS_2:3;
end;
suppose L174: C71 = C74;

thus L175: (C74 <= C75 or C75 <= C74) by L174 , L150 , L167 , TARSKI:def 1;
end;
end;
suppose that L177: C74 in { C72 }
and
L178: C75 in C70;
L179: C74 = C72 by L177 , TARSKI:def 1;
L180: (not C75 < C71) by L149 , L178 , WAYBEL_4:56;
per cases ;
suppose L181: C75 <> C71;

L182: (not C75 <= C71) by L181 , L180 , ORDERS_2:def 6;
L183: C71 <= C75 by L182 , L178 , L151 , L181 , L59;
thus L184: (C74 <= C75 or C75 <= C74) by L183 , L150 , L179 , ORDERS_2:3;
end;
suppose L185: C71 = C75;

thus L186: (C74 <= C75 or C75 <= C74) by L185 , L150 , L177 , TARSKI:def 1;
end;
end;
suppose L188: (C74 in { C72 } & C75 in { C72 });

L189: (C74 = C72 & C75 = C72) by L188 , TARSKI:def 1;
thus L190: (C74 <= C75 or C75 <= C74) by L189 , L163;
end;
end;
thus L192: ( C70 \/ { C72 } ) is (Clique of C69) by L161 , L153 , L59;
end;
definition
let C76 being RelStr;
let C77 being (Subset of C76);
attr C77 is  stable
means
:L193: (for B49 , B50 being (Element of C76) holds ((B49 in C77 & B50 in C77 & B49 <> B50) implies ((not B49 <= B50) & (not B50 <= B49))));
end;
registration
let C78 being RelStr;
cluster  trivial ->  stable for (Subset of C78);
coherence
proof
let C79 being (Subset of C78);
assume L195: C79 is  trivial;
let C80 , C81 being (Element of C78);
thus L196: thesis by L195 , ZFMISC_1:def 10;
end;
end;
registration
let C82 being RelStr;
cluster  stable for (Subset of C82);
existence
proof
reconsider D17 = ( {} ) as (Subset of C82) by XBOOLE_1:2;
take D17;
let C83 , C84 being (Element of C82);
thus L198: thesis;
end;
end;
definition
let C85 being RelStr;
mode StableSet of C85
 is  stable (Subset of C85);
end;
registration
let C86 being RelStr;
cluster  finite for (StableSet of C86);
existence
proof
take ( {} C86 );
thus L201: thesis;
end;
end;
registration
let C87 being non  empty RelStr;
cluster  finite non  empty for (StableSet of C87);
existence
proof
L203: { the (Element of C87) } is  stable;
thus L204: thesis by L203;
end;
end;
theorem
L206: (for B51 being non  empty RelStr holds (for B52 , B53 being (Element of B51) holds ((B52 <> B53 & { B52 , B53 } is (StableSet of B51)) implies (not (B52 <= B53 or B53 <= B52)))))
proof
let C88 being non  empty RelStr;
let C89 , C90 being (Element of C88);
assume L207: C89 <> C90;
L208: (C89 in { C89 , C90 } & C90 in { C89 , C90 }) by TARSKI:def 2;
assume L209: { C89 , C90 } is (StableSet of C88);
thus L210: thesis by L209 , L208 , L207 , L193;
end;
theorem
L211: (for B54 being non  empty RelStr holds (for B55 , B56 being (Element of B54) holds ((not (B55 <= B56 or B56 <= B55)) implies { B55 , B56 } is (StableSet of B54))))
proof
let C91 being non  empty RelStr;
let C92 , C93 being (Element of C91);
assume L212: (not (C92 <= C93 or C93 <= C92));
set D18 = { C92 , C93 };
L213: D18 is  stable
proof
let C94 , C95 being (Element of C91);
assume that
L214: (C94 in D18 & C95 in D18 & C94 <> C95);
L215: ((C94 = C92 or C94 = C93) & (C95 = C92 or C95 = C93)) by L214 , TARSKI:def 2;
thus L216: thesis by L215 , L212 , L214;
end;
thus L217: thesis by L213;
end;
theorem
L218: (for B57 being RelStr holds (for B58 being (Clique of B57) holds (for B59 being (StableSet of B57) holds (for B60 , B61 being set holds ((B60 in B59 & B61 in B59 & B60 in B58 & B61 in B58) implies B60 = B61)))))
proof
let C96 being RelStr;
let C97 being (Clique of C96);
let C98 being (StableSet of C96);
let C99 , C100 being set;
assume that
L219: (C99 in C98 & C100 in C98)
and
L220: (C99 in C97 & C100 in C97);
assume L221: C99 <> C100;
reconsider D19 = C99 , D20 = C100 as (Element of C96) by L219;
L222: ((not D19 <= D20) & (not D20 <= D19)) by L219 , L221 , L193;
thus L223: contradiction by L222 , L220 , L221 , L59;
end;
theorem
L224: (for B62 being RelStr holds (for B63 being (StableSet of B62) holds (for B64 being (Subset of B63) holds B64 is (StableSet of B62))))
proof
let C101 being RelStr;
let C102 being (StableSet of C101);
let C103 being (Subset of C102);
reconsider D21 = C103 as (Subset of C101) by XBOOLE_1:1;
L225: D21 is  stable
proof
let C104 , C105 being (Element of C101);
assume that
L226: (C104 in D21 & C105 in D21 & C104 <> C105);
thus L227: ((not C104 <= C105) & (not C105 <= C104)) by L226 , L193;
end;
thus L228: thesis by L225;
end;
theorem
L229: (for B65 being RelStr holds (for B66 being  finite (StableSet of B65) holds (for B67 being Nat holds (B67 <= ( card B66 ) implies (ex B68 being  finite (StableSet of B65) st ( card B68 ) = B67)))))
proof
let C106 being RelStr;
let C107 being  finite (StableSet of C106);
let C108 being Nat;
assume that
L230: C108 <= ( card C107 );
consider C109 being  finite (Subset of C107) such that L231: ( card C109 ) = C108 by L230 , FINSEQ_4:72;
reconsider D22 = C109 as  finite (StableSet of C106) by L224;
take D22;
thus L232: ( card D22 ) = C108 by L231;
end;
begin
definition
let C110 being RelStr;
attr C110 is  with_finite_clique#
means
:L233: (ex B69 being  finite (Clique of C110) st (for B70 being  finite (Clique of C110) holds ( card B70 ) <= ( card B69 )));
end;
registration
cluster  finite ->  with_finite_clique# for RelStr;
coherence
proof
let C111 being RelStr;
assume L235: C111 is  finite;
reconsider D23 = C111 as  finite RelStr by L235;
defpred S1[ Nat ] means (ex B71 being  finite (Clique of C111) st ( card B71 ) = $1);
L236: (for B72 being Nat holds (S1[ B72 ] implies B72 <= ( card D23 ))) by NAT_1:43;
L237: ( card ( {} C111 ) ) = ( 0 );
L238: (ex B73 being Nat st S1[ B73 ]) by L237;
consider C112 being Nat such that L239: S1[ C112 ] and L240: (for B74 being Nat holds (S1[ B74 ] implies B74 <= C112)) from NAT_1:sch 6(L236 , L238);
consider C113 being  finite (Clique of C111) such that L241: ( card C113 ) = C112 by L239;
L242: (for B75 being  finite (Clique of C111) holds ( card B75 ) <= ( card C113 )) by L241 , L240;
thus L243: C111 is  with_finite_clique# by L242 , L233;
end;
end;
registration
let C114 being  with_finite_clique# RelStr;
cluster  ->  finite for (Clique of C114);
coherence
proof
let C115 being (Clique of C114);
consider C116 being  finite (Clique of C114) such that L245: (for B76 being  finite (Clique of C114) holds ( card B76 ) <= ( card C116 )) by L233;
assume L246: C115 is  infinite;
consider C117 being  finite (Subset of C115) such that L247: ( card C117 ) > ( card C116 ) by L246 , L42;
L248: C117 is (Clique of C114) by L95;
thus L249: contradiction by L248 , L247 , L245;
end;
end;
definition
let C118 being  with_finite_clique# RelStr;
func clique# C118 -> Nat means 
:L251: ((ex B77 being  finite (Clique of C118) st ( card B77 ) = it) & (for B78 being  finite (Clique of C118) holds ( card B78 ) <= it));
existence
proof
consider C119 being  finite (Clique of C118) such that L252: (for B79 being  finite (Clique of C118) holds ( card B79 ) <= ( card C119 )) by L233;
take D24 = ( card C119 );
thus L253: (ex B80 being  finite (Clique of C118) st ( card B80 ) = D24);
let C120 being  finite (Clique of C118);
thus L254: ( card C120 ) <= D24 by L252;
end;
uniqueness
proof
let C121 , C122 being Nat;
assume that
L255: (ex B81 being  finite (Clique of C118) st ( card B81 ) = C121)
and
L256: (for B82 being  finite (Clique of C118) holds ( card B82 ) <= C121)
and
L257: (ex B83 being  finite (Clique of C118) st ( card B83 ) = C122)
and
L258: (for B84 being  finite (Clique of C118) holds ( card B84 ) <= C122);
consider C123 being  finite (Clique of C118) such that L259: ( card C123 ) = C121 by L255;
consider C124 being  finite (Clique of C118) such that L260: ( card C124 ) = C122 by L257;
L261: (C121 <= C122 & C122 <= C121) by L259 , L260 , L256 , L258;
thus L262: C121 = C122 by L261 , XXREAL_0:1;
end;
end;
registration
let C125 being  empty RelStr;
cluster ( clique# C125 ) ->  empty;
coherence
proof
L264: (for B85 being (Clique of C125) holds ( card B85 ) <= ( card ( {} C125 ) ));
thus L265: thesis by L264 , L251;
end;
end;
registration
let C126 being  with_finite_clique# non  empty RelStr;
cluster ( clique# C126 ) ->  positive;
coherence
proof
L267: ( card { the (Element of C126) } ) <= ( clique# C126 ) by L251;
thus L268: thesis by L267;
end;
end;
theorem
L270: (for B86 being  with_finite_clique# non  empty RelStr holds (( [#] B86 ) is (StableSet of B86) implies ( clique# B86 ) = 1))
proof
let C127 being  with_finite_clique# non  empty RelStr;
assume L271: ( [#] C127 ) is (StableSet of C127);
L272: ( clique# C127 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
consider C128 being  finite (Clique of C127) such that L273: ( card C128 ) = ( clique# C127 ) by L251;
assume L274: ( clique# C127 ) <> 1;
L275: ( card C128 ) > 1 by L274 , L272 , L273 , XXREAL_0:1;
consider C129 , C130 being set such that L276: C129 in C128 and L277: C130 in C128 and L278: C129 <> C130 by L275 , NAT_1:59;
thus L279: thesis by L276 , L277 , L278 , L271 , L218;
end;
theorem
L280: (for B87 being  with_finite_clique# RelStr holds (( clique# B87 ) = 1 implies ( [#] B87 ) is (StableSet of B87)))
proof
let C131 being  with_finite_clique# RelStr;
assume L281: ( clique# C131 ) = 1;
set D25 = (the carrier of C131);
L282: C131 is non  empty by L281;
L283:
now
let C132 , C133 being (Element of C131);
assume that
L284: C132 in D25
and
L285: C133 in D25
and
L286: C132 <> C133;
assume L287: (C132 <= C133 or C133 <= C132);
L288: { C132 , C133 } is (Clique of C131) by L287 , L282 , L87;
L289: ( card { C132 , C133 } ) = 2 by L286 , CARD_2:57;
thus L290: contradiction by L289 , L288 , L281 , L251;
end;
thus L291: ( [#] C131 ) is (StableSet of C131) by L283 , L193;
end;
definition
let C134 being RelStr;
attr C134 is  with_finite_stability#
means
:L292: (ex B88 being  finite (StableSet of C134) st (for B89 being  finite (StableSet of C134) holds ( card B89 ) <= ( card B88 )));
end;
registration
cluster  finite ->  with_finite_stability# for RelStr;
coherence
proof
let C135 being RelStr;
assume L294: C135 is  finite;
reconsider D26 = C135 as  finite RelStr by L294;
defpred S2[ Nat ] means (ex B90 being  finite (StableSet of D26) st ( card B90 ) = $1);
L295: (for B91 being Nat holds (S2[ B91 ] implies B91 <= ( card D26 ))) by NAT_1:43;
L296: (( {} C135 ) is (StableSet of C135) & ( card ( {} ) ) = ( 0 ));
L297: (ex B92 being Nat st S2[ B92 ]) by L296;
consider C136 being Nat such that L298: S2[ C136 ] and L299: (for B93 being Nat holds (S2[ B93 ] implies B93 <= C136)) from NAT_1:sch 6(L295 , L297);
consider C137 being  finite (StableSet of C135) such that L300: ( card C137 ) = C136 by L298;
take C137;
let C138 being  finite (StableSet of C135);
thus L301: ( card C138 ) <= ( card C137 ) by L300 , L299;
end;
end;
registration
let C139 being  with_finite_stability# RelStr;
cluster  ->  finite for (StableSet of C139);
coherence
proof
consider C140 being  finite (StableSet of C139) such that L303: (for B94 being  finite (StableSet of C139) holds ( card C140 ) >= ( card B94 )) by L292;
given C141 being (StableSet of C139) such that
L304: C141 is  infinite;

consider C142 being  finite (Subset of C141) such that L305: ( card C142 ) > ( card C140 ) by L304 , L42;
L306: C142 is (StableSet of C139) by L224;
thus L307: contradiction by L306 , L303 , L305;
end;
end;
definition
let C143 being  with_finite_stability# RelStr;
func stability# C143 -> Nat means 
:L309: ((ex B95 being  finite (StableSet of C143) st ( card B95 ) = it) & (for B96 being  finite (StableSet of C143) holds ( card B96 ) <= it));
existence
proof
consider C144 being  finite (StableSet of C143) such that L310: (for B97 being  finite (StableSet of C143) holds ( card C144 ) >= ( card B97 )) by L292;
take D27 = ( card C144 );
thus L311: (ex B98 being  finite (StableSet of C143) st ( card B98 ) = D27);
let C145 being  finite (StableSet of C143);
thus L312: ( card C145 ) <= D27 by L310;
end;
uniqueness
proof
let C146 , C147 being Nat;
assume that
L313: (ex B99 being  finite (StableSet of C143) st ( card B99 ) = C146)
and
L314: (for B100 being  finite (StableSet of C143) holds ( card B100 ) <= C146)
and
L315: (ex B101 being  finite (StableSet of C143) st ( card B101 ) = C147)
and
L316: (for B102 being  finite (StableSet of C143) holds ( card B102 ) <= C147);
consider C148 being  finite (StableSet of C143) such that L317: ( card C148 ) = C146 by L313;
consider C149 being  finite (StableSet of C143) such that L318: ( card C149 ) = C147 by L315;
L319: (C146 <= C147 & C147 <= C146) by L314 , L316 , L317 , L318;
thus L320: C146 = C147 by L319 , XXREAL_0:1;
end;
end;
registration
let C150 being  empty RelStr;
cluster ( stability# C150 ) ->  empty;
coherence
proof
L322: (for B103 being (StableSet of C150) holds ( card B103 ) <= ( card ( {} C150 ) ));
thus L323: thesis by L322 , L309;
end;
end;
registration
let C151 being  with_finite_stability# non  empty RelStr;
cluster ( stability# C151 ) ->  positive;
coherence
proof
L325: ( card { the (Element of C151) } ) <= ( stability# C151 ) by L309;
thus L326: thesis by L325;
end;
end;
theorem
L328: (for B104 being  with_finite_stability# non  empty RelStr holds (( [#] B104 ) is (Clique of B104) implies ( stability# B104 ) = 1))
proof
let C152 being  with_finite_stability# non  empty RelStr;
assume L329: ( [#] C152 ) is (Clique of C152);
L330: ( stability# C152 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
consider C153 being  finite (StableSet of C152) such that L331: ( card C153 ) = ( stability# C152 ) by L309;
assume L332: ( stability# C152 ) <> 1;
L333: ( card C153 ) > 1 by L332 , L330 , L331 , XXREAL_0:1;
consider C154 , C155 being set such that L334: C154 in C153 and L335: C155 in C153 and L336: C154 <> C155 by L333 , NAT_1:59;
thus L337: thesis by L334 , L335 , L336 , L329 , L218;
end;
theorem
L338: (for B105 being  with_finite_stability# RelStr holds (( stability# B105 ) = 1 implies ( [#] B105 ) is (Clique of B105)))
proof
let C156 being  with_finite_stability# RelStr;
assume L339: ( stability# C156 ) = 1;
set D28 = (the carrier of C156);
L340:
now
let C157 , C158 being (Element of C156);
assume that
L341: C157 in D28
and
L342: C158 in D28
and
L343: C157 <> C158;
L344: C156 is non  empty by L341;
assume L345: (not (C157 <= C158 or C158 <= C157));
L346: { C157 , C158 } is (StableSet of C156) by L345 , L344 , L211;
L347: ( card { C157 , C158 } ) = 2 by L343 , CARD_2:57;
thus L348: contradiction by L347 , L339 , L309 , L346;
end;
thus L349: ( [#] C156 ) is (Clique of C156) by L340 , L59;
end;
registration
cluster  with_finite_clique#  with_finite_stability# ->  finite for RelStr;
coherence
proof
let C159 being RelStr;
assume L350: C159 is  with_finite_clique#;
assume L351: C159 is  with_finite_stability#;
assume L352: C159 is  infinite;
reconsider D29 = C159 as  with_finite_clique#  with_finite_stability# RelStr by L350 , L351;
consider C160 being  finite (Clique of D29) such that L353: ( card C160 ) = ( clique# D29 ) by L251;
consider C161 being  finite (StableSet of D29) such that L354: ( card C161 ) = ( stability# D29 ) by L309;
set D30 = ( clique# D29 );
set D31 = ( stability# D29 );
L355: ( ( 0 ) + 1 ) <= D30 by L352 , NAT_1:13;
L356: ( ( 0 ) + 1 ) <= D31 by L352 , NAT_1:13;
set D32 = (the carrier of D29);
L357: D32 = ( [#] D29 );
per cases  by L355 , L356 , XXREAL_0:1;
suppose L358: D30 = 1;

L359: D32 is (StableSet of D29) by L358 , L357 , L280;
consider C162 being  finite (Subset of D32) such that L360: ( card C162 ) > D31 by L352 , L42;
L361: C162 is (StableSet of D29) by L359 , L224;
thus L362: thesis by L361 , L360 , L309;
end;
suppose L363: D31 = 1;

L364: D32 is (Clique of D29) by L363 , L357 , L338;
consider C163 being  finite (Subset of D32) such that L365: ( card C163 ) > D30 by L352 , L42;
L366: C163 is (Clique of D29) by L364 , L95;
thus L367: thesis by L366 , L365 , L251;
end;
suppose L368: (D30 > 1 & D31 > 1);

set D33 = ( ( max (( clique# D29 ) , ( stability# D29 )) ) + 1 );
reconsider D34 = D33 as Nat;
consider C164 being Nat such that L369: (for B106 being  finite set holds (for B107 being (a_partition of ( the_subsets_of_card (2 , B106) )) holds ((( card B106 ) >= C164 & ( card B107 ) = 2) implies (ex B108 being (Subset of B106) st (( card B108 ) >= D34 & B108 is_homogeneous_for B107))))) by RAMSEY_1:17;
consider C165 being  finite (Subset of D29) such that L370: ( card C165 ) > C164 by L352 , L42;
set D35 = ( ( C165 \/ C161 ) \/ C160 );
reconsider D36 = D35 as  finite (Subset of D29);
L371: (C165 c= ( C165 \/ C161 ) & ( C165 \/ C161 ) c= ( ( C165 \/ C161 ) \/ C160 )) by XBOOLE_1:7;
L372: ( card C165 ) <= ( card D36 ) by L371 , NAT_1:43 , XBOOLE_1:1;
set D37 = { { B109 , B110 } where B109 , B110 is (Element of D29) : (B109 <> B110 & B109 in D36 & B110 in D36 & (B109 <= B110 or B110 <= B109)) };
set D38 = { { B111 , B112 } where B111 , B112 is (Element of D29) : (B111 <> B112 & B111 in D36 & B112 in D36 & (not (B111 <= B112 or B112 <= B111))) };
set D39 = ( the_subsets_of_card (2 , D36) );
set D40 = { D37 , D38 };
L373: D37 c= D39
proof
let C166 being set;
assume L374: C166 in D37;
consider C167 , C168 being (Element of D29) such that L375: { C167 , C168 } = C166 and L376: C167 <> C168 and L377: C167 in D36 and L378: C168 in D36 and L379: (C167 <= C168 or C168 <= C167) by L374;
L380: (C166 is (Subset of D36) & ( card C166 ) = 2) by L375 , L376 , L377 , L378 , CARD_2:57 , ZFMISC_1:32;
thus L381: thesis by L380;
end;
L382: D38 c= D39
proof
let C169 being set;
assume L383: C169 in D38;
consider C170 , C171 being (Element of D29) such that L384: { C170 , C171 } = C169 and L385: C170 <> C171 and L386: C170 in D36 and L387: C171 in D36 and L388: (not (C170 <= C171 or C171 <= C170)) by L383;
L389: (C169 is (Subset of D36) & ( card C169 ) = 2) by L384 , L385 , L386 , L387 , CARD_2:57 , ZFMISC_1:32;
thus L390: thesis by L389;
end;
L391: (D37 in D40 & D38 in D40) by TARSKI:def 2;
L392:
now
assume L393: D37 = D38;
consider C172 , C173 being set such that L394: C172 in C161 and L395: C173 in C161 and L396: C172 <> C173 by L368 , L354 , NAT_1:59;
reconsider D41 = C172 , D42 = C173 as (Element of D29) by L394 , L395;
L397: (not (D41 <= D42 or D42 <= D41)) by L394 , L395 , L396 , L193;
L398: (D41 in ( C165 \/ C161 ) & D42 in ( C165 \/ C161 )) by L394 , L395 , XBOOLE_0:def 3;
L399: (D41 in D36 & D42 in D36) by L398 , XBOOLE_0:def 3;
L400: { D41 , D42 } in D38 by L399 , L397 , L396;
consider C174 , C175 being (Element of D29) such that L401: { D41 , D42 } = { C174 , C175 } and L402: (C174 <> C175 & C174 in D36 & C175 in D36) and L403: (C174 <= C175 or C175 <= C174) by L400 , L393;
L404: ((D41 = C174 & D42 = C175) or (D41 = C175 & D42 = C174)) by L401 , ZFMISC_1:6;
thus L405: contradiction by L404 , L403 , L394 , L395 , L396 , L193;
end;
L406: D40 c= ( bool D39 )
proof
let C176 being set;
assume L407: C176 in D40;
L408: C176 c= D39 by L407 , L373 , L382 , TARSKI:def 2;
thus L409: thesis by L408;
end;
L410: ( union D40 ) = D39
proof
thus L411: ( union D40 ) c= D39
proof
let C177 being set;
assume L412: C177 in ( union D40 );
consider C178 being set such that L413: C177 in C178 and L414: C178 in D40 by L412 , TARSKI:def 4;
L415: (C178 = D37 or C178 = D38) by L414 , TARSKI:def 2;
thus L416: thesis by L415 , L413 , L373 , L382;
end;

thus L417: D39 c= ( union D40 )
proof
let C179 being set;
assume L418: C179 in D39;
consider C180 being (Subset of D36) such that L419: C179 = C180 and L420: ( card C180 ) = 2 by L418;
consider C181 , C182 being set such that L421: C181 <> C182 and L422: C180 = { C181 , C182 } by L420 , CARD_2:60;
L423: (C181 in C180 & C182 in C180) by L422 , TARSKI:def 2;
L424: (C181 in D36 & C182 in D36) by L423;
reconsider D43 = C181 , D44 = C182 as (Element of D29) by L424;
L425: (D43 in C180 & D44 in C180) by L422 , TARSKI:def 2;
L426: ((not (D43 <= D44 or D44 <= D43)) or D43 <= D44 or D44 <= D43);
L427: ({ D43 , D44 } in D37 or { D43 , D44 } in D38) by L426 , L425 , L421;
thus L428: C179 in ( union D40 ) by L427 , L419 , L422 , L391 , TARSKI:def 4;
end;

end;
L418: (for B113 being (Subset of D39) holds (B113 in D40 implies (B113 <> ( {} ) & (for B114 being (Subset of D39) holds (B114 in D40 implies (B113 = B114 or B113 misses B114))))))
proof
let C183 being (Subset of D39);
assume that
L419: C183 in D40;
thus L420: C183 <> ( {} )
proof
per cases  by L419 , TARSKI:def 2;
suppose L421: C183 = D37;

consider C184 , C185 being set such that L422: C184 in C160 and L423: C185 in C160 and L424: C184 <> C185 by L368 , L353 , NAT_1:59;
reconsider D45 = C184 , D46 = C185 as (Element of D29) by L422 , L423;
L425: (D45 <= D46 or D46 <= D45) by L422 , L423 , L424 , L59;
L426: (D45 in ( ( C165 \/ C161 ) \/ C160 ) & D46 in ( ( C165 \/ C161 ) \/ C160 )) by L422 , L423 , XBOOLE_0:def 3;
L427: { D45 , D46 } in D37 by L426 , L425 , L424;
thus L428: thesis by L427 , L421;
end;
suppose L429: C183 = D38;

consider C186 , C187 being set such that L430: C186 in C161 and L431: C187 in C161 and L432: C186 <> C187 by L368 , L354 , NAT_1:59;
reconsider D47 = C186 , D48 = C187 as (Element of D29) by L430 , L431;
L433: (not (D47 <= D48 or D48 <= D47)) by L430 , L431 , L432 , L193;
L434: (D47 in ( C165 \/ C161 ) & D48 in ( C165 \/ C161 )) by L430 , L431 , XBOOLE_0:def 3;
L435: (D47 in D36 & D48 in D36) by L434 , XBOOLE_0:def 3;
L436: { D47 , D48 } in D38 by L435 , L433 , L432;
thus L437: thesis by L436 , L429;
end;
end;

let C188 being (Subset of D39);
assume that
L439: C188 in D40;
assume L440: C183 <> C188;
assume L441: C183 meets C188;
L442: ((C183 = D37 or C183 = D38) & (C188 = D37 or C188 = D38)) by L419 , L439 , TARSKI:def 2;
L443: ( D37 /\ D38 ) <> ( {} ) by L442 , L440 , L441 , XBOOLE_0:def 7;
consider C189 being set such that L444: C189 in ( D37 /\ D38 ) by L443 , XBOOLE_0:def 1;
L445: C189 in D37 by L444 , XBOOLE_0:def 4;
consider C190 , C191 being (Element of D29) such that L446: { C190 , C191 } = C189 and L447: (C190 <> C191 & C190 in D36 & C191 in D36) and L448: (C190 <= C191 or C191 <= C190) by L445;
L449: C189 in D38 by L444 , XBOOLE_0:def 4;
consider C192 , C193 being (Element of D29) such that L450: { C192 , C193 } = C189 and L451: (C192 <> C193 & C192 in D36 & C193 in D36) and L452: (not (C192 <= C193 or C193 <= C192)) by L449;
L453: ((C190 = C192 & C191 = C193) or (C190 = C193 & C191 = C192)) by L446 , L450 , ZFMISC_1:6;
thus L454: contradiction by L453 , L448 , L452;
end;
reconsider D49 = D40 as (a_partition of D39) by L418 , L410 , L406 , EQREL_1:def 4;
L455: ( card D49 ) = 2 by L392 , CARD_2:57;
consider C194 being (Subset of D36) such that L456: ( card C194 ) >= D34 and L457: C194 is_homogeneous_for D49 by L455 , L372 , L369 , L370 , XXREAL_0:2;
reconsider D50 = C194 as  finite (Subset of D29) by XBOOLE_1:1;
L458: ( max (( clique# D29 ) , ( stability# D29 )) ) >= ( clique# D29 ) by XXREAL_0:25;
L459: D34 > ( clique# D29 ) by L458 , NAT_1:13;
L460: ( card D50 ) > ( clique# D29 ) by L459 , L456 , XXREAL_0:2;
L461: ( max (( clique# D29 ) , ( stability# D29 )) ) >= ( stability# D29 ) by XXREAL_0:25;
L462: D34 > ( stability# D29 ) by L461 , NAT_1:13;
L463: ( card D50 ) > ( stability# D29 ) by L462 , L456 , XXREAL_0:2;
consider C195 being (Element of D49) such that L464: ( the_subsets_of_card (2 , D50) ) c= C195 by L457 , RAMSEY_1:def 1;
per cases  by TARSKI:def 2;
suppose L465: C195 = D37;

L466:
now
let C196 , C197 being (Element of D29);
assume that
L467: C196 in D50
and
L468: C197 in D50
and
L469: C196 <> C197;
L470: ({ C196 , C197 } is (Subset of D50) & ( card { C196 , C197 } ) = 2) by L467 , L468 , L469 , CARD_2:57 , ZFMISC_1:32;
L471: { C196 , C197 } in ( the_subsets_of_card (2 , D50) ) by L470;
L472: { C196 , C197 } in D37 by L471 , L465 , L464;
consider C198 , C199 being (Element of D29) such that L473: { C198 , C199 } = { C196 , C197 } and L474: (C198 <> C199 & C198 in D36 & C199 in D36) and L475: (C198 <= C199 or C199 <= C198) by L472;
L476: ((C198 = C196 & C199 = C197) or (C198 = C197 & C199 = C196)) by L473 , ZFMISC_1:6;
thus L477: (C196 <= C197 or C197 <= C196) by L476 , L475;
end;
L478: D50 is (Clique of D29) by L466 , L59;
thus L479: contradiction by L478 , L460 , L251;
end;
suppose L480: C195 = D38;

L481: D50 is  stable
proof
let C200 , C201 being (Element of D29);
assume that
L482: C200 in D50
and
L483: C201 in D50
and
L484: C200 <> C201;
L485: ({ C200 , C201 } is (Subset of D50) & ( card { C200 , C201 } ) = 2) by L482 , L483 , L484 , CARD_2:57 , ZFMISC_1:32;
L486: { C200 , C201 } in ( the_subsets_of_card (2 , D50) ) by L485;
L487: { C200 , C201 } in D38 by L486 , L480 , L464;
consider C202 , C203 being (Element of D29) such that L488: { C202 , C203 } = { C200 , C201 } and L489: (C202 <> C203 & C202 in D36 & C203 in D36) and L490: (not (C202 <= C203 or C203 <= C202)) by L487;
L491: ((C202 = C200 & C203 = C201) or (C202 = C201 & C203 = C200)) by L488 , ZFMISC_1:6;
thus L492: ((not C200 <= C201) & (not C201 <= C200)) by L491 , L490;
end;
thus L493: contradiction by L481 , L463 , L309;
end;
end;
end;
end;
begin
definition
let C204 being RelStr;
let C205 being (Subset of C204);
func Lower C205 -> (Subset of C204) equals 
( C205 \/ ( downarrow C205 ) );
coherence;
func Upper C205 -> (Subset of C204) equals 
( C205 \/ ( uparrow C205 ) );
coherence;
end;
theorem
L498: (for B115 being  antisymmetric  transitive RelStr holds (for B116 being (StableSet of B115) holds (for B117 being set holds ((B117 in ( Upper B116 ) & B117 in ( Lower B116 )) implies B117 in B116))))
proof
let C206 being  antisymmetric  transitive RelStr;
let C207 being (StableSet of C206);
let C208 being set;
assume that
L499: C208 in ( Upper C207 )
and
L500: C208 in ( Lower C207 );
per cases ;
suppose L501: C208 in C207;

thus L502: thesis by L501;
end;
suppose L503: (not C208 in C207);

L504: C208 in ( uparrow C207 ) by L503 , L499 , XBOOLE_0:def 3;
L505: C208 in ( downarrow C207 ) by L500 , L503 , XBOOLE_0:def 3;
reconsider D51 = C208 as (Element of C206) by L499;
consider C209 being (Element of C206) such that L506: C209 <= D51 and L507: C209 in C207 by L504 , WAYBEL_0:def 16;
reconsider D52 = C208 as (Element of C206) by L500;
consider C210 being (Element of C206) such that L508: D52 <= C210 and L509: C210 in C207 by L505 , WAYBEL_0:def 15;
L510: C209 <= C210 by L506 , L508 , YELLOW_0:def 2;
L511: C209 = C210 by L510 , L507 , L509 , L193;
thus L512: C208 in C207 by L511 , L506 , L507 , L508 , YELLOW_0:def 3;
end;
end;
theorem
L514: (for B118 being  with_finite_stability# RelStr holds (for B119 being (StableSet of B118) holds (( card B119 ) = ( stability# B118 ) implies ( ( Upper B119 ) \/ ( Lower B119 ) ) = ( [#] B118 ))))
proof
let C211 being  with_finite_stability# RelStr;
let C212 being (StableSet of C211);
assume that
L515: ( card C212 ) = ( stability# C211 );
set D53 = (the carrier of C211);
L516: D53 c= ( ( Upper C212 ) \/ ( Lower C212 ) )
proof
let C213 being set;
assume L517: C213 in D53;
assume L518: (not C213 in ( ( Upper C212 ) \/ ( Lower C212 ) ));
reconsider D54 = C213 as (Element of D53) by L517;
L519: (not D54 in ( Upper C212 )) by L518 , XBOOLE_0:def 3;
L520: (not D54 in C212) by L519 , XBOOLE_0:def 3;
L521: (not D54 in ( uparrow C212 )) by L519 , XBOOLE_0:def 3;
L522: (not D54 in ( Lower C212 )) by L518 , XBOOLE_0:def 3;
L523: (not D54 in ( downarrow C212 )) by L522 , XBOOLE_0:def 3;
set D55 = ( C212 \/ { D54 } );
L524: { D54 } c= (the carrier of C211) by L517 , ZFMISC_1:31;
L525:
now
let C214 , C215 being (Element of C211);
assume that
L526: C214 in D55
and
L527: C215 in D55
and
L528: C214 <> C215;
per cases  by L526 , L527 , XBOOLE_0:def 3;
suppose L529: (C214 in C212 & C215 in C212);

thus L530: ((not C214 <= C215) & (not C215 <= C214)) by L529 , L528 , L193;
end;
suppose L531: (C214 in C212 & C215 in { D54 });

L532: C215 = D54 by L531 , TARSKI:def 1;
thus L533: ((not C214 <= C215) & (not C215 <= C214)) by L532 , L521 , L523 , L531 , WAYBEL_0:def 15 , WAYBEL_0:def 16;
end;
suppose L534: (C214 in { D54 } & C215 in C212);

L535: C214 = D54 by L534 , TARSKI:def 1;
thus L536: ((not C214 <= C215) & (not C215 <= C214)) by L535 , L521 , L523 , L534 , WAYBEL_0:def 15 , WAYBEL_0:def 16;
end;
suppose L537: (C214 in { D54 } & C215 in { D54 });

L538: (C214 = D54 & C215 = D54) by L537 , TARSKI:def 1;
thus L539: ((not C214 <= C215) & (not C215 <= C214)) by L538 , L528;
end;
end;
L541: D55 is (StableSet of C211) by L525 , L524 , L193 , XBOOLE_1:8;
L542: ( card D55 ) = ( ( card C212 ) + 1 ) by L520 , CARD_2:41;
L543: ( card D55 ) > ( card C212 ) by L542 , NAT_1:13;
thus L544: contradiction by L543 , L309 , L515 , L541;
end;
thus L545: ( ( Upper C212 ) \/ ( Lower C212 ) ) = ( [#] C211 ) by L516 , XBOOLE_0:def 10;
end;
theorem
L546: (for B120 being  transitive RelStr holds (for B121 being (Element of B120) holds (for B122 being (Subset of B120) holds (B121 is_minimal_in ( Lower B122 ) implies B121 is_minimal_in ( [#] B120 )))))
proof
let C216 being  transitive RelStr;
let C217 being (Element of C216);
let C218 being (Subset of C216);
assume that
L547: C217 is_minimal_in ( Lower C218 );
set D56 = (the carrier of C216);
L548: C217 in ( Lower C218 ) by L547 , WAYBEL_4:56;
assume L549: (not C217 is_minimal_in ( [#] C216 ));
consider C219 being (Element of C216) such that L550: C219 in D56 and L551: C219 < C217 by L549 , L548 , WAYBEL_4:56;
per cases  by L548 , XBOOLE_0:def 3;
suppose L552: C217 in C218;

L553: C219 <= C217 by L551 , ORDERS_2:def 6;
L554: C219 in ( downarrow C218 ) by L553 , L552 , WAYBEL_0:def 15;
L555: C219 in ( Lower C218 ) by L554 , XBOOLE_0:def 3;
thus L556: thesis by L555 , L547 , L551 , WAYBEL_4:56;
end;
suppose L557: C217 in ( downarrow C218 );

consider C220 being (Element of C216) such that L558: C217 <= C220 and L559: C220 in C218 by L557 , WAYBEL_0:def 15;
L560: C219 <= C217 by L551 , ORDERS_2:def 6;
L561: C219 <= C220 by L560 , L558 , YELLOW_0:def 2;
L562: C219 in ( downarrow C218 ) by L561 , L559 , WAYBEL_0:def 15;
L563: C219 in ( Lower C218 ) by L562 , XBOOLE_0:def 3;
thus L564: contradiction by L563 , L547 , L551 , WAYBEL_4:56;
end;
end;
theorem
L566: (for B123 being  transitive RelStr holds (for B124 being (Element of B123) holds (for B125 being (Subset of B123) holds (B124 is_maximal_in ( Upper B125 ) implies B124 is_maximal_in ( [#] B123 )))))
proof
let C221 being  transitive RelStr;
let C222 being (Element of C221);
let C223 being (Subset of C221);
assume that
L567: C222 is_maximal_in ( Upper C223 );
set D57 = (the carrier of C221);
L568: C222 in ( Upper C223 ) by L567 , WAYBEL_4:55;
assume L569: (not C222 is_maximal_in ( [#] C221 ));
consider C224 being (Element of C221) such that L570: C224 in D57 and L571: C222 < C224 by L569 , L568 , WAYBEL_4:55;
per cases  by L568 , XBOOLE_0:def 3;
suppose L572: C222 in C223;

L573: C222 <= C224 by L571 , ORDERS_2:def 6;
L574: C224 in ( uparrow C223 ) by L573 , L572 , WAYBEL_0:def 16;
L575: C224 in ( Upper C223 ) by L574 , XBOOLE_0:def 3;
thus L576: thesis by L575 , L567 , L571 , WAYBEL_4:55;
end;
suppose L577: C222 in ( uparrow C223 );

consider C225 being (Element of C221) such that L578: C225 <= C222 and L579: C225 in C223 by L577 , WAYBEL_0:def 16;
L580: C222 <= C224 by L571 , ORDERS_2:def 6;
L581: C225 <= C224 by L580 , L578 , YELLOW_0:def 2;
L582: C224 in ( uparrow C223 ) by L581 , L579 , WAYBEL_0:def 16;
L583: C224 in ( Upper C223 ) by L582 , XBOOLE_0:def 3;
thus L584: contradiction by L583 , L567 , L571 , WAYBEL_4:55;
end;
end;
definition
let C226 being RelStr;
set D58 = (the carrier of C226);
func minimals C226 -> (Subset of C226) means 
:L586: (for B126 being (Element of C226) holds (B126 in it iff B126 is_minimal_in ( [#] C226 ))) if C226 is non  empty otherwise it = ( {} );
consistency;
existence
proof
defpred S3[ set ] means (ex B127 being (Element of C226) st (B127 = $1 & B127 is_minimal_in D58));
consider C227 being set such that L587: (for B128 being set holds (B128 in C227 iff (B128 in D58 & S3[ B128 ]))) from XBOOLE_0:sch 1;
L588:
now
assume L589: D58 is non  empty;
L590: (for B129 being set holds (B129 in C227 implies B129 in D58)) by L587;
reconsider D59 = C227 as (Subset of C226) by L590 , TARSKI:def 3;
take D60 = D59;
let C228 being (Element of C226);
L591: (C228 in D60 implies S3[ C228 ]) by L587;
thus L592: (C228 in D60 iff C228 is_minimal_in D58) by L591 , L587 , L589;
end;
L593:
now
reconsider D61 = ( {} ) as (Subset of C226) by XBOOLE_1:2;
take D62 = D61;
thus L594: D62 = ( {} );
end;
thus L595: thesis by L593 , L588;
end;
uniqueness
proof
let C229 , C230 being (Subset of C226);
L596:
now
assume that
L597: C226 is non  empty
and
L598: (for B130 being (Element of C226) holds (B130 in C229 iff B130 is_minimal_in D58))
and
L599: (for B131 being (Element of C226) holds (B131 in C230 iff B131 is_minimal_in D58));
L600:
now
let C231 being set;
L601:
now
assume L602: (C231 in C229 or C231 in C230);
reconsider D63 = C231 as (Element of C226) by L602;
L603: D63 is_minimal_in D58 by L602 , L598 , L599;
thus L604: (C231 in C229 & C231 in C230) by L603 , L598 , L599;
end;
thus L605: (C231 in C229 iff C231 in C230) by L601;
end;
thus L606: C229 = C230 by L600 , TARSKI:1;
end;
thus L607: thesis by L596;
end;
func maximals C226 -> (Subset of C226) means 
:L608: (for B132 being (Element of C226) holds (B132 in it iff B132 is_maximal_in ( [#] C226 ))) if C226 is non  empty otherwise it = ( {} );
consistency;
existence
proof
defpred S4[ set ] means (ex B133 being (Element of C226) st (B133 = $1 & B133 is_maximal_in D58));
consider C232 being set such that L609: (for B134 being set holds (B134 in C232 iff (B134 in D58 & S4[ B134 ]))) from XBOOLE_0:sch 1;
L610:
now
assume L611: D58 is non  empty;
L612: (for B135 being set holds (B135 in C232 implies B135 in D58)) by L609;
reconsider D64 = C232 as (Subset of C226) by L612 , TARSKI:def 3;
take D65 = D64;
let C233 being (Element of C226);
L613: (C233 in D65 implies S4[ C233 ]) by L609;
thus L614: (C233 in D65 iff C233 is_maximal_in D58) by L613 , L609 , L611;
end;
L615:
now
reconsider D66 = ( {} ) as (Subset of C226) by XBOOLE_1:2;
take D67 = D66;
thus L616: D67 = ( {} );
end;
thus L617: thesis by L615 , L610;
end;
uniqueness
proof
let C234 , C235 being (Subset of C226);
L618:
now
assume that
L619: C226 is non  empty
and
L620: (for B136 being (Element of C226) holds (B136 in C234 iff B136 is_maximal_in D58))
and
L621: (for B137 being (Element of C226) holds (B137 in C235 iff B137 is_maximal_in D58));
L622:
now
let C236 being set;
L623:
now
assume L624: (C236 in C234 or C236 in C235);
reconsider D68 = C236 as (Element of C226) by L624;
L625: D68 is_maximal_in D58 by L624 , L620 , L621;
thus L626: (C236 in C234 & C236 in C235) by L625 , L620 , L621;
end;
thus L627: (C236 in C234 iff C236 in C235) by L623;
end;
thus L628: C234 = C235 by L622 , TARSKI:1;
end;
thus L629: thesis by L618;
end;
end;
registration
let C237 being  with_finite_clique# non  empty  antisymmetric  transitive RelStr;
cluster ( maximals C237 ) -> non  empty;
coherence
proof
set D69 = (the carrier of C237);
set D70 = (the InternalRel of C237);
consider C238 being  finite (Clique of C237) such that L631: (for B138 being  finite (Clique of C237) holds ( card B138 ) <= ( card C238 )) by L233;
L632: ( card { the (Element of C237) } ) <= ( card C238 ) by L631;
L633: C238 <> ( {} ) by L632;
consider C239 being (Element of C237) such that L634: C239 in C238 and L635: C239 is_maximal_wrt C238 , D70 by L633 , BAGORDER:6;
L636: C239 is_maximal_in C238 by L635 , WAYBEL_4:def 24;
L637: D69 = ( [#] C237 );
L638:
now
assume L639: (not C239 is_maximal_in D69);
consider C240 being (Element of C237) such that L640: C240 in D69 and L641: C239 < C240 by L639 , WAYBEL_4:55;
L642: C239 <= C240 by L641 , ORDERS_2:def 6;
set D71 = ( C238 \/ { C240 } );
reconsider D72 = D71 as  finite (Clique of C237) by L642 , L636 , L105;
L643: (not C240 in C238) by L636 , L641 , WAYBEL_4:55;
L644: ( card D72 ) = ( ( card C238 ) + 1 ) by L643 , CARD_2:41;
L645: ( ( card C238 ) + 1 ) <= ( ( card C238 ) + ( 0 ) ) by L644 , L631;
thus L646: contradiction by L645 , XREAL_1:6;
end;
thus L647: thesis by L638 , L637 , L608;
end;
cluster ( minimals C237 ) -> non  empty;
coherence
proof
set D73 = (the carrier of C237);
set D74 = (the InternalRel of C237);
consider C241 being  finite (Clique of C237) such that L648: (for B139 being  finite (Clique of C237) holds ( card B139 ) <= ( card C241 )) by L233;
L649: ( card { the (Element of C237) } ) <= ( card C241 ) by L648;
L650: C241 <> ( {} ) by L649;
consider C242 being (Element of C237) such that L651: C242 in C241 and L652: C242 is_minimal_wrt C241 , D74 by L650 , BAGORDER:7;
L653: C242 is_minimal_in C241 by L652 , WAYBEL_4:def 26;
L654: D73 = ( [#] C237 );
L655:
now
assume L656: (not C242 is_minimal_in D73);
consider C243 being (Element of C237) such that L657: C243 in D73 and L658: C243 < C242 by L656 , WAYBEL_4:56;
L659: C243 <= C242 by L658 , ORDERS_2:def 6;
set D75 = ( C241 \/ { C243 } );
reconsider D76 = D75 as  finite (Clique of C237) by L659 , L653 , L148;
L660: (not C243 in C241) by L653 , L658 , WAYBEL_4:56;
L661: ( card D76 ) = ( ( card C241 ) + 1 ) by L660 , CARD_2:41;
L662: ( ( card C241 ) + 1 ) <= ( ( card C241 ) + ( 0 ) ) by L661 , L648;
thus L663: contradiction by L662 , XREAL_1:6;
end;
thus L664: thesis by L655 , L654 , L586;
end;
end;
registration
let C244 being RelStr;
cluster ( minimals C244 ) ->  stable;
coherence
proof
set D77 = ( minimals C244 );
let C245 , C246 being (Element of C244);
assume that
L666: C245 in D77
and
L667: C246 in D77
and
L668: C245 <> C246;
L669: C244 is non  empty by L666;
L670: C246 is_minimal_in ( [#] C244 ) by L669 , L667 , L586;
L671: (not C246 > C245) by L670 , L666 , WAYBEL_4:56;
thus L672: (not C245 <= C246) by L671 , L668 , ORDERS_2:def 6;
L673: C245 is_minimal_in ( [#] C244 ) by L666 , L669 , L586;
L674: (not C245 > C246) by L673 , L667 , WAYBEL_4:56;
thus L675: (not C246 <= C245) by L674 , L668 , ORDERS_2:def 6;
end;
cluster ( maximals C244 ) ->  stable;
coherence
proof
set D78 = ( maximals C244 );
let C247 , C248 being (Element of C244);
assume that
L676: C247 in D78
and
L677: C248 in D78
and
L678: C247 <> C248;
L679: C244 is non  empty by L676;
L680: C247 is_maximal_in ( [#] C244 ) by L679 , L676 , L608;
L681: (not C248 > C247) by L680 , L677 , WAYBEL_4:55;
thus L682: (not C247 <= C248) by L681 , L678 , ORDERS_2:def 6;
L683: C248 is_maximal_in ( [#] C244 ) by L677 , L679 , L608;
L684: (not C247 > C248) by L683 , L676 , WAYBEL_4:55;
thus L685: (not C248 <= C247) by L684 , L678 , ORDERS_2:def 6;
end;
end;
theorem
L687: (for B140 being RelStr holds (for B141 being (StableSet of B140) holds ((not ( minimals B140 ) c= B141) implies (not ( minimals B140 ) c= ( Upper B141 )))))
proof
let C249 being RelStr;
let C250 being (StableSet of C249);
assume L688: (not ( minimals C249 ) c= C250);
consider C251 being set such that L689: C251 in ( minimals C249 ) and L690: (not C251 in C250) by L688 , TARSKI:def 3;
assume L691: ( minimals C249 ) c= ( Upper C250 );
reconsider D79 = C251 as (Element of C249) by L689;
L692: C249 is non  empty by L689;
L693: D79 is_minimal_in ( [#] C249 ) by L692 , L689 , L586;
L694: D79 in ( uparrow C250 ) by L690 , L689 , L691 , XBOOLE_0:def 3;
consider C252 being (Element of C249) such that L695: C252 <= D79 and L696: C252 in C250 by L694 , WAYBEL_0:def 16;
L697:
now
assume L698: C252 <> D79;
L699: C252 < D79 by L698 , L695 , ORDERS_2:def 6;
thus L700: contradiction by L699 , L689 , L693 , WAYBEL_4:56;
end;
thus L701: contradiction by L697 , L696 , L690;
end;
theorem
L702: (for B142 being RelStr holds (for B143 being (StableSet of B142) holds ((not ( maximals B142 ) c= B143) implies (not ( maximals B142 ) c= ( Lower B143 )))))
proof
let C253 being RelStr;
let C254 being (StableSet of C253);
assume that
L703: (not ( maximals C253 ) c= C254);
consider C255 being set such that L704: C255 in ( maximals C253 ) and L705: (not C255 in C254) by L703 , TARSKI:def 3;
assume L706: ( maximals C253 ) c= ( Lower C254 );
reconsider D80 = C255 as (Element of C253) by L704;
L707: C253 is non  empty by L704;
L708: D80 is_maximal_in ( [#] C253 ) by L707 , L704 , L608;
L709: D80 in ( downarrow C254 ) by L705 , L704 , L706 , XBOOLE_0:def 3;
consider C256 being (Element of C253) such that L710: D80 <= C256 and L711: C256 in C254 by L709 , WAYBEL_0:def 15;
L712:
now
assume L713: C256 <> D80;
L714: D80 < C256 by L713 , L710 , ORDERS_2:def 6;
thus L715: contradiction by L714 , L704 , L708 , WAYBEL_4:55;
end;
thus L716: contradiction by L712 , L711 , L705;
end;
begin
registration
let C257 being RelStr;
let C258 being  finite (Subset of C257);
cluster ( subrelstr C258 ) ->  finite;
coherence by YELLOW_0:def 15;
end;
theorem
L718: (for B144 being RelStr holds (for B145 being (Subset of B144) holds (for B146 being (Clique of ( subrelstr B145 )) holds B146 is (Clique of B144))))
proof
let C259 being RelStr;
let C260 being (Subset of C259);
let C261 being (Clique of ( subrelstr C260 ));
L719: (the carrier of ( subrelstr C260 )) = C260 by YELLOW_0:def 15;
L720:
now
let C262 , C263 being (Element of C259);
assume that
L721: C262 in C261
and
L722: C263 in C261
and
L723: C262 <> C263;
reconsider D81 = C262 , D82 = C263 as (Element of ( subrelstr C260 )) by L721 , L722;
L724: (D81 <= D82 or D82 <= D81) by L721 , L722 , L723 , L59;
thus L725: (C262 <= C263 or C263 <= C262) by L724 , YELLOW_0:59;
end;
thus L726: C261 is (Clique of C259) by L720 , L719 , L59 , XBOOLE_1:1;
end;
theorem
L727: (for B147 being RelStr holds (for B148 being (Subset of B147) holds (for B149 being (Clique of B147) holds ( B149 /\ B148 ) is (Clique of ( subrelstr B148 )))))
proof
let C264 being RelStr;
let C265 being (Subset of C264);
let C266 being (Clique of C264);
set D83 = ( subrelstr C265 );
set D84 = ( C266 /\ C265 );
L728: D84 c= C265 by XBOOLE_1:17;
L729: C265 = (the carrier of D83) by YELLOW_0:def 15;
L730:
now
let C267 , C268 being (Element of D83);
assume L731: C267 in D84;
assume L732: C268 in D84;
assume L733: C267 <> C268;
L734: (C267 in C265 & C268 in C265) by L731 , L732 , XBOOLE_0:def 4;
L735: C265 is non  empty by L731;
L736: C264 is non  empty by L731;
reconsider D85 = C267 , D86 = C268 as (Element of C264) by L736 , L735 , YELLOW_0:58;
L737: (D85 in C266 & D86 in C266) by L731 , L732 , XBOOLE_0:def 4;
L738: (D85 <= D86 or D86 <= D85) by L737 , L733 , L59;
thus L739: (C267 <= C268 or C268 <= C267) by L738 , L734 , L729 , YELLOW_0:60;
end;
thus L740: ( C266 /\ C265 ) is (Clique of ( subrelstr C265 )) by L730 , L59 , L728 , YELLOW_0:def 15;
end;
theorem
L741: (for B150 being RelStr holds (for B151 being (Subset of B150) holds (for B152 being (StableSet of ( subrelstr B151 )) holds B152 is (StableSet of B150))))
proof
let C269 being RelStr;
let C270 being (Subset of C269);
let C271 being (StableSet of ( subrelstr C270 ));
set D87 = ( subrelstr C270 );
per cases ;
suppose L742: C269 is  empty;

L743: (the carrier of D87) = ( {} ) by L742 , YELLOW_0:def 15;
L744: C271 = ( {} C269 ) by L743;
thus L745: C271 is (StableSet of C269) by L744;
end;
suppose L746: C269 is non  empty;

per cases ;
suppose L747: C270 is  empty;

L748: (the carrier of D87) = ( {} ) by L747 , YELLOW_0:def 15;
L749: C271 = ( {} C269 ) by L748;
thus L750: C271 is (StableSet of C269) by L749;
end;
suppose L751: C270 is non  empty;

L752: C270 = (the carrier of D87) by YELLOW_0:def 15;
reconsider D88 = C271 as (Subset of C269) by L752 , XBOOLE_1:1;
L753: D88 is  stable
proof
let C272 , C273 being (Element of C269);
assume that
L754: C272 in D88
and
L755: C273 in D88
and
L756: C272 <> C273;
reconsider D89 = C272 , D90 = C273 as (Element of D87) by L754 , L755;
L757: ((not D89 <= D90) & (not D90 <= D89)) by L754 , L755 , L756 , L193;
thus L758: ((not C272 <= C273) & (not C273 <= C272)) by L757 , L746 , L751 , YELLOW_0:60;
end;
thus L759: thesis by L753;
end;
end;
end;
theorem
L762: (for B153 being RelStr holds (for B154 being (Subset of B153) holds (for B155 being (StableSet of B153) holds ( B155 /\ B154 ) is (StableSet of ( subrelstr B154 )))))
proof
let C274 being RelStr;
let C275 being (Subset of C274);
let C276 being (StableSet of C274);
set D91 = ( subrelstr C275 );
set D92 = ( C276 /\ C275 );
per cases ;
suppose L763: C274 is  empty;

L764: ( C276 /\ C275 ) = ( {} D91 ) by L763;
thus L765: ( C276 /\ C275 ) is (StableSet of D91) by L764;
end;
suppose L766: C274 is non  empty;

per cases ;
suppose L767: C275 is  empty;

L768: ( C276 /\ C275 ) = ( {} D91 ) by L767;
thus L769: ( C276 /\ C275 ) is (StableSet of D91) by L768;
end;
suppose L770: C275 is non  empty;

L771: C275 = (the carrier of D91) by YELLOW_0:def 15;
reconsider D93 = D92 as (Subset of D91) by L771 , XBOOLE_1:17;
L772: D93 is  stable
proof
let C277 , C278 being (Element of D91);
assume that
L773: C277 in D93
and
L774: C278 in D93
and
L775: C277 <> C278;
reconsider D94 = C277 , D95 = C278 as (Element of C274) by L766 , L770 , YELLOW_0:58;
L776: D94 in C276 by L773 , XBOOLE_0:def 4;
L777: D95 in C276 by L774 , XBOOLE_0:def 4;
L778: ((not D94 <= D95) & (not D95 <= D94)) by L777 , L776 , L775 , L193;
thus L779: ((not C277 <= C278) & (not C278 <= C277)) by L778 , YELLOW_0:59;
end;
thus L780: ( C276 /\ C275 ) is (StableSet of D91) by L772;
end;
end;
end;
theorem
L783: (for B156 being RelStr holds (for B157 being (Subset of B156) holds (for B158 being (Subset of ( subrelstr B157 )) holds (for B159 being (Element of ( subrelstr B157 )) holds (for B160 being (Element of B156) holds ((B159 = B160 & B159 is_maximal_in B158) implies B160 is_maximal_in B158))))))
proof
let C279 being RelStr;
let C280 being (Subset of C279);
let C281 being (Subset of ( subrelstr C280 ));
let C282 being (Element of ( subrelstr C280 ));
let C283 being (Element of C279);
assume that
L784: C282 = C283
and
L785: C282 is_maximal_in C281;
L786: C282 in C281 by L785 , WAYBEL_4:55;
assume L787: (not C283 is_maximal_in C281);
consider C284 being (Element of C279) such that L788: C284 in C281 and L789: C283 < C284 by L787 , L784 , L786 , WAYBEL_4:55;
L790: C283 <= C284 by L789 , ORDERS_2:def 6;
reconsider D96 = C284 as (Element of ( subrelstr C280 )) by L788;
L791: C282 <= D96 by L788 , L790 , L784 , YELLOW_0:60;
L792: C282 < D96 by L791 , L789 , L784 , ORDERS_2:def 6;
thus L793: contradiction by L792 , L788 , L785 , WAYBEL_4:55;
end;
theorem
L794: (for B161 being RelStr holds (for B162 being (Subset of B161) holds (for B163 being (Subset of ( subrelstr B162 )) holds (for B164 being (Element of ( subrelstr B162 )) holds (for B165 being (Element of B161) holds ((B164 = B165 & B164 is_minimal_in B163) implies B165 is_minimal_in B163))))))
proof
let C285 being RelStr;
let C286 being (Subset of C285);
let C287 being (Subset of ( subrelstr C286 ));
let C288 being (Element of ( subrelstr C286 ));
let C289 being (Element of C285);
assume that
L795: C288 = C289
and
L796: C288 is_minimal_in C287;
L797: C288 in C287 by L796 , WAYBEL_4:56;
assume L798: (not C289 is_minimal_in C287);
consider C290 being (Element of C285) such that L799: C290 in C287 and L800: C290 < C289 by L798 , L795 , L797 , WAYBEL_4:56;
L801: C290 <= C289 by L800 , ORDERS_2:def 6;
reconsider D97 = C290 as (Element of ( subrelstr C286 )) by L799;
L802: D97 <= C288 by L799 , L801 , L795 , YELLOW_0:60;
L803: D97 < C288 by L802 , L800 , L795 , ORDERS_2:def 6;
thus L804: contradiction by L803 , L799 , L796 , WAYBEL_4:56;
end;
theorem
L805: (for B166 being  transitive RelStr holds (for B167 being (StableSet of B166) holds (for B168 being (Clique of ( subrelstr ( Lower B167 ) )) holds (for B169 , B170 being (Element of B166) holds ((B169 in B167 & B169 in B168 & B170 in B168) implies (B169 = B170 or B170 <= B169))))))
proof
let C291 being  transitive RelStr;
let C292 being (StableSet of C291);
let C293 being (Clique of ( subrelstr ( Lower C292 ) ));
let C294 , C295 being (Element of C291);
assume that
L806: C294 in C292
and
L807: C294 in C293
and
L808: C295 in C293;
set D98 = ( subrelstr ( Lower C292 ) );
reconsider D99 = C294 as (Element of D98) by L807;
L809: C295 in (the carrier of D98) by L808;
reconsider D100 = C295 as (Element of D98) by L808;
L810: D100 in ( Lower C292 ) by L809 , YELLOW_0:def 15;
L811: C293 is (Clique of C291) by L718;
per cases  by L810 , XBOOLE_0:def 3;
suppose L812: D100 in C292;

thus L813: thesis by L812 , L806 , L807 , L808 , L811 , L218;
end;
suppose L814: D100 in ( downarrow C292 );

consider C296 being (Element of C291) such that L815: C295 <= C296 and L816: C296 in C292 by L814 , WAYBEL_0:def 15;
per cases ;
suppose L817: C294 <> C295;

per cases  by L817 , L807 , L808 , L59;
suppose L818: D99 <= D100;

L819: C294 <= C295 by L818 , YELLOW_0:59;
L820: C294 <= C296 by L819 , L815 , YELLOW_0:def 2;
thus L821: thesis by L820 , L816 , L815 , L806 , L193;
end;
suppose L822: D100 <= D99;

thus L823: thesis by L822 , YELLOW_0:59;
end;
end;
suppose L825: C294 = C295;

thus L826: thesis by L825;
end;
end;
end;
theorem
L829: (for B171 being  transitive RelStr holds (for B172 being (StableSet of B171) holds (for B173 being (Clique of ( subrelstr ( Upper B172 ) )) holds (for B174 , B175 being (Element of B171) holds ((B174 in B172 & B174 in B173 & B175 in B173) implies (B174 = B175 or B174 <= B175))))))
proof
let C297 being  transitive RelStr;
let C298 being (StableSet of C297);
let C299 being (Clique of ( subrelstr ( Upper C298 ) ));
let C300 , C301 being (Element of C297);
assume that
L830: C300 in C298
and
L831: C300 in C299
and
L832: C301 in C299;
set D101 = ( subrelstr ( Upper C298 ) );
reconsider D102 = C300 as (Element of D101) by L831;
L833: C301 in (the carrier of D101) by L832;
reconsider D103 = C301 as (Element of D101) by L832;
L834: D103 in ( Upper C298 ) by L833 , YELLOW_0:def 15;
L835: C299 is (Clique of C297) by L718;
per cases  by L834 , XBOOLE_0:def 3;
suppose L836: D103 in C298;

thus L837: thesis by L836 , L830 , L831 , L832 , L835 , L218;
end;
suppose L838: D103 in ( uparrow C298 );

consider C302 being (Element of C297) such that L839: C302 <= C301 and L840: C302 in C298 by L838 , WAYBEL_0:def 16;
per cases ;
suppose L841: C300 <> C301;

per cases  by L841 , L831 , L832 , L59;
suppose L842: D102 <= D103;

thus L843: thesis by L842 , YELLOW_0:59;
end;
suppose L844: D103 <= D102;

L845: C301 <= C300 by L844 , YELLOW_0:59;
L846: C302 <= C300 by L845 , L839 , YELLOW_0:def 2;
thus L847: thesis by L846 , L840 , L839 , L830 , L193;
end;
end;
suppose L849: C300 = C301;

thus L850: thesis by L849;
end;
end;
end;
registration
let C303 being  with_finite_clique# RelStr;
let C304 being (Subset of C303);
cluster ( subrelstr C304 ) ->  with_finite_clique#;
coherence
proof
consider C305 being  finite (Clique of C303) such that L853: (for B176 being  finite (Clique of C303) holds ( card B176 ) <= ( card C305 )) by L233;
set D104 = ( subrelstr C304 );
defpred S5[ Nat ] means (ex B177 being  finite (Clique of D104) st ( card B177 ) = $1);
L854: (for B178 being Nat holds (S5[ B178 ] implies B178 <= ( card C305 )))
proof
let C306 being Nat;
assume L855: S5[ C306 ];
consider C307 being  finite (Clique of D104) such that L856: ( card C307 ) = C306 by L855;
L857: C307 is  finite  finite  finite  finite (Clique of C303) by L718;
thus L858: thesis by L857 , L856 , L853;
end;
L859: ( card ( {} D104 ) ) = ( 0 );
L860: (ex B179 being Nat st S5[ B179 ]) by L859;
consider C308 being Nat such that L861: S5[ C308 ] and L862: (for B180 being Nat holds (S5[ B180 ] implies B180 <= C308)) from NAT_1:sch 6(L854 , L860);
consider C309 being  finite (Clique of D104) such that L863: ( card C309 ) = C308 by L861;
L864: (for B181 being  finite (Clique of D104) holds ( card B181 ) <= ( card C309 )) by L863 , L862;
thus L865: D104 is  with_finite_clique# by L864 , L233;
end;
end;
registration
let C310 being  with_finite_stability# RelStr;
let C311 being (Subset of C310);
cluster ( subrelstr C311 ) ->  with_finite_stability#;
coherence
proof
consider C312 being  finite (StableSet of C310) such that L867: (for B182 being  finite (StableSet of C310) holds ( card C312 ) >= ( card B182 )) by L292;
assume L868: (not ( subrelstr C311 ) is  with_finite_stability#);
defpred S6[ Nat ] means (ex B183 being  finite (StableSet of ( subrelstr C311 )) st (( card B183 ) = $1 & (ex B184 being  finite (StableSet of ( subrelstr C311 )) st $1 < ( card B184 ))));
L869: S6[ ( 0 ) ]
proof
reconsider D105 = ( {} ( subrelstr C311 ) ) as  finite (StableSet of ( subrelstr C311 ));
take D105;
thus L870: ( card D105 ) = ( 0 );
thus L871: thesis by L870 , L868 , L292;
end;
L872: (for B185 being Nat holds (S6[ B185 ] implies S6[ ( B185 + 1 ) ]))
proof
let C313 being Nat;
given C314 being  finite (StableSet of ( subrelstr C311 )) such that
L873: ( card C314 ) = C313
and
L874: (ex B186 being  finite (StableSet of ( subrelstr C311 )) st C313 < ( card B186 ));

consider C315 being  finite (Subset of ( subrelstr C311 )) such that L875: (C313 < ( card C315 ) & C315 is (StableSet of ( subrelstr C311 ))) by L874;
L876: ( C313 + 1 ) <= ( card C315 ) by L875 , NAT_1:13;
consider C316 being  finite (StableSet of ( subrelstr C311 )) such that L877: ( card C316 ) = ( C313 + 1 ) by L876 , L875 , L229;
take C316;
thus L878: ( card C316 ) = ( C313 + 1 ) by L877;
consider C317 being  finite (StableSet of ( subrelstr C311 )) such that L879: ( card C316 ) < ( card C317 ) by L868 , L292;
take C317;
thus L880: ( C313 + 1 ) < ( card C317 ) by L879 , L877;
end;
L881: (for B187 being Nat holds S6[ B187 ]) from NAT_1:sch 2(L869 , L872);
consider C318 being  finite (StableSet of ( subrelstr C311 )) such that L882: ( card C318 ) = ( card C312 ) and L883: (ex B188 being  finite (StableSet of ( subrelstr C311 )) st ( card C312 ) < ( card B188 )) by L881;
consider C319 being  finite (StableSet of ( subrelstr C311 )) such that L884: ( card C312 ) < ( card C319 ) by L883;
L885: C319 is (StableSet of C310) by L741;
thus L886: contradiction by L885 , L867 , L884;
end;
end;
theorem
L888: (for B189 being  with_finite_clique# non  empty  antisymmetric  transitive RelStr holds (for B190 being (Element of B189) holds (ex B191 being (Element of B189) st (B191 is_minimal_in ( [#] B189 ) & (B191 = B190 or B191 < B190)))))
proof
let C320 being  with_finite_clique# non  empty  antisymmetric  transitive RelStr;
let C321 being (Element of C320);
set D106 = ( Lower { C321 } );
set D107 = ( subrelstr D106 );
reconsider D108 = D107 as  with_finite_clique# non  empty  antisymmetric  transitive RelStr;
consider C322 being set such that L889: C322 in ( minimals D108 ) by XBOOLE_0:def 1;
reconsider D109 = C322 as (Element of D108) by L889;
L890: ( [#] D108 ) = D106 by YELLOW_0:def 15;
L891: D109 is_minimal_in D106 by L890 , L889 , L586;
reconsider D110 = D109 as (Element of C320) by YELLOW_0:58;
take D110;
L892: D106 c= (the carrier of D108) by YELLOW_0:def 15;
thus L893: D110 is_minimal_in ( [#] C320 ) by L892 , L891 , L794 , L546;
per cases ;
suppose L894: D110 = C321;

thus L895: thesis by L894;
end;
suppose L896: D110 <> C321;

L897: (not D110 in { C321 }) by L896 , TARSKI:def 1;
L898: D110 in ( downarrow C321 ) by L897 , L890 , XBOOLE_0:def 3;
L899: D110 <= C321 by L898 , WAYBEL_0:17;
thus L900: thesis by L899 , ORDERS_2:def 6;
end;
end;
theorem
L902: (for B192 being  with_finite_clique#  antisymmetric  transitive RelStr holds ( Upper ( minimals B192 ) ) = ( [#] B192 ))
proof
let C323 being  with_finite_clique#  antisymmetric  transitive RelStr;
set D111 = ( Upper ( minimals C323 ) );
set D112 = (the carrier of C323);
L903: D112 c= D111
proof
let C324 being set;
assume L904: C324 in D112;
reconsider D113 = C324 as (Element of C323) by L904;
L905: C323 is non  empty by L904;
consider C325 being (Element of C323) such that L906: C325 is_minimal_in ( [#] C323 ) and L907: (C325 = D113 or C325 < D113) by L905 , L888;
L908: C325 in ( minimals C323 ) by L906 , L905 , L586;
per cases  by L907;
suppose L909: D113 = C325;

thus L910: thesis by L909 , L908 , XBOOLE_0:def 3;
end;
suppose L911: C325 < D113;

L912: C325 <= D113 by L911 , ORDERS_2:def 6;
L913: C324 in ( uparrow ( minimals C323 ) ) by L912 , L908 , WAYBEL_0:def 16;
thus L914: C324 in D111 by L913 , XBOOLE_0:def 3;
end;
end;
thus L916: thesis by L903 , XBOOLE_0:def 10;
end;
theorem
L917: (for B193 being  with_finite_clique# non  empty  antisymmetric  transitive RelStr holds (for B194 being (Element of B193) holds (ex B195 being (Element of B193) st (B195 is_maximal_in ( [#] B193 ) & (B195 = B194 or B194 < B195)))))
proof
let C326 being  with_finite_clique# non  empty  antisymmetric  transitive RelStr;
let C327 being (Element of C326);
set D114 = ( Upper { C327 } );
set D115 = ( subrelstr D114 );
reconsider D116 = D115 as  with_finite_clique# non  empty  antisymmetric  transitive RelStr;
consider C328 being set such that L918: C328 in ( maximals D116 ) by XBOOLE_0:def 1;
reconsider D117 = C328 as (Element of D116) by L918;
L919: ( [#] D116 ) = D114 by YELLOW_0:def 15;
L920: D117 is_maximal_in D114 by L919 , L918 , L608;
reconsider D118 = D117 as (Element of C326) by YELLOW_0:58;
take D118;
L921: D114 c= (the carrier of D116) by YELLOW_0:def 15;
thus L922: D118 is_maximal_in ( [#] C326 ) by L921 , L920 , L783 , L566;
per cases ;
suppose L923: D118 = C327;

thus L924: thesis by L923;
end;
suppose L925: D118 <> C327;

L926: (not D118 in { C327 }) by L925 , TARSKI:def 1;
L927: D118 in ( uparrow C327 ) by L926 , L919 , XBOOLE_0:def 3;
L928: C327 <= D118 by L927 , WAYBEL_0:18;
thus L929: thesis by L928 , ORDERS_2:def 6;
end;
end;
theorem
L931: (for B196 being  with_finite_clique#  antisymmetric  transitive RelStr holds ( Lower ( maximals B196 ) ) = ( [#] B196 ))
proof
let C329 being  with_finite_clique#  antisymmetric  transitive RelStr;
set D119 = ( Lower ( maximals C329 ) );
set D120 = (the carrier of C329);
L932: D120 c= D119
proof
let C330 being set;
assume L933: C330 in D120;
reconsider D121 = C330 as (Element of C329) by L933;
L934: C329 is non  empty by L933;
consider C331 being (Element of C329) such that L935: C331 is_maximal_in ( [#] C329 ) and L936: (C331 = D121 or C331 > D121) by L934 , L917;
L937: C331 in ( maximals C329 ) by L935 , L934 , L608;
per cases  by L936;
suppose L938: D121 = C331;

thus L939: thesis by L938 , L937 , XBOOLE_0:def 3;
end;
suppose L940: C331 > D121;

L941: D121 <= C331 by L940 , ORDERS_2:def 6;
L942: C330 in ( downarrow ( maximals C329 ) ) by L941 , L937 , WAYBEL_0:def 15;
thus L943: C330 in D119 by L942 , XBOOLE_0:def 3;
end;
end;
thus L945: thesis by L932 , XBOOLE_0:def 10;
end;
theorem
L946: (for B197 being  with_finite_clique#  antisymmetric  transitive RelStr holds (for B198 being (StableSet of B197) holds (( minimals B197 ) c= B198 implies B198 = ( minimals B197 ))))
proof
let C332 being  with_finite_clique#  antisymmetric  transitive RelStr;
let C333 being (StableSet of C332);
assume that
L947: ( minimals C332 ) c= C333;
L948: C333 c= ( minimals C332 )
proof
let C334 being set;
assume L949: C334 in C333;
L950: C332 is non  empty by L949;
reconsider D122 = C334 as (Element of C332) by L949;
consider C335 being (Element of C332) such that L951: C335 is_minimal_in ( [#] C332 ) and L952: (C335 = D122 or C335 < D122) by L950 , L888;
L953: (C335 = D122 or C335 <= D122) by L952 , ORDERS_2:def 6;
L954: C335 in ( minimals C332 ) by L950 , L951 , L586;
thus L955: C334 in ( minimals C332 ) by L954 , L947 , L949 , L953 , L193;
end;
thus L956: C333 = ( minimals C332 ) by L948 , L947 , XBOOLE_0:def 10;
end;
theorem
L957: (for B199 being  with_finite_clique#  antisymmetric  transitive RelStr holds (for B200 being (StableSet of B199) holds (( maximals B199 ) c= B200 implies B200 = ( maximals B199 ))))
proof
let C336 being  with_finite_clique#  antisymmetric  transitive RelStr;
let C337 being (StableSet of C336);
assume that
L958: ( maximals C336 ) c= C337;
L959: C337 c= ( maximals C336 )
proof
let C338 being set;
assume L960: C338 in C337;
L961: C336 is non  empty by L960;
reconsider D123 = C338 as (Element of C336) by L960;
consider C339 being (Element of C336) such that L962: C339 is_maximal_in ( [#] C336 ) and L963: (C339 = D123 or D123 < C339) by L961 , L917;
L964: (C339 = D123 or D123 <= C339) by L963 , ORDERS_2:def 6;
L965: C339 in ( maximals C336 ) by L961 , L962 , L608;
thus L966: C338 in ( maximals C336 ) by L965 , L958 , L960 , L964 , L193;
end;
thus L967: C337 = ( maximals C336 ) by L959 , L958 , XBOOLE_0:def 10;
end;
theorem
L968: (for B201 being  with_finite_clique# RelStr holds (for B202 being (Subset of B201) holds ( clique# ( subrelstr B202 ) ) <= ( clique# B201 )))
proof
let C340 being  with_finite_clique# RelStr;
let C341 being (Subset of C340);
set D124 = ( subrelstr C341 );
consider C342 being  finite (Clique of D124) such that L969: ( card C342 ) = ( clique# D124 ) by L251;
L970: C342 is (Clique of C340) by L718;
thus L971: ( clique# ( subrelstr C341 ) ) <= ( clique# C340 ) by L970 , L251 , L969;
end;
theorem
L972: (for B203 being  with_finite_clique# RelStr holds (for B204 being (Clique of B203) holds (for B205 being (Subset of B203) holds ((( card B204 ) = ( clique# B203 ) & B204 c= B205) implies ( clique# ( subrelstr B205 ) ) = ( clique# B203 )))))
proof
let C343 being  with_finite_clique# RelStr;
let C344 being (Clique of C343);
let C345 being (Subset of C343);
assume that
L973: ( card C344 ) = ( clique# C343 )
and
L974: C344 c= C345;
L975: C344 = ( C344 /\ C345 ) by L974 , XBOOLE_1:28;
L976: C344 is (Clique of ( subrelstr C345 )) by L975 , L727;
consider C346 being (Clique of ( subrelstr C345 )) such that L977: ( card C346 ) = ( clique# ( subrelstr C345 ) ) by L251;
L978: ( card C344 ) <= ( card C346 ) by L976 , L977 , L251;
L979: ( clique# ( subrelstr C345 ) ) <= ( clique# C343 ) by L968;
thus L980: ( clique# ( subrelstr C345 ) ) = ( clique# C343 ) by L979 , L977 , L973 , L978 , XXREAL_0:1;
end;
theorem
L981: (for B206 being  with_finite_stability# RelStr holds (for B207 being (Subset of B206) holds ( stability# ( subrelstr B207 ) ) <= ( stability# B206 )))
proof
let C347 being  with_finite_stability# RelStr;
let C348 being (Subset of C347);
consider C349 being (StableSet of ( subrelstr C348 )) such that L982: ( card C349 ) = ( stability# ( subrelstr C348 ) ) by L309;
L983: C349 is (StableSet of C347) by L741;
thus L984: ( stability# ( subrelstr C348 ) ) <= ( stability# C347 ) by L983 , L982 , L309;
end;
theorem
L985: (for B208 being  with_finite_stability# RelStr holds (for B209 being (StableSet of B208) holds (for B210 being (Subset of B208) holds ((( card B209 ) = ( stability# B208 ) & B209 c= B210) implies ( stability# ( subrelstr B210 ) ) = ( stability# B208 )))))
proof
let C350 being  with_finite_stability# RelStr;
let C351 being (StableSet of C350);
let C352 being (Subset of C350);
assume that
L986: ( card C351 ) = ( stability# C350 )
and
L987: C351 c= C352;
L988: C351 = ( C351 /\ C352 ) by L987 , XBOOLE_1:28;
L989: C351 is (StableSet of ( subrelstr C352 )) by L988 , L762;
consider C353 being (StableSet of ( subrelstr C352 )) such that L990: ( card C353 ) = ( stability# ( subrelstr C352 ) ) by L309;
L991: ( card C351 ) <= ( card C353 ) by L989 , L990 , L309;
L992: ( stability# ( subrelstr C352 ) ) <= ( stability# C350 ) by L981;
thus L993: ( stability# ( subrelstr C352 ) ) = ( stability# C350 ) by L992 , L990 , L986 , L991 , XXREAL_0:1;
end;
begin
definition
let C354 being RelStr;
let C355 being (a_partition of (the carrier of C354));
attr C355 is  Clique-wise
means
:L994: (for B211 being set holds (B211 in C355 implies B211 is (Clique of C354)));
end;
registration
let C356 being RelStr;
cluster  Clique-wise for (a_partition of (the carrier of C356));
existence
proof
set D125 = (the carrier of C356);
per cases ;
suppose L996: C356 is  empty;

reconsider D126 = ( {} ) as (a_partition of D125) by L996 , EQREL_1:45;
take D126;
thus L997: (for B212 being set holds (B212 in D126 implies B212 is (Clique of C356)));
end;
suppose L998: C356 is non  empty;

take D127 = ( SmallestPartition D125 );
let C357 being set;
assume L999: C357 in D127;
L1000: D127 = { { B213 } where B213 is (Element of D125) : (not contradiction) } by L998 , EQREL_1:37;
consider C358 being (Element of D125) such that L1001: C357 = { C358 } and L1002: (not contradiction) by L1000 , L999;
thus L1003: C357 is (Clique of C356) by L1001 , L998 , SUBSET_1:33;
end;
end;
end;
definition
let C359 being RelStr;
mode Clique-partition of C359
 is  Clique-wise (a_partition of (the carrier of C359));
end;
registration
let C360 being  empty RelStr;
cluster  empty ->  Clique-wise for (a_partition of (the carrier of C360));
coherence
proof
let C361 being (a_partition of (the carrier of C360));
assume that
L1007: C361 is  empty;
let C362 being set;
thus L1008: thesis;
end;
end;
theorem
L1010: (for B214 being  finite RelStr holds (for B215 being (Clique-partition of B214) holds ( card B215 ) >= ( stability# B214 )))
proof
let C363 being  finite RelStr;
let C364 being (Clique-partition of C363);
assume L1011: ( card C364 ) < ( stability# C363 );
consider C365 being (StableSet of C363) such that L1012: ( card C365 ) = ( stability# C363 ) by L309;
L1013: (( card ( card C364 ) ) = ( card C364 ) & ( card ( card C365 ) ) = ( card C365 ));
L1014: ( card C364 ) in ( card C365 ) by L1013 , L1011 , L1012 , NAT_1:41;
set D128 = (the carrier of C363);
per cases ;
suppose L1015: C363 is  empty;

thus L1016: contradiction by L1015 , L1011;
end;
suppose L1017: C363 is non  empty;

defpred S7[ set , set ] means ($1 in C365 & $2 in C364 & $1 in $2);
L1018: (for B216 being set holds (B216 in C365 implies (ex B217 being set st (B217 in C364 & S7[ B216 , B217 ]))))
proof
let C366 being set;
assume that
L1019: C366 in C365;
reconsider D129 = C366 as (Element of C363) by L1019;
L1020: D128 is non  empty by L1017;
L1021: D129 in D128 by L1020;
L1022: C366 in ( union C364 ) by L1021 , EQREL_1:def 4;
consider C367 being set such that L1023: C366 in C367 and L1024: C367 in C364 by L1022 , TARSKI:def 4;
take C367;
thus L1025: thesis by L1019 , L1023 , L1024;
end;
consider C368 being (Function of C365 , C364) such that L1026: (for B218 being set holds (B218 in C365 implies S7[ B218 , ( C368 . B218 ) ])) from FUNCT_2:sch 1(L1018);
consider C369 , C370 being set such that L1027: C369 in C365 and L1028: C370 in C365 and L1029: C369 <> C370 and L1030: ( C368 . C369 ) = ( C368 . C370 ) by L1017 , L1014 , FINSEQ_4:65;
L1031: ( C368 . C369 ) in C364 by L1027 , FUNCT_2:5;
L1032: ( C368 . C369 ) is (Clique of C363) by L1031 , L994;
L1033: (C369 in ( C368 . C369 ) & C370 in ( C368 . C369 )) by L1030 , L1027 , L1028 , L1026;
thus L1034: contradiction by L1033 , L1032 , L1027 , L1028 , L1029 , L218;
end;
end;
theorem
L1036: (for B219 being  with_finite_stability# RelStr holds (for B220 being (StableSet of B219) holds (for B221 being (Clique-partition of B219) holds (( card B221 ) = ( card B220 ) implies (ex B222 being (Function of B220 , B221) st (B222 is  bijective & (for B223 being set holds (B223 in B220 implies B223 in ( B222 . B223 )))))))))
proof
let C371 being  with_finite_stability# RelStr;
let C372 being (StableSet of C371);
let C373 being (Clique-partition of C371);
assume that
L1037: ( card C373 ) = ( card C372 );
set D130 = (the carrier of C371);
per cases ;
suppose L1038: C371 is  empty;

L1039: (the carrier of C371) is  empty by L1038;
L1040: C373 = ( {} ) by L1039 , EQREL_1:32;
set D131 = the (Function of C372 , C373);
L1041: ( dom D131 ) = ( {} ) by L1038;
reconsider D132 = ( {} ) as (Function of C372 , C373) by L1041 , RELAT_1:41;
L1042: D132 is  onto by L1040 , FUNCT_2:def 3 , RELAT_1:38;
take D132;
thus L1043: D132 is  bijective by L1042;
thus L1044: thesis;
end;
suppose L1045: C371 is non  empty;

defpred S8[ set , set ] means ($1 in C372 & $2 in C373 & $1 in $2);
L1046: (for B224 being set holds (B224 in C372 implies (ex B225 being set st (B225 in C373 & S8[ B224 , B225 ]))))
proof
let C374 being set;
assume L1047: C374 in C372;
reconsider D133 = C374 as (Element of C371) by L1047;
L1048: D130 is non  empty by L1045;
L1049: D133 in D130 by L1048;
L1050: D133 in ( union C373 ) by L1049 , EQREL_1:def 4;
consider C375 being set such that L1051: C374 in C375 and L1052: C375 in C373 by L1050 , TARSKI:def 4;
take C375;
thus L1053: thesis by L1047 , L1051 , L1052;
end;
consider C376 being (Function of C372 , C373) such that L1054: (for B226 being set holds (B226 in C372 implies S8[ B226 , ( C376 . B226 ) ])) from FUNCT_2:sch 1(L1046);
take C376;
L1055: C376 is  one-to-one
proof
let C377 , C378 being set;
assume that
L1056: C377 in ( dom C376 )
and
L1057: C378 in ( dom C376 )
and
L1058: ( C376 . C377 ) = ( C376 . C378 );
L1059: C377 in ( C376 . C377 ) by L1056 , L1054;
L1060: C378 in ( C376 . C378 ) by L1057 , L1054;
L1061: ( C376 . C377 ) in C373 by L1045 , L1056 , FUNCT_2:5;
L1062: ( C376 . C377 ) is (Clique of C371) by L1061 , L994;
thus L1063: C377 = C378 by L1062 , L1056 , L1057 , L1059 , L1060 , L1058 , L218;
end;
L1064: C373 is  finite by L1037;
L1065: ( rng C376 ) = C373 by L1064 , L1037 , L1055 , FINSEQ_4:63;
L1066: C376 is  onto by L1065 , FUNCT_2:def 3;
thus L1067: C376 is  bijective by L1066 , L1055;
let C379 being set;
assume L1068: C379 in C372;
thus L1069: C379 in ( C376 . C379 ) by L1068 , L1054;
end;
end;
theorem
L1071: (for B227 being  finite RelStr holds (for B228 being (StableSet of B227) holds (for B229 being (Clique-partition of B227) holds (( card B229 ) = ( card B228 ) implies (for B230 being set holds (B230 in B229 implies (ex B231 being (Element of B228) st ( B230 /\ B228 ) = { B231 })))))))
proof
let C380 being  finite RelStr;
let C381 being (StableSet of C380);
let C382 being (Clique-partition of C380);
assume that
L1072: ( card C382 ) = ( card C381 );
consider C383 being (Function of C381 , C382) such that L1073: C383 is  bijective and L1074: (for B232 being set holds (B232 in C381 implies B232 in ( C383 . B232 ))) by L1072 , L1036;
let C384 being set;
assume that
L1075: C384 in C382;
L1076: ( rng C383 ) = C382 by L1073 , FUNCT_2:def 3;
consider C385 being set such that L1077: C385 in ( dom C383 ) and L1078: C384 = ( C383 . C385 ) by L1076 , L1075 , FUNCT_1:def 3;
L1079: C385 in C384 by L1077 , L1078 , L1074;
reconsider D134 = C385 as (Element of C381) by L1077;
take D134;
L1080:
now
let C386 being set;
thus L1081:now
assume L1082: C386 in ( C384 /\ C381 );
L1083: (C386 in C384 & C386 in C381) by L1082 , XBOOLE_0:def 4;
L1084: C384 is (Clique of C380) by L1075 , L994;
thus L1085: C386 = D134 by L1084 , L1083 , L1079 , L218;
end;
assume L1086: C386 = D134;
thus L1087: C386 in ( C384 /\ C381 ) by L1086 , L1079 , L1077 , XBOOLE_0:def 4;
end;
thus L1088: ( C384 /\ C381 ) = { D134 } by L1080 , TARSKI:def 1;
end;
theorem
L1089: (for B233 being  with_finite_stability#  antisymmetric  transitive non  empty RelStr holds (for B234 being (StableSet of B233) holds (for B235 being (Clique-partition of ( subrelstr ( Upper B234 ) )) holds (for B236 being (Clique-partition of ( subrelstr ( Lower B234 ) )) holds ((( card B234 ) = ( stability# B233 ) & ( card B235 ) = ( stability# B233 ) & ( card B236 ) = ( stability# B233 )) implies (ex B237 being (Clique-partition of B233) st ( card B237 ) = ( stability# B233 )))))))
proof
let C387 being  with_finite_stability#  antisymmetric  transitive non  empty RelStr;
let C388 being (StableSet of C387);
let C389 being (Clique-partition of ( subrelstr ( Upper C388 ) ));
let C390 being (Clique-partition of ( subrelstr ( Lower C388 ) ));
assume that
L1090: ( card C388 ) = ( stability# C387 )
and
L1091: ( card C389 ) = ( stability# C387 )
and
L1092: ( card C390 ) = ( stability# C387 );
L1093: C388 is non  empty by L1090;
set D135 = ( Upper C388 );
set D136 = ( Lower C388 );
set D137 = (the carrier of C387);
set D138 = ( subrelstr D135 );
set D139 = ( subrelstr D136 );
L1094: D135 = (the carrier of D138) by YELLOW_0:def 15;
L1095: D136 = (the carrier of D139) by YELLOW_0:def 15;
reconsider D140 = ( subrelstr ( Upper C388 ) ) as  with_finite_stability#  antisymmetric  transitive non  empty RelStr by L1093;
L1096: ( C388 /\ ( Upper C388 ) ) = C388 by XBOOLE_1:21;
L1097: C388 is (StableSet of D140) by L1096 , L762;
consider C391 being (Function of C388 , C389) such that L1098: C391 is  bijective and L1099: (for B238 being set holds (B238 in C388 implies B238 in ( C391 . B238 ))) by L1097 , L1090 , L1091 , L1036;
L1100: ( dom C391 ) = C388 by L1093 , FUNCT_2:def 1;
L1101: ( rng C391 ) = C389 by L1098 , FUNCT_2:def 3;
reconsider D141 = ( subrelstr ( Lower C388 ) ) as  with_finite_stability#  antisymmetric  transitive non  empty RelStr by L1093;
L1102: ( C388 /\ ( Lower C388 ) ) = C388 by XBOOLE_1:21;
L1103: C388 is (StableSet of D141) by L1102 , L762;
consider C392 being (Function of C388 , C390) such that L1104: C392 is  bijective and L1105: (for B239 being set holds (B239 in C388 implies B239 in ( C392 . B239 ))) by L1103 , L1090 , L1092 , L1036;
L1106: ( dom C392 ) = C388 by L1093 , FUNCT_2:def 1;
L1107: ( rng C392 ) = C390 by L1104 , FUNCT_2:def 3;
set D142 = ( C391 .\/ C392 );
set D143 = ( rng D142 );
L1108: ( dom D142 ) = ( ( dom C391 ) \/ ( dom C392 ) ) by LEXBFS:def 2;
L1109: D143 c= ( bool D137 )
proof
let C393 being set;
assume L1110: C393 in D143;
consider C394 being set such that L1111: C394 in ( dom D142 ) and L1112: ( D142 . C394 ) = C393 by L1110 , FUNCT_1:def 3;
L1113: ( D142 . C394 ) = ( ( C391 . C394 ) \/ ( C392 . C394 ) ) by L1111 , L1108 , LEXBFS:def 2;
L1114: ( C391 . C394 ) in C389 by L1111 , L1108 , FUNCT_2:5;
L1115: ( C391 . C394 ) c= D137 by L1114 , L1094 , XBOOLE_1:1;
L1116: ( C392 . C394 ) in C390 by L1111 , L1108 , FUNCT_2:5;
L1117: ( C392 . C394 ) c= D137 by L1116 , L1095 , XBOOLE_1:1;
L1118: C393 c= D137 by L1117 , L1112 , L1113 , L1115 , XBOOLE_1:8;
thus L1119: C393 in ( bool D137 ) by L1118;
end;
L1120: ( union D143 ) = D137
proof
L1121:
now
let C395 being set;
thus L1122:now
assume L1123: C395 in ( union D143 );
consider C396 being set such that L1124: C395 in C396 and L1125: C396 in D143 by L1123 , TARSKI:def 4;
consider C397 being set such that L1126: C397 in ( dom D142 ) and L1127: C396 = ( D142 . C397 ) by L1125 , FUNCT_1:def 3;
L1128: C395 in ( ( C391 . C397 ) \/ ( C392 . C397 ) ) by L1126 , L1127 , L1124 , L1108 , LEXBFS:def 2;
per cases  by L1128 , XBOOLE_0:def 3;
suppose L1129: C395 in ( C391 . C397 );

L1130: ( C391 . C397 ) in C389 by L1126 , L1108 , FUNCT_2:5;
L1131: C395 in D135 by L1130 , L1129 , L1094;
thus L1132: C395 in D137 by L1131;
end;
suppose L1133: C395 in ( C392 . C397 );

L1134: ( C392 . C397 ) in C390 by L1126 , L1108 , FUNCT_2:5;
L1135: C395 in D136 by L1134 , L1133 , L1095;
thus L1136: C395 in D137 by L1135;
end;
end;
assume L1138: C395 in ( [#] C387 );
L1139: C395 in ( ( Upper C388 ) \/ ( Lower C388 ) ) by L1138 , L1090 , L514;
per cases  by L1139 , XBOOLE_0:def 3;
suppose L1140: C395 in ( Upper C388 );

L1141: C395 in ( union C389 ) by L1140 , L1094 , EQREL_1:def 4;
consider C398 being set such that L1142: C395 in C398 and L1143: C398 in C389 by L1141 , TARSKI:def 4;
consider C399 being set such that L1144: C399 in ( dom C391 ) and L1145: C398 = ( C391 . C399 ) by L1143 , L1101 , FUNCT_1:def 3;
L1146: ( D142 . C399 ) in ( rng D142 ) by L1144 , L1108 , L1100 , L1106 , FUNCT_1:3;
L1147: ( D142 . C399 ) = ( ( C391 . C399 ) \/ ( C392 . C399 ) ) by L1144 , L1108 , L1100 , L1106 , LEXBFS:def 2;
L1148: C395 in ( D142 . C399 ) by L1147 , L1142 , L1145 , XBOOLE_0:def 3;
thus L1149: C395 in ( union D143 ) by L1148 , L1146 , TARSKI:def 4;
end;
suppose L1150: C395 in ( Lower C388 );

L1151: C395 in ( union C390 ) by L1150 , L1095 , EQREL_1:def 4;
consider C400 being set such that L1152: C395 in C400 and L1153: C400 in C390 by L1151 , TARSKI:def 4;
consider C401 being set such that L1154: C401 in ( dom C392 ) and L1155: C400 = ( C392 . C401 ) by L1153 , L1107 , FUNCT_1:def 3;
L1156: ( D142 . C401 ) in ( rng D142 ) by L1154 , L1108 , L1100 , L1106 , FUNCT_1:3;
L1157: ( D142 . C401 ) = ( ( C391 . C401 ) \/ ( C392 . C401 ) ) by L1154 , L1108 , L1100 , L1106 , LEXBFS:def 2;
L1158: C395 in ( D142 . C401 ) by L1157 , L1152 , L1155 , XBOOLE_0:def 3;
thus L1159: C395 in ( union D143 ) by L1158 , L1156 , TARSKI:def 4;
end;
end;
thus L1161: thesis by L1121 , TARSKI:1;
end;
L1162:
now
let C402 being (Subset of D137);
assume L1163: C402 in D143;
consider C403 being set such that L1164: C403 in ( dom D142 ) and L1165: ( D142 . C403 ) = C402 by L1163 , FUNCT_1:def 3;
L1166: ( D142 . C403 ) = ( ( C391 . C403 ) \/ ( C392 . C403 ) ) by L1164 , L1108 , LEXBFS:def 2;
set D144 = ( C391 . C403 );
set D145 = ( C392 . C403 );
L1167: D144 in C389 by L1164 , L1108 , FUNCT_2:5;
reconsider D146 = D144 as (Subset of D140) by L1167;
L1168: D145 in C390 by L1164 , L1108 , FUNCT_2:5;
reconsider D147 = D145 as (Subset of D141) by L1168;
L1169: D146 <> ( {} ) by L1167 , EQREL_1:def 4;
thus L1170: C402 <> ( {} ) by L1169 , L1165 , L1166;
let C404 being (Subset of D137);
assume L1171: C404 in D143;
consider C405 being set such that L1172: C405 in ( dom D142 ) and L1173: ( D142 . C405 ) = C404 by L1171 , FUNCT_1:def 3;
L1174: ( D142 . C405 ) = ( ( C391 . C405 ) \/ ( C392 . C405 ) ) by L1172 , L1108 , LEXBFS:def 2;
set D148 = ( C391 . C405 );
set D149 = ( C392 . C405 );
L1175: D148 in C389 by L1172 , L1108 , FUNCT_2:5;
reconsider D150 = D148 as (Subset of D140) by L1175;
L1176: D149 in C390 by L1172 , L1108 , FUNCT_2:5;
reconsider D151 = D149 as (Subset of D141) by L1176;
assume L1177: C402 <> C404;
L1178: D146 <> D150 by L1177 , L1098 , L1165 , L1173 , L1164 , L1172 , L1108 , L1100 , FUNCT_1:def 4;
L1179: D147 <> D151 by L1104 , L1177 , L1165 , L1173 , L1164 , L1172 , L1108 , L1106 , FUNCT_1:def 4;
assume L1180: C402 meets C404;
L1181: ( C402 /\ C404 ) <> ( {} ) by L1180 , XBOOLE_0:def 7;
consider C406 being set such that L1182: C406 in ( C402 /\ C404 ) by L1181 , XBOOLE_0:def 1;
L1183: C406 in C402 by L1182 , XBOOLE_0:def 4;
L1184: C406 in C404 by L1182 , XBOOLE_0:def 4;
set D152 = ( C391 . C406 );
set D153 = ( C392 . C406 );
per cases  by L1183 , L1184 , L1165 , L1173 , L1166 , L1174 , XBOOLE_0:def 3;
suppose L1185: (C406 in D146 & C406 in D150);

L1186: C406 in ( D146 /\ D150 ) by L1185 , XBOOLE_0:def 4;
L1187: D146 meets D150 by L1186 , XBOOLE_0:def 7;
thus L1188: contradiction by L1187 , L1167 , L1175 , L1178 , EQREL_1:def 4;
end;
suppose L1189: (C406 in D146 & C406 in D151);

L1190: C406 in C388 by L1189 , L1094 , L1095 , L498;
L1191: C406 in ( C391 . C406 ) by L1189 , L1094 , L1095 , L498 , L1099;
L1192: D152 in C389 by L1189 , L1094 , L1095 , L498 , FUNCT_2:5;
reconsider D154 = D152 as (Subset of D140) by L1192;
L1193: C406 in ( D146 /\ D154 ) by L1189 , L1191 , XBOOLE_0:def 4;
L1194: D154 meets D146 by L1193 , XBOOLE_0:def 7;
L1195: D154 = D146 by L1194 , L1167 , L1192 , EQREL_1:def 4;
L1196: C406 = C403 by L1195 , L1098 , L1164 , L1190 , L1108 , L1100 , FUNCT_1:def 4;
L1197: C406 in ( C392 . C406 ) by L1189 , L1094 , L1095 , L498 , L1105;
L1198: D153 in C390 by L1189 , L1094 , L1095 , L498 , FUNCT_2:5;
reconsider D155 = D153 as (Subset of D141) by L1198;
L1199: C406 in ( D155 /\ D151 ) by L1189 , L1197 , XBOOLE_0:def 4;
L1200: D155 meets D151 by L1199 , XBOOLE_0:def 7;
L1201: D155 = D151 by L1200 , L1176 , L1198 , EQREL_1:def 4;
thus L1202: contradiction by L1201 , L1196 , L1177 , L1165 , L1173 , L1104 , L1172 , L1190 , L1108 , L1106 , FUNCT_1:def 4;
end;
suppose L1203: (C406 in D147 & C406 in D150);

L1204: C406 in C388 by L1203 , L1094 , L1095 , L498;
L1205: C406 in ( C391 . C406 ) by L1203 , L1094 , L1095 , L498 , L1099;
L1206: D152 in C389 by L1203 , L1094 , L1095 , L498 , FUNCT_2:5;
reconsider D156 = D152 as (Subset of D140) by L1206;
L1207: C406 in ( D150 /\ D156 ) by L1203 , L1205 , XBOOLE_0:def 4;
L1208: D156 meets D150 by L1207 , XBOOLE_0:def 7;
L1209: D156 = D150 by L1208 , L1175 , L1206 , EQREL_1:def 4;
L1210: C406 = C405 by L1209 , L1098 , L1172 , L1204 , L1108 , L1100 , FUNCT_1:def 4;
L1211: C406 in ( C392 . C406 ) by L1203 , L1094 , L1095 , L498 , L1105;
L1212: D153 in C390 by L1203 , L1094 , L1095 , L498 , FUNCT_2:5;
reconsider D157 = D153 as (Subset of D141) by L1212;
L1213: C406 in ( D157 /\ D147 ) by L1203 , L1211 , XBOOLE_0:def 4;
L1214: D157 meets D147 by L1213 , XBOOLE_0:def 7;
L1215: D157 = D147 by L1214 , L1168 , L1212 , EQREL_1:def 4;
thus L1216: contradiction by L1215 , L1210 , L1177 , L1165 , L1173 , L1104 , L1164 , L1204 , L1108 , L1106 , FUNCT_1:def 4;
end;
suppose L1217: (C406 in D147 & C406 in D151);

L1218: C406 in ( D147 /\ D151 ) by L1217 , XBOOLE_0:def 4;
L1219: D147 meets D151 by L1218 , XBOOLE_0:def 7;
thus L1220: contradiction by L1219 , L1168 , L1176 , L1179 , EQREL_1:def 4;
end;
end;
L1222: (for B240 being set holds (B240 in D143 implies B240 is (Clique of C387)))
proof
let C407 being set;
assume L1223: C407 in D143;
consider C408 being set such that L1224: C408 in ( dom D142 ) and L1225: C407 = ( D142 . C408 ) by L1223 , FUNCT_1:def 3;
L1226: C407 = ( ( C391 . C408 ) \/ ( C392 . C408 ) ) by L1224 , L1225 , L1108 , LEXBFS:def 2;
set D158 = ( C391 . C408 );
set D159 = ( C392 . C408 );
L1227: D158 in C389 by L1224 , L1108 , FUNCT_2:5;
L1228: D158 is (Clique of D140) by L1227 , L994;
L1229: D158 is (Clique of C387) by L1228 , L718;
L1230: D159 in C390 by L1224 , L1108 , FUNCT_2:5;
L1231: D159 is (Clique of D141) by L1230 , L994;
L1232: D159 is (Clique of C387) by L1231 , L718;
reconsider D160 = C407 as (Subset of C387) by L1232 , L1226 , L1229 , XBOOLE_1:8;
L1233:
now
let C409 , C410 being (Element of C387);
assume that
L1234: C409 in D160
and
L1235: C410 in D160
and
L1236: C409 <> C410;
L1237: C408 in D158 by L1224 , L1108 , L1099;
L1238: C408 in D159 by L1224 , L1108 , L1105;
reconsider D161 = C408 as (Element of C387) by L1224 , L1108 , L1100 , L1106;
per cases  by L1234 , L1235 , L1226 , XBOOLE_0:def 3;
suppose L1239: (C409 in ( C391 . D161 ) & C410 in ( C391 . D161 ));

thus L1240: (C409 <= C410 or C410 <= C409) by L1239 , L1229 , L1236 , L59;
end;
suppose L1241: (C409 in ( C391 . D161 ) & C410 in ( C392 . D161 ));

L1242: (D161 = C409 or D161 <= C409) by L1241 , L1237 , L1224 , L1108 , L1228 , L829;
L1243: (D161 = C410 or C410 <= D161) by L1238 , L1241 , L1224 , L1108 , L1231 , L805;
thus L1244: (C409 <= C410 or C410 <= C409) by L1243 , L1236 , L1242 , YELLOW_0:def 2;
end;
suppose L1245: (C409 in ( C392 . D161 ) & C410 in ( C391 . D161 ));

L1246: (D161 = C409 or C409 <= D161) by L1245 , L1238 , L1224 , L1108 , L1231 , L805;
L1247: (D161 = C410 or D161 <= C410) by L1237 , L1245 , L1224 , L1108 , L1228 , L829;
thus L1248: (C409 <= C410 or C410 <= C409) by L1247 , L1236 , L1246 , YELLOW_0:def 2;
end;
suppose L1249: (C409 in ( C392 . D161 ) & C410 in ( C392 . D161 ));

thus L1250: (C409 <= C410 or C410 <= C409) by L1249 , L1232 , L1236 , L59;
end;
end;
thus L1252: C407 is (Clique of C387) by L1233 , L59;
end;
L1253: D142 is  one-to-one
proof
let C411 , C412 being set;
assume that
L1254: C411 in ( dom D142 )
and
L1255: C412 in ( dom D142 )
and
L1256: ( D142 . C411 ) = ( D142 . C412 );
L1257: ( D142 . C411 ) is (Clique of C387) by L1222 , L1254 , FUNCT_1:3;
L1258: ( D142 . C411 ) = ( ( C391 . C411 ) \/ ( C392 . C411 ) ) by L1108 , L1254 , LEXBFS:def 2;
L1259: (C411 in ( C391 . C411 ) & C411 in ( C392 . C411 )) by L1254 , L1108 , L1099 , L1105;
L1260: C411 in ( D142 . C411 ) by L1259 , L1258 , XBOOLE_0:def 3;
L1261: ( D142 . C412 ) = ( ( C391 . C412 ) \/ ( C392 . C412 ) ) by L1108 , L1255 , LEXBFS:def 2;
L1262: (C412 in ( C391 . C412 ) & C412 in ( C392 . C412 )) by L1255 , L1108 , L1099 , L1105;
L1263: C412 in ( D142 . C412 ) by L1262 , L1261 , XBOOLE_0:def 3;
thus L1264: C411 = C412 by L1263 , L1108 , L1254 , L1255 , L1256 , L1257 , L1260 , L218;
end;
reconsider D162 = D143 as (Clique-partition of C387) by L1109 , L1120 , L1162 , L1222 , L994 , EQREL_1:def 4;
take D162;
L1265: ( card D162 ) = ( card D142 ) by L1253 , PRE_POLY:19
.= ( card C388 ) by L1108 , L1100 , L1106 , CARD_1:62;
thus L1266: ( card D162 ) = ( stability# C387 ) by L1265 , L1090;
end;
definition
let C413 being RelStr;
let C414 being (a_partition of (the carrier of C413));
attr C414 is  StableSet-wise
means
:L1267: (for B241 being set holds (B241 in C414 implies B241 is (StableSet of C413)));
end;
registration
let C415 being RelStr;
cluster  StableSet-wise for (a_partition of (the carrier of C415));
existence
proof
set D163 = (the carrier of C415);
per cases ;
suppose L1269: C415 is  empty;

reconsider D164 = ( {} ) as (a_partition of D163) by L1269 , EQREL_1:45;
take D164;
let C416 being set;
thus L1270: thesis;
end;
suppose L1271: C415 is non  empty;

reconsider D165 = C415 as non  empty RelStr by L1271;
take D166 = ( SmallestPartition D163 );
let C417 being set;
assume L1272: C417 in D166;
L1273: D166 = { { B242 } where B242 is (Element of D163) : (not contradiction) } by L1271 , EQREL_1:37;
consider C418 being (Element of D165) such that L1274: C417 = { C418 } by L1273 , L1272;
thus L1275: C417 is (StableSet of C415) by L1274;
end;
end;
end;
definition
let C419 being RelStr;
mode Coloring of C419
 is  StableSet-wise (a_partition of (the carrier of C419));
end;
registration
let C420 being  empty RelStr;
cluster  ->  StableSet-wise for (a_partition of (the carrier of C420));
coherence
proof
let C421 being (a_partition of (the carrier of C420));
let C422 being set;
thus L1279: thesis;
end;
end;
theorem
L1281: (for B243 being  finite RelStr holds (for B244 being (Coloring of B243) holds ( card B244 ) >= ( clique# B243 )))
proof
let C423 being  finite RelStr;
let C424 being (Coloring of C423);
assume L1282: ( card C424 ) < ( clique# C423 );
consider C425 being (Clique of C423) such that L1283: ( card C425 ) = ( clique# C423 ) by L251;
L1284: (( card ( card C424 ) ) = ( card C424 ) & ( card ( card C425 ) ) = ( card C425 ));
L1285: ( card C424 ) in ( card C425 ) by L1284 , L1282 , L1283 , NAT_1:41;
set D167 = (the carrier of C423);
per cases ;
suppose L1286: C423 is  empty;

thus L1287: contradiction by L1286 , L1282;
end;
suppose L1288: C423 is non  empty;

defpred S9[ set , set ] means ($1 in C425 & $2 in C424 & $1 in $2);
L1289: (for B245 being set holds (B245 in C425 implies (ex B246 being set st (B246 in C424 & S9[ B245 , B246 ]))))
proof
let C426 being set;
assume that
L1290: C426 in C425;
reconsider D168 = C426 as (Element of C423) by L1290;
L1291: D167 is non  empty by L1288;
L1292: D168 in D167 by L1291;
L1293: C426 in ( union C424 ) by L1292 , EQREL_1:def 4;
consider C427 being set such that L1294: C426 in C427 and L1295: C427 in C424 by L1293 , TARSKI:def 4;
take C427;
thus L1296: thesis by L1290 , L1294 , L1295;
end;
consider C428 being (Function of C425 , C424) such that L1297: (for B247 being set holds (B247 in C425 implies S9[ B247 , ( C428 . B247 ) ])) from FUNCT_2:sch 1(L1289);
consider C429 , C430 being set such that L1298: C429 in C425 and L1299: C430 in C425 and L1300: C429 <> C430 and L1301: ( C428 . C429 ) = ( C428 . C430 ) by L1288 , L1285 , FINSEQ_4:65;
L1302: ( C428 . C429 ) in C424 by L1298 , FUNCT_2:5;
L1303: ( C428 . C429 ) is (StableSet of C423) by L1302 , L1267;
L1304: (C429 in ( C428 . C429 ) & C430 in ( C428 . C429 )) by L1301 , L1298 , L1299 , L1297;
thus L1305: contradiction by L1304 , L1303 , L1298 , L1299 , L1300 , L218;
end;
end;
begin
::$N Dilworth's Decomposition Theorem
theorem
L1307: (for B248 being  finite  antisymmetric  transitive RelStr holds (ex B249 being (Clique-partition of B248) st ( card B249 ) = ( stability# B248 )))
proof
defpred S10[ Nat ] means (for B250 being  finite  antisymmetric  transitive RelStr holds (( card B250 ) = $1 implies (ex B251 being (Clique-partition of B250) st ( card B251 ) = ( stability# B250 ))));
L1308: (for B252 being Nat holds ((for B253 being Nat holds (B253 < B252 implies S10[ B253 ])) implies S10[ B252 ]))
proof
let C431 being Nat;
assume L1309: (for B254 being Nat holds (B254 < C431 implies S10[ B254 ]));
let C432 being  finite  antisymmetric  transitive RelStr;
assume L1310: ( card C432 ) = C431;
set D169 = ( stability# C432 );
per cases ;
suppose L1311: C431 = ( 0 );

L1312: C432 is  empty by L1311 , L1310;
reconsider D170 = ( {} ) as (Clique-partition of C432) by L1312 , EQREL_1:45;
take D170;
L1313: C432 is  empty by L1310 , L1311;
thus L1314: ( card D170 ) = ( stability# C432 ) by L1313 , L1310 , L1311;
end;
suppose L1315: C431 > ( 0 );

per cases ;
suppose L1316: (ex B255 being (StableSet of C432) st (( card B255 ) = ( stability# C432 ) & B255 <> ( minimals C432 ) & B255 <> ( maximals C432 )));

consider C433 being (StableSet of C432) such that L1317: ( card C433 ) = ( stability# C432 ) and L1318: C433 <> ( minimals C432 ) and L1319: C433 <> ( maximals C432 ) by L1316;
set D171 = ( Upper C433 );
set D172 = ( Lower C433 );
set D173 = (the carrier of C432);
set D174 = ( subrelstr D171 );
set D175 = ( subrelstr D172 );
reconsider D176 = C432 as  finite non  empty  antisymmetric  transitive RelStr by L1315 , L1310;
L1320: D171 = (the carrier of D174) by YELLOW_0:def 15;
L1321: D172 = (the carrier of D175) by YELLOW_0:def 15;
L1322: (not ( minimals D176 ) c= D171) by L1318 , L946 , L687;
consider C434 being set such that L1323: C434 in ( minimals C432 ) and L1324: (not C434 in D171) by L1322 , TARSKI:def 3;
L1325: (not ( maximals D176 ) c= D172) by L1319 , L957 , L702;
consider C435 being set such that L1326: C435 in ( maximals C432 ) and L1327: (not C435 in D172) by L1325 , TARSKI:def 3;
reconsider D177 = D174 as  finite  antisymmetric  transitive RelStr;
L1328: C434 in D173 by L1323;
L1329: D171 c< D173 by L1328 , L1324 , XBOOLE_0:def 8;
L1330: ( card D177 ) < ( card C432 ) by L1329 , L1320 , CARD_2:48;
consider C436 being (Clique-partition of D177) such that L1331: ( card C436 ) = ( stability# D177 ) by L1330 , L1309 , L1310;
L1332: ( stability# D177 ) = D169 by L1317 , L985 , XBOOLE_1:7;
reconsider D178 = D175 as  finite  antisymmetric  transitive RelStr;
L1333: C435 in D173 by L1326;
L1334: D172 c< D173 by L1333 , L1327 , XBOOLE_0:def 8;
L1335: ( card D178 ) < ( card C432 ) by L1334 , L1321 , CARD_2:48;
consider C437 being (Clique-partition of D178) such that L1336: ( card C437 ) = ( stability# D178 ) by L1335 , L1309 , L1310;
L1337: ( stability# D178 ) = D169 by L1317 , L985 , XBOOLE_1:7;
consider C438 being (Clique-partition of C432) such that L1338: ( card C438 ) = ( stability# D176 ) by L1337 , L1317 , L1331 , L1332 , L1336 , L1089;
take C438;
thus L1339: ( card C438 ) = ( stability# C432 ) by L1338;
end;
suppose L1340: (for B256 being (StableSet of C432) holds (( card B256 ) = ( stability# C432 ) implies (B256 = ( minimals C432 ) or B256 = ( maximals C432 ))));

consider C439 being (StableSet of C432) such that L1341: ( card C439 ) = ( stability# C432 ) by L309;
reconsider D179 = C432 as  finite non  empty  antisymmetric  transitive RelStr by L1315 , L1310;
set D180 = (the carrier of D179);
set D181 = the (Element of ( minimals C432 ));
L1342: D181 in ( minimals D179 );
reconsider D182 = D181 as (Element of D179) by L1342;
consider C440 being (Element of D179) such that L1343: C440 is_maximal_in ( [#] D179 ) and L1344: (D182 = C440 or D182 < C440) by L917;
L1345: C440 in ( maximals C432 ) by L1343 , L608;
set D183 = (the carrier of C432);
set D184 = { D182 , C440 };
set D185 = ( D183 \ D184 );
L1346: D183 = ( D185 \/ D184 ) by XBOOLE_1:45;
L1347: D185 misses { D182 , C440 } by XBOOLE_1:79;
L1348: ( D183 \ D185 ) = { D182 , C440 } by L1347 , L1346 , XBOOLE_1:88;
reconsider D186 = D185 as (Subset of D180);
set D187 = ( subrelstr D186 );
L1349: D186 = (the carrier of D187) by YELLOW_0:def 15;
L1350: ( card D186 ) = ( card D187 ) by YELLOW_0:def 15;
L1351: ( card D186 ) = ( ( card D183 ) - ( card { D182 , C440 } ) ) by CARD_2:44;
consider C441 being (Clique-partition of D187) such that L1352: ( card C441 ) = ( stability# D187 ) by L1351 , L1309 , L1310 , L1350 , XREAL_1:44;
L1353: (not { D182 , C440 } in C441)
proof
assume L1354: { D182 , C440 } in C441;
L1355: D182 in { D182 , C440 } by TARSKI:def 2;
thus L1356: contradiction by L1355 , L1347 , L1349 , L1354 , ZFMISC_1:49;
end;
set D188 = ( stability# D179 );
set D189 = ( D188 - 1 );
L1357: ( ( 0 ) + 1 ) <= D188 by NAT_1:13;
L1358: ( ( ( 0 ) + 1 ) - 1 ) <= ( D188 - 1 ) by L1357 , XREAL_1:9;
L1359: D189 in ( NAT ) by L1358 , INT_1:3;
reconsider D190 = D189 as Nat by L1359;
set D191 = ( C439 /\ D186 );
L1360: ( C439 /\ D183 ) = C439 by XBOOLE_1:28;
L1361: D191 = ( C439 \ { D182 , C440 } ) by L1360 , XBOOLE_1:49;
L1362: { D182 , C440 } = ( { D182 } \/ { C440 } ) by ENUMSET1:1;
reconsider D192 = D191 as (StableSet of D187) by L762;
L1363: ( card D192 ) = D190
proof
per cases  by L1340 , L1341;
suppose L1364: C439 = ( minimals C432 );

L1365: D192 = ( C439 \ { D182 } )
proof
per cases ;
suppose L1366: D182 = C440;

thus L1367: D192 = ( C439 \ { D182 } ) by L1366 , L1361 , ENUMSET1:29;
end;
suppose L1368: D182 <> C440;

L1369:
now
assume L1370: C440 in ( minimals D179 );
L1371: C440 is_minimal_in ( [#] D179 ) by L1370 , L586;
thus L1372: contradiction by L1371 , L1368 , L1344 , WAYBEL_4:56;
end;
thus L1373: D192 = ( C439 \ { D182 } ) by L1369 , L1361 , L1362 , L1364 , L12;
end;
end;
thus L1375: ( card D192 ) = ( ( card C439 ) - ( card { D182 } ) ) by L1365 , L1364 , EULER_1:4
.= D190 by L1341 , CARD_1:30;
end;
suppose L1376: C439 = ( maximals D179 );

L1377: D192 = ( C439 \ { C440 } )
proof
per cases ;
suppose L1378: D182 = C440;

thus L1379: D192 = ( C439 \ { C440 } ) by L1378 , L1361 , ENUMSET1:29;
end;
suppose L1380: D182 <> C440;

L1381:
now
assume L1382: D182 in ( maximals D179 );
L1383: D182 is_maximal_in ( [#] D179 ) by L1382 , L608;
thus L1384: contradiction by L1383 , L1380 , L1344 , WAYBEL_4:55;
end;
thus L1385: D192 = ( C439 \ { C440 } ) by L1381 , L1361 , L1362 , L1376 , L12;
end;
end;
L1387: C440 in C439 by L1376 , L1343 , L608;
thus L1388: ( card D192 ) = ( ( card C439 ) - ( card { C440 } ) ) by L1387 , L1377 , EULER_1:4
.= D190 by L1341 , CARD_1:30;
end;
end;
L1390: (for B257 being (StableSet of D187) holds ( card B257 ) <= ( card D192 ))
proof
let C442 being (StableSet of D187);
assume L1391: ( card C442 ) > ( card D192 );
L1392: ( card C442 ) >= ( ( card D192 ) + 1 ) by L1391 , NAT_1:13;
consider C443 being (StableSet of D187) such that L1393: ( card C443 ) = ( ( card D192 ) + 1 ) by L1392 , L229;
L1394: C443 is (StableSet of C432) by L741;
L1395: (C443 = ( minimals C432 ) or C443 = ( maximals C432 )) by L1394 , L1340 , L1393 , L1363;
thus L1396: contradiction by L1395 , L1342 , L1345 , L1349 , L1347 , ZFMISC_1:49;
end;
L1397: ( ( stability# D187 ) + 1 ) = ( ( D188 - 1 ) + 1 ) by L1390 , L1363 , L309
.= D188;
set D193 = ( C441 \/ { { D182 , C440 } } );
L1398: D186 <> D183 by L1348 , XBOOLE_1:37;
L1399: D186 c< D183 by L1398 , XBOOLE_0:def 8;
L1400:
now
let C444 being set;
assume L1401: C444 in D193;
per cases  by L1401 , XBOOLE_0:def 3;
suppose L1402: C444 in C441;

L1403: C444 is (Clique of D187) by L1402 , L994;
thus L1404: C444 is (Clique of C432) by L1403 , L718;
end;
suppose L1405: C444 in { { D182 , C440 } };

L1406: C444 = { D182 , C440 } by L1405 , TARSKI:def 1;
per cases ;
suppose L1407: D182 = C440;

L1408: C444 = { D182 } by L1407 , L1406 , ENUMSET1:29;
thus L1409: C444 is (Clique of C432) by L1408;
end;
suppose L1410: D182 <> C440;

L1411: D182 <= C440 by L1410 , L1344 , ORDERS_2:def 6;
thus L1412: C444 is (Clique of C432) by L1411 , L1406 , L87;
end;
end;
end;
reconsider D194 = D193 as (Clique-partition of C432) by L1400 , L1348 , L1349 , L35 , L994 , L1399;
take D194;
thus L1415: ( card D194 ) = ( stability# C432 ) by L1352 , L1397 , L1353 , CARD_2:41;
end;
end;
end;
L1418: (for B258 being Nat holds S10[ B258 ]) from NAT_1:sch 4(L1308);
let C445 being  finite  antisymmetric  transitive RelStr;
L1419: ( card C445 ) = ( card C445 );
thus L1420: thesis by L1419 , L1418;
end;
definition
let C446 being  with_finite_stability# non  empty RelStr;
let C447 being (Subset of C446);
attr C447 is  strong-chain
means
:L1421: (for B259 being  finite non  empty (Subset of C446) holds (ex B260 being (Clique-partition of ( subrelstr B259 )) st (( card B260 ) <= ( stability# C446 ) & (ex B261 being set st (B261 in B260 & ( B259 /\ C447 ) c= B261 & (for B262 being set holds ((B262 in B260 & B262 <> B261) implies ( C447 /\ B262 ) = ( {} ))))))));
end;
registration
let C448 being  with_finite_stability# non  empty RelStr;
cluster  strong-chain ->  clique for (Subset of C448);
coherence
proof
let C449 being (Subset of C448);
assume L1423: C449 is  strong-chain;
L1424:
now
let C450 , C451 being (Element of C448);
assume that
L1425: C450 in C449
and
L1426: C451 in C449
and
L1427: C450 <> C451;
set D195 = { C450 , C451 };
reconsider D196 = D195 as  finite non  empty (Subset of C448);
consider C452 being (Clique-partition of ( subrelstr D196 )) such that L1428: ( card C452 ) <= ( stability# C448 ) and L1429: (ex B263 being set st (B263 in C452 & ( D196 /\ C449 ) c= B263 & (for B264 being set holds ((B264 in C452 & B264 <> B263) implies ( C449 /\ B264 ) = ( {} ))))) by L1423 , L1421;
consider C453 being set such that L1430: C453 in C452 and L1431: ( D196 /\ C449 ) c= C453 and L1432: (for B265 being set holds ((B265 in C452 & B265 <> C453) implies ( C449 /\ B265 ) = ( {} ))) by L1429;
L1433: C453 is (Clique of ( subrelstr D196 )) by L1430 , L994;
L1434: C453 is (Clique of C448) by L1433 , L718;
L1435: (C450 in D196 & C451 in D196) by TARSKI:def 2;
L1436: (C450 in ( D196 /\ C449 ) & C451 in ( D196 /\ C449 )) by L1435 , L1425 , L1426 , XBOOLE_0:def 4;
thus L1437: (C450 <= C451 or C451 <= C450) by L1436 , L1431 , L1434 , L1427 , L59;
end;
thus L1438: C449 is  clique by L1424 , L59;
end;
end;
registration
let C454 being  with_finite_stability#  antisymmetric  transitive non  empty RelStr;
cluster 1 -element ->  strong-chain for (Subset of C454);
coherence
proof
let C455 being (Subset of C454);
assume L1440: C455 is 1 -element;
consider C456 being set such that L1441: C455 = { C456 } by L1440 , ZFMISC_1:131;
let C457 being  finite non  empty (Subset of C454);
consider C458 being (Clique-partition of ( subrelstr C457 )) such that L1442: ( card C458 ) = ( stability# ( subrelstr C457 ) ) by L1307;
L1443: C457 = (the carrier of ( subrelstr C457 )) by YELLOW_0:def 15;
take C458;
thus L1444: ( card C458 ) <= ( stability# C454 ) by L1442 , L981;
per cases ;
suppose L1445: C456 in C457;

L1446: C456 in ( union C458 ) by L1445 , L1443 , EQREL_1:def 4;
consider C459 being set such that L1447: C456 in C459 and L1448: C459 in C458 by L1446 , TARSKI:def 4;
take C459;
thus L1449: C459 in C458 by L1448;
thus L1450: ( C457 /\ C455 ) c= C459
proof
let C460 being set;
assume L1451: C460 in ( C457 /\ C455 );
L1452: C460 in C455 by L1451 , XBOOLE_0:def 4;
thus L1453: thesis by L1452 , L1447 , L1441 , TARSKI:def 1;
end;

let C461 being set;
assume that
L1454: C461 in C458
and
L1455: C461 <> C459;
assume L1456: ( C455 /\ C461 ) <> ( {} );
consider C462 being set such that L1457: C462 in ( C455 /\ C461 ) by L1456 , XBOOLE_0:def 1;
reconsider D197 = C461 , D198 = C459 as (Subset of C457) by L1454 , L1448 , YELLOW_0:def 15;
L1458: C462 in C455 by L1457 , XBOOLE_0:def 4;
L1459: C462 = C456 by L1458 , L1441 , TARSKI:def 1;
L1460: C456 in D197 by L1459 , L1457 , XBOOLE_0:def 4;
L1461: C456 in ( D197 /\ D198 ) by L1460 , L1447 , XBOOLE_0:def 4;
L1462: D197 meets D198 by L1461 , XBOOLE_0:def 7;
thus L1463: contradiction by L1462 , L1454 , L1448 , L1455 , EQREL_1:def 4;
end;
suppose L1464: (not C456 in C457);

set D199 = the (Element of C458);
take D199;
thus L1465: D199 in C458;
L1466: C455 misses C457 by L1464 , L1441 , ZFMISC_1:50;
L1467: ( C457 /\ C455 ) = ( {} ) by L1466 , XBOOLE_0:def 7;
thus L1468: ( C457 /\ C455 ) c= D199 by L1467 , XBOOLE_1:2;
let C463 being set;
assume that
L1469: C463 in C458
and
L1470: C463 <> D199;
L1471: (not C456 in C463) by L1464 , L1443 , L1469;
L1472: C455 misses C463 by L1471 , L1441 , ZFMISC_1:50;
thus L1473: ( C455 /\ C463 ) = ( {} ) by L1472 , XBOOLE_0:def 7;
end;
end;
end;
theorem
L1476: (for B266 being  with_finite_stability# non  empty  antisymmetric  transitive RelStr holds (ex B267 being non  empty (Subset of B266) st (B267 is  strong-chain & (not (ex B268 being (Subset of B266) st (B268 is  strong-chain & B267 c< B268))))))
proof
let C464 being  with_finite_stability# non  empty  antisymmetric  transitive RelStr;
set D200 = { B269 where B269 is (Subset of C464) : B269 is  strong-chain };
set D201 = the (Element of C464);
L1477: { D201 } in D200;
L1478:
now
let C465 being set;
assume that
L1479: C465 c= D200
and
L1480: C465 is  c=-linear;
set D202 = ( union C465 );
take D203 = D202;
L1481:
now
let C466 being set;
assume L1482: C466 in C465;
L1483: C466 in D200 by L1482 , L1479;
L1484: (ex B270 being (Subset of C464) st (B270 = C466 & B270 is  strong-chain)) by L1483;
thus L1485: C466 c= (the carrier of C464) by L1484;
end;
reconsider D204 = D203 as (Subset of C464) by L1481 , ZFMISC_1:76;
L1486: D204 is  strong-chain
proof
let C467 being  finite non  empty (Subset of C464);
set D205 = ( C467 /\ D203 );
per cases ;
suppose L1487: D205 is  empty;

consider C468 being (Clique-partition of ( subrelstr C467 )) such that L1488: ( card C468 ) = ( stability# ( subrelstr C467 ) ) by L1307;
take C468;
thus L1489: ( card C468 ) <= ( stability# C464 ) by L981 , L1488;
set D206 = the (Element of C468);
take D206;
thus L1490: D206 in C468;
thus L1491: ( C467 /\ D204 ) c= D206 by L1487 , XBOOLE_1:2;
let C469 being set;
assume that
L1492: C469 in C468
and
L1493: C469 <> D206;
L1494: C469 c= (the carrier of ( subrelstr C467 )) by L1492;
L1495: C469 c= C467 by L1494 , YELLOW_0:def 15;
thus L1496: ( D204 /\ C469 ) = ( {} ) by L1495 , L1487 , XBOOLE_1:3 , XBOOLE_1:26;
end;
suppose L1497: D205 is non  empty;

L1498: C465 is non  empty by L1497 , ZFMISC_1:2;
defpred S11[ set , set ] means ($1 in D205 & $2 in C465 & $1 in $2);
L1499: (for B271 being set holds (B271 in D205 implies (ex B272 being set st (B272 in C465 & S11[ B271 , B272 ]))))
proof
let C470 being set;
assume L1500: C470 in D205;
L1501: C470 in D203 by L1500 , XBOOLE_0:def 4;
consider C471 being set such that L1502: C470 in C471 and L1503: C471 in C465 by L1501 , TARSKI:def 4;
take C471;
thus L1504: thesis by L1503 , L1500 , L1502;
end;
consider C472 being (Function of D205 , C465) such that L1505: (for B273 being set holds (B273 in D205 implies S11[ B273 , ( C472 . B273 ) ])) from FUNCT_2:sch 1(L1499);
set D207 = ( rng C472 );
L1506: ((D207 c= C465 & C465 is  c=-linear) implies D207 is  c=-linear);
consider C473 being set such that L1507: C473 in D207 and L1508: (for B274 being set holds (B274 in D207 implies B274 c= C473)) by L1506 , L1480 , L1497 , L1498 , FINSET_1:12 , RELAT_1:def 19;
L1509: D207 c= C465 by RELAT_1:def 19;
L1510: C473 in C465 by L1509 , L1507;
L1511: C473 in D200 by L1510 , L1479;
consider C474 being (Subset of C464) such that L1512: C473 = C474 and L1513: C474 is  strong-chain by L1511;
L1514: D205 c= C474
proof
let C475 being set;
assume L1515: C475 in D205;
L1516: C475 in ( C472 . C475 ) by L1515 , L1505;
L1517: ( C472 . C475 ) c= C474 by L1512 , L1508 , L1515 , L1498 , FUNCT_2:4;
thus L1518: C475 in C474 by L1517 , L1516;
end;
consider C476 being (Clique-partition of ( subrelstr C467 )) such that L1519: ( card C476 ) <= ( stability# C464 ) and L1520: (ex B275 being set st (B275 in C476 & ( C467 /\ C474 ) c= B275 & (for B276 being set holds ((B276 in C476 & B276 <> B275) implies ( C474 /\ B276 ) = ( {} ))))) by L1513 , L1421;
take C476;
thus L1521: ( card C476 ) <= ( stability# C464 ) by L1519;
consider C477 being set such that L1522: C477 in C476 and L1523: ( C467 /\ C474 ) c= C477 and L1524: (for B277 being set holds ((B277 in C476 & B277 <> C477) implies ( C474 /\ B277 ) = ( {} ))) by L1520;
take C477;
thus L1525: C477 in C476 by L1522;
thus L1526: ( C467 /\ D204 ) c= C477
proof
let C478 being set;
assume L1527: C478 in ( C467 /\ D204 );
L1528: (C478 in C467 & C478 in C474) by L1527 , L1514 , XBOOLE_0:def 4;
L1529: C478 in ( C467 /\ C474 ) by L1528 , XBOOLE_0:def 4;
thus L1530: C478 in C477 by L1529 , L1523;
end;

let C479 being set;
assume that
L1531: C479 in C476
and
L1532: C479 <> C477;
assume L1533: ( D204 /\ C479 ) <> ( {} );
consider C480 being set such that L1534: C480 in ( D204 /\ C479 ) by L1533 , XBOOLE_0:def 1;
L1535: C480 in D204 by L1534 , XBOOLE_0:def 4;
L1536: C480 in C479 by L1534 , XBOOLE_0:def 4;
L1537: C479 is (Subset of C467) by L1531 , YELLOW_0:def 15;
L1538: C480 in D205 by L1537 , L1536 , L1535 , XBOOLE_0:def 4;
L1539: C480 in ( C474 /\ C479 ) by L1538 , L1536 , L1514 , XBOOLE_0:def 4;
thus L1540: contradiction by L1539 , L1531 , L1532 , L1524;
end;
end;
thus L1542: D203 in D200 by L1486;
let C481 being set;
assume that
L1543: C481 in C465;
thus L1544: C481 c= D203 by L1543 , ZFMISC_1:74;
end;
consider C482 being set such that L1545: C482 in D200 and L1546: (for B278 being set holds ((B278 in D200 & B278 <> C482) implies (not C482 c= B278))) by L1478 , L1477 , ORDERS_1:65;
consider C483 being (Subset of C464) such that L1547: C482 = C483 and L1548: C483 is  strong-chain by L1545;
reconsider D208 = C483 as non  empty (Subset of C464) by L1547 , L1477 , L1546 , XBOOLE_1:2;
take D208;
thus L1549: D208 is  strong-chain by L1548;
let C484 being (Subset of C464);
assume that
L1550: C484 is  strong-chain
and
L1551: D208 c< C484;
L1552: C484 in D200 by L1550;
L1553: (C484 <> D208 & D208 c= C484) by L1551 , XBOOLE_0:def 8;
thus L1554: contradiction by L1553 , L1547 , L1552 , L1546;
end;
theorem
L1555: (for B279 being  with_finite_stability#  antisymmetric  transitive RelStr holds (ex B280 being (Clique-partition of B279) st ( card B280 ) = ( stability# B279 )))
proof
let C485 being  with_finite_stability#  antisymmetric  transitive RelStr;
per cases ;
suppose L1556: C485 is  finite;

thus L1557: thesis by L1556 , L1307;
end;
suppose L1558: C485 is  infinite;

defpred S12[ Nat ] means (for B281 being  with_finite_stability# non  empty  antisymmetric  transitive RelStr holds (( stability# B281 ) = $1 implies (ex B282 being (Clique-partition of B281) st ( card B282 ) = ( stability# B281 ))));
L1559: S12[ ( 0 ) ];
L1560: (for B283 being Nat holds (S12[ B283 ] implies S12[ ( B283 + 1 ) ]))
proof
let C486 being Nat;
assume L1561: S12[ C486 ];
let C487 being  with_finite_stability# non  empty  antisymmetric  transitive RelStr;
assume L1562: ( stability# C487 ) = ( C486 + 1 );
consider C488 being non  empty (Subset of C487) such that L1563: C488 is  strong-chain and L1564: (not (ex B284 being (Subset of C487) st (B284 is  strong-chain & C488 c< B284))) by L1476;
set D209 = (the carrier of C487);
per cases ;
suppose L1565: C488 = D209;

L1566: (for B285 being set holds (B285 in { C488 } implies B285 is (Clique of C487))) by L1563 , TARSKI:def 1;
reconsider D210 = { C488 } as (Clique-partition of C487) by L1566 , L994 , L1565 , EQREL_1:39;
take D210;
L1567: D209 = ( [#] C487 );
thus L1568: ( card D210 ) = 1 by CARD_1:30
.= ( stability# C487 ) by L1567 , L1563 , L1565 , L328;
end;
suppose L1569: C488 <> D209;

L1570: C488 c< D209 by L1569 , XBOOLE_0:def 8;
set D211 = ( D209 \ C488 );
L1571: ( D209 \ D211 ) = ( D209 /\ C488 ) by XBOOLE_1:48
.= C488 by XBOOLE_1:28;
reconsider D212 = D211 as (Subset of C487);
L1572: D212 <> ( {} ) by L1570 , XBOOLE_1:105;
reconsider D213 = ( subrelstr D212 ) as  with_finite_stability# non  empty  antisymmetric  transitive RelStr by L1572;
L1573: D212 = (the carrier of D213) by YELLOW_0:def 15;
L1574: ( stability# D213 ) <= ( C486 + 1 ) by L1562 , L981;
L1575: ( stability# D213 ) <> ( C486 + 1 )
proof
assume L1576: ( stability# D213 ) = ( C486 + 1 );
consider C489 being  finite (StableSet of D213) such that L1577: ( card C489 ) = ( stability# D213 ) by L309;
reconsider D214 = C489 as  finite non  empty (StableSet of C487) by L1577 , L741;
defpred S13[ set , set , set ] means (for B286 being set holds (B286 in $2 implies ((not ( $1 /\ $3 ) c= B286) or (ex B287 being set st (B287 in $2 & B287 <> B286 & ( $3 /\ B287 ) <> ( {} ))))));
defpred S14[  finite (Subset of C487) , set ] means (for B288 being (Clique-partition of ( subrelstr $1 )) holds (( card B288 ) <= ( stability# C487 ) implies S13[ $1 , B288 , $2 ]));
defpred S15[ set , set ] means (ex B289 being  finite non  empty (Subset of C487) st ($2 = B289 & $1 in $2 & S14[ B289 , ( C488 \/ { $1 } ) ]));
L1578: (for B290 being set holds (B290 in C489 implies (ex B291 being set st S15[ B290 , B291 ])))
proof
let C490 being set;
assume L1579: C490 in C489;
L1580: C489 c= D209 by L1573 , XBOOLE_1:1;
L1581: { C490 } c= D209 by L1580 , L1579 , ZFMISC_1:31;
reconsider D215 = ( C488 \/ { C490 } ) as (Subset of C487) by L1581 , XBOOLE_1:8;
L1582:
now
assume L1583: D215 is  strong-chain;
L1584: C490 in { C490 } by TARSKI:def 1;
L1585: C490 in D215 by L1584 , XBOOLE_0:def 3;
L1586: (not C490 in C488) by L1573 , L1579 , XBOOLE_0:def 5;
L1587: C488 c= D215 by XBOOLE_1:7;
L1588: C488 c< D215 by L1587 , L1585 , L1586 , XBOOLE_0:def 8;
thus L1589: contradiction by L1588 , L1583 , L1564;
end;
consider C491 being  finite non  empty (Subset of C487) such that L1590: S14[ C491 , D215 ] by L1582 , L1421;
take C491;
take C491;
thus L1591: C491 = C491;
L1592:
now
assume L1593: (not C490 in C491);
L1594: ( C491 /\ C488 ) c= ( C491 /\ D215 )
proof
let C492 being set;
assume L1595: C492 in ( C491 /\ C488 );
L1596: (C492 in C491 & C492 in C488) by L1595 , XBOOLE_0:def 4;
L1597: (C492 in C491 & C492 in D215) by L1596 , XBOOLE_0:def 3;
thus L1598: C492 in ( C491 /\ D215 ) by L1597 , XBOOLE_0:def 4;
end;
L1599: ( C491 /\ D215 ) c= ( C491 /\ C488 )
proof
let C493 being set;
assume L1600: C493 in ( C491 /\ D215 );
L1601: C493 in C491 by L1600 , XBOOLE_0:def 4;
L1602: C493 in D215 by L1600 , XBOOLE_0:def 4;
L1603: (C493 in C488 or C493 in { C490 }) by L1602 , XBOOLE_0:def 3;
thus L1604: C493 in ( C491 /\ C488 ) by L1603 , L1601 , L1593 , TARSKI:def 1 , XBOOLE_0:def 4;
end;
L1605: ( C491 /\ C488 ) = ( C491 /\ D215 ) by L1599 , L1594 , XBOOLE_0:def 10;
consider C494 being (Clique-partition of ( subrelstr C491 )) such that L1606: ( card C494 ) <= ( stability# C487 ) and L1607: (not S13[ C491 , C494 , C488 ]) by L1563 , L1421;
consider C495 being set such that L1608: C495 in C494 and L1609: ( C491 /\ C488 ) c= C495 and L1610: (for B292 being set holds ((B292 in C494 & B292 <> C495) implies ( C488 /\ B292 ) = ( {} ))) by L1607;
L1611: (for B293 being set holds ((B293 in C494 & B293 <> C495) implies ( D215 /\ B293 ) = ( {} )))
proof
let C496 being set;
assume that
L1612: C496 in C494
and
L1613: C496 <> C495;
L1614:
now
assume L1615: ( D215 /\ C496 ) <> ( {} );
consider C497 being set such that L1616: C497 in ( D215 /\ C496 ) by L1615 , XBOOLE_0:def 1;
L1617: C497 in D215 by L1616 , XBOOLE_0:def 4;
L1618: C497 in C496 by L1616 , XBOOLE_0:def 4;
per cases  by L1617 , XBOOLE_0:def 3;
suppose L1619: C497 in C488;

L1620: C497 in ( C488 /\ C496 ) by L1619 , L1618 , XBOOLE_0:def 4;
thus L1621: contradiction by L1620 , L1612 , L1613 , L1610;
end;
suppose L1622: C497 in { C490 };

L1623: C497 = C490 by L1622 , TARSKI:def 1;
L1624: C490 in (the carrier of ( subrelstr C491 )) by L1623 , L1618 , L1612;
thus L1625: contradiction by L1624 , L1593 , YELLOW_0:def 15;
end;
end;
thus L1627: ( D215 /\ C496 ) = ( {} ) by L1614;
end;
thus L1628: contradiction by L1611 , L1608 , L1609 , L1606 , L1605 , L1590;
end;
thus L1629: C490 in C491 by L1592;
thus L1630: thesis by L1590;
end;
consider C498 being Function such that L1631: ( dom C498 ) = C489 and L1632: (for B294 being set holds (B294 in C489 implies S15[ B294 , ( C498 . B294 ) ])) from CLASSES1:sch 1(L1578);
L1633: ( rng C498 ) is  finite by L1631 , FINSET_1:8;
set D216 = ( union ( rng C498 ) );
L1634: (for B295 being set holds (B295 in ( rng C498 ) implies B295 is  finite))
proof
let C499 being set;
assume L1635: C499 in ( rng C498 );
consider C500 being set such that L1636: C500 in ( dom C498 ) and L1637: C499 = ( C498 . C500 ) by L1635 , FUNCT_1:def 3;
consider C501 being  finite non  empty (Subset of C487) such that L1638: ( C498 . C500 ) = C501 and L1639: (C500 in ( C498 . C500 ) & S14[ C501 , ( C488 \/ { C500 } ) ]) by L1631 , L1636 , L1632;
thus L1640: C499 is  finite by L1638 , L1637;
end;
L1641: D216 c= D209
proof
let C502 being set;
assume L1642: C502 in D216;
consider C503 being set such that L1643: C502 in C503 and L1644: C503 in ( rng C498 ) by L1642 , TARSKI:def 4;
consider C504 being set such that L1645: C504 in ( dom C498 ) and L1646: C503 = ( C498 . C504 ) by L1644 , FUNCT_1:def 3;
consider C505 being  finite non  empty (Subset of C487) such that L1647: ( C498 . C504 ) = C505 and L1648: (C504 in ( C498 . C504 ) & S14[ C505 , ( C488 \/ { C504 } ) ]) by L1631 , L1645 , L1632;
thus L1649: C502 in D209 by L1643 , L1646 , L1647;
end;
L1650: D214 c= D216
proof
let C506 being set;
assume L1651: C506 in D214;
consider C507 being  finite non  empty (Subset of C487) such that L1652: ( C498 . C506 ) = C507 and L1653: C506 in ( C498 . C506 ) and L1654: S14[ C507 , ( C488 \/ { C506 } ) ] by L1651 , L1632;
L1655: ( C498 . C506 ) in ( rng C498 ) by L1651 , L1631 , FUNCT_1:3;
thus L1656: C506 in D216 by L1655 , L1653 , TARSKI:def 4;
end;
reconsider D217 = D216 as  finite non  empty (Subset of C487) by L1650 , L1634 , L1633 , L1641 , FINSET_1:7;
set D218 = ( subrelstr D217 );
L1657: D217 = (the carrier of D218) by YELLOW_0:def 15;
consider C508 being (Clique-partition of D218) such that L1658: ( card C508 ) <= ( stability# C487 ) and L1659: (not S13[ D217 , C508 , C488 ]) by L1563 , L1421;
consider C509 being set such that L1660: C509 in C508 and L1661: ( D217 /\ C488 ) c= C509 and L1662: (for B296 being set holds ((B296 in C508 & B296 <> C509) implies ( C488 /\ B296 ) = ( {} ))) by L1659;
reconsider D219 = C509 as (Element of C508) by L1660;
L1663: D214 = ( D214 /\ D217 ) by L1650 , XBOOLE_1:28;
reconsider D220 = D214 as  finite non  empty (StableSet of D218) by L1663 , L762;
L1664: ( stability# D218 ) >= ( card D220 ) by L309;
L1665: ( card C508 ) >= ( stability# D218 ) by L1010;
L1666: ( card C508 ) >= ( card D220 ) by L1665 , L1664 , XXREAL_0:2;
consider C510 being (Element of D220) such that L1667: ( D219 /\ D220 ) = { C510 } by L1666 , L1071 , L1658 , L1577 , L1576 , L1562 , XXREAL_0:1;
L1668: C510 in ( D219 /\ D220 ) by L1667 , TARSKI:def 1;
L1669: C510 in D219 by L1668 , XBOOLE_0:def 4;
consider C511 being  finite non  empty (Subset of C487) such that L1670: ( C498 . C510 ) = C511 and L1671: C510 in ( C498 . C510 ) and L1672: S14[ C511 , ( C488 \/ { C510 } ) ] by L1632;
deffunc H1(set) = ( $1 /\ C511 );
defpred S16[ set ] means $1 meets C511;
set D221 = { H1(B297) where B297 is (Element of C508) : S16[ B297 ] };
L1673: C511 c= D217
proof
let C512 being set;
assume L1674: C512 in C511;
L1675: C511 in ( rng C498 ) by L1670 , L1631 , FUNCT_1:3;
thus L1676: C512 in D217 by L1675 , L1674 , TARSKI:def 4;
end;
reconsider D222 = D221 as (a_partition of C511) by L1673 , L1657 , PUA2MSS1:11;
L1677: (for B298 being set holds (B298 in D222 implies B298 is (Clique of ( subrelstr C511 ))))
proof
let C513 being set;
assume L1678: C513 in D222;
consider C514 being (Element of C508) such that L1679: C513 = ( C514 /\ C511 ) and L1680: C514 meets C511 by L1678;
L1681: C514 is (Clique of D218) by L994;
L1682: C514 is (Clique of C487) by L1681 , L718;
thus L1683: C513 is (Clique of ( subrelstr C511 )) by L1682 , L1679 , L727;
end;
reconsider D223 = D222 as (Clique-partition of ( subrelstr C511 )) by L1677 , L994 , YELLOW_0:def 15;
L1684: D223 = { H1(B299) where B299 is (Element of C508) : S16[ B299 ] };
L1685: ( card D223 ) <= ( card C508 ) from FraenkelFinCard1(L1684);
set D224 = ( D219 /\ C511 );
L1686: D219 meets C511 by L1669 , L1670 , L1671 , XBOOLE_0:3;
L1687: D224 in D223 by L1686;
L1688: ( C511 /\ ( C488 \/ { C510 } ) ) c= D224
proof
let C515 being set;
assume L1689: C515 in ( C511 /\ ( C488 \/ { C510 } ) );
L1690: C515 in C511 by L1689 , XBOOLE_0:def 4;
L1691: C515 in ( C488 \/ { C510 } ) by L1689 , XBOOLE_0:def 4;
per cases  by L1691 , XBOOLE_0:def 3;
suppose L1692: C515 in C488;

L1693: C515 in ( D217 /\ C488 ) by L1692 , L1690 , L1673 , XBOOLE_0:def 4;
thus L1694: C515 in D224 by L1693 , L1690 , L1661 , XBOOLE_0:def 4;
end;
suppose L1695: C515 in { C510 };

L1696: C515 = C510 by L1695 , TARSKI:def 1;
thus L1697: C515 in D224 by L1696 , L1669 , L1670 , L1671 , XBOOLE_0:def 4;
end;
end;
consider C516 being set such that L1699: C516 in D223 and L1700: C516 <> D224 and L1701: ( ( C488 \/ { C510 } ) /\ C516 ) <> ( {} ) by L1688 , L1687 , L1685 , L1658 , L1672 , XXREAL_0:2;
consider C517 being (Element of C508) such that L1702: C516 = ( C517 /\ C511 ) and L1703: C517 meets C511 by L1699;
L1704: ( C488 /\ C517 ) = ( {} ) by L1702 , L1700 , L1662;
L1705: ( C488 /\ C516 ) = ( ( {} ) /\ C511 ) by L1704 , L1702 , XBOOLE_1:16
.= ( {} );
L1706: ( ( C488 /\ C516 ) \/ ( { C510 } /\ C516 ) ) <> ( {} ) by L1701 , XBOOLE_1:23;
consider C518 being set such that L1707: C518 in ( { C510 } /\ C516 ) by L1706 , L1705 , XBOOLE_0:def 1;
L1708: (C518 in { C510 } & C518 in C516) by L1707 , XBOOLE_0:def 4;
L1709: C510 in C516 by L1708 , TARSKI:def 1;
L1710: C510 in C517 by L1709 , L1702 , XBOOLE_0:def 4;
L1711: D219 meets C517 by L1710 , L1669 , XBOOLE_0:3;
thus L1712: contradiction by L1711 , L1702 , L1700 , EQREL_1:def 4;
end;
L1713: ( stability# D213 ) < ( C486 + 1 ) by L1575 , L1574 , XXREAL_0:1;
L1714: ( stability# D213 ) <= C486 by L1713 , NAT_1:13;
consider C519 being  finite (StableSet of C487) such that L1715: ( card C519 ) = ( stability# C487 ) by L309;
L1716: ( stability# D213 ) = C486
proof
per cases ;
suppose L1717: ( C519 /\ C488 ) = ( {} );

L1718: C519 c= D212
proof
let C520 being set;
assume L1719: C520 in C519;
L1720: (not C520 in C488) by L1719 , L1717 , XBOOLE_0:def 4;
thus L1721: C520 in D212 by L1720 , L1719 , XBOOLE_0:def 5;
end;
thus L1722: thesis by L1718 , L1562 , L1575 , L1715 , L985;
end;
suppose L1723: ( C519 /\ C488 ) <> ( {} );

consider C521 being set such that L1724: C521 in ( C519 /\ C488 ) by L1723 , XBOOLE_0:def 1;
L1725: C521 in C519 by L1724 , XBOOLE_0:def 4;
L1726: C521 in C488 by L1724 , XBOOLE_0:def 4;
set D225 = ( C519 \ { C521 } );
L1727: { C521 } c= C519 by L1725 , ZFMISC_1:31;
L1728: C519 = ( D225 \/ { C521 } ) by L1727 , XBOOLE_1:45;
L1729: C521 in { C521 } by TARSKI:def 1;
L1730: (not C521 in D225) by L1729 , XBOOLE_0:def 5;
L1731: ( card C519 ) = ( ( card D225 ) + 1 ) by L1730 , L1728 , CARD_2:41;
L1732: D225 c= C519 by XBOOLE_1:36;
L1733: D225 c= D212
proof
let C522 being set;
assume L1734: C522 in D225;
L1735: C522 in C519 by L1734 , XBOOLE_0:def 5;
L1736: (not C522 in { C521 }) by L1734 , XBOOLE_0:def 5;
L1737: C522 <> C521 by L1736 , TARSKI:def 1;
L1738: (not C522 in C488) by L1737 , L1725 , L1726 , L1735 , L1563 , L218;
thus L1739: C522 in D212 by L1738 , L1734 , XBOOLE_0:def 5;
end;
L1740: D225 c= ( C519 /\ D212 ) by L1733 , L1732 , XBOOLE_1:19;
L1741: ( C519 /\ D212 ) c= D225
proof
let C523 being set;
assume L1742: C523 in ( C519 /\ D212 );
L1743: C523 in C519 by L1742 , XBOOLE_0:def 4;
L1744: C523 in D212 by L1742 , XBOOLE_0:def 4;
L1745: C521 <> C523 by L1744 , L1726 , XBOOLE_0:def 5;
L1746: (not C523 in { C521 }) by L1745 , TARSKI:def 1;
thus L1747: C523 in D225 by L1746 , L1743 , XBOOLE_0:def 5;
end;
L1748: D225 = ( C519 /\ D212 ) by L1741 , L1740 , XBOOLE_0:def 10;
reconsider D226 = D225 as (StableSet of D213) by L1748 , L762;
L1749: ( stability# D213 ) >= ( card D226 ) by L309;
thus L1750: thesis by L1749 , L1731 , L1715 , L1562 , L1714 , XXREAL_0:1;
end;
end;
consider C524 being (Clique-partition of D213) such that L1752: ( card C524 ) = ( stability# D213 ) by L1716 , L1561;
set D227 = ( C524 \/ { ( D209 \ D212 ) } );
L1753: C524 is  finite by L1752;
L1754: D212 <> D209 by L1571 , XBOOLE_1:37;
L1755: D212 c< D209 by L1754 , XBOOLE_0:def 8;
reconsider D228 = D227 as (a_partition of D209) by L1755 , L1573 , L35;
L1756:
now
let C525 being set;
assume L1757: C525 in D228;
per cases  by L1757 , XBOOLE_0:def 3;
suppose L1758: C525 in C524;

L1759: C525 is (Clique of D213) by L1758 , L994;
thus L1760: C525 is (Clique of C487) by L1759 , L718;
end;
suppose L1761: C525 in { ( D209 \ D212 ) };

thus L1762: C525 is (Clique of C487) by L1761 , L1563 , L1571 , TARSKI:def 1;
end;
end;
reconsider D229 = D228 as (Clique-partition of C487) by L1756 , L994;
take D229;
L1764: (not ( D209 \ D212 ) in C524)
proof
assume L1765: (not thesis);
L1766: D209 c= ( D212 \/ D212 ) by L1765 , L1573 , XBOOLE_1:44;
thus L1767: contradiction by L1766 , L1755 , XBOOLE_1:60;
end;
thus L1768: ( card D229 ) = ( stability# C487 ) by L1764 , L1562 , L1716 , L1752 , L1753 , CARD_2:41;
end;
end;
L1770: (for B300 being Nat holds S12[ B300 ]) from NAT_1:sch 2(L1559 , L1560);
thus L1771: thesis by L1770 , L1558;
end;
end;
theorem
L1773: (for B301 being  with_finite_clique#  antisymmetric  transitive RelStr holds (ex B302 being (Coloring of B301) st ( card B302 ) = ( clique# B301 )))
proof
let C526 being  with_finite_clique#  antisymmetric  transitive RelStr;
defpred S17[ Nat ] means (for B303 being  with_finite_clique#  antisymmetric  transitive RelStr holds (( clique# B303 ) = $1 implies (ex B304 being (Coloring of B303) st ( card B304 ) = ( clique# B303 ))));
L1774: S17[ ( 0 ) ]
proof
let C527 being  with_finite_clique#  antisymmetric  transitive RelStr;
assume L1775: ( clique# C527 ) = ( 0 );
L1776: C527 is  empty by L1775;
reconsider D230 = ( {} ) as (Coloring of C527) by L1776 , EQREL_1:45;
take D230;
thus L1777: ( card D230 ) = ( clique# C527 ) by L1775;
end;
L1778: (for B305 being Nat holds (S17[ B305 ] implies S17[ ( B305 + 1 ) ]))
proof
let C528 being Nat;
assume L1779: S17[ C528 ];
let C529 being  with_finite_clique#  antisymmetric  transitive RelStr;
assume L1780: ( clique# C529 ) = ( C528 + 1 );
L1781: C529 is non  empty by L1780;
reconsider D231 = C529 as  with_finite_clique# non  empty  antisymmetric  transitive RelStr by L1780;
set D232 = ( maximals D231 );
set D233 = (the carrier of C529);
set D234 = ( D233 \ D232 );
reconsider D235 = D234 as (Subset of C529);
set D236 = ( subrelstr D235 );
L1782: D235 = (the carrier of D236) by YELLOW_0:def 15;
reconsider D237 = D236 as  with_finite_clique#  antisymmetric  transitive RelStr;
consider C530 being  finite (Clique of D237) such that L1783: ( card C530 ) = ( clique# D237 ) by L251;
L1784: C530 is (Clique of C529) by L718;
consider C531 being  finite (Clique of C529) such that L1785: ( card C531 ) = ( C528 + 1 ) by L1780 , L251;
L1786: C531 <> ( {} ) by L1785;
set D238 = ( C531 /\ D235 );
reconsider D239 = D238 as  finite (Clique of D237) by L727;
consider C532 being (Element of C529) such that L1787: C532 in C531 and L1788: C532 is_maximal_wrt C531 , (the InternalRel of C529) by L1781 , L1786 , BAGORDER:6;
L1789: C532 is_maximal_in C531 by L1788 , WAYBEL_4:def 24;
L1790: ( C531 /\ D232 ) = { C532 }
proof
thus L1791: ( C531 /\ D232 ) c= { C532 }
proof
let C533 being set;
assume L1792: C533 in ( C531 /\ D232 );
L1793: C533 in C531 by L1792 , XBOOLE_0:def 4;
L1794: C533 in D232 by L1792 , XBOOLE_0:def 4;
reconsider D240 = C533 as (Element of C529) by L1792;
L1795: D240 is_maximal_in ( [#] C529 ) by L1794 , L608;
L1796:
now
assume L1797: C533 <> C532;
L1798: (not C532 < D240) by L1793 , L1789 , WAYBEL_4:55;
L1799: (not C532 <= D240) by L1798 , L1797 , ORDERS_2:def 6;
L1800: D240 <= C532 by L1799 , L1787 , L1793 , L1797 , L59;
L1801: D240 < C532 by L1800 , L1797 , ORDERS_2:def 6;
thus L1802: contradiction by L1801 , L1795 , L1787 , WAYBEL_4:55;
end;
thus L1803: C533 in { C532 } by L1796 , TARSKI:def 1;
end;

thus L1804: { C532 } c= ( C531 /\ D232 )
proof
let C534 being set;
assume L1805: C534 in { C532 };
L1806: C534 = C532 by L1805 , TARSKI:def 1;
L1807:
now
assume L1808: (not C534 in D232);
consider C535 being (Element of C529) such that L1809: C535 is_maximal_in ( [#] C529 ) and L1810: (C532 = C535 or C532 < C535) by L1781 , L917;
set D241 = ( C531 \/ { C535 } );
L1811:
now
per cases ;
suppose L1812: C532 = C535;

thus L1813: D241 is  finite  finite  finite  finite (Clique of C529) by L1812 , L1787 , ZFMISC_1:40;
end;
suppose L1814: C532 <> C535;

L1815: C532 <= C535 by L1814 , L1810 , ORDERS_2:def 6;
thus L1816: D241 is  finite  finite  finite  finite (Clique of C529) by L1815 , L1789 , L105;
end;
end;
reconsider D242 = D241 as  finite (Clique of C529) by L1811;
L1818: (not C535 in C531) by L1806 , L1808 , L1809 , L608 , L1810 , L1789 , WAYBEL_4:55;
L1819: ( card D242 ) = ( ( card C531 ) + 1 ) by L1818 , CARD_2:41;
L1820: ( ( C528 + 1 ) + 1 ) <= ( ( C528 + 1 ) + ( 0 ) ) by L1819 , L1785 , L1780 , L251;
thus L1821: contradiction by L1820 , XREAL_1:6;
end;
thus L1822: C534 in ( C531 /\ D232 ) by L1807 , L1806 , L1787 , XBOOLE_0:def 4;
end;

end;
L1805: D239 = ( ( C531 /\ D233 ) \ ( C531 /\ D232 ) ) by XBOOLE_1:50;
L1806: ( C531 /\ D233 ) = C531 by XBOOLE_1:28;
L1807: ( card D239 ) = ( ( card C531 ) - ( card { C532 } ) ) by L1806 , L1787 , L1790 , L1805 , EULER_1:4
.= ( ( C528 + 1 ) - 1 ) by L1785 , CARD_1:30
.= C528;
L1808: ( clique# D237 ) >= ( card D239 ) by L251;
L1809: ( clique# D237 ) <= ( clique# C529 ) by L968;
L1810:
now
assume L1811: ( clique# D237 ) = ( C528 + 1 );
L1812: C530 <> ( {} ) by L1811 , L1783;
L1813: D237 is non  empty by L1811;
consider C536 being (Element of D237) such that L1814: C536 in C530 and L1815: C536 is_maximal_wrt C530 , (the InternalRel of D237) by L1813 , L1812 , BAGORDER:6;
L1816: C536 is_maximal_in C530 by L1815 , WAYBEL_4:def 24;
reconsider D243 = C536 as (Element of C529) by L1813 , YELLOW_0:58;
consider C537 being (Element of C529) such that L1817: C537 is_maximal_in ( [#] C529 ) and L1818: (D243 = C537 or D243 < C537) by L917;
set D244 = ( C530 \/ { C537 } );
L1819:
now
per cases ;
suppose L1820: D243 = C537;

thus L1821: D244 is  finite  finite  finite  finite (Clique of C529) by L1820 , L1814 , L1784 , ZFMISC_1:40;
end;
suppose L1822: D243 <> C537;

L1823: D243 <= C537 by L1822 , L1818 , ORDERS_2:def 6;
thus L1824: D244 is  finite  finite  finite  finite (Clique of C529) by L1823 , L1816 , L783 , L1784 , L105;
end;
end;
reconsider D245 = D244 as  finite (Clique of C529) by L1819;
L1826: C537 in D232 by L1817 , L608;
L1827: (not C537 in C530) by L1826 , L1782 , XBOOLE_0:def 5;
L1828: ( card D245 ) = ( ( C528 + 1 ) + 1 ) by L1827 , L1783 , L1811 , CARD_2:41;
L1829: ( card D245 ) <= ( C528 + 1 ) by L1780 , L251;
L1830: ( C528 + 1 ) <= ( C528 + ( 0 ) ) by L1829 , L1828 , XREAL_1:6;
thus L1831: contradiction by L1830 , XREAL_1:6;
end;
L1832: ( clique# D237 ) < ( C528 + 1 ) by L1810 , L1780 , L1809 , XXREAL_0:1;
L1833: ( clique# D237 ) <= C528 by L1832 , NAT_1:13;
L1834: ( clique# D237 ) = C528 by L1833 , L1807 , L1808 , XXREAL_0:1;
consider C538 being (Coloring of D237) such that L1835: ( card C538 ) = C528 by L1834 , L1779;
reconsider D246 = C538 as  finite set by L1835;
set D247 = ( C538 \/ { D232 } );
L1836: D233 = ( D235 \/ D232 ) by XBOOLE_1:45;
L1837: { D232 } is (a_partition of D232) by EQREL_1:39;
L1838: D247 is (a_partition of D233) by L1837 , L1836 , L1782 , L20 , XBOOLE_1:79;
L1839:
now
let C539 being set;
assume L1840: C539 in D247;
per cases  by L1840 , XBOOLE_0:def 3;
suppose L1841: C539 in C538;

L1842: C539 is (StableSet of D237) by L1841 , L1267;
thus L1843: C539 is (StableSet of C529) by L1842 , L741;
end;
suppose L1844: C539 in { D232 };

thus L1845: C539 is (StableSet of C529) by L1844 , TARSKI:def 1;
end;
end;
reconsider D248 = D247 as (Coloring of C529) by L1839 , L1838 , L1267;
take D248;
L1847: (not D232 in D246) by L1782 , XBOOLE_1:38;
thus L1848: ( card D248 ) = ( clique# C529 ) by L1847 , L1780 , L1835 , CARD_2:41;
end;
L1849: (for B306 being Nat holds S17[ B306 ]) from NAT_1:sch 2(L1774 , L1778);
thus L1850: (ex B307 being (Coloring of C526) st ( card B307 ) = ( clique# C526 )) by L1849;
end;
begin
::$N Erdos-Szekeres Theorem
theorem
L1851: (for B308 being  finite  antisymmetric  transitive RelStr holds (for B309 , B310 being Nat holds (( card B308 ) = ( ( B309 * B310 ) + 1 ) implies ((ex B311 being (Clique of B308) st ( card B311 ) >= ( B309 + 1 )) or (ex B312 being (StableSet of B308) st ( card B312 ) >= ( B310 + 1 ))))))
proof
let C540 being  finite  antisymmetric  transitive RelStr;
let C541 , C542 being Nat;
assume that
L1852: ( card C540 ) = ( ( C541 * C542 ) + 1 )
and
L1853: (for B313 being (Clique of C540) holds ( card B313 ) < ( C541 + 1 ))
and
L1854: (for B314 being (StableSet of C540) holds ( card B314 ) < ( C542 + 1 ));
consider C543 being (Clique-partition of C540) such that L1855: ( card C543 ) = ( stability# C540 ) by L1307;
consider C544 being  finite (StableSet of C540) such that L1856: ( card C544 ) = ( stability# C540 ) by L309;
L1857: ( stability# C540 ) < ( C542 + 1 ) by L1854 , L1856;
L1858: ( stability# C540 ) <= C542 by L1857 , NAT_1:13;
set D249 = ( stability# C540 );
set D250 = (the carrier of C540);
set D251 = ( canFS C543 );
L1859: ( len D251 ) = ( card C543 ) by UPROOTS:3;
L1860: ( dom D251 ) = ( Seg ( len D251 ) ) by FINSEQ_1:def 3;
set D252 = ( canFS C543 );
L1861: ( rng D252 ) = C543 by FUNCT_2:def 3;
reconsider D253 = D252 as (FinSequence of ( bool D250 )) by L1861 , FINSEQ_1:def 4;
L1862:
now
let C545 , C546 being Nat;
assume that
L1863: C545 in ( dom D253 )
and
L1864: C546 in ( dom D253 )
and
L1865: C545 <> C546;
L1866: ( D253 . C545 ) in ( rng D253 ) by L1863 , FUNCT_1:3;
L1867: ( D253 . C546 ) in ( rng D253 ) by L1864 , FUNCT_1:3;
reconsider D254 = ( D253 . C545 ) , D255 = ( D253 . C546 ) as (Subset of D250) by L1867 , L1866 , L1861;
L1868: D254 <> D255 by L1865 , L1863 , L1864 , FUNCT_1:def 4;
thus L1869: ( D253 . C545 ) misses ( D253 . C546 ) by L1868 , L1866 , L1867 , L1861 , EQREL_1:def 4;
end;
L1870: ( card ( union ( rng D253 ) ) ) = ( Sum ( Card D253 ) ) by L1862 , L1859 , INT_5:48;
reconsider D256 = C541 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D257 = ( D249 |-> D256 ) as (Element of ( D249 -tuples_on ( NAT ) ));
L1871: ( Sum D257 ) = ( D249 * C541 ) by RVSUM_1:80;
L1872: ( dom D253 ) = ( dom ( Card D253 ) ) by CARD_3:def 2;
L1873: ( len ( Card D253 ) ) = D249 by L1872 , L1859 , L1855 , FINSEQ_3:29;
reconsider D258 = ( Card D253 ) as (Element of ( D249 -tuples_on ( NAT ) )) by L1873 , FINSEQ_2:92;
L1874: D257 is (Element of ( D249 -tuples_on ( REAL ) )) by FINSEQ_2:109;
L1875: D258 is (Element of ( D249 -tuples_on ( REAL ) )) by FINSEQ_2:109;
L1876:
now
let C547 being Nat;
assume that
L1877: C547 in ( Seg D249 );
L1878: ( D257 . C547 ) = C541 by L1877 , FINSEQ_2:57;
L1879: ( D258 . C547 ) = ( card ( D253 . C547 ) ) by L1877 , L1859 , L1860 , L1855 , CARD_3:def 2;
L1880: ( D253 . C547 ) in C543 by L1861 , L1877 , L1855 , L1859 , L1860 , FUNCT_1:3;
reconsider D259 = ( D253 . C547 ) as (Clique of C540) by L1880 , L994;
L1881: ( card D259 ) < ( C541 + 1 ) by L1853;
thus L1882: ( D258 . C547 ) <= ( D257 . C547 ) by L1881 , L1878 , L1879 , NAT_1:13;
end;
L1883: ( Sum D258 ) <= ( Sum D257 ) by L1876 , L1874 , L1875 , RVSUM_1:82;
L1884: ( D249 * C541 ) <= ( C542 * C541 ) by L1858 , XREAL_1:64;
L1885: ( Sum D258 ) <= ( C542 * C541 ) by L1884 , L1871 , L1883 , XXREAL_0:2;
L1886: ( ( C541 * C542 ) + 1 ) <= ( ( C541 * C542 ) + ( 0 ) ) by L1885 , L1870 , L1861 , L1852 , EQREL_1:def 4;
thus L1887: contradiction by L1886 , XREAL_1:6;
end;
theorem
L1888: (for B315 being  real-valued FinSequence holds (for B316 being Nat holds ((( card B315 ) = ( ( B316 ^2 ) + 1 ) & B315 is  one-to-one) implies (ex B317 being  real-valued FinSubsequence st (B317 c= B315 & ( card B317 ) >= ( B316 + 1 ) & (B317 is  increasing or B317 is  decreasing))))))
proof
let C548 being  real-valued FinSequence;
let C549 being Nat;
assume that
L1889: ( card C548 ) = ( ( C549 ^2 ) + 1 )
and
L1890: C548 is  one-to-one;
set D260 = C548;
defpred S18[ set , set ] means (ex B318 , B319 being Nat st (ex B320 , B321 being  real number st ($1 = [ B318 , B320 ] & $2 = [ B319 , B321 ] & B318 < B319 & B320 < B321)));
consider C550 being (Relation of C548 , C548) such that L1891: (for B322 , B323 being set holds ([ B322 , B323 ] in C550 iff (B322 in C548 & B323 in C548 & S18[ B322 , B323 ]))) from RELSET_1:sch 1;
set D261 = RelStr (# D260 , C550 #);
L1892: ( dom C548 ) = ( Seg ( len C548 ) ) by FINSEQ_1:def 3;
L1893: D261 is  antisymmetric
proof
let C551 , C552 being set;
assume that
L1894: C551 in (the carrier of D261)
and
L1895: C552 in (the carrier of D261)
and
L1896: [ C551 , C552 ] in (the InternalRel of D261)
and
L1897: [ C552 , C551 ] in (the InternalRel of D261);
consider C553 , C554 being Nat, C555 , C556 being  real number such that L1898: C551 = [ C553 , C555 ] and L1899: C552 = [ C554 , C556 ] and L1900: (C553 < C554 & C555 < C556) by L1896 , L1891;
consider C557 , C558 being Nat, C559 , C560 being  real number such that L1901: C552 = [ C557 , C559 ] and L1902: C551 = [ C558 , C560 ] and L1903: (C557 < C558 & C559 < C560) by L1897 , L1891;
L1904: (C553 = C558 & C554 = C557) by L1898 , L1899 , L1901 , L1902 , XTUPLE_0:1;
thus L1905: C551 = C552 by L1904 , L1900 , L1903;
end;
L1906: D261 is  transitive
proof
let C561 , C562 , C563 being set;
assume that
L1907: C561 in (the carrier of D261)
and
L1908: C562 in (the carrier of D261)
and
L1909: C563 in (the carrier of D261)
and
L1910: [ C561 , C562 ] in (the InternalRel of D261)
and
L1911: [ C562 , C563 ] in (the InternalRel of D261);
consider C564 , C565 being Nat, C566 , C567 being  real number such that L1912: C561 = [ C564 , C566 ] and L1913: C562 = [ C565 , C567 ] and L1914: (C564 < C565 & C566 < C567) by L1910 , L1891;
consider C568 , C569 being Nat, C570 , C571 being  real number such that L1915: C562 = [ C568 , C570 ] and L1916: C563 = [ C569 , C571 ] and L1917: (C568 < C569 & C570 < C571) by L1911 , L1891;
L1918: (C565 = C568 & C567 = C570) by L1913 , L1915 , XTUPLE_0:1;
L1919: (C564 < C569 & C566 < C571) by L1918 , L1914 , L1917 , XXREAL_0:2;
thus L1920: [ C561 , C563 ] in (the InternalRel of D261) by L1919 , L1912 , L1916 , L1907 , L1909 , L1891;
end;
reconsider D262 = D261 as  finite  antisymmetric  transitive RelStr by L1906 , L1893;
L1921: ( card D262 ) = ( card C548 );
per cases  by L1921 , L1889 , L1851;
suppose L1922: (ex B324 being (Clique of D262) st ( card B324 ) >= ( C549 + 1 ));

consider C572 being (Clique of D262) such that L1923: ( card C572 ) >= ( C549 + 1 ) by L1922;
set D263 = C572;
reconsider D264 = D263 as (Subset of C548);
reconsider D265 = D264 as Function;
L1924: ( dom D265 ) c= ( Seg ( len C548 ) )
proof
let C573 being set;
assume L1925: C573 in ( dom D265 );
consider C574 being set such that L1926: [ C573 , C574 ] in D265 by L1925 , XTUPLE_0:def 12;
L1927: C573 in ( dom C548 ) by L1926 , XTUPLE_0:def 12;
thus L1928: thesis by L1927 , FINSEQ_1:def 3;
end;
reconsider D266 = D265 as FinSubsequence by L1924 , FINSEQ_1:def 12;
reconsider D267 = D266 as  real-valued FinSubsequence;
take D267;
thus L1929: D267 c= C548;
thus L1930: ( card D267 ) >= ( C549 + 1 ) by L1923;
L1931: D267 is  increasing
proof
let C575 , C576 being  ext-real number;
assume that
L1932: C575 in ( dom D267 )
and
L1933: C576 in ( dom D267 )
and
L1934: C575 < C576;
L1935: [ C575 , ( D267 . C575 ) ] in D267 by L1932 , FUNCT_1:1;
L1936: [ C576 , ( D267 . C576 ) ] in D267 by L1933 , FUNCT_1:1;
reconsider D268 = [ C575 , ( D267 . C575 ) ] , D269 = [ C576 , ( D267 . C576 ) ] as (Element of D262) by L1936 , L1935;
L1937: D268 <> D269 by L1934 , XTUPLE_0:1;
per cases  by L1935 , L1936 , L1937 , L59;
suppose L1938: D268 <= D269;

L1939: [ D268 , D269 ] in C550 by L1938 , ORDERS_2:def 5;
consider C577 , C578 being Nat, C579 , C580 being  real number such that L1940: D268 = [ C577 , C579 ] and L1941: D269 = [ C578 , C580 ] and L1942: (C577 < C578 & C579 < C580) by L1939 , L1891;
L1943: (C578 = C576 & C580 = ( D267 . C576 )) by L1941 , XTUPLE_0:1;
thus L1944: ( D267 . C575 ) < ( D267 . C576 ) by L1943 , L1942 , L1940 , XTUPLE_0:1;
end;
suppose L1945: D269 <= D268;

L1946: [ D269 , D268 ] in C550 by L1945 , ORDERS_2:def 5;
consider C581 , C582 being Nat, C583 , C584 being  real number such that L1947: D269 = [ C581 , C583 ] and L1948: D268 = [ C582 , C584 ] and L1949: (C581 < C582 & C583 < C584) by L1946 , L1891;
L1950: (C581 = C576 & C582 = C575) by L1947 , L1948 , XTUPLE_0:1;
thus L1951: ( D267 . C575 ) < ( D267 . C576 ) by L1950 , L1934 , L1949;
end;
end;
thus L1953: thesis by L1931;
end;
suppose L1954: (ex B325 being (StableSet of D262) st ( card B325 ) >= ( C549 + 1 ));

consider C585 being (StableSet of D262) such that L1955: ( card C585 ) >= ( C549 + 1 ) by L1954;
set D270 = C585;
reconsider D271 = D270 as (Subset of C548);
reconsider D272 = D271 as Function;
L1956: ( dom D272 ) c= ( Seg ( len C548 ) )
proof
let C586 being set;
assume L1957: C586 in ( dom D272 );
consider C587 being set such that L1958: [ C586 , C587 ] in D272 by L1957 , XTUPLE_0:def 12;
L1959: C586 in ( dom C548 ) by L1958 , XTUPLE_0:def 12;
thus L1960: thesis by L1959 , FINSEQ_1:def 3;
end;
reconsider D273 = D272 as FinSubsequence by L1956 , FINSEQ_1:def 12;
reconsider D274 = D273 as  real-valued FinSubsequence;
take D274;
thus L1961: D274 c= C548;
thus L1962: ( card D274 ) >= ( C549 + 1 ) by L1955;
L1963: D274 is  decreasing
proof
let C588 , C589 being  ext-real number;
assume that
L1964: C588 in ( dom D274 )
and
L1965: C589 in ( dom D274 )
and
L1966: C588 < C589;
L1967: [ C588 , ( D274 . C588 ) ] in D274 by L1964 , FUNCT_1:1;
L1968: [ C589 , ( D274 . C589 ) ] in D274 by L1965 , FUNCT_1:1;
reconsider D275 = [ C588 , ( D274 . C588 ) ] , D276 = [ C589 , ( D274 . C589 ) ] as (Element of D262) by L1968 , L1967;
L1969: D275 <> D276 by L1966 , XTUPLE_0:1;
L1970: (( D274 . C588 ) = ( C548 . C588 ) & ( D274 . C589 ) = ( C548 . C589 )) by L1964 , L1965 , GRFUNC_1:2;
L1971: ( D274 . C588 ) <> ( D274 . C589 ) by L1970 , L1892 , L1956 , L1964 , L1965 , L1966 , L1890 , FUNCT_1:def 4;
reconsider D277 = C588 , D278 = C589 as Nat by L1964 , L1965;
reconsider D279 = ( D274 . C588 ) , D280 = ( D274 . C589 ) as  real number;
L1972: (D275 = [ D277 , D279 ] & D276 = [ D278 , D280 ]);
per cases  by L1971 , XXREAL_0:1;
suppose L1973: ( D274 . C588 ) < ( D274 . C589 );

L1974: [ D275 , D276 ] in C550 by L1973 , L1967 , L1891 , L1966 , L1972;
L1975: D275 <= D276 by L1974 , ORDERS_2:def 5;
thus L1976: ( D274 . C588 ) > ( D274 . C589 ) by L1975 , L1967 , L1968 , L1969 , L193;
end;
suppose L1977: ( D274 . C588 ) > ( D274 . C589 );

thus L1978: thesis by L1977;
end;
end;
thus L1980: thesis by L1963;
end;
end;
