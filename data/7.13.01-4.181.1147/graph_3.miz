:: Euler circuits and paths
::  by Yatsuka Nakamura and Piotr Rudnicki
::
:: Received July 29, 1997
:: Copyright (c) 1997-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, FINSEQ_2, XBOOLE_0, SUBSET_1, FINSEQ_1, ABIAN, INT_1,
      ARYTM_1, RELAT_1, XXREAL_0, ARYTM_3, GRAPH_2, FUNCT_1, CARD_1, GRAPH_1,
      GLIB_000, STRUCT_0, TREES_2, ORDINAL4, NAT_1, PARTFUN1, TARSKI, RELAT_2,
      FINSET_1, FUNCT_4, FUNCOP_1, ZFMISC_1, FINSEQ_6, GRAPH_3;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, CARD_1, NUMBERS, XCMPLX_0,
      RELAT_1, FUNCT_1, PARTFUN1, FUNCT_2, FUNCOP_1, FUNCT_4, ORDINAL1, NAT_1,
      INT_1, FINSET_1, FINSEQ_1, FINSEQ_2, FINSEQ_4, XXREAL_2, STRUCT_0,
      GRAPH_1, GRAPH_2, MSSCYC_1, ABIAN, XXREAL_0;
 constructors WELLORD2, FUNCT_4, FINSEQ_4, ABIAN, GRAPH_2, MSSCYC_1, XXREAL_2,
      RELSET_1, PRE_POLY;
 registrations XBOOLE_0, ORDINAL1, FUNCOP_1, FINSET_1, XXREAL_0, XREAL_0,
      NAT_1, INT_1, CARD_1, MEMBERED, FINSEQ_1, ABIAN, GRAPH_2, MSSCYC_1,
      RELAT_1, XXREAL_2, STRUCT_0, RELSET_1, FINSEQ_2;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, PARTFUN1, GRAPH_1, GRAPH_2, MSSCYC_1, XBOOLE_0, FUNCOP_1;
 theorems TARSKI, ZFMISC_1, RELAT_1, FUNCT_1, FUNCT_2, NAT_1, FUNCOP_1,
      FUNCT_4, PARTFUN1, CARD_1, CARD_2, FINSEQ_1, FINSEQ_2, FINSEQ_3,
      FINSEQ_4, FINSEQ_5, GRAPH_1, GRAPH_2, MSSCYC_1, ABIAN, RELSET_1,
      XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, ORDINAL1, XXREAL_2, INT_1,
      XTUPLE_0;
 schemes NAT_1, DOMAIN_1, XBOOLE_0;

begin
definition
let C1 being set;
let C2 being non  empty (FinSequenceSet of C1);
let C3 being non  empty (Subset of C2);
redefine mode Element of C3
 -> (FinSequence of C1);
coherence
proof
let C4 being (Element of C3);
L1: C4 is (Element of C2);
thus L2: thesis by L1;
end;
end;
registration
let C5 , C6 being  even Integer;
cluster ( C5 - C6 ) ->  even;
coherence
proof
L4: 2 divides C6 by ABIAN:def 1;
consider C7 being Integer such that L5: C6 = ( 2 * C7 ) by L4 , INT_1:def 3;
L6: 2 divides C5 by ABIAN:def 1;
consider C8 being Integer such that L7: C5 = ( 2 * C8 ) by L6 , INT_1:def 3;
L8: ( C5 - C6 ) = ( 2 * ( C8 - C7 ) ) by L7 , L5;
thus L9: thesis by L8;
end;
end;
theorem
L11: (for B1 , B2 being Integer holds ((B1 is  even iff B2 is  even) iff ( B1 - B2 ) is  even));
L12: (for B3 being FinSequence holds (for B4 , B5 being (Element of ( NAT )) holds ((1 <= B4 & B4 <= ( B5 + 1 ) & B5 <= ( len B3 )) implies (( ( len ( (B4 , B5) -cut B3 ) ) + B4 ) = ( B5 + 1 ) & (for B6 being (Element of ( NAT )) holds (B6 < ( len ( (B4 , B5) -cut B3 ) ) implies ( ( (B4 , B5) -cut B3 ) . ( B6 + 1 ) ) = ( B3 . ( B4 + B6 ) )))))))
proof
let C9 being FinSequence;
let C10 , C11 being (Element of ( NAT ));
assume that
L13: 1 <= C10
and
L14: C10 <= ( C11 + 1 )
and
L15: C11 <= ( len C9 );
L16: (C10 = ( C11 + 1 ) or C10 < ( C11 + 1 )) by L14 , XXREAL_0:1;
per cases  by L16 , NAT_1:13;
suppose L17: C10 = ( C11 + 1 );

L18: C11 < C10 by L17 , XREAL_1:29;
L19: ( (C10 , C11) -cut C9 ) = ( {} ) by L18 , GRAPH_2:def 1;
thus L20: ( ( len ( (C10 , C11) -cut C9 ) ) + C10 ) = ( C11 + 1 ) by L19 , L17 , CARD_1:27;
L21: (not (1 <= C10 & C10 <= C11 & C11 <= ( len C9 ))) by L17 , XREAL_1:29;
thus L22: thesis by L21 , CARD_1:27 , GRAPH_2:def 1;
end;
suppose L23: C10 <= C11;

thus L24: thesis by L23 , L13 , L15 , GRAPH_2:def 1;
end;
end;
theorem
L26: (for B7 being FinSequence holds (for B8 , B9 , B10 being (Element of ( NAT )) holds (B10 in ( dom ( (B8 , B9) -cut B7 ) ) implies (ex B11 being (Element of ( NAT )) st (B11 in ( dom B7 ) & ( B7 . B11 ) = ( ( (B8 , B9) -cut B7 ) . B10 ) & ( B11 + 1 ) = ( B8 + B10 ) & B8 <= B11 & B11 <= B9)))))
proof
let C12 being FinSequence;
let C13 , C14 , C15 being (Element of ( NAT ));
assume that
L27: C15 in ( dom ( (C13 , C14) -cut C12 ) );
set D1 = ( (C13 , C14) -cut C12 );
L28: C15 <= ( len D1 ) by L27 , FINSEQ_3:25;
per cases ;
suppose L29: (1 <= C13 & C13 <= C14 & C14 <= ( len C12 ));

L30: ( ( 0 ) + 1 ) <= C15 by L27 , FINSEQ_3:25;
consider C16 being (Element of ( NAT )) such that L31: ( 0 ) <= C16 and L32: C16 < ( len D1 ) and L33: C15 = ( C16 + 1 ) by L30 , L28 , GRAPH_2:1;
take D2 = ( C13 + C16 );
L34: C13 <= D2 by NAT_1:11;
L35: 1 <= D2 by L34 , L29 , XXREAL_0:2;
L36: ( ( len D1 ) + C13 ) = ( C14 + 1 ) by L29 , GRAPH_2:def 1;
L37: ( C13 + C16 ) < ( C13 + ( len D1 ) ) by L32 , XREAL_1:6;
L38: ( C13 + C16 ) <= C14 by L37 , L36 , NAT_1:13;
L39: D2 <= ( len C12 ) by L38 , L29 , XXREAL_0:2;
thus L40: D2 in ( dom C12 ) by L39 , L35 , FINSEQ_3:25;
thus L41: ( C12 . D2 ) = ( D1 . C15 ) by L29 , L32 , L33 , GRAPH_2:def 1;
thus L42: ( D2 + 1 ) = ( C13 + C15 ) by L33;
thus L43: thesis by L36 , L37 , NAT_1:11 , NAT_1:13;
end;
suppose L44: (not (1 <= C13 & C13 <= C14 & C14 <= ( len C12 )));

thus L45: thesis by L44 , L27 , GRAPH_2:def 1 , RELAT_1:38;
end;
end;
definition
let C17 being Graph;
mode Vertex of C17
 is (Element of (the carrier of C17));
end;
theorem
L48: (for R1 being Graph holds (for R5 being (Chain of R1) holds (for R9 being (FinSequence of (the carrier of R1)) holds (R9 is_vertex_seq_of R5 implies R9 is non  empty))))
proof
let R1 being Graph;
let R5 being (Chain of R1);
let R9 being (FinSequence of (the carrier of R1));
assume L49: R9 is_vertex_seq_of R5;
L50: ( len R9 ) = ( ( len R5 ) + 1 ) by L49 , GRAPH_2:def 6;
thus L51: thesis by L50;
end;
L52: (for R1 being Graph holds (for R6 being (Path of R1) holds (for R14 being (Element of ( NAT )) holds (for R15 being (Element of ( NAT )) holds ((1 <= R14 & R14 <= ( len R6 ) & 1 <= R15 & R15 <= ( len R6 ) & R14 <> R15) implies ( R6 . R14 ) <> ( R6 . R15 ))))))
proof
let R1 being Graph;
let R6 being (Path of R1);
let R14 being (Element of ( NAT ));
let R15 being (Element of ( NAT ));
assume that
L53: (1 <= R14 & R14 <= ( len R6 ) & 1 <= R15 & R15 <= ( len R6 ))
and
L54: R14 <> R15;
L55: (R14 in ( dom R6 ) & R15 in ( dom R6 )) by L53 , FINSEQ_3:25;
thus L56: thesis by L55 , L54 , FUNCT_1:def 4;
end;
theorem
L57: (for R1 being Graph holds (for R12 being set holds (R12 in (the carrier' of R1) implies <* R12 *> is (Path of R1))))
proof
let R1 being Graph;
let R12 being set;
assume L58: R12 in (the carrier' of R1);
reconsider D3 = <* R12 *> as (Chain of R1) by L58 , MSSCYC_1:5;
L59:
now
let C18 , C19 being (Element of ( NAT ));
L60: ( len D3 ) = 1 by FINSEQ_1:39;
assume L61: (1 <= C18 & C18 < C19 & C19 <= ( len D3 ));
thus L62: ( D3 . C18 ) <> ( D3 . C19 ) by L61 , L60 , XXREAL_0:2;
end;
thus L63: thesis by L59 , GRAPH_1:def 16;
end;
theorem
L64: (for R1 being Graph holds (for R6 being (Path of R1) holds (for R14 being (Element of ( NAT )) holds (for R15 being (Element of ( NAT )) holds ( (R15 , R14) -cut R6 ) is (Path of R1)))))
proof
let R1 being Graph;
let R6 being (Path of R1);
let R14 being (Element of ( NAT ));
let R15 being (Element of ( NAT ));
per cases ;
suppose L65: ((not 1 <= R15) or (not R14 <= ( len R6 )) or R15 > R14);

L66: ( (R15 , R14) -cut R6 ) = ( {} ) by L65 , GRAPH_2:def 1;
thus L67: thesis by L66 , GRAPH_1:14;
end;
suppose L68: (1 <= R15 & R15 <= R14 & R14 <= ( len R6 ));

reconsider D4 = ( (R15 , R14) -cut R6 ) as (Chain of R1) by L68 , GRAPH_2:41;
assume L69: (not ( (R15 , R14) -cut R6 ) is (Path of R1));
consider C20 , C21 being (Element of ( NAT )) such that L70: 1 <= C20 and L71: C20 < C21 and L72: C21 <= ( len D4 ) and L73: ( D4 . C20 ) = ( D4 . C21 ) by L69 , GRAPH_1:def 16;
L74: 1 <= C21 by L70 , L71 , XXREAL_0:2;
L75: C21 in ( dom D4 ) by L74 , L72 , FINSEQ_3:25;
consider C22 being (Element of ( NAT )) such that L76: (C22 in ( dom R6 ) & ( R6 . C22 ) = ( D4 . C21 )) and L77: ( C22 + 1 ) = ( R15 + C21 ) and L78: R15 <= C22 and L79: C22 <= R14 by L75 , L26;
L80: C20 <= ( len D4 ) by L71 , L72 , XXREAL_0:2;
L81: C20 in ( dom D4 ) by L80 , L70 , FINSEQ_3:25;
consider C23 being (Element of ( NAT )) such that L82: (C23 in ( dom R6 ) & ( R6 . C23 ) = ( D4 . C20 )) and L83: ( C23 + 1 ) = ( R15 + C20 ) and L84: R15 <= C23 and L85: C23 <= R14 by L81 , L26;
L86: C23 = C22 by L73 , L82 , L76 , FUNCT_1:def 4;
thus L87: contradiction by L86 , L71 , L83 , L77;
end;
end;
theorem
L89: (for R1 being Graph holds (for R7 being (Path of R1) holds (for R8 being (Path of R1) holds (for R10 being (FinSequence of (the carrier of R1)) holds (for R11 being (FinSequence of (the carrier of R1)) holds ((( rng R7 ) misses ( rng R8 ) & R10 is_vertex_seq_of R7 & R11 is_vertex_seq_of R8 & ( R10 . ( len R10 ) ) = ( R11 . 1 )) implies ( R7 ^ R8 ) is (Path of R1)))))))
proof
let R1 being Graph;
let R7 being (Path of R1);
let R8 being (Path of R1);
let R10 being (FinSequence of (the carrier of R1));
let R11 being (FinSequence of (the carrier of R1));
set D5 = R7;
set D6 = R8;
assume that
L90: ( rng D5 ) misses ( rng D6 )
and
L91: (R10 is_vertex_seq_of D5 & R11 is_vertex_seq_of D6 & ( R10 . ( len R10 ) ) = ( R11 . 1 ));
reconsider D7 = ( D5 ^ D6 ) as (Chain of R1) by L91 , GRAPH_2:43;
L92:
now
let C24 , C25 being (Element of ( NAT ));
assume that
L93: 1 <= C24
and
L94: C24 < C25
and
L95: C25 <= ( len D7 )
and
L96: ( D7 . C24 ) = ( D7 . C25 );
L97: 1 <= C25 by L93 , L94 , XXREAL_0:2;
L98: C25 in ( dom D7 ) by L97 , L95 , FINSEQ_3:25;
L99: C24 <= ( len D7 ) by L94 , L95 , XXREAL_0:2;
L100: C24 in ( dom D7 ) by L99 , L93 , FINSEQ_3:25;
per cases  by L100 , L98 , FINSEQ_1:25;
suppose L101: (C24 in ( dom D5 ) & C25 in ( dom D5 ));

L102: ( D5 . C24 ) = ( D7 . C24 ) by L101 , FINSEQ_1:def 7
.= ( D5 . C25 ) by L96 , L101 , FINSEQ_1:def 7;
thus L103: contradiction by L102 , L94 , L101 , FUNCT_1:def 4;
end;
suppose L104: (C24 in ( dom D5 ) & (ex B12 being Nat st (B12 in ( dom D6 ) & C25 = ( ( len D5 ) + B12 ))));

L105: ( D5 . C24 ) in ( rng D5 ) by L104 , FUNCT_1:def 3;
consider C26 being Nat such that L106: C26 in ( dom D6 ) and L107: C25 = ( ( len D5 ) + C26 ) by L104;
L108: ( D6 . C26 ) in ( rng D6 ) by L106 , FUNCT_1:def 3;
L109: ( D5 . C24 ) = ( D7 . C24 ) by L104 , FINSEQ_1:def 7
.= ( D6 . C26 ) by L96 , L106 , L107 , FINSEQ_1:def 7;
thus L110: contradiction by L109 , L90 , L105 , L108 , XBOOLE_0:3;
end;
suppose L111: (C25 in ( dom D5 ) & (ex B13 being Nat st (B13 in ( dom D6 ) & C24 = ( ( len D5 ) + B13 ))));

consider C27 being Nat such that L112: C27 in ( dom D6 ) and L113: C24 = ( ( len D5 ) + C27 ) by L111;
L114: C25 <= ( len D5 ) by L111 , FINSEQ_3:25;
L115: ( ( len D5 ) + C27 ) < ( len D5 ) by L114 , L94 , L113 , XXREAL_0:2;
thus L116: contradiction by L115 , NAT_1:11;
end;
suppose L117: ((ex B14 being Nat st (B14 in ( dom D6 ) & C24 = ( ( len D5 ) + B14 ))) & (ex B15 being Nat st (B15 in ( dom D6 ) & C25 = ( ( len D5 ) + B15 ))));

consider C28 being Nat such that L118: (C28 in ( dom D6 ) & C24 = ( ( len D5 ) + C28 )) by L117;
consider C29 being Nat such that L119: (C29 in ( dom D6 ) & C25 = ( ( len D5 ) + C29 )) by L117;
L120: ( D6 . C28 ) = ( D7 . C24 ) by L118 , FINSEQ_1:def 7
.= ( D6 . C29 ) by L96 , L119 , FINSEQ_1:def 7;
thus L121: contradiction by L120 , L94 , L119 , L118 , FUNCT_1:def 4;
end;
end;
thus L123: thesis by L92 , GRAPH_1:def 16;
end;
theorem
L124: (for R1 being Graph holds (for R5 being (Chain of R1) holds (R5 = ( {} ) implies R5 is  cyclic)))
proof
let R1 being Graph;
let R5 being (Chain of R1);
set D8 = the (Vertex of R1);
assume L125: R5 = ( {} );
L126: <* D8 *> is_vertex_seq_of R5 by L125 , GRAPH_2:32;
L127: ( <* D8 *> . 1 ) = ( <* D8 *> . ( len <* D8 *> ) ) by FINSEQ_1:40;
thus L128: thesis by L127 , L126 , MSSCYC_1:def 2;
end;
registration
let C30 being Graph;
cluster  cyclic for (Path of C30);
existence
proof
reconsider D9 = ( {} ) as (Path of C30) by GRAPH_1:14;
take D9;
thus L129: thesis by L124;
end;
end;
theorem
L131: (for R1 being Graph holds (for R15 being (Element of ( NAT )) holds (for B16 being  cyclic (Path of R1) holds ( ( (( R15 + 1 ) , ( len B16 )) -cut B16 ) ^ ( (1 , R15) -cut B16 ) ) is  cyclic  cyclic  cyclic  cyclic (Path of R1))))
proof
let R1 being Graph;
let R15 being (Element of ( NAT ));
let C31 being  cyclic (Path of R1);
per cases  by NAT_1:14 , XXREAL_0:1;
suppose L132: R15 = ( 0 );

L133: ( 0 ) <= ( len C31 );
L134: ( ( len ( (1 , R15) -cut C31 ) ) + 1 ) = ( ( 0 ) + 1 ) by L133 , L132 , L12;
L135: ( (1 , R15) -cut C31 ) = ( {} ) by L134;
L136: ( (( R15 + 1 ) , ( len C31 )) -cut C31 ) = C31 by L132 , GRAPH_2:7;
thus L137: thesis by L136 , L135 , FINSEQ_1:34;
end;
suppose L138: (1 <= R15 & ( len C31 ) = R15);

L139: 1 <= ( R15 + 1 ) by NAT_1:12;
L140: ( ( len ( (( R15 + 1 ) , ( len C31 )) -cut C31 ) ) + ( R15 + 1 ) ) = ( ( len C31 ) + 1 ) by L139 , L138 , L12;
L141: ( (( R15 + 1 ) , ( len C31 )) -cut C31 ) = ( {} ) by L140 , L138;
L142: ( ( (( R15 + 1 ) , ( len C31 )) -cut C31 ) ^ ( (1 , R15) -cut C31 ) ) = ( (1 , R15) -cut C31 ) by L141 , FINSEQ_1:34
.= C31 by L138 , GRAPH_2:7;
thus L143: thesis by L142;
end;
suppose L144: (1 <= R15 & ( len C31 ) < R15);

L145: R15 <= ( R15 + 1 ) by NAT_1:11;
L146: ( len C31 ) < ( R15 + 1 ) by L145 , L144 , XXREAL_0:2;
L147: ( (( R15 + 1 ) , ( len C31 )) -cut C31 ) = ( {} ) by L146 , GRAPH_2:def 1;
L148: ( (1 , R15) -cut C31 ) = ( {} ) by L144 , GRAPH_2:def 1;
L149: ( ( (( R15 + 1 ) , ( len C31 )) -cut C31 ) ^ ( (1 , R15) -cut C31 ) ) = ( {} ) by L148 , L147 , FINSEQ_1:34;
thus L150: thesis by L149 , L124 , GRAPH_1:14;
end;
suppose L151: (1 <= R15 & R15 < ( len C31 ));

set D10 = R15;
set D11 = ( R15 + 1 );
L152: 1 <= D11 by L151 , NAT_1:13;
reconsider D12 = ( (1 , D10) -cut C31 ) , D13 = ( (D11 , ( len C31 )) -cut C31 ) as (Path of R1) by L64;
consider C32 being (FinSequence of (the carrier of R1)) such that L153: C32 is_vertex_seq_of C31 by GRAPH_2:33;
reconsider D14 = ( (1 , D11) -cut C32 ) , D15 = ( (D11 , ( len C32 )) -cut C32 ) as (FinSequence of (the carrier of R1));
L154: D11 <= ( len C31 ) by L151 , NAT_1:13;
L155: ( len C32 ) = ( ( len C31 ) + 1 ) by L153 , GRAPH_2:def 6;
L156: D15 is_vertex_seq_of D13 by L155 , L152 , L154 , L153 , GRAPH_2:42;
L157: ( len C31 ) <= ( ( len C31 ) + 1 ) by NAT_1:11;
L158: D11 <= ( len C32 ) by L157 , L154 , L155 , XXREAL_0:2;
L159: D11 < ( ( len C32 ) + 1 ) by L158 , NAT_1:13;
L160: ( ( len D14 ) + 1 ) = ( D11 + 1 ) by L152 , L158 , GRAPH_2:def 1;
L161: 1 < ( len D14 ) by L160 , L151 , NAT_1:13;
L162: D14 is_vertex_seq_of D12 by L151 , L153 , GRAPH_2:42;
L163: ( len C32 ) <= ( ( len C32 ) + 1 ) by NAT_1:11;
L164: D11 <= ( ( len C32 ) + 1 ) by L163 , L158 , XXREAL_0:2;
L165: ( ( len D15 ) + D11 ) = ( ( len C32 ) + 1 ) by L164 , L152 , L12;
L166: ( 1 + D11 ) <= ( ( len D15 ) + D11 ) by L165 , L159 , NAT_1:13;
L167: 1 <= ( len D15 ) by L166 , XREAL_1:6;
reconsider D16 = ( D15 ^' D14 ) as (FinSequence of (the carrier of R1));
set D17 = ( D13 ^ D12 );
L168: ( C32 . ( len C32 ) ) = ( C32 . 1 ) by L153 , MSSCYC_1:6;
L169: (( D14 . 1 ) = ( C32 . 1 ) & ( D15 . ( len D15 ) ) = ( C32 . ( len C32 ) )) by L152 , L158 , GRAPH_2:12;
reconsider D18 = D17 as (Chain of R1) by L169 , L168 , L162 , L156 , GRAPH_2:43;
L170: D16 is_vertex_seq_of D18 by L168 , L162 , L156 , L169 , GRAPH_2:44;
L171: C31 = ( D12 ^ D13 ) by L151 , GRAPH_2:9;
L172: ( rng D12 ) misses ( rng D13 ) by L171 , FINSEQ_3:91;
reconsider D19 = D18 as (Path of R1) by L172 , L168 , L162 , L156 , L169 , L89;
L173: (( D14 . ( len D14 ) ) = ( C32 . D11 ) & ( D15 . 1 ) = ( C32 . D11 )) by L152 , L158 , GRAPH_2:12;
L174: ( D16 . 1 ) = ( D14 . ( len D14 ) ) by L173 , L167 , GRAPH_2:14
.= ( D16 . ( len D16 ) ) by L161 , GRAPH_2:16;
L175: D19 is  cyclic  cyclic  cyclic  cyclic (Path of R1) by L174 , L170 , MSSCYC_1:def 2;
thus L176: thesis by L175;
end;
end;
theorem
L178: (for R1 being Graph holds (for R6 being (Path of R1) holds (for R15 being (Element of ( NAT )) holds (( R15 + 1 ) in ( dom R6 ) implies (( len ( ( (( R15 + 1 ) , ( len R6 )) -cut R6 ) ^ ( (1 , R15) -cut R6 ) ) ) = ( len R6 ) & ( rng ( ( (( R15 + 1 ) , ( len R6 )) -cut R6 ) ^ ( (1 , R15) -cut R6 ) ) ) = ( rng R6 ) & ( ( ( (( R15 + 1 ) , ( len R6 )) -cut R6 ) ^ ( (1 , R15) -cut R6 ) ) . 1 ) = ( R6 . ( R15 + 1 ) ))))))
proof
let R1 being Graph;
let R6 being (Path of R1);
let R15 being (Element of ( NAT ));
set D20 = ( (( R15 + 1 ) , ( len R6 )) -cut R6 );
set D21 = ( (1 , R15) -cut R6 );
set D22 = ( D20 ^ D21 );
set D23 = ( R15 + 1 );
assume L179: ( R15 + 1 ) in ( dom R6 );
L180: ( R15 + 1 ) <= ( len R6 ) by L179 , FINSEQ_3:25;
L181: D23 < ( ( len R6 ) + 1 ) by L180 , NAT_1:13;
L182: R15 <= ( R15 + 1 ) by NAT_1:11;
L183: R6 = ( D21 ^ D20 ) by L182 , L180 , GRAPH_2:9 , XXREAL_0:2;
thus L184: ( len D22 ) = ( ( len D21 ) + ( len D20 ) ) by FINSEQ_1:22
.= ( len R6 ) by L183 , FINSEQ_1:22;
thus L185: ( rng D22 ) = ( ( rng D21 ) \/ ( rng D20 ) ) by FINSEQ_1:31
.= ( rng R6 ) by L183 , FINSEQ_1:31;
L186: 1 <= ( R15 + 1 ) by L179 , FINSEQ_3:25;
L187: ( ( len D20 ) + D23 ) = ( ( len R6 ) + 1 ) by L186 , L180 , GRAPH_2:def 1;
L188: ( 1 + D23 ) <= ( ( len D20 ) + D23 ) by L187 , L181 , NAT_1:13;
L189: 1 <= ( len D20 ) by L188 , XREAL_1:6;
L190: 1 in ( dom D20 ) by L189 , FINSEQ_3:25;
thus L191: ( D22 . 1 ) = ( D20 . ( ( 0 ) + 1 ) ) by L190 , FINSEQ_1:def 7
.= ( R6 . ( D23 + ( 0 ) ) ) by L186 , L180 , L189 , GRAPH_2:def 1
.= ( R6 . D23 );
end;
theorem
L192: (for R1 being Graph holds (for R14 being (Element of ( NAT )) holds (for B17 being  cyclic (Path of R1) holds (R14 in ( dom B17 ) implies (ex B18 being  cyclic (Path of R1) st (( B18 . 1 ) = ( B17 . R14 ) & ( len B18 ) = ( len B17 ) & ( rng B18 ) = ( rng B17 )))))))
proof
let R1 being Graph;
let R14 being (Element of ( NAT ));
let C33 being  cyclic (Path of R1);
assume L193: R14 in ( dom C33 );
L194: 1 <= R14 by L193 , FINSEQ_3:25;
per cases  by L194 , XXREAL_0:1;
suppose L195: R14 = 1;

take C33;
thus L196: thesis by L195;
end;
suppose L197: 1 < R14;

L198: ( 1 + 1 ) <= R14 by L197 , NAT_1:13;
consider C34 being (Element of ( NAT )) such that L199: 1 <= C34 and L200: C34 < R14 and L201: R14 = ( C34 + 1 ) by L198 , GRAPH_2:1;
reconsider D24 = ( ( (R14 , ( len C33 )) -cut C33 ) ^ ( (1 , C34) -cut C33 ) ) as  cyclic (Path of R1) by L201 , L131;
take D24;
thus L202: thesis by L193 , L201 , L178;
end;
end;
theorem
L204: (for R1 being Graph holds (for R12 being set holds (for B19 , B20 being (Vertex of R1) holds ((B19 = ( (the Source of R1) . R12 ) & B20 = ( (the Target of R1) . R12 )) implies <* B20 , B19 *> is_vertex_seq_of <* R12 *>))))
proof
let R1 being Graph;
let R12 being set;
let C35 , C36 being (Element of (the carrier of R1));
assume L205: (C35 = ( (the Source of R1) . R12 ) & C36 = ( (the Target of R1) . R12 ));
set D25 = <* R12 *>;
set D26 = <* C36 , C35 *>;
L206: ( D26 /. ( 1 + 1 ) ) = C35 by FINSEQ_4:17;
L207: ( len D25 ) = 1 by FINSEQ_1:39;
thus L208: ( len D26 ) = ( ( len D25 ) + 1 ) by L207 , FINSEQ_1:44;
let C37 being (Element of ( NAT ));
assume L209: (1 <= C37 & C37 <= ( len D25 ));
L210: C37 = 1 by L209 , L207 , XXREAL_0:1;
L211: (( D25 . 1 ) = R12 & ( D26 /. 1 ) = C36) by FINSEQ_1:40 , FINSEQ_4:17;
thus L212: thesis by L211 , L205 , L210 , L206 , GRAPH_1:def 12;
end;
theorem
L213: (for R1 being Graph holds (for R5 being (Chain of R1) holds (for R9 being (FinSequence of (the carrier of R1)) holds (for R12 being set holds ((R12 in (the carrier' of R1) & R9 is_vertex_seq_of R5 & ( R9 . ( len R9 ) ) = ( (the Source of R1) . R12 )) implies (( R5 ^ <* R12 *> ) is (Chain of R1) & (ex B21 being (FinSequence of (the carrier of R1)) st (B21 = ( R9 ^' <* ( (the Source of R1) . R12 ) , ( (the Target of R1) . R12 ) *> ) & B21 is_vertex_seq_of ( R5 ^ <* R12 *> ) & ( B21 . 1 ) = ( R9 . 1 ) & ( B21 . ( len B21 ) ) = ( (the Target of R1) . R12 )))))))))
proof
let R1 being Graph;
let R5 being (Chain of R1);
let R9 being (FinSequence of (the carrier of R1));
let R12 being set;
assume that
L214: R12 in (the carrier' of R1)
and
L215: R9 is_vertex_seq_of R5;
reconsider D27 = <* R12 *> as (Chain of R1) by L214 , MSSCYC_1:5;
reconsider D28 = ( (the Source of R1) . R12 ) , D29 = ( (the Target of R1) . R12 ) as (Vertex of R1) by L214 , FUNCT_2:5;
reconsider D30 = <* D28 , D29 *> as (FinSequence of (the carrier of R1));
L216: (D30 is_vertex_seq_of D27 & ( D30 . 1 ) = D28) by FINSEQ_1:44 , MSSCYC_1:4;
assume L217: ( R9 . ( len R9 ) ) = ( (the Source of R1) . R12 );
thus L218: ( R5 ^ <* R12 *> ) is (Chain of R1) by L217 , L215 , L216 , GRAPH_2:43;
reconsider D31 = ( R5 ^ D27 ) as (Chain of R1) by L215 , L217 , L216 , GRAPH_2:43;
take D32 = ( R9 ^' D30 );
thus L219: D32 = ( R9 ^' <* ( (the Source of R1) . R12 ) , ( (the Target of R1) . R12 ) *> );
L220: D32 is_vertex_seq_of D31 by L215 , L217 , L216 , GRAPH_2:44;
thus L221: D32 is_vertex_seq_of ( R5 ^ <* R12 *> ) by L220;
L222: ( len R9 ) = ( ( len R5 ) + 1 ) by L215 , GRAPH_2:def 6;
L223: 1 <= ( len R9 ) by L222 , NAT_1:11;
thus L224: ( D32 . 1 ) = ( R9 . 1 ) by L223 , GRAPH_2:14;
L225: ( len D30 ) = 2 by FINSEQ_1:44;
L226: ( D30 . ( len D30 ) ) = D29 by L225 , FINSEQ_1:44;
thus L227: thesis by L226 , L225 , GRAPH_2:16;
end;
theorem
L228: (for R1 being Graph holds (for R5 being (Chain of R1) holds (for R9 being (FinSequence of (the carrier of R1)) holds (for R12 being set holds ((R12 in (the carrier' of R1) & R9 is_vertex_seq_of R5 & ( R9 . ( len R9 ) ) = ( (the Target of R1) . R12 )) implies (( R5 ^ <* R12 *> ) is (Chain of R1) & (ex B22 being (FinSequence of (the carrier of R1)) st (B22 = ( R9 ^' <* ( (the Target of R1) . R12 ) , ( (the Source of R1) . R12 ) *> ) & B22 is_vertex_seq_of ( R5 ^ <* R12 *> ) & ( B22 . 1 ) = ( R9 . 1 ) & ( B22 . ( len B22 ) ) = ( (the Source of R1) . R12 )))))))))
proof
let R1 being Graph;
let R5 being (Chain of R1);
let R9 being (FinSequence of (the carrier of R1));
let R12 being set;
assume that
L229: R12 in (the carrier' of R1)
and
L230: R9 is_vertex_seq_of R5;
reconsider D33 = <* R12 *> as (Chain of R1) by L229 , MSSCYC_1:5;
reconsider D34 = ( (the Source of R1) . R12 ) , D35 = ( (the Target of R1) . R12 ) as (Vertex of R1) by L229 , FUNCT_2:5;
assume L231: ( R9 . ( len R9 ) ) = ( (the Target of R1) . R12 );
reconsider D36 = <* D35 , D34 *> as (FinSequence of (the carrier of R1));
L232: (D36 is_vertex_seq_of D33 & ( D36 . 1 ) = D35) by L204 , FINSEQ_1:44;
thus L233: ( R5 ^ <* R12 *> ) is (Chain of R1) by L232 , L230 , L231 , GRAPH_2:43;
reconsider D37 = ( R5 ^ D33 ) as (Chain of R1) by L230 , L231 , L232 , GRAPH_2:43;
take D38 = ( R9 ^' D36 );
thus L234: D38 = ( R9 ^' <* ( (the Target of R1) . R12 ) , ( (the Source of R1) . R12 ) *> );
L235: D38 is_vertex_seq_of D37 by L230 , L231 , L232 , GRAPH_2:44;
thus L236: D38 is_vertex_seq_of ( R5 ^ <* R12 *> ) by L235;
L237: ( len R9 ) = ( ( len R5 ) + 1 ) by L230 , GRAPH_2:def 6;
L238: 1 <= ( len R9 ) by L237 , NAT_1:11;
thus L239: ( D38 . 1 ) = ( R9 . 1 ) by L238 , GRAPH_2:14;
L240: ( len D36 ) = 2 by FINSEQ_1:44;
L241: ( D36 . ( len D36 ) ) = D34 by L240 , FINSEQ_1:44;
thus L242: thesis by L241 , L240 , GRAPH_2:16;
end;
L243: (for B23 being Graph holds (for B24 being (Chain of B23) holds (for B25 being (FinSequence of (the carrier of B23)) holds (B25 is_vertex_seq_of B24 implies (for B26 being Nat holds ((1 <= B26 & B26 <= ( len B24 )) implies (1 <= B26 & B26 <= ( len B25 ) & 1 <= ( B26 + 1 ) & ( B26 + 1 ) <= ( len B25 ) & ((( B25 . B26 ) = ( (the Target of B23) . ( B24 . B26 ) ) & ( B25 . ( B26 + 1 ) ) = ( (the Source of B23) . ( B24 . B26 ) )) or (( B25 . B26 ) = ( (the Source of B23) . ( B24 . B26 ) ) & ( B25 . ( B26 + 1 ) ) = ( (the Target of B23) . ( B24 . B26 ) ))))))))))
proof
let C38 being Graph;
let C39 being (Chain of C38);
let C40 being (FinSequence of (the carrier of C38));
assume L244: C40 is_vertex_seq_of C39;
L245: ( len C40 ) = ( ( len C39 ) + 1 ) by L244 , GRAPH_2:def 6;
let C41 being Nat;
assume that
L246: 1 <= C41
and
L247: C41 <= ( len C39 );
thus L248: 1 <= C41 by L246;
L249: ( len C39 ) <= ( ( len C39 ) + 1 ) by NAT_1:11;
thus L250: C41 <= ( len C40 ) by L249 , L247 , L245 , XXREAL_0:2;
thus L251: 1 <= ( C41 + 1 ) by NAT_1:11;
thus L252: ( C41 + 1 ) <= ( len C40 ) by L247 , L245 , XREAL_1:6;
reconsider D39 = C41 as (Element of ( NAT )) by ORDINAL1:def 12;
L253: ( C40 . D39 ) = ( C40 /. D39 ) by L246 , L250 , FINSEQ_4:15;
L254: ( C40 . ( D39 + 1 ) ) = ( C40 /. ( D39 + 1 ) ) by L252 , FINSEQ_4:15 , NAT_1:11;
L255: ( C39 . D39 ) joins ( C40 /. D39 ) , ( C40 /. ( D39 + 1 ) ) by L244 , L246 , L247 , GRAPH_2:def 6;
thus L256: thesis by L255 , L253 , L254 , GRAPH_1:def 12;
end;
theorem
L257: (for R1 being Graph holds (for R5 being (Chain of R1) holds (for R9 being (FinSequence of (the carrier of R1)) holds (R9 is_vertex_seq_of R5 implies (for B27 being (Element of ( NAT )) holds (B27 in ( dom R5 ) implies ((( R9 . B27 ) = ( (the Target of R1) . ( R5 . B27 ) ) & ( R9 . ( B27 + 1 ) ) = ( (the Source of R1) . ( R5 . B27 ) )) or (( R9 . B27 ) = ( (the Source of R1) . ( R5 . B27 ) ) & ( R9 . ( B27 + 1 ) ) = ( (the Target of R1) . ( R5 . B27 ) )))))))))
proof
let R1 being Graph;
let R5 being (Chain of R1);
let R9 being (FinSequence of (the carrier of R1));
assume L258: R9 is_vertex_seq_of R5;
let C42 being (Element of ( NAT ));
assume L259: C42 in ( dom R5 );
L260: (1 <= C42 & C42 <= ( len R5 )) by L259 , FINSEQ_3:25;
thus L261: thesis by L260 , L258 , L243;
end;
theorem
L262: (for R1 being Graph holds (for R5 being (Chain of R1) holds (for R9 being (FinSequence of (the carrier of R1)) holds (for R12 being set holds ((R9 is_vertex_seq_of R5 & R12 in ( rng R5 )) implies (( (the Target of R1) . R12 ) in ( rng R9 ) & ( (the Source of R1) . R12 ) in ( rng R9 )))))))
proof
let R1 being Graph;
let R5 being (Chain of R1);
let R9 being (FinSequence of (the carrier of R1));
let R12 being set;
assume that
L263: R9 is_vertex_seq_of R5
and
L264: R12 in ( rng R5 );
L265: R5 is (FinSequence of (the carrier' of R1)) by MSSCYC_1:def 1;
L266: ( rng R5 ) c= (the carrier' of R1) by L265 , FINSEQ_1:def 4;
reconsider D40 = R12 as (Element of (the carrier' of R1)) by L266 , L264;
reconsider D41 = ( (the Target of R1) . R12 ) , D42 = ( (the Source of R1) . R12 ) as (Vertex of R1) by L264 , L266 , FUNCT_2:5;
L267: D40 in ( rng R5 ) by L264;
L268: (D41 in ( R1 -VSet ( rng R5 ) ) & D42 in ( R1 -VSet ( rng R5 ) )) by L267;
thus L269: thesis by L268 , L263 , L264 , GRAPH_2:31 , RELAT_1:38;
end;
definition
let C43 being Graph;
let C44 being set;
redefine func C43 -VSet C44 -> (Subset of (the carrier of C43));

coherence
proof
defpred S1[ set ] means (ex B28 being (Element of (the carrier' of C43)) st (B28 in C44 & ($1 = ( (the Source of C43) . B28 ) or $1 = ( (the Target of C43) . B28 ))));
L270: { B29 where B29 is (Vertex of C43) : S1[ B29 ] } is (Subset of (the carrier of C43)) from DOMAIN_1:sch 7;
thus L271: thesis by L270;
end;
end;
theorem
L273: (for R1 being Graph holds ( R1 -VSet ( {} ) ) = ( {} ))
proof
let R1 being Graph;
assume L274: (not thesis);
consider C45 being set such that L275: C45 in ( R1 -VSet ( {} ) ) by L274 , XBOOLE_0:def 1;
L276: (ex B30 being (Vertex of R1) st (C45 = B30 & (ex B31 being (Element of (the carrier' of R1)) st (B31 in ( {} ) & (B30 = ( (the Source of R1) . B31 ) or B30 = ( (the Target of R1) . B31 )))))) by L275;
thus L277: contradiction by L276;
end;
theorem
L278: (for R1 being Graph holds (for R12 being set holds (for R13 being set holds ((R12 in (the carrier' of R1) & R12 in R13) implies ( R1 -VSet R13 ) is non  empty))))
proof
let R1 being Graph;
let R12 being set;
let R13 being set;
assume that
L279: R12 in (the carrier' of R1)
and
L280: R12 in R13;
reconsider D43 = ( (the Source of R1) . R12 ) as (Vertex of R1) by L279 , FUNCT_2:5;
L281: D43 in ( R1 -VSet R13 ) by L279 , L280;
thus L282: thesis by L281;
end;
theorem
L283: (for R1 being Graph holds (R1 is  connected iff (for R3 being (Vertex of R1) holds (for R4 being (Vertex of R1) holds (R3 <> R4 implies (ex R5 being (Chain of R1) st (ex R9 being (FinSequence of (the carrier of R1)) st (R5 is non  empty & R9 is_vertex_seq_of R5 & ( R9 . 1 ) = R3 & ( R9 . ( len R9 ) ) = R4))))))))
proof
let R1 being Graph;
set D44 = (the carrier' of R1);
set D45 = (the Source of R1);
set D46 = (the Target of R1);
thus L284: (R1 is  connected implies (for B32 , B33 being (Vertex of R1) holds (B32 <> B33 implies (ex B34 being (Chain of R1) st (ex B35 being (FinSequence of (the carrier of R1)) st (B34 is non  empty & B35 is_vertex_seq_of B34 & ( B35 . 1 ) = B32 & ( B35 . ( len B35 ) ) = B33))))))
proof
reconsider D47 = (the carrier of R1) as non  empty set;
assume L285: R1 is  connected;
let C46 , C47 being (Vertex of R1);
set D48 = { B36 where B36 is (Element of D47) : (B36 = C46 or (ex B37 being (Chain of R1) st (ex B38 being (FinSequence of (the carrier of R1)) st (B37 is non  empty & B38 is_vertex_seq_of B37 & ( B38 . 1 ) = C46 & ( B38 . ( len B38 ) ) = B36)))) };
set D49 = ( D47 \ D48 );
L286: C46 in D48;
reconsider D50 = D48 as non  empty set by L286;
assume L287: C46 <> C47;
assume L288: (not thesis);
L289:
now
assume L290: C47 in D50;
L291: (ex B39 being (Vertex of R1) st (B39 = C47 & (B39 = C46 or (ex B40 being (Chain of R1) st (ex B41 being (FinSequence of (the carrier of R1)) st (B40 is non  empty & B41 is_vertex_seq_of B40 & ( B41 . 1 ) = C46 & ( B41 . ( len B41 ) ) = B39)))))) by L290;
thus L292: contradiction by L291 , L287 , L288;
end;
reconsider D51 = D49 as non  empty set by L289 , XBOOLE_0:def 5;
defpred S2[ set ] means ($1 = C46 or (ex B42 being (Chain of R1) st (ex B43 being (FinSequence of (the carrier of R1)) st (B42 is non  empty & B43 is_vertex_seq_of B42 & ( B43 . 1 ) = C46 & ( B43 . ( len B43 ) ) = $1))));
L293: { B44 where B44 is (Element of D47) : S2[ B44 ] } is (Subset of D47) from DOMAIN_1:sch 7;
defpred S3[ set ] means (( (the Source of R1) . $1 ) in D50 & ( (the Target of R1) . $1 ) in D50);
consider C48 being set such that L294: (for B45 being set holds (B45 in C48 iff (B45 in D44 & S3[ B45 ]))) from XBOOLE_0:sch 1;
L295: ( dom D45 ) = D44 by FUNCT_2:def 1;
set D52 = ( D44 \ C48 );
L296: ( dom ( D45 | D52 ) ) = ( ( dom D45 ) /\ D52 ) by RELAT_1:61
.= D52 by L295 , XBOOLE_1:28;
L297: ( rng D45 ) c= D47 by RELAT_1:def 19;
L298: ( rng ( D45 | D52 ) ) c= D51
proof
let C49 being set;
assume L299: C49 in ( rng ( D45 | D52 ) );
consider C50 being set such that L300: C50 in ( dom ( D45 | D52 ) ) and L301: ( ( D45 | D52 ) . C50 ) = C49 by L299 , FUNCT_1:def 3;
reconsider D53 = C50 as (Element of (the carrier' of R1)) by L296 , L300;
L302: ( ( D45 | D52 ) . D53 ) = ( D45 . D53 ) by L300 , FUNCT_1:47;
L303: (not D53 in C48) by L296 , L300 , XBOOLE_0:def 5;
per cases  by L294 , L303;
suppose L304: (not D53 in D44);

thus L305: thesis by L304 , L296 , L300;
end;
suppose L306: (not ( (the Source of R1) . D53 ) in D50);

L307: ( D45 . D53 ) in D47 by L296 , L300 , FUNCT_2:5;
thus L308: thesis by L307 , L301 , L302 , L306 , XBOOLE_0:def 5;
end;
suppose L309: (not ( (the Target of R1) . D53 ) in D50);

reconsider D54 = ( D46 . D53 ) as (Vertex of R1) by L296 , L300 , FUNCT_2:5;
L310: (C49 in ( rng ( D45 | D52 ) ) & ( rng ( D45 | D52 ) ) c= ( rng D45 )) by L300 , L301 , FUNCT_1:def 3 , RELAT_1:70;
L311: C49 in ( rng D45 ) by L310;
assume L312: (not C49 in D51);
L313: C49 in D50 by L312 , L297 , L311 , XBOOLE_0:def 5;
consider C51 being (Vertex of R1) such that L314: C51 = C49 and L315: (C51 = C46 or (ex B46 being (Chain of R1) st (ex B47 being (FinSequence of (the carrier of R1)) st (B46 is non  empty & B47 is_vertex_seq_of B46 & ( B47 . 1 ) = C46 & ( B47 . ( len B47 ) ) = C51)))) by L313;
thus L316: contradiction
proof
per cases  by L315;
suppose L317: C51 = C46;

reconsider D55 = <* D53 *> as (Chain of R1) by L296 , L300 , MSSCYC_1:5;
reconsider D56 = <* C46 , D54 *> as (FinSequence of (the carrier of R1));
L318: ( len D56 ) = 2 by FINSEQ_1:44;
L319: (( D56 . 1 ) = C46 & ( D56 . ( len D56 ) ) = D54) by L318 , FINSEQ_1:44;
L320: D56 is_vertex_seq_of D55 by L301 , L302 , L314 , L317 , MSSCYC_1:4;
thus L321: contradiction by L320 , L309 , L319;
end;
suppose L322: (ex B48 being (Chain of R1) st (ex B49 being (FinSequence of (the carrier of R1)) st (B48 is non  empty & B49 is_vertex_seq_of B48 & ( B49 . 1 ) = C46 & ( B49 . ( len B49 ) ) = C51)));

consider C52 being (Chain of R1), C53 being (FinSequence of (the carrier of R1)) such that L323: C52 is non  empty and L324: C53 is_vertex_seq_of C52 and L325: ( C53 . 1 ) = C46 and L326: ( C53 . ( len C53 ) ) = C51 by L322;
reconsider D57 = ( C52 ^ <* D53 *> ) as (Chain of R1) by L296 , L300 , L301 , L302 , L314 , L324 , L326 , L213;
L327: (ex B50 being (FinSequence of (the carrier of R1)) st (B50 = ( C53 ^' <* ( D45 . D53 ) , ( D46 . D53 ) *> ) & B50 is_vertex_seq_of D57 & ( B50 . 1 ) = ( C53 . 1 ) & ( B50 . ( len B50 ) ) = D54)) by L296 , L300 , L301 , L302 , L314 , L324 , L326 , L213;
thus L328: contradiction by L327 , L309 , L325;
end;
end;

end;
end;
reconsider D58 = ( D45 | D52 ) as (Function of D52 , D51) by L298 , L296 , FUNCT_2:def 1 , RELSET_1:4;
L318: ( dom D46 ) = D44 by FUNCT_2:def 1;
L319: ( dom ( D46 | D52 ) ) = ( ( dom D46 ) /\ D52 ) by RELAT_1:61
.= D52 by L318 , XBOOLE_1:28;
L320: ( rng D46 ) c= D47 by RELAT_1:def 19;
L321: ( rng ( D46 | D52 ) ) c= D51
proof
let C54 being set;
assume L322: C54 in ( rng ( D46 | D52 ) );
consider C55 being set such that L323: C55 in ( dom ( D46 | D52 ) ) and L324: ( ( D46 | D52 ) . C55 ) = C54 by L322 , FUNCT_1:def 3;
reconsider D59 = C55 as (Element of (the carrier' of R1)) by L319 , L323;
L325: ( ( D46 | D52 ) . D59 ) = ( D46 . D59 ) by L323 , FUNCT_1:47;
L326: (not D59 in C48) by L319 , L323 , XBOOLE_0:def 5;
per cases  by L294 , L326;
suppose L327: (not D59 in D44);

thus L328: thesis by L327 , L319 , L323;
end;
suppose L329: (not ( (the Target of R1) . D59 ) in D50);

L330: ( D46 . D59 ) in D47 by L319 , L323 , FUNCT_2:5;
thus L331: thesis by L330 , L324 , L325 , L329 , XBOOLE_0:def 5;
end;
suppose L332: (not ( (the Source of R1) . D59 ) in D50);

reconsider D60 = ( D45 . D59 ) as (Vertex of R1) by L319 , L323 , FUNCT_2:5;
L333: (C54 in ( rng ( D46 | D52 ) ) & ( rng ( D46 | D52 ) ) c= ( rng D46 )) by L323 , L324 , FUNCT_1:def 3 , RELAT_1:70;
L334: C54 in ( rng D46 ) by L333;
assume L335: (not C54 in D51);
L336: C54 in D50 by L335 , L320 , L334 , XBOOLE_0:def 5;
consider C56 being (Vertex of R1) such that L337: C56 = C54 and L338: (C56 = C46 or (ex B51 being (Chain of R1) st (ex B52 being (FinSequence of (the carrier of R1)) st (B51 is non  empty & B52 is_vertex_seq_of B51 & ( B52 . 1 ) = C46 & ( B52 . ( len B52 ) ) = C56)))) by L336;
thus L339: contradiction
proof
per cases  by L338;
suppose L340: C56 = C46;

reconsider D61 = <* D59 *> as (Chain of R1) by L319 , L323 , MSSCYC_1:5;
reconsider D62 = <* C46 , D60 *> as (FinSequence of (the carrier of R1));
L341: ( len D62 ) = 2 by FINSEQ_1:44;
L342: (( D62 . 1 ) = C46 & ( D62 . ( len D62 ) ) = D60) by L341 , FINSEQ_1:44;
L343: D62 is_vertex_seq_of D61 by L324 , L325 , L337 , L340 , L204;
thus L344: contradiction by L343 , L332 , L342;
end;
suppose L345: (ex B53 being (Chain of R1) st (ex B54 being (FinSequence of (the carrier of R1)) st (B53 is non  empty & B54 is_vertex_seq_of B53 & ( B54 . 1 ) = C46 & ( B54 . ( len B54 ) ) = C56)));

consider C57 being (Chain of R1), C58 being (FinSequence of (the carrier of R1)) such that L346: C57 is non  empty and L347: C58 is_vertex_seq_of C57 and L348: ( C58 . 1 ) = C46 and L349: ( C58 . ( len C58 ) ) = C56 by L345;
reconsider D63 = ( C57 ^ <* D59 *> ) as (Chain of R1) by L319 , L323 , L324 , L325 , L337 , L347 , L349 , L228;
L350: (ex B55 being (FinSequence of (the carrier of R1)) st (B55 = ( C58 ^' <* ( D46 . D59 ) , ( D45 . D59 ) *> ) & B55 is_vertex_seq_of D63 & ( B55 . 1 ) = ( C58 . 1 ) & ( B55 . ( len B55 ) ) = D60)) by L319 , L323 , L324 , L325 , L337 , L347 , L349 , L228;
thus L351: contradiction by L350 , L332 , L348;
end;
end;

end;
end;
reconsider D64 = ( D46 | D52 ) as (Function of D52 , D51) by L321 , L319 , FUNCT_2:def 1 , RELSET_1:4;
L341: C48 c= D44
proof
let C59 being set;
assume L342: C59 in C48;
thus L343: thesis by L342 , L294;
end;
L344: ( dom ( D46 | C48 ) ) = ( ( dom D46 ) /\ C48 ) by RELAT_1:61
.= ( D44 /\ C48 ) by FUNCT_2:def 1
.= C48 by L341 , XBOOLE_1:28;
L345: ( rng ( D46 | C48 ) ) c= D50
proof
let C60 being set;
assume L346: C60 in ( rng ( D46 | C48 ) );
consider C61 being set such that L347: C61 in ( dom ( D46 | C48 ) ) and L348: ( ( D46 | C48 ) . C61 ) = C60 by L346 , FUNCT_1:def 3;
L349: ( ( D46 | C48 ) . C61 ) = ( D46 . C61 ) by L347 , FUNCT_1:47;
thus L350: thesis by L349 , L294 , L344 , L347 , L348;
end;
reconsider D65 = ( D46 | C48 ) as (Function of C48 , D50) by L345 , L344 , FUNCT_2:def 1 , RELSET_1:4;
L351: ( dom ( D45 | C48 ) ) = ( ( dom D45 ) /\ C48 ) by RELAT_1:61
.= ( D44 /\ C48 ) by FUNCT_2:def 1
.= C48 by L341 , XBOOLE_1:28;
L352: ( rng ( D45 | C48 ) ) c= D50
proof
let C62 being set;
assume L353: C62 in ( rng ( D45 | C48 ) );
consider C63 being set such that L354: C63 in ( dom ( D45 | C48 ) ) and L355: ( ( D45 | C48 ) . C63 ) = C62 by L353 , FUNCT_1:def 3;
L356: ( ( D45 | C48 ) . C63 ) = ( D45 . C63 ) by L354 , FUNCT_1:47;
thus L357: thesis by L356 , L294 , L351 , L354 , L355;
end;
reconsider D66 = ( D45 | C48 ) as (Function of C48 , D50) by L352 , L351 , FUNCT_2:def 1 , RELSET_1:4;
reconsider D67 = MultiGraphStruct (# D50 , C48 , D66 , D65 #) , D68 = MultiGraphStruct (# D51 , D52 , D58 , D64 #) as Graph;
L358: R1 is_sum_of D67 , D68
proof
reconsider D69 = ( the MultiGraphStruct of R1 ) as  strict Graph;
thus L359: (the Target of D67) tolerates (the Target of D68)
proof
let C64 being set;
assume L360: C64 in ( ( dom (the Target of D67) ) /\ ( dom (the Target of D68) ) );
L361: C64 in ( dom (the Target of D68) ) by L360 , XBOOLE_0:def 4;
L362: C64 in D52 by L361 , FUNCT_2:def 1;
L363: C64 in ( dom (the Target of D67) ) by L360 , XBOOLE_0:def 4;
L364: C64 in C48 by L363 , FUNCT_2:def 1;
thus L365: thesis by L364 , L362 , XBOOLE_0:def 5;
end;

thus L366: (the Source of D67) tolerates (the Source of D68)
proof
let C65 being set;
assume L367: C65 in ( ( dom (the Source of D67) ) /\ ( dom (the Source of D68) ) );
L368: C65 in ( dom (the Source of D68) ) by L367 , XBOOLE_0:def 4;
L369: C65 in D52 by L368 , FUNCT_2:def 1;
L370: C65 in ( dom (the Source of D67) ) by L367 , XBOOLE_0:def 4;
L371: C65 in C48 by L370 , FUNCT_2:def 1;
thus L372: thesis by L371 , L369 , XBOOLE_0:def 5;
end;

L373: ((for B56 being set holds (B56 in (the carrier' of D67) implies (( (the Source of D69) . B56 ) = ( (the Source of D67) . B56 ) & ( (the Target of D69) . B56 ) = ( (the Target of D67) . B56 )))) & (for B57 being set holds (B57 in (the carrier' of D68) implies (( (the Source of D69) . B57 ) = ( (the Source of D68) . B57 ) & ( (the Target of D69) . B57 ) = ( (the Target of D68) . B57 ))))) by FUNCT_1:49;
L374: ((the carrier of D69) = ( (the carrier of D67) \/ (the carrier of D68) ) & (the carrier' of D69) = ( (the carrier' of D67) \/ (the carrier' of D68) )) by L293 , L341 , XBOOLE_1:45;
thus L375: thesis by L374 , L359 , L366 , L373 , GRAPH_1:def 5;
end;
L376: D50 misses D51 by XBOOLE_1:79;
thus L377: contradiction by L376 , L285 , L358 , GRAPH_1:def 10;
end;

assume L378: (for B58 , B59 being (Vertex of R1) holds (B58 <> B59 implies (ex B60 being (Chain of R1) st (ex B61 being (FinSequence of (the carrier of R1)) st (B60 is non  empty & B61 is_vertex_seq_of B60 & ( B61 . 1 ) = B58 & ( B61 . ( len B61 ) ) = B59)))));
thus L379: R1 is  connected
proof
given C66 , C67 being Graph such that
L380: (the carrier of C66) misses (the carrier of C67)
and
L381: R1 is_sum_of C66 , C67;

set D70 = the (Vertex of C67);
set D71 = the (Vertex of C66);
set D72 = (the carrier of C67);
set D73 = (the carrier of C66);
set D74 = (the Target of C67);
set D75 = (the Target of C66);
set D76 = (the Source of C67);
set D77 = (the Source of C66);
set D78 = (the carrier' of C66);
L382: ( the MultiGraphStruct of R1 ) = ( C66 \/ C67 ) by L381 , GRAPH_1:def 6;
L383: (D75 tolerates D74 & D77 tolerates D76) by L381 , GRAPH_1:def 6;
L384: D44 = ( D78 \/ (the carrier' of C67) ) by L383 , L382 , GRAPH_1:def 5;
L385: (the carrier of ( the MultiGraphStruct of R1 )) = ( D73 \/ D72 ) by L383 , L382 , GRAPH_1:def 5;
reconsider D79 = D71 , D80 = D70 as (Vertex of R1) by L385 , XBOOLE_0:def 3;
L386: ( (the carrier of C66) /\ (the carrier of C67) ) = ( {} ) by L380 , XBOOLE_0:def 7;
L387: D71 <> D70 by L386 , XBOOLE_0:def 4;
consider C68 being (Chain of R1), C69 being (FinSequence of (the carrier of R1)) such that L388: C68 is non  empty and L389: C69 is_vertex_seq_of C68 and L390: ( C69 . 1 ) = D79 and L391: ( C69 . ( len C69 ) ) = D80 by L387 , L378;
defpred S4[ Nat ] means ($1 in ( dom C69 ) & ( C69 . $1 ) is (Vertex of C67));
L392: ( len C69 ) = ( ( len C68 ) + 1 ) by L389 , GRAPH_2:def 6;
L393: C68 is (FinSequence of D44) by MSSCYC_1:def 1;
L394: ( rng C68 ) c= D44 by L393 , FINSEQ_1:def 4;
L395: 1 <= ( ( len C68 ) + 1 ) by NAT_1:11;
L396: ( len C69 ) in ( dom C69 ) by L395 , L392 , FINSEQ_3:25;
L397: (ex B62 being Nat st S4[ B62 ]) by L396 , L391;
consider C70 being Nat such that L398: S4[ C70 ] and L399: (for B63 being Nat holds (S4[ B63 ] implies C70 <= B63)) from NAT_1:sch 5(L397);
L400: 1 <= C70 by L398 , FINSEQ_3:25;
L401: C70 <> 1 by L386 , L390 , L398 , XBOOLE_0:def 4;
L402: 1 < C70 by L401 , L400 , XXREAL_0:1;
L403: ( 1 + 1 ) <= C70 by L402 , NAT_1:13;
consider C71 being (Element of ( NAT )) such that L404: 1 <= C71 and L405: C71 < C70 and L406: C70 = ( C71 + 1 ) by L403 , GRAPH_2:1;
set D81 = ( C68 . C71 );
L407: C70 <= ( len C69 ) by L398 , FINSEQ_3:25;
L408: C71 <= ( len C68 ) by L407 , L392 , L406 , XREAL_1:6;
L409: C71 in ( dom C68 ) by L408 , L404 , FINSEQ_3:25;
L410: D81 in ( rng C68 ) by L409 , FUNCT_1:def 3;
L411: C71 <= ( len C69 ) by L405 , L407 , XXREAL_0:2;
L412: C71 in ( dom C69 ) by L411 , L404 , FINSEQ_3:25;
per cases  by L384 , L394 , L410 , XBOOLE_0:def 3;
suppose L413: D81 in D78;

L414: ( D75 . D81 ) in D73 by L413 , FUNCT_2:5;
L415: ( D77 . D81 ) in D73 by L413 , FUNCT_2:5;
thus L416: contradiction
proof
per cases  by L389 , L404 , L408 , L243;
suppose L417: (( C69 . C71 ) = ( D46 . D81 ) & ( C69 . ( C71 + 1 ) ) = ( D45 . D81 ));

L418: ( C69 . C70 ) in D73 by L417 , L383 , L382 , L406 , L413 , L415 , GRAPH_1:def 5;
thus L419: contradiction by L418 , L386 , L398 , XBOOLE_0:def 4;
end;
suppose L420: (( C69 . C71 ) = ( D45 . D81 ) & ( C69 . ( C71 + 1 ) ) = ( D46 . D81 ));

L421: ( C69 . C70 ) in D73 by L420 , L383 , L382 , L406 , L413 , L414 , GRAPH_1:def 5;
thus L422: contradiction by L421 , L386 , L398 , XBOOLE_0:def 4;
end;
end;

end;
suppose L417: D81 in (the carrier' of C67);

L418: ( D74 . D81 ) in D72 by L417 , FUNCT_2:5;
L419: ( D76 . D81 ) in D72 by L417 , FUNCT_2:5;
thus L420: contradiction
proof
per cases  by L389 , L404 , L408 , L243;
suppose L421: (( C69 . C71 ) = ( D46 . D81 ) & ( C69 . ( C71 + 1 ) ) = ( D45 . D81 ));

L422: ( C69 . C71 ) in D72 by L421 , L383 , L382 , L417 , L418 , GRAPH_1:def 5;
thus L423: contradiction by L422 , L399 , L405 , L412;
end;
suppose L424: (( C69 . C71 ) = ( D45 . D81 ) & ( C69 . ( C71 + 1 ) ) = ( D46 . D81 ));

L425: ( C69 . C71 ) in D72 by L424 , L383 , L382 , L417 , L419 , GRAPH_1:def 5;
thus L426: contradiction by L425 , L399 , L405 , L412;
end;
end;

end;
end;

end;
theorem
L380: (for B64 being  connected Graph holds (for B65 being set holds (for B66 being (Vertex of B64) holds ((B65 meets (the carrier' of B64) & (not B66 in ( B64 -VSet B65 ))) implies (ex B67 being (Vertex of B64) st (ex B68 being (Element of (the carrier' of B64)) st (B67 in ( B64 -VSet B65 ) & (not B68 in B65) & (B67 = ( (the Target of B64) . B68 ) or B67 = ( (the Source of B64) . B68 )))))))))
proof
let C72 being  connected Graph;
let C73 being set;
let C74 being (Vertex of C72);
assume that
L381: C73 meets (the carrier' of C72)
and
L382: (not C74 in ( C72 -VSet C73 ));
L383: (ex B69 being set st (B69 in C73 & B69 in (the carrier' of C72))) by L381 , XBOOLE_0:3;
L384: ( C72 -VSet C73 ) is non  empty by L383 , L278;
consider C75 being set such that L385: C75 in ( C72 -VSet C73 ) by L384 , XBOOLE_0:def 1;
reconsider D82 = C75 as (Vertex of C72) by L385;
consider C76 being (Chain of C72), C77 being (FinSequence of (the carrier of C72)) such that L386: C76 is non  empty and L387: C77 is_vertex_seq_of C76 and L388: ( C77 . 1 ) = D82 and L389: ( C77 . ( len C77 ) ) = C74 by L382 , L385 , L283;
defpred S5[ Nat ] means (1 <= $1 & $1 <= ( len C76 ) & (not ( C77 . ( $1 + 1 ) ) in ( C72 -VSet C73 )));
L390: ( len C77 ) = ( ( len C76 ) + 1 ) by L387 , GRAPH_2:def 6;
L391: ( 1 + ( 0 ) ) <= ( len C76 ) by L386 , NAT_1:13;
L392: (ex B70 being Nat st S5[ B70 ]) by L391 , L382 , L389 , L390;
consider C78 being Nat such that L393: S5[ C78 ] and L394: (for B71 being Nat holds (S5[ B71 ] implies C78 <= B71)) from NAT_1:sch 5(L392);
L395: ( len C76 ) <= ( ( len C76 ) + 1 ) by NAT_1:11;
L396: C78 <= ( len C77 ) by L395 , L390 , L393 , XXREAL_0:2;
L397: C78 in ( dom C77 ) by L396 , L393 , FINSEQ_3:25;
reconsider D83 = ( C77 . C78 ) as (Vertex of C72) by L397 , FINSEQ_2:11;
reconsider D84 = C76 as (FinSequence of (the carrier' of C72)) by MSSCYC_1:def 1;
L398: ( rng D84 ) c= (the carrier' of C72) by FINSEQ_1:def 4;
L399: C78 in ( dom D84 ) by L393 , FINSEQ_3:25;
L400: ( D84 . C78 ) in ( rng D84 ) by L399 , FUNCT_1:def 3;
reconsider D85 = ( D84 . C78 ) as (Element of (the carrier' of C72)) by L400 , L398;
take D83;
take D85;
thus L401:now
per cases  by L393 , XXREAL_0:1;
suppose L402: C78 = 1;

thus L403: D83 in ( C72 -VSet C73 ) by L402 , L385 , L388;
end;
suppose L404: 1 < C78;

assume L405: (not D83 in ( C72 -VSet C73 ));
consider C79 being (Element of ( NAT )) such that L406: C78 = ( 1 + C79 ) and L407: 1 <= C79 by L404 , FINSEQ_4:84;
L408: C79 <= C78 by L406 , NAT_1:11;
L409: C79 <= ( len D84 ) by L408 , L393 , XXREAL_0:2;
L410: C78 <= C79 by L409 , L394 , L406 , L407 , L405;
thus L411: contradiction by L410 , L406 , NAT_1:13;
end;
end;
thus L413:now
L414: (1 <= ( C78 + 1 ) & ( C78 + 1 ) <= ( len C77 )) by L390 , L393 , NAT_1:11 , XREAL_1:6;
L415: ( C78 + 1 ) in ( dom C77 ) by L414 , FINSEQ_3:25;
reconsider D86 = ( C77 . ( C78 + 1 ) ) as (Vertex of C72) by L415 , FINSEQ_2:11;
assume L416: D85 in C73;
L417: (D86 = ( (the Target of C72) . D85 ) or D86 = ( (the Source of C72) . D85 )) by L387 , L393 , L243;
thus L418: contradiction by L417 , L393 , L416;
end;
thus L419: thesis by L387 , L393 , L243;
end;
begin
definition
let C80 being Graph;
let C81 being (Vertex of C80);
let C82 being set;
func Edges_In (C81 , C82) -> (Subset of (the carrier' of C80)) means 
:L420: (for B72 being set holds (B72 in it iff (B72 in (the carrier' of C80) & B72 in C82 & ( (the Target of C80) . B72 ) = C81)));
existence
proof
defpred S6[ set ] means ($1 in C82 & ( (the Target of C80) . $1 ) = C81);
consider C83 being set such that L421: (for B73 being set holds (B73 in C83 iff (B73 in (the carrier' of C80) & S6[ B73 ]))) from XBOOLE_0:sch 1;
take C83;
L422: (for B74 being set holds (B74 in C83 implies B74 in (the carrier' of C80))) by L421;
thus L423: C83 is (Subset of (the carrier' of C80)) by L422 , TARSKI:def 3;
thus L424: thesis by L421;
end;
uniqueness
proof
let C84 , C85 being (Subset of (the carrier' of C80));
assume that
L425: (for B75 being set holds (B75 in C84 iff (B75 in (the carrier' of C80) & B75 in C82 & ( (the Target of C80) . B75 ) = C81)))
and
L426: (for B76 being set holds (B76 in C85 iff (B76 in (the carrier' of C80) & B76 in C82 & ( (the Target of C80) . B76 ) = C81)));
L427:
now
let C86 being set;
L428: (C86 in C84 iff (C86 in (the carrier' of C80) & C86 in C82 & ( (the Target of C80) . C86 ) = C81)) by L425;
thus L429: (C86 in C84 iff C86 in C85) by L428 , L426;
end;
thus L430: thesis by L427 , TARSKI:1;
end;
func Edges_Out (C81 , C82) -> (Subset of (the carrier' of C80)) means 
:L431: (for B77 being set holds (B77 in it iff (B77 in (the carrier' of C80) & B77 in C82 & ( (the Source of C80) . B77 ) = C81)));
existence
proof
defpred S7[ set ] means ($1 in C82 & ( (the Source of C80) . $1 ) = C81);
consider C87 being set such that L432: (for B78 being set holds (B78 in C87 iff (B78 in (the carrier' of C80) & S7[ B78 ]))) from XBOOLE_0:sch 1;
take C87;
L433: (for B79 being set holds (B79 in C87 implies B79 in (the carrier' of C80))) by L432;
thus L434: C87 is (Subset of (the carrier' of C80)) by L433 , TARSKI:def 3;
thus L435: thesis by L432;
end;
uniqueness
proof
let C88 , C89 being (Subset of (the carrier' of C80));
assume that
L436: (for B80 being set holds (B80 in C88 iff (B80 in (the carrier' of C80) & B80 in C82 & ( (the Source of C80) . B80 ) = C81)))
and
L437: (for B81 being set holds (B81 in C89 iff (B81 in (the carrier' of C80) & B81 in C82 & ( (the Source of C80) . B81 ) = C81)));
L438:
now
let C90 being set;
L439: (C90 in C88 iff (C90 in (the carrier' of C80) & C90 in C82 & ( (the Source of C80) . C90 ) = C81)) by L436;
thus L440: (C90 in C88 iff C90 in C89) by L439 , L437;
end;
thus L441: thesis by L438 , TARSKI:1;
end;
end;
definition
let C91 being Graph;
let C92 being (Vertex of C91);
let C93 being set;
func Edges_At (C92 , C93) -> (Subset of (the carrier' of C91)) equals 
( ( Edges_In (C92 , C93) ) \/ ( Edges_Out (C92 , C93) ) );
correctness;
end;
registration
let C94 being  finite Graph;
let C95 being (Vertex of C94);
let C96 being set;
cluster ( Edges_In (C95 , C96) ) ->  finite;
correctness
proof
L444: (the carrier' of C94) is  finite by GRAPH_1:def 11;
thus L445: thesis by L444;
end;
cluster ( Edges_Out (C95 , C96) ) ->  finite;
correctness
proof
L446: (the carrier' of C94) is  finite by GRAPH_1:def 11;
thus L447: thesis by L446;
end;
cluster ( Edges_At (C95 , C96) ) ->  finite;
correctness;
end;
registration
let C97 being Graph;
let C98 being (Vertex of C97);
let C99 being  empty set;
cluster ( Edges_In (C98 , C99) ) ->  empty;
correctness
proof
assume L449: ( Edges_In (C98 , C99) ) is non  empty;
L450: (ex B82 being set st B82 in ( Edges_In (C98 , C99) )) by L449 , XBOOLE_0:def 1;
thus L451: contradiction by L450 , L420;
end;
cluster ( Edges_Out (C98 , C99) ) ->  empty;
correctness
proof
assume L452: ( Edges_Out (C98 , C99) ) is non  empty;
L453: (ex B83 being set st B83 in ( Edges_Out (C98 , C99) )) by L452 , XBOOLE_0:def 1;
thus L454: contradiction by L453 , L431;
end;
cluster ( Edges_At (C98 , C99) ) ->  empty;
correctness;
end;
definition
let C100 being Graph;
let C101 being (Vertex of C100);
func Edges_In C101 -> (Subset of (the carrier' of C100)) equals 
( Edges_In (C101 , (the carrier' of C100)) );
correctness;
func Edges_Out C101 -> (Subset of (the carrier' of C100)) equals 
( Edges_Out (C101 , (the carrier' of C100)) );
correctness;
end;
theorem
L457: (for R1 being Graph holds (for R2 being (Vertex of R1) holds (for R13 being set holds ( Edges_In (R2 , R13) ) c= ( Edges_In R2 ))))
proof
let R1 being Graph;
let R2 being (Vertex of R1);
let R13 being set;
let C102 being set;
assume L458: C102 in ( Edges_In (R2 , R13) );
L459: ( (the Target of R1) . C102 ) = R2 by L458 , L420;
thus L460: thesis by L459 , L458 , L420;
end;
theorem
L461: (for R1 being Graph holds (for R2 being (Vertex of R1) holds (for R13 being set holds ( Edges_Out (R2 , R13) ) c= ( Edges_Out R2 ))))
proof
let R1 being Graph;
let R2 being (Vertex of R1);
let R13 being set;
let C103 being set;
assume L462: C103 in ( Edges_Out (R2 , R13) );
L463: ( (the Source of R1) . C103 ) = R2 by L462 , L431;
thus L464: thesis by L463 , L462 , L431;
end;
registration
let C104 being  finite Graph;
let C105 being (Vertex of C104);
cluster ( Edges_In C105 ) ->  finite;
correctness;
cluster ( Edges_Out C105 ) ->  finite;
correctness;
end;
theorem
L466: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds ( card ( Edges_In R17 ) ) = ( EdgesIn R17 )))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
consider C106 being  finite set such that L467: (for B84 being set holds (B84 in C106 iff (B84 in (the carrier' of R16) & ( (the Target of R16) . B84 ) = R17))) and L468: ( EdgesIn R17 ) = ( card C106 ) by GRAPH_1:def 21;
L469:
now
let C107 being set;
L470: (C107 in ( Edges_In (R17 , (the carrier' of R16)) ) iff (C107 in (the carrier' of R16) & ( (the Target of R16) . C107 ) = R17)) by L420;
thus L471: (C107 in ( Edges_In R17 ) iff C107 in C106) by L470 , L467;
end;
thus L472: thesis by L469 , L468 , TARSKI:1;
end;
theorem
L473: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds ( card ( Edges_Out R17 ) ) = ( EdgesOut R17 )))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
consider C108 being  finite set such that L474: (for B85 being set holds (B85 in C108 iff (B85 in (the carrier' of R16) & ( (the Source of R16) . B85 ) = R17))) and L475: ( EdgesOut R17 ) = ( card C108 ) by GRAPH_1:def 22;
L476:
now
let C109 being set;
L477: (C109 in ( Edges_Out (R17 , (the carrier' of R16)) ) iff (C109 in (the carrier' of R16) & ( (the Source of R16) . C109 ) = R17)) by L431;
thus L478: (C109 in ( Edges_Out R17 ) iff C109 in C108) by L477 , L474;
end;
thus L479: thesis by L476 , L475 , TARSKI:1;
end;
definition
let C110 being  finite Graph;
let C111 being (Vertex of C110);
let C112 being set;
func Degree (C111 , C112) -> (Element of ( NAT )) equals 
( ( card ( Edges_In (C111 , C112) ) ) + ( card ( Edges_Out (C111 , C112) ) ) );
correctness;
end;
theorem
L481: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds ( Degree R17 ) = ( Degree (R17 , (the carrier' of R16)) )))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
thus L482: ( Degree R17 ) = ( ( card ( Edges_In R17 ) ) + ( EdgesOut R17 ) ) by L466
.= ( ( card ( Edges_In (R17 , (the carrier' of R16)) ) ) + ( card ( Edges_Out R17 ) ) ) by L473
.= ( Degree (R17 , (the carrier' of R16)) );
end;
theorem
L483: (for R13 being set holds (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds (( Degree (R17 , R13) ) <> ( 0 ) implies ( Edges_At (R17 , R13) ) is non  empty))))
proof
let R13 being set;
let R16 being  finite Graph;
let R17 being (Vertex of R16);
assume L484: ( Degree (R17 , R13) ) <> ( 0 );
assume L485: (not thesis);
L486: ( Edges_In (R17 , R13) ) = ( {} ) by L485;
thus L487: contradiction by L486 , L484 , L485;
end;
theorem
L488: (for R12 being set holds (for R13 being set holds (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds ((R12 in (the carrier' of R16) & (not R12 in R13) & (R17 = ( (the Target of R16) . R12 ) or R17 = ( (the Source of R16) . R12 ))) implies ( Degree R17 ) <> ( Degree (R17 , R13) ))))))
proof
let R12 being set;
let R13 being set;
let R16 being  finite Graph;
let R17 being (Vertex of R16);
set D87 = (the Target of R16);
set D88 = (the Source of R16);
set D89 = (the carrier' of R16);
assume that
L489: R12 in D89
and
L490: (not R12 in R13)
and
L491: (R17 = ( D87 . R12 ) or R17 = ( D88 . R12 ));
L492: ( Degree R17 ) = ( Degree (R17 , D89) ) by L481;
L493: ( Edges_Out R17 ) = ( Edges_Out (R17 , D89) );
L494: ( Edges_Out (R17 , R13) ) c= ( Edges_Out (R17 , D89) ) by L493 , L461;
L495: ( Edges_In R17 ) = ( Edges_In (R17 , D89) );
L496: ( Edges_In (R17 , R13) ) c= ( Edges_In (R17 , D89) ) by L495 , L457;
per cases  by L491;
suppose L497: R17 = ( D87 . R12 );

L498: (not R12 in ( Edges_In (R17 , R13) )) by L490 , L420;
L499: R12 in ( Edges_In (R17 , D89) ) by L489 , L497 , L420;
L500: ( Edges_In (R17 , R13) ) c< ( Edges_In (R17 , D89) ) by L499 , L496 , L498 , XBOOLE_0:def 8;
L501: ( card ( Edges_In (R17 , R13) ) ) < ( card ( Edges_In (R17 , D89) ) ) by L500 , CARD_2:48;
thus L502: thesis by L501 , L492 , L494 , NAT_1:43 , XREAL_1:8;
end;
suppose L503: R17 = ( D88 . R12 );

L504: (not R12 in ( Edges_Out (R17 , R13) )) by L490 , L431;
L505: R12 in ( Edges_Out (R17 , D89) ) by L489 , L503 , L431;
L506: ( Edges_Out (R17 , R13) ) c< ( Edges_Out (R17 , D89) ) by L505 , L494 , L504 , XBOOLE_0:def 8;
L507: ( card ( Edges_Out (R17 , R13) ) ) < ( card ( Edges_Out (R17 , D89) ) ) by L506 , CARD_2:48;
thus L508: thesis by L507 , L492 , L496 , NAT_1:43 , XREAL_1:8;
end;
end;
theorem
L510: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds (for R20 being set holds (for R21 being set holds (R21 c= R20 implies ( card ( Edges_In (R17 , ( R20 \ R21 )) ) ) = ( ( card ( Edges_In (R17 , R20) ) ) - ( card ( Edges_In (R17 , R21) ) ) ))))))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
let R20 being set;
let R21 being set;
assume L511: R21 c= R20;
L512: R20 = ( R21 \/ ( R20 \ R21 ) ) by L511 , XBOOLE_1:45;
L513:
now
let C113 being set;
thus L514:now
assume L515: C113 in ( Edges_In (R17 , R20) );
L516: C113 in R20 by L515 , L420;
L517: (C113 in R21 or C113 in ( R20 \ R21 )) by L516 , L512 , XBOOLE_0:def 3;
L518: ( (the Target of R16) . C113 ) = R17 by L515 , L420;
L519: (C113 in ( Edges_In (R17 , R21) ) or C113 in ( Edges_In (R17 , ( R20 \ R21 )) )) by L518 , L515 , L517 , L420;
thus L520: C113 in ( ( Edges_In (R17 , R21) ) \/ ( Edges_In (R17 , ( R20 \ R21 )) ) ) by L519 , XBOOLE_0:def 3;
end;
assume L521: C113 in ( ( Edges_In (R17 , R21) ) \/ ( Edges_In (R17 , ( R20 \ R21 )) ) );
L522: (C113 in ( Edges_In (R17 , R21) ) or C113 in ( Edges_In (R17 , ( R20 \ R21 )) )) by L521 , XBOOLE_0:def 3;
L523: (C113 in R21 or C113 in ( R20 \ R21 )) by L522 , L420;
L524: ( (the Target of R16) . C113 ) = R17 by L522 , L420;
thus L525: C113 in ( Edges_In (R17 , R20) ) by L524 , L511 , L521 , L523 , L420;
end;
L526: ( Edges_In (R17 , R20) ) = ( ( Edges_In (R17 , R21) ) \/ ( Edges_In (R17 , ( R20 \ R21 )) ) ) by L513 , TARSKI:1;
L527: ( Edges_In (R17 , R21) ) misses ( Edges_In (R17 , ( R20 \ R21 )) )
proof
assume L528: (not thesis);
consider C114 being set such that L529: C114 in ( ( Edges_In (R17 , R21) ) /\ ( Edges_In (R17 , ( R20 \ R21 )) ) ) by L528 , XBOOLE_0:4;
L530: C114 in ( Edges_In (R17 , ( R20 \ R21 )) ) by L529 , XBOOLE_0:def 4;
L531: C114 in ( R20 \ R21 ) by L530 , L420;
L532: C114 in ( Edges_In (R17 , R21) ) by L529 , XBOOLE_0:def 4;
L533: C114 in R21 by L532 , L420;
thus L534: contradiction by L533 , L531 , XBOOLE_0:def 5;
end;
L535: ( card ( Edges_In (R17 , R20) ) ) = ( ( card ( Edges_In (R17 , R21) ) ) + ( card ( Edges_In (R17 , ( R20 \ R21 )) ) ) ) by L527 , L526 , CARD_2:40;
thus L536: thesis by L535;
end;
theorem
L537: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds (for R20 being set holds (for R21 being set holds (R21 c= R20 implies ( card ( Edges_Out (R17 , ( R20 \ R21 )) ) ) = ( ( card ( Edges_Out (R17 , R20) ) ) - ( card ( Edges_Out (R17 , R21) ) ) ))))))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
let R20 being set;
let R21 being set;
assume L538: R21 c= R20;
L539: R20 = ( R21 \/ ( R20 \ R21 ) ) by L538 , XBOOLE_1:45;
L540:
now
let C115 being set;
thus L541:now
assume L542: C115 in ( Edges_Out (R17 , R20) );
L543: C115 in R20 by L542 , L431;
L544: (C115 in R21 or C115 in ( R20 \ R21 )) by L543 , L539 , XBOOLE_0:def 3;
L545: ( (the Source of R16) . C115 ) = R17 by L542 , L431;
L546: (C115 in ( Edges_Out (R17 , R21) ) or C115 in ( Edges_Out (R17 , ( R20 \ R21 )) )) by L545 , L542 , L544 , L431;
thus L547: C115 in ( ( Edges_Out (R17 , R21) ) \/ ( Edges_Out (R17 , ( R20 \ R21 )) ) ) by L546 , XBOOLE_0:def 3;
end;
assume L548: C115 in ( ( Edges_Out (R17 , R21) ) \/ ( Edges_Out (R17 , ( R20 \ R21 )) ) );
L549: (C115 in ( Edges_Out (R17 , R21) ) or C115 in ( Edges_Out (R17 , ( R20 \ R21 )) )) by L548 , XBOOLE_0:def 3;
L550: (C115 in R21 or C115 in ( R20 \ R21 )) by L549 , L431;
L551: ( (the Source of R16) . C115 ) = R17 by L549 , L431;
thus L552: C115 in ( Edges_Out (R17 , R20) ) by L551 , L538 , L548 , L550 , L431;
end;
L553: ( Edges_Out (R17 , R20) ) = ( ( Edges_Out (R17 , R21) ) \/ ( Edges_Out (R17 , ( R20 \ R21 )) ) ) by L540 , TARSKI:1;
L554: ( Edges_Out (R17 , R21) ) misses ( Edges_Out (R17 , ( R20 \ R21 )) )
proof
assume L555: (not thesis);
consider C116 being set such that L556: C116 in ( ( Edges_Out (R17 , R21) ) /\ ( Edges_Out (R17 , ( R20 \ R21 )) ) ) by L555 , XBOOLE_0:4;
L557: C116 in ( Edges_Out (R17 , ( R20 \ R21 )) ) by L556 , XBOOLE_0:def 4;
L558: C116 in ( R20 \ R21 ) by L557 , L431;
L559: C116 in ( Edges_Out (R17 , R21) ) by L556 , XBOOLE_0:def 4;
L560: C116 in R21 by L559 , L431;
thus L561: contradiction by L560 , L558 , XBOOLE_0:def 5;
end;
L562: ( card ( Edges_Out (R17 , R20) ) ) = ( ( card ( Edges_Out (R17 , R21) ) ) + ( card ( Edges_Out (R17 , ( R20 \ R21 )) ) ) ) by L554 , L553 , CARD_2:40;
thus L563: thesis by L562;
end;
theorem
L564: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds (for R20 being set holds (for R21 being set holds (R21 c= R20 implies ( Degree (R17 , ( R20 \ R21 )) ) = ( ( Degree (R17 , R20) ) - ( Degree (R17 , R21) ) ))))))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
let R20 being set;
let R21 being set;
assume L565: R21 c= R20;
L566: (( card ( Edges_In (R17 , ( R20 \ R21 )) ) ) = ( ( card ( Edges_In (R17 , R20) ) ) - ( card ( Edges_In (R17 , R21) ) ) ) & ( card ( Edges_Out (R17 , ( R20 \ R21 )) ) ) = ( ( card ( Edges_Out (R17 , R20) ) ) - ( card ( Edges_Out (R17 , R21) ) ) )) by L565 , L510 , L537;
thus L567: thesis by L566;
end;
theorem
L568: (for R13 being set holds (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds (( Edges_In (R17 , R13) ) = ( Edges_In (R17 , ( R13 /\ (the carrier' of R16) )) ) & ( Edges_Out (R17 , R13) ) = ( Edges_Out (R17 , ( R13 /\ (the carrier' of R16) )) )))))
proof
let R13 being set;
let R16 being  finite Graph;
let R17 being (Vertex of R16);
set D90 = (the carrier' of R16);
L569:
now
let C117 being set;
thus L570:now
assume L571: C117 in ( Edges_In (R17 , R13) );
L572: C117 in R13 by L571 , L420;
L573: C117 in ( R13 /\ D90 ) by L572 , L571 , XBOOLE_0:def 4;
L574: ( (the Target of R16) . C117 ) = R17 by L571 , L420;
thus L575: C117 in ( Edges_In (R17 , ( R13 /\ D90 )) ) by L574 , L571 , L573 , L420;
end;
assume L576: C117 in ( Edges_In (R17 , ( R13 /\ D90 )) );
L577: C117 in ( R13 /\ D90 ) by L576 , L420;
L578: C117 in R13 by L577 , XBOOLE_0:def 4;
L579: ( (the Target of R16) . C117 ) = R17 by L576 , L420;
thus L580: C117 in ( Edges_In (R17 , R13) ) by L579 , L576 , L578 , L420;
end;
thus L581: ( Edges_In (R17 , R13) ) = ( Edges_In (R17 , ( R13 /\ (the carrier' of R16) )) ) by L569 , TARSKI:1;
L582:
now
let C118 being set;
thus L583:now
assume L584: C118 in ( Edges_Out (R17 , R13) );
L585: C118 in R13 by L584 , L431;
L586: C118 in ( R13 /\ D90 ) by L585 , L584 , XBOOLE_0:def 4;
L587: ( (the Source of R16) . C118 ) = R17 by L584 , L431;
thus L588: C118 in ( Edges_Out (R17 , ( R13 /\ D90 )) ) by L587 , L584 , L586 , L431;
end;
assume L589: C118 in ( Edges_Out (R17 , ( R13 /\ D90 )) );
L590: C118 in ( R13 /\ D90 ) by L589 , L431;
L591: C118 in R13 by L590 , XBOOLE_0:def 4;
L592: ( (the Source of R16) . C118 ) = R17 by L589 , L431;
thus L593: C118 in ( Edges_Out (R17 , R13) ) by L592 , L589 , L591 , L431;
end;
thus L594: thesis by L582 , TARSKI:1;
end;
theorem
L595: (for R13 being set holds (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds ( Degree (R17 , R13) ) = ( Degree (R17 , ( R13 /\ (the carrier' of R16) )) ))))
proof
let R13 being set;
let R16 being  finite Graph;
let R17 being (Vertex of R16);
set D91 = (the carrier' of R16);
thus L596: ( Degree (R17 , R13) ) = ( ( card ( Edges_In (R17 , ( R13 /\ D91 )) ) ) + ( card ( Edges_Out (R17 , R13) ) ) ) by L568
.= ( Degree (R17 , ( R13 /\ (the carrier' of R16) )) ) by L568;
end;
theorem
L597: (for R16 being  finite Graph holds (for R17 being (Vertex of R16) holds (for R18 being (Chain of R16) holds (for R19 being (FinSequence of (the carrier of R16)) holds ((R18 is non  empty & R19 is_vertex_seq_of R18) implies (R17 in ( rng R19 ) iff ( Degree (R17 , ( rng R18 )) ) <> ( 0 )))))))
proof
let R16 being  finite Graph;
let R17 being (Vertex of R16);
let R18 being (Chain of R16);
let R19 being (FinSequence of (the carrier of R16));
assume that
L598: R18 is non  empty
and
L599: R19 is_vertex_seq_of R18;
thus L600:now
L601: R18 is (FinSequence of (the carrier' of R16)) by MSSCYC_1:def 1;
L602: ( rng R18 ) c= (the carrier' of R16) by L601 , FINSEQ_1:def 4;
assume that
L603: R17 in ( rng R19 )
and
L604: ( Degree (R17 , ( rng R18 )) ) = ( 0 );
L605: (( Edges_In (R17 , ( rng R18 )) ) = ( {} ) & ( Edges_Out (R17 , ( rng R18 )) ) = ( {} )) by L604;
L606: ( ( 0 ) + 1 ) <= ( len R18 ) by L598 , NAT_1:13;
L607: ( len R19 ) = ( ( len R18 ) + 1 ) by L599 , GRAPH_2:def 6;
consider C119 being Nat such that L608: C119 in ( dom R19 ) and L609: ( R19 . C119 ) = R17 by L603 , FINSEQ_2:10;
L610: 1 <= C119 by L608 , FINSEQ_3:25;
L611: C119 <= ( len R19 ) by L608 , FINSEQ_3:25;
per cases  by L611 , XXREAL_0:1;
suppose L612: C119 = ( len R19 );

set D92 = ( len R18 );
L613: D92 in ( dom R18 ) by L606 , FINSEQ_3:25;
L614: ( R18 . D92 ) in ( rng R18 ) by L613 , FUNCT_1:def 3;
L615: (( R19 . ( len R19 ) ) = ( (the Target of R16) . ( R18 . ( len R18 ) ) ) or ( R19 . ( len R19 ) ) = ( (the Source of R16) . ( R18 . ( len R18 ) ) )) by L599 , L607 , L606 , L243;
thus L616: contradiction by L615 , L605 , L609 , L602 , L612 , L614 , L420 , L431;
end;
suppose L617: C119 < ( len R19 );

L618: C119 <= ( len R18 ) by L617 , L607 , NAT_1:13;
L619: C119 in ( dom R18 ) by L618 , L610 , FINSEQ_3:25;
L620: ( R18 . C119 ) in ( rng R18 ) by L619 , FUNCT_1:def 3;
L621: (( R19 . C119 ) = ( (the Target of R16) . ( R18 . C119 ) ) or ( R19 . C119 ) = ( (the Source of R16) . ( R18 . C119 ) )) by L599 , L610 , L618 , L243;
thus L622: contradiction by L621 , L605 , L609 , L602 , L620 , L420 , L431;
end;
end;
assume that
L624: ( Degree (R17 , ( rng R18 )) ) <> ( 0 )
and
L625: (not R17 in ( rng R19 ));
per cases  by L624;
suppose L626: ( card ( Edges_In (R17 , ( rng R18 )) ) ) <> ( 0 );

consider C120 being set such that L627: C120 in ( Edges_In (R17 , ( rng R18 )) ) by L626 , CARD_1:27 , XBOOLE_0:def 1;
L628: ( (the Target of R16) . C120 ) = R17 by L627 , L420;
L629: C120 in ( rng R18 ) by L627 , L420;
consider C121 being Nat such that L630: C121 in ( dom R18 ) and L631: ( R18 . C121 ) = C120 by L629 , FINSEQ_2:10;
L632: 1 <= C121 by L630 , FINSEQ_3:25;
L633: C121 <= ( len R18 ) by L630 , FINSEQ_3:25;
L634: (1 <= ( C121 + 1 ) & ( C121 + 1 ) <= ( len R19 )) by L633 , L599 , L632 , L243;
L635: ( C121 + 1 ) in ( dom R19 ) by L634 , FINSEQ_3:25;
L636: C121 <= ( len R19 ) by L599 , L632 , L633 , L243;
L637: C121 in ( dom R19 ) by L636 , L632 , FINSEQ_3:25;
L638: ((( R19 . C121 ) = ( (the Target of R16) . ( R18 . C121 ) ) & ( R19 . ( C121 + 1 ) ) = ( (the Source of R16) . ( R18 . C121 ) )) or (( R19 . C121 ) = ( (the Source of R16) . ( R18 . C121 ) ) & ( R19 . ( C121 + 1 ) ) = ( (the Target of R16) . ( R18 . C121 ) ))) by L599 , L632 , L633 , L243;
thus L639: contradiction by L638 , L625 , L628 , L631 , L637 , L635 , FUNCT_1:def 3;
end;
suppose L640: ( card ( Edges_Out (R17 , ( rng R18 )) ) ) <> ( 0 );

consider C122 being set such that L641: C122 in ( Edges_Out (R17 , ( rng R18 )) ) by L640 , CARD_1:27 , XBOOLE_0:def 1;
L642: ( (the Source of R16) . C122 ) = R17 by L641 , L431;
L643: C122 in ( rng R18 ) by L641 , L431;
consider C123 being Nat such that L644: C123 in ( dom R18 ) and L645: ( R18 . C123 ) = C122 by L643 , FINSEQ_2:10;
L646: 1 <= C123 by L644 , FINSEQ_3:25;
L647: C123 <= ( len R18 ) by L644 , FINSEQ_3:25;
L648: (1 <= ( C123 + 1 ) & ( C123 + 1 ) <= ( len R19 )) by L647 , L599 , L646 , L243;
L649: ( C123 + 1 ) in ( dom R19 ) by L648 , FINSEQ_3:25;
L650: C123 <= ( len R19 ) by L599 , L646 , L647 , L243;
L651: C123 in ( dom R19 ) by L650 , L646 , FINSEQ_3:25;
L652: ((( R19 . C123 ) = ( (the Target of R16) . ( R18 . C123 ) ) & ( R19 . ( C123 + 1 ) ) = ( (the Source of R16) . ( R18 . C123 ) )) or (( R19 . C123 ) = ( (the Source of R16) . ( R18 . C123 ) ) & ( R19 . ( C123 + 1 ) ) = ( (the Target of R16) . ( R18 . C123 ) ))) by L599 , L646 , L647 , L243;
thus L653: contradiction by L652 , L625 , L642 , L645 , L651 , L649 , FUNCT_1:def 3;
end;
end;
theorem
L655: (for B86 being non  void  finite  connected Graph holds (for B87 being (Vertex of B86) holds ( Degree B87 ) <> ( 0 )))
proof
let C124 being non  void  finite  connected Graph;
let C125 being (Vertex of C124);
assume L656: ( Degree C125 ) = ( 0 );
set D93 = (the carrier' of C124);
L657: ( Degree C125 ) = ( Degree (C125 , D93) ) by L481
.= ( ( card ( Edges_In (C125 , D93) ) ) + ( card ( Edges_Out (C125 , D93) ) ) );
L658: ( Edges_In (C125 , D93) ) = ( {} ) by L657 , L656;
L659: ( Edges_Out (C125 , D93) ) = ( {} ) by L656 , L657;
set D94 = (the Source of C124);
set D95 = (the Target of C124);
consider C126 being set such that L660: C126 in D93 by XBOOLE_0:def 1;
reconsider D96 = ( D94 . C126 ) as (Vertex of C124) by L660 , FUNCT_2:5;
per cases ;
suppose L661: C125 = D96;

thus L662: contradiction by L661 , L659 , L660 , L431;
end;
suppose L663: C125 <> D96;

consider C127 being (Chain of C124), C128 being (FinSequence of (the carrier of C124)) such that L664: C127 is non  empty and L665: C128 is_vertex_seq_of C127 and L666: ( C128 . 1 ) = C125 and L667: ( C128 . ( len C128 ) ) = D96 by L663 , L283;
L668: ( ( 0 ) + 1 ) <= ( len C127 ) by L664 , NAT_1:13;
L669: 1 in ( dom C127 ) by L668 , FINSEQ_3:25;
L670: ( C127 . 1 ) in ( rng C127 ) by L669 , FUNCT_1:def 3;
L671: C127 is (FinSequence of (the carrier' of C124)) by MSSCYC_1:def 1;
L672: ( rng C127 ) c= (the carrier' of C124) by L671 , FINSEQ_1:def 4;
L673: (( C128 . 1 ) = ( D95 . ( C127 . 1 ) ) or ( C128 . 1 ) = ( D94 . ( C127 . 1 ) )) by L665 , L668 , L243;
thus L674: contradiction by L673 , L658 , L659 , L666 , L672 , L670 , L420 , L431;
end;
end;
begin
definition
let C129 being Graph;
let C130 , C131 being (Vertex of C129);
func AddNewEdge (C130 , C131) ->  strict Graph means 
:L676: ((the carrier of it) = (the carrier of C129) & (the carrier' of it) = ( (the carrier' of C129) \/ { (the carrier' of C129) } ) & (the Source of it) = ( (the Source of C129) +* ( (the carrier' of C129) .--> C130 ) ) & (the Target of it) = ( (the Target of C129) +* ( (the carrier' of C129) .--> C131 ) ));
existence
proof
set D97 = (the Target of C129);
set D98 = (the carrier' of C129);
set D99 = (the carrier of C129);
set D100 = ( D98 \/ { D98 } );
set D101 = ( D98 .--> C131 );
L677: { C130 } c= D99 by ZFMISC_1:31;
set D102 = ( D97 +* ( D98 .--> C131 ) );
L678: ( dom D101 ) = { D98 } by FUNCOP_1:13;
L679: { C131 } c= D99 by ZFMISC_1:31;
L680: (( rng D101 ) = { C131 } & ( rng D97 ) c= D99) by FUNCOP_1:8 , RELAT_1:def 19;
L681: (( rng D102 ) c= ( ( rng D97 ) \/ ( rng D101 ) ) & ( ( rng D97 ) \/ ( rng D101 ) ) c= D99) by L680 , L679 , FUNCT_4:17 , XBOOLE_1:8;
L682: ( rng D102 ) c= D99 by L681 , XBOOLE_1:1;
L683: ( dom D102 ) = ( ( dom D97 ) \/ ( dom D101 ) ) by FUNCT_4:def 1
.= D100 by L678 , FUNCT_2:def 1;
reconsider D103 = D102 as (Function of D100 , D99) by L683 , L682 , FUNCT_2:def 1 , RELSET_1:4;
set D104 = (the Source of C129);
set D105 = ( D98 .--> C130 );
L684: ( dom D105 ) = { D98 } by FUNCOP_1:13;
set D106 = ( D104 +* ( D98 .--> C130 ) );
L685: ( dom D106 ) = ( ( dom D104 ) \/ ( dom D105 ) ) by FUNCT_4:def 1
.= D100 by L684 , FUNCT_2:def 1;
L686: (( rng D105 ) = { C130 } & ( rng D104 ) c= D99) by FUNCOP_1:8 , RELAT_1:def 19;
L687: (( rng D106 ) c= ( ( rng D104 ) \/ ( rng D105 ) ) & ( ( rng D104 ) \/ ( rng D105 ) ) c= D99) by L686 , L677 , FUNCT_4:17 , XBOOLE_1:8;
L688: ( rng D106 ) c= D99 by L687 , XBOOLE_1:1;
reconsider D107 = D106 as (Function of D100 , D99) by L688 , L685 , FUNCT_2:def 1 , RELSET_1:4;
reconsider D108 = MultiGraphStruct (# D99 , D100 , D107 , D103 #) as  strict non  empty MultiGraphStruct;
take D108;
thus L689: thesis;
end;
uniqueness;
end;
registration
let C132 being  finite Graph;
let C133 , C134 being (Vertex of C132);
cluster ( AddNewEdge (C133 , C134) ) ->  finite;
coherence
proof
reconsider D109 = (the carrier' of C132) as  finite set by GRAPH_1:def 11;
reconsider D110 = (the carrier of C132) as  finite set by GRAPH_1:def 11;
L691: (the carrier of ( AddNewEdge (C133 , C134) )) = D110 by L676;
thus L692: (the carrier of ( AddNewEdge (C133 , C134) )) is  finite by L691;
L693: (the carrier' of ( AddNewEdge (C133 , C134) )) = ( D109 \/ { (the carrier' of C132) } ) by L676;
thus L694: thesis by L693;
end;
end;
theorem
L696: (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds ((the carrier' of R22) in (the carrier' of ( AddNewEdge (R24 , R25) )) & (the carrier' of R22) = ( (the carrier' of ( AddNewEdge (R24 , R25) )) \ { (the carrier' of R22) } ) & ( (the Source of ( AddNewEdge (R24 , R25) )) . (the carrier' of R22) ) = R24 & ( (the Target of ( AddNewEdge (R24 , R25) )) . (the carrier' of R22) ) = R25))))
proof
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
set D111 = ( AddNewEdge (R24 , R25) );
set D112 = (the carrier' of R22);
set D113 = (the Source of R22);
set D114 = (the Target of R22);
set D115 = (the carrier' of D111);
L697: D115 = ( D112 \/ { D112 } ) by L676;
L698: D112 in { D112 } by TARSKI:def 1;
thus L699: D112 in D115 by L698 , L697 , XBOOLE_0:def 3;
L700:
now
let C135 being set;
thus L701:now
assume L702: C135 in D112;
L703: C135 <> D112 by L702;
L704: (not C135 in { D112 }) by L703 , TARSKI:def 1;
L705: C135 in D115 by L697 , L702 , XBOOLE_0:def 3;
thus L706: C135 in ( D115 \ { D112 } ) by L705 , L704 , XBOOLE_0:def 5;
end;
assume L707: C135 in ( D115 \ { D112 } );
L708: (not C135 in { D112 }) by L707 , XBOOLE_0:def 5;
thus L709: C135 in D112 by L708 , L697 , L707 , XBOOLE_0:def 3;
end;
thus L710: D112 = ( D115 \ { D112 } ) by L700 , TARSKI:1;
L711: ( dom ( D112 .--> R24 ) ) = { D112 } by FUNCOP_1:13;
L712: D112 in ( dom ( D112 .--> R24 ) ) by L711 , TARSKI:def 1;
L713: (the Source of D111) = ( D113 +* ( D112 .--> R24 ) ) by L676;
thus L714: ( (the Source of D111) . D112 ) = ( ( D112 .--> R24 ) . D112 ) by L713 , L712 , FUNCT_4:13
.= R24 by FUNCOP_1:72;
L715: ( dom ( D112 .--> R25 ) ) = { D112 } by FUNCOP_1:13;
L716: D112 in ( dom ( D112 .--> R25 ) ) by L715 , TARSKI:def 1;
L717: (the Target of D111) = ( D114 +* ( D112 .--> R25 ) ) by L676;
thus L718: ( (the Target of D111) . D112 ) = ( ( D112 .--> R25 ) . D112 ) by L717 , L716 , FUNCT_4:13
.= R25 by FUNCOP_1:72;
end;
theorem
L719: (for R12 being set holds (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (R12 in (the carrier' of R22) implies (( (the Source of ( AddNewEdge (R24 , R25) )) . R12 ) = ( (the Source of R22) . R12 ) & ( (the Target of ( AddNewEdge (R24 , R25) )) . R12 ) = ( (the Target of R22) . R12 )))))))
proof
let R12 being set;
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
set D116 = (the Source of R22);
set D117 = (the Target of R22);
set D118 = (the carrier' of R22);
set D119 = ( AddNewEdge (R24 , R25) );
set D120 = (the Source of D119);
set D121 = (the Target of D119);
assume L720: R12 in (the carrier' of R22);
L721: (not R12 in ( dom ( D118 .--> R24 ) ))
proof
assume L722: R12 in ( dom ( D118 .--> R24 ) );
L723: R12 in { D118 } by L722 , FUNCOP_1:13;
L724: R12 = D118 by L723 , TARSKI:def 1;
thus L725: contradiction by L724 , L720;
end;
thus L726: ( D120 . R12 ) = ( ( D116 +* ( D118 .--> R24 ) ) . R12 ) by L676
.= ( D116 . R12 ) by L721 , FUNCT_4:11;
L727: (not R12 in ( dom ( D118 .--> R25 ) ))
proof
assume L728: R12 in ( dom ( D118 .--> R25 ) );
L729: R12 in { D118 } by L728 , FUNCOP_1:13;
L730: R12 = D118 by L729 , TARSKI:def 1;
thus L731: contradiction by L730 , L720;
end;
thus L732: ( D121 . R12 ) = ( ( D117 +* ( D118 .--> R25 ) ) . R12 ) by L676
.= ( D117 . R12 ) by L727 , FUNCT_4:11;
end;
theorem
L733: (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R26 being (Chain of R22) holds (for R28 being (FinSequence of (the carrier of R22)) holds (for R31 being (FinSequence of (the carrier of ( AddNewEdge (R24 , R25) ))) holds ((R31 = R28 & R28 is_vertex_seq_of R26) implies R31 is_vertex_seq_of R26)))))))
proof
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R26 being (Chain of R22);
let R28 being (FinSequence of (the carrier of R22));
let R31 being (FinSequence of (the carrier of ( AddNewEdge (R24 , R25) )));
assume that
L734: R31 = R28
and
L735: R28 is_vertex_seq_of R26;
thus L736: ( len R31 ) = ( ( len R26 ) + 1 ) by L734 , L735 , GRAPH_2:def 6;
let C136 being (Element of ( NAT ));
set D122 = (the Target of R22);
set D123 = (the Source of R22);
set D124 = ( R26 . C136 );
set D125 = ( R28 /. C136 );
set D126 = ( R28 /. ( C136 + 1 ) );
assume L737: (1 <= C136 & C136 <= ( len R26 ));
L738: ( R26 . C136 ) joins ( R28 /. C136 ) , ( R28 /. ( C136 + 1 ) ) by L737 , L735 , GRAPH_2:def 6;
L739: ((( D123 . D124 ) = D125 & ( D122 . D124 ) = D126) or (( D123 . D124 ) = D126 & ( D122 . D124 ) = D125)) by L738 , GRAPH_1:def 12;
set D127 = ( AddNewEdge (R24 , R25) );
set D128 = (the Source of D127);
set D129 = (the Target of D127);
L740: (the carrier of R22) = (the carrier of D127) by L676;
L741: R26 is (FinSequence of (the carrier' of R22)) by MSSCYC_1:def 1;
L742: ( rng R26 ) c= (the carrier' of R22) by L741 , FINSEQ_1:def 4;
L743: C136 in ( dom R26 ) by L737 , FINSEQ_3:25;
L744: ( R26 . C136 ) in ( rng R26 ) by L743 , FUNCT_1:def 3;
L745: (( D128 . D124 ) = ( D123 . D124 ) & ( D122 . D124 ) = ( D129 . D124 )) by L744 , L742 , L719;
thus L746: thesis by L745 , L734 , L740 , L739 , GRAPH_1:def 12;
end;
theorem
L747: (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R26 being (Chain of R22) holds R26 is (Chain of ( AddNewEdge (R24 , R25) ))))))
proof
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R26 being (Chain of R22);
set D130 = ( AddNewEdge (R24 , R25) );
consider C137 being (FinSequence of (the carrier of R22)) such that L748: C137 is_vertex_seq_of R26 by GRAPH_2:33;
L749: R26 is (FinSequence of (the carrier' of R22)) by MSSCYC_1:def 1;
L750: ( rng R26 ) c= (the carrier' of R22) by L749 , FINSEQ_1:def 4;
L751: (the carrier' of D130) = ( (the carrier' of R22) \/ { (the carrier' of R22) } ) by L676;
L752: (the carrier' of R22) c= (the carrier' of D130) by L751 , XBOOLE_1:7;
L753: ( rng R26 ) c= (the carrier' of D130) by L752 , L750 , XBOOLE_1:1;
thus L754: R26 is (FinSequence of (the carrier' of D130)) by L753 , FINSEQ_1:def 4;
reconsider D131 = C137 as (FinSequence of (the carrier of D130)) by L676;
take D131;
thus L755: thesis by L748 , L733;
end;
theorem
L756: (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R27 being (Path of R22) holds R27 is (Path of ( AddNewEdge (R24 , R25) )))))) by L747;
theorem
L757: (for R13 being set holds (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R29 being (Vertex of ( AddNewEdge (R24 , R25) )) holds ((R29 = R24 & R24 <> R25) implies ( Edges_In (R29 , R13) ) = ( Edges_In (R24 , R13) )))))))
proof
let R13 being set;
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R29 being (Vertex of ( AddNewEdge (R24 , R25) ));
assume that
L758: R29 = R24
and
L759: R24 <> R25;
set D132 = ( AddNewEdge (R24 , R25) );
set D133 = (the carrier' of R22);
set D134 = (the Target of R22);
set D135 = (the carrier' of D132);
set D136 = (the Target of D132);
L760: D135 = ( D133 \/ { D133 } ) by L676;
L761:
now
let C138 being set;
thus L762:now
assume L763: C138 in ( Edges_In (R29 , R13) );
L764: C138 in R13 by L763 , L420;
L765: ( D136 . C138 ) = R29 by L763 , L420;
L766: ( D136 . D133 ) = R25 by L696;
L767: (not C138 in { D133 }) by L766 , L758 , L759 , L765 , TARSKI:def 1;
L768: C138 in D133 by L767 , L760 , L763 , XBOOLE_0:def 3;
L769: ( D134 . C138 ) = R24 by L768 , L758 , L765 , L719;
thus L770: C138 in ( Edges_In (R24 , R13) ) by L769 , L764 , L768 , L420;
end;
assume L771: C138 in ( Edges_In (R24 , R13) );
L772: ( D134 . C138 ) = R24 by L771 , L420;
L773: ( D136 . C138 ) = R29 by L772 , L758 , L771 , L719;
L774: (C138 in R13 & C138 in D135) by L760 , L771 , L420 , XBOOLE_0:def 3;
thus L775: C138 in ( Edges_In (R29 , R13) ) by L774 , L773 , L420;
end;
thus L776: thesis by L761 , TARSKI:1;
end;
theorem
L777: (for R13 being set holds (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R29 being (Vertex of ( AddNewEdge (R24 , R25) )) holds ((R29 = R25 & R24 <> R25) implies ( Edges_Out (R29 , R13) ) = ( Edges_Out (R25 , R13) )))))))
proof
let R13 being set;
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R29 being (Vertex of ( AddNewEdge (R24 , R25) ));
assume that
L778: R29 = R25
and
L779: R24 <> R25;
set D137 = ( AddNewEdge (R24 , R25) );
set D138 = (the carrier' of R22);
set D139 = (the Source of R22);
set D140 = (the carrier' of D137);
set D141 = (the Source of D137);
L780: D140 = ( D138 \/ { D138 } ) by L676;
L781:
now
let C139 being set;
thus L782:now
assume L783: C139 in ( Edges_Out (R29 , R13) );
L784: C139 in R13 by L783 , L431;
L785: ( D141 . C139 ) = R29 by L783 , L431;
L786: ( D141 . D138 ) = R24 by L696;
L787: (not C139 in { D138 }) by L786 , L778 , L779 , L785 , TARSKI:def 1;
L788: C139 in D138 by L787 , L780 , L783 , XBOOLE_0:def 3;
L789: ( D139 . C139 ) = R25 by L788 , L778 , L785 , L719;
thus L790: C139 in ( Edges_Out (R25 , R13) ) by L789 , L784 , L788 , L431;
end;
assume L791: C139 in ( Edges_Out (R25 , R13) );
L792: ( D139 . C139 ) = R25 by L791 , L431;
L793: ( D141 . C139 ) = R29 by L792 , L778 , L791 , L719;
L794: (C139 in R13 & C139 in D140) by L780 , L791 , L431 , XBOOLE_0:def 3;
thus L795: C139 in ( Edges_Out (R29 , R13) ) by L794 , L793 , L431;
end;
thus L796: thesis by L781 , TARSKI:1;
end;
theorem
L797: (for R13 being set holds (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R29 being (Vertex of ( AddNewEdge (R24 , R25) )) holds ((R29 = R24 & (the carrier' of R22) in R13) implies (( Edges_Out (R29 , R13) ) = ( ( Edges_Out (R24 , R13) ) \/ { (the carrier' of R22) } ) & ( Edges_Out (R24 , R13) ) misses { (the carrier' of R22) })))))))
proof
let R13 being set;
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R29 being (Vertex of ( AddNewEdge (R24 , R25) ));
assume that
L798: R29 = R24
and
L799: (the carrier' of R22) in R13;
set D142 = ( AddNewEdge (R24 , R25) );
set D143 = (the carrier' of R22);
set D144 = (the Source of R22);
set D145 = (the carrier' of D142);
set D146 = (the Source of D142);
L800: D145 = ( D143 \/ { D143 } ) by L676;
L801:
now
let C140 being set;
thus L802:now
assume L803: C140 in ( Edges_Out (R29 , R13) );
L804: C140 in R13 by L803 , L431;
L805: ( D146 . C140 ) = R29 by L803 , L431;
per cases  by L800 , L803 , XBOOLE_0:def 3;
suppose L806: C140 in D143;

L807: ( D144 . C140 ) = R24 by L806 , L798 , L805 , L719;
L808: C140 in ( Edges_Out (R24 , R13) ) by L807 , L804 , L806 , L431;
thus L809: C140 in ( ( Edges_Out (R24 , R13) ) \/ { D143 } ) by L808 , XBOOLE_0:def 3;
end;
suppose L810: C140 in { D143 };

thus L811: C140 in ( ( Edges_Out (R24 , R13) ) \/ { D143 } ) by L810 , XBOOLE_0:def 3;
end;
end;
assume L813: C140 in ( ( Edges_Out (R24 , R13) ) \/ { D143 } );
per cases  by L813 , XBOOLE_0:def 3;
suppose L814: C140 in ( Edges_Out (R24 , R13) );

L815: ( D144 . C140 ) = R24 by L814 , L431;
L816: ( D146 . C140 ) = R29 by L815 , L798 , L814 , L719;
L817: (C140 in R13 & C140 in D145) by L800 , L814 , L431 , XBOOLE_0:def 3;
thus L818: C140 in ( Edges_Out (R29 , R13) ) by L817 , L816 , L431;
end;
suppose L819: C140 in { D143 };

L820: ( D146 . D143 ) = R24 by L696;
L821: (C140 = D143 & C140 in D145) by L800 , L819 , TARSKI:def 1 , XBOOLE_0:def 3;
thus L822: C140 in ( Edges_Out (R29 , R13) ) by L821 , L798 , L799 , L820 , L431;
end;
end;
thus L824: ( Edges_Out (R29 , R13) ) = ( ( Edges_Out (R24 , R13) ) \/ { D143 } ) by L801 , TARSKI:1;
assume L825: ( ( Edges_Out (R24 , R13) ) /\ { D143 } ) <> ( {} );
consider C141 being set such that L826: C141 in ( ( Edges_Out (R24 , R13) ) /\ { D143 } ) by L825 , XBOOLE_0:def 1;
L827: C141 in { D143 } by L826 , XBOOLE_0:def 4;
L828: C141 = D143 by L827 , TARSKI:def 1;
L829: C141 in D143 by L826;
thus L830: contradiction by L829 , L828;
end;
theorem
L831: (for R13 being set holds (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R29 being (Vertex of ( AddNewEdge (R24 , R25) )) holds ((R29 = R25 & (the carrier' of R22) in R13) implies (( Edges_In (R29 , R13) ) = ( ( Edges_In (R25 , R13) ) \/ { (the carrier' of R22) } ) & ( Edges_In (R25 , R13) ) misses { (the carrier' of R22) })))))))
proof
let R13 being set;
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R29 being (Vertex of ( AddNewEdge (R24 , R25) ));
assume that
L832: R29 = R25
and
L833: (the carrier' of R22) in R13;
set D147 = ( AddNewEdge (R24 , R25) );
set D148 = (the carrier' of R22);
set D149 = (the Target of R22);
set D150 = (the carrier' of D147);
set D151 = (the Target of D147);
L834: D150 = ( D148 \/ { D148 } ) by L676;
L835:
now
let C142 being set;
thus L836:now
assume L837: C142 in ( Edges_In (R29 , R13) );
L838: C142 in R13 by L837 , L420;
L839: ( D151 . C142 ) = R29 by L837 , L420;
per cases  by L834 , L837 , XBOOLE_0:def 3;
suppose L840: C142 in D148;

L841: ( D149 . C142 ) = R25 by L840 , L832 , L839 , L719;
L842: C142 in ( Edges_In (R25 , R13) ) by L841 , L838 , L840 , L420;
thus L843: C142 in ( ( Edges_In (R25 , R13) ) \/ { D148 } ) by L842 , XBOOLE_0:def 3;
end;
suppose L844: C142 in { D148 };

thus L845: C142 in ( ( Edges_In (R25 , R13) ) \/ { D148 } ) by L844 , XBOOLE_0:def 3;
end;
end;
assume L847: C142 in ( ( Edges_In (R25 , R13) ) \/ { D148 } );
per cases  by L847 , XBOOLE_0:def 3;
suppose L848: C142 in ( Edges_In (R25 , R13) );

L849: ( D149 . C142 ) = R25 by L848 , L420;
L850: ( D151 . C142 ) = R29 by L849 , L832 , L848 , L719;
L851: (C142 in R13 & C142 in D150) by L834 , L848 , L420 , XBOOLE_0:def 3;
thus L852: C142 in ( Edges_In (R29 , R13) ) by L851 , L850 , L420;
end;
suppose L853: C142 in { D148 };

L854: ( D151 . D148 ) = R25 by L696;
L855: (C142 = D148 & C142 in D150) by L834 , L853 , TARSKI:def 1 , XBOOLE_0:def 3;
thus L856: C142 in ( Edges_In (R29 , R13) ) by L855 , L832 , L833 , L854 , L420;
end;
end;
thus L858: ( Edges_In (R29 , R13) ) = ( ( Edges_In (R25 , R13) ) \/ { D148 } ) by L835 , TARSKI:1;
assume L859: ( ( Edges_In (R25 , R13) ) /\ { D148 } ) <> ( {} );
consider C143 being set such that L860: C143 in ( ( Edges_In (R25 , R13) ) /\ { D148 } ) by L859 , XBOOLE_0:def 1;
L861: C143 in { D148 } by L860 , XBOOLE_0:def 4;
L862: C143 = D148 by L861 , TARSKI:def 1;
L863: C143 in D148 by L860;
thus L864: contradiction by L863 , L862;
end;
theorem
L865: (for R13 being set holds (for R22 being Graph holds (for R23 being (Vertex of R22) holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R29 being (Vertex of ( AddNewEdge (R24 , R25) )) holds ((R29 = R23 & R23 <> R25) implies ( Edges_In (R29 , R13) ) = ( Edges_In (R23 , R13) ))))))))
proof
let R13 being set;
let R22 being Graph;
let R23 being (Vertex of R22);
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R29 being (Vertex of ( AddNewEdge (R24 , R25) ));
assume that
L866: R29 = R23
and
L867: R23 <> R25;
set D152 = ( AddNewEdge (R24 , R25) );
set D153 = (the carrier' of R22);
set D154 = (the Target of R22);
set D155 = (the carrier' of D152);
set D156 = (the Target of D152);
L868: D155 = ( D153 \/ { D153 } ) by L676;
L869:
now
let C144 being set;
thus L870:now
assume L871: C144 in ( Edges_In (R29 , R13) );
L872: C144 in R13 by L871 , L420;
L873: ( D156 . C144 ) = R29 by L871 , L420;
L874: ( D156 . D153 ) = R25 by L696;
L875: (not C144 in { D153 }) by L874 , L866 , L867 , L873 , TARSKI:def 1;
L876: C144 in D153 by L875 , L868 , L871 , XBOOLE_0:def 3;
L877: ( D154 . C144 ) = R23 by L876 , L866 , L873 , L719;
thus L878: C144 in ( Edges_In (R23 , R13) ) by L877 , L872 , L876 , L420;
end;
assume L879: C144 in ( Edges_In (R23 , R13) );
L880: ( D154 . C144 ) = R23 by L879 , L420;
L881: ( D156 . C144 ) = R29 by L880 , L866 , L879 , L719;
L882: (C144 in R13 & C144 in D155) by L868 , L879 , L420 , XBOOLE_0:def 3;
thus L883: C144 in ( Edges_In (R29 , R13) ) by L882 , L881 , L420;
end;
thus L884: thesis by L869 , TARSKI:1;
end;
theorem
L885: (for R13 being set holds (for R22 being Graph holds (for R23 being (Vertex of R22) holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R29 being (Vertex of ( AddNewEdge (R24 , R25) )) holds ((R29 = R23 & R23 <> R24) implies ( Edges_Out (R29 , R13) ) = ( Edges_Out (R23 , R13) ))))))))
proof
let R13 being set;
let R22 being Graph;
let R23 being (Vertex of R22);
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R29 being (Vertex of ( AddNewEdge (R24 , R25) ));
assume that
L886: R29 = R23
and
L887: R23 <> R24;
set D157 = ( AddNewEdge (R24 , R25) );
set D158 = (the carrier' of R22);
set D159 = (the Source of R22);
set D160 = (the carrier' of D157);
set D161 = (the Source of D157);
L888: D160 = ( D158 \/ { D158 } ) by L676;
L889:
now
let C145 being set;
thus L890:now
assume L891: C145 in ( Edges_Out (R29 , R13) );
L892: C145 in R13 by L891 , L431;
L893: ( D161 . C145 ) = R29 by L891 , L431;
L894: ( D161 . D158 ) = R24 by L696;
L895: (not C145 in { D158 }) by L894 , L886 , L887 , L893 , TARSKI:def 1;
L896: C145 in D158 by L895 , L888 , L891 , XBOOLE_0:def 3;
L897: ( D159 . C145 ) = R23 by L896 , L886 , L893 , L719;
thus L898: C145 in ( Edges_Out (R23 , R13) ) by L897 , L892 , L896 , L431;
end;
assume L899: C145 in ( Edges_Out (R23 , R13) );
L900: ( D159 . C145 ) = R23 by L899 , L431;
L901: ( D161 . C145 ) = R29 by L900 , L886 , L899 , L719;
L902: (C145 in R13 & C145 in D160) by L888 , L899 , L431 , XBOOLE_0:def 3;
thus L903: C145 in ( Edges_Out (R29 , R13) ) by L902 , L901 , L431;
end;
thus L904: thesis by L889 , TARSKI:1;
end;
theorem
L905: (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R30 being (Path of ( AddNewEdge (R24 , R25) )) holds ((not (the carrier' of R22) in ( rng R30 )) implies R30 is (Path of R22))))))
proof
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R30 being (Path of ( AddNewEdge (R24 , R25) ));
set D162 = ( AddNewEdge (R24 , R25) );
set D163 = (the Source of R22);
set D164 = (the Target of R22);
set D165 = (the carrier' of R22);
set D166 = (the Source of D162);
set D167 = (the Target of D162);
L906: (the carrier' of D162) = ( D165 \/ { D165 } ) by L676;
L907: ( rng R30 ) c= ( D165 \/ { D165 } ) by L906 , FINSEQ_1:def 4;
assume L908: (not (the carrier' of R22) in ( rng R30 ));
L909: ( rng R30 ) c= D165
proof
let C146 being set;
assume L910: C146 in ( rng R30 );
L911: (C146 in D165 or C146 in { D165 }) by L910 , L907 , XBOOLE_0:def 3;
thus L912: thesis by L911 , L908 , L910 , TARSKI:def 1;
end;
L913: R30 is (Chain of R22)
proof
thus L914: R30 is (FinSequence of (the carrier' of R22)) by L909 , FINSEQ_1:def 4;
consider C147 being (FinSequence of (the carrier of D162)) such that L915: C147 is_vertex_seq_of R30 by MSSCYC_1:def 1;
reconsider D168 = C147 as (FinSequence of (the carrier of R22)) by L676;
take D168;
thus L916: D168 is_vertex_seq_of R30
proof
thus L917: ( len D168 ) = ( ( len R30 ) + 1 ) by L915 , GRAPH_2:def 6;
let C148 being (Element of ( NAT ));
assume that
L918: 1 <= C148
and
L919: C148 <= ( len R30 );
set D169 = ( R30 . C148 );
reconsider D170 = ( C147 /. C148 ) , D171 = ( C147 /. ( C148 + 1 ) ) as (Vertex of D162);
L920: ( R30 . C148 ) joins ( C147 /. C148 ) , ( C147 /. ( C148 + 1 ) ) by L915 , L918 , L919 , GRAPH_2:def 6;
L921: ((( D166 . D169 ) = D170 & ( D167 . D169 ) = D171) or (( D166 . D169 ) = D171 & ( D167 . D169 ) = D170)) by L920 , GRAPH_1:def 12;
reconsider D172 = ( D168 /. C148 ) , D173 = ( D168 /. ( C148 + 1 ) ) as (Vertex of R22);
L922: (1 <= ( C148 + 1 ) & ( C148 + 1 ) <= ( len D168 )) by L917 , L919 , NAT_1:11 , XREAL_1:6;
L923: ( C148 + 1 ) in ( dom D168 ) by L922 , FINSEQ_3:25;
L924: D173 = ( D168 . ( C148 + 1 ) ) by L923 , PARTFUN1:def 6
.= D171 by L923 , PARTFUN1:def 6;
L925: C148 in ( dom R30 ) by L918 , L919 , FINSEQ_3:25;
L926: D169 in ( rng R30 ) by L925 , FUNCT_1:def 3;
L927: (( D166 . D169 ) = ( D163 . D169 ) & ( D167 . D169 ) = ( D164 . D169 )) by L926 , L909 , L719;
L928: ( len R30 ) <= ( len D168 ) by L917 , NAT_1:11;
L929: C148 <= ( len D168 ) by L928 , L919 , XXREAL_0:2;
L930: C148 in ( dom D168 ) by L929 , L918 , FINSEQ_3:25;
L931: D172 = ( D168 . C148 ) by L930 , PARTFUN1:def 6
.= D170 by L930 , PARTFUN1:def 6;
thus L932: thesis by L931 , L921 , L927 , L924 , GRAPH_1:def 12;
end;

end;
reconsider D174 = R30 as (Chain of R22) by L913;
L917: D174 is  one-to-one;
thus L918: thesis by L917;
end;
theorem
L919: (for R22 being Graph holds (for R24 being (Vertex of R22) holds (for R25 being (Vertex of R22) holds (for R28 being (FinSequence of (the carrier of R22)) holds (for R30 being (Path of ( AddNewEdge (R24 , R25) )) holds (for R31 being (FinSequence of (the carrier of ( AddNewEdge (R24 , R25) ))) holds (((not (the carrier' of R22) in ( rng R30 )) & R28 = R31 & R31 is_vertex_seq_of R30) implies R28 is_vertex_seq_of R30)))))))
proof
let R22 being Graph;
let R24 being (Vertex of R22);
let R25 being (Vertex of R22);
let R28 being (FinSequence of (the carrier of R22));
let R30 being (Path of ( AddNewEdge (R24 , R25) ));
let R31 being (FinSequence of (the carrier of ( AddNewEdge (R24 , R25) )));
set D175 = ( AddNewEdge (R24 , R25) );
set D176 = (the Source of R22);
set D177 = (the Target of R22);
set D178 = (the carrier' of R22);
set D179 = (the Source of D175);
set D180 = (the Target of D175);
L920: (the carrier' of D175) = ( D178 \/ { D178 } ) by L676;
L921: ( rng R30 ) c= ( D178 \/ { D178 } ) by L920 , FINSEQ_1:def 4;
assume L922: (not (the carrier' of R22) in ( rng R30 ));
L923: ( rng R30 ) c= D178
proof
let C149 being set;
assume L924: C149 in ( rng R30 );
L925: (C149 in D178 or C149 in { D178 }) by L924 , L921 , XBOOLE_0:def 3;
thus L926: thesis by L925 , L922 , L924 , TARSKI:def 1;
end;
assume that
L927: R28 = R31
and
L928: R31 is_vertex_seq_of R30;
thus L929: R28 is_vertex_seq_of R30
proof
thus L930: ( len R28 ) = ( ( len R30 ) + 1 ) by L927 , L928 , GRAPH_2:def 6;
let C150 being (Element of ( NAT ));
assume that
L931: 1 <= C150
and
L932: C150 <= ( len R30 );
set D181 = ( R30 . C150 );
reconsider D182 = ( R31 /. C150 ) , D183 = ( R31 /. ( C150 + 1 ) ) as (Vertex of D175);
L933: ( R30 . C150 ) joins ( R31 /. C150 ) , ( R31 /. ( C150 + 1 ) ) by L928 , L931 , L932 , GRAPH_2:def 6;
L934: ((( D179 . D181 ) = D182 & ( D180 . D181 ) = D183) or (( D179 . D181 ) = D183 & ( D180 . D181 ) = D182)) by L933 , GRAPH_1:def 12;
reconsider D184 = ( R28 /. C150 ) , D185 = ( R28 /. ( C150 + 1 ) ) as (Vertex of R22);
L935: (1 <= ( C150 + 1 ) & ( C150 + 1 ) <= ( len R28 )) by L930 , L932 , NAT_1:11 , XREAL_1:6;
L936: ( C150 + 1 ) in ( dom R28 ) by L935 , FINSEQ_3:25;
L937: D185 = ( R28 . ( C150 + 1 ) ) by L936 , PARTFUN1:def 6
.= D183 by L927 , L936 , PARTFUN1:def 6;
L938: C150 in ( dom R30 ) by L931 , L932 , FINSEQ_3:25;
L939: D181 in ( rng R30 ) by L938 , FUNCT_1:def 3;
L940: (( D179 . D181 ) = ( D176 . D181 ) & ( D180 . D181 ) = ( D177 . D181 )) by L939 , L923 , L719;
L941: ( len R30 ) <= ( len R28 ) by L930 , NAT_1:11;
L942: C150 <= ( len R28 ) by L941 , L932 , XXREAL_0:2;
L943: C150 in ( dom R28 ) by L942 , L931 , FINSEQ_3:25;
L944: D184 = ( R28 . C150 ) by L943 , PARTFUN1:def 6
.= D182 by L927 , L943 , PARTFUN1:def 6;
thus L945: thesis by L944 , L934 , L940 , L937 , GRAPH_1:def 12;
end;

end;
registration
let C151 being  connected Graph;
let C152 , C153 being (Vertex of C151);
cluster ( AddNewEdge (C152 , C153) ) ->  connected;
coherence
proof
set D186 = ( AddNewEdge (C152 , C153) );
L930:
now
let C154 , C155 being (Vertex of D186);
reconsider D187 = C154 , D188 = C155 as (Vertex of C151) by L676;
assume L931: C154 <> C155;
consider C156 being (Chain of C151), C157 being (FinSequence of (the carrier of C151)) such that L932: C156 is non  empty and L933: C157 is_vertex_seq_of C156 and L934: (( C157 . 1 ) = D187 & ( C157 . ( len C157 ) ) = D188) by L931 , L283;
reconsider D189 = C157 as (FinSequence of (the carrier of D186)) by L676;
reconsider D190 = C156 as (Chain of D186) by L747;
take D191 = D190;
take D192 = D189;
thus L935: D191 is non  empty by L932;
thus L936: D192 is_vertex_seq_of D191 by L933 , L733;
thus L937: (( D192 . 1 ) = C154 & ( D192 . ( len D192 ) ) = C155) by L934;
end;
thus L938: thesis by L930 , L283;
end;
end;
theorem
L940: (for R13 being set holds (for R32 being  finite Graph holds (for R33 being (Vertex of R32) holds (for R34 being (Vertex of R32) holds (for R35 being (Vertex of R32) holds (for R37 being (Vertex of ( AddNewEdge (R34 , R35) )) holds ((R37 = R33 & R34 <> R35 & (R33 = R34 or R33 = R35) & (the carrier' of R32) in R13) implies ( Degree (R37 , R13) ) = ( ( Degree (R33 , R13) ) + 1 ))))))))
proof
let R13 being set;
let R32 being  finite Graph;
let R33 being (Vertex of R32);
let R34 being (Vertex of R32);
let R35 being (Vertex of R32);
let R37 being (Vertex of ( AddNewEdge (R34 , R35) ));
assume that
L941: R37 = R33
and
L942: R34 <> R35
and
L943: (R33 = R34 or R33 = R35)
and
L944: (the carrier' of R32) in R13;
set D193 = (the carrier' of R32);
per cases  by L943;
suppose L945: R33 = R34;

L946: (( Edges_In (R37 , R13) ) = ( Edges_In (R33 , R13) ) & ( Edges_Out (R37 , R13) ) = ( ( Edges_Out (R33 , R13) ) \/ { D193 } )) by L945 , L941 , L942 , L944 , L757 , L797;
thus L947: ( Degree (R37 , R13) ) = ( ( card ( Edges_In (R33 , R13) ) ) + ( ( card ( Edges_Out (R33 , R13) ) ) + ( card { D193 } ) ) ) by L946 , L941 , L944 , L945 , L797 , CARD_2:40
.= ( ( ( card ( Edges_In (R33 , R13) ) ) + ( card ( Edges_Out (R33 , R13) ) ) ) + ( card { D193 } ) )
.= ( ( Degree (R33 , R13) ) + 1 ) by CARD_1:30;
end;
suppose L948: R33 = R35;

L949: (( Edges_Out (R37 , R13) ) = ( Edges_Out (R33 , R13) ) & ( Edges_In (R37 , R13) ) = ( ( Edges_In (R33 , R13) ) \/ { D193 } )) by L948 , L941 , L942 , L944 , L777 , L831;
thus L950: ( Degree (R37 , R13) ) = ( ( ( card ( Edges_In (R33 , R13) ) ) + ( card { D193 } ) ) + ( card ( Edges_Out (R33 , R13) ) ) ) by L949 , L941 , L944 , L948 , L831 , CARD_2:40
.= ( ( ( card ( Edges_In (R33 , R13) ) ) + ( card ( Edges_Out (R33 , R13) ) ) ) + ( card { D193 } ) )
.= ( ( Degree (R33 , R13) ) + 1 ) by CARD_1:30;
end;
end;
theorem
L952: (for R13 being set holds (for R32 being  finite Graph holds (for R33 being (Vertex of R32) holds (for R34 being (Vertex of R32) holds (for R35 being (Vertex of R32) holds (for R37 being (Vertex of ( AddNewEdge (R34 , R35) )) holds ((R37 = R33 & R33 <> R34 & R33 <> R35) implies ( Degree (R37 , R13) ) = ( Degree (R33 , R13) ))))))))
proof
let R13 being set;
let R32 being  finite Graph;
let R33 being (Vertex of R32);
let R34 being (Vertex of R32);
let R35 being (Vertex of R32);
let R37 being (Vertex of ( AddNewEdge (R34 , R35) ));
assume that
L953: R37 = R33
and
L954: R33 <> R34
and
L955: R33 <> R35;
thus L956: ( Degree (R37 , R13) ) = ( ( card ( Edges_In (R33 , R13) ) ) + ( card ( Edges_Out (R37 , R13) ) ) ) by L953 , L955 , L865
.= ( Degree (R33 , R13) ) by L953 , L954 , L885;
end;
begin
L957: (for B88 being  finite Graph holds (for B89 being  cyclic (Path of B88) holds (for B90 being (FinSequence of (the carrier of B88)) holds (for B91 being (Vertex of B88) holds ((B90 is_vertex_seq_of B89 & B91 in ( rng B90 )) implies ( Degree (B91 , ( rng B89 )) ) is  even)))))
proof
let C158 being  finite Graph;
let C159 being  cyclic (Path of C158);
let C160 being (FinSequence of (the carrier of C158));
let C161 being (Vertex of C158);
assume that
L958: C160 is_vertex_seq_of C159
and
L959: C161 in ( rng C160 );
set D194 = (the Source of C158);
set D195 = (the Target of C158);
per cases ;
suppose L960: C159 is  empty;

reconsider D196 = ( rng C159 ) as  empty set by L960;
L961: ( Degree (C161 , D196) ) = ( 2 * ( 0 ) );
thus L962: thesis by L961;
end;
suppose L963: C159 is non  empty;

set D197 = { B92 where B92 is (Element of ( NAT )) : (1 <= B92 & B92 <= ( len C159 ) & ( C160 . B92 ) = C161) };
L964: D197 c= ( Seg ( len C159 ) )
proof
let C162 being set;
assume L965: C162 in D197;
L966: (ex B93 being (Element of ( NAT )) st (C162 = B93 & 1 <= B93 & B93 <= ( len C159 ) & ( C160 . B93 ) = C161)) by L965;
thus L967: thesis by L966 , FINSEQ_1:1;
end;
reconsider D198 = ( rng C159 ) as non  empty set by L963;
L968: ( len C160 ) = ( ( len C159 ) + 1 ) by L958 , GRAPH_2:def 6;
set D199 = [: { 1 } , ( Edges_Out (C161 , D198) ) :];
set D200 = [: { ( 0 ) } , ( Edges_In (C161 , D198) ) :];
L969: ( card D199 ) = ( ( card { 1 } ) * ( card ( Edges_Out (C161 , D198) ) ) ) by CARD_2:46
.= ( 1 * ( card ( Edges_Out (C161 , D198) ) ) ) by CARD_1:30
.= ( card ( Edges_Out (C161 , D198) ) );
L970: ( card D200 ) = ( ( card { ( 0 ) } ) * ( card ( Edges_In (C161 , D198) ) ) ) by CARD_2:46
.= ( 1 * ( card ( Edges_In (C161 , D198) ) ) ) by CARD_1:30
.= ( card ( Edges_In (C161 , D198) ) );
L971:
now
assume L972: ( D200 \/ D199 ) is  empty;
L973: D200 is  empty by L972;
L974: ( Degree (C161 , D198) ) = ( ( 0 ) + ( 0 ) ) by L973 , L970 , L969 , L972;
thus L975: contradiction by L974 , L958 , L959 , L963 , L597;
end;
reconsider D201 = ( D200 \/ D199 ) as non  empty set by L971;
L976: D200 misses D199
proof
assume L977: (not thesis);
consider C163 being set such that L978: C163 in ( D200 /\ D199 ) by L977 , XBOOLE_0:4;
L979: C163 in D199 by L978 , XBOOLE_0:def 4;
consider C164 , C165 being set such that L980: C164 in { 1 } and L981: C165 in ( Edges_Out (C161 , D198) ) and L982: C163 = [ C164 , C165 ] by L979 , ZFMISC_1:def 2;
L983: C164 = 1 by L980 , TARSKI:def 1;
L984: C163 in D200 by L978 , XBOOLE_0:def 4;
consider C166 , C167 being set such that L985: C166 in { ( 0 ) } and L986: C167 in ( Edges_In (C161 , D198) ) and L987: C163 = [ C166 , C167 ] by L984 , ZFMISC_1:def 2;
L988: C166 = ( 0 ) by L985 , TARSKI:def 1;
thus L989: contradiction by L988 , L987 , L982 , L983 , XTUPLE_0:1;
end;
reconsider D202 = D197 as (Subset of ( Seg ( len C159 ) )) by L964;
L990: D198 c= (the carrier' of C158) by FINSEQ_1:def 4;
reconsider D203 = C158 as non  void  finite Graph by L990;
reconsider D204 = C160 as (FinSequence of (the carrier of D203));
L991: ( D204 . 1 ) = ( C160 . ( len C160 ) ) by L958 , MSSCYC_1:6;
L992:
now
L993: ( ( 0 ) + 1 ) <= ( len C159 ) by L963 , NAT_1:13;
consider C168 being set such that L994: C168 in ( dom C160 ) and L995: ( C160 . C168 ) = C161 by L959 , FUNCT_1:def 3;
reconsider D205 = C168 as (Element of ( NAT )) by L994;
L996: D205 <= ( len C160 ) by L994 , FINSEQ_3:25;
L997: 1 <= D205 by L994 , FINSEQ_3:25;
thus L998: D202 is non  empty
proof
per cases  by L996 , XXREAL_0:1;
suppose L999: D205 = ( len C160 );

L1000: 1 in D202 by L999 , L991 , L995 , L993;
thus L1001: thesis by L1000;
end;
suppose L1002: D205 < ( len C160 );

L1003: D205 <= ( len C159 ) by L1002 , L968 , NAT_1:13;
L1004: D205 in D202 by L1003 , L995 , L997;
thus L1005: thesis by L1004;
end;
end;

end;
reconsider D206 = D202 as  finite non  empty set by L992;
set D207 = [: 2 , D206 :];
L999:
now
defpred S8[ (Element of D207) , (Element of D201) , (Element of ( NAT )) ] means ($1 = [ 1 , $3 ] & ((( C160 . $3 ) = ( D194 . ( C159 . $3 ) ) & $2 = [ 1 , ( C159 . $3 ) ]) or (( C160 . $3 ) = ( D195 . ( C159 . $3 ) ) & $2 = [ ( 0 ) , ( C159 . $3 ) ] & ( D195 . ( C159 . $3 ) ) <> ( D194 . ( C159 . $3 ) ))));
defpred S9[ (Element of D207) , (Element of D201) , (Element of ( NAT )) ] means ($1 = [ ( 0 ) , $3 ] & ((ex B94 being (Element of ( NAT )) st (1 <= B94 & $3 = ( B94 + 1 ) & ((( C160 . $3 ) = ( D195 . ( C159 . B94 ) ) & $2 = [ ( 0 ) , ( C159 . B94 ) ]) or (( C160 . $3 ) = ( D194 . ( C159 . B94 ) ) & $2 = [ 1 , ( C159 . B94 ) ] & ( D195 . ( C159 . B94 ) ) <> ( D194 . ( C159 . B94 ) ))))) or ($3 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & $2 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & $2 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))))));
take D208 = { [ B95 , B96 ] where B95 is (Element of D207) , B96 is (Element of D201) : (ex B97 being (Element of ( NAT )) st (1 <= B97 & B97 <= ( len C159 ) & (S9[ B95 , B96 , B97 ] or S8[ B95 , B96 , B97 ]))) };
thus L1000: (for B98 being set holds (B98 in D207 implies (ex B99 being set st (B99 in ( D200 \/ D199 ) & [ B98 , B99 ] in D208))))
proof
L1001: 1 in { 1 } by TARSKI:def 1;
let C169 being set;
L1002: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
assume L1003: C169 in D207;
consider C170 , C171 being set such that L1004: [ C170 , C171 ] = C169 by L1003 , RELAT_1:def 1;
reconsider D209 = C169 as (Element of D207) by L1003;
L1005: C170 in 2 by L1003 , L1004 , ZFMISC_1:87;
L1006: C171 in D206 by L1003 , L1004 , ZFMISC_1:87;
consider C172 being (Element of ( NAT )) such that L1007: C171 = C172 and L1008: 1 <= C172 and L1009: C172 <= ( len C159 ) and L1010: ( C160 . C172 ) = C161 by L1006;
per cases  by L1005 , CARD_1:50 , TARSKI:def 2;
suppose L1011: C170 = ( 0 );

thus L1012: (ex B100 being set st (B100 in ( D200 \/ D199 ) & [ C169 , B100 ] in D208))
proof
per cases  by L1008 , XXREAL_0:1;
suppose L1013: 1 < C172;

consider C173 being (Element of ( NAT )) such that L1014: C172 = ( 1 + C173 ) and L1015: 1 <= C173 by L1013 , FINSEQ_4:84;
L1016: C173 <= C172 by L1014 , NAT_1:11;
L1017: C173 <= ( len C159 ) by L1016 , L1009 , XXREAL_0:2;
L1018: C173 in ( dom C159 ) by L1017 , L1015 , FINSEQ_3:25;
reconsider D210 = ( C159 . C173 ) as (Element of D198) by L1018 , FUNCT_1:def 3;
L1019: D210 in D198;
thus L1020: thesis
proof
per cases  by L958 , L1015 , L1017 , L243;
suppose L1021: ( D195 . ( C159 . C173 ) ) = ( C160 . ( C173 + 1 ) );

take D211 = [ ( 0 ) , ( C159 . C173 ) ];
L1022: D210 in ( Edges_In (C161 , D198) ) by L990 , L1010 , L1014 , L1019 , L1021 , L420;
L1023: D211 in D200 by L1022 , L1002 , ZFMISC_1:87;
thus L1024: D211 in ( D200 \/ D199 ) by L1023 , XBOOLE_0:def 3;
reconsider D212 = D211 as (Element of D201) by L1023 , XBOOLE_0:def 3;
L1025: S9[ D209 , D212 , C172 ] by L1004 , L1007 , L1011 , L1014 , L1015 , L1021;
thus L1026: thesis by L1025 , L1008 , L1009;
end;
suppose L1027: (( D194 . ( C159 . C173 ) ) = ( C160 . ( C173 + 1 ) ) & ( D195 . ( C159 . C173 ) ) <> ( D194 . ( C159 . C173 ) ));

take D213 = [ 1 , ( C159 . C173 ) ];
L1028: D210 in ( Edges_Out (C161 , D198) ) by L990 , L1010 , L1014 , L1019 , L1027 , L431;
L1029: D213 in D199 by L1028 , L1001 , ZFMISC_1:87;
thus L1030: D213 in ( D200 \/ D199 ) by L1029 , XBOOLE_0:def 3;
reconsider D214 = D213 as (Element of D201) by L1029 , XBOOLE_0:def 3;
L1031: S9[ D209 , D214 , C172 ] by L1004 , L1007 , L1011 , L1014 , L1015 , L1027;
thus L1032: thesis by L1031 , L1008 , L1009;
end;
end;

end;
suppose L1021: C172 = 1;

L1022: 1 <= ( len C159 ) by L1008 , L1009 , XXREAL_0:2;
L1023: ( len C159 ) in ( dom C159 ) by L1022 , FINSEQ_3:25;
reconsider D215 = ( C159 . ( len C159 ) ) as (Element of D198) by L1023 , FUNCT_1:def 3;
L1024: 1 <= ( len C159 ) by L1008 , L1009 , XXREAL_0:2;
L1025: (D215 in D198 & ( C160 . 1 ) = ( C160 . ( ( len C159 ) + 1 ) )) by L958 , L968 , MSSCYC_1:6;
thus L1026: thesis
proof
per cases  by L958 , L1022 , L243;
suppose L1027: ( D195 . ( C159 . ( len C159 ) ) ) = ( C160 . ( ( len C159 ) + 1 ) );

take D216 = [ ( 0 ) , ( C159 . ( len C159 ) ) ];
L1028: D215 in ( Edges_In (C161 , D198) ) by L990 , L1010 , L1021 , L1025 , L1027 , L420;
L1029: D216 in D200 by L1028 , L1002 , ZFMISC_1:87;
thus L1030: D216 in ( D200 \/ D199 ) by L1029 , XBOOLE_0:def 3;
reconsider D217 = D216 as (Element of D201) by L1029 , XBOOLE_0:def 3;
L1031: S9[ D209 , D217 , 1 ] by L958 , L968 , L1004 , L1007 , L1011 , L1021 , L1027 , MSSCYC_1:6;
thus L1032: thesis by L1031 , L1024;
end;
suppose L1033: (( D194 . ( C159 . ( len C159 ) ) ) = ( C160 . ( ( len C159 ) + 1 ) ) & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ));

take D218 = [ 1 , ( C159 . ( len C159 ) ) ];
L1034: D215 in ( Edges_Out (C161 , D198) ) by L990 , L1010 , L1021 , L1025 , L1033 , L431;
L1035: D218 in D199 by L1034 , L1001 , ZFMISC_1:87;
thus L1036: D218 in ( D200 \/ D199 ) by L1035 , XBOOLE_0:def 3;
reconsider D219 = D218 as (Element of D201) by L1035 , XBOOLE_0:def 3;
L1037: S9[ D209 , D219 , 1 ] by L958 , L968 , L1004 , L1007 , L1011 , L1021 , L1033 , MSSCYC_1:6;
thus L1038: thesis by L1037 , L1024;
end;
end;

end;
end;

end;
suppose L1013: C170 = 1;

L1014: C172 in ( dom C159 ) by L1008 , L1009 , FINSEQ_3:25;
reconsider D220 = ( C159 . C172 ) as (Element of D198) by L1014 , FUNCT_1:def 3;
L1015: D220 in D198;
thus L1016: (ex B101 being set st (B101 in ( D200 \/ D199 ) & [ C169 , B101 ] in D208))
proof
per cases  by L958 , L1008 , L1009 , L243;
suppose L1017: ( C160 . C172 ) = ( D194 . ( C159 . C172 ) );

take D221 = [ 1 , ( C159 . C172 ) ];
L1018: D220 in ( Edges_Out (C161 , D198) ) by L990 , L1010 , L1015 , L1017 , L431;
L1019: D221 in D199 by L1018 , L1001 , ZFMISC_1:87;
thus L1020: D221 in ( D200 \/ D199 ) by L1019 , XBOOLE_0:def 3;
reconsider D222 = D221 as (Element of D201) by L1019 , XBOOLE_0:def 3;
L1021: S8[ D209 , D222 , C172 ] by L1004 , L1007 , L1013 , L1017;
thus L1022: thesis by L1021 , L1008 , L1009;
end;
suppose L1023: (( C160 . C172 ) = ( D195 . ( C159 . C172 ) ) & ( D195 . ( C159 . C172 ) ) <> ( D194 . ( C159 . C172 ) ));

take D223 = [ ( 0 ) , ( C159 . C172 ) ];
L1024: D220 in ( Edges_In (C161 , D198) ) by L990 , L1010 , L1015 , L1023 , L420;
L1025: D223 in D200 by L1024 , L1002 , ZFMISC_1:87;
thus L1026: D223 in ( D200 \/ D199 ) by L1025 , XBOOLE_0:def 3;
reconsider D224 = D223 as (Element of D201) by L1025 , XBOOLE_0:def 3;
L1027: S8[ D209 , D224 , C172 ] by L1004 , L1007 , L1013 , L1023;
thus L1028: thesis by L1027 , L1008 , L1009;
end;
end;

end;
end;

thus L1018: (for B102 being set holds (B102 in ( D200 \/ D199 ) implies (ex B103 being set st (B103 in D207 & [ B103 , B102 ] in D208))))
proof
let C174 being set;
assume L1019: C174 in ( D200 \/ D199 );
reconsider D225 = C174 as (Element of D201) by L1019;
per cases  by L1019 , XBOOLE_0:def 3;
suppose L1020: C174 in D200;

consider C175 , C176 being set such that L1021: [ C175 , C176 ] = C174 by L1020 , RELAT_1:def 1;
L1022: C176 in ( Edges_In (C161 , D198) ) by L1020 , L1021 , ZFMISC_1:87;
L1023: ( D195 . C176 ) = C161 by L1022 , L420;
L1024: C176 in D198 by L1022 , L420;
consider C177 being set such that L1025: C177 in ( dom C159 ) and L1026: C176 = ( C159 . C177 ) by L1024 , FUNCT_1:def 3;
reconsider D226 = C177 as (Element of ( NAT )) by L1025;
L1027: ( dom C159 ) = ( Seg ( len C159 ) ) by FINSEQ_1:def 3;
L1028: 1 <= D226 by L1027 , L1025 , FINSEQ_1:1;
L1029: 1 in 2 by CARD_1:50 , TARSKI:def 2;
L1030: ( 0 ) in 2 by CARD_1:50 , TARSKI:def 2;
L1031: D226 <= ( len C159 ) by L1025 , L1027 , FINSEQ_1:1;
L1032: C175 in { ( 0 ) } by L1020 , L1021 , ZFMISC_1:87;
L1033: C175 = ( 0 ) by L1032 , TARSKI:def 1;
thus L1034: (ex B104 being set st (B104 in D207 & [ B104 , C174 ] in D208))
proof
per cases  by L958 , L1028 , L1031 , L243;
suppose L1035: ( C160 . ( D226 + 1 ) ) = ( D195 . ( C159 . D226 ) );

thus L1036: thesis
proof
per cases  by L1031 , XXREAL_0:1;
suppose L1037: D226 = ( len C159 );

take D227 = [ ( 0 ) , 1 ];
L1038: ( C160 . 1 ) = C161 by L958 , L968 , L1023 , L1026 , L1035 , L1037 , MSSCYC_1:6;
L1039: 1 in D206 by L1038 , L1028 , L1037;
thus L1040: D227 in D207 by L1039 , L1030 , ZFMISC_1:87;
reconsider D228 = D227 as (Element of D207) by L1030 , L1039 , ZFMISC_1:87;
L1041: (1 <= ( len C159 ) & S9[ D228 , D225 , 1 ]) by L958 , L968 , L1021 , L1032 , L1025 , L1026 , L1027 , L1035 , L1037 , FINSEQ_1:1 , MSSCYC_1:6 , TARSKI:def 1;
thus L1042: thesis by L1041;
end;
suppose L1043: D226 < ( len C159 );

take D229 = [ ( 0 ) , ( D226 + 1 ) ];
L1044: (1 <= ( D226 + 1 ) & ( D226 + 1 ) <= ( len C159 )) by L1043 , NAT_1:11 , NAT_1:13;
L1045: ( D226 + 1 ) in D206 by L1044 , L1023 , L1026 , L1035;
thus L1046: D229 in D207 by L1045 , L1030 , ZFMISC_1:87;
reconsider D230 = D229 as (Element of D207) by L1030 , L1045 , ZFMISC_1:87;
L1047: S9[ D230 , D225 , ( D226 + 1 ) ] by L1021 , L1033 , L1026 , L1028 , L1035;
thus L1048: thesis by L1047 , L1044;
end;
end;

end;
suppose L1037: (( C160 . D226 ) = ( D195 . ( C159 . D226 ) ) & ( D195 . ( C159 . D226 ) ) <> ( D194 . ( C159 . D226 ) ));

take D231 = [ 1 , D226 ];
L1038: D226 in D206 by L1023 , L1026 , L1028 , L1031 , L1037;
thus L1039: D231 in D207 by L1038 , L1029 , ZFMISC_1:87;
reconsider D232 = D231 as (Element of D207) by L1029 , L1038 , ZFMISC_1:87;
L1040: S8[ D232 , D225 , D226 ] by L1021 , L1032 , L1026 , L1037 , TARSKI:def 1;
thus L1041: thesis by L1040 , L1028 , L1031;
end;
end;

end;
suppose L1035: C174 in D199;

consider C178 , C179 being set such that L1036: [ C178 , C179 ] = C174 by L1035 , RELAT_1:def 1;
L1037: C179 in ( Edges_Out (C161 , D198) ) by L1035 , L1036 , ZFMISC_1:87;
L1038: ( D194 . C179 ) = C161 by L1037 , L431;
L1039: C179 in D198 by L1037 , L431;
consider C180 being set such that L1040: C180 in ( dom C159 ) and L1041: C179 = ( C159 . C180 ) by L1039 , FUNCT_1:def 3;
reconsider D233 = C180 as (Element of ( NAT )) by L1040;
L1042: ( dom C159 ) = ( Seg ( len C159 ) ) by FINSEQ_1:def 3;
L1043: 1 <= D233 by L1042 , L1040 , FINSEQ_1:1;
L1044: 1 in 2 by CARD_1:50 , TARSKI:def 2;
L1045: ( 0 ) in 2 by CARD_1:50 , TARSKI:def 2;
L1046: D233 <= ( len C159 ) by L1040 , L1042 , FINSEQ_1:1;
L1047: C178 in { 1 } by L1035 , L1036 , ZFMISC_1:87;
L1048: C178 = 1 by L1047 , TARSKI:def 1;
thus L1049: (ex B105 being set st (B105 in D207 & [ B105 , C174 ] in D208))
proof
per cases  by L958 , L1043 , L1046 , L243;
suppose L1050: (( C160 . ( D233 + 1 ) ) = ( D194 . ( C159 . D233 ) ) & ( D195 . ( C159 . D233 ) ) <> ( D194 . ( C159 . D233 ) ));

thus L1051: thesis
proof
per cases  by L1046 , XXREAL_0:1;
suppose L1052: D233 = ( len C159 );

take D234 = [ ( 0 ) , 1 ];
L1053: ( C160 . 1 ) = C161 by L958 , L968 , L1038 , L1041 , L1050 , L1052 , MSSCYC_1:6;
L1054: 1 in D206 by L1053 , L1043 , L1052;
thus L1055: D234 in D207 by L1054 , L1045 , ZFMISC_1:87;
reconsider D235 = D234 as (Element of D207) by L1045 , L1054 , ZFMISC_1:87;
L1056: (1 <= ( len C159 ) & S9[ D235 , D225 , 1 ]) by L958 , L968 , L1036 , L1047 , L1040 , L1041 , L1042 , L1050 , L1052 , FINSEQ_1:1 , MSSCYC_1:6 , TARSKI:def 1;
thus L1057: thesis by L1056;
end;
suppose L1058: D233 < ( len C159 );

take D236 = [ ( 0 ) , ( D233 + 1 ) ];
L1059: (1 <= ( D233 + 1 ) & ( D233 + 1 ) <= ( len C159 )) by L1058 , NAT_1:11 , NAT_1:13;
L1060: ( D233 + 1 ) in D206 by L1059 , L1038 , L1041 , L1050;
thus L1061: D236 in D207 by L1060 , L1045 , ZFMISC_1:87;
reconsider D237 = D236 as (Element of D207) by L1045 , L1060 , ZFMISC_1:87;
L1062: S9[ D237 , D225 , ( D233 + 1 ) ] by L1036 , L1048 , L1041 , L1043 , L1050;
thus L1063: thesis by L1062 , L1059;
end;
end;

end;
suppose L1052: ( C160 . D233 ) = ( D194 . ( C159 . D233 ) );

take D238 = [ 1 , D233 ];
L1053: D233 in D206 by L1038 , L1041 , L1043 , L1046 , L1052;
thus L1054: D238 in D207 by L1053 , L1044 , ZFMISC_1:87;
reconsider D239 = D238 as (Element of D207) by L1044 , L1053 , ZFMISC_1:87;
L1055: S8[ D239 , D225 , D233 ] by L1036 , L1047 , L1041 , L1052 , TARSKI:def 1;
thus L1056: thesis by L1055 , L1043 , L1046;
end;
end;

end;
end;

thus L1051: (for B106 , B107 , B108 , B109 being set holds (([ B106 , B107 ] in D208 & [ B108 , B109 ] in D208) implies (B106 = B108 iff B107 = B109)))
proof
let C181 , C182 , C183 , C184 being set;
assume that
L1052: [ C181 , C182 ] in D208
and
L1053: [ C183 , C184 ] in D208;
consider C185 being (Element of D207), C186 being (Element of D201) such that L1054: [ C181 , C182 ] = [ C185 , C186 ] and L1055: (ex B110 being (Element of ( NAT )) st (1 <= B110 & B110 <= ( len C159 ) & (S9[ C185 , C186 , B110 ] or S8[ C185 , C186 , B110 ]))) by L1052;
consider C187 being (Element of D207), C188 being (Element of D201) such that L1056: [ C183 , C184 ] = [ C187 , C188 ] and L1057: (ex B111 being (Element of ( NAT )) st (1 <= B111 & B111 <= ( len C159 ) & (S9[ C187 , C188 , B111 ] or S8[ C187 , C188 , B111 ]))) by L1053;
L1058: C181 = C185 by L1054 , XTUPLE_0:1;
L1059: C182 = C186 by L1054 , XTUPLE_0:1;
consider C189 being (Element of ( NAT )) such that L1060: 1 <= C189 and L1061: C189 <= ( len C159 ) and L1062: (S9[ C187 , C188 , C189 ] or S8[ C187 , C188 , C189 ]) by L1057;
consider C190 being (Element of ( NAT )) such that L1063: 1 <= C190 and L1064: C190 <= ( len C159 ) and L1065: (S9[ C185 , C186 , C190 ] or S8[ C185 , C186 , C190 ]) by L1055;
L1066: C183 = C187 by L1056 , XTUPLE_0:1;
thus L1067: (C181 = C183 implies C182 = C184)
proof
assume L1068: C181 = C183;
per cases  by L1065 , L1062;
suppose L1069: (S9[ C185 , C186 , C190 ] & S9[ C187 , C188 , C189 ]);

L1070: C190 = C189 by L1069 , L1058 , L1066 , L1068 , XTUPLE_0:1;
thus L1071: C182 = C184
proof
per cases  by L1069;
suppose L1072: ((ex B112 being (Element of ( NAT )) st (1 <= B112 & C190 = ( B112 + 1 ) & ((( C160 . C190 ) = ( D195 . ( C159 . B112 ) ) & C186 = [ ( 0 ) , ( C159 . B112 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . B112 ) ) & C186 = [ 1 , ( C159 . B112 ) ] & ( D195 . ( C159 . B112 ) ) <> ( D194 . ( C159 . B112 ) ))))) & (ex B113 being (Element of ( NAT )) st (1 <= B113 & C189 = ( B113 + 1 ) & ((( C160 . C189 ) = ( D195 . ( C159 . B113 ) ) & C188 = [ ( 0 ) , ( C159 . B113 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . B113 ) ) & C188 = [ 1 , ( C159 . B113 ) ] & ( D195 . ( C159 . B113 ) ) <> ( D194 . ( C159 . B113 ) ))))));

thus L1073: thesis by L1072 , L1056 , L1059 , L1070 , XTUPLE_0:1;
end;
suppose L1074: ((ex B114 being (Element of ( NAT )) st (1 <= B114 & C190 = ( B114 + 1 ) & ((( C160 . C190 ) = ( D195 . ( C159 . B114 ) ) & C186 = [ ( 0 ) , ( C159 . B114 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . B114 ) ) & C186 = [ 1 , ( C159 . B114 ) ] & ( D195 . ( C159 . B114 ) ) <> ( D194 . ( C159 . B114 ) ))))) & C189 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C188 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C188 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))));

thus L1075: thesis by L1074 , L1070;
end;
suppose L1076: (C190 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C186 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C186 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))) & (ex B115 being (Element of ( NAT )) st (1 <= B115 & C189 = ( B115 + 1 ) & ((( C160 . C189 ) = ( D195 . ( C159 . B115 ) ) & C188 = [ ( 0 ) , ( C159 . B115 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . B115 ) ) & C188 = [ 1 , ( C159 . B115 ) ] & ( D195 . ( C159 . B115 ) ) <> ( D194 . ( C159 . B115 ) ))))));

thus L1077: thesis by L1076 , L1070;
end;
suppose L1078: (C190 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C186 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C186 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))) & C189 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C188 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C188 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))));

thus L1079: thesis by L1078 , L1056 , L1059 , XTUPLE_0:1;
end;
end;

end;
suppose L1072: (S9[ C185 , C186 , C190 ] & S8[ C187 , C188 , C189 ]);

thus L1073: thesis by L1072 , L1058 , L1066 , L1068 , XTUPLE_0:1;
end;
suppose L1074: (S8[ C185 , C186 , C190 ] & S9[ C187 , C188 , C189 ]);

thus L1075: thesis by L1074 , L1058 , L1066 , L1068 , XTUPLE_0:1;
end;
suppose L1076: (S8[ C185 , C186 , C190 ] & S8[ C187 , C188 , C189 ]);

L1077: C190 = C189 by L1076 , L1058 , L1066 , L1068 , XTUPLE_0:1;
thus L1078: thesis by L1077 , L1054 , L1056 , L1076 , XTUPLE_0:1;
end;
end;

L1080: C184 = C188 by L1056 , XTUPLE_0:1;
thus L1081: (C182 = C184 implies C181 = C183)
proof
assume L1082: C182 = C184;
per cases  by L1065 , L1062;
suppose L1083: (S9[ C185 , C186 , C190 ] & S9[ C187 , C188 , C189 ]);

thus L1084: C181 = C183
proof
per cases  by L1083;
suppose L1085: ((ex B116 being (Element of ( NAT )) st (1 <= B116 & C190 = ( B116 + 1 ) & ((( C160 . C190 ) = ( D195 . ( C159 . B116 ) ) & C186 = [ ( 0 ) , ( C159 . B116 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . B116 ) ) & C186 = [ 1 , ( C159 . B116 ) ] & ( D195 . ( C159 . B116 ) ) <> ( D194 . ( C159 . B116 ) ))))) & (ex B117 being (Element of ( NAT )) st (1 <= B117 & C189 = ( B117 + 1 ) & ((( C160 . C189 ) = ( D195 . ( C159 . B117 ) ) & C188 = [ ( 0 ) , ( C159 . B117 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . B117 ) ) & C188 = [ 1 , ( C159 . B117 ) ] & ( D195 . ( C159 . B117 ) ) <> ( D194 . ( C159 . B117 ) ))))));

consider C191 being (Element of ( NAT )) such that L1086: 1 <= C191 and L1087: C189 = ( C191 + 1 ) and L1088: ((( C160 . C189 ) = ( D195 . ( C159 . C191 ) ) & C188 = [ ( 0 ) , ( C159 . C191 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . C191 ) ) & C188 = [ 1 , ( C159 . C191 ) ] & ( D195 . ( C159 . C191 ) ) <> ( D194 . ( C159 . C191 ) ))) by L1085;
L1089: C191 <= C189 by L1087 , NAT_1:12;
L1090: C191 <= ( len C159 ) by L1089 , L1061 , XXREAL_0:2;
consider C192 being (Element of ( NAT )) such that L1091: 1 <= C192 and L1092: C190 = ( C192 + 1 ) and L1093: ((( C160 . C190 ) = ( D195 . ( C159 . C192 ) ) & C186 = [ ( 0 ) , ( C159 . C192 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . C192 ) ) & C186 = [ 1 , ( C159 . C192 ) ] & ( D195 . ( C159 . C192 ) ) <> ( D194 . ( C159 . C192 ) ))) by L1085;
L1094: C192 <= C190 by L1092 , NAT_1:12;
L1095: C192 <= ( len C159 ) by L1094 , L1064 , XXREAL_0:2;
L1096: ( C159 . C192 ) = ( C159 . C191 ) by L1059 , L1080 , L1082 , L1093 , L1088 , XTUPLE_0:1;
L1097: C192 = C191 by L1096 , L1091 , L1086 , L1095 , L1090 , L52;
thus L1098: thesis by L1097 , L1054 , L1056 , L1083 , L1092 , L1087 , XTUPLE_0:1;
end;
suppose L1099: ((ex B118 being (Element of ( NAT )) st (1 <= B118 & C190 = ( B118 + 1 ) & ((( C160 . C190 ) = ( D195 . ( C159 . B118 ) ) & C186 = [ ( 0 ) , ( C159 . B118 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . B118 ) ) & C186 = [ 1 , ( C159 . B118 ) ] & ( D195 . ( C159 . B118 ) ) <> ( D194 . ( C159 . B118 ) ))))) & C189 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C188 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C188 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))));

L1100: 1 <= ( len C159 ) by L1063 , L1064 , XXREAL_0:2;
consider C193 being (Element of ( NAT )) such that L1101: 1 <= C193 and L1102: C190 = ( C193 + 1 ) and L1103: ((( C160 . C190 ) = ( D195 . ( C159 . C193 ) ) & C186 = [ ( 0 ) , ( C159 . C193 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . C193 ) ) & C186 = [ 1 , ( C159 . C193 ) ] & ( D195 . ( C159 . C193 ) ) <> ( D194 . ( C159 . C193 ) ))) by L1099;
L1104: C193 <= C190 by L1102 , NAT_1:12;
L1105: C193 <= ( len C159 ) by L1104 , L1064 , XXREAL_0:2;
L1106: ( C159 . C193 ) = ( C159 . ( len C159 ) ) by L1059 , L1080 , L1082 , L1099 , L1102 , XTUPLE_0:1;
L1107: ( ( len C159 ) + 1 ) <= ( len C159 ) by L1106 , L1064 , L1101 , L1102 , L1105 , L1100 , L52;
thus L1108: thesis by L1107 , NAT_1:13;
end;
suppose L1109: (C190 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C186 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C186 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))) & (ex B119 being (Element of ( NAT )) st (1 <= B119 & C189 = ( B119 + 1 ) & ((( C160 . C189 ) = ( D195 . ( C159 . B119 ) ) & C188 = [ ( 0 ) , ( C159 . B119 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . B119 ) ) & C188 = [ 1 , ( C159 . B119 ) ] & ( D195 . ( C159 . B119 ) ) <> ( D194 . ( C159 . B119 ) ))))));

L1110: 1 <= ( len C159 ) by L1060 , L1061 , XXREAL_0:2;
consider C194 being (Element of ( NAT )) such that L1111: 1 <= C194 and L1112: C189 = ( C194 + 1 ) and L1113: ((( C160 . C189 ) = ( D195 . ( C159 . C194 ) ) & C188 = [ ( 0 ) , ( C159 . C194 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . C194 ) ) & C188 = [ 1 , ( C159 . C194 ) ] & ( D195 . ( C159 . C194 ) ) <> ( D194 . ( C159 . C194 ) ))) by L1109;
L1114: C194 <= C189 by L1112 , NAT_1:12;
L1115: C194 <= ( len C159 ) by L1114 , L1061 , XXREAL_0:2;
L1116: ( C159 . C194 ) = ( C159 . ( len C159 ) ) by L1059 , L1080 , L1082 , L1109 , L1112 , XTUPLE_0:1;
L1117: ( ( len C159 ) + 1 ) <= ( len C159 ) by L1116 , L1061 , L1111 , L1112 , L1115 , L1110 , L52;
thus L1118: thesis by L1117 , NAT_1:13;
end;
suppose L1119: (C190 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C186 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C186 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))) & C189 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C188 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C188 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))));

thus L1120: thesis by L1119 , L1054 , L1056 , L1083 , XTUPLE_0:1;
end;
end;

end;
suppose L1085: (S9[ C185 , C186 , C190 ] & S8[ C187 , C188 , C189 ]);

thus L1086: C181 = C183
proof
per cases  by L1085;
suppose L1087: (ex B120 being (Element of ( NAT )) st (1 <= B120 & C190 = ( B120 + 1 ) & ((( C160 . C190 ) = ( D195 . ( C159 . B120 ) ) & C186 = [ ( 0 ) , ( C159 . B120 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . B120 ) ) & C186 = [ 1 , ( C159 . B120 ) ] & ( D195 . ( C159 . B120 ) ) <> ( D194 . ( C159 . B120 ) )))));

consider C195 being (Element of ( NAT )) such that L1088: 1 <= C195 and L1089: C190 = ( C195 + 1 ) and L1090: ((( C160 . C190 ) = ( D195 . ( C159 . C195 ) ) & C186 = [ ( 0 ) , ( C159 . C195 ) ]) or (( C160 . C190 ) = ( D194 . ( C159 . C195 ) ) & C186 = [ 1 , ( C159 . C195 ) ] & ( D195 . ( C159 . C195 ) ) <> ( D194 . ( C159 . C195 ) ))) by L1087;
L1091: C195 <= C190 by L1089 , NAT_1:12;
L1092: C195 <= ( len C159 ) by L1091 , L1064 , XXREAL_0:2;
L1093: ( C159 . C189 ) = ( C159 . C195 ) by L1059 , L1080 , L1082 , L1085 , L1088 , L1089 , XTUPLE_0:1;
L1094: C189 = C195 by L1093 , L1060 , L1061 , L1088 , L1092 , L52;
thus L1095: thesis by L1094 , L958 , L1059 , L1080 , L1060 , L1061 , L1082 , L1085 , L1089 , L243 , XTUPLE_0:1;
end;
suppose L1096: (C190 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C186 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C186 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))));

L1097: 1 <= ( len C159 ) by L1063 , L1064 , XXREAL_0:2;
L1098: ( C159 . C189 ) = ( C159 . ( len C159 ) ) by L1059 , L1080 , L1082 , L1085 , L1096 , XTUPLE_0:1;
L1099: C189 = ( len C159 ) by L1098 , L1060 , L1061 , L1097 , L52;
L1100: ((( C160 . C189 ) = ( D195 . ( C159 . C189 ) ) & ( C160 . ( C189 + 1 ) ) = ( D194 . ( C159 . C189 ) )) or (( C160 . C189 ) = ( D194 . ( C159 . C189 ) ) & ( C160 . ( C189 + 1 ) ) = ( D195 . ( C159 . C189 ) ))) by L958 , L1060 , L1061 , L243;
thus L1101: C181 = C183 by L1100 , L958 , L968 , L1059 , L1080 , L1082 , L1085 , L1096 , L1099 , MSSCYC_1:6 , XTUPLE_0:1;
end;
end;

end;
suppose L1087: (S8[ C185 , C186 , C190 ] & S9[ C187 , C188 , C189 ]);

thus L1088: C181 = C183
proof
per cases  by L1087;
suppose L1089: (ex B121 being (Element of ( NAT )) st (1 <= B121 & C189 = ( B121 + 1 ) & ((( C160 . C189 ) = ( D195 . ( C159 . B121 ) ) & C188 = [ ( 0 ) , ( C159 . B121 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . B121 ) ) & C188 = [ 1 , ( C159 . B121 ) ] & ( D195 . ( C159 . B121 ) ) <> ( D194 . ( C159 . B121 ) )))));

consider C196 being (Element of ( NAT )) such that L1090: 1 <= C196 and L1091: C189 = ( C196 + 1 ) and L1092: ((( C160 . C189 ) = ( D195 . ( C159 . C196 ) ) & C188 = [ ( 0 ) , ( C159 . C196 ) ]) or (( C160 . C189 ) = ( D194 . ( C159 . C196 ) ) & C188 = [ 1 , ( C159 . C196 ) ] & ( D195 . ( C159 . C196 ) ) <> ( D194 . ( C159 . C196 ) ))) by L1089;
L1093: C196 <= C189 by L1091 , NAT_1:12;
L1094: C196 <= ( len C159 ) by L1093 , L1061 , XXREAL_0:2;
L1095: ( C159 . C190 ) = ( C159 . C196 ) by L1059 , L1080 , L1082 , L1087 , L1090 , L1091 , XTUPLE_0:1;
L1096: C190 = C196 by L1095 , L1063 , L1064 , L1090 , L1094 , L52;
thus L1097: thesis by L1096 , L958 , L1059 , L1080 , L1063 , L1064 , L1082 , L1087 , L1091 , L243 , XTUPLE_0:1;
end;
suppose L1098: (C189 = 1 & ((( C160 . 1 ) = ( D195 . ( C159 . ( len C159 ) ) ) & C188 = [ ( 0 ) , ( C159 . ( len C159 ) ) ]) or (( C160 . 1 ) = ( D194 . ( C159 . ( len C159 ) ) ) & C188 = [ 1 , ( C159 . ( len C159 ) ) ] & ( D195 . ( C159 . ( len C159 ) ) ) <> ( D194 . ( C159 . ( len C159 ) ) ))));

L1099: 1 <= ( len C159 ) by L1063 , L1064 , XXREAL_0:2;
L1100: ( C159 . C190 ) = ( C159 . ( len C159 ) ) by L1059 , L1080 , L1082 , L1087 , L1098 , XTUPLE_0:1;
L1101: C190 = ( len C159 ) by L1100 , L1063 , L1064 , L1099 , L52;
L1102: ((( C160 . C190 ) = ( D195 . ( C159 . C190 ) ) & ( C160 . ( C190 + 1 ) ) = ( D194 . ( C159 . C190 ) )) or (( C160 . C190 ) = ( D194 . ( C159 . C190 ) ) & ( C160 . ( C190 + 1 ) ) = ( D195 . ( C159 . C190 ) ))) by L958 , L1063 , L1064 , L243;
thus L1103: C181 = C183 by L1102 , L958 , L968 , L1059 , L1080 , L1082 , L1087 , L1098 , L1101 , MSSCYC_1:6 , XTUPLE_0:1;
end;
end;

end;
suppose L1089: (S8[ C185 , C186 , C190 ] & S8[ C187 , C188 , C189 ]);

L1090: ( C159 . C190 ) = ( C159 . C189 ) by L1089 , L1059 , L1080 , L1082 , XTUPLE_0:1;
L1091: C190 = C189 by L1090 , L1063 , L1064 , L1060 , L1061 , L52;
thus L1092: thesis by L1091 , L1054 , L1056 , L1089 , XTUPLE_0:1;
end;
end;

end;

end;
L1052: D207 , ( D200 \/ D199 ) are_equipotent  by L999 , TARSKI:def 6;
L1053: ( card D207 ) = ( card ( D200 \/ D199 ) ) by L1052 , CARD_1:5
.= ( ( card D200 ) + ( card D199 ) ) by L976 , CARD_2:40;
L1054: ( Degree (C161 , D198) ) = ( ( card 2 ) * ( card D206 ) ) by L1053 , L970 , L969 , CARD_2:46
.= ( 2 * ( card D206 ) ) by CARD_1:def 2;
thus L1055: thesis by L1054;
end;
end;
theorem
L1057: (for R32 being  finite Graph holds (for R33 being (Vertex of R32) holds (for B122 being  cyclic (Path of R32) holds ( Degree (R33 , ( rng B122 )) ) is  even)))
proof
let R32 being  finite Graph;
let R33 being (Vertex of R32);
let C197 being  cyclic (Path of R32);
per cases ;
suppose L1058: C197 is  empty;

reconsider D240 = ( rng C197 ) as  empty set by L1058;
L1059: ( Degree (R33 , D240) ) = ( 2 * ( 0 ) );
thus L1060: thesis by L1059;
end;
suppose L1061: C197 is non  empty;

consider C198 being (FinSequence of (the carrier of R32)) such that L1062: C198 is_vertex_seq_of C197 by GRAPH_2:33;
thus L1063: ( Degree (R33 , ( rng C197 )) ) is  even
proof
per cases ;
suppose L1064: R33 in ( rng C198 );

thus L1065: thesis by L1064 , L1062 , L957;
end;
suppose L1066: (not R33 in ( rng C198 ));

L1067: ( Degree (R33 , ( rng C197 )) ) = ( 2 * ( 0 ) ) by L1066 , L1061 , L1062 , L597;
thus L1068: thesis by L1067;
end;
end;

end;
end;
theorem
L1065: (for R32 being  finite Graph holds (for R33 being (Vertex of R32) holds (for R36 being (FinSequence of (the carrier of R32)) holds (for B123 being (Path of R32) holds ((B123 is non  cyclic & R36 is_vertex_seq_of B123) implies (( Degree (R33 , ( rng B123 )) ) is  even iff (R33 <> ( R36 . 1 ) & R33 <> ( R36 . ( len R36 ) ))))))))
proof
let R32 being  finite Graph;
let R33 being (Vertex of R32);
let R36 being (FinSequence of (the carrier of R32));
let C199 being (Path of R32);
assume that
L1066: C199 is non  cyclic
and
L1067: R36 is_vertex_seq_of C199;
L1068: ( len R36 ) = ( ( len C199 ) + 1 ) by L1067 , GRAPH_2:def 6;
L1069: 1 <= ( len R36 ) by L1068 , NAT_1:11;
L1070: (1 in ( dom R36 ) & ( len R36 ) in ( dom R36 )) by L1069 , FINSEQ_3:25;
reconsider D241 = ( R36 . 1 ) , D242 = ( R36 . ( len R36 ) ) as (Vertex of R32) by L1070 , FINSEQ_2:11;
L1071: D241 <> D242 by L1066 , L1067 , MSSCYC_1:def 2;
set D243 = ( AddNewEdge (D241 , D242) );
reconsider D244 = R36 as (FinSequence of (the carrier of D243)) by L676;
reconsider D245 = C199 as (Path of D243) by L747;
L1072: D244 is_vertex_seq_of D245 by L1067 , L733;
reconsider D246 = R33 , D247 = D241 , D248 = D242 as (Vertex of D243) by L676;
set D249 = <* D248 , D247 *>;
set D250 = ( D244 ^' <* D248 , D247 *> );
L1073: ( len D249 ) = 2 by FINSEQ_1:44;
L1074: ( D250 . ( len D250 ) ) = ( D249 . 2 ) by L1073 , GRAPH_2:16;
set D251 = (the carrier' of R32);
set D252 = D251;
L1075: D252 in { D251 } by TARSKI:def 1;
L1076: (the carrier' of D243) = ( (the carrier' of R32) \/ { D251 } ) by L676;
L1077: D252 in (the carrier' of D243) by L1076 , L1075 , XBOOLE_0:def 3;
reconsider D253 = <* D252 *> as (Path of D243) by L1077 , L57;
L1078: ( rng D253 ) = { D252 } by FINSEQ_1:39;
L1079: (not D252 in D252);
L1080: ( rng D253 ) misses D251 by L1079 , L1078 , ZFMISC_1:50;
L1081: ( ( rng D253 ) /\ D251 ) = ( {} ) by L1080 , XBOOLE_0:def 7;
L1082: (( (the Source of D243) . D252 ) = D247 & ( (the Target of D243) . D252 ) = D248) by L696;
L1083: (( D244 . ( len D244 ) ) = ( <* D248 , D247 *> . 1 ) & <* D248 , D247 *> is_vertex_seq_of D253) by L1082 , L204 , FINSEQ_1:44;
L1084: ( rng C199 ) c= (the carrier' of R32) by FINSEQ_1:def 4;
L1085: (not D252 in ( rng C199 )) by L1084 , L1079;
L1086: ( rng D245 ) misses ( rng D253 )
proof
assume L1087: (not thesis);
L1088: (ex B124 being set st (B124 in ( rng D245 ) & B124 in ( rng D253 ))) by L1087 , XBOOLE_0:3;
thus L1089: contradiction by L1088 , L1085 , L1078 , TARSKI:def 1;
end;
reconsider D254 = ( D245 ^ D253 ) as (Path of D243) by L1086 , L1072 , L1083 , L89;
L1090: D250 is_vertex_seq_of D254 by L1072 , L1083 , GRAPH_2:44;
L1091: ( D250 . 1 ) = ( R36 . 1 ) by L1069 , GRAPH_2:14;
L1092: ( D250 . 1 ) = ( D250 . ( len D250 ) ) by L1091 , L1074 , FINSEQ_1:44;
reconsider D255 = D254 as  cyclic (Path of D243) by L1092 , L1090 , MSSCYC_1:def 2;
L1093: ( rng D255 ) = ( ( rng C199 ) \/ ( rng D253 ) ) by FINSEQ_1:31;
L1094: D252 in ( rng D255 ) by L1093 , L1075 , L1078 , XBOOLE_0:def 3;
L1095: ( ( rng D255 ) /\ D251 ) = ( ( ( rng C199 ) \/ ( rng D253 ) ) /\ D251 ) by FINSEQ_1:31
.= ( ( ( rng C199 ) /\ D251 ) \/ ( {} ) ) by L1081 , XBOOLE_1:23
.= ( rng C199 ) by L1084 , XBOOLE_1:28;
L1096: ( Degree (R33 , ( rng D255 )) ) = ( Degree (R33 , ( rng C199 )) ) by L1095 , L595;
reconsider D256 = ( Degree (D246 , ( rng D255 )) ) as  even (Element of ( NAT )) by L1057;
L1097: ( Degree (D246 , ( rng D255 )) ) is  even by L1057;
per cases ;
suppose L1098: (R33 <> D241 & R33 <> D242);

thus L1099: thesis by L1098 , L1097 , L1096 , L952;
end;
suppose L1100: (R33 = D241 or R33 = D242);

L1101: ( Degree (D246 , ( rng D255 )) ) = ( ( Degree (R33 , ( rng D255 )) ) + 1 ) by L1100 , L1071 , L1094 , L940;
L1102: ( Degree (R33 , ( rng D255 )) ) = ( D256 - 1 ) by L1101;
thus L1103: thesis by L1102 , L1095 , L1100 , L595;
end;
end;
definition
let C200 being Graph;
func C200 -CycleSet -> (FinSequenceSet of (the carrier' of C200)) means 
:L1105: (for B125 being set holds (B125 in it iff B125 is  cyclic  cyclic  cyclic  cyclic (Path of C200)));
existence
proof
defpred S10[ set ] means $1 is  cyclic  cyclic  cyclic  cyclic (Path of C200);
set D257 = { B126 where B126 is (Element of ( (the carrier' of C200) * )) : S10[ B126 ] };
L1106: D257 is (Subset of ( (the carrier' of C200) * )) from DOMAIN_1:sch 7;
L1107: (for B127 being set holds (B127 in D257 implies B127 is (FinSequence of (the carrier' of C200)))) by L1106 , FINSEQ_1:def 11;
reconsider D258 = D257 as (FinSequenceSet of (the carrier' of C200)) by L1107 , FINSEQ_2:def 3;
reconsider D259 = ( {} ) as (Path of C200) by GRAPH_1:14;
set D260 = the (Vertex of C200);
reconsider D261 = D258 as (FinSequenceSet of (the carrier' of C200));
take D261;
let C201 being set;
thus L1108:now
assume L1109: C201 in D261;
L1110: (ex B128 being (Element of ( (the carrier' of C200) * )) st (B128 = C201 & B128 is  cyclic  cyclic  cyclic  cyclic (Path of C200))) by L1109;
thus L1111: C201 is  cyclic  cyclic  cyclic  cyclic (Path of C200) by L1110;
end;
assume L1112: C201 is  cyclic  cyclic  cyclic  cyclic (Path of C200);
L1113: C201 is (Element of ( (the carrier' of C200) * )) by L1112 , FINSEQ_1:def 11;
thus L1114: thesis by L1113 , L1112;
end;
uniqueness
proof
let C202 , C203 being (FinSequenceSet of (the carrier' of C200));
assume that
L1115: (for B129 being set holds (B129 in C202 iff B129 is  cyclic  cyclic  cyclic  cyclic (Path of C200)))
and
L1116: (for B130 being set holds (B130 in C203 iff B130 is  cyclic  cyclic  cyclic  cyclic (Path of C200)));
L1117:
now
let C204 being set;
L1118: (C204 in C202 iff C204 is  cyclic  cyclic  cyclic  cyclic (Path of C200)) by L1115;
thus L1119: (C204 in C202 iff C204 in C203) by L1118 , L1116;
end;
thus L1120: thesis by L1117 , TARSKI:1;
end;
end;
theorem
L1122: (for R38 being Graph holds ( {} ) in ( R38 -CycleSet ))
proof
let R38 being Graph;
reconsider D262 = ( {} ) as (Path of R38) by GRAPH_1:14;
set D263 = the (Vertex of R38);
L1123: (<* D263 *> is_vertex_seq_of D262 & ( <* D263 *> . 1 ) = ( <* D263 *> . ( len <* D263 *> ) )) by FINSEQ_1:40 , GRAPH_2:32;
L1124: D262 is  cyclic by L1123 , MSSCYC_1:def 2;
thus L1125: thesis by L1124 , L1105;
end;
registration
let C205 being Graph;
cluster ( C205 -CycleSet ) -> non  empty;
coherence by L1122;
end;
theorem
L1127: (for R38 being Graph holds (for R39 being (Vertex of R38) holds (for B131 being (Element of ( R38 -CycleSet )) holds (R39 in ( R38 -VSet ( rng B131 ) ) implies { B132 where B132 is (Element of ( R38 -CycleSet )) : (( rng B132 ) = ( rng B131 ) & (ex R40 being (FinSequence of (the carrier of R38)) st (R40 is_vertex_seq_of B132 & ( R40 . 1 ) = R39))) } is non  empty non  empty non  empty non  empty (Subset of ( R38 -CycleSet ))))))
proof
let R38 being Graph;
let R39 being (Vertex of R38);
let C206 being (Element of ( R38 -CycleSet ));
set D264 = { B133 where B133 is (Element of ( R38 -CycleSet )) : (( rng B133 ) = ( rng C206 ) & (ex B134 being (FinSequence of (the carrier of R38)) st (B134 is_vertex_seq_of B133 & ( B134 . 1 ) = R39))) };
reconsider D265 = C206 as  cyclic (Path of R38) by L1105;
consider C207 being (FinSequence of (the carrier of R38)) such that L1128: C207 is_vertex_seq_of D265 by GRAPH_2:33;
L1129: ( len C207 ) = ( ( len C206 ) + 1 ) by L1128 , GRAPH_2:def 6;
assume L1130: R39 in ( R38 -VSet ( rng C206 ) );
L1131: (ex B135 being (Vertex of R38) st (B135 = R39 & (ex B136 being (Element of (the carrier' of R38)) st (B136 in ( rng C206 ) & (B135 = ( (the Source of R38) . B136 ) or B135 = ( (the Target of R38) . B136 )))))) by L1130;
L1132: ( R38 -VSet ( rng D265 ) ) = ( rng C207 ) by L1131 , L1128 , GRAPH_2:31 , RELAT_1:38;
consider C208 being Nat such that L1133: C208 in ( dom C207 ) and L1134: ( C207 . C208 ) = R39 by L1132 , L1130 , FINSEQ_2:10;
reconsider D266 = C208 as (Element of ( NAT )) by ORDINAL1:def 12;
L1135: ( dom C207 ) = ( Seg ( len C207 ) ) by FINSEQ_1:def 3;
L1136: (1 <= D266 & D266 <= ( len C207 )) by L1135 , L1133 , FINSEQ_1:1;
L1137:
now
per cases  by L1136 , XXREAL_0:1;
suppose L1138: (1 = D266 & D266 = ( len C207 ));

L1139: ( ( 0 ) + 1 ) = ( ( len C206 ) + 1 ) by L1138 , L1128 , GRAPH_2:def 6;
L1140: C206 = ( {} ) by L1139;
thus L1141: D264 is non  empty by L1140 , L1131;
end;
suppose L1142: 1 = D266;

L1143: C206 in D264 by L1142 , L1128 , L1134;
thus L1144: D264 is non  empty by L1143;
end;
suppose L1145: D266 = ( len C207 );

L1146: ( C207 . 1 ) = R39 by L1145 , L1128 , L1134 , MSSCYC_1:6;
L1147: C206 in D264 by L1146 , L1128;
thus L1148: D264 is non  empty by L1147;
end;
suppose L1149: (1 < D266 & D266 < ( len C207 ));

set D267 = ( (D266 , ( len C207 )) -cut C207 );
consider C209 being (Element of ( NAT )) such that L1150: D266 = ( 1 + C209 ) and L1151: 1 <= C209 by L1149 , FINSEQ_4:84;
set D268 = ( (1 , ( C209 + 1 )) -cut C207 );
L1152: 1 <= ( ( C209 + 1 ) + 1 ) by L1149 , L1150 , NAT_1:13;
L1153: ( ( len D268 ) + 1 ) = ( ( C209 + 1 ) + 1 ) by L1152 , L1149 , L1150 , L12;
L1154: ( D268 . 1 ) = ( C207 . ( 1 + ( 0 ) ) ) by L1153 , L1149 , L1150 , L1152 , L12;
reconsider D269 = ( (1 , C209) -cut D265 ) , D270 = ( (D266 , ( len C206 )) -cut D265 ) as (Path of R38) by L64;
L1155: D266 <= ( len C206 ) by L1129 , L1149 , NAT_1:13;
L1156: D267 is_vertex_seq_of D270 by L1155 , L1128 , L1129 , L1149 , GRAPH_2:42;
L1157: ( ( len D267 ) + D266 ) = ( ( len C207 ) + 1 ) by L1149 , GRAPH_2:def 1;
L1158:
now
assume L1159: ( len D267 ) = ( 0 );
L1160: ( ( len C207 ) + 1 ) < ( ( len C207 ) + ( 0 ) ) by L1159 , L1149 , L1157;
thus L1161: contradiction by L1160 , XREAL_1:6;
end;
L1162: ( 1 + ( 0 ) ) <= ( len D267 ) by L1158 , NAT_1:13;
consider C210 being (Element of ( NAT )) such that L1163: ( 0 ) <= C210 and L1164: C210 < ( len D267 ) and L1165: ( len D267 ) = ( C210 + 1 ) by L1162 , GRAPH_2:1;
reconsider D271 = ( D267 ^' D268 ) as (FinSequence of (the carrier of R38));
L1166: ( D271 . 1 ) = ( D267 . ( ( 0 ) + 1 ) ) by L1162 , GRAPH_2:14
.= ( C207 . ( D266 + ( 0 ) ) ) by L1149 , L1158 , GRAPH_2:def 1;
L1167: C209 <= ( C209 + 1 ) by NAT_1:11;
L1168: C209 <= ( len C206 ) by L1167 , L1150 , L1155 , XXREAL_0:2;
L1169: D268 is_vertex_seq_of D269 by L1168 , L1128 , L1151 , GRAPH_2:42;
L1170: ( D267 . ( len D267 ) ) = ( C207 . ( D266 + C210 ) ) by L1149 , L1164 , L1165 , GRAPH_2:def 1
.= ( D268 . 1 ) by L1128 , L1157 , L1165 , L1154 , MSSCYC_1:6;
L1171:
now
given C211 being set such that
L1172: C211 in ( rng D269 )
and
L1173: C211 in ( rng D270 );

consider C212 being Nat such that L1174: C212 in ( dom D270 ) and L1175: ( D270 . C212 ) = C211 by L1173 , FINSEQ_2:10;
L1176: (ex B137 being (Element of ( NAT )) st (B137 in ( dom D265 ) & ( C206 . B137 ) = ( D270 . C212 ) & ( B137 + 1 ) = ( D266 + C212 ) & D266 <= B137 & B137 <= ( len C206 ))) by L1174 , L26;
consider C213 being Nat such that L1177: C213 in ( dom D269 ) and L1178: ( D269 . C213 ) = C211 by L1172 , FINSEQ_2:10;
consider C214 being (Element of ( NAT )) such that L1179: (C214 in ( dom D265 ) & ( C206 . C214 ) = ( D269 . C213 )) and L1180: ( C214 + 1 ) = ( 1 + C213 ) and L1181: 1 <= C214 and L1182: C214 <= C209 by L1177 , L26;
L1183: C214 < D266 by L1150 , L1182 , NAT_1:13;
thus L1184: contradiction by L1183 , L1178 , L1175 , L1179 , L1176 , FUNCT_1:def 4;
end;
L1185: ( rng D269 ) misses ( rng D270 ) by L1171 , XBOOLE_0:3;
reconsider D272 = ( D270 ^ D269 ) as (Path of R38) by L1185 , L1169 , L1156 , L1170 , L89;
L1186: D271 is_vertex_seq_of D272 by L1169 , L1156 , L1170 , GRAPH_2:44;
L1187: C206 = ( D269 ^ D270 ) by L1150 , L1155 , L1167 , GRAPH_2:9 , XXREAL_0:2;
L1188: 1 < ( len D268 ) by L1151 , L1153 , NAT_1:13;
L1189: ( D271 . ( len D271 ) ) = ( D268 . ( len D268 ) ) by L1188 , GRAPH_2:16
.= ( C207 . D266 ) by L1149 , L1150 , GRAPH_2:12;
reconsider D273 = D272 as  cyclic (Path of R38) by L1189 , L1166 , L1186 , MSSCYC_1:def 2;
reconsider D274 = D273 as (Element of ( R38 -CycleSet )) by L1105;
L1190: ( rng D274 ) = ( ( rng D270 ) \/ ( rng D269 ) ) by FINSEQ_1:31
.= ( rng C206 ) by L1187 , FINSEQ_1:31;
L1191: D274 in D264 by L1190 , L1134 , L1166 , L1186;
thus L1192: D264 is non  empty by L1191;
end;
end;
L1194: D264 c= ( R38 -CycleSet )
proof
let C215 being set;
assume L1195: C215 in D264;
L1196: (ex B138 being (Element of ( R38 -CycleSet )) st (B138 = C215 & ( rng B138 ) = ( rng C206 ) & (ex B139 being (FinSequence of (the carrier of R38)) st (B139 is_vertex_seq_of B138 & ( B139 . 1 ) = R39)))) by L1195;
thus L1197: thesis by L1196;
end;
thus L1198: thesis by L1194 , L1137;
end;
definition
let R38 being Graph;
let R39 being (Vertex of R38);
let C216 being (Element of ( R38 -CycleSet ));
assume L1199: R39 in ( R38 -VSet ( rng C216 ) );
func Rotate (C216 , R39) -> (Element of ( R38 -CycleSet )) equals 
:L1200: ( choose { B140 where B140 is (Element of ( R38 -CycleSet )) : (( rng B140 ) = ( rng C216 ) & (ex R40 being (FinSequence of (the carrier of R38)) st (R40 is_vertex_seq_of B140 & ( R40 . 1 ) = R39))) } );
coherence
proof
set D275 = { B141 where B141 is (Element of ( R38 -CycleSet )) : (( rng B141 ) = ( rng C216 ) & (ex B142 being (FinSequence of (the carrier of R38)) st (B142 is_vertex_seq_of B141 & ( B142 . 1 ) = R39))) };
set D276 = ( choose D275 );
L1201: D275 is non  empty by L1199 , L1127;
L1202: D276 in D275 by L1201;
L1203: (ex B143 being (Element of ( R38 -CycleSet )) st (D276 = B143 & ( rng B143 ) = ( rng C216 ) & (ex B144 being (FinSequence of (the carrier of R38)) st (B144 is_vertex_seq_of B143 & ( B144 . 1 ) = R39)))) by L1202;
thus L1204: thesis by L1203;
end;
end;
L1206: (for B145 being Graph holds (for B146 being (Element of ( B145 -CycleSet )) holds (for B147 being (Vertex of B145) holds (B147 in ( B145 -VSet ( rng B146 ) ) implies ( rng ( Rotate (B146 , B147) ) ) = ( rng B146 )))))
proof
let C217 being Graph;
let C218 being (Element of ( C217 -CycleSet ));
let C219 being (Vertex of C217);
assume L1207: C219 in ( C217 -VSet ( rng C218 ) );
reconsider D277 = { B148 where B148 is (Element of ( C217 -CycleSet )) : (( rng B148 ) = ( rng C218 ) & (ex B149 being (FinSequence of (the carrier of C217)) st (B149 is_vertex_seq_of B148 & ( B149 . 1 ) = C219))) } as non  empty (Subset of ( C217 -CycleSet )) by L1207 , L1127;
L1208: ( Rotate (C218 , C219) ) = ( choose D277 ) by L1207 , L1200;
L1209: ( Rotate (C218 , C219) ) in D277 by L1208;
L1210: (ex B150 being (Element of ( C217 -CycleSet )) st (( Rotate (C218 , C219) ) = B150 & ( rng B150 ) = ( rng C218 ) & (ex B151 being (FinSequence of (the carrier of C217)) st (B151 is_vertex_seq_of B150 & ( B151 . 1 ) = C219)))) by L1209;
thus L1211: thesis by L1210;
end;
definition
let C220 being Graph;
let C221 , C222 being (Element of ( C220 -CycleSet ));
assume that
L1212: ( C220 -VSet ( rng C221 ) ) meets ( C220 -VSet ( rng C222 ) )
and
L1213: ( rng C221 ) misses ( rng C222 );
func CatCycles (C221 , C222) -> (Element of ( C220 -CycleSet )) means 
:L1214: (ex B152 being (Vertex of C220) st (B152 = ( choose ( ( C220 -VSet ( rng C221 ) ) /\ ( C220 -VSet ( rng C222 ) ) ) ) & it = ( ( Rotate (C221 , B152) ) ^ ( Rotate (C222 , B152) ) )));
existence
proof
set D278 = ( choose ( ( C220 -VSet ( rng C221 ) ) /\ ( C220 -VSet ( rng C222 ) ) ) );
L1215: ( ( C220 -VSet ( rng C221 ) ) /\ ( C220 -VSet ( rng C222 ) ) ) is non  empty by L1212 , XBOOLE_0:def 7;
L1216: D278 in ( ( C220 -VSet ( rng C221 ) ) /\ ( C220 -VSet ( rng C222 ) ) ) by L1215;
L1217: D278 in ( C220 -VSet ( rng C221 ) ) by L1215 , XBOOLE_0:def 4;
L1218: D278 in ( C220 -VSet ( rng C222 ) ) by L1215 , XBOOLE_0:def 4;
reconsider D279 = D278 as (Vertex of C220) by L1216;
reconsider D280 = { B153 where B153 is (Element of ( C220 -CycleSet )) : (( rng B153 ) = ( rng C222 ) & (ex B154 being (FinSequence of (the carrier of C220)) st (B154 is_vertex_seq_of B153 & ( B154 . 1 ) = D279))) } as non  empty (Subset of ( C220 -CycleSet )) by L1218 , L1127;
set D281 = ( Rotate (C222 , D279) );
L1219: D281 = ( choose D280 ) by L1218 , L1200;
L1220: D281 in D280 by L1219;
consider C223 being (Element of ( C220 -CycleSet )) such that L1221: D281 = C223 and L1222: ( rng C223 ) = ( rng C222 ) and L1223: (ex B155 being (FinSequence of (the carrier of C220)) st (B155 is_vertex_seq_of C223 & ( B155 . 1 ) = D279)) by L1220;
consider C224 being (FinSequence of (the carrier of C220)) such that L1224: C224 is_vertex_seq_of C223 and L1225: ( C224 . 1 ) = D279 by L1223;
reconsider D282 = C223 as  cyclic (Path of C220) by L1105;
L1226: D281 = D282 by L1221;
L1227: ( rng C222 ) is non  empty by L1218 , L273;
L1228: C223 is non  empty by L1227 , L1222;
L1229: ( ( 0 ) + 1 ) < ( ( len C223 ) + 1 ) by L1228 , XREAL_1:6;
L1230: 1 < ( len C224 ) by L1229 , L1224 , GRAPH_2:def 6;
L1231: C224 is_vertex_seq_of D282 by L1224;
reconsider D283 = { B156 where B156 is (Element of ( C220 -CycleSet )) : (( rng B156 ) = ( rng C221 ) & (ex B157 being (FinSequence of (the carrier of C220)) st (B157 is_vertex_seq_of B156 & ( B157 . 1 ) = D279))) } as non  empty (Subset of ( C220 -CycleSet )) by L1217 , L1127;
set D284 = ( Rotate (C221 , D279) );
L1232: D284 = ( choose D283 ) by L1217 , L1200;
L1233: D284 in D283 by L1232;
consider C225 being (Element of ( C220 -CycleSet )) such that L1234: D284 = C225 and L1235: ( rng C225 ) = ( rng C221 ) and L1236: (ex B158 being (FinSequence of (the carrier of C220)) st (B158 is_vertex_seq_of C225 & ( B158 . 1 ) = D279)) by L1233;
reconsider D285 = C225 as  cyclic (Path of C220) by L1105;
consider C226 being (FinSequence of (the carrier of C220)) such that L1237: C226 is_vertex_seq_of C225 and L1238: ( C226 . 1 ) = D279 by L1236;
L1239: C226 is_vertex_seq_of D285 by L1237;
L1240: ( C226 . 1 ) = ( C226 . ( len C226 ) ) by L1239 , MSSCYC_1:6;
set D286 = ( C226 ^' C224 );
L1241: ( len C226 ) = ( ( len C225 ) + 1 ) by L1237 , GRAPH_2:def 6;
L1242: 1 <= ( len C226 ) by L1241 , NAT_1:11;
L1243: ( D286 . 1 ) = ( C226 . 1 ) by L1242 , GRAPH_2:14
.= ( C224 . ( len C224 ) ) by L1238 , L1225 , L1231 , MSSCYC_1:6
.= ( D286 . ( len D286 ) ) by L1230 , GRAPH_2:16;
L1244: D284 = D285 by L1234;
reconsider D287 = ( D284 ^ D281 ) as (Path of C220) by L1244 , L1213 , L1235 , L1222 , L1237 , L1238 , L1224 , L1225 , L1240 , L1226 , L89;
L1245: D286 is_vertex_seq_of D287 by L1237 , L1238 , L1224 , L1225 , L1240 , L1244 , L1226 , GRAPH_2:44;
L1246: D287 is  cyclic by L1245 , L1243 , MSSCYC_1:def 2;
reconsider D288 = D287 as (Element of ( C220 -CycleSet )) by L1246 , L1105;
take D288;
take D279;
thus L1247: thesis;
end;
correctness;
end;
theorem
L1249: (for B159 being Graph holds (for B160 , B161 being (Element of ( B159 -CycleSet )) holds ((( B159 -VSet ( rng B160 ) ) meets ( B159 -VSet ( rng B161 ) ) & ( rng B160 ) misses ( rng B161 ) & (B160 <> ( {} ) or B161 <> ( {} ))) implies ( CatCycles (B160 , B161) ) is non  empty)))
proof
let C227 being Graph;
let C228 , C229 being (Element of ( C227 -CycleSet ));
assume that
L1250: ( C227 -VSet ( rng C228 ) ) meets ( C227 -VSet ( rng C229 ) )
and
L1251: ( rng C228 ) misses ( rng C229 )
and
L1252: (C228 <> ( {} ) or C229 <> ( {} ));
consider C230 being (Vertex of C227) such that L1253: C230 = ( choose ( ( C227 -VSet ( rng C228 ) ) /\ ( C227 -VSet ( rng C229 ) ) ) ) and L1254: ( CatCycles (C228 , C229) ) = ( ( Rotate (C228 , C230) ) ^ ( Rotate (C229 , C230) ) ) by L1250 , L1251 , L1214;
L1255: ( ( C227 -VSet ( rng C228 ) ) /\ ( C227 -VSet ( rng C229 ) ) ) <> ( {} ) by L1250 , XBOOLE_0:def 7;
L1256: C230 in ( C227 -VSet ( rng C228 ) ) by L1255 , L1253 , XBOOLE_0:def 4;
L1257: C230 in ( C227 -VSet ( rng C229 ) ) by L1253 , L1255 , XBOOLE_0:def 4;
per cases  by L1252;
suppose L1258: C228 <> ( {} );

L1259: ( rng ( Rotate (C228 , C230) ) ) <> ( {} ) by L1258 , L1256 , L1206;
thus L1260: thesis by L1259 , L1254 , FINSEQ_1:35 , RELAT_1:38;
end;
suppose L1261: C229 <> ( {} );

L1262: ( rng ( Rotate (C229 , C230) ) ) <> ( {} ) by L1261 , L1257 , L1206;
thus L1263: thesis by L1262 , L1254 , FINSEQ_1:35 , RELAT_1:38;
end;
end;
definition
let R41 being  finite Graph;
let R42 being (Vertex of R41);
let C231 being set;
assume L1265: ( Degree (R42 , C231) ) <> ( 0 );
func C231 -PathSet R42 -> non  empty (FinSequenceSet of (the carrier' of R41)) equals 
:L1266: { B162 where B162 is (Element of ( C231 * )) : (B162 is (Path of R41) & B162 is non  empty & (ex R43 being (FinSequence of (the carrier of R41)) st (R43 is_vertex_seq_of B162 & ( R43 . 1 ) = R42))) };
coherence
proof
set D289 = ( choose ( Edges_At (R42 , C231) ) );
set D290 = { B163 where B163 is (Element of ( C231 * )) : (B163 is (Path of R41) & B163 is non  empty & (ex B164 being (FinSequence of (the carrier of R41)) st (B164 is_vertex_seq_of B163 & ( B164 . 1 ) = R42))) };
L1267:
now
let C232 being set;
assume L1268: C232 in D290;
L1269: (ex B165 being (Element of ( C231 * )) st (C232 = B165 & B165 is (Path of R41) & B165 is non  empty & (ex B166 being (FinSequence of (the carrier of R41)) st (B166 is_vertex_seq_of B165 & ( B166 . 1 ) = R42)))) by L1268;
thus L1270: C232 is (FinSequence of (the carrier' of R41)) by L1269;
end;
L1271: (not ( Edges_At (R42 , C231) ) is  empty) by L1265 , L483;
L1272:
now
per cases  by L1271 , XBOOLE_0:def 3;
suppose L1273: D289 in ( Edges_In (R42 , C231) );

L1274: (D289 in C231 & ( (the Target of R41) . D289 ) = R42) by L1273 , L420;
thus L1275: (ex B167 being (Element of C231) st (D289 = B167 & B167 in C231 & B167 in (the carrier' of R41) & (R42 = ( (the Target of R41) . B167 ) or R42 = ( (the Source of R41) . B167 )))) by L1274 , L1273;
end;
suppose L1276: D289 in ( Edges_Out (R42 , C231) );

L1277: (D289 in C231 & ( (the Source of R41) . D289 ) = R42) by L1276 , L431;
thus L1278: (ex B168 being (Element of C231) st (D289 = B168 & B168 in C231 & B168 in (the carrier' of R41) & (R42 = ( (the Target of R41) . B168 ) or R42 = ( (the Source of R41) . B168 )))) by L1277 , L1276;
end;
end;
consider C233 being (Element of C231) such that L1280: D289 = C233 and L1281: C233 in C231 and L1282: C233 in (the carrier' of R41) and L1283: (R42 = ( (the Target of R41) . C233 ) or R42 = ( (the Source of R41) . C233 )) by L1272;
reconsider D291 = C231 as non  empty set by L1281;
reconsider D292 = C233 as (Element of D291);
reconsider D293 = <* D292 *> as (Element of ( C231 * )) by FINSEQ_1:def 11;
L1284: (ex B169 being (FinSequence of (the carrier of R41)) st (B169 is_vertex_seq_of D293 & ( B169 . 1 ) = R42))
proof
set D294 = ( (the Source of R41) . D292 );
reconsider D295 = D294 as (Vertex of R41) by L1282 , FUNCT_2:5;
set D296 = ( (the Target of R41) . D292 );
reconsider D297 = D296 as (Vertex of R41) by L1282 , FUNCT_2:5;
per cases  by L1283;
suppose L1285: R42 = ( (the Target of R41) . D292 );

take <* D297 , D295 *>;
thus L1286: thesis by L1285 , L204 , FINSEQ_1:44;
end;
suppose L1287: R42 = ( (the Source of R41) . D292 );

take <* D295 , D297 *>;
thus L1288: thesis by L1287 , FINSEQ_1:44 , MSSCYC_1:4;
end;
end;
L1290: D293 is (Path of R41) by L1282 , L57;
L1291: D293 in D290 by L1290 , L1284;
thus L1292: thesis by L1291 , L1267 , FINSEQ_2:def 3;
end;
end;
theorem
L1294: (for R13 being set holds (for R41 being  finite Graph holds (for R42 being (Vertex of R41) holds (for B170 being (Element of ( R13 -PathSet R42 )) holds (for B171 being  finite set holds ((B171 = (the carrier' of R41) & ( Degree (R42 , R13) ) <> ( 0 )) implies ( len B170 ) <= ( card B171 )))))))
proof
let R13 being set;
let R41 being  finite Graph;
let R42 being (Vertex of R41);
let C234 being (Element of ( R13 -PathSet R42 ));
let C235 being  finite set;
assume that
L1295: C235 = (the carrier' of R41)
and
L1296: ( Degree (R42 , R13) ) <> ( 0 );
L1297: C234 in ( R13 -PathSet R42 );
L1298: ( R13 -PathSet R42 ) = { B172 where B172 is (Element of ( R13 * )) : (B172 is (Path of R41) & B172 is non  empty & (ex B173 being (FinSequence of (the carrier of R41)) st (B173 is_vertex_seq_of B172 & ( B173 . 1 ) = R42))) } by L1296 , L1266;
L1299: (ex B174 being (Element of ( R13 * )) st (C234 = B174 & B174 is (Path of R41) & B174 is non  empty & (ex B175 being (FinSequence of (the carrier of R41)) st (B175 is_vertex_seq_of B174 & ( B175 . 1 ) = R42)))) by L1298 , L1297;
L1300: ( card ( rng C234 ) ) = ( len C234 ) by L1299 , FINSEQ_4:62;
L1301: ( rng C234 ) c= C235 by L1295 , FINSEQ_1:def 4;
thus L1302: thesis by L1301 , L1300 , NAT_1:43;
end;
definition
let R41 being  finite Graph;
let R42 being (Vertex of R41);
let C236 being set;
assume that
L1303: (for B176 being (Vertex of R41) holds ( Degree (B176 , C236) ) is  even)
and
L1304: ( Degree (R42 , C236) ) <> ( 0 );
func C236 -CycleSet R42 -> non  empty (Subset of ( R41 -CycleSet )) equals 
:L1305: { B177 where B177 is (Element of ( R41 -CycleSet )) : (( rng B177 ) c= C236 & B177 is non  empty & (ex R43 being (FinSequence of (the carrier of R41)) st (R43 is_vertex_seq_of B177 & ( R43 . 1 ) = R42))) };
coherence
proof
reconsider D298 = (the carrier' of R41) as  finite set by GRAPH_1:def 11;
set D299 = { ( len B178 ) where B178 is (Element of ( C236 -PathSet R42 )) : (not contradiction) };
set D300 = { B179 where B179 is (Element of ( R41 -CycleSet )) : (( rng B179 ) c= C236 & B179 is non  empty & (ex B180 being (FinSequence of (the carrier of R41)) st (B180 is_vertex_seq_of B179 & ( B180 . 1 ) = R42))) };
set D301 = the (Element of ( C236 -PathSet R42 ));
L1306: ( len D301 ) in D299;
L1307: D299 c= ( NAT )
proof
let C237 being set;
assume L1308: C237 in D299;
L1309: (ex B181 being (Element of ( C236 -PathSet R42 )) st C237 = ( len B181 )) by L1308;
thus L1310: thesis by L1309;
end;
L1311: ( C236 -PathSet R42 ) = { B182 where B182 is (Element of ( C236 * )) : (B182 is (Path of R41) & B182 is non  empty & (ex B183 being (FinSequence of (the carrier of R41)) st (B183 is_vertex_seq_of B182 & ( B183 . 1 ) = R42))) } by L1304 , L1266;
L1312: D299 c= ( Seg ( card D298 ) )
proof
let C238 being set;
assume L1313: C238 in D299;
consider C239 being (Element of ( C236 -PathSet R42 )) such that L1314: C238 = ( len C239 ) by L1313;
L1315: C239 in ( C236 -PathSet R42 );
L1316: (ex B184 being (Element of ( C236 * )) st (C239 = B184 & B184 is (Path of R41) & B184 is non  empty & (ex B185 being (FinSequence of (the carrier of R41)) st (B185 is_vertex_seq_of B184 & ( B185 . 1 ) = R42)))) by L1315 , L1311;
L1317: ( ( 0 ) + 1 ) <= ( len C239 ) by L1316 , NAT_1:13;
L1318: ( len C239 ) <= ( card D298 ) by L1304 , L1294;
thus L1319: thesis by L1318 , L1314 , L1317 , FINSEQ_1:1;
end;
reconsider D302 = D299 as  finite non  empty (Subset of ( NAT )) by L1312 , L1306 , L1307;
set D303 = ( max D302 );
L1320: D303 in D302 by XXREAL_2:def 8;
consider C240 being (Element of ( C236 -PathSet R42 )) such that L1321: D303 = ( len C240 ) by L1320;
L1322: C240 in ( C236 -PathSet R42 );
consider C241 being (Element of ( C236 * )) such that L1323: C240 = C241 and L1324: C241 is (Path of R41) and L1325: C241 is non  empty and L1326: (ex B186 being (FinSequence of (the carrier of R41)) st (B186 is_vertex_seq_of C241 & ( B186 . 1 ) = R42)) by L1322 , L1311;
reconsider D304 = C240 as (Path of R41) by L1323 , L1324;
L1327: ( rng C241 ) c= C236 by FINSEQ_1:def 4;
L1328:
now
set D305 = (the Target of R41);
set D306 = (the Source of R41);
L1329: ( rng D304 ) c= C236 by L1323 , FINSEQ_1:def 4;
consider C242 being (FinSequence of (the carrier of R41)) such that L1330: C242 is_vertex_seq_of D304 and L1331: ( C242 . 1 ) = R42 by L1323 , L1326;
L1332: ( len C242 ) = ( ( len D304 ) + 1 ) by L1330 , GRAPH_2:def 6;
L1333: 1 <= ( len C242 ) by L1332 , NAT_1:11;
L1334: ( len C242 ) in ( dom C242 ) by L1333 , FINSEQ_3:25;
reconsider D307 = ( C242 . ( len C242 ) ) as (Vertex of R41) by L1334 , FINSEQ_2:11;
assume L1335: (not D304 is  cyclic);
L1336: ( Degree (D307 , ( rng D304 )) ) is  odd by L1335 , L1330 , L1065;
L1337: ( rng D304 ) <> C236 by L1336 , L1303;
L1338: ( rng D304 ) c< C236 by L1337 , L1329 , XBOOLE_0:def 8;
L1339: (ex B187 being set st (B187 in C236 & (not B187 in ( rng D304 )))) by L1338 , XBOOLE_0:6;
reconsider D308 = ( C236 \ ( rng D304 ) ) as non  empty set by L1339 , XBOOLE_0:def 5;
set D309 = ( choose ( Edges_At (D307 , D308) ) );
L1340: ( Degree (D307 , D308) ) = ( ( Degree (D307 , C236) ) - ( Degree (D307 , ( rng D304 )) ) ) by L1329 , L564;
L1341: ( Degree (D307 , D308) ) <> ( 0 ) by L1340 , L1303 , L1336;
L1342: (not ( Edges_At (D307 , D308) ) is  empty) by L1341 , L483;
L1343:
now
per cases  by L1342 , XBOOLE_0:def 3;
suppose L1344: D309 in ( Edges_In (D307 , D308) );

L1345: (D309 in D308 & ( (the Target of R41) . D309 ) = D307) by L1344 , L420;
thus L1346: (ex B188 being (Element of D308) st (D309 = B188 & B188 in D308 & B188 in (the carrier' of R41) & (D307 = ( (the Target of R41) . B188 ) or D307 = ( (the Source of R41) . B188 )))) by L1345 , L1344;
end;
suppose L1347: D309 in ( Edges_Out (D307 , D308) );

L1348: (D309 in D308 & ( (the Source of R41) . D309 ) = D307) by L1347 , L431;
thus L1349: (ex B189 being (Element of D308) st (D309 = B189 & B189 in D308 & B189 in (the carrier' of R41) & (D307 = ( (the Target of R41) . B189 ) or D307 = ( (the Source of R41) . B189 )))) by L1348 , L1347;
end;
end;
reconsider D310 = <* D309 *> as (Path of R41) by L1343 , L57;
reconsider D311 = ( D305 . D309 ) , D312 = ( D306 . D309 ) as (Vertex of R41) by L1343 , FUNCT_2:5;
L1351:
now
given C243 being set such that
L1352: C243 in ( rng D310 )
and
L1353: C243 in ( rng D304 );

L1354: ( rng D310 ) = { D309 } by FINSEQ_1:38;
L1355: C243 in D308 by L1354 , L1343 , L1352 , TARSKI:def 1;
thus L1356: contradiction by L1355 , L1353 , XBOOLE_0:def 5;
end;
L1357: ( rng D310 ) misses ( rng D304 ) by L1351 , XBOOLE_0:3;
per cases  by L1343;
suppose L1358: D307 = ( D305 . D309 );

reconsider D313 = <* D311 , D312 *> as (FinSequence of (the carrier of R41));
L1359: ( C242 . ( len C242 ) ) = ( D313 . 1 ) by L1358 , FINSEQ_1:44;
reconsider D314 = C236 as non  empty set by L1343;
reconsider D315 = ( C242 ^' D313 ) as (FinSequence of (the carrier of R41));
reconsider D316 = D309 as (Element of D314) by L1343;
L1360: ( D315 . 1 ) = R42 by L1331 , L1333 , GRAPH_2:14;
L1361: D313 is_vertex_seq_of D310 by L204;
reconsider D317 = ( D304 ^ D310 ) as (Path of R41) by L1361 , L1330 , L1357 , L1359 , L89;
L1362: ( len D317 ) = ( ( len D304 ) + ( len D310 ) ) by FINSEQ_1:22
.= ( ( len D304 ) + 1 ) by FINSEQ_1:39;
reconsider D318 = D304 as (FinSequence of C236) by L1323;
reconsider D319 = <* D316 *> as (FinSequence of C236);
reconsider D320 = ( D318 ^ D319 ) as (Element of ( C236 * )) by FINSEQ_1:def 11;
L1363: D315 is_vertex_seq_of D317 by L1330 , L1361 , L1359 , GRAPH_2:44;
L1364: D320 in ( C236 -PathSet R42 ) by L1363 , L1311 , L1360;
reconsider D321 = D320 as (Element of ( C236 -PathSet R42 )) by L1364;
L1365: ( len D321 ) in D302;
L1366: ( ( len D318 ) + 1 ) <= ( ( len D318 ) + ( 0 ) ) by L1365 , L1321 , L1362 , XXREAL_2:def 8;
thus L1367: contradiction by L1366 , XREAL_1:6;
end;
suppose L1368: D307 = ( D306 . D309 );

reconsider D322 = <* D312 , D311 *> as (FinSequence of (the carrier of R41));
L1369: (D322 is_vertex_seq_of D310 & ( C242 . ( len C242 ) ) = ( D322 . 1 )) by L1368 , FINSEQ_1:44 , MSSCYC_1:4;
reconsider D323 = ( D304 ^ D310 ) as (Path of R41) by L1369 , L1330 , L1357 , L89;
L1370: ( len D323 ) = ( ( len D304 ) + ( len D310 ) ) by FINSEQ_1:22
.= ( ( len D304 ) + 1 ) by FINSEQ_1:39;
reconsider D324 = C236 as non  empty set by L1343;
reconsider D325 = ( C242 ^' D322 ) as (FinSequence of (the carrier of R41));
reconsider D326 = D309 as (Element of D324) by L1343;
L1371: ( D325 . 1 ) = R42 by L1331 , L1333 , GRAPH_2:14;
reconsider D327 = D304 as (FinSequence of C236) by L1323;
reconsider D328 = <* D326 *> as (FinSequence of C236);
reconsider D329 = ( D327 ^ D328 ) as (Element of ( C236 * )) by FINSEQ_1:def 11;
L1372: D325 is_vertex_seq_of D323 by L1330 , L1369 , GRAPH_2:44;
L1373: D329 in ( C236 -PathSet R42 ) by L1372 , L1311 , L1371;
reconsider D330 = D329 as (Element of ( C236 -PathSet R42 )) by L1373;
L1374: ( len D330 ) in D302;
L1375: ( ( len D327 ) + 1 ) <= ( ( len D327 ) + ( 0 ) ) by L1374 , L1321 , L1370 , XXREAL_2:def 8;
thus L1376: contradiction by L1375 , XREAL_1:6;
end;
end;
reconsider D331 = C241 as (Element of ( R41 -CycleSet )) by L1328 , L1323 , L1105;
L1378:
now
let C244 being set;
assume L1379: C244 in D300;
L1380: (ex B190 being (Element of ( R41 -CycleSet )) st (C244 = B190 & ( rng B190 ) c= C236 & B190 is non  empty & (ex B191 being (FinSequence of (the carrier of R41)) st (B191 is_vertex_seq_of B190 & ( B191 . 1 ) = R42)))) by L1379;
thus L1381: C244 in ( R41 -CycleSet ) by L1380;
end;
L1382: D331 in D300 by L1325 , L1326 , L1327;
thus L1383: thesis by L1382 , L1378 , TARSKI:def 3;
end;
end;
theorem
L1385: (for R13 being set holds (for R41 being  finite Graph holds (for R42 being (Vertex of R41) holds ((( Degree (R42 , R13) ) <> ( 0 ) & (for R42 being (Vertex of R41) holds ( Degree (R42 , R13) ) is  even)) implies (for B192 being (Element of ( R13 -CycleSet R42 )) holds (B192 is non  empty & ( rng B192 ) c= R13 & R42 in ( R41 -VSet ( rng B192 ) )))))))
proof
let R13 being set;
let R41 being  finite Graph;
let R42 being (Vertex of R41);
assume L1386: (( Degree (R42 , R13) ) <> ( 0 ) & (for R42 being (Vertex of R41) holds ( Degree (R42 , R13) ) is  even));
L1387: ( R13 -CycleSet R42 ) = { B193 where B193 is (Element of ( R41 -CycleSet )) : (( rng B193 ) c= R13 & B193 is non  empty & (ex B194 being (FinSequence of (the carrier of R41)) st (B194 is_vertex_seq_of B193 & ( B194 . 1 ) = R42))) } by L1386 , L1305;
let C245 being (Element of ( R13 -CycleSet R42 ));
L1388: C245 in ( R13 -CycleSet R42 );
consider C246 being (Element of ( R41 -CycleSet )) such that L1389: C245 = C246 and L1390: ( rng C246 ) c= R13 and L1391: C246 is non  empty and L1392: (ex B195 being (FinSequence of (the carrier of R41)) st (B195 is_vertex_seq_of C246 & ( B195 . 1 ) = R42)) by L1388 , L1387;
thus L1393: C245 is non  empty by L1389 , L1391;
thus L1394: ( rng C245 ) c= R13 by L1389 , L1390;
reconsider D332 = C246 as (Path of R41) by L1105;
consider C247 being (FinSequence of (the carrier of R41)) such that L1395: C247 is_vertex_seq_of D332 and L1396: ( C247 . 1 ) = R42 by L1392;
L1397: ( len C247 ) = ( ( len D332 ) + 1 ) by L1395 , GRAPH_2:def 6;
L1398: 1 <= ( len C247 ) by L1397 , NAT_1:11;
L1399: 1 in ( dom C247 ) by L1398 , FINSEQ_3:25;
L1400: ( R41 -VSet ( rng D332 ) ) = ( rng C247 ) by L1391 , L1395 , GRAPH_2:31;
thus L1401: thesis by L1400 , L1389 , L1396 , L1399 , FUNCT_1:def 3;
end;
theorem
L1402: (for B196 being  finite  connected Graph holds (for B197 being (Element of ( B196 -CycleSet )) holds ((( rng B197 ) <> (the carrier' of B196) & B197 is non  empty) implies { B198 where B198 is (Vertex of B196) : (B198 in ( B196 -VSet ( rng B197 ) ) & ( Degree B198 ) <> ( Degree (B198 , ( rng B197 )) )) } is non  empty non  empty non  empty non  empty (Subset of (the carrier of B196)))))
proof
let C248 being  finite  connected Graph;
let C249 being (Element of ( C248 -CycleSet ));
defpred S11[ (Vertex of C248) ] means ($1 in ( C248 -VSet ( rng C249 ) ) & ( Degree $1 ) <> ( Degree ($1 , ( rng C249 )) ));
set D333 = { B199 where B199 is (Vertex of C248) : S11[ B199 ] };
set D334 = (the Target of C248);
set D335 = (the Source of C248);
set D336 = (the carrier' of C248);
L1403: ( rng C249 ) c= D336 by FINSEQ_1:def 4;
reconsider D337 = C249 as  cyclic (Path of C248) by L1105;
assume that
L1404: ( rng C249 ) <> (the carrier' of C248)
and
L1405: C249 is non  empty;
consider C250 being (FinSequence of (the carrier of C248)) such that L1406: C250 is_vertex_seq_of D337 by GRAPH_2:33;
L1407: ( C248 -VSet ( rng D337 ) ) = ( rng C250 ) by L1405 , L1406 , GRAPH_2:31;
L1408:
now
consider C251 being set such that L1409: (not (C251 in ( rng C249 ) iff C251 in D336)) by L1404 , TARSKI:1;
reconsider D338 = C251 as (Element of D336) by L1403 , L1409;
reconsider D339 = ( (the Target of C248) . D338 ) as (Vertex of C248) by L1403 , L1409 , FUNCT_2:5;
per cases ;
suppose L1410: D339 in ( rng C250 );

L1411: ( Degree D339 ) <> ( Degree (D339 , ( rng C249 )) ) by L1403 , L1409 , L488;
thus L1412: (ex B200 being (Vertex of C248) st (B200 in ( rng C250 ) & ( Degree B200 ) <> ( Degree (B200 , ( rng C249 )) ))) by L1411 , L1410;
end;
suppose L1413: (not D339 in ( rng C250 ));

L1414: (ex B201 being set st B201 in ( rng C249 )) by L1405 , XBOOLE_0:def 1;
L1415: ( rng C249 ) meets D336 by L1414 , L1403 , XBOOLE_0:3;
consider C252 being (Vertex of C248), C253 being (Element of D336) such that L1416: C252 in ( rng C250 ) and L1417: ((not C253 in ( rng C249 )) & (C252 = ( D334 . C253 ) or C252 = ( D335 . C253 ))) by L1415 , L1407 , L1413 , L380;
L1418: ( Degree C252 ) <> ( Degree (C252 , ( rng C249 )) ) by L1403 , L1414 , L1417 , L488;
thus L1419: (ex B202 being (Vertex of C248) st (B202 in ( rng C250 ) & ( Degree B202 ) <> ( Degree (B202 , ( rng C249 )) ))) by L1418 , L1416;
end;
end;
consider C254 being (Vertex of C248) such that L1421: (C254 in ( rng C250 ) & ( Degree C254 ) <> ( Degree (C254 , ( rng C249 )) )) by L1408;
L1422: D333 is (Subset of (the carrier of C248)) from DOMAIN_1:sch 7;
L1423: C254 in D333 by L1407 , L1421;
thus L1424: thesis by L1423 , L1422;
end;
definition
let C255 being  finite  connected Graph;
let C256 being (Element of ( C255 -CycleSet ));
assume that
L1425: ( rng C256 ) <> (the carrier' of C255)
and
L1426: C256 is non  empty;
func ExtendCycle C256 -> (Element of ( C255 -CycleSet )) means 
:L1427: (ex B203 being (Element of ( C255 -CycleSet )) st (ex B204 being (Vertex of C255) st (B204 = ( choose { B205 where B205 is (Vertex of C255) : (B205 in ( C255 -VSet ( rng C256 ) ) & ( Degree B205 ) <> ( Degree (B205 , ( rng C256 )) )) } ) & B203 = ( choose ( ( (the carrier' of C255) \ ( rng C256 ) ) -CycleSet B204 ) ) & it = ( CatCycles (C256 , B203) ))));
existence
proof
set D340 = { B206 where B206 is (Vertex of C255) : (B206 in ( C255 -VSet ( rng C256 ) ) & ( Degree B206 ) <> ( Degree (B206 , ( rng C256 )) )) };
set D341 = ( choose D340 );
L1428: D340 is non  empty by L1425 , L1426 , L1402;
L1429: D341 in D340 by L1428;
L1430: (ex B207 being (Vertex of C255) st (D341 = B207 & B207 in ( C255 -VSet ( rng C256 ) ) & ( Degree B207 ) <> ( Degree (B207 , ( rng C256 )) ))) by L1429;
reconsider D342 = D341 as (Vertex of C255) by L1430;
set D343 = (the carrier' of C255);
reconsider D344 = D343 as  finite set by GRAPH_1:def 11;
L1431: ( rng C256 ) c= D343 by FINSEQ_1:def 4;
L1432: ( rng C256 ) c< D343 by L1431 , L1425 , XBOOLE_0:def 8;
L1433: (ex B208 being set st (B208 in D343 & (not B208 in ( rng C256 )))) by L1432 , XBOOLE_0:6;
reconsider D345 = ( D344 \ ( rng C256 ) ) as  finite non  empty set by L1433 , XBOOLE_0:def 5;
set D346 = ( choose ( D345 -CycleSet D342 ) );
L1434: D346 in ( D345 -CycleSet D342 );
reconsider D347 = D346 as (Element of ( C255 -CycleSet )) by L1434;
reconsider D348 = ( CatCycles (C256 , D347) ) as (Element of ( C255 -CycleSet ));
take D348;
take D347;
take D342;
thus L1435: thesis;
end;
uniqueness;
end;
theorem
L1437: (for B209 being  finite  connected Graph holds (for B210 being (Element of ( B209 -CycleSet )) holds ((( rng B210 ) <> (the carrier' of B209) & B210 is non  empty & (for B211 being (Vertex of B209) holds ( Degree B211 ) is  even)) implies (( ExtendCycle B210 ) is non  empty & ( card ( rng B210 ) ) < ( card ( rng ( ExtendCycle B210 ) ) )))))
proof
let C257 being  finite  connected Graph;
let C258 being (Element of ( C257 -CycleSet ));
set D349 = (the carrier' of C257);
reconsider D350 = D349 as  finite set by GRAPH_1:def 11;
reconsider D351 = C258 as  cyclic (Path of C257) by L1105;
assume that
L1438: ( rng C258 ) <> (the carrier' of C257)
and
L1439: C258 is non  empty
and
L1440: (for B212 being (Vertex of C257) holds ( Degree B212 ) is  even);
L1441: ( rng C258 ) c= D349 by FINSEQ_1:def 4;
L1442: ( rng C258 ) c< (the carrier' of C257) by L1441 , L1438 , XBOOLE_0:def 8;
L1443: (ex B213 being set st (B213 in D349 & (not B213 in ( rng C258 )))) by L1442 , XBOOLE_0:6;
reconsider D352 = ( D350 \ ( rng C258 ) ) as  finite non  empty set by L1443 , XBOOLE_0:def 5;
reconsider D353 = { B214 where B214 is (Vertex of C257) : (B214 in ( C257 -VSet ( rng C258 ) ) & ( Degree B214 ) <> ( Degree (B214 , ( rng C258 )) )) } as non  empty set by L1438 , L1439 , L1402;
consider C259 being (Element of ( C257 -CycleSet )), C260 being (Vertex of C257) such that L1444: C260 = ( choose D353 ) and L1445: C259 = ( choose ( D352 -CycleSet C260 ) ) and L1446: ( ExtendCycle C258 ) = ( CatCycles (C258 , C259) ) by L1438 , L1439 , L1427;
L1447: C260 in D353 by L1444;
L1448: (ex B215 being (Vertex of C257) st (C260 = B215 & B215 in ( C257 -VSet ( rng C258 ) ) & ( Degree B215 ) <> ( Degree (B215 , ( rng C258 )) ))) by L1447;
L1449:
now
let C261 being (Vertex of C257);
L1450: (( Degree C261 ) = ( Degree (C261 , D349) ) & ( Degree C261 ) is  even) by L1440 , L481;
L1451: (( Degree (C261 , D352) ) = ( ( Degree (C261 , D350) ) - ( Degree (C261 , ( rng C258 )) ) ) & ( Degree (C261 , ( rng D351 )) ) is  even) by L1441 , L564 , L1057;
thus L1452: ( Degree (C261 , D352) ) is  even by L1451 , L1450;
end;
L1453: ( rng C258 ) misses ( D349 \ ( rng C258 ) ) by XBOOLE_1:79;
L1454: ( ( rng C258 ) /\ ( D349 \ ( rng C258 ) ) ) = ( {} ) by L1453 , XBOOLE_0:def 7;
L1455: ( Degree (C260 , D352) ) = ( ( Degree (C260 , D350) ) - ( Degree (C260 , ( rng C258 )) ) ) by L1441 , L564;
L1456: ( Degree (C260 , D352) ) <> ( 0 ) by L1455 , L1448 , L481;
L1457: ( rng C259 ) c= ( D349 \ ( rng C258 ) ) by L1456 , L1445 , L1449 , L1385;
L1458: ( ( rng C258 ) /\ ( rng C259 ) ) = ( ( rng C258 ) /\ ( ( D349 \ ( rng C258 ) ) /\ ( rng C259 ) ) ) by L1457 , XBOOLE_1:28
.= ( ( {} ) /\ ( rng C259 ) ) by L1454 , XBOOLE_1:16
.= ( {} );
L1459: ( rng C258 ) misses ( rng C259 ) by L1458 , XBOOLE_0:def 7;
L1460: C260 in ( C257 -VSet ( rng C259 ) ) by L1445 , L1449 , L1456 , L1385;
L1461: ( C257 -VSet ( rng C258 ) ) meets ( C257 -VSet ( rng C259 ) ) by L1460 , L1448 , XBOOLE_0:3;
thus L1462: ( ExtendCycle C258 ) is non  empty by L1461 , L1439 , L1446 , L1459 , L1249;
consider C262 being (Vertex of C257) such that L1463: C262 = ( choose ( ( C257 -VSet ( rng C258 ) ) /\ ( C257 -VSet ( rng C259 ) ) ) ) and L1464: ( CatCycles (C258 , C259) ) = ( ( Rotate (C258 , C262) ) ^ ( Rotate (C259 , C262) ) ) by L1461 , L1459 , L1214;
L1465: ( ( C257 -VSet ( rng C258 ) ) /\ ( C257 -VSet ( rng C259 ) ) ) <> ( {} ) by L1461 , XBOOLE_0:def 7;
L1466: C262 in ( C257 -VSet ( rng C259 ) ) by L1465 , L1463 , XBOOLE_0:def 4;
L1467: ( rng ( Rotate (C259 , C262) ) ) = ( rng C259 ) by L1466 , L1206;
L1468: C262 in ( C257 -VSet ( rng C258 ) ) by L1465 , L1463 , XBOOLE_0:def 4;
L1469: ( rng ( Rotate (C258 , C262) ) ) = ( rng C258 ) by L1468 , L1206;
L1470: ( rng ( ExtendCycle C258 ) ) = ( ( rng C258 ) \/ ( rng C259 ) ) by L1469 , L1446 , L1464 , L1467 , FINSEQ_1:31;
L1471: ( card ( rng ( ExtendCycle C258 ) ) ) = ( ( card ( rng C258 ) ) + ( card ( rng C259 ) ) ) by L1470 , L1459 , CARD_2:40;
L1472: C259 is non  empty by L1445 , L1449 , L1456 , L1385;
thus L1473: thesis by L1472 , L1471 , XREAL_1:29;
end;
begin
definition
let C263 being Graph;
let C264 being (Path of C263);
attr C264 is  Eulerian
means
:L1474: ( rng C264 ) = (the carrier' of C263);
end;
theorem
L1476: (for B216 being  connected Graph holds (for B217 being (Path of B216) holds (for B218 being (FinSequence of (the carrier of B216)) holds ((B217 is  Eulerian & B218 is_vertex_seq_of B217) implies ( rng B218 ) = (the carrier of B216)))))
proof
let C265 being  connected Graph;
let C266 being (Path of C265);
let C267 being (FinSequence of (the carrier of C265));
assume that
L1477: C266 is  Eulerian
and
L1478: C267 is_vertex_seq_of C266
and
L1479: ( rng C267 ) <> (the carrier of C265);
consider C268 being set such that L1480: ((C268 in ( rng C267 ) & (not C268 in (the carrier of C265))) or (C268 in (the carrier of C265) & (not C268 in ( rng C267 )))) by L1479 , TARSKI:1;
L1481: C267 <> ( {} ) by L1478 , L48;
consider C269 being set such that L1482: C269 in ( rng C267 ) by L1481 , XBOOLE_0:def 1;
L1483: ( rng C267 ) c= (the carrier of C265) by FINSEQ_1:def 4;
consider C270 being (Chain of C265), C271 being (FinSequence of (the carrier of C265)) such that L1484: C270 is non  empty and L1485: (C271 is_vertex_seq_of C270 & ( C271 . 1 ) = C268) and L1486: ( C271 . ( len C271 ) ) = C269 by L1483 , L1480 , L1482 , L283;
L1487: 1 <= ( len C270 ) by L1484 , NAT_1:14;
L1488: ( rng C266 ) = (the carrier' of C265) by L1477 , L1474;
reconsider D354 = C270 as (FinSequence of (the carrier' of C265)) by MSSCYC_1:def 1;
L1489: 1 in ( dom D354 ) by L1487 , FINSEQ_3:25;
L1490: ( D354 . 1 ) in (the carrier' of C265) by L1489 , PARTFUN1:4;
L1491: (( (the Target of C265) . ( D354 . 1 ) ) in ( rng C267 ) & ( (the Source of C265) . ( D354 . 1 ) ) in ( rng C267 )) by L1490 , L1478 , L1488 , L262;
thus L1492: contradiction by L1491 , L1483 , L1480 , L1485 , L1487 , L243;
end;
theorem
L1493: (for B219 being  finite  connected Graph holds ((ex B220 being  cyclic (Path of B219) st B220 is  Eulerian) iff (for B221 being (Vertex of B219) holds ( Degree B221 ) is  even)))
proof
let C272 being  finite  connected Graph;
set D355 = (the carrier' of C272);
thus L1494:now
given C273 being  cyclic (Path of C272) such that
L1495: C273 is  Eulerian;

let C274 being (Vertex of C272);
consider C275 being (FinSequence of (the carrier of C272)) such that L1496: C275 is_vertex_seq_of C273 and L1497: ( C275 . 1 ) = ( C275 . ( len C275 ) ) by MSSCYC_1:def 2;
L1498: ( rng C275 ) = (the carrier of C272) by L1495 , L1496 , L1476;
L1499: ( Degree (C274 , ( rng C273 )) ) is  even by L1498 , L1496 , L957;
L1500: ( rng C273 ) = (the carrier' of C272) by L1495 , L1474;
thus L1501: ( Degree C274 ) is  even by L1500 , L1499 , L481;
end;
assume L1502: (for B222 being (Vertex of C272) holds ( Degree B222 ) is  even);
per cases ;
suppose L1503: C272 is  void;

L1504: ( {} ) is (Element of ( C272 -CycleSet )) by L1122;
reconsider D356 = ( {} ) as  cyclic (Path of C272) by L1504 , L1105;
take D356;
L1505: (the carrier' of C272) is  empty by L1503;
thus L1506: ( rng D356 ) = (the carrier' of C272) by L1505;
end;
suppose L1507: C272 is non  void;

reconsider D357 = C272 as non  void  finite  connected Graph by L1507;
reconsider D358 = ( choose (the carrier of C272) ) as (Vertex of D357);
deffunc H1(Nat , (Element of ( D357 -CycleSet ))) = ( ExtendCycle $2 );
L1508: ( choose ( D355 -CycleSet D358 ) ) in ( D355 -CycleSet D358 );
reconsider D359 = ( choose ( D355 -CycleSet D358 ) ) as (Element of ( D357 -CycleSet )) by L1508;
consider C276 being (Function of ( NAT ) , ( D357 -CycleSet )) such that L1509: (( C276 . ( 0 ) ) = D359 & (for B223 being Nat holds ( C276 . ( B223 + 1 ) ) = H1(B223 , (( C276 . B223 ) qua (Element of ( D357 -CycleSet )))))) from NAT_1:sch 12;
L1510:
now
let C277 being (Vertex of C272);
L1511: ( Degree C277 ) = ( Degree (C277 , D355) ) by L481;
thus L1512: ( Degree (C277 , D355) ) is  even by L1511 , L1502;
end;
L1513: ( Degree D358 ) = ( Degree (D358 , D355) ) by L481;
L1514: ( Degree (D358 , D355) ) <> ( 0 ) by L1513 , L655;
L1515:
now
defpred S12[ (Element of ( NAT )) ] means (ex B224 being (Element of ( D357 -CycleSet )) st (B224 is non  empty & B224 = ( C276 . $1 ) & $1 <= ( card ( rng B224 ) )));
reconsider D360 = D355 as  finite set by GRAPH_1:def 11;
assume L1516: (not (ex B225 being (Element of ( NAT )) st (ex B226 being (Element of ( D357 -CycleSet )) st (B226 = ( C276 . B225 ) & ( rng B226 ) = (the carrier' of C272)))));
L1517: (for R14 being (Element of ( NAT )) holds (S12[ R14 ] implies S12[ ( R14 + 1 ) ]))
proof
let C278 being (Element of ( NAT ));
given C279 being (Element of ( D357 -CycleSet )) such that
L1518: C279 is non  empty
and
L1519: C279 = ( C276 . C278 )
and
L1520: C278 <= ( card ( rng C279 ) );

reconsider D361 = ( ExtendCycle C279 ) as (Element of ( D357 -CycleSet ));
take D361;
L1521: ( rng C279 ) <> D360 by L1516 , L1519;
thus L1522: D361 is non  empty by L1521 , L1502 , L1518 , L1437;
thus L1523: D361 = ( C276 . ( C278 + 1 ) ) by L1509 , L1519;
L1524: ( rng C279 ) <> D360 by L1516 , L1519;
L1525: C278 < ( card ( rng D361 ) ) by L1524 , L1502 , L1518 , L1520 , L1437 , XXREAL_0:2;
thus L1526: thesis by L1525 , NAT_1:13;
end;
L1527: S12[ ( 0 ) ]
proof
take D359;
thus L1528: D359 is non  empty by L1510 , L1514 , L1385;
thus L1529: D359 = ( C276 . ( 0 ) ) by L1509;
thus L1530: thesis;
end;
L1531: (for B227 being (Element of ( NAT )) holds S12[ B227 ]) from NAT_1:sch 1(L1527 , L1517);
consider C280 being (Element of ( C272 -CycleSet )) such that L1532: C280 is non  empty and L1533: C280 = ( C276 . ( ( card D360 ) + 1 ) ) and L1534: ( ( card D360 ) + 1 ) <= ( card ( rng C280 ) ) by L1531;
L1535: ( rng C280 ) c= D360 by FINSEQ_1:def 4;
L1536: ( card ( rng C280 ) ) <= ( card D360 ) by L1535 , NAT_1:43;
L1537: ( ( card D360 ) + 1 ) <= ( ( card D360 ) + ( 0 ) ) by L1536 , L1534 , XXREAL_0:2;
thus L1538: contradiction by L1537 , XREAL_1:6;
end;
consider C281 being (Element of ( NAT )), C282 being (Element of ( C272 -CycleSet )) such that L1539: C282 = ( C276 . C281 ) and L1540: ( rng C282 ) = (the carrier' of C272) by L1515;
reconsider D362 = C282 as  cyclic (Path of C272) by L1105;
take D362;
thus L1541: ( rng D362 ) = (the carrier' of C272) by L1540;
end;
end;
theorem
L1543: (for B228 being  finite  connected Graph holds ((ex B229 being (Path of B228) st (B229 is non  cyclic & B229 is  Eulerian)) iff (ex B230 , B231 being (Vertex of B228) st (B230 <> B231 & (for B232 being (Vertex of B228) holds (( Degree B232 ) is  even iff (B232 <> B230 & B232 <> B231)))))))
proof
let C283 being  finite  connected Graph;
set D363 = (the carrier of C283);
set D364 = (the carrier' of C283);
L1544:
now
assume L1545: { D364 } meets D364;
consider C284 being set such that L1546: C284 in { D364 } and L1547: C284 in D364 by L1545 , XBOOLE_0:3;
L1548: C284 = D364 by L1546 , TARSKI:def 1;
thus L1549: contradiction by L1548 , L1547;
end;
thus L1550:now
given C285 being (Path of C283) such that
L1551: C285 is non  cyclic
and
L1552: C285 is  Eulerian;

consider C286 being (FinSequence of (the carrier of C283)) such that L1553: C286 is_vertex_seq_of C285 by GRAPH_2:33;
L1554: ( len C286 ) = ( ( len C285 ) + 1 ) by L1553 , GRAPH_2:def 6;
L1555: 1 <= ( len C286 ) by L1554 , NAT_1:11;
L1556: (1 in ( dom C286 ) & ( len C286 ) in ( dom C286 )) by L1555 , FINSEQ_3:25;
reconsider D365 = ( C286 . 1 ) , D366 = ( C286 . ( len C286 ) ) as (Vertex of C283) by L1556 , FINSEQ_2:11;
take D367 = D365;
take D368 = D366;
thus L1557: D367 <> D368 by L1551 , L1553 , MSSCYC_1:def 2;
let C287 being (Vertex of C283);
L1558: ( Degree C287 ) = ( Degree (C287 , (the carrier' of C283)) ) by L481
.= ( Degree (C287 , ( rng C285 )) ) by L1552 , L1474;
thus L1559: (( Degree C287 ) is  even iff (C287 <> D367 & C287 <> D368)) by L1558 , L1551 , L1553 , L1065;
end;
given C288 , C289 being (Vertex of C283) such that
L1560: C288 <> C289
and
L1561: (for B233 being (Vertex of C283) holds (( Degree B233 ) is  even iff (B233 <> C288 & B233 <> C289)));

set D369 = ( AddNewEdge (C288 , C289) );
set D370 = (the carrier' of D369);
L1562: (the carrier' of D369) = ( (the carrier' of C283) \/ { D364 } ) by L676;
L1563: D364 in { D364 } by TARSKI:def 1;
L1564: D364 in (the carrier' of D369) by L1563 , L1562 , XBOOLE_0:def 3;
L1565: D364 = ( D370 /\ D364 ) by L1562 , XBOOLE_1:21;
L1566: (for B234 being (Vertex of D369) holds ( Degree B234 ) is  even)
proof
let C290 being (Vertex of D369);
reconsider D371 = C290 as (Vertex of C283) by L676;
L1567: ( Degree C290 ) = ( Degree (C290 , D370) ) by L481;
L1568: ( Degree (D371 , D370) ) = ( Degree (D371 , D364) ) by L1565 , L595;
per cases ;
suppose L1569: (C290 <> C288 & C290 <> C289);

L1570: ( Degree C290 ) = ( Degree (D371 , D370) ) by L1569 , L1567 , L952
.= ( Degree D371 ) by L1568 , L481;
thus L1571: thesis by L1570 , L1561 , L1569;
end;
suppose L1572: (D371 = C288 or D371 = C289);

reconsider D372 = ( Degree D371 ) as  odd (Element of ( NAT )) by L1572 , L1561;
L1573: ( D372 + 1 ) is  even;
L1574: ( Degree C290 ) = ( ( Degree (D371 , D370) ) + 1 ) by L1560 , L1564 , L1567 , L1572 , L940
.= ( ( Degree D371 ) + 1 ) by L1568 , L481;
thus L1575: thesis by L1574 , L1573;
end;
end;
consider C291 being  cyclic (Path of D369) such that L1577: C291 is  Eulerian by L1566 , L1493;
L1578: ( rng C291 ) = (the carrier' of D369) by L1577 , L1474;
consider C292 being Nat such that L1579: C292 in ( dom C291 ) and L1580: ( C291 . C292 ) = D364 by L1578 , L1564 , FINSEQ_2:10;
consider C293 being  cyclic (Path of D369) such that L1581: ( C293 . 1 ) = ( C291 . C292 ) and L1582: ( len C293 ) = ( len C291 ) and L1583: ( rng C293 ) = ( rng C291 ) by L1579 , L192;
reconsider D373 = ( (( 1 + 1 ) , ( len C293 )) -cut C293 ) as (Path of D369) by L64;
consider C294 being (FinSequence of (the carrier of D369)) such that L1584: C294 is_vertex_seq_of C293 by GRAPH_2:33;
L1585:
now
assume L1586: D364 in ( rng D373 );
consider C295 being Nat such that L1587: C295 in ( dom D373 ) and L1588: ( D373 . C295 ) = D364 by L1586 , FINSEQ_2:10;
consider C296 being (Element of ( NAT )) such that L1589: C296 in ( dom C293 ) and L1590: ( C293 . C296 ) = ( D373 . C295 ) and L1591: ( C296 + 1 ) = ( ( 1 + 1 ) + C295 ) and L1592: ( 1 + 1 ) <= C296 and L1593: C296 <= ( len C293 ) by L1587 , L26;
L1594: 1 in ( dom C293 ) by L1589 , FINSEQ_5:6 , RELAT_1:38;
L1595: C296 = 1 by L1594 , L1580 , L1581 , L1588 , L1589 , L1590 , FUNCT_1:def 4;
thus L1596: contradiction by L1595 , L1592;
end;
L1597: (1 <= C292 & C292 <= ( len C291 )) by L1579 , FINSEQ_3:25;
L1598: 1 <= ( len C291 ) by L1597 , XXREAL_0:2;
reconsider D374 = ( (1 , 1) -cut C293 ) as (Chain of D369) by L1598 , L1582 , GRAPH_2:41;
L1599: C293 = ( D374 ^ ( (( 1 + 1 ) , ( len C293 )) -cut C293 ) ) by L1597 , L1582 , GRAPH_2:9 , XXREAL_0:2;
reconsider D375 = ( (( 1 + 1 ) , ( len C294 )) -cut C294 ) as (FinSequence of (the carrier of D369));
L1600: ( len C294 ) = ( ( len C293 ) + 1 ) by L1584 , GRAPH_2:def 6;
L1601:
now
consider C297 being (Chain of C283), C298 being (FinSequence of D363) such that L1602: C297 is non  empty and L1603: C298 is_vertex_seq_of C297 and L1604: ( C298 . 1 ) = C288 and L1605: ( C298 . ( len C298 ) ) = C289 by L1560 , L283;
reconsider D376 = C297 as (FinSequence of (the carrier' of C283)) by MSSCYC_1:def 1;
L1606: 1 in ( dom D376 ) by L1602 , FINSEQ_5:6;
L1607: (( rng D376 ) c= D364 & ( D376 . 1 ) in ( rng D376 )) by L1606 , FINSEQ_1:def 4 , FUNCT_1:def 3;
L1608: ( D376 . 1 ) in D364 by L1607;
L1609: ( D376 . 1 ) in (the carrier' of D369) by L1562 , L1607 , XBOOLE_0:def 3;
consider C299 being Nat such that L1610: C299 in ( dom C291 ) and L1611: ( C291 . C299 ) = ( D376 . 1 ) by L1609 , L1578 , FINSEQ_2:10;
assume L1612: ( len C291 ) = 1;
L1613: (1 <= C299 & C299 <= ( len C291 )) by L1610 , FINSEQ_3:25;
L1614: C299 = 1 by L1613 , L1612 , XXREAL_0:1;
L1615: C292 = 1 by L1597 , L1612 , XXREAL_0:1;
thus L1616: contradiction by L1615 , L1580 , L1608 , L1611 , L1614;
end;
L1617: 1 < ( len C291 ) by L1601 , L1598 , XXREAL_0:1;
L1618: ( 1 + 1 ) <= ( len C291 ) by L1617 , NAT_1:13;
L1619: D375 is_vertex_seq_of D373 by L1618 , L1582 , L1584 , L1600 , GRAPH_2:42;
reconsider D377 = D375 as (FinSequence of (the carrier of C283)) by L676;
reconsider D378 = D373 as (Path of C283) by L1585 , L905;
take D378;
L1620: (( (the Source of D369) . D364 ) = C288 & ( (the Target of D369) . D364 ) = C289) by L696;
L1621:
now
L1622: ( 1 + 1 ) <= ( ( len C293 ) + 1 ) by L1618 , L1582 , NAT_1:12;
L1623: ( 1 + 1 ) <= ( ( len C294 ) + 1 ) by L1622 , L1600 , NAT_1:12;
L1624: ( ( len D377 ) + ( 1 + 1 ) ) = ( ( len C293 ) + ( 1 + 1 ) ) by L1623 , L1600 , L12;
L1625: ( ( 0 ) + 1 ) <= ( len D377 ) by L1624 , L1597 , L1582 , XXREAL_0:2;
consider C300 being (Element of ( NAT )) such that L1626: ( 0 ) <= C300 and L1627: C300 < ( len D377 ) and L1628: ( len D377 ) = ( C300 + 1 ) by L1625 , GRAPH_2:1;
L1629: ( ( ( len D377 ) + 1 ) + 1 ) = ( ( len D377 ) + ( 1 + 1 ) )
.= ( ( len C294 ) + 1 ) by L1623 , L12;
L1630: ( len C294 ) = ( C300 + ( 1 + 1 ) ) by L1629 , L1628;
L1631: ( C294 . 1 ) = ( C294 . ( len C294 ) ) by L1584 , MSSCYC_1:6;
L1632: ((( C294 . 1 ) = C288 & ( C294 . ( 1 + 1 ) ) = C289) or (( C294 . 1 ) = C289 & ( C294 . ( 1 + 1 ) ) = C288)) by L1620 , L1580 , L1598 , L1581 , L1582 , L1584 , L243;
assume L1633: ( D377 . 1 ) = ( D377 . ( len D377 ) );
L1634: ( D377 . ( ( 0 ) + 1 ) ) = ( C294 . ( ( 1 + 1 ) + ( 0 ) ) ) by L1597 , L1582 , L1623 , L1624 , L12;
thus L1635: contradiction by L1634 , L1560 , L1633 , L1623 , L1627 , L1628 , L1630 , L1631 , L1632 , L12;
end;
thus L1636: D378 is non  cyclic by L1621 , L1619 , L1585 , L919 , MSSCYC_1:6;
L1637: (( rng <* D364 *> ) = { D364 } & D374 = <* D364 *>) by L1580 , L1598 , L1581 , L1582 , FINSEQ_1:39 , GRAPH_2:6;
L1638: (( rng C293 ) = ( { D364 } \/ ( rng D378 ) ) & { D364 } misses ( rng D378 )) by L1637 , L1599 , FINSEQ_1:31 , FINSEQ_3:91;
thus L1639: ( rng D378 ) = D364 by L1638 , L1562 , L1578 , L1583 , L1544 , XBOOLE_1:72;
end;
