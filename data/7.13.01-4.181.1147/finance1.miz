:: Elementary Introduction to Stochastic Finance in Discrete Time
::  by Peter Jaeger
::
:: Received March 22, 2011
:: Copyright (c) 2011-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FINANCE1, NUMBERS, XBOOLE_0, PROB_1, SUBSET_1, FUNCT_1, TARSKI,
      RELAT_1, CARD_1, ARYTM_1, CARD_3, PROB_3, NAT_1, ARYTM_3, XREAL_0,
      ORDINAL1, XXREAL_0, SERIES_1, EQREL_1, MEASURE6, SEQ_1, XXREAL_1,
      MESFUNC1, RANDOM_1, RANDOM_2, FUNCOP_1, VALUED_1;
 notations TARSKI, XBOOLE_0, SUBSET_1, ORDINAL1, XXREAL_0, NAT_1, XREAL_0,
      NUMBERS, FUNCT_1, RELSET_1, FUNCT_2, PROB_3, SERIES_1, PROB_1, MEASURE6,
      SEQ_1, BINOP_2, MESFUNC1, MESFUNC6, RANDOM_1, XXREAL_1, RCOMP_1,
      FUNCOP_1, VALUED_1, RANDOM_2;
 constructors REAL_1, SEQ_1, PROB_3, SERIES_1, BINOP_2, RELSET_1, MEASURE6,
      RCOMP_1, MESFUNC1, MESFUNC6, RANDOM_2;
 registrations XBOOLE_0, SUBSET_1, ORDINAL1, RELSET_1, NUMBERS, XREAL_0,
      MEMBERED, PROB_1, VALUED_0, XXREAL_0, NAT_1, XCMPLX_0, VALUED_1, FUNCT_2;
 requirements SUBSET, NUMERALS, BOOLE, ARITHM, REAL;
 definitions XXREAL_0, PROB_1, SUBSET_1, TARSKI, FUNCT_2;
 theorems SERIES_1, PROB_1, PROB_3, XBOOLE_0, NAT_1, FUNCT_2, XXREAL_0,
      ORDINAL1, TARSKI, XREAL_1, XXREAL_1, MESFUNC1, MEASURE6, FINSUB_1,
      MESFUNC6, XREAL_0, RANDOM_1, RANDOM_2, FUNCOP_1, VALUED_1, FRECHET,
      XBOOLE_1;
 schemes NAT_1, FUNCT_2, RECDEF_1;

begin
notation
let C1 , C2 being  real number;
synonym halfline_fin (C1 , C2) for [.C1 , C2 .[;
end;
definition
let C3 , C4 being  real number;
redefine func halfline_fin (C3 , C4) -> (Subset of ( REAL ));

coherence
proof
L2: ( halfline_fin (C3 , C4) ) = [. C3 , C4 .[;
thus L3: thesis by L2;
end;
end;
theorem
L5: (for B1 being  real number holds ( ( REAL ) \ [. B1 , ( +infty ) .[ ) = ]. ( -infty ) , B1 .[)
proof
let C5 being  real number;
L6: C5 in ( REAL ) by XREAL_0:def 1;
L7: (for B2 being set holds (B2 in ( ( REAL ) \ [. C5 , ( +infty ) .[ ) iff B2 in ]. ( -infty ) , C5 .[))
proof
let C6 being set;
thus L8:now
assume L9: C6 in ( ( REAL ) \ [. C5 , ( +infty ) .[ );
L10: (C6 in ]. ( -infty ) , ( +infty ) .[ & (not C6 in [. C5 , ( +infty ) .[)) by L9 , XBOOLE_0:def 5 , XXREAL_1:224;
consider C7 being (Element of ( REAL )) such that L11: C6 = C7 by L9;
L12: (C7 in ]. ( -infty ) , ( +infty ) .[ & (not C7 >= C5)) by L11 , L10 , XXREAL_1:236;
thus L13: C6 in ]. ( -infty ) , C5 .[ by L12 , L11 , XXREAL_1:233;
end;
assume L14: C6 in ]. ( -infty ) , C5 .[;
L15: (C5 in ( REAL ) & C6 in ]. ( -infty ) , C5 .[ & C6 in { B3 where B3 is (Element of ( ExtREAL )) : (( -infty ) < B3 & B3 < C5) }) by L14 , XREAL_0:def 1 , XXREAL_1:def 4;
consider C8 being (Element of ( ExtREAL )) such that L16: (C8 = C6 & ( -infty ) < C8 & C8 < C5) by L15;
consider C9 being (Element of ( ExtREAL )) such that L17: C6 = C9 by L16;
reconsider D1 = C9 as (Element of ( REAL )) by L6 , L16 , L17 , XXREAL_0:47;
L18: D1 < C5 by L14 , L17 , XXREAL_1:233;
L19: (D1 in ( REAL ) & (not D1 in [. C5 , ( +infty ) .[)) by L18 , XXREAL_1:236;
thus L20: thesis by L19 , L17 , XBOOLE_0:def 5;
end;
thus L21: thesis by L7 , TARSKI:1;
end;
theorem
L22: (for B4 being  real number holds ( ( REAL ) \ ]. ( -infty ) , B4 .[ ) = [. B4 , ( +infty ) .[)
proof
let C10 being  real number;
L23: C10 in ( REAL ) by XREAL_0:def 1;
L24: (for B5 being set holds (B5 in ( ( REAL ) \ ]. ( -infty ) , C10 .[ ) iff B5 in [. C10 , ( +infty ) .[))
proof
let C11 being set;
thus L25:now
assume L26: C11 in ( ( REAL ) \ ]. ( -infty ) , C10 .[ );
L27: (C11 in ]. ( -infty ) , ( +infty ) .[ & (not C11 in ]. ( -infty ) , C10 .[)) by L26 , XBOOLE_0:def 5 , XXREAL_1:224;
consider C12 being (Element of ( REAL )) such that L28: C11 = C12 by L26;
L29: (C12 in ]. ( -infty ) , ( +infty ) .[ & (not C12 < C10)) by L28 , L27 , XXREAL_1:233;
thus L30: C11 in [. C10 , ( +infty ) .[ by L29 , L28 , XXREAL_1:236;
end;
assume L31: C11 in [. C10 , ( +infty ) .[;
L32: (C10 in ( REAL ) & C11 in [. C10 , ( +infty ) .[ & C11 in { B6 where B6 is (Element of ( ExtREAL )) : (C10 <= B6 & B6 < ( +infty )) }) by L31 , XREAL_0:def 1 , XXREAL_1:def 2;
consider C13 being (Element of ( ExtREAL )) such that L33: (C13 = C11 & C10 <= C13 & C13 < ( +infty )) by L32;
consider C14 being (Element of ( ExtREAL )) such that L34: C11 = C14 by L33;
reconsider D2 = C14 as (Element of ( REAL )) by L33 , L34 , L23 , XXREAL_0:46;
L35: D2 >= C10 by L31 , L34 , XXREAL_1:236;
L36: (D2 in ( REAL ) & (not D2 in ]. ( -infty ) , C10 .[)) by L35 , XXREAL_1:233;
thus L37: thesis by L36 , L34 , XBOOLE_0:def 5;
end;
thus L38: thesis by L24 , TARSKI:1;
end;
definition
let C15 , C16 being  real number;
func half_open_sets (C15 , C16) -> (SetSequence of ( REAL )) means 
:L39: (( it . ( 0 ) ) = ( halfline_fin (C15 , ( C16 + 1 )) ) & (for B7 being (Element of ( NAT )) holds ( it . ( B7 + 1 ) ) = ( halfline_fin (C15 , ( C16 + ( 1 / ( B7 + 1 ) ) )) )));
existence
proof
defpred S1[ set , set , set ] means (for B8 , B9 being (Subset of ( REAL )) holds (for B10 being Nat holds ((B10 = $1 & B8 = $2 & B9 = $3) implies B9 = ( halfline_fin (C15 , ( C16 + ( 1 / ( B10 + 1 ) ) )) ))));
L40: (for B11 being (Element of ( NAT )) holds (for B12 being (Subset of ( REAL )) holds (ex B13 being (Subset of ( REAL )) st S1[ B11 , B12 , B13 ])))
proof
let C17 being (Element of ( NAT ));
let C18 being (Subset of ( REAL ));
take ( halfline_fin (C15 , ( C16 + ( 1 / ( C17 + 1 ) ) )) );
thus L41: thesis;
end;
consider C19 being (SetSequence of ( REAL )) such that L42: ( C19 . ( 0 ) ) = ( halfline_fin (C15 , ( C16 + 1 )) ) and L43: (for B14 being (Element of ( NAT )) holds S1[ B14 , ( C19 . B14 ) , ( C19 . ( B14 + 1 ) ) ]) from RECDEF_1:sch 2(L40);
take C19;
thus L44: ( C19 . ( 0 ) ) = ( halfline_fin (C15 , ( C16 + 1 )) ) by L42;
let C20 being Nat;
reconsider D3 = C20 as (Element of ( NAT )) by ORDINAL1:def 12;
L45: S1[ D3 , ( C19 . D3 ) , ( C19 . ( D3 + 1 ) ) ] by L43;
thus L46: thesis by L45;
end;
uniqueness
proof
let C21 , C22 being (SetSequence of ( REAL ));
assume that
L47: (( C21 . ( 0 ) ) = ( halfline_fin (C15 , ( C16 + 1 )) ) & (for B15 being (Element of ( NAT )) holds ( C21 . ( B15 + 1 ) ) = ( halfline_fin (C15 , ( C16 + ( 1 / ( B15 + 1 ) ) )) )))
and
L48: (( C22 . ( 0 ) ) = ( halfline_fin (C15 , ( C16 + 1 )) ) & (for B16 being (Element of ( NAT )) holds ( C22 . ( B16 + 1 ) ) = ( halfline_fin (C15 , ( C16 + ( 1 / ( B16 + 1 ) ) )) )));
defpred S2[ set ] means ( C21 . $1 ) = ( C22 . $1 );
L49: (for B17 being set holds (B17 in ( NAT ) implies S2[ B17 ]))
proof
let C23 being set;
assume L50: C23 in ( NAT );
reconsider D4 = C23 as (Element of ( NAT )) by L50;
L51: S2[ ( 0 ) ] by L47 , L48;
L52: (for B18 being (Element of ( NAT )) holds (S2[ B18 ] implies S2[ ( B18 + 1 ) ]))
proof
let C24 being (Element of ( NAT ));
assume L53: ( C21 . C24 ) = ( C22 . C24 );
thus L54: ( C21 . ( C24 + 1 ) ) = ( halfline_fin (C15 , ( C16 + ( 1 / ( C24 + 1 ) ) )) ) by L47
.= ( C22 . ( C24 + 1 ) ) by L48;
end;
L55: (for B19 being (Element of ( NAT )) holds S2[ B19 ]) from NAT_1:sch 1(L51 , L52);
L56: ( C21 . D4 ) = ( C22 . D4 ) by L55;
thus L57: thesis by L56;
end;
thus L58: thesis by L49 , FUNCT_2:12;
end;
end;
definition
mode pricefunction
 -> Real_Sequence
means :L60: (( it . ( 0 ) ) = 1 & (for B20 being (Element of ( NAT )) holds ( it . B20 ) >= ( 0 )));
existence
proof
reconsider D5 = 1 as (Element of ( REAL ));
take ( ( NAT ) --> D5 );
thus L61: thesis by FUNCOP_1:7;
end;
end;
notation
let C25 , C26 being Real_Sequence;
synonym ElementsOfBuyPortfolio (C25 , C26) for C25 (#) C26;
end;
definition
let C27 , C28 being Real_Sequence;
redefine func ElementsOfBuyPortfolio (C27 , C28) -> Real_Sequence;

coherence
proof
L64: ( ElementsOfBuyPortfolio (C27 , C28) ) = ( C27 (#) C28 );
thus L65: thesis by L64;
end;
end;
definition
let C29 being Nat;
let C30 , C31 being Real_Sequence;
func BuyPortfolioExt (C30 , C31 , C29) -> (Element of ( REAL )) equals 
( ( Partial_Sums ( ElementsOfBuyPortfolio (C30 , C31) ) ) . C29 );
coherence;
func BuyPortfolio (C30 , C31 , C29) -> (Element of ( REAL )) equals 
( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C30 , C31) ) ^\ 1 ) ) . ( C29 - 1 ) );
coherence;
end;
definition
let C32 , C33 being set;
let C34 being (SigmaField of C32);
let C35 being (SigmaField of C33);
let C36 being Function;
pred C36 is_random_variable_on C34 , C35
means
:L68: (for B21 being (Element of C35) holds { B22 where B22 is (Element of C32) : ( C36 . B22 ) is (Element of B21) } is (Element of C34))
;end;
definition
let C37 , C38 being set;
let C39 being (SigmaField of C37);
let C40 being (SigmaField of C38);
func set_of_random_variables_on (C39 , C40) equals 
{ B23 where B23 is (Function of C37 , C38) : B23 is_random_variable_on C39 , C40 };
coherence;
end;
registration
let R1 being non  empty set;
let R2 being non  empty set;
let R4 being (SigmaField of R1);
let R6 being (SigmaField of R2);
cluster ( set_of_random_variables_on (R4 , R6) ) -> non  empty;
coherence
proof
set D6 = ( set_of_random_variables_on (R4 , R6) );
L71: (ex B24 being (Function of R1 , R2) st B24 is_random_variable_on R4 , R6)
proof
set D7 = the (Element of R2);
set D8 = ( R1 --> D7 );
L72: (D8 is_random_variable_on R4 , R6 iff (for B25 being (Element of R6) holds { B26 where B26 is (Element of R1) : ( D8 . B26 ) is (Element of B25) } is (Element of R4))) by L68;
L73: (for B27 being (Element of R6) holds { B28 where B28 is (Element of R1) : ( D8 . B28 ) is (Element of B27) } is (Element of R4))
proof
let C41 being (Element of R6);
set D9 = { B29 where B29 is (Element of R1) : ( D8 . B29 ) is (Element of C41) };
per cases ;
suppose L74: D7 is (Element of C41);

L75: (for B30 being set holds (B30 in D9 iff B30 in R1))
proof
let C42 being set;
thus L76:now
assume L77: C42 in D9;
L78: (ex B31 being (Element of R1) st (B31 = C42 & ( D8 . B31 ) is (Element of C41))) by L77;
thus L79: C42 in R1 by L78;
end;
assume L80: C42 in R1;
L81: (C42 in R1 & ( D8 . C42 ) is (Element of C41)) by L80 , L74 , FUNCOP_1:7;
thus L82: thesis by L81;
end;
L83: D9 = R1 by L75 , TARSKI:1;
thus L84: thesis by L83 , PROB_1:23;
end;
suppose L85: (not D7 is (Element of C41));

L86: (for B32 being set holds (not B32 in D9))
proof
let C43 being set;
assume L87: C43 in D9;
L88: (ex B33 being (Element of R1) st (B33 = C43 & ( D8 . B33 ) is (Element of C41))) by L87;
thus L89: thesis by L88 , L85 , FUNCOP_1:7;
end;
L90: D9 = ( {} ) by L86 , XBOOLE_0:def 1;
thus L91: thesis by L90 , PROB_1:4;
end;
end;
thus L93: thesis by L73 , L72;
end;
consider C44 being (Function of R1 , R2) such that L94: C44 is_random_variable_on R4 , R6 by L71;
L95: C44 in D6 by L94;
thus L96: thesis by L95;
end;
end;
definition
let C45 , C46 being non  empty set;
let C47 being (SigmaField of C45);
let C48 being (SigmaField of C46);
let C49 being set;
assume that
L98: C49 = ( set_of_random_variables_on (C47 , C48) );
let C50 being (Element of C49);
func Change_Element_to_Func (C47 , C48 , C50) -> (Function of C45 , C46) equals 
:L99: C50;
coherence
proof
L100: C50 in C49 by L98;
L101: (ex B34 being (Function of C45 , C46) st (B34 = C50 & B34 is_random_variable_on C47 , C48)) by L100 , L98;
thus L102: thesis by L101;
end;
end;
definition
let C51 being non  empty set;
let C52 being (SigmaField of C51);
let C53 being non  empty set;
let C54 being (Element of C53);
func ElementsOfPortfolioValueProb_fut (C52 , C54) -> (Function of C51 , ( REAL )) means 
:L104: (for B35 being (Element of C51) holds ( it . B35 ) = ( ( Change_Element_to_Func (C52 , ( Borel_Sets ) , C54) ) . B35 ));
existence
proof
deffunc H1((Element of C51)) = ( ( Change_Element_to_Func (C52 , ( Borel_Sets ) , C54) ) . $1 );
L105: (ex B36 being (Function of C51 , ( REAL )) st (for B37 being (Element of C51) holds ( B36 . B37 ) = H1(B37))) from FUNCT_2:sch 4;
thus L106: thesis by L105;
end;
uniqueness
proof
let C55 , C56 being (Function of C51 , ( REAL ));
assume that
L107: (for B38 being (Element of C51) holds ( C55 . B38 ) = ( ( Change_Element_to_Func (C52 , ( Borel_Sets ) , C54) ) . B38 ))
and
L108: (for B39 being (Element of C51) holds ( C56 . B39 ) = ( ( Change_Element_to_Func (C52 , ( Borel_Sets ) , C54) ) . B39 ));
let C57 being (Element of C51);
L109: (( C55 . C57 ) = ( ( Change_Element_to_Func (C52 , ( Borel_Sets ) , C54) ) . C57 ) & ( C56 . C57 ) = ( ( Change_Element_to_Func (C52 , ( Borel_Sets ) , C54) ) . C57 )) by L107 , L108;
thus L110: thesis by L109;
end;
end;
definition
let C58 being Nat;
let C59 , C60 being non  empty set;
let C61 being (SigmaField of C59);
let C62 being (SigmaField of C60);
let C63 being set;
assume that
L112: C63 = ( set_of_random_variables_on (C61 , C62) );
let C64 being (Function of ( NAT ) , C63);
func Element_Of (C61 , C62 , C64 , C58) -> (Function of C59 , C60) equals 
:L113: ( C64 . C58 );
coherence
proof
reconsider D10 = C58 as (Element of ( NAT )) by ORDINAL1:def 12;
L114: ( C64 . D10 ) in { B40 where B40 is (Function of C59 , C60) : B40 is_random_variable_on C61 , C62 } by L112;
L115: (ex B41 being (Function of C59 , C60) st (B41 = ( C64 . D10 ) & B41 is_random_variable_on C61 , C62)) by L114;
thus L116: thesis by L115;
end;
end;
definition
let C65 being non  empty set;
let C66 being (SigmaField of C65);
let C67 being non  empty set;
let C68 being (Element of C65);
let C69 being (Function of ( NAT ) , C67);
let C70 being Real_Sequence;
func ElementsOfPortfolioValue_fut (C70 , C66 , C68 , C69) -> Real_Sequence means 
:L118: (for B42 being (Element of ( NAT )) holds ( it . B42 ) = ( ( ( ElementsOfPortfolioValueProb_fut (C66 , ( C69 . B42 )) ) . C68 ) * ( C70 . B42 ) ));
existence
proof
deffunc H2((Element of ( NAT ))) = ( ( ( ElementsOfPortfolioValueProb_fut (C66 , ( C69 . $1 )) ) . C68 ) * ( C70 . $1 ) );
L119: (ex B43 being Real_Sequence st (for B44 being (Element of ( NAT )) holds ( B43 . B44 ) = H2(B44))) from FUNCT_2:sch 4;
thus L120: thesis by L119;
end;
uniqueness
proof
let C71 , C72 being Real_Sequence;
assume that
L121: (for B45 being (Element of ( NAT )) holds ( C71 . B45 ) = ( ( ( ElementsOfPortfolioValueProb_fut (C66 , ( C69 . B45 )) ) . C68 ) * ( C70 . B45 ) ))
and
L122: (for B46 being (Element of ( NAT )) holds ( C72 . B46 ) = ( ( ( ElementsOfPortfolioValueProb_fut (C66 , ( C69 . B46 )) ) . C68 ) * ( C70 . B46 ) ));
let C73 being (Element of ( NAT ));
L123: (( C71 . C73 ) = ( ( ( ElementsOfPortfolioValueProb_fut (C66 , ( C69 . C73 )) ) . C68 ) * ( C70 . C73 ) ) & ( C72 . C73 ) = ( ( ( ElementsOfPortfolioValueProb_fut (C66 , ( C69 . C73 )) ) . C68 ) * ( C70 . C73 ) )) by L121 , L122;
thus L124: thesis by L123;
end;
end;
definition
let C74 being Nat;
let C75 being Real_Sequence;
let C76 being non  empty set;
let C77 being (SigmaField of C76);
let C78 being non  empty set;
let C79 being (Function of ( NAT ) , C78);
let C80 being (Element of C76);
func PortfolioValueFutExt (C74 , C75 , C77 , C79 , C80) -> (Element of ( REAL )) equals 
( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C75 , C77 , C80 , C79) ) ) . C74 );
coherence;
func PortfolioValueFut (C74 , C75 , C77 , C79 , C80) -> (Element of ( REAL )) equals 
( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C75 , C77 , C80 , C79) ) ^\ 1 ) ) . ( C74 - 1 ) );
coherence;
end;
registration
cluster non  empty for (Element of ( Borel_Sets ));
existence
proof
consider C81 being  real number such that L127: C81 > ( -infty );
set D11 = ( halfline C81 );
set D12 = ( Family_of_halflines );
L128: D11 is non  empty by L127 , XXREAL_1:33;
L129: C81 in ( REAL ) by XREAL_0:def 1;
L130: D11 in D12 by L129;
L131: ( Family_of_halflines ) is (Subset of ( Borel_Sets )) by PROB_1:def 9;
thus L132: thesis by L131 , L130 , L128;
end;
end;
theorem
L134: (for B47 being  real number holds ([. B47 , ( +infty ) .[ is (Element of ( Borel_Sets )) & ]. ( -infty ) , B47 .[ is (Element of ( Borel_Sets ))))
proof
let C82 being  real number;
L135: C82 in ( REAL ) by XREAL_0:def 1;
set D13 = ]. ( -infty ) , C82 .[;
L136: ]. ( -infty ) , C82 .[ in ( Borel_Sets )
proof
set D14 = ( halfline C82 );
L137: (D14 in ( Family_of_halflines ) & D14 = ]. ( -infty ) , C82 .[) by L135;
L138: ( Family_of_halflines ) c= ( sigma ( Family_of_halflines ) ) by PROB_1:def 9;
thus L139: thesis by L138 , L137;
end;
L140: ( D13 ` ) in ( Borel_Sets ) by L136 , PROB_1:def 1;
thus L141: thesis by L140 , L22 , L136;
end;
theorem
L142: (for B48 , B49 being  real number holds [. B49 , B48 .[ is (Element of ( Borel_Sets )))
proof
let C83 , C84 being  real number;
set D15 = ]. ( -infty ) , C84 .[;
L143: (C83 in ( REAL ) & C84 in ( REAL )) by XREAL_0:def 1;
L144: (( -infty ) < C84 & C83 < ( +infty )) by L143 , XXREAL_0:9 , XXREAL_0:12;
L145: ( ( REAL ) \ ]. ( -infty ) , C84 .[ ) = [. C84 , ( +infty ) .[ by L22;
L146: (( D15 ` ) is (Element of ( Borel_Sets )) & ]. ( -infty ) , C83 .[ is (Element of ( Borel_Sets )) & [. C83 , ( +infty ) .[ is (Element of ( Borel_Sets ))) by L134 , L145;
L147: ( ]. ( -infty ) , C83 .[ /\ ( D15 ` ) ) is (Element of ( Borel_Sets )) by L146 , FINSUB_1:def 2;
L148: ( ]. ( -infty ) , C83 .[ /\ [. C84 , ( +infty ) .[ ) is (Element of ( Borel_Sets )) by L147 , L22;
thus L149: thesis by L148 , L144 , XXREAL_1:154;
end;
theorem
L150: (for B50 , B51 being  real number holds ( Intersection ( half_open_sets (B50 , B51) ) ) is (Element of ( Borel_Sets )))
proof
let C85 , C86 being  real number;
L151: (for B52 being (Element of ( NAT )) holds ( ( Complement ( half_open_sets (C85 , C86) ) ) . B52 ) is (Element of ( Borel_Sets )))
proof
let C87 being (Element of ( NAT ));
L152: ( ( ( half_open_sets (C85 , C86) ) . C87 ) ` ) is (Element of ( Borel_Sets ))
proof
L153: ( ( half_open_sets (C85 , C86) ) . C87 ) is (Element of ( Borel_Sets ))
proof
per cases  by NAT_1:6;
suppose L154: C87 = ( 0 );

L155: ( ( half_open_sets (C85 , C86) ) . ( 0 ) ) = ( halfline_fin (C85 , ( C86 + 1 )) ) by L39;
thus L156: thesis by L155 , L154 , L142;
end;
suppose L157: (ex B53 being Nat st C87 = ( B53 + 1 ));

consider C88 being Nat such that L158: C87 = ( C88 + 1 ) by L157;
reconsider D16 = C88 as (Element of ( NAT )) by ORDINAL1:def 12;
L159: ( ( half_open_sets (C85 , C86) ) . ( D16 + 1 ) ) = ( halfline_fin (C85 , ( C86 + ( 1 / ( D16 + 1 ) ) )) ) by L39;
thus L160: thesis by L159 , L158 , L142;
end;
end;
thus L162: thesis by L153 , PROB_1:def 1;
end;
thus L163: thesis by L152 , PROB_1:def 2;
end;
L164: ( Complement ( half_open_sets (C85 , C86) ) ) is (SetSequence of ( Borel_Sets )) by L151 , PROB_1:25;
L165: ( Union ( Complement ( half_open_sets (C85 , C86) ) ) ) is (Element of ( Borel_Sets )) by L164 , PROB_1:26;
thus L166: thesis by L165 , PROB_1:def 1;
end;
theorem
L167: (for B54 , B55 being  real number holds ( Intersection ( half_open_sets (B54 , B55) ) ) = [. B54 , B55 .])
proof
let C89 , C90 being  real number;
L168: (for B56 being set holds ((not B56 in [. C89 , C90 .]) implies (not B56 in ( Intersection ( half_open_sets (C89 , C90) ) ))))
proof
let C91 being set;
assume L169: (not C91 in [. C89 , C90 .]);
per cases  by L169;
suppose L170: (not C91 in ( REAL ));

thus L171: thesis by L170;
end;
suppose L172: (C91 in ( REAL ) & (not C91 in [. C89 , C90 .]));

reconsider D17 = C91 as (Element of ( REAL )) by L172;
L173: (not D17 in { B57 where B57 is (Element of ( ExtREAL )) : (C89 <= B57 & B57 <= C90) }) by L172 , XXREAL_1:def 1;
L174: (C89 > D17 or D17 > C90)
proof
reconsider D18 = D17 as (Element of ( ExtREAL )) by XXREAL_0:def 1;
L175: (not (D17 = D18 & C89 <= D17 & D17 <= C90)) by L173;
thus L176: thesis by L175;
end;
per cases  by L174;
suppose L177: C89 > D17;

L178: (not (for B58 being (Element of ( NAT )) holds D17 in ( ( half_open_sets (C89 , C90) ) . B58 )))
proof
take D19 = ( 0 );
L179: (D17 in ( ( half_open_sets (C89 , C90) ) . ( 0 ) ) implies D17 in ( halfline_fin (C89 , ( C90 + 1 )) )) by L39;
L180: (D17 in ( ( half_open_sets (C89 , C90) ) . ( 0 ) ) implies D17 in { B59 where B59 is (Element of ( ExtREAL )) : (C89 <= B59 & B59 < ( C90 + 1 )) }) by L179 , XXREAL_1:def 2;
L181: (ex B60 being (Element of ( ExtREAL )) st (D17 in ( ( half_open_sets (C89 , C90) ) . ( 0 ) ) implies (D17 = B60 & C89 <= B60 & B60 < ( C90 + 1 )))) by L180;
thus L182: thesis by L181 , L177;
end;
thus L183: thesis by L178 , PROB_1:13;
end;
suppose L184: D17 > C90;

consider C92 being (Element of ( NAT )) such that L185: (( 1 / C92 ) < ( D17 - C90 ) & C92 > ( 0 )) by L184 , FRECHET:36 , XREAL_1:50;
L186: ( ( 1 / C92 ) + C90 ) < ( ( D17 - C90 ) + C90 ) by L185 , XREAL_1:6;
L187: (D17 in ( Intersection ( half_open_sets (C89 , C90) ) ) implies (not ( C90 + ( 1 / C92 ) ) < D17))
proof
assume L188: D17 in ( Intersection ( half_open_sets (C89 , C90) ) );
L189: D17 in ( ( half_open_sets (C89 , C90) ) . ( C92 + 1 ) ) by L188 , PROB_1:13;
L190: D17 in [. C89 , ( C90 + ( 1 / ( C92 + 1 ) ) ) .[ by L189 , L39;
L191: D17 in { B61 where B61 is (Element of ( ExtREAL )) : (C89 <= B61 & B61 < ( C90 + ( 1 / ( C92 + 1 ) ) )) } by L190 , XXREAL_1:def 2;
consider C93 being (Element of ( ExtREAL )) such that L192: (D17 = C93 & C89 <= C93 & C93 < ( C90 + ( 1 / ( C92 + 1 ) ) )) by L191;
reconsider D20 = 1 as (Element of ( NAT ));
L193: ( C92 * 1 ) < ( ( C92 + 1 ) * 1 ) by NAT_1:13;
L194: ( D20 / ( C92 + 1 ) ) < ( D20 / C92 ) by L193 , L185 , XREAL_1:106;
L195: ( C90 + ( 1 / ( C92 + 1 ) ) ) < ( C90 + ( 1 / C92 ) ) by L194 , XREAL_1:6;
thus L196: thesis by L195 , L192 , XXREAL_0:2;
end;
thus L197: thesis by L187 , L186;
end;
end;
end;
L200: (for B62 being set holds (B62 in [. C89 , C90 .] implies B62 in ( Intersection ( half_open_sets (C89 , C90) ) )))
proof
let C94 being set;
L201: (C94 in [. C89 , C90 .] implies (for B63 being (Element of ( NAT )) holds C94 in ( ( half_open_sets (C89 , C90) ) . B63 )))
proof
assume L202: C94 in [. C89 , C90 .];
let C95 being (Element of ( NAT ));
L203: C90 < ( C90 + 1 ) by XREAL_1:29;
L204: [. C89 , C90 .] c= ( ( half_open_sets (C89 , C90) ) . C95 )
proof
per cases ;
suppose L205: C95 = ( 0 );

L206: ( ( half_open_sets (C89 , C90) ) . ( 0 ) ) = ( halfline_fin (C89 , ( C90 + 1 )) ) by L39;
thus L207: thesis by L206 , L205 , L203 , XXREAL_1:43;
end;
suppose L208: C95 > ( 0 );

consider C96 being Nat such that L209: C95 = ( C96 + 1 ) by L208 , NAT_1:6;
reconsider D21 = C96 as (Element of ( NAT )) by ORDINAL1:def 12;
L210: ( ( half_open_sets (C89 , C90) ) . ( D21 + 1 ) ) = ( halfline_fin (C89 , ( C90 + ( 1 / ( D21 + 1 ) ) )) ) by L39;
L211: C90 < ( C90 + ( 1 / C95 ) ) by L209 , XREAL_1:29;
thus L212: thesis by L211 , L210 , L209 , XXREAL_1:43;
end;
end;
thus L214: thesis by L204 , L202;
end;
thus L215: thesis by L201 , PROB_1:13;
end;
L216: (for B64 being set holds (B64 in ( Intersection ( half_open_sets (C89 , C90) ) ) iff B64 in [. C89 , C90 .])) by L200 , L168;
thus L217: thesis by L216 , TARSKI:1;
end;
theorem
L218: (for B65 , B66 being  real number holds (for B67 being Nat holds ( ( Partial_Intersection ( half_open_sets (B65 , B66) ) ) . B67 ) is (Element of ( Borel_Sets ))))
proof
let C97 , C98 being  real number;
defpred S3[ Nat ] means ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . $1 ) is (Element of ( Borel_Sets ));
L219: S3[ ( 0 ) ]
proof
L220: ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . ( 0 ) ) = ( ( half_open_sets (C97 , C98) ) . ( 0 ) ) by PROB_3:def 1;
L221: ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . ( 0 ) ) = ( halfline_fin (C97 , ( C98 + 1 )) ) by L220 , L39;
thus L222: thesis by L221 , L142;
end;
L223: (for B68 being Nat holds (S3[ B68 ] implies S3[ ( B68 + 1 ) ]))
proof
let C99 being Nat;
assume L224: ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . C99 ) is (Element of ( Borel_Sets ));
reconsider D22 = C99 as (Element of ( NAT )) by ORDINAL1:def 12;
L225: ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . ( D22 + 1 ) ) = ( ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . D22 ) /\ ( ( half_open_sets (C97 , C98) ) . ( D22 + 1 ) ) ) by PROB_3:def 1;
L226: ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . ( D22 + 1 ) ) = ( ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . D22 ) /\ ( halfline_fin (C97 , ( C98 + ( 1 / ( D22 + 1 ) ) )) ) ) by L225 , L39;
L227: ([. C97 , ( C98 + ( 1 / ( D22 + 1 ) ) ) .[ is (Element of ( Borel_Sets )) & ( ( Partial_Intersection ( half_open_sets (C97 , C98) ) ) . D22 ) is (Element of ( Borel_Sets ))) by L142 , L224;
thus L228: thesis by L227 , L226 , FINSUB_1:def 2;
end;
L229: (for B69 being Nat holds S3[ B69 ]) from NAT_1:sch 2(L219 , L223);
thus L230: thesis by L229;
end;
theorem
L231: (for B70 , B71 being  real number holds [. B71 , B70 .] is (Element of ( Borel_Sets )))
proof
let C100 , C101 being  real number;
L232: ( Intersection ( half_open_sets (C101 , C100) ) ) = [. C101 , C100 .] by L167;
thus L233: thesis by L232 , L150;
end;
theorem
L234: (for R1 being non  empty set holds (for R3 being (SigmaField of R1) holds (for B72 being (Function of R1 , ( REAL )) holds (B72 is_random_variable_on R3 , ( Borel_Sets ) implies ((for B73 being  real number holds ({ B74 where B74 is (Element of R1) : ( B72 . B74 ) >= B73 } is (Element of R3) & { B75 where B75 is (Element of R1) : ( B72 . B75 ) < B73 } is (Element of R3))) & (for B76 , B77 being  real number holds (B76 < B77 implies { B78 where B78 is (Element of R1) : (B76 <= ( B72 . B78 ) & ( B72 . B78 ) < B77) } is (Element of R3))) & (for B79 , B80 being  real number holds (B79 <= B80 implies { B81 where B81 is (Element of R1) : (B79 <= ( B72 . B81 ) & ( B72 . B81 ) <= B80) } is (Element of R3))) & (for B82 being  real number holds ( less_dom (B72 , B82) ) = { B83 where B83 is (Element of R1) : ( B72 . B83 ) < B82 }) & (for B84 being  real number holds ( great_eq_dom (B72 , B84) ) = { B85 where B85 is (Element of R1) : ( B72 . B85 ) >= B84 }) & (for B86 being  real number holds ( eq_dom (B72 , B86) ) = { B87 where B87 is (Element of R1) : ( B72 . B87 ) = B86 }) & (for B88 being  real number holds ( eq_dom (B72 , B88) ) is (Element of R3)))))))
proof
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let C102 being (Function of R1 , ( REAL ));
assume L235: C102 is_random_variable_on R3 , ( Borel_Sets );
L236: (for B89 being  real number holds ({ B90 where B90 is (Element of R1) : ( C102 . B90 ) >= B89 } is (Element of R3) & { B91 where B91 is (Element of R1) : ( C102 . B91 ) < B89 } is (Element of R3)))
proof
let C103 being  real number;
L237: (for B92 being set holds ((ex B93 being (Element of R1) st (B92 = B93 & ( C102 . B93 ) >= C103)) iff (ex B94 being (Element of R1) st (B92 = B94 & ( C102 . B94 ) in [. C103 , ( +infty ) .]))))
proof
let C104 being set;
L238:
now
assume L239: (ex B95 being (Element of R1) st (C104 = B95 & ( C102 . B95 ) in [. C103 , ( +infty ) .]));
consider C105 being (Element of R1) such that L240: (C104 = C105 & ( C102 . C105 ) in [. C103 , ( +infty ) .]) by L239;
L241: ( C102 . C105 ) in { B96 where B96 is (Element of ( ExtREAL )) : (C103 <= B96 & B96 <= ( +infty )) } by L240 , XXREAL_1:def 1;
L242: (ex B97 being (Element of ( ExtREAL )) st (( C102 . C105 ) = B97 & C103 <= B97 & B97 <= ( +infty ))) by L241;
thus L243: (ex B98 being (Element of R1) st (C104 = B98 & ( C102 . B98 ) >= C103)) by L242 , L240;
end;
thus L244: thesis by L238 , XXREAL_1:219;
end;
L245: (for B99 being set holds (B99 in { B100 where B100 is (Element of R1) : ( C102 . B100 ) >= C103 } iff B99 in { B101 where B101 is (Element of R1) : ( C102 . B101 ) in [. C103 , ( +infty ) .[ }))
proof
let C106 being set;
L246: (C106 in { B102 where B102 is (Element of R1) : ( C102 . B102 ) >= C103 } iff (ex B103 being (Element of R1) st (C106 = B103 & ( C102 . B103 ) >= C103)));
L247: (C106 in { B104 where B104 is (Element of R1) : ( C102 . B104 ) >= C103 } iff (ex B105 being (Element of R1) st (C106 = B105 & ( C102 . B105 ) in [. C103 , ( +infty ) .]))) by L246 , L237;
L248: (C106 in { B106 where B106 is (Element of R1) : ( C102 . B106 ) in [. C103 , ( +infty ) .] } iff C106 in { B107 where B107 is (Element of R1) : ( C102 . B107 ) in [. C103 , ( +infty ) .[ })
proof
thus L249:now
assume L250: C106 in { B108 where B108 is (Element of R1) : ( C102 . B108 ) in [. C103 , ( +infty ) .] };
consider C107 being (Element of R1) such that L251: (C107 = C106 & ( C102 . C107 ) in [. C103 , ( +infty ) .]) by L250;
L252: ( C102 . C107 ) in { B109 where B109 is (Element of ( ExtREAL )) : (C103 <= B109 & B109 <= ( +infty )) } by L251 , XXREAL_1:def 1;
consider C108 being (Element of ( ExtREAL )) such that L253: (( C102 . C107 ) = C108 & C103 <= C108 & C108 <= ( +infty )) by L252;
L254: (( C102 . C107 ) = C108 & C103 <= C108 & C108 < ( +infty )) by L253 , XXREAL_0:9;
L255: { B110 where B110 is (Element of ( ExtREAL )) : (C103 <= B110 & B110 < ( +infty )) } = [. C103 , ( +infty ) .[ by XXREAL_1:def 2;
L256: ( C102 . C107 ) in [. C103 , ( +infty ) .[ by L255 , L254;
thus L257: C106 in { B111 where B111 is (Element of R1) : ( C102 . B111 ) in [. C103 , ( +infty ) .[ } by L256 , L251;
end;
assume L258: C106 in { B112 where B112 is (Element of R1) : ( C102 . B112 ) in [. C103 , ( +infty ) .[ };
consider C109 being (Element of R1) such that L259: (C109 = C106 & ( C102 . C109 ) in [. C103 , ( +infty ) .[) by L258;
L260: (C109 = C106 & ( C102 . C109 ) in { B113 where B113 is (Element of ( ExtREAL )) : (C103 <= B113 & B113 < ( +infty )) }) by L259 , XXREAL_1:def 2;
L261: (C109 = C106 & (ex B114 being (Element of ( ExtREAL )) st (B114 = ( C102 . C109 ) & C103 <= B114 & B114 < ( +infty )))) by L260;
L262: (C109 = C106 & ( C102 . C109 ) in { B115 where B115 is (Element of ( ExtREAL )) : (C103 <= B115 & B115 <= ( +infty )) }) by L261;
L263: (C109 = C106 & ( C102 . C109 ) in [. C103 , ( +infty ) .]) by L262 , XXREAL_1:def 1;
thus L264: thesis by L263;
end;
thus L265: thesis by L248 , L247;
end;
L266: C103 in ( REAL ) by XREAL_0:def 1;
L267: [. C103 , ( +infty ) .[ is non  empty by L266 , XXREAL_0:9 , XXREAL_1:31;
L268: { B116 where B116 is (Element of R1) : ( C102 . B116 ) >= C103 } = { B117 where B117 is (Element of R1) : ( C102 . B117 ) is (Element of [. C103 , ( +infty ) .[) }
proof
L269: { B118 where B118 is (Element of R1) : ( C102 . B118 ) in [. C103 , ( +infty ) .[ } = { B119 where B119 is (Element of R1) : ( C102 . B119 ) is (Element of [. C103 , ( +infty ) .[) }
proof
L270: (for B120 being set holds (B120 in { B121 where B121 is (Element of R1) : ( C102 . B121 ) in [. C103 , ( +infty ) .[ } iff B120 in { B122 where B122 is (Element of R1) : ( C102 . B122 ) is (Element of [. C103 , ( +infty ) .[) }))
proof
let C110 being set;
thus L271:now
assume L272: C110 in { B123 where B123 is (Element of R1) : ( C102 . B123 ) in [. C103 , ( +infty ) .[ };
L273: (ex B124 being (Element of R1) st (B124 = C110 & ( C102 . B124 ) in [. C103 , ( +infty ) .[)) by L272;
thus L274: C110 in { B125 where B125 is (Element of R1) : ( C102 . B125 ) is (Element of [. C103 , ( +infty ) .[) } by L273;
end;
assume L275: C110 in { B126 where B126 is (Element of R1) : ( C102 . B126 ) is (Element of [. C103 , ( +infty ) .[) };
consider C111 being (Element of R1) such that L276: (C111 = C110 & ( C102 . C111 ) is (Element of [. C103 , ( +infty ) .[)) by L275;
thus L277: thesis by L276 , L267;
end;
thus L278: thesis by L270 , TARSKI:1;
end;
thus L279: thesis by L269 , L245 , TARSKI:1;
end;
L280: ([. C103 , ( +infty ) .[ is (Element of ( Borel_Sets )) & ]. ( -infty ) , C103 .[ is (Element of ( Borel_Sets ))) by L134;
L281: (for B127 being set holds ((ex B128 being (Element of R1) st (B127 = B128 & ( C102 . B128 ) < C103)) iff (ex B129 being (Element of R1) st (B127 = B129 & ( C102 . B129 ) in [. ( -infty ) , C103 .[))))
proof
let C112 being set;
L282:
now
assume L283: (ex B130 being (Element of R1) st (C112 = B130 & ( C102 . B130 ) in [. ( -infty ) , C103 .[));
consider C113 being (Element of R1) such that L284: (C112 = C113 & ( C102 . C113 ) in [. ( -infty ) , C103 .[) by L283;
L285: ( C102 . C113 ) in { B131 where B131 is (Element of ( ExtREAL )) : (( -infty ) <= B131 & B131 < C103) } by L284 , XXREAL_1:def 2;
L286: (ex B132 being (Element of ( ExtREAL )) st (( C102 . C113 ) = B132 & ( -infty ) <= B132 & B132 < C103)) by L285;
thus L287: (ex B133 being (Element of R1) st (C112 = B133 & ( C102 . B133 ) < C103)) by L286 , L284;
end;
thus L288: thesis by L282 , XXREAL_1:221;
end;
L289: (for B134 being set holds (B134 in { B135 where B135 is (Element of R1) : ( C102 . B135 ) < C103 } iff B134 in { B136 where B136 is (Element of R1) : ( C102 . B136 ) in ]. ( -infty ) , C103 .[ }))
proof
let C114 being set;
L290: (C114 in { B137 where B137 is (Element of R1) : ( C102 . B137 ) < C103 } iff (ex B138 being (Element of R1) st (C114 = B138 & ( C102 . B138 ) < C103)));
L291: (C114 in { B139 where B139 is (Element of R1) : ( C102 . B139 ) < C103 } iff (ex B140 being (Element of R1) st (C114 = B140 & ( C102 . B140 ) in [. ( -infty ) , C103 .[))) by L290 , L281;
L292: (C114 in { B141 where B141 is (Element of R1) : ( C102 . B141 ) in [. ( -infty ) , C103 .[ } iff C114 in { B142 where B142 is (Element of R1) : ( C102 . B142 ) in ]. ( -infty ) , C103 .[ })
proof
thus L293:now
assume L294: C114 in { B143 where B143 is (Element of R1) : ( C102 . B143 ) in [. ( -infty ) , C103 .[ };
consider C115 being (Element of R1) such that L295: (C115 = C114 & ( C102 . C115 ) in [. ( -infty ) , C103 .[) by L294;
L296: ( C102 . C115 ) in { B144 where B144 is (Element of ( ExtREAL )) : (( -infty ) <= B144 & B144 < C103) } by L295 , XXREAL_1:def 2;
consider C116 being (Element of ( ExtREAL )) such that L297: (( C102 . C115 ) = C116 & ( -infty ) <= C116 & C116 < C103) by L296;
L298: (( C102 . C115 ) = C116 & ( -infty ) < C116 & C116 < C103) by L297 , XXREAL_0:12;
L299: { B145 where B145 is (Element of ( ExtREAL )) : (( -infty ) < B145 & B145 < C103) } = ]. ( -infty ) , C103 .[ by XXREAL_1:def 4;
L300: ( C102 . C115 ) in ]. ( -infty ) , C103 .[ by L299 , L298;
thus L301: C114 in { B146 where B146 is (Element of R1) : ( C102 . B146 ) in ]. ( -infty ) , C103 .[ } by L300 , L295;
end;
assume L302: C114 in { B147 where B147 is (Element of R1) : ( C102 . B147 ) in ]. ( -infty ) , C103 .[ };
consider C117 being (Element of R1) such that L303: (C117 = C114 & ( C102 . C117 ) in ]. ( -infty ) , C103 .[) by L302;
L304: (C117 = C114 & ( C102 . C117 ) in { B148 where B148 is (Element of ( ExtREAL )) : (( -infty ) < B148 & B148 < C103) }) by L303 , XXREAL_1:def 4;
L305: (C117 = C114 & (ex B149 being (Element of ( ExtREAL )) st (B149 = ( C102 . C117 ) & ( -infty ) < B149 & B149 < C103))) by L304;
L306: (C117 = C114 & ( C102 . C117 ) in { B150 where B150 is (Element of ( ExtREAL )) : (( -infty ) <= B150 & B150 < C103) }) by L305;
L307: (C117 = C114 & ( C102 . C117 ) in [. ( -infty ) , C103 .[) by L306 , XXREAL_1:def 2;
thus L308: thesis by L307;
end;
thus L309: thesis by L292 , L291;
end;
L310: { B151 where B151 is (Element of R1) : ( C102 . B151 ) < C103 } = { B152 where B152 is (Element of R1) : ( C102 . B152 ) in ]. ( -infty ) , C103 .[ } by L289 , TARSKI:1;
L311: { B153 where B153 is (Element of R1) : ( C102 . B153 ) < C103 } is (Element of R3)
proof
L312: ([. C103 , ( +infty ) .[ is (Element of ( Borel_Sets )) & ]. ( -infty ) , C103 .[ is (Element of ( Borel_Sets ))) by L134;
L313: C103 in ( REAL ) by XREAL_0:def 1;
L314: ]. ( -infty ) , C103 .[ is non  empty by L313 , XXREAL_0:12 , XXREAL_1:33;
L315: (for B154 being set holds (B154 in { B155 where B155 is (Element of R1) : ( C102 . B155 ) in ]. ( -infty ) , C103 .[ } iff B154 in { B156 where B156 is (Element of R1) : ( C102 . B156 ) is (Element of ]. ( -infty ) , C103 .[) }))
proof
let C118 being set;
thus L316:now
assume L317: C118 in { B157 where B157 is (Element of R1) : ( C102 . B157 ) in ]. ( -infty ) , C103 .[ };
L318: (ex B158 being (Element of R1) st (B158 = C118 & ( C102 . B158 ) in ]. ( -infty ) , C103 .[)) by L317;
thus L319: C118 in { B159 where B159 is (Element of R1) : ( C102 . B159 ) is (Element of ]. ( -infty ) , C103 .[) } by L318;
end;
assume L320: C118 in { B160 where B160 is (Element of R1) : ( C102 . B160 ) is (Element of ]. ( -infty ) , C103 .[) };
consider C119 being (Element of R1) such that L321: (C119 = C118 & ( C102 . C119 ) is (Element of ]. ( -infty ) , C103 .[)) by L320;
thus L322: thesis by L321 , L314;
end;
L323: { B161 where B161 is (Element of R1) : ( C102 . B161 ) < C103 } = { B162 where B162 is (Element of R1) : ( C102 . B162 ) is (Element of ]. ( -infty ) , C103 .[) } by L315 , L310 , TARSKI:1;
thus L324: thesis by L323 , L312 , L235 , L68;
end;
thus L325: thesis by L311 , L280 , L235 , L68 , L268;
end;
L326: (for B163 , B164 being  real number holds (B163 < B164 implies { B165 where B165 is (Element of R1) : (B163 <= ( C102 . B165 ) & ( C102 . B165 ) < B164) } is (Element of R3)))
proof
let C120 , C121 being  real number;
assume L327: C120 < C121;
L328: { B166 where B166 is (Element of R1) : (C120 <= ( C102 . B166 ) & ( C102 . B166 ) < C121) } is (Element of R3)
proof
L329: (for B167 being set holds (B167 in { B168 where B168 is (Element of R1) : (C120 <= ( C102 . B168 ) & ( C102 . B168 ) < C121) } iff B167 in { B169 where B169 is (Element of R1) : ( C102 . B169 ) is (Element of [. C120 , C121 .[) }))
proof
let C122 being set;
thus L330:now
assume L331: C122 in { B170 where B170 is (Element of R1) : (C120 <= ( C102 . B170 ) & ( C102 . B170 ) < C121) };
consider C123 being (Element of R1) such that L332: (C122 = C123 & C120 <= ( C102 . C123 ) & ( C102 . C123 ) < C121) by L331;
consider C124 being (Element of ( ExtREAL )) such that L333: C124 = ( R_EAL ( C102 . C123 ) );
L334: C124 = ( C102 . C123 ) by L333 , MEASURE6:def 1;
L335: ( C102 . C123 ) in { B171 where B171 is (Element of ( ExtREAL )) : (C120 <= B171 & B171 < C121) } by L334 , L332;
L336: ( C102 . C123 ) is (Element of [. C120 , C121 .[) by L335 , XXREAL_1:def 2;
thus L337: C122 in { B172 where B172 is (Element of R1) : ( C102 . B172 ) is (Element of [. C120 , C121 .[) } by L336 , L332;
end;
assume L338: C122 in { B173 where B173 is (Element of R1) : ( C102 . B173 ) is (Element of [. C120 , C121 .[) };
consider C125 being (Element of R1) such that L339: (C122 = C125 & ( C102 . C125 ) is (Element of [. C120 , C121 .[)) by L338;
L340: [. C120 , C121 .[ is non  empty by L327 , XXREAL_1:31;
L341: ( C102 . C125 ) in [. C120 , C121 .[ by L339 , L340;
L342: ( C102 . C125 ) in { B174 where B174 is (Element of ( ExtREAL )) : (C120 <= B174 & B174 < C121) } by L341 , XXREAL_1:def 2;
L343: (ex B175 being (Element of ( ExtREAL )) st (B175 = ( C102 . C125 ) & C120 <= B175 & B175 < C121)) by L342;
thus L344: thesis by L343 , L339;
end;
L345: { B176 where B176 is (Element of R1) : (C120 <= ( C102 . B176 ) & ( C102 . B176 ) < C121) } = { B177 where B177 is (Element of R1) : ( C102 . B177 ) is (Element of [. C120 , C121 .[) } by L329 , TARSKI:1;
L346: ([. C121 , C120 .[ is (Element of ( Borel_Sets )) & [. C120 , C121 .[ is (Element of ( Borel_Sets ))) by L142;
thus L347: thesis by L346 , L235 , L68 , L345;
end;
thus L348: thesis by L328;
end;
L349: (for B178 , B179 being  real number holds (B178 <= B179 implies { B180 where B180 is (Element of R1) : (B178 <= ( C102 . B180 ) & ( C102 . B180 ) <= B179) } is (Element of R3)))
proof
let C126 , C127 being  real number;
assume L350: C126 <= C127;
L351: (for B181 being set holds (B181 in { B182 where B182 is (Element of R1) : (C126 <= ( C102 . B182 ) & ( C102 . B182 ) <= C127) } iff B181 in { B183 where B183 is (Element of R1) : ( C102 . B183 ) is (Element of [. C126 , C127 .]) }))
proof
let C128 being set;
thus L352:now
assume L353: C128 in { B184 where B184 is (Element of R1) : (C126 <= ( C102 . B184 ) & ( C102 . B184 ) <= C127) };
consider C129 being (Element of R1) such that L354: (C128 = C129 & C126 <= ( C102 . C129 ) & ( C102 . C129 ) <= C127) by L353;
consider C130 being (Element of ( ExtREAL )) such that L355: C130 = ( R_EAL ( C102 . C129 ) );
L356: C130 = ( C102 . C129 ) by L355 , MEASURE6:def 1;
L357: ( C102 . C129 ) in { B185 where B185 is (Element of ( ExtREAL )) : (C126 <= B185 & B185 <= C127) } by L356 , L354;
L358: ( C102 . C129 ) is (Element of [. C126 , C127 .]) by L357 , XXREAL_1:def 1;
thus L359: C128 in { B186 where B186 is (Element of R1) : ( C102 . B186 ) is (Element of [. C126 , C127 .]) } by L358 , L354;
end;
assume L360: C128 in { B187 where B187 is (Element of R1) : ( C102 . B187 ) is (Element of [. C126 , C127 .]) };
consider C131 being (Element of R1) such that L361: (C128 = C131 & ( C102 . C131 ) is (Element of [. C126 , C127 .])) by L360;
L362: [. C126 , C127 .] is non  empty by L350 , XXREAL_1:30;
L363: ( C102 . C131 ) in [. C126 , C127 .] by L361 , L362;
L364: ( C102 . C131 ) in { B188 where B188 is (Element of ( ExtREAL )) : (C126 <= B188 & B188 <= C127) } by L363 , XXREAL_1:def 1;
L365: (ex B189 being (Element of ( ExtREAL )) st (B189 = ( C102 . C131 ) & C126 <= B189 & B189 <= C127)) by L364;
thus L366: thesis by L365 , L361;
end;
L367: { B190 where B190 is (Element of R1) : (C126 <= ( C102 . B190 ) & ( C102 . B190 ) <= C127) } = { B191 where B191 is (Element of R1) : ( C102 . B191 ) is (Element of [. C126 , C127 .]) } by L351 , TARSKI:1;
L368: ([. C126 , C127 .[ is (Element of ( Borel_Sets )) & [. C126 , C127 .] is (Element of ( Borel_Sets ))) by L231 , L142;
thus L369: thesis by L368 , L235 , L68 , L367;
end;
L370: (for B192 being  real number holds ( less_dom (C102 , B192) ) = { B193 where B193 is (Element of R1) : ( C102 . B193 ) < B192 })
proof
let C132 being  real number;
L371: (for B194 being set holds (B194 in ( less_dom (C102 , C132) ) iff B194 in { B195 where B195 is (Element of R1) : ( C102 . B195 ) < C132 }))
proof
let C133 being set;
L372: (C133 in ( less_dom (C102 , C132) ) iff (C133 in ( dom C102 ) & ( C102 . C133 ) < C132)) by MESFUNC1:def 11;
L373: (C133 in ( less_dom (C102 , C132) ) iff (C133 in R1 & ( C102 . C133 ) < C132)) by L372 , FUNCT_2:def 1;
L374: (C133 in ( less_dom (C102 , C132) ) iff (ex B196 being (Element of R1) st (B196 = C133 & ( C102 . B196 ) < C132))) by L373;
thus L375: thesis by L374;
end;
thus L376: thesis by L371 , TARSKI:1;
end;
L377: (for B197 being  real number holds ( great_eq_dom (C102 , B197) ) = { B198 where B198 is (Element of R1) : ( C102 . B198 ) >= B197 })
proof
let C134 being  real number;
L378: (for B199 being set holds (B199 in ( great_eq_dom (C102 , C134) ) iff B199 in { B200 where B200 is (Element of R1) : ( C102 . B200 ) >= C134 }))
proof
let C135 being set;
L379: (C135 in ( great_eq_dom (C102 , C134) ) iff (C135 in ( dom C102 ) & ( C102 . C135 ) >= C134)) by MESFUNC1:def 14;
L380: (C135 in ( great_eq_dom (C102 , C134) ) iff (C135 in R1 & ( C102 . C135 ) >= C134)) by L379 , FUNCT_2:def 1;
L381: (C135 in ( great_eq_dom (C102 , C134) ) iff (ex B201 being (Element of R1) st (B201 = C135 & ( C102 . B201 ) >= C134))) by L380;
thus L382: thesis by L381;
end;
thus L383: thesis by L378 , TARSKI:1;
end;
L384: (for B202 being  real number holds ( eq_dom (C102 , B202) ) = { B203 where B203 is (Element of R1) : ( C102 . B203 ) = B202 })
proof
let C136 being  real number;
L385: (for B204 being set holds (B204 in ( eq_dom (C102 , C136) ) iff B204 in { B205 where B205 is (Element of R1) : ( C102 . B205 ) = C136 }))
proof
let C137 being set;
L386: (C137 in ( eq_dom (C102 , C136) ) iff (C137 in ( dom C102 ) & ( C102 . C137 ) = C136)) by MESFUNC1:def 15;
L387: (C137 in ( eq_dom (C102 , C136) ) iff (C137 in R1 & ( C102 . C137 ) = C136)) by L386 , FUNCT_2:def 1;
L388: (C137 in ( eq_dom (C102 , C136) ) iff (ex B206 being (Element of R1) st (B206 = C137 & ( C102 . B206 ) = C136))) by L387;
thus L389: thesis by L388;
end;
thus L390: thesis by L385 , TARSKI:1;
end;
L391: (for B207 being  real number holds ( eq_dom (C102 , B207) ) is (Element of R3))
proof
let C138 being  real number;
L392: (for B208 being set holds (B208 in { B209 where B209 is (Element of R1) : (C138 <= ( C102 . B209 ) & ( C102 . B209 ) <= C138) } iff B208 in { B210 where B210 is (Element of R1) : ( C102 . B210 ) = C138 }))
proof
let C139 being set;
L393: (C139 in { B211 where B211 is (Element of R1) : (C138 <= ( C102 . B211 ) & ( C102 . B211 ) <= C138) } iff (ex B212 being (Element of R1) st (C139 = B212 & C138 <= ( C102 . B212 ) & ( C102 . B212 ) <= C138)));
L394: (C139 in { B213 where B213 is (Element of R1) : (C138 <= ( C102 . B213 ) & ( C102 . B213 ) <= C138) } iff (ex B214 being (Element of R1) st (C139 = B214 & ( C102 . B214 ) = C138))) by L393 , XXREAL_0:1;
thus L395: thesis by L394;
end;
L396: { B215 where B215 is (Element of R1) : (C138 <= ( C102 . B215 ) & ( C102 . B215 ) <= C138) } = { B216 where B216 is (Element of R1) : ( C102 . B216 ) = C138 } by L392 , TARSKI:1;
L397: { B217 where B217 is (Element of R1) : ( C102 . B217 ) = C138 } is (Element of R3) by L396 , L349;
thus L398: thesis by L397 , L384;
end;
thus L399: thesis by L391 , L236 , L326 , L349 , L370 , L377 , L384;
end;
theorem
L400: (for R1 being non  empty set holds (for R3 being (SigmaField of R1) holds (for B218 being  real number holds ( R1 --> B218 ) is_random_variable_on R3 , ( Borel_Sets ))))
proof
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let C140 being  real number;
set D23 = ( R1 --> C140 );
L401: D23 is_random_variable_on R3 , ( Borel_Sets )
proof
let C141 being (Element of ( Borel_Sets ));
per cases ;
suppose L402: C140 is (Element of C141);

L403: (for B219 being set holds (B219 in { B220 where B220 is (Element of R1) : ( D23 . B220 ) is (Element of C141) } iff B219 in R1))
proof
let C142 being set;
thus L404:now
assume L405: C142 in { B221 where B221 is (Element of R1) : ( D23 . B221 ) is (Element of C141) };
L406: (ex B222 being (Element of R1) st (B222 = C142 & ( D23 . B222 ) is (Element of C141))) by L405;
thus L407: C142 in R1 by L406;
end;
assume L408: C142 in R1;
reconsider D24 = C142 as (Element of R1) by L408;
L409: ( D23 . D24 ) is (Element of C141) by L402 , FUNCOP_1:7;
thus L410: thesis by L409;
end;
L411: { B223 where B223 is (Element of R1) : ( D23 . B223 ) is (Element of C141) } = R1 by L403 , TARSKI:1;
thus L412: thesis by L411 , PROB_1:23;
end;
suppose L413: (not C140 is (Element of C141));

L414: (for B224 being set holds (B224 in { B225 where B225 is (Element of R1) : ( D23 . B225 ) is (Element of C141) } iff B224 in ( {} )))
proof
let C143 being set;
L415:
now
assume L416: C143 in { B226 where B226 is (Element of R1) : ( D23 . B226 ) is (Element of C141) };
consider C144 being (Element of R1) such that L417: (C144 = C143 & ( D23 . C144 ) is (Element of C141)) by L416;
thus L418: C143 in ( {} ) by L413 , L417 , FUNCOP_1:7;
end;
thus L419: thesis by L415;
end;
L420: { B227 where B227 is (Element of R1) : ( D23 . B227 ) is (Element of C141) } = ( {} ) by L414 , TARSKI:1;
thus L421: thesis by L420 , PROB_1:22;
end;
end;
thus L423: thesis by L401;
end;
theorem
L424: (for B228 being Real_Sequence holds (for B229 being pricefunction holds (for B230 being Nat holds (B230 > ( 0 ) implies ( BuyPortfolioExt (B228 , B229 , B230) ) = ( ( B228 . ( 0 ) ) + ( BuyPortfolio (B228 , B229 , B230) ) )))))
proof
let C145 being Real_Sequence;
let C146 being pricefunction;
let C147 being Nat;
assume L425: C147 > ( 0 );
L426: ( C147 - 1 ) is (Element of ( NAT )) by L425 , NAT_1:20;
defpred S4[ Nat ] means ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( $1 + 1 ) ) = ( ( C145 . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . $1 ) );
L427: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( C145 . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . ( 0 ) ) )
proof
L428: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( 0 ) ) + ( ( ElementsOfBuyPortfolio (C145 , C146) ) . 1 ) ) by SERIES_1:def 1;
L429: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfBuyPortfolio (C145 , C146) ) . ( 0 ) ) + ( ( ElementsOfBuyPortfolio (C145 , C146) ) . 1 ) ) by L428 , SERIES_1:def 1;
L430: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfBuyPortfolio (C145 , C146) ) . ( 0 ) ) + ( ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) . ( 0 ) ) ) by L429 , NAT_1:def 3;
L431: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfBuyPortfolio (C145 , C146) ) . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . ( 0 ) ) ) by L430 , SERIES_1:def 1;
L432: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( C145 . ( 0 ) ) * ( C146 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . ( 0 ) ) ) by L431 , VALUED_1:5;
L433: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( C145 . ( 0 ) ) * 1 ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . ( 0 ) ) ) by L432 , L60;
thus L434: thesis by L433;
end;
L435: S4[ ( 0 ) ] by L427;
L436: (for B231 being Nat holds (S4[ B231 ] implies S4[ ( B231 + 1 ) ]))
proof
let C148 being Nat;
assume L437: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( C148 + 1 ) ) = ( ( C145 . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . C148 ) );
reconsider D25 = C148 as (Element of ( NAT )) by ORDINAL1:def 12;
L438: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( D25 + 1 ) + 1 ) ) = ( ( ( C145 . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . D25 ) ) + ( ( ElementsOfBuyPortfolio (C145 , C146) ) . ( ( D25 + 1 ) + 1 ) ) ) by L437 , SERIES_1:def 1;
L439: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( D25 + 1 ) + 1 ) ) = ( ( ( C145 . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . D25 ) ) + ( ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) . ( D25 + 1 ) ) ) by L438 , NAT_1:def 3;
L440: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( D25 + 1 ) + 1 ) ) = ( ( C145 . ( 0 ) ) + ( ( ( Partial_Sums ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) ) . D25 ) + ( ( ( ElementsOfBuyPortfolio (C145 , C146) ) ^\ 1 ) . ( D25 + 1 ) ) ) ) by L439;
thus L441: thesis by L440 , SERIES_1:def 1;
end;
L442: (for B232 being Nat holds S4[ B232 ]) from NAT_1:sch 2(L435 , L436);
L443: ( ( Partial_Sums ( ElementsOfBuyPortfolio (C145 , C146) ) ) . ( ( C147 - 1 ) + 1 ) ) = ( ( C145 . ( 0 ) ) + ( BuyPortfolio (C145 , C146 , C147) ) ) by L442 , L426;
thus L444: thesis by L443;
end;
theorem
L445: (for R1 being non  empty set holds (for R4 being (SigmaField of R1) holds (for B233 being Nat holds (B233 > ( 0 ) implies (for B234 being  real number holds (for B235 being Real_Sequence holds (for B236 being (Function of ( NAT ) , ( set_of_random_variables_on (R4 , ( Borel_Sets )) )) holds (( Element_Of (R4 , ( Borel_Sets ) , B236 , ( 0 )) ) = ( R1 --> ( 1 + B234 ) ) implies (for B237 being (Element of R1) holds ( PortfolioValueFutExt (B233 , B235 , R4 , B236 , B237) ) = ( ( ( 1 + B234 ) * ( B235 . ( 0 ) ) ) + ( PortfolioValueFut (B233 , B235 , R4 , B236 , B237) ) ))))))))))
proof
let R1 being non  empty set;
let R4 being (SigmaField of R1);
let C149 being Nat;
assume L446: C149 > ( 0 );
let C150 being  real number;
let C151 being Real_Sequence;
set D26 = ( set_of_random_variables_on (R4 , ( Borel_Sets )) );
let C152 being (Function of ( NAT ) , D26);
assume L447: ( Element_Of (R4 , ( Borel_Sets ) , C152 , ( 0 )) ) = ( R1 --> ( 1 + C150 ) );
let C153 being (Element of R1);
L448: ( C149 - 1 ) is (Element of ( NAT )) by L446 , NAT_1:20;
defpred S5[ Nat ] means ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( $1 + 1 ) ) = ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . $1 ) );
L449: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . ( 0 ) ) )
proof
L450: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( 0 ) ) + ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . 1 ) ) by SERIES_1:def 1;
L451: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . ( 0 ) ) + ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . 1 ) ) by L450 , SERIES_1:def 1;
L452: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . ( 0 ) ) + ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) . ( 0 ) ) ) by L451 , NAT_1:def 3;
L453: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( 0 ) + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . ( 0 ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . ( 0 ) ) ) by L452 , SERIES_1:def 1;
consider C154 being (Element of ( NAT )) such that L454: (C154 = ( 0 ) & ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( C154 + 1 ) ) = ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . C154 ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . C154 ) )) by L453;
L455: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( C154 + 1 ) ) = ( ( ( ( ElementsOfPortfolioValueProb_fut (R4 , ( C152 . C154 )) ) . C153 ) * ( C151 . C154 ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . C154 ) ) by L454 , L118;
set D27 = ( C152 . C154 );
set D28 = ( Change_Element_to_Func (R4 , ( Borel_Sets ) , D27) );
L456: ( D28 . C153 ) = ( 1 + C150 )
proof
L457: (( Element_Of (R4 , ( Borel_Sets ) , C152 , ( 0 )) ) = ( C152 . ( 0 ) ) & D28 = ( C152 . ( 0 ) ) & ( Element_Of (R4 , ( Borel_Sets ) , C152 , ( 0 )) ) = ( R1 --> ( 1 + C150 ) )) by L447 , L113 , L99 , L454;
thus L458: thesis by L457 , FUNCOP_1:7;
end;
thus L459: thesis by L456 , L454 , L455 , L104;
end;
L460: S5[ ( 0 ) ] by L449;
L461: (for B238 being Nat holds (S5[ B238 ] implies S5[ ( B238 + 1 ) ]))
proof
let C155 being Nat;
assume L462: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( C155 + 1 ) ) = ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . C155 ) );
reconsider D29 = C155 as (Element of ( NAT )) by ORDINAL1:def 12;
L463: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( D29 + 1 ) + 1 ) ) = ( ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . D29 ) ) + ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) . ( ( D29 + 1 ) + 1 ) ) ) by L462 , SERIES_1:def 1;
L464: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( D29 + 1 ) + 1 ) ) = ( ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . D29 ) ) + ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) . ( D29 + 1 ) ) ) by L463 , NAT_1:def 3;
L465: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( D29 + 1 ) + 1 ) ) = ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . D29 ) + ( ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) . ( D29 + 1 ) ) ) ) by L464;
thus L466: thesis by L465 , SERIES_1:def 1;
end;
L467: (for B239 being Nat holds S5[ B239 ]) from NAT_1:sch 2(L460 , L461);
L468: ( ( Partial_Sums ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ) . ( ( C149 - 1 ) + 1 ) ) = ( ( ( 1 + C150 ) * ( C151 . ( 0 ) ) ) + ( ( Partial_Sums ( ( ElementsOfPortfolioValue_fut (C151 , R4 , C153 , C152) ) ^\ 1 ) ) . ( C149 - 1 ) ) ) by L467 , L448;
thus L469: thesis by L468;
end;
theorem
L470: (for R1 being non  empty set holds (for R4 being (SigmaField of R1) holds (for B240 being Nat holds (B240 > ( 0 ) implies (for B241 being  real number holds (B241 > ( - 1 ) implies (for B242 being Real_Sequence holds (for B243 being pricefunction holds (for B244 being (Function of ( NAT ) , ( set_of_random_variables_on (R4 , ( Borel_Sets )) )) holds (( Element_Of (R4 , ( Borel_Sets ) , B244 , ( 0 )) ) = ( R1 --> ( 1 + B241 ) ) implies (for B245 being (Element of R1) holds (( BuyPortfolioExt (B242 , B243 , B240) ) <= ( 0 ) implies ( PortfolioValueFutExt (B240 , B242 , R4 , B244 , B245) ) <= ( ( PortfolioValueFut (B240 , B242 , R4 , B244 , B245) ) - ( ( 1 + B241 ) * ( BuyPortfolio (B242 , B243 , B240) ) ) )))))))))))))
proof
let R1 being non  empty set;
let R4 being (SigmaField of R1);
let C156 being Nat;
assume L471: C156 > ( 0 );
let C157 being  real number;
assume L472: C157 > ( - 1 );
let C158 being Real_Sequence;
let C159 being pricefunction;
set D30 = ( set_of_random_variables_on (R4 , ( Borel_Sets )) );
let C160 being (Function of ( NAT ) , D30);
assume L473: ( Element_Of (R4 , ( Borel_Sets ) , C160 , ( 0 )) ) = ( R1 --> ( 1 + C157 ) );
let C161 being (Element of R1);
assume L474: ( BuyPortfolioExt (C158 , C159 , C156) ) <= ( 0 );
L475: ( ( 1 + C157 ) * ( BuyPortfolioExt (C158 , C159 , C156) ) ) <= ( 0 )
proof
L476: ( 1 + C157 ) > ( 0 ) by L472 , XREAL_1:62;
thus L477: thesis by L476 , L474;
end;
L478: ( ( ( 1 + C157 ) * ( BuyPortfolioExt (C158 , C159 , C156) ) ) + ( ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) - ( ( 1 + C157 ) * ( BuyPortfolioExt (C158 , C159 , C156) ) ) ) ) <= ( ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) - ( ( 1 + C157 ) * ( BuyPortfolioExt (C158 , C159 , C156) ) ) ) by L475 , XREAL_1:32;
L479: ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) <= ( ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) - ( ( 1 + C157 ) * ( ( C158 . ( 0 ) ) + ( BuyPortfolio (C158 , C159 , C156) ) ) ) ) by L478 , L471 , L424;
L480: ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) <= ( ( ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) - ( ( 1 + C157 ) * ( BuyPortfolio (C158 , C159 , C156) ) ) ) - ( ( 1 + C157 ) * ( C158 . ( 0 ) ) ) ) by L479;
L481: ( ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) + ( ( 1 + C157 ) * ( C158 . ( 0 ) ) ) ) <= ( ( PortfolioValueFut (C156 , C158 , R4 , C160 , C161) ) - ( ( 1 + C157 ) * ( BuyPortfolio (C158 , C159 , C156) ) ) ) by L480 , XREAL_1:19;
thus L482: thesis by L481 , L471 , L473 , L445;
end;
theorem
L483: (for R1 being non  empty set holds (for R4 being (SigmaField of R1) holds (for B246 being Nat holds (B246 > ( 0 ) implies (for B247 being  real number holds (B247 > ( - 1 ) implies (for B248 being Real_Sequence holds (for B249 being pricefunction holds (for B250 being (Function of ( NAT ) , ( set_of_random_variables_on (R4 , ( Borel_Sets )) )) holds (( Element_Of (R4 , ( Borel_Sets ) , B250 , ( 0 )) ) = ( R1 --> ( 1 + B247 ) ) implies (( BuyPortfolioExt (B248 , B249 , B246) ) <= ( 0 ) implies ({ B251 where B251 is (Element of R1) : ( PortfolioValueFutExt (B246 , B248 , R4 , B250 , B251) ) >= ( 0 ) } c= { B252 where B252 is (Element of R1) : ( PortfolioValueFut (B246 , B248 , R4 , B250 , B252) ) >= ( ( 1 + B247 ) * ( BuyPortfolio (B248 , B249 , B246) ) ) } & { B253 where B253 is (Element of R1) : ( PortfolioValueFutExt (B246 , B248 , R4 , B250 , B253) ) > ( 0 ) } c= { B254 where B254 is (Element of R1) : ( PortfolioValueFut (B246 , B248 , R4 , B250 , B254) ) > ( ( 1 + B247 ) * ( BuyPortfolio (B248 , B249 , B246) ) ) }))))))))))))
proof
let R1 being non  empty set;
let R4 being (SigmaField of R1);
let C162 being Nat;
assume L484: C162 > ( 0 );
let C163 being  real number;
assume L485: C163 > ( - 1 );
let C164 being Real_Sequence;
let C165 being pricefunction;
set D31 = ( set_of_random_variables_on (R4 , ( Borel_Sets )) );
let C166 being (Function of ( NAT ) , D31);
assume L486: ( Element_Of (R4 , ( Borel_Sets ) , C166 , ( 0 )) ) = ( R1 --> ( 1 + C163 ) );
assume L487: ( BuyPortfolioExt (C164 , C165 , C162) ) <= ( 0 );
L488: { B255 where B255 is (Element of R1) : ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , B255) ) >= ( 0 ) } c= { B256 where B256 is (Element of R1) : ( PortfolioValueFut (C162 , C164 , R4 , C166 , B256) ) >= ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) }
proof
let C167 being set;
assume L489: C167 in { B257 where B257 is (Element of R1) : ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , B257) ) >= ( 0 ) };
consider C168 being (Element of R1) such that L490: (C167 = C168 & ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , C168) ) >= ( 0 )) by L489;
L491: ( 0 ) <= ( ( PortfolioValueFut (C162 , C164 , R4 , C166 , C168) ) - ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) ) by L484 , L485 , L486 , L487 , L470 , L490;
L492: ( ( 0 ) + ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) ) <= ( PortfolioValueFut (C162 , C164 , R4 , C166 , C168) ) by L491 , XREAL_1:19;
thus L493: thesis by L492 , L490;
end;
L494: { B258 where B258 is (Element of R1) : ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , B258) ) > ( 0 ) } c= { B259 where B259 is (Element of R1) : ( PortfolioValueFut (C162 , C164 , R4 , C166 , B259) ) > ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) }
proof
let C169 being set;
assume L495: C169 in { B260 where B260 is (Element of R1) : ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , B260) ) > ( 0 ) };
consider C170 being (Element of R1) such that L496: (C169 = C170 & ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , C170) ) > ( 0 )) by L495;
L497: ( PortfolioValueFutExt (C162 , C164 , R4 , C166 , C170) ) <= ( ( PortfolioValueFut (C162 , C164 , R4 , C166 , C170) ) - ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) ) by L484 , L485 , L486 , L487 , L470;
L498: ( ( 0 ) + ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) ) < ( ( ( PortfolioValueFut (C162 , C164 , R4 , C166 , C170) ) - ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) ) + ( ( 1 + C163 ) * ( BuyPortfolio (C164 , C165 , C162) ) ) ) by L497 , L496 , XREAL_1:6;
thus L499: thesis by L498 , L496;
end;
thus L500: thesis by L494 , L488;
end;
theorem
L501: (for R1 being non  empty set holds (for R3 being (SigmaField of R1) holds (for B261 being (Function of R1 , ( REAL )) holds (B261 is_random_variable_on R3 , ( Borel_Sets ) implies (B261 is_measurable_on ( [#] R3 ) & B261 is (Real-Valued-Random-Variable of R3))))))
proof
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let C171 being (Function of R1 , ( REAL ));
assume L502: C171 is_random_variable_on R3 , ( Borel_Sets );
L503: (for B262 being (Element of ( REAL )) holds ( R1 /\ ( less_dom (C171 , B262) ) ) in R3)
proof
let C172 being (Element of ( REAL ));
L504: ( less_dom (C171 , C172) ) = { B263 where B263 is (Element of R1) : ( C171 . B263 ) < C172 } by L502 , L234;
L505: ( less_dom (C171 , C172) ) is (Element of R3) by L504 , L502 , L234;
L506: ( less_dom (C171 , C172) ) in R3 by L505;
thus L507: thesis by L506 , XBOOLE_1:28;
end;
L508: (for B264 being  real number holds ( ( [#] R3 ) /\ ( less_dom (C171 , B264) ) ) in R3)
proof
let C173 being  real number;
reconsider D32 = C173 as (Element of ( REAL )) by XREAL_0:def 1;
L509: ( ( [#] R3 ) /\ ( less_dom (C171 , D32) ) ) in R3 by L503;
thus L510: thesis by L509;
end;
L511: C171 is (Real-Valued-Random-Variable of R3)
proof
L512: (ex B265 being (Element of R3) st (B265 = R1 & C171 is_measurable_on B265))
proof
reconsider D33 = ( [#] R3 ) as (Element of R3);
L513: C171 is_measurable_on D33 by L508 , MESFUNC6:12;
thus L514: thesis by L513;
end;
thus L515: thesis by L512 , RANDOM_1:def 2;
end;
thus L516: thesis by L511 , L508 , MESFUNC6:12;
end;
theorem
L517: (for R1 being non  empty set holds (for R3 being (SigmaField of R1) holds ( set_of_random_variables_on (R3 , ( Borel_Sets )) ) c= ( Real-Valued-Random-Variables-Set R3 )))
proof
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let C174 being set;
assume L518: C174 in ( set_of_random_variables_on (R3 , ( Borel_Sets )) );
consider C175 being (Function of R1 , ( REAL )) such that L519: (C174 = C175 & C175 is_random_variable_on R3 , ( Borel_Sets )) by L518;
L520: (C175 is_random_variable_on R3 , ( Borel_Sets ) implies C175 is (Real-Valued-Random-Variable of R3)) by L501;
L521: C174 in { B266 where B266 is (Real-Valued-Random-Variable of R3) : (not contradiction) } by L520 , L519;
thus L522: thesis by L521 , RANDOM_2:def 3;
end;
