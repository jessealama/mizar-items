:: Homomorphisms of Many Sorted Algebras
::  by Ma{\l}gorzata Korolkiewicz
::
:: Received April 25, 1994
:: Copyright (c) 1994-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies STRUCT_0, XBOOLE_0, MSUALG_1, NAT_1, PBOOLE, SUBSET_1, FUNCT_1,
      RELAT_1, MEMBER_1, CARD_3, MARGREL1, TARSKI, FUNCT_6, NUMBERS, FINSEQ_4,
      PARTFUN1, WELLORD1, GROUP_6, MSUALG_2, UNIALG_2, MSUALG_3;
 notations TARSKI, XBOOLE_0,
      XTUPLE_0, SUBSET_1, NUMBERS, ORDINAL1, NAT_1, RELAT_1,
      FUNCT_1, PBOOLE, PARTFUN1, FUNCT_2, FINSEQ_1, FINSEQ_2, CARD_3, FUNCT_6,
      STRUCT_0, PRALG_1, MSUALG_1, MSUALG_2, PRALG_2;
 constructors PRALG_1, MSUALG_2, PRALG_2, RELSET_1, FINSEQ_2, XTUPLE_0;
 registrations FUNCT_2, FUNCOP_1, CARD_3, FUNCT_1, STRUCT_0, MSUALG_1,
      MSUALG_2, ORDINAL1, RELAT_1, RELSET_1, PBOOLE, FINSEQ_1, XTUPLE_0;
 requirements BOOLE, SUBSET;
 definitions TARSKI, MSUALG_2, XBOOLE_0, XTUPLE_0;
 theorems FUNCT_1, FUNCT_2, FINSEQ_1, PBOOLE, CARD_3, MSUALG_1, PRALG_1,
      MSUALG_2, TARSKI, RELAT_1, PRALG_2, FUNCT_6, FINSEQ_2, XBOOLE_0,
      FUNCOP_1, PARTFUN1;
 schemes FUNCT_1, CLASSES1;

begin
definition
let C1 being non  empty set;
let C2 , C3 being (ManySortedSet of C1);
let C4 being (ManySortedFunction of C2 , C3);
let C5 being (Element of C1);
redefine func C4 . C5 -> (Function of ( C2 . C5 ) , ( C3 . C5 ));

coherence by PBOOLE:def 15;
end;
definition
let C6 being non  empty ManySortedSign;
let C7 , C8 being MSAlgebra over C6;
mode ManySortedFunction of C7 , C8
 is (ManySortedFunction of (the Sorts of C7) , (the Sorts of C8));
end;
definition
let C9 being set;
let C10 being (ManySortedSet of C9);
func id C10 -> (ManySortedFunction of C10 , C10) means 
:L3: (for B1 being set holds (B1 in C9 implies ( it . B1 ) = ( id ( C10 . B1 ) )));
existence
proof
deffunc H1(set) = ( id ( C10 . $1 ) );
consider C11 being Function such that L4: (( dom C11 ) = C9 & (for B2 being set holds (B2 in C9 implies ( C11 . B2 ) = H1(B2)))) from FUNCT_1:sch 3;
reconsider D1 = C11 as (ManySortedSet of C9) by L4 , PARTFUN1:def 2 , RELAT_1:def 18;
L5: (for B3 being set holds (B3 in ( dom D1 ) implies ( D1 . B3 ) is Function))
proof
let C12 being set;
assume L6: C12 in ( dom D1 );
L7: ( D1 . C12 ) = ( id ( C10 . C12 ) ) by L6 , L4;
thus L8: thesis by L7;
end;
reconsider D2 = D1 as (ManySortedFunction of C9) by L5 , FUNCOP_1:def 6;
L9: (for B4 being set holds (B4 in C9 implies ( D2 . B4 ) is (Function of ( C10 . B4 ) , ( C10 . B4 ))))
proof
let C13 being set;
assume L10: C13 in C9;
L11: ( D2 . C13 ) = ( id ( C10 . C13 ) ) by L10 , L4;
thus L12: thesis by L11;
end;
reconsider D3 = D2 as (ManySortedFunction of C10 , C10) by L9 , PBOOLE:def 15;
take D3;
thus L13: thesis by L4;
end;
uniqueness
proof
let C14 , C15 being (ManySortedFunction of C10 , C10);
assume that
L14: (for B5 being set holds (B5 in C9 implies ( C14 . B5 ) = ( id ( C10 . B5 ) )))
and
L15: (for B6 being set holds (B6 in C9 implies ( C15 . B6 ) = ( id ( C10 . B6 ) )));
L16:
now
let C16 being set;
assume L17: C16 in C9;
L18: ( C14 . C16 ) = ( id ( C10 . C16 ) ) by L17 , L14;
thus L19: ( C14 . C16 ) = ( C15 . C16 ) by L18 , L15 , L17;
end;
L20: (( dom C14 ) = C9 & ( dom C15 ) = C9) by PARTFUN1:def 2;
thus L21: thesis by L20 , L16 , FUNCT_1:2;
end;
end;
definition
let C17 being Function;
attr C17 is  "1-1"
means
:L23: (for B7 being set holds (for B8 being Function holds ((B7 in ( dom C17 ) & ( C17 . B7 ) = B8) implies B8 is  one-to-one)));
end;
registration
let C18 being set;
cluster  "1-1" for (ManySortedFunction of C18);
existence
proof
set D4 = the (ManySortedSet of C18);
take D5 = ( id D4 );
let C19 being set;
let C20 being Function;
L25: ( dom ( id D4 ) ) = C18 by PARTFUN1:def 2;
assume L26: (C19 in ( dom D5 ) & ( D5 . C19 ) = C20);
L27: C20 = ( id ( D4 . C19 ) ) by L26 , L25 , L3;
thus L28: thesis by L27;
end;
end;
theorem
L30: (for B9 being set holds (for B10 being (ManySortedFunction of B9) holds (B10 is  "1-1" iff (for B11 being set holds (B11 in B9 implies ( B10 . B11 ) is  one-to-one)))))
proof
let C21 being set;
let C22 being (ManySortedFunction of C21);
L31: ( dom C22 ) = C21 by PARTFUN1:def 2;
thus L32: (C22 is  "1-1" implies (for B12 being set holds (B12 in C21 implies ( C22 . B12 ) is  one-to-one))) by L31 , L23;
assume L33: (for B13 being set holds (B13 in C21 implies ( C22 . B13 ) is  one-to-one));
L34: (for B14 being set holds (for B15 being Function holds ((B14 in ( dom C22 ) & B15 = ( C22 . B14 )) implies B15 is  one-to-one))) by L33 , L31;
thus L35: thesis by L34 , L23;
end;
definition
let C23 being set;
let C24 , C25 being (ManySortedSet of C23);
let C26 being (ManySortedFunction of C24 , C25);
attr C26 is  "onto"
means
:L36: (for B16 being set holds (B16 in C23 implies ( rng ( C26 . B16 ) ) = ( C25 . B16 )));
end;
theorem
L38: (for B17 being set holds (for B18 , B19 , B20 being (ManySortedSet of B17) holds (for B21 being (ManySortedFunction of B18 , B19) holds (for B22 being (ManySortedFunction of B19 , B20) holds (( dom ( B22 ** B21 ) ) = B17 & (for B23 being set holds (B23 in B17 implies ( ( B22 ** B21 ) . B23 ) = ( ( B22 . B23 ) * ( B21 . B23 ) ))))))))
proof
let C27 being set;
let C28 , C29 , C30 being (ManySortedSet of C27);
let C31 being (ManySortedFunction of C28 , C29);
let C32 being (ManySortedFunction of C29 , C30);
L39: (( dom C31 ) = C27 & ( dom C32 ) = C27) by PARTFUN1:def 2;
L40: ( ( dom C31 ) /\ ( dom C32 ) ) = C27 by L39;
thus L41: ( dom ( C32 ** C31 ) ) = C27 by L40 , PBOOLE:def 19;
let C33 being set;
thus L42: thesis by L41 , PBOOLE:def 19;
end;
definition
let C34 being set;
let C35 being (ManySortedSet of C34);
let C36 , C37 being  non-empty (ManySortedSet of C34);
let C38 being (ManySortedFunction of C35 , C36);
let C39 being (ManySortedFunction of C36 , C37);
redefine func C39 ** C38 -> (ManySortedFunction of C35 , C37);

coherence
proof
L43: ( dom ( C39 ** C38 ) ) = C34 by L38;
reconsider D6 = ( C39 ** C38 ) as (ManySortedSet of C34) by L43 , PARTFUN1:def 2 , RELAT_1:def 18;
reconsider D7 = D6 as (ManySortedFunction of C34);
L44: (for B24 being set holds (B24 in C34 implies ( D7 . B24 ) is (Function of ( C35 . B24 ) , ( C37 . B24 ))))
proof
let C40 being set;
assume L45: C40 in C34;
reconsider D8 = ( C38 . C40 ) as (Function of ( C35 . C40 ) , ( C36 . C40 )) by L45 , PBOOLE:def 15;
reconsider D9 = ( C39 . C40 ) as (Function of ( C36 . C40 ) , ( C37 . C40 )) by L45 , PBOOLE:def 15;
L46: ( ( C39 ** C38 ) . C40 ) = ( D9 * D8 ) by L45 , L38;
thus L47: thesis by L46 , L45;
end;
thus L48: thesis by L44 , PBOOLE:def 15;
end;
end;
theorem
L50: (for B25 being set holds (for B26 , B27 being (ManySortedSet of B25) holds (for B28 being (ManySortedFunction of B26 , B27) holds ( B28 ** ( id B26 ) ) = B28)))
proof
let C41 being set;
let C42 , C43 being (ManySortedSet of C41);
let C44 being (ManySortedFunction of C42 , C43);
L51: ( dom ( C44 ** ( id C42 ) ) ) = ( ( dom C44 ) /\ ( dom ( id C42 ) ) ) by PBOOLE:def 19
.= ( C41 /\ ( dom ( id C42 ) ) ) by PARTFUN1:def 2
.= ( C41 /\ C41 ) by PARTFUN1:def 2
.= C41;
reconsider D10 = ( C44 ** ( id C42 ) ) as (ManySortedFunction of C41) by L51 , PARTFUN1:def 2 , RELAT_1:def 18;
L52:
now
let C45 being set;
assume L53: C45 in C41;
reconsider D11 = ( C44 . C45 ) as (Function of ( C42 . C45 ) , ( C43 . C45 )) by L53 , PBOOLE:def 15;
reconsider D12 = ( ( id C42 ) . C45 ) as (Function of ( C42 . C45 ) , ( C42 . C45 )) by L53 , PBOOLE:def 15;
L54: ( D10 . C45 ) = ( D11 * D12 ) by L53 , L38
.= ( D11 * ( id ( C42 . C45 ) ) ) by L53 , L3;
per cases ;
suppose L55: (( C43 . C45 ) = ( {} ) implies ( C42 . C45 ) = ( {} ));

L56: ( dom D11 ) = ( C42 . C45 ) by L55 , FUNCT_2:def 1;
thus L57: ( D10 . C45 ) = ( C44 . C45 ) by L56 , L54 , RELAT_1:52;
end;
suppose L58: (( C43 . C45 ) = ( {} ) & ( C42 . C45 ) <> ( {} ));

L59: D11 = ( {} ) by L58;
thus L60: ( D10 . C45 ) = ( C44 . C45 ) by L59 , L54;
end;
end;
thus L62: thesis by L52 , PBOOLE:3;
end;
theorem
L63: (for B29 being set holds (for B30 , B31 being (ManySortedSet of B29) holds (for B32 being (ManySortedFunction of B30 , B31) holds ( ( id B31 ) ** B32 ) = B32)))
proof
let C46 being set;
let C47 , C48 being (ManySortedSet of C46);
let C49 being (ManySortedFunction of C47 , C48);
L64: ( dom ( ( id C48 ) ** C49 ) ) = ( ( dom ( id C48 ) ) /\ ( dom C49 ) ) by PBOOLE:def 19
.= ( C46 /\ ( dom C49 ) ) by PARTFUN1:def 2
.= ( C46 /\ C46 ) by PARTFUN1:def 2
.= C46;
reconsider D13 = ( ( id C48 ) ** C49 ) as (ManySortedFunction of C46) by L64 , PARTFUN1:def 2 , RELAT_1:def 18;
L65:
now
let C50 being set;
assume L66: C50 in C46;
reconsider D14 = ( C49 . C50 ) as (Function of ( C47 . C50 ) , ( C48 . C50 )) by L66 , PBOOLE:def 15;
reconsider D15 = ( ( id C48 ) . C50 ) as (Function of ( C48 . C50 ) , ( C48 . C50 )) by L66 , PBOOLE:def 15;
L67: (D15 = ( id ( C48 . C50 ) ) & ( D13 . C50 ) = ( D15 * D14 )) by L66 , L3 , L38;
thus L68: ( D13 . C50 ) = ( C49 . C50 ) by L67 , FUNCT_2:17;
end;
thus L69: thesis by L65 , PBOOLE:3;
end;
definition
let C51 being set;
let C52 , C53 being (ManySortedSet of C51);
let C54 being (ManySortedFunction of C52 , C53);
assume that
L70: C54 is  "1-1"
and
L71: C54 is  "onto";
func C54 "" -> (ManySortedFunction of C53 , C52) means 
:L72: (for B33 being set holds (B33 in C51 implies ( it . B33 ) = ( ( C54 . B33 ) " )));
existence
proof
defpred S1[ set , set ] means $2 = ( ( C54 . $1 ) " );
L73: (for B34 being set holds (B34 in C51 implies (ex B35 being set st S1[ B34 , B35 ])));
consider C55 being Function such that L74: (( dom C55 ) = C51 & (for B36 being set holds (B36 in C51 implies S1[ B36 , ( C55 . B36 ) ]))) from CLASSES1:sch 1(L73);
reconsider D16 = C55 as (ManySortedSet of C51) by L74 , PARTFUN1:def 2 , RELAT_1:def 18;
L75: (for B37 being set holds (B37 in ( dom D16 ) implies ( D16 . B37 ) is Function))
proof
let C56 being set;
assume L76: C56 in ( dom D16 );
L77: C56 in C51 by L76 , PARTFUN1:def 2;
reconsider D17 = ( C54 . C56 ) as (Function of ( C52 . C56 ) , ( C53 . C56 )) by L77 , PBOOLE:def 15;
L78: ( D16 . C56 ) = ( D17 " ) by L74 , L76;
thus L79: thesis by L78;
end;
reconsider D18 = D16 as (ManySortedFunction of C51) by L75 , FUNCOP_1:def 6;
L80: (for B38 being set holds (B38 in C51 implies ( D18 . B38 ) is (Function of ( C53 . B38 ) , ( C52 . B38 ))))
proof
let C57 being set;
assume L81: C57 in C51;
reconsider D19 = ( C54 . C57 ) as (Function of ( C52 . C57 ) , ( C53 . C57 )) by L81 , PBOOLE:def 15;
L82: C57 in ( dom C54 ) by L81 , PARTFUN1:def 2;
L83: D19 is  one-to-one by L82 , L70 , L23;
L84: ( rng D19 ) = ( C53 . C57 ) by L71 , L81 , L36;
L85: ( D19 " ) is (Function of ( C53 . C57 ) , ( C52 . C57 )) by L84 , L83 , FUNCT_2:25;
thus L86: thesis by L85 , L74 , L81;
end;
reconsider D20 = D18 as (ManySortedFunction of C53 , C52) by L80 , PBOOLE:def 15;
take D20;
thus L87: thesis by L74;
end;
uniqueness
proof
let C58 , C59 being (ManySortedFunction of C53 , C52);
assume that
L88: (for B39 being set holds (B39 in C51 implies ( C58 . B39 ) = ( ( C54 . B39 ) " )))
and
L89: (for B40 being set holds (B40 in C51 implies ( C59 . B40 ) = ( ( C54 . B40 ) " )));
L90:
now
let C60 being set;
assume L91: C60 in C51;
reconsider D21 = ( C54 . C60 ) as (Function of ( C52 . C60 ) , ( C53 . C60 )) by L91 , PBOOLE:def 15;
L92: ( C58 . C60 ) = ( D21 " ) by L88 , L91;
thus L93: ( C58 . C60 ) = ( C59 . C60 ) by L92 , L89 , L91;
end;
thus L94: thesis by L90 , PBOOLE:3;
end;
end;
theorem
L96: (for B41 being set holds (for B42 , B43 being  non-empty (ManySortedSet of B41) holds (for B44 being (ManySortedFunction of B42 , B43) holds (for B45 being (ManySortedFunction of B43 , B42) holds ((B44 is  "1-1"  "onto" & B45 = ( B44 "" )) implies (( B44 ** B45 ) = ( id B43 ) & ( B45 ** B44 ) = ( id B42 )))))))
proof
let C61 being set;
let C62 , C63 being  non-empty (ManySortedSet of C61);
let C64 being (ManySortedFunction of C62 , C63);
let C65 being (ManySortedFunction of C63 , C62);
assume that
L97: C64 is  "1-1"  "onto"
and
L98: C65 = ( C64 "" );
L99:
now
let C66 being set;
assume L100: C66 in C61;
reconsider D22 = ( C64 . C66 ) as (Function of ( C62 . C66 ) , ( C63 . C66 )) by L100 , PBOOLE:def 15;
reconsider D23 = ( C65 . C66 ) as (Function of ( C63 . C66 ) , ( C62 . C66 )) by L100 , PBOOLE:def 15;
L101: C66 in ( dom C64 ) by L100 , PARTFUN1:def 2;
L102: D22 is  one-to-one by L101 , L97 , L23;
L103: D23 = ( D22 " ) by L97 , L98 , L100 , L72;
L104: ( D22 * D23 ) = ( id ( rng D22 ) ) by L103 , L102 , FUNCT_1:39;
L105: ( D22 * D23 ) = ( id ( C63 . C66 ) ) by L104 , L97 , L100 , L36;
thus L106: ( ( C64 ** C65 ) . C66 ) = ( id ( C63 . C66 ) ) by L105 , L100 , L38;
end;
L107: (for B46 being set holds (B46 in C61 implies ( ( C65 ** C64 ) . B46 ) = ( id ( C62 . B46 ) )))
proof
let C67 being set;
assume L108: C67 in C61;
reconsider D24 = ( C64 . C67 ) as (Function of ( C62 . C67 ) , ( C63 . C67 )) by L108 , PBOOLE:def 15;
reconsider D25 = ( C65 . C67 ) as (Function of ( C63 . C67 ) , ( C62 . C67 )) by L108 , PBOOLE:def 15;
L109: C67 in ( dom C64 ) by L108 , PARTFUN1:def 2;
L110: D24 is  one-to-one by L109 , L97 , L23;
L111: (D25 = ( D24 " ) & ( dom D24 ) = ( C62 . C67 )) by L97 , L98 , L108 , L72 , FUNCT_2:def 1;
L112: ( D25 * D24 ) = ( id ( C62 . C67 ) ) by L111 , L110 , FUNCT_1:39;
thus L113: thesis by L112 , L108 , L38;
end;
thus L114: thesis by L107 , L99 , L3;
end;
registration
let R1 being non  void non  empty ManySortedSign;
let C68 being  non-empty MSAlgebra over R1;
let R4 being (OperSymbol of R1);
cluster ( Args (R4 , C68) ) ->  functional;
coherence
proof
L115: ( Args (R4 , C68) ) = ( product ( (the Sorts of C68) * ( the_arity_of R4 ) ) ) by PRALG_2:3;
thus L116: thesis by L115;
end;
end;
begin
theorem
L118: (for R1 being non  void non  empty ManySortedSign holds (for R4 being (OperSymbol of R1) holds (for B47 being MSAlgebra over R1 holds (for B48 being Function holds (B48 in ( Args (R4 , B47) ) implies (( dom B48 ) = ( dom ( the_arity_of R4 ) ) & (for B49 being set holds (B49 in ( dom ( (the Sorts of B47) * ( the_arity_of R4 ) ) ) implies ( B48 . B49 ) in ( ( (the Sorts of B47) * ( the_arity_of R4 ) ) . B49 )))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R4 being (OperSymbol of R1);
let C69 being MSAlgebra over R1;
let C70 being Function;
L119: ( Args (R4 , C69) ) = ( product ( (the Sorts of C69) * ( the_arity_of R4 ) ) ) by PRALG_2:3;
L120: ( dom (the Sorts of C69) ) = (the carrier of R1) by PARTFUN1:def 2;
L121: ( rng ( the_arity_of R4 ) ) c= ( dom (the Sorts of C69) ) by L120 , FINSEQ_1:def 4;
assume L122: C70 in ( Args (R4 , C69) );
L123: ( dom C70 ) = ( dom ( (the Sorts of C69) * ( the_arity_of R4 ) ) ) by L122 , L119 , CARD_3:9;
thus L124: thesis by L123 , L122 , L119 , L121 , CARD_3:9 , RELAT_1:27;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C71 , C72 being MSAlgebra over R1;
let R4 being (OperSymbol of R1);
let C73 being (ManySortedFunction of C71 , C72);
let C74 being (Element of ( Args (R4 , C71) ));
assume that
L125: ( Args (R4 , C71) ) <> ( {} )
and
L126: ( Args (R4 , C72) ) <> ( {} );
func C73 # C74 -> (Element of ( Args (R4 , C72) )) equals 
:L127: ( ( Frege ( C73 * ( the_arity_of R4 ) ) ) . C74 );
coherence
proof
L128: ( dom ( (the Sorts of C71) * ( the_arity_of R4 ) ) ) = ( ( C73 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C73 * ( the_arity_of R4 ) ) ) ) )
proof
thus L129:now
let C75 being set;
L130: ( ( C73 * ( the_arity_of R4 ) ) . C75 ) is Function;
assume L131: C75 in ( dom ( (the Sorts of C71) * ( the_arity_of R4 ) ) );
L132: ( ( the_arity_of R4 ) . C75 ) in ( dom (the Sorts of C71) ) by L131 , FUNCT_1:11;
L133: ( ( the_arity_of R4 ) . C75 ) in (the carrier of R1) by L132 , PARTFUN1:def 2;
L134: ( ( the_arity_of R4 ) . C75 ) in ( dom C73 ) by L133 , PARTFUN1:def 2;
L135: C75 in ( dom ( the_arity_of R4 ) ) by L131 , FUNCT_1:11;
L136: C75 in ( dom ( C73 * ( the_arity_of R4 ) ) ) by L135 , L134 , FUNCT_1:11;
thus L137: C75 in ( ( C73 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C73 * ( the_arity_of R4 ) ) ) ) ) by L136 , L130 , FUNCT_6:19;
end;
let C76 being set;
assume L138: C76 in ( ( C73 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C73 * ( the_arity_of R4 ) ) ) ) );
L139: C76 in ( dom ( C73 * ( the_arity_of R4 ) ) ) by L138 , FUNCT_6:19;
L140: C76 in ( dom ( the_arity_of R4 ) ) by L139 , FUNCT_1:11;
reconsider D26 = C76 as (Element of ( NAT )) by L140;
L141: ( ( the_arity_of R4 ) . D26 ) in (the carrier of R1) by L140 , FINSEQ_2:11;
L142: ( ( the_arity_of R4 ) . C76 ) in ( dom (the Sorts of C71) ) by L141 , PARTFUN1:def 2;
thus L143: thesis by L142 , L140 , FUNCT_1:11;
end;
L144:
now
let C77 being set;
L145: ( product ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) <> ( {} ) by L126 , PRALG_2:3;
assume L146: C77 in ( ( C73 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C73 * ( the_arity_of R4 ) ) ) ) );
L147: C77 in ( dom ( C73 * ( the_arity_of R4 ) ) ) by L146 , FUNCT_6:19;
L148: C77 in ( dom ( the_arity_of R4 ) ) by L147 , FUNCT_1:11;
reconsider D27 = C77 as (Element of ( NAT )) by L148;
L149: ( ( the_arity_of R4 ) . D27 ) in (the carrier of R1) by L148 , FINSEQ_2:11;
L150: ( ( the_arity_of R4 ) . C77 ) in ( dom (the Sorts of C72) ) by L149 , PARTFUN1:def 2;
L151: C77 in ( dom ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) by L150 , L148 , FUNCT_1:11;
L152: ( ( (the Sorts of C72) * ( the_arity_of R4 ) ) . C77 ) = ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C77 ) ) by L148 , FUNCT_1:13;
L153:
now
assume L154: ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C77 ) ) = ( {} );
L155: ( {} ) in ( rng ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) by L154 , L151 , L152 , FUNCT_1:def 3;
thus L156: contradiction by L155 , L145 , CARD_3:26;
end;
reconsider D28 = ( C73 . ( ( the_arity_of R4 ) . C77 ) ) as (Function of ( (the Sorts of C71) . ( ( the_arity_of R4 ) . C77 ) ) , ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C77 ) )) by L148 , FINSEQ_2:11 , PBOOLE:def 15;
thus L157: ( ( (the Sorts of C71) * ( the_arity_of R4 ) ) . C77 ) = ( (the Sorts of C71) . ( ( the_arity_of R4 ) . C77 ) ) by L148 , FUNCT_1:13
.= ( dom D28 ) by L153 , FUNCT_2:def 1
.= ( proj1 D28 )
.= ( proj1 ( ( C73 * ( the_arity_of R4 ) ) . C77 ) ) by L148 , FUNCT_1:13;
end;
L158: ( (the Sorts of C71) * ( the_arity_of R4 ) ) = ( doms ( C73 * ( the_arity_of R4 ) ) ) by L144 , L128 , FUNCT_6:def 2;
L159: C74 in ( Args (R4 , C71) ) by L125;
L160: C74 in ( product ( (the Sorts of C71) * ( the_arity_of R4 ) ) ) by L159 , PRALG_2:3;
consider C78 being Function such that L161: C74 = C78 and L162: ( dom C78 ) = ( dom ( doms ( C73 * ( the_arity_of R4 ) ) ) ) and L163: (for B50 being set holds (B50 in ( dom ( doms ( C73 * ( the_arity_of R4 ) ) ) ) implies ( C78 . B50 ) in ( ( doms ( C73 * ( the_arity_of R4 ) ) ) . B50 ))) by L160 , L158 , CARD_3:def 5;
L164: ( dom ( ( C73 * ( the_arity_of R4 ) ) .. C78 ) ) = ( dom ( C73 * ( the_arity_of R4 ) ) ) by PRALG_1:def 17;
L165: ( rng ( the_arity_of R4 ) ) c= (the carrier of R1) by FINSEQ_1:def 4;
L166: ( rng ( the_arity_of R4 ) ) c= ( dom (the Sorts of C72) ) by L165 , PARTFUN1:def 2;
L167: ( rng ( the_arity_of R4 ) ) c= ( dom C73 ) by L165 , PARTFUN1:def 2;
L168: ( dom ( C73 * ( the_arity_of R4 ) ) ) = ( dom ( the_arity_of R4 ) ) by L167 , RELAT_1:27
.= ( dom ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) by L166 , RELAT_1:27;
L169:
now
let C79 being set;
L170: ( product ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) <> ( {} ) by L126 , PRALG_2:3;
assume L171: C79 in ( dom ( (the Sorts of C72) * ( the_arity_of R4 ) ) );
L172: C79 in ( dom ( the_arity_of R4 ) ) by L171 , FUNCT_1:11;
reconsider D29 = ( C73 . ( ( the_arity_of R4 ) . C79 ) ) as (Function of ( (the Sorts of C71) . ( ( the_arity_of R4 ) . C79 ) ) , ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C79 ) )) by L172 , FINSEQ_2:11 , PBOOLE:def 15;
reconsider D30 = C79 as (Element of ( NAT )) by L172;
L173: D29 = ( ( C73 * ( the_arity_of R4 ) ) . C79 ) by L168 , L171 , FUNCT_1:12;
L174: ( ( ( C73 * ( the_arity_of R4 ) ) .. C78 ) . C79 ) = ( D29 . ( C78 . C79 ) ) by L173 , L168 , L171 , PRALG_1:def 17;
L175: ( ( (the Sorts of C72) * ( the_arity_of R4 ) ) . C79 ) = ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C79 ) ) by L172 , FUNCT_1:13;
L176:
now
assume L177: ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C79 ) ) = ( {} );
L178: ( {} ) in ( rng ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) by L177 , L171 , L175 , FUNCT_1:def 3;
thus L179: contradiction by L178 , L170 , CARD_3:26;
end;
L180: ( ( the_arity_of R4 ) . D30 ) in (the carrier of R1) by L172 , FINSEQ_2:11;
L181: ( ( the_arity_of R4 ) . C79 ) in ( dom (the Sorts of C71) ) by L180 , PARTFUN1:def 2;
L182: C79 in ( dom ( (the Sorts of C71) * ( the_arity_of R4 ) ) ) by L181 , L172 , FUNCT_1:11;
L183: ( C78 . C79 ) in ( ( doms ( C73 * ( the_arity_of R4 ) ) ) . C79 ) by L182 , L158 , L163;
L184: ( C78 . C79 ) in ( (the Sorts of C71) . ( ( the_arity_of R4 ) . C79 ) ) by L183 , L158 , L172 , FUNCT_1:13;
L185: ( D29 . ( C78 . C79 ) ) in ( (the Sorts of C72) . ( ( the_arity_of R4 ) . C79 ) ) by L184 , L176 , FUNCT_2:5;
thus L186: ( ( ( C73 * ( the_arity_of R4 ) ) .. C78 ) . C79 ) in ( ( (the Sorts of C72) * ( the_arity_of R4 ) ) . C79 ) by L185 , L171 , L174 , FUNCT_1:12;
end;
L187: ( ( Frege ( C73 * ( the_arity_of R4 ) ) ) . C74 ) = ( ( C73 * ( the_arity_of R4 ) ) .. C78 ) by L160 , L158 , L161 , PRALG_2:def 2;
L188: ( ( Frege ( C73 * ( the_arity_of R4 ) ) ) . C74 ) in ( product ( (the Sorts of C72) * ( the_arity_of R4 ) ) ) by L187 , L164 , L168 , L169 , CARD_3:9;
thus L189: thesis by L188 , PRALG_2:3;
end;
correctness;
end;
L191:
now
let R1 being non  void non  empty ManySortedSign;
let C80 , C81 being MSAlgebra over R1;
let R4 being (OperSymbol of R1);
let C82 being (ManySortedFunction of C80 , C81);
let C83 being (Element of ( Args (R4 , C80) ));
let C84 , C85 being Function;
assume that
L192: C83 = C84
and
L193: C83 in ( Args (R4 , C80) )
and
L194: C85 in ( Args (R4 , C81) );
L195: ( rng ( the_arity_of R4 ) ) c= (the carrier of R1) by FINSEQ_1:def 4;
L196: ( rng ( the_arity_of R4 ) ) c= ( dom (the Sorts of C80) ) by L195 , PARTFUN1:def 2;
L197: ( C82 # C83 ) = ( ( Frege ( C82 * ( the_arity_of R4 ) ) ) . C83 ) by L193 , L194 , L127;
L198: ( dom ( (the Sorts of C80) * ( the_arity_of R4 ) ) ) = ( ( C82 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C82 * ( the_arity_of R4 ) ) ) ) )
proof
thus L199:now
let C86 being set;
L200: ( ( C82 * ( the_arity_of R4 ) ) . C86 ) is Function;
assume L201: C86 in ( dom ( (the Sorts of C80) * ( the_arity_of R4 ) ) );
L202: ( ( the_arity_of R4 ) . C86 ) in ( dom (the Sorts of C80) ) by L201 , FUNCT_1:11;
L203: ( ( the_arity_of R4 ) . C86 ) in (the carrier of R1) by L202 , PARTFUN1:def 2;
L204: ( ( the_arity_of R4 ) . C86 ) in ( dom C82 ) by L203 , PARTFUN1:def 2;
L205: C86 in ( dom ( the_arity_of R4 ) ) by L201 , FUNCT_1:11;
L206: C86 in ( dom ( C82 * ( the_arity_of R4 ) ) ) by L205 , L204 , FUNCT_1:11;
thus L207: C86 in ( ( C82 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C82 * ( the_arity_of R4 ) ) ) ) ) by L206 , L200 , FUNCT_6:19;
end;
let C87 being set;
assume L208: C87 in ( ( C82 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C82 * ( the_arity_of R4 ) ) ) ) );
L209: C87 in ( dom ( C82 * ( the_arity_of R4 ) ) ) by L208 , FUNCT_6:19;
L210: C87 in ( dom ( the_arity_of R4 ) ) by L209 , FUNCT_1:11;
reconsider D31 = C87 as (Element of ( NAT )) by L210;
L211: ( ( the_arity_of R4 ) . D31 ) in (the carrier of R1) by L210 , FINSEQ_2:11;
L212: ( ( the_arity_of R4 ) . C87 ) in ( dom (the Sorts of C80) ) by L211 , PARTFUN1:def 2;
thus L213: thesis by L212 , L210 , FUNCT_1:11;
end;
L214: ( Args (R4 , C81) ) = ( product ( (the Sorts of C81) * ( the_arity_of R4 ) ) ) by PRALG_2:3;
L215: ( dom C85 ) = ( dom ( (the Sorts of C81) * ( the_arity_of R4 ) ) ) by L214 , L194 , CARD_3:9;
L216: ( Args (R4 , C80) ) = ( product ( (the Sorts of C80) * ( the_arity_of R4 ) ) ) by PRALG_2:3;
L217: ( dom C84 ) = ( dom ( (the Sorts of C80) * ( the_arity_of R4 ) ) ) by L216 , L192 , L193 , CARD_3:9
.= ( dom ( the_arity_of R4 ) ) by L196 , RELAT_1:27;
L218: ( rng ( the_arity_of R4 ) ) c= ( dom (the Sorts of C81) ) by L195 , PARTFUN1:def 2;
L219: ( dom C85 ) = ( dom ( the_arity_of R4 ) ) by L218 , L215 , RELAT_1:27;
L220:
now
let C88 being set;
assume L221: C88 in ( ( C82 * ( the_arity_of R4 ) ) " ( SubFuncs ( rng ( C82 * ( the_arity_of R4 ) ) ) ) );
L222: C88 in ( dom ( C82 * ( the_arity_of R4 ) ) ) by L221 , FUNCT_6:19;
L223: C88 in ( dom ( the_arity_of R4 ) ) by L222 , FUNCT_1:11;
reconsider D32 = ( C82 . ( ( the_arity_of R4 ) . C88 ) ) as (Function of ( (the Sorts of C80) . ( ( the_arity_of R4 ) . C88 ) ) , ( (the Sorts of C81) . ( ( the_arity_of R4 ) . C88 ) )) by L223 , FINSEQ_2:11 , PBOOLE:def 15;
L224: ( ( (the Sorts of C81) * ( the_arity_of R4 ) ) . C88 ) in ( rng ( (the Sorts of C81) * ( the_arity_of R4 ) ) ) by L215 , L219 , L223 , FUNCT_1:def 3;
L225: ( ( (the Sorts of C81) * ( the_arity_of R4 ) ) . C88 ) <> ( {} ) by L224 , L194 , L214 , CARD_3:26;
L226: (( ( (the Sorts of C80) * ( the_arity_of R4 ) ) . C88 ) = ( (the Sorts of C80) . ( ( the_arity_of R4 ) . C88 ) ) & ( ( (the Sorts of C81) * ( the_arity_of R4 ) ) . C88 ) = ( (the Sorts of C81) . ( ( the_arity_of R4 ) . C88 ) )) by L223 , FUNCT_1:13;
thus L227: ( ( (the Sorts of C80) * ( the_arity_of R4 ) ) . C88 ) = ( dom D32 ) by L226 , L225 , FUNCT_2:def 1
.= ( proj1 D32 )
.= ( proj1 ( ( C82 * ( the_arity_of R4 ) ) . C88 ) ) by L223 , FUNCT_1:13;
end;
L228: ( (the Sorts of C80) * ( the_arity_of R4 ) ) = ( doms ( C82 * ( the_arity_of R4 ) ) ) by L220 , L198 , FUNCT_6:def 2;
thus L229:now
assume L230: C85 = ( C82 # C83 );
L231: C85 = ( ( Frege ( C82 * ( the_arity_of R4 ) ) ) . C83 ) by L230 , L193 , L194 , L127;
let R5 being Nat;
assume L232: R5 in ( dom C84 );
L233: ( ( the_arity_of R4 ) . R5 ) in (the carrier of R1) by L232 , L217 , FINSEQ_2:11;
L234: ( ( the_arity_of R4 ) . R5 ) in ( dom C82 ) by L233 , PARTFUN1:def 2;
L235: R5 in ( dom ( C82 * ( the_arity_of R4 ) ) ) by L234 , L217 , L232 , FUNCT_1:11;
L236: ( ( C82 * ( the_arity_of R4 ) ) . R5 ) = ( C82 . ( ( the_arity_of R4 ) . R5 ) ) by L235 , FUNCT_1:12
.= ( C82 . ( ( the_arity_of R4 ) /. R5 ) ) by L217 , L232 , PARTFUN1:def 6;
thus L237: ( C85 . R5 ) = ( ( ( C82 * ( the_arity_of R4 ) ) .. C84 ) . R5 ) by L192 , L193 , L216 , L228 , L231 , PRALG_2:def 2
.= ( ( C82 . ( ( the_arity_of R4 ) /. R5 ) ) . ( C84 . R5 ) ) by L235 , L236 , PRALG_1:def 17;
end;
L238: ( C82 # C83 ) is (Element of ( product ( (the Sorts of C81) * ( the_arity_of R4 ) ) )) by PRALG_2:3;
reconsider D33 = ( C82 # C83 ) as Function by L238;
L239: ( rng ( the_arity_of R4 ) ) c= ( dom C82 ) by L195 , PARTFUN1:def 2;
assume L240: (for R5 being Nat holds (R5 in ( dom C84 ) implies ( C85 . R5 ) = ( ( C82 . ( ( the_arity_of R4 ) /. R5 ) ) . ( C84 . R5 ) )));
L241:
now
let C89 being set;
assume L242: C89 in ( dom C84 );
reconsider D34 = C89 as Nat by L242 , L217;
L243: ( ( the_arity_of R4 ) . D34 ) in (the carrier of R1) by L217 , L242 , FINSEQ_2:11;
L244: ( ( the_arity_of R4 ) . D34 ) in ( dom C82 ) by L243 , PARTFUN1:def 2;
L245: D34 in ( dom ( C82 * ( the_arity_of R4 ) ) ) by L244 , L217 , L242 , FUNCT_1:11;
L246: ( ( C82 * ( the_arity_of R4 ) ) . D34 ) = ( C82 . ( ( the_arity_of R4 ) . D34 ) ) by L245 , FUNCT_1:12
.= ( C82 . ( ( the_arity_of R4 ) /. D34 ) ) by L217 , L242 , PARTFUN1:def 6;
thus L247: ( C85 . C89 ) = ( ( C82 . ( ( the_arity_of R4 ) /. D34 ) ) . ( C84 . D34 ) ) by L240 , L242
.= ( ( ( C82 * ( the_arity_of R4 ) ) .. C84 ) . D34 ) by L245 , L246 , PRALG_1:def 17
.= ( D33 . C89 ) by L192 , L193 , L216 , L228 , L197 , PRALG_2:def 2;
end;
L248: ( C82 # C83 ) = ( ( C82 * ( the_arity_of R4 ) ) .. C84 ) by L192 , L193 , L216 , L228 , L197 , PRALG_2:def 2;
L249: ( dom D33 ) = ( dom ( C82 * ( the_arity_of R4 ) ) ) by L248 , PRALG_1:def 17
.= ( dom C84 ) by L217 , L239 , RELAT_1:27;
thus L250: C85 = ( C82 # C83 ) by L249 , L217 , L219 , L241 , FUNCT_1:2;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C90 , C91 being  non-empty MSAlgebra over R1;
let R4 being (OperSymbol of R1);
let C92 being (ManySortedFunction of C90 , C91);
let C93 being (Element of ( Args (R4 , C90) ));
redefine func C92 # C93 means 
:L251: (for R5 being Nat holds (R5 in ( dom C93 ) implies ( it . R5 ) = ( ( C92 . ( ( the_arity_of R4 ) /. R5 ) ) . ( C93 . R5 ) )));
compatibility by L191;
end;
theorem
L253: (for R1 being non  void non  empty ManySortedSign holds (for R4 being (OperSymbol of R1) holds (for B51 being MSAlgebra over R1 holds (( Args (R4 , B51) ) <> ( {} ) implies (for B52 being (Element of ( Args (R4 , B51) )) holds B52 = ( ( id (the Sorts of B51) ) # B52 ))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R4 being (OperSymbol of R1);
let C94 being MSAlgebra over R1;
set D35 = ( id (the Sorts of C94) );
assume L254: ( Args (R4 , C94) ) <> ( {} );
reconsider D36 = ( Args (R4 , C94) ) as non  empty set by L254;
let C95 being (Element of ( Args (R4 , C94) ));
reconsider D37 = ( D35 # C95 ) as (Element of D36);
L255: ( Args (R4 , C94) ) = ( product ( (the Sorts of C94) * ( the_arity_of R4 ) ) ) by PRALG_2:3;
consider C96 being Function such that L256: D37 = C96 and L257: ( dom C96 ) = ( dom ( (the Sorts of C94) * ( the_arity_of R4 ) ) ) and L258: (for B53 being set holds (B53 in ( dom ( (the Sorts of C94) * ( the_arity_of R4 ) ) ) implies ( C96 . B53 ) in ( ( (the Sorts of C94) * ( the_arity_of R4 ) ) . B53 ))) by L255 , CARD_3:def 5;
consider C97 being Function such that L259: C95 = C97 and L260: ( dom C97 ) = ( dom ( (the Sorts of C94) * ( the_arity_of R4 ) ) ) and L261: (for B54 being set holds (B54 in ( dom ( (the Sorts of C94) * ( the_arity_of R4 ) ) ) implies ( C97 . B54 ) in ( ( (the Sorts of C94) * ( the_arity_of R4 ) ) . B54 ))) by L254 , L255 , CARD_3:def 5;
L262: ( dom C97 ) = ( dom ( the_arity_of R4 ) ) by L259 , L256 , L118;
L263: (for B55 being set holds (B55 in ( dom C97 ) implies ( C97 . B55 ) = ( C96 . B55 )))
proof
let C98 being set;
assume L264: C98 in ( dom C97 );
reconsider D38 = C98 as Nat by L264 , L262;
set D39 = ( ( the_arity_of R4 ) /. D38 );
L265: ( dom (the Sorts of C94) ) = (the carrier of R1) by PARTFUN1:def 2;
L266: ( rng ( the_arity_of R4 ) ) c= ( dom (the Sorts of C94) ) by L265 , FINSEQ_1:def 4;
L267: ( dom ( (the Sorts of C94) * ( the_arity_of R4 ) ) ) = ( dom ( the_arity_of R4 ) ) by L266 , RELAT_1:27;
L268: ( C97 . D38 ) in ( ( (the Sorts of C94) * ( the_arity_of R4 ) ) . D38 ) by L267 , L254 , L259 , L262 , L264 , L118;
L269: ( C97 . D38 ) in ( (the Sorts of C94) . ( ( the_arity_of R4 ) . D38 ) ) by L268 , L262 , L264 , L267 , FUNCT_1:12;
L270: ( C97 . D38 ) in ( (the Sorts of C94) . D39 ) by L269 , L262 , L264 , PARTFUN1:def 6;
L271: ( D35 . D39 ) = ( id ( (the Sorts of C94) . D39 ) ) by L3;
L272: ( C96 . D38 ) = ( ( D35 . ( ( the_arity_of R4 ) /. D38 ) ) . ( C97 . D38 ) ) by L259 , L256 , L264 , L191;
thus L273: thesis by L272 , L271 , L270 , FUNCT_1:18;
end;
L274: ( dom C96 ) = ( dom ( the_arity_of R4 ) ) by L256 , L118;
thus L275: thesis by L274 , L259 , L256 , L263 , L118 , FUNCT_1:2;
end;
theorem
L276: (for R1 being non  void non  empty ManySortedSign holds (for R4 being (OperSymbol of R1) holds (for B56 , B57 , B58 being  non-empty MSAlgebra over R1 holds (for B59 being (ManySortedFunction of B56 , B57) holds (for B60 being (ManySortedFunction of B57 , B58) holds (for B61 being (Element of ( Args (R4 , B56) )) holds ( ( B60 ** B59 ) # B61 ) = ( B60 # ( B59 # B61 ) )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R4 being (OperSymbol of R1);
let C99 , C100 , C101 being  non-empty MSAlgebra over R1;
let C102 being (ManySortedFunction of C99 , C100);
let C103 being (ManySortedFunction of C100 , C101);
let C104 being (Element of ( Args (R4 , C99) ));
L277: ( dom C104 ) = ( dom ( the_arity_of R4 ) ) by L118;
L278: ( dom ( C102 # C104 ) ) = ( dom ( the_arity_of R4 ) ) by L118;
L279: (for B62 being set holds (B62 in ( dom ( the_arity_of R4 ) ) implies ( ( ( C103 ** C102 ) # C104 ) . B62 ) = ( ( C103 # ( C102 # C104 ) ) . B62 )))
proof
L280: ( rng ( the_arity_of R4 ) ) c= (the carrier of R1) by FINSEQ_1:def 4;
L281: ( rng ( the_arity_of R4 ) ) c= ( dom (the Sorts of C99) ) by L280 , PARTFUN1:def 2;
L282: ( dom ( (the Sorts of C99) * ( the_arity_of R4 ) ) ) = ( dom ( the_arity_of R4 ) ) by L281 , RELAT_1:27;
let C105 being set;
assume L283: C105 in ( dom ( the_arity_of R4 ) );
reconsider D40 = C105 as Nat by L283;
set D41 = ( C103 ** C102 );
set D42 = ( ( the_arity_of R4 ) /. D40 );
L284: ( ( D41 # C104 ) . D40 ) = ( ( D41 . D42 ) . ( C104 . D40 ) ) by L277 , L283 , L251;
L285: D42 = ( ( the_arity_of R4 ) . D40 ) by L283 , PARTFUN1:def 6;
L286: ( ( (the Sorts of C99) * ( the_arity_of R4 ) ) . D40 ) = ( (the Sorts of C99) . D42 ) by L285 , L283 , L282 , FUNCT_1:12;
L287: ( D41 . D42 ) = ( ( C103 . D42 ) * ( C102 . D42 ) ) by L38;
L288: ( dom ( C102 . D42 ) ) = ( (the Sorts of C99) . D42 ) by FUNCT_2:def 1;
L289: ( dom ( ( C103 . D42 ) * ( C102 . D42 ) ) ) = ( dom ( C102 . D42 ) ) by L288 , FUNCT_2:def 1;
thus L290: ( ( D41 # C104 ) . C105 ) = ( ( C103 . D42 ) . ( ( C102 . D42 ) . ( C104 . D40 ) ) ) by L289 , L283 , L284 , L282 , L288 , L286 , L287 , L118 , FUNCT_1:12
.= ( ( C103 . D42 ) . ( ( C102 # C104 ) . D40 ) ) by L277 , L283 , L251
.= ( ( C103 # ( C102 # C104 ) ) . C105 ) by L278 , L283 , L251;
end;
L291: (( dom ( ( C103 ** C102 ) # C104 ) ) = ( dom ( the_arity_of R4 ) ) & ( dom ( C103 # ( C102 # C104 ) ) ) = ( dom ( the_arity_of R4 ) )) by L118;
thus L292: thesis by L291 , L279 , FUNCT_1:2;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C106 , C107 being MSAlgebra over R1;
let C108 being (ManySortedFunction of C106 , C107);
pred C108 is_homomorphism C106 , C107
means
:L293: (for B63 being (OperSymbol of R1) holds (( Args (B63 , C106) ) <> ( {} ) implies (for B64 being (Element of ( Args (B63 , C106) )) holds ( ( C108 . ( the_result_sort_of B63 ) ) . ( ( Den (B63 , C106) ) . B64 ) ) = ( ( Den (B63 , C107) ) . ( C108 # B64 ) ))))
;end;
theorem
L295: (for R1 being non  void non  empty ManySortedSign holds (for B65 being MSAlgebra over R1 holds ( id (the Sorts of B65) ) is_homomorphism B65 , B65))
proof
let R1 being non  void non  empty ManySortedSign;
let C109 being MSAlgebra over R1;
set D43 = ( id (the Sorts of C109) );
let C110 being (OperSymbol of R1);
assume L296: ( Args (C110 , C109) ) <> ( {} );
let C111 being (Element of ( Args (C110 , C109) ));
L297: ( D43 # C111 ) = C111 by L296 , L253;
set D44 = ( the_result_sort_of C110 );
L298: ( D43 . D44 ) = ( id ( (the Sorts of C109) . D44 ) ) by L3;
L299: ( rng (the ResultSort of R1) ) c= (the carrier of R1) by RELAT_1:def 19;
L300: ( rng (the ResultSort of R1) ) c= ( dom (the Sorts of C109) ) by L299 , PARTFUN1:def 2;
L301: (( Result (C110 , C109) ) = ( ( (the Sorts of C109) * (the ResultSort of R1) ) . C110 ) & ( dom ( (the Sorts of C109) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) )) by L300 , MSUALG_1:def 5 , RELAT_1:27;
L302: C110 in (the carrier' of R1);
L303: C110 in ( dom (the ResultSort of R1) ) by L302 , FUNCT_2:def 1;
L304: ( Result (C110 , C109) ) = ( (the Sorts of C109) . ( (the ResultSort of R1) . C110 ) ) by L303 , L301 , FUNCT_1:12
.= ( (the Sorts of C109) . D44 ) by MSUALG_1:def 2;
per cases ;
suppose L305: ( Result (C110 , C109) ) <> ( {} );

L306: ( dom ( Den (C110 , C109) ) ) = ( Args (C110 , C109) ) by L305 , FUNCT_2:def 1;
L307: (( rng ( Den (C110 , C109) ) ) c= ( Result (C110 , C109) ) & ( ( Den (C110 , C109) ) . C111 ) in ( rng ( Den (C110 , C109) ) )) by L306 , L296 , FUNCT_1:def 3 , RELAT_1:def 19;
thus L308: thesis by L307 , L297 , L298 , L304 , FUNCT_1:18;
end;
suppose L309: ( Result (C110 , C109) ) = ( {} );

L310: ( dom ( Den (C110 , C109) ) ) = ( {} ) by L309;
L311: ( ( Den (C110 , C109) ) . C111 ) = ( {} ) by L310 , FUNCT_1:def 2;
L312: ( dom ( D43 . D44 ) ) = ( {} ) by L304 , L309;
L313: ( ( D43 . D44 ) . ( {} ) ) = ( {} ) by L312 , FUNCT_1:def 2;
thus L314: thesis by L313 , L296 , L311 , L253;
end;
end;
theorem
L316: (for R1 being non  void non  empty ManySortedSign holds (for B66 , B67 , B68 being  non-empty MSAlgebra over R1 holds (for B69 being (ManySortedFunction of B66 , B67) holds (for B70 being (ManySortedFunction of B67 , B68) holds ((B69 is_homomorphism B66 , B67 & B70 is_homomorphism B67 , B68) implies ( B70 ** B69 ) is_homomorphism B66 , B68)))))
proof
let R1 being non  void non  empty ManySortedSign;
let C112 , C113 , C114 being  non-empty MSAlgebra over R1;
let C115 being (ManySortedFunction of C112 , C113);
let C116 being (ManySortedFunction of C113 , C114);
assume that
L317: C115 is_homomorphism C112 , C113
and
L318: C116 is_homomorphism C113 , C114;
let C117 being (OperSymbol of R1);
assume that
L319: ( Args (C117 , C112) ) <> ( {} );
let C118 being (Element of ( Args (C117 , C112) ));
set D45 = ( C116 ** C115 );
set D46 = ( the_result_sort_of C117 );
L320: ( ( C115 . D46 ) . ( ( Den (C117 , C112) ) . C118 ) ) = ( ( Den (C117 , C113) ) . ( C115 # C118 ) ) by L317 , L293;
L321: ( ( C116 . D46 ) . ( ( C115 . D46 ) . ( ( Den (C117 , C112) ) . C118 ) ) ) = ( ( Den (C117 , C114) ) . ( C116 # ( C115 # C118 ) ) ) by L320 , L318 , L293;
L322: (( D45 . D46 ) = ( ( C116 . D46 ) * ( C115 . D46 ) ) & ( dom ( D45 . D46 ) ) = ( (the Sorts of C112) . D46 )) by L38 , FUNCT_2:def 1;
L323: ( rng (the ResultSort of R1) ) c= (the carrier of R1) by RELAT_1:def 19;
L324: ( rng (the ResultSort of R1) ) c= ( dom (the Sorts of C112) ) by L323 , PARTFUN1:def 2;
L325: (( Result (C117 , C112) ) = ( ( (the Sorts of C112) * (the ResultSort of R1) ) . C117 ) & ( dom ( (the Sorts of C112) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) )) by L324 , MSUALG_1:def 5 , RELAT_1:27;
L326: C117 in (the carrier' of R1);
L327: C117 in ( dom (the ResultSort of R1) ) by L326 , FUNCT_2:def 1;
L328: ( Result (C117 , C112) ) = ( (the Sorts of C112) . ( (the ResultSort of R1) . C117 ) ) by L327 , L325 , FUNCT_1:12
.= ( (the Sorts of C112) . D46 ) by MSUALG_1:def 2;
L329: ( ( D45 . D46 ) . ( ( Den (C117 , C112) ) . C118 ) ) = ( ( Den (C117 , C114) ) . ( C116 # ( C115 # C118 ) ) ) by L328 , L321 , L322 , FUNCT_1:12;
thus L330: ( ( D45 . D46 ) . ( ( Den (C117 , C112) ) . C118 ) ) = ( ( Den (C117 , C114) ) . ( D45 # C118 ) ) by L329 , L276;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C119 , C120 being MSAlgebra over R1;
let C121 being (ManySortedFunction of C119 , C120);
pred C121 is_epimorphism C119 , C120
means
:L331: (C121 is_homomorphism C119 , C120 & C121 is  "onto")
;end;
theorem
L333: (for R1 being non  void non  empty ManySortedSign holds (for B71 , B72 , B73 being  non-empty MSAlgebra over R1 holds (for B74 being (ManySortedFunction of B71 , B72) holds (for B75 being (ManySortedFunction of B72 , B73) holds ((B74 is_epimorphism B71 , B72 & B75 is_epimorphism B72 , B73) implies ( B75 ** B74 ) is_epimorphism B71 , B73)))))
proof
let R1 being non  void non  empty ManySortedSign;
let C122 , C123 , C124 being  non-empty MSAlgebra over R1;
let C125 being (ManySortedFunction of C122 , C123);
let C126 being (ManySortedFunction of C123 , C124);
assume that
L334: C125 is_epimorphism C122 , C123
and
L335: C126 is_epimorphism C123 , C124;
L336: C126 is  "onto" by L335 , L331;
L337: C125 is  "onto" by L334 , L331;
L338: (for B76 being set holds (B76 in (the carrier of R1) implies ( rng ( ( C126 ** C125 ) . B76 ) ) = ( (the Sorts of C124) . B76 )))
proof
let C127 being set;
assume L339: C127 in (the carrier of R1);
reconsider D47 = ( C125 . C127 ) as (Function of ( (the Sorts of C122) . C127 ) , ( (the Sorts of C123) . C127 )) by L339 , PBOOLE:def 15;
reconsider D48 = ( C126 . C127 ) as (Function of ( (the Sorts of C123) . C127 ) , ( (the Sorts of C124) . C127 )) by L339 , PBOOLE:def 15;
L340: ( rng D47 ) = ( (the Sorts of C123) . C127 ) by L337 , L339 , L36;
L341: ( dom D48 ) = ( rng D47 ) by L340 , L339 , FUNCT_2:def 1;
L342: ( rng D48 ) = ( (the Sorts of C124) . C127 ) by L336 , L339 , L36;
L343: ( rng ( D48 * D47 ) ) = ( (the Sorts of C124) . C127 ) by L342 , L341 , RELAT_1:28;
thus L344: thesis by L343 , L339 , L38;
end;
L345: ( C126 ** C125 ) is  "onto" by L338 , L36;
L346: (C125 is_homomorphism C122 , C123 & C126 is_homomorphism C123 , C124) by L334 , L335 , L331;
L347: ( C126 ** C125 ) is_homomorphism C122 , C124 by L346 , L316;
thus L348: thesis by L347 , L345 , L331;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C128 , C129 being MSAlgebra over R1;
let C130 being (ManySortedFunction of C128 , C129);
pred C130 is_monomorphism C128 , C129
means
:L349: (C130 is_homomorphism C128 , C129 & C130 is  "1-1")
;end;
theorem
L351: (for R1 being non  void non  empty ManySortedSign holds (for B77 , B78 , B79 being  non-empty MSAlgebra over R1 holds (for B80 being (ManySortedFunction of B77 , B78) holds (for B81 being (ManySortedFunction of B78 , B79) holds ((B80 is_monomorphism B77 , B78 & B81 is_monomorphism B78 , B79) implies ( B81 ** B80 ) is_monomorphism B77 , B79)))))
proof
let R1 being non  void non  empty ManySortedSign;
let C131 , C132 , C133 being  non-empty MSAlgebra over R1;
let C134 being (ManySortedFunction of C131 , C132);
let C135 being (ManySortedFunction of C132 , C133);
assume that
L352: C134 is_monomorphism C131 , C132
and
L353: C135 is_monomorphism C132 , C133;
L354: C135 is  "1-1" by L353 , L349;
L355: C134 is  "1-1" by L352 , L349;
L356: (for B82 being set holds (for B83 being Function holds ((B82 in ( dom ( C135 ** C134 ) ) & ( ( C135 ** C134 ) . B82 ) = B83) implies B83 is  one-to-one)))
proof
let C136 being set;
let C137 being Function;
assume that
L357: C136 in ( dom ( C135 ** C134 ) )
and
L358: ( ( C135 ** C134 ) . C136 ) = C137;
L359: C136 in (the carrier of R1) by L357 , PARTFUN1:def 2;
reconsider D49 = ( C135 . C136 ) as (Function of ( (the Sorts of C132) . C136 ) , ( (the Sorts of C133) . C136 )) by L359 , PBOOLE:def 15;
reconsider D50 = ( C134 . C136 ) as (Function of ( (the Sorts of C131) . C136 ) , ( (the Sorts of C132) . C136 )) by L359 , PBOOLE:def 15;
L360: C136 in ( dom C135 ) by L359 , PARTFUN1:def 2;
L361: D49 is  one-to-one by L360 , L354 , L23;
L362: C136 in ( dom C134 ) by L359 , PARTFUN1:def 2;
L363: D50 is  one-to-one by L362 , L355 , L23;
L364: ( D49 * D50 ) is  one-to-one by L363 , L361;
thus L365: thesis by L364 , L358 , L359 , L38;
end;
L366: ( C135 ** C134 ) is  "1-1" by L356 , L23;
L367: (C134 is_homomorphism C131 , C132 & C135 is_homomorphism C132 , C133) by L352 , L353 , L349;
L368: ( C135 ** C134 ) is_homomorphism C131 , C133 by L367 , L316;
thus L369: thesis by L368 , L366 , L349;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C138 , C139 being MSAlgebra over R1;
let C140 being (ManySortedFunction of C138 , C139);
pred C140 is_isomorphism C138 , C139
means
:L370: (C140 is_epimorphism C138 , C139 & C140 is_monomorphism C138 , C139)
;end;
theorem
L372: (for R1 being non  void non  empty ManySortedSign holds (for R2 being MSAlgebra over R1 holds (for R3 being MSAlgebra over R1 holds (for B84 being (ManySortedFunction of R2 , R3) holds (B84 is_isomorphism R2 , R3 iff (B84 is_homomorphism R2 , R3 & B84 is  "onto" & B84 is  "1-1"))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being MSAlgebra over R1;
let R3 being MSAlgebra over R1;
let C141 being (ManySortedFunction of R2 , R3);
thus L373: (C141 is_isomorphism R2 , R3 implies (C141 is_homomorphism R2 , R3 & C141 is  "onto" & C141 is  "1-1"))
proof
assume L374: C141 is_isomorphism R2 , R3;
L375: (C141 is_epimorphism R2 , R3 & C141 is_monomorphism R2 , R3) by L374 , L370;
thus L376: thesis by L375 , L331 , L349;
end;

assume L377: (C141 is_homomorphism R2 , R3 & C141 is  "onto" & C141 is  "1-1");
L378: (C141 is_epimorphism R2 , R3 & C141 is_monomorphism R2 , R3) by L377 , L331 , L349;
thus L379: thesis by L378 , L370;
end;
L380: (for R1 being non  void non  empty ManySortedSign holds (for B85 , B86 being  non-empty MSAlgebra over R1 holds (for B87 being (ManySortedFunction of B85 , B86) holds (B87 is_isomorphism B85 , B86 implies ( B87 "" ) is_homomorphism B86 , B85))))
proof
let R1 being non  void non  empty ManySortedSign;
let C142 , C143 being  non-empty MSAlgebra over R1;
let C144 being (ManySortedFunction of C142 , C143);
set D51 = ( C144 "" );
assume L381: C144 is_isomorphism C142 , C143;
L382: C144 is  "onto" by L381 , L372;
L383: C144 is  "1-1" by L381 , L372;
L384: C144 is_homomorphism C142 , C143 by L381 , L372;
L385: (for B88 being (OperSymbol of R1) holds (( Args (B88 , C143) ) <> ( {} ) implies (for B89 being (Element of ( Args (B88 , C143) )) holds ( ( D51 . ( the_result_sort_of B88 ) ) . ( ( Den (B88 , C143) ) . B89 ) ) = ( ( Den (B88 , C142) ) . ( D51 # B89 ) ))))
proof
let C145 being (OperSymbol of R1);
assume that
L386: ( Args (C145 , C143) ) <> ( {} );
let C146 being (Element of ( Args (C145 , C143) ));
set D52 = ( the_result_sort_of C145 );
deffunc H2(set) = ( ( D51 # C146 ) . $1 );
consider C147 being Function such that L387: (( dom C147 ) = ( dom ( the_arity_of C145 ) ) & (for B90 being set holds (B90 in ( dom ( the_arity_of C145 ) ) implies ( C147 . B90 ) = H2(B90)))) from FUNCT_1:sch 3;
L388: ( dom ( D51 # C146 ) ) = ( dom ( the_arity_of C145 ) ) by L118;
L389: C147 = ( D51 # C146 ) by L388 , L387 , FUNCT_1:2;
L390: D52 in (the carrier of R1);
L391: D52 in ( dom C144 ) by L390 , PARTFUN1:def 2;
L392: ( C144 . D52 ) is  one-to-one by L391 , L383 , L23;
L393: (( dom ( C144 . D52 ) ) = ( (the Sorts of C142) . D52 ) & ( D51 . D52 ) = ( ( C144 . D52 ) " )) by L382 , L383 , L72 , FUNCT_2:def 1;
L394: ( ( D51 . D52 ) * ( C144 . D52 ) ) = ( id ( (the Sorts of C142) . D52 ) ) by L393 , L392 , FUNCT_1:39;
L395: ( dom (the ResultSort of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L396: ( dom ( (the Sorts of C142) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) ) by L395 , PARTFUN1:def 2;
L397: ( Result (C145 , C142) ) = ( ( (the Sorts of C142) * (the ResultSort of R1) ) . C145 ) by MSUALG_1:def 5
.= ( (the Sorts of C142) . ( (the ResultSort of R1) . C145 ) ) by L395 , L396 , FUNCT_1:12
.= ( (the Sorts of C142) . D52 ) by MSUALG_1:def 2;
reconsider D53 = C147 as (Element of ( Args (C145 , C142) )) by L387 , L388 , FUNCT_1:2;
L398: ( dom ( ( D51 . D52 ) * ( C144 . D52 ) ) ) = ( (the Sorts of C142) . D52 ) by FUNCT_2:def 1;
L399: ( ( C144 . D52 ) . ( ( Den (C145 , C142) ) . D53 ) ) = ( ( Den (C145 , C143) ) . ( C144 # ( D51 # C146 ) ) ) by L384 , L389 , L293
.= ( ( Den (C145 , C143) ) . ( ( C144 ** D51 ) # C146 ) ) by L276
.= ( ( Den (C145 , C143) ) . ( ( id (the Sorts of C143) ) # C146 ) ) by L382 , L383 , L96
.= ( ( Den (C145 , C143) ) . C146 ) by L253;
L400: ( ( D51 . D52 ) . ( ( Den (C145 , C143) ) . C146 ) ) = ( ( ( D51 . D52 ) * ( C144 . D52 ) ) . ( ( Den (C145 , C142) ) . ( D51 # C146 ) ) ) by L399 , L389 , L398 , L397 , FUNCT_1:12
.= ( ( Den (C145 , C142) ) . ( D51 # C146 ) ) by L397 , L394 , FUNCT_1:18;
thus L401: thesis by L400;
end;
thus L402: thesis by L385 , L293;
end;
theorem
L403: (for R1 being non  void non  empty ManySortedSign holds (for B91 , B92 being  non-empty MSAlgebra over R1 holds (for B93 being (ManySortedFunction of B91 , B92) holds (for B94 being (ManySortedFunction of B92 , B91) holds ((B93 is_isomorphism B91 , B92 & B94 = ( B93 "" )) implies B94 is_isomorphism B92 , B91)))))
proof
let R1 being non  void non  empty ManySortedSign;
let C148 , C149 being  non-empty MSAlgebra over R1;
let C150 being (ManySortedFunction of C148 , C149);
let C151 being (ManySortedFunction of C149 , C148);
assume that
L404: C150 is_isomorphism C148 , C149
and
L405: C151 = ( C150 "" );
L406: C151 is_homomorphism C149 , C148 by L404 , L405 , L380;
L407: C150 is_monomorphism C148 , C149 by L404 , L370;
L408: C150 is  "1-1" by L407 , L349;
L409: C150 is_epimorphism C148 , C149 by L404 , L370;
L410: C150 is  "onto" by L409 , L331;
L411: (for B95 being set holds (for B96 being Function holds ((B95 in ( dom C151 ) & B96 = ( C151 . B95 )) implies B96 is  one-to-one)))
proof
let C152 being set;
let C153 being Function;
assume that
L412: C152 in ( dom C151 )
and
L413: C153 = ( C151 . C152 );
L414: C152 in (the carrier of R1) by L412 , PARTFUN1:def 2;
reconsider D54 = ( C150 . C152 ) as (Function of ( (the Sorts of C148) . C152 ) , ( (the Sorts of C149) . C152 )) by L414 , PBOOLE:def 15;
L415: C152 in ( dom C150 ) by L414 , PARTFUN1:def 2;
L416: D54 is  one-to-one by L415 , L408 , L23;
L417: ( D54 " ) is  one-to-one by L416;
thus L418: thesis by L417 , L405 , L408 , L410 , L413 , L414 , L72;
end;
L419: C151 is  "1-1" by L411 , L23;
L420: C151 is_monomorphism C149 , C148 by L419 , L406 , L349;
L421: (for B97 being set holds (B97 in (the carrier of R1) implies ( rng ( C151 . B97 ) ) = ( (the Sorts of C148) . B97 )))
proof
let C154 being set;
assume L422: C154 in (the carrier of R1);
reconsider D55 = ( C150 . C154 ) as (Function of ( (the Sorts of C148) . C154 ) , ( (the Sorts of C149) . C154 )) by L422 , PBOOLE:def 15;
L423: C154 in ( dom C150 ) by L422 , PARTFUN1:def 2;
L424: D55 is  one-to-one by L423 , L408 , L23;
L425: ( rng ( D55 " ) ) = ( dom D55 ) by L424 , FUNCT_1:33;
L426: ( rng ( D55 " ) ) = ( (the Sorts of C148) . C154 ) by L425 , L422 , FUNCT_2:def 1;
thus L427: thesis by L426 , L405 , L408 , L410 , L422 , L72;
end;
L428: C151 is  "onto" by L421 , L36;
L429: C151 is_epimorphism C149 , C148 by L428 , L406 , L331;
thus L430: thesis by L429 , L420 , L370;
end;
theorem
L431: (for R1 being non  void non  empty ManySortedSign holds (for B98 , B99 , B100 being  non-empty MSAlgebra over R1 holds (for B101 being (ManySortedFunction of B98 , B99) holds (for B102 being (ManySortedFunction of B99 , B100) holds ((B101 is_isomorphism B98 , B99 & B102 is_isomorphism B99 , B100) implies ( B102 ** B101 ) is_isomorphism B98 , B100)))))
proof
let R1 being non  void non  empty ManySortedSign;
let C155 , C156 , C157 being  non-empty MSAlgebra over R1;
let C158 being (ManySortedFunction of C155 , C156);
let C159 being (ManySortedFunction of C156 , C157);
assume L432: (C158 is_isomorphism C155 , C156 & C159 is_isomorphism C156 , C157);
L433: (C158 is_epimorphism C155 , C156 & C159 is_epimorphism C156 , C157) by L432 , L370;
L434: ( C159 ** C158 ) is_epimorphism C155 , C157 by L433 , L333;
L435: (C158 is_monomorphism C155 , C156 & C159 is_monomorphism C156 , C157) by L432 , L370;
L436: ( C159 ** C158 ) is_monomorphism C155 , C157 by L435 , L351;
thus L437: thesis by L436 , L434 , L370;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C160 , C161 being MSAlgebra over R1;
pred C160 , C161 are_isomorphic 
means
:L438: (ex B103 being (ManySortedFunction of C160 , C161) st B103 is_isomorphism C160 , C161)
;end;
theorem
L440: (for R1 being non  void non  empty ManySortedSign holds (for B104 being MSAlgebra over R1 holds (( id (the Sorts of B104) ) is_isomorphism B104 , B104 & B104 , B104 are_isomorphic )))
proof
let R1 being non  void non  empty ManySortedSign;
let C162 being MSAlgebra over R1;
L441: ( id (the Sorts of C162) ) is_homomorphism C162 , C162 by L295;
L442: (for B105 being set holds (for B106 being Function holds ((B105 in ( dom ( id (the Sorts of C162) ) ) & ( ( id (the Sorts of C162) ) . B105 ) = B106) implies B106 is  one-to-one)))
proof
let C163 being set;
let C164 being Function;
assume that
L443: C163 in ( dom ( id (the Sorts of C162) ) )
and
L444: ( ( id (the Sorts of C162) ) . C163 ) = C164;
L445: C163 in (the carrier of R1) by L443 , PARTFUN1:def 2;
L446: C164 = ( id ( (the Sorts of C162) . C163 ) ) by L445 , L444 , L3;
thus L447: thesis by L446;
end;
L448: ( id (the Sorts of C162) ) is  "1-1" by L442 , L23;
L449: ( id (the Sorts of C162) ) is_monomorphism C162 , C162 by L448 , L441 , L349;
L450: (for B107 being set holds (B107 in (the carrier of R1) implies ( rng ( ( id (the Sorts of C162) ) . B107 ) ) = ( (the Sorts of C162) . B107 )))
proof
let C165 being set;
assume L451: C165 in (the carrier of R1);
L452: ( ( id (the Sorts of C162) ) . C165 ) = ( id ( (the Sorts of C162) . C165 ) ) by L451 , L3;
thus L453: thesis by L452 , RELAT_1:45;
end;
L454: ( id (the Sorts of C162) ) is  "onto" by L450 , L36;
L455: ( id (the Sorts of C162) ) is_epimorphism C162 , C162 by L454 , L441 , L331;
thus L456: ( id (the Sorts of C162) ) is_isomorphism C162 , C162 by L455 , L449 , L370;
take ( id (the Sorts of C162) );
thus L457: thesis by L449 , L455 , L370;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C166 , C167 being MSAlgebra over R1;
redefine pred C166 , C167 are_isomorphic 
;
reflexivity
 by L440;
end;
theorem
L459: (for R1 being non  void non  empty ManySortedSign holds (for B108 , B109 being  non-empty MSAlgebra over R1 holds (B108 , B109 are_isomorphic  implies B109 , B108 are_isomorphic )))
proof
let R1 being non  void non  empty ManySortedSign;
let C168 , C169 being  non-empty MSAlgebra over R1;
assume L460: C168 , C169 are_isomorphic ;
consider C170 being (ManySortedFunction of C168 , C169) such that L461: C170 is_isomorphism C168 , C169 by L460 , L438;
reconsider D56 = ( C170 "" ) as (ManySortedFunction of C169 , C168);
L462: D56 is_isomorphism C169 , C168 by L461 , L403;
thus L463: thesis by L462 , L438;
end;
theorem
L464: (for R1 being non  void non  empty ManySortedSign holds (for B110 , B111 , B112 being  non-empty MSAlgebra over R1 holds ((B110 , B111 are_isomorphic  & B111 , B112 are_isomorphic ) implies B110 , B112 are_isomorphic )))
proof
let R1 being non  void non  empty ManySortedSign;
let C171 , C172 , C173 being  non-empty MSAlgebra over R1;
assume that
L465: C171 , C172 are_isomorphic 
and
L466: C172 , C173 are_isomorphic ;
consider C174 being (ManySortedFunction of C171 , C172) such that L467: C174 is_isomorphism C171 , C172 by L465 , L438;
consider C175 being (ManySortedFunction of C172 , C173) such that L468: C175 is_isomorphism C172 , C173 by L466 , L438;
reconsider D57 = ( C175 ** C174 ) as (ManySortedFunction of C171 , C173);
L469: D57 is_isomorphism C171 , C173 by L467 , L468 , L431;
thus L470: thesis by L469 , L438;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C176 , C177 being  non-empty MSAlgebra over R1;
let C178 being (ManySortedFunction of C176 , C177);
assume L471: C178 is_homomorphism C176 , C177;
func Image C178 ->  strict  non-empty (MSSubAlgebra of C177) means 
:L472: (the Sorts of it) = ( C178 .:.: (the Sorts of C176) );
existence
proof
set D58 = ( C178 .:.: (the Sorts of C176) );
L473:
now
let C179 being set;
reconsider D59 = ( C178 . C179 ) as Function;
assume L474: C179 in (the carrier of R1);
L475: ( D58 . C179 ) = ( D59 .: ( (the Sorts of C176) . C179 ) ) by L474 , PBOOLE:def 20;
reconsider D60 = D59 as (Function of ( (the Sorts of C176) . C179 ) , ( (the Sorts of C177) . C179 )) by L474 , PBOOLE:def 15;
L476: ( dom D60 ) = ( (the Sorts of C176) . C179 ) by L474 , FUNCT_2:def 1;
thus L477: ( D58 . C179 ) is non  empty by L476 , L474 , L475 , RELAT_1:119;
end;
L478:
now
let C180 being set;
reconsider D61 = ( C178 . C180 ) as Function;
assume L479: C180 in (the carrier of R1);
L480: ( D58 . C180 ) = ( D61 .: ( (the Sorts of C176) . C180 ) ) by L479 , PBOOLE:def 20;
reconsider D62 = D61 as (Function of ( (the Sorts of C176) . C180 ) , ( (the Sorts of C177) . C180 )) by L479 , PBOOLE:def 15;
L481: ( rng D62 ) c= ( (the Sorts of C177) . C180 ) by RELAT_1:def 19;
L482: ( dom D62 ) = ( (the Sorts of C176) . C180 ) by L479 , FUNCT_2:def 1;
thus L483: ( D58 . C180 ) c= ( (the Sorts of C177) . C180 ) by L482 , L480 , L481 , RELAT_1:113;
end;
L484: D58 c= (the Sorts of C177) by L478 , PBOOLE:def 2;
reconsider D63 = D58 as  non-empty (MSSubset of C177) by L484 , L473 , PBOOLE:def 13 , PBOOLE:def 18;
set D64 = ( GenMSAlg D63 );
reconsider D65 = MSAlgebra (# D63 , (( Opers (C177 , D63) ) qua (ManySortedFunction of ( ( D63 # ) * (the Arity of R1) ) , ( D63 * (the ResultSort of R1) ))) #) as  non-empty MSAlgebra over R1 by MSUALG_1:def 3;
take D64;
L485: D63 is  opers_closed
proof
let C181 being (OperSymbol of R1);
thus L486: ( rng ( ( Den (C181 , C177) ) | ( ( ( D63 # ) * (the Arity of R1) ) . C181 ) ) ) c= ( ( D63 * (the ResultSort of R1) ) . C181 )
proof
let C182 being set;
set D66 = ( Den (C181 , C177) );
set D67 = ( ( ( D63 # ) * (the Arity of R1) ) . C181 );
set D68 = ( the_arity_of C181 );
set D69 = ( the_result_sort_of C181 );
set D70 = ( D63 * D68 );
set D71 = (the Sorts of C176);
L487: ( rng D68 ) c= (the carrier of R1) by FINSEQ_1:def 4;
L488: ( dom (the Arity of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L489: ( dom ( ( D63 # ) * (the Arity of R1) ) ) = ( dom (the Arity of R1) ) by L488 , PARTFUN1:def 2;
L490: D67 = ( ( D63 # ) . ( (the Arity of R1) . C181 ) ) by L489 , L488 , FUNCT_1:12
.= ( ( D63 # ) . D68 ) by MSUALG_1:def 1
.= ( product ( D63 * D68 ) ) by FINSEQ_2:def 5;
assume L491: C182 in ( rng ( D66 | D67 ) );
consider C183 being set such that L492: C183 in ( dom ( D66 | D67 ) ) and L493: C182 = ( ( D66 | D67 ) . C183 ) by L491 , FUNCT_1:def 3;
L494: C182 = ( D66 . C183 ) by L492 , L493 , FUNCT_1:47;
L495: ( dom ( D66 | D67 ) ) c= ( dom D66 ) by RELAT_1:60;
reconsider D72 = C183 as (Element of ( Args (C181 , C177) )) by L495 , L492 , FUNCT_2:def 1;
defpred S2[ set , set ] means (for B113 being (SortSymbol of R1) holds (B113 = ( D68 . $1 ) implies ($2 in ( D71 . B113 ) & ( D72 . $1 ) = ( ( C178 . B113 ) . $2 ))));
L496: ( dom ( D66 | D67 ) ) c= D67 by RELAT_1:58;
L497: ( dom D72 ) = ( dom D70 ) by L496 , L492 , L490 , CARD_3:9;
L498: ( dom D63 ) = (the carrier of R1) by PARTFUN1:def 2;
L499: (for B114 being set holds (B114 in ( dom D72 ) implies (ex B115 being set st S2[ B114 , B115 ])))
proof
let C184 being set;
assume L500: C184 in ( dom D72 );
L501: ( D72 . C184 ) in ( D70 . C184 ) by L500 , L492 , L496 , L490 , L497 , CARD_3:9;
L502: ( dom ( D63 * D68 ) ) = ( dom D68 ) by L498 , L487 , RELAT_1:27;
L503: ( D68 . C184 ) in ( rng D68 ) by L502 , L497 , L500 , FUNCT_1:def 3;
reconsider D73 = ( D68 . C184 ) as (SortSymbol of R1) by L503 , L487;
L504: ( dom ( C178 . D73 ) ) = ( D71 . D73 ) by FUNCT_2:def 1;
L505: ( D70 . C184 ) = ( D63 . ( D68 . C184 ) ) by L497 , L500 , FUNCT_1:12
.= ( ( C178 . D73 ) .: ( D71 . D73 ) ) by PBOOLE:def 20
.= ( rng ( C178 . D73 ) ) by L504 , RELAT_1:113;
consider C185 being set such that L506: (C185 in ( D71 . D73 ) & ( D72 . C184 ) = ( ( C178 . D73 ) . C185 )) by L505 , L504 , L501 , FUNCT_1:def 3;
take C185;
thus L507: thesis by L506;
end;
consider C186 being Function such that L508: (( dom C186 ) = ( dom D72 ) & (for B116 being set holds (B116 in ( dom D72 ) implies S2[ B116 , ( C186 . B116 ) ]))) from CLASSES1:sch 1(L499);
L509: ( dom D71 ) = (the carrier of R1) by PARTFUN1:def 2;
L510: ( dom ( D71 * D68 ) ) = ( dom D68 ) by L509 , L487 , RELAT_1:27;
L511: ( dom C186 ) = ( dom D68 ) by L497 , L498 , L487 , L508 , RELAT_1:27;
L512: (for B117 being set holds (B117 in ( dom ( D71 * D68 ) ) implies ( C186 . B117 ) in ( ( D71 * D68 ) . B117 )))
proof
let C187 being set;
assume L513: C187 in ( dom ( D71 * D68 ) );
L514: ( D68 . C187 ) in ( rng D68 ) by L513 , L510 , FUNCT_1:def 3;
reconsider D74 = ( D68 . C187 ) as (SortSymbol of R1) by L514 , L487;
L515: ( C186 . C187 ) in ( D71 . D74 ) by L508 , L511 , L510 , L513;
thus L516: thesis by L515 , L513 , FUNCT_1:12;
end;
L517: ( Args (C181 , C176) ) = ( product ( D71 * D68 ) ) by PRALG_2:3;
reconsider D75 = C186 as (Element of ( Args (C181 , C176) )) by L517 , L511 , L510 , L512 , CARD_3:9;
L518: ( dom D75 ) = ( dom D68 ) by L118;
L519:
now
let C188 being set;
assume L520: C188 in ( dom D68 );
reconsider D76 = C188 as Nat by L520;
L521: ( D68 . C188 ) in ( rng D68 ) by L520 , FUNCT_1:def 3;
reconsider D77 = ( D68 . C188 ) as (SortSymbol of R1) by L521 , L487;
L522: ( ( C178 # D75 ) . D76 ) = ( ( C178 . ( D68 /. D76 ) ) . ( D75 . D76 ) ) by L518 , L520 , L251
.= ( ( C178 . D77 ) . ( D75 . D76 ) ) by L520 , PARTFUN1:def 6;
thus L523: ( ( C178 # D75 ) . C188 ) = ( D72 . C188 ) by L522 , L508 , L518 , L520;
end;
L524: (( dom ( C178 # D75 ) ) = ( dom D68 ) & ( dom D72 ) = ( dom D68 )) by L118;
L525: ( C178 # D75 ) = D72 by L524 , L519 , FUNCT_1:2;
L526: ( ( C178 . D69 ) . ( ( Den (C181 , C176) ) . D75 ) ) = C182 by L525 , L471 , L494 , L293;
reconsider D78 = ( C178 . D69 ) as Function;
L527: ( dom ( C178 . D69 ) ) = ( D71 . D69 ) by FUNCT_2:def 1;
L528: ( dom (the ResultSort of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L529: ( dom ( D71 * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) ) by L528 , PARTFUN1:def 2;
L530: ( Result (C181 , C176) ) = ( ( D71 * (the ResultSort of R1) ) . C181 ) by MSUALG_1:def 5
.= ( D71 . ( (the ResultSort of R1) . C181 ) ) by L528 , L529 , FUNCT_1:12
.= ( D71 . D69 ) by MSUALG_1:def 2;
L531: ( ( Den (C181 , C176) ) . D75 ) in ( D71 . D69 ) by L530;
L532: ( ( Den (C181 , C176) ) . D75 ) in ( dom ( C178 . D69 ) ) by L531 , FUNCT_2:def 1;
L533: ( dom ( D63 * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) ) by L528 , PARTFUN1:def 2;
L534: ( ( D63 * (the ResultSort of R1) ) . C181 ) = ( D63 . ( (the ResultSort of R1) . C181 ) ) by L533 , L528 , FUNCT_1:12
.= ( D63 . D69 ) by MSUALG_1:def 2
.= ( D78 .: ( D71 . D69 ) ) by PBOOLE:def 20
.= ( rng D78 ) by L527 , RELAT_1:113;
thus L535: thesis by L534 , L526 , L532 , FUNCT_1:def 3;
end;

end;
L487: (for B118 being (MSSubset of C177) holds (B118 = (the Sorts of D65) implies (B118 is  opers_closed & (the Charact of D65) = ( Opers (C177 , B118) )))) by L485;
L488: D65 is (MSSubAlgebra of C177) by L487 , MSUALG_2:def 9;
L489: D63 is (MSSubset of D65) by PBOOLE:def 18;
L490: D64 is (MSSubAlgebra of D65) by L489 , L488 , MSUALG_2:def 17;
L491: (the Sorts of D64) is (MSSubset of D65) by L490 , MSUALG_2:def 9;
L492: (the Sorts of D64) c= D63 by L491 , PBOOLE:def 18;
L493: D63 is (MSSubset of D64) by MSUALG_2:def 17;
L494: D63 c= (the Sorts of D64) by L493 , PBOOLE:def 18;
thus L495: thesis by L494 , L492 , PBOOLE:146;
end;
uniqueness by MSUALG_2:9;
end;
theorem
L497: (for R1 being non  void non  empty ManySortedSign holds (for B119 being  non-empty MSAlgebra over R1 holds (for B120 being  non-empty MSAlgebra over R1 holds (for B121 being (ManySortedFunction of B119 , B120) holds (B121 is_homomorphism B119 , B120 implies (B121 is_epimorphism B119 , B120 iff ( Image B121 ) = ( the MSAlgebra of B120 )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let C189 being  non-empty MSAlgebra over R1;
let C190 being  non-empty MSAlgebra over R1;
let C191 being (ManySortedFunction of C189 , C190);
set D79 = ( C191 .:.: (the Sorts of C189) );
assume L498: C191 is_homomorphism C189 , C190;
thus L499: (C191 is_epimorphism C189 , C190 implies ( Image C191 ) = ( the MSAlgebra of C190 ))
proof
assume L500: C191 is_epimorphism C189 , C190;
L501: C191 is  "onto" by L500 , L331;
L502:
now
let C192 being set;
assume L503: C192 in (the carrier of R1);
reconsider D80 = ( C191 . C192 ) as (Function of ( (the Sorts of C189) . C192 ) , ( (the Sorts of C190) . C192 )) by L503 , PBOOLE:def 15;
L504: ( rng D80 ) = ( (the Sorts of C190) . C192 ) by L501 , L503 , L36;
reconsider D81 = D80 as Function;
L505: (( D79 . C192 ) = ( D81 .: ( (the Sorts of C189) . C192 ) ) & ( dom D81 ) = ( (the Sorts of C189) . C192 )) by L503 , FUNCT_2:def 1 , PBOOLE:def 20;
thus L506: ( D79 . C192 ) = ( (the Sorts of C190) . C192 ) by L505 , L504 , RELAT_1:113;
end;
L507: D79 = (the Sorts of C190) by L502 , PBOOLE:3;
L508: ( the MSAlgebra of C190 ) is  strict  strict  strict  strict (MSSubAlgebra of C190) by MSUALG_2:5;
thus L509: thesis by L508 , L498 , L507 , L472;
end;

assume L510: ( Image C191 ) = ( the MSAlgebra of C190 );
L511: D79 = (the Sorts of C190) by L510 , L498 , L472;
L512: (for B122 being set holds (B122 in (the carrier of R1) implies ( rng ( C191 . B122 ) ) = ( (the Sorts of C190) . B122 )))
proof
let C193 being set;
assume L513: C193 in (the carrier of R1);
reconsider D82 = C193 as (Element of R1) by L513;
reconsider D83 = ( C191 . D82 ) as (Function of ( (the Sorts of C189) . D82 ) , ( (the Sorts of C190) . D82 ));
L514: (( D83 .: ( (the Sorts of C189) . D82 ) ) = ( (the Sorts of C190) . D82 ) & ( dom D83 ) = ( (the Sorts of C189) . D82 )) by L511 , FUNCT_2:def 1 , PBOOLE:def 20;
thus L515: thesis by L514 , RELAT_1:113;
end;
L516: C191 is  "onto" by L512 , L36;
thus L517: thesis by L516 , L498 , L331;
end;
L518: (for R1 being non  void non  empty ManySortedSign holds (for B123 , B124 being  non-empty MSAlgebra over R1 holds (for B125 being (ManySortedFunction of B123 , B124) holds (B125 is_homomorphism B123 , B124 implies B125 is (ManySortedFunction of B123 , ( Image B125 ))))))
proof
let R1 being non  void non  empty ManySortedSign;
let C194 , C195 being  non-empty MSAlgebra over R1;
let C196 being (ManySortedFunction of C194 , C195);
assume L519: C196 is_homomorphism C194 , C195;
L520: (for B126 being set holds (B126 in (the carrier of R1) implies ( C196 . B126 ) is (Function of ( (the Sorts of C194) . B126 ) , ( (the Sorts of ( Image C196 )) . B126 ))))
proof
let C197 being set;
assume L521: C197 in (the carrier of R1);
reconsider D84 = ( C196 . C197 ) as (Function of ( (the Sorts of C194) . C197 ) , ( (the Sorts of C195) . C197 )) by L521 , PBOOLE:def 15;
L522: ( dom D84 ) = ( (the Sorts of C194) . C197 ) by L521 , FUNCT_2:def 1;
L523: (the Sorts of ( Image C196 )) = ( C196 .:.: (the Sorts of C194) ) by L519 , L472;
L524: ( (the Sorts of ( Image C196 )) . C197 ) = ( D84 .: ( (the Sorts of C194) . C197 ) ) by L523 , L521 , PBOOLE:def 20
.= ( rng D84 ) by L522 , RELAT_1:113;
thus L525: thesis by L524 , L522 , FUNCT_2:1;
end;
thus L526: thesis by L520 , PBOOLE:def 15;
end;
theorem
L527: (for R1 being non  void non  empty ManySortedSign holds (for B127 , B128 being  non-empty MSAlgebra over R1 holds (for B129 being (ManySortedFunction of B127 , B128) holds (for B130 being (ManySortedFunction of B127 , ( Image B129 )) holds ((B129 = B130 & B129 is_homomorphism B127 , B128) implies B130 is_epimorphism B127 , ( Image B129 ))))))
proof
let R1 being non  void non  empty ManySortedSign;
let C198 , C199 being  non-empty MSAlgebra over R1;
let C200 being (ManySortedFunction of C198 , C199);
let C201 being (ManySortedFunction of C198 , ( Image C200 ));
assume that
L528: C200 = C201
and
L529: C200 is_homomorphism C198 , C199;
L530: (for B131 being (OperSymbol of R1) holds (( Args (B131 , C198) ) <> ( {} ) implies (for B132 being (Element of ( Args (B131 , C198) )) holds ( ( C201 . ( the_result_sort_of B131 ) ) . ( ( Den (B131 , C198) ) . B132 ) ) = ( ( Den (B131 , ( Image C200 )) ) . ( C201 # B132 ) ))))
proof
set D85 = ( Image C200 );
reconsider D86 = (the Sorts of D85) as  non-empty (MSSubset of C199) by MSUALG_2:def 9;
reconsider D87 = C201 as (ManySortedFunction of C198 , C199) by L528;
let C202 being (OperSymbol of R1);
assume that
L531: ( Args (C202 , C198) ) <> ( {} );
let C203 being (Element of ( Args (C202 , C198) ));
set D88 = ( D86 * ( the_arity_of C202 ) );
set D89 = ( (the Sorts of C199) * ( the_arity_of C202 ) );
set D90 = ( the_arity_of C202 );
L532: ( dom ( Den (C202 , C199) ) ) = ( Args (C202 , C199) ) by FUNCT_2:def 1;
L533: ( rng D90 ) c= (the carrier of R1) by FINSEQ_1:def 4;
L534: ( rng D90 ) c= ( dom D86 ) by L533 , PARTFUN1:def 2;
L535: ( dom D88 ) = ( dom D90 ) by L534 , RELAT_1:27;
L536: ( rng D90 ) c= ( dom (the Sorts of C199) ) by L533 , PARTFUN1:def 2;
L537: ( dom D88 ) = ( dom D89 ) by L536 , L535 , RELAT_1:27;
L538: (for B133 being set holds (B133 in ( dom D88 ) implies ( D88 . B133 ) c= ( D89 . B133 )))
proof
let C204 being set;
assume L539: C204 in ( dom D88 );
L540: ( D90 . C204 ) in ( rng D90 ) by L539 , L535 , FUNCT_1:def 3;
reconsider D91 = ( D90 . C204 ) as (Element of R1) by L540 , L533;
set D92 = ( C200 . D91 );
L541: ( dom D92 ) = ( (the Sorts of C198) . D91 ) by FUNCT_2:def 1;
L542: ( rng D92 ) c= ( (the Sorts of C199) . D91 ) by RELAT_1:def 19;
L543: D86 = ( C200 .:.: (the Sorts of C198) ) by L529 , L472;
L544: ( D88 . C204 ) = ( ( C200 .:.: (the Sorts of C198) ) . D91 ) by L543 , L539 , FUNCT_1:12
.= ( D92 .: ( (the Sorts of C198) . D91 ) ) by PBOOLE:def 20
.= ( rng D92 ) by L541 , RELAT_1:113;
thus L545: thesis by L544 , L537 , L539 , L542 , FUNCT_1:12;
end;
L546: ( dom C203 ) = ( dom ( the_arity_of C202 ) ) by L118;
L547:
now
let C205 being set;
assume L548: C205 in ( dom ( the_arity_of C202 ) );
reconsider D93 = C205 as Nat by L548;
L549: ( ( C201 # C203 ) . D93 ) = ( ( C201 . ( ( the_arity_of C202 ) /. D93 ) ) . ( C203 . D93 ) ) by L546 , L548 , L251;
thus L550: ( ( C201 # C203 ) . C205 ) = ( ( D87 # C203 ) . C205 ) by L549 , L546 , L548 , L251;
end;
L551: (( dom ( C201 # C203 ) ) = ( dom ( the_arity_of C202 ) ) & ( dom ( D87 # C203 ) ) = ( dom ( the_arity_of C202 ) )) by L118;
L552: ( C201 # C203 ) = ( D87 # C203 ) by L551 , L547 , FUNCT_1:2;
L553: ( ( C201 . ( the_result_sort_of C202 ) ) . ( ( Den (C202 , C198) ) . C203 ) ) = ( ( Den (C202 , C199) ) . ( C201 # C203 ) ) by L552 , L528 , L529 , L293;
L554: D86 is  opers_closed by MSUALG_2:def 9;
L555: D86 is_closed_on C202 by L554 , MSUALG_2:def 6;
L556: (( Args (C202 , D85) ) = ( product D88 ) & ( Args (C202 , C199) ) = ( product D89 )) by PRALG_2:3;
L557: ( Args (C202 , D85) ) c= ( Args (C202 , C199) ) by L556 , L537 , L538 , CARD_3:27;
L558: ( C201 # C203 ) in ( dom ( Den (C202 , C199) ) ) by L557 , L532 , TARSKI:def 3;
L559: (( ( ( D86 # ) * (the Arity of R1) ) . C202 ) = ( Args (C202 , D85) ) & ( C201 # C203 ) in ( ( dom ( Den (C202 , C199) ) ) /\ ( Args (C202 , D85) ) )) by L558 , MSUALG_1:def 4 , XBOOLE_0:def 4;
L560: (the Charact of D85) = ( Opers (C199 , D86) ) by MSUALG_2:def 9;
L561: ( Den (C202 , D85) ) = ( ( Opers (C199 , D86) ) . C202 ) by L560 , MSUALG_1:def 6
.= ( C202 /. D86 ) by MSUALG_2:def 8
.= ( ( Den (C202 , C199) ) | ( ( ( D86 # ) * (the Arity of R1) ) . C202 ) ) by L555 , MSUALG_2:def 7;
thus L562: thesis by L561 , L553 , L559 , FUNCT_1:48;
end;
L563: C201 is_homomorphism C198 , ( Image C200 ) by L530 , L293;
L564: (for B134 being set holds (B134 in (the carrier of R1) implies ( rng ( C201 . B134 ) ) = ( (the Sorts of ( Image C200 )) . B134 )))
proof
let C206 being set;
assume L565: C206 in (the carrier of R1);
reconsider D94 = C206 as (Element of R1) by L565;
set D95 = ( C201 . D94 );
L566: (the Sorts of ( Image C200 )) = ( C201 .:.: (the Sorts of C198) ) by L528 , L529 , L472;
L567: ( (the Sorts of ( Image C200 )) . D94 ) = ( D95 .: ( (the Sorts of C198) . D94 ) ) by L566 , PBOOLE:def 20;
L568: ( dom D95 ) = ( (the Sorts of C198) . D94 ) by FUNCT_2:def 1;
thus L569: thesis by L568 , L567 , RELAT_1:113;
end;
L570: C201 is  "onto" by L564 , L36;
thus L571: thesis by L570 , L563 , L331;
end;
theorem
L572: (for R1 being non  void non  empty ManySortedSign holds (for B135 , B136 being  non-empty MSAlgebra over R1 holds (for B137 being (ManySortedFunction of B135 , B136) holds (B137 is_homomorphism B135 , B136 implies (ex B138 being (ManySortedFunction of B135 , ( Image B137 )) st (B137 = B138 & B138 is_epimorphism B135 , ( Image B137 )))))))
proof
let R1 being non  void non  empty ManySortedSign;
let C207 , C208 being  non-empty MSAlgebra over R1;
let C209 being (ManySortedFunction of C207 , C208);
assume L573: C209 is_homomorphism C207 , C208;
reconsider D96 = C209 as (ManySortedFunction of C207 , ( Image C209 )) by L573 , L518;
take D96;
thus L574: thesis by L573 , L527;
end;
L575: (for R1 being non  void non  empty ManySortedSign holds (for B139 , B140 being  non-empty MSAlgebra over R1 holds (for B141 being  non-empty (MSSubAlgebra of B140) holds (for B142 being (ManySortedFunction of B139 , B140) holds (for B143 being (ManySortedFunction of B139 , B141) holds ((B142 = B143 & B143 is_homomorphism B139 , B141) implies B142 is_homomorphism B139 , B140))))))
proof
let R1 being non  void non  empty ManySortedSign;
let C210 , C211 being  non-empty MSAlgebra over R1;
let C212 being  non-empty (MSSubAlgebra of C211);
let C213 being (ManySortedFunction of C210 , C211);
let C214 being (ManySortedFunction of C210 , C212);
assume that
L576: C213 = C214
and
L577: C214 is_homomorphism C210 , C212;
L578: (for B144 being (OperSymbol of R1) holds (( Args (B144 , C210) ) <> ( {} ) implies (for B145 being (Element of ( Args (B144 , C210) )) holds ( ( C213 . ( the_result_sort_of B144 ) ) . ( ( Den (B144 , C210) ) . B145 ) ) = ( ( Den (B144 , C211) ) . ( C213 # B145 ) ))))
proof
reconsider D97 = (the Sorts of C212) as  non-empty (MSSubset of C211) by MSUALG_2:def 9;
let C215 being (OperSymbol of R1);
assume that
L579: ( Args (C215 , C210) ) <> ( {} );
let C216 being (Element of ( Args (C215 , C210) ));
L580: (for B146 being set holds (B146 in (the carrier of R1) implies ( C214 . B146 ) is (Function of ( (the Sorts of C210) . B146 ) , ( (the Sorts of C211) . B146 ))))
proof
reconsider D98 = (the Sorts of C212) as  non-empty (MSSubset of C211) by MSUALG_2:def 9;
let C217 being set;
assume L581: C217 in (the carrier of R1);
reconsider D99 = ( C214 . C217 ) as (Function of ( (the Sorts of C210) . C217 ) , ( (the Sorts of C212) . C217 )) by L581 , PBOOLE:def 15;
L582: (the Sorts of C212) is (MSSubset of C211) by MSUALG_2:def 9;
L583: (the Sorts of C212) c= (the Sorts of C211) by L582 , PBOOLE:def 18;
L584: ( D98 . C217 ) c= ( (the Sorts of C211) . C217 ) by L583 , L581 , PBOOLE:def 2;
L585: D99 is (Function of ( (the Sorts of C210) . C217 ) , ( (the Sorts of C211) . C217 )) by L584 , L581 , FUNCT_2:7;
thus L586: thesis by L585;
end;
reconsider D100 = C214 as (ManySortedFunction of C210 , C211) by L580 , PBOOLE:def 15;
L587: D97 is  opers_closed by MSUALG_2:def 9;
L588: D97 is_closed_on C215 by L587 , MSUALG_2:def 6;
L589: (the Charact of C212) = ( Opers (C211 , D97) ) by MSUALG_2:def 9;
L590: ( Den (C215 , C212) ) = ( ( Opers (C211 , D97) ) . C215 ) by L589 , MSUALG_1:def 6
.= ( C215 /. D97 ) by MSUALG_2:def 8
.= ( ( Den (C215 , C211) ) | ( ( ( D97 # ) * (the Arity of R1) ) . C215 ) ) by L588 , MSUALG_2:def 7;
L591: ( dom C216 ) = ( dom ( the_arity_of C215 ) ) by L118;
L592:
now
let C218 being set;
assume L593: C218 in ( dom ( the_arity_of C215 ) );
reconsider D101 = C218 as Nat by L593;
L594: ( ( C214 # C216 ) . D101 ) = ( ( C214 . ( ( the_arity_of C215 ) /. D101 ) ) . ( C216 . D101 ) ) by L591 , L593 , L251;
thus L595: ( ( C214 # C216 ) . C218 ) = ( ( D100 # C216 ) . C218 ) by L594 , L591 , L593 , L251;
end;
L596: (( dom ( C214 # C216 ) ) = ( dom ( the_arity_of C215 ) ) & ( dom ( D100 # C216 ) ) = ( dom ( the_arity_of C215 ) )) by L118;
L597: ( C214 # C216 ) = ( D100 # C216 ) by L596 , L592 , FUNCT_1:2;
L598: ( dom ( Den (C215 , C211) ) ) = ( Args (C215 , C211) ) by FUNCT_2:def 1;
L599: (( ( ( D97 # ) * (the Arity of R1) ) . C215 ) = ( Args (C215 , C212) ) & ( C213 # C216 ) in ( ( dom ( Den (C215 , C211) ) ) /\ ( Args (C215 , C212) ) )) by L598 , L576 , L597 , MSUALG_1:def 4 , XBOOLE_0:def 4;
L600: ( ( C213 . ( the_result_sort_of C215 ) ) . ( ( Den (C215 , C210) ) . C216 ) ) = ( ( Den (C215 , C212) ) . ( C213 # C216 ) ) by L576 , L577 , L597 , L293;
thus L601: thesis by L600 , L590 , L599 , FUNCT_1:48;
end;
thus L602: thesis by L578 , L293;
end;
theorem
L603: (for R1 being non  void non  empty ManySortedSign holds (for B147 being  non-empty MSAlgebra over R1 holds (for B148 being  non-empty (MSSubAlgebra of B147) holds (for B149 being (ManySortedFunction of B148 , B147) holds (B149 = ( id (the Sorts of B148) ) implies B149 is_monomorphism B148 , B147)))))
proof
let R1 being non  void non  empty ManySortedSign;
let C219 being  non-empty MSAlgebra over R1;
let C220 being  non-empty (MSSubAlgebra of C219);
let C221 being (ManySortedFunction of C220 , C219);
set D102 = ( id (the Sorts of C220) );
assume L604: C221 = ( id (the Sorts of C220) );
L605: (for B150 being set holds (B150 in (the carrier of R1) implies ( C221 . B150 ) is  one-to-one))
proof
let C222 being set;
assume L606: C222 in (the carrier of R1);
reconsider D103 = ( D102 . C222 ) as (Function of ( (the Sorts of C220) . C222 ) , ( (the Sorts of C220) . C222 )) by L606 , PBOOLE:def 15;
L607: D103 = ( id ( (the Sorts of C220) . C222 ) ) by L606 , L3;
thus L608: thesis by L607 , L604;
end;
L609: C221 is  "1-1" by L605 , L30;
L610: C221 is_homomorphism C220 , C219 by L604 , L575 , L295;
thus L611: thesis by L610 , L609 , L349;
end;
theorem
L612: (for R1 being non  void non  empty ManySortedSign holds (for B151 , B152 being  non-empty MSAlgebra over R1 holds (for B153 being (ManySortedFunction of B151 , B152) holds (B153 is_homomorphism B151 , B152 implies (ex B154 being (ManySortedFunction of B151 , ( Image B153 )) st (ex B155 being (ManySortedFunction of ( Image B153 ) , B152) st (B154 is_epimorphism B151 , ( Image B153 ) & B155 is_monomorphism ( Image B153 ) , B152 & B153 = ( B155 ** B154 ))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let C223 , C224 being  non-empty MSAlgebra over R1;
let C225 being (ManySortedFunction of C223 , C224);
assume L613: C225 is_homomorphism C223 , C224;
reconsider D104 = C225 as (ManySortedFunction of C223 , ( Image C225 )) by L613 , L518;
L614: (for B156 being (ManySortedFunction of ( Image C225 ) , ( Image C225 )) holds B156 is (ManySortedFunction of ( Image C225 ) , C224))
proof
let C226 being (ManySortedFunction of ( Image C225 ) , ( Image C225 ));
L615: (for B157 being set holds (B157 in (the carrier of R1) implies ( C226 . B157 ) is (Function of ( (the Sorts of ( Image C225 )) . B157 ) , ( (the Sorts of C224) . B157 ))))
proof
let C227 being set;
assume L616: C227 in (the carrier of R1);
reconsider D105 = ( C225 . C227 ) as (Function of ( (the Sorts of C223) . C227 ) , ( (the Sorts of C224) . C227 )) by L616 , PBOOLE:def 15;
L617: ( dom D105 ) = ( (the Sorts of C223) . C227 ) by L616 , FUNCT_2:def 1;
reconsider D106 = ( C226 . C227 ) as (Function of ( (the Sorts of ( Image C225 )) . C227 ) , ( (the Sorts of ( Image C225 )) . C227 )) by L616 , PBOOLE:def 15;
L618: ( rng D105 ) c= ( (the Sorts of C224) . C227 ) by RELAT_1:def 19;
L619: (the Sorts of ( Image C225 )) = ( C225 .:.: (the Sorts of C223) ) by L613 , L472;
L620: ( (the Sorts of ( Image C225 )) . C227 ) = ( D105 .: ( (the Sorts of C223) . C227 ) ) by L619 , L616 , PBOOLE:def 20
.= ( rng D105 ) by L617 , RELAT_1:113;
L621: D106 is (Function of ( (the Sorts of ( Image C225 )) . C227 ) , ( (the Sorts of C224) . C227 )) by L620 , L618 , FUNCT_2:7;
thus L622: thesis by L621;
end;
thus L623: thesis by L615 , PBOOLE:def 15;
end;
reconsider D107 = ( id (the Sorts of ( Image C225 )) ) as (ManySortedFunction of ( Image C225 ) , C224) by L614;
take D104;
take D107;
thus L624: D104 is_epimorphism C223 , ( Image C225 ) by L613 , L527;
thus L625: D107 is_monomorphism ( Image C225 ) , C224 by L603;
thus L626: thesis by L63;
end;
theorem
L627: (for R1 being non  void non  empty ManySortedSign holds (for B158 , B159 being MSAlgebra over R1 holds (for R4 being (OperSymbol of R1) holds (for B160 being (ManySortedFunction of B158 , B159) holds (for B161 being (Element of ( Args (R4 , B158) )) holds (for B162 , B163 being Function holds ((B161 = B162 & B161 in ( Args (R4 , B158) ) & B163 in ( Args (R4 , B159) )) implies (B163 = ( B160 # B161 ) iff (for R5 being Nat holds (R5 in ( dom B162 ) implies ( B163 . R5 ) = ( ( B160 . ( ( the_arity_of R4 ) /. R5 ) ) . ( B162 . R5 ) ))))))))))) by L191;
