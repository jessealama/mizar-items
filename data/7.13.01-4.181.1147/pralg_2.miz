:: Products of Many Sorted Algebras
::  by Beata Madras
::
:: Received April 25, 1994
:: Copyright (c) 1994-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, MSUALG_1, CARD_3, FUNCT_1, SUBSET_1, PBOOLE, RELAT_1,
      FUNCT_6, TARSKI, FUNCOP_1, FINSEQ_4, FUNCT_5, ZFMISC_1, PRALG_1, MCART_1,
      COMPLEX1, STRUCT_0, MARGREL1, RLVECT_2, FUNCT_2, PRALG_2, PARTFUN1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, RELAT_1, FUNCT_1, PARTFUN1,
      FUNCT_2, BINOP_1, XTUPLE_0, MCART_1, STRUCT_0, FUNCOP_1, FINSEQ_2,
      FUNCT_5, FUNCT_6, CARD_3, PBOOLE, PRALG_1, MSUALG_1;
 constructors BINOP_1, FUNCT_6, PRALG_1, MSUALG_1, RELSET_1, FUNCT_5, XTUPLE_0,
      SETFAM_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, FUNCOP_1, CARD_3, PBOOLE, STRUCT_0,
      MSUALG_1, RELSET_1, FINSEQ_2, FINSEQ_1, XTUPLE_0;
 requirements BOOLE, SUBSET;
 definitions TARSKI, PBOOLE, FUNCOP_1, XBOOLE_0, BINOP_1, FUNCT_6, FUNCT_2,
      XTUPLE_0;
 theorems TARSKI, FUNCT_1, FINSEQ_1, PBOOLE, MSUALG_1, ZFMISC_1, CARD_3,
      FUNCT_2, MCART_1, FUNCOP_1, FUNCT_6, FUNCT_5, RELAT_1, PRALG_1, XBOOLE_0,
      XBOOLE_1, PARTFUN1, FINSEQ_2;
 schemes FUNCT_1, FUNCT_2, CLASSES1, TARSKI, PBOOLE;

begin
registration
let C1 being  with_common_domain  functional non  empty set;
cluster  -> ( DOM C1 ) -defined for (Element of C1);
coherence
proof
let C2 being (Element of C1);
L1: ( DOM C1 ) = ( dom C2 ) by CARD_3:108;
thus L2: thesis by L1 , RELAT_1:def 18;
end;
end;
registration
let C3 being  with_common_domain  functional non  empty set;
cluster  ->  total for (Element of C3);
coherence
proof
let C4 being (Element of C3);
L4: ( DOM C3 ) = ( dom C4 ) by CARD_3:108;
thus L5: thesis by L4 , PARTFUN1:def 2;
end;
end;
begin
definition
let C5 being Function;
func Commute C5 -> Function means 
:L7: ((for R5 being set holds (R5 in ( dom it ) iff (ex B1 being Function st (B1 in ( dom C5 ) & R5 = ( commute B1 ))))) & (for B2 being Function holds (B2 in ( dom it ) implies ( it . B2 ) = ( C5 . ( commute B2 ) ))));
existence
proof
defpred S1[ set , set ] means (ex B3 being Function st ($1 = B3 & $2 = ( commute B3 )));
L8: (for B4 , B5 , B6 being set holds ((S1[ B4 , B5 ] & S1[ B4 , B6 ]) implies B5 = B6));
consider C6 being set such that L9: (for R5 being set holds (R5 in C6 iff (ex B7 being set st (B7 in ( dom C5 ) & S1[ B7 , R5 ])))) from TARSKI:sch 1(L8);
defpred S2[ set , set ] means (for B8 being Function holds ($1 = B8 implies $2 = ( C5 . ( commute B8 ) )));
L10:
now
let R5 being set;
assume L11: R5 in C6;
L12: (ex B9 being set st (B9 in ( dom C5 ) & (ex B10 being Function st (B9 = B10 & R5 = ( commute B10 ))))) by L11 , L9;
reconsider D1 = R5 as Function by L12;
take D2 = ( C5 . ( commute D1 ) );
thus L13: S2[ R5 , D2 ];
end;
consider C7 being Function such that L14: ( dom C7 ) = C6 and L15: (for R5 being set holds (R5 in C6 implies S2[ R5 , ( C7 . R5 ) ])) from CLASSES1:sch 1(L10);
take C7;
thus L16:now
let R5 being set;
thus L17:now
assume L18: R5 in ( dom C7 );
consider C8 being set such that L19: C8 in ( dom C5 ) and L20: (ex B11 being Function st (C8 = B11 & R5 = ( commute B11 ))) by L18 , L9 , L14;
reconsider D3 = C8 as Function by L20;
take D4 = D3;
thus L21: (D4 in ( dom C5 ) & R5 = ( commute D4 )) by L19 , L20;
end;
thus L22: ((ex B12 being Function st (B12 in ( dom C5 ) & R5 = ( commute B12 ))) implies R5 in ( dom C7 )) by L9 , L14;
end;
thus L23: thesis by L14 , L15;
end;
uniqueness
proof
let C9 , C10 being Function;
assume that
L24: (for R5 being set holds (R5 in ( dom C9 ) iff (ex B13 being Function st (B13 in ( dom C5 ) & R5 = ( commute B13 )))))
and
L25: (for B14 being Function holds (B14 in ( dom C9 ) implies ( C9 . B14 ) = ( C5 . ( commute B14 ) )))
and
L26: (for R5 being set holds (R5 in ( dom C10 ) iff (ex B15 being Function st (B15 in ( dom C5 ) & R5 = ( commute B15 )))))
and
L27: (for B16 being Function holds (B16 in ( dom C10 ) implies ( C10 . B16 ) = ( C5 . ( commute B16 ) )));
L28:
now
let R5 being set;
L29: (R5 in ( dom C9 ) iff (ex B17 being Function st (B17 in ( dom C5 ) & R5 = ( commute B17 )))) by L24;
thus L30: (R5 in ( dom C9 ) iff R5 in ( dom C10 )) by L29 , L26;
end;
L31: ( dom C9 ) = ( dom C10 ) by L28 , TARSKI:1;
L32:
now
let R5 being set;
assume L33: R5 in ( dom C9 );
consider C11 being Function such that L34: C11 in ( dom C5 ) and L35: R5 = ( commute C11 ) by L33 , L26 , L31;
thus L36: ( C9 . R5 ) = ( C5 . ( commute ( commute C11 ) ) ) by L25 , L33 , L35
.= ( C10 . R5 ) by L27 , L31 , L33 , L35;
end;
thus L37: thesis by L32 , L31 , FUNCT_1:2;
end;
end;
theorem
L39: (for B18 being Function holds (( dom B18 ) = { ( {} ) } implies ( Commute B18 ) = B18))
proof
let C12 being Function;
assume L40: ( dom C12 ) = { ( {} ) };
L41: ( dom ( Commute C12 ) ) = { ( {} ) }
proof
thus L42: ( dom ( Commute C12 ) ) c= { ( {} ) }
proof
let R5 being set;
assume L43: R5 in ( dom ( Commute C12 ) );
L44: (ex B19 being Function st (B19 in ( dom C12 ) & R5 = ( commute B19 ))) by L43 , L7;
L45: R5 = ( {} ) by L44 , L40 , FUNCT_6:58 , TARSKI:def 1;
thus L46: thesis by L45 , TARSKI:def 1;
end;

let R5 being set;
assume L47: R5 in { ( {} ) };
L48: R5 = ( {} ) by L47 , TARSKI:def 1;
L49: ( {} ) in ( dom C12 ) by L40 , TARSKI:def 1;
thus L50: thesis by L49 , L48 , L7 , FUNCT_6:58;
end;
L51: (for R5 being set holds (R5 in { ( {} ) } implies ( ( Commute C12 ) . R5 ) = ( C12 . R5 )))
proof
let R5 being set;
assume L52: R5 in { ( {} ) };
L53: R5 = ( {} ) by L52 , TARSKI:def 1;
thus L54: thesis by L53 , L41 , L52 , L7 , FUNCT_6:58;
end;
thus L55: thesis by L51 , L40 , L41 , FUNCT_1:2;
end;
definition
let C13 being  Function-yielding Function;
redefine func Frege C13 -> (ManySortedFunction of ( product ( doms C13 ) )) means 
:L56: (for B20 being Function holds (B20 in ( product ( doms C13 ) ) implies ( it . B20 ) = ( C13 .. B20 )));
coherence
proof
L57: ( dom ( Frege C13 ) ) = ( product ( doms C13 ) ) by FUNCT_6:def 7;
L58: ( Frege C13 ) is  Function-yielding
proof
let C14 being set;
assume L59: C14 in ( dom ( Frege C13 ) );
reconsider D5 = C14 as Function by L59 , L57;
L60: (ex B21 being Function st (( ( Frege C13 ) . D5 ) = B21 & ( dom B21 ) = ( C13 " ( SubFuncs ( rng C13 ) ) ) & (for R5 being set holds (R5 in ( dom B21 ) implies ( B21 . R5 ) = ( ( uncurry C13 ) . (R5 , ( D5 . R5 )) ))))) by L57 , L59 , FUNCT_6:def 7;
thus L61: thesis by L60;
end;
thus L62: thesis by L58 , L57 , PARTFUN1:def 2 , RELAT_1:def 18;
end;
compatibility
proof
let C15 being (ManySortedFunction of ( product ( doms C13 ) ));
L63: (for B22 being set holds (B22 in ( rng C13 ) iff (B22 in ( rng C13 ) & B22 is Function)))
proof
let C16 being set;
L64: (C16 in ( rng C13 ) implies C16 is Function)
proof
assume L65: C16 in ( rng C13 );
L66: (ex B23 being set st (B23 in ( dom C13 ) & C16 = ( C13 . B23 ))) by L65 , FUNCT_1:def 3;
thus L67: thesis by L66;
end;
thus L68: thesis by L64;
end;
L69: ( SubFuncs ( rng C13 ) ) = ( rng C13 ) by L63 , FUNCT_6:def 1;
thus L70: (C15 = ( Frege C13 ) implies (for B24 being Function holds (B24 in ( product ( doms C13 ) ) implies ( C15 . B24 ) = ( C13 .. B24 ))))
proof
assume L71: C15 = ( Frege C13 );
let C17 being Function;
assume L72: C17 in ( product ( doms C13 ) );
consider C18 being Function such that L73: ( C15 . C17 ) = C18 and L74: ( dom C18 ) = ( C13 " ( SubFuncs ( rng C13 ) ) ) and L75: (for R5 being set holds (R5 in ( dom C18 ) implies ( C18 . R5 ) = ( ( uncurry C13 ) . (R5 , ( C17 . R5 )) ))) by L72 , L71 , FUNCT_6:def 7;
L76: ( dom C18 ) = ( dom C13 ) by L69 , L74 , RELAT_1:134;
L77: (for B25 being set holds (B25 in ( dom C13 ) implies ( C18 . B25 ) = ( ( C13 . B25 ) . ( C17 . B25 ) )))
proof
let C19 being set;
assume L78: C19 in ( dom C13 );
L79: C19 in ( dom ( doms C13 ) ) by L78 , L74 , L76 , FUNCT_6:def 2;
L80: ( C17 . C19 ) in ( ( doms C13 ) . C19 ) by L79 , L72 , CARD_3:9;
L81: ( C17 . C19 ) in ( dom ( C13 . C19 ) ) by L80 , L78 , FUNCT_6:22;
thus L82: ( C18 . C19 ) = ( C13 .. (C19 , ( C17 . C19 )) ) by L75 , L76 , L78
.= ( ( C13 . C19 ) . ( C17 . C19 ) ) by L78 , L81 , FUNCT_5:38;
end;
thus L83: thesis by L77 , L73 , L76 , PRALG_1:def 17;
end;

assume L84: (for B26 being Function holds (B26 in ( product ( doms C13 ) ) implies ( C15 . B26 ) = ( C13 .. B26 )));
L85: (for B27 being Function holds (B27 in ( product ( doms C13 ) ) implies (ex B28 being Function st (( C15 . B27 ) = B28 & ( dom B28 ) = ( C13 " ( SubFuncs ( rng C13 ) ) ) & (for B29 being set holds (B29 in ( dom B28 ) implies ( B28 . B29 ) = ( ( uncurry C13 ) . (B29 , ( B27 . B29 )) )))))))
proof
let C20 being Function;
assume that
L86: C20 in ( product ( doms C13 ) );
L87: ( C15 . C20 ) = ( C13 .. C20 ) by L84 , L86;
L88: ( dom ( C15 . C20 ) ) = ( dom C13 ) by L87 , PRALG_1:def 17;
take ( C15 . C20 );
thus L89: ( C15 . C20 ) = ( C15 . C20 );
thus L90: ( dom ( C15 . C20 ) ) = ( C13 " ( SubFuncs ( rng C13 ) ) ) by L69 , L88 , RELAT_1:134;
let C21 being set;
assume L91: C21 in ( dom ( C15 . C20 ) );
L92: C21 in ( dom ( doms C13 ) ) by L91 , L90 , FUNCT_6:def 2;
L93: ( C20 . C21 ) in ( ( doms C13 ) . C21 ) by L92 , L86 , CARD_3:9;
L94: ( C20 . C21 ) in ( dom ( C13 . C21 ) ) by L93 , L88 , L91 , FUNCT_6:22;
thus L95: ( ( C15 . C20 ) . C21 ) = ( ( C13 .. C20 ) . C21 ) by L84 , L86
.= ( ( C13 . C21 ) . ( C20 . C21 ) ) by L88 , L91 , PRALG_1:def 17
.= ( ( uncurry C13 ) . (C21 , ( C20 . C21 )) ) by L88 , L91 , L94 , FUNCT_5:38;
end;
L96: ( dom C15 ) = ( product ( doms C13 ) ) by PARTFUN1:def 2;
thus L97: thesis by L96 , L85 , FUNCT_6:def 7;
end;
end;
registration
let R1 being set;
let C22 , C23 being  non-empty (ManySortedSet of R1);
cluster [| C22 , C23 |] ->  non-empty;
coherence
proof
L99:
now
let R3 being set;
assume L100: R3 in R1;
L101: ( [| C22 , C23 |] . R3 ) = [: ( C22 . R3 ) , ( C23 . R3 ) :] by L100 , PBOOLE:def 16;
thus L102: ( [| C22 , C23 |] . R3 ) is non  empty by L101 , L100 , ZFMISC_1:90;
end;
thus L103: thesis by L99 , PBOOLE:def 13;
end;
end;
theorem
L105: (for B30 being non  empty set holds (for B31 being set holds (for B32 , B33 being (ManySortedSet of B30) holds (for B34 being (Function of B31 , B30) holds ( [| B32 , B33 |] * B34 ) = [| ( B32 * B34 ) , ( B33 * B34 ) |]))))
proof
let C24 being non  empty set;
let C25 being set;
let C26 , C27 being (ManySortedSet of C24);
let C28 being (Function of C25 , C24);
L106: (for R3 being set holds (R3 in C25 implies ( ( [| C26 , C27 |] * C28 ) . R3 ) = ( [| ( C26 * C28 ) , ( C27 * C28 ) |] . R3 )))
proof
L107: ( dom ( C27 * C28 ) ) = C25 by PARTFUN1:def 2;
let R3 being set;
L108: ( dom ( C26 * C28 ) ) = C25 by PARTFUN1:def 2;
assume L109: R3 in C25;
L110: ( C28 . R3 ) in C24 by L109 , FUNCT_2:5;
L111: ( dom ( [| C26 , C27 |] * C28 ) ) = C25 by PARTFUN1:def 2;
thus L112: ( ( [| C26 , C27 |] * C28 ) . R3 ) = ( [| C26 , C27 |] . ( C28 . R3 ) ) by L111 , L109 , FUNCT_1:12
.= [: ( C26 . ( C28 . R3 ) ) , ( C27 . ( C28 . R3 ) ) :] by L110 , PBOOLE:def 16
.= [: ( ( C26 * C28 ) . R3 ) , ( C27 . ( C28 . R3 ) ) :] by L109 , L108 , FUNCT_1:12
.= [: ( ( C26 * C28 ) . R3 ) , ( ( C27 * C28 ) . R3 ) :] by L109 , L107 , FUNCT_1:12
.= ( [| ( C26 * C28 ) , ( C27 * C28 ) |] . R3 ) by L109 , PBOOLE:def 16;
end;
thus L113: thesis by L106 , PBOOLE:3;
end;
definition
let C29 being non  empty set;
let C30 , C31 being  non-empty (ManySortedSet of C29);
let C32 being (Element of ( C29 * ));
let C33 being (Element of C29);
let C34 being (Function of ( ( C30 # ) . C32 ) , ( C30 . C33 ));
let C35 being (Function of ( ( C31 # ) . C32 ) , ( C31 . C33 ));
func [[:C34 , C35 :]] -> (Function of ( ( [| C30 , C31 |] # ) . C32 ) , ( [| C30 , C31 |] . C33 )) means 
(for B35 being Function holds (B35 in ( ( [| C30 , C31 |] # ) . C32 ) implies ( it . B35 ) = [ ( C34 . ( pr1 B35 ) ) , ( C35 . ( pr2 B35 ) ) ]));
existence
proof
defpred S3[ set , set ] means (for B36 being Function holds (B36 = $1 implies $2 = [ ( C34 . ( pr1 B36 ) ) , ( C35 . ( pr2 B36 ) ) ]));
set D6 = ( [| C30 , C31 |] . C33 );
set D7 = ( ( [| C30 , C31 |] # ) . C32 );
L114: D7 = ( product ( [| C30 , C31 |] * C32 ) ) by FINSEQ_2:def 5;
L115: (for B37 being set holds (B37 in D7 implies (ex B38 being set st (B38 in D6 & S3[ B37 , B38 ]))))
proof
let C36 being set;
L116: ( rng C32 ) c= C29 by FINSEQ_1:def 4;
assume L117: C36 in D7;
consider C37 being Function such that L118: C37 = C36 and L119: ( dom C37 ) = ( dom ( [| C30 , C31 |] * C32 ) ) and L120: (for B39 being set holds (B39 in ( dom ( [| C30 , C31 |] * C32 ) ) implies ( C37 . B39 ) in ( ( [| C30 , C31 |] * C32 ) . B39 ))) by L117 , L114 , CARD_3:def 5;
L121: ( dom [| C30 , C31 |] ) = C29 by PARTFUN1:def 2;
L122: ( dom C37 ) = ( dom C32 ) by L121 , L119 , L116 , RELAT_1:27;
L123: ( dom ( pr1 C37 ) ) = ( dom C32 ) by L122 , MCART_1:def 12;
L124: ( dom C30 ) = C29 by PARTFUN1:def 2;
L125: ( dom ( pr1 C37 ) ) = ( dom ( C30 * C32 ) ) by L124 , L116 , L123 , RELAT_1:27;
L126: (for B40 being set holds (B40 in ( dom ( C30 * C32 ) ) implies ( ( pr1 C37 ) . B40 ) in ( ( C30 * C32 ) . B40 )))
proof
let C38 being set;
assume L127: C38 in ( dom ( C30 * C32 ) );
L128: ( dom ( [| C30 , C31 |] * C32 ) ) = ( dom C32 ) by L121 , L116 , RELAT_1:27;
L129: ( ( [| C30 , C31 |] * C32 ) . C38 ) = ( [| C30 , C31 |] . ( C32 . C38 ) ) by L128 , L123 , L125 , L127 , FUNCT_1:12;
L130: (( C37 . C38 ) in ( ( [| C30 , C31 |] * C32 ) . C38 ) & ( C32 . C38 ) in ( rng C32 )) by L119 , L120 , L122 , L123 , L125 , L127 , FUNCT_1:def 3;
L131: ( C37 . C38 ) in [: ( C30 . ( C32 . C38 ) ) , ( C31 . ( C32 . C38 ) ) :] by L130 , L116 , L129 , PBOOLE:def 16;
consider C39 , C40 being set such that L132: C39 in ( C30 . ( C32 . C38 ) ) and L133: C40 in ( C31 . ( C32 . C38 ) ) and L134: ( C37 . C38 ) = [ C39 , C40 ] by L131 , ZFMISC_1:def 2;
L135: ( [ C39 , C40 ] `1 ) = C39;
L136: ( ( pr1 C37 ) . C38 ) = ( ( C37 . C38 ) `1 ) by L122 , L123 , L125 , L127 , MCART_1:def 12
.= C39 by L134 , L135;
thus L137: thesis by L136 , L127 , L132 , FUNCT_1:12;
end;
L138: ( pr1 C37 ) in ( product ( C30 * C32 ) ) by L126 , L125 , CARD_3:9;
L139: ( pr1 C37 ) in ( ( C30 # ) . C32 ) by L138 , FINSEQ_2:def 5;
L140: ( pr1 C37 ) in ( dom C34 ) by L139 , FUNCT_2:def 1;
L141: ( C34 . ( pr1 C37 ) ) in ( rng C34 ) by L140 , FUNCT_1:3;
take D8 = [ ( C34 . ( pr1 C37 ) ) , ( C35 . ( pr2 C37 ) ) ];
L142: (( rng C34 ) c= ( C30 . C33 ) & ( rng C35 ) c= ( C31 . C33 )) by RELAT_1:def 19;
L143: [: ( rng C34 ) , ( rng C35 ) :] c= [: ( C30 . C33 ) , ( C31 . C33 ) :] by L142 , ZFMISC_1:96;
L144: ( dom ( pr2 C37 ) ) = ( dom C32 ) by L122 , MCART_1:def 13;
L145: ( dom C31 ) = C29 by PARTFUN1:def 2;
L146: ( dom ( pr2 C37 ) ) = ( dom ( C31 * C32 ) ) by L145 , L116 , L144 , RELAT_1:27;
L147: (for B41 being set holds (B41 in ( dom ( C31 * C32 ) ) implies ( ( pr2 C37 ) . B41 ) in ( ( C31 * C32 ) . B41 )))
proof
let C41 being set;
assume L148: C41 in ( dom ( C31 * C32 ) );
L149: ( dom ( [| C30 , C31 |] * C32 ) ) = ( dom C32 ) by L121 , L116 , RELAT_1:27;
L150: ( ( [| C30 , C31 |] * C32 ) . C41 ) = ( [| C30 , C31 |] . ( C32 . C41 ) ) by L149 , L144 , L146 , L148 , FUNCT_1:12;
L151: (( C37 . C41 ) in ( ( [| C30 , C31 |] * C32 ) . C41 ) & ( C32 . C41 ) in ( rng C32 )) by L119 , L120 , L122 , L144 , L146 , L148 , FUNCT_1:def 3;
L152: ( C37 . C41 ) in [: ( C30 . ( C32 . C41 ) ) , ( C31 . ( C32 . C41 ) ) :] by L151 , L116 , L150 , PBOOLE:def 16;
consider C42 , C43 being set such that L153: C42 in ( C30 . ( C32 . C41 ) ) and L154: C43 in ( C31 . ( C32 . C41 ) ) and L155: ( C37 . C41 ) = [ C42 , C43 ] by L152 , ZFMISC_1:def 2;
L156: ( [ C42 , C43 ] `2 ) = C43;
L157: ( ( pr2 C37 ) . C41 ) = ( ( C37 . C41 ) `2 ) by L122 , L144 , L146 , L148 , MCART_1:def 13
.= C43 by L155 , L156;
thus L158: thesis by L157 , L148 , L154 , FUNCT_1:12;
end;
L159: ( dom ( pr2 C37 ) ) = ( dom C32 ) by L122 , MCART_1:def 13;
L160: ( dom ( pr2 C37 ) ) = ( dom ( C31 * C32 ) ) by L159 , L145 , L116 , RELAT_1:27;
L161: ( pr2 C37 ) in ( product ( C31 * C32 ) ) by L160 , L147 , CARD_3:9;
L162: ( pr2 C37 ) in ( ( C31 # ) . C32 ) by L161 , FINSEQ_2:def 5;
L163: ( pr2 C37 ) in ( dom C35 ) by L162 , FUNCT_2:def 1;
L164: ( C35 . ( pr2 C37 ) ) in ( rng C35 ) by L163 , FUNCT_1:3;
L165: [ ( C34 . ( pr1 C37 ) ) , ( C35 . ( pr2 C37 ) ) ] in [: ( rng C34 ) , ( rng C35 ) :] by L164 , L141 , ZFMISC_1:87;
L166: [ ( C34 . ( pr1 C37 ) ) , ( C35 . ( pr2 C37 ) ) ] in [: ( C30 . C33 ) , ( C31 . C33 ) :] by L165 , L143;
thus L167: D8 in D6 by L166 , PBOOLE:def 16;
let C44 being Function;
assume L168: C36 = C44;
thus L169: thesis by L168 , L118;
end;
consider C45 being (Function of D7 , D6) such that L170: (for B42 being set holds (B42 in D7 implies S3[ B42 , ( C45 . B42 ) ])) from FUNCT_2:sch 1(L115);
take C45;
thus L171: thesis by L170;
end;
uniqueness
proof
let C46 , C47 being (Function of ( ( [| C30 , C31 |] # ) . C32 ) , ( [| C30 , C31 |] . C33 ));
assume that
L172: (for B43 being Function holds (B43 in ( ( [| C30 , C31 |] # ) . C32 ) implies ( C46 . B43 ) = [ ( C34 . ( pr1 B43 ) ) , ( C35 . ( pr2 B43 ) ) ]))
and
L173: (for B44 being Function holds (B44 in ( ( [| C30 , C31 |] # ) . C32 ) implies ( C47 . B44 ) = [ ( C34 . ( pr1 B44 ) ) , ( C35 . ( pr2 B44 ) ) ]));
let C48 being (Element of ( ( [| C30 , C31 |] # ) . C32 ));
L174: C48 in ( ( [| C30 , C31 |] # ) . C32 );
L175: C48 in ( product ( [| C30 , C31 |] * C32 ) ) by L174 , FINSEQ_2:def 5;
consider C49 being Function such that L176: C49 = C48 and L177: ( dom C49 ) = ( dom ( [| C30 , C31 |] * C32 ) ) and L178: (for B45 being set holds (B45 in ( dom ( [| C30 , C31 |] * C32 ) ) implies ( C49 . B45 ) in ( ( [| C30 , C31 |] * C32 ) . B45 ))) by L175 , CARD_3:def 5;
L179: ( C46 . C49 ) = [ ( C34 . ( pr1 C49 ) ) , ( C35 . ( pr2 C49 ) ) ] by L172 , L176;
thus L180: ( C46 . C48 ) = ( C47 . C48 ) by L179 , L173 , L176;
end;
end;
definition
let C50 being non  empty set;
let R2 being set;
let C51 , C52 being  non-empty (ManySortedSet of C50);
let C53 being (Function of R2 , ( C50 * ));
let C54 being (Function of R2 , C50);
let C55 being (ManySortedFunction of ( ( C51 # ) * C53 ) , ( C51 * C54 ));
let C56 being (ManySortedFunction of ( ( C52 # ) * C53 ) , ( C52 * C54 ));
func [[:C55 , C56 :]] -> (ManySortedFunction of ( ( [| C51 , C52 |] # ) * C53 ) , ( [| C51 , C52 |] * C54 )) means 
(for R4 being set holds (R4 in R2 implies (for B46 being (Element of ( C50 * )) holds (for B47 being (Element of C50) holds ((B46 = ( C53 . R4 ) & B47 = ( C54 . R4 )) implies (for B48 being (Function of ( ( C51 # ) . B46 ) , ( C51 . B47 )) holds (for B49 being (Function of ( ( C52 # ) . B46 ) , ( C52 . B47 )) holds ((B48 = ( C55 . R4 ) & B49 = ( C56 . R4 )) implies ( it . R4 ) = [[: B48 , B49 :]]))))))));
existence
proof
defpred S4[ set , set ] means (for B50 being (Element of ( C50 * )) holds (for B51 being (Element of C50) holds ((B50 = ( C53 . $1 ) & B51 = ( C54 . $1 )) implies (for B52 being (Function of ( ( C51 # ) . B50 ) , ( C51 . B51 )) holds (for B53 being (Function of ( ( C52 # ) . B50 ) , ( C52 . B51 )) holds ((B52 = ( C55 . $1 ) & B53 = ( C56 . $1 )) implies $2 = [[: B52 , B53 :]]))))));
L182: (for R4 being set holds (R4 in R2 implies (ex R3 being set st S4[ R4 , R3 ])))
proof
let R4 being set;
assume L183: R4 in R2;
reconsider D9 = ( C53 . R4 ) as (Element of ( C50 * )) by L183 , FUNCT_2:5;
reconsider D10 = ( C54 . R4 ) as (Element of C50) by L183 , FUNCT_2:5;
L184: R4 in ( dom C54 ) by L183 , FUNCT_2:def 1;
L185: ( C51 . ( C54 . R4 ) ) = ( ( C51 * C54 ) . R4 ) by L184 , FUNCT_1:13;
L186: ( C52 . ( C54 . R4 ) ) = ( ( C52 * C54 ) . R4 ) by L184 , FUNCT_1:13;
L187: R4 in ( dom C53 ) by L183 , FUNCT_2:def 1;
L188: ( ( C51 # ) . ( C53 . R4 ) ) = ( ( ( C51 # ) * C53 ) . R4 ) by L187 , FUNCT_1:13;
reconsider D11 = ( C55 . R4 ) as (Function of ( ( C51 # ) . D9 ) , ( C51 . D10 )) by L188 , L183 , L185 , PBOOLE:def 15;
L189: ( ( C52 # ) . ( C53 . R4 ) ) = ( ( ( C52 # ) * C53 ) . R4 ) by L187 , FUNCT_1:13;
reconsider D12 = ( C56 . R4 ) as (Function of ( ( C52 # ) . D9 ) , ( C52 . D10 )) by L189 , L183 , L186 , PBOOLE:def 15;
take [[: D11 , D12 :]];
thus L190: thesis;
end;
consider C57 being Function such that L191: (( dom C57 ) = R2 & (for R4 being set holds (R4 in R2 implies S4[ R4 , ( C57 . R4 ) ]))) from CLASSES1:sch 1(L182);
reconsider D13 = C57 as (ManySortedSet of R2) by L191 , PARTFUN1:def 2 , RELAT_1:def 18;
L192: (for R4 being set holds (R4 in ( dom D13 ) implies ( D13 . R4 ) is Function))
proof
let R4 being set;
assume L193: R4 in ( dom D13 );
reconsider D14 = ( C53 . R4 ) as (Element of ( C50 * )) by L193 , L191 , FUNCT_2:5;
reconsider D15 = ( C54 . R4 ) as (Element of C50) by L191 , L193 , FUNCT_2:5;
L194: R4 in ( dom C54 ) by L191 , L193 , FUNCT_2:def 1;
L195: ( C51 . ( C54 . R4 ) ) = ( ( C51 * C54 ) . R4 ) by L194 , FUNCT_1:13;
L196: ( C52 . ( C54 . R4 ) ) = ( ( C52 * C54 ) . R4 ) by L194 , FUNCT_1:13;
L197: R4 in ( dom C53 ) by L191 , L193 , FUNCT_2:def 1;
L198: ( ( C51 # ) . ( C53 . R4 ) ) = ( ( ( C51 # ) * C53 ) . R4 ) by L197 , FUNCT_1:13;
reconsider D16 = ( C55 . R4 ) as (Function of ( ( C51 # ) . D14 ) , ( C51 . D15 )) by L198 , L191 , L193 , L195 , PBOOLE:def 15;
L199: ( ( C52 # ) . ( C53 . R4 ) ) = ( ( ( C52 # ) * C53 ) . R4 ) by L197 , FUNCT_1:13;
reconsider D17 = ( C56 . R4 ) as (Function of ( ( C52 # ) . D14 ) , ( C52 . D15 )) by L199 , L191 , L193 , L196 , PBOOLE:def 15;
L200: ( D13 . R4 ) = [[: D16 , D17 :]] by L191 , L193;
thus L201: thesis by L200;
end;
reconsider D18 = D13 as (ManySortedFunction of R2) by L192 , FUNCOP_1:def 6;
L202: (for R4 being set holds (R4 in R2 implies ( D18 . R4 ) is (Function of ( ( ( [| C51 , C52 |] # ) * C53 ) . R4 ) , ( ( [| C51 , C52 |] * C54 ) . R4 ))))
proof
let R4 being set;
assume L203: R4 in R2;
reconsider D19 = ( C53 . R4 ) as (Element of ( C50 * )) by L203 , FUNCT_2:5;
reconsider D20 = ( C54 . R4 ) as (Element of C50) by L203 , FUNCT_2:5;
L204: R4 in ( dom C53 ) by L203 , FUNCT_2:def 1;
L205: ( ( ( [| C51 , C52 |] # ) * C53 ) . R4 ) = ( ( [| C51 , C52 |] # ) . ( C53 . R4 ) ) by L204 , FUNCT_1:13;
L206: R4 in ( dom C54 ) by L203 , FUNCT_2:def 1;
L207: ( C51 . ( C54 . R4 ) ) = ( ( C51 * C54 ) . R4 ) by L206 , FUNCT_1:13;
L208: ( ( [| C51 , C52 |] * C54 ) . R4 ) = ( [| C51 , C52 |] . ( C54 . R4 ) ) by L206 , FUNCT_1:13;
L209: ( C52 . ( C54 . R4 ) ) = ( ( C52 * C54 ) . R4 ) by L206 , FUNCT_1:13;
L210: ( ( C52 # ) . ( C53 . R4 ) ) = ( ( ( C52 # ) * C53 ) . R4 ) by L204 , FUNCT_1:13;
reconsider D21 = ( C56 . R4 ) as (Function of ( ( C52 # ) . D19 ) , ( C52 . D20 )) by L210 , L203 , L209 , PBOOLE:def 15;
L211: ( ( C51 # ) . ( C53 . R4 ) ) = ( ( ( C51 # ) * C53 ) . R4 ) by L204 , FUNCT_1:13;
reconsider D22 = ( C55 . R4 ) as (Function of ( ( C51 # ) . D19 ) , ( C51 . D20 )) by L211 , L203 , L207 , PBOOLE:def 15;
L212: ( D18 . R4 ) = [[: D22 , D21 :]] by L191 , L203;
thus L213: thesis by L212 , L205 , L208;
end;
reconsider D23 = D18 as (ManySortedFunction of ( ( [| C51 , C52 |] # ) * C53 ) , ( [| C51 , C52 |] * C54 )) by L202 , PBOOLE:def 15;
take D23;
thus L214: thesis by L191;
end;
uniqueness
proof
let C58 , C59 being (ManySortedFunction of ( ( [| C51 , C52 |] # ) * C53 ) , ( [| C51 , C52 |] * C54 ));
assume that
L215: (for R4 being set holds (R4 in R2 implies (for B54 being (Element of ( C50 * )) holds (for B55 being (Element of C50) holds ((B54 = ( C53 . R4 ) & B55 = ( C54 . R4 )) implies (for B56 being (Function of ( ( C51 # ) . B54 ) , ( C51 . B55 )) holds (for B57 being (Function of ( ( C52 # ) . B54 ) , ( C52 . B55 )) holds ((B56 = ( C55 . R4 ) & B57 = ( C56 . R4 )) implies ( C58 . R4 ) = [[: B56 , B57 :]]))))))))
and
L216: (for R4 being set holds (R4 in R2 implies (for B58 being (Element of ( C50 * )) holds (for B59 being (Element of C50) holds ((B58 = ( C53 . R4 ) & B59 = ( C54 . R4 )) implies (for B60 being (Function of ( ( C51 # ) . B58 ) , ( C51 . B59 )) holds (for B61 being (Function of ( ( C52 # ) . B58 ) , ( C52 . B59 )) holds ((B60 = ( C55 . R4 ) & B61 = ( C56 . R4 )) implies ( C59 . R4 ) = [[: B60 , B61 :]]))))))));
L217: (for B62 being set holds (B62 in R2 implies ( C58 . B62 ) = ( C59 . B62 )))
proof
let R4 being set;
assume L218: R4 in R2;
reconsider D24 = ( C53 . R4 ) as (Element of ( C50 * )) by L218 , FUNCT_2:5;
reconsider D25 = ( C54 . R4 ) as (Element of C50) by L218 , FUNCT_2:5;
L219: R4 in ( dom C54 ) by L218 , FUNCT_2:def 1;
L220: ( C51 . ( C54 . R4 ) ) = ( ( C51 * C54 ) . R4 ) by L219 , FUNCT_1:13;
L221: ( C52 . ( C54 . R4 ) ) = ( ( C52 * C54 ) . R4 ) by L219 , FUNCT_1:13;
L222: R4 in ( dom C53 ) by L218 , FUNCT_2:def 1;
L223: ( ( C51 # ) . ( C53 . R4 ) ) = ( ( ( C51 # ) * C53 ) . R4 ) by L222 , FUNCT_1:13;
reconsider D26 = ( C55 . R4 ) as (Function of ( ( C51 # ) . D24 ) , ( C51 . D25 )) by L223 , L218 , L220 , PBOOLE:def 15;
L224: ( ( C52 # ) . ( C53 . R4 ) ) = ( ( ( C52 # ) * C53 ) . R4 ) by L222 , FUNCT_1:13;
reconsider D27 = ( C56 . R4 ) as (Function of ( ( C52 # ) . D24 ) , ( C52 . D25 )) by L224 , L218 , L221 , PBOOLE:def 15;
L225: ( C58 . R4 ) = [[: D26 , D27 :]] by L215 , L218;
thus L226: thesis by L225 , L216 , L218;
end;
thus L227: thesis by L217 , PBOOLE:3;
end;
end;
begin
definition
let R1 being set;
let R6 being non  empty ManySortedSign;
mode MSAlgebra-Family of R1 , R6
 -> (ManySortedSet of R1)
means :L229: (for R3 being set holds (R3 in R1 implies ( it . R3 ) is  non-empty  non-empty  non-empty  non-empty MSAlgebra over R6));
existence
proof
set D28 = the  non-empty MSAlgebra over R6;
set D29 = ( R1 --> D28 );
reconsider D30 = D29 as (ManySortedSet of R1);
take D30;
let R3 being set;
assume L230: R3 in R1;
thus L231: thesis by L230 , FUNCOP_1:7;
end;
end;
definition
let C60 being non  empty set;
let R6 being non  empty ManySortedSign;
let C61 being (MSAlgebra-Family of C60 , R6);
let C62 being (Element of C60);
redefine func C61 . C62 ->  non-empty MSAlgebra over R6;

coherence by L229;
end;
definition
let C63 being non  empty ManySortedSign;
let C64 being MSAlgebra over C63;
func |.C64 .| -> set equals 
( union ( rng (the Sorts of C64) ) );
coherence;
end;
registration
let C65 being non  empty ManySortedSign;
let C66 being  non-empty MSAlgebra over C65;
cluster |. C66 .| -> non  empty;
coherence
proof
reconsider D31 = (the Sorts of C66) as  non-empty (ManySortedSet of (the carrier of C65));
set D32 = the (SortSymbol of C65);
L235: ( dom (the Sorts of C66) ) = (the carrier of C65) by PARTFUN1:def 2;
L236: ( (the Sorts of C66) . D32 ) in ( rng (the Sorts of C66) ) by L235 , FUNCT_1:def 3;
L237: (ex R5 being set st R5 in ( D31 . D32 )) by XBOOLE_0:def 1;
thus L238: thesis by L237 , L236 , TARSKI:def 4;
end;
end;
definition
let C67 being non  empty set;
let C68 being non  empty ManySortedSign;
let C69 being (MSAlgebra-Family of C67 , C68);
func |.C69 .| -> set equals 
( union { |. ( C69 . B63 ) .| where B63 is (Element of C67) : (not contradiction) } );
coherence;
end;
registration
let C70 being non  empty set;
let C71 being non  empty ManySortedSign;
let C72 being (MSAlgebra-Family of C70 , C71);
cluster |. C72 .| -> non  empty;
coherence
proof
set D33 = the (Element of C70);
set D34 = { |. ( C72 . B64 ) .| where B64 is (Element of C70) : (not contradiction) };
L241: (|. ( C72 . D33 ) .| in D34 & (ex R5 being set st R5 in |. ( C72 . D33 ) .|)) by XBOOLE_0:def 1;
thus L242: thesis by L241 , TARSKI:def 4;
end;
end;
begin
theorem
L244: (for B65 being non  void non  empty ManySortedSign holds (for B66 being MSAlgebra over B65 holds (for B67 being (OperSymbol of B65) holds (( Args (B67 , B66) ) = ( product ( (the Sorts of B66) * ( the_arity_of B67 ) ) ) & ( dom ( (the Sorts of B66) * ( the_arity_of B67 ) ) ) = ( dom ( the_arity_of B67 ) ) & ( Result (B67 , B66) ) = ( (the Sorts of B66) . ( the_result_sort_of B67 ) )))))
proof
let C73 being non  void non  empty ManySortedSign;
let C74 being MSAlgebra over C73;
let C75 being (OperSymbol of C73);
set D35 = (the Sorts of C74);
set D36 = (the Arity of C73);
set D37 = (the ResultSort of C73);
set D38 = ( the_arity_of C75 );
set D39 = ( ( D35 # ) * D36 );
set D40 = ( D35 * D37 );
set D41 = (the carrier' of C73);
set D42 = (the carrier of C73);
L245: ( dom D36 ) = D41 by FUNCT_2:def 1;
L246: ( dom D39 ) = ( dom D36 ) by L245 , PARTFUN1:def 2;
thus L247: ( Args (C75 , C74) ) = ( D39 . C75 ) by MSUALG_1:def 4
.= ( (( D35 # ) qua (ManySortedSet of ( D42 * ))) . ( D36 . C75 ) ) by L245 , L246 , FUNCT_1:12
.= ( (( D35 # ) qua (ManySortedSet of ( D42 * ))) . ( the_arity_of C75 ) ) by MSUALG_1:def 1
.= ( product ( D35 * ( the_arity_of C75 ) ) ) by FINSEQ_2:def 5;
L248: (( rng D38 ) c= D42 & ( dom D35 ) = D42) by FINSEQ_1:def 4 , PARTFUN1:def 2;
thus L249: ( dom ( D35 * D38 ) ) = ( dom D38 ) by L248 , RELAT_1:27;
L250: ( dom D37 ) = D41 by FUNCT_2:def 1;
L251: ( dom D40 ) = ( dom D37 ) by L250 , PARTFUN1:def 2;
thus L252: ( Result (C75 , C74) ) = ( D40 . C75 ) by MSUALG_1:def 5
.= ( D35 . ( D37 . C75 ) ) by L250 , L251 , FUNCT_1:12
.= ( D35 . ( the_result_sort_of C75 ) ) by MSUALG_1:def 2;
end;
theorem
L253: (for B68 being non  void non  empty ManySortedSign holds (for B69 being MSAlgebra over B68 holds (for B70 being (OperSymbol of B68) holds (( the_arity_of B70 ) = ( {} ) implies ( Args (B70 , B69) ) = { ( {} ) }))))
proof
let C76 being non  void non  empty ManySortedSign;
let C77 being MSAlgebra over C76;
let C78 being (OperSymbol of C76);
assume L254: ( the_arity_of C78 ) = ( {} );
thus L255: ( Args (C78 , C77) ) = ( product ( (the Sorts of C77) * ( the_arity_of C78 ) ) ) by L244
.= { ( {} ) } by L254 , CARD_3:10;
end;
definition
let R6 being non  empty ManySortedSign;
let C79 , C80 being  non-empty MSAlgebra over R6;
func [:C79 , C80 :] -> MSAlgebra over R6 equals 
MSAlgebra (# [| (the Sorts of C79) , (the Sorts of C80) |] , [[: (the Charact of C79) , (the Charact of C80) :]] #);
coherence;
end;
registration
let R6 being non  empty ManySortedSign;
let C81 , C82 being  non-empty MSAlgebra over R6;
cluster [: C81 , C82 :] ->  strict;
coherence;
end;
definition
let R1 being set;
let R6 being non  empty ManySortedSign;
let C83 being (SortSymbol of R6);
let C84 being (MSAlgebra-Family of R1 , R6);
func Carrier (C84 , C83) -> (ManySortedSet of R1) means 
:L258: (for B71 being set holds (B71 in R1 implies (ex B72 being MSAlgebra over R6 st (B72 = ( C84 . B71 ) & ( it . B71 ) = ( (the Sorts of B72) . C83 ))))) if R1 <> ( {} ) otherwise it = ( {} );
existence
proof
thus L259:now
assume L260: R1 <> ( {} );
reconsider D43 = R1 as non  empty set by L260;
reconsider D44 = C84 as (MSAlgebra-Family of D43 , R6);
deffunc H1((Element of D43)) = ( (the Sorts of ( D44 . $1 )) . C83 );
consider C85 being Function such that L261: (( dom C85 ) = D43 & (for B73 being (Element of D43) holds ( C85 . B73 ) = H1(B73))) from FUNCT_1:sch 4;
reconsider D45 = C85 as (ManySortedSet of R1) by L261 , PARTFUN1:def 2 , RELAT_1:def 18;
take D46 = D45;
let C86 being set;
assume L262: C86 in R1;
reconsider D47 = C86 as (Element of D43) by L262;
reconsider D48 = ( D44 . D47 ) as MSAlgebra over R6;
take D49 = D48;
thus L263: (D49 = ( C84 . C86 ) & ( D46 . C86 ) = ( (the Sorts of D49) . C83 )) by L261;
end;
assume L264: R1 = ( {} );
take ( [[0]] R1 );
thus L265: thesis by L264;
end;
uniqueness
proof
let C87 , C88 being (ManySortedSet of R1);
thus L266:now
assume L267: R1 <> ( {} );
assume L268: ((for B74 being set holds (B74 in R1 implies (ex B75 being MSAlgebra over R6 st (B75 = ( C84 . B74 ) & ( C87 . B74 ) = ( (the Sorts of B75) . C83 ))))) & (for B76 being set holds (B76 in R1 implies (ex B77 being MSAlgebra over R6 st (B77 = ( C84 . B76 ) & ( C88 . B76 ) = ( (the Sorts of B77) . C83 ))))));
L269: (for B78 being set holds (B78 in R1 implies ( C87 . B78 ) = ( C88 . B78 )))
proof
let C89 being set;
assume L270: C89 in R1;
reconsider D50 = C89 as (Element of R1) by L270;
L271: ((ex B79 being MSAlgebra over R6 st (B79 = ( C84 . D50 ) & ( C87 . D50 ) = ( (the Sorts of B79) . C83 ))) & (ex B80 being MSAlgebra over R6 st (B80 = ( C84 . D50 ) & ( C88 . D50 ) = ( (the Sorts of B80) . C83 )))) by L268 , L270;
thus L272: thesis by L271;
end;
thus L273: C87 = C88 by L269 , PBOOLE:3;
end;
thus L274: thesis;
end;
correctness;
end;
registration
let R1 being set;
let R6 being non  empty ManySortedSign;
let C90 being (SortSymbol of R6);
let C91 being (MSAlgebra-Family of R1 , R6);
cluster ( Carrier (C91 , C90) ) ->  non-empty;
coherence
proof
let C92 being set;
assume L276: C92 in R1;
consider C93 being MSAlgebra over R6 such that L277: C93 = ( C91 . C92 ) and L278: ( ( Carrier (C91 , C90) ) . C92 ) = ( (the Sorts of C93) . C90 ) by L276 , L258;
L279: C93 is  non-empty  non-empty  non-empty  non-empty MSAlgebra over R6 by L276 , L277 , L229;
thus L280: thesis by L279 , L278;
end;
end;
definition
let R1 being set;
let R6 being non  empty ManySortedSign;
let C94 being (MSAlgebra-Family of R1 , R6);
func SORTS C94 -> (ManySortedSet of (the carrier of R6)) means 
:L282: (for B81 being (SortSymbol of R6) holds ( it . B81 ) = ( product ( Carrier (C94 , B81) ) ));
existence
proof
deffunc H2((SortSymbol of R6)) = ( product ( Carrier (C94 , $1) ) );
consider C95 being Function such that L283: (( dom C95 ) = (the carrier of R6) & (for B82 being (SortSymbol of R6) holds ( C95 . B82 ) = H2(B82))) from FUNCT_1:sch 4;
reconsider D51 = C95 as (ManySortedSet of (the carrier of R6)) by L283 , PARTFUN1:def 2 , RELAT_1:def 18;
take D51;
thus L284: thesis by L283;
end;
uniqueness
proof
let C96 , C97 being (ManySortedSet of (the carrier of R6));
assume that
L285: (for B83 being (SortSymbol of R6) holds ( C96 . B83 ) = ( product ( Carrier (C94 , B83) ) ))
and
L286: (for B84 being (SortSymbol of R6) holds ( C97 . B84 ) = ( product ( Carrier (C94 , B84) ) ));
L287: (for B85 being set holds (B85 in (the carrier of R6) implies ( C96 . B85 ) = ( C97 . B85 )))
proof
let C98 being set;
assume L288: C98 in (the carrier of R6);
reconsider D52 = C98 as (SortSymbol of R6) by L288;
L289: ( C96 . D52 ) = ( product ( Carrier (C94 , D52) ) ) by L285;
thus L290: thesis by L289 , L286;
end;
thus L291: thesis by L287 , PBOOLE:3;
end;
end;
registration
let R1 being set;
let R6 being non  empty ManySortedSign;
let C99 being (MSAlgebra-Family of R1 , R6);
cluster ( SORTS C99 ) ->  non-empty;
coherence
proof
let C100 being set;
assume L293: C100 in (the carrier of R6);
reconsider D53 = C100 as (SortSymbol of R6) by L293;
L294: ( ( SORTS C99 ) . D53 ) = ( product ( Carrier (C99 , D53) ) ) by L282;
thus L295: thesis by L294;
end;
end;
definition
let R1 being set;
let C101 being non  empty ManySortedSign;
let C102 being (MSAlgebra-Family of R1 , C101);
func OPER C102 -> (ManySortedFunction of R1) means 
:L297: (for B86 being set holds (B86 in R1 implies (ex B87 being MSAlgebra over C101 st (B87 = ( C102 . B86 ) & ( it . B86 ) = (the Charact of B87))))) if R1 <> ( {} ) otherwise it = ( {} );
existence
proof
reconsider D54 = ( [[0]] R1 ) as (ManySortedFunction of R1);
thus L298:now
assume L299: R1 <> ( {} );
reconsider D55 = R1 as non  empty set by L299;
reconsider D56 = C102 as (MSAlgebra-Family of D55 , C101);
deffunc H3((Element of D55)) = (the Charact of ( D56 . $1 ));
consider C103 being (ManySortedSet of D55) such that L300: (for B88 being (Element of D55) holds ( C103 . B88 ) = H3(B88)) from PBOOLE:sch 5;
L301: (for R5 being set holds (R5 in ( dom C103 ) implies ( C103 . R5 ) is Function))
proof
let R5 being set;
assume L302: R5 in ( dom C103 );
reconsider D57 = R5 as (Element of D55) by L302 , PARTFUN1:def 2;
L303: ( C103 . D57 ) = (the Charact of ( D56 . D57 )) by L300;
thus L304: thesis by L303;
end;
reconsider D58 = C103 as (ManySortedFunction of R1) by L301 , FUNCOP_1:def 6;
take D59 = D58;
let C104 being set;
assume L305: C104 in R1;
reconsider D60 = C104 as (Element of D55) by L305;
reconsider D61 = ( D56 . D60 ) as MSAlgebra over C101;
take D62 = D61;
thus L306: (D62 = ( C102 . C104 ) & ( D59 . C104 ) = (the Charact of D62)) by L300;
end;
assume L307: R1 = ( {} );
take D54;
thus L308: thesis by L307;
end;
uniqueness
proof
let C105 , C106 being (ManySortedFunction of R1);
thus L309:now
assume L310: R1 <> ( {} );
assume L311: ((for B89 being set holds (B89 in R1 implies (ex B90 being MSAlgebra over C101 st (B90 = ( C102 . B89 ) & ( C105 . B89 ) = (the Charact of B90))))) & (for B91 being set holds (B91 in R1 implies (ex B92 being MSAlgebra over C101 st (B92 = ( C102 . B91 ) & ( C106 . B91 ) = (the Charact of B92))))));
L312: (for R5 being set holds (R5 in R1 implies ( C105 . R5 ) = ( C106 . R5 )))
proof
let R5 being set;
assume L313: R5 in R1;
reconsider D63 = R5 as (Element of R1) by L313;
L314: ((ex B93 being MSAlgebra over C101 st (B93 = ( C102 . D63 ) & ( C105 . D63 ) = (the Charact of B93))) & (ex B94 being MSAlgebra over C101 st (B94 = ( C102 . D63 ) & ( C106 . D63 ) = (the Charact of B94)))) by L311 , L313;
thus L315: thesis by L314;
end;
thus L316: C105 = C106 by L312 , PBOOLE:3;
end;
thus L317: thesis;
end;
correctness;
end;
theorem
L319: (for R1 being set holds (for B95 being non  empty ManySortedSign holds (for B96 being (MSAlgebra-Family of R1 , B95) holds ( dom ( uncurry ( OPER B96 ) ) ) = [: R1 , (the carrier' of B95) :])))
proof
let R1 being set;
let C107 being non  empty ManySortedSign;
let C108 being (MSAlgebra-Family of R1 , C107);
per cases ;
suppose L320: R1 <> ( {} );

thus L321: ( dom ( uncurry ( OPER C108 ) ) ) c= [: R1 , (the carrier' of C107) :]
proof
let C109 being set;
assume L322: C109 in ( dom ( uncurry ( OPER C108 ) ) );
consider C110 being set, C111 being Function, C112 being set such that L323: C109 = [ C110 , C112 ] and L324: C110 in ( dom ( OPER C108 ) ) and L325: (C111 = ( ( OPER C108 ) . C110 ) & C112 in ( dom C111 )) by L322 , FUNCT_5:def 2;
reconsider D64 = C110 as (Element of R1) by L324 , PARTFUN1:def 2;
L326: (ex B97 being MSAlgebra over C107 st (B97 = ( C108 . D64 ) & ( ( OPER C108 ) . D64 ) = (the Charact of B97))) by L320 , L297;
L327: C112 in (the carrier' of C107) by L326 , L325 , PARTFUN1:def 2;
L328: D64 in R1 by L324 , PARTFUN1:def 2;
thus L329: thesis by L328 , L323 , L327 , ZFMISC_1:87;
end;

let R5 being set;
assume L330: R5 in [: R1 , (the carrier' of C107) :];
consider C113 , C114 being set such that L331: R5 = [ C113 , C114 ] by L330 , RELAT_1:def 1;
L332: C114 in (the carrier' of C107) by L330 , L331 , ZFMISC_1:87;
reconsider D65 = C113 as (Element of R1) by L330 , L331 , ZFMISC_1:87;
consider C115 being MSAlgebra over C107 such that L333: C115 = ( C108 . D65 ) and L334: ( ( OPER C108 ) . D65 ) = (the Charact of C115) by L320 , L297;
L335: (( dom (the Charact of C115) ) = (the carrier' of C107) & ( dom ( OPER C108 ) ) = R1) by PARTFUN1:def 2;
thus L336: thesis by L335 , L320 , L331 , L332 , L334 , FUNCT_5:def 2;
end;
suppose L337: R1 = ( {} );

L338: ( OPER C108 ) = ( {} ) by L337;
thus L339: thesis by L338 , L337 , FUNCT_5:43 , RELAT_1:38 , ZFMISC_1:90;
end;
end;
theorem
L341: (for B98 being non  empty set holds (for B99 being non  void non  empty ManySortedSign holds (for B100 being (MSAlgebra-Family of B98 , B99) holds (for B101 being (OperSymbol of B99) holds ( commute ( OPER B100 ) ) in ( Funcs ((the carrier' of B99) , ( Funcs (B98 , ( rng ( uncurry ( OPER B100 ) ) )) )) )))))
proof
let C116 being non  empty set;
let C117 being non  void non  empty ManySortedSign;
let C118 being (MSAlgebra-Family of C116 , C117);
let C119 being (OperSymbol of C117);
set D66 = ( uncurry ( OPER C118 ) );
L342: ( dom D66 ) = [: C116 , (the carrier' of C117) :] by L319;
L343: ([: C116 , (the carrier' of C117) :] <> ( {} ) & D66 in ( Funcs ([: C116 , (the carrier' of C117) :] , ( rng D66 )) )) by L342 , FUNCT_2:def 2 , ZFMISC_1:90;
thus L344: thesis by L343 , FUNCT_6:10;
end;
definition
let C120 being set;
let C121 being non  void non  empty ManySortedSign;
let C122 being (MSAlgebra-Family of C120 , C121);
let C123 being (OperSymbol of C121);
func C122 ?. C123 -> (ManySortedFunction of C120) equals 
( ( commute ( OPER C122 ) ) . C123 );
coherence
proof
set D67 = ( uncurry ( OPER C122 ) );
set D68 = ( commute ( OPER C122 ) );
L345: ( dom D67 ) = [: C120 , (the carrier' of C121) :] by L319;
per cases ;
suppose L346: C120 <> ( {} );

L347: D68 in ( Funcs ((the carrier' of C121) , ( Funcs (C120 , ( rng D67 )) )) ) by L346 , L341;
L348: (ex B102 being Function st (B102 = D68 & ( dom B102 ) = (the carrier' of C121) & ( rng B102 ) c= ( Funcs (C120 , ( rng D67 )) ))) by L347 , FUNCT_2:def 2;
L349: ( D68 . C123 ) in ( rng D68 ) by L348 , FUNCT_1:def 3;
consider C124 being Function such that L350: C124 = ( D68 . C123 ) and L351: ( dom C124 ) = C120 and L352: ( rng C124 ) c= ( rng D67 ) by L349 , L348 , FUNCT_2:def 2;
reconsider D69 = C124 as (ManySortedSet of C120) by L351 , PARTFUN1:def 2 , RELAT_1:def 18;
L353: (for R5 being set holds (R5 in ( dom D69 ) implies ( D69 . R5 ) is Function))
proof
let R5 being set;
assume L354: R5 in ( dom D69 );
reconsider D70 = R5 as (Element of C120) by L354 , L351;
L355: (( [ D70 , C123 ] `1 ) = D70 & ( [ D70 , C123 ] `2 ) = C123);
consider C125 being MSAlgebra over C121 such that L356: C125 = ( C122 . D70 ) and L357: ( ( OPER C122 ) . D70 ) = (the Charact of C125) by L346 , L297;
L358: [ D70 , C123 ] in ( dom D67 ) by L345 , L346 , ZFMISC_1:87;
L359: ( D69 . D70 ) = ( D67 . (D70 , C123) ) by L358 , L350 , FUNCT_5:22;
L360: ( D69 . D70 ) = ( (the Charact of C125) . C123 ) by L359 , L358 , L355 , L357 , FUNCT_5:def 2
.= ( Den (C123 , C125) ) by MSUALG_1:def 6;
thus L361: thesis by L360;
end;
thus L362: thesis by L353 , L350 , FUNCOP_1:def 6;
end;
suppose L363: C120 = ( {} );

reconsider D71 = ( [[0]] C120 ) as (ManySortedFunction of C120);
L364: D71 = ( {} ) by L363
.= ( ( commute ( {} ) ) . C123 ) by FUNCT_6:58
.= ( ( commute ( OPER C122 ) ) . C123 ) by L363;
thus L365: thesis by L364;
end;
end;
end;
theorem
L368: (for B103 being non  empty set holds (for B104 being (Element of B103) holds (for B105 being non  void non  empty ManySortedSign holds (for B106 being (MSAlgebra-Family of B103 , B105) holds (for B107 being (OperSymbol of B105) holds ( ( B106 ?. B107 ) . B104 ) = ( Den (B107 , ( B106 . B104 )) ))))))
proof
let C126 being non  empty set;
let C127 being (Element of C126);
let C128 being non  void non  empty ManySortedSign;
let C129 being (MSAlgebra-Family of C126 , C128);
let C130 being (OperSymbol of C128);
set D72 = (the carrier' of C128);
set D73 = ( uncurry ( OPER C129 ) );
L369: (( [ C127 , C130 ] `1 ) = C127 & ( [ C127 , C130 ] `2 ) = C130);
L370: (ex B108 being MSAlgebra over C128 st (B108 = ( C129 . C127 ) & ( ( OPER C129 ) . C127 ) = (the Charact of B108))) by L297;
L371: ( dom D73 ) = [: C126 , D72 :] by L319;
L372: [ C127 , C130 ] in ( dom D73 ) by L371 , ZFMISC_1:87;
L373: [: C126 , D72 :] <> ( {} ) by ZFMISC_1:90;
consider C131 being Function such that L374: ( ( curry' D73 ) . C130 ) = C131 and L375: ( dom C131 ) = C126 and L376: ( rng C131 ) c= ( rng D73 ) and L377: (for R5 being set holds (R5 in C126 implies ( C131 . R5 ) = ( D73 . (R5 , C130) ))) by L373 , L371 , FUNCT_5:32;
L378: ( C131 . C127 ) = ( D73 . (C127 , C130) ) by L377;
L379: ( C131 . C127 ) = ( (the Charact of ( C129 . C127 )) . C130 ) by L378 , L372 , L369 , L370 , FUNCT_5:def 2
.= ( Den (C130 , ( C129 . C127 )) ) by MSUALG_1:def 6;
thus L380: thesis by L379 , L374;
end;
theorem
L381: (for B109 being non  empty set holds (for B110 being non  void non  empty ManySortedSign holds (for B111 being (MSAlgebra-Family of B109 , B110) holds (for B112 being (OperSymbol of B110) holds (for B113 being set holds (B113 in ( rng ( Frege ( B111 ?. B112 ) ) ) implies B113 is Function))))))
proof
let C132 being non  empty set;
let C133 being non  void non  empty ManySortedSign;
let C134 being (MSAlgebra-Family of C132 , C133);
let C135 being (OperSymbol of C133);
let C136 being set;
assume L382: C136 in ( rng ( Frege ( C134 ?. C135 ) ) );
L383: (ex B114 being set st (B114 in ( dom ( Frege ( C134 ?. C135 ) ) ) & ( ( Frege ( C134 ?. C135 ) ) . B114 ) = C136)) by L382 , FUNCT_1:def 3;
thus L384: thesis by L383;
end;
theorem
L385: (for B115 being non  empty set holds (for B116 being non  void non  empty ManySortedSign holds (for B117 being (MSAlgebra-Family of B115 , B116) holds (for B118 being (OperSymbol of B116) holds (for B119 being Function holds (B119 in ( rng ( Frege ( B117 ?. B118 ) ) ) implies (( dom B119 ) = B115 & (for B120 being (Element of B115) holds ( B119 . B120 ) in ( Result (B118 , ( B117 . B120 )) )))))))))
proof
let C137 being non  empty set;
let C138 being non  void non  empty ManySortedSign;
let C139 being (MSAlgebra-Family of C137 , C138);
let C140 being (OperSymbol of C138);
let C141 being Function;
L386: ( dom ( C139 ?. C140 ) ) = C137 by PARTFUN1:def 2;
L387: ( SubFuncs ( rng ( C139 ?. C140 ) ) ) = ( rng ( C139 ?. C140 ) )
proof
thus L388: ( SubFuncs ( rng ( C139 ?. C140 ) ) ) c= ( rng ( C139 ?. C140 ) ) by FUNCT_6:18;
let R5 being set;
assume L389: R5 in ( rng ( C139 ?. C140 ) );
L390: (ex R4 being set st (R4 in ( dom ( C139 ?. C140 ) ) & R5 = ( ( C139 ?. C140 ) . R4 ))) by L389 , FUNCT_1:def 3;
thus L391: thesis by L390 , L389 , FUNCT_6:def 1;
end;
assume L392: C141 in ( rng ( Frege ( C139 ?. C140 ) ) );
consider C142 being set such that L393: C142 in ( dom ( Frege ( C139 ?. C140 ) ) ) and L394: ( ( Frege ( C139 ?. C140 ) ) . C142 ) = C141 by L392 , FUNCT_1:def 3;
L395: ( dom ( Frege ( C139 ?. C140 ) ) ) = ( product ( doms ( C139 ?. C140 ) ) ) by PARTFUN1:def 2;
consider C143 being Function such that L396: C143 = C142 and L397: ( dom C143 ) = ( dom ( doms ( C139 ?. C140 ) ) ) and L398: (for R3 being set holds (R3 in ( dom ( doms ( C139 ?. C140 ) ) ) implies ( C143 . R3 ) in ( ( doms ( C139 ?. C140 ) ) . R3 ))) by L395 , L393 , CARD_3:def 5;
L399: C141 = ( ( C139 ?. C140 ) .. C143 ) by L393 , L394 , L395 , L396 , L56;
thus L400: ( dom C141 ) = ( dom ( C139 ?. C140 ) ) by L399 , PRALG_1:def 17
.= C137 by PARTFUN1:def 2;
let C144 being (Element of C137);
L401: ( ( C139 ?. C140 ) . C144 ) = ( Den (C140 , ( C139 . C144 )) ) by L368;
L402: ( dom ( doms ( C139 ?. C140 ) ) ) = ( ( C139 ?. C140 ) " ( SubFuncs ( rng ( C139 ?. C140 ) ) ) ) by FUNCT_6:def 2
.= ( dom ( C139 ?. C140 ) ) by L387 , RELAT_1:134;
L403: ( C143 . C144 ) in ( ( doms ( C139 ?. C140 ) ) . C144 ) by L402 , L398 , L386;
L404: ( C143 . C144 ) in ( dom ( Den (C140 , ( C139 . C144 )) ) ) by L403 , L386 , L401 , FUNCT_6:22;
L405: ( C141 . C144 ) = ( ( Den (C140 , ( C139 . C144 )) ) . ( C143 . C144 ) ) by L399 , L386 , L401 , PRALG_1:def 17;
L406: ( C141 . C144 ) in ( rng ( Den (C140 , ( C139 . C144 )) ) ) by L405 , L404 , FUNCT_1:def 3;
L407: ( rng ( Den (C140 , ( C139 . C144 )) ) ) c= ( Result (C140 , ( C139 . C144 )) ) by RELAT_1:def 19;
thus L408: thesis by L407 , L406;
end;
theorem
L409: (for B121 being non  empty set holds (for B122 being non  void non  empty ManySortedSign holds (for B123 being (MSAlgebra-Family of B121 , B122) holds (for B124 being (OperSymbol of B122) holds (for B125 being Function holds (B125 in ( dom ( Frege ( B123 ?. B124 ) ) ) implies (( dom B125 ) = B121 & (for B126 being (Element of B121) holds ( B125 . B126 ) in ( Args (B124 , ( B123 . B126 )) )) & ( rng B125 ) c= ( Funcs (( dom ( the_arity_of B124 ) ) , |. B123 .|) ))))))))
proof
let C145 being non  empty set;
let C146 being non  void non  empty ManySortedSign;
let C147 being (MSAlgebra-Family of C145 , C146);
let C148 being (OperSymbol of C146);
let C149 being Function;
assume L410: C149 in ( dom ( Frege ( C147 ?. C148 ) ) );
L411: ( dom ( C147 ?. C148 ) ) = C145 by PARTFUN1:def 2;
L412: ( SubFuncs ( rng ( C147 ?. C148 ) ) ) = ( rng ( C147 ?. C148 ) )
proof
thus L413: ( SubFuncs ( rng ( C147 ?. C148 ) ) ) c= ( rng ( C147 ?. C148 ) ) by FUNCT_6:18;
let R5 being set;
assume L414: R5 in ( rng ( C147 ?. C148 ) );
L415: (ex R4 being set st (R4 in ( dom ( C147 ?. C148 ) ) & R5 = ( ( C147 ?. C148 ) . R4 ))) by L414 , FUNCT_1:def 3;
thus L416: thesis by L415 , L414 , FUNCT_6:def 1;
end;
L417: ( dom ( Frege ( C147 ?. C148 ) ) ) = ( product ( doms ( C147 ?. C148 ) ) ) by PARTFUN1:def 2;
L418: ( dom ( doms ( C147 ?. C148 ) ) ) = ( ( C147 ?. C148 ) " ( SubFuncs ( rng ( C147 ?. C148 ) ) ) ) by FUNCT_6:def 2
.= ( dom ( C147 ?. C148 ) ) by L412 , RELAT_1:134;
thus L419: ( dom C149 ) = C145 by L418 , L410 , L417 , L411 , CARD_3:9;
thus L420: (for B127 being (Element of C145) holds ( C149 . B127 ) in ( Args (C148 , ( C147 . B127 )) ))
proof
let C150 being (Element of C145);
L421: (( ( C147 ?. C148 ) . C150 ) = ( Den (C148 , ( C147 . C150 )) ) & ( C149 . C150 ) in ( ( doms ( C147 ?. C148 ) ) . C150 )) by L410 , L417 , L411 , L418 , L368 , CARD_3:9;
L422: ( C149 . C150 ) in ( dom ( Den (C148 , ( C147 . C150 )) ) ) by L421 , L411 , FUNCT_6:22;
thus L423: thesis by L422 , FUNCT_2:def 1;
end;

let R5 being set;
assume L424: R5 in ( rng C149 );
consider C151 being set such that L425: C151 in ( dom C149 ) and L426: R5 = ( C149 . C151 ) by L424 , FUNCT_1:def 3;
reconsider D74 = C151 as (Element of C145) by L410 , L417 , L411 , L418 , L425 , CARD_3:9;
set D75 = (the carrier' of C146);
set D76 = ( ( (the Sorts of ( C147 . D74 )) # ) * (the Arity of C146) );
set D77 = (the Arity of C146);
set D78 = (the carrier of C146);
set D79 = (the Sorts of ( C147 . D74 ));
set D80 = ( the_arity_of C148 );
L427: ( dom D77 ) = D75 by FUNCT_2:def 1;
L428: ( dom D76 ) = ( dom D77 ) by L427 , PARTFUN1:def 2;
L429: ( Args (C148 , ( C147 . D74 )) ) = ( D76 . C148 ) by MSUALG_1:def 4
.= ( (( D79 # ) qua (ManySortedSet of ( D78 * ))) . ( D77 . C148 ) ) by L427 , L428 , FUNCT_1:12
.= ( (( D79 # ) qua (ManySortedSet of ( D78 * ))) . ( the_arity_of C148 ) ) by MSUALG_1:def 1
.= ( product ( D79 * ( the_arity_of C148 ) ) ) by FINSEQ_2:def 5;
L430: R5 in ( Args (C148 , ( C147 . D74 )) ) by L420 , L426;
consider C152 being Function such that L431: C152 = R5 and L432: ( dom C152 ) = ( dom ( D79 * D80 ) ) and L433: (for R3 being set holds (R3 in ( dom ( D79 * D80 ) ) implies ( C152 . R3 ) in ( ( D79 * D80 ) . R3 ))) by L430 , L429 , CARD_3:def 5;
L434: (( rng D80 ) c= D78 & ( dom D79 ) = D78) by FINSEQ_1:def 4 , PARTFUN1:def 2;
L435: ( dom ( D79 * D80 ) ) = ( dom D80 ) by L434 , RELAT_1:27;
L436: ( rng C152 ) c= |. ( C147 . D74 ) .|
proof
let R3 being set;
assume L437: R3 in ( rng C152 );
consider R4 being set such that L438: R4 in ( dom C152 ) and L439: ( C152 . R4 ) = R3 by L437 , FUNCT_1:def 3;
L440: ( D80 . R4 ) in ( rng D80 ) by L432 , L435 , L438 , FUNCT_1:def 3;
L441: ( D79 . ( D80 . R4 ) ) in ( rng D79 ) by L440 , L434 , FUNCT_1:def 3;
L442: R3 in ( ( D79 * D80 ) . R4 ) by L432 , L433 , L438 , L439;
L443: R3 in ( D79 . ( D80 . R4 ) ) by L442 , L432 , L438 , FUNCT_1:12;
thus L444: thesis by L443 , L441 , TARSKI:def 4;
end;
L445: |. ( C147 . D74 ) .| in { |. ( C147 . B128 ) .| where B128 is (Element of C145) : (not contradiction) };
L446: |. ( C147 . D74 ) .| c= ( union { |. ( C147 . B129 ) .| where B129 is (Element of C145) : (not contradiction) } ) by L445 , ZFMISC_1:74;
L447: ( rng C152 ) c= |. C147 .| by L446 , L436 , XBOOLE_1:1;
thus L448: thesis by L447 , L431 , L432 , L435 , FUNCT_2:def 2;
end;
theorem
L449: (for B130 being non  empty set holds (for B131 being non  void non  empty ManySortedSign holds (for B132 being (MSAlgebra-Family of B130 , B131) holds (for B133 being (OperSymbol of B131) holds (( dom ( doms ( B132 ?. B133 ) ) ) = B130 & (for B134 being (Element of B130) holds ( ( doms ( B132 ?. B133 ) ) . B134 ) = ( Args (B133 , ( B132 . B134 )) )))))))
proof
let C153 being non  empty set;
let C154 being non  void non  empty ManySortedSign;
let C155 being (MSAlgebra-Family of C153 , C154);
let C156 being (OperSymbol of C154);
L450: ( SubFuncs ( rng ( C155 ?. C156 ) ) ) = ( rng ( C155 ?. C156 ) )
proof
thus L451: ( SubFuncs ( rng ( C155 ?. C156 ) ) ) c= ( rng ( C155 ?. C156 ) ) by FUNCT_6:18;
let R5 being set;
assume L452: R5 in ( rng ( C155 ?. C156 ) );
L453: (ex R4 being set st (R4 in ( dom ( C155 ?. C156 ) ) & R5 = ( ( C155 ?. C156 ) . R4 ))) by L452 , FUNCT_1:def 3;
thus L454: thesis by L453 , L452 , FUNCT_6:def 1;
end;
L455: ( ( C155 ?. C156 ) " ( SubFuncs ( rng ( C155 ?. C156 ) ) ) ) = ( dom ( C155 ?. C156 ) ) by L450 , RELAT_1:134
.= C153 by PARTFUN1:def 2;
L456: ( dom ( C155 ?. C156 ) ) = C153 by PARTFUN1:def 2;
L457: (for B135 being (Element of C153) holds ( ( doms ( C155 ?. C156 ) ) . B135 ) = ( Args (C156 , ( C155 . B135 )) ))
proof
let C157 being (Element of C153);
L458: ( ( C155 ?. C156 ) . C157 ) = ( Den (C156 , ( C155 . C157 )) ) by L368;
L459: ( ( doms ( C155 ?. C156 ) ) . C157 ) = ( dom ( Den (C156 , ( C155 . C157 )) ) ) by L458 , L456 , FUNCT_6:22;
thus L460: thesis by L459 , FUNCT_2:def 1;
end;
thus L461: thesis by L457 , L455 , FUNCT_6:def 2;
end;
definition
let R1 being set;
let C158 being non  void non  empty ManySortedSign;
let C159 being (MSAlgebra-Family of R1 , C158);
func OPS C159 -> (ManySortedFunction of ( ( ( SORTS C159 ) # ) * (the Arity of C158) ) , ( ( SORTS C159 ) * (the ResultSort of C158) )) means 
(for B136 being (OperSymbol of C158) holds ( it . B136 ) = ( IFEQ (( the_arity_of B136 ) , ( {} ) , ( commute ( C159 ?. B136 ) ) , ( Commute ( Frege ( C159 ?. B136 ) ) )) )) if R1 <> ( {} ) otherwise (not contradiction);
existence
proof
defpred S5[ set , set ] means (for B137 being (OperSymbol of C158) holds ($1 = B137 implies $2 = ( IFEQ (( the_arity_of B137 ) , ( {} ) , ( commute ( C159 ?. B137 ) ) , ( Commute ( Frege ( C159 ?. B137 ) ) )) )));
set D81 = (the carrier' of C158);
set D82 = ( ( ( SORTS C159 ) # ) * (the Arity of C158) );
set D83 = ( ( SORTS C159 ) * (the ResultSort of C158) );
L462: (for R5 being set holds (R5 in D81 implies (ex B138 being set st S5[ R5 , B138 ])))
proof
let R5 being set;
assume L463: R5 in D81;
reconsider D84 = R5 as (OperSymbol of C158) by L463;
take ( IFEQ (( the_arity_of D84 ) , ( {} ) , ( commute ( C159 ?. D84 ) ) , ( Commute ( Frege ( C159 ?. D84 ) ) )) );
let C160 being (OperSymbol of C158);
assume L464: R5 = C160;
thus L465: thesis by L464;
end;
consider C161 being Function such that L466: (( dom C161 ) = D81 & (for R5 being set holds (R5 in D81 implies S5[ R5 , ( C161 . R5 ) ]))) from CLASSES1:sch 1(L462);
reconsider D85 = C161 as (ManySortedSet of D81) by L466 , PARTFUN1:def 2 , RELAT_1:def 18;
L467: (for R5 being set holds (R5 in ( dom D85 ) implies ( D85 . R5 ) is Function))
proof
let R5 being set;
assume L468: R5 in ( dom D85 );
reconsider D86 = R5 as (OperSymbol of C158) by L468 , L466;
per cases ;
suppose L469: ( the_arity_of D86 ) = ( {} );

L470: ( D85 . R5 ) = ( IFEQ (( the_arity_of D86 ) , ( {} ) , ( commute ( C159 ?. D86 ) ) , ( Commute ( Frege ( C159 ?. D86 ) ) )) ) by L466
.= ( commute ( C159 ?. D86 ) ) by L469 , FUNCOP_1:def 8;
thus L471: thesis by L470;
end;
suppose L472: ( the_arity_of D86 ) <> ( {} );

L473: ( D85 . R5 ) = ( IFEQ (( the_arity_of D86 ) , ( {} ) , ( commute ( C159 ?. D86 ) ) , ( Commute ( Frege ( C159 ?. D86 ) ) )) ) by L466
.= ( Commute ( Frege ( C159 ?. D86 ) ) ) by L472 , FUNCOP_1:def 8;
thus L474: thesis by L473;
end;
end;
reconsider D87 = D85 as (ManySortedFunction of D81) by L467 , FUNCOP_1:def 6;
thus L476:now
assume L477: R1 <> ( {} );
reconsider D88 = R1 as non  empty set by L477;
reconsider D89 = C159 as (MSAlgebra-Family of D88 , C158);
L478: (for R5 being set holds (R5 in D81 implies ( D87 . R5 ) is (Function of ( D82 . R5 ) , ( D83 . R5 ))))
proof
let R5 being set;
assume L479: R5 in D81;
reconsider D90 = R5 as (OperSymbol of C158) by L479;
set D91 = ( the_arity_of D90 );
set D92 = ( Commute ( Frege ( C159 ?. D90 ) ) );
set D93 = ( Frege ( C159 ?. D90 ) );
set D94 = (the Arity of C158);
set D95 = (the ResultSort of C158);
set D96 = (the carrier of C158);
set D97 = ( commute ( C159 ?. D90 ) );
L480: ( rng D91 ) c= D96 by FINSEQ_1:def 4;
L481: ( dom D94 ) = D81 by FUNCT_2:def 1;
L482: ( dom D82 ) = ( dom D94 ) by L481 , PARTFUN1:def 2;
L483: ( D82 . D90 ) = ( (( ( SORTS C159 ) # ) qua (ManySortedSet of ( D96 * ))) . ( D94 . D90 ) ) by L482 , L481 , FUNCT_1:12
.= ( (( ( SORTS C159 ) # ) qua (ManySortedSet of ( D96 * ))) . ( the_arity_of D90 ) ) by MSUALG_1:def 1
.= ( product ( ( SORTS C159 ) * ( the_arity_of D90 ) ) ) by FINSEQ_2:def 5;
L484: ( dom D95 ) = D81 by FUNCT_2:def 1;
L485: ( dom D83 ) = ( dom D95 ) by L484 , PARTFUN1:def 2;
L486: ( D83 . D90 ) = ( ( SORTS C159 ) . ( D95 . D90 ) ) by L485 , L484 , FUNCT_1:12
.= ( ( SORTS C159 ) . ( the_result_sort_of D90 ) ) by MSUALG_1:def 2
.= ( product ( Carrier (C159 , ( the_result_sort_of D90 )) ) ) by L282;
L487: ( dom ( SORTS C159 ) ) = D96 by PARTFUN1:def 2;
L488: ( dom ( ( SORTS C159 ) * D91 ) ) = ( dom D91 ) by L487 , L480 , RELAT_1:27;
per cases ;
suppose L489: ( the_arity_of D90 ) = ( {} );

set D98 = ( the_result_sort_of D90 );
L490: ( rng ( C159 ?. D90 ) ) c= ( Funcs ({ ( {} ) } , |. D89 .|) )
proof
let R4 being set;
assume L491: R4 in ( rng ( C159 ?. D90 ) );
consider C162 being set such that L492: C162 in ( dom ( C159 ?. D90 ) ) and L493: ( ( C159 ?. D90 ) . C162 ) = R4 by L491 , FUNCT_1:def 3;
reconsider D99 = C162 as (Element of D88) by L492 , PARTFUN1:def 2;
set D100 = (the Sorts of ( D89 . D99 ));
L494: |. ( D89 . D99 ) .| in { |. ( D89 . B139 ) .| where B139 is (Element of D88) : (not contradiction) };
L495: |. ( D89 . D99 ) .| c= ( union { |. ( D89 . B140 ) .| where B140 is (Element of D88) : (not contradiction) } ) by L494 , ZFMISC_1:74;
L496: ( dom (the Sorts of ( D89 . D99 )) ) = (the carrier of C158) by PARTFUN1:def 2;
L497: ( D100 . D98 ) in ( rng (the Sorts of ( D89 . D99 )) ) by L496 , FUNCT_1:def 3;
L498: ( D100 . D98 ) c= ( union ( rng (the Sorts of ( D89 . D99 )) ) ) by L497 , ZFMISC_1:74;
L499: (( rng ( Den (D90 , ( D89 . D99 )) ) ) c= ( Result (D90 , ( D89 . D99 )) ) & ( Result (D90 , ( D89 . D99 )) ) = ( D100 . D98 )) by L244 , RELAT_1:def 19;
L500: ( rng ( Den (D90 , ( D89 . D99 )) ) ) c= |. ( D89 . D99 ) .| by L499 , L498 , XBOOLE_1:1;
L501: ( rng ( Den (D90 , ( D89 . D99 )) ) ) c= |. D89 .| by L500 , L495 , XBOOLE_1:1;
L502: (( dom ( Den (D90 , ( D89 . D99 )) ) ) = ( Args (D90 , ( D89 . D99 )) ) & ( Args (D90 , ( D89 . D99 )) ) = { ( {} ) }) by L489 , L253 , FUNCT_2:def 1;
L503: R4 = ( Den (D90 , ( D89 . D99 )) ) by L493 , L368;
thus L504: thesis by L503 , L502 , L501 , FUNCT_2:def 2;
end;
L505: ( dom ( C159 ?. D90 ) ) = R1 by PARTFUN1:def 2;
L506: ( C159 ?. D90 ) in ( Funcs (R1 , ( Funcs ({ ( {} ) } , |. D89 .|) )) ) by L505 , L490 , FUNCT_2:def 2;
L507: ( commute ( C159 ?. D90 ) ) in ( Funcs ({ ( {} ) } , ( Funcs (R1 , |. D89 .|) )) ) by L506 , FUNCT_6:55;
L508: (ex B141 being Function st (B141 = D97 & ( dom B141 ) = { ( {} ) } & ( rng B141 ) c= ( Funcs (R1 , |. D89 .|) ))) by L507 , FUNCT_2:def 2;
L509: ( rng D97 ) c= ( D83 . D90 )
proof
let R4 being set;
L510: ( dom ( Carrier (C159 , D98) ) ) = R1 by PARTFUN1:def 2;
assume L511: R4 in ( rng D97 );
consider C163 being set such that L512: C163 in ( dom D97 ) and L513: ( D97 . C163 ) = R4 by L511 , FUNCT_1:def 3;
reconsider D101 = R4 as Function by L513;
L514: (for B142 being set holds (B142 in ( dom ( Carrier (C159 , D98) ) ) implies ( D101 . B142 ) in ( ( Carrier (C159 , D98) ) . B142 )))
proof
let C164 being set;
assume L515: C164 in ( dom ( Carrier (C159 , D98) ) );
reconsider D102 = C164 as (Element of D88) by L515 , PARTFUN1:def 2;
L516: (ex B143 being MSAlgebra over C158 st (B143 = ( C159 . D102 ) & ( ( Carrier (C159 , D98) ) . D102 ) = ( (the Sorts of B143) . D98 ))) by L258;
L517: ( dom ( Den (D90 , ( D89 . D102 )) ) ) = ( Args (D90 , ( D89 . D102 )) ) by FUNCT_2:def 1
.= { ( {} ) } by L489 , L253;
L518: ( ( Den (D90 , ( D89 . D102 )) ) . C163 ) in ( rng ( Den (D90 , ( D89 . D102 )) ) ) by L517 , L508 , L512 , FUNCT_1:def 3;
L519: ( ( C159 ?. D90 ) . D102 ) = ( Den (D90 , ( D89 . D102 )) ) by L368;
L520: ( ( Den (D90 , ( D89 . D102 )) ) . C163 ) = ( D101 . D102 ) by L519 , L506 , L508 , L512 , L513 , FUNCT_6:56;
L521: ( rng ( Den (D90 , ( D89 . D102 )) ) ) c= ( Result (D90 , ( D89 . D102 )) ) by RELAT_1:def 19;
L522: ( D101 . D102 ) in ( Result (D90 , ( D89 . D102 )) ) by L521 , L520 , L518;
thus L523: thesis by L522 , L516 , L244;
end;
L524: (ex B144 being Function st (B144 = D101 & ( dom B144 ) = R1 & ( rng B144 ) c= |. D89 .|)) by L508 , L511 , FUNCT_2:def 2;
thus L525: thesis by L524 , L486 , L510 , L514 , CARD_3:9;
end;
L526: ( D82 . D90 ) = { ( {} ) } by L483 , L489 , CARD_3:10;
L527: ( D87 . R5 ) = ( IFEQ (( the_arity_of D90 ) , ( {} ) , ( commute ( C159 ?. D90 ) ) , ( Commute ( Frege ( C159 ?. D90 ) ) )) ) by L466
.= ( commute ( C159 ?. D90 ) ) by L489 , FUNCOP_1:def 8;
thus L528: thesis by L527 , L526 , L508 , L509 , FUNCT_2:2;
end;
suppose L529: ( the_arity_of D90 ) <> ( {} );

L530: ( dom D92 ) = ( D82 . D90 )
proof
thus L531: ( dom D92 ) c= ( D82 . D90 )
proof
let R4 being set;
assume L532: R4 in ( dom D92 );
consider C165 being Function such that L533: C165 in ( dom D93 ) and L534: R4 = ( commute C165 ) by L532 , L7;
set D103 = ( commute C165 );
L535: ( rng C165 ) c= ( Funcs (( dom D91 ) , |. D89 .|) ) by L533 , L409;
L536: ( dom C165 ) = D88 by L533 , L409;
L537: C165 in ( Funcs (R1 , ( Funcs (( dom D91 ) , |. D89 .|) )) ) by L536 , L535 , FUNCT_2:def 2;
L538: ( commute C165 ) in ( Funcs (( dom D91 ) , ( Funcs (R1 , |. D89 .|) )) ) by L537 , L529 , FUNCT_6:55;
L539: (ex B145 being Function st (B145 = ( commute C165 ) & ( dom B145 ) = ( dom D91 ) & ( rng B145 ) c= ( Funcs (R1 , |. D89 .|) ))) by L538 , FUNCT_2:def 2;
L540: (for B146 being set holds (B146 in ( dom ( ( SORTS C159 ) * D91 ) ) implies ( D103 . B146 ) in ( ( ( SORTS C159 ) * D91 ) . B146 )))
proof
let C166 being set;
assume L541: C166 in ( dom ( ( SORTS C159 ) * D91 ) );
L542: ( D91 . C166 ) in ( rng D91 ) by L541 , L488 , FUNCT_1:def 3;
reconsider D104 = ( D91 . C166 ) as (SortSymbol of C158) by L542 , L480;
L543: ( D103 . C166 ) in ( rng D103 ) by L488 , L539 , L541 , FUNCT_1:def 3;
consider C167 being Function such that L544: C167 = ( D103 . C166 ) and L545: ( dom C167 ) = R1 and L546: ( rng C167 ) c= |. D89 .| by L543 , L539 , FUNCT_2:def 2;
L547: (for B147 being set holds (B147 in ( dom ( Carrier (C159 , D104) ) ) implies ( C167 . B147 ) in ( ( Carrier (C159 , D104) ) . B147 )))
proof
let C168 being set;
assume L548: C168 in ( dom ( Carrier (C159 , D104) ) );
reconsider D105 = C168 as (Element of D88) by L548 , PARTFUN1:def 2;
L549: ( dom ( ( (the Sorts of ( D89 . D105 )) # ) * D94 ) ) = D81 by PARTFUN1:def 2;
L550: ( Args (D90 , ( D89 . D105 )) ) = ( ( ( (the Sorts of ( D89 . D105 )) # ) * D94 ) . D90 ) by MSUALG_1:def 4
.= ( (( (the Sorts of ( D89 . D105 )) # ) qua (ManySortedSet of ( D96 * ))) . ( D94 . D90 ) ) by L549 , FUNCT_1:12
.= ( (( (the Sorts of ( D89 . D105 )) # ) qua (ManySortedSet of ( D96 * ))) . D91 ) by MSUALG_1:def 1
.= ( product ( (the Sorts of ( D89 . D105 )) * D91 ) ) by FINSEQ_2:def 5;
L551: ( C165 . D105 ) in ( rng C165 ) by L536 , FUNCT_1:def 3;
consider C169 being Function such that L552: C169 = ( C165 . D105 ) and L553: ( dom C169 ) = ( dom D91 ) and L554: ( rng C169 ) c= |. D89 .| by L551 , L535 , FUNCT_2:def 2;
L555: (ex B148 being MSAlgebra over C158 st (B148 = ( C159 . D105 ) & ( ( Carrier (C159 , D104) ) . D105 ) = ( (the Sorts of B148) . D104 ))) by L258;
L556: ( dom (the Sorts of ( D89 . D105 )) ) = D96 by PARTFUN1:def 2;
L557: ( dom ( (the Sorts of ( D89 . D105 )) * D91 ) ) = ( dom D91 ) by L556 , L480 , RELAT_1:27;
L558: ( ( (the Sorts of ( D89 . D105 )) * D91 ) . C166 ) = ( (the Sorts of ( D89 . D105 )) . D104 ) by L557 , L488 , L541 , FUNCT_1:12;
L559: ( C165 . D105 ) in ( Args (D90 , ( D89 . D105 )) ) by L533 , L409;
L560: ( C169 . C166 ) in ( ( (the Sorts of ( D89 . D105 )) * D91 ) . C166 ) by L559 , L488 , L541 , L552 , L550 , L557 , CARD_3:9;
thus L561: thesis by L560 , L488 , L537 , L541 , L544 , L555 , L552 , L558 , FUNCT_6:56;
end;
L562: ( dom ( Carrier (C159 , D104) ) ) = R1 by PARTFUN1:def 2;
L563: ( ( ( SORTS C159 ) * D91 ) . C166 ) = ( ( SORTS C159 ) . D104 ) by L541 , FUNCT_1:12
.= ( product ( Carrier (C159 , D104) ) ) by L282;
thus L564: thesis by L563 , L562 , L544 , L545 , L547 , CARD_3:9;
end;
thus L565: thesis by L540 , L483 , L488 , L534 , L539 , CARD_3:9;
end;

let R3 being set;
assume L566: R3 in ( D82 . D90 );
consider C170 being Function such that L567: C170 = R3 and L568: ( dom C170 ) = ( dom ( ( SORTS C159 ) * D91 ) ) and L569: (for R5 being set holds (R5 in ( dom ( ( SORTS C159 ) * D91 ) ) implies ( C170 . R5 ) in ( ( ( SORTS C159 ) * D91 ) . R5 ))) by L566 , L483 , CARD_3:def 5;
L570: ( rng C170 ) c= ( Funcs (R1 , |. D89 .|) )
proof
let C171 being set;
assume L571: C171 in ( rng C170 );
consider C172 being set such that L572: C172 in ( dom C170 ) and L573: ( C170 . C172 ) = C171 by L571 , FUNCT_1:def 3;
L574: ( D91 . C172 ) in ( rng D91 ) by L488 , L568 , L572 , FUNCT_1:def 3;
reconsider D106 = ( D91 . C172 ) as (SortSymbol of C158) by L574 , L480;
L575: ( ( ( SORTS C159 ) * D91 ) . C172 ) = ( ( SORTS C159 ) . D106 ) by L568 , L572 , FUNCT_1:12
.= ( product ( Carrier (C159 , D106) ) ) by L282;
L576: C171 in ( ( ( SORTS C159 ) * D91 ) . C172 ) by L568 , L569 , L572 , L573;
consider C173 being Function such that L577: C173 = C171 and L578: ( dom C173 ) = ( dom ( Carrier (C159 , D106) ) ) and L579: (for R4 being set holds (R4 in ( dom ( Carrier (C159 , D106) ) ) implies ( C173 . R4 ) in ( ( Carrier (C159 , D106) ) . R4 ))) by L576 , L575 , CARD_3:def 5;
L580: ( rng C173 ) c= |. D89 .|
proof
let R4 being set;
assume L581: R4 in ( rng C173 );
consider C174 being set such that L582: C174 in ( dom C173 ) and L583: ( C173 . C174 ) = R4 by L581 , FUNCT_1:def 3;
reconsider D107 = C174 as (Element of D88) by L578 , L582 , PARTFUN1:def 2;
L584: ((ex B149 being MSAlgebra over C158 st (B149 = ( C159 . D107 ) & ( ( Carrier (C159 , D106) ) . D107 ) = ( (the Sorts of B149) . D106 ))) & ( dom (the Sorts of ( D89 . D107 )) ) = (the carrier of C158)) by L258 , PARTFUN1:def 2;
L585: ( ( Carrier (C159 , D106) ) . D107 ) in ( rng (the Sorts of ( D89 . D107 )) ) by L584 , FUNCT_1:def 3;
L586: ( C173 . D107 ) in ( ( Carrier (C159 , D106) ) . D107 ) by L578 , L579 , L582;
L587: ( C173 . D107 ) in |. ( D89 . D107 ) .| by L586 , L585 , TARSKI:def 4;
L588: |. ( D89 . D107 ) .| in { |. ( D89 . B150 ) .| where B150 is (Element of D88) : (not contradiction) };
thus L589: thesis by L588 , L583 , L587 , TARSKI:def 4;
end;
L590: ( dom ( Carrier (C159 , D106) ) ) = R1 by PARTFUN1:def 2;
thus L591: thesis by L590 , L577 , L578 , L580 , FUNCT_2:def 2;
end;
L592: C170 in ( Funcs (( dom D91 ) , ( Funcs (R1 , |. D89 .|) )) ) by L570 , L488 , L568 , FUNCT_2:def 2;
L593: ( commute ( commute C170 ) ) = C170 by L592 , L529 , FUNCT_6:57;
L594: ( commute C170 ) in ( Funcs (R1 , ( Funcs (( dom D91 ) , |. D89 .|) )) ) by L529 , L592 , FUNCT_6:55;
L595: (ex B151 being Function st (B151 = ( commute C170 ) & ( dom B151 ) = R1 & ( rng B151 ) c= ( Funcs (( dom D91 ) , |. D89 .|) ))) by L594 , FUNCT_2:def 2;
L596: (for R4 being set holds (R4 in ( dom ( doms ( C159 ?. D90 ) ) ) implies ( ( commute C170 ) . R4 ) in ( ( doms ( C159 ?. D90 ) ) . R4 )))
proof
set D108 = ( commute C170 );
let R4 being set;
assume L597: R4 in ( dom ( doms ( C159 ?. D90 ) ) );
reconsider D109 = R4 as (Element of D88) by L597 , L449;
set D110 = (the Sorts of ( D89 . D109 ));
reconsider D111 = ( D108 . D109 ) as Function;
L598: D111 in ( rng D108 ) by L595 , FUNCT_1:def 3;
L599: (ex B152 being Function st (B152 = D111 & ( dom B152 ) = ( dom D91 ) & ( rng B152 ) c= |. D89 .|)) by L598 , L595 , FUNCT_2:def 2;
L600: ( dom ( (the Sorts of ( D89 . D109 )) * D91 ) ) = ( dom D91 ) by L244;
L601: (for B153 being set holds (B153 in ( dom ( D110 * D91 ) ) implies ( D111 . B153 ) in ( ( D110 * D91 ) . B153 )))
proof
let C175 being set;
assume L602: C175 in ( dom ( D110 * D91 ) );
L603: ( D91 . C175 ) in ( rng D91 ) by L602 , L600 , FUNCT_1:def 3;
reconsider D112 = ( D91 . C175 ) as (SortSymbol of C158) by L603 , L480;
L604: ( ( D110 * D91 ) . C175 ) = ( D110 . D112 ) by L602 , FUNCT_1:12;
L605: ( C170 . C175 ) in ( rng C170 ) by L488 , L568 , L600 , L602 , FUNCT_1:def 3;
consider C176 being Function such that L606: C176 = ( C170 . C175 ) and L607: ( dom C176 ) = R1 and L608: ( rng C176 ) c= |. D89 .| by L605 , L570 , FUNCT_2:def 2;
L609: ((ex B154 being MSAlgebra over C158 st (B154 = ( D89 . D109 ) & ( ( Carrier (C159 , D112) ) . D109 ) = ( (the Sorts of B154) . D112 ))) & ( dom ( Carrier (C159 , D112) ) ) = R1) by L258 , PARTFUN1:def 2;
L610: ( ( ( SORTS C159 ) * D91 ) . C175 ) = ( ( SORTS C159 ) . D112 ) by L488 , L600 , L602 , FUNCT_1:12
.= ( product ( Carrier (C159 , D112) ) ) by L282;
L611: (( C176 . D109 ) = ( D111 . C175 ) & C176 in ( ( ( SORTS C159 ) * D91 ) . C175 )) by L488 , L569 , L592 , L600 , L602 , L606 , FUNCT_6:56;
thus L612: thesis by L611 , L604 , L610 , L609 , CARD_3:9;
end;
L613: (( ( doms ( C159 ?. D90 ) ) . D109 ) = ( Args (D90 , ( D89 . D109 )) ) & ( Args (D90 , ( D89 . D109 )) ) = ( product ( (the Sorts of ( D89 . D109 )) * D91 ) )) by L244 , L449;
thus L614: thesis by L613 , L600 , L599 , L601 , CARD_3:9;
end;
L615: (( dom D93 ) = ( product ( doms ( C159 ?. D90 ) ) ) & ( dom ( doms ( C159 ?. D90 ) ) ) = D88) by L449 , PARTFUN1:def 2;
L616: ( commute C170 ) in ( dom D93 ) by L615 , L595 , L596 , CARD_3:9;
thus L617: thesis by L616 , L567 , L593 , L7;
end;
set D113 = ( the_result_sort_of D90 );
set D114 = ( Carrier (C159 , D113) );
L618: ( rng D92 ) c= ( D83 . D90 )
proof
let R5 being set;
L619: ( dom D114 ) = R1 by PARTFUN1:def 2;
assume L620: R5 in ( rng D92 );
consider C177 being set such that L621: C177 in ( dom D92 ) and L622: ( D92 . C177 ) = R5 by L620 , FUNCT_1:def 3;
consider C178 being Function such that L623: C178 in ( dom ( Frege ( C159 ?. D90 ) ) ) and L624: C177 = ( commute C178 ) by L621 , L7;
reconsider D115 = C177 as Function by L624;
L625: (( dom C178 ) = D88 & ( rng C178 ) c= ( Funcs (( dom ( the_arity_of D90 ) ) , |. D89 .|) )) by L623 , L409;
L626: C178 in ( Funcs (R1 , ( Funcs (( dom ( the_arity_of D90 ) ) , |. D89 .|) )) ) by L625 , FUNCT_2:def 2;
L627: ( commute D115 ) = C178 by L626 , L529 , L624 , FUNCT_6:57;
L628: R5 = ( D93 . C178 ) by L627 , L621 , L622 , L7;
reconsider D116 = R5 as Function by L628;
L629: ( D93 . C178 ) in ( rng D93 ) by L623 , FUNCT_1:def 3;
L630: (for R4 being set holds (R4 in ( dom D114 ) implies ( D116 . R4 ) in ( D114 . R4 )))
proof
let R4 being set;
assume L631: R4 in ( dom D114 );
reconsider D117 = R4 as (Element of D88) by L631 , PARTFUN1:def 2;
L632: ( dom ( (the Sorts of ( D89 . D117 )) * D95 ) ) = ( dom D95 ) by L484 , PARTFUN1:def 2;
L633: (ex B155 being MSAlgebra over C158 st (B155 = ( D89 . D117 ) & ( D114 . D117 ) = ( (the Sorts of B155) . D113 ))) by L258;
L634: ( Result (D90 , ( D89 . D117 )) ) = ( ( (the Sorts of ( D89 . D117 )) * D95 ) . D90 ) by MSUALG_1:def 5
.= ( (the Sorts of ( D89 . D117 )) . ( D95 . D90 ) ) by L484 , L632 , FUNCT_1:12
.= ( D114 . D117 ) by L633 , MSUALG_1:def 2;
thus L635: thesis by L634 , L628 , L629 , L385;
end;
L636: ( dom D116 ) = D88 by L628 , L629 , L385;
thus L637: thesis by L636 , L486 , L619 , L630 , CARD_3:9;
end;
L638: ( D87 . R5 ) = ( IFEQ (( the_arity_of D90 ) , ( {} ) , ( commute ( C159 ?. D90 ) ) , ( Commute ( Frege ( C159 ?. D90 ) ) )) ) by L466
.= ( Commute ( Frege ( C159 ?. D90 ) ) ) by L529 , FUNCOP_1:def 8;
thus L639: thesis by L638 , L530 , L618 , FUNCT_2:2;
end;
end;
reconsider D118 = D87 as (ManySortedFunction of D82 , D83) by L478 , PBOOLE:def 15;
take D119 = D118;
let C179 being (OperSymbol of C158);
thus L641: ( D119 . C179 ) = ( IFEQ (( the_arity_of C179 ) , ( {} ) , ( commute ( C159 ?. C179 ) ) , ( Commute ( Frege ( C159 ?. C179 ) ) )) ) by L466;
end;
assume L642: R1 = ( {} );
set D120 = the (ManySortedFunction of ( ( ( SORTS C159 ) # ) * (the Arity of C158) ) , ( ( SORTS C159 ) * (the ResultSort of C158) ));
take D120;
end;
uniqueness
proof
let C180 , C181 being (ManySortedFunction of ( ( ( SORTS C159 ) # ) * (the Arity of C158) ) , ( ( SORTS C159 ) * (the ResultSort of C158) ));
thus L644:now
assume L645: R1 <> ( {} );
assume that
L646: (for B156 being (OperSymbol of C158) holds ( C180 . B156 ) = ( IFEQ (( the_arity_of B156 ) , ( {} ) , ( commute ( C159 ?. B156 ) ) , ( Commute ( Frege ( C159 ?. B156 ) ) )) ))
and
L647: (for B157 being (OperSymbol of C158) holds ( C181 . B157 ) = ( IFEQ (( the_arity_of B157 ) , ( {} ) , ( commute ( C159 ?. B157 ) ) , ( Commute ( Frege ( C159 ?. B157 ) ) )) ));
L648: (for R3 being set holds (R3 in (the carrier' of C158) implies ( C180 . R3 ) = ( C181 . R3 )))
proof
let R3 being set;
assume L649: R3 in (the carrier' of C158);
reconsider D121 = R3 as (Element of (the carrier' of C158)) by L649;
L650: ( C180 . D121 ) = ( IFEQ (( the_arity_of D121 ) , ( {} ) , ( commute ( C159 ?. D121 ) ) , ( Commute ( Frege ( C159 ?. D121 ) ) )) ) by L646;
thus L651: thesis by L650 , L647;
end;
thus L652: C180 = C181 by L648 , PBOOLE:3;
end;
assume L653: R1 = ( {} );
L654:
now
let C182 being set;
assume L655: C182 in (the carrier' of C158);
reconsider D122 = ( (the ResultSort of C158) . C182 ) as (SortSymbol of C158) by L655 , FUNCT_2:5;
L656: C182 in ( dom (the ResultSort of C158) ) by L655 , FUNCT_2:def 1;
L657: ( ( ( SORTS C159 ) * (the ResultSort of C158) ) . C182 ) = ( ( SORTS C159 ) . D122 ) by L656 , FUNCT_1:13
.= ( product ( Carrier (C159 , D122) ) ) by L282
.= { ( {} ) } by L653 , CARD_3:10;
L658: (( C180 . C182 ) is (Function of ( ( ( ( SORTS C159 ) # ) * (the Arity of C158) ) . C182 ) , ( ( ( SORTS C159 ) * (the ResultSort of C158) ) . C182 )) & ( C181 . C182 ) is (Function of ( ( ( ( SORTS C159 ) # ) * (the Arity of C158) ) . C182 ) , ( ( ( SORTS C159 ) * (the ResultSort of C158) ) . C182 ))) by L655 , PBOOLE:def 15;
thus L659: ( C180 . C182 ) = ( C181 . C182 ) by L658 , L657 , FUNCT_2:51;
end;
L660: (( dom C180 ) = (the carrier' of C158) & ( dom C181 ) = (the carrier' of C158)) by PARTFUN1:def 2;
thus L661: thesis by L660 , L654 , FUNCT_1:2;
end;
correctness;
end;
definition
let C183 being set;
let C184 being non  void non  empty ManySortedSign;
let C185 being (MSAlgebra-Family of C183 , C184);
func product C185 -> MSAlgebra over C184 equals 
MSAlgebra (# ( SORTS C185 ) , ( OPS C185 ) #);
coherence;
end;
registration
let C186 being set;
let C187 being non  void non  empty ManySortedSign;
let C188 being (MSAlgebra-Family of C186 , C187);
cluster ( product C188 ) ->  strict;
coherence;
end;
theorem
L665: (for R1 being set holds (for B158 being non  void non  empty ManySortedSign holds (for B159 being (MSAlgebra-Family of R1 , B158) holds ((the Sorts of ( product B159 )) = ( SORTS B159 ) & (the Charact of ( product B159 )) = ( OPS B159 )))));
