:: A Theory of Sequential Files
::  by Hirofumi Fukura and Yatsuka Nakamura
::
:: Received August 12, 2005
:: Copyright (c) 2005-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, XBOOLE_0, FINSEQ_1, ORDINAL4, RELAT_1, CARD_1, SUBSET_1,
      XXREAL_0, RFINSEQ, ARYTM_1, ARYTM_3, JORDAN3, FUNCT_1, FINSEQ_5, NAT_1,
      PARTFUN1, FINSEQ_8, FILEREC1;
 notations XBOOLE_0, SUBSET_1, NUMBERS, XCMPLX_0, XXREAL_0, ORDINAL1, NAT_1,
      NAT_D, RELAT_1, RFINSEQ, FUNCT_1, PARTFUN1, FUNCT_2, FINSEQ_1, FINSEQ_4,
      FINSEQ_6, FINSEQ_5, FINSEQ_8;
 constructors NAT_1, RFINSEQ, NAT_D, FINSEQ_4, FINSEQ_5, CQC_LANG, FINSEQ_6,
      FINSEQ_8, REAL_1, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, XXREAL_0, XREAL_0, FINSEQ_1,
      FINSEQ_5, ORDINAL1, CARD_1;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 theorems NAT_1, NAT_2, REVROT_1, JORDAN4, FINSEQ_1, FINSEQ_2, FINSEQ_5,
      FINSEQ_6, RFINSEQ, FUNCT_2, FINSEQ_8, GENEALG1, TOPREAL3, CALCUL_1,
      FINSEQ_3, XREAL_1, CARD_1, XXREAL_0, PARTFUN1, XREAL_0, NAT_D;

begin
theorem
L1: (for B1 being non  empty set holds (for B2 , B3 , B4 , B5 being (FinSequence of B1) holds (( ( ( B2 ^ B3 ) ^ B4 ) ^ B5 ) = ( ( B2 ^ ( B3 ^ B4 ) ) ^ B5 ) & ( ( ( B2 ^ B3 ) ^ B4 ) ^ B5 ) = ( ( B2 ^ B3 ) ^ ( B4 ^ B5 ) ) & ( ( B2 ^ ( B3 ^ B4 ) ) ^ B5 ) = ( ( B2 ^ B3 ) ^ ( B4 ^ B5 ) ))))
proof
let C1 being non  empty set;
let C2 , C3 , C4 , C5 being (FinSequence of C1);
L2: ( ( ( C2 ^ C3 ) ^ C4 ) ^ C5 ) = ( ( C2 ^ C3 ) ^ ( C4 ^ C5 ) ) by FINSEQ_1:32;
thus L3: thesis by L2 , FINSEQ_1:32;
end;
theorem
L4: (for B6 being set holds (for B7 being (FinSequence of B6) holds ( B7 | ( len B7 ) ) = B7))
proof
let C6 being set;
let C7 being (FinSequence of C6);
L5: ( C7 | ( len C7 ) ) = ( C7 | ( Seg ( len C7 ) ) ) by FINSEQ_1:def 15;
thus L6: thesis by L5 , FINSEQ_2:20;
end;
theorem
L7: (for B8 being non  empty set holds (for B9 , B10 being (FinSequence of B8) holds (( len B9 ) = ( 0 ) implies B10 = ( B9 ^ B10 ))))
proof
let C8 being non  empty set;
let C9 , C10 being (FinSequence of C8);
assume L8: ( len C9 ) = ( 0 );
L9: C9 = ( <*> C8 ) by L8
.= ( {} );
thus L10: thesis by L9 , FINSEQ_1:34;
end;
theorem
L11: (for B11 being non  empty set holds (for B12 being (FinSequence of B11) holds (for B13 , B14 being (Element of ( NAT )) holds (B13 <= B14 implies ( len ( B12 /^ B14 ) ) <= ( len ( B12 /^ B13 ) )))))
proof
let C11 being non  empty set;
let C12 being (FinSequence of C11);
let C13 , C14 being (Element of ( NAT ));
L12: ( len ( C12 /^ C14 ) ) = ( ( len C12 ) -' C14 ) by RFINSEQ:29;
assume L13: C13 <= C14;
L14: ( C13 - C13 ) <= ( C14 - C13 ) by L13 , XREAL_1:9;
L15:
now
per cases ;
suppose L16: ( len C12 ) <= C13;

L17: ( ( ( len C12 ) -' C13 ) - ( ( len C12 ) -' C14 ) ) = ( ( ( len C12 ) -' C13 ) - ( 0 ) ) by L16 , L13 , NAT_2:8 , XXREAL_0:2
.= ( 0 ) by L16 , NAT_2:8;
thus L18: ( ( len ( C12 /^ C13 ) ) - ( len ( C12 /^ C14 ) ) ) >= ( 0 ) by L17 , L12 , RFINSEQ:29;
end;
suppose L19: ( len C12 ) > C13;

per cases ;
suppose L20: ( len C12 ) <= C14;

L21: ( ( ( len C12 ) -' C13 ) - ( ( len C12 ) -' C14 ) ) = ( ( ( len C12 ) -' C13 ) - ( 0 ) ) by L20 , NAT_2:8
.= ( ( len C12 ) -' C13 );
thus L22: ( ( len ( C12 /^ C13 ) ) - ( len ( C12 /^ C14 ) ) ) >= ( 0 ) by L21 , L12 , RFINSEQ:29;
end;
suppose L23: ( len C12 ) > C14;

L24: ( ( ( len C12 ) -' C13 ) - ( ( len C12 ) -' C14 ) ) = ( ( ( len C12 ) -' C13 ) - ( ( len C12 ) - C14 ) ) by L23 , XREAL_1:233
.= ( ( ( len C12 ) - C13 ) - ( ( len C12 ) - C14 ) ) by L19 , XREAL_1:233
.= ( C14 - C13 );
thus L25: ( ( len ( C12 /^ C13 ) ) - ( len ( C12 /^ C14 ) ) ) >= ( 0 ) by L24 , L14 , L12 , RFINSEQ:29;
end;
end;
end;
L28: ( ( ( len ( C12 /^ C13 ) ) - ( len ( C12 /^ C14 ) ) ) + ( len ( C12 /^ C14 ) ) ) >= ( ( 0 ) + ( len ( C12 /^ C14 ) ) ) by L15 , XREAL_1:6;
thus L29: thesis by L28;
end;
theorem
L30: (for B15 being non  empty set holds (for B16 , B17 being (FinSequence of B15) holds (( len B17 ) >= 1 implies ( mid (( B16 ^ B17 ) , ( ( len B16 ) + 1 ) , ( ( len B16 ) + ( len B17 ) )) ) = B17)))
proof
let C15 being non  empty set;
let C16 , C17 being (FinSequence of C15);
assume L31: ( len C17 ) >= 1;
L32: ( C17 | ( len C17 ) ) = ( C17 | ( Seg ( len C17 ) ) ) by FINSEQ_1:def 15;
per cases ;
suppose L33: ( ( len C16 ) + 1 ) <= ( ( len C16 ) + ( len C17 ) );

L34: ( len C16 ) < ( ( len C16 ) + ( len C17 ) ) by L33 , NAT_1:13;
L35: ( ( len C16 ) - ( len C16 ) ) < ( ( ( len C16 ) + ( len C17 ) ) - ( len C16 ) ) by L34 , XREAL_1:14;
L36: ( ( ( len C16 ) + ( len C17 ) ) -' ( len C16 ) ) = ( len C17 ) by L35 , XREAL_0:def 2;
L37: ( mid (( C16 ^ C17 ) , ( ( len C16 ) + 1 ) , ( ( len C16 ) + ( len C17 ) )) ) = ( ( ( C16 ^ C17 ) /^ ( ( ( len C16 ) + 1 ) -' 1 ) ) | ( ( ( ( len C16 ) + ( len C17 ) ) -' ( ( len C16 ) + 1 ) ) + 1 ) ) by L33 , FINSEQ_6:def 3
.= ( ( ( C16 ^ C17 ) /^ ( len C16 ) ) | ( ( ( ( len C16 ) + ( len C17 ) ) -' ( ( len C16 ) + 1 ) ) + 1 ) ) by NAT_D:34
.= ( ( ( C16 ^ C17 ) /^ ( len C16 ) ) | ( ( ( len C16 ) + ( len C17 ) ) -' ( len C16 ) ) ) by L34 , NAT_2:7
.= ( C17 | ( len C17 ) ) by L36 , FINSEQ_5:37;
thus L38: thesis by L37 , L32 , FINSEQ_2:20;
end;
suppose L39: ( ( len C16 ) + 1 ) > ( ( len C16 ) + ( len C17 ) );

L40: ( ( ( len C16 ) + 1 ) - ( len C16 ) ) > ( ( ( len C16 ) + ( len C17 ) ) - ( len C16 ) ) by L39 , XREAL_1:14;
thus L41: thesis by L40 , L31;
end;
end;
theorem
L43: (for B18 being non  empty set holds (for B19 , B20 being (FinSequence of B18) holds (for B21 , B22 being (Element of ( NAT )) holds ((1 <= B21 & B21 <= B22 & B22 <= ( len B19 )) implies ( mid (( B19 ^ B20 ) , B21 , B22) ) = ( mid (B19 , B21 , B22) )))))
proof
let C18 being non  empty set;
let C19 , C20 being (FinSequence of C18);
let C21 , C22 being (Element of ( NAT ));
assume that
L44: 1 <= C21
and
L45: C21 <= C22
and
L46: C22 <= ( len C19 );
L47: ( ( ( len ( C19 /^ ( C21 -' 1 ) ) ) + ( C21 - 1 ) ) - ( C21 - 1 ) ) = ( len ( C19 /^ ( C21 -' 1 ) ) );
L48: ( len C19 ) >= C21 by L45 , L46 , XXREAL_0:2;
L49: ( ( len C19 ) - ( 0 ) ) >= ( C21 - 1 ) by L48 , XREAL_1:13;
L50: ( len C19 ) >= ( C21 -' 1 ) by L49 , L44 , XREAL_1:233;
L51: ( ( len ( C19 /^ ( C21 -' 1 ) ) ) + ( C21 -' 1 ) ) = ( ( ( len C19 ) -' ( C21 -' 1 ) ) + ( C21 -' 1 ) ) by RFINSEQ:29
.= ( len C19 ) by L50 , XREAL_1:235;
L52: ( len ( C19 /^ ( C21 -' 1 ) ) ) = ( ( len C19 ) - ( C21 - 1 ) ) by L51 , L44 , L47 , XREAL_1:233
.= ( ( ( len C19 ) - C21 ) + 1 );
L53: ( ( len C19 ) - C21 ) >= ( C22 - C21 ) by L46 , XREAL_1:9;
L54: ( ( ( len C19 ) - C21 ) + 1 ) >= ( ( C22 - C21 ) + 1 ) by L53 , XREAL_1:6;
L55: ( C22 - C21 ) >= ( C21 - C21 ) by L45 , XREAL_1:9;
L56: ( len ( C19 /^ ( C21 -' 1 ) ) ) >= ( ( C22 -' C21 ) + 1 ) by L55 , L54 , L52 , XREAL_0:def 2;
L57: (( C21 -' 1 ) <= C21 & C21 <= ( len C19 )) by L45 , L46 , NAT_D:35 , XXREAL_0:2;
L58: ( mid (( C19 ^ C20 ) , C21 , C22) ) = ( ( ( C19 ^ C20 ) /^ ( C21 -' 1 ) ) | ( ( C22 -' C21 ) + 1 ) ) by L45 , FINSEQ_6:def 3
.= ( ( ( C19 /^ ( C21 -' 1 ) ) ^ C20 ) | ( ( C22 -' C21 ) + 1 ) ) by L57 , GENEALG1:1 , XXREAL_0:2
.= ( ( C19 /^ ( C21 -' 1 ) ) | ( ( C22 -' C21 ) + 1 ) ) by L56 , FINSEQ_5:22;
thus L59: thesis by L58 , L45 , FINSEQ_6:def 3;
end;
theorem
L60: (for B23 being non  empty set holds (for B24 being (FinSequence of B23) holds (for B25 , B26 , B27 being (Element of ( NAT )) holds ((1 <= B25 & B25 <= B26 & B25 <= ( len ( B24 | B27 ) ) & B26 <= ( len ( B24 | B27 ) )) implies ( mid (B24 , B25 , B26) ) = ( mid (( B24 | B27 ) , B25 , B26) )))))
proof
let C23 being non  empty set;
let C24 being (FinSequence of C23);
let C25 , C26 , C27 being (Element of ( NAT ));
assume that
L61: 1 <= C25
and
L62: C25 <= C26
and
L63: C25 <= ( len ( C24 | C27 ) )
and
L64: C26 <= ( len ( C24 | C27 ) );
L65: ( ( C26 -' C25 ) + 1 ) = ( ( C26 - C25 ) + 1 ) by L62 , XREAL_1:233;
L66: ( len ( C24 | C27 ) ) <= C27 by FINSEQ_5:17;
L67: C27 >= C25 by L66 , L63 , XXREAL_0:2;
L68: ( C27 - ( 0 ) ) >= ( C25 - 1 ) by L67 , XREAL_1:13;
L69: C26 <= C27 by L64 , L66 , XXREAL_0:2;
L70: ( C26 - C25 ) <= ( C27 - C25 ) by L69 , XREAL_1:9;
L71: ( ( C26 - C25 ) + 1 ) <= ( ( C27 - C25 ) + 1 ) by L70 , XREAL_1:6;
L72: ( C25 -' 1 ) = ( C25 - 1 ) by L61 , XREAL_1:233;
L73: ( C27 -' ( C25 -' 1 ) ) = ( C27 - ( C25 - 1 ) ) by L72 , L68 , XREAL_1:233
.= ( ( C27 - C25 ) + 1 );
L74: ( mid (( C24 | C27 ) , C25 , C26) ) = ( ( ( C24 | C27 ) /^ ( C25 -' 1 ) ) | ( ( C26 -' C25 ) + 1 ) ) by L62 , FINSEQ_6:def 3
.= ( ( ( C24 /^ ( C25 -' 1 ) ) | ( C27 -' ( C25 -' 1 ) ) ) | ( ( C26 -' C25 ) + 1 ) ) by FINSEQ_5:80
.= ( ( C24 /^ ( C25 -' 1 ) ) | ( ( C26 -' C25 ) + 1 ) ) by L73 , L65 , L71 , FINSEQ_5:77;
thus L75: thesis by L74 , L62 , FINSEQ_6:def 3;
end;
theorem
L76: (for R1 being set holds (for B28 being non  empty set holds (for B29 being (FinSequence of B28) holds (B29 = <* R1 *> implies R1 in B28))))
proof
let R1 being set;
let C28 being non  empty set;
let C29 being (FinSequence of C28);
L77: C29 is (Function of ( dom C29 ) , C28) by FINSEQ_2:26;
assume L78: C29 = <* R1 *>;
L79: 1 <= ( len C29 ) by L78 , FINSEQ_1:40;
L80: 1 in ( dom C29 ) by L79 , FINSEQ_3:25;
L81: ( C29 . 1 ) = R1 by L78 , FINSEQ_1:40;
thus L82: thesis by L81 , L80 , L77 , FUNCT_2:5;
end;
theorem
L83: (for R1 being set holds (for R2 being set holds (for B30 being non  empty set holds (for B31 being (FinSequence of B30) holds (B31 = <* R1 , R2 *> implies (R1 in B30 & R2 in B30))))))
proof
let R1 being set;
let R2 being set;
let C30 being non  empty set;
let C31 being (FinSequence of C30);
L84: C31 is (Function of ( dom C31 ) , C30) by FINSEQ_2:26;
assume L85: C31 = <* R1 , R2 *>;
L86: (1 in ( dom C31 ) & 2 in ( dom C31 )) by L85 , CALCUL_1:14;
L87: (( C31 . 1 ) = R1 & ( C31 . 2 ) = R2) by L85 , FINSEQ_1:44;
thus L88: thesis by L87 , L86 , L84 , FUNCT_2:5;
end;
theorem
L89: (for R1 being set holds (for R2 being set holds (for R3 being set holds (for B32 being non  empty set holds (for B33 being (FinSequence of B32) holds (B33 = <* R1 , R2 , R3 *> implies (R1 in B32 & R2 in B32 & R3 in B32)))))))
proof
let R1 being set;
let R2 being set;
let R3 being set;
let C32 being non  empty set;
let C33 being (FinSequence of C32);
L90: C33 is (Function of ( dom C33 ) , C32) by FINSEQ_2:26;
assume L91: C33 = <* R1 , R2 , R3 *>;
L92: (( C33 . 3 ) = R3 & 1 in ( dom C33 )) by L91 , FINSEQ_1:45 , TOPREAL3:1;
L93: (2 in ( dom C33 ) & 3 in ( dom C33 )) by L91 , TOPREAL3:1;
L94: (( C33 . 1 ) = R1 & ( C33 . 2 ) = R2) by L91 , FINSEQ_1:45;
thus L95: thesis by L94 , L92 , L93 , L90 , FUNCT_2:5;
end;
theorem
L96: (for R1 being set holds (for B34 being non  empty set holds (for B35 being (FinSequence of B34) holds (B35 = <* R1 *> implies ( B35 | 1 ) = <* R1 *>))))
proof
let R1 being set;
let C34 being non  empty set;
let C35 being (FinSequence of C34);
assume L97: C35 = <* R1 *>;
L98: ( len C35 ) <= 1 by L97 , FINSEQ_1:40;
thus L99: thesis by L98 , L97 , FINSEQ_1:58;
end;
theorem
L100: (for R1 being set holds (for R2 being set holds (for B36 being non  empty set holds (for B37 being (FinSequence of B36) holds (B37 = <* R1 , R2 *> implies ( B37 /^ 1 ) = <* R2 *>)))))
proof
let R1 being set;
let R2 being set;
let C36 being non  empty set;
let C37 being (FinSequence of C36);
L101: C37 is (Function of ( dom C37 ) , C36) by FINSEQ_2:26;
assume L102: C37 = <* R1 , R2 *>;
L103: (1 in ( dom C37 ) & 2 in ( dom C37 )) by L102 , CALCUL_1:14;
L104: (( C37 . 1 ) = R1 & ( C37 . 2 ) = R2) by L102 , FINSEQ_1:44;
reconsider D1 = R1 , D2 = R2 as (Element of C36) by L104 , L103 , L101 , FUNCT_2:5;
L105: ( C37 /^ 1 ) = ( <* D1 , D2 *> /^ 1 ) by L102
.= <* D2 *> by FINSEQ_6:46;
thus L106: thesis by L105;
end;
theorem
L107: (for R1 being set holds (for R2 being set holds (for R3 being set holds (for B38 being non  empty set holds (for B39 being (FinSequence of B38) holds (B39 = <* R1 , R2 , R3 *> implies ( B39 | 1 ) = <* R1 *>))))))
proof
let R1 being set;
let R2 being set;
let R3 being set;
let C38 being non  empty set;
let C39 being (FinSequence of C38);
assume L108: C39 = <* R1 , R2 , R3 *>;
L109: ( C39 | 1 ) = ( C39 | ( Seg 1 ) ) by FINSEQ_1:def 15
.= <* R1 *> by L108 , FINSEQ_6:4;
thus L110: thesis by L109;
end;
theorem
L111: (for R1 being set holds (for R2 being set holds (for R3 being set holds (for B40 being non  empty set holds (for B41 being (FinSequence of B40) holds (B41 = <* R1 , R2 , R3 *> implies ( B41 | 2 ) = <* R1 , R2 *>))))))
proof
let R1 being set;
let R2 being set;
let R3 being set;
let C40 being non  empty set;
let C41 being (FinSequence of C40);
assume L112: C41 = <* R1 , R2 , R3 *>;
L113: ( C41 | 2 ) = ( C41 | ( Seg 2 ) ) by FINSEQ_1:def 15
.= <* R1 , R2 *> by L112 , FINSEQ_6:5;
thus L114: thesis by L113;
end;
theorem
L115: (for R1 being set holds (for R2 being set holds (for R3 being set holds (for B42 being non  empty set holds (for B43 being (FinSequence of B42) holds (B43 = <* R1 , R2 , R3 *> implies ( B43 /^ 1 ) = <* R2 , R3 *>))))))
proof
let R1 being set;
let R2 being set;
let R3 being set;
let C42 being non  empty set;
let C43 being (FinSequence of C42);
assume L116: C43 = <* R1 , R2 , R3 *>;
reconsider D3 = R1 , D4 = R2 , D5 = R3 as (Element of C42) by L116 , L89;
L117: ( C43 . 3 ) = D5 by L116 , FINSEQ_1:45;
L118: (( C43 . 1 ) = D3 & ( C43 . 2 ) = D4) by L116 , FINSEQ_1:45;
thus L119: thesis by L118 , L116 , L117 , FINSEQ_6:47;
end;
theorem
L120: (for R1 being set holds (for R2 being set holds (for R3 being set holds (for B44 being non  empty set holds (for B45 being (FinSequence of B44) holds (B45 = <* R1 , R2 , R3 *> implies ( B45 /^ 2 ) = <* R3 *>))))))
proof
let R1 being set;
let R2 being set;
let R3 being set;
let C44 being non  empty set;
let C45 being (FinSequence of C44);
assume L121: C45 = <* R1 , R2 , R3 *>;
reconsider D6 = R1 , D7 = R2 , D8 = R3 as (Element of C44) by L121 , L89;
L122: ( C45 /^ 2 ) = ( ( <* D6 *> ^ <* D7 , D8 *> ) /^ ( 1 + 1 ) ) by L121 , FINSEQ_1:43
.= ( ( <* D6 *> ^ <* D7 , D8 *> ) /^ ( ( len <* D6 *> ) + 1 ) ) by FINSEQ_1:40
.= ( <* D7 , D8 *> /^ 1 ) by FINSEQ_5:36
.= <* D8 *> by FINSEQ_6:46;
thus L123: thesis by L122;
end;
theorem
L124: (for B46 being non  empty set holds (for B47 being (FinSequence of B46) holds (( len B47 ) = ( 0 ) implies ( Rev B47 ) = B47)))
proof
let C46 being non  empty set;
let C47 being (FinSequence of C46);
assume L125: ( len C47 ) = ( 0 );
L126: C47 = ( <*> C46 ) by L125
.= ( {} );
thus L127: thesis by L126;
end;
theorem
L128: (for B48 being non  empty set holds (for B49 being (FinSequence of B48) holds (for B50 being (Element of ( NAT )) holds (B50 <= ( len B49 ) implies ( Rev ( B49 /^ B50 ) ) = ( ( Rev B49 ) | ( ( len B49 ) -' B50 ) )))))
proof
let C48 being non  empty set;
let C49 being (FinSequence of C48);
let C50 being (Element of ( NAT ));
set D9 = ( Rev C49 );
L129: ( ( len C49 ) -' C50 ) <= ( len C49 ) by NAT_D:50;
L130: ( ( len C49 ) -' C50 ) <= ( len D9 ) by L129 , FINSEQ_5:def 3;
L131: ( ( len D9 ) -' C50 ) <= ( len D9 ) by L130 , FINSEQ_5:def 3;
L132: ( len ( D9 | ( ( len C49 ) -' C50 ) ) ) = ( len ( D9 | ( ( len D9 ) -' C50 ) ) ) by FINSEQ_5:def 3
.= ( ( len D9 ) -' C50 ) by L131 , FINSEQ_1:59;
assume L133: C50 <= ( len C49 );
L134: ( ( len C49 ) - C50 ) >= ( 0 ) by L133 , XREAL_1:48;
L135: ( ( len C49 ) - C50 ) = ( ( len C49 ) -' C50 ) by L134 , XREAL_0:def 2;
L136: (for B51 being Nat holds ((1 <= B51 & B51 <= ( len ( Rev ( C49 /^ C50 ) ) )) implies ( ( Rev ( C49 /^ C50 ) ) . B51 ) = ( ( D9 | ( ( len C49 ) -' C50 ) ) . B51 )))
proof
let C51 being Nat;
assume that
L137: 1 <= C51
and
L138: C51 <= ( len ( Rev ( C49 /^ C50 ) ) );
L139: C51 in ( dom ( Rev ( C49 /^ C50 ) ) ) by L137 , L138 , FINSEQ_3:25;
L140: ( ( Rev ( C49 /^ C50 ) ) . C51 ) = ( ( C49 /^ C50 ) . ( ( ( len ( C49 /^ C50 ) ) - C51 ) + 1 ) ) by L139 , FINSEQ_5:def 3
.= ( ( C49 /^ C50 ) . ( ( ( ( len C49 ) - C50 ) - C51 ) + 1 ) ) by L133 , RFINSEQ:def 1;
L141: ( 0 ) <= C50 by NAT_1:2;
L142: ( ( len C49 ) + ( 0 ) ) <= ( ( len C49 ) + C50 ) by L141 , XREAL_1:7;
L143: ( ( len C49 ) - C50 ) <= ( ( ( len C49 ) + C50 ) - C50 ) by L142 , XREAL_1:9;
L144: ( len ( C49 /^ C50 ) ) <= ( len C49 ) by L143 , L133 , RFINSEQ:def 1;
L145: ( len ( Rev ( C49 /^ C50 ) ) ) <= ( len C49 ) by L144 , FINSEQ_5:def 3;
L146: C51 <= ( len C49 ) by L145 , L138 , XXREAL_0:2;
L147: ( ( len C49 ) - C51 ) >= ( 0 ) by L146 , XREAL_1:48;
L148: ( ( len C49 ) - C51 ) = ( ( len C49 ) -' C51 ) by L147 , XREAL_0:def 2;
L149: ( C51 - 1 ) >= ( 0 ) by L137 , XREAL_1:48;
L150: ( ( len C49 ) + ( 0 ) ) <= ( ( len C49 ) + ( C51 - 1 ) ) by L149 , XREAL_1:7;
L151: ( ( len C49 ) - ( C51 - 1 ) ) <= ( ( ( len C49 ) + ( C51 - 1 ) ) - ( C51 - 1 ) ) by L150 , XREAL_1:9;
L152: ( ( ( len C49 ) - C51 ) + 1 ) <= ( len C49 ) by L151;
L153: ( ( ( len C49 ) -' C51 ) + 1 ) <= ( len C49 ) by L152 , L147 , XREAL_0:def 2;
L154: ( ( ( len C49 ) -' C51 ) + 1 ) > ( 0 );
L155: ( ( ( len C49 ) - C51 ) + 1 ) >= ( ( 0 ) + 1 ) by L154 , L148 , NAT_1:13;
L156: ( ( ( len C49 ) - C51 ) + 1 ) in ( dom C49 ) by L155 , L148 , L153 , FINSEQ_3:25;
L157: C49 = ( C49 /^ ( 0 ) ) by FINSEQ_5:28;
L158: C51 in ( dom C49 ) by L137 , L146 , FINSEQ_3:25;
L159: C51 in ( dom ( Rev C49 ) ) by L158 , FINSEQ_5:57;
L160: C51 <= ( len ( C49 /^ C50 ) ) by L138 , FINSEQ_5:def 3;
L161: C51 <= ( ( len C49 ) - C50 ) by L160 , L133 , RFINSEQ:def 1;
L162: ( ( ( len C49 ) -' C50 ) - C51 ) >= ( 0 ) by L161 , L135 , XREAL_1:48;
L163: ( ( ( len C49 ) -' C50 ) -' C51 ) = ( ( ( len C49 ) -' C50 ) - C51 ) by L162 , XREAL_0:def 2;
L164: C51 <= ( ( len C49 ) -' C50 ) by L161 , XREAL_0:def 2;
L165: ( ( D9 | ( ( len C49 ) -' C50 ) ) . C51 ) = ( ( Rev C49 ) . C51 ) by L164 , FINSEQ_3:112
.= ( C49 . ( ( ( len C49 ) - C51 ) + 1 ) ) by L159 , FINSEQ_5:def 3;
L166: ( C50 + ( ( ( ( len C49 ) -' C50 ) -' C51 ) + 1 ) ) = ( C50 + ( ( ( ( len C49 ) - C50 ) - C51 ) + 1 ) ) by L135 , L162 , XREAL_0:def 2
.= ( ( ( ( ( len C49 ) - C50 ) + C50 ) - C51 ) + 1 );
L167: ( C51 - 1 ) >= ( 0 ) by L137 , XREAL_1:48;
L168: ( ( ( len C49 ) - C50 ) + ( 0 ) ) <= ( ( ( len C49 ) - C50 ) + ( C51 - 1 ) ) by L167 , XREAL_1:7;
L169: ( ( ( len C49 ) - C50 ) - ( C51 - 1 ) ) <= ( ( ( ( len C49 ) - C50 ) + ( C51 - 1 ) ) - ( C51 - 1 ) ) by L168 , XREAL_1:9;
L170: (( ( ( ( len C49 ) -' C50 ) -' C51 ) + 1 ) >= ( ( 0 ) + 1 ) & ( ( ( ( len C49 ) -' C50 ) -' C51 ) + 1 ) <= ( len ( C49 /^ C50 ) )) by L169 , L133 , L135 , L163 , RFINSEQ:def 1 , XREAL_1:7;
L171: ( ( ( ( len C49 ) - C50 ) - C51 ) + 1 ) in ( Seg ( len ( C49 /^ C50 ) ) ) by L170 , L135 , L163 , FINSEQ_1:1;
L172: ( ( ( ( len C49 ) - C50 ) - C51 ) + 1 ) in ( dom ( C49 /^ C50 ) ) by L171 , FINSEQ_1:def 3;
L173: ( ( C49 /^ C50 ) . ( ( ( ( len C49 ) - C50 ) - C51 ) + 1 ) ) = ( ( C49 /^ C50 ) /. ( ( ( ( len C49 ) -' C50 ) -' C51 ) + 1 ) ) by L172 , L135 , L163 , PARTFUN1:def 6
.= ( ( C49 /^ ( 0 ) ) /. ( C50 + ( ( ( ( len C49 ) -' C50 ) -' C51 ) + 1 ) ) ) by L135 , L163 , L172 , L157 , FINSEQ_5:27
.= ( C49 . ( ( ( len C49 ) - C51 ) + 1 ) ) by L166 , L156 , L157 , PARTFUN1:def 6;
thus L174: thesis by L173 , L140 , L165;
end;
L175: ( len ( Rev ( C49 /^ C50 ) ) ) = ( len ( C49 /^ C50 ) ) by FINSEQ_5:def 3
.= ( ( len C49 ) -' C50 ) by RFINSEQ:29
.= ( len ( D9 | ( ( len C49 ) -' C50 ) ) ) by L132 , FINSEQ_5:def 3;
thus L176: thesis by L175 , L136 , FINSEQ_1:14;
end;
theorem
L177: (for B52 being non  empty set holds (for B53 , B54 being (FinSequence of B52) holds (((not B54 is_substring_of B53 , 1) & B54 separates_uniquely ) implies ( instr (1 , ( B53 ^ B54 ) , B54) ) = ( ( len B53 ) + 1 ))))
proof
let C52 being non  empty set;
let C53 , C54 being (FinSequence of C52);
assume that
L178: (not C54 is_substring_of C53 , 1)
and
L179: C54 separates_uniquely ;
L180: ( len C54 ) > ( 0 ) by L178 , FINSEQ_8:def 7;
L181: ( len C54 ) >= ( ( 0 ) + 1 ) by L180 , NAT_1:13;
L182: (for B55 being (Element of ( NAT )) holds ((B55 >= 1 & B55 > ( 0 ) & C54 is_preposition_of ( ( C53 ^ C54 ) /^ ( B55 -' 1 ) )) implies B55 >= ( ( len C53 ) + 1 )))
proof
set D10 = ( ( len C53 ) + 1 );
set D11 = ( ( D10 + ( len C54 ) ) -' 1 );
let C55 being (Element of ( NAT ));
assume that
L183: C55 >= 1
and
L184: C55 > ( 0 )
and
L185: C54 is_preposition_of ( ( C53 ^ C54 ) /^ ( C55 -' 1 ) );
L186: (( len C54 ) > ( 0 ) implies (1 <= ( len ( ( C53 ^ C54 ) /^ ( C55 -' 1 ) ) ) & ( mid (( ( C53 ^ C54 ) /^ ( C55 -' 1 ) ) , 1 , ( len C54 )) ) = C54)) by L185 , FINSEQ_8:def 8;
L187: ( ( 0 ) + C55 ) < ( ( len C54 ) + C55 ) by L180 , XREAL_1:8;
L188: ( C55 + 1 ) <= ( ( len C54 ) + C55 ) by L187 , NAT_1:13;
L189: C55 <= ( ( ( len C54 ) + C55 ) - 1 ) by L188 , XREAL_1:19;
L190: 1 <= ( ( len C54 ) + C55 ) by L183 , L187 , XXREAL_0:2;
L191: ( ( ( len C54 ) + C55 ) - 1 ) >= ( 0 ) by L190 , XREAL_1:48;
L192: ( ( ( len C54 ) + C55 ) -' 1 ) = ( ( ( len C54 ) + C55 ) - 1 ) by L191 , XREAL_0:def 2;
L193: ( ( len C54 ) - 1 ) >= ( 0 ) by L181 , XREAL_1:48;
L194: ( ( ( ( ( len C54 ) + C55 ) -' 1 ) -' C55 ) + 1 ) = ( ( ( ( ( len C54 ) + C55 ) - 1 ) - C55 ) + 1 ) by L193 , L192 , XREAL_0:def 2
.= ( len C54 );
L195: ( ( ( C53 ^ C54 ) /^ ( C55 -' 1 ) ) | ( ( ( ( ( len C54 ) + C55 ) -' 1 ) -' C55 ) + 1 ) ) = C54 by L194 , L181 , L186 , FINSEQ_6:116;
L196: ( ( C55 + ( len C54 ) ) - 1 ) >= ( 0 ) by L183 , NAT_1:12 , XREAL_1:48;
L197: ( ( C55 + ( len C54 ) ) -' 1 ) = ( ( C55 + ( len C54 ) ) - 1 ) by L196 , XREAL_0:def 2;
L198: ( ( D10 + ( len C54 ) ) -' 1 ) = ( ( ( ( len C53 ) + ( len C54 ) ) + 1 ) -' 1 )
.= ( ( len C53 ) + ( len C54 ) ) by NAT_D:34;
L199: D11 = ( ( ( ( len C54 ) + ( len C53 ) ) + 1 ) -' 1 )
.= ( ( len C54 ) + ( len C53 ) ) by NAT_D:34;
L200: ( mid (( C53 ^ C54 ) , D10 , ( ( D10 + ( len C54 ) ) -' 1 )) ) = C54 by L199 , L181 , L30;
L201: ( smid (( C53 ^ C54 ) , D10 , ( ( D10 + ( len C54 ) ) -' 1 )) ) = C54 by L200 , L181 , L198 , FINSEQ_8:4 , XREAL_1:7;
L202: (( len C54 ) > ( 0 ) implies ( len C54 ) >= ( ( 0 ) + 1 )) by NAT_1:13;
L203: ( C55 + ( len C54 ) ) >= ( C55 + 1 ) by L202 , L178 , FINSEQ_8:def 7 , XREAL_1:7;
L204: ( ( C55 + ( len C54 ) ) - 1 ) >= ( ( C55 + 1 ) - 1 ) by L203 , XREAL_1:9;
L205: ( C55 + ( len C54 ) ) >= ( C55 + 1 ) by L178 , L202 , FINSEQ_8:def 7 , XREAL_1:7;
L206: ( ( C55 + ( len C54 ) ) - 1 ) >= ( ( C55 + 1 ) - 1 ) by L205 , XREAL_1:9;
L207: ( C55 - 1 ) >= ( 0 ) by L183 , XREAL_1:48;
L208: ( C55 -' 1 ) = ( C55 - 1 ) by L207 , XREAL_0:def 2;
L209: ( ( C55 -' 1 ) + ( len C54 ) ) = ( ( C55 - 1 ) + ( len C54 ) ) by L207 , XREAL_0:def 2
.= ( ( ( len C54 ) + C55 ) -' 1 ) by L191 , XREAL_0:def 2;
L210: ( mid (( C53 ^ C54 ) , C55 , ( ( C55 -' 1 ) + ( len C54 ) )) ) = C54 by L209 , L189 , L192 , L195 , FINSEQ_6:def 3;
L211: ( ( C55 -' 1 ) + ( len C54 ) ) = ( ( C55 - 1 ) + ( len C54 ) ) by L207 , XREAL_0:def 2
.= ( ( C55 + ( len C54 ) ) - 1 );
L212: ( smid (( C53 ^ C54 ) , C55 , ( ( C55 + ( len C54 ) ) -' 1 )) ) = C54 by L211 , L197 , L206 , L210 , FINSEQ_8:4;
L213:
now
assume L214: C55 < D10;
L215: ( D10 - C55 ) > ( 0 ) by L214 , XREAL_1:50;
L216: ( D10 -' C55 ) = ( ( ( len C53 ) + 1 ) - C55 ) by L215 , XREAL_0:def 2;
L217: ( ( D10 + ( len C54 ) ) -' 1 ) <= ( len ( C53 ^ C54 ) ) by L198 , FINSEQ_1:22;
L218: ( D10 -' C55 ) >= ( len C54 ) by L217 , L179 , L183 , L201 , L212 , L214 , FINSEQ_8:def 6;
L219: ( ( ( ( len C53 ) + 1 ) - C55 ) + C55 ) >= ( ( len C54 ) + C55 ) by L218 , L216 , XREAL_1:7;
L220: ( ( ( len C53 ) + 1 ) - 1 ) >= ( ( C55 + ( len C54 ) ) - 1 ) by L219 , XREAL_1:9;
L221: ( mid (C53 , C55 , ( ( C55 -' 1 ) + ( len C54 ) )) ) = C54 by L220 , L183 , L208 , L204 , L210 , L43;
L222: C55 > ( len C53 ) by L221 , L178 , L183 , FINSEQ_8:def 7;
thus L223: contradiction by L222 , L214 , NAT_1:13;
end;
thus L224: thesis by L213;
end;
L225: ( ( C53 ^ C54 ) /^ ( len C53 ) ) = C54 by FINSEQ_5:37;
L226: (( ( len C53 ) + 1 ) <> ( 0 ) implies (1 <= ( ( len C53 ) + 1 ) & C54 is_preposition_of ( ( C53 ^ C54 ) /^ ( ( ( len C53 ) + 1 ) -' 1 ) ) & (for B56 being (Element of ( NAT )) holds ((B56 >= 1 & B56 > ( 0 ) & C54 is_preposition_of ( ( C53 ^ C54 ) /^ ( B56 -' 1 ) )) implies B56 >= ( ( len C53 ) + 1 ))))) by L225 , L182 , NAT_1:11 , NAT_D:34;
thus L227: thesis by L226 , FINSEQ_8:def 10 , NAT_1:11;
end;
theorem
L228: (for B57 being non  empty set holds (for B58 , B59 being (FinSequence of B57) holds (((not B59 is_substring_of B58 , 1) & B59 separates_uniquely ) implies ( B58 ^ B59 ) is_terminated_by B59)))
proof
let C56 being non  empty set;
let C57 , C58 being (FinSequence of C56);
L229: ( ( ( len ( C57 ^ C58 ) ) + 1 ) -' ( len C58 ) ) = ( ( ( ( len C57 ) + ( len C58 ) ) + 1 ) -' ( len C58 ) ) by FINSEQ_1:22
.= ( ( ( len C58 ) + ( ( len C57 ) + 1 ) ) -' ( len C58 ) )
.= ( ( len C57 ) + 1 ) by NAT_D:34;
L230: ( len C58 ) <= ( ( len C57 ) + ( len C58 ) ) by NAT_1:12;
L231: ( len C58 ) <= ( len ( C57 ^ C58 ) ) by L230 , FINSEQ_1:22;
assume L232: ((not C58 is_substring_of C57 , 1) & C58 separates_uniquely );
L233: ( instr (1 , ( C57 ^ C58 ) , C58) ) = ( ( ( len ( C57 ^ C58 ) ) + 1 ) -' ( len C58 ) ) by L232 , L229 , L177;
thus L234: thesis by L233 , L231 , FINSEQ_8:def 12;
end;
notation
let C59 being set;
synonym File of C59 for FinSequence of C59;
end;
definition
let C60 being non  empty set;
let C61 , C62 , C63 being (File of C60);
pred C61 is_a_record_of C62 , C63
means
:L236: ((( C63 ^ C61 ) is_substring_of ( addcr (C62 , C63) ) , 1 or C61 is_preposition_of ( addcr (C62 , C63) )) & C61 is_terminated_by C63)
;end;
theorem
L238: (for B60 being non  empty set holds (for B61 being (FinSequence of B60) holds (( ovlpart (( <*> B60 ) , B61) ) = ( <*> B60 ) & ( ovlpart (B61 , ( <*> B60 )) ) = ( <*> B60 ))))
proof
let C64 being non  empty set;
let C65 being (FinSequence of C64);
L239: (( ( <*> C64 ) ^ C65 ) = C65 & ( C65 ^ ( <*> C64 ) ) = C65) by FINSEQ_1:34;
thus L240: thesis by L239 , FINSEQ_8:14;
end;
theorem
L241: (for B62 being non  empty set holds (for B63 being (FinSequence of B62) holds B63 is_a_record_of ( <*> B62 ) , B63))
proof
let C66 being non  empty set;
let C67 being (FinSequence of C66);
L242: C67 is_terminated_by C67 by FINSEQ_8:28;
L243: ( addcr (( <*> C66 ) , C67) ) = ( ovlcon (( <*> C66 ) , C67) ) by FINSEQ_8:def 11
.= ( ( <*> C66 ) ^ ( C67 /^ ( len ( ovlpart (( <*> C66 ) , C67) ) ) ) ) by FINSEQ_8:def 3
.= ( ( <*> C66 ) ^ ( C67 /^ ( len ( <*> C66 ) ) ) ) by L238
.= ( ( <*> C66 ) ^ ( C67 /^ ( 0 ) ) )
.= ( C67 /^ ( 0 ) ) by FINSEQ_1:34
.= C67 by FINSEQ_5:28;
thus L244: thesis by L243 , L242 , L236;
end;
theorem
L245: (for B64 being non  empty set holds (for B65 , B66 being set holds (for B67 , B68 , B69 being (File of B64) holds ((B65 <> B66 & B69 = <* B66 *> & B67 = <* B66 , B65 , B66 *> & B68 = <* B65 , B66 *>) implies (B69 is_a_record_of B67 , B69 & B68 is_a_record_of B67 , B69)))))
proof
let C68 being non  empty set;
let C69 , C70 being set;
let C71 , C72 , C73 being (File of C68);
assume that
L246: C69 <> C70
and
L247: C73 = <* C70 *>
and
L248: C71 = <* C70 , C69 , C70 *>
and
L249: C72 = <* C69 , C70 *>;
reconsider D12 = C70 , D13 = C69 as (Element of C68) by L248 , L89;
L250: (( C73 . 1 ) = C70 & ( len C73 ) = 1) by L247 , FINSEQ_1:40;
L251: C71 = ( <* C70 , C69 *> ^ <* C70 *> ) by L248 , FINSEQ_1:43
.= ( ( C71 | 2 ) ^ C73 ) by L247 , L248 , L111;
L252: ( ovlpart (C71 , C73) ) = C73 by L251 , FINSEQ_8:14;
L253: ( C73 /^ ( len ( ovlpart (C71 , C73) ) ) ) = ( {} ) by L252 , REVROT_1:2;
L254: ( C71 ^ ( C73 /^ ( len ( ovlpart (C71 , C73) ) ) ) ) = C71 by L253 , FINSEQ_1:34;
L255: ( ovlcon (C71 , C73) ) = C71 by L254 , FINSEQ_8:def 3;
L256: C71 = ( C73 ^ C72 ) by L247 , L248 , L249 , FINSEQ_1:43;
L257: ( len C71 ) = ( ( len C73 ) + ( len C72 ) ) by L256 , FINSEQ_1:22
.= ( 1 + ( len <* C69 , C70 *> ) ) by L247 , L249 , FINSEQ_1:40
.= ( 1 + 2 ) by FINSEQ_1:44
.= 3;
L258: ( C73 ^ C72 ) is_substring_of C71 , 1 by L257 , L256 , FINSEQ_8:19;
L259: ( C73 ^ C72 ) is_substring_of ( addcr (C71 , C73) ) , 1 by L258 , L255 , FINSEQ_8:def 11;
L260: ( len C73 ) = 1 by L247 , FINSEQ_1:40;
L261: ( mid (C71 , 1 , ( len C73 )) ) = ( ( C71 /^ ( 1 -' 1 ) ) | ( ( 1 -' 1 ) + 1 ) ) by L260 , FINSEQ_6:def 3
.= ( ( C71 /^ ( 1 -' 1 ) ) | ( 1 + ( 0 ) ) ) by NAT_2:8
.= ( ( C71 /^ ( 0 ) ) | 1 ) by NAT_D:34
.= ( C71 | 1 ) by FINSEQ_5:28
.= ( <* D12 , D13 , D12 *> | ( Seg 1 ) ) by L248 , FINSEQ_1:def 15
.= C73 by L247 , FINSEQ_6:4;
L262: C73 is_preposition_of C71 by L261 , L257 , FINSEQ_8:def 8;
L263: C73 is_preposition_of ( addcr (C71 , C73) ) by L262 , L255 , FINSEQ_8:def 11;
L264: ( C72 /^ ( 1 -' 1 ) ) = ( C72 /^ ( ( ( 0 ) + 1 ) -' 1 ) )
.= ( C72 /^ ( 0 ) ) by NAT_D:34
.= C72 by FINSEQ_5:28;
L265: ( ( C72 /^ ( 1 -' 1 ) ) . 1 ) = C69 by L264 , L249 , FINSEQ_1:44;
L266: (not C73 is_preposition_of ( C72 /^ ( 1 -' 1 ) )) by L265 , L246 , L250 , FINSEQ_8:21;
L267: (for B70 being (Element of ( NAT )) holds ((B70 >= 1 & B70 > ( 0 ) & C73 is_preposition_of ( C72 /^ ( B70 -' 1 ) )) implies B70 >= 2))
proof
let C74 being (Element of ( NAT ));
assume that
L268: C74 >= 1
and
L269: C74 > ( 0 )
and
L270: C73 is_preposition_of ( C72 /^ ( C74 -' 1 ) );
L271: C74 > 1 by L266 , L268 , L270 , XXREAL_0:1;
L272: ( 1 + 1 ) <= C74 by L271 , NAT_1:13;
thus L273: thesis by L272;
end;
L274: ( C72 /^ ( 2 -' 1 ) ) = ( C72 /^ ( ( 1 + 1 ) -' 1 ) )
.= ( <* D13 , D12 *> /^ 1 ) by L249 , NAT_D:34
.= C73 by L247 , FINSEQ_6:46;
L275: ( instr (1 , C72 , C73) ) = 2 by L274 , L267 , FINSEQ_8:def 10;
L276: ( len C72 ) = 2 by L249 , FINSEQ_1:44;
L277: ( ( ( len C72 ) + 1 ) -' ( len C73 ) ) = 2 by L276 , L260 , NAT_D:34;
L278: (C73 is_terminated_by C73 & C72 is_terminated_by C73) by L277 , L260 , L276 , L275 , FINSEQ_8:28 , FINSEQ_8:def 12;
thus L279: thesis by L278 , L263 , L259 , L236;
end;
theorem
L280: (for B71 being non  empty set holds (for B72 , B73 being (File of B71) holds B72 is_preposition_of ( B72 ^ B73 )))
proof
let C75 being non  empty set;
let C76 , C77 being (File of C75);
per cases ;
suppose L281: ( len C76 ) > ( 0 );

L282: ( len C77 ) >= ( 0 ) by NAT_1:2;
L283: ( ( 0 ) + 1 ) <= ( ( len C76 ) + ( len C77 ) ) by L282 , L281 , NAT_1:13;
L284: 1 <= ( len ( C76 ^ C77 ) ) by L283 , FINSEQ_1:22;
L285: ( ( 0 ) + 1 ) <= ( len C76 ) by L281 , NAT_1:13;
L286: ( mid (( C76 ^ C77 ) , 1 , ( len C76 )) ) = C76 by L285 , FINSEQ_8:1;
thus L287: thesis by L286 , L284 , FINSEQ_8:def 8;
end;
suppose L288: ( len C76 ) <= ( 0 );

thus L289: thesis by L288 , FINSEQ_8:def 8;
end;
end;
theorem
L291: (for B74 being non  empty set holds (for B75 , B76 being (File of B74) holds B75 is_preposition_of ( addcr (B75 , B76) )))
proof
let C78 being non  empty set;
let C79 , C80 being (File of C78);
L292: ( addcr (C79 , C80) ) = ( ovlcon (C79 , C80) ) by FINSEQ_8:def 11
.= ( C79 ^ ( C80 /^ ( len ( ovlpart (C79 , C80) ) ) ) ) by FINSEQ_8:def 3;
thus L293: thesis by L292 , L280;
end;
theorem
L294: (for B77 being non  empty set holds (for B78 , B79 being (File of B77) holds (B79 is_postposition_of B78 implies ( 0 ) <= ( ( len B78 ) - ( len B79 ) ))))
proof
let C81 being non  empty set;
let C82 , C83 being (File of C81);
assume L295: C83 is_postposition_of C82;
L296: ( len C83 ) <= ( len C82 ) by L295 , FINSEQ_8:23;
L297: ( ( len C83 ) - ( len C83 ) ) <= ( ( len C82 ) - ( len C83 ) ) by L296 , XREAL_1:9;
thus L298: thesis by L297;
end;
theorem
L299: (for B80 being non  empty set holds (for B81 , B82 being (File of B80) holds (B81 is_postposition_of B82 implies B82 = ( addcr (B82 , B81) ))))
proof
let C84 being non  empty set;
let C85 , C86 being (File of C84);
L300: ( len C86 ) = ( len ( Rev C86 ) ) by FINSEQ_5:def 3;
assume L301: C85 is_postposition_of C86;
L302: (( len C85 ) = ( len ( Rev C85 ) ) & ( Rev C85 ) is_preposition_of ( Rev C86 )) by L301 , FINSEQ_5:def 3 , FINSEQ_8:def 9;
L303: ( 0 ) <= ( ( len C86 ) - ( len C85 ) ) by L301 , L294;
L304: ( ( 0 ) + ( len C85 ) ) <= ( ( ( len C86 ) - ( len C85 ) ) + ( len C85 ) ) by L303 , XREAL_1:7;
per cases ;
suppose L305: ( len C85 ) > ( 0 );

L306: ( Rev ( mid (( Rev C86 ) , 1 , ( len C85 )) ) ) = ( Rev ( Rev C85 ) ) by L305 , L302 , FINSEQ_8:def 8;
L307: ( mid (( Rev C86 ) , ( len C85 ) , 1) ) = ( Rev ( Rev C85 ) ) by L306 , JORDAN4:18
.= C85;
L308: ( len ( Rev C86 ) ) = ( ( ( len ( Rev C86 ) ) - ( len C85 ) ) + ( len C85 ) );
L309: (( mid (C86 , ( ( ( len C86 ) + 1 ) -' ( len C85 ) ) , ( len C86 )) ) = C85 & ( len C85 ) >= ( ( 0 ) + 1 )) by L301 , L305 , FINSEQ_8:24 , NAT_1:13;
L310:
now
per cases ;
case L311: ( len C85 ) > 1;
L312: ( len C85 ) >= ( 1 + 1 ) by L311 , NAT_1:13;
L313: ( ( len C85 ) - 1 ) >= ( ( 1 + 1 ) - 1 ) by L312 , XREAL_1:9;
L314: ( ( ( len C85 ) -' 1 ) + 1 ) = ( len C85 ) by L313 , NAT_D:43;
L315: ( ( len ( Rev C86 ) ) -' ( len C85 ) ) = ( ( len ( Rev C86 ) ) - ( len C85 ) ) by L300 , L304 , XREAL_1:233;
L316: ( mid (( Rev C86 ) , ( len C85 ) , 1) ) = ( Rev ( ( ( Rev C86 ) /^ ( 1 -' 1 ) ) | ( ( ( len C85 ) -' 1 ) + 1 ) ) ) by L311 , FINSEQ_6:def 3
.= ( Rev ( ( ( Rev C86 ) /^ ( 0 ) ) | ( len C85 ) ) ) by L314 , NAT_2:8
.= ( Rev ( ( Rev C86 ) | ( len C85 ) ) ) by FINSEQ_5:28
.= ( ( Rev ( Rev C86 ) ) /^ ( ( len ( Rev C86 ) ) -' ( len C85 ) ) ) by L308 , L315 , FINSEQ_6:85
.= ( C86 /^ ( ( len C86 ) -' ( len C85 ) ) ) by L300;
L317: ( ovlpart (C86 , C85) ) = ( ovlpart (( ( C86 | ( ( len C86 ) -' ( len C85 ) ) ) ^ C85 ) , C85) ) by L316 , L307 , RFINSEQ:8
.= C85 by FINSEQ_8:14;
L318: ( ovlcon (C86 , C85) ) = ( C86 ^ ( C85 /^ ( len ( ovlpart (C86 , C85) ) ) ) ) by FINSEQ_8:def 3
.= ( C86 ^ ( {} ) ) by L317 , REVROT_1:2
.= C86 by FINSEQ_1:34;
thus L319: thesis by L318 , FINSEQ_8:def 11;
end;
case L320: ( len C85 ) <= 1;
L321: C85 = ( mid (C86 , ( ( ( len C86 ) + 1 ) -' 1 ) , ( len C86 )) ) by L320 , L309 , XXREAL_0:1
.= ( mid (C86 , ( len C86 ) , ( len C86 )) ) by NAT_D:34
.= ( C86 /^ ( ( len C86 ) -' 1 ) ) by FINSEQ_6:117;
L322: C86 = ( ( C86 | ( ( len C86 ) -' 1 ) ) ^ C85 ) by L321 , RFINSEQ:8;
L323: ( C85 /^ ( len C85 ) ) = ( {} ) by REVROT_1:2;
L324: ( ovlcon (C86 , C85) ) = ( C86 ^ ( C85 /^ ( len ( ovlpart (C86 , C85) ) ) ) ) by FINSEQ_8:def 3
.= ( C86 ^ ( C85 /^ ( len C85 ) ) ) by L322 , FINSEQ_8:14
.= C86 by L323 , FINSEQ_1:34;
thus L325: thesis by L324 , FINSEQ_8:def 11;
end;
end;
thus L327: thesis by L310;
end;
suppose L328: ( len C85 ) <= ( 0 );

L329: C85 = ( {} ) by L328 , NAT_1:2;
L330: ( len ( ovlpart (C86 , C85) ) ) = ( len ( <*> C84 ) ) by L329 , L238
.= ( 0 );
thus L331: ( addcr (C86 , C85) ) = ( ovlcon (C86 , C85) ) by FINSEQ_8:def 11
.= ( C86 ^ ( C85 /^ ( len ( ovlpart (C86 , C85) ) ) ) ) by FINSEQ_8:def 3
.= ( C86 ^ C85 ) by L330 , FINSEQ_5:28
.= C86 by L329 , FINSEQ_1:34;
end;
end;
theorem
L333: (for B83 being non  empty set holds (for B84 , B85 being (File of B83) holds (B85 is_terminated_by B84 implies B85 = ( addcr (B85 , B84) ))))
proof
let C87 being non  empty set;
let C88 , C89 being (File of C87);
assume L334: C89 is_terminated_by C88;
per cases ;
suppose L335: ( len C88 ) <= ( 0 );

L336: ( len C88 ) = ( 0 ) by L335 , NAT_1:2;
L337: ( len ( Rev C88 ) ) = ( 0 ) by L336 , FINSEQ_5:def 3;
L338: ( Rev C88 ) is_preposition_of ( Rev C89 ) by L337 , FINSEQ_8:def 8;
L339: C88 is_postposition_of C89 by L338 , FINSEQ_8:def 9;
thus L340: thesis by L339 , L299;
end;
suppose L341: ( len C88 ) > ( 0 );

L342: ( 0 ) < ( len C89 ) by L341 , L334 , FINSEQ_8:def 12;
L343: ( ( 0 ) + 1 ) <= ( len C89 ) by L342 , NAT_1:13;
L344: 1 <= ( len ( Rev C89 ) ) by L343 , FINSEQ_5:def 3;
L345: ( ( 0 ) + 1 ) <= ( len C88 ) by L341 , NAT_1:13;
L346: ( ( len C88 ) - 1 ) >= ( 0 ) by L345 , XREAL_1:48;
L347: ( ( len C88 ) -' 1 ) = ( ( len C88 ) - 1 ) by L346 , XREAL_0:def 2;
L348: ( len C89 ) >= ( len C88 ) by L334 , L341 , FINSEQ_8:def 12;
L349: ( ( len C89 ) + 1 ) > ( len C88 ) by L348 , NAT_1:13;
L350: ( ( ( len C89 ) + 1 ) - ( len C88 ) ) > ( 0 ) by L349 , XREAL_1:50;
L351: ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) = ( ( ( len C89 ) + 1 ) - ( len C88 ) ) by L350 , XREAL_0:def 2;
L352: ( ( len C89 ) - ( len C88 ) ) >= ( 0 ) by L348 , XREAL_1:48;
L353: ( ( len C89 ) - ( len C88 ) ) = ( ( len C89 ) -' ( len C88 ) ) by L352 , XREAL_0:def 2;
L354: (( len ( C89 /^ ( ( len C89 ) -' ( len C88 ) ) ) ) = ( ( len C89 ) -' ( ( len C89 ) -' ( len C88 ) ) ) & ( ( len C89 ) - ( ( len C89 ) -' ( len C88 ) ) ) = ( ( len C89 ) -' ( ( len C89 ) -' ( len C88 ) ) )) by L353 , L341 , RFINSEQ:29 , XREAL_0:def 2;
L355: ( instr (1 , C89 , C88) ) = ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) by L334 , L341 , FINSEQ_8:def 12;
L356: C88 is_preposition_of ( C89 /^ ( ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) -' 1 ) ) by L355 , L350 , L351 , FINSEQ_8:def 10;
L357: ( mid (( C89 /^ ( ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) -' 1 ) ) , 1 , ( len C88 )) ) = C88 by L356 , L341 , FINSEQ_8:def 8;
L358: ( ( ( C89 /^ ( ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C88 ) -' 1 ) + 1 ) ) = C88 by L357 , L345 , FINSEQ_6:def 3;
L359: ( ( ( C89 /^ ( ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) -' 1 ) ) /^ ( 0 ) ) | ( ( ( len C88 ) -' 1 ) + 1 ) ) = C88 by L358 , NAT_2:8;
L360: ( ( len C89 ) - ( ( len C89 ) -' ( len C88 ) ) ) >= ( 0 ) by NAT_D:35 , XREAL_1:48;
L361: ( ( len C89 ) -' ( ( len C89 ) -' ( len C88 ) ) ) = ( ( len C89 ) - ( ( len C89 ) -' ( len C88 ) ) ) by L360 , XREAL_0:def 2
.= ( ( len C89 ) - ( ( len C89 ) - ( len C88 ) ) ) by L352 , XREAL_0:def 2
.= ( len C88 );
L362: ( ( ( len C89 ) + 1 ) - ( len C88 ) ) >= ( ( 0 ) + 1 ) by L350 , L351 , NAT_1:13;
L363: ( ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) - 1 ) >= ( 0 ) by L362 , L351 , XREAL_1:48;
L364: ( ( ( ( len C89 ) + 1 ) -' ( len C88 ) ) -' 1 ) = ( ( len C89 ) - ( len C88 ) ) by L363 , L351 , XREAL_0:def 2;
L365: ( ( C89 /^ ( ( len C89 ) -' ( len C88 ) ) ) | ( len C88 ) ) = C88 by L364 , L347 , L353 , L359 , FINSEQ_5:28;
L366: ( mid (( Rev C89 ) , 1 , ( len C88 )) ) = ( ( ( Rev C89 ) /^ ( 1 -' 1 ) ) | ( ( ( len C88 ) -' 1 ) + 1 ) ) by L345 , FINSEQ_6:def 3
.= ( ( ( Rev C89 ) /^ ( 0 ) ) | ( len C88 ) ) by L347 , NAT_2:8
.= ( ( Rev C89 ) | ( ( len C89 ) -' ( ( len C89 ) -' ( len C88 ) ) ) ) by L361 , FINSEQ_5:28
.= ( Rev ( C89 /^ ( ( len C89 ) -' ( len C88 ) ) ) ) by L128 , NAT_D:35
.= ( Rev C88 ) by L353 , L365 , L354 , FINSEQ_1:58;
L367: ( mid (( Rev C89 ) , 1 , ( len ( Rev C88 ) )) ) = ( Rev C88 ) by L366 , FINSEQ_5:def 3;
L368: ( Rev C88 ) is_preposition_of ( Rev C89 ) by L367 , L344 , FINSEQ_8:def 8;
L369: C88 is_postposition_of C89 by L368 , FINSEQ_8:def 9;
thus L370: thesis by L369 , L299;
end;
end;
theorem
L372: (for B86 being non  empty set holds (for B87 , B88 being (File of B86) holds (B87 is_terminated_by B88 implies ( len B88 ) <= ( len B87 ))))
proof
let C90 being non  empty set;
let C91 , C92 being (File of C90);
assume L373: C91 is_terminated_by C92;
per cases ;
suppose L374: ( len C92 ) > ( 0 );

thus L375: thesis by L374 , L373 , FINSEQ_8:def 12;
end;
suppose L376: ( len C92 ) <= ( 0 );

thus L377: thesis by L376 , NAT_1:2;
end;
end;
theorem
L379: (for B89 being non  empty set holds (for B90 , B91 being (File of B89) holds (( len ( addcr (B90 , B91) ) ) >= ( len B90 ) & ( len ( addcr (B90 , B91) ) ) >= ( len B91 ))))
proof
let C93 being non  empty set;
let C94 , C95 being (File of C93);
L380: ( addcr (C94 , C95) ) = ( ovlcon (C94 , C95) ) by FINSEQ_8:def 11;
L381: ( len ( ovlcon (C94 , C95) ) ) = ( ( len C94 ) + ( ( len C95 ) -' ( len ( ovlpart (C94 , C95) ) ) ) ) by FINSEQ_8:15;
thus L382: ( len ( addcr (C94 , C95) ) ) >= ( len C94 ) by L381 , L380 , NAT_1:12;
L383: ( ovlcon (C94 , C95) ) = ( ( C94 | ( ( len C94 ) -' ( len ( ovlpart (C94 , C95) ) ) ) ) ^ C95 ) by FINSEQ_8:11;
L384: ( len ( ovlcon (C94 , C95) ) ) = ( ( len ( C94 | ( ( len C94 ) -' ( len ( ovlpart (C94 , C95) ) ) ) ) ) + ( len C95 ) ) by L383 , FINSEQ_1:22;
thus L385: thesis by L384 , L380 , NAT_1:12;
end;
theorem
L386: (for B92 being non  empty set holds (for B93 , B94 being (FinSequence of B92) holds B94 = ( ( ovlpart (B93 , B94) ) ^ ( ovlrdiff (B93 , B94) ) )))
proof
let C96 being non  empty set;
let C97 , C98 being (FinSequence of C96);
L387: ( ovlpart (C97 , C98) ) = ( smid (C98 , 1 , ( len ( ovlpart (C97 , C98) ) )) ) by FINSEQ_8:def 2
.= ( C98 | ( len ( ovlpart (C97 , C98) ) ) ) by FINSEQ_8:5;
L388: ( ( ovlpart (C97 , C98) ) ^ ( ovlrdiff (C97 , C98) ) ) = ( ( C98 | ( len ( ovlpart (C97 , C98) ) ) ) ^ ( C98 /^ ( len ( ovlpart (C97 , C98) ) ) ) ) by L387 , FINSEQ_8:def 5
.= C98 by RFINSEQ:8;
thus L389: thesis by L388;
end;
theorem
L390: (for B95 being non  empty set holds (for B96 , B97 being (FinSequence of B95) holds ( ovlcon (B96 , B97) ) = ( ( ovlldiff (B96 , B97) ) ^ B97 )))
proof
let C99 being non  empty set;
let C100 , C101 being (FinSequence of C99);
L391: ( ovlcon (C100 , C101) ) = ( ( ovlldiff (C100 , C101) ) ^ ( ( ovlpart (C100 , C101) ) ^ ( ovlrdiff (C100 , C101) ) ) ) by FINSEQ_8:12;
thus L392: thesis by L391 , L386;
end;
theorem
L393: (for B98 being non  empty set holds (for B99 , B100 being (File of B98) holds ( addcr (B100 , B99) ) = ( ( ovlldiff (B100 , B99) ) ^ B99 )))
proof
let C102 being non  empty set;
let C103 , C104 being (File of C102);
L394: ( addcr (C104 , C103) ) = ( ovlcon (C104 , C103) ) by FINSEQ_8:def 11
.= ( ( ovlldiff (C104 , C103) ) ^ ( ( ovlpart (C104 , C103) ) ^ ( ovlrdiff (C104 , C103) ) ) ) by FINSEQ_8:12
.= ( ( ovlldiff (C104 , C103) ) ^ C103 ) by L386;
thus L395: thesis by L394;
end;
theorem
L396: (for B101 being non  empty set holds (for B102 , B103 , B104 being (File of B101) holds (B104 = ( B102 ^ B103 ) implies (B102 is_substring_of B104 , 1 & B103 is_substring_of B104 , 1))))
proof
let C105 being non  empty set;
let C106 , C107 , C108 being (File of C105);
L397: ( len ( C106 ^ C107 ) ) = ( ( len C106 ) + ( len C107 ) ) by FINSEQ_1:22;
assume L398: C108 = ( C106 ^ C107 );
L399:
now
per cases ;
suppose L400: ( len C107 ) > ( 0 );

L401: ( ( len C106 ) + ( len C107 ) ) > ( ( len C106 ) + ( 0 ) ) by L400 , XREAL_1:8;
L402: ( C107 | ( len C107 ) ) = ( C107 | ( Seg ( len C107 ) ) ) by FINSEQ_1:def 15;
L403: ( ( ( len C106 ) + ( len C107 ) ) -' ( len C106 ) ) = ( ( ( len C106 ) + ( len C107 ) ) - ( len C106 ) ) by L400 , XREAL_0:def 2
.= ( len C107 );
L404: ( len C107 ) >= ( ( 0 ) + 1 ) by L400 , NAT_1:13;
L405: ( ( len C106 ) + 1 ) <= ( len ( C106 ^ C107 ) ) by L404 , L397 , XREAL_1:6;
L406: ( mid (( C106 ^ C107 ) , ( ( len C106 ) + 1 ) , ( len ( C106 ^ C107 ) )) ) = ( ( ( C106 ^ C107 ) /^ ( ( ( len C106 ) + 1 ) -' 1 ) ) | ( ( ( len ( C106 ^ C107 ) ) -' ( ( len C106 ) + 1 ) ) + 1 ) ) by L405 , FINSEQ_6:def 3
.= ( ( ( C106 ^ C107 ) /^ ( len C106 ) ) | ( ( ( len ( C106 ^ C107 ) ) -' ( ( len C106 ) + 1 ) ) + 1 ) ) by NAT_D:34
.= ( ( ( C106 ^ C107 ) /^ ( len C106 ) ) | ( ( ( ( len C106 ) + ( len C107 ) ) -' ( ( len C106 ) + 1 ) ) + 1 ) ) by FINSEQ_1:22
.= ( ( ( C106 ^ C107 ) /^ ( len C106 ) ) | ( ( ( len C106 ) + ( len C107 ) ) -' ( len C106 ) ) ) by L401 , NAT_2:7
.= ( C107 | ( len C107 ) ) by L403 , FINSEQ_5:37
.= C107 by L402 , FINSEQ_2:20;
L407: (( len C107 ) > ( 0 ) implies (ex B105 being (Element of ( NAT )) st (1 <= B105 & B105 <= ( len ( C106 ^ C107 ) ) & ( mid (( C106 ^ C107 ) , B105 , ( ( B105 -' 1 ) + ( len C107 ) )) ) = C107)))
proof
consider C109 being (Element of ( NAT )) such that L408: C109 = ( ( len C106 ) + 1 );
L409: C109 <= ( len ( C106 ^ C107 ) ) by L397 , L404 , L408 , XREAL_1:6;
L410: ( ( ( ( len C106 ) + 1 ) -' 1 ) + ( len C107 ) ) = ( ( len C106 ) + ( len C107 ) ) by NAT_D:34
.= ( len ( C106 ^ C107 ) ) by FINSEQ_1:22;
L411: 1 <= C109 by L410 , L397 , L404 , L408 , XREAL_1:6;
thus L412: thesis by L411 , L406 , L408 , L410 , L409;
end;
thus L413: C107 is_substring_of C108 , 1 by L407 , L398 , FINSEQ_8:def 7;
end;
suppose L414: ( len C107 ) <= ( 0 );

thus L415: C107 is_substring_of C108 , 1 by L414 , FINSEQ_8:def 7;
end;
end;
L417: (( len C107 ) >= ( 0 ) & ( len ( C106 ^ C107 ) ) = ( ( len C106 ) + ( len C107 ) )) by FINSEQ_1:22 , NAT_1:2;
L418:
now
per cases ;
suppose L419: ( len C106 ) > ( 0 );

L420: ( len C106 ) >= ( ( 0 ) + 1 ) by L419 , NAT_1:13;
L421: ( mid (( C106 ^ C107 ) , 1 , ( len C106 )) ) = ( ( ( C106 ^ C107 ) /^ ( 1 -' 1 ) ) | ( ( ( len C106 ) -' 1 ) + 1 ) ) by L420 , FINSEQ_6:def 3
.= ( ( ( C106 ^ C107 ) /^ ( 0 ) ) | ( ( ( len C106 ) -' 1 ) + 1 ) ) by XREAL_1:232
.= ( ( ( C106 ^ C107 ) /^ ( 0 ) ) | ( len C106 ) ) by L420 , XREAL_1:235
.= ( ( C106 ^ C107 ) | ( len C106 ) ) by FINSEQ_5:28
.= C106 by FINSEQ_5:23;
L422: (( len C106 ) > ( 0 ) implies (ex B106 being (Element of ( NAT )) st (1 <= B106 & B106 <= ( len ( C106 ^ C107 ) ) & ( mid (( C106 ^ C107 ) , B106 , ( ( B106 -' 1 ) + ( len C106 ) )) ) = C106)))
proof
set D14 = 1;
L423: ( ( 1 -' 1 ) + ( len C106 ) ) = ( ( 0 ) + ( len C106 ) ) by XREAL_1:232
.= ( len C106 );
L424: D14 <= ( len ( C106 ^ C107 ) ) by L417 , L420 , XREAL_1:7;
thus L425: thesis by L424 , L421 , L423;
end;
thus L426: C106 is_substring_of C108 , 1 by L422 , L398 , FINSEQ_8:def 7;
end;
suppose L427: ( len C106 ) <= ( 0 );

thus L428: C106 is_substring_of C108 , 1 by L427 , FINSEQ_8:def 7;
end;
end;
thus L430: thesis by L418 , L399;
end;
theorem
L431: (for B107 being non  empty set holds (for B108 , B109 , B110 , B111 being (File of B107) holds (B111 = ( ( B108 ^ B109 ) ^ B110 ) implies (B108 is_substring_of B111 , 1 & B109 is_substring_of B111 , 1 & B110 is_substring_of B111 , 1))))
proof
let C110 being non  empty set;
let C111 , C112 , C113 , C114 being (File of C110);
assume L432: C114 = ( ( C111 ^ C112 ) ^ C113 );
L433: ( len ( C111 ^ C112 ) ) = ( ( len C111 ) + ( len C112 ) ) by FINSEQ_1:22;
L434: ( len C113 ) >= ( 0 ) by NAT_1:2;
L435:
now
per cases ;
suppose L436: ( len C112 ) > ( 0 );

L437: ( ( ( len C111 ) + ( len C112 ) ) -' ( len C111 ) ) = ( ( ( len C111 ) + ( len C112 ) ) - ( len C111 ) ) by L436 , XREAL_0:def 2
.= ( len C112 );
L438: ( ( len C111 ) + ( len C112 ) ) > ( ( len C111 ) + ( 0 ) ) by L436 , XREAL_1:8;
L439: ( len C112 ) >= ( ( 0 ) + 1 ) by L436 , NAT_1:13;
L440: ( ( len C111 ) + 1 ) <= ( len ( C111 ^ C112 ) ) by L439 , L433 , XREAL_1:6;
L441: ( mid (( ( C111 ^ C112 ) ^ C113 ) , ( ( len C111 ) + 1 ) , ( len ( C111 ^ C112 ) )) ) = ( ( ( ( C111 ^ C112 ) ^ C113 ) /^ ( ( ( len C111 ) + 1 ) -' 1 ) ) | ( ( ( len ( C111 ^ C112 ) ) -' ( ( len C111 ) + 1 ) ) + 1 ) ) by L440 , FINSEQ_6:def 3
.= ( ( ( ( C111 ^ C112 ) ^ C113 ) /^ ( len C111 ) ) | ( ( ( len ( C111 ^ C112 ) ) -' ( ( len C111 ) + 1 ) ) + 1 ) ) by NAT_D:34
.= ( ( ( ( C111 ^ C112 ) ^ C113 ) /^ ( len C111 ) ) | ( ( ( ( len C111 ) + ( len C112 ) ) -' ( ( len C111 ) + 1 ) ) + 1 ) ) by FINSEQ_1:22
.= ( ( ( ( C111 ^ C112 ) ^ C113 ) /^ ( len C111 ) ) | ( ( ( len C111 ) + ( len C112 ) ) -' ( len C111 ) ) ) by L438 , NAT_2:7
.= ( ( ( C111 ^ ( C112 ^ C113 ) ) /^ ( len C111 ) ) | ( len C112 ) ) by L437 , FINSEQ_1:32
.= ( ( C112 ^ C113 ) | ( len C112 ) ) by FINSEQ_5:37
.= C112 by FINSEQ_5:23;
L442: ( len C111 ) >= ( 0 ) by NAT_1:2;
L443: ( ( len C111 ) + 1 ) >= ( ( 0 ) + 1 ) by L442 , XREAL_1:6;
L444: ( ( ( len C111 ) + 1 ) + ( 0 ) ) <= ( ( ( len C111 ) + ( len C112 ) ) + ( len C113 ) ) by L434 , L433 , L440 , XREAL_1:7;
L445: (( len C112 ) > ( 0 ) implies (ex B112 being (Element of ( NAT )) st (1 <= B112 & B112 <= ( len ( ( C111 ^ C112 ) ^ C113 ) ) & ( mid (( ( C111 ^ C112 ) ^ C113 ) , B112 , ( ( B112 -' 1 ) + ( len C112 ) )) ) = C112)))
proof
L446: ( ( ( ( len C111 ) + 1 ) -' 1 ) + ( len C112 ) ) = ( ( len C111 ) + ( len C112 ) ) by NAT_D:34
.= ( len ( C111 ^ C112 ) ) by FINSEQ_1:22;
consider C115 being (Element of ( NAT )) such that L447: C115 = ( ( len C111 ) + 1 );
L448: C115 <= ( len ( ( C111 ^ C112 ) ^ C113 ) ) by L433 , L444 , L447 , FINSEQ_1:22;
thus L449: thesis by L448 , L443 , L441 , L447 , L446;
end;
thus L450: C112 is_substring_of C114 , 1 by L445 , L432 , FINSEQ_8:def 7;
end;
suppose L451: ( len C112 ) <= ( 0 );

thus L452: C112 is_substring_of C114 , 1 by L451 , FINSEQ_8:def 7;
end;
end;
L454: C114 = ( C111 ^ ( C112 ^ C113 ) ) by L432 , FINSEQ_1:32;
thus L455: thesis by L454 , L432 , L435 , L396;
end;
theorem
L456: (for B113 being non  empty set holds (for B114 , B115 , B116 being (File of B113) holds ((B115 is_terminated_by B114 & B116 is_terminated_by B114) implies ( B114 ^ B116 ) is_substring_of ( addcr (( B115 ^ B116 ) , B114) ) , 1)))
proof
let C116 being non  empty set;
let C117 , C118 , C119 being (File of C116);
assume that
L457: C118 is_terminated_by C117
and
L458: C119 is_terminated_by C117;
L459: C119 = ( addcr (C119 , C117) ) by L458 , L333;
L460: C119 = ( ovlcon (C119 , C117) ) by L459 , FINSEQ_8:def 11;
L461: C119 = ( C119 ^ ( C117 /^ ( len ( ovlpart (C119 , C117) ) ) ) ) by L460 , FINSEQ_8:def 3;
L462: C118 = ( addcr (C118 , C117) ) by L457 , L333;
L463: C118 = ( ovlcon (C118 , C117) ) by L462 , FINSEQ_8:def 11;
L464: ( C118 ^ C119 ) = ( ( ( C118 | ( ( len C118 ) -' ( len ( ovlpart (C118 , C117) ) ) ) ) ^ C117 ) ^ ( C119 ^ ( C117 /^ ( len ( ovlpart (C119 , C117) ) ) ) ) ) by L463 , L461 , FINSEQ_8:11;
L465: ( addcr (( C118 ^ C119 ) , C117) ) = ( ovlcon (( C118 ^ C119 ) , C117) ) by FINSEQ_8:def 11
.= ( ( C118 ^ C119 ) ^ ( C117 /^ ( len ( ovlpart (( C118 ^ C119 ) , C117) ) ) ) ) by FINSEQ_8:def 3
.= ( ( ( ( C118 | ( ( len C118 ) -' ( len ( ovlpart (C118 , C117) ) ) ) ) ^ ( C117 ^ C119 ) ) ^ ( C117 /^ ( len ( ovlpart (C119 , C117) ) ) ) ) ^ ( C117 /^ ( len ( ovlpart (( C118 ^ C119 ) , C117) ) ) ) ) by L464 , L1
.= ( ( ( C118 | ( ( len C118 ) -' ( len ( ovlpart (C118 , C117) ) ) ) ) ^ ( C117 ^ C119 ) ) ^ ( ( C117 /^ ( len ( ovlpart (C119 , C117) ) ) ) ^ ( C117 /^ ( len ( ovlpart (( C118 ^ C119 ) , C117) ) ) ) ) ) by FINSEQ_1:32;
thus L466: thesis by L465 , L431;
end;
theorem
L467: (for B117 being non  empty set holds (for B118 , B119 being (File of B117) holds (for B120 being (Element of ( NAT )) holds ((( 0 ) < B120 & B119 = ( {} )) implies ( instr (B120 , B118 , B119) ) = B120))))
proof
let C120 being non  empty set;
let C121 , C122 being (File of C120);
let C123 being (Element of ( NAT ));
assume that
L468: ( 0 ) < C123
and
L469: C122 = ( {} );
L470: ( len C122 ) = ( 0 ) by L469;
L471: ( instr (C123 , C121 , C122) ) <> ( 0 )
proof
assume L472: ( instr (C123 , C121 , C122) ) = ( 0 );
L473: (not C122 is_substring_of C121 , C123) by L472 , FINSEQ_8:def 10;
thus L474: contradiction by L473 , L470 , FINSEQ_8:def 7;
end;
L475: C123 <= ( instr (C123 , C121 , C122) ) by L471 , FINSEQ_8:def 10;
L476: C122 is_preposition_of ( C121 /^ ( C123 -' 1 ) ) by L470 , FINSEQ_8:def 8;
L477: C123 >= ( instr (C123 , C121 , C122) ) by L476 , L468 , FINSEQ_8:def 10;
thus L478: thesis by L477 , L475 , XXREAL_0:1;
end;
theorem
L479: (for B121 being non  empty set holds (for B122 , B123 being (File of B121) holds (for B124 being (Element of ( NAT )) holds ((( 0 ) < B124 & B124 <= ( len B122 )) implies ( instr (B124 , B122 , B123) ) <= ( len B122 )))))
proof
let C124 being non  empty set;
let C125 , C126 being (File of C124);
let C127 being (Element of ( NAT ));
assume L480: (( 0 ) < C127 & C127 <= ( len C125 ));
assume L481: ( instr (C127 , C125 , C126) ) > ( len C125 );
L482: ( instr (C127 , C125 , C126) ) >= ( ( len C125 ) + 1 ) by L481 , NAT_1:13;
L483: ( ( instr (C127 , C125 , C126) ) - 1 ) >= ( ( ( len C125 ) + 1 ) - 1 ) by L482 , XREAL_1:9;
L484: ( ( instr (C127 , C125 , C126) ) -' 1 ) >= ( len C125 ) by L483 , XREAL_0:def 2;
L485: ( C125 /^ ( ( instr (C127 , C125 , C126) ) -' 1 ) ) = ( {} ) by L484 , FINSEQ_5:32;
L486: ( len ( C125 /^ ( ( instr (C127 , C125 , C126) ) -' 1 ) ) ) < 1 by L485;
L487: ( instr (C127 , C125 , C126) ) > ( 0 ) by L481 , NAT_1:2;
L488: (( len C126 ) >= ( 0 ) & C126 is_preposition_of ( C125 /^ ( ( instr (C127 , C125 , C126) ) -' 1 ) )) by L487 , FINSEQ_8:def 10 , NAT_1:2;
L489: C126 = ( {} ) by L488 , L486 , FINSEQ_8:def 8;
thus L490: thesis by L489 , L480 , L481 , L467;
end;
theorem
L491: (for B125 being non  empty set holds (for B126 , B127 being (File of B125) holds B127 is_substring_of ( ovlcon (B126 , B127) ) , 1))
proof
let C128 being non  empty set;
let C129 , C130 being (File of C128);
per cases ;
suppose L492: ( len C130 ) > ( 0 );

set D15 = ( ( len C129 ) -' ( len ( ovlpart (C129 , C130) ) ) );
L493: ( len C130 ) >= ( ( 0 ) + 1 ) by L492 , NAT_1:13;
L494: ( D15 + 1 ) <= ( D15 + ( len C130 ) ) by L493 , XREAL_1:6;
L495: ( ( ( D15 + ( len C130 ) ) -' ( D15 + 1 ) ) + 1 ) = ( ( ( D15 + ( len C130 ) ) - ( D15 + 1 ) ) + 1 ) by L494 , XREAL_1:233
.= ( len C130 );
L496: ( 1 - ( len ( ovlpart (C129 , C130) ) ) ) <= ( ( len C130 ) - ( len ( ovlpart (C129 , C130) ) ) ) by L493 , XREAL_1:9;
L497: ( ( 1 - ( len ( ovlpart (C129 , C130) ) ) ) + ( len C129 ) ) <= ( ( ( len C130 ) - ( len ( ovlpart (C129 , C130) ) ) ) + ( len C129 ) ) by L496 , XREAL_1:7;
L498: (( ( len C129 ) - ( len ( ovlpart (C129 , C130) ) ) ) >= ( 0 ) & ( ( ( len C129 ) - ( len ( ovlpart (C129 , C130) ) ) ) + 1 ) <= ( ( len C129 ) + ( ( len C130 ) - ( len ( ovlpart (C129 , C130) ) ) ) )) by L497 , FINSEQ_8:10 , XREAL_1:48;
L499: ( len ( ovlpart (C129 , C130) ) ) <= ( len C130 ) by FINSEQ_8:def 2;
L500: ( ( len C130 ) - ( len ( ovlpart (C129 , C130) ) ) ) >= ( 0 ) by L499 , XREAL_1:48;
set D16 = ( ( ( len C129 ) -' ( len ( ovlpart (C129 , C130) ) ) ) + 1 );
L501: D15 <= ( len ( C129 | D15 ) ) by FINSEQ_1:59 , NAT_D:35;
L502: ( ( C129 | D15 ) /^ D15 ) = ( ( C129 /^ D15 ) | ( D15 -' D15 ) ) by FINSEQ_5:80
.= ( ( C129 /^ D15 ) | ( 0 ) ) by XREAL_1:232
.= ( {} );
L503: ( len ( C130 /^ ( len ( ovlpart (C129 , C130) ) ) ) ) = ( ( len C130 ) -' ( len ( ovlpart (C129 , C130) ) ) ) by RFINSEQ:29
.= ( ( len C130 ) - ( len ( ovlpart (C129 , C130) ) ) ) by L500 , XREAL_0:def 2;
L504: (( ovlcon (C129 , C130) ) = ( C129 ^ ( C130 /^ ( len ( ovlpart (C129 , C130) ) ) ) ) & ( ( ( len C129 ) -' ( len ( ovlpart (C129 , C130) ) ) ) + 1 ) <= ( ( len C129 ) + ( len ( C130 /^ ( len ( ovlpart (C129 , C130) ) ) ) ) )) by L503 , L498 , FINSEQ_8:def 3 , XREAL_0:def 2;
L505: (1 <= D16 & D16 <= ( len ( ovlcon (C129 , C130) ) )) by L504 , FINSEQ_1:22 , NAT_1:11;
L506: ( mid (( ovlcon (C129 , C130) ) , D16 , ( ( D16 -' 1 ) + ( len C130 ) )) ) = ( mid (( ( C129 | D15 ) ^ C130 ) , D16 , ( ( D16 -' 1 ) + ( len C130 ) )) ) by FINSEQ_8:11
.= ( mid (( ( C129 | D15 ) ^ C130 ) , ( D15 + 1 ) , ( D15 + ( len C130 ) )) ) by NAT_D:34
.= ( ( ( ( C129 | D15 ) ^ C130 ) /^ ( ( D15 + 1 ) -' 1 ) ) | ( ( ( D15 + ( len C130 ) ) -' ( D15 + 1 ) ) + 1 ) ) by L494 , FINSEQ_6:def 3
.= ( ( ( ( C129 | D15 ) ^ C130 ) /^ D15 ) | ( len C130 ) ) by L495 , NAT_D:34
.= ( ( ( ( C129 | D15 ) /^ D15 ) ^ C130 ) | ( len C130 ) ) by L501 , GENEALG1:1
.= ( C130 | ( len C130 ) ) by L502 , FINSEQ_1:34
.= C130 by L4;
thus L507: thesis by L506 , L505 , FINSEQ_8:def 7;
end;
suppose L508: ( len C130 ) <= ( 0 );

thus L509: thesis by L508 , FINSEQ_8:def 7;
end;
end;
theorem
L511: (for B128 being non  empty set holds (for B129 , B130 being (File of B128) holds B130 is_substring_of ( addcr (B129 , B130) ) , 1))
proof
let C131 being non  empty set;
let C132 , C133 being (File of C131);
L512: ( addcr (C132 , C133) ) = ( ovlcon (C132 , C133) ) by FINSEQ_8:def 11;
thus L513: thesis by L512 , L491;
end;
theorem
L514: (for B131 being non  empty set holds (for B132 , B133 being (FinSequence of B131) holds (for B134 being (Element of ( NAT )) holds ((B133 is_substring_of ( B132 | B134 ) , 1 & ( len B133 ) > ( 0 )) implies B133 is_substring_of B132 , 1))))
proof
let C134 being non  empty set;
let C135 , C136 being (FinSequence of C134);
let C137 being (Element of ( NAT ));
assume that
L515: C136 is_substring_of ( C135 | C137 ) , 1
and
L516: ( len C136 ) > ( 0 );
consider C138 being (Element of ( NAT )) such that L517: 1 <= C138 and L518: C138 <= ( len ( C135 | C137 ) ) and L519: ( mid (( C135 | C137 ) , C138 , ( ( C138 -' 1 ) + ( len C136 ) )) ) = C136 by L515 , L516 , FINSEQ_8:def 7;
L520: ( len C136 ) >= ( ( 0 ) + 1 ) by L516 , NAT_1:13;
L521: ( ( len C136 ) - 1 ) >= ( 0 ) by L520 , XREAL_1:48;
L522: ( ( ( len C136 ) - 1 ) + C138 ) >= ( ( 0 ) + C138 ) by L521 , XREAL_1:7;
L523: ( ( C138 - 1 ) + ( len C136 ) ) >= C138 by L522;
per cases ;
suppose L524: ( len C135 ) >= C137;

L525: ( ( C138 -' 1 ) + ( len C136 ) ) = ( ( C138 - 1 ) + ( len C136 ) ) by L517 , XREAL_1:233;
L526: ( ( ( ( C138 -' 1 ) + ( len C136 ) ) -' C138 ) + 1 ) = ( ( ( ( C138 - 1 ) + ( len C136 ) ) - C138 ) + 1 ) by L525 , L522 , XREAL_1:233
.= ( len C136 );
L527: ( C138 - 1 ) >= ( 0 ) by L517 , XREAL_1:48;
L528: C138 <= ( ( C138 -' 1 ) + ( len C136 ) ) by L527 , L523 , XREAL_0:def 2;
L529: C136 = ( ( ( C135 | C137 ) /^ ( C138 -' 1 ) ) | ( ( ( ( C138 -' 1 ) + ( len C136 ) ) -' C138 ) + 1 ) ) by L528 , L519 , FINSEQ_6:def 3
.= ( ( ( C135 /^ ( C138 -' 1 ) ) | ( C137 -' ( C138 -' 1 ) ) ) | ( len C136 ) ) by L526 , FINSEQ_5:80;
L530:
now
L531: ( len ( C135 /^ ( C138 -' 1 ) ) ) = ( ( len C135 ) -' ( C138 -' 1 ) ) by RFINSEQ:29;
assume L532: ( C137 -' ( C138 -' 1 ) ) < ( len C136 );
L533: C136 = ( ( C135 /^ ( C138 -' 1 ) ) | ( C137 -' ( C138 -' 1 ) ) ) by L532 , L529 , FINSEQ_5:77;
thus L534: contradiction by L533 , L524 , L532 , L531 , FINSEQ_1:59 , NAT_D:42;
end;
L535: C136 = ( ( C135 /^ ( C138 -' 1 ) ) | ( len C136 ) ) by L530 , L529 , FINSEQ_5:77
.= ( mid (C135 , C138 , ( ( C138 -' 1 ) + ( len C136 ) )) ) by L528 , L526 , FINSEQ_6:def 3;
L536: ( len ( C135 | C137 ) ) <= ( len C135 ) by FINSEQ_5:16;
L537: C138 <= ( len C135 ) by L536 , L518 , XXREAL_0:2;
thus L538: thesis by L537 , L517 , L535 , FINSEQ_8:def 7;
end;
suppose L539: ( len C135 ) < C137;

thus L540: thesis by L539 , L515 , FINSEQ_1:58;
end;
end;
theorem
L542: (for B135 being non  empty set holds (for B136 , B137 being (File of B135) holds (ex B138 being (File of B135) st B138 is_a_record_of B136 , B137)))
proof
let C139 being non  empty set;
let C140 , C141 being (File of C139);
set D17 = ( instr (1 , ( addcr (C140 , C141) ) , C141) );
L543: D17 <> ( 0 )
proof
assume L544: D17 = ( 0 );
L545: (not C141 is_substring_of ( addcr (C140 , C141) ) , 1) by L544 , FINSEQ_8:def 10;
thus L546: contradiction by L545 , L511;
end;
L547: D17 > ( 0 ) by L543 , NAT_1:3;
L548: D17 >= ( ( 0 ) + 1 ) by L547 , NAT_1:13;
L549: ( D17 - 1 ) >= ( 0 ) by L548 , XREAL_1:48;
L550: ( D17 -' 1 ) = ( D17 - 1 ) by L549 , XREAL_0:def 2;
per cases ;
suppose L551: ( len C140 ) = ( 0 );

L552: C140 = ( <*> C139 ) by L551;
thus L553: thesis by L552 , L241;
end;
suppose L554: ( len C140 ) <> ( 0 );

set D18 = ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) );
L555: C141 is_preposition_of ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) by L543 , FINSEQ_8:def 10;
L556:
now
per cases ;
suppose L557: ( len C141 ) <= ( 0 );

L558: C141 = ( <*> C139 ) by L557 , NAT_1:2;
L559: ( C141 /^ ( len ( ovlpart (C140 , C141) ) ) ) = C141 by L558 , FINSEQ_6:80;
L560: ( C140 ^ ( C141 /^ ( len ( ovlpart (C140 , C141) ) ) ) ) = C140 by L559 , L558 , FINSEQ_1:34;
L561: ( ovlcon (C140 , C141) ) = C140 by L560 , FINSEQ_8:def 3;
L562: ( len C140 ) > ( 0 ) by L554 , NAT_1:3;
L563: ( len C140 ) >= ( ( 0 ) + 1 ) by L562 , NAT_1:13;
L564: (( len D18 ) > ( 0 ) implies (1 <= ( len C140 ) & ( mid (C140 , 1 , ( len D18 )) ) = D18))
proof
assume L565: ( len D18 ) > ( 0 );
L566: ( len D18 ) >= ( ( 0 ) + 1 ) by L565 , NAT_1:13;
per cases ;
suppose L567: ( len D18 ) < ( ( D17 + ( len C141 ) ) -' 1 );

L568: D18 = ( ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) | ( len D18 ) ) by FINSEQ_1:58
.= ( ( addcr (C140 , C141) ) | ( len D18 ) ) by L567 , FINSEQ_5:77
.= ( C140 | ( len D18 ) ) by L561 , FINSEQ_8:def 11
.= ( mid (C140 , 1 , ( len D18 )) ) by L566 , FINSEQ_6:116;
thus L569: thesis by L568 , L563;
end;
suppose L570: ( len D18 ) >= ( ( D17 + ( len C141 ) ) -' 1 );

L571: ( len D18 ) <= ( ( D17 + ( len C141 ) ) -' 1 ) by FINSEQ_5:17;
L572: ( mid (C140 , 1 , ( len D18 )) ) = ( C140 | ( len D18 ) ) by L566 , FINSEQ_6:116
.= ( ( addcr (C140 , C141) ) | ( len D18 ) ) by L561 , FINSEQ_8:def 11;
thus L573: thesis by L572 , L563 , L570 , L571 , XXREAL_0:1;
end;
end;
L575: D18 is_terminated_by C141 by L557 , FINSEQ_8:def 12;
L576: ( addcr (C140 , C141) ) = C140 by L561 , FINSEQ_8:def 11;
L577: D18 is_preposition_of ( addcr (C140 , C141) ) by L576 , L564 , FINSEQ_8:def 8;
thus L578: D18 is_a_record_of C140 , C141 by L577 , L575 , L236;
end;
suppose L579: ( len C141 ) > ( 0 );

L580: C141 is_preposition_of ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) by L543 , FINSEQ_8:def 10;
L581: ( len C141 ) <= ( len ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) ) by L580 , NAT_1:43;
L582: ( D17 -' 1 ) <= ( len ( addcr (C140 , C141) ) ) by L581 , L579 , CARD_1:27 , RFINSEQ:def 1;
L583: ( len ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) ) = ( ( len ( addcr (C140 , C141) ) ) - ( D17 -' 1 ) ) by L582 , RFINSEQ:def 1;
L584: ( ( len C141 ) + ( D17 -' 1 ) ) <= ( len ( addcr (C140 , C141) ) ) by L583 , L581 , XREAL_1:19;
L585: ( len C141 ) >= ( ( 0 ) + 1 ) by L579 , NAT_1:13;
L586: ( mid (( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) , 1 , ( len C141 )) ) = C141 by L555 , L579 , FINSEQ_8:def 8;
L587: ( ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) | ( len C141 ) ) = C141 by L586 , L585 , FINSEQ_6:116;
L588: ( len C141 ) <= ( len ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) ) by L587 , FINSEQ_5:16;
L589: ( len ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) ) <= ( len ( addcr (C140 , C141) ) ) by FINSEQ_5:25;
L590:
now
per cases ;
suppose L591: ( ( D17 + ( len C141 ) ) -' 1 ) >= ( len ( addcr (C140 , C141) ) );

L592: ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) = ( addcr (C140 , C141) ) by L591 , FINSEQ_1:58;
thus L593: ( len ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) ) >= ( len C141 ) by L592 , L588 , L589 , XXREAL_0:2;
end;
suppose L594: ( ( D17 + ( len C141 ) ) -' 1 ) < ( len ( addcr (C140 , C141) ) );

L595: ( D17 - 1 ) >= ( 0 ) by L548 , XREAL_1:48;
L596: ( ( len C141 ) + ( D17 - 1 ) ) >= ( ( len C141 ) + ( 0 ) ) by L595 , XREAL_1:7;
L597: ( ( D17 + ( len C141 ) ) -' 1 ) = ( ( ( len C141 ) + D17 ) - 1 ) by L596 , L579 , XREAL_0:def 2;
thus L598: ( len ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) ) >= ( len C141 ) by L597 , L594 , L596 , FINSEQ_1:59;
end;
end;
L600: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L548 , NAT_1:12 , XREAL_1:48;
L601: ( ( ( len C141 ) + D17 ) -' 1 ) <= ( len ( addcr (C140 , C141) ) ) by L600 , L550 , L584 , XREAL_0:def 2;
L602: ( len D18 ) = ( ( D17 + ( len C141 ) ) -' 1 ) by L601 , FINSEQ_1:59;
L603: ((( ( ( len D18 ) + 1 ) -' ( len C141 ) ) <> ( 0 ) implies (1 <= ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) & C141 is_preposition_of ( D18 /^ ( ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) -' 1 ) ) & (for B139 being (Element of ( NAT )) holds ((B139 >= 1 & B139 > ( 0 ) & C141 is_preposition_of ( D18 /^ ( B139 -' 1 ) )) implies B139 >= ( ( ( len D18 ) + 1 ) -' ( len C141 ) ))))) & (( ( ( len D18 ) + 1 ) -' ( len C141 ) ) = ( 0 ) implies (not C141 is_substring_of D18 , 1)))
proof
thus L604: (( ( ( len D18 ) + 1 ) -' ( len C141 ) ) <> ( 0 ) implies (1 <= ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) & C141 is_preposition_of ( D18 /^ ( ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) -' 1 ) ) & (for B140 being (Element of ( NAT )) holds ((B140 >= 1 & B140 > ( 0 ) & C141 is_preposition_of ( D18 /^ ( B140 -' 1 ) )) implies B140 >= ( ( ( len D18 ) + 1 ) -' ( len C141 ) )))))
proof
assume L605: ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) <> ( 0 );
L606: ( ( 0 ) + 1 ) <= ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) by L605 , NAT_1:13;
thus L607: 1 <= ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) by L606;
set D19 = ( ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) /^ ( D17 -' 1 ) );
L608: D17 <= ( D17 + ( len C141 ) ) by NAT_1:12;
L609: ( D17 - 1 ) >= ( 0 ) by L548 , XREAL_1:48;
L610: ( D17 -' 1 ) = ( D17 - 1 ) by L609 , XREAL_0:def 2;
L611: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L585 , NAT_1:12 , XREAL_1:48;
L612: ( ( D17 + ( len C141 ) ) -' 1 ) = ( ( D17 + ( len C141 ) ) - 1 ) by L611 , XREAL_0:def 2;
L613: ( D17 -' 1 ) <= ( len D18 ) by L612 , L550 , L602 , L608 , XREAL_1:9;
L614: ( len D19 ) = ( ( len D18 ) - ( D17 -' 1 ) ) by L613 , RFINSEQ:def 1
.= ( ( ( D17 + ( len C141 ) ) -' 1 ) - ( D17 -' 1 ) ) by L601 , FINSEQ_1:59
.= ( ( ( D17 + ( len C141 ) ) - 1 ) - ( D17 - 1 ) ) by L611 , L610 , XREAL_0:def 2
.= ( len C141 );
L615: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L585 , NAT_1:12 , XREAL_1:48;
L616: ( D17 + ( len C141 ) ) >= D17 by NAT_1:12;
L617: ( ( ( D17 + ( len C141 ) ) -' 1 ) - ( D17 -' 1 ) ) >= ( 0 ) by L616 , NAT_D:42 , XREAL_1:48;
L618: ( ( ( D17 + ( len C141 ) ) -' 1 ) -' ( D17 -' 1 ) ) = ( ( ( D17 + ( len C141 ) ) -' 1 ) - ( D17 -' 1 ) ) by L617 , XREAL_0:def 2
.= ( ( ( D17 + ( len C141 ) ) - 1 ) - ( D17 - 1 ) ) by L550 , L615 , XREAL_0:def 2
.= ( len C141 );
L619: ( ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) /^ ( D17 -' 1 ) ) = ( ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) | ( len C141 ) ) by L618 , FINSEQ_5:80;
L620: ( mid (( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) , 1 , ( len C141 )) ) = C141 by L555 , L579 , FINSEQ_8:def 8;
L621: D19 = C141 by L620 , L585 , L619 , FINSEQ_6:116;
L622: ( D19 | ( len C141 ) ) = C141 by L621 , FINSEQ_1:58;
L623: ( mid (D19 , 1 , ( len C141 )) ) = C141 by L622 , L585 , FINSEQ_6:116;
L624: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L585 , NAT_1:12 , XREAL_1:48;
L625: ( ( ( D17 + ( len C141 ) ) -' 1 ) + 1 ) = ( ( ( D17 + ( len C141 ) ) - 1 ) + 1 ) by L624 , XREAL_0:def 2
.= ( D17 + ( len C141 ) );
L626: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L548 , NAT_1:12 , XREAL_1:48;
L627: ( ( len D18 ) + 1 ) = ( ( ( D17 + ( len C141 ) ) - 1 ) + 1 ) by L626 , L602 , XREAL_0:def 2;
L628: ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) = D17 by L627 , NAT_D:34;
L629: ( ( D17 + ( len C141 ) ) - ( len C141 ) ) >= ( 0 ) by NAT_1:2;
L630: ( ( D17 + ( len C141 ) ) -' ( len C141 ) ) = D17 by L629 , XREAL_0:def 2;
L631: ( ( ( D17 + ( len C141 ) ) -' 1 ) + 1 ) = ( ( ( D17 + ( len C141 ) ) - 1 ) + 1 ) by L615 , XREAL_0:def 2
.= ( D17 + ( len C141 ) );
L632: ( D18 /^ ( ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) -' 1 ) ) = ( ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) /^ ( D17 -' 1 ) ) by L631 , L550 , L584 , L630 , FINSEQ_1:59;
thus L633: C141 is_preposition_of ( D18 /^ ( ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) -' 1 ) ) by L632 , L579 , L614 , L623 , FINSEQ_8:def 8;
L634: ( ( D17 + ( len C141 ) ) - ( len C141 ) ) >= ( 0 ) by NAT_1:2;
L635: ( ( D17 + ( len C141 ) ) -' ( len C141 ) ) = D17 by L634 , XREAL_0:def 2;
L636: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L585 , NAT_1:12 , XREAL_1:48;
L637: ( ( D17 + ( len C141 ) ) -' 1 ) = ( ( D17 + ( len C141 ) ) - 1 ) by L636 , XREAL_0:def 2;
thus L638: (for B141 being (Element of ( NAT )) holds ((B141 >= 1 & B141 > ( 0 ) & C141 is_preposition_of ( D18 /^ ( B141 -' 1 ) )) implies B141 >= ( ( ( len D18 ) + 1 ) -' ( len C141 ) )))
proof
let C142 being (Element of ( NAT ));
assume that
L639: C142 >= 1
and
L640: C142 > ( 0 )
and
L641: C141 is_preposition_of ( D18 /^ ( C142 -' 1 ) );
L642: ( ( D18 /^ ( C142 -' 1 ) ) | ( len C141 ) ) = ( ( D18 /^ ( C142 -' 1 ) ) | ( ( ( C142 -' 1 ) + ( len C141 ) ) -' ( C142 -' 1 ) ) ) by NAT_D:34
.= ( ( D18 | ( ( len C141 ) + ( C142 -' 1 ) ) ) /^ ( C142 -' 1 ) ) by FINSEQ_5:80;
L643: ( mid (( D18 /^ ( C142 -' 1 ) ) , 1 , ( len C141 )) ) = ( ( D18 /^ ( C142 -' 1 ) ) | ( len C141 ) ) by L585 , FINSEQ_6:116;
L644: ( C142 - 1 ) >= ( 0 ) by L639 , XREAL_1:48;
L645:
now
assume L646: C142 < ( ( ( len D18 ) + 1 ) -' ( len C141 ) );
L647: C142 < D17 by L646 , L550 , L584 , L625 , L635 , FINSEQ_1:59;
L648: ( C142 -' 1 ) < ( D17 -' 1 ) by L647 , L639 , NAT_D:56;
L649: ( len ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) ) <= ( len ( ( addcr (C140 , C141) ) /^ ( C142 -' 1 ) ) ) by L648 , L11;
L650: ( ( C142 + ( len C141 ) ) - 1 ) >= ( 0 ) by L639 , NAT_1:12 , XREAL_1:48;
L651: ( ( C142 + ( len C141 ) ) -' 1 ) = ( ( len C141 ) + ( C142 - 1 ) ) by L650 , XREAL_0:def 2
.= ( ( len C141 ) + ( C142 -' 1 ) ) by L644 , XREAL_0:def 2;
L652: C142 < ( ( ( ( D17 + ( len C141 ) ) -' 1 ) + 1 ) -' ( len C141 ) ) by L601 , L646 , FINSEQ_1:59;
L653: ( C142 + ( len C141 ) ) < ( D17 + ( len C141 ) ) by L652 , L625 , L635 , XREAL_1:8;
L654: ( ( C142 + ( len C141 ) ) - 1 ) < ( ( D17 + ( len C141 ) ) - 1 ) by L653 , XREAL_1:9;
L655: ( ( C142 + ( len C141 ) ) -' 1 ) < ( ( D17 + ( len C141 ) ) -' 1 ) by L654 , L637 , L650 , XREAL_0:def 2;
L656: ( ( ( addcr (C140 , C141) ) /^ ( C142 -' 1 ) ) | ( len C141 ) ) = ( ( ( addcr (C140 , C141) ) /^ ( C142 -' 1 ) ) | ( ( ( C142 -' 1 ) + ( len C141 ) ) -' ( C142 -' 1 ) ) ) by NAT_D:34
.= ( ( ( addcr (C140 , C141) ) | ( ( len C141 ) + ( C142 -' 1 ) ) ) /^ ( C142 -' 1 ) ) by FINSEQ_5:80
.= ( ( ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) | ( ( C142 + ( len C141 ) ) -' 1 ) ) /^ ( C142 -' 1 ) ) by L651 , L655 , FINSEQ_5:77
.= C141 by L579 , L641 , L643 , L642 , L651 , FINSEQ_8:def 8;
L657: ( mid (( ( addcr (C140 , C141) ) /^ ( C142 -' 1 ) ) , 1 , ( len C141 )) ) = C141 by L656 , L585 , FINSEQ_6:116;
L658: 1 <= ( len ( ( addcr (C140 , C141) ) /^ ( D17 -' 1 ) ) ) by L555 , L579 , FINSEQ_8:def 8;
L659: 1 <= ( len ( ( addcr (C140 , C141) ) /^ ( C142 -' 1 ) ) ) by L658 , L649 , XXREAL_0:2;
L660: C141 is_preposition_of ( ( addcr (C140 , C141) ) /^ ( C142 -' 1 ) ) by L659 , L657 , FINSEQ_8:def 8;
thus L661: contradiction by L660 , L628 , L639 , L646 , FINSEQ_8:def 10;
end;
thus L662: thesis by L645;
end;

end;

L639: ( ( D17 + ( len C141 ) ) - ( len C141 ) ) >= ( 0 ) by NAT_1:2;
L640: ( ( D17 + ( len C141 ) ) -' ( len C141 ) ) = D17 by L639 , XREAL_0:def 2;
L641: ( ( D17 + ( len C141 ) ) - 1 ) >= ( 0 ) by L585 , NAT_1:12 , XREAL_1:48;
L642: ( ( ( D17 + ( len C141 ) ) -' 1 ) + 1 ) = ( ( ( D17 + ( len C141 ) ) - 1 ) + 1 ) by L641 , XREAL_0:def 2
.= ( D17 + ( len C141 ) );
assume L643: ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) = ( 0 );
L644: ( instr (1 , ( addcr (C140 , C141) ) , C141) ) = ( 0 ) by L643 , L550 , L584 , L642 , L640 , FINSEQ_1:59;
L645: (not C141 is_substring_of ( addcr (C140 , C141) ) , 1) by L644 , FINSEQ_8:def 10;
thus L646: thesis by L645 , L579 , L514;
end;
L647: ( instr (1 , D18 , C141) ) = ( ( ( len D18 ) + 1 ) -' ( len C141 ) ) by L603 , FINSEQ_8:def 10;
per cases ;
suppose L648: 1 <= ( len D18 );

L649: (( ( addcr (C140 , C141) ) | ( len D18 ) ) = D18 & ( len ( ( addcr (C140 , C141) ) | ( ( D17 + ( len C141 ) ) -' 1 ) ) ) <= ( len ( addcr (C140 , C141) ) )) by L601 , FINSEQ_1:59;
L650: (( len D18 ) > ( 0 ) implies (1 <= ( len ( addcr (C140 , C141) ) ) & ( mid (( addcr (C140 , C141) ) , 1 , ( len D18 )) ) = D18)) by L649 , L648 , FINSEQ_6:116 , XXREAL_0:2;
L651: (( C141 ^ D18 ) is_substring_of ( addcr (C140 , C141) ) , 1 or D18 is_preposition_of ( addcr (C140 , C141) )) by L650 , FINSEQ_8:def 8;
L652: D18 is_terminated_by C141 by L590 , L647 , FINSEQ_8:def 12;
thus L653: D18 is_a_record_of C140 , C141 by L652 , L651 , L236;
end;
suppose L654: 1 > ( len D18 );

L655: ( ( 0 ) + 1 ) >= ( ( len D18 ) + 1 ) by L654 , NAT_1:13;
L656: ( len C141 ) <= ( 0 ) by L655 , L590 , XREAL_1:6;
L657: D18 is_terminated_by C141 by L656 , FINSEQ_8:def 12;
L658: ( 0 ) >= ( len D18 ) by L655 , XREAL_1:6;
L659: D18 = ( {} ) by L658 , NAT_1:2;
L660: ( C141 ^ D18 ) = C141 by L659 , FINSEQ_1:34;
L661: ( C141 ^ D18 ) is_substring_of ( addcr (C140 , C141) ) , 1 by L660 , L656 , FINSEQ_8:def 7;
thus L662: D18 is_a_record_of C140 , C141 by L661 , L657 , L236;
end;
end;
end;
thus L665: thesis by L556;
end;
end;
theorem
L667: (for B142 being non  empty set holds (for B143 , B144 , B145 being (File of B142) holds (B145 is_a_record_of B143 , B144 implies B145 is_a_record_of B145 , B144)))
proof
let C143 being non  empty set;
let C144 , C145 , C146 being (File of C143);
assume L668: C146 is_a_record_of C144 , C145;
L669: C146 is_terminated_by C145 by L668 , L236;
L670: C146 is_preposition_of ( addcr (C146 , C145) ) by L669 , L333;
thus L671: thesis by L670 , L669 , L236;
end;
theorem
L672: (for B146 being non  empty set holds (for B147 , B148 , B149 , B150 being (File of B146) holds ((B148 is_terminated_by B147 & B149 is_terminated_by B147 & B150 = ( B148 ^ B149 )) implies (B148 is_a_record_of B150 , B147 & B149 is_a_record_of B150 , B147))))
proof
let C147 being non  empty set;
let C148 , C149 , C150 , C151 being (File of C147);
assume that
L673: C149 is_terminated_by C148
and
L674: C150 is_terminated_by C148
and
L675: C151 = ( C149 ^ C150 );
per cases ;
suppose L676: (( len C149 ) <= ( 0 ) & ( len C150 ) <= ( 0 ));

L677: (C149 is_preposition_of ( addcr (C151 , C148) ) & C150 is_preposition_of ( addcr (C151 , C148) )) by L676 , FINSEQ_8:def 8;
thus L678: thesis by L677 , L673 , L674 , L236;
end;
suppose L679: (( len C149 ) <= ( 0 ) & ( len C150 ) > ( 0 ));

L680: C149 is_preposition_of ( addcr (C151 , C148) ) by L679 , FINSEQ_8:def 8;
L681: ( len C149 ) = ( 0 ) by L679 , NAT_1:2;
L682: C151 = C150 by L681 , L675 , L7;
L683: C151 is_preposition_of ( addcr (C151 , C148) ) by L682 , L674 , L333;
thus L684: thesis by L683 , L673 , L674 , L680 , L682 , L236;
end;
suppose L685: (( len C149 ) > ( 0 ) & ( len C150 ) <= ( 0 ));

L686: ( 0 ) <= ( len C150 ) by NAT_1:2;
L687: ( 1 + ( 0 ) ) <= ( ( len C149 ) + ( len C150 ) ) by L686 , L685 , NAT_1:13;
L688: 1 <= ( len C151 ) by L687 , L675 , FINSEQ_1:22;
L689: ( ( 0 ) + 1 ) <= ( len C149 ) by L685 , NAT_1:13;
L690: ( mid (( addcr (C151 , C148) ) , 1 , ( len C149 )) ) = ( ( addcr (C151 , C148) ) | ( len C149 ) ) by L689 , FINSEQ_6:116
.= ( ( ovlcon (C151 , C148) ) | ( len C149 ) ) by FINSEQ_8:def 11
.= ( ( C151 ^ ( C148 /^ ( len ( ovlpart (C151 , C148) ) ) ) ) | ( len C149 ) ) by FINSEQ_8:def 3
.= ( ( C149 ^ ( C150 ^ ( C148 /^ ( len ( ovlpart (C151 , C148) ) ) ) ) ) | ( len C149 ) ) by L675 , FINSEQ_1:32
.= ( C149 | ( len C149 ) ) by FINSEQ_5:22
.= C149 by FINSEQ_1:58;
L691: ( len C151 ) <= ( len ( addcr (C151 , C148) ) ) by L379;
L692: (( len C149 ) > ( 0 ) implies (1 <= ( len ( addcr (C151 , C148) ) ) & ( mid (( addcr (C151 , C148) ) , 1 , ( len C149 )) ) = C149)) by L691 , L688 , L690 , XXREAL_0:2;
L693: C149 is_preposition_of ( addcr (C151 , C148) ) by L692 , FINSEQ_8:def 8;
L694: C150 is_preposition_of ( addcr (C151 , C148) ) by L685 , FINSEQ_8:def 8;
thus L695: thesis by L694 , L673 , L674 , L693 , L236;
end;
suppose L696: (( len C149 ) > ( 0 ) & ( len C150 ) > ( 0 ));

L697: ( 1 + ( 0 ) ) <= ( ( len C149 ) + ( len C150 ) ) by L696 , NAT_1:13;
L698: 1 <= ( len C151 ) by L697 , L675 , FINSEQ_1:22;
L699: ( ( 0 ) + 1 ) <= ( len C149 ) by L696 , NAT_1:13;
L700: ( mid (( addcr (C151 , C148) ) , 1 , ( len C149 )) ) = ( ( addcr (C151 , C148) ) | ( len C149 ) ) by L699 , FINSEQ_6:116
.= ( ( ovlcon (C151 , C148) ) | ( len C149 ) ) by FINSEQ_8:def 11
.= ( ( C151 ^ ( C148 /^ ( len ( ovlpart (C151 , C148) ) ) ) ) | ( len C149 ) ) by FINSEQ_8:def 3
.= ( ( C149 ^ ( C150 ^ ( C148 /^ ( len ( ovlpart (C151 , C148) ) ) ) ) ) | ( len C149 ) ) by L675 , FINSEQ_1:32
.= ( C149 | ( len C149 ) ) by FINSEQ_5:22
.= C149 by FINSEQ_1:58;
L701: ( len C151 ) <= ( len ( addcr (C151 , C148) ) ) by L379;
L702: (( len C149 ) > ( 0 ) implies (1 <= ( len ( addcr (C151 , C148) ) ) & ( mid (( addcr (C151 , C148) ) , 1 , ( len C149 )) ) = C149)) by L701 , L698 , L700 , XXREAL_0:2;
L703: C149 is_preposition_of ( addcr (C151 , C148) ) by L702 , FINSEQ_8:def 8;
L704: ( C148 ^ C150 ) is_substring_of ( addcr (( C149 ^ C150 ) , C148) ) , 1 by L673 , L674 , L456;
thus L705: thesis by L704 , L673 , L674 , L675 , L703 , L236;
end;
end;
