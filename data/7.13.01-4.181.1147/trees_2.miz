:: K\"onig's Lemma
::  by Grzegorz Bancerek
::
:: Received January 10, 1991
:: Copyright (c) 1991-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, TREES_1, SUBSET_1, FUNCT_1, XBOOLE_0, FINSEQ_1,
      ORDINAL4, XXREAL_0, ARYTM_3, RELAT_1, TARSKI, CARD_1, NAT_1, ORDINAL1,
      FINSET_1, REAL_1, ARYTM_1, ZFMISC_1, FUNCOP_1, TREES_2, AMISTD_3,
      FINSEQ_2, PARTFUN1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, ORDINAL1, RELAT_1, XCMPLX_0,
      FUNCT_1, PARTFUN1, REAL_1, NAT_1, CARD_1, NUMBERS, FINSEQ_1, FINSEQ_2,
      FINSET_1, RELSET_1, BINOP_1, FUNCT_2, FUNCOP_1, TREES_1, XXREAL_0;
 constructors WELLORD2, BINOP_1, FUNCOP_1, XXREAL_0, REAL_1, NAT_1, TREES_1,
      RELSET_1, FINSEQ_2;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, ORDINAL1, FUNCOP_1,
      FINSET_1, NUMBERS, XXREAL_0, XREAL_0, NAT_1, FINSEQ_1, TREES_1, CARD_1,
      RELSET_1, FINSEQ_2, DOMAIN_1, PARTFUN1;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions RELAT_1, TARSKI, FUNCT_1, TREES_1, ORDINAL1, XBOOLE_0, BINOP_1;
 theorems FUNCT_1, NAT_1, FINSEQ_1, TREES_1, TARSKI, ORDERS_1, ZFMISC_1,
      FINSET_1, CARD_1, CARD_2, WELLORD2, FUNCOP_1, FUNCT_2, RELAT_1, FINSEQ_2,
      ORDINAL1, XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, PARTFUN1, RELSET_1,
      XTUPLE_0;
 schemes FUNCT_1, FRAENKEL, NAT_1, CARD_2, CLASSES1, DOMAIN_1, XBOOLE_0;

begin
theorem
L1: (for R28 being FinSequence holds (for R29 being FinSequence holds (for R27 being FinSequence holds ((R28 is_a_prefix_of R27 & R29 is_a_prefix_of R27) implies R28 , R29 are_c=-comparable ))))
proof
let C1 , C2 , C3 being FinSequence;
assume L2: C1 is_a_prefix_of C3;
L3: (ex B1 being FinSequence st C3 = ( C1 ^ B1 )) by L2 , TREES_1:1;
assume L4: C2 is_a_prefix_of C3;
L5: (ex B2 being FinSequence st C3 = ( C2 ^ B2 )) by L4 , TREES_1:1;
L6: (( len C1 ) <= ( len C2 ) or ( len C2 ) <= ( len C1 ));
L7: ((ex B3 being FinSequence st ( C1 ^ B3 ) = C2) or (ex B4 being FinSequence st ( C2 ^ B4 ) = C1)) by L6 , L3 , L5 , FINSEQ_1:47;
thus L8: (C1 is_a_prefix_of C2 or C2 is_a_prefix_of C1) by L7 , TREES_1:1;
end;
theorem
L9: (for R28 being FinSequence holds (for R29 being FinSequence holds (for R27 being FinSequence holds ((R28 is_a_proper_prefix_of R27 & R29 is_a_prefix_of R27) implies R28 , R29 are_c=-comparable ))))
proof
let C4 , C5 , C6 being FinSequence;
assume L10: C4 is_a_proper_prefix_of C6;
L11: C4 is_a_prefix_of C6 by L10 , XBOOLE_0:def 8;
thus L12: thesis by L11 , L1;
end;
theorem
L13: (for R21 being (Element of ( NAT )) holds (for R28 being FinSequence holds (( len R28 ) = ( R21 + 1 ) implies (ex R29 being FinSequence st (ex R1 being set st (R28 = ( R29 ^ <* R1 *> ) & ( len R29 ) = R21))))))
proof
let R21 being (Element of ( NAT ));
let R28 being FinSequence;
assume L14: ( len R28 ) = ( R21 + 1 );
reconsider D1 = ( R28 | ( Seg R21 ) ) as FinSequence by FINSEQ_1:15;
L15: D1 is_a_prefix_of R28 by TREES_1:def 1;
consider R27 being FinSequence such that L16: R28 = ( D1 ^ R27 ) by L15 , TREES_1:1;
take D1;
take ( R27 . 1 );
L17: R21 <= ( R21 + 1 ) by NAT_1:11;
L18: ( len D1 ) = R21 by L17 , L14 , FINSEQ_1:17;
L19: ( R21 + ( len R27 ) ) = ( R21 + 1 ) by L18 , L14 , L16 , FINSEQ_1:22;
thus L20: thesis by L19 , L14 , L16 , L17 , FINSEQ_1:17 , FINSEQ_1:40;
end;
theorem
L21: (for R1 being set holds (for R27 being FinSequence holds ( ProperPrefixes ( R27 ^ <* R1 *> ) ) = ( ( ProperPrefixes R27 ) \/ { R27 } )))
proof
let R1 being set;
let R27 being FinSequence;
thus L22: ( ProperPrefixes ( R27 ^ <* R1 *> ) ) c= ( ( ProperPrefixes R27 ) \/ { R27 } )
proof
let R2 being set;
assume L23: R2 in ( ProperPrefixes ( R27 ^ <* R1 *> ) );
consider R28 being FinSequence such that L24: R2 = R28 and L25: R28 is_a_proper_prefix_of ( R27 ^ <* R1 *> ) by L23 , TREES_1:def 2;
L26: ((R28 is_a_prefix_of R27 & R28 <> R27) or R28 = R27) by L25 , TREES_1:9;
L27: (R28 is_a_proper_prefix_of R27 or R28 in { R27 }) by L26 , TARSKI:def 1 , XBOOLE_0:def 8;
L28: (R2 in ( ProperPrefixes R27 ) or R2 in { R27 }) by L27 , L24 , TREES_1:def 2;
thus L29: thesis by L28 , XBOOLE_0:def 3;
end;

let R2 being set;
assume L30: R2 in ( ( ProperPrefixes R27 ) \/ { R27 } );
L31: (R2 in ( ProperPrefixes R27 ) or R2 in { R27 }) by L30 , XBOOLE_0:def 3;
L32:
now
assume L33: R2 in ( ProperPrefixes R27 );
consider R28 being FinSequence such that L34: R2 = R28 and L35: R28 is_a_proper_prefix_of R27 by L33 , TREES_1:def 2;
L36: R27 is_a_prefix_of ( R27 ^ <* R1 *> ) by TREES_1:1;
L37: R28 is_a_proper_prefix_of ( R27 ^ <* R1 *> ) by L36 , L35 , XBOOLE_1:58;
thus L38: thesis by L37 , L34 , TREES_1:def 2;
end;
L39: ( R27 ^ ( {} ) ) = R27 by FINSEQ_1:34;
L40: (R27 is_a_prefix_of ( R27 ^ <* R1 *> ) & R27 <> ( R27 ^ <* R1 *> )) by L39 , FINSEQ_1:33 , TREES_1:1;
L41: R27 is_a_proper_prefix_of ( R27 ^ <* R1 *> ) by L40 , XBOOLE_0:def 8;
L42: (R2 in ( ProperPrefixes R27 ) or (R2 = R27 & R27 in ( ProperPrefixes ( R27 ^ <* R1 *> ) ))) by L41 , L31 , TARSKI:def 1 , TREES_1:def 2;
thus L43: thesis by L42 , L32;
end;
scheme TreeStructInd { F1() -> Tree , P1[set] } : (for B5 being (Element of F1()) holds P1[ B5 ])
provided
L44: P1[ ( {} ) ]
and
L45: (for B6 being (Element of F1()) holds (for R26 being (Element of ( NAT )) holds ((P1[ B6 ] & ( B6 ^ <* R26 *> ) in F1()) implies P1[ ( B6 ^ <* R26 *> ) ])))
proof
defpred S1[ set ] means (for B7 being (Element of F1()) holds (( len B7 ) = $1 implies P1[ B7 ]));
L46: (for R1 being set holds (( card R1 ) = ( 0 ) implies R1 = ( {} )));
L47: S1[ ( 0 ) ] by L46 , L44;
L48: (for R21 being (Element of ( NAT )) holds (S1[ R21 ] implies S1[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
assume L49: (for B8 being (Element of F1()) holds (( len B8 ) = R21 implies P1[ B8 ]));
let C7 being (Element of F1());
assume L50: ( len C7 ) = ( R21 + 1 );
consider R27 being FinSequence, R1 being set such that L51: C7 = ( R27 ^ <* R1 *> ) and L52: ( len R27 ) = R21 by L50 , L13;
reconsider D2 = R27 as (FinSequence of ( NAT )) by L51 , FINSEQ_1:36;
reconsider D3 = D2 as (Element of F1()) by L51 , TREES_1:21;
L53: ( rng <* R1 *> ) c= ( rng C7 ) by L51 , FINSEQ_1:30;
L54: (( rng <* R1 *> ) = { R1 } & ( rng <* R1 *> ) c= ( NAT )) by L53 , FINSEQ_1:39 , XBOOLE_1:1;
reconsider D4 = R1 as (Element of ( NAT )) by L54 , ZFMISC_1:31;
L55: P1[ D3 ] by L49 , L52;
L56: D4 = D4;
thus L57: thesis by L56 , L45 , L51 , L55;
end;
L58: (for R21 being (Element of ( NAT )) holds S1[ R21 ]) from NAT_1:sch 1(L47 , L48);
let C8 being (Element of F1());
L59: ( len C8 ) = ( len C8 );
thus L60: thesis by L59 , L58;
end;
theorem
L61: (for R13 being Tree holds (for R14 being Tree holds ((for R30 being (FinSequence of ( NAT )) holds (R30 in R13 iff R30 in R14)) implies R13 = R14)))
proof
let R13 being Tree;
let R14 being Tree;
assume L62: (for R30 being (FinSequence of ( NAT )) holds (R30 in R13 iff R30 in R14));
thus L63: R13 c= R14
proof
let R1 being set;
assume L64: R1 in R13;
reconsider D5 = R1 as (Element of R13) by L64;
L65: D5 in R14 by L62;
thus L66: thesis by L65;
end;

let R1 being set;
assume L67: R1 in R14;
reconsider D6 = R1 as (Element of R14) by L67;
L68: D6 in R13 by L62;
thus L69: thesis by L68;
end;
definition
let R13 being Tree;
let R14 being Tree;
redefine pred R13 = R14
means
(for R30 being (FinSequence of ( NAT )) holds (R30 in R13 iff R30 in R14))
;compatibility by L61;
end;
theorem
L71: (for R12 being Tree holds (for R30 being (FinSequence of ( NAT )) holds (R30 in R12 implies R12 = ( R12 with-replacement (R30 , ( R12 | R30 )) ))))
proof
let R12 being Tree;
let R30 being (FinSequence of ( NAT ));
assume L72: R30 in R12;
L73:
now
let R31 being (FinSequence of ( NAT ));
thus L74: (R31 in R12 implies R31 in ( R12 with-replacement (R30 , ( R12 | R30 )) ))
proof
assume L75: R31 in R12;
L76:
now
assume L77: R30 is_a_proper_prefix_of R31;
L78: R30 is_a_prefix_of R31 by L77 , XBOOLE_0:def 8;
consider C9 being FinSequence such that L79: R31 = ( R30 ^ C9 ) by L78 , TREES_1:1;
L80: ( rng C9 ) c= ( rng R31 ) by L79 , FINSEQ_1:30;
L81: ( rng C9 ) c= ( NAT ) by L80 , XBOOLE_1:1;
reconsider D7 = C9 as (FinSequence of ( NAT )) by L81 , FINSEQ_1:def 4;
take D8 = D7;
thus L82: (D8 in ( R12 | R30 ) & R31 = ( R30 ^ D8 )) by L72 , L75 , L79 , TREES_1:def 6;
end;
thus L83: thesis by L76 , L72 , L75 , TREES_1:def 9;
end;

assume that
L84: R31 in ( R12 with-replacement (R30 , ( R12 | R30 )) )
and
L85: (not R31 in R12);
L86: (ex R32 being (FinSequence of ( NAT )) st (R32 in ( R12 | R30 ) & R31 = ( R30 ^ R32 ))) by L72 , L84 , L85 , TREES_1:def 9;
thus L87: contradiction by L86 , L72 , L85 , TREES_1:def 6;
end;
thus L88: thesis by L73 , L61;
end;
theorem
L89: (for R12 being Tree holds (for R13 being Tree holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 in R12 & R31 in R12 & (not R30 is_a_prefix_of R31)) implies R31 in ( R12 with-replacement (R30 , R13) ))))))
proof
let R12 being Tree;
let R13 being Tree;
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
L90: ((not R30 is_a_prefix_of R31) implies (not R30 is_a_proper_prefix_of R31)) by XBOOLE_0:def 8;
thus L91: thesis by L90 , TREES_1:def 9;
end;
theorem
L92: (for R12 being Tree holds (for R13 being Tree holds (for R14 being Tree holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 in R12 & R31 in R12 & (not R30 , R31 are_c=-comparable )) implies ( ( R12 with-replacement (R30 , R13) ) with-replacement (R31 , R14) ) = ( ( R12 with-replacement (R31 , R14) ) with-replacement (R30 , R13) )))))))
proof
let R12 being Tree;
let R13 being Tree;
let R14 being Tree;
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume that
L93: R30 in R12
and
L94: R31 in R12
and
L95: (not R30 , R31 are_c=-comparable );
L96: (not R30 is_a_prefix_of R31) by L95 , XBOOLE_0:def 9;
L97: (not R31 is_a_prefix_of R30) by L95 , XBOOLE_0:def 9;
L98: R30 in ( R12 with-replacement (R31 , R14) ) by L97 , L93 , L94 , L89;
L99: R31 in ( R12 with-replacement (R30 , R13) ) by L93 , L94 , L96 , L89;
let R32 being (FinSequence of ( NAT ));
thus L100: (R32 in ( ( R12 with-replacement (R30 , R13) ) with-replacement (R31 , R14) ) implies R32 in ( ( R12 with-replacement (R31 , R14) ) with-replacement (R30 , R13) ))
proof
assume L101: R32 in ( ( R12 with-replacement (R30 , R13) ) with-replacement (R31 , R14) );
L102: ((R32 in ( R12 with-replacement (R30 , R13) ) & (not R31 is_a_proper_prefix_of R32)) or (ex R33 being (FinSequence of ( NAT )) st (R33 in R14 & R32 = ( R31 ^ R33 )))) by L101 , L99 , TREES_1:def 9;
L103: ((R32 in R12 & (not R30 is_a_proper_prefix_of R32) & (not R31 is_a_proper_prefix_of R32)) or ((ex R34 being (FinSequence of ( NAT )) st (R34 in R13 & R32 = ( R30 ^ R34 ))) & (not R31 is_a_proper_prefix_of R32)) or (R31 is_a_prefix_of R32 & (ex R33 being (FinSequence of ( NAT )) st (R33 in R14 & R32 = ( R31 ^ R33 ))))) by L102 , L93 , TREES_1:1 , TREES_1:def 9;
L104: ((R32 in ( R12 with-replacement (R31 , R14) ) & (not R30 is_a_proper_prefix_of R32)) or (ex R33 being (FinSequence of ( NAT )) st (R33 in R13 & R32 = ( R30 ^ R33 )))) by L103 , L94 , L95 , L9 , TREES_1:def 9;
thus L105: thesis by L104 , L98 , TREES_1:def 9;
end;

assume L106: R32 in ( ( R12 with-replacement (R31 , R14) ) with-replacement (R30 , R13) );
L107: ((R32 in ( R12 with-replacement (R31 , R14) ) & (not R30 is_a_proper_prefix_of R32)) or (ex R33 being (FinSequence of ( NAT )) st (R33 in R13 & R32 = ( R30 ^ R33 )))) by L106 , L98 , TREES_1:def 9;
L108: ((R32 in R12 & (not R31 is_a_proper_prefix_of R32) & (not R30 is_a_proper_prefix_of R32)) or ((ex R34 being (FinSequence of ( NAT )) st (R34 in R14 & R32 = ( R31 ^ R34 ))) & (not R30 is_a_proper_prefix_of R32)) or (R30 is_a_prefix_of R32 & (ex R33 being (FinSequence of ( NAT )) st (R33 in R13 & R32 = ( R30 ^ R33 ))))) by L107 , L94 , TREES_1:1 , TREES_1:def 9;
L109: ((R32 in ( R12 with-replacement (R30 , R13) ) & (not R31 is_a_proper_prefix_of R32)) or (ex R33 being (FinSequence of ( NAT )) st (R33 in R14 & R32 = ( R31 ^ R33 )))) by L108 , L93 , L95 , L9 , TREES_1:def 9;
thus L110: thesis by L109 , L99 , TREES_1:def 9;
end;
definition
let C10 being Tree;
attr C10 is  finite-order
means
(ex R26 being (Element of ( NAT )) st (for B9 being (Element of C10) holds (not ( B9 ^ <* R26 *> ) in C10)));
end;
registration
cluster  finite-order for Tree;
existence
proof
reconsider D9 = { ( {} ) } as Tree;
take D9;
take ( 0 );
let C11 being (Element of D9);
thus L112: thesis by TARSKI:def 1;
end;
end;
definition
let R12 being Tree;
mode Chain of R12
 -> (Subset of R12)
means :L114: (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 in it & R31 in it) implies R30 , R31 are_c=-comparable )));
existence
proof
reconsider D10 = ( {} ) as (Subset of R12) by XBOOLE_1:2;
take D10;
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
thus L115: thesis;
end;
mode Level of R12
 -> (Subset of R12)
means :L116: (ex B10 being Nat st it = { R15 where R15 is (Element of R12) : ( len R15 ) = B10 });
existence
proof
L117: ( {} ) in R12 by TREES_1:22;
reconsider D11 = { ( {} ) } as (Subset of R12) by L117 , ZFMISC_1:31;
take D11;
take ( 0 );
thus L118: D11 c= { R15 where R15 is (Element of R12) : ( len R15 ) = ( 0 ) }
proof
let R1 being set;
assume L119: R1 in D11;
L120: R1 = ( {} ) by L119 , TARSKI:def 1;
L121: ( len ( {} ) ) = ( 0 );
thus L122: thesis by L121 , L119 , L120;
end;

let R1 being set;
assume L123: R1 in { R15 where R15 is (Element of R12) : ( len R15 ) = ( 0 ) };
L124: (ex R15 being (Element of R12) st (R1 = R15 & ( len R15 ) = ( 0 ))) by L123;
L125: R1 = ( {} ) by L124;
thus L126: thesis by L125 , TARSKI:def 1;
end;
let R15 being (Element of R12);
func succ R15 -> (Subset of R12) equals 
{ ( R15 ^ <* R26 *> ) where R26 is (Element of ( NAT )) : ( R15 ^ <* R26 *> ) in R12 };
coherence
proof
L127: { ( R15 ^ <* R26 *> ) where R26 is (Element of ( NAT )) : ( R15 ^ <* R26 *> ) in R12 } c= R12
proof
let R1 being set;
assume L128: R1 in { ( R15 ^ <* R26 *> ) where R26 is (Element of ( NAT )) : ( R15 ^ <* R26 *> ) in R12 };
L129: (ex R26 being (Element of ( NAT )) st (R1 = ( R15 ^ <* R26 *> ) & ( R15 ^ <* R26 *> ) in R12)) by L128;
thus L130: thesis by L129;
end;
thus L131: thesis by L127;
end;
end;
theorem
L133: (for R12 being Tree holds (for B11 being (Level of R12) holds B11 is (AntiChain_of_Prefixes of R12)))
proof
let R12 being Tree;
let C12 being (Level of R12);
consider C13 being Nat such that L134: C12 = { R15 where R15 is (Element of R12) : ( len R15 ) = C13 } by L116;
L135: C12 is  AntiChain_of_Prefixes-like
proof
thus L136: (for R1 being set holds (R1 in C12 implies R1 is FinSequence))
proof
let R1 being set;
assume L137: R1 in C12;
L138: R1 is (Element of R12) by L137;
thus L139: thesis by L138;
end;

let R28 being FinSequence;
let R29 being FinSequence;
assume L140: R28 in C12;
L141: (ex B12 being (Element of R12) st (R28 = B12 & ( len B12 ) = C13)) by L140 , L134;
assume L142: R29 in C12;
L143: (ex B13 being (Element of R12) st (R29 = B13 & ( len B13 ) = C13)) by L142 , L134;
thus L144: thesis by L143 , L141 , TREES_1:4;
end;
thus L145: thesis by L135 , TREES_1:def 11;
end;
theorem
L146: (for R12 being Tree holds (for R15 being (Element of R12) holds ( succ R15 ) is (AntiChain_of_Prefixes of R12)))
proof
let R12 being Tree;
let R15 being (Element of R12);
L147: ( succ R15 ) is  AntiChain_of_Prefixes-like
proof
thus L148: (for R1 being set holds (R1 in ( succ R15 ) implies R1 is FinSequence))
proof
let R1 being set;
assume L149: R1 in ( succ R15 );
L150: (ex R20 being (Element of ( NAT )) st (R1 = ( R15 ^ <* R20 *> ) & ( R15 ^ <* R20 *> ) in R12)) by L149;
thus L151: thesis by L150;
end;

let R28 being FinSequence;
let R29 being FinSequence;
assume L152: R28 in ( succ R15 );
L153: (ex R22 being (Element of ( NAT )) st (R28 = ( R15 ^ <* R22 *> ) & ( R15 ^ <* R22 *> ) in R12)) by L152;
assume L154: R29 in ( succ R15 );
L155: (ex R23 being (Element of ( NAT )) st (R29 = ( R15 ^ <* R23 *> ) & ( R15 ^ <* R23 *> ) in R12)) by L154;
L156: ( len R28 ) = ( ( len R15 ) + 1 ) by L153 , FINSEQ_2:16;
L157: ( len R29 ) = ( ( len R15 ) + 1 ) by L155 , FINSEQ_2:16;
thus L158: thesis by L157 , L156 , TREES_1:4;
end;
thus L159: thesis by L147 , TREES_1:def 11;
end;
theorem
L160: (for R12 being Tree holds (for B14 being (AntiChain_of_Prefixes of R12) holds (for B15 being (Chain of R12) holds (ex R15 being (Element of R12) st ( B14 /\ B15 ) c= { R15 }))))
proof
let R12 being Tree;
let C14 being (AntiChain_of_Prefixes of R12);
let C15 being (Chain of R12);
L161:
now
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume L162: (R30 in ( C14 /\ C15 ) & R31 in ( C14 /\ C15 ));
L163: (R30 in C14 & R31 in C14) by L162 , XBOOLE_0:def 4;
L164: (R30 in C15 & R31 in C15) by L162 , XBOOLE_0:def 4;
L165: R30 , R31 are_c=-comparable  by L164 , L114;
thus L166: R30 = R31 by L165 , L163 , TREES_1:def 10;
end;
set D12 = the (Element of R12);
L167:
now
per cases ;
suppose L168: ( C14 /\ C15 ) = ( {} );

L169: ( C14 /\ C15 ) c= { D12 } by L168 , XBOOLE_1:2;
thus L170: thesis by L169;
end;
suppose L171: ( C14 /\ C15 ) <> ( {} );

set D13 = the (Element of ( C14 /\ C15 ));
L172: D13 in C15 by L171 , XBOOLE_0:def 4;
reconsider D14 = D13 as (Element of R12) by L172;
take D15 = D14;
thus L173: ( C14 /\ C15 ) c= { D15 }
proof
let R2 being set;
assume L174: R2 in ( C14 /\ C15 );
L175: R2 is (Element of R12) by L174;
reconsider D16 = R2 as (FinSequence of ( NAT )) by L175;
L176: D15 = D16 by L161 , L174;
thus L177: thesis by L176 , TARSKI:def 1;
end;

end;
end;
thus L175: thesis by L167;
end;
definition
let R12 being Tree;
let C16 being Nat;
func R12 -level C16 -> (Level of R12) equals 
{ R15 where R15 is (Element of R12) : ( len R15 ) = C16 };
coherence
proof
defpred S2[ (Element of R12) ] means ( len $1 ) = C16;
L176: { R15 where R15 is (Element of R12) : S2[ R15 ] } is (Subset of R12) from DOMAIN_1:sch 7;
thus L177: thesis by L176 , L116;
end;
end;
theorem
L179: (for R12 being Tree holds (for R15 being (Element of R12) holds (for R26 being (Element of ( NAT )) holds (( R15 ^ <* R26 *> ) in ( succ R15 ) iff ( R15 ^ <* R26 *> ) in R12))));
theorem
L180: (for R12 being Tree holds (for R15 being (Element of R12) holds (R15 = ( {} ) implies ( R12 -level 1 ) = ( succ R15 ))))
proof
let R12 being Tree;
let R15 being (Element of R12);
assume L181: R15 = ( {} );
thus L182: ( R12 -level 1 ) c= ( succ R15 )
proof
let R1 being set;
assume L183: R1 in ( R12 -level 1 );
consider R16 being (Element of R12) such that L184: R1 = R16 and L185: ( len R16 ) = 1 by L183;
L186: R16 = <* ( R16 . 1 ) *> by L185 , FINSEQ_1:40;
L187: ( rng R16 ) = { ( R16 . 1 ) } by L186 , FINSEQ_1:39;
reconsider D17 = ( R16 . 1 ) as (Element of ( NAT )) by L187 , ZFMISC_1:31;
L188: R16 = ( R15 ^ <* D17 *> ) by L181 , L186 , FINSEQ_1:34;
thus L189: thesis by L188 , L184;
end;

let R1 being set;
assume L190: R1 in ( succ R15 );
consider R20 being (Element of ( NAT )) such that L191: R1 = ( R15 ^ <* R20 *> ) and L192: ( R15 ^ <* R20 *> ) in R12 by L190;
reconsider D18 = ( R15 ^ <* R20 *> ) as (Element of R12) by L192;
L193: (( len <* R20 *> ) = 1 & D18 = <* R20 *>) by L181 , FINSEQ_1:34 , FINSEQ_1:39;
thus L194: thesis by L193 , L191;
end;
theorem
L195: (for R12 being Tree holds R12 = ( union { ( R12 -level R26 ) where R26 is (Element of ( NAT )) : (not contradiction) } ))
proof
let R12 being Tree;
thus L196: R12 c= ( union { ( R12 -level R26 ) where R26 is (Element of ( NAT )) : (not contradiction) } )
proof
let R1 being set;
assume L197: R1 in R12;
reconsider D19 = R1 as (Element of R12) by L197;
L198: R1 in ( R12 -level ( len D19 ) );
L199: ( R12 -level ( len D19 ) ) in { ( R12 -level R26 ) where R26 is (Element of ( NAT )) : (not contradiction) };
thus L200: thesis by L199 , L198 , TARSKI:def 4;
end;

let R1 being set;
assume L201: R1 in ( union { ( R12 -level R26 ) where R26 is (Element of ( NAT )) : (not contradiction) } );
consider R7 being set such that L202: (R1 in R7 & R7 in { ( R12 -level R26 ) where R26 is (Element of ( NAT )) : (not contradiction) }) by L201 , TARSKI:def 4;
L203: (ex R26 being (Element of ( NAT )) st R7 = ( R12 -level R26 )) by L202;
thus L204: thesis by L203 , L202;
end;
theorem
L205: (for B16 being  finite Tree holds B16 = ( union { ( B16 -level R26 ) where R26 is (Element of ( NAT )) : R26 <= ( height B16 ) } ))
proof
let C17 being  finite Tree;
thus L206: C17 c= ( union { ( C17 -level R26 ) where R26 is (Element of ( NAT )) : R26 <= ( height C17 ) } )
proof
let R1 being set;
assume L207: R1 in C17;
reconsider D20 = R1 as (Element of C17) by L207;
L208: ( len D20 ) <= ( height C17 ) by TREES_1:def 12;
L209: D20 in ( C17 -level ( len D20 ) );
L210: ( C17 -level ( len D20 ) ) in { ( C17 -level R26 ) where R26 is (Element of ( NAT )) : R26 <= ( height C17 ) } by L208;
thus L211: thesis by L210 , L209 , TARSKI:def 4;
end;

let R1 being set;
assume L212: R1 in ( union { ( C17 -level R26 ) where R26 is (Element of ( NAT )) : R26 <= ( height C17 ) } );
consider R7 being set such that L213: (R1 in R7 & R7 in { ( C17 -level R26 ) where R26 is (Element of ( NAT )) : R26 <= ( height C17 ) }) by L212 , TARSKI:def 4;
L214: (ex R26 being (Element of ( NAT )) st (R7 = ( C17 -level R26 ) & R26 <= ( height C17 ))) by L213;
thus L215: thesis by L214 , L213;
end;
theorem
L216: (for R12 being Tree holds (for B17 being (Level of R12) holds (ex R26 being (Element of ( NAT )) st B17 = ( R12 -level R26 ))))
proof
let R12 being Tree;
let C18 being (Level of R12);
consider C19 being Nat such that L217: C18 = { R15 where R15 is (Element of R12) : ( len R15 ) = C19 } by L116;
reconsider D21 = C19 as (Element of ( NAT )) by ORDINAL1:def 12;
take D21;
thus L218: thesis by L217;
end;
scheme FraenkelCard { F2() -> non  empty set , F3() -> set , F4(set) -> set } : ( card { F4(B18) where B18 is (Element of F2()) : B18 in F3() } ) c= ( card F3() )
proof
consider R17 being Function such that L219: (( dom R17 ) = F3() & (for R1 being set holds (R1 in F3() implies ( R17 . R1 ) = F4(R1)))) from FUNCT_1:sch 3;
L220: { F4(B19) where B19 is (Element of F2()) : B19 in F3() } c= ( rng R17 )
proof
let R1 being set;
assume L221: R1 in { F4(B20) where B20 is (Element of F2()) : B20 in F3() };
consider C20 being (Element of F2()) such that L222: R1 = F4(C20) and L223: C20 in F3() by L221;
L224: ( R17 . C20 ) = R1 by L219 , L222 , L223;
thus L225: thesis by L224 , L219 , L223 , FUNCT_1:def 3;
end;
thus L226: thesis by L220 , L219 , CARD_1:12;
end;
scheme FraenkelFinCard { F5() -> non  empty set , F6 , F7() ->  finite set , F8(set) -> set } : ( card F7() ) <= ( card F6() )
provided
L227: F7() = { F8(B21) where B21 is (Element of F5()) : B21 in F6() }
proof
L228: ( card { F8(B22) where B22 is (Element of F5()) : B22 in F6() } ) c= ( card F6() ) from FraenkelCard;
thus L229: thesis by L228 , L227 , NAT_1:39;
end;
theorem
L230: (for R12 being Tree holds (R12 is  finite-order implies (ex R26 being (Element of ( NAT )) st (for R15 being (Element of R12) holds (ex B23 being  finite set st (B23 = ( succ R15 ) & ( card B23 ) <= R26))))))
proof
let R12 being Tree;
given R26 being (Element of ( NAT )) such that
L231: (for R15 being (Element of R12) holds (not ( R15 ^ <* R26 *> ) in R12));

L232: ( Seg R26 ) is  finite;
take R26;
let R15 being (Element of R12);
deffunc H1(Real) = ( R15 ^ <* ( $1 - 1 ) *> );
L233: { H1(B24) where B24 is Real : B24 in ( Seg R26 ) } is  finite from FRAENKEL:sch 21(L232);
L234: ( succ R15 ) c= { ( R15 ^ <* ( B25 - 1 ) *> ) where B25 is Real : B25 in ( Seg R26 ) }
proof
let R1 being set;
assume L235: R1 in ( succ R15 );
consider R21 being (Element of ( NAT )) such that L236: R1 = ( R15 ^ <* R21 *> ) and L237: ( R15 ^ <* R21 *> ) in R12 by L235;
L238: (not ( R15 ^ <* R26 *> ) in R12) by L231;
L239: R21 < R26 by L238 , L237 , TREES_1:def 3;
L240: ( R21 + 1 ) <= R26 by L239 , NAT_1:13;
L241: 1 <= ( R21 + 1 ) by NAT_1:11;
L242: ( R21 + 1 ) in ( Seg R26 ) by L241 , L240 , FINSEQ_1:1;
L243: ( ( R21 + 1 ) - 1 ) = R21;
thus L244: thesis by L243 , L236 , L242;
end;
reconsider D22 = ( succ R15 ) as  finite set by L234 , L233;
take D22;
thus L245: D22 = ( succ R15 );
set D23 = { H1(B26) where B26 is Real : B26 in ( Seg R26 ) };
L246: D23 is  finite from FRAENKEL:sch 21(L232);
reconsider D24 = D23 as  finite set by L246;
L247: D24 = { H1(B27) where B27 is Real : B27 in ( Seg R26 ) };
L248: ( card D24 ) <= ( card ( Seg R26 ) ) from FraenkelFinCard(L247);
L249: ( card D24 ) <= R26 by L248 , FINSEQ_1:57;
L250: ( card D22 ) <= ( card D24 ) by L234 , NAT_1:43;
thus L251: thesis by L250 , L249 , XXREAL_0:2;
end;
theorem
L252: (for R12 being Tree holds (for R15 being (Element of R12) holds (R12 is  finite-order implies ( succ R15 ) is  finite)))
proof
let R12 being Tree;
let R15 being (Element of R12);
assume L253: R12 is  finite-order;
consider R26 being (Element of ( NAT )) such that L254: (for R15 being (Element of R12) holds (ex B28 being  finite set st (B28 = ( succ R15 ) & ( card B28 ) <= R26))) by L253 , L230;
L255: (ex B29 being  finite set st (B29 = ( succ R15 ) & ( card B29 ) <= R26)) by L254;
thus L256: thesis by L255;
end;
registration
let C21 being  finite-order Tree;
let C22 being (Element of C21);
cluster ( succ C22 ) ->  finite;
coherence by L252;
end;
theorem
L258: (for R12 being Tree holds ( {} ) is (Chain of R12))
proof
let R12 being Tree;
reconsider D25 = ( {} ) as (Subset of R12) by XBOOLE_1:2;
L259: D25 is (Chain of R12)
proof
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
thus L260: thesis;
end;
thus L261: thesis by L259;
end;
theorem
L262: (for R12 being Tree holds { ( {} ) } is (Chain of R12))
proof
let R12 being Tree;
L263: ( {} ) in R12 by TREES_1:22;
reconsider D26 = { ( {} ) } as (Subset of R12) by L263 , ZFMISC_1:31;
L264: D26 is (Chain of R12)
proof
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume that
L265: R30 in D26
and
L266: R31 in D26;
L267: R30 = ( {} ) by L265 , TARSKI:def 1;
thus L268: thesis by L267 , L266 , TARSKI:def 1;
end;
thus L269: thesis by L264;
end;
registration
let R12 being Tree;
cluster non  empty for (Chain of R12);
existence
proof
L270: { ( {} ) } is (Chain of R12) by L262;
thus L271: thesis by L270;
end;
end;
definition
let R12 being Tree;
let C23 being (Chain of R12);
attr C23 is  Branch-like
means
:L273: ((for R30 being (FinSequence of ( NAT )) holds (R30 in C23 implies ( ProperPrefixes R30 ) c= C23)) & (not (ex R30 being (FinSequence of ( NAT )) st (R30 in R12 & (for R31 being (FinSequence of ( NAT )) holds (R31 in C23 implies R31 is_a_proper_prefix_of R30))))));
end;
registration
let R12 being Tree;
cluster  Branch-like for (Chain of R12);
existence
proof
defpred S3[ set ] means ($1 is (Chain of R12) & (for R30 being (FinSequence of ( NAT )) holds (R30 in $1 implies ( ProperPrefixes R30 ) c= $1)));
consider R7 being set such that L275: (for R10 being set holds (R10 in R7 iff (R10 in ( bool R12 ) & S3[ R10 ]))) from XBOOLE_0:sch 1;
L276: (( {} ) is (Chain of R12) & (for R30 being (FinSequence of ( NAT )) holds (R30 in ( {} ) implies ( ProperPrefixes R30 ) c= ( {} )))) by L258;
L277: R7 <> ( {} ) by L276 , L275;
L278:
now
let R11 being set;
assume that
L279: R11 <> ( {} )
and
L280: R11 c= R7
and
L281: R11 is  c=-linear;
L282: ( union R11 ) c= R12
proof
let R1 being set;
assume L283: R1 in ( union R11 );
consider R10 being set such that L284: R1 in R10 and L285: R10 in R11 by L283 , TARSKI:def 4;
L286: R10 in ( bool R12 ) by L275 , L280 , L285;
thus L287: thesis by L286 , L284;
end;
reconsider D27 = ( union R11 ) as (Subset of R12) by L282;
L288: D27 is (Chain of R12)
proof
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume L289: R30 in D27;
consider R8 being set such that L290: R30 in R8 and L291: R8 in R11 by L289 , TARSKI:def 4;
assume L292: R31 in D27;
consider R9 being set such that L293: R31 in R9 and L294: R9 in R11 by L292 , TARSKI:def 4;
L295: R8 , R9 are_c=-comparable  by L281 , L291 , L294 , ORDINAL1:def 8;
L296: (R8 c= R9 or R9 c= R8) by L295 , XBOOLE_0:def 9;
L297: R8 is (Chain of R12) by L275 , L280 , L291;
L298: R9 is (Chain of R12) by L275 , L280 , L294;
thus L299: thesis by L298 , L290 , L293 , L296 , L297 , L114;
end;
L300:
now
let R30 being (FinSequence of ( NAT ));
assume L301: R30 in ( union R11 );
consider R8 being set such that L302: (R30 in R8 & R8 in R11) by L301 , TARSKI:def 4;
L303: (( ProperPrefixes R30 ) c= R8 & R8 c= ( union R11 )) by L275 , L280 , L302 , ZFMISC_1:74;
thus L304: ( ProperPrefixes R30 ) c= ( union R11 ) by L303 , XBOOLE_1:1;
end;
thus L305: ( union R11 ) in R7 by L300 , L275 , L288;
end;
consider R10 being set such that L306: R10 in R7 and L307: (for R11 being set holds ((R11 in R7 & R11 <> R10) implies (not R10 c= R11))) by L278 , L277 , ORDERS_1:67;
reconsider D28 = R10 as (Chain of R12) by L275 , L306;
take D28;
thus L308: (for R30 being (FinSequence of ( NAT )) holds (R30 in D28 implies ( ProperPrefixes R30 ) c= D28)) by L275 , L306;
given R30 being (FinSequence of ( NAT )) such that
L309: R30 in R12
and
L310: (for R31 being (FinSequence of ( NAT )) holds (R31 in D28 implies R31 is_a_proper_prefix_of R30));

set D29 = ( ( ProperPrefixes R30 ) \/ { R30 } );
L311: (( ProperPrefixes R30 ) c= R12 & { R30 } c= R12) by L309 , TREES_1:def 3 , ZFMISC_1:31;
reconsider D30 = D29 as (Subset of R12) by L311 , XBOOLE_1:8;
L312: D30 is (Chain of R12)
proof
let R31 being (FinSequence of ( NAT ));
let R32 being (FinSequence of ( NAT ));
assume that
L313: R31 in D30
and
L314: R32 in D30;
L315: (R31 in ( ProperPrefixes R30 ) or R31 in { R30 }) by L313 , XBOOLE_0:def 3;
L316: (R32 in ( ProperPrefixes R30 ) or R32 in { R30 }) by L314 , XBOOLE_0:def 3;
L317: (R31 is_a_proper_prefix_of R30 or R31 = R30) by L315 , TARSKI:def 1 , TREES_1:12;
L318: (R32 is_a_proper_prefix_of R30 or R32 = R30) by L316 , TARSKI:def 1 , TREES_1:12;
L319: R31 is_a_prefix_of R30 by L317 , XBOOLE_0:def 8;
L320: R32 is_a_prefix_of R30 by L318 , XBOOLE_0:def 8;
thus L321: thesis by L320 , L319 , L1;
end;
L322:
now
let R31 being (FinSequence of ( NAT ));
assume L323: R31 in D29;
L324: (R31 in ( ProperPrefixes R30 ) or R31 in { R30 }) by L323 , XBOOLE_0:def 3;
L325: (R31 is_a_proper_prefix_of R30 or R31 = R30) by L324 , TARSKI:def 1 , TREES_1:12;
L326: R31 is_a_prefix_of R30 by L325 , XBOOLE_0:def 8;
L327: ( ProperPrefixes R31 ) c= ( ProperPrefixes R30 ) by L326 , TREES_1:17;
L328: ( ProperPrefixes R30 ) c= D29 by XBOOLE_1:7;
thus L329: ( ProperPrefixes R31 ) c= D29 by L328 , L327 , XBOOLE_1:1;
end;
L330: D29 in R7 by L322 , L275 , L312;
L331: R30 in { R30 } by TARSKI:def 1;
L332: (not R30 in D28) by L310;
L333: R30 in D29 by L331 , XBOOLE_0:def 3;
L334: D28 c= D29
proof
let R1 being set;
assume L335: R1 in D28;
reconsider D31 = R1 as (Element of R12) by L335;
L336: D31 is_a_proper_prefix_of R30 by L310 , L335;
L337: D31 in ( ProperPrefixes R30 ) by L336 , TREES_1:12;
thus L338: thesis by L337 , XBOOLE_0:def 3;
end;
thus L339: thesis by L334 , L307 , L330 , L332 , L333;
end;
end;
definition
let R12 being Tree;
mode Branch of R12
 is  Branch-like (Chain of R12);
end;
registration
let R12 being Tree;
cluster  Branch-like -> non  empty for (Chain of R12);
coherence
proof
let C24 being (Chain of R12);
assume that
L342: C24 is  Branch-like  empty;
set D32 = the (Element of R12);
L343: (for R31 being (FinSequence of ( NAT )) holds (R31 in C24 implies R31 is_a_proper_prefix_of D32)) by L342;
thus L344: contradiction by L343 , L342 , L273;
end;
end;
theorem
L346: (for R12 being Tree holds (for R28 being FinSequence holds (for R29 being FinSequence holds (for R35 being (Chain of R12) holds ((R28 in R35 & R29 in R35) implies (R28 in ( ProperPrefixes R29 ) or R29 is_a_prefix_of R28))))))
proof
let R12 being Tree;
let R28 being FinSequence;
let R29 being FinSequence;
let R35 being (Chain of R12);
assume L347: (R28 in R35 & R29 in R35);
reconsider D33 = R28 , D34 = R29 as (Element of R12) by L347;
assume L348: (not R28 in ( ProperPrefixes R29 ));
L349: D33 , D34 are_c=-comparable  by L347 , L114;
L350: (not R28 is_a_proper_prefix_of R29) by L348 , TREES_1:12;
L351: (R28 is_a_prefix_of R29 or R29 is_a_prefix_of R28) by L349 , XBOOLE_0:def 9;
thus L352: thesis by L351 , L350 , XBOOLE_0:def 8;
end;
theorem
L353: (for R12 being Tree holds (for R27 being FinSequence holds (for R28 being FinSequence holds (for R29 being FinSequence holds (for R35 being (Chain of R12) holds ((R28 in R35 & R29 in R35 & R27 is_a_prefix_of R29) implies (R28 in ( ProperPrefixes R27 ) or R27 is_a_prefix_of R28)))))))
proof
let R12 being Tree;
let R27 being FinSequence;
let R28 being FinSequence;
let R29 being FinSequence;
let R35 being (Chain of R12);
assume that
L354: (R28 in R35 & R29 in R35)
and
L355: R27 is_a_prefix_of R29;
L356: (R28 in ( ProperPrefixes R29 ) or R29 is_a_prefix_of R28) by L354 , L346;
L357: (R28 is_a_proper_prefix_of R29 or R27 is_a_prefix_of R28) by L356 , L355 , TREES_1:12 , XBOOLE_1:1;
L358: R27 , R28 are_c=-comparable  by L357 , L355 , L9 , XBOOLE_0:def 9;
L359: (R27 is_a_proper_prefix_of R28 or R27 = R28 or R28 is_a_proper_prefix_of R27) by L358 , XBOOLE_1:104;
thus L360: thesis by L359 , TREES_1:12 , XBOOLE_0:def 8;
end;
registration
let R12 being Tree;
cluster  finite for (Chain of R12);
existence
proof
reconsider D35 = ( {} ) as (Chain of R12) by L258;
take D35;
thus L361: thesis;
end;
end;
theorem
L363: (for R12 being Tree holds (for R26 being (Element of ( NAT )) holds (for B30 being  finite (Chain of R12) holds (( card B30 ) > R26 implies (ex R30 being (FinSequence of ( NAT )) st (R30 in B30 & ( len R30 ) >= R26))))))
proof
let R12 being Tree;
let R26 being (Element of ( NAT ));
let C25 being  finite (Chain of R12);
defpred S4[ (Element of ( NAT )) ] means ($1 < ( card C25 ) implies (ex R30 being (FinSequence of ( NAT )) st (R30 in C25 & ( len R30 ) >= $1)));
L364: S4[ ( 0 ) ]
proof
assume L365: ( 0 ) < ( card C25 );
L366: C25 <> ( {} ) by L365;
set D36 = the (Element of C25);
reconsider D37 = D36 as (Element of R12) by L365 , CARD_1:27 , TARSKI:def 3;
reconsider D38 = D37 as (FinSequence of ( NAT ));
take D38;
thus L367: thesis by L366;
end;
L368: (for R21 being (Element of ( NAT )) holds (S4[ R21 ] implies S4[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
assume that
L369: (R21 < ( card C25 ) implies (ex R30 being (FinSequence of ( NAT )) st (R30 in C25 & ( len R30 ) >= R21)))
and
L370: ( R21 + 1 ) < ( card C25 );
L371: R21 <= ( R21 + 1 ) by NAT_1:11;
L372: R21 < ( card C25 ) by L371 , L370 , XXREAL_0:2;
consider R30 being (FinSequence of ( NAT )) such that L373: R30 in C25 and L374: ( len R30 ) >= R21 by L369 , L370 , L371 , XXREAL_0:2;
reconsider D39 = ( R30 | ( Seg R21 ) ) as FinSequence by FINSEQ_1:15;
L375: ( len D39 ) = R21 by L374 , FINSEQ_1:17;
L376: ( card ( ProperPrefixes D39 ) ) = R21 by L375 , TREES_1:35;
L377: ( card ( ProperPrefixes D39 ) ) in ( card C25 ) by L376 , L372 , NAT_1:44;
L378: ( C25 \ ( ProperPrefixes D39 ) ) <> ( {} ) by L377 , CARD_1:68;
set D40 = the (Element of ( C25 \ ( ProperPrefixes D39 ) ));
L379: D40 in C25 by L378 , XBOOLE_0:def 5;
L380: (not D40 in ( ProperPrefixes D39 )) by L378 , XBOOLE_0:def 5;
reconsider D41 = D40 as (Element of R12) by L379;
L381: ( card ( ( ProperPrefixes D39 ) \/ { D41 } ) ) = ( R21 + 1 ) by L376 , L380 , CARD_2:41;
L382: ( card ( ( ProperPrefixes D39 ) \/ { D41 } ) ) in ( card C25 ) by L381 , L370 , NAT_1:44;
L383: ( C25 \ ( ( ProperPrefixes D39 ) \/ { D41 } ) ) <> ( {} ) by L382 , CARD_1:68;
set D42 = the (Element of ( C25 \ ( ( ProperPrefixes D39 ) \/ { D41 } ) ));
L384: D42 in C25 by L383 , XBOOLE_0:def 5;
L385: (not D42 in ( ( ProperPrefixes D39 ) \/ { D41 } )) by L383 , XBOOLE_0:def 5;
reconsider D43 = D42 as (Element of R12) by L384;
L386: (not D43 in ( ProperPrefixes D39 )) by L385 , XBOOLE_0:def 3;
L387: (not D43 in { D41 }) by L385 , XBOOLE_0:def 3;
L388: D39 is_a_prefix_of R30 by TREES_1:def 1;
L389: D39 is_a_prefix_of D41 by L388 , L373 , L379 , L380 , L353;
L390: D39 is_a_prefix_of D43 by L373 , L384 , L386 , L388 , L353;
L391: D41 <> D43 by L387 , TARSKI:def 1;
L392: (D41 = D39 or D41 <> D39);
L393: (D39 is_a_proper_prefix_of D43 or D39 is_a_proper_prefix_of D41) by L392 , L389 , L390 , L391 , XBOOLE_0:def 8;
L394: (R21 < ( len D41 ) or R21 < ( len D43 )) by L393 , L375 , TREES_1:6;
L395: (( R21 + 1 ) <= ( len D41 ) or ( R21 + 1 ) <= ( len D43 )) by L394 , NAT_1:13;
thus L396: thesis by L395 , L379 , L384;
end;
L397: (for R21 being (Element of ( NAT )) holds S4[ R21 ]) from NAT_1:sch 1(L364 , L368);
thus L398: thesis by L397;
end;
theorem
L399: (for R12 being Tree holds (for R35 being (Chain of R12) holds { R15 where R15 is (Element of R12) : (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)) } is (Chain of R12)))
proof
let R12 being Tree;
let R35 being (Chain of R12);
L400: { R15 where R15 is (Element of R12) : (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)) } c= R12
proof
let R1 being set;
assume L401: R1 in { R15 where R15 is (Element of R12) : (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)) };
L402: (ex R15 being (Element of R12) st (R1 = R15 & (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)))) by L401;
thus L403: thesis by L402;
end;
reconsider D44 = { R15 where R15 is (Element of R12) : (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)) } as (Subset of R12) by L400;
L404: D44 is (Chain of R12)
proof
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume L405: R30 in D44;
L406: (ex R15 being (Element of R12) st (R30 = R15 & (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)))) by L405;
consider R33 being (FinSequence of ( NAT )) such that L407: R33 in R35 and L408: R30 is_a_prefix_of R33 by L406;
assume L409: R31 in D44;
L410: (ex R16 being (Element of R12) st (R31 = R16 & (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R16 is_a_prefix_of R30)))) by L409;
consider R34 being (FinSequence of ( NAT )) such that L411: R34 in R35 and L412: R31 is_a_prefix_of R34 by L410;
L413: R33 , R34 are_c=-comparable  by L407 , L411 , L114;
L414: (R33 is_a_prefix_of R34 or R34 is_a_prefix_of R33) by L413 , XBOOLE_0:def 9;
L415: (R30 is_a_prefix_of R34 or R31 is_a_prefix_of R33) by L414 , L408 , L412 , XBOOLE_1:1;
thus L416: thesis by L415 , L408 , L412 , L1;
end;
thus L417: thesis by L404;
end;
theorem
L418: (for R12 being Tree holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds (for R36 being (Branch of R12) holds ((R30 is_a_prefix_of R31 & R31 in R36) implies R30 in R36)))))
proof
let R12 being Tree;
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
let R36 being (Branch of R12);
assume L419: R30 is_a_prefix_of R31;
L420: (R30 is_a_proper_prefix_of R31 or R30 = R31) by L419 , XBOOLE_0:def 8;
L421: (R30 in ( ProperPrefixes R31 ) or R30 = R31) by L420 , TREES_1:def 2;
assume L422: R31 in R36;
L423: ( ProperPrefixes R31 ) c= R36 by L422 , L273;
thus L424: thesis by L423 , L421 , L422;
end;
theorem
L425: (for R12 being Tree holds (for R36 being (Branch of R12) holds ( {} ) in R36))
proof
let R12 being Tree;
let R36 being (Branch of R12);
set D45 = the (Element of R36);
reconsider D46 = D45 as (Element of R12);
L426: ( <*> ( NAT ) ) is_a_prefix_of D46 by XBOOLE_1:2;
thus L427: thesis by L426 , L418;
end;
theorem
L428: (for R12 being Tree holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds (for R35 being (Chain of R12) holds ((R30 in R35 & R31 in R35 & ( len R30 ) <= ( len R31 )) implies R30 is_a_prefix_of R31)))))
proof
let R12 being Tree;
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
let R35 being (Chain of R12);
assume L429: (R30 in R35 & R31 in R35 & ( len R30 ) <= ( len R31 ) & (not R30 is_a_prefix_of R31));
L430: (R31 in ( ProperPrefixes R30 ) & (not R31 is_a_proper_prefix_of R30)) by L429 , L346 , TREES_1:6;
thus L431: contradiction by L430 , TREES_1:12;
end;
theorem
L432: (for R12 being Tree holds (for R35 being (Chain of R12) holds (ex R36 being (Branch of R12) st R35 c= R36)))
proof
let R12 being Tree;
let R35 being (Chain of R12);
defpred S5[ set ] means ($1 is (Chain of R12) & R35 c= $1 & (for R30 being (FinSequence of ( NAT )) holds (R30 in $1 implies ( ProperPrefixes R30 ) c= $1)));
consider R7 being set such that L433: (for R10 being set holds (R10 in R7 iff (R10 in ( bool R12 ) & S5[ R10 ]))) from XBOOLE_0:sch 1;
set D47 = { R15 where R15 is (Element of R12) : (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)) };
L434: D47 is (Chain of R12) by L399;
L435: R35 c= D47
proof
let R1 being set;
assume L436: R1 in R35;
reconsider D48 = R1 as (Element of R12) by L436;
L437: D48 is_a_prefix_of D48;
thus L438: thesis by L437 , L436;
end;
L439:
now
let R30 being (FinSequence of ( NAT ));
assume L440: R30 in D47;
L441: (ex R15 being (Element of R12) st (R30 = R15 & (ex R30 being (FinSequence of ( NAT )) st (R30 in R35 & R15 is_a_prefix_of R30)))) by L440;
consider R31 being (FinSequence of ( NAT )) such that L442: R31 in R35 and L443: R30 is_a_prefix_of R31 by L441;
thus L444: ( ProperPrefixes R30 ) c= D47
proof
let R1 being set;
assume L445: R1 in ( ProperPrefixes R30 );
consider C26 being FinSequence such that L446: R1 = C26 and L447: C26 is_a_proper_prefix_of R30 by L445 , TREES_1:def 2;
L448: C26 is_a_prefix_of R30 by L447 , XBOOLE_0:def 8;
L449: (C26 is_a_prefix_of R31 & C26 in R12) by L448 , L441 , L443 , TREES_1:20 , XBOOLE_1:1;
thus L450: thesis by L449 , L442 , L446;
end;

end;
L445: R7 <> ( {} ) by L439 , L433 , L434 , L435;
L446:
now
let R11 being set;
assume that
L447: R11 <> ( {} )
and
L448: R11 c= R7
and
L449: R11 is  c=-linear;
L450: ( union R11 ) c= R12
proof
let R1 being set;
assume L451: R1 in ( union R11 );
consider R10 being set such that L452: R1 in R10 and L453: R10 in R11 by L451 , TARSKI:def 4;
L454: R10 in ( bool R12 ) by L433 , L448 , L453;
thus L455: thesis by L454 , L452;
end;
reconsider D49 = ( union R11 ) as (Subset of R12) by L450;
L456: D49 is (Chain of R12)
proof
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume L457: R30 in D49;
consider R8 being set such that L458: R30 in R8 and L459: R8 in R11 by L457 , TARSKI:def 4;
assume L460: R31 in D49;
consider R9 being set such that L461: R31 in R9 and L462: R9 in R11 by L460 , TARSKI:def 4;
L463: R8 , R9 are_c=-comparable  by L449 , L459 , L462 , ORDINAL1:def 8;
L464: (R8 c= R9 or R9 c= R8) by L463 , XBOOLE_0:def 9;
L465: R8 is (Chain of R12) by L433 , L448 , L459;
L466: R9 is (Chain of R12) by L433 , L448 , L462;
thus L467: thesis by L466 , L458 , L461 , L464 , L465 , L114;
end;
L468:
now
let R30 being (FinSequence of ( NAT ));
assume L469: R30 in ( union R11 );
consider R8 being set such that L470: (R30 in R8 & R8 in R11) by L469 , TARSKI:def 4;
L471: (( ProperPrefixes R30 ) c= R8 & R8 c= ( union R11 )) by L433 , L448 , L470 , ZFMISC_1:74;
thus L472: ( ProperPrefixes R30 ) c= ( union R11 ) by L471 , XBOOLE_1:1;
end;
set D50 = the (Element of R11);
L473: D50 in R7 by L447 , L448 , TARSKI:def 3;
L474: R35 c= D50 by L473 , L433;
L475: D50 c= ( union R11 ) by L447 , ZFMISC_1:74;
L476: R35 c= ( union R11 ) by L475 , L474 , XBOOLE_1:1;
thus L477: ( union R11 ) in R7 by L476 , L433 , L456 , L468;
end;
consider R10 being set such that L478: R10 in R7 and L479: (for R11 being set holds ((R11 in R7 & R11 <> R10) implies (not R10 c= R11))) by L446 , L445 , ORDERS_1:67;
reconsider D51 = R10 as (Chain of R12) by L433 , L478;
L480:
now
thus L481: (for R30 being (FinSequence of ( NAT )) holds (R30 in D51 implies ( ProperPrefixes R30 ) c= D51)) by L433 , L478;
given R30 being (FinSequence of ( NAT )) such that
L482: R30 in R12
and
L483: (for R31 being (FinSequence of ( NAT )) holds (R31 in D51 implies R31 is_a_proper_prefix_of R30));

set D52 = ( ( ProperPrefixes R30 ) \/ { R30 } );
L484: (( ProperPrefixes R30 ) c= R12 & { R30 } c= R12) by L482 , TREES_1:def 3 , ZFMISC_1:31;
reconsider D53 = D52 as (Subset of R12) by L484 , XBOOLE_1:8;
L485: D53 is (Chain of R12)
proof
let R31 being (FinSequence of ( NAT ));
let R32 being (FinSequence of ( NAT ));
assume that
L486: R31 in D53
and
L487: R32 in D53;
L488: (R31 in ( ProperPrefixes R30 ) or R31 in { R30 }) by L486 , XBOOLE_0:def 3;
L489: (R32 in ( ProperPrefixes R30 ) or R32 in { R30 }) by L487 , XBOOLE_0:def 3;
L490: (R31 is_a_proper_prefix_of R30 or R31 = R30) by L488 , TARSKI:def 1 , TREES_1:12;
L491: (R32 is_a_proper_prefix_of R30 or R32 = R30) by L489 , TARSKI:def 1 , TREES_1:12;
L492: R31 is_a_prefix_of R30 by L490 , XBOOLE_0:def 8;
L493: R32 is_a_prefix_of R30 by L491 , XBOOLE_0:def 8;
thus L494: thesis by L493 , L492 , L1;
end;
L495:
now
let R31 being (FinSequence of ( NAT ));
assume L496: R31 in D52;
L497: (R31 in ( ProperPrefixes R30 ) or R31 in { R30 }) by L496 , XBOOLE_0:def 3;
L498: (R31 is_a_proper_prefix_of R30 or R31 = R30) by L497 , TARSKI:def 1 , TREES_1:12;
L499: R31 is_a_prefix_of R30 by L498 , XBOOLE_0:def 8;
L500: ( ProperPrefixes R31 ) c= ( ProperPrefixes R30 ) by L499 , TREES_1:17;
L501: ( ProperPrefixes R30 ) c= D52 by XBOOLE_1:7;
thus L502: ( ProperPrefixes R31 ) c= D52 by L501 , L500 , XBOOLE_1:1;
end;
L503: D51 c= D52
proof
let R1 being set;
assume L504: R1 in D51;
reconsider D54 = R1 as (Element of R12) by L504;
L505: D54 is_a_proper_prefix_of R30 by L483 , L504;
L506: D54 in ( ProperPrefixes R30 ) by L505 , TREES_1:12;
thus L507: thesis by L506 , XBOOLE_0:def 3;
end;
L508: R35 c= D51 by L433 , L478;
L509: R35 c= D52 by L508 , L503 , XBOOLE_1:1;
L510: D52 in R7 by L509 , L433 , L485 , L495;
L511: R30 in { R30 } by TARSKI:def 1;
L512: (not R30 in D51) by L483;
L513: R30 in D52 by L511 , XBOOLE_0:def 3;
thus L514: contradiction by L513 , L479 , L503 , L510 , L512;
end;
reconsider D55 = D51 as (Branch of R12) by L480 , L273;
take D55;
thus L515: thesis by L433 , L478;
end;
scheme FuncExOfMinNat { P2[set , Nat] , F9() -> set } : (ex R17 being Function st (( dom R17 ) = F9() & (for R1 being set holds (R1 in F9() implies (ex R26 being (Element of ( NAT )) st (( R17 . R1 ) = R26 & P2[ R1 , R26 ] & (for R25 being (Element of ( NAT )) holds (P2[ R1 , R25 ] implies R26 <= R25))))))))
provided
L516: (for R1 being set holds (R1 in F9() implies (ex R26 being (Element of ( NAT )) st P2[ R1 , R26 ])))
proof
defpred S6[ set , set ] means (ex R26 being (Element of ( NAT )) st ($2 = R26 & P2[ $1 , R26 ] & (for R25 being (Element of ( NAT )) holds (P2[ $1 , R25 ] implies R26 <= R25))));
L517: (for R1 being set holds (R1 in F9() implies (ex R2 being set st S6[ R1 , R2 ])))
proof
let R1 being set;
defpred S7[ Nat ] means P2[ R1 , $1 ];
assume L518: R1 in F9();
L519: (ex R26 being (Element of ( NAT )) st S7[ R26 ]) by L518 , L516;
L520: (ex B31 being Nat st S7[ B31 ]) by L519;
consider C27 being Nat such that L521: (S7[ C27 ] & (for B32 being Nat holds (S7[ B32 ] implies C27 <= B32))) from NAT_1:sch 5(L520);
take C27;
L522: (C27 in ( NAT ) & (for R25 being (Element of ( NAT )) holds (S7[ R25 ] implies C27 <= R25))) by L521 , ORDINAL1:def 12;
thus L523: thesis by L522 , L521;
end;
thus L524: (ex R17 being Function st (( dom R17 ) = F9() & (for R1 being set holds (R1 in F9() implies S6[ R1 , ( R17 . R1 ) ])))) from CLASSES1:sch 1(L517);
end;
L525: (for R7 being set holds (R7 is  finite implies (ex R26 being (Element of ( NAT )) st (for R21 being (Element of ( NAT )) holds (R21 in R7 implies R21 <= R26)))))
proof
let R7 being set;
assume L526: R7 is  finite;
defpred S8[ set , set ] means (ex B33 , B34 being (Element of ( NAT )) st ($1 = B33 & $2 = B34 & B33 >= B34));
L527:
now
per cases ;
suppose L528: ( R7 /\ ( NAT ) ) = ( {} );

thus L529: thesis
proof
take ( 0 );
let R21 being (Element of ( NAT ));
assume L530: R21 in R7;
thus L531: thesis by L530 , L528 , XBOOLE_0:def 4;
end;

end;
suppose L530: ( R7 /\ ( NAT ) ) <> ( {} );

reconsider D56 = ( R7 /\ ( NAT ) ) as  finite set by L526;
L531: D56 <> ( {} ) by L530;
L532: (for R1 being set holds (for R2 being set holds ((S8[ R1 , R2 ] & S8[ R2 , R1 ]) implies R1 = R2))) by XXREAL_0:1;
L533: (for R1 being set holds (for R2 being set holds (for R3 being set holds ((S8[ R1 , R2 ] & S8[ R2 , R3 ]) implies S8[ R1 , R3 ])))) by XXREAL_0:2;
consider R1 being set such that L534: (R1 in D56 & (for R2 being set holds ((R2 in D56 & R2 <> R1) implies (not S8[ R2 , R1 ])))) from CARD_2:sch 1(L531 , L532 , L533);
reconsider D57 = R1 as (Element of ( NAT )) by L534 , XBOOLE_0:def 4;
take D58 = D57;
let R21 being (Element of ( NAT ));
assume L535: R21 in R7;
L536: R21 in ( R7 /\ ( NAT ) ) by L535 , XBOOLE_0:def 4;
thus L537: R21 <= D58 by L536 , L534;
end;
end;
thus L539: thesis by L527;
end;
scheme InfiniteChain { F10() -> set , F11() -> set , P3[set] , P4[set , set] } : (ex R17 being Function st (( dom R17 ) = ( NAT ) & ( rng R17 ) c= F10() & ( R17 . ( 0 ) ) = F11() & (for R21 being (Element of ( NAT )) holds (P4[ ( R17 . R21 ) , ( R17 . ( R21 + 1 ) ) ] & P3[ ( R17 . R21 ) ]))))
provided
L540: (F11() in F10() & P3[ F11() ])
and
L541: (for R1 being set holds ((R1 in F10() & P3[ R1 ]) implies (ex R2 being set st (R2 in F10() & P4[ R1 , R2 ] & P3[ R2 ]))))
proof
consider R10 being set such that L542: (for R1 being set holds (R1 in R10 iff (R1 in F10() & P3[ R1 ]))) from XBOOLE_0:sch 1;
defpred S9[ set , set ] means ($2 in R10 & P4[ $1 , $2 ]);
L543: (for R1 being set holds (R1 in R10 implies (ex R2 being set st S9[ R1 , R2 ])))
proof
let R1 being set;
assume L544: R1 in R10;
L545: (R1 in F10() & P3[ R1 ]) by L544 , L542;
consider R2 being set such that L546: (R2 in F10() & P4[ R1 , R2 ] & P3[ R2 ]) by L545 , L541;
take R2;
thus L547: thesis by L542 , L546;
end;
consider C28 being Function such that L548: (( dom C28 ) = R10 & (for R1 being set holds (R1 in R10 implies S9[ R1 , ( C28 . R1 ) ]))) from CLASSES1:sch 1(L543);
deffunc H2(set , set) = ( C28 . $2 );
consider R17 being Function such that L549: (( dom R17 ) = ( NAT ) & ( R17 . ( 0 ) ) = F11() & (for B35 being Nat holds ( R17 . ( B35 + 1 ) ) = H2(B35 , ( R17 . B35 )))) from NAT_1:sch 11;
take R17;
thus L550: ( dom R17 ) = ( NAT ) by L549;
defpred S10[ (Element of ( NAT )) ] means ( R17 . $1 ) in R10;
L551: S10[ ( 0 ) ] by L540 , L542 , L549;
L552: (for R21 being (Element of ( NAT )) holds (S10[ R21 ] implies S10[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
assume L553: ( R17 . R21 ) in R10;
L554: ( C28 . ( R17 . R21 ) ) in R10 by L553 , L548;
thus L555: thesis by L554 , L549;
end;
L556: (for R21 being (Element of ( NAT )) holds S10[ R21 ]) from NAT_1:sch 1(L551 , L552);
thus L557: ( rng R17 ) c= F10()
proof
let R1 being set;
assume L558: R1 in ( rng R17 );
consider R2 being set such that L559: R2 in ( dom R17 ) and L560: R1 = ( R17 . R2 ) by L558 , FUNCT_1:def 3;
reconsider D59 = R2 as (Element of ( NAT )) by L549 , L559;
L561: ( R17 . D59 ) in R10 by L556;
thus L562: thesis by L561 , L542 , L560;
end;

thus L563: ( R17 . ( 0 ) ) = F11() by L549;
let R21 being (Element of ( NAT ));
L564: ( R17 . R21 ) in R10 by L556;
L565: P4[ ( R17 . R21 ) , ( C28 . ( R17 . R21 ) ) ] by L564 , L548;
thus L566: thesis by L565 , L542 , L549 , L564;
end;
theorem
L567: (for B36 being Tree holds (((for R26 being (Element of ( NAT )) holds (ex B37 being  finite (Chain of B36) st ( card B37 ) = R26)) & (for B38 being (Element of B36) holds ( succ B38 ) is  finite)) implies (ex B39 being (Chain of B36) st (not B39 is  finite))))
proof
let C29 being Tree;
assume that
L568: (for R26 being (Element of ( NAT )) holds (ex B40 being  finite (Chain of C29) st ( card B40 ) = R26))
and
L569: (for B41 being (Element of C29) holds ( succ B41 ) is  finite);
defpred S11[ FinSequence ] means (for R26 being (Element of ( NAT )) holds (ex B42 being (Branch of C29) st ($1 in B42 & (ex R30 being (FinSequence of ( NAT )) st (R30 in B42 & ( len R30 ) >= ( ( len $1 ) + R26 ))))));
L570: (for B43 being (Element of C29) holds (S11[ B43 ] implies (ex R26 being (Element of ( NAT )) st (( B43 ^ <* R26 *> ) in C29 & S11[ ( B43 ^ <* R26 *> ) ]))))
proof
let C30 being (Element of C29);
assume that
L571: S11[ C30 ]
and
L572: (for R26 being (Element of ( NAT )) holds (( C30 ^ <* R26 *> ) in C29 implies (not S11[ ( C30 ^ <* R26 *> ) ])));
L573: ( succ C30 ) is  finite by L569;
defpred S12[ set , (Element of ( NAT )) ] means (for B44 being (Branch of C29) holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 = $1 & $1 in B44 & R31 in B44) implies ( ( len R30 ) + $2 ) > ( len R31 )))));
L574: (for R2 being set holds (R2 in ( succ C30 ) implies (ex R26 being (Element of ( NAT )) st S12[ R2 , R26 ])))
proof
let R2 being set;
assume L575: R2 in ( succ C30 );
consider R21 being (Element of ( NAT )) such that L576: R2 = ( C30 ^ <* R21 *> ) and L577: ( C30 ^ <* R21 *> ) in C29 by L575;
consider R26 being (Element of ( NAT )) such that L578: (for B45 being (Branch of C29) holds (( C30 ^ <* R21 *> ) in B45 implies (for R30 being (FinSequence of ( NAT )) holds (R30 in B45 implies ( len R30 ) < ( ( len ( C30 ^ <* R21 *> ) ) + R26 ))))) by L572 , L577;
take R26;
thus L579: thesis by L576 , L578;
end;
consider R17 being Function such that L580: ( dom R17 ) = ( succ C30 ) and L581: (for R2 being set holds (R2 in ( succ C30 ) implies (ex R26 being (Element of ( NAT )) st (( R17 . R2 ) = R26 & S12[ R2 , R26 ] & (for R25 being (Element of ( NAT )) holds (S12[ R2 , R25 ] implies R26 <= R25)))))) from FuncExOfMinNat(L574);
consider R21 being (Element of ( NAT )) such that L582: (for R25 being (Element of ( NAT )) holds (R25 in ( rng R17 ) implies R25 <= R21)) by L573 , L580 , L525 , FINSET_1:8;
consider C31 being (Branch of C29) such that L583: C30 in C31 and L584: (ex R30 being (FinSequence of ( NAT )) st (R30 in C31 & ( len R30 ) >= ( ( len C30 ) + ( R21 + 1 ) ))) by L571;
consider R30 being (FinSequence of ( NAT )) such that L585: R30 in C31 and L586: ( len R30 ) >= ( ( len C30 ) + ( R21 + 1 ) ) by L584;
reconsider D60 = ( R30 | ( Seg ( ( len C30 ) + 1 ) ) ) as (FinSequence of ( NAT )) by FINSEQ_1:18;
L587: ( ( len C30 ) + 1 ) <= ( ( ( len C30 ) + 1 ) + R21 ) by NAT_1:11;
L588: ( len R30 ) >= ( ( len C30 ) + 1 ) by L587 , L586 , XXREAL_0:2;
L589: D60 is_a_prefix_of R30 by TREES_1:def 1;
L590: ( len D60 ) = ( ( len C30 ) + 1 ) by L588 , FINSEQ_1:17;
L591: D60 in C31 by L585 , L589 , L418;
L592: C30 is_a_prefix_of D60 by L591 , L583 , L590 , L428 , NAT_1:11;
consider C32 being FinSequence such that L593: D60 = ( C30 ^ C32 ) by L592 , TREES_1:1;
L594: ( ( len C30 ) + ( len C32 ) ) = ( len D60 ) by L593 , FINSEQ_1:22;
L595: C32 = <* ( C32 . 1 ) *> by L594 , L590 , FINSEQ_1:40;
L596: (( dom D60 ) = ( Seg ( len D60 ) ) & 1 <= ( 1 + ( len C30 ) )) by FINSEQ_1:def 3 , NAT_1:11;
L597: ( ( len C30 ) + 1 ) <= ( len D60 ) by L588 , FINSEQ_1:17;
L598: (( ( C30 ^ <* ( C32 . 1 ) *> ) . ( ( len C30 ) + 1 ) ) = ( C32 . 1 ) & ( ( len C30 ) + 1 ) in ( dom D60 )) by L597 , L596 , FINSEQ_1:1 , FINSEQ_1:42;
L599: ( C32 . 1 ) in ( rng D60 ) by L598 , L593 , L595 , FUNCT_1:def 3;
reconsider D61 = ( C32 . 1 ) as (Element of ( NAT )) by L599;
L600: ( C30 ^ <* D61 *> ) in ( succ C30 ) by L591 , L593 , L595;
consider R26 being (Element of ( NAT )) such that L601: ( R17 . ( C30 ^ <* D61 *> ) ) = R26 and L602: (for B46 being (Branch of C29) holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 = ( C30 ^ <* D61 *> ) & ( C30 ^ <* D61 *> ) in B46 & R31 in B46) implies ( ( len R30 ) + R26 ) > ( len R31 ))))) and L603: (for R25 being (Element of ( NAT )) holds ((for B47 being (Branch of C29) holds (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 = ( C30 ^ <* D61 *> ) & ( C30 ^ <* D61 *> ) in B47 & R31 in B47) implies ( ( len R30 ) + R25 ) > ( len R31 ))))) implies R26 <= R25)) by L600 , L581;
L604: R26 in ( rng R17 ) by L580 , L600 , L601 , FUNCT_1:def 3;
L605: R26 <= R21 by L604 , L582;
L606: ( ( len D60 ) + R26 ) <= ( ( ( len C30 ) + 1 ) + R21 ) by L605 , L590 , XREAL_1:7;
thus L607: contradiction by L606 , L585 , L586 , L591 , L593 , L595 , L602 , XXREAL_0:2;
end;
reconsider D62 = ( {} ) as (Element of C29) by TREES_1:22;
L608: S11[ D62 ]
proof
given R26 being (Element of ( NAT )) such that
L609: (for B48 being (Branch of C29) holds (D62 in B48 implies (for R30 being (FinSequence of ( NAT )) holds (R30 in B48 implies ( len R30 ) < ( ( len D62 ) + R26 )))));

consider C33 being  finite (Chain of C29) such that L610: ( card C33 ) = ( R26 + 1 ) by L568;
consider C34 being (Branch of C29) such that L611: C33 c= C34 by L432;
L612: ( R26 + ( 0 ) ) < ( R26 + 1 ) by XREAL_1:6;
L613: (ex R30 being (FinSequence of ( NAT )) st (R30 in C33 & ( len R30 ) >= R26)) by L612 , L610 , L363;
L614: (D62 in C34 & ( len D62 ) = ( 0 )) by L425;
thus L615: contradiction by L614 , L609 , L611 , L613;
end;
defpred S13[ set ] means (ex B49 being (Element of C29) st (B49 = $1 & S11[ B49 ]));
defpred S14[ set , set ] means (ex R30 being (FinSequence of ( NAT )) st (ex R26 being (Element of ( NAT )) st ($1 = R30 & ( R30 ^ <* R26 *> ) in C29 & $2 = ( R30 ^ <* R26 *> ))));
L616: (D62 in C29 & S13[ D62 ]) by L608;
L617: (for R1 being set holds ((R1 in C29 & S13[ R1 ]) implies (ex R2 being set st (R2 in C29 & S14[ R1 , R2 ] & S13[ R2 ]))))
proof
let R1 being set;
assume that
L618: R1 in C29;
given C35 being (Element of C29) such that
L619: C35 = R1
and
L620: S11[ C35 ];

consider R26 being (Element of ( NAT )) such that L621: ( C35 ^ <* R26 *> ) in C29 and L622: S11[ ( C35 ^ <* R26 *> ) ] by L570 , L620;
reconsider D63 = ( C35 ^ <* R26 *> ) as set;
take D63;
thus L623: (D63 in C29 & S14[ R1 , D63 ]) by L619 , L621;
reconsider D64 = ( C35 ^ <* R26 *> ) as (Element of C29) by L621;
take D64;
thus L624: thesis by L622;
end;
L625: (ex R17 being Function st (( dom R17 ) = ( NAT ) & ( rng R17 ) c= C29 & ( R17 . ( 0 ) ) = D62 & (for R21 being (Element of ( NAT )) holds (S14[ ( R17 . R21 ) , ( R17 . ( R21 + 1 ) ) ] & S13[ ( R17 . R21 ) ])))) from InfiniteChain(L616 , L617);
consider R17 being Function such that L626: ( dom R17 ) = ( NAT ) and L627: ( rng R17 ) c= C29 and L628: ( R17 . ( 0 ) ) = D62 and L629: (for R21 being (Element of ( NAT )) holds ((ex R30 being (FinSequence of ( NAT )) st (ex R26 being (Element of ( NAT )) st (( R17 . R21 ) = R30 & ( R30 ^ <* R26 *> ) in C29 & ( R17 . ( R21 + 1 ) ) = ( R30 ^ <* R26 *> )))) & (ex B50 being (Element of C29) st (B50 = ( R17 . R21 ) & S11[ B50 ])))) by L625;
reconsider D65 = ( rng R17 ) as (Subset of C29) by L627;
L630:
now
let C36 being Nat;
defpred S15[ Nat ] means (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 = ( R17 . C36 ) & R31 = ( R17 . ( C36 + $1 ) )) implies R30 is_a_prefix_of R31)));
L631: S15[ ( 0 ) ];
L632: (for B51 being Nat holds (S15[ B51 ] implies S15[ ( B51 + 1 ) ]))
proof
let C37 being Nat;
assume L633: (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 = ( R17 . C36 ) & R31 = ( R17 . ( C36 + C37 ) )) implies R30 is_a_prefix_of R31)));
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume that
L634: R30 = ( R17 . C36 )
and
L635: R31 = ( R17 . ( C36 + ( C37 + 1 ) ) );
reconsider D66 = C36 , D67 = C37 as (Element of ( NAT )) by ORDINAL1:def 12;
consider R32 being (FinSequence of ( NAT )), R24 being (Element of ( NAT )) such that L636: ( R17 . ( D66 + D67 ) ) = R32 and L637: ( R32 ^ <* R24 *> ) in C29 and L638: ( R17 . ( ( D66 + D67 ) + 1 ) ) = ( R32 ^ <* R24 *> ) by L629;
L639: R30 is_a_prefix_of R32 by L633 , L634 , L636;
L640: R32 is_a_prefix_of ( R32 ^ <* R24 *> ) by TREES_1:1;
thus L641: thesis by L640 , L635 , L638 , L639 , XBOOLE_1:1;
end;
thus L642: (for B52 being Nat holds S15[ B52 ]) from NAT_1:sch 2(L631 , L632);
end;
L643:
now
let R21 being (Element of ( NAT ));
let R24 being (Element of ( NAT ));
assume L644: R21 <= R24;
L645: (ex B53 being Nat st R24 = ( R21 + B53 )) by L644 , NAT_1:10;
thus L646: (for R30 being (FinSequence of ( NAT )) holds (for R31 being (FinSequence of ( NAT )) holds ((R30 = ( R17 . R21 ) & R31 = ( R17 . R24 )) implies R30 is_a_prefix_of R31))) by L645 , L630;
end;
L647: D65 is (Chain of C29)
proof
let R30 being (FinSequence of ( NAT ));
let R31 being (FinSequence of ( NAT ));
assume that
L648: R30 in D65
and
L649: R31 in D65;
consider R1 being set such that L650: R1 in ( NAT ) and L651: R30 = ( R17 . R1 ) by L626 , L648 , FUNCT_1:def 3;
consider R2 being set such that L652: R2 in ( NAT ) and L653: R31 = ( R17 . R2 ) by L626 , L649 , FUNCT_1:def 3;
reconsider D68 = R1 , D69 = R2 as (Element of ( NAT )) by L650 , L652;
L654: (D68 <= D69 or D69 <= D68);
thus L655: (R30 is_a_prefix_of R31 or R31 is_a_prefix_of R30) by L654 , L643 , L651 , L653;
end;
reconsider D70 = D65 as (Chain of C29) by L647;
take D70;
defpred S16[ (Element of ( NAT )) ] means (for R30 being (FinSequence of ( NAT )) holds (R30 = ( R17 . $1 ) implies ( len R30 ) = $1));
L656: S16[ ( 0 ) ] by L628;
L657: (for R21 being (Element of ( NAT )) holds (S16[ R21 ] implies S16[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
assume L658: (for R30 being (FinSequence of ( NAT )) holds (R30 = ( R17 . R21 ) implies ( len R30 ) = R21));
let R30 being (FinSequence of ( NAT ));
assume that
L659: R30 = ( R17 . ( R21 + 1 ) );
consider R31 being (FinSequence of ( NAT )), R26 being (Element of ( NAT )) such that L660: ( R17 . R21 ) = R31 and L661: ( R31 ^ <* R26 *> ) in C29 and L662: ( R17 . ( R21 + 1 ) ) = ( R31 ^ <* R26 *> ) by L629;
thus L663: ( len R30 ) = ( ( len R31 ) + ( len <* R26 *> ) ) by L659 , L662 , FINSEQ_1:22
.= ( ( len R31 ) + 1 ) by FINSEQ_1:39
.= ( R21 + 1 ) by L658 , L660;
end;
L664: (for R21 being (Element of ( NAT )) holds S16[ R21 ]) from NAT_1:sch 1(L656 , L657);
L665: R17 is  one-to-one
proof
let R1 being set;
let R2 being set;
assume L666: (R1 in ( dom R17 ) & R2 in ( dom R17 ));
reconsider D71 = R1 , D72 = R2 as (Element of ( NAT )) by L666 , L626;
consider R30 being (FinSequence of ( NAT )), R26 being (Element of ( NAT )) such that L667: ( R17 . D71 ) = R30 and L668: ( R30 ^ <* R26 *> ) in C29 and L669: ( R17 . ( D71 + 1 ) ) = ( R30 ^ <* R26 *> ) by L629;
L670: (ex R31 being (FinSequence of ( NAT )) st (ex R21 being (Element of ( NAT )) st (( R17 . D72 ) = R31 & ( R31 ^ <* R21 *> ) in C29 & ( R17 . ( D72 + 1 ) ) = ( R31 ^ <* R21 *> )))) by L629;
L671: ( len R30 ) = D71 by L664 , L667;
thus L672: thesis by L671 , L664 , L667 , L670;
end;
L673: ( NAT ) , D70 are_equipotent  by L665 , L626 , WELLORD2:def 4;
thus L674: thesis by L673 , CARD_1:38;
end;
::$N Koenig Lemma
theorem
L675: (for B54 being  finite-order Tree holds ((for R26 being (Element of ( NAT )) holds (ex B55 being  finite (Chain of B54) st ( card B55 ) = R26)) implies (ex B56 being (Chain of B54) st (not B56 is  finite))))
proof
let C38 being  finite-order Tree;
L676: (for B57 being (Element of C38) holds ( succ B57 ) is  finite);
thus L677: thesis by L676 , L567;
end;
definition
let C39 being Relation;
attr C39 is  DecoratedTree-like
means
:L678: ( dom C39 ) is Tree;
end;
registration
cluster  DecoratedTree-like for Function;
existence
proof
set D73 = the Tree;
take D74 = ( D73 --> ( 0 ) );
thus L680: ( dom D74 ) is Tree by FUNCOP_1:13;
end;
end;
definition
mode DecoratedTree
 is  DecoratedTree-like Function;
end;
registration
let R37 being DecoratedTree;
cluster ( dom R37 ) -> non  empty  Tree-like;
coherence by L678;
end;
registration
let R18 being non  empty set;
cluster  DecoratedTree-like R18 -valued for Function;
existence
proof
set D75 = the Tree;
set D76 = the (Element of R18);
set D77 = ( D75 --> D76 );
L684: ( dom D77 ) = D75 by FUNCOP_1:13;
reconsider D78 = D77 as DecoratedTree by L684 , L678;
L685: D78 is R18 -valued;
thus L686: thesis by L685;
end;
end;
definition
let R18 being non  empty set;
mode DecoratedTree of R18
 is R18 -valued DecoratedTree;
end;
definition
let C40 being non  empty set;
let C41 being (DecoratedTree of C40);
let C42 being (Element of ( dom C41 ));
redefine func C41 . C42 -> (Element of C40);

coherence
proof
L689: (( C41 . C42 ) in ( rng C41 ) & ( rng C41 ) c= C40) by FUNCT_1:def 3;
thus L690: thesis by L689;
end;
end;
theorem
L692: (for R38 being DecoratedTree holds (for R39 being DecoratedTree holds ((( dom R38 ) = ( dom R39 ) & (for R30 being (FinSequence of ( NAT )) holds (R30 in ( dom R38 ) implies ( R38 . R30 ) = ( R39 . R30 )))) implies R38 = R39)))
proof
let R38 being DecoratedTree;
let R39 being DecoratedTree;
assume that
L693: ( dom R38 ) = ( dom R39 )
and
L694: (for R30 being (FinSequence of ( NAT )) holds (R30 in ( dom R38 ) implies ( R38 . R30 ) = ( R39 . R30 )));
L695:
now
let R1 being set;
assume L696: R1 in ( dom R38 );
reconsider D79 = R1 as (Element of ( dom R38 )) by L696;
L697: ( R38 . D79 ) = ( R39 . D79 ) by L694;
thus L698: ( R38 . R1 ) = ( R39 . R1 ) by L697;
end;
thus L699: thesis by L695 , L693 , FUNCT_1:2;
end;
scheme DTreeEx { F12() -> Tree , P5[set , set] } : (ex R37 being DecoratedTree st (( dom R37 ) = F12() & (for R30 being (FinSequence of ( NAT )) holds (R30 in F12() implies P5[ R30 , ( R37 . R30 ) ]))))
provided
L700: (for R30 being (FinSequence of ( NAT )) holds (R30 in F12() implies (ex R1 being set st P5[ R30 , R1 ])))
proof
L701: (for R1 being set holds (R1 in F12() implies (ex R2 being set st P5[ R1 , R2 ])))
proof
let R1 being set;
assume L702: R1 in F12();
reconsider D80 = R1 as (Element of F12()) by L702;
L703: (ex R2 being set st P5[ D80 , R2 ]) by L700;
thus L704: thesis by L703;
end;
consider R17 being Function such that L705: (( dom R17 ) = F12() & (for R1 being set holds (R1 in F12() implies P5[ R1 , ( R17 . R1 ) ]))) from CLASSES1:sch 1(L701);
reconsider D81 = R17 as DecoratedTree by L705 , L678;
take D81;
thus L706: thesis by L705;
end;
scheme DTreeLambda { F13() -> Tree , F14(set) -> set } : (ex R37 being DecoratedTree st (( dom R37 ) = F13() & (for R30 being (FinSequence of ( NAT )) holds (R30 in F13() implies ( R37 . R30 ) = F14(R30)))))
proof
consider R17 being Function such that L707: (( dom R17 ) = F13() & (for R1 being set holds (R1 in F13() implies ( R17 . R1 ) = F14(R1)))) from FUNCT_1:sch 3;
reconsider D82 = R17 as DecoratedTree by L707 , L678;
take D82;
thus L708: thesis by L707;
end;
definition
let R37 being DecoratedTree;
func Leaves R37 -> set equals 
( R37 .: ( Leaves ( dom R37 ) ) );
correctness;
let R30 being (FinSequence of ( NAT ));
func R37 | R30 -> DecoratedTree means 
:L709: (( dom it ) = ( ( dom R37 ) | R30 ) & (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) | R30 ) implies ( it . R31 ) = ( R37 . ( R30 ^ R31 ) ))));
existence
proof
deffunc H3(FinSequence) = ( R37 . ( R30 ^ $1 ) );
thus L710: (ex B58 being DecoratedTree st (( dom B58 ) = ( ( dom R37 ) | R30 ) & (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) | R30 ) implies ( B58 . R31 ) = H3(R31))))) from DTreeLambda;
end;
uniqueness
proof
let R38 being DecoratedTree;
let R39 being DecoratedTree;
assume that
L711: ( dom R38 ) = ( ( dom R37 ) | R30 )
and
L712: (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) | R30 ) implies ( R38 . R31 ) = ( R37 . ( R30 ^ R31 ) )))
and
L713: ( dom R39 ) = ( ( dom R37 ) | R30 )
and
L714: (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) | R30 ) implies ( R39 . R31 ) = ( R37 . ( R30 ^ R31 ) )));
L715:
now
let R31 being (FinSequence of ( NAT ));
assume L716: R31 in ( ( dom R37 ) | R30 );
L717: ( R38 . R31 ) = ( R37 . ( R30 ^ R31 ) ) by L716 , L712;
thus L718: ( R38 . R31 ) = ( R39 . R31 ) by L717 , L714 , L716;
end;
thus L719: thesis by L715 , L711 , L713 , L692;
end;
end;
theorem
L721: (for R30 being (FinSequence of ( NAT )) holds (for R37 being DecoratedTree holds (R30 in ( dom R37 ) implies ( rng ( R37 | R30 ) ) c= ( rng R37 ))))
proof
let R30 being (FinSequence of ( NAT ));
let R37 being DecoratedTree;
assume L722: R30 in ( dom R37 );
let R1 being set;
assume L723: R1 in ( rng ( R37 | R30 ) );
consider R2 being set such that L724: R2 in ( dom ( R37 | R30 ) ) and L725: R1 = ( ( R37 | R30 ) . R2 ) by L723 , FUNCT_1:def 3;
reconsider D83 = R2 as (Element of ( dom ( R37 | R30 ) )) by L724;
L726: ( dom ( R37 | R30 ) ) = ( ( dom R37 ) | R30 ) by L709;
L727: ( R30 ^ D83 ) in ( dom R37 ) by L726 , L722 , TREES_1:def 6;
L728: R1 = ( R37 . ( R30 ^ D83 ) ) by L725 , L726 , L709;
thus L729: thesis by L728 , L727 , FUNCT_1:def 3;
end;
definition
let R18 being non  empty set;
let C43 being (DecoratedTree of R18);
redefine func Leaves C43 -> (Subset of R18);

coherence
proof
L730: (( C43 .: ( Leaves ( dom C43 ) ) ) c= ( rng C43 ) & ( rng C43 ) c= R18) by RELAT_1:111;
thus L731: thesis by L730 , XBOOLE_1:1;
end;
end;
registration
let R18 being non  empty set;
let C44 being (DecoratedTree of R18);
let C45 being (Element of ( dom C44 ));
cluster ( C44 | C45 ) -> R18 -valued;
coherence
proof
L733: (( rng ( C44 | C45 ) ) c= ( rng C44 ) & ( rng C44 ) c= R18) by L721;
L734: ( rng ( C44 | C45 ) ) c= R18 by L733 , XBOOLE_1:1;
thus L735: thesis by L734 , RELAT_1:def 19;
end;
end;
definition
let R37 being DecoratedTree;
let R30 being (FinSequence of ( NAT ));
let R38 being DecoratedTree;
assume L737: R30 in ( dom R37 );
func R37 with-replacement (R30 , R38) -> DecoratedTree means 
(( dom it ) = ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) & (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) implies (((not R30 is_a_prefix_of R31) & ( it . R31 ) = ( R37 . R31 )) or (ex R32 being (FinSequence of ( NAT )) st (R32 in ( dom R38 ) & R31 = ( R30 ^ R32 ) & ( it . R31 ) = ( R38 . R32 )))))));
existence
proof
defpred S17[ FinSequence , set ] means (((not R30 is_a_prefix_of $1) & $2 = ( R37 . $1 )) or (ex R32 being (FinSequence of ( NAT )) st (R32 in ( dom R38 ) & $1 = ( R30 ^ R32 ) & $2 = ( R38 . R32 ))));
L738: (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) implies (ex R1 being set st S17[ R31 , R1 ])))
proof
let R31 being (FinSequence of ( NAT ));
assume that
L739: R31 in ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) );
L740:
now
per cases  by XBOOLE_0:def 8;
suppose L741: R30 is_a_proper_prefix_of R31;

consider R32 being (FinSequence of ( NAT )) such that L742: (R32 in ( dom R38 ) & R31 = ( R30 ^ R32 )) by L741 , L737 , L739 , TREES_1:def 9;
thus L743: thesis
proof
take ( R38 . R32 );
thus L744: thesis by L742;
end;

end;
suppose L744: R30 = R31;

thus L745: thesis
proof
take ( R38 . ( {} ( NAT ) ) );
L746: (( {} ( NAT ) ) in ( dom R38 ) & R31 = ( R30 ^ ( <*> ( NAT ) ) )) by L744 , FINSEQ_1:34 , TREES_1:22;
thus L747: thesis by L746;
end;

end;
suppose L746: (not R30 is_a_prefix_of R31);

thus L747: thesis by L746;
end;
end;
thus L749: thesis by L740;
end;
thus L750: (ex B59 being DecoratedTree st (( dom B59 ) = ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) & (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) implies S17[ R31 , ( B59 . R31 ) ])))) from DTreeEx(L738);
end;
uniqueness
proof
let C46 , C47 being DecoratedTree;
assume that
L751: ( dom C46 ) = ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) )
and
L752: (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) implies (((not R30 is_a_prefix_of R31) & ( C46 . R31 ) = ( R37 . R31 )) or (ex R32 being (FinSequence of ( NAT )) st (R32 in ( dom R38 ) & R31 = ( R30 ^ R32 ) & ( C46 . R31 ) = ( R38 . R32 ))))))
and
L753: ( dom C47 ) = ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) )
and
L754: (for R31 being (FinSequence of ( NAT )) holds (R31 in ( ( dom R37 ) with-replacement (R30 , ( dom R38 )) ) implies (((not R30 is_a_prefix_of R31) & ( C47 . R31 ) = ( R37 . R31 )) or (ex R32 being (FinSequence of ( NAT )) st (R32 in ( dom R38 ) & R31 = ( R30 ^ R32 ) & ( C47 . R31 ) = ( R38 . R32 ))))));
L755:
now
let R31 being (FinSequence of ( NAT ));
assume that
L756: R31 in ( dom C46 )
and
L757: ( C46 . R31 ) <> ( C47 . R31 );
L758: (((not R30 is_a_prefix_of R31) & ( C46 . R31 ) = ( R37 . R31 )) or (ex R32 being (FinSequence of ( NAT )) st (R32 in ( dom R38 ) & R31 = ( R30 ^ R32 ) & ( C46 . R31 ) = ( R38 . R32 )))) by L751 , L752 , L756;
L759: (((not R30 is_a_prefix_of R31) & ( C47 . R31 ) = ( R37 . R31 )) or (ex R32 being (FinSequence of ( NAT )) st (R32 in ( dom R38 ) & R31 = ( R30 ^ R32 ) & ( C47 . R31 ) = ( R38 . R32 )))) by L751 , L754 , L756;
thus L760: contradiction by L759 , L757 , L758 , FINSEQ_1:33 , TREES_1:1;
end;
thus L761: thesis by L755 , L751 , L753 , L692;
end;
end;
registration
let R12 being Tree;
let R1 being set;
cluster ( R12 --> R1 ) ->  DecoratedTree-like;
coherence
proof
L763: ( dom ( R12 --> R1 ) ) = R12 by FUNCOP_1:13;
thus L764: thesis by L763 , L678;
end;
end;
theorem
L766: (for R18 being non  empty set holds ((for R1 being set holds (R1 in R18 implies R1 is Tree)) implies ( union R18 ) is Tree))
proof
let R18 being non  empty set;
assume L767: (for R1 being set holds (R1 in R18 implies R1 is Tree));
reconsider D84 = the (Element of R18) as Tree by L767;
L768: D84 c= ( union R18 ) by ZFMISC_1:74;
reconsider D85 = ( union R18 ) as non  empty set by L768;
L769: D85 is  Tree-like
proof
L770: (for R7 being set holds (R7 in R18 implies R7 c= ( ( NAT ) * )))
proof
let R7 being set;
assume L771: R7 in R18;
L772: R7 is Tree by L771 , L767;
thus L773: thesis by L772 , TREES_1:def 3;
end;
thus L774: D85 c= ( ( NAT ) * ) by L770 , ZFMISC_1:76;
thus L775: (for R30 being (FinSequence of ( NAT )) holds (R30 in D85 implies ( ProperPrefixes R30 ) c= D85))
proof
let R30 being (FinSequence of ( NAT ));
assume L776: R30 in D85;
consider R7 being set such that L777: R30 in R7 and L778: R7 in R18 by L776 , TARSKI:def 4;
reconsider D86 = R7 as Tree by L767 , L778;
L779: (( ProperPrefixes R30 ) c= D86 & D86 c= D85) by L777 , L778 , TREES_1:def 3 , ZFMISC_1:74;
thus L780: thesis by L779 , XBOOLE_1:1;
end;

let R30 being (FinSequence of ( NAT ));
let R21 being (Element of ( NAT ));
let R26 being (Element of ( NAT ));
assume that
L781: ( R30 ^ <* R21 *> ) in D85
and
L782: R26 <= R21;
consider R7 being set such that L783: ( R30 ^ <* R21 *> ) in R7 and L784: R7 in R18 by L781 , TARSKI:def 4;
reconsider D87 = R7 as Tree by L767 , L784;
L785: ( R30 ^ <* R26 *> ) in D87 by L782 , L783 , TREES_1:def 3;
thus L786: thesis by L785 , L784 , TARSKI:def 4;
end;
thus L787: thesis by L769;
end;
theorem
L788: (for R7 being set holds (((for R1 being set holds (R1 in R7 implies R1 is Function)) & R7 is  c=-linear) implies ( union R7 ) is  Relation-like  Function-like))
proof
let R7 being set;
assume that
L789: (for R1 being set holds (R1 in R7 implies R1 is Function))
and
L790: R7 is  c=-linear;
thus L791: (for R4 being set holds (R4 in ( union R7 ) implies (ex R5 being set st (ex R6 being set st [ R5 , R6 ] = R4))))
proof
let R4 being set;
assume L792: R4 in ( union R7 );
consider C48 being set such that L793: R4 in C48 and L794: C48 in R7 by L792 , TARSKI:def 4;
reconsider D88 = C48 as Function by L789 , L794;
L795: D88 = D88;
thus L796: thesis by L795 , L793 , RELAT_1:def 1;
end;

let R4 being set;
let R5 being set;
let R6 being set;
assume that
L797: [ R4 , R5 ] in ( union R7 )
and
L798: [ R4 , R6 ] in ( union R7 );
consider C49 being set such that L799: [ R4 , R5 ] in C49 and L800: C49 in R7 by L797 , TARSKI:def 4;
consider C50 being set such that L801: [ R4 , R6 ] in C50 and L802: C50 in R7 by L798 , TARSKI:def 4;
reconsider D89 = C49 as Function by L789 , L800;
reconsider D90 = C50 as Function by L789 , L802;
L803: D89 , D90 are_c=-comparable  by L790 , L800 , L802 , ORDINAL1:def 8;
L804: (D89 c= D90 or D90 c= D89) by L803 , XBOOLE_0:def 9;
thus L805: thesis by L804 , L799 , L801 , FUNCT_1:def 1;
end;
theorem
L806: (for R18 being non  empty set holds (((for R1 being set holds (R1 in R18 implies R1 is DecoratedTree)) & R18 is  c=-linear) implies ( union R18 ) is DecoratedTree))
proof
let R18 being non  empty set;
assume that
L807: (for R1 being set holds (R1 in R18 implies R1 is DecoratedTree))
and
L808: R18 is  c=-linear;
L809: (for R1 being set holds (R1 in R18 implies R1 is Function)) by L807;
reconsider D91 = ( union R18 ) as Function by L809 , L808 , L788;
defpred S18[ set , set ] means (ex R38 being DecoratedTree st ($1 = R38 & ( dom R38 ) = $2));
L810: (for R1 being set holds (R1 in R18 implies (ex R2 being set st S18[ R1 , R2 ])))
proof
let R1 being set;
assume L811: R1 in R18;
reconsider D92 = R1 as DecoratedTree by L811 , L807;
L812: ( dom D92 ) = ( dom D92 );
thus L813: thesis by L812;
end;
consider R17 being Function such that L814: (( dom R17 ) = R18 & (for R1 being set holds (R1 in R18 implies S18[ R1 , ( R17 . R1 ) ]))) from CLASSES1:sch 1(L810);
reconsider D93 = ( rng R17 ) as non  empty set by L814 , RELAT_1:42;
L815:
now
let R1 being set;
assume L816: R1 in D93;
consider R2 being set such that L817: (R2 in ( dom R17 ) & R1 = ( R17 . R2 )) by L816 , FUNCT_1:def 3;
L818: (ex R38 being DecoratedTree st (R2 = R38 & ( dom R38 ) = R1)) by L814 , L817;
thus L819: R1 is Tree by L818;
end;
L820: ( union D93 ) is Tree by L815 , L766;
L821: ( dom D91 ) = ( union D93 )
proof
thus L822: ( dom D91 ) c= ( union D93 )
proof
let R1 being set;
assume L823: R1 in ( dom D91 );
consider R2 being set such that L824: [ R1 , R2 ] in D91 by L823 , XTUPLE_0:def 12;
consider R7 being set such that L825: [ R1 , R2 ] in R7 and L826: R7 in R18 by L824 , TARSKI:def 4;
consider R38 being DecoratedTree such that L827: R7 = R38 and L828: ( dom R38 ) = ( R17 . R7 ) by L814 , L826;
L829: ( dom R38 ) in ( rng R17 ) by L814 , L826 , L828 , FUNCT_1:def 3;
L830: R1 in ( dom R38 ) by L825 , L827 , XTUPLE_0:def 12;
L831: ( dom R38 ) c= ( union D93 ) by L829 , ZFMISC_1:74;
thus L832: thesis by L831 , L830;
end;

let R1 being set;
assume L833: R1 in ( union D93 );
consider R7 being set such that L834: R1 in R7 and L835: R7 in D93 by L833 , TARSKI:def 4;
consider R2 being set such that L836: R2 in ( dom R17 ) and L837: R7 = ( R17 . R2 ) by L835 , FUNCT_1:def 3;
consider R38 being DecoratedTree such that L838: R2 = R38 and L839: ( dom R38 ) = R7 by L814 , L836 , L837;
L840: [ R1 , ( R38 . R1 ) ] in R38 by L834 , L839 , FUNCT_1:1;
L841: [ R1 , ( R38 . R1 ) ] in ( union R18 ) by L840 , L814 , L836 , L838 , TARSKI:def 4;
thus L842: thesis by L841 , XTUPLE_0:def 12;
end;
thus L843: thesis by L821 , L820 , L678;
end;
theorem
L844: (for R18 being non  empty set holds (for R19 being non  empty set holds (((for R1 being set holds (R1 in R19 implies R1 is (DecoratedTree of R18))) & R19 is  c=-linear) implies ( union R19 ) is (DecoratedTree of R18))))
proof
let R18 being non  empty set;
let R19 being non  empty set;
assume that
L845: (for R1 being set holds (R1 in R19 implies R1 is (DecoratedTree of R18)))
and
L846: R19 is  c=-linear;
L847: (for R1 being set holds (R1 in R19 implies R1 is DecoratedTree)) by L845;
reconsider D94 = ( union R19 ) as DecoratedTree by L847 , L846 , L806;
L848: ( rng D94 ) c= R18
proof
let R1 being set;
assume L849: R1 in ( rng D94 );
consider R2 being set such that L850: (R2 in ( dom D94 ) & R1 = ( D94 . R2 )) by L849 , FUNCT_1:def 3;
L851: [ R2 , R1 ] in D94 by L850 , FUNCT_1:1;
consider R7 being set such that L852: [ R2 , R1 ] in R7 and L853: R7 in R19 by L851 , TARSKI:def 4;
reconsider D95 = R7 as (DecoratedTree of R18) by L845 , L853;
L854: (R2 in ( dom D95 ) & R1 = ( D95 . R2 )) by L852 , FUNCT_1:1;
L855: R1 in ( rng D95 ) by L854 , FUNCT_1:def 3;
thus L856: thesis by L855;
end;
thus L857: thesis by L848 , RELAT_1:def 19;
end;
scheme DTreeStructEx { F15() -> non  empty set , F16() -> (Element of F15()) , F17(set) -> set , F18() -> (Function of [: F15() , ( NAT ) :] , F15()) } : (ex B60 being (DecoratedTree of F15()) st (( B60 . ( {} ) ) = F16() & (for B61 being (Element of ( dom B60 )) holds (( succ B61 ) = { ( B61 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : R21 in F17(( B60 . B61 )) } & (for R26 being (Element of ( NAT )) holds (R26 in F17(( B60 . B61 )) implies ( B60 . ( B61 ^ <* R26 *> ) ) = ( F18() . (( B60 . B61 ) , R26) )))))))
provided
L858: (for B62 being (Element of F15()) holds (for R22 being (Element of ( NAT )) holds (for R23 being (Element of ( NAT )) holds ((R22 <= R23 & R23 in F17(B62)) implies R22 in F17(B62)))))
proof
defpred S19[ (Element of ( NAT )) ] means (ex B63 being (DecoratedTree of F15()) st (( B63 . ( {} ) ) = F16() & (for B64 being (Element of ( dom B63 )) holds (( len B64 ) <= $1 & (( len B64 ) < $1 implies (( succ B64 ) = { ( B64 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : R21 in F17(( B63 . B64 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( B63 . B64 ) & R26 in F17(R1)) implies ( B63 . ( B64 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))));
L859: S19[ ( 0 ) ]
proof
reconsider D96 = { ( {} ) } as Tree;
take D97 = ( D96 --> F16() );
L860: ( {} ) in D96 by TREES_1:22;
thus L861: ( D97 . ( {} ) ) = F16() by L860 , FUNCOP_1:7;
let C51 being (Element of ( dom D97 ));
L862: ( dom D97 ) = D96 by FUNCOP_1:13;
L863: C51 = ( {} ) by L862 , TARSKI:def 1;
thus L864: ( len C51 ) <= ( 0 ) by L863;
assume L865: ( len C51 ) < ( 0 );
thus L866: thesis by L865;
end;
L867: (for R21 being (Element of ( NAT )) holds (S19[ R21 ] implies S19[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
given C52 being (DecoratedTree of F15()) such that
L868: (( C52 . ( {} ) ) = F16() & (for B65 being (Element of ( dom C52 )) holds (( len B65 ) <= R21 & (( len B65 ) < R21 implies (( succ B65 ) = { ( B65 ^ <* R25 *> ) where R25 is (Element of ( NAT )) : R25 in F17(( C52 . B65 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C52 . B65 ) & R26 in F17(R1)) implies ( C52 . ( B65 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) )))))))));

reconsider D98 = ( { ( B66 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B66 is (Element of ( dom C52 )) : R26 in F17(( C52 . B66 )) } \/ ( dom C52 ) ) as non  empty set;
L869: D98 is  Tree-like
proof
thus L870: D98 c= ( ( NAT ) * )
proof
let R1 being set;
assume L871: R1 in D98;
L872: (R1 in { ( B67 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B67 is (Element of ( dom C52 )) : R26 in F17(( C52 . B67 )) } or (R1 in ( dom C52 ) & ( dom C52 ) c= ( ( NAT ) * ))) by L871 , TREES_1:def 3 , XBOOLE_0:def 3;
assume L873: (not R1 in ( ( NAT ) * ));
L874: (ex B68 being (Element of ( NAT )) st (ex B69 being (Element of ( dom C52 )) st (R1 = ( B69 ^ <* B68 *> ) & B68 in F17(( C52 . B69 ))))) by L873 , L872;
thus L875: thesis by L874 , L873 , FINSEQ_1:def 11;
end;

thus L876: (for R30 being (FinSequence of ( NAT )) holds (R30 in D98 implies ( ProperPrefixes R30 ) c= D98))
proof
let R30 being (FinSequence of ( NAT ));
assume L877: R30 in D98;
L878: (R30 in { ( B70 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B70 is (Element of ( dom C52 )) : R26 in F17(( C52 . B70 )) } or R30 in ( dom C52 )) by L877 , XBOOLE_0:def 3;
L879:
now
assume L880: R30 in { ( B71 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B71 is (Element of ( dom C52 )) : R26 in F17(( C52 . B71 )) };
consider C53 being (Element of ( NAT )), C54 being (Element of ( dom C52 )) such that L881: R30 = ( C54 ^ <* C53 *> ) and L882: C53 in F17(( C52 . C54 )) by L880;
L883: ( ProperPrefixes C54 ) c= ( dom C52 ) by TREES_1:def 3;
L884: ( dom C52 ) c= D98 by XBOOLE_1:7;
L885: C54 in ( dom C52 );
L886: ( ProperPrefixes C54 ) c= D98 by L883 , L884 , XBOOLE_1:1;
L887: { C54 } c= D98 by L884 , L885 , ZFMISC_1:31;
L888: ( ProperPrefixes R30 ) = ( ( ProperPrefixes C54 ) \/ { C54 } ) by L881 , L21;
thus L889: thesis by L888 , L886 , L887 , XBOOLE_1:8;
end;
L890: (( ProperPrefixes R30 ) c= D98 or (( ProperPrefixes R30 ) c= ( dom C52 ) & ( dom C52 ) c= D98)) by L879 , L878 , TREES_1:def 3 , XBOOLE_1:7;
thus L891: thesis by L890 , XBOOLE_1:1;
end;

let R30 being (FinSequence of ( NAT ));
let R25 being (Element of ( NAT ));
let R26 being (Element of ( NAT ));
assume L892: ( R30 ^ <* R25 *> ) in D98;
L893: (( R30 ^ <* R25 *> ) in { ( B72 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B72 is (Element of ( dom C52 )) : R24 in F17(( C52 . B72 )) } or ( R30 ^ <* R25 *> ) in ( dom C52 )) by L892 , XBOOLE_0:def 3;
assume that
L894: R26 <= R25
and
L895: (not ( R30 ^ <* R26 *> ) in D98);
L896: (not ( R30 ^ <* R26 *> ) in ( dom C52 )) by L895 , XBOOLE_0:def 3;
consider C55 being (Element of ( NAT )), C56 being (Element of ( dom C52 )) such that L897: ( R30 ^ <* R25 *> ) = ( C56 ^ <* C55 *> ) and L898: C55 in F17(( C52 . C56 )) by L896 , L893 , L894 , TREES_1:def 3;
L899: (( len ( R30 ^ <* R25 *> ) ) = ( ( len R30 ) + ( len <* R25 *> ) ) & ( len <* R25 *> ) = 1) by FINSEQ_1:22 , FINSEQ_1:40;
L900: (( len ( C56 ^ <* C55 *> ) ) = ( ( len C56 ) + ( len <* C55 *> ) ) & ( len <* C55 *> ) = 1) by FINSEQ_1:22 , FINSEQ_1:40;
L901: (( ( R30 ^ <* R25 *> ) . ( ( len R30 ) + 1 ) ) = R25 & ( ( C56 ^ <* C55 *> ) . ( ( len C56 ) + 1 ) ) = C55) by FINSEQ_1:42;
L902: R30 = C56 by L901 , L897 , L899 , L900 , FINSEQ_1:33;
L903: R26 in F17(( C52 . C56 )) by L858 , L894 , L897 , L898 , L899 , L900 , L901;
L904: ( R30 ^ <* R26 *> ) in { ( B73 ^ <* R20 *> ) where R20 is (Element of ( NAT )) , B73 is (Element of ( dom C52 )) : R20 in F17(( C52 . B73 )) } by L903 , L902;
thus L905: thesis by L904 , L895 , XBOOLE_0:def 3;
end;
reconsider D99 = D98 as Tree by L869;
defpred S20[ FinSequence , set ] means (($1 in ( dom C52 ) & $2 = ( C52 . $1 )) or ((not $1 in ( dom C52 )) & (ex R26 being (Element of ( NAT )) st (ex R31 being (FinSequence of ( NAT )) st ($1 = ( R31 ^ <* R26 *> ) & $2 = ( F18() . (( C52 . R31 ) , R26) ))))));
L906: (for R30 being (FinSequence of ( NAT )) holds (R30 in D99 implies (ex R1 being set st S20[ R30 , R1 ])))
proof
let R30 being (FinSequence of ( NAT ));
assume L907: R30 in D99;
L908: (R30 in { ( B74 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B74 is (Element of ( dom C52 )) : R24 in F17(( C52 . B74 )) } or R30 in ( dom C52 )) by L907 , XBOOLE_0:def 3;
L909:
now
assume L910: (not R30 in ( dom C52 ));
consider C57 being (Element of ( NAT )), C58 being (Element of ( dom C52 )) such that L911: R30 = ( C58 ^ <* C57 *> ) and L912: C57 in F17(( C52 . C58 )) by L910 , L908;
take D100 = ( F18() . (( C52 . C58 ) , C57) );
thus L913: ((R30 in ( dom C52 ) & D100 = ( C52 . R30 )) or ((not R30 in ( dom C52 )) & (ex R26 being (Element of ( NAT )) st (ex R31 being (FinSequence of ( NAT )) st (R30 = ( R31 ^ <* R26 *> ) & D100 = ( F18() . (( C52 . R31 ) , R26) )))))) by L910 , L911;
end;
thus L914: thesis by L909;
end;
consider C59 being DecoratedTree such that L915: (( dom C59 ) = D99 & (for R30 being (FinSequence of ( NAT )) holds (R30 in D99 implies S20[ R30 , ( C59 . R30 ) ]))) from DTreeEx(L906);
L916: ( rng C59 ) c= F15()
proof
let R1 being set;
assume L917: R1 in ( rng C59 );
consider R2 being set such that L918: R2 in ( dom C59 ) and L919: R1 = ( C59 . R2 ) by L917 , FUNCT_1:def 3;
reconsider D101 = R2 as (Element of ( dom C59 )) by L918;
L920:
now
assume L921: D101 in ( dom C52 );
reconsider D102 = D101 as (Element of ( dom C52 )) by L921;
L922: ( C52 . D102 ) in F15();
thus L923: thesis by L922 , L915 , L919;
end;
L924:
now
assume L925: (not D101 in ( dom C52 ));
consider R26 being (Element of ( NAT )), R31 being (FinSequence of ( NAT )) such that L926: D101 = ( R31 ^ <* R26 *> ) and L927: ( C59 . D101 ) = ( F18() . (( C52 . R31 ) , R26) ) by L925 , L915;
L928: D101 in { ( B75 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B75 is (Element of ( dom C52 )) : R24 in F17(( C52 . B75 )) } by L915 , L925 , XBOOLE_0:def 3;
consider C60 being (Element of ( NAT )), C61 being (Element of ( dom C52 )) such that L929: D101 = ( C61 ^ <* C60 *> ) and L930: C60 in F17(( C52 . C61 )) by L928;
L931: ( len <* R26 *> ) = 1 by FINSEQ_1:39;
L932: ( len <* C60 *> ) = 1 by FINSEQ_1:39;
L933: ( len ( R31 ^ <* R26 *> ) ) = ( ( len R31 ) + 1 ) by L931 , FINSEQ_1:22;
L934: ( len ( C61 ^ <* C60 *> ) ) = ( ( len C61 ) + 1 ) by L932 , FINSEQ_1:22;
L935: (( ( R31 ^ <* R26 *> ) . ( ( len R31 ) + 1 ) ) = R26 & ( ( C61 ^ <* C60 *> ) . ( ( len C61 ) + 1 ) ) = C60) by FINSEQ_1:42;
L936: R31 = C61 by L935 , L926 , L929 , L933 , L934 , FINSEQ_1:33;
L937: ( C52 . C61 ) in F15();
L938: [ ( C52 . R31 ) , R26 ] in [: F15() , ( NAT ) :] by L937 , L936 , ZFMISC_1:87;
thus L939: thesis by L938 , L919 , L927 , FUNCT_2:5;
end;
thus L940: thesis by L924 , L920;
end;
reconsider D103 = C59 as (DecoratedTree of F15()) by L916 , RELAT_1:def 19;
take D103;
L941: (( <*> ( NAT ) ) in D99 & ( <*> ( NAT ) ) in ( dom C52 )) by TREES_1:22;
thus L942: ( D103 . ( {} ) ) = F16() by L941 , L868 , L915;
let C62 being (Element of ( dom D103 ));
L943:
now
assume L944: C62 in { ( B76 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B76 is (Element of ( dom C52 )) : R24 in F17(( C52 . B76 )) };
consider C63 being (Element of ( NAT )), C64 being (Element of ( dom C52 )) such that L945: C62 = ( C64 ^ <* C63 *> ) and L946: C63 in F17(( C52 . C64 )) by L944;
L947: ( len C64 ) <= R21 by L868;
L948: (( len <* C63 *> ) = 1 & ( ( len C64 ) + 1 ) <= ( R21 + 1 )) by L947 , FINSEQ_1:39 , XREAL_1:7;
thus L949: ( len C62 ) <= ( R21 + 1 ) by L948 , L945 , FINSEQ_1:22;
end;
L950:
now
assume L951: C62 in ( dom C52 );
reconsider D104 = C62 as (Element of ( dom C52 )) by L951;
L952: (( len D104 ) <= R21 & R21 <= ( R21 + 1 )) by L868 , NAT_1:11;
thus L953: ( len C62 ) <= ( R21 + 1 ) by L952 , XXREAL_0:2;
end;
thus L954: ( len C62 ) <= ( R21 + 1 ) by L950 , L915 , L943 , XBOOLE_0:def 3;
assume L955: ( len C62 ) < ( R21 + 1 );
L956:
now
assume L957: (not C62 in ( dom C52 ));
L958: C62 in { ( B77 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B77 is (Element of ( dom C52 )) : R24 in F17(( C52 . B77 )) } by L957 , L915 , XBOOLE_0:def 3;
consider C65 being (Element of ( NAT )), C66 being (Element of ( dom C52 )) such that L959: C62 = ( C66 ^ <* C65 *> ) and L960: C65 in F17(( C52 . C66 )) by L958;
L961: ( len C62 ) = ( ( len C66 ) + ( len <* C65 *> ) ) by L959 , FINSEQ_1:22;
L962: (( len <* C65 *> ) = 1 & ( len C62 ) <= R21) by L955 , FINSEQ_1:39 , NAT_1:13;
L963: ( len C66 ) < R21 by L962 , L961 , NAT_1:13;
L964: ( succ C66 ) = { ( C66 ^ <* R25 *> ) where R25 is (Element of ( NAT )) : R25 in F17(( C52 . C66 )) } by L963 , L868;
L965: C62 in ( succ C66 ) by L964 , L959 , L960;
thus L966: contradiction by L965 , L957;
end;
L967: ( D103 . C62 ) = ( C52 . C62 ) by L956 , L915;
reconsider D105 = C62 as (Element of ( dom C52 )) by L956;
thus L968: ( succ C62 ) c= { ( C62 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D103 . C62 )) }
proof
let R1 being set;
assume L969: R1 in ( succ C62 );
consider R26 being (Element of ( NAT )) such that L970: R1 = ( C62 ^ <* R26 *> ) and L971: ( C62 ^ <* R26 *> ) in ( dom D103 ) by L969;
L972:
now
per cases ;
suppose L973: ( C62 ^ <* R26 *> ) in ( dom C52 );

reconsider D106 = ( C62 ^ <* R26 *> ) , D107 = C62 as (Element of ( dom C52 )) by L973 , TREES_1:21;
L974: (( len D106 ) <= R21 & ( len D106 ) = ( ( len C62 ) + 1 )) by L868 , FINSEQ_2:16;
L975: ( len C62 ) < R21 by L974 , NAT_1:13;
L976: ( succ D107 ) = { ( D107 ^ <* R25 *> ) where R25 is (Element of ( NAT )) : R25 in F17(( C52 . D107 )) } by L975 , L868;
thus L977: thesis by L976 , L967 , L970 , L973;
end;
suppose L978: (not ( C62 ^ <* R26 *> ) in ( dom C52 ));

L979: ( C62 ^ <* R26 *> ) in { ( B78 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B78 is (Element of ( dom C52 )) : R24 in F17(( C52 . B78 )) } by L978 , L915 , L971 , XBOOLE_0:def 3;
consider C67 being (Element of ( NAT )), C68 being (Element of ( dom C52 )) such that L980: ( C62 ^ <* R26 *> ) = ( C68 ^ <* C67 *> ) and L981: C67 in F17(( C52 . C68 )) by L979;
L982: C62 = C68 by L980 , FINSEQ_2:17;
thus L983: thesis by L982 , L967 , L970 , L980 , L981;
end;
end;
thus L985: thesis by L972;
end;

thus L986: { ( C62 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D103 . C62 )) } c= ( succ C62 )
proof
let R1 being set;
assume L987: R1 in { ( C62 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D103 . C62 )) };
consider R26 being (Element of ( NAT )) such that L988: R1 = ( C62 ^ <* R26 *> ) and L989: R26 in F17(( D103 . C62 )) by L987;
L990: R1 = ( D105 ^ <* R26 *> ) by L988;
L991: R1 in { ( B79 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B79 is (Element of ( dom C52 )) : R24 in F17(( C52 . B79 )) } by L990 , L967 , L989;
L992: R1 in ( dom D103 ) by L991 , L915 , XBOOLE_0:def 3;
thus L993: thesis by L992 , L988;
end;

let R26 being (Element of ( NAT ));
let R1 being set;
assume that
L994: R1 = ( D103 . C62 )
and
L995: R26 in F17(R1);
L996: ( C62 ^ <* R26 *> ) in { ( C62 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D103 . C62 )) } by L994 , L995;
L997: ( C62 ^ <* R26 *> ) in ( succ C62 ) by L996 , L986;
L998:
now
per cases ;
suppose L999: ( C62 ^ <* R26 *> ) in ( dom C52 );

reconsider D108 = ( C62 ^ <* R26 *> ) as (Element of ( dom C52 )) by L999;
L1000: (( len D108 ) <= R21 & ( len D108 ) = ( ( len C62 ) + 1 )) by L868 , FINSEQ_2:16;
L1001: ( len D105 ) < R21 by L1000 , NAT_1:13;
L1002: ( C52 . ( D105 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ) by L1001 , L868 , L967 , L994 , L995;
thus L1003: thesis by L1002 , L915 , L997 , L999;
end;
suppose L1004: (not ( C62 ^ <* R26 *> ) in ( dom C52 ));

consider R24 being (Element of ( NAT )), R31 being (FinSequence of ( NAT )) such that L1005: ( C62 ^ <* R26 *> ) = ( R31 ^ <* R24 *> ) and L1006: ( D103 . ( C62 ^ <* R26 *> ) ) = ( F18() . (( C52 . R31 ) , R24) ) by L1004 , L915 , L997;
L1007: (C62 = R31 & R26 = R24) by L1005 , FINSEQ_2:17;
thus L1008: thesis by L1007 , L915 , L956 , L994 , L1006;
end;
end;
thus L1010: thesis by L998;
end;
L1011: (for R21 being (Element of ( NAT )) holds S19[ R21 ]) from NAT_1:sch 1(L859 , L867);
defpred S21[ set , set ] means (ex B80 being (DecoratedTree of F15()) st (ex R21 being (Element of ( NAT )) st ($1 = R21 & $2 = B80 & ( B80 . ( {} ) ) = F16() & (for B81 being (Element of ( dom B80 )) holds (( len B81 ) <= R21 & (( len B81 ) < R21 implies (( succ B81 ) = { ( B81 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( B80 . B81 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( B80 . B81 ) & R26 in F17(R1)) implies ( B80 . ( B81 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) )))))))))));
L1012: (for R1 being set holds (R1 in ( NAT ) implies (ex R2 being set st S21[ R1 , R2 ])))
proof
let R1 being set;
assume L1013: R1 in ( NAT );
reconsider D109 = R1 as (Element of ( NAT )) by L1013;
consider C69 being (DecoratedTree of F15()) such that L1014: (( C69 . ( {} ) ) = F16() & (for B82 being (Element of ( dom C69 )) holds (( len B82 ) <= D109 & (( len B82 ) < D109 implies (( succ B82 ) = { ( B82 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : R21 in F17(( C69 . B82 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C69 . B82 ) & R26 in F17(R1)) implies ( C69 . ( B82 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1011;
reconsider D110 = C69 as set;
take D110;
take C69;
take D109;
thus L1015: thesis by L1014;
end;
consider R17 being Function such that L1016: (( dom R17 ) = ( NAT ) & (for R1 being set holds (R1 in ( NAT ) implies S21[ R1 , ( R17 . R1 ) ]))) from CLASSES1:sch 1(L1012);
reconsider D111 = ( rng R17 ) as non  empty set by L1016 , RELAT_1:42;
L1017: (for R1 being set holds (R1 in D111 implies R1 is (DecoratedTree of F15())))
proof
let R1 being set;
assume L1018: R1 in D111;
consider R2 being set such that L1019: R2 in ( dom R17 ) and L1020: R1 = ( R17 . R2 ) by L1018 , FUNCT_1:def 3;
L1021: (ex B83 being (DecoratedTree of F15()) st (ex R21 being (Element of ( NAT )) st (R2 = R21 & ( R17 . R2 ) = B83 & ( B83 . ( {} ) ) = F16() & (for B84 being (Element of ( dom B83 )) holds (( len B84 ) <= R21 & (( len B84 ) < R21 implies (( succ B84 ) = { ( B84 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( B83 . B84 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( B83 . B84 ) & R26 in F17(R1)) implies ( B83 . ( B84 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))))) by L1016 , L1019;
thus L1022: thesis by L1021 , L1020;
end;
L1023: (for R38 being DecoratedTree holds (for R39 being DecoratedTree holds (for R22 being (Element of ( NAT )) holds (for R23 being (Element of ( NAT )) holds ((R38 = ( R17 . R22 ) & R39 = ( R17 . R23 ) & R22 <= R23) implies R38 c= R39)))))
proof
let R38 being DecoratedTree;
let R39 being DecoratedTree;
let C70 , C71 being (Element of ( NAT ));
assume that
L1024: R38 = ( R17 . C70 )
and
L1025: R39 = ( R17 . C71 )
and
L1026: C70 <= C71;
consider C72 being (DecoratedTree of F15()), R22 being (Element of ( NAT )) such that L1027: (C70 = R22 & ( R17 . C70 ) = C72 & ( C72 . ( {} ) ) = F16() & (for B85 being (Element of ( dom C72 )) holds (( len B85 ) <= R22 & (( len B85 ) < R22 implies (( succ B85 ) = { ( B85 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C72 . B85 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C72 . B85 ) & R26 in F17(R1)) implies ( C72 . ( B85 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1016;
consider C73 being (DecoratedTree of F15()), R23 being (Element of ( NAT )) such that L1028: (C71 = R23 & ( R17 . C71 ) = C73 & ( C73 . ( {} ) ) = F16() & (for B86 being (Element of ( dom C73 )) holds (( len B86 ) <= R23 & (( len B86 ) < R23 implies (( succ B86 ) = { ( B86 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C73 . B86 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C73 . B86 ) & R26 in F17(R1)) implies ( C73 . ( B86 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1016;
defpred S22[ (Element of ( NAT )) ] means (for B87 being (Element of ( dom R38 )) holds (( len B87 ) <= $1 implies (B87 in ( dom R39 ) & ( R38 . B87 ) = ( R39 . B87 ))));
L1029: S22[ ( 0 ) ]
proof
let C74 being (Element of ( dom R38 ));
assume that
L1030: ( len C74 ) <= ( 0 );
L1031: C74 = ( {} ) by L1030;
thus L1032: thesis by L1031 , L1024 , L1025 , L1027 , L1028 , TREES_1:22;
end;
L1033: (for R21 being (Element of ( NAT )) holds (S22[ R21 ] implies S22[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
assume L1034: (for B88 being (Element of ( dom R38 )) holds (( len B88 ) <= R21 implies (B88 in ( dom R39 ) & ( R38 . B88 ) = ( R39 . B88 ))));
let C75 being (Element of ( dom R38 ));
assume L1035: ( len C75 ) <= ( R21 + 1 );
L1036: (( len C75 ) <= R21 or ( len C75 ) = ( R21 + 1 )) by L1035 , NAT_1:8;
L1037:
now
assume L1038: ( len C75 ) = ( R21 + 1 );
reconsider D112 = ( C75 | ( Seg R21 ) ) as (FinSequence of ( NAT )) by FINSEQ_1:18;
L1039: D112 is_a_prefix_of C75 by TREES_1:def 1;
reconsider D113 = D112 as (Element of ( dom R38 )) by L1039 , TREES_1:20;
L1040: R21 <= ( R21 + 1 ) by NAT_1:11;
L1041: ( R21 + 1 ) <= R22 by L1024 , L1027 , L1038;
L1042: ( len D113 ) = R21 by L1038 , L1040 , FINSEQ_1:17;
L1043: R21 < R22 by L1041 , NAT_1:13;
L1044: ( R38 . D113 ) = ( R39 . D113 ) by L1034 , L1042;
reconsider D114 = D113 as (Element of ( dom R39 )) by L1034 , L1042;
L1045: C75 <> ( {} ) by L1038;
consider C76 being FinSequence, C77 being set such that L1046: C75 = ( C76 ^ <* C77 *> ) by L1045 , FINSEQ_1:46;
L1047: (D113 is_a_prefix_of C75 & C76 is_a_prefix_of C75) by L1046 , TREES_1:1 , TREES_1:def 1;
L1048: ( R21 + 1 ) = ( ( len C76 ) + 1 ) by L1038 , L1046 , FINSEQ_2:16;
L1049: D113 = C76 by L1048 , L1042 , L1047 , L1 , TREES_1:4;
L1050: <* C77 *> is (FinSequence of ( NAT )) by L1046 , FINSEQ_1:36;
L1051: ( rng <* C77 *> ) c= ( NAT ) by L1050 , FINSEQ_1:def 4;
L1052: (( rng <* C77 *> ) = { C77 } & C77 in { C77 }) by FINSEQ_1:38 , TARSKI:def 1;
reconsider D115 = C77 as (Element of ( NAT )) by L1052 , L1051;
L1053: ( D113 ^ <* D115 *> ) in ( succ D113 ) by L1046 , L1049;
L1054: ( succ D113 ) = { ( D113 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( R38 . D113 )) } by L1024 , L1027 , L1042 , L1043;
consider R20 being (Element of ( NAT )) such that L1055: ( D113 ^ <* D115 *> ) = ( D113 ^ <* R20 *> ) and L1056: R20 in F17(( R38 . D113 )) by L1054 , L1053;
L1057: R21 < R23 by L1026 , L1027 , L1028 , L1043 , XXREAL_0:2;
L1058: ( succ D114 ) = { ( D114 ^ <* R24 *> ) where R24 is (Element of ( NAT )) : R24 in F17(( R39 . D114 )) } by L1057 , L1025 , L1028 , L1042;
L1059: D115 = R20 by L1055 , FINSEQ_2:17;
L1060: C75 in ( succ D114 ) by L1044 , L1046 , L1049 , L1055 , L1056 , L1058;
L1061: ( C72 . C75 ) = ( F18() . (( C72 . D113 ) , D115) ) by L1024 , L1027 , L1042 , L1043 , L1046 , L1049 , L1056 , L1059;
thus L1062: thesis by L1061 , L1024 , L1025 , L1027 , L1028 , L1042 , L1044 , L1046 , L1049 , L1056 , L1057 , L1059 , L1060;
end;
thus L1063: thesis by L1037 , L1034 , L1036;
end;
L1064: (for R21 being (Element of ( NAT )) holds S22[ R21 ]) from NAT_1:sch 1(L1029 , L1033);
let R1 being set;
assume L1065: R1 in R38;
consider R2 being set, R3 being set such that L1066: [ R2 , R3 ] = R1 by L1065 , RELAT_1:def 1;
L1067: ( R38 . R2 ) = R3 by L1065 , L1066 , FUNCT_1:1;
reconsider D116 = R2 as (Element of ( dom R38 )) by L1065 , L1066 , FUNCT_1:1;
L1068: ( len D116 ) <= ( len D116 );
L1069: (D116 in ( dom R39 ) & ( R38 . D116 ) = ( R39 . D116 )) by L1068 , L1064;
thus L1070: thesis by L1069 , L1066 , L1067 , FUNCT_1:1;
end;
L1071: D111 is  c=-linear
proof
let C78 , C79 being set;
assume L1072: C78 in D111;
consider R1 being set such that L1073: R1 in ( dom R17 ) and L1074: C78 = ( R17 . R1 ) by L1072 , FUNCT_1:def 3;
assume L1075: C79 in D111;
consider R2 being set such that L1076: R2 in ( dom R17 ) and L1077: C79 = ( R17 . R2 ) by L1075 , FUNCT_1:def 3;
L1078: C78 is DecoratedTree by L1017 , L1072;
L1079: C79 is DecoratedTree by L1017 , L1075;
reconsider D117 = R1 , D118 = R2 as (Element of ( NAT )) by L1016 , L1073 , L1076;
L1080: (D117 <= D118 or D118 <= D117);
thus L1081: (C78 c= C79 or C79 c= C78) by L1080 , L1023 , L1074 , L1077 , L1078 , L1079;
end;
reconsider D119 = ( union ( rng R17 ) ) as (DecoratedTree of F15()) by L1071 , L1017 , L844;
take D119;
consider C80 being (DecoratedTree of F15()), R21 being (Element of ( NAT )) such that L1082: (( 0 ) = R21 & ( R17 . ( 0 ) ) = C80 & ( C80 . ( {} ) ) = F16() & (for B89 being (Element of ( dom C80 )) holds (( len B89 ) <= R21 & (( len B89 ) < R21 implies (( succ B89 ) = { ( B89 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C80 . B89 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C80 . B89 ) & R26 in F17(R1)) implies ( C80 . ( B89 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1016;
L1083: ( {} ) in ( dom C80 ) by TREES_1:22;
L1084: [ ( {} ) , F16() ] in C80 by L1083 , L1082 , FUNCT_1:1;
L1085: C80 in ( rng R17 ) by L1016 , L1082 , FUNCT_1:def 3;
L1086: [ ( {} ) , F16() ] in D119 by L1085 , L1084 , TARSKI:def 4;
thus L1087: ( D119 . ( {} ) ) = F16() by L1086 , FUNCT_1:1;
L1088: (for R38 being DecoratedTree holds (for R1 being set holds ((R38 in D111 & R1 in ( dom R38 )) implies (R1 in ( dom D119 ) & ( R38 . R1 ) = ( D119 . R1 )))))
proof
let R38 being DecoratedTree;
let R1 being set;
assume that
L1089: R38 in D111
and
L1090: R1 in ( dom R38 );
L1091: [ R1 , ( R38 . R1 ) ] in R38 by L1090 , FUNCT_1:1;
L1092: [ R1 , ( R38 . R1 ) ] in D119 by L1091 , L1089 , TARSKI:def 4;
thus L1093: thesis by L1092 , FUNCT_1:1;
end;
let C81 being (Element of ( dom D119 ));
thus L1094: ( succ C81 ) c= { ( C81 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D119 . C81 )) }
proof
let R1 being set;
assume L1095: R1 in ( succ C81 );
consider R24 being (Element of ( NAT )) such that L1096: R1 = ( C81 ^ <* R24 *> ) and L1097: ( C81 ^ <* R24 *> ) in ( dom D119 ) by L1095;
L1098: [ R1 , ( D119 . R1 ) ] in D119 by L1096 , L1097 , FUNCT_1:1;
consider R7 being set such that L1099: [ R1 , ( D119 . R1 ) ] in R7 and L1100: R7 in ( rng R17 ) by L1098 , TARSKI:def 4;
consider R2 being set such that L1101: R2 in ( NAT ) and L1102: R7 = ( R17 . R2 ) by L1016 , L1100 , FUNCT_1:def 3;
consider C82 being (DecoratedTree of F15()), R22 being (Element of ( NAT )) such that L1103: (R2 = R22 & ( R17 . R2 ) = C82 & ( C82 . ( {} ) ) = F16() & (for B90 being (Element of ( dom C82 )) holds (( len B90 ) <= R22 & (( len B90 ) < R22 implies (( succ B90 ) = { ( B90 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C82 . B90 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C82 . B90 ) & R26 in F17(R1)) implies ( C82 . ( B90 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1016 , L1101;
L1104: ( C81 ^ <* R24 *> ) in ( dom C82 ) by L1096 , L1099 , L1102 , L1103 , FUNCT_1:1;
reconsider D120 = C81 , D121 = ( C81 ^ <* R24 *> ) as (Element of ( dom C82 )) by L1104 , TREES_1:21;
L1105: ( len D121 ) <= R22 by L1103;
L1106: ( ( len C81 ) + 1 ) <= R22 by L1105 , FINSEQ_2:16;
L1107: ( len D120 ) < R22 by L1106 , NAT_1:13;
L1108: ( succ D120 ) = { ( D120 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C82 . D120 )) } by L1107 , L1103;
L1109: ( C82 . C81 ) = ( D119 . C81 ) by L1088 , L1100 , L1102 , L1103 , L1107;
thus L1110: thesis by L1109 , L1096 , L1104 , L1108;
end;

L1111: [ C81 , ( D119 . C81 ) ] in D119 by FUNCT_1:1;
consider R7 being set such that L1112: [ C81 , ( D119 . C81 ) ] in R7 and L1113: R7 in D111 by L1111 , TARSKI:def 4;
consider R2 being set such that L1114: R2 in ( NAT ) and L1115: R7 = ( R17 . R2 ) by L1016 , L1113 , FUNCT_1:def 3;
reconsider D122 = R2 as (Element of ( NAT )) by L1114;
consider C83 being (DecoratedTree of F15()), R22 being (Element of ( NAT )) such that L1116: (D122 = R22 & ( R17 . D122 ) = C83 & ( C83 . ( {} ) ) = F16() & (for B91 being (Element of ( dom C83 )) holds (( len B91 ) <= R22 & (( len B91 ) < R22 implies (( succ B91 ) = { ( B91 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C83 . B91 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C83 . B91 ) & R26 in F17(R1)) implies ( C83 . ( B91 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1016;
consider C84 being (DecoratedTree of F15()), R23 being (Element of ( NAT )) such that L1117: (( D122 + 1 ) = R23 & ( R17 . ( D122 + 1 ) ) = C84 & ( C84 . ( {} ) ) = F16() & (for B92 being (Element of ( dom C84 )) holds (( len B92 ) <= R23 & (( len B92 ) < R23 implies (( succ B92 ) = { ( B92 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C84 . B92 )) } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C84 . B92 ) & R26 in F17(R1)) implies ( C84 . ( B92 ^ <* R26 *> ) ) = ( F18() . (R1 , R26) ))))))))) by L1016;
L1118: D122 <= ( D122 + 1 ) by NAT_1:11;
L1119: C83 c= C84 by L1118 , L1023 , L1116 , L1117;
reconsider D123 = C81 as (Element of ( dom C83 )) by L1112 , L1115 , L1116 , FUNCT_1:1;
L1120: ( len D123 ) <= D122 by L1116;
L1121: ( C84 . C81 ) = ( D119 . C81 ) by L1112 , L1115 , L1116 , L1119 , FUNCT_1:1;
reconsider D124 = C81 as (Element of ( dom C84 )) by L1112 , L1115 , L1116 , L1119 , FUNCT_1:1;
L1122: ( len D124 ) < ( D122 + 1 ) by L1120 , NAT_1:13;
L1123: ( succ D124 ) = { ( D124 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( C84 . D124 )) } by L1122 , L1117;
thus L1124: { ( C81 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D119 . C81 )) } c= ( succ C81 )
proof
let R1 being set;
assume L1125: R1 in { ( C81 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 in F17(( D119 . C81 )) };
L1126: (ex R24 being (Element of ( NAT )) st (R1 = ( C81 ^ <* R24 *> ) & R24 in F17(( D119 . C81 )))) by L1125;
L1127: R1 in ( succ D124 ) by L1117 , L1121 , L1122 , L1125;
L1128: C84 in D111 by L1016 , L1117 , FUNCT_1:def 3;
L1129: R1 in ( dom D119 ) by L1128 , L1088 , L1127;
thus L1130: thesis by L1129 , L1126;
end;

let R26 being (Element of ( NAT ));
assume L1131: R26 in F17(( D119 . C81 ));
L1132: ( C81 ^ <* R26 *> ) in ( succ D124 ) by L1131 , L1121 , L1123;
L1133: C84 in D111 by L1016 , L1117 , FUNCT_1:def 3;
L1134: ( C84 . ( C81 ^ <* R26 *> ) ) = ( D119 . ( C81 ^ <* R26 *> ) ) by L1133 , L1088 , L1132;
thus L1135: thesis by L1134 , L1117 , L1121 , L1122 , L1131;
end;
scheme DTreeStructFinEx { F19() -> non  empty set , F20() -> (Element of F19()) , F21(set) -> (Element of ( NAT )) , F22() -> (Function of [: F19() , ( NAT ) :] , F19()) } : (ex B93 being (DecoratedTree of F19()) st (( B93 . ( {} ) ) = F20() & (for B94 being (Element of ( dom B93 )) holds (( succ B94 ) = { ( B94 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : R21 < F21(( B93 . B94 )) } & (for R26 being (Element of ( NAT )) holds (R26 < F21(( B93 . B94 )) implies ( B93 . ( B94 ^ <* R26 *> ) ) = ( F22() . (( B93 . B94 ) , R26) )))))))
proof
deffunc H4((Element of ( NAT ))) = { R20 where R20 is (Element of ( NAT )) : R20 < $1 };
deffunc H5(set) = H4(F21($1));
L1136: (for B95 being (Element of F19()) holds (for R22 being (Element of ( NAT )) holds (for R23 being (Element of ( NAT )) holds ((R22 <= R23 & R23 in H5(B95)) implies R22 in H5(B95)))))
proof
let C85 being (Element of F19());
let R22 being (Element of ( NAT ));
let R23 being (Element of ( NAT ));
assume L1137: (R22 <= R23 & R23 in { R20 where R20 is (Element of ( NAT )) : R20 < F21(C85) });
L1138: (ex R20 being (Element of ( NAT )) st (R23 = R20 & R20 < F21(C85))) by L1137;
L1139: R22 < F21(C85) by L1138 , L1137 , XXREAL_0:2;
thus L1140: thesis by L1139;
end;
consider C86 being (DecoratedTree of F19()) such that L1141: (( C86 . ( {} ) ) = F20() & (for B96 being (Element of ( dom C86 )) holds (( succ B96 ) = { ( B96 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : R21 in H5(( C86 . B96 )) } & (for R26 being (Element of ( NAT )) holds (R26 in H5(( C86 . B96 )) implies ( C86 . ( B96 ^ <* R26 *> ) ) = ( F22() . (( C86 . B96 ) , R26) )))))) from DTreeStructEx(L1136);
take C86;
thus L1142: ( C86 . ( {} ) ) = F20() by L1141;
let C87 being (Element of ( dom C86 ));
L1143: ( succ C87 ) = { ( C87 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : R21 in H4(F21(( C86 . C87 ))) } by L1141;
thus L1144: ( succ C87 ) c= { ( C87 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 < F21(( C86 . C87 )) }
proof
let R1 being set;
assume L1145: R1 in ( succ C87 );
consider R24 being (Element of ( NAT )) such that L1146: R1 = ( C87 ^ <* R24 *> ) and L1147: R24 in H4(F21(( C86 . C87 ))) by L1145 , L1143;
L1148: (ex R20 being (Element of ( NAT )) st (R24 = R20 & R20 < F21(( C86 . C87 )))) by L1147;
thus L1149: thesis by L1148 , L1146;
end;

thus L1150: { ( C87 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 < F21(( C86 . C87 )) } c= ( succ C87 )
proof
let R1 being set;
assume L1151: R1 in { ( C87 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : R20 < F21(( C86 . C87 )) };
consider R24 being (Element of ( NAT )) such that L1152: R1 = ( C87 ^ <* R24 *> ) and L1153: R24 < F21(( C86 . C87 )) by L1151;
L1154: R24 in H4(F21(( C86 . C87 ))) by L1153;
thus L1155: thesis by L1154 , L1143 , L1152;
end;

let R26 being (Element of ( NAT ));
assume L1156: R26 < F21(( C86 . C87 ));
L1157: R26 in H4(F21(( C86 . C87 ))) by L1156;
thus L1158: thesis by L1157 , L1141;
end;
begin
registration
let C88 being  finite Tree;
let C89 being (Element of C88);
cluster ( succ C89 ) ->  finite;
coherence;
end;
definition
let C90 being  finite Tree;
let C91 being (Element of C90);
func branchdeg C91 equals 
( card ( succ C91 ) );
correctness;
end;
registration
cluster  finite for DecoratedTree;
existence
proof
reconsider D125 = { ( {} ) } as Tree;
take ( D125 --> ( {} ) );
thus L1161: thesis;
end;
end;
registration
let C92 being non  empty set;
cluster  finite for (DecoratedTree of C92);
existence
proof
set D126 = the (Element of C92);
reconsider D127 = { ( {} ) } as Tree;
take ( D127 --> D126 );
thus L1163: thesis;
end;
end;
registration
let C93 , C94 being non  empty set;
cluster non  empty for (Relation of C93 , C94);
existence
proof
L1165: [: C93 , C94 :] c= [: C93 , C94 :];
thus L1166: thesis by L1165;
end;
end;
theorem
L1168: (for B97 , B98 being Tree holds (for B99 being (FinSequence of ( NAT )) holds (B99 in B97 implies (for B100 being (Element of ( B97 with-replacement (B99 , B98) )) holds (for B101 being (Element of B98) holds (B100 = ( B99 ^ B101 ) implies ( succ B100 ) , ( succ B101 ) are_equipotent ))))))
proof
let C95 , C96 being Tree;
let C97 being (FinSequence of ( NAT ));
assume that
L1169: C97 in C95;
set D128 = ( C95 with-replacement (C97 , C96) );
let C98 being (Element of ( C95 with-replacement (C97 , C96) ));
let C99 being (Element of C96);
assume L1170: C98 = ( C97 ^ C99 );
L1171: C97 is_a_prefix_of C98 by L1170 , TREES_1:1;
L1172: (for R26 being (Element of ( NAT )) holds (( C98 ^ <* R26 *> ) in D128 iff ( C99 ^ <* R26 *> ) in C96))
proof
let R26 being (Element of ( NAT ));
L1173: C97 is_a_proper_prefix_of ( C98 ^ <* R26 *> ) by L1171 , TREES_1:8;
L1174: ( C98 ^ <* R26 *> ) = ( C97 ^ ( C99 ^ <* R26 *> ) ) by L1170 , FINSEQ_1:32;
thus L1175: (( C98 ^ <* R26 *> ) in D128 implies ( C99 ^ <* R26 *> ) in C96)
proof
assume L1176: ( C98 ^ <* R26 *> ) in D128;
L1177: (ex R42 being (FinSequence of ( NAT )) st (R42 in C96 & ( C98 ^ <* R26 *> ) = ( C97 ^ R42 ))) by L1176 , L1169 , L1173 , TREES_1:def 9;
thus L1178: thesis by L1177 , L1174 , FINSEQ_1:33;
end;

assume L1179: ( C99 ^ <* R26 *> ) in C96;
thus L1180: thesis by L1179 , L1169 , L1174 , TREES_1:def 9;
end;
defpred S23[ set , set ] means (for R26 being (Element of ( NAT )) holds ($1 = ( C98 ^ <* R26 *> ) implies $2 = ( C99 ^ <* R26 *> )));
L1181: (for R1 being set holds (R1 in ( succ C98 ) implies (ex R2 being set st S23[ R1 , R2 ])))
proof
let R1 being set;
assume L1182: R1 in ( succ C98 );
consider R26 being (Element of ( NAT )) such that L1183: R1 = ( C98 ^ <* R26 *> ) and L1184: ( C98 ^ <* R26 *> ) in D128 by L1182;
take ( C99 ^ <* R26 *> );
let R25 being (Element of ( NAT ));
assume L1185: R1 = ( C98 ^ <* R25 *> );
thus L1186: thesis by L1185 , L1183 , FINSEQ_1:33;
end;
consider C100 being Function such that L1187: (( dom C100 ) = ( succ C98 ) & (for R1 being set holds (R1 in ( succ C98 ) implies S23[ R1 , ( C100 . R1 ) ]))) from CLASSES1:sch 1(L1181);
L1188:
now
let R1 being set;
thus L1189: (R1 in ( rng C100 ) implies R1 in ( succ C99 ))
proof
assume L1190: R1 in ( rng C100 );
consider R2 being set such that L1191: R2 in ( dom C100 ) and L1192: R1 = ( C100 . R2 ) by L1190 , FUNCT_1:def 3;
consider R26 being (Element of ( NAT )) such that L1193: R2 = ( C98 ^ <* R26 *> ) and L1194: ( C98 ^ <* R26 *> ) in D128 by L1187 , L1191;
L1195: R1 = ( C99 ^ <* R26 *> ) by L1187 , L1191 , L1192 , L1193;
L1196: ( C99 ^ <* R26 *> ) in C96 by L1172 , L1194;
thus L1197: thesis by L1196 , L1195;
end;

assume L1198: R1 in ( succ C99 );
consider R26 being (Element of ( NAT )) such that L1199: R1 = ( C99 ^ <* R26 *> ) and L1200: ( C99 ^ <* R26 *> ) in C96 by L1198;
L1201: ( C98 ^ <* R26 *> ) in D128 by L1172 , L1200;
L1202: ( C98 ^ <* R26 *> ) in ( dom C100 ) by L1201 , L1187;
L1203: ( C100 . ( C98 ^ <* R26 *> ) ) = R1 by L1202 , L1187 , L1199;
thus L1204: R1 in ( rng C100 ) by L1203 , L1202 , FUNCT_1:def 3;
end;
L1205: ( rng C100 ) = ( succ C99 ) by L1188 , TARSKI:1;
L1206: C100 is  one-to-one
proof
let R40 being set;
let R41 being set;
assume that
L1207: R40 in ( dom C100 )
and
L1208: R41 in ( dom C100 )
and
L1209: ( C100 . R40 ) = ( C100 . R41 );
consider R25 being (Element of ( NAT )) such that L1210: R40 = ( C98 ^ <* R25 *> ) and L1211: ( C98 ^ <* R25 *> ) in D128 by L1187 , L1207;
consider R21 being (Element of ( NAT )) such that L1212: R41 = ( C98 ^ <* R21 *> ) and L1213: ( C98 ^ <* R21 *> ) in D128 by L1187 , L1208;
L1214: ( C99 ^ <* R25 *> ) = ( C100 . R40 ) by L1187 , L1207 , L1210
.= ( C99 ^ <* R21 *> ) by L1187 , L1208 , L1209 , L1212;
thus L1215: thesis by L1214 , L1210 , L1212 , FINSEQ_1:33;
end;
thus L1216: thesis by L1206 , L1187 , L1205 , WELLORD2:def 4;
end;
scheme DTreeStructEx { F23() -> non  empty set , F24() -> (Element of F23()) , P6[set , set] , F25() -> (Function of [: F23() , ( NAT ) :] , F23()) } : (ex B102 being (DecoratedTree of F23()) st (( B102 . ( {} ) ) = F24() & (for B103 being (Element of ( dom B102 )) holds (( succ B103 ) = { ( B103 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : P6[ R21 , ( B102 . B103 ) ] } & (for R26 being (Element of ( NAT )) holds (P6[ R26 , ( B102 . B103 ) ] implies ( B102 . ( B103 ^ <* R26 *> ) ) = ( F25() . (( B102 . B103 ) , R26) )))))))
provided
L1217: (for B104 being (Element of F23()) holds (for R22 being (Element of ( NAT )) holds (for R23 being (Element of ( NAT )) holds ((R22 <= R23 & P6[ R23 , B104 ]) implies P6[ R22 , B104 ]))))
proof
defpred S24[ (Element of ( NAT )) ] means (ex B105 being (DecoratedTree of F23()) st (( B105 . ( {} ) ) = F24() & (for B106 being (Element of ( dom B105 )) holds (( len B106 ) <= $1 & (( len B106 ) < $1 implies (( succ B106 ) = { ( B106 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : P6[ R21 , ( B105 . B106 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( B105 . B106 ) & P6[ R26 , R1 ]) implies ( B105 . ( B106 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))));
L1218: S24[ ( 0 ) ]
proof
reconsider D129 = { ( {} ) } as Tree;
take D130 = ( D129 --> F24() );
L1219: ( {} ) in D129 by TREES_1:22;
thus L1220: ( D130 . ( {} ) ) = F24() by L1219 , FUNCOP_1:7;
let C101 being (Element of ( dom D130 ));
L1221: ( dom D130 ) = D129 by FUNCOP_1:13;
L1222: C101 = ( {} ) by L1221 , TARSKI:def 1;
thus L1223: ( len C101 ) <= ( 0 ) by L1222;
assume L1224: ( len C101 ) < ( 0 );
thus L1225: thesis by L1224;
end;
L1226: (for R21 being (Element of ( NAT )) holds (S24[ R21 ] implies S24[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
given C102 being (DecoratedTree of F23()) such that
L1227: (( C102 . ( {} ) ) = F24() & (for B107 being (Element of ( dom C102 )) holds (( len B107 ) <= R21 & (( len B107 ) < R21 implies (( succ B107 ) = { ( B107 ^ <* R25 *> ) where R25 is (Element of ( NAT )) : P6[ R25 , ( C102 . B107 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C102 . B107 ) & P6[ R26 , R1 ]) implies ( C102 . ( B107 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) )))))))));

reconsider D131 = ( { ( B108 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B108 is (Element of ( dom C102 )) : P6[ R26 , ( C102 . B108 ) ] } \/ ( dom C102 ) ) as non  empty set;
L1228: D131 is  Tree-like
proof
thus L1229: D131 c= ( ( NAT ) * )
proof
let R1 being set;
assume L1230: R1 in D131;
L1231: (R1 in { ( B109 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B109 is (Element of ( dom C102 )) : P6[ R26 , ( C102 . B109 ) ] } or (R1 in ( dom C102 ) & ( dom C102 ) c= ( ( NAT ) * ))) by L1230 , TREES_1:def 3 , XBOOLE_0:def 3;
assume L1232: (not R1 in ( ( NAT ) * ));
L1233: (ex B110 being (Element of ( NAT )) st (ex B111 being (Element of ( dom C102 )) st (R1 = ( B111 ^ <* B110 *> ) & P6[ B110 , ( C102 . B111 ) ]))) by L1232 , L1231;
thus L1234: thesis by L1233 , L1232 , FINSEQ_1:def 11;
end;

thus L1235: (for R30 being (FinSequence of ( NAT )) holds (R30 in D131 implies ( ProperPrefixes R30 ) c= D131))
proof
let R30 being (FinSequence of ( NAT ));
assume L1236: R30 in D131;
L1237: (R30 in { ( B112 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B112 is (Element of ( dom C102 )) : P6[ R26 , ( C102 . B112 ) ] } or R30 in ( dom C102 )) by L1236 , XBOOLE_0:def 3;
L1238:
now
assume L1239: R30 in { ( B113 ^ <* R26 *> ) where R26 is (Element of ( NAT )) , B113 is (Element of ( dom C102 )) : P6[ R26 , ( C102 . B113 ) ] };
consider C103 being (Element of ( NAT )), C104 being (Element of ( dom C102 )) such that L1240: R30 = ( C104 ^ <* C103 *> ) and L1241: P6[ C103 , ( C102 . C104 ) ] by L1239;
L1242: ( ProperPrefixes C104 ) c= ( dom C102 ) by TREES_1:def 3;
L1243: ( dom C102 ) c= D131 by XBOOLE_1:7;
L1244: C104 in ( dom C102 );
L1245: ( ProperPrefixes C104 ) c= D131 by L1242 , L1243 , XBOOLE_1:1;
L1246: { C104 } c= D131 by L1243 , L1244 , ZFMISC_1:31;
L1247: ( ProperPrefixes R30 ) = ( ( ProperPrefixes C104 ) \/ { C104 } ) by L1240 , L21;
thus L1248: thesis by L1247 , L1245 , L1246 , XBOOLE_1:8;
end;
L1249: (( ProperPrefixes R30 ) c= D131 or (( ProperPrefixes R30 ) c= ( dom C102 ) & ( dom C102 ) c= D131)) by L1238 , L1237 , TREES_1:def 3 , XBOOLE_1:7;
thus L1250: thesis by L1249 , XBOOLE_1:1;
end;

let R30 being (FinSequence of ( NAT ));
let R25 being (Element of ( NAT ));
let R26 being (Element of ( NAT ));
assume L1251: ( R30 ^ <* R25 *> ) in D131;
L1252: (( R30 ^ <* R25 *> ) in { ( B114 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B114 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B114 ) ] } or ( R30 ^ <* R25 *> ) in ( dom C102 )) by L1251 , XBOOLE_0:def 3;
assume that
L1253: R26 <= R25
and
L1254: (not ( R30 ^ <* R26 *> ) in D131);
L1255: (not ( R30 ^ <* R26 *> ) in ( dom C102 )) by L1254 , XBOOLE_0:def 3;
consider C105 being (Element of ( NAT )), C106 being (Element of ( dom C102 )) such that L1256: ( R30 ^ <* R25 *> ) = ( C106 ^ <* C105 *> ) and L1257: P6[ C105 , ( C102 . C106 ) ] by L1255 , L1252 , L1253 , TREES_1:def 3;
L1258: (( len ( R30 ^ <* R25 *> ) ) = ( ( len R30 ) + ( len <* R25 *> ) ) & ( len <* R25 *> ) = 1) by FINSEQ_1:22 , FINSEQ_1:40;
L1259: (( len ( C106 ^ <* C105 *> ) ) = ( ( len C106 ) + ( len <* C105 *> ) ) & ( len <* C105 *> ) = 1) by FINSEQ_1:22 , FINSEQ_1:40;
L1260: (( ( R30 ^ <* R25 *> ) . ( ( len R30 ) + 1 ) ) = R25 & ( ( C106 ^ <* C105 *> ) . ( ( len C106 ) + 1 ) ) = C105) by FINSEQ_1:42;
L1261: R30 = C106 by L1260 , L1256 , L1258 , L1259 , FINSEQ_1:33;
L1262: P6[ R26 , ( C102 . C106 ) ] by L1217 , L1253 , L1256 , L1257 , L1258 , L1259 , L1260;
L1263: ( R30 ^ <* R26 *> ) in { ( B115 ^ <* R20 *> ) where R20 is (Element of ( NAT )) , B115 is (Element of ( dom C102 )) : P6[ R20 , ( C102 . B115 ) ] } by L1262 , L1261;
thus L1264: thesis by L1263 , L1254 , XBOOLE_0:def 3;
end;
reconsider D132 = D131 as Tree by L1228;
defpred S25[ FinSequence , set ] means (($1 in ( dom C102 ) & $2 = ( C102 . $1 )) or ((not $1 in ( dom C102 )) & (ex R26 being (Element of ( NAT )) st (ex R31 being (FinSequence of ( NAT )) st ($1 = ( R31 ^ <* R26 *> ) & $2 = ( F25() . (( C102 . R31 ) , R26) ))))));
L1265: (for R30 being (FinSequence of ( NAT )) holds (R30 in D132 implies (ex R1 being set st S25[ R30 , R1 ])))
proof
let R30 being (FinSequence of ( NAT ));
assume L1266: R30 in D132;
L1267: (R30 in { ( B116 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B116 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B116 ) ] } or R30 in ( dom C102 )) by L1266 , XBOOLE_0:def 3;
L1268:
now
assume L1269: (not R30 in ( dom C102 ));
consider C107 being (Element of ( NAT )), C108 being (Element of ( dom C102 )) such that L1270: R30 = ( C108 ^ <* C107 *> ) and L1271: P6[ C107 , ( C102 . C108 ) ] by L1269 , L1267;
take D133 = ( F25() . (( C102 . C108 ) , C107) );
thus L1272: ((R30 in ( dom C102 ) & D133 = ( C102 . R30 )) or ((not R30 in ( dom C102 )) & (ex R26 being (Element of ( NAT )) st (ex R31 being (FinSequence of ( NAT )) st (R30 = ( R31 ^ <* R26 *> ) & D133 = ( F25() . (( C102 . R31 ) , R26) )))))) by L1269 , L1270;
end;
thus L1273: thesis by L1268;
end;
consider C109 being DecoratedTree such that L1274: (( dom C109 ) = D132 & (for R30 being (FinSequence of ( NAT )) holds (R30 in D132 implies S25[ R30 , ( C109 . R30 ) ]))) from DTreeEx(L1265);
L1275: ( rng C109 ) c= F23()
proof
let R1 being set;
assume L1276: R1 in ( rng C109 );
consider R2 being set such that L1277: R2 in ( dom C109 ) and L1278: R1 = ( C109 . R2 ) by L1276 , FUNCT_1:def 3;
reconsider D134 = R2 as (Element of ( dom C109 )) by L1277;
L1279:
now
assume L1280: D134 in ( dom C102 );
reconsider D135 = D134 as (Element of ( dom C102 )) by L1280;
L1281: ( C102 . D135 ) in F23();
thus L1282: thesis by L1281 , L1274 , L1278;
end;
L1283:
now
assume L1284: (not D134 in ( dom C102 ));
consider R26 being (Element of ( NAT )), R31 being (FinSequence of ( NAT )) such that L1285: D134 = ( R31 ^ <* R26 *> ) and L1286: ( C109 . D134 ) = ( F25() . (( C102 . R31 ) , R26) ) by L1284 , L1274;
L1287: D134 in { ( B117 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B117 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B117 ) ] } by L1274 , L1284 , XBOOLE_0:def 3;
consider C110 being (Element of ( NAT )), C111 being (Element of ( dom C102 )) such that L1288: D134 = ( C111 ^ <* C110 *> ) and L1289: P6[ C110 , ( C102 . C111 ) ] by L1287;
L1290: ( len <* R26 *> ) = 1 by FINSEQ_1:39;
L1291: ( len <* C110 *> ) = 1 by FINSEQ_1:39;
L1292: ( len ( R31 ^ <* R26 *> ) ) = ( ( len R31 ) + 1 ) by L1290 , FINSEQ_1:22;
L1293: ( len ( C111 ^ <* C110 *> ) ) = ( ( len C111 ) + 1 ) by L1291 , FINSEQ_1:22;
L1294: (( ( R31 ^ <* R26 *> ) . ( ( len R31 ) + 1 ) ) = R26 & ( ( C111 ^ <* C110 *> ) . ( ( len C111 ) + 1 ) ) = C110) by FINSEQ_1:42;
L1295: R31 = C111 by L1294 , L1285 , L1288 , L1292 , L1293 , FINSEQ_1:33;
L1296: ( C102 . C111 ) in F23();
L1297: [ ( C102 . R31 ) , R26 ] in [: F23() , ( NAT ) :] by L1296 , L1295 , ZFMISC_1:87;
thus L1298: thesis by L1297 , L1278 , L1286 , FUNCT_2:5;
end;
thus L1299: thesis by L1283 , L1279;
end;
reconsider D136 = C109 as (DecoratedTree of F23()) by L1275 , RELAT_1:def 19;
take D136;
L1300: (( <*> ( NAT ) ) in D132 & ( <*> ( NAT ) ) in ( dom C102 )) by TREES_1:22;
thus L1301: ( D136 . ( {} ) ) = F24() by L1300 , L1227 , L1274;
let C112 being (Element of ( dom D136 ));
L1302:
now
assume L1303: C112 in { ( B118 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B118 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B118 ) ] };
consider C113 being (Element of ( NAT )), C114 being (Element of ( dom C102 )) such that L1304: C112 = ( C114 ^ <* C113 *> ) and L1305: P6[ C113 , ( C102 . C114 ) ] by L1303;
L1306: ( len C114 ) <= R21 by L1227;
L1307: (( len <* C113 *> ) = 1 & ( ( len C114 ) + 1 ) <= ( R21 + 1 )) by L1306 , FINSEQ_1:39 , XREAL_1:7;
thus L1308: ( len C112 ) <= ( R21 + 1 ) by L1307 , L1304 , FINSEQ_1:22;
end;
L1309:
now
assume L1310: C112 in ( dom C102 );
reconsider D137 = C112 as (Element of ( dom C102 )) by L1310;
L1311: (( len D137 ) <= R21 & R21 <= ( R21 + 1 )) by L1227 , NAT_1:11;
thus L1312: ( len C112 ) <= ( R21 + 1 ) by L1311 , XXREAL_0:2;
end;
thus L1313: ( len C112 ) <= ( R21 + 1 ) by L1309 , L1274 , L1302 , XBOOLE_0:def 3;
assume L1314: ( len C112 ) < ( R21 + 1 );
L1315:
now
assume L1316: (not C112 in ( dom C102 ));
L1317: C112 in { ( B119 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B119 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B119 ) ] } by L1316 , L1274 , XBOOLE_0:def 3;
consider C115 being (Element of ( NAT )), C116 being (Element of ( dom C102 )) such that L1318: C112 = ( C116 ^ <* C115 *> ) and L1319: P6[ C115 , ( C102 . C116 ) ] by L1317;
L1320: ( len C112 ) = ( ( len C116 ) + ( len <* C115 *> ) ) by L1318 , FINSEQ_1:22;
L1321: (( len <* C115 *> ) = 1 & ( len C112 ) <= R21) by L1314 , FINSEQ_1:39 , NAT_1:13;
L1322: ( len C116 ) < R21 by L1321 , L1320 , NAT_1:13;
L1323: ( succ C116 ) = { ( C116 ^ <* R25 *> ) where R25 is (Element of ( NAT )) : P6[ R25 , ( C102 . C116 ) ] } by L1322 , L1227;
L1324: C112 in ( succ C116 ) by L1323 , L1318 , L1319;
thus L1325: contradiction by L1324 , L1316;
end;
L1326: ( D136 . C112 ) = ( C102 . C112 ) by L1315 , L1274;
reconsider D138 = C112 as (Element of ( dom C102 )) by L1315;
thus L1327: ( succ C112 ) c= { ( C112 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D136 . C112 ) ] }
proof
let R1 being set;
assume L1328: R1 in ( succ C112 );
consider R26 being (Element of ( NAT )) such that L1329: R1 = ( C112 ^ <* R26 *> ) and L1330: ( C112 ^ <* R26 *> ) in ( dom D136 ) by L1328;
L1331:
now
per cases ;
suppose L1332: ( C112 ^ <* R26 *> ) in ( dom C102 );

reconsider D139 = ( C112 ^ <* R26 *> ) , D140 = C112 as (Element of ( dom C102 )) by L1332 , TREES_1:21;
L1333: (( len D139 ) <= R21 & ( len D139 ) = ( ( len C112 ) + 1 )) by L1227 , FINSEQ_2:16;
L1334: ( len C112 ) < R21 by L1333 , NAT_1:13;
L1335: ( succ D140 ) = { ( D140 ^ <* R25 *> ) where R25 is (Element of ( NAT )) : P6[ R25 , ( C102 . D140 ) ] } by L1334 , L1227;
thus L1336: thesis by L1335 , L1326 , L1329 , L1332;
end;
suppose L1337: (not ( C112 ^ <* R26 *> ) in ( dom C102 ));

L1338: ( C112 ^ <* R26 *> ) in { ( B120 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B120 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B120 ) ] } by L1337 , L1274 , L1330 , XBOOLE_0:def 3;
consider C117 being (Element of ( NAT )), C118 being (Element of ( dom C102 )) such that L1339: ( C112 ^ <* R26 *> ) = ( C118 ^ <* C117 *> ) and L1340: P6[ C117 , ( C102 . C118 ) ] by L1338;
L1341: C112 = C118 by L1339 , FINSEQ_2:17;
thus L1342: thesis by L1341 , L1326 , L1329 , L1339 , L1340;
end;
end;
thus L1344: thesis by L1331;
end;

thus L1345: { ( C112 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D136 . C112 ) ] } c= ( succ C112 )
proof
let R1 being set;
assume L1346: R1 in { ( C112 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D136 . C112 ) ] };
consider R26 being (Element of ( NAT )) such that L1347: R1 = ( C112 ^ <* R26 *> ) and L1348: P6[ R26 , ( D136 . C112 ) ] by L1346;
L1349: R1 = ( D138 ^ <* R26 *> ) by L1347;
L1350: R1 in { ( B121 ^ <* R24 *> ) where R24 is (Element of ( NAT )) , B121 is (Element of ( dom C102 )) : P6[ R24 , ( C102 . B121 ) ] } by L1349 , L1326 , L1348;
L1351: R1 in ( dom D136 ) by L1350 , L1274 , XBOOLE_0:def 3;
thus L1352: thesis by L1351 , L1347;
end;

let R26 being (Element of ( NAT ));
let R1 being set;
assume that
L1353: R1 = ( D136 . C112 )
and
L1354: P6[ R26 , R1 ];
L1355: ( C112 ^ <* R26 *> ) in { ( C112 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D136 . C112 ) ] } by L1353 , L1354;
L1356: ( C112 ^ <* R26 *> ) in ( succ C112 ) by L1355 , L1345;
L1357:
now
per cases ;
suppose L1358: ( C112 ^ <* R26 *> ) in ( dom C102 );

reconsider D141 = ( C112 ^ <* R26 *> ) as (Element of ( dom C102 )) by L1358;
L1359: (( len D141 ) <= R21 & ( len D141 ) = ( ( len C112 ) + 1 )) by L1227 , FINSEQ_2:16;
L1360: ( len D138 ) < R21 by L1359 , NAT_1:13;
L1361: ( C102 . ( D138 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ) by L1360 , L1227 , L1326 , L1353 , L1354;
thus L1362: thesis by L1361 , L1274 , L1356 , L1358;
end;
suppose L1363: (not ( C112 ^ <* R26 *> ) in ( dom C102 ));

consider R24 being (Element of ( NAT )), R31 being (FinSequence of ( NAT )) such that L1364: ( C112 ^ <* R26 *> ) = ( R31 ^ <* R24 *> ) and L1365: ( D136 . ( C112 ^ <* R26 *> ) ) = ( F25() . (( C102 . R31 ) , R24) ) by L1363 , L1274 , L1356;
L1366: (C112 = R31 & R26 = R24) by L1364 , FINSEQ_2:17;
thus L1367: thesis by L1366 , L1274 , L1315 , L1353 , L1365;
end;
end;
thus L1369: thesis by L1357;
end;
L1370: (for R21 being (Element of ( NAT )) holds S24[ R21 ]) from NAT_1:sch 1(L1218 , L1226);
defpred S26[ set , set ] means (ex B122 being (DecoratedTree of F23()) st (ex R21 being (Element of ( NAT )) st ($1 = R21 & $2 = B122 & ( B122 . ( {} ) ) = F24() & (for B123 being (Element of ( dom B122 )) holds (( len B123 ) <= R21 & (( len B123 ) < R21 implies (( succ B123 ) = { ( B123 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( B122 . B123 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( B122 . B123 ) & P6[ R26 , R1 ]) implies ( B122 . ( B123 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) )))))))))));
L1371: (for R1 being set holds (R1 in ( NAT ) implies (ex R2 being set st S26[ R1 , R2 ])))
proof
let R1 being set;
assume L1372: R1 in ( NAT );
reconsider D142 = R1 as (Element of ( NAT )) by L1372;
consider C119 being (DecoratedTree of F23()) such that L1373: (( C119 . ( {} ) ) = F24() & (for B124 being (Element of ( dom C119 )) holds (( len B124 ) <= D142 & (( len B124 ) < D142 implies (( succ B124 ) = { ( B124 ^ <* R21 *> ) where R21 is (Element of ( NAT )) : P6[ R21 , ( C119 . B124 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C119 . B124 ) & P6[ R26 , R1 ]) implies ( C119 . ( B124 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1370;
reconsider D143 = C119 as set;
take D143;
take C119;
take D142;
thus L1374: thesis by L1373;
end;
consider R17 being Function such that L1375: (( dom R17 ) = ( NAT ) & (for R1 being set holds (R1 in ( NAT ) implies S26[ R1 , ( R17 . R1 ) ]))) from CLASSES1:sch 1(L1371);
reconsider D144 = ( rng R17 ) as non  empty set by L1375 , RELAT_1:42;
L1376: (for R1 being set holds (R1 in D144 implies R1 is (DecoratedTree of F23())))
proof
let R1 being set;
assume L1377: R1 in D144;
consider R2 being set such that L1378: R2 in ( dom R17 ) and L1379: R1 = ( R17 . R2 ) by L1377 , FUNCT_1:def 3;
L1380: (ex B125 being (DecoratedTree of F23()) st (ex R21 being (Element of ( NAT )) st (R2 = R21 & ( R17 . R2 ) = B125 & ( B125 . ( {} ) ) = F24() & (for B126 being (Element of ( dom B125 )) holds (( len B126 ) <= R21 & (( len B126 ) < R21 implies (( succ B126 ) = { ( B126 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( B125 . B126 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( B125 . B126 ) & P6[ R26 , R1 ]) implies ( B125 . ( B126 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))))) by L1375 , L1378;
thus L1381: thesis by L1380 , L1379;
end;
L1382: (for R38 being DecoratedTree holds (for R39 being DecoratedTree holds (for R22 being (Element of ( NAT )) holds (for R23 being (Element of ( NAT )) holds ((R38 = ( R17 . R22 ) & R39 = ( R17 . R23 ) & R22 <= R23) implies R38 c= R39)))))
proof
let R38 being DecoratedTree;
let R39 being DecoratedTree;
let C120 , C121 being (Element of ( NAT ));
assume that
L1383: R38 = ( R17 . C120 )
and
L1384: R39 = ( R17 . C121 )
and
L1385: C120 <= C121;
consider C122 being (DecoratedTree of F23()), R22 being (Element of ( NAT )) such that L1386: (C120 = R22 & ( R17 . C120 ) = C122 & ( C122 . ( {} ) ) = F24() & (for B127 being (Element of ( dom C122 )) holds (( len B127 ) <= R22 & (( len B127 ) < R22 implies (( succ B127 ) = { ( B127 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C122 . B127 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C122 . B127 ) & P6[ R26 , R1 ]) implies ( C122 . ( B127 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1375;
consider C123 being (DecoratedTree of F23()), R23 being (Element of ( NAT )) such that L1387: (C121 = R23 & ( R17 . C121 ) = C123 & ( C123 . ( {} ) ) = F24() & (for B128 being (Element of ( dom C123 )) holds (( len B128 ) <= R23 & (( len B128 ) < R23 implies (( succ B128 ) = { ( B128 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C123 . B128 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C123 . B128 ) & P6[ R26 , R1 ]) implies ( C123 . ( B128 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1375;
defpred S27[ (Element of ( NAT )) ] means (for B129 being (Element of ( dom R38 )) holds (( len B129 ) <= $1 implies (B129 in ( dom R39 ) & ( R38 . B129 ) = ( R39 . B129 ))));
L1388: S27[ ( 0 ) ]
proof
let C124 being (Element of ( dom R38 ));
assume that
L1389: ( len C124 ) <= ( 0 );
L1390: C124 = ( {} ) by L1389;
thus L1391: thesis by L1390 , L1383 , L1384 , L1386 , L1387 , TREES_1:22;
end;
L1392: (for R21 being (Element of ( NAT )) holds (S27[ R21 ] implies S27[ ( R21 + 1 ) ]))
proof
let R21 being (Element of ( NAT ));
assume L1393: (for B130 being (Element of ( dom R38 )) holds (( len B130 ) <= R21 implies (B130 in ( dom R39 ) & ( R38 . B130 ) = ( R39 . B130 ))));
let C125 being (Element of ( dom R38 ));
assume L1394: ( len C125 ) <= ( R21 + 1 );
L1395: (( len C125 ) <= R21 or ( len C125 ) = ( R21 + 1 )) by L1394 , NAT_1:8;
L1396:
now
assume L1397: ( len C125 ) = ( R21 + 1 );
reconsider D145 = ( C125 | ( Seg R21 ) ) as (FinSequence of ( NAT )) by FINSEQ_1:18;
L1398: D145 is_a_prefix_of C125 by TREES_1:def 1;
reconsider D146 = D145 as (Element of ( dom R38 )) by L1398 , TREES_1:20;
L1399: R21 <= ( R21 + 1 ) by NAT_1:11;
L1400: ( R21 + 1 ) <= R22 by L1383 , L1386 , L1397;
L1401: ( len D146 ) = R21 by L1397 , L1399 , FINSEQ_1:17;
L1402: R21 < R22 by L1400 , NAT_1:13;
L1403: ( R38 . D146 ) = ( R39 . D146 ) by L1393 , L1401;
reconsider D147 = D146 as (Element of ( dom R39 )) by L1393 , L1401;
L1404: C125 <> ( {} ) by L1397;
consider C126 being FinSequence, C127 being set such that L1405: C125 = ( C126 ^ <* C127 *> ) by L1404 , FINSEQ_1:46;
L1406: (D146 is_a_prefix_of C125 & C126 is_a_prefix_of C125) by L1405 , TREES_1:1 , TREES_1:def 1;
L1407: ( R21 + 1 ) = ( ( len C126 ) + 1 ) by L1397 , L1405 , FINSEQ_2:16;
L1408: D146 = C126 by L1407 , L1401 , L1406 , L1 , TREES_1:4;
L1409: <* C127 *> is (FinSequence of ( NAT )) by L1405 , FINSEQ_1:36;
L1410: ( rng <* C127 *> ) c= ( NAT ) by L1409 , FINSEQ_1:def 4;
L1411: (( rng <* C127 *> ) = { C127 } & C127 in { C127 }) by FINSEQ_1:38 , TARSKI:def 1;
reconsider D148 = C127 as (Element of ( NAT )) by L1411 , L1410;
L1412: ( D146 ^ <* D148 *> ) in ( succ D146 ) by L1405 , L1408;
L1413: ( succ D146 ) = { ( D146 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( R38 . D146 ) ] } by L1383 , L1386 , L1401 , L1402;
consider R20 being (Element of ( NAT )) such that L1414: ( D146 ^ <* D148 *> ) = ( D146 ^ <* R20 *> ) and L1415: P6[ R20 , ( R38 . D146 ) ] by L1413 , L1412;
L1416: R21 < R23 by L1385 , L1386 , L1387 , L1402 , XXREAL_0:2;
L1417: ( succ D147 ) = { ( D147 ^ <* R24 *> ) where R24 is (Element of ( NAT )) : P6[ R24 , ( R39 . D147 ) ] } by L1416 , L1384 , L1387 , L1401;
L1418: D148 = R20 by L1414 , FINSEQ_2:17;
L1419: C125 in ( succ D147 ) by L1403 , L1405 , L1408 , L1414 , L1415 , L1417;
L1420: ( C122 . C125 ) = ( F25() . (( C122 . D146 ) , D148) ) by L1383 , L1386 , L1401 , L1402 , L1405 , L1408 , L1415 , L1418;
thus L1421: thesis by L1420 , L1383 , L1384 , L1386 , L1387 , L1401 , L1403 , L1405 , L1408 , L1415 , L1416 , L1418 , L1419;
end;
thus L1422: thesis by L1396 , L1393 , L1395;
end;
L1423: (for R21 being (Element of ( NAT )) holds S27[ R21 ]) from NAT_1:sch 1(L1388 , L1392);
let R1 being set;
assume L1424: R1 in R38;
consider R2 being set, R3 being set such that L1425: [ R2 , R3 ] = R1 by L1424 , RELAT_1:def 1;
L1426: ( R38 . R2 ) = R3 by L1424 , L1425 , FUNCT_1:1;
reconsider D149 = R2 as (Element of ( dom R38 )) by L1424 , L1425 , FUNCT_1:1;
L1427: ( len D149 ) <= ( len D149 );
L1428: (D149 in ( dom R39 ) & ( R38 . D149 ) = ( R39 . D149 )) by L1427 , L1423;
thus L1429: thesis by L1428 , L1425 , L1426 , FUNCT_1:1;
end;
L1430: D144 is  c=-linear
proof
let C128 , C129 being set;
assume L1431: C128 in D144;
consider R1 being set such that L1432: R1 in ( dom R17 ) and L1433: C128 = ( R17 . R1 ) by L1431 , FUNCT_1:def 3;
assume L1434: C129 in D144;
consider R2 being set such that L1435: R2 in ( dom R17 ) and L1436: C129 = ( R17 . R2 ) by L1434 , FUNCT_1:def 3;
L1437: C128 is DecoratedTree by L1376 , L1431;
L1438: C129 is DecoratedTree by L1376 , L1434;
reconsider D150 = R1 , D151 = R2 as (Element of ( NAT )) by L1375 , L1432 , L1435;
L1439: (D150 <= D151 or D151 <= D150);
thus L1440: (C128 c= C129 or C129 c= C128) by L1439 , L1382 , L1433 , L1436 , L1437 , L1438;
end;
reconsider D152 = ( union ( rng R17 ) ) as (DecoratedTree of F23()) by L1430 , L1376 , L844;
take D152;
consider C130 being (DecoratedTree of F23()), R21 being (Element of ( NAT )) such that L1441: (( 0 ) = R21 & ( R17 . ( 0 ) ) = C130 & ( C130 . ( {} ) ) = F24() & (for B131 being (Element of ( dom C130 )) holds (( len B131 ) <= R21 & (( len B131 ) < R21 implies (( succ B131 ) = { ( B131 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C130 . B131 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C130 . B131 ) & P6[ R26 , R1 ]) implies ( C130 . ( B131 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1375;
L1442: ( {} ) in ( dom C130 ) by TREES_1:22;
L1443: [ ( {} ) , F24() ] in C130 by L1442 , L1441 , FUNCT_1:1;
L1444: C130 in ( rng R17 ) by L1375 , L1441 , FUNCT_1:def 3;
L1445: [ ( {} ) , F24() ] in D152 by L1444 , L1443 , TARSKI:def 4;
thus L1446: ( D152 . ( {} ) ) = F24() by L1445 , FUNCT_1:1;
L1447: (for R38 being DecoratedTree holds (for R1 being set holds ((R38 in D144 & R1 in ( dom R38 )) implies (R1 in ( dom D152 ) & ( R38 . R1 ) = ( D152 . R1 )))))
proof
let R38 being DecoratedTree;
let R1 being set;
assume that
L1448: R38 in D144
and
L1449: R1 in ( dom R38 );
L1450: [ R1 , ( R38 . R1 ) ] in R38 by L1449 , FUNCT_1:1;
L1451: [ R1 , ( R38 . R1 ) ] in D152 by L1450 , L1448 , TARSKI:def 4;
thus L1452: thesis by L1451 , FUNCT_1:1;
end;
let C131 being (Element of ( dom D152 ));
thus L1453: ( succ C131 ) c= { ( C131 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D152 . C131 ) ] }
proof
let R1 being set;
assume L1454: R1 in ( succ C131 );
consider R24 being (Element of ( NAT )) such that L1455: R1 = ( C131 ^ <* R24 *> ) and L1456: ( C131 ^ <* R24 *> ) in ( dom D152 ) by L1454;
L1457: [ R1 , ( D152 . R1 ) ] in D152 by L1455 , L1456 , FUNCT_1:1;
consider R7 being set such that L1458: [ R1 , ( D152 . R1 ) ] in R7 and L1459: R7 in ( rng R17 ) by L1457 , TARSKI:def 4;
consider R2 being set such that L1460: R2 in ( NAT ) and L1461: R7 = ( R17 . R2 ) by L1375 , L1459 , FUNCT_1:def 3;
consider C132 being (DecoratedTree of F23()), R22 being (Element of ( NAT )) such that L1462: (R2 = R22 & ( R17 . R2 ) = C132 & ( C132 . ( {} ) ) = F24() & (for B132 being (Element of ( dom C132 )) holds (( len B132 ) <= R22 & (( len B132 ) < R22 implies (( succ B132 ) = { ( B132 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C132 . B132 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C132 . B132 ) & P6[ R26 , R1 ]) implies ( C132 . ( B132 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1375 , L1460;
L1463: ( C131 ^ <* R24 *> ) in ( dom C132 ) by L1455 , L1458 , L1461 , L1462 , FUNCT_1:1;
reconsider D153 = C131 , D154 = ( C131 ^ <* R24 *> ) as (Element of ( dom C132 )) by L1463 , TREES_1:21;
L1464: ( len D154 ) <= R22 by L1462;
L1465: ( ( len C131 ) + 1 ) <= R22 by L1464 , FINSEQ_2:16;
L1466: ( len D153 ) < R22 by L1465 , NAT_1:13;
L1467: ( succ D153 ) = { ( D153 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C132 . D153 ) ] } by L1466 , L1462;
L1468: ( C132 . C131 ) = ( D152 . C131 ) by L1447 , L1459 , L1461 , L1462 , L1466;
thus L1469: thesis by L1468 , L1455 , L1463 , L1467;
end;

L1470: [ C131 , ( D152 . C131 ) ] in D152 by FUNCT_1:1;
consider R7 being set such that L1471: [ C131 , ( D152 . C131 ) ] in R7 and L1472: R7 in D144 by L1470 , TARSKI:def 4;
consider R2 being set such that L1473: R2 in ( NAT ) and L1474: R7 = ( R17 . R2 ) by L1375 , L1472 , FUNCT_1:def 3;
reconsider D155 = R2 as (Element of ( NAT )) by L1473;
consider C133 being (DecoratedTree of F23()), R22 being (Element of ( NAT )) such that L1475: (D155 = R22 & ( R17 . D155 ) = C133 & ( C133 . ( {} ) ) = F24() & (for B133 being (Element of ( dom C133 )) holds (( len B133 ) <= R22 & (( len B133 ) < R22 implies (( succ B133 ) = { ( B133 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C133 . B133 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C133 . B133 ) & P6[ R26 , R1 ]) implies ( C133 . ( B133 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1375;
consider C134 being (DecoratedTree of F23()), R23 being (Element of ( NAT )) such that L1476: (( D155 + 1 ) = R23 & ( R17 . ( D155 + 1 ) ) = C134 & ( C134 . ( {} ) ) = F24() & (for B134 being (Element of ( dom C134 )) holds (( len B134 ) <= R23 & (( len B134 ) < R23 implies (( succ B134 ) = { ( B134 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C134 . B134 ) ] } & (for R26 being (Element of ( NAT )) holds (for R1 being set holds ((R1 = ( C134 . B134 ) & P6[ R26 , R1 ]) implies ( C134 . ( B134 ^ <* R26 *> ) ) = ( F25() . (R1 , R26) ))))))))) by L1375;
L1477: D155 <= ( D155 + 1 ) by NAT_1:11;
L1478: C133 c= C134 by L1477 , L1382 , L1475 , L1476;
reconsider D156 = C131 as (Element of ( dom C133 )) by L1471 , L1474 , L1475 , FUNCT_1:1;
L1479: ( len D156 ) <= D155 by L1475;
L1480: ( C134 . C131 ) = ( D152 . C131 ) by L1471 , L1474 , L1475 , L1478 , FUNCT_1:1;
reconsider D157 = C131 as (Element of ( dom C134 )) by L1471 , L1474 , L1475 , L1478 , FUNCT_1:1;
L1481: ( len D157 ) < ( D155 + 1 ) by L1479 , NAT_1:13;
L1482: ( succ D157 ) = { ( D157 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( C134 . D157 ) ] } by L1481 , L1476;
thus L1483: { ( C131 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D152 . C131 ) ] } c= ( succ C131 )
proof
let R1 being set;
assume L1484: R1 in { ( C131 ^ <* R20 *> ) where R20 is (Element of ( NAT )) : P6[ R20 , ( D152 . C131 ) ] };
L1485: (ex R24 being (Element of ( NAT )) st (R1 = ( C131 ^ <* R24 *> ) & P6[ R24 , ( D152 . C131 ) ])) by L1484;
L1486: R1 in ( succ D157 ) by L1476 , L1480 , L1481 , L1484;
L1487: C134 in D144 by L1375 , L1476 , FUNCT_1:def 3;
L1488: R1 in ( dom D152 ) by L1487 , L1447 , L1486;
thus L1489: thesis by L1488 , L1485;
end;

let R26 being (Element of ( NAT ));
assume L1490: P6[ R26 , ( D152 . C131 ) ];
L1491: ( C131 ^ <* R26 *> ) in ( succ D157 ) by L1490 , L1480 , L1482;
L1492: C134 in D144 by L1375 , L1476 , FUNCT_1:def 3;
L1493: ( C134 . ( C131 ^ <* R26 *> ) ) = ( D152 . ( C131 ^ <* R26 *> ) ) by L1492 , L1447 , L1491;
thus L1494: thesis by L1493 , L1476 , L1480 , L1481 , L1490;
end;
theorem
L1495: (for B135 , B136 being Tree holds ((for B137 being (Element of ( NAT )) holds ( B135 -level B137 ) = ( B136 -level B137 )) implies B135 = B136))
proof
let C135 , C136 being Tree;
assume that
L1496: (for B138 being (Element of ( NAT )) holds ( C135 -level B138 ) = ( C136 -level B138 ));
L1497: (for B139 being (FinSequence of ( NAT )) holds (B139 in C135 iff B139 in C136))
proof
let C137 being (FinSequence of ( NAT ));
L1498: C135 = ( union { ( C135 -level B140 ) where B140 is (Element of ( NAT )) : (not contradiction) } ) by L195;
thus L1499:now
assume L1500: C137 in C135;
consider C138 being set such that L1501: C137 in C138 and L1502: C138 in { ( C135 -level B141 ) where B141 is (Element of ( NAT )) : (not contradiction) } by L1500 , L1498 , TARSKI:def 4;
consider C139 being (Element of ( NAT )) such that L1503: C138 = ( C135 -level C139 ) by L1502;
L1504: C138 = ( C136 -level C139 ) by L1496 , L1503;
thus L1505: C137 in C136 by L1504 , L1501;
end;
assume L1506: C137 in C136;
L1507: C136 = ( union { ( C136 -level B142 ) where B142 is (Element of ( NAT )) : (not contradiction) } ) by L195;
consider C140 being set such that L1508: C137 in C140 and L1509: C140 in { ( C136 -level B143 ) where B143 is (Element of ( NAT )) : (not contradiction) } by L1507 , L1506 , TARSKI:def 4;
consider C141 being (Element of ( NAT )) such that L1510: C140 = ( C136 -level C141 ) by L1509;
L1511: C140 = ( C135 -level C141 ) by L1496 , L1510;
thus L1512: thesis by L1511 , L1508;
end;
thus L1513: thesis by L1497 , L61;
end;
theorem
L1514: (for B144 being (Element of ( NAT )) holds ( ( TrivialInfiniteTree ) -level B144 ) = { ( B144 |-> ( 0 ) ) })
proof
set D158 = ( TrivialInfiniteTree );
let C142 being (Element of ( NAT ));
set D159 = { B145 where B145 is (Element of D158) : ( len B145 ) = C142 };
set D160 = ( C142 |-> ( 0 ) );
L1515: { D160 } = D159
proof
thus L1516:now
let C143 being set;
assume L1517: C143 in { D160 };
L1518: C143 = D160 by L1517 , TARSKI:def 1;
L1519: (D160 in D158 & ( len D160 ) = C142) by CARD_1:def 7;
thus L1520: C143 in D159 by L1519 , L1518;
end;
let C144 being set;
assume L1521: C144 in D159;
consider C145 being (Element of D158) such that L1522: (C144 = C145 & ( len C145 ) = C142) by L1521;
L1523: C145 in D158;
L1524: (ex B146 being (Element of ( NAT )) st C145 = ( B146 |-> ( 0 ) )) by L1523;
L1525: C144 = D160 by L1524 , L1522 , CARD_1:def 7;
thus L1526: thesis by L1525 , TARSKI:def 1;
end;
thus L1527: thesis by L1515;
end;
theorem
L1528: (for B147 , B148 being set holds (for B149 being  c=-linear (Subset of ( PFuncs (B147 , B148) )) holds ( union B149 ) in ( PFuncs (B147 , B148) )))
proof
let C146 , C147 being set;
let C148 being  c=-linear (Subset of ( PFuncs (C146 , C147) ));
L1529: (for B150 being set holds (B150 in C148 implies B150 is Function));
reconsider D161 = ( union C148 ) as Function by L1529 , L788;
per cases ;
suppose L1530: C148 <> ( {} );

reconsider D162 = C148 as non  empty  functional set by L1530;
L1531:
now
let C149 being set;
assume L1532: C149 in { ( dom B151 ) where B151 is (Element of D162) : (not contradiction) };
consider C150 being (Element of D162) such that L1533: C149 = ( dom C150 ) by L1532;
L1534: C150 in ( PFuncs (C146 , C147) ) by TARSKI:def 3;
L1535: (ex B152 being Function st (C150 = B152 & ( dom B152 ) c= C146 & ( rng B152 ) c= C147)) by L1534 , PARTFUN1:def 3;
thus L1536: C149 c= C146 by L1535 , L1533;
end;
L1537:
now
let C151 being set;
assume L1538: C151 in { ( rng B153 ) where B153 is (Element of D162) : (not contradiction) };
consider C152 being (Element of D162) such that L1539: C151 = ( rng C152 ) by L1538;
L1540: C152 in ( PFuncs (C146 , C147) ) by TARSKI:def 3;
L1541: (ex B154 being Function st (C152 = B154 & ( dom B154 ) c= C146 & ( rng B154 ) c= C147)) by L1540 , PARTFUN1:def 3;
thus L1542: C151 c= C147 by L1541 , L1539;
end;
L1543: ( rng D161 ) = ( union { ( rng B155 ) where B155 is (Element of D162) : (not contradiction) } ) by FUNCT_1:110;
L1544: ( rng D161 ) c= C147 by L1543 , L1537 , ZFMISC_1:76;
L1545: ( dom D161 ) = ( union { ( dom B156 ) where B156 is (Element of D162) : (not contradiction) } ) by FUNCT_1:110;
L1546: ( dom D161 ) c= C146 by L1545 , L1531 , ZFMISC_1:76;
thus L1547: thesis by L1546 , L1544 , PARTFUN1:def 3;
end;
suppose L1548: C148 = ( {} );

L1549: ( {} ) is (PartFunc of C146 , C147) by RELSET_1:12;
thus L1550: thesis by L1549 , L1548 , PARTFUN1:45 , ZFMISC_1:2;
end;
end;
