:: Equivalence Relations and Classes of Abstraction
::  by Konrad Raczkowski and Pawe{\l} Sadowski
::
:: Received November 16, 1989
:: Copyright (c) 1990-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, RELAT_1, ZFMISC_1, SETFAM_1, TARSKI, PARTFUN1,
      RELAT_2, XBOOLE_0, FINSEQ_1, XXREAL_0, FUNCT_1, ARYTM_3, ORDINAL4,
      ARYTM_1, NAT_1, CARD_1, EQREL_1, MCART_1, CARD_3;
 notations TARSKI, XBOOLE_0, ZFMISC_1, XTUPLE_0, MCART_1, DOMAIN_1, SUBSET_1,
      XCMPLX_0, XXREAL_0, RELAT_1, RELAT_2, SETFAM_1, FINSEQ_1, FUNCT_1,
      NUMBERS, ORDINAL1, NAT_1, FUNCT_3, RELSET_1, PARTFUN1, FUNCT_2, BINOP_1;
 constructors SETFAM_1, RELAT_2, PARTFUN1, XXREAL_0, XREAL_0, NAT_1, FINSEQ_1,
      RELSET_1, FUNCT_3, BINOP_1, DOMAIN_1, XTUPLE_0;
 registrations XBOOLE_0, SUBSET_1, PARTFUN1, XXREAL_0, XREAL_0, FINSEQ_1,
      RELAT_1, ORDINAL1, RELSET_1, FUNCT_2, FUNCT_3, ZFMISC_1, FUNCT_1,
      RELAT_2, XTUPLE_0;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, RELAT_1, RELAT_2, XBOOLE_0, PARTFUN1, SETFAM_1, SUBSET_1,
      BINOP_1, XTUPLE_0;
 theorems RELAT_1, RELAT_2, RELSET_1, SETFAM_1, ZFMISC_1, TARSKI, FINSEQ_1,
      NAT_1, XBOOLE_0, XBOOLE_1, ORDERS_1, PARTFUN1, XREAL_1, XXREAL_0,
      FUNCT_1, FUNCT_3, FUNCT_2, MCART_1, SUBSET_1, SETWISEO, XTUPLE_0;
 schemes SUBSET_1, RELSET_1, FINSEQ_1, NAT_1, FUNCT_2;

begin
definition
let R1 being set;
func nabla R1 -> (Relation of R1) equals 
[: R1 , R1 :];
coherence
proof
L1: [: R1 , R1 :] c= [: R1 , R1 :];
thus L2: thesis by L1;
end;
end;
registration
let R1 being set;
cluster ( nabla R1 ) ->  total  reflexive;
coherence
proof
thus L4: ( dom ( nabla R1 ) ) c= R1;
thus L5: R1 c= ( dom ( nabla R1 ) )
proof
let C1 being set;
assume L6: C1 in R1;
L7: [ C1 , C1 ] in [: R1 , R1 :] by L6 , ZFMISC_1:87;
thus L8: thesis by L7 , XTUPLE_0:def 12;
end;

let R4 being set;
assume L9: R4 in ( field ( nabla R1 ) );
L10: R4 in ( ( dom ( nabla R1 ) ) \/ ( rng ( nabla R1 ) ) ) by L9;
thus L11: thesis by L10 , ZFMISC_1:87;
end;
end;
definition
let R1 being set;
let R13 being (Relation of R1);
let R14 being (Relation of R1);
redefine func R13 /\ R14 -> (Relation of R1);

coherence
proof
L13: ( R13 /\ R14 ) c= [: R1 , R1 :];
thus L14: thesis by L13;
end;
redefine func R13 \/ R14 -> (Relation of R1);

coherence
proof
L15: ( R13 \/ R14 ) c= [: R1 , R1 :];
thus L16: thesis by L15;
end;
end;
theorem
L18: (for R1 being set holds (for R13 being (Relation of R1) holds ( ( nabla R1 ) \/ R13 ) = ( nabla R1 ))) by XBOOLE_1:12;
theorem
L19: (for R1 being set holds (( id R1 ) is_reflexive_in R1 & ( id R1 ) is_symmetric_in R1 & ( id R1 ) is_transitive_in R1))
proof
let R1 being set;
thus L20: (for R4 being set holds (R4 in R1 implies [ R4 , R4 ] in ( id R1 ))) by RELAT_1:def 10;
thus L21: (for R4 being set holds (for R5 being set holds ((R4 in R1 & R5 in R1 & [ R4 , R5 ] in ( id R1 )) implies [ R5 , R4 ] in ( id R1 )))) by RELAT_1:def 10;
thus L22: (for R4 being set holds (for R5 being set holds (for R6 being set holds ((R4 in R1 & R5 in R1 & R6 in R1 & [ R4 , R5 ] in ( id R1 ) & [ R5 , R6 ] in ( id R1 )) implies [ R4 , R6 ] in ( id R1 ))))) by RELAT_1:def 10;
end;
definition
let R1 being set;
mode Tolerance of R1
 is  total  reflexive  symmetric (Relation of R1);
mode Equivalence_Relation of R1
 is  total  symmetric  transitive (Relation of R1);
end;
theorem
L24: (for R1 being set holds ( id R1 ) is (Equivalence_Relation of R1));
theorem
L25: (for R1 being set holds ( nabla R1 ) is (Equivalence_Relation of R1))
proof
let R1 being set;
L26: (for R4 being set holds (for R5 being set holds ((R4 in R1 & R5 in R1 & [ R4 , R5 ] in ( nabla R1 )) implies [ R5 , R4 ] in ( nabla R1 )))) by ZFMISC_1:88;
L27: ( nabla R1 ) is_symmetric_in R1 by L26 , RELAT_2:def 3;
L28: (for R4 being set holds (for R5 being set holds (for R6 being set holds ((R4 in R1 & R5 in R1 & R6 in R1 & [ R4 , R5 ] in ( nabla R1 ) & [ R5 , R6 ] in ( nabla R1 )) implies [ R4 , R6 ] in ( nabla R1 ))))) by ZFMISC_1:87;
L29: ( nabla R1 ) is_transitive_in R1 by L28 , RELAT_2:def 8;
L30: ( field ( nabla R1 ) ) = R1 by ORDERS_1:12;
thus L31: thesis by L30 , L27 , L29 , RELAT_2:def 11 , RELAT_2:def 16;
end;
registration
let R1 being set;
cluster ( nabla R1 ) ->  total  symmetric  transitive;
coherence by L25;
end;
L33: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R12 being (Relation of R1) holds ([ R4 , R5 ] in R12 implies (R4 in R1 & R5 in R1))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R12 being (Relation of R1);
assume L34: [ R4 , R5 ] in R12;
L35: (R4 in ( dom R12 ) & R5 in ( rng R12 )) by L34 , XTUPLE_0:def 12 , XTUPLE_0:def 13;
thus L36: thesis by L35;
end;
theorem
L37: (for R1 being set holds (for R4 being set holds (for B1 being  total  reflexive (Relation of R1) holds (R4 in R1 implies [ R4 , R4 ] in B1))))
proof
let R1 being set;
let R4 being set;
let C2 being  total  reflexive (Relation of R1);
L38: ( field C2 ) = R1 by ORDERS_1:12;
L39: C2 is_reflexive_in R1 by L38 , RELAT_2:def 9;
thus L40: thesis by L39 , RELAT_2:def 1;
end;
theorem
L41: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for B2 being  total  symmetric (Relation of R1) holds ([ R4 , R5 ] in B2 implies [ R5 , R4 ] in B2)))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let C3 being  total  symmetric (Relation of R1);
L42: ( field C3 ) = R1 by ORDERS_1:12;
L43: C3 is_symmetric_in R1 by L42 , RELAT_2:def 11;
assume L44: [ R4 , R5 ] in C3;
L45: (R4 in R1 & R5 in R1) by L44 , L33;
thus L46: thesis by L45 , L44 , L43 , RELAT_2:def 3;
end;
theorem
L47: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R6 being set holds (for B3 being  total  transitive (Relation of R1) holds (([ R4 , R5 ] in B3 & [ R5 , R6 ] in B3) implies [ R4 , R6 ] in B3))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R6 being set;
let C4 being  total  transitive (Relation of R1);
assume that
L48: [ R4 , R5 ] in C4
and
L49: [ R5 , R6 ] in C4;
L50: R6 in R1 by L49 , L33;
L51: ( field C4 ) = R1 by ORDERS_1:12;
L52: C4 is_transitive_in R1 by L51 , RELAT_2:def 16;
L53: (R4 in R1 & R5 in R1) by L48 , L33;
thus L54: thesis by L53 , L48 , L49 , L50 , L52 , RELAT_2:def 8;
end;
theorem
L55: (for R1 being set holds (for B4 being  total  reflexive (Relation of R1) holds ((ex B5 being set st B5 in R1) implies B4 <> ( {} ))));
theorem
L56: (for R1 being set holds (for R12 being (Relation of R1) holds (R12 is (Equivalence_Relation of R1) iff (R12 is  reflexive  symmetric  transitive & ( field R12 ) = R1))))
proof
let R1 being set;
let R12 being (Relation of R1);
thus L57: (R12 is (Equivalence_Relation of R1) implies (R12 is  reflexive  symmetric  transitive & ( field R12 ) = R1)) by ORDERS_1:12;
assume that
L58: R12 is  reflexive
and
L59: (R12 is  symmetric & R12 is  transitive)
and
L60: ( field R12 ) = R1;
L61: R12 is_reflexive_in R1 by L58 , L60 , RELAT_2:def 9;
L62: ( dom R12 ) = R1 by L61 , ORDERS_1:13;
thus L63: thesis by L62 , L59 , PARTFUN1:def 2;
end;
definition
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
redefine func R18 /\ R19 -> (Equivalence_Relation of R1);

coherence
proof
L64: (for R4 being set holds (R4 in R1 implies [ R4 , R4 ] in R19)) by L37;
L65: ( id R1 ) c= R19 by L64 , RELAT_1:47;
L66: (for R4 being set holds (R4 in R1 implies [ R4 , R4 ] in R18)) by L37;
L67: ( id R1 ) c= R18 by L66 , RELAT_1:47;
L68: ( id R1 ) c= ( R18 /\ R19 ) by L67 , L65 , XBOOLE_1:19;
L69: (( dom ( R18 /\ R19 ) ) = R1 & ( rng ( R18 /\ R19 ) ) = R1) by L68 , RELSET_1:16 , RELSET_1:17;
L70: ( field ( R18 /\ R19 ) ) = R1 by L69;
thus L71: thesis by L70 , L56;
end;
end;
theorem
L73: (for R1 being set holds (for R17 being (Equivalence_Relation of R1) holds ( ( id R1 ) /\ R17 ) = ( id R1 )))
proof
let R1 being set;
let R17 being (Equivalence_Relation of R1);
L74:
now
let R4 being set;
let R5 being set;
assume L75: [ R4 , R5 ] in ( id R1 );
L76: (R4 in R1 & R4 = R5) by L75 , RELAT_1:def 10;
thus L77: [ R4 , R5 ] in R17 by L76 , L37;
end;
L78: ( id R1 ) c= R17 by L74 , RELAT_1:def 3;
thus L79: thesis by L78 , XBOOLE_1:28;
end;
theorem
L80: (for R1 being set holds (for R16 being (Subset-Family of [: R1 , R1 :]) holds ((R16 <> ( {} ) & (for R2 being set holds (R2 in R16 implies R2 is (Equivalence_Relation of R1)))) implies ( meet R16 ) is (Equivalence_Relation of R1))))
proof
let R1 being set;
let R16 being (Subset-Family of [: R1 , R1 :]);
assume that
L81: R16 <> ( {} )
and
L82: (for R2 being set holds (R2 in R16 implies R2 is (Equivalence_Relation of R1)));
reconsider D1 = ( meet R16 ) as (Relation of R1);
L83: D1 is_symmetric_in R1
proof
let R4 being set;
let R5 being set;
assume that
L84: R4 in R1
and
L85: R5 in R1
and
L86: [ R4 , R5 ] in D1;
L87:
now
let R2 being set;
assume L88: R2 in R16;
L89: (R2 is (Equivalence_Relation of R1) & [ R4 , R5 ] in R2) by L88 , L82 , L86 , SETFAM_1:def 1;
thus L90: [ R5 , R4 ] in R2 by L89 , L41;
end;
thus L91: thesis by L87 , L81 , SETFAM_1:def 1;
end;
L92: D1 is_transitive_in R1
proof
let R4 being set;
let R5 being set;
let R6 being set;
assume that
L93: R4 in R1
and
L94: R5 in R1
and
L95: R6 in R1
and
L96: [ R4 , R5 ] in D1
and
L97: [ R5 , R6 ] in D1;
L98:
now
let R2 being set;
assume L99: R2 in R16;
L100: [ R5 , R6 ] in R2 by L99 , L97 , SETFAM_1:def 1;
L101: (R2 is (Equivalence_Relation of R1) & [ R4 , R5 ] in R2) by L82 , L96 , L99 , SETFAM_1:def 1;
thus L102: [ R4 , R6 ] in R2 by L101 , L100 , L47;
end;
thus L103: thesis by L98 , L81 , SETFAM_1:def 1;
end;
L104: D1 is_reflexive_in R1
proof
let R4 being set;
assume that
L105: R4 in R1;
L106: (for R2 being set holds (R2 in R16 implies [ R4 , R4 ] in R2))
proof
let R2 being set;
assume L107: R2 in R16;
L108: R2 is (Equivalence_Relation of R1) by L107 , L82;
thus L109: thesis by L108 , L105 , L37;
end;
thus L110: thesis by L106 , L81 , SETFAM_1:def 1;
end;
L111: (( field D1 ) = R1 & ( dom D1 ) = R1) by L104 , ORDERS_1:13;
thus L112: thesis by L111 , L83 , L92 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
end;
theorem
L113: (for R1 being set holds (for R12 being (Relation of R1) holds (ex R17 being (Equivalence_Relation of R1) st (R12 c= R17 & (for R19 being (Equivalence_Relation of R1) holds (R12 c= R19 implies R17 c= R19))))))
proof
let R1 being set;
let R12 being (Relation of R1);
defpred S1[ set ] means ($1 is (Equivalence_Relation of R1) & R12 c= $1);
consider C5 being (Subset-Family of [: R1 , R1 :]) such that L114: (for R15 being (Subset of [: R1 , R1 :]) holds (R15 in C5 iff S1[ R15 ])) from SUBSET_1:sch 3;
L115: R12 c= ( nabla R1 );
L116: C5 <> ( {} ) by L115 , L114;
L117: (for R2 being set holds (R2 in C5 implies R2 is (Equivalence_Relation of R1))) by L114;
reconsider D2 = ( meet C5 ) as (Equivalence_Relation of R1) by L117 , L116 , L80;
L118:
now
let R19 being (Equivalence_Relation of R1);
assume L119: R12 c= R19;
L120: R19 in C5 by L119 , L114;
thus L121: D2 c= R19 by L120 , SETFAM_1:3;
end;
take D2;
L122: (for R2 being set holds (R2 in C5 implies R12 c= R2)) by L114;
thus L123: thesis by L122 , L116 , L118 , SETFAM_1:5;
end;
definition
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
func R18 "\/" R19 -> (Equivalence_Relation of R1) means 
:L124: (( R18 \/ R19 ) c= it & (for R17 being (Equivalence_Relation of R1) holds (( R18 \/ R19 ) c= R17 implies it c= R17)));
existence by L113;
uniqueness
proof
let C6 , C7 being (Equivalence_Relation of R1);
assume L125: (( R18 \/ R19 ) c= C6 & (for R17 being (Equivalence_Relation of R1) holds (( R18 \/ R19 ) c= R17 implies C6 c= R17)) & ( R18 \/ R19 ) c= C7 & (for R17 being (Equivalence_Relation of R1) holds (( R18 \/ R19 ) c= R17 implies C7 c= R17)));
L126: (C6 c= C7 & C7 c= C6) by L125;
thus L127: thesis by L126 , XBOOLE_0:def 10;
end;
commutativity
;
idempotence
;
end;
theorem
L129: (for R1 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds (for R20 being (Equivalence_Relation of R1) holds ( ( R18 "\/" R19 ) "\/" R20 ) = ( R18 "\/" ( R19 "\/" R20 ) )))))
proof
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
let R20 being (Equivalence_Relation of R1);
L130: (for B6 being (Equivalence_Relation of R1) holds (B6 = ( R18 "\/" ( R19 "\/" R20 ) ) implies ( ( R18 "\/" R19 ) "\/" R20 ) c= B6))
proof
let C8 being (Equivalence_Relation of R1);
L131: ( R19 \/ R20 ) c= ( R19 "\/" R20 ) by L124;
assume L132: C8 = ( R18 "\/" ( R19 "\/" R20 ) );
L133: ( R18 \/ ( R19 "\/" R20 ) ) c= C8 by L132 , L124;
L134: ( R19 "\/" R20 ) c= ( R18 \/ ( R19 "\/" R20 ) ) by XBOOLE_1:7;
L135: ( R19 "\/" R20 ) c= C8 by L134 , L133 , XBOOLE_1:1;
L136: ( R19 \/ R20 ) c= C8 by L135 , L131 , XBOOLE_1:1;
L137: R19 c= ( R19 \/ R20 ) by XBOOLE_1:7;
L138: R19 c= C8 by L137 , L136 , XBOOLE_1:1;
L139: R18 c= ( R18 \/ ( R19 "\/" R20 ) ) by XBOOLE_1:7;
L140: R18 c= C8 by L139 , L133 , XBOOLE_1:1;
L141: ( R18 \/ R19 ) c= C8 by L140 , L138 , XBOOLE_1:8;
L142: ( R18 "\/" R19 ) c= C8 by L141 , L124;
L143: R20 c= ( R19 \/ R20 ) by XBOOLE_1:7;
L144: R20 c= C8 by L143 , L136 , XBOOLE_1:1;
L145: ( ( R18 "\/" R19 ) \/ R20 ) c= C8 by L144 , L142 , XBOOLE_1:8;
thus L146: thesis by L145 , L124;
end;
L147: ( ( R18 "\/" R19 ) "\/" R20 ) c= ( R18 "\/" ( R19 "\/" R20 ) ) by L130;
L148: (for B7 being (Equivalence_Relation of R1) holds (B7 = ( ( R18 "\/" R19 ) "\/" R20 ) implies ( R18 "\/" ( R19 "\/" R20 ) ) c= B7))
proof
let C9 being (Equivalence_Relation of R1);
L149: ( R18 \/ R19 ) c= ( R18 "\/" R19 ) by L124;
assume L150: C9 = ( ( R18 "\/" R19 ) "\/" R20 );
L151: ( ( R18 "\/" R19 ) \/ R20 ) c= C9 by L150 , L124;
L152: ( R18 "\/" R19 ) c= ( ( R18 "\/" R19 ) \/ R20 ) by XBOOLE_1:7;
L153: ( R18 "\/" R19 ) c= C9 by L152 , L151 , XBOOLE_1:1;
L154: ( R18 \/ R19 ) c= C9 by L153 , L149 , XBOOLE_1:1;
L155: R20 c= ( ( R18 "\/" R19 ) \/ R20 ) by XBOOLE_1:7;
L156: R20 c= C9 by L155 , L151 , XBOOLE_1:1;
L157: R19 c= ( R18 \/ R19 ) by XBOOLE_1:7;
L158: R19 c= C9 by L157 , L154 , XBOOLE_1:1;
L159: ( R19 \/ R20 ) c= C9 by L158 , L156 , XBOOLE_1:8;
L160: ( R19 "\/" R20 ) c= C9 by L159 , L124;
L161: R18 c= ( R18 \/ R19 ) by XBOOLE_1:7;
L162: R18 c= C9 by L161 , L154 , XBOOLE_1:1;
L163: ( R18 \/ ( R19 "\/" R20 ) ) c= C9 by L162 , L160 , XBOOLE_1:8;
thus L164: thesis by L163 , L124;
end;
L165: ( R18 "\/" ( R19 "\/" R20 ) ) c= ( ( R18 "\/" R19 ) "\/" R20 ) by L148;
thus L166: thesis by L165 , L147 , XBOOLE_0:def 10;
end;
theorem
L167: (for R1 being set holds (for R17 being (Equivalence_Relation of R1) holds ( R17 "\/" R17 ) = R17));
theorem
L168: (for R1 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds ( R18 "\/" R19 ) = ( R19 "\/" R18 ))));
theorem
L169: (for R1 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds ( R18 /\ ( R18 "\/" R19 ) ) = R18)))
proof
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
thus L170: ( R18 /\ ( R18 "\/" R19 ) ) c= R18 by XBOOLE_1:17;
L171: (R18 c= ( R18 \/ R19 ) & ( R18 \/ R19 ) c= ( R18 "\/" R19 )) by L124 , XBOOLE_1:7;
L172: R18 c= ( R18 "\/" R19 ) by L171 , XBOOLE_1:1;
thus L173: thesis by L172 , XBOOLE_1:19;
end;
theorem
L174: (for R1 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds ( R18 "\/" ( R18 /\ R19 ) ) = R18)))
proof
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
L175: (R18 = ( R18 \/ ( R18 /\ R19 ) ) & (for R17 being (Equivalence_Relation of R1) holds (( R18 \/ ( R18 /\ R19 ) ) c= R17 implies R18 c= R17))) by XBOOLE_1:22;
thus L176: thesis by L175 , L124;
end;
scheme ExEqRel { F1() -> set , P1[set , set] } : (ex B8 being (Equivalence_Relation of F1()) st (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in B8 iff (R4 in F1() & R5 in F1() & P1[ R4 , R5 ])))))
provided
L177: (for R4 being set holds (R4 in F1() implies P1[ R4 , R4 ]))
and
L178: (for R4 being set holds (for R5 being set holds (P1[ R4 , R5 ] implies P1[ R5 , R4 ])))
and
L179: (for R4 being set holds (for R5 being set holds (for R6 being set holds ((P1[ R4 , R5 ] & P1[ R5 , R6 ]) implies P1[ R4 , R6 ]))))
proof
consider C10 being (Relation of F1() , F1()) such that L180: (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in C10 iff (R4 in F1() & R5 in F1() & P1[ R4 , R5 ])))) from RELSET_1:sch 1;
L181: C10 is_transitive_in F1()
proof
let R4 being set;
let R5 being set;
let R6 being set;
assume that
L182: R4 in F1()
and
L183: R5 in F1()
and
L184: R6 in F1()
and
L185: ([ R4 , R5 ] in C10 & [ R5 , R6 ] in C10);
L186: (P1[ R4 , R5 ] & P1[ R5 , R6 ]) by L180 , L185;
L187: P1[ R4 , R6 ] by L186 , L179;
thus L188: thesis by L187 , L180 , L182 , L184;
end;
L189: C10 is_symmetric_in F1()
proof
let R4 being set;
let R5 being set;
assume that
L190: (R4 in F1() & R5 in F1())
and
L191: [ R4 , R5 ] in C10;
L192: P1[ R4 , R5 ] by L180 , L191;
L193: P1[ R5 , R4 ] by L192 , L178;
thus L194: thesis by L193 , L180 , L190;
end;
L195: C10 is_reflexive_in F1()
proof
let R4 being set;
assume L196: R4 in F1();
L197: P1[ R4 , R4 ] by L196 , L177;
thus L198: thesis by L197 , L180 , L196;
end;
L199: (( field C10 ) = F1() & ( dom C10 ) = F1()) by L195 , ORDERS_1:13;
reconsider D3 = C10 as (Equivalence_Relation of F1()) by L199 , L189 , L181 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
take D3;
thus L200: thesis by L180;
end;
notation
let C11 being Relation;
let C12 being set;
synonym Class (C11 , C12) for Im (C11 , C12);
end;
definition
let C13 , C14 being set;
let C15 being (Relation of C13 , C14);
let C16 being set;
redefine func Class (C15 , C16) -> (Subset of C14);

coherence
proof
L202: ( C15 .: { C16 } ) c= C14;
thus L203: thesis by L202;
end;
end;
theorem
L205: (for R4 being set holds (for R5 being set holds (for B9 being Relation holds (R5 in ( Class (B9 , R4) ) iff [ R4 , R5 ] in B9))))
proof
let R4 being set;
let R5 being set;
let C17 being Relation;
thus L206: (R5 in ( Class (C17 , R4) ) implies [ R4 , R5 ] in C17)
proof
assume L207: R5 in ( Class (C17 , R4) );
L208: (ex B10 being set st ([ B10 , R5 ] in C17 & B10 in { R4 })) by L207 , RELAT_1:def 13;
thus L209: thesis by L208 , TARSKI:def 1;
end;

L210: R4 in { R4 } by TARSKI:def 1;
assume L211: [ R4 , R5 ] in C17;
thus L212: thesis by L211 , L210 , RELAT_1:def 13;
end;
theorem
L213: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for B11 being  total  symmetric (Relation of R1) holds (R5 in ( Class (B11 , R4) ) iff [ R5 , R4 ] in B11)))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let C18 being  total  symmetric (Relation of R1);
thus L214: (R5 in ( Class (C18 , R4) ) implies [ R5 , R4 ] in C18)
proof
assume L215: R5 in ( Class (C18 , R4) );
L216: (ex B12 being set st ([ B12 , R5 ] in C18 & B12 in { R4 })) by L215 , RELAT_1:def 13;
L217: [ R4 , R5 ] in C18 by L216 , TARSKI:def 1;
thus L218: thesis by L217 , L41;
end;

assume L219: [ R5 , R4 ] in C18;
L220: [ R4 , R5 ] in C18 by L219 , L41;
L221: R4 in { R4 } by TARSKI:def 1;
thus L222: thesis by L221 , L220 , RELAT_1:def 13;
end;
theorem
L223: (for R1 being set holds (for B13 being (Tolerance of R1) holds (for R4 being set holds (R4 in R1 implies R4 in ( Class (B13 , R4) )))))
proof
let R1 being set;
let C19 being (Tolerance of R1);
let R4 being set;
assume L224: R4 in R1;
L225: [ R4 , R4 ] in C19 by L224 , L37;
thus L226: thesis by L225 , L213;
end;
theorem
L227: (for R1 being set holds (for B14 being (Tolerance of R1) holds (for R4 being set holds (R4 in R1 implies (ex R5 being set st R4 in ( Class (B14 , R5) ))))))
proof
let R1 being set;
let C20 being (Tolerance of R1);
let R4 being set;
assume L228: R4 in R1;
L229: R4 in ( Class (C20 , R4) ) by L228 , L223;
thus L230: thesis by L229;
end;
theorem
L231: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R6 being set holds (for B15 being  transitive (Tolerance of R1) holds ((R5 in ( Class (B15 , R4) ) & R6 in ( Class (B15 , R4) )) implies [ R5 , R6 ] in B15))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R6 being set;
let C21 being  transitive (Tolerance of R1);
assume that
L232: R5 in ( Class (C21 , R4) )
and
L233: R6 in ( Class (C21 , R4) );
L234: [ R6 , R4 ] in C21 by L233 , L213;
L235: [ R4 , R6 ] in C21 by L234 , L41;
L236: [ R5 , R4 ] in C21 by L232 , L213;
thus L237: thesis by L236 , L235 , L47;
end;
L238: (for R1 being set holds (for R5 being set holds (for R17 being (Equivalence_Relation of R1) holds (for R4 being set holds (R4 in R1 implies ([ R4 , R5 ] in R17 iff ( Class (R17 , R4) ) = ( Class (R17 , R5) )))))))
proof
let R1 being set;
let R5 being set;
let R17 being (Equivalence_Relation of R1);
let R4 being set;
assume that
L239: R4 in R1;
thus L240: ([ R4 , R5 ] in R17 implies ( Class (R17 , R4) ) = ( Class (R17 , R5) ))
proof
assume L241: [ R4 , R5 ] in R17;
L242:
now
let R6 being set;
assume L243: R6 in ( Class (R17 , R5) );
L244: [ R6 , R5 ] in R17 by L243 , L213;
L245: [ R5 , R4 ] in R17 by L241 , L41;
L246: [ R6 , R4 ] in R17 by L245 , L244 , L47;
thus L247: R6 in ( Class (R17 , R4) ) by L246 , L213;
end;
L248: ( Class (R17 , R5) ) c= ( Class (R17 , R4) ) by L242 , TARSKI:def 3;
L249:
now
let R6 being set;
assume L250: R6 in ( Class (R17 , R4) );
L251: [ R6 , R4 ] in R17 by L250 , L213;
L252: [ R6 , R5 ] in R17 by L251 , L241 , L47;
thus L253: R6 in ( Class (R17 , R5) ) by L252 , L213;
end;
L254: ( Class (R17 , R4) ) c= ( Class (R17 , R5) ) by L249 , TARSKI:def 3;
thus L255: thesis by L254 , L248 , XBOOLE_0:def 10;
end;

assume L256: ( Class (R17 , R4) ) = ( Class (R17 , R5) );
L257: R4 in ( Class (R17 , R5) ) by L256 , L239 , L223;
thus L258: thesis by L257 , L213;
end;
theorem
L259: (for R1 being set holds (for R5 being set holds (for R17 being (Equivalence_Relation of R1) holds (for R4 being set holds (R4 in R1 implies (R5 in ( Class (R17 , R4) ) iff ( Class (R17 , R4) ) = ( Class (R17 , R5) )))))))
proof
let R1 being set;
let R5 being set;
let R17 being (Equivalence_Relation of R1);
let R4 being set;
assume that
L260: R4 in R1;
thus L261: (R5 in ( Class (R17 , R4) ) implies ( Class (R17 , R4) ) = ( Class (R17 , R5) ))
proof
assume L262: R5 in ( Class (R17 , R4) );
L263: [ R5 , R4 ] in R17 by L262 , L213;
L264: [ R4 , R5 ] in R17 by L263 , L41;
thus L265: thesis by L264 , L260 , L238;
end;

assume L266: ( Class (R17 , R4) ) = ( Class (R17 , R5) );
L267: [ R4 , R5 ] in R17 by L266 , L260 , L238;
L268: [ R5 , R4 ] in R17 by L267 , L41;
thus L269: thesis by L268 , L213;
end;
theorem
L270: (for R1 being set holds (for R17 being (Equivalence_Relation of R1) holds (for R4 being set holds (for R5 being set holds (R5 in R1 implies (( Class (R17 , R4) ) = ( Class (R17 , R5) ) or ( Class (R17 , R4) ) misses ( Class (R17 , R5) )))))))
proof
let R1 being set;
let R17 being (Equivalence_Relation of R1);
let R4 being set;
let R5 being set;
L271: ((not [ R4 , R5 ] in R17) implies ( Class (R17 , R4) ) misses ( Class (R17 , R5) ))
proof
assume L272: (not [ R4 , R5 ] in R17);
assume L273: ( Class (R17 , R4) ) meets ( Class (R17 , R5) );
consider R6 being set such that L274: R6 in ( Class (R17 , R4) ) and L275: R6 in ( Class (R17 , R5) ) by L273 , XBOOLE_0:3;
L276: [ R6 , R4 ] in R17 by L274 , L213;
L277: [ R4 , R6 ] in R17 by L276 , L41;
L278: [ R6 , R5 ] in R17 by L275 , L213;
thus L279: contradiction by L278 , L272 , L277 , L47;
end;
assume L280: R5 in R1;
L281: ([ R4 , R5 ] in R17 implies ( Class (R17 , R4) ) = ( Class (R17 , R5) ))
proof
assume L282: [ R4 , R5 ] in R17;
L283: R4 in ( Class (R17 , R5) ) by L282 , L213;
thus L284: thesis by L283 , L280 , L259;
end;
thus L285: thesis by L281 , L271;
end;
theorem
L286: (for R1 being set holds (for R4 being set holds (R4 in R1 implies ( Class (( id R1 ) , R4) ) = { R4 })))
proof
let R1 being set;
let R4 being set;
L287:
now
let R5 being set;
assume L288: R5 in ( Class (( id R1 ) , R4) );
L289: [ R5 , R4 ] in ( id R1 ) by L288 , L213;
thus L290: R5 = R4 by L289 , RELAT_1:def 10;
end;
assume L291: R4 in R1;
L292: (for R5 being set holds (R5 in ( Class (( id R1 ) , R4) ) iff R5 = R4)) by L291 , L287 , L223;
thus L293: thesis by L292 , TARSKI:def 1;
end;
theorem
L294: (for R1 being set holds (for R4 being set holds (R4 in R1 implies ( Class (( nabla R1 ) , R4) ) = R1)))
proof
let R1 being set;
let R4 being set;
assume that
L295: R4 in R1;
L296:
now
let R5 being set;
assume L297: R5 in R1;
L298: [ R5 , R4 ] in ( nabla R1 ) by L297 , L295 , ZFMISC_1:87;
thus L299: R5 in ( Class (( nabla R1 ) , R4) ) by L298 , L213;
end;
L300: (for R5 being set holds (R5 in R1 iff R5 in ( Class (( nabla R1 ) , R4) ))) by L296;
thus L301: thesis by L300 , TARSKI:1;
end;
theorem
L302: (for R1 being set holds (for R17 being (Equivalence_Relation of R1) holds ((ex R4 being set st ( Class (R17 , R4) ) = R1) implies R17 = ( nabla R1 ))))
proof
let R1 being set;
let R17 being (Equivalence_Relation of R1);
given R4 being set such that
L303: ( Class (R17 , R4) ) = R1;

L304: [: R1 , R1 :] c= R17
proof
let R5 being set;
let R6 being set;
assume L305: [ R5 , R6 ] in [: R1 , R1 :];
L306: R6 in ( Class (R17 , R4) ) by L305 , L303 , ZFMISC_1:87;
L307: [ R6 , R4 ] in R17 by L306 , L213;
L308: [ R4 , R6 ] in R17 by L307 , L41;
L309: R5 in ( Class (R17 , R4) ) by L303 , L305 , ZFMISC_1:87;
L310: [ R5 , R4 ] in R17 by L309 , L213;
thus L311: thesis by L310 , L308 , L47;
end;
thus L312: thesis by L304 , XBOOLE_0:def 10;
end;
theorem
L313: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds (R4 in R1 implies ([ R4 , R5 ] in ( R18 "\/" R19 ) iff (ex B16 being FinSequence st (1 <= ( len B16 ) & R4 = ( B16 . 1 ) & R5 = ( B16 . ( len B16 ) ) & (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len B16 )) implies [ ( B16 . R7 ) , ( B16 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ))))))))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
assume L314: R4 in R1;
thus L315: ([ R4 , R5 ] in ( R18 "\/" R19 ) implies (ex B17 being FinSequence st (1 <= ( len B17 ) & R4 = ( B17 . 1 ) & R5 = ( B17 . ( len B17 ) ) & (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len B17 )) implies [ ( B17 . R7 ) , ( B17 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ))))))
proof
defpred S2[ set , set ] means (ex B18 being FinSequence st (1 <= ( len B18 ) & $1 = ( B18 . 1 ) & $2 = ( B18 . ( len B18 ) ) & (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len B18 )) implies [ ( B18 . R7 ) , ( B18 . ( R7 + 1 ) ) ] in ( R18 \/ R19 )))));
consider C22 being (Relation of R1 , R1) such that L316: (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in C22 iff (R4 in R1 & R5 in R1 & S2[ R4 , R5 ])))) from RELSET_1:sch 1;
L317: C22 is_transitive_in R1
proof
let R4 being set;
let R5 being set;
let R6 being set;
assume that
L318: R4 in R1
and
L319: R5 in R1
and
L320: R6 in R1
and
L321: [ R4 , R5 ] in C22
and
L322: [ R5 , R6 ] in C22;
consider C23 being FinSequence such that L323: 1 <= ( len C23 ) and L324: R5 = ( C23 . 1 ) and L325: R6 = ( C23 . ( len C23 ) ) and L326: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len C23 )) implies [ ( C23 . R7 ) , ( C23 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ))) by L316 , L322;
consider C24 being FinSequence such that L327: 1 <= ( len C24 ) and L328: R4 = ( C24 . 1 ) and L329: R5 = ( C24 . ( len C24 ) ) and L330: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len C24 )) implies [ ( C24 . R7 ) , ( C24 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ))) by L316 , L321;
set D4 = ( C24 ^ C23 );
L331: ( len D4 ) = ( ( len C24 ) + ( len C23 ) ) by FINSEQ_1:22;
L332: ( ( len C24 ) + 1 ) <= ( ( len C24 ) + ( len C23 ) ) by L323 , XREAL_1:7;
L333: ( D4 . ( len D4 ) ) = ( C23 . ( ( ( len C23 ) + ( len C24 ) ) - ( len C24 ) ) ) by L332 , L331 , FINSEQ_1:23
.= ( C23 . ( len C23 ) );
L334: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len D4 )) implies [ ( D4 . R7 ) , ( D4 . ( R7 + 1 ) ) ] in ( R18 \/ R19 )))
proof
let R7 being (Element of ( NAT ));
assume that
L335: 1 <= R7
and
L336: R7 < ( len D4 );
L337: ((1 <= R7 & R7 < ( len C24 )) or R7 = ( len C24 ) or ( len C24 ) < R7) by L335 , XXREAL_0:1;
L338:
now
per cases  by L336 , L337 , NAT_1:13;
suppose L339: (1 <= R7 & R7 < ( len C24 ));

L340: (1 <= ( R7 + 1 ) & ( R7 + 1 ) <= ( len C24 )) by L339 , NAT_1:13;
L341: ( R7 + 1 ) in ( Seg ( len C24 ) ) by L340 , FINSEQ_1:1;
L342: ( R7 + 1 ) in ( dom C24 ) by L341 , FINSEQ_1:def 3;
L343: ( D4 . ( R7 + 1 ) ) = ( C24 . ( R7 + 1 ) ) by L342 , FINSEQ_1:def 7;
L344: R7 in ( Seg ( len C24 ) ) by L339 , FINSEQ_1:1;
L345: R7 in ( dom C24 ) by L344 , FINSEQ_1:def 3;
L346: ( D4 . R7 ) = ( C24 . R7 ) by L345 , FINSEQ_1:def 7;
thus L347: thesis by L346 , L330 , L339 , L343;
end;
suppose L348: R7 = ( len C24 );

L349: ( len C24 ) in ( Seg ( len C24 ) ) by L327 , FINSEQ_1:1;
L350: ( len C24 ) in ( dom C24 ) by L349 , FINSEQ_1:def 3;
L351: ( D4 . R7 ) = R5 by L350 , L329 , L348 , FINSEQ_1:def 7;
L352: [ R5 , R5 ] in R18 by L319 , L37;
L353: ( D4 . ( R7 + 1 ) ) = ( C23 . ( ( 1 + ( len C24 ) ) - ( len C24 ) ) ) by L332 , L348 , FINSEQ_1:23
.= R5 by L324;
thus L354: thesis by L353 , L351 , L352 , XBOOLE_0:def 3;
end;
suppose L355: (( ( len C24 ) + 1 ) <= R7 & R7 < ( len D4 ));

L356: ( len C24 ) < R7 by L355 , NAT_1:13;
reconsider D5 = ( R7 - ( len C24 ) ) as (Element of ( NAT )) by L356 , NAT_1:21;
L357: R7 < ( ( len C24 ) + ( len C23 ) ) by L355 , FINSEQ_1:22;
L358: ( R7 - ( len C24 ) ) < ( len C23 ) by L357 , XREAL_1:19;
L359: (( ( len C24 ) + 1 ) <= ( R7 + 1 ) & ( R7 + 1 ) <= ( ( len C24 ) + ( len C23 ) )) by L331 , L355 , NAT_1:13;
L360: ( D4 . ( R7 + 1 ) ) = ( C23 . ( ( 1 + R7 ) - ( len C24 ) ) ) by L359 , FINSEQ_1:23
.= ( C23 . ( ( R7 - ( len C24 ) ) + 1 ) );
L361: ( ( 1 + ( len C24 ) ) - ( len C24 ) ) <= ( R7 - ( len C24 ) ) by L355 , XREAL_1:9;
L362: [ ( C23 . D5 ) , ( C23 . ( D5 + 1 ) ) ] in ( R18 \/ R19 ) by L361 , L326 , L358;
thus L363: thesis by L362 , L331 , L355 , L360 , FINSEQ_1:23;
end;
end;
thus L365: thesis by L338;
end;
L366: 1 in ( Seg ( len C24 ) ) by L327 , FINSEQ_1:1;
L367: 1 in ( dom C24 ) by L366 , FINSEQ_1:def 3;
L368: R4 = ( D4 . 1 ) by L367 , L328 , FINSEQ_1:def 7;
L369: 1 <= ( len D4 ) by L327 , L331 , NAT_1:12;
thus L370: thesis by L369 , L316 , L318 , L320 , L325 , L368 , L333 , L334;
end;
L371: C22 is_symmetric_in R1
proof
let R4 being set;
let R5 being set;
assume that
L372: (R4 in R1 & R5 in R1)
and
L373: [ R4 , R5 ] in C22;
consider C25 being FinSequence such that L374: 1 <= ( len C25 ) and L375: R4 = ( C25 . 1 ) and L376: R5 = ( C25 . ( len C25 ) ) and L377: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len C25 )) implies [ ( C25 . R7 ) , ( C25 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ))) by L316 , L373;
defpred S3[ Nat , set ] means $2 = ( C25 . ( ( 1 + ( len C25 ) ) - $1 ) );
L378: (for B19 being Nat holds (B19 in ( Seg ( len C25 ) ) implies (ex R6 being set st S3[ B19 , R6 ])));
consider C26 being FinSequence such that L379: (( dom C26 ) = ( Seg ( len C25 ) ) & (for B20 being Nat holds (B20 in ( Seg ( len C25 ) ) implies S3[ B20 , ( C26 . B20 ) ]))) from FINSEQ_1:sch 1(L378);
L380: ( len C25 ) = ( len C26 ) by L379 , FINSEQ_1:def 3;
L381: (for R8 being (Element of ( NAT )) holds ((1 <= R8 & R8 < ( len C26 )) implies [ ( C26 . R8 ) , ( C26 . ( R8 + 1 ) ) ] in ( R18 \/ R19 )))
proof
let R8 being (Element of ( NAT ));
assume that
L382: 1 <= R8
and
L383: R8 < ( len C26 );
reconsider D6 = ( ( len C25 ) - R8 ) as (Element of ( NAT )) by L380 , L383 , NAT_1:21;
L384: ( R8 - ( len C25 ) ) < ( ( len C25 ) - ( len C25 ) ) by L380 , L383 , XREAL_1:9;
L385: ( - ( ( len C25 ) - R8 ) ) < ( - ( 0 ) ) by L384;
L386: ( 0 ) < D6 by L385;
L387: ( ( 0 ) + 1 ) <= D6 by L386 , NAT_1:13;
L388: ( - R8 ) < ( - ( 0 ) ) by L382 , XREAL_1:24;
L389: ( ( len C25 ) + ( - R8 ) ) < ( ( 0 ) + ( len C25 ) ) by L388 , XREAL_1:6;
L390: [ ( C25 . D6 ) , ( C25 . ( D6 + 1 ) ) ] in ( R18 \/ R19 ) by L389 , L377 , L387;
L391:
now
per cases  by L390 , XBOOLE_0:def 3;
suppose L392: [ ( C25 . D6 ) , ( C25 . ( D6 + 1 ) ) ] in R18;

L393: [ ( C25 . ( D6 + 1 ) ) , ( C25 . D6 ) ] in R18 by L392 , L41;
thus L394: [ ( C25 . ( D6 + 1 ) ) , ( C25 . D6 ) ] in ( R18 \/ R19 ) by L393 , XBOOLE_0:def 3;
end;
suppose L395: [ ( C25 . D6 ) , ( C25 . ( D6 + 1 ) ) ] in R19;

L396: [ ( C25 . ( D6 + 1 ) ) , ( C25 . D6 ) ] in R19 by L395 , L41;
thus L397: [ ( C25 . ( D6 + 1 ) ) , ( C25 . D6 ) ] in ( R18 \/ R19 ) by L396 , XBOOLE_0:def 3;
end;
end;
L399: (1 <= ( R8 + 1 ) & ( R8 + 1 ) <= ( len C25 )) by L380 , L383 , NAT_1:12 , NAT_1:13;
L400: ( R8 + 1 ) in ( Seg ( len C25 ) ) by L399 , FINSEQ_1:1;
L401: ( C26 . ( R8 + 1 ) ) = ( C25 . ( ( ( len C25 ) + 1 ) - ( 1 + R8 ) ) ) by L400 , L379
.= ( C25 . ( ( len C25 ) - R8 ) );
L402: R8 in ( Seg ( len C25 ) ) by L380 , L382 , L383 , FINSEQ_1:1;
L403: ( C26 . R8 ) = ( C25 . ( ( 1 + ( len C25 ) ) - R8 ) ) by L402 , L379
.= ( C25 . ( ( ( len C25 ) - R8 ) + 1 ) );
thus L404: thesis by L403 , L401 , L391;
end;
L405: ( len C25 ) in ( Seg ( len C25 ) ) by L374 , FINSEQ_1:1;
L406: ( C26 . ( len C25 ) ) = ( C25 . ( ( 1 + ( len C25 ) ) - ( len C25 ) ) ) by L405 , L379
.= ( C25 . ( 1 + ( 0 ) ) );
L407: R4 = ( C26 . ( len C26 ) ) by L406 , L375 , L379 , FINSEQ_1:def 3;
L408: 1 in ( Seg ( len C25 ) ) by L374 , FINSEQ_1:1;
L409: ( C26 . 1 ) = ( C25 . ( ( ( len C25 ) + 1 ) - 1 ) ) by L408 , L379
.= ( C25 . ( len C25 ) );
L410: 1 <= ( len C26 ) by L374 , L379 , FINSEQ_1:def 3;
thus L411: thesis by L410 , L316 , L372 , L376 , L409 , L407 , L381;
end;
L412: C22 is_reflexive_in R1
proof
let R4 being set;
assume that
L413: R4 in R1;
set D7 = <* R4 *>;
L414: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len D7 )) implies [ ( D7 . R7 ) , ( D7 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ))) by FINSEQ_1:40;
L415: (( len D7 ) = 1 & ( D7 . 1 ) = R4) by FINSEQ_1:40;
thus L416: thesis by L415 , L316 , L413 , L414;
end;
L417: (( field C22 ) = R1 & ( dom C22 ) = R1) by L412 , ORDERS_1:13;
reconsider D8 = C22 as (Equivalence_Relation of R1) by L417 , L371 , L317 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
L418: (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in ( R18 \/ R19 ) implies [ R4 , R5 ] in D8)))
proof
let R4 being set;
let R5 being set;
assume L419: [ R4 , R5 ] in ( R18 \/ R19 );
set D9 = <* R4 , R5 *>;
L420: ( len D9 ) = ( 1 + 1 ) by FINSEQ_1:44;
L421: ( D9 . 1 ) = R4 by FINSEQ_1:44;
L422: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len D9 )) implies [ ( D9 . R7 ) , ( D9 . ( R7 + 1 ) ) ] in ( R18 \/ R19 )))
proof
let R7 being (Element of ( NAT ));
assume that
L423: 1 <= R7
and
L424: R7 < ( len D9 );
L425: R7 <= 1 by L420 , L424 , NAT_1:13;
L426: 1 = R7 by L425 , L423 , XXREAL_0:1;
thus L427: thesis by L426 , L419 , L421 , FINSEQ_1:44;
end;
L428: ( len D9 ) = 2 by FINSEQ_1:44;
L429: (( D9 . 1 ) = R4 & ( D9 . ( len D9 ) ) = R5) by L428 , FINSEQ_1:44;
L430: (R4 in R1 & R5 in R1) by L419 , L33;
thus L431: thesis by L430 , L316 , L420 , L429 , L422;
end;
L432: ( R18 \/ R19 ) c= D8 by L418 , RELAT_1:def 3;
L433: ( R18 "\/" R19 ) c= D8 by L432 , L124;
assume L434: [ R4 , R5 ] in ( R18 "\/" R19 );
consider C27 being FinSequence such that L435: (1 <= ( len C27 ) & R4 = ( C27 . 1 ) & R5 = ( C27 . ( len C27 ) ) & (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len C27 )) implies [ ( C27 . R7 ) , ( C27 . ( R7 + 1 ) ) ] in ( R18 \/ R19 )))) by L434 , L316 , L433;
take C27;
thus L436: thesis by L435;
end;

given C28 being FinSequence such that
L437: 1 <= ( len C28 )
and
L438: R4 = ( C28 . 1 )
and
L439: R5 = ( C28 . ( len C28 ) )
and
L440: (for R7 being (Element of ( NAT )) holds ((1 <= R7 & R7 < ( len C28 )) implies [ ( C28 . R7 ) , ( C28 . ( R7 + 1 ) ) ] in ( R18 \/ R19 )));

defpred S4[ (Element of ( NAT )) ] means ((1 <= $1 & $1 <= ( len C28 )) implies [ ( C28 . 1 ) , ( C28 . $1 ) ] in ( R18 "\/" R19 ));
L441:
now
let R7 being (Element of ( NAT ));
assume L442: S4[ R7 ];
thus L443: S4[ ( R7 + 1 ) ]
proof
assume that
L444: 1 <= ( R7 + 1 )
and
L445: ( R7 + 1 ) <= ( len C28 );
L446: (1 <= R7 or 1 = ( R7 + 1 )) by L444 , NAT_1:8;
L447: ( R18 \/ R19 ) c= ( R18 "\/" R19 ) by L124;
L448: R7 < ( len C28 ) by L445 , NAT_1:13;
L449:
now
per cases  by L446;
suppose L450: 1 <= R7;

L451: [ ( C28 . R7 ) , ( C28 . ( R7 + 1 ) ) ] in ( R18 \/ R19 ) by L450 , L440 , L448;
thus L452: thesis by L451 , L442 , L445 , L447 , L450 , L47 , NAT_1:13;
end;
suppose L453: ( 0 ) = R7;

L454: [ ( C28 . 1 ) , ( C28 . 1 ) ] in R18 by L314 , L438 , L37;
L455: [ ( C28 . 1 ) , ( C28 . 1 ) ] in ( R18 \/ R19 ) by L454 , XBOOLE_0:def 3;
thus L456: thesis by L455 , L447 , L453;
end;
end;
thus L458: thesis by L449;
end;

end;
L444: S4[ ( 0 ) ];
L445: (for R7 being (Element of ( NAT )) holds S4[ R7 ]) from NAT_1:sch 1(L444 , L441);
thus L446: thesis by L445 , L437 , L438 , L439;
end;
theorem
L447: (for R1 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds (for B21 being (Equivalence_Relation of R1) holds (B21 = ( R18 \/ R19 ) implies (for R4 being set holds (R4 in R1 implies (( Class (B21 , R4) ) = ( Class (R18 , R4) ) or ( Class (B21 , R4) ) = ( Class (R19 , R4) )))))))))
proof
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
let C29 being (Equivalence_Relation of R1);
assume that
L448: C29 = ( R18 \/ R19 );
L449: (for R4 being set holds (R4 in R1 implies (( Class (C29 , R4) ) = ( Class (R18 , R4) ) or ( Class (C29 , R4) ) = ( Class (R19 , R4) ))))
proof
let R4 being set;
assume that
L450: R4 in R1;
assume that
L451: (not ( Class (C29 , R4) ) = ( Class (R18 , R4) ))
and
L452: (not ( Class (C29 , R4) ) = ( Class (R19 , R4) ));
consider R5 being set such that L453: ((R5 in ( Class (C29 , R4) ) & (not R5 in ( Class (R18 , R4) ))) or (R5 in ( Class (R18 , R4) ) & (not R5 in ( Class (C29 , R4) )))) by L451 , TARSKI:1;
L454:
now
assume that
L455: R5 in ( Class (R18 , R4) )
and
L456: (not R5 in ( Class (C29 , R4) ));
L457: [ R5 , R4 ] in R18 by L455 , L213;
L458: [ R5 , R4 ] in C29 by L457 , L448 , XBOOLE_0:def 3;
thus L459: contradiction by L458 , L456 , L213;
end;
L460: [ R5 , R4 ] in C29 by L454 , L453 , L213;
consider R6 being set such that L461: ((R6 in ( Class (C29 , R4) ) & (not R6 in ( Class (R19 , R4) ))) or (R6 in ( Class (R19 , R4) ) & (not R6 in ( Class (C29 , R4) )))) by L452 , TARSKI:1;
L462:
now
assume that
L463: R6 in ( Class (R19 , R4) )
and
L464: (not R6 in ( Class (C29 , R4) ));
L465: [ R6 , R4 ] in R19 by L463 , L213;
L466: [ R6 , R4 ] in C29 by L465 , L448 , XBOOLE_0:def 3;
thus L467: contradiction by L466 , L464 , L213;
end;
L468: [ R6 , R4 ] in C29 by L462 , L461 , L213;
L469: (not [ R6 , R4 ] in R19) by L461 , L462 , L213;
L470: [ R6 , R4 ] in R18 by L469 , L448 , L468 , XBOOLE_0:def 3;
L471:
now
assume L472: [ R5 , R6 ] in R18;
L473: [ R6 , R5 ] in R18 by L472 , L41;
L474: [ R4 , R6 ] in R18 by L470 , L41;
L475: [ R4 , R5 ] in R18 by L474 , L473 , L47;
L476: [ R5 , R4 ] in R18 by L475 , L41;
thus L477: contradiction by L476 , L453 , L454 , L213;
end;
L478: (not [ R5 , R4 ] in R18) by L453 , L454 , L213;
L479: [ R5 , R4 ] in R19 by L478 , L448 , L460 , XBOOLE_0:def 3;
L480:
now
assume L481: [ R5 , R6 ] in R19;
L482: [ R4 , R5 ] in R19 by L479 , L41;
L483: [ R4 , R6 ] in R19 by L482 , L481 , L47;
L484: [ R6 , R4 ] in R19 by L483 , L41;
thus L485: contradiction by L484 , L461 , L462 , L213;
end;
L486: [ R4 , R6 ] in C29 by L468 , L41;
L487: [ R5 , R6 ] in C29 by L486 , L460 , L47;
thus L488: contradiction by L487 , L448 , L480 , L471 , XBOOLE_0:def 3;
end;
thus L489: thesis by L449;
end;
theorem
L490: (for R1 being set holds (for R18 being (Equivalence_Relation of R1) holds (for R19 being (Equivalence_Relation of R1) holds (( R18 \/ R19 ) = ( nabla R1 ) implies (R18 = ( nabla R1 ) or R19 = ( nabla R1 ))))))
proof
let R1 being set;
let R18 being (Equivalence_Relation of R1);
let R19 being (Equivalence_Relation of R1);
assume L491: ( R18 \/ R19 ) = ( nabla R1 );
L492: ((not R1 = ( {} )) implies (R18 = ( nabla R1 ) or R19 = ( nabla R1 )))
proof
set D10 = the (Element of R1);
L493:
now
let R4 being set;
assume L494: R4 in R1;
L495: (( Class (( nabla R1 ) , R4) ) = ( Class (R18 , R4) ) or ( Class (( nabla R1 ) , R4) ) = ( Class (R19 , R4) )) by L494 , L491 , L447;
thus L496: (( Class (R18 , R4) ) = R1 or ( Class (R19 , R4) ) = R1) by L495 , L494 , L294;
end;
assume L497: R1 <> ( {} );
L498: (( Class (R18 , D10) ) = R1 or ( Class (R19 , D10) ) = R1) by L497 , L493;
thus L499: thesis by L498 , L302;
end;
thus L500: thesis by L492;
end;
definition
let R1 being set;
let R17 being (Equivalence_Relation of R1);
func Class R17 -> (Subset-Family of R1) means 
:L501: (for R9 being (Subset of R1) holds (R9 in it iff (ex R4 being set st (R4 in R1 & R9 = ( Class (R17 , R4) )))));
existence
proof
defpred S5[ set ] means (ex R4 being set st (R4 in R1 & $1 = ( Class (R17 , R4) )));
consider C30 being (Subset-Family of R1) such that L502: (for R9 being (Subset of R1) holds (R9 in C30 iff S5[ R9 ])) from SUBSET_1:sch 3;
take C30;
thus L503: thesis by L502;
end;
uniqueness
proof
let C31 , C32 being (Subset-Family of R1);
assume that
L504: (for R9 being (Subset of R1) holds (R9 in C31 iff (ex R4 being set st (R4 in R1 & R9 = ( Class (R17 , R4) )))))
and
L505: (for R9 being (Subset of R1) holds (R9 in C32 iff (ex R4 being set st (R4 in R1 & R9 = ( Class (R17 , R4) )))));
L506:
now
let R9 being (Subset of R1);
L507: (R9 in C31 iff (ex R4 being set st (R4 in R1 & R9 = ( Class (R17 , R4) )))) by L504;
thus L508: (R9 in C31 iff R9 in C32) by L507 , L505;
end;
thus L509: thesis by L506 , SETFAM_1:31;
end;
end;
theorem
L511: (for R1 being set holds (for R17 being (Equivalence_Relation of R1) holds (R1 = ( {} ) implies ( Class R17 ) = ( {} ))))
proof
let R1 being set;
let R17 being (Equivalence_Relation of R1);
assume that
L512: R1 = ( {} )
and
L513: ( Class R17 ) <> ( {} );
set D11 = the (Element of ( Class R17 ));
L514: D11 is (Subset of R1) by L513 , TARSKI:def 3;
L515: (ex R4 being set st (R4 in R1 & D11 = ( Class (R17 , R4) ))) by L514 , L513 , L501;
thus L516: contradiction by L515 , L512;
end;
definition
let R1 being set;
mode a_partition of R1
 -> (Subset-Family of R1)
means :L517: (( union it ) = R1 & (for R9 being (Subset of R1) holds (R9 in it implies (R9 <> ( {} ) & (for R10 being (Subset of R1) holds (R10 in it implies (R9 = R10 or R9 misses R10)))))));
existence
proof
defpred S6[ set ] means (ex R4 being set st (R4 in R1 & $1 = { R4 }));
consider C33 being (Subset-Family of R1) such that L518: (for B22 being (Subset of R1) holds (B22 in C33 iff S6[ B22 ])) from SUBSET_1:sch 3;
L519: (for R9 being (Subset of R1) holds (R9 in C33 implies (R9 <> ( {} ) & (for R10 being (Subset of R1) holds (R10 in C33 implies (R9 = R10 or R9 misses R10))))))
proof
let R9 being (Subset of R1);
assume L520: R9 in C33;
consider R4 being set such that L521: R4 in R1 and L522: R9 = { R4 } by L520 , L518;
thus L523: R9 <> ( {} ) by L522;
let R10 being (Subset of R1);
assume L524: R10 in C33;
consider R5 being set such that L525: R5 in R1 and L526: R10 = { R5 } by L524 , L518;
L527:
now
assume L528: (not R4 = R5);
L529: (for R6 being set holds (R6 in R9 implies (not R6 in R10)))
proof
let R6 being set;
assume L530: R6 in R9;
L531: (not R6 = R5) by L530 , L522 , L528 , TARSKI:def 1;
thus L532: thesis by L531 , L526 , TARSKI:def 1;
end;
thus L533: R9 misses R10 by L529 , XBOOLE_0:3;
end;
thus L534: thesis by L527 , L522 , L526;
end;
take C33;
L535:
now
let R5 being set;
L536:
now
set D12 = { R5 };
assume L537: R5 in R1;
L538: D12 is (Subset of R1) by L537 , ZFMISC_1:31;
L539: (R5 in D12 & D12 in C33) by L538 , L518 , L537 , TARSKI:def 1;
thus L540: (ex R3 being set st (R5 in R3 & R3 in C33)) by L539;
end;
thus L541: (R5 in R1 iff (ex R3 being set st (R5 in R3 & R3 in C33))) by L536;
end;
thus L542: thesis by L535 , L519 , TARSKI:def 4;
end;
end;
theorem
L544: (for B23 being (a_partition of ( {} )) holds B23 = ( {} ))
proof
let C34 being (a_partition of ( {} ));
assume L545: (not thesis);
consider C35 being set such that L546: C35 in C34 by L545 , XBOOLE_0:def 1;
L547: C35 <> ( {} ) by L546 , L517;
thus L548: thesis by L547 , L546;
end;
theorem
L549: (for R1 being set holds (for R17 being (Equivalence_Relation of R1) holds ( Class R17 ) is (a_partition of R1)))
proof
let R1 being set;
let R17 being (Equivalence_Relation of R1);
L550:
now
let R4 being set;
L551:
now
consider R3 being set such that L552: R3 = ( Class (R17 , R4) );
assume L553: R4 in R1;
L554: R3 in ( Class R17 ) by L553 , L552 , L501;
thus L555: (ex R3 being set st (R4 in R3 & R3 in ( Class R17 ))) by L554 , L553 , L552 , L223;
end;
thus L556: (R4 in R1 iff (ex R3 being set st (R4 in R3 & R3 in ( Class R17 )))) by L551;
end;
thus L557: ( union ( Class R17 ) ) = R1 by L550 , TARSKI:def 4;
let R9 being (Subset of R1);
assume L558: R9 in ( Class R17 );
L559: (ex R4 being set st (R4 in R1 & R9 = ( Class (R17 , R4) ))) by L558 , L501;
thus L560: R9 <> ( {} ) by L559 , L223;
let R10 being (Subset of R1);
assume L561: R10 in ( Class R17 );
L562: (ex R5 being set st (R5 in R1 & R10 = ( Class (R17 , R5) ))) by L561 , L501;
thus L563: thesis by L562 , L559 , L270;
end;
theorem
L564: (for R1 being set holds (for B24 being (a_partition of R1) holds (ex R17 being (Equivalence_Relation of R1) st B24 = ( Class R17 ))))
proof
let R1 being set;
let C36 being (a_partition of R1);
L565: (R1 <> ( {} ) implies (ex R17 being (Equivalence_Relation of R1) st C36 = ( Class R17 )))
proof
defpred S7[ set , set ] means (ex R9 being (Subset of R1) st (R9 in C36 & $1 in R9 & $2 in R9));
assume L566: R1 <> ( {} );
L567: (for R4 being set holds (for R5 being set holds (for R6 being set holds ((S7[ R4 , R5 ] & S7[ R5 , R6 ]) implies S7[ R4 , R6 ]))))
proof
let R4 being set;
let R5 being set;
let R6 being set;
given R9 being (Subset of R1) such that
L568: R9 in C36
and
L569: (R4 in R9 & R5 in R9);

given R10 being (Subset of R1) such that
L570: R10 in C36
and
L571: (R5 in R10 & R6 in R10);

L572: (R9 = R10 or R9 misses R10) by L568 , L570 , L517;
thus L573: thesis by L572 , L568 , L569 , L571 , XBOOLE_0:3;
end;
L574: ( union C36 ) = R1 by L517;
L575: (for R4 being set holds (R4 in R1 implies S7[ R4 , R4 ]))
proof
let R4 being set;
assume L576: R4 in R1;
consider R3 being set such that L577: R4 in R3 and L578: R3 in C36 by L576 , L574 , TARSKI:def 4;
reconsider D13 = R3 as (Subset of R1) by L578;
take D13;
thus L579: thesis by L577 , L578;
end;
L580: (for R4 being set holds (for R5 being set holds (S7[ R4 , R5 ] implies S7[ R5 , R4 ])));
consider C37 being (Equivalence_Relation of R1) such that L581: (for R4 being set holds (for R5 being set holds ([ R4 , R5 ] in C37 iff (R4 in R1 & R5 in R1 & S7[ R4 , R5 ])))) from ExEqRel(L575 , L580 , L567);
take C37;
L582:
now
let R9 being (Subset of R1);
L583:
now
set D14 = the (Element of R9);
assume L584: R9 in C36;
L585: R9 <> ( {} ) by L584 , L517;
L586: D14 in R1 by L585 , TARSKI:def 3;
L587:
now
let R5 being set;
L588:
now
assume L589: R5 in ( Class (C37 , D14) );
L590: [ R5 , D14 ] in C37 by L589 , L213;
consider R10 being (Subset of R1) such that L591: (R10 in C36 & R5 in R10) and L592: D14 in R10 by L590 , L581;
L593: R9 meets R10 by L585 , L592 , XBOOLE_0:3;
thus L594: R5 in R9 by L593 , L584 , L591 , L517;
end;
L595:
now
assume L596: R5 in R9;
L597: [ R5 , D14 ] in C37 by L596 , L581 , L584 , L586;
thus L598: R5 in ( Class (C37 , D14) ) by L597 , L213;
end;
thus L599: (R5 in R9 iff R5 in ( Class (C37 , D14) )) by L595 , L588;
end;
L600: R9 = ( Class (C37 , D14) ) by L587 , TARSKI:1;
thus L601: R9 in ( Class C37 ) by L600 , L586 , L501;
end;
L602:
now
assume L603: R9 in ( Class C37 );
consider R4 being set such that L604: R4 in R1 and L605: R9 = ( Class (C37 , R4) ) by L603 , L501;
L606: R4 in ( Class (C37 , R4) ) by L604 , L223;
L607: [ R4 , R4 ] in C37 by L606 , L213;
consider R10 being (Subset of R1) such that L608: R10 in C36 and L609: R4 in R10 and L610: R4 in R10 by L607 , L581;
L611:
now
let R5 being set;
L612:
now
assume L613: R5 in R9;
L614: [ R5 , R4 ] in C37 by L613 , L605 , L213;
consider R11 being (Subset of R1) such that L615: (R11 in C36 & R5 in R11) and L616: R4 in R11 by L614 , L581;
L617: R10 meets R11 by L609 , L616 , XBOOLE_0:3;
thus L618: R5 in R10 by L617 , L608 , L615 , L517;
end;
L619:
now
assume L620: R5 in R10;
L621: [ R5 , R4 ] in C37 by L620 , L581 , L608 , L609;
thus L622: R5 in R9 by L621 , L605 , L213;
end;
thus L623: (R5 in R9 iff R5 in R10) by L619 , L612;
end;
thus L624: R9 in C36 by L611 , L608 , TARSKI:1;
end;
thus L625: (R9 in C36 iff R9 in ( Class C37 )) by L602 , L583;
end;
thus L626: thesis by L582 , SETFAM_1:31;
end;
L627: (R1 = ( {} ) implies (ex R17 being (Equivalence_Relation of R1) st C36 = ( Class R17 )))
proof
set D15 = the (Equivalence_Relation of R1);
assume L628: R1 = ( {} );
take D15;
L629: C36 = ( {} ) by L628 , L544;
thus L630: thesis by L629 , L628 , L511;
end;
thus L631: thesis by L627 , L565;
end;
theorem
L632: (for R1 being set holds (for R5 being set holds (for R17 being (Equivalence_Relation of R1) holds (for R4 being set holds (R4 in R1 implies ([ R4 , R5 ] in R17 iff ( Class (R17 , R4) ) = ( Class (R17 , R5) ))))))) by L238;
theorem
L633: (for R1 being set holds (for R4 being set holds (for R17 being (Equivalence_Relation of R1) holds (R4 in ( Class R17 ) implies (ex B25 being (Element of R1) st R4 = ( Class (R17 , B25) ))))))
proof
let R1 being set;
let R4 being set;
let R17 being (Equivalence_Relation of R1);
assume L634: R4 in ( Class R17 );
reconsider D16 = R4 as (Subset of R1) by L634;
consider R5 being set such that L635: R5 in R1 and L636: D16 = ( Class (R17 , R5) ) by L634 , L501;
reconsider D17 = R5 as (Element of R1) by L635;
take D17;
thus L637: thesis by L636;
end;
begin
registration
let C38 being non  empty set;
cluster  -> non  empty for (a_partition of C38);
coherence
proof
set D18 = the (Element of C38);
let C39 being (a_partition of C38);
L638: ( union C39 ) = C38 by L517;
L639: (ex B26 being set st (D18 in B26 & B26 in C39)) by L638 , TARSKI:def 4;
thus L640: thesis by L639;
end;
end;
registration
let C40 being set;
cluster  ->  with_non-empty_elements for (a_partition of C40);
coherence
proof
let C41 being (a_partition of C40);
assume L642: ( {} ) in C41;
thus L643: contradiction by L642 , L517;
end;
end;
definition
let C42 being set;
let C43 being (Equivalence_Relation of C42);
redefine func Class C43 -> (a_partition of C42);

coherence by L549;
end;
registration
let C44 being non  empty set;
let C45 being (Equivalence_Relation of C44);
cluster ( Class C45 ) -> non  empty;
coherence;
end;
registration
let C46 being non  empty set;
let C47 being (Equivalence_Relation of C46);
cluster ( Class C47 ) ->  with_non-empty_elements;
coherence;
end;
notation
let C48 being non  empty set;
let C49 being (Equivalence_Relation of C48);
let C50 being (Element of C48);
synonym EqClass (C49 , C50) for Class (C49 , C50);
end;
definition
let C51 being non  empty set;
let C52 being (Equivalence_Relation of C51);
let C53 being (Element of C51);
redefine func EqClass (C52 , C53) -> (Element of ( Class C52 ));

coherence
proof
thus L649: ( Class (C52 , C53) ) is (Element of ( Class C52 )) by L501;
end;
end;
definition
let C54 being set;
func SmallestPartition C54 -> (a_partition of C54) equals 
( Class ( id C54 ) );
coherence;
end;
theorem
L652: (for B27 being non  empty set holds ( SmallestPartition B27 ) = { { B28 } where B28 is (Element of B27) : (not contradiction) })
proof
let C55 being non  empty set;
set D19 = { { B29 } where B29 is (Element of C55) : (not contradiction) };
thus L653:now
let C56 being set;
assume L654: C56 in ( SmallestPartition C55 );
consider C57 being set such that L655: C57 in C55 and L656: C56 = ( Class (( id C55 ) , C57) ) by L654 , L501;
L657: C56 = { C57 } by L655 , L656 , L286;
thus L658: C56 in D19 by L657 , L655;
end;
let C58 being set;
assume L659: C58 in D19;
consider C59 being (Element of C55) such that L660: C58 = { C59 } by L659;
L661: ( Class (( id C55 ) , C59) ) = C58 by L660 , L286;
thus L662: thesis by L661 , L501;
end;
definition
let C60 being non  empty set;
let C61 being (Element of C60);
let C62 being (a_partition of C60);
func EqClass (C61 , C62) -> (Subset of C60) means 
:L663: (C61 in it & it in C62);
existence
proof
consider C63 being (Equivalence_Relation of C60) such that L664: C62 = ( Class C63 ) by L564;
take ( Class (C63 , C61) );
thus L665: C61 in ( Class (C63 , C61) ) by L223;
thus L666: thesis by L664 , L501;
end;
uniqueness
proof
let C64 , C65 being (Subset of C60);
assume that
L667: C61 in C64
and
L668: C64 in C62
and
L669: C61 in C65
and
L670: C65 in C62;
L671: C64 meets C65 by L667 , L669 , XBOOLE_0:3;
thus L672: thesis by L671 , L668 , L670 , L517;
end;
end;
theorem
L674: (for R21 being non  empty set holds (for B30 , B31 being (a_partition of R21) holds ((for B32 being (Element of R21) holds ( EqClass (B32 , B30) ) = ( EqClass (B32 , B31) )) implies B30 = B31)))
proof
let R21 being non  empty set;
let C66 , C67 being (a_partition of R21);
assume L675: (for B33 being (Element of R21) holds ( EqClass (B33 , C66) ) = ( EqClass (B33 , C67) ));
L676:
now
let C68 being (Subset of R21);
thus L677: (C68 in C66 implies C68 in C67)
proof
set D20 = the (Element of C68);
assume L678: C68 in C66;
L679: C68 is non  empty by L678 , L517;
L680: D20 in C68 by L679;
reconsider D21 = D20 as (Element of R21) by L680;
L681: C68 = ( EqClass (D21 , C66) ) by L678 , L679 , L663;
L682: C68 = ( EqClass (D21 , C67) ) by L681 , L675;
thus L683: thesis by L682 , L663;
end;

thus L684: (C68 in C67 implies C68 in C66)
proof
set D22 = the (Element of C68);
assume L685: C68 in C67;
L686: C68 <> ( {} ) by L685 , L517;
L687: D22 in C68 by L686;
reconsider D23 = D22 as (Element of R21) by L687;
L688: C68 = ( EqClass (D23 , C67) ) by L685 , L686 , L663;
L689: C68 = ( EqClass (D23 , C66) ) by L688 , L675;
thus L690: thesis by L689 , L663;
end;

end;
thus L685: thesis by L676 , SETFAM_1:31;
end;
theorem
L686: (for B34 being non  empty set holds { B34 } is (a_partition of B34))
proof
let C69 being non  empty set;
reconsider D24 = { C69 } as (Subset-Family of C69) by ZFMISC_1:68;
L687: (for B35 being (Subset of C69) holds (B35 in D24 implies (B35 <> ( {} ) & (for B36 being (Subset of C69) holds (B36 in D24 implies (B35 = B36 or B35 misses B36))))))
proof
let C70 being (Subset of C69);
assume L688: C70 in D24;
thus L689: C70 <> ( {} ) by L688 , TARSKI:def 1;
let C71 being (Subset of C69);
assume L690: C71 in D24;
L691: C71 = C69 by L690 , TARSKI:def 1;
thus L692: thesis by L691 , L688 , TARSKI:def 1;
end;
L693: ( union D24 ) = C69 by ZFMISC_1:25;
thus L694: thesis by L693 , L687 , L517;
end;
definition
let C72 being set;
mode Family-Class of C72
 is (Subset-Family of ( bool C72 ));
end;
definition
let C73 being set;
let C74 being (Family-Class of C73);
attr C74 is  partition-membered
means
:L696: (for B37 being set holds (B37 in C74 implies B37 is (a_partition of C73)));
end;
registration
let C75 being set;
cluster  partition-membered for (Family-Class of C75);
existence
proof
reconsider D25 = ( {} ) as (Family-Class of C75) by XBOOLE_1:2;
take D25;
let C76 being set;
assume L698: C76 in D25;
thus L699: thesis by L698;
end;
end;
definition
let C77 being set;
mode Part-Family of C77
 is  partition-membered (Family-Class of C77);
end;
registration
let C78 being non  empty set;
cluster non  empty for (a_partition of C78);
existence
proof
take { C78 };
thus L702: thesis by L686;
end;
end;
theorem
L704: (for B38 being set holds (for B39 being (a_partition of B38) holds { B39 } is (Part-Family of B38)))
proof
let C79 being set;
let C80 being (a_partition of C79);
L705: (for B40 being set holds (B40 in { C80 } implies B40 is (a_partition of C79))) by TARSKI:def 1;
thus L706: thesis by L705 , L696;
end;
registration
let C81 being set;
cluster non  empty for (Part-Family of C81);
existence
proof
set D26 = the (a_partition of C81);
reconsider D27 = { D26 } as (Part-Family of C81) by L704;
take D27;
thus L707: thesis;
end;
end;
theorem
L709: (for R21 being non  empty set holds (for B41 being (a_partition of R21) holds (for B42 , B43 being (Element of R21) holds (( EqClass (B42 , B41) ) meets ( EqClass (B43 , B41) ) implies ( EqClass (B42 , B41) ) = ( EqClass (B43 , B41) )))))
proof
let R21 being non  empty set;
let C82 being (a_partition of R21);
let C83 , C84 being (Element of R21);
consider C85 being (Equivalence_Relation of R21) such that L710: C82 = ( Class C85 ) by L564;
L711: C84 in ( Class (C85 , C84) ) by L223;
L712: ( Class (C85 , C84) ) in C82 by L710 , L501;
L713: ( Class (C85 , C84) ) = ( EqClass (C84 , C82) ) by L712 , L711 , L663;
L714: C83 in ( Class (C85 , C83) ) by L223;
L715: ( Class (C85 , C83) ) in C82 by L710 , L501;
L716: ( Class (C85 , C83) ) = ( EqClass (C83 , C82) ) by L715 , L714 , L663;
assume L717: ( EqClass (C83 , C82) ) meets ( EqClass (C84 , C82) );
thus L718: thesis by L717 , L716 , L713 , L270;
end;
L719: (for R21 being non  empty set holds (for R22 being (Element of R21) holds (for R23 being (Part-Family of R21) holds (for B44 being set holds (B44 in { ( EqClass (R22 , B45) ) where B45 is (a_partition of R21) : B45 in R23 } implies (ex B46 being (a_partition of R21) st (B46 in R23 & B44 = ( EqClass (R22 , B46) ))))))))
proof
let R21 being non  empty set;
let R22 being (Element of R21);
let R23 being (Part-Family of R21);
let C86 being set;
assume L720: C86 in { ( EqClass (R22 , B47) ) where B47 is (a_partition of R21) : B47 in R23 };
consider C87 being (a_partition of R21) such that L721: (C86 = ( EqClass (R22 , C87) ) & C87 in R23) by L720;
take C87;
thus L722: thesis by L721;
end;
theorem
L723: (for B48 being set holds (for B49 being non  empty set holds (for B50 being (a_partition of B49) holds (B48 in B50 implies (ex B51 being (Element of B49) st B48 = ( EqClass (B51 , B50) ))))))
proof
let C88 being set;
let C89 being non  empty set;
let C90 being (a_partition of C89);
assume L724: C88 in C90;
L725: C88 is non  empty by L724 , L517;
consider C91 being set such that L726: C91 in C88 by L725 , XBOOLE_0:def 1;
take C91;
thus L727: thesis by L724 , L726 , L663;
end;
definition
let C92 being non  empty set;
let C93 being non  empty (Part-Family of C92);
func Intersection C93 -> non  empty (a_partition of C92) means 
(for B52 being (Element of C92) holds ( EqClass (B52 , it) ) = ( meet { ( EqClass (B52 , B53) ) where B53 is (a_partition of C92) : B53 in C93 } ));
uniqueness
proof
given C94 , C95 being (a_partition of C92) such that
L728: (for B54 being (Element of C92) holds ( EqClass (B54 , C94) ) = ( meet { ( EqClass (B54 , B55) ) where B55 is (a_partition of C92) : B55 in C93 } ))
and
L729: (for B56 being (Element of C92) holds ( EqClass (B56 , C95) ) = ( meet { ( EqClass (B56 , B57) ) where B57 is (a_partition of C92) : B57 in C93 } ))
and
L730: (not C94 = C95);

L731:
now
let C96 being (Element of C92);
L732: ( EqClass (C96 , C94) ) = ( meet { ( EqClass (C96 , B58) ) where B58 is (a_partition of C92) : B58 in C93 } ) by L728;
thus L733: ( EqClass (C96 , C94) ) = ( EqClass (C96 , C95) ) by L732 , L729;
end;
thus L734: contradiction by L731 , L730 , L674;
end;
existence
proof
thus L735: (ex B59 being non  empty (a_partition of C92) st (for B60 being (Element of C92) holds ( EqClass (B60 , B59) ) = ( meet { ( EqClass (B60 , B61) ) where B61 is (a_partition of C92) : B61 in C93 } )))
proof
set D28 = { ( meet { ( EqClass (B62 , B63) ) where B63 is (a_partition of C92) : B63 in C93 } ) where B62 is (Element of C92) : (not contradiction) };
L736: D28 c= ( bool C92 )
proof
let C97 being set;
assume L737: C97 in D28;
consider C98 being (Element of C92) such that L738: C97 = ( meet { ( EqClass (C98 , B64) ) where B64 is (a_partition of C92) : B64 in C93 } ) by L737;
L739: C97 c= C92
proof
let C99 being set;
consider C100 being set such that L740: C100 in C93 by XBOOLE_0:def 1;
reconsider D29 = C100 as (a_partition of C92) by L740 , L696;
L741: ( EqClass (C98 , D29) ) in { ( EqClass (C98 , B65) ) where B65 is (a_partition of C92) : B65 in C93 } by L740;
consider C101 being set such that L742: C101 in { ( EqClass (C98 , B66) ) where B66 is (a_partition of C92) : B66 in C93 } by L741;
consider C102 being (a_partition of C92) such that L743: C101 = ( EqClass (C98 , C102) ) and L744: C102 in C93 by L742;
assume L745: C99 in C97;
L746: C99 in ( EqClass (C98 , C102) ) by L745 , L738 , L742 , L743 , SETFAM_1:def 1;
thus L747: thesis by L746;
end;
thus L748: thesis by L739;
end;
reconsider D30 = D28 as (Subset-Family of C92) by L736;
L749: D30 is (a_partition of C92)
proof
L750: C92 c= ( union D30 )
proof
let C103 being set;
consider C104 being set such that L751: C104 in C93 by XBOOLE_0:def 1;
assume L752: C103 in C92;
reconsider D31 = C103 as (Element of C92) by L752;
reconsider D32 = C104 as (a_partition of C92) by L751 , L696;
L753: ( meet { ( EqClass (D31 , B67) ) where B67 is (a_partition of C92) : B67 in C93 } ) in D30;
L754: (for B68 being set holds (B68 in { ( EqClass (D31 , B69) ) where B69 is (a_partition of C92) : B69 in C93 } implies D31 in B68))
proof
let C105 being set;
assume L755: C105 in { ( EqClass (D31 , B70) ) where B70 is (a_partition of C92) : B70 in C93 };
L756: (ex B71 being (a_partition of C92) st (C105 = ( EqClass (D31 , B71) ) & B71 in C93)) by L755;
thus L757: thesis by L756 , L663;
end;
L758: ( EqClass (D31 , D32) ) in { ( EqClass (D31 , B72) ) where B72 is (a_partition of C92) : B72 in C93 } by L751;
L759: C103 in ( meet { ( EqClass (D31 , B73) ) where B73 is (a_partition of C92) : B73 in C93 } ) by L758 , L754 , SETFAM_1:def 1;
thus L760: thesis by L759 , L753 , TARSKI:def 4;
end;
thus L761: ( union D30 ) = C92 by L750 , XBOOLE_0:def 10;
let C106 being (Subset of C92);
consider C107 being set such that L762: C107 in C93 by XBOOLE_0:def 1;
reconsider D33 = C107 as (a_partition of C92) by L762 , L696;
assume L763: C106 in D30;
consider C108 being (Element of C92) such that L764: C106 = ( meet { ( EqClass (C108 , B74) ) where B74 is (a_partition of C92) : B74 in C93 } ) by L763;
L765: (for B75 being set holds (B75 in { ( EqClass (C108 , B76) ) where B76 is (a_partition of C92) : B76 in C93 } implies C108 in B75))
proof
let C109 being set;
assume L766: C109 in { ( EqClass (C108 , B77) ) where B77 is (a_partition of C92) : B77 in C93 };
L767: (ex B78 being (a_partition of C92) st (C109 = ( EqClass (C108 , B78) ) & B78 in C93)) by L766;
thus L768: thesis by L767 , L663;
end;
L769: ( EqClass (C108 , D33) ) in { ( EqClass (C108 , B79) ) where B79 is (a_partition of C92) : B79 in C93 } by L762;
thus L770: C106 <> ( {} ) by L769 , L764 , L765 , SETFAM_1:def 1;
consider C110 being (Element of C92) such that L771: C106 = ( meet { ( EqClass (C110 , B80) ) where B80 is (a_partition of C92) : B80 in C93 } ) by L763;
let C111 being (Subset of C92);
assume L772: C111 in D30;
consider C112 being (Element of C92) such that L773: C111 = ( meet { ( EqClass (C112 , B81) ) where B81 is (a_partition of C92) : B81 in C93 } ) by L772;
thus L774: (C106 = C111 or C106 misses C111)
proof
L775: { ( EqClass (C112 , B82) ) where B82 is (a_partition of C92) : B82 in C93 } is non  empty
proof
consider C113 being set such that L776: C113 in C93 by XBOOLE_0:def 1;
reconsider D34 = C113 as (a_partition of C92) by L776 , L696;
L777: ( EqClass (C112 , D34) ) in { ( EqClass (C112 , B83) ) where B83 is (a_partition of C92) : B83 in C93 } by L776;
thus L778: thesis by L777;
end;
L779: { ( EqClass (C110 , B84) ) where B84 is (a_partition of C92) : B84 in C93 } is non  empty
proof
consider C114 being set such that L780: C114 in C93 by XBOOLE_0:def 1;
reconsider D35 = C114 as (a_partition of C92) by L780 , L696;
L781: ( EqClass (C110 , D35) ) in { ( EqClass (C110 , B85) ) where B85 is (a_partition of C92) : B85 in C93 } by L780;
thus L782: thesis by L781;
end;
L783:
now
assume L784: C106 meets C111;
consider C115 being set such that L785: (C115 in C106 & C115 in C111) by L784 , XBOOLE_0:3;
L786: C115 in ( ( meet { ( EqClass (C110 , B86) ) where B86 is (a_partition of C92) : B86 in C93 } ) /\ ( meet { ( EqClass (C112 , B87) ) where B87 is (a_partition of C92) : B87 in C93 } ) ) by L771 , L773 , L785 , XBOOLE_0:def 4;
L787: C115 in ( meet ( { ( EqClass (C110 , B88) ) where B88 is (a_partition of C92) : B88 in C93 } \/ { ( EqClass (C112 , B89) ) where B89 is (a_partition of C92) : B89 in C93 } ) ) by L786 , L779 , L775 , SETFAM_1:9;
L788:
now
let C116 being (a_partition of C92);
assume L789: C116 in C93;
L790: ( EqClass (C112 , C116) ) in { ( EqClass (C112 , B90) ) where B90 is (a_partition of C92) : B90 in C93 } by L789;
L791: ( EqClass (C112 , C116) ) in ( { ( EqClass (C110 , B91) ) where B91 is (a_partition of C92) : B91 in C93 } \/ { ( EqClass (C112 , B92) ) where B92 is (a_partition of C92) : B92 in C93 } ) by L790 , XBOOLE_0:def 3;
thus L792: C115 in ( EqClass (C112 , C116) ) by L791 , L787 , SETFAM_1:def 1;
end;
L793:
now
let C117 being (a_partition of C92);
assume L794: C117 in C93;
L795: ( EqClass (C110 , C117) ) in { ( EqClass (C110 , B93) ) where B93 is (a_partition of C92) : B93 in C93 } by L794;
L796: ( EqClass (C110 , C117) ) in ( { ( EqClass (C110 , B94) ) where B94 is (a_partition of C92) : B94 in C93 } \/ { ( EqClass (C112 , B95) ) where B95 is (a_partition of C92) : B95 in C93 } ) by L795 , XBOOLE_0:def 3;
thus L797: C115 in ( EqClass (C110 , C117) ) by L796 , L787 , SETFAM_1:def 1;
end;
L798: (for B96 being (a_partition of C92) holds (B96 in C93 implies (ex B97 being set st (B97 in ( EqClass (C110 , B96) ) & B97 in ( EqClass (C112 , B96) )))))
proof
let C118 being (a_partition of C92);
assume L799: C118 in C93;
take C115;
thus L800: thesis by L793 , L788 , L799;
end;
L801: (for B98 being (a_partition of C92) holds (B98 in C93 implies ( EqClass (C110 , B98) ) meets ( EqClass (C112 , B98) )))
proof
let C119 being (a_partition of C92);
assume L802: C119 in C93;
L803: (ex B99 being set st (B99 in ( EqClass (C110 , C119) ) & B99 in ( EqClass (C112 , C119) ))) by L802 , L798;
thus L804: thesis by L803 , XBOOLE_0:3;
end;
L805: { ( EqClass (C112 , B100) ) where B100 is (a_partition of C92) : B100 in C93 } c= { ( EqClass (C110 , B101) ) where B101 is (a_partition of C92) : B101 in C93 }
proof
let C120 being set;
assume L806: C120 in { ( EqClass (C112 , B102) ) where B102 is (a_partition of C92) : B102 in C93 };
consider C121 being (a_partition of C92) such that L807: C121 in C93 and L808: C120 = ( EqClass (C112 , C121) ) by L806 , L719;
L809: C120 = ( EqClass (C110 , C121) ) by L801 , L807 , L808 , L709;
thus L810: thesis by L809 , L807;
end;
L811: { ( EqClass (C110 , B103) ) where B103 is (a_partition of C92) : B103 in C93 } c= { ( EqClass (C112 , B104) ) where B104 is (a_partition of C92) : B104 in C93 }
proof
let C122 being set;
assume L812: C122 in { ( EqClass (C110 , B105) ) where B105 is (a_partition of C92) : B105 in C93 };
consider C123 being (a_partition of C92) such that L813: C123 in C93 and L814: C122 = ( EqClass (C110 , C123) ) by L812 , L719;
L815: C122 = ( EqClass (C112 , C123) ) by L801 , L813 , L814 , L709;
thus L816: thesis by L815 , L813;
end;
thus L817: thesis by L811 , L771 , L773 , L805 , XBOOLE_0:def 10;
end;
thus L818: thesis by L783;
end;

end;
reconsider D36 = D30 as non  empty (a_partition of C92) by L749;
take D36;
L775: (for B106 being (Element of C92) holds ( EqClass (B106 , D36) ) = ( meet { ( EqClass (B106 , B107) ) where B107 is (a_partition of C92) : B107 in C93 } ))
proof
let C124 being (Element of C92);
L776:
now
let C125 being set;
assume L777: C125 in { ( EqClass (C124 , B108) ) where B108 is (a_partition of C92) : B108 in C93 };
L778: (ex B109 being (a_partition of C92) st (C125 = ( EqClass (C124 , B109) ) & B109 in C93)) by L777;
thus L779: C124 in C125 by L778 , L663;
end;
L780: { ( EqClass (C124 , B110) ) where B110 is (a_partition of C92) : B110 in C93 } is non  empty
proof
consider C126 being set such that L781: C126 in C93 by XBOOLE_0:def 1;
reconsider D37 = C126 as (a_partition of C92) by L781 , L696;
L782: ( EqClass (C124 , D37) ) in { ( EqClass (C124 , B111) ) where B111 is (a_partition of C92) : B111 in C93 } by L781;
thus L783: thesis by L782;
end;
L784: (( meet { ( EqClass (C124 , B112) ) where B112 is (a_partition of C92) : B112 in C93 } ) in D36 & C124 in ( meet { ( EqClass (C124 , B113) ) where B113 is (a_partition of C92) : B113 in C93 } )) by L780 , L776 , SETFAM_1:def 1;
thus L785: thesis by L784 , L663;
end;
thus L786: thesis by L775;
end;

end;
end;
theorem
L737: (for B114 being non  empty set holds (for B115 being (a_partition of B114) holds (for B116 being (Subset of B115) holds ( ( union B115 ) \ ( union B116 ) ) = ( union ( B115 \ B116 ) ))))
proof
let C127 being non  empty set;
let C128 being (a_partition of C127);
let C129 being (Subset of C128);
thus L738: ( ( union C128 ) \ ( union C129 ) ) c= ( union ( C128 \ C129 ) )
proof
let C130 being set;
assume L739: C130 in ( ( union C128 ) \ ( union C129 ) );
L740: C130 in ( union C128 ) by L739 , XBOOLE_0:def 5;
consider C131 being set such that L741: C130 in C131 and L742: C131 in C128 by L740 , TARSKI:def 4;
L743: (not C130 in ( union C129 )) by L739 , XBOOLE_0:def 5;
L744: (not C131 in C129) by L743 , L741 , TARSKI:def 4;
L745: C131 in ( C128 \ C129 ) by L744 , L742 , XBOOLE_0:def 5;
thus L746: thesis by L745 , L741 , TARSKI:def 4;
end;

thus L747: ( union ( C128 \ C129 ) ) c= ( ( union C128 ) \ ( union C129 ) )
proof
let C132 being set;
assume L748: C132 in ( union ( C128 \ C129 ) );
consider C133 being set such that L749: C132 in C133 and L750: C133 in ( C128 \ C129 ) by L748 , TARSKI:def 4;
L751: C133 in C128 by L750 , XBOOLE_0:def 5;
L752: (not C133 in C129) by L750 , XBOOLE_0:def 5;
L753:
now
let C134 being set;
assume L754: C134 in C129;
L755: C134 in C128 by L754;
L756: C133 misses C134 by L755 , L751 , L752 , L754 , L517;
thus L757: (not C132 in C134) by L756 , L749 , XBOOLE_0:3;
end;
L758:
now
assume L759: C132 in ( union C129 );
L760: (ex B117 being set st (C132 in B117 & B117 in C129)) by L759 , TARSKI:def 4;
thus L761: contradiction by L760 , L753;
end;
L762: C132 in ( union C128 ) by L749 , L751 , TARSKI:def 4;
thus L763: thesis by L762 , L758 , XBOOLE_0:def 5;
end;

end;
theorem
L748: (for B118 being non  empty set holds (for B119 being (Subset of B118) holds (for B120 being (a_partition of B118) holds (B119 in B120 implies ( union ( B120 \ { B119 } ) ) = ( B118 \ B119 )))))
proof
let C135 being non  empty set;
let C136 being (Subset of C135);
let C137 being (a_partition of C135);
assume L749: C136 in C137;
L750: { C136 } c= C137
proof
let C138 being set;
assume L751: C138 in { C136 };
thus L752: thesis by L751 , L749 , TARSKI:def 1;
end;
reconsider D38 = { C136 } as (Subset of C137) by L750;
thus L753: ( union ( C137 \ { C136 } ) ) = ( ( union C137 ) \ ( union D38 ) ) by L737
.= ( C135 \ ( union { C136 } ) ) by L517
.= ( C135 \ C136 ) by ZFMISC_1:25;
end;
theorem
L754: ( {} ) is (a_partition of ( {} ))
proof
reconsider D39 = ( {} ) as (Subset-Family of ( {} )) by XBOOLE_1:2;
L755: (( union D39 ) = ( {} ) & (for B121 being (Subset of ( {} )) holds (B121 in D39 implies (B121 <> ( {} ) & (for B122 being (Subset of ( {} )) holds (B122 in D39 implies (B121 = B122 or B121 misses B122)))))));
thus L756: thesis by L755 , L517;
end;
begin
theorem
L757: (for R27 being set holds (for R29 being set holds (for B123 being Function holds (R27 c= ( B123 " R29 ) implies ( B123 .: R27 ) c= R29))))
proof
let R27 being set;
let R29 being set;
let C139 being Function;
assume L758: R27 c= ( C139 " R29 );
L759: ( C139 .: R27 ) c= ( C139 .: ( C139 " R29 ) ) by L758 , RELAT_1:123;
L760: ( C139 .: ( C139 " R29 ) ) c= R29 by FUNCT_1:75;
thus L761: thesis by L760 , L759 , XBOOLE_1:1;
end;
theorem
L762: (for R24 being set holds (for R27 being set holds (for R28 being set holds (R24 c= [: R27 , R28 :] implies ( ( .: ( pr1 (R27 , R28) ) ) . R24 ) = ( ( pr1 (R27 , R28) ) .: R24 )))))
proof
let R24 being set;
let R27 being set;
let R28 being set;
assume L763: R24 c= [: R27 , R28 :];
L764: R24 c= ( dom ( pr1 (R27 , R28) ) ) by L763 , FUNCT_3:def 4;
thus L765: thesis by L764 , FUNCT_3:def 1;
end;
theorem
L766: (for R24 being set holds (for R27 being set holds (for R28 being set holds (R24 c= [: R27 , R28 :] implies ( ( .: ( pr2 (R27 , R28) ) ) . R24 ) = ( ( pr2 (R27 , R28) ) .: R24 )))))
proof
let R24 being set;
let R27 being set;
let R28 being set;
assume L767: R24 c= [: R27 , R28 :];
L768: R24 c= ( dom ( pr2 (R27 , R28) ) ) by L767 , FUNCT_3:def 5;
thus L769: thesis by L768 , FUNCT_3:def 1;
end;
theorem
L770: (for R27 being set holds (for R28 being set holds (for B124 being (Subset of R27) holds (for B125 being (Subset of R28) holds ([: B124 , B125 :] <> ( {} ) implies (( ( pr1 (R27 , R28) ) .: [: B124 , B125 :] ) = B124 & ( ( pr2 (R27 , R28) ) .: [: B124 , B125 :] ) = B125))))))
proof
let R27 being set;
let R28 being set;
let C140 being (Subset of R27);
let C141 being (Subset of R28);
assume L771: [: C140 , C141 :] <> ( {} );
L772: C140 <> ( {} ) by L771;
L773: C141 <> ( {} ) by L771;
L774: R27 <> ( {} ) by L772;
L775:
now
set D40 = the (Element of C141);
let C142 being set;
thus L776: (C142 in ( ( pr1 (R27 , R28) ) .: [: C140 , C141 :] ) implies C142 in C140)
proof
assume L777: C142 in ( ( pr1 (R27 , R28) ) .: [: C140 , C141 :] );
consider R25 being set such that L778: R25 in [: R27 , R28 :] and L779: (R25 in [: C140 , C141 :] & C142 = ( ( pr1 (R27 , R28) ) . R25 )) by L777 , FUNCT_2:64;
L780: ( R25 `2 ) in R28 by L778 , MCART_1:10;
L781: (( R25 `1 ) in C140 & C142 = ( ( pr1 (R27 , R28) ) . (( R25 `1 ) , ( R25 `2 )) )) by L779 , MCART_1:10 , MCART_1:21;
thus L782: thesis by L781 , L780 , FUNCT_3:def 4;
end;

assume L783: C142 in C140;
L784: D40 in R28 by L773 , TARSKI:def 3;
L785: C142 = ( ( pr1 (R27 , R28) ) . (C142 , D40) ) by L784 , L783 , FUNCT_3:def 4;
L786: [ C142 , D40 ] in [: C140 , C141 :] by L773 , L783 , ZFMISC_1:87;
thus L787: C142 in ( ( pr1 (R27 , R28) ) .: [: C140 , C141 :] ) by L786 , L774 , L785 , FUNCT_2:35;
end;
thus L788: ( ( pr1 (R27 , R28) ) .: [: C140 , C141 :] ) = C140 by L775 , TARSKI:1;
L789: R28 <> ( {} ) by L773;
L790:
now
set D41 = the (Element of C140);
let C143 being set;
thus L791: (C143 in ( ( pr2 (R27 , R28) ) .: [: C140 , C141 :] ) implies C143 in C141)
proof
assume L792: C143 in ( ( pr2 (R27 , R28) ) .: [: C140 , C141 :] );
consider R25 being set such that L793: R25 in [: R27 , R28 :] and L794: (R25 in [: C140 , C141 :] & C143 = ( ( pr2 (R27 , R28) ) . R25 )) by L792 , FUNCT_2:64;
L795: ( R25 `1 ) in R27 by L793 , MCART_1:10;
L796: (( R25 `2 ) in C141 & C143 = ( ( pr2 (R27 , R28) ) . (( R25 `1 ) , ( R25 `2 )) )) by L794 , MCART_1:10 , MCART_1:21;
thus L797: thesis by L796 , L795 , FUNCT_3:def 5;
end;

assume L798: C143 in C141;
L799: D41 in R27 by L772 , TARSKI:def 3;
L800: C143 = ( ( pr2 (R27 , R28) ) . (D41 , C143) ) by L799 , L798 , FUNCT_3:def 5;
L801: [ D41 , C143 ] in [: C140 , C141 :] by L772 , L798 , ZFMISC_1:87;
thus L802: C143 in ( ( pr2 (R27 , R28) ) .: [: C140 , C141 :] ) by L801 , L789 , L800 , FUNCT_2:35;
end;
thus L803: thesis by L790 , TARSKI:1;
end;
theorem
L804: (for R27 being set holds (for R28 being set holds (for B126 being (Subset of R27) holds (for B127 being (Subset of R28) holds ([: B126 , B127 :] <> ( {} ) implies (( ( .: ( pr1 (R27 , R28) ) ) . [: B126 , B127 :] ) = B126 & ( ( .: ( pr2 (R27 , R28) ) ) . [: B126 , B127 :] ) = B127))))))
proof
let R27 being set;
let R28 being set;
let C144 being (Subset of R27);
let C145 being (Subset of R28);
assume L805: [: C144 , C145 :] <> ( {} );
thus L806: ( ( .: ( pr1 (R27 , R28) ) ) . [: C144 , C145 :] ) = ( ( pr1 (R27 , R28) ) .: [: C144 , C145 :] ) by L762
.= C144 by L805 , L770;
thus L807: ( ( .: ( pr2 (R27 , R28) ) ) . [: C144 , C145 :] ) = ( ( pr2 (R27 , R28) ) .: [: C144 , C145 :] ) by L766
.= C145 by L805 , L770;
end;
theorem
L808: (for R27 being set holds (for R28 being set holds (for B128 being (Subset of [: R27 , R28 :]) holds (for B129 being (Subset-Family of [: R27 , R28 :]) holds ((for R24 being set holds (R24 in B129 implies (R24 c= B128 & (ex B130 being (Subset of R27) st (ex B131 being (Subset of R28) st R24 = [: B130 , B131 :]))))) implies [: ( union ( ( .: ( pr1 (R27 , R28) ) ) .: B129 ) ) , ( meet ( ( .: ( pr2 (R27 , R28) ) ) .: B129 ) ) :] c= B128)))))
proof
let R27 being set;
let R28 being set;
let C146 being (Subset of [: R27 , R28 :]);
let C147 being (Subset-Family of [: R27 , R28 :]);
assume that
L809: (for R24 being set holds (R24 in C147 implies (R24 c= C146 & (ex B132 being (Subset of R27) st (ex B133 being (Subset of R28) st R24 = [: B132 , B133 :])))));
let R25 being set;
let R26 being set;
assume L810: [ R25 , R26 ] in [: ( union ( ( .: ( pr1 (R27 , R28) ) ) .: C147 ) ) , ( meet ( ( .: ( pr2 (R27 , R28) ) ) .: C147 ) ) :];
L811: R26 in ( meet ( ( .: ( pr2 (R27 , R28) ) ) .: C147 ) ) by L810 , ZFMISC_1:87;
L812: R25 in ( union ( ( .: ( pr1 (R27 , R28) ) ) .: C147 ) ) by L810 , ZFMISC_1:87;
consider C148 being set such that L813: R25 in C148 and L814: C148 in ( ( .: ( pr1 (R27 , R28) ) ) .: C147 ) by L812 , TARSKI:def 4;
consider C149 being set such that L815: C149 in ( dom ( .: ( pr1 (R27 , R28) ) ) ) and L816: C149 in C147 and L817: C148 = ( ( .: ( pr1 (R27 , R28) ) ) . C149 ) by L814 , FUNCT_1:def 6;
consider C150 being (Subset of R27), C151 being (Subset of R28) such that L818: C149 = [: C150 , C151 :] by L809 , L816;
L819: C149 <> ( {} ) by L813 , L817 , FUNCT_3:8;
L820: C149 in ( bool [: R27 , R28 :] ) by L816;
L821: C149 in ( bool ( dom ( pr2 (R27 , R28) ) ) ) by L820 , FUNCT_3:def 5;
L822: C149 in ( dom ( .: ( pr2 (R27 , R28) ) ) ) by L821 , FUNCT_3:def 1;
L823: ( ( .: ( pr2 (R27 , R28) ) ) . C149 ) in ( ( .: ( pr2 (R27 , R28) ) ) .: C147 ) by L822 , L816 , FUNCT_1:def 6;
L824: C151 in ( ( .: ( pr2 (R27 , R28) ) ) .: C147 ) by L823 , L818 , L819 , L804;
L825: R26 in C151 by L824 , L811 , SETFAM_1:def 1;
L826: R25 in C150 by L813 , L817 , L818 , L819 , L804;
L827: [ R25 , R26 ] in C149 by L826 , L818 , L825 , ZFMISC_1:87;
L828: C149 c= C146 by L809 , L816;
thus L829: thesis by L828 , L827;
end;
theorem
L830: (for R27 being set holds (for R28 being set holds (for B134 being (Subset of [: R27 , R28 :]) holds (for B135 being (Subset-Family of [: R27 , R28 :]) holds ((for R24 being set holds (R24 in B135 implies (R24 c= B134 & (ex B136 being (Subset of R27) st (ex B137 being (Subset of R28) st R24 = [: B136 , B137 :]))))) implies [: ( meet ( ( .: ( pr1 (R27 , R28) ) ) .: B135 ) ) , ( union ( ( .: ( pr2 (R27 , R28) ) ) .: B135 ) ) :] c= B134)))))
proof
let R27 being set;
let R28 being set;
let C152 being (Subset of [: R27 , R28 :]);
let C153 being (Subset-Family of [: R27 , R28 :]);
assume that
L831: (for R24 being set holds (R24 in C153 implies (R24 c= C152 & (ex B138 being (Subset of R27) st (ex B139 being (Subset of R28) st R24 = [: B138 , B139 :])))));
let R25 being set;
let R26 being set;
assume L832: [ R25 , R26 ] in [: ( meet ( ( .: ( pr1 (R27 , R28) ) ) .: C153 ) ) , ( union ( ( .: ( pr2 (R27 , R28) ) ) .: C153 ) ) :];
L833: R25 in ( meet ( ( .: ( pr1 (R27 , R28) ) ) .: C153 ) ) by L832 , ZFMISC_1:87;
L834: R26 in ( union ( ( .: ( pr2 (R27 , R28) ) ) .: C153 ) ) by L832 , ZFMISC_1:87;
consider C154 being set such that L835: R26 in C154 and L836: C154 in ( ( .: ( pr2 (R27 , R28) ) ) .: C153 ) by L834 , TARSKI:def 4;
consider C155 being set such that L837: C155 in ( dom ( .: ( pr2 (R27 , R28) ) ) ) and L838: C155 in C153 and L839: C154 = ( ( .: ( pr2 (R27 , R28) ) ) . C155 ) by L836 , FUNCT_1:def 6;
consider C156 being (Subset of R27), C157 being (Subset of R28) such that L840: C155 = [: C156 , C157 :] by L831 , L838;
L841: C155 <> ( {} ) by L835 , L839 , FUNCT_3:8;
L842: C155 in ( bool [: R27 , R28 :] ) by L838;
L843: C155 in ( bool ( dom ( pr1 (R27 , R28) ) ) ) by L842 , FUNCT_3:def 4;
L844: C155 in ( dom ( .: ( pr1 (R27 , R28) ) ) ) by L843 , FUNCT_3:def 1;
L845: ( ( .: ( pr1 (R27 , R28) ) ) . C155 ) in ( ( .: ( pr1 (R27 , R28) ) ) .: C153 ) by L844 , L838 , FUNCT_1:def 6;
L846: C156 in ( ( .: ( pr1 (R27 , R28) ) ) .: C153 ) by L845 , L840 , L841 , L804;
L847: R25 in C156 by L846 , L833 , SETFAM_1:def 1;
L848: R26 in C157 by L835 , L839 , L840 , L841 , L804;
L849: [ R25 , R26 ] in C155 by L848 , L840 , L847 , ZFMISC_1:87;
L850: C155 c= C152 by L831 , L838;
thus L851: thesis by L850 , L849;
end;
theorem
L852: (for B140 being set holds (for B141 being non  empty set holds (for B142 being (Function of B140 , B141) holds (for B143 being (Subset-Family of B140) holds ( union ( ( .: B142 ) .: B143 ) ) = ( B142 .: ( union B143 ) )))))
proof
let C158 being set;
let C159 being non  empty set;
let C160 being (Function of C158 , C159);
let C161 being (Subset-Family of C158);
L853: ( dom C160 ) = C158 by FUNCT_2:def 1;
thus L854: thesis by L853 , FUNCT_3:14;
end;
theorem
L855: (for B144 being set holds (for B145 being (Subset-Family of B144) holds ( union ( union B145 ) ) = ( union { ( union B146 ) where B146 is (Subset of B144) : B146 in B145 } )))
proof
let C162 being set;
let C163 being (Subset-Family of C162);
thus L856: ( union ( union C163 ) ) c= ( union { ( union B147 ) where B147 is (Subset of C162) : B147 in C163 } )
proof
let R24 being set;
assume L857: R24 in ( union ( union C163 ) );
consider C164 being set such that L858: R24 in C164 and L859: C164 in ( union C163 ) by L857 , TARSKI:def 4;
consider C165 being set such that L860: C164 in C165 and L861: C165 in C163 by L859 , TARSKI:def 4;
L862: ( union C165 ) in { ( union B148 ) where B148 is (Subset of C162) : B148 in C163 } by L861;
L863: R24 in ( union C165 ) by L858 , L860 , TARSKI:def 4;
thus L864: thesis by L863 , L862 , TARSKI:def 4;
end;

let R24 being set;
assume L865: R24 in ( union { ( union B149 ) where B149 is (Subset of C162) : B149 in C163 } );
consider C166 being set such that L866: R24 in C166 and L867: C166 in { ( union B150 ) where B150 is (Subset of C162) : B150 in C163 } by L865 , TARSKI:def 4;
consider C167 being (Subset of C162) such that L868: C166 = ( union C167 ) and L869: C167 in C163 by L867;
consider C168 being set such that L870: R24 in C168 and L871: C168 in C167 by L866 , L868 , TARSKI:def 4;
L872: C168 in ( union C163 ) by L869 , L871 , TARSKI:def 4;
thus L873: thesis by L872 , L870 , TARSKI:def 4;
end;
theorem
L874: (for B151 being set holds (for B152 being (Subset-Family of B151) holds (( union B152 ) = B151 implies (for B153 being (Subset of B152) holds (for B154 being (Subset of B151) holds (B154 = ( union B153 ) implies ( B154 ` ) c= ( union ( B153 ` ) )))))))
proof
let C169 being set;
let C170 being (Subset-Family of C169);
assume that
L875: ( union C170 ) = C169;
let C171 being (Subset of C170);
let C172 being (Subset of C169);
assume that
L876: C172 = ( union C171 );
let R24 being set;
assume L877: R24 in ( C172 ` );
consider R25 being set such that L878: R24 in R25 and L879: R25 in C170 by L877 , L875 , TARSKI:def 4;
L880: (not R24 in C172) by L877 , XBOOLE_0:def 5;
L881: (not R25 in C171) by L880 , L876 , L878 , TARSKI:def 4;
L882: R25 in ( C171 ` ) by L881 , L879 , SUBSET_1:29;
thus L883: thesis by L882 , L878 , TARSKI:def 4;
end;
theorem
L884: (for R30 being non  empty set holds (for R31 being non  empty set holds (for R32 being non  empty set holds (for B155 being (Function of R30 , R31) holds (for B156 being (Function of R30 , R32) holds ((for B157 , B158 being (Element of R30) holds (( B155 . B157 ) = ( B155 . B158 ) implies ( B156 . B157 ) = ( B156 . B158 ))) implies (ex B159 being (Function of R31 , R32) st ( B159 * B155 ) = B156)))))))
proof
let R30 being non  empty set;
let R31 being non  empty set;
let R32 being non  empty set;
let C173 being (Function of R30 , R31);
let C174 being (Function of R30 , R32);
defpred S8[ set , set ] means ((not (ex B160 being (Element of R30) st $1 = ( C173 . B160 ))) or (for B161 being (Element of R30) holds ($1 = ( C173 . B161 ) implies $2 = ( C174 . B161 ))));
assume L885: (for B162 , B163 being (Element of R30) holds (( C173 . B162 ) = ( C173 . B163 ) implies ( C174 . B162 ) = ( C174 . B163 )));
L886:
now
let R24 being set;
assume that
L887: R24 in R31;
L888:
now
per cases ;
case L889: (ex B164 being (Element of R30) st R24 = ( C173 . B164 ));
consider C175 being (Element of R30) such that L890: R24 = ( C173 . C175 ) by L889;
take D42 = ( C174 . C175 );
thus L891: (D42 in R32 & ((ex B165 being (Element of R30) st R24 = ( C173 . B165 )) implies (ex B166 being (Element of R30) st (R24 = ( C173 . B166 ) & D42 = ( C174 . B166 ))))) by L890;
end;
case L892: (not (ex B167 being (Element of R30) st R24 = ( C173 . B167 )));
set D43 = the (Element of R32);
L893: D43 in R32;
thus L894: (ex R25 being set st (R25 in R32 & ((ex B168 being (Element of R30) st R24 = ( C173 . B168 )) implies (ex B169 being (Element of R30) st (R24 = ( C173 . B169 ) & R25 = ( C174 . B169 )))))) by L893 , L892;
end;
end;
consider R25 being set such that L896: R25 in R32 and L897: ((ex B170 being (Element of R30) st R24 = ( C173 . B170 )) implies (ex B171 being (Element of R30) st (R24 = ( C173 . B171 ) & R25 = ( C174 . B171 )))) by L888;
take D44 = R25;
thus L898: D44 in R32 by L896;
thus L899: S8[ R24 , D44 ] by L885 , L897;
end;
consider C176 being (Function of R31 , R32) such that L900: (for R24 being set holds (R24 in R31 implies S8[ R24 , ( C176 . R24 ) ])) from FUNCT_2:sch 1(L886);
take C176;
L901:
now
let C177 being (Element of R30);
thus L902: ( ( C176 * C173 ) . C177 ) = ( C176 . ( C173 . C177 ) ) by FUNCT_2:15
.= ( C174 . C177 ) by L900;
end;
thus L903: thesis by L901 , FUNCT_2:63;
end;
theorem
L904: (for R30 being non  empty set holds (for R31 being non  empty set holds (for R32 being non  empty set holds (for B172 being (Element of R31) holds (for B173 being (Function of R30 , R31) holds (for B174 being (Function of R31 , R32) holds ( B173 " { B172 } ) c= ( ( B174 * B173 ) " { ( B174 . B172 ) } )))))))
proof
let R30 being non  empty set;
let R31 being non  empty set;
let R32 being non  empty set;
let C178 being (Element of R31);
let C179 being (Function of R30 , R31);
let C180 being (Function of R31 , R32);
L905: ( C179 " { C178 } ) c= ( ( C180 * C179 ) " ( Im (C180 , C178) ) ) by FUNCT_2:44;
thus L906: thesis by L905 , SETWISEO:8;
end;
theorem
L907: (for R30 being non  empty set holds (for R31 being non  empty set holds (for R32 being non  empty set holds (for B175 being (Function of R30 , R31) holds (for B176 being (Element of R30) holds (for B177 being (Element of R32) holds ( [: B175 , ( id R32 ) :] . (B176 , B177) ) = [ ( B175 . B176 ) , B177 ]))))))
proof
let R30 being non  empty set;
let R31 being non  empty set;
let R32 being non  empty set;
let C181 being (Function of R30 , R31);
let C182 being (Element of R30);
let C183 being (Element of R32);
thus L908: ( [: C181 , ( id R32 ) :] . (C182 , C183) ) = [ ( C181 . C182 ) , ( ( id R32 ) . C183 ) ] by FUNCT_3:75
.= [ ( C181 . C182 ) , C183 ] by FUNCT_1:18;
end;
theorem
L909: (for R30 being non  empty set holds (for R31 being non  empty set holds (for R32 being non  empty set holds (for B178 being (Function of R30 , R31) holds (for B179 being (Subset of R30) holds (for B180 being (Subset of R32) holds ( [: B178 , ( id R32 ) :] .: [: B179 , B180 :] ) = [: ( B178 .: B179 ) , B180 :]))))))
proof
let R30 being non  empty set;
let R31 being non  empty set;
let R32 being non  empty set;
let C184 being (Function of R30 , R31);
let C185 being (Subset of R30);
let C186 being (Subset of R32);
thus L910: ( [: C184 , ( id R32 ) :] .: [: C185 , C186 :] ) = [: ( C184 .: C185 ) , ( ( id R32 ) .: C186 ) :] by FUNCT_3:72
.= [: ( C184 .: C185 ) , C186 :] by FUNCT_1:92;
end;
theorem
L911: (for R30 being non  empty set holds (for R31 being non  empty set holds (for R32 being non  empty set holds (for B181 being (Function of R30 , R31) holds (for B182 being (Element of R31) holds (for B183 being (Element of R32) holds ( [: B181 , ( id R32 ) :] " { [ B182 , B183 ] } ) = [: ( B181 " { B182 } ) , { B183 } :]))))))
proof
let R30 being non  empty set;
let R31 being non  empty set;
let R32 being non  empty set;
let C187 being (Function of R30 , R31);
let C188 being (Element of R31);
let C189 being (Element of R32);
thus L912: ( [: C187 , ( id R32 ) :] " { [ C188 , C189 ] } ) = ( [: C187 , ( id R32 ) :] " [: { C188 } , { C189 } :] ) by ZFMISC_1:29
.= [: ( C187 " { C188 } ) , ( ( id R32 ) " { C189 } ) :] by FUNCT_3:73
.= [: ( C187 " { C188 } ) , { C189 } :] by FUNCT_2:94;
end;
theorem
L913: (for R30 being non  empty set holds (for B184 being (Subset-Family of R30) holds (for B185 being (Subset of B184) holds ( union B185 ) is (Subset of R30))))
proof
let R30 being non  empty set;
let C190 being (Subset-Family of R30);
let C191 being (Subset of C190);
L914: ( union C191 ) c= R30
proof
let R24 being set;
assume L915: R24 in ( union C191 );
L916: (ex R25 being set st (R24 in R25 & R25 in C191)) by L915 , TARSKI:def 4;
L917: R24 in ( union C190 ) by L916 , TARSKI:def 4;
thus L918: thesis by L917;
end;
thus L919: thesis by L914;
end;
theorem
L920: (for B186 being set holds (for B187 being (a_partition of B186) holds (for B188 , B189 being (Subset of B187) holds ( union ( B188 /\ B189 ) ) = ( ( union B188 ) /\ ( union B189 ) ))))
proof
let C192 being set;
let C193 being (a_partition of C192);
let C194 , C195 being (Subset of C193);
thus L921: ( union ( C194 /\ C195 ) ) c= ( ( union C194 ) /\ ( union C195 ) ) by ZFMISC_1:79;
let R24 being set;
assume L922: R24 in ( ( union C194 ) /\ ( union C195 ) );
L923: R24 in ( union C194 ) by L922 , XBOOLE_0:def 4;
consider C196 being set such that L924: R24 in C196 and L925: C196 in C194 by L923 , TARSKI:def 4;
L926: C196 in C193 by L925;
L927: R24 in ( union C195 ) by L922 , XBOOLE_0:def 4;
consider C197 being set such that L928: R24 in C197 and L929: C197 in C195 by L927 , TARSKI:def 4;
L930: C197 in C193 by L929;
L931: (not C196 misses C197) by L924 , L928 , XBOOLE_0:3;
L932: C196 = C197 by L931 , L926 , L930 , L517;
L933: C196 in ( C194 /\ C195 ) by L932 , L925 , L929 , XBOOLE_0:def 4;
thus L934: thesis by L933 , L924 , TARSKI:def 4;
end;
theorem
L935: (for R30 being non  empty set holds (for B190 being (a_partition of R30) holds (for B191 being (Subset of B190) holds (for B192 being (Subset of R30) holds (B192 = ( union B191 ) implies ( B192 ` ) = ( union ( B191 ` ) ))))))
proof
let R30 being non  empty set;
let C198 being (a_partition of R30);
let C199 being (Subset of C198);
let C200 being (Subset of R30);
assume L936: C200 = ( union C199 );
L937: ( union C198 ) = R30 by L517;
thus L938: ( C200 ` ) c= ( union ( C199 ` ) ) by L937 , L936 , L874;
let R24 being set;
assume L939: R24 in ( union ( C199 ` ) );
consider R25 being set such that L940: R24 in R25 and L941: R25 in ( C199 ` ) by L939 , TARSKI:def 4;
L942: R25 in C198 by L941;
assume L943: (not R24 in ( C200 ` ));
L944: R24 in C200 by L943 , L940 , L942 , SUBSET_1:29;
consider C201 being set such that L945: R24 in C201 and L946: C201 in C199 by L944 , L936 , TARSKI:def 4;
L947: C201 in C198 by L946;
L948: (not R25 misses C201) by L940 , L945 , XBOOLE_0:3;
L949: R25 = C201 by L948 , L942 , L947 , L517;
thus L950: contradiction by L949 , L941 , L946 , XBOOLE_0:def 5;
end;
theorem
L951: (for R30 being non  empty set holds (for B193 being (Equivalence_Relation of R30) holds ( Class B193 ) is non  empty));
registration
let C202 being non  empty set;
cluster non  empty for (a_partition of C202);
existence
proof
reconsider D45 = ( Class ( nabla C202 ) ) as (a_partition of C202);
take D45;
thus L952: thesis;
end;
end;
definition
let R30 being non  empty set;
let C203 being non  empty (a_partition of R30);
func proj C203 -> (Function of R30 , C203) means 
:L954: (for B194 being (Element of R30) holds B194 in ( it . B194 ));
existence
proof
defpred S9[ set , set ] means $1 in $2;
L955:
now
L956: ( union C203 ) = R30 by L517;
let R24 being set;
assume L957: R24 in R30;
L958: (ex R25 being set st (R24 in R25 & R25 in C203)) by L957 , L956 , TARSKI:def 4;
thus L959: (ex R25 being set st (R25 in C203 & S9[ R24 , R25 ])) by L958;
end;
consider C204 being (Function of R30 , C203) such that L960: (for R24 being set holds (R24 in R30 implies S9[ R24 , ( C204 . R24 ) ])) from FUNCT_2:sch 1(L955);
take C204;
let C205 being (Element of R30);
thus L961: thesis by L960;
end;
correctness
proof
let C206 , C207 being (Function of R30 , C203);
assume that
L962: ((for B195 being (Element of R30) holds B195 in ( C206 . B195 )) & (for B196 being (Element of R30) holds B196 in ( C207 . B196 )));
L963:
now
let C208 being (Element of R30);
L964: (C208 in ( C206 . C208 ) & C208 in ( C207 . C208 )) by L962;
L965: (not ( C206 . C208 ) misses ( C207 . C208 )) by L964 , XBOOLE_0:3;
L966: (( C206 . C208 ) is (Subset of R30) & ( C207 . C208 ) is (Subset of R30)) by TARSKI:def 3;
thus L967: ( C206 . C208 ) = ( C207 . C208 ) by L966 , L965 , L517;
end;
thus L968: C206 = C207 by L963 , FUNCT_2:63;
end;
end;
theorem
L970: (for R30 being non  empty set holds (for B197 being non  empty (a_partition of R30) holds (for B198 being (Element of R30) holds (for B199 being (Element of B197) holds (B198 in B199 implies B199 = ( ( proj B197 ) . B198 ))))))
proof
let R30 being non  empty set;
let C209 being non  empty (a_partition of R30);
let C210 being (Element of R30);
let C211 being (Element of C209);
assume that
L971: C210 in C211;
L972: C210 in ( ( proj C209 ) . C210 ) by L954;
L973: (( ( proj C209 ) . C210 ) is (Subset of R30) & (not ( ( proj C209 ) . C210 ) misses C211)) by L972 , L971 , TARSKI:def 3 , XBOOLE_0:3;
thus L974: thesis by L973 , L517;
end;
theorem
L975: (for R30 being non  empty set holds (for B200 being non  empty (a_partition of R30) holds (for B201 being (Element of B200) holds B201 = ( ( proj B200 ) " { B201 } ))))
proof
let R30 being non  empty set;
let C212 being non  empty (a_partition of R30);
let C213 being (Element of C212);
thus L976: C213 c= ( ( proj C212 ) " { C213 } )
proof
let R24 being set;
assume L977: R24 in C213;
L978: ( ( proj C212 ) . R24 ) = C213 by L977 , L970;
L979: ( ( proj C212 ) . R24 ) in { C213 } by L978 , TARSKI:def 1;
thus L980: thesis by L979 , L977 , FUNCT_2:38;
end;

let R24 being set;
assume L981: R24 in ( ( proj C212 ) " { C213 } );
L982: ( ( proj C212 ) . R24 ) in { C213 } by L981 , FUNCT_1:def 7;
L983: ( ( proj C212 ) . R24 ) = C213 by L982 , TARSKI:def 1;
thus L984: R24 in C213 by L983 , L981 , L954;
end;
theorem
L985: (for R30 being non  empty set holds (for B202 being non  empty (a_partition of R30) holds (for B203 being (Subset of B202) holds ( ( proj B202 ) " B203 ) = ( union B203 ))))
proof
let R30 being non  empty set;
let C214 being non  empty (a_partition of R30);
let C215 being (Subset of C214);
thus L986: ( ( proj C214 ) " C215 ) c= ( union C215 )
proof
let R24 being set;
assume L987: R24 in ( ( proj C214 ) " C215 );
L988: (( ( proj C214 ) . R24 ) in C215 & R24 in ( ( proj C214 ) . R24 )) by L987 , L954 , FUNCT_2:38;
thus L989: thesis by L988 , TARSKI:def 4;
end;

let R24 being set;
assume L990: R24 in ( union C215 );
consider R25 being set such that L991: R24 in R25 and L992: R25 in C215 by L990 , TARSKI:def 4;
L993: R25 in C214 by L992;
L994: ( ( proj C214 ) . R24 ) = R25 by L993 , L991 , L970;
thus L995: thesis by L994 , L991 , L992 , L993 , FUNCT_2:38;
end;
theorem
L996: (for R30 being non  empty set holds (for B204 being non  empty (a_partition of R30) holds (for B205 being (Element of B204) holds (ex B206 being (Element of R30) st ( ( proj B204 ) . B206 ) = B205))))
proof
let R30 being non  empty set;
let C216 being non  empty (a_partition of R30);
let C217 being (Element of C216);
reconsider D46 = C217 as (Subset of R30);
L997: D46 <> ( {} ) by L517;
consider C218 being (Element of R30) such that L998: C218 in D46 by L997 , SUBSET_1:4;
take C218;
thus L999: thesis by L998 , L970;
end;
theorem
L1000: (for R30 being non  empty set holds (for B207 being non  empty (a_partition of R30) holds (for B208 being (Subset of R30) holds ((for B209 being (Subset of R30) holds ((B209 in B207 & B209 meets B208) implies B209 c= B208)) implies B208 = ( ( proj B207 ) " ( ( proj B207 ) .: B208 ) )))))
proof
let R30 being non  empty set;
let C219 being non  empty (a_partition of R30);
let C220 being (Subset of R30);
assume that
L1001: (for B210 being (Subset of R30) holds ((B210 in C219 & B210 meets C220) implies B210 c= C220));
L1002: C220 c= R30;
L1003: C220 c= ( dom ( proj C219 ) ) by L1002 , FUNCT_2:def 1;
thus L1004: C220 c= ( ( proj C219 ) " ( ( proj C219 ) .: C220 ) ) by L1003 , FUNCT_1:76;
let R24 being set;
assume L1005: R24 in ( ( proj C219 ) " ( ( proj C219 ) .: C220 ) );
reconsider D47 = R24 as (Element of R30) by L1005;
L1006: ( ( proj C219 ) . R24 ) in ( ( proj C219 ) .: C220 ) by L1005 , FUNCT_1:def 7;
consider C221 being (Element of R30) such that L1007: C221 in C220 and L1008: ( ( proj C219 ) . D47 ) = ( ( proj C219 ) . C221 ) by L1006 , FUNCT_2:65;
reconsider D48 = ( ( proj C219 ) . C221 ) as (Subset of R30) by TARSKI:def 3;
L1009: C221 in ( ( proj C219 ) . C221 ) by L954;
L1010: D48 meets C220 by L1009 , L1007 , XBOOLE_0:3;
L1011: D48 c= C220 by L1010 , L1001;
L1012: D47 in D48 by L1008 , L954;
thus L1013: thesis by L1012 , L1011;
end;
theorem
L1014: (for B211 being set holds (for B212 being (a_partition of B211) holds (for B213 , B214 , B215 being set holds ((B213 in B214 & B214 in B212 & B213 in B215 & B215 in B212) implies B214 = B215))))
proof
let C222 being set;
let C223 being (a_partition of C222);
let C224 , C225 , C226 being set;
assume that
L1015: C224 in C225
and
L1016: C225 in C223
and
L1017: C224 in C226
and
L1018: C226 in C223;
L1019: C225 meets C226 by L1015 , L1017 , XBOOLE_0:3;
thus L1020: thesis by L1019 , L1016 , L1018 , L517;
end;
