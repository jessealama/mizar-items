:: Introduction to Theory of Rearrangment
::  by Yuji Sakai and Jaros{\l}aw Kotowicz
::
:: Received May 22, 1993
:: Copyright (c) 1993-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, REAL_1, XBOOLE_0, MEMBERED, PARTFUN1,
      VALUED_1, FUNCT_1, RELAT_1, FINSEQ_1, NAT_1, XXREAL_0, FINSET_1, CARD_1,
      ARYTM_1, TARSKI, ARYTM_3, ZFMISC_1, ORDINAL4, RFINSEQ, RFUNCT_3,
      CLASSES1, CARD_3, PBOOLE, FINSEQ_2, FUNCT_3, VALUED_0, REARRAN1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, RELAT_1, MEMBERED, FUNCT_1,
      RELSET_1, CARD_1, FINSET_1, NUMBERS, XXREAL_0, XCMPLX_0, REAL_1,
      ORDINAL1, NAT_1, PARTFUN1, FINSEQ_1,
      FINSEQ_2, VALUED_1, SEQ_1, RFUNCT_1, FINSEQOP,
      RVSUM_1, CLASSES1, RFINSEQ, RFUNCT_3;
 constructors REAL_1, NAT_1, FINSEQOP, RVSUM_1, RFINSEQ, RFUNCT_3, SEQ_1,
      CLASSES1, RELSET_1, BINOP_2;
 registrations SUBSET_1, RELSET_1, PARTFUN1, FINSET_1, NUMBERS, XXREAL_0,
      XREAL_0, NAT_1, MEMBERED, FINSEQ_1, VALUED_0, CARD_1, FINSEQ_2, FUNCT_1,
      INT_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, XBOOLE_0, FINSEQ_2, RELAT_1;
 theorems FINSEQ_1, NAT_1, FUNCT_1, FINSEQ_2, TARSKI, CARD_2, CARD_1, PARTFUN1,
      FINSET_1, FINSEQ_3, RFUNCT_1, RVSUM_1, ZFMISC_1, RFINSEQ, RFUNCT_3,
      RELAT_1, XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, FUNCOP_1, ORDINAL1,
      VALUED_1, CLASSES1, INT_1;
 schemes NAT_1, FINSEQ_1;

begin
definition
let C1 being non  empty set;
let C2 being  real-membered set;
let C3 being (PartFunc of C1 , C2);
let C4 being Real;
redefine func C4 (#) C3 -> (Element of ( PFuncs (C1 , ( REAL )) ));

coherence
proof
reconsider D1 = C3 as (PartFunc of C1 , C2);
L1: ( C4 (#) D1 ) is (PartFunc of C1 , ( REAL ));
thus L2: thesis by L1 , PARTFUN1:45;
end;
end;
L4: (for B1 being Function holds (for B2 being set holds ((not B2 in ( rng B1 )) implies ( B1 " { B2 } ) = ( {} ))))
proof
let C5 being Function;
let C6 being set;
assume L5: (not C6 in ( rng C5 ));
L6: ( rng C5 ) misses { C6 }
proof
set D2 = the (Element of ( ( rng C5 ) /\ { C6 } ));
assume L7: ( ( rng C5 ) /\ { C6 } ) <> ( {} );
L8: (D2 in ( rng C5 ) & D2 in { C6 }) by L7 , XBOOLE_0:def 4;
thus L9: contradiction by L8 , L5 , TARSKI:def 1;
end;
thus L10: thesis by L6 , RELAT_1:138;
end;
definition
let C7 being FinSequence;
attr C7 is  terms've_same_card_as_number
means
:L11: (for B3 being Nat holds ((1 <= B3 & B3 <= ( len C7 )) implies (for B4 being  finite set holds (B4 = ( C7 . B3 ) implies ( card B4 ) = B3))));
attr C7 is  ascending
means
:L12: (for B5 being Nat holds ((1 <= B5 & B5 <= ( ( len C7 ) - 1 )) implies ( C7 . B5 ) c= ( C7 . ( B5 + 1 ) )));
end;
L14: (for B6 being non  empty  finite set holds (for B7 being (FinSequence of ( bool B6 )) holds (for B8 being (Element of ( NAT )) holds ((1 <= B8 & B8 <= ( len B7 )) implies ( B7 . B8 ) is  finite))))
proof
let C8 being non  empty  finite set;
let C9 being (FinSequence of ( bool C8 ));
let C10 being (Element of ( NAT ));
assume L15: (1 <= C10 & C10 <= ( len C9 ));
L16: C10 in ( dom C9 ) by L15 , FINSEQ_3:25;
L17: ( C9 . C10 ) in ( bool C8 ) by L16 , FINSEQ_2:11;
thus L18: thesis by L17;
end;
L19: (for B9 being non  empty  finite set holds (for B10 being (FinSequence of ( bool B9 )) holds ((( len B10 ) = ( card B9 ) & B10 is  terms've_same_card_as_number) implies (for B11 being  finite set holds (B11 = ( B10 . ( len B10 ) ) implies B11 = B9)))))
proof
let C11 being non  empty  finite set;
let C12 being (FinSequence of ( bool C11 ));
assume that
L20: ( len C12 ) = ( card C11 )
and
L21: C12 is  terms've_same_card_as_number;
L22: ( ( 0 ) + 1 ) <= ( len C12 ) by L20 , NAT_1:13;
L23: ( len C12 ) in ( dom C12 ) by L22 , FINSEQ_3:25;
L24: ( C12 . ( len C12 ) ) in ( bool C11 ) by L23 , FINSEQ_2:11;
let C13 being  finite set;
assume that
L25: C13 = ( C12 . ( len C12 ) );
assume L26: C13 <> C11;
L27: C13 c< C11 by L26 , L25 , L24 , XBOOLE_0:def 8;
L28: ( card C13 ) = ( card C11 ) by L20 , L21 , L25 , L22 , L11;
thus L29: contradiction by L28 , L27 , CARD_2:48;
end;
L30: (for B12 being non  empty  finite set holds (ex B13 being (FinSequence of ( bool B12 )) st (( len B13 ) = ( card B12 ) & B13 is  ascending & B13 is  terms've_same_card_as_number)))
proof
let C14 being non  empty  finite set;
defpred S1[ (Element of ( NAT )) ] means (for B14 being non  empty  finite set holds (( card B14 ) = $1 implies (ex B15 being (FinSequence of ( bool B14 )) st (( len B15 ) = ( card B14 ) & B15 is  ascending & B15 is  terms've_same_card_as_number))));
L31: (for R1 being (Element of ( NAT )) holds (S1[ R1 ] implies S1[ ( R1 + 1 ) ]))
proof
let R1 being (Element of ( NAT ));
assume L32: S1[ R1 ];
let C15 being non  empty  finite set;
assume L33: ( card C15 ) = ( R1 + 1 );
set D3 = the (Element of C15);
set D4 = ( C15 \ { D3 } );
L34: { D3 } c= C15 by ZFMISC_1:31;
L35: ( card D4 ) = ( ( card C15 ) - ( card { D3 } ) ) by L34 , CARD_2:44
.= ( ( R1 + 1 ) - 1 ) by L33 , CARD_1:30
.= R1;
L36:
now
per cases ;
case L37: R1 = ( 0 );
set D5 = <* C15 *>;
L38: ( len D5 ) = 1 by FINSEQ_1:39;
L39: ( rng D5 ) = { C15 } by FINSEQ_1:39;
L40: ( rng D5 ) c= ( bool C15 )
proof
let C16 being set;
assume L41: C16 in ( rng D5 );
L42: C16 = C15 by L41 , L39 , TARSKI:def 1;
thus L43: thesis by L42 , ZFMISC_1:def 1;
end;
reconsider D6 = D5 as (FinSequence of ( bool C15 )) by L40 , FINSEQ_1:def 4;
take D7 = D6;
thus L44: ( card C15 ) = ( len D7 ) by L33 , L37 , FINSEQ_1:40;
thus L45: D7 is  ascending
proof
let C17 being Nat;
assume L46: (1 <= C17 & C17 <= ( ( len D7 ) - 1 ));
thus L47: thesis by L46 , L38 , XXREAL_0:2;
end;

thus L48: D7 is  terms've_same_card_as_number
proof
let C18 being Nat;
assume L49: (1 <= C18 & C18 <= ( len D7 ));
L50: C18 = 1 by L49 , L38 , XXREAL_0:1;
let C19 being  finite set;
assume L51: C19 = ( D7 . C18 );
thus L52: thesis by L51 , L33 , L37 , L50 , FINSEQ_1:40;
end;

end;
case L49: R1 <> ( 0 );
reconsider D8 = D4 as non  empty  finite set by L49 , L35;
L50: C15 in ( bool C15 ) by ZFMISC_1:def 1;
L51: { C15 } c= ( bool C15 ) by L50 , ZFMISC_1:31;
consider C20 being (FinSequence of ( bool D8 )) such that L52: ( len C20 ) = ( card D8 ) and L53: C20 is  ascending and L54: C20 is  terms've_same_card_as_number by L32 , L35;
set D9 = ( C20 ^ <* C15 *> );
L55: (( rng <* C15 *> ) = { C15 } & ( rng D9 ) = ( ( rng C20 ) \/ ( rng <* C15 *> ) )) by FINSEQ_1:31 , FINSEQ_1:39;
L56: ( bool D8 ) c= ( bool C15 ) by ZFMISC_1:67;
L57: ( rng C20 ) c= ( bool C15 ) by L56 , XBOOLE_1:1;
L58: ( rng D9 ) c= ( ( bool C15 ) \/ ( bool C15 ) ) by L57 , L51 , L55 , XBOOLE_1:13;
reconsider D10 = D9 as (FinSequence of ( bool C15 )) by L58 , FINSEQ_1:def 4;
take D11 = D10;
L59: ( len <* C15 *> ) = 1 by FINSEQ_1:39;
L60: ( len D11 ) = ( ( len C20 ) + 1 ) by L59 , FINSEQ_1:22;
thus L61: ( len D11 ) = ( card C15 ) by L33 , L35 , L52 , L59 , FINSEQ_1:22;
thus L62: D11 is  ascending
proof
let C21 being Nat;
assume that
L63: 1 <= C21
and
L64: C21 <= ( ( len D11 ) - 1 );
L65: C21 in ( dom C20 ) by L60 , L63 , L64 , FINSEQ_3:25;
L66: ( D11 . C21 ) = ( C20 . C21 ) by L65 , FINSEQ_1:def 7;
per cases ;
suppose L67: C21 = ( len C20 );

reconsider D12 = ( D11 . C21 ) as  finite set by L67 , L63 , L66 , L14;
L68: (D12 = D8 & ( D11 . ( C21 + 1 ) ) = C15) by L52 , L54 , L66 , L67 , L19 , FINSEQ_1:42;
thus L69: thesis by L68;
end;
suppose L70: C21 <> ( len C20 );

L71: C21 < ( len C20 ) by L70 , L60 , L64 , XXREAL_0:1;
L72: ( C21 + 1 ) <= ( len C20 ) by L71 , NAT_1:13;
L73: 1 <= ( C21 + 1 ) by L63 , NAT_1:13;
L74: ( C21 + 1 ) in ( dom C20 ) by L73 , L72 , FINSEQ_3:25;
L75: ( D11 . ( C21 + 1 ) ) = ( C20 . ( C21 + 1 ) ) by L74 , FINSEQ_1:def 7;
L76: C21 <= ( ( len C20 ) - 1 ) by L72 , XREAL_1:19;
thus L77: thesis by L76 , L53 , L63 , L66 , L75 , L12;
end;
end;

thus L79: D11 is  terms've_same_card_as_number
proof
let C22 being Nat;
assume that
L80: 1 <= C22
and
L81: C22 <= ( len D11 );
let C23 being  finite set;
assume that
L82: C23 = ( D11 . C22 );
per cases ;
suppose L83: C22 = ( len D11 );

thus L84: thesis by L83 , L33 , L35 , L52 , L60 , L82 , FINSEQ_1:42;
end;
suppose L85: C22 <> ( len D11 );

L86: C22 < ( len D11 ) by L85 , L81 , XXREAL_0:1;
L87: C22 <= ( len C20 ) by L86 , L60 , NAT_1:13;
L88: C22 in ( dom C20 ) by L87 , L80 , FINSEQ_3:25;
L89: ( D11 . C22 ) = ( C20 . C22 ) by L88 , FINSEQ_1:def 7;
thus L90: thesis by L89 , L54 , L80 , L82 , L87 , L11;
end;
end;

end;
end;
thus L81: thesis by L36;
end;
L82: S1[ ( 0 ) ];
L83: (for R1 being (Element of ( NAT )) holds S1[ R1 ]) from NAT_1:sch 1(L82 , L31);
thus L84: thesis by L83;
end;
definition
let C24 being set;
let C25 being (FinSequence of C24);
attr C25 is  lenght_equal_card_of_set
means
:L85: (ex B16 being  finite set st (B16 = ( union C24 ) & ( len C25 ) = ( card B16 )));
end;
registration
let C26 being non  empty  finite set;
cluster  terms've_same_card_as_number  ascending  lenght_equal_card_of_set for (FinSequence of ( bool C26 ));
existence
proof
consider C27 being (FinSequence of ( bool C26 )) such that L87: (( len C27 ) = ( card C26 ) & C27 is  ascending & C27 is  terms've_same_card_as_number) by L30;
take C27;
L88: ( union ( bool C26 ) ) = C26 by ZFMISC_1:81;
thus L89: thesis by L88 , L87 , L85;
end;
end;
definition
let C28 being non  empty  finite set;
mode RearrangmentGen of C28
 is  terms've_same_card_as_number  ascending  lenght_equal_card_of_set (FinSequence of ( bool C28 ));
end;
theorem
L92: (for R8 being non  empty  finite set holds (for B17 being (FinSequence of ( bool R8 )) holds (B17 is  lenght_equal_card_of_set iff ( len B17 ) = ( card R8 ))))
proof
let R8 being non  empty  finite set;
let C29 being (FinSequence of ( bool R8 ));
thus L93: (C29 is  lenght_equal_card_of_set implies ( len C29 ) = ( card R8 ))
proof
assume L94: C29 is  lenght_equal_card_of_set;
L95: (ex B18 being  finite set st (B18 = ( union ( bool R8 ) ) & ( len C29 ) = ( card B18 ))) by L94 , L85;
thus L96: thesis by L95 , ZFMISC_1:81;
end;

assume L97: ( len C29 ) = ( card R8 );
take R8;
thus L98: thesis by L97 , ZFMISC_1:81;
end;
theorem
L99: (for B19 being FinSequence holds (B19 is  ascending iff (for R1 being (Element of ( NAT )) holds (for R2 being (Element of ( NAT )) holds ((R1 <= R2 & R1 in ( dom B19 ) & R2 in ( dom B19 )) implies ( B19 . R1 ) c= ( B19 . R2 ))))))
proof
let C30 being FinSequence;
thus L100: (C30 is  ascending implies (for R1 being (Element of ( NAT )) holds (for R2 being (Element of ( NAT )) holds ((R1 <= R2 & R1 in ( dom C30 ) & R2 in ( dom C30 )) implies ( C30 . R1 ) c= ( C30 . R2 )))))
proof
defpred S2[ (Element of ( NAT )) ] means (for R1 being (Element of ( NAT )) holds ((R1 <= $1 & R1 in ( dom C30 ) & $1 in ( dom C30 )) implies ( C30 . R1 ) c= ( C30 . $1 )));
assume L101: C30 is  ascending;
L102: (for R2 being (Element of ( NAT )) holds (S2[ R2 ] implies S2[ ( R2 + 1 ) ]))
proof
let R2 being (Element of ( NAT ));
assume L103: S2[ R2 ];
let R1 being (Element of ( NAT ));
assume that
L104: R1 <= ( R2 + 1 )
and
L105: R1 in ( dom C30 )
and
L106: ( R2 + 1 ) in ( dom C30 );
L107:
now
per cases ;
case L108: R1 = ( R2 + 1 );
thus L109: thesis by L108;
end;
case L110: R1 <> ( R2 + 1 );
L111: R1 < ( R2 + 1 ) by L110 , L104 , XXREAL_0:1;
L112: R1 <= R2 by L111 , NAT_1:13;
L113: 1 <= R1 by L105 , FINSEQ_3:25;
L114: 1 <= R2 by L113 , L112 , XXREAL_0:2;
L115: ( R2 + 1 ) <= ( len C30 ) by L106 , FINSEQ_3:25;
L116: R2 <= ( R2 + 1 ) by NAT_1:11;
L117: R2 <= ( len C30 ) by L116 , L115 , XXREAL_0:2;
L118: R2 in ( dom C30 ) by L117 , L114 , FINSEQ_3:25;
L119: ( C30 . R1 ) c= ( C30 . R2 ) by L118 , L103 , L105 , L112;
L120: R2 <= ( ( len C30 ) - 1 ) by L115 , XREAL_1:19;
L121: ( C30 . R2 ) c= ( C30 . ( R2 + 1 ) ) by L120 , L101 , L114 , L12;
thus L122: thesis by L121 , L119 , XBOOLE_1:1;
end;
end;
thus L124: thesis by L107;
end;
let R1 being (Element of ( NAT ));
let R2 being (Element of ( NAT ));
assume L125: (R1 <= R2 & R1 in ( dom C30 ) & R2 in ( dom C30 ));
L126: S2[ ( 0 ) ];
L127: (for R2 being (Element of ( NAT )) holds S2[ R2 ]) from NAT_1:sch 1(L126 , L102);
thus L128: thesis by L127 , L125;
end;

assume L129: (for R1 being (Element of ( NAT )) holds (for R2 being (Element of ( NAT )) holds ((R1 <= R2 & R1 in ( dom C30 ) & R2 in ( dom C30 )) implies ( C30 . R1 ) c= ( C30 . R2 ))));
let C31 being Nat;
assume that
L130: 1 <= C31
and
L131: C31 <= ( ( len C30 ) - 1 );
L132: ( C31 + 1 ) <= ( len C30 ) by L131 , XREAL_1:19;
L133: C31 <= ( C31 + 1 ) by NAT_1:11;
L134: C31 <= ( len C30 ) by L133 , L132 , XXREAL_0:2;
L135: C31 in ( dom C30 ) by L134 , L130 , FINSEQ_3:25;
L136: 1 <= ( C31 + 1 ) by NAT_1:11;
L137: ( C31 + 1 ) in ( dom C30 ) by L136 , L132 , FINSEQ_3:25;
thus L138: thesis by L137 , L129 , L135 , NAT_1:11;
end;
theorem
L139: (for R8 being non  empty  finite set holds (for B20 being  terms've_same_card_as_number  lenght_equal_card_of_set (FinSequence of ( bool R8 )) holds ( B20 . ( len B20 ) ) = R8))
proof
let R8 being non  empty  finite set;
let C32 being  terms've_same_card_as_number  lenght_equal_card_of_set (FinSequence of ( bool R8 ));
L140: ( len C32 ) = ( card R8 ) by L92;
L141: 1 <= ( len C32 ) by L140 , NAT_1:14;
L142: ( C32 . ( len C32 ) ) is  finite  finite  finite  finite set by L141 , L14;
thus L143: thesis by L142 , L140 , L19;
end;
theorem
L144: (for R8 being non  empty  finite set holds (for B21 being  lenght_equal_card_of_set (FinSequence of ( bool R8 )) holds ( len B21 ) <> ( 0 )))
proof
let R8 being non  empty  finite set;
let C33 being  lenght_equal_card_of_set (FinSequence of ( bool R8 ));
assume L145: ( len C33 ) = ( 0 );
L146: ( card R8 ) = ( 0 ) by L145 , L92;
thus L147: contradiction by L146;
end;
theorem
L148: (for R8 being non  empty  finite set holds (for B22 being  ascending  terms've_same_card_as_number (FinSequence of ( bool R8 )) holds (for R1 being (Element of ( NAT )) holds (for R2 being (Element of ( NAT )) holds ((R1 in ( dom B22 ) & R2 in ( dom B22 ) & R1 <> R2) implies ( B22 . R1 ) <> ( B22 . R2 ))))))
proof
let R8 being non  empty  finite set;
let C34 being  ascending  terms've_same_card_as_number (FinSequence of ( bool R8 ));
let R1 being (Element of ( NAT ));
let R2 being (Element of ( NAT ));
assume that
L149: R1 in ( dom C34 )
and
L150: R2 in ( dom C34 )
and
L151: (R1 <> R2 & ( C34 . R1 ) = ( C34 . R2 ));
L152: (1 <= R2 & R2 <= ( len C34 )) by L150 , FINSEQ_3:25;
L153: (1 <= R1 & R1 <= ( len C34 )) by L149 , FINSEQ_3:25;
reconsider D13 = ( C34 . R2 ) as  finite set by L152 , L14;
L154: ( card D13 ) = R2 by L152 , L11;
thus L155: contradiction by L154 , L151 , L153 , L11;
end;
theorem
L156: (for R8 being non  empty  finite set holds (for B23 being  ascending  terms've_same_card_as_number (FinSequence of ( bool R8 )) holds (for R1 being (Element of ( NAT )) holds ((1 <= R1 & R1 <= ( ( len B23 ) - 1 )) implies ( B23 . R1 ) <> ( B23 . ( R1 + 1 ) )))))
proof
let R8 being non  empty  finite set;
let C35 being  ascending  terms've_same_card_as_number (FinSequence of ( bool R8 ));
let R1 being (Element of ( NAT ));
assume that
L157: 1 <= R1
and
L158: R1 <= ( ( len C35 ) - 1 );
L159: ( R1 + 1 ) <= ( len C35 ) by L158 , XREAL_1:19;
L160: R1 <= ( R1 + 1 ) by NAT_1:11;
L161: R1 <= ( len C35 ) by L160 , L159 , XXREAL_0:2;
L162: R1 in ( dom C35 ) by L161 , L157 , FINSEQ_3:25;
L163: 1 <= ( R1 + 1 ) by NAT_1:11;
L164: ( R1 + 1 ) in ( dom C35 ) by L163 , L159 , FINSEQ_3:25;
L165: R1 <> ( R1 + 1 );
thus L166: thesis by L165 , L162 , L164 , L148;
end;
L167: (for R1 being (Element of ( NAT )) holds (for R8 being non  empty  finite set holds (for R9 being (FinSequence of ( bool R8 )) holds (R1 in ( dom R9 ) implies ( R9 . R1 ) c= R8))))
proof
let R1 being (Element of ( NAT ));
let R8 being non  empty  finite set;
let R9 being (FinSequence of ( bool R8 ));
assume L168: R1 in ( dom R9 );
L169: ( R9 . R1 ) in ( bool R8 ) by L168 , FINSEQ_2:11;
thus L170: thesis by L169;
end;
theorem
L171: (for R1 being (Element of ( NAT )) holds (for R8 being non  empty  finite set holds (for B24 being  terms've_same_card_as_number (FinSequence of ( bool R8 )) holds (R1 in ( dom B24 ) implies ( B24 . R1 ) <> ( {} )))))
proof
let R1 being (Element of ( NAT ));
let R8 being non  empty  finite set;
let C36 being  terms've_same_card_as_number (FinSequence of ( bool R8 ));
assume L172: R1 in ( dom C36 );
L173: (1 <= R1 & R1 <= ( len C36 )) by L172 , FINSEQ_3:25;
assume L174: ( C36 . R1 ) = ( {} );
thus L175: contradiction by L174 , L173 , L11 , CARD_1:27;
end;
theorem
L176: (for R1 being (Element of ( NAT )) holds (for R8 being non  empty  finite set holds (for B25 being  terms've_same_card_as_number (FinSequence of ( bool R8 )) holds ((1 <= R1 & R1 <= ( ( len B25 ) - 1 )) implies ( ( B25 . ( R1 + 1 ) ) \ ( B25 . R1 ) ) <> ( {} )))))
proof
let R1 being (Element of ( NAT ));
let R8 being non  empty  finite set;
let C37 being  terms've_same_card_as_number (FinSequence of ( bool R8 ));
assume that
L177: 1 <= R1
and
L178: R1 <= ( ( len C37 ) - 1 );
L179: ( R1 + 1 ) <= ( len C37 ) by L178 , XREAL_1:19;
L180: R1 <= ( R1 + 1 ) by NAT_1:11;
L181: R1 <= ( len C37 ) by L180 , L179 , XXREAL_0:2;
reconsider D14 = ( C37 . ( R1 + 1 ) ) , D15 = ( C37 . R1 ) as  finite set by L181 , L177 , L179 , L14 , NAT_1:11;
L182: 1 <= ( R1 + 1 ) by NAT_1:11;
L183: ( card D14 ) = ( R1 + 1 ) by L182 , L179 , L11;
assume L184: ( ( C37 . ( R1 + 1 ) ) \ ( C37 . R1 ) ) = ( {} );
L185: ( C37 . ( R1 + 1 ) ) c= ( C37 . R1 ) by L184 , XBOOLE_1:37;
L186: ( card D15 ) = R1 by L177 , L181 , L11;
L187: ( R1 + 1 ) <= R1 by L186 , L183 , L185 , NAT_1:43;
L188: 1 <= ( R1 - R1 ) by L187 , XREAL_1:19;
L189: 1 <= ( 0 ) by L188;
thus L190: contradiction by L189;
end;
theorem
L191: (for R8 being non  empty  finite set holds (for B26 being  terms've_same_card_as_number  lenght_equal_card_of_set (FinSequence of ( bool R8 )) holds (ex B27 being (Element of R8) st ( B26 . 1 ) = { B27 })))
proof
let R8 being non  empty  finite set;
let C38 being  terms've_same_card_as_number  lenght_equal_card_of_set (FinSequence of ( bool R8 ));
L192: ( len C38 ) <> ( 0 ) by L144;
L193: ( ( 0 ) + 1 ) <= ( len C38 ) by L192 , NAT_1:13;
reconsider D16 = ( C38 . 1 ) as  finite set by L193 , L14;
L194: ( card D16 ) = 1 by L193 , L11;
consider R4 being set such that L195: { R4 } = ( C38 . 1 ) by L194 , CARD_2:42;
L196: 1 in ( dom C38 ) by L193 , FINSEQ_3:25;
L197: ( C38 . 1 ) c= R8 by L196 , L167;
reconsider D17 = R4 as (Element of R8) by L197 , L195 , ZFMISC_1:31;
take D17;
thus L198: thesis by L195;
end;
theorem
L199: (for R1 being (Element of ( NAT )) holds (for R8 being non  empty  finite set holds (for B28 being  terms've_same_card_as_number  ascending (FinSequence of ( bool R8 )) holds ((1 <= R1 & R1 <= ( ( len B28 ) - 1 )) implies (ex B29 being (Element of R8) st (( ( B28 . ( R1 + 1 ) ) \ ( B28 . R1 ) ) = { B29 } & ( B28 . ( R1 + 1 ) ) = ( ( B28 . R1 ) \/ { B29 } ) & ( ( B28 . ( R1 + 1 ) ) \ { B29 } ) = ( B28 . R1 )))))))
proof
let R1 being (Element of ( NAT ));
let R8 being non  empty  finite set;
let C39 being  terms've_same_card_as_number  ascending (FinSequence of ( bool R8 ));
assume that
L200: 1 <= R1
and
L201: R1 <= ( ( len C39 ) - 1 );
L202: ( R1 + 1 ) <= ( len C39 ) by L201 , XREAL_1:19;
L203: ( C39 . R1 ) c= ( C39 . ( R1 + 1 ) ) by L200 , L201 , L12;
L204: R1 <= ( R1 + 1 ) by NAT_1:11;
L205: R1 <= ( len C39 ) by L204 , L202 , XXREAL_0:2;
reconsider D18 = ( C39 . ( R1 + 1 ) ) , D19 = ( C39 . R1 ) as  finite set by L205 , L200 , L202 , L14 , NAT_1:11;
L206: ( card D19 ) = R1 by L200 , L205 , L11;
L207: 1 <= ( R1 + 1 ) by NAT_1:11;
L208: ( card D18 ) = ( R1 + 1 ) by L207 , L202 , L11;
L209: ( card ( D18 \ D19 ) ) = ( ( R1 + 1 ) - R1 ) by L208 , L203 , L206 , CARD_2:44
.= 1;
consider R4 being set such that L210: { R4 } = ( ( C39 . ( R1 + 1 ) ) \ ( C39 . R1 ) ) by L209 , CARD_2:42;
L211: R4 in ( ( C39 . ( R1 + 1 ) ) \ ( C39 . R1 ) ) by L210 , ZFMISC_1:31;
L212: (not R4 in ( C39 . R1 )) by L211 , XBOOLE_0:def 5;
L213: R4 in ( C39 . ( R1 + 1 ) ) by L210 , ZFMISC_1:31;
L214: ( R1 + 1 ) in ( dom C39 ) by L202 , L207 , FINSEQ_3:25;
L215: ( C39 . ( R1 + 1 ) ) c= R8 by L214 , L167;
reconsider D20 = R4 as (Element of R8) by L215 , L213;
take D20;
thus L216: { D20 } = ( ( C39 . ( R1 + 1 ) ) \ ( C39 . R1 ) ) by L210;
thus L217: ( ( C39 . R1 ) \/ { D20 } ) = ( ( C39 . ( R1 + 1 ) ) \/ ( C39 . R1 ) ) by L210 , XBOOLE_1:39
.= ( C39 . ( R1 + 1 ) ) by L203 , XBOOLE_1:12;
thus L218: ( ( C39 . ( R1 + 1 ) ) \ { D20 } ) = ( ( ( C39 . R1 ) \ { D20 } ) \/ ( { D20 } \ { D20 } ) ) by L217 , XBOOLE_1:42
.= ( ( ( C39 . R1 ) \ { D20 } ) \/ ( {} ) ) by XBOOLE_1:37
.= ( C39 . R1 ) by L212 , ZFMISC_1:57;
end;
definition
let C40 being non  empty  finite set;
let C41 being (RearrangmentGen of C40);
func Co_Gen C41 -> (RearrangmentGen of C40) means 
(for B30 being Nat holds ((1 <= B30 & B30 <= ( ( len it ) - 1 )) implies ( it . B30 ) = ( C40 \ ( C41 . ( ( len C41 ) - B30 ) ) )));
existence
proof
deffunc H1(Nat) = ( C40 \ ( C41 . ( ( len C41 ) - $1 ) ) );
set D21 = ( card C40 );
L219: C40 c= C40;
reconsider D22 = C40 as (Subset of C40) by L219;
L220: ( ( 0 ) + 1 ) <= D21 by NAT_1:13;
L221: ( max (( 0 ) , ( D21 - 1 )) ) = ( D21 - 1 ) by L220 , FINSEQ_2:4;
reconsider D23 = ( D21 - 1 ) as (Element of ( NAT )) by L221 , FINSEQ_2:5;
consider C42 being FinSequence such that L222: ( len C42 ) = D23 and L223: (for B31 being Nat holds (B31 in ( dom C42 ) implies ( C42 . B31 ) = H1(B31))) from FINSEQ_1:sch 2;
L224: ( dom C42 ) = ( Seg D23 ) by L222 , FINSEQ_1:def 3;
L225: ( rng C42 ) c= ( bool C40 )
proof
let R4 being set;
assume L226: R4 in ( rng C42 );
consider C43 being Nat such that L227: (C43 in ( dom C42 ) & ( C42 . C43 ) = R4) by L226 , FINSEQ_2:10;
L228: ( C40 \ ( C41 . ( ( len C41 ) - C43 ) ) ) c= C40;
L229: R4 is (Subset of C40) by L228 , L223 , L227;
thus L230: thesis by L229;
end;
reconsider D24 = C42 as (FinSequence of ( bool C40 )) by L225 , FINSEQ_1:def 4;
set D25 = ( D24 ^ <* D22 *> );
L231: ( len D25 ) = ( ( len D24 ) + ( len <* D22 *> ) ) by FINSEQ_1:22
.= ( ( len D24 ) + 1 ) by FINSEQ_1:39;
L232: ( card C40 ) = ( len C41 ) by L92;
L233: D25 is  terms've_same_card_as_number
proof
let C44 being Nat;
assume that
L234: 1 <= C44
and
L235: C44 <= ( len D25 );
L236: ( max (( 0 ) , ( ( len D25 ) - C44 )) ) = ( ( len D25 ) - C44 ) by L235 , FINSEQ_2:4;
reconsider D26 = ( ( len D25 ) - C44 ) as (Element of ( NAT )) by L236 , FINSEQ_2:5;
let C45 being  finite set;
assume that
L237: C45 = ( D25 . C44 );
L238:
now
per cases ;
case L239: C44 = ( len D25 );
thus L240: thesis by L239 , L222 , L231 , L237 , FINSEQ_1:42;
end;
case L241: C44 <> ( len D25 );
L242: C44 < ( len D25 ) by L241 , L235 , XXREAL_0:1;
L243: ( C44 + 1 ) <= ( len D25 ) by L242 , NAT_1:13;
L244: 1 <= D26 by L243 , XREAL_1:19;
L245: D26 <= ( len C41 ) by L232 , L222 , L231 , XREAL_1:43;
L246: D26 in ( dom C41 ) by L245 , L244 , FINSEQ_3:25;
reconsider D27 = ( C41 . D26 ) as  finite set by L246 , L167 , FINSET_1:1;
L247: C44 <= ( ( len D25 ) - 1 ) by L243 , XREAL_1:19;
L248: C44 in ( dom D24 ) by L247 , L231 , L234 , FINSEQ_3:25;
L249: ( D25 . C44 ) = ( D24 . C44 ) by L248 , FINSEQ_1:def 7
.= ( C40 \ ( C41 . D26 ) ) by L232 , L222 , L223 , L231 , L248;
thus L250: ( card C45 ) = ( ( card C40 ) - ( card D27 ) ) by L249 , L237 , L246 , L167 , CARD_2:44
.= ( ( len C41 ) - D26 ) by L232 , L244 , L245 , L11
.= C44 by L232 , L222 , L231;
end;
end;
thus L252: thesis by L238;
end;
L253: (for B32 being Nat holds ((1 <= B32 & B32 <= ( ( len D25 ) - 1 )) implies ( D25 . B32 ) c= ( D25 . ( B32 + 1 ) )))
proof
let C46 being Nat;
assume that
L254: 1 <= C46
and
L255: C46 <= ( ( len D25 ) - 1 );
L256: C46 in ( dom D24 ) by L231 , L254 , L255 , FINSEQ_3:25;
L257: ( D25 . C46 ) = ( D24 . C46 ) by L256 , FINSEQ_1:def 7
.= ( C40 \ ( C41 . ( ( len C41 ) - C46 ) ) ) by L223 , L256;
per cases ;
suppose L258: C46 = ( ( len D25 ) - 1 );

L259: ( D25 . ( C46 + 1 ) ) = C40 by L258 , L231 , FINSEQ_1:42;
thus L260: thesis by L259 , L257;
end;
suppose L261: C46 <> ( ( len D25 ) - 1 );

L262: C46 < ( ( len D25 ) - 1 ) by L261 , L255 , XXREAL_0:1;
L263: ( C46 + 1 ) < ( len C41 ) by L262 , L232 , L222 , L231 , XREAL_1:20;
L264: ( max (( 0 ) , ( ( len C41 ) - ( C46 + 1 ) )) ) = ( ( len C41 ) - ( C46 + 1 ) ) by L263 , FINSEQ_2:4;
reconsider D28 = ( ( len C41 ) - ( C46 + 1 ) ) as (Element of ( NAT )) by L264 , FINSEQ_2:5;
L265: 1 <= ( C46 + 1 ) by NAT_1:11;
L266: ( C46 + 1 ) <= ( ( len D25 ) - 1 ) by L231 , L262 , NAT_1:13;
L267: ( C46 + 1 ) in ( dom D24 ) by L266 , L231 , L265 , FINSEQ_3:25;
L268: ( D25 . ( C46 + 1 ) ) = ( D24 . ( C46 + 1 ) ) by L267 , FINSEQ_1:def 7
.= ( C40 \ ( C41 . D28 ) ) by L223 , L267;
L269: ( ( C46 + 1 ) + 1 ) <= ( len C41 ) by L263 , NAT_1:13;
L270: 1 <= ( ( len C41 ) - ( C46 + 1 ) ) by L269 , XREAL_1:19;
L271: D28 <= ( ( len C41 ) - 1 ) by L265 , XREAL_1:13;
L272: ( C41 . D28 ) c= ( C41 . ( D28 + 1 ) ) by L271 , L270 , L12;
thus L273: thesis by L272 , L257 , L268 , XBOOLE_1:34;
end;
end;
reconsider D29 = D25 as (RearrangmentGen of C40) by L253 , L222 , L231 , L233 , L12 , L92;
take D29;
let C47 being Nat;
assume L275: (1 <= C47 & C47 <= ( ( len D29 ) - 1 ));
L276: C47 in ( Seg D23 ) by L275 , L222 , L231 , FINSEQ_1:1;
L277: C47 in ( dom D24 ) by L276 , L222 , FINSEQ_1:def 3;
thus L278: ( D29 . C47 ) = ( D24 . C47 ) by L277 , FINSEQ_1:def 7
.= ( C40 \ ( C41 . ( ( len C41 ) - C47 ) ) ) by L223 , L224 , L276;
end;
uniqueness
proof
let C48 , C49 being (RearrangmentGen of C40);
assume that
L279: (for B33 being Nat holds ((1 <= B33 & B33 <= ( ( len C48 ) - 1 )) implies ( C48 . B33 ) = ( C40 \ ( C41 . ( ( len C41 ) - B33 ) ) )))
and
L280: (for B34 being Nat holds ((1 <= B34 & B34 <= ( ( len C49 ) - 1 )) implies ( C49 . B34 ) = ( C40 \ ( C41 . ( ( len C41 ) - B34 ) ) )));
L281: ( len C49 ) = ( card C40 ) by L92;
L282: ( len C41 ) = ( card C40 ) by L92;
L283: ( len C48 ) = ( card C40 ) by L92;
L284: ( dom C48 ) = ( Seg ( len C41 ) ) by L283 , L282 , FINSEQ_1:def 3;
L285:
now
let C50 being Nat;
reconsider D30 = C50 as (Element of ( NAT )) by ORDINAL1:def 12;
assume L286: C50 in ( dom C48 );
L287: 1 <= C50 by L286 , L284 , FINSEQ_1:1;
L288: C50 <= ( len C41 ) by L284 , L286 , FINSEQ_1:1;
per cases ;
suppose L289: C50 = ( len C41 );

L290: ( C48 . C50 ) = C40 by L289 , L283 , L282 , L139;
thus L291: ( C48 . C50 ) = ( C49 . C50 ) by L290 , L281 , L282 , L289 , L139;
end;
suppose L292: C50 <> ( len C41 );

L293: C50 < ( len C41 ) by L292 , L288 , XXREAL_0:1;
L294: ( C50 + 1 ) <= ( len C41 ) by L293 , NAT_1:13;
L295: C50 <= ( ( len C41 ) - 1 ) by L294 , XREAL_1:19;
L296: ( C48 . D30 ) = ( C40 \ ( C41 . ( ( len C41 ) - D30 ) ) ) by L295 , L279 , L283 , L282 , L287;
thus L297: ( C48 . C50 ) = ( C49 . C50 ) by L296 , L280 , L281 , L282 , L287 , L295;
end;
end;
thus L299: thesis by L285 , L283 , L281 , FINSEQ_2:9;
end;
involutiveness
proof
let C51 , C52 being (RearrangmentGen of C40);
assume that
L300: (for B35 being Nat holds ((1 <= B35 & B35 <= ( ( len C51 ) - 1 )) implies ( C51 . B35 ) = ( C40 \ ( C52 . ( ( len C52 ) - B35 ) ) )));
let C53 being Nat;
assume that
L301: (1 <= C53 & C53 <= ( ( len C52 ) - 1 ));
L302: ( len C52 ) = ( card C40 ) by L92;
L303: ( len C51 ) = ( card C40 ) by L92;
L304: ( ( len C52 ) - 1 ) < ( len C52 ) by XREAL_1:44;
L305: C53 < ( len C52 ) by L304 , L301 , XXREAL_0:2;
L306: ( ( len C52 ) - C53 ) in ( NAT ) by L305 , INT_1:5;
reconsider D31 = ( ( len C51 ) - C53 ) as Nat by L306 , L302 , L303;
L307: ( ( len C52 ) - D31 ) = C53 by L302 , L303;
L308: ( C53 + 1 ) <= ( len C52 ) by L301 , XREAL_1:19;
L309: 1 <= D31 by L308 , L302 , L303 , XREAL_1:19;
L310: D31 <= ( ( len C51 ) - 1 ) by L301 , XREAL_1:10;
L311: ( ( len C52 ) - D31 ) in ( dom C52 ) by L307 , L301 , L305 , FINSEQ_3:25;
L312: ( C52 . ( ( len C52 ) - D31 ) ) c= C40 by L311 , L167;
thus L313: ( C52 . C53 ) = ( C52 . ( ( len C52 ) - D31 ) ) by L302 , L303
.= ( C40 /\ ( C52 . ( ( len C52 ) - D31 ) ) ) by L312 , XBOOLE_1:28
.= ( C40 \ ( C40 \ ( C52 . ( ( len C52 ) - D31 ) ) ) ) by XBOOLE_1:48
.= ( C40 \ ( C51 . ( ( len C51 ) - C53 ) ) ) by L309 , L310 , L300;
end;
end;
canceled 1;
theorem
L315: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B36 being (PartFunc of R8 , ( REAL )) holds (for B37 being (RearrangmentGen of R7) holds ((B36 is  total & ( card R7 ) = ( card R8 )) implies ( len ( MIM ( FinS (B36 , R8) ) ) ) = ( len ( CHI (B37 , R7) ) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C54 being (PartFunc of R8 , ( REAL ));
let C55 being (RearrangmentGen of R7);
assume that
L316: C54 is  total
and
L317: ( card R7 ) = ( card R8 );
set D32 = ( FinS (C54 , R8) );
reconsider D33 = D32 as  finite Function;
L318: ( dom C54 ) = R8 by L316 , PARTFUN1:def 2;
reconsider D34 = C54 as  finite Function by L318 , FINSET_1:10;
reconsider D35 = ( dom D33 ) , D36 = ( dom D34 ) as  finite set;
L319: ( C54 | R8 ) = C54 by L318 , RELAT_1:68;
L320: R8 = ( ( dom C54 ) /\ R8 ) by L318
.= ( dom ( C54 | R8 ) ) by RELAT_1:61;
L321: C54 , ( FinS (C54 , R8) ) are_fiberwise_equipotent  by L320 , L319 , RFUNCT_3:def 13;
L322: (( dom D32 ) = ( Seg ( len D32 ) ) & ( card D35 ) = ( card D36 )) by L321 , CLASSES1:81 , FINSEQ_1:def 3;
thus L323: ( len ( CHI (C55 , R7) ) ) = ( len C55 ) by RFUNCT_3:def 6
.= ( card R7 ) by L92
.= ( len D32 ) by L317 , L318 , L322 , FINSEQ_1:57
.= ( len ( MIM D32 ) ) by RFINSEQ:def 2;
end;
definition
let C56 , C57 being non  empty  finite set;
let C58 being (RearrangmentGen of C57);
let C59 being (PartFunc of C56 , ( REAL ));
func Rland (C59 , C58) -> (PartFunc of C57 , ( REAL )) equals 
( Sum ( ( MIM ( FinS (C59 , C56) ) ) (#) ( CHI (C58 , C57) ) ) );
correctness;
func Rlor (C59 , C58) -> (PartFunc of C57 , ( REAL )) equals 
( Sum ( ( MIM ( FinS (C59 , C56) ) ) (#) ( CHI (( Co_Gen C58 ) , C57) ) ) );
correctness;
end;
theorem
L325: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B38 being (PartFunc of R8 , ( REAL )) holds (for B39 being (RearrangmentGen of R7) holds ((B38 is  total & ( card R7 ) = ( card R8 )) implies ( dom ( Rland (B38 , B39) ) ) = R7)))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C60 being (PartFunc of R8 , ( REAL ));
let C61 being (RearrangmentGen of R7);
L326: (( len ( CHI (C61 , R7) ) ) = ( len C61 ) & ( len C61 ) <> ( 0 )) by L144 , RFUNCT_3:def 6;
assume L327: (C60 is  total & ( card R7 ) = ( card R8 ));
L328: ( len ( MIM ( FinS (C60 , R8) ) ) ) = ( len ( CHI (C61 , R7) ) ) by L327 , L315;
thus L329: ( dom ( Rland (C60 , C61) ) ) c= R7;
let R4 being set;
assume L330: R4 in R7;
reconsider D37 = R4 as (Element of R7) by L330;
L331: (( len ( ( MIM ( FinS (C60 , R8) ) ) (#) ( CHI (C61 , R7) ) ) ) = ( min (( len ( MIM ( FinS (C60 , R8) ) ) ) , ( len ( CHI (C61 , R7) ) )) ) & D37 is_common_for_dom ( ( MIM ( FinS (C60 , R8) ) ) (#) ( CHI (C61 , R7) ) )) by RFUNCT_3:32 , RFUNCT_3:def 7;
thus L332: thesis by L331 , L328 , L326 , RFUNCT_3:28;
end;
theorem
L333: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B40 being (Element of R7) holds (for B41 being (PartFunc of R8 , ( REAL )) holds (for B42 being (RearrangmentGen of R7) holds ((B41 is  total & ( card R7 ) = ( card R8 )) implies ((B40 in ( B42 . 1 ) implies ( ( ( MIM ( FinS (B41 , R8) ) ) (#) ( CHI (B42 , R7) ) ) # B40 ) = ( MIM ( FinS (B41 , R8) ) )) & (for R1 being (Element of ( NAT )) holds ((1 <= R1 & R1 < ( len B42 ) & B40 in ( ( B42 . ( R1 + 1 ) ) \ ( B42 . R1 ) )) implies ( ( ( MIM ( FinS (B41 , R8) ) ) (#) ( CHI (B42 , R7) ) ) # B40 ) = ( ( R1 |-> (( 0 ) qua Real) ) ^ ( MIM ( ( FinS (B41 , R8) ) /^ R1 ) ) ))))))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C62 being (Element of R7);
let C63 being (PartFunc of R8 , ( REAL ));
let C64 being (RearrangmentGen of R7);
set D38 = ( FinS (C63 , R8) );
set D39 = ( MIM D38 );
set D40 = ( CHI (C64 , R7) );
set D41 = ( ( D39 (#) D40 ) # C62 );
L334: ( dom C64 ) = ( Seg ( len C64 ) ) by FINSEQ_1:def 3;
L335: ( dom ( D39 (#) D40 ) ) = ( Seg ( len ( D39 (#) D40 ) ) ) by FINSEQ_1:def 3;
L336: ( len D40 ) = ( len C64 ) by RFUNCT_3:def 6;
L337: ( len D39 ) = ( len D38 ) by RFINSEQ:def 2;
L338: ( dom D41 ) = ( Seg ( len D41 ) ) by FINSEQ_1:def 3;
L339: ( min (( len D39 ) , ( len D40 )) ) = ( len ( D39 (#) D40 ) ) by RFUNCT_3:def 7;
assume L340: (C63 is  total & ( card R7 ) = ( card R8 ));
L341: ( len D39 ) = ( len D40 ) by L340 , L315;
L342: ( len D41 ) = ( len ( D39 (#) D40 ) ) by RFUNCT_3:def 8;
L343: ( dom D40 ) = ( Seg ( len D40 ) ) by FINSEQ_1:def 3;
thus L344: (C62 in ( C64 . 1 ) implies ( ( D39 (#) D40 ) # C62 ) = D39)
proof
assume L345: C62 in ( C64 . 1 );
L346: (for R1 being (Element of ( NAT )) holds (R1 in ( dom C64 ) implies C62 in ( C64 . R1 )))
proof
let R1 being (Element of ( NAT ));
assume L347: R1 in ( dom C64 );
L348: 1 <= R1 by L347 , FINSEQ_3:25;
L349: R1 <= ( len C64 ) by L347 , FINSEQ_3:25;
L350: 1 <= ( len C64 ) by L349 , L348 , XXREAL_0:2;
L351: 1 in ( dom C64 ) by L350 , FINSEQ_3:25;
L352: ( C64 . 1 ) c= ( C64 . R1 ) by L351 , L347 , L348 , L99;
thus L353: thesis by L352 , L345;
end;
L354: ( dom ( ( D39 (#) D40 ) # C62 ) ) = ( Seg ( len D39 ) ) by L341 , L339 , L342 , FINSEQ_1:def 3;
L355:
now
let C65 being Nat;
reconsider D42 = C65 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D43 = ( D38 . C65 ) as Real;
assume L356: C65 in ( dom ( ( D39 (#) D40 ) # C62 ) );
L357: 1 <= C65 by L356 , FINSEQ_3:25;
L358: ( D40 . C65 ) = ( chi (( C64 . C65 ) , R7) ) by L343 , L338 , L341 , L339 , L342 , L356 , RFUNCT_3:def 6;
L359: C62 in ( C64 . C65 ) by L334 , L338 , L341 , L336 , L339 , L342 , L346 , L356;
L360: C65 in ( dom D39 ) by L354 , L356 , FINSEQ_1:def 3;
L361: C65 <= ( len D39 ) by L360 , FINSEQ_3:25;
L362:
now
per cases ;
case L363: C65 = ( len D39 );
L364: ( D39 . C65 ) = D43 by L363 , L337 , RFINSEQ:def 2;
L365: ( ( D39 (#) D40 ) . C65 ) = ( D43 (#) ( chi (( C64 . C65 ) , R7) ) ) by L364 , L335 , L338 , L342 , L356 , L358 , RFUNCT_3:def 7;
L366: ( ( ( D39 (#) D40 ) # C62 ) . C65 ) = ( ( D43 (#) ( chi (( C64 . C65 ) , R7) ) ) . C62 ) by L365 , L356 , RFUNCT_3:def 8;
L367: ( dom ( D43 (#) ( chi (( C64 . C65 ) , R7) ) ) ) = ( dom ( chi (( C64 . C65 ) , R7) ) ) by VALUED_1:def 5
.= R7 by RFUNCT_1:61;
thus L368: ( ( ( D39 (#) D40 ) # C62 ) . C65 ) = ( D43 * ( ( chi (( C64 . C65 ) , R7) ) . C62 ) ) by L367 , L366 , VALUED_1:def 5
.= ( D43 * 1 ) by L359 , RFUNCT_1:63
.= ( D39 . C65 ) by L337 , L363 , RFINSEQ:def 2;
end;
case L369: C65 <> ( len D39 );
reconsider D44 = ( D38 . ( C65 + 1 ) ) as Real;
L370: C65 < ( len D39 ) by L361 , L369 , XXREAL_0:1;
L371: ( C65 + 1 ) <= ( len D39 ) by L370 , NAT_1:13;
L372: C65 <= ( ( len D39 ) - 1 ) by L371 , XREAL_1:19;
L373: ( D39 . D42 ) = ( D43 - D44 ) by L372 , L357 , RFINSEQ:def 2;
L374: ( ( D39 (#) D40 ) . C65 ) = ( ( D43 - D44 ) (#) ( chi (( C64 . C65 ) , R7) ) ) by L373 , L335 , L338 , L342 , L356 , L358 , RFUNCT_3:def 7;
L375: ( ( ( D39 (#) D40 ) # C62 ) . C65 ) = ( ( ( D43 - D44 ) (#) ( chi (( C64 . C65 ) , R7) ) ) . C62 ) by L374 , L356 , RFUNCT_3:def 8;
L376: ( dom ( ( D43 - D44 ) (#) ( chi (( C64 . C65 ) , R7) ) ) ) = ( dom ( chi (( C64 . C65 ) , R7) ) ) by VALUED_1:def 5
.= R7 by RFUNCT_1:61;
thus L377: ( ( ( D39 (#) D40 ) # C62 ) . C65 ) = ( ( D43 - D44 ) * ( ( chi (( C64 . C65 ) , R7) ) . C62 ) ) by L376 , L375 , VALUED_1:def 5
.= ( ( D43 - D44 ) * 1 ) by L359 , RFUNCT_1:63
.= ( D39 . D42 ) by L357 , L372 , RFINSEQ:def 2;
end;
end;
thus L379: ( ( ( D39 (#) D40 ) # C62 ) . C65 ) = ( D39 . C65 ) by L362;
end;
thus L380: thesis by L355 , L341 , L339 , L342 , FINSEQ_2:9;
end;

let R1 being (Element of ( NAT ));
assume that
L381: 1 <= R1
and
L382: R1 < ( len C64 )
and
L383: C62 in ( ( C64 . ( R1 + 1 ) ) \ ( C64 . R1 ) );
L384: ( len ( D39 /^ R1 ) ) = ( ( len D39 ) - R1 ) by L341 , L336 , L382 , RFINSEQ:def 1;
L385: (for R3 being (Element of ( NAT )) holds ((R3 in ( dom C64 ) & R3 <= R1) implies (not C62 in ( C64 . R3 ))))
proof
let R3 being (Element of ( NAT ));
assume L386: (R3 in ( dom C64 ) & R3 <= R1);
assume L387: C62 in ( C64 . R3 );
L388: R1 in ( dom C64 ) by L381 , L382 , FINSEQ_3:25;
L389: ( C64 . R3 ) c= ( C64 . R1 ) by L388 , L386 , L99;
thus L390: contradiction by L389 , L383 , L387 , XBOOLE_0:def 5;
end;
L391: C62 in ( C64 . ( R1 + 1 ) ) by L383;
L392: ( R1 + 1 ) <= ( len C64 ) by L382 , NAT_1:13;
L393: 1 <= ( R1 + 1 ) by L381 , NAT_1:13;
L394: (for R3 being (Element of ( NAT )) holds ((R3 in ( dom C64 ) & ( R1 + 1 ) <= R3) implies C62 in ( C64 . R3 )))
proof
let R3 being (Element of ( NAT ));
assume L395: (R3 in ( dom C64 ) & ( R1 + 1 ) <= R3);
L396: ( R1 + 1 ) in ( dom C64 ) by L392 , L393 , FINSEQ_3:25;
L397: ( C64 . ( R1 + 1 ) ) c= ( C64 . R3 ) by L396 , L395 , L99;
thus L398: thesis by L397 , L391;
end;
set D45 = ( ( FinS (C63 , R8) ) /^ R1 );
set D46 = ( MIM D45 );
set D47 = ( R1 |-> (( 0 ) qua Real) );
L399: ( len D46 ) = ( len D45 ) by RFINSEQ:def 2;
L400: ( len D47 ) = R1 by CARD_1:def 7;
L401: ( len D45 ) = ( ( len D38 ) - R1 ) by L341 , L336 , L337 , L382 , RFINSEQ:def 1;
L402: ( len ( D47 ^ D46 ) ) = ( R1 + ( ( len D38 ) - R1 ) ) by L401 , L399 , L400 , FINSEQ_1:22
.= ( len D39 ) by RFINSEQ:def 2;
L403: ( dom ( D47 ^ D46 ) ) = ( Seg ( len D39 ) ) by L402 , FINSEQ_1:def 3;
L404: ( dom D47 ) = ( Seg ( len D47 ) ) by FINSEQ_1:def 3;
L405:
now
let C66 being Nat;
reconsider D48 = C66 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D49 = ( D38 . C66 ) as Real;
assume L406: C66 in ( dom ( D47 ^ D46 ) );
L407: 1 <= C66 by L406 , FINSEQ_3:25;
L408: C66 in ( dom D39 ) by L403 , L406 , FINSEQ_1:def 3;
L409: C66 <= ( len D39 ) by L408 , FINSEQ_3:25;
L410: ( D40 . C66 ) = ( chi (( C64 . C66 ) , R7) ) by L343 , L341 , L403 , L406 , RFUNCT_3:def 6;
L411:
now
per cases ;
case L412: C66 <= R1;
reconsider D50 = ( D38 . ( C66 + 1 ) ) as Real;
L413: C66 < ( R1 + 1 ) by L412 , NAT_1:13;
L414: C66 < ( len C64 ) by L413 , L392 , XXREAL_0:2;
L415: ( C66 + 1 ) <= ( len C64 ) by L414 , NAT_1:13;
L416: C66 <= ( ( len D39 ) - 1 ) by L415 , L341 , L336 , XREAL_1:19;
L417: ( D39 . D48 ) = ( D49 - D50 ) by L416 , L407 , RFINSEQ:def 2;
L418: ( ( D39 (#) D40 ) . C66 ) = ( ( D49 - D50 ) (#) ( chi (( C64 . C66 ) , R7) ) ) by L417 , L335 , L341 , L339 , L403 , L406 , L410 , RFUNCT_3:def 7;
L419: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( ( D49 - D50 ) (#) ( chi (( C64 . C66 ) , R7) ) ) . C62 ) by L418 , L338 , L341 , L339 , L342 , L403 , L406 , RFUNCT_3:def 8;
L420: (not C62 in ( C64 . C66 )) by L334 , L341 , L336 , L385 , L403 , L406 , L412;
L421: ( ( chi (( C64 . C66 ) , R7) ) . C62 ) = ( 0 ) by L420 , RFUNCT_1:64;
L422: C66 in ( Seg R1 ) by L407 , L412 , FINSEQ_1:1;
L423: ( D47 . C66 ) = ( 0 );
L424: ( dom ( ( D49 - D50 ) (#) ( chi (( C64 . C66 ) , R7) ) ) ) = ( dom ( chi (( C64 . C66 ) , R7) ) ) by VALUED_1:def 5
.= R7 by RFUNCT_1:61;
thus L425: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( D49 - D50 ) * ( ( chi (( C64 . C66 ) , R7) ) . C62 ) ) by L424 , L419 , VALUED_1:def 5
.= ( ( D47 ^ D46 ) . C66 ) by L400 , L404 , L421 , L422 , L423 , FINSEQ_1:def 7;
end;
case L426: R1 < C66;
L427: ( max (( 0 ) , ( C66 - R1 )) ) = ( C66 - R1 ) by L426 , FINSEQ_2:4;
reconsider D51 = ( C66 - R1 ) as (Element of ( NAT )) by L427 , FINSEQ_2:5;
L428: ( R1 + 1 ) <= C66 by L426 , NAT_1:13;
L429: C62 in ( C64 . C66 ) by L428 , L334 , L341 , L336 , L394 , L403 , L406;
L430: ( ( chi (( C64 . C66 ) , R7) ) . C62 ) = 1 by L429 , RFUNCT_1:63;
L431: 1 <= D51 by L428 , XREAL_1:19;
L432:
now
per cases ;
case L433: C66 = ( len D39 );
L434: ( D39 . C66 ) = D49 by L433 , L337 , RFINSEQ:def 2;
L435: ( ( D39 (#) D40 ) . C66 ) = ( D49 (#) ( chi (( C64 . C66 ) , R7) ) ) by L434 , L335 , L341 , L339 , L403 , L406 , L410 , RFUNCT_3:def 7;
L436: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( D49 (#) ( chi (( C64 . C66 ) , R7) ) ) . C62 ) by L435 , L338 , L341 , L339 , L342 , L403 , L406 , RFUNCT_3:def 8;
L437: D51 in ( dom ( D39 /^ R1 ) ) by L384 , L431 , L433 , FINSEQ_3:25;
L438: ( ( D47 ^ D46 ) . C66 ) = ( D46 . ( C66 - R1 ) ) by L400 , L402 , L409 , L426 , FINSEQ_1:24
.= ( ( D39 /^ R1 ) . D51 ) by RFINSEQ:15
.= ( D39 . ( D51 + R1 ) ) by L341 , L336 , L382 , L437 , RFINSEQ:def 1
.= D49 by L337 , L433 , RFINSEQ:def 2;
L439: ( dom ( D49 (#) ( chi (( C64 . C66 ) , R7) ) ) ) = ( dom ( chi (( C64 . C66 ) , R7) ) ) by VALUED_1:def 5
.= R7 by RFUNCT_1:61;
thus L440: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( D49 * ( ( chi (( C64 . C66 ) , R7) ) . C62 ) ) by L439 , L436 , VALUED_1:def 5
.= ( ( D47 ^ D46 ) . C66 ) by L430 , L438;
end;
case L441: C66 <> ( len D39 );
reconsider D52 = ( D38 . ( C66 + 1 ) ) as Real;
L442: C66 < ( len D39 ) by L409 , L441 , XXREAL_0:1;
L443: ( C66 + 1 ) <= ( len D39 ) by L442 , NAT_1:13;
L444: C66 <= ( ( len D39 ) - 1 ) by L443 , XREAL_1:19;
L445: ( D39 . D48 ) = ( D49 - D52 ) by L444 , L407 , RFINSEQ:def 2;
L446: ( ( D39 (#) D40 ) . C66 ) = ( ( D49 - D52 ) (#) ( chi (( C64 . C66 ) , R7) ) ) by L445 , L335 , L341 , L339 , L403 , L406 , L410 , RFUNCT_3:def 7;
L447: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( ( D49 - D52 ) (#) ( chi (( C64 . C66 ) , R7) ) ) . C62 ) by L446 , L338 , L341 , L339 , L342 , L403 , L406 , RFUNCT_3:def 8;
L448: D51 <= ( len ( D39 /^ R1 ) ) by L384 , L409 , XREAL_1:9;
L449: D51 in ( dom ( D39 /^ R1 ) ) by L448 , L431 , FINSEQ_3:25;
L450: ( ( D47 ^ D46 ) . C66 ) = ( D46 . ( C66 - R1 ) ) by L400 , L402 , L409 , L426 , FINSEQ_1:24
.= ( ( D39 /^ R1 ) . D51 ) by RFINSEQ:15
.= ( D39 . ( D51 + R1 ) ) by L341 , L336 , L382 , L449 , RFINSEQ:def 1
.= ( D49 - D52 ) by L407 , L444 , RFINSEQ:def 2;
L451: ( dom ( ( D49 - D52 ) (#) ( chi (( C64 . C66 ) , R7) ) ) ) = ( dom ( chi (( C64 . C66 ) , R7) ) ) by VALUED_1:def 5
.= R7 by RFUNCT_1:61;
thus L452: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( D49 - D52 ) * ( ( chi (( C64 . C66 ) , R7) ) . C62 ) ) by L451 , L447 , VALUED_1:def 5
.= ( ( D47 ^ D46 ) . C66 ) by L430 , L450;
end;
end;
thus L454: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( D47 ^ D46 ) . C66 ) by L432;
end;
end;
thus L456: ( ( ( D39 (#) D40 ) # C62 ) . C66 ) = ( ( D47 ^ D46 ) . C66 ) by L411;
end;
thus L457: thesis by L405 , L341 , L339 , L342 , L402 , FINSEQ_2:9;
end;
theorem
L458: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B43 being (Element of R7) holds (for B44 being (PartFunc of R8 , ( REAL )) holds (for B45 being (RearrangmentGen of R7) holds ((B44 is  total & ( card R7 ) = ( card R8 )) implies ((B43 in ( B45 . 1 ) implies ( ( Rland (B44 , B45) ) . B43 ) = ( ( FinS (B44 , R8) ) . 1 )) & (for R1 being (Element of ( NAT )) holds ((1 <= R1 & R1 < ( len B45 ) & B43 in ( ( B45 . ( R1 + 1 ) ) \ ( B45 . R1 ) )) implies ( ( Rland (B44 , B45) ) . B43 ) = ( ( FinS (B44 , R8) ) . ( R1 + 1 ) ))))))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C67 being (Element of R7);
let C68 being (PartFunc of R8 , ( REAL ));
let C69 being (RearrangmentGen of R7);
set D53 = ( FinS (C68 , R8) );
set D54 = ( MIM D53 );
set D55 = ( CHI (C69 , R7) );
L459: ( ( Rland (C68 , C69) ) . C67 ) = ( Sum ( ( D54 (#) D55 ) # C67 ) ) by RFUNCT_3:32 , RFUNCT_3:33;
L460: (( len D55 ) = ( len C69 ) & ( len D54 ) = ( len D53 )) by RFINSEQ:def 2 , RFUNCT_3:def 6;
assume L461: (C68 is  total & ( card R7 ) = ( card R8 ));
L462: ( len D54 ) = ( len D55 ) by L461 , L315;
thus L463: (C67 in ( C69 . 1 ) implies ( ( Rland (C68 , C69) ) . C67 ) = ( ( FinS (C68 , R8) ) . 1 ))
proof
assume L464: C67 in ( C69 . 1 );
thus L465: ( ( Rland (C68 , C69) ) . C67 ) = ( Sum D54 ) by L464 , L461 , L459 , L333
.= ( ( FinS (C68 , R8) ) . 1 ) by L462 , L460 , L144 , RFINSEQ:16;
end;

let R1 being (Element of ( NAT ));
set D56 = ( MIM ( ( FinS (C68 , R8) ) /^ R1 ) );
assume that
L466: 1 <= R1
and
L467: R1 < ( len C69 )
and
L468: C67 in ( ( C69 . ( R1 + 1 ) ) \ ( C69 . R1 ) );
L469: ( ( D54 (#) D55 ) # C67 ) = ( ( R1 |-> (( 0 ) qua Real) ) ^ D56 ) by L461 , L466 , L467 , L468 , L333;
thus L470: ( ( Rland (C68 , C69) ) . C67 ) = ( ( Sum ( R1 |-> (( 0 ) qua Real) ) ) + ( Sum D56 ) ) by L469 , L459 , RVSUM_1:75
.= ( ( 0 ) + ( Sum D56 ) ) by RVSUM_1:81
.= ( ( FinS (C68 , R8) ) . ( R1 + 1 ) ) by L462 , L460 , L467 , RFINSEQ:17;
end;
theorem
L471: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B46 being (PartFunc of R8 , ( REAL )) holds (for B47 being (RearrangmentGen of R7) holds ((B46 is  total & ( card R7 ) = ( card R8 )) implies ( rng ( Rland (B46 , B47) ) ) = ( rng ( FinS (B46 , R8) ) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C70 being (PartFunc of R8 , ( REAL ));
let C71 being (RearrangmentGen of R7);
assume that
L472: C70 is  total
and
L473: ( card R7 ) = ( card R8 );
set D57 = ( FinS (C70 , R8) );
set D58 = ( Rland (C70 , C71) );
set D59 = ( MIM D57 );
set D60 = ( CHI (C71 , R7) );
L474: ( len D59 ) = ( len D60 ) by L472 , L473 , L315;
L475: ( dom C70 ) = R8 by L472 , PARTFUN1:def 2;
reconsider D61 = D57 , D62 = C70 as  finite Function by L475 , FINSET_1:10;
reconsider D63 = ( dom D61 ) , D64 = ( dom D62 ) as  finite set;
L476: (( len D60 ) = ( len C71 ) & ( len D59 ) = ( len D57 )) by RFINSEQ:def 2 , RFUNCT_3:def 6;
L477: ( dom D58 ) = R7 by L472 , L473 , L325;
L478: ( dom D57 ) = ( Seg ( len D57 ) ) by FINSEQ_1:def 3;
L479: ( dom C71 ) = ( Seg ( len C71 ) ) by FINSEQ_1:def 3;
L480: ( C70 | R8 ) = C70 by L475 , RELAT_1:68;
L481: D57 , C70 are_fiberwise_equipotent  by L480 , L475 , RFUNCT_3:def 13;
L482: ( card D63 ) = ( card D64 ) by L481 , CLASSES1:81;
L483: ( len D57 ) <> ( 0 ) by L482 , L475 , L478;
L484: ( ( 0 ) + 1 ) <= ( len D57 ) by L483 , NAT_1:13;
L485: 1 in ( dom D57 ) by L484 , FINSEQ_3:25;
thus L486: ( rng D58 ) c= ( rng D57 )
proof
let R4 being set;
assume L487: R4 in ( rng D58 );
consider C72 being (Element of R7) such that L488: C72 in ( dom D58 ) and L489: ( D58 . C72 ) = R4 by L487 , PARTFUN1:3;
defpred S3[ set ] means ($1 in ( dom C71 ) & C72 in ( C71 . $1 ));
L490: (ex B48 being Nat st S3[ B48 ])
proof
take D65 = ( len C71 );
L491: ( C71 . D65 ) = R7 by L139;
thus L492: thesis by L491 , L474 , L476 , L484 , FINSEQ_3:25;
end;
consider C73 being Nat such that L493: (S3[ C73 ] & (for B49 being Nat holds (S3[ B49 ] implies C73 <= B49))) from NAT_1:sch 5(L490);
L494: 1 <= C73 by L493 , FINSEQ_3:25;
L495: ( max (( 0 ) , ( C73 - 1 )) ) = ( C73 - 1 ) by L494 , FINSEQ_2:4;
reconsider D66 = ( C73 - 1 ) as (Element of ( NAT )) by L495 , FINSEQ_2:5;
L496: C73 <= ( len C71 ) by L493 , FINSEQ_3:25;
L497:
now
per cases ;
case L498: C73 = 1;
L499: ( D58 . C72 ) = ( D57 . 1 ) by L498 , L472 , L473 , L493 , L458;
thus L500: thesis by L499 , L485 , L489 , FUNCT_1:def 3;
end;
case L501: C73 <> 1;
L502: 1 < C73 by L501 , L494 , XXREAL_0:1;
L503: ( 1 + 1 ) <= C73 by L502 , NAT_1:13;
L504: 1 <= D66 by L503 , XREAL_1:19;
L505: D66 < C73 by XREAL_1:44;
L506: D66 <= ( len C71 ) by L505 , L496 , XXREAL_0:2;
L507: D66 in ( dom C71 ) by L506 , L504 , FINSEQ_3:25;
L508: (not C72 in ( C71 . D66 )) by L507 , L493 , XREAL_1:44;
L509: C72 in ( ( C71 . ( D66 + 1 ) ) \ ( C71 . D66 ) ) by L508 , L493 , XBOOLE_0:def 5;
L510: D66 < ( len C71 ) by L496 , L505 , XXREAL_0:2;
L511: ( D58 . C72 ) = ( D57 . ( D66 + 1 ) ) by L510 , L472 , L473 , L504 , L509 , L458;
thus L512: thesis by L511 , L474 , L476 , L478 , L479 , L489 , L493 , FUNCT_1:def 3;
end;
end;
thus L514: thesis by L497;
end;

let R4 being set;
defpred S4[ Nat ] means ($1 in ( dom D57 ) & ( D57 . $1 ) = R4);
assume L515: R4 in ( rng D57 );
L516: (ex B50 being Nat st S4[ B50 ]) by L515 , FINSEQ_2:10;
consider C74 being Nat such that L517: (S4[ C74 ] & (for B51 being Nat holds (S4[ B51 ] implies C74 <= B51))) from NAT_1:sch 5(L516);
L518: 1 <= C74 by L517 , FINSEQ_3:25;
L519: ( max (( 0 ) , ( C74 - 1 )) ) = ( C74 - 1 ) by L518 , FINSEQ_2:4;
reconsider D67 = ( C74 - 1 ) as (Element of ( NAT )) by L519 , FINSEQ_2:5;
L520: C74 <= ( len D57 ) by L517 , FINSEQ_3:25;
L521:
now
per cases ;
case L522: C74 = 1;
set D68 = the (Element of ( C71 . 1 ));
L523: ( C71 . 1 ) <> ( {} ) by L474 , L476 , L478 , L479 , L485 , L171;
L524: ( C71 . 1 ) c= R7 by L474 , L476 , L478 , L479 , L485 , L167;
reconsider D69 = D68 as (Element of R7) by L524 , L523 , TARSKI:def 3;
L525: ( D58 . D69 ) = ( D57 . 1 ) by L472 , L473 , L523 , L458;
thus L526: thesis by L525 , L477 , L517 , L522 , FUNCT_1:def 3;
end;
case L527: C74 <> 1;
set D70 = the (Element of ( ( C71 . ( D67 + 1 ) ) \ ( C71 . D67 ) ));
L528: 1 < C74 by L518 , L527 , XXREAL_0:1;
L529: ( 1 + 1 ) <= C74 by L528 , NAT_1:13;
L530: 1 <= D67 by L529 , XREAL_1:19;
L531: ( D67 + 1 ) <= ( len D57 ) by L517 , FINSEQ_3:25;
L532: D67 <= ( ( len D57 ) - 1 ) by L531 , XREAL_1:19;
L533: ( ( C71 . ( D67 + 1 ) ) \ ( C71 . D67 ) ) <> ( {} ) by L532 , L474 , L476 , L530 , L176;
L534: D70 in ( C71 . ( D67 + 1 ) ) by L533 , XBOOLE_0:def 5;
L535: ( C71 . C74 ) c= R7 by L474 , L476 , L478 , L479 , L517 , L167;
reconsider D71 = D70 as (Element of R7) by L535 , L534;
L536: D67 < C74 by XREAL_1:44;
L537: D67 < ( len D57 ) by L536 , L520 , XXREAL_0:2;
L538: ( D58 . D71 ) = ( D57 . ( D67 + 1 ) ) by L537 , L472 , L473 , L474 , L476 , L530 , L533 , L458;
thus L539: thesis by L538 , L477 , L517 , FUNCT_1:def 3;
end;
end;
thus L541: thesis by L521;
end;
theorem
L542: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B52 being (PartFunc of R8 , ( REAL )) holds (for B53 being (RearrangmentGen of R7) holds ((B52 is  total & ( card R7 ) = ( card R8 )) implies ( Rland (B52 , B53) ) , ( FinS (B52 , R8) ) are_fiberwise_equipotent )))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C75 being (PartFunc of R8 , ( REAL ));
let C76 being (RearrangmentGen of R7);
set D72 = ( FinS (C75 , R8) );
set D73 = ( Rland (C75 , C76) );
set D74 = ( MIM D72 );
set D75 = ( CHI (C76 , R7) );
L543: ( dom D73 ) is  finite;
reconsider D76 = D73 as  finite (PartFunc of R7 , ( REAL )) by L543 , FINSET_1:10;
L544: (( len D75 ) = ( len C76 ) & ( len D74 ) = ( len D72 )) by RFINSEQ:def 2 , RFUNCT_3:def 6;
L545: (( dom D72 ) = ( Seg ( len D72 ) ) & ( dom C76 ) = ( Seg ( len C76 ) )) by FINSEQ_1:def 3;
assume L546: (C75 is  total & ( card R7 ) = ( card R8 ));
L547: ( len D74 ) = ( len D75 ) by L546 , L315;
L548: ( dom D76 ) = R7 by L546 , L325;
L549: ( rng D76 ) = ( rng D72 ) by L546 , L471;
L550:
now
let R4 being set;
L551:
now
per cases ;
case L552: (not R4 in ( rng D72 ));
L553: ( D72 " { R4 } ) = ( {} ) by L552 , L4;
thus L554: ( card ( D72 " { R4 } ) ) = ( card ( D76 " { R4 } ) ) by L553 , L549 , L552 , L4;
end;
case L555: R4 in ( rng D72 );
defpred S5[ Nat ] means ($1 in ( dom D72 ) & ( D72 . $1 ) = R4);
L556: (for B54 being Nat holds (S5[ B54 ] implies B54 <= ( len D72 ))) by FINSEQ_3:25;
L557: (ex B55 being Nat st S5[ B55 ]) by L555 , FINSEQ_2:10;
consider C77 being Nat such that L558: (S5[ C77 ] & (for B56 being Nat holds (S5[ B56 ] implies B56 <= C77))) from NAT_1:sch 6(L556 , L557);
L559: (ex B57 being Nat st S5[ B57 ]) by L555 , FINSEQ_2:10;
consider C78 being Nat such that L560: (S5[ C78 ] & (for B58 being Nat holds (S5[ B58 ] implies C78 <= B58))) from NAT_1:sch 5(L559);
reconsider D77 = R4 as Real by L560;
L561: 1 <= C78 by L560 , FINSEQ_3:25;
L562: ( max (( 0 ) , ( C78 - 1 )) ) = ( C78 - 1 ) by L561 , FINSEQ_2:4;
reconsider D78 = ( C78 - 1 ) as (Element of ( NAT )) by L562 , FINSEQ_2:5;
L563: ( D78 + 1 ) = C78;
L564: C77 <= ( len D72 ) by L558 , FINSEQ_3:25;
L565: ( ( Seg C77 ) \ ( Seg D78 ) ) = ( D72 " { R4 } )
proof
thus L566: ( ( Seg C77 ) \ ( Seg D78 ) ) c= ( D72 " { R4 } )
proof
let R5 being set;
assume L567: R5 in ( ( Seg C77 ) \ ( Seg D78 ) );
reconsider D79 = R5 as (Element of ( NAT )) by L567;
reconsider D80 = ( D72 . D79 ) as Real;
L568: R5 in ( Seg C77 ) by L567 , XBOOLE_0:def 5;
L569: 1 <= D79 by L568 , FINSEQ_1:1;
L570: D79 <= C77 by L568 , FINSEQ_1:1;
L571: D79 <= ( len D72 ) by L570 , L564 , XXREAL_0:2;
L572: D79 in ( dom D72 ) by L571 , L569 , FINSEQ_3:25;
L573: (not R5 in ( Seg D78 )) by L567 , XBOOLE_0:def 5;
L574: (D79 < 1 or D78 < D79) by L573 , FINSEQ_1:1;
L575: C78 < ( D79 + 1 ) by L574 , L568 , FINSEQ_1:1 , XREAL_1:19;
L576: C78 <= D79 by L575 , NAT_1:13;
L577:
now
per cases ;
case L578: D79 = C77;
L579: D80 in { R4 } by L578 , L558 , TARSKI:def 1;
thus L580: thesis by L579 , L572 , FUNCT_1:def 7;
end;
case L581: D79 <> C77;
L582: D79 < C77 by L581 , L570 , XXREAL_0:1;
L583: D80 >= D77 by L582 , L558 , L572 , RFINSEQ:19;
L584:
now
per cases ;
case L585: D79 = C78;
L586: D80 in { R4 } by L585 , L560 , TARSKI:def 1;
thus L587: thesis by L586 , L572 , FUNCT_1:def 7;
end;
case L588: D79 <> C78;
L589: C78 < D79 by L588 , L576 , XXREAL_0:1;
L590: D77 >= D80 by L589 , L560 , L572 , RFINSEQ:19;
L591: D77 = D80 by L590 , L583 , XXREAL_0:1;
L592: D80 in { R4 } by L591 , TARSKI:def 1;
thus L593: thesis by L592 , L572 , FUNCT_1:def 7;
end;
end;
thus L595: thesis by L584;
end;
end;
thus L597: thesis by L577;
end;

let R5 being set;
assume L598: R5 in ( D72 " { R4 } );
L599: R5 in ( dom D72 ) by L598 , FUNCT_1:def 7;
reconsider D81 = R5 as (Element of ( NAT )) by L598;
L600: 1 <= D81 by L599 , FINSEQ_3:25;
L601: ( D72 . R5 ) in { R4 } by L598 , FUNCT_1:def 7;
L602: ( D72 . D81 ) = R4 by L601 , TARSKI:def 1;
L603: C78 <= D81 by L602 , L560 , L599;
L604: C78 < ( D81 + 1 ) by L603 , NAT_1:13;
L605: (D78 < D81 or D81 < 1) by L604 , XREAL_1:19;
L606: (not D81 in ( Seg D78 )) by L605 , FINSEQ_1:1;
L607: D81 <= C77 by L558 , L599 , L602;
L608: D81 in ( Seg C77 ) by L607 , L600 , FINSEQ_1:1;
thus L609: thesis by L608 , L606 , XBOOLE_0:def 5;
end;
L610: 1 <= C77 by L558 , FINSEQ_3:25;
L611: C78 <= C77 by L560 , L558;
L612: D78 <= C78 by XREAL_1:43;
L613: D78 <= C77 by L612 , L611 , XXREAL_0:2;
L614: ( Seg D78 ) c= ( Seg C77 ) by L613 , FINSEQ_1:5;
L615: ( card ( D72 " { R4 } ) ) = ( ( card ( Seg C77 ) ) - ( card ( Seg D78 ) ) ) by L614 , L565 , CARD_2:44
.= ( C77 - ( card ( Seg D78 ) ) ) by FINSEQ_1:57
.= ( C77 - D78 ) by FINSEQ_1:57;
L616: C78 <= ( len D72 ) by L560 , FINSEQ_3:25;
L617: 1 <= ( len D72 ) by L616 , L561 , XXREAL_0:2;
L618: 1 in ( dom D72 ) by L617 , FINSEQ_3:25;
L619:
now
per cases ;
case L620: C78 = 1;
L621: ( C76 . C77 ) = ( D76 " { R4 } )
proof
thus L622: ( C76 . C77 ) c= ( D76 " { R4 } )
proof
defpred S6[ (Element of ( NAT )) ] means (($1 in ( dom C76 ) & $1 <= C77) implies (for B59 being (Element of R7) holds (B59 in ( C76 . $1 ) implies B59 in ( D76 " { R4 } ))));
let R5 being set;
assume L623: R5 in ( C76 . C77 );
L624: ( C76 . C77 ) c= R7 by L547 , L544 , L545 , L558 , L167;
reconsider D82 = R5 as (Element of R7) by L624 , L623;
L625: (for R1 being (Element of ( NAT )) holds (S6[ R1 ] implies S6[ ( R1 + 1 ) ]))
proof
let R1 being (Element of ( NAT ));
assume L626: S6[ R1 ];
assume that
L627: ( R1 + 1 ) in ( dom C76 )
and
L628: ( R1 + 1 ) <= C77;
L629: ( R1 + 1 ) <= ( len C76 ) by L627 , FINSEQ_3:25;
L630: R1 <= ( ( len C76 ) - 1 ) by L629 , XREAL_1:19;
L631: R1 < ( len C76 ) by L629 , NAT_1:13;
let C79 being (Element of R7);
assume L632: C79 in ( C76 . ( R1 + 1 ) );
L633: R1 <= ( len C76 ) by L629 , NAT_1:13;
L634:
now
per cases ;
case L635: R1 = ( 0 );
L636: ( D76 . C79 ) = R4 by L635 , L546 , L560 , L620 , L632 , L458;
L637: ( D76 . C79 ) in { R4 } by L636 , TARSKI:def 1;
thus L638: thesis by L637 , L548 , FUNCT_1:def 7;
end;
case L639: R1 <> ( 0 );
L640: ( ( 0 ) + 1 ) < ( R1 + 1 ) by L639 , XREAL_1:6;
L641: ( ( 0 ) + 1 ) <= R1 by L639 , NAT_1:13;
L642: ( C76 . R1 ) c= ( C76 . ( R1 + 1 ) ) by L641 , L630 , L12;
L643: ( C76 . ( R1 + 1 ) ) = ( ( C76 . ( R1 + 1 ) ) \/ ( C76 . R1 ) ) by L642 , XBOOLE_1:12
.= ( ( ( C76 . ( R1 + 1 ) ) \ ( C76 . R1 ) ) \/ ( C76 . R1 ) ) by XBOOLE_1:39;
L644:
now
per cases  by L632 , L643 , XBOOLE_0:def 3;
case L645: C79 in ( ( C76 . ( R1 + 1 ) ) \ ( C76 . R1 ) );
L646: ( D76 . C79 ) = ( D72 . ( R1 + 1 ) ) by L645 , L546 , L631 , L641 , L458;
L647:
now
per cases ;
case L648: ( R1 + 1 ) = C77;
L649: ( D76 . C79 ) in { R4 } by L648 , L558 , L646 , TARSKI:def 1;
thus L650: thesis by L649 , L548 , FUNCT_1:def 7;
end;
case L651: ( R1 + 1 ) <> C77;
L652: ( R1 + 1 ) < C77 by L651 , L628 , XXREAL_0:1;
L653: ( D76 . C79 ) >= D77 by L652 , L547 , L544 , L545 , L558 , L627 , L646 , RFINSEQ:19;
L654: D77 >= ( D76 . C79 ) by L547 , L544 , L545 , L560 , L620 , L627 , L640 , L646 , RFINSEQ:19;
L655: D77 = ( D76 . C79 ) by L654 , L653 , XXREAL_0:1;
L656: ( D76 . C79 ) in { R4 } by L655 , TARSKI:def 1;
thus L657: thesis by L656 , L548 , FUNCT_1:def 7;
end;
end;
thus L659: thesis by L647;
end;
case L660: C79 in ( C76 . R1 );
thus L661: thesis by L660 , L626 , L628 , L633 , L641 , FINSEQ_3:25 , NAT_1:13;
end;
end;
thus L663: thesis by L644;
end;
end;
thus L665: thesis by L634;
end;
L666: S6[ ( 0 ) ] by FINSEQ_3:25;
L667: (for R1 being (Element of ( NAT )) holds S6[ R1 ]) from NAT_1:sch 1(L666 , L625);
L668: C77 in ( dom C76 ) by L547 , L544 , L558 , FINSEQ_3:29;
L669: D82 in ( D76 " { R4 } ) by L668 , L623 , L667;
thus L670: thesis by L669;
end;

let R5 being set;
assume L671: R5 in ( D76 " { R4 } );
reconsider D83 = R5 as (Element of R7) by L671;
L672: ( D76 . D83 ) in { R4 } by L671 , FUNCT_1:def 7;
L673: ( D76 . D83 ) = R4 by L672 , TARSKI:def 1;
defpred S7[ Nat ] means ($1 in ( dom C76 ) & C77 < $1 & D83 in ( C76 . $1 ));
assume L674: (not R5 in ( C76 . C77 ));
L675: (ex B60 being Nat st S7[ B60 ])
proof
take D84 = ( len C76 );
L676: ( len C76 ) <> ( 0 ) by L144;
L677: ( ( 0 ) + 1 ) <= ( len C76 ) by L676 , NAT_1:13;
thus L678: D84 in ( dom C76 ) by L677 , FINSEQ_3:25;
L679: ( C76 . D84 ) = R7 by L139;
L680:
now
assume L681: D84 <= C77;
L682: C77 = ( len C76 ) by L681 , L547 , L544 , L564 , XXREAL_0:1;
L683: D83 in ( C76 . C77 ) by L682 , L679;
thus L684: contradiction by L683 , L674;
end;
thus L685: thesis by L680 , L679;
end;
consider C80 being Nat such that L686: (S7[ C80 ] & (for B61 being Nat holds (S7[ B61 ] implies C80 <= B61))) from NAT_1:sch 5(L675);
L687: 1 <= C80 by L686 , FINSEQ_3:25;
L688: ( max (( 0 ) , ( C80 - 1 )) ) = ( C80 - 1 ) by L687 , FINSEQ_2:4;
reconsider D85 = ( C80 - 1 ) as (Element of ( NAT )) by L688 , FINSEQ_2:5;
L689: ( C77 + 1 ) <= C80 by L686 , NAT_1:13;
L690: C77 <= D85 by L689 , XREAL_1:19;
L691: 1 <= D85 by L690 , L610 , XXREAL_0:2;
L692: C80 in ( dom D72 ) by L547 , L544 , L686 , FINSEQ_3:29;
L693: C80 <= ( len C76 ) by L686 , FINSEQ_3:25;
L694: C80 < ( C80 + 1 ) by NAT_1:13;
L695: D85 < C80 by L694 , XREAL_1:19;
L696: D85 < ( len C76 ) by L695 , L693 , XXREAL_0:2;
L697: D85 <= C80 by L694 , XREAL_1:19;
L698: D85 <= ( len C76 ) by L697 , L693 , XXREAL_0:2;
L699: D85 in ( dom C76 ) by L698 , L691 , FINSEQ_3:25;
L700:
now
per cases ;
case L701: C77 = D85;
L702: D83 in ( ( C76 . ( D85 + 1 ) ) \ ( C76 . D85 ) ) by L701 , L674 , L686 , XBOOLE_0:def 5;
L703: ( D76 . D83 ) = ( D72 . C80 ) by L702 , L546 , L691 , L696 , L458;
thus L704: contradiction by L703 , L558 , L673 , L686 , L692;
end;
case L705: C77 <> D85;
L706: C77 < D85 by L705 , L690 , XXREAL_0:1;
L707:
now
assume L708: D83 in ( C76 . D85 );
L709: C80 <= D85 by L708 , L686 , L699 , L706;
L710: ( C80 - D85 ) <= ( 0 ) by L709 , XREAL_1:47;
thus L711: contradiction by L710;
end;
L712: D83 in ( ( C76 . ( D85 + 1 ) ) \ ( C76 . D85 ) ) by L707 , L686 , XBOOLE_0:def 5;
L713: ( D76 . D83 ) = ( D72 . C80 ) by L712 , L546 , L691 , L696 , L458;
thus L714: contradiction by L713 , L558 , L673 , L686 , L692;
end;
end;
thus L716: contradiction by L700;
end;
thus L717: ( card ( D76 " { R4 } ) ) = ( card ( D72 " { R4 } ) ) by L621 , L547 , L544 , L610 , L564 , L615 , L620 , L11;
end;
case L718: C78 <> 1;
L719: 1 < C78 by L718 , L561 , XXREAL_0:1;
L720: 1 <= D78 by L719 , L563 , NAT_1:13;
L721: D78 <= ( len D72 ) by L616 , L563 , NAT_1:13;
L722: D78 in ( dom C76 ) by L721 , L547 , L544 , L720 , FINSEQ_3:25;
L723: ( C76 . D78 ) c= ( C76 . C77 ) by L722 , L547 , L544 , L545 , L558 , L613 , L99;
L724: ( C76 . C77 ) c= R7 by L547 , L544 , L545 , L558 , L167;
reconsider D86 = ( C76 . C77 ) , D87 = ( C76 . D78 ) as  finite set by L724 , L723;
L725: ( ( C76 . C77 ) \ ( C76 . D78 ) ) = ( D76 " { R4 } )
proof
thus L726: ( ( C76 . C77 ) \ ( C76 . D78 ) ) c= ( D76 " { R4 } )
proof
defpred S8[ (Element of ( NAT )) ] means (($1 in ( dom C76 ) & C78 <= $1 & $1 <= C77) implies (for B62 being (Element of R7) holds (B62 in ( ( C76 . $1 ) \ ( C76 . D78 ) ) implies B62 in ( D76 " { R4 } ))));
let R5 being set;
L727: ( C76 . C77 ) c= R7 by L547 , L544 , L545 , L558 , L167;
L728: (for R1 being (Element of ( NAT )) holds (S8[ R1 ] implies S8[ ( R1 + 1 ) ]))
proof
let R1 being (Element of ( NAT ));
assume L729: S8[ R1 ];
assume that
L730: ( R1 + 1 ) in ( dom C76 )
and
L731: C78 <= ( R1 + 1 )
and
L732: ( R1 + 1 ) <= C77;
let C81 being (Element of R7);
L733: ( R1 + 1 ) <= ( len C76 ) by L730 , FINSEQ_3:25;
L734: R1 < ( len C76 ) by L733 , NAT_1:13;
assume L735: C81 in ( ( C76 . ( R1 + 1 ) ) \ ( C76 . D78 ) );
L736:
now
per cases ;
case L737: ( R1 + 1 ) = C78;
L738: ( D76 . C81 ) = ( D72 . ( R1 + 1 ) ) by L737 , L546 , L720 , L734 , L735 , L458;
L739: ( D76 . C81 ) in { R4 } by L738 , L560 , L737 , TARSKI:def 1;
thus L740: thesis by L739 , L548 , FUNCT_1:def 7;
end;
case L741: C78 <> ( R1 + 1 );
L742: C78 < ( R1 + 1 ) by L741 , L731 , XXREAL_0:1;
L743: C78 <= R1 by L742 , NAT_1:13;
L744: 1 <= R1 by L743 , L561 , XXREAL_0:2;
L745: R1 <= C77 by L732 , NAT_1:13;
L746: R1 <= ( len C76 ) by L745 , L547 , L544 , L564 , XXREAL_0:2;
L747: (R1 <= ( R1 + 1 ) & R1 in ( dom C76 )) by L746 , L744 , FINSEQ_3:25 , NAT_1:11;
L748: ( C76 . R1 ) c= ( C76 . ( R1 + 1 ) ) by L747 , L730 , L99;
L749: ( ( C76 . ( R1 + 1 ) ) \ ( C76 . D78 ) ) = ( ( ( C76 . ( R1 + 1 ) ) \/ ( C76 . R1 ) ) \ ( C76 . D78 ) ) by L748 , XBOOLE_1:12
.= ( ( ( ( C76 . ( R1 + 1 ) ) \ ( C76 . R1 ) ) \/ ( C76 . R1 ) ) \ ( C76 . D78 ) ) by XBOOLE_1:39
.= ( ( ( ( C76 . ( R1 + 1 ) ) \ ( C76 . R1 ) ) \ ( C76 . D78 ) ) \/ ( ( C76 . R1 ) \ ( C76 . D78 ) ) ) by XBOOLE_1:42;
L750:
now
per cases  by L735 , L749 , XBOOLE_0:def 3;
case L751: C81 in ( ( ( C76 . ( R1 + 1 ) ) \ ( C76 . R1 ) ) \ ( C76 . D78 ) );
L752: C81 in ( ( C76 . ( R1 + 1 ) ) \ ( C76 . R1 ) ) by L751 , XBOOLE_0:def 5;
L753: ( D76 . C81 ) = ( D72 . ( R1 + 1 ) ) by L752 , L546 , L734 , L744 , L458;
L754:
now
per cases ;
case L755: ( R1 + 1 ) = C77;
L756: ( D76 . C81 ) in { R4 } by L755 , L558 , L753 , TARSKI:def 1;
thus L757: thesis by L756 , L548 , FUNCT_1:def 7;
end;
case L758: ( R1 + 1 ) <> C77;
L759: ( R1 + 1 ) < C77 by L758 , L732 , XXREAL_0:1;
L760: ( D76 . C81 ) >= D77 by L759 , L547 , L544 , L545 , L558 , L730 , L753 , RFINSEQ:19;
L761: D77 >= ( D76 . C81 ) by L547 , L544 , L545 , L560 , L730 , L742 , L753 , RFINSEQ:19;
L762: D77 = ( D76 . C81 ) by L761 , L760 , XXREAL_0:1;
L763: ( D76 . C81 ) in { R4 } by L762 , TARSKI:def 1;
thus L764: thesis by L763 , L548 , FUNCT_1:def 7;
end;
end;
thus L766: thesis by L754;
end;
case L767: C81 in ( ( C76 . R1 ) \ ( C76 . D78 ) );
thus L768: thesis by L767 , L729 , L732 , L742 , L744 , L746 , FINSEQ_3:25 , NAT_1:13;
end;
end;
thus L770: thesis by L750;
end;
end;
thus L772: thesis by L736;
end;
L773: S8[ ( 0 ) ];
L774: (for R1 being (Element of ( NAT )) holds S8[ R1 ]) from NAT_1:sch 1(L773 , L728);
assume L775: R5 in ( ( C76 . C77 ) \ ( C76 . D78 ) );
L776: R5 in ( C76 . C77 ) by L775;
reconsider D88 = R5 as (Element of R7) by L776 , L727;
L777: C77 in ( dom C76 ) by L547 , L544 , L558 , FINSEQ_3:29;
L778: D88 in ( D76 " { R4 } ) by L777 , L611 , L775 , L774;
thus L779: thesis by L778;
end;

let R5 being set;
assume L780: R5 in ( D76 " { R4 } );
reconsider D89 = R5 as (Element of R7) by L780;
L781: ( D76 . D89 ) in { R4 } by L780 , FUNCT_1:def 7;
L782: ( D76 . D89 ) = R4 by L781 , TARSKI:def 1;
assume L783: (not R5 in ( ( C76 . C77 ) \ ( C76 . D78 ) ));
L784:
now
per cases  by L783 , XBOOLE_0:def 5;
case L785: (not R5 in ( C76 . C77 ));
defpred S9[ Nat ] means ($1 in ( dom C76 ) & C77 < $1 & D89 in ( C76 . $1 ));
L786: (ex B63 being Nat st S9[ B63 ])
proof
take D90 = ( len C76 );
L787: ( len C76 ) <> ( 0 ) by L144;
L788: ( ( 0 ) + 1 ) <= ( len C76 ) by L787 , NAT_1:13;
thus L789: D90 in ( dom C76 ) by L788 , FINSEQ_3:25;
L790: ( C76 . D90 ) = R7 by L139;
L791:
now
assume L792: D90 <= C77;
L793: C77 = ( len C76 ) by L792 , L547 , L544 , L564 , XXREAL_0:1;
L794: D89 in ( C76 . C77 ) by L793 , L790;
thus L795: contradiction by L794 , L785;
end;
thus L796: thesis by L791 , L790;
end;
consider C82 being Nat such that L797: (S9[ C82 ] & (for B64 being Nat holds (S9[ B64 ] implies C82 <= B64))) from NAT_1:sch 5(L786);
L798: 1 <= C82 by L797 , FINSEQ_3:25;
L799: ( max (( 0 ) , ( C82 - 1 )) ) = ( C82 - 1 ) by L798 , FINSEQ_2:4;
reconsider D91 = ( C82 - 1 ) as (Element of ( NAT )) by L799 , FINSEQ_2:5;
L800: ( C77 + 1 ) <= C82 by L797 , NAT_1:13;
L801: C77 <= D91 by L800 , XREAL_1:19;
L802: 1 <= D91 by L801 , L610 , XXREAL_0:2;
L803: C82 in ( dom D72 ) by L547 , L544 , L797 , FINSEQ_3:29;
L804: C82 <= ( len C76 ) by L797 , FINSEQ_3:25;
L805: C82 < ( C82 + 1 ) by NAT_1:13;
L806: D91 < C82 by L805 , XREAL_1:19;
L807: D91 < ( len C76 ) by L806 , L804 , XXREAL_0:2;
L808: D91 <= C82 by L805 , XREAL_1:19;
L809: D91 <= ( len C76 ) by L808 , L804 , XXREAL_0:2;
L810: D91 in ( dom C76 ) by L809 , L802 , FINSEQ_3:25;
L811:
now
per cases ;
case L812: C77 = D91;
L813: D89 in ( ( C76 . ( D91 + 1 ) ) \ ( C76 . D91 ) ) by L812 , L785 , L797 , XBOOLE_0:def 5;
L814: ( D76 . D89 ) = ( D72 . C82 ) by L813 , L546 , L802 , L807 , L458;
thus L815: contradiction by L814 , L558 , L782 , L797 , L803;
end;
case L816: C77 <> D91;
L817: C77 < D91 by L816 , L801 , XXREAL_0:1;
L818:
now
assume L819: D89 in ( C76 . D91 );
L820: C82 <= D91 by L819 , L797 , L810 , L817;
L821: ( C82 - D91 ) <= ( 0 ) by L820 , XREAL_1:47;
thus L822: contradiction by L821;
end;
L823: D89 in ( ( C76 . ( D91 + 1 ) ) \ ( C76 . D91 ) ) by L818 , L797 , XBOOLE_0:def 5;
L824: ( D76 . D89 ) = ( D72 . C82 ) by L823 , L546 , L802 , L807 , L458;
thus L825: contradiction by L824 , L558 , L782 , L797 , L803;
end;
end;
thus L827: contradiction by L811;
end;
case L828: R5 in ( C76 . D78 );
defpred S10[ Nat ] means ($1 in ( dom C76 ) & $1 <= D78 & D89 in ( C76 . $1 ));
L829: (ex B65 being Nat st S10[ B65 ]) by L722 , L828;
consider C83 being Nat such that L830: (S10[ C83 ] & (for B66 being Nat holds (S10[ B66 ] implies C83 <= B66))) from NAT_1:sch 5(L829);
L831: 1 <= C83 by L830 , FINSEQ_3:25;
L832: ( max (( 0 ) , ( C83 - 1 )) ) = ( C83 - 1 ) by L831 , FINSEQ_2:4;
reconsider D92 = ( C83 - 1 ) as (Element of ( NAT )) by L832 , FINSEQ_2:5;
L833: C83 <= ( len C76 ) by L830 , FINSEQ_3:25;
L834: C83 in ( dom D72 ) by L547 , L544 , L830 , FINSEQ_3:29;
L835:
now
per cases ;
case L836: C83 = 1;
L837: ( D76 . D89 ) = ( D72 . 1 ) by L836 , L546 , L830 , L458;
L838: C78 <= 1 by L837 , L560 , L618 , L782;
thus L839: contradiction by L838 , L561 , L718 , XXREAL_0:1;
end;
case L840: C83 <> 1;
L841: 1 < C83 by L840 , L831 , XXREAL_0:1;
L842: ( 1 + 1 ) <= C83 by L841 , NAT_1:13;
L843: 1 <= D92 by L842 , XREAL_1:19;
L844: C83 < ( C83 + 1 ) by NAT_1:13;
L845: D92 <= C83 by L844 , XREAL_1:19;
L846: D92 <= ( len C76 ) by L845 , L833 , XXREAL_0:2;
L847: D92 in ( dom C76 ) by L846 , L843 , FINSEQ_3:25;
L848: D92 < C83 by L844 , XREAL_1:19;
L849: D92 < ( len C76 ) by L848 , L833 , XXREAL_0:2;
L850: D92 <= D78 by L830 , L845 , XXREAL_0:2;
L851: (not D89 in ( C76 . D92 )) by L850 , L830 , L848 , L847;
L852: D89 in ( ( C76 . ( D92 + 1 ) ) \ ( C76 . D92 ) ) by L851 , L830 , XBOOLE_0:def 5;
L853: ( D76 . D89 ) = ( D72 . ( D92 + 1 ) ) by L852 , L546 , L843 , L849 , L458;
L854: C78 <= C83 by L853 , L560 , L782 , L834;
L855: ( D78 + 1 ) <= D78 by L854 , L830 , XXREAL_0:2;
L856: 1 <= ( D78 - D78 ) by L855 , XREAL_1:19;
L857: 1 <= ( 0 ) by L856;
thus L858: contradiction by L857;
end;
end;
thus L860: contradiction by L835;
end;
end;
thus L862: contradiction by L784;
end;
thus L863: ( card ( D76 " { R4 } ) ) = ( ( card D86 ) - ( card D87 ) ) by L725 , L723 , CARD_2:44
.= ( C77 - ( card D87 ) ) by L547 , L544 , L610 , L564 , L11
.= ( card ( D72 " { R4 } ) ) by L547 , L544 , L615 , L720 , L721 , L11;
end;
end;
thus L865: ( card ( D72 " { R4 } ) ) = ( card ( D76 " { R4 } ) ) by L619;
end;
end;
thus L867: ( card ( Coim (D72 , R4) ) ) = ( card ( Coim (D76 , R4) ) ) by L551;
end;
thus L868: thesis by L550 , CLASSES1:def 9;
end;
theorem
L869: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B67 being (PartFunc of R8 , ( REAL )) holds (for B68 being (RearrangmentGen of R7) holds ((B67 is  total & ( card R7 ) = ( card R8 )) implies ( FinS (( Rland (B67 , B68) ) , R7) ) = ( FinS (B67 , R8) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C84 being (PartFunc of R8 , ( REAL ));
let C85 being (RearrangmentGen of R7);
assume L870: (C84 is  total & ( card R7 ) = ( card R8 ));
L871: ( Rland (C84 , C85) ) , ( FinS (C84 , R8) ) are_fiberwise_equipotent  by L870 , L542;
L872: ( dom ( Rland (C84 , C85) ) ) = R7 by L870 , L325;
L873: ( ( Rland (C84 , C85) ) | R7 ) = ( Rland (C84 , C85) ) by L872 , RELAT_1:68;
thus L874: thesis by L873 , L871 , L872 , RFUNCT_3:def 13;
end;
theorem
L875: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B69 being (PartFunc of R8 , ( REAL )) holds (for B70 being (RearrangmentGen of R7) holds ((B69 is  total & ( card R7 ) = ( card R8 )) implies ( Sum (( Rland (B69 , B70) ) , R7) ) = ( Sum (B69 , R8) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C86 being (PartFunc of R8 , ( REAL ));
let C87 being (RearrangmentGen of R7);
assume L876: (C86 is  total & ( card R7 ) = ( card R8 ));
L877: ( FinS (( Rland (C86 , C87) ) , R7) ) = ( FinS (C86 , R8) ) by L876 , L869;
thus L878: ( Sum (( Rland (C86 , C87) ) , R7) ) = ( Sum ( FinS (C86 , R8) ) ) by L877 , RFUNCT_3:def 14
.= ( Sum (C86 , R8) ) by RFUNCT_3:def 14;
end;
theorem
L879: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B71 being (PartFunc of R8 , ( REAL )) holds (for B72 being (RearrangmentGen of R7) holds ((B71 is  total & ( card R7 ) = ( card R8 )) implies (( FinS (( ( Rland (B71 , B72) ) - R6 ) , R7) ) = ( FinS (( B71 - R6 ) , R8) ) & ( Sum (( ( Rland (B71 , B72) ) - R6 ) , R7) ) = ( Sum (( B71 - R6 ) , R8) ))))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C88 being (PartFunc of R8 , ( REAL ));
let C89 being (RearrangmentGen of R7);
assume that
L880: C88 is  total
and
L881: ( card R7 ) = ( card R8 );
L882: ( dom C88 ) = R8 by L880 , PARTFUN1:def 2;
L883: ( C88 | R8 ) = C88 by L882 , RELAT_1:68;
L884: ( FinS (C88 , R8) ) , C88 are_fiberwise_equipotent  by L883 , L882 , RFUNCT_3:def 13;
L885: ( Rland (C88 , C89) ) , ( FinS (C88 , R8) ) are_fiberwise_equipotent  by L880 , L881 , L542;
L886: ( Rland (C88 , C89) ) , C88 are_fiberwise_equipotent  by L885 , L884 , CLASSES1:76;
L887: ( ( Rland (C88 , C89) ) - R6 ) , ( C88 - R6 ) are_fiberwise_equipotent  by L886 , RFUNCT_3:51;
L888: ( dom ( ( Rland (C88 , C89) ) - R6 ) ) = ( dom ( Rland (C88 , C89) ) ) by VALUED_1:3;
L889: ( ( ( Rland (C88 , C89) ) - R6 ) | R7 ) = ( ( Rland (C88 , C89) ) - R6 ) by L888 , RELAT_1:68;
L890: ( FinS (( ( Rland (C88 , C89) ) - R6 ) , R7) ) , ( ( Rland (C88 , C89) ) - R6 ) are_fiberwise_equipotent  by L889 , L888 , RFUNCT_3:def 13;
L891: ( FinS (( ( Rland (C88 , C89) ) - R6 ) , R7) ) , ( C88 - R6 ) are_fiberwise_equipotent  by L890 , L887 , CLASSES1:76;
L892: ( dom ( C88 - R6 ) ) = ( dom C88 ) by VALUED_1:3;
L893: ( ( C88 - R6 ) | R8 ) = ( C88 - R6 ) by L892 , RELAT_1:68;
thus L894: ( FinS (( ( Rland (C88 , C89) ) - R6 ) , R7) ) = ( FinS (( C88 - R6 ) , R8) ) by L893 , L892 , L891 , RFUNCT_3:def 13;
thus L895: ( Sum (( ( Rland (C88 , C89) ) - R6 ) , R7) ) = ( Sum ( FinS (( C88 - R6 ) , R8) ) ) by L894 , RFUNCT_3:def 14
.= ( Sum (( C88 - R6 ) , R8) ) by RFUNCT_3:def 14;
end;
theorem
L896: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B73 being (PartFunc of R8 , ( REAL )) holds (for B74 being (RearrangmentGen of R7) holds ((B73 is  total & ( card R7 ) = ( card R8 )) implies ( dom ( Rlor (B73 , B74) ) ) = R7)))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C90 being (PartFunc of R8 , ( REAL ));
let C91 being (RearrangmentGen of R7);
set D93 = ( Co_Gen C91 );
L897: (( len ( CHI (D93 , R7) ) ) = ( len D93 ) & ( len ( ( MIM ( FinS (C90 , R8) ) ) (#) ( CHI (D93 , R7) ) ) ) = ( min (( len ( MIM ( FinS (C90 , R8) ) ) ) , ( len ( CHI (D93 , R7) ) )) )) by RFUNCT_3:def 6 , RFUNCT_3:def 7;
assume L898: (C90 is  total & ( card R7 ) = ( card R8 ));
L899: (( len ( MIM ( FinS (C90 , R8) ) ) ) = ( len ( CHI (D93 , R7) ) ) & ( len D93 ) = ( card R8 )) by L898 , L92 , L315;
thus L900: ( dom ( Rlor (C90 , C91) ) ) c= R7;
let R4 being set;
assume L901: R4 in R7;
reconsider D94 = R4 as (Element of R7) by L901;
L902: D94 is_common_for_dom ( ( MIM ( FinS (C90 , R8) ) ) (#) ( CHI (D93 , R7) ) ) by RFUNCT_3:32;
thus L903: thesis by L902 , L897 , L899 , RFUNCT_3:28;
end;
theorem
L904: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B75 being (Element of R7) holds (for B76 being (PartFunc of R8 , ( REAL )) holds (for B77 being (RearrangmentGen of R7) holds ((B76 is  total & ( card R7 ) = ( card R8 )) implies ((B75 in ( ( Co_Gen B77 ) . 1 ) implies ( ( Rlor (B76 , B77) ) . B75 ) = ( ( FinS (B76 , R8) ) . 1 )) & (for R1 being (Element of ( NAT )) holds ((1 <= R1 & R1 < ( len ( Co_Gen B77 ) ) & B75 in ( ( ( Co_Gen B77 ) . ( R1 + 1 ) ) \ ( ( Co_Gen B77 ) . R1 ) )) implies ( ( Rlor (B76 , B77) ) . B75 ) = ( ( FinS (B76 , R8) ) . ( R1 + 1 ) ))))))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C92 being (Element of R7);
let C93 being (PartFunc of R8 , ( REAL ));
let C94 being (RearrangmentGen of R7);
set D95 = ( FinS (C93 , R8) );
set D96 = ( MIM D95 );
set D97 = ( Co_Gen C94 );
set D98 = ( CHI (D97 , R7) );
L905: ( ( Rlor (C93 , C94) ) . C92 ) = ( Sum ( ( D96 (#) D98 ) # C92 ) ) by RFUNCT_3:32 , RFUNCT_3:33;
L906: (( len D98 ) = ( len D97 ) & ( len D96 ) = ( len D95 )) by RFINSEQ:def 2 , RFUNCT_3:def 6;
assume L907: (C93 is  total & ( card R7 ) = ( card R8 ));
L908: ( len D96 ) = ( len D98 ) by L907 , L315;
thus L909: (C92 in ( D97 . 1 ) implies ( ( Rlor (C93 , C94) ) . C92 ) = ( ( FinS (C93 , R8) ) . 1 ))
proof
assume L910: C92 in ( D97 . 1 );
thus L911: ( ( Rlor (C93 , C94) ) . C92 ) = ( Sum D96 ) by L910 , L907 , L905 , L333
.= ( ( FinS (C93 , R8) ) . 1 ) by L908 , L906 , L144 , RFINSEQ:16;
end;

let R1 being (Element of ( NAT ));
set D99 = ( MIM ( ( FinS (C93 , R8) ) /^ R1 ) );
assume that
L912: 1 <= R1
and
L913: R1 < ( len D97 )
and
L914: C92 in ( ( D97 . ( R1 + 1 ) ) \ ( D97 . R1 ) );
L915: ( ( D96 (#) D98 ) # C92 ) = ( ( R1 |-> (( 0 ) qua Real) ) ^ D99 ) by L907 , L912 , L913 , L914 , L333;
thus L916: ( ( Rlor (C93 , C94) ) . C92 ) = ( ( Sum ( R1 |-> (( 0 ) qua Real) ) ) + ( Sum D99 ) ) by L915 , L905 , RVSUM_1:75
.= ( ( 0 ) + ( Sum D99 ) ) by RVSUM_1:81
.= ( ( FinS (C93 , R8) ) . ( R1 + 1 ) ) by L908 , L906 , L913 , RFINSEQ:17;
end;
theorem
L917: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B78 being (PartFunc of R8 , ( REAL )) holds (for B79 being (RearrangmentGen of R7) holds ((B78 is  total & ( card R7 ) = ( card R8 )) implies ( rng ( Rlor (B78 , B79) ) ) = ( rng ( FinS (B78 , R8) ) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C95 being (PartFunc of R8 , ( REAL ));
let C96 being (RearrangmentGen of R7);
assume that
L918: C95 is  total
and
L919: ( card R7 ) = ( card R8 );
set D100 = ( FinS (C95 , R8) );
set D101 = ( Rlor (C95 , C96) );
set D102 = ( MIM D100 );
set D103 = ( Co_Gen C96 );
set D104 = ( CHI (D103 , R7) );
L920: ( len D102 ) = ( len D104 ) by L918 , L919 , L315;
L921: ( dom C95 ) is  finite;
reconsider D105 = C95 as  finite Function by L921 , FINSET_1:10;
L922: ( dom D100 ) = ( Seg ( len D100 ) ) by FINSEQ_1:def 3;
L923: ( dom D101 ) = R7 by L918 , L919 , L896;
L924: ( dom D103 ) = ( Seg ( len D103 ) ) by FINSEQ_1:def 3;
reconsider D106 = ( dom D100 ) , D107 = ( dom D105 ) as  finite set;
L925: (( len D104 ) = ( len D103 ) & ( len D102 ) = ( len D100 )) by RFINSEQ:def 2 , RFUNCT_3:def 6;
L926: ( dom C95 ) = R8 by L918 , PARTFUN1:def 2;
L927: ( C95 | R8 ) = C95 by L926 , RELAT_1:68;
L928: D100 , C95 are_fiberwise_equipotent  by L927 , L926 , RFUNCT_3:def 13;
L929: ( card D106 ) = ( card D107 ) by L928 , CLASSES1:81;
L930: ( len D100 ) <> ( 0 ) by L929 , L926 , L922;
L931: ( ( 0 ) + 1 ) <= ( len D100 ) by L930 , NAT_1:13;
L932: 1 in ( dom D100 ) by L931 , FINSEQ_3:25;
thus L933: ( rng D101 ) c= ( rng D100 )
proof
let R4 being set;
assume L934: R4 in ( rng D101 );
consider C97 being (Element of R7) such that L935: C97 in ( dom D101 ) and L936: ( D101 . C97 ) = R4 by L934 , PARTFUN1:3;
defpred S11[ set ] means ($1 in ( dom D103 ) & C97 in ( D103 . $1 ));
L937: (ex B80 being Nat st S11[ B80 ])
proof
take D108 = ( len D103 );
L938: ( D103 . D108 ) = R7 by L139;
thus L939: thesis by L938 , L920 , L925 , L931 , FINSEQ_3:25;
end;
consider C98 being Nat such that L940: (S11[ C98 ] & (for B81 being Nat holds (S11[ B81 ] implies C98 <= B81))) from NAT_1:sch 5(L937);
L941: 1 <= C98 by L940 , FINSEQ_3:25;
L942: ( max (( 0 ) , ( C98 - 1 )) ) = ( C98 - 1 ) by L941 , FINSEQ_2:4;
reconsider D109 = ( C98 - 1 ) as (Element of ( NAT )) by L942 , FINSEQ_2:5;
L943: C98 <= ( len D103 ) by L940 , FINSEQ_3:25;
L944:
now
per cases ;
case L945: C98 = 1;
L946: ( D101 . C97 ) = ( D100 . 1 ) by L945 , L918 , L919 , L940 , L904;
thus L947: thesis by L946 , L932 , L936 , FUNCT_1:def 3;
end;
case L948: C98 <> 1;
L949: 1 < C98 by L948 , L941 , XXREAL_0:1;
L950: ( 1 + 1 ) <= C98 by L949 , NAT_1:13;
L951: 1 <= D109 by L950 , XREAL_1:19;
L952: D109 < C98 by XREAL_1:44;
L953: D109 <= ( len D103 ) by L952 , L943 , XXREAL_0:2;
L954: D109 in ( dom D103 ) by L953 , L951 , FINSEQ_3:25;
L955: (not C97 in ( D103 . D109 )) by L954 , L940 , XREAL_1:44;
L956: C97 in ( ( D103 . ( D109 + 1 ) ) \ ( D103 . D109 ) ) by L955 , L940 , XBOOLE_0:def 5;
L957: D109 < ( len D103 ) by L943 , L952 , XXREAL_0:2;
L958: ( D101 . C97 ) = ( D100 . ( D109 + 1 ) ) by L957 , L918 , L919 , L951 , L956 , L904;
thus L959: thesis by L958 , L920 , L925 , L922 , L924 , L936 , L940 , FUNCT_1:def 3;
end;
end;
thus L961: thesis by L944;
end;

let R4 being set;
defpred S12[ Nat ] means ($1 in ( dom D100 ) & ( D100 . $1 ) = R4);
assume L962: R4 in ( rng D100 );
L963: (ex B82 being Nat st S12[ B82 ]) by L962 , FINSEQ_2:10;
consider C99 being Nat such that L964: (S12[ C99 ] & (for B83 being Nat holds (S12[ B83 ] implies C99 <= B83))) from NAT_1:sch 5(L963);
L965: 1 <= C99 by L964 , FINSEQ_3:25;
L966: ( max (( 0 ) , ( C99 - 1 )) ) = ( C99 - 1 ) by L965 , FINSEQ_2:4;
reconsider D110 = ( C99 - 1 ) as (Element of ( NAT )) by L966 , FINSEQ_2:5;
L967: C99 <= ( len D100 ) by L964 , FINSEQ_3:25;
L968:
now
per cases ;
case L969: C99 = 1;
set D111 = the (Element of ( D103 . 1 ));
L970: ( D103 . 1 ) <> ( {} ) by L920 , L925 , L922 , L924 , L932 , L171;
L971: ( D103 . 1 ) c= R7 by L920 , L925 , L922 , L924 , L932 , L167;
reconsider D112 = D111 as (Element of R7) by L971 , L970 , TARSKI:def 3;
L972: ( D101 . D112 ) = ( D100 . 1 ) by L918 , L919 , L970 , L904;
thus L973: thesis by L972 , L923 , L964 , L969 , FUNCT_1:def 3;
end;
case L974: C99 <> 1;
set D113 = the (Element of ( ( D103 . ( D110 + 1 ) ) \ ( D103 . D110 ) ));
L975: 1 < C99 by L965 , L974 , XXREAL_0:1;
L976: ( 1 + 1 ) <= C99 by L975 , NAT_1:13;
L977: 1 <= D110 by L976 , XREAL_1:19;
L978: ( D110 + 1 ) <= ( len D100 ) by L964 , FINSEQ_3:25;
L979: D110 <= ( ( len D100 ) - 1 ) by L978 , XREAL_1:19;
L980: ( ( D103 . ( D110 + 1 ) ) \ ( D103 . D110 ) ) <> ( {} ) by L979 , L920 , L925 , L977 , L176;
L981: D113 in ( D103 . ( D110 + 1 ) ) by L980 , XBOOLE_0:def 5;
L982: ( D103 . C99 ) c= R7 by L920 , L925 , L922 , L924 , L964 , L167;
reconsider D114 = D113 as (Element of R7) by L982 , L981;
L983: D110 < C99 by XREAL_1:44;
L984: D110 < ( len D100 ) by L983 , L967 , XXREAL_0:2;
L985: ( D101 . D114 ) = ( D100 . ( D110 + 1 ) ) by L984 , L918 , L919 , L920 , L925 , L977 , L980 , L904;
thus L986: thesis by L985 , L923 , L964 , FUNCT_1:def 3;
end;
end;
thus L988: thesis by L968;
end;
theorem
L989: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B84 being (PartFunc of R8 , ( REAL )) holds (for B85 being (RearrangmentGen of R7) holds ((B84 is  total & ( card R7 ) = ( card R8 )) implies ( Rlor (B84 , B85) ) , ( FinS (B84 , R8) ) are_fiberwise_equipotent )))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C100 being (PartFunc of R8 , ( REAL ));
let C101 being (RearrangmentGen of R7);
set D115 = ( FinS (C100 , R8) );
set D116 = ( Rlor (C100 , C101) );
set D117 = ( MIM D115 );
set D118 = ( Co_Gen C101 );
set D119 = ( CHI (D118 , R7) );
L990: (( len D119 ) = ( len D118 ) & ( len D117 ) = ( len D115 )) by RFINSEQ:def 2 , RFUNCT_3:def 6;
assume L991: (C100 is  total & ( card R7 ) = ( card R8 ));
L992: ( rng D116 ) = ( rng D115 ) by L991 , L917;
L993: ( dom D116 ) = R7 by L991 , L896;
reconsider D120 = D116 as  finite (PartFunc of R7 , ( REAL )) by L993 , FINSET_1:10;
L994: ( len D117 ) = ( len D119 ) by L991 , L315;
L995: (( dom D115 ) = ( Seg ( len D115 ) ) & ( dom D118 ) = ( Seg ( len D118 ) )) by FINSEQ_1:def 3;
L996:
now
let R4 being set;
L997:
now
per cases ;
case L998: (not R4 in ( rng D115 ));
L999: ( D115 " { R4 } ) = ( {} ) by L998 , L4;
thus L1000: ( card ( D115 " { R4 } ) ) = ( card ( D120 " { R4 } ) ) by L999 , L992 , L998 , L4;
end;
case L1001: R4 in ( rng D115 );
defpred S13[ Nat ] means ($1 in ( dom D115 ) & ( D115 . $1 ) = R4);
L1002: (ex B86 being Nat st S13[ B86 ]) by L1001 , FINSEQ_2:10;
consider C102 being Nat such that L1003: (S13[ C102 ] & (for B87 being Nat holds (S13[ B87 ] implies C102 <= B87))) from NAT_1:sch 5(L1002);
reconsider D121 = R4 as Real by L1003;
L1004: 1 <= C102 by L1003 , FINSEQ_3:25;
L1005: ( max (( 0 ) , ( C102 - 1 )) ) = ( C102 - 1 ) by L1004 , FINSEQ_2:4;
reconsider D122 = ( C102 - 1 ) as (Element of ( NAT )) by L1005 , FINSEQ_2:5;
L1006: ( D122 + 1 ) = C102;
L1007: (for B88 being Nat holds (S13[ B88 ] implies B88 <= ( len D115 ))) by FINSEQ_3:25;
consider C103 being Nat such that L1008: (S13[ C103 ] & (for B89 being Nat holds (S13[ B89 ] implies B89 <= C103))) from NAT_1:sch 6(L1007 , L1002);
L1009: C103 <= ( len D115 ) by L1008 , FINSEQ_3:25;
L1010: ( ( Seg C103 ) \ ( Seg D122 ) ) = ( D115 " { R4 } )
proof
thus L1011: ( ( Seg C103 ) \ ( Seg D122 ) ) c= ( D115 " { R4 } )
proof
let R5 being set;
assume L1012: R5 in ( ( Seg C103 ) \ ( Seg D122 ) );
reconsider D123 = R5 as (Element of ( NAT )) by L1012;
reconsider D124 = ( D115 . D123 ) as Real;
L1013: R5 in ( Seg C103 ) by L1012 , XBOOLE_0:def 5;
L1014: 1 <= D123 by L1013 , FINSEQ_1:1;
L1015: D123 <= C103 by L1013 , FINSEQ_1:1;
L1016: D123 <= ( len D115 ) by L1015 , L1009 , XXREAL_0:2;
L1017: D123 in ( dom D115 ) by L1016 , L1014 , FINSEQ_3:25;
L1018: (not R5 in ( Seg D122 )) by L1012 , XBOOLE_0:def 5;
L1019: (D123 < 1 or D122 < D123) by L1018 , FINSEQ_1:1;
L1020: C102 < ( D123 + 1 ) by L1019 , L1013 , FINSEQ_1:1 , XREAL_1:19;
L1021: C102 <= D123 by L1020 , NAT_1:13;
L1022:
now
per cases ;
case L1023: D123 = C103;
L1024: D124 in { R4 } by L1023 , L1008 , TARSKI:def 1;
thus L1025: thesis by L1024 , L1017 , FUNCT_1:def 7;
end;
case L1026: D123 <> C103;
L1027: D123 < C103 by L1026 , L1015 , XXREAL_0:1;
L1028: D124 >= D121 by L1027 , L1008 , L1017 , RFINSEQ:19;
L1029:
now
per cases ;
case L1030: D123 = C102;
L1031: D124 in { R4 } by L1030 , L1003 , TARSKI:def 1;
thus L1032: thesis by L1031 , L1017 , FUNCT_1:def 7;
end;
case L1033: D123 <> C102;
L1034: C102 < D123 by L1033 , L1021 , XXREAL_0:1;
L1035: D121 >= D124 by L1034 , L1003 , L1017 , RFINSEQ:19;
L1036: D121 = D124 by L1035 , L1028 , XXREAL_0:1;
L1037: D124 in { R4 } by L1036 , TARSKI:def 1;
thus L1038: thesis by L1037 , L1017 , FUNCT_1:def 7;
end;
end;
thus L1040: thesis by L1029;
end;
end;
thus L1042: thesis by L1022;
end;

let R5 being set;
assume L1043: R5 in ( D115 " { R4 } );
L1044: R5 in ( dom D115 ) by L1043 , FUNCT_1:def 7;
reconsider D125 = R5 as (Element of ( NAT )) by L1043;
L1045: 1 <= D125 by L1044 , FINSEQ_3:25;
L1046: ( D115 . R5 ) in { R4 } by L1043 , FUNCT_1:def 7;
L1047: ( D115 . D125 ) = R4 by L1046 , TARSKI:def 1;
L1048: C102 <= D125 by L1047 , L1003 , L1044;
L1049: C102 < ( D125 + 1 ) by L1048 , NAT_1:13;
L1050: (D122 < D125 or D125 < 1) by L1049 , XREAL_1:19;
L1051: (not D125 in ( Seg D122 )) by L1050 , FINSEQ_1:1;
L1052: D125 <= C103 by L1008 , L1044 , L1047;
L1053: D125 in ( Seg C103 ) by L1052 , L1045 , FINSEQ_1:1;
thus L1054: thesis by L1053 , L1051 , XBOOLE_0:def 5;
end;
L1055: 1 <= C103 by L1008 , FINSEQ_3:25;
L1056: C102 <= C103 by L1003 , L1008;
L1057: D122 <= C102 by XREAL_1:43;
L1058: D122 <= C103 by L1057 , L1056 , XXREAL_0:2;
L1059: ( Seg D122 ) c= ( Seg C103 ) by L1058 , FINSEQ_1:5;
L1060: ( card ( D115 " { R4 } ) ) = ( ( card ( Seg C103 ) ) - ( card ( Seg D122 ) ) ) by L1059 , L1010 , CARD_2:44
.= ( C103 - ( card ( Seg D122 ) ) ) by FINSEQ_1:57
.= ( C103 - D122 ) by FINSEQ_1:57;
L1061: C102 <= ( len D115 ) by L1003 , FINSEQ_3:25;
L1062: 1 <= ( len D115 ) by L1061 , L1004 , XXREAL_0:2;
L1063: 1 in ( dom D115 ) by L1062 , FINSEQ_3:25;
L1064:
now
per cases ;
case L1065: C102 = 1;
L1066: ( D118 . C103 ) = ( D120 " { R4 } )
proof
thus L1067: ( D118 . C103 ) c= ( D120 " { R4 } )
proof
defpred S14[ (Element of ( NAT )) ] means (($1 in ( dom D118 ) & $1 <= C103) implies (for B90 being (Element of R7) holds (B90 in ( D118 . $1 ) implies B90 in ( D120 " { R4 } ))));
let R5 being set;
assume L1068: R5 in ( D118 . C103 );
L1069: ( D118 . C103 ) c= R7 by L994 , L990 , L995 , L1008 , L167;
reconsider D126 = R5 as (Element of R7) by L1069 , L1068;
L1070: (for R1 being (Element of ( NAT )) holds (S14[ R1 ] implies S14[ ( R1 + 1 ) ]))
proof
let R1 being (Element of ( NAT ));
assume L1071: S14[ R1 ];
assume that
L1072: ( R1 + 1 ) in ( dom D118 )
and
L1073: ( R1 + 1 ) <= C103;
L1074: ( R1 + 1 ) <= ( len D118 ) by L1072 , FINSEQ_3:25;
L1075: R1 <= ( ( len D118 ) - 1 ) by L1074 , XREAL_1:19;
L1076: R1 < ( len D118 ) by L1074 , NAT_1:13;
let C104 being (Element of R7);
assume L1077: C104 in ( D118 . ( R1 + 1 ) );
L1078: R1 <= ( len D118 ) by L1074 , NAT_1:13;
L1079:
now
per cases ;
case L1080: R1 = ( 0 );
L1081: ( D120 . C104 ) = R4 by L1080 , L991 , L1003 , L1065 , L1077 , L904;
L1082: ( D120 . C104 ) in { R4 } by L1081 , TARSKI:def 1;
thus L1083: thesis by L1082 , L993 , FUNCT_1:def 7;
end;
case L1084: R1 <> ( 0 );
L1085: ( ( 0 ) + 1 ) < ( R1 + 1 ) by L1084 , XREAL_1:6;
L1086: ( ( 0 ) + 1 ) <= R1 by L1084 , NAT_1:13;
L1087: ( D118 . R1 ) c= ( D118 . ( R1 + 1 ) ) by L1086 , L1075 , L12;
L1088: ( D118 . ( R1 + 1 ) ) = ( ( D118 . ( R1 + 1 ) ) \/ ( D118 . R1 ) ) by L1087 , XBOOLE_1:12
.= ( ( ( D118 . ( R1 + 1 ) ) \ ( D118 . R1 ) ) \/ ( D118 . R1 ) ) by XBOOLE_1:39;
L1089:
now
per cases  by L1077 , L1088 , XBOOLE_0:def 3;
case L1090: C104 in ( ( D118 . ( R1 + 1 ) ) \ ( D118 . R1 ) );
L1091: ( D120 . C104 ) = ( D115 . ( R1 + 1 ) ) by L1090 , L991 , L1076 , L1086 , L904;
L1092:
now
per cases ;
case L1093: ( R1 + 1 ) = C103;
L1094: ( D120 . C104 ) in { R4 } by L1093 , L1008 , L1091 , TARSKI:def 1;
thus L1095: thesis by L1094 , L993 , FUNCT_1:def 7;
end;
case L1096: ( R1 + 1 ) <> C103;
L1097: ( R1 + 1 ) < C103 by L1096 , L1073 , XXREAL_0:1;
L1098: ( D120 . C104 ) >= D121 by L1097 , L994 , L990 , L995 , L1008 , L1072 , L1091 , RFINSEQ:19;
L1099: D121 >= ( D120 . C104 ) by L994 , L990 , L995 , L1003 , L1065 , L1072 , L1085 , L1091 , RFINSEQ:19;
L1100: D121 = ( D120 . C104 ) by L1099 , L1098 , XXREAL_0:1;
L1101: ( D120 . C104 ) in { R4 } by L1100 , TARSKI:def 1;
thus L1102: thesis by L1101 , L993 , FUNCT_1:def 7;
end;
end;
thus L1104: thesis by L1092;
end;
case L1105: C104 in ( D118 . R1 );
thus L1106: thesis by L1105 , L1071 , L1073 , L1078 , L1086 , FINSEQ_3:25 , NAT_1:13;
end;
end;
thus L1108: thesis by L1089;
end;
end;
thus L1110: thesis by L1079;
end;
L1111: S14[ ( 0 ) ] by FINSEQ_3:25;
L1112: (for R1 being (Element of ( NAT )) holds S14[ R1 ]) from NAT_1:sch 1(L1111 , L1070);
L1113: C103 in ( dom D118 ) by L994 , L990 , L1008 , FINSEQ_3:29;
L1114: D126 in ( D120 " { R4 } ) by L1113 , L1068 , L1112;
thus L1115: thesis by L1114;
end;

let R5 being set;
assume L1116: R5 in ( D120 " { R4 } );
reconsider D127 = R5 as (Element of R7) by L1116;
L1117: ( D120 . D127 ) in { R4 } by L1116 , FUNCT_1:def 7;
L1118: ( D120 . D127 ) = R4 by L1117 , TARSKI:def 1;
defpred S15[ Nat ] means ($1 in ( dom D118 ) & C103 < $1 & D127 in ( D118 . $1 ));
assume L1119: (not R5 in ( D118 . C103 ));
L1120: (ex B91 being Nat st S15[ B91 ])
proof
take D128 = ( len D118 );
L1121: ( len D118 ) <> ( 0 ) by L144;
L1122: ( ( 0 ) + 1 ) <= ( len D118 ) by L1121 , NAT_1:13;
thus L1123: D128 in ( dom D118 ) by L1122 , FINSEQ_3:25;
L1124: ( D118 . D128 ) = R7 by L139;
L1125:
now
assume L1126: D128 <= C103;
L1127: C103 = ( len D118 ) by L1126 , L994 , L990 , L1009 , XXREAL_0:1;
L1128: D127 in ( D118 . C103 ) by L1127 , L1124;
thus L1129: contradiction by L1128 , L1119;
end;
thus L1130: thesis by L1125 , L1124;
end;
consider C105 being Nat such that L1131: (S15[ C105 ] & (for B92 being Nat holds (S15[ B92 ] implies C105 <= B92))) from NAT_1:sch 5(L1120);
L1132: 1 <= C105 by L1131 , FINSEQ_3:25;
L1133: ( max (( 0 ) , ( C105 - 1 )) ) = ( C105 - 1 ) by L1132 , FINSEQ_2:4;
reconsider D129 = ( C105 - 1 ) as (Element of ( NAT )) by L1133 , FINSEQ_2:5;
L1134: ( C103 + 1 ) <= C105 by L1131 , NAT_1:13;
L1135: C103 <= D129 by L1134 , XREAL_1:19;
L1136: 1 <= D129 by L1135 , L1055 , XXREAL_0:2;
L1137: C105 in ( dom D115 ) by L994 , L990 , L1131 , FINSEQ_3:29;
L1138: C105 <= ( len D118 ) by L1131 , FINSEQ_3:25;
L1139: C105 < ( C105 + 1 ) by NAT_1:13;
L1140: D129 < C105 by L1139 , XREAL_1:19;
L1141: D129 < ( len D118 ) by L1140 , L1138 , XXREAL_0:2;
L1142: D129 <= C105 by L1139 , XREAL_1:19;
L1143: D129 <= ( len D118 ) by L1142 , L1138 , XXREAL_0:2;
L1144: D129 in ( dom D118 ) by L1143 , L1136 , FINSEQ_3:25;
L1145:
now
per cases ;
case L1146: C103 = D129;
L1147: D127 in ( ( D118 . ( D129 + 1 ) ) \ ( D118 . D129 ) ) by L1146 , L1119 , L1131 , XBOOLE_0:def 5;
L1148: ( D120 . D127 ) = ( D115 . C105 ) by L1147 , L991 , L1136 , L1141 , L904;
thus L1149: contradiction by L1148 , L1008 , L1118 , L1131 , L1137;
end;
case L1150: C103 <> D129;
L1151: C103 < D129 by L1150 , L1135 , XXREAL_0:1;
L1152:
now
assume L1153: D127 in ( D118 . D129 );
L1154: C105 <= D129 by L1153 , L1131 , L1144 , L1151;
L1155: ( C105 - D129 ) <= ( 0 ) by L1154 , XREAL_1:47;
thus L1156: contradiction by L1155;
end;
L1157: D127 in ( ( D118 . ( D129 + 1 ) ) \ ( D118 . D129 ) ) by L1152 , L1131 , XBOOLE_0:def 5;
L1158: ( D120 . D127 ) = ( D115 . C105 ) by L1157 , L991 , L1136 , L1141 , L904;
thus L1159: contradiction by L1158 , L1008 , L1118 , L1131 , L1137;
end;
end;
thus L1161: contradiction by L1145;
end;
thus L1162: ( card ( D120 " { R4 } ) ) = ( card ( D115 " { R4 } ) ) by L1066 , L994 , L990 , L1055 , L1009 , L1060 , L1065 , L11;
end;
case L1163: C102 <> 1;
L1164: 1 < C102 by L1163 , L1004 , XXREAL_0:1;
L1165: 1 <= D122 by L1164 , L1006 , NAT_1:13;
L1166: D122 <= ( len D115 ) by L1061 , L1006 , NAT_1:13;
L1167: D122 in ( dom D118 ) by L1166 , L994 , L990 , L1165 , FINSEQ_3:25;
L1168: ( D118 . D122 ) c= ( D118 . C103 ) by L1167 , L994 , L990 , L995 , L1008 , L1058 , L99;
L1169: ( D118 . C103 ) c= R7 by L994 , L990 , L995 , L1008 , L167;
reconsider D130 = ( D118 . C103 ) , D131 = ( D118 . D122 ) as  finite set by L1169 , L1168;
L1170: ( ( D118 . C103 ) \ ( D118 . D122 ) ) = ( D120 " { R4 } )
proof
thus L1171: ( ( D118 . C103 ) \ ( D118 . D122 ) ) c= ( D120 " { R4 } )
proof
defpred S16[ (Element of ( NAT )) ] means (($1 in ( dom D118 ) & C102 <= $1 & $1 <= C103) implies (for B93 being (Element of R7) holds (B93 in ( ( D118 . $1 ) \ ( D118 . D122 ) ) implies B93 in ( D120 " { R4 } ))));
let R5 being set;
L1172: ( D118 . C103 ) c= R7 by L994 , L990 , L995 , L1008 , L167;
L1173: (for R1 being (Element of ( NAT )) holds (S16[ R1 ] implies S16[ ( R1 + 1 ) ]))
proof
let R1 being (Element of ( NAT ));
assume L1174: S16[ R1 ];
assume that
L1175: ( R1 + 1 ) in ( dom D118 )
and
L1176: C102 <= ( R1 + 1 )
and
L1177: ( R1 + 1 ) <= C103;
let C106 being (Element of R7);
L1178: ( R1 + 1 ) <= ( len D118 ) by L1175 , FINSEQ_3:25;
L1179: R1 < ( len D118 ) by L1178 , NAT_1:13;
assume L1180: C106 in ( ( D118 . ( R1 + 1 ) ) \ ( D118 . D122 ) );
L1181:
now
per cases ;
case L1182: ( R1 + 1 ) = C102;
L1183: ( D120 . C106 ) = ( D115 . ( R1 + 1 ) ) by L1182 , L991 , L1165 , L1179 , L1180 , L904;
L1184: ( D120 . C106 ) in { R4 } by L1183 , L1003 , L1182 , TARSKI:def 1;
thus L1185: thesis by L1184 , L993 , FUNCT_1:def 7;
end;
case L1186: C102 <> ( R1 + 1 );
L1187: C102 < ( R1 + 1 ) by L1186 , L1176 , XXREAL_0:1;
L1188: C102 <= R1 by L1187 , NAT_1:13;
L1189: 1 <= R1 by L1188 , L1004 , XXREAL_0:2;
L1190: R1 <= C103 by L1177 , NAT_1:13;
L1191: R1 <= ( len D118 ) by L1190 , L994 , L990 , L1009 , XXREAL_0:2;
L1192: (R1 <= ( R1 + 1 ) & R1 in ( dom D118 )) by L1191 , L1189 , FINSEQ_3:25 , NAT_1:11;
L1193: ( D118 . R1 ) c= ( D118 . ( R1 + 1 ) ) by L1192 , L1175 , L99;
L1194: ( ( D118 . ( R1 + 1 ) ) \ ( D118 . D122 ) ) = ( ( ( D118 . ( R1 + 1 ) ) \/ ( D118 . R1 ) ) \ ( D118 . D122 ) ) by L1193 , XBOOLE_1:12
.= ( ( ( ( D118 . ( R1 + 1 ) ) \ ( D118 . R1 ) ) \/ ( D118 . R1 ) ) \ ( D118 . D122 ) ) by XBOOLE_1:39
.= ( ( ( ( D118 . ( R1 + 1 ) ) \ ( D118 . R1 ) ) \ ( D118 . D122 ) ) \/ ( ( D118 . R1 ) \ ( D118 . D122 ) ) ) by XBOOLE_1:42;
L1195:
now
per cases  by L1180 , L1194 , XBOOLE_0:def 3;
case L1196: C106 in ( ( ( D118 . ( R1 + 1 ) ) \ ( D118 . R1 ) ) \ ( D118 . D122 ) );
L1197: C106 in ( ( D118 . ( R1 + 1 ) ) \ ( D118 . R1 ) ) by L1196 , XBOOLE_0:def 5;
L1198: ( D120 . C106 ) = ( D115 . ( R1 + 1 ) ) by L1197 , L991 , L1179 , L1189 , L904;
L1199:
now
per cases ;
case L1200: ( R1 + 1 ) = C103;
L1201: ( D120 . C106 ) in { R4 } by L1200 , L1008 , L1198 , TARSKI:def 1;
thus L1202: thesis by L1201 , L993 , FUNCT_1:def 7;
end;
case L1203: ( R1 + 1 ) <> C103;
L1204: ( R1 + 1 ) < C103 by L1203 , L1177 , XXREAL_0:1;
L1205: ( D120 . C106 ) >= D121 by L1204 , L994 , L990 , L995 , L1008 , L1175 , L1198 , RFINSEQ:19;
L1206: D121 >= ( D120 . C106 ) by L994 , L990 , L995 , L1003 , L1175 , L1187 , L1198 , RFINSEQ:19;
L1207: D121 = ( D120 . C106 ) by L1206 , L1205 , XXREAL_0:1;
L1208: ( D120 . C106 ) in { R4 } by L1207 , TARSKI:def 1;
thus L1209: thesis by L1208 , L993 , FUNCT_1:def 7;
end;
end;
thus L1211: thesis by L1199;
end;
case L1212: C106 in ( ( D118 . R1 ) \ ( D118 . D122 ) );
thus L1213: thesis by L1212 , L1174 , L1177 , L1187 , L1189 , L1191 , FINSEQ_3:25 , NAT_1:13;
end;
end;
thus L1215: thesis by L1195;
end;
end;
thus L1217: thesis by L1181;
end;
L1218: S16[ ( 0 ) ];
L1219: (for R1 being (Element of ( NAT )) holds S16[ R1 ]) from NAT_1:sch 1(L1218 , L1173);
assume L1220: R5 in ( ( D118 . C103 ) \ ( D118 . D122 ) );
L1221: R5 in ( D118 . C103 ) by L1220;
reconsider D132 = R5 as (Element of R7) by L1221 , L1172;
L1222: C103 in ( dom D118 ) by L994 , L990 , L1008 , FINSEQ_3:29;
L1223: D132 in ( D120 " { R4 } ) by L1222 , L1056 , L1220 , L1219;
thus L1224: thesis by L1223;
end;

let R5 being set;
assume L1225: R5 in ( D120 " { R4 } );
reconsider D133 = R5 as (Element of R7) by L1225;
L1226: ( D120 . D133 ) in { R4 } by L1225 , FUNCT_1:def 7;
L1227: ( D120 . D133 ) = R4 by L1226 , TARSKI:def 1;
assume L1228: (not R5 in ( ( D118 . C103 ) \ ( D118 . D122 ) ));
L1229:
now
per cases  by L1228 , XBOOLE_0:def 5;
case L1230: (not R5 in ( D118 . C103 ));
defpred S17[ Nat ] means ($1 in ( dom D118 ) & C103 < $1 & D133 in ( D118 . $1 ));
L1231: (ex B94 being Nat st S17[ B94 ])
proof
take D134 = ( len D118 );
L1232: ( len D118 ) <> ( 0 ) by L144;
L1233: ( ( 0 ) + 1 ) <= ( len D118 ) by L1232 , NAT_1:13;
thus L1234: D134 in ( dom D118 ) by L1233 , FINSEQ_3:25;
L1235: ( D118 . D134 ) = R7 by L139;
L1236:
now
assume L1237: D134 <= C103;
L1238: C103 = ( len D118 ) by L1237 , L994 , L990 , L1009 , XXREAL_0:1;
L1239: D133 in ( D118 . C103 ) by L1238 , L1235;
thus L1240: contradiction by L1239 , L1230;
end;
thus L1241: thesis by L1236 , L1235;
end;
consider C107 being Nat such that L1242: (S17[ C107 ] & (for B95 being Nat holds (S17[ B95 ] implies C107 <= B95))) from NAT_1:sch 5(L1231);
L1243: 1 <= C107 by L1242 , FINSEQ_3:25;
L1244: ( max (( 0 ) , ( C107 - 1 )) ) = ( C107 - 1 ) by L1243 , FINSEQ_2:4;
reconsider D135 = ( C107 - 1 ) as (Element of ( NAT )) by L1244 , FINSEQ_2:5;
L1245: ( C103 + 1 ) <= C107 by L1242 , NAT_1:13;
L1246: C103 <= D135 by L1245 , XREAL_1:19;
L1247: 1 <= D135 by L1246 , L1055 , XXREAL_0:2;
L1248: C107 in ( dom D115 ) by L994 , L990 , L1242 , FINSEQ_3:29;
L1249: C107 <= ( len D118 ) by L1242 , FINSEQ_3:25;
L1250: C107 < ( C107 + 1 ) by NAT_1:13;
L1251: D135 < C107 by L1250 , XREAL_1:19;
L1252: D135 < ( len D118 ) by L1251 , L1249 , XXREAL_0:2;
L1253: D135 <= C107 by L1250 , XREAL_1:19;
L1254: D135 <= ( len D118 ) by L1253 , L1249 , XXREAL_0:2;
L1255: D135 in ( dom D118 ) by L1254 , L1247 , FINSEQ_3:25;
L1256:
now
per cases ;
case L1257: C103 = D135;
L1258: D133 in ( ( D118 . ( D135 + 1 ) ) \ ( D118 . D135 ) ) by L1257 , L1230 , L1242 , XBOOLE_0:def 5;
L1259: ( D120 . D133 ) = ( D115 . C107 ) by L1258 , L991 , L1247 , L1252 , L904;
thus L1260: contradiction by L1259 , L1008 , L1227 , L1242 , L1248;
end;
case L1261: C103 <> D135;
L1262: C103 < D135 by L1261 , L1246 , XXREAL_0:1;
L1263:
now
assume L1264: D133 in ( D118 . D135 );
L1265: C107 <= D135 by L1264 , L1242 , L1255 , L1262;
L1266: ( C107 - D135 ) <= ( 0 ) by L1265 , XREAL_1:47;
thus L1267: contradiction by L1266;
end;
L1268: D133 in ( ( D118 . ( D135 + 1 ) ) \ ( D118 . D135 ) ) by L1263 , L1242 , XBOOLE_0:def 5;
L1269: ( D120 . D133 ) = ( D115 . C107 ) by L1268 , L991 , L1247 , L1252 , L904;
thus L1270: contradiction by L1269 , L1008 , L1227 , L1242 , L1248;
end;
end;
thus L1272: contradiction by L1256;
end;
case L1273: R5 in ( D118 . D122 );
defpred S18[ Nat ] means ($1 in ( dom D118 ) & $1 <= D122 & D133 in ( D118 . $1 ));
L1274: (ex B96 being Nat st S18[ B96 ]) by L1167 , L1273;
consider C108 being Nat such that L1275: (S18[ C108 ] & (for B97 being Nat holds (S18[ B97 ] implies C108 <= B97))) from NAT_1:sch 5(L1274);
L1276: 1 <= C108 by L1275 , FINSEQ_3:25;
L1277: ( max (( 0 ) , ( C108 - 1 )) ) = ( C108 - 1 ) by L1276 , FINSEQ_2:4;
reconsider D136 = ( C108 - 1 ) as (Element of ( NAT )) by L1277 , FINSEQ_2:5;
L1278: C108 <= ( len D118 ) by L1275 , FINSEQ_3:25;
L1279: C108 in ( dom D115 ) by L994 , L990 , L1275 , FINSEQ_3:29;
L1280:
now
per cases ;
case L1281: C108 = 1;
L1282: ( D120 . D133 ) = ( D115 . 1 ) by L1281 , L991 , L1275 , L904;
L1283: C102 <= 1 by L1282 , L1003 , L1063 , L1227;
thus L1284: contradiction by L1283 , L1004 , L1163 , XXREAL_0:1;
end;
case L1285: C108 <> 1;
L1286: 1 < C108 by L1285 , L1276 , XXREAL_0:1;
L1287: ( 1 + 1 ) <= C108 by L1286 , NAT_1:13;
L1288: 1 <= D136 by L1287 , XREAL_1:19;
L1289: C108 < ( C108 + 1 ) by NAT_1:13;
L1290: D136 <= C108 by L1289 , XREAL_1:19;
L1291: D136 <= ( len D118 ) by L1290 , L1278 , XXREAL_0:2;
L1292: D136 in ( dom D118 ) by L1291 , L1288 , FINSEQ_3:25;
L1293: D136 < C108 by L1289 , XREAL_1:19;
L1294: D136 < ( len D118 ) by L1293 , L1278 , XXREAL_0:2;
L1295: D136 <= D122 by L1275 , L1290 , XXREAL_0:2;
L1296: (not D133 in ( D118 . D136 )) by L1295 , L1275 , L1293 , L1292;
L1297: D133 in ( ( D118 . ( D136 + 1 ) ) \ ( D118 . D136 ) ) by L1296 , L1275 , XBOOLE_0:def 5;
L1298: ( D120 . D133 ) = ( D115 . ( D136 + 1 ) ) by L1297 , L991 , L1288 , L1294 , L904;
L1299: C102 <= C108 by L1298 , L1003 , L1227 , L1279;
L1300: ( D122 + 1 ) <= D122 by L1299 , L1275 , XXREAL_0:2;
L1301: 1 <= ( D122 - D122 ) by L1300 , XREAL_1:19;
L1302: 1 <= ( 0 ) by L1301;
thus L1303: contradiction by L1302;
end;
end;
thus L1305: contradiction by L1280;
end;
end;
thus L1307: contradiction by L1229;
end;
thus L1308: ( card ( D120 " { R4 } ) ) = ( ( card D130 ) - ( card D131 ) ) by L1170 , L1168 , CARD_2:44
.= ( C103 - ( card D131 ) ) by L994 , L990 , L1055 , L1009 , L11
.= ( card ( D115 " { R4 } ) ) by L994 , L990 , L1060 , L1165 , L1166 , L11;
end;
end;
thus L1310: ( card ( D115 " { R4 } ) ) = ( card ( D120 " { R4 } ) ) by L1064;
end;
end;
thus L1312: ( card ( Coim (D115 , R4) ) ) = ( card ( Coim (D120 , R4) ) ) by L997;
end;
thus L1313: thesis by L996 , CLASSES1:def 9;
end;
theorem
L1314: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B98 being (PartFunc of R8 , ( REAL )) holds (for B99 being (RearrangmentGen of R7) holds ((B98 is  total & ( card R7 ) = ( card R8 )) implies ( FinS (( Rlor (B98 , B99) ) , R7) ) = ( FinS (B98 , R8) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C109 being (PartFunc of R8 , ( REAL ));
let C110 being (RearrangmentGen of R7);
assume L1315: (C109 is  total & ( card R7 ) = ( card R8 ));
L1316: ( Rlor (C109 , C110) ) , ( FinS (C109 , R8) ) are_fiberwise_equipotent  by L1315 , L989;
L1317: ( dom ( Rlor (C109 , C110) ) ) = R7 by L1315 , L896;
L1318: ( ( Rlor (C109 , C110) ) | R7 ) = ( Rlor (C109 , C110) ) by L1317 , RELAT_1:68;
thus L1319: thesis by L1318 , L1316 , L1317 , RFUNCT_3:def 13;
end;
theorem
L1320: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B100 being (PartFunc of R8 , ( REAL )) holds (for B101 being (RearrangmentGen of R7) holds ((B100 is  total & ( card R7 ) = ( card R8 )) implies ( Sum (( Rlor (B100 , B101) ) , R7) ) = ( Sum (B100 , R8) ))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C111 being (PartFunc of R8 , ( REAL ));
let C112 being (RearrangmentGen of R7);
assume L1321: (C111 is  total & ( card R7 ) = ( card R8 ));
L1322: ( FinS (( Rlor (C111 , C112) ) , R7) ) = ( FinS (C111 , R8) ) by L1321 , L1314;
thus L1323: ( Sum (( Rlor (C111 , C112) ) , R7) ) = ( Sum ( FinS (C111 , R8) ) ) by L1322 , RFUNCT_3:def 14
.= ( Sum (C111 , R8) ) by RFUNCT_3:def 14;
end;
theorem
L1324: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B102 being (PartFunc of R8 , ( REAL )) holds (for B103 being (RearrangmentGen of R7) holds ((B102 is  total & ( card R7 ) = ( card R8 )) implies (( FinS (( ( Rlor (B102 , B103) ) - R6 ) , R7) ) = ( FinS (( B102 - R6 ) , R8) ) & ( Sum (( ( Rlor (B102 , B103) ) - R6 ) , R7) ) = ( Sum (( B102 - R6 ) , R8) ))))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C113 being (PartFunc of R8 , ( REAL ));
let C114 being (RearrangmentGen of R7);
assume that
L1325: C113 is  total
and
L1326: ( card R7 ) = ( card R8 );
L1327: ( dom C113 ) = R8 by L1325 , PARTFUN1:def 2;
L1328: ( C113 | R8 ) = C113 by L1327 , RELAT_1:68;
L1329: ( FinS (C113 , R8) ) , C113 are_fiberwise_equipotent  by L1328 , L1327 , RFUNCT_3:def 13;
L1330: ( Rlor (C113 , C114) ) , ( FinS (C113 , R8) ) are_fiberwise_equipotent  by L1325 , L1326 , L989;
L1331: ( Rlor (C113 , C114) ) , C113 are_fiberwise_equipotent  by L1330 , L1329 , CLASSES1:76;
L1332: ( ( Rlor (C113 , C114) ) - R6 ) , ( C113 - R6 ) are_fiberwise_equipotent  by L1331 , RFUNCT_3:51;
L1333: ( dom ( ( Rlor (C113 , C114) ) - R6 ) ) = ( dom ( Rlor (C113 , C114) ) ) by VALUED_1:3;
L1334: ( ( ( Rlor (C113 , C114) ) - R6 ) | R7 ) = ( ( Rlor (C113 , C114) ) - R6 ) by L1333 , RELAT_1:68;
L1335: ( FinS (( ( Rlor (C113 , C114) ) - R6 ) , R7) ) , ( ( Rlor (C113 , C114) ) - R6 ) are_fiberwise_equipotent  by L1334 , L1333 , RFUNCT_3:def 13;
L1336: ( FinS (( ( Rlor (C113 , C114) ) - R6 ) , R7) ) , ( C113 - R6 ) are_fiberwise_equipotent  by L1335 , L1332 , CLASSES1:76;
L1337: ( dom ( C113 - R6 ) ) = ( dom C113 ) by VALUED_1:3;
L1338: ( ( C113 - R6 ) | R8 ) = ( C113 - R6 ) by L1337 , RELAT_1:68;
thus L1339: ( FinS (( ( Rlor (C113 , C114) ) - R6 ) , R7) ) = ( FinS (( C113 - R6 ) , R8) ) by L1338 , L1337 , L1336 , RFUNCT_3:def 13;
thus L1340: ( Sum (( ( Rlor (C113 , C114) ) - R6 ) , R7) ) = ( Sum ( FinS (( C113 - R6 ) , R8) ) ) by L1339 , RFUNCT_3:def 14
.= ( Sum (( C113 - R6 ) , R8) ) by RFUNCT_3:def 14;
end;
theorem
L1341: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B104 being (PartFunc of R8 , ( REAL )) holds (for B105 being (RearrangmentGen of R7) holds ((B104 is  total & ( card R7 ) = ( card R8 )) implies (( Rlor (B104 , B105) ) , ( Rland (B104 , B105) ) are_fiberwise_equipotent  & ( FinS (( Rlor (B104 , B105) ) , R7) ) = ( FinS (( Rland (B104 , B105) ) , R7) ) & ( Sum (( Rlor (B104 , B105) ) , R7) ) = ( Sum (( Rland (B104 , B105) ) , R7) )))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C115 being (PartFunc of R8 , ( REAL ));
let C116 being (RearrangmentGen of R7);
assume L1342: (C115 is  total & ( card R7 ) = ( card R8 ));
L1343: (( Sum (( Rland (C115 , C116) ) , R7) ) = ( Sum (C115 , R8) ) & ( Rlor (C115 , C116) ) , ( FinS (C115 , R8) ) are_fiberwise_equipotent ) by L1342 , L875 , L989;
L1344: (( Rland (C115 , C116) ) , ( FinS (C115 , R8) ) are_fiberwise_equipotent  & ( FinS (( Rland (C115 , C116) ) , R7) ) = ( FinS (C115 , R8) )) by L1342 , L542 , L869;
thus L1345: thesis by L1344 , L1342 , L1343 , L1314 , L1320 , CLASSES1:76;
end;
theorem
L1346: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B106 being (PartFunc of R8 , ( REAL )) holds (for B107 being (RearrangmentGen of R7) holds ((B106 is  total & ( card R7 ) = ( card R8 )) implies (( max+ ( ( Rland (B106 , B107) ) - R6 ) ) , ( max+ ( B106 - R6 ) ) are_fiberwise_equipotent  & ( FinS (( max+ ( ( Rland (B106 , B107) ) - R6 ) ) , R7) ) = ( FinS (( max+ ( B106 - R6 ) ) , R8) ) & ( Sum (( max+ ( ( Rland (B106 , B107) ) - R6 ) ) , R7) ) = ( Sum (( max+ ( B106 - R6 ) ) , R8) ))))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C117 being (PartFunc of R8 , ( REAL ));
let C118 being (RearrangmentGen of R7);
assume that
L1347: C117 is  total
and
L1348: ( card R7 ) = ( card R8 );
set D137 = ( max+ ( ( Rland (C117 , C118) ) - R6 ) );
set D138 = ( max+ ( C117 - R6 ) );
L1349: ( dom C117 ) = R8 by L1347 , PARTFUN1:def 2;
L1350: ( C117 | R8 ) = C117 by L1349 , RELAT_1:68;
L1351: ( FinS (C117 , R8) ) , C117 are_fiberwise_equipotent  by L1350 , L1349 , RFUNCT_3:def 13;
L1352: ( Rland (C117 , C118) ) , ( FinS (C117 , R8) ) are_fiberwise_equipotent  by L1347 , L1348 , L542;
L1353: ( Rland (C117 , C118) ) , C117 are_fiberwise_equipotent  by L1352 , L1351 , CLASSES1:76;
L1354: ( ( Rland (C117 , C118) ) - R6 ) , ( C117 - R6 ) are_fiberwise_equipotent  by L1353 , RFUNCT_3:51;
thus L1355: D137 , D138 are_fiberwise_equipotent  by L1354 , RFUNCT_3:41;
L1356: ( dom D137 ) = ( dom ( ( Rland (C117 , C118) ) - R6 ) ) by RFUNCT_3:def 10;
L1357: ( D137 | R7 ) = D137 by L1356 , RELAT_1:68;
L1358: ( FinS (D137 , R7) ) , D137 are_fiberwise_equipotent  by L1357 , L1356 , RFUNCT_3:def 13;
L1359: ( FinS (D137 , R7) ) , D138 are_fiberwise_equipotent  by L1358 , L1355 , CLASSES1:76;
L1360: ( dom D138 ) = ( dom ( C117 - R6 ) ) by RFUNCT_3:def 10;
L1361: ( D138 | R8 ) = D138 by L1360 , RELAT_1:68;
thus L1362: ( FinS (D137 , R7) ) = ( FinS (D138 , R8) ) by L1361 , L1360 , L1359 , RFUNCT_3:def 13;
thus L1363: ( Sum (D137 , R7) ) = ( Sum ( FinS (D138 , R8) ) ) by L1362 , RFUNCT_3:def 14
.= ( Sum (D138 , R8) ) by RFUNCT_3:def 14;
end;
theorem
L1364: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B108 being (PartFunc of R8 , ( REAL )) holds (for B109 being (RearrangmentGen of R7) holds ((B108 is  total & ( card R7 ) = ( card R8 )) implies (( max- ( ( Rland (B108 , B109) ) - R6 ) ) , ( max- ( B108 - R6 ) ) are_fiberwise_equipotent  & ( FinS (( max- ( ( Rland (B108 , B109) ) - R6 ) ) , R7) ) = ( FinS (( max- ( B108 - R6 ) ) , R8) ) & ( Sum (( max- ( ( Rland (B108 , B109) ) - R6 ) ) , R7) ) = ( Sum (( max- ( B108 - R6 ) ) , R8) ))))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C119 being (PartFunc of R8 , ( REAL ));
let C120 being (RearrangmentGen of R7);
assume that
L1365: C119 is  total
and
L1366: ( card R7 ) = ( card R8 );
set D139 = ( max- ( ( Rland (C119 , C120) ) - R6 ) );
set D140 = ( max- ( C119 - R6 ) );
L1367: ( dom C119 ) = R8 by L1365 , PARTFUN1:def 2;
L1368: ( C119 | R8 ) = C119 by L1367 , RELAT_1:68;
L1369: ( FinS (C119 , R8) ) , C119 are_fiberwise_equipotent  by L1368 , L1367 , RFUNCT_3:def 13;
L1370: ( Rland (C119 , C120) ) , ( FinS (C119 , R8) ) are_fiberwise_equipotent  by L1365 , L1366 , L542;
L1371: ( Rland (C119 , C120) ) , C119 are_fiberwise_equipotent  by L1370 , L1369 , CLASSES1:76;
L1372: ( ( Rland (C119 , C120) ) - R6 ) , ( C119 - R6 ) are_fiberwise_equipotent  by L1371 , RFUNCT_3:51;
thus L1373: D139 , D140 are_fiberwise_equipotent  by L1372 , RFUNCT_3:42;
L1374: ( dom D139 ) = ( dom ( ( Rland (C119 , C120) ) - R6 ) ) by RFUNCT_3:def 11;
L1375: ( D139 | R7 ) = D139 by L1374 , RELAT_1:68;
L1376: ( FinS (D139 , R7) ) , D139 are_fiberwise_equipotent  by L1375 , L1374 , RFUNCT_3:def 13;
L1377: ( FinS (D139 , R7) ) , D140 are_fiberwise_equipotent  by L1376 , L1373 , CLASSES1:76;
L1378: ( dom D140 ) = ( dom ( C119 - R6 ) ) by RFUNCT_3:def 11;
L1379: ( D140 | R8 ) = D140 by L1378 , RELAT_1:68;
thus L1380: ( FinS (D139 , R7) ) = ( FinS (D140 , R8) ) by L1379 , L1378 , L1377 , RFUNCT_3:def 13;
thus L1381: ( Sum (D139 , R7) ) = ( Sum ( FinS (D140 , R8) ) ) by L1380 , RFUNCT_3:def 14
.= ( Sum (D140 , R8) ) by RFUNCT_3:def 14;
end;
theorem
L1382: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B110 being (PartFunc of R8 , ( REAL )) holds (for B111 being (RearrangmentGen of R7) holds ((B110 is  total & ( card R8 ) = ( card R7 )) implies (( len ( FinS (( Rland (B110 , B111) ) , R7) ) ) = ( card R7 ) & 1 <= ( len ( FinS (( Rland (B110 , B111) ) , R7) ) )))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C121 being (PartFunc of R8 , ( REAL ));
let C122 being (RearrangmentGen of R7);
set D141 = ( Rland (C121 , C122) );
assume L1383: (C121 is  total & ( card R8 ) = ( card R7 ));
L1384: ( dom D141 ) = R7 by L1383 , L325;
L1385: ( D141 | R7 ) = D141 by L1384 , RELAT_1:68;
thus L1386: ( len ( FinS (D141 , R7) ) ) = ( card R7 ) by L1385 , L1384 , RFUNCT_3:67;
L1387: ( ( 0 ) + 1 ) <= ( card R7 ) by NAT_1:13;
thus L1388: thesis by L1387 , L1384 , L1385 , RFUNCT_3:67;
end;
theorem
L1389: (for R1 being (Element of ( NAT )) holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B112 being (PartFunc of R8 , ( REAL )) holds (for B113 being (RearrangmentGen of R7) holds ((B112 is  total & ( card R8 ) = ( card R7 ) & R1 in ( dom B113 )) implies ( ( FinS (( Rland (B112 , B113) ) , R7) ) | R1 ) = ( FinS (( Rland (B112 , B113) ) , ( B113 . R1 )) )))))))
proof
let R1 being (Element of ( NAT ));
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C123 being (PartFunc of R8 , ( REAL ));
let C124 being (RearrangmentGen of R7);
assume that
L1390: (C123 is  total & ( card R8 ) = ( card R7 ))
and
L1391: R1 in ( dom C124 );
set D142 = ( Rland (C123 , C124) );
L1392: ( len ( FinS (D142 , R7) ) ) = ( card R7 ) by L1390 , L1382;
defpred S19[ (Element of ( NAT )) ] means ($1 in ( dom C124 ) implies ( ( FinS (( Rland (C123 , C124) ) , R7) ) | $1 ) = ( FinS (( Rland (C123 , C124) ) , ( C124 . $1 )) ));
L1393: ( len C124 ) = ( card R7 ) by L92;
L1394: (( dom C124 ) = ( Seg ( len C124 ) ) & ( dom ( FinS (D142 , R7) ) ) = ( Seg ( len ( FinS (D142 , R7) ) ) )) by FINSEQ_1:def 3;
L1395: (for R2 being (Element of ( NAT )) holds (S19[ R2 ] implies S19[ ( R2 + 1 ) ]))
proof
set D143 = ( FinS (D142 , R7) );
let R2 being (Element of ( NAT ));
assume L1396: S19[ R2 ];
L1397: R2 <= ( R2 + 1 ) by NAT_1:11;
assume L1398: ( R2 + 1 ) in ( dom C124 );
L1399: 1 <= ( R2 + 1 ) by L1398 , FINSEQ_3:25;
L1400: ( R2 + 1 ) in ( Seg ( R2 + 1 ) ) by L1399 , FINSEQ_1:1;
L1401: ( dom D142 ) = R7 by L1390 , L325;
L1402: ( R2 + 1 ) <= ( len C124 ) by L1398 , FINSEQ_3:25;
L1403: R2 <= ( len C124 ) by L1402 , NAT_1:13;
L1404: R2 < ( len C124 ) by L1402 , NAT_1:13;
L1405: R2 <= ( ( len C124 ) - 1 ) by L1402 , XREAL_1:19;
L1406: ( len ( D143 | ( R2 + 1 ) ) ) = ( R2 + 1 ) by L1393 , L1392 , L1402 , FINSEQ_1:59;
L1407:
now
per cases ;
case L1408: R2 = ( 0 );
consider C125 being (Element of R7) such that L1409: ( C124 . 1 ) = { C125 } by L191;
L1410: C125 in ( C124 . 1 ) by L1409 , TARSKI:def 1;
L1411: 1 <= ( len ( FinS (D142 , R7) ) ) by L1390 , L1382;
L1412: (1 in ( Seg 1 ) & 1 in ( dom ( FinS (D142 , R7) ) )) by L1411 , FINSEQ_1:1 , FINSEQ_3:25;
L1413: ( ( ( FinS (D142 , R7) ) | ( R2 + 1 ) ) . 1 ) = ( ( FinS (D142 , R7) ) . 1 ) by L1412 , L1408 , RFINSEQ:6
.= ( ( FinS (C123 , R8) ) . 1 ) by L1390 , L869
.= ( D142 . C125 ) by L1390 , L1410 , L458;
L1414: ( dom D142 ) = R7 by L1390 , L325;
L1415: ( FinS (D142 , ( C124 . ( R2 + 1 ) )) ) = <* ( D142 . C125 ) *> by L1414 , L1408 , L1409 , RFUNCT_3:69;
L1416: ( len ( ( FinS (D142 , R7) ) | ( R2 + 1 ) ) ) = 1 by L1408 , L1411 , FINSEQ_1:59;
thus L1417: thesis by L1416 , L1415 , L1413 , FINSEQ_1:40;
end;
case L1418: R2 <> ( 0 );
L1419: ( Seg R2 ) c= ( Seg ( R2 + 1 ) ) by L1397 , FINSEQ_1:5;
L1420: ( ( D143 | ( R2 + 1 ) ) | R2 ) = ( ( D143 | ( R2 + 1 ) ) | ( Seg R2 ) ) by FINSEQ_1:def 15
.= ( ( D143 | ( Seg ( R2 + 1 ) ) ) | ( Seg R2 ) ) by FINSEQ_1:def 15
.= ( D143 | ( ( Seg ( R2 + 1 ) ) /\ ( Seg R2 ) ) ) by RELAT_1:71
.= ( D143 | ( Seg R2 ) ) by L1419 , XBOOLE_1:28
.= ( D143 | R2 ) by FINSEQ_1:def 15;
L1421: ( ( 0 ) + 1 ) <= R2 by L1418 , NAT_1:13;
consider C126 being (Element of R7) such that L1422: ( ( C124 . ( R2 + 1 ) ) \ ( C124 . R2 ) ) = { C126 } and L1423: ( C124 . ( R2 + 1 ) ) = ( ( C124 . R2 ) \/ { C126 } ) and L1424: ( ( C124 . ( R2 + 1 ) ) \ { C126 } ) = ( C124 . R2 ) by L1421 , L1405 , L199;
L1425: C126 in { C126 } by TARSKI:def 1;
L1426: ( D142 . C126 ) = ( ( FinS (C123 , R8) ) . ( R2 + 1 ) ) by L1425 , L1390 , L1404 , L1421 , L1422 , L458
.= ( ( FinS (D142 , R7) ) . ( R2 + 1 ) ) by L1390 , L869
.= ( ( D143 | ( R2 + 1 ) ) . ( R2 + 1 ) ) by L1394 , L1393 , L1392 , L1398 , L1400 , RFINSEQ:6;
L1427: ( D143 | ( R2 + 1 ) ) = ( ( D143 | R2 ) ^ <* ( D142 . C126 ) *> ) by L1426 , L1406 , L1420 , RFINSEQ:7;
L1428: C126 in ( ( dom D142 ) /\ ( C124 . ( R2 + 1 ) ) ) by L1401 , L1422 , L1425 , XBOOLE_0:def 4;
L1429: C126 in ( dom ( D142 | ( C124 . ( R2 + 1 ) ) ) ) by L1428 , RELAT_1:61;
L1430: ( D143 | ( R2 + 1 ) ) is  non-increasing by RFINSEQ:20;
L1431: ( dom ( D142 | ( C124 . ( R2 + 1 ) ) ) ) = ( ( dom D142 ) /\ ( C124 . ( R2 + 1 ) ) ) by RELAT_1:61
.= ( C124 . ( R2 + 1 ) ) by L1398 , L1401 , L167 , XBOOLE_1:28;
L1432: ( C124 . ( R2 + 1 ) ) is  finite by L1398 , L167 , FINSET_1:1;
L1433: ( D143 | ( R2 + 1 ) ) , ( D142 | ( C124 . ( R2 + 1 ) ) ) are_fiberwise_equipotent  by L1432 , L1396 , L1403 , L1421 , L1424 , L1427 , L1429 , FINSEQ_3:25 , RFUNCT_3:65;
thus L1434: thesis by L1433 , L1431 , L1430 , RFUNCT_3:def 13;
end;
end;
thus L1436: thesis by L1407;
end;
L1437: S19[ ( 0 ) ] by FINSEQ_3:25;
L1438: (for R2 being (Element of ( NAT )) holds S19[ R2 ]) from NAT_1:sch 1(L1437 , L1395);
thus L1439: thesis by L1438 , L1391;
end;
theorem
L1440: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B114 being (PartFunc of R8 , ( REAL )) holds (for B115 being (RearrangmentGen of R7) holds ((B114 is  total & ( card R8 ) = ( card R7 )) implies ( Rland (( B114 - R6 ) , B115) ) = ( ( Rland (B114 , B115) ) - R6 )))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C127 being (PartFunc of R8 , ( REAL ));
let C128 being (RearrangmentGen of R7);
assume that
L1441: C127 is  total
and
L1442: ( card R8 ) = ( card R7 );
L1443: ( dom ( Rland (C127 , C128) ) ) = R7 by L1441 , L1442 , L325;
L1444: ( dom C127 ) = R8 by L1441 , PARTFUN1:def 2;
L1445: ( dom ( C127 - R6 ) ) = R8 by L1444 , VALUED_1:3;
L1446: ( C127 - R6 ) is  total by L1445 , PARTFUN1:def 2;
L1447: ( ( C127 - R6 ) | R8 ) = ( C127 - R6 ) by L1445 , RELAT_1:68;
L1448: ( len ( FinS (( C127 - R6 ) , R8) ) ) = ( card R8 ) by L1447 , L1445 , RFUNCT_3:67;
L1449: ( len C128 ) = ( card R7 ) by L92;
L1450: ( C127 | R8 ) = C127 by L1444 , RELAT_1:68;
L1451: ( FinS (( C127 - R6 ) , R8) ) = ( ( FinS (C127 , R8) ) - ( ( card R8 ) |-> R6 ) ) by L1450 , L1444 , RFUNCT_3:73;
L1452:
now
let C129 being (Element of R7);
assume L1453: C129 in ( dom ( Rland (( C127 - R6 ) , C128) ) );
defpred S20[ set ] means ($1 in ( dom C128 ) & C129 in ( C128 . $1 ));
L1454: R7 = ( C128 . ( len C128 ) ) by L139;
L1455: ( len C128 ) <> ( 0 ) by L144;
L1456: ( ( 0 ) + 1 ) <= ( len C128 ) by L1455 , NAT_1:13;
L1457: 1 in ( dom C128 ) by L1456 , FINSEQ_3:25;
L1458: ( len C128 ) in ( dom C128 ) by L1456 , FINSEQ_3:25;
L1459: (ex B116 being Nat st S20[ B116 ]) by L1458 , L1454;
consider C130 being Nat such that L1460: (S20[ C130 ] & (for B117 being Nat holds (S20[ B117 ] implies C130 <= B117))) from NAT_1:sch 5(L1459);
L1461: 1 <= C130 by L1460 , FINSEQ_3:25;
L1462: ( max (( 0 ) , ( C130 - 1 )) ) = ( C130 - 1 ) by L1461 , FINSEQ_2:4;
reconsider D144 = ( C130 - 1 ) as (Element of ( NAT )) by L1462 , FINSEQ_2:5;
L1463: C130 <= ( len C128 ) by L1460 , FINSEQ_3:25;
L1464: C130 < ( C130 + 1 ) by NAT_1:13;
L1465: D144 < C130 by L1464 , XREAL_1:19;
L1466: D144 < ( len C128 ) by L1465 , L1463 , XXREAL_0:2;
L1467: D144 <= C130 by L1464 , XREAL_1:19;
L1468: D144 <= ( len C128 ) by L1467 , L1463 , XXREAL_0:2;
L1469:
now
per cases ;
case L1470: C130 = 1;
L1471: 1 in ( dom ( FinS (( C127 - R6 ) , R8) ) ) by L1442 , L1448 , L1449 , L1456 , FINSEQ_3:25;
L1472: 1 in ( Seg ( card R8 ) ) by L1442 , L1449 , L1457 , FINSEQ_1:def 3;
L1473: ( ( ( card R8 ) |-> R6 ) . 1 ) = R6 by L1472 , FUNCOP_1:7;
L1474: (( ( Rland (( C127 - R6 ) , C128) ) . C129 ) = ( ( FinS (( C127 - R6 ) , R8) ) . 1 ) & ( ( Rland (C127 , C128) ) . C129 ) = ( ( FinS (C127 , R8) ) . 1 )) by L1441 , L1442 , L1446 , L1460 , L1470 , L458;
thus L1475: ( ( Rland (( C127 - R6 ) , C128) ) . C129 ) = ( ( ( Rland (C127 , C128) ) . C129 ) - R6 ) by L1474 , L1451 , L1471 , L1473 , VALUED_1:13
.= ( ( ( Rland (C127 , C128) ) - R6 ) . C129 ) by L1443 , VALUED_1:3;
end;
case L1476: C130 <> 1;
L1477: 1 < C130 by L1476 , L1461 , XXREAL_0:1;
L1478: ( 1 + 1 ) <= C130 by L1477 , NAT_1:13;
L1479: 1 <= D144 by L1478 , XREAL_1:19;
L1480: D144 in ( dom C128 ) by L1479 , L1468 , FINSEQ_3:25;
L1481: (not C129 in ( C128 . D144 )) by L1480 , L1460 , XREAL_1:44;
L1482: C129 in ( ( C128 . ( D144 + 1 ) ) \ ( C128 . D144 ) ) by L1481 , L1460 , XBOOLE_0:def 5;
L1483: (( ( Rland (( C127 - R6 ) , C128) ) . C129 ) = ( ( FinS (( C127 - R6 ) , R8) ) . ( D144 + 1 ) ) & ( ( Rland (C127 , C128) ) . C129 ) = ( ( FinS (C127 , R8) ) . ( D144 + 1 ) )) by L1482 , L1441 , L1442 , L1446 , L1466 , L1479 , L458;
L1484: ( D144 + 1 ) in ( Seg ( card R8 ) ) by L1442 , L1449 , L1460 , FINSEQ_1:def 3;
L1485: ( ( ( card R8 ) |-> R6 ) . ( D144 + 1 ) ) = R6 by L1484 , FUNCOP_1:7;
L1486: ( D144 + 1 ) in ( dom ( FinS (( C127 - R6 ) , R8) ) ) by L1442 , L1448 , L1449 , L1460 , FINSEQ_3:29;
thus L1487: ( ( Rland (( C127 - R6 ) , C128) ) . C129 ) = ( ( ( Rland (C127 , C128) ) . C129 ) - R6 ) by L1486 , L1451 , L1483 , L1485 , VALUED_1:13
.= ( ( ( Rland (C127 , C128) ) - R6 ) . C129 ) by L1443 , VALUED_1:3;
end;
end;
thus L1489: ( ( Rland (( C127 - R6 ) , C128) ) . C129 ) = ( ( ( Rland (C127 , C128) ) - R6 ) . C129 ) by L1469;
end;
L1490: ( dom ( ( Rland (C127 , C128) ) - R6 ) ) = R7 by L1443 , VALUED_1:3;
thus L1491: thesis by L1490 , L1442 , L1446 , L1452 , L325 , PARTFUN1:5;
end;
theorem
L1492: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B118 being (PartFunc of R8 , ( REAL )) holds (for B119 being (RearrangmentGen of R7) holds ((B118 is  total & ( card R7 ) = ( card R8 )) implies (( max+ ( ( Rlor (B118 , B119) ) - R6 ) ) , ( max+ ( B118 - R6 ) ) are_fiberwise_equipotent  & ( FinS (( max+ ( ( Rlor (B118 , B119) ) - R6 ) ) , R7) ) = ( FinS (( max+ ( B118 - R6 ) ) , R8) ) & ( Sum (( max+ ( ( Rlor (B118 , B119) ) - R6 ) ) , R7) ) = ( Sum (( max+ ( B118 - R6 ) ) , R8) ))))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C131 being (PartFunc of R8 , ( REAL ));
let C132 being (RearrangmentGen of R7);
assume that
L1493: C131 is  total
and
L1494: ( card R7 ) = ( card R8 );
set D145 = ( max+ ( ( Rlor (C131 , C132) ) - R6 ) );
set D146 = ( max+ ( C131 - R6 ) );
L1495: ( dom C131 ) = R8 by L1493 , PARTFUN1:def 2;
L1496: ( C131 | R8 ) = C131 by L1495 , RELAT_1:68;
L1497: ( FinS (C131 , R8) ) , C131 are_fiberwise_equipotent  by L1496 , L1495 , RFUNCT_3:def 13;
L1498: ( Rlor (C131 , C132) ) , ( FinS (C131 , R8) ) are_fiberwise_equipotent  by L1493 , L1494 , L989;
L1499: ( Rlor (C131 , C132) ) , C131 are_fiberwise_equipotent  by L1498 , L1497 , CLASSES1:76;
L1500: ( ( Rlor (C131 , C132) ) - R6 ) , ( C131 - R6 ) are_fiberwise_equipotent  by L1499 , RFUNCT_3:51;
thus L1501: D145 , D146 are_fiberwise_equipotent  by L1500 , RFUNCT_3:41;
L1502: ( dom D145 ) = ( dom ( ( Rlor (C131 , C132) ) - R6 ) ) by RFUNCT_3:def 10;
L1503: ( D145 | R7 ) = D145 by L1502 , RELAT_1:68;
L1504: ( FinS (D145 , R7) ) , D145 are_fiberwise_equipotent  by L1503 , L1502 , RFUNCT_3:def 13;
L1505: ( FinS (D145 , R7) ) , D146 are_fiberwise_equipotent  by L1504 , L1501 , CLASSES1:76;
L1506: ( dom D146 ) = ( dom ( C131 - R6 ) ) by RFUNCT_3:def 10;
L1507: ( D146 | R8 ) = D146 by L1506 , RELAT_1:68;
thus L1508: ( FinS (D145 , R7) ) = ( FinS (D146 , R8) ) by L1507 , L1506 , L1505 , RFUNCT_3:def 13;
thus L1509: ( Sum (D145 , R7) ) = ( Sum ( FinS (D146 , R8) ) ) by L1508 , RFUNCT_3:def 14
.= ( Sum (D146 , R8) ) by RFUNCT_3:def 14;
end;
theorem
L1510: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B120 being (PartFunc of R8 , ( REAL )) holds (for B121 being (RearrangmentGen of R7) holds ((B120 is  total & ( card R7 ) = ( card R8 )) implies (( max- ( ( Rlor (B120 , B121) ) - R6 ) ) , ( max- ( B120 - R6 ) ) are_fiberwise_equipotent  & ( FinS (( max- ( ( Rlor (B120 , B121) ) - R6 ) ) , R7) ) = ( FinS (( max- ( B120 - R6 ) ) , R8) ) & ( Sum (( max- ( ( Rlor (B120 , B121) ) - R6 ) ) , R7) ) = ( Sum (( max- ( B120 - R6 ) ) , R8) ))))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C133 being (PartFunc of R8 , ( REAL ));
let C134 being (RearrangmentGen of R7);
assume that
L1511: C133 is  total
and
L1512: ( card R7 ) = ( card R8 );
set D147 = ( max- ( ( Rlor (C133 , C134) ) - R6 ) );
set D148 = ( max- ( C133 - R6 ) );
L1513: ( dom C133 ) = R8 by L1511 , PARTFUN1:def 2;
L1514: ( C133 | R8 ) = C133 by L1513 , RELAT_1:68;
L1515: ( FinS (C133 , R8) ) , C133 are_fiberwise_equipotent  by L1514 , L1513 , RFUNCT_3:def 13;
L1516: ( Rlor (C133 , C134) ) , ( FinS (C133 , R8) ) are_fiberwise_equipotent  by L1511 , L1512 , L989;
L1517: ( Rlor (C133 , C134) ) , C133 are_fiberwise_equipotent  by L1516 , L1515 , CLASSES1:76;
L1518: ( ( Rlor (C133 , C134) ) - R6 ) , ( C133 - R6 ) are_fiberwise_equipotent  by L1517 , RFUNCT_3:51;
thus L1519: D147 , D148 are_fiberwise_equipotent  by L1518 , RFUNCT_3:42;
L1520: ( dom D147 ) = ( dom ( ( Rlor (C133 , C134) ) - R6 ) ) by RFUNCT_3:def 11;
L1521: ( D147 | R7 ) = D147 by L1520 , RELAT_1:68;
L1522: ( FinS (D147 , R7) ) , D147 are_fiberwise_equipotent  by L1521 , L1520 , RFUNCT_3:def 13;
L1523: ( FinS (D147 , R7) ) , D148 are_fiberwise_equipotent  by L1522 , L1519 , CLASSES1:76;
L1524: ( dom D148 ) = ( dom ( C133 - R6 ) ) by RFUNCT_3:def 11;
L1525: ( D148 | R8 ) = D148 by L1524 , RELAT_1:68;
thus L1526: ( FinS (D147 , R7) ) = ( FinS (D148 , R8) ) by L1525 , L1524 , L1523 , RFUNCT_3:def 13;
thus L1527: ( Sum (D147 , R7) ) = ( Sum ( FinS (D148 , R8) ) ) by L1526 , RFUNCT_3:def 14
.= ( Sum (D148 , R8) ) by RFUNCT_3:def 14;
end;
theorem
L1528: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B122 being (PartFunc of R8 , ( REAL )) holds (for B123 being (RearrangmentGen of R7) holds ((B122 is  total & ( card R8 ) = ( card R7 )) implies (( len ( FinS (( Rlor (B122 , B123) ) , R7) ) ) = ( card R7 ) & 1 <= ( len ( FinS (( Rlor (B122 , B123) ) , R7) ) )))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C135 being (PartFunc of R8 , ( REAL ));
let C136 being (RearrangmentGen of R7);
set D149 = ( Rlor (C135 , C136) );
assume L1529: (C135 is  total & ( card R8 ) = ( card R7 ));
L1530: ( dom D149 ) = R7 by L1529 , L896;
L1531: ( D149 | R7 ) = D149 by L1530 , RELAT_1:68;
thus L1532: ( len ( FinS (D149 , R7) ) ) = ( card R7 ) by L1531 , L1530 , RFUNCT_3:67;
L1533: ( ( 0 ) + 1 ) <= ( card R7 ) by NAT_1:13;
thus L1534: thesis by L1533 , L1530 , L1531 , RFUNCT_3:67;
end;
theorem
L1535: (for R1 being (Element of ( NAT )) holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B124 being (PartFunc of R8 , ( REAL )) holds (for B125 being (RearrangmentGen of R7) holds ((B124 is  total & ( card R8 ) = ( card R7 ) & R1 in ( dom B125 )) implies ( ( FinS (( Rlor (B124 , B125) ) , R7) ) | R1 ) = ( FinS (( Rlor (B124 , B125) ) , ( ( Co_Gen B125 ) . R1 )) )))))))
proof
let R1 being (Element of ( NAT ));
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C137 being (PartFunc of R8 , ( REAL ));
let C138 being (RearrangmentGen of R7);
assume that
L1536: (C137 is  total & ( card R8 ) = ( card R7 ))
and
L1537: R1 in ( dom C138 );
set D150 = ( Rlor (C137 , C138) );
set D151 = ( Co_Gen C138 );
L1538: ( len ( FinS (D150 , R7) ) ) = ( card R7 ) by L1536 , L1528;
defpred S21[ (Element of ( NAT )) ] means ($1 in ( dom D151 ) implies ( ( FinS (( Rlor (C137 , C138) ) , R7) ) | $1 ) = ( FinS (( Rlor (C137 , C138) ) , ( D151 . $1 )) ));
L1539: ( dom D151 ) = ( Seg ( len D151 ) ) by FINSEQ_1:def 3;
L1540: ( len D151 ) = ( card R7 ) by L92;
L1541: ( dom ( FinS (D150 , R7) ) ) = ( Seg ( len ( FinS (D150 , R7) ) ) ) by FINSEQ_1:def 3;
L1542: (for R2 being (Element of ( NAT )) holds (S21[ R2 ] implies S21[ ( R2 + 1 ) ]))
proof
set D152 = ( FinS (D150 , R7) );
let R2 being (Element of ( NAT ));
assume L1543: S21[ R2 ];
L1544: R2 <= ( R2 + 1 ) by NAT_1:11;
assume L1545: ( R2 + 1 ) in ( dom D151 );
L1546: 1 <= ( R2 + 1 ) by L1545 , FINSEQ_3:25;
L1547: ( R2 + 1 ) in ( Seg ( R2 + 1 ) ) by L1546 , FINSEQ_1:1;
L1548: ( dom D150 ) = R7 by L1536 , L896;
L1549: ( R2 + 1 ) <= ( len D151 ) by L1545 , FINSEQ_3:25;
L1550: R2 <= ( len D151 ) by L1549 , NAT_1:13;
L1551: R2 < ( len D151 ) by L1549 , NAT_1:13;
L1552: R2 <= ( ( len D151 ) - 1 ) by L1549 , XREAL_1:19;
L1553: ( len ( D152 | ( R2 + 1 ) ) ) = ( R2 + 1 ) by L1540 , L1538 , L1549 , FINSEQ_1:59;
L1554:
now
per cases ;
case L1555: R2 = ( 0 );
consider C139 being (Element of R7) such that L1556: ( D151 . 1 ) = { C139 } by L191;
L1557: C139 in ( D151 . 1 ) by L1556 , TARSKI:def 1;
L1558: 1 <= ( len ( FinS (D150 , R7) ) ) by L1536 , L1528;
L1559: (1 in ( Seg 1 ) & 1 in ( dom ( FinS (D150 , R7) ) )) by L1558 , FINSEQ_1:1 , FINSEQ_3:25;
L1560: ( ( ( FinS (D150 , R7) ) | ( R2 + 1 ) ) . 1 ) = ( ( FinS (D150 , R7) ) . 1 ) by L1559 , L1555 , RFINSEQ:6
.= ( ( FinS (C137 , R8) ) . 1 ) by L1536 , L1314
.= ( D150 . C139 ) by L1536 , L1557 , L904;
L1561: ( dom D150 ) = R7 by L1536 , L896;
L1562: ( FinS (D150 , ( D151 . ( R2 + 1 ) )) ) = <* ( D150 . C139 ) *> by L1561 , L1555 , L1556 , RFUNCT_3:69;
L1563: ( len ( ( FinS (D150 , R7) ) | ( R2 + 1 ) ) ) = 1 by L1555 , L1558 , FINSEQ_1:59;
thus L1564: thesis by L1563 , L1562 , L1560 , FINSEQ_1:40;
end;
case L1565: R2 <> ( 0 );
L1566: ( Seg R2 ) c= ( Seg ( R2 + 1 ) ) by L1544 , FINSEQ_1:5;
L1567: ( ( D152 | ( R2 + 1 ) ) | R2 ) = ( ( D152 | ( R2 + 1 ) ) | ( Seg R2 ) ) by FINSEQ_1:def 15
.= ( ( D152 | ( Seg ( R2 + 1 ) ) ) | ( Seg R2 ) ) by FINSEQ_1:def 15
.= ( D152 | ( ( Seg ( R2 + 1 ) ) /\ ( Seg R2 ) ) ) by RELAT_1:71
.= ( D152 | ( Seg R2 ) ) by L1566 , XBOOLE_1:28
.= ( D152 | R2 ) by FINSEQ_1:def 15;
L1568: ( ( 0 ) + 1 ) <= R2 by L1565 , NAT_1:13;
consider C140 being (Element of R7) such that L1569: ( ( D151 . ( R2 + 1 ) ) \ ( D151 . R2 ) ) = { C140 } and L1570: ( D151 . ( R2 + 1 ) ) = ( ( D151 . R2 ) \/ { C140 } ) and L1571: ( ( D151 . ( R2 + 1 ) ) \ { C140 } ) = ( D151 . R2 ) by L1568 , L1552 , L199;
L1572: C140 in { C140 } by TARSKI:def 1;
L1573: ( D150 . C140 ) = ( ( FinS (C137 , R8) ) . ( R2 + 1 ) ) by L1572 , L1536 , L1551 , L1568 , L1569 , L904
.= ( ( FinS (D150 , R7) ) . ( R2 + 1 ) ) by L1536 , L1314
.= ( ( D152 | ( R2 + 1 ) ) . ( R2 + 1 ) ) by L1539 , L1541 , L1540 , L1538 , L1545 , L1547 , RFINSEQ:6;
L1574: ( D152 | ( R2 + 1 ) ) = ( ( D152 | R2 ) ^ <* ( D150 . C140 ) *> ) by L1573 , L1553 , L1567 , RFINSEQ:7;
L1575: C140 in ( ( dom D150 ) /\ ( D151 . ( R2 + 1 ) ) ) by L1548 , L1569 , L1572 , XBOOLE_0:def 4;
L1576: C140 in ( dom ( D150 | ( D151 . ( R2 + 1 ) ) ) ) by L1575 , RELAT_1:61;
L1577: ( D152 | ( R2 + 1 ) ) is  non-increasing by RFINSEQ:20;
L1578: ( dom ( D150 | ( D151 . ( R2 + 1 ) ) ) ) = ( ( dom D150 ) /\ ( D151 . ( R2 + 1 ) ) ) by RELAT_1:61
.= ( D151 . ( R2 + 1 ) ) by L1545 , L1548 , L167 , XBOOLE_1:28;
L1579: ( D151 . ( R2 + 1 ) ) is  finite by L1545 , L167 , FINSET_1:1;
L1580: ( D152 | ( R2 + 1 ) ) , ( D150 | ( D151 . ( R2 + 1 ) ) ) are_fiberwise_equipotent  by L1579 , L1543 , L1550 , L1568 , L1571 , L1574 , L1576 , FINSEQ_3:25 , RFUNCT_3:65;
thus L1581: thesis by L1580 , L1578 , L1577 , RFUNCT_3:def 13;
end;
end;
thus L1583: thesis by L1554;
end;
L1584: (( dom C138 ) = ( Seg ( len C138 ) ) & ( len C138 ) = ( card R7 )) by L92 , FINSEQ_1:def 3;
L1585: S21[ ( 0 ) ] by FINSEQ_3:25;
L1586: (for R2 being (Element of ( NAT )) holds S21[ R2 ]) from NAT_1:sch 1(L1585 , L1542);
thus L1587: thesis by L1586 , L1537 , L1539 , L1584 , L1540;
end;
theorem
L1588: (for R6 being Real holds (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B126 being (PartFunc of R8 , ( REAL )) holds (for B127 being (RearrangmentGen of R7) holds ((B126 is  total & ( card R8 ) = ( card R7 )) implies ( Rlor (( B126 - R6 ) , B127) ) = ( ( Rlor (B126 , B127) ) - R6 )))))))
proof
let R6 being Real;
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C141 being (PartFunc of R8 , ( REAL ));
let C142 being (RearrangmentGen of R7);
assume that
L1589: C141 is  total
and
L1590: ( card R8 ) = ( card R7 );
L1591: ( dom ( Rlor (C141 , C142) ) ) = R7 by L1589 , L1590 , L896;
set D153 = ( Co_Gen C142 );
L1592: ( len D153 ) = ( card R7 ) by L92;
L1593: ( dom C141 ) = R8 by L1589 , PARTFUN1:def 2;
L1594: ( dom ( C141 - R6 ) ) = R8 by L1593 , VALUED_1:3;
L1595: ( C141 - R6 ) is  total by L1594 , PARTFUN1:def 2;
L1596: ( ( C141 - R6 ) | R8 ) = ( C141 - R6 ) by L1594 , RELAT_1:68;
L1597: ( len ( FinS (( C141 - R6 ) , R8) ) ) = ( card R8 ) by L1596 , L1594 , RFUNCT_3:67;
L1598: ( C141 | R8 ) = C141 by L1593 , RELAT_1:68;
L1599: ( FinS (( C141 - R6 ) , R8) ) = ( ( FinS (C141 , R8) ) - ( ( card R8 ) |-> R6 ) ) by L1598 , L1593 , RFUNCT_3:73;
L1600:
now
let C143 being (Element of R7);
assume L1601: C143 in ( dom ( Rlor (( C141 - R6 ) , C142) ) );
defpred S22[ set ] means ($1 in ( dom D153 ) & C143 in ( D153 . $1 ));
L1602: R7 = ( D153 . ( len D153 ) ) by L139;
L1603: ( len D153 ) <> ( 0 ) by L144;
L1604: ( ( 0 ) + 1 ) <= ( len D153 ) by L1603 , NAT_1:13;
L1605: 1 in ( dom D153 ) by L1604 , FINSEQ_3:25;
L1606: ( len D153 ) in ( dom D153 ) by L1604 , FINSEQ_3:25;
L1607: (ex B128 being Nat st S22[ B128 ]) by L1606 , L1602;
consider C144 being Nat such that L1608: (S22[ C144 ] & (for B129 being Nat holds (S22[ B129 ] implies C144 <= B129))) from NAT_1:sch 5(L1607);
L1609: 1 <= C144 by L1608 , FINSEQ_3:25;
L1610: ( max (( 0 ) , ( C144 - 1 )) ) = ( C144 - 1 ) by L1609 , FINSEQ_2:4;
reconsider D154 = ( C144 - 1 ) as (Element of ( NAT )) by L1610 , FINSEQ_2:5;
L1611: C144 <= ( len D153 ) by L1608 , FINSEQ_3:25;
L1612: C144 < ( C144 + 1 ) by NAT_1:13;
L1613: D154 < C144 by L1612 , XREAL_1:19;
L1614: D154 < ( len D153 ) by L1613 , L1611 , XXREAL_0:2;
L1615: D154 <= C144 by L1612 , XREAL_1:19;
L1616: D154 <= ( len D153 ) by L1615 , L1611 , XXREAL_0:2;
L1617:
now
per cases ;
case L1618: C144 = 1;
L1619: 1 in ( dom ( FinS (( C141 - R6 ) , R8) ) ) by L1590 , L1597 , L1592 , L1604 , FINSEQ_3:25;
L1620: 1 in ( Seg ( card R8 ) ) by L1590 , L1592 , L1605 , FINSEQ_1:def 3;
L1621: ( ( ( card R8 ) |-> R6 ) . 1 ) = R6 by L1620 , FUNCOP_1:7;
L1622: (( ( Rlor (( C141 - R6 ) , C142) ) . C143 ) = ( ( FinS (( C141 - R6 ) , R8) ) . 1 ) & ( ( Rlor (C141 , C142) ) . C143 ) = ( ( FinS (C141 , R8) ) . 1 )) by L1589 , L1590 , L1595 , L1608 , L1618 , L904;
thus L1623: ( ( Rlor (( C141 - R6 ) , C142) ) . C143 ) = ( ( ( Rlor (C141 , C142) ) . C143 ) - R6 ) by L1622 , L1599 , L1619 , L1621 , VALUED_1:13
.= ( ( ( Rlor (C141 , C142) ) - R6 ) . C143 ) by L1591 , VALUED_1:3;
end;
case L1624: C144 <> 1;
L1625: 1 < C144 by L1624 , L1609 , XXREAL_0:1;
L1626: ( 1 + 1 ) <= C144 by L1625 , NAT_1:13;
L1627: 1 <= D154 by L1626 , XREAL_1:19;
L1628: D154 in ( dom D153 ) by L1627 , L1616 , FINSEQ_3:25;
L1629: (not C143 in ( D153 . D154 )) by L1628 , L1608 , XREAL_1:44;
L1630: C143 in ( ( D153 . ( D154 + 1 ) ) \ ( D153 . D154 ) ) by L1629 , L1608 , XBOOLE_0:def 5;
L1631: (( ( Rlor (( C141 - R6 ) , C142) ) . C143 ) = ( ( FinS (( C141 - R6 ) , R8) ) . ( D154 + 1 ) ) & ( ( Rlor (C141 , C142) ) . C143 ) = ( ( FinS (C141 , R8) ) . ( D154 + 1 ) )) by L1630 , L1589 , L1590 , L1595 , L1614 , L1627 , L904;
L1632: ( D154 + 1 ) in ( Seg ( card R8 ) ) by L1590 , L1592 , L1608 , FINSEQ_1:def 3;
L1633: ( ( ( card R8 ) |-> R6 ) . ( D154 + 1 ) ) = R6 by L1632 , FUNCOP_1:7;
L1634: ( D154 + 1 ) in ( dom ( FinS (( C141 - R6 ) , R8) ) ) by L1590 , L1597 , L1592 , L1608 , FINSEQ_3:29;
thus L1635: ( ( Rlor (( C141 - R6 ) , C142) ) . C143 ) = ( ( ( Rlor (C141 , C142) ) . C143 ) - R6 ) by L1634 , L1599 , L1631 , L1633 , VALUED_1:13
.= ( ( ( Rlor (C141 , C142) ) - R6 ) . C143 ) by L1591 , VALUED_1:3;
end;
end;
thus L1637: ( ( Rlor (( C141 - R6 ) , C142) ) . C143 ) = ( ( ( Rlor (C141 , C142) ) - R6 ) . C143 ) by L1617;
end;
L1638: ( dom ( ( Rlor (C141 , C142) ) - R6 ) ) = R7 by L1591 , VALUED_1:3;
thus L1639: thesis by L1638 , L1590 , L1595 , L1600 , L896 , PARTFUN1:5;
end;
theorem
L1640: (for R7 being non  empty  finite set holds (for R8 being non  empty  finite set holds (for B130 being (PartFunc of R8 , ( REAL )) holds (for B131 being (RearrangmentGen of R7) holds ((B130 is  total & ( card R8 ) = ( card R7 )) implies (( Rland (B130 , B131) ) , B130 are_fiberwise_equipotent  & ( Rlor (B130 , B131) ) , B130 are_fiberwise_equipotent  & ( rng ( Rland (B130 , B131) ) ) = ( rng B130 ) & ( rng ( Rlor (B130 , B131) ) ) = ( rng B130 )))))))
proof
let R7 being non  empty  finite set;
let R8 being non  empty  finite set;
let C145 being (PartFunc of R8 , ( REAL ));
let C146 being (RearrangmentGen of R7);
assume that
L1641: C145 is  total
and
L1642: ( card R8 ) = ( card R7 );
L1643: ( dom C145 ) = R8 by L1641 , PARTFUN1:def 2;
L1644: ( dom ( C145 | R8 ) ) = ( ( dom C145 ) /\ R8 ) by RELAT_1:61
.= R8 by L1643;
L1645: ( FinS (C145 , R8) ) , ( C145 | R8 ) are_fiberwise_equipotent  by L1644 , RFUNCT_3:def 13;
L1646: ( Rlor (C145 , C146) ) , ( FinS (C145 , R8) ) are_fiberwise_equipotent  by L1641 , L1642 , L989;
L1647: ( Rlor (C145 , C146) ) , ( C145 | R8 ) are_fiberwise_equipotent  by L1646 , L1645 , CLASSES1:76;
L1648: ( Rland (C145 , C146) ) , ( FinS (C145 , R8) ) are_fiberwise_equipotent  by L1641 , L1642 , L542;
L1649: ( Rland (C145 , C146) ) , ( C145 | R8 ) are_fiberwise_equipotent  by L1648 , L1645 , CLASSES1:76;
thus L1650: (( Rland (C145 , C146) ) , C145 are_fiberwise_equipotent  & ( Rlor (C145 , C146) ) , C145 are_fiberwise_equipotent ) by L1649 , L1643 , L1647 , RELAT_1:68;
thus L1651: thesis by L1650 , CLASSES1:75;
end;
