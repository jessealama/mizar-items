:: Order Sorted Quotient Algebra
::  by Josef Urban
::
:: Received September 19, 2002
:: Copyright (c) 2002-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, XBOOLE_0, ORDERS_2, MSUALG_4, OSALG_1, RELAT_1,
      STRUCT_0, FUNCOP_1, PBOOLE, SUBSET_1, XXREAL_0, FUNCT_1, MSUALG_1,
      TARSKI, EQREL_1, NAT_1, MARGREL1, PARTFUN1, FINSEQ_1, ARYTM_3, ARYTM_1,
      ZFMISC_1, FINSEQ_5, CARD_1, RELAT_2, ORDINAL4, NATTRA_1, YELLOW15,
      SETFAM_1, COH_SP, YELLOW18, WAYBEL_0, CARD_3, MSUALG_3, WELLORD1, SEQM_3,
      OSALG_4;
 notations ZFMISC_1, TARSKI, XBOOLE_0, SUBSET_1, RELAT_1, RELAT_2, FUNCT_1,
      RELSET_1, PARTFUN1, EQREL_1, SETFAM_1, XCMPLX_0, ORDERS_2, ORDERS_3,
      NUMBERS, ORDINAL1, FUNCT_2, FINSEQ_1, CARD_3, FINSEQ_2, FINSEQ_4,
      FINSEQ_5, FUNCOP_1, PBOOLE, STRUCT_0, WAYBEL_0, MSUALG_1, MSUALG_3,
      OSALG_1, OSALG_3, MSUALG_4, XXREAL_0;
 constructors REAL_1, NAT_1, NAT_D, EQREL_1, FINSEQ_4, FINSEQ_5, MSUALG_3,
      MSUALG_4, ORDERS_3, WAYBEL_0, OSALG_3, RELSET_1;
 registrations SUBSET_1, RELAT_1, PARTFUN1, FUNCOP_1, XREAL_0, INT_1, FINSEQ_1,
      EQREL_1, FUNCT_1, PBOOLE, STRUCT_0, MSUALG_1, MSUALG_3, MSUALG_4,
      ORDERS_3, OSALG_1, ORDINAL1, CARD_3, TOLER_1, RELSET_1, FINSEQ_2;
 requirements BOOLE, SUBSET, NUMERALS, REAL, ARITHM;
 definitions TARSKI, MSUALG_3, XBOOLE_0, OSALG_1, OSALG_3;
 theorems XBOOLE_0, XBOOLE_1, FUNCT_1, FUNCT_2, PBOOLE, CARD_3, MSUALG_1,
      MSUALG_5, OSALG_1, OSALG_3, RELAT_2, ZFMISC_1, RELAT_1, RELSET_1,
      EQREL_1, MSUALG_3, MSUALG_6, MSAFREE, TARSKI, SYSREL, ORDERS_2, FINSEQ_1,
      FINSEQ_3, ENUMSET1, FINSEQ_5, INT_1, ORDERS_3, PARTFUN1, WAYBEL_0,
      GRFUNC_1, MSUALG_9, MSUALG_4, FINSEQ_2, ORDERS_1, FUNCOP_1, XREAL_1,
      XXREAL_0, XTUPLE_0;
 schemes FUNCT_1, CLASSES1, NAT_1, FUNCT_2;

begin
registration
let C1 being non  empty Poset;
cluster  Relation-yielding for (OrderSortedSet of C1);
existence
proof
set D1 = the Relation;
set D2 = (the carrier of C1);
set D3 = ( D2 --> D1 );
reconsider D4 = D3 as (ManySortedSet of D2);
L1: D4 is  order-sorted
proof
let C2 , C3 being (Element of C1);
assume that
L2: C2 <= C3;
L3: ( D4 . C2 ) = D1 by FUNCOP_1:7;
thus L4: thesis by L3 , FUNCOP_1:7;
end;
reconsider D5 = D4 as (OrderSortedSet of C1) by L1;
take D5;
L5: (for B1 being set holds (B1 in ( dom D5 ) implies ( D5 . B1 ) is Relation)) by FUNCOP_1:7;
thus L6: thesis by L5 , FUNCOP_1:def 11;
end;
end;
definition
let C4 being non  empty Poset;
let C5 , C6 being (ManySortedSet of (the carrier of C4));
let C7 being (ManySortedRelation of C5 , C6);
attr C7 is  os-compatible
means
:L8: (for B2 , B3 being (Element of C4) holds (B2 <= B3 implies (for B4 , B5 being set holds ((B4 in ( C5 . B2 ) & B5 in ( C6 . B2 )) implies ([ B4 , B5 ] in ( C7 . B2 ) iff [ B4 , B5 ] in ( C7 . B3 ))))));
end;
registration
let C8 being non  empty Poset;
let C9 , C10 being (ManySortedSet of (the carrier of C8));
cluster  os-compatible for (ManySortedRelation of C9 , C10);
existence
proof
set D6 = (the carrier of C8);
consider C11 being Relation such that L10: C11 = ( {} );
set D7 = ( D6 --> C11 );
reconsider D8 = D7 as (ManySortedSet of C8);
set D9 = D8;
L11: (for B6 being set holds (B6 in D6 implies ( D8 . B6 ) is (Relation of ( C9 . B6 ) , ( C10 . B6 ))))
proof
let C12 being set;
assume L12: C12 in D6;
L13: ( D8 . C12 ) = ( {} ) by L12 , L10 , FUNCOP_1:7;
thus L14: thesis by L13 , RELSET_1:12;
end;
reconsider D10 = D9 as (ManySortedRelation of C9 , C10) by L11 , MSUALG_4:def 1;
take D8;
L15: (for B7 , B8 being (Element of C8) holds (B7 <= B8 implies (for B9 , B10 being set holds ((B9 in ( C9 . B7 ) & B10 in ( C10 . B7 )) implies ([ B9 , B10 ] in ( D9 . B7 ) iff [ B9 , B10 ] in ( D9 . B8 ))))))
proof
let C13 , C14 being (Element of C8);
assume that
L16: C13 <= C14;
let C15 , C16 being set;
assume that
L17: C15 in ( C9 . C13 )
and
L18: C16 in ( C10 . C13 );
L19: ( D9 . C13 ) = C11 by FUNCOP_1:7
.= ( D9 . C14 ) by FUNCOP_1:7;
thus L20: thesis by L19;
end;
L21: D10 is  os-compatible by L15 , L8;
thus L22: thesis by L21;
end;
end;
definition
let C17 being non  empty Poset;
let C18 , C19 being (ManySortedSet of (the carrier of C17));
mode OrderSortedRelation of C18 , C19
 is  os-compatible (ManySortedRelation of C18 , C19);
end;
theorem
L25: (for B11 being non  empty Poset holds (for B12 , B13 being (ManySortedSet of (the carrier of B11)) holds (for B14 being (ManySortedRelation of B12 , B13) holds (B14 is  os-compatible implies B14 is (OrderSortedSet of B11)))))
proof
let C20 being non  empty Poset;
let C21 , C22 being (ManySortedSet of (the carrier of C20));
let C23 being (ManySortedRelation of C21 , C22);
set D11 = C23;
assume L26: C23 is  os-compatible;
L27: D11 is  order-sorted
proof
let C24 , C25 being (Element of C20);
assume that
L28: C24 <= C25;
L29: (for B15 , B16 being set holds ([ B15 , B16 ] in ( C23 . C24 ) implies [ B15 , B16 ] in ( C23 . C25 )))
proof
let C26 , C27 being set;
assume that
L30: [ C26 , C27 ] in ( C23 . C24 );
L31: (C26 in ( C21 . C24 ) & C27 in ( C22 . C24 )) by L30 , ZFMISC_1:87;
thus L32: thesis by L31 , L26 , L28 , L30 , L8;
end;
thus L33: thesis by L29 , RELAT_1:def 3;
end;
thus L34: thesis by L27;
end;
registration
let C28 being non  empty Poset;
let C29 , C30 being (ManySortedSet of C28);
cluster  os-compatible ->  order-sorted for (ManySortedRelation of C29 , C30);
coherence by L25;
end;
definition
let C31 being non  empty Poset;
let C32 being (ManySortedSet of (the carrier of C31));
mode OrderSortedRelation of C32
 is (OrderSortedRelation of C32 , C32);
end;
definition
let C33 being OrderSortedSign;
let C34 being (OSAlgebra of C33);
mode OrderSortedRelation of C34
 -> (ManySortedRelation of C34)
means :L37: it is  os-compatible;
existence
proof
reconsider D12 = (the Sorts of C34) as (OrderSortedSet of C33) by OSALG_1:17;
set D13 = the (OrderSortedRelation of D12);
reconsider D14 = D13 as (ManySortedRelation of C34);
take D14;
thus L38: thesis;
end;
end;
registration
let C35 being OrderSortedSign;
let C36 being (OSAlgebra of C35);
cluster  MSEquivalence-like for (OrderSortedRelation of C36);
existence
proof
deffunc H1((Element of C35)) = ( id ( (the Sorts of C36) . $1 ) );
consider C37 being Function such that L40: (( dom C37 ) = (the carrier of C35) & (for B17 being (Element of C35) holds ( C37 . B17 ) = H1(B17))) from FUNCT_1:sch 4;
reconsider D15 = C37 as (ManySortedSet of (the carrier of C35)) by L40 , PARTFUN1:def 2 , RELAT_1:def 18;
L41: (for B18 being set holds (B18 in (the carrier of C35) implies ( D15 . B18 ) is (Relation of ( (the Sorts of C36) . B18 ) , ( (the Sorts of C36) . B18 ))))
proof
let C38 being set;
assume L42: C38 in (the carrier of C35);
L43: ( D15 . C38 ) = ( id ( (the Sorts of C36) . C38 ) ) by L42 , L40;
thus L44: thesis by L43;
end;
reconsider D16 = D15 as (ManySortedRelation of (the Sorts of C36) , (the Sorts of C36)) by L41 , MSUALG_4:def 1;
reconsider D17 = D16 as (ManySortedRelation of C36);
set D18 = D17;
L45: D18 is  os-compatible
proof
reconsider D19 = (the Sorts of C36) as (OrderSortedSet of C35) by OSALG_1:17;
let C39 , C40 being (Element of C35);
assume that
L46: C39 <= C40;
reconsider D20 = C39 , D21 = C40 as (Element of C35);
let C41 , C42 being set;
assume that
L47: C41 in ( (the Sorts of C36) . C39 )
and
L48: C42 in ( (the Sorts of C36) . C39 );
L49: ( D18 . C39 ) = ( id ( D19 . C39 ) ) by L40;
L50: ( D18 . C40 ) = ( id ( D19 . C40 ) ) by L40;
L51: ( D19 . D20 ) c= ( D19 . D21 ) by L46 , OSALG_1:def 16;
L52: ( id ( D19 . C39 ) ) c= ( id ( D19 . C40 ) ) by L51 , SYSREL:15;
thus L53: ([ C41 , C42 ] in ( D18 . C39 ) implies [ C41 , C42 ] in ( D18 . C40 )) by L52 , L49 , L50;
assume L54: [ C41 , C42 ] in ( D18 . C40 );
L55: C41 = C42 by L54 , L50 , RELAT_1:def 10;
thus L56: thesis by L55 , L49 , L47 , RELAT_1:def 10;
end;
take D17;
L57: (for B19 being set holds (for B20 being (Relation of ( (the Sorts of C36) . B19 )) holds ((B19 in (the carrier of C35) & ( D17 . B19 ) = B20) implies B20 is (Equivalence_Relation of ( (the Sorts of C36) . B19 )))))
proof
let C43 being set;
let C44 being (Relation of ( (the Sorts of C36) . C43 ));
assume L58: (C43 in (the carrier of C35) & ( D17 . C43 ) = C44);
L59: C44 = ( id ( (the Sorts of C36) . C43 ) ) by L58 , L40;
thus L60: thesis by L59;
end;
L61: D17 is  MSEquivalence_Relation-like by L57 , MSUALG_4:def 2;
thus L62: thesis by L61 , L45 , L37 , MSUALG_4:def 3;
end;
end;
registration
let C45 being OrderSortedSign;
let C46 being  non-empty (OSAlgebra of C45);
cluster  MSCongruence-like for  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like (OrderSortedRelation of C46);
existence
proof
deffunc H2((Element of C45)) = ( id ( (the Sorts of C46) . $1 ) );
consider C47 being Function such that L64: (( dom C47 ) = (the carrier of C45) & (for B21 being (Element of C45) holds ( C47 . B21 ) = H2(B21))) from FUNCT_1:sch 4;
reconsider D22 = C47 as (ManySortedSet of (the carrier of C45)) by L64 , PARTFUN1:def 2 , RELAT_1:def 18;
L65: (for B22 being set holds (B22 in (the carrier of C45) implies ( D22 . B22 ) is (Relation of ( (the Sorts of C46) . B22 ) , ( (the Sorts of C46) . B22 ))))
proof
let C48 being set;
assume L66: C48 in (the carrier of C45);
L67: ( D22 . C48 ) = ( id ( (the Sorts of C46) . C48 ) ) by L66 , L64;
thus L68: thesis by L67;
end;
reconsider D23 = D22 as (ManySortedRelation of (the Sorts of C46) , (the Sorts of C46)) by L65 , MSUALG_4:def 1;
reconsider D24 = D23 as (ManySortedRelation of C46);
L69: (for B23 being set holds (for B24 being (Relation of ( (the Sorts of C46) . B23 )) holds ((B23 in (the carrier of C45) & ( D24 . B23 ) = B24) implies B24 is (Equivalence_Relation of ( (the Sorts of C46) . B23 )))))
proof
let C49 being set;
let C50 being (Relation of ( (the Sorts of C46) . C49 ));
assume L70: (C49 in (the carrier of C45) & ( D24 . C49 ) = C50);
L71: C50 = ( id ( (the Sorts of C46) . C49 ) ) by L70 , L64;
thus L72: thesis by L71;
end;
L73: D24 is  MSEquivalence_Relation-like by L69 , MSUALG_4:def 2;
reconsider D25 = D24 as  MSEquivalence-like (ManySortedRelation of C46) by L73 , MSUALG_4:def 3;
set D26 = D25;
L74: D26 is  os-compatible
proof
reconsider D27 = (the Sorts of C46) as (OrderSortedSet of C45) by OSALG_1:17;
let C51 , C52 being (Element of C45);
assume that
L75: C51 <= C52;
reconsider D28 = C51 , D29 = C52 as (Element of C45);
let C53 , C54 being set;
assume that
L76: C53 in ( (the Sorts of C46) . C51 )
and
L77: C54 in ( (the Sorts of C46) . C51 );
L78: ( D26 . C51 ) = ( id ( D27 . C51 ) ) by L64;
L79: ( D26 . C52 ) = ( id ( D27 . C52 ) ) by L64;
L80: ( D27 . D28 ) c= ( D27 . D29 ) by L75 , OSALG_1:def 16;
L81: ( id ( D27 . C51 ) ) c= ( id ( D27 . C52 ) ) by L80 , SYSREL:15;
thus L82: ([ C53 , C54 ] in ( D26 . C51 ) implies [ C53 , C54 ] in ( D26 . C52 )) by L81 , L78 , L79;
assume L83: [ C53 , C54 ] in ( D26 . C52 );
L84: C53 = C54 by L83 , L79 , RELAT_1:def 10;
thus L85: [ C53 , C54 ] in ( D26 . C51 ) by L84 , L78 , L76 , RELAT_1:def 10;
end;
reconsider D30 = D26 as  MSEquivalence-like (OrderSortedRelation of C46) by L74 , L37;
take D30;
L86: (for B25 being (Element of (the carrier' of C45)) holds (for B26 , B27 being (Element of ( Args (B25 , C46) )) holds ((for B28 being Nat holds (B28 in ( dom B26 ) implies [ ( B26 . B28 ) , ( B27 . B28 ) ] in ( D30 . ( ( the_arity_of B25 ) /. B28 ) ))) implies [ ( ( Den (B25 , C46) ) . B26 ) , ( ( Den (B25 , C46) ) . B27 ) ] in ( D30 . ( the_result_sort_of B25 ) ))))
proof
let C55 being (Element of (the carrier' of C45));
let C56 , C57 being (Element of ( Args (C55 , C46) ));
L87: ( dom C56 ) = ( dom ( the_arity_of C55 ) ) by MSUALG_3:6;
assume L88: (for B29 being Nat holds (B29 in ( dom C56 ) implies [ ( C56 . B29 ) , ( C57 . B29 ) ] in ( D30 . ( ( the_arity_of C55 ) /. B29 ) )));
L89: (for B30 being set holds (B30 in ( dom ( the_arity_of C55 ) ) implies ( C56 . B30 ) = ( C57 . B30 )))
proof
set D31 = ( the_arity_of C55 );
let C58 being set;
assume L90: C58 in ( dom ( the_arity_of C55 ) );
reconsider D32 = C58 as Nat by L90;
L91: ( D31 . D32 ) in ( rng D31 ) by L90 , FUNCT_1:def 3;
L92: ( D30 . ( D31 . D32 ) ) = ( id ( (the Sorts of C46) . ( D31 . D32 ) ) ) by L91 , L64;
L93: ( ( the_arity_of C55 ) /. D32 ) = ( ( the_arity_of C55 ) . D32 ) by L90 , PARTFUN1:def 6;
L94: [ ( C56 . D32 ) , ( C57 . D32 ) ] in ( D30 . ( D31 . D32 ) ) by L93 , L88 , L87 , L90;
thus L95: thesis by L94 , L92 , RELAT_1:def 10;
end;
set D33 = ( the_result_sort_of C55 );
L96: ( D30 . D33 ) = ( id ( (the Sorts of C46) . D33 ) ) by L64;
L97: ( dom (the ResultSort of C45) ) = (the carrier' of C45) by FUNCT_2:def 1;
L98: ( dom ( (the Sorts of C46) * (the ResultSort of C45) ) ) = ( dom (the ResultSort of C45) ) by L97 , PARTFUN1:def 2;
L99: ( Result (C55 , C46) ) = ( ( (the Sorts of C46) * (the ResultSort of C45) ) . C55 ) by MSUALG_1:def 5
.= ( (the Sorts of C46) . ( (the ResultSort of C45) . C55 ) ) by L97 , L98 , FUNCT_1:12
.= ( (the Sorts of C46) . D33 ) by MSUALG_1:def 2;
L100: ( dom C57 ) = ( dom ( the_arity_of C55 ) ) by MSUALG_3:6;
L101: ( ( Den (C55 , C46) ) . C56 ) = ( ( Den (C55 , C46) ) . C57 ) by L100 , L87 , L89 , FUNCT_1:2;
thus L102: thesis by L101 , L96 , L99 , RELAT_1:def 10;
end;
thus L103: thesis by L86 , MSUALG_4:def 4;
end;
end;
definition
let C59 being OrderSortedSign;
let C60 being  non-empty (OSAlgebra of C59);
mode OSCongruence of C60
 is  MSCongruence-like  MSEquivalence-like (OrderSortedRelation of C60);
end;
definition
let C61 being non  empty Poset;
func Path_Rel C61 -> (Equivalence_Relation of (the carrier of C61)) means 
:L106: (for B31 , B32 being set holds ([ B31 , B32 ] in it iff (B31 in (the carrier of C61) & B32 in (the carrier of C61) & (ex B33 being (FinSequence of (the carrier of C61)) st (1 < ( len B33 ) & ( B33 . 1 ) = B31 & ( B33 . ( len B33 ) ) = B32 & (for B34 being Nat holds ((2 <= B34 & B34 <= ( len B33 )) implies ([ ( B33 . B34 ) , ( B33 . ( B34 - 1 ) ) ] in (the InternalRel of C61) or [ ( B33 . ( B34 - 1 ) ) , ( B33 . B34 ) ] in (the InternalRel of C61)))))))));
existence
proof
defpred S1[ set , set ] means (ex B35 being (FinSequence of (the carrier of C61)) st (1 < ( len B35 ) & ( B35 . 1 ) = $1 & ( B35 . ( len B35 ) ) = $2 & (for B36 being Nat holds ((2 <= B36 & B36 <= ( len B35 )) implies ([ ( B35 . B36 ) , ( B35 . ( B36 - 1 ) ) ] in (the InternalRel of C61) or [ ( B35 . ( B36 - 1 ) ) , ( B35 . B36 ) ] in (the InternalRel of C61))))));
set D34 = { [ B37 , B38 ] where B37 , B38 is (Element of C61) : (B37 in (the carrier of C61) & B38 in (the carrier of C61) & S1[ B37 , B38 ]) };
L107: D34 c= [: (the carrier of C61) , (the carrier of C61) :]
proof
let C62 being set;
assume L108: C62 in D34;
L109: (ex B39 , B40 being (Element of C61) st (C62 = [ B39 , B40 ] & B39 in (the carrier of C61) & B40 in (the carrier of C61) & S1[ B39 , B40 ])) by L108;
thus L110: thesis by L109 , ZFMISC_1:87;
end;
reconsider D35 = D34 as (Relation of (the carrier of C61)) by L107;
L111: (for B41 , B42 being set holds ([ B41 , B42 ] in D34 iff (B41 in (the carrier of C61) & B42 in (the carrier of C61) & S1[ B41 , B42 ])))
proof
let C63 , C64 being set;
thus L112:now
assume L113: [ C63 , C64 ] in D34;
consider C65 , C66 being (Element of C61) such that L114: [ C63 , C64 ] = [ C65 , C66 ] and L115: C65 in (the carrier of C61) and L116: C66 in (the carrier of C61) and L117: S1[ C65 , C66 ] by L113;
L118: (C63 = C65 & C64 = C66) by L114 , XTUPLE_0:1;
thus L119: (C63 in (the carrier of C61) & C64 in (the carrier of C61) & S1[ C63 , C64 ]) by L118 , L117;
end;
thus L120: thesis;
end;
L121:
now
let C67 , C68 being set;
assume that
L122: (C67 in (the carrier of C61) & C68 in (the carrier of C61))
and
L123: [ C67 , C68 ] in D35;
consider C69 being (FinSequence of (the carrier of C61)) such that L124: 1 < ( len C69 ) and L125: (( C69 . 1 ) = C67 & ( C69 . ( len C69 ) ) = C68) and L126: (for B43 being Nat holds ((2 <= B43 & B43 <= ( len C69 )) implies ([ ( C69 . B43 ) , ( C69 . ( B43 - 1 ) ) ] in (the InternalRel of C61) or [ ( C69 . ( B43 - 1 ) ) , ( C69 . B43 ) ] in (the InternalRel of C61)))) by L111 , L123;
L127: S1[ C68 , C67 ]
proof
take D36 = ( Rev C69 );
thus L128: 1 < ( len D36 ) by L124 , FINSEQ_5:def 3;
L129: ( len D36 ) = ( len C69 ) by FINSEQ_5:def 3;
thus L130: (( D36 . 1 ) = C68 & ( D36 . ( len D36 ) ) = C67) by L129 , L125 , FINSEQ_5:62;
let C70 being Nat;
assume that
L131: 2 <= C70
and
L132: C70 <= ( len D36 );
L133: 1 <= C70 by L131 , XXREAL_0:2;
L134: C70 in ( dom C69 ) by L133 , L129 , L132 , FINSEQ_3:25;
set D37 = ( ( ( len C69 ) - C70 ) + 2 );
L135: ( 0 ) <= ( ( len C69 ) - C70 ) by L129 , L132 , XREAL_1:48;
L136: ( 2 + ( 0 ) ) <= D37 by L135 , XREAL_1:6;
L137: ( 2 - 1 ) <= ( C70 - 1 ) by L131 , XREAL_1:9;
reconsider D38 = ( C70 - 1 ) as (Element of ( NAT )) by L137 , INT_1:3 , XXREAL_0:2;
L138: ( C70 - 1 ) <= ( ( len D36 ) - ( 0 ) ) by L132 , XREAL_1:13;
L139: D38 in ( dom C69 ) by L138 , L129 , L137 , FINSEQ_3:25;
L140: ( D36 . ( C70 - 1 ) ) = ( C69 . ( ( ( len C69 ) - ( C70 - 1 ) ) + 1 ) ) by L139 , FINSEQ_5:58
.= ( C69 . ( ( ( len C69 ) - C70 ) + 2 ) );
reconsider D39 = ( ( ( len C69 ) - C70 ) + 2 ) as (Element of ( NAT )) by L136 , INT_1:3 , XXREAL_0:2;
L141: ( ( len C69 ) - C70 ) <= ( ( len C69 ) - 2 ) by L131 , XREAL_1:13;
L142: ( ( ( len C69 ) - C70 ) + 2 ) <= ( ( ( len C69 ) - 2 ) + 2 ) by L141 , XREAL_1:6;
L143: ( C69 . ( D39 - 1 ) ) = ( C69 . ( ( ( len C69 ) - C70 ) + ( 2 - 1 ) ) )
.= ( D36 . C70 ) by L134 , FINSEQ_5:58;
thus L144: thesis by L143 , L126 , L140 , L136 , L142;
end;
thus L145: [ C68 , C67 ] in D35 by L127 , L122;
end;
L146: D35 is_symmetric_in (the carrier of C61) by L121 , RELAT_2:def 3;
L147: (the InternalRel of C61) is_reflexive_in (the carrier of C61) by ORDERS_2:def 2;
L148:
now
let C71 being set;
assume L149: C71 in (the carrier of C61);
L150: S1[ C71 , C71 ]
proof
set D40 = <* C71 , C71 *>;
L151: ( rng D40 ) = { C71 , C71 } by FINSEQ_2:127
.= { C71 } by ENUMSET1:29;
L152: ( rng D40 ) c= (the carrier of C61) by L151 , L149 , ZFMISC_1:31;
reconsider D41 = D40 as (FinSequence of (the carrier of C61)) by L152 , FINSEQ_1:def 4;
take D41;
L153: ( len D40 ) = 2 by FINSEQ_1:44;
thus L154: 1 < ( len D41 ) by L153;
thus L155: (( D41 . 1 ) = C71 & ( D41 . ( len D41 ) ) = C71) by L153 , FINSEQ_1:44;
let C72 being Nat;
assume L156: (2 <= C72 & C72 <= ( len D41 ));
L157: C72 = 2 by L156 , L153 , XXREAL_0:1;
L158: (( D40 . 1 ) = C71 & ( D40 . 2 ) = C71) by FINSEQ_1:44;
thus L159: thesis by L158 , L147 , L149 , L157 , RELAT_2:def 1;
end;
thus L160: [ C71 , C71 ] in D35 by L150 , L149;
end;
L161: D35 is_reflexive_in (the carrier of C61) by L148 , RELAT_2:def 1;
L162: (( dom D35 ) = (the carrier of C61) & ( field D35 ) = (the carrier of C61)) by L161 , ORDERS_1:13;
L163:
now
let C73 , C74 , C75 being set;
assume that
L164: C73 in (the carrier of C61)
and
L165: C74 in (the carrier of C61)
and
L166: C75 in (the carrier of C61)
and
L167: ([ C73 , C74 ] in D35 & [ C74 , C75 ] in D35);
L168: (S1[ C73 , C74 ] & S1[ C74 , C75 ]) by L111 , L167;
consider C76 , C77 being (FinSequence of (the carrier of C61)) such that L169: 1 < ( len C76 ) and L170: ( C76 . 1 ) = C73 and L171: ( C76 . ( len C76 ) ) = C74 and L172: (for B44 being Nat holds ((2 <= B44 & B44 <= ( len C76 )) implies ([ ( C76 . B44 ) , ( C76 . ( B44 - 1 ) ) ] in (the InternalRel of C61) or [ ( C76 . ( B44 - 1 ) ) , ( C76 . B44 ) ] in (the InternalRel of C61)))) and L173: 1 < ( len C77 ) and L174: ( C77 . 1 ) = C74 and L175: ( C77 . ( len C77 ) ) = C75 and L176: (for B45 being Nat holds ((2 <= B45 & B45 <= ( len C77 )) implies ([ ( C77 . B45 ) , ( C77 . ( B45 - 1 ) ) ] in (the InternalRel of C61) or [ ( C77 . ( B45 - 1 ) ) , ( C77 . B45 ) ] in (the InternalRel of C61)))) by L168;
L177: S1[ C73 , C75 ]
proof
take D42 = ( C76 ^ C77 );
L178: ( len D42 ) = ( ( len C76 ) + ( len C77 ) ) by FINSEQ_1:22;
L179: ( 1 + 1 ) < ( ( len C76 ) + ( len C77 ) ) by L169 , L173 , XREAL_1:8;
thus L180: 1 < ( len D42 ) by L179 , L178 , XXREAL_0:2;
L181: 1 in ( dom C76 ) by L169 , FINSEQ_3:25;
thus L182: ( D42 . 1 ) = C73 by L181 , L170 , FINSEQ_1:def 7;
L183: ( len C77 ) in ( dom C77 ) by L173 , FINSEQ_3:25;
thus L184: ( D42 . ( len D42 ) ) = C75 by L183 , L175 , L178 , FINSEQ_1:def 7;
let C78 being Nat;
assume that
L185: 2 <= C78
and
L186: C78 <= ( len D42 );
L187: 1 <= C78 by L185 , XXREAL_0:2;
L188: ( 2 - 1 ) <= ( C78 - 1 ) by L185 , XREAL_1:9;
reconsider D43 = ( C78 - 1 ) as (Element of ( NAT )) by L188 , INT_1:3 , XXREAL_0:2;
L189: (( ( len C76 ) + 1 ) <= C78 implies (( ( len C76 ) + 1 ) = C78 or ( ( len C76 ) + 1 ) < C78)) by XXREAL_0:1;
L190: ( C78 - 1 ) <= ( ( len D42 ) - ( 0 ) ) by L186 , XREAL_1:13;
per cases  by L189 , INT_1:7;
suppose L191: C78 <= ( len C76 );

L192: ( C78 - 1 ) <= ( ( len C76 ) - ( 0 ) ) by L191 , XREAL_1:13;
L193: D43 in ( dom C76 ) by L192 , L188 , FINSEQ_3:25;
L194: ( D42 . ( C78 - 1 ) ) = ( C76 . ( C78 - 1 ) ) by L193 , FINSEQ_1:def 7;
L195: C78 in ( dom C76 ) by L187 , L191 , FINSEQ_3:25;
L196: ( D42 . C78 ) = ( C76 . C78 ) by L195 , FINSEQ_1:def 7;
thus L197: thesis by L196 , L172 , L185 , L191 , L194;
end;
suppose L198: ( ( len C76 ) + 1 ) < C78;

L199: ( len C76 ) < ( ( len C76 ) + 1 ) by XREAL_1:29;
L200: ( len C76 ) < C78 by L199 , L198 , XXREAL_0:2;
reconsider D44 = ( C78 - ( len C76 ) ) as (Element of ( NAT )) by L200 , INT_1:3 , XREAL_1:48;
L201: ( ( ( len C76 ) + 1 ) - 1 ) < ( C78 - 1 ) by L198 , XREAL_1:9;
L202: ( D42 . D43 ) = ( C77 . ( D43 - ( len C76 ) ) ) by L201 , L190 , FINSEQ_1:24;
L203: ( D42 . ( C78 - 1 ) ) = ( C77 . ( D44 - 1 ) ) by L202;
L204: 1 < ( C78 - ( len C76 ) ) by L198 , XREAL_1:20;
L205: ( 1 + 1 ) <= ( C78 - ( len C76 ) ) by L204 , INT_1:7;
L206: C78 <= ( ( len C76 ) + ( len C77 ) ) by L186 , FINSEQ_1:22;
L207: D44 <= ( len C77 ) by L206 , XREAL_1:20;
L208: ( D42 . C78 ) = ( C77 . D44 ) by L186 , L200 , FINSEQ_1:24;
thus L209: thesis by L208 , L176 , L203 , L205 , L207;
end;
suppose L210: ( ( len C76 ) + 1 ) = C78;

L211: (( ( len C76 ) + 1 ) <= ( ( len C76 ) + ( len C77 ) ) & ( ( ( len C76 ) + 1 ) - ( len C76 ) ) = 1) by L173 , XREAL_1:8;
L212: ( D42 . C78 ) = C74 by L211 , L174 , L210 , FINSEQ_1:23;
L213: ( len C76 ) in ( dom C76 ) by L169 , FINSEQ_3:25;
L214: ( D42 . ( C78 - 1 ) ) = C74 by L213 , L171 , L210 , FINSEQ_1:def 7;
thus L215: thesis by L214 , L147 , L165 , L212 , RELAT_2:def 1;
end;
end;
thus L217: [ C73 , C75 ] in D35 by L177 , L164 , L166;
end;
L218: D35 is_transitive_in (the carrier of C61) by L163 , RELAT_2:def 8;
reconsider D45 = D34 as (Equivalence_Relation of (the carrier of C61)) by L218 , L162 , L146 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
take D45;
thus L219: thesis by L111;
end;
uniqueness
proof
let C79 , C80 being (Equivalence_Relation of (the carrier of C61));
defpred S2[ set , set ] means ($1 in (the carrier of C61) & $2 in (the carrier of C61) & (ex B46 being (FinSequence of (the carrier of C61)) st (1 < ( len B46 ) & ( B46 . 1 ) = $1 & ( B46 . ( len B46 ) ) = $2 & (for B47 being Nat holds ((2 <= B47 & B47 <= ( len B46 )) implies ([ ( B46 . B47 ) , ( B46 . ( B47 - 1 ) ) ] in (the InternalRel of C61) or [ ( B46 . ( B47 - 1 ) ) , ( B46 . B47 ) ] in (the InternalRel of C61)))))));
assume L220: (for B48 , B49 being set holds ([ B48 , B49 ] in C79 iff S2[ B48 , B49 ]));
assume L221: (for B50 , B51 being set holds ([ B50 , B51 ] in C80 iff S2[ B50 , B51 ]));
L222: (for B52 , B53 being set holds ([ B52 , B53 ] in C79 iff [ B52 , B53 ] in C80))
proof
let C81 , C82 being set;
thus L223:now
assume L224: [ C81 , C82 ] in C79;
L225: S2[ C81 , C82 ] by L224 , L220;
thus L226: [ C81 , C82 ] in C80 by L225 , L221;
end;
assume L227: [ C81 , C82 ] in C80;
L228: S2[ C81 , C82 ] by L227 , L221;
thus L229: thesis by L228 , L220;
end;
thus L230: thesis by L222 , RELAT_1:def 2;
end;
end;
theorem
L232: (for B54 being non  empty Poset holds (for B55 , B56 being (Element of B54) holds (B55 <= B56 implies [ B55 , B56 ] in ( Path_Rel B54 ))))
proof
let C83 being non  empty Poset;
let C84 , C85 being (Element of C83);
assume that
L233: C84 <= C85;
set D46 = <* C84 , C85 *>;
L234: ( len D46 ) = 2 by FINSEQ_1:44;
L235: ( D46 . 1 ) = C84 by FINSEQ_1:44;
L236: (for B57 being Nat holds ((2 <= B57 & B57 <= ( len D46 )) implies ([ ( D46 . B57 ) , ( D46 . ( B57 - 1 ) ) ] in (the InternalRel of C83) or [ ( D46 . ( B57 - 1 ) ) , ( D46 . B57 ) ] in (the InternalRel of C83))))
proof
let C86 being Nat;
assume L237: (2 <= C86 & C86 <= ( len D46 ));
L238: C86 = 2 by L237 , L234 , XXREAL_0:1;
L239: [ C84 , C85 ] in (the InternalRel of C83) by L233 , ORDERS_2:def 5;
thus L240: thesis by L239 , L235 , L238 , FINSEQ_1:44;
end;
L241: ( D46 . ( len D46 ) ) = C85 by L234 , FINSEQ_1:44;
thus L242: thesis by L241 , L234 , L235 , L236 , L106;
end;
definition
let C87 being non  empty Poset;
let C88 , C89 being (Element of C87);
pred C88 ~= C89
means
:L243: [ C88 , C89 ] in ( Path_Rel C87 )
;reflexivity
proof
set D47 = ( Path_Rel C87 );
L244: ( field D47 ) = (the carrier of C87) by ORDERS_1:12;
L245: D47 is_reflexive_in (the carrier of C87) by L244 , RELAT_2:def 9;
thus L246: thesis by L245 , RELAT_2:def 1;
end;
symmetry
proof
set D48 = ( Path_Rel C87 );
L247: ( field D48 ) = (the carrier of C87) by ORDERS_1:12;
L248: D48 is_symmetric_in (the carrier of C87) by L247 , RELAT_2:def 11;
thus L249: thesis by L248 , RELAT_2:def 3;
end;
end;
theorem
L251: (for B58 being non  empty Poset holds (for B59 , B60 , B61 being (Element of B58) holds ((B59 ~= B60 & B60 ~= B61) implies B59 ~= B61)))
proof
let C90 being non  empty Poset;
let C91 , C92 , C93 being (Element of C90);
set D49 = ( Path_Rel C90 );
L252: ( field D49 ) = (the carrier of C90) by ORDERS_1:12;
L253: D49 is_transitive_in (the carrier of C90) by L252 , RELAT_2:def 16;
assume L254: (C91 ~= C92 & C92 ~= C93);
L255: ([ C91 , C92 ] in D49 & [ C92 , C93 ] in D49) by L254 , L243;
L256: [ C91 , C93 ] in D49 by L255 , L253 , RELAT_2:def 8;
thus L257: thesis by L256 , L243;
end;
definition
let C94 being non  empty Poset;
func Components C94 -> non  empty (Subset-Family of C94) equals 
( Class ( Path_Rel C94 ) );
coherence;
end;
registration
let C95 being non  empty Poset;
cluster  -> non  empty for (Element of ( Components C95 ));
coherence
proof
let C96 being (Element of ( Components C95 ));
L259: (ex B62 being set st (B62 in (the carrier of C95) & C96 = ( Class (( Path_Rel C95 ) , B62) ))) by EQREL_1:def 3;
thus L260: thesis by L259 , EQREL_1:20;
end;
end;
definition
let C97 being non  empty Poset;
mode Component of C97
 is (Element of ( Components C97 ));
end;
definition
let C98 being non  empty Poset;
let C99 being (Element of C98);
func CComp C99 -> (Component of C98) equals 
( Class (( Path_Rel C98 ) , C99) );
correctness by EQREL_1:def 3;
end;
theorem
L264: (for B63 being non  empty Poset holds (for B64 , B65 being (Element of B63) holds (B64 <= B65 implies ( CComp B64 ) = ( CComp B65 ))))
proof
let C100 being non  empty Poset;
let C101 , C102 being (Element of C100);
assume L265: C101 <= C102;
L266: [ C101 , C102 ] in ( Path_Rel C100 ) by L265 , L232;
thus L267: thesis by L266 , EQREL_1:35;
end;
definition
let C103 being non  empty Poset;
let C104 being (ManySortedSet of (the carrier of C103));
let C105 being (Component of C103);
func C104 -carrier_of C105 equals 
( union { ( C104 . B66 ) where B66 is (Element of C103) : B66 in C105 } );
correctness;
end;
theorem
L269: (for B67 being non  empty Poset holds (for B68 being (ManySortedSet of (the carrier of B67)) holds (for B69 being (Element of B67) holds (for B70 being set holds (B70 in ( B68 . B69 ) implies B70 in ( B68 -carrier_of ( CComp B69 ) ))))))
proof
let C106 being non  empty Poset;
let C107 being (ManySortedSet of (the carrier of C106));
let C108 being (Element of C106);
let C109 being set;
assume that
L270: C109 in ( C107 . C108 );
L271: C108 in ( CComp C108 ) by EQREL_1:20;
L272: ( C107 . C108 ) in { ( C107 . B71 ) where B71 is (Element of C106) : B71 in ( CComp C108 ) } by L271;
thus L273: thesis by L272 , L270 , TARSKI:def 4;
end;
definition
let C110 being non  empty Poset;
attr C110 is  locally_directed
means
:L274: (for B72 being (Component of C110) holds B72 is  directed);
end;
theorem
L276: (for B73 being  discrete non  empty Poset holds (for B74 , B75 being (Element of B73) holds ([ B74 , B75 ] in ( Path_Rel B73 ) implies B74 = B75)))
proof
let C111 being  discrete non  empty Poset;
let C112 , C113 being (Element of C111);
assume L277: [ C112 , C113 ] in ( Path_Rel C111 );
consider C114 being (FinSequence of (the carrier of C111)) such that L278: 1 < ( len C114 ) and L279: ( C114 . 1 ) = C112 and L280: ( C114 . ( len C114 ) ) = C113 and L281: (for B76 being Nat holds ((2 <= B76 & B76 <= ( len C114 )) implies ([ ( C114 . B76 ) , ( C114 . ( B76 - 1 ) ) ] in (the InternalRel of C111) or [ ( C114 . ( B76 - 1 ) ) , ( C114 . B76 ) ] in (the InternalRel of C111)))) by L277 , L106;
L282: (for B77 being Nat holds ((1 <= B77 & B77 <= ( len C114 )) implies ( C114 . B77 ) = C112))
proof
defpred S3[ Nat ] means (( C114 . $1 ) <> C112 & 1 <= $1);
let C115 being Nat;
assume that
L283: 1 <= C115
and
L284: C115 <= ( len C114 );
assume L285: ( C114 . C115 ) <> C112;
L286: (ex B78 being Nat st S3[ B78 ]) by L285 , L283;
consider C116 being Nat such that L287: (S3[ C116 ] & (for B79 being Nat holds (S3[ B79 ] implies C116 <= B79))) from NAT_1:sch 5(L286);
L288: 1 < C116 by L279 , L287 , XXREAL_0:1;
L289: ( 1 + 1 ) <= C116 by L288 , INT_1:7;
L290: ( ( 1 + 1 ) - 1 ) <= ( C116 - 1 ) by L289 , XREAL_1:9;
reconsider D50 = ( C116 - 1 ) as (Element of ( NAT )) by L290 , INT_1:3 , XXREAL_0:2;
L291: ( C114 . D50 ) = C112 by L287 , L290 , XREAL_1:146;
L292: C116 <= C115 by L283 , L285 , L287;
L293: C116 <= ( len C114 ) by L292 , L284 , XXREAL_0:2;
L294: C116 in ( dom C114 ) by L293 , L287 , FINSEQ_3:25;
reconsider D51 = ( C114 . C116 ) as (Element of C111) by L294 , PARTFUN1:4;
per cases  by L281 , L289 , L293 , L291;
suppose L295: [ D51 , C112 ] in (the InternalRel of C111);

L296: D51 <= C112 by L295 , ORDERS_2:def 5;
thus L297: contradiction by L296 , L287 , ORDERS_3:1;
end;
suppose L298: [ C112 , D51 ] in (the InternalRel of C111);

L299: C112 <= D51 by L298 , ORDERS_2:def 5;
thus L300: contradiction by L299 , L287 , ORDERS_3:1;
end;
end;
thus L302: thesis by L282 , L278 , L280;
end;
theorem
L303: (for B80 being  discrete non  empty Poset holds (for B81 being (Component of B80) holds (ex B82 being (Element of B80) st B81 = { B82 })))
proof
let C117 being  discrete non  empty Poset;
let C118 being (Component of C117);
consider C119 being set such that L304: C119 in (the carrier of C117) and L305: C118 = ( Class (( Path_Rel C117 ) , C119) ) by EQREL_1:def 3;
reconsider D52 = C119 as (Element of C117) by L304;
take D52;
L306: (for B83 being set holds (B83 in C118 iff B83 = D52))
proof
let C120 being set;
thus L307:now
assume L308: C120 in C118;
reconsider D53 = C120 as (Element of C117) by L308;
L309: [ C120 , C119 ] in ( Path_Rel C117 ) by L305 , L308 , EQREL_1:19;
L310: D53 = D52 by L309 , L276;
thus L311: C120 = D52 by L310;
end;
assume L312: C120 = D52;
thus L313: thesis by L312 , L305 , EQREL_1:20;
end;
thus L314: thesis by L306 , TARSKI:def 1;
end;
theorem
L315: (for B84 being  discrete non  empty Poset holds B84 is  locally_directed)
proof
let C121 being  discrete non  empty Poset;
let C122 being (Component of C121);
consider C123 being (Element of C121) such that L316: C122 = { C123 } by L303;
L317: (for B85 , B86 being (Element of C121) holds ((B85 in C122 & B86 in C122) implies (ex B87 being (Element of C121) st (B87 in C122 & B85 <= B87 & B86 <= B87))))
proof
let C124 , C125 being (Element of C121);
assume that
L318: C124 in C122
and
L319: C125 in C122;
take C124;
L320: C124 = C123 by L316 , L318 , TARSKI:def 1;
thus L321: thesis by L320 , L316 , L319 , TARSKI:def 1;
end;
thus L322: thesis by L317 , WAYBEL_0:def 1;
end;
registration
cluster  locally_directed for non  empty non  empty non  empty non  empty Poset;
existence
proof
set D54 = the  discrete non  empty Poset;
take D54;
thus L323: thesis by L315;
end;
end;
registration
cluster  locally_directed for OrderSortedSign;
existence
proof
set D55 = the  discrete OrderSortedSign;
take D55;
thus L325: thesis by L315;
end;
end;
registration
cluster  discrete ->  locally_directed for non  empty non  empty non  empty non  empty Poset;
coherence by L315;
end;
registration
let C126 being  locally_directed non  empty Poset;
cluster  ->  directed for (Component of C126);
coherence by L274;
end;
theorem
L329: ( {} ) is (Equivalence_Relation of ( {} )) by RELSET_1:12;
definition
let C127 being  locally_directed OrderSortedSign;
let C128 being (OSAlgebra of C127);
let C129 being  MSEquivalence-like (OrderSortedRelation of C128);
let C130 being (Component of C127);
func CompClass (C129 , C130) -> (Equivalence_Relation of ( (the Sorts of C128) -carrier_of C130 )) means 
:L330: (for B88 , B89 being set holds ([ B88 , B89 ] in it iff (ex B90 being (Element of C127) st (B90 in C130 & [ B88 , B89 ] in ( C129 . B90 )))));
existence
proof
defpred S4[ set , set ] means (ex B91 being (Element of C127) st (B91 in C130 & [ $1 , $2 ] in ( C129 . B91 )));
L331: C129 is  os-compatible by L37;
per cases ;
suppose L332: ( (the Sorts of C128) -carrier_of C130 ) is  empty;

L333: (for B92 , B93 being set holds ([ B92 , B93 ] in ( {} ) iff (ex B94 being (Element of C127) st (B94 in C130 & [ B92 , B93 ] in ( C129 . B94 )))))
proof
let C131 , C132 being set;
thus L334: ([ C131 , C132 ] in ( {} ) implies (ex B95 being (Element of C127) st (B95 in C130 & [ C131 , C132 ] in ( C129 . B95 ))));
assume L335: (ex B96 being (Element of C127) st (B96 in C130 & [ C131 , C132 ] in ( C129 . B96 )));
consider C133 being (Element of C127) such that L336: (C133 in C130 & [ C131 , C132 ] in ( C129 . C133 )) by L335;
L337: (C131 in ( (the Sorts of C128) . C133 ) & ( (the Sorts of C128) . C133 ) in { ( (the Sorts of C128) . B97 ) where B97 is (Element of C127) : B97 in C130 }) by L336 , ZFMISC_1:87;
thus L338: thesis by L337 , L332 , TARSKI:def 4;
end;
thus L339: thesis by L333 , L332 , L329;
end;
suppose L340: ( (the Sorts of C128) -carrier_of C130 ) is non  empty;

reconsider D56 = ( (the Sorts of C128) -carrier_of C130 ) as non  empty set by L340;
set D57 = { [ B98 , B99 ] where B98 , B99 is (Element of D56) : S4[ B98 , B99 ] };
L341: D57 c= [: D56 , D56 :]
proof
let C134 being set;
assume L342: C134 in D57;
L343: (ex B100 , B101 being (Element of D56) st (C134 = [ B100 , B101 ] & S4[ B100 , B101 ])) by L342;
thus L344: thesis by L343 , ZFMISC_1:87;
end;
reconsider D58 = D57 as (Relation of D56) by L341;
L345:
now
let C135 , C136 being set;
assume that
L346: (C135 in D56 & C136 in D56)
and
L347: [ C135 , C136 ] in D58;
reconsider D59 = C135 , D60 = C136 as (Element of D56) by L346;
consider C137 , C138 being (Element of D56) such that L348: [ C135 , C136 ] = [ C137 , C138 ] and L349: S4[ C137 , C138 ] by L347;
L350: (C135 = C137 & C136 = C138) by L348 , XTUPLE_0:1;
consider C139 being (Element of C127) such that L351: C139 in C130 and L352: [ C137 , C138 ] in ( C129 . C139 ) by L349;
L353: ( field ( C129 . C139 ) ) = ( (the Sorts of C128) . C139 ) by ORDERS_1:12;
L354: ( C129 . C139 ) is_symmetric_in ( (the Sorts of C128) . C139 ) by L353 , RELAT_2:def 11;
L355: (C137 in ( (the Sorts of C128) . C139 ) & C138 in ( (the Sorts of C128) . C139 )) by L352 , ZFMISC_1:87;
L356: [ C136 , C135 ] in ( C129 . C139 ) by L355 , L350 , L352 , L354 , RELAT_2:def 3;
L357: [ D60 , D59 ] in D57 by L356 , L351;
thus L358: [ C136 , C135 ] in D58 by L357;
end;
L359: D58 is_symmetric_in D56 by L345 , RELAT_2:def 3;
L360:
now
let C140 being set;
assume that
L361: C140 in D56;
reconsider D61 = C140 as (Element of D56) by L361;
consider C141 being set such that L362: C140 in C141 and L363: C141 in { ( (the Sorts of C128) . B102 ) where B102 is (Element of C127) : B102 in C130 } by L361 , TARSKI:def 4;
consider C142 being (Element of C127) such that L364: C141 = ( (the Sorts of C128) . C142 ) and L365: C142 in C130 by L363;
L366: ( field ( C129 . C142 ) ) = ( (the Sorts of C128) . C142 ) by ORDERS_1:12;
L367: ( C129 . C142 ) is_reflexive_in ( (the Sorts of C128) . C142 ) by L366 , RELAT_2:def 9;
L368: [ C140 , C140 ] in ( C129 . C142 ) by L367 , L362 , L364 , RELAT_2:def 1;
L369: [ D61 , D61 ] in D57 by L368 , L365;
thus L370: [ C140 , C140 ] in D58 by L369;
end;
L371: D58 is_reflexive_in D56 by L360 , RELAT_2:def 1;
L372: (( dom D58 ) = D56 & ( field D58 ) = D56) by L371 , ORDERS_1:13;
L373:
now
let C143 , C144 , C145 being set;
assume that
L374: C143 in D56
and
L375: C144 in D56
and
L376: C145 in D56
and
L377: [ C143 , C144 ] in D58
and
L378: [ C144 , C145 ] in D58;
consider C146 , C147 being (Element of D56) such that L379: [ C143 , C144 ] = [ C146 , C147 ] and L380: S4[ C146 , C147 ] by L377;
L381: C143 = C146 by L379 , XTUPLE_0:1;
consider C148 , C149 being (Element of D56) such that L382: [ C144 , C145 ] = [ C148 , C149 ] and L383: S4[ C148 , C149 ] by L378;
L384: C144 = C148 by L382 , XTUPLE_0:1;
consider C150 being (Element of C127) such that L385: C150 in C130 and L386: [ C146 , C147 ] in ( C129 . C150 ) by L380;
consider C151 being (Element of C127) such that L387: C151 in C130 and L388: [ C148 , C149 ] in ( C129 . C151 ) by L383;
reconsider D62 = C150 , D63 = C151 as (Element of C127);
consider C152 being (Element of C127) such that L389: C152 in C130 and L390: D62 <= C152 and L391: D63 <= C152 by L385 , L387 , WAYBEL_0:def 1;
L392: (C148 in ( (the Sorts of C128) . C151 ) & C149 in ( (the Sorts of C128) . C151 )) by L388 , ZFMISC_1:87;
L393: [ C148 , C149 ] in ( C129 . C152 ) by L392 , L331 , L388 , L391 , L8;
L394: C149 in ( (the Sorts of C128) . C152 ) by L393 , ZFMISC_1:87;
L395: C145 = C149 by L382 , XTUPLE_0:1;
L396: C144 = C147 by L379 , XTUPLE_0:1;
L397: ( field ( C129 . C152 ) ) = ( (the Sorts of C128) . C152 ) by ORDERS_1:12;
L398: ( C129 . C152 ) is_transitive_in ( (the Sorts of C128) . C152 ) by L397 , RELAT_2:def 16;
L399: (C146 in ( (the Sorts of C128) . C150 ) & C147 in ( (the Sorts of C128) . C150 )) by L386 , ZFMISC_1:87;
L400: [ C146 , C147 ] in ( C129 . C152 ) by L399 , L331 , L386 , L390 , L8;
L401: (C146 in ( (the Sorts of C128) . C152 ) & C147 in ( (the Sorts of C128) . C152 )) by L400 , ZFMISC_1:87;
L402: [ C146 , C149 ] in ( C129 . C152 ) by L401 , L396 , L384 , L400 , L393 , L394 , L398 , RELAT_2:def 8;
thus L403: [ C143 , C145 ] in D58 by L402 , L381 , L395 , L389;
end;
L404: D58 is_transitive_in D56 by L373 , RELAT_2:def 8;
reconsider D64 = D58 as (Equivalence_Relation of ( (the Sorts of C128) -carrier_of C130 )) by L404 , L372 , L359 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
take D64;
L405: (for B103 , B104 being set holds ([ B103 , B104 ] in D57 iff S4[ B103 , B104 ]))
proof
let C153 , C154 being set;
thus L406:now
assume L407: [ C153 , C154 ] in D57;
L408: (ex B105 , B106 being (Element of D56) st ([ C153 , C154 ] = [ B105 , B106 ] & S4[ B105 , B106 ])) by L407;
thus L409: S4[ C153 , C154 ] by L408;
end;
assume L410: S4[ C153 , C154 ];
consider C155 being (Element of C127) such that L411: C155 in C130 and L412: [ C153 , C154 ] in ( C129 . C155 ) by L410;
L413: C154 in ( (the Sorts of C128) . C155 ) by L412 , ZFMISC_1:87;
L414: (( (the Sorts of C128) . C155 ) in { ( (the Sorts of C128) . B107 ) where B107 is (Element of C127) : B107 in C130 } & C153 in ( (the Sorts of C128) . C155 )) by L411 , L412 , ZFMISC_1:87;
reconsider D65 = C153 , D66 = C154 as (Element of D56) by L414 , L413 , TARSKI:def 4;
L415: [ D65 , D66 ] in D57 by L410;
thus L416: thesis by L415;
end;
thus L417: thesis by L405;
end;
end;
uniqueness
proof
let C156 , C157 being (Equivalence_Relation of ( (the Sorts of C128) -carrier_of C130 ));
defpred S5[ set , set ] means (ex B108 being (Element of C127) st (B108 in C130 & [ $1 , $2 ] in ( C129 . B108 )));
assume L419: (for B109 , B110 being set holds ([ B109 , B110 ] in C156 iff S5[ B109 , B110 ]));
assume L420: (for B111 , B112 being set holds ([ B111 , B112 ] in C157 iff S5[ B111 , B112 ]));
L421: (for B113 , B114 being set holds ([ B113 , B114 ] in C156 iff [ B113 , B114 ] in C157))
proof
let C158 , C159 being set;
thus L422:now
assume L423: [ C158 , C159 ] in C156;
L424: S5[ C158 , C159 ] by L423 , L419;
thus L425: [ C158 , C159 ] in C157 by L424 , L420;
end;
assume L426: [ C158 , C159 ] in C157;
L427: S5[ C158 , C159 ] by L426 , L420;
thus L428: thesis by L427 , L419;
end;
thus L429: thesis by L421 , RELAT_1:def 2;
end;
end;
definition
let C160 being  locally_directed OrderSortedSign;
let C161 being (OSAlgebra of C160);
let C162 being  MSEquivalence-like (OrderSortedRelation of C161);
let C163 being (Element of C160);
func OSClass (C162 , C163) -> (Subset of ( Class ( CompClass (C162 , ( CComp C163 )) ) )) means 
:L431: (for B115 being set holds (B115 in it iff (ex B116 being set st (B116 in ( (the Sorts of C161) . C163 ) & B115 = ( Class (( CompClass (C162 , ( CComp C163 )) ) , B116) )))));
existence
proof
set D67 = ( (the Sorts of C161) -carrier_of ( CComp C163 ) );
set D68 = ( Class ( CompClass (C162 , ( CComp C163 )) ) );
defpred S6[ set ] means (ex B117 being set st (B117 in ( (the Sorts of C161) . C163 ) & $1 = ( Class (( CompClass (C162 , ( CComp C163 )) ) , B117) )));
per cases ;
suppose L432: D68 is  empty;

reconsider D69 = ( {} ) as (Subset of D68) by XBOOLE_1:2;
take D69;
let C164 being set;
thus L433: (C164 in D69 implies S6[ C164 ]);
assume L434: S6[ C164 ];
consider C165 being set such that L435: C165 in ( (the Sorts of C161) . C163 ) and L436: C164 = ( Class (( CompClass (C162 , ( CComp C163 )) ) , C165) ) by L434;
L437: C165 in D67 by L435 , L269;
thus L438: thesis by L437 , L432;
end;
suppose L439: D68 is non  empty;

reconsider D70 = D68 as non  empty (Subset-Family of D67) by L439;
set D71 = { B118 where B118 is (Element of D70) : S6[ B118 ] };
L440:
now
let C166 being set;
assume L441: C166 in D71;
L442: (ex B119 being (Element of D70) st (C166 = B119 & S6[ B119 ])) by L441;
thus L443: C166 in D70 by L442;
end;
reconsider D72 = D71 as (Subset of D68) by L440 , TARSKI:def 3;
take D72;
L444: (for B120 being set holds (B120 in D71 iff S6[ B120 ]))
proof
let C167 being set;
thus L445:now
assume L446: C167 in D71;
L447: (ex B121 being (Element of D70) st (C167 = B121 & S6[ B121 ])) by L446;
thus L448: S6[ C167 ] by L447;
end;
assume L449: S6[ C167 ];
consider C168 being set such that L450: C168 in ( (the Sorts of C161) . C163 ) and L451: C167 = ( Class (( CompClass (C162 , ( CComp C163 )) ) , C168) ) by L449;
L452: C163 in ( CComp C163 ) by EQREL_1:20;
L453: ( (the Sorts of C161) . C163 ) in { ( (the Sorts of C161) . B122 ) where B122 is (Element of C160) : B122 in ( CComp C163 ) } by L452;
L454: C168 in ( union { ( (the Sorts of C161) . B123 ) where B123 is (Element of C160) : B123 in ( CComp C163 ) } ) by L453 , L450 , TARSKI:def 4;
L455: C167 in ( Class ( CompClass (C162 , ( CComp C163 )) ) ) by L454 , L451 , EQREL_1:def 3;
thus L456: thesis by L455 , L449;
end;
thus L457: thesis by L444;
end;
end;
uniqueness
proof
let C169 , C170 being (Subset of ( Class ( CompClass (C162 , ( CComp C163 )) ) ));
defpred S7[ set ] means (ex B124 being set st (B124 in ( (the Sorts of C161) . C163 ) & $1 = ( Class (( CompClass (C162 , ( CComp C163 )) ) , B124) )));
assume L459: (for B125 being set holds (B125 in C169 iff S7[ B125 ]));
assume L460: (for B126 being set holds (B126 in C170 iff S7[ B126 ]));
L461: (for B127 being set holds (B127 in C169 iff B127 in C170))
proof
let C171 being set;
thus L462:now
assume L463: C171 in C169;
L464: S7[ C171 ] by L463 , L459;
thus L465: C171 in C170 by L464 , L460;
end;
assume L466: C171 in C170;
L467: S7[ C171 ] by L466 , L460;
thus L468: thesis by L467 , L459;
end;
thus L469: thesis by L461 , TARSKI:1;
end;
end;
registration
let C172 being  locally_directed OrderSortedSign;
let C173 being  non-empty (OSAlgebra of C172);
let C174 being  MSEquivalence-like (OrderSortedRelation of C173);
let C175 being (Element of C172);
cluster ( OSClass (C174 , C175) ) -> non  empty;
coherence
proof
consider C176 being set such that L471: C176 in ( (the Sorts of C173) . C175 ) by XBOOLE_0:def 1;
L472: ( Class (( CompClass (C174 , ( CComp C175 )) ) , C176) ) in ( OSClass (C174 , C175) ) by L471 , L431;
thus L473: thesis by L472;
end;
end;
theorem
L475: (for B128 being  locally_directed OrderSortedSign holds (for B129 being (OSAlgebra of B128) holds (for B130 being  MSEquivalence-like (OrderSortedRelation of B129) holds (for B131 , B132 being (Element of B128) holds (B131 <= B132 implies ( OSClass (B130 , B131) ) c= ( OSClass (B130 , B132) ))))))
proof
let C177 being  locally_directed OrderSortedSign;
let C178 being (OSAlgebra of C177);
let C179 being  MSEquivalence-like (OrderSortedRelation of C178);
let C180 , C181 being (Element of C177);
reconsider D73 = C180 , D74 = C181 as (Element of C177);
assume L476: C180 <= C181;
L477: ( CComp C180 ) = ( CComp C181 ) by L476 , L264;
thus L478: ( OSClass (C179 , C180) ) c= ( OSClass (C179 , C181) )
proof
reconsider D75 = (the Sorts of C178) as (OrderSortedSet of C177) by OSALG_1:17;
let C182 being set;
assume L479: C182 in ( OSClass (C179 , C180) );
L480: (ex B133 being set st (B133 in ( (the Sorts of C178) . C180 ) & C182 = ( Class (( CompClass (C179 , ( CComp C180 )) ) , B133) ))) by L479 , L431;
L481: ( D75 . D73 ) c= ( D75 . D74 ) by L476 , OSALG_1:def 16;
thus L482: thesis by L481 , L477 , L480 , L431;
end;

end;
definition
let C183 being  locally_directed OrderSortedSign;
let C184 being (OSAlgebra of C183);
let C185 being  MSEquivalence-like (OrderSortedRelation of C184);
func OSClass C185 -> (OrderSortedSet of C183) means 
:L479: (for B134 being (Element of C183) holds ( it . B134 ) = ( OSClass (C185 , B134) ));
existence
proof
deffunc H3((Element of C183)) = ( OSClass (C185 , $1) );
consider C186 being Function such that L480: ( dom C186 ) = (the carrier of C183) and L481: (for B135 being (Element of C183) holds ( C186 . B135 ) = H3(B135)) from FUNCT_1:sch 4;
reconsider D76 = C186 as (ManySortedSet of (the carrier of C183)) by L480 , PARTFUN1:def 2 , RELAT_1:def 18;
set D77 = D76;
L482: D77 is  order-sorted
proof
let C187 , C188 being (Element of C183);
assume that
L483: C187 <= C188;
L484: (( D77 . C187 ) = ( OSClass (C185 , C187) ) & ( D77 . C188 ) = ( OSClass (C185 , C188) )) by L481;
thus L485: thesis by L484 , L483 , L475;
end;
thus L486: thesis by L482 , L481;
end;
uniqueness
proof
let C189 , C190 being (OrderSortedSet of C183);
assume L487: (for B136 being (Element of C183) holds ( C189 . B136 ) = ( OSClass (C185 , B136) ));
assume L488: (for B137 being (Element of C183) holds ( C190 . B137 ) = ( OSClass (C185 , B137) ));
L489:
now
let C191 being set;
assume L490: C191 in (the carrier of C183);
reconsider D78 = C191 as (Element of C183) by L490;
thus L491: ( C189 . C191 ) = ( OSClass (C185 , D78) ) by L487
.= ( C190 . C191 ) by L488;
end;
thus L492: C189 = C190 by L489 , PBOOLE:3;
end;
end;
registration
let C192 being  locally_directed OrderSortedSign;
let C193 being  non-empty (OSAlgebra of C192);
let C194 being  MSEquivalence-like (OrderSortedRelation of C193);
cluster ( OSClass C194 ) ->  non-empty;
coherence
proof
L494: (for B138 being set holds (B138 in (the carrier of C192) implies ( ( OSClass C194 ) . B138 ) is non  empty))
proof
let C195 being set;
assume L495: C195 in (the carrier of C192);
reconsider D79 = C195 as (Element of C192) by L495;
L496: ( ( OSClass C194 ) . D79 ) = ( OSClass (C194 , D79) ) by L479;
thus L497: thesis by L496;
end;
thus L498: thesis by L494 , PBOOLE:def 13;
end;
end;
definition
let C196 being  locally_directed OrderSortedSign;
let C197 being  non-empty (OSAlgebra of C196);
let C198 being  MSEquivalence-like (OrderSortedRelation of C197);
let C199 being (Element of C196);
let C200 being (Element of ( (the Sorts of C197) . C199 ));
func OSClass (C198 , C200) -> (Element of ( OSClass (C198 , C199) )) equals 
( Class (( CompClass (C198 , ( CComp C199 )) ) , C200) );
correctness by L431;
end;
theorem
L501: (for B139 being  locally_directed non  empty Poset holds (for B140 , B141 being (Element of B139) holds ((ex B142 being (Element of B139) st (B142 <= B140 & B142 <= B141)) implies (ex B143 being (Element of B139) st (B140 <= B143 & B141 <= B143)))))
proof
let C201 being  locally_directed non  empty Poset;
let C202 , C203 being (Element of C201);
assume L502: (ex B144 being (Element of C201) st (B144 <= C202 & B144 <= C203));
consider C204 being (Element of C201) such that L503: C204 <= C202 and L504: C204 <= C203 by L502;
reconsider D80 = C202 , D81 = C203 as (Element of C201);
L505: ( CComp C204 ) = ( CComp C203 ) by L504 , L264;
L506: C203 in ( CComp C204 ) by L505 , EQREL_1:20;
L507: ( CComp C204 ) = ( CComp C202 ) by L503 , L264;
L508: C202 in ( CComp C204 ) by L507 , EQREL_1:20;
L509: (ex B145 being (Element of C201) st (B145 in ( CComp C204 ) & D80 <= B145 & D81 <= B145)) by L508 , L506 , WAYBEL_0:def 1;
thus L510: thesis by L509;
end;
theorem
L511: (for B146 being  locally_directed OrderSortedSign holds (for B147 being  non-empty (OSAlgebra of B146) holds (for B148 being  MSEquivalence-like (OrderSortedRelation of B147) holds (for B149 being (Element of B146) holds (for B150 , B151 being (Element of ( (the Sorts of B147) . B149 )) holds (( OSClass (B148 , B150) ) = ( OSClass (B148 , B151) ) iff [ B150 , B151 ] in ( B148 . B149 )))))))
proof
let C205 being  locally_directed OrderSortedSign;
let C206 being  non-empty (OSAlgebra of C205);
let C207 being  MSEquivalence-like (OrderSortedRelation of C206);
let C208 being (Element of C205);
let C209 , C210 being (Element of ( (the Sorts of C206) . C208 ));
reconsider D82 = (the Sorts of C206) as (OrderSortedSet of C205) by OSALG_1:17;
L512: C208 in ( CComp C208 ) by EQREL_1:20;
L513: C207 is  os-compatible by L37;
L514: C209 in ( (the Sorts of C206) -carrier_of ( CComp C208 ) ) by L269;
thus L515:now
assume L516: ( OSClass (C207 , C209) ) = ( OSClass (C207 , C210) );
L517: [ C209 , C210 ] in ( CompClass (C207 , ( CComp C208 )) ) by L516 , L514 , EQREL_1:35;
consider C211 being (Element of C205) such that L518: C211 in ( CComp C208 ) and L519: [ C209 , C210 ] in ( C207 . C211 ) by L517 , L330;
reconsider D83 = C208 , D84 = C211 as (Element of C205);
consider C212 being (Element of C205) such that L520: C212 in ( CComp C208 ) and L521: D84 <= C212 and L522: D83 <= C212 by L512 , L518 , WAYBEL_0:def 1;
L523: (C209 in ( D82 . D84 ) & C210 in ( D82 . D84 )) by L519 , ZFMISC_1:87;
L524: [ C209 , C210 ] in ( C207 . C212 ) by L523 , L513 , L519 , L521 , L8;
thus L525: [ C209 , C210 ] in ( C207 . C208 ) by L524 , L513 , L522 , L8;
end;
L526: C208 in ( CComp C208 ) by EQREL_1:20;
L527: C209 in ( (the Sorts of C206) -carrier_of ( CComp C208 ) ) by L269;
assume L528: [ C209 , C210 ] in ( C207 . C208 );
L529: [ C209 , C210 ] in ( CompClass (C207 , ( CComp C208 )) ) by L528 , L526 , L330;
thus L530: thesis by L529 , L527 , EQREL_1:35;
end;
theorem
L531: (for B152 being  locally_directed OrderSortedSign holds (for B153 being  non-empty (OSAlgebra of B152) holds (for B154 being  MSEquivalence-like (OrderSortedRelation of B153) holds (for B155 , B156 being (Element of B152) holds (for B157 being (Element of ( (the Sorts of B153) . B155 )) holds (B155 <= B156 implies (for B158 being (Element of ( (the Sorts of B153) . B156 )) holds (B158 = B157 implies ( OSClass (B154 , B157) ) = ( OSClass (B154 , B158) ))))))))) by L264;
begin
definition
let R1 being  locally_directed OrderSortedSign;
let R2 being (Element of (the carrier' of R1));
let C213 being  non-empty (OSAlgebra of R1);
let C214 being (OSCongruence of C213);
let C215 being (Element of ( Args (R2 , C213) ));
func C214 #_os C215 -> (Element of ( product ( ( OSClass C214 ) * ( the_arity_of R2 ) ) )) means 
:L532: (for B159 being Nat holds (B159 in ( dom ( the_arity_of R2 ) ) implies (ex B160 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. B159 ) )) st (B160 = ( C215 . B159 ) & ( it . B159 ) = ( OSClass (C214 , B160) )))));
existence
proof
defpred S8[ set , set ] means (for B161 being Nat holds (B161 = $1 implies (ex B162 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. B161 ) )) st (B162 = ( C215 . B161 ) & $2 = ( OSClass (C214 , B162) )))));
set D85 = ( the_arity_of R2 );
set D86 = ( dom D85 );
L533: (for B163 being set holds (B163 in D86 implies (ex B164 being set st S8[ B163 , B164 ])))
proof
let C216 being set;
assume L534: C216 in D86;
reconsider D87 = C216 as Nat by L534;
reconsider D88 = ( C215 . D87 ) as (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. D87 ) )) by L534 , MSUALG_6:2;
take ( OSClass (C214 , D88) );
thus L535: thesis;
end;
consider C217 being Function such that L536: (( dom C217 ) = D86 & (for B165 being set holds (B165 in D86 implies S8[ B165 , ( C217 . B165 ) ]))) from CLASSES1:sch 1(L533);
L537: ( dom ( ( OSClass C214 ) * D85 ) ) = D86 by PARTFUN1:def 2;
L538: (for B166 being set holds (B166 in ( dom ( ( OSClass C214 ) * D85 ) ) implies ( C217 . B166 ) in ( ( ( OSClass C214 ) * D85 ) . B166 )))
proof
let C218 being set;
assume L539: C218 in ( dom ( ( OSClass C214 ) * D85 ) );
reconsider D89 = C218 as Nat by L539;
L540: ( D85 . C218 ) in ( rng D85 ) by L537 , L539 , FUNCT_1:def 3;
reconsider D90 = ( D85 . C218 ) as (Element of R1) by L540;
L541: ((ex B167 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. D89 ) )) st (B167 = ( C215 . D89 ) & ( C217 . D89 ) = ( OSClass (C214 , B167) ))) & ( D85 /. D89 ) = ( D85 . D89 )) by L536 , L537 , L539 , PARTFUN1:def 6;
L542: ( C217 . C218 ) in ( OSClass (C214 , D90) ) by L541;
L543: ( ( ( OSClass C214 ) * D85 ) . C218 ) = ( ( OSClass C214 ) . ( D85 . C218 ) ) by L539 , FUNCT_1:12;
thus L544: thesis by L543 , L542 , L479;
end;
reconsider D91 = C217 as (Element of ( product ( ( OSClass C214 ) * D85 ) )) by L538 , L536 , L537 , CARD_3:9;
take D91;
let C219 being Nat;
assume L545: C219 in D86;
thus L546: thesis by L545 , L536;
end;
uniqueness
proof
let C220 , C221 being (Element of ( product ( ( OSClass C214 ) * ( the_arity_of R2 ) ) ));
assume L547: ((for B168 being Nat holds (B168 in ( dom ( the_arity_of R2 ) ) implies (ex B169 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. B168 ) )) st (B169 = ( C215 . B168 ) & ( C220 . B168 ) = ( OSClass (C214 , B169) ))))) & (for B170 being Nat holds (B170 in ( dom ( the_arity_of R2 ) ) implies (ex B171 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. B170 ) )) st (B171 = ( C215 . B170 ) & ( C221 . B170 ) = ( OSClass (C214 , B171) ))))));
L548: (for B172 being set holds (B172 in ( dom ( the_arity_of R2 ) ) implies ( C220 . B172 ) = ( C221 . B172 )))
proof
let C222 being set;
assume L549: C222 in ( dom ( the_arity_of R2 ) );
reconsider D92 = C222 as Nat by L549;
L550: ((ex B173 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. D92 ) )) st (B173 = ( C215 . D92 ) & ( C220 . D92 ) = ( OSClass (C214 , B173) ))) & (ex B174 being (Element of ( (the Sorts of C213) . ( ( the_arity_of R2 ) /. D92 ) )) st (B174 = ( C215 . D92 ) & ( C221 . D92 ) = ( OSClass (C214 , B174) )))) by L547 , L549;
thus L551: thesis by L550;
end;
L552: ( dom C221 ) = ( dom ( the_arity_of R2 ) ) by PARTFUN1:def 2;
L553: ( dom C220 ) = ( dom ( the_arity_of R2 ) ) by PARTFUN1:def 2;
thus L554: thesis by L553 , L552 , L548 , FUNCT_1:2;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let R2 being (Element of (the carrier' of R1));
let C223 being  non-empty (OSAlgebra of R1);
let C224 being (OSCongruence of C223);
func OSQuotRes (C224 , R2) -> (Function of ( ( (the Sorts of C223) * (the ResultSort of R1) ) . R2 ) , ( ( ( OSClass C224 ) * (the ResultSort of R1) ) . R2 )) means 
:L556: (for B175 being (Element of ( (the Sorts of C223) . ( the_result_sort_of R2 ) )) holds ( it . B175 ) = ( OSClass (C224 , B175) ));
existence
proof
set D93 = ( the_result_sort_of R2 );
set D94 = ( (the Sorts of C223) . D93 );
deffunc H4((Element of D94)) = ( OSClass (C224 , $1) );
consider C225 being Function such that L557: (( dom C225 ) = D94 & (for B176 being (Element of D94) holds ( C225 . B176 ) = H4(B176))) from FUNCT_1:sch 4;
L558: (for B177 being set holds (B177 in D94 implies ( C225 . B177 ) in ( ( OSClass C224 ) . D93 )))
proof
let C226 being set;
assume L559: C226 in D94;
reconsider D95 = C226 as (Element of D94) by L559;
L560: ( C225 . D95 ) = ( OSClass (C224 , D95) ) by L557;
L561: ( C225 . D95 ) in ( OSClass (C224 , D93) ) by L560;
thus L562: thesis by L561 , L479;
end;
L563: R2 in (the carrier' of R1);
L564: R2 in ( dom ( (the Sorts of C223) * (the ResultSort of R1) ) ) by L563 , PARTFUN1:def 2;
L565: ( ( (the Sorts of C223) * (the ResultSort of R1) ) . R2 ) = ( (the Sorts of C223) . ( (the ResultSort of R1) . R2 ) ) by L564 , FUNCT_1:12
.= D94 by MSUALG_1:def 2;
L566: ( dom (the ResultSort of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L567: ( dom ( ( OSClass C224 ) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) ) by L566 , PARTFUN1:def 2;
L568: ( ( ( OSClass C224 ) * (the ResultSort of R1) ) . R2 ) = ( ( OSClass C224 ) . ( (the ResultSort of R1) . R2 ) ) by L567 , L566 , FUNCT_1:12
.= ( ( OSClass C224 ) . D93 ) by MSUALG_1:def 2;
reconsider D96 = C225 as (Function of ( ( (the Sorts of C223) * (the ResultSort of R1) ) . R2 ) , ( ( ( OSClass C224 ) * (the ResultSort of R1) ) . R2 )) by L568 , L557 , L565 , L558 , FUNCT_2:3;
take D96;
thus L569: thesis by L557;
end;
uniqueness
proof
set D97 = (the Sorts of C223);
set D98 = (the ResultSort of R1);
set D99 = ( the_result_sort_of R2 );
let C227 , C228 being (Function of ( ( (the Sorts of C223) * (the ResultSort of R1) ) . R2 ) , ( ( ( OSClass C224 ) * (the ResultSort of R1) ) . R2 ));
assume that
L570: (for B178 being (Element of ( D97 . D99 )) holds ( C227 . B178 ) = ( OSClass (C224 , B178) ))
and
L571: (for B179 being (Element of ( D97 . D99 )) holds ( C228 . B179 ) = ( OSClass (C224 , B179) ));
L572:
now
let C229 being set;
assume L573: C229 in ( D97 . D99 );
reconsider D100 = C229 as (Element of ( D97 . D99 )) by L573;
L574: ( C227 . D100 ) = ( OSClass (C224 , D100) ) by L570;
thus L575: ( C227 . C229 ) = ( C228 . C229 ) by L574 , L571;
end;
L576: R2 in (the carrier' of R1);
L577: R2 in ( dom ( D97 * D98 ) ) by L576 , PARTFUN1:def 2;
L578: ( ( D97 * D98 ) . R2 ) = ( D97 . ( D98 . R2 ) ) by L577 , FUNCT_1:12
.= ( D97 . D99 ) by MSUALG_1:def 2;
L579: (( dom C227 ) = ( D97 . D99 ) & ( dom C228 ) = ( D97 . D99 )) by L578 , FUNCT_2:def 1;
thus L580: thesis by L579 , L572 , FUNCT_1:2;
end;
func OSQuotArgs (C224 , R2) -> (Function of ( ( ( (the Sorts of C223) # ) * (the Arity of R1) ) . R2 ) , ( ( ( ( OSClass C224 ) # ) * (the Arity of R1) ) . R2 )) means 
(for B180 being (Element of ( Args (R2 , C223) )) holds ( it . B180 ) = ( C224 #_os B180 ));
existence
proof
set D101 = ( the_arity_of R2 );
set D102 = ( Args (R2 , C223) );
deffunc H5((Element of D102)) = ( C224 #_os $1 );
consider C230 being Function such that L581: (( dom C230 ) = D102 & (for B181 being (Element of D102) holds ( C230 . B181 ) = H5(B181))) from FUNCT_1:sch 4;
L582: R2 in (the carrier' of R1);
L583: R2 in ( dom ( ( (the Sorts of C223) # ) * (the Arity of R1) ) ) by L582 , PARTFUN1:def 2;
L584: ( ( ( (the Sorts of C223) # ) * (the Arity of R1) ) . R2 ) = ( ( (the Sorts of C223) # ) . ( (the Arity of R1) . R2 ) ) by L583 , FUNCT_1:12
.= ( ( (the Sorts of C223) # ) . ( the_arity_of R2 ) ) by MSUALG_1:def 1;
L585: (for B182 being set holds (B182 in ( ( (the Sorts of C223) # ) . D101 ) implies ( C230 . B182 ) in ( ( ( OSClass C224 ) # ) . D101 )))
proof
let C231 being set;
assume L586: C231 in ( ( (the Sorts of C223) # ) . D101 );
reconsider D103 = C231 as (Element of D102) by L586 , L584 , MSUALG_1:def 4;
L587: (( C230 . D103 ) = ( C224 #_os D103 ) & ( ( ( OSClass C224 ) # ) . D101 ) = ( product ( ( OSClass C224 ) * D101 ) )) by L581 , FINSEQ_2:def 5;
thus L588: thesis by L587;
end;
L589: R2 in ( dom ( ( ( OSClass C224 ) # ) * (the Arity of R1) ) ) by L582 , PARTFUN1:def 2;
L590: ( ( ( ( OSClass C224 ) # ) * (the Arity of R1) ) . R2 ) = ( ( ( OSClass C224 ) # ) . ( (the Arity of R1) . R2 ) ) by L589 , FUNCT_1:12
.= ( ( ( OSClass C224 ) # ) . D101 ) by MSUALG_1:def 1;
reconsider D104 = C230 as (Function of ( ( ( (the Sorts of C223) # ) * (the Arity of R1) ) . R2 ) , ( ( ( ( OSClass C224 ) # ) * (the Arity of R1) ) . R2 )) by L590 , L581 , L584 , L585 , FUNCT_2:3 , MSUALG_1:def 4;
take D104;
thus L591: thesis by L581;
end;
uniqueness
proof
set D105 = ( the_arity_of R2 );
let C232 , C233 being (Function of ( ( ( (the Sorts of C223) # ) * (the Arity of R1) ) . R2 ) , ( ( ( ( OSClass C224 ) # ) * (the Arity of R1) ) . R2 ));
assume that
L592: (for B183 being (Element of ( Args (R2 , C223) )) holds ( C232 . B183 ) = ( C224 #_os B183 ))
and
L593: (for B184 being (Element of ( Args (R2 , C223) )) holds ( C233 . B184 ) = ( C224 #_os B184 ));
L594: R2 in (the carrier' of R1);
L595: R2 in ( dom ( ( (the Sorts of C223) # ) * (the Arity of R1) ) ) by L594 , PARTFUN1:def 2;
L596: ( ( ( (the Sorts of C223) # ) * (the Arity of R1) ) . R2 ) = ( ( (the Sorts of C223) # ) . ( (the Arity of R1) . R2 ) ) by L595 , FUNCT_1:12
.= ( ( (the Sorts of C223) # ) . ( the_arity_of R2 ) ) by MSUALG_1:def 1;
L597:
now
let C234 being set;
assume L598: C234 in ( ( (the Sorts of C223) # ) . D105 );
reconsider D106 = C234 as (Element of ( Args (R2 , C223) )) by L598 , L596 , MSUALG_1:def 4;
L599: ( C232 . D106 ) = ( C224 #_os D106 ) by L592;
thus L600: ( C232 . C234 ) = ( C233 . C234 ) by L599 , L593;
end;
L601: (( dom C232 ) = ( ( (the Sorts of C223) # ) . D105 ) & ( dom C233 ) = ( ( (the Sorts of C223) # ) . D105 )) by L596 , FUNCT_2:def 1;
thus L602: thesis by L601 , L597 , FUNCT_1:2;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C235 being  non-empty (OSAlgebra of R1);
let C236 being (OSCongruence of C235);
func OSQuotRes C236 -> (ManySortedFunction of ( (the Sorts of C235) * (the ResultSort of R1) ) , ( ( OSClass C236 ) * (the ResultSort of R1) )) means 
(for B185 being (OperSymbol of R1) holds ( it . B185 ) = ( OSQuotRes (C236 , B185) ));
existence
proof
defpred S9[ set , set ] means (for B186 being (OperSymbol of R1) holds (B186 = $1 implies $2 = ( OSQuotRes (C236 , B186) )));
set D107 = (the carrier' of R1);
L604: (for B187 being set holds (B187 in D107 implies (ex B188 being set st S9[ B187 , B188 ])))
proof
let C237 being set;
assume L605: C237 in D107;
reconsider D108 = C237 as (OperSymbol of R1) by L605;
take ( OSQuotRes (C236 , D108) );
thus L606: thesis;
end;
consider C238 being Function such that L607: (( dom C238 ) = D107 & (for B189 being set holds (B189 in D107 implies S9[ B189 , ( C238 . B189 ) ]))) from CLASSES1:sch 1(L604);
reconsider D109 = C238 as (ManySortedSet of D107) by L607 , PARTFUN1:def 2 , RELAT_1:def 18;
L608: (for B190 being set holds (B190 in ( dom D109 ) implies ( D109 . B190 ) is Function))
proof
let C239 being set;
assume L609: C239 in ( dom D109 );
reconsider D110 = C239 as (OperSymbol of R1) by L609;
L610: ( D109 . D110 ) = ( OSQuotRes (C236 , D110) ) by L607;
thus L611: thesis by L610;
end;
reconsider D111 = D109 as (ManySortedFunction of D107) by L608 , FUNCOP_1:def 6;
L612: (for B191 being set holds (B191 in D107 implies ( D111 . B191 ) is (Function of ( ( (the Sorts of C235) * (the ResultSort of R1) ) . B191 ) , ( ( ( OSClass C236 ) * (the ResultSort of R1) ) . B191 ))))
proof
let C240 being set;
assume L613: C240 in D107;
reconsider D112 = C240 as (OperSymbol of R1) by L613;
L614: ( D111 . D112 ) = ( OSQuotRes (C236 , D112) ) by L607;
thus L615: thesis by L614;
end;
reconsider D113 = D111 as (ManySortedFunction of ( (the Sorts of C235) * (the ResultSort of R1) ) , ( ( OSClass C236 ) * (the ResultSort of R1) )) by L612 , PBOOLE:def 15;
take D113;
thus L616: thesis by L607;
end;
uniqueness
proof
let C241 , C242 being (ManySortedFunction of ( (the Sorts of C235) * (the ResultSort of R1) ) , ( ( OSClass C236 ) * (the ResultSort of R1) ));
assume that
L617: (for B192 being (OperSymbol of R1) holds ( C241 . B192 ) = ( OSQuotRes (C236 , B192) ))
and
L618: (for B193 being (OperSymbol of R1) holds ( C242 . B193 ) = ( OSQuotRes (C236 , B193) ));
L619:
now
let C243 being set;
assume L620: C243 in (the carrier' of R1);
reconsider D114 = C243 as (OperSymbol of R1) by L620;
L621: ( C241 . D114 ) = ( OSQuotRes (C236 , D114) ) by L617;
thus L622: ( C241 . C243 ) = ( C242 . C243 ) by L621 , L618;
end;
thus L623: thesis by L619 , PBOOLE:3;
end;
func OSQuotArgs C236 -> (ManySortedFunction of ( ( (the Sorts of C235) # ) * (the Arity of R1) ) , ( ( ( OSClass C236 ) # ) * (the Arity of R1) )) means 
(for B194 being (OperSymbol of R1) holds ( it . B194 ) = ( OSQuotArgs (C236 , B194) ));
existence
proof
defpred S10[ set , set ] means (for B195 being (OperSymbol of R1) holds (B195 = $1 implies $2 = ( OSQuotArgs (C236 , B195) )));
set D115 = (the carrier' of R1);
L624: (for B196 being set holds (B196 in D115 implies (ex B197 being set st S10[ B196 , B197 ])))
proof
let C244 being set;
assume L625: C244 in D115;
reconsider D116 = C244 as (OperSymbol of R1) by L625;
take ( OSQuotArgs (C236 , D116) );
thus L626: thesis;
end;
consider C245 being Function such that L627: (( dom C245 ) = D115 & (for B198 being set holds (B198 in D115 implies S10[ B198 , ( C245 . B198 ) ]))) from CLASSES1:sch 1(L624);
reconsider D117 = C245 as (ManySortedSet of D115) by L627 , PARTFUN1:def 2 , RELAT_1:def 18;
L628: (for B199 being set holds (B199 in ( dom D117 ) implies ( D117 . B199 ) is Function))
proof
let C246 being set;
assume L629: C246 in ( dom D117 );
reconsider D118 = C246 as (OperSymbol of R1) by L629;
L630: ( D117 . D118 ) = ( OSQuotArgs (C236 , D118) ) by L627;
thus L631: thesis by L630;
end;
reconsider D119 = D117 as (ManySortedFunction of D115) by L628 , FUNCOP_1:def 6;
L632: (for B200 being set holds (B200 in D115 implies ( D119 . B200 ) is (Function of ( ( ( (the Sorts of C235) # ) * (the Arity of R1) ) . B200 ) , ( ( ( ( OSClass C236 ) # ) * (the Arity of R1) ) . B200 ))))
proof
let C247 being set;
assume L633: C247 in D115;
reconsider D120 = C247 as (OperSymbol of R1) by L633;
L634: ( D119 . D120 ) = ( OSQuotArgs (C236 , D120) ) by L627;
thus L635: thesis by L634;
end;
reconsider D121 = D119 as (ManySortedFunction of ( ( (the Sorts of C235) # ) * (the Arity of R1) ) , ( ( ( OSClass C236 ) # ) * (the Arity of R1) )) by L632 , PBOOLE:def 15;
take D121;
thus L636: thesis by L627;
end;
uniqueness
proof
let C248 , C249 being (ManySortedFunction of ( ( (the Sorts of C235) # ) * (the Arity of R1) ) , ( ( ( OSClass C236 ) # ) * (the Arity of R1) ));
assume that
L637: (for B201 being (OperSymbol of R1) holds ( C248 . B201 ) = ( OSQuotArgs (C236 , B201) ))
and
L638: (for B202 being (OperSymbol of R1) holds ( C249 . B202 ) = ( OSQuotArgs (C236 , B202) ));
L639:
now
let C250 being set;
assume L640: C250 in (the carrier' of R1);
reconsider D122 = C250 as (OperSymbol of R1) by L640;
L641: ( C248 . D122 ) = ( OSQuotArgs (C236 , D122) ) by L637;
thus L642: ( C248 . C250 ) = ( C249 . C250 ) by L641 , L638;
end;
thus L643: thesis by L639 , PBOOLE:3;
end;
end;
theorem
L645: (for R1 being  locally_directed OrderSortedSign holds (for R2 being (Element of (the carrier' of R1)) holds (for B203 being  non-empty (OSAlgebra of R1) holds (for B204 being (OSCongruence of B203) holds (for B205 being set holds (B205 in ( ( ( ( OSClass B204 ) # ) * (the Arity of R1) ) . R2 ) implies (ex B206 being (Element of ( Args (R2 , B203) )) st B205 = ( B204 #_os B206 ))))))))
proof
let R1 being  locally_directed OrderSortedSign;
let R2 being (Element of (the carrier' of R1));
let C251 being  non-empty (OSAlgebra of R1);
let C252 being (OSCongruence of C251);
let C253 being set;
assume L646: C253 in ( ( ( ( OSClass C252 ) # ) * (the Arity of R1) ) . R2 );
set D123 = ( the_arity_of R2 );
L647: D123 = ( (the Arity of R1) . R2 ) by MSUALG_1:def 1;
L648: ( ( ( ( OSClass C252 ) # ) * (the Arity of R1) ) . R2 ) = ( product ( ( OSClass C252 ) * D123 ) ) by L647 , MSAFREE:1;
consider C254 being Function such that L649: C254 = C253 and L650: ( dom C254 ) = ( dom ( ( OSClass C252 ) * D123 ) ) and L651: (for B207 being set holds (B207 in ( dom ( ( OSClass C252 ) * D123 ) ) implies ( C254 . B207 ) in ( ( ( OSClass C252 ) * D123 ) . B207 ))) by L648 , L646 , CARD_3:def 5;
defpred S11[ set , set ] means ($2 in ( (the Sorts of C251) . ( D123 /. $1 ) ) & $2 in ( C254 . $1 ));
L652: ( dom ( ( OSClass C252 ) * D123 ) ) = ( dom D123 ) by PARTFUN1:def 2;
L653: (for B208 being Nat holds (B208 in ( dom C254 ) implies ( C254 . B208 ) in ( OSClass (C252 , ( D123 /. B208 )) )))
proof
let C255 being Nat;
reconsider D124 = ( D123 /. C255 ) as (Element of R1);
assume L654: C255 in ( dom C254 );
L655: ( D123 . C255 ) = ( D123 /. C255 ) by L654 , L650 , L652 , PARTFUN1:def 6;
L656: ( ( ( OSClass C252 ) * D123 ) . C255 ) = ( ( OSClass C252 ) . D124 ) by L655 , L650 , L654 , FUNCT_1:12
.= ( OSClass (C252 , D124) ) by L479;
thus L657: thesis by L656 , L650 , L651 , L654;
end;
L658: (for B209 being set holds (B209 in ( dom C254 ) implies (ex B210 being set st S11[ B209 , B210 ])))
proof
let C256 being set;
reconsider D125 = ( D123 /. C256 ) as (Element of R1);
assume L659: C256 in ( dom C254 );
reconsider D126 = C256 as Nat by L659 , L650;
L660: ( C254 . D126 ) in ( OSClass (C252 , D125) ) by L653 , L659;
consider C257 being set such that L661: (C257 in ( (the Sorts of C251) . D125 ) & ( C254 . D126 ) = ( Class (( CompClass (C252 , ( CComp D125 )) ) , C257) )) by L660 , L431;
take C257;
thus L662: thesis by L661 , L269 , EQREL_1:20;
end;
consider C258 being Function such that L663: (( dom C258 ) = ( dom C254 ) & (for B211 being set holds (B211 in ( dom C254 ) implies S11[ B211 , ( C258 . B211 ) ]))) from CLASSES1:sch 1(L658);
L664: ( dom (the Sorts of C251) ) = (the carrier of R1) by PARTFUN1:def 2;
L665: ( rng D123 ) c= ( dom (the Sorts of C251) ) by L664;
L666: ( dom C258 ) = ( dom ( (the Sorts of C251) * D123 ) ) by L665 , L650 , L652 , L663 , RELAT_1:27;
L667: (for B212 being set holds (B212 in ( dom ( (the Sorts of C251) * D123 ) ) implies ( C258 . B212 ) in ( ( (the Sorts of C251) * D123 ) . B212 )))
proof
let C259 being set;
assume L668: C259 in ( dom ( (the Sorts of C251) * D123 ) );
reconsider D127 = C259 as Nat by L668;
reconsider D128 = ( D123 /. D127 ) as (Element of R1);
L669: (( D123 . D127 ) = ( D123 /. D127 ) & ( C258 . D127 ) in ( (the Sorts of C251) . D128 )) by L650 , L652 , L663 , L666 , L668 , PARTFUN1:def 6;
thus L670: thesis by L669 , L668 , FUNCT_1:12;
end;
L671: ( Args (R2 , C251) ) = ( ( ( (the Sorts of C251) # ) * (the Arity of R1) ) . R2 ) by MSUALG_1:def 4
.= ( product ( (the Sorts of C251) * D123 ) ) by L647 , MSAFREE:1;
reconsider D129 = C258 as (Element of ( Args (R2 , C251) )) by L671 , L666 , L667 , CARD_3:9;
L672: (for B213 being set holds (B213 in ( dom D123 ) implies ( C254 . B213 ) = ( ( C252 #_os D129 ) . B213 )))
proof
let C260 being set;
assume L673: C260 in ( dom D123 );
reconsider D130 = C260 as Nat by L673;
L674: ((ex B214 being (Element of ( (the Sorts of C251) . ( ( the_arity_of R2 ) /. D130 ) )) st (B214 = ( D129 . D130 ) & ( ( C252 #_os D129 ) . D130 ) = ( OSClass (C252 , B214) ))) & ( D129 . D130 ) in ( C254 . D130 )) by L650 , L652 , L663 , L673 , L532;
reconsider D131 = ( D123 /. D130 ) as (Element of R1);
L675: ( C254 . D130 ) in ( OSClass (C252 , D131) ) by L650 , L652 , L653 , L673;
consider C261 being set such that L676: C261 in ( (the Sorts of C251) . D131 ) and L677: ( C254 . D130 ) = ( Class (( CompClass (C252 , ( CComp D131 )) ) , C261) ) by L675 , L431;
L678: C261 in ( (the Sorts of C251) -carrier_of ( CComp D131 ) ) by L676 , L269;
thus L679: thesis by L678 , L674 , L677 , EQREL_1:23;
end;
take D129;
L680: ( dom ( C252 #_os D129 ) ) = ( dom ( ( OSClass C252 ) * D123 ) ) by CARD_3:9;
thus L681: thesis by L680 , L649 , L650 , L652 , L672 , FUNCT_1:2;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let R2 being (Element of (the carrier' of R1));
let C262 being  non-empty (OSAlgebra of R1);
let C263 being (OSCongruence of C262);
func OSQuotCharact (C263 , R2) -> (Function of ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) , ( ( ( OSClass C263 ) * (the ResultSort of R1) ) . R2 )) means 
:L682: (for B215 being (Element of ( Args (R2 , C262) )) holds (( C263 #_os B215 ) in ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) implies ( it . ( C263 #_os B215 ) ) = ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . B215 )));
existence
proof
defpred S12[ set , set ] means (for B216 being (Element of ( Args (R2 , C262) )) holds ($1 = ( C263 #_os B216 ) implies $2 = ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . B216 )));
set D132 = ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 );
set D133 = ( ( ( OSClass C263 ) * (the ResultSort of R1) ) . R2 );
L683: (for B217 being set holds (B217 in D132 implies (ex B218 being set st (B218 in D133 & S12[ B217 , B218 ]))))
proof
set D134 = ( the_result_sort_of R2 );
set D135 = ( the_arity_of R2 );
let C264 being set;
assume L684: C264 in D132;
consider C265 being (Element of ( Args (R2 , C262) )) such that L685: C264 = ( C263 #_os C265 ) by L684 , L645;
take D136 = ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . C265 );
L686: R2 in (the carrier' of R1);
L687: R2 in ( dom ( ( OSClass C263 ) * (the ResultSort of R1) ) ) by L686 , PARTFUN1:def 2;
L688: ( ( ( OSClass C263 ) * (the ResultSort of R1) ) . R2 ) = ( ( OSClass C263 ) . ( (the ResultSort of R1) . R2 ) ) by L687 , FUNCT_1:12
.= ( ( OSClass C263 ) . D134 ) by MSUALG_1:def 2;
L689: R2 in ( dom ( (the Sorts of C262) * (the ResultSort of R1) ) ) by L686 , PARTFUN1:def 2;
L690: ( ( (the Sorts of C262) * (the ResultSort of R1) ) . R2 ) = ( (the Sorts of C262) . ( (the ResultSort of R1) . R2 ) ) by L689 , FUNCT_1:12
.= ( (the Sorts of C262) . D134 ) by MSUALG_1:def 2;
L691: (( dom ( OSQuotRes (C263 , R2) ) ) = ( (the Sorts of C262) . D134 ) & ( Result (R2 , C262) ) = ( (the Sorts of C262) . D134 )) by L690 , FUNCT_2:def 1 , MSUALG_1:def 5;
L692: ( rng ( Den (R2 , C262) ) ) c= ( Result (R2 , C262) );
L693: (( dom ( Den (R2 , C262) ) ) = ( Args (R2 , C262) ) & ( dom ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) ) = ( dom ( Den (R2 , C262) ) )) by L692 , L691 , FUNCT_2:def 1 , RELAT_1:27;
L694: ( ( OSQuotRes (C263 , R2) ) . ( ( Den (R2 , C262) ) . C265 ) ) in ( rng ( OSQuotRes (C263 , R2) ) ) by L691 , FUNCT_1:def 3;
L695: ( ( OSQuotRes (C263 , R2) ) . ( ( Den (R2 , C262) ) . C265 ) ) in ( ( OSClass C263 ) . D134 ) by L694 , L688;
thus L696: D136 in D133 by L695 , L688 , L693 , FUNCT_1:12;
let C266 being (Element of ( Args (R2 , C262) ));
reconsider D137 = ( ( Den (R2 , C262) ) . C265 ) , D138 = ( ( Den (R2 , C262) ) . C266 ) as (Element of ( (the Sorts of C262) . D134 )) by L690 , MSUALG_1:def 5;
L697: ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . C266 ) = ( ( OSQuotRes (C263 , R2) ) . D138 ) by L693 , FUNCT_1:12
.= ( OSClass (C263 , D138) ) by L556
.= ( Class (( CompClass (C263 , ( CComp D134 )) ) , D138) );
assume L698: C264 = ( C263 #_os C266 );
L699: (for B219 being Nat holds (B219 in ( dom C265 ) implies [ ( C265 . B219 ) , ( C266 . B219 ) ] in ( C263 . ( D135 /. B219 ) )))
proof
let C267 being Nat;
L700: ( dom C265 ) = ( dom D135 ) by MSUALG_3:6;
assume L701: C267 in ( dom C265 );
L702: ((ex B220 being (Element of ( (the Sorts of C262) . ( D135 /. C267 ) )) st (B220 = ( C265 . C267 ) & ( ( C263 #_os C265 ) . C267 ) = ( OSClass (C263 , B220) ))) & (ex B221 being (Element of ( (the Sorts of C262) . ( D135 /. C267 ) )) st (B221 = ( C266 . C267 ) & ( ( C263 #_os C266 ) . C267 ) = ( OSClass (C263 , B221) )))) by L701 , L700 , L532;
thus L703: thesis by L702 , L685 , L698 , L511;
end;
L704: (D134 in ( CComp D134 ) & [ D137 , D138 ] in ( C263 . D134 )) by L699 , EQREL_1:20 , MSUALG_4:def 4;
L705: [ D137 , D138 ] in ( CompClass (C263 , ( CComp D134 )) ) by L704 , L330;
L706: D137 in ( (the Sorts of C262) -carrier_of ( CComp D134 ) ) by L269;
L707: D136 = ( ( OSQuotRes (C263 , R2) ) . ( ( Den (R2 , C262) ) . C265 ) ) by L693 , FUNCT_1:12
.= ( OSClass (C263 , D137) ) by L556
.= ( Class (( CompClass (C263 , ( CComp D134 )) ) , D137) );
thus L708: thesis by L707 , L706 , L697 , L705 , EQREL_1:35;
end;
consider C268 being Function such that L709: (( dom C268 ) = D132 & ( rng C268 ) c= D133 & (for B222 being set holds (B222 in D132 implies S12[ B222 , ( C268 . B222 ) ]))) from FUNCT_1:sch 5(L683);
reconsider D139 = C268 as (Function of ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) , ( ( ( OSClass C263 ) * (the ResultSort of R1) ) . R2 )) by L709 , FUNCT_2:2;
take D139;
thus L710: thesis by L709;
end;
uniqueness
proof
set D140 = ( the_arity_of R2 );
let C269 , C270 being (Function of ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) , ( ( ( OSClass C263 ) * (the ResultSort of R1) ) . R2 ));
assume that
L711: (for B223 being (Element of ( Args (R2 , C262) )) holds (( C263 #_os B223 ) in ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) implies ( C269 . ( C263 #_os B223 ) ) = ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . B223 )))
and
L712: (for B224 being (Element of ( Args (R2 , C262) )) holds (( C263 #_os B224 ) in ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) implies ( C270 . ( C263 #_os B224 ) ) = ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . B224 )));
L713: ( dom (the Arity of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L714: ( dom ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) ) = ( dom (the Arity of R1) ) by L713 , PARTFUN1:def 2;
L715: ( ( ( ( OSClass C263 ) # ) * (the Arity of R1) ) . R2 ) = ( ( ( OSClass C263 ) # ) . ( (the Arity of R1) . R2 ) ) by L714 , L713 , FUNCT_1:12
.= ( ( ( OSClass C263 ) # ) . D140 ) by MSUALG_1:def 1;
L716:
now
let C271 being set;
assume L717: C271 in ( ( ( OSClass C263 ) # ) . D140 );
consider C272 being (Element of ( Args (R2 , C262) )) such that L718: C271 = ( C263 #_os C272 ) by L717 , L715 , L645;
L719: ( C269 . C271 ) = ( ( ( OSQuotRes (C263 , R2) ) * ( Den (R2 , C262) ) ) . C272 ) by L711 , L715 , L717 , L718;
thus L720: ( C269 . C271 ) = ( C270 . C271 ) by L719 , L712 , L715 , L717 , L718;
end;
L721: (( dom C269 ) = ( ( ( OSClass C263 ) # ) . D140 ) & ( dom C270 ) = ( ( ( OSClass C263 ) # ) . D140 )) by L715 , FUNCT_2:def 1;
thus L722: thesis by L721 , L716 , FUNCT_1:2;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C273 being  non-empty (OSAlgebra of R1);
let C274 being (OSCongruence of C273);
func OSQuotCharact C274 -> (ManySortedFunction of ( ( ( OSClass C274 ) # ) * (the Arity of R1) ) , ( ( OSClass C274 ) * (the ResultSort of R1) )) means 
:L724: (for B225 being (OperSymbol of R1) holds ( it . B225 ) = ( OSQuotCharact (C274 , B225) ));
existence
proof
defpred S13[ set , set ] means (for B226 being (OperSymbol of R1) holds (B226 = $1 implies $2 = ( OSQuotCharact (C274 , B226) )));
set D141 = (the carrier' of R1);
L725: (for B227 being set holds (B227 in D141 implies (ex B228 being set st S13[ B227 , B228 ])))
proof
let C275 being set;
assume L726: C275 in D141;
reconsider D142 = C275 as (OperSymbol of R1) by L726;
take ( OSQuotCharact (C274 , D142) );
thus L727: thesis;
end;
consider C276 being Function such that L728: (( dom C276 ) = D141 & (for B229 being set holds (B229 in D141 implies S13[ B229 , ( C276 . B229 ) ]))) from CLASSES1:sch 1(L725);
reconsider D143 = C276 as (ManySortedSet of D141) by L728 , PARTFUN1:def 2 , RELAT_1:def 18;
L729: (for B230 being set holds (B230 in ( dom D143 ) implies ( D143 . B230 ) is Function))
proof
let C277 being set;
assume L730: C277 in ( dom D143 );
reconsider D144 = C277 as (OperSymbol of R1) by L730;
L731: ( D143 . D144 ) = ( OSQuotCharact (C274 , D144) ) by L728;
thus L732: thesis by L731;
end;
reconsider D145 = D143 as (ManySortedFunction of D141) by L729 , FUNCOP_1:def 6;
L733: (for B231 being set holds (B231 in D141 implies ( D145 . B231 ) is (Function of ( ( ( ( OSClass C274 ) # ) * (the Arity of R1) ) . B231 ) , ( ( ( OSClass C274 ) * (the ResultSort of R1) ) . B231 ))))
proof
let C278 being set;
assume L734: C278 in D141;
reconsider D146 = C278 as (OperSymbol of R1) by L734;
L735: ( D145 . D146 ) = ( OSQuotCharact (C274 , D146) ) by L728;
thus L736: thesis by L735;
end;
reconsider D147 = D145 as (ManySortedFunction of ( ( ( OSClass C274 ) # ) * (the Arity of R1) ) , ( ( OSClass C274 ) * (the ResultSort of R1) )) by L733 , PBOOLE:def 15;
take D147;
thus L737: thesis by L728;
end;
uniqueness
proof
let C279 , C280 being (ManySortedFunction of ( ( ( OSClass C274 ) # ) * (the Arity of R1) ) , ( ( OSClass C274 ) * (the ResultSort of R1) ));
assume that
L738: (for B232 being (OperSymbol of R1) holds ( C279 . B232 ) = ( OSQuotCharact (C274 , B232) ))
and
L739: (for B233 being (OperSymbol of R1) holds ( C280 . B233 ) = ( OSQuotCharact (C274 , B233) ));
L740:
now
let C281 being set;
assume L741: C281 in (the carrier' of R1);
reconsider D148 = C281 as (OperSymbol of R1) by L741;
L742: ( C279 . D148 ) = ( OSQuotCharact (C274 , D148) ) by L738;
thus L743: ( C279 . C281 ) = ( C280 . C281 ) by L742 , L739;
end;
thus L744: thesis by L740 , PBOOLE:3;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C282 being  non-empty (OSAlgebra of R1);
let C283 being (OSCongruence of C282);
func QuotOSAlg (C282 , C283) -> (OSAlgebra of R1) equals 
MSAlgebra (# ( OSClass C283 ) , ( OSQuotCharact C283 ) #);
coherence by OSALG_1:17;
end;
registration
let R1 being  locally_directed OrderSortedSign;
let C284 being  non-empty (OSAlgebra of R1);
let C285 being (OSCongruence of C284);
cluster ( QuotOSAlg (C284 , C285) ) ->  strict  non-empty;
coherence by MSUALG_1:def 3;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C286 being  non-empty (OSAlgebra of R1);
let C287 being (OSCongruence of C286);
let C288 being (Element of R1);
func OSNat_Hom (C286 , C287 , C288) -> (Function of ( (the Sorts of C286) . C288 ) , ( OSClass (C287 , C288) )) means 
:L748: (for B234 being (Element of ( (the Sorts of C286) . C288 )) holds ( it . B234 ) = ( OSClass (C287 , B234) ));
existence
proof
deffunc H6((Element of ( (the Sorts of C286) . C288 ))) = ( OSClass (C287 , $1) );
thus L749: (ex B235 being (Function of ( (the Sorts of C286) . C288 ) , ( OSClass (C287 , C288) )) st (for B236 being (Element of ( (the Sorts of C286) . C288 )) holds ( B235 . B236 ) = H6(B236))) from FUNCT_2:sch 4;
end;
uniqueness
proof
let C289 , C290 being (Function of ( (the Sorts of C286) . C288 ) , ( OSClass (C287 , C288) ));
assume that
L750: (for B237 being (Element of ( (the Sorts of C286) . C288 )) holds ( C289 . B237 ) = ( OSClass (C287 , B237) ))
and
L751: (for B238 being (Element of ( (the Sorts of C286) . C288 )) holds ( C290 . B238 ) = ( OSClass (C287 , B238) ));
L752:
now
let C291 being set;
assume L753: C291 in ( (the Sorts of C286) . C288 );
reconsider D149 = C291 as (Element of ( (the Sorts of C286) . C288 )) by L753;
L754: ( C289 . C291 ) = ( OSClass (C287 , D149) ) by L750;
thus L755: ( C289 . C291 ) = ( C290 . C291 ) by L754 , L751;
end;
L756: (( dom C289 ) = ( (the Sorts of C286) . C288 ) & ( dom C290 ) = ( (the Sorts of C286) . C288 )) by FUNCT_2:def 1;
thus L757: thesis by L756 , L752 , FUNCT_1:2;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C292 being  non-empty (OSAlgebra of R1);
let C293 being (OSCongruence of C292);
func OSNat_Hom (C292 , C293) -> (ManySortedFunction of C292 , ( QuotOSAlg (C292 , C293) )) means 
:L759: (for B239 being (Element of R1) holds ( it . B239 ) = ( OSNat_Hom (C292 , C293 , B239) ));
existence
proof
deffunc H7((Element of R1)) = ( OSNat_Hom (C292 , C293 , $1) );
consider C294 being Function such that L760: (( dom C294 ) = (the carrier of R1) & (for B240 being (Element of R1) holds ( C294 . B240 ) = H7(B240))) from FUNCT_1:sch 4;
reconsider D150 = C294 as (ManySortedSet of (the carrier of R1)) by L760 , PARTFUN1:def 2 , RELAT_1:def 18;
L761: (for B241 being set holds (B241 in ( dom D150 ) implies ( D150 . B241 ) is Function))
proof
let C295 being set;
assume L762: C295 in ( dom D150 );
reconsider D151 = C295 as (Element of R1) by L762;
L763: ( D150 . D151 ) = ( OSNat_Hom (C292 , C293 , D151) ) by L760;
thus L764: thesis by L763;
end;
reconsider D152 = D150 as (ManySortedFunction of (the carrier of R1)) by L761 , FUNCOP_1:def 6;
L765: (for B242 being set holds (B242 in (the carrier of R1) implies ( D152 . B242 ) is (Function of ( (the Sorts of C292) . B242 ) , ( ( OSClass C293 ) . B242 ))))
proof
let C296 being set;
assume L766: C296 in (the carrier of R1);
reconsider D153 = C296 as (Element of R1) by L766;
L767: (( OSClass (C293 , D153) ) = ( ( OSClass C293 ) . C296 ) & ( D152 . D153 ) = ( OSNat_Hom (C292 , C293 , D153) )) by L760 , L479;
thus L768: thesis by L767;
end;
reconsider D154 = D152 as (ManySortedFunction of (the Sorts of C292) , ( OSClass C293 )) by L765 , PBOOLE:def 15;
reconsider D155 = D154 as (ManySortedFunction of C292 , ( QuotOSAlg (C292 , C293) ));
take D155;
thus L769: thesis by L760;
end;
uniqueness
proof
let C297 , C298 being (ManySortedFunction of C292 , ( QuotOSAlg (C292 , C293) ));
assume that
L770: (for B243 being (Element of R1) holds ( C297 . B243 ) = ( OSNat_Hom (C292 , C293 , B243) ))
and
L771: (for B244 being (Element of R1) holds ( C298 . B244 ) = ( OSNat_Hom (C292 , C293 , B244) ));
L772:
now
let C299 being set;
assume L773: C299 in (the carrier of R1);
reconsider D156 = C299 as (SortSymbol of R1) by L773;
L774: ( C297 . D156 ) = ( OSNat_Hom (C292 , C293 , D156) ) by L770;
thus L775: ( C297 . C299 ) = ( C298 . C299 ) by L774 , L771;
end;
thus L776: thesis by L772 , PBOOLE:3;
end;
end;
theorem
L778: (for R1 being  locally_directed OrderSortedSign holds (for B245 being  non-empty (OSAlgebra of R1) holds (for B246 being (OSCongruence of B245) holds (( OSNat_Hom (B245 , B246) ) is_epimorphism B245 , ( QuotOSAlg (B245 , B246) ) & ( OSNat_Hom (B245 , B246) ) is  order-sorted))))
proof
let R1 being  locally_directed OrderSortedSign;
let C300 being  non-empty (OSAlgebra of R1);
let C301 being (OSCongruence of C300);
set D157 = ( OSNat_Hom (C300 , C301) );
set D158 = ( QuotOSAlg (C300 , C301) );
set D159 = (the Sorts of C300);
L779: (for B247 being (Element of (the carrier' of R1)) holds (( Args (B247 , C300) ) <> ( {} ) implies (for B248 being (Element of ( Args (B247 , C300) )) holds ( ( D157 . ( the_result_sort_of B247 ) ) . ( ( Den (B247 , C300) ) . B248 ) ) = ( ( Den (B247 , D158) ) . ( D157 # B248 ) ))))
proof
let C302 being (Element of (the carrier' of R1));
assume that
L780: ( Args (C302 , C300) ) <> ( {} );
let C303 being (Element of ( Args (C302 , C300) ));
set D160 = ( the_result_sort_of C302 );
set D161 = ( the_arity_of C302 );
L781: ( (the Arity of R1) . C302 ) = D161 by MSUALG_1:def 1;
L782: ( ( ( ( OSClass C301 ) # ) * (the Arity of R1) ) . C302 ) = ( product ( ( OSClass C301 ) * D161 ) ) by L781 , MSAFREE:1;
L783: ( dom C303 ) = ( dom D161 ) by MSUALG_3:6;
L784: (for B249 being set holds (B249 in ( dom D161 ) implies ( ( D157 # C303 ) . B249 ) = ( ( C301 #_os C303 ) . B249 )))
proof
let C304 being set;
assume L785: C304 in ( dom D161 );
reconsider D162 = C304 as Nat by L785;
set D163 = ( OSNat_Hom (C300 , C301 , ( D161 /. D162 )) );
set D164 = ( D161 /. D162 );
L786: (ex B250 being (Element of ( D159 . D164 )) st (B250 = ( C303 . D162 ) & ( ( C301 #_os C303 ) . D162 ) = ( OSClass (C301 , B250) ))) by L785 , L532;
L787: D162 in ( dom ( (the Sorts of C300) * D161 ) ) by L785 , PARTFUN1:def 2;
L788: ( ( (the Sorts of C300) * D161 ) . D162 ) = ( (the Sorts of C300) . ( D161 . D162 ) ) by L787 , FUNCT_1:12
.= ( D159 . D164 ) by L785 , PARTFUN1:def 6;
reconsider D165 = ( C303 . D162 ) as (Element of ( D159 . D164 )) by L788 , L787 , MSUALG_3:6;
thus L789: ( ( D157 # C303 ) . C304 ) = ( ( D157 . ( D161 /. D162 ) ) . ( C303 . D162 ) ) by L783 , L785 , MSUALG_3:def 6
.= ( D163 . D165 ) by L759
.= ( ( C301 #_os C303 ) . C304 ) by L786 , L748;
end;
L790: ( dom (the Sorts of C300) ) = (the carrier of R1) by PARTFUN1:def 2;
L791: ( rng (the ResultSort of R1) ) c= ( dom (the Sorts of C300) ) by L790;
L792: (( dom (the ResultSort of R1) ) = (the carrier' of R1) & ( dom ( (the Sorts of C300) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) )) by L791 , FUNCT_2:def 1 , RELAT_1:27;
L793: ( ( (the Sorts of C300) * (the ResultSort of R1) ) . C302 ) = ( (the Sorts of C300) . ( (the ResultSort of R1) . C302 ) ) by L792 , FUNCT_1:12
.= ( (the Sorts of C300) . D160 ) by MSUALG_1:def 2;
reconsider D166 = ( ( Den (C302 , C300) ) . C303 ) as (Element of ( D159 . D160 )) by L793 , MSUALG_1:def 5;
L794: (( rng ( Den (C302 , C300) ) ) c= ( Result (C302 , C300) ) & ( Result (C302 , C300) ) = ( D159 . D160 )) by L793 , MSUALG_1:def 5;
L795: ( rng ( Den (C302 , C300) ) ) c= ( dom ( OSQuotRes (C301 , C302) ) ) by L794 , L793 , FUNCT_2:def 1;
L796: (( dom ( Den (C302 , C300) ) ) = ( Args (C302 , C300) ) & ( dom ( ( OSQuotRes (C301 , C302) ) * ( Den (C302 , C300) ) ) ) = ( dom ( Den (C302 , C300) ) )) by L795 , FUNCT_2:def 1 , RELAT_1:27;
L797: ( dom ( OSClass C301 ) ) = (the carrier of R1) by PARTFUN1:def 2;
L798: (( dom ( C301 #_os C303 ) ) = ( dom ( ( OSClass C301 ) * ( the_arity_of C302 ) ) ) & ( rng D161 ) c= ( dom ( OSClass C301 ) )) by L797 , CARD_3:9;
L799: (( dom ( D157 # C303 ) ) = ( dom D161 ) & ( dom ( C301 #_os C303 ) ) = ( dom D161 )) by L798 , MSUALG_3:6 , RELAT_1:27;
L800: ( D157 # C303 ) = ( C301 #_os C303 ) by L799 , L784 , FUNCT_1:2;
L801: ( Den (C302 , D158) ) = ( ( OSQuotCharact C301 ) . C302 ) by MSUALG_1:def 6
.= ( OSQuotCharact (C301 , C302) ) by L724;
L802: ( ( Den (C302 , D158) ) . ( D157 # C303 ) ) = ( ( ( OSQuotRes (C301 , C302) ) * ( Den (C302 , C300) ) ) . C303 ) by L801 , L782 , L800 , L682
.= ( ( OSQuotRes (C301 , C302) ) . D166 ) by L796 , FUNCT_1:12
.= ( OSClass (C301 , D166) ) by L556
.= ( ( OSNat_Hom (C300 , C301 , D160) ) . D166 ) by L748
.= ( ( D157 . D160 ) . ( ( Den (C302 , C300) ) . C303 ) ) by L759;
thus L803: thesis by L802;
end;
thus L804: D157 is_homomorphism C300 , D158 by L779 , MSUALG_3:def 7;
L805: (for B251 being set holds (B251 in (the carrier of R1) implies ( rng ( D157 . B251 ) ) = ( (the Sorts of D158) . B251 )))
proof
let C305 being set;
assume L806: C305 in (the carrier of R1);
reconsider D167 = C305 as (Element of R1) by L806;
reconsider D168 = ( D157 . C305 ) as (Function of ( D159 . D167 ) , ( (the Sorts of D158) . D167 )) by PBOOLE:def 15;
L807: ( dom D168 ) = ( D159 . D167 ) by FUNCT_2:def 1;
L808: ( (the Sorts of D158) . D167 ) = ( OSClass (C301 , D167) ) by L479;
L809: (for B252 being set holds (B252 in ( (the Sorts of D158) . C305 ) implies B252 in ( rng D168 )))
proof
let C306 being set;
L810: D168 = ( OSNat_Hom (C300 , C301 , D167) ) by L759;
assume L811: C306 in ( (the Sorts of D158) . C305 );
consider C307 being set such that L812: C307 in ( D159 . D167 ) and L813: C306 = ( Class (( CompClass (C301 , ( CComp D167 )) ) , C307) ) by L811 , L808 , L431;
reconsider D169 = C307 as (Element of ( D159 . D167 )) by L812;
L814: (( OSClass (C301 , D169) ) = C306 & ( D168 . C307 ) in ( rng D168 )) by L807 , L812 , L813 , FUNCT_1:def 3;
thus L815: thesis by L814 , L810 , L748;
end;
L816: ( (the Sorts of D158) . C305 ) c= ( rng D168 ) by L809 , TARSKI:def 3;
thus L817: thesis by L816 , XBOOLE_0:def 10;
end;
thus L818: D157 is  "onto" by L805 , MSUALG_3:def 3;
thus L819: D157 is  order-sorted
proof
reconsider D170 = D159 as (OrderSortedSet of R1) by OSALG_1:17;
let C308 , C309 being (Element of R1);
assume that
L820: C308 <= C309;
L821: ( D170 . C308 ) c= ( D170 . C309 ) by L820 , OSALG_1:def 16;
let C310 being set;
assume that
L822: C310 in ( dom ( D157 . C308 ) );
L823: C310 in ( D159 . C308 ) by L822;
reconsider D171 = C310 as (Element of ( D159 . C309 )) by L823 , L821;
L824: ( dom ( D157 . C309 ) ) = ( D159 . C309 ) by FUNCT_2:def 1;
thus L825: C310 in ( dom ( D157 . C309 ) ) by L824 , L821 , L823;
reconsider D172 = C310 as (Element of ( D159 . C308 )) by L822;
thus L826: ( ( D157 . C308 ) . C310 ) = ( ( OSNat_Hom (C300 , C301 , C308) ) . D172 ) by L759
.= ( OSClass (C301 , D172) ) by L748
.= ( OSClass (C301 , D171) ) by L820 , L264
.= ( ( OSNat_Hom (C300 , C301 , C309) ) . D171 ) by L748
.= ( ( D157 . C309 ) . C310 ) by L759;
end;

end;
theorem
L820: (for R1 being  locally_directed OrderSortedSign holds (for B253 , B254 being  non-empty (OSAlgebra of R1) holds (for B255 being (ManySortedFunction of B253 , B254) holds ((B255 is_homomorphism B253 , B254 & B255 is  order-sorted) implies ( MSCng B255 ) is (OSCongruence of B253)))))
proof
let R1 being  locally_directed OrderSortedSign;
let C311 , C312 being  non-empty (OSAlgebra of R1);
let C313 being (ManySortedFunction of C311 , C312);
assume that
L821: C313 is_homomorphism C311 , C312
and
L822: C313 is  order-sorted;
reconsider D173 = (the Sorts of C311) as (OrderSortedSet of R1) by OSALG_1:17;
L823: ( MSCng C313 ) is  os-compatible
proof
let C314 , C315 being (Element of R1);
assume that
L824: C314 <= C315;
reconsider D174 = C314 , D175 = C315 as (SortSymbol of R1);
let C316 , C317 being set;
assume that
L825: (C316 in ( (the Sorts of C311) . C314 ) & C317 in ( (the Sorts of C311) . C314 ));
reconsider D176 = C316 , D177 = C317 as (Element of ( (the Sorts of C311) . C314 )) by L825;
L826: ( D173 . D174 ) c= ( D173 . D175 ) by L824 , OSALG_1:def 16;
reconsider D178 = C316 , D179 = C317 as (Element of ( (the Sorts of C311) . C315 )) by L826 , L825;
L827: ([ D178 , D179 ] in ( MSCng (C313 , C315) ) iff ( ( C313 . C315 ) . D178 ) = ( ( C313 . C315 ) . D179 )) by MSUALG_4:def 17;
L828: ( dom ( C313 . D174 ) ) = ( D173 . D174 ) by FUNCT_2:def 1;
L829: (( ( C313 . D174 ) . D176 ) = ( ( C313 . D175 ) . D176 ) & ( ( C313 . D174 ) . D177 ) = ( ( C313 . D175 ) . D177 )) by L828 , L822 , L824 , OSALG_3:def 1;
L830: ( ( MSCng C313 ) . C314 ) = ( MSCng (C313 , C314) ) by L821 , MSUALG_4:def 18;
thus L831: ([ C316 , C317 ] in ( ( MSCng C313 ) . C314 ) iff [ C316 , C317 ] in ( ( MSCng C313 ) . C315 )) by L830 , L821 , L827 , L829 , MSUALG_4:def 17 , MSUALG_4:def 18;
end;
thus L832: thesis by L823 , L37;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C318 , C319 being  non-empty (OSAlgebra of R1);
let C320 being (ManySortedFunction of C318 , C319);
assume L833: (C320 is_homomorphism C318 , C319 & C320 is  order-sorted);
func OSCng C320 -> (OSCongruence of C318) equals 
:L834: ( MSCng C320 );
correctness by L833 , L820;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C321 , C322 being  non-empty (OSAlgebra of R1);
let C323 being (ManySortedFunction of C321 , C322);
let C324 being (Element of R1);
assume that
L836: C323 is_homomorphism C321 , C322
and
L837: C323 is  order-sorted;
func OSHomQuot (C323 , C324) -> (Function of ( (the Sorts of ( QuotOSAlg (C321 , ( OSCng C323 )) )) . C324 ) , ( (the Sorts of C322) . C324 )) means 
:L838: (for B256 being (Element of ( (the Sorts of C321) . C324 )) holds ( it . ( OSClass (( OSCng C323 ) , B256) ) ) = ( ( C323 . C324 ) . B256 ));
existence
proof
set D180 = ( QuotOSAlg (C321 , ( OSCng C323 )) );
set D181 = (the Sorts of D180);
set D182 = (the Sorts of C321);
set D183 = (the Sorts of C322);
defpred S14[ set , set ] means (for B257 being (Element of ( D182 . C324 )) holds ($1 = ( OSClass (( OSCng C323 ) , B257) ) implies $2 = ( ( C323 . C324 ) . B257 )));
L839: ( D181 . C324 ) = ( OSClass (( OSCng C323 ) , C324) ) by L479;
L840: (for B258 being set holds (B258 in ( D181 . C324 ) implies (ex B259 being set st (B259 in ( D183 . C324 ) & S14[ B258 , B259 ]))))
proof
let C325 being set;
assume L841: C325 in ( D181 . C324 );
consider C326 being set such that L842: C326 in ( (the Sorts of C321) . C324 ) and L843: C325 = ( Class (( CompClass (( OSCng C323 ) , ( CComp C324 )) ) , C326) ) by L841 , L839 , L431;
reconsider D184 = C326 as (Element of ( D182 . C324 )) by L842;
take D185 = ( ( C323 . C324 ) . D184 );
thus L844: D185 in ( D183 . C324 );
let C327 being (Element of ( D182 . C324 ));
assume L845: C325 = ( OSClass (( OSCng C323 ) , C327) );
L846: C325 = ( OSClass (( OSCng C323 ) , D184) ) by L843;
L847: [ C327 , D184 ] in ( ( OSCng C323 ) . C324 ) by L846 , L845 , L511;
L848: [ C327 , D184 ] in ( ( MSCng C323 ) . C324 ) by L847 , L836 , L837 , L834;
L849: [ C327 , D184 ] in ( MSCng (C323 , C324) ) by L848 , L836 , MSUALG_4:def 18;
thus L850: thesis by L849 , MSUALG_4:def 17;
end;
consider C328 being Function such that L851: (( dom C328 ) = ( D181 . C324 ) & ( rng C328 ) c= ( D183 . C324 ) & (for B260 being set holds (B260 in ( D181 . C324 ) implies S14[ B260 , ( C328 . B260 ) ]))) from FUNCT_1:sch 5(L840);
reconsider D186 = C328 as (Function of ( D181 . C324 ) , ( D183 . C324 )) by L851 , FUNCT_2:def 1 , RELSET_1:4;
take D186;
let C329 being (Element of ( D182 . C324 ));
thus L852: thesis by L839 , L851;
end;
uniqueness
proof
set D187 = ( QuotOSAlg (C321 , ( OSCng C323 )) );
set D188 = (the Sorts of D187);
set D189 = (the Sorts of C321);
set D190 = (the Sorts of C322);
let C330 , C331 being (Function of ( D188 . C324 ) , ( D190 . C324 ));
assume that
L853: (for B261 being (Element of ( D189 . C324 )) holds ( C330 . ( OSClass (( OSCng C323 ) , B261) ) ) = ( ( C323 . C324 ) . B261 ))
and
L854: (for B262 being (Element of ( D189 . C324 )) holds ( C331 . ( OSClass (( OSCng C323 ) , B262) ) ) = ( ( C323 . C324 ) . B262 ));
L855: ( D188 . C324 ) = ( OSClass (( OSCng C323 ) , C324) ) by L479;
L856: (for B263 being set holds (B263 in ( D188 . C324 ) implies ( C330 . B263 ) = ( C331 . B263 )))
proof
let C332 being set;
assume L857: C332 in ( D188 . C324 );
consider C333 being set such that L858: C333 in ( (the Sorts of C321) . C324 ) and L859: C332 = ( Class (( CompClass (( OSCng C323 ) , ( CComp C324 )) ) , C333) ) by L857 , L855 , L431;
reconsider D191 = C333 as (Element of ( D189 . C324 )) by L858;
L860: ( OSClass (( OSCng C323 ) , D191) ) = C332 by L859;
thus L861: ( C330 . C332 ) = ( ( C323 . C324 ) . D191 ) by L860 , L853
.= ( C331 . C332 ) by L854 , L860;
end;
thus L862: thesis by L856 , FUNCT_2:12;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C334 , C335 being  non-empty (OSAlgebra of R1);
let C336 being (ManySortedFunction of C334 , C335);
func OSHomQuot C336 -> (ManySortedFunction of ( QuotOSAlg (C334 , ( OSCng C336 )) ) , C335) means 
:L864: (for B264 being (Element of R1) holds ( it . B264 ) = ( OSHomQuot (C336 , B264) ));
existence
proof
deffunc H8((Element of R1)) = ( OSHomQuot (C336 , $1) );
consider C337 being Function such that L865: (( dom C337 ) = (the carrier of R1) & (for B265 being (Element of R1) holds ( C337 . B265 ) = H8(B265))) from FUNCT_1:sch 4;
reconsider D192 = C337 as (ManySortedSet of (the carrier of R1)) by L865 , PARTFUN1:def 2 , RELAT_1:def 18;
L866: (for B266 being set holds (B266 in ( dom D192 ) implies ( D192 . B266 ) is Function))
proof
let C338 being set;
assume L867: C338 in ( dom D192 );
reconsider D193 = C338 as (Element of R1) by L867;
L868: ( D192 . D193 ) = ( OSHomQuot (C336 , D193) ) by L865;
thus L869: thesis by L868;
end;
reconsider D194 = D192 as (ManySortedFunction of (the carrier of R1)) by L866 , FUNCOP_1:def 6;
L870: (for B267 being set holds (B267 in (the carrier of R1) implies ( D194 . B267 ) is (Function of ( (the Sorts of ( QuotOSAlg (C334 , ( OSCng C336 )) )) . B267 ) , ( (the Sorts of C335) . B267 ))))
proof
let C339 being set;
assume L871: C339 in (the carrier of R1);
reconsider D195 = C339 as (Element of R1) by L871;
L872: ( D194 . D195 ) = ( OSHomQuot (C336 , D195) ) by L865;
thus L873: thesis by L872;
end;
reconsider D196 = D194 as (ManySortedFunction of (the Sorts of ( QuotOSAlg (C334 , ( OSCng C336 )) )) , (the Sorts of C335)) by L870 , PBOOLE:def 15;
reconsider D197 = D196 as (ManySortedFunction of ( QuotOSAlg (C334 , ( OSCng C336 )) ) , C335);
take D197;
thus L874: thesis by L865;
end;
uniqueness
proof
let C340 , C341 being (ManySortedFunction of ( QuotOSAlg (C334 , ( OSCng C336 )) ) , C335);
assume that
L875: (for B268 being (Element of R1) holds ( C340 . B268 ) = ( OSHomQuot (C336 , B268) ))
and
L876: (for B269 being (Element of R1) holds ( C341 . B269 ) = ( OSHomQuot (C336 , B269) ));
L877:
now
let C342 being set;
assume L878: C342 in (the carrier of R1);
reconsider D198 = C342 as (SortSymbol of R1) by L878;
L879: ( C340 . D198 ) = ( OSHomQuot (C336 , D198) ) by L875;
thus L880: ( C340 . C342 ) = ( C341 . C342 ) by L879 , L876;
end;
thus L881: thesis by L877 , PBOOLE:3;
end;
end;
theorem
L883: (for R1 being  locally_directed OrderSortedSign holds (for B270 , B271 being  non-empty (OSAlgebra of R1) holds (for B272 being (ManySortedFunction of B270 , B271) holds ((B272 is_homomorphism B270 , B271 & B272 is  order-sorted) implies (( OSHomQuot B272 ) is_monomorphism ( QuotOSAlg (B270 , ( OSCng B272 )) ) , B271 & ( OSHomQuot B272 ) is  order-sorted)))))
proof
let R1 being  locally_directed OrderSortedSign;
let C343 , C344 being  non-empty (OSAlgebra of R1);
let C345 being (ManySortedFunction of C343 , C344);
set D199 = ( OSCng C345 );
set D200 = ( QuotOSAlg (C343 , D199) );
set D201 = ( OSHomQuot C345 );
set D202 = (the Sorts of C343);
assume that
L884: C345 is_homomorphism C343 , C344
and
L885: C345 is  order-sorted;
L886: (for B273 being (Element of (the carrier' of R1)) holds (( Args (B273 , D200) ) <> ( {} ) implies (for B274 being (Element of ( Args (B273 , D200) )) holds ( ( D201 . ( the_result_sort_of B273 ) ) . ( ( Den (B273 , D200) ) . B274 ) ) = ( ( Den (B273 , C344) ) . ( D201 # B274 ) ))))
proof
let C346 being (Element of (the carrier' of R1));
assume that
L887: ( Args (C346 , D200) ) <> ( {} );
let C347 being (Element of ( Args (C346 , D200) ));
reconsider D203 = C346 as (OperSymbol of R1);
set D204 = ( the_result_sort_of C346 );
set D205 = ( the_arity_of C346 );
L888: ( dom C347 ) = ( dom D205 ) by MSUALG_3:6;
L889: ( Args (C346 , D200) ) = ( ( ( ( OSClass D199 ) # ) * (the Arity of R1) ) . C346 ) by MSUALG_1:def 4;
consider C348 being (Element of ( Args (C346 , C343) )) such that L890: C347 = ( D199 #_os C348 ) by L889 , L645;
L891: ( dom C348 ) = ( dom D205 ) by MSUALG_3:6;
L892:
now
let C349 being set;
assume L893: C349 in ( dom D205 );
reconsider D206 = C349 as Nat by L893;
L894: ( D205 . D206 ) in ( rng D205 ) by L893 , FUNCT_1:def 3;
reconsider D207 = ( D205 . D206 ) as (SortSymbol of R1) by L894;
L895: ( D205 /. D206 ) = ( D205 . D206 ) by L893 , PARTFUN1:def 6;
consider C350 being (Element of ( D202 . D207 )) such that L896: C350 = ( C348 . D206 ) and L897: ( C347 . D206 ) = ( OSClass (D199 , C350) ) by L895 , L890 , L893 , L532;
L898: ( ( D201 # C347 ) . D206 ) = ( ( D201 . D207 ) . ( C347 . D206 ) ) by L888 , L893 , L895 , MSUALG_3:def 6
.= ( ( OSHomQuot (C345 , D207) ) . ( OSClass (D199 , C350) ) ) by L897 , L864
.= ( ( C345 . D207 ) . C350 ) by L884 , L885 , L838
.= ( ( C345 # C348 ) . D206 ) by L891 , L893 , L895 , L896 , MSUALG_3:def 6;
thus L899: ( ( D201 # C347 ) . C349 ) = ( ( C345 # C348 ) . C349 ) by L898;
end;
L900: C346 in (the carrier' of R1);
L901: C346 in ( dom ( D202 * (the ResultSort of R1) ) ) by L900 , PARTFUN1:def 2;
L902: ( ( (the Sorts of C343) * (the ResultSort of R1) ) . C346 ) = ( (the Sorts of C343) . ( (the ResultSort of R1) . C346 ) ) by L901 , FUNCT_1:12
.= ( (the Sorts of C343) . D204 ) by MSUALG_1:def 2;
L903: (( rng ( Den (C346 , C343) ) ) c= ( Result (C346 , C343) ) & ( Result (C346 , C343) ) = ( D202 . D204 )) by L902 , MSUALG_1:def 5;
L904: ( rng ( Den (C346 , C343) ) ) c= ( dom ( OSQuotRes (D199 , C346) ) ) by L903 , L902 , FUNCT_2:def 1;
L905: (( dom ( Den (C346 , C343) ) ) = ( Args (C346 , C343) ) & ( dom ( ( OSQuotRes (D199 , C346) ) * ( Den (C346 , C343) ) ) ) = ( dom ( Den (C346 , C343) ) )) by L904 , FUNCT_2:def 1 , RELAT_1:27;
L906: D205 = ( (the Arity of R1) . C346 ) by MSUALG_1:def 1;
L907: ( product ( ( OSClass D199 ) * D205 ) ) = ( ( ( ( OSClass D199 ) # ) * (the Arity of R1) ) . C346 ) by L906 , MSAFREE:1;
reconsider D208 = ( ( Den (C346 , C343) ) . C348 ) as (Element of ( D202 . D204 )) by L902 , MSUALG_1:def 5;
L908: ( D201 . D204 ) = ( OSHomQuot (C345 , D204) ) by L864;
L909: ( Den (C346 , D200) ) = ( ( OSQuotCharact D199 ) . C346 ) by MSUALG_1:def 6
.= ( OSQuotCharact (D199 , D203) ) by L724;
L910: ( ( Den (C346 , D200) ) . C347 ) = ( ( ( OSQuotRes (D199 , C346) ) * ( Den (C346 , C343) ) ) . C348 ) by L909 , L890 , L907 , L682
.= ( ( OSQuotRes (D199 , C346) ) . D208 ) by L905 , FUNCT_1:12
.= ( OSClass (( OSCng C345 ) , D208) ) by L556;
L911: ( ( D201 . D204 ) . ( ( Den (C346 , D200) ) . C347 ) ) = ( ( C345 . D204 ) . ( ( Den (C346 , C343) ) . C348 ) ) by L910 , L884 , L885 , L908 , L838
.= ( ( Den (C346 , C344) ) . ( C345 # C348 ) ) by L884 , MSUALG_3:def 7;
L912: (( dom ( D201 # C347 ) ) = ( dom D205 ) & ( dom ( C345 # C348 ) ) = ( dom D205 )) by MSUALG_3:6;
thus L913: thesis by L912 , L892 , L911 , FUNCT_1:2;
end;
thus L914: D201 is_homomorphism D200 , C344 by L886 , MSUALG_3:def 7;
L915: (for B275 being set holds (B275 in (the carrier of R1) implies ( D201 . B275 ) is  one-to-one))
proof
let C351 being set;
set D209 = ( D201 . C351 );
assume L916: C351 in (the carrier of R1);
reconsider D210 = C351 as (SortSymbol of R1) by L916;
L917: D209 = ( OSHomQuot (C345 , D210) ) by L864;
L918: (for B276 , B277 being set holds ((B276 in ( dom D209 ) & B277 in ( dom D209 ) & ( D209 . B276 ) = ( D209 . B277 )) implies B276 = B277))
proof
let C352 , C353 being set;
assume that
L919: C352 in ( dom D209 )
and
L920: C353 in ( dom D209 )
and
L921: ( D209 . C352 ) = ( D209 . C353 );
L922: C353 in ( ( OSClass D199 ) . D210 ) by L917 , L920 , FUNCT_2:def 1;
L923: C353 in ( OSClass (D199 , D210) ) by L922 , L479;
consider C354 being set such that L924: C354 in ( D202 . D210 ) and L925: C353 = ( Class (( CompClass (( OSCng C345 ) , ( CComp D210 )) ) , C354) ) by L923 , L431;
reconsider D211 = C354 as (Element of ( D202 . D210 )) by L924;
L926: C353 = ( OSClass (( OSCng C345 ) , D211) ) by L925;
L927: C352 in ( ( OSClass D199 ) . D210 ) by L917 , L919 , FUNCT_2:def 1;
L928: C352 in ( OSClass (D199 , D210) ) by L927 , L479;
consider C355 being set such that L929: C355 in ( D202 . D210 ) and L930: C352 = ( Class (( CompClass (( OSCng C345 ) , ( CComp D210 )) ) , C355) ) by L928 , L431;
reconsider D212 = C355 as (Element of ( D202 . D210 )) by L929;
L931: (( ( C345 . D210 ) . D212 ) = ( D209 . ( OSClass (( OSCng C345 ) , D212) ) ) & ( ( C345 . D210 ) . D211 ) = ( D209 . ( OSClass (( OSCng C345 ) , D211) ) )) by L884 , L885 , L917 , L838;
L932: [ D212 , D211 ] in ( MSCng (C345 , D210) ) by L931 , L921 , L930 , L925 , MSUALG_4:def 17;
L933: [ D212 , D211 ] in ( ( MSCng C345 ) . D210 ) by L932 , L884 , MSUALG_4:def 18;
L934: [ D212 , D211 ] in ( ( OSCng C345 ) . D210 ) by L933 , L884 , L885 , L834;
L935: C352 = ( OSClass (( OSCng C345 ) , D212) ) by L930;
thus L936: thesis by L935 , L926 , L934 , L511;
end;
thus L937: thesis by L918 , FUNCT_1:def 4;
end;
thus L938: D201 is  "1-1" by L915 , MSUALG_3:1;
thus L939: ( OSHomQuot C345 ) is  order-sorted
proof
reconsider D213 = D202 as (OrderSortedSet of R1) by OSALG_1:17;
reconsider D214 = (the Sorts of D200) as (OrderSortedSet of R1);
let C356 , C357 being (Element of R1);
assume that
L940: C356 <= C357;
let C358 being set;
assume that
L941: C358 in ( dom ( D201 . C356 ) );
L942: C358 in ( ( OSClass ( OSCng C345 ) ) . C356 ) by L941;
L943: C358 in ( OSClass (( OSCng C345 ) , C356) ) by L942 , L479;
consider C359 being set such that L944: C359 in ( D202 . C356 ) and L945: C358 = ( Class (( CompClass (( OSCng C345 ) , ( CComp C356 )) ) , C359) ) by L943 , L431;
L946: ( D213 . C356 ) c= ( D213 . C357 ) by L940 , OSALG_1:def 16;
reconsider D215 = C359 as (Element of ( D202 . C357 )) by L946 , L944;
L947: C358 = ( OSClass (( OSCng C345 ) , D215) ) by L940 , L945 , L264;
reconsider D216 = C356 , D217 = C357 as (Element of R1);
L948: (( dom ( D201 . C356 ) ) = ( (the Sorts of D200) . C356 ) & ( dom ( D201 . C357 ) ) = ( (the Sorts of D200) . C357 )) by FUNCT_2:def 1;
reconsider D218 = C359 as (Element of ( D202 . C356 )) by L944;
L949: D218 in ( dom ( C345 . D216 ) ) by L944 , FUNCT_2:def 1;
L950: ( ( C345 . D216 ) . D218 ) = ( ( C345 . D217 ) . D218 ) by L949 , L885 , L940 , OSALG_3:def 1;
L951: ( D214 . C356 ) c= ( D214 . C357 ) by L940 , OSALG_1:def 16;
thus L952: C358 in ( dom ( D201 . C357 ) ) by L951 , L941 , L948;
thus L953: ( ( D201 . C356 ) . C358 ) = ( ( OSHomQuot (C345 , C356) ) . ( OSClass (( OSCng C345 ) , D218) ) ) by L945 , L864
.= ( ( C345 . C357 ) . D218 ) by L884 , L885 , L950 , L838
.= ( ( OSHomQuot (C345 , C357) ) . ( OSClass (( OSCng C345 ) , D215) ) ) by L884 , L885 , L838
.= ( ( D201 . C357 ) . C358 ) by L947 , L864;
end;

end;
theorem
L940: (for R1 being  locally_directed OrderSortedSign holds (for B278 , B279 being  non-empty (OSAlgebra of R1) holds (for B280 being (ManySortedFunction of B278 , B279) holds ((B280 is_epimorphism B278 , B279 & B280 is  order-sorted) implies ( OSHomQuot B280 ) is_isomorphism ( QuotOSAlg (B278 , ( OSCng B280 )) ) , B279))))
proof
let R1 being  locally_directed OrderSortedSign;
let C360 , C361 being  non-empty (OSAlgebra of R1);
let C362 being (ManySortedFunction of C360 , C361);
set D219 = ( OSCng C362 );
set D220 = ( QuotOSAlg (C360 , D219) );
set D221 = ( OSHomQuot C362 );
assume that
L941: C362 is_epimorphism C360 , C361
and
L942: C362 is  order-sorted;
set D222 = (the Sorts of D220);
set D223 = (the Sorts of C360);
set D224 = (the Sorts of C361);
L943: C362 is_homomorphism C360 , C361 by L941 , MSUALG_3:def 8;
L944: C362 is  "onto" by L941 , MSUALG_3:def 8;
L945: (for B281 being set holds (B281 in (the carrier of R1) implies ( rng ( D221 . B281 ) ) = ( D224 . B281 )))
proof
let C363 being set;
set D225 = ( D221 . C363 );
assume L946: C363 in (the carrier of R1);
reconsider D226 = C363 as (SortSymbol of R1) by L946;
L947: ( rng ( C362 . D226 ) ) = ( D224 . D226 ) by L944 , MSUALG_3:def 3;
L948: ( D221 . C363 ) = ( OSHomQuot (C362 , D226) ) by L864;
L949: ( dom D225 ) = ( D222 . D226 ) by L948 , FUNCT_2:def 1;
thus L950: ( rng D225 ) c= ( D224 . C363 ) by L948 , RELAT_1:def 19;
let C364 being set;
assume L951: C364 in ( D224 . C363 );
consider C365 being set such that L952: C365 in ( dom ( C362 . D226 ) ) and L953: ( ( C362 . D226 ) . C365 ) = C364 by L951 , L947 , FUNCT_1:def 3;
L954: ( D222 . D226 ) = ( OSClass (( OSCng C362 ) , D226) ) by L479;
reconsider D227 = C365 as (Element of ( D223 . D226 )) by L952;
L955: ( D225 . ( OSClass (( OSCng C362 ) , D227) ) ) = C364 by L942 , L943 , L948 , L953 , L838;
thus L956: thesis by L955 , L949 , L954 , FUNCT_1:def 3;
end;
L957: D221 is  "onto" by L945 , MSUALG_3:def 3;
L958: D221 is_monomorphism D220 , C361 by L942 , L943 , L883;
L959: (D221 is_homomorphism D220 , C361 & D221 is  "1-1") by L958 , MSUALG_3:def 9;
thus L960: thesis by L959 , L957 , MSUALG_3:13;
end;
theorem
L961: (for R1 being  locally_directed OrderSortedSign holds (for B282 , B283 being  non-empty (OSAlgebra of R1) holds (for B284 being (ManySortedFunction of B282 , B283) holds ((B284 is_epimorphism B282 , B283 & B284 is  order-sorted) implies ( QuotOSAlg (B282 , ( OSCng B284 )) ) , B283 are_isomorphic ))))
proof
let R1 being  locally_directed OrderSortedSign;
let C366 , C367 being  non-empty (OSAlgebra of R1);
let C368 being (ManySortedFunction of C366 , C367);
assume L962: (C368 is_epimorphism C366 , C367 & C368 is  order-sorted);
L963: ( OSHomQuot C368 ) is_isomorphism ( QuotOSAlg (C366 , ( OSCng C368 )) ) , C367 by L962 , L940;
thus L964: thesis by L963 , MSUALG_3:def 11;
end;
definition
let C369 being OrderSortedSign;
let C370 being  non-empty (OSAlgebra of C369);
let C371 being  MSEquivalence-like (OrderSortedRelation of C370);
attr C371 is  monotone
means
:L965: (for B285 , B286 being (OperSymbol of C369) holds (B285 <= B286 implies (for B287 being (Element of ( Args (B285 , C370) )) holds (for B288 being (Element of ( Args (B286 , C370) )) holds ((for B289 being Nat holds (B289 in ( dom B287 ) implies [ ( B287 . B289 ) , ( B288 . B289 ) ] in ( C371 . ( ( the_arity_of B286 ) /. B289 ) ))) implies [ ( ( Den (B285 , C370) ) . B287 ) , ( ( Den (B286 , C370) ) . B288 ) ] in ( C371 . ( the_result_sort_of B286 ) ))))));
end;
theorem
L967: (for B290 being OrderSortedSign holds (for B291 being  non-empty (OSAlgebra of B290) holds [| (the Sorts of B291) , (the Sorts of B291) |] is (OSCongruence of B291)))
proof
let C372 being OrderSortedSign;
let C373 being  non-empty (OSAlgebra of C372);
reconsider D228 = [| (the Sorts of C373) , (the Sorts of C373) |] as (MSCongruence of C373) by MSUALG_5:18;
L968: D228 is  os-compatible
proof
reconsider D229 = (the Sorts of C373) as (OrderSortedSet of C372) by OSALG_1:17;
let C374 , C375 being (Element of C372);
assume that
L969: C374 <= C375;
reconsider D230 = C374 , D231 = C375 as (Element of C372);
L970: ( D229 . D230 ) c= ( D229 . D231 ) by L969 , OSALG_1:def 16;
L971: (( D228 . C374 ) = [: ( (the Sorts of C373) . C374 ) , ( (the Sorts of C373) . C374 ) :] & ( D228 . C375 ) = [: ( (the Sorts of C373) . C375 ) , ( (the Sorts of C373) . C375 ) :]) by PBOOLE:def 16;
let C376 , C377 being set;
assume L972: (C376 in ( (the Sorts of C373) . C374 ) & C377 in ( (the Sorts of C373) . C374 ));
thus L973: ([ C376 , C377 ] in ( D228 . C374 ) iff [ C376 , C377 ] in ( D228 . C375 )) by L972 , L970 , L971 , ZFMISC_1:87;
end;
thus L974: thesis by L968 , L37;
end;
theorem
L975: (for B292 being OrderSortedSign holds (for B293 being  non-empty (OSAlgebra of B292) holds (for B294 being (OSCongruence of B293) holds (B294 = [| (the Sorts of B293) , (the Sorts of B293) |] implies B294 is  monotone))))
proof
let C378 being OrderSortedSign;
let C379 being  non-empty (OSAlgebra of C378);
let C380 being (OSCongruence of C379);
assume that
L976: C380 = [| (the Sorts of C379) , (the Sorts of C379) |];
reconsider D232 = (the Sorts of C379) as (OrderSortedSet of C378) by OSALG_1:17;
let C381 , C382 being (OperSymbol of C378);
assume that
L977: C381 <= C382;
set D233 = ( the_result_sort_of C382 );
set D234 = ( the_result_sort_of C381 );
L978: D234 <= D233 by L977 , OSALG_1:def 20;
L979: ( D232 . D234 ) c= ( D232 . D233 ) by L978 , OSALG_1:def 16;
let C383 being (Element of ( Args (C381 , C379) ));
let C384 being (Element of ( Args (C382 , C379) ));
assume that
L980: (for B295 being Nat holds (B295 in ( dom C383 ) implies [ ( C383 . B295 ) , ( C384 . B295 ) ] in ( C380 . ( ( the_arity_of C382 ) /. B295 ) )));
L981: (( ( Den (C381 , C379) ) . C383 ) in ( (the Sorts of C379) . D234 ) & ( ( Den (C382 , C379) ) . C384 ) in ( (the Sorts of C379) . D233 )) by MSUALG_9:18;
L982: ( C380 . D233 ) = [: ( (the Sorts of C379) . D233 ) , ( (the Sorts of C379) . D233 ) :] by L976 , PBOOLE:def 16;
thus L983: thesis by L982 , L979 , L981 , ZFMISC_1:87;
end;
registration
let C385 being OrderSortedSign;
let C386 being  non-empty (OSAlgebra of C385);
cluster  monotone for (OSCongruence of C386);
existence
proof
reconsider D235 = [| (the Sorts of C386) , (the Sorts of C386) |] as (OSCongruence of C386) by L967;
take D235;
thus L984: thesis by L975;
end;
end;
registration
let C387 being OrderSortedSign;
let C388 being  non-empty (OSAlgebra of C387);
cluster  monotone for  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like (OrderSortedRelation of C388);
existence
proof
set D236 = the  monotone (OSCongruence of C388);
take D236;
thus L986: thesis;
end;
end;
theorem
L988: (for B296 being OrderSortedSign holds (for B297 being  non-empty (OSAlgebra of B296) holds (for B298 being  monotone  MSEquivalence-like (OrderSortedRelation of B297) holds B298 is  MSCongruence-like)))
proof
let C389 being OrderSortedSign;
let C390 being  non-empty (OSAlgebra of C389);
let C391 being  monotone  MSEquivalence-like (OrderSortedRelation of C390);
L989: (for B299 being (Element of (the carrier' of C389)) holds (for B300 , B301 being (Element of ( Args (B299 , C390) )) holds ((for B302 being Nat holds (B302 in ( dom B300 ) implies [ ( B300 . B302 ) , ( B301 . B302 ) ] in ( C391 . ( ( the_arity_of B299 ) /. B302 ) ))) implies [ ( ( Den (B299 , C390) ) . B300 ) , ( ( Den (B299 , C390) ) . B301 ) ] in ( C391 . ( the_result_sort_of B299 ) )))) by L965;
thus L990: thesis by L989 , MSUALG_4:def 4;
end;
registration
let C392 being OrderSortedSign;
let C393 being  non-empty (OSAlgebra of C392);
cluster  monotone ->  MSCongruence-like for  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like (OrderSortedRelation of C393);
coherence by L988;
end;
theorem
L992: (for B303 being OrderSortedSign holds (for B304 being  monotone  non-empty (OSAlgebra of B303) holds (for B305 being (OSCongruence of B304) holds B305 is  monotone)))
proof
let C394 being OrderSortedSign;
let C395 being  monotone  non-empty (OSAlgebra of C394);
let C396 being (OSCongruence of C395);
let C397 , C398 being (OperSymbol of C394);
assume that
L993: C397 <= C398;
let C399 being (Element of ( Args (C397 , C395) ));
L994: ( Args (C397 , C395) ) c= ( Args (C398 , C395) ) by L993 , OSALG_1:26;
reconsider D237 = C399 as (Element of ( Args (C398 , C395) )) by L994 , TARSKI:def 3;
let C400 being (Element of ( Args (C398 , C395) ));
assume L995: (for B306 being Nat holds (B306 in ( dom C399 ) implies [ ( C399 . B306 ) , ( C400 . B306 ) ] in ( C396 . ( ( the_arity_of C398 ) /. B306 ) )));
L996: [ ( ( Den (C398 , C395) ) . D237 ) , ( ( Den (C398 , C395) ) . C400 ) ] in ( C396 . ( the_result_sort_of C398 ) ) by L995 , MSUALG_4:def 4;
L997: C399 in ( Args (C397 , C395) );
L998: C399 in ( dom ( Den (C397 , C395) ) ) by L997 , FUNCT_2:def 1;
L999: ( Den (C397 , C395) ) c= ( Den (C398 , C395) ) by L993 , OSALG_1:27;
thus L1000: thesis by L999 , L996 , L998 , GRFUNC_1:2;
end;
registration
let C401 being OrderSortedSign;
let C402 being  monotone  non-empty (OSAlgebra of C401);
cluster  ->  monotone for (OSCongruence of C402);
coherence by L992;
end;
registration
let R1 being  locally_directed OrderSortedSign;
let C403 being  non-empty (OSAlgebra of R1);
let C404 being  monotone (OSCongruence of C403);
cluster ( QuotOSAlg (C403 , C404) ) ->  monotone;
coherence
proof
reconsider D238 = (the Sorts of C403) as (OrderSortedSet of R1) by OSALG_1:17;
set D239 = ( QuotOSAlg (C403 , C404) );
let C405 , C406 being (OperSymbol of R1);
assume that
L1002: C405 <= C406;
L1003: ( Args (C405 , D239) ) c= ( Args (C406 , D239) ) by L1002 , OSALG_1:26;
L1004: ( Den (C406 , D239) ) = ( ( OSQuotCharact C404 ) . C406 ) by MSUALG_1:def 6;
L1005: ( Den (C406 , D239) ) = ( OSQuotCharact (C404 , C406) ) by L1004 , L724;
L1006: C406 in (the carrier' of R1);
L1007: C406 in ( dom (the ResultSort of R1) ) by L1006 , FUNCT_2:def 1;
L1008: ( Den (C405 , D239) ) = ( ( OSQuotCharact C404 ) . C405 ) by MSUALG_1:def 6;
L1009: ( Den (C405 , D239) ) = ( OSQuotCharact (C404 , C405) ) by L1008 , L724;
L1010: C405 in (the carrier' of R1);
L1011: C405 in ( dom (the ResultSort of R1) ) by L1010 , FUNCT_2:def 1;
L1012: ( the_arity_of C405 ) <= ( the_arity_of C406 ) by L1002 , OSALG_1:def 20;
L1013: ( len ( the_arity_of C405 ) ) = ( len ( the_arity_of C406 ) ) by L1012 , OSALG_1:def 6;
L1014: ( dom ( the_arity_of C405 ) ) = ( dom ( the_arity_of C406 ) ) by L1013 , FINSEQ_3:29;
L1015: ( the_result_sort_of C405 ) <= ( the_result_sort_of C406 ) by L1002 , OSALG_1:def 20;
L1016: ( D238 . ( the_result_sort_of C405 ) ) c= ( D238 . ( the_result_sort_of C406 ) ) by L1015 , OSALG_1:def 17;
L1017: (for B307 being set holds (B307 in ( dom ( Den (C405 , D239) ) ) implies ( ( Den (C405 , D239) ) . B307 ) = ( ( Den (C406 , D239) ) . B307 )))
proof
let C407 being set;
assume L1018: C407 in ( dom ( Den (C405 , D239) ) );
L1019: C407 in ( Args (C405 , D239) ) by L1018;
L1020: C407 in ( ( ( ( OSClass C404 ) # ) * (the Arity of R1) ) . C405 ) by L1019 , MSUALG_1:def 4;
consider C408 being (Element of ( Args (C405 , C403) )) such that L1021: C407 = ( C404 #_os C408 ) by L1020 , L645;
L1022: ( Result (C405 , C403) ) = ( ( (the Sorts of C403) * (the ResultSort of R1) ) . C405 ) by MSUALG_1:def 5
.= ( (the Sorts of C403) . ( (the ResultSort of R1) . C405 ) ) by L1011 , FUNCT_1:13
.= ( (the Sorts of C403) . ( the_result_sort_of C405 ) ) by MSUALG_1:def 2;
reconsider D240 = ( ( Den (C405 , C403) ) . C408 ) as (Element of ( (the Sorts of C403) . ( the_result_sort_of C405 ) )) by L1022;
reconsider D241 = D240 as (Element of ( (the Sorts of C403) . ( the_result_sort_of C406 ) )) by L1016 , TARSKI:def 3;
L1023: C408 in ( Args (C405 , C403) );
L1024: C408 in ( dom ( Den (C405 , C403) ) ) by L1023 , FUNCT_2:def 1;
L1025: ( ( ( OSQuotRes (C404 , C405) ) * ( Den (C405 , C403) ) ) . C408 ) = ( ( OSQuotRes (C404 , C405) ) . D240 ) by L1024 , FUNCT_1:13
.= ( OSClass (C404 , D240) ) by L556;
L1026: ( ( OSQuotCharact (C404 , C405) ) . ( C404 #_os C408 ) ) = ( ( ( OSQuotRes (C404 , C405) ) * ( Den (C405 , C403) ) ) . C408 ) by L1020 , L1021 , L682;
L1027: C407 in ( Args (C406 , D239) ) by L1003 , L1019;
L1028: C407 in ( ( ( ( OSClass C404 ) # ) * (the Arity of R1) ) . C406 ) by L1027 , MSUALG_1:def 4;
consider C409 being (Element of ( Args (C406 , C403) )) such that L1029: C407 = ( C404 #_os C409 ) by L1028 , L645;
L1030: (for B308 being Nat holds (B308 in ( dom C408 ) implies [ ( C408 . B308 ) , ( C409 . B308 ) ] in ( C404 . ( ( the_arity_of C406 ) /. B308 ) )))
proof
let C410 being Nat;
assume that
L1031: C410 in ( dom C408 );
L1032: C410 in ( dom ( the_arity_of C405 ) ) by L1031 , MSUALG_6:2;
consider C411 being (Element of ( (the Sorts of C403) . ( ( the_arity_of C405 ) /. C410 ) )) such that L1033: C411 = ( C408 . C410 ) and L1034: ( ( C404 #_os C408 ) . C410 ) = ( OSClass (C404 , C411) ) by L1032 , L532;
reconsider D242 = ( ( the_arity_of C405 ) . C410 ) , D243 = ( ( the_arity_of C406 ) . C410 ) as (SortSymbol of R1) by L1014 , L1032 , PARTFUN1:4;
L1035: C410 in ( dom ( the_arity_of C406 ) ) by L1014 , L1031 , MSUALG_6:2;
L1036: ( ( the_arity_of C406 ) /. C410 ) = ( ( the_arity_of C406 ) . C410 ) by L1035 , PARTFUN1:def 6;
L1037: (( ( the_arity_of C405 ) /. C410 ) = ( ( the_arity_of C405 ) . C410 ) & D242 <= D243) by L1012 , L1032 , OSALG_1:def 6 , PARTFUN1:def 6;
L1038: ( (the Sorts of C403) . ( ( the_arity_of C405 ) /. C410 ) ) c= ( (the Sorts of C403) . ( ( the_arity_of C406 ) /. C410 ) ) by L1037 , L1036 , OSALG_1:def 17;
reconsider D244 = C411 as (Element of ( (the Sorts of C403) . ( ( the_arity_of C406 ) /. C410 ) )) by L1038 , TARSKI:def 3;
consider C412 being (Element of ( (the Sorts of C403) . ( ( the_arity_of C406 ) /. C410 ) )) such that L1039: C412 = ( C409 . C410 ) and L1040: ( ( C404 #_os C409 ) . C410 ) = ( OSClass (C404 , C412) ) by L1035 , L532;
L1041: ( OSClass (C404 , C412) ) = ( OSClass (C404 , D244) ) by L1021 , L1029 , L1034 , L1040 , L1036 , L1037 , L264;
thus L1042: thesis by L1041 , L1033 , L1039 , L511;
end;
L1043: [ ( ( Den (C405 , C403) ) . C408 ) , ( ( Den (C406 , C403) ) . C409 ) ] in ( C404 . ( the_result_sort_of C406 ) ) by L1030 , L1002 , L965;
L1044: ( Result (C406 , C403) ) = ( ( (the Sorts of C403) * (the ResultSort of R1) ) . C406 ) by MSUALG_1:def 5
.= ( (the Sorts of C403) . ( (the ResultSort of R1) . C406 ) ) by L1007 , FUNCT_1:13
.= ( (the Sorts of C403) . ( the_result_sort_of C406 ) ) by MSUALG_1:def 2;
reconsider D245 = ( ( Den (C406 , C403) ) . C409 ) as (Element of ( (the Sorts of C403) . ( the_result_sort_of C406 ) )) by L1044;
L1045: C409 in ( Args (C406 , C403) );
L1046: C409 in ( dom ( Den (C406 , C403) ) ) by L1045 , FUNCT_2:def 1;
L1047: ( ( ( OSQuotRes (C404 , C406) ) * ( Den (C406 , C403) ) ) . C409 ) = ( ( OSQuotRes (C404 , C406) ) . D245 ) by L1046 , FUNCT_1:13
.= ( OSClass (C404 , D245) ) by L556;
L1048: ( OSClass (C404 , D240) ) = ( OSClass (C404 , D241) ) by L1015 , L264
.= ( OSClass (C404 , D245) ) by L1043 , L511;
thus L1049: thesis by L1048 , L1009 , L1005 , L1028 , L1021 , L1029 , L1026 , L1025 , L1047 , L682;
end;
L1050: (( dom ( Den (C406 , D239) ) ) = ( Args (C406 , D239) ) & ( dom ( Den (C405 , D239) ) ) = ( Args (C405 , D239) )) by FUNCT_2:def 1;
L1051: ( dom ( Den (C405 , D239) ) ) = ( ( dom ( Den (C406 , D239) ) ) /\ ( Args (C405 , D239) ) ) by L1050 , L1003 , XBOOLE_1:28;
thus L1052: thesis by L1051 , L1017 , FUNCT_1:46;
end;
end;
theorem
L1054: (for R1 being  locally_directed OrderSortedSign holds (for B309 being  non-empty (OSAlgebra of R1) holds (for B310 being  monotone  non-empty (OSAlgebra of R1) holds (for B311 being (ManySortedFunction of B309 , B310) holds ((B311 is_homomorphism B309 , B310 & B311 is  order-sorted) implies ( OSCng B311 ) is  monotone)))))
proof
let R1 being  locally_directed OrderSortedSign;
let C413 being  non-empty (OSAlgebra of R1);
let C414 being  monotone  non-empty (OSAlgebra of R1);
let C415 being (ManySortedFunction of C413 , C414);
assume that
L1055: C415 is_homomorphism C413 , C414
and
L1056: C415 is  order-sorted;
reconsider D246 = (the Sorts of C413) as (OrderSortedSet of R1) by OSALG_1:17;
set D247 = (the Sorts of C413);
let C416 , C417 being (OperSymbol of R1);
assume that
L1057: C416 <= C417;
L1058: ( ( Den (C417 , C414) ) | ( Args (C416 , C414) ) ) = ( Den (C416 , C414) ) by L1057 , OSALG_1:def 21;
set D248 = ( OSCng C415 );
set D249 = ( the_result_sort_of C416 );
set D250 = ( the_result_sort_of C417 );
let C418 being (Element of ( Args (C416 , C413) ));
let C419 being (Element of ( Args (C417 , C413) ));
assume that
L1059: (for B312 being Nat holds (B312 in ( dom C418 ) implies [ ( C418 . B312 ) , ( C419 . B312 ) ] in ( D248 . ( ( the_arity_of C417 ) /. B312 ) )));
L1060: ( Args (C416 , C413) ) c= ( Args (C417 , C413) ) by L1057 , OSALG_1:26;
reconsider D251 = C418 as (Element of ( Args (C417 , C413) )) by L1060 , TARSKI:def 3;
set D252 = ( ( Den (C416 , C413) ) . C418 );
set D253 = ( ( Den (C417 , C413) ) . C419 );
set D254 = ( MSCng C415 );
L1061: D252 in ( D246 . D249 ) by MSUALG_9:18;
L1062: ( C415 # C418 ) in ( Args (C416 , C414) );
L1063: ( C415 # C418 ) in ( dom ( Den (C416 , C414) ) ) by L1062 , FUNCT_2:def 1;
L1064: D249 <= D250 by L1057 , OSALG_1:def 20;
L1065: ( D246 . D249 ) c= ( D246 . D250 ) by L1064 , OSALG_1:def 16;
reconsider D255 = D252 , D256 = ( ( Den (C417 , C413) ) . D251 ) as (Element of ( D247 . D250 )) by L1065 , L1061 , MSUALG_9:18;
L1066: D252 in ( dom ( C415 . D249 ) ) by L1061 , FUNCT_2:def 1;
L1067: ( ( C415 . D250 ) . ( ( Den (C416 , C413) ) . C418 ) ) = ( ( C415 . D249 ) . ( ( Den (C416 , C413) ) . C418 ) ) by L1066 , L1056 , L1064 , OSALG_3:def 1
.= ( ( Den (C416 , C414) ) . ( C415 # C418 ) ) by L1055 , MSUALG_3:def 7
.= ( ( Den (C417 , C414) ) . ( C415 # C418 ) ) by L1063 , L1058 , FUNCT_1:47
.= ( ( Den (C417 , C414) ) . ( C415 # D251 ) ) by L1056 , L1057 , OSALG_3:12
.= ( ( C415 . D250 ) . ( ( Den (C417 , C413) ) . D251 ) ) by L1055 , MSUALG_3:def 7;
L1068: (D253 in ( D247 . D250 ) & [ D255 , D256 ] in ( MSCng (C415 , D250) )) by L1067 , MSUALG_4:def 17 , MSUALG_9:18;
L1069: ( field ( D248 . D250 ) ) = ( D247 . D250 ) by ORDERS_1:12;
L1070: ( D248 . D250 ) is_transitive_in ( D247 . D250 ) by L1069 , RELAT_2:def 16;
L1071: [ ( ( Den (C417 , C413) ) . D251 ) , ( ( Den (C417 , C413) ) . C419 ) ] in ( D248 . D250 ) by L1059 , MSUALG_4:def 4;
L1072: (( D254 . D250 ) = ( MSCng (C415 , D250) ) & D254 = D248) by L1055 , L1056 , L834 , MSUALG_4:def 18;
thus L1073: thesis by L1072 , L1071 , L1068 , L1070 , RELAT_2:def 8;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C420 , C421 being  non-empty (OSAlgebra of R1);
let C422 being (ManySortedFunction of C420 , C421);
let C423 being (OSCongruence of C420);
let C424 being (Element of R1);
assume that
L1074: C422 is_homomorphism C420 , C421
and
L1075: C422 is  order-sorted
and
L1076: C423 c= ( OSCng C422 );
func OSHomQuot (C422 , C423 , C424) -> (Function of ( (the Sorts of ( QuotOSAlg (C420 , C423) )) . C424 ) , ( (the Sorts of C421) . C424 )) means 
:L1077: (for B313 being (Element of ( (the Sorts of C420) . C424 )) holds ( it . ( OSClass (C423 , B313) ) ) = ( ( C422 . C424 ) . B313 ));
existence
proof
set D257 = ( QuotOSAlg (C420 , C423) );
set D258 = (the Sorts of D257);
set D259 = (the Sorts of C420);
set D260 = (the Sorts of C421);
defpred S15[ set , set ] means (for B314 being (Element of ( D259 . C424 )) holds ($1 = ( OSClass (C423 , B314) ) implies $2 = ( ( C422 . C424 ) . B314 )));
L1078: ( D258 . C424 ) = ( OSClass (C423 , C424) ) by L479;
L1079: (for B315 being set holds (B315 in ( D258 . C424 ) implies (ex B316 being set st (B316 in ( D260 . C424 ) & S15[ B315 , B316 ]))))
proof
let C425 being set;
L1080: ( C423 . C424 ) c= ( ( OSCng C422 ) . C424 ) by L1076 , PBOOLE:def 2;
assume L1081: C425 in ( D258 . C424 );
consider C426 being set such that L1082: C426 in ( (the Sorts of C420) . C424 ) and L1083: C425 = ( Class (( CompClass (C423 , ( CComp C424 )) ) , C426) ) by L1081 , L1078 , L431;
reconsider D261 = C426 as (Element of ( D259 . C424 )) by L1082;
take D262 = ( ( C422 . C424 ) . D261 );
thus L1084: D262 in ( D260 . C424 );
let C427 being (Element of ( D259 . C424 ));
assume L1085: C425 = ( OSClass (C423 , C427) );
L1086: C425 = ( OSClass (C423 , D261) ) by L1083;
L1087: [ C427 , D261 ] in ( C423 . C424 ) by L1086 , L1085 , L511;
L1088: [ C427 , D261 ] in ( ( OSCng C422 ) . C424 ) by L1087 , L1080;
L1089: [ C427 , D261 ] in ( ( MSCng C422 ) . C424 ) by L1088 , L1074 , L1075 , L834;
L1090: [ C427 , D261 ] in ( MSCng (C422 , C424) ) by L1089 , L1074 , MSUALG_4:def 18;
thus L1091: thesis by L1090 , MSUALG_4:def 17;
end;
consider C428 being Function such that L1092: (( dom C428 ) = ( D258 . C424 ) & ( rng C428 ) c= ( D260 . C424 ) & (for B317 being set holds (B317 in ( D258 . C424 ) implies S15[ B317 , ( C428 . B317 ) ]))) from FUNCT_1:sch 5(L1079);
reconsider D263 = C428 as (Function of ( D258 . C424 ) , ( D260 . C424 )) by L1092 , FUNCT_2:def 1 , RELSET_1:4;
take D263;
let C429 being (Element of ( D259 . C424 ));
thus L1093: thesis by L1078 , L1092;
end;
uniqueness
proof
set D264 = ( QuotOSAlg (C420 , C423) );
set D265 = (the Sorts of D264);
set D266 = (the Sorts of C420);
set D267 = (the Sorts of C421);
let C430 , C431 being (Function of ( D265 . C424 ) , ( D267 . C424 ));
assume that
L1094: (for B318 being (Element of ( D266 . C424 )) holds ( C430 . ( OSClass (C423 , B318) ) ) = ( ( C422 . C424 ) . B318 ))
and
L1095: (for B319 being (Element of ( D266 . C424 )) holds ( C431 . ( OSClass (C423 , B319) ) ) = ( ( C422 . C424 ) . B319 ));
L1096: ( D265 . C424 ) = ( OSClass (C423 , C424) ) by L479;
L1097: (for B320 being set holds (B320 in ( D265 . C424 ) implies ( C430 . B320 ) = ( C431 . B320 )))
proof
let C432 being set;
assume L1098: C432 in ( D265 . C424 );
consider C433 being set such that L1099: C433 in ( (the Sorts of C420) . C424 ) and L1100: C432 = ( Class (( CompClass (C423 , ( CComp C424 )) ) , C433) ) by L1098 , L1096 , L431;
reconsider D268 = C433 as (Element of ( D266 . C424 )) by L1099;
L1101: ( OSClass (C423 , D268) ) = C432 by L1100;
thus L1102: ( C430 . C432 ) = ( ( C422 . C424 ) . D268 ) by L1101 , L1094
.= ( C431 . C432 ) by L1095 , L1101;
end;
thus L1103: thesis by L1097 , FUNCT_2:12;
end;
end;
definition
let R1 being  locally_directed OrderSortedSign;
let C434 , C435 being  non-empty (OSAlgebra of R1);
let C436 being (ManySortedFunction of C434 , C435);
let C437 being (OSCongruence of C434);
func OSHomQuot (C436 , C437) -> (ManySortedFunction of ( QuotOSAlg (C434 , C437) ) , C435) means 
:L1105: (for B321 being (Element of R1) holds ( it . B321 ) = ( OSHomQuot (C436 , C437 , B321) ));
existence
proof
deffunc H9((Element of R1)) = ( OSHomQuot (C436 , C437 , $1) );
consider C438 being Function such that L1106: (( dom C438 ) = (the carrier of R1) & (for B322 being (Element of R1) holds ( C438 . B322 ) = H9(B322))) from FUNCT_1:sch 4;
reconsider D269 = C438 as (ManySortedSet of (the carrier of R1)) by L1106 , PARTFUN1:def 2 , RELAT_1:def 18;
L1107: (for B323 being set holds (B323 in ( dom D269 ) implies ( D269 . B323 ) is Function))
proof
let C439 being set;
assume L1108: C439 in ( dom D269 );
reconsider D270 = C439 as (Element of R1) by L1108;
L1109: ( D269 . D270 ) = ( OSHomQuot (C436 , C437 , D270) ) by L1106;
thus L1110: thesis by L1109;
end;
reconsider D271 = D269 as (ManySortedFunction of (the carrier of R1)) by L1107 , FUNCOP_1:def 6;
L1111: (for B324 being set holds (B324 in (the carrier of R1) implies ( D271 . B324 ) is (Function of ( (the Sorts of ( QuotOSAlg (C434 , C437) )) . B324 ) , ( (the Sorts of C435) . B324 ))))
proof
let C440 being set;
assume L1112: C440 in (the carrier of R1);
reconsider D272 = C440 as (Element of R1) by L1112;
L1113: ( D271 . D272 ) = ( OSHomQuot (C436 , C437 , D272) ) by L1106;
thus L1114: thesis by L1113;
end;
reconsider D273 = D271 as (ManySortedFunction of (the Sorts of ( QuotOSAlg (C434 , C437) )) , (the Sorts of C435)) by L1111 , PBOOLE:def 15;
reconsider D274 = D273 as (ManySortedFunction of ( QuotOSAlg (C434 , C437) ) , C435);
take D274;
thus L1115: thesis by L1106;
end;
uniqueness
proof
let C441 , C442 being (ManySortedFunction of ( QuotOSAlg (C434 , C437) ) , C435);
assume that
L1116: (for B325 being (Element of R1) holds ( C441 . B325 ) = ( OSHomQuot (C436 , C437 , B325) ))
and
L1117: (for B326 being (Element of R1) holds ( C442 . B326 ) = ( OSHomQuot (C436 , C437 , B326) ));
L1118:
now
let C443 being set;
assume L1119: C443 in (the carrier of R1);
reconsider D275 = C443 as (SortSymbol of R1) by L1119;
L1120: ( C441 . D275 ) = ( OSHomQuot (C436 , C437 , D275) ) by L1116;
thus L1121: ( C441 . C443 ) = ( C442 . C443 ) by L1120 , L1117;
end;
thus L1122: thesis by L1118 , PBOOLE:3;
end;
end;
theorem
L1124: (for R1 being  locally_directed OrderSortedSign holds (for B327 , B328 being  non-empty (OSAlgebra of R1) holds (for B329 being (ManySortedFunction of B327 , B328) holds (for B330 being (OSCongruence of B327) holds ((B329 is_homomorphism B327 , B328 & B329 is  order-sorted & B330 c= ( OSCng B329 )) implies (( OSHomQuot (B329 , B330) ) is_homomorphism ( QuotOSAlg (B327 , B330) ) , B328 & ( OSHomQuot (B329 , B330) ) is  order-sorted))))))
proof
let R1 being  locally_directed OrderSortedSign;
let C444 , C445 being  non-empty (OSAlgebra of R1);
let C446 being (ManySortedFunction of C444 , C445);
let C447 being (OSCongruence of C444);
set D276 = C447;
set D277 = ( QuotOSAlg (C444 , D276) );
set D278 = ( OSHomQuot (C446 , C447) );
set D279 = (the Sorts of C444);
assume that
L1125: C446 is_homomorphism C444 , C445
and
L1126: C446 is  order-sorted
and
L1127: C447 c= ( OSCng C446 );
L1128: (for B331 being (Element of (the carrier' of R1)) holds (( Args (B331 , D277) ) <> ( {} ) implies (for B332 being (Element of ( Args (B331 , D277) )) holds ( ( D278 . ( the_result_sort_of B331 ) ) . ( ( Den (B331 , D277) ) . B332 ) ) = ( ( Den (B331 , C445) ) . ( D278 # B332 ) ))))
proof
let C448 being (Element of (the carrier' of R1));
assume that
L1129: ( Args (C448 , D277) ) <> ( {} );
let C449 being (Element of ( Args (C448 , D277) ));
reconsider D280 = C448 as (OperSymbol of R1);
set D281 = ( the_result_sort_of C448 );
set D282 = ( the_arity_of C448 );
L1130: ( dom C449 ) = ( dom D282 ) by MSUALG_3:6;
L1131: ( Args (C448 , D277) ) = ( ( ( ( OSClass D276 ) # ) * (the Arity of R1) ) . C448 ) by MSUALG_1:def 4;
consider C450 being (Element of ( Args (C448 , C444) )) such that L1132: C449 = ( D276 #_os C450 ) by L1131 , L645;
L1133: ( dom C450 ) = ( dom D282 ) by MSUALG_3:6;
L1134:
now
let C451 being set;
assume L1135: C451 in ( dom D282 );
reconsider D283 = C451 as Nat by L1135;
L1136: ( D282 . D283 ) in ( rng D282 ) by L1135 , FUNCT_1:def 3;
reconsider D284 = ( D282 . D283 ) as (SortSymbol of R1) by L1136;
L1137: ( D282 /. D283 ) = ( D282 . D283 ) by L1135 , PARTFUN1:def 6;
consider C452 being (Element of ( D279 . D284 )) such that L1138: C452 = ( C450 . D283 ) and L1139: ( C449 . D283 ) = ( OSClass (D276 , C452) ) by L1137 , L1132 , L1135 , L532;
L1140: ( ( D278 # C449 ) . D283 ) = ( ( D278 . D284 ) . ( C449 . D283 ) ) by L1130 , L1135 , L1137 , MSUALG_3:def 6
.= ( ( OSHomQuot (C446 , C447 , D284) ) . ( OSClass (D276 , C452) ) ) by L1139 , L1105
.= ( ( C446 . D284 ) . C452 ) by L1125 , L1126 , L1127 , L1077
.= ( ( C446 # C450 ) . D283 ) by L1133 , L1135 , L1137 , L1138 , MSUALG_3:def 6;
thus L1141: ( ( D278 # C449 ) . C451 ) = ( ( C446 # C450 ) . C451 ) by L1140;
end;
L1142: C448 in (the carrier' of R1);
L1143: C448 in ( dom ( D279 * (the ResultSort of R1) ) ) by L1142 , PARTFUN1:def 2;
L1144: ( ( (the Sorts of C444) * (the ResultSort of R1) ) . C448 ) = ( (the Sorts of C444) . ( (the ResultSort of R1) . C448 ) ) by L1143 , FUNCT_1:12
.= ( (the Sorts of C444) . D281 ) by MSUALG_1:def 2;
L1145: (( rng ( Den (C448 , C444) ) ) c= ( Result (C448 , C444) ) & ( Result (C448 , C444) ) = ( D279 . D281 )) by L1144 , MSUALG_1:def 5;
L1146: ( rng ( Den (C448 , C444) ) ) c= ( dom ( OSQuotRes (D276 , C448) ) ) by L1145 , L1144 , FUNCT_2:def 1;
L1147: (( dom ( Den (C448 , C444) ) ) = ( Args (C448 , C444) ) & ( dom ( ( OSQuotRes (D276 , C448) ) * ( Den (C448 , C444) ) ) ) = ( dom ( Den (C448 , C444) ) )) by L1146 , FUNCT_2:def 1 , RELAT_1:27;
L1148: D282 = ( (the Arity of R1) . C448 ) by MSUALG_1:def 1;
L1149: ( product ( ( OSClass D276 ) * D282 ) ) = ( ( ( ( OSClass D276 ) # ) * (the Arity of R1) ) . C448 ) by L1148 , MSAFREE:1;
reconsider D285 = ( ( Den (C448 , C444) ) . C450 ) as (Element of ( D279 . D281 )) by L1144 , MSUALG_1:def 5;
L1150: ( D278 . D281 ) = ( OSHomQuot (C446 , C447 , D281) ) by L1105;
L1151: ( Den (C448 , D277) ) = ( ( OSQuotCharact D276 ) . C448 ) by MSUALG_1:def 6
.= ( OSQuotCharact (D276 , D280) ) by L724;
L1152: ( ( Den (C448 , D277) ) . C449 ) = ( ( ( OSQuotRes (D276 , C448) ) * ( Den (C448 , C444) ) ) . C450 ) by L1151 , L1132 , L1149 , L682
.= ( ( OSQuotRes (D276 , C448) ) . D285 ) by L1147 , FUNCT_1:12
.= ( OSClass (C447 , D285) ) by L556;
L1153: ( ( D278 . D281 ) . ( ( Den (C448 , D277) ) . C449 ) ) = ( ( C446 . D281 ) . ( ( Den (C448 , C444) ) . C450 ) ) by L1152 , L1125 , L1126 , L1127 , L1150 , L1077
.= ( ( Den (C448 , C445) ) . ( C446 # C450 ) ) by L1125 , MSUALG_3:def 7;
L1154: (( dom ( D278 # C449 ) ) = ( dom D282 ) & ( dom ( C446 # C450 ) ) = ( dom D282 )) by MSUALG_3:6;
thus L1155: thesis by L1154 , L1134 , L1153 , FUNCT_1:2;
end;
thus L1156: D278 is_homomorphism D277 , C445 by L1128 , MSUALG_3:def 7;
thus L1157: ( OSHomQuot (C446 , C447) ) is  order-sorted
proof
reconsider D286 = D279 as (OrderSortedSet of R1) by OSALG_1:17;
reconsider D287 = (the Sorts of D277) as (OrderSortedSet of R1);
let C453 , C454 being (Element of R1);
assume that
L1158: C453 <= C454;
let C455 being set;
assume that
L1159: C455 in ( dom ( D278 . C453 ) );
L1160: C455 in ( ( OSClass C447 ) . C453 ) by L1159;
L1161: C455 in ( OSClass (C447 , C453) ) by L1160 , L479;
consider C456 being set such that L1162: C456 in ( D279 . C453 ) and L1163: C455 = ( Class (( CompClass (C447 , ( CComp C453 )) ) , C456) ) by L1161 , L431;
L1164: ( D286 . C453 ) c= ( D286 . C454 ) by L1158 , OSALG_1:def 16;
reconsider D288 = C456 as (Element of ( D279 . C454 )) by L1164 , L1162;
L1165: C455 = ( OSClass (C447 , D288) ) by L1158 , L1163 , L264;
reconsider D289 = C453 , D290 = C454 as (Element of R1);
L1166: (( dom ( D278 . C453 ) ) = ( (the Sorts of D277) . C453 ) & ( dom ( D278 . C454 ) ) = ( (the Sorts of D277) . C454 )) by FUNCT_2:def 1;
reconsider D291 = C456 as (Element of ( D279 . C453 )) by L1162;
L1167: D291 in ( dom ( C446 . D289 ) ) by L1162 , FUNCT_2:def 1;
L1168: ( ( C446 . D289 ) . D291 ) = ( ( C446 . D290 ) . D291 ) by L1167 , L1126 , L1158 , OSALG_3:def 1;
L1169: ( D287 . C453 ) c= ( D287 . C454 ) by L1158 , OSALG_1:def 16;
thus L1170: C455 in ( dom ( D278 . C454 ) ) by L1169 , L1159 , L1166;
thus L1171: ( ( D278 . C453 ) . C455 ) = ( ( OSHomQuot (C446 , C447 , C453) ) . ( OSClass (C447 , D291) ) ) by L1163 , L1105
.= ( ( C446 . C454 ) . D291 ) by L1125 , L1126 , L1127 , L1168 , L1077
.= ( ( OSHomQuot (C446 , C447 , C454) ) . ( OSClass (C447 , D288) ) ) by L1125 , L1126 , L1127 , L1077
.= ( ( D278 . C454 ) . C455 ) by L1165 , L1105;
end;

end;
