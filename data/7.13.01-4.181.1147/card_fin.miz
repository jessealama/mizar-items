:: Cardinal Numbers and Finite Sets
::  by Karol P\c{a}k
::
:: Received May 24, 2005
:: Copyright (c) 2005-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, FUNCT_1, NAT_1, TARSKI, FINSET_1, RELAT_1,
      AFINSQ_1, ARYTM_1, ARYTM_3, FINSEQ_1, XXREAL_0, CARD_1, XBOOLE_0,
      ORDINAL4, CARD_3, BINOP_1, FINSOP_1, FUNCOP_1, BINOP_2, FUNCT_2, INT_1,
      VALUED_1, NEWTON, REALSET1, ZFMISC_1, FUNCT_4, EQREL_1, SETFAM_1,
      STIRL2_1, CARD_FIN;
 notations TARSKI, XBOOLE_0, SUBSET_1, CARD_1, NUMBERS, RELAT_1, FUNCT_1,
      ORDINAL1, NAT_1, FINSET_1, XXREAL_0, NAT_D, AFINSQ_1, VALUED_1, RELSET_1,
      PARTFUN1, DOMAIN_1, FUNCT_2, FUNCT_4, FUNCOP_1, INT_1, ENUMSET1, BINOP_1,
      BINOP_2, RECDEF_1, AFINSQ_2, ZFMISC_1, NEWTON, STIRL2_1, YELLOW20;
 constructors PARTFUN3, BINOM, WELLORD2, DOMAIN_1, SETWISEO, REAL_1, NAT_D,
      YELLOW20, RECDEF_1, BINOP_2, RELSET_1, ORDINAL4, SEQ_1, AFINSQ_1, SEQ_4,
      AFINSQ_2, STIRL2_1;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, ORDINAL1, FUNCT_2,
      FUNCOP_1, FUNCT_4, FINSET_1, FRAENKEL, NUMBERS, XXREAL_0, XREAL_0, NAT_1,
      INT_1, BINOP_2, CARD_1, WSIERP_1, AFINSQ_1, RELSET_1, VALUED_1, VALUED_0,
      AFINSQ_2;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, XBOOLE_0, FUNCT_1, FUNCOP_1, FINSET_1, RELAT_1;
 theorems AFINSQ_1, TARSKI, FUNCT_1, XBOOLE_0, ZFMISC_1, RELAT_1, XBOOLE_1,
      NAT_1, FUNCT_2, FINSET_1, XCMPLX_1, CARD_2, INT_1, WELLORD2, SUBSET_1,
      ENUMSET1, CARD_1, BINOP_2, NEWTON, XREAL_1, FUNCOP_1, STIRL2_1, ALTCAT_1,
      FUNCT_5, IRRAT_1, FUNCT_4, YELLOW20, XXREAL_0, NAT_D, XREAL_0, PRE_POLY,
      AFINSQ_2, ORDINAL1, VALUED_1, VALUED_0, XTUPLE_0;
 schemes FUNCT_2, NAT_1, XBOOLE_0, STIRL2_1;

begin
theorem
L1: (for R7 being  finite set holds (for R8 being  finite set holds ((R7 c= R8 & ( card R7 ) = ( card R8 )) implies R7 = R8)))
proof
let R7 being  finite set;
let R8 being  finite set;
assume that
L2: R7 c= R8
and
L3: ( card R7 ) = ( card R8 );
L4: ( card ( R8 \ R7 ) ) = ( ( card R8 ) - ( card R7 ) ) by L2 , CARD_2:44;
L5: ( R8 \ R7 ) = ( {} ) by L4 , L3;
L6: R8 c= R7 by L5 , XBOOLE_1:37;
thus L7: thesis by L6 , L2 , XBOOLE_0:def 10;
end;
theorem
L8: (for R7 being  finite set holds (for R8 being  finite set holds (for R1 being set holds (for R4 being set holds (((R8 = ( {} ) implies R7 = ( {} )) & (not R1 in R7)) implies ( card ( Funcs (R7 , R8) ) ) = ( card { B1 where B1 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (( rng ( B1 | R7 ) ) c= R8 & ( B1 . R1 ) = R4) } ))))))
proof
defpred S1[ set , set , set ] means 1 = 1;
let R7 being  finite set;
let R8 being  finite set;
let R1 being set;
let R4 being set;
assume L9: (R8 = ( {} ) implies R7 = ( {} ));
set D1 = { B2 where B2 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (S1[ B2 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B2 | R7 ) ) c= R8 & ( B2 . R1 ) = R4) };
L10: (for B3 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) holds (( B3 . R1 ) = R4 implies (S1[ B3 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] iff S1[ ( B3 | R7 ) , R7 , R8 ])));
set D2 = { B4 where B4 is (Function of R7 , R8) : S1[ B4 , R7 , R8 ] };
assume L11: (not R1 in R7);
set D3 = { B5 where B5 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (( rng ( B5 | R7 ) ) c= R8 & ( B5 . R1 ) = R4) };
L12: ( Funcs (R7 , R8) ) c= D2
proof
let C1 being set;
assume L13: C1 in ( Funcs (R7 , R8) );
L14: C1 is (Function of R7 , R8) by L13 , FUNCT_2:66;
thus L15: thesis by L14;
end;
L16: D1 c= D3
proof
let C2 being set;
assume L17: C2 in D1;
L18: (ex B6 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) st (B6 = C2 & S1[ B6 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B6 | R7 ) ) c= R8 & ( B6 . R1 ) = R4)) by L17;
thus L19: thesis by L18;
end;
L20: (R8 is  empty implies R7 is  empty) by L9;
L21: ( card D2 ) = ( card D1 ) from STIRL2_1:sch 4(L20 , L11 , L10);
L22: D3 c= D1
proof
let C3 being set;
assume L23: C3 in D3;
L24: (ex B7 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) st (B7 = C3 & ( rng ( B7 | R7 ) ) c= R8 & ( B7 . R1 ) = R4)) by L23;
thus L25: thesis by L24;
end;
L26: D2 c= ( Funcs (R7 , R8) )
proof
let C4 being set;
assume L27: C4 in D2;
L28: (ex B8 being (Function of R7 , R8) st (B8 = C4 & S1[ B8 , R7 , R8 ])) by L27;
thus L29: thesis by L28 , L9 , FUNCT_2:8;
end;
L30: ( Funcs (R7 , R8) ) = D2 by L26 , L12 , XBOOLE_0:def 10;
thus L31: thesis by L30 , L16 , L22 , L21 , XBOOLE_0:def 10;
end;
theorem
L32: (for R7 being  finite set holds (for R8 being  finite set holds (for R1 being set holds (for R4 being set holds (((not R1 in R7) & R4 in R8) implies ( card ( Funcs (R7 , R8) ) ) = ( card { B9 where B9 is (Function of ( R7 \/ { R1 } ) , R8) : ( B9 . R1 ) = R4 } ))))))
proof
let R7 being  finite set;
let R8 being  finite set;
let R1 being set;
let R4 being set;
assume that
L33: (not R1 in R7)
and
L34: R4 in R8;
set D4 = { B10 where B10 is (Function of ( R7 \/ { R1 } ) , R8) : ( B10 . R1 ) = R4 };
set D5 = { B11 where B11 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (( rng ( B11 | R7 ) ) c= R8 & ( B11 . R1 ) = R4) };
L35: { R4 } c= R8 by L34 , ZFMISC_1:31;
L36: R8 = ( R8 \/ { R4 } ) by L35 , XBOOLE_1:12;
L37: D4 c= D5
proof
let C5 being set;
assume L38: C5 in D4;
consider C6 being (Function of ( R7 \/ { R1 } ) , R8) such that L39: (C5 = C6 & ( C6 . R1 ) = R4) by L38;
L40: ( rng ( C6 | R7 ) ) c= R8;
thus L41: thesis by L40 , L36 , L39;
end;
L42: D5 c= D4
proof
let C7 being set;
assume L43: C7 in D5;
L44: (ex B12 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) st (C7 = B12 & ( rng ( B12 | R7 ) ) c= R8 & ( B12 . R1 ) = R4)) by L43;
thus L45: thesis by L44 , L36;
end;
L46: D5 = D4 by L42 , L37 , XBOOLE_0:def 10;
thus L47: thesis by L46 , L33 , L34 , L8;
end;
theorem
L48: (for R7 being  finite set holds (for R8 being  finite set holds ((R8 = ( {} ) implies R7 = ( {} )) implies ( card ( Funcs (R7 , R8) ) ) = ( ( card R8 ) |^ ( card R7 ) ))))
proof
let R7 being  finite set;
let R8 being  finite set;
assume L49: (R8 = ( {} ) implies R7 = ( {} ));
per cases ;
suppose L50: R8 is  empty;

L51: ( card ( Funcs (R7 , R8) ) ) = 1 by L50 , L49 , ALTCAT_1:2 , CARD_1:30;
thus L52: thesis by L51 , L49 , L50 , CARD_1:27 , NEWTON:4;
end;
suppose L53: R8 is non  empty;

defpred S2[ Nat ] means (for R7 being  finite set holds (for R8 being  finite set holds ((R8 is non  empty & ( card R7 ) = $1) implies ( card ( Funcs (R7 , R8) ) ) = ( ( card R8 ) |^ ( card R7 ) ))));
L54: (for R9 being Nat holds (S2[ R9 ] implies S2[ ( R9 + 1 ) ]))
proof
defpred S3[ set ] means 1 = 1;
let R9 being Nat;
assume that
L55: S2[ R9 ];
let R7 being  finite set;
let R8 being  finite set;
assume that
L56: R8 is non  empty
and
L57: ( card R7 ) = ( R9 + 1 );
reconsider D6 = R9 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D7 = ( ( card R8 ) |^ D6 ) as (Element of ( NAT ));
L58: ( card R8 ) , R8 are_equipotent  by CARD_1:def 2;
consider C8 being Function such that L59: C8 is  one-to-one and L60: ( dom C8 ) = ( card R8 ) and L61: ( rng C8 ) = R8 by L58 , WELLORD2:def 4;
reconsider D8 = C8 as (Function of ( card R8 ) , R8) by L60 , L61 , FUNCT_2:1;
consider R1 being set such that L62: R1 in R7 by L57 , CARD_1:27 , XBOOLE_0:def 1;
L63: D8 is  onto  one-to-one by L59 , L61 , FUNCT_2:def 3;
consider C9 being (XFinSequence of ( NAT )) such that L64: ( dom C9 ) = ( card R8 ) and L65: ( card { B13 where B13 is (Function of R7 , R8) : S3[ B13 ] } ) = ( Sum C9 ) and L66: (for R10 being Nat holds (R10 in ( dom C9 ) implies ( C9 . R10 ) = ( card { B14 where B14 is (Function of R7 , R8) : (S3[ B14 ] & ( B14 . R1 ) = ( D8 . R10 )) } ))) from STIRL2_1:sch 6(L63 , L56 , L62);
L67: (for B15 being Nat holds (B15 in ( dom C9 ) implies ( C9 . B15 ) = D7))
proof
set D9 = ( R7 \ { R1 } );
let C10 being Nat;
assume that
L68: C10 in ( dom C9 );
L69: ( D8 . C10 ) in ( rng D8 ) by L60 , L64 , L68 , FUNCT_1:def 3;
set D10 = { B16 where B16 is (Function of R7 , R8) : (S3[ B16 ] & ( B16 . R1 ) = ( D8 . C10 )) };
set D11 = { B17 where B17 is (Function of ( D9 \/ { R1 } ) , R8) : ( B17 . R1 ) = ( D8 . C10 ) };
L70: D10 c= D11
proof
let C11 being set;
assume L71: C11 in D10;
L72: (ex B18 being (Function of R7 , R8) st (B18 = C11 & S3[ B18 ] & ( B18 . R1 ) = ( D8 . C10 ))) by L71;
L73: ( D9 \/ { R1 } ) = R7 by L62 , ZFMISC_1:116;
thus L74: thesis by L73 , L72;
end;
L75: D11 c= D10
proof
let C12 being set;
assume L76: C12 in D11;
L77: (ex B19 being (Function of ( D9 \/ { R1 } ) , R8) st (B19 = C12 & ( B19 . R1 ) = ( D8 . C10 ))) by L76;
L78: ( D9 \/ { R1 } ) = R7 by L62 , ZFMISC_1:116;
thus L79: thesis by L78 , L77;
end;
L80: D11 = D10 by L75 , L70 , XBOOLE_0:def 10;
L81: ( card D9 ) = R9 by L57 , L62 , STIRL2_1:55;
L82: ( card ( Funcs (D9 , R8) ) ) = D7 by L81 , L55 , L69;
L83: R1 in { R1 } by TARSKI:def 1;
L84: (not R1 in D9) by L83 , XBOOLE_0:def 5;
L85: ( card ( Funcs (D9 , R8) ) ) = ( card D11 ) by L84 , L69 , L32;
thus L86: thesis by L85 , L66 , L68 , L80 , L82;
end;
L87: (for B20 being Nat holds (B20 in ( dom C9 ) implies ( C9 . B20 ) >= D7)) by L67;
L88: ( Sum C9 ) >= ( ( len C9 ) * ( ( card R8 ) |^ R9 ) ) by L87 , AFINSQ_2:60;
set D12 = { B21 where B21 is (Function of R7 , R8) : S3[ B21 ] };
L89: ( Funcs (R7 , R8) ) c= D12
proof
let C13 being set;
assume L90: C13 in ( Funcs (R7 , R8) );
L91: C13 is (Function of R7 , R8) by L90 , FUNCT_2:66;
thus L92: thesis by L91;
end;
L93: D12 c= ( Funcs (R7 , R8) )
proof
let C14 being set;
assume L94: C14 in D12;
L95: (ex B22 being (Function of R7 , R8) st (B22 = C14 & S3[ B22 ])) by L94;
thus L96: thesis by L95 , L56 , FUNCT_2:8;
end;
L97: ( Funcs (R7 , R8) ) = D12 by L93 , L89 , XBOOLE_0:def 10;
L98: (for B23 being Nat holds (B23 in ( dom C9 ) implies ( C9 . B23 ) <= D7)) by L67;
L99: ( Sum C9 ) <= ( ( len C9 ) * ( ( card R8 ) |^ R9 ) ) by L98 , AFINSQ_2:59;
L100: ( Sum C9 ) = ( ( card R8 ) * ( ( card R8 ) |^ R9 ) ) by L99 , L64 , L88 , XXREAL_0:1;
thus L101: thesis by L100 , L57 , L65 , L97 , NEWTON:6;
end;
L102: S2[ ( 0 ) ]
proof
let R7 being  finite set;
let R8 being  finite set;
assume that
L103: R8 is non  empty
and
L104: ( card R7 ) = ( 0 );
L105: R7 is  empty by L104;
L106: ( Funcs (R7 , R8) ) = { ( {} ) } by L105 , FUNCT_5:57;
L107: ( card ( Funcs (R7 , R8) ) ) = 1 by L106 , CARD_1:30;
thus L108: thesis by L107 , L104 , NEWTON:4;
end;
L109: (for R9 being Nat holds S2[ R9 ]) from NAT_1:sch 2(L102 , L54);
thus L110: thesis by L109 , L53;
end;
end;
theorem
L112: (for R7 being  finite set holds (for R8 being  finite set holds (for R1 being set holds (for R4 being set holds (((R8 is  empty implies R7 is  empty) & (not R1 in R7) & (not R4 in R8)) implies ( card { B24 where B24 is (Function of R7 , R8) : B24 is  one-to-one } ) = ( card { B25 where B25 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (B25 is  one-to-one & ( B25 . R1 ) = R4) } ))))))
proof
let R7 being  finite set;
let R8 being  finite set;
let R1 being set;
let R4 being set;
assume that
L113: (R8 is  empty implies R7 is  empty)
and
L114: (not R1 in R7)
and
L115: (not R4 in R8);
defpred S4[ Function , set , set ] means ($1 is  one-to-one & ( rng ( $1 | R7 ) ) c= R8);
L116: (for B26 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) holds (( B26 . R1 ) = R4 implies (S4[ B26 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] iff S4[ ( B26 | R7 ) , R7 , R8 ])))
proof
let C15 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ));
assume that
L117: ( C15 . R1 ) = R4;
thus L118: (S4[ C15 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] implies S4[ ( C15 | R7 ) , R7 , R8 ]) by FUNCT_1:52;
thus L119: (S4[ ( C15 | R7 ) , R7 , R8 ] implies S4[ C15 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ])
proof
L120: (( ( R7 \/ { R1 } ) /\ R7 ) = R7 & ( dom C15 ) = ( R7 \/ { R1 } )) by FUNCT_2:def 1 , XBOOLE_1:21;
L121: ( dom ( C15 | R7 ) ) = R7 by L120 , RELAT_1:61;
assume that
L122: ( C15 | R7 ) is  one-to-one
and
L123: ( rng ( ( C15 | R7 ) | R7 ) ) c= R8;
L124: ( rng ( C15 | R7 ) ) c= R8 by L123;
L125: ( C15 | R7 ) is (Function of R7 , R8) by L124 , L121 , FUNCT_2:2;
thus L126: thesis by L125 , L113 , L115 , L117 , L122 , L123 , STIRL2_1:58;
end;

end;
set D13 = { B27 where B27 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (B27 is  one-to-one & ( B27 . R1 ) = R4) };
L120: D13 c= { B28 where B28 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (S4[ B28 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B28 | R7 ) ) c= R8 & ( B28 . R1 ) = R4) }
proof
let R5 being set;
assume L121: R5 in D13;
consider C16 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) such that L122: R5 = C16 and L123: (C16 is  one-to-one & ( C16 . R1 ) = R4) by L121;
L124: ( rng ( C16 | R7 ) ) c= R8
proof
L125: ( dom C16 ) = ( R7 \/ { R1 } ) by FUNCT_2:def 1;
L126: R1 in { R1 } by TARSKI:def 1;
L127: R1 in ( dom C16 ) by L126 , L125 , XBOOLE_0:def 3;
assume L128: (not ( rng ( C16 | R7 ) ) c= R8);
consider C17 being set such that L129: C17 in ( rng ( C16 | R7 ) ) and L130: (not C17 in R8) by L128 , TARSKI:def 3;
consider R5 being set such that L131: R5 in ( dom ( C16 | R7 ) ) and L132: C17 = ( ( C16 | R7 ) . R5 ) by L129 , FUNCT_1:def 3;
L133: R5 in ( dom C16 ) by L131 , RELAT_1:57;
L134: (C17 in R8 or C17 in { R4 }) by L129 , XBOOLE_0:def 3;
L135: R5 in R7 by L131;
L136: ( C16 . R5 ) = ( ( C16 | R7 ) . R5 ) by L131 , FUNCT_1:47;
L137: R4 = ( C16 . R5 ) by L136 , L130 , L132 , L134 , TARSKI:def 1;
thus L138: thesis by L137 , L114 , L123 , L127 , L135 , L133 , FUNCT_1:def 4;
end;
thus L139: thesis by L124 , L122 , L123;
end;
L140: { B29 where B29 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (S4[ B29 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B29 | R7 ) ) c= R8 & ( B29 . R1 ) = R4) } c= D13
proof
let R5 being set;
assume L141: R5 in { B30 where B30 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (S4[ B30 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B30 | R7 ) ) c= R8 & ( B30 . R1 ) = R4) };
L142: (ex B31 being (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) st (R5 = B31 & S4[ B31 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B31 | R7 ) ) c= R8 & ( B31 . R1 ) = R4)) by L141;
thus L143: thesis by L142;
end;
set D14 = { B32 where B32 is (Function of R7 , R8) : (B32 is  one-to-one & ( rng ( B32 | R7 ) ) c= R8) };
set D15 = { B33 where B33 is (Function of R7 , R8) : B33 is  one-to-one };
L144: D15 c= D14
proof
let R5 being set;
assume L145: R5 in D15;
consider C18 being (Function of R7 , R8) such that L146: (R5 = C18 & C18 is  one-to-one) by L145;
L147: ( rng ( C18 | R7 ) ) c= ( rng C18 );
thus L148: thesis by L147 , L146;
end;
L149: (not R1 in R7) by L114;
L150: ( card { B34 where B34 is (Function of R7 , R8) : S4[ B34 , R7 , R8 ] } ) = ( card { B35 where B35 is (Function of ( R7 \/ { R1 } ) , ( R8 \/ { R4 } )) : (S4[ B35 , ( R7 \/ { R1 } ) , ( R8 \/ { R4 } ) ] & ( rng ( B35 | R7 ) ) c= R8 & ( B35 . R1 ) = R4) } ) from STIRL2_1:sch 4(L113 , L149 , L116);
L151: D14 c= D15
proof
let R5 being set;
assume L152: R5 in D14;
L153: (ex B36 being (Function of R7 , R8) st (R5 = B36 & B36 is  one-to-one & ( rng ( B36 | R7 ) ) c= R8)) by L152;
thus L154: thesis by L153;
end;
L155: D14 = D15 by L151 , L144 , XBOOLE_0:def 10;
thus L156: thesis by L155 , L120 , L140 , L150 , XBOOLE_0:def 10;
end;
theorem
L157: (for R9 being Nat holds (for R10 being Nat holds ( ( R9 ! ) / ( ( R9 -' R10 ) ! ) ) is (Element of ( NAT ))))
proof
let R9 being Nat;
let R10 being Nat;
L158: (R9 in ( NAT ) & R10 in ( NAT )) by ORDINAL1:def 12;
L159: ( ( R9 ! ) / ( ( R9 -' R10 ) ! ) ) is  integer by L158 , IRRAT_1:36 , NAT_D:35;
thus L160: thesis by L159 , INT_1:3;
end;
theorem
L161: (for R7 being  finite set holds (for R8 being  finite set holds (( card R7 ) <= ( card R8 ) implies ( card { B37 where B37 is (Function of R7 , R8) : B37 is  one-to-one } ) = ( ( ( card R8 ) ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ))))
proof
let R7 being  finite set;
let R8 being  finite set;
defpred S5[ Nat ] means (for R7 being  finite set holds (for R8 being  finite set holds ((( card R8 ) = $1 & ( card R7 ) <= ( card R8 )) implies ( card { B38 where B38 is (Function of R7 , R8) : B38 is  one-to-one } ) = ( ( ( card R8 ) ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ))));
L162: (for R9 being Nat holds (S5[ R9 ] implies S5[ ( R9 + 1 ) ]))
proof
let R9 being Nat;
assume that
L163: S5[ R9 ];
let R7 being  finite set;
let R8 being  finite set;
assume that
L164: ( card R8 ) = ( R9 + 1 )
and
L165: ( card R7 ) <= ( card R8 );
per cases ;
suppose L166: R7 is  empty;

set D16 = { B39 where B39 is (Function of R7 , R8) : B39 is  one-to-one };
L167: D16 c= { ( {} ) }
proof
let R1 being set;
assume L168: R1 in D16;
L169: (ex B40 being (Function of R7 , R8) st (R1 = B40 & B40 is  one-to-one)) by L168;
L170: R1 = ( {} ) by L169 , L166;
thus L171: thesis by L170 , TARSKI:def 1;
end;
L172: ( rng ( {} ) ) c= R8 by XBOOLE_1:2;
L173: ( ( card R8 ) - ( card R7 ) ) = ( card R8 ) by L166 , CARD_1:27;
L174: ( ( ( card R8 ) -' ( card R7 ) ) ! ) = ( ( card R8 ) ! ) by L173 , XREAL_0:def 2;
L175: ( ( card R8 ) ! ) > ( 0 ) by NEWTON:17;
L176: ( ( ( card R8 ) ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) = 1 by L175 , L174 , XCMPLX_1:60;
L177: ( dom ( {} ) ) = R7 by L166;
L178: ( {} ) is (Function of R7 , R8) by L177 , L172 , FUNCT_2:2;
L179: ( {} ) in D16 by L178;
L180: D16 = { ( {} ) } by L179 , L167 , ZFMISC_1:33;
thus L181: thesis by L180 , L176 , CARD_1:30;
end;
suppose L182: R7 is non  empty;

consider R1 being set such that L183: R1 in R7 by L182 , XBOOLE_0:def 1;
defpred S6[ Function ] means $1 is  one-to-one;
L184: ( card R8 ) , R8 are_equipotent  by CARD_1:def 2;
consider C19 being Function such that L185: C19 is  one-to-one and L186: ( dom C19 ) = ( card R8 ) and L187: ( rng C19 ) = R8 by L184 , WELLORD2:def 4;
reconsider D17 = C19 as (Function of ( card R8 ) , R8) by L186 , L187 , FUNCT_2:1;
L188: R8 is non  empty by L164;
L189: D17 is  onto  one-to-one by L185 , L187 , FUNCT_2:def 3;
consider C20 being (XFinSequence of ( NAT )) such that L190: ( dom C20 ) = ( card R8 ) and L191: ( card { B41 where B41 is (Function of R7 , R8) : S6[ B41 ] } ) = ( Sum C20 ) and L192: (for R10 being Nat holds (R10 in ( dom C20 ) implies ( C20 . R10 ) = ( card { B42 where B42 is (Function of R7 , R8) : (S6[ B42 ] & ( B42 . R1 ) = ( D17 . R10 )) } ))) from STIRL2_1:sch 6(L189 , L188 , L183);
L193: (for B43 being Nat holds (B43 in ( dom C20 ) implies ( C20 . B43 ) = ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) )))
proof
L194: ( card R7 ) > ( 0 ) by L183;
reconsider D18 = ( ( card R7 ) - 1 ) as (Element of ( NAT )) by L194 , NAT_1:20;
set D19 = ( R7 \ { R1 } );
L195: R1 in { R1 } by TARSKI:def 1;
L196: (not R1 in D19) by L195 , XBOOLE_0:def 5;
L197: R7 = ( D19 \/ { R1 } ) by L183 , ZFMISC_1:116;
L198: ( ( D18 + 1 ) - 1 ) <= ( ( R9 + 1 ) - 1 ) by L164 , L165 , XREAL_1:9;
L199: ( R9 - D18 ) >= ( D18 - D18 ) by L198 , XREAL_1:9;
let C21 being Nat;
assume that
L200: C21 in ( dom C20 );
L201: ( D17 . C21 ) in R8 by L186 , L187 , L190 , L200 , FUNCT_1:def 3;
set D20 = ( R8 \ { ( D17 . C21 ) } );
L202: R8 = ( D20 \/ { ( D17 . C21 ) } ) by L201 , ZFMISC_1:116;
L203: ( D17 . C21 ) in { ( D17 . C21 ) } by TARSKI:def 1;
L204: (not ( D17 . C21 ) in D20) by L203 , XBOOLE_0:def 5;
L205: ( D18 + 1 ) <= ( R9 + 1 ) by L164 , L165;
L206: ( card D19 ) = D18 by L205 , L183 , STIRL2_1:55;
L207: ( card D20 ) = R9 by L164 , L201 , STIRL2_1:55;
L208: (D20 is  empty implies D19 is  empty) by L207 , L198 , L206 , CARD_1:27;
L209: ( card { B44 where B44 is (Function of D19 , D20) : B44 is  one-to-one } ) = ( ( R9 ! ) / ( ( ( card D20 ) -' ( card D19 ) ) ! ) ) by L163 , L198 , L206 , L207;
L210: ( ( card R8 ) - ( card R7 ) ) >= ( ( card R7 ) - ( card R7 ) ) by L165 , XREAL_1:9;
L211: ( ( card R8 ) -' ( card R7 ) ) = ( ( ( ( card D20 ) + 1 ) - 1 ) - ( ( ( card D19 ) + 1 ) - 1 ) ) by L210 , L164 , L206 , L207 , XREAL_0:def 2
.= ( ( card D20 ) -' ( card D19 ) ) by L206 , L207 , L199 , XREAL_0:def 2;
L212: ( card { B45 where B45 is (Function of R7 , R8) : (B45 is  one-to-one & ( B45 . R1 ) = ( D17 . C21 )) } ) = ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) by L211 , L209 , L202 , L197 , L204 , L196 , L208 , L112;
thus L213: thesis by L212 , L192 , L200;
end;
L214: (for B46 being Nat holds (B46 in ( dom C20 ) implies ( C20 . B46 ) >= ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ))) by L193;
L215: ( Sum C20 ) >= ( ( len C20 ) * ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) ) by L214 , AFINSQ_2:60;
L216: (for B47 being Nat holds (B47 in ( dom C20 ) implies ( C20 . B47 ) <= ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ))) by L193;
L217: ( Sum C20 ) <= ( ( len C20 ) * ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) ) by L216 , AFINSQ_2:59;
L218: ( Sum C20 ) = ( ( R9 + 1 ) * ( ( R9 ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) ) by L217 , L164 , L190 , L215 , XXREAL_0:1
.= ( ( ( R9 + 1 ) * ( R9 ! ) ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) by XCMPLX_1:74
.= ( ( ( card R8 ) ! ) / ( ( ( card R8 ) -' ( card R7 ) ) ! ) ) by L164 , NEWTON:15;
thus L219: thesis by L218 , L191;
end;
end;
L221: S5[ ( 0 ) ]
proof
let R7 being  finite set;
let R8 being  finite set;
assume that
L222: ( card R8 ) = ( 0 )
and
L223: ( card R7 ) <= ( card R8 );
L224: ( ( card R8 ) - ( card R7 ) ) = ( 0 ) by L222 , L223;
L225: ( ( ( card R8 ) -' ( card R7 ) ) ! ) = 1 by L224 , NEWTON:12 , XREAL_0:def 2;
set D21 = { B48 where B48 is (Function of R7 , R8) : B48 is  one-to-one };
L226: D21 c= { ( {} ) }
proof
let R1 being set;
assume L227: R1 in D21;
L228: (ex B49 being (Function of R7 , R8) st (R1 = B49 & B49 is  one-to-one)) by L227;
L229: R8 = ( {} ) by L222;
L230: R1 = ( {} ) by L229 , L228;
thus L231: thesis by L230 , TARSKI:def 1;
end;
L232: (( dom ( {} ) ) = R7 & ( rng ( {} ) ) = R8) by L222 , L223;
L233: ( {} ) is (Function of R7 , R8) by L232 , FUNCT_2:1;
L234: ( {} ) in D21 by L233;
L235: D21 = { ( {} ) } by L234 , L226 , ZFMISC_1:33;
thus L236: thesis by L235 , L222 , L225 , CARD_1:30 , NEWTON:12;
end;
L237: (for R9 being Nat holds S5[ R9 ]) from NAT_1:sch 2(L221 , L162);
thus L238: thesis by L237;
end;
theorem
L239: (for R7 being  finite set holds ( card { B50 where B50 is (Function of R7 , R7) : B50 is (Permutation of R7) } ) = ( ( card R7 ) ! ))
proof
let R7 being  finite set;
set D22 = { B51 where B51 is (Function of R7 , R7) : B51 is  one-to-one };
set D23 = { B52 where B52 is (Function of R7 , R7) : B52 is (Permutation of R7) };
L240: D22 c= D23
proof
let R1 being set;
assume L241: R1 in D22;
consider C22 being (Function of R7 , R7) such that L242: R1 = C22 and L243: C22 is  one-to-one by L241;
L244: ( card R7 ) = ( card R7 );
L245: C22 is  onto by L244 , L243 , STIRL2_1:60;
thus L246: thesis by L245 , L242 , L243;
end;
L247: ( ( ( card R7 ) -' ( card R7 ) ) ! ) = 1 by NEWTON:12 , XREAL_1:232;
L248: ( ( ( card R7 ) ! ) / ( ( ( card R7 ) -' ( card R7 ) ) ! ) ) = ( ( card R7 ) ! ) by L247;
L249: D23 c= D22
proof
let R1 being set;
assume L250: R1 in D23;
L251: (ex B53 being (Function of R7 , R7) st (R1 = B53 & B53 is (Permutation of R7))) by L250;
thus L252: thesis by L251;
end;
L253: D22 = D23 by L249 , L240 , XBOOLE_0:def 10;
thus L254: thesis by L253 , L248 , L161;
end;
definition
let R7 being  finite set;
let R10 being Nat;
let R2 being set;
let R3 being set;
func Choose (R7 , R10 , R2 , R3) -> (Subset of ( Funcs (R7 , { R2 , R3 }) )) means 
:L255: (for R1 being set holds (R1 in it iff (ex B54 being (Function of R7 , { R2 , R3 }) st (B54 = R1 & ( card ( B54 " { R2 } ) ) = R10))));
existence
proof
defpred S7[ set ] means (ex B55 being (Function of R7 , { R2 , R3 }) st ($1 = B55 & ( card ( B55 " { R2 } ) ) = R10));
consider C23 being set such that L256: (for R1 being set holds (R1 in C23 iff (R1 in ( bool [: R7 , { R2 , R3 } :] ) & S7[ R1 ]))) from XBOOLE_0:sch 1;
L257: C23 c= ( Funcs (R7 , { R2 , R3 }) )
proof
let R1 being set;
assume L258: R1 in C23;
L259: (ex B56 being (Function of R7 , { R2 , R3 }) st (R1 = B56 & ( card ( B56 " { R2 } ) ) = R10)) by L258 , L256;
thus L260: thesis by L259 , FUNCT_2:8;
end;
reconsider D24 = C23 as (Subset of ( Funcs (R7 , { R2 , R3 }) )) by L257;
take D24;
let R1 being set;
thus L261: (R1 in D24 implies (ex B57 being (Function of R7 , { R2 , R3 }) st (R1 = B57 & ( card ( B57 " { R2 } ) ) = R10))) by L256;
given C24 being (Function of R7 , { R2 , R3 }) such that
L262: (R1 = C24 & ( card ( C24 " { R2 } ) ) = R10);

thus L263: thesis by L256 , L262;
end;
uniqueness
proof
let C25 , C26 being (Subset of ( Funcs (R7 , { R2 , R3 }) ));
assume that
L264: (for R1 being set holds (R1 in C25 iff (ex B58 being (Function of R7 , { R2 , R3 }) st (R1 = B58 & ( card ( B58 " { R2 } ) ) = R10))))
and
L265: (for R1 being set holds (R1 in C26 iff (ex B59 being (Function of R7 , { R2 , R3 }) st (R1 = B59 & ( card ( B59 " { R2 } ) ) = R10))));
L266: (for R1 being set holds (R1 in C25 iff R1 in C26))
proof
let R1 being set;
L267: (R1 in C25 iff (ex B60 being (Function of R7 , { R2 , R3 }) st (R1 = B60 & ( card ( B60 " { R2 } ) ) = R10))) by L264;
thus L268: thesis by L267 , L265;
end;
thus L269: thesis by L266 , TARSKI:1;
end;
end;
theorem
L271: (for R2 being set holds (for R7 being  finite set holds (for R10 being Nat holds (( card R7 ) <> R10 implies ( Choose (R7 , R10 , R2 , R2) ) is  empty))))
proof
let R2 being set;
let R7 being  finite set;
let R10 being Nat;
assume L272: ( card R7 ) <> R10;
assume L273: ( Choose (R7 , R10 , R2 , R2) ) is non  empty;
consider R4 being set such that L274: R4 in ( Choose (R7 , R10 , R2 , R2) ) by L273 , XBOOLE_0:def 1;
consider C27 being (Function of R7 , { R2 , R2 }) such that L275: C27 = R4 and L276: ( card ( C27 " { R2 } ) ) = R10 by L274 , L255;
per cases ;
suppose L277: ( rng C27 ) is  empty;

L278: ( dom C27 ) = R7 by FUNCT_2:def 1;
L279: ( dom C27 ) = ( {} ) by L277 , RELAT_1:42;
thus L280: thesis by L279 , L272 , L276 , L278;
end;
suppose L281: ( rng C27 ) is non  empty;

L282: { R2 , R2 } = { R2 } by ENUMSET1:29;
L283: ( rng C27 ) = { R2 } by L282 , L281 , ZFMISC_1:33;
L284: ( C27 " { R2 } ) = ( dom C27 ) by L283 , RELAT_1:134;
thus L285: thesis by L284 , L272 , L276 , FUNCT_2:def 1;
end;
end;
theorem
L287: (for R2 being set holds (for R3 being set holds (for R7 being  finite set holds (for R10 being Nat holds (( card R7 ) < R10 implies ( Choose (R7 , R10 , R2 , R3) ) is  empty)))))
proof
let R2 being set;
let R3 being set;
let R7 being  finite set;
let R10 being Nat;
assume L288: ( card R7 ) < R10;
assume L289: ( Choose (R7 , R10 , R2 , R3) ) is non  empty;
consider R5 being set such that L290: R5 in ( Choose (R7 , R10 , R2 , R3) ) by L289 , XBOOLE_0:def 1;
L291: (ex B61 being (Function of R7 , { R2 , R3 }) st (B61 = R5 & ( card ( B61 " { R2 } ) ) = R10)) by L290 , L255;
thus L292: thesis by L291 , L288 , NAT_1:43;
end;
theorem
L293: (for R2 being set holds (for R3 being set holds (for R7 being  finite set holds (R2 <> R3 implies ( card ( Choose (R7 , ( 0 ) , R2 , R3) ) ) = 1))))
proof
let R2 being set;
let R3 being set;
let R7 being  finite set;
assume L294: R2 <> R3;
per cases ;
suppose L295: R7 is  empty;

L296: ( dom ( {} ) ) = R7 by L295;
reconsider D25 = ( {} ) as (Function of R7 , { R2 , R3 }) by L296 , XBOOLE_1:2;
L297: ( Choose (R7 , ( 0 ) , R2 , R3) ) c= { D25 }
proof
let R5 being set;
assume L298: R5 in ( Choose (R7 , ( 0 ) , R2 , R3) );
consider C28 being (Function of R7 , { R2 , R3 }) such that L299: R5 = C28 and L300: ( card ( C28 " { R2 } ) ) = ( 0 ) by L298 , L255;
L301: ( dom C28 ) = R7 by FUNCT_2:def 1;
L302: C28 = D25 by L301;
thus L303: thesis by L302 , L299 , TARSKI:def 1;
end;
L304: (( D25 " { R2 } ) = ( {} ) & ( card ( {} ) ) = ( 0 ));
L305: D25 in ( Choose (R7 , ( 0 ) , R2 , R3) ) by L304 , L255;
L306: ( Choose (R7 , ( 0 ) , R2 , R3) ) = { D25 } by L305 , L297 , ZFMISC_1:33;
thus L307: thesis by L306 , CARD_1:30;
end;
suppose L308: R7 is non  empty;

consider C29 being Function such that L309: ( dom C29 ) = R7 and L310: ( rng C29 ) = { R3 } by L308 , FUNCT_1:5;
L311: ( rng C29 ) c= { R2 , R3 } by L310 , ZFMISC_1:36;
L312: C29 is (Function of R7 , { R2 , R3 }) by L311 , L309 , FUNCT_2:2;
L313: ( Choose (R7 , ( 0 ) , R2 , R3) ) c= { C29 }
proof
let R5 being set;
assume L314: R5 in ( Choose (R7 , ( 0 ) , R2 , R3) );
consider C30 being (Function of R7 , { R2 , R3 }) such that L315: R5 = C30 and L316: ( card ( C30 " { R2 } ) ) = ( 0 ) by L314 , L255;
L317: ( C30 " { R2 } ) = ( {} ) by L316;
L318: (not R2 in ( rng C30 )) by L317 , FUNCT_1:72;
L319: ((not ( rng C30 ) = { R2 }) & (not ( rng C30 ) = { R2 , R3 })) by L318 , TARSKI:def 1 , TARSKI:def 2;
L320: (( dom C30 ) = R7 & ( rng C30 ) = { R3 }) by L319 , L308 , FUNCT_2:def 1 , ZFMISC_1:36;
L321: C30 = C29 by L320 , L309 , L310 , FUNCT_1:7;
thus L322: thesis by L321 , L315 , TARSKI:def 1;
end;
L323: (not R2 in ( rng C29 )) by L294 , L310 , TARSKI:def 1;
L324: ( C29 " { R2 } ) = ( {} ) by L323 , FUNCT_1:72;
L325: ( card ( {} ) ) = ( 0 );
L326: C29 in ( Choose (R7 , ( 0 ) , R2 , R3) ) by L325 , L324 , L312 , L255;
L327: ( Choose (R7 , ( 0 ) , R2 , R3) ) = { C29 } by L326 , L313 , ZFMISC_1:33;
thus L328: thesis by L327 , CARD_1:30;
end;
end;
theorem
L330: (for R2 being set holds (for R3 being set holds (for R7 being  finite set holds ( card ( Choose (R7 , ( card R7 ) , R2 , R3) ) ) = 1)))
proof
let R2 being set;
let R3 being set;
let R7 being  finite set;
per cases ;
suppose L331: R7 is  empty;

L332: ( dom ( {} ) ) = R7 by L331;
reconsider D26 = ( {} ) as (Function of R7 , { R2 , R3 }) by L332 , XBOOLE_1:2;
L333: ( Choose (R7 , ( card R7 ) , R2 , R3) ) c= { D26 }
proof
let R5 being set;
assume L334: R5 in ( Choose (R7 , ( card R7 ) , R2 , R3) );
consider C31 being (Function of R7 , { R2 , R3 }) such that L335: R5 = C31 and L336: ( card ( C31 " { R2 } ) ) = ( card R7 ) by L334 , L255;
L337: ( dom C31 ) = R7 by FUNCT_2:def 1;
L338: C31 = D26 by L337;
thus L339: thesis by L338 , L335 , TARSKI:def 1;
end;
L340: ( D26 " { R2 } ) = ( {} );
L341: D26 in ( Choose (R7 , ( card R7 ) , R2 , R3) ) by L340 , L331 , L255;
L342: ( Choose (R7 , ( card R7 ) , R2 , R3) ) = { D26 } by L341 , L333 , ZFMISC_1:33;
thus L343: thesis by L342 , CARD_1:30;
end;
suppose L344: R7 is non  empty;

consider C32 being Function such that L345: ( dom C32 ) = R7 and L346: ( rng C32 ) = { R2 } by L344 , FUNCT_1:5;
L347: ( rng C32 ) c= { R2 , R3 } by L346 , ZFMISC_1:36;
L348: C32 is (Function of R7 , { R2 , R3 }) by L347 , L345 , FUNCT_2:2;
L349: ( Choose (R7 , ( card R7 ) , R2 , R3) ) c= { C32 }
proof
let R5 being set;
assume L350: R5 in ( Choose (R7 , ( card R7 ) , R2 , R3) );
consider C33 being (Function of R7 , { R2 , R3 }) such that L351: R5 = C33 and L352: ( card ( C33 " { R2 } ) ) = ( card R7 ) by L350 , L255;
L353:
now
per cases ;
suppose L354: R2 = R3;

L355: { R2 , R3 } = { R2 } by L354 , ENUMSET1:29;
thus L356: ( rng C33 ) = { R2 } by L355 , L344 , ZFMISC_1:33;
end;
suppose L357: R2 <> R3;

L358: ( C33 " { R3 } ) = ( {} )
proof
assume L359: ( C33 " { R3 } ) <> ( {} );
consider R5 being set such that L360: R5 in ( C33 " { R3 } ) by L359 , XBOOLE_0:def 1;
L361: ( C33 . R5 ) in { R3 } by L360 , FUNCT_1:def 7;
L362: ( C33 . R5 ) = R3 by L361 , TARSKI:def 1;
L363: ( C33 " { R2 } ) = R7 by L352 , L1;
L364: ( C33 . R5 ) in { R2 } by L363 , L360 , FUNCT_1:def 7;
thus L365: thesis by L364 , L357 , L362 , TARSKI:def 1;
end;
L366: (not R3 in ( rng C33 )) by L358 , FUNCT_1:72;
L367: ((not ( rng C33 ) = { R3 }) & (not ( rng C33 ) = { R2 , R3 })) by L366 , TARSKI:def 1 , TARSKI:def 2;
thus L368: ( rng C33 ) = { R2 } by L367 , L344 , ZFMISC_1:36;
end;
end;
L370: ( dom C33 ) = R7 by FUNCT_2:def 1;
L371: C33 = C32 by L370 , L345 , L346 , L353 , FUNCT_1:7;
thus L372: thesis by L371 , L351 , TARSKI:def 1;
end;
L373: ( card ( C32 " { R2 } ) ) = ( card R7 ) by L345 , L346 , RELAT_1:134;
L374: C32 in ( Choose (R7 , ( card R7 ) , R2 , R3) ) by L373 , L348 , L255;
L375: ( Choose (R7 , ( card R7 ) , R2 , R3) ) = { C32 } by L374 , L349 , ZFMISC_1:33;
thus L376: thesis by L375 , CARD_1:30;
end;
end;
theorem
L378: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R7 being  finite set holds (for R10 being Nat holds ((not R5 in R7) implies ( card ( Choose (R7 , R10 , R1 , R4) ) ) = ( card { B62 where B62 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B62 " { R1 } ) ) = ( R10 + 1 ) & ( B62 . R5 ) = R1) } )))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R7 being  finite set;
let R10 being Nat;
set D27 = { B63 where B63 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B63 " { R1 } ) ) = ( R10 + 1 ) & ( B63 . R5 ) = R1) };
defpred S8[ set , set , set ] means (for B64 being Function holds (B64 = $1 implies ( card ( ( B64 | R7 ) " { R1 } ) ) = R10));
L379: (for B65 being (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } )) holds (( B65 . R5 ) = R1 implies (S8[ B65 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } ) ] iff S8[ ( B65 | R7 ) , R7 , { R1 , R4 } ])))
proof
let C34 being (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } ));
assume that
L380: ( C34 . R5 ) = R1;
L381: ( C34 | R7 ) = ( ( C34 | R7 ) | R7 );
thus L382: thesis by L381;
end;
set D28 = { B66 where B66 is (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } )) : (S8[ B66 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } ) ] & ( rng ( B66 | R7 ) ) c= { R1 , R4 } & ( B66 . R5 ) = R1) };
set D29 = { B67 where B67 is (Function of R7 , { R1 , R4 }) : S8[ B67 , R7 , { R1 , R4 } ] };
assume L383: (not R5 in R7);
L384: D28 c= D27
proof
L385: ( { R1 } \/ { R1 , R4 } ) = { R1 , R1 , R4 } by ENUMSET1:2;
L386: ( { R1 , R4 } \/ { R1 } ) = { R1 , R4 } by L385 , ENUMSET1:30;
L387: R5 in { R5 } by TARSKI:def 1;
L388: R5 in ( R7 \/ { R5 } ) by L387 , XBOOLE_0:def 3;
let R2 being set;
assume L389: R2 in D28;
consider C35 being (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } )) such that L390: R2 = C35 and L391: S8[ C35 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } ) ] and L392: ( rng ( C35 | R7 ) ) c= { R1 , R4 } and L393: ( C35 . R5 ) = R1 by L389;
L394: (( dom C35 ) = ( R7 \/ { R5 } ) & ( ( R7 \/ { R5 } ) \ { R5 } ) = R7) by L383 , FUNCT_2:def 1 , ZFMISC_1:117;
L395: ( { R5 } \/ ( ( C35 | R7 ) " { R1 } ) ) = ( C35 " { R1 } ) by L394 , L393 , L388 , AFINSQ_2:66;
L396: (not R5 in ( ( dom C35 ) /\ R7 )) by L383 , XBOOLE_0:def 4;
L397: (not R5 in ( dom ( C35 | R7 ) )) by L396 , RELAT_1:61;
L398: (not R5 in ( ( C35 | R7 ) " { R1 } )) by L397 , FUNCT_1:def 7;
L399: ( card ( ( C35 | R7 ) " { R1 } ) ) = R10 by L391;
L400: ( card ( C35 " { R1 } ) ) = ( R10 + 1 ) by L399 , L395 , L398 , CARD_2:41;
thus L401: thesis by L400 , L390 , L393 , L386;
end;
L402: D29 c= ( Choose (R7 , R10 , R1 , R4) )
proof
let R2 being set;
assume L403: R2 in D29;
consider C36 being (Function of R7 , { R1 , R4 }) such that L404: R2 = C36 and L405: S8[ C36 , R7 , { R1 , R4 } ] by L403;
L406: ( C36 | R7 ) = C36;
L407: ( card ( C36 " { R1 } ) ) = R10 by L406 , L405;
thus L408: thesis by L407 , L404 , L255;
end;
L409: ( Choose (R7 , R10 , R1 , R4) ) c= D29
proof
let R2 being set;
assume L410: R2 in ( Choose (R7 , R10 , R1 , R4) );
consider C37 being (Function of R7 , { R1 , R4 }) such that L411: R2 = C37 and L412: ( card ( C37 " { R1 } ) ) = R10 by L410 , L255;
L413: ( dom C37 ) = R7 by FUNCT_2:def 1;
L414: S8[ C37 , R7 , { R1 , R4 } ] by L413 , L412 , RELAT_1:68;
thus L415: thesis by L414 , L411;
end;
L416: ({ R1 , R4 } is  empty implies R7 is  empty);
L417: ( card D29 ) = ( card D28 ) from STIRL2_1:sch 4(L416 , L383 , L379);
L418: D27 c= D28
proof
L419: R5 in { R5 } by TARSKI:def 1;
L420: R5 in ( R7 \/ { R5 } ) by L419 , XBOOLE_0:def 3;
let R2 being set;
assume L421: R2 in D27;
consider C38 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) such that L422: R2 = C38 and L423: ( card ( C38 " { R1 } ) ) = ( R10 + 1 ) and L424: ( C38 . R5 ) = R1 by L421;
L425: (not R5 in ( ( dom C38 ) /\ R7 )) by L383 , XBOOLE_0:def 4;
L426: (not R5 in ( dom ( C38 | R7 ) )) by L425 , RELAT_1:61;
L427: (not R5 in ( ( C38 | R7 ) " { R1 } )) by L426 , FUNCT_1:def 7;
L428: (( dom C38 ) = ( R7 \/ { R5 } ) & ( ( R7 \/ { R5 } ) \ { R5 } ) = R7) by L383 , FUNCT_2:def 1 , ZFMISC_1:117;
L429: ( ( ( C38 | R7 ) " { R1 } ) \/ { R5 } ) = ( C38 " { R1 } ) by L428 , L424 , L420 , AFINSQ_2:66;
L430: ( ( card ( ( C38 | R7 ) " { R1 } ) ) + 1 ) = ( R10 + 1 ) by L429 , L423 , L427 , CARD_2:41;
L431: S8[ C38 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } ) ] by L430;
L432: ( { R1 } \/ { R1 , R4 } ) = { R1 , R1 , R4 } by ENUMSET1:2;
L433: (( rng ( C38 | R7 ) ) c= { R1 , R4 } & C38 is (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R1 } ))) by L432 , ENUMSET1:30;
thus L434: thesis by L433 , L422 , L424 , L431;
end;
L435: D27 = D28 by L418 , L384 , XBOOLE_0:def 10;
thus L436: thesis by L435 , L402 , L409 , L417 , XBOOLE_0:def 10;
end;
theorem
L437: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R7 being  finite set holds (for R10 being Nat holds (((not R5 in R7) & R1 <> R4) implies ( card ( Choose (R7 , R10 , R1 , R4) ) ) = ( card { B68 where B68 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B68 " { R1 } ) ) = R10 & ( B68 . R5 ) = R4) } )))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R7 being  finite set;
let R10 being Nat;
assume that
L438: (not R5 in R7)
and
L439: R1 <> R4;
defpred S9[ set , set , set ] means (for B69 being Function holds (B69 = $1 implies ( card ( B69 " { R1 } ) ) = R10));
L440: (for B70 being (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } )) holds (( B70 . R5 ) = R4 implies (S9[ B70 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } ) ] iff S9[ ( B70 | R7 ) , R7 , { R1 , R4 } ])))
proof
let C39 being (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } ));
assume that
L441: ( C39 . R5 ) = R4;
L442: (( ( R7 \/ { R5 } ) \ { R5 } ) = R7 & ( dom C39 ) = ( R7 \/ { R5 } )) by L438 , FUNCT_2:def 1 , ZFMISC_1:117;
L443: ( ( C39 | R7 ) " { R1 } ) = ( C39 " { R1 } ) by L442 , L439 , L441 , AFINSQ_2:67;
thus L444: thesis by L443;
end;
set D30 = { B71 where B71 is (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } )) : (S9[ B71 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } ) ] & ( rng ( B71 | R7 ) ) c= { R1 , R4 } & ( B71 . R5 ) = R4) };
set D31 = { B72 where B72 is (Function of R7 , { R1 , R4 }) : S9[ B72 , R7 , { R1 , R4 } ] };
L445: ({ R1 , R4 } is  empty implies R7 is  empty);
L446: ( card D31 ) = ( card D30 ) from STIRL2_1:sch 4(L445 , L438 , L440);
set D32 = { B73 where B73 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B73 " { R1 } ) ) = R10 & ( B73 . R5 ) = R4) };
L447: D30 c= D32
proof
let R2 being set;
assume L448: R2 in D30;
consider C40 being (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } )) such that L449: R2 = C40 and L450: S9[ C40 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } ) ] and L451: ( rng ( C40 | R7 ) ) c= { R1 , R4 } and L452: ( C40 . R5 ) = R4 by L448;
L453: ( { R1 , R4 } \/ { R4 } ) = { R4 , R4 , R1 } by ENUMSET1:2;
L454: C40 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) by L453 , ENUMSET1:30;
L455: ( card ( C40 " { R1 } ) ) = R10 by L450;
thus L456: thesis by L455 , L449 , L452 , L454;
end;
L457: D32 c= D30
proof
let R2 being set;
assume L458: R2 in D32;
consider C41 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) such that L459: C41 = R2 and L460: ( card ( C41 " { R1 } ) ) = R10 and L461: ( C41 . R5 ) = R4 by L458;
L462: ( { R1 , R4 } \/ { R4 } ) = { R4 , R4 , R1 } by ENUMSET1:2;
L463: (( rng ( C41 | R7 ) ) c= { R1 , R4 } & C41 is (Function of ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } ))) by L462 , ENUMSET1:30;
L464: S9[ C41 , ( R7 \/ { R5 } ) , ( { R1 , R4 } \/ { R4 } ) ] by L460;
thus L465: thesis by L464 , L459 , L461 , L463;
end;
L466: ( Choose (R7 , R10 , R1 , R4) ) c= D31
proof
let R2 being set;
assume L467: R2 in ( Choose (R7 , R10 , R1 , R4) );
consider C42 being (Function of R7 , { R1 , R4 }) such that L468: R2 = C42 and L469: ( card ( C42 " { R1 } ) ) = R10 by L467 , L255;
L470: S9[ C42 , R7 , { R1 , R4 } ] by L469;
thus L471: thesis by L470 , L468;
end;
L472: D31 c= ( Choose (R7 , R10 , R1 , R4) )
proof
let R2 being set;
assume L473: R2 in D31;
consider C43 being (Function of R7 , { R1 , R4 }) such that L474: R2 = C43 and L475: S9[ C43 , R7 , { R1 , R4 } ] by L473;
L476: ( card ( C43 " { R1 } ) ) = R10 by L475;
thus L477: thesis by L476 , L474 , L255;
end;
L478: ( Choose (R7 , R10 , R1 , R4) ) = D31 by L472 , L466 , XBOOLE_0:def 10;
thus L479: thesis by L478 , L447 , L457 , L446 , XBOOLE_0:def 10;
end;
L480: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R7 being  finite set holds (for R10 being Nat holds (R1 <> R4 implies (( { B74 where B74 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B74 " { R1 } ) ) = ( R10 + 1 ) & ( B74 . R5 ) = R1) } \/ { B75 where B75 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B75 " { R1 } ) ) = ( R10 + 1 ) & ( B75 . R5 ) = R4) } ) = ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) ) & { B76 where B76 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B76 " { R1 } ) ) = ( R10 + 1 ) & ( B76 . R5 ) = R1) } misses { B77 where B77 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B77 " { R1 } ) ) = ( R10 + 1 ) & ( B77 . R5 ) = R4) })))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R7 being  finite set;
let R10 being Nat;
set D33 = { B78 where B78 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B78 " { R1 } ) ) = ( R10 + 1 ) & ( B78 . R5 ) = R1) };
set D34 = { B79 where B79 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B79 " { R1 } ) ) = ( R10 + 1 ) & ( B79 . R5 ) = R4) };
assume L481: R1 <> R4;
L482: D33 misses D34
proof
assume L483: D33 meets D34;
L484: ( D33 /\ D34 ) <> ( {} ) by L483 , XBOOLE_0:def 7;
consider R2 being set such that L485: R2 in ( D33 /\ D34 ) by L484 , XBOOLE_0:def 1;
L486: R2 in D34 by L485 , XBOOLE_0:def 4;
L487: (ex B80 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) st (R2 = B80 & ( card ( B80 " { R1 } ) ) = ( R10 + 1 ) & ( B80 . R5 ) = R4)) by L486;
L488: R2 in D33 by L485 , XBOOLE_0:def 4;
L489: (ex B81 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) st (R2 = B81 & ( card ( B81 " { R1 } ) ) = ( R10 + 1 ) & ( B81 . R5 ) = R1)) by L488;
thus L490: thesis by L489 , L481 , L487;
end;
L491: D34 c= ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) )
proof
let R2 being set;
assume L492: R2 in D34;
L493: (ex B82 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) st (R2 = B82 & ( card ( B82 " { R1 } ) ) = ( R10 + 1 ) & ( B82 . R5 ) = R4)) by L492;
thus L494: thesis by L493 , L255;
end;
L495: ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) ) c= ( D33 \/ D34 )
proof
let R2 being set;
assume L496: R2 in ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) );
consider C44 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) such that L497: (C44 = R2 & ( card ( C44 " { R1 } ) ) = ( R10 + 1 )) by L496 , L255;
L498: R5 in { R5 } by TARSKI:def 1;
L499: R5 in ( R7 \/ { R5 } ) by L498 , XBOOLE_0:def 3;
L500: ( dom C44 ) = ( R7 \/ { R5 } ) by FUNCT_2:def 1;
L501: ( C44 . R5 ) in ( rng C44 ) by L500 , L499 , FUNCT_1:def 3;
L502: (( C44 . R5 ) = R1 or ( C44 . R5 ) = R4) by L501 , TARSKI:def 2;
L503: (R2 in D33 or R2 in D34) by L502 , L497;
thus L504: thesis by L503 , XBOOLE_0:def 3;
end;
L505: D33 c= ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) )
proof
let R2 being set;
assume L506: R2 in D33;
L507: (ex B83 being (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) st (R2 = B83 & ( card ( B83 " { R1 } ) ) = ( R10 + 1 ) & ( B83 . R5 ) = R1)) by L506;
thus L508: thesis by L507 , L255;
end;
L509: ( D33 \/ D34 ) c= ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) ) by L505 , L491 , XBOOLE_1:8;
thus L510: thesis by L509 , L495 , L482 , XBOOLE_0:def 10;
end;
theorem
L511: (for R1 being set holds (for R4 being set holds (for R5 being set holds (for R7 being  finite set holds (for R10 being Nat holds ((R1 <> R4 & (not R5 in R7)) implies ( card ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) ) ) = ( ( card ( Choose (R7 , ( R10 + 1 ) , R1 , R4) ) ) + ( card ( Choose (R7 , R10 , R1 , R4) ) ) )))))))
proof
let R1 being set;
let R4 being set;
let R5 being set;
let R7 being  finite set;
let R10 being Nat;
assume that
L512: R1 <> R4
and
L513: (not R5 in R7);
set D35 = { B84 where B84 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B84 " { R1 } ) ) = ( R10 + 1 ) & ( B84 . R5 ) = R4) };
set D36 = { B85 where B85 is (Function of ( R7 \/ { R5 } ) , { R1 , R4 }) : (( card ( B85 " { R1 } ) ) = ( R10 + 1 ) & ( B85 . R5 ) = R1) };
L514: ( D36 \/ D35 ) = ( Choose (( R7 \/ { R5 } ) , ( R10 + 1 ) , R1 , R4) ) by L512 , L480;
L515: (D36 c= ( D36 \/ D35 ) & D35 c= ( D36 \/ D35 )) by XBOOLE_1:7;
reconsider D37 = D36 , D38 = D35 as  finite set by L515 , L514;
L516: ( card D37 ) = ( card ( Choose (R7 , R10 , R1 , R4) ) ) by L513 , L378;
L517: (( card ( D37 \/ D38 ) ) = ( ( card D37 ) + ( card D38 ) ) & ( card D38 ) = ( card ( Choose (R7 , ( R10 + 1 ) , R1 , R4) ) )) by L512 , L513 , L480 , L437 , CARD_2:40;
thus L518: thesis by L517 , L512 , L516 , L480;
end;
::$N Formula for the Number of Combinations
theorem
L519: (for R1 being set holds (for R4 being set holds (for R7 being  finite set holds (for R10 being Nat holds (R1 <> R4 implies ( card ( Choose (R7 , R10 , R1 , R4) ) ) = ( ( card R7 ) choose R10 ))))))
proof
let R1 being set;
let R4 being set;
let R7 being  finite set;
let R10 being Nat;
defpred S10[ Nat ] means (for R10 being Nat holds (for R7 being  finite set holds (( R10 + ( card R7 ) ) <= $1 implies ( card ( Choose (R7 , R10 , R1 , R4) ) ) = ( ( card R7 ) choose R10 ))));
assume L520: R1 <> R4;
L521: (for R9 being Nat holds (S10[ R9 ] implies S10[ ( R9 + 1 ) ]))
proof
let R9 being Nat;
assume that
L522: S10[ R9 ];
let R10 being Nat;
let R7 being  finite set;
assume that
L523: ( R10 + ( card R7 ) ) <= ( R9 + 1 );
per cases  by L523 , XXREAL_0:1;
suppose L524: ( R10 + ( card R7 ) ) < ( R9 + 1 );

L525: ( R10 + ( card R7 ) ) <= R9 by L524 , NAT_1:13;
thus L526: thesis by L525 , L522;
end;
suppose L527: ( R10 + ( card R7 ) ) = ( R9 + 1 );

per cases ;
suppose L528: (R10 = ( 0 ) & ( card R7 ) >= ( 0 ));

L529: ( card ( Choose (R7 , R10 , R1 , R4) ) ) = 1 by L528 , L520 , L293;
thus L530: thesis by L529 , L528 , NEWTON:19;
end;
suppose L531: (R10 > ( 0 ) & ( card R7 ) = ( 0 ));

L532: ( Choose (R7 , R10 , R1 , R4) ) is  empty by L531 , L287;
thus L533: thesis by L532 , L531 , NEWTON:def 3;
end;
suppose L534: (R10 > ( 0 ) & ( card R7 ) > ( 0 ));

reconsider D39 = ( ( card R7 ) - 1 ) as (Element of ( NAT )) by L534 , NAT_1:20;
reconsider D40 = ( R10 - 1 ) as (Element of ( NAT )) by L534 , NAT_1:20;
consider R5 being set such that L535: R5 in R7 by L534 , CARD_1:27 , XBOOLE_0:def 1;
set D41 = ( R7 \ { R5 } );
L536: R5 in { R5 } by TARSKI:def 1;
L537: (not R5 in D41) by L536 , XBOOLE_0:def 5;
L538: ( D41 \/ { R5 } ) = R7 by L535 , ZFMISC_1:116;
L539: ( card ( Choose (R7 , ( D40 + 1 ) , R1 , R4) ) ) = ( ( card ( Choose (D41 , ( D40 + 1 ) , R1 , R4) ) ) + ( card ( Choose (D41 , D40 , R1 , R4) ) ) ) by L538 , L520 , L537 , L511;
L540: ( card R7 ) = ( D39 + 1 );
L541: ( card D41 ) = D39 by L540 , L535 , STIRL2_1:55;
L542: D39 < ( D39 + 1 ) by NAT_1:13;
L543: ( card D41 ) < ( card R7 ) by L542 , L535 , STIRL2_1:55;
L544: ( R10 + ( card D41 ) ) < ( R9 + 1 ) by L543 , L527 , XREAL_1:8;
L545: ( R10 + ( card D41 ) ) <= R9 by L544 , NAT_1:13;
L546: ( card ( Choose (D41 , ( D40 + 1 ) , R1 , R4) ) ) = ( ( card D41 ) choose ( D40 + 1 ) ) by L545 , L522;
L547: D40 < ( D40 + 1 ) by NAT_1:13;
L548: ( D40 + ( card D41 ) ) < ( R9 + 1 ) by L547 , L527 , L543 , XREAL_1:8;
L549: ( D40 + ( card D41 ) ) <= R9 by L548 , NAT_1:13;
L550: ( card ( Choose (D41 , D40 , R1 , R4) ) ) = ( ( card D41 ) choose D40 ) by L549 , L522;
L551: ( card R7 ) = ( D39 + 1 );
thus L552: thesis by L551 , L546 , L550 , L539 , L541 , NEWTON:22;
end;
end;
end;
L555: S10[ ( 0 ) ]
proof
let R10 being Nat;
let R7 being  finite set;
L556: ( ( 0 ) choose ( 0 ) ) = 1 by NEWTON:19;
assume L557: ( R10 + ( card R7 ) ) <= ( 0 );
L558: (( R10 + ( card R7 ) ) = ( 0 ) & ( card R7 ) = ( 0 )) by L557;
thus L559: thesis by L558 , L520 , L293 , L556;
end;
L560: (for R9 being Nat holds S10[ R9 ]) from NAT_1:sch 2(L555 , L521);
L561: S10[ ( R10 + ( card R7 ) ) ] by L560;
thus L562: thesis by L561;
end;
theorem
L563: (for R1 being set holds (for R4 being set holds (for R7 being  finite set holds (for R8 being  finite set holds (R1 <> R4 implies ( ( R8 --> R4 ) +* ( R7 --> R1 ) ) in ( Choose (( R7 \/ R8 ) , ( card R7 ) , R1 , R4) ))))))
proof
let R1 being set;
let R4 being set;
let R7 being  finite set;
let R8 being  finite set;
set D42 = ( ( R8 --> R4 ) +* ( R7 --> R1 ) );
L564: (( dom ( R8 --> R4 ) ) = R8 & ( dom ( R7 --> R1 ) ) = R7) by FUNCOP_1:13;
L565: ( dom D42 ) = ( R7 \/ R8 ) by L564 , FUNCT_4:def 1;
L566: { R4 } c= { R1 , R4 } by ZFMISC_1:7;
L567: ( rng ( R8 --> R4 ) ) c= { R1 , R4 } by L566 , XBOOLE_1:1;
L568: { R1 } c= { R1 , R4 } by ZFMISC_1:7;
L569: ( rng ( R7 --> R1 ) ) c= { R1 , R4 } by L568 , XBOOLE_1:1;
L570: (( rng D42 ) c= ( ( rng ( R7 --> R1 ) ) \/ ( rng ( R8 --> R4 ) ) ) & ( ( rng ( R7 --> R1 ) ) \/ ( rng ( R8 --> R4 ) ) ) c= { R1 , R4 }) by L569 , L567 , FUNCT_4:17 , XBOOLE_1:8;
reconsider D43 = D42 as (Function of ( R7 \/ R8 ) , { R1 , R4 }) by L570 , L565 , FUNCT_2:2 , XBOOLE_1:1;
assume L571: R1 <> R4;
L572: ( D43 " { R1 } ) c= R7
proof
let R5 being set;
assume that
L573: R5 in ( D43 " { R1 } );
L574: (R5 in R7 or R5 in R8) by L573 , XBOOLE_0:def 3;
L575: ( D43 . R5 ) in { R1 } by L573 , FUNCT_1:def 7;
L576: ( D43 . R5 ) = R1 by L575 , TARSKI:def 1;
L577: R5 in ( dom D43 ) by L573 , FUNCT_1:def 7;
L578: R5 in ( ( dom ( R7 --> R1 ) ) \/ ( dom ( R8 --> R4 ) ) ) by L577 , FUNCT_4:def 1;
assume L579: (not R5 in R7);
L580: R7 = ( dom ( R7 --> R1 ) ) by FUNCOP_1:13;
L581: ( D43 . R5 ) = ( ( R8 --> R4 ) . R5 ) by L580 , L579 , L578 , FUNCT_4:def 1;
thus L582: contradiction by L581 , L571 , L579 , L574 , L576 , FUNCOP_1:7;
end;
L583: R7 c= ( D43 " { R1 } )
proof
let R5 being set;
assume that
L584: R5 in R7;
L585: R5 in ( dom D43 ) by L565 , L584 , XBOOLE_0:def 3;
L586: R5 in ( dom ( R7 --> R1 ) ) by L584 , FUNCOP_1:13;
L587: ( D43 . R5 ) = ( ( R7 --> R1 ) . R5 ) by L586 , FUNCT_4:13;
L588: ( ( R7 --> R1 ) . R5 ) = R1 by L584 , FUNCOP_1:7;
L589: ( D43 . R5 ) in { R1 } by L588 , L587 , TARSKI:def 1;
thus L590: thesis by L589 , L585 , FUNCT_1:def 7;
end;
L591: R7 = ( D43 " { R1 } ) by L583 , L572 , XBOOLE_0:def 10;
thus L592: thesis by L591 , L255;
end;
theorem
L593: (for R1 being set holds (for R4 being set holds (for R7 being  finite set holds (for R8 being  finite set holds ((R1 <> R4 & R7 misses R8) implies ( ( R7 --> R1 ) +* ( R8 --> R4 ) ) in ( Choose (( R7 \/ R8 ) , ( card R7 ) , R1 , R4) ))))))
proof
let R1 being set;
let R4 being set;
let R7 being  finite set;
let R8 being  finite set;
assume that
L594: R1 <> R4
and
L595: R7 misses R8;
L596: (( dom ( R7 --> R1 ) ) = R7 & ( dom ( R8 --> R4 ) ) = R8) by FUNCOP_1:13;
L597: ( ( R7 --> R1 ) +* ( R8 --> R4 ) ) = ( ( R8 --> R4 ) +* ( R7 --> R1 ) ) by L596 , L595 , FUNCT_4:35;
thus L598: thesis by L597 , L594 , L563;
end;
definition
let C45 , C46 being Function;
let C47 being set;
func Intersection (C45 , C46 , C47) -> (Subset of ( union ( rng C45 ) )) means 
:L599: (for R5 being set holds (R5 in it iff (R5 in ( union ( rng C45 ) ) & (for R1 being set holds ((R1 in ( dom C46 ) & ( C46 . R1 ) = C47) implies R5 in ( C45 . R1 ))))));
existence
proof
defpred S11[ set ] means (for R1 being set holds ((R1 in ( dom C46 ) & ( C46 . R1 ) = C47) implies $1 in ( C45 . R1 )));
consider C48 being set such that L600: (for R5 being set holds (R5 in C48 iff (R5 in ( union ( rng C45 ) ) & S11[ R5 ]))) from XBOOLE_0:sch 1;
L601: C48 c= ( union ( rng C45 ) )
proof
let R1 being set;
assume L602: R1 in C48;
thus L603: thesis by L602 , L600;
end;
reconsider D44 = C48 as (Subset of ( union ( rng C45 ) )) by L601;
take D44;
thus L604: thesis by L600;
end;
uniqueness
proof
let C49 , C50 being (Subset of ( union ( rng C45 ) ));
assume that
L605: (for R5 being set holds (R5 in C49 iff (R5 in ( union ( rng C45 ) ) & (for R1 being set holds ((R1 in ( dom C46 ) & ( C46 . R1 ) = C47) implies R5 in ( C45 . R1 ))))))
and
L606: (for R5 being set holds (R5 in C50 iff (R5 in ( union ( rng C45 ) ) & (for R1 being set holds ((R1 in ( dom C46 ) & ( C46 . R1 ) = C47) implies R5 in ( C45 . R1 ))))));
L607: (for R5 being set holds (R5 in C49 iff R5 in C50))
proof
let R5 being set;
L608: (R5 in C49 iff (R5 in ( union ( rng C45 ) ) & (for R1 being set holds ((R1 in ( dom C46 ) & ( C46 . R1 ) = C47) implies R5 in ( C45 . R1 ))))) by L605;
thus L609: thesis by L608 , L606;
end;
thus L610: thesis by L607 , TARSKI:1;
end;
end;
theorem
L612: (for R1 being set holds (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (( ( dom R13 ) /\ ( R14 " { R1 } ) ) is non  empty implies (R4 in ( Intersection (R13 , R14 , R1) ) iff (for R5 being set holds ((R5 in ( dom R14 ) & ( R14 . R5 ) = R1) implies R4 in ( R13 . R5 )))))))))
proof
let R1 being set;
let R4 being set;
let R13 being Function;
let R14 being Function;
assume that
L613: ( ( dom R13 ) /\ ( R14 " { R1 } ) ) is non  empty;
thus L614: (R4 in ( Intersection (R13 , R14 , R1) ) implies (for R5 being set holds ((R5 in ( dom R14 ) & ( R14 . R5 ) = R1) implies R4 in ( R13 . R5 )))) by L599;
thus L615: ((for R5 being set holds ((R5 in ( dom R14 ) & ( R14 . R5 ) = R1) implies R4 in ( R13 . R5 ))) implies R4 in ( Intersection (R13 , R14 , R1) ))
proof
consider R5 being set such that L616: R5 in ( ( dom R13 ) /\ ( R14 " { R1 } ) ) by L613 , XBOOLE_0:def 1;
L617: R5 in ( R14 " { R1 } ) by L616 , XBOOLE_0:def 4;
L618: ( R14 . R5 ) in { R1 } by L617 , FUNCT_1:def 7;
L619: ( R14 . R5 ) = R1 by L618 , TARSKI:def 1;
L620: R5 in ( dom R13 ) by L616 , XBOOLE_0:def 4;
L621: ( R13 . R5 ) in ( rng R13 ) by L620 , FUNCT_1:def 3;
assume L622: (for R5 being set holds ((R5 in ( dom R14 ) & ( R14 . R5 ) = R1) implies R4 in ( R13 . R5 )));
L623: R5 in ( dom R14 ) by L617 , FUNCT_1:def 7;
L624: R4 in ( R13 . R5 ) by L623 , L622 , L619;
L625: R4 in ( union ( rng R13 ) ) by L624 , L621 , TARSKI:def 4;
thus L626: thesis by L625 , L622 , L599;
end;

end;
theorem
L616: (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (( Intersection (R13 , R14 , R4) ) is non  empty implies ( R14 " { R4 } ) c= ( dom R13 )))))
proof
let R4 being set;
let R13 being Function;
let R14 being Function;
assume L617: ( Intersection (R13 , R14 , R4) ) is non  empty;
consider R5 being set such that L618: R5 in ( Intersection (R13 , R14 , R4) ) by L617 , XBOOLE_0:def 1;
assume L619: (not ( R14 " { R4 } ) c= ( dom R13 ));
consider R1 being set such that L620: R1 in ( R14 " { R4 } ) and L621: (not R1 in ( dom R13 )) by L619 , TARSKI:def 3;
L622: ( R14 . R1 ) in { R4 } by L620 , FUNCT_1:def 7;
L623: ( R14 . R1 ) = R4 by L622 , TARSKI:def 1;
L624: R1 in ( dom R14 ) by L620 , FUNCT_1:def 7;
L625: R5 in ( R13 . R1 ) by L624 , L618 , L623 , L599;
thus L626: thesis by L625 , L621 , FUNCT_1:def 2;
end;
theorem
L627: (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (( Intersection (R13 , R14 , R4) ) is non  empty implies (for R2 being set holds (for R3 being set holds ((R2 in ( R14 " { R4 } ) & R3 in ( R14 " { R4 } )) implies ( R13 . R2 ) meets ( R13 . R3 ))))))))
proof
let R4 being set;
let R13 being Function;
let R14 being Function;
assume L628: ( Intersection (R13 , R14 , R4) ) is non  empty;
consider R5 being set such that L629: R5 in ( Intersection (R13 , R14 , R4) ) by L628 , XBOOLE_0:def 1;
let R2 being set;
let R3 being set;
assume that
L630: R2 in ( R14 " { R4 } )
and
L631: R3 in ( R14 " { R4 } );
L632: ( R14 . R3 ) in { R4 } by L631 , FUNCT_1:def 7;
L633: ( R14 . R3 ) = R4 by L632 , TARSKI:def 1;
L634: ( R14 . R2 ) in { R4 } by L630 , FUNCT_1:def 7;
L635: ( R14 . R2 ) = R4 by L634 , TARSKI:def 1;
L636: R3 in ( dom R14 ) by L631 , FUNCT_1:def 7;
L637: R5 in ( R13 . R3 ) by L636 , L629 , L633 , L599;
L638: R2 in ( dom R14 ) by L630 , FUNCT_1:def 7;
L639: R5 in ( R13 . R2 ) by L638 , L629 , L635 , L599;
thus L640: thesis by L639 , L637 , XBOOLE_0:3;
end;
theorem
L641: (for R4 being set holds (for R5 being set holds (for R13 being Function holds (for R14 being Function holds ((R5 in ( Intersection (R13 , R14 , R4) ) & R4 in ( rng R14 )) implies (ex R1 being set st (R1 in ( dom R14 ) & ( R14 . R1 ) = R4 & R5 in ( R13 . R1 ))))))))
proof
let R4 being set;
let R5 being set;
let R13 being Function;
let R14 being Function;
assume that
L642: R5 in ( Intersection (R13 , R14 , R4) )
and
L643: R4 in ( rng R14 );
L644: ( R14 " { R4 } ) <> ( {} ) by L643 , FUNCT_1:72;
consider R1 being set such that L645: R1 in ( R14 " { R4 } ) by L644 , XBOOLE_0:def 1;
L646: ( R14 . R1 ) in { R4 } by L645 , FUNCT_1:def 7;
L647: ( R14 . R1 ) = R4 by L646 , TARSKI:def 1;
L648: R1 in ( dom R14 ) by L645 , FUNCT_1:def 7;
L649: R1 in ( dom R14 ) by L645 , FUNCT_1:def 7;
L650: R5 in ( R13 . R1 ) by L649 , L642 , L647 , L599;
thus L651: thesis by L650 , L647 , L648;
end;
theorem
L652: (for R4 being set holds (for R13 being Function holds (for R14 being Function holds ((R13 is  empty or ( union ( rng R13 ) ) is  empty) implies ( Intersection (R13 , R14 , R4) ) = ( union ( rng R13 ) ))))) by RELAT_1:38 , ZFMISC_1:2;
theorem
L653: (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (( R13 | ( R14 " { R4 } ) ) = ( ( R14 " { R4 } ) --> ( union ( rng R13 ) ) ) implies ( Intersection (R13 , R14 , R4) ) = ( union ( rng R13 ) )))))
proof
let R4 being set;
let R13 being Function;
let R14 being Function;
set D45 = ( ( R14 " { R4 } ) --> ( union ( rng R13 ) ) );
assume L654: ( R13 | ( R14 " { R4 } ) ) = D45;
L655: ( union ( rng R13 ) ) c= ( Intersection (R13 , R14 , R4) )
proof
let R5 being set;
assume that
L656: R5 in ( union ( rng R13 ) );
L657:
now
let R1 being set;
assume that
L658: R1 in ( dom R14 )
and
L659: ( R14 . R1 ) = R4;
L660: ( R14 . R1 ) in { R4 } by L659 , TARSKI:def 1;
L661: R1 in ( R14 " { R4 } ) by L660 , L658 , FUNCT_1:def 7;
L662: (( dom D45 ) = ( R14 " { R4 } ) & ( D45 . R1 ) = ( union ( rng R13 ) )) by L661 , FUNCOP_1:7 , FUNCOP_1:13;
thus L663: R5 in ( R13 . R1 ) by L662 , L654 , L656 , L661 , FUNCT_1:47;
end;
thus L664: thesis by L657 , L656 , L599;
end;
thus L665: thesis by L655 , XBOOLE_0:def 10;
end;
theorem
L666: (for R4 being set holds (for R13 being Function holds (for R14 being Function holds ((( union ( rng R13 ) ) is non  empty & ( Intersection (R13 , R14 , R4) ) = ( union ( rng R13 ) )) implies ( R13 | ( R14 " { R4 } ) ) = ( ( R14 " { R4 } ) --> ( union ( rng R13 ) ) )))))
proof
let R4 being set;
let R13 being Function;
let R14 being Function;
set D46 = ( ( R14 " { R4 } ) --> ( union ( rng R13 ) ) );
assume that
L667: ( union ( rng R13 ) ) is non  empty
and
L668: ( Intersection (R13 , R14 , R4) ) = ( union ( rng R13 ) );
L669: ( ( dom R13 ) /\ ( R14 " { R4 } ) ) = ( dom ( R13 | ( R14 " { R4 } ) ) ) by RELAT_1:61;
L670: ( ( dom R13 ) /\ ( R14 " { R4 } ) ) = ( R14 " { R4 } ) by L667 , L668 , L616 , XBOOLE_1:28;
L671: ( dom ( R13 | ( R14 " { R4 } ) ) ) = ( dom D46 ) by L670 , L669 , FUNCOP_1:13;
assume L672: ( R13 | ( R14 " { R4 } ) ) <> D46;
consider R1 being set such that L673: R1 in ( dom ( R13 | ( R14 " { R4 } ) ) ) and L674: ( ( R13 | ( R14 " { R4 } ) ) . R1 ) <> ( D46 . R1 ) by L672 , L671 , FUNCT_1:2;
L675: R1 in ( ( dom R13 ) /\ ( R14 " { R4 } ) ) by L673 , RELAT_1:61;
L676: R1 in ( dom R13 ) by L675 , XBOOLE_0:def 4;
L677: R1 in ( ( dom R13 ) /\ ( R14 " { R4 } ) ) by L673 , RELAT_1:61;
L678: R1 in ( R14 " { R4 } ) by L677 , XBOOLE_0:def 4;
L679: ( D46 . R1 ) = ( union ( rng R13 ) ) by L678 , FUNCOP_1:7;
L680: ( R14 . R1 ) in { R4 } by L678 , FUNCT_1:def 7;
L681: ( R14 . R1 ) = R4 by L680 , TARSKI:def 1;
L682: ( R13 . R1 ) = ( ( R13 | ( R14 " { R4 } ) ) . R1 ) by L673 , FUNCT_1:47;
L683: ( ( R13 | ( R14 " { R4 } ) ) . R1 ) in ( rng R13 ) by L682 , L676 , FUNCT_1:def 3;
L684: ( ( R13 | ( R14 " { R4 } ) ) . R1 ) c= ( D46 . R1 ) by L683 , L679 , ZFMISC_1:74;
L685: (not ( union ( rng R13 ) ) c= ( ( R13 | ( R14 " { R4 } ) ) . R1 )) by L684 , L674 , L679 , XBOOLE_0:def 10;
consider R5 being set such that L686: R5 in ( union ( rng R13 ) ) and L687: (not R5 in ( ( R13 | ( R14 " { R4 } ) ) . R1 )) by L685 , TARSKI:def 3;
L688: R1 in ( dom R14 ) by L678 , FUNCT_1:def 7;
L689: R5 in ( R13 . R1 ) by L688 , L668 , L686 , L681 , L599;
thus L690: thesis by L689 , L673 , L687 , FUNCT_1:47;
end;
theorem
L691: (for R4 being set holds (for R13 being Function holds ( Intersection (R13 , ( {} ) , R4) ) = ( union ( rng R13 ) )))
proof
let R4 being set;
let R13 being Function;
L692: ( R13 | (( ( {} ) " { R4 } ) qua set) ) = ( ( ( {} ) " { R4 } ) --> ( union ( rng R13 ) ) );
thus L693: thesis by L692 , L653;
end;
theorem
L694: (for R4 being set holds (for R6 being set holds (for R13 being Function holds (for R14 being Function holds ( Intersection (R13 , R14 , R4) ) c= ( Intersection (R13 , ( R14 | R6 ) , R4) )))))
proof
let R4 being set;
let R6 being set;
let R13 being Function;
let R14 being Function;
let R5 being set;
assume that
L695: R5 in ( Intersection (R13 , R14 , R4) );
L696:
now
let R1 being set;
assume that
L697: R1 in ( dom ( R14 | R6 ) )
and
L698: ( ( R14 | R6 ) . R1 ) = R4;
L699: R1 in ( ( dom R14 ) /\ R6 ) by L697 , RELAT_1:61;
L700: R1 in ( dom R14 ) by L699 , XBOOLE_0:def 4;
L701: ( R14 . R1 ) = R4 by L697 , L698 , FUNCT_1:47;
thus L702: R5 in ( R13 . R1 ) by L701 , L695 , L700 , L599;
end;
thus L703: thesis by L696 , L695 , L599;
end;
theorem
L704: (for R4 being set holds (for R6 being set holds (for R13 being Function holds (for R14 being Function holds (( R14 " { R4 } ) = ( ( R14 | R6 ) " { R4 } ) implies ( Intersection (R13 , R14 , R4) ) = ( Intersection (R13 , ( R14 | R6 ) , R4) ))))))
proof
let R4 being set;
let R6 being set;
let R13 being Function;
let R14 being Function;
assume L705: ( R14 " { R4 } ) = ( ( R14 | R6 ) " { R4 } );
L706: ( Intersection (R13 , ( R14 | R6 ) , R4) ) c= ( Intersection (R13 , R14 , R4) )
proof
let R5 being set;
assume that
L707: R5 in ( Intersection (R13 , ( R14 | R6 ) , R4) );
L708:
now
let R1 being set;
assume that
L709: R1 in ( dom R14 )
and
L710: ( R14 . R1 ) = R4;
L711: ( R14 . R1 ) in { R4 } by L710 , TARSKI:def 1;
L712: R1 in ( ( R14 | R6 ) " { R4 } ) by L711 , L705 , L709 , FUNCT_1:def 7;
L713: ( ( R14 | R6 ) . R1 ) in { R4 } by L712 , FUNCT_1:def 7;
L714: ( ( R14 | R6 ) . R1 ) = R4 by L713 , TARSKI:def 1;
L715: R1 in ( dom ( R14 | R6 ) ) by L712 , FUNCT_1:def 7;
thus L716: R5 in ( R13 . R1 ) by L715 , L707 , L714 , L599;
end;
thus L717: thesis by L708 , L707 , L599;
end;
L718: ( Intersection (R13 , R14 , R4) ) c= ( Intersection (R13 , ( R14 | R6 ) , R4) ) by L694;
thus L719: thesis by L718 , L706 , XBOOLE_0:def 10;
end;
theorem
L720: (for R4 being set holds (for R6 being set holds (for R13 being Function holds (for R14 being Function holds ( Intersection (( R13 | R6 ) , R14 , R4) ) c= ( Intersection (R13 , R14 , R4) )))))
proof
let R4 being set;
let R6 being set;
let R13 being Function;
let R14 being Function;
let R5 being set;
assume that
L721: R5 in ( Intersection (( R13 | R6 ) , R14 , R4) );
L722:
now
L723: ( R14 " { R4 } ) c= ( dom ( R13 | R6 ) ) by L721 , L616;
let R1 being set;
assume that
L724: R1 in ( dom R14 )
and
L725: ( R14 . R1 ) = R4;
L726: ( R14 . R1 ) in { R4 } by L725 , TARSKI:def 1;
L727: R1 in ( R14 " { R4 } ) by L726 , L724 , FUNCT_1:def 7;
L728: R5 in ( ( R13 | R6 ) . R1 ) by L721 , L724 , L725 , L599;
thus L729: R5 in ( R13 . R1 ) by L728 , L727 , L723 , FUNCT_1:47;
end;
L730: (( union ( rng ( R13 | R6 ) ) ) c= ( union ( rng R13 ) ) & R5 in ( union ( rng ( R13 | R6 ) ) )) by L721 , RELAT_1:70 , ZFMISC_1:77;
thus L731: thesis by L730 , L722 , L599;
end;
theorem
L732: (for R4 being set holds (for R6 being set holds (for R13 being Function holds (for R14 being Function holds ((R4 in ( rng R14 ) & ( R14 " { R4 } ) c= R6) implies ( Intersection (( R13 | R6 ) , R14 , R4) ) = ( Intersection (R13 , R14 , R4) ))))))
proof
let R4 being set;
let R6 being set;
let R13 being Function;
let R14 being Function;
assume that
L733: R4 in ( rng R14 )
and
L734: ( R14 " { R4 } ) c= R6;
L735: ( Intersection (R13 , R14 , R4) ) c= ( Intersection (( R13 | R6 ) , R14 , R4) )
proof
let R5 being set;
assume that
L736: R5 in ( Intersection (R13 , R14 , R4) );
L737:
now
let R1 being set;
assume that
L738: R1 in ( dom R14 )
and
L739: ( R14 . R1 ) = R4;
L740: ( R14 . R1 ) in { R4 } by L739 , TARSKI:def 1;
L741: R1 in ( R14 " { R4 } ) by L740 , L738 , FUNCT_1:def 7;
L742: R5 in ( R13 . R1 ) by L736 , L738 , L739 , L599;
L743: R1 in ( dom R13 ) by L742 , FUNCT_1:def 2;
L744: R1 in ( ( dom R13 ) /\ R6 ) by L743 , L734 , L741 , XBOOLE_0:def 4;
L745: R1 in ( dom ( R13 | R6 ) ) by L744 , RELAT_1:61;
L746: R5 in ( R13 . R1 ) by L736 , L738 , L739 , L599;
thus L747: R5 in ( ( R13 | R6 ) . R1 ) by L746 , L745 , FUNCT_1:47;
end;
consider R1 being set such that L748: R1 in ( dom R14 ) and L749: ( R14 . R1 ) = R4 and L750: R5 in ( R13 . R1 ) by L733 , L736 , L641;
L751: ( R14 . R1 ) in { R4 } by L749 , TARSKI:def 1;
L752: R1 in ( R14 " { R4 } ) by L751 , L748 , FUNCT_1:def 7;
L753: R1 in ( dom R13 ) by L750 , FUNCT_1:def 2;
L754: R1 in ( ( dom R13 ) /\ R6 ) by L753 , L734 , L752 , XBOOLE_0:def 4;
L755: R1 in ( dom ( R13 | R6 ) ) by L754 , RELAT_1:61;
L756: ( ( R13 | R6 ) . R1 ) in ( rng ( R13 | R6 ) ) by L755 , FUNCT_1:def 3;
L757: R5 in ( ( R13 | R6 ) . R1 ) by L737 , L748 , L749;
L758: R5 in ( union ( rng ( R13 | R6 ) ) ) by L757 , L756 , TARSKI:def 4;
thus L759: thesis by L758 , L737 , L599;
end;
L760: ( Intersection (( R13 | R6 ) , R14 , R4) ) c= ( Intersection (R13 , R14 , R4) ) by L720;
thus L761: thesis by L760 , L735 , XBOOLE_0:def 10;
end;
theorem
L762: (for R1 being set holds (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (R1 in ( R14 " { R4 } ) implies ( Intersection (R13 , R14 , R4) ) c= ( R13 . R1 ))))))
proof
let R1 being set;
let R4 being set;
let R13 being Function;
let R14 being Function;
assume L763: R1 in ( R14 " { R4 } );
L764: R1 in ( dom R14 ) by L763 , FUNCT_1:def 7;
L765: ( R14 . R1 ) in { R4 } by L763 , FUNCT_1:def 7;
L766: ( R14 . R1 ) = R4 by L765 , TARSKI:def 1;
let R5 being set;
assume L767: R5 in ( Intersection (R13 , R14 , R4) );
thus L768: thesis by L767 , L764 , L766 , L599;
end;
theorem
L769: (for R1 being set holds (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (R1 in ( R14 " { R4 } ) implies ( ( Intersection (R13 , ( R14 | ( ( dom R14 ) \ { R1 } ) ) , R4) ) /\ ( R13 . R1 ) ) = ( Intersection (R13 , R14 , R4) ))))))
proof
let R1 being set;
let R4 being set;
let R13 being Function;
let R14 being Function;
set D47 = ( ( dom R14 ) \ { R1 } );
set D48 = ( R14 | D47 );
set D49 = ( Intersection (R13 , R14 , R4) );
set D50 = ( Intersection (R13 , D48 , R4) );
assume L770: R1 in ( R14 " { R4 } );
L771: D49 c= ( R13 . R1 ) by L770 , L762;
L772: ( D50 /\ ( R13 . R1 ) ) c= D49
proof
let R5 being set;
assume that
L773: R5 in ( D50 /\ ( R13 . R1 ) );
L774:
now
let R2 being set;
assume that
L775: R2 in ( dom R14 )
and
L776: ( R14 . R2 ) = R4;
per cases  by L775 , XBOOLE_0:def 5;
suppose L777: R2 in D47;

L778: R5 in D50 by L773 , XBOOLE_0:def 4;
L779: (( ( dom R14 ) /\ D47 ) = ( dom D48 ) & ( ( dom R14 ) /\ D47 ) = D47) by RELAT_1:61 , XBOOLE_1:28;
L780: ( D48 . R2 ) = R4 by L779 , L776 , L777 , FUNCT_1:47;
thus L781: R5 in ( R13 . R2 ) by L780 , L777 , L779 , L778 , L599;
end;
suppose L782: R2 in { R1 };

L783: R2 = R1 by L782 , TARSKI:def 1;
thus L784: R5 in ( R13 . R2 ) by L783 , L773 , XBOOLE_0:def 4;
end;
end;
thus L786: thesis by L774 , L773 , L599;
end;
L787: D49 c= D50 by L694;
L788: D49 c= ( D50 /\ ( R13 . R1 ) ) by L787 , L771 , XBOOLE_1:19;
thus L789: thesis by L788 , L772 , XBOOLE_0:def 10;
end;
theorem
L790: (for R2 being set holds (for R3 being set holds (for R13 being Function holds (for B86 , B87 being Function holds (( B86 " { R2 } ) = ( B87 " { R3 } ) implies ( Intersection (R13 , B86 , R2) ) = ( Intersection (R13 , B87 , R3) ))))))
proof
let R2 being set;
let R3 being set;
let R13 being Function;
let C51 , C52 being Function;
assume that
L791: ( C51 " { R2 } ) = ( C52 " { R3 } );
thus L792: ( Intersection (R13 , C51 , R2) ) c= ( Intersection (R13 , C52 , R3) )
proof
let R5 being set;
assume that
L793: R5 in ( Intersection (R13 , C51 , R2) );
L794:
now
let R1 being set;
assume that
L795: R1 in ( dom C52 )
and
L796: ( C52 . R1 ) = R3;
L797: ( C52 . R1 ) in { R3 } by L796 , TARSKI:def 1;
L798: R1 in ( C51 " { R2 } ) by L797 , L791 , L795 , FUNCT_1:def 7;
L799: ( C51 . R1 ) in { R2 } by L798 , FUNCT_1:def 7;
L800: ( C51 . R1 ) = R2 by L799 , TARSKI:def 1;
L801: R1 in ( dom C51 ) by L798 , FUNCT_1:def 7;
thus L802: R5 in ( R13 . R1 ) by L801 , L793 , L800 , L599;
end;
thus L803: thesis by L794 , L793 , L599;
end;

thus L804: ( Intersection (R13 , C52 , R3) ) c= ( Intersection (R13 , C51 , R2) )
proof
let R5 being set;
assume that
L805: R5 in ( Intersection (R13 , C52 , R3) );
L806:
now
let R1 being set;
assume that
L807: R1 in ( dom C51 )
and
L808: ( C51 . R1 ) = R2;
L809: ( C51 . R1 ) in { R2 } by L808 , TARSKI:def 1;
L810: R1 in ( C52 " { R3 } ) by L809 , L791 , L807 , FUNCT_1:def 7;
L811: ( C52 . R1 ) in { R3 } by L810 , FUNCT_1:def 7;
L812: ( C52 . R1 ) = R3 by L811 , TARSKI:def 1;
L813: R1 in ( dom C52 ) by L810 , FUNCT_1:def 7;
thus L814: R5 in ( R13 . R1 ) by L813 , L805 , L812 , L599;
end;
thus L815: thesis by L806 , L805 , L599;
end;

end;
theorem
L805: (for R4 being set holds (for R13 being Function holds (for R14 being Function holds (( R14 " { R4 } ) = ( {} ) implies ( Intersection (R13 , R14 , R4) ) = ( union ( rng R13 ) )))))
proof
let R4 being set;
let R13 being Function;
let R14 being Function;
reconsider D51 = ( {} ) as set;
L806: (( R14 | D51 ) = ( {} ) & ( Intersection (R13 , ( {} ) , R4) ) = ( union ( rng R13 ) )) by L691;
assume L807: ( R14 " { R4 } ) = ( {} );
L808: ( ( R14 | D51 ) " { R4 } ) = ( R14 " { R4 } ) by L807;
thus L809: thesis by L808 , L806 , L790;
end;
theorem
L810: (for R1 being set holds (for R4 being set holds (for R13 being Function holds (for R14 being Function holds ({ R1 } = ( R14 " { R4 } ) implies ( Intersection (R13 , R14 , R4) ) = ( R13 . R1 ))))))
proof
let R1 being set;
let R4 being set;
let R13 being Function;
let R14 being Function;
L811: ( ( dom R14 ) \ { R1 } ) misses { R1 } by XBOOLE_1:79;
assume L812: { R1 } = ( R14 " { R4 } );
L813: ( ( R14 | ( ( dom R14 ) \ { R1 } ) ) " { R4 } ) = ( ( ( dom R14 ) \ { R1 } ) /\ { R1 } ) by L812 , FUNCT_1:70;
L814: ( ( R14 | ( ( dom R14 ) \ { R1 } ) ) " { R4 } ) = ( {} ) by L813 , L811 , XBOOLE_0:def 7;
L815: ( Intersection (R13 , ( R14 | ( ( dom R14 ) \ { R1 } ) ) , R4) ) = ( union ( rng R13 ) ) by L814 , L805;
L816: R1 in ( R14 " { R4 } ) by L812 , TARSKI:def 1;
L817: ( ( union ( rng R13 ) ) /\ ( R13 . R1 ) ) = ( Intersection (R13 , R14 , R4) ) by L816 , L815 , L769;
per cases ;
suppose L818: R1 in ( dom R13 );

L819: ( R13 . R1 ) in ( rng R13 ) by L818 , FUNCT_1:def 3;
thus L820: thesis by L819 , L817 , XBOOLE_1:28 , ZFMISC_1:74;
end;
suppose L821: (not R1 in ( dom R13 ));

L822: ( R13 . R1 ) = ( {} ) by L821 , FUNCT_1:def 2;
thus L823: thesis by L822 , L817;
end;
end;
theorem
L825: (for R2 being set holds (for R3 being set holds (for R4 being set holds (for R13 being Function holds (for R14 being Function holds ({ R2 , R3 } = ( R14 " { R4 } ) implies ( Intersection (R13 , R14 , R4) ) = ( ( R13 . R2 ) /\ ( R13 . R3 ) )))))))
proof
let R2 being set;
let R3 being set;
let R4 being set;
let R13 being Function;
let R14 being Function;
assume L826: { R2 , R3 } = ( R14 " { R4 } );
per cases ;
suppose L827: R2 = R3;

L828: ( R14 " { R4 } ) = { R2 } by L827 , L826 , ENUMSET1:29;
thus L829: thesis by L828 , L827 , L810;
end;
suppose L830: R2 <> R3;

L831: (( ( R14 " { R4 } ) /\ ( ( dom R14 ) \ { R2 } ) ) = ( ( ( R14 " { R4 } ) /\ ( dom R14 ) ) \ { R2 } ) & ( ( R14 " { R4 } ) /\ ( dom R14 ) ) = { R2 , R3 }) by L826 , RELAT_1:132 , XBOOLE_1:28 , XBOOLE_1:49;
L832: ( ( R14 " { R4 } ) /\ ( ( dom R14 ) \ { R2 } ) ) = { R3 } by L831 , L830 , ZFMISC_1:17;
L833: ( ( R14 | ( ( dom R14 ) \ { R2 } ) ) " { R4 } ) = { R3 } by L832 , FUNCT_1:70;
L834: R2 in ( R14 " { R4 } ) by L826 , TARSKI:def 2;
L835: ( ( Intersection (R13 , ( R14 | ( ( dom R14 ) \ { R2 } ) ) , R4) ) /\ ( R13 . R2 ) ) = ( Intersection (R13 , R14 , R4) ) by L834 , L769;
thus L836: thesis by L835 , L833 , L810;
end;
end;
theorem
L838: (for R1 being set holds (for R4 being set holds (for R13 being Function holds (R13 is non  empty implies (R4 in ( Intersection (R13 , ( ( dom R13 ) --> R1 ) , R1) ) iff (for R5 being set holds (R5 in ( dom R13 ) implies R4 in ( R13 . R5 ))))))))
proof
let R1 being set;
let R4 being set;
let R13 being Function;
assume that
L839: R13 is non  empty;
set D52 = ( ( dom R13 ) --> R1 );
thus L840: (R4 in ( Intersection (R13 , D52 , R1) ) implies (for R5 being set holds (R5 in ( dom R13 ) implies R4 in ( R13 . R5 ))))
proof
assume L841: R4 in ( Intersection (R13 , D52 , R1) );
let R5 being set;
assume L842: R5 in ( dom R13 );
L843: (R5 in ( dom D52 ) & ( D52 . R5 ) = R1) by L842 , FUNCOP_1:7 , FUNCOP_1:13;
thus L844: thesis by L843 , L841 , L599;
end;

L845: ( D52 " { R1 } ) = ( dom R13 ) by FUNCOP_1:15;
L846: ( ( dom R13 ) /\ ( D52 " { R1 } ) ) = ( dom R13 ) by L845;
assume L847: (for R5 being set holds (R5 in ( dom R13 ) implies R4 in ( R13 . R5 )));
L848: (for R5 being set holds ((R5 in ( dom D52 ) & ( D52 . R5 ) = R1) implies R4 in ( R13 . R5 ))) by L847;
thus L849: thesis by L848 , L839 , L846 , L612;
end;
registration
let C53 being  finite-yielding Function;
let C54 being set;
cluster ( C53 | C54 ) ->  finite-yielding;
coherence
proof
let R1 being set;
assume L850: R1 in ( dom ( C53 | C54 ) );
L851: ( ( C53 | C54 ) . R1 ) = ( C53 . R1 ) by L850 , FUNCT_1:47;
thus L852: thesis by L851;
end;
end;
registration
let C55 being  finite-yielding Function;
let C56 being Function;
cluster ( C55 * C56 ) ->  finite-yielding;
coherence
proof
let R1 being set;
assume L854: R1 in ( dom ( C55 * C56 ) );
L855: ( ( C55 * C56 ) . R1 ) = ( C55 . ( C56 . R1 ) ) by L854 , FUNCT_1:12;
thus L856: thesis by L855;
end;
cluster ( Intersect (C55 , C56) ) ->  finite-yielding;
coherence
proof
let R1 being set;
assume L857: R1 in ( dom ( Intersect (C55 , C56) ) );
L858: R1 in ( ( dom C55 ) /\ ( dom C56 ) ) by L857 , YELLOW20:def 2;
L859: ( ( Intersect (C55 , C56) ) . R1 ) = ( ( C55 . R1 ) /\ ( C56 . R1 ) ) by L858 , YELLOW20:def 2;
thus L860: thesis by L859;
end;
end;
theorem
L862: (for R4 being set holds (for R14 being Function holds (for R15 being  finite-yielding Function holds (R4 in ( rng R14 ) implies ( Intersection (R15 , R14 , R4) ) is  finite))))
proof
let R4 being set;
let R14 being Function;
let R15 being  finite-yielding Function;
assume L863: R4 in ( rng R14 );
consider R1 being set such that L864: R1 in ( dom R14 ) and L865: ( R14 . R1 ) = R4 by L863 , FUNCT_1:def 3;
L866: ( R14 . R1 ) in { R4 } by L865 , TARSKI:def 1;
L867: R1 in ( R14 " { R4 } ) by L866 , L864 , FUNCT_1:def 7;
L868: ( Intersection (R15 , R14 , R4) ) c= ( R15 . R1 ) by L867 , L762;
thus L869: thesis by L868;
end;
theorem
L870: (for R15 being  finite-yielding Function holds (( dom R15 ) is  finite implies ( union ( rng R15 ) ) is  finite))
proof
let R15 being  finite-yielding Function;
assume L871: ( dom R15 ) is  finite;
L872: ( rng R15 ) is  finite by L871 , FINSET_1:8;
thus L873: thesis by L872;
end;
theorem
L874: (for R1 being set holds (for R9 being Nat holds (for R10 being Nat holds (R1 in ( Choose (R9 , R10 , 1 , ( 0 )) ) iff (ex B88 being (XFinSequence of ( NAT )) st (B88 = R1 & ( dom B88 ) = R9 & ( rng B88 ) c= { ( 0 ) , 1 } & ( Sum B88 ) = R10))))))
proof
let R1 being set;
let R9 being Nat;
let R10 being Nat;
thus L875: (R1 in ( Choose (R9 , R10 , 1 , ( 0 )) ) implies (ex B89 being (XFinSequence of ( NAT )) st (B89 = R1 & ( dom B89 ) = R9 & ( rng B89 ) c= { ( 0 ) , 1 } & ( Sum B89 ) = R10)))
proof
assume L876: R1 in ( Choose (R9 , R10 , 1 , ( 0 )) );
consider C57 being (Function of R9 , { ( 0 ) , 1 }) such that L877: (R1 = C57 & ( card ( C57 " { 1 } ) ) = R10) by L876 , L255;
L878: ( rng C57 ) c= { ( 0 ) , 1 };
L879: ( dom C57 ) = R9 by FUNCT_2:def 1;
reconsider D53 = C57 as XFinSequence by L879 , AFINSQ_1:5;
L880: ( rng D53 ) is (Subset of ( NAT )) by L878 , XBOOLE_1:1;
reconsider D54 = D53 as (XFinSequence of ( NAT )) by L880 , RELAT_1:def 19;
take D54;
L881: ( Sum D54 ) = ( 1 * ( card ( D54 " { 1 } ) ) ) by L878 , AFINSQ_2:68;
thus L882: thesis by L881 , L877 , L878 , FUNCT_2:def 1;
end;

given C58 being (XFinSequence of ( NAT )) such that
L883: C58 = R1
and
L884: (( dom C58 ) = R9 & ( rng C58 ) c= { ( 0 ) , 1 } & ( Sum C58 ) = R10);

L885: (( 1 * ( card ( C58 " { 1 } ) ) ) = R10 & C58 is (Function of R9 , { ( 0 ) , 1 })) by L884 , AFINSQ_2:68 , FUNCT_2:2;
thus L886: thesis by L885 , L883 , L255;
end;
L887: (for R7 being  finite set holds (ex B90 being (Function of ( card R7 ) , R7) st B90 is  one-to-one))
proof
let R7 being  finite set;
L888: ( card R7 ) , R7 are_equipotent  by CARD_1:def 2;
consider C59 being Function such that L889: C59 is  one-to-one and L890: (( dom C59 ) = ( card R7 ) & ( rng C59 ) = R7) by L888 , WELLORD2:def 4;
L891: C59 is (Function of ( card R7 ) , R7) by L890 , FUNCT_2:1;
thus L892: thesis by L891 , L889;
end;
definition
canceled 1;
let R10 being Nat;
let C60 being  finite-yielding Function;
assume L893: ( dom C60 ) is  finite;
func Card_Intersection (C60 , R10) -> (Element of ( NAT )) means 
:L894: (for B91 , B92 being set holds (for B93 being  finite set holds (for B94 being (Function of ( card ( Choose (B93 , R10 , B91 , B92) ) ) , ( Choose (B93 , R10 , B91 , B92) )) holds ((( dom C60 ) = B93 & B94 is  one-to-one & B91 <> B92) implies (ex B95 being (XFinSequence of ( NAT )) st (( dom B95 ) = ( dom B94 ) & (for R5 being set holds (for R12 being Function holds ((R5 in ( dom B95 ) & R12 = ( B94 . R5 )) implies ( B95 . R5 ) = ( card ( Intersection (C60 , R12 , B91) ) )))) & it = ( Sum B95 )))))));
existence
proof
reconsider D55 = ( dom C60 ) as  finite set by L893;
set D56 = ( Choose (D55 , R10 , ( 0 ) , 1) );
L895: ( card D56 ) , D56 are_equipotent  by CARD_1:def 2;
consider C61 being Function such that L896: C61 is  one-to-one and L897: ( dom C61 ) = ( card D56 ) and L898: ( rng C61 ) = D56 by L895 , WELLORD2:def 4;
reconsider D57 = C61 as (Function of ( card D56 ) , D56) by L897 , L898 , FUNCT_2:1;
defpred S12[ set , set ] means (for R12 being Function holds (R12 = ( D57 . $1 ) implies $2 = ( card ( Intersection (C60 , R12 , ( 0 )) ) )));
L899: (for R1 being set holds (R1 in ( card D56 ) implies (ex R4 being set st (R4 in ( NAT ) & S12[ R1 , R4 ]))))
proof
let R1 being set;
assume L900: R1 in ( card D56 );
L901: R1 in ( dom D57 ) by L900 , CARD_1:27 , FUNCT_2:def 1;
L902: ( D57 . R1 ) in ( rng D57 ) by L901 , FUNCT_1:def 3;
consider C62 being (Function of D55 , { ( 0 ) , 1 }) such that L903: C62 = ( D57 . R1 ) and L904: ( card ( C62 " { ( 0 ) } ) ) = R10 by L902 , L255;
L905: ( union ( rng C60 ) ) is  finite by L893 , L870;
reconsider D58 = ( Intersection (C60 , C62 , ( 0 )) ) as  finite set by L905;
take ( card D58 );
thus L906: thesis by L903;
end;
consider C63 being (Function of ( card D56 ) , ( NAT )) such that L907: (for R1 being set holds (R1 in ( card D56 ) implies S12[ R1 , ( C63 . R1 ) ])) from FUNCT_2:sch 1(L899);
L908: ( dom C63 ) = ( card D56 ) by FUNCT_2:def 1;
reconsider D59 = C63 as XFinSequence by L908 , AFINSQ_1:5;
reconsider D60 = D59 as (XFinSequence of ( NAT ));
reconsider D61 = ( Sum D60 ) as (Element of ( NAT )) by ORDINAL1:def 12;
take D61;
let C64 , C65 being set;
let C66 being  finite set;
let C67 being (Function of ( card ( Choose (C66 , R10 , C64 , C65) ) ) , ( Choose (C66 , R10 , C64 , C65) ));
assume that
L909: ( dom C60 ) = C66
and
L910: C67 is  one-to-one
and
L911: C64 <> C65;
defpred S13[ set , set ] means (for B96 being (Function of D55 , { ( 0 ) , 1 }) holds (for B97 being (Function of C66 , { C64 , C65 }) holds ((B96 = ( D57 . $1 ) & B97 = ( C67 . $2 )) implies (( B96 " { ( 0 ) } ) = ( B97 " { C64 } ) & (for R5 being set holds (R5 in C66 implies ((( B96 . R5 ) = ( 0 ) iff ( B97 . R5 ) = C64) & (( B96 . R5 ) = 1 iff ( B97 . R5 ) = C65))))))));
set D62 = ( Choose (C66 , R10 , C64 , C65) );
L912: (for R2 being set holds (R2 in ( card D56 ) implies (ex R3 being set st (R3 in ( card D56 ) & S13[ R2 , R3 ]))))
proof
L913: ( card ( card ( Choose (C66 , R10 , C64 , C65) ) ) ) = ( card ( Choose (C66 , R10 , C64 , C65) ) );
L914: C67 is  onto by L913 , L910 , STIRL2_1:60;
L915: ( rng C67 ) = D62 by L914 , FUNCT_2:def 3;
let R2 being set;
assume L916: R2 in ( card D56 );
L917: ( D57 . R2 ) in ( rng D57 ) by L916 , L897 , FUNCT_1:def 3;
consider C68 being (Function of D55 , { ( 0 ) , 1 }) such that L918: C68 = ( D57 . R2 ) and L919: ( card ( C68 " { ( 0 ) } ) ) = R10 by L917 , L255;
defpred S14[ set , set ] means ((( C68 . $1 ) = ( 0 ) iff $2 = C64) & (( C68 . $1 ) = 1 iff $2 = C65));
L920: (for B98 being set holds (B98 in C66 implies (ex B99 being set st (B99 in { C64 , C65 } & S14[ B98 , B99 ]))))
proof
let C69 being set;
assume L921: C69 in C66;
L922: C69 in ( dom C68 ) by L921 , L909 , FUNCT_2:def 1;
L923: ( C68 . C69 ) in ( rng C68 ) by L922 , FUNCT_1:def 3;
L924: (( C68 . C69 ) = ( 0 ) or ( C68 . C69 ) = 1) by L923 , TARSKI:def 2;
L925: (C64 in { C64 , C65 } & C65 in { C64 , C65 }) by TARSKI:def 2;
thus L926: thesis by L925 , L911 , L924;
end;
consider C70 being (Function of C66 , { C64 , C65 }) such that L927: (for B100 being set holds (B100 in C66 implies S14[ B100 , ( C70 . B100 ) ])) from FUNCT_2:sch 1(L920);
L928: ( dom C68 ) = D55 by FUNCT_2:def 1;
L929: ( C68 " { ( 0 ) } ) c= ( C70 " { C64 } )
proof
let R5 being set;
assume L930: R5 in ( C68 " { ( 0 ) } );
L931: ( C68 . R5 ) in { ( 0 ) } by L930 , FUNCT_1:def 7;
L932: ( C68 . R5 ) = ( 0 ) by L931 , TARSKI:def 1;
L933: ( dom C68 ) = ( dom C70 ) by L909 , L928 , FUNCT_2:def 1;
L934: R5 in ( dom C70 ) by L933 , L928 , L930;
L935: ( C70 . R5 ) = C64 by L934 , L927 , L932;
L936: ( C70 . R5 ) in { C64 } by L935 , TARSKI:def 1;
thus L937: thesis by L936 , L928 , L930 , L933 , FUNCT_1:def 7;
end;
L938: ( C70 " { C64 } ) c= ( C68 " { ( 0 ) } )
proof
let R5 being set;
assume L939: R5 in ( C70 " { C64 } );
L940: ( C70 . R5 ) in { C64 } by L939 , FUNCT_1:def 7;
L941: ( C70 . R5 ) = C64 by L940 , TARSKI:def 1;
L942: ( C68 . R5 ) = ( 0 ) by L941 , L927 , L939;
L943: ( C68 . R5 ) in { ( 0 ) } by L942 , TARSKI:def 1;
thus L944: thesis by L943 , L909 , L928 , L939 , FUNCT_1:def 7;
end;
L945: ( C70 " { C64 } ) = ( C68 " { ( 0 ) } ) by L938 , L929 , XBOOLE_0:def 10;
L946: C70 in D62 by L945 , L919 , L255;
consider R3 being set such that L947: R3 in ( dom C67 ) and L948: ( C67 . R3 ) = C70 by L946 , L915 , FUNCT_1:def 3;
take R3;
L949: (( card D62 ) = ( ( card C66 ) choose R10 ) & ( card D56 ) = ( ( card D55 ) choose R10 )) by L911 , L519;
thus L950: R3 in ( card D56 ) by L949 , L909 , L947;
let C71 being (Function of D55 , { ( 0 ) , 1 });
let C72 being (Function of C66 , { C64 , C65 });
assume that
L951: (C71 = ( D57 . R2 ) & C72 = ( C67 . R3 ));
thus L952: ( C72 " { C64 } ) = ( C71 " { ( 0 ) } ) by L918 , L938 , L929 , L948 , L951 , XBOOLE_0:def 10;
let R5 being set;
assume L953: R5 in C66;
thus L954: thesis by L953 , L918 , L927 , L948 , L951;
end;
consider C73 being (Function of ( card D56 ) , ( card D56 )) such that L955: (for R2 being set holds (R2 in ( card D56 ) implies S13[ R2 , ( C73 . R2 ) ])) from FUNCT_2:sch 1(L912);
L956:
now
L957: (D62 = ( {} ) implies ( card D62 ) = ( {} ));
let C74 , C75 being set;
assume that
L958: C74 in ( dom C73 )
and
L959: C75 in ( dom C73 )
and
L960: ( C73 . C74 ) = ( C73 . C75 );
L961: (( card D62 ) = ( ( card C66 ) choose R10 ) & ( card D56 ) = ( ( card D55 ) choose R10 )) by L911 , L519;
L962: ( C73 . C74 ) in ( card D62 ) by L961 , L909 , L958;
L963: ( C73 . C74 ) in ( dom C67 ) by L962 , L957 , FUNCT_2:def 1;
L964: ( C67 . ( C73 . C74 ) ) in ( rng C67 ) by L963 , FUNCT_1:def 3;
consider C76 being (Function of C66 , { C64 , C65 }) such that L965: C76 = ( C67 . ( C73 . C74 ) ) and L966: ( card ( C76 " { C64 } ) ) = R10 by L964 , L255;
L967: ( D57 . C75 ) in ( rng D57 ) by L897 , L959 , FUNCT_1:def 3;
consider C77 being (Function of D55 , { ( 0 ) , 1 }) such that L968: ( D57 . C75 ) = C77 and L969: ( card ( C77 " { ( 0 ) } ) ) = R10 by L967 , L255;
L970: ( D57 . C74 ) in ( rng D57 ) by L897 , L958 , FUNCT_1:def 3;
consider C78 being (Function of D55 , { ( 0 ) , 1 }) such that L971: ( D57 . C74 ) = C78 and L972: ( card ( C78 " { ( 0 ) } ) ) = R10 by L970 , L255;
L973: (for R5 being set holds (R5 in ( dom C78 ) implies ( C78 . R5 ) = ( C77 . R5 )))
proof
let R5 being set;
assume that
L974: R5 in ( dom C78 );
L975: ( C78 . R5 ) in ( rng C78 ) by L974 , FUNCT_1:def 3;
per cases  by L975 , TARSKI:def 2;
suppose L976: ( C78 . R5 ) = ( 0 );

L977: ( C76 . R5 ) = C64 by L976 , L909 , L955 , L958 , L971 , L965 , L974;
thus L978: thesis by L977 , L909 , L955 , L959 , L960 , L968 , L965 , L974 , L976;
end;
suppose L979: ( C78 . R5 ) = 1;

L980: ( C76 . R5 ) = C65 by L979 , L909 , L955 , L958 , L971 , L965 , L974;
thus L981: thesis by L980 , L909 , L955 , L959 , L960 , L968 , L965 , L974 , L979;
end;
end;
L983: (( dom C78 ) = D55 & ( dom C77 ) = D55) by FUNCT_2:def 1;
L984: C78 = C77 by L983 , L973 , FUNCT_1:def 11;
thus L985: C74 = C75 by L984 , L896 , L897 , L958 , L959 , L971 , L968 , FUNCT_1:def 4;
end;
L986: C73 is  one-to-one by L956 , FUNCT_1:def 4;
L987: ( card ( card D56 ) ) = ( card ( card D56 ) );
L988: C73 is  one-to-one  onto by L987 , L986 , STIRL2_1:60;
defpred S15[ set , set ] means (for R12 being Function holds (R12 = ( C67 . $1 ) implies $2 = ( card ( Intersection (C60 , R12 , C64) ) )));
L989: (for R2 being set holds (R2 in ( card D62 ) implies (ex R3 being set st (R3 in ( NAT ) & S15[ R2 , R3 ]))))
proof
let R2 being set;
assume L990: R2 in ( card D62 );
L991: R2 in ( dom C67 ) by L990 , CARD_1:27 , FUNCT_2:def 1;
L992: ( C67 . R2 ) in ( rng C67 ) by L991 , FUNCT_1:def 3;
consider C79 being (Function of C66 , { C64 , C65 }) such that L993: C79 = ( C67 . R2 ) and L994: ( card ( C79 " { C64 } ) ) = R10 by L992 , L255;
L995: ( union ( rng C60 ) ) is  finite by L893 , L870;
reconsider D63 = ( Intersection (C60 , C79 , C64) ) as  finite set by L995;
take ( card D63 );
thus L996: thesis by L993;
end;
consider C80 being (Function of ( card D62 ) , ( NAT )) such that L997: (for R2 being set holds (R2 in ( card D62 ) implies S15[ R2 , ( C80 . R2 ) ])) from FUNCT_2:sch 1(L989);
L998: ( dom C80 ) = ( card D62 ) by FUNCT_2:def 1;
reconsider D64 = C80 as XFinSequence by L998 , AFINSQ_1:5;
reconsider D65 = D64 as (XFinSequence of ( NAT ));
take D65;
L999: (D62 = ( {} ) implies ( card D62 ) = ( {} ));
L1000: ( dom C67 ) = ( card D62 ) by L999 , FUNCT_2:def 1;
thus L1001: ( dom D65 ) = ( dom C67 ) by L1000 , FUNCT_2:def 1;
thus L1002: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom D65 ) & R12 = ( C67 . R5 )) implies ( D65 . R5 ) = ( card ( Intersection (C60 , R12 , C64) ) )))) by L1001 , L997;
L1003: ( card D56 ) = ( ( card D55 ) choose R10 ) by L519;
L1004: ( card D62 ) = ( ( card C66 ) choose R10 ) by L911 , L519;
L1005: ( card D56 ) = ( dom D65 ) by L1004 , L909 , L1003 , FUNCT_2:def 1;
reconsider D66 = C73 as (Permutation of ( dom D65 )) by L1005 , L988;
L1006: ( dom D65 ) = ( dom D60 ) by L909 , L998 , L1003 , L1004 , FUNCT_2:def 1;
L1007: (for R5 being set holds (R5 in ( dom D60 ) implies ( D60 . R5 ) = ( ( D65 * D66 ) . R5 )))
proof
let R5 being set;
assume that
L1008: R5 in ( dom D60 );
L1009: R5 in ( dom D66 ) by L908 , L1008 , FUNCT_2:52;
L1010: ( C67 . ( D66 . R5 ) ) in ( rng C67 ) by L1001 , L1006 , L1008 , FUNCT_1:def 3;
consider C81 being (Function of C66 , { C64 , C65 }) such that L1011: C81 = ( C67 . ( D66 . R5 ) ) and L1012: ( card ( C81 " { C64 } ) ) = R10 by L1010 , L255;
L1013: ( D65 . ( D66 . R5 ) ) = ( card ( Intersection (C60 , C81 , C64) ) ) by L997 , L998 , L1006 , L1008 , L1011;
L1014: ( D57 . R5 ) in ( rng D57 ) by L897 , L908 , L1008 , FUNCT_1:def 3;
consider C82 being (Function of D55 , { ( 0 ) , 1 }) such that L1015: C82 = ( D57 . R5 ) and L1016: ( card ( C82 " { ( 0 ) } ) ) = R10 by L1014 , L255;
L1017: ( C82 " { ( 0 ) } ) = ( C81 " { C64 } ) by L908 , L955 , L1008 , L1011 , L1015;
L1018: ( Intersection (C60 , C82 , ( 0 )) ) = ( Intersection (C60 , C81 , C64) ) by L1017 , L790;
L1019: ( D60 . R5 ) = ( card ( Intersection (C60 , C82 , ( 0 )) ) ) by L907 , L908 , L1008 , L1015;
thus L1020: thesis by L1019 , L1018 , L1013 , L1009 , FUNCT_1:13;
end;
L1021: (( rng D66 ) c= ( dom D65 ) & ( dom D66 ) = ( dom D65 )) by FUNCT_2:52;
L1022: ( dom D60 ) = ( dom ( D65 * D66 ) ) by L1021 , L1006 , RELAT_1:27;
L1023: D60 = ( D65 * D66 ) by L1022 , L1007 , FUNCT_1:def 11;
L1024: ( ( addnat ) "**" D65 ) = ( ( addnat ) "**" D60 ) by L1023 , AFINSQ_2:45;
L1025: ( ( addnat ) "**" D60 ) = ( Sum D60 ) by AFINSQ_2:51;
thus L1026: thesis by L1025 , L1024 , AFINSQ_2:51;
end;
uniqueness
proof
reconsider D67 = ( dom C60 ) as  finite set by L893;
let C83 , C84 being (Element of ( NAT ));
assume that
L1027: (for B101 , B102 being set holds (for B103 being  finite set holds (for B104 being (Function of ( card ( Choose (B103 , R10 , B101 , B102) ) ) , ( Choose (B103 , R10 , B101 , B102) )) holds ((( dom C60 ) = B103 & B104 is  one-to-one & B101 <> B102) implies (ex B105 being (XFinSequence of ( NAT )) st (( dom B105 ) = ( dom B104 ) & (for R5 being set holds (for R12 being Function holds ((R5 in ( dom B105 ) & R12 = ( B104 . R5 )) implies ( B105 . R5 ) = ( card ( Intersection (C60 , R12 , B101) ) )))) & C83 = ( Sum B105 )))))))
and
L1028: (for B106 , B107 being set holds (for B108 being  finite set holds (for B109 being (Function of ( card ( Choose (B108 , R10 , B106 , B107) ) ) , ( Choose (B108 , R10 , B106 , B107) )) holds ((( dom C60 ) = B108 & B109 is  one-to-one & B106 <> B107) implies (ex B110 being (XFinSequence of ( NAT )) st (( dom B110 ) = ( dom B109 ) & (for R5 being set holds (for R12 being Function holds ((R5 in ( dom B110 ) & R12 = ( B109 . R5 )) implies ( B110 . R5 ) = ( card ( Intersection (C60 , R12 , B106) ) )))) & C84 = ( Sum B110 )))))));
set D68 = ( Choose (D67 , R10 , ( 0 ) , 1) );
L1029: ( card D68 ) , D68 are_equipotent  by CARD_1:def 2;
consider C85 being Function such that L1030: C85 is  one-to-one and L1031: (( dom C85 ) = ( card D68 ) & ( rng C85 ) = D68) by L1029 , WELLORD2:def 4;
reconsider D69 = C85 as (Function of ( card D68 ) , D68) by L1031 , FUNCT_2:1;
consider C86 being (XFinSequence of ( NAT )) such that L1032: ( dom C86 ) = ( dom D69 ) and L1033: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C86 ) & R12 = ( D69 . R5 )) implies ( C86 . R5 ) = ( card ( Intersection (C60 , R12 , ( 0 )) ) )))) and L1034: C83 = ( Sum C86 ) by L1027 , L1030;
consider C87 being (XFinSequence of ( NAT )) such that L1035: ( dom C87 ) = ( dom D69 ) and L1036: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C87 ) & R12 = ( D69 . R5 )) implies ( C87 . R5 ) = ( card ( Intersection (C60 , R12 , ( 0 )) ) )))) and L1037: C84 = ( Sum C87 ) by L1028 , L1030;
L1038:
now
let R5 being set;
assume that
L1039: R5 in ( dom C86 );
L1040: ( D69 . R5 ) in ( rng D69 ) by L1032 , L1039 , FUNCT_1:def 3;
consider C88 being (Function of D67 , { ( 0 ) , 1 }) such that L1041: C88 = ( D69 . R5 ) and L1042: ( card ( C88 " { ( 0 ) } ) ) = R10 by L1040 , L255;
L1043: ( C87 . R5 ) = ( card ( Intersection (C60 , C88 , ( 0 )) ) ) by L1032 , L1035 , L1036 , L1039 , L1041;
thus L1044: ( C87 . R5 ) = ( C86 . R5 ) by L1043 , L1033 , L1039 , L1041;
end;
thus L1045: thesis by L1038 , L1032 , L1034 , L1035 , L1037 , FUNCT_1:2;
end;
end;
theorem
L1047: (for R10 being Nat holds (for R15 being  finite-yielding Function holds (for B111 , B112 being set holds (for B113 being  finite set holds (for B114 being (Function of ( card ( Choose (B113 , R10 , B111 , B112) ) ) , ( Choose (B113 , R10 , B111 , B112) )) holds ((( dom R15 ) = B113 & B114 is  one-to-one & B111 <> B112) implies (for B115 being (XFinSequence of ( NAT )) holds ((( dom B115 ) = ( dom B114 ) & (for R5 being set holds (for R12 being Function holds ((R5 in ( dom B115 ) & R12 = ( B114 . R5 )) implies ( B115 . R5 ) = ( card ( Intersection (R15 , R12 , B111) ) ))))) implies ( Card_Intersection (R15 , R10) ) = ( Sum B115 )))))))))
proof
let R10 being Nat;
let R15 being  finite-yielding Function;
let C89 , C90 being set;
let C91 being  finite set;
let C92 being (Function of ( card ( Choose (C91 , R10 , C89 , C90) ) ) , ( Choose (C91 , R10 , C89 , C90) ));
assume L1048: (( dom R15 ) = C91 & C92 is  one-to-one & C89 <> C90);
consider C93 being (XFinSequence of ( NAT )) such that L1049: ( dom C93 ) = ( dom C92 ) and L1050: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C93 ) & R12 = ( C92 . R5 )) implies ( C93 . R5 ) = ( card ( Intersection (R15 , R12 , C89) ) )))) and L1051: ( Card_Intersection (R15 , R10) ) = ( Sum C93 ) by L1048 , L894;
let C94 being (XFinSequence of ( NAT ));
assume that
L1052: ( dom C94 ) = ( dom C92 )
and
L1053: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C94 ) & R12 = ( C92 . R5 )) implies ( C94 . R5 ) = ( card ( Intersection (R15 , R12 , C89) ) ))));
L1054:
now
let R5 being set;
assume that
L1055: R5 in ( dom C93 );
L1056: ( C92 . R5 ) in ( rng C92 ) by L1049 , L1055 , FUNCT_1:def 3;
consider C95 being (Function of C91 , { C89 , C90 }) such that L1057: C95 = ( C92 . R5 ) and L1058: ( card ( C95 " { C89 } ) ) = R10 by L1056 , L255;
L1059: ( C94 . R5 ) = ( card ( Intersection (R15 , C95 , C89) ) ) by L1052 , L1053 , L1049 , L1055 , L1057;
thus L1060: ( C94 . R5 ) = ( C93 . R5 ) by L1059 , L1050 , L1055 , L1057;
end;
thus L1061: thesis by L1054 , L1052 , L1049 , L1051 , FUNCT_1:2;
end;
theorem
L1062: (for R10 being Nat holds (for R15 being  finite-yielding Function holds ((( dom R15 ) is  finite & R10 = ( 0 )) implies ( Card_Intersection (R15 , R10) ) = ( card ( union ( rng R15 ) ) ))))
proof
let R10 being Nat;
let R15 being  finite-yielding Function;
assume that
L1063: ( dom R15 ) is  finite
and
L1064: R10 = ( 0 );
reconsider D70 = ( dom R15 ) as  finite set by L1063;
set D71 = ( Choose (D70 , R10 , ( 0 ) , 1) );
consider C96 being (Function of ( card D71 ) , D71) such that L1065: C96 is  one-to-one by L887;
L1066: ( card D71 ) = 1 by L1064 , L293;
L1067: ( dom C96 ) = 1 by L1066 , CARD_1:27 , FUNCT_2:def 1;
consider C97 being (XFinSequence of ( NAT )) such that L1068: ( dom C97 ) = ( dom C96 ) and L1069: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C97 ) & R12 = ( C96 . R5 )) implies ( C97 . R5 ) = ( card ( Intersection (R15 , R12 , ( 0 )) ) )))) and L1070: ( Card_Intersection (R15 , R10) ) = ( Sum C97 ) by L1065 , L894;
L1071: ( len C97 ) = 1 by L1068 , L1066 , CARD_1:27 , FUNCT_2:def 1;
L1072: C97 = <% ( C97 . ( 0 ) ) %> by L1071 , AFINSQ_1:34;
L1073: ( ( addnat ) "**" C97 ) = ( C97 . ( 0 ) ) by L1072 , AFINSQ_2:37;
L1074: ( 0 ) in 1 by CARD_1:49 , TARSKI:def 1;
L1075: ( C96 . ( 0 ) ) in ( rng C96 ) by L1074 , L1067 , FUNCT_1:def 3;
consider C98 being (Function of D70 , { ( 0 ) , 1 }) such that L1076: C98 = ( C96 . ( 0 ) ) and L1077: ( card ( C98 " { ( 0 ) } ) ) = ( 0 ) by L1075 , L1064 , L255;
L1078: ( C98 " { ( 0 ) } ) = ( {} ) by L1077;
L1079: ( Intersection (R15 , C98 , ( 0 )) ) = ( union ( rng R15 ) ) by L1078 , L805;
L1080: ( C97 . ( 0 ) ) = ( card ( Intersection (R15 , C98 , ( 0 )) ) ) by L1068 , L1069 , L1067 , L1074 , L1076;
thus L1081: thesis by L1080 , L1070 , L1079 , L1073 , AFINSQ_2:51;
end;
theorem
L1082: (for R7 being  finite set holds (for R10 being Nat holds (for R15 being  finite-yielding Function holds ((( dom R15 ) = R7 & R10 > ( card R7 )) implies ( Card_Intersection (R15 , R10) ) = ( 0 )))))
proof
let R7 being  finite set;
let R10 being Nat;
let R15 being  finite-yielding Function;
assume that
L1083: ( dom R15 ) = R7
and
L1084: R10 > ( card R7 );
set D72 = ( Choose (R7 , R10 , ( 0 ) , 1) );
consider C99 being (Function of ( card D72 ) , D72) such that L1085: C99 is  one-to-one by L887;
consider C100 being (XFinSequence of ( NAT )) such that L1086: ( dom C100 ) = ( dom C99 ) and L1087: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C100 ) & R12 = ( C99 . R5 )) implies ( C100 . R5 ) = ( card ( Intersection (R15 , R12 , ( 0 )) ) )))) and L1088: ( Card_Intersection (R15 , R10) ) = ( Sum C100 ) by L1083 , L1085 , L894;
L1089: D72 is  empty by L1084 , L287;
L1090: C100 = ( 0 ) by L1089 , L1086;
thus L1091: thesis by L1090 , L1088;
end;
theorem
L1092: (for R15 being  finite-yielding Function holds (for R7 being  finite set holds (( dom R15 ) = R7 implies (for B116 being (Function of ( card R7 ) , R7) holds (B116 is  one-to-one implies (ex B117 being (XFinSequence of ( NAT )) st (( dom B117 ) = ( card R7 ) & (for R5 being set holds (R5 in ( dom B117 ) implies ( B117 . R5 ) = ( card ( ( R15 * B116 ) . R5 ) ))) & ( Card_Intersection (R15 , 1) ) = ( Sum B117 ))))))))
proof
let R15 being  finite-yielding Function;
let R7 being  finite set;
assume that
L1093: ( dom R15 ) = R7;
let C101 being (Function of ( card R7 ) , R7);
assume that
L1094: C101 is  one-to-one;
per cases ;
suppose L1095: R7 = ( {} );

reconsider D73 = ( {} ) as XFinSequence;
L1096: (( rng ( {} ) ) c= ( {} ) & ( {} ) c= ( NAT ));
reconsider D74 = D73 as (XFinSequence of ( NAT )) by L1096 , RELAT_1:def 19;
take D74;
thus L1097: (( card R7 ) = ( dom D74 ) & (for R5 being set holds (R5 in ( dom D74 ) implies ( D74 . R5 ) = ( card ( ( R15 * C101 ) . R5 ) )))) by L1095 , CARD_1:27;
L1098: ( Sum D74 ) = ( 0 );
thus L1099: thesis by L1098 , L1093 , L1095 , L1082 , CARD_1:27;
end;
suppose L1100: R7 <> ( {} );

reconsider D75 = ( card R7 ) as non  empty set by L1100;
deffunc H1((Element of D75)) = ( card ( ( R15 * C101 ) . $1 ) );
consider C102 being (Function of D75 , ( NAT )) such that L1101: (for B118 being (Element of D75) holds ( C102 . B118 ) = H1(B118)) from FUNCT_2:sch 4;
L1102: ( dom C102 ) = D75 by FUNCT_2:def 1;
reconsider D76 = C102 as XFinSequence by L1102 , AFINSQ_1:5;
reconsider D77 = D76 as (XFinSequence of ( NAT ));
take D77;
thus L1103: ( card R7 ) = ( dom D77 ) by FUNCT_2:def 1;
thus L1104: (for R5 being set holds (R5 in ( dom D77 ) implies ( D77 . R5 ) = ( card ( ( R15 * C101 ) . R5 ) ))) by L1101 , L1102;
thus L1105: ( Card_Intersection (R15 , 1) ) = ( Sum D77 )
proof
deffunc H2(set) = ( ( ( C101 . $1 ) .--> ( 0 ) ) +* ( ( R7 \ { ( C101 . $1 ) } ) --> 1 ) );
L1106: (for R1 being set holds (R1 in D75 implies H2(R1) in ( Choose (R7 , 1 , ( 0 ) , 1) )))
proof
let R1 being set;
assume L1107: R1 in D75;
L1108: R1 in ( dom C101 ) by L1107 , CARD_1:27 , FUNCT_2:def 1;
L1109: ( C101 . R1 ) in ( rng C101 ) by L1108 , FUNCT_1:def 3;
L1110: ( { ( C101 . R1 ) } \/ ( R7 \ { ( C101 . R1 ) } ) ) = R7 by L1109 , ZFMISC_1:116;
L1111: ({ ( C101 . R1 ) } misses ( R7 \ { ( C101 . R1 ) } ) & ( card { ( C101 . R1 ) } ) = 1) by CARD_1:30 , XBOOLE_1:79;
thus L1112: thesis by L1111 , L1110 , L593;
end;
consider C103 being (Function of D75 , ( Choose (R7 , 1 , ( 0 ) , 1) )) such that L1113: (for R5 being set holds (R5 in D75 implies ( C103 . R5 ) = H2(R5))) from FUNCT_2:sch 2(L1106);
L1114: ( Choose (R7 , 1 , ( 0 ) , 1) ) c= ( rng C103 )
proof
L1115: ( card R7 ) = ( card ( card R7 ) );
L1116: C101 is  onto by L1115 , L1094 , STIRL2_1:60;
let R5 being set;
assume L1117: R5 in ( Choose (R7 , 1 , ( 0 ) , 1) );
consider C104 being (Function of R7 , { ( 0 ) , 1 }) such that L1118: C104 = R5 and L1119: ( card ( C104 " { ( 0 ) } ) ) = 1 by L1117 , L255;
consider R2 being set such that L1120: ( C104 " { ( 0 ) } ) = { R2 } by L1119 , CARD_2:42;
L1121: R2 in { R2 } by TARSKI:def 1;
L1122: R2 in R7 by L1121 , L1120;
L1123: R2 in ( rng C101 ) by L1122 , L1116 , FUNCT_2:def 3;
consider R3 being set such that L1124: R3 in ( dom C101 ) and L1125: ( C101 . R3 ) = R2 by L1123 , FUNCT_1:def 3;
L1126: ( C103 . R3 ) = C104
proof
set D78 = ( ( R7 \ { ( C101 . R3 ) } ) --> 1 );
set D79 = ( ( C101 . R3 ) .--> ( 0 ) );
set D80 = ( D79 +* D78 );
L1127: ( { ( C101 . R3 ) } \/ ( R7 \ { ( C101 . R3 ) } ) ) = R7 by L1120 , L1121 , L1125 , ZFMISC_1:116;
L1128:
now
let C105 being set;
assume that
L1129: C105 in ( dom C104 );
L1130:
now
per cases  by L1127 , L1129 , XBOOLE_0:def 3;
suppose L1131: C105 in { ( C101 . R3 ) };

L1132: { ( C101 . R3 ) } misses ( R7 \ { ( C101 . R3 ) } ) by XBOOLE_1:79;
L1133: (( dom D79 ) = { ( C101 . R3 ) } & ( dom D78 ) = ( R7 \ { ( C101 . R3 ) } )) by FUNCOP_1:13;
L1134: ( D80 . C105 ) = ( D79 . C105 ) by L1133 , L1131 , L1132 , FUNCT_4:16;
L1135: ( D80 . C105 ) = ( 0 ) by L1134 , L1131 , FUNCOP_1:7;
L1136: ( C104 . C105 ) in { ( 0 ) } by L1120 , L1125 , L1131 , FUNCT_1:def 7;
thus L1137: ( D80 . C105 ) = ( C104 . C105 ) by L1136 , L1135 , TARSKI:def 1;
end;
suppose L1138: C105 in ( R7 \ { ( C101 . R3 ) } );

L1139: C105 in ( dom D78 ) by L1138 , FUNCT_2:def 1;
L1140: ( D80 . C105 ) = ( D78 . C105 ) by L1139 , FUNCT_4:13;
L1141: ( D80 . C105 ) = 1 by L1140 , L1138 , FUNCOP_1:7;
L1142: R7 = ( dom C104 ) by FUNCT_2:def 1;
L1143: (not C105 in { R2 }) by L1125 , L1138 , XBOOLE_0:def 5;
L1144: (not ( C104 . C105 ) in { ( 0 ) }) by L1143 , L1120 , L1138 , L1142 , FUNCT_1:def 7;
L1145: (not ( C104 . C105 ) = ( 0 )) by L1144 , TARSKI:def 1;
L1146: ( C104 . C105 ) in ( rng C104 ) by L1138 , L1142 , FUNCT_1:def 3;
thus L1147: ( D80 . C105 ) = ( C104 . C105 ) by L1146 , L1141 , L1145 , TARSKI:def 2;
end;
end;
thus L1149: ( D80 . C105 ) = ( C104 . C105 ) by L1130;
end;
L1150: ( dom D79 ) = { ( C101 . R3 ) } by FUNCOP_1:13;
L1151: R7 = ( ( dom D79 ) \/ ( dom D78 ) ) by L1150 , L1127 , FUNCT_2:def 1;
L1152: (( dom C104 ) = R7 & ( dom D80 ) = ( ( dom D79 ) \/ ( dom D78 ) )) by FUNCT_2:def 1 , FUNCT_4:def 1;
L1153: D80 = C104 by L1152 , L1151 , L1128 , FUNCT_1:2;
thus L1154: thesis by L1153 , L1113 , L1124;
end;
L1155: ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) = ( ( card R7 ) choose 1 ) by L519;
L1156: ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) = D75 by L1155 , NAT_1:14 , NEWTON:23;
L1157: ( dom C103 ) = D75 by L1156 , CARD_1:27 , FUNCT_2:def 1;
thus L1158: thesis by L1157 , L1118 , L1124 , L1126 , FUNCT_1:def 3;
end;
L1159: ( Choose (R7 , 1 , ( 0 ) , 1) ) = ( rng C103 ) by L1114 , XBOOLE_0:def 10;
L1160: C103 is  onto by L1159 , FUNCT_2:def 3;
L1161: ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) = ( ( card R7 ) choose 1 ) by L519;
L1162: ( card R7 ) = ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) by L1161 , L1159 , NAT_1:14 , NEWTON:23;
reconsider D81 = C103 as (Function of ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) , ( Choose (R7 , 1 , ( 0 ) , 1) )) by L1162;
L1163: ( card ( card R7 ) ) = ( card R7 );
L1164: D81 is  one-to-one by L1163 , L1160 , L1162 , STIRL2_1:60;
consider C106 being (XFinSequence of ( NAT )) such that L1165: ( dom C106 ) = ( dom D81 ) and L1166: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C106 ) & R12 = ( D81 . R5 )) implies ( C106 . R5 ) = ( card ( Intersection (R15 , R12 , ( 0 )) ) )))) and L1167: ( Card_Intersection (R15 , 1) ) = ( Sum C106 ) by L1164 , L1093 , L894;
L1168: (( Choose (R7 , 1 , ( 0 ) , 1) ) = ( {} ) implies ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) = ( {} ));
L1169: ( dom D81 ) = ( card ( Choose (R7 , 1 , ( 0 ) , 1) ) ) by L1168 , FUNCT_2:def 1;
L1170: (for R5 being set holds (R5 in ( dom C106 ) implies ( C106 . R5 ) = ( D77 . R5 )))
proof
let R5 being set;
assume that
L1171: R5 in ( dom C106 );
L1172: H2(R5) in ( Choose (R7 , 1 , ( 0 ) , 1) ) by L1106 , L1162 , L1165 , L1171;
consider C107 being (Function of R7 , { ( 0 ) , 1 }) such that L1173: C107 = H2(R5) and L1174: ( card ( C107 " { ( 0 ) } ) ) = 1 by L1172 , L255;
consider R2 being set such that L1175: ( C107 " { ( 0 ) } ) = { R2 } by L1174 , CARD_2:42;
L1176: ( D81 . R5 ) = H2(R5) by L1113 , L1162 , L1165 , L1171;
L1177: ( C106 . R5 ) = ( card ( Intersection (R15 , C107 , ( 0 )) ) ) by L1176 , L1166 , L1171 , L1173;
L1178: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
L1179: ( dom ( ( R7 \ { ( C101 . R5 ) } ) --> 1 ) ) = ( R7 \ { ( C101 . R5 ) } ) by FUNCOP_1:13;
L1180: ( C101 . R5 ) in { ( C101 . R5 ) } by TARSKI:def 1;
L1181: { ( C101 . R5 ) } = ( dom ( ( C101 . R5 ) .--> ( 0 ) ) ) by FUNCOP_1:13;
L1182: ( C101 . R5 ) in ( ( dom ( ( C101 . R5 ) .--> ( 0 ) ) ) \/ ( dom ( ( R7 \ { ( C101 . R5 ) } ) --> 1 ) ) ) by L1181 , L1180 , XBOOLE_0:def 3;
L1183: ((not ( C101 . R5 ) in ( R7 \ { ( C101 . R5 ) } )) & ( ( ( C101 . R5 ) .--> ( 0 ) ) . ( C101 . R5 ) ) = ( 0 )) by L1180 , FUNCOP_1:7 , XBOOLE_0:def 5;
L1184: ( H2(R5) . ( C101 . R5 ) ) = ( 0 ) by L1183 , L1182 , L1179 , FUNCT_4:def 1;
L1185: ( C101 . R5 ) in ( dom H2(R5) ) by L1182 , FUNCT_4:def 1;
L1186: ( C101 . R5 ) in ( C107 " { ( 0 ) } ) by L1185 , L1173 , L1184 , L1178 , FUNCT_1:def 7;
L1187: ( C101 . R5 ) = R2 by L1186 , L1175 , TARSKI:def 1;
L1188: ( card ( Intersection (R15 , C107 , ( 0 )) ) ) = ( card ( R15 . ( C101 . R5 ) ) ) by L1187 , L1175 , L810;
L1189: ( D77 . R5 ) = ( card ( ( R15 * C101 ) . R5 ) ) by L1101 , L1162 , L1165 , L1171;
L1190: R5 in ( dom C101 ) by L1162 , L1165 , L1169 , L1171 , L1186 , FUNCT_2:def 1;
thus L1191: thesis by L1190 , L1188 , L1177 , L1189 , FUNCT_1:13;
end;
L1192: ( dom C106 ) = ( dom D77 ) by L1162 , L1165 , L1169 , FUNCT_2:def 1;
thus L1193: thesis by L1192 , L1167 , L1170 , FUNCT_1:def 11;
end;

end;
end;
theorem
L1107: (for R1 being set holds (for R7 being  finite set holds (for R15 being  finite-yielding Function holds (( dom R15 ) = R7 implies ( Card_Intersection (R15 , ( card R7 )) ) = ( card ( Intersection (R15 , ( R7 --> R1 ) , R1) ) )))))
proof
let R1 being set;
let R7 being  finite set;
let R15 being  finite-yielding Function;
set D82 = ( Choose (R7 , ( card R7 ) , R1 , { R1 }) );
consider C108 being (Function of ( card D82 ) , D82) such that L1108: C108 is  one-to-one by L887;
L1109: R1 in { R1 } by TARSKI:def 1;
L1110: R1 <> { R1 } by L1109;
assume L1111: ( dom R15 ) = R7;
consider C109 being (XFinSequence of ( NAT )) such that L1112: ( dom C109 ) = ( dom C108 ) and L1113: ((for R5 being set holds (for R12 being Function holds ((R5 in ( dom C109 ) & R12 = ( C108 . R5 )) implies ( C109 . R5 ) = ( card ( Intersection (R15 , R12 , R1) ) )))) & ( Card_Intersection (R15 , ( card R7 )) ) = ( Sum C109 )) by L1111 , L1108 , L1110 , L894;
L1114: ( card D82 ) = 1 by L330;
consider C110 being set such that L1115: D82 = { C110 } by L1114 , CARD_2:42;
L1116: R1 in { R1 } by TARSKI:def 1;
L1117: (( R7 \/ ( {} ) ) = R7 & { R1 } <> R1) by L1116;
L1118: ( ( ( {} ) --> { R1 } ) +* ( R7 --> R1 ) ) in D82 by L1117 , L563;
L1119: ( ( {} ) +* ( R7 --> R1 ) ) in D82 by L1118;
L1120: ( R7 --> R1 ) in D82 by L1119;
L1121: ( R7 --> R1 ) = C110 by L1120 , L1115 , TARSKI:def 1;
L1122: (D82 = ( {} ) implies ( card D82 ) = ( {} ));
L1123: ( dom C108 ) = ( card D82 ) by L1122 , FUNCT_2:def 1;
L1124: ( 0 ) in ( dom C108 ) by L1123 , L1114 , CARD_1:49 , TARSKI:def 1;
L1125: ( C108 . ( 0 ) ) in ( rng C108 ) by L1124 , FUNCT_1:def 3;
L1126: ( C108 . ( 0 ) ) = C110 by L1125 , L1115 , TARSKI:def 1;
L1127: ( len C109 ) = 1 by L1112 , L1122 , L1114 , FUNCT_2:def 1;
L1128: C109 = <% ( C109 . ( 0 ) ) %> by L1127 , AFINSQ_1:34;
L1129: ( ( addnat ) "**" C109 ) = ( C109 . ( 0 ) ) by L1128 , AFINSQ_2:37;
L1130: ( Sum C109 ) = ( C109 . ( 0 ) ) by L1129 , AFINSQ_2:51;
L1131: ( 0 ) in ( dom C109 ) by L1112 , L1114 , L1123 , CARD_1:49 , TARSKI:def 1;
thus L1132: thesis by L1131 , L1113 , L1130 , L1126 , L1121;
end;
theorem
L1133: (for R1 being set holds (for R7 being  finite set holds (for R15 being  finite-yielding Function holds (R15 = ( R1 .--> R7 ) implies ( Card_Intersection (R15 , 1) ) = ( card R7 )))))
proof
let R1 being set;
let R7 being  finite set;
let R15 being  finite-yielding Function;
assume L1134: R15 = ( R1 .--> R7 );
L1135: ( dom R15 ) = { R1 } by L1134 , FUNCOP_1:13;
L1136: R1 in { R1 } by TARSKI:def 1;
L1137: ( ( R1 .--> R1 ) " { R1 } ) = { R1 } by L1136 , FUNCOP_1:14;
L1138: ( R15 . R1 ) = R7 by L1134 , L1136 , FUNCOP_1:7;
L1139: (1 = ( card { R1 } ) & ( Intersection (R15 , ( R1 .--> R1 ) , R1) ) = R7) by L1138 , L1137 , L810 , CARD_1:30;
thus L1140: thesis by L1139 , L1135 , L1107;
end;
theorem
L1141: (for R1 being set holds (for R4 being set holds (for R7 being  finite set holds (for R8 being  finite set holds (for R15 being  finite-yielding Function holds ((R1 <> R4 & R15 = ( (R1 , R4) --> (R7 , R8) )) implies (( Card_Intersection (R15 , 1) ) = ( ( card R7 ) + ( card R8 ) ) & ( Card_Intersection (R15 , 2) ) = ( card ( R7 /\ R8 ) ))))))))
proof
let R1 being set;
let R4 being set;
let R7 being  finite set;
let R8 being  finite set;
let R15 being  finite-yielding Function;
assume that
L1142: R1 <> R4
and
L1143: R15 = ( (R1 , R4) --> (R7 , R8) );
set D83 = ( (( 0 ) , 1) --> (R1 , R4) );
L1144: (( dom D83 ) = { ( 0 ) , 1 } & ( rng D83 ) = { R1 , R4 }) by FUNCT_4:62 , FUNCT_4:64;
L1145: ( card { R1 , R4 } ) = 2 by L1142 , CARD_2:57;
reconsider D84 = D83 as (Function of ( card { R1 , R4 } ) , { R1 , R4 }) by L1145 , L1144 , CARD_1:50 , FUNCT_2:1;
L1146: ( card ( card { R1 , R4 } ) ) = ( card { R1 , R4 } );
L1147: (( D84 . ( 0 ) ) = R1 & ( R15 . R1 ) = R7) by L1142 , L1143 , FUNCT_4:63;
L1148: (( D84 . 1 ) = R4 & ( R15 . R4 ) = R8) by L1143 , FUNCT_4:63;
L1149: ( dom R15 ) = { R1 , R4 } by L1143 , FUNCT_4:62;
L1150: ( rng D84 ) = { R1 , R4 } by FUNCT_4:64;
L1151: D84 is  onto by L1150 , FUNCT_2:def 3;
L1152: D84 is  one-to-one by L1151 , L1146 , STIRL2_1:60;
consider C111 being (XFinSequence of ( NAT )) such that L1153: ( dom C111 ) = ( card { R1 , R4 } ) and L1154: (for R5 being set holds (R5 in ( dom C111 ) implies ( C111 . R5 ) = ( card ( ( R15 * D84 ) . R5 ) ))) and L1155: ( Card_Intersection (R15 , 1) ) = ( Sum C111 ) by L1152 , L1149 , L1092;
L1156: ( len C111 ) = 2 by L1142 , L1153 , CARD_2:57;
L1157: C111 = <% ( C111 . ( 0 ) ) , ( C111 . 1 ) %> by L1156 , AFINSQ_1:38;
L1158: ( dom D84 ) = { ( 0 ) , 1 } by FUNCT_4:62;
L1159: 1 in ( dom D84 ) by L1158 , TARSKI:def 2;
L1160: ( ( R15 * D84 ) . 1 ) = ( R15 . ( D84 . 1 ) ) by L1159 , FUNCT_1:13;
L1161: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
L1162: ( ( { R1 , R4 } --> ( 0 ) ) " { ( 0 ) } ) = { R1 , R4 } by L1161 , FUNCOP_1:14;
L1163: (( R15 . R1 ) = R7 & ( R15 . R4 ) = R8) by L1142 , L1143 , FUNCT_4:63;
L1164: ( Intersection (R15 , ( { R1 , R4 } --> ( 0 ) ) , ( 0 )) ) = ( R7 /\ R8 ) by L1163 , L1162 , L825;
L1165: ( 0 ) in ( dom D84 ) by L1158 , TARSKI:def 2;
L1166: ( ( R15 * D84 ) . ( 0 ) ) = ( R15 . ( D84 . ( 0 ) ) ) by L1165 , FUNCT_1:13;
L1167: ( dom C111 ) = 2 by L1142 , L1153 , CARD_2:57;
L1168: 1 in ( dom C111 ) by L1167 , CARD_1:50 , TARSKI:def 2;
L1169: ( C111 . 1 ) = ( card R8 ) by L1168 , L1154 , L1148 , L1160;
L1170: ( 0 ) in ( dom C111 ) by L1167 , CARD_1:50 , TARSKI:def 2;
L1171: ( C111 . ( 0 ) ) = ( card R7 ) by L1170 , L1154 , L1147 , L1166;
L1172: ( ( addnat ) "**" C111 ) = ( ( addnat ) . (( card R7 ) , ( card R8 )) ) by L1171 , L1157 , L1169 , AFINSQ_2:38;
L1173: ( ( addnat ) "**" C111 ) = ( ( card R7 ) + ( card R8 ) ) by L1172 , BINOP_2:def 23;
L1174: (( card { R1 , R4 } ) = 2 & ( dom R15 ) = { R1 , R4 }) by L1142 , L1143 , CARD_2:57 , FUNCT_4:62;
thus L1175: thesis by L1174 , L1155 , L1173 , L1164 , L1107 , AFINSQ_2:51;
end;
theorem
L1176: (for R15 being  finite-yielding Function holds (for R1 being set holds ((( dom R15 ) is  finite & R1 in ( dom R15 )) implies ( Card_Intersection (R15 , 1) ) = ( ( Card_Intersection (( R15 | ( ( dom R15 ) \ { R1 } ) ) , 1) ) + ( card ( R15 . R1 ) ) ))))
proof
let R15 being  finite-yielding Function;
let R1 being set;
assume that
L1177: ( dom R15 ) is  finite
and
L1178: R1 in ( dom R15 );
reconsider D85 = ( dom R15 ) as  finite set by L1177;
L1179: ( card D85 ) > ( 0 ) by L1178;
reconsider D86 = ( ( card D85 ) - 1 ) as (Element of ( NAT )) by L1179 , NAT_1:20;
set D87 = ( D85 \ { R1 } );
L1180: (D87 = ( {} ) implies ( card D87 ) = ( {} ));
consider C112 being (Function of ( card D87 ) , D87) such that L1181: C112 is  one-to-one by L887;
L1182: (not ( card D87 ) in ( card D87 ));
consider C113 being (Function of ( ( card D87 ) \/ { ( card D87 ) } ) , ( D87 \/ { R1 } )) such that L1183: ( C113 | ( card D87 ) ) = C112 and L1184: ( C113 . ( card D87 ) ) = R1 by L1182 , L1180 , STIRL2_1:57;
L1185: (not R1 in D87) by ZFMISC_1:56;
L1186: C113 is  one-to-one by L1185 , L1181 , L1180 , L1183 , L1184 , STIRL2_1:58;
L1187: ( card D85 ) = ( D86 + 1 );
L1188: ( card D87 ) = D86 by L1187 , L1178 , STIRL2_1:55;
L1189: ( card D85 ) = ( ( card D87 ) \/ { ( card D87 ) } ) by L1188 , L1187 , AFINSQ_1:2;
reconsider D88 = C113 as (Function of ( card D85 ) , D85) by L1189 , L1178 , ZFMISC_1:116;
consider C114 being (XFinSequence of ( NAT )) such that L1190: ( dom C114 ) = ( card D85 ) and L1191: (for R5 being set holds (R5 in ( dom C114 ) implies ( C114 . R5 ) = ( card ( ( R15 * D88 ) . R5 ) ))) and L1192: ( Card_Intersection (R15 , 1) ) = ( Sum C114 ) by L1186 , L1092;
L1193: ( D88 . D86 ) = R1 by L1178 , L1184 , L1187 , STIRL2_1:55;
L1194: ( D85 /\ D87 ) = D87 by XBOOLE_1:28;
L1195: ( dom ( R15 | D87 ) ) = D87 by L1194 , RELAT_1:61;
consider C115 being (XFinSequence of ( NAT )) such that L1196: ( dom C115 ) = ( card D87 ) and L1197: (for R5 being set holds (R5 in ( dom C115 ) implies ( C115 . R5 ) = ( card ( ( ( R15 | D87 ) * C112 ) . R5 ) ))) and L1198: ( Card_Intersection (( R15 | D87 ) , 1) ) = ( Sum C115 ) by L1195 , L1181 , L1092;
L1199: D86 < ( D86 + 1 ) by NAT_1:13;
L1200: D86 c= ( D86 + 1 ) by L1199 , NAT_1:39;
L1201: (for R4 being set holds (R4 in ( dom C115 ) implies ( C114 . R4 ) = ( C115 . R4 )))
proof
L1202: (D87 = ( D85 /\ D87 ) & ( D85 /\ D87 ) = ( dom ( R15 | D87 ) )) by RELAT_1:61 , XBOOLE_1:28;
let R4 being set;
assume that
L1203: R4 in ( dom C115 );
L1204: ( C114 . R4 ) = ( card ( ( R15 * D88 ) . R4 ) ) by L1196 , L1188 , L1190 , L1191 , L1200 , L1203;
L1205: ( dom C112 ) = D86 by L1180 , L1188 , FUNCT_2:def 1;
L1206: ( C112 . R4 ) in ( rng C112 ) by L1205 , L1196 , L1188 , L1203 , FUNCT_1:def 3;
L1207: ( ( R15 | D87 ) . ( C112 . R4 ) ) = ( R15 . ( C112 . R4 ) ) by L1206 , L1202 , FUNCT_1:47;
L1208: ( dom D88 ) = ( D86 + 1 ) by CARD_1:27 , FUNCT_2:def 1;
L1209: ( ( R15 * D88 ) . R4 ) = ( R15 . ( D88 . R4 ) ) by L1208 , L1196 , L1188 , L1200 , L1203 , FUNCT_1:13;
L1210: ( C112 . R4 ) = ( D88 . R4 ) by L1196 , L1183 , L1188 , L1203 , L1205 , FUNCT_1:47;
L1211: ( ( R15 * D88 ) . R4 ) = ( ( ( R15 | D87 ) * C112 ) . R4 ) by L1210 , L1196 , L1188 , L1203 , L1205 , L1209 , L1207 , FUNCT_1:13;
thus L1212: thesis by L1211 , L1197 , L1203 , L1204;
end;
L1213: D86 < ( D86 + 1 ) by NAT_1:13;
L1214: D86 in ( card D85 ) by L1213 , NAT_1:44;
L1215: D86 in ( dom D88 ) by L1214 , CARD_1:27 , FUNCT_2:def 1;
L1216: ( ( R15 * D88 ) . D86 ) = ( R15 . ( D88 . D86 ) ) by L1215 , FUNCT_1:13;
L1217: ( ( dom C114 ) /\ D86 ) = ( dom C115 ) by L1196 , L1188 , L1190 , L1200 , XBOOLE_1:28;
L1218: ( C114 | D86 ) = C115 by L1217 , L1201 , FUNCT_1:46;
L1219: ( ( Sum C115 ) + ( C114 . D86 ) ) = ( Sum ( C114 | ( D86 + 1 ) ) ) by L1218 , L1190 , L1214 , AFINSQ_2:65;
L1220: ( C114 . D86 ) = ( card ( ( R15 * D88 ) . D86 ) ) by L1190 , L1191 , L1214;
thus L1221: thesis by L1220 , L1198 , L1190 , L1192 , L1219 , L1216 , L1193 , RELAT_1:69;
end;
theorem
L1222: (for R6 being set holds (for R13 being Function holds (( dom ( Intersect (R13 , ( ( dom R13 ) --> R6 )) ) ) = ( dom R13 ) & (for R1 being set holds (R1 in ( dom R13 ) implies ( ( Intersect (R13 , ( ( dom R13 ) --> R6 )) ) . R1 ) = ( ( R13 . R1 ) /\ R6 ))))))
proof
let R6 being set;
let R13 being Function;
L1223: ( dom ( ( dom R13 ) --> R6 ) ) = ( dom R13 ) by FUNCOP_1:13;
L1224: ( ( dom R13 ) /\ ( dom ( ( dom R13 ) --> R6 ) ) ) = ( dom R13 ) by L1223;
thus L1225: ( dom R13 ) = ( dom ( Intersect (R13 , ( ( dom R13 ) --> R6 )) ) ) by L1224 , YELLOW20:def 2;
let R1 being set;
assume L1226: R1 in ( dom R13 );
L1227: ( ( Intersect (R13 , ( ( dom R13 ) --> R6 )) ) . R1 ) = ( ( R13 . R1 ) /\ ( ( ( dom R13 ) --> R6 ) . R1 ) ) by L1226 , L1224 , YELLOW20:def 2;
thus L1228: thesis by L1227 , L1226 , FUNCOP_1:7;
end;
theorem
L1229: (for R6 being set holds (for R13 being Function holds ( ( union ( rng R13 ) ) /\ R6 ) = ( union ( rng ( Intersect (R13 , ( ( dom R13 ) --> R6 )) ) ) )))
proof
let R6 being set;
let R13 being Function;
set D89 = ( Intersect (R13 , ( ( dom R13 ) --> R6 )) );
thus L1230: ( ( union ( rng R13 ) ) /\ R6 ) c= ( union ( rng D89 ) )
proof
let R1 being set;
assume that
L1231: R1 in ( ( union ( rng R13 ) ) /\ R6 );
L1232: R1 in R6 by L1231 , XBOOLE_0:def 4;
L1233: R1 in ( union ( rng R13 ) ) by L1231 , XBOOLE_0:def 4;
consider C116 being set such that L1234: R1 in C116 and L1235: C116 in ( rng R13 ) by L1233 , TARSKI:def 4;
consider R2 being set such that L1236: R2 in ( dom R13 ) and L1237: ( R13 . R2 ) = C116 by L1235 , FUNCT_1:def 3;
L1238: R2 in ( dom D89 ) by L1236 , L1222;
L1239: ( D89 . R2 ) in ( rng D89 ) by L1238 , FUNCT_1:def 3;
L1240: ( D89 . R2 ) = ( C116 /\ R6 ) by L1236 , L1237 , L1222;
L1241: R1 in ( D89 . R2 ) by L1240 , L1234 , L1232 , XBOOLE_0:def 4;
thus L1242: thesis by L1241 , L1239 , TARSKI:def 4;
end;

thus L1243: ( union ( rng D89 ) ) c= ( ( union ( rng R13 ) ) /\ R6 )
proof
let R1 being set;
assume L1244: R1 in ( union ( rng D89 ) );
consider C117 being set such that L1245: R1 in C117 and L1246: C117 in ( rng D89 ) by L1244 , TARSKI:def 4;
consider R2 being set such that L1247: R2 in ( dom D89 ) and L1248: ( D89 . R2 ) = C117 by L1246 , FUNCT_1:def 3;
L1249: R2 in ( dom R13 ) by L1247 , L1222;
L1250: ( R13 . R2 ) in ( rng R13 ) by L1249 , FUNCT_1:def 3;
L1251: ( D89 . R2 ) = ( ( R13 . R2 ) /\ R6 ) by L1249 , L1222;
L1252: R1 in ( R13 . R2 ) by L1251 , L1245 , L1248 , XBOOLE_0:def 4;
L1253: R1 in ( union ( rng R13 ) ) by L1252 , L1250 , TARSKI:def 4;
L1254: R1 in R6 by L1245 , L1248 , L1251 , XBOOLE_0:def 4;
thus L1255: thesis by L1254 , L1253 , XBOOLE_0:def 4;
end;

end;
theorem
L1244: (for R4 being set holds (for R6 being set holds (for R13 being Function holds (for R14 being Function holds ( ( Intersection (R13 , R14 , R4) ) /\ R6 ) = ( Intersection (( Intersect (R13 , ( ( dom R13 ) --> R6 )) ) , R14 , R4) )))))
proof
let R4 being set;
let R6 being set;
let R13 being Function;
let R14 being Function;
set D90 = ( Intersect (R13 , ( ( dom R13 ) --> R6 )) );
set D91 = ( Intersection (R13 , R14 , R4) );
set D92 = ( Intersection (D90 , R14 , R4) );
thus L1245: ( D91 /\ R6 ) c= D92
proof
let R1 being set;
assume that
L1246: R1 in ( D91 /\ R6 );
L1247: (for R5 being set holds ((R5 in ( dom R14 ) & ( R14 . R5 ) = R4) implies R1 in ( D90 . R5 )))
proof
L1248: R1 in D91 by L1246 , XBOOLE_0:def 4;
let R5 being set;
assume L1249: (R5 in ( dom R14 ) & ( R14 . R5 ) = R4);
L1250: R1 in ( R13 . R5 ) by L1249 , L1248 , L599;
L1251: R5 in ( dom R13 ) by L1250 , FUNCT_1:def 2;
L1252: R1 in R6 by L1246 , XBOOLE_0:def 4;
L1253: R1 in ( ( R13 . R5 ) /\ R6 ) by L1252 , L1250 , XBOOLE_0:def 4;
thus L1254: thesis by L1253 , L1251 , L1222;
end;
L1255: R1 in R6 by L1246 , XBOOLE_0:def 4;
L1256: R1 in ( ( union ( rng R13 ) ) /\ R6 ) by L1255 , L1246 , XBOOLE_0:def 4;
L1257: R1 in ( union ( rng D90 ) ) by L1256 , L1229;
thus L1258: thesis by L1257 , L1247 , L599;
end;

thus L1259: D92 c= ( D91 /\ R6 )
proof
let R1 being set;
assume that
L1260: R1 in D92;
L1261: R1 in ( union ( rng D90 ) ) by L1260;
L1262: R1 in ( ( union ( rng R13 ) ) /\ R6 ) by L1261 , L1229;
L1263: R1 in R6 by L1262 , XBOOLE_0:def 4;
L1264: (for R5 being set holds ((R5 in ( dom R14 ) & ( R14 . R5 ) = R4) implies R1 in ( R13 . R5 )))
proof
L1265: ( dom D90 ) = ( dom R13 ) by L1222;
let R5 being set;
assume L1266: (R5 in ( dom R14 ) & ( R14 . R5 ) = R4);
L1267: R1 in ( D90 . R5 ) by L1266 , L1260 , L599;
L1268: R5 in ( dom D90 ) by L1267 , FUNCT_1:def 2;
L1269: R1 in ( ( R13 . R5 ) /\ R6 ) by L1268 , L1267 , L1265 , L1222;
thus L1270: thesis by L1269 , XBOOLE_0:def 4;
end;
L1271: R1 in ( union ( rng R13 ) ) by L1262 , XBOOLE_0:def 4;
L1272: R1 in D91 by L1271 , L1264 , L599;
thus L1273: thesis by L1272 , L1263 , XBOOLE_0:def 4;
end;

end;
theorem
L1260: (for B119 , B120 being XFinSequence holds ((B119 is  one-to-one & B120 is  one-to-one & ( rng B119 ) misses ( rng B120 )) implies ( B119 ^ B120 ) is  one-to-one))
proof
let C118 , C119 being XFinSequence;
assume that
L1261: C118 is  one-to-one
and
L1262: C119 is  one-to-one
and
L1263: ( rng C118 ) misses ( rng C119 );
L1264: ( len C118 ) , ( rng C118 ) are_equipotent  by L1261 , WELLORD2:def 4;
L1265: ( card ( len C118 ) ) = ( card ( rng C118 ) ) by L1264 , CARD_1:5;
L1266: ( len C119 ) , ( rng C119 ) are_equipotent  by L1262 , WELLORD2:def 4;
L1267: ( card ( len C119 ) ) = ( card ( rng C119 ) ) by L1266 , CARD_1:5;
reconsider D93 = ( C118 ^ C119 ) as (Function of ( dom ( C118 ^ C119 ) ) , ( rng ( C118 ^ C119 ) )) by FUNCT_2:1;
L1268: ( dom ( C118 ^ C119 ) ) = ( ( len C118 ) + ( len C119 ) ) by AFINSQ_1:def 3;
L1269: D93 is  onto by FUNCT_2:def 3;
L1270: ( card ( ( rng C118 ) \/ ( rng C119 ) ) ) = ( ( card ( rng C118 ) ) + ( card ( rng C119 ) ) ) by L1263 , CARD_2:40;
L1271: ( card ( dom ( C118 ^ C119 ) ) ) = ( card ( rng ( C118 ^ C119 ) ) ) by L1270 , L1265 , L1267 , L1268 , AFINSQ_1:26;
thus L1272: thesis by L1271 , L1269 , STIRL2_1:60;
end;
theorem
L1273: (for R10 being Nat holds (for R15 being  finite-yielding Function holds (for R7 being  finite set holds (for R1 being set holds (for R9 being Nat holds ((( dom R15 ) = R7 & R1 in ( dom R15 ) & R10 > ( 0 )) implies ( Card_Intersection (R15 , ( R10 + 1 )) ) = ( ( Card_Intersection (( R15 | ( ( dom R15 ) \ { R1 } ) ) , ( R10 + 1 )) ) + ( Card_Intersection (( Intersect (( R15 | ( ( dom R15 ) \ { R1 } ) ) , ( ( ( dom R15 ) \ { R1 } ) --> ( R15 . R1 ) )) ) , R10) ) )))))))
proof
let R10 being Nat;
let R15 being  finite-yielding Function;
let R7 being  finite set;
let R1 being set;
let R9 being Nat;
assume that
L1274: ( dom R15 ) = R7
and
L1275: R1 in ( dom R15 )
and
L1276: R10 > ( 0 );
set D94 = ( R7 \ { R1 } );
L1277: ( D94 \/ { R1 } ) = R7 by L1274 , L1275 , ZFMISC_1:116;
set D95 = ( Intersect (( R15 | ( ( dom R15 ) \ { R1 } ) ) , ( ( ( dom R15 ) \ { R1 } ) --> ( R15 . R1 ) )) );
set D96 = { B121 where B121 is (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) : (( card ( B121 " { 1 } ) ) = ( R10 + 1 ) & ( B121 . R1 ) = 1) };
set D97 = { B122 where B122 is (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) : (( card ( B122 " { 1 } ) ) = ( R10 + 1 ) & ( B122 . R1 ) = ( 0 )) };
L1278: ( D97 \/ D96 ) = ( Choose (( D94 \/ { R1 } ) , ( R10 + 1 ) , 1 , ( 0 )) ) by L480;
reconsider D98 = D97 , D99 = D96 as  finite set by L1278 , FINSET_1:1 , XBOOLE_1:7;
consider C120 being (Function of ( card D99 ) , D99) such that L1279: C120 is  one-to-one by L887;
L1280: (not R1 in D94) by ZFMISC_1:56;
L1281: ( card ( Choose (D94 , R10 , 1 , ( 0 )) ) ) = ( card D99 ) by L1280 , L378;
defpred S16[ set , set ] means (ex R12 being Function st (R12 = ( C120 . $1 ) & R12 in D99 & $2 = ( R12 | D94 )));
L1282: (for R2 being set holds (R2 in ( card D99 ) implies (ex B123 being set st (B123 in ( Choose (D94 , R10 , 1 , ( 0 )) ) & S16[ R2 , B123 ]))))
proof
L1283: (not R1 in D94) by ZFMISC_1:56;
L1284: ( ( D94 \/ { R1 } ) \ { R1 } ) = D94 by L1283 , ZFMISC_1:117;
let R2 being set;
assume L1285: R2 in ( card D99 );
L1286: R2 in ( dom C120 ) by L1285 , CARD_1:27 , FUNCT_2:def 1;
L1287: ( C120 . R2 ) in ( rng C120 ) by L1286 , FUNCT_1:def 3;
L1288: ( C120 . R2 ) in D99 by L1287;
consider C121 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) such that L1289: ( C120 . R2 ) = C121 and L1290: ( card ( C121 " { 1 } ) ) = ( R10 + 1 ) and L1291: ( C121 . R1 ) = 1 by L1288;
L1292: ( dom C121 ) = ( D94 \/ { R1 } ) by FUNCT_2:def 1;
L1293: ( rng ( C121 | D94 ) ) c= { 1 , ( 0 ) };
L1294: ( ( D94 \/ { R1 } ) /\ D94 ) = D94 by XBOOLE_1:7 , XBOOLE_1:28;
L1295: ( dom ( C121 | D94 ) ) = D94 by L1294 , L1292 , RELAT_1:61;
reconsider D100 = ( C121 | D94 ) as (Function of D94 , { 1 , ( 0 ) }) by L1295 , L1293 , FUNCT_2:2;
L1296: (not R1 in ( D100 " { 1 } )) by ZFMISC_1:56;
L1297: (R1 in { R1 } & ( dom C121 ) = ( D94 \/ { R1 } )) by FUNCT_2:def 1 , TARSKI:def 1;
L1298: R1 in ( dom C121 ) by L1297 , XBOOLE_0:def 3;
L1299: ( C121 " { 1 } ) = ( ( D100 " { 1 } ) \/ { R1 } ) by L1298 , L1291 , L1292 , L1284 , AFINSQ_2:66;
L1300: ( R10 + 1 ) = ( ( card ( D100 " { 1 } ) ) + 1 ) by L1299 , L1290 , L1296 , CARD_2:41;
L1301: D100 in ( Choose (D94 , R10 , 1 , ( 0 )) ) by L1300 , L255;
thus L1302: thesis by L1301 , L1287 , L1289;
end;
consider C122 being (Function of ( card D99 ) , ( Choose (D94 , R10 , 1 , ( 0 )) )) such that L1303: (for R2 being set holds (R2 in ( card D99 ) implies S16[ R2 , ( C122 . R2 ) ])) from FUNCT_2:sch 1(L1282);
L1304: (for R2 being set holds (for R3 being set holds ((R2 in ( dom C122 ) & R3 in ( dom C122 ) & ( C122 . R2 ) = ( C122 . R3 )) implies R2 = R3)))
proof
let R2 being set;
let R3 being set;
assume that
L1305: R2 in ( dom C122 )
and
L1306: R3 in ( dom C122 )
and
L1307: ( C122 . R2 ) = ( C122 . R3 );
consider C123 being Function such that L1308: C123 = ( C120 . R3 ) and L1309: C123 in D99 and L1310: ( C122 . R3 ) = ( C123 | D94 ) by L1303 , L1306;
consider C124 being Function such that L1311: C124 = ( C120 . R2 ) and L1312: C124 in D99 and L1313: ( C122 . R2 ) = ( C124 | D94 ) by L1303 , L1305;
L1314: (ex B124 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) st (C124 = B124 & ( card ( B124 " { 1 } ) ) = ( R10 + 1 ) & ( B124 . R1 ) = 1)) by L1312;
L1315: ( dom C124 ) = ( D94 \/ { R1 } ) by L1314 , FUNCT_2:def 1;
L1316: (ex B125 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) st (C123 = B125 & ( card ( B125 " { 1 } ) ) = ( R10 + 1 ) & ( B125 . R1 ) = 1)) by L1309;
L1317: ( dom C123 ) = ( D94 \/ { R1 } ) by L1316 , FUNCT_2:def 1;
L1318: (for R5 being set holds (R5 in ( dom C124 ) implies ( C124 . R5 ) = ( C123 . R5 )))
proof
let R5 being set;
assume that
L1319: R5 in ( dom C124 );
L1320:
now
per cases  by L1315 , L1319 , XBOOLE_0:def 3;
suppose L1321: R5 in D94;

L1322: R5 in ( ( dom C124 ) /\ D94 ) by L1321 , L1319 , XBOOLE_0:def 4;
L1323: ( ( C124 | D94 ) . R5 ) = ( C124 . R5 ) by L1322 , FUNCT_1:48;
L1324: R5 in ( ( dom C123 ) /\ D94 ) by L1315 , L1317 , L1319 , L1321 , XBOOLE_0:def 4;
thus L1325: thesis by L1324 , L1307 , L1313 , L1310 , L1323 , FUNCT_1:48;
end;
suppose L1326: R5 in { R1 };

L1327: R5 = R1 by L1326 , TARSKI:def 1;
thus L1328: thesis by L1327 , L1314 , L1316;
end;
end;
thus L1330: thesis by L1320;
end;
L1331: C124 = C123 by L1318 , L1315 , L1317 , FUNCT_1:2;
L1332: (D99 = ( {} ) implies ( card D99 ) = ( {} ));
L1333: ( dom C120 ) = ( card D99 ) by L1332 , FUNCT_2:def 1;
thus L1334: thesis by L1333 , L1279 , L1305 , L1306 , L1311 , L1308 , L1331 , FUNCT_1:def 4;
end;
L1335: C122 is  one-to-one by L1304 , FUNCT_1:def 4;
L1336: ( D94 /\ R7 ) = D94 by XBOOLE_1:28;
L1337: ( dom ( R15 | ( ( dom R15 ) \ { R1 } ) ) ) = D94 by L1336 , L1274 , RELAT_1:61;
L1338: ( dom D95 ) = D94 by L1337 , L1274 , L1222;
consider C125 being (XFinSequence of ( NAT )) such that L1339: ( dom C125 ) = ( dom C122 ) and L1340: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C125 ) & R12 = ( C122 . R5 )) implies ( C125 . R5 ) = ( card ( Intersection (D95 , R12 , 1) ) )))) and L1341: ( Card_Intersection (D95 , R10) ) = ( Sum C125 ) by L1338 , L1281 , L1335 , L894;
L1342: ( ( addnat ) "**" C125 ) = ( Card_Intersection (D95 , R10) ) by L1341 , AFINSQ_2:51;
L1343: (not R1 in D94) by ZFMISC_1:56;
L1344: ( card ( Choose (D94 , ( R10 + 1 ) , 1 , ( 0 )) ) ) = ( card D98 ) by L1343 , L437;
set D101 = ( Choose (R7 , ( R10 + 1 ) , 1 , ( 0 )) );
consider C126 being (Function of ( card D98 ) , D98) such that L1345: C126 is  one-to-one by L887;
L1346: (D99 = ( {} ) implies ( card D99 ) = ( {} ));
L1347: ( dom C120 ) = ( card D99 ) by L1346 , FUNCT_2:def 1;
L1348: (D98 = ( {} ) implies ( card D98 ) = ( {} ));
L1349: ( dom C126 ) = ( card D98 ) by L1348 , FUNCT_2:def 1;
reconsider D102 = C126 , D103 = C120 as XFinSequence by L1349 , L1347 , AFINSQ_1:5;
L1350: ( card D98 ) = ( len D102 ) by L1348 , FUNCT_2:def 1;
defpred S17[ set , set ] means (ex R12 being Function st (R12 = ( C126 . $1 ) & R12 in D98 & $2 = ( R12 | D94 )));
L1351: (for B126 being set holds (B126 in ( card D98 ) implies (ex B127 being set st (B127 in ( Choose (D94 , ( R10 + 1 ) , 1 , ( 0 )) ) & S17[ B126 , B127 ]))))
proof
let C127 being set;
assume L1352: C127 in ( card D98 );
L1353: C127 in ( dom C126 ) by L1352 , CARD_1:27 , FUNCT_2:def 1;
L1354: ( C126 . C127 ) in ( rng C126 ) by L1353 , FUNCT_1:def 3;
L1355: ( C126 . C127 ) in D98 by L1354;
consider C128 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) such that L1356: ( C126 . C127 ) = C128 and L1357: ( card ( C128 " { 1 } ) ) = ( R10 + 1 ) and L1358: ( C128 . R1 ) = ( 0 ) by L1355;
L1359: ( dom C128 ) = ( D94 \/ { R1 } ) by FUNCT_2:def 1;
L1360: ( rng ( C128 | D94 ) ) c= { 1 , ( 0 ) };
L1361: ( ( D94 \/ { R1 } ) /\ D94 ) = D94 by XBOOLE_1:7 , XBOOLE_1:28;
L1362: ( dom ( C128 | D94 ) ) = D94 by L1361 , L1359 , RELAT_1:61;
reconsider D104 = ( C128 | D94 ) as (Function of D94 , { 1 , ( 0 ) }) by L1362 , L1360 , FUNCT_2:2;
L1363: (not R1 in D94) by ZFMISC_1:56;
L1364: ( ( D94 \/ { R1 } ) \ { R1 } ) = D94 by L1363 , ZFMISC_1:117;
L1365: ( C128 " { 1 } ) = ( D104 " { 1 } ) by L1364 , L1358 , L1359 , AFINSQ_2:67;
L1366: D104 in ( Choose (D94 , ( R10 + 1 ) , 1 , ( 0 )) ) by L1365 , L1357 , L255;
thus L1367: thesis by L1366 , L1354 , L1356;
end;
consider C129 being (Function of ( card D98 ) , ( Choose (D94 , ( R10 + 1 ) , 1 , ( 0 )) )) such that L1368: (for R2 being set holds (R2 in ( card D98 ) implies S17[ R2 , ( C129 . R2 ) ])) from FUNCT_2:sch 1(L1351);
L1369: ( ( rng C126 ) \/ ( rng C120 ) ) c= ( D98 \/ D99 ) by XBOOLE_1:13;
L1370: ( rng ( D102 ^ D103 ) ) c= ( D98 \/ D99 ) by L1369 , AFINSQ_1:26;
L1371: ( rng ( D102 ^ D103 ) ) c= D101 by L1370 , L1277 , L480;
L1372: ( card D99 ) = ( len D103 ) by L1346 , FUNCT_2:def 1;
L1373: (for R2 being set holds (for R3 being set holds ((R2 in ( dom C129 ) & R3 in ( dom C129 ) & ( C129 . R2 ) = ( C129 . R3 )) implies R2 = R3)))
proof
let R2 being set;
let R3 being set;
assume that
L1374: R2 in ( dom C129 )
and
L1375: R3 in ( dom C129 )
and
L1376: ( C129 . R2 ) = ( C129 . R3 );
consider C130 being Function such that L1377: C130 = ( C126 . R3 ) and L1378: C130 in D98 and L1379: ( C129 . R3 ) = ( C130 | D94 ) by L1368 , L1375;
consider C131 being Function such that L1380: C131 = ( C126 . R2 ) and L1381: C131 in D98 and L1382: ( C129 . R2 ) = ( C131 | D94 ) by L1368 , L1374;
L1383: (ex B128 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) st (C131 = B128 & ( card ( B128 " { 1 } ) ) = ( R10 + 1 ) & ( B128 . R1 ) = ( 0 ))) by L1381;
L1384: ( dom C131 ) = ( D94 \/ { R1 } ) by L1383 , FUNCT_2:def 1;
L1385: (ex B129 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) st (C130 = B129 & ( card ( B129 " { 1 } ) ) = ( R10 + 1 ) & ( B129 . R1 ) = ( 0 ))) by L1378;
L1386: ( dom C130 ) = ( D94 \/ { R1 } ) by L1385 , FUNCT_2:def 1;
L1387: (for R5 being set holds (R5 in ( dom C131 ) implies ( C131 . R5 ) = ( C130 . R5 )))
proof
let R5 being set;
assume that
L1388: R5 in ( dom C131 );
L1389:
now
per cases  by L1384 , L1388 , XBOOLE_0:def 3;
suppose L1390: R5 in D94;

L1391: R5 in ( ( dom C131 ) /\ D94 ) by L1390 , L1388 , XBOOLE_0:def 4;
L1392: ( ( C131 | D94 ) . R5 ) = ( C131 . R5 ) by L1391 , FUNCT_1:48;
L1393: R5 in ( ( dom C130 ) /\ D94 ) by L1384 , L1386 , L1388 , L1390 , XBOOLE_0:def 4;
thus L1394: thesis by L1393 , L1376 , L1382 , L1379 , L1392 , FUNCT_1:48;
end;
suppose L1395: R5 in { R1 };

L1396: R5 = R1 by L1395 , TARSKI:def 1;
thus L1397: thesis by L1396 , L1383 , L1385;
end;
end;
thus L1399: thesis by L1389;
end;
L1400: C131 = C130 by L1387 , L1384 , L1386 , FUNCT_1:2;
L1401: (D98 = ( {} ) implies ( card D98 ) = ( {} ));
L1402: ( dom C126 ) = ( card D98 ) by L1401 , FUNCT_2:def 1;
thus L1403: thesis by L1402 , L1345 , L1374 , L1375 , L1380 , L1377 , L1400 , FUNCT_1:def 4;
end;
L1404: C129 is  one-to-one by L1373 , FUNCT_1:def 4;
consider C132 being (XFinSequence of ( NAT )) such that L1405: ( dom C132 ) = ( dom C129 ) and L1406: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C132 ) & R12 = ( C129 . R5 )) implies ( C132 . R5 ) = ( card ( Intersection (( R15 | ( ( dom R15 ) \ { R1 } ) ) , R12 , 1) ) )))) and L1407: ( Card_Intersection (( R15 | ( ( dom R15 ) \ { R1 } ) ) , ( R10 + 1 )) ) = ( Sum C132 ) by L1404 , L1344 , L1337 , L894;
L1408: (( Choose (D94 , ( R10 + 1 ) , 1 , ( 0 )) ) = ( {} ) implies ( card ( Choose (D94 , ( R10 + 1 ) , 1 , ( 0 )) ) ) = ( {} ));
L1409: ( dom C129 ) = ( card D98 ) by L1408 , L1344 , FUNCT_2:def 1;
L1410: (not R1 in D94) by ZFMISC_1:56;
L1411: ( ( card D98 ) + ( card D99 ) ) = ( card D101 ) by L1410 , L1344 , L1281 , L1277 , L511;
L1412: ( dom ( D102 ^ D103 ) ) = ( card D101 ) by L1411 , L1350 , L1372 , AFINSQ_1:def 3;
reconsider D105 = ( D102 ^ D103 ) as (Function of ( card D101 ) , D101) by L1412 , L1371 , FUNCT_2:2;
L1413: ( rng C126 ) misses ( rng C120 ) by L480 , XBOOLE_1:64;
L1414: D105 is  one-to-one by L1413 , L1345 , L1279 , L1260;
consider C133 being (XFinSequence of ( NAT )) such that L1415: ( dom C133 ) = ( dom D105 ) and L1416: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C133 ) & R12 = ( D105 . R5 )) implies ( C133 . R5 ) = ( card ( Intersection (R15 , R12 , 1) ) )))) and L1417: ( Card_Intersection (R15 , ( R10 + 1 )) ) = ( Sum C133 ) by L1414 , L1274 , L894;
L1418: ( ( addnat ) "**" C133 ) = ( Card_Intersection (R15 , ( R10 + 1 )) ) by L1417 , AFINSQ_2:51;
L1419: (( Choose (D94 , R10 , 1 , ( 0 )) ) = ( {} ) implies ( card ( Choose (D94 , R10 , 1 , ( 0 )) ) ) = ( {} ));
L1420: ( dom C122 ) = ( card D99 ) by L1419 , L1281 , FUNCT_2:def 1;
L1421: (for B130 being Nat holds (B130 in ( dom C132 ) implies ( C133 . B130 ) = ( C132 . B130 )))
proof
let C134 being Nat;
assume that
L1422: C134 in ( dom C132 );
consider C135 being Function such that L1423: C135 = ( C126 . C134 ) and L1424: C135 in D98 and L1425: ( C129 . C134 ) = ( C135 | D94 ) by L1368 , L1405 , L1422;
L1426: ( C132 . C134 ) = ( card ( Intersection (( R15 | D94 ) , ( C135 | D94 ) , 1) ) ) by L1274 , L1406 , L1422 , L1425;
L1427: (ex B131 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) st (C135 = B131 & ( card ( B131 " { 1 } ) ) = ( R10 + 1 ) & ( B131 . R1 ) = ( 0 ))) by L1424;
consider R2 being set such that L1428: R2 in ( C135 " { 1 } ) by L1427 , CARD_1:27 , XBOOLE_0:def 1;
L1429: ( C135 . R2 ) in { 1 } by L1428 , FUNCT_1:def 7;
L1430: ( C135 . R2 ) = 1 by L1429 , TARSKI:def 1;
L1431: R2 in ( dom C135 ) by L1428 , FUNCT_1:def 7;
L1432: 1 in ( rng C135 ) by L1431 , L1430 , FUNCT_1:def 3;
L1433: ( D94 \/ { R1 } ) = R7 by L1274 , L1275 , ZFMISC_1:116;
L1434: ( ( dom C132 ) + ( 0 ) ) <= ( ( dom C132 ) + ( dom C125 ) ) by XREAL_1:7;
L1435: ( dom C135 ) = ( D94 \/ { R1 } ) by L1427 , FUNCT_2:def 1;
L1436: ( C135 " { 1 } ) = ( ( C135 | D94 ) " { 1 } ) by L1435 , L1427 , L1433 , AFINSQ_2:67;
L1437: C134 < ( dom C132 ) by L1422 , NAT_1:44;
L1438: C134 < ( ( dom C132 ) + ( dom C125 ) ) by L1437 , L1434 , XXREAL_0:2;
L1439: C134 < ( dom C133 ) by L1438 , L1405 , L1339 , L1350 , L1372 , L1415 , L1409 , L1420 , AFINSQ_1:def 3;
L1440: C134 in ( dom C133 ) by L1439 , NAT_1:44;
L1441: ( D105 . C134 ) = ( D102 . C134 ) by L1405 , L1350 , L1422 , AFINSQ_1:def 3;
L1442: ( C133 . C134 ) = ( card ( Intersection (R15 , C135 , 1) ) ) by L1441 , L1416 , L1423 , L1440;
L1443: (( ( C135 | D94 ) " { 1 } ) c= ( dom ( C135 | D94 ) ) & ( dom ( C135 | D94 ) ) c= D94) by RELAT_1:58 , RELAT_1:132;
L1444: ( Intersection (( R15 | D94 ) , C135 , 1) ) = ( Intersection (R15 , C135 , 1) ) by L1443 , L1436 , L1432 , L732 , XBOOLE_1:1;
thus L1445: thesis by L1444 , L1436 , L1442 , L1426 , L704;
end;
L1446: (D99 = ( {} ) implies ( card D99 ) = ( {} ));
L1447: ( dom C120 ) = ( card D99 ) by L1446 , FUNCT_2:def 1;
L1448: (for B132 being Nat holds (B132 in ( dom C125 ) implies ( C133 . ( ( len C132 ) + B132 ) ) = ( C125 . B132 )))
proof
L1449: ( D94 \/ { R1 } ) = R7 by L1274 , L1275 , ZFMISC_1:116;
let C136 being Nat;
assume that
L1450: C136 in ( dom C125 );
consider C137 being Function such that L1451: C137 = ( C120 . C136 ) and L1452: C137 in D99 and L1453: ( C122 . C136 ) = ( C137 | D94 ) by L1303 , L1339 , L1450;
consider C138 being (Function of ( D94 \/ { R1 } ) , { 1 , ( 0 ) }) such that L1454: C137 = C138 and L1455: ( card ( C138 " { 1 } ) ) = ( R10 + 1 ) and L1456: ( C138 . R1 ) = 1 by L1452;
L1457: ( Intersection (( Intersect (( R15 | D94 ) , ( D94 --> ( R15 . R1 ) )) ) , ( C137 | D94 ) , 1) ) = ( ( Intersection (( R15 | D94 ) , ( C137 | D94 ) , 1) ) /\ ( R15 . R1 ) ) by L1274 , L1337 , L1244;
L1458: ( dom C138 ) = ( D94 \/ { R1 } ) by FUNCT_2:def 1;
L1459: ( dom C137 ) = R7 by L1458 , L1274 , L1275 , L1454 , ZFMISC_1:116;
L1460: (1 in ( rng ( C137 | D94 ) ) & ( ( C137 | D94 ) " { 1 } ) c= D94)
proof
L1461: (( ( C137 | D94 ) " { 1 } ) c= ( dom ( C137 | D94 ) ) & ( dom ( C137 | D94 ) ) = ( ( dom C137 ) /\ D94 )) by RELAT_1:61 , RELAT_1:132;
reconsider D106 = ( ( C137 | D94 ) " { 1 } ) as  finite set;
L1462: (not R1 in D94) by ZFMISC_1:56;
L1463: (not R1 in ( ( dom C137 ) /\ D94 )) by L1462 , XBOOLE_0:def 4;
L1464: (not R1 in ( dom ( C137 | D94 ) )) by L1463 , RELAT_1:61;
L1465: (not R1 in D106) by L1464 , FUNCT_1:def 7;
L1466: ( { R1 } \/ D106 ) = ( C137 " { 1 } ) by L1274 , L1275 , L1454 , L1456 , L1459 , AFINSQ_2:66;
L1467: ( ( card D106 ) + 1 ) = ( R10 + 1 ) by L1466 , L1454 , L1455 , L1465 , CARD_2:41;
consider R4 being set such that L1468: R4 in D106 by L1467 , L1276 , CARD_1:27 , XBOOLE_0:def 1;
L1469: R4 in ( dom ( C137 | D94 ) ) by L1468 , FUNCT_1:def 7;
L1470: ( ( C137 | D94 ) . R4 ) in ( rng ( C137 | D94 ) ) by L1469 , FUNCT_1:def 3;
L1471: (( ( dom C137 ) /\ D94 ) c= D94 & ( ( C137 | D94 ) . R4 ) in { 1 }) by L1468 , FUNCT_1:def 7 , XBOOLE_1:17;
thus L1472: thesis by L1471 , L1461 , L1470 , TARSKI:def 1 , XBOOLE_1:1;
end;
L1473: C136 < ( dom C125 ) by L1450 , NAT_1:44;
L1474: ( ( dom C132 ) + C136 ) < ( ( dom C132 ) + ( dom C125 ) ) by L1473 , XREAL_1:8;
L1475: ( ( dom C132 ) + C136 ) < ( dom C133 ) by L1474 , L1405 , L1339 , L1350 , L1372 , L1415 , L1409 , L1420 , AFINSQ_1:def 3;
L1476: ( ( dom C132 ) + C136 ) in ( dom C133 ) by L1475 , NAT_1:44;
L1477: ( D105 . ( C136 + ( len D102 ) ) ) = C137 by L1339 , L1447 , L1450 , L1451 , AFINSQ_1:def 3;
L1478: ( C133 . ( ( dom C132 ) + C136 ) ) = ( card ( Intersection (R15 , C137 , 1) ) ) by L1477 , L1405 , L1350 , L1416 , L1409 , L1476;
L1479: ( C137 . R1 ) in { 1 } by L1454 , L1456 , TARSKI:def 1;
L1480: R1 in ( C137 " { 1 } ) by L1479 , L1274 , L1275 , L1454 , L1458 , L1449 , FUNCT_1:def 7;
L1481: ( C125 . C136 ) = ( card ( Intersection (( Intersect (( R15 | D94 ) , ( D94 --> ( R15 . R1 ) )) ) , ( C137 | D94 ) , 1) ) ) by L1274 , L1340 , L1450 , L1453;
L1482: ( C125 . C136 ) = ( card ( ( Intersection (R15 , ( C137 | D94 ) , 1) ) /\ ( R15 . R1 ) ) ) by L1481 , L1460 , L1457 , L732;
thus L1483: thesis by L1482 , L1480 , L1459 , L1478 , L769;
end;
L1484: ( dom C133 ) = ( ( len C132 ) + ( len C125 ) ) by L1405 , L1339 , L1350 , L1372 , L1415 , L1409 , L1420 , AFINSQ_1:def 3;
L1485: C133 = ( C132 ^ C125 ) by L1484 , L1421 , L1448 , AFINSQ_1:def 3;
L1486: ( ( addnat ) "**" C133 ) = ( ( addnat ) . (( ( addnat ) "**" C132 ) , ( ( addnat ) "**" C125 )) ) by L1485 , AFINSQ_2:42;
L1487: ( ( addnat ) "**" C132 ) = ( Card_Intersection (( R15 | ( ( dom R15 ) \ { R1 } ) ) , ( R10 + 1 )) ) by L1407 , AFINSQ_2:51;
thus L1488: thesis by L1487 , L1486 , L1342 , L1418 , BINOP_2:def 23;
end;
theorem
L1489: (for R1 being set holds (for R13 being Function holds (R1 in ( dom R13 ) implies ( union ( rng R13 ) ) = ( ( union ( rng ( R13 | ( ( dom R13 ) \ { R1 } ) ) ) ) \/ ( R13 . R1 ) ))))
proof
let R1 being set;
let R13 being Function;
set D107 = ( ( dom R13 ) \ { R1 } );
set D108 = ( R13 | D107 );
L1490: ( R13 | ( dom R13 ) ) = R13;
assume L1491: R1 in ( dom R13 );
L1492: ( D107 \/ { R1 } ) = ( dom R13 ) by L1491 , ZFMISC_1:116;
L1493: R13 = ( D108 \/ ( R13 | { R1 } ) ) by L1492 , L1490 , RELAT_1:78;
L1494: ( rng R13 ) = ( ( rng D108 ) \/ ( rng ( R13 | { R1 } ) ) ) by L1493 , RELAT_1:12;
L1495: ( Im (R13 , R1) ) = { ( R13 . R1 ) } by L1491 , FUNCT_1:59;
L1496: ( rng ( R13 | { R1 } ) ) = { ( R13 . R1 ) } by L1495 , RELAT_1:115;
L1497: ( union ( rng R13 ) ) = ( ( union ( rng D108 ) ) \/ ( union { ( R13 . R1 ) } ) ) by L1496 , L1494 , ZFMISC_1:78;
thus L1498: thesis by L1497 , ZFMISC_1:25;
end;
theorem
L1499: (for B133 being  finite-yielding Function holds (for R7 being  finite set holds (ex B134 being (XFinSequence of ( INT )) st (( dom B134 ) = ( card R7 ) & (for R9 being Nat holds (R9 in ( dom B134 ) implies ( B134 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (B133 , ( R9 + 1 )) ) )))))))
proof
let C139 being  finite-yielding Function;
let R7 being  finite set;
defpred S18[ set , set ] means (for R9 being Nat holds (R9 = $1 implies $2 = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (C139 , ( R9 + 1 )) ) )));
L1500: (for R10 being Nat holds (R10 in ( card R7 ) implies (ex B135 being (Element of ( INT )) st S18[ R10 , B135 ])))
proof
let R10 being Nat;
assume that
L1501: R10 in ( card R7 );
reconsider D109 = ( ( ( - 1 ) |^ R10 ) * ( Card_Intersection (C139 , ( R10 + 1 )) ) ) as (Element of ( INT ));
take D109;
thus L1502: thesis;
end;
consider C140 being (XFinSequence of ( INT )) such that L1503: (( dom C140 ) = ( card R7 ) & (for R10 being Nat holds (R10 in ( card R7 ) implies S18[ R10 , ( C140 . R10 ) ]))) from STIRL2_1:sch 5(L1500);
take C140;
thus L1504: thesis by L1503;
end;
::$N Principle of Inclusion/Exclusion
theorem
L1505: (for B136 being  finite-yielding Function holds (for R7 being  finite set holds (( dom B136 ) = R7 implies (for B137 being (XFinSequence of ( INT )) holds ((( dom B137 ) = ( card R7 ) & (for R9 being Nat holds (R9 in ( dom B137 ) implies ( B137 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (B136 , ( R9 + 1 )) ) )))) implies ( card ( union ( rng B136 ) ) ) = ( Sum B137 ))))))
proof
defpred S19[ Nat ] means (for B138 being  finite-yielding Function holds (for R7 being  finite set holds ((( dom B138 ) = R7 & ( card R7 ) = $1) implies (for B139 being (XFinSequence of ( INT )) holds ((( dom B139 ) = ( card R7 ) & (for R9 being Nat holds (R9 in ( dom B139 ) implies ( B139 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (B138 , ( R9 + 1 )) ) )))) implies ( card ( union ( rng B138 ) ) ) = ( Sum B139 ))))));
L1506: (for R10 being Nat holds (S19[ R10 ] implies S19[ ( R10 + 1 ) ]))
proof
let R10 being Nat;
assume that
L1507: S19[ R10 ];
let C141 being  finite-yielding Function;
let R7 being  finite set;
assume that
L1508: ( dom C141 ) = R7
and
L1509: ( card R7 ) = ( R10 + 1 );
L1510: (( rng C141 ) is  finite & (for R1 being set holds (R1 in ( rng C141 ) implies R1 is  finite))) by L1508 , FINSET_1:8;
reconsider D110 = ( union ( rng C141 ) ) as  finite set by L1510;
let C142 being (XFinSequence of ( INT ));
assume that
L1511: ( dom C142 ) = ( card R7 )
and
L1512: (for R9 being Nat holds (R9 in ( dom C142 ) implies ( C142 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (C141 , ( R9 + 1 )) ) )));
per cases ;
suppose L1513: R10 = ( 0 );

L1514: ( len C142 ) = 1 by L1513 , L1509 , L1511;
L1515: C142 = <% ( C142 . ( 0 ) ) %> by L1514 , AFINSQ_1:34;
L1516: ( C142 . ( 0 ) ) is (Element of ( INT )) by INT_1:def 2;
L1517: ( ( addint ) "**" C142 ) = ( C142 . ( 0 ) ) by L1516 , L1515 , AFINSQ_2:37;
L1518: ( 0 ) in ( dom C142 ) by L1509 , L1511 , L1513 , CARD_1:49 , TARSKI:def 1;
L1519: ( C142 . ( 0 ) ) = ( ( ( - 1 ) |^ ( 0 ) ) * ( Card_Intersection (C141 , ( ( 0 ) + 1 )) ) ) by L1518 , L1512;
consider R1 being set such that L1520: ( dom C141 ) = { R1 } by L1508 , L1509 , L1513 , CARD_2:42;
L1521: ( rng C141 ) = { ( C141 . R1 ) } by L1520 , FUNCT_1:4;
L1522: ( union ( rng C141 ) ) = ( C141 . R1 ) by L1521 , ZFMISC_1:25;
L1523: (( ( - 1 ) |^ ( 0 ) ) = 1 & C141 = ( R1 .--> ( C141 . R1 ) )) by L1520 , L1521 , FUNCOP_1:9 , NEWTON:4;
L1524: ( C142 . ( 0 ) ) = ( card ( union ( rng C141 ) ) ) by L1523 , L1133 , L1522 , L1519;
thus L1525: thesis by L1524 , L1517 , AFINSQ_2:50;
end;
suppose L1526: R10 > ( 0 );

consider R1 being set such that L1527: R1 in ( dom C141 ) by L1508 , L1509 , CARD_1:27 , XBOOLE_0:def 1;
set D111 = ( R7 \ { R1 } );
L1528: ( card D111 ) = R10 by L1508 , L1509 , L1527 , STIRL2_1:55;
set D112 = ( C141 | D111 );
reconsider D113 = ( union ( rng D112 ) ) as  finite set;
set D114 = ( C141 . R1 );
set D115 = ( Intersect (D112 , ( ( dom D112 ) --> ( C141 . R1 ) )) );
consider C143 being (XFinSequence of ( INT )) such that L1529: ( dom C143 ) = ( card D111 ) and L1530: (for R9 being Nat holds (R9 in ( dom C143 ) implies ( C143 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (D112 , ( R9 + 1 )) ) ))) by L1499;
L1531: ( D113 /\ ( C141 . R1 ) ) = ( union ( rng D115 ) ) by L1229;
reconsider D116 = ( union ( rng D115 ) ) as  finite set by L1531;
consider C144 being (XFinSequence of ( INT )) such that L1532: ( dom C144 ) = ( card D111 ) and L1533: (for R9 being Nat holds (R9 in ( dom C144 ) implies ( C144 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (D115 , ( R9 + 1 )) ) ))) by L1499;
set D117 = ( ( - 1 ) (#) C144 );
reconsider D118 = D117 as (XFinSequence of ( INT ));
reconsider D119 = <% ( card D114 ) %> , D120 = <% ( 0 ) %> as (XFinSequence of ( INT ));
reconsider D121 = ( <% ( card D114 ) %> ^ D118 ) , D122 = ( C143 ^ <% ( 0 ) %> ) as (XFinSequence of ( INT ));
L1534: ( card D111 ) = R10 by L1508 , L1509 , L1527 , STIRL2_1:55;
L1535: ( 0 ) is (Element of ( INT )) by INT_1:def 2;
L1536: ( ( addint ) "**" D120 ) = ( 0 ) by L1535 , AFINSQ_2:37;
L1537: ( card D114 ) is (Element of ( INT )) by INT_1:def 2;
L1538: ( ( addint ) "**" D119 ) = ( card D114 ) by L1537 , AFINSQ_2:37;
L1539: ( ( - 1 ) * ( Sum C144 ) ) = ( Sum D118 ) by AFINSQ_2:64;
L1540: ( ( addint ) "**" D121 ) = ( ( addint ) . (( card D114 ) , ( ( addint ) "**" D118 )) ) by L1538 , AFINSQ_2:42
.= ( ( card D114 ) + ( ( addint ) "**" D118 ) ) by BINOP_2:def 20
.= ( ( card D114 ) + ( Sum D118 ) ) by AFINSQ_2:50;
L1541: ( ( addint ) "**" D122 ) = ( ( addint ) . (( ( addint ) "**" C143 ) , ( 0 )) ) by L1536 , AFINSQ_2:42
.= ( ( ( addint ) "**" C143 ) + ( 0 ) ) by BINOP_2:def 20
.= ( Sum C143 ) by AFINSQ_2:50;
L1542: ( Sum ( D121 ^ D122 ) ) = ( ( Sum D121 ) + ( Sum D122 ) ) by AFINSQ_2:55
.= ( ( ( addint ) "**" D121 ) + ( Sum D122 ) ) by AFINSQ_2:50
.= ( ( ( card D114 ) + ( ( - 1 ) * ( Sum C144 ) ) ) + ( Sum C143 ) ) by L1539 , L1540 , L1541 , AFINSQ_2:50;
L1543: ( D113 \/ D114 ) = D110 by L1508 , L1527 , L1489;
L1544: ( D113 /\ D114 ) = D116 by L1229;
L1545: ( dom D112 ) = D111 by L1508 , RELAT_1:62;
L1546: ( dom D115 ) = D111 by L1545 , L1222;
L1547: ( card D116 ) = ( Sum C144 ) by L1546 , L1507 , L1532 , L1533 , L1534;
L1548: (( len <% ( card D114 ) %> ) = 1 & ( len D118 ) = ( card D111 )) by L1532 , AFINSQ_1:33 , VALUED_1:def 5;
L1549: ( len D121 ) = ( R10 + 1 ) by L1548 , L1528 , AFINSQ_1:17;
L1550: (for B140 being Nat holds (B140 in ( dom C142 ) implies ( C142 . B140 ) = ( ( addint ) . (( D121 . B140 ) , ( D122 . B140 )) )))
proof
let C145 being Nat;
assume that
L1551: C145 in ( dom C142 );
reconsider D123 = C145 as (Element of ( NAT )) by ORDINAL1:def 12;
per cases ;
suppose L1552: C145 = ( 0 );

L1553: (( 0 ) in R10 & R10 = ( dom C143 )) by L1508 , L1509 , L1526 , L1527 , L1529 , NAT_1:44 , STIRL2_1:55;
L1554: (( D122 . ( 0 ) ) = ( C143 . ( 0 ) ) & ( C143 . ( 0 ) ) = ( ( ( - 1 ) |^ ( 0 ) ) * ( Card_Intersection (D112 , ( ( 0 ) + 1 )) ) )) by L1553 , L1530 , AFINSQ_1:def 3;
L1555: (( D121 . ( 0 ) ) = ( card D114 ) & ( ( - 1 ) |^ ( 0 ) ) = 1) by AFINSQ_1:35 , NEWTON:4;
L1556: ( ( addint ) . (( D121 . ( 0 ) ) , ( D122 . ( 0 ) )) ) = ( ( card D114 ) + ( Card_Intersection (D112 , ( ( 0 ) + 1 )) ) ) by L1555 , L1554 , BINOP_2:def 20;
L1557: ( ( - 1 ) |^ ( 0 ) ) = 1 by NEWTON:4;
L1558: ( C142 . ( 0 ) ) = ( ( ( - 1 ) |^ ( 0 ) ) * ( Card_Intersection (C141 , ( ( 0 ) + 1 )) ) ) by L1512 , L1551 , L1552;
thus L1559: thesis by L1558 , L1508 , L1527 , L1552 , L1556 , L1557 , L1176;
end;
suppose L1560: C145 > ( 0 );

reconsider D124 = ( C145 - 1 ) as (Element of ( NAT )) by L1560 , NAT_1:20;
L1561: ( len <% ( card D114 ) %> ) = 1 by AFINSQ_1:33;
L1562: ( card D111 ) = R10 by L1508 , L1509 , L1527 , STIRL2_1:55;
L1563: C145 < ( R10 + 1 ) by L1509 , L1511 , L1551 , NAT_1:44;
L1564: C145 <= R10 by L1563 , NAT_1:13;
L1565: D124 < ( D124 + 1 ) by NAT_1:13;
L1566: D124 < R10 by L1565 , L1564 , XXREAL_0:2;
L1567: D124 in ( dom C144 ) by L1566 , L1532 , L1562 , NAT_1:44;
L1568: (( D118 . D124 ) = ( ( - 1 ) * ( C144 . D124 ) ) & ( C144 . D124 ) = ( ( ( - 1 ) |^ D124 ) * ( Card_Intersection (D115 , ( D124 + 1 )) ) )) by L1567 , L1533 , VALUED_1:6;
L1569: ( ( 0 ) + 1 ) <= C145 by L1565 , NAT_1:13;
L1570: ( D121 . C145 ) = ( ( ( - 1 ) * ( ( - 1 ) |^ D124 ) ) * ( Card_Intersection (D115 , ( D124 + 1 )) ) ) by L1569 , L1549 , L1563 , L1561 , L1568 , AFINSQ_1:19;
L1571: ( D121 . C145 ) = ( ( ( - 1 ) |^ ( D124 + 1 ) ) * ( Card_Intersection (D115 , ( D124 + 1 )) ) ) by L1570 , NEWTON:6;
L1572: ( C142 . C145 ) = ( ( ( - 1 ) |^ C145 ) * ( Card_Intersection (C141 , ( C145 + 1 )) ) ) by L1512 , L1551;
L1573: ( Card_Intersection (C141 , ( C145 + 1 )) ) = ( ( Card_Intersection (D112 , ( C145 + 1 )) ) + ( Card_Intersection (D115 , D123) ) ) by L1508 , L1527 , L1545 , L1560 , L1273;
L1574: ( C142 . C145 ) = ( ( ( ( - 1 ) |^ C145 ) * ( Card_Intersection (D112 , ( C145 + 1 )) ) ) + ( ( ( - 1 ) |^ C145 ) * ( Card_Intersection (D115 , D123) ) ) ) by L1573 , L1572;
per cases  by L1564 , XXREAL_0:1;
suppose L1575: C145 < R10;

L1576: C145 in R10 by L1575 , NAT_1:44;
L1577: ( card D111 ) = R10 by L1508 , L1509 , L1527 , STIRL2_1:55;
L1578: (( C143 . C145 ) = ( ( ( - 1 ) |^ C145 ) * ( Card_Intersection (D112 , ( C145 + 1 )) ) ) & ( D122 . C145 ) = ( C143 . C145 )) by L1577 , L1529 , L1530 , L1576 , AFINSQ_1:def 3;
thus L1579: thesis by L1578 , L1574 , L1571 , BINOP_2:def 20;
end;
suppose L1580: C145 = R10;

L1581: C145 = ( card D111 ) by L1580 , L1508 , L1509 , L1527 , STIRL2_1:55;
L1582: ( C145 + 1 ) > ( card D111 ) by L1581 , NAT_1:13;
L1583: ( Card_Intersection (D112 , ( C145 + 1 )) ) = ( 0 ) by L1582 , L1545 , L1082;
L1584: C145 = ( len C143 ) by L1508 , L1509 , L1527 , L1529 , L1580 , STIRL2_1:55;
L1585: ( D122 . C145 ) = ( 0 ) by L1584 , AFINSQ_1:36;
thus L1586: thesis by L1585 , L1574 , L1571 , L1583 , BINOP_2:def 20;
end;
end;
end;
L1589: ( card D113 ) = ( Sum C143 ) by L1507 , L1545 , L1529 , L1530 , L1534;
L1590: ( card D110 ) = ( ( ( Sum C143 ) + ( card D114 ) ) - ( Sum C144 ) ) by L1589 , L1547 , L1543 , L1544 , CARD_2:45;
L1591: ( len <% ( 0 ) %> ) = 1 by AFINSQ_1:33;
L1592: ( len C143 ) = ( card D111 ) by L1529;
L1593: ( len D122 ) = ( R10 + 1 ) by L1592 , L1591 , L1528 , AFINSQ_1:17;
L1594: ( len C142 ) = ( R10 + 1 ) by L1509 , L1511;
L1595: ( Sum C142 ) = ( ( addint ) "**" C142 ) by AFINSQ_2:50
.= ( ( addint ) "**" ( D121 ^ D122 ) ) by L1549 , L1593 , L1550 , L1594 , AFINSQ_2:46
.= ( Sum ( D121 ^ D122 ) ) by AFINSQ_2:50;
thus L1596: thesis by L1595 , L1542 , L1590;
end;
end;
L1598: S19[ ( 0 ) ]
proof
let C146 being  finite-yielding Function;
let R7 being  finite set;
assume that
L1599: ( dom C146 ) = R7
and
L1600: ( card R7 ) = ( 0 );
L1601: ( dom C146 ) = ( {} ) by L1599 , L1600;
L1602: ( rng C146 ) = ( {} ) by L1601 , RELAT_1:42;
let C147 being (XFinSequence of ( INT ));
assume that
L1603: ( dom C147 ) = ( card R7 )
and
L1604: (for R9 being Nat holds (R9 in ( dom C147 ) implies ( C147 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (C146 , ( R9 + 1 )) ) )));
L1605: ( len C147 ) = ( 0 ) by L1600 , L1603;
L1606: ( ( addint ) "**" C147 ) = ( the_unity_wrt ( addint ) ) by L1605 , AFINSQ_2:def 8
.= ( 0 ) by BINOP_2:4;
thus L1607: thesis by L1606 , L1602 , L1600 , AFINSQ_2:50 , ZFMISC_1:2;
end;
L1608: (for R10 being Nat holds S19[ R10 ]) from NAT_1:sch 2(L1598 , L1506);
thus L1609: thesis by L1608;
end;
theorem
L1610: (for R15 being  finite-yielding Function holds (for R7 being  finite set holds (for R9 being Nat holds (for R10 being Nat holds (( dom R15 ) = R7 implies ((ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (R7 , R10 , R1 , R4) ) implies ( card ( Intersection (R15 , R12 , R1) ) ) = R9))))) implies ( Card_Intersection (R15 , R10) ) = ( R9 * ( ( card R7 ) choose R10 ) )))))))
proof
let R15 being  finite-yielding Function;
let R7 being  finite set;
let R9 being Nat;
let R10 being Nat;
assume that
L1611: R7 = ( dom R15 );
assume L1612: (ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (R7 , R10 , R1 , R4) ) implies ( card ( Intersection (R15 , R12 , R1) ) ) = R9)))));
consider R1 being set, R4 being set such that L1613: R1 <> R4 and L1614: (for R12 being Function holds (R12 in ( Choose (R7 , R10 , R1 , R4) ) implies ( card ( Intersection (R15 , R12 , R1) ) ) = R9)) by L1612;
set D125 = ( Choose (R7 , R10 , R1 , R4) );
consider C148 being (Function of ( card D125 ) , D125) such that L1615: C148 is  one-to-one by L887;
consider C149 being (XFinSequence of ( NAT )) such that L1616: ( dom C149 ) = ( dom C148 ) and L1617: (for R5 being set holds (for R12 being Function holds ((R5 in ( dom C149 ) & R12 = ( C148 . R5 )) implies ( C149 . R5 ) = ( card ( Intersection (R15 , R12 , R1) ) )))) and L1618: ( Card_Intersection (R15 , R10) ) = ( Sum C149 ) by L1611 , L1613 , L1615 , L894;
L1619: (for R5 being set holds (R5 in ( dom C149 ) implies ( C149 . R5 ) = R9))
proof
let R5 being set;
assume that
L1620: R5 in ( dom C149 );
L1621: ( C148 . R5 ) in ( rng C148 ) by L1616 , L1620 , FUNCT_1:def 3;
consider C150 being (Function of R7 , { R1 , R4 }) such that L1622: C150 = ( C148 . R5 ) and L1623: ( card ( C150 " { R1 } ) ) = R10 by L1621 , L255;
L1624: ( C149 . R5 ) = ( card ( Intersection (R15 , C150 , R1) ) ) by L1617 , L1620 , L1622;
thus L1625: thesis by L1624 , L1614 , L1621 , L1622;
end;
L1626: C149 = ( ( dom C149 ) --> R9 ) by L1619 , FUNCOP_1:11;
L1627: ( rng C149 ) c= { R9 } by L1626 , FUNCOP_1:13;
L1628: (D125 = ( {} ) implies ( card D125 ) = ( {} ));
L1629: ( dom C148 ) = ( card D125 ) by L1628 , FUNCT_2:def 1;
L1630: R9 in { R9 } by TARSKI:def 1;
L1631: ({ R9 } c= { ( 0 ) , R9 } & ( C149 " { R9 } ) = ( dom C148 )) by L1630 , L1616 , L1626 , FUNCOP_1:14 , ZFMISC_1:7;
L1632: ( Sum C149 ) = ( R9 * ( card ( card D125 ) ) ) by L1631 , L1627 , L1629 , AFINSQ_2:68 , XBOOLE_1:1;
thus L1633: thesis by L1632 , L1613 , L1618 , L519;
end;
theorem
L1634: (for R15 being  finite-yielding Function holds (for R7 being  finite set holds (( dom R15 ) = R7 implies (for B141 being (XFinSequence of ( NAT )) holds ((( dom B141 ) = ( card R7 ) & (for R9 being Nat holds (R9 in ( dom B141 ) implies (ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (R7 , ( R9 + 1 ) , R1 , R4) ) implies ( card ( Intersection (R15 , R12 , R1) ) ) = ( B141 . R9 ))))))))) implies (ex B142 being (XFinSequence of ( INT )) st (( dom B142 ) = ( card R7 ) & ( card ( union ( rng R15 ) ) ) = ( Sum B142 ) & (for R9 being Nat holds (R9 in ( dom B142 ) implies ( B142 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( B141 . R9 ) ) * ( ( card R7 ) choose ( R9 + 1 ) ) ))))))))))
proof
let R15 being  finite-yielding Function;
let R7 being  finite set;
assume that
L1635: ( dom R15 ) = R7;
let C151 being (XFinSequence of ( NAT ));
assume that
L1636: (( dom C151 ) = ( card R7 ) & (for R9 being Nat holds (R9 in ( dom C151 ) implies (ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (R7 , ( R9 + 1 ) , R1 , R4) ) implies ( card ( Intersection (R15 , R12 , R1) ) ) = ( C151 . R9 )))))))));
defpred S20[ set , set ] means (for R9 being Nat holds (R9 = $1 implies $2 = ( ( ( ( - 1 ) |^ R9 ) * ( C151 . R9 ) ) * ( ( card R7 ) choose ( R9 + 1 ) ) )));
L1637: (for R1 being set holds (R1 in ( card R7 ) implies (ex R4 being set st (R4 in ( INT ) & S20[ R1 , R4 ]))))
proof
L1638: ( card R7 ) is (Subset of ( NAT )) by STIRL2_1:8;
let R1 being set;
assume L1639: R1 in ( card R7 );
reconsider D126 = R1 as (Element of ( NAT )) by L1639 , L1638;
reconsider D127 = ( ( ( - 1 ) |^ D126 ) * ( C151 . D126 ) ) as Integer;
reconsider D128 = ( ( card R7 ) choose ( D126 + 1 ) ) as Integer;
take ( D127 * D128 );
thus L1640: thesis;
end;
consider C152 being (Function of ( card R7 ) , ( INT )) such that L1641: (for R1 being set holds (R1 in ( card R7 ) implies S20[ R1 , ( C152 . R1 ) ])) from FUNCT_2:sch 1(L1637);
L1642: ( dom C152 ) = ( card R7 ) by FUNCT_2:def 1;
reconsider D129 = C152 as XFinSequence by L1642 , AFINSQ_1:5;
reconsider D130 = D129 as (XFinSequence of ( INT ));
take D130;
L1643: (for R9 being Nat holds (R9 in ( dom D130 ) implies ( D130 . R9 ) = ( ( ( - 1 ) |^ R9 ) * ( Card_Intersection (R15 , ( R9 + 1 )) ) )))
proof
let R9 being Nat;
assume that
L1644: R9 in ( dom D130 );
L1645: (ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (R7 , ( R9 + 1 ) , R1 , R4) ) implies ( card ( Intersection (R15 , R12 , R1) ) ) = ( C151 . R9 )))))) by L1636 , L1642 , L1644;
L1646: ( Card_Intersection (R15 , ( R9 + 1 )) ) = ( ( C151 . R9 ) * ( ( card R7 ) choose ( R9 + 1 ) ) ) by L1645 , L1635 , L1610;
L1647: ( D130 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( C151 . R9 ) ) * ( ( card R7 ) choose ( R9 + 1 ) ) ) by L1641 , L1642 , L1644;
thus L1648: thesis by L1647 , L1646;
end;
thus L1649: thesis by L1643 , L1635 , L1641 , L1642 , L1505;
end;
L1650: (for B143 , B144 being  finite set holds ((B143 is non  empty & B144 is non  empty) implies (ex B145 being (XFinSequence of ( INT )) st (( dom B145 ) = ( card B144 ) & ( ( ( card B144 ) |^ ( card B143 ) ) - ( Sum B145 ) ) = ( card { B146 where B146 is (Function of B143 , B144) : B146 is  onto } ) & (for R9 being Nat holds (R9 in ( dom B145 ) implies ( B145 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card B144 ) choose ( R9 + 1 ) ) ) * ( ( ( ( card B144 ) - R9 ) - 1 ) |^ ( card B143 ) ) )))))))
proof
let C153 , C154 being  finite set;
assume that
L1651: C153 is non  empty
and
L1652: C154 is non  empty;
defpred S21[ set , set ] means (for R9 being Nat holds (R9 = $1 implies $2 = ( ( ( ( card C154 ) - R9 ) - 1 ) |^ ( card C153 ) )));
L1653: (for R1 being set holds (R1 in ( card C154 ) implies (ex R4 being set st (R4 in ( NAT ) & S21[ R1 , R4 ]))))
proof
let R1 being set;
assume that
L1654: R1 in ( card C154 );
L1655: ( card C154 ) is (Subset of ( NAT )) by STIRL2_1:8;
reconsider D131 = R1 as (Element of ( NAT )) by L1655 , L1654;
L1656: D131 < ( card C154 ) by L1654 , NAT_1:44;
L1657: ( D131 + 1 ) <= ( card C154 ) by L1656 , NAT_1:13;
reconsider D132 = ( ( card C154 ) - ( D131 + 1 ) ) as (Element of ( NAT )) by L1657 , NAT_1:21;
L1658: S21[ D131 , ( D132 |^ ( card C153 ) ) ];
thus L1659: thesis by L1658;
end;
consider C155 being (Function of ( card C154 ) , ( NAT )) such that L1660: (for R1 being set holds (R1 in ( card C154 ) implies S21[ R1 , ( C155 . R1 ) ])) from FUNCT_2:sch 1(L1653);
set D133 = { B147 where B147 is (Function of C153 , C154) : B147 is  onto };
deffunc H3(set) = { B148 where B148 is (Function of C153 , C154) : (not $1 in ( rng B148 )) };
L1661: (for R1 being set holds (R1 in C154 implies H3(R1) in ( bool ( Funcs (C153 , C154) ) )))
proof
let R1 being set;
assume that
L1662: R1 in C154;
L1663: H3(R1) c= ( Funcs (C153 , C154) )
proof
let R4 being set;
assume L1664: R4 in H3(R1);
L1665: (ex B149 being (Function of C153 , C154) st (R4 = B149 & (not R1 in ( rng B149 )))) by L1664;
thus L1666: thesis by L1665 , L1662 , FUNCT_2:8;
end;
thus L1667: thesis by L1663;
end;
consider C156 being (Function of C154 , ( bool ( Funcs (C153 , C154) ) )) such that L1668: (for R1 being set holds (R1 in C154 implies ( C156 . R1 ) = H3(R1))) from FUNCT_2:sch 2(L1661);
L1669: (for R4 being set holds (R4 in ( dom C156 ) implies ( C156 . R4 ) is  finite))
proof
let R4 being set;
assume L1670: R4 in ( dom C156 );
L1671: ( C156 . R4 ) in ( rng C156 ) by L1670 , FUNCT_1:def 3;
thus L1672: thesis by L1671;
end;
reconsider D134 = C156 as  finite-yielding Function by L1669 , FINSET_1:def 4;
L1673: ( union ( rng C156 ) ) c= ( union ( bool ( Funcs (C153 , C154) ) ) ) by ZFMISC_1:77;
L1674: ( union ( rng D134 ) ) c= ( Funcs (C153 , C154) ) by L1673 , ZFMISC_1:81;
reconsider D135 = ( union ( rng D134 ) ) as  finite set;
L1675: ( dom C155 ) = ( card C154 ) by FUNCT_2:def 1;
reconsider D136 = C155 as XFinSequence by L1675 , AFINSQ_1:5;
reconsider D137 = D136 as (XFinSequence of ( NAT ));
L1676: (for R9 being Nat holds (R9 in ( dom D137 ) implies (ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (C154 , ( R9 + 1 ) , R1 , R4) ) implies ( card ( Intersection (D134 , R12 , R1) ) ) = ( D137 . R9 ))))))))
proof
let R9 being Nat;
assume that
L1677: R9 in ( dom D137 );
take ( 0 );
take 1;
thus L1678: ( 0 ) <> 1;
let C157 being Function;
assume L1679: C157 in ( Choose (C154 , ( R9 + 1 ) , ( 0 ) , 1) );
consider C158 being (Function of C154 , { ( 0 ) , 1 }) such that L1680: C158 = C157 and L1681: ( card ( C158 " { ( 0 ) } ) ) = ( R9 + 1 ) by L1679 , L255;
L1682: ( Intersection (D134 , C158 , ( 0 )) ) c= ( Funcs (C153 , ( C154 \ ( C158 " { ( 0 ) } ) )) )
proof
let R5 being set;
assume that
L1683: R5 in ( Intersection (D134 , C158 , ( 0 )) );
L1684: ( 0 ) in ( rng C158 ) by L1681 , CARD_1:27 , FUNCT_1:72;
consider R2 being set such that L1685: R2 in ( dom C158 ) and L1686: ( C158 . R2 ) = ( 0 ) and L1687: R5 in ( D134 . R2 ) by L1684 , L1683 , L641;
L1688: R5 in H3(R2) by L1668 , L1685 , L1687;
consider C159 being (Function of C153 , C154) such that L1689: R5 = C159 and L1690: (not R2 in ( rng C159 )) by L1688;
L1691: ( rng C159 ) c= ( C154 \ ( C158 " { ( 0 ) } ) )
proof
let C160 being set;
assume that
L1692: C160 in ( rng C159 );
assume L1693: (not C160 in ( C154 \ ( C158 " { ( 0 ) } ) ));
L1694: C160 in ( C158 " { ( 0 ) } ) by L1693 , L1692 , XBOOLE_0:def 5;
L1695: ( C158 . C160 ) in { ( 0 ) } by L1694 , FUNCT_1:def 7;
L1696: ( C158 . C160 ) = ( 0 ) by L1695 , TARSKI:def 1;
L1697: C160 in ( dom C158 ) by L1694 , FUNCT_1:def 7;
L1698: C159 in ( D134 . C160 ) by L1697 , L1683 , L1689 , L1696 , L599;
L1699: C159 in H3(C160) by L1698 , L1668 , L1692;
L1700: (ex B150 being (Function of C153 , C154) st (C159 = B150 & (not C160 in ( rng B150 )))) by L1699;
thus L1701: contradiction by L1700 , L1692;
end;
L1702: ( dom C159 ) = C153 by L1685 , FUNCT_2:def 1;
thus L1703: thesis by L1702 , L1689 , L1691 , FUNCT_2:def 2;
end;
reconsider D138 = ( Intersection (D134 , C158 , ( 0 )) ) as  finite set;
L1704: ( card ( C154 \ ( C158 " { ( 0 ) } ) ) ) = ( ( card C154 ) - ( R9 + 1 ) ) by L1681 , CARD_2:44;
L1705: ( Funcs (C153 , ( C154 \ ( C158 " { ( 0 ) } ) )) ) c= ( Intersection (D134 , C158 , ( 0 )) )
proof
let C161 being set;
assume L1706: C161 in ( Funcs (C153 , ( C154 \ ( C158 " { ( 0 ) } ) )) );
consider C162 being Function such that L1707: C161 = C162 and L1708: ( dom C162 ) = C153 and L1709: ( rng C162 ) c= ( C154 \ ( C158 " { ( 0 ) } ) ) by L1706 , FUNCT_2:def 2;
reconsider D139 = C162 as (Function of C153 , C154) by L1708 , L1709 , FUNCT_2:2 , XBOOLE_1:1;
consider R4 being set such that L1710: R4 in ( C158 " { ( 0 ) } ) by L1681 , CARD_1:27 , XBOOLE_0:def 1;
L1711: (not R4 in ( rng C162 )) by L1709 , L1710 , XBOOLE_0:def 5;
L1712: D139 in H3(R4) by L1711;
L1713: ( dom D134 ) = C154 by FUNCT_2:def 1;
L1714: ( C156 . R4 ) in ( rng C156 ) by L1713 , L1710 , FUNCT_1:def 3;
L1715: (for R5 being set holds ((R5 in ( dom C158 ) & ( C158 . R5 ) = ( 0 )) implies C162 in ( D134 . R5 )))
proof
let R5 being set;
assume that
L1716: R5 in ( dom C158 )
and
L1717: ( C158 . R5 ) = ( 0 );
L1718: ( C158 . R5 ) in { ( 0 ) } by L1717 , TARSKI:def 1;
L1719: R5 in ( C158 " { ( 0 ) } ) by L1718 , L1716 , FUNCT_1:def 7;
L1720: (not R5 in ( rng D139 )) by L1719 , L1709 , XBOOLE_0:def 5;
L1721: ( D134 . R5 ) = H3(R5) by L1668 , L1716;
thus L1722: thesis by L1721 , L1720;
end;
L1723: H3(R4) = ( C156 . R4 ) by L1668 , L1710;
L1724: C162 in ( union ( rng D134 ) ) by L1723 , L1714 , L1712 , TARSKI:def 4;
thus L1725: thesis by L1724 , L1707 , L1715 , L599;
end;
L1726: ( Funcs (C153 , ( C154 \ ( C158 " { ( 0 ) } ) )) ) = ( Intersection (D134 , C158 , ( 0 )) ) by L1705 , L1682 , XBOOLE_0:def 10;
L1727:
now
per cases ;
suppose L1728: ( C154 \ ( C158 " { ( 0 ) } ) ) = ( {} );

L1729: (( card D138 ) = ( 0 ) & ( ( ( ( card C154 ) - R9 ) - 1 ) |^ ( card C153 ) ) = ( 0 )) by L1728 , L1651 , L1682 , L1704 , CARD_1:27 , NAT_1:14 , NEWTON:11;
thus L1730: thesis by L1729 , L1660 , L1675 , L1677 , L1680;
end;
suppose L1731: ( C154 \ ( C158 " { ( 0 ) } ) ) <> ( {} );

L1732: ( D137 . R9 ) = ( ( ( ( card C154 ) - R9 ) - 1 ) |^ ( card C153 ) ) by L1660 , L1675 , L1677;
thus L1733: thesis by L1732 , L1680 , L1726 , L1704 , L1731 , L48;
end;
end;
thus L1735: thesis by L1727;
end;
L1736: (( dom D137 ) = ( card C154 ) & ( dom D134 ) = C154) by FUNCT_2:def 1;
consider C163 being (XFinSequence of ( INT )) such that L1737: ( dom C163 ) = ( card C154 ) and L1738: ( card ( union ( rng D134 ) ) ) = ( Sum C163 ) and L1739: (for R9 being Nat holds (R9 in ( dom C163 ) implies ( C163 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( D137 . R9 ) ) * ( ( card C154 ) choose ( R9 + 1 ) ) ))) by L1736 , L1676 , L1634;
take C163;
thus L1740: ( dom C163 ) = ( card C154 ) by L1737;
L1741: ( card ( ( Funcs (C153 , C154) ) \ D135 ) ) = ( ( card ( Funcs (C153 , C154) ) ) - ( card D135 ) ) by L1674 , CARD_2:44;
L1742: D133 c= ( ( Funcs (C153 , C154) ) \ ( union ( rng D134 ) ) )
proof
let R1 being set;
assume L1743: R1 in D133;
consider C164 being (Function of C153 , C154) such that L1744: R1 = C164 and L1745: C164 is  onto by L1743;
assume L1746: (not R1 in ( ( Funcs (C153 , C154) ) \ ( union ( rng D134 ) ) ));
L1747: C164 in ( Funcs (C153 , C154) ) by L1652 , FUNCT_2:8;
L1748: C164 in ( union ( rng D134 ) ) by L1747 , L1744 , L1746 , XBOOLE_0:def 5;
consider C165 being set such that L1749: C164 in C165 and L1750: C165 in ( rng D134 ) by L1748 , TARSKI:def 4;
consider R4 being set such that L1751: R4 in ( dom D134 ) and L1752: ( D134 . R4 ) = C165 by L1750 , FUNCT_1:def 3;
L1753: R4 in C154 by L1751 , FUNCT_2:def 1;
L1754: C164 in H3(R4) by L1753 , L1668 , L1749 , L1752;
L1755: (ex B151 being (Function of C153 , C154) st (C164 = B151 & (not R4 in ( rng B151 )))) by L1754;
L1756: R4 in C154 by L1751 , FUNCT_2:def 1;
thus L1757: contradiction by L1756 , L1745 , L1755 , FUNCT_2:def 3;
end;
L1758: ( ( Funcs (C153 , C154) ) \ ( union ( rng D134 ) ) ) c= D133
proof
let R1 being set;
assume that
L1759: R1 in ( ( Funcs (C153 , C154) ) \ ( union ( rng D134 ) ) );
consider R12 being Function such that L1760: R1 = R12 and L1761: (( dom R12 ) = C153 & ( rng R12 ) c= C154) by L1759 , FUNCT_2:def 2;
reconsider D140 = R12 as (Function of C153 , C154) by L1761 , FUNCT_2:2;
assume L1762: (not R1 in D133);
L1763: (not D140 is  onto) by L1762 , L1760;
L1764: ( rng D140 ) <> C154 by L1763 , FUNCT_2:def 3;
L1765: (not C154 c= ( rng D140 )) by L1764 , XBOOLE_0:def 10;
consider R4 being set such that L1766: R4 in C154 and L1767: (not R4 in ( rng D140 )) by L1765 , TARSKI:def 3;
L1768: R4 in ( dom C156 ) by L1766 , FUNCT_2:def 1;
L1769: ( C156 . R4 ) in ( rng C156 ) by L1768 , FUNCT_1:def 3;
L1770: H3(R4) in ( rng C156 ) by L1769 , L1668 , L1766;
L1771: D140 in H3(R4) by L1767;
L1772: D140 in ( union ( rng D134 ) ) by L1771 , L1770 , TARSKI:def 4;
thus L1773: thesis by L1772 , L1759 , L1760 , XBOOLE_0:def 5;
end;
L1774: ( card ( Funcs (C153 , C154) ) ) = ( ( card C154 ) |^ ( card C153 ) ) by L1652 , L48;
thus L1775: ( card D133 ) = ( ( ( card C154 ) |^ ( card C153 ) ) - ( Sum C163 ) ) by L1774 , L1738 , L1758 , L1742 , L1741 , XBOOLE_0:def 10;
let R9 being Nat;
assume that
L1776: R9 in ( dom C163 );
L1777: ( C163 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( D137 . R9 ) ) * ( ( card C154 ) choose ( R9 + 1 ) ) ) by L1739 , L1776;
L1778: ( D137 . R9 ) = ( ( ( ( card C154 ) - R9 ) - 1 ) |^ ( card C153 ) ) by L1660 , L1737 , L1776;
thus L1779: thesis by L1778 , L1777;
end;
theorem
L1780: (for B152 , B153 being  finite set holds ((B152 is non  empty & B153 is non  empty) implies (ex B154 being (XFinSequence of ( INT )) st (( dom B154 ) = ( ( card B153 ) + 1 ) & ( Sum B154 ) = ( card { B155 where B155 is (Function of B152 , B153) : B155 is  onto } ) & (for R9 being Nat holds (R9 in ( dom B154 ) implies ( B154 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card B153 ) choose R9 ) ) * ( ( ( card B153 ) - R9 ) |^ ( card B152 ) ) )))))))
proof
let C166 , C167 being  finite set;
assume that
L1781: (C166 is non  empty & C167 is non  empty);
reconsider D141 = ( ( card C167 ) |^ ( card C166 ) ) as (Element of ( INT )) by INT_1:def 2;
L1782: ( len <% D141 %> ) = 1 by AFINSQ_1:33;
set D142 = { B156 where B156 is (Function of C166 , C167) : B156 is  onto };
consider C168 being (XFinSequence of ( INT )) such that L1783: ( dom C168 ) = ( card C167 ) and L1784: ( ( ( card C167 ) |^ ( card C166 ) ) - ( Sum C168 ) ) = ( card D142 ) and L1785: (for R9 being Nat holds (R9 in ( dom C168 ) implies ( C168 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card C167 ) choose ( R9 + 1 ) ) ) * ( ( ( ( card C167 ) - R9 ) - 1 ) |^ ( card C166 ) ) ))) by L1781 , L1650;
set D143 = ( ( - 1 ) (#) C168 );
reconsider D144 = D143 as (XFinSequence of ( INT ));
L1786: (( dom D144 ) = ( dom C168 ) & ( dom C168 ) = ( card C167 )) by L1783 , VALUED_1:def 5;
reconsider D145 = ( <% D141 %> ^ D144 ) as (XFinSequence of ( INT ));
take D145;
L1787: ( len D144 ) = ( card C167 ) by L1783 , VALUED_1:def 5;
thus L1788: ( dom D145 ) = ( ( card C167 ) + 1 ) by L1787 , L1782 , AFINSQ_1:def 3;
L1789: ( ( - 1 ) * ( Sum C168 ) ) = ( Sum D144 ) by AFINSQ_2:64;
L1790: ( D141 - ( Sum C168 ) ) = ( D141 + ( Sum D144 ) ) by L1789
.= ( ( addint ) . (D141 , ( Sum D144 )) ) by BINOP_2:def 20
.= ( ( addint ) . (( ( addint ) "**" <% D141 %> ) , ( Sum D144 )) ) by AFINSQ_2:37
.= ( ( addint ) . (( ( addint ) "**" <% D141 %> ) , ( ( addint ) "**" D144 )) ) by AFINSQ_2:50
.= ( ( addint ) "**" D145 ) by AFINSQ_2:42
.= ( Sum D145 ) by AFINSQ_2:50;
thus L1791: ( Sum D145 ) = ( card D142 ) by L1790 , L1784;
let R9 being Nat;
assume that
L1792: R9 in ( dom D145 );
L1793:
now
per cases ;
suppose L1794: R9 = ( 0 );

L1795: (( ( - 1 ) |^ R9 ) = 1 & ( ( card C167 ) choose R9 ) = 1) by L1794 , NEWTON:4 , NEWTON:19;
thus L1796: thesis by L1795 , L1794 , AFINSQ_1:35;
end;
suppose L1797: R9 > ( 0 );

reconsider D146 = ( R9 - 1 ) as (Element of ( NAT )) by L1797 , NAT_1:20;
L1798: R9 < ( ( card C167 ) + 1 ) by L1788 , L1792 , NAT_1:44;
L1799: ( D146 + 1 ) <= ( card C167 ) by L1798 , NAT_1:13;
L1800: D146 < ( card C167 ) by L1799 , NAT_1:13;
L1801: D146 in ( dom D144 ) by L1800 , L1786 , NAT_1:44;
L1802: ( C168 . D146 ) = ( ( ( ( - 1 ) |^ D146 ) * ( ( card C167 ) choose ( D146 + 1 ) ) ) * ( ( ( ( card C167 ) - D146 ) - 1 ) |^ ( card C166 ) ) ) by L1801 , L1785 , L1786;
L1803: ( len <% D141 %> ) = 1 by AFINSQ_1:33;
L1804: ( D145 . ( D146 + 1 ) ) = ( D144 . D146 ) by L1803 , L1801 , AFINSQ_1:def 3;
L1805: ( ( - 1 ) * ( ( - 1 ) |^ D146 ) ) = ( ( - 1 ) |^ R9 ) by L1804 , NEWTON:6;
L1806: ( D145 . ( D146 + 1 ) ) = ( ( - 1 ) * ( C168 . D146 ) ) by L1804 , VALUED_1:6;
thus L1807: thesis by L1806 , L1802 , L1805;
end;
end;
thus L1809: thesis by L1793;
end;
theorem
L1810: (for R9 being Nat holds (for R10 being Nat holds (R10 <= R9 implies (ex B157 being (XFinSequence of ( INT )) st (( R9 block R10 ) = ( ( 1 / ( R10 ! ) ) * ( Sum B157 ) ) & ( dom B157 ) = ( R10 + 1 ) & (for R11 being Nat holds (R11 in ( dom B157 ) implies ( B157 . R11 ) = ( ( ( ( - 1 ) |^ R11 ) * ( R10 choose R11 ) ) * ( ( R10 - R11 ) |^ R9 ) ))))))))
proof
let R9 being Nat;
let R10 being Nat;
assume that
L1811: R10 <= R9;
L1812:
now
per cases ;
suppose L1813: (R9 = ( 0 ) & R10 = ( 0 ));

reconsider D147 = 1 as (Element of ( INT )) by INT_1:def 2;
set D148 = <% D147 %>;
take D149 = D148;
L1814: ( ( addint ) "**" <% D147 %> ) = 1 by AFINSQ_2:37;
L1815: ( Sum D149 ) = 1 by L1814 , AFINSQ_2:50;
thus L1816: ( R9 block R10 ) = ( ( 1 / ( R10 ! ) ) * ( Sum D149 ) ) by L1815 , L1813 , NEWTON:12 , STIRL2_1:26;
thus L1817: ( dom D149 ) = ( R10 + 1 ) by L1813 , AFINSQ_1:33;
let R11 being Nat;
assume L1818: R11 in ( dom D149 );
L1819: R11 in { ( 0 ) } by L1818 , AFINSQ_1:33 , CARD_1:49;
L1820: R11 = ( 0 ) by L1819 , TARSKI:def 1;
L1821: ( ( - 1 ) |^ R11 ) = 1 by L1820 , NEWTON:4;
L1822: ( ( R10 - R11 ) |^ R9 ) = 1 by L1813 , NEWTON:4;
L1823: ( ( 0 ) choose ( 0 ) ) = 1 by NEWTON:19;
L1824: R11 = ( 0 ) by L1819 , TARSKI:def 1;
thus L1825: ( D149 . R11 ) = ( ( ( ( - 1 ) |^ R11 ) * ( R10 choose R11 ) ) * ( ( R10 - R11 ) |^ R9 ) ) by L1824 , L1813 , L1821 , L1822 , L1823 , AFINSQ_1:34;
end;
suppose L1826: (R9 <> ( 0 ) & R10 = ( 0 ));

set D150 = ( ( R10 + 1 ) --> ( 0 ) );
reconsider D151 = D150 as (XFinSequence of ( INT ));
reconsider D152 = D150 as (XFinSequence of ( NAT ));
take D153 = D151;
L1827: (( rng D150 ) c= { ( 0 ) } & { ( 0 ) } c= { ( 0 ) , ( 0 ) }) by ENUMSET1:29 , FUNCOP_1:13;
L1828: ( Sum D152 ) = ( ( 0 ) * ( card ( D152 " { ( 0 ) } ) ) ) by L1827 , AFINSQ_2:68 , XBOOLE_1:1;
thus L1829: (( R9 block R10 ) = ( ( 1 / ( R10 ! ) ) * ( Sum D153 ) ) & ( dom D153 ) = ( R10 + 1 )) by L1828 , L1826 , FUNCOP_1:13 , STIRL2_1:31;
let R11 being Nat;
assume that
L1830: R11 in ( dom D153 );
L1831:
now
per cases ;
suppose L1832: R11 = ( 0 );

L1833: ( ( R10 - R11 ) |^ R9 ) = ( 0 ) by L1832 , L1826 , NAT_1:14 , NEWTON:11;
thus L1834: ( ( R10 choose R11 ) * ( ( R10 - R11 ) |^ R9 ) ) = ( 0 ) by L1833;
end;
suppose L1835: R11 > ( 0 );

L1836: ( R10 choose R11 ) = ( 0 ) by L1835 , L1826 , NEWTON:def 3;
thus L1837: ( ( R10 choose R11 ) * ( ( R10 - R11 ) |^ R9 ) ) = ( 0 ) by L1836;
end;
end;
L1839: ( ( ( - 1 ) |^ R11 ) * ( ( R10 choose R11 ) * ( ( R10 - R11 ) |^ R9 ) ) ) = ( 0 ) by L1831;
L1840: R11 in ( R10 + 1 ) by L1830 , FUNCOP_1:13;
thus L1841: ( D153 . R11 ) = ( ( ( ( - 1 ) |^ R11 ) * ( R10 choose R11 ) ) * ( ( R10 - R11 ) |^ R9 ) ) by L1840 , L1839 , FUNCOP_1:7;
end;
suppose L1842: (R9 <> ( 0 ) & R10 <> ( 0 ));

set D154 = { B158 where B158 is (Function of R10 , R10) : B158 is (Permutation of R10) };
L1843: ( card D154 ) = ( ( card R10 ) ! ) by L239;
reconsider D155 = D154 as  finite set by L1843;
reconsider D156 = { B159 where B159 is (Function of R9 , R10) : B159 is  onto  "increasing } as  finite set by STIRL2_1:24;
set D157 = { B160 where B160 is (Function of R9 , R10) : B160 is  onto };
defpred S22[ set , set ] means (for B161 being (Function of R10 , R10) holds (for B162 being (Function of R9 , R10) holds ($1 = [ B161 , B162 ] implies $2 = ( B161 * B162 ))));
reconsider D158 = R9 , D159 = R10 as non  empty (Subset of ( NAT )) by L1842 , STIRL2_1:8;
L1844: ( card [: D155 , D156 :] ) = ( ( card D155 ) * ( card D156 ) ) by CARD_2:46;
L1845: (for R1 being set holds (R1 in [: D155 , D156 :] implies (ex R4 being set st (R4 in D157 & S22[ R1 , R4 ]))))
proof
let R1 being set;
assume L1846: R1 in [: D155 , D156 :];
consider C169 , C170 being set such that L1847: C169 in D155 and L1848: C170 in D156 and L1849: R1 = [ C169 , C170 ] by L1846 , ZFMISC_1:def 2;
consider C171 being (Function of R9 , R10) such that L1850: C171 = C170 and L1851: C171 is  onto  "increasing by L1848;
L1852: ( rng C171 ) = R10 by L1851 , FUNCT_2:def 3;
consider C172 being (Function of R10 , R10) such that L1853: C172 = C169 and L1854: C172 is (Permutation of R10) by L1847;
reconsider D160 = ( C172 * C171 ) as (Function of R9 , R10);
take D160;
L1855: ( dom C172 ) = R10 by L1842 , FUNCT_2:def 1;
L1856: ( rng C172 ) = R10 by L1854 , FUNCT_2:def 3;
L1857: ( rng ( C172 * C171 ) ) = R10 by L1856 , L1852 , L1855 , RELAT_1:28;
L1858: D160 is  onto by L1857 , FUNCT_2:def 3;
thus L1859: D160 in D157 by L1858;
let C173 being (Function of R10 , R10);
let C174 being (Function of R9 , R10);
assume that
L1860: R1 = [ C173 , C174 ];
L1861: C173 = C172 by L1849 , L1853 , L1860 , XTUPLE_0:1;
thus L1862: thesis by L1861 , L1849 , L1850 , L1860 , XTUPLE_0:1;
end;
consider C175 being (Function of [: D155 , D156 :] , D157) such that L1863: (for R1 being set holds (R1 in [: D155 , D156 :] implies S22[ R1 , ( C175 . R1 ) ])) from FUNCT_2:sch 1(L1845);
L1864: C175 is  one-to-one
proof
let R2 being set;
let R3 being set;
assume that
L1865: R2 in ( dom C175 )
and
L1866: R3 in ( dom C175 )
and
L1867: ( C175 . R2 ) = ( C175 . R3 );
consider C176 , C177 being set such that L1868: C176 in D155 and L1869: C177 in D156 and L1870: R2 = [ C176 , C177 ] by L1865 , ZFMISC_1:def 2;
consider C178 being (Function of R10 , R10) such that L1871: C176 = C178 and L1872: C178 is (Permutation of R10) by L1868;
consider C179 , C180 being set such that L1873: C179 in D155 and L1874: C180 in D156 and L1875: R3 = [ C179 , C180 ] by L1866 , ZFMISC_1:def 2;
L1876: ( C175 . R2 ) in ( rng C175 ) by L1865 , FUNCT_1:def 3;
L1877: ( C175 . R2 ) in D157 by L1876;
consider C181 being (Function of D158 , D159) such that L1878: ( C175 . R2 ) = C181 and L1879: C181 is  onto by L1877;
L1880: ( rng C181 ) = D159 by L1879 , FUNCT_2:def 3;
consider C182 being (Function of R10 , R10) such that L1881: C179 = C182 and L1882: C182 is (Permutation of R10) by L1873;
consider C183 being (Function of R9 , R10) such that L1883: C180 = C183 and L1884: C183 is  onto  "increasing by L1874;
L1885: ( rng C181 ) = D159 by L1879 , FUNCT_2:def 3;
reconsider D161 = C178 , D162 = C182 as (Permutation of ( rng C181 )) by L1885 , L1872 , L1882;
consider C184 being (Function of R9 , R10) such that L1886: C177 = C184 and L1887: C184 is  onto  "increasing by L1869;
reconsider D163 = C184 , D164 = C183 as (Function of D158 , D159);
L1888: ( rng C183 ) = D159 by L1884 , FUNCT_2:def 3;
L1889: (for B163 , B164 being Nat holds ((B163 in ( rng C184 ) & B164 in ( rng C184 ) & B163 < B164) implies ( min* ( C184 " { B163 } ) ) < ( min* ( C184 " { B164 } ) ))) by L1887 , STIRL2_1:def 1;
L1890: D163 is  "increasing by L1889 , STIRL2_1:def 3;
L1891: (for B165 , B166 being Nat holds ((B165 in ( rng C183 ) & B166 in ( rng C183 ) & B165 < B166) implies ( min* ( C183 " { B165 } ) ) < ( min* ( C183 " { B166 } ) ))) by L1884 , STIRL2_1:def 1;
L1892: D164 is  "increasing by L1891 , STIRL2_1:def 3;
L1893: C181 = ( D161 * D163 ) by L1863 , L1865 , L1870 , L1871 , L1886 , L1878;
L1894: ( rng C184 ) = D159 by L1887 , FUNCT_2:def 3;
L1895: C181 = ( D162 * D164 ) by L1863 , L1866 , L1867 , L1875 , L1881 , L1883 , L1878;
L1896: D161 = D162 by L1895 , L1890 , L1892 , L1894 , L1888 , L1893 , L1880 , STIRL2_1:65;
thus L1897: thesis by L1896 , L1870 , L1871 , L1886 , L1875 , L1881 , L1883 , L1890 , L1892 , L1894 , L1888 , L1893 , L1895 , L1880 , STIRL2_1:65;
end;
consider C185 being (Function of R9 , R10) such that L1898: C185 is  onto  "increasing by L1811 , L1842 , STIRL2_1:23;
L1899: D157 c= ( rng C175 )
proof
let R1 being set;
assume L1900: R1 in D157;
consider C186 being (Function of R9 , R10) such that L1901: C186 = R1 and L1902: C186 is  onto by L1900;
L1903: ( rng C186 ) = D159 by L1902 , FUNCT_2:def 3;
consider C187 being (Function of D158 , D159), C188 being (Permutation of D159) such that L1904: C186 = ( C188 * C187 ) and L1905: D159 = ( rng C187 ) and L1906: C187 is  "increasing by L1903 , STIRL2_1:63;
set D165 = C188;
reconsider D166 = C187 as (Function of R9 , R10);
L1907: (for B167 , B168 being Nat holds ((B167 in ( rng C187 ) & B168 in ( rng C187 ) & B167 < B168) implies ( min* ( C187 " { B167 } ) ) < ( min* ( C187 " { B168 } ) ))) by L1906 , STIRL2_1:def 3;
L1908: D166 is  "increasing by L1907 , STIRL2_1:def 1;
L1909: D166 is  onto by L1905 , FUNCT_2:def 3;
L1910: (D165 in D155 & D166 in D156) by L1909 , L1908;
L1911: [ D165 , D166 ] in [: D155 , D156 :] by L1910 , ZFMISC_1:def 2;
L1912: C185 in D157 by L1898;
L1913: [ D165 , D166 ] in ( dom C175 ) by L1912 , L1911 , FUNCT_2:def 1;
L1914: ( C175 . [ D165 , D166 ] ) = C186 by L1863 , L1904 , L1911;
thus L1915: thesis by L1914 , L1901 , L1913 , FUNCT_1:def 3;
end;
L1916: ( rng C175 ) = D157 by L1899 , XBOOLE_0:def 10;
L1917: C185 in D157 by L1898;
L1918: ( dom C175 ) = [: D155 , D156 :] by L1917 , FUNCT_2:def 1;
L1919: D157 , [: D155 , D156 :] are_equipotent  by L1918 , L1864 , L1916 , WELLORD2:def 4;
L1920: ( card D157 ) = ( ( card D155 ) * ( card D156 ) ) by L1919 , L1844 , CARD_1:5;
L1921: ( R10 ! ) > ( 0 ) by NEWTON:17;
L1922: (( ( ( R10 ! ) * ( card D156 ) ) / ( R10 ! ) ) = ( ( card D156 ) * ( ( R10 ! ) / ( R10 ! ) ) ) & ( ( R10 ! ) / ( R10 ! ) ) = 1) by L1921 , XCMPLX_1:60 , XCMPLX_1:74;
consider C189 being (XFinSequence of ( INT )) such that L1923: ( dom C189 ) = ( ( card R10 ) + 1 ) and L1924: ( Sum C189 ) = ( card { B169 where B169 is (Function of R9 , R10) : B169 is  onto } ) and L1925: (for R11 being Nat holds (R11 in ( dom C189 ) implies ( C189 . R11 ) = ( ( ( ( - 1 ) |^ R11 ) * ( ( card R10 ) choose R11 ) ) * ( ( ( card R10 ) - R11 ) |^ ( card R9 ) ) ))) by L1842 , L1780;
take D167 = C189;
L1926: ( card D155 ) = ( ( card R10 ) ! ) by L239;
L1927: ( Sum D167 ) = ( ( R10 ! ) * ( card D156 ) ) by L1926 , L1924 , L1920 , CARD_1:def 2;
L1928: ( R9 block R10 ) = ( ( ( Sum D167 ) * 1 ) / ( R10 ! ) ) by L1927 , L1922 , STIRL2_1:def 2;
thus L1929: ( R9 block R10 ) = ( ( 1 / ( R10 ! ) ) * ( Sum D167 ) ) by L1928 , XCMPLX_1:74;
thus L1930: ( dom D167 ) = ( R10 + 1 ) by L1923 , CARD_1:def 2;
L1931: (( card R10 ) = R10 & ( card R9 ) = R9) by CARD_1:def 2;
let R11 being Nat;
assume L1932: R11 in ( dom D167 );
thus L1933: ( D167 . R11 ) = ( ( ( ( - 1 ) |^ R11 ) * ( R10 choose R11 ) ) * ( ( R10 - R11 ) |^ R9 ) ) by L1932 , L1925 , L1931;
end;
suppose L1934: (R9 = ( 0 ) & R10 <> ( 0 ));

thus L1935: thesis by L1934 , L1811;
end;
end;
thus L1937: thesis by L1812;
end;
theorem
L1938: (for B170 , B171 , B172 being  finite set holds (((B171 is  empty implies B170 is  empty) & B172 c= B170) implies (for B173 being (Function of B170 , B171) holds ((B173 is  one-to-one & ( card B170 ) = ( card B171 )) implies ( ( ( card B170 ) -' ( card B172 ) ) ! ) = ( card { B174 where B174 is (Function of B170 , B171) : (B174 is  one-to-one & ( rng ( B174 | ( B170 \ B172 ) ) ) c= ( B173 .: ( B170 \ B172 ) ) & (for R1 being set holds (R1 in B172 implies ( B174 . R1 ) = ( B173 . R1 )))) } )))))
proof
let C190 , C191 , C192 being  finite set;
assume that
L1939: (C191 is  empty implies C190 is  empty)
and
L1940: C192 c= C190;
set D168 = ( C190 \ C192 );
let C193 being (Function of C190 , C191);
assume that
L1941: C193 is  one-to-one
and
L1942: ( card C190 ) = ( card C191 );
deffunc H4(set) = ( C193 . $1 );
defpred S23[ Function , set , set ] means ($1 is  one-to-one & ( rng ( $1 | D168 ) ) = ( C193 .: D168 ));
reconsider D169 = ( C193 .: D168 ) as  finite set;
set D170 = { B175 where B175 is (Function of D168 , ( C193 .: D168 )) : B175 is  one-to-one };
L1943: ( card D168 ) = ( ( card C190 ) - ( card C192 ) ) by L1940 , CARD_2:44;
L1944: (for B176 being (Function of C190 , C191) holds ((for R1 being set holds (R1 in ( C190 \ D168 ) implies H4(R1) = ( B176 . R1 ))) implies (S23[ B176 , C190 , C191 ] iff S23[ ( B176 | D168 ) , D168 , ( C193 .: D168 ) ])))
proof
let C194 being (Function of C190 , C191);
assume that
L1945: (for R1 being set holds (R1 in ( C190 \ D168 ) implies H4(R1) = ( C194 . R1 )));
thus L1946: (S23[ C194 , C190 , C191 ] implies S23[ ( C194 | D168 ) , D168 , ( C193 .: D168 ) ]) by FUNCT_1:52;
thus L1947: (S23[ ( C194 | D168 ) , D168 , ( C193 .: D168 ) ] implies S23[ C194 , C190 , C191 ])
proof
L1948: C193 is  onto by L1941 , L1942 , STIRL2_1:60;
L1949: ( rng C193 ) = C191 by L1948 , FUNCT_2:def 3;
L1950: (( rng ( C194 | D168 ) ) = ( C194 .: D168 ) & ( C193 .: ( ( C190 \ D168 ) \/ D168 ) ) = ( ( C193 .: ( C190 \ D168 ) ) \/ ( C193 .: D168 ) )) by RELAT_1:115 , RELAT_1:120;
L1951: (( dom ( C193 | ( C190 \ D168 ) ) ) = ( ( dom C193 ) /\ ( C190 \ D168 ) ) & ( dom C193 ) = C190) by L1939 , FUNCT_2:def 1 , RELAT_1:61;
L1952: (( dom ( C194 | ( C190 \ D168 ) ) ) = ( ( dom C194 ) /\ ( C190 \ D168 ) ) & ( dom C194 ) = C190) by L1939 , FUNCT_2:def 1 , RELAT_1:61;
L1953:
now
L1954: (( C190 \ D168 ) = ( C192 /\ C190 ) & ( C192 /\ C190 ) = C192) by L1940 , XBOOLE_1:28 , XBOOLE_1:48;
let R1 being set;
assume that
L1955: R1 in ( dom ( C193 | ( C190 \ D168 ) ) );
L1956: ( C194 . R1 ) = ( ( C194 | ( C190 \ D168 ) ) . R1 ) by L1952 , L1951 , L1955 , FUNCT_1:47;
thus L1957: ( C193 . R1 ) = ( ( C194 | ( C190 \ D168 ) ) . R1 ) by L1956 , L1945 , L1951 , L1955 , L1954;
end;
L1958: ( C194 | ( C190 \ D168 ) ) = ( C193 | ( C190 \ D168 ) ) by L1953 , L1952 , L1951 , FUNCT_1:46;
L1959: ( rng ( C194 | ( C190 \ D168 ) ) ) = ( C193 .: ( C190 \ D168 ) ) by L1958 , RELAT_1:115;
L1960: (( ( C190 \ D168 ) \/ D168 ) = C190 & ( rng ( C194 | ( C190 \ D168 ) ) ) = ( C194 .: ( C190 \ D168 ) )) by RELAT_1:115 , XBOOLE_1:45;
L1961: (C190 = ( dom C193 ) & C190 = ( dom C194 )) by L1939 , FUNCT_2:def 1;
L1962: ( C193 .: ( dom C193 ) ) = ( rng C193 ) by RELAT_1:113;
assume L1963: S23[ ( C194 | D168 ) , D168 , ( C193 .: D168 ) ];
L1964: ( rng ( C194 | D168 ) ) = ( C193 .: D168 ) by L1963;
L1965: ( C193 .: C190 ) = ( C194 .: C190 ) by L1964 , L1959 , L1960 , L1950 , RELAT_1:120;
L1966: ( rng C193 ) = ( rng C194 ) by L1965 , L1961 , L1962 , RELAT_1:113;
L1967: C194 is  onto by L1966 , L1949 , FUNCT_2:def 3;
thus L1968: thesis by L1967 , L1942 , L1963 , STIRL2_1:60;
end;

end;
set D171 = { B177 where B177 is (Function of C190 , C191) : (B177 is  one-to-one & ( rng ( B177 | D168 ) ) c= ( C193 .: D168 ) & (for R1 being set holds (R1 in C192 implies ( B177 . R1 ) = ( C193 . R1 )))) };
set D172 = { B178 where B178 is (Function of C190 , C191) : (S23[ B178 , C190 , C191 ] & ( rng ( B178 | D168 ) ) c= ( C193 .: D168 ) & (for R1 being set holds (R1 in ( C190 \ D168 ) implies ( B178 . R1 ) = H4(R1)))) };
L1948: (( C190 \ D168 ) = ( C192 /\ C190 ) & ( C192 /\ C190 ) = C192) by L1940 , XBOOLE_1:28 , XBOOLE_1:48;
L1949: D172 c= D171
proof
let R1 being set;
assume L1950: R1 in D172;
L1951: (ex B179 being (Function of C190 , C191) st (R1 = B179 & S23[ B179 , C190 , C191 ] & ( rng ( B179 | D168 ) ) c= ( C193 .: D168 ) & (for R1 being set holds (R1 in ( C190 \ D168 ) implies ( B179 . R1 ) = H4(R1))))) by L1950;
thus L1952: thesis by L1951 , L1948;
end;
L1953: ( dom C193 ) = C190 by L1939 , FUNCT_2:def 1;
L1954: D168 , ( C193 .: D168 ) are_equipotent  by L1953 , L1941 , CARD_1:33;
L1955: ( card D168 ) = ( card ( C193 .: D168 ) ) by L1954 , CARD_1:5;
L1956: (( card D170 ) = ( ( ( card D168 ) ! ) / ( ( ( card D169 ) -' ( card D168 ) ) ! ) ) & ( ( card D169 ) -' ( card D168 ) ) = ( 0 )) by L1955 , L161 , XREAL_1:232;
L1957: ( card D170 ) = ( ( ( card C190 ) -' ( card C192 ) ) ! ) by L1956 , L1943 , NEWTON:12 , XREAL_0:def 2;
set D173 = { B180 where B180 is (Function of D168 , ( C193 .: D168 )) : S23[ B180 , D168 , ( C193 .: D168 ) ] };
L1958: (for R1 being set holds (R1 in ( C190 \ D168 ) implies H4(R1) in C191))
proof
L1959: C190 = ( dom C193 ) by L1939 , FUNCT_2:def 1;
let R1 being set;
assume L1960: R1 in ( C190 \ D168 );
L1961: ( C193 . R1 ) in ( rng C193 ) by L1960 , L1959 , FUNCT_1:def 3;
thus L1962: thesis by L1961;
end;
L1963: D170 c= D173
proof
let R1 being set;
assume L1964: R1 in D170;
consider C195 being (Function of D168 , D169) such that L1965: R1 = C195 and L1966: C195 is  one-to-one by L1964;
L1967: ( C195 | D168 ) = C195;
L1968: C195 is  onto by L1955 , L1966 , STIRL2_1:60;
L1969: ( rng C195 ) = D169 by L1968 , FUNCT_2:def 3;
thus L1970: thesis by L1969 , L1965 , L1966 , L1967;
end;
L1971: D173 c= D170
proof
let R1 being set;
assume L1972: R1 in D173;
L1973: (ex B181 being (Function of D168 , D169) st (B181 = R1 & S23[ B181 , D168 , ( C193 .: D168 ) ])) by L1972;
thus L1974: thesis by L1973;
end;
L1975: D170 = D173 by L1971 , L1963 , XBOOLE_0:def 10;
L1976: D171 c= D172
proof
let R1 being set;
assume L1977: R1 in D171;
consider C196 being (Function of C190 , C191) such that L1978: R1 = C196 and L1979: C196 is  one-to-one and L1980: ( rng ( C196 | D168 ) ) c= ( C193 .: D168 ) and L1981: (for R1 being set holds (R1 in C192 implies ( C196 . R1 ) = ( C193 . R1 ))) by L1977;
L1982: ( dom C196 ) = C190 by L1939 , FUNCT_2:def 1;
L1983: D168 , ( C196 .: D168 ) are_equipotent  by L1982 , L1979 , CARD_1:33;
L1984: ( card D168 ) = ( card ( C196 .: D168 ) ) by L1983 , CARD_1:5;
L1985: ( card D169 ) = ( card ( rng ( C196 | D168 ) ) ) by L1984 , L1955 , RELAT_1:115;
L1986: ( rng ( C196 | D168 ) ) = D169 by L1985 , L1980 , PRE_POLY:8;
thus L1987: thesis by L1986 , L1948 , L1978 , L1979 , L1981;
end;
L1988: (D168 c= C190 & ( C193 .: D168 ) c= C191);
L1989: D168 c= ( dom C193 ) by L1988 , L1939 , FUNCT_2:def 1;
L1990: (( C193 .: D168 ) is  empty implies D168 is  empty) by L1989 , RELAT_1:119;
L1991: ( card D173 ) = ( card D172 ) from STIRL2_1:sch 3(L1958 , L1988 , L1990 , L1944);
thus L1992: thesis by L1991 , L1949 , L1976 , L1957 , L1975 , XBOOLE_0:def 10;
end;
L1993: (for R7 being  finite set holds (for R8 being  finite set holds (for B182 being (Function of R7 , R8) holds ((( dom B182 ) = R7 & B182 is  one-to-one) implies (ex B183 being (XFinSequence of ( INT )) st (( dom B183 ) = ( card R7 ) & ( ( ( card R7 ) ! ) - ( Sum B183 ) ) = ( card { B184 where B184 is (Function of R7 , ( rng B182 )) : (B184 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B184 . R1 ) <> ( B182 . R1 )))) } ) & (for R9 being Nat holds (R9 in ( dom B183 ) implies ( B183 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card R7 ) ! ) ) / ( ( R9 + 1 ) ! ) )))))))))
proof
let R7 being  finite set;
let R8 being  finite set;
let C197 being (Function of R7 , R8);
assume that
L1994: ( dom C197 ) = R7
and
L1995: C197 is  one-to-one;
deffunc H5(set) = { B185 where B185 is (Function of R7 , ( rng C197 )) : (B185 is  one-to-one & ( B185 . $1 ) = ( C197 . $1 )) };
L1996: (for R1 being set holds (R1 in R7 implies H5(R1) in ( bool ( Funcs (R7 , ( rng C197 )) ) )))
proof
let R1 being set;
assume that
L1997: R1 in R7;
L1998: H5(R1) c= ( Funcs (R7 , ( rng C197 )) )
proof
let R4 being set;
assume L1999: R4 in H5(R1);
L2000: (ex B186 being (Function of R7 , ( rng C197 )) st (R4 = B186 & B186 is  one-to-one & ( B186 . R1 ) = ( C197 . R1 ))) by L1999;
L2001: ( rng C197 ) <> ( {} ) by L1994 , L1997 , RELAT_1:42;
thus L2002: thesis by L2001 , L2000 , FUNCT_2:8;
end;
thus L2003: thesis by L1998;
end;
consider C198 being (Function of R7 , ( bool ( Funcs (R7 , ( rng C197 )) ) )) such that L2004: (for R1 being set holds (R1 in R7 implies ( C198 . R1 ) = H5(R1))) from FUNCT_2:sch 2(L1996);
defpred S24[ set , set ] means (for R9 being Nat holds (for R10 being Nat holds ((R9 = $1 & R10 = ( ( card R7 ) - ( R9 + 1 ) )) implies $2 = ( R10 ! ))));
L2005: (for R1 being set holds (R1 in ( card R7 ) implies (ex R4 being set st (R4 in ( NAT ) & S24[ R1 , R4 ]))))
proof
let R1 being set;
assume that
L2006: R1 in ( card R7 );
L2007: ( card R7 ) is (Subset of ( NAT )) by STIRL2_1:8;
reconsider D174 = R1 as (Element of ( NAT )) by L2007 , L2006;
L2008: D174 < ( card R7 ) by L2006 , NAT_1:44;
L2009: ( D174 + 1 ) <= ( card R7 ) by L2008 , NAT_1:13;
reconsider D175 = ( ( card R7 ) - ( D174 + 1 ) ) as (Element of ( NAT )) by L2009 , NAT_1:21;
L2010: S24[ D174 , ( D175 ! ) ];
thus L2011: thesis by L2010;
end;
consider C199 being (Function of ( card R7 ) , ( NAT )) such that L2012: (for R1 being set holds (R1 in ( card R7 ) implies S24[ R1 , ( C199 . R1 ) ])) from FUNCT_2:sch 1(L2005);
L2013: (for R4 being set holds (R4 in ( dom C198 ) implies ( C198 . R4 ) is  finite))
proof
let R4 being set;
assume L2014: R4 in ( dom C198 );
L2015: ( C198 . R4 ) in ( rng C198 ) by L2014 , FUNCT_1:def 3;
thus L2016: thesis by L2015;
end;
reconsider D176 = C198 as  finite-yielding Function by L2013 , FINSET_1:def 4;
reconsider D177 = ( rng C197 ) as  finite set;
L2017: ( dom C199 ) = ( card R7 ) by FUNCT_2:def 1;
reconsider D178 = C199 as XFinSequence by L2017 , AFINSQ_1:5;
reconsider D179 = D178 as (XFinSequence of ( NAT ));
L2018: (for R9 being Nat holds (R9 in ( dom D179 ) implies (ex R1 being set st (ex R4 being set st (R1 <> R4 & (for R12 being Function holds (R12 in ( Choose (R7 , ( R9 + 1 ) , R1 , R4) ) implies ( card ( Intersection (D176 , R12 , R1) ) ) = ( D179 . R9 ))))))))
proof
let R9 being Nat;
assume that
L2019: R9 in ( dom D179 );
L2020: R9 < ( card R7 ) by L2017 , L2019 , NAT_1:44;
L2021: ( R9 + 1 ) <= ( card R7 ) by L2020 , NAT_1:13;
reconsider D180 = ( ( card R7 ) - ( R9 + 1 ) ) as (Element of ( NAT )) by L2021 , NAT_1:21;
L2022: ( ( card R7 ) -' ( R9 + 1 ) ) = D180 by L2021 , XREAL_1:233;
take ( 0 );
take 1;
thus L2023: ( 0 ) <> 1;
let C200 being Function;
assume L2024: C200 in ( Choose (R7 , ( R9 + 1 ) , ( 0 ) , 1) );
consider C201 being (Function of R7 , { ( 0 ) , 1 }) such that L2025: C201 = C200 and L2026: ( card ( C201 " { ( 0 ) } ) ) = ( R9 + 1 ) by L2024 , L255;
reconsider D181 = ( C201 " { ( 0 ) } ) as  finite set;
set D182 = ( R7 \ D181 );
set D183 = { B187 where B187 is (Function of R7 , D177) : (B187 is  one-to-one & ( rng ( B187 | D182 ) ) c= ( C197 .: D182 ) & (for R1 being set holds (R1 in D181 implies ( B187 . R1 ) = ( C197 . R1 )))) };
L2027: ( Intersection (D176 , C201 , ( 0 )) ) c= D183
proof
assume L2028: (not ( Intersection (D176 , C201 , ( 0 )) ) c= D183);
consider R5 being set such that L2029: R5 in ( Intersection (D176 , C201 , ( 0 )) ) and L2030: (not R5 in D183) by L2028 , TARSKI:def 3;
consider C202 being set such that L2031: C202 in ( C201 " { ( 0 ) } ) by L2026 , CARD_1:27 , XBOOLE_0:def 1;
L2032: ( C201 . C202 ) in { ( 0 ) } by L2031 , FUNCT_1:def 7;
L2033: ( C201 . C202 ) = ( 0 ) by L2032 , TARSKI:def 1;
L2034: C202 in ( dom C201 ) by L2031 , FUNCT_1:def 7;
L2035: ( 0 ) in ( rng C201 ) by L2034 , L2033 , FUNCT_1:def 3;
consider R1 being set such that L2036: R1 in ( dom C201 ) and L2037: ( C201 . R1 ) = ( 0 ) and L2038: R5 in ( D176 . R1 ) by L2035 , L2029 , L641;
L2039: R5 in H5(R1) by L2004 , L2036 , L2038;
consider C203 being (Function of R7 , ( rng C197 )) such that L2040: R5 = C203 and L2041: C203 is  one-to-one and L2042: ( C203 . R1 ) = ( C197 . R1 ) by L2039;
L2043: (for R2 being set holds (R2 in D181 implies ( C203 . R2 ) = ( C197 . R2 )))
proof
let R2 being set;
assume that
L2044: R2 in D181;
L2045: ( C201 . R2 ) in { ( 0 ) } by L2044 , FUNCT_1:def 7;
L2046: ( C201 . R2 ) = ( 0 ) by L2045 , TARSKI:def 1;
L2047: (( C198 . R2 ) = H5(R2) & R2 in ( dom C201 )) by L2004 , L2044 , FUNCT_1:def 7;
L2048: C203 in H5(R2) by L2047 , L2029 , L2040 , L2046 , L599;
L2049: (ex B188 being (Function of R7 , ( rng C197 )) st (C203 = B188 & B188 is  one-to-one & ( B188 . R2 ) = ( C197 . R2 ))) by L2048;
thus L2050: thesis by L2049;
end;
L2051: ( rng ( C203 | D182 ) ) c= ( C197 .: D182 )
proof
assume L2052: (not ( rng ( C203 | D182 ) ) c= ( C197 .: D182 ));
consider R4 being set such that L2053: R4 in ( rng ( C203 | D182 ) ) and L2054: (not R4 in ( C197 .: D182 )) by L2052 , TARSKI:def 3;
consider R2 being set such that L2055: R2 in ( dom ( C203 | D182 ) ) and L2056: ( ( C203 | D182 ) . R2 ) = R4 by L2053 , FUNCT_1:def 3;
L2057: ( C203 . R2 ) = R4 by L2055 , L2056 , FUNCT_1:47;
L2058: R2 in ( ( dom C203 ) /\ D182 ) by L2055 , RELAT_1:61;
L2059: R2 in D182 by L2058 , XBOOLE_0:def 4;
L2060: ( C197 .: ( R7 \ D182 ) ) = ( ( C197 .: R7 ) \ ( C197 .: D182 ) ) by L1995 , FUNCT_1:64;
L2061: D177 = ( C197 .: R7 ) by L1994 , RELAT_1:113;
L2062: R4 in ( ( C197 .: R7 ) \ ( C197 .: D182 ) ) by L2061 , L2053 , L2054 , XBOOLE_0:def 5;
consider R3 being set such that L2063: R3 in ( dom C197 ) and L2064: R3 in ( R7 \ D182 ) and L2065: R4 = ( C197 . R3 ) by L2062 , L2060 , FUNCT_1:def 6;
L2066: R4 in ( rng C197 ) by L2063 , L2065 , FUNCT_1:def 3;
L2067: R7 = ( dom C203 ) by L2066 , FUNCT_2:def 1;
L2068: ( R7 \ D182 ) = ( R7 /\ ( C201 " { ( 0 ) } ) ) by XBOOLE_1:48;
L2069: R3 in ( C201 " { ( 0 ) } ) by L2068 , L2064 , XBOOLE_0:def 4;
L2070: ( C203 . R3 ) = R4 by L2069 , L2043 , L2065;
L2071: (not R3 in D182) by L2064 , XBOOLE_0:def 5;
thus L2072: contradiction by L2071 , L2041 , L2063 , L2070 , L2057 , L2067 , L2059 , FUNCT_1:def 4;
end;
thus L2073: thesis by L2051 , L2030 , L2040 , L2041 , L2043;
end;
L2074: R7 , D177 are_equipotent  by L1994 , L1995 , WELLORD2:def 4;
L2075: ( card D177 ) = ( card R7 ) by L2074 , CARD_1:5;
L2076: ( card D177 ) = ( card R7 ) by L2074 , CARD_1:5;
L2077: (D177 = ( {} ) implies R7 is  empty) by L2076;
L2078: C197 is (Function of R7 , D177) by L1994 , FUNCT_2:1;
L2079: D183 c= ( Intersection (D176 , C201 , ( 0 )) )
proof
assume L2080: (not D183 c= ( Intersection (D176 , C201 , ( 0 )) ));
consider R5 being set such that L2081: R5 in D183 and L2082: (not R5 in ( Intersection (D176 , C201 , ( 0 )) )) by L2080 , TARSKI:def 3;
consider C204 being (Function of R7 , ( rng C197 )) such that L2083: C204 = R5 and L2084: C204 is  one-to-one and L2085: ( rng ( C204 | D182 ) ) c= ( C197 .: D182 ) and L2086: (for R1 being set holds (R1 in D181 implies ( C204 . R1 ) = ( C197 . R1 ))) by L2081;
consider R1 being set such that L2087: R1 in ( C201 " { ( 0 ) } ) by L2026 , CARD_1:27 , XBOOLE_0:def 1;
L2088: R1 in R7 by L2087;
L2089: R1 in ( dom C198 ) by L2088 , FUNCT_2:def 1;
L2090: ( C198 . R1 ) in ( rng C198 ) by L2089 , FUNCT_1:def 3;
L2091: ( C198 . R1 ) = H5(R1) by L2004 , L2087;
L2092: ( C204 . R1 ) = ( C197 . R1 ) by L2086 , L2087;
L2093: C204 in ( C198 . R1 ) by L2092 , L2084 , L2091;
L2094: C204 in ( union ( rng C198 ) ) by L2093 , L2090 , TARSKI:def 4;
consider R4 being set such that L2095: R4 in ( dom C201 ) and L2096: ( C201 . R4 ) = ( 0 ) and L2097: (not C204 in ( D176 . R4 )) by L2094 , L2082 , L2083 , L599;
L2098: ( C201 . R4 ) in { ( 0 ) } by L2096 , TARSKI:def 1;
L2099: R4 in ( C201 " { ( 0 ) } ) by L2098 , L2095 , FUNCT_1:def 7;
L2100: ( C204 . R4 ) = ( C197 . R4 ) by L2099 , L2086;
L2101: C204 in H5(R4) by L2100 , L2084;
thus L2102: contradiction by L2101 , L2004 , L2095 , L2097;
end;
L2103: D183 = ( Intersection (D176 , C201 , ( 0 )) ) by L2079 , L2027 , XBOOLE_0:def 10;
L2104: ( card ( Intersection (D176 , C201 , ( 0 )) ) ) = ( ( ( card R7 ) -' ( R9 + 1 ) ) ! ) by L2103 , L1995 , L2026 , L2077 , L2078 , L2075 , L1938;
thus L2105: thesis by L2104 , L2012 , L2017 , L2019 , L2025 , L2022;
end;
L2106: R7 , D177 are_equipotent  by L1994 , L1995 , WELLORD2:def 4;
L2107: ( card D177 ) = ( card R7 ) by L2106 , CARD_1:5;
L2108: (( ( ( card D177 ) -' ( card R7 ) ) ! ) = 1 & ( card { B189 where B189 is (Function of R7 , D177) : B189 is  one-to-one } ) = ( ( ( card D177 ) ! ) / ( ( ( card D177 ) -' ( card R7 ) ) ! ) )) by L2107 , L161 , NEWTON:12 , XREAL_1:232;
reconsider D184 = { B190 where B190 is (Function of R7 , ( rng C197 )) : B190 is  one-to-one } as  finite set by L2108;
set D185 = { B191 where B191 is (Function of R7 , ( rng C197 )) : (B191 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B191 . R1 ) <> ( C197 . R1 )))) };
L2109: (( dom D179 ) = ( card R7 ) & ( dom D176 ) = R7) by FUNCT_2:def 1;
consider C205 being (XFinSequence of ( INT )) such that L2110: ( dom C205 ) = ( card R7 ) and L2111: ( card ( union ( rng D176 ) ) ) = ( Sum C205 ) and L2112: (for R9 being Nat holds (R9 in ( dom C205 ) implies ( C205 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( D179 . R9 ) ) * ( ( card R7 ) choose ( R9 + 1 ) ) ))) by L2109 , L2018 , L1634;
L2113: ( union ( rng C198 ) ) c= D184
proof
let R1 being set;
assume L2114: R1 in ( union ( rng C198 ) );
consider C206 being set such that L2115: R1 in C206 and L2116: C206 in ( rng C198 ) by L2114 , TARSKI:def 4;
consider R2 being set such that L2117: (R2 in ( dom C198 ) & ( D176 . R2 ) = C206) by L2116 , FUNCT_1:def 3;
L2118: R1 in H5(R2) by L2004 , L2115 , L2117;
L2119: (ex B192 being (Function of R7 , ( rng C197 )) st (B192 = R1 & B192 is  one-to-one & ( B192 . R2 ) = ( C197 . R2 ))) by L2118;
thus L2120: thesis by L2119;
end;
reconsider D186 = ( union ( rng D176 ) ) as  finite set;
L2121: ( card ( D184 \ D186 ) ) = ( ( card D184 ) - ( card D186 ) ) by L2113 , CARD_2:44;
take C205;
thus L2122: ( dom C205 ) = ( card R7 ) by L2110;
L2123: ( D184 \ ( union ( rng D176 ) ) ) c= D185
proof
let R1 being set;
assume that
L2124: R1 in ( D184 \ ( union ( rng D176 ) ) );
L2125: R1 in D184 by L2124;
consider C207 being (Function of R7 , ( rng C197 )) such that L2126: C207 = R1 and L2127: C207 is  one-to-one by L2125;
assume L2128: (not R1 in D185);
consider R1 being set such that L2129: R1 in R7 and L2130: ( C207 . R1 ) = ( C197 . R1 ) by L2128 , L2126 , L2127;
L2131: R1 in ( dom D176 ) by L2129 , FUNCT_2:def 1;
L2132: ( D176 . R1 ) in ( rng D176 ) by L2131 , FUNCT_1:def 3;
L2133: H5(R1) in ( rng D176 ) by L2132 , L2004 , L2129;
L2134: C207 in H5(R1) by L2127 , L2130;
L2135: C207 in ( union ( rng D176 ) ) by L2134 , L2133 , TARSKI:def 4;
thus L2136: thesis by L2135 , L2124 , L2126 , XBOOLE_0:def 5;
end;
L2137: D185 c= ( D184 \ ( union ( rng D176 ) ) )
proof
let R1 being set;
assume L2138: R1 in D185;
consider C208 being (Function of R7 , ( rng C197 )) such that L2139: R1 = C208 and L2140: C208 is  one-to-one and L2141: (for R1 being set holds (R1 in R7 implies ( C208 . R1 ) <> ( C197 . R1 ))) by L2138;
assume L2142: (not R1 in ( D184 \ ( union ( rng D176 ) ) ));
L2143: C208 in D184 by L2140;
L2144: C208 in ( union ( rng D176 ) ) by L2143 , L2139 , L2142 , XBOOLE_0:def 5;
consider C209 being set such that L2145: C208 in C209 and L2146: C209 in ( rng D176 ) by L2144 , TARSKI:def 4;
consider R4 being set such that L2147: R4 in ( dom D176 ) and L2148: ( D176 . R4 ) = C209 by L2146 , FUNCT_1:def 3;
L2149: R4 in R7 by L2147 , FUNCT_2:def 1;
L2150: C208 in H5(R4) by L2149 , L2004 , L2145 , L2148;
L2151: (ex B193 being (Function of R7 , ( rng C197 )) st (C208 = B193 & B193 is  one-to-one & ( B193 . R4 ) = ( C197 . R4 ))) by L2150;
L2152: R4 in R7 by L2147 , FUNCT_2:def 1;
thus L2153: contradiction by L2152 , L2141 , L2151;
end;
L2154: ( card D184 ) = ( ( card R7 ) ! ) by L2106 , L2108 , CARD_1:5;
thus L2155: ( card D185 ) = ( ( ( card R7 ) ! ) - ( Sum C205 ) ) by L2154 , L2111 , L2123 , L2137 , L2121 , XBOOLE_0:def 10;
let R9 being Nat;
assume that
L2156: R9 in ( dom C205 );
L2157: R9 < ( card R7 ) by L2110 , L2156 , NAT_1:44;
L2158: ( R9 + 1 ) <= ( card R7 ) by L2157 , NAT_1:13;
reconsider D187 = ( ( card R7 ) - ( R9 + 1 ) ) as (Element of ( NAT )) by L2158 , NAT_1:21;
L2159: ( ( card R7 ) choose ( R9 + 1 ) ) = ( ( ( card R7 ) ! ) / ( ( D187 ! ) * ( ( R9 + 1 ) ! ) ) ) by L2158 , NEWTON:def 3;
L2160: ( D187 ! ) > ( 0 ) by NEWTON:17;
L2161: ( D179 . R9 ) = ( D187 ! ) by L2012 , L2110 , L2156;
L2162: ( ( D179 . R9 ) * ( ( card R7 ) choose ( R9 + 1 ) ) ) = ( ( ( D187 ! ) * ( ( card R7 ) ! ) ) / ( ( D187 ! ) * ( ( R9 + 1 ) ! ) ) ) by L2161 , L2159 , XCMPLX_1:74
.= ( ( ( card R7 ) ! ) * ( ( D187 ! ) / ( ( D187 ! ) * ( ( R9 + 1 ) ! ) ) ) ) by XCMPLX_1:74
.= ( ( ( card R7 ) ! ) * ( ( ( D187 ! ) / ( D187 ! ) ) / ( ( R9 + 1 ) ! ) ) ) by XCMPLX_1:78
.= ( ( ( card R7 ) ! ) * ( 1 / ( ( R9 + 1 ) ! ) ) ) by L2160 , XCMPLX_1:60
.= ( ( ( ( card R7 ) ! ) * 1 ) / ( ( R9 + 1 ) ! ) ) by XCMPLX_1:74;
L2163: ( C205 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( D179 . R9 ) ) * ( ( card R7 ) choose ( R9 + 1 ) ) ) by L2112 , L2156
.= ( ( ( - 1 ) |^ R9 ) * ( ( ( card R7 ) ! ) / ( ( R9 + 1 ) ! ) ) ) by L2162;
thus L2164: thesis by L2163 , XCMPLX_1:74;
end;
theorem
L2165: (for R7 being  finite set holds (for B194 being Function holds ((( dom B194 ) = R7 & B194 is  one-to-one) implies (ex B195 being (XFinSequence of ( INT )) st (( Sum B195 ) = ( card { B196 where B196 is (Function of R7 , ( rng B194 )) : (B196 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B196 . R1 ) <> ( B194 . R1 )))) } ) & ( dom B195 ) = ( ( card R7 ) + 1 ) & (for R9 being Nat holds (R9 in ( dom B195 ) implies ( B195 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card R7 ) ! ) ) / ( R9 ! ) ))))))))
proof
let R7 being  finite set;
let C210 being Function;
assume that
L2166: ( dom C210 ) = R7
and
L2167: C210 is  one-to-one;
L2168: R7 , ( rng C210 ) are_equipotent  by L2166 , L2167 , WELLORD2:def 4;
L2169: ( card R7 ) = ( card ( rng C210 ) ) by L2168 , CARD_1:5;
reconsider D188 = ( rng C210 ) as  finite set by L2169;
reconsider D189 = C210 as (Function of R7 , D188) by L2166 , FUNCT_2:1;
set D190 = { B197 where B197 is (Function of R7 , ( rng C210 )) : (B197 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B197 . R1 ) <> ( C210 . R1 )))) };
L2170: ( rng C210 ) = ( rng D189 );
consider C211 being (XFinSequence of ( INT )) such that L2171: ( dom C211 ) = ( card R7 ) and L2172: ( ( ( card R7 ) ! ) - ( Sum C211 ) ) = ( card D190 ) and L2173: (for R9 being Nat holds (R9 in ( dom C211 ) implies ( C211 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card R7 ) ! ) ) / ( ( R9 + 1 ) ! ) ))) by L2170 , L2166 , L2167 , L1993;
reconsider D191 = ( ( card R7 ) ! ) as (Element of ( INT )) by INT_1:def 2;
L2174: ( len <% D191 %> ) = 1 by AFINSQ_1:33;
set D192 = ( ( - 1 ) (#) C211 );
L2175: ( dom D192 ) = ( card R7 ) by L2171 , VALUED_1:def 5;
reconsider D193 = D192 as (XFinSequence of ( INT ));
set D194 = ( <% D191 %> ^ D193 );
take D194;
L2176: ( ( - 1 ) * ( Sum C211 ) ) = ( Sum D193 ) by AFINSQ_2:64;
L2177: ( D191 - ( Sum C211 ) ) = ( D191 + ( Sum D193 ) ) by L2176
.= ( ( addint ) . (D191 , ( Sum D193 )) ) by BINOP_2:def 20
.= ( ( addint ) . (( ( addint ) "**" <% D191 %> ) , ( Sum D193 )) ) by AFINSQ_2:37
.= ( ( addint ) . (( ( addint ) "**" <% D191 %> ) , ( ( addint ) "**" D193 )) ) by AFINSQ_2:50
.= ( ( addint ) "**" D194 ) by AFINSQ_2:42
.= ( Sum D194 ) by AFINSQ_2:50;
thus L2178: ( Sum D194 ) = ( card D190 ) by L2177 , L2172;
L2179: ( len D193 ) = ( card R7 ) by L2171 , VALUED_1:def 5;
thus L2180: ( dom D194 ) = ( ( card R7 ) + 1 ) by L2179 , L2174 , AFINSQ_1:def 3;
let R9 being Nat;
assume that
L2181: R9 in ( dom D194 );
per cases ;
suppose L2182: R9 = ( 0 );

L2183: ( ( - 1 ) |^ R9 ) = 1 by L2182 , NEWTON:4;
thus L2184: thesis by L2183 , L2182 , AFINSQ_1:35 , NEWTON:12;
end;
suppose L2185: R9 > ( 0 );

reconsider D195 = ( R9 - 1 ) as (Element of ( NAT )) by L2185 , NAT_1:20;
L2186: ( D195 + 1 ) = R9;
L2187: ( ( - 1 ) * ( ( - 1 ) |^ D195 ) ) = ( ( - 1 ) |^ R9 ) by L2186 , NEWTON:6;
L2188: R9 < ( ( card R7 ) + 1 ) by L2180 , L2181 , NAT_1:44;
L2189: ( D195 + 1 ) <= ( card R7 ) by L2188 , NAT_1:13;
L2190: D195 < ( len D193 ) by L2189 , L2175 , NAT_1:13;
L2191: D195 in ( dom D193 ) by L2190 , NAT_1:44;
L2192: ( len <% D191 %> ) = 1 by AFINSQ_1:33;
L2193: ( D194 . ( D195 + 1 ) ) = ( D193 . D195 ) by L2192 , L2191 , AFINSQ_1:def 3;
L2194: ( D194 . ( D195 + 1 ) ) = ( ( - 1 ) * ( C211 . D195 ) ) by L2193 , VALUED_1:6;
L2195: ( C211 . D195 ) = ( ( ( ( - 1 ) |^ D195 ) * ( ( card R7 ) ! ) ) / ( ( D195 + 1 ) ! ) ) by L2171 , L2173 , L2175 , L2191;
L2196: ( D194 . R9 ) = ( ( ( - 1 ) * ( ( ( - 1 ) |^ D195 ) * ( ( card R7 ) ! ) ) ) / ( R9 ! ) ) by L2195 , L2194 , XCMPLX_1:74;
thus L2197: thesis by L2196 , L2187;
end;
end;
theorem
L2199: (for R7 being  finite set holds (ex B198 being (XFinSequence of ( INT )) st (( Sum B198 ) = ( card { B199 where B199 is (Function of R7 , R7) : (B199 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B199 . R1 ) <> R1))) } ) & ( dom B198 ) = ( ( card R7 ) + 1 ) & (for R9 being Nat holds (R9 in ( dom B198 ) implies ( B198 . R9 ) = ( ( ( ( - 1 ) |^ R9 ) * ( ( card R7 ) ! ) ) / ( R9 ! ) ))))))
proof
let R7 being  finite set;
set D196 = { B200 where B200 is (Function of R7 , R7) : (B200 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B200 . R1 ) <> ( ( id R7 ) . R1 )))) };
set D197 = { B201 where B201 is (Function of R7 , R7) : (B201 is  one-to-one & (for R1 being set holds (R1 in R7 implies ( B201 . R1 ) <> R1))) };
L2200: D197 c= D196
proof
let R1 being set;
assume L2201: R1 in D197;
consider C212 being (Function of R7 , R7) such that L2202: (C212 = R1 & C212 is  one-to-one) and L2203: (for R4 being set holds (R4 in R7 implies ( C212 . R4 ) <> R4)) by L2201;
L2204:
now
let R4 being set;
assume that
L2205: R4 in R7;
L2206: ( ( id R7 ) . R4 ) = R4 by L2205 , FUNCT_1:17;
thus L2207: ( ( id R7 ) . R4 ) <> ( C212 . R4 ) by L2206 , L2203 , L2205;
end;
thus L2208: thesis by L2204 , L2202;
end;
L2209: (( dom ( id R7 ) ) = R7 & ( rng ( id R7 ) ) = R7);
L2210: D196 c= D197
proof
let R1 being set;
assume L2211: R1 in D196;
consider C213 being (Function of R7 , R7) such that L2212: (C213 = R1 & C213 is  one-to-one) and L2213: (for R4 being set holds (R4 in R7 implies ( C213 . R4 ) <> ( ( id R7 ) . R4 ))) by L2211;
L2214:
now
let R4 being set;
assume that
L2215: R4 in R7;
L2216: ( ( id R7 ) . R4 ) = R4 by L2215 , FUNCT_1:17;
thus L2217: ( C213 . R4 ) <> R4 by L2216 , L2213 , L2215;
end;
thus L2218: thesis by L2214 , L2212;
end;
L2219: D196 = D197 by L2210 , L2200 , XBOOLE_0:def 10;
thus L2220: thesis by L2219 , L2209 , L2165;
end;
