:: On Replace Function and Swap Function for Finite Sequences
::  by Hiroshi Yamazaki , Yoshinori Fujisawa and Yatsuka Nakamura
::
:: Received August 28, 2000
:: Copyright (c) 2000-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, XBOOLE_0, FINSEQ_1, SUBSET_1, NAT_1, XXREAL_0, ARYTM_3,
      RELAT_1, ARYTM_1, ORDINAL4, FUNCT_1, RFINSEQ, PARTFUN1, CARD_1, AFINSQ_1,
      FUNCT_4, TARSKI, FUNCT_7;
 notations TARSKI, XBOOLE_0, SUBSET_1, RELAT_1, NUMBERS, XCMPLX_0, ORDINAL1,
      NAT_1, NAT_D, FUNCT_1, PARTFUN1, FINSEQ_1, FINSEQ_4, RFINSEQ, FUNCT_7,
      XXREAL_0;
 constructors PARTFUN1, FUNCT_4, XXREAL_0, REAL_1, NAT_1, INT_1, FINSEQ_4,
      RFINSEQ, NAT_D, FUNCT_7, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, XXREAL_0, XREAL_0, INT_1, FINSEQ_1,
      FUNCT_7, ORDINAL1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions FINSEQ_1;
 theorems NAT_1, FINSEQ_1, FINSEQ_3, FINSEQ_5, FINSEQ_6, RFINSEQ, INT_1,
      GENEALG1, FUNCT_7, XREAL_1, XXREAL_0, ORDINAL1, NAT_2, PARTFUN1, NAT_D,
      XREAL_0;

begin
theorem
L1: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ((1 <= R8 & R9 <= ( len R2 ) & R8 < R9) implies R2 = ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* ( R2 . R8 ) *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ <* ( R2 . R9 ) *> ) ^ ( R2 /^ R9 ) ))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
assume that
L2: 1 <= R8
and
L3: R9 <= ( len R2 )
and
L4: R8 < R9;
L5: R8 <= ( len R2 ) by L3 , L4 , XXREAL_0:2;
L6: 1 <= R9 by L2 , L4 , XXREAL_0:2;
L7: R9 in ( dom R2 ) by L6 , L3 , FINSEQ_3:25;
set D1 = ( ( R9 -' R8 ) -' 1 );
L8: ( R8 -' R8 ) < ( R9 -' R8 ) by L4 , NAT_D:57;
L9: ( D1 + 1 ) = ( R9 -' R8 ) by L8 , NAT_1:14 , XREAL_1:235;
L10: ( R9 -' R8 ) <= ( ( len R2 ) -' R8 ) by L3 , NAT_D:42;
L11: ( D1 + 1 ) <= ( len ( R2 /^ R8 ) ) by L10 , L9 , RFINSEQ:29;
reconsider D2 = R8 , D3 = R9 as (Element of ( NAT )) by ORDINAL1:def 12;
L12: D2 < ( len ( R2 | D3 ) ) by L3 , L4 , FINSEQ_1:59;
L13: 1 <= ( D1 + 1 ) by NAT_1:14;
L14: ( D1 + 1 ) in ( dom ( R2 /^ D2 ) ) by L13 , L11 , FINSEQ_3:25;
L15: ( ( D1 + 1 ) + D2 ) = D3 by L4 , L9 , XREAL_1:235;
L16: ( ( R2 /^ D2 ) /. ( D1 + 1 ) ) = ( R2 /. D3 ) by L15 , L14 , FINSEQ_5:27;
L17: ( R2 /^ D2 ) = ( ( ( R2 | D3 ) ^ ( R2 /^ D3 ) ) /^ D2 ) by RFINSEQ:8
.= ( ( ( R2 | D3 ) /^ D2 ) ^ ( R2 /^ D3 ) ) by L12 , GENEALG1:1
.= ( ( ( R2 /^ D2 ) | ( D1 + 1 ) ) ^ ( R2 /^ D3 ) ) by L9 , FINSEQ_5:80
.= ( ( ( ( R2 /^ D2 ) | D1 ) ^ <* ( ( R2 /^ D2 ) /. ( D1 + 1 ) ) *> ) ^ ( R2 /^ D3 ) ) by L11 , FINSEQ_5:82
.= ( ( ( ( R2 /^ D2 ) | D1 ) ^ <* ( R2 . D3 ) *> ) ^ ( R2 /^ D3 ) ) by L7 , L16 , PARTFUN1:def 6;
L18: R2 = ( ( ( R2 | ( D2 -' 1 ) ) ^ <* ( R2 . D2 ) *> ) ^ ( R2 /^ D2 ) ) by L2 , L5 , FINSEQ_5:84
.= ( ( ( R2 | ( D2 -' 1 ) ) ^ <* ( R2 . D2 ) *> ) ^ ( ( ( R2 /^ D2 ) | D1 ) ^ ( <* ( R2 . D3 ) *> ^ ( R2 /^ D3 ) ) ) ) by L17 , FINSEQ_1:32
.= ( ( ( ( R2 | ( D2 -' 1 ) ) ^ <* ( R2 . D2 ) *> ) ^ ( ( R2 /^ D2 ) | D1 ) ) ^ ( <* ( R2 . D3 ) *> ^ ( R2 /^ D3 ) ) ) by FINSEQ_1:32
.= ( ( ( ( ( R2 | ( D2 -' 1 ) ) ^ <* ( R2 . D2 ) *> ) ^ ( ( R2 /^ D2 ) | D1 ) ) ^ <* ( R2 . D3 ) *> ) ^ ( R2 /^ D3 ) ) by FINSEQ_1:32;
thus L19: thesis by L18;
end;
theorem
L20: (for R8 being Nat holds (for B1 , B2 , B3 being FinSequence holds ((( len B2 ) = ( len B3 ) & ( len B2 ) < R8 & R8 <= ( len ( B2 ^ B1 ) )) implies ( ( B2 ^ B1 ) . R8 ) = ( ( B3 ^ B1 ) . R8 ))))
proof
let R8 being Nat;
let C1 , C2 , C3 being FinSequence;
assume that
L21: ( len C2 ) = ( len C3 )
and
L22: ( len C2 ) < R8
and
L23: R8 <= ( len ( C2 ^ C1 ) );
L24: R8 <= ( ( len C2 ) + ( len C1 ) ) by L23 , FINSEQ_1:22;
L25: ( R8 - ( len C2 ) ) <= ( ( ( len C2 ) + ( len C1 ) ) - ( len C2 ) ) by L24 , XREAL_1:9;
set D4 = ( R8 - ( len C2 ) );
L26: ( ( len C2 ) - ( len C2 ) ) < ( R8 - ( len C2 ) ) by L22 , XREAL_1:9;
reconsider D5 = D4 as (Element of ( NAT )) by L26 , INT_1:3;
L27: ( ( 0 ) + 1 ) <= ( R8 - ( len C2 ) ) by L26 , INT_1:7;
L28: D5 in ( dom C1 ) by L27 , L25 , FINSEQ_3:25;
L29: ( ( C2 ^ C1 ) . R8 ) = ( ( C2 ^ C1 ) . ( D5 + ( len C2 ) ) )
.= ( C1 . D5 ) by L28 , FINSEQ_1:def 7
.= ( ( C3 ^ C1 ) . ( ( len C3 ) + D5 ) ) by L28 , FINSEQ_1:def 7;
thus L30: thesis by L29 , L21;
end;
theorem
L31: (for R8 being Nat holds (for B4 , B5 being FinSequence holds ((1 <= R8 & R8 <= ( len B4 )) implies ( B4 . R8 ) = ( ( B5 ^ B4 ) . ( ( len B5 ) + R8 ) ))))
proof
let R8 being Nat;
let C4 , C5 being FinSequence;
assume L32: (1 <= R8 & R8 <= ( len C4 ));
L33: R8 in ( dom C4 ) by L32 , FINSEQ_3:25;
thus L34: thesis by L33 , FINSEQ_1:def 7;
end;
theorem
L35: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R12 being Nat holds (R8 in ( dom ( R2 /^ R12 ) ) implies ( ( R2 /^ R12 ) . R8 ) = ( R2 . ( R12 + R8 ) ))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R12 being Nat;
assume L36: R8 in ( dom ( R2 /^ R12 ) );
reconsider D6 = R8 , D7 = R12 as (Element of ( NAT )) by ORDINAL1:def 12;
L37: ( D7 + D6 ) in ( dom R2 ) by L36 , FINSEQ_5:26;
L38: (( ( R2 /^ D7 ) /. D6 ) = ( R2 /. ( D7 + D6 ) ) & ( ( R2 /^ D7 ) /. D6 ) = ( ( R2 /^ D7 ) . D6 )) by L36 , FINSEQ_5:27 , PARTFUN1:def 6;
thus L39: thesis by L38 , L37 , PARTFUN1:def 6;
end;
L40: (for R8 being Nat holds (for R9 being Nat holds ( ( R9 -' R8 ) -' 1 ) = ( ( R9 -' 1 ) -' R8 )))
proof
let R8 being Nat;
let R9 being Nat;
L41: ( ( R9 -' R8 ) -' 1 ) = ( R9 -' ( R8 + 1 ) ) by NAT_2:30;
thus L42: thesis by L41 , NAT_2:30;
end;
begin
notation
let C6 being non  empty set;
let C7 being (FinSequence of C6);
let C8 being Nat;
let C9 being (Element of C6);
synonym Replace (C7 , C8 , C9) for C7 +* (C8 , C9);
end;
definition
let C10 being non  empty set;
let C11 being (FinSequence of C10);
let C12 being Nat;
let C13 being (Element of C10);
redefine func Replace (C11 , C12 , C13) -> (FinSequence of C10) equals 
:L44: ( ( ( C11 | ( C12 -' 1 ) ) ^ <* C13 *> ) ^ ( C11 /^ C12 ) ) if (1 <= C12 & C12 <= ( len C11 )) otherwise C11;
compatibility
proof
L45: ((not (1 <= C12 & C12 <= ( len C11 ))) implies ( C11 +* (C12 , C13) ) = C11)
proof
assume L46: (not (1 <= C12 & C12 <= ( len C11 )));
L47: (not C12 in ( dom C11 )) by L46 , FINSEQ_3:25;
thus L48: thesis by L47 , FUNCT_7:def 3;
end;
L49: ((1 <= C12 & C12 <= ( len C11 )) implies ( C11 +* (C12 , C13) ) = ( ( ( C11 | ( C12 -' 1 ) ) ^ <* C13 *> ) ^ ( C11 /^ C12 ) ))
proof
assume L50: (1 <= C12 & C12 <= ( len C11 ));
L51: C12 in ( dom C11 ) by L50 , FINSEQ_3:25;
thus L52: thesis by L51 , FUNCT_7:98;
end;
thus L53: thesis by L49 , L45;
end;
correctness
proof
reconsider D8 = C12 as (Element of ( NAT )) by ORDINAL1:def 12;
L54: ( C11 +* (D8 , C13) ) is (FinSequence of C10);
thus L55: thesis by L54;
end;
end;
theorem
L57: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds ( len ( Replace (R2 , R8 , R3) ) ) = ( len R2 ))))) by FUNCT_7:97;
theorem
L58: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds ( rng ( Replace (R2 , R8 , R3) ) ) c= ( ( rng R2 ) \/ { R3 } ))))) by FUNCT_7:100;
theorem
L59: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds ((1 <= R8 & R8 <= ( len R2 )) implies R3 in ( rng ( Replace (R2 , R8 , R3) ) ))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
assume L60: (1 <= R8 & R8 <= ( len R2 ));
L61: R8 in ( dom R2 ) by L60 , FINSEQ_3:25;
thus L62: thesis by L61 , FUNCT_7:102;
end;
L63: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds ((1 <= R8 & R8 <= ( len R2 )) implies ( ( Replace (R2 , R8 , R3) ) . R8 ) = R3)))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
assume L64: (1 <= R8 & R8 <= ( len R2 ));
L65: R8 in ( dom R2 ) by L64 , FINSEQ_3:25;
thus L66: thesis by L65 , FUNCT_7:31;
end;
theorem
L67: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds ((1 <= R8 & R8 <= ( len R2 )) implies ( ( Replace (R2 , R8 , R3) ) /. R8 ) = R3)))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
assume L68: (1 <= R8 & R8 <= ( len R2 ));
L69: R8 in ( dom R2 ) by L68 , FINSEQ_3:25;
thus L70: thesis by L69 , FUNCT_7:36;
end;
theorem
L71: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds ((1 <= R8 & R8 <= ( len R2 )) implies (for R10 being Nat holds ((( 0 ) < R10 & R10 <= ( ( len R2 ) - R8 )) implies ( ( Replace (R2 , R8 , R3) ) . ( R8 + R10 ) ) = ( ( R2 /^ R8 ) . R10 ))))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
assume that
L72: 1 <= R8
and
L73: R8 <= ( len R2 );
L74: ( R8 - 1 ) < R8 by XREAL_1:146;
L75: ( R8 -' 1 ) < R8 by L74 , L72 , XREAL_1:233;
L76: ( len ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ) = ( ( len ( R2 | ( R8 -' 1 ) ) ) + ( len <* R3 *> ) ) by FINSEQ_1:22
.= ( ( R8 -' 1 ) + ( len <* R3 *> ) ) by L73 , L75 , FINSEQ_1:59 , XXREAL_0:2
.= ( ( R8 -' 1 ) + 1 ) by FINSEQ_1:39
.= R8 by L72 , XREAL_1:235;
let R10 being Nat;
assume that
L77: ( 0 ) < R10
and
L78: R10 <= ( ( len R2 ) - R8 );
L79: ( ( 0 ) + 1 ) <= R10 by L77 , INT_1:7;
L80: ( len R2 ) = ( len ( Replace (R2 , R8 , R3) ) ) by FUNCT_7:97
.= ( len ( ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( R2 /^ R8 ) ) ) by L72 , L73 , L44
.= ( R8 + ( len ( R2 /^ R8 ) ) ) by L76 , FINSEQ_1:22;
L81: R10 in ( dom ( R2 /^ R8 ) ) by L80 , L78 , L79 , FINSEQ_3:25;
L82: ( ( Replace (R2 , R8 , R3) ) . ( R8 + R10 ) ) = ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( R2 /^ R8 ) ) . ( ( len ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ) + R10 ) ) by L72 , L73 , L76 , L44;
thus L83: thesis by L82 , L81 , FINSEQ_1:def 7;
end;
theorem
L84: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds (for R10 being Nat holds ((1 <= R10 & R10 <= ( len R2 ) & R10 <> R8) implies ( ( Replace (R2 , R8 , R3) ) /. R10 ) = ( R2 /. R10 )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
let R10 being Nat;
assume L85: (1 <= R10 & R10 <= ( len R2 ) & R10 <> R8);
reconsider D9 = R8 , D10 = R10 as (Element of ( NAT )) by ORDINAL1:def 12;
L86: (D10 <> D9 & D10 in ( dom R2 )) by L85 , FINSEQ_3:25;
thus L87: thesis by L86 , FUNCT_7:37;
end;
theorem
L88: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R7 being (Element of R1) holds (for R8 being Nat holds (for R9 being Nat holds ((1 <= R8 & R8 < R9 & R9 <= ( len R2 )) implies ( Replace (( Replace (R2 , R9 , R7) ) , R8 , R3) ) = ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ <* R7 *> ) ^ ( R2 /^ R9 ) ))))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R7 being (Element of R1);
let R8 being Nat;
let R9 being Nat;
assume that
L89: 1 <= R8
and
L90: R8 < R9
and
L91: R9 <= ( len R2 );
set D11 = ( R2 | ( R9 -' 1 ) );
L92: ( R9 -' 1 ) <= R9 by NAT_D:35;
L93: ( 1 + R8 ) <= R9 by L90 , INT_1:7;
L94: R8 <= ( R9 -' 1 ) by L93 , NAT_D:55;
L95: R8 <= ( len D11 ) by L94 , L91 , L92 , FINSEQ_1:59 , XXREAL_0:2;
set D12 = ( R2 /^ R9 );
set D13 = ( Replace (R2 , R9 , R7) );
L96: 1 <= R9 by L89 , L90 , XXREAL_0:2;
set D14 = <* R7 *>;
set D15 = ( D11 ^ D14 );
L97: ( len D15 ) = ( ( len D11 ) + ( len D14 ) ) by FINSEQ_1:22
.= ( ( len D11 ) + 1 ) by FINSEQ_1:39
.= ( ( R9 -' 1 ) + 1 ) by L91 , L92 , FINSEQ_1:59 , XXREAL_0:2
.= R9 by L89 , L90 , XREAL_1:235 , XXREAL_0:2;
L98: ( R8 -' 1 ) < ( R9 -' 1 ) by L89 , L90 , NAT_D:56;
L99: ( R8 -' 1 ) <= ( len D11 ) by L98 , L91 , L92 , FINSEQ_1:59 , XXREAL_0:2;
L100: R8 <= ( len R2 ) by L90 , L91 , XXREAL_0:2;
L101: R8 <= ( len D13 ) by L100 , FUNCT_7:97;
L102: ( Replace (D13 , R8 , R3) ) = ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( D13 /^ R8 ) ) by L101 , L89 , L44
.= ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( D15 ^ D12 ) /^ R8 ) ) by L91 , L96 , L44
.= ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( D15 /^ R8 ) ^ D12 ) ) by L90 , L97 , GENEALG1:1
.= ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( ( D11 /^ R8 ) ^ D14 ) ^ D12 ) ) by L95 , GENEALG1:1
.= ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ^ D14 ) ^ D12 ) ) by FINSEQ_5:80
.= ( ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ^ D14 ) ) ^ D12 ) by FINSEQ_1:32
.= ( ( ( ( ( D13 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ) ^ D14 ) ^ D12 ) by FINSEQ_1:32
.= ( ( ( ( ( ( D15 ^ D12 ) | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ) ^ D14 ) ^ D12 ) by L91 , L96 , L44
.= ( ( ( ( ( D15 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ) ^ D14 ) ^ D12 ) by L90 , L97 , FINSEQ_5:22 , NAT_D:44
.= ( ( ( ( ( D11 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ) ^ D14 ) ^ D12 ) by L99 , FINSEQ_5:22
.= ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) ) ^ D14 ) ^ D12 ) by L98 , FINSEQ_5:77
.= ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ <* R7 *> ) ^ D12 ) by L40;
thus L103: thesis by L102;
end;
theorem
L104: (for R1 being non  empty set holds (for R3 being (Element of R1) holds (for R7 being (Element of R1) holds ( Replace (<* R3 *> , 1 , R7) ) = <* R7 *>)))
proof
let R1 being non  empty set;
let R3 being (Element of R1);
let R7 being (Element of R1);
L105: ( 1 - 1 ) = ( 0 );
set D16 = ( <*> R1 );
reconsider D17 = ( <* R3 *> ^ D16 ) as (FinSequence of R1);
L106: ( ( <* R3 *> ^ D16 ) /^ 1 ) = D16 by FINSEQ_6:45;
L107: 1 <= ( len <* R3 *> ) by FINSEQ_1:39;
thus L108: ( Replace (<* R3 *> , 1 , R7) ) = ( ( ( <* R3 *> | ( 1 -' 1 ) ) ^ <* R7 *> ) ^ ( <* R3 *> /^ 1 ) ) by L107 , L44
.= ( ( ( <* R3 *> | ( 0 ) ) ^ <* R7 *> ) ^ ( <* R3 *> /^ 1 ) ) by L105 , XREAL_0:def 2
.= ( <* R7 *> ^ ( <* R3 *> /^ 1 ) ) by FINSEQ_1:34
.= ( <* R7 *> ^ ( D17 /^ 1 ) ) by FINSEQ_1:34
.= <* R7 *> by L106 , FINSEQ_1:34;
end;
theorem
L109: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R7 being (Element of R1) holds ( Replace (<* R4 , R5 *> , 1 , R7) ) = <* R7 , R5 *>))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R7 being (Element of R1);
set D18 = <* R4 , R5 *>;
L110: ( len D18 ) = 2 by FINSEQ_1:44;
L111: 2 in ( dom D18 ) by L110 , FINSEQ_3:25;
L112: ( 1 + 1 ) = ( len D18 ) by FINSEQ_1:44;
L113: ( D18 /^ 1 ) = <* ( D18 /. 2 ) *> by L112 , FINSEQ_5:30
.= <* ( D18 . 2 ) *> by L111 , PARTFUN1:def 6;
L114: ( Replace (D18 , 1 , R7) ) = ( ( ( D18 | ( 1 -' 1 ) ) ^ <* R7 *> ) ^ ( D18 /^ 1 ) ) by L110 , L44
.= ( ( ( D18 | ( 0 ) ) ^ <* R7 *> ) ^ ( D18 /^ 1 ) ) by XREAL_1:232
.= ( ( ( {} ) ^ <* R7 *> ) ^ <* R5 *> ) by L113 , FINSEQ_1:44
.= ( <* R7 *> ^ <* R5 *> ) by FINSEQ_1:34;
thus L115: thesis by L114;
end;
theorem
L116: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R7 being (Element of R1) holds ( Replace (<* R4 , R5 *> , 2 , R7) ) = <* R4 , R7 *>))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R7 being (Element of R1);
set D19 = <* R4 , R5 *>;
L117: ( 2 -' 1 ) = ( ( 1 + 1 ) -' 1 )
.= 1 by NAT_D:34;
L118: ( len D19 ) = 2 by FINSEQ_1:44;
L119: 1 in ( dom D19 ) by L118 , FINSEQ_3:25;
L120: 2 <= ( len D19 ) by FINSEQ_1:44;
L121: ( Replace (D19 , 2 , R7) ) = ( ( ( D19 | ( 2 -' 1 ) ) ^ <* R7 *> ) ^ ( D19 /^ 2 ) ) by L120 , L44
.= ( ( ( D19 | 1 ) ^ <* R7 *> ) ^ ( D19 /^ ( len D19 ) ) ) by L117 , FINSEQ_1:44
.= ( ( ( D19 | 1 ) ^ <* R7 *> ) ^ ( {} ) ) by RFINSEQ:27
.= ( ( <* ( D19 /. 1 ) *> ^ <* R7 *> ) ^ ( {} ) ) by FINSEQ_5:20
.= ( <* ( D19 /. 1 ) *> ^ <* R7 *> ) by FINSEQ_1:34
.= ( <* ( D19 . 1 ) *> ^ <* R7 *> ) by L119 , PARTFUN1:def 6
.= ( <* R4 *> ^ <* R7 *> ) by FINSEQ_1:44;
thus L122: thesis by L121;
end;
theorem
L123: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R6 being (Element of R1) holds (for R7 being (Element of R1) holds ( Replace (<* R4 , R5 , R6 *> , 1 , R7) ) = <* R7 , R5 , R6 *>)))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R6 being (Element of R1);
let R7 being (Element of R1);
set D20 = <* R4 , R5 , R6 *>;
L124: ( len D20 ) = 3 by FINSEQ_1:45;
L125: ( Replace (D20 , 1 , R7) ) = ( ( ( D20 | ( 1 -' 1 ) ) ^ <* R7 *> ) ^ ( D20 /^ 1 ) ) by L124 , L44
.= ( ( ( D20 | ( 0 ) ) ^ <* R7 *> ) ^ ( D20 /^ 1 ) ) by XREAL_1:232
.= ( <* R7 *> ^ ( D20 /^ 1 ) ) by FINSEQ_1:34
.= ( <* R7 *> ^ <* R5 , R6 *> ) by FINSEQ_6:47
.= ( ( <* R7 *> ^ <* R5 *> ) ^ <* R6 *> ) by FINSEQ_1:32;
thus L126: thesis by L125;
end;
theorem
L127: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R6 being (Element of R1) holds (for R7 being (Element of R1) holds ( Replace (<* R4 , R5 , R6 *> , 2 , R7) ) = <* R4 , R7 , R6 *>)))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R6 being (Element of R1);
let R7 being (Element of R1);
set D21 = <* R4 , R5 , R6 *>;
L128: ( 2 -' 1 ) = ( ( 1 + 1 ) -' 1 )
.= 1 by NAT_D:34;
L129: ( len D21 ) = ( 2 + 1 ) by FINSEQ_1:45;
L130: ( len D21 ) = 3 by FINSEQ_1:45;
L131: 3 in ( dom D21 ) by L130 , FINSEQ_3:25;
L132: 1 in ( dom D21 ) by L130 , FINSEQ_3:25;
L133: ( Replace (D21 , 2 , R7) ) = ( ( ( D21 | ( 2 -' 1 ) ) ^ <* R7 *> ) ^ ( D21 /^ 2 ) ) by L130 , L44
.= ( ( ( D21 | 1 ) ^ <* R7 *> ) ^ <* ( D21 /. 3 ) *> ) by L128 , L129 , FINSEQ_5:30
.= ( ( ( D21 | 1 ) ^ <* R7 *> ) ^ <* ( D21 . 3 ) *> ) by L131 , PARTFUN1:def 6
.= ( ( ( D21 | 1 ) ^ <* R7 *> ) ^ <* R6 *> ) by FINSEQ_1:45
.= ( ( <* ( D21 /. 1 ) *> ^ <* R7 *> ) ^ <* R6 *> ) by FINSEQ_5:20
.= ( ( <* ( D21 . 1 ) *> ^ <* R7 *> ) ^ <* R6 *> ) by L132 , PARTFUN1:def 6
.= ( ( <* R4 *> ^ <* R7 *> ) ^ <* R6 *> ) by FINSEQ_1:45;
thus L134: thesis by L133;
end;
theorem
L135: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R6 being (Element of R1) holds (for R7 being (Element of R1) holds ( Replace (<* R4 , R5 , R6 *> , 3 , R7) ) = <* R4 , R5 , R7 *>)))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R6 being (Element of R1);
let R7 being (Element of R1);
set D22 = <* R4 , R5 , R6 *>;
L136: ( 3 -' 1 ) = ( ( 2 + 1 ) -' 1 )
.= 2 by NAT_D:34;
L137: ( len D22 ) = 3 by FINSEQ_1:45;
L138: 1 in ( dom D22 ) by L137 , FINSEQ_3:25;
L139: 2 in ( dom D22 ) by L137 , FINSEQ_3:25;
L140: 3 <= ( len D22 ) by FINSEQ_1:45;
L141: ( Replace (D22 , 3 , R7) ) = ( ( ( D22 | ( 3 -' 1 ) ) ^ <* R7 *> ) ^ ( D22 /^ 3 ) ) by L140 , L44
.= ( ( ( D22 | 2 ) ^ <* R7 *> ) ^ ( D22 /^ ( len D22 ) ) ) by L136 , FINSEQ_1:45
.= ( ( ( D22 | 2 ) ^ <* R7 *> ) ^ ( {} ) ) by RFINSEQ:27
.= ( ( D22 | 2 ) ^ <* R7 *> ) by FINSEQ_1:34
.= ( <* ( D22 /. 1 ) , ( D22 /. 2 ) *> ^ <* R7 *> ) by L137 , FINSEQ_5:81
.= ( ( <* ( D22 . 1 ) *> ^ <* ( D22 /. 2 ) *> ) ^ <* R7 *> ) by L138 , PARTFUN1:def 6
.= ( ( <* ( D22 . 1 ) *> ^ <* ( D22 . 2 ) *> ) ^ <* R7 *> ) by L139 , PARTFUN1:def 6
.= ( ( <* R4 *> ^ <* ( D22 . 2 ) *> ) ^ <* R7 *> ) by FINSEQ_1:45
.= ( ( <* R4 *> ^ <* R5 *> ) ^ <* R7 *> ) by FINSEQ_1:45;
thus L142: thesis by L141;
end;
begin
registration
let C14 being FinSequence;
let C15 , C16 being Nat;
cluster ( Swap (C14 , C15 , C16) ) ->  FinSequence-like;
correctness
proof
L143: ( dom ( Swap (C14 , C15 , C16) ) ) = ( dom C14 ) by FUNCT_7:99;
thus L144: (ex B6 being Nat st ( dom ( Swap (C14 , C15 , C16) ) ) = ( Seg B6 )) by L143 , FINSEQ_1:def 2;
end;
end;
definition
let C17 being non  empty set;
let C18 being (FinSequence of C17);
let C19 , C20 being Nat;
redefine func Swap (C18 , C19 , C20) -> (FinSequence of C17) equals 
:L146: ( Replace (( Replace (C18 , C19 , ( C18 /. C20 )) ) , C20 , ( C18 /. C19 )) ) if (1 <= C19 & C19 <= ( len C18 ) & 1 <= C20 & C20 <= ( len C18 )) otherwise C18;
coherence
proof
L147: ( rng ( Swap (C18 , C19 , C20) ) ) = ( rng C18 ) by FUNCT_7:103;
thus L148: ( rng ( Swap (C18 , C19 , C20) ) ) c= C17 by L147 , FINSEQ_1:def 4;
end;
compatibility
proof
let C21 being (FinSequence of C17);
thus L149: ((1 <= C19 & C19 <= ( len C18 ) & 1 <= C20 & C20 <= ( len C18 )) implies (C21 = ( Swap (C18 , C19 , C20) ) iff C21 = ( Replace (( Replace (C18 , C19 , ( C18 /. C20 )) ) , C20 , ( C18 /. C19 )) )))
proof
assume that
L150: (1 <= C19 & C19 <= ( len C18 ))
and
L151: (1 <= C20 & C20 <= ( len C18 ));
L152: C20 in ( dom C18 ) by L151 , FINSEQ_3:25;
L153: ( C18 /. C20 ) = ( C18 . C20 ) by L152 , PARTFUN1:def 6;
L154: C19 in ( dom C18 ) by L150 , FINSEQ_3:25;
L155: ( C18 /. C19 ) = ( C18 . C19 ) by L154 , PARTFUN1:def 6;
thus L156: thesis by L155 , L154 , L152 , L153 , FUNCT_7:def 12;
end;

assume L157: (not (1 <= C19 & C19 <= ( len C18 ) & 1 <= C20 & C20 <= ( len C18 )));
L158: (not (C19 in ( dom C18 ) & C20 in ( dom C18 ))) by L157 , FINSEQ_3:25;
thus L159: thesis by L158 , FUNCT_7:def 12;
end;
correctness;
end;
theorem
L161: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ( len ( Swap (R2 , R8 , R9) ) ) = ( len R2 )))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
L162: ( dom ( Swap (R2 , R8 , R9) ) ) = ( dom R2 ) by FUNCT_7:99;
thus L163: thesis by L162 , FINSEQ_3:29;
end;
L164: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ((1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )) implies (( ( Swap (R2 , R8 , R9) ) . R8 ) = ( R2 . R9 ) & ( ( Swap (R2 , R8 , R9) ) . R9 ) = ( R2 . R8 )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
assume that
L165: 1 <= R8
and
L166: R8 <= ( len R2 )
and
L167: 1 <= R9
and
L168: R9 <= ( len R2 );
L169: R8 in ( dom R2 ) by L165 , L166 , FINSEQ_3:25;
set D23 = ( Replace (R2 , R8 , ( R2 /. R9 )) );
L170: R8 <= ( len D23 ) by L166 , FUNCT_7:97;
L171: R9 <= ( len D23 ) by L168 , FUNCT_7:97;
L172: R9 in ( dom R2 ) by L167 , L168 , FINSEQ_3:25;
per cases ;
suppose L173: R8 = R9;

L174: ( ( Swap (R2 , R8 , R9) ) . R8 ) = ( ( Replace (D23 , R9 , ( R2 /. R8 )) ) . R8 ) by L165 , L166 , L167 , L168 , L146
.= ( R2 /. R8 ) by L165 , L170 , L173 , L63
.= ( R2 . R8 ) by L169 , PARTFUN1:def 6;
thus L175: thesis by L174 , L173;
end;
suppose L176: R8 <> R9;

L177: ( ( Swap (R2 , R8 , R9) ) . R9 ) = ( ( Replace (D23 , R9 , ( R2 /. R8 )) ) . R9 ) by L165 , L166 , L167 , L168 , L146
.= ( R2 /. R8 ) by L167 , L171 , L63;
L178: ( ( Swap (R2 , R8 , R9) ) . R8 ) = ( ( Replace (D23 , R9 , ( R2 /. R8 )) ) . R8 ) by L165 , L166 , L167 , L168 , L146
.= ( D23 . R8 ) by L176 , FUNCT_7:32
.= ( R2 /. R9 ) by L165 , L166 , L63;
thus L179: thesis by L178 , L169 , L172 , L177 , PARTFUN1:def 6;
end;
end;
theorem
L181: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds ( Swap (R2 , R8 , R8) ) = R2)))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
reconsider D24 = R8 as (Element of ( NAT )) by ORDINAL1:def 12;
per cases ;
suppose L182: (1 <= D24 & D24 <= ( len R2 ));

L183: ( Swap (R2 , D24 , D24) ) = ( Replace (( Replace (R2 , D24 , ( R2 /. D24 )) ) , D24 , ( R2 /. D24 )) ) by L182 , L146
.= ( Replace (R2 , D24 , ( R2 /. D24 )) ) by FUNCT_7:38;
thus L184: thesis by L183 , FUNCT_7:38;
end;
suppose L185: (not (1 <= D24 & D24 <= ( len R2 )));

thus L186: thesis by L185 , L146;
end;
end;
theorem
L188: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R8) ) = R2))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
per cases ;
suppose L189: (1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 ));

L190: (for B7 being Nat holds ((1 <= B7 & B7 <= ( len R2 )) implies ( R2 . B7 ) = ( ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R8) ) . B7 )))
proof
L191: R8 <= ( len ( Swap (R2 , R8 , R9) ) ) by L189 , L161;
L192: R9 <= ( len ( Swap (R2 , R8 , R9) ) ) by L189 , L161;
let C22 being Nat;
assume that
L193: 1 <= C22
and
L194: C22 <= ( len R2 );
L195: C22 <= ( len ( Swap (R2 , R8 , R9) ) ) by L194 , L161;
L196:
now
per cases ;
suppose L197: R8 = C22;

L198: ( ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R8) ) . C22 ) = ( ( Swap (R2 , C22 , R9) ) . R9 ) by L197 , L189 , L195 , L192 , L164;
thus L199: thesis by L198 , L189 , L193 , L194 , L164;
end;
suppose L200: R8 <> C22;

L201:
now
per cases ;
suppose L202: R9 = C22;

L203: ( ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R8) ) . C22 ) = ( ( Swap (R2 , R8 , C22) ) . R8 ) by L202 , L189 , L195 , L191 , L164;
thus L204: thesis by L203 , L189 , L193 , L194 , L164;
end;
suppose L205: R9 <> C22;

set D25 = ( Swap (R2 , R8 , R9) );
L206: ( ( Swap (D25 , R9 , R8) ) . C22 ) = ( ( Replace (( Replace (D25 , R9 , ( D25 /. R8 )) ) , R8 , ( D25 /. R9 )) ) . C22 ) by L189 , L192 , L191 , L146
.= ( ( Replace (D25 , R9 , ( D25 /. R8 )) ) . C22 ) by L200 , FUNCT_7:32
.= ( D25 . C22 ) by L205 , FUNCT_7:32
.= ( ( Replace (( Replace (R2 , R8 , ( R2 /. R9 )) ) , R9 , ( R2 /. R8 )) ) . C22 ) by L189 , L146
.= ( ( Replace (R2 , R8 , ( R2 /. R9 )) ) . C22 ) by L205 , FUNCT_7:32;
thus L207: thesis by L206 , L200 , FUNCT_7:32;
end;
end;
thus L209: thesis by L201;
end;
end;
thus L211: thesis by L196;
end;
L212: ( len ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R8) ) ) = ( len ( Swap (R2 , R8 , R9) ) ) by L161
.= ( len R2 ) by L161;
thus L213: thesis by L212 , L190 , FINSEQ_1:14;
end;
suppose L214: (not (1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )));

L215: ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R8) ) = ( Swap (R2 , R9 , R8) ) by L214 , L146;
thus L216: thesis by L215 , L214 , L146;
end;
end;
theorem
L218: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ( Swap (R2 , R8 , R9) ) = ( Swap (R2 , R9 , R8) )))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
per cases ;
suppose L219: (1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 ));

set D26 = ( Replace (R2 , R9 , ( R2 /. R8 )) );
set D27 = ( Replace (R2 , R8 , ( R2 /. R9 )) );
L220: (for B8 being Nat holds ((1 <= B8 & B8 <= ( len ( Swap (R2 , R8 , R9) ) )) implies ( ( Swap (R2 , R8 , R9) ) . B8 ) = ( ( Swap (R2 , R9 , R8) ) . B8 )))
proof
L221: ( len ( Swap (R2 , R8 , R9) ) ) = ( len R2 ) by L161
.= ( len D26 ) by FUNCT_7:97;
L222: ( len ( Swap (R2 , R8 , R9) ) ) = ( len R2 ) by L161
.= ( len D27 ) by FUNCT_7:97;
let C23 being Nat;
assume that
L223: 1 <= C23
and
L224: C23 <= ( len ( Swap (R2 , R8 , R9) ) );
L225: C23 <= ( len R2 ) by L224 , L161;
L226:
now
per cases ;
suppose L227: R8 = C23;

L228:
now
per cases ;
suppose L229: R9 = C23;

L230: ( ( Swap (R2 , R8 , C23) ) . C23 ) = ( ( Replace (D27 , C23 , ( R2 /. R8 )) ) . C23 ) by L229 , L219 , L146
.= ( R2 /. R8 ) by L223 , L224 , L222 , L63
.= ( ( Replace (D26 , C23 , ( R2 /. R8 )) ) . C23 ) by L223 , L224 , L221 , L63
.= ( ( Swap (R2 , C23 , R8) ) . C23 ) by L219 , L227 , L229 , L146;
thus L231: thesis by L230 , L229;
end;
suppose L232: R9 <> C23;

L233: ( ( Swap (R2 , R8 , R9) ) . C23 ) = ( ( Replace (D27 , R9 , ( R2 /. R8 )) ) . C23 ) by L219 , L146
.= ( ( Replace (R2 , C23 , ( R2 /. R9 )) ) . C23 ) by L227 , L232 , FUNCT_7:32
.= ( R2 /. R9 ) by L223 , L225 , L63
.= ( ( Replace (D26 , C23 , ( R2 /. R9 )) ) . C23 ) by L223 , L224 , L221 , L63;
thus L234: thesis by L233 , L219 , L227 , L146;
end;
end;
thus L236: thesis by L228;
end;
suppose L237: R8 <> C23;

L238:
now
per cases ;
suppose L239: R9 = C23;

L240: ( ( Swap (R2 , R8 , R9) ) . C23 ) = ( ( Replace (D27 , C23 , ( R2 /. R8 )) ) . C23 ) by L239 , L219 , L146
.= ( R2 /. R8 ) by L223 , L224 , L222 , L63
.= ( D26 . C23 ) by L223 , L225 , L239 , L63
.= ( ( Replace (D26 , R8 , ( R2 /. R9 )) ) . C23 ) by L237 , FUNCT_7:32;
thus L241: thesis by L240 , L219 , L146;
end;
suppose L242: R9 <> C23;

L243: ( ( Swap (R2 , R8 , R9) ) . C23 ) = ( ( Replace (D27 , R9 , ( R2 /. R8 )) ) . C23 ) by L219 , L146
.= ( D27 . C23 ) by L242 , FUNCT_7:32
.= ( R2 . C23 ) by L237 , FUNCT_7:32
.= ( ( Replace (R2 , R9 , ( R2 /. R8 )) ) . C23 ) by L242 , FUNCT_7:32
.= ( ( Replace (D26 , R8 , ( R2 /. R9 )) ) . C23 ) by L237 , FUNCT_7:32;
thus L244: thesis by L243 , L219 , L146;
end;
end;
thus L246: thesis by L238;
end;
end;
thus L248: thesis by L226;
end;
L249: ( len ( Swap (R2 , R8 , R9) ) ) = ( len R2 ) by L161
.= ( len ( Swap (R2 , R9 , R8) ) ) by L161;
thus L250: thesis by L249 , L220 , FINSEQ_1:14;
end;
suppose L251: (not (1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )));

L252: ( Swap (R2 , R8 , R9) ) = R2 by L251 , L146;
thus L253: thesis by L252 , L251 , L146;
end;
end;
theorem
L255: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ( rng ( Swap (R2 , R8 , R9) ) ) = ( rng R2 ))))) by FUNCT_7:103;
theorem
L256: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds ( Swap (<* R4 , R5 *> , 1 , 2) ) = <* R5 , R4 *>)))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
set D28 = <* R4 , R5 *>;
L257: ( len D28 ) = 2 by FINSEQ_1:44;
L258: 1 in ( dom D28 ) by L257 , FINSEQ_3:25;
L259: ( D28 /. 1 ) = ( D28 . 1 ) by L258 , PARTFUN1:def 6
.= R4 by FINSEQ_1:44;
L260: 2 in ( dom D28 ) by L257 , FINSEQ_3:25;
L261: ( D28 /. 2 ) = ( D28 . 2 ) by L260 , PARTFUN1:def 6
.= R5 by FINSEQ_1:44;
L262: ( Swap (D28 , 1 , 2) ) = ( Replace (( Replace (D28 , 1 , ( D28 /. 2 )) ) , 2 , ( D28 /. 1 )) ) by L257 , L146
.= ( Replace (<* R5 , R5 *> , 2 , ( D28 /. 1 )) ) by L261 , L109;
thus L263: thesis by L262 , L259 , L116;
end;
theorem
L264: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R6 being (Element of R1) holds ( Swap (<* R4 , R5 , R6 *> , 1 , 2) ) = <* R5 , R4 , R6 *>))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R6 being (Element of R1);
set D29 = <* R4 , R5 , R6 *>;
L265: ( len D29 ) = 3 by FINSEQ_1:45;
L266: 1 in ( dom D29 ) by L265 , FINSEQ_3:25;
L267: ( D29 /. 1 ) = ( D29 . 1 ) by L266 , PARTFUN1:def 6
.= R4 by FINSEQ_1:45;
L268: 2 in ( dom D29 ) by L265 , FINSEQ_3:25;
L269: ( D29 /. 2 ) = ( D29 . 2 ) by L268 , PARTFUN1:def 6
.= R5 by FINSEQ_1:45;
L270: ( Swap (D29 , 1 , 2) ) = ( Replace (( Replace (D29 , 1 , ( D29 /. 2 )) ) , 2 , ( D29 /. 1 )) ) by L265 , L146
.= ( Replace (<* R5 , R5 , R6 *> , 2 , ( D29 /. 1 )) ) by L269 , L123;
thus L271: thesis by L270 , L267 , L127;
end;
theorem
L272: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R6 being (Element of R1) holds ( Swap (<* R4 , R5 , R6 *> , 1 , 3) ) = <* R6 , R5 , R4 *>))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R6 being (Element of R1);
set D30 = <* R4 , R5 , R6 *>;
L273: ( len D30 ) = 3 by FINSEQ_1:45;
L274: 1 in ( dom D30 ) by L273 , FINSEQ_3:25;
L275: ( D30 /. 1 ) = ( D30 . 1 ) by L274 , PARTFUN1:def 6
.= R4 by FINSEQ_1:45;
L276: 3 in ( dom D30 ) by L273 , FINSEQ_3:25;
L277: ( D30 /. 3 ) = ( D30 . 3 ) by L276 , PARTFUN1:def 6
.= R6 by FINSEQ_1:45;
L278: ( Swap (D30 , 1 , 3) ) = ( Replace (( Replace (D30 , 1 , ( D30 /. 3 )) ) , 3 , ( D30 /. 1 )) ) by L273 , L146
.= ( Replace (<* R6 , R5 , R6 *> , 3 , ( D30 /. 1 )) ) by L277 , L123;
thus L279: thesis by L278 , L275 , L135;
end;
theorem
L280: (for R1 being non  empty set holds (for R4 being (Element of R1) holds (for R5 being (Element of R1) holds (for R6 being (Element of R1) holds ( Swap (<* R4 , R5 , R6 *> , 2 , 3) ) = <* R4 , R6 , R5 *>))))
proof
let R1 being non  empty set;
let R4 being (Element of R1);
let R5 being (Element of R1);
let R6 being (Element of R1);
set D31 = <* R4 , R5 , R6 *>;
L281: ( len D31 ) = 3 by FINSEQ_1:45;
L282: 2 in ( dom D31 ) by L281 , FINSEQ_3:25;
L283: ( D31 /. 2 ) = ( D31 . 2 ) by L282 , PARTFUN1:def 6
.= R5 by FINSEQ_1:45;
L284: 3 in ( dom D31 ) by L281 , FINSEQ_3:25;
L285: ( D31 /. 3 ) = ( D31 . 3 ) by L284 , PARTFUN1:def 6
.= R6 by FINSEQ_1:45;
L286: ( Swap (D31 , 2 , 3) ) = ( Replace (( Replace (D31 , 2 , ( D31 /. 3 )) ) , 3 , ( D31 /. 2 )) ) by L281 , L146
.= ( Replace (<* R4 , R6 , R6 *> , 3 , ( D31 /. 2 )) ) by L285 , L127;
thus L287: thesis by L286 , L283 , L135;
end;
theorem
L288: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ((1 <= R8 & R8 < R9 & R9 <= ( len R2 )) implies ( Swap (R2 , R8 , R9) ) = ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* ( R2 /. R9 ) *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ <* ( R2 /. R8 ) *> ) ^ ( R2 /^ R9 ) ))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
assume that
L289: 1 <= R8
and
L290: R8 < R9
and
L291: R9 <= ( len R2 );
L292: (R8 <= ( len R2 ) & 1 <= R9) by L289 , L290 , L291 , XXREAL_0:2;
L293: ( Swap (R2 , R8 , R9) ) = ( Swap (R2 , R9 , R8) ) by L218
.= ( Replace (( Replace (R2 , R9 , ( R2 /. R8 )) ) , R8 , ( R2 /. R9 )) ) by L289 , L291 , L292 , L146;
thus L294: thesis by L293 , L289 , L290 , L291 , L88;
end;
theorem
L295: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds ((1 < R8 & R8 <= ( len R2 )) implies ( Swap (R2 , 1 , R8) ) = ( ( ( <* ( R2 /. R8 ) *> ^ ( ( R2 /^ 1 ) | ( R8 -' 2 ) ) ) ^ <* ( R2 /. 1 ) *> ) ^ ( R2 /^ R8 ) )))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
assume L296: (1 < R8 & R8 <= ( len R2 ));
L297: ( Swap (R2 , 1 , R8) ) = ( ( ( ( ( R2 | ( 1 -' 1 ) ) ^ <* ( R2 /. R8 ) *> ) ^ ( ( R2 /^ 1 ) | ( ( R8 -' 1 ) -' 1 ) ) ) ^ <* ( R2 /. 1 ) *> ) ^ ( R2 /^ R8 ) ) by L296 , L288
.= ( ( ( ( ( R2 | ( 0 ) ) ^ <* ( R2 /. R8 ) *> ) ^ ( ( R2 /^ 1 ) | ( ( R8 -' 1 ) -' 1 ) ) ) ^ <* ( R2 /. 1 ) *> ) ^ ( R2 /^ R8 ) ) by XREAL_1:232
.= ( ( ( <* ( R2 /. R8 ) *> ^ ( ( R2 /^ 1 ) | ( ( R8 -' 1 ) -' 1 ) ) ) ^ <* ( R2 /. 1 ) *> ) ^ ( R2 /^ R8 ) ) by FINSEQ_1:34;
thus L298: thesis by L297 , NAT_D:45;
end;
theorem
L299: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds ((1 <= R8 & R8 < ( len R2 )) implies ( Swap (R2 , R8 , ( len R2 )) ) = ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* ( R2 /. ( len R2 ) ) *> ) ^ ( ( R2 /^ R8 ) | ( ( ( len R2 ) -' R8 ) -' 1 ) ) ) ^ <* ( R2 /. R8 ) *> )))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
assume L300: (1 <= R8 & R8 < ( len R2 ));
L301: ( Swap (R2 , R8 , ( len R2 )) ) = ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* ( R2 /. ( len R2 ) ) *> ) ^ ( ( R2 /^ R8 ) | ( ( ( len R2 ) -' R8 ) -' 1 ) ) ) ^ <* ( R2 /. R8 ) *> ) ^ ( R2 /^ ( len R2 ) ) ) by L300 , L288
.= ( ( ( ( ( R2 | ( R8 -' 1 ) ) ^ <* ( R2 /. ( len R2 ) ) *> ) ^ ( ( R2 /^ R8 ) | ( ( ( len R2 ) -' R8 ) -' 1 ) ) ) ^ <* ( R2 /. R8 ) *> ) ^ ( {} ) ) by RFINSEQ:27;
thus L302: thesis by L301 , FINSEQ_1:34;
end;
L303: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds (for R10 being Nat holds ((R8 <> R10 & R9 <> R10) implies ( ( Swap (R2 , R8 , R9) ) . R10 ) = ( R2 . R10 )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
let R10 being Nat;
per cases ;
suppose L304: (1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 ));

assume that
L305: R8 <> R10
and
L306: R9 <> R10;
L307: ( ( Replace (( Replace (R2 , R8 , ( R2 /. R9 )) ) , R9 , ( R2 /. R8 )) ) . R10 ) = ( ( Replace (R2 , R8 , ( R2 /. R9 )) ) . R10 ) by L306 , FUNCT_7:32
.= ( R2 . R10 ) by L305 , FUNCT_7:32;
thus L308: thesis by L307 , L304 , L146;
end;
suppose L309: (not (1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )));

thus L310: thesis by L309 , L146;
end;
end;
theorem
L312: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds (for R10 being Nat holds ((R8 <> R10 & R9 <> R10 & 1 <= R10 & R10 <= ( len R2 )) implies ( ( Swap (R2 , R8 , R9) ) /. R10 ) = ( R2 /. R10 )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
let R10 being Nat;
assume that
L313: (R8 <> R10 & R9 <> R10)
and
L314: 1 <= R10
and
L315: R10 <= ( len R2 );
L316: R10 in ( dom R2 ) by L314 , L315 , FINSEQ_3:25;
L317: R10 <= ( len ( Swap (R2 , R8 , R9) ) ) by L315 , L161;
L318: R10 in ( dom ( Swap (R2 , R8 , R9) ) ) by L317 , L314 , FINSEQ_3:25;
thus L319: ( ( Swap (R2 , R8 , R9) ) /. R10 ) = ( ( Swap (R2 , R8 , R9) ) . R10 ) by L318 , PARTFUN1:def 6
.= ( R2 . R10 ) by L313 , L303
.= ( R2 /. R10 ) by L316 , PARTFUN1:def 6;
end;
theorem
L320: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds ((1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )) implies (( ( Swap (R2 , R8 , R9) ) /. R8 ) = ( R2 /. R9 ) & ( ( Swap (R2 , R8 , R9) ) /. R9 ) = ( R2 /. R8 )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
assume that
L321: 1 <= R8
and
L322: R8 <= ( len R2 )
and
L323: 1 <= R9
and
L324: R9 <= ( len R2 );
L325: R8 in ( dom R2 ) by L321 , L322 , FINSEQ_3:25;
set D32 = ( Swap (R2 , R8 , R9) );
L326: R9 <= ( len D32 ) by L324 , L161;
L327: R9 in ( dom D32 ) by L326 , L323 , FINSEQ_3:25;
L328: ( D32 /. R9 ) = ( D32 . R9 ) by L327 , PARTFUN1:def 6
.= ( R2 . R8 ) by L321 , L322 , L323 , L324 , L164
.= ( R2 /. R8 ) by L325 , PARTFUN1:def 6;
L329: R9 in ( dom R2 ) by L323 , L324 , FINSEQ_3:25;
L330: R8 <= ( len D32 ) by L322 , L161;
L331: R8 in ( dom D32 ) by L330 , L321 , FINSEQ_3:25;
L332: ( D32 /. R8 ) = ( D32 . R8 ) by L331 , PARTFUN1:def 6
.= ( R2 . R9 ) by L321 , L322 , L323 , L324 , L164
.= ( R2 /. R9 ) by L329 , PARTFUN1:def 6;
thus L333: thesis by L332 , L328;
end;
begin
theorem
L334: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds (for R9 being Nat holds ((1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )) implies ( Replace (( Swap (R2 , R8 , R9) ) , R8 , R3) ) = ( Swap (( Replace (R2 , R9 , R3) ) , R8 , R9) )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
let R9 being Nat;
assume that
L335: 1 <= R8
and
L336: R8 <= ( len R2 )
and
L337: 1 <= R9
and
L338: R9 <= ( len R2 );
L339: R8 in ( dom R2 ) by L335 , L336 , FINSEQ_3:25;
per cases  by XXREAL_0:1;
suppose L340: R8 = R9;

L341: ( Replace (( Swap (R2 , R8 , R9) ) , R8 , R3) ) = ( Replace (R2 , R8 , R3) ) by L340 , L181;
thus L342: thesis by L341 , L340 , L181;
end;
suppose L343: R8 < R9;

set D33 = <* ( R2 /. R9 ) *>;
set D34 = ( R2 | ( R8 -' 1 ) );
set D35 = ( Swap (R2 , R8 , R9) );
set D36 = ( D34 ^ D33 );
L344: D35 = ( ( ( D36 ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ <* ( R2 /. R8 ) *> ) ^ ( R2 /^ R9 ) ) by L335 , L338 , L343 , L288
.= ( ( D36 ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ ( <* ( R2 /. R8 ) *> ^ ( R2 /^ R9 ) ) ) by FINSEQ_1:32
.= ( D36 ^ ( ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ^ ( <* ( R2 /. R8 ) *> ^ ( R2 /^ R9 ) ) ) ) by FINSEQ_1:32;
set D37 = ( Replace (R2 , R9 , R3) );
L345: R8 <= ( len D37 ) by L336 , FUNCT_7:97;
L346: R8 in ( dom D37 ) by L345 , L335 , FINSEQ_3:25;
L347: ( R2 . R8 ) = ( D37 . R8 ) by L343 , FUNCT_7:32
.= ( D37 /. R8 ) by L346 , PARTFUN1:def 6;
L348: R9 <= ( len D37 ) by L338 , FUNCT_7:97;
L349: R9 in ( dom D37 ) by L348 , L337 , FINSEQ_3:25;
set D38 = ( R2 | ( R9 -' 1 ) );
L350: ( R9 -' 1 ) <= R9 by NAT_D:35;
L351: ( R8 -' 1 ) < ( R9 -' 1 ) by L335 , L343 , NAT_D:56;
L352: ( R8 -' 1 ) <= ( len D38 ) by L351 , L338 , L350 , FINSEQ_1:59 , XXREAL_0:2;
set D39 = <* R3 *>;
set D40 = ( ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ^ ( <* ( R2 /. R8 ) *> ^ ( R2 /^ R9 ) ) );
L353: ( R8 -' 1 ) <= R8 by NAT_D:35;
L354: R8 <= ( len D35 ) by L336 , L161;
L355: ( len D36 ) = ( ( len D34 ) + ( len D33 ) ) by FINSEQ_1:22
.= ( ( len D34 ) + 1 ) by FINSEQ_1:39
.= ( ( R8 -' 1 ) + 1 ) by L336 , L353 , FINSEQ_1:59 , XXREAL_0:2
.= R8 by L335 , XREAL_1:235;
L356: ( Replace (D35 , R8 , R3) ) = ( ( ( D35 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ ( D35 /^ ( len D36 ) ) ) by L355 , L335 , L354 , L44
.= ( ( ( D35 | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ D40 ) by L344 , FINSEQ_5:37
.= ( ( ( ( D34 ^ ( D33 ^ D40 ) ) | ( R8 -' 1 ) ) ^ <* R3 *> ) ^ D40 ) by L344 , FINSEQ_1:32
.= ( ( ( ( D34 ^ ( D33 ^ D40 ) ) | ( len D34 ) ) ^ <* R3 *> ) ^ D40 ) by L336 , L353 , FINSEQ_1:59 , XXREAL_0:2
.= ( ( D34 ^ <* R3 *> ) ^ D40 ) by FINSEQ_5:23;
L357: ( len ( D38 ^ D39 ) ) = ( ( len D38 ) + ( len D39 ) ) by FINSEQ_1:22
.= ( ( len D38 ) + 1 ) by FINSEQ_1:39
.= ( ( R9 -' 1 ) + 1 ) by L338 , L350 , FINSEQ_1:59 , XXREAL_0:2
.= R9 by L337 , XREAL_1:235;
L358: ( ( D37 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) = ( ( D37 /^ R8 ) | ( R9 -' ( R8 + 1 ) ) ) by NAT_2:30
.= ( ( D37 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) by NAT_2:30
.= ( ( D37 | ( R9 -' 1 ) ) /^ R8 ) by FINSEQ_5:80
.= ( ( ( ( D38 ^ D39 ) ^ ( R2 /^ R9 ) ) | ( R9 -' 1 ) ) /^ R8 ) by L337 , L338 , L44
.= ( ( ( D38 ^ ( D39 ^ ( R2 /^ R9 ) ) ) | ( R9 -' 1 ) ) /^ R8 ) by FINSEQ_1:32
.= ( ( ( D38 ^ ( D39 ^ ( R2 /^ R9 ) ) ) | ( len D38 ) ) /^ R8 ) by L338 , L350 , FINSEQ_1:59 , XXREAL_0:2
.= ( D38 /^ R8 ) by FINSEQ_5:23
.= ( ( R2 /^ R8 ) | ( ( R9 -' 1 ) -' R8 ) ) by FINSEQ_5:80
.= ( ( R2 /^ R8 ) | ( R9 -' ( 1 + R8 ) ) ) by NAT_2:30
.= ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) by NAT_2:30;
L359: R3 = ( D37 . R9 ) by L337 , L338 , L63
.= ( D37 /. R9 ) by L349 , PARTFUN1:def 6;
L360: ( D37 | ( R8 -' 1 ) ) = ( ( ( D38 ^ D39 ) ^ ( R2 /^ R9 ) ) | ( R8 -' 1 ) ) by L337 , L338 , L44
.= ( ( D38 ^ ( D39 ^ ( R2 /^ R9 ) ) ) | ( R8 -' 1 ) ) by FINSEQ_1:32
.= ( D38 | ( R8 -' 1 ) ) by L352 , FINSEQ_5:22
.= ( R2 | ( R8 -' 1 ) ) by L351 , FINSEQ_5:77;
L361: ( D37 /^ R9 ) = ( ( ( D38 ^ D39 ) ^ ( R2 /^ R9 ) ) /^ R9 ) by L337 , L338 , L44
.= ( R2 /^ R9 ) by L357 , FINSEQ_5:37;
L362: ( Swap (D37 , R8 , R9) ) = ( ( ( ( ( D37 | ( R8 -' 1 ) ) ^ <* ( D37 /. R9 ) *> ) ^ ( ( D37 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ <* ( D37 /. R8 ) *> ) ^ ( D37 /^ R9 ) ) by L335 , L343 , L348 , L288
.= ( ( ( D34 ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ ( <* ( R2 . R8 ) *> ^ ( R2 /^ R9 ) ) ) by L361 , L360 , L358 , L347 , L359 , FINSEQ_1:32
.= ( ( ( D34 ^ <* R3 *> ) ^ ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ) ^ ( <* ( R2 /. R8 ) *> ^ ( R2 /^ R9 ) ) ) by L339 , PARTFUN1:def 6
.= ( ( D34 ^ <* R3 *> ) ^ ( ( ( R2 /^ R8 ) | ( ( R9 -' R8 ) -' 1 ) ) ^ ( <* ( R2 /. R8 ) *> ^ ( R2 /^ R9 ) ) ) ) by FINSEQ_1:32;
thus L363: thesis by L362 , L356;
end;
suppose L364: R8 > R9;

consider C24 being Nat such that L365: R8 = ( R9 + C24 ) by L364 , NAT_1:10;
reconsider D41 = R8 , D42 = R9 , D43 = C24 as (Element of ( NAT )) by ORDINAL1:def 12;
L366: ( D41 - D42 ) > ( D42 - D42 ) by L364 , XREAL_1:9;
L367: D43 = ( D41 -' D42 ) by L366 , L365 , XREAL_0:def 2;
set D44 = ( R2 /^ D41 );
set D45 = <* ( R2 /. D42 ) *>;
set D46 = ( ( R2 /^ D42 ) | ( ( D41 -' D42 ) -' 1 ) );
set D47 = <* ( R2 /. D41 ) *>;
set D48 = ( R2 | ( D42 -' 1 ) );
set D49 = ( Swap (R2 , D42 , D41) );
set D50 = ( D48 ^ D47 );
L368: D49 = ( ( ( D50 ^ D46 ) ^ D45 ) ^ D44 ) by L336 , L337 , L364 , L288
.= ( ( D50 ^ D46 ) ^ ( D45 ^ D44 ) ) by FINSEQ_1:32
.= ( D50 ^ ( D46 ^ ( D45 ^ D44 ) ) ) by FINSEQ_1:32
.= ( D50 ^ ( ( D46 ^ D45 ) ^ D44 ) ) by FINSEQ_1:32;
L369: ( D42 - 1 ) >= ( 1 - 1 ) by L337 , XREAL_1:9;
L370: ( ( D43 + D42 ) -' 1 ) = ( ( D43 + D42 ) - 1 ) by L365 , L366 , NAT_1:14 , NAT_D:37
.= ( D43 + ( D42 - 1 ) )
.= ( D43 + ( D42 -' 1 ) ) by L369 , XREAL_0:def 2;
L371: D43 = ( 1 + ( D43 -' 1 ) ) by L365 , L366 , NAT_1:14 , XREAL_1:235;
set D51 = ( ( D46 ^ D45 ) ^ D44 );
L372: ( D42 -' 1 ) <= D42 by NAT_D:35;
set D52 = ( Replace (R2 , D42 , R3) );
set D53 = ( R2 | ( D42 -' 1 ) );
L373: ( D42 -' 1 ) <= D42 by NAT_D:35;
set D54 = <* R3 *>;
L374: D42 <= ( len D52 ) by L338 , FUNCT_7:97;
L375: D42 in ( dom D52 ) by L374 , L337 , FINSEQ_3:25;
L376: ( len ( D53 ^ D54 ) ) = ( ( len D53 ) + ( len D54 ) ) by FINSEQ_1:22
.= ( ( len D53 ) + 1 ) by FINSEQ_1:39
.= ( ( D42 -' 1 ) + 1 ) by L338 , L373 , FINSEQ_1:59 , XXREAL_0:2
.= D42 by L337 , XREAL_1:235;
L377: ( D52 /^ D41 ) = ( ( ( D53 ^ D54 ) ^ ( R2 /^ D42 ) ) /^ ( ( len ( D53 ^ D54 ) ) + D43 ) ) by L376 , L337 , L338 , L365 , L44
.= ( ( R2 /^ D42 ) /^ D43 ) by FINSEQ_5:36
.= ( R2 /^ D41 ) by L365 , FINSEQ_6:81;
L378: D43 >= 1 by L365 , L366 , NAT_1:14;
L379: ( D43 - 1 ) >= ( 1 - 1 ) by L378 , XREAL_1:9;
L380: ( ( D42 + D43 ) -' 1 ) = ( ( D42 + D43 ) - 1 ) by L337 , NAT_D:37
.= ( D42 + ( D43 - 1 ) )
.= ( D42 + ( D43 -' 1 ) ) by L379 , XREAL_0:def 2;
L381: D41 <= ( len D52 ) by L336 , FUNCT_7:97;
L382: D41 in ( dom D52 ) by L381 , L335 , FINSEQ_3:25;
L383: ( ( D52 /^ D42 ) | ( ( D41 -' D42 ) -' 1 ) ) = ( ( D52 /^ D42 ) | ( D41 -' ( D42 + 1 ) ) ) by NAT_2:30
.= ( ( D52 /^ D42 ) | ( ( D41 -' 1 ) -' D42 ) ) by NAT_2:30
.= ( ( D52 | ( D41 -' 1 ) ) /^ D42 ) by FINSEQ_5:80
.= ( ( ( ( D53 ^ D54 ) ^ ( R2 /^ D42 ) ) | ( D42 + ( D43 -' 1 ) ) ) /^ D42 ) by L337 , L338 , L365 , L380 , L44
.= ( ( ( D53 ^ D54 ) ^ ( ( R2 /^ D42 ) | ( D43 -' 1 ) ) ) /^ ( len ( D53 ^ D54 ) ) ) by L376 , GENEALG1:2
.= ( ( R2 /^ D42 ) | ( ( D41 -' D42 ) -' 1 ) ) by L367 , FINSEQ_5:37;
L384: ( D52 | ( D42 -' 1 ) ) = ( ( ( D53 ^ D54 ) ^ ( R2 /^ D42 ) ) | ( D42 -' 1 ) ) by L337 , L338 , L44
.= ( ( D53 ^ ( D54 ^ ( R2 /^ D42 ) ) ) | ( D42 -' 1 ) ) by FINSEQ_1:32
.= ( ( D53 ^ ( D54 ^ ( R2 /^ D42 ) ) ) | ( len D53 ) ) by L338 , L373 , FINSEQ_1:59 , XXREAL_0:2
.= D53 by FINSEQ_5:23;
L385: R3 = ( D52 . D42 ) by L337 , L338 , L63
.= ( D52 /. D42 ) by L375 , PARTFUN1:def 6;
L386: ( R2 . D41 ) = ( D52 . D41 ) by L364 , FUNCT_7:32
.= ( D52 /. D41 ) by L382 , PARTFUN1:def 6;
L387: ( Swap (D52 , D41 , D42) ) = ( Swap (D52 , D42 , D41) ) by L218
.= ( ( ( ( ( D52 | ( D42 -' 1 ) ) ^ <* ( D52 /. D41 ) *> ) ^ ( ( D52 /^ D42 ) | ( ( D41 -' D42 ) -' 1 ) ) ) ^ <* ( D52 /. D42 ) *> ) ^ ( D52 /^ D41 ) ) by L337 , L364 , L381 , L288
.= ( ( ( ( ( R2 | ( D42 -' 1 ) ) ^ <* ( R2 /. D41 ) *> ) ^ ( ( R2 /^ D42 ) | ( ( D41 -' D42 ) -' 1 ) ) ) ^ <* R3 *> ) ^ ( R2 /^ D41 ) ) by L339 , L377 , L384 , L383 , L386 , L385 , PARTFUN1:def 6;
L388: ( D41 -' D42 ) <> ( 0 ) by L366 , XREAL_0:def 2;
L389: ( D41 -' 1 ) <= D41 by NAT_D:35;
L390: ( D41 -' 1 ) <= ( len R2 ) by L389 , L336 , XXREAL_0:2;
L391: ( ( D41 -' 1 ) -' D42 ) <= ( ( len R2 ) -' D42 ) by L390 , NAT_D:42;
L392: ( ( D41 -' 1 ) -' D42 ) <= ( len ( R2 /^ D42 ) ) by L391 , RFINSEQ:29;
L393: ( D41 -' ( 1 + D42 ) ) <= ( len ( R2 /^ D42 ) ) by L392 , NAT_2:30;
L394: ( ( D41 -' D42 ) -' 1 ) <= ( len ( R2 /^ D42 ) ) by L393 , NAT_2:30;
L395: ( len D46 ) = ( D43 -' 1 ) by L394 , L367 , FINSEQ_1:59;
L396: ( len D50 ) = ( ( len D48 ) + ( len D47 ) ) by FINSEQ_1:22
.= ( ( len D48 ) + 1 ) by FINSEQ_1:39
.= ( ( D42 -' 1 ) + 1 ) by L338 , L372 , FINSEQ_1:59 , XXREAL_0:2
.= D42 by L337 , XREAL_1:235;
L397: D41 <= ( len D49 ) by L336 , L161;
L398: ( len ( D46 ^ D45 ) ) = ( ( len D46 ) + ( len D45 ) ) by FINSEQ_1:22
.= ( ( len D46 ) + 1 ) by FINSEQ_1:39
.= ( ( ( D41 -' D42 ) -' 1 ) + 1 ) by L394 , FINSEQ_1:59
.= ( D41 -' D42 ) by L388 , NAT_1:14 , XREAL_1:235;
L399: ( Replace (( Swap (R2 , D41 , D42) ) , D41 , R3) ) = ( Replace (D49 , D41 , R3) ) by L218
.= ( ( ( D49 | ( D41 -' 1 ) ) ^ <* R3 *> ) ^ ( ( D50 ^ D51 ) /^ ( D42 + D43 ) ) ) by L335 , L365 , L368 , L397 , L44
.= ( ( ( D49 | ( D41 -' 1 ) ) ^ <* R3 *> ) ^ ( ( ( D46 ^ D45 ) ^ D44 ) /^ ( len ( D46 ^ D45 ) ) ) ) by L367 , L396 , L398 , FINSEQ_5:36
.= ( ( ( D49 | ( D43 + ( D42 -' 1 ) ) ) ^ <* R3 *> ) ^ D44 ) by L365 , L370 , FINSEQ_5:37
.= ( ( ( ( D48 ^ ( D47 ^ D51 ) ) | ( ( D42 -' 1 ) + D43 ) ) ^ <* R3 *> ) ^ D44 ) by L368 , FINSEQ_1:32
.= ( ( ( ( D48 ^ ( D47 ^ D51 ) ) | ( ( len D48 ) + D43 ) ) ^ <* R3 *> ) ^ D44 ) by L338 , L372 , FINSEQ_1:59 , XXREAL_0:2
.= ( ( ( D48 ^ ( ( D47 ^ D51 ) | D43 ) ) ^ <* R3 *> ) ^ D44 ) by GENEALG1:2
.= ( ( ( D48 ^ ( ( D47 ^ D51 ) | ( ( len D47 ) + ( D43 -' 1 ) ) ) ) ^ <* R3 *> ) ^ D44 ) by L371 , FINSEQ_1:39
.= ( ( ( D48 ^ ( D47 ^ ( D51 | ( D43 -' 1 ) ) ) ) ^ <* R3 *> ) ^ D44 ) by GENEALG1:2
.= ( ( ( D48 ^ ( D47 ^ ( ( D46 ^ ( D45 ^ D44 ) ) | ( D43 -' 1 ) ) ) ) ^ <* R3 *> ) ^ D44 ) by FINSEQ_1:32
.= ( ( ( D48 ^ ( D47 ^ D46 ) ) ^ <* R3 *> ) ^ D44 ) by L395 , FINSEQ_5:23
.= ( ( ( ( D48 ^ D47 ) ^ D46 ) ^ <* R3 *> ) ^ D44 ) by FINSEQ_1:32;
thus L400: thesis by L399 , L387;
end;
end;
theorem
L402: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R3 being (Element of R1) holds (for R8 being Nat holds (for R9 being Nat holds (for R10 being Nat holds ((R8 <> R10 & R9 <> R10 & 1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 )) implies ( Swap (( Replace (R2 , R10 , R3) ) , R8 , R9) ) = ( Replace (( Swap (R2 , R8 , R9) ) , R10 , R3) ))))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R3 being (Element of R1);
let R8 being Nat;
let R9 being Nat;
let R10 being Nat;
assume that
L403: R8 <> R10
and
L404: R9 <> R10
and
L405: 1 <= R8
and
L406: R8 <= ( len R2 )
and
L407: 1 <= R9
and
L408: R9 <= ( len R2 );
L409: (R8 <= ( len ( Replace (R2 , R10 , R3) ) ) & R9 <= ( len ( Replace (R2 , R10 , R3) ) )) by L406 , L408 , FUNCT_7:97;
thus L410: ( Swap (( Replace (R2 , R10 , R3) ) , R8 , R9) ) = ( Replace (( Replace (( Replace (R2 , R10 , R3) ) , R8 , ( ( Replace (R2 , R10 , R3) ) /. R9 )) ) , R9 , ( ( Replace (R2 , R10 , R3) ) /. R8 )) ) by L409 , L405 , L407 , L146
.= ( Replace (( Replace (( Replace (R2 , R10 , R3) ) , R8 , ( R2 /. R9 )) ) , R9 , ( ( Replace (R2 , R10 , R3) ) /. R8 )) ) by L404 , L407 , L408 , L84
.= ( Replace (( Replace (( Replace (R2 , R10 , R3) ) , R8 , ( R2 /. R9 )) ) , R9 , ( R2 /. R8 )) ) by L403 , L405 , L406 , L84
.= ( Replace (( Replace (( Replace (R2 , R8 , ( R2 /. R9 )) ) , R10 , R3) ) , R9 , ( R2 /. R8 )) ) by L403 , FUNCT_7:33
.= ( Replace (( Replace (( Replace (R2 , R8 , ( R2 /. R9 )) ) , R9 , ( R2 /. R8 )) ) , R10 , R3) ) by L404 , FUNCT_7:33
.= ( Replace (( Swap (R2 , R8 , R9) ) , R10 , R3) ) by L405 , L406 , L407 , L408 , L146;
end;
theorem
L411: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds (for R10 being Nat holds ((R8 <> R10 & R9 <> R10 & 1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 ) & 1 <= R10 & R10 <= ( len R2 )) implies ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R10) ) = ( Swap (( Swap (R2 , R8 , R10) ) , R8 , R9) )))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
let R10 being Nat;
assume that
L412: (R8 <> R10 & R9 <> R10)
and
L413: 1 <= R8
and
L414: R8 <= ( len R2 )
and
L415: 1 <= R9
and
L416: R9 <= ( len R2 )
and
L417: 1 <= R10
and
L418: R10 <= ( len R2 );
L419: (R8 <= ( len ( Replace (R2 , R8 , ( R2 /. R10 )) ) ) & R9 <= ( len ( Replace (R2 , R8 , ( R2 /. R10 )) ) )) by L414 , L416 , FUNCT_7:97;
L420: (R9 <= ( len ( Swap (R2 , R8 , R9) ) ) & R10 <= ( len ( Swap (R2 , R8 , R9) ) )) by L416 , L418 , L161;
thus L421: ( Swap (( Swap (R2 , R8 , R9) ) , R9 , R10) ) = ( Replace (( Replace (( Swap (R2 , R8 , R9) ) , R9 , ( ( Swap (R2 , R8 , R9) ) /. R10 )) ) , R10 , ( ( Swap (R2 , R8 , R9) ) /. R9 )) ) by L420 , L415 , L417 , L146
.= ( Replace (( Replace (( Swap (R2 , R8 , R9) ) , R9 , ( ( Swap (R2 , R8 , R9) ) /. R10 )) ) , R10 , ( R2 /. R8 )) ) by L413 , L414 , L415 , L416 , L320
.= ( Replace (( Replace (( Swap (R2 , R8 , R9) ) , R9 , ( R2 /. R10 )) ) , R10 , ( R2 /. R8 )) ) by L412 , L417 , L418 , L312
.= ( Replace (( Replace (( Swap (R2 , R9 , R8) ) , R9 , ( R2 /. R10 )) ) , R10 , ( R2 /. R8 )) ) by L218
.= ( Replace (( Swap (( Replace (R2 , R8 , ( R2 /. R10 )) ) , R9 , R8) ) , R10 , ( R2 /. R8 )) ) by L413 , L414 , L415 , L416 , L334
.= ( Swap (( Replace (( Replace (R2 , R8 , ( R2 /. R10 )) ) , R10 , ( R2 /. R8 )) ) , R9 , R8) ) by L412 , L413 , L415 , L419 , L402
.= ( Swap (( Swap (R2 , R8 , R10) ) , R9 , R8) ) by L413 , L414 , L417 , L418 , L146
.= ( Swap (( Swap (R2 , R8 , R10) ) , R8 , R9) ) by L218;
end;
theorem
L422: (for R1 being non  empty set holds (for R2 being (FinSequence of R1) holds (for R8 being Nat holds (for R9 being Nat holds (for R10 being Nat holds (for R11 being Nat holds ((R8 <> R10 & R9 <> R10 & R11 <> R8 & R11 <> R9 & 1 <= R8 & R8 <= ( len R2 ) & 1 <= R9 & R9 <= ( len R2 ) & 1 <= R10 & R10 <= ( len R2 ) & 1 <= R11 & R11 <= ( len R2 )) implies ( Swap (( Swap (R2 , R8 , R9) ) , R10 , R11) ) = ( Swap (( Swap (R2 , R10 , R11) ) , R8 , R9) ))))))))
proof
let R1 being non  empty set;
let R2 being (FinSequence of R1);
let R8 being Nat;
let R9 being Nat;
let R10 being Nat;
let R11 being Nat;
assume that
L423: (R8 <> R10 & R9 <> R10)
and
L424: (R11 <> R8 & R11 <> R9)
and
L425: 1 <= R8
and
L426: R8 <= ( len R2 )
and
L427: 1 <= R9
and
L428: R9 <= ( len R2 )
and
L429: 1 <= R10
and
L430: R10 <= ( len R2 )
and
L431: 1 <= R11
and
L432: R11 <= ( len R2 );
L433: (R8 <= ( len ( Replace (R2 , R10 , ( R2 /. R11 )) ) ) & R9 <= ( len ( Replace (R2 , R10 , ( R2 /. R11 )) ) )) by L426 , L428 , FUNCT_7:97;
set D55 = ( Swap (R2 , R8 , R9) );
L434: (R10 <= ( len D55 ) & R11 <= ( len D55 )) by L430 , L432 , L161;
L435: ( Swap (D55 , R10 , R11) ) = ( Replace (( Replace (D55 , R10 , ( D55 /. R11 )) ) , R11 , ( D55 /. R10 )) ) by L434 , L429 , L431 , L146
.= ( Replace (( Replace (D55 , R10 , ( D55 /. R11 )) ) , R11 , ( R2 /. R10 )) ) by L423 , L429 , L430 , L312
.= ( Replace (( Replace (D55 , R10 , ( R2 /. R11 )) ) , R11 , ( R2 /. R10 )) ) by L424 , L431 , L432 , L312
.= ( Replace (( Replace (( Swap (R2 , R9 , R8) ) , R10 , ( R2 /. R11 )) ) , R11 , ( R2 /. R10 )) ) by L218
.= ( Replace (( Swap (( Replace (R2 , R10 , ( R2 /. R11 )) ) , R9 , R8) ) , R11 , ( R2 /. R10 )) ) by L423 , L425 , L426 , L427 , L428 , L402
.= ( Swap (( Replace (( Replace (R2 , R10 , ( R2 /. R11 )) ) , R11 , ( R2 /. R10 )) ) , R9 , R8) ) by L424 , L425 , L427 , L433 , L402
.= ( Swap (( Swap (R2 , R10 , R11) ) , R9 , R8) ) by L429 , L430 , L431 , L432 , L146
.= ( Swap (( Swap (R2 , R10 , R11) ) , R8 , R9) ) by L218;
thus L436: thesis by L435;
end;
