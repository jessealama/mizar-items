:: Vertex sequences induced by chains
::  by Yatsuka Nakamura and Piotr Rudnicki
::
:: Received May 13, 1995
:: Copyright (c) 1995-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, FINSEQ_1, XBOOLE_0, SUBSET_1, NAT_1, ARYTM_3, XXREAL_0,
      INT_1, ARYTM_1, RELAT_1, FUNCT_1, TARSKI, FINSET_1, CARD_1, ORDINAL1,
      ORDINAL4, GRAPH_1, STRUCT_0, TREES_2, PARTFUN1, GLIB_000, FINSEQ_2,
      ZFMISC_1, FINSEQ_4, FUNCT_4, GRAPH_2;
 notations TARSKI, XBOOLE_0, SUBSET_1, ORDINAL1, CARD_1, NUMBERS, XCMPLX_0,
      XXREAL_0, RELAT_1, RELSET_1, XXREAL_2, FINSEQ_1, FUNCT_1, PARTFUN1,
      FUNCT_2, ZFMISC_1, FINSEQ_2, FINSEQ_4, FUNCT_7, FINSET_1, NAT_1, NAT_D,
      INT_1, RECDEF_1, STRUCT_0, GRAPH_1;
 constructors WELLORD2, RECDEF_1, FINSEQ_4, FINSEQ_6, GRAPH_1, FUNCT_7,
      XXREAL_2, NAT_D, RELSET_1, FINSEQ_2;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, FINSET_1, XXREAL_0, XREAL_0, NAT_1,
      INT_1, CARD_1, FINSEQ_1, ZFMISC_1, FINSEQ_6, GRAPH_1, NUMBERS, MEMBERED,
      VALUED_0, XXREAL_2, STRUCT_0, RELSET_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, GRAPH_1, XBOOLE_0, FINSEQ_2, FINSEQ_1;
 theorems TARSKI, ENUMSET1, NAT_1, FINSEQ_1, FINSEQ_2, GRAPH_1, RELAT_1,
      FUNCT_1, GRFUNC_1, FUNCT_2, INT_1, CARD_1, CARD_2, FINSEQ_3, FINSEQ_4,
      CQC_THE1, ZFMISC_1, XBOOLE_0, XBOOLE_1, XCMPLX_1, ORDINAL1, XREAL_1,
      FINSEQ_5, XXREAL_0, MEMBERED, FUNCT_7, PARTFUN1, XXREAL_2, XREAL_0,
      NAT_D, XTUPLE_0;
 schemes NAT_1, FINSEQ_1, FUNCT_1;

begin
theorem
L1: (for B1 , B2 , B3 being Nat holds ((( B1 + 1 ) <= B2 & B2 <= B3) iff (ex B4 being (Element of ( NAT )) st (B1 <= B4 & B4 < B3 & B2 = ( B4 + 1 )))))
proof
let C1 , C2 , C3 being Nat;
thus L2:now
reconsider D1 = 1 as Integer;
reconsider D2 = C2 as Integer;
assume that
L3: ( C1 + 1 ) <= C2
and
L4: C2 <= C3;
L5: 1 <= ( C1 + 1 ) by NAT_1:11;
reconsider D3 = ( D2 - D1 ) as (Element of ( NAT )) by L5 , L3 , INT_1:5 , XXREAL_0:2;
take D4 = D3;
L6: ( ( C1 + 1 ) - 1 ) <= ( C2 - 1 ) by L3 , XREAL_1:9;
thus L7: C1 <= D4 by L6;
L8: C2 < ( C2 + 1 ) by NAT_1:13;
L9: ( C2 - 1 ) < ( ( C2 + 1 ) - 1 ) by L8 , XREAL_1:9;
thus L10: D4 < C3 by L9 , L4 , XXREAL_0:2;
thus L11: C2 = ( D4 + 1 );
end;
given C4 being (Element of ( NAT )) such that
L12: C1 <= C4
and
L13: C4 < C3
and
L14: C2 = ( C4 + 1 );

thus L15: thesis by L12 , L13 , L14 , NAT_1:13 , XREAL_1:7;
end;
theorem
L16: (for R1 being FinSequence holds (for R2 being FinSequence holds (for R13 being (Element of ( NAT )) holds (R2 = ( R1 | ( Seg R13 ) ) implies (( len R2 ) <= ( len R1 ) & (for R8 being (Element of ( NAT )) holds ((1 <= R8 & R8 <= ( len R2 )) implies ( R1 . R8 ) = ( R2 . R8 ))))))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
let R13 being (Element of ( NAT ));
assume L17: R2 = ( R1 | ( Seg R13 ) );
per cases ;
suppose L18: R13 <= ( len R1 );

thus L19: ( len R2 ) <= ( len R1 ) by L18 , L17 , FINSEQ_1:17;
let C5 being (Element of ( NAT ));
assume that
L20: 1 <= C5
and
L21: C5 <= ( len R2 );
L22: ( len R2 ) = R13 by L17 , L18 , FINSEQ_1:17;
L23: C5 in ( Seg R13 ) by L22 , L20 , L21;
thus L24: thesis by L23 , L17 , FUNCT_1:49;
end;
suppose L25: ( len R1 ) <= R13;

thus L26: ( len R2 ) <= ( len R1 ) by L25 , L17 , FINSEQ_2:20;
let C6 being (Element of ( NAT ));
assume that
L27: 1 <= C6
and
L28: C6 <= ( len R2 );
thus L29: thesis by L17 , L25 , FINSEQ_2:20;
end;
end;
theorem
L31: (for R3 being set holds (for R4 being set holds (for R10 being (Element of ( NAT )) holds ((R3 c= ( Seg R10 ) & R4 c= ( dom ( Sgm R3 ) )) implies ( ( Sgm R3 ) * ( Sgm R4 ) ) = ( Sgm ( rng ( ( Sgm R3 ) | R4 ) ) )))))
proof
let R3 being set;
let R4 being set;
let R10 being (Element of ( NAT ));
assume that
L32: R3 c= ( Seg R10 )
and
L33: R4 c= ( dom ( Sgm R3 ) );
reconsider D5 = R4 as  finite set by L33;
set D6 = ( ( Sgm R3 ) * ( Sgm R4 ) );
set D7 = ( rng ( ( Sgm R3 ) | R4 ) );
L34: R4 c= ( Seg ( len ( Sgm R3 ) ) ) by L33 , FINSEQ_1:def 3;
L35: ( rng ( Sgm R4 ) ) = R4 by L34 , FINSEQ_1:def 13;
L36: ( dom ( Sgm D5 ) ) = ( Seg ( card D5 ) ) by L34 , FINSEQ_3:40;
L37: ( dom D6 ) = ( Seg ( card D5 ) ) by L36 , L33 , L35 , RELAT_1:27;
L38: ( rng ( Sgm R3 ) ) c= ( Seg R10 ) by L32 , FINSEQ_1:def 13;
L39: ( rng ( Sgm R3 ) ) c= ( NAT ) by L38 , XBOOLE_1:1;
reconsider D8 = D6 as FinSequence by L37 , FINSEQ_1:def 2;
L40: ( rng D8 ) c= ( rng ( Sgm R3 ) ) by RELAT_1:26;
L41: ( rng D8 ) c= ( NAT ) by L40 , L39 , XBOOLE_1:1;
reconsider D9 = ( ( Sgm R3 ) * ( Sgm R4 ) ) as (FinSequence of ( NAT )) by L41 , FINSEQ_1:def 4;
L42:
now
let C7 being set;
thus L43:now
assume L44: C7 in ( rng D9 );
consider R5 being set such that L45: R5 in ( dom D9 ) and L46: C7 = ( D9 . R5 ) by L44 , FUNCT_1:def 3;
L47: R5 in ( dom ( Sgm R4 ) ) by L45 , FUNCT_1:11;
L48: ( ( Sgm R4 ) . R5 ) in R4 by L47 , L35 , FUNCT_1:def 3;
L49: C7 = ( ( Sgm R3 ) . ( ( Sgm R4 ) . R5 ) ) by L45 , L46 , FUNCT_1:12;
thus L50: C7 in D7 by L49 , L33 , L48 , FUNCT_1:50;
end;
assume L51: C7 in D7;
consider R5 being set such that L52: R5 in ( dom ( ( Sgm R3 ) | R4 ) ) and L53: C7 = ( ( ( Sgm R3 ) | R4 ) . R5 ) by L51 , FUNCT_1:def 3;
L54: R5 in ( ( dom ( Sgm R3 ) ) /\ R4 ) by L52 , RELAT_1:61;
L55: R5 in R4 by L54 , XBOOLE_0:def 4;
consider C8 being set such that L56: C8 in ( dom ( Sgm R4 ) ) and L57: R5 = ( ( Sgm R4 ) . C8 ) by L55 , L35 , FUNCT_1:def 3;
L58: R5 in ( dom ( Sgm R3 ) ) by L54 , XBOOLE_0:def 4;
L59: C8 in ( dom ( ( Sgm R3 ) * ( Sgm R4 ) ) ) by L58 , L56 , L57 , FUNCT_1:11;
L60: C7 = ( ( Sgm R3 ) . R5 ) by L53 , L55 , FUNCT_1:49;
L61: ( D9 . C8 ) = C7 by L60 , L57 , L59 , FUNCT_1:12;
thus L62: C7 in ( rng D9 ) by L61 , L59 , FUNCT_1:def 3;
end;
L63: ( rng D9 ) = D7 by L42 , TARSKI:1;
L64:
now
let C9 , C10 , C11 , C12 being Nat;
assume that
L65: 1 <= C9
and
L66: C9 < C10
and
L67: C10 <= ( len D9 )
and
L68: C11 = ( D9 . C9 )
and
L69: C12 = ( D9 . C10 );
L70: C9 <= ( len D9 ) by L66 , L67 , XXREAL_0:2;
L71: C9 in ( dom D9 ) by L70 , L65 , FINSEQ_3:25;
L72: ( D9 . C9 ) = ( ( Sgm R3 ) . ( ( Sgm R4 ) . C9 ) ) by L71 , FUNCT_1:12;
L73: 1 <= C10 by L65 , L66 , XXREAL_0:2;
L74: C10 in ( dom D9 ) by L73 , L67 , FINSEQ_3:25;
L75: ( D9 . C10 ) = ( ( Sgm R3 ) . ( ( Sgm R4 ) . C10 ) ) by L74 , FUNCT_1:12;
L76: ( ( Sgm R4 ) . C9 ) in ( dom ( Sgm R3 ) ) by L71 , FUNCT_1:11;
L77: C10 in ( dom ( Sgm R4 ) ) by L74 , FUNCT_1:11;
L78: C10 <= ( len ( Sgm R4 ) ) by L77 , FINSEQ_3:25;
L79: ( ( Sgm R4 ) . C10 ) in ( dom ( Sgm R3 ) ) by L74 , FUNCT_1:11;
reconsider D10 = C9 , D11 = C10 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D12 = ( ( Sgm R4 ) . D10 ) , D13 = ( ( Sgm R4 ) . D11 ) as (Element of ( NAT ));
L80: 1 <= D12 by L76 , FINSEQ_3:25;
L81: D13 <= ( len ( Sgm R3 ) ) by L79 , FINSEQ_3:25;
L82: D12 < D13 by L34 , L65 , L66 , L78 , FINSEQ_1:def 13;
thus L83: C11 < C12 by L82 , L32 , L68 , L69 , L72 , L75 , L80 , L81 , FINSEQ_1:def 13;
end;
L84: D7 c= ( rng ( Sgm R3 ) ) by RELAT_1:70;
L85: D7 c= ( Seg R10 ) by L84 , L38 , XBOOLE_1:1;
thus L86: thesis by L85 , L63 , L64 , FINSEQ_1:def 13;
end;
L87: (for B5 , B6 being (Element of ( NAT )) holds (for B7 being  finite set holds (B7 = { R10 where R10 is (Element of ( NAT )) : (B5 <= R10 & R10 <= ( B5 + B6 )) } implies ( card B7 ) = ( B6 + 1 ))))
proof
let C13 being (Element of ( NAT ));
defpred S1[ (Element of ( NAT )) ] means (for B8 being  finite set holds (B8 = { R10 where R10 is (Element of ( NAT )) : (C13 <= R10 & R10 <= ( C13 + $1 )) } implies ( card B8 ) = ( $1 + 1 )));
L88:
now
let C14 being (Element of ( NAT ));
assume L89: S1[ C14 ];
thus L90: S1[ ( C14 + 1 ) ]
proof
reconsider D14 = { R10 where R10 is (Element of ( NAT )) : R10 <= ( C13 + C14 ) } as  finite set by CQC_THE1:2;
set D15 = { R10 where R10 is (Element of ( NAT )) : (C13 <= R10 & R10 <= ( C13 + C14 )) };
L91: D15 c= D14
proof
let C15 being set;
assume L92: C15 in D15;
L93: (ex B9 being (Element of ( NAT )) st (C15 = B9 & C13 <= B9 & B9 <= ( C13 + C14 ))) by L92;
thus L94: thesis by L93;
end;
reconsider D16 = D15 as  finite set by L91;
let C16 being  finite set;
L95: (not ( C13 + ( C14 + 1 ) ) in { R10 where R10 is (Element of ( NAT )) : (C13 <= R10 & R10 <= ( C13 + C14 )) })
proof
assume L96: (not thesis);
L97: (ex R10 being (Element of ( NAT )) st (( C13 + ( C14 + 1 ) ) = R10 & C13 <= R10 & R10 <= ( C13 + C14 ))) by L96;
L98: ( ( C13 + C14 ) + 1 ) <= ( ( C13 + C14 ) + ( 0 ) ) by L97;
thus L99: contradiction by L98 , XREAL_1:6;
end;
assume L100: C16 = { R10 where R10 is (Element of ( NAT )) : (C13 <= R10 & R10 <= ( C13 + ( C14 + 1 ) )) };
L101:
now
let C17 being set;
thus L102:now
assume L103: C17 in C16;
consider R10 being (Element of ( NAT )) such that L104: C17 = R10 and L105: C13 <= R10 and L106: R10 <= ( C13 + ( C14 + 1 ) ) by L103 , L100;
L107: R10 <= ( ( C13 + C14 ) + 1 ) by L106;
L108: (R10 <= ( C13 + C14 ) or R10 = ( C13 + ( C14 + 1 ) )) by L107 , NAT_1:8;
L109: (R10 in D16 or R10 in { ( C13 + ( C14 + 1 ) ) }) by L108 , L105 , TARSKI:def 1;
thus L110: C17 in ( D16 \/ { ( C13 + ( C14 + 1 ) ) } ) by L109 , L104 , XBOOLE_0:def 3;
end;
assume L111: C17 in ( D16 \/ { ( C13 + ( C14 + 1 ) ) } );
per cases  by L111 , XBOOLE_0:def 3;
suppose L112: C17 in D16;

consider R10 being (Element of ( NAT )) such that L113: C17 = R10 and L114: C13 <= R10 and L115: R10 <= ( C13 + C14 ) by L112;
L116: R10 <= ( ( C13 + C14 ) + 1 ) by L115 , NAT_1:12;
thus L117: C17 in C16 by L116 , L100 , L113 , L114;
end;
suppose L118: C17 in { ( C13 + ( C14 + 1 ) ) };

reconsider D17 = C17 as (Element of ( NAT )) by L118 , TARSKI:def 1;
L119: C17 = ( C13 + ( C14 + 1 ) ) by L118 , TARSKI:def 1;
L120: C13 <= D17 by L119 , NAT_1:11;
thus L121: C17 in C16 by L120 , L100 , L119;
end;
end;
L123: C16 = ( { R10 where R10 is (Element of ( NAT )) : (C13 <= R10 & R10 <= ( C13 + C14 )) } \/ { ( C13 + ( C14 + 1 ) ) } ) by L101 , TARSKI:1;
L124: ( card D16 ) = ( C14 + 1 ) by L89;
thus L125: thesis by L124 , L123 , L95 , CARD_2:41;
end;

end;
L91: S1[ ( 0 ) ]
proof
let C18 being  finite set;
assume L92: C18 = { R10 where R10 is (Element of ( NAT )) : (C13 <= R10 & R10 <= ( C13 + ( 0 ) )) };
L93:
now
let C19 being set;
thus L94:now
assume L95: C19 in C18;
L96: (ex B10 being (Element of ( NAT )) st (C19 = B10 & C13 <= B10 & B10 <= ( C13 + ( 0 ) ))) by L95 , L92;
thus L97: C19 = C13 by L96 , XXREAL_0:1;
end;
assume L98: C19 = C13;
thus L99: C19 in C18 by L98 , L92;
end;
L100: C18 = { C13 } by L93 , TARSKI:def 1;
thus L101: thesis by L100 , CARD_1:30;
end;
L102: (for B11 being (Element of ( NAT )) holds S1[ B11 ]) from NAT_1:sch 1(L91 , L88);
thus L103: thesis by L102;
end;
theorem
L104: (for B12 , B13 being (Element of ( NAT )) holds ( card { R10 where R10 is (Element of ( NAT )) : (B12 <= R10 & R10 <= ( B12 + B13 )) } ) = ( B13 + 1 ))
proof
deffunc H1((Element of ( NAT ))) = $1;
defpred S2[ (Element of ( NAT )) ] means (not contradiction);
let C20 , C21 being (Element of ( NAT ));
set D18 = { H1(R10) where R10 is (Element of ( NAT )) : (C20 <= R10 & R10 <= ( C20 + C21 ) & S2[ R10 ]) };
L105: D18 is  finite from FINSEQ_1:sch 6;
reconsider D19 = D18 as  finite set by L105;
L106: D19 = { H1(R10) where R10 is (Element of ( NAT )) : (C20 <= R10 & R10 <= ( C20 + C21 )) }
proof
thus L107: D19 c= { H1(R10) where R10 is (Element of ( NAT )) : (C20 <= R10 & R10 <= ( C20 + C21 )) }
proof
let C22 being set;
assume L108: C22 in D19;
L109: (ex B14 being (Element of ( NAT )) st (C22 = H1(B14) & C20 <= B14 & B14 <= ( C20 + C21 ))) by L108;
thus L110: thesis by L109;
end;

let C23 being set;
assume L111: C23 in { H1(R10) where R10 is (Element of ( NAT )) : (C20 <= R10 & R10 <= ( C20 + C21 )) };
L112: (ex B15 being (Element of ( NAT )) st (C23 = H1(B15) & C20 <= B15 & B15 <= ( C20 + C21 ))) by L111;
thus L113: thesis by L112;
end;
reconsider D20 = { H1(R10) where R10 is (Element of ( NAT )) : (C20 <= R10 & R10 <= ( C20 + C21 )) } as  finite set by L106;
L114: ( card D20 ) = ( C21 + 1 ) by L87;
thus L115: thesis by L114;
end;
theorem
L116: (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds (for R11 being (Element of ( NAT )) holds ((1 <= R11 & R11 <= R13) implies ( ( Sgm { B16 where B16 is (Element of ( NAT )) : (( R12 + 1 ) <= B16 & B16 <= ( R12 + R13 )) } ) . R11 ) = ( R12 + R11 )))))
proof
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
set D21 = ( Sgm { B17 where B17 is (Element of ( NAT )) : (( R12 + 1 ) <= B17 & B17 <= ( R12 + R13 )) } );
defpred S3[ Nat ] means (1 <= $1 & $1 <= R13 & ( D21 . $1 ) <> ( R12 + $1 ));
set D22 = { B18 where B18 is (Element of ( NAT )) : (( R12 + 1 ) <= B18 & B18 <= ( R12 + R13 )) };
L117: D22 c= ( Seg ( R12 + R13 ) )
proof
let C24 being set;
assume L118: C24 in D22;
consider C25 being (Element of ( NAT )) such that L119: C25 = C24 and L120: ( R12 + 1 ) <= C25 and L121: C25 <= ( R12 + R13 ) by L118;
L122: 1 <= ( R12 + 1 ) by NAT_1:11;
L123: 1 <= C25 by L122 , L120 , XXREAL_0:2;
thus L124: thesis by L123 , L119 , L121;
end;
reconsider D23 = D22 as  finite set by L117;
assume L125: (ex R11 being (Element of ( NAT )) st S3[ R11 ]);
L126: (ex B19 being Nat st S3[ B19 ]) by L125;
consider C26 being Nat such that L127: S3[ C26 ] and L128: (for B20 being Nat holds (S3[ B20 ] implies C26 <= B20)) from NAT_1:sch 5(L126);
reconsider D24 = C26 as (Element of ( NAT )) by ORDINAL1:def 12;
L129: ( R12 + D24 ) <= ( R12 + R13 ) by L127 , XREAL_1:7;
reconsider D25 = ( D21 . D24 ) as (Element of ( NAT ));
L130: ( card D23 ) = R13
proof
per cases ;
suppose L131: R13 = ( 0 );

L132: D23 = ( {} )
proof
assume L133: D23 <> ( {} );
consider C27 being set such that L134: C27 in D23 by L133 , XBOOLE_0:def 1;
L135: (ex B21 being (Element of ( NAT )) st (B21 = C27 & ( R12 + 1 ) <= B21 & B21 <= ( R12 + R13 ))) by L134;
L136: ( R12 + 1 ) <= ( R12 + ( 0 ) ) by L135 , L131 , XXREAL_0:2;
thus L137: contradiction by L136 , XREAL_1:6;
end;
thus L138: thesis by L132 , L131;
end;
suppose L139: ( 0 ) < R13;

L140: ( ( 0 ) + 1 ) <= R13 by L139 , NAT_1:13;
L141: ( 1 - 1 ) <= ( R13 - 1 ) by L140 , XREAL_1:9;
L142: ( R13 -' 1 ) = ( R13 - 1 ) by L141 , XREAL_0:def 2;
reconsider D26 = ( R13 - 1 ) as (Element of ( NAT )) by L142;
L143: ( ( R12 + 1 ) + D26 ) = ( R12 + R13 );
L144: ( card D23 ) = ( D26 + 1 ) by L143 , L104;
thus L145: thesis by L144;
end;
end;
L147: ( len ( Sgm D23 ) ) = R13 by L130 , L117 , FINSEQ_3:39;
L148: ( rng D21 ) = D23 by L117 , FINSEQ_1:def 13;
L149:
now
defpred S4[ Nat ] means (for B22 being (Element of ( NAT )) holds ((1 <= $1 & $1 <= R13 & B22 = ( D21 . $1 )) implies ( R12 + $1 ) <= B22));
L150: (for R10 being (Element of ( NAT )) holds (S4[ R10 ] implies S4[ ( R10 + 1 ) ]))
proof
let C28 being (Element of ( NAT ));
assume L151: S4[ C28 ];
L152: C28 < ( C28 + 1 ) by NAT_1:13;
let C29 being (Element of ( NAT ));
assume that
L153: 1 <= ( C28 + 1 )
and
L154: ( C28 + 1 ) <= R13
and
L155: C29 = ( D21 . ( C28 + 1 ) );
per cases  by L153 , XXREAL_0:1;
suppose L156: 1 < ( C28 + 1 );

reconsider D27 = ( D21 . C28 ) as (Element of ( NAT ));
L157: 1 <= C28 by L156 , NAT_1:13;
L158: C28 <= R13 by L154 , NAT_1:13;
L159: ( R12 + C28 ) <= D27 by L158 , L151 , L157;
L160: D27 < C29 by L117 , L147 , L154 , L155 , L152 , L157 , FINSEQ_1:def 13;
L161: ( R12 + C28 ) < C29 by L160 , L159 , XXREAL_0:2;
L162: ( ( R12 + C28 ) + 1 ) <= C29 by L161 , NAT_1:13;
thus L163: thesis by L162;
end;
suppose L164: 1 = ( C28 + 1 );

L165: 1 in ( dom D21 ) by L164 , L147 , L154 , FINSEQ_3:25;
L166: ( D21 . 1 ) in ( rng D21 ) by L165 , FUNCT_1:def 3;
L167: (ex B23 being (Element of ( NAT )) st (B23 = ( D21 . 1 ) & ( R12 + 1 ) <= B23 & B23 <= ( R12 + R13 ))) by L166 , L148;
thus L168: thesis by L167 , L155 , L164;
end;
end;
L170: S4[ ( 0 ) ];
thus L171: (for R10 being (Element of ( NAT )) holds S4[ R10 ]) from NAT_1:sch 1(L170 , L150);
end;
L172: ( R12 + D24 ) <= D25 by L149 , L127;
L173: ( R12 + 1 ) <= ( R12 + D24 ) by L127 , XREAL_1:7;
L174: ( R12 + D24 ) in D23 by L173 , L129;
L175: ( R12 + D24 ) in ( rng ( Sgm D23 ) ) by L174 , L117 , FINSEQ_1:def 13;
consider R5 being set such that L176: R5 in ( dom ( Sgm D23 ) ) and L177: ( R12 + D24 ) = ( ( Sgm D23 ) . R5 ) by L175 , FUNCT_1:def 3;
reconsider D28 = R5 as (Element of ( NAT )) by L176;
L178: ( dom ( Sgm D23 ) ) = ( Seg R13 ) by L117 , L130 , FINSEQ_3:40;
L179: 1 <= D28 by L178 , L176 , FINSEQ_1:1;
L180: D28 <= R13 by L178 , L176 , FINSEQ_1:1;
per cases  by L127 , L177 , XXREAL_0:1;
suppose L181: D24 < D28;

thus L182: contradiction by L181 , L127 , L117 , L147 , L177 , L172 , L180 , FINSEQ_1:def 13;
end;
suppose L183: D24 > D28;

L184: ( D21 . D28 ) <> ( R12 + D28 ) by L127 , L177 , XCMPLX_1:2;
thus L185: contradiction by L184 , L128 , L179 , L180 , L183;
end;
end;
begin
definition
let C30 being FinSequence;
let C31 , C32 being Nat;
func (C31 , C32) -cut C30 -> FinSequence means 
:L187: (( ( len it ) + C31 ) = ( C32 + 1 ) & (for B24 being Nat holds (B24 < ( len it ) implies ( it . ( B24 + 1 ) ) = ( C30 . ( C31 + B24 ) )))) if (1 <= C31 & C31 <= C32 & C32 <= ( len C30 )) otherwise it = ( {} );
consistency;
existence
proof
thus L188:now
deffunc H2(Nat) = ( C30 . ( C31 + ( $1 - 1 ) ) );
assume that
L189: 1 <= C31
and
L190: C31 <= C32
and
L191: C32 <= ( len C30 );
consider C33 being FinSequence such that L192: (( len C33 ) = ( ( C32 + 1 ) -' C31 ) & (for B25 being Nat holds (B25 in ( dom C33 ) implies ( C33 . B25 ) = H2(B25)))) from FINSEQ_1:sch 2;
take D29 = C33;
L193: C32 <= ( C32 + 1 ) by XREAL_1:29;
L194: C31 <= ( C32 + 1 ) by L193 , L190 , XXREAL_0:2;
L195: ( C31 - C31 ) <= ( ( C32 + 1 ) - C31 ) by L194 , XREAL_1:9;
L196: ( ( len D29 ) + C31 ) = ( ( ( C32 + 1 ) - C31 ) + C31 ) by L195 , L192 , XREAL_0:def 2;
thus L197: ( ( len D29 ) + C31 ) = ( C32 + 1 ) by L196;
let C34 being Nat;
assume L198: C34 < ( len D29 );
L199: ( C34 + 1 ) <= ( len D29 ) by L198 , NAT_1:13;
L200: ( ( 0 ) + 1 ) <= ( C34 + 1 ) by XREAL_1:7;
L201: ( C34 + 1 ) in ( dom D29 ) by L200 , L199 , FINSEQ_3:25;
thus L202: ( D29 . ( C34 + 1 ) ) = ( C30 . ( C31 + ( ( C34 + 1 ) - 1 ) ) ) by L201 , L192
.= ( C30 . ( C31 + C34 ) );
end;
thus L203: thesis;
end;
uniqueness
proof
let C35 , C36 being FinSequence;
thus L204:now
assume that
L205: 1 <= C31
and
L206: C31 <= C32
and
L207: C32 <= ( len C30 );
assume that
L208: ( ( len C35 ) + C31 ) = ( C32 + 1 )
and
L209: (for B26 being Nat holds (B26 < ( len C35 ) implies ( C35 . ( B26 + 1 ) ) = ( C30 . ( C31 + B26 ) )));
assume that
L210: ( ( len C36 ) + C31 ) = ( C32 + 1 )
and
L211: (for B27 being Nat holds (B27 < ( len C36 ) implies ( C36 . ( B27 + 1 ) ) = ( C30 . ( C31 + B27 ) )));
L212:
now
thus L213: ( len C35 ) = ( len C35 );
thus L214: ( len C36 ) = ( len C35 ) by L208 , L210;
let C37 being Nat;
assume L215: C37 in ( dom C35 );
L216: ( dom C35 ) = ( Seg ( len C35 ) ) by FINSEQ_1:def 3;
L217: C37 <= ( len C35 ) by L216 , L215 , FINSEQ_1:1;
L218: ( ( 0 ) + 1 ) <= C37 by L216 , L215 , FINSEQ_1:1;
consider R10 being (Element of ( NAT )) such that L219: ( 0 ) <= R10 and L220: R10 < ( len C35 ) and L221: C37 = ( R10 + 1 ) by L218 , L217 , L1;
thus L222: ( C35 . C37 ) = ( C30 . ( C31 + R10 ) ) by L209 , L220 , L221
.= ( C36 . C37 ) by L208 , L210 , L211 , L220 , L221;
end;
thus L223: C35 = C36 by L212 , FINSEQ_2:9;
end;
thus L224: thesis;
end;
end;
L226: (for B28 being FinSequence holds (for B29 , B30 being (Element of ( NAT )) holds ((1 <= B29 & B29 <= ( B30 + 1 ) & B30 <= ( len B28 )) implies (( ( len ( (B29 , B30) -cut B28 ) ) + B29 ) = ( B30 + 1 ) & (for B31 being (Element of ( NAT )) holds (B31 < ( len ( (B29 , B30) -cut B28 ) ) implies ( ( (B29 , B30) -cut B28 ) . ( B31 + 1 ) ) = ( B28 . ( B29 + B31 ) )))))))
proof
let C38 being FinSequence;
let C39 , C40 being (Element of ( NAT ));
assume that
L227: 1 <= C39
and
L228: C39 <= ( C40 + 1 )
and
L229: C40 <= ( len C38 );
L230: (C39 = ( C40 + 1 ) or C39 < ( C40 + 1 )) by L228 , XXREAL_0:1;
per cases  by L230 , NAT_1:13;
suppose L231: C39 = ( C40 + 1 );

L232: C40 < C39 by L231 , XREAL_1:29;
L233: ( (C39 , C40) -cut C38 ) = ( {} ) by L232 , L187;
thus L234: ( ( len ( (C39 , C40) -cut C38 ) ) + C39 ) = ( C40 + 1 ) by L233 , L231 , CARD_1:27;
thus L235: thesis by L232 , L187 , CARD_1:27;
end;
suppose L236: C39 <= C40;

thus L237: thesis by L236 , L227 , L229 , L187;
end;
end;
theorem
L239: (for R1 being FinSequence holds (for R12 being (Element of ( NAT )) holds ((1 <= R12 & R12 <= ( len R1 )) implies ( (R12 , R12) -cut R1 ) = <* ( R1 . R12 ) *>)))
proof
let R1 being FinSequence;
let R12 being (Element of ( NAT ));
assume that
L240: 1 <= R12
and
L241: R12 <= ( len R1 );
set D30 = ( (R12 , R12) -cut R1 );
L242: ( ( len D30 ) + R12 ) = ( R12 + 1 ) by L240 , L241 , L187;
L243: ( D30 . ( ( 0 ) + 1 ) ) = ( R1 . ( R12 + ( 0 ) ) ) by L242 , L240 , L241 , L187
.= ( R1 . R12 );
thus L244: thesis by L243 , L242 , FINSEQ_1:40;
end;
theorem
L245: (for R1 being FinSequence holds ( (1 , ( len R1 )) -cut R1 ) = R1)
proof
let R1 being FinSequence;
set D31 = ( (1 , ( len R1 )) -cut R1 );
L246:
now
L247: 1 <= ( ( len R1 ) + 1 ) by NAT_1:11;
L248: ( ( len D31 ) + 1 ) = ( ( len R1 ) + 1 ) by L247 , L226;
thus L249: ( len D31 ) = ( len R1 ) by L248;
thus L250: ( len R1 ) = ( len R1 );
let C41 being Nat;
assume L251: C41 in ( dom D31 );
L252: ( dom D31 ) = ( Seg ( len R1 ) ) by L248 , FINSEQ_1:def 3;
L253: C41 <= ( len R1 ) by L252 , L251 , FINSEQ_1:1;
L254: ( ( 0 ) + 1 ) <= C41 by L252 , L251 , FINSEQ_1:1;
L255: (ex B32 being (Element of ( NAT )) st (( 0 ) <= B32 & B32 < ( len D31 ) & C41 = ( B32 + 1 ))) by L254 , L248 , L253 , L1;
thus L256: ( D31 . C41 ) = ( R1 . C41 ) by L255 , L247 , L226;
end;
thus L257: thesis by L246 , FINSEQ_2:9;
end;
theorem
L258: (for R1 being FinSequence holds (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds (for R14 being (Element of ( NAT )) holds ((R12 <= R13 & R13 <= R14 & R14 <= ( len R1 )) implies ( ( (( R12 + 1 ) , R13) -cut R1 ) ^ ( (( R13 + 1 ) , R14) -cut R1 ) ) = ( (( R12 + 1 ) , R14) -cut R1 ))))))
proof
let R1 being FinSequence;
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
let R14 being (Element of ( NAT ));
assume that
L259: R12 <= R13
and
L260: R13 <= R14
and
L261: R14 <= ( len R1 );
set D32 = ( (( R12 + 1 ) , R14) -cut R1 );
set D33 = ( (( R13 + 1 ) , R14) -cut R1 );
set D34 = ( (( R12 + 1 ) , R13) -cut R1 );
set D35 = ( D34 ^ D33 );
L262:
now
reconsider D36 = R13 as Integer;
reconsider D37 = R12 as Integer;
thus L263: ( len D35 ) = ( len D35 );
L264: ( dom D35 ) = ( Seg ( len D35 ) ) by FINSEQ_1:def 3;
reconsider D38 = ( D36 - D37 ) as (Element of ( NAT )) by L259 , INT_1:5;
L265: 1 <= ( R12 + 1 ) by NAT_1:11;
L266: R12 <= R14 by L259 , L260 , XXREAL_0:2;
L267: ( R12 + 1 ) <= ( R14 + 1 ) by L266 , XREAL_1:6;
L268: ( R12 + 1 ) <= ( R13 + 1 ) by L259 , XREAL_1:6;
L269: ( R13 + 1 ) <= ( R14 + 1 ) by L260 , XREAL_1:6;
L270: ( R12 + 1 ) <= ( R14 + 1 ) by L269 , L268 , XXREAL_0:2;
L271: ( ( len D32 ) + ( R12 + 1 ) ) = ( R14 + 1 ) by L270 , L261 , L265 , L226;
L272: R13 <= ( len R1 ) by L260 , L261 , XXREAL_0:2;
L273: ( ( len D34 ) + ( R12 + 1 ) ) = ( R13 + 1 ) by L272 , L265 , L268 , L226;
L274: 1 <= ( R13 + 1 ) by NAT_1:11;
L275: ( ( len D33 ) + ( R13 + 1 ) ) = ( R14 + 1 ) by L274 , L261 , L269 , L226;
L276: ( len D35 ) = ( ( R13 - R12 ) + ( R14 + ( - R13 ) ) ) by L275 , L273 , FINSEQ_1:22
.= ( R14 - R12 );
thus L277: ( len D32 ) = ( len D35 ) by L276 , L271;
let C42 being Nat;
assume L278: C42 in ( dom D35 );
L279: 1 <= C42 by L278 , L264 , FINSEQ_1:1;
L280: C42 <= ( len D35 ) by L264 , L278 , FINSEQ_1:1;
per cases  by NAT_1:13;
suppose L281: C42 <= D38;

L282: ( ( 0 ) + 1 ) = 1;
consider C43 being (Element of ( NAT )) such that L283: ( 0 ) <= C43 and L284: C43 < D38 and L285: C42 = ( C43 + 1 ) by L282 , L279 , L281 , L1;
L286: D38 <= ( R14 - R12 ) by L260 , XREAL_1:9;
L287: C43 < ( len D32 ) by L286 , L271 , L284 , XXREAL_0:2;
L288: C42 in ( dom D34 ) by L273 , L279 , L281 , FINSEQ_3:25;
thus L289: ( D35 . C42 ) = ( D34 . C42 ) by L288 , FINSEQ_1:def 7
.= ( R1 . ( ( R12 + 1 ) + C43 ) ) by L265 , L268 , L272 , L273 , L284 , L285 , L226
.= ( D32 . C42 ) by L261 , L265 , L267 , L285 , L287 , L226;
end;
suppose L290: ( D38 + 1 ) <= C42;

consider R10 being (Element of ( NAT )) such that L291: D38 <= R10 and L292: R10 < ( len D35 ) and L293: C42 = ( R10 + 1 ) by L290 , L280 , L1;
reconsider D39 = R10 as Integer;
reconsider D40 = ( D39 - D38 ) as (Element of ( NAT )) by L291 , INT_1:5;
L294: 1 <= ( D40 + 1 ) by NAT_1:11;
L295: ( len D35 ) = ( ( len D33 ) + ( len D34 ) ) by FINSEQ_1:22;
L296: ( len D33 ) = ( ( len D35 ) - ( len D34 ) ) by L295;
L297: D40 < ( len D33 ) by L296 , L273 , L292 , XREAL_1:9;
L298: ( D40 + 1 ) <= ( len D33 ) by L297 , NAT_1:13;
L299: ( D40 + 1 ) in ( dom D33 ) by L298 , L294 , FINSEQ_3:25;
L300: ( ( R13 + 1 ) + D40 ) = ( ( R12 + 1 ) + R10 );
L301: C42 = ( D38 + ( D40 + 1 ) ) by L293;
thus L302: ( D35 . C42 ) = ( D33 . ( D40 + 1 ) ) by L301 , L273 , L299 , FINSEQ_1:def 7
.= ( R1 . ( ( R13 + 1 ) + D40 ) ) by L261 , L274 , L269 , L297 , L226
.= ( D32 . C42 ) by L261 , L265 , L267 , L276 , L271 , L292 , L293 , L300 , L226;
end;
end;
thus L304: thesis by L262 , FINSEQ_2:9;
end;
theorem
L305: (for R1 being FinSequence holds (for R12 being (Element of ( NAT )) holds (R12 <= ( len R1 ) implies ( ( (1 , R12) -cut R1 ) ^ ( (( R12 + 1 ) , ( len R1 )) -cut R1 ) ) = R1)))
proof
let R1 being FinSequence;
let R12 being (Element of ( NAT ));
set D41 = ( (1 , R12) -cut R1 );
set D42 = ( (( R12 + 1 ) , ( len R1 )) -cut R1 );
L306: ( ( 0 ) + 1 ) = 1;
assume L307: R12 <= ( len R1 );
thus L308: ( D41 ^ D42 ) = ( (1 , ( len R1 )) -cut R1 ) by L307 , L306 , L258
.= R1 by L245;
end;
theorem
L309: (for R1 being FinSequence holds (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds ((R12 <= R13 & R13 <= ( len R1 )) implies ( ( ( (1 , R12) -cut R1 ) ^ ( (( R12 + 1 ) , R13) -cut R1 ) ) ^ ( (( R13 + 1 ) , ( len R1 )) -cut R1 ) ) = R1))))
proof
let R1 being FinSequence;
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
assume that
L310: R12 <= R13
and
L311: R13 <= ( len R1 );
set D43 = ( (( R13 + 1 ) , ( len R1 )) -cut R1 );
set D44 = ( (( R12 + 1 ) , R13) -cut R1 );
set D45 = ( (1 , R12) -cut R1 );
L312: ( ( 0 ) + 1 ) = 1;
thus L313: ( ( D45 ^ D44 ) ^ D43 ) = ( ( (1 , R13) -cut R1 ) ^ D43 ) by L312 , L310 , L311 , L258
.= ( (1 , ( len R1 )) -cut R1 ) by L311 , L312 , L258
.= R1 by L245;
end;
theorem
L314: (for R1 being FinSequence holds (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds ( rng ( (R12 , R13) -cut R1 ) ) c= ( rng R1 ))))
proof
let R1 being FinSequence;
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
set D46 = ( (R12 , R13) -cut R1 );
L315:
now
assume that
L316: 1 <= R12
and
L317: R12 <= R13
and
L318: R13 <= ( len R1 );
L319: R13 <= ( R13 + 1 ) by NAT_1:11;
L320: R12 <= ( R13 + 1 ) by L319 , L317 , XXREAL_0:2;
thus L321: thesis
proof
let C44 being set;
assume L322: C44 in ( rng D46 );
consider C45 being set such that L323: C45 in ( dom D46 ) and L324: C44 = ( D46 . C45 ) by L322 , FUNCT_1:def 3;
reconsider D47 = C45 as (Element of ( NAT )) by L323;
L325: D47 <= ( len D46 ) by L323 , FINSEQ_3:25;
L326: ( ( 0 ) + 1 ) <= D47 by L323 , FINSEQ_3:25;
consider R8 being (Element of ( NAT )) such that L327: ( 0 ) <= R8 and L328: R8 < ( len D46 ) and L329: D47 = ( R8 + 1 ) by L326 , L325 , L1;
L330: ( R12 + R8 ) < ( ( len D46 ) + R12 ) by L328 , XREAL_1:6;
L331: ( R12 + R8 ) < ( R13 + 1 ) by L330 , L316 , L318 , L320 , L226;
L332: ( R12 + R8 ) <= R13 by L331 , NAT_1:13;
L333: ( R12 + R8 ) <= ( len R1 ) by L332 , L318 , XXREAL_0:2;
L334: 1 <= ( R12 + R8 ) by L316 , NAT_1:12;
L335: ( R12 + R8 ) in ( dom R1 ) by L334 , L333 , FINSEQ_3:25;
L336: ( D46 . D47 ) = ( R1 . ( R12 + R8 ) ) by L316 , L318 , L320 , L328 , L329 , L226;
thus L337: thesis by L336 , L324 , L335 , FUNCT_1:def 3;
end;

end;
L322:
now
assume L323: (not (1 <= R12 & R12 <= R13 & R13 <= ( len R1 )));
L324: D46 = ( {} ) by L323 , L187;
L325: ( rng D46 ) = ( {} ) by L324;
thus L326: thesis by L325 , XBOOLE_1:2;
end;
thus L327: thesis by L322 , L315;
end;
definition
let C46 being set;
let C47 being (FinSequence of C46);
let C48 , C49 being Nat;
redefine func (C48 , C49) -cut C47 -> (FinSequence of C46);

coherence
proof
L328: ( rng C47 ) c= C46 by FINSEQ_1:def 4;
L329: C49 is (Element of ( NAT )) by ORDINAL1:def 12;
L330: C48 is (Element of ( NAT )) by ORDINAL1:def 12;
L331: ( rng ( (C48 , C49) -cut C47 ) ) c= ( rng C47 ) by L330 , L329 , L314;
L332: ( rng ( (C48 , C49) -cut C47 ) ) c= C46 by L331 , L328 , XBOOLE_1:1;
thus L333: thesis by L332 , FINSEQ_1:def 4;
end;
end;
theorem
L335: (for R1 being FinSequence holds (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds ((1 <= R12 & R12 <= R13 & R13 <= ( len R1 )) implies (( ( (R12 , R13) -cut R1 ) . 1 ) = ( R1 . R12 ) & ( ( (R12 , R13) -cut R1 ) . ( len ( (R12 , R13) -cut R1 ) ) ) = ( R1 . R13 ))))))
proof
let R1 being FinSequence;
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
set D48 = ( (R12 , R13) -cut R1 );
assume that
L336: 1 <= R12
and
L337: R12 <= R13
and
L338: R13 <= ( len R1 );
L339: R12 <= ( R13 + 1 ) by L337 , NAT_1:12;
L340: ( ( len D48 ) + R12 ) = ( R13 + 1 ) by L339 , L336 , L338 , L226;
L341:
now
assume L342: ( len D48 ) = ( 0 );
L343: ( R13 + 1 ) <= ( R13 + ( 0 ) ) by L342 , L337 , L340;
thus L344: contradiction by L343 , XREAL_1:6;
end;
L345: ( ( 0 ) + 1 ) <= ( len D48 ) by L341 , NAT_1:13;
consider C50 being (Element of ( NAT )) such that L346: ( 0 ) <= C50 and L347: C50 < ( len D48 ) and L348: ( len D48 ) = ( C50 + 1 ) by L345 , L1;
L349: ( ( 0 ) + 1 ) = 1;
thus L350: ( D48 . 1 ) = ( R1 . ( R12 + ( 0 ) ) ) by L349 , L336 , L338 , L339 , L341 , L226
.= ( R1 . R12 );
L351: ( R12 + C50 ) = R13 by L340 , L348;
thus L352: thesis by L351 , L336 , L338 , L339 , L347 , L348 , L226;
end;
begin
definition
let C51 , C52 being FinSequence;
func C51 ^' C52 -> FinSequence equals 
( C51 ^ ( (2 , ( len C52 )) -cut C52 ) );
correctness;
end;
theorem
L354: (for R1 being FinSequence holds (for R2 being FinSequence holds (R2 <> ( {} ) implies ( ( len ( R1 ^' R2 ) ) + 1 ) = ( ( len R1 ) + ( len R2 ) ))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
set D49 = ( R1 ^' R2 );
set D50 = ( (2 , ( len R2 )) -cut R2 );
assume L355: R2 <> ( {} );
L356: ( ( 0 ) + 1 ) <= ( len R2 ) by L355 , NAT_1:13;
L357: ( 1 + 1 ) <= ( ( len R2 ) + 1 ) by L356 , XREAL_1:7;
L358: ( ( len D50 ) + ( 1 + 1 ) ) = ( ( len R2 ) + 1 ) by L357 , L226;
thus L359: ( ( len D49 ) + 1 ) = ( ( ( len R1 ) + ( len D50 ) ) + 1 ) by FINSEQ_1:22
.= ( ( len R1 ) + ( len R2 ) ) by L358;
end;
theorem
L360: (for R1 being FinSequence holds (for R2 being FinSequence holds (for R10 being (Element of ( NAT )) holds ((1 <= R10 & R10 <= ( len R1 )) implies ( ( R1 ^' R2 ) . R10 ) = ( R1 . R10 )))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
let R10 being (Element of ( NAT ));
assume that
L361: 1 <= R10
and
L362: R10 <= ( len R1 );
L363: R10 in ( dom R1 ) by L361 , L362 , FINSEQ_3:25;
thus L364: thesis by L363 , FINSEQ_1:def 7;
end;
theorem
L365: (for R1 being FinSequence holds (for R2 being FinSequence holds (for R10 being (Element of ( NAT )) holds ((1 <= R10 & R10 < ( len R2 )) implies ( ( R1 ^' R2 ) . ( ( len R1 ) + R10 ) ) = ( R2 . ( R10 + 1 ) )))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
let R10 being (Element of ( NAT ));
set D51 = ( (2 , ( len R2 )) -cut R2 );
assume that
L366: 1 <= R10
and
L367: R10 < ( len R2 );
per cases ;
suppose L368: R2 = ( {} );

thus L369: thesis by L368 , L367;
end;
suppose L370: R2 <> ( {} );

L371: ( ( 0 ) + 1 ) <= ( len R2 ) by L370 , NAT_1:13;
L372: ( 1 + 1 ) <= ( ( len R2 ) + 1 ) by L371 , XREAL_1:7;
L373: ( ( len D51 ) + ( 1 + 1 ) ) = ( ( len R2 ) + 1 ) by L372 , L226;
L374: ( ( ( len D51 ) + 1 ) + 1 ) = ( ( len R2 ) + 1 ) by L373;
L375: R10 <= ( len D51 ) by L374 , L367 , NAT_1:13;
L376: ( ( 0 ) + 1 ) <= R10 by L366;
consider C53 being (Element of ( NAT )) such that L377: ( 0 ) <= C53 and L378: C53 < ( len D51 ) and L379: R10 = ( C53 + 1 ) by L376 , L375 , L1;
L380: R10 in ( dom D51 ) by L366 , L375 , FINSEQ_3:25;
thus L381: ( ( R1 ^' R2 ) . ( ( len R1 ) + R10 ) ) = ( D51 . R10 ) by L380 , FINSEQ_1:def 7
.= ( R2 . ( ( 1 + 1 ) + C53 ) ) by L372 , L378 , L379 , L226
.= ( R2 . ( R10 + 1 ) ) by L379;
end;
end;
theorem
L383: (for R1 being FinSequence holds (for R2 being FinSequence holds (1 < ( len R2 ) implies ( ( R1 ^' R2 ) . ( len ( R1 ^' R2 ) ) ) = ( R2 . ( len R2 ) ))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
set D52 = ( R1 ^' R2 );
set D53 = ( (2 , ( len R2 )) -cut R2 );
assume L384: 1 < ( len R2 );
L385: ( 1 + 1 ) <= ( len R2 ) by L384 , NAT_1:13;
L386: ( ( 1 + 1 ) - 1 ) <= ( ( len R2 ) - 1 ) by L385 , XREAL_1:9;
L387: R2 <> ( {} ) by L384;
L388: ( ( ( len D52 ) + 1 ) - 1 ) = ( ( ( len R1 ) + ( len R2 ) ) - 1 ) by L387 , L354;
L389: ( len D52 ) = ( ( len R1 ) + ( ( len R2 ) - 1 ) ) by L388;
L390: ( 1 + 1 ) <= ( ( len R2 ) + 1 ) by L384 , XREAL_1:7;
L391: ( ( len D53 ) + ( 1 + 1 ) ) = ( ( len R2 ) + 1 ) by L390 , L226;
L392: ( ( ( len D53 ) + 1 ) + 1 ) = ( ( len R2 ) + 1 ) by L391;
L393: ( len D53 ) < ( len R2 ) by L392 , NAT_1:13;
thus L394: thesis by L393 , L389 , L392 , L386 , L365;
end;
theorem
L395: (for R1 being FinSequence holds (for R2 being FinSequence holds ( rng ( R1 ^' R2 ) ) c= ( ( rng R1 ) \/ ( rng R2 ) )))
proof
let R1 being FinSequence;
let R2 being FinSequence;
set D54 = ( R1 ^' R2 );
set D55 = ( (2 , ( len R2 )) -cut R2 );
let C54 being set;
assume L396: C54 in ( rng D54 );
L397: C54 in ( ( rng R1 ) \/ ( rng D55 ) ) by L396 , FINSEQ_1:31;
L398: (C54 in ( rng R1 ) or C54 in ( rng D55 )) by L397 , XBOOLE_0:def 3;
L399: ( rng D55 ) c= ( rng R2 ) by L314;
thus L400: thesis by L399 , L398 , XBOOLE_0:def 3;
end;
definition
let C55 being set;
let C56 , C57 being (FinSequence of C55);
redefine func C56 ^' C57 -> (FinSequence of C55);

coherence
proof
L401: ( rng ( C56 ^' C57 ) ) c= ( ( rng C56 ) \/ ( rng C57 ) ) by L395;
L402: ( rng C57 ) c= C55 by FINSEQ_1:def 4;
L403: ( rng C56 ) c= C55 by FINSEQ_1:def 4;
L404: ( ( rng C56 ) \/ ( rng C57 ) ) c= C55 by L403 , L402 , XBOOLE_1:8;
L405: ( rng ( C56 ^' C57 ) ) c= C55 by L404 , L401 , XBOOLE_1:1;
thus L406: thesis by L405 , FINSEQ_1:def 4;
end;
end;
theorem
L408: (for R1 being FinSequence holds (for R2 being FinSequence holds ((R1 <> ( {} ) & R2 <> ( {} ) & ( R1 . ( len R1 ) ) = ( R2 . 1 )) implies ( rng ( R1 ^' R2 ) ) = ( ( rng R1 ) \/ ( rng R2 ) ))))
proof
let R1 being FinSequence;
let R2 being FinSequence;
set D56 = ( R1 ^' R2 );
set D57 = ( (2 , ( len R2 )) -cut R2 );
assume that
L409: R1 <> ( {} )
and
L410: R2 <> ( {} )
and
L411: ( R1 . ( len R1 ) ) = ( R2 . 1 );
L412: ( ( 0 ) + 1 ) <= ( len R2 ) by L410 , NAT_1:13;
L413: ( 1 + 1 ) <= ( ( len R2 ) + 1 ) by L412 , XREAL_1:7;
L414: ( ( len D57 ) + ( 1 + 1 ) ) = ( ( len R2 ) + 1 ) by L413 , L226;
L415: ( ( ( len D57 ) + 1 ) + 1 ) = ( ( len R2 ) + 1 ) by L414;
L416:
now
let C58 being set;
thus L417:now
assume L418: C58 in ( rng D56 );
L419: C58 in ( ( rng R1 ) \/ ( rng D57 ) ) by L418 , FINSEQ_1:31;
L420: (C58 in ( rng R1 ) or C58 in ( rng D57 )) by L419 , XBOOLE_0:def 3;
L421: ( rng D57 ) c= ( rng R2 ) by L314;
thus L422: C58 in ( ( rng R1 ) \/ ( rng R2 ) ) by L421 , L420 , XBOOLE_0:def 3;
end;
assume L423: C58 in ( ( rng R1 ) \/ ( rng R2 ) );
L424: (C58 in ( rng R1 ) or C58 in ( rng R2 )) by L423 , XBOOLE_0:def 3;
assume L425: (not C58 in ( rng D56 ));
L426: (not C58 in ( ( rng R1 ) \/ ( rng D57 ) )) by L425 , FINSEQ_1:31;
consider C59 being set such that L427: C59 in ( dom R2 ) and L428: C58 = ( R2 . C59 ) by L426 , L424 , FUNCT_1:def 3 , XBOOLE_0:def 3;
L429: (not C58 in ( rng R1 )) by L426 , XBOOLE_0:def 3;
reconsider D58 = C59 as (Element of ( NAT )) by L427;
L430: 1 <= D58 by L427 , FINSEQ_3:25;
L431: D58 <= ( len R2 ) by L427 , FINSEQ_3:25;
L432: (not C58 in ( rng D57 )) by L426 , XBOOLE_0:def 3;
per cases  by L430 , XXREAL_0:1;
suppose L433: D58 = 1;

L434: ( ( 0 ) + 1 ) <= ( len R1 ) by L409 , NAT_1:13;
L435: ( len R1 ) in ( dom R1 ) by L434 , FINSEQ_3:25;
thus L436: contradiction by L435 , L411 , L429 , L428 , L433 , FUNCT_1:def 3;
end;
suppose L437: 1 < D58;

L438: ( 1 + 1 ) <= D58 by L437 , NAT_1:13;
consider R8 being (Element of ( NAT )) such that L439: 1 <= R8 and L440: R8 < ( len R2 ) and L441: D58 = ( R8 + 1 ) by L438 , L431 , L1;
L442: R8 <= ( len D57 ) by L415 , L440 , NAT_1:13;
L443: R8 in ( dom D57 ) by L442 , L439 , FINSEQ_3:25;
L444: ( ( 0 ) + 1 ) <= R8 by L439;
consider R9 being (Element of ( NAT )) such that L445: ( 0 ) <= R9 and L446: R9 < ( len D57 ) and L447: R8 = ( R9 + 1 ) by L444 , L442 , L1;
L448: ( D57 . ( R9 + 1 ) ) = ( R2 . ( ( 1 + 1 ) + R9 ) ) by L413 , L446 , L226
.= ( R2 . D58 ) by L441 , L447;
thus L449: contradiction by L448 , L432 , L428 , L447 , L443 , FUNCT_1:def 3;
end;
end;
thus L451: thesis by L416 , TARSKI:1;
end;
begin
definition
let C60 being FinSequence;
attr C60 is  TwoValued
means
:L452: ( card ( rng C60 ) ) = 2;
end;
L454:
now
set D59 = <* 1 , 2 *>;
L455: 2 > 1;
thus L456: ( len D59 ) > 1 by L455 , FINSEQ_1:44;
thus L457: 1 <> 2;
thus L458: ( rng D59 ) = ( ( rng <* 1 *> ) \/ ( rng <* 2 *> ) ) by FINSEQ_1:31
.= ( { 1 } \/ ( rng <* 2 *> ) ) by FINSEQ_1:38
.= ( { 1 } \/ { 2 } ) by FINSEQ_1:38
.= { 1 , 2 } by ENUMSET1:1;
end;
theorem
L459: (for R1 being FinSequence holds (R1 is  TwoValued iff (( len R1 ) > 1 & (ex B33 , B34 being set st (B33 <> B34 & ( rng R1 ) = { B33 , B34 })))))
proof
let R1 being FinSequence;
thus L460:now
assume L461: R1 is  TwoValued;
L462: ( card ( rng R1 ) ) = 2 by L461 , L452;
consider C61 , C62 being set such that L463: C61 <> C62 and L464: ( rng R1 ) = { C61 , C62 } by L462 , CARD_2:60;
thus L465: ( len R1 ) > 1
proof
set D60 = ( len R1 );
assume L466: ( len R1 ) <= 1;
per cases  by L466 , NAT_1:25;
suppose L467: D60 = ( 0 );

L468: R1 = ( {} ) by L467;
thus L469: contradiction by L468 , L464;
end;
suppose L470: D60 = 1;

L471: 1 in ( dom R1 ) by L470 , FINSEQ_3:25;
consider C63 being set such that L472: [ 1 , C63 ] in R1 by L471 , XTUPLE_0:def 12;
L473: C63 = ( R1 . 1 ) by L472 , FUNCT_1:1;
L474: R1 = <* C63 *> by L473 , L470 , FINSEQ_1:40;
L475: ( rng R1 ) = { C63 } by L474 , FINSEQ_1:39;
L476: C63 = C61 by L475 , L464 , ZFMISC_1:4;
thus L477: contradiction by L476 , L463 , L464 , L475 , ZFMISC_1:4;
end;
end;

thus L479: (ex B35 , B36 being set st (B35 <> B36 & ( rng R1 ) = { B35 , B36 })) by L463 , L464;
end;
assume L480: ( len R1 ) > 1;
given C64 , C65 being set such that
L481: C64 <> C65
and
L482: ( rng R1 ) = { C64 , C65 };

L483: ( card ( rng R1 ) ) = 2 by L481 , L482 , CARD_2:57;
thus L484: thesis by L483 , L452;
end;
L485: <* 1 , 2 *> is  TwoValued by L459 , L454;
L486:
now
let C66 being Nat;
set D61 = <* 1 , 2 *>;
assume that
L487: 1 <= C66
and
L488: ( C66 + 1 ) <= ( len D61 );
L489: ( C66 + 1 ) <= ( 1 + 1 ) by L488 , FINSEQ_1:44;
L490: C66 <= 1 by L489 , XREAL_1:6;
L491: C66 = 1 by L490 , L487 , XXREAL_0:1;
L492: ( D61 . C66 ) = 1 by L491 , FINSEQ_1:44;
thus L493: ( D61 . C66 ) <> ( D61 . ( C66 + 1 ) ) by L492 , L491 , FINSEQ_1:44;
end;
definition
let C67 being FinSequence;
attr C67 is  Alternating
means
:L494: (for B37 being Nat holds ((1 <= B37 & ( B37 + 1 ) <= ( len C67 )) implies ( C67 . B37 ) <> ( C67 . ( B37 + 1 ) )));
end;
L496: <* 1 , 2 *> is  Alternating by L494 , L486;
registration
cluster  TwoValued  Alternating for FinSequence;
existence by L485 , L496;
end;
theorem
L498: (for R16 being  TwoValued  Alternating FinSequence holds (for R17 being  TwoValued  Alternating FinSequence holds ((( len R16 ) = ( len R17 ) & ( rng R16 ) = ( rng R17 ) & ( R16 . 1 ) = ( R17 . 1 )) implies R16 = R17)))
proof
let R16 being  TwoValued  Alternating FinSequence;
let R17 being  TwoValued  Alternating FinSequence;
assume that
L499: ( len R16 ) = ( len R17 )
and
L500: ( rng R16 ) = ( rng R17 )
and
L501: ( R16 . 1 ) = ( R17 . 1 );
defpred S5[ Nat ] means ((1 <= $1 & $1 <= ( len R16 )) implies ( R16 . $1 ) = ( R17 . $1 ));
L502: (for B38 being Nat holds (S5[ B38 ] implies S5[ ( B38 + 1 ) ]))
proof
let C68 being Nat;
assume that
L503: ((1 <= C68 & C68 <= ( len R16 )) implies ( R16 . C68 ) = ( R17 . C68 ));
L504: (( 0 ) = C68 or (( 0 ) < C68 & ( ( 0 ) + 1 ) = 1));
assume that
L505: 1 <= ( C68 + 1 )
and
L506: ( C68 + 1 ) <= ( len R16 );
L507: ( C68 + 1 ) in ( dom R16 ) by L505 , L506 , FINSEQ_3:25;
per cases  by L504 , NAT_1:13;
suppose L508: ( 0 ) = C68;

thus L509: thesis by L508 , L501;
end;
suppose L510: 1 <= C68;

L511: ( dom R17 ) = ( Seg ( len R17 ) ) by FINSEQ_1:def 3;
consider C69 , C70 being set such that L512: C69 <> C70 and L513: ( rng R16 ) = { C69 , C70 } by L459;
L514: ( R16 . ( C68 + 1 ) ) in ( rng R16 ) by L507 , FUNCT_1:def 3;
L515: (( R16 . ( C68 + 1 ) ) = C69 or ( R16 . ( C68 + 1 ) ) = C70) by L514 , L513 , TARSKI:def 2;
L516: ( dom R16 ) = ( Seg ( len R16 ) ) by FINSEQ_1:def 3;
L517: ( R17 . ( C68 + 1 ) ) in ( rng R17 ) by L516 , L499 , L507 , L511 , FUNCT_1:def 3;
L518: (( R17 . ( C68 + 1 ) ) = C69 or ( R17 . ( C68 + 1 ) ) = C70) by L517 , L500 , L513 , TARSKI:def 2;
L519: C68 <= ( len R16 ) by L506 , NAT_1:13;
L520: C68 in ( dom R16 ) by L519 , L510 , FINSEQ_3:25;
L521: ( R16 . C68 ) in ( rng R16 ) by L520 , FUNCT_1:def 3;
L522: (( R16 . C68 ) = C69 or ( R16 . C68 ) = C70) by L521 , L513 , TARSKI:def 2;
thus L523: thesis by L522 , L499 , L503 , L506 , L510 , L515 , L518 , L494 , NAT_1:13;
end;
end;
L525: S5[ ( 0 ) ];
L526: (for B39 being Nat holds S5[ B39 ]) from NAT_1:sch 2(L525 , L502);
thus L527: thesis by L526 , L499 , FINSEQ_1:14;
end;
theorem
L528: (for R16 being  TwoValued  Alternating FinSequence holds (for R17 being  TwoValued  Alternating FinSequence holds ((R16 <> R17 & ( len R16 ) = ( len R17 ) & ( rng R16 ) = ( rng R17 )) implies (for R8 being (Element of ( NAT )) holds ((1 <= R8 & R8 <= ( len R16 )) implies ( R16 . R8 ) <> ( R17 . R8 ))))))
proof
let R16 being  TwoValued  Alternating FinSequence;
let R17 being  TwoValued  Alternating FinSequence;
assume that
L529: R16 <> R17
and
L530: ( len R16 ) = ( len R17 )
and
L531: ( rng R16 ) = ( rng R17 );
defpred S6[ (Element of ( NAT )) ] means ((1 <= $1 & $1 <= ( len R16 )) implies ( R16 . $1 ) <> ( R17 . $1 ));
L532: (for B40 being (Element of ( NAT )) holds (S6[ B40 ] implies S6[ ( B40 + 1 ) ]))
proof
let C71 being (Element of ( NAT ));
assume that
L533: ((1 <= C71 & C71 <= ( len R16 )) implies ( R16 . C71 ) <> ( R17 . C71 ));
L534: (( 0 ) = C71 or (( 0 ) < C71 & ( ( 0 ) + 1 ) = 1));
assume that
L535: 1 <= ( C71 + 1 )
and
L536: ( C71 + 1 ) <= ( len R16 );
L537: ( C71 + 1 ) in ( dom R16 ) by L535 , L536 , FINSEQ_3:25;
per cases  by L534 , NAT_1:13;
suppose L538: ( 0 ) = C71;

thus L539: thesis by L538 , L529 , L530 , L531 , L498;
end;
suppose L540: 1 <= C71;

L541: C71 <= ( len R16 ) by L536 , NAT_1:13;
L542: C71 in ( dom R16 ) by L541 , L540 , FINSEQ_3:25;
L543: ( dom R17 ) = ( Seg ( len R17 ) ) by FINSEQ_1:def 3;
consider C72 , C73 being set such that L544: C72 <> C73 and L545: ( rng R16 ) = { C72 , C73 } by L459;
L546: ( R16 . ( C71 + 1 ) ) in ( rng R16 ) by L537 , FUNCT_1:def 3;
L547: (( R16 . ( C71 + 1 ) ) = C72 or ( R16 . ( C71 + 1 ) ) = C73) by L546 , L545 , TARSKI:def 2;
L548: ( dom R16 ) = ( Seg ( len R16 ) ) by FINSEQ_1:def 3;
L549: ( R17 . C71 ) in ( rng R17 ) by L548 , L530 , L542 , L543 , FUNCT_1:def 3;
L550: (( R17 . C71 ) = C72 or ( R17 . C71 ) = C73) by L549 , L531 , L545 , TARSKI:def 2;
L551: ( R16 . C71 ) in ( rng R16 ) by L542 , FUNCT_1:def 3;
L552: (( R16 . C71 ) = C72 or ( R16 . C71 ) = C73) by L551 , L545 , TARSKI:def 2;
thus L553: thesis by L552 , L530 , L533 , L536 , L540 , L550 , L547 , L494 , NAT_1:13;
end;
end;
L555: S6[ ( 0 ) ];
thus L556: (for R8 being (Element of ( NAT )) holds S6[ R8 ]) from NAT_1:sch 1(L555 , L532);
end;
theorem
L557: (for R16 being  TwoValued  Alternating FinSequence holds (for R17 being  TwoValued  Alternating FinSequence holds ((R16 <> R17 & ( len R16 ) = ( len R17 ) & ( rng R16 ) = ( rng R17 )) implies (for R15 being  TwoValued  Alternating FinSequence holds ((( len R15 ) = ( len R16 ) & ( rng R15 ) = ( rng R16 )) implies (R15 = R16 or R15 = R17))))))
proof
let R16 being  TwoValued  Alternating FinSequence;
let R17 being  TwoValued  Alternating FinSequence;
assume that
L558: R16 <> R17
and
L559: ( len R16 ) = ( len R17 )
and
L560: ( rng R16 ) = ( rng R17 );
let R15 being  TwoValued  Alternating FinSequence;
assume that
L561: ( len R15 ) = ( len R16 )
and
L562: ( rng R15 ) = ( rng R16 );
assume L563: R15 <> R16;
L564:
now
let C74 being Nat;
assume that
L565: 1 <= C74
and
L566: C74 <= ( len R15 );
consider C75 , C76 being set such that L567: C75 <> C76 and L568: ( rng R15 ) = { C75 , C76 } by L459;
L569: C74 in ( dom R15 ) by L565 , L566 , FINSEQ_3:25;
L570: ( R15 . C74 ) in ( rng R15 ) by L569 , FUNCT_1:def 3;
L571: (( R15 . C74 ) = C75 or ( R15 . C74 ) = C76) by L570 , L568 , TARSKI:def 2;
L572: ( dom R15 ) = ( Seg ( len R15 ) ) by FINSEQ_1:def 3;
L573: ( dom R16 ) = ( Seg ( len R16 ) ) by FINSEQ_1:def 3;
L574: ( R16 . C74 ) in ( rng R16 ) by L573 , L561 , L569 , L572 , FUNCT_1:def 3;
L575: (( R16 . C74 ) = C75 or ( R16 . C74 ) = C76) by L574 , L562 , L568 , TARSKI:def 2;
L576: ( dom R17 ) = ( Seg ( len R17 ) ) by FINSEQ_1:def 3;
L577: ( R17 . C74 ) in ( rng R17 ) by L576 , L559 , L561 , L569 , L572 , FUNCT_1:def 3;
L578: (( R17 . C74 ) = C75 or ( R17 . C74 ) = C76) by L577 , L560 , L562 , L568 , TARSKI:def 2;
thus L579: ( R15 . C74 ) = ( R17 . C74 ) by L578 , L558 , L559 , L560 , L561 , L562 , L563 , L565 , L566 , L569 , L571 , L575 , L528;
end;
thus L580: thesis by L564 , L559 , L561 , FINSEQ_1:14;
end;
theorem
L581: (for R3 being set holds (for R4 being set holds (for R13 being (Element of ( NAT )) holds ((R3 <> R4 & R13 > 1) implies (ex R16 being  TwoValued  Alternating FinSequence st (( rng R16 ) = { R3 , R4 } & ( len R16 ) = R13 & ( R16 . 1 ) = R3))))))
proof
let R3 being set;
let R4 being set;
let R13 being (Element of ( NAT ));
deffunc H3(Nat , Nat) = ( 3 -' $2 );
assume that
L582: R3 <> R4
and
L583: R13 > 1;
set D62 = <* R3 , R4 *>;
L584: ( D62 . 1 ) = R3 by FINSEQ_1:44;
L585: ( 3 -' 2 ) = ( ( 1 + 2 ) - 2 ) by XREAL_0:def 2
.= 1;
L586: ( D62 . 2 ) = R4 by FINSEQ_1:44;
consider C77 being (Function of ( NAT ) , ( NAT )) such that L587: (( C77 . ( 0 ) ) = 2 & (for B41 being Nat holds ( C77 . ( B41 + 1 ) ) = H3(B41 , ( C77 . B41 )))) from NAT_1:sch 12;
defpred S7[ (Element of ( NAT )) ] means ((( C77 . $1 ) = 1 or ( C77 . $1 ) = 2) & ( C77 . $1 ) <> ( C77 . ( $1 + 1 ) ));
L588: ( 3 -' 1 ) = ( ( 2 + 1 ) - 1 ) by XREAL_0:def 2
.= 2;
L589: (for B42 being (Element of ( NAT )) holds (S7[ B42 ] implies S7[ ( B42 + 1 ) ]))
proof
let C78 being (Element of ( NAT ));
assume that
L590: (( C77 . C78 ) = 1 or ( C77 . C78 ) = 2)
and
L591: ( C77 . C78 ) <> ( C77 . ( C78 + 1 ) );
thus L592: (( C77 . ( C78 + 1 ) ) = 1 or ( C77 . ( C78 + 1 ) ) = 2) by L587 , L585 , L588 , L590;
thus L593: thesis by L592 , L587 , L585 , L588;
end;
L594: S7[ ( 0 ) ] by L587 , L585;
L595: (for R8 being (Element of ( NAT )) holds S7[ R8 ]) from NAT_1:sch 1(L594 , L589);
deffunc H4(Nat) = ( D62 . ( C77 . $1 ) );
consider C79 being FinSequence such that L596: (( len C79 ) = R13 & (for B43 being Nat holds (B43 in ( dom C79 ) implies ( C79 . B43 ) = H4(B43)))) from FINSEQ_1:sch 2;
L597: ( C77 . ( ( 0 ) + 1 ) ) = 1 by L587 , L585;
L598: ( C77 . ( 1 + 1 ) ) = 2 by L597 , L587 , L588;
L599:
now
let C80 being set;
thus L600:now
assume L601: C80 in { R3 , R4 };
L602: (C80 = R3 or C80 = R4) by L601 , TARSKI:def 2;
L603: 1 in ( dom C79 ) by L583 , L596 , FINSEQ_3:25;
L604: ( C79 . 1 ) = R3 by L603 , L584 , L597 , L596;
L605: 1 in ( dom C79 ) by L583 , L596 , FINSEQ_3:25;
L606: ( 1 + 1 ) <= R13 by L583 , NAT_1:13;
L607: 2 in ( dom C79 ) by L606 , L596 , FINSEQ_3:25;
L608: ( C79 . 2 ) = R4 by L607 , L586 , L598 , L596;
thus L609: (ex B44 being set st (B44 in ( dom C79 ) & C80 = ( C79 . B44 ))) by L608 , L602 , L607 , L604 , L605;
end;
given C81 being set such that
L610: C81 in ( dom C79 )
and
L611: C80 = ( C79 . C81 );

L612: C81 in ( Seg ( len C79 ) ) by L610 , FINSEQ_1:def 3;
consider C82 being (Element of ( NAT )) such that L613: C82 = C81 and L614: 1 <= C82 and L615: C82 <= ( len C79 ) by L612;
L616: C82 in ( dom C79 ) by L614 , L615 , FINSEQ_3:25;
L617: ( C79 . C82 ) = ( D62 . ( C77 . C82 ) ) by L616 , L596;
L618: (( C77 . C82 ) = 1 or ( C77 . C82 ) = 2) by L595;
thus L619: C80 in { R3 , R4 } by L618 , L584 , L586 , L611 , L613 , L617 , TARSKI:def 2;
end;
L620: ( rng C79 ) = { R3 , R4 } by L599 , FUNCT_1:def 3;
reconsider D63 = C79 as  TwoValued FinSequence by L620 , L582 , L583 , L596 , L459;
L621:
now
let C83 being Nat;
assume that
L622: 1 <= C83
and
L623: ( C83 + 1 ) <= ( len D63 );
L624: 1 <= ( C83 + 1 ) by L622 , NAT_1:13;
L625: ( C83 + 1 ) in ( dom D63 ) by L624 , L623 , FINSEQ_3:25;
L626: ( D63 . ( C83 + 1 ) ) = ( D62 . ( C77 . ( C83 + 1 ) ) ) by L625 , L596;
L627: (( C77 . ( C83 + 1 ) ) = 1 or ( C77 . ( C83 + 1 ) ) = 2) by L595;
L628: C83 <= R13 by L596 , L623 , NAT_1:13;
L629: C83 in ( dom D63 ) by L628 , L596 , L622 , FINSEQ_3:25;
L630: ( D63 . C83 ) = ( D62 . ( C77 . C83 ) ) by L629 , L596;
thus L631: ( D63 . C83 ) <> ( D63 . ( C83 + 1 ) ) by L630 , L582 , L584 , L586 , L595 , L629 , L626 , L627;
end;
reconsider D64 = D63 as  TwoValued  Alternating FinSequence by L621 , L494;
take D64;
thus L632: ( rng D64 ) = { R3 , R4 } by L599 , FUNCT_1:def 3;
thus L633: ( len D64 ) = R13 by L596;
L634: 1 in ( dom D64 ) by L583 , L596 , FINSEQ_3:25;
thus L635: thesis by L634 , L584 , L597 , L596;
end;
begin
registration
let R3 being set;
let C84 being (FinSequence of R3);
cluster  ->  FinSubsequence-like for (Subset of C84);
coherence
proof
let C85 being (Subset of C84);
take ( len C84 );
L636: ( dom C85 ) c= ( dom C84 ) by RELAT_1:11;
thus L637: thesis by L636 , FINSEQ_1:def 3;
end;
end;
theorem
L639: (for B45 being FinSubsequence holds (for B46 , B47 , B48 , B49 , B50 being FinSequence holds ((( rng B46 ) c= ( dom B45 ) & ( rng B47 ) c= ( dom B45 ) & B48 = ( B45 * B46 ) & B49 = ( B45 * B47 ) & B50 = ( B45 * ( B46 ^ B47 ) )) implies B50 = ( B48 ^ B49 ))))
proof
let C86 being FinSubsequence;
let C87 , C88 , C89 , C90 , C91 being FinSequence;
assume that
L640: ( rng C87 ) c= ( dom C86 )
and
L641: ( rng C88 ) c= ( dom C86 )
and
L642: C89 = ( C86 * C87 )
and
L643: C90 = ( C86 * C88 )
and
L644: C91 = ( C86 * ( C87 ^ C88 ) );
L645:
now
L646: ( rng ( C87 ^ C88 ) ) = ( ( rng C87 ) \/ ( rng C88 ) ) by FINSEQ_1:31;
thus L647: ( len C91 ) = ( len ( C87 ^ C88 ) ) by L646 , L640 , L641 , L644 , FINSEQ_2:29 , XBOOLE_1:8
.= ( ( len C87 ) + ( len C88 ) ) by FINSEQ_1:22;
L648: ( dom C91 ) = ( Seg ( ( len C87 ) + ( len C88 ) ) ) by L647 , FINSEQ_1:def 3;
L649: ( dom C90 ) = ( dom C88 ) by L641 , L643 , RELAT_1:27;
L650: ( dom C89 ) = ( dom C87 ) by L640 , L642 , RELAT_1:27;
L651: ( len C89 ) = ( len C87 ) by L640 , L642 , FINSEQ_2:29;
L652: ( len C90 ) = ( len C88 ) by L641 , L643 , FINSEQ_2:29;
thus L653: ( len ( C89 ^ C90 ) ) = ( ( len C87 ) + ( len C88 ) ) by L652 , L651 , FINSEQ_1:22;
let C92 being Nat;
assume L654: C92 in ( dom C91 );
L655: 1 <= C92 by L654 , L648 , FINSEQ_1:1;
L656: C92 <= ( ( len C87 ) + ( len C88 ) ) by L648 , L654 , FINSEQ_1:1;
per cases ;
suppose L657: C92 <= ( len C87 );

L658: C92 in ( dom C87 ) by L657 , L655 , FINSEQ_3:25;
thus L659: ( C91 . C92 ) = ( C86 . ( ( C87 ^ C88 ) . C92 ) ) by L644 , L654 , FUNCT_1:12
.= ( C86 . ( C87 . C92 ) ) by L658 , FINSEQ_1:def 7
.= ( C89 . C92 ) by L642 , L658 , FUNCT_1:13
.= ( ( C89 ^ C90 ) . C92 ) by L650 , L658 , FINSEQ_1:def 7;
end;
suppose L660: ( len C87 ) < C92;

L661: ( ( len C87 ) + 1 ) <= C92 by L660 , NAT_1:13;
L662: 1 <= ( C92 - ( len C87 ) ) by L661 , XREAL_1:19;
L663: ( C92 -' ( len C87 ) ) = ( C92 - ( len C87 ) ) by L662 , XREAL_0:def 2;
reconsider D65 = ( C92 - ( len C87 ) ) as (Element of ( NAT )) by L663;
L664: C92 = ( ( len C87 ) + D65 );
L665: D65 <= ( len C88 ) by L664 , L656 , XREAL_1:6;
L666: D65 in ( dom C88 ) by L665 , L662 , FINSEQ_3:25;
thus L667: ( C91 . C92 ) = ( C86 . ( ( C87 ^ C88 ) . C92 ) ) by L644 , L654 , FUNCT_1:12
.= ( C86 . ( C88 . D65 ) ) by L664 , L666 , FINSEQ_1:def 7
.= ( C90 . D65 ) by L643 , L666 , FUNCT_1:13
.= ( ( C89 ^ C90 ) . C92 ) by L651 , L649 , L664 , L666 , FINSEQ_1:def 7;
end;
end;
thus L669: thesis by L645 , FINSEQ_2:9;
end;
theorem
L670: (for R3 being set holds (for R18 being (FinSequence of R3) holds (for R21 being (Subset of R18) holds (( dom R21 ) c= ( dom R18 ) & ( rng R21 ) c= ( rng R18 ))))) by RELAT_1:11;
theorem
L671: (for R3 being set holds (for R18 being (FinSequence of R3) holds R18 is (Subset of R18)))
proof
let R3 being set;
let R18 being (FinSequence of R3);
L672: R18 c= R18;
thus L673: thesis by L672;
end;
theorem
L674: (for R3 being set holds (for R4 being set holds (for R18 being (FinSequence of R3) holds (for R21 being (Subset of R18) holds ( R21 | R4 ) is (Subset of R18)))))
proof
let R3 being set;
let R4 being set;
let R18 being (FinSequence of R3);
let R21 being (Subset of R18);
reconsider D66 = ( R21 | R4 ) as FinSubsequence;
L675: D66 c= R21 by RELAT_1:59;
thus L676: thesis by L675 , XBOOLE_1:1;
end;
theorem
L677: (for R3 being set holds (for R18 being (FinSequence of R3) holds (for R19 being (FinSequence of R3) holds (for R20 being (FinSequence of R3) holds (for R21 being (Subset of R18) holds (for R22 being (Subset of R18) holds (for B51 being (Subset of R19) holds ((( Seq R21 ) = R19 & ( Seq B51 ) = R20 & R22 = ( R21 | ( rng ( ( Sgm ( dom R21 ) ) | ( dom B51 ) ) ) )) implies ( Seq R22 ) = R20))))))))
proof
let R3 being set;
let R18 being (FinSequence of R3);
let R19 being (FinSequence of R3);
let R20 being (FinSequence of R3);
let R21 being (Subset of R18);
let R22 being (Subset of R18);
let C93 being (Subset of R19);
assume that
L678: ( Seq R21 ) = R19
and
L679: ( Seq C93 ) = R20
and
L680: R22 = ( R21 | ( rng ( ( Sgm ( dom R21 ) ) | ( dom C93 ) ) ) );
consider C94 being Nat such that L681: ( dom R18 ) = ( Seg C94 ) by FINSEQ_1:def 2;
reconsider D67 = ( dom R22 ) as  finite set;
reconsider D68 = ( dom C93 ) as  finite set;
L682: (ex B52 being Nat st ( dom R19 ) = ( Seg B52 )) by FINSEQ_1:def 2;
L683: ( dom ( Sgm D68 ) ) = ( Seg ( card D68 ) ) by L682 , FINSEQ_3:40 , RELAT_1:11;
reconsider D69 = C94 as (Element of ( NAT )) by ORDINAL1:def 12;
L684: ( dom R21 ) c= ( Seg D69 ) by L681 , RELAT_1:11;
L685: ( rng ( Sgm ( dom R21 ) ) ) c= ( dom R21 ) by L684 , FINSEQ_1:def 13;
L686: ( dom R19 ) = ( dom ( Sgm ( dom R21 ) ) ) by L685 , L678 , RELAT_1:27;
L687: ( dom R22 ) c= ( Seg D69 ) by L681 , RELAT_1:11;
L688: ( rng ( Sgm ( dom R22 ) ) ) = ( dom R22 ) by L687 , FINSEQ_1:def 13;
L689: ( ( Sgm ( dom R21 ) ) | ( dom C93 ) ) c= ( Sgm ( dom R21 ) ) by RELAT_1:59;
L690: ( dom ( ( Sgm ( dom R21 ) ) | ( dom C93 ) ) ) c= ( dom ( Sgm ( dom R21 ) ) ) by L689 , RELAT_1:11;
L691: ( rng ( ( Sgm ( dom R21 ) ) | ( dom C93 ) ) ) c= ( rng ( Sgm ( dom R21 ) ) ) by L689 , RELAT_1:11;
L692: ( rng ( ( Sgm ( dom R21 ) ) | ( dom C93 ) ) ) c= ( dom R21 ) by L691 , L684 , FINSEQ_1:def 13;
L693: ( dom R22 ) = ( rng ( ( Sgm ( dom R21 ) ) | ( dom C93 ) ) ) by L692 , L680 , RELAT_1:62;
L694: ( dom C93 ) c= ( dom R19 ) by RELAT_1:11;
L695:
now
take D70 = ( ( Sgm ( dom R21 ) ) | ( dom C93 ) );
L696: ( dom D70 ) = ( dom C93 ) by L686 , RELAT_1:11 , RELAT_1:62;
thus L697:now
let C95 being set;
assume L698: C95 in D68;
reconsider D71 = ( D70 . C95 ) as set;
take D72 = D71;
thus L699: D72 in D67 by L693 , L696 , L698 , FUNCT_1:def 3;
thus L700: [ C95 , D72 ] in D70 by L696 , L698 , FUNCT_1:1;
end;
thus L701:now
let C96 being set;
assume L702: C96 in D67;
consider R5 being set such that L703: R5 in ( dom D70 ) and L704: C96 = ( D70 . R5 ) by L702 , L693 , FUNCT_1:def 3;
take D73 = R5;
thus L705: (D73 in D68 & [ D73 , C96 ] in D70) by L694 , L686 , L703 , L704 , FUNCT_1:1 , RELAT_1:62;
end;
let C97 , C98 , C99 , C100 being set;
assume that
L706: [ C97 , C98 ] in D70
and
L707: [ C99 , C100 ] in D70;
L708: C99 in ( dom D70 ) by L707 , FUNCT_1:1;
L709: C100 = ( D70 . C99 ) by L707 , FUNCT_1:1;
L710: C100 = ( ( Sgm ( dom R21 ) ) . C99 ) by L708 , L709 , FUNCT_1:47;
L711: C98 = ( D70 . C97 ) by L706 , FUNCT_1:1;
thus L712: (C97 = C99 implies C98 = C100) by L711 , L707 , FUNCT_1:1;
L713: C97 in ( dom D70 ) by L706 , FUNCT_1:1;
L714: C98 = ( ( Sgm ( dom R21 ) ) . C97 ) by L713 , L711 , FUNCT_1:47;
assume L715: C98 = C100;
assume L716: C97 <> C99;
reconsider D74 = C97 , D75 = C99 as (Element of ( NAT )) by L713 , L708;
L717: D74 <= ( len ( Sgm ( dom R21 ) ) ) by L690 , L713 , FINSEQ_3:25;
L718: D75 <= ( len ( Sgm ( dom R21 ) ) ) by L690 , L708 , FINSEQ_3:25;
L719: 1 <= D75 by L690 , L708 , FINSEQ_3:25;
L720: 1 <= D74 by L690 , L713 , FINSEQ_3:25;
per cases  by L716 , XXREAL_0:1;
suppose L721: D74 < D75;

thus L722: contradiction by L721 , L684 , L714 , L710 , L715 , L720 , L718 , FINSEQ_1:def 13;
end;
suppose L723: D75 < D74;

thus L724: contradiction by L723 , L684 , L714 , L710 , L715 , L717 , L719 , FINSEQ_1:def 13;
end;
end;
L726: D68 , D67 are_equipotent  by L695 , TARSKI:def 6;
L727: ( card D68 ) = ( card D67 ) by L726 , CARD_1:5;
L728: ( dom ( Sgm D67 ) ) = ( Seg ( card D68 ) ) by L727 , L681 , FINSEQ_3:40 , RELAT_1:11;
L729: ( rng ( Sgm ( dom C93 ) ) ) = ( dom C93 ) by L694 , L682 , FINSEQ_1:def 13;
L730:
now
L731:
now
let C101 being set;
thus L732:now
assume L733: C101 in ( dom R20 );
L734: C101 in ( dom ( Sgm ( dom R22 ) ) ) by L733 , L679 , L683 , L728 , FUNCT_1:11;
L735: ( ( Sgm ( dom R22 ) ) . C101 ) in ( dom R22 ) by L734 , L688 , FUNCT_1:def 3;
thus L736: C101 in ( dom ( Seq R22 ) ) by L735 , L734 , FUNCT_1:11;
end;
assume L737: C101 in ( dom ( Seq R22 ) );
L738: C101 in ( dom ( Sgm ( dom C93 ) ) ) by L737 , L683 , L728 , FUNCT_1:11;
L739: ( ( Sgm ( dom C93 ) ) . C101 ) in ( dom C93 ) by L738 , L729 , FUNCT_1:def 3;
thus L740: C101 in ( dom R20 ) by L739 , L679 , L738 , FUNCT_1:11;
end;
thus L741: ( dom R20 ) = ( dom ( Seq R22 ) ) by L731 , TARSKI:1;
thus L742: ( dom R20 ) = ( dom R20 );
let C102 being Nat;
assume L743: C102 in ( dom R20 );
L744: ( ( Sgm ( dom C93 ) ) . C102 ) in ( dom C93 ) by L743 , L679 , FUNCT_1:11;
L745: ( ( Sgm ( dom R22 ) ) . C102 ) in ( dom R22 ) by L741 , L743 , FUNCT_1:11;
L746: ( ( Sgm ( dom C93 ) ) . C102 ) in ( dom C93 ) by L679 , L743 , FUNCT_1:11;
L747: ( C93 . ( ( Sgm ( dom C93 ) ) . C102 ) ) = ( ( Seq R21 ) . ( ( Sgm ( dom C93 ) ) . C102 ) ) by L746 , L678 , GRFUNC_1:2;
L748: ( ( Sgm ( dom R22 ) ) . C102 ) = ( ( ( Sgm ( dom R21 ) ) * ( Sgm ( dom C93 ) ) ) . C102 ) by L684 , L693 , L686 , L31 , RELAT_1:11;
L749: C102 in ( dom ( Sgm ( dom C93 ) ) ) by L679 , L743 , FUNCT_1:11;
L750: C102 in ( dom ( ( Sgm ( dom R21 ) ) * ( Sgm ( dom C93 ) ) ) ) by L749 , L694 , L686 , L744 , FUNCT_1:11;
L751: ( ( Sgm ( dom R22 ) ) . C102 ) = ( ( Sgm ( dom R21 ) ) . ( ( Sgm ( dom C93 ) ) . C102 ) ) by L750 , L748 , FUNCT_1:12;
L752: R22 c= R21 by L680 , RELAT_1:59;
L753: ( dom C93 ) c= ( dom ( Seq R21 ) ) by L678 , RELAT_1:11;
L754: ( ( Sgm ( dom C93 ) ) . C102 ) in ( dom ( Sgm ( dom R21 ) ) ) by L753 , L746 , FUNCT_1:11;
thus L755: ( ( Seq R22 ) . C102 ) = ( R22 . ( ( Sgm ( dom R22 ) ) . C102 ) ) by L741 , L743 , FUNCT_1:12
.= ( R21 . ( ( Sgm ( dom R21 ) ) . ( ( Sgm ( dom C93 ) ) . C102 ) ) ) by L751 , L752 , L745 , GRFUNC_1:2
.= ( C93 . ( ( Sgm ( dom C93 ) ) . C102 ) ) by L754 , L747 , FUNCT_1:13
.= ( R20 . C102 ) by L679 , L743 , FUNCT_1:12;
end;
thus L756: thesis by L730 , FINSEQ_1:13;
end;
begin
theorem
L757: (for R23 being Graph holds (for R25 being (Element of R23) holds (for R26 being (Element of R23) holds (for R29 being set holds (R29 joins R25 , R26 implies R29 joins R26 , R25)))))
proof
let R23 being Graph;
let R25 being (Element of R23);
let R26 being (Element of R23);
let R29 being set;
assume L758: R29 joins R25 , R26;
L759: ((( (the Source of R23) . R29 ) = R25 & ( (the Target of R23) . R29 ) = R26) or (( (the Source of R23) . R29 ) = R26 & ( (the Target of R23) . R29 ) = R25)) by L758 , GRAPH_1:def 12;
thus L760: thesis by L759 , GRAPH_1:def 12;
end;
theorem
L761: (for R23 being Graph holds (for R25 being (Element of R23) holds (for R26 being (Element of R23) holds (for R27 being (Element of R23) holds (for R28 being (Element of R23) holds (for R29 being set holds ((R29 joins R25 , R26 & R29 joins R27 , R28) implies ((R25 = R27 & R26 = R28) or (R25 = R28 & R26 = R27)))))))))
proof
let R23 being Graph;
let R25 being (Element of R23);
let R26 being (Element of R23);
let R27 being (Element of R23);
let R28 being (Element of R23);
let R29 being set;
assume that
L762: R29 joins R25 , R26
and
L763: R29 joins R27 , R28;
L764: ((( (the Source of R23) . R29 ) = R25 & ( (the Target of R23) . R29 ) = R26) or (( (the Source of R23) . R29 ) = R26 & ( (the Target of R23) . R29 ) = R25)) by L762 , GRAPH_1:def 12;
thus L765: thesis by L764 , L763 , GRAPH_1:def 12;
end;
definition
let R23 being Graph;
let R3 being set;
func R23 -VSet R3 -> set equals 
{ R24 where R24 is (Element of R23) : (ex B53 being (Element of (the carrier' of R23)) st (B53 in R3 & (R24 = ( (the Source of R23) . B53 ) or R24 = ( (the Target of R23) . B53 )))) };
correctness;
end;
definition
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let C103 being FinSequence;
pred R30 is_vertex_seq_of C103
means
:L767: (( len R30 ) = ( ( len C103 ) + 1 ) & (for R13 being (Element of ( NAT )) holds ((1 <= R13 & R13 <= ( len C103 )) implies ( C103 . R13 ) joins ( R30 /. R13 ) , ( R30 /. ( R13 + 1 ) ))))
;end;
theorem
L769: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds ((R33 <> ( {} ) & R30 is_vertex_seq_of R33) implies ( R23 -VSet ( rng R33 ) ) = ( rng R30 )))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume that
L770: R33 <> ( {} )
and
L771: R30 is_vertex_seq_of R33;
L772: ( len R30 ) = ( ( len R33 ) + 1 ) by L771 , L767;
L773:
now
let C104 being set;
thus L774:now
assume L775: C104 in ( R23 -VSet ( rng R33 ) );
consider C105 being (Element of R23) such that L776: C105 = C104 and L777: (ex B54 being (Element of (the carrier' of R23)) st (B54 in ( rng R33 ) & (C105 = ( (the Source of R23) . B54 ) or C105 = ( (the Target of R23) . B54 )))) by L775;
consider C106 being (Element of (the carrier' of R23)) such that L778: C106 in ( rng R33 ) and L779: (C105 = ( (the Source of R23) . C106 ) or C105 = ( (the Target of R23) . C106 )) by L777;
consider C107 being set such that L780: C107 in ( dom R33 ) and L781: C106 = ( R33 . C107 ) by L778 , FUNCT_1:def 3;
reconsider D76 = C107 as (Element of ( NAT )) by L780;
L782: 1 <= ( D76 + 1 ) by NAT_1:12;
set D77 = ( R30 /. ( D76 + 1 ) );
set D78 = ( R30 /. D76 );
L783: D76 <= ( len R33 ) by L780 , FINSEQ_3:25;
L784: ( D76 + 1 ) <= ( len R30 ) by L783 , L772 , XREAL_1:7;
L785: ( D76 + 1 ) in ( dom R30 ) by L784 , L782 , FINSEQ_3:25;
L786: 1 <= D76 by L780 , FINSEQ_3:25;
L787: ( R33 . D76 ) joins D78 , D77 by L786 , L771 , L783 , L767;
L788: (C105 = D78 or C105 = D77) by L787 , L779 , L781 , GRAPH_1:def 12;
L789: D76 <= ( len R30 ) by L772 , L783 , NAT_1:12;
L790: D78 = ( R30 . D76 ) by L789 , L786 , FINSEQ_4:15;
L791: D76 in ( dom R30 ) by L786 , L789 , FINSEQ_3:25;
L792: D77 = ( R30 . ( D76 + 1 ) ) by L772 , L783 , L782 , FINSEQ_4:15 , XREAL_1:7;
thus L793: C104 in ( rng R30 ) by L792 , L776 , L790 , L788 , L791 , L785 , FUNCT_1:def 3;
end;
assume L794: C104 in ( rng R30 );
consider C108 being set such that L795: C108 in ( dom R30 ) and L796: C104 = ( R30 . C108 ) by L794 , FUNCT_1:def 3;
reconsider D79 = C108 as (Element of ( NAT )) by L795;
L797: 1 <= D79 by L795 , FINSEQ_3:25;
L798: D79 <= ( len R30 ) by L795 , FINSEQ_3:25;
per cases  by L772 , L798 , NAT_1:8;
suppose L799: D79 <= ( len R33 );

L800: D79 in ( dom R33 ) by L799 , L797 , FINSEQ_3:25;
L801: ( R33 . D79 ) in ( rng R33 ) by L800 , FUNCT_1:def 3;
L802: ( rng R33 ) c= (the carrier' of R23) by FINSEQ_1:def 4;
reconsider D80 = ( R33 . D79 ) as (Element of (the carrier' of R23)) by L802 , L801;
L803: D79 in ( dom R33 ) by L797 , L799 , FINSEQ_3:25;
L804: D80 in ( rng R33 ) by L803 , FUNCT_1:def 3;
set D81 = ( R30 /. ( D79 + 1 ) );
set D82 = ( R30 /. D79 );
L805: ( R33 . D79 ) joins D82 , D81 by L771 , L797 , L799 , L767;
L806: ((D82 = ( (the Source of R23) . D80 ) & D81 = ( (the Target of R23) . D80 )) or (D81 = ( (the Source of R23) . D80 ) & D82 = ( (the Target of R23) . D80 ))) by L805 , GRAPH_1:def 12;
L807: D82 = ( R30 . D79 ) by L797 , L798 , FINSEQ_4:15;
thus L808: C104 in ( R23 -VSet ( rng R33 ) ) by L807 , L796 , L806 , L804;
end;
suppose L809: D79 = ( ( len R33 ) + 1 );

set D83 = ( len R33 );
L810: ( rng R33 ) c= (the carrier' of R23) by FINSEQ_1:def 4;
L811: ( ( 0 ) + 1 ) = 1;
L812: 1 <= D83 by L811 , L770 , NAT_1:13;
L813: D83 in ( dom R33 ) by L812 , FINSEQ_3:25;
L814: ( R33 . D83 ) in ( rng R33 ) by L813 , FUNCT_1:def 3;
reconsider D84 = ( R33 . D83 ) as (Element of (the carrier' of R23)) by L814 , L810;
set D85 = ( R30 /. ( D83 + 1 ) );
set D86 = ( R30 /. D83 );
L815: D83 in ( dom R33 ) by L812 , FINSEQ_3:25;
L816: D84 in ( rng R33 ) by L815 , FUNCT_1:def 3;
L817: ( R33 . D83 ) joins D86 , D85 by L771 , L812 , L767;
L818: ((D86 = ( (the Source of R23) . D84 ) & D85 = ( (the Target of R23) . D84 )) or (D85 = ( (the Source of R23) . D84 ) & D86 = ( (the Target of R23) . D84 ))) by L817 , GRAPH_1:def 12;
L819: D85 = ( R30 . ( D83 + 1 ) ) by L772 , L797 , L809 , FINSEQ_4:15;
thus L820: C104 in ( R23 -VSet ( rng R33 ) ) by L819 , L796 , L809 , L818 , L816;
end;
end;
thus L822: thesis by L773 , TARSKI:1;
end;
theorem
L823: (for R23 being Graph holds (for R24 being (Element of R23) holds <* R24 *> is_vertex_seq_of ( {} )))
proof
let R23 being Graph;
let R24 being (Element of R23);
thus L824: ( len <* R24 *> ) = ( ( len ( {} ) ) + 1 ) by FINSEQ_1:40;
thus L825: thesis;
end;
theorem
L826: (for R23 being Graph holds (for R33 being (Chain of R23) holds (ex R30 being (FinSequence of (the carrier of R23)) st R30 is_vertex_seq_of R33)))
proof
let R23 being Graph;
let R33 being (Chain of R23);
consider R1 being FinSequence such that L827: ( len R1 ) = ( ( len R33 ) + 1 ) and L828: (for R13 being (Element of ( NAT )) holds ((1 <= R13 & R13 <= ( len R1 )) implies ( R1 . R13 ) in (the carrier of R23))) and L829: (for R13 being (Element of ( NAT )) holds ((1 <= R13 & R13 <= ( len R33 )) implies (ex R25 being (Element of R23) st (ex R26 being (Element of R23) st (R25 = ( R1 . R13 ) & R26 = ( R1 . ( R13 + 1 ) ) & ( R33 . R13 ) joins R25 , R26))))) by GRAPH_1:def 14;
L830: ( rng R1 ) c= (the carrier of R23)
proof
let C109 being set;
assume L831: C109 in ( rng R1 );
consider C110 being set such that L832: C110 in ( dom R1 ) and L833: C109 = ( R1 . C110 ) by L831 , FUNCT_1:def 3;
reconsider D87 = C110 as (Element of ( NAT )) by L832;
L834: D87 <= ( len R1 ) by L832 , FINSEQ_3:25;
L835: 1 <= D87 by L832 , FINSEQ_3:25;
thus L836: thesis by L835 , L828 , L833 , L834;
end;
reconsider D88 = R1 as (FinSequence of (the carrier of R23)) by L830 , FINSEQ_1:def 4;
take D88;
thus L837: ( len D88 ) = ( ( len R33 ) + 1 ) by L827;
let R13 being (Element of ( NAT ));
assume that
L838: 1 <= R13
and
L839: R13 <= ( len R33 );
L840: R13 <= ( len D88 ) by L827 , L839 , NAT_1:12;
L841: 1 <= ( R13 + 1 ) by NAT_1:12;
L842: ( D88 /. ( R13 + 1 ) ) = ( D88 . ( R13 + 1 ) ) by L841 , L827 , L839 , FINSEQ_4:15 , XREAL_1:7;
L843: (ex R25 being (Element of R23) st (ex R26 being (Element of R23) st (R25 = ( D88 . R13 ) & R26 = ( D88 . ( R13 + 1 ) ) & ( R33 . R13 ) joins R25 , R26))) by L829 , L838 , L839;
thus L844: thesis by L843 , L838 , L840 , L842 , FINSEQ_4:15;
end;
theorem
L845: (for R23 being Graph holds (for R31 being (FinSequence of (the carrier of R23)) holds (for R32 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds ((R33 <> ( {} ) & R31 is_vertex_seq_of R33 & R32 is_vertex_seq_of R33 & R31 <> R32) implies (( R31 . 1 ) <> ( R32 . 1 ) & (for R30 being (FinSequence of (the carrier of R23)) holds (R30 is_vertex_seq_of R33 implies (R30 = R31 or R30 = R32)))))))))
proof
let R23 being Graph;
let R31 being (FinSequence of (the carrier of R23));
let R32 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume that
L846: R33 <> ( {} )
and
L847: R31 is_vertex_seq_of R33
and
L848: R32 is_vertex_seq_of R33;
L849: ( len R31 ) = ( ( len R33 ) + 1 ) by L847 , L767;
defpred S8[ Nat ] means ($1 in ( dom R31 ) & ( R31 . $1 ) <> ( R32 . $1 ));
set D89 = (the Target of R23);
set D90 = (the Source of R23);
L850: ( Seg ( len R31 ) ) = ( dom R31 ) by FINSEQ_1:def 3;
L851: ( Seg ( len R32 ) ) = ( dom R32 ) by FINSEQ_1:def 3;
L852: ( len R32 ) = ( ( len R33 ) + 1 ) by L848 , L767;
assume L853: R31 <> R32;
L854: (ex B55 being Nat st S8[ B55 ]) by L853 , L849 , L852 , FINSEQ_2:9;
consider C111 being Nat such that L855: S8[ C111 ] and L856: (for B56 being Nat holds (S8[ B56 ] implies C111 <= B56)) from NAT_1:sch 5(L854);
L857: 1 <= C111 by L855 , FINSEQ_3:25;
per cases  by L857 , XXREAL_0:1;
suppose L858: C111 = 1;

thus L859: ( R31 . 1 ) <> ( R32 . 1 ) by L858 , L855;
set D91 = ( R32 /. 1 );
set D92 = ( R31 /. ( 1 + 1 ) );
set D93 = ( R31 /. 1 );
let R30 being (FinSequence of (the carrier of R23));
set D94 = ( R30 /. 1 );
set D95 = ( R30 /. ( 1 + 1 ) );
assume L860: R30 is_vertex_seq_of R33;
L861: ( len R30 ) = ( ( len R33 ) + 1 ) by L860 , L767;
L862: ( ( 0 ) + 1 ) = 1;
L863: 1 <= ( len R33 ) by L862 , L846 , NAT_1:13;
L864: ( R33 . 1 ) joins ( R30 /. 1 ) , ( R30 /. ( 1 + 1 ) ) by L863 , L860 , L767;
L865: ( R33 . 1 ) joins ( R31 /. 1 ) , ( R31 /. ( 1 + 1 ) ) by L847 , L863 , L767;
L866: ((D94 = D93 & D95 = D92) or (D94 = D92 & D95 = D93)) by L865 , L864 , L761;
L867: 1 <= ( len R31 ) by L849 , NAT_1:12;
L868: D93 = ( R31 . 1 ) by L867 , FINSEQ_4:15;
L869: D91 = ( R32 . 1 ) by L849 , L852 , L867 , FINSEQ_4:15;
L870: ( R33 . 1 ) joins ( R32 /. 1 ) , ( R32 /. ( 1 + 1 ) ) by L848 , L863 , L767;
thus L871: (R30 = R31 or R30 = R32)
proof
per cases  by L855 , L858 , L868 , L869 , L864 , L870 , L866 , L761;
suppose L872: D94 = D93;

L873:
now
defpred S9[ Nat ] means ($1 in ( dom R30 ) implies ( R30 . $1 ) = ( R31 . $1 ));
thus L874: ( len R30 ) = ( len R30 );
thus L875: ( len R31 ) = ( len R30 ) by L849 , L860 , L767;
L876: (for B57 being Nat holds (S9[ B57 ] implies S9[ ( B57 + 1 ) ]))
proof
L877: ( ( 0 ) + 1 ) = 1;
let C112 being Nat;
assume L878: (C112 in ( dom R30 ) implies ( R30 . C112 ) = ( R31 . C112 ));
assume L879: ( C112 + 1 ) in ( dom R30 );
reconsider D96 = C112 as (Element of ( NAT )) by ORDINAL1:def 12;
L880: 1 <= ( D96 + 1 ) by L879 , FINSEQ_3:25;
L881: ( D96 + 1 ) <= ( len R30 ) by L879 , FINSEQ_3:25;
per cases  by L877 , NAT_1:13;
suppose L882: D96 = ( 0 );

thus L883: thesis by L882 , L849 , L861 , L867 , L868 , L872 , FINSEQ_4:15;
end;
suppose L884: 1 <= D96;

set D97 = ( R31 /. ( D96 + 1 ) );
set D98 = ( R31 /. D96 );
set D99 = ( R30 /. ( D96 + 1 ) );
L885: D99 = ( R30 . ( D96 + 1 ) ) by L880 , L881 , FINSEQ_4:15;
set D100 = ( R30 /. D96 );
L886: D96 <= ( len R33 ) by L861 , L881 , XREAL_1:6;
L887: ( R33 . D96 ) joins ( R31 /. D96 ) , ( R31 /. ( D96 + 1 ) ) by L886 , L847 , L884 , L767;
L888: D96 <= ( len R30 ) by L861 , L886 , NAT_1:12;
L889: D100 = ( R30 . D96 ) by L888 , L884 , FINSEQ_4:15;
L890: ( R33 . D96 ) joins ( R30 /. D96 ) , ( R30 /. ( D96 + 1 ) ) by L860 , L884 , L886 , L767;
L891: ((D100 = D98 & D99 = D97) or (D100 = D97 & D99 = D98)) by L890 , L887 , L761;
L892: D98 = ( R31 . D96 ) by L849 , L861 , L884 , L888 , FINSEQ_4:15;
thus L893: thesis by L892 , L849 , L861 , L878 , L880 , L881 , L884 , L888 , L889 , L885 , L891 , FINSEQ_3:25 , FINSEQ_4:15;
end;
end;
L895: S9[ ( 0 ) ] by FINSEQ_3:25;
thus L896: (for B58 being Nat holds S9[ B58 ]) from NAT_1:sch 2(L895 , L876);
end;
thus L897: thesis by L873 , FINSEQ_2:9;
end;
suppose L898: D94 = D91;

L899:
now
defpred S10[ Nat ] means ($1 in ( dom R30 ) implies ( R30 . $1 ) = ( R32 . $1 ));
thus L900: ( len R30 ) = ( len R30 );
thus L901: ( len R32 ) = ( len R30 ) by L852 , L860 , L767;
L902: (for B59 being Nat holds (S10[ B59 ] implies S10[ ( B59 + 1 ) ]))
proof
L903: ( ( 0 ) + 1 ) = 1;
let C113 being Nat;
assume L904: (C113 in ( dom R30 ) implies ( R30 . C113 ) = ( R32 . C113 ));
assume L905: ( C113 + 1 ) in ( dom R30 );
L906: 1 <= ( C113 + 1 ) by L905 , FINSEQ_3:25;
L907: ( C113 + 1 ) <= ( len R30 ) by L905 , FINSEQ_3:25;
reconsider D101 = C113 as (Element of ( NAT )) by ORDINAL1:def 12;
per cases  by L903 , NAT_1:13;
suppose L908: D101 = ( 0 );

thus L909: thesis by L908 , L849 , L861 , L867 , L869 , L898 , FINSEQ_4:15;
end;
suppose L910: 1 <= D101;

set D102 = ( R32 /. ( D101 + 1 ) );
set D103 = ( R32 /. D101 );
set D104 = ( R30 /. ( D101 + 1 ) );
L911: D104 = ( R30 . ( D101 + 1 ) ) by L906 , L907 , FINSEQ_4:15;
set D105 = ( R30 /. D101 );
L912: D101 <= ( len R33 ) by L861 , L907 , XREAL_1:6;
L913: ( R33 . D101 ) joins ( R32 /. D101 ) , ( R32 /. ( D101 + 1 ) ) by L912 , L848 , L910 , L767;
L914: D101 <= ( len R30 ) by L861 , L912 , NAT_1:12;
L915: D105 = ( R30 . D101 ) by L914 , L910 , FINSEQ_4:15;
L916: ( R33 . D101 ) joins ( R30 /. D101 ) , ( R30 /. ( D101 + 1 ) ) by L860 , L910 , L912 , L767;
L917: ((D105 = D103 & D104 = D102) or (D105 = D102 & D104 = D103)) by L916 , L913 , L761;
L918: D103 = ( R32 . D101 ) by L852 , L861 , L910 , L914 , FINSEQ_4:15;
thus L919: thesis by L918 , L852 , L861 , L904 , L906 , L907 , L910 , L914 , L915 , L911 , L917 , FINSEQ_3:25 , FINSEQ_4:15;
end;
end;
L921: S10[ ( 0 ) ] by FINSEQ_3:25;
thus L922: (for B60 being Nat holds S10[ B60 ]) from NAT_1:sch 2(L921 , L902);
end;
thus L923: thesis by L899 , FINSEQ_2:9;
end;
end;

end;
suppose L872: 1 < C111;

L873: ( 1 + 1 ) <= C111 by L872 , NAT_1:13;
consider C114 being (Element of ( NAT )) such that L874: 1 <= C114 and L875: C114 < C111 and L876: C111 = ( C114 + 1 ) by L873 , L1;
L877: C111 <= ( len R31 ) by L855 , FINSEQ_3:25;
L878: C114 <= ( len R31 ) by L877 , L875 , XXREAL_0:2;
L879: C114 in ( dom R31 ) by L878 , L874 , FINSEQ_3:25;
L880: ( R31 /. C114 ) = ( R31 . C114 ) by L874 , L878 , FINSEQ_4:15;
L881: ( R32 /. C111 ) = ( R32 . C111 ) by L849 , L852 , L850 , L851 , L855 , PARTFUN1:def 6;
L882: ( R31 /. C111 ) = ( R31 . C111 ) by L855 , PARTFUN1:def 6;
L883: C114 <= ( len R33 ) by L849 , L876 , L877 , XREAL_1:6;
L884: ( R33 . C114 ) joins ( R31 /. C114 ) , ( R31 /. ( C114 + 1 ) ) by L883 , L847 , L874 , L767;
L885: ((( D90 . ( R33 . C114 ) ) = ( R31 /. C114 ) & ( D89 . ( R33 . C114 ) ) = ( R31 /. C111 )) or (( D90 . ( R33 . C114 ) ) = ( R31 /. C111 ) & ( D89 . ( R33 . C114 ) ) = ( R31 /. C114 ))) by L884 , L876 , GRAPH_1:def 12;
L886: ( R33 . C114 ) joins ( R32 /. C114 ) , ( R32 /. ( C114 + 1 ) ) by L848 , L874 , L883 , L767;
L887: ((( D90 . ( R33 . C114 ) ) = ( R32 /. C114 ) & ( D89 . ( R33 . C114 ) ) = ( R32 /. C111 )) or (( D90 . ( R33 . C114 ) ) = ( R32 /. C111 ) & ( D89 . ( R33 . C114 ) ) = ( R32 /. C114 ))) by L886 , L876 , GRAPH_1:def 12;
L888: ( R32 /. C114 ) = ( R32 . C114 ) by L849 , L852 , L874 , L878 , FINSEQ_4:15;
thus L889: thesis by L888 , L855 , L856 , L875 , L879 , L880 , L882 , L881 , L885 , L887;
end;
end;
definition
let R23 being Graph;
let C115 being FinSequence;
pred C115 alternates_vertices_in R23
means
:L891: (( len C115 ) >= 1 & ( card ( R23 -VSet ( rng C115 ) ) ) = 2 & (for R13 being (Element of ( NAT )) holds (R13 in ( dom C115 ) implies ( (the Source of R23) . ( C115 . R13 ) ) <> ( (the Target of R23) . ( C115 . R13 ) ))))
;end;
theorem
L893: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds ((R33 alternates_vertices_in R23 & R30 is_vertex_seq_of R33) implies (for R10 being (Element of ( NAT )) holds (R10 in ( dom R33 ) implies ( R30 . R10 ) <> ( R30 . ( R10 + 1 ) )))))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume that
L894: R33 alternates_vertices_in R23
and
L895: R30 is_vertex_seq_of R33;
set D106 = (the Target of R23);
set D107 = (the Source of R23);
let R10 being (Element of ( NAT ));
set D108 = ( R30 /. R10 );
set D109 = ( R30 /. ( R10 + 1 ) );
assume L896: R10 in ( dom R33 );
L897: R10 <= ( len R33 ) by L896 , FINSEQ_3:25;
L898: 1 <= R10 by L896 , FINSEQ_3:25;
L899: ( R33 . R10 ) joins D108 , D109 by L898 , L895 , L897 , L767;
L900: ((( D106 . ( R33 . R10 ) ) = D109 & ( D107 . ( R33 . R10 ) ) = D108) or (( D106 . ( R33 . R10 ) ) = D108 & ( D107 . ( R33 . R10 ) ) = D109)) by L899 , GRAPH_1:def 12;
L901: ( len R30 ) = ( ( len R33 ) + 1 ) by L895 , L767;
L902: R10 <= ( len R30 ) by L901 , L897 , NAT_1:12;
L903: D108 = ( R30 . R10 ) by L902 , L898 , FINSEQ_4:15;
L904: 1 <= ( R10 + 1 ) by NAT_1:12;
L905: D109 = ( R30 . ( R10 + 1 ) ) by L904 , L897 , L901 , FINSEQ_4:15 , XREAL_1:7;
thus L906: thesis by L905 , L894 , L896 , L903 , L900 , L891;
end;
theorem
L907: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds ((R33 alternates_vertices_in R23 & R30 is_vertex_seq_of R33) implies ( rng R30 ) = { ( (the Source of R23) . ( R33 . 1 ) ) , ( (the Target of R23) . ( R33 . 1 ) ) }))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume that
L908: R33 alternates_vertices_in R23
and
L909: R30 is_vertex_seq_of R33;
set D110 = ( R30 /. ( 1 + 1 ) );
set D111 = (the Target of R23);
set D112 = (the Source of R23);
set D113 = ( R30 /. 1 );
L910: ( len R30 ) = ( ( len R33 ) + 1 ) by L909 , L767;
L911: 1 <= ( len R30 ) by L910 , NAT_1:12;
L912: D113 = ( R30 . 1 ) by L911 , FINSEQ_4:15;
L913: R33 <> ( {} ) by L908 , L891 , CARD_1:27;
L914: ( R23 -VSet ( rng R33 ) ) = ( rng R30 ) by L913 , L909 , L769;
L915: ( card ( rng R30 ) ) = 2 by L914 , L908 , L891;
consider C116 , C117 being set such that L916: C116 <> C117 and L917: ( rng R30 ) = { C116 , C117 } by L915 , CARD_2:60;
L918: 1 in ( dom R30 ) by L911 , FINSEQ_3:25;
L919: ( R30 . 1 ) in ( rng R30 ) by L918 , FUNCT_1:def 3;
L920: (( R30 . 1 ) = C116 or ( R30 . 1 ) = C117) by L919 , L917 , TARSKI:def 2;
L921: 1 <= ( len R33 ) by L908 , L891;
L922: 1 in ( dom R33 ) by L921 , FINSEQ_3:25;
L923: D110 = ( R30 . ( 1 + 1 ) ) by L921 , L910 , FINSEQ_4:15 , XREAL_1:7;
L924: ( R33 . 1 ) joins D113 , D110 by L909 , L921 , L767;
L925: ((( D111 . ( R33 . 1 ) ) = D110 & ( D112 . ( R33 . 1 ) ) = D113) or (( D111 . ( R33 . 1 ) ) = D113 & ( D112 . ( R33 . 1 ) ) = D110)) by L924 , GRAPH_1:def 12;
L926: ( 1 + 1 ) <= ( len R30 ) by L921 , L910 , XREAL_1:7;
L927: ( 1 + 1 ) in ( dom R30 ) by L926 , FINSEQ_3:25;
L928: ( R30 . ( 1 + 1 ) ) in ( rng R30 ) by L927 , FUNCT_1:def 3;
L929: (( R30 . ( 1 + 1 ) ) = C116 or ( R30 . ( 1 + 1 ) ) = C117) by L928 , L917 , TARSKI:def 2;
thus L930: thesis by L929 , L908 , L917 , L912 , L923 , L925 , L920 , L922 , L891;
end;
theorem
L931: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds ((R33 alternates_vertices_in R23 & R30 is_vertex_seq_of R33) implies R30 is  TwoValued  Alternating  TwoValued  Alternating  TwoValued  Alternating  TwoValued  Alternating FinSequence))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume that
L932: R33 alternates_vertices_in R23
and
L933: R30 is_vertex_seq_of R33;
L934: R33 <> ( {} ) by L932 , L891 , CARD_1:27;
L935: ( len R30 ) = ( ( len R33 ) + 1 ) by L933 , L767;
L936:
now
let C118 being Nat;
assume that
L937: 1 <= C118
and
L938: ( C118 + 1 ) <= ( len R30 );
L939: C118 <= ( len R33 ) by L935 , L938 , XREAL_1:6;
L940: C118 in ( dom R33 ) by L939 , L937 , FINSEQ_3:25;
thus L941: ( R30 . C118 ) <> ( R30 . ( C118 + 1 ) ) by L940 , L932 , L933 , L893;
end;
L942: ( card ( R23 -VSet ( rng R33 ) ) ) = 2 by L932 , L891;
L943: ( card ( rng R30 ) ) = 2 by L942 , L933 , L934 , L769;
thus L944: thesis by L943 , L936 , L452 , L494;
end;
theorem
L945: (for R23 being Graph holds (for R33 being (Chain of R23) holds (R33 alternates_vertices_in R23 implies (ex R31 being (FinSequence of (the carrier of R23)) st (ex R32 being (FinSequence of (the carrier of R23)) st (R31 <> R32 & R31 is_vertex_seq_of R33 & R32 is_vertex_seq_of R33 & (for R30 being (FinSequence of (the carrier of R23)) holds (R30 is_vertex_seq_of R33 implies (R30 = R31 or R30 = R32)))))))))
proof
let R23 being Graph;
let R33 being (Chain of R23);
set D114 = ( (the Source of R23) . ( R33 . 1 ) );
set D115 = ( (the Target of R23) . ( R33 . 1 ) );
consider C119 being (FinSequence of (the carrier of R23)) such that L946: C119 is_vertex_seq_of R33 by L826;
assume L947: R33 alternates_vertices_in R23;
L948: 1 <= ( len R33 ) by L947 , L891;
L949: 1 in ( dom R33 ) by L948 , FINSEQ_3:25;
L950: ( 1 + 1 ) = 2;
L951: ( C119 . 1 ) <> ( C119 . 2 ) by L950 , L947 , L946 , L949 , L893;
L952: ( rng C119 ) = { D114 , D115 } by L947 , L946 , L907;
L953: ( len C119 ) = ( ( len R33 ) + 1 ) by L946 , L767;
L954: ( len C119 ) > 1 by L953 , L948 , NAT_1:13;
consider C120 being  TwoValued  Alternating FinSequence such that L955: ( rng C120 ) = { ( C119 . 2 ) , ( C119 . 1 ) } and L956: ( len C120 ) = ( len C119 ) and L957: ( C120 . 1 ) = ( C119 . 2 ) by L954 , L951 , L581;
L958: ( dom C119 ) = ( dom C120 ) by L956 , FINSEQ_3:29;
L959: ( 1 + 1 ) <= ( len C119 ) by L954 , NAT_1:13;
L960: 2 in ( dom C119 ) by L959 , FINSEQ_3:25;
L961: ( C119 . 2 ) in ( rng C119 ) by L960 , FUNCT_1:def 3;
L962: (( C119 . 2 ) = D114 or ( C119 . 2 ) = D115) by L961 , L952 , TARSKI:def 2;
L963: 1 in ( dom C119 ) by L954 , FINSEQ_3:25;
L964: ( C119 . 1 ) in ( rng C119 ) by L963 , FUNCT_1:def 3;
L965: (( C119 . 1 ) = D114 or ( C119 . 1 ) = D115) by L964 , L952 , TARSKI:def 2;
reconsider D116 = C120 as (FinSequence of (the carrier of R23)) by L965 , L947 , L946 , L952 , L949 , L950 , L955 , L962 , L893 , FINSEQ_1:def 4;
take C119;
take D116;
thus L966: C119 <> D116 by L947 , L946 , L949 , L950 , L957 , L893;
thus L967: C119 is_vertex_seq_of R33 by L946;
L968: C119 is  TwoValued  Alternating  TwoValued  Alternating  TwoValued  Alternating  TwoValued  Alternating FinSequence by L947 , L946 , L931;
L969:
now
thus L970: ( len D116 ) = ( ( len R33 ) + 1 ) by L946 , L956 , L767;
let C121 being (Element of ( NAT ));
assume that
L971: 1 <= C121
and
L972: C121 <= ( len R33 );
L973: C121 <= ( len C119 ) by L953 , L972 , NAT_1:12;
L974: ( D116 /. C121 ) = ( D116 . C121 ) by L973 , L956 , L971 , FINSEQ_4:15;
L975: C121 in ( dom C119 ) by L971 , L973 , FINSEQ_3:25;
L976: ( D116 . C121 ) in { D114 , D115 } by L975 , L947 , L946 , L949 , L950 , L955 , L958 , L965 , L962 , L893 , FUNCT_1:def 3;
L977: (( D116 . C121 ) = D114 or ( D116 . C121 ) = D115) by L976 , TARSKI:def 2;
set D117 = ( C119 /. C121 );
set D118 = ( C119 /. ( C121 + 1 ) );
L978: ( R33 . C121 ) joins D117 , D118 by L946 , L971 , L972 , L767;
L979: ( C121 + 1 ) <= ( len C119 ) by L953 , L972 , XREAL_1:6;
L980: ( D116 /. ( C121 + 1 ) ) = ( D116 . ( C121 + 1 ) ) by L979 , L956 , FINSEQ_4:15 , NAT_1:12;
L981: 1 <= ( C121 + 1 ) by NAT_1:12;
L982: ( C121 + 1 ) in ( dom C119 ) by L981 , L979 , FINSEQ_3:25;
L983: ( D116 . ( C121 + 1 ) ) in { D114 , D115 } by L982 , L947 , L946 , L949 , L950 , L955 , L958 , L965 , L962 , L893 , FUNCT_1:def 3;
L984: (( D116 . ( C121 + 1 ) ) = D114 or ( D116 . ( C121 + 1 ) ) = D115) by L983 , TARSKI:def 2;
L985: ( C119 . C121 ) in { D114 , D115 } by L952 , L975 , FUNCT_1:def 3;
L986: (( C119 . C121 ) = D114 or ( C119 . C121 ) = D115) by L985 , TARSKI:def 2;
L987: D117 = ( D116 . ( C121 + 1 ) ) by L986 , L952 , L968 , L951 , L955 , L956 , L957 , L965 , L962 , L971 , L973 , L979 , L977 , L984 , L494 , L528 , FINSEQ_4:15;
L988: ( C119 . ( C121 + 1 ) ) in { D114 , D115 } by L952 , L982 , FUNCT_1:def 3;
L989: (( C119 . ( C121 + 1 ) ) = D114 or ( C119 . ( C121 + 1 ) ) = D115) by L988 , TARSKI:def 2;
L990: D118 = ( D116 . C121 ) by L989 , L952 , L968 , L951 , L955 , L956 , L957 , L965 , L962 , L971 , L981 , L979 , L977 , L984 , L494 , L528 , FINSEQ_4:15;
thus L991: ( R33 . C121 ) joins ( D116 /. C121 ) , ( D116 /. ( C121 + 1 ) ) by L990 , L978 , L987 , L974 , L980 , L757;
end;
thus L992: D116 is_vertex_seq_of R33 by L969 , L767;
let C122 being (FinSequence of (the carrier of R23));
assume L993: C122 is_vertex_seq_of R33;
reconsider D119 = C122 as  TwoValued  Alternating FinSequence by L993 , L947 , L931;
L994: ( len C122 ) = ( ( len R33 ) + 1 ) by L993 , L767;
L995: ( rng C122 ) = { D114 , D115 } by L947 , L993 , L907;
L996: (D119 = C119 or D119 = D116) by L995 , L953 , L952 , L968 , L951 , L955 , L956 , L957 , L965 , L962 , L994 , L557;
thus L997: thesis by L996;
end;
L998: (for R7 being non  empty set holds ((for R5 being set holds (for R6 being set holds ((R5 in R7 & R6 in R7) implies R5 = R6))) implies ( card R7 ) = 1))
proof
let R7 being non  empty set;
set D120 = the (Element of R7);
assume L999: (for R5 being set holds (for R6 being set holds ((R5 in R7 & R6 in R7) implies R5 = R6)));
L1000: (for R6 being set holds (R6 in R7 iff R6 = D120)) by L999;
L1001: R7 = { D120 } by L1000 , TARSKI:def 1;
thus L1002: thesis by L1001 , CARD_2:42;
end;
theorem
L1003: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds (R30 is_vertex_seq_of R33 implies ((( card (the carrier of R23) ) = 1 or (R33 <> ( {} ) & (not R33 alternates_vertices_in R23))) iff (for R31 being (FinSequence of (the carrier of R23)) holds (R31 is_vertex_seq_of R33 implies R31 = R30)))))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume L1004: R30 is_vertex_seq_of R33;
thus L1005:now
assume L1006: (( card (the carrier of R23) ) = 1 or (R33 <> ( {} ) & (not R33 alternates_vertices_in R23)));
per cases  by L1006;
suppose L1007: ( card (the carrier of R23) ) = 1;

reconsider D121 = (the carrier of R23) as  finite set by L1007;
consider C123 being set such that L1008: D121 = { C123 } by L1007 , CARD_2:42;
L1009: ( rng R30 ) c= { C123 } by L1008 , FINSEQ_1:def 4;
L1010: ( len R30 ) = ( ( len R33 ) + 1 ) by L1004 , L767;
let R31 being (FinSequence of (the carrier of R23));
L1011: ( Seg ( len R30 ) ) = ( dom R30 ) by FINSEQ_1:def 3;
assume L1012: R31 is_vertex_seq_of R33;
L1013: ( len R31 ) = ( ( len R33 ) + 1 ) by L1012 , L767;
assume L1014: R31 <> R30;
consider C124 being Nat such that L1015: C124 in ( dom R30 ) and L1016: ( R31 . C124 ) <> ( R30 . C124 ) by L1014 , L1013 , L1010 , FINSEQ_2:9;
L1017: ( R30 . C124 ) in ( rng R30 ) by L1015 , FUNCT_1:def 3;
L1018: ( R30 . C124 ) = C123 by L1017 , L1009 , TARSKI:def 1;
L1019: ( rng R31 ) c= { C123 } by L1008 , FINSEQ_1:def 4;
L1020: ( Seg ( len R31 ) ) = ( dom R31 ) by FINSEQ_1:def 3;
L1021: ( R31 . C124 ) in ( rng R31 ) by L1020 , L1013 , L1010 , L1011 , L1015 , FUNCT_1:def 3;
thus L1022: contradiction by L1021 , L1016 , L1019 , L1018 , TARSKI:def 1;
end;
suppose L1023: (R33 <> ( {} ) & (not R33 alternates_vertices_in R23));

thus L1024: (for R31 being (FinSequence of (the carrier of R23)) holds (R31 is_vertex_seq_of R33 implies R31 = R30))
proof
set D122 = (the Target of R23);
set D123 = (the Source of R23);
let R31 being (FinSequence of (the carrier of R23));
defpred S11[ Nat ] means ($1 in ( dom R31 ) & ( R31 . $1 ) <> ( R30 . $1 ));
assume L1025: R31 is_vertex_seq_of R33;
L1026: ( len R31 ) = ( ( len R33 ) + 1 ) by L1025 , L767;
L1027: ( len R30 ) = ( ( len R33 ) + 1 ) by L1004 , L767;
L1028: ( dom R31 ) = ( dom R30 ) by L1027 , L1026 , FINSEQ_3:29;
assume L1029: R31 <> R30;
L1030: (ex B61 being Nat st S11[ B61 ]) by L1029 , L1026 , L1027 , FINSEQ_2:9;
consider C125 being Nat such that L1031: S11[ C125 ] and L1032: (for B62 being Nat holds (S11[ B62 ] implies C125 <= B62)) from NAT_1:sch 5(L1030);
L1033: ((( ( 0 ) + 1 ) = 1 & C125 = ( 0 )) or ( ( 0 ) + 1 ) <= C125) by NAT_1:13;
per cases  by L1033 , XXREAL_0:1;
suppose L1034: C125 = ( 0 );

thus L1035: contradiction by L1034 , L1031 , FINSEQ_3:25;
end;
suppose L1036: C125 = 1;

thus L1037: contradiction
proof
L1038: ( ( 0 ) + 1 ) = 1;
per cases  by L1038 , NAT_1:13;
suppose L1039: ( len R33 ) = ( 0 );

thus L1040: contradiction by L1039 , L1023;
end;
suppose L1041: 1 <= ( len R33 );

defpred S12[ (Element of ( NAT )) ] means ($1 in ( dom R33 ) implies (( R31 /. $1 ) <> ( R30 /. $1 ) & ( R31 /. ( $1 + 1 ) ) <> ( R30 /. ( $1 + 1 ) ) & ((( D122 . ( R33 . $1 ) ) = ( D122 . ( R33 . 1 ) ) & ( D123 . ( R33 . $1 ) ) = ( D123 . ( R33 . 1 ) )) or (( D122 . ( R33 . $1 ) ) = ( D123 . ( R33 . 1 ) ) & ( D123 . ( R33 . $1 ) ) = ( D122 . ( R33 . 1 ) )))));
L1042: ( R30 /. C125 ) = ( R30 . C125 ) by L1028 , L1031 , PARTFUN1:def 6;
L1043: ( R31 /. C125 ) = ( R31 . C125 ) by L1031 , PARTFUN1:def 6;
L1044:
now
let C126 being (Element of ( NAT ));
assume L1045: S12[ C126 ];
thus L1046: S12[ ( C126 + 1 ) ]
proof
assume L1047: ( C126 + 1 ) in ( dom R33 );
L1048: 1 <= ( C126 + 1 ) by L1047 , FINSEQ_3:25;
L1049: ( C126 + 1 ) <= ( len R33 ) by L1047 , FINSEQ_3:25;
thus L1050: (( R31 /. ( C126 + 1 ) ) <> ( R30 /. ( C126 + 1 ) ) & ( R31 /. ( ( C126 + 1 ) + 1 ) ) <> ( R30 /. ( ( C126 + 1 ) + 1 ) ) & ((( D122 . ( R33 . ( C126 + 1 ) ) ) = ( D122 . ( R33 . 1 ) ) & ( D123 . ( R33 . ( C126 + 1 ) ) ) = ( D123 . ( R33 . 1 ) )) or (( D122 . ( R33 . ( C126 + 1 ) ) ) = ( D123 . ( R33 . 1 ) ) & ( D123 . ( R33 . ( C126 + 1 ) ) ) = ( D122 . ( R33 . 1 ) ))))
proof
per cases ;
suppose L1051: C126 = ( 0 );

thus L1052: ( R31 /. ( C126 + 1 ) ) <> ( R30 /. ( C126 + 1 ) ) by L1051 , L1028 , L1031 , L1036 , L1043 , PARTFUN1:def 6;
L1053: 1 <= ( len R33 ) by L1048 , L1049 , XXREAL_0:2;
L1054: ( R33 . 1 ) joins ( R30 /. 1 ) , ( R30 /. ( 1 + 1 ) ) by L1053 , L1004 , L767;
L1055: ((( D123 . ( R33 . 1 ) ) = ( R30 /. 1 ) & ( D122 . ( R33 . 1 ) ) = ( R30 /. ( 1 + 1 ) )) or (( D123 . ( R33 . 1 ) ) = ( R30 /. ( 1 + 1 ) ) & ( D122 . ( R33 . 1 ) ) = ( R30 /. 1 ))) by L1054 , GRAPH_1:def 12;
L1056: ( R33 . 1 ) joins ( R31 /. 1 ) , ( R31 /. ( 1 + 1 ) ) by L1025 , L1053 , L767;
L1057: ((( D123 . ( R33 . 1 ) ) = ( R31 /. 1 ) & ( D122 . ( R33 . 1 ) ) = ( R31 /. ( 1 + 1 ) )) or (( D123 . ( R33 . 1 ) ) = ( R31 /. ( 1 + 1 ) ) & ( D122 . ( R33 . 1 ) ) = ( R31 /. 1 ))) by L1056 , GRAPH_1:def 12;
thus L1058: ( R31 /. ( ( C126 + 1 ) + 1 ) ) <> ( R30 /. ( ( C126 + 1 ) + 1 ) ) by L1057 , L1028 , L1031 , L1036 , L1043 , L1051 , L1055 , PARTFUN1:def 6;
thus L1059: thesis by L1051;
end;
suppose L1060: ( 0 ) < C126;

L1061: C126 <= ( len R33 ) by L1049 , NAT_1:13;
L1062: ( ( 0 ) + 1 ) <= C126 by L1060 , NAT_1:13;
thus L1063: ( R31 /. ( C126 + 1 ) ) <> ( R30 /. ( C126 + 1 ) ) by L1062 , L1045 , L1061 , FINSEQ_3:25;
L1064: ( R33 . C126 ) joins ( R31 /. C126 ) , ( R31 /. ( C126 + 1 ) ) by L1025 , L1062 , L1061 , L767;
L1065: ((( D123 . ( R33 . C126 ) ) = ( R31 /. C126 ) & ( D122 . ( R33 . C126 ) ) = ( R31 /. ( C126 + 1 ) )) or (( D123 . ( R33 . C126 ) ) = ( R31 /. ( C126 + 1 ) ) & ( D122 . ( R33 . C126 ) ) = ( R31 /. C126 ))) by L1064 , GRAPH_1:def 12;
L1066: ( R33 . ( C126 + 1 ) ) joins ( R30 /. ( C126 + 1 ) ) , ( R30 /. ( ( C126 + 1 ) + 1 ) ) by L1004 , L1048 , L1049 , L767;
L1067: ((( D123 . ( R33 . ( C126 + 1 ) ) ) = ( R30 /. ( C126 + 1 ) ) & ( D122 . ( R33 . ( C126 + 1 ) ) ) = ( R30 /. ( ( C126 + 1 ) + 1 ) )) or (( D123 . ( R33 . ( C126 + 1 ) ) ) = ( R30 /. ( ( C126 + 1 ) + 1 ) ) & ( D122 . ( R33 . ( C126 + 1 ) ) ) = ( R30 /. ( C126 + 1 ) ))) by L1066 , GRAPH_1:def 12;
L1068: ( R33 . ( C126 + 1 ) ) joins ( R31 /. ( C126 + 1 ) ) , ( R31 /. ( ( C126 + 1 ) + 1 ) ) by L1025 , L1048 , L1049 , L767;
L1069: ((( D123 . ( R33 . ( C126 + 1 ) ) ) = ( R31 /. ( C126 + 1 ) ) & ( D122 . ( R33 . ( C126 + 1 ) ) ) = ( R31 /. ( ( C126 + 1 ) + 1 ) )) or (( D123 . ( R33 . ( C126 + 1 ) ) ) = ( R31 /. ( ( C126 + 1 ) + 1 ) ) & ( D122 . ( R33 . ( C126 + 1 ) ) ) = ( R31 /. ( C126 + 1 ) ))) by L1068 , GRAPH_1:def 12;
thus L1070: ( R31 /. ( ( C126 + 1 ) + 1 ) ) <> ( R30 /. ( ( C126 + 1 ) + 1 ) ) by L1069 , L1045 , L1062 , L1061 , L1067 , FINSEQ_3:25;
L1071: ( R33 . C126 ) joins ( R30 /. C126 ) , ( R30 /. ( C126 + 1 ) ) by L1004 , L1062 , L1061 , L767;
thus L1072: thesis by L1071 , L1045 , L1062 , L1061 , L1065 , L1068 , L1067 , FINSEQ_3:25 , GRAPH_1:def 12;
end;
end;

end;

end;
L1047: S12[ ( 0 ) ] by FINSEQ_3:25;
L1048: (for R13 being (Element of ( NAT )) holds S12[ R13 ]) from NAT_1:sch 1(L1047 , L1044);
L1049:
now
let C127 being set;
thus L1050:now
assume L1051: C127 in ( R23 -VSet ( rng R33 ) );
consider R24 being (Element of R23) such that L1052: C127 = R24 and L1053: (ex B63 being (Element of (the carrier' of R23)) st (B63 in ( rng R33 ) & (R24 = ( (the Source of R23) . B63 ) or R24 = ( (the Target of R23) . B63 )))) by L1051;
consider R29 being set such that L1054: R29 in ( rng R33 ) and L1055: (R24 = ( D123 . R29 ) or R24 = ( D122 . R29 )) by L1053;
consider C128 being set such that L1056: C128 in ( dom R33 ) and L1057: R29 = ( R33 . C128 ) by L1054 , FUNCT_1:def 3;
reconsider D124 = C128 as (Element of ( NAT )) by L1056;
L1058: ((( D122 . ( R33 . D124 ) ) = ( D122 . ( R33 . 1 ) ) & ( D123 . ( R33 . D124 ) ) = ( D123 . ( R33 . 1 ) )) or (( D122 . ( R33 . D124 ) ) = ( D123 . ( R33 . 1 ) ) & ( D123 . ( R33 . D124 ) ) = ( D122 . ( R33 . 1 ) ))) by L1048 , L1056;
thus L1059: C127 in { ( D123 . ( R33 . 1 ) ) , ( D122 . ( R33 . 1 ) ) } by L1058 , L1052 , L1055 , L1057 , TARSKI:def 2;
end;
L1060: ( ( 0 ) + 1 ) <= ( len R33 ) by L1023 , NAT_1:13;
L1061: 1 in ( dom R33 ) by L1060 , FINSEQ_3:25;
L1062: ( R33 . 1 ) in ( rng R33 ) by L1061 , FUNCT_1:def 3;
L1063: ( rng R33 ) c= (the carrier' of R23) by FINSEQ_1:def 4;
reconsider D125 = ( R33 . 1 ) as (Element of (the carrier' of R23)) by L1063 , L1062;
reconsider D126 = ( D122 . D125 ) as (Element of R23) by L1062 , L1063 , FUNCT_2:5;
reconsider D127 = ( D123 . D125 ) as (Element of R23) by L1062 , L1063 , FUNCT_2:5;
assume L1064: C127 in { ( D123 . ( R33 . 1 ) ) , ( D122 . ( R33 . 1 ) ) };
L1065: (C127 = D127 or C127 = D126) by L1064 , TARSKI:def 2;
L1066: D125 in ( rng R33 ) by L1061 , FUNCT_1:def 3;
thus L1067: C127 in ( R23 -VSet ( rng R33 ) ) by L1066 , L1065;
end;
L1068: ( R23 -VSet ( rng R33 ) ) = { ( D123 . ( R33 . 1 ) ) , ( D122 . ( R33 . 1 ) ) } by L1049 , TARSKI:1;
L1069: ( R33 . C125 ) joins ( R31 /. C125 ) , ( R31 /. ( C125 + 1 ) ) by L1025 , L1036 , L1041 , L767;
L1070: ((( D123 . ( R33 . 1 ) ) = ( R31 /. 1 ) & ( D122 . ( R33 . 1 ) ) = ( R31 /. ( C125 + 1 ) )) or (( D123 . ( R33 . 1 ) ) = ( R31 /. ( C125 + 1 ) ) & ( D122 . ( R33 . 1 ) ) = ( R31 /. 1 ))) by L1069 , L1036 , GRAPH_1:def 12;
L1071: ( R33 . C125 ) joins ( R30 /. C125 ) , ( R30 /. ( C125 + 1 ) ) by L1004 , L1036 , L1041 , L767;
L1072:
now
let R13 being (Element of ( NAT ));
L1073: (R13 in ( dom R33 ) implies ((( D122 . ( R33 . R13 ) ) = ( D122 . ( R33 . 1 ) ) & ( D123 . ( R33 . R13 ) ) = ( D123 . ( R33 . 1 ) )) or (( D122 . ( R33 . R13 ) ) = ( D123 . ( R33 . 1 ) ) & ( D123 . ( R33 . R13 ) ) = ( D122 . ( R33 . 1 ) )))) by L1048;
thus L1074: (R13 in ( dom R33 ) implies ( D123 . ( R33 . R13 ) ) <> ( D122 . ( R33 . R13 ) )) by L1073 , L1031 , L1036 , L1043 , L1042 , L1071 , L1070 , GRAPH_1:def 12;
end;
L1075: ((( D123 . ( R33 . 1 ) ) = ( R30 /. 1 ) & ( D122 . ( R33 . 1 ) ) = ( R30 /. ( C125 + 1 ) )) or (( D123 . ( R33 . 1 ) ) = ( R30 /. ( C125 + 1 ) ) & ( D122 . ( R33 . 1 ) ) = ( R30 /. 1 ))) by L1036 , L1071 , GRAPH_1:def 12;
L1076: ( card ( R23 -VSet ( rng R33 ) ) ) = 2 by L1075 , L1031 , L1036 , L1043 , L1042 , L1070 , L1068 , CARD_2:57;
thus L1077: contradiction by L1076 , L1023 , L1041 , L1072 , L891;
end;
end;

end;
suppose L1038: 1 < C125;

L1039: ( 1 + 1 ) <= C125 by L1038 , NAT_1:13;
consider C129 being (Element of ( NAT )) such that L1040: 1 <= C129 and L1041: C129 < C125 and L1042: C125 = ( C129 + 1 ) by L1039 , L1;
L1043: C125 <= ( len R31 ) by L1031 , FINSEQ_3:25;
L1044: C129 <= ( len R31 ) by L1043 , L1041 , XXREAL_0:2;
L1045: C129 in ( dom R31 ) by L1044 , L1040 , FINSEQ_3:25;
L1046: C129 <= ( len R33 ) by L1026 , L1042 , L1043 , XREAL_1:6;
L1047: ( R33 . C129 ) joins ( R31 /. C129 ) , ( R31 /. ( C129 + 1 ) ) by L1046 , L1025 , L1040 , L767;
L1048: ((( D123 . ( R33 . C129 ) ) = ( R31 /. C129 ) & ( D122 . ( R33 . C129 ) ) = ( R31 /. C125 )) or (( D123 . ( R33 . C129 ) ) = ( R31 /. C125 ) & ( D122 . ( R33 . C129 ) ) = ( R31 /. C129 ))) by L1047 , L1042 , GRAPH_1:def 12;
L1049: ( R31 /. C129 ) = ( R31 . C129 ) by L1040 , L1044 , FINSEQ_4:15;
L1050: ( R31 /. C125 ) = ( R31 . C125 ) by L1031 , PARTFUN1:def 6;
L1051: ( R33 . C129 ) joins ( R30 /. C129 ) , ( R30 /. ( C129 + 1 ) ) by L1004 , L1040 , L1046 , L767;
L1052: ((( D123 . ( R33 . C129 ) ) = ( R30 /. C129 ) & ( D122 . ( R33 . C129 ) ) = ( R30 /. C125 )) or (( D123 . ( R33 . C129 ) ) = ( R30 /. C125 ) & ( D122 . ( R33 . C129 ) ) = ( R30 /. C129 ))) by L1051 , L1042 , GRAPH_1:def 12;
L1053: ( R30 /. C125 ) = ( R30 . C125 ) by L1028 , L1031 , PARTFUN1:def 6;
L1054: ( R30 /. C129 ) = ( R30 . C129 ) by L1026 , L1027 , L1040 , L1044 , FINSEQ_4:15;
thus L1055: contradiction by L1054 , L1031 , L1032 , L1041 , L1045 , L1049 , L1050 , L1053 , L1048 , L1052;
end;
end;

end;
end;
assume L1026: (for R31 being (FinSequence of (the carrier of R23)) holds (R31 is_vertex_seq_of R33 implies R31 = R30));
assume L1027: ( card (the carrier of R23) ) <> 1;
consider R5 being set, R6 being set such that L1028: R5 in (the carrier of R23) and L1029: R6 in (the carrier of R23) and L1030: R5 <> R6 by L1027 , L998;
reconsider D128 = R6 as (Element of R23) by L1029;
reconsider D129 = R5 as (Element of R23) by L1028;
assume L1031: (R33 = ( {} ) or R33 alternates_vertices_in R23);
thus L1032: contradiction
proof
per cases  by L1031;
suppose L1033: R33 = ( {} );

L1034: <* D129 *> = R30 by L1033 , L1026 , L823;
L1035: ( R30 . 1 ) = D129 by L1034 , FINSEQ_1:40;
L1036: <* D128 *> = R30 by L1026 , L1033 , L823;
thus L1037: contradiction by L1036 , L1030 , L1035 , FINSEQ_1:40;
end;
suppose L1038: R33 alternates_vertices_in R23;

consider R31 being (FinSequence of (the carrier of R23)), R32 being (FinSequence of (the carrier of R23)) such that L1039: R31 <> R32 and L1040: R31 is_vertex_seq_of R33 and L1041: R32 is_vertex_seq_of R33 and L1042: (for R30 being (FinSequence of (the carrier of R23)) holds (R30 is_vertex_seq_of R33 implies (R30 = R31 or R30 = R32))) by L1038 , L945;
L1043: R31 = R30 by L1026 , L1040;
thus L1044: contradiction by L1043 , L1026 , L1039 , L1041;
end;
end;

end;
definition
let R23 being Graph;
let R33 being (Chain of R23);
assume L1033: (( card (the carrier of R23) ) = 1 or (R33 <> ( {} ) & (not R33 alternates_vertices_in R23)));
func vertex-seq R33 -> (FinSequence of (the carrier of R23)) means 
it is_vertex_seq_of R33;
existence by L826;
uniqueness by L1033 , L1003;
end;
theorem
L1035: (for R13 being (Element of ( NAT )) holds (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R31 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds (for R34 being (Chain of R23) holds ((R30 is_vertex_seq_of R33 & R34 = ( R33 | ( Seg R13 ) ) & R31 = ( R30 | ( Seg ( R13 + 1 ) ) )) implies R31 is_vertex_seq_of R34)))))))
proof
let R13 being (Element of ( NAT ));
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R31 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
let R34 being (Chain of R23);
assume L1036: R30 is_vertex_seq_of R33;
L1037: ( len R30 ) = ( ( len R33 ) + 1 ) by L1036 , L767;
assume that
L1038: R34 = ( R33 | ( Seg R13 ) )
and
L1039: R31 = ( R30 | ( Seg ( R13 + 1 ) ) );
L1040:
now
per cases ;
suppose L1041: R13 <= ( len R33 );

L1042: ( R13 + 1 ) <= ( len R30 ) by L1041 , L1037 , XREAL_1:6;
L1043: ( len R31 ) = ( R13 + 1 ) by L1042 , L1039 , FINSEQ_1:17;
L1044: ( len R34 ) = R13 by L1038 , L1041 , FINSEQ_1:17;
thus L1045: ( len R31 ) = ( ( len R34 ) + 1 ) by L1044 , L1039 , L1042 , FINSEQ_1:17;
let C130 being (Element of ( NAT ));
assume that
L1046: 1 <= C130
and
L1047: C130 <= ( len R34 );
L1048: 1 <= ( C130 + 1 ) by NAT_1:12;
L1049: ( R31 /. ( C130 + 1 ) ) = ( R31 . ( C130 + 1 ) ) by L1048 , L1044 , L1043 , L1047 , FINSEQ_4:15 , XREAL_1:7;
L1050: ( C130 + 1 ) <= ( ( len R34 ) + 1 ) by L1047 , XREAL_1:7;
L1051: ( C130 + 1 ) in ( Seg ( R13 + 1 ) ) by L1050 , L1044 , L1048;
L1052: ( R31 . ( C130 + 1 ) ) = ( R30 . ( C130 + 1 ) ) by L1051 , L1039 , FUNCT_1:49;
L1053: C130 <= ( len R33 ) by L1041 , L1044 , L1047 , XXREAL_0:2;
L1054: C130 <= ( len R30 ) by L1053 , L1037 , NAT_1:12;
L1055: ( R30 /. C130 ) = ( R30 . C130 ) by L1054 , L1046 , FINSEQ_4:15;
L1056: C130 <= ( R13 + 1 ) by L1044 , L1047 , NAT_1:12;
L1057: ( R31 /. C130 ) = ( R31 . C130 ) by L1056 , L1043 , L1046 , FINSEQ_4:15;
L1058: C130 in ( Seg R13 ) by L1044 , L1046 , L1047;
L1059: ( R34 . C130 ) = ( R33 . C130 ) by L1058 , L1038 , FUNCT_1:49;
L1060: C130 in ( Seg ( R13 + 1 ) ) by L1046 , L1056;
L1061: ( R31 . C130 ) = ( R30 . C130 ) by L1060 , L1039 , FUNCT_1:49;
L1062: ( R30 /. ( C130 + 1 ) ) = ( R30 . ( C130 + 1 ) ) by L1037 , L1053 , L1048 , FINSEQ_4:15 , XREAL_1:7;
thus L1063: ( R34 . C130 ) joins ( R31 /. C130 ) , ( R31 /. ( C130 + 1 ) ) by L1062 , L1036 , L1046 , L1053 , L1059 , L1061 , L1052 , L1055 , L1057 , L1049 , L767;
end;
suppose L1064: ( len R33 ) <= R13;

L1065: ( len R30 ) <= ( R13 + 1 ) by L1064 , L1037 , XREAL_1:6;
L1066: R31 = R30 by L1065 , L1039 , FINSEQ_2:20;
L1067: R34 = R33 by L1038 , L1064 , FINSEQ_2:20;
thus L1068: (( len R31 ) = ( ( len R34 ) + 1 ) & (for B64 being (Element of ( NAT )) holds ((1 <= B64 & B64 <= ( len R34 )) implies ( R34 . B64 ) joins ( R31 /. B64 ) , ( R31 /. ( B64 + 1 ) )))) by L1067 , L1036 , L1066 , L767;
end;
end;
thus L1070: thesis by L1040 , L767;
end;
theorem
L1071: (for R2 being FinSequence holds (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds (for R23 being Graph holds (for R33 being (Chain of R23) holds ((1 <= R12 & R12 <= R13 & R13 <= ( len R33 ) & R2 = ( (R12 , R13) -cut R33 )) implies R2 is (Chain of R23)))))))
proof
let R2 being FinSequence;
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
let R23 being Graph;
let R33 being (Chain of R23);
assume that
L1072: 1 <= R12
and
L1073: R12 <= R13
and
L1074: R13 <= ( len R33 );
L1075: R12 <= ( R13 + 1 ) by L1073 , NAT_1:12;
consider R30 being (FinSequence of (the carrier of R23)) such that L1076: R30 is_vertex_seq_of R33 by L826;
set D130 = ( (R12 , ( R13 + 1 )) -cut R30 );
L1077:
now
let C131 being (Element of ( NAT ));
assume that
L1078: 1 <= C131
and
L1079: C131 <= ( len D130 );
L1080: C131 in ( dom D130 ) by L1078 , L1079 , FINSEQ_3:25;
L1081: ( D130 . C131 ) in ( rng D130 ) by L1080 , FUNCT_1:def 3;
L1082: ( rng R30 ) c= (the carrier of R23) by FINSEQ_1:def 4;
L1083: ( rng D130 ) c= ( rng R30 ) by L314;
L1084: ( D130 . C131 ) in ( rng R30 ) by L1083 , L1081;
thus L1085: ( D130 . C131 ) in (the carrier of R23) by L1084 , L1082;
end;
assume L1086: R2 = ( (R12 , R13) -cut R33 );
L1087: ( ( ( len R2 ) + R12 ) - R12 ) = ( ( R13 + 1 ) - R12 ) by L1086 , L1072 , L1074 , L1075 , L226;
L1088: ( len R30 ) = ( ( len R33 ) + 1 ) by L1076 , L767;
L1089: ( R13 + 1 ) <= ( len R30 ) by L1088 , L1074 , XREAL_1:6;
L1090: ( ( ( len D130 ) + R12 ) - R12 ) = ( ( ( R13 + 1 ) + 1 ) - R12 ) by L1089 , L1072 , L1075 , L187;
L1091: ( len D130 ) = ( ( ( R13 - R12 ) + 1 ) + 1 ) by L1090;
L1092:
now
L1093: ( 1 - 1 ) <= ( R12 - 1 ) by L1072 , XREAL_1:9;
L1094: ( R12 - 1 ) = ( R12 -' 1 ) by L1093 , XREAL_0:def 2;
reconsider D131 = ( R12 - 1 ) as (Element of ( NAT )) by L1094;
let C132 being (Element of ( NAT ));
reconsider D132 = ( D131 + C132 ) as (Element of ( NAT ));
assume that
L1095: 1 <= C132
and
L1096: C132 <= ( len R2 );
L1097: ( ( 0 ) + 1 ) <= C132 by L1095;
consider R9 being (Element of ( NAT )) such that L1098: ( 0 ) <= R9 and L1099: R9 < ( len R2 ) and L1100: C132 = ( R9 + 1 ) by L1097 , L1096 , L1;
L1101: ( R9 + 1 ) < ( len D130 ) by L1087 , L1091 , L1099 , XREAL_1:6;
L1102: ( D132 + 1 ) = ( R12 + ( R9 + 1 ) ) by L1100;
L1103: ( D130 . ( C132 + 1 ) ) = ( R30 . ( D132 + 1 ) ) by L1102 , L1072 , L1075 , L1089 , L1101 , L187;
set D133 = ( R30 /. ( D132 + 1 ) );
set D134 = ( R30 /. D132 );
L1104: 1 <= ( D132 + 1 ) by NAT_1:12;
L1105: D132 = ( R12 + R9 ) by L1100;
L1106: R9 < ( len D130 ) by L1087 , L1091 , L1099 , NAT_1:13;
L1107: ( D130 . C132 ) = ( R30 . D132 ) by L1106 , L1072 , L1075 , L1089 , L1105 , L1101 , L187;
L1108: D132 <= ( ( R12 - 1 ) + ( R13 - ( R12 - 1 ) ) ) by L1087 , L1096 , XREAL_1:6;
L1109: D132 <= ( len R33 ) by L1108 , L1074 , XXREAL_0:2;
L1110: D132 <= ( len R30 ) by L1109 , L1088 , NAT_1:12;
take D135 = D134;
take D136 = D133;
L1111: ( D132 + 1 ) <= ( len R30 ) by L1088 , L1109 , XREAL_1:7;
L1112: ( 1 - 1 ) <= ( R12 - 1 ) by L1072 , XREAL_1:9;
L1113: ( ( 0 ) + 1 ) <= ( ( R12 - 1 ) + C132 ) by L1112 , L1095 , XREAL_1:7;
L1114: ( R33 . D132 ) joins D135 , D136 by L1113 , L1076 , L1109 , L767;
thus L1115: (D135 = ( D130 . C132 ) & D136 = ( D130 . ( C132 + 1 ) ) & ( R2 . C132 ) joins D135 , D136) by L1114 , L1072 , L1074 , L1086 , L1075 , L1099 , L1100 , L1105 , L1113 , L1110 , L1104 , L1111 , L1107 , L1103 , L226 , FINSEQ_4:15;
end;
thus L1116: R2 is (Chain of R23)
proof
thus L1117:now
let C133 being (Element of ( NAT ));
assume that
L1118: 1 <= C133
and
L1119: C133 <= ( len R2 );
L1120: C133 in ( dom R2 ) by L1118 , L1119 , FINSEQ_3:25;
L1121: ( R2 . C133 ) in ( rng R2 ) by L1120 , FUNCT_1:def 3;
L1122: ( rng R2 ) c= ( rng R33 ) by L1086 , L314;
L1123: ( R2 . C133 ) in ( rng R33 ) by L1122 , L1121;
L1124: ( rng R33 ) c= (the carrier' of R23) by FINSEQ_1:def 4;
thus L1125: ( R2 . C133 ) in (the carrier' of R23) by L1124 , L1123;
end;
take D130;
thus L1126: ( len D130 ) = ( ( len R2 ) + 1 ) by L1087 , L1090;
thus L1127: (for R13 being (Element of ( NAT )) holds ((1 <= R13 & R13 <= ( len D130 )) implies ( D130 . R13 ) in (the carrier of R23))) by L1077;
thus L1128: thesis by L1092;
end;

end;
theorem
L1117: (for R12 being (Element of ( NAT )) holds (for R13 being (Element of ( NAT )) holds (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R31 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds (for R34 being (Chain of R23) holds ((1 <= R12 & R12 <= R13 & R13 <= ( len R33 ) & R34 = ( (R12 , R13) -cut R33 ) & R30 is_vertex_seq_of R33 & R31 = ( (R12 , ( R13 + 1 )) -cut R30 )) implies R31 is_vertex_seq_of R34))))))))
proof
let R12 being (Element of ( NAT ));
let R13 being (Element of ( NAT ));
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R31 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
let R34 being (Chain of R23);
assume that
L1118: 1 <= R12
and
L1119: R12 <= R13
and
L1120: R13 <= ( len R33 );
L1121: R12 <= ( R13 + 1 ) by L1119 , NAT_1:12;
assume L1122: R34 = ( (R12 , R13) -cut R33 );
L1123: ( ( len R34 ) + R12 ) = ( R13 + 1 ) by L1122 , L1118 , L1120 , L1121 , L226;
assume that
L1124: R30 is_vertex_seq_of R33
and
L1125: R31 = ( (R12 , ( R13 + 1 )) -cut R30 );
L1126: ( len R30 ) = ( ( len R33 ) + 1 ) by L1124 , L767;
L1127: ( R13 + 1 ) <= ( len R30 ) by L1126 , L1120 , XREAL_1:6;
L1128: ( ( len R31 ) + R12 ) = ( ( R13 + 1 ) + 1 ) by L1127 , L1118 , L1125 , L1121 , L187;
thus L1129: ( len R31 ) = ( ( len R34 ) + 1 ) by L1128 , L1123;
let C134 being (Element of ( NAT ));
assume that
L1130: 1 <= C134
and
L1131: C134 <= ( len R34 );
L1132: ( ( 0 ) + 1 ) <= C134 by L1130;
consider R9 being (Element of ( NAT )) such that L1133: ( 0 ) <= R9 and L1134: R9 < ( len R34 ) and L1135: C134 = ( R9 + 1 ) by L1132 , L1131 , L1;
set D137 = ( R12 + R9 );
L1136: R9 < ( len R31 ) by L1129 , L1134 , NAT_1:13;
L1137: ( R31 . C134 ) = ( R30 . D137 ) by L1136 , L1118 , L1125 , L1121 , L1127 , L1135 , L187;
L1138: ( R12 + C134 ) <= ( ( len R34 ) + R12 ) by L1131 , XREAL_1:7;
L1139: ( ( ( R12 + R9 ) + 1 ) - 1 ) <= ( ( ( len R34 ) + R12 ) - 1 ) by L1138 , L1135 , XREAL_1:9;
L1140: D137 <= ( len R33 ) by L1139 , L1120 , L1123 , XXREAL_0:2;
L1141: D137 <= ( len R30 ) by L1140 , L1126 , NAT_1:12;
L1142: ( R30 /. D137 ) = ( R30 . D137 ) by L1141 , L1118 , FINSEQ_4:15 , NAT_1:12;
L1143: C134 <= ( len R34 ) by L1134 , L1135 , NAT_1:13;
L1144: C134 <= ( len R31 ) by L1143 , L1129 , NAT_1:12;
L1145: 1 <= ( C134 + 1 ) by NAT_1:12;
L1146: ( R31 /. ( C134 + 1 ) ) = ( R31 . ( C134 + 1 ) ) by L1145 , L1129 , L1143 , FINSEQ_4:15 , XREAL_1:7;
L1147: ( ( 0 ) + 1 ) = 1;
L1148: 1 <= C134 by L1147 , L1135 , NAT_1:13;
L1149: ( R31 /. C134 ) = ( R31 . C134 ) by L1148 , L1144 , FINSEQ_4:15;
set D138 = ( R30 /. ( D137 + 1 ) );
set D139 = ( R30 /. D137 );
L1150: ( ( R12 + R9 ) + 1 ) = ( R12 + ( R9 + 1 ) );
L1151: 1 <= D137 by L1118 , NAT_1:12;
L1152: ( R33 . D137 ) joins D139 , D138 by L1151 , L1124 , L1140 , L767;
L1153: 1 <= ( D137 + 1 ) by NAT_1:12;
L1154: ( R30 /. ( D137 + 1 ) ) = ( R30 . ( D137 + 1 ) ) by L1153 , L1126 , L1140 , FINSEQ_4:15 , XREAL_1:7;
L1155: ( R9 + 1 ) < ( len R31 ) by L1129 , L1134 , XREAL_1:6;
L1156: ( R31 . ( C134 + 1 ) ) = ( R30 . ( D137 + 1 ) ) by L1155 , L1118 , L1125 , L1121 , L1127 , L1135 , L1150 , L187;
thus L1157: thesis by L1156 , L1118 , L1120 , L1122 , L1121 , L1134 , L1135 , L1152 , L1137 , L1142 , L1154 , L1149 , L1146 , L226;
end;
theorem
L1158: (for R23 being Graph holds (for R31 being (FinSequence of (the carrier of R23)) holds (for R32 being (FinSequence of (the carrier of R23)) holds (for R34 being (Chain of R23) holds (for R35 being (Chain of R23) holds ((R31 is_vertex_seq_of R34 & R32 is_vertex_seq_of R35 & ( R31 . ( len R31 ) ) = ( R32 . 1 )) implies ( R34 ^ R35 ) is (Chain of R23)))))))
proof
let R23 being Graph;
let R31 being (FinSequence of (the carrier of R23));
let R32 being (FinSequence of (the carrier of R23));
let R34 being (Chain of R23);
let R35 being (Chain of R23);
assume that
L1159: R31 is_vertex_seq_of R34
and
L1160: R32 is_vertex_seq_of R35
and
L1161: ( R31 . ( len R31 ) ) = ( R32 . 1 );
set D140 = ( R34 ^ R35 );
set D141 = ( R31 ^' R32 );
L1162: ( len R32 ) = ( ( len R35 ) + 1 ) by L1160 , L767;
L1163: R32 <> ( {} ) by L1162;
L1164: ( ( len D141 ) + 1 ) = ( ( len R31 ) + ( len R32 ) ) by L1163 , L354;
L1165:
now
let C135 being (Element of ( NAT ));
assume that
L1166: 1 <= C135
and
L1167: C135 <= ( len D141 );
per cases ;
suppose L1168: C135 <= ( len R31 );

L1169: C135 in ( dom R31 ) by L1168 , L1166 , FINSEQ_3:25;
L1170: ( D141 . C135 ) = ( R31 . C135 ) by L1166 , L1168 , L360;
thus L1171: ( D141 . C135 ) in (the carrier of R23) by L1170 , L1169 , FINSEQ_2:11;
end;
suppose L1172: C135 > ( len R31 );

consider C136 being Nat such that L1173: C135 = ( ( len R31 ) + C136 ) by L1172 , NAT_1:10;
reconsider D142 = C136 as (Element of ( NAT )) by ORDINAL1:def 12;
L1174: D142 <> ( 0 ) by L1172 , L1173;
L1175: ( ( 0 ) + 1 ) <= D142 by L1174 , NAT_1:13;
L1176: ( ( len R31 ) + D142 ) <= ( ( len R31 ) + ( ( len R32 ) - 1 ) ) by L1164 , L1167 , L1173;
L1177: D142 <= ( ( len R32 ) - 1 ) by L1176 , XREAL_1:6;
L1178: ( D142 + 1 ) <= ( ( ( len R32 ) - 1 ) + 1 ) by L1177 , XREAL_1:6;
L1179: 1 <= ( D142 + 1 ) by NAT_1:12;
L1180: ( D142 + 1 ) in ( dom R32 ) by L1179 , L1178 , FINSEQ_3:25;
L1181: D142 < ( len R32 ) by L1178 , NAT_1:13;
L1182: ( D141 . ( ( len R31 ) + D142 ) ) = ( R32 . ( D142 + 1 ) ) by L1181 , L1175 , L365;
thus L1183: ( D141 . C135 ) in (the carrier of R23) by L1182 , L1173 , L1180 , FINSEQ_2:11;
end;
end;
L1185: ( len R31 ) = ( ( len R34 ) + 1 ) by L1159 , L767;
L1186:
now
let C137 being (Element of ( NAT ));
assume that
L1187: 1 <= C137
and
L1188: C137 <= ( len D140 );
L1189: C137 in ( dom D140 ) by L1187 , L1188 , FINSEQ_3:25;
per cases  by L1189 , FINSEQ_1:25;
suppose L1190: C137 in ( dom R34 );

set D143 = ( R31 /. ( C137 + 1 ) );
set D144 = ( R31 /. C137 );
L1191: ( D140 . C137 ) = ( R34 . C137 ) by L1190 , FINSEQ_1:def 7;
L1192: 1 <= C137 by L1190 , FINSEQ_3:25;
L1193: C137 <= ( len R34 ) by L1190 , FINSEQ_3:25;
L1194: ( C137 + 1 ) <= ( ( len R34 ) + 1 ) by L1193 , XREAL_1:6;
L1195: ( C137 + 1 ) <= ( len R31 ) by L1194 , L1159 , L767;
L1196: ( R31 /. ( C137 + 1 ) ) = ( R31 . ( C137 + 1 ) ) by L1195 , FINSEQ_4:15 , NAT_1:12;
L1197: C137 <= ( len R31 ) by L1185 , L1193 , NAT_1:12;
L1198: ( R31 /. C137 ) = ( R31 . C137 ) by L1197 , L1192 , FINSEQ_4:15;
L1199: ( D141 . ( C137 + 1 ) ) = ( R31 . ( C137 + 1 ) ) by L1195 , L360 , NAT_1:12;
L1200: ( D141 . C137 ) = ( R31 . C137 ) by L1192 , L1197 , L360;
L1201: ( R34 . C137 ) joins D144 , D143 by L1159 , L1192 , L1193 , L767;
thus L1202: (ex B65 , B66 being (Element of R23) st (B65 = ( D141 . C137 ) & B66 = ( D141 . ( C137 + 1 ) ) & ( D140 . C137 ) joins B65 , B66)) by L1201 , L1191 , L1198 , L1196 , L1200 , L1199;
end;
suppose L1203: (ex B67 being Nat st (B67 in ( dom R35 ) & C137 = ( ( len R34 ) + B67 )));

consider C138 being Nat such that L1204: C138 in ( dom R35 ) and L1205: C137 = ( ( len R34 ) + C138 ) by L1203;
L1206: ( D140 . C137 ) = ( R35 . C138 ) by L1204 , L1205 , FINSEQ_1:def 7;
L1207: 1 <= ( C138 + 1 ) by NAT_1:12;
L1208: 1 <= C138 by L1204 , FINSEQ_3:25;
L1209: C138 <= ( len R35 ) by L1204 , FINSEQ_3:25;
L1210: C138 <= ( len R32 ) by L1209 , L1162 , NAT_1:12;
reconsider D145 = C138 as (Element of ( NAT )) by L1204;
L1211: ( ( 0 ) + 1 ) <= D145 by L1204 , FINSEQ_3:25;
L1212: ( R32 /. ( D145 + 1 ) ) = ( R32 . ( D145 + 1 ) ) by L1162 , L1209 , L1207 , FINSEQ_4:15 , XREAL_1:7;
L1213: D145 < ( len R32 ) by L1162 , L1209 , NAT_1:13;
L1214: D145 <= ( len R32 ) by L1162 , L1209 , NAT_1:12;
consider R9 being (Element of ( NAT )) such that L1215: ( 0 ) <= R9 and L1216: R9 < ( len R32 ) and L1217: D145 = ( R9 + 1 ) by L1214 , L1211 , L1;
L1218: ( D141 . C137 ) = ( R32 . D145 )
proof
per cases  by L1208 , XXREAL_0:1;
suppose L1219: 1 = D145;

L1220: ( ( 0 ) + 1 ) <= ( len R31 ) by L1185 , NAT_1:13;
thus L1221: thesis by L1220 , L1161 , L1185 , L1205 , L1219 , L360;
end;
suppose L1222: 1 < D145;

L1223: 1 <= R9 by L1222 , L1217 , NAT_1:13;
thus L1224: ( D141 . C137 ) = ( D141 . ( ( len R31 ) + R9 ) ) by L1185 , L1205 , L1217
.= ( R32 . D145 ) by L1216 , L1217 , L1223 , L365;
end;
end;
set D146 = ( R32 /. ( D145 + 1 ) );
set D147 = ( R32 /. D145 );
L1226: ( R35 . D145 ) joins D147 , D146 by L1160 , L1208 , L1209 , L767;
L1227: ( R32 /. D145 ) = ( R32 . D145 ) by L1208 , L1210 , FINSEQ_4:15;
L1228: ( D141 . ( C137 + 1 ) ) = ( D141 . ( ( ( len R34 ) + 1 ) + D145 ) ) by L1205
.= ( R32 . ( D145 + 1 ) ) by L1185 , L1208 , L1213 , L365;
thus L1229: (ex B68 , B69 being (Element of R23) st (B68 = ( D141 . C137 ) & B69 = ( D141 . ( C137 + 1 ) ) & ( D140 . C137 ) joins B68 , B69)) by L1228 , L1206 , L1227 , L1212 , L1226 , L1218;
end;
end;
L1231: ( len D141 ) = ( ( ( len R34 ) + ( len R35 ) ) + 1 ) by L1185 , L1162 , L1164
.= ( ( len D140 ) + 1 ) by FINSEQ_1:22;
thus L1232: ( R34 ^ R35 ) is (Chain of R23)
proof
thus L1233:now
let C139 being (Element of ( NAT ));
assume that
L1234: 1 <= C139
and
L1235: C139 <= ( len D140 );
L1236: C139 in ( dom D140 ) by L1234 , L1235 , FINSEQ_3:25;
per cases  by L1236 , FINSEQ_1:25;
suppose L1237: C139 in ( dom R34 );

L1238: ( D140 . C139 ) = ( R34 . C139 ) by L1237 , FINSEQ_1:def 7;
L1239: C139 <= ( len R34 ) by L1237 , FINSEQ_3:25;
L1240: 1 <= C139 by L1237 , FINSEQ_3:25;
thus L1241: ( ( R34 ^ R35 ) . C139 ) in (the carrier' of R23) by L1240 , L1239 , L1238 , GRAPH_1:def 14;
end;
suppose L1242: (ex B70 being Nat st (B70 in ( dom R35 ) & C139 = ( ( len R34 ) + B70 )));

consider C140 being Nat such that L1243: C140 in ( dom R35 ) and L1244: C139 = ( ( len R34 ) + C140 ) by L1242;
L1245: 1 <= C140 by L1243 , FINSEQ_3:25;
L1246: C140 <= ( len R35 ) by L1243 , FINSEQ_3:25;
L1247: ( D140 . C139 ) = ( R35 . C140 ) by L1243 , L1244 , FINSEQ_1:def 7;
thus L1248: ( ( R34 ^ R35 ) . C139 ) in (the carrier' of R23) by L1247 , L1243 , L1245 , L1246 , GRAPH_1:def 14;
end;
end;
thus L1250: thesis by L1231 , L1165 , L1186;
end;

end;
theorem
L1233: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R31 being (FinSequence of (the carrier of R23)) holds (for R32 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds (for R34 being (Chain of R23) holds (for R35 being (Chain of R23) holds ((R31 is_vertex_seq_of R34 & R32 is_vertex_seq_of R35 & ( R31 . ( len R31 ) ) = ( R32 . 1 ) & R33 = ( R34 ^ R35 ) & R30 = ( R31 ^' R32 )) implies R30 is_vertex_seq_of R33))))))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R31 being (FinSequence of (the carrier of R23));
let R32 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
let R34 being (Chain of R23);
let R35 being (Chain of R23);
assume that
L1234: R31 is_vertex_seq_of R34
and
L1235: R32 is_vertex_seq_of R35
and
L1236: ( R31 . ( len R31 ) ) = ( R32 . 1 );
set D148 = ( R31 ^' R32 );
set D149 = ( R34 ^ R35 );
assume that
L1237: R33 = ( R34 ^ R35 )
and
L1238: R30 = ( R31 ^' R32 );
L1239: ( len R31 ) = ( ( len R34 ) + 1 ) by L1234 , L767;
L1240: ( len R32 ) = ( ( len R35 ) + 1 ) by L1235 , L767;
L1241: R32 <> ( {} ) by L1240;
L1242: ( ( len D148 ) + 1 ) = ( ( len R31 ) + ( len R32 ) ) by L1241 , L354;
L1243: ( len D148 ) = ( ( ( len R34 ) + ( len R35 ) ) + 1 ) by L1242 , L1239 , L1240
.= ( ( len D149 ) + 1 ) by FINSEQ_1:22;
reconsider D150 = D148 as (FinSequence of (the carrier of R23));
L1244:
now
let C141 being (Element of ( NAT ));
assume that
L1245: 1 <= C141
and
L1246: C141 <= ( len D149 );
L1247: C141 in ( dom D149 ) by L1245 , L1246 , FINSEQ_3:25;
L1248: C141 <= ( len D150 ) by L1243 , L1246 , NAT_1:12;
L1249: ( D150 /. C141 ) = ( D150 . C141 ) by L1248 , L1245 , FINSEQ_4:15;
L1250: 1 <= ( C141 + 1 ) by NAT_1:12;
L1251: ( D150 /. ( C141 + 1 ) ) = ( D150 . ( C141 + 1 ) ) by L1250 , L1243 , L1246 , FINSEQ_4:15 , XREAL_1:7;
per cases  by L1247 , FINSEQ_1:25;
suppose L1252: C141 in ( dom R34 );

set D151 = ( R31 /. ( C141 + 1 ) );
set D152 = ( R31 /. C141 );
L1253: 1 <= C141 by L1252 , FINSEQ_3:25;
L1254: C141 <= ( len R34 ) by L1252 , FINSEQ_3:25;
L1255: ( C141 + 1 ) <= ( ( len R34 ) + 1 ) by L1254 , XREAL_1:6;
L1256: ( C141 + 1 ) <= ( len R31 ) by L1255 , L1234 , L767;
L1257: ( R31 /. ( C141 + 1 ) ) = ( R31 . ( C141 + 1 ) ) by L1256 , FINSEQ_4:15 , NAT_1:12;
L1258: C141 <= ( len R31 ) by L1239 , L1254 , NAT_1:12;
L1259: ( R31 /. C141 ) = ( R31 . C141 ) by L1258 , L1253 , FINSEQ_4:15;
L1260: ( D150 . ( C141 + 1 ) ) = ( R31 . ( C141 + 1 ) ) by L1256 , L360 , NAT_1:12;
L1261: ( D150 . C141 ) = ( R31 . C141 ) by L1253 , L1258 , L360;
L1262: ( R34 . C141 ) joins D152 , D151 by L1234 , L1253 , L1254 , L767;
thus L1263: ( D149 . C141 ) joins ( D150 /. C141 ) , ( D150 /. ( C141 + 1 ) ) by L1262 , L1249 , L1251 , L1252 , L1259 , L1257 , L1261 , L1260 , FINSEQ_1:def 7;
end;
suppose L1264: (ex B71 being Nat st (B71 in ( dom R35 ) & C141 = ( ( len R34 ) + B71 )));

consider C142 being (Element of ( NAT )) such that L1265: C142 in ( dom R35 ) and L1266: C141 = ( ( len R34 ) + C142 ) by L1264;
L1267: ( ( 0 ) + 1 ) <= C142 by L1265 , FINSEQ_3:25;
set D153 = ( R32 /. ( C142 + 1 ) );
set D154 = ( R32 /. C142 );
L1268: C142 <= ( len R35 ) by L1265 , FINSEQ_3:25;
L1269: C142 < ( len R32 ) by L1268 , L1240 , NAT_1:13;
L1270: 1 <= C142 by L1265 , FINSEQ_3:25;
L1271: ( R35 . C142 ) joins D154 , D153 by L1270 , L1235 , L1268 , L767;
L1272: C142 <= ( len R32 ) by L1240 , L1268 , NAT_1:12;
consider R9 being (Element of ( NAT )) such that L1273: ( 0 ) <= R9 and L1274: R9 < ( len R32 ) and L1275: C142 = ( R9 + 1 ) by L1272 , L1267 , L1;
L1276: ( D150 . C141 ) = ( R32 . C142 )
proof
per cases  by L1270 , XXREAL_0:1;
suppose L1277: 1 = C142;

L1278: ( ( 0 ) + 1 ) <= ( len R31 ) by L1239 , NAT_1:13;
thus L1279: thesis by L1278 , L1236 , L1239 , L1266 , L1277 , L360;
end;
suppose L1280: 1 < C142;

L1281: 1 <= R9 by L1280 , L1275 , NAT_1:13;
thus L1282: ( D150 . C141 ) = ( D150 . ( ( len R31 ) + R9 ) ) by L1239 , L1266 , L1275
.= ( R32 . C142 ) by L1274 , L1275 , L1281 , L365;
end;
end;
L1284: 1 <= ( C142 + 1 ) by NAT_1:12;
L1285: ( R32 /. ( C142 + 1 ) ) = ( R32 . ( C142 + 1 ) ) by L1284 , L1240 , L1268 , FINSEQ_4:15 , XREAL_1:7;
L1286: C142 <= ( len R32 ) by L1240 , L1268 , NAT_1:12;
L1287: ( R32 /. C142 ) = ( R32 . C142 ) by L1286 , L1270 , FINSEQ_4:15;
L1288: ( D150 . ( C141 + 1 ) ) = ( D150 . ( ( ( len R34 ) + 1 ) + C142 ) ) by L1266
.= ( R32 . ( C142 + 1 ) ) by L1239 , L1270 , L1269 , L365;
thus L1289: ( D149 . C141 ) joins ( D150 /. C141 ) , ( D150 /. ( C141 + 1 ) ) by L1288 , L1249 , L1251 , L1265 , L1266 , L1287 , L1285 , L1271 , L1276 , FINSEQ_1:def 7;
end;
end;
thus L1291: thesis by L1244 , L1237 , L1238 , L1243 , L767;
end;
begin
L1292: (for R23 being Graph holds (for R24 being (Element of R23) holds <* R24 *> is_vertex_seq_of ( {} )))
proof
let R23 being Graph;
let R24 being (Element of R23);
set D155 = <* R24 *>;
set D156 = ( {} );
L1293: (for R13 being (Element of ( NAT )) holds ((1 <= R13 & R13 <= ( len D156 )) implies ( D156 . R13 ) joins ( D155 /. R13 ) , ( D155 /. ( R13 + 1 ) )));
L1294: ( len D155 ) = ( ( 0 ) + 1 ) by FINSEQ_1:39
.= ( ( len D156 ) + 1 );
thus L1295: thesis by L1294 , L1293 , L767;
end;
definition
let R23 being Graph;
let C143 being (Chain of R23);
attr C143 is  simple
means
:L1296: (ex R30 being (FinSequence of (the carrier of R23)) st (R30 is_vertex_seq_of C143 & (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R30 ) & ( R30 . R13 ) = ( R30 . R12 )) implies (R13 = 1 & R12 = ( len R30 )))))));
end;
registration
let R23 being Graph;
cluster  simple for (Chain of R23);
existence
proof
set D157 = the (Element of R23);
set D158 = the  empty (Chain of R23);
take D158;
reconsider D159 = <* D157 *> as (FinSequence of (the carrier of R23));
take D159;
thus L1298: D159 is_vertex_seq_of D158 by L1292;
let R13 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
assume that
L1299: 1 <= R13
and
L1300: R13 < R12
and
L1301: R12 <= ( len D159 )
and
L1302: ( D159 . R13 ) = ( D159 . R12 );
L1303: 1 < R12 by L1299 , L1300 , XXREAL_0:2;
thus L1304: thesis by L1303 , L1301 , FINSEQ_1:39;
end;
end;
theorem
L1306: (for R13 being (Element of ( NAT )) holds (for R23 being Graph holds (for R36 being  simple (Chain of R23) holds ( R36 | ( Seg R13 ) ) is  simple  simple  simple  simple (Chain of R23))))
proof
let R13 being (Element of ( NAT ));
let R23 being Graph;
let R36 being  simple (Chain of R23);
reconsider D160 = ( R36 | ( Seg R13 ) ) as (Chain of R23) by GRAPH_1:4;
consider R30 being (FinSequence of (the carrier of R23)) such that L1307: R30 is_vertex_seq_of R36 and L1308: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R30 ) & ( R30 . R13 ) = ( R30 . R12 )) implies (R13 = 1 & R12 = ( len R30 ))))) by L1296;
reconsider D161 = ( R30 | ( Seg ( R13 + 1 ) ) ) as (FinSequence of (the carrier of R23)) by FINSEQ_1:18;
L1309:
now
take D162 = D161;
thus L1310: D162 is_vertex_seq_of D160 by L1307 , L1035;
let R10 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
assume that
L1311: 1 <= R10
and
L1312: R10 < R12
and
L1313: R12 <= ( len D162 )
and
L1314: ( D162 . R10 ) = ( D162 . R12 );
L1315: R10 <= ( len D162 ) by L1312 , L1313 , XXREAL_0:2;
L1316: ( D162 . R10 ) = ( R30 . R10 ) by L1315 , L1311 , L16;
L1317: 1 <= R12 by L1311 , L1312 , XXREAL_0:2;
L1318: ( D162 . R12 ) = ( R30 . R12 ) by L1317 , L1313 , L16;
L1319: ( len D162 ) <= ( len R30 ) by L16;
L1320: R12 <= ( len R30 ) by L1319 , L1313 , XXREAL_0:2;
thus L1321: R10 = 1 by L1320 , L1308 , L1311 , L1312 , L1314 , L1316 , L1318;
L1322: (( len D162 ) = ( len R30 ) or ( len D162 ) < ( len R30 )) by L1319 , XXREAL_0:1;
thus L1323: R12 = ( len D162 ) by L1322 , L1308 , L1311 , L1312 , L1313 , L1314 , L1316 , L1318 , L1320;
end;
thus L1324: thesis by L1309 , L1296;
end;
theorem
L1325: (for R23 being Graph holds (for R31 being (FinSequence of (the carrier of R23)) holds (for R32 being (FinSequence of (the carrier of R23)) holds (for R36 being  simple (Chain of R23) holds ((2 < ( len R36 ) & R31 is_vertex_seq_of R36 & R32 is_vertex_seq_of R36) implies R31 = R32)))))
proof
let R23 being Graph;
let R31 being (FinSequence of (the carrier of R23));
let R32 being (FinSequence of (the carrier of R23));
let R36 being  simple (Chain of R23);
assume that
L1326: 2 < ( len R36 )
and
L1327: R31 is_vertex_seq_of R36
and
L1328: R32 is_vertex_seq_of R36;
L1329: ( len R31 ) = ( ( len R36 ) + 1 ) by L1327 , L767;
defpred S13[ Nat ] means ($1 in ( dom R31 ) & ( R31 . $1 ) <> ( R32 . $1 ));
set D163 = (the Target of R23);
set D164 = (the Source of R23);
L1330: ( Seg ( len R31 ) ) = ( dom R31 ) by FINSEQ_1:def 3;
L1331: ( Seg ( len R32 ) ) = ( dom R32 ) by FINSEQ_1:def 3;
L1332: ( len R32 ) = ( ( len R36 ) + 1 ) by L1328 , L767;
assume L1333: R31 <> R32;
L1334: (ex B72 being Nat st S13[ B72 ]) by L1333 , L1329 , L1332 , FINSEQ_2:9;
consider C144 being Nat such that L1335: S13[ C144 ] and L1336: (for B73 being Nat holds (S13[ B73 ] implies C144 <= B73)) from NAT_1:sch 5(L1334);
L1337: 1 <= C144 by L1335 , FINSEQ_3:25;
per cases  by L1337 , XXREAL_0:1;
suppose L1338: C144 = 1;

set D165 = ( R32 /. ( ( 1 + 1 ) + 1 ) );
set D166 = ( R32 /. ( 1 + 1 ) );
set D167 = ( R32 /. 1 );
set D168 = ( R31 /. ( ( 1 + 1 ) + 1 ) );
set D169 = ( R31 /. ( 1 + 1 ) );
set D170 = ( R31 /. 1 );
L1339: ( ( 1 + 1 ) + 1 ) <= ( len R31 ) by L1326 , L1329 , XREAL_1:6;
L1340: D168 = ( R31 . ( ( 1 + 1 ) + 1 ) ) by L1339 , FINSEQ_4:15;
L1341: 1 <= ( len R31 ) by L1339 , XXREAL_0:2;
L1342: D170 = ( R31 . 1 ) by L1341 , FINSEQ_4:15;
L1343: 1 <= ( len R36 ) by L1326 , XXREAL_0:2;
L1344: ( R36 . 1 ) joins D167 , D166 by L1343 , L1328 , L767;
L1345: ( R36 . 1 ) joins D170 , D169 by L1327 , L1343 , L767;
L1346: ((D170 = D167 & D169 = D166) or (D170 = D166 & D169 = D167)) by L1345 , L1344 , L761;
L1347: D167 = ( R32 . 1 ) by L1329 , L1332 , L1341 , FINSEQ_4:15;
consider R30 being (FinSequence of (the carrier of R23)) such that L1348: R30 is_vertex_seq_of R36 and L1349: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R30 ) & ( R30 . R13 ) = ( R30 . R12 )) implies (R13 = 1 & R12 = ( len R30 ))))) by L1296;
L1350: R36 <> ( {} ) by L1326;
L1351: (R30 = R31 or R30 = R32) by L1350 , L1327 , L1328 , L1333 , L1348 , L845;
L1352: D165 = ( R32 . ( ( 1 + 1 ) + 1 ) ) by L1329 , L1332 , L1339 , FINSEQ_4:15;
L1353: ( R36 . 2 ) joins D166 , D165 by L1326 , L1328 , L767;
L1354: ( R36 . 2 ) joins D169 , D168 by L1326 , L1327 , L767;
L1355: D167 = D165 by L1354 , L1335 , L1338 , L1342 , L1347 , L1353 , L1346 , L761;
L1356: D170 = D168 by L1335 , L1338 , L1342 , L1347 , L1354 , L1353 , L1346 , L761;
L1357: ( ( 1 + 1 ) + 1 ) = ( len R30 ) by L1356 , L1329 , L1332 , L1339 , L1342 , L1340 , L1347 , L1352 , L1355 , L1349 , L1351;
thus L1358: contradiction by L1357 , L1326 , L1329 , L1332 , L1351;
end;
suppose L1359: 1 < C144;

L1360: ( 1 + 1 ) <= C144 by L1359 , NAT_1:13;
consider C145 being (Element of ( NAT )) such that L1361: 1 <= C145 and L1362: C145 < C144 and L1363: C144 = ( C145 + 1 ) by L1360 , L1;
L1364: C144 <= ( len R31 ) by L1335 , FINSEQ_3:25;
L1365: C145 <= ( len R31 ) by L1364 , L1362 , XXREAL_0:2;
L1366: C145 in ( dom R31 ) by L1365 , L1361 , FINSEQ_3:25;
L1367: ( R31 /. C145 ) = ( R31 . C145 ) by L1361 , L1365 , FINSEQ_4:15;
L1368: ( R32 /. C144 ) = ( R32 . C144 ) by L1329 , L1332 , L1330 , L1331 , L1335 , PARTFUN1:def 6;
L1369: ( R31 /. C144 ) = ( R31 . C144 ) by L1335 , PARTFUN1:def 6;
L1370: C145 <= ( len R36 ) by L1329 , L1363 , L1364 , XREAL_1:6;
L1371: ( R36 . C145 ) joins ( R31 /. C145 ) , ( R31 /. ( C145 + 1 ) ) by L1370 , L1327 , L1361 , L767;
L1372: ((( D164 . ( R36 . C145 ) ) = ( R31 /. C145 ) & ( D163 . ( R36 . C145 ) ) = ( R31 /. C144 )) or (( D164 . ( R36 . C145 ) ) = ( R31 /. C144 ) & ( D163 . ( R36 . C145 ) ) = ( R31 /. C145 ))) by L1371 , L1363 , GRAPH_1:def 12;
L1373: ( R36 . C145 ) joins ( R32 /. C145 ) , ( R32 /. ( C145 + 1 ) ) by L1328 , L1361 , L1370 , L767;
L1374: ((( D164 . ( R36 . C145 ) ) = ( R32 /. C145 ) & ( D163 . ( R36 . C145 ) ) = ( R32 /. C144 )) or (( D164 . ( R36 . C145 ) ) = ( R32 /. C144 ) & ( D163 . ( R36 . C145 ) ) = ( R32 /. C145 ))) by L1373 , L1363 , GRAPH_1:def 12;
L1375: ( R32 /. C145 ) = ( R32 . C145 ) by L1329 , L1332 , L1361 , L1365 , FINSEQ_4:15;
thus L1376: contradiction by L1375 , L1335 , L1336 , L1362 , L1366 , L1367 , L1369 , L1368 , L1372 , L1374;
end;
end;
theorem
L1378: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R36 being  simple (Chain of R23) holds (R30 is_vertex_seq_of R36 implies (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R30 ) & ( R30 . R13 ) = ( R30 . R12 )) implies (R13 = 1 & R12 = ( len R30 )))))))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R36 being  simple (Chain of R23);
assume L1379: R30 is_vertex_seq_of R36;
consider R31 being (FinSequence of (the carrier of R23)) such that L1380: R31 is_vertex_seq_of R36 and L1381: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R31 ) & ( R31 . R13 ) = ( R31 . R12 )) implies (R13 = 1 & R12 = ( len R31 ))))) by L1296;
per cases ;
suppose L1382: ( len R36 ) <= 2;

thus L1383: thesis
proof
per cases  by L1382 , NAT_1:26;
suppose L1384: ( len R36 ) = ( 0 );

let R13 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
L1385: ( len R30 ) = ( ( 0 ) + 1 ) by L1379 , L1384 , L767;
thus L1386: thesis by L1385 , XXREAL_0:2;
end;
suppose L1387: ( len R36 ) = 1;

L1388: ( len R30 ) = ( 1 + 1 ) by L1387 , L1379 , L767;
let R13 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
assume that
L1389: 1 <= R13
and
L1390: R13 < R12
and
L1391: R12 <= ( len R30 )
and
L1392: ( R30 . R13 ) = ( R30 . R12 );
L1393: ( R13 + 1 ) <= R12 by L1390 , NAT_1:13;
L1394: ( R13 + 1 ) <= ( 1 + 1 ) by L1393 , L1388 , L1391 , XXREAL_0:2;
L1395: R13 <= 1 by L1394 , XREAL_1:6;
L1396: R13 = 1 by L1395 , L1389 , XXREAL_0:1;
thus L1397: thesis by L1396 , L1388 , L1391 , L1393 , XXREAL_0:1;
end;
suppose L1398: ( len R36 ) = 2;

set D171 = ( R31 /. ( 1 + 1 ) );
set D172 = ( R30 /. ( 1 + 1 ) );
set D173 = ( R31 /. 1 );
L1399: ( R36 . 1 ) joins D173 , D171 by L1380 , L1398 , L767;
set D174 = ( R30 /. 1 );
L1400: ( R36 . 1 ) joins D174 , D172 by L1379 , L1398 , L767;
L1401: ((D174 = D173 & D172 = D171) or (D174 = D171 & D172 = D173)) by L1400 , L1399 , L761;
L1402: ( len R30 ) = ( ( 1 + 1 ) + 1 ) by L1379 , L1398 , L767;
L1403: D172 = ( R30 . ( 1 + 1 ) ) by L1402 , FINSEQ_4:15;
set D175 = ( R30 /. ( ( 1 + 1 ) + 1 ) );
set D176 = ( R31 /. ( ( 1 + 1 ) + 1 ) );
L1404: ( R36 . 2 ) joins D171 , D176 by L1380 , L1398 , L767;
L1405: ( R36 . 2 ) joins D172 , D175 by L1379 , L1398 , L767;
L1406: ((D172 = D171 & D175 = D176) or (D172 = D176 & D175 = D171)) by L1405 , L1404 , L761;
L1407: ( len R31 ) = ( ( 1 + 1 ) + 1 ) by L1380 , L1398 , L767;
L1408: D173 = ( R31 . 1 ) by L1407 , FINSEQ_4:15;
L1409: D176 = ( R31 . ( ( 1 + 1 ) + 1 ) ) by L1407 , FINSEQ_4:15;
L1410: D171 = ( R31 . ( 1 + 1 ) ) by L1407 , FINSEQ_4:15;
let R13 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
assume that
L1411: 1 <= R13
and
L1412: R13 < R12
and
L1413: R12 <= ( len R30 )
and
L1414: ( R30 . R13 ) = ( R30 . R12 );
L1415: ( R13 + 1 ) <= R12 by L1412 , NAT_1:13;
L1416: ( R13 + 1 ) <= ( ( 1 + 1 ) + 1 ) by L1415 , L1402 , L1413 , XXREAL_0:2;
L1417: R13 <= ( 1 + 1 ) by L1416 , XREAL_1:6;
L1418: D175 = ( R30 . ( ( 1 + 1 ) + 1 ) ) by L1402 , FINSEQ_4:15;
L1419: D174 = ( R30 . 1 ) by L1402 , FINSEQ_4:15;
thus L1420: thesis
proof
per cases  by L1411 , L1417 , NAT_1:9;
suppose L1421: R13 = 1;

L1422: 1 < R12 by L1411 , L1412 , XXREAL_0:2;
L1423: ( 1 + 1 ) <= R12 by L1422 , NAT_1:13;
thus L1424: thesis
proof
per cases  by L1402 , L1413 , L1423 , NAT_1:9;
suppose L1425: R12 = ( 1 + 1 );

thus L1426: thesis by L1425 , L1381 , L1407 , L1419 , L1403 , L1408 , L1410 , L1401 , L1414 , L1421;
end;
suppose L1427: R12 = ( ( 1 + 1 ) + 1 );

thus L1428: thesis by L1427 , L1379 , L1398 , L1421 , L767;
end;
end;

end;
suppose L1425: R13 = ( 1 + 1 );

L1426: ( ( 1 + 1 ) + 1 ) <= R12 by L1425 , L1412 , NAT_1:13;
L1427: R12 = ( ( 1 + 1 ) + 1 ) by L1426 , L1402 , L1413 , XXREAL_0:1;
thus L1428: thesis by L1427 , L1381 , L1407 , L1403 , L1418 , L1410 , L1409 , L1406 , L1414 , L1425;
end;
end;

end;
end;

end;
suppose L1384: 2 < ( len R36 );

L1385: R30 = R31 by L1384 , L1379 , L1380 , L1325;
thus L1386: thesis by L1385 , L1381;
end;
end;
theorem
L1388: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds (((not R33 is  simple  simple  simple  simple (Chain of R23)) & R30 is_vertex_seq_of R33) implies (ex B74 being (Subset of R33) st (ex B75 being (Subset of R30) st (ex R34 being (Chain of R23) st (ex R31 being (FinSequence of (the carrier of R23)) st (( len R34 ) < ( len R33 ) & R31 is_vertex_seq_of R34 & ( len R31 ) < ( len R30 ) & ( R30 . 1 ) = ( R31 . 1 ) & ( R30 . ( len R30 ) ) = ( R31 . ( len R31 ) ) & ( Seq B74 ) = R34 & ( Seq B75 ) = R31)))))))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume that
L1389: (not R33 is  simple  simple  simple  simple (Chain of R23))
and
L1390: R30 is_vertex_seq_of R33;
consider C146 , C147 being (Element of ( NAT )) such that L1391: 1 <= C146 and L1392: C146 < C147 and L1393: C147 <= ( len R30 ) and L1394: ( R30 . C146 ) = ( R30 . C147 ) and L1395: (C146 <> 1 or C147 <> ( len R30 )) by L1389 , L1390 , L1296;
L1396: ( C147 - C146 ) > ( C146 - C146 ) by L1392 , XREAL_1:9;
L1397: ( len R30 ) = ( ( len R33 ) + 1 ) by L1390 , L767;
reconsider D177 = ( C146 -' 1 ) as (Element of ( NAT ));
L1398: ( 1 - 1 ) <= ( C146 - 1 ) by L1391 , XREAL_1:9;
L1399: ( C146 - 1 ) = ( C146 -' 1 ) by L1398 , XREAL_0:def 2;
L1400: ( D177 + 1 ) = C146 by L1399;
per cases  by L1395;
suppose L1401: (C146 <> 1 & C147 <> ( len R30 ));

set D178 = { B76 where B76 is (Element of ( NAT )) : (C147 <= B76 & B76 <= ( len R33 )) };
set D179 = { B77 where B77 is (Element of ( NAT )) : (1 <= B77 & B77 <= D177) };
set D180 = { R10 where R10 is (Element of ( NAT )) : ((1 <= R10 & R10 <= C146) or (( C147 + 1 ) <= R10 & R10 <= ( len R30 ))) };
reconsider D181 = ( (C147 , ( ( len R33 ) + 1 )) -cut R30 ) as (FinSequence of (the carrier of R23));
reconsider D182 = ( (1 , C146) -cut R30 ) as (FinSequence of (the carrier of R23));
set D183 = ( (( C147 + 1 ) , ( ( len R33 ) + 1 )) -cut R30 );
L1402: 1 <= ( C147 + 1 ) by NAT_1:12;
L1403: 1 <= C147 by L1391 , L1392 , XXREAL_0:2;
L1404: ( 1 - 1 ) <= ( C147 - 1 ) by L1403 , XREAL_1:9;
L1405: ( C147 -' 1 ) = ( C147 - 1 ) by L1404 , XREAL_0:def 2;
reconsider D184 = ( C147 - 1 ) as (Element of ( NAT )) by L1405;
L1406: C147 < ( len R30 ) by L1393 , L1401 , XXREAL_0:1;
L1407: C147 <= ( len R33 ) by L1406 , L1397 , NAT_1:13;
reconsider D185 = ( (C147 , ( len R33 )) -cut R33 ) as (Chain of R23) by L1407 , L1403 , L1071;
L1408: ( ( len D185 ) + C147 ) = ( ( len R33 ) + 1 ) by L1403 , L1407 , L187;
deffunc H5(set) = ( R33 . $1 );
set D186 = { R10 where R10 is (Element of ( NAT )) : ((1 <= R10 & R10 <= D177) or (C147 <= R10 & R10 <= ( len R33 ))) };
consider C148 being Function such that L1409: ( dom C148 ) = D186 and L1410: (for R5 being set holds (R5 in D186 implies ( C148 . R5 ) = H5(R5))) from FUNCT_1:sch 3;
L1411: C146 < ( len R30 ) by L1392 , L1393 , XXREAL_0:2;
L1412: ( C146 - 1 ) < ( ( ( len R33 ) + 1 ) - 1 ) by L1411 , L1397 , XREAL_1:9;
L1413: D186 c= ( Seg ( len R33 ) )
proof
let C149 being set;
assume L1414: C149 in D186;
consider C150 being (Element of ( NAT )) such that L1415: C149 = C150 and L1416: ((1 <= C150 & C150 <= D177) or (C147 <= C150 & C150 <= ( len R33 ))) by L1414;
L1417: 1 <= C150 by L1403 , L1416 , XXREAL_0:2;
L1418: C150 <= ( len R33 ) by L1399 , L1412 , L1416 , XXREAL_0:2;
thus L1419: thesis by L1418 , L1415 , L1417;
end;
reconsider D187 = C148 as FinSubsequence by L1413 , L1409 , FINSEQ_1:def 12;
L1420: D187 c= R33
proof
let C151 being set;
assume L1421: C151 in D187;
consider R5 being set, R6 being set such that L1422: [ R5 , R6 ] = C151 by L1421 , RELAT_1:def 1;
L1423: R5 in ( dom D187 ) by L1421 , L1422 , FUNCT_1:1;
consider C152 being (Element of ( NAT )) such that L1424: R5 = C152 and L1425: ((1 <= C152 & C152 <= D177) or (C147 <= C152 & C152 <= ( len R33 ))) by L1423 , L1409;
L1426: 1 <= C152 by L1403 , L1425 , XXREAL_0:2;
L1427: C152 <= ( len R33 ) by L1399 , L1412 , L1425 , XXREAL_0:2;
L1428: R5 in ( dom R33 ) by L1427 , L1424 , L1426 , FINSEQ_3:25;
L1429: R6 = ( D187 . R5 ) by L1421 , L1422 , FUNCT_1:1;
L1430: R6 = ( R33 . C152 ) by L1429 , L1409 , L1410 , L1423 , L1424;
thus L1431: thesis by L1430 , L1422 , L1424 , L1428 , FUNCT_1:1;
end;
L1432: 1 < C146 by L1391 , L1401 , XXREAL_0:1;
L1433: ( 1 + 1 ) <= C146 by L1432 , NAT_1:13;
L1434: ( ( 1 + 1 ) - 1 ) <= ( C146 - 1 ) by L1433 , XREAL_1:9;
reconsider D188 = ( (1 , D177) -cut R33 ) as (Chain of R23) by L1434 , L1399 , L1412 , L1071;
reconsider D189 = D187 as (Subset of R33) by L1420;
take D189;
L1435: D182 is_vertex_seq_of D188 by L1390 , L1400 , L1434 , L1412 , L1117;
L1436: ( len D182 ) = ( ( len D188 ) + 1 ) by L1435 , L767;
L1437:
now
let C153 being set;
thus L1438:now
assume L1439: C153 in D186;
L1440: (ex B78 being (Element of ( NAT )) st (C153 = B78 & ((1 <= B78 & B78 <= D177) or (C147 <= B78 & B78 <= ( len R33 ))))) by L1439;
L1441: (C153 in D179 or C153 in D178) by L1440;
thus L1442: C153 in ( D179 \/ D178 ) by L1441 , XBOOLE_0:def 3;
end;
assume L1443: C153 in ( D179 \/ D178 );
per cases  by L1443 , XBOOLE_0:def 3;
suppose L1444: C153 in D179;

L1445: (ex B79 being (Element of ( NAT )) st (C153 = B79 & 1 <= B79 & B79 <= D177)) by L1444;
thus L1446: C153 in D186 by L1445;
end;
suppose L1447: C153 in D178;

L1448: (ex B80 being (Element of ( NAT )) st (C153 = B80 & C147 <= B80 & B80 <= ( len R33 ))) by L1447;
thus L1449: C153 in D186 by L1448;
end;
end;
L1451: D186 = ( D179 \/ D178 ) by L1437 , TARSKI:1;
L1452: (D179 c= ( Seg ( len R33 ) ) & D178 c= ( Seg ( len R33 ) ))
proof
thus L1453:now
let C154 being set;
assume L1454: C154 in D179;
consider C155 being (Element of ( NAT )) such that L1455: C154 = C155 and L1456: 1 <= C155 and L1457: C155 <= D177 by L1454;
L1458: C155 <= ( len R33 ) by L1399 , L1412 , L1457 , XXREAL_0:2;
thus L1459: C154 in ( Seg ( len R33 ) ) by L1458 , L1455 , L1456;
end;
let C156 being set;
assume L1460: C156 in D178;
consider C157 being (Element of ( NAT )) such that L1461: C156 = C157 and L1462: C147 <= C157 and L1463: C157 <= ( len R33 ) by L1460;
L1464: 1 <= C157 by L1403 , L1462 , XXREAL_0:2;
thus L1465: thesis by L1464 , L1461 , L1463;
end;
reconsider D190 = D178 as  finite set by L1452;
L1466: ( rng ( Sgm D190 ) ) = D190 by L1452 , FINSEQ_1:def 13;
L1467: ( rng ( Sgm D190 ) ) c= ( dom D189 ) by L1466 , L1409 , L1451 , XBOOLE_1:7;
reconsider D191 = D179 as  finite set by L1452;
set D192 = ( Sgm D191 );
L1468: 1 <= C147 by L1391 , L1392 , XXREAL_0:2;
set D193 = ( Sgm D190 );
L1469: ( len ( Sgm D190 ) ) = ( card D190 ) by L1452 , FINSEQ_3:39;
L1470: C147 <= ( len R33 ) by L1397 , L1406 , NAT_1:13;
L1471: ( C147 - C147 ) <= ( ( len R33 ) - C147 ) by L1470 , XREAL_1:9;
L1472: ( ( len D185 ) -' 1 ) = ( ( len D185 ) - 1 ) by L1471 , L1408 , XREAL_0:def 2;
reconsider D194 = ( ( len D185 ) - 1 ) as (Element of ( NAT )) by L1472;
L1473: ( - ( - ( C147 - C146 ) ) ) = ( C147 - C146 );
L1474: ( - ( C147 - C146 ) ) < ( 0 ) by L1473 , L1396;
L1475: C147 = ( D184 + 1 );
L1476: D184 <= C147 by L1475 , NAT_1:12;
L1477: D181 = ( ( (( D184 + 1 ) , C147) -cut R30 ) ^ ( (( C147 + 1 ) , ( ( len R33 ) + 1 )) -cut R30 ) ) by L1476 , L1393 , L1397 , L258;
L1478: D181 is_vertex_seq_of D185 by L1390 , L1403 , L1407 , L1117;
L1479: ( len D181 ) = ( ( len D185 ) + 1 ) by L1478 , L767;
L1480: 1 <= ( len D181 ) by L1479 , NAT_1:12;
L1481: ( 1 - 1 ) <= ( ( len D181 ) - 1 ) by L1480 , XREAL_1:9;
L1482: ( ( len D181 ) -' 1 ) = ( ( len D181 ) - 1 ) by L1481 , XREAL_0:def 2;
reconsider D195 = ( ( len D181 ) - 1 ) as (Element of ( NAT )) by L1482;
L1483: ( ( 0 ) + 1 ) = 1;
L1484: 1 <= ( len D181 ) by L1483 , L1479 , NAT_1:13;
L1485: ( C147 - C147 ) <= ( ( len R33 ) - C147 ) by L1470 , XREAL_1:9;
L1486: ( ( 0 ) + 1 ) <= ( ( ( len R33 ) - C147 ) + 1 ) by L1485 , XREAL_1:6;
L1487: 1 < ( len D181 ) by L1486 , L1479 , L1408 , NAT_1:13;
L1488: ( D195 -' 1 ) = ( D195 - 1 ) by L1479 , L1408 , L1471 , XREAL_0:def 2;
reconsider D196 = ( D195 - 1 ) as (Element of ( NAT )) by L1488;
L1489: ( ( C147 + 1 ) + D196 ) = ( C147 + D195 );
L1490: ( C147 + D194 ) = ( len R33 ) by L1408;
L1491: ( card D190 ) = ( ( ( len D185 ) + ( - 1 ) ) + 1 ) by L1490 , L104
.= ( len D185 );
L1492: ( C147 + D194 ) = ( D184 + ( len D185 ) );
L1493:
now
let C158 being set;
thus L1494:now
assume L1495: C158 in D185;
consider C159 , C160 being set such that L1496: C158 = [ C159 , C160 ] by L1495 , RELAT_1:def 1;
L1497: C160 = ( D185 . C159 ) by L1495 , L1496 , FUNCT_1:1;
L1498: C159 in ( dom D185 ) by L1495 , L1496 , FUNCT_1:1;
reconsider D197 = C159 as (Element of ( NAT )) by L1498;
L1499: D197 <= ( len D185 ) by L1498 , FINSEQ_3:25;
L1500: 1 <= D197 by L1498 , FINSEQ_3:25;
L1501: ( D184 + D197 ) = ( D193 . D197 ) by L1500 , L1475 , L1408 , L1492 , L1499 , L116;
L1502: ( ( 0 ) + 1 ) <= D197 by L1498 , FINSEQ_3:25;
consider C161 being (Element of ( NAT )) such that L1503: ( 0 ) <= C161 and L1504: C161 < ( len D185 ) and L1505: D197 = ( C161 + 1 ) by L1502 , L1499 , L1;
L1506: C159 in ( dom D193 ) by L1491 , L1469 , L1498 , FINSEQ_3:29;
L1507: ( D193 . D197 ) in ( rng D193 ) by L1506 , FUNCT_1:def 3;
L1508: C159 in ( dom ( D189 * D193 ) ) by L1507 , L1467 , L1506 , FUNCT_1:11;
L1509: ( ( D189 * D193 ) . C159 ) = ( D189 . ( D184 + D197 ) ) by L1508 , L1501 , FUNCT_1:12
.= ( R33 . ( C147 + C161 ) ) by L1467 , L1501 , L1507 , L1505 , GRFUNC_1:2
.= C160 by L1403 , L1407 , L1497 , L1504 , L1505 , L187;
thus L1510: C158 in ( D189 * ( Sgm D190 ) ) by L1509 , L1496 , L1508 , FUNCT_1:1;
end;
assume L1511: C158 in ( D189 * ( Sgm D190 ) );
consider C162 , C163 being set such that L1512: C158 = [ C162 , C163 ] by L1511 , RELAT_1:def 1;
L1513: C163 = ( ( D189 * D193 ) . C162 ) by L1511 , L1512 , FUNCT_1:1;
L1514: C162 in ( dom ( D189 * D193 ) ) by L1511 , L1512 , FUNCT_1:1;
L1515: C162 in ( dom D193 ) by L1514 , FUNCT_1:11;
reconsider D198 = C162 as (Element of ( NAT )) by L1515;
L1516: D198 <= ( len D185 ) by L1491 , L1469 , L1515 , FINSEQ_3:25;
L1517: 1 <= D198 by L1515 , FINSEQ_3:25;
L1518: ( D184 + D198 ) = ( D193 . D198 ) by L1517 , L1475 , L1408 , L1492 , L1516 , L116;
L1519: D198 in ( dom D185 ) by L1491 , L1469 , L1515 , FINSEQ_3:29;
L1520: ( D193 . C162 ) in ( dom D189 ) by L1514 , FUNCT_1:11;
L1521: ( ( 0 ) + 1 ) <= D198 by L1515 , FINSEQ_3:25;
consider C164 being (Element of ( NAT )) such that L1522: ( 0 ) <= C164 and L1523: C164 < ( len D185 ) and L1524: D198 = ( C164 + 1 ) by L1521 , L1516 , L1;
L1525: ( D185 . D198 ) = ( R33 . ( ( D184 + 1 ) + C164 ) ) by L1403 , L1407 , L1523 , L1524 , L187
.= ( D189 . ( D193 . D198 ) ) by L1520 , L1518 , L1524 , GRFUNC_1:2
.= C163 by L1513 , L1515 , FUNCT_1:13;
thus L1526: C158 in D185 by L1525 , L1512 , L1519 , FUNCT_1:1;
end;
L1527: D185 = ( D189 * ( Sgm D190 ) ) by L1493 , TARSKI:1;
L1528:
now
let R8 being (Element of ( NAT ));
let R9 being (Element of ( NAT ));
assume L1529: R8 in D191;
consider C165 being (Element of ( NAT )) such that L1530: C165 = R8 and L1531: 1 <= C165 and L1532: C165 <= D177 by L1529;
assume L1533: R9 in D190;
L1534: (ex B81 being (Element of ( NAT )) st (B81 = R9 & C147 <= B81 & B81 <= ( len R33 ))) by L1533;
L1535: D177 < C147 by L1392 , L1400 , NAT_1:13;
L1536: C165 < C147 by L1535 , L1532 , XXREAL_0:2;
thus L1537: R8 < R9 by L1536 , L1530 , L1534 , XXREAL_0:2;
end;
L1538: ( Sgm ( D191 \/ D190 ) ) = ( ( Sgm D191 ) ^ ( Sgm D190 ) ) by L1528 , L1452 , FINSEQ_3:42;
set D199 = { B82 where B82 is (Element of ( NAT )) : (( C147 + 1 ) <= B82 & B82 <= ( len R30 )) };
L1539: 1 <= ( C147 + 1 ) by NAT_1:12;
deffunc H6(set) = ( R30 . $1 );
consider C166 being Function such that L1540: ( dom C166 ) = D180 and L1541: (for R5 being set holds (R5 in D180 implies ( C166 . R5 ) = H6(R5))) from FUNCT_1:sch 3;
L1542: C146 <= ( len R30 ) by L1392 , L1393 , XXREAL_0:2;
L1543: D180 c= ( Seg ( len R30 ) )
proof
let C167 being set;
assume L1544: C167 in D180;
consider C168 being (Element of ( NAT )) such that L1545: C167 = C168 and L1546: ((1 <= C168 & C168 <= C146) or (( C147 + 1 ) <= C168 & C168 <= ( len R30 ))) by L1544;
L1547: C168 <= ( len R30 ) by L1542 , L1546 , XXREAL_0:2;
L1548: 1 <= ( C147 + 1 ) by NAT_1:12;
L1549: 1 <= C168 by L1548 , L1546 , XXREAL_0:2;
thus L1550: thesis by L1549 , L1545 , L1547;
end;
reconsider D200 = C166 as FinSubsequence by L1543 , L1540 , FINSEQ_1:def 12;
L1551: D200 c= R30
proof
let C169 being set;
assume L1552: C169 in D200;
consider R5 being set, R6 being set such that L1553: [ R5 , R6 ] = C169 by L1552 , RELAT_1:def 1;
L1554: R5 in ( dom D200 ) by L1552 , L1553 , FUNCT_1:1;
consider C170 being (Element of ( NAT )) such that L1555: R5 = C170 and L1556: ((1 <= C170 & C170 <= C146) or (( C147 + 1 ) <= C170 & C170 <= ( len R30 ))) by L1554 , L1540;
L1557: C170 <= ( len R30 ) by L1542 , L1556 , XXREAL_0:2;
L1558: 1 <= ( C147 + 1 ) by NAT_1:12;
L1559: 1 <= C170 by L1558 , L1556 , XXREAL_0:2;
L1560: R5 in ( dom R30 ) by L1559 , L1555 , L1557 , FINSEQ_3:25;
L1561: R6 = ( D200 . R5 ) by L1552 , L1553 , FUNCT_1:1;
L1562: R6 = ( R30 . C170 ) by L1561 , L1540 , L1541 , L1554 , L1555;
thus L1563: thesis by L1562 , L1553 , L1555 , L1560 , FUNCT_1:1;
end;
reconsider D201 = D200 as (Subset of R30) by L1551;
L1564: ( ( len R33 ) + 1 ) <= ( len R30 ) by L1390 , L767;
L1565: C147 <= ( ( len R33 ) + 1 ) by L1390 , L1393 , L767;
L1566: ( D181 . 1 ) = ( R30 . C147 ) by L1565 , L1468 , L1564 , L335;
L1567: ( D182 . ( len D182 ) ) = ( R30 . C146 ) by L1391 , L1542 , L335;
reconsider D202 = ( D188 ^ D185 ) as (Chain of R23) by L1567 , L1394 , L1435 , L1478 , L1566 , L1158;
take D201;
take D202;
take D203 = ( D182 ^' D181 );
L1568: 1 <= ( D177 + 1 ) by NAT_1:12;
L1569: ( ( len D188 ) + 1 ) = ( D177 + 1 ) by L1568 , L1399 , L1412 , L226;
L1570: ( len D188 ) = ( C146 - 1 ) by L1569 , L1398 , XREAL_0:def 2;
L1571: ( len D202 ) = ( ( C146 + ( - 1 ) ) + ( ( len R33 ) + ( ( - C147 ) + 1 ) ) ) by L1570 , L1408 , FINSEQ_1:22
.= ( ( len R33 ) + ( C146 + ( - C147 ) ) );
thus L1572: ( len D202 ) < ( len R33 ) by L1571 , L1474 , XREAL_1:30;
L1573: ( Sgm D191 ) = ( idseq D177 ) by FINSEQ_3:48;
L1574: ( dom ( Sgm D191 ) ) = ( Seg D177 ) by L1573 , RELAT_1:45;
L1575:
now
let C171 being set;
thus L1576:now
assume L1577: C171 in D188;
consider C172 , C173 being set such that L1578: C171 = [ C172 , C173 ] by L1577 , RELAT_1:def 1;
L1579: C173 = ( D188 . C172 ) by L1577 , L1578 , FUNCT_1:1;
L1580: C172 in ( dom D188 ) by L1577 , L1578 , FUNCT_1:1;
reconsider D204 = C172 as (Element of ( NAT )) by L1580;
L1581: D204 <= ( len D188 ) by L1580 , FINSEQ_3:25;
L1582: 1 <= D204 by L1580 , FINSEQ_3:25;
L1583: D204 in D186 by L1582 , L1569 , L1581;
L1584: ( ( 0 ) + 1 ) <= D204 by L1580 , FINSEQ_3:25;
consider C174 being (Element of ( NAT )) such that L1585: ( 0 ) <= C174 and L1586: C174 < D177 and L1587: D204 = ( C174 + 1 ) by L1584 , L1569 , L1581 , L1;
L1588: C172 in ( dom D192 ) by L1569 , L1574 , L1582 , L1581;
L1589: D204 = ( D192 . D204 ) by L1588 , L1573 , L1574 , FUNCT_1:18;
L1590: C172 in ( dom ( D189 * D192 ) ) by L1589 , L1409 , L1588 , L1583 , FUNCT_1:11;
L1591: ( ( D189 * D192 ) . C172 ) = ( D189 . D204 ) by L1590 , L1589 , FUNCT_1:12
.= ( R33 . ( 1 + C174 ) ) by L1409 , L1583 , L1587 , GRFUNC_1:2
.= C173 by L1399 , L1412 , L1568 , L1569 , L1579 , L1586 , L1587 , L226;
thus L1592: C171 in ( D189 * ( Sgm D191 ) ) by L1591 , L1578 , L1590 , FUNCT_1:1;
end;
assume L1593: C171 in ( D189 * ( Sgm D191 ) );
consider C175 , C176 being set such that L1594: C171 = [ C175 , C176 ] by L1593 , RELAT_1:def 1;
L1595: C176 = ( ( D189 * D192 ) . C175 ) by L1593 , L1594 , FUNCT_1:1;
L1596: C175 in ( dom ( D189 * D192 ) ) by L1593 , L1594 , FUNCT_1:1;
L1597: ( ( D189 * D192 ) . C175 ) = ( D189 . ( D192 . C175 ) ) by L1596 , FUNCT_1:12;
L1598: C175 in ( dom D192 ) by L1596 , FUNCT_1:11;
consider R10 being (Element of ( NAT )) such that L1599: R10 = C175 and L1600: 1 <= R10 and L1601: R10 <= D177 by L1598 , L1574;
L1602: R10 in ( dom D189 ) by L1409 , L1600 , L1601;
L1603: R10 in ( dom D188 ) by L1569 , L1600 , L1601 , FINSEQ_3:25;
L1604: R10 = ( D192 . R10 ) by L1573 , L1574 , L1598 , L1599 , FUNCT_1:18;
L1605: ( ( 0 ) + 1 ) <= R10 by L1600;
L1606: (ex B83 being (Element of ( NAT )) st (( 0 ) <= B83 & B83 < D177 & R10 = ( B83 + 1 ))) by L1605 , L1601 , L1;
L1607: ( D188 . R10 ) = ( R33 . R10 ) by L1606 , L1399 , L1412 , L1568 , L1569 , L226
.= C176 by L1595 , L1597 , L1599 , L1602 , L1604 , GRFUNC_1:2;
thus L1608: C171 in D188 by L1607 , L1594 , L1599 , L1603 , FUNCT_1:1;
end;
L1609: D188 = ( D189 * ( Sgm D191 ) ) by L1575 , TARSKI:1;
thus L1610: D203 is_vertex_seq_of D202 by L1394 , L1435 , L1478 , L1566 , L1567 , L1233;
L1611: ( len D203 ) = ( ( len D202 ) + 1 ) by L1610 , L767;
thus L1612: ( len D203 ) < ( len R30 ) by L1611 , L1397 , L1572 , XREAL_1:6;
L1613: 1 <= ( 1 + ( len D188 ) ) by NAT_1:12;
L1614: 1 <= ( len D182 ) by L1613 , L1435 , L767;
L1615: ( D203 . 1 ) = ( D182 . 1 ) by L1614 , L360;
thus L1616: ( R30 . 1 ) = ( D203 . 1 ) by L1615 , L1391 , L1542 , L335;
L1617: ( D181 . ( len D181 ) ) = ( R30 . ( ( len R33 ) + 1 ) ) by L1468 , L1565 , L1564 , L335;
thus L1618: ( R30 . ( len R30 ) ) = ( D203 . ( len D203 ) ) by L1617 , L1397 , L1487 , L383;
L1619: D181 = ( (( ( 0 ) + 1 ) , ( len D181 )) -cut D181 ) by L245
.= ( ( (( ( 0 ) + 1 ) , 1) -cut D181 ) ^ ( (( 1 + 1 ) , ( len D181 )) -cut D181 ) ) by L1484 , L258;
L1620: ( rng ( Sgm D191 ) ) = D191 by L1452 , FINSEQ_1:def 13;
L1621: ( rng ( Sgm D191 ) ) c= ( dom D189 ) by L1620 , L1409 , L1451 , XBOOLE_1:7;
thus L1622: ( Seq D189 ) = D202 by L1621 , L1409 , L1451 , L1538 , L1467 , L1609 , L1527 , L639;
set D205 = { B84 where B84 is (Element of ( NAT )) : (1 <= B84 & B84 <= C146) };
L1623: (D205 c= ( Seg ( len R30 ) ) & D199 c= ( Seg ( len R30 ) ))
proof
thus L1624:now
let C177 being set;
assume L1625: C177 in D205;
consider C178 being (Element of ( NAT )) such that L1626: C177 = C178 and L1627: 1 <= C178 and L1628: C178 <= C146 by L1625;
L1629: C178 <= ( len R30 ) by L1542 , L1628 , XXREAL_0:2;
thus L1630: C177 in ( Seg ( len R30 ) ) by L1629 , L1626 , L1627;
end;
let C179 being set;
assume L1631: C179 in D199;
consider C180 being (Element of ( NAT )) such that L1632: C179 = C180 and L1633: ( C147 + 1 ) <= C180 and L1634: C180 <= ( len R30 ) by L1631;
L1635: 1 <= ( C147 + 1 ) by NAT_1:12;
L1636: 1 <= C180 by L1635 , L1633 , XXREAL_0:2;
thus L1637: thesis by L1636 , L1632 , L1634;
end;
L1638:
now
let C181 being set;
thus L1639:now
assume L1640: C181 in D180;
L1641: (ex B85 being (Element of ( NAT )) st (C181 = B85 & ((1 <= B85 & B85 <= C146) or (( C147 + 1 ) <= B85 & B85 <= ( len R30 ))))) by L1640;
L1642: (C181 in D205 or C181 in D199) by L1641;
thus L1643: C181 in ( D205 \/ D199 ) by L1642 , XBOOLE_0:def 3;
end;
assume L1644: C181 in ( D205 \/ D199 );
per cases  by L1644 , XBOOLE_0:def 3;
suppose L1645: C181 in D205;

L1646: (ex B86 being (Element of ( NAT )) st (C181 = B86 & 1 <= B86 & B86 <= C146)) by L1645;
thus L1647: C181 in D180 by L1646;
end;
suppose L1648: C181 in D199;

L1649: (ex B87 being (Element of ( NAT )) st (C181 = B87 & ( C147 + 1 ) <= B87 & B87 <= ( len R30 ))) by L1648;
thus L1650: C181 in D180 by L1649;
end;
end;
L1652: D180 = ( D205 \/ D199 ) by L1638 , TARSKI:1;
reconsider D206 = D199 as  finite set by L1623;
L1653: ( rng ( Sgm D206 ) ) = D206 by L1623 , FINSEQ_1:def 13;
L1654: ( rng ( Sgm D206 ) ) c= ( dom D201 ) by L1653 , L1540 , L1652 , XBOOLE_1:7;
reconsider D207 = D205 as  finite set by L1623;
L1655: ( C147 + 1 ) <= ( ( ( len R33 ) + 1 ) + 1 ) by L1393 , L1397 , XREAL_1:6;
L1656: C147 <= ( ( ( len R33 ) + 1 ) + 1 ) by L1393 , L1397 , NAT_1:12;
L1657: ( ( len D181 ) + C147 ) = ( ( ( len R33 ) + 1 ) + 1 ) by L1656 , L1397 , L1403 , L226
.= ( ( len D183 ) + ( C147 + 1 ) ) by L1397 , L1402 , L1655 , L226
.= ( ( ( len D183 ) + 1 ) + C147 );
set D208 = ( Sgm D207 );
L1658: ( Sgm D207 ) = ( idseq C146 ) by FINSEQ_3:48;
L1659: ( dom ( Sgm D207 ) ) = ( Seg C146 ) by L1658 , RELAT_1:45;
L1660:
now
let C182 being set;
thus L1661:now
assume L1662: C182 in D182;
consider C183 , C184 being set such that L1663: C182 = [ C183 , C184 ] by L1662 , RELAT_1:def 1;
L1664: C184 = ( D182 . C183 ) by L1662 , L1663 , FUNCT_1:1;
L1665: C183 in ( dom D182 ) by L1662 , L1663 , FUNCT_1:1;
reconsider D209 = C183 as (Element of ( NAT )) by L1665;
L1666: D209 <= ( len D182 ) by L1665 , FINSEQ_3:25;
L1667: 1 <= D209 by L1665 , FINSEQ_3:25;
L1668: D209 in D180 by L1667 , L1399 , L1436 , L1569 , L1666;
L1669: ( ( 0 ) + 1 ) <= D209 by L1665 , FINSEQ_3:25;
consider C185 being (Element of ( NAT )) such that L1670: ( 0 ) <= C185 and L1671: C185 < C146 and L1672: D209 = ( C185 + 1 ) by L1669 , L1399 , L1436 , L1569 , L1666 , L1;
L1673: C183 in ( dom D208 ) by L1399 , L1436 , L1569 , L1659 , L1667 , L1666;
L1674: D209 = ( D208 . D209 ) by L1673 , L1658 , L1659 , FUNCT_1:18;
L1675: C183 in ( dom ( D201 * D208 ) ) by L1674 , L1540 , L1673 , L1668 , FUNCT_1:11;
L1676: ( ( D201 * D208 ) . C183 ) = ( D201 . D209 ) by L1675 , L1674 , FUNCT_1:12
.= ( R30 . ( 1 + C185 ) ) by L1540 , L1668 , L1672 , GRFUNC_1:2
.= C184 by L1391 , L1399 , L1542 , L1436 , L1569 , L1664 , L1671 , L1672 , L187;
thus L1677: C182 in ( D201 * ( Sgm D207 ) ) by L1676 , L1663 , L1675 , FUNCT_1:1;
end;
assume L1678: C182 in ( D201 * ( Sgm D207 ) );
consider C186 , C187 being set such that L1679: C182 = [ C186 , C187 ] by L1678 , RELAT_1:def 1;
L1680: C187 = ( ( D201 * D208 ) . C186 ) by L1678 , L1679 , FUNCT_1:1;
L1681: C186 in ( dom ( D201 * D208 ) ) by L1678 , L1679 , FUNCT_1:1;
L1682: ( ( D201 * D208 ) . C186 ) = ( D201 . ( D208 . C186 ) ) by L1681 , FUNCT_1:12;
L1683: C186 in ( dom D208 ) by L1681 , FUNCT_1:11;
consider R10 being (Element of ( NAT )) such that L1684: R10 = C186 and L1685: 1 <= R10 and L1686: R10 <= C146 by L1683 , L1659;
L1687: R10 in ( dom D201 ) by L1540 , L1685 , L1686;
L1688: R10 = ( D208 . R10 ) by L1658 , L1659 , L1683 , L1684 , FUNCT_1:18;
L1689: R10 in ( dom D182 ) by L1399 , L1436 , L1569 , L1685 , L1686 , FINSEQ_3:25;
L1690: ( ( 0 ) + 1 ) <= R10 by L1685;
L1691: (ex B88 being (Element of ( NAT )) st (( 0 ) <= B88 & B88 < C146 & R10 = ( B88 + 1 ))) by L1690 , L1686 , L1;
L1692: ( D182 . R10 ) = ( R30 . R10 ) by L1691 , L1391 , L1399 , L1542 , L1436 , L1569 , L187
.= C187 by L1680 , L1682 , L1684 , L1687 , L1688 , GRFUNC_1:2;
thus L1693: C182 in D182 by L1692 , L1679 , L1684 , L1689 , FUNCT_1:1;
end;
L1694: D182 = ( D201 * ( Sgm D207 ) ) by L1660 , TARSKI:1;
set D210 = ( Sgm D206 );
L1695: ( len ( Sgm D206 ) ) = ( card D206 ) by L1623 , FINSEQ_3:39;
L1696: ( ( C147 + 1 ) + D196 ) = ( C147 + ( ( D195 - 1 ) + 1 ) )
.= ( C147 + ( ( ( ( ( len R33 ) - C147 ) + 1 ) + 1 ) - 1 ) ) by L1478 , L1408 , L767
.= ( ( len R33 ) + 1 );
L1697: ( card D206 ) = ( ( D195 - 1 ) + 1 ) by L1696 , L1397 , L104
.= D195;
L1698: ( C147 + 1 ) <= ( ( ( len R33 ) + 1 ) + 1 ) by L1393 , L1397 , XREAL_1:7;
L1699:
now
let C188 being set;
thus L1700:now
assume L1701: C188 in D183;
consider C189 , C190 being set such that L1702: C188 = [ C189 , C190 ] by L1701 , RELAT_1:def 1;
L1703: C190 = ( D183 . C189 ) by L1701 , L1702 , FUNCT_1:1;
L1704: C189 in ( dom D183 ) by L1701 , L1702 , FUNCT_1:1;
reconsider D211 = C189 as (Element of ( NAT )) by L1704;
L1705: D211 <= ( len D183 ) by L1704 , FINSEQ_3:25;
L1706: 1 <= D211 by L1704 , FINSEQ_3:25;
L1707: ( C147 + D211 ) = ( D210 . D211 ) by L1706 , L1397 , L1696 , L1657 , L1489 , L1705 , L116;
L1708: ( ( 0 ) + 1 ) <= D211 by L1704 , FINSEQ_3:25;
consider C191 being (Element of ( NAT )) such that L1709: ( 0 ) <= C191 and L1710: C191 < ( len D183 ) and L1711: D211 = ( C191 + 1 ) by L1708 , L1705 , L1;
L1712: C189 in ( dom D210 ) by L1697 , L1657 , L1695 , L1704 , FINSEQ_3:29;
L1713: ( D210 . D211 ) in ( rng D210 ) by L1712 , FUNCT_1:def 3;
L1714: C189 in ( dom ( D201 * D210 ) ) by L1713 , L1654 , L1712 , FUNCT_1:11;
L1715: ( ( D201 * D210 ) . C189 ) = ( D201 . ( C147 + D211 ) ) by L1714 , L1707 , FUNCT_1:12
.= ( R30 . ( ( C147 + 1 ) + C191 ) ) by L1654 , L1707 , L1713 , L1711 , GRFUNC_1:2
.= C190 by L1397 , L1539 , L1698 , L1703 , L1710 , L1711 , L226;
thus L1716: C188 in ( D201 * ( Sgm D206 ) ) by L1715 , L1702 , L1714 , FUNCT_1:1;
end;
assume L1717: C188 in ( D201 * ( Sgm D206 ) );
consider C192 , C193 being set such that L1718: C188 = [ C192 , C193 ] by L1717 , RELAT_1:def 1;
L1719: C193 = ( ( D201 * D210 ) . C192 ) by L1717 , L1718 , FUNCT_1:1;
L1720: C192 in ( dom ( D201 * D210 ) ) by L1717 , L1718 , FUNCT_1:1;
L1721: C192 in ( dom D210 ) by L1720 , FUNCT_1:11;
reconsider D212 = C192 as (Element of ( NAT )) by L1721;
L1722: D212 <= ( len D183 ) by L1697 , L1657 , L1695 , L1721 , FINSEQ_3:25;
L1723: 1 <= D212 by L1721 , FINSEQ_3:25;
L1724: ( C147 + D212 ) = ( D210 . D212 ) by L1723 , L1397 , L1696 , L1657 , L1489 , L1722 , L116;
L1725: D212 in ( dom D183 ) by L1697 , L1657 , L1695 , L1721 , FINSEQ_3:29;
L1726: ( D210 . C192 ) in ( dom D201 ) by L1720 , FUNCT_1:11;
L1727: ( ( 0 ) + 1 ) <= D212 by L1721 , FINSEQ_3:25;
consider C194 being (Element of ( NAT )) such that L1728: ( 0 ) <= C194 and L1729: C194 < ( len D183 ) and L1730: D212 = ( C194 + 1 ) by L1727 , L1722 , L1;
L1731: ( D183 . D212 ) = ( R30 . ( ( C147 + 1 ) + C194 ) ) by L1397 , L1539 , L1698 , L1729 , L1730 , L226
.= ( D201 . ( D210 . D212 ) ) by L1726 , L1724 , L1730 , GRFUNC_1:2
.= C193 by L1719 , L1721 , FUNCT_1:13;
thus L1732: C188 in D183 by L1731 , L1718 , L1725 , FUNCT_1:1;
end;
L1733: D183 = ( D201 * ( Sgm D206 ) ) by L1699 , TARSKI:1;
L1734:
now
let R8 being (Element of ( NAT ));
let R9 being (Element of ( NAT ));
assume L1735: R8 in D207;
consider C195 being (Element of ( NAT )) such that L1736: C195 = R8 and L1737: 1 <= C195 and L1738: C195 <= C146 by L1735;
L1739: C195 < C147 by L1392 , L1738 , XXREAL_0:2;
assume L1740: R9 in D206;
consider C196 being (Element of ( NAT )) such that L1741: C196 = R9 and L1742: ( C147 + 1 ) <= C196 and L1743: C196 <= ( len R30 ) by L1740;
L1744: C147 <= ( C147 + 1 ) by NAT_1:12;
L1745: C147 <= C196 by L1744 , L1742 , XXREAL_0:2;
thus L1746: R8 < R9 by L1745 , L1736 , L1741 , L1739 , XXREAL_0:2;
end;
L1747: ( Sgm ( D207 \/ D206 ) ) = ( ( Sgm D207 ) ^ ( Sgm D206 ) ) by L1734 , L1623 , FINSEQ_3:42;
L1748: ( (1 , 1) -cut D181 ) = <* ( D181 . ( ( 0 ) + 1 ) ) *> by L1484 , L239
.= <* ( R30 . ( C147 + ( 0 ) ) ) *> by L1397 , L1403 , L1479 , L1656 , L226
.= ( (C147 , C147) -cut R30 ) by L1393 , L1403 , L239;
L1749: D203 = ( D182 ^ D183 ) by L1748 , L1619 , L1477 , FINSEQ_1:33;
L1750: ( rng ( Sgm D207 ) ) = D207 by L1623 , FINSEQ_1:def 13;
L1751: ( rng ( Sgm D207 ) ) c= ( dom D201 ) by L1750 , L1540 , L1652 , XBOOLE_1:7;
thus L1752: thesis by L1751 , L1540 , L1749 , L1652 , L1747 , L1654 , L1694 , L1733 , L639;
end;
suppose L1753: (C146 = 1 & C147 <> ( len R30 ));

set D213 = { R10 where R10 is (Element of ( NAT )) : (C147 <= R10 & R10 <= ( len R30 )) };
deffunc H7(set) = ( R33 . $1 );
set D214 = { R10 where R10 is (Element of ( NAT )) : (C147 <= R10 & R10 <= ( len R33 )) };
set D215 = ( (C147 , ( ( len R33 ) + 1 )) -cut R30 );
consider C197 being Function such that L1754: ( dom C197 ) = D214 and L1755: (for R5 being set holds (R5 in D214 implies ( C197 . R5 ) = H7(R5))) from FUNCT_1:sch 3;
L1756: 1 < C147 by L1391 , L1392 , XXREAL_0:2;
L1757: ( 1 - 1 ) < ( C147 - 1 ) by L1756 , XREAL_1:9;
L1758: ( 0 ) < ( - ( - ( C147 - 1 ) ) ) by L1757;
L1759: ( - ( C147 - 1 ) ) < ( 0 ) by L1758;
L1760: ( 1 - 1 ) <= ( C147 - 1 ) by L1756 , XREAL_1:9;
L1761: ( C147 -' 1 ) = ( C147 - 1 ) by L1760 , XREAL_0:def 2;
reconsider D216 = ( C147 - 1 ) as (Element of ( NAT )) by L1761;
L1762: C147 = ( D216 + 1 );
L1763: D214 c= ( Seg ( len R33 ) )
proof
let C198 being set;
assume L1764: C198 in D214;
consider C199 being (Element of ( NAT )) such that L1765: C198 = C199 and L1766: C147 <= C199 and L1767: C199 <= ( len R33 ) by L1764;
L1768: 1 <= C199 by L1756 , L1766 , XXREAL_0:2;
thus L1769: thesis by L1768 , L1765 , L1767;
end;
reconsider D217 = C197 as FinSubsequence by L1763 , L1754 , FINSEQ_1:def 12;
L1770: D217 c= R33
proof
let C200 being set;
assume L1771: C200 in D217;
consider R5 being set, R6 being set such that L1772: [ R5 , R6 ] = C200 by L1771 , RELAT_1:def 1;
L1773: R5 in ( dom D217 ) by L1771 , L1772 , FUNCT_1:1;
consider C201 being (Element of ( NAT )) such that L1774: R5 = C201 and L1775: C147 <= C201 and L1776: C201 <= ( len R33 ) by L1773 , L1754;
L1777: 1 <= C201 by L1756 , L1775 , XXREAL_0:2;
L1778: R5 in ( dom R33 ) by L1777 , L1774 , L1776 , FINSEQ_3:25;
L1779: R6 = ( D217 . R5 ) by L1771 , L1772 , FUNCT_1:1;
L1780: R6 = ( R33 . C201 ) by L1779 , L1754 , L1755 , L1773 , L1774;
thus L1781: thesis by L1780 , L1772 , L1774 , L1778 , FUNCT_1:1;
end;
reconsider D218 = D217 as (Subset of R33) by L1770;
take D218;
deffunc H8(set) = ( R30 . $1 );
consider C202 being Function such that L1782: ( dom C202 ) = D213 and L1783: (for R5 being set holds (R5 in D213 implies ( C202 . R5 ) = H8(R5))) from FUNCT_1:sch 3;
L1784: D213 c= ( Seg ( len R30 ) )
proof
let C203 being set;
assume L1785: C203 in D213;
consider C204 being (Element of ( NAT )) such that L1786: C203 = C204 and L1787: C147 <= C204 and L1788: C204 <= ( len R30 ) by L1785;
L1789: 1 <= C204 by L1756 , L1787 , XXREAL_0:2;
thus L1790: thesis by L1789 , L1786 , L1788;
end;
reconsider D219 = C202 as FinSubsequence by L1784 , L1782 , FINSEQ_1:def 12;
L1791: D219 c= R30
proof
let C205 being set;
assume L1792: C205 in D219;
consider R5 being set, R6 being set such that L1793: [ R5 , R6 ] = C205 by L1792 , RELAT_1:def 1;
L1794: R5 in ( dom D219 ) by L1792 , L1793 , FUNCT_1:1;
consider C206 being (Element of ( NAT )) such that L1795: R5 = C206 and L1796: C147 <= C206 and L1797: C206 <= ( len R30 ) by L1794 , L1782;
L1798: 1 <= C206 by L1756 , L1796 , XXREAL_0:2;
L1799: R5 in ( dom R30 ) by L1798 , L1795 , L1797 , FINSEQ_3:25;
L1800: R6 = ( D219 . R5 ) by L1792 , L1793 , FUNCT_1:1;
L1801: R6 = ( R30 . C206 ) by L1800 , L1782 , L1783 , L1794 , L1795;
thus L1802: thesis by L1801 , L1793 , L1795 , L1799 , FUNCT_1:1;
end;
L1803: C147 < ( len R30 ) by L1393 , L1753 , XXREAL_0:1;
L1804: C147 <= ( len R33 ) by L1803 , L1397 , NAT_1:13;
reconsider D220 = ( (C147 , ( len R33 )) -cut R33 ) as (Chain of R23) by L1804 , L1756 , L1071;
L1805: C147 <= ( len R33 ) by L1397 , L1803 , NAT_1:13;
reconsider D221 = D219 as (Subset of R30) by L1791;
take D221;
take D222 = D220;
take D223 = D215;
L1806: ( ( len D220 ) + C147 ) = ( ( len R33 ) + 1 ) by L1392 , L1393 , L1397 , L1753 , L226;
L1807: ( len D220 ) = ( ( len R33 ) + ( ( - C147 ) + 1 ) ) by L1806;
thus L1808: ( len D222 ) < ( len R33 ) by L1807 , L1759 , XREAL_1:30;
L1809: 1 <= C147 by L1391 , L1392 , XXREAL_0:2;
thus L1810: D223 is_vertex_seq_of D222 by L1809 , L1390 , L1805 , L1117;
L1811: D215 is_vertex_seq_of D220 by L1390 , L1804 , L1756 , L1117;
L1812: ( len D223 ) = ( ( len D222 ) + 1 ) by L1811 , L767;
thus L1813: ( len D223 ) < ( len R30 ) by L1812 , L1397 , L1808 , XREAL_1:6;
thus L1814: ( R30 . 1 ) = ( D223 . 1 ) by L1392 , L1393 , L1394 , L1397 , L1753 , L335;
thus L1815: ( R30 . ( len R30 ) ) = ( D223 . ( len D223 ) ) by L1392 , L1393 , L1397 , L1753 , L335;
L1816: D213 c= ( Seg ( len R30 ) )
proof
let C207 being set;
assume L1817: C207 in D213;
consider C208 being (Element of ( NAT )) such that L1818: C207 = C208 and L1819: C147 <= C208 and L1820: C208 <= ( len R30 ) by L1817;
L1821: 1 <= C208 by L1756 , L1819 , XXREAL_0:2;
thus L1822: thesis by L1821 , L1818 , L1820;
end;
L1823: D214 c= ( Seg ( len R33 ) )
proof
let C209 being set;
assume L1824: C209 in D214;
consider C210 being (Element of ( NAT )) such that L1825: C209 = C210 and L1826: C147 <= C210 and L1827: C210 <= ( len R33 ) by L1824;
L1828: 1 <= C210 by L1756 , L1826 , XXREAL_0:2;
thus L1829: thesis by L1828 , L1825 , L1827;
end;
reconsider D224 = D214 as  finite set by L1823;
L1830: ( len ( Sgm D224 ) ) = ( card D224 ) by L1823 , FINSEQ_3:39;
reconsider D225 = D213 as  finite set by L1816;
L1831: ( rng ( Sgm D225 ) ) c= ( dom D221 ) by L1782 , L1816 , FINSEQ_1:def 13;
set D226 = ( Sgm D224 );
L1832: ( ( len R33 ) + 1 ) <= ( len R30 ) by L1390 , L767;
L1833: ( C147 - C147 ) <= ( ( len R33 ) - C147 ) by L1804 , XREAL_1:9;
L1834: ( ( len D220 ) -' 1 ) = ( ( len D220 ) - 1 ) by L1833 , L1806 , XREAL_0:def 2;
reconsider D227 = ( ( len D220 ) - 1 ) as (Element of ( NAT )) by L1834;
L1835: ( C147 + D227 ) = ( D216 + ( len D220 ) );
L1836: ( ( len D220 ) -' 1 ) = ( ( len D220 ) - 1 ) by L1806 , L1833 , XREAL_0:def 2;
reconsider D228 = ( ( len D220 ) - 1 ) as (Element of ( NAT )) by L1836;
L1837: ( C147 + D228 ) = ( len R33 ) by L1806;
L1838: ( card D224 ) = ( ( ( len D220 ) + ( - 1 ) ) + 1 ) by L1837 , L104
.= ( len D220 );
L1839: ( rng ( Sgm D224 ) ) c= ( dom D218 ) by L1754 , L1823 , FINSEQ_1:def 13;
L1840:
now
let C211 being set;
thus L1841:now
assume L1842: C211 in D220;
consider C212 , C213 being set such that L1843: C211 = [ C212 , C213 ] by L1842 , RELAT_1:def 1;
L1844: C213 = ( D220 . C212 ) by L1842 , L1843 , FUNCT_1:1;
L1845: C212 in ( dom D220 ) by L1842 , L1843 , FUNCT_1:1;
reconsider D229 = C212 as (Element of ( NAT )) by L1845;
L1846: D229 <= ( len D220 ) by L1845 , FINSEQ_3:25;
L1847: 1 <= D229 by L1845 , FINSEQ_3:25;
L1848: ( D216 + D229 ) = ( D226 . D229 ) by L1847 , L1806 , L1762 , L1835 , L1846 , L116;
L1849: ( ( 0 ) + 1 ) <= D229 by L1845 , FINSEQ_3:25;
consider C214 being (Element of ( NAT )) such that L1850: ( 0 ) <= C214 and L1851: C214 < ( len D220 ) and L1852: D229 = ( C214 + 1 ) by L1849 , L1846 , L1;
L1853: C212 in ( dom D226 ) by L1838 , L1830 , L1845 , FINSEQ_3:29;
L1854: ( D226 . D229 ) in ( rng D226 ) by L1853 , FUNCT_1:def 3;
L1855: C212 in ( dom ( D218 * D226 ) ) by L1854 , L1839 , L1853 , FUNCT_1:11;
L1856: ( ( D218 * D226 ) . C212 ) = ( D218 . ( D216 + D229 ) ) by L1855 , L1848 , FUNCT_1:12
.= ( R33 . ( C147 + C214 ) ) by L1839 , L1848 , L1854 , L1852 , GRFUNC_1:2
.= C213 by L1392 , L1393 , L1397 , L1753 , L1844 , L1851 , L1852 , L226;
thus L1857: C211 in ( D218 * ( Sgm D224 ) ) by L1856 , L1843 , L1855 , FUNCT_1:1;
end;
assume L1858: C211 in ( D218 * ( Sgm D224 ) );
consider C215 , C216 being set such that L1859: C211 = [ C215 , C216 ] by L1858 , RELAT_1:def 1;
L1860: C216 = ( ( D218 * D226 ) . C215 ) by L1858 , L1859 , FUNCT_1:1;
L1861: C215 in ( dom ( D218 * D226 ) ) by L1858 , L1859 , FUNCT_1:1;
L1862: C215 in ( dom D226 ) by L1861 , FUNCT_1:11;
reconsider D230 = C215 as (Element of ( NAT )) by L1862;
L1863: D230 <= ( len D220 ) by L1838 , L1830 , L1862 , FINSEQ_3:25;
L1864: 1 <= D230 by L1862 , FINSEQ_3:25;
L1865: ( D216 + D230 ) = ( D226 . D230 ) by L1864 , L1806 , L1762 , L1835 , L1863 , L116;
L1866: D230 in ( dom D220 ) by L1838 , L1830 , L1862 , FINSEQ_3:29;
L1867: ( D226 . C215 ) in ( dom D218 ) by L1861 , FUNCT_1:11;
L1868: ( ( 0 ) + 1 ) <= D230 by L1862 , FINSEQ_3:25;
consider C217 being (Element of ( NAT )) such that L1869: ( 0 ) <= C217 and L1870: C217 < ( len D220 ) and L1871: D230 = ( C217 + 1 ) by L1868 , L1863 , L1;
L1872: ( D220 . D230 ) = ( R33 . ( ( D216 + 1 ) + C217 ) ) by L1392 , L1393 , L1397 , L1753 , L1870 , L1871 , L226
.= ( D218 . ( D226 . D230 ) ) by L1867 , L1865 , L1871 , GRFUNC_1:2
.= C216 by L1860 , L1862 , FUNCT_1:13;
thus L1873: C211 in D220 by L1872 , L1859 , L1866 , FUNCT_1:1;
end;
thus L1874: ( Seq D218 ) = D222 by L1840 , L1754 , TARSKI:1;
set D231 = ( Sgm D225 );
L1875: ( len ( Sgm D225 ) ) = ( card D225 ) by L1816 , FINSEQ_3:39;
L1876: C147 <= ( ( ( len R33 ) + 1 ) + 1 ) by L1393 , L1397 , NAT_1:12;
L1877: ( ( len D215 ) + C147 ) = ( ( ( len R33 ) + 1 ) + 1 ) by L1876 , L1392 , L1753 , L1832 , L226;
L1878: ( len D215 ) = ( ( ( ( len R33 ) - C147 ) + 1 ) + 1 ) by L1877;
L1879: 1 <= ( len D215 ) by L1878 , L1806 , NAT_1:12;
L1880: ( 1 - 1 ) <= ( ( len D215 ) - 1 ) by L1879 , XREAL_1:9;
L1881: ( ( len D215 ) -' 1 ) = ( ( len D215 ) - 1 ) by L1880 , XREAL_0:def 2;
reconsider D232 = ( ( len D215 ) - 1 ) as (Element of ( NAT )) by L1881;
L1882: ( C147 + D232 ) = ( ( len R33 ) + 1 ) by L1877;
L1883: ( card D225 ) = ( ( ( len D215 ) + ( - 1 ) ) + 1 ) by L1882 , L1397 , L104
.= ( len D215 );
L1884: ( C147 + D232 ) = ( D216 + ( len D215 ) );
L1885:
now
let C218 being set;
thus L1886:now
assume L1887: C218 in D215;
consider C219 , C220 being set such that L1888: C218 = [ C219 , C220 ] by L1887 , RELAT_1:def 1;
L1889: C220 = ( D215 . C219 ) by L1887 , L1888 , FUNCT_1:1;
L1890: C219 in ( dom D215 ) by L1887 , L1888 , FUNCT_1:1;
reconsider D233 = C219 as (Element of ( NAT )) by L1890;
L1891: D233 <= ( len D215 ) by L1890 , FINSEQ_3:25;
L1892: 1 <= D233 by L1890 , FINSEQ_3:25;
L1893: ( D216 + D233 ) = ( D231 . D233 ) by L1892 , L1397 , L1762 , L1877 , L1884 , L1891 , L116;
L1894: ( ( 0 ) + 1 ) <= D233 by L1890 , FINSEQ_3:25;
consider C221 being (Element of ( NAT )) such that L1895: ( 0 ) <= C221 and L1896: C221 < ( len D215 ) and L1897: D233 = ( C221 + 1 ) by L1894 , L1891 , L1;
L1898: C219 in ( dom D231 ) by L1883 , L1875 , L1890 , FINSEQ_3:29;
L1899: ( D231 . D233 ) in ( rng D231 ) by L1898 , FUNCT_1:def 3;
L1900: C219 in ( dom ( D221 * D231 ) ) by L1899 , L1831 , L1898 , FUNCT_1:11;
L1901: ( ( D221 * D231 ) . C219 ) = ( D221 . ( D216 + D233 ) ) by L1900 , L1893 , FUNCT_1:12
.= ( R30 . ( C147 + C221 ) ) by L1831 , L1893 , L1899 , L1897 , GRFUNC_1:2
.= C220 by L1392 , L1753 , L1876 , L1832 , L1889 , L1896 , L1897 , L226;
thus L1902: C218 in ( D221 * ( Sgm D225 ) ) by L1901 , L1888 , L1900 , FUNCT_1:1;
end;
assume L1903: C218 in ( D221 * ( Sgm D225 ) );
consider C222 , C223 being set such that L1904: C218 = [ C222 , C223 ] by L1903 , RELAT_1:def 1;
L1905: C223 = ( ( D221 * D231 ) . C222 ) by L1903 , L1904 , FUNCT_1:1;
L1906: C222 in ( dom ( D221 * D231 ) ) by L1903 , L1904 , FUNCT_1:1;
L1907: C222 in ( dom D231 ) by L1906 , FUNCT_1:11;
reconsider D234 = C222 as (Element of ( NAT )) by L1907;
L1908: D234 <= ( len D215 ) by L1883 , L1875 , L1907 , FINSEQ_3:25;
L1909: 1 <= D234 by L1907 , FINSEQ_3:25;
L1910: ( D216 + D234 ) = ( D231 . D234 ) by L1909 , L1397 , L1762 , L1877 , L1884 , L1908 , L116;
L1911: D234 in ( dom D215 ) by L1883 , L1875 , L1907 , FINSEQ_3:29;
L1912: ( D231 . C222 ) in ( dom D221 ) by L1906 , FUNCT_1:11;
L1913: ( ( 0 ) + 1 ) <= D234 by L1907 , FINSEQ_3:25;
consider C224 being (Element of ( NAT )) such that L1914: ( 0 ) <= C224 and L1915: C224 < ( len D215 ) and L1916: D234 = ( C224 + 1 ) by L1913 , L1908 , L1;
L1917: ( D215 . D234 ) = ( R30 . ( ( D216 + 1 ) + C224 ) ) by L1392 , L1753 , L1876 , L1832 , L1915 , L1916 , L226
.= ( D221 . ( D231 . D234 ) ) by L1912 , L1910 , L1916 , GRFUNC_1:2
.= C223 by L1905 , L1907 , FUNCT_1:13;
thus L1918: C218 in D215 by L1917 , L1904 , L1911 , FUNCT_1:1;
end;
thus L1919: thesis by L1885 , L1782 , TARSKI:1;
end;
suppose L1920: (C146 <> 1 & C147 = ( len R30 ));

set D235 = { R10 where R10 is (Element of ( NAT )) : (1 <= R10 & R10 <= C146) };
set D236 = ( (1 , C146) -cut R30 );
deffunc H9(set) = ( R33 . $1 );
reconsider D237 = { R10 where R10 is (Element of ( NAT )) : (1 <= R10 & R10 <= D177) } as set;
consider C225 being Function such that L1921: ( dom C225 ) = D237 and L1922: (for R5 being set holds (R5 in D237 implies ( C225 . R5 ) = H9(R5))) from FUNCT_1:sch 3;
L1923: C146 < ( len R30 ) by L1392 , L1393 , XXREAL_0:2;
L1924: ( C146 - 1 ) < ( ( ( len R33 ) + 1 ) - 1 ) by L1923 , L1397 , XREAL_1:9;
L1925: D237 c= ( Seg ( len R33 ) )
proof
let C226 being set;
assume L1926: C226 in D237;
consider C227 being (Element of ( NAT )) such that L1927: C226 = C227 and L1928: 1 <= C227 and L1929: C227 <= D177 by L1926;
L1930: C227 <= ( len R33 ) by L1399 , L1924 , L1929 , XXREAL_0:2;
thus L1931: thesis by L1930 , L1927 , L1928;
end;
reconsider D238 = C225 as FinSubsequence by L1925 , L1921 , FINSEQ_1:def 12;
L1932: 1 < C146 by L1391 , L1920 , XXREAL_0:1;
L1933: ( 1 + 1 ) <= C146 by L1932 , NAT_1:13;
L1934: ( ( 1 + 1 ) - 1 ) <= ( C146 - 1 ) by L1933 , XREAL_1:9;
reconsider D239 = ( (1 , D177) -cut R33 ) as (Chain of R23) by L1934 , L1399 , L1924 , L1071;
L1935: 1 <= ( D177 + 1 ) by NAT_1:12;
L1936: ( ( len D239 ) + 1 ) = ( D177 + 1 ) by L1935 , L1399 , L1924 , L226;
L1937: ( len D239 ) = ( C146 - 1 ) by L1936 , L1398 , XREAL_0:def 2;
L1938: D238 c= R33
proof
let C228 being set;
assume L1939: C228 in D238;
consider R5 being set, R6 being set such that L1940: [ R5 , R6 ] = C228 by L1939 , RELAT_1:def 1;
L1941: R5 in ( dom D238 ) by L1939 , L1940 , FUNCT_1:1;
consider C229 being (Element of ( NAT )) such that L1942: R5 = C229 and L1943: 1 <= C229 and L1944: C229 <= D177 by L1941 , L1921;
L1945: C229 <= ( len R33 ) by L1399 , L1924 , L1944 , XXREAL_0:2;
L1946: R5 in ( dom R33 ) by L1945 , L1942 , L1943 , FINSEQ_3:25;
L1947: R6 = ( D238 . R5 ) by L1939 , L1940 , FUNCT_1:1;
L1948: R6 = ( R33 . C229 ) by L1947 , L1921 , L1922 , L1941 , L1942;
thus L1949: thesis by L1948 , L1940 , L1942 , L1946 , FUNCT_1:1;
end;
L1950: D237 c= ( Seg ( len R33 ) )
proof
let C230 being set;
assume L1951: C230 in D237;
consider C231 being (Element of ( NAT )) such that L1952: C230 = C231 and L1953: 1 <= C231 and L1954: C231 <= D177 by L1951;
L1955: C231 <= ( len R33 ) by L1399 , L1924 , L1954 , XXREAL_0:2;
thus L1956: thesis by L1955 , L1952 , L1953;
end;
reconsider D240 = D238 as (Subset of R33) by L1938;
take D240;
reconsider D241 = D237 as  finite set by L1950;
set D242 = ( Sgm D241 );
deffunc H10(set) = ( R30 . $1 );
consider C232 being Function such that L1957: ( dom C232 ) = D235 and L1958: (for R5 being set holds (R5 in D235 implies ( C232 . R5 ) = H10(R5))) from FUNCT_1:sch 3;
L1959: C146 <= ( len R30 ) by L1392 , L1393 , XXREAL_0:2;
L1960: D235 c= ( Seg ( len R30 ) )
proof
let C233 being set;
assume L1961: C233 in D235;
consider C234 being (Element of ( NAT )) such that L1962: C233 = C234 and L1963: 1 <= C234 and L1964: C234 <= C146 by L1961;
L1965: C234 <= ( len R30 ) by L1959 , L1964 , XXREAL_0:2;
thus L1966: thesis by L1965 , L1962 , L1963;
end;
reconsider D243 = C232 as FinSubsequence by L1960 , L1957 , FINSEQ_1:def 12;
L1967: D243 c= R30
proof
let C235 being set;
assume L1968: C235 in D243;
consider R5 being set, R6 being set such that L1969: [ R5 , R6 ] = C235 by L1968 , RELAT_1:def 1;
L1970: R5 in ( dom D243 ) by L1968 , L1969 , FUNCT_1:1;
consider C236 being (Element of ( NAT )) such that L1971: R5 = C236 and L1972: 1 <= C236 and L1973: C236 <= C146 by L1970 , L1957;
L1974: C236 <= ( len R30 ) by L1959 , L1973 , XXREAL_0:2;
L1975: R5 in ( dom R30 ) by L1974 , L1971 , L1972 , FINSEQ_3:25;
L1976: R6 = ( D243 . R5 ) by L1968 , L1969 , FUNCT_1:1;
L1977: R6 = ( R30 . C236 ) by L1976 , L1957 , L1958 , L1970 , L1971;
thus L1978: thesis by L1977 , L1969 , L1971 , L1975 , FUNCT_1:1;
end;
reconsider D244 = D243 as (Subset of R30) by L1967;
L1979: D235 c= ( Seg ( len R30 ) )
proof
let C237 being set;
assume L1980: C237 in D235;
consider C238 being (Element of ( NAT )) such that L1981: C237 = C238 and L1982: 1 <= C238 and L1983: C238 <= C146 by L1980;
L1984: C238 <= ( len R30 ) by L1959 , L1983 , XXREAL_0:2;
thus L1985: thesis by L1984 , L1981 , L1982;
end;
reconsider D245 = D235 as  finite set by L1979;
take D244;
take D246 = D239;
take D247 = D236;
L1986: D236 is_vertex_seq_of D239 by L1390 , L1400 , L1934 , L1924 , L1117;
L1987: ( len D236 ) = ( ( len D239 ) + 1 ) by L1986 , L767;
thus L1988: ( len D246 ) < ( len R33 ) by L1398 , L1924 , L1936 , XREAL_0:def 2;
thus L1989: D247 is_vertex_seq_of D246 by L1390 , L1400 , L1934 , L1924 , L1117;
L1990: ( len D247 ) = ( ( len D239 ) + 1 ) by L1986 , L767;
thus L1991: ( len D247 ) < ( len R30 ) by L1990 , L1392 , L1393 , L1937 , XXREAL_0:2;
thus L1992: ( R30 . 1 ) = ( D247 . 1 ) by L1391 , L1959 , L335;
thus L1993: ( R30 . ( len R30 ) ) = ( D247 . ( len D247 ) ) by L1391 , L1392 , L1394 , L1920 , L335;
L1994: ( Sgm D241 ) = ( idseq D177 ) by FINSEQ_3:48;
L1995: ( dom ( Sgm D241 ) ) = ( Seg D177 ) by L1994 , RELAT_1:45;
L1996:
now
let C239 being set;
thus L1997:now
assume L1998: C239 in D239;
consider C240 , C241 being set such that L1999: C239 = [ C240 , C241 ] by L1998 , RELAT_1:def 1;
L2000: C241 = ( D239 . C240 ) by L1998 , L1999 , FUNCT_1:1;
L2001: C240 in ( dom D239 ) by L1998 , L1999 , FUNCT_1:1;
reconsider D248 = C240 as (Element of ( NAT )) by L2001;
L2002: D248 <= ( len D239 ) by L2001 , FINSEQ_3:25;
L2003: 1 <= D248 by L2001 , FINSEQ_3:25;
L2004: C240 in ( dom D242 ) by L2003 , L1936 , L1995 , L2002;
L2005: D248 = ( D242 . D248 ) by L2004 , L1994 , L1995 , FUNCT_1:18;
L2006: ( ( 0 ) + 1 ) <= D248 by L2001 , FINSEQ_3:25;
consider C242 being (Element of ( NAT )) such that L2007: ( 0 ) <= C242 and L2008: C242 < D177 and L2009: D248 = ( C242 + 1 ) by L2006 , L1936 , L2002 , L1;
L2010: D248 in D241 by L1936 , L2003 , L2002;
L2011: C240 in ( dom ( D240 * D242 ) ) by L2010 , L1921 , L1995 , L2005 , FUNCT_1:11;
L2012: ( ( D240 * D242 ) . C240 ) = ( D240 . D248 ) by L2011 , L2005 , FUNCT_1:12
.= ( R33 . ( 1 + C242 ) ) by L1921 , L2010 , L2009 , GRFUNC_1:2
.= C241 by L1399 , L1924 , L1935 , L1936 , L2000 , L2008 , L2009 , L226;
thus L2013: C239 in ( D240 * ( Sgm D241 ) ) by L2012 , L1999 , L2011 , FUNCT_1:1;
end;
assume L2014: C239 in ( D240 * ( Sgm D241 ) );
consider C243 , C244 being set such that L2015: C239 = [ C243 , C244 ] by L2014 , RELAT_1:def 1;
L2016: C244 = ( ( D240 * D242 ) . C243 ) by L2014 , L2015 , FUNCT_1:1;
L2017: C243 in ( dom ( D240 * D242 ) ) by L2014 , L2015 , FUNCT_1:1;
L2018: ( ( D240 * D242 ) . C243 ) = ( D240 . ( D242 . C243 ) ) by L2017 , FUNCT_1:12;
L2019: C243 in ( dom D242 ) by L2017 , FUNCT_1:11;
consider R10 being (Element of ( NAT )) such that L2020: R10 = C243 and L2021: 1 <= R10 and L2022: R10 <= D177 by L2019 , L1995;
L2023: R10 in ( dom D240 ) by L1921 , L2021 , L2022;
L2024: R10 in ( dom D239 ) by L1936 , L2021 , L2022 , FINSEQ_3:25;
L2025: R10 = ( D242 . R10 ) by L1994 , L1995 , L2019 , L2020 , FUNCT_1:18;
L2026: ( ( 0 ) + 1 ) <= R10 by L2021;
L2027: (ex B89 being (Element of ( NAT )) st (( 0 ) <= B89 & B89 < D177 & R10 = ( B89 + 1 ))) by L2026 , L2022 , L1;
L2028: ( D239 . R10 ) = ( R33 . R10 ) by L2027 , L1399 , L1924 , L1935 , L1936 , L226
.= C244 by L2016 , L2018 , L2020 , L2023 , L2025 , GRFUNC_1:2;
thus L2029: C239 in D239 by L2028 , L2015 , L2020 , L2024 , FUNCT_1:1;
end;
thus L2030: ( Seq D240 ) = D246 by L1996 , L1921 , TARSKI:1;
set D249 = ( Sgm D245 );
L2031: ( Sgm D245 ) = ( idseq C146 ) by FINSEQ_3:48;
L2032: ( dom ( Sgm D245 ) ) = ( Seg C146 ) by L2031 , RELAT_1:45;
L2033:
now
let C245 being set;
thus L2034:now
assume L2035: C245 in D236;
consider C246 , C247 being set such that L2036: C245 = [ C246 , C247 ] by L2035 , RELAT_1:def 1;
L2037: C247 = ( D236 . C246 ) by L2035 , L2036 , FUNCT_1:1;
L2038: C246 in ( dom D236 ) by L2035 , L2036 , FUNCT_1:1;
reconsider D250 = C246 as (Element of ( NAT )) by L2038;
L2039: D250 <= ( len D236 ) by L2038 , FINSEQ_3:25;
L2040: 1 <= D250 by L2038 , FINSEQ_3:25;
L2041: C246 in ( dom D249 ) by L2040 , L1987 , L1937 , L2032 , L2039;
L2042: D250 = ( D249 . D250 ) by L2041 , L2031 , L2032 , FUNCT_1:18;
L2043: ( ( 0 ) + 1 ) <= D250 by L2038 , FINSEQ_3:25;
consider C248 being (Element of ( NAT )) such that L2044: ( 0 ) <= C248 and L2045: C248 < C146 and L2046: D250 = ( C248 + 1 ) by L2043 , L1987 , L1937 , L2039 , L1;
L2047: D250 in D245 by L1987 , L1937 , L2040 , L2039;
L2048: C246 in ( dom ( D244 * D249 ) ) by L2047 , L1957 , L2032 , L2042 , FUNCT_1:11;
L2049: ( ( D244 * D249 ) . C246 ) = ( D244 . D250 ) by L2048 , L2042 , FUNCT_1:12
.= ( R30 . ( 1 + C248 ) ) by L1957 , L2047 , L2046 , GRFUNC_1:2
.= C247 by L1391 , L1959 , L1987 , L1937 , L2037 , L2045 , L2046 , L187;
thus L2050: C245 in ( D244 * ( Sgm D245 ) ) by L2049 , L2036 , L2048 , FUNCT_1:1;
end;
assume L2051: C245 in ( D244 * ( Sgm D245 ) );
consider C249 , C250 being set such that L2052: C245 = [ C249 , C250 ] by L2051 , RELAT_1:def 1;
L2053: C250 = ( ( D244 * D249 ) . C249 ) by L2051 , L2052 , FUNCT_1:1;
L2054: C249 in ( dom ( D244 * D249 ) ) by L2051 , L2052 , FUNCT_1:1;
L2055: ( ( D244 * D249 ) . C249 ) = ( D244 . ( D249 . C249 ) ) by L2054 , FUNCT_1:12;
L2056: C249 in ( dom D249 ) by L2054 , FUNCT_1:11;
consider R10 being (Element of ( NAT )) such that L2057: R10 = C249 and L2058: 1 <= R10 and L2059: R10 <= C146 by L2056 , L2032;
L2060: R10 in ( dom D244 ) by L1957 , L2058 , L2059;
L2061: R10 in ( dom D236 ) by L1987 , L1937 , L2058 , L2059 , FINSEQ_3:25;
L2062: R10 = ( D249 . R10 ) by L2031 , L2032 , L2056 , L2057 , FUNCT_1:18;
L2063: ( ( 0 ) + 1 ) <= R10 by L2058;
L2064: (ex B90 being (Element of ( NAT )) st (( 0 ) <= B90 & B90 < C146 & R10 = ( B90 + 1 ))) by L2063 , L2059 , L1;
L2065: ( D236 . R10 ) = ( R30 . R10 ) by L2064 , L1391 , L1959 , L1987 , L1937 , L187
.= C250 by L2053 , L2055 , L2057 , L2060 , L2062 , GRFUNC_1:2;
thus L2066: C245 in D236 by L2065 , L2052 , L2057 , L2061 , FUNCT_1:1;
end;
thus L2067: thesis by L2033 , L1957 , TARSKI:1;
end;
end;
theorem
L2069: (for R23 being Graph holds (for R30 being (FinSequence of (the carrier of R23)) holds (for R33 being (Chain of R23) holds (R30 is_vertex_seq_of R33 implies (ex B91 being (Subset of R33) st (ex B92 being (Subset of R30) st (ex R36 being  simple (Chain of R23) st (ex R31 being (FinSequence of (the carrier of R23)) st (( Seq B91 ) = R36 & ( Seq B92 ) = R31 & R31 is_vertex_seq_of R36 & ( R30 . 1 ) = ( R31 . 1 ) & ( R30 . ( len R30 ) ) = ( R31 . ( len R31 ) ))))))))))
proof
let R23 being Graph;
let R30 being (FinSequence of (the carrier of R23));
let R33 being (Chain of R23);
assume L2070: R30 is_vertex_seq_of R33;
per cases ;
suppose L2071: R33 is  simple  simple  simple  simple (Chain of R23);

reconsider D251 = R33 as  simple (Chain of R23) by L2071;
reconsider D252 = R30 as (Subset of R30) by L671;
reconsider D253 = R33 as (Subset of R33) by L671;
take D253;
take D252;
take D251;
take R30;
thus L2072: (( Seq D253 ) = D251 & ( Seq D252 ) = R30) by FINSEQ_3:116;
thus L2073: R30 is_vertex_seq_of D251 by L2070;
thus L2074: thesis;
end;
suppose L2075: (not R33 is  simple  simple  simple  simple (Chain of R23));

defpred S14[ Nat ] means (ex B93 being (Subset of R33) st (ex B94 being (Subset of R30) st (ex R34 being (Chain of R23) st (ex R31 being (FinSequence of (the carrier of R23)) st (( Seq B93 ) = R34 & ( Seq B94 ) = R31 & R31 is_vertex_seq_of R34 & ( R30 . 1 ) = ( R31 . 1 ) & ( R30 . ( len R30 ) ) = ( R31 . ( len R31 ) ) & ( len R34 ) = $1 & (not R34 is  simple  simple  simple  simple (Chain of R23)))))));
L2076: S14[ (( len R33 ) qua (Element of ( NAT ))) ]
proof
reconsider D254 = R30 as (Subset of R30) by L671;
reconsider D255 = R33 as (Subset of R33) by L671;
take D255;
take D254;
take R33;
take R30;
thus L2077: (( Seq D255 ) = R33 & ( Seq D254 ) = R30) by FINSEQ_3:116;
thus L2078: R30 is_vertex_seq_of R33 by L2070;
thus L2079: (( R30 . 1 ) = ( R30 . 1 ) & ( R30 . ( len R30 ) ) = ( R30 . ( len R30 ) ));
thus L2080: thesis by L2075;
end;
L2081: (ex B95 being Nat st S14[ B95 ]) by L2076;
consider C251 being Nat such that L2082: (S14[ C251 ] & (for B96 being Nat holds (S14[ B96 ] implies C251 <= B96))) from NAT_1:sch 5(L2081);
consider C252 being (Subset of R33), C253 being (Subset of R30), R34 being (Chain of R23), R31 being (FinSequence of (the carrier of R23)) such that L2083: ( Seq C252 ) = R34 and L2084: ( Seq C253 ) = R31 and L2085: R31 is_vertex_seq_of R34 and L2086: ( R30 . 1 ) = ( R31 . 1 ) and L2087: ( R30 . ( len R30 ) ) = ( R31 . ( len R31 ) ) and L2088: ( len R34 ) = C251 and L2089: (not R34 is  simple  simple  simple  simple (Chain of R23)) by L2082;
consider C254 being (Subset of R34), C255 being (Subset of R31), R35 being (Chain of R23), R32 being (FinSequence of (the carrier of R23)) such that L2090: ( len R35 ) < ( len R34 ) and L2091: R32 is_vertex_seq_of R35 and L2092: ( len R32 ) < ( len R31 ) and L2093: ( R31 . 1 ) = ( R32 . 1 ) and L2094: ( R31 . ( len R31 ) ) = ( R32 . ( len R32 ) ) and L2095: ( Seq C254 ) = R35 and L2096: ( Seq C255 ) = R32 by L2085 , L2089 , L1388;
reconsider D256 = ( C252 | ( rng ( ( Sgm ( dom C252 ) ) | ( dom C254 ) ) ) ) as (Subset of R33) by L674;
reconsider D257 = ( C253 | ( rng ( ( Sgm ( dom C253 ) ) | ( dom C255 ) ) ) ) as (Subset of R30) by L674;
L2097: ( Seq D257 ) = R32 by L2084 , L2096 , L677;
L2098: ( Seq D256 ) = R35 by L2083 , L2095 , L677;
L2099: (R35 is  simple  simple  simple  simple (Chain of R23) implies thesis) by L2098 , L2086 , L2087 , L2091 , L2093 , L2094 , L2097;
thus L2100: thesis by L2099 , L2082 , L2086 , L2087 , L2088 , L2090 , L2091 , L2093 , L2094 , L2098 , L2097;
end;
end;
registration
let R23 being Graph;
cluster  empty ->  one-to-one for (Chain of R23);
correctness;
end;
theorem
L2103: (for R1 being FinSequence holds (for R13 being (Element of ( NAT )) holds (for R23 being Graph holds (R1 is (Path of R23) implies ( R1 | ( Seg R13 ) ) is (Path of R23)))))
proof
let R1 being FinSequence;
let R13 being (Element of ( NAT ));
let R23 being Graph;
reconsider D258 = ( R1 | ( Seg R13 ) ) as FinSequence;
assume L2104: R1 is (Path of R23);
L2105:
now
let C256 , C257 being (Element of ( NAT ));
assume that
L2106: 1 <= C256
and
L2107: C256 < C257
and
L2108: C257 <= ( len D258 );
L2109: 1 < C257 by L2106 , L2107 , XXREAL_0:2;
L2110: C257 in ( dom D258 ) by L2109 , L2108 , FINSEQ_3:25;
L2111: ( D258 . C257 ) = ( R1 . C257 ) by L2110 , FUNCT_1:47;
L2112: C256 < ( len D258 ) by L2107 , L2108 , XXREAL_0:2;
L2113: C256 in ( dom D258 ) by L2112 , L2106 , FINSEQ_3:25;
L2114: ( D258 . C256 ) = ( R1 . C256 ) by L2113 , FUNCT_1:47;
L2115: ( dom D258 ) c= ( dom R1 ) by RELAT_1:60;
L2116: ( dom D258 ) c= ( Seg ( len R1 ) ) by L2115 , FINSEQ_1:def 3;
L2117: ( Seg ( len D258 ) ) c= ( Seg ( len R1 ) ) by L2116 , FINSEQ_1:def 3;
L2118: ( len D258 ) <= ( len R1 ) by L2117 , FINSEQ_1:5;
L2119: C257 <= ( len R1 ) by L2118 , L2108 , XXREAL_0:2;
thus L2120: ( D258 . C256 ) <> ( D258 . C257 ) by L2119 , L2104 , L2106 , L2107 , L2111 , L2114 , GRAPH_1:def 16;
end;
thus L2121: thesis by L2105 , L2104 , GRAPH_1:4 , GRAPH_1:def 16;
end;
registration
let R23 being Graph;
cluster  simple for (Path of R23);
existence
proof
set D259 = the (Element of R23);
set D260 = the  empty (Chain of R23);
reconsider D261 = D260 as  one-to-one (Chain of R23);
take D261;
reconsider D262 = <* D259 *> as (FinSequence of (the carrier of R23));
take D262;
thus L2122: D262 is_vertex_seq_of D261 by L1292;
let R13 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
assume that
L2123: 1 <= R13
and
L2124: R13 < R12
and
L2125: R12 <= ( len D262 )
and
L2126: ( D262 . R13 ) = ( D262 . R12 );
L2127: 1 < R12 by L2123 , L2124 , XXREAL_0:2;
thus L2128: thesis by L2127 , L2125 , FINSEQ_1:39;
end;
end;
theorem
L2130: (for R23 being Graph holds (for R36 being  simple (Chain of R23) holds (2 < ( len R36 ) implies R36 is (Path of R23))))
proof
let R23 being Graph;
let R36 being  simple (Chain of R23);
assume L2131: 2 < ( len R36 );
assume L2132: (not R36 is (Path of R23));
consider R12 being (Element of ( NAT )), R13 being (Element of ( NAT )) such that L2133: 1 <= R12 and L2134: R12 < R13 and L2135: R13 <= ( len R36 ) and L2136: ( R36 . R12 ) = ( R36 . R13 ) by L2132 , GRAPH_1:def 16;
consider R30 being (FinSequence of (the carrier of R23)) such that L2137: R30 is_vertex_seq_of R36 and L2138: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R30 ) & ( R30 . R13 ) = ( R30 . R12 )) implies (R13 = 1 & R12 = ( len R30 ))))) by L1296;
L2139: ( len R30 ) = ( ( len R36 ) + 1 ) by L2137 , L767;
L2140: ( R13 + 1 ) <= ( len R30 ) by L2139 , L2135 , XREAL_1:6;
set D263 = ( R30 /. ( R13 + 1 ) );
set D264 = ( R30 /. R13 );
L2141: 1 <= R13 by L2133 , L2134 , XXREAL_0:2;
L2142: ( R36 . R13 ) joins D264 , D263 by L2141 , L2135 , L2137 , L767;
L2143: R13 <= ( len R30 ) by L2135 , L2139 , NAT_1:12;
L2144: D264 = ( R30 . R13 ) by L2143 , L2141 , FINSEQ_4:15;
set D265 = ( R30 /. R12 );
set D266 = ( R30 /. ( R12 + 1 ) );
L2145: R12 <= ( len R36 ) by L2134 , L2135 , XXREAL_0:2;
L2146: ( R36 . R12 ) joins D265 , D266 by L2145 , L2133 , L2137 , L767;
L2147: ( R13 + 1 ) <= ( len R30 ) by L2135 , L2139 , XREAL_1:6;
L2148: D263 = ( R30 . ( R13 + 1 ) ) by L2147 , FINSEQ_4:15 , NAT_1:12;
L2149: ( R12 + 1 ) < ( R13 + 1 ) by L2134 , XREAL_1:6;
L2150: R12 < ( R13 + 1 ) by L2149 , NAT_1:12;
L2151: R12 <= ( len R30 ) by L2150 , L2147 , XXREAL_0:2;
L2152: D265 = ( R30 . R12 ) by L2151 , L2133 , FINSEQ_4:15;
L2153: ( R12 + 1 ) <= ( len R30 ) by L2149 , L2147 , XXREAL_0:2;
L2154: D266 = ( R30 . ( R12 + 1 ) ) by L2153 , FINSEQ_4:15 , NAT_1:12;
per cases  by L2136 , L2146 , L2142 , L761;
suppose L2155: (D265 = D264 & D266 = D263);

L2156: R12 = 1 by L2155 , L2133 , L2134 , L2138 , L2143 , L2152 , L2144;
thus L2157: contradiction by L2156 , L2138 , L2149 , L2147 , L2154 , L2148 , L2155;
end;
suppose L2158: (D265 = D263 & D266 = D264);

L2159: ( R13 + 1 ) = ( len R30 ) by L2158 , L2133 , L2138 , L2150 , L2140 , L2152 , L2148;
L2160: R12 = 1 by L2133 , L2138 , L2150 , L2140 , L2152 , L2148 , L2158;
thus L2161: contradiction by L2160 , L2131 , L2138 , L2139 , L2143 , L2154 , L2144 , L2158 , L2159;
end;
end;
theorem
L2163: (for R23 being Graph holds (for R36 being  simple (Chain of R23) holds (R36 is (Path of R23) iff (( len R36 ) = ( 0 ) or ( len R36 ) = 1 or ( R36 . 1 ) <> ( R36 . 2 )))))
proof
let R23 being Graph;
let R36 being  simple (Chain of R23);
thus L2164:now
assume L2165: R36 is (Path of R23);
assume L2166: (not ( len R36 ) = ( 0 ));
assume L2167: (not ( len R36 ) = 1);
L2168: ( len R36 ) > 1 by L2167 , L2166 , NAT_1:25;
L2169: ( 1 + 1 ) <= ( len R36 ) by L2168 , NAT_1:13;
assume L2170: ( R36 . 1 ) = ( R36 . 2 );
thus L2171: contradiction by L2170 , L2165 , L2169 , GRAPH_1:def 16;
end;
assume L2172: (( len R36 ) = ( 0 ) or ( len R36 ) = 1 or ( R36 . 1 ) <> ( R36 . 2 ));
per cases  by L2172;
suppose L2173: ( len R36 ) = ( 0 );

L2174: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R36 )) implies ( R36 . R13 ) <> ( R36 . R12 )))) by L2173;
thus L2175: thesis by L2174 , GRAPH_1:def 16;
end;
suppose L2176: ( len R36 ) = 1;

L2177: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R36 )) implies ( R36 . R13 ) <> ( R36 . R12 )))) by L2176 , XXREAL_0:2;
thus L2178: thesis by L2177 , GRAPH_1:def 16;
end;
suppose L2179: ( R36 . 1 ) <> ( R36 . 2 );

L2180:
now
let R13 being (Element of ( NAT ));
let R12 being (Element of ( NAT ));
assume that
L2181: 1 <= R13
and
L2182: R13 < R12
and
L2183: R12 <= ( len R36 );
thus L2184: ( R36 . R13 ) <> ( R36 . R12 )
proof
consider R30 being (FinSequence of (the carrier of R23)) such that L2185: R30 is_vertex_seq_of R36 and L2186: (for R13 being (Element of ( NAT )) holds (for R12 being (Element of ( NAT )) holds ((1 <= R13 & R13 < R12 & R12 <= ( len R30 ) & ( R30 . R13 ) = ( R30 . R12 )) implies (R13 = 1 & R12 = ( len R30 ))))) by L1296;
set D267 = ( R30 /. ( R12 + 1 ) );
L2187: ( len R30 ) = ( ( len R36 ) + 1 ) by L2185 , L767;
L2188: ( R12 + 1 ) <= ( len R30 ) by L2187 , L2183 , XREAL_1:6;
L2189: D267 = ( R30 . ( R12 + 1 ) ) by L2188 , FINSEQ_4:15 , NAT_1:12;
set D268 = ( R30 /. ( R13 + 1 ) );
set D269 = ( R30 /. R13 );
L2190: R13 <= ( len R36 ) by L2182 , L2183 , XXREAL_0:2;
L2191: ( R36 . R13 ) joins D269 , D268 by L2190 , L2181 , L2185 , L767;
L2192: ( R13 + 1 ) <= ( len R30 ) by L2187 , L2190 , XREAL_1:6;
L2193: D268 = ( R30 . ( R13 + 1 ) ) by L2192 , FINSEQ_4:15 , NAT_1:12;
L2194: R13 <= ( len R30 ) by L2187 , L2190 , NAT_1:12;
L2195: D269 = ( R30 . R13 ) by L2194 , L2181 , FINSEQ_4:15;
set D270 = ( R30 /. R12 );
L2196: 1 <= R12 by L2181 , L2182 , XXREAL_0:2;
L2197: ( R36 . R12 ) joins D270 , D267 by L2196 , L2183 , L2185 , L767;
L2198: R12 <= ( len R30 ) by L2183 , L2187 , NAT_1:12;
L2199: D270 = ( R30 . R12 ) by L2198 , L2196 , FINSEQ_4:15;
assume L2200: (not thesis);
per cases  by L2200 , L2191 , L2197 , L761;
suppose L2201: (D269 = D270 & D268 = D267);

L2202: ( R13 + 1 ) < ( R12 + 1 ) by L2182 , XREAL_1:6;
L2203: R13 = 1 by L2181 , L2182 , L2186 , L2198 , L2195 , L2199 , L2201;
thus L2204: contradiction by L2203 , L2186 , L2188 , L2193 , L2189 , L2201 , L2202;
end;
suppose L2205: (D269 = D267 & D268 = D270);

thus L2206: contradiction
proof
L2207: ( R13 + 1 ) <= R12 by L2182 , NAT_1:13;
L2208: ( R13 + ( 0 ) ) < ( R12 + 1 ) by L2182 , XREAL_1:8;
per cases  by L2207 , XXREAL_0:1;
suppose L2209: ( R13 + 1 ) = R12;

L2210: R13 = 1 by L2181 , L2186 , L2188 , L2195 , L2189 , L2205 , L2208;
thus L2211: contradiction by L2210 , L2179 , L2200 , L2209;
end;
suppose L2212: ( R13 + 1 ) < R12;

L2213: R13 = 1 by L2181 , L2186 , L2188 , L2195 , L2189 , L2205 , L2208;
thus L2214: contradiction by L2213 , L2186 , L2198 , L2193 , L2199 , L2205 , L2212;
end;
end;

end;
end;

end;
thus L2185: thesis by L2180 , GRAPH_1:def 16;
end;
end;
registration
let R23 being Graph;
cluster  empty ->  oriented for (Chain of R23);
correctness;
end;
definition
let R23 being Graph;
let C258 being  oriented (Chain of R23);
assume L2188: C258 <> ( {} );
func vertex-seq C258 -> (FinSequence of (the carrier of R23)) means 
(it is_vertex_seq_of C258 & ( it . 1 ) = ( (the Source of R23) . ( C258 . 1 ) ));
existence
proof
set D271 = (the Target of R23);
set D272 = (the Source of R23);
deffunc H11(Nat) = ( D272 . ( C258 . $1 ) );
consider C259 being FinSequence such that L2189: (( len C259 ) = ( len C258 ) & (for B97 being Nat holds (B97 in ( dom C259 ) implies ( C259 . B97 ) = H11(B97)))) from FINSEQ_1:sch 2;
set D273 = ( C259 ^ <* ( D271 . ( C258 . ( len C258 ) ) ) *> );
L2190: ( len D273 ) = ( ( len C258 ) + ( len <* ( D271 . ( C258 . ( len C258 ) ) ) *> ) ) by L2189 , FINSEQ_1:22
.= ( ( len C258 ) + 1 ) by FINSEQ_1:39;
L2191: ( Seg ( len C259 ) ) = ( dom C259 ) by FINSEQ_1:def 3;
L2192: ( Seg ( len C258 ) ) = ( dom C258 ) by FINSEQ_1:def 3;
L2193: ( ( 0 ) + 1 ) = 1;
L2194: 1 <= ( len C258 ) by L2193 , L2188 , NAT_1:13;
L2195: ( rng D273 ) c= (the carrier of R23)
proof
let C260 being set;
assume L2196: C260 in ( rng D273 );
consider C261 being set such that L2197: C261 in ( dom D273 ) and L2198: C260 = ( D273 . C261 ) by L2196 , FUNCT_1:def 3;
reconsider D274 = C261 as (Element of ( NAT )) by L2197;
L2199: 1 <= D274 by L2197 , FINSEQ_3:25;
L2200: D274 <= ( len D273 ) by L2197 , FINSEQ_3:25;
per cases  by L2190 , L2200 , NAT_1:8;
suppose L2201: D274 <= ( len C258 );

L2202: ( rng C258 ) c= (the carrier' of R23) by FINSEQ_1:def 4;
L2203: D274 in ( dom C258 ) by L2199 , L2201 , FINSEQ_3:25;
L2204: ( C258 . D274 ) in ( rng C258 ) by L2203 , FUNCT_1:def 3;
reconsider D275 = ( C258 . D274 ) as (Element of (the carrier' of R23)) by L2204 , L2202;
L2205: ( D272 . D275 ) in ( rng (the Source of R23) ) by L2204 , L2202 , FUNCT_2:4;
L2206: ( rng (the Source of R23) ) c= (the carrier of R23) by RELAT_1:def 19;
L2207: ( D273 . D274 ) = ( C259 . D274 ) by L2189 , L2192 , L2191 , L2203 , FINSEQ_1:def 7
.= ( D272 . D275 ) by L2189 , L2192 , L2191 , L2203;
thus L2208: thesis by L2207 , L2198 , L2205 , L2206;
end;
suppose L2209: D274 = ( ( len C258 ) + 1 );

L2210: ( len C258 ) in ( dom C258 ) by L2194 , FINSEQ_3:25;
L2211: ( C258 . ( len C258 ) ) in ( rng C258 ) by L2210 , FUNCT_1:def 3;
L2212: ( rng C258 ) c= (the carrier' of R23) by FINSEQ_1:def 4;
reconsider D276 = ( C258 . ( len C258 ) ) as (Element of (the carrier' of R23)) by L2212 , L2211;
L2213: ( rng (the Target of R23) ) c= (the carrier of R23) by RELAT_1:def 19;
L2214: ( D271 . D276 ) in ( rng (the Target of R23) ) by L2211 , L2212 , FUNCT_2:4;
L2215: C260 is (Element of R23) by L2214 , L2189 , L2198 , L2209 , L2213 , FINSEQ_1:42;
thus L2216: thesis by L2215;
end;
end;
reconsider D277 = D273 as (FinSequence of (the carrier of R23)) by L2195 , FINSEQ_1:def 4;
take D277;
L2218:
now
thus L2219: ( len D277 ) = ( ( len C258 ) + 1 ) by L2190;
let R13 being (Element of ( NAT ));
assume that
L2220: 1 <= R13
and
L2221: R13 <= ( len C258 );
L2222: 1 <= ( R13 + 1 ) by NAT_1:12;
L2223: ( R13 + 1 ) <= ( len D277 ) by L2190 , L2221 , XREAL_1:7;
L2224: ( R13 + 1 ) in ( dom D277 ) by L2223 , L2222 , FINSEQ_3:25;
reconsider D278 = ( D277 . ( R13 + 1 ) ) as (Element of R23) by L2224 , FINSEQ_2:11;
L2225: D278 = ( D277 /. ( R13 + 1 ) ) by L2190 , L2221 , L2222 , FINSEQ_4:15 , XREAL_1:7;
L2226: D278 = ( D271 . ( C258 . R13 ) )
proof
per cases  by L2221 , XXREAL_0:1;
suppose L2227: R13 < ( len C258 );

L2228: ( R13 + 1 ) <= ( len C258 ) by L2227 , NAT_1:13;
L2229: ( R13 + 1 ) in ( dom C258 ) by L2228 , L2222 , FINSEQ_3:25;
thus L2230: D278 = ( C259 . ( R13 + 1 ) ) by L2229 , L2189 , L2192 , L2191 , FINSEQ_1:def 7
.= ( D272 . ( C258 . ( R13 + 1 ) ) ) by L2189 , L2192 , L2191 , L2229
.= ( D271 . ( C258 . R13 ) ) by L2220 , L2227 , GRAPH_1:def 15;
end;
suppose L2231: R13 = ( len C258 );

thus L2232: thesis by L2231 , L2189 , FINSEQ_1:42;
end;
end;
L2234: R13 <= ( len D277 ) by L2190 , L2221 , NAT_1:12;
L2235: R13 in ( dom D277 ) by L2234 , L2220 , FINSEQ_3:25;
reconsider D279 = ( D277 . R13 ) as (Element of R23) by L2235 , FINSEQ_2:11;
L2236: D279 = ( D277 /. R13 ) by L2220 , L2234 , FINSEQ_4:15;
L2237: R13 in ( dom C258 ) by L2220 , L2221 , FINSEQ_3:25;
L2238: D279 = ( C259 . R13 ) by L2237 , L2189 , L2192 , L2191 , FINSEQ_1:def 7
.= ( D272 . ( C258 . R13 ) ) by L2189 , L2192 , L2191 , L2237;
thus L2239: ( C258 . R13 ) joins ( D277 /. R13 ) , ( D277 /. ( R13 + 1 ) ) by L2238 , L2226 , L2236 , L2225 , GRAPH_1:def 12;
end;
thus L2240: D277 is_vertex_seq_of C258 by L2218 , L767;
L2241: 1 in ( dom C259 ) by L2189 , L2194 , FINSEQ_3:25;
L2242: ( C259 . 1 ) = ( D272 . ( C258 . 1 ) ) by L2241 , L2189;
thus L2243: thesis by L2242 , L2241 , FINSEQ_1:def 7;
end;
uniqueness by L2188 , L845;
end;
begin
theorem
L2245: (for R7 being non  empty set holds (for B98 being non  empty (FinSequence of R7) holds (for B99 being (FinSequence of R7) holds ( ( B98 ^' B99 ) /. 1 ) = ( B98 /. 1 ))))
proof
let R7 being non  empty set;
let C262 being non  empty (FinSequence of R7);
let C263 being (FinSequence of R7);
L2246: 1 in ( dom C262 ) by FINSEQ_5:6;
L2247: 1 in ( dom ( C262 ^ ( (2 , ( len C263 )) -cut C263 ) ) ) by FINSEQ_5:6;
thus L2248: ( ( C262 ^' C263 ) /. 1 ) = ( ( C262 ^ ( (2 , ( len C263 )) -cut C263 ) ) . 1 ) by L2247 , PARTFUN1:def 6
.= ( C262 . 1 ) by L2246 , FINSEQ_1:def 7
.= ( C262 /. 1 ) by L2246 , PARTFUN1:def 6;
end;
theorem
L2249: (for R7 being non  empty set holds (for B100 being (FinSequence of R7) holds (for B101 being non  trivial (FinSequence of R7) holds ( ( B100 ^' B101 ) /. ( len ( B100 ^' B101 ) ) ) = ( B101 /. ( len B101 ) ))))
proof
let R7 being non  empty set;
let C264 being (FinSequence of R7);
let C265 being non  trivial (FinSequence of R7);
L2250: ( ( len ( C264 ^' C265 ) ) + 1 ) = ( ( len C264 ) + ( len C265 ) ) by L354;
L2251: 2 <= ( len C265 ) by NAT_D:60;
L2252: 1 < ( len C265 ) by L2251 , XXREAL_0:2;
L2253: ( 1 + ( 0 ) ) < ( ( len C264 ) + ( len C265 ) ) by L2252 , XREAL_1:8;
L2254: 1 <= ( len ( C264 ^' C265 ) ) by L2253 , L2250 , NAT_1:13;
thus L2255: ( ( C264 ^' C265 ) /. ( len ( C264 ^' C265 ) ) ) = ( ( C264 ^' C265 ) . ( len ( C264 ^' C265 ) ) ) by L2254 , FINSEQ_4:15
.= ( C265 . ( len C265 ) ) by L2252 , L383
.= ( C265 /. ( len C265 ) ) by L2252 , FINSEQ_4:15;
end;
theorem
L2256: (for B102 being FinSequence holds ( B102 ^' ( {} ) ) = B102)
proof
let C266 being FinSequence;
thus L2257: ( C266 ^' ( {} ) ) = ( C266 ^ ( {} ) ) by L187
.= C266 by FINSEQ_1:34;
end;
theorem
L2258: (for R5 being set holds (for B103 being FinSequence holds ( B103 ^' <* R5 *> ) = B103))
proof
let R5 being set;
let C267 being FinSequence;
L2259: ( len <* R5 *> ) = 1 by FINSEQ_1:39;
L2260: ( (2 , ( len <* R5 *> )) -cut <* R5 *> ) = ( {} ) by L2259 , L187;
thus L2261: thesis by L2260 , FINSEQ_1:34;
end;
theorem
L2262: (for R7 being non  empty set holds (for R13 being (Element of ( NAT )) holds (for B104 , B105 being (FinSequence of R7) holds ((1 <= R13 & R13 <= ( len B104 )) implies ( ( B104 ^' B105 ) /. R13 ) = ( B104 /. R13 )))))
proof
let R7 being non  empty set;
let R13 being (Element of ( NAT ));
let C268 , C269 being (FinSequence of R7);
assume that
L2263: 1 <= R13
and
L2264: R13 <= ( len C268 );
per cases ;
suppose L2265: C269 = ( {} );

thus L2266: thesis by L2265 , L2256;
end;
suppose L2267: C269 <> ( {} );

L2268: ( ( len C268 ) + ( 0 ) ) < ( ( len C268 ) + ( len C269 ) ) by L2267 , XREAL_1:6;
L2269: ( ( len ( C268 ^' C269 ) ) + 1 ) = ( ( len C268 ) + ( len C269 ) ) by L2267 , L354;
L2270: R13 < ( ( len ( C268 ^' C269 ) ) + 1 ) by L2269 , L2264 , L2268 , XXREAL_0:2;
L2271: R13 <= ( len ( C268 ^' C269 ) ) by L2270 , NAT_1:13;
thus L2272: ( ( C268 ^' C269 ) /. R13 ) = ( ( C268 ^' C269 ) . R13 ) by L2271 , L2263 , FINSEQ_4:15
.= ( C268 . R13 ) by L2263 , L2264 , L360
.= ( C268 /. R13 ) by L2263 , L2264 , FINSEQ_4:15;
end;
end;
theorem
L2274: (for R7 being non  empty set holds (for R13 being (Element of ( NAT )) holds (for B106 , B107 being (FinSequence of R7) holds ((1 <= R13 & R13 < ( len B107 )) implies ( ( B106 ^' B107 ) /. ( ( len B106 ) + R13 ) ) = ( B107 /. ( R13 + 1 ) )))))
proof
let R7 being non  empty set;
let R13 being (Element of ( NAT ));
let C270 , C271 being (FinSequence of R7);
assume that
L2275: 1 <= R13
and
L2276: R13 < ( len C271 );
L2277: ( R13 + 1 ) <= ( len C271 ) by L2276 , NAT_1:13;
L2278:
now
per cases ;
suppose L2279: C271 <> ( {} );

L2280: ( ( len C270 ) + R13 ) < ( ( len C270 ) + ( len C271 ) ) by L2276 , XREAL_1:6;
L2281: ( ( len ( C270 ^' C271 ) ) + 1 ) = ( ( len C270 ) + ( len C271 ) ) by L2279 , L354;
thus L2282: ( ( len C270 ) + R13 ) <= ( len ( C270 ^' C271 ) ) by L2281 , L2280 , NAT_1:13;
end;
suppose L2283: C271 = ( {} );

thus L2284: ( ( len C270 ) + R13 ) <= ( len ( C270 ^' C271 ) ) by L2283 , L2276;
end;
end;
L2286: ( ( 0 ) + 1 ) <= ( R13 + 1 ) by XREAL_1:6;
L2287: ( ( 0 ) + 1 ) <= ( ( len C270 ) + R13 ) by L2275 , XREAL_1:7;
thus L2288: ( ( C270 ^' C271 ) /. ( ( len C270 ) + R13 ) ) = ( ( C270 ^' C271 ) . ( ( len C270 ) + R13 ) ) by L2287 , L2278 , FINSEQ_4:15
.= ( C271 . ( R13 + 1 ) ) by L2275 , L2276 , L365
.= ( C271 /. ( R13 + 1 ) ) by L2286 , L2277 , FINSEQ_4:15;
end;
definition
let C272 being (FinSequence of ( INT ));
let C273 , C274 being (Element of ( NAT ));
assume that
L2289: 1 <= C273
and
L2290: C273 <= C274
and
L2291: C274 <= ( len C272 );
func min_at (C272 , C273 , C274) -> (Element of ( NAT )) means 
:L2292: (ex B108 being  finite non  empty (Subset of ( INT )) st (B108 = ( rng ( (C273 , C274) -cut C272 ) ) & ( it + 1 ) = ( ( ( min B108 ) .. ( (C273 , C274) -cut C272 ) ) + C273 )));
existence
proof
set D280 = ( (C273 , C274) -cut C272 );
set D281 = ( rng D280 );
L2293: C273 < ( C274 + 1 ) by L2290 , NAT_1:13;
L2294: ( C273 - C273 ) < ( ( C274 + 1 ) - C273 ) by L2293 , XREAL_1:9;
L2295: ( ( len D280 ) + C273 ) = ( C274 + 1 ) by L2289 , L2290 , L2291 , L187;
L2296: D280 is non  empty by L2295 , L2294;
L2297: ( rng (D280 qua (Relation of ( NAT ) , ( INT ))) ) is (Subset of ( INT ));
reconsider D282 = D281 as  finite non  empty (Subset of ( INT )) by L2297 , L2296;
set D283 = ( ( ( ( min D282 ) .. D280 ) + C273 ) - 1 );
L2298: ( 1 - 1 ) <= ( C273 - 1 ) by L2289 , XREAL_1:9;
L2299: ( ( 0 ) + ( 0 ) ) <= ( ( ( min D282 ) .. D280 ) + ( C273 - 1 ) ) by L2298;
reconsider D284 = D283 as (Element of ( NAT )) by L2299 , INT_1:3;
take D284;
take D282;
thus L2300: D282 = ( rng D280 );
thus L2301: thesis;
end;
uniqueness;
end;
theorem
L2303: (for R37 being (FinSequence of ( INT )) holds (for R40 being (Element of ( NAT )) holds (for R41 being (Element of ( NAT )) holds (for R42 being (Element of ( NAT )) holds ((1 <= R40 & R40 <= R41 & R41 <= ( len R37 )) implies (R42 = ( min_at (R37 , R40 , R41) ) iff (R40 <= R42 & R42 <= R41 & (for B109 being (Element of ( NAT )) holds ((R40 <= B109 & B109 <= R41) implies ( R37 . R42 ) <= ( R37 . B109 ))) & (for B110 being (Element of ( NAT )) holds ((R40 <= B110 & B110 < R42) implies ( R37 . R42 ) < ( R37 . B110 ))))))))))
proof
let R37 being (FinSequence of ( INT ));
let R40 being (Element of ( NAT ));
let R41 being (Element of ( NAT ));
let R42 being (Element of ( NAT ));
assume that
L2304: 1 <= R40
and
L2305: R40 <= R41
and
L2306: R41 <= ( len R37 );
set D285 = ( (R40 , R41) -cut R37 );
L2307: ( ( len D285 ) + R40 ) = ( R41 + 1 ) by L2304 , L2305 , L2306 , L187;
thus L2308:now
L2309: ( R41 - R40 ) < ( ( R41 - R40 ) + 1 ) by XREAL_1:29;
assume L2310: R42 = ( min_at (R37 , R40 , R41) );
consider C275 being  finite non  empty (Subset of ( INT )) such that L2311: C275 = ( rng D285 ) and L2312: ( R42 + 1 ) = ( ( ( min C275 ) .. D285 ) + R40 ) by L2310 , L2304 , L2305 , L2306 , L2292;
L2313: R42 = ( ( ( ( min C275 ) .. D285 ) - 1 ) + R40 ) by L2312;
L2314: R42 = ( ( ( ( min C275 ) .. D285 ) + R40 ) - 1 ) by L2312;
L2315: ( min C275 ) in C275 by XXREAL_2:def 7;
L2316: 1 <= ( ( min C275 ) .. D285 ) by L2315 , L2311 , FINSEQ_4:21;
L2317: ( 1 - 1 ) <= ( ( ( min C275 ) .. D285 ) - 1 ) by L2316 , XREAL_1:9;
reconsider D286 = ( ( ( min C275 ) .. D285 ) - 1 ) as (Element of ( NAT )) by L2317 , INT_1:3;
L2318: ( ( min C275 ) .. D285 ) <= ( len D285 ) by L2311 , L2315 , FINSEQ_4:21;
L2319: D286 < ( len D285 ) by L2318 , XREAL_1:146 , XXREAL_0:2;
L2320: ( R37 . R42 ) = ( D285 . ( D286 + 1 ) ) by L2319 , L2304 , L2305 , L2306 , L2313 , L187
.= ( D285 . ( ( R42 + 1 ) - R40 ) ) by L2312;
L2321: ( ( ( min C275 ) .. D285 ) + R40 ) <= ( ( len D285 ) + R40 ) by L2318 , XREAL_1:6;
L2322: R42 <= ( ( ( len D285 ) + R40 ) - 1 ) by L2321 , L2314 , XREAL_1:9;
L2323: ( R40 + 1 ) <= ( ( ( min C275 ) .. D285 ) + R40 ) by L2316 , XREAL_1:6;
L2324: ( ( R40 + 1 ) - 1 ) <= R42 by L2323 , L2314 , XREAL_1:9;
thus L2325: (R40 <= R42 & R42 <= R41) by L2324 , L2307 , L2322;
L2326: ( D285 . ( ( min C275 ) .. D285 ) ) = ( min C275 ) by L2311 , L2315 , FINSEQ_4:19;
thus L2327: (for B111 being (Element of ( NAT )) holds ((R40 <= B111 & B111 <= R41) implies ( R37 . R42 ) <= ( R37 . B111 )))
proof
let C276 being (Element of ( NAT ));
assume that
L2328: R40 <= C276
and
L2329: C276 <= R41;
L2330: ( R40 - R40 ) <= ( C276 - R40 ) by L2328 , XREAL_1:9;
reconsider D287 = ( C276 - R40 ) as (Element of ( NAT )) by L2330 , INT_1:3;
L2331: ( ( 0 ) + 1 ) <= ( D287 + 1 ) by XREAL_1:6;
L2332: ( R41 - R40 ) < ( ( R41 - R40 ) + 1 ) by XREAL_1:29;
L2333: D287 <= ( R41 - R40 ) by L2329 , XREAL_1:9;
L2334: D287 < ( len D285 ) by L2333 , L2307 , L2332 , XXREAL_0:2;
L2335: ( D287 + 1 ) <= ( len D285 ) by L2334 , NAT_1:13;
L2336: ( D287 + 1 ) in ( dom D285 ) by L2335 , L2331 , FINSEQ_3:25;
L2337: ( D285 . ( D287 + 1 ) ) = ( R37 . ( R40 + D287 ) ) by L2304 , L2305 , L2306 , L2334 , L187;
L2338: ( R37 . C276 ) in ( rng D285 ) by L2337 , L2336 , FUNCT_1:def 3;
thus L2339: thesis by L2338 , L2311 , L2312 , L2320 , L2326 , XXREAL_2:def 7;
end;

let C277 being (Element of ( NAT ));
assume that
L2340: R40 <= C277
and
L2341: C277 < R42;
L2342: C277 <= R41 by L2307 , L2322 , L2341 , XXREAL_0:2;
L2343: ( R37 . R42 ) <= ( R37 . C277 ) by L2342 , L2327 , L2340;
L2344: ( R40 - R40 ) <= ( C277 - R40 ) by L2340 , XREAL_1:9;
reconsider D288 = ( C277 - R40 ) as (Element of ( NAT )) by L2344 , INT_1:3;
reconsider D289 = ( D288 + 1 ) as (Element of ( NAT ));
L2345: C277 <= ( ( ( len D285 ) - 1 ) + R40 ) by L2322 , L2341 , XXREAL_0:2;
L2346: ( C277 - R40 ) <= ( ( len D285 ) - 1 ) by L2345 , XREAL_1:20;
L2347: D289 <= ( len D285 ) by L2346 , XREAL_1:19;
L2348: D288 <= ( R41 - R40 ) by L2342 , XREAL_1:9;
L2349: D288 < ( len D285 ) by L2348 , L2307 , L2309 , XXREAL_0:2;
L2350: ( ( 0 ) + 1 ) <= D289 by XREAL_1:6;
L2351: D289 in ( dom D285 ) by L2350 , L2347 , FINSEQ_3:25;
L2352: ( C277 - R40 ) < ( R42 - R40 ) by L2341 , XREAL_1:9;
L2353: D289 < ( ( R42 - R40 ) + 1 ) by L2352 , XREAL_1:6;
L2354: ( R37 . C277 ) = ( R37 . ( D288 + R40 ) )
.= ( D285 . D289 ) by L2304 , L2305 , L2306 , L2349 , L187;
L2355: ( R37 . C277 ) <> ( R37 . R42 ) by L2354 , L2311 , L2312 , L2315 , L2320 , L2353 , L2351 , FINSEQ_4:19 , FINSEQ_4:24;
thus L2356: ( R37 . R42 ) < ( R37 . C277 ) by L2355 , L2343 , XXREAL_0:1;
end;
set D290 = ( (R40 , R41) -cut R37 );
L2357: ( ( len D290 ) + R40 ) = ( R41 + 1 ) by L2304 , L2305 , L2306 , L187;
L2358: ( len D290 ) = ( ( R41 + 1 ) - R40 ) by L2357;
set D291 = ( rng D290 );
L2359: ( rng (D290 qua (Relation of ( NAT ) , ( INT ))) ) is (Subset of ( INT ));
L2360: R40 < ( R41 + 1 ) by L2305 , NAT_1:13;
L2361: ( R40 - R40 ) < ( ( R41 + 1 ) - R40 ) by L2360 , XREAL_1:9;
L2362: D290 is non  empty by L2361 , L2357;
reconsider D292 = D291 as  finite non  empty (Subset of ( INT )) by L2362 , L2359;
reconsider D293 = D292 as  finite non  empty (Subset of ( REAL )) by MEMBERED:3;
assume that
L2363: R40 <= R42
and
L2364: R42 <= R41
and
L2365: (for B112 being (Element of ( NAT )) holds ((R40 <= B112 & B112 <= R41) implies ( R37 . R42 ) <= ( R37 . B112 )))
and
L2366: (for B113 being (Element of ( NAT )) holds ((R40 <= B113 & B113 < R42) implies ( R37 . R42 ) < ( R37 . B113 )));
L2367: ( R40 - R40 ) <= ( R42 - R40 ) by L2363 , XREAL_1:9;
reconsider D294 = ( R42 - R40 ) as (Element of ( NAT )) by L2367 , INT_1:3;
L2368: ( D294 + 1 ) = ( ( R42 + 1 ) - R40 );
reconsider D295 = ( ( R42 + 1 ) - R40 ) as (Element of ( NAT )) by L2368;
L2369: ( R42 + 1 ) <= ( R41 + 1 ) by L2364 , XREAL_1:6;
L2370: D295 <= ( len D290 ) by L2369 , L2358 , XREAL_1:9;
L2371: ( ( 0 ) + 1 ) <= ( D294 + 1 ) by XREAL_1:6;
L2372: D295 in ( dom D290 ) by L2371 , L2370 , FINSEQ_3:25;
L2373: R42 = ( D294 + R40 );
L2374: D294 < ( len D290 ) by L2368 , L2370 , NAT_1:13;
L2375: ( R37 . R42 ) = ( D290 . ( ( R42 + 1 ) - R40 ) ) by L2374 , L2304 , L2305 , L2306 , L2368 , L2373 , L187;
L2376:
now
thus L2377: ( R37 . R42 ) in D292 by L2372 , L2375 , FUNCT_1:def 3;
let C278 being  ext-real number;
assume L2378: C278 in D292;
consider C279 being set such that L2379: C279 in ( dom D290 ) and L2380: ( D290 . C279 ) = C278 by L2378 , FUNCT_1:def 3;
reconsider D296 = C279 as (Element of ( NAT )) by L2379;
L2381: 1 <= D296 by L2379 , FINSEQ_3:25;
L2382: ( 1 - 1 ) <= ( D296 - 1 ) by L2381 , XREAL_1:9;
reconsider D297 = ( D296 - 1 ) as (Element of ( NAT )) by L2382 , INT_1:3;
L2383: D296 <= ( len D290 ) by L2379 , FINSEQ_3:25;
L2384: ( D296 + R40 ) <= ( ( len D290 ) + R40 ) by L2383 , XREAL_1:6;
L2385: ( ( D296 + R40 ) - 1 ) <= R41 by L2384 , L2307 , XREAL_1:20;
L2386: D297 < ( len D290 ) by L2383 , XREAL_1:146 , XXREAL_0:2;
L2387: ( R37 . ( D297 + R40 ) ) = ( D290 . ( D297 + 1 ) ) by L2386 , L2304 , L2305 , L2306 , L187
.= ( D290 . D296 );
thus L2388: ( R37 . R42 ) <= C278 by L2387 , L2365 , L2380 , L2385 , NAT_1:12;
end;
L2389: ( R37 . R42 ) = ( min D293 ) by L2376 , XXREAL_2:def 7;
set D298 = ( min D292 );
set D299 = ( D298 .. D290 );
L2390: D298 in D292 by XXREAL_2:def 7;
L2391: 1 <= D299 by L2390 , FINSEQ_4:21;
L2392: ( 1 - 1 ) <= ( D299 - 1 ) by L2391 , XREAL_1:9;
reconsider D300 = ( D299 - 1 ) as (Element of ( NAT )) by L2392 , INT_1:3;
set D301 = ( D300 + R40 );
L2393: D299 <= ( len D290 ) by L2390 , FINSEQ_4:21;
L2394: D300 < ( len D290 ) by L2393 , XREAL_1:146 , XXREAL_0:2;
L2395: D299 = ( D300 + 1 );
L2396: ( R37 . D301 ) = ( D290 . D299 ) by L2395 , L2304 , L2305 , L2306 , L2394 , L187;
L2397: R40 <= D301 by NAT_1:12;
L2398: ( D290 . ( D298 .. D290 ) ) = D298 by L2390 , FINSEQ_4:19;
L2399:
now
assume L2400: D295 <> D299;
per cases  by L2400 , XXREAL_0:1;
suppose L2401: D295 < D299;

thus L2402: contradiction by L2401 , L2372 , L2375 , L2389 , FINSEQ_4:24;
end;
suppose L2403: D295 > D299;

L2404: ( D299 + R40 ) < ( R42 + 1 ) by L2403 , XREAL_1:20;
L2405: ( ( D299 + R40 ) - 1 ) < R42 by L2404 , XREAL_1:19;
thus L2406: contradiction by L2405 , L2366 , L2398 , L2389 , L2397 , L2396;
end;
end;
L2408: ( R42 + 1 ) = ( ( D298 .. D290 ) + R40 ) by L2399;
thus L2409: thesis by L2408 , L2304 , L2305 , L2306 , L2292;
end;
theorem
L2410: (for R37 being (FinSequence of ( INT )) holds (for R40 being (Element of ( NAT )) holds ((1 <= R40 & R40 <= ( len R37 )) implies ( min_at (R37 , R40 , R40) ) = R40)))
proof
let R37 being (FinSequence of ( INT ));
let R40 being (Element of ( NAT ));
assume that
L2411: 1 <= R40
and
L2412: R40 <= ( len R37 );
L2413: (for B114 being (Element of ( NAT )) holds ((R40 <= B114 & B114 < R40) implies ( R37 . R40 ) < ( R37 . B114 )));
L2414: (for B115 being (Element of ( NAT )) holds ((R40 <= B115 & B115 <= R40) implies ( R37 . R40 ) <= ( R37 . B115 ))) by XXREAL_0:1;
thus L2415: thesis by L2414 , L2411 , L2412 , L2413 , L2303;
end;
definition
let C280 being (FinSequence of ( INT ));
let C281 , C282 being (Element of ( NAT ));
pred C280 is_non_decreasing_on C281 , C282
means
:L2416: (for B116 , B117 being (Element of ( NAT )) holds ((C281 <= B116 & B116 <= B117 & B117 <= C282) implies ( C280 . B116 ) <= ( C280 . B117 )))
;end;
definition
let C283 being (FinSequence of ( INT ));
let C284 being (Element of ( NAT ));
pred C283 is_split_at C284
means
:L2418: (for B118 , B119 being (Element of ( NAT )) holds ((1 <= B118 & B118 <= C284 & C284 < B119 & B119 <= ( len C283 )) implies ( C283 . B118 ) <= ( C283 . B119 )))
;end;
theorem
L2420: (for R37 being (FinSequence of ( INT )) holds (for R38 being (FinSequence of ( INT )) holds (for R39 being (Element of ( NAT )) holds (for R42 being (Element of ( NAT )) holds ((( R39 + 1 ) <= ( len R37 ) & R42 = ( min_at (R37 , ( R39 + 1 ) , ( len R37 )) ) & R37 is_split_at R39 & R37 is_non_decreasing_on 1 , R39 & R38 = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) +* (R42 , ( R37 . ( R39 + 1 ) )) )) implies R38 is_non_decreasing_on 1 , ( R39 + 1 ))))))
proof
let R37 being (FinSequence of ( INT ));
let R38 being (FinSequence of ( INT ));
let R39 being (Element of ( NAT ));
let R42 being (Element of ( NAT ));
assume that
L2421: ( R39 + 1 ) <= ( len R37 )
and
L2422: R42 = ( min_at (R37 , ( R39 + 1 ) , ( len R37 )) )
and
L2423: R37 is_split_at R39
and
L2424: R37 is_non_decreasing_on 1 , R39
and
L2425: R38 = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) +* (R42 , ( R37 . ( R39 + 1 ) )) );
L2426: 1 <= ( R39 + 1 ) by NAT_1:12;
set D302 = ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) );
L2427: ( dom R38 ) = ( dom D302 ) by L2425 , FUNCT_7:30;
L2428: ( dom D302 ) = ( dom R37 ) by FUNCT_7:30;
L2429: ( R39 + 1 ) in ( dom R38 ) by L2428 , L2421 , L2427 , L2426 , FINSEQ_3:25;
let C285 , C286 being (Element of ( NAT ));
assume that
L2430: 1 <= C285
and
L2431: C285 <= C286
and
L2432: C286 <= ( R39 + 1 );
L2433: C286 <= ( len R37 ) by L2421 , L2432 , XXREAL_0:2;
L2434: 1 <= C286 by L2430 , L2431 , XXREAL_0:2;
L2435: C286 in ( dom R38 ) by L2434 , L2427 , L2428 , L2433 , FINSEQ_3:25;
per cases  by L2432 , XXREAL_0:1;
suppose L2436: C286 < ( R39 + 1 );

L2437: C285 < ( R39 + 1 ) by L2436 , L2431 , XXREAL_0:2;
L2438: C285 <> R42 by L2437 , L2421 , L2422 , L2426 , L2303;
L2439: ( R38 . C285 ) = ( D302 . C285 ) by L2438 , L2425 , FUNCT_7:32
.= ( R37 . C285 ) by L2431 , L2436 , FUNCT_7:32;
L2440: C286 <> R42 by L2421 , L2422 , L2426 , L2436 , L2303;
L2441: ( R38 . C286 ) = ( D302 . C286 ) by L2440 , L2425 , FUNCT_7:32
.= ( R37 . C286 ) by L2436 , FUNCT_7:32;
L2442: C286 <= R39 by L2436 , NAT_1:13;
thus L2443: thesis by L2442 , L2424 , L2430 , L2431 , L2439 , L2441 , L2416;
end;
suppose L2444: C286 = ( R39 + 1 );

thus L2445: ( R38 . C285 ) <= ( R38 . C286 )
proof
per cases  by L2431 , XXREAL_0:1;
suppose L2446: C285 < C286;

L2447: C285 <> R42 by L2446 , L2421 , L2422 , L2426 , L2444 , L2303;
L2448: ( R38 . C285 ) = ( D302 . C285 ) by L2447 , L2425 , FUNCT_7:32
.= ( R37 . C285 ) by L2444 , L2446 , FUNCT_7:32;
L2449: C285 <= R39 by L2444 , L2446 , NAT_1:13;
L2450: R39 < C286 by L2444 , NAT_1:13;
thus L2451: ( R38 . C285 ) <= ( R38 . C286 )
proof
per cases ;
suppose L2452: ( R39 + 1 ) = R42;

L2453: ( R38 . C286 ) = ( R37 . ( R39 + 1 ) ) by L2452 , L2425 , L2427 , L2429 , L2444 , FUNCT_7:31;
thus L2454: thesis by L2453 , L2421 , L2423 , L2430 , L2444 , L2448 , L2449 , L2450 , L2418;
end;
suppose L2455: ( R39 + 1 ) <> R42;

L2456: R42 <= ( len R37 ) by L2421 , L2422 , L2426 , L2303;
L2457: ( R39 + 1 ) <= R42 by L2421 , L2422 , L2426 , L2303;
L2458: R39 < R42 by L2457 , NAT_1:13;
L2459: ( R38 . C286 ) = ( D302 . C286 ) by L2425 , L2444 , L2455 , FUNCT_7:32
.= ( R37 . R42 ) by L2427 , L2428 , L2435 , L2444 , FUNCT_7:31;
thus L2460: thesis by L2459 , L2423 , L2430 , L2448 , L2449 , L2458 , L2456 , L2418;
end;
end;

end;
suppose L2452: C285 = C286;

thus L2453: thesis by L2452;
end;
end;

end;
end;
theorem
L2447: (for R37 being (FinSequence of ( INT )) holds (for R38 being (FinSequence of ( INT )) holds (for R39 being (Element of ( NAT )) holds (for R42 being (Element of ( NAT )) holds ((( R39 + 1 ) <= ( len R37 ) & R42 = ( min_at (R37 , ( R39 + 1 ) , ( len R37 )) ) & R37 is_split_at R39 & R38 = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) +* (R42 , ( R37 . ( R39 + 1 ) )) )) implies R38 is_split_at ( R39 + 1 ))))))
proof
let R37 being (FinSequence of ( INT ));
let R38 being (FinSequence of ( INT ));
let R39 being (Element of ( NAT ));
let R42 being (Element of ( NAT ));
assume that
L2448: ( R39 + 1 ) <= ( len R37 )
and
L2449: R42 = ( min_at (R37 , ( R39 + 1 ) , ( len R37 )) )
and
L2450: R37 is_split_at R39
and
L2451: R38 = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) +* (R42 , ( R37 . ( R39 + 1 ) )) );
L2452: ( dom R38 ) = ( dom ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) ) by L2451 , FUNCT_7:30;
L2453: R39 < ( R39 + 1 ) by NAT_1:13;
L2454: 1 <= ( R39 + 1 ) by NAT_1:12;
let C287 , C288 being (Element of ( NAT ));
assume that
L2455: 1 <= C287
and
L2456: C287 <= ( R39 + 1 )
and
L2457: ( R39 + 1 ) < C288
and
L2458: C288 <= ( len R38 );
L2459: R39 < C288 by L2457 , NAT_1:13;
L2460: ( dom ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) ) = ( dom R37 ) by FUNCT_7:30;
L2461: ( len R38 ) = ( len R37 ) by L2460 , L2452 , FINSEQ_3:29;
L2462: ( R39 + 1 ) <= ( len R37 ) by L2461 , L2457 , L2458 , XXREAL_0:2;
L2463: C287 <= ( len R38 ) by L2448 , L2461 , L2456 , XXREAL_0:2;
L2464: C287 in ( dom R38 ) by L2463 , L2455 , FINSEQ_3:25;
L2465: 1 <= C288 by L2457 , NAT_1:12;
L2466: C288 in ( dom R38 ) by L2465 , L2458 , FINSEQ_3:25;
per cases  by L2456 , XXREAL_0:1;
suppose L2467: C287 < ( R39 + 1 );

L2468: C287 <> R42 by L2467 , L2448 , L2449 , L2454 , L2303;
L2469: ( R38 . C287 ) = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) . C287 ) by L2468 , L2451 , FUNCT_7:32
.= ( R37 . C287 ) by L2467 , FUNCT_7:32;
L2470: C287 <= R39 by L2467 , NAT_1:13;
thus L2471: ( R38 . C287 ) <= ( R38 . C288 )
proof
per cases ;
suppose L2472: C288 <> R42;

L2473: ( R38 . C288 ) = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) . C288 ) by L2472 , L2451 , FUNCT_7:32
.= ( R37 . C288 ) by L2457 , FUNCT_7:32;
thus L2474: thesis by L2473 , L2450 , L2461 , L2455 , L2458 , L2459 , L2470 , L2469 , L2418;
end;
suppose L2475: C288 = R42;

L2476: ( R38 . C288 ) = ( R37 . ( R39 + 1 ) ) by L2475 , L2451 , L2452 , L2466 , FUNCT_7:31;
thus L2477: thesis by L2476 , L2450 , L2453 , L2455 , L2462 , L2470 , L2469 , L2418;
end;
end;

end;
suppose L2472: C287 = ( R39 + 1 );

L2473: ( R38 . C287 ) = ( R37 . R42 )
proof
per cases ;
suppose L2474: ( R39 + 1 ) = R42;

thus L2475: thesis by L2474 , L2451 , L2452 , L2464 , L2472 , FUNCT_7:31;
end;
suppose L2476: ( R39 + 1 ) <> R42;

thus L2477: ( R38 . C287 ) = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) . C287 ) by L2476 , L2451 , L2472 , FUNCT_7:32
.= ( R37 . R42 ) by L2452 , L2460 , L2464 , L2472 , FUNCT_7:31;
end;
end;
thus L2479: thesis
proof
per cases ;
suppose L2480: C288 = R42;

L2481: ( R38 . C288 ) = ( R37 . ( R39 + 1 ) ) by L2480 , L2451 , L2452 , L2466 , FUNCT_7:31;
thus L2482: thesis by L2481 , L2448 , L2449 , L2454 , L2473 , L2303;
end;
suppose L2483: C288 <> R42;

L2484: ( R38 . C288 ) = ( ( R37 +* (( R39 + 1 ) , ( R37 . R42 )) ) . C288 ) by L2483 , L2451 , FUNCT_7:32
.= ( R37 . C288 ) by L2457 , FUNCT_7:32;
thus L2485: thesis by L2484 , L2448 , L2449 , L2461 , L2454 , L2457 , L2458 , L2473 , L2303;
end;
end;

end;
end;
theorem
L2481: (for B120 being (FinSequence of ( INT )) holds (for B121 , B122 being (Element of ( NAT )) holds (B121 >= B122 implies B120 is_non_decreasing_on B121 , B122)))
proof
let C289 being (FinSequence of ( INT ));
let C290 , C291 being (Element of ( NAT ));
assume L2482: C290 >= C291;
let C292 , C293 being (Element of ( NAT ));
assume that
L2483: (C290 <= C292 & C292 <= C293)
and
L2484: C293 <= C291;
L2485: C290 <= C293 by L2483 , XXREAL_0:2;
per cases  by L2482 , XXREAL_0:1;
suppose L2486: C290 = C291;

L2487: C293 = C290 by L2486 , L2484 , L2485 , XXREAL_0:1;
thus L2488: ( C289 . C292 ) <= ( C289 . C293 ) by L2487 , L2483 , XXREAL_0:1;
end;
suppose L2489: C290 > C291;

thus L2490: thesis by L2489 , L2484 , L2485 , XXREAL_0:2;
end;
end;
