:: Processes in {P}etri nets
::  by Grzegorz Bancerek , Mitsuru Aoki , Akio Matsumoto and Yasunari Shidama
::
:: Received December 20, 2002
:: Copyright (c) 2002-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, XXREAL_0, CARD_1, FINSEQ_1, RELAT_1, TARSKI,
      XBOOLE_0, NAT_1, ARYTM_3, FUNCT_1, FINSET_1, FUNCOP_1, ARYTM_1, PETRI,
      NET_1, MCART_1, FUNCT_2, FUNCT_7, PARTFUN1, ORDINAL4, VALUED_1, INT_1,
      PNPROC_1;
 notations TARSKI, XBOOLE_0, DOMAIN_1,
      XTUPLE_0, RELAT_1, FUNCT_1, SUBSET_1, FINSET_1,
      PARTFUN1, CARD_1, FINSEQ_1, FUNCT_2, FUNCOP_1, NUMBERS, ORDINAL1,
      XCMPLX_0, NAT_1, NAT_D, MCART_1, FINSEQ_2, FUNCT_7, INT_1, XXREAL_0,
      PRE_POLY, VALUED_1;
 constructors WELLORD2, DOMAIN_1, REAL_1, FUNCT_7, NAT_D, RELSET_1, PRE_POLY,
      XTUPLE_0;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, ORDINAL1, XREAL_0, INT_1, FINSEQ_1,
      FUNCT_7, GRAPH_2, FINSET_1, VALUED_0, VALUED_1, FUNCT_2, MEMBERED,
      CARD_1, XTUPLE_0;
 requirements BOOLE, SUBSET, REAL, NUMERALS, ARITHM;
 definitions TARSKI, XBOOLE_0, FUNCOP_1, RELAT_1, XTUPLE_0;
 theorems TARSKI, NAT_1, FUNCT_1, FUNCT_2, RELSET_1, FUNCOP_1, XBOOLE_1,
      CARD_1, RELAT_1, MCART_1, INT_1, FINSEQ_1, FUNCT_7, XBOOLE_0, TREES_2,
      FINSEQ_3, ENUMSET1, ZFMISC_1, GRFUNC_1, PRE_CIRC, CARD_2, FINSEQ_2,
      FINSET_1, GRAPH_2, WELLORD2, FINSEQ_6, XREAL_1, XXREAL_0, ORDINAL1,
      PARTFUN1, VALUED_1, XTUPLE_0;
 schemes NAT_1, FUNCT_1, FINSEQ_1, CLASSES1;

begin
theorem
L1: (for R1 being (Element of ( NAT )) holds (for R5 being set holds (R1 > ( 0 ) implies { [ R1 , R5 ] } is FinSubsequence)))
proof
let R1 being (Element of ( NAT ));
let R5 being set;
assume L2: R1 > ( 0 );
L3: ( dom { [ R1 , R5 ] } ) = { R1 } by RELAT_1:9;
L4: { R1 } c= ( Seg R1 )
proof
let R5 being set;
assume L5: R5 in { R1 };
L6: R5 = R1 by L5 , TARSKI:def 1;
thus L7: thesis by L6 , L2 , FINSEQ_1:3;
end;
thus L8: thesis by L4 , L3 , FINSEQ_1:def 12;
end;
L9: (for B1 being FinSubsequence holds (( Seq B1 ) = ( {} ) implies B1 = ( {} )))
proof
let C1 being FinSubsequence;
assume that
L10: ( Seq C1 ) = ( {} );
L11: ( Seq C1 ) = ( C1 * ( Sgm ( dom C1 ) ) ) by FINSEQ_1:def 14;
L12: ( rng ( Sgm ( dom C1 ) ) ) = ( dom C1 ) by FINSEQ_1:50;
L13: ( dom ( {} ) ) = ( dom ( Sgm ( dom C1 ) ) ) by L12 , L10 , L11 , RELAT_1:27;
L14: ( Sgm ( dom C1 ) ) = ( {} ) by L13;
L15: ( dom C1 ) = ( rng ( {} ) ) by L14 , FINSEQ_1:50;
thus L16: thesis by L15;
end;
theorem
L17: (for B2 being FinSubsequence holds (B2 = ( {} ) iff ( Seq B2 ) = ( {} )))
proof
let C2 being FinSubsequence;
thus L18: (C2 = ( {} ) implies ( Seq C2 ) = ( {} ))
proof
assume L19: C2 = ( {} );
L20: ( Seq C2 ) = ( C2 * ( Sgm ( dom C2 ) ) ) by FINSEQ_1:def 14;
thus L21: ( Seq C2 ) = ( C2 * ( {} ) ) by L20 , L19
.= ( {} );
end;

thus L22: thesis by L9;
end;
theorem
L23: (for R1 being (Element of ( NAT )) holds (for R5 being set holds (for B3 being FinSubsequence holds (B3 = { [ R1 , R5 ] } implies ( Seq B3 ) = <* R5 *>))))
proof
let R1 being (Element of ( NAT ));
let R5 being set;
let C3 being FinSubsequence;
assume L24: C3 = { [ R1 , R5 ] };
L25: [ R1 , R5 ] in C3 by L24 , TARSKI:def 1;
L26: R1 in ( dom C3 ) by L25 , XTUPLE_0:def 12;
L27: (ex B4 being Nat st ( dom C3 ) c= ( Seg B4 )) by FINSEQ_1:def 12;
L28: R1 >= ( (( 0 ) qua Nat) + 1 ) by L27 , L26 , FINSEQ_1:1;
L29: R1 > ( 0 ) by L28 , NAT_1:13;
reconsider D1 = { [ R1 , R5 ] } as FinSubsequence by L29 , L1;
L30: ( Seq C3 ) = ( C3 * ( Sgm ( dom C3 ) ) ) by FINSEQ_1:def 14;
L31: ( dom D1 ) = { R1 } by RELAT_1:9;
L32: ( Seq D1 ) = ( { [ R1 , R5 ] } * <* R1 *> ) by L31 , L24 , L29 , L30 , FINSEQ_3:44
.= <* ( { [ R1 , R5 ] } . R1 ) *> by L24 , L26 , FINSEQ_2:34
.= <* R5 *> by GRFUNC_1:6;
thus L33: thesis by L32 , L24;
end;
registration
cluster  ->  finite for FinSubsequence;
coherence
proof
let C4 being FinSubsequence;
L34: (ex B5 being Nat st ( dom C4 ) c= ( Seg B5 )) by FINSEQ_1:def 12;
thus L35: thesis by L34 , FINSET_1:10;
end;
end;
theorem
L37: (for R5 being set holds (for B6 being FinSubsequence holds (( Seq B6 ) = <* R5 *> implies (ex R1 being (Element of ( NAT )) st B6 = { [ R1 , R5 ] }))))
proof
let R5 being set;
let C5 being FinSubsequence;
assume L38: ( Seq C5 ) = <* R5 *>;
L39: ( Seq C5 ) = { [ 1 , R5 ] } by L38 , FINSEQ_1:def 5;
L40: ( dom ( Seq C5 ) ) = { 1 } by L39 , RELAT_1:9;
L41: ( rng ( Seq C5 ) ) = { R5 } by L39 , RELAT_1:9;
L42: ( Seq C5 ) = ( C5 * ( Sgm ( dom C5 ) ) ) by FINSEQ_1:def 14;
L43: ( rng ( Sgm ( dom C5 ) ) ) = ( dom C5 ) by FINSEQ_1:50;
L44: { 1 } = ( dom ( Sgm ( dom C5 ) ) ) by L43 , L40 , L42 , RELAT_1:27;
L45: ( rng ( Seq C5 ) ) = ( rng C5 ) by L42 , L43 , RELAT_1:28;
consider C6 being Nat such that L46: ( dom C5 ) c= ( Seg C6 ) by FINSEQ_1:def 12;
L47: ( Seg ( card ( dom C5 ) ) ) = { 1 } by L44 , L46 , FINSEQ_3:40;
L48: ( card ( dom C5 ) ) = ( card { 1 } ) by L47 , FINSEQ_1:57;
consider C7 being set such that L49: ( dom C5 ) = { C7 } by L48 , CARD_1:29;
L50: C7 in ( dom C5 ) by L49 , TARSKI:def 1;
L51: C7 in ( Seg C6 ) by L50 , L46;
reconsider D2 = C7 as (Element of ( NAT )) by L51;
L52: C5 = { [ D2 , R5 ] } by L41 , L45 , L49 , PRE_CIRC:1;
thus L53: thesis by L52;
end;
theorem
L54: (for R6 being set holds (for R7 being set holds (for R8 being set holds (for R9 being set holds ({ [ R6 , R8 ] , [ R7 , R9 ] } is FinSequence implies ((R6 = 1 & R7 = 1 & R8 = R9) or (R6 = 1 & R7 = 2) or (R6 = 2 & R7 = 1)))))))
proof
let R6 being set;
let R7 being set;
let R8 being set;
let R9 being set;
assume L55: { [ R6 , R8 ] , [ R7 , R9 ] } is FinSequence;
reconsider D3 = { [ R6 , R8 ] , [ R7 , R9 ] } as FinSequence by L55;
L56: ( dom D3 ) = { R6 , R7 } by RELAT_1:10;
L57: R6 in ( dom D3 ) by L56 , TARSKI:def 2;
L58: R7 in ( dom D3 ) by L56 , TARSKI:def 2;
L59: [ R6 , R8 ] in D3 by TARSKI:def 2;
L60: [ R7 , R9 ] in D3 by TARSKI:def 2;
L61: ( D3 . R6 ) = R8 by L59 , FUNCT_1:1;
L62: ( D3 . R7 ) = R9 by L60 , FUNCT_1:1;
L63: ( dom D3 ) = ( Seg ( len D3 ) ) by FINSEQ_1:def 3;
L64: ( len D3 ) <= ( 1 + 1 ) by CARD_2:50;
L65: ( len D3 ) > ( 0 ) by NAT_1:3;
L66: ( len D3 ) >= ( (( 0 ) qua Nat) + 1 ) by L65 , NAT_1:13;
L67:
now
assume L68: ( len D3 ) = 1;
thus L69: (R6 = 1 & R7 = 1) by L68 , L57 , L58 , L63 , FINSEQ_1:2 , TARSKI:def 1;
thus L70: R8 = R9 by L69 , L60 , L61 , FUNCT_1:1;
end;
L71:
now
assume L72: ( len D3 ) = 2;
L73: (R6 = R7 implies D3 = { [ R6 , R8 ] }) by L61 , L62 , ENUMSET1:29;
L74: ((R6 = 1 & R7 = 2) or (R6 = 2 & R7 = 1) or (R6 = 1 & R7 = 1) or (R6 = 2 & R7 = 2)) by L57 , L58 , L63 , L72 , FINSEQ_1:2 , TARSKI:def 2;
thus L75: ((R6 = 1 & R7 = 2) or (R6 = 2 & R7 = 1)) by L74 , L72 , L73 , CARD_1:30;
end;
thus L76: thesis by L71 , L64 , L66 , L67 , NAT_1:9;
end;
theorem
L77: (for R6 being set holds (for R7 being set holds <* R6 , R7 *> = { [ 1 , R6 ] , [ 2 , R7 ] }))
proof
let R6 being set;
let R7 being set;
reconsider D4 = { [ 1 , R6 ] , [ 2 , R7 ] } as Function by GRFUNC_1:8;
L78: ( dom D4 ) = { 1 , 2 } by RELAT_1:10;
L79: ( dom <* R6 , R7 *> ) = ( dom D4 ) by L78 , FINSEQ_1:2 , FINSEQ_1:89;
L80:
now
let R5 being set;
assume L81: R5 in { 1 , 2 };
per cases  by L81 , TARSKI:def 2;
suppose L82: R5 = 1;

L83: ( <* R6 , R7 *> . R5 ) = R6 by L82 , FINSEQ_1:44;
L84: [ R5 , R6 ] in D4 by L82 , TARSKI:def 2;
thus L85: ( D4 . R5 ) = ( <* R6 , R7 *> . R5 ) by L84 , L83 , FUNCT_1:1;
end;
suppose L86: R5 = 2;

L87: ( <* R6 , R7 *> . R5 ) = R7 by L86 , FINSEQ_1:44;
L88: [ R5 , R7 ] in D4 by L86 , TARSKI:def 2;
thus L89: ( D4 . R5 ) = ( <* R6 , R7 *> . R5 ) by L88 , L87 , FUNCT_1:1;
end;
end;
thus L91: thesis by L80 , L78 , L79 , FUNCT_1:2;
end;
L92: (for R2 being (Element of ( NAT )) holds (for R3 being (Element of ( NAT )) holds (for R4 being (Element of ( NAT )) holds (((1 <= R2 & R2 <= R4) or (( R4 + 1 ) <= R2 & R2 <= ( R4 + R3 ))) implies (1 <= R2 & R2 <= ( R4 + R3 ))))))
proof
let R2 being (Element of ( NAT ));
let R3 being (Element of ( NAT ));
let R4 being (Element of ( NAT ));
assume that
L93: ((1 <= R2 & R2 <= R4) or (( R4 + 1 ) <= R2 & R2 <= ( R4 + R3 )));
per cases  by L93;
suppose L94: (1 <= R2 & R2 <= R4);

L95: ( 0 ) <= R3 by NAT_1:2;
L96: ( R4 + (( 0 ) qua Nat) ) <= ( R4 + R3 ) by L95 , XREAL_1:7;
thus L97: thesis by L96 , L94 , XXREAL_0:2;
end;
suppose L98: (( R4 + 1 ) <= R2 & R2 <= ( R4 + R3 ));

L99: ( 0 ) <= R4 by NAT_1:2;
L100: ( (( 0 ) qua Nat) + 1 ) <= ( R4 + 1 ) by L99 , XREAL_1:7;
thus L101: thesis by L100 , L98 , XXREAL_0:2;
end;
end;
theorem
L103: (for B7 being FinSubsequence holds ( card B7 ) = ( len ( Seq B7 ) ))
proof
let C8 being FinSubsequence;
L104: (ex B8 being Nat st ( dom C8 ) c= ( Seg B8 )) by FINSEQ_1:def 12;
L105: ( Seq C8 ) = ( C8 * ( Sgm ( dom C8 ) ) ) by FINSEQ_1:def 14;
L106: ( rng ( Sgm ( dom C8 ) ) ) = ( dom C8 ) by FINSEQ_1:50;
L107: ( dom ( Seq C8 ) ) = ( dom ( Sgm ( dom C8 ) ) ) by L106 , L105 , RELAT_1:27;
L108: ( Sgm ( dom C8 ) ) is  one-to-one by L104 , FINSEQ_3:92;
L109: ( rng ( Sgm ( dom C8 ) ) ) , ( dom ( Sgm ( dom C8 ) ) ) are_equipotent  by L108 , WELLORD2:def 4;
L110: ( card ( dom C8 ) ) = ( card ( dom ( Sgm ( dom C8 ) ) ) ) by L109 , L106 , CARD_1:5;
L111: ( card ( dom C8 ) ) = ( card C8 ) by CARD_1:62;
thus L112: thesis by L111 , L107 , L110 , CARD_1:62;
end;
L113: (for B9 , B10 being set holds ((for R5 being set holds (R5 in B9 implies (not R5 in B10))) iff B9 misses B10))
proof
let C9 , C10 being set;
thus L114: ((for R5 being set holds (R5 in C9 implies (not R5 in C10))) implies C9 misses C10)
proof
assume L115: (for R5 being set holds (R5 in C9 implies (not R5 in C10)));
L116:
now
given R6 being set such that
L117: R6 in ( C9 /\ C10 );

L118: R6 in C9 by L117 , XBOOLE_0:def 4;
L119: R6 in C10 by L117 , XBOOLE_0:def 4;
thus L120: contradiction by L119 , L115 , L118;
end;
L121: ( C9 /\ C10 ) = ( {} ) by L116 , XBOOLE_0:def 1;
thus L122: thesis by L121 , XBOOLE_0:def 7;
end;

assume L123: C9 misses C10;
L124:
now
let R5 being set;
assume L125: R5 in C9;
L126:
now
assume L127: R5 in C10;
L128: R5 in ( C9 /\ C10 ) by L127 , L125 , XBOOLE_0:def 4;
thus L129: contradiction by L128 , L123 , XBOOLE_0:def 7;
end;
thus L130: (not R5 in C10) by L126;
end;
thus L131: thesis by L124;
end;
L132: (for B11 , B12 being Relation holds (( dom B11 ) misses ( dom B12 ) implies B11 misses B12)) by RELAT_1:179;
theorem
L133: (for B13 , B14 being set holds (for B15 , B16 being Relation holds (B13 misses B14 implies ( B15 | B13 ) misses ( B16 | B14 ))))
proof
let C11 , C12 being set;
let C13 , C14 being Relation;
assume L134: C11 misses C12;
L135: ( C11 /\ C12 ) = ( {} ) by L134 , XBOOLE_0:def 7;
L136: ( dom ( C13 | C11 ) ) = ( ( dom C13 ) /\ C11 ) by RELAT_1:61;
L137: ( dom ( C14 | C12 ) ) = ( ( dom C14 ) /\ C12 ) by RELAT_1:61;
L138: ( ( dom ( C13 | C11 ) ) /\ ( dom ( C14 | C12 ) ) ) = ( ( dom C13 ) /\ ( C11 /\ ( ( dom C14 ) /\ C12 ) ) ) by L137 , L136 , XBOOLE_1:16
.= ( ( dom C13 ) /\ ( ( C11 /\ C12 ) /\ ( dom C14 ) ) ) by XBOOLE_1:16
.= ( {} ) by L135;
L139: ( dom ( C13 | C11 ) ) misses ( dom ( C14 | C12 ) ) by L138 , XBOOLE_0:def 7;
thus L140: thesis by L139 , L132;
end;
L141: (for B17 being FinSubsequence holds ( dom ( Seq B17 ) ) = ( dom ( Sgm ( dom B17 ) ) ))
proof
let C15 being FinSubsequence;
L142: ( Seq C15 ) = ( C15 * ( Sgm ( dom C15 ) ) ) by FINSEQ_1:def 14;
L143: ( rng ( Sgm ( dom C15 ) ) ) = ( dom C15 ) by FINSEQ_1:50;
thus L144: thesis by L143 , L142 , RELAT_1:27;
end;
L145: (for B18 being FinSubsequence holds ( rng B18 ) = ( rng ( Seq B18 ) ))
proof
let C16 being FinSubsequence;
L146: ( rng ( Seq C16 ) ) = ( rng ( C16 * ( Sgm ( dom C16 ) ) ) ) by FINSEQ_1:def 14;
L147: ( dom C16 ) = ( rng ( Sgm ( dom C16 ) ) ) by FINSEQ_1:50;
thus L148: thesis by L147 , L146 , RELAT_1:28;
end;
theorem
L149: (for B19 , B20 , B21 being Function holds ((B19 c= B21 & B20 c= B21 & B19 misses B20) implies ( dom B19 ) misses ( dom B20 )))
proof
let C17 , C18 , C19 being Function;
assume that
L150: C17 c= C19
and
L151: C18 c= C19
and
L152: C17 misses C18;
L153: (for R5 being set holds (R5 in ( dom C17 ) implies (not R5 in ( dom C18 ))))
proof
let R5 being set;
assume L154: R5 in ( dom C17 );
L155: [ R5 , ( C17 . R5 ) ] in C17 by L154 , FUNCT_1:def 2;
L156:
now
assume L157: R5 in ( dom C18 );
L158: [ R5 , ( C18 . R5 ) ] in C18 by L157 , FUNCT_1:def 2;
L159: ( C17 . R5 ) = ( C18 . R5 ) by L158 , L150 , L151 , L155 , FUNCT_1:def 1;
thus L160: contradiction by L159 , L152 , L155 , L158 , L113;
end;
thus L161: thesis by L156;
end;
thus L162: thesis by L153 , L113;
end;
theorem
L163: (for B22 being set holds (for B23 being Relation holds ( B22 |` B23 ) c= ( B23 | ( B23 " B22 ) )))
proof
let C20 being set;
let C21 being Relation;
let C22 , C23 being set;
assume L164: [ C22 , C23 ] in ( C20 |` C21 );
L165: C23 in C20 by L164 , RELAT_1:def 12;
L166: [ C22 , C23 ] in C21 by L164 , RELAT_1:def 12;
L167: C22 in ( C21 " C20 ) by L166 , L165 , RELAT_1:def 14;
thus L168: thesis by L167 , L166 , RELAT_1:def 11;
end;
theorem
L169: (for B24 being set holds (for B25 being Function holds ( B24 |` B25 ) = ( B25 | ( B25 " B24 ) )))
proof
let C24 being set;
let C25 being Function;
let C26 , C27 being set;
thus L170: ([ C26 , C27 ] in ( C24 |` C25 ) implies [ C26 , C27 ] in ( C25 | ( C25 " C24 ) ))
proof
assume L171: [ C26 , C27 ] in ( C24 |` C25 );
L172: C27 in C24 by L171 , RELAT_1:def 12;
L173: [ C26 , C27 ] in C25 by L171 , RELAT_1:def 12;
L174: C26 in ( dom C25 ) by L173 , FUNCT_1:1;
L175: ( C25 . C26 ) in C24 by L172 , L173 , FUNCT_1:1;
L176: C26 in ( C25 " C24 ) by L175 , L174 , FUNCT_1:def 7;
thus L177: thesis by L176 , L173 , RELAT_1:def 11;
end;

assume L178: [ C26 , C27 ] in ( C25 | ( C25 " C24 ) );
L179: C26 in ( C25 " C24 ) by L178 , RELAT_1:def 11;
L180: [ C26 , C27 ] in C25 by L178 , RELAT_1:def 11;
L181: ( C25 . C26 ) in C24 by L179 , FUNCT_1:def 7;
L182: C27 in C24 by L181 , L180 , FUNCT_1:1;
thus L183: thesis by L182 , L180 , RELAT_1:def 12;
end;
begin
definition
let C28 being set;
mode marking of C28
 is (Function of C28 , ( NAT ));
end;
notation
let C29 being set;
let C30 being (marking of C29);
let C31 being set;
synonym C30 multitude_of C31 for C30 . C31;
end;
scheme MarkingLambda { F1() -> set , F2(set) -> (Element of ( NAT )) } : (ex B26 being (Function of F1() , ( NAT )) st (for R11 being set holds (R11 in F1() implies ( B26 . R11 ) = F2(R11))))
proof
consider C32 being Function such that L186: ( dom C32 ) = F1() and L187: (for R11 being set holds (R11 in F1() implies ( C32 . R11 ) = F2(R11))) from FUNCT_1:sch 3;
L188: ( rng C32 ) c= ( NAT )
proof
let R13 being set;
assume L189: R13 in ( rng C32 );
consider R12 being set such that L190: R12 in ( dom C32 ) and L191: R13 = ( C32 . R12 ) by L189 , FUNCT_1:def 3;
L192: R13 = F2(R12) by L186 , L187 , L190 , L191;
thus L193: thesis by L192;
end;
reconsider D5 = C32 as (marking of F1()) by L188 , L186 , FUNCT_2:67 , RELSET_1:4;
take D5;
thus L194: thesis by L187;
end;
definition
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
redefine pred R16 = R17
means
(for R11 being set holds (R11 in R10 implies ( R16 multitude_of R11 ) = ( R17 multitude_of R11 )))
;compatibility
proof
thus L195: (R16 = R17 implies (for R11 being set holds (R11 in R10 implies ( R16 multitude_of R11 ) = ( R17 multitude_of R11 ))));
L196: ( dom R16 ) = R10 by FUNCT_2:def 1;
L197: ( dom R17 ) = R10 by FUNCT_2:def 1;
thus L198: ((for R11 being set holds (R11 in R10 implies ( R16 multitude_of R11 ) = ( R17 multitude_of R11 ))) implies R16 = R17) by L197 , L196 , FUNCT_1:2;
end;
end;
definition
let R10 being set;
func {$} R10 -> (marking of R10) equals 
( R10 --> ( 0 ) );
coherence;
end;
definition
let C33 being set;
let C34 , C35 being (marking of C33);
pred C34 c= C35
means
:L201: (for B27 being set holds (B27 in C33 implies ( C34 multitude_of B27 ) <= ( C35 multitude_of B27 )))
;reflexivity
;
end;
L203: (for R10 being set holds (for R11 being set holds (R11 in R10 implies ( ( {$} R10 ) . R11 ) = ( 0 )))) by FUNCOP_1:7;
theorem
L204: (for R10 being set holds (for R20 being (marking of R10) holds ( {$} R10 ) c= R20))
proof
let R10 being set;
let R20 being (marking of R10);
let R11 being set;
assume L205: R11 in R10;
L206: ( ( {$} R10 ) . R11 ) = ( 0 ) by L205 , L203;
thus L207: thesis by L206 , NAT_1:2;
end;
theorem
L208: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds ((R16 c= R17 & R17 c= R18) implies R16 c= R18)))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
assume that
L209: R16 c= R17
and
L210: R17 c= R18;
let R11 being set;
assume L211: R11 in R10;
L212: ( R16 . R11 ) <= ( R17 . R11 ) by L211 , L209 , L201;
L213: ( R17 . R11 ) <= ( R18 . R11 ) by L210 , L211 , L201;
thus L214: thesis by L213 , L212 , XXREAL_0:2;
end;
definition
let C36 being set;
let C37 , C38 being (marking of C36);
redefine func C37 + C38 -> (marking of C36) means 
:L215: (for B28 being set holds (B28 in C36 implies ( it multitude_of B28 ) = ( ( C37 multitude_of B28 ) + ( C38 multitude_of B28 ) )));
coherence
proof
L216: ( dom ( C37 + C38 ) ) = C36 by FUNCT_2:def 1;
thus L217: thesis by L216;
end;
compatibility
proof
let C39 being (marking of C36);
thus L218: (C39 = ( C37 + C38 ) implies (for B29 being set holds (B29 in C36 implies ( C39 multitude_of B29 ) = ( ( C37 multitude_of B29 ) + ( C38 multitude_of B29 ) )))) by VALUED_1:1;
assume L219: (for B30 being set holds (B30 in C36 implies ( C39 multitude_of B30 ) = ( ( C37 multitude_of B30 ) + ( C38 multitude_of B30 ) )));
L220: ( dom C39 ) = C36 by FUNCT_2:def 1;
L221: ( dom ( C37 + C38 ) ) = ( ( dom C37 ) /\ ( dom C38 ) ) by VALUED_1:def 1
.= ( C36 /\ ( dom C38 ) ) by FUNCT_2:def 1
.= ( C36 /\ C36 ) by FUNCT_2:def 1;
L222:
now
let C40 being set;
assume L223: C40 in ( dom C39 );
thus L224: ( C39 . C40 ) = ( ( C37 . C40 ) + ( C38 . C40 ) ) by L223 , L219 , L220
.= ( ( C37 + C38 ) . C40 ) by L220 , L221 , L223 , VALUED_1:def 1;
end;
thus L225: thesis by L222 , L220 , L221 , FUNCT_1:2;
end;
end;
theorem
L227: (for R10 being set holds (for R20 being (marking of R10) holds ( R20 + ( {$} R10 ) ) = R20))
proof
let R10 being set;
let R20 being (marking of R10);
L228:
now
let R11 being set;
assume L229: R11 in R10;
L230: ( ( {$} R10 ) . R11 ) = ( 0 ) by L229 , L203;
thus L231: ( R20 . R11 ) = ( ( R20 . R11 ) + ( ( {$} R10 ) . R11 ) ) by L230;
end;
thus L232: thesis by L228 , L215;
end;
definition
let C41 being set;
let C42 , C43 being (marking of C41);
assume that
L233: C43 c= C42;
func C42 - C43 -> (marking of C41) means 
:L234: (for B31 being set holds (B31 in C41 implies ( it multitude_of B31 ) = ( ( C42 multitude_of B31 ) - ( C43 multitude_of B31 ) )));
existence
proof
deffunc H1(set) = ( ( C42 multitude_of $1 ) -' ( C43 multitude_of $1 ) );
consider C44 being (marking of C41) such that L235: (for R11 being set holds (R11 in C41 implies ( C44 multitude_of R11 ) = H1(R11))) from MarkingLambda;
take C44;
let R11 being set;
assume L236: R11 in C41;
L237: ( C42 multitude_of R11 ) >= ( C43 multitude_of R11 ) by L236 , L233 , L201;
thus L238: ( C44 multitude_of R11 ) = ( ( C42 multitude_of R11 ) -' ( C43 multitude_of R11 ) ) by L235 , L236
.= ( ( C42 multitude_of R11 ) - ( C43 multitude_of R11 ) ) by L237 , XREAL_1:233;
end;
uniqueness
proof
let C45 , C46 being (marking of C41);
assume that
L239: (for B32 being set holds (B32 in C41 implies ( C45 multitude_of B32 ) = ( ( C42 multitude_of B32 ) - ( C43 multitude_of B32 ) )))
and
L240: (for R11 being set holds (R11 in C41 implies ( C46 multitude_of R11 ) = ( ( C42 multitude_of R11 ) - ( C43 multitude_of R11 ) )));
let R11 being set;
assume L241: R11 in C41;
thus L242: ( C45 multitude_of R11 ) = ( ( C42 multitude_of R11 ) - ( C43 multitude_of R11 ) ) by L241 , L239
.= ( C46 multitude_of R11 ) by L240 , L241;
end;
end;
theorem
L244: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds R16 c= ( R16 + R17 ))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R11 being set;
assume L245: R11 in R10;
L246: ( ( R16 + R17 ) multitude_of R11 ) = ( ( R16 multitude_of R11 ) + ( R17 multitude_of R11 ) ) by L245 , L215;
thus L247: thesis by L246 , NAT_1:11;
end;
theorem
L248: (for R10 being set holds (for R20 being (marking of R10) holds ( R20 - ( {$} R10 ) ) = R20))
proof
let R10 being set;
let R20 being (marking of R10);
L249:
now
let R11 being set;
assume L250: R11 in R10;
L251: ( ( {$} R10 ) . R11 ) = ( 0 ) by L250 , L203;
thus L252: ( R20 . R11 ) = ( ( R20 . R11 ) - ( ( {$} R10 ) . R11 ) ) by L251;
end;
L253: ( {$} R10 ) c= R20 by L204;
thus L254: thesis by L253 , L249 , L234;
end;
theorem
L255: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds ((R16 c= R17 & R17 c= R18) implies ( R18 - R17 ) c= ( R18 - R16 ))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
assume that
L256: R16 c= R17
and
L257: R17 c= R18;
L258: R16 c= R18 by L256 , L257 , L208;
let R11 being set;
assume L259: R11 in R10;
L260: ( R16 . R11 ) <= ( R17 . R11 ) by L259 , L256 , L201;
L261: ( ( R18 - R16 ) . R11 ) = ( ( R18 . R11 ) - ( R16 . R11 ) ) by L258 , L259 , L234;
L262: ( ( R18 - R17 ) . R11 ) = ( ( R18 . R11 ) - ( R17 . R11 ) ) by L257 , L259 , L234;
thus L263: thesis by L262 , L260 , L261 , XREAL_1:10;
end;
theorem
L264: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds ( ( R16 + R17 ) - R17 ) = R16)))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R11 being set;
assume L265: R11 in R10;
L266: R17 c= ( R16 + R17 ) by L244;
thus L267: ( ( ( R16 + R17 ) - R17 ) . R11 ) = ( ( ( R16 + R17 ) . R11 ) - ( R17 . R11 ) ) by L266 , L265 , L234
.= ( ( ( R16 . R11 ) + ( R17 . R11 ) ) - ( R17 . R11 ) ) by L265 , L215
.= ( R16 . R11 );
end;
theorem
L268: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R20 being (marking of R10) holds ((R20 c= R16 & R16 c= R17) implies ( R16 - R20 ) c= ( R17 - R20 ))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R20 being (marking of R10);
assume L269: R20 c= R16;
assume L270: R16 c= R17;
let R11 being set;
assume L271: R11 in R10;
L272: R20 c= R17 by L269 , L270 , L208;
L273: ( R16 . R11 ) <= ( R17 . R11 ) by L270 , L271 , L201;
L274: ( ( R16 . R11 ) - ( R20 . R11 ) ) <= ( ( R17 . R11 ) - ( R20 . R11 ) ) by L273 , XREAL_1:9;
L275: ( ( R16 - R20 ) . R11 ) <= ( ( R17 . R11 ) - ( R20 . R11 ) ) by L274 , L269 , L271 , L234;
thus L276: thesis by L275 , L271 , L272 , L234;
end;
theorem
L277: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds (R16 c= R17 implies ( ( R17 + R18 ) - R16 ) = ( ( R17 - R16 ) + R18 ))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
assume L278: R16 c= R17;
let R11 being set;
assume L279: R11 in R10;
L280: R17 c= ( R17 + R18 ) by L244;
L281: R16 c= ( R17 + R18 ) by L280 , L278 , L208;
L282: ( ( ( R17 - R16 ) + R18 ) . R11 ) = ( ( ( R17 - R16 ) . R11 ) + ( R18 . R11 ) ) by L279 , L215
.= ( ( R18 . R11 ) + ( ( R17 . R11 ) - ( R16 . R11 ) ) ) by L278 , L279 , L234
.= ( ( ( R18 . R11 ) + ( R17 . R11 ) ) - ( R16 . R11 ) )
.= ( ( ( R18 + R17 ) . R11 ) - ( R16 . R11 ) ) by L279 , L215
.= ( ( ( R17 + R18 ) - R16 ) . R11 ) by L279 , L281 , L234;
thus L283: thesis by L282;
end;
theorem
L284: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds ((R16 c= R17 & R17 c= R16) implies R16 = R17))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
assume L285: R16 c= R17;
assume L286: R17 c= R16;
let R11 being set;
assume L287: R11 in R10;
L288: ( R16 . R11 ) <= ( R17 . R11 ) by L287 , L285 , L201;
L289: ( R17 . R11 ) <= ( R16 . R11 ) by L286 , L287 , L201;
thus L290: thesis by L289 , L288 , XXREAL_0:1;
end;
theorem
L291: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds ( ( R16 + R17 ) + R18 ) = ( R16 + ( R17 + R18 ) )))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
let R11 being set;
assume L292: R11 in R10;
L293: ( ( ( R16 + R17 ) + R18 ) . R11 ) = ( ( ( R16 + R17 ) . R11 ) + ( R18 . R11 ) ) by L292 , L215
.= ( ( ( R16 . R11 ) + ( R17 . R11 ) ) + ( R18 . R11 ) ) by L292 , L215;
L294: ( ( R16 + ( R17 + R18 ) ) . R11 ) = ( ( R16 . R11 ) + ( ( R17 + R18 ) . R11 ) ) by L292 , L215
.= ( ( R16 . R11 ) + ( ( R17 . R11 ) + ( R18 . R11 ) ) ) by L292 , L215
.= ( ( ( R16 . R11 ) + ( R17 . R11 ) ) + ( R18 . R11 ) );
thus L295: thesis by L294 , L293;
end;
theorem
L296: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds (for R19 being (marking of R10) holds ((R16 c= R17 & R18 c= R19) implies ( R16 + R18 ) c= ( R17 + R19 )))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
let R19 being (marking of R10);
assume L297: R16 c= R17;
assume L298: R18 c= R19;
let R11 being set;
assume L299: R11 in R10;
L300: ( R16 . R11 ) <= ( R17 . R11 ) by L299 , L297 , L201;
L301: ( R18 . R11 ) <= ( R19 . R11 ) by L298 , L299 , L201;
L302: ( ( R16 . R11 ) + ( R18 . R11 ) ) <= ( ( R17 . R11 ) + ( R19 . R11 ) ) by L301 , L300 , XREAL_1:7;
L303: ( ( R16 + R18 ) . R11 ) = ( ( R16 . R11 ) + ( R18 . R11 ) ) by L299 , L215;
thus L304: thesis by L303 , L299 , L302 , L215;
end;
theorem
L305: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (R16 c= R17 implies ( R17 - R16 ) c= R17))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
assume L306: R16 c= R17;
let R11 being set;
assume L307: R11 in R10;
L308: ( ( R17 - R16 ) . R11 ) = ( ( R17 . R11 ) - ( R16 . R11 ) ) by L307 , L306 , L234;
L309: ( R16 multitude_of R11 ) >= ( 0 ) by NAT_1:2;
L310: ( ( R17 . R11 ) - ( 0 ) ) = ( R17 . R11 );
thus L311: thesis by L310 , L308 , L309 , XREAL_1:13;
end;
theorem
L312: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds (for R19 being (marking of R10) holds ((R16 c= R17 & R18 c= R19 & R19 c= R16) implies ( R16 - R19 ) c= ( R17 - R18 )))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
let R19 being (marking of R10);
assume L313: R16 c= R17;
assume L314: R18 c= R19;
assume L315: R19 c= R16;
L316: R19 c= R17 by L315 , L313 , L208;
L317: R18 c= R17 by L316 , L314 , L208;
let R11 being set;
assume L318: R11 in R10;
L319: ( R16 . R11 ) <= ( R17 . R11 ) by L318 , L313 , L201;
L320: ( R18 . R11 ) <= ( R19 . R11 ) by L314 , L318 , L201;
L321: ( ( R17 - R18 ) . R11 ) = ( ( R17 . R11 ) - ( R18 . R11 ) ) by L317 , L318 , L234;
L322: ( ( R16 - R19 ) . R11 ) = ( ( R16 . R11 ) - ( R19 . R11 ) ) by L315 , L318 , L234;
thus L323: thesis by L322 , L319 , L320 , L321 , XREAL_1:13;
end;
theorem
L324: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (R16 c= R17 implies R17 = ( ( R17 - R16 ) + R16 )))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
assume L325: R16 c= R17;
let R11 being set;
assume L326: R11 in R10;
L327: ( ( ( R17 - R16 ) + R16 ) . R11 ) = ( ( ( R17 - R16 ) . R11 ) + ( R16 . R11 ) ) by L326 , L215
.= ( ( ( R17 . R11 ) - ( R16 . R11 ) ) + ( R16 . R11 ) ) by L325 , L326 , L234
.= ( R17 . R11 );
thus L328: thesis by L327;
end;
theorem
L329: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds ( ( R16 + R17 ) - R16 ) = R17)))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
L330: R16 c= ( R16 + R17 ) by L244;
let R11 being set;
assume L331: R11 in R10;
L332: ( ( ( R16 + R17 ) - R16 ) . R11 ) = ( ( ( R16 + R17 ) . R11 ) - ( R16 . R11 ) ) by L331 , L330 , L234
.= ( ( ( R16 . R11 ) + ( R17 . R11 ) ) - ( R16 . R11 ) ) by L331 , L215
.= ( R17 . R11 );
thus L333: thesis by L332;
end;
theorem
L334: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds (( R17 + R18 ) c= R16 implies ( ( R16 - R17 ) - R18 ) = ( R16 - ( R17 + R18 ) ))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
assume L335: ( R17 + R18 ) c= R16;
L336: ( ( R16 - R17 ) - R18 ) = ( ( ( ( R16 - ( R17 + R18 ) ) + ( R17 + R18 ) ) - R17 ) - R18 ) by L335 , L324
.= ( ( ( ( ( R16 - ( R17 + R18 ) ) + R18 ) + R17 ) - R17 ) - R18 ) by L291
.= ( ( ( R16 - ( R17 + R18 ) ) + R18 ) - R18 ) by L329
.= ( R16 - ( R17 + R18 ) ) by L329;
thus L337: thesis by L336;
end;
theorem
L338: (for R10 being set holds (for R16 being (marking of R10) holds (for R17 being (marking of R10) holds (for R18 being (marking of R10) holds ((R18 c= R17 & R17 c= R16) implies ( R16 - ( R17 - R18 ) ) = ( ( R16 - R17 ) + R18 ))))))
proof
let R10 being set;
let R16 being (marking of R10);
let R17 being (marking of R10);
let R18 being (marking of R10);
assume L339: R18 c= R17;
assume L340: R17 c= R16;
L341: ( R17 - R18 ) c= ( R18 + ( R17 - R18 ) ) by L244;
L342: R17 = ( R18 + ( R17 - R18 ) ) by L339 , L324;
L343: ( ( R18 + ( R17 - R18 ) ) - ( R17 - R18 ) ) c= ( R16 - ( R17 - R18 ) ) by L342 , L340 , L341 , L312;
L344: R18 c= ( R16 - ( R17 - R18 ) ) by L343 , L329;
thus L345: ( ( R16 - R17 ) + R18 ) = ( ( ( R16 - ( R17 - R18 ) ) - R18 ) + R18 ) by L340 , L342 , L334
.= ( R16 - ( R17 - R18 ) ) by L344 , L324;
end;
begin
definition
let R10 being set;
mode transition of R10
means :L346: (ex R16 being (marking of R10) st (ex R17 being (marking of R10) st it = [ R16 , R17 ]));
existence
proof
set D6 = the (marking of R10);
take [ D6 , D6 ];
thus L347: thesis;
end;
end;
notation
let R10 being set;
let R30 being (transition of R10);
synonym Pre R30 for R30 `1;
synonym Post R30 for R30 `2;
end;
definition
let R10 being set;
let R30 being (transition of R10);
redefine func Pre R30 -> (marking of R10);

coherence
proof
L350: (ex R16 being (marking of R10) st (ex R17 being (marking of R10) st R30 = [ R16 , R17 ])) by L346;
thus L351: thesis by L350 , MCART_1:7;
end;
redefine func Post R30 -> (marking of R10);

coherence
proof
L352: (ex R16 being (marking of R10) st (ex R17 being (marking of R10) st R30 = [ R16 , R17 ])) by L346;
thus L353: thesis by L352 , MCART_1:7;
end;
end;
definition
let R10 being set;
let R20 being (marking of R10);
let R30 being (transition of R10);
func fire (R30 , R20) -> (marking of R10) equals 
:L355: ( ( R20 - ( Pre R30 ) ) + ( Post R30 ) ) if ( Pre R30 ) c= R20 otherwise R20;
coherence;
consistency;
end;
theorem
L357: (for R10 being set holds (for R20 being (marking of R10) holds (for R31 being (transition of R10) holds (for R32 being (transition of R10) holds (( ( Pre R31 ) + ( Pre R32 ) ) c= R20 implies ( fire (R32 , ( fire (R31 , R20) )) ) = ( ( ( ( R20 - ( Pre R31 ) ) - ( Pre R32 ) ) + ( Post R31 ) ) + ( Post R32 ) ))))))
proof
let R10 being set;
let R20 being (marking of R10);
let R31 being (transition of R10);
let R32 being (transition of R10);
assume L358: ( ( Pre R31 ) + ( Pre R32 ) ) c= R20;
L359: ( Pre R31 ) c= ( ( Pre R31 ) + ( Pre R32 ) ) by L244;
L360: ( Pre R31 ) c= R20 by L359 , L358 , L208;
L361: ( fire (R31 , R20) ) = ( ( R20 - ( Pre R31 ) ) + ( Post R31 ) ) by L360 , L355;
L362: ( Pre R32 ) = ( ( ( Pre R32 ) + ( Pre R31 ) ) - ( Pre R31 ) ) by L264;
L363: ( ( ( Pre R31 ) + ( Pre R32 ) ) - ( Pre R31 ) ) c= ( R20 - ( Pre R31 ) ) by L358 , L359 , L268;
L364: ( R20 - ( Pre R31 ) ) c= ( ( R20 - ( Pre R31 ) ) + ( Post R31 ) ) by L244;
L365: ( Pre R32 ) c= ( fire (R31 , R20) ) by L364 , L361 , L362 , L363 , L208;
thus L366: ( fire (R32 , ( fire (R31 , R20) )) ) = ( ( ( fire (R31 , R20) ) - ( Pre R32 ) ) + ( Post R32 ) ) by L365 , L355
.= ( ( ( ( R20 - ( Pre R31 ) ) + ( Post R31 ) ) - ( Pre R32 ) ) + ( Post R32 ) ) by L360 , L355
.= ( ( ( ( R20 - ( Pre R31 ) ) - ( Pre R32 ) ) + ( Post R31 ) ) + ( Post R32 ) ) by L358 , L359 , L362 , L268 , L277;
end;
definition
let R10 being set;
let R30 being (transition of R10);
func fire R30 -> Function means 
:L367: (( dom it ) = ( Funcs (R10 , ( NAT )) ) & (for B33 being (marking of R10) holds ( it . B33 ) = ( fire (R30 , B33) )));
existence
proof
defpred S1[ set , set ] means (ex R20 being (marking of R10) st (R20 = $1 & $2 = ( fire (R30 , R20) )));
L368: (for R12 being set holds (R12 in ( Funcs (R10 , ( NAT )) ) implies (ex R13 being set st S1[ R12 , R13 ])))
proof
let R12 being set;
assume L369: R12 in ( Funcs (R10 , ( NAT )) );
reconsider D7 = R12 as (marking of R10) by L369 , FUNCT_2:66;
take ( fire (R30 , D7) );
thus L370: thesis;
end;
consider C47 being Function such that L371: ( dom C47 ) = ( Funcs (R10 , ( NAT )) ) and L372: (for R12 being set holds (R12 in ( Funcs (R10 , ( NAT )) ) implies S1[ R12 , ( C47 . R12 ) ])) from CLASSES1:sch 1(L368);
take C47;
thus L373: ( dom C47 ) = ( Funcs (R10 , ( NAT )) ) by L371;
let R20 being (marking of R10);
L374: R20 in ( Funcs (R10 , ( NAT )) ) by FUNCT_2:8;
L375: S1[ R20 , ( C47 . R20 ) ] by L374 , L372;
thus L376: thesis by L375;
end;
uniqueness
proof
let C48 , C49 being Function;
assume that
L377: ( dom C48 ) = ( Funcs (R10 , ( NAT )) )
and
L378: (for B34 being (marking of R10) holds ( C48 . B34 ) = ( fire (R30 , B34) ))
and
L379: ( dom C49 ) = ( Funcs (R10 , ( NAT )) )
and
L380: (for B35 being (marking of R10) holds ( C49 . B35 ) = ( fire (R30 , B35) ));
L381:
now
let C50 being set;
assume L382: C50 in ( dom C48 );
reconsider D8 = C50 as (marking of R10) by L382 , L377 , FUNCT_2:66;
thus L383: ( C48 . C50 ) = ( fire (R30 , D8) ) by L378
.= ( C49 . C50 ) by L380;
end;
thus L384: thesis by L381 , L377 , L379 , FUNCT_1:2;
end;
end;
theorem
L386: (for R10 being set holds (for R30 being (transition of R10) holds ( rng ( fire R30 ) ) c= ( Funcs (R10 , ( NAT )) )))
proof
let R10 being set;
let R30 being (transition of R10);
let R13 being set;
assume L387: R13 in ( rng ( fire R30 ) );
consider R12 being set such that L388: R12 in ( dom ( fire R30 ) ) and L389: R13 = ( ( fire R30 ) . R12 ) by L387 , FUNCT_1:def 3;
L390: ( dom ( fire R30 ) ) = ( Funcs (R10 , ( NAT )) ) by L367;
reconsider D9 = R12 as (marking of R10) by L390 , L388 , FUNCT_2:66;
L391: R13 = ( fire (R30 , D9) ) by L389 , L367;
thus L392: thesis by L391 , FUNCT_2:8;
end;
theorem
L393: (for R10 being set holds (for R20 being (marking of R10) holds (for R31 being (transition of R10) holds (for R32 being (transition of R10) holds ( fire (R32 , ( fire (R31 , R20) )) ) = ( ( ( fire R32 ) * ( fire R31 ) ) . R20 )))))
proof
let R10 being set;
let R20 being (marking of R10);
let R31 being (transition of R10);
let R32 being (transition of R10);
L394: ( dom ( fire R31 ) ) = ( Funcs (R10 , ( NAT )) ) by L367;
L395: R20 in ( dom ( fire R31 ) ) by L394 , FUNCT_2:8;
thus L396: ( fire (R32 , ( fire (R31 , R20) )) ) = ( ( fire R32 ) . ( fire (R31 , R20) ) ) by L367
.= ( ( fire R32 ) . ( ( fire R31 ) . R20 ) ) by L367
.= ( ( ( fire R32 ) * ( fire R31 ) ) . R20 ) by L395 , FUNCT_1:13;
end;
definition
let R10 being set;
mode Petri_net of R10
 -> non  empty set
means :L397: (for B36 being set holds (B36 in it implies B36 is (transition of R10)));
existence
proof
set D10 = the (transition of R10);
take { D10 };
thus L398: thesis by TARSKI:def 1;
end;
end;
definition
let R10 being set;
let R33 being (Petri_net of R10);
redefine mode Element of R33
 -> (transition of R10);
coherence by L397;
end;
begin
definition
let R10 being set;
let R33 being (Petri_net of R10);
mode firing-sequence of R33
 is (Element of ( R33 * ));
end;
definition
let R10 being set;
let R33 being (Petri_net of R10);
let R37 being (firing-sequence of R33);
func fire R37 -> Function means 
:L402: (ex B37 being  Function-yielding FinSequence st (it = ( compose (B37 , ( Funcs (R10 , ( NAT )) )) ) & ( len B37 ) = ( len R37 ) & (for B38 being (Element of ( NAT )) holds (B38 in ( dom R37 ) implies ( B37 . B38 ) = ( fire (( R37 /. B38 ) qua (Element of R33)) )))));
existence
proof
deffunc H2(set) = ( fire (( R37 /. $1 ) qua (Element of R33)) );
consider C51 being FinSequence such that L403: ( len C51 ) = ( len R37 ) and L404: (for B39 being Nat holds (B39 in ( dom C51 ) implies ( C51 . B39 ) = H2(B39))) from FINSEQ_1:sch 2;
L405: ( dom C51 ) = ( Seg ( len C51 ) ) by FINSEQ_1:def 3;
L406: ( dom R37 ) = ( Seg ( len R37 ) ) by FINSEQ_1:def 3;
L407: C51 is  Function-yielding
proof
let C52 being set;
assume L408: C52 in ( dom C51 );
reconsider D11 = C52 as (Element of ( NAT )) by L408;
L409: ( C51 . C52 ) = ( fire (( R37 /. D11 ) qua (Element of R33)) ) by L404 , L408;
thus L410: thesis by L409;
end;
reconsider D12 = C51 as  Function-yielding FinSequence by L407;
take D13 = ( compose (D12 , ( Funcs (R10 , ( NAT )) )) );
take D12;
thus L411: D13 = ( compose (D12 , ( Funcs (R10 , ( NAT )) )) );
thus L412: thesis by L403 , L404 , L405 , L406;
end;
uniqueness
proof
let C53 , C54 being Function;
given C55 being  Function-yielding FinSequence such that
L413: C53 = ( compose (C55 , ( Funcs (R10 , ( NAT )) )) )
and
L414: ( len C55 ) = ( len R37 )
and
L415: (for B40 being (Element of ( NAT )) holds (B40 in ( dom R37 ) implies ( C55 . B40 ) = ( fire (( R37 /. B40 ) qua (Element of R33)) )));

given C56 being  Function-yielding FinSequence such that
L416: C54 = ( compose (C56 , ( Funcs (R10 , ( NAT )) )) )
and
L417: ( len C56 ) = ( len R37 )
and
L418: (for B41 being (Element of ( NAT )) holds (B41 in ( dom R37 ) implies ( C56 . B41 ) = ( fire (( R37 /. B41 ) qua (Element of R33)) )));

L419: ( dom C55 ) = ( Seg ( len C55 ) ) by FINSEQ_1:def 3;
L420: ( dom C56 ) = ( Seg ( len C56 ) ) by FINSEQ_1:def 3;
L421: ( dom R37 ) = ( Seg ( len R37 ) ) by FINSEQ_1:def 3;
L422:
now
let C57 being Nat;
assume L423: C57 in ( dom R37 );
L424: ( C55 . C57 ) = ( fire (( R37 /. C57 ) qua (Element of R33)) ) by L423 , L415;
thus L425: ( C55 . C57 ) = ( C56 . C57 ) by L424 , L418 , L423;
end;
thus L426: thesis by L422 , L413 , L414 , L416 , L417 , L419 , L420 , L421 , FINSEQ_1:13;
end;
end;
theorem
L428: (for R10 being set holds (for R33 being (Petri_net of R10) holds ( fire ( <*> R33 ) ) = ( id ( Funcs (R10 , ( NAT )) ) )))
proof
let R10 being set;
let R33 being (Petri_net of R10);
consider C58 being  Function-yielding FinSequence such that L429: ( fire ( <*> R33 ) ) = ( compose (C58 , ( Funcs (R10 , ( NAT )) )) ) and L430: ( len C58 ) = ( len ( <*> R33 ) ) and L431: (for B42 being (Element of ( NAT )) holds (B42 in ( dom ( <*> R33 ) ) implies ( C58 . B42 ) = ( fire (( ( <*> R33 ) /. B42 ) qua (Element of R33)) ))) by L402;
L432: C58 = ( {} ) by L430;
thus L433: thesis by L432 , L429 , FUNCT_7:39;
end;
theorem
L434: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R34 being (Element of R33) holds ( fire <* R34 *> ) = ( fire R34 ))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R34 being (Element of R33);
consider C59 being  Function-yielding FinSequence such that L435: ( fire <* R34 *> ) = ( compose (C59 , ( Funcs (R10 , ( NAT )) )) ) and L436: ( len C59 ) = ( len <* R34 *> ) and L437: (for B43 being (Element of ( NAT )) holds (B43 in ( dom <* R34 *> ) implies ( C59 . B43 ) = ( fire (( <* R34 *> /. B43 ) qua (Element of R33)) ))) by L402;
L438: ( len <* R34 *> ) = 1 by FINSEQ_1:40;
L439: ( <* R34 *> . 1 ) = R34 by FINSEQ_1:40;
L440: ( dom <* R34 *> ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:def 8;
L441: 1 in ( dom <* R34 *> ) by L440 , TARSKI:def 1;
L442: ( <* R34 *> /. 1 ) = ( <* R34 *> . 1 ) by L441 , PARTFUN1:def 6;
L443: ( C59 . 1 ) = ( fire (( <* R34 *> /. 1 ) qua (Element of R33)) ) by L437 , L441;
L444: C59 = <* ( fire R34 ) *> by L443 , L436 , L438 , L439 , L442 , FINSEQ_1:40;
L445: ( dom ( fire R34 ) ) c= ( Funcs (R10 , ( NAT )) ) by L367;
thus L446: thesis by L445 , L435 , L444 , FUNCT_7:46;
end;
theorem
L447: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R34 being (Element of R33) holds ( ( fire R34 ) * ( id ( Funcs (R10 , ( NAT )) ) ) ) = ( fire R34 ))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R34 being (Element of R33);
L448: ( compose (<* ( fire R34 ) *> , ( Funcs (R10 , ( NAT )) )) ) = ( ( fire R34 ) * ( id ( Funcs (R10 , ( NAT )) ) ) ) by FUNCT_7:45;
L449: ( dom ( fire R34 ) ) c= ( Funcs (R10 , ( NAT )) ) by L367;
thus L450: thesis by L449 , L448 , FUNCT_7:46;
end;
theorem
L451: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R35 being (Element of R33) holds (for R36 being (Element of R33) holds ( fire <* R35 , R36 *> ) = ( ( fire R36 ) * ( fire R35 ) )))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R35 being (Element of R33);
let R36 being (Element of R33);
consider C60 being  Function-yielding FinSequence such that L452: ( fire <* R35 , R36 *> ) = ( compose (C60 , ( Funcs (R10 , ( NAT )) )) ) and L453: ( len C60 ) = ( len <* R35 , R36 *> ) and L454: (for B44 being (Element of ( NAT )) holds (B44 in ( dom <* R35 , R36 *> ) implies ( C60 . B44 ) = ( fire (( <* R35 , R36 *> /. B44 ) qua (Element of R33)) ))) by L402;
L455: ( len <* R35 , R36 *> ) = 2 by FINSEQ_1:44;
L456: ( <* R35 , R36 *> . 1 ) = R35 by FINSEQ_1:44;
L457: ( <* R35 , R36 *> . 2 ) = R36 by FINSEQ_1:44;
L458: ( dom <* R35 , R36 *> ) = { 1 , 2 } by L455 , FINSEQ_1:2 , FINSEQ_1:def 3;
L459: 1 in { 1 , 2 } by TARSKI:def 2;
L460: 2 in { 1 , 2 } by TARSKI:def 2;
L461: ( <* R35 , R36 *> /. 1 ) = ( <* R35 , R36 *> . 1 ) by L458 , L459 , PARTFUN1:def 6;
L462: ( <* R35 , R36 *> /. 2 ) = ( <* R35 , R36 *> . 2 ) by L458 , L460 , PARTFUN1:def 6;
L463: ( C60 . 1 ) = ( fire R35 ) by L454 , L456 , L458 , L459 , L461;
L464: ( C60 . 2 ) = ( fire R36 ) by L454 , L457 , L458 , L460 , L462;
L465: C60 = <* ( fire R35 ) , ( fire R36 ) *> by L464 , L453 , L455 , L463 , FINSEQ_1:44;
L466: ( ( fire R35 ) * ( id ( Funcs (R10 , ( NAT )) ) ) ) = ( fire R35 ) by L447;
L467: ( ( ( fire R36 ) * ( fire R35 ) ) * ( id ( Funcs (R10 , ( NAT )) ) ) ) = ( ( fire R36 ) * ( fire R35 ) ) by L466 , RELAT_1:36;
thus L468: thesis by L467 , L452 , L465 , FUNCT_7:51;
end;
theorem
L469: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R37 being (firing-sequence of R33) holds (( dom ( fire R37 ) ) = ( Funcs (R10 , ( NAT )) ) & ( rng ( fire R37 ) ) c= ( Funcs (R10 , ( NAT )) )))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R37 being (firing-sequence of R33);
defpred S2[ (Element of ( NAT )) ] means (for B45 being  Function-yielding FinSequence holds ((( len B45 ) = $1 & (for R21 being (Element of ( NAT )) holds (R21 in ( dom B45 ) implies (ex R30 being (transition of R10) st ( B45 . R21 ) = ( fire R30 ))))) implies (( dom ( compose (B45 , ( Funcs (R10 , ( NAT )) )) ) ) = ( Funcs (R10 , ( NAT )) ) & ( rng ( compose (B45 , ( Funcs (R10 , ( NAT )) )) ) ) c= ( Funcs (R10 , ( NAT )) ))));
L470: S2[ ( 0 ) ]
proof
let C61 being  Function-yielding FinSequence;
assume L471: ( len C61 ) = ( 0 );
L472: C61 = ( {} ) by L471;
L473: ( compose (C61 , ( Funcs (R10 , ( NAT )) )) ) = ( id ( Funcs (R10 , ( NAT )) ) ) by L472 , FUNCT_7:39;
thus L474: thesis by L473 , RELAT_1:45;
end;
L475: (for R25 being (Element of ( NAT )) holds (S2[ R25 ] implies S2[ ( R25 + 1 ) ]))
proof
let R25 being (Element of ( NAT ));
assume that
L476: (for B46 being  Function-yielding FinSequence holds ((( len B46 ) = R25 & (for R21 being (Element of ( NAT )) holds (R21 in ( dom B46 ) implies (ex R30 being (transition of R10) st ( B46 . R21 ) = ( fire R30 ))))) implies (( dom ( compose (B46 , ( Funcs (R10 , ( NAT )) )) ) ) = ( Funcs (R10 , ( NAT )) ) & ( rng ( compose (B46 , ( Funcs (R10 , ( NAT )) )) ) ) c= ( Funcs (R10 , ( NAT )) ))));
let C62 being  Function-yielding FinSequence;
assume that
L477: ( len C62 ) = ( R25 + 1 )
and
L478: (for R21 being (Element of ( NAT )) holds (R21 in ( dom C62 ) implies (ex R30 being (transition of R10) st ( C62 . R21 ) = ( fire R30 ))));
consider C63 being FinSequence, C64 being set such that L479: C62 = ( C63 ^ <* C64 *> ) and L480: ( len C63 ) = R25 by L477 , TREES_2:3;
reconsider D14 = C63 as  Function-yielding FinSequence by L479 , FUNCT_7:23;
L481: ( 0 ) <= R25 by NAT_1:2;
L482: ( (( 0 ) qua Nat) + 1 ) <= ( R25 + 1 ) by L481 , XREAL_1:7;
L483: ( R25 + 1 ) in ( dom C62 ) by L482 , L477 , FINSEQ_3:25;
consider R30 being (transition of R10) such that L484: ( C62 . ( R25 + 1 ) ) = ( fire R30 ) by L483 , L478;
L485: C64 = ( C62 . ( R25 + 1 ) ) by L479 , L480 , FINSEQ_1:42;
L486: ( compose (C62 , ( Funcs (R10 , ( NAT )) )) ) = ( ( fire R30 ) * ( compose (D14 , ( Funcs (R10 , ( NAT )) )) ) ) by L485 , L479 , L484 , FUNCT_7:41;
L487: ( dom ( fire R30 ) ) = ( Funcs (R10 , ( NAT )) ) by L367;
L488: ( rng ( fire R30 ) ) c= ( Funcs (R10 , ( NAT )) ) by L386;
L489: (for R21 being (Element of ( NAT )) holds (R21 in ( dom D14 ) implies (ex R30 being (transition of R10) st ( D14 . R21 ) = ( fire R30 ))))
proof
let R21 being (Element of ( NAT ));
L490: ( dom D14 ) c= ( dom C62 ) by L479 , FINSEQ_1:26;
assume L491: R21 in ( dom D14 );
L492: ( D14 . R21 ) = ( C62 . R21 ) by L491 , L479 , FINSEQ_1:def 7;
thus L493: thesis by L492 , L478 , L490 , L491;
end;
L494: ( dom ( compose (D14 , ( Funcs (R10 , ( NAT )) )) ) ) = ( Funcs (R10 , ( NAT )) ) by L489 , L476 , L480;
L495: ( rng ( compose (D14 , ( Funcs (R10 , ( NAT )) )) ) ) c= ( Funcs (R10 , ( NAT )) ) by L476 , L480 , L489;
L496: ( rng ( compose (C62 , ( Funcs (R10 , ( NAT )) )) ) ) c= ( rng ( fire R30 ) ) by L486 , RELAT_1:26;
thus L497: thesis by L496 , L486 , L487 , L488 , L494 , L495 , RELAT_1:27 , XBOOLE_1:1;
end;
L498: (for R25 being (Element of ( NAT )) holds S2[ R25 ]) from NAT_1:sch 1(L470 , L475);
consider C65 being  Function-yielding FinSequence such that L499: ( fire R37 ) = ( compose (C65 , ( Funcs (R10 , ( NAT )) )) ) and L500: ( len C65 ) = ( len R37 ) and L501: (for B47 being (Element of ( NAT )) holds (B47 in ( dom R37 ) implies ( C65 . B47 ) = ( fire (( R37 /. B47 ) qua (Element of R33)) ))) by L402;
L502: (for R21 being (Element of ( NAT )) holds (R21 in ( dom C65 ) implies (ex R30 being (transition of R10) st ( C65 . R21 ) = ( fire R30 ))))
proof
let R21 being (Element of ( NAT ));
assume L503: R21 in ( dom C65 );
L504: ( dom C65 ) = ( Seg ( len C65 ) ) by FINSEQ_1:def 3;
L505: ( dom R37 ) = ( Seg ( len R37 ) ) by FINSEQ_1:def 3;
reconsider D15 = ( R37 /. R21 ) as (Element of R33);
take D15;
thus L506: thesis by L500 , L501 , L503 , L504 , L505;
end;
thus L507: thesis by L502 , L498 , L499 , L500;
end;
theorem
L508: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R38 being (firing-sequence of R33) holds (for R39 being (firing-sequence of R33) holds ( fire ( R38 ^ R39 ) ) = ( ( fire R39 ) * ( fire R38 ) )))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R38 being (firing-sequence of R33);
let R39 being (firing-sequence of R33);
consider C66 being  Function-yielding FinSequence such that L509: ( fire ( R38 ^ R39 ) ) = ( compose (C66 , ( Funcs (R10 , ( NAT )) )) ) and L510: ( len C66 ) = ( len ( R38 ^ R39 ) ) and L511: (for B48 being (Element of ( NAT )) holds (B48 in ( dom ( R38 ^ R39 ) ) implies ( C66 . B48 ) = ( fire (( ( R38 ^ R39 ) /. B48 ) qua (Element of R33)) ))) by L402;
consider C67 being  Function-yielding FinSequence such that L512: ( fire R38 ) = ( compose (C67 , ( Funcs (R10 , ( NAT )) )) ) and L513: ( len C67 ) = ( len R38 ) and L514: (for B49 being (Element of ( NAT )) holds (B49 in ( dom R38 ) implies ( C67 . B49 ) = ( fire (( R38 /. B49 ) qua (Element of R33)) ))) by L402;
consider C68 being  Function-yielding FinSequence such that L515: ( fire R39 ) = ( compose (C68 , ( Funcs (R10 , ( NAT )) )) ) and L516: ( len C68 ) = ( len R39 ) and L517: (for B50 being (Element of ( NAT )) holds (B50 in ( dom R39 ) implies ( C68 . B50 ) = ( fire (( R39 /. B50 ) qua (Element of R33)) ))) by L402;
L518: ( rng ( fire R38 ) ) c= ( Funcs (R10 , ( NAT )) ) by L469;
L519: ( len C66 ) = ( ( len R38 ) + ( len R39 ) ) by L510 , FINSEQ_1:22;
L520: ( dom C66 ) = ( Seg ( ( len C67 ) + ( len C68 ) ) ) by L519 , L513 , L516 , FINSEQ_1:def 3;
L521: (for B51 being Nat holds (B51 in ( dom C67 ) implies ( C66 . B51 ) = ( C67 . B51 )))
proof
let C69 being Nat;
assume L522: C69 in ( dom C67 );
L523: ( dom C67 ) = ( Seg ( len C67 ) ) by FINSEQ_1:def 3;
L524: ( dom C67 ) = ( Seg ( len R38 ) ) by L513 , FINSEQ_1:def 3;
L525: ( dom C67 ) = ( dom R38 ) by L513 , L523 , FINSEQ_1:def 3;
L526: C69 in ( dom R38 ) by L522 , L524 , FINSEQ_1:def 3;
L527: ( dom R38 ) c= ( dom ( R38 ^ R39 ) ) by FINSEQ_1:26;
L528: ( C66 . C69 ) = ( fire (( ( R38 ^ R39 ) /. C69 ) qua (Element of R33)) ) by L527 , L511 , L526;
L529: ( ( R38 ^ R39 ) /. C69 ) = ( ( R38 ^ R39 ) . C69 ) by L526 , L527 , PARTFUN1:def 6;
L530: ( ( R38 ^ R39 ) . C69 ) = ( R38 . C69 ) by L522 , L525 , FINSEQ_1:def 7;
L531: ( R38 . C69 ) = ( R38 /. C69 ) by L522 , L525 , PARTFUN1:def 6;
thus L532: thesis by L531 , L514 , L522 , L525 , L528 , L529 , L530;
end;
L533: (for B52 being Nat holds (B52 in ( dom C68 ) implies ( C66 . ( ( len C67 ) + B52 ) ) = ( C68 . B52 )))
proof
let C70 being Nat;
assume L534: C70 in ( dom C68 );
L535: ( dom C68 ) = ( Seg ( len C68 ) ) by FINSEQ_1:def 3;
L536: ( dom C68 ) = ( dom R39 ) by L535 , L516 , FINSEQ_1:def 3;
L537: ( ( len C67 ) + C70 ) in ( dom ( R38 ^ R39 ) ) by L536 , L513 , L534 , FINSEQ_1:28;
L538: ( C66 . ( ( len C67 ) + C70 ) ) = ( fire (( ( R38 ^ R39 ) /. ( ( len C67 ) + C70 ) ) qua (Element of R33)) ) by L511 , L513 , L534 , L536 , FINSEQ_1:28;
L539: ( ( R38 ^ R39 ) /. ( ( len C67 ) + C70 ) ) = ( ( R38 ^ R39 ) . ( ( len C67 ) + C70 ) ) by L537 , PARTFUN1:def 6;
L540: ( ( R38 ^ R39 ) . ( ( len C67 ) + C70 ) ) = ( R39 . C70 ) by L513 , L534 , L536 , FINSEQ_1:def 7;
L541: ( R39 . C70 ) = ( R39 /. C70 ) by L534 , L536 , PARTFUN1:def 6;
thus L542: thesis by L541 , L517 , L534 , L536 , L538 , L539 , L540;
end;
L543: C66 = ( C67 ^ C68 ) by L533 , L520 , L521 , FINSEQ_1:def 7;
thus L544: thesis by L543 , L509 , L512 , L515 , L518 , FUNCT_7:48;
end;
theorem
L545: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R34 being (Element of R33) holds (for R37 being (firing-sequence of R33) holds ( fire ( R37 ^ <* R34 *> ) ) = ( ( fire R34 ) * ( fire R37 ) )))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R34 being (Element of R33);
let R37 being (firing-sequence of R33);
L546: ( fire ( R37 ^ <* R34 *> ) ) = ( ( fire <* R34 *> ) * ( fire R37 ) ) by L508;
thus L547: thesis by L546 , L434;
end;
definition
let R10 being set;
let R33 being (Petri_net of R10);
let R37 being (firing-sequence of R33);
let R20 being (marking of R10);
func fire (R37 , R20) -> (marking of R10) equals 
( ( fire R37 ) . R20 );
coherence
proof
L548: ( dom ( fire R37 ) ) = ( Funcs (R10 , ( NAT )) ) by L469;
L549: ( rng ( fire R37 ) ) c= ( Funcs (R10 , ( NAT )) ) by L469;
L550: R20 in ( dom ( fire R37 ) ) by L548 , FUNCT_2:8;
L551: [ R20 , ( ( fire R37 ) . R20 ) ] in ( fire R37 ) by L550 , FUNCT_1:def 2;
L552: ( ( fire R37 ) . R20 ) in ( rng ( fire R37 ) ) by L551 , XTUPLE_0:def 13;
thus L553: thesis by L552 , L549 , FUNCT_2:66;
end;
end;
begin
definition
let R10 being set;
let R33 being (Petri_net of R10);
mode process of R33
 is (Subset of ( R33 * ));
end;
definition
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
func R45 before R46 -> (process of R33) equals 
{ ( R38 ^ R39 ) where R38 is (firing-sequence of R33) , R39 is (firing-sequence of R33) : (R38 in R45 & R39 in R46) };
coherence
proof
set D16 = { ( R38 ^ R39 ) where R38 is (firing-sequence of R33) , R39 is (firing-sequence of R33) : (R38 in R45 & R39 in R46) };
L556: D16 c= ( R33 * )
proof
let R12 being set;
assume L557: R12 in D16;
L558: (ex R38 being (firing-sequence of R33) st (ex R39 being (firing-sequence of R33) st (R12 = ( R38 ^ R39 ) & R38 in R45 & R39 in R46))) by L557;
thus L559: thesis by L558;
end;
thus L560: thesis by L556;
end;
end;
registration
let R10 being set;
let R33 being (Petri_net of R10);
let C71 , C72 being non  empty (process of R33);
cluster ( C71 before C72 ) -> non  empty;
coherence
proof
consider C73 being set such that L562: C73 in C71 by XBOOLE_0:def 1;
consider C74 being set such that L563: C74 in C72 by XBOOLE_0:def 1;
reconsider D17 = C73 , D18 = C74 as (firing-sequence of R33) by L562 , L563;
L564: ( D17 ^ D18 ) in ( C71 before C72 ) by L562 , L563;
thus L565: thesis by L564;
end;
end;
theorem
L567: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R44 being (process of R33) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds ( ( R45 \/ R46 ) before R44 ) = ( ( R45 before R44 ) \/ ( R46 before R44 ) ))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R44 being (process of R33);
let R45 being (process of R33);
let R46 being (process of R33);
thus L568: ( ( R45 \/ R46 ) before R44 ) c= ( ( R45 before R44 ) \/ ( R46 before R44 ) )
proof
let R12 being set;
assume L569: R12 in ( ( R45 \/ R46 ) before R44 );
consider R42 being (firing-sequence of R33), R41 being (firing-sequence of R33) such that L570: R12 = ( R42 ^ R41 ) and L571: R42 in ( R45 \/ R46 ) and L572: R41 in R44 by L569;
L573: (R42 in R45 or R42 in R46) by L571 , XBOOLE_0:def 3;
L574: (R12 in { ( B53 ^ B54 ) where B53 , B54 is (firing-sequence of R33) : (B53 in R45 & B54 in R44) } or R12 in { ( B55 ^ B56 ) where B55 , B56 is (firing-sequence of R33) : (B55 in R46 & B56 in R44) }) by L573 , L570 , L572;
thus L575: thesis by L574 , XBOOLE_0:def 3;
end;

let C75 being set;
assume L576: C75 in ( ( R45 before R44 ) \/ ( R46 before R44 ) );
per cases  by L576 , XBOOLE_0:def 3;
suppose L577: C75 in ( R45 before R44 );

consider R42 being (firing-sequence of R33), R41 being (firing-sequence of R33) such that L578: C75 = ( R42 ^ R41 ) and L579: R42 in R45 and L580: R41 in R44 by L577;
L581: R42 in ( R45 \/ R46 ) by L579 , XBOOLE_0:def 3;
thus L582: thesis by L581 , L578 , L580;
end;
suppose L583: C75 in ( R46 before R44 );

consider R43 being (firing-sequence of R33), R41 being (firing-sequence of R33) such that L584: C75 = ( R43 ^ R41 ) and L585: R43 in R46 and L586: R41 in R44 by L583;
L587: R43 in ( R45 \/ R46 ) by L585 , XBOOLE_0:def 3;
thus L588: thesis by L587 , L584 , L586;
end;
end;
theorem
L590: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R44 being (process of R33) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds ( R44 before ( R45 \/ R46 ) ) = ( ( R44 before R45 ) \/ ( R44 before R46 ) ))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R44 being (process of R33);
let R45 being (process of R33);
let R46 being (process of R33);
thus L591: ( R44 before ( R45 \/ R46 ) ) c= ( ( R44 before R45 ) \/ ( R44 before R46 ) )
proof
let R12 being set;
assume L592: R12 in ( R44 before ( R45 \/ R46 ) );
consider R41 being (firing-sequence of R33), R42 being (firing-sequence of R33) such that L593: R12 = ( R41 ^ R42 ) and L594: R41 in R44 and L595: R42 in ( R45 \/ R46 ) by L592;
L596: (R42 in R45 or R42 in R46) by L595 , XBOOLE_0:def 3;
L597: (R12 in { ( B57 ^ B58 ) where B57 , B58 is (firing-sequence of R33) : (B57 in R44 & B58 in R45) } or R12 in { ( B59 ^ B60 ) where B59 , B60 is (firing-sequence of R33) : (B59 in R44 & B60 in R46) }) by L596 , L593 , L594;
thus L598: thesis by L597 , XBOOLE_0:def 3;
end;

let C76 being set;
assume L599: C76 in ( ( R44 before R45 ) \/ ( R44 before R46 ) );
per cases  by L599 , XBOOLE_0:def 3;
suppose L600: C76 in ( R44 before R45 );

consider R41 being (firing-sequence of R33), R42 being (firing-sequence of R33) such that L601: C76 = ( R41 ^ R42 ) and L602: R41 in R44 and L603: R42 in R45 by L600;
L604: R42 in ( R45 \/ R46 ) by L603 , XBOOLE_0:def 3;
thus L605: thesis by L604 , L601 , L602;
end;
suppose L606: C76 in ( R44 before R46 );

consider R41 being (firing-sequence of R33), R43 being (firing-sequence of R33) such that L607: C76 = ( R41 ^ R43 ) and L608: R41 in R44 and L609: R43 in R46 by L606;
L610: R43 in ( R45 \/ R46 ) by L609 , XBOOLE_0:def 3;
thus L611: thesis by L610 , L607 , L608;
end;
end;
theorem
L613: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R38 being (firing-sequence of R33) holds (for R39 being (firing-sequence of R33) holds ( { R38 } before { R39 } ) = { ( R38 ^ R39 ) }))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R38 being (firing-sequence of R33);
let R39 being (firing-sequence of R33);
thus L614: ( { R38 } before { R39 } ) c= { ( R38 ^ R39 ) }
proof
let R12 being set;
assume L615: R12 in ( { R38 } before { R39 } );
consider R42 being (firing-sequence of R33), R43 being (firing-sequence of R33) such that L616: R12 = ( R42 ^ R43 ) and L617: R42 in { R38 } and L618: R43 in { R39 } by L615;
L619: R42 = R38 by L617 , TARSKI:def 1;
L620: R43 = R39 by L618 , TARSKI:def 1;
thus L621: thesis by L620 , L616 , L619 , TARSKI:def 1;
end;

let R12 being set;
assume L622: R12 in { ( R38 ^ R39 ) };
L623: R12 = ( R38 ^ R39 ) by L622 , TARSKI:def 1;
L624: R38 in { R38 } by TARSKI:def 1;
L625: R39 in { R39 } by TARSKI:def 1;
thus L626: thesis by L625 , L623 , L624;
end;
theorem
L627: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R37 being (firing-sequence of R33) holds (for R38 being (firing-sequence of R33) holds (for R39 being (firing-sequence of R33) holds ( { R38 , R39 } before { R37 } ) = { ( R38 ^ R37 ) , ( R39 ^ R37 ) })))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R37 being (firing-sequence of R33);
let R38 being (firing-sequence of R33);
let R39 being (firing-sequence of R33);
thus L628: ( { R38 , R39 } before { R37 } ) = ( ( { R38 } \/ { R39 } ) before { R37 } ) by ENUMSET1:1
.= ( ( { R38 } before { R37 } ) \/ ( { R39 } before { R37 } ) ) by L567
.= ( { ( R38 ^ R37 ) } \/ ( { R39 } before { R37 } ) ) by L613
.= ( { ( R38 ^ R37 ) } \/ { ( R39 ^ R37 ) } ) by L613
.= { ( R38 ^ R37 ) , ( R39 ^ R37 ) } by ENUMSET1:1;
end;
theorem
L629: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R37 being (firing-sequence of R33) holds (for R38 being (firing-sequence of R33) holds (for R39 being (firing-sequence of R33) holds ( { R37 } before { R38 , R39 } ) = { ( R37 ^ R38 ) , ( R37 ^ R39 ) })))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R37 being (firing-sequence of R33);
let R38 being (firing-sequence of R33);
let R39 being (firing-sequence of R33);
thus L630: ( { R37 } before { R38 , R39 } ) = ( { R37 } before ( { R38 } \/ { R39 } ) ) by ENUMSET1:1
.= ( ( { R37 } before { R38 } ) \/ ( { R37 } before { R39 } ) ) by L590
.= ( { ( R37 ^ R38 ) } \/ ( { R37 } before { R39 } ) ) by L613
.= ( { ( R37 ^ R38 ) } \/ { ( R37 ^ R39 ) } ) by L613
.= { ( R37 ^ R38 ) , ( R37 ^ R39 ) } by ENUMSET1:1;
end;
begin
definition
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
func R45 concur R46 -> (process of R33) equals 
{ R37 where R37 is (firing-sequence of R33) : (ex B61 , B62 being FinSubsequence st (R37 = ( B61 \/ B62 ) & B61 misses B62 & ( Seq B61 ) in R45 & ( Seq B62 ) in R46)) };
coherence
proof
set D19 = { R37 where R37 is (firing-sequence of R33) : (ex B63 , B64 being FinSubsequence st (R37 = ( B63 \/ B64 ) & B63 misses B64 & ( Seq B63 ) in R45 & ( Seq B64 ) in R46)) };
L631: D19 c= ( R33 * )
proof
let R12 being set;
assume L632: R12 in D19;
L633: (ex R37 being (firing-sequence of R33) st (R12 = R37 & (ex B65 , B66 being FinSubsequence st (R37 = ( B65 \/ B66 ) & B65 misses B66 & ( Seq B65 ) in R45 & ( Seq B66 ) in R46)))) by L632;
thus L634: thesis by L633;
end;
thus L635: thesis by L631;
end;
commutativity
proof
let R44 being (process of R33);
let R45 being (process of R33);
let R46 being (process of R33);
assume L636: R44 = { R38 where R38 is (firing-sequence of R33) : (ex B67 , B68 being FinSubsequence st (R38 = ( B67 \/ B68 ) & B67 misses B68 & ( Seq B67 ) in R45 & ( Seq B68 ) in R46)) };
thus L637: R44 c= { R39 where R39 is (firing-sequence of R33) : (ex B69 , B70 being FinSubsequence st (R39 = ( B69 \/ B70 ) & B69 misses B70 & ( Seq B69 ) in R46 & ( Seq B70 ) in R45)) }
proof
let R12 being set;
assume L638: R12 in R44;
L639: (ex R38 being (firing-sequence of R33) st (R12 = R38 & (ex B71 , B72 being FinSubsequence st (R38 = ( B71 \/ B72 ) & B71 misses B72 & ( Seq B71 ) in R45 & ( Seq B72 ) in R46)))) by L638 , L636;
thus L640: thesis by L639;
end;

let R12 being set;
assume L641: R12 in { R39 where R39 is (firing-sequence of R33) : (ex B73 , B74 being FinSubsequence st (R39 = ( B73 \/ B74 ) & B73 misses B74 & ( Seq B73 ) in R46 & ( Seq B74 ) in R45)) };
L642: (ex R39 being (firing-sequence of R33) st (R12 = R39 & (ex B75 , B76 being FinSubsequence st (R39 = ( B75 \/ B76 ) & B75 misses B76 & ( Seq B75 ) in R46 & ( Seq B76 ) in R45)))) by L641;
thus L643: thesis by L642 , L636;
end;
end;
theorem
L645: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R44 being (process of R33) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds ( ( R45 \/ R46 ) concur R44 ) = ( ( R45 concur R44 ) \/ ( R46 concur R44 ) ))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R44 being (process of R33);
let R45 being (process of R33);
let R46 being (process of R33);
thus L646: ( ( R45 \/ R46 ) concur R44 ) c= ( ( R45 concur R44 ) \/ ( R46 concur R44 ) )
proof
let R12 being set;
assume L647: R12 in ( ( R45 \/ R46 ) concur R44 );
consider R37 being (firing-sequence of R33) such that L648: R12 = R37 and L649: (ex B77 , B78 being FinSubsequence st (R37 = ( B77 \/ B78 ) & B77 misses B78 & ( Seq B77 ) in ( R45 \/ R46 ) & ( Seq B78 ) in R44)) by L647;
consider C77 , C78 being FinSubsequence such that L650: R37 = ( C77 \/ C78 ) and L651: C77 misses C78 and L652: ( Seq C77 ) in ( R45 \/ R46 ) and L653: ( Seq C78 ) in R44 by L649;
L654: (( Seq C77 ) in R45 or ( Seq C77 ) in R46) by L652 , XBOOLE_0:def 3;
L655: (R12 in { R38 where R38 is (firing-sequence of R33) : (ex B79 , B80 being FinSubsequence st (R38 = ( B79 \/ B80 ) & B79 misses B80 & ( Seq B79 ) in R45 & ( Seq B80 ) in R44)) } or R12 in { R39 where R39 is (firing-sequence of R33) : (ex B81 , B82 being FinSubsequence st (R39 = ( B81 \/ B82 ) & B81 misses B82 & ( Seq B81 ) in R46 & ( Seq B82 ) in R44)) }) by L654 , L648 , L650 , L651 , L653;
thus L656: thesis by L655 , XBOOLE_0:def 3;
end;

let C79 being set;
assume L657: C79 in ( ( R45 concur R44 ) \/ ( R46 concur R44 ) );
per cases  by L657 , XBOOLE_0:def 3;
suppose L658: C79 in ( R45 concur R44 );

consider R37 being (firing-sequence of R33) such that L659: C79 = R37 and L660: (ex B83 , B84 being FinSubsequence st (R37 = ( B83 \/ B84 ) & B83 misses B84 & ( Seq B83 ) in R45 & ( Seq B84 ) in R44)) by L658;
consider C80 , C81 being FinSubsequence such that L661: R37 = ( C80 \/ C81 ) and L662: C80 misses C81 and L663: ( Seq C80 ) in R45 and L664: ( Seq C81 ) in R44 by L660;
L665: ( Seq C80 ) in ( R45 \/ R46 ) by L663 , XBOOLE_0:def 3;
thus L666: thesis by L665 , L659 , L661 , L662 , L664;
end;
suppose L667: C79 in ( R46 concur R44 );

consider R37 being (firing-sequence of R33) such that L668: C79 = R37 and L669: (ex B85 , B86 being FinSubsequence st (R37 = ( B85 \/ B86 ) & B85 misses B86 & ( Seq B85 ) in R46 & ( Seq B86 ) in R44)) by L667;
consider C82 , C83 being FinSubsequence such that L670: R37 = ( C82 \/ C83 ) and L671: C82 misses C83 and L672: ( Seq C82 ) in R46 and L673: ( Seq C83 ) in R44 by L669;
L674: ( Seq C82 ) in ( R45 \/ R46 ) by L672 , XBOOLE_0:def 3;
thus L675: thesis by L674 , L668 , L670 , L671 , L673;
end;
end;
theorem
L677: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R35 being (Element of R33) holds (for R36 being (Element of R33) holds ( { <* R35 *> } concur { <* R36 *> } ) = { <* R35 , R36 *> , <* R36 , R35 *> }))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R35 being (Element of R33);
let R36 being (Element of R33);
set D20 = <* R35 *>;
set D21 = <* R36 *>;
set D22 = { D20 };
set D23 = { D21 };
thus L678: ( { D20 } concur { D21 } ) c= { <* R35 , R36 *> , <* R36 , R35 *> }
proof
let R12 being set;
assume L679: R12 in ( { D20 } concur { D21 } );
consider R37 being (firing-sequence of R33) such that L680: R12 = R37 and L681: (ex B87 , B88 being FinSubsequence st (R37 = ( B87 \/ B88 ) & B87 misses B88 & ( Seq B87 ) in D22 & ( Seq B88 ) in D23)) by L679;
consider C84 , C85 being FinSubsequence such that L682: R37 = ( C84 \/ C85 ) and L683: C84 misses C85 and L684: ( Seq C84 ) in D22 and L685: ( Seq C85 ) in D23 by L681;
L686: ( Seq C84 ) = D20 by L684 , TARSKI:def 1;
L687: ( Seq C85 ) = D21 by L685 , TARSKI:def 1;
consider R21 being (Element of ( NAT )) such that L688: C84 = { [ R21 , R35 ] } by L686 , L37;
consider R22 being (Element of ( NAT )) such that L689: C85 = { [ R22 , R36 ] } by L687 , L37;
L690: [ R21 , R35 ] in C84 by L688 , TARSKI:def 1;
L691: [ R22 , R36 ] in C85 by L689 , TARSKI:def 1;
L692: R37 = { [ R21 , R35 ] , [ R22 , R36 ] } by L682 , L688 , L689 , ENUMSET1:1;
L693: ((R21 = 1 & R22 = 1 & R35 = R36) or (R21 = 1 & R22 = 2) or (R21 = 2 & R22 = 1)) by L692 , L54;
L694: (R37 = <* R35 , R36 *> or R37 = <* R36 , R35 *>) by L693 , L683 , L690 , L691 , L692 , L77 , XBOOLE_0:3;
thus L695: thesis by L694 , L680 , TARSKI:def 2;
end;

let R12 being set;
assume L696: R12 in { <* R35 , R36 *> , <* R36 , R35 *> };
per cases  by L696 , TARSKI:def 2;
suppose L697: R12 = <* R35 , R36 *>;

L698: R12 = { [ 1 , R35 ] , [ 2 , R36 ] } by L697 , L77
.= ( { [ 1 , R35 ] } \/ { [ 2 , R36 ] } ) by ENUMSET1:1;
reconsider D24 = { [ 1 , R35 ] } , D25 = { [ 2 , R36 ] } as FinSubsequence by L1;
L699: [ 1 , R35 ] <> [ 2 , R36 ] by XTUPLE_0:1;
L700: (not [ 1 , R35 ] in D25) by L699 , TARSKI:def 1;
L701: D24 misses D25 by L700 , ZFMISC_1:50;
L702: ( Seq D24 ) = <* R35 *> by L23;
L703: ( Seq D25 ) = <* R36 *> by L23;
L704: <* R35 *> in D22 by TARSKI:def 1;
L705: <* R36 *> in D23 by TARSKI:def 1;
thus L706: thesis by L705 , L697 , L698 , L701 , L702 , L703 , L704;
end;
suppose L707: R12 = <* R36 , R35 *>;

L708: R12 = { [ 1 , R36 ] , [ 2 , R35 ] } by L707 , L77
.= ( { [ 1 , R36 ] } \/ { [ 2 , R35 ] } ) by ENUMSET1:1;
reconsider D26 = { [ 2 , R35 ] } , D27 = { [ 1 , R36 ] } as FinSubsequence by L1;
L709: [ 1 , R36 ] <> [ 2 , R35 ] by XTUPLE_0:1;
L710: (not [ 2 , R35 ] in D27) by L709 , TARSKI:def 1;
L711: D26 misses D27 by L710 , ZFMISC_1:50;
L712: ( Seq D26 ) = <* R35 *> by L23;
L713: ( Seq D27 ) = <* R36 *> by L23;
L714: <* R35 *> in D22 by TARSKI:def 1;
L715: <* R36 *> in D23 by TARSKI:def 1;
thus L716: thesis by L715 , L707 , L708 , L711 , L712 , L713 , L714;
end;
end;
theorem
L718: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R34 being (Element of R33) holds (for R35 being (Element of R33) holds (for R36 being (Element of R33) holds ( { <* R35 *> , <* R36 *> } concur { <* R34 *> } ) = { <* R35 , R34 *> , <* R36 , R34 *> , <* R34 , R35 *> , <* R34 , R36 *> })))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R34 being (Element of R33);
let R35 being (Element of R33);
let R36 being (Element of R33);
L719: { <* R35 *> , <* R36 *> } = ( { <* R35 *> } \/ { <* R36 *> } ) by ENUMSET1:1;
L720: ( { <* R35 *> , <* R36 *> } concur { <* R34 *> } ) = ( ( { <* R35 *> } concur { <* R34 *> } ) \/ ( { <* R36 *> } concur { <* R34 *> } ) ) by L719 , L645;
L721: ( { <* R35 *> } concur { <* R34 *> } ) = { <* R35 , R34 *> , <* R34 , R35 *> } by L677;
L722: ( { <* R36 *> } concur { <* R34 *> } ) = { <* R36 , R34 *> , <* R34 , R36 *> } by L677;
thus L723: ( { <* R35 *> , <* R36 *> } concur { <* R34 *> } ) = { <* R35 , R34 *> , <* R34 , R35 *> , <* R36 , R34 *> , <* R34 , R36 *> } by L722 , L720 , L721 , ENUMSET1:5
.= { <* R35 , R34 *> , <* R36 , R34 *> , <* R34 , R35 *> , <* R34 , R36 *> } by ENUMSET1:62;
end;
theorem
L724: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds (for R47 being (process of R33) holds ( ( R45 before R46 ) before R47 ) = ( R45 before ( R46 before R47 ) ))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
let R47 being (process of R33);
thus L725: ( ( R45 before R46 ) before R47 ) c= ( R45 before ( R46 before R47 ) )
proof
let R12 being set;
assume L726: R12 in ( ( R45 before R46 ) before R47 );
consider R38 being (firing-sequence of R33), R39 being (firing-sequence of R33) such that L727: R12 = ( R38 ^ R39 ) and L728: R38 in ( R45 before R46 ) and L729: R39 in R47 by L726;
consider R42 being (firing-sequence of R33), R43 being (firing-sequence of R33) such that L730: R38 = ( R42 ^ R43 ) and L731: R42 in R45 and L732: R43 in R46 by L728;
L733: R12 = ( R42 ^ ( R43 ^ R39 ) ) by L727 , L730 , FINSEQ_1:32;
consider R40 being (firing-sequence of R33) such that L734: R40 = ( R43 ^ R39 ) and L735: R43 in R46 and L736: R39 in R47 by L729 , L732;
L737: R40 in ( R46 before R47 ) by L734 , L735 , L736;
thus L738: thesis by L737 , L731 , L733 , L734;
end;

let R12 being set;
assume L739: R12 in ( R45 before ( R46 before R47 ) );
consider R38 being (firing-sequence of R33), R39 being (firing-sequence of R33) such that L740: R12 = ( R38 ^ R39 ) and L741: R38 in R45 and L742: R39 in ( R46 before R47 ) by L739;
consider R42 being (firing-sequence of R33), R43 being (firing-sequence of R33) such that L743: R39 = ( R42 ^ R43 ) and L744: R42 in R46 and L745: R43 in R47 by L742;
L746: R12 = ( ( R38 ^ R42 ) ^ R43 ) by L740 , L743 , FINSEQ_1:32;
consider R37 being (firing-sequence of R33) such that L747: R37 = ( R38 ^ R42 ) and L748: R38 in R45 and L749: R42 in R46 by L741 , L744;
L750: R37 in ( R45 before R46 ) by L747 , L748 , L749;
thus L751: thesis by L750 , L745 , L746 , L747;
end;
definition
let C86 being FinSubsequence;
let C87 being (Element of ( NAT ));
set D28 = { ( C87 + B89 ) where B89 is (Element of ( NAT )) : B89 in ( dom C86 ) };
func C87 Shift C86 -> FinSubsequence means 
:L752: (( dom it ) = { ( C87 + B90 ) where B90 is (Element of ( NAT )) : B90 in ( dom C86 ) } & (for B91 being Nat holds (B91 in ( dom C86 ) implies ( it . ( C87 + B91 ) ) = ( C86 . B91 ))));
existence
proof
consider C88 being Nat such that L753: ( dom C86 ) c= ( Seg C88 ) by FINSEQ_1:def 12;
defpred S3[ set , set ] means (ex R25 being (Element of ( NAT )) st ($1 = ( C87 + R25 ) & $2 = ( C86 . R25 )));
L754: (for R12 being set holds (R12 in D28 implies (ex R13 being set st S3[ R12 , R13 ])))
proof
let R12 being set;
assume L755: R12 in D28;
consider R25 being (Element of ( NAT )) such that L756: R12 = ( C87 + R25 ) and L757: R25 in ( dom C86 ) by L755;
L758: [ R25 , ( C86 . R25 ) ] in C86 by L757 , FUNCT_1:def 2;
thus L759: thesis by L758 , L756;
end;
consider C89 being Function such that L760: ( dom C89 ) = D28 and L761: (for R12 being set holds (R12 in D28 implies S3[ R12 , ( C89 . R12 ) ])) from CLASSES1:sch 1(L754);
L762: D28 c= ( Seg ( C87 + C88 ) )
proof
let R12 being set;
assume L763: R12 in D28;
consider R25 being (Element of ( NAT )) such that L764: R12 = ( C87 + R25 ) and L765: R25 in ( dom C86 ) by L763;
L766: ( C87 + R25 ) >= R25 by NAT_1:11;
L767: R25 >= 1 by L753 , L765 , FINSEQ_1:1;
L768: R25 <= C88 by L753 , L765 , FINSEQ_1:1;
L769: ( C87 + R25 ) >= 1 by L766 , L767 , XXREAL_0:2;
L770: ( C87 + R25 ) <= ( C87 + C88 ) by L768 , XREAL_1:6;
thus L771: thesis by L770 , L764 , L769 , FINSEQ_1:1;
end;
reconsider D29 = C89 as FinSubsequence by L762 , L760 , FINSEQ_1:def 12;
take D29;
thus L772: ( dom D29 ) = D28 by L760;
let C90 being Nat;
L773: C90 in ( NAT ) by ORDINAL1:def 12;
assume L774: C90 in ( dom C86 );
L775: ( C87 + C90 ) in D28 by L774 , L773;
L776: (ex R25 being (Element of ( NAT )) st (( C87 + C90 ) = ( C87 + R25 ) & ( D29 . ( C87 + C90 ) ) = ( C86 . R25 ))) by L775 , L761;
thus L777: thesis by L776;
end;
uniqueness
proof
let C91 , C92 being FinSubsequence;
assume that
L778: ( dom C91 ) = D28
and
L779: (for B92 being Nat holds (B92 in ( dom C86 ) implies ( C91 . ( C87 + B92 ) ) = ( C86 . B92 )))
and
L780: ( dom C92 ) = D28
and
L781: (for B93 being Nat holds (B93 in ( dom C86 ) implies ( C92 . ( C87 + B93 ) ) = ( C86 . B93 )));
L782:
now
let C93 being set;
assume L783: C93 in D28;
consider R25 being (Element of ( NAT )) such that L784: C93 = ( C87 + R25 ) and L785: R25 in ( dom C86 ) by L783;
thus L786: ( C91 . C93 ) = ( C86 . R25 ) by L779 , L784 , L785
.= ( C92 . C93 ) by L781 , L784 , L785;
end;
thus L787: thesis by L782 , L778 , L780 , FUNCT_1:2;
end;
end;
theorem
L789: (for R50 being FinSubsequence holds ( ( 0 ) Shift R50 ) = R50)
proof
let R50 being FinSubsequence;
set D30 = { ( (( 0 ) qua Nat) + B94 ) where B94 is (Element of ( NAT )) : B94 in ( dom R50 ) };
L790: ( dom ( ( 0 ) Shift R50 ) ) = D30 by L752;
L791: D30 = ( dom R50 )
proof
thus L792: D30 c= ( dom R50 )
proof
let R12 being set;
assume L793: R12 in D30;
L794: (ex R25 being (Element of ( NAT )) st (R12 = ( (( 0 ) qua Nat) + R25 ) & R25 in ( dom R50 ))) by L793;
thus L795: thesis by L794;
end;

let R12 being set;
assume L796: R12 in ( dom R50 );
consider C94 being Nat such that L797: ( dom R50 ) c= ( Seg C94 ) by FINSEQ_1:def 12;
L798: R12 in ( Seg C94 ) by L796 , L797;
reconsider D31 = R12 as (Element of ( NAT )) by L798;
L799: R12 = ( (( 0 ) qua Nat) + D31 );
thus L800: thesis by L799 , L796;
end;
L801:
now
let R12 being set;
assume L802: R12 in D30;
L803: (ex R25 being (Element of ( NAT )) st (R12 = ( (( 0 ) qua Nat) + R25 ) & R25 in ( dom R50 ))) by L802;
thus L804: ( ( ( 0 ) Shift R50 ) . R12 ) = ( R50 . R12 ) by L803 , L752;
end;
thus L805: thesis by L801 , L790 , L791 , FUNCT_1:2;
end;
theorem
L806: (for R21 being (Element of ( NAT )) holds (for R22 being (Element of ( NAT )) holds (for R50 being FinSubsequence holds ( ( R21 + R22 ) Shift R50 ) = ( R21 Shift ( R22 Shift R50 ) ))))
proof
let R21 being (Element of ( NAT ));
let R22 being (Element of ( NAT ));
let R50 being FinSubsequence;
set D32 = ( R22 Shift R50 );
set D33 = ( ( R21 + R22 ) Shift R50 );
set D34 = ( R21 Shift D32 );
set D35 = { ( R22 + B95 ) where B95 is (Element of ( NAT )) : B95 in ( dom R50 ) };
set D36 = { ( R21 + B96 ) where B96 is (Element of ( NAT )) : B96 in ( dom D32 ) };
set D37 = { ( ( R21 + R22 ) + B97 ) where B97 is (Element of ( NAT )) : B97 in ( dom R50 ) };
L807: ( dom D32 ) = D35 by L752;
L808: ( dom D34 ) = D36 by L752;
L809: ( dom D33 ) = D37 by L752;
L810: D36 = D37
proof
thus L811: D36 c= D37
proof
let R12 being set;
assume L812: R12 in D36;
consider R25 being (Element of ( NAT )) such that L813: R12 = ( R21 + R25 ) and L814: R25 in ( dom D32 ) by L812;
L815: ( dom ( R22 Shift R50 ) ) = { ( R22 + B98 ) where B98 is (Element of ( NAT )) : B98 in ( dom R50 ) } by L752;
consider C95 being (Element of ( NAT )) such that L816: R25 = ( R22 + C95 ) and L817: C95 in ( dom R50 ) by L815 , L814;
L818: R12 = ( ( R21 + R22 ) + C95 ) by L813 , L816;
thus L819: thesis by L818 , L817;
end;

let R12 being set;
assume L820: R12 in D37;
consider R25 being (Element of ( NAT )) such that L821: R12 = ( ( R21 + R22 ) + R25 ) and L822: R25 in ( dom R50 ) by L820;
reconsider D38 = ( R22 + R25 ) as (Element of ( NAT ));
L823: ( dom D32 ) = { ( R22 + B99 ) where B99 is (Element of ( NAT )) : B99 in ( dom R50 ) } by L752;
L824: R12 = ( R21 + D38 ) by L821;
L825: D38 in ( dom D32 ) by L822 , L823;
thus L826: thesis by L825 , L824;
end;
L827:
now
let R12 being set;
assume L828: R12 in D37;
consider R25 being (Element of ( NAT )) such that L829: R12 = ( ( R21 + R22 ) + R25 ) and L830: R25 in ( dom R50 ) by L828;
L831: R12 = ( R21 + ( R22 + R25 ) ) by L829;
L832: ( R22 + R25 ) in ( dom D32 ) by L807 , L830;
thus L833: ( D33 . R12 ) = ( R50 . R25 ) by L829 , L830 , L752
.= ( D32 . ( R22 + R25 ) ) by L830 , L752
.= ( D34 . R12 ) by L831 , L832 , L752;
end;
thus L834: thesis by L827 , L808 , L809 , L810 , FUNCT_1:2;
end;
theorem
L835: (for R21 being (Element of ( NAT )) holds (for B100 being FinSequence holds ( dom ( R21 Shift B100 ) ) = { R23 where R23 is (Element of ( NAT )) : (( R21 + 1 ) <= R23 & R23 <= ( R21 + ( len B100 ) )) }))
proof
let R21 being (Element of ( NAT ));
let C96 being FinSequence;
L836: ( dom C96 ) = ( Seg ( len C96 ) ) by FINSEQ_1:def 3
.= { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( len C96 )) } by FINSEQ_1:def 1;
set D39 = { R23 where R23 is (Element of ( NAT )) : (( R21 + 1 ) <= R23 & R23 <= ( R21 + ( len C96 ) )) };
L837: ( dom ( R21 Shift C96 ) ) = { ( R21 + R26 ) where R26 is (Element of ( NAT )) : R26 in ( dom C96 ) } by L752;
thus L838: ( dom ( R21 Shift C96 ) ) c= D39
proof
let R12 being set;
assume L839: R12 in ( dom ( R21 Shift C96 ) );
consider R26 being (Element of ( NAT )) such that L840: R12 = ( R21 + R26 ) and L841: R26 in ( dom C96 ) by L839 , L837;
consider R25 being (Element of ( NAT )) such that L842: R26 = R25 and L843: 1 <= R25 and L844: R25 <= ( len C96 ) by L836 , L841;
L845: ( R21 + 1 ) <= ( R21 + R25 ) by L843 , XREAL_1:7;
L846: ( R21 + R25 ) <= ( R21 + ( len C96 ) ) by L844 , XREAL_1:7;
thus L847: thesis by L846 , L840 , L842 , L845;
end;

let R12 being set;
assume L848: R12 in D39;
consider R23 being (Element of ( NAT )) such that L849: R12 = R23 and L850: ( R21 + 1 ) <= R23 and L851: R23 <= ( R21 + ( len C96 ) ) by L848;
L852: ( R21 + (( 0 ) qua Nat) ) <= ( R21 + 1 ) by XREAL_1:7;
consider C97 being Nat such that L853: R23 = ( R21 + C97 ) by L852 , L850 , NAT_1:10 , XXREAL_0:2;
L854: C97 in ( NAT ) by ORDINAL1:def 12;
L855: 1 <= C97 by L850 , L853 , XREAL_1:6;
L856: C97 <= ( len C96 ) by L851 , L853 , XREAL_1:6;
L857: C97 in ( dom C96 ) by L856 , L836 , L854 , L855;
thus L858: thesis by L857 , L837 , L849 , L853;
end;
theorem
L859: (for R21 being (Element of ( NAT )) holds (for B101 being FinSubsequence holds (B101 = ( {} ) iff ( R21 Shift B101 ) = ( {} ))))
proof
let R21 being (Element of ( NAT ));
let C98 being FinSubsequence;
L860: ( dom ( R21 Shift C98 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C98 ) } by L752;
thus L861: (C98 = ( {} ) implies ( R21 Shift C98 ) = ( {} ))
proof
assume L862: C98 = ( {} );
L863:
now
let R12 being set;
let R13 being set;
L864:
now
assume L865: R12 in ( dom ( R21 Shift C98 ) );
L866: (ex R25 being (Element of ( NAT )) st (R12 = ( R21 + R25 ) & R25 in ( dom C98 ))) by L865 , L860;
thus L867: contradiction by L866 , L862;
end;
thus L868: (not [ R12 , R13 ] in ( R21 Shift C98 )) by L864 , FUNCT_1:1;
end;
thus L869: thesis by L863 , RELAT_1:37;
end;

assume L870: ( R21 Shift C98 ) = ( {} );
L871:
now
assume L872: C98 <> ( {} );
consider R12 being set such that L873: R12 in ( dom C98 ) by L872 , XBOOLE_0:def 1;
L874: R12 in ( rng ( Sgm ( dom C98 ) ) ) by L873 , FINSEQ_1:50;
L875: ( rng ( Sgm ( dom C98 ) ) ) c= ( NAT ) by FINSEQ_1:def 4;
reconsider D40 = R12 as (Element of ( NAT )) by L875 , L874;
consider R25 being (Element of ( NAT )) such that L876: R25 = ( R21 + D40 ) and L877: D40 in ( dom C98 ) by L873;
L878: R25 in ( dom ( R21 Shift C98 ) ) by L860 , L876 , L877;
thus L879: contradiction by L878 , L870;
end;
thus L880: thesis by L871;
end;
theorem
L881: (for R21 being (Element of ( NAT )) holds (for B102 being FinSubsequence holds (ex B103 being FinSubsequence st (( dom B103 ) = ( dom B102 ) & ( rng B103 ) = ( dom ( R21 Shift B102 ) ) & (for R25 being (Element of ( NAT )) holds (R25 in ( dom B102 ) implies ( B103 . R25 ) = ( R21 + R25 ))) & B103 is  one-to-one))))
proof
let R21 being (Element of ( NAT ));
let C99 being FinSubsequence;
consider C100 being Nat such that L882: ( dom C99 ) c= ( Seg C100 ) by FINSEQ_1:def 12;
defpred S4[ set , set ] means (ex R25 being (Element of ( NAT )) st (R25 = $1 & $2 = ( R21 + R25 )));
L883: (for R12 being set holds (R12 in ( dom C99 ) implies (ex R13 being set st S4[ R12 , R13 ])))
proof
let R12 being set;
assume L884: R12 in ( dom C99 );
L885: R12 in ( Seg C100 ) by L884 , L882;
reconsider D41 = R12 as (Element of ( NAT )) by L885;
take ( R21 + D41 );
thus L886: thesis;
end;
consider C101 being Function such that L887: ( dom C101 ) = ( dom C99 ) and L888: (for R12 being set holds (R12 in ( dom C99 ) implies S4[ R12 , ( C101 . R12 ) ])) from CLASSES1:sch 1(L883);
reconsider D42 = C101 as FinSubsequence by L882 , L887 , FINSEQ_1:def 12;
L889: ( dom ( R21 Shift C99 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C99 ) } by L752;
L890: ( rng D42 ) = ( dom ( R21 Shift C99 ) )
proof
thus L891: ( rng D42 ) c= ( dom ( R21 Shift C99 ) )
proof
let R13 being set;
assume L892: R13 in ( rng D42 );
consider R12 being set such that L893: R12 in ( dom D42 ) and L894: R13 = ( D42 . R12 ) by L892 , FUNCT_1:def 3;
L895: (ex R26 being (Element of ( NAT )) st (R26 = R12 & ( D42 . R12 ) = ( R21 + R26 ))) by L887 , L888 , L893;
thus L896: thesis by L895 , L887 , L889 , L893 , L894;
end;

let R13 being set;
assume L897: R13 in ( dom ( R21 Shift C99 ) );
consider R27 being (Element of ( NAT )) such that L898: R13 = ( R21 + R27 ) and L899: R27 in ( dom C99 ) by L897 , L889;
L900: (ex B104 being (Element of ( NAT )) st (B104 = R27 & ( D42 . R27 ) = ( R21 + B104 ))) by L888 , L899;
thus L901: thesis by L900 , L887 , L898 , L899 , FUNCT_1:def 3;
end;
L902: (for R25 being (Element of ( NAT )) holds (R25 in ( dom C99 ) implies ( D42 . R25 ) = ( R21 + R25 )))
proof
let R25 being (Element of ( NAT ));
assume L903: R25 in ( dom C99 );
L904: (ex R26 being (Element of ( NAT )) st (R26 = R25 & ( D42 . R25 ) = ( R21 + R26 ))) by L903 , L888;
thus L905: thesis by L904;
end;
L906: (for R14 being set holds (for R15 being set holds ((R14 in ( dom D42 ) & R15 in ( dom D42 ) & ( D42 . R14 ) = ( D42 . R15 )) implies R14 = R15)))
proof
let R14 being set;
let R15 being set;
assume that
L907: R14 in ( dom D42 )
and
L908: R15 in ( dom D42 )
and
L909: ( D42 . R14 ) = ( D42 . R15 );
L910: (ex R26 being (Element of ( NAT )) st (R26 = R14 & ( D42 . R14 ) = ( R21 + R26 ))) by L887 , L888 , L907;
L911: (ex R27 being (Element of ( NAT )) st (R27 = R15 & ( D42 . R15 ) = ( R21 + R27 ))) by L887 , L888 , L908;
thus L912: thesis by L911 , L909 , L910;
end;
L913: D42 is  one-to-one by L906 , FUNCT_1:def 4;
thus L914: thesis by L913 , L887 , L890 , L902;
end;
L915: (for R21 being (Element of ( NAT )) holds (for B105 being FinSequence holds (ex B106 being FinSequence st (( dom B106 ) = ( dom B105 ) & ( rng B106 ) = ( dom ( R21 Shift B105 ) ) & (for R25 being (Element of ( NAT )) holds (R25 in ( dom B105 ) implies ( B106 . R25 ) = ( R21 + R25 ))) & B106 is  one-to-one))))
proof
let R21 being (Element of ( NAT ));
let C102 being FinSequence;
consider C103 being FinSubsequence such that L916: ( dom C103 ) = ( dom C102 ) and L917: ( rng C103 ) = ( dom ( R21 Shift C102 ) ) and L918: (for R25 being (Element of ( NAT )) holds (R25 in ( dom C102 ) implies ( C103 . R25 ) = ( R21 + R25 ))) and L919: C103 is  one-to-one by L881;
L920: ( dom C103 ) = ( Seg ( len C102 ) ) by L916 , FINSEQ_1:def 3;
reconsider D43 = C103 as FinSequence by L920 , FINSEQ_1:def 2;
L921: ( dom D43 ) = ( dom C102 ) by L916;
thus L922: thesis by L921 , L917 , L918 , L919;
end;
theorem
L923: (for R21 being (Element of ( NAT )) holds (for B107 being FinSubsequence holds ( card B107 ) = ( card ( R21 Shift B107 ) )))
proof
let R21 being (Element of ( NAT ));
let C104 being FinSubsequence;
L924: (ex B108 being FinSubsequence st (( dom B108 ) = ( dom C104 ) & ( rng B108 ) = ( dom ( R21 Shift C104 ) ) & (for R25 being (Element of ( NAT )) holds (R25 in ( dom C104 ) implies ( B108 . R25 ) = ( R21 + R25 ))) & B108 is  one-to-one)) by L881;
L925: ( dom C104 ) , ( dom ( R21 Shift C104 ) ) are_equipotent  by L924 , WELLORD2:def 4;
L926: ( card ( dom C104 ) ) = ( card C104 ) by CARD_1:62;
L927: ( card ( dom ( R21 Shift C104 ) ) ) = ( card ( R21 Shift C104 ) ) by CARD_1:62;
thus L928: thesis by L927 , L925 , L926 , CARD_1:5;
end;
theorem
L929: (for R21 being (Element of ( NAT )) holds (for B109 being FinSequence holds ( dom B109 ) = ( dom ( Seq ( R21 Shift B109 ) ) )))
proof
let R21 being (Element of ( NAT ));
let C105 being FinSequence;
L930: ( rng ( Sgm ( dom ( R21 Shift C105 ) ) ) ) = ( dom ( R21 Shift C105 ) ) by FINSEQ_1:50;
L931: ( Seq ( R21 Shift C105 ) ) = ( ( R21 Shift C105 ) * ( Sgm ( dom ( R21 Shift C105 ) ) ) ) by FINSEQ_1:def 14;
L932: ( dom C105 ) = ( Seg ( len C105 ) ) by FINSEQ_1:def 3;
L933: ( dom ( Sgm ( dom ( R21 Shift C105 ) ) ) ) = ( Seg ( len ( Sgm ( dom ( R21 Shift C105 ) ) ) ) ) by FINSEQ_1:def 3;
L934: (ex B110 being Nat st ( dom ( R21 Shift C105 ) ) c= ( Seg B110 )) by FINSEQ_1:def 12;
L935: ( len ( Sgm ( dom ( R21 Shift C105 ) ) ) ) = ( card ( dom ( R21 Shift C105 ) ) ) by L934 , FINSEQ_3:39;
L936: ( card ( dom ( R21 Shift C105 ) ) ) = ( card ( R21 Shift C105 ) ) by CARD_1:62;
L937: ( card ( dom ( R21 Shift C105 ) ) ) = ( len C105 ) by L936 , L923;
thus L938: thesis by L937 , L930 , L931 , L932 , L933 , L935 , RELAT_1:27;
end;
theorem
L939: (for R21 being (Element of ( NAT )) holds (for R25 being (Element of ( NAT )) holds (for B111 being FinSequence holds (R25 in ( dom B111 ) implies ( ( Sgm ( dom ( R21 Shift B111 ) ) ) . R25 ) = ( R21 + R25 )))))
proof
let R21 being (Element of ( NAT ));
let R25 being (Element of ( NAT ));
let C106 being FinSequence;
assume L940: R25 in ( dom C106 );
consider C107 being FinSequence such that L941: ( dom C107 ) = ( dom C106 ) and L942: ( rng C107 ) = ( dom ( R21 Shift C106 ) ) and L943: (for R22 being (Element of ( NAT )) holds (R22 in ( dom C106 ) implies ( C107 . R22 ) = ( R21 + R22 ))) and L944: C107 is  one-to-one by L915;
L945: (ex B112 being Nat st ( dom ( R21 Shift C106 ) ) c= ( Seg B112 )) by FINSEQ_1:def 12;
L946: ( rng C107 ) = ( rng ( Sgm ( dom ( R21 Shift C106 ) ) ) ) by L942 , FINSEQ_1:50;
reconsider D44 = C107 as (FinSequence of ( NAT )) by L946 , FINSEQ_1:def 4;
L947: (for B113 , B114 , B115 , B116 being Nat holds ((1 <= B113 & B113 < B114 & B114 <= ( len D44 ) & B115 = ( D44 . B113 ) & B116 = ( D44 . B114 )) implies B115 < B116))
proof
let C108 , C109 , C110 , C111 being Nat;
assume that
L948: 1 <= C108
and
L949: C108 < C109
and
L950: C109 <= ( len D44 )
and
L951: C110 = ( D44 . C108 )
and
L952: C111 = ( D44 . C109 );
reconsider D45 = C108 , D46 = C109 as (Element of ( NAT )) by ORDINAL1:def 12;
L953: ( dom D44 ) = ( Seg ( len D44 ) ) by FINSEQ_1:def 3
.= { B117 where B117 is (Element of ( NAT )) : (1 <= B117 & B117 <= ( len D44 )) } by FINSEQ_1:def 1;
L954: ( D45 + 1 ) <= D46 by L949 , INT_1:7;
L955: ( D45 + 1 ) <= ( len D44 ) by L954 , L950 , XXREAL_0:2;
L956: D45 <= ( ( len D44 ) - 1 ) by L955 , XREAL_1:19;
L957: ( ( len D44 ) + (( 0 ) qua Nat) ) <= ( ( len D44 ) + 1 ) by XREAL_1:7;
L958: ( ( len D44 ) - 1 ) <= ( len D44 ) by L957 , XREAL_1:20;
L959: D45 <= ( len D44 ) by L958 , L956 , XXREAL_0:2;
L960: D45 in ( dom C106 ) by L959 , L941 , L948 , L953;
L961: 1 <= D46 by L948 , L949 , XXREAL_0:2;
L962: D46 in ( dom C106 ) by L961 , L941 , L950 , L953;
L963: C110 = ( R21 + D45 ) by L943 , L951 , L960;
L964: C111 = ( R21 + D46 ) by L943 , L952 , L962;
thus L965: thesis by L964 , L949 , L963 , XREAL_1:8;
end;
L966: D44 = ( Sgm ( dom ( R21 Shift C106 ) ) ) by L947 , L942 , L945 , FINSEQ_1:def 13;
thus L967: thesis by L966 , L940 , L943;
end;
theorem
L968: (for R21 being (Element of ( NAT )) holds (for R25 being (Element of ( NAT )) holds (for B118 being FinSequence holds (R25 in ( dom B118 ) implies ( ( Seq ( R21 Shift B118 ) ) . R25 ) = ( B118 . R25 )))))
proof
let R21 being (Element of ( NAT ));
let R25 being (Element of ( NAT ));
let C112 being FinSequence;
assume L969: R25 in ( dom C112 );
L970: R25 in ( dom ( Seq ( R21 Shift C112 ) ) ) by L969 , L929;
L971: ( Seq ( R21 Shift C112 ) ) = ( ( R21 Shift C112 ) * ( Sgm ( dom ( R21 Shift C112 ) ) ) ) by FINSEQ_1:def 14;
L972: ( ( Seq ( R21 Shift C112 ) ) . R25 ) = ( ( ( R21 Shift C112 ) * ( Sgm ( dom ( R21 Shift C112 ) ) ) ) . R25 ) by FINSEQ_1:def 14;
L973: ( ( ( R21 Shift C112 ) * ( Sgm ( dom ( R21 Shift C112 ) ) ) ) . R25 ) = ( ( R21 Shift C112 ) . ( ( Sgm ( dom ( R21 Shift C112 ) ) ) . R25 ) ) by L970 , L971 , FUNCT_1:12
.= ( ( R21 Shift C112 ) . ( R21 + R25 ) ) by L969 , L939;
thus L974: thesis by L973 , L969 , L972 , L752;
end;
theorem
L975: (for R21 being (Element of ( NAT )) holds (for B119 being FinSequence holds ( Seq ( R21 Shift B119 ) ) = B119))
proof
let R21 being (Element of ( NAT ));
let C113 being FinSequence;
L976: ( dom ( Seq ( R21 Shift C113 ) ) ) = ( dom C113 ) by L929;
L977: (for R12 being set holds (R12 in ( dom C113 ) implies ( ( Seq ( R21 Shift C113 ) ) . R12 ) = ( C113 . R12 ))) by L968;
thus L978: thesis by L977 , L976 , FUNCT_1:2;
end;
theorem
L979: (for R55 being FinSequence holds (for R56 being FinSequence holds ( dom ( R55 \/ ( ( len R55 ) Shift R56 ) ) ) = ( Seg ( ( len R55 ) + ( len R56 ) ) )))
proof
let R55 being FinSequence;
let R56 being FinSequence;
L980: ( Seg ( ( len R55 ) + ( len R56 ) ) ) = { R22 where R22 is (Element of ( NAT )) : (1 <= R22 & R22 <= ( ( len R55 ) + ( len R56 ) )) } by FINSEQ_1:def 1;
L981: ( dom ( R55 \/ ( ( len R55 ) Shift R56 ) ) ) = ( ( dom R55 ) \/ ( dom ( ( len R55 ) Shift R56 ) ) ) by RELAT_1:1;
L982: ( dom R55 ) = ( Seg ( len R55 ) ) by FINSEQ_1:def 3
.= { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( len R55 )) } by FINSEQ_1:def 1;
L983: ( dom ( ( len R55 ) Shift R56 ) ) = { R26 where R26 is (Element of ( NAT )) : (( ( len R55 ) + 1 ) <= R26 & R26 <= ( ( len R55 ) + ( len R56 ) )) } by L835;
thus L984: ( dom ( R55 \/ ( ( len R55 ) Shift R56 ) ) ) c= ( Seg ( ( len R55 ) + ( len R56 ) ) )
proof
let R12 being set;
assume L985: R12 in ( dom ( R55 \/ ( ( len R55 ) Shift R56 ) ) );
L986: (R12 in ( dom R55 ) or R12 in ( dom ( ( len R55 ) Shift R56 ) )) by L985 , L981 , XBOOLE_0:def 3;
L987: (ex B120 being (Element of ( NAT )) st ((R12 = B120 & 1 <= B120 & B120 <= ( len R55 )) or (R12 = B120 & ( ( len R55 ) + 1 ) <= B120 & B120 <= ( ( len R55 ) + ( len R56 ) )))) by L986 , L982 , L983;
reconsider D47 = R12 as (Element of ( NAT )) by L987;
L988: 1 <= D47 by L987 , L92;
L989: D47 <= ( ( len R55 ) + ( len R56 ) ) by L987 , L92;
thus L990: thesis by L989 , L980 , L988;
end;

let R12 being set;
assume L991: R12 in ( Seg ( ( len R55 ) + ( len R56 ) ) );
consider R22 being (Element of ( NAT )) such that L992: R12 = R22 and L993: 1 <= R22 and L994: R22 <= ( ( len R55 ) + ( len R56 ) ) by L991 , L980;
reconsider D48 = ( len R55 ) as Integer;
L995: ((1 <= R22 & R22 <= D48) or (( D48 + 1 ) <= R22 & R22 <= ( D48 + ( len R56 ) ))) by L993 , L994 , INT_1:7;
L996: (R12 in ( dom R55 ) or R12 in ( dom ( ( len R55 ) Shift R56 ) )) by L995 , L982 , L983 , L992;
thus L997: thesis by L996 , L981 , XBOOLE_0:def 3;
end;
theorem
L998: (for R21 being (Element of ( NAT )) holds (for B121 being FinSequence holds (for B122 being FinSubsequence holds (( len B121 ) <= R21 implies ( dom B121 ) misses ( dom ( R21 Shift B122 ) )))))
proof
let R21 being (Element of ( NAT ));
let C114 being FinSequence;
let C115 being FinSubsequence;
assume L999: ( len C114 ) <= R21;
L1000: ( dom C114 ) = ( Seg ( len C114 ) ) by FINSEQ_1:def 3
.= { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( len C114 )) } by FINSEQ_1:def 1;
L1001: ( dom ( R21 Shift C115 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C115 ) } by L752;
L1002: (not (ex R12 being set st R12 in ( ( dom C114 ) /\ ( dom ( R21 Shift C115 ) ) )))
proof
given R12 being set such that
L1003: R12 in ( ( dom C114 ) /\ ( dom ( R21 Shift C115 ) ) );

L1004: R12 in ( dom C114 ) by L1003 , XBOOLE_0:def 4;
L1005: R12 in ( dom ( R21 Shift C115 ) ) by L1003 , XBOOLE_0:def 4;
L1006: (ex R26 being (Element of ( NAT )) st (R12 = R26 & 1 <= R26 & R26 <= ( len C114 ))) by L1000 , L1004;
consider R27 being (Element of ( NAT )) such that L1007: R12 = ( R21 + R27 ) and L1008: R27 in ( dom C115 ) by L1001 , L1005;
consider C116 being Nat such that L1009: ( dom C115 ) c= ( Seg C116 ) by FINSEQ_1:def 12;
L1010: R27 in ( Seg C116 ) by L1008 , L1009;
L1011: ( Seg C116 ) = { B123 where B123 is (Element of ( NAT )) : (1 <= B123 & B123 <= C116) } by FINSEQ_1:def 1;
L1012: (ex B124 being (Element of ( NAT )) st (R27 = B124 & 1 <= B124 & B124 <= C116)) by L1011 , L1010;
L1013: ( 1 - 1 ) < ( R27 - ( 0 ) ) by L1012 , XREAL_1:15;
reconsider D49 = R12 as (Element of ( NAT )) by L1003;
L1014: ( ( len C114 ) + R27 ) <= ( R21 + R27 ) by L999 , XREAL_1:7;
L1015: ( ( ( len C114 ) + R27 ) - R27 ) < ( D49 - ( 0 ) ) by L1014 , L1007 , L1013 , XREAL_1:15;
thus L1016: contradiction by L1015 , L1006;
end;
thus L1017: ( ( dom C114 ) /\ ( dom ( R21 Shift C115 ) ) ) = ( {} ) by L1002 , XBOOLE_0:def 1;
end;
theorem
L1018: (for B125 , B126 being FinSequence holds ( B125 ^ B126 ) = ( B125 \/ ( ( len B125 ) Shift B126 ) ))
proof
let R55 being FinSequence;
let R56 being FinSequence;
L1019: ( dom ( R55 \/ ( ( len R55 ) Shift R56 ) ) ) = ( Seg ( ( len R55 ) + ( len R56 ) ) ) by L979;
L1020: ( dom R55 ) misses ( dom ( ( len R55 ) Shift R56 ) ) by L998;
reconsider D50 = ( R55 \/ ( ( len R55 ) Shift R56 ) ) as FinSequence by L1020 , L1019 , FINSEQ_1:def 2 , GRFUNC_1:13;
L1021: ( dom D50 ) = ( Seg ( ( len R55 ) + ( len R56 ) ) ) by L979;
L1022: (for B127 being Nat holds (B127 in ( dom R55 ) implies ( D50 . B127 ) = ( R55 . B127 )))
proof
let C117 being Nat;
assume L1023: C117 in ( dom R55 );
L1024: [ C117 , ( R55 . C117 ) ] in R55 by L1023 , FUNCT_1:def 2;
L1025: [ C117 , ( R55 . C117 ) ] in D50 by L1024 , XBOOLE_0:def 3;
thus L1026: thesis by L1025 , FUNCT_1:1;
end;
L1027: (for B128 being Nat holds (B128 in ( dom R56 ) implies ( D50 . ( ( len R55 ) + B128 ) ) = ( R56 . B128 )))
proof
let C118 being Nat;
assume L1028: C118 in ( dom R56 );
L1029: ( dom ( ( len R55 ) Shift R56 ) ) = { ( ( len R55 ) + R22 ) where R22 is (Element of ( NAT )) : R22 in ( dom R56 ) } by L752;
L1030: ( ( len R55 ) + C118 ) in ( dom ( ( len R55 ) Shift R56 ) ) by L1029 , L1028;
L1031: [ ( ( len R55 ) + C118 ) , ( ( ( len R55 ) Shift R56 ) . ( ( len R55 ) + C118 ) ) ] in ( ( len R55 ) Shift R56 ) by L1030 , FUNCT_1:def 2;
L1032: [ ( ( len R55 ) + C118 ) , ( ( ( len R55 ) Shift R56 ) . ( ( len R55 ) + C118 ) ) ] in D50 by L1031 , XBOOLE_0:def 3;
L1033: ( D50 . ( ( len R55 ) + C118 ) ) = ( ( ( len R55 ) Shift R56 ) . ( ( len R55 ) + C118 ) ) by L1032 , FUNCT_1:1;
thus L1034: thesis by L1033 , L1028 , L752;
end;
thus L1035: thesis by L1027 , L1021 , L1022 , FINSEQ_1:def 7;
end;
theorem
L1036: (for R21 being (Element of ( NAT )) holds (for B129 being FinSequence holds (for B130 being FinSubsequence holds (R21 >= ( len B129 ) implies B129 misses ( R21 Shift B130 )))))
proof
let R21 being (Element of ( NAT ));
let C119 being FinSequence;
let C120 being FinSubsequence;
assume L1037: R21 >= ( len C119 );
L1038: ( dom C119 ) misses ( dom ( R21 Shift C120 ) ) by L1037 , L998;
thus L1039: thesis by L1038 , L132;
end;
theorem
L1040: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds (for R47 being (process of R33) holds ( ( R45 concur R46 ) concur R47 ) = ( R45 concur ( R46 concur R47 ) ))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
let R47 being (process of R33);
thus L1041: ( ( R45 concur R46 ) concur R47 ) c= ( R45 concur ( R46 concur R47 ) )
proof
let R12 being set;
assume L1042: R12 in ( ( R45 concur R46 ) concur R47 );
consider R38 being (firing-sequence of R33) such that L1043: R12 = R38 and L1044: (ex R51 being FinSubsequence st (ex R52 being FinSubsequence st (R38 = ( R51 \/ R52 ) & R51 misses R52 & ( Seq R51 ) in ( R45 concur R46 ) & ( Seq R52 ) in R47))) by L1042;
consider R51 being FinSubsequence, R52 being FinSubsequence such that L1045: R38 = ( R51 \/ R52 ) and L1046: R51 misses R52 and L1047: ( Seq R51 ) in ( R45 concur R46 ) and L1048: ( Seq R52 ) in R47 by L1044;
consider R39 being (firing-sequence of R33) such that L1049: ( Seq R51 ) = R39 and L1050: (ex R53 being FinSubsequence st (ex R54 being FinSubsequence st (R39 = ( R53 \/ R54 ) & R53 misses R54 & ( Seq R53 ) in R45 & ( Seq R54 ) in R46))) by L1047;
consider R53 being FinSubsequence, R54 being FinSubsequence such that L1051: R39 = ( R53 \/ R54 ) and L1052: R53 misses R54 and L1053: ( Seq R53 ) in R45 and L1054: ( Seq R54 ) in R46 by L1050;
consider C121 being Nat such that L1055: ( dom R51 ) c= ( Seg C121 ) by FINSEQ_1:def 12;
L1056: R53 c= ( Seq R51 ) by L1049 , L1051 , XBOOLE_1:7;
L1057: R54 c= ( Seq R51 ) by L1049 , L1051 , XBOOLE_1:7;
L1058: ( Sgm ( dom R51 ) ) is  one-to-one by L1055 , FINSEQ_3:92;
L1059: ( ( Sgm ( dom R51 ) ) .: ( dom R53 ) ) misses ( ( Sgm ( dom R51 ) ) .: ( dom R54 ) ) by L1058 , L1052 , L1056 , L1057 , L149 , FUNCT_1:66;
L1060: ( rng ( ( Sgm ( dom R51 ) ) | ( dom R53 ) ) ) = ( ( Sgm ( dom R51 ) ) .: ( dom R53 ) ) by RELAT_1:115;
L1061: ( rng ( ( Sgm ( dom R51 ) ) | ( dom R54 ) ) ) = ( ( Sgm ( dom R51 ) ) .: ( dom R54 ) ) by RELAT_1:115;
L1062: ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R53 ) ) ) ) misses ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R54 ) ) ) ) by L1061 , L1059 , L1060 , L133;
L1063: ( dom ( Sgm ( dom R51 ) ) ) = ( dom ( R53 \/ R54 ) ) by L1049 , L1051 , L141
.= ( ( dom R53 ) \/ ( dom R54 ) ) by RELAT_1:1;
L1064: ( ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R53 ) ) ) ) \/ ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R54 ) ) ) ) ) = ( R51 | ( ( rng ( ( Sgm ( dom R51 ) ) | ( dom R53 ) ) ) \/ ( rng ( ( Sgm ( dom R51 ) ) | ( dom R54 ) ) ) ) ) by RELAT_1:78
.= ( R51 | ( ( Sgm ( dom R51 ) ) .: ( ( dom R53 ) \/ ( dom R54 ) ) ) ) by L1060 , L1061 , RELAT_1:120
.= ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom ( Sgm ( dom R51 ) ) ) ) ) ) by L1063 , RELAT_1:115
.= ( R51 | ( rng ( Sgm ( dom R51 ) ) ) )
.= ( R51 | ( dom R51 ) ) by FINSEQ_1:50
.= R51;
L1065: R51 c= R38 by L1045 , XBOOLE_1:7;
L1066: ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R53 ) ) ) ) c= R51 by L1064 , XBOOLE_1:7;
L1067: ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R54 ) ) ) ) c= R51 by L1064 , XBOOLE_1:7;
L1068: ( rng R38 ) = ( ( rng R51 ) \/ ( rng R52 ) ) by L1045 , RELAT_1:12;
L1069: ( rng R51 ) c= ( rng R38 ) by L1068 , XBOOLE_1:7;
L1070: ( rng R51 ) = ( rng ( Seq R51 ) ) by L145;
L1071: ( rng ( Seq R51 ) ) c= ( rng R38 ) by L1069 , L145;
L1072: ( rng ( Seq R51 ) ) = ( ( rng R53 ) \/ ( rng R54 ) ) by L1049 , L1051 , RELAT_1:12;
L1073: ( rng R53 ) c= ( rng ( Seq R51 ) ) by L1072 , XBOOLE_1:7;
L1074: ( rng R53 ) = ( rng ( Seq R53 ) ) by L145;
L1075: ( rng ( Seq R53 ) ) c= ( rng R38 ) by L1074 , L1071 , L1073 , XBOOLE_1:1;
L1076: ( rng R54 ) c= ( rng ( Seq R51 ) ) by L1072 , XBOOLE_1:7;
L1077: ( rng R54 ) = ( rng ( Seq R54 ) ) by L145;
L1078: ( rng ( Seq R54 ) ) c= ( rng R38 ) by L1077 , L1071 , L1076 , XBOOLE_1:1;
reconsider D51 = ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R53 ) ) ) ) , D52 = ( R51 | ( rng ( ( Sgm ( dom R51 ) ) | ( dom R54 ) ) ) ) as FinSubsequence;
reconsider D53 = R38 as (FinSequence of ( rng R38 )) by FINSEQ_1:def 4;
reconsider D54 = ( Seq R51 ) as (FinSequence of ( rng R38 )) by L1069 , L1070 , FINSEQ_1:def 4;
reconsider D55 = ( Seq R53 ) as (FinSequence of ( rng R38 )) by L1075 , FINSEQ_1:def 4;
reconsider D56 = ( Seq R54 ) as (FinSequence of ( rng R38 )) by L1078 , FINSEQ_1:def 4;
reconsider D57 = R51 , D58 = D51 , D59 = D52 as (Subset of D53) by L1065 , L1066 , L1067 , XBOOLE_1:1;
reconsider D60 = R53 , D61 = R54 as (Subset of D54) by L1049 , L1051 , XBOOLE_1:7;
L1079: ( Seq D60 ) = D55;
L1080: D58 = ( D57 | ( rng ( ( Sgm ( dom D57 ) ) | ( dom D60 ) ) ) );
L1081: ( Seq R53 ) = ( Seq D51 ) by L1080 , L1079 , GRAPH_2:28;
L1082: ( Seq D61 ) = D56;
L1083: D59 = ( D57 | ( rng ( ( Sgm ( dom D57 ) ) | ( dom D61 ) ) ) );
L1084: ( R51 /\ R52 ) = ( {} ) by L1046 , XBOOLE_0:def 7;
L1085: ( ( D51 /\ R52 ) \/ ( D52 /\ R52 ) ) = ( {} ) by L1084 , L1064 , XBOOLE_1:23;
L1086: ( D51 /\ R52 ) = ( {} ) by L1085;
L1087: ( D52 /\ R52 ) = ( {} ) by L1085;
L1088: D52 misses R52 by L1087 , XBOOLE_0:def 7;
L1089: R51 c= R38 by L1045 , XBOOLE_1:7;
L1090: R52 c= R38 by L1045 , XBOOLE_1:7;
L1091: D52 c= R51 by L1064 , XBOOLE_1:7;
L1092: D52 c= R38 by L1091 , L1089 , XBOOLE_1:1;
L1093: ( dom D52 ) misses ( dom R52 ) by L1092 , L1088 , L1090 , L149;
reconsider D62 = ( D52 \/ R52 ) as Function by L1093 , GRFUNC_1:13;
L1094: ( dom R38 ) = ( ( dom R51 ) \/ ( dom R52 ) ) by L1045 , RELAT_1:1
.= ( ( ( dom D51 ) \/ ( dom D52 ) ) \/ ( dom R52 ) ) by L1064 , RELAT_1:1
.= ( ( dom D51 ) \/ ( ( dom D52 ) \/ ( dom R52 ) ) ) by XBOOLE_1:4
.= ( ( dom D51 ) \/ ( dom D62 ) ) by RELAT_1:1;
L1095: ( dom D62 ) c= ( dom R38 ) by L1094 , XBOOLE_1:7;
L1096: ( dom R38 ) = ( Seg ( len R38 ) ) by FINSEQ_1:def 3;
reconsider D63 = D62 as FinSubsequence by L1096 , L1095 , FINSEQ_1:def 12;
L1097: R38 = ( D51 \/ D63 ) by L1045 , L1064 , XBOOLE_1:4;
L1098: ( D51 /\ D63 ) = ( ( D51 /\ D52 ) \/ ( D51 /\ R52 ) ) by XBOOLE_1:23;
L1099: ( D51 /\ D52 ) = ( {} ) by L1062 , XBOOLE_0:def 7;
L1100: D51 misses D63 by L1099 , L1086 , L1098 , XBOOLE_0:def 7;
L1101: ( rng ( Seq D63 ) ) = ( rng D63 ) by L145;
L1102: ( rng R38 ) = ( ( rng D63 ) \/ ( rng D51 ) ) by L1097 , RELAT_1:12;
L1103: ( rng ( Seq D63 ) ) c= ( rng R38 ) by L1102 , L1101 , XBOOLE_1:7;
L1104: ( rng R38 ) c= R33 by FINSEQ_1:def 4;
L1105: ( rng ( Seq D63 ) ) c= R33 by L1104 , L1103 , XBOOLE_1:1;
L1106: ( Seq D63 ) is (FinSequence of R33) by L1105 , FINSEQ_1:def 4;
reconsider D64 = ( Seq D63 ) as (firing-sequence of R33) by L1106 , FINSEQ_1:def 11;
L1107: ( dom ( Seq D63 ) ) = ( Seg ( len ( Seq D63 ) ) ) by FINSEQ_1:def 3;
L1108: ( dom ( D52 * ( Sgm ( dom D63 ) ) ) ) c= ( dom ( Sgm ( dom D63 ) ) ) by RELAT_1:25;
L1109: ( dom ( R52 * ( Sgm ( dom D63 ) ) ) ) c= ( dom ( Sgm ( dom D63 ) ) ) by RELAT_1:25;
L1110: ( dom ( D52 * ( Sgm ( dom D63 ) ) ) ) c= ( dom ( Seq D63 ) ) by L1108 , L141;
L1111: ( dom ( R52 * ( Sgm ( dom D63 ) ) ) ) c= ( dom ( Seq D63 ) ) by L1109 , L141;
reconsider D65 = ( D52 * ( Sgm ( dom D63 ) ) ) , D66 = ( R52 * ( Sgm ( dom D63 ) ) ) as FinSubsequence by L1111 , L1107 , L1110 , FINSEQ_1:def 12;
L1112: D64 = ( D63 * ( Sgm ( dom D63 ) ) ) by FINSEQ_1:def 14
.= ( D65 \/ D66 ) by RELAT_1:32;
L1113: ( dom D65 ) = ( ( Sgm ( dom D63 ) ) " ( dom D52 ) ) by RELAT_1:147;
L1114: ( dom D66 ) = ( ( Sgm ( dom D63 ) ) " ( dom R52 ) ) by RELAT_1:147;
L1115: ( ( dom R52 ) /\ ( dom D52 ) ) = ( {} ) by L1093 , XBOOLE_0:def 7;
L1116: ( ( Sgm ( dom D63 ) ) " ( ( dom D52 ) /\ ( dom R52 ) ) ) = ( {} ) by L1115;
L1117: ( ( ( Sgm ( dom D63 ) ) " ( dom D52 ) ) /\ ( ( Sgm ( dom D63 ) ) " ( dom R52 ) ) ) = ( {} ) by L1116 , FUNCT_1:68;
L1118: ( ( Sgm ( dom D63 ) ) " ( dom D52 ) ) misses ( ( Sgm ( dom D63 ) ) " ( dom R52 ) ) by L1117 , XBOOLE_0:def 7;
L1119: ( dom D52 ) c= ( ( dom D52 ) \/ ( dom R52 ) ) by XBOOLE_1:7;
L1120: ( dom R52 ) c= ( ( dom D52 ) \/ ( dom R52 ) ) by XBOOLE_1:7;
L1121: ( dom D52 ) c= ( dom D63 ) by L1119 , RELAT_1:1;
L1122: ( dom R52 ) c= ( dom D63 ) by L1120 , RELAT_1:1;
L1123: ( dom D52 ) c= ( rng ( Sgm ( dom D63 ) ) ) by L1121 , FINSEQ_1:50;
L1124: ( dom R52 ) c= ( rng ( Sgm ( dom D63 ) ) ) by L1122 , FINSEQ_1:50;
L1125: ( dom D65 ) = ( ( Sgm ( dom D63 ) ) " ( dom D52 ) ) by RELAT_1:147;
L1126: ( dom D66 ) = ( ( Sgm ( dom D63 ) ) " ( dom R52 ) ) by RELAT_1:147;
L1127: ( rng ( ( Sgm ( dom D63 ) ) | ( dom D65 ) ) ) = ( rng ( ( dom D52 ) |` ( Sgm ( dom D63 ) ) ) ) by L1125 , L169
.= ( dom D52 ) by L1123 , RELAT_1:89;
L1128: ( dom D65 ) c= ( dom ( Sgm ( dom D63 ) ) ) by RELAT_1:25;
L1129: ( dom D66 ) c= ( dom ( Sgm ( dom D63 ) ) ) by RELAT_1:25;
L1130: ( ( Sgm ( dom D63 ) ) * ( Sgm ( dom D65 ) ) ) = ( Sgm ( rng ( ( Sgm ( dom D63 ) ) | ( dom D65 ) ) ) ) by L1094 , L1096 , L1128 , GRAPH_2:3 , XBOOLE_1:7;
L1131: ( Seq D65 ) = ( ( D52 * ( Sgm ( dom D63 ) ) ) * ( Sgm ( dom D65 ) ) ) by FINSEQ_1:def 14
.= ( D52 * ( ( Sgm ( dom D63 ) ) * ( Sgm ( dom D65 ) ) ) ) by RELAT_1:36
.= ( Seq D52 ) by L1127 , L1130 , FINSEQ_1:def 14;
L1132: ( rng ( ( Sgm ( dom D63 ) ) | ( dom D66 ) ) ) = ( rng ( ( dom R52 ) |` ( Sgm ( dom D63 ) ) ) ) by L1126 , L169
.= ( dom R52 ) by L1124 , RELAT_1:89;
L1133: ( ( Sgm ( dom D63 ) ) * ( Sgm ( dom D66 ) ) ) = ( Sgm ( rng ( ( Sgm ( dom D63 ) ) | ( dom D66 ) ) ) ) by L1094 , L1096 , L1129 , GRAPH_2:3 , XBOOLE_1:7;
L1134: ( Seq D66 ) = ( ( R52 * ( Sgm ( dom D63 ) ) ) * ( Sgm ( dom D66 ) ) ) by FINSEQ_1:def 14
.= ( R52 * ( ( Sgm ( dom D63 ) ) * ( Sgm ( dom D66 ) ) ) ) by RELAT_1:36
.= ( Seq R52 ) by L1132 , L1133 , FINSEQ_1:def 14;
L1135: ( Seq D65 ) in R46 by L1054 , L1082 , L1083 , L1131 , GRAPH_2:28;
L1136: (ex B131 , B132 being FinSubsequence st (D64 = ( B131 \/ B132 ) & B131 misses B132 & ( Seq B131 ) in R46 & ( Seq B132 ) in R47)) by L1135 , L1048 , L1112 , L1113 , L1114 , L1118 , L1134 , L132;
L1137: ( Seq D63 ) in ( R46 concur R47 ) by L1136;
thus L1138: thesis by L1137 , L1043 , L1053 , L1081 , L1097 , L1100;
end;

let R12 being set;
assume L1139: R12 in ( R45 concur ( R46 concur R47 ) );
consider R38 being (firing-sequence of R33) such that L1140: R12 = R38 and L1141: (ex R51 being FinSubsequence st (ex R52 being FinSubsequence st (R38 = ( R51 \/ R52 ) & R51 misses R52 & ( Seq R51 ) in R45 & ( Seq R52 ) in ( R46 concur R47 )))) by L1139;
consider R51 being FinSubsequence, R52 being FinSubsequence such that L1142: R38 = ( R51 \/ R52 ) and L1143: R51 misses R52 and L1144: ( Seq R51 ) in R45 and L1145: ( Seq R52 ) in ( R46 concur R47 ) by L1141;
consider R39 being (firing-sequence of R33) such that L1146: ( Seq R52 ) = R39 and L1147: (ex R53 being FinSubsequence st (ex R54 being FinSubsequence st (R39 = ( R53 \/ R54 ) & R53 misses R54 & ( Seq R53 ) in R46 & ( Seq R54 ) in R47))) by L1145;
consider R53 being FinSubsequence, R54 being FinSubsequence such that L1148: R39 = ( R53 \/ R54 ) and L1149: R53 misses R54 and L1150: ( Seq R53 ) in R46 and L1151: ( Seq R54 ) in R47 by L1147;
consider C122 being Nat such that L1152: ( dom R52 ) c= ( Seg C122 ) by FINSEQ_1:def 12;
L1153: R53 c= ( Seq R52 ) by L1146 , L1148 , XBOOLE_1:7;
L1154: R54 c= ( Seq R52 ) by L1146 , L1148 , XBOOLE_1:7;
L1155: ( Sgm ( dom R52 ) ) is  one-to-one by L1152 , FINSEQ_3:92;
L1156: ( ( Sgm ( dom R52 ) ) .: ( dom R53 ) ) misses ( ( Sgm ( dom R52 ) ) .: ( dom R54 ) ) by L1155 , L1149 , L1153 , L1154 , L149 , FUNCT_1:66;
L1157: ( rng ( ( Sgm ( dom R52 ) ) | ( dom R53 ) ) ) = ( ( Sgm ( dom R52 ) ) .: ( dom R53 ) ) by RELAT_1:115;
L1158: ( rng ( ( Sgm ( dom R52 ) ) | ( dom R54 ) ) ) = ( ( Sgm ( dom R52 ) ) .: ( dom R54 ) ) by RELAT_1:115;
L1159: ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R53 ) ) ) ) misses ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R54 ) ) ) ) by L1158 , L1156 , L1157 , L133;
L1160: ( dom ( Sgm ( dom R52 ) ) ) = ( dom ( Seq R52 ) ) by L141
.= ( ( dom R53 ) \/ ( dom R54 ) ) by L1146 , L1148 , RELAT_1:1;
L1161: ( ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R53 ) ) ) ) \/ ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R54 ) ) ) ) ) = ( R52 | ( ( rng ( ( Sgm ( dom R52 ) ) | ( dom R53 ) ) ) \/ ( rng ( ( Sgm ( dom R52 ) ) | ( dom R54 ) ) ) ) ) by RELAT_1:78
.= ( R52 | ( ( Sgm ( dom R52 ) ) .: ( ( dom R53 ) \/ ( dom R54 ) ) ) ) by L1157 , L1158 , RELAT_1:120
.= ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom ( Sgm ( dom R52 ) ) ) ) ) ) by L1160 , RELAT_1:115
.= ( R52 | ( rng ( Sgm ( dom R52 ) ) ) )
.= ( R52 | ( dom R52 ) ) by FINSEQ_1:50
.= R52;
L1162: R52 c= R38 by L1142 , XBOOLE_1:7;
L1163: ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R53 ) ) ) ) c= R52 by L1161 , XBOOLE_1:7;
L1164: ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R54 ) ) ) ) c= R52 by L1161 , XBOOLE_1:7;
L1165: ( rng R38 ) = ( ( rng R51 ) \/ ( rng R52 ) ) by L1142 , RELAT_1:12;
L1166: ( rng R52 ) c= ( rng R38 ) by L1165 , XBOOLE_1:7;
L1167: ( rng R52 ) = ( rng ( Seq R52 ) ) by L145;
L1168: ( rng ( Seq R52 ) ) c= ( rng R38 ) by L1166 , L145;
L1169: ( rng ( Seq R52 ) ) = ( ( rng R53 ) \/ ( rng R54 ) ) by L1146 , L1148 , RELAT_1:12;
L1170: ( rng R53 ) c= ( rng ( Seq R52 ) ) by L1169 , XBOOLE_1:7;
L1171: ( rng R53 ) = ( rng ( Seq R53 ) ) by L145;
L1172: ( rng ( Seq R53 ) ) c= ( rng R38 ) by L1171 , L1168 , L1170 , XBOOLE_1:1;
L1173: ( rng R54 ) c= ( rng ( Seq R52 ) ) by L1169 , XBOOLE_1:7;
L1174: ( rng R54 ) = ( rng ( Seq R54 ) ) by L145;
L1175: ( rng ( Seq R54 ) ) c= ( rng R38 ) by L1174 , L1168 , L1173 , XBOOLE_1:1;
reconsider D67 = ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R53 ) ) ) ) , D68 = ( R52 | ( rng ( ( Sgm ( dom R52 ) ) | ( dom R54 ) ) ) ) as FinSubsequence;
reconsider D69 = R38 as (FinSequence of ( rng R38 )) by FINSEQ_1:def 4;
reconsider D70 = ( Seq R52 ) as (FinSequence of ( rng R38 )) by L1166 , L1167 , FINSEQ_1:def 4;
reconsider D71 = ( Seq R53 ) as (FinSequence of ( rng R38 )) by L1172 , FINSEQ_1:def 4;
reconsider D72 = ( Seq R54 ) as (FinSequence of ( rng R38 )) by L1175 , FINSEQ_1:def 4;
reconsider D73 = R52 , D74 = D67 , D75 = D68 as (Subset of D69) by L1162 , L1163 , L1164 , XBOOLE_1:1;
reconsider D76 = R53 , D77 = R54 as (Subset of D70) by L1146 , L1148 , XBOOLE_1:7;
L1176: ( Seq D76 ) = D71;
L1177: D74 = ( D73 | ( rng ( ( Sgm ( dom D73 ) ) | ( dom D76 ) ) ) );
L1178: ( Seq D77 ) = D72;
L1179: D75 = ( D73 | ( rng ( ( Sgm ( dom D73 ) ) | ( dom D77 ) ) ) );
L1180: ( Seq R54 ) = ( Seq D68 ) by L1179 , L1178 , GRAPH_2:28;
L1181: ( R51 /\ R52 ) = ( {} ) by L1143 , XBOOLE_0:def 7;
L1182: ( ( R51 /\ D67 ) \/ ( R51 /\ D68 ) ) = ( {} ) by L1181 , L1161 , XBOOLE_1:23;
L1183: ( R51 /\ D67 ) = ( {} ) by L1182;
L1184: ( R51 /\ D68 ) = ( {} ) by L1182;
L1185: R51 misses D67 by L1183 , XBOOLE_0:def 7;
L1186: R51 c= R38 by L1142 , XBOOLE_1:7;
L1187: R52 c= R38 by L1142 , XBOOLE_1:7;
L1188: D67 c= R52 by L1161 , XBOOLE_1:7;
L1189: D67 c= R38 by L1188 , L1187 , XBOOLE_1:1;
L1190: ( dom R51 ) misses ( dom D67 ) by L1189 , L1185 , L1186 , L149;
reconsider D78 = ( R51 \/ D67 ) as Function by L1190 , GRFUNC_1:13;
L1191: ( dom R38 ) = ( ( dom R51 ) \/ ( dom R52 ) ) by L1142 , RELAT_1:1
.= ( ( dom R51 ) \/ ( ( dom D67 ) \/ ( dom D68 ) ) ) by L1161 , RELAT_1:1
.= ( ( ( dom R51 ) \/ ( dom D67 ) ) \/ ( dom D68 ) ) by XBOOLE_1:4
.= ( ( dom D78 ) \/ ( dom D68 ) ) by RELAT_1:1;
L1192: ( dom D78 ) c= ( dom R38 ) by L1191 , XBOOLE_1:7;
L1193: ( dom R38 ) = ( Seg ( len R38 ) ) by FINSEQ_1:def 3;
reconsider D79 = D78 as FinSubsequence by L1193 , L1192 , FINSEQ_1:def 12;
L1194: R38 = ( D79 \/ D68 ) by L1142 , L1161 , XBOOLE_1:4;
L1195: ( D79 /\ D68 ) = ( ( R51 /\ D68 ) \/ ( D67 /\ D68 ) ) by XBOOLE_1:23;
L1196: ( D67 /\ D68 ) = ( {} ) by L1159 , XBOOLE_0:def 7;
L1197: D79 misses D68 by L1196 , L1184 , L1195 , XBOOLE_0:def 7;
L1198: ( rng ( Seq D79 ) ) = ( rng D79 ) by L145;
L1199: ( rng R38 ) = ( ( rng D79 ) \/ ( rng D68 ) ) by L1194 , RELAT_1:12;
L1200: ( rng ( Seq D79 ) ) c= ( rng R38 ) by L1199 , L1198 , XBOOLE_1:7;
L1201: ( rng R38 ) c= R33 by FINSEQ_1:def 4;
L1202: ( rng ( Seq D79 ) ) c= R33 by L1201 , L1200 , XBOOLE_1:1;
L1203: ( Seq D79 ) is (FinSequence of R33) by L1202 , FINSEQ_1:def 4;
reconsider D80 = ( Seq D79 ) as (firing-sequence of R33) by L1203 , FINSEQ_1:def 11;
L1204: ( dom ( Seq D79 ) ) = ( Seg ( len ( Seq D79 ) ) ) by FINSEQ_1:def 3;
L1205: ( dom ( R51 * ( Sgm ( dom D79 ) ) ) ) c= ( dom ( Sgm ( dom D79 ) ) ) by RELAT_1:25;
L1206: ( dom ( D67 * ( Sgm ( dom D79 ) ) ) ) c= ( dom ( Sgm ( dom D79 ) ) ) by RELAT_1:25;
L1207: ( dom ( R51 * ( Sgm ( dom D79 ) ) ) ) c= ( dom ( Seq D79 ) ) by L1205 , L141;
L1208: ( dom ( D67 * ( Sgm ( dom D79 ) ) ) ) c= ( dom ( Seq D79 ) ) by L1206 , L141;
reconsider D81 = ( R51 * ( Sgm ( dom D79 ) ) ) , D82 = ( D67 * ( Sgm ( dom D79 ) ) ) as FinSubsequence by L1208 , L1204 , L1207 , FINSEQ_1:def 12;
L1209: D80 = ( D79 * ( Sgm ( dom D79 ) ) ) by FINSEQ_1:def 14
.= ( D81 \/ D82 ) by RELAT_1:32;
L1210: ( dom D81 ) = ( ( Sgm ( dom D79 ) ) " ( dom R51 ) ) by RELAT_1:147;
L1211: ( dom D82 ) = ( ( Sgm ( dom D79 ) ) " ( dom D67 ) ) by RELAT_1:147;
L1212: ( ( dom R51 ) /\ ( dom D67 ) ) = ( {} ) by L1190 , XBOOLE_0:def 7;
L1213: ( ( Sgm ( dom D79 ) ) " ( ( dom R51 ) /\ ( dom D67 ) ) ) = ( {} ) by L1212;
L1214: ( ( ( Sgm ( dom D79 ) ) " ( dom R51 ) ) /\ ( ( Sgm ( dom D79 ) ) " ( dom D67 ) ) ) = ( {} ) by L1213 , FUNCT_1:68;
L1215: ( ( Sgm ( dom D79 ) ) " ( dom R51 ) ) misses ( ( Sgm ( dom D79 ) ) " ( dom D67 ) ) by L1214 , XBOOLE_0:def 7;
L1216: ( dom R51 ) c= ( ( dom R51 ) \/ ( dom D67 ) ) by XBOOLE_1:7;
L1217: ( dom D67 ) c= ( ( dom R51 ) \/ ( dom D67 ) ) by XBOOLE_1:7;
L1218: ( dom R51 ) c= ( dom D79 ) by L1216 , RELAT_1:1;
L1219: ( dom D67 ) c= ( dom D79 ) by L1217 , RELAT_1:1;
L1220: ( dom R51 ) c= ( rng ( Sgm ( dom D79 ) ) ) by L1218 , FINSEQ_1:50;
L1221: ( dom D67 ) c= ( rng ( Sgm ( dom D79 ) ) ) by L1219 , FINSEQ_1:50;
L1222: ( dom D81 ) = ( ( Sgm ( dom D79 ) ) " ( dom R51 ) ) by RELAT_1:147;
L1223: ( dom D82 ) = ( ( Sgm ( dom D79 ) ) " ( dom D67 ) ) by RELAT_1:147;
L1224: ( rng ( ( Sgm ( dom D79 ) ) | ( dom D81 ) ) ) = ( rng ( ( dom R51 ) |` ( Sgm ( dom D79 ) ) ) ) by L1222 , L169
.= ( dom R51 ) by L1220 , RELAT_1:89;
L1225: ( dom D81 ) c= ( dom ( Sgm ( dom D79 ) ) ) by RELAT_1:25;
L1226: ( dom D82 ) c= ( dom ( Sgm ( dom D79 ) ) ) by RELAT_1:25;
L1227: ( ( Sgm ( dom D79 ) ) * ( Sgm ( dom D81 ) ) ) = ( Sgm ( rng ( ( Sgm ( dom D79 ) ) | ( dom D81 ) ) ) ) by L1191 , L1193 , L1225 , GRAPH_2:3 , XBOOLE_1:7;
L1228: ( Seq D81 ) = ( ( R51 * ( Sgm ( dom D79 ) ) ) * ( Sgm ( dom D81 ) ) ) by FINSEQ_1:def 14
.= ( R51 * ( ( Sgm ( dom D79 ) ) * ( Sgm ( dom D81 ) ) ) ) by RELAT_1:36
.= ( Seq R51 ) by L1224 , L1227 , FINSEQ_1:def 14;
L1229: ( rng ( ( Sgm ( dom D79 ) ) | ( dom D82 ) ) ) = ( rng ( ( dom D67 ) |` ( Sgm ( dom D79 ) ) ) ) by L1223 , L169
.= ( dom D67 ) by L1221 , RELAT_1:89;
L1230: ( ( Sgm ( dom D79 ) ) * ( Sgm ( dom D82 ) ) ) = ( Sgm ( rng ( ( Sgm ( dom D79 ) ) | ( dom D82 ) ) ) ) by L1191 , L1193 , L1226 , GRAPH_2:3 , XBOOLE_1:7;
L1231: ( Seq D82 ) = ( ( D67 * ( Sgm ( dom D79 ) ) ) * ( Sgm ( dom D82 ) ) ) by FINSEQ_1:def 14
.= ( D67 * ( ( Sgm ( dom D79 ) ) * ( Sgm ( dom D82 ) ) ) ) by RELAT_1:36
.= ( Seq D67 ) by L1229 , L1230 , FINSEQ_1:def 14;
L1232: ( Seq D82 ) in R46 by L1231 , L1150 , L1176 , L1177 , GRAPH_2:28;
L1233: (ex B133 , B134 being FinSubsequence st (D80 = ( B133 \/ B134 ) & B133 misses B134 & ( Seq B133 ) in R45 & ( Seq B134 ) in R46)) by L1232 , L1144 , L1209 , L1210 , L1211 , L1215 , L1228 , L132;
L1234: ( Seq D79 ) in ( R45 concur R46 ) by L1233;
thus L1235: thesis by L1234 , L1140 , L1151 , L1180 , L1194 , L1197;
end;
theorem
L1236: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds ( R45 before R46 ) c= ( R45 concur R46 )))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
let R12 being set;
assume L1237: R12 in ( R45 before R46 );
reconsider D83 = R12 as (firing-sequence of R33) by L1237;
consider R38 being (firing-sequence of R33), R39 being (firing-sequence of R33) such that L1238: R12 = ( R38 ^ R39 ) and L1239: R38 in R45 and L1240: R39 in R46 by L1237;
set D84 = R38;
set D85 = ( ( len R38 ) Shift R39 );
reconsider D86 = D84 as FinSequence;
L1241: D83 = ( D86 \/ D85 ) by L1238 , L1018;
L1242: D86 misses D85 by L1036;
L1243: ( Seq D86 ) in R45 by L1239 , FINSEQ_3:116;
L1244: ( Seq D85 ) in R46 by L1240 , L975;
thus L1245: thesis by L1244 , L1241 , L1242 , L1243;
end;
theorem
L1246: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds (for R48 being (process of R33) holds (for R49 being (process of R33) holds ((R45 c= R48 & R46 c= R49) implies ( R45 before R46 ) c= ( R48 before R49 ))))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
let R48 being (process of R33);
let R49 being (process of R33);
assume that
L1247: R45 c= R48
and
L1248: R46 c= R49;
let R12 being set;
assume L1249: R12 in ( R45 before R46 );
L1250: (ex R38 being (firing-sequence of R33) st (ex R39 being (firing-sequence of R33) st (R12 = ( R38 ^ R39 ) & R38 in R45 & R39 in R46))) by L1249;
thus L1251: thesis by L1250 , L1247 , L1248;
end;
theorem
L1252: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds (for R48 being (process of R33) holds (for R49 being (process of R33) holds ((R45 c= R48 & R46 c= R49) implies ( R45 concur R46 ) c= ( R48 concur R49 ))))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
let R48 being (process of R33);
let R49 being (process of R33);
assume that
L1253: R45 c= R48
and
L1254: R46 c= R49;
let R12 being set;
assume L1255: R12 in ( R45 concur R46 );
L1256: (ex R37 being (firing-sequence of R33) st (R12 = R37 & (ex B135 , B136 being FinSubsequence st (R37 = ( B135 \/ B136 ) & B135 misses B136 & ( Seq B135 ) in R45 & ( Seq B136 ) in R46)))) by L1255;
thus L1257: thesis by L1256 , L1253 , L1254;
end;
L1258: (for B137 , B138 being FinSequence holds (for B139 , B140 being FinSubsequence holds ((B139 c= B137 & B140 c= B138) implies ( dom ( B139 \/ ( ( len B137 ) Shift B140 ) ) ) c= ( dom ( B137 ^ B138 ) ))))
proof
let C123 , C124 being FinSequence;
let C125 , C126 being FinSubsequence;
assume that
L1259: C125 c= C123
and
L1260: C126 c= C124;
L1261: ( dom C125 ) c= ( dom C123 ) by L1259 , GRFUNC_1:2;
L1262: ( dom C126 ) c= ( dom C124 ) by L1260 , GRFUNC_1:2;
let R12 being set;
assume L1263: R12 in ( dom ( C125 \/ ( ( len C123 ) Shift C126 ) ) );
L1264: R12 in ( ( dom C125 ) \/ ( dom ( ( len C123 ) Shift C126 ) ) ) by L1263 , RELAT_1:1;
L1265: ( dom ( C123 ^ C124 ) ) = ( Seg ( ( len C123 ) + ( len C124 ) ) ) by FINSEQ_1:def 7;
L1266:
now
assume L1267: R12 in ( dom C125 );
L1268: ( dom C123 ) = ( Seg ( len C123 ) ) by FINSEQ_1:def 3;
L1269: ( len C123 ) <= ( ( len C123 ) + ( len C124 ) ) by INT_1:6;
L1270: ( Seg ( len C123 ) ) c= ( Seg ( ( len C123 ) + ( len C124 ) ) ) by L1269 , FINSEQ_1:5;
thus L1271: thesis by L1270 , L1261 , L1265 , L1267 , L1268 , TARSKI:def 3;
end;
L1272:
now
assume L1273: R12 in ( dom ( ( len C123 ) Shift C126 ) );
L1274: ( dom ( ( len C123 ) Shift C126 ) ) c= ( dom ( ( len C123 ) Shift C124 ) )
proof
let R12 being set;
assume L1275: R12 in ( dom ( ( len C123 ) Shift C126 ) );
L1276: ( dom ( ( len C123 ) Shift C124 ) ) = { ( ( len C123 ) + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C124 ) } by L752;
L1277: ( dom ( ( len C123 ) Shift C126 ) ) = { ( ( len C123 ) + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C126 ) } by L752;
L1278: (ex R25 being (Element of ( NAT )) st (R12 = ( ( len C123 ) + R25 ) & R25 in ( dom C126 ))) by L1277 , L1275;
thus L1279: thesis by L1278 , L1262 , L1276;
end;
L1280: ( dom ( C123 ^ C124 ) ) = ( dom ( C123 \/ ( ( len C123 ) Shift C124 ) ) ) by L1018
.= ( ( dom C123 ) \/ ( dom ( ( len C123 ) Shift C124 ) ) ) by RELAT_1:1;
L1281: ( dom ( ( len C123 ) Shift C124 ) ) c= ( dom ( C123 ^ C124 ) ) by L1280 , XBOOLE_1:7;
L1282: ( dom ( ( len C123 ) Shift C126 ) ) c= ( dom ( C123 ^ C124 ) ) by L1281 , L1274 , XBOOLE_1:1;
thus L1283: thesis by L1282 , L1273;
end;
thus L1284: thesis by L1272 , L1264 , L1266 , XBOOLE_0:def 3;
end;
L1285: (for B141 being FinSequence holds (for B142 , B143 being FinSubsequence holds (B142 c= B141 implies B142 misses ( ( len B141 ) Shift B143 )))) by L1036 , XBOOLE_1:63;
L1286: (for R21 being (Element of ( NAT )) holds (for B144 , B145 being FinSubsequence holds (B145 c= B144 implies ( dom ( R21 Shift B145 ) ) c= ( dom ( R21 Shift B144 ) ))))
proof
let R21 being (Element of ( NAT ));
let C127 , C128 being FinSubsequence;
assume L1287: C128 c= C127;
L1288: ( dom ( R21 Shift C128 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C128 ) } by L752;
L1289: ( dom ( R21 Shift C127 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C127 ) } by L752;
L1290: ( dom C128 ) c= ( dom C127 ) by L1287 , GRFUNC_1:2;
let R12 being set;
assume L1291: R12 in ( dom ( R21 Shift C128 ) );
L1292: (ex R26 being (Element of ( NAT )) st (R12 = ( R21 + R26 ) & R26 in ( dom C128 ))) by L1291 , L1288;
thus L1293: thesis by L1292 , L1289 , L1290;
end;
theorem
L1294: (for R21 being (Element of ( NAT )) holds (for B146 , B147 being FinSubsequence holds (B147 c= B146 implies ( R21 Shift B147 ) c= ( R21 Shift B146 ))))
proof
let R21 being (Element of ( NAT ));
let C129 , C130 being FinSubsequence;
assume L1295: C130 c= C129;
L1296: ( dom ( R21 Shift C130 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C130 ) } by L752;
L1297: ( dom ( R21 Shift C129 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C129 ) } by L752;
let R12 being set;
let R13 being set;
assume L1298: [ R12 , R13 ] in ( R21 Shift C130 );
L1299: R12 in ( dom ( R21 Shift C130 ) ) by L1298 , FUNCT_1:1;
L1300: R13 = ( ( R21 Shift C130 ) . R12 ) by L1298 , FUNCT_1:1;
consider R25 being (Element of ( NAT )) such that L1301: R12 = ( R21 + R25 ) and L1302: R25 in ( dom C130 ) by L1296 , L1299;
L1303: ( dom C130 ) c= ( dom C129 ) by L1295 , GRFUNC_1:2;
L1304: R12 in ( dom ( R21 Shift C129 ) ) by L1303 , L1297 , L1301 , L1302;
L1305: R13 = ( C130 . R25 ) by L1300 , L1301 , L1302 , L752
.= ( C129 . R25 ) by L1295 , L1302 , GRFUNC_1:2
.= ( ( R21 Shift C129 ) . R12 ) by L1301 , L1302 , L1303 , L752;
thus L1306: thesis by L1305 , L1304 , FUNCT_1:1;
end;
theorem
L1307: (for B148 , B149 being FinSequence holds ( ( len B148 ) Shift B149 ) c= ( B148 ^ B149 ))
proof
let C131 , C132 being FinSequence;
L1308: ( dom ( ( len C131 ) Shift C132 ) ) = { ( ( len C131 ) + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C132 ) } by L752;
L1309: ( dom ( ( len C131 ) Shift C132 ) ) = { R25 where R25 is (Element of ( NAT )) : (( ( len C131 ) + 1 ) <= R25 & R25 <= ( ( len C131 ) + ( len C132 ) )) } by L835;
L1310: ( dom ( C131 ^ C132 ) ) = ( Seg ( ( len C131 ) + ( len C132 ) ) ) by FINSEQ_1:def 7
.= { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( ( len C131 ) + ( len C132 ) )) } by FINSEQ_1:def 1;
let R12 being set;
let R13 being set;
assume L1311: [ R12 , R13 ] in ( ( len C131 ) Shift C132 );
L1312: R12 in ( dom ( ( len C131 ) Shift C132 ) ) by L1311 , FUNCT_1:1;
L1313: R13 = ( ( ( len C131 ) Shift C132 ) . R12 ) by L1311 , FUNCT_1:1;
consider R25 being (Element of ( NAT )) such that L1314: R12 = R25 and L1315: ( ( len C131 ) + 1 ) <= R25 and L1316: R25 <= ( ( len C131 ) + ( len C132 ) ) by L1309 , L1312;
L1317: 1 <= ( ( len C131 ) + 1 ) by INT_1:6;
L1318: 1 <= R25 by L1317 , L1315 , XXREAL_0:2;
L1319: R12 in ( dom ( C131 ^ C132 ) ) by L1318 , L1310 , L1314 , L1316;
consider R22 being (Element of ( NAT )) such that L1320: R12 = ( ( len C131 ) + R22 ) and L1321: R22 in ( dom C132 ) by L1308 , L1312;
L1322: R13 = ( C132 . R22 ) by L1313 , L1320 , L1321 , L752
.= ( ( C131 ^ C132 ) . R12 ) by L1320 , L1321 , FINSEQ_1:def 7;
thus L1323: thesis by L1322 , L1319 , FUNCT_1:1;
end;
theorem
L1324: (for R21 being (Element of ( NAT )) holds (for R51 being FinSubsequence holds (for R52 being FinSubsequence holds (( dom R51 ) misses ( dom R52 ) implies ( dom ( R21 Shift R51 ) ) misses ( dom ( R21 Shift R52 ) )))))
proof
let R21 being (Element of ( NAT ));
let R51 being FinSubsequence;
let R52 being FinSubsequence;
assume L1325: ( dom R51 ) misses ( dom R52 );
L1326: ( dom ( R21 Shift R51 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom R51 ) } by L752;
L1327: ( dom ( R21 Shift R52 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom R52 ) } by L752;
L1328:
now
given R12 being set such that
L1329: R12 in ( ( dom ( R21 Shift R51 ) ) /\ ( dom ( R21 Shift R52 ) ) );

L1330: R12 in ( dom ( R21 Shift R51 ) ) by L1329 , XBOOLE_0:def 4;
L1331: R12 in ( dom ( R21 Shift R52 ) ) by L1329 , XBOOLE_0:def 4;
L1332: (ex R26 being (Element of ( NAT )) st (R12 = ( R21 + R26 ) & R26 in ( dom R51 ))) by L1326 , L1330;
consider R27 being (Element of ( NAT )) such that L1333: R12 = ( R21 + R27 ) and L1334: R27 in ( dom R52 ) by L1327 , L1331;
L1335: R27 in ( ( dom R51 ) /\ ( dom R52 ) ) by L1332 , L1333 , L1334 , XBOOLE_0:def 4;
thus L1336: contradiction by L1335 , L1325 , XBOOLE_0:def 7;
end;
thus L1337: ( ( dom ( R21 Shift R51 ) ) /\ ( dom ( R21 Shift R52 ) ) ) = ( {} ) by L1328 , XBOOLE_0:def 1;
end;
theorem
L1338: (for R21 being (Element of ( NAT )) holds (for B150 , B151 , B152 being FinSubsequence holds ((B150 = ( B151 \/ B152 ) & B151 misses B152) implies ( ( R21 Shift B151 ) \/ ( R21 Shift B152 ) ) = ( R21 Shift B150 ))))
proof
let R21 being (Element of ( NAT ));
let C133 , C134 , C135 being FinSubsequence;
assume that
L1339: C133 = ( C134 \/ C135 )
and
L1340: C134 misses C135;
L1341: ( dom ( R21 Shift C133 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C133 ) } by L752;
L1342: ( dom ( R21 Shift C134 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C134 ) } by L752;
L1343: ( dom ( R21 Shift C135 ) ) = { ( R21 + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom C135 ) } by L752;
L1344: C134 c= C133 by L1339 , XBOOLE_1:7;
L1345: C135 c= C133 by L1339 , XBOOLE_1:7;
L1346: ( R21 Shift C134 ) c= ( R21 Shift C133 ) by L1339 , L1294 , XBOOLE_1:7;
L1347: ( R21 Shift C135 ) c= ( R21 Shift C133 ) by L1339 , L1294 , XBOOLE_1:7;
L1348: ( dom C134 ) misses ( dom C135 ) by L1340 , L1344 , L1345 , L149;
L1349: ( dom ( R21 Shift C134 ) ) misses ( dom ( R21 Shift C135 ) ) by L1348 , L1324;
reconsider D87 = ( ( R21 Shift C134 ) \/ ( R21 Shift C135 ) ) as Function by L1349 , GRFUNC_1:13;
let R12 being set;
let R13 being set;
thus L1350: ([ R12 , R13 ] in ( ( R21 Shift C134 ) \/ ( R21 Shift C135 ) ) implies [ R12 , R13 ] in ( R21 Shift C133 ))
proof
assume L1351: [ R12 , R13 ] in ( ( R21 Shift C134 ) \/ ( R21 Shift C135 ) );
L1352: R12 in ( dom D87 ) by L1351 , FUNCT_1:1;
L1353: R12 in ( ( dom ( R21 Shift C134 ) ) \/ ( dom ( R21 Shift C135 ) ) ) by L1352 , RELAT_1:1;
L1354:
now
assume L1355: R12 in ( dom ( R21 Shift C134 ) );
L1356: ( dom ( R21 Shift C134 ) ) c= ( dom ( R21 Shift C133 ) ) by L1346 , GRFUNC_1:2;
L1357: ( ( R21 Shift C134 ) . R12 ) = ( ( R21 Shift C133 ) . R12 ) by L1346 , L1355 , GRFUNC_1:2;
L1358: [ R12 , ( ( R21 Shift C133 ) . R12 ) ] in ( R21 Shift C134 ) by L1357 , L1355 , FUNCT_1:def 2;
L1359: [ R12 , ( ( R21 Shift C133 ) . R12 ) ] in D87 by L1358 , XBOOLE_0:def 3;
thus L1360: (R12 in ( dom ( R21 Shift C133 ) ) & R13 = ( ( R21 Shift C133 ) . R12 )) by L1359 , L1351 , L1355 , L1356 , FUNCT_1:def 1;
end;
L1361:
now
assume L1362: R12 in ( dom ( R21 Shift C135 ) );
L1363: ( dom ( R21 Shift C135 ) ) c= ( dom ( R21 Shift C133 ) ) by L1347 , GRFUNC_1:2;
L1364: ( ( R21 Shift C135 ) . R12 ) = ( ( R21 Shift C133 ) . R12 ) by L1347 , L1362 , GRFUNC_1:2;
L1365: [ R12 , ( ( R21 Shift C133 ) . R12 ) ] in ( R21 Shift C135 ) by L1364 , L1362 , FUNCT_1:def 2;
L1366: [ R12 , ( ( R21 Shift C133 ) . R12 ) ] in D87 by L1365 , XBOOLE_0:def 3;
thus L1367: (R12 in ( dom ( R21 Shift C133 ) ) & R13 = ( ( R21 Shift C133 ) . R12 )) by L1366 , L1351 , L1362 , L1363 , FUNCT_1:def 1;
end;
thus L1368: thesis by L1361 , L1353 , L1354 , FUNCT_1:1 , XBOOLE_0:def 3;
end;

assume L1369: [ R12 , R13 ] in ( R21 Shift C133 );
L1370: R12 in ( dom ( R21 Shift C133 ) ) by L1369 , FUNCT_1:1;
L1371: R13 = ( ( R21 Shift C133 ) . R12 ) by L1369 , FUNCT_1:1;
consider R25 being (Element of ( NAT )) such that L1372: R12 = ( R21 + R25 ) and L1373: R25 in ( dom C133 ) by L1341 , L1370;
L1374: ( dom C133 ) = ( ( dom C134 ) \/ ( dom C135 ) ) by L1339 , RELAT_1:1;
L1375: (R25 in ( dom C134 ) or R25 in ( dom C135 )) by L1374 , L1373 , XBOOLE_0:def 3;
L1376: (R12 in ( dom ( R21 Shift C134 ) ) or R12 in ( dom ( R21 Shift C135 ) )) by L1375 , L1342 , L1343 , L1372;
L1377: R12 in ( ( dom ( R21 Shift C134 ) ) \/ ( dom ( R21 Shift C135 ) ) ) by L1376 , XBOOLE_0:def 3;
L1378: R12 in ( dom D87 ) by L1377 , RELAT_1:1;
L1379:
now
assume L1380: R12 in ( dom ( R21 Shift C134 ) );
L1381: (ex R26 being (Element of ( NAT )) st (R12 = ( R21 + R26 ) & R26 in ( dom C134 ))) by L1380 , L1342;
thus L1382: R13 = ( C133 . R25 ) by L1371 , L1372 , L1373 , L752
.= ( C134 . R25 ) by L1339 , L1372 , L1381 , GRFUNC_1:15
.= ( ( R21 Shift C134 ) . R12 ) by L1372 , L1381 , L752
.= ( D87 . R12 ) by L1380 , GRFUNC_1:15;
end;
L1383:
now
assume L1384: R12 in ( dom ( R21 Shift C135 ) );
L1385: (ex R27 being (Element of ( NAT )) st (R12 = ( R21 + R27 ) & R27 in ( dom C135 ))) by L1384 , L1343;
thus L1386: R13 = ( C133 . R25 ) by L1371 , L1372 , L1373 , L752
.= ( C135 . R25 ) by L1339 , L1372 , L1385 , GRFUNC_1:15
.= ( ( R21 Shift C135 ) . R12 ) by L1372 , L1385 , L752
.= ( D87 . R12 ) by L1384 , GRFUNC_1:15;
end;
thus L1387: thesis by L1383 , L1342 , L1343 , L1372 , L1375 , L1378 , L1379 , FUNCT_1:1;
end;
theorem
L1388: (for R21 being (Element of ( NAT )) holds (for B153 being FinSubsequence holds ( dom ( Seq B153 ) ) = ( dom ( Seq ( R21 Shift B153 ) ) )))
proof
let R21 being (Element of ( NAT ));
let C136 being FinSubsequence;
L1389: ( card C136 ) = ( card ( R21 Shift C136 ) ) by L923;
L1390: ( len ( Seq C136 ) ) = ( card C136 ) by L103;
L1391: ( len ( Seq ( R21 Shift C136 ) ) ) = ( card ( R21 Shift C136 ) ) by L103;
thus L1392: ( dom ( Seq C136 ) ) = ( Seg ( len ( Seq C136 ) ) ) by FINSEQ_1:def 3
.= ( dom ( Seq ( R21 Shift C136 ) ) ) by L1389 , L1390 , L1391 , FINSEQ_1:def 3;
end;
theorem
L1393: (for R21 being (Element of ( NAT )) holds (for R25 being (Element of ( NAT )) holds (for B154 being FinSubsequence holds (R25 in ( dom ( Seq B154 ) ) implies (ex R22 being (Element of ( NAT )) st (R22 = ( ( Sgm ( dom B154 ) ) . R25 ) & ( ( Sgm ( dom ( R21 Shift B154 ) ) ) . R25 ) = ( R21 + R22 )))))))
proof
let R21 being (Element of ( NAT ));
let R25 being (Element of ( NAT ));
let C137 being FinSubsequence;
assume that
L1394: R25 in ( dom ( Seq C137 ) );
consider C138 being FinSubsequence such that L1395: ( dom C138 ) = ( dom C137 ) and L1396: ( rng C138 ) = ( dom ( R21 Shift C137 ) ) and L1397: (for R28 being (Element of ( NAT )) holds (R28 in ( dom C137 ) implies ( C138 . R28 ) = ( R21 + R28 ))) and L1398: C138 is  one-to-one by L881;
L1399: ( rng ( Seq C138 ) ) = ( dom ( R21 Shift C137 ) ) by L1396 , L145;
L1400: ( rng ( Sgm ( dom C137 ) ) ) = ( dom C137 ) by FINSEQ_1:50;
L1401: ( dom ( Seq C137 ) ) = ( dom ( C137 * ( Sgm ( dom C137 ) ) ) ) by FINSEQ_1:def 14
.= ( dom ( Sgm ( dom C137 ) ) ) by L1400 , RELAT_1:27;
L1402: (for R29 being (Element of ( NAT )) holds (R29 in ( dom ( Seq C137 ) ) implies (ex R23 being (Element of ( NAT )) st (R23 = ( ( Sgm ( dom C137 ) ) . R29 ) & ( ( Seq C138 ) . R29 ) = ( R21 + R23 )))))
proof
let R29 being (Element of ( NAT ));
assume that
L1403: R29 in ( dom ( Seq C137 ) );
L1404: ( ( Sgm ( dom C137 ) ) . R29 ) in ( rng ( Sgm ( dom C137 ) ) ) by L1401 , L1403 , FUNCT_1:def 3;
L1405: ( ( Sgm ( dom C137 ) ) . R29 ) in ( dom C137 ) by L1404 , FINSEQ_1:50;
L1406: ( rng ( Sgm ( dom C137 ) ) ) c= ( NAT ) by FINSEQ_1:def 4;
reconsider D88 = ( ( Sgm ( dom C137 ) ) . R29 ) as (Element of ( NAT )) by L1406 , L1404;
L1407: ( ( Seq C138 ) . R29 ) = ( ( C138 * ( Sgm ( dom C138 ) ) ) . R29 ) by FINSEQ_1:def 14
.= ( C138 . D88 ) by L1395 , L1401 , L1403 , FUNCT_1:13
.= ( R21 + D88 ) by L1397 , L1405;
thus L1408: thesis by L1407;
end;
L1409: ( rng C138 ) = ( rng ( Sgm ( dom ( R21 Shift C137 ) ) ) ) by L1396 , FINSEQ_1:50;
L1410: ( rng ( Sgm ( dom ( R21 Shift C137 ) ) ) ) c= ( NAT ) by FINSEQ_1:def 4;
L1411: ( rng ( Seq C138 ) ) c= ( NAT ) by L1410 , L1409 , L145;
reconsider D89 = ( Seq C138 ) as (FinSequence of ( NAT )) by L1411 , FINSEQ_1:def 4;
L1412: (ex B155 being Nat st ( dom ( R21 Shift C137 ) ) c= ( Seg B155 )) by FINSEQ_1:def 12;
L1413: ( dom ( Seq C138 ) ) = ( dom ( C138 * ( Sgm ( dom C138 ) ) ) ) by FINSEQ_1:def 14
.= ( dom ( Sgm ( dom C137 ) ) ) by L1395 , L1400 , RELAT_1:27;
L1414: (for B156 , B157 , B158 , B159 being Nat holds ((1 <= B156 & B156 < B157 & B157 <= ( len D89 ) & B158 = ( D89 . B156 ) & B159 = ( D89 . B157 )) implies B158 < B159))
proof
let C139 , C140 , C141 , C142 being Nat;
assume that
L1415: 1 <= C139
and
L1416: C139 < C140
and
L1417: C140 <= ( len D89 )
and
L1418: C141 = ( D89 . C139 )
and
L1419: C142 = ( D89 . C140 );
reconsider D90 = C139 , D91 = C140 as (Element of ( NAT )) by ORDINAL1:def 12;
L1420: ( dom D89 ) = ( Seg ( len D89 ) ) by FINSEQ_1:def 3
.= { B160 where B160 is (Element of ( NAT )) : (1 <= B160 & B160 <= ( len D89 )) } by FINSEQ_1:def 1;
L1421: ( D90 + 1 ) <= D91 by L1416 , INT_1:7;
L1422: ( D90 + 1 ) <= ( len D89 ) by L1421 , L1417 , XXREAL_0:2;
L1423: D90 <= ( ( len D89 ) - 1 ) by L1422 , XREAL_1:19;
L1424: ( ( len D89 ) + (( 0 ) qua Nat) ) <= ( ( len D89 ) + 1 ) by XREAL_1:7;
L1425: ( ( len D89 ) - 1 ) <= ( len D89 ) by L1424 , XREAL_1:20;
L1426: D90 <= ( len D89 ) by L1425 , L1423 , XXREAL_0:2;
L1427: D90 in ( dom ( Seq C137 ) ) by L1426 , L1401 , L1413 , L1415 , L1420;
L1428: 1 <= D91 by L1415 , L1416 , XXREAL_0:2;
L1429: D91 in ( dom ( Seq C137 ) ) by L1428 , L1401 , L1413 , L1417 , L1420;
consider C143 being (Element of ( NAT )) such that L1430: C143 = ( ( Sgm ( dom C137 ) ) . D90 ) and L1431: ( D89 . D90 ) = ( R21 + C143 ) by L1402 , L1427;
consider C144 being (Element of ( NAT )) such that L1432: C144 = ( ( Sgm ( dom C137 ) ) . D91 ) and L1433: ( D89 . D91 ) = ( R21 + C144 ) by L1402 , L1429;
L1434: (ex B161 being Nat st ( dom C137 ) c= ( Seg B161 )) by FINSEQ_1:def 12;
L1435: ( dom ( Seq C138 ) ) = ( Seg ( len D89 ) ) by FINSEQ_1:def 3;
L1436: ( len D89 ) = ( len ( Sgm ( dom C137 ) ) ) by L1435 , L1413 , FINSEQ_1:def 3;
L1437: C143 < C144 by L1436 , L1415 , L1416 , L1417 , L1430 , L1432 , L1434 , FINSEQ_1:def 13;
thus L1438: thesis by L1437 , L1418 , L1419 , L1431 , L1433 , XREAL_1:8;
end;
L1439: D89 = ( Sgm ( dom ( R21 Shift C137 ) ) ) by L1414 , L1399 , L1412 , FINSEQ_1:def 13;
thus L1440: thesis by L1439 , L1394 , L1402;
end;
theorem
L1441: (for R21 being (Element of ( NAT )) holds (for R25 being (Element of ( NAT )) holds (for B162 being FinSubsequence holds (R25 in ( dom ( Seq B162 ) ) implies ( ( Seq ( R21 Shift B162 ) ) . R25 ) = ( ( Seq B162 ) . R25 )))))
proof
let R21 being (Element of ( NAT ));
let R25 being (Element of ( NAT ));
let C145 being FinSubsequence;
assume L1442: R25 in ( dom ( Seq C145 ) );
consider R22 being (Element of ( NAT )) such that L1443: R22 = ( ( Sgm ( dom C145 ) ) . R25 ) and L1444: ( ( Sgm ( dom ( R21 Shift C145 ) ) ) . R25 ) = ( R21 + R22 ) by L1442 , L1393;
L1445: ( rng ( Sgm ( dom C145 ) ) ) = ( dom C145 ) by FINSEQ_1:50;
L1446: ( dom ( Seq C145 ) ) = ( dom ( Seq ( R21 Shift C145 ) ) ) by L1388
.= ( dom ( ( R21 Shift C145 ) * ( Sgm ( dom ( R21 Shift C145 ) ) ) ) ) by FINSEQ_1:def 14;
L1447: ( dom ( Seq C145 ) ) = ( dom ( C145 * ( Sgm ( dom C145 ) ) ) ) by FINSEQ_1:def 14
.= ( dom ( Sgm ( dom C145 ) ) ) by L1445 , RELAT_1:27;
L1448: R22 in ( rng ( Sgm ( dom C145 ) ) ) by L1447 , L1442 , L1443 , FUNCT_1:def 3;
L1449: R22 in ( dom C145 ) by L1448 , FINSEQ_1:50;
L1450: ( ( Seq ( R21 Shift C145 ) ) . R25 ) = ( ( ( R21 Shift C145 ) * ( Sgm ( dom ( R21 Shift C145 ) ) ) ) . R25 ) by FINSEQ_1:def 14
.= ( ( R21 Shift C145 ) . ( ( Sgm ( dom ( R21 Shift C145 ) ) ) . R25 ) ) by L1442 , L1446 , FUNCT_1:12
.= ( C145 . R22 ) by L1444 , L1449 , L752
.= ( ( C145 * ( Sgm ( dom C145 ) ) ) . R25 ) by L1442 , L1443 , L1447 , FUNCT_1:13
.= ( ( Seq C145 ) . R25 ) by FINSEQ_1:def 14;
thus L1451: thesis by L1450;
end;
theorem
L1452: (for R21 being (Element of ( NAT )) holds (for B163 being FinSubsequence holds ( Seq B163 ) = ( Seq ( R21 Shift B163 ) )))
proof
let R21 being (Element of ( NAT ));
let C146 being FinSubsequence;
L1453: ( dom ( Seq C146 ) ) = ( dom ( Seq ( R21 Shift C146 ) ) ) by L1388;
L1454: (for R12 being set holds (R12 in ( dom ( Seq C146 ) ) implies ( ( Seq ( R21 Shift C146 ) ) . R12 ) = ( ( Seq C146 ) . R12 ))) by L1441;
thus L1455: thesis by L1454 , L1453 , FUNCT_1:2;
end;
theorem
L1456: (for R21 being (Element of ( NAT )) holds (for R25 being (Element of ( NAT )) holds (for B164 being FinSubsequence holds (( dom B164 ) c= ( Seg R25 ) implies ( dom ( R21 Shift B164 ) ) c= ( Seg ( R21 + R25 ) )))))
proof
let R21 being (Element of ( NAT ));
let R25 being (Element of ( NAT ));
let C147 being FinSubsequence;
assume L1457: ( dom C147 ) c= ( Seg R25 );
L1458: ( dom ( R21 Shift C147 ) ) = { ( R21 + R22 ) where R22 is (Element of ( NAT )) : R22 in ( dom C147 ) } by L752;
L1459: ( Seg R25 ) = { R22 where R22 is (Element of ( NAT )) : (1 <= R22 & R22 <= R25) } by FINSEQ_1:def 1;
L1460: ( Seg ( R21 + R25 ) ) = { R22 where R22 is (Element of ( NAT )) : (1 <= R22 & R22 <= ( R21 + R25 )) } by FINSEQ_1:def 1;
let R12 being set;
assume L1461: R12 in ( dom ( R21 Shift C147 ) );
consider R23 being (Element of ( NAT )) such that L1462: R12 = ( R21 + R23 ) and L1463: R23 in ( dom C147 ) by L1461 , L1458;
L1464: R23 in ( Seg R25 ) by L1457 , L1463;
L1465: (ex R24 being (Element of ( NAT )) st (R23 = R24 & 1 <= R24 & R24 <= R25)) by L1464 , L1459;
L1466: ( 0 ) <= R21 by NAT_1:2;
L1467: ( (( 0 ) qua Nat) + 1 ) <= ( R21 + R23 ) by L1466 , L1465 , XREAL_1:7;
L1468: ( R21 + R23 ) <= ( R21 + R25 ) by L1465 , XREAL_1:7;
thus L1469: thesis by L1468 , L1460 , L1462 , L1467;
end;
theorem
L1470: (for B165 being FinSequence holds (for B166 , B167 being FinSubsequence holds (B166 c= B165 implies (ex B168 being FinSubsequence st B168 = ( B166 \/ ( ( len B165 ) Shift B167 ) )))))
proof
let C148 being FinSequence;
let C149 , C150 being FinSubsequence;
assume L1471: C149 c= C148;
L1472: ( dom C149 ) c= ( dom C148 ) by L1471 , GRFUNC_1:2;
L1473: ( dom C148 ) misses ( dom ( ( len C148 ) Shift C150 ) ) by L998;
reconsider D92 = ( C149 \/ ( ( len C148 ) Shift C150 ) ) as Function by L1473 , L1472 , GRFUNC_1:13 , XBOOLE_1:63;
L1474: ( dom C148 ) = ( Seg ( len C148 ) ) by FINSEQ_1:def 3;
consider C151 being Nat such that L1475: ( dom C150 ) c= ( Seg C151 ) by FINSEQ_1:def 12;
L1476: C151 in ( NAT ) by ORDINAL1:def 12;
L1477: ( dom ( ( len C148 ) Shift C150 ) ) c= ( Seg ( ( len C148 ) + C151 ) ) by L1476 , L1475 , L1456;
L1478: ( 0 ) <= C151 by NAT_1:2;
L1479: ( ( len C148 ) + (( 0 ) qua Nat) ) <= ( ( len C148 ) + C151 ) by L1478 , XREAL_1:7;
L1480: ( Seg ( len C148 ) ) c= ( Seg ( ( len C148 ) + C151 ) ) by L1479 , FINSEQ_1:5;
L1481: ( dom C149 ) c= ( Seg ( ( len C148 ) + C151 ) ) by L1480 , L1472 , L1474 , XBOOLE_1:1;
L1482: ( ( dom C149 ) \/ ( dom ( ( len C148 ) Shift C150 ) ) ) c= ( Seg ( ( len C148 ) + C151 ) ) by L1481 , L1477 , XBOOLE_1:8;
L1483: ( dom ( C149 \/ ( ( len C148 ) Shift C150 ) ) ) c= ( Seg ( ( len C148 ) + C151 ) ) by L1482 , RELAT_1:1;
reconsider D93 = D92 as FinSubsequence by L1483 , FINSEQ_1:def 12;
take D93;
thus L1484: thesis;
end;
L1485: (for B169 , B170 being FinSequence holds (for B171 , B172 being FinSubsequence holds ((B171 c= B169 & B172 c= B170) implies ( Sgm ( ( dom B171 ) \/ ( dom ( ( len B169 ) Shift B172 ) ) ) ) = ( ( Sgm ( dom B171 ) ) ^ ( Sgm ( dom ( ( len B169 ) Shift B172 ) ) ) ))))
proof
let C152 , C153 being FinSequence;
let C154 , C155 being FinSubsequence;
assume that
L1486: C154 c= C152
and
L1487: C155 c= C153;
L1488: (ex B173 being Nat st ( dom C154 ) c= ( Seg B173 )) by FINSEQ_1:def 12;
L1489: (ex B174 being Nat st ( dom ( ( len C152 ) Shift C155 ) ) c= ( Seg B174 )) by FINSEQ_1:def 12;
L1490: (for B175 , B176 being (Element of ( NAT )) holds ((B175 in ( dom C154 ) & B176 in ( dom ( ( len C152 ) Shift C155 ) )) implies B175 < B176))
proof
let C156 , C157 being (Element of ( NAT ));
assume that
L1491: C156 in ( dom C154 )
and
L1492: C157 in ( dom ( ( len C152 ) Shift C155 ) );
L1493: ( dom C152 ) = ( Seg ( len C152 ) ) by FINSEQ_1:def 3
.= { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( len C152 )) } by FINSEQ_1:def 1;
L1494: ( dom ( ( len C152 ) Shift C153 ) ) = { R25 where R25 is (Element of ( NAT )) : (( ( len C152 ) + 1 ) <= R25 & R25 <= ( ( len C152 ) + ( len C153 ) )) } by L835;
L1495: ( dom C154 ) c= ( dom C152 ) by L1486 , GRFUNC_1:2;
L1496: ( dom ( ( len C152 ) Shift C155 ) ) c= ( dom ( ( len C152 ) Shift C153 ) ) by L1487 , L1286;
L1497: C156 in ( dom C152 ) by L1491 , L1495;
L1498: C157 in ( dom ( ( len C152 ) Shift C153 ) ) by L1492 , L1496;
consider C158 being (Element of ( NAT )) such that L1499: C158 = C156 and L1500: 1 <= C158 and L1501: C158 <= ( len C152 ) by L1493 , L1497;
consider C159 being (Element of ( NAT )) such that L1502: C159 = C157 and L1503: ( ( len C152 ) + 1 ) <= C159 and L1504: C159 <= ( ( len C152 ) + ( len C153 ) ) by L1494 , L1498;
L1505: ( len C152 ) < ( ( len C152 ) + 1 ) by XREAL_1:29;
L1506: C158 <= ( ( len C152 ) + 1 ) by L1505 , L1501 , XXREAL_0:2;
L1507: C158 <= C159 by L1506 , L1503 , XXREAL_0:2;
L1508: ( dom C152 ) misses ( dom ( ( len C152 ) Shift C153 ) ) by L998;
L1509: C158 <> C159 by L1508 , L1491 , L1492 , L1495 , L1496 , L1499 , L1502 , L113;
thus L1510: thesis by L1509 , L1499 , L1502 , L1507 , XXREAL_0:1;
end;
thus L1511: thesis by L1490 , L1488 , L1489 , FINSEQ_3:42;
end;
theorem
L1512: (for B177 , B178 being FinSequence holds (for B179 , B180 being FinSubsequence holds ((B179 c= B177 & B180 c= B178) implies (ex B181 being FinSubsequence st (B181 = ( B179 \/ ( ( len B177 ) Shift B180 ) ) & ( dom ( Seq B181 ) ) = ( Seg ( ( len ( Seq B179 ) ) + ( len ( Seq B180 ) ) ) ))))))
proof
let C160 , C161 being FinSequence;
let C162 , C163 being FinSubsequence;
assume that
L1513: C162 c= C160
and
L1514: C163 c= C161;
consider C164 being FinSubsequence such that L1515: C164 = ( C162 \/ ( ( len C160 ) Shift C163 ) ) by L1513 , L1470;
L1516: (ex B182 being Nat st ( dom C162 ) c= ( Seg B182 )) by FINSEQ_1:def 12;
L1517: (ex B183 being Nat st ( dom ( ( len C160 ) Shift C163 ) ) c= ( Seg B183 )) by FINSEQ_1:def 12;
L1518: ( rng ( Sgm ( dom C164 ) ) ) = ( dom C164 ) by FINSEQ_1:50;
L1519: ( dom ( Seq C164 ) ) = ( dom ( C164 * ( Sgm ( dom C164 ) ) ) ) by FINSEQ_1:def 14;
L1520: ( dom ( Seq C164 ) ) = ( dom ( Sgm ( dom C164 ) ) ) by L1519 , L1518 , RELAT_1:27
.= ( dom ( Sgm ( ( dom C162 ) \/ ( dom ( ( len C160 ) Shift C163 ) ) ) ) ) by L1515 , RELAT_1:1
.= ( dom ( ( Sgm ( dom C162 ) ) ^ ( Sgm ( dom ( ( len C160 ) Shift C163 ) ) ) ) ) by L1513 , L1514 , L1485
.= ( Seg ( ( len ( Sgm ( dom C162 ) ) ) + ( len ( Sgm ( dom ( ( len C160 ) Shift C163 ) ) ) ) ) ) by FINSEQ_1:def 7;
L1521: ( len ( Sgm ( dom ( ( len C160 ) Shift C163 ) ) ) ) = ( card ( dom ( ( len C160 ) Shift C163 ) ) ) by L1517 , FINSEQ_3:39;
L1522: ( len ( Sgm ( dom C162 ) ) ) = ( card ( dom C162 ) ) by L1516 , FINSEQ_3:39;
L1523: ( len ( Sgm ( dom ( ( len C160 ) Shift C163 ) ) ) ) = ( card ( ( len C160 ) Shift C163 ) ) by L1521 , CARD_1:62;
L1524: ( len ( Sgm ( dom ( ( len C160 ) Shift C163 ) ) ) ) = ( card C163 ) by L1523 , L923;
L1525: ( len ( Sgm ( dom C162 ) ) ) = ( card C162 ) by L1522 , CARD_1:62;
L1526: ( len ( Sgm ( dom ( ( len C160 ) Shift C163 ) ) ) ) = ( len ( Seq C163 ) ) by L1524 , L103;
L1527: ( len ( Sgm ( dom C162 ) ) ) = ( len ( Seq C162 ) ) by L1525 , L103;
thus L1528: thesis by L1527 , L1515 , L1520 , L1526;
end;
theorem
L1529: (for B184 , B185 being FinSequence holds (for B186 , B187 being FinSubsequence holds ((B186 c= B184 & B187 c= B185) implies (ex B188 being FinSubsequence st (B188 = ( B186 \/ ( ( len B184 ) Shift B187 ) ) & ( dom ( Seq B188 ) ) = ( Seg ( ( len ( Seq B186 ) ) + ( len ( Seq B187 ) ) ) ) & ( Seq B188 ) = ( ( Seq B186 ) \/ ( ( len ( Seq B186 ) ) Shift ( Seq B187 ) ) ))))))
proof
let C165 , C166 being FinSequence;
let C167 , C168 being FinSubsequence;
assume that
L1530: C167 c= C165
and
L1531: C168 c= C166;
consider C169 being FinSubsequence such that L1532: C169 = ( C167 \/ ( ( len C165 ) Shift C168 ) ) and L1533: ( dom ( Seq C169 ) ) = ( Seg ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) ) by L1530 , L1531 , L1512;
L1534: ( Seg ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) ) = { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) )) } by FINSEQ_1:def 1;
L1535: ( dom ( Seq C167 ) ) = ( Seg ( len ( Seq C167 ) ) ) by FINSEQ_1:def 3
.= { R25 where R25 is (Element of ( NAT )) : (1 <= R25 & R25 <= ( len ( Seq C167 ) )) } by FINSEQ_1:def 1;
L1536: ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) = { R25 where R25 is (Element of ( NAT )) : (( ( len ( Seq C167 ) ) + 1 ) <= R25 & R25 <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) )) } by L835;
L1537: ( Seg ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) ) = ( ( dom ( Seq C167 ) ) \/ ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) )
proof
thus L1538: ( Seg ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) ) c= ( ( dom ( Seq C167 ) ) \/ ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) )
proof
let R12 being set;
assume L1539: R12 in ( Seg ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) );
consider R26 being (Element of ( NAT )) such that L1540: R12 = R26 and L1541: 1 <= R26 and L1542: R26 <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) by L1539 , L1534;
L1543: ((1 <= R26 & R26 <= ( len ( Seq C167 ) )) implies R26 in ( dom ( Seq C167 ) )) by L1535;
L1544: ((( ( len ( Seq C167 ) ) + 1 ) <= R26 & R26 <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) )) implies R26 in ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) )) by L1536;
thus L1545: thesis by L1544 , L1540 , L1541 , L1542 , L1543 , INT_1:7 , XBOOLE_0:def 3;
end;

let R12 being set;
assume L1546: R12 in ( ( dom ( Seq C167 ) ) \/ ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) );
L1547: ( 0 ) <= ( len ( Seq C167 ) ) by NAT_1:2;
L1548: ( 0 ) <= ( len ( Seq C168 ) ) by NAT_1:2;
L1549:
now
assume L1550: R12 in ( dom ( Seq C167 ) );
consider R26 being (Element of ( NAT )) such that L1551: R12 = R26 and L1552: 1 <= R26 and L1553: R26 <= ( len ( Seq C167 ) ) by L1550 , L1535;
L1554: ( ( len ( Seq C167 ) ) + (( 0 ) qua Nat) ) <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) by L1548 , XREAL_1:7;
L1555: R26 <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) by L1554 , L1553 , XXREAL_0:2;
thus L1556: thesis by L1555 , L1534 , L1551 , L1552;
end;
L1557:
now
assume L1558: R12 in ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) );
consider R27 being (Element of ( NAT )) such that L1559: R12 = R27 and L1560: ( ( len ( Seq C167 ) ) + 1 ) <= R27 and L1561: R27 <= ( ( len ( Seq C167 ) ) + ( len ( Seq C168 ) ) ) by L1558 , L1536;
L1562: ( (( 0 ) qua Nat) + 1 ) <= ( ( len ( Seq C167 ) ) + 1 ) by L1547 , XREAL_1:7;
L1563: 1 <= R27 by L1562 , L1560 , XXREAL_0:2;
thus L1564: thesis by L1563 , L1534 , L1559 , L1561;
end;
thus L1565: thesis by L1557 , L1546 , L1549 , XBOOLE_0:def 3;
end;
L1566: ( ( dom ( Seq C167 ) ) \/ ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) ) = ( dom ( ( Seq C167 ) \/ ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) ) by RELAT_1:1;
L1567: ( dom ( Seq C167 ) ) misses ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) by L998;
reconsider D94 = ( ( Seq C167 ) \/ ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) as Function by L1567 , GRFUNC_1:13;
L1568: (for R12 being set holds (R12 in ( dom ( Seq C169 ) ) implies ( ( Seq C169 ) . R12 ) = ( D94 . R12 )))
proof
let R12 being set;
assume L1569: R12 in ( dom ( Seq C169 ) );
L1570: R12 in ( dom ( C169 * ( Sgm ( dom C169 ) ) ) ) by L1569 , FINSEQ_1:def 14;
L1571: ( ( Seq C169 ) . R12 ) = ( ( C169 * ( Sgm ( dom C169 ) ) ) . R12 ) by FINSEQ_1:def 14
.= ( C169 . ( ( Sgm ( dom C169 ) ) . R12 ) ) by L1570 , FUNCT_1:12
.= ( C169 . ( ( Sgm ( ( dom C167 ) \/ ( dom ( ( len C165 ) Shift C168 ) ) ) ) . R12 ) ) by L1532 , RELAT_1:1
.= ( C169 . ( ( ( Sgm ( dom C167 ) ) ^ ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) . R12 ) ) by L1530 , L1531 , L1485;
L1572:
now
assume L1573: R12 in ( dom ( Seq C167 ) );
L1574: R12 in ( dom ( Sgm ( dom C167 ) ) ) by L1573 , L141;
L1575: ( ( Sgm ( dom C167 ) ) . R12 ) in ( rng ( Sgm ( dom C167 ) ) ) by L1574 , FUNCT_1:def 3;
L1576: ( ( Sgm ( dom C167 ) ) . R12 ) in ( dom C167 ) by L1575 , FINSEQ_1:50;
L1577: ( ( Seq C169 ) . R12 ) = ( C169 . ( ( Sgm ( dom C167 ) ) . R12 ) ) by L1571 , L1574 , FINSEQ_1:def 7
.= ( C167 . ( ( Sgm ( dom C167 ) ) . R12 ) ) by L1532 , L1576 , GRFUNC_1:15
.= ( ( C167 * ( Sgm ( dom C167 ) ) ) . R12 ) by L1574 , FUNCT_1:13
.= ( ( Seq C167 ) . R12 ) by FINSEQ_1:def 14;
thus L1578: thesis by L1577 , L1573 , GRFUNC_1:15;
end;
L1579:
now
assume L1580: R12 in ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) );
L1581: ( dom ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) ) = { ( ( len ( Seq C167 ) ) + R22 ) where R22 is (Element of ( NAT )) : R22 in ( dom ( Seq C168 ) ) } by L752;
consider R22 being (Element of ( NAT )) such that L1582: R12 = ( ( len ( Seq C167 ) ) + R22 ) and L1583: R22 in ( dom ( Seq C168 ) ) by L1581 , L1580;
L1584: ( D94 . R12 ) = ( ( ( len ( Seq C167 ) ) Shift ( Seq C168 ) ) . R12 ) by L1580 , GRFUNC_1:15
.= ( ( Seq C168 ) . R22 ) by L1582 , L1583 , L752;
L1585: (ex B189 being Nat st ( dom C167 ) c= ( Seg B189 )) by FINSEQ_1:def 12;
L1586: (ex B190 being Nat st ( dom ( ( len C165 ) Shift C168 ) ) c= ( Seg B190 )) by FINSEQ_1:def 12;
L1587: ( card ( dom C167 ) ) = ( len ( Sgm ( dom C167 ) ) ) by L1585 , FINSEQ_3:39;
L1588: ( card C167 ) = ( len ( Sgm ( dom C167 ) ) ) by L1587 , CARD_1:62;
L1589: ( len ( Seq C167 ) ) = ( card C167 ) by L103;
L1590: ( dom ( Seq C168 ) ) = ( Seg ( len ( Seq C168 ) ) ) by FINSEQ_1:def 3;
L1591: ( card C168 ) = ( len ( Seq C168 ) ) by L103;
L1592: ( card ( ( len C165 ) Shift C168 ) ) = ( len ( Seq C168 ) ) by L1591 , L923;
L1593: ( card ( dom ( ( len C165 ) Shift C168 ) ) ) = ( len ( Seq C168 ) ) by L1592 , CARD_1:62;
L1594: ( card ( dom ( ( len C165 ) Shift C168 ) ) ) = ( len ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) by L1586 , FINSEQ_3:39;
L1595: ( len ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) = ( len ( Seq C168 ) ) by L1586 , L1593 , FINSEQ_3:39;
L1596: ( dom ( Seq C168 ) ) = ( dom ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) by L1590 , L1593 , L1594 , FINSEQ_1:def 3;
L1597: R22 in ( dom ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) by L1583 , L1590 , L1595 , FINSEQ_1:def 3;
L1598: ( ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) . R22 ) in ( rng ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) by L1583 , L1596 , FUNCT_1:def 3;
L1599: ( ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) . R22 ) in ( dom ( ( len C165 ) Shift C168 ) ) by L1598 , FINSEQ_1:50;
L1600: ( ( Seq C169 ) . R12 ) = ( C169 . ( ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) . R22 ) ) by L1571 , L1582 , L1588 , L1589 , L1597 , FINSEQ_1:def 7
.= ( ( ( len C165 ) Shift C168 ) . ( ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) . R22 ) ) by L1532 , L1599 , GRFUNC_1:15
.= ( ( ( ( len C165 ) Shift C168 ) * ( Sgm ( dom ( ( len C165 ) Shift C168 ) ) ) ) . R22 ) by L1583 , L1596 , FUNCT_1:13
.= ( ( Seq ( ( len C165 ) Shift C168 ) ) . R22 ) by FINSEQ_1:def 14
.= ( ( Seq C168 ) . R22 ) by L1583 , L1441;
thus L1601: thesis by L1600 , L1584;
end;
thus L1602: thesis by L1579 , L1533 , L1537 , L1569 , L1572 , XBOOLE_0:def 3;
end;
L1603: ( Seq C169 ) = D94 by L1568 , L1533 , L1537 , L1566 , FUNCT_1:2;
thus L1604: thesis by L1603 , L1532 , L1533;
end;
theorem
L1605: (for B191 , B192 being FinSequence holds (for B193 , B194 being FinSubsequence holds ((B193 c= B191 & B194 c= B192) implies (ex B195 being FinSubsequence st (B195 = ( B193 \/ ( ( len B191 ) Shift B194 ) ) & ( ( Seq B193 ) ^ ( Seq B194 ) ) = ( Seq B195 ))))))
proof
let C170 , C171 being FinSequence;
let C172 , C173 being FinSubsequence;
assume that
L1606: C172 c= C170
and
L1607: C173 c= C171;
consider C174 being FinSubsequence such that L1608: C174 = ( C172 \/ ( ( len C170 ) Shift C173 ) ) and L1609: ( dom ( Seq C174 ) ) = ( Seg ( ( len ( Seq C172 ) ) + ( len ( Seq C173 ) ) ) ) and L1610: ( Seq C174 ) = ( ( Seq C172 ) \/ ( ( len ( Seq C172 ) ) Shift ( Seq C173 ) ) ) by L1606 , L1607 , L1529;
L1611: (for B196 being Nat holds (B196 in ( dom ( Seq C172 ) ) implies ( ( Seq C174 ) . B196 ) = ( ( Seq C172 ) . B196 ))) by L1610 , GRFUNC_1:15;
L1612: (for B197 being Nat holds (B197 in ( dom ( Seq C173 ) ) implies ( ( Seq C174 ) . ( ( len ( Seq C172 ) ) + B197 ) ) = ( ( Seq C173 ) . B197 )))
proof
let C175 being Nat;
assume L1613: C175 in ( dom ( Seq C173 ) );
L1614: ( dom ( ( len ( Seq C172 ) ) Shift ( Seq C173 ) ) ) = { ( ( len ( Seq C172 ) ) + R25 ) where R25 is (Element of ( NAT )) : R25 in ( dom ( Seq C173 ) ) } by L752;
L1615: ( ( len ( Seq C172 ) ) + C175 ) in ( dom ( ( len ( Seq C172 ) ) Shift ( Seq C173 ) ) ) by L1614 , L1613;
thus L1616: ( ( Seq C174 ) . ( ( len ( Seq C172 ) ) + C175 ) ) = ( ( ( len ( Seq C172 ) ) Shift ( Seq C173 ) ) . ( ( len ( Seq C172 ) ) + C175 ) ) by L1615 , L1610 , GRFUNC_1:15
.= ( ( Seq C173 ) . C175 ) by L1613 , L752;
end;
L1617: ( Seq C174 ) = ( ( Seq C172 ) ^ ( Seq C173 ) ) by L1612 , L1609 , L1611 , FINSEQ_1:def 7;
thus L1618: thesis by L1617 , L1608;
end;
theorem
L1619: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R45 being (process of R33) holds (for R46 being (process of R33) holds (for R48 being (process of R33) holds (for R49 being (process of R33) holds ( ( R45 concur R46 ) before ( R48 concur R49 ) ) c= ( ( R45 before R48 ) concur ( R46 before R49 ) )))))))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R45 being (process of R33);
let R46 being (process of R33);
let R48 being (process of R33);
let R49 being (process of R33);
let R12 being set;
assume L1620: R12 in ( ( R45 concur R46 ) before ( R48 concur R49 ) );
consider R38 being (firing-sequence of R33), R39 being (firing-sequence of R33) such that L1621: R12 = ( R38 ^ R39 ) and L1622: R38 in ( R45 concur R46 ) and L1623: R39 in ( R48 concur R49 ) by L1620;
consider R40 being (firing-sequence of R33) such that L1624: R38 = R40 and L1625: (ex R51 being FinSubsequence st (ex R52 being FinSubsequence st (R40 = ( R51 \/ R52 ) & R51 misses R52 & ( Seq R51 ) in R45 & ( Seq R52 ) in R46))) by L1622;
consider R51 being FinSubsequence, R52 being FinSubsequence such that L1626: R40 = ( R51 \/ R52 ) and L1627: R51 misses R52 and L1628: ( Seq R51 ) in R45 and L1629: ( Seq R52 ) in R46 by L1625;
consider C176 being (firing-sequence of R33) such that L1630: R39 = C176 and L1631: (ex R53 being FinSubsequence st (ex R54 being FinSubsequence st (C176 = ( R53 \/ R54 ) & R53 misses R54 & ( Seq R53 ) in R48 & ( Seq R54 ) in R49))) by L1623;
consider R53 being FinSubsequence, R54 being FinSubsequence such that L1632: C176 = ( R53 \/ R54 ) and L1633: R53 misses R54 and L1634: ( Seq R53 ) in R48 and L1635: ( Seq R54 ) in R49 by L1631;
reconsider D95 = ( R38 ^ R39 ) as (firing-sequence of R33);
reconsider D96 = ( ( len R38 ) Shift R53 ) , D97 = ( ( len R38 ) Shift R54 ) as FinSubsequence;
L1636: R51 c= R38 by L1624 , L1626 , XBOOLE_1:7;
L1637: R52 c= R38 by L1624 , L1626 , XBOOLE_1:7;
L1638: R53 c= R39 by L1630 , L1632 , XBOOLE_1:7;
L1639: R54 c= R39 by L1630 , L1632 , XBOOLE_1:7;
L1640: R38 c= ( R38 ^ R39 ) by FINSEQ_6:10;
L1641: R51 c= ( R38 ^ R39 ) by L1640 , L1636 , XBOOLE_1:1;
L1642: R52 c= ( R38 ^ R39 ) by L1637 , L1640 , XBOOLE_1:1;
reconsider D98 = R39 as FinSubsequence;
L1643: D96 c= ( ( len R38 ) Shift D98 ) by L1630 , L1632 , L1294 , XBOOLE_1:7;
L1644: D97 c= ( ( len R38 ) Shift D98 ) by L1630 , L1632 , L1294 , XBOOLE_1:7;
L1645: ( ( len R38 ) Shift R39 ) c= ( R38 ^ R39 ) by L1307;
L1646: D96 c= ( R38 ^ R39 ) by L1645 , L1643 , XBOOLE_1:1;
L1647: D97 c= ( R38 ^ R39 ) by L1644 , L1645 , XBOOLE_1:1;
L1648: ( dom R51 ) misses ( dom D96 ) by L1636 , L1641 , L1646 , L1285 , L149;
L1649: ( dom R52 ) misses ( dom D97 ) by L1637 , L1642 , L1647 , L1285 , L149;
reconsider D99 = ( R51 \/ D96 ) , D100 = ( R52 \/ D97 ) as Function by L1649 , L1648 , GRFUNC_1:13;
L1650: ( dom D95 ) = ( Seg ( len D95 ) ) by FINSEQ_1:def 3;
L1651: ( dom D99 ) c= ( dom D95 ) by L1636 , L1638 , L1258;
L1652: ( dom D100 ) c= ( dom D95 ) by L1637 , L1639 , L1258;
reconsider D101 = D99 , D102 = D100 as FinSubsequence by L1652 , L1650 , L1651 , FINSEQ_1:def 12;
L1653: ( D101 \/ D102 ) = ( ( ( R51 \/ ( ( len R38 ) Shift R53 ) ) \/ R52 ) \/ ( ( len R38 ) Shift R54 ) ) by XBOOLE_1:4
.= ( ( ( R51 \/ R52 ) \/ ( ( len R38 ) Shift R53 ) ) \/ ( ( len R38 ) Shift R54 ) ) by XBOOLE_1:4
.= ( R38 \/ ( ( ( len R38 ) Shift R53 ) \/ ( ( len R38 ) Shift R54 ) ) ) by L1624 , L1626 , XBOOLE_1:4
.= ( R38 \/ ( ( len R38 ) Shift R39 ) ) by L1630 , L1632 , L1633 , L1338
.= D95 by L1018;
L1654: ( D101 /\ R52 ) = ( ( R51 /\ R52 ) \/ ( ( ( len R38 ) Shift R53 ) /\ R52 ) ) by XBOOLE_1:23;
L1655: ( D101 /\ ( ( len R38 ) Shift R54 ) ) = ( ( R51 /\ ( ( len R38 ) Shift R54 ) ) \/ ( ( ( len R38 ) Shift R53 ) /\ ( ( len R38 ) Shift R54 ) ) ) by XBOOLE_1:23;
L1656: ( D101 /\ D102 ) = ( ( ( R51 /\ R52 ) \/ ( ( ( len R38 ) Shift R53 ) /\ R52 ) ) \/ ( ( R51 /\ ( ( len R38 ) Shift R54 ) ) \/ ( ( ( len R38 ) Shift R53 ) /\ ( ( len R38 ) Shift R54 ) ) ) ) by L1655 , L1654 , XBOOLE_1:23;
L1657: ( R51 /\ R52 ) = ( {} ) by L1627 , XBOOLE_0:def 7;
L1658: ( ( len R38 ) Shift R53 ) misses R52 by L1624 , L1626 , L1285 , XBOOLE_1:7;
L1659: R51 misses ( ( len R38 ) Shift R54 ) by L1624 , L1626 , L1285 , XBOOLE_1:7;
L1660: ( ( ( len R38 ) Shift R53 ) /\ R52 ) = ( {} ) by L1658 , XBOOLE_0:def 7;
L1661: ( R51 /\ ( ( len R38 ) Shift R54 ) ) = ( {} ) by L1659 , XBOOLE_0:def 7;
L1662: ( dom R53 ) misses ( dom R54 ) by L1633 , L1638 , L1639 , L149;
L1663: ( dom ( ( len R38 ) Shift R53 ) ) misses ( dom ( ( len R38 ) Shift R54 ) ) by L1662 , L1324;
L1664: ( ( len R38 ) Shift R53 ) misses ( ( len R38 ) Shift R54 ) by L1663 , L132;
L1665: ( D101 /\ D102 ) = ( {} ) by L1664 , L1656 , L1657 , L1660 , L1661 , XBOOLE_0:def 7;
L1666: D101 misses D102 by L1665 , XBOOLE_0:def 7;
L1667: (ex B198 being FinSubsequence st (B198 = D101 & ( ( Seq R51 ) ^ ( Seq R53 ) ) = ( Seq B198 ))) by L1636 , L1638 , L1605;
L1668: (ex B199 being FinSubsequence st (B199 = D102 & ( ( Seq R52 ) ^ ( Seq R54 ) ) = ( Seq B199 ))) by L1637 , L1639 , L1605;
L1669: ( Seq D101 ) in ( R45 before R48 ) by L1628 , L1634 , L1667;
L1670: ( Seq D102 ) in ( R46 before R49 ) by L1629 , L1635 , L1668;
thus L1671: thesis by L1670 , L1621 , L1653 , L1666 , L1669;
end;
registration
let R10 being set;
let R33 being (Petri_net of R10);
let C177 , C178 being non  empty (process of R33);
cluster ( C177 concur C178 ) -> non  empty;
coherence
proof
consider C179 being set such that L1672: C179 in C177 by XBOOLE_0:def 1;
consider C180 being set such that L1673: C180 in C178 by XBOOLE_0:def 1;
reconsider D103 = C179 , D104 = C180 as (firing-sequence of R33) by L1672 , L1673;
reconsider D105 = ( D103 ^ D104 ) as (firing-sequence of R33);
L1674: D105 = ( D103 \/ ( ( len D103 ) Shift D104 ) ) by L1018;
L1675: D103 misses ( ( len D103 ) Shift D104 ) by L1036;
L1676: D103 = ( Seq D103 ) by FINSEQ_3:116;
L1677: ( Seq ( ( len D103 ) Shift D104 ) ) in C178 by L1673 , L975;
L1678: D105 in ( C177 concur C178 ) by L1677 , L1672 , L1674 , L1675 , L1676;
thus L1679: thesis by L1678;
end;
end;
begin
definition
let R10 being set;
let C181 being (Petri_net of R10);
func NeutralProcess C181 -> non  empty (process of C181) equals 
{ ( <*> C181 ) };
coherence;
end;
definition
let R10 being set;
let C182 being (Petri_net of R10);
let C183 being (Element of C182);
func ElementaryProcess C183 -> non  empty (process of C182) equals 
{ <* C183 *> };
coherence;
end;
theorem
L1683: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R44 being (process of R33) holds ( ( NeutralProcess R33 ) before R44 ) = R44)))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R44 being (process of R33);
thus L1684: ( ( NeutralProcess R33 ) before R44 ) c= R44
proof
let R12 being set;
assume L1685: R12 in ( ( NeutralProcess R33 ) before R44 );
consider R38 being (firing-sequence of R33), R37 being (firing-sequence of R33) such that L1686: R12 = ( R38 ^ R37 ) and L1687: R38 in ( NeutralProcess R33 ) and L1688: R37 in R44 by L1685;
L1689: R38 = ( <*> R33 ) by L1687 , TARSKI:def 1;
thus L1690: thesis by L1689 , L1686 , L1688 , FINSEQ_1:34;
end;

let R12 being set;
assume L1691: R12 in R44;
reconsider D106 = R12 as (Element of ( R33 * )) by L1691;
L1692: ( <*> R33 ) in ( NeutralProcess R33 ) by TARSKI:def 1;
L1693: R12 = ( ( <*> R33 ) ^ D106 ) by FINSEQ_1:34;
thus L1694: thesis by L1693 , L1691 , L1692;
end;
theorem
L1695: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R44 being (process of R33) holds ( R44 before ( NeutralProcess R33 ) ) = R44)))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R44 being (process of R33);
thus L1696: ( R44 before ( NeutralProcess R33 ) ) c= R44
proof
let R12 being set;
assume L1697: R12 in ( R44 before ( NeutralProcess R33 ) );
consider R38 being (firing-sequence of R33), R37 being (firing-sequence of R33) such that L1698: R12 = ( R38 ^ R37 ) and L1699: R38 in R44 and L1700: R37 in ( NeutralProcess R33 ) by L1697;
L1701: R37 = ( <*> R33 ) by L1700 , TARSKI:def 1;
thus L1702: thesis by L1701 , L1698 , L1699 , FINSEQ_1:34;
end;

let R12 being set;
assume L1703: R12 in R44;
reconsider D107 = R12 as (Element of ( R33 * )) by L1703;
L1704: ( <*> R33 ) in ( NeutralProcess R33 ) by TARSKI:def 1;
L1705: R12 = ( D107 ^ ( <*> R33 ) ) by FINSEQ_1:34;
thus L1706: thesis by L1705 , L1703 , L1704;
end;
theorem
L1707: (for R10 being set holds (for R33 being (Petri_net of R10) holds (for R44 being (process of R33) holds ( ( NeutralProcess R33 ) concur R44 ) = R44)))
proof
let R10 being set;
let R33 being (Petri_net of R10);
let R44 being (process of R33);
thus L1708: ( ( NeutralProcess R33 ) concur R44 ) c= R44
proof
let R12 being set;
assume L1709: R12 in ( ( NeutralProcess R33 ) concur R44 );
consider R37 being (firing-sequence of R33) such that L1710: R12 = R37 and L1711: (ex B200 , B201 being FinSubsequence st (R37 = ( B200 \/ B201 ) & B200 misses B201 & ( Seq B200 ) in { ( <*> R33 ) } & ( Seq B201 ) in R44)) by L1709;
consider C184 , C185 being FinSubsequence such that L1712: R37 = ( C184 \/ C185 ) and L1713: C184 misses C185 and L1714: ( Seq C184 ) in { ( <*> R33 ) } and L1715: ( Seq C185 ) in R44 by L1711;
L1716: ( Seq C184 ) = ( {} ) by L1714 , TARSKI:def 1;
L1717: C184 = ( {} ) by L1716 , L9;
thus L1718: thesis by L1717 , L1710 , L1712 , L1715 , FINSEQ_3:116;
end;

let R12 being set;
assume L1719: R12 in R44;
reconsider D108 = R12 as (firing-sequence of R33) by L1719;
reconsider D109 = ( <*> R33 ) , D110 = D108 as FinSubsequence;
L1720: ( D109 /\ D110 ) = ( {} );
L1721: ( Seq D110 ) = D108 by FINSEQ_3:116;
L1722: ( ( {} ) \/ D110 ) = D108;
L1723: ( Seq D109 ) = D109 by FINSEQ_3:116;
L1724: D109 in { ( <*> R33 ) } by TARSKI:def 1;
L1725: D109 misses D110 by L1720 , XBOOLE_0:def 7;
thus L1726: thesis by L1725 , L1719 , L1721 , L1722 , L1723 , L1724;
end;
