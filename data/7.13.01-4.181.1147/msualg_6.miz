:: Translations, Endomorphisms, and Stable Equational Theories
::  by Grzegorz Bancerek
::
:: Received February 9, 1996
:: Copyright (c) 1996-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, XBOOLE_0, MSUALG_1, SUBSET_1, FUNCT_1, PBOOLE, MEMBER_1,
      RELAT_1, STRUCT_0, CARD_3, MARGREL1, PARTFUN1, MOD_4, MSUALG_3, NAT_1,
      FUNCT_4, RLTOPSP1, TARSKI, REWRITE1, FUNCOP_1, FINSEQ_1, ARYTM_3,
      FUNCT_7, CARD_1, XXREAL_0, ORDINAL4, MSUALG_4, CIRCUIT2, MCART_1,
      ZFMISC_1, EQREL_1, RELAT_2, MSUALG_5, MSUALG_6;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, NUMBERS, ORDINAL1, NAT_1,
      XTUPLE_0, MCART_1, STRUCT_0, RELAT_1, RELAT_2, RELSET_1, EQREL_1,
      REWRITE1, FUNCT_1, PBOOLE, PARTFUN1, FUNCT_2, FINSEQ_1, CARD_3, FUNCOP_1,
      MSUALG_1, MSUALG_3, MSUALG_4, MSUALG_5, FUNCT_7, XXREAL_0;
 constructors NAT_1, NAT_D, REWRITE1, FUNCT_7, MSUALG_3, MSUALG_5, RELSET_1,
      XTUPLE_0;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, PARTFUN1, FUNCT_2, FUNCOP_1,
      XXREAL_0, XREAL_0, NAT_1, FINSEQ_1, PBOOLE, REWRITE1, FUNCT_7, STRUCT_0,
      MSUALG_1, MSUALG_3, MSUALG_4, MSUALG_5, ORDINAL1, CARD_1, RELSET_1,
      XTUPLE_0;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, RELAT_1, REWRITE1, FUNCT_1, PBOOLE, MSUALG_3, MSUALG_4,
      FUNCT_7, FUNCOP_1, XTUPLE_0;
 theorems TARSKI, NAT_1, MCART_1, ZFMISC_1, RELAT_1, RELSET_1, EQREL_1,
      FUNCT_1, FINSEQ_1, FINSEQ_3, FUNCT_2, CARD_3, FUNCT_7, REWRITE1, PBOOLE,
      PRALG_2, MSUALG_3, MSUALG_4, MSUALG_5, FINSEQ_5, XBOOLE_0, PARTFUN1,
      RELAT_2, ORDERS_1, XREAL_1, XXREAL_0, ORDINAL1;
 schemes NAT_1, RECDEF_1, RELSET_1, FUNCT_1, FINSEQ_1, CARD_3, CLASSES1,
      PBOOLE, PUA2MSS1;

begin
definition
let C1 being non  empty ManySortedSign;
let C2 being MSAlgebra over C1;
let C3 being (SortSymbol of C1);
mode Element of C2 , C3
 is (Element of ( (the Sorts of C2) . C3 ));
end;
definition
let C4 being set;
let C5 being (ManySortedSet of C4);
let C6 , C7 being (ManySortedFunction of C5 , C5);
redefine func C7 ** C6 -> (ManySortedFunction of C5 , C5);

coherence
proof
set D1 = ( C7 ** C6 );
L2: ( dom C7 ) = C4 by PARTFUN1:def 2;
L3: ( dom C6 ) = C4 by PARTFUN1:def 2;
L4: ( dom D1 ) = ( C4 /\ C4 ) by L3 , L2 , PBOOLE:def 19
.= C4;
reconsider D2 = D1 as (ManySortedSet of C4) by L4 , PARTFUN1:def 2 , RELAT_1:def 18;
L5: D2 is (ManySortedFunction of C5 , C5)
proof
let C8 being set;
assume L6: C8 in C4;
reconsider D3 = ( C6 . C8 ) , D4 = ( C7 . C8 ) as (Function of ( C5 . C8 ) , ( C5 . C8 )) by L6 , PBOOLE:def 15;
L7: ( D2 . C8 ) = ( D4 * D3 ) by L4 , L6 , PBOOLE:def 19;
thus L8: thesis by L7;
end;
thus L9: thesis by L5;
end;
end;
theorem
L11: (for B1 being non  empty non  void ManySortedSign holds (for B2 being MSAlgebra over B1 holds (for B3 being (OperSymbol of B1) holds (for B4 being set holds (B4 in ( Args (B3 , B2) ) implies B4 is Function)))))
proof
let C9 being non  empty non  void ManySortedSign;
let C10 being MSAlgebra over C9;
let C11 being (OperSymbol of C9);
let C12 being set;
assume L12: C12 in ( Args (C11 , C10) );
L13: C12 in ( product ( (the Sorts of C10) * ( the_arity_of C11 ) ) ) by L12 , PRALG_2:3;
L14: (ex B5 being Function st (C12 = B5 & ( dom B5 ) = ( dom ( (the Sorts of C10) * ( the_arity_of C11 ) ) ) & (for B6 being set holds (B6 in ( dom ( (the Sorts of C10) * ( the_arity_of C11 ) ) ) implies ( B5 . B6 ) in ( ( (the Sorts of C10) * ( the_arity_of C11 ) ) . B6 ))))) by L13 , CARD_3:def 5;
thus L15: thesis by L14;
end;
theorem
L16: (for B7 being non  empty non  void ManySortedSign holds (for B8 being MSAlgebra over B7 holds (for B9 being (OperSymbol of B7) holds (for B10 being Function holds (B10 in ( Args (B9 , B8) ) implies (( dom B10 ) = ( dom ( the_arity_of B9 ) ) & (for B11 being set holds (B11 in ( dom ( the_arity_of B9 ) ) implies ( B10 . B11 ) in ( (the Sorts of B8) . ( ( the_arity_of B9 ) /. B11 ) )))))))))
proof
let C13 being non  empty non  void ManySortedSign;
let C14 being MSAlgebra over C13;
let C15 being (OperSymbol of C13);
let C16 being Function;
assume L17: C16 in ( Args (C15 , C14) );
L18: C16 in ( product ( (the Sorts of C14) * ( the_arity_of C15 ) ) ) by L17 , PRALG_2:3;
L19: (ex B12 being Function st (C16 = B12 & ( dom B12 ) = ( dom ( (the Sorts of C14) * ( the_arity_of C15 ) ) ) & (for B13 being set holds (B13 in ( dom ( (the Sorts of C14) * ( the_arity_of C15 ) ) ) implies ( B12 . B13 ) in ( ( (the Sorts of C14) * ( the_arity_of C15 ) ) . B13 ))))) by L18 , CARD_3:def 5;
thus L20: ( dom C16 ) = ( dom ( the_arity_of C15 ) ) by L19 , PARTFUN1:def 2;
let C17 being set;
assume L21: C17 in ( dom ( the_arity_of C15 ) );
L22: ( ( the_arity_of C15 ) . C17 ) = ( ( the_arity_of C15 ) /. C17 ) by L21 , PARTFUN1:def 6;
L23: ( C16 . C17 ) in ( ( (the Sorts of C14) * ( the_arity_of C15 ) ) . C17 ) by L19 , L20 , L21;
thus L24: thesis by L23 , L21 , L22 , FUNCT_1:13;
end;
definition
let C18 being non  empty non  void ManySortedSign;
let C19 being MSAlgebra over C18;
attr C19 is  feasible
means
:L25: (for B14 being (OperSymbol of C18) holds (( Args (B14 , C19) ) <> ( {} ) implies ( Result (B14 , C19) ) <> ( {} )));
end;
theorem
L27: (for B15 being non  empty non  void ManySortedSign holds (for B16 being (OperSymbol of B15) holds (for B17 being MSAlgebra over B15 holds (( Args (B16 , B17) ) <> ( {} ) iff (for B18 being (Element of ( NAT )) holds (B18 in ( dom ( the_arity_of B16 ) ) implies ( (the Sorts of B17) . ( ( the_arity_of B16 ) /. B18 ) ) <> ( {} )))))))
proof
let C20 being non  empty non  void ManySortedSign;
let C21 being (OperSymbol of C20);
let C22 being MSAlgebra over C20;
L28: ( dom ( (the Sorts of C22) * ( the_arity_of C21 ) ) ) = ( dom ( the_arity_of C21 ) ) by PRALG_2:3;
L29: ( Args (C21 , C22) ) = ( product ( (the Sorts of C22) * ( the_arity_of C21 ) ) ) by PRALG_2:3;
thus L30:now
assume L31: ( Args (C21 , C22) ) <> ( {} );
let C23 being (Element of ( NAT ));
assume L32: C23 in ( dom ( the_arity_of C21 ) );
L33: ( (the Sorts of C22) . ( ( the_arity_of C21 ) . C23 ) ) = ( ( (the Sorts of C22) * ( the_arity_of C21 ) ) . C23 ) by L32 , FUNCT_1:13;
L34: ( ( the_arity_of C21 ) /. C23 ) = ( ( the_arity_of C21 ) . C23 ) by L32 , PARTFUN1:def 6;
L35: ( ( (the Sorts of C22) * ( the_arity_of C21 ) ) . C23 ) in ( rng ( (the Sorts of C22) * ( the_arity_of C21 ) ) ) by L28 , L32 , FUNCT_1:def 3;
thus L36: ( (the Sorts of C22) . ( ( the_arity_of C21 ) /. C23 ) ) <> ( {} ) by L35 , L29 , L31 , L33 , L34 , CARD_3:26;
end;
assume L37: (for B19 being (Element of ( NAT )) holds (B19 in ( dom ( the_arity_of C21 ) ) implies ( (the Sorts of C22) . ( ( the_arity_of C21 ) /. B19 ) ) <> ( {} )));
assume L38: ( Args (C21 , C22) ) = ( {} );
L39: ( {} ) in ( rng ( (the Sorts of C22) * ( the_arity_of C21 ) ) ) by L38 , L29 , CARD_3:26;
consider C24 being set such that L40: C24 in ( dom ( the_arity_of C21 ) ) and L41: ( {} ) = ( ( (the Sorts of C22) * ( the_arity_of C21 ) ) . C24 ) by L39 , L28 , FUNCT_1:def 3;
reconsider D5 = C24 as (Element of ( NAT )) by L40;
L42: ( ( the_arity_of C21 ) /. D5 ) = ( ( the_arity_of C21 ) . D5 ) by L40 , PARTFUN1:def 6;
L43: ( (the Sorts of C22) . ( ( the_arity_of C21 ) /. D5 ) ) <> ( {} ) by L37 , L40;
thus L44: thesis by L43 , L40 , L41 , L42 , FUNCT_1:13;
end;
registration
let C25 being non  empty non  void ManySortedSign;
cluster  non-empty ->  feasible for MSAlgebra over C25;
coherence
proof
let C26 being MSAlgebra over C25;
assume L45: C26 is  non-empty;
reconsider D6 = C26 as  non-empty MSAlgebra over C25 by L45;
let C27 being (OperSymbol of C25);
L46: ( Result (C27 , D6) ) <> ( {} );
thus L47: thesis by L46;
end;
end;
registration
let C28 being non  empty non  void ManySortedSign;
cluster  non-empty for MSAlgebra over C28;
existence
proof
set D7 = the  non-empty MSAlgebra over C28;
take D7;
thus L49: thesis;
end;
end;
definition
let C29 being non  empty non  void ManySortedSign;
let C30 being MSAlgebra over C29;
mode Endomorphism of C30
 -> (ManySortedFunction of C30 , C30)
means :L51: it is_homomorphism C30 , C30;
existence
proof
take ( id (the Sorts of C30) );
thus L52: thesis by MSUALG_3:9;
end;
end;
theorem
L54: (for R1 being non  empty non  void ManySortedSign holds (for R2 being MSAlgebra over R1 holds ( id (the Sorts of R2) ) is (Endomorphism of R2)))
proof
let R1 being non  empty non  void ManySortedSign;
let R2 being MSAlgebra over R1;
thus L55: ( id (the Sorts of R2) ) is_homomorphism R2 , R2 by MSUALG_3:9;
end;
theorem
L56: (for R1 being non  empty non  void ManySortedSign holds (for R2 being MSAlgebra over R1 holds (for B20 , B21 being (ManySortedFunction of R2 , R2) holds (for B22 being (OperSymbol of R1) holds (for B23 being (Element of ( Args (B22 , R2) )) holds (B23 in ( Args (B22 , R2) ) implies ( B21 # ( B20 # B23 ) ) = ( ( B21 ** B20 ) # B23 )))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R2 being MSAlgebra over R1;
let C31 , C32 being (ManySortedFunction of R2 , R2);
set D8 = ( C32 ** C31 );
let C33 being (OperSymbol of R1);
let C34 being (Element of ( Args (C33 , R2) ));
assume L57: C34 in ( Args (C33 , R2) );
reconsider D9 = C34 , D10 = ( C31 # C34 ) , D11 = ( C32 # ( C31 # C34 ) ) as Function by L57 , L11;
L58: ( dom D9 ) = ( dom ( the_arity_of C33 ) ) by L57 , L16;
L59:
now
L60: ( dom ( (the Sorts of R2) * ( the_arity_of C33 ) ) ) = ( dom ( the_arity_of C33 ) ) by PRALG_2:3;
L61: ( Args (C33 , R2) ) = ( product ( (the Sorts of R2) * ( the_arity_of C33 ) ) ) by PRALG_2:3;
let C35 being Nat;
reconsider D12 = ( C31 . ( ( the_arity_of C33 ) /. C35 ) ) , D13 = ( C32 . ( ( the_arity_of C33 ) /. C35 ) ) as (Function of ( (the Sorts of R2) . ( ( the_arity_of C33 ) /. C35 ) ) , ( (the Sorts of R2) . ( ( the_arity_of C33 ) /. C35 ) ));
L62: ( D8 . ( ( the_arity_of C33 ) /. C35 ) ) = ( D13 * D12 ) by MSUALG_3:2;
assume L63: C35 in ( dom D9 );
L64: ( D12 . ( D9 . C35 ) ) = ( D10 . C35 ) by L63 , L57 , MSUALG_3:24;
L65: ( dom D10 ) = ( dom ( the_arity_of C33 ) ) by L57 , L16;
L66: ( D13 . ( D10 . C35 ) ) = ( D11 . C35 ) by L65 , L57 , L58 , L63 , MSUALG_3:24;
L67: ( (the Sorts of R2) . ( ( the_arity_of C33 ) . C35 ) ) = ( ( (the Sorts of R2) * ( the_arity_of C33 ) ) . C35 ) by L58 , L63 , FUNCT_1:13;
L68: ( ( the_arity_of C33 ) /. C35 ) = ( ( the_arity_of C33 ) . C35 ) by L58 , L63 , PARTFUN1:def 6;
L69: ( D9 . C35 ) in ( (the Sorts of R2) . ( ( the_arity_of C33 ) /. C35 ) ) by L68 , L57 , L58 , L63 , L61 , L60 , L67 , CARD_3:9;
thus L70: ( D11 . C35 ) = ( ( D8 . ( ( the_arity_of C33 ) /. C35 ) ) . ( D9 . C35 ) ) by L69 , L62 , L64 , L66 , FUNCT_2:15;
end;
thus L71: thesis by L59 , L57 , MSUALG_3:24;
end;
theorem
L72: (for R1 being non  empty non  void ManySortedSign holds (for R2 being MSAlgebra over R1 holds (for B24 , B25 being (Endomorphism of R2) holds ( B25 ** B24 ) is (Endomorphism of R2))))
proof
let R1 being non  empty non  void ManySortedSign;
let R2 being MSAlgebra over R1;
let C36 , C37 being (Endomorphism of R2);
let C38 being (OperSymbol of R1);
assume that
L73: ( Args (C38 , R2) ) <> ( {} );
set D14 = ( C37 ** C36 );
let C39 being (Element of ( Args (C38 , R2) ));
L74: ( Result (C38 , R2) ) = ( (the Sorts of R2) . ( the_result_sort_of C38 ) ) by PRALG_2:3;
L75: C37 is_homomorphism R2 , R2 by L51;
reconsider D15 = ( C36 . ( the_result_sort_of C38 ) ) , D16 = ( C37 . ( the_result_sort_of C38 ) ) , D17 = ( D14 . ( the_result_sort_of C38 ) ) as (Function of ( (the Sorts of R2) . ( the_result_sort_of C38 ) ) , ( (the Sorts of R2) . ( the_result_sort_of C38 ) ));
L76: C36 is_homomorphism R2 , R2 by L51;
per cases ;
suppose L77: ( (the Sorts of R2) . ( the_result_sort_of C38 ) ) = ( {} );

L78: ( dom D17 ) = ( {} ) by L77;
L79: ( D17 . ( ( Den (C38 , R2) ) . C39 ) ) = ( {} ) by L78 , FUNCT_1:def 2;
L80: ( dom ( Den (C38 , R2) ) ) = ( {} ) by L74 , L77;
thus L81: thesis by L80 , L79 , FUNCT_1:def 2;
end;
suppose L82: ( (the Sorts of R2) . ( the_result_sort_of C38 ) ) <> ( {} );

L83: ( D14 . ( the_result_sort_of C38 ) ) = ( D16 * D15 ) by MSUALG_3:2;
L84: ( ( D14 . ( the_result_sort_of C38 ) ) . ( ( Den (C38 , R2) ) . C39 ) ) = ( D16 . ( D15 . ( ( Den (C38 , R2) ) . C39 ) ) ) by L83 , L73 , L74 , L82 , FUNCT_2:5 , FUNCT_2:15
.= ( ( C37 . ( the_result_sort_of C38 ) ) . ( ( Den (C38 , R2) ) . ( C36 # C39 ) ) ) by L76 , L73 , MSUALG_3:def 7
.= ( ( Den (C38 , R2) ) . ( C37 # ( C36 # C39 ) ) ) by L75 , L73 , MSUALG_3:def 7;
thus L85: thesis by L84 , L73 , L56;
end;
end;
definition
let C40 being non  empty non  void ManySortedSign;
let C41 being MSAlgebra over C40;
let C42 , C43 being (Endomorphism of C41);
redefine func C43 ** C42 -> (Endomorphism of C41);

coherence by L72;
end;
definition
let C44 being non  empty non  void ManySortedSign;
func TranslationRel C44 -> (Relation of (the carrier of C44)) means 
:L88: (for B26 , B27 being (SortSymbol of C44) holds ([ B26 , B27 ] in it iff (ex B28 being (OperSymbol of C44) st (( the_result_sort_of B28 ) = B27 & (ex B29 being (Element of ( NAT )) st (B29 in ( dom ( the_arity_of B28 ) ) & ( ( the_arity_of B28 ) /. B29 ) = B26))))));
existence
proof
defpred S1[ set , set ] means (ex B30 being (OperSymbol of C44) st (( the_result_sort_of B30 ) = $2 & (ex B31 being (Element of ( NAT )) st (B31 in ( dom ( the_arity_of B30 ) ) & ( ( the_arity_of B30 ) /. B31 ) = $1))));
L89: (ex B32 being (Relation of (the carrier of C44) , (the carrier of C44)) st (for B33 being (SortSymbol of C44) holds (for B34 being (SortSymbol of C44) holds ([ B33 , B34 ] in B32 iff S1[ B33 , B34 ])))) from RELSET_1:sch 2;
thus L90: thesis by L89;
end;
correctness
proof
defpred S2[ set , set ] means (ex B35 being (OperSymbol of C44) st (( the_result_sort_of B35 ) = $2 & (ex B36 being (Element of ( NAT )) st (B36 in ( dom ( the_arity_of B35 ) ) & ( ( the_arity_of B35 ) /. B36 ) = $1))));
L91: (for B37 , B38 being (Relation of (the carrier of C44) , (the carrier of C44)) holds (((for B39 being (SortSymbol of C44) holds (for B40 being (SortSymbol of C44) holds ([ B39 , B40 ] in B37 iff S2[ B39 , B40 ]))) & (for B41 being (SortSymbol of C44) holds (for B42 being (SortSymbol of C44) holds ([ B41 , B42 ] in B38 iff S2[ B41 , B42 ])))) implies B37 = B38)) from PUA2MSS1:sch 2;
thus L92: thesis by L91;
end;
end;
theorem
L94: (for B43 being non  empty non  void ManySortedSign holds (for B44 being (OperSymbol of B43) holds (for B45 being MSAlgebra over B43 holds (for B46 being Function holds (B46 in ( Args (B44 , B45) ) implies (for B47 being (Element of ( NAT )) holds (for B48 being (Element of B45 , ( ( the_arity_of B44 ) /. B47 )) holds ( B46 +* (B47 , B48) ) in ( Args (B44 , B45) ))))))))
proof
let C45 being non  empty non  void ManySortedSign;
let C46 being (OperSymbol of C45);
let C47 being MSAlgebra over C45;
L95: ( dom ( (the Sorts of C47) * ( the_arity_of C46 ) ) ) = ( dom ( the_arity_of C46 ) ) by PRALG_2:3;
let C48 being Function;
assume that
L96: C48 in ( Args (C46 , C47) );
L97: ( dom C48 ) = ( dom ( the_arity_of C46 ) ) by L96 , L16;
let C49 being (Element of ( NAT ));
let C50 being (Element of C47 , ( ( the_arity_of C46 ) /. C49 ));
L98: ( Args (C46 , C47) ) = ( product ( (the Sorts of C47) * ( the_arity_of C46 ) ) ) by PRALG_2:3;
L99:
now
let C51 being set;
assume L100: C51 in ( dom C48 );
reconsider D18 = C51 as (Element of ( NAT )) by L100 , L97;
L101: ( ( (the Sorts of C47) * ( the_arity_of C46 ) ) . D18 ) = ( (the Sorts of C47) . ( ( the_arity_of C46 ) . D18 ) ) by L97 , L100 , FUNCT_1:13;
L102: ( ( the_arity_of C46 ) /. D18 ) = ( ( the_arity_of C46 ) . D18 ) by L97 , L100 , PARTFUN1:def 6;
L103: ( ( (the Sorts of C47) * ( the_arity_of C46 ) ) . C51 ) <> ( {} ) by L102 , L96 , L97 , L100 , L101 , L27;
per cases ;
suppose L104: C51 = C49;

L105: ( ( C48 +* (C49 , C50) ) . C51 ) = C50 by L104 , L100 , FUNCT_7:31;
thus L106: ( ( C48 +* (C49 , C50) ) . C51 ) in ( ( (the Sorts of C47) * ( the_arity_of C46 ) ) . C51 ) by L105 , L102 , L101 , L103 , L104;
end;
suppose L107: C51 <> C49;

L108: ( ( C48 +* (C49 , C50) ) . C51 ) = ( C48 . C51 ) by L107 , FUNCT_7:32;
thus L109: ( ( C48 +* (C49 , C50) ) . C51 ) in ( ( (the Sorts of C47) * ( the_arity_of C46 ) ) . C51 ) by L108 , L96 , L98 , L95 , L97 , L100 , CARD_3:9;
end;
end;
L111: ( dom ( C48 +* (C49 , C50) ) ) = ( dom C48 ) by FUNCT_7:30;
thus L112: thesis by L111 , L98 , L95 , L97 , L99 , CARD_3:9;
end;
theorem
L113: (for R1 being non  empty non  void ManySortedSign holds (for B49 , B50 being MSAlgebra over R1 holds (for B51 being (ManySortedFunction of B49 , B50) holds (for B52 being (OperSymbol of R1) holds ((( Args (B52 , B49) ) <> ( {} ) & ( Args (B52 , B50) ) <> ( {} )) implies (for B53 being (Element of ( NAT )) holds (B53 in ( dom ( the_arity_of B52 ) ) implies (for B54 being (Element of B49 , ( ( the_arity_of B52 ) /. B53 )) holds ( ( B51 . ( ( the_arity_of B52 ) /. B53 ) ) . B54 ) in ( (the Sorts of B50) . ( ( the_arity_of B52 ) /. B53 ) )))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let C52 , C53 being MSAlgebra over R1;
let C54 being (ManySortedFunction of C52 , C53);
let C55 being (OperSymbol of R1);
assume that
L114: ( Args (C55 , C52) ) <> ( {} )
and
L115: ( Args (C55 , C53) ) <> ( {} );
let C56 being (Element of ( NAT ));
assume L116: C56 in ( dom ( the_arity_of C55 ) );
L117: ( (the Sorts of C53) . ( ( the_arity_of C55 ) /. C56 ) ) <> ( {} ) by L116 , L115 , L27;
L118: ( (the Sorts of C52) . ( ( the_arity_of C55 ) /. C56 ) ) <> ( {} ) by L114 , L116 , L27;
thus L119: thesis by L118 , L117 , FUNCT_2:5;
end;
theorem
L120: (for B55 being non  empty non  void ManySortedSign holds (for B56 being (OperSymbol of B55) holds (for B57 being (Element of ( NAT )) holds (B57 in ( dom ( the_arity_of B56 ) ) implies (for B58 , B59 being MSAlgebra over B55 holds (for B60 being (ManySortedFunction of B58 , B59) holds (for B61 , B62 being (Element of ( Args (B56 , B58) )) holds ((B61 in ( Args (B56 , B58) ) & ( B60 # B61 ) in ( Args (B56 , B59) )) implies (for B63 , B64 , B65 being Function holds ((B63 = B61 & B64 = ( B60 # B61 ) & B65 = ( B60 # B62 )) implies (for B66 being (Element of B58 , ( ( the_arity_of B56 ) /. B57 )) holds (B62 = ( B63 +* (B57 , B66) ) implies (( B65 . B57 ) = ( ( B60 . ( ( the_arity_of B56 ) /. B57 ) ) . B66 ) & ( B60 # B62 ) = ( B64 +* (B57 , ( B65 . B57 )) ))))))))))))))
proof
let C57 being non  empty non  void ManySortedSign;
let C58 being (OperSymbol of C57);
let C59 being (Element of ( NAT ));
assume that
L121: C59 in ( dom ( the_arity_of C58 ) );
let C60 , C61 being MSAlgebra over C57;
let C62 being (ManySortedFunction of C60 , C61);
let C63 , C64 being (Element of ( Args (C58 , C60) ));
assume that
L122: C63 in ( Args (C58 , C60) )
and
L123: ( C62 # C63 ) in ( Args (C58 , C61) );
reconsider D19 = C64 as Function by L122 , L11;
L124: ( dom D19 ) = ( dom ( the_arity_of C58 ) ) by L122 , L16;
let C65 , C66 , C67 being Function;
assume that
L125: C65 = C63
and
L126: C66 = ( C62 # C63 )
and
L127: C67 = ( C62 # C64 );
reconsider D20 = ( C66 +* (C59 , ( C67 . C59 )) ) as Function;
L128: ( dom C65 ) = ( dom ( the_arity_of C58 ) ) by L122 , L125 , L16;
let C68 being (Element of C60 , ( ( the_arity_of C58 ) /. C59 ));
assume that
L129: C64 = ( C65 +* (C59 , C68) );
L130: ( D19 . C59 ) = C68 by L121 , L129 , L128 , FUNCT_7:31;
thus L131: ( C67 . C59 ) = ( ( C62 . ( ( the_arity_of C58 ) /. C59 ) ) . C68 ) by L130 , L121 , L122 , L123 , L127 , L124 , MSUALG_3:24;
L132: ( C67 . C59 ) in ( (the Sorts of C61) . ( ( the_arity_of C58 ) /. C59 ) ) by L131 , L121 , L122 , L123 , L113;
L133: ( C66 +* (C59 , ( C67 . C59 )) ) in ( Args (C58 , C61) ) by L132 , L123 , L126 , L94;
L134: ( dom D20 ) = ( dom ( the_arity_of C58 ) ) by L133 , L16;
L135:
now
let C69 being set;
assume that
L136: C69 in ( dom ( the_arity_of C58 ) )
and
L137: C69 <> C59;
reconsider D21 = C69 as (Element of ( NAT )) by L136;
L138: ( D19 . D21 ) = ( C65 . D21 ) by L129 , L137 , FUNCT_7:32;
L139: ( C67 . D21 ) = ( ( C62 . ( ( the_arity_of C58 ) /. D21 ) ) . ( D19 . D21 ) ) by L122 , L123 , L127 , L124 , L136 , MSUALG_3:24;
thus L140: ( C67 . C69 ) = ( C66 . C69 ) by L139 , L122 , L123 , L125 , L126 , L128 , L136 , L138 , MSUALG_3:24;
end;
L141: ( dom C66 ) = ( dom ( the_arity_of C58 ) ) by L123 , L126 , L16;
L142:
now
let C70 being set;
assume L143: C70 in ( dom ( the_arity_of C58 ) );
per cases ;
suppose L144: C70 = C59;

thus L145: ( C67 . C70 ) = ( ( C66 +* (C59 , ( C67 . C59 )) ) . C70 ) by L144 , L121 , L141 , FUNCT_7:31;
end;
suppose L146: C70 <> C59;

L147: ( C67 . C70 ) = ( C66 . C70 ) by L146 , L135 , L143;
thus L148: ( C67 . C70 ) = ( ( C66 +* (C59 , ( C67 . C59 )) ) . C70 ) by L147 , L146 , FUNCT_7:32;
end;
end;
L150: ( dom C67 ) = ( dom ( the_arity_of C58 ) ) by L123 , L127 , L16;
thus L151: thesis by L150 , L127 , L134 , L142 , FUNCT_1:2;
end;
definition
let C71 being non  empty non  void ManySortedSign;
let C72 being (OperSymbol of C71);
let C73 being (Element of ( NAT ));
let C74 being MSAlgebra over C71;
let C75 being Function;
func transl (C72 , C73 , C75 , C74) -> Function means 
:L152: (( dom it ) = ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) ) & (for B67 being set holds (B67 in ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) ) implies ( it . B67 ) = ( ( Den (C72 , C74) ) . ( C75 +* (C73 , B67) ) ))));
existence
proof
deffunc H1(set) = ( ( Den (C72 , C74) ) . ( C75 +* (C73 , $1) ) );
L153: (ex B68 being Function st (( dom B68 ) = ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) ) & (for B69 being set holds (B69 in ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) ) implies ( B68 . B69 ) = H1(B69))))) from FUNCT_1:sch 3;
thus L154: thesis by L153;
end;
uniqueness
proof
let C76 , C77 being Function;
assume that
L155: ( dom C76 ) = ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) )
and
L156: (for B70 being set holds (B70 in ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) ) implies ( C76 . B70 ) = ( ( Den (C72 , C74) ) . ( C75 +* (C73 , B70) ) )))
and
L157: ( dom C77 ) = ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) )
and
L158: (for B71 being set holds (B71 in ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) ) implies ( C77 . B71 ) = ( ( Den (C72 , C74) ) . ( C75 +* (C73 , B71) ) )));
L159:
now
let C78 being set;
assume L160: C78 in ( (the Sorts of C74) . ( ( the_arity_of C72 ) /. C73 ) );
L161: ( C76 . C78 ) = ( ( Den (C72 , C74) ) . ( C75 +* (C73 , C78) ) ) by L160 , L156;
thus L162: ( C76 . C78 ) = ( C77 . C78 ) by L161 , L158 , L160;
end;
thus L163: thesis by L159 , L155 , L157 , FUNCT_1:2;
end;
end;
theorem
L165: (for B72 being non  empty non  void ManySortedSign holds (for B73 being (OperSymbol of B72) holds (for B74 being (Element of ( NAT )) holds (for B75 being  feasible MSAlgebra over B72 holds (for B76 being Function holds (B76 in ( Args (B73 , B75) ) implies ( transl (B73 , B74 , B76 , B75) ) is (Function of ( (the Sorts of B75) . ( ( the_arity_of B73 ) /. B74 ) ) , ( (the Sorts of B75) . ( the_result_sort_of B73 ) ))))))))
proof
let C79 being non  empty non  void ManySortedSign;
let C80 being (OperSymbol of C79);
let C81 being (Element of ( NAT ));
let C82 being  feasible MSAlgebra over C79;
let C83 being Function;
assume L166: C83 in ( Args (C80 , C82) );
L167: ( Result (C80 , C82) ) <> ( {} ) by L166 , L25;
L168: ( dom ( transl (C80 , C81 , C83 , C82) ) ) = ( (the Sorts of C82) . ( ( the_arity_of C80 ) /. C81 ) ) by L152;
L169: ( rng ( transl (C80 , C81 , C83 , C82) ) ) c= ( (the Sorts of C82) . ( the_result_sort_of C80 ) )
proof
let C84 being set;
assume L170: C84 in ( rng ( transl (C80 , C81 , C83 , C82) ) );
consider C85 being set such that L171: C85 in ( dom ( transl (C80 , C81 , C83 , C82) ) ) and L172: C84 = ( ( transl (C80 , C81 , C83 , C82) ) . C85 ) by L170 , FUNCT_1:def 3;
reconsider D22 = C85 as (Element of C82 , ( ( the_arity_of C80 ) /. C81 )) by L171 , L152;
set D23 = ( C83 +* (C81 , D22) );
L173: ( ( Den (C80 , C82) ) . D23 ) in ( Result (C80 , C82) ) by L166 , L167 , L94 , FUNCT_2:5;
L174: C84 = ( ( Den (C80 , C82) ) . D23 ) by L168 , L171 , L172 , L152;
thus L175: thesis by L174 , L173 , PRALG_2:3;
end;
L176: ( Result (C80 , C82) ) = ( (the Sorts of C82) . ( the_result_sort_of C80 ) ) by PRALG_2:3;
thus L177: thesis by L176 , L167 , L168 , L169 , FUNCT_2:def 1 , RELSET_1:4;
end;
definition
let C86 being non  empty non  void ManySortedSign;
let C87 , C88 being (SortSymbol of C86);
let C89 being MSAlgebra over C86;
let C90 being Function;
pred C90 is_e.translation_of C89 , C87 , C88
means
:L178: (ex B77 being (OperSymbol of C86) st (( the_result_sort_of B77 ) = C88 & (ex B78 being (Element of ( NAT )) st (B78 in ( dom ( the_arity_of B77 ) ) & ( ( the_arity_of B77 ) /. B78 ) = C87 & (ex B79 being Function st (B79 in ( Args (B77 , C89) ) & C90 = ( transl (B77 , B78 , B79 , C89) )))))))
;end;
theorem
L180: (for B80 being non  empty non  void ManySortedSign holds (for B81 , B82 being (SortSymbol of B80) holds (for B83 being  feasible MSAlgebra over B80 holds (for B84 being Function holds (B84 is_e.translation_of B83 , B81 , B82 implies (B84 is (Function of ( (the Sorts of B83) . B81 ) , ( (the Sorts of B83) . B82 )) & ( (the Sorts of B83) . B81 ) <> ( {} ) & ( (the Sorts of B83) . B82 ) <> ( {} )))))))
proof
let C91 being non  empty non  void ManySortedSign;
let C92 , C93 being (SortSymbol of C91);
let C94 being  feasible MSAlgebra over C91;
let C95 being Function;
assume L181: C95 is_e.translation_of C94 , C92 , C93;
consider C96 being (OperSymbol of C91) such that L182: ( the_result_sort_of C96 ) = C93 and L183: (ex B85 being (Element of ( NAT )) st (B85 in ( dom ( the_arity_of C96 ) ) & ( ( the_arity_of C96 ) /. B85 ) = C92 & (ex B86 being Function st (B86 in ( Args (C96 , C94) ) & C95 = ( transl (C96 , B85 , B86 , C94) ))))) by L181 , L178;
L184: ( Result (C96 , C94) ) = ( (the Sorts of C94) . ( the_result_sort_of C96 ) ) by PRALG_2:3;
thus L185: thesis by L184 , L182 , L183 , L25 , L27 , L165;
end;
theorem
L186: (for B87 being non  empty non  void ManySortedSign holds (for B88 , B89 being (SortSymbol of B87) holds (for B90 being MSAlgebra over B87 holds (for B91 being Function holds (B91 is_e.translation_of B90 , B88 , B89 implies [ B88 , B89 ] in ( TranslationRel B87 ))))))
proof
let C97 being non  empty non  void ManySortedSign;
let C98 , C99 being (SortSymbol of C97);
let C100 being MSAlgebra over C97;
let C101 being Function;
assume L187: C101 is_e.translation_of C100 , C98 , C99;
L188: (ex B92 being (OperSymbol of C97) st (( the_result_sort_of B92 ) = C99 & (ex B93 being (Element of ( NAT )) st (B93 in ( dom ( the_arity_of B92 ) ) & ( ( the_arity_of B92 ) /. B93 ) = C98 & (ex B94 being Function st (B94 in ( Args (B92 , C100) ) & C101 = ( transl (B92 , B93 , B94 , C100) ))))))) by L187 , L178;
thus L189: thesis by L188 , L88;
end;
theorem
L190: (for B95 being non  empty non  void ManySortedSign holds (for B96 , B97 being (SortSymbol of B95) holds (for B98 being  non-empty MSAlgebra over B95 holds ([ B96 , B97 ] in ( TranslationRel B95 ) implies (ex B99 being Function st B99 is_e.translation_of B98 , B96 , B97)))))
proof
let C102 being non  empty non  void ManySortedSign;
let C103 , C104 being (SortSymbol of C102);
let C105 being  non-empty MSAlgebra over C102;
assume L191: [ C103 , C104 ] in ( TranslationRel C102 );
consider C106 being (OperSymbol of C102) such that L192: ( the_result_sort_of C106 ) = C104 and L193: (ex B100 being (Element of ( NAT )) st (B100 in ( dom ( the_arity_of C106 ) ) & ( ( the_arity_of C106 ) /. B100 ) = C103)) by L191 , L88;
set D24 = the (Element of ( Args (C106 , C105) ));
consider C107 being (Element of ( NAT )) such that L194: C107 in ( dom ( the_arity_of C106 ) ) and L195: ( ( the_arity_of C106 ) /. C107 ) = C103 by L193;
take ( transl (C106 , C107 , D24 , C105) );
take C106;
thus L196: thesis by L192 , L194 , L195;
end;
theorem
L197: (for B101 being non  empty non  void ManySortedSign holds (for B102 being  feasible MSAlgebra over B101 holds (for B103 , B104 being (SortSymbol of B101) holds (for B105 being (RedSequence of ( TranslationRel B101 )) holds (for B106 being  Function-yielding FinSequence holds ((( len B105 ) = ( ( len B106 ) + 1 ) & B103 = ( B105 . 1 ) & B104 = ( B105 . ( len B105 ) ) & (for B107 being (Element of ( NAT )) holds (for B108 being Function holds (for B109 , B110 being (SortSymbol of B101) holds ((B107 in ( dom B106 ) & B108 = ( B106 . B107 ) & B109 = ( B105 . B107 ) & B110 = ( B105 . ( B107 + 1 ) )) implies B108 is_e.translation_of B102 , B109 , B110))))) implies (( compose (B106 , ( (the Sorts of B102) . B103 )) ) is (Function of ( (the Sorts of B102) . B103 ) , ( (the Sorts of B102) . B104 )) & (B106 <> ( {} ) implies (( (the Sorts of B102) . B103 ) <> ( {} ) & ( (the Sorts of B102) . B104 ) <> ( {} ))))))))))
proof
let C108 being non  empty non  void ManySortedSign;
let C109 being  feasible MSAlgebra over C108;
let C110 , C111 being (SortSymbol of C108);
let C112 being (RedSequence of ( TranslationRel C108 ));
let C113 being  Function-yielding FinSequence;
assume that
L198: ( len C112 ) = ( ( len C113 ) + 1 )
and
L199: C110 = ( C112 . 1 )
and
L200: C111 = ( C112 . ( len C112 ) )
and
L201: (for B111 being (Element of ( NAT )) holds (for B112 being Function holds (for B113 , B114 being (SortSymbol of C108) holds ((B111 in ( dom C113 ) & B112 = ( C113 . B111 ) & B113 = ( C112 . B111 ) & B114 = ( C112 . ( B111 + 1 ) )) implies B112 is_e.translation_of C109 , B113 , B114))));
per cases ;
suppose L202: C113 = ( {} );

L203: ( len C113 ) = ( 0 ) by L202;
L204: ( compose (C113 , ( (the Sorts of C109) . C110 )) ) = ( id ( (the Sorts of C109) . C110 ) ) by L202 , FUNCT_7:39;
thus L205: thesis by L204 , L198 , L199 , L200 , L203;
end;
suppose L206: C113 <> ( {} );

L207: ( rng C113 ) <> ( {} ) by L206;
L208: 1 in ( dom C113 ) by L207 , FINSEQ_3:32;
L209: ( 1 + 1 ) in ( dom C112 ) by L208 , L198 , FUNCT_7:22;
L210: 1 in ( dom C112 ) by L198 , L208 , FUNCT_7:22;
L211: [ ( C112 . 1 ) , ( C112 . ( 1 + 1 ) ) ] in ( TranslationRel C108 ) by L210 , L209 , REWRITE1:def 2;
reconsider D25 = ( C112 . 1 ) , D26 = ( C112 . ( 1 + 1 ) ) as (SortSymbol of C108) by L211 , ZFMISC_1:87;
deffunc H2(set) = ( (the Sorts of C109) . ( C112 . $1 ) );
reconsider D27 = ( C113 . 1 ) as Function;
L212: ( dom C112 ) = ( Seg ( len C112 ) ) by FINSEQ_1:def 3;
consider C114 being FinSequence such that L213: ( len C114 ) = ( len C112 ) and L214: (for B115 being Nat holds (B115 in ( dom C114 ) implies ( C114 . B115 ) = H2(B115))) from FINSEQ_1:sch 2;
defpred S3[ (Element of ( NAT )) ] means ($1 in ( dom C114 ) implies (not ( C114 . $1 ) is  empty));
L215: ( dom C114 ) = ( Seg ( len C112 ) ) by L213 , FINSEQ_1:def 3;
L216: D27 is_e.translation_of C109 , D25 , D26 by L201 , L207 , FINSEQ_3:32;
L217: ( (the Sorts of C109) . D25 ) <> ( {} ) by L216 , L180;
L218: (for B116 being (Element of ( NAT )) holds (S3[ B116 ] implies S3[ ( B116 + 1 ) ]))
proof
let C115 being (Element of ( NAT ));
assume that
L219: (C115 in ( dom C114 ) implies (not ( C114 . C115 ) is  empty))
and
L220: ( C115 + 1 ) in ( dom C114 );
L221: C115 <= ( C115 + 1 ) by NAT_1:11;
L222: ( C115 + 1 ) <= ( len C114 ) by L220 , FINSEQ_3:25;
L223: C115 <= ( len C114 ) by L222 , L221 , XXREAL_0:2;
per cases ;
suppose L224: C115 = ( 0 );

thus L225: thesis by L224 , L217 , L214 , L220;
end;
suppose L226: C115 > ( 0 );

L227: C115 >= ( ( 0 ) + 1 ) by L226 , NAT_1:13;
L228: C115 in ( dom C114 ) by L227 , L223 , FINSEQ_3:25;
L229: [ ( C112 . C115 ) , ( C112 . ( C115 + 1 ) ) ] in ( TranslationRel C108 ) by L228 , L212 , L215 , L220 , REWRITE1:def 2;
reconsider D28 = ( C112 . C115 ) , D29 = ( C112 . ( C115 + 1 ) ) as (SortSymbol of C108) by L229 , ZFMISC_1:87;
reconsider D30 = ( C113 . C115 ) as Function;
L230: C115 in ( dom C113 ) by L198 , L213 , L220 , L228 , FUNCT_7:22;
L231: D30 is_e.translation_of C109 , D28 , D29 by L230 , L201;
L232: ( C114 . ( C115 + 1 ) ) = ( (the Sorts of C109) . D29 ) by L214 , L220;
thus L233: thesis by L232 , L231 , L180;
end;
end;
L235: S3[ ( 0 ) ] by FINSEQ_3:25;
L236: (for B117 being (Element of ( NAT )) holds S3[ B117 ]) from NAT_1:sch 1(L235 , L218);
L237: C114 is  non-empty
proof
let C116 being set;
assume L238: C116 in ( dom C114 );
thus L239: thesis by L238 , L236;
end;
L240: ( dom C114 ) = ( Seg ( len C112 ) ) by L213 , FINSEQ_1:def 3;
reconsider D31 = C114 as non  empty  non-empty FinSequence by L213 , L237;
L241: ( dom C113 ) = ( Seg ( len C113 ) ) by FINSEQ_1:def 3;
L242: C113 is (FuncSequence of D31)
proof
thus L243: ( ( len C113 ) + 1 ) = ( len D31 ) by L198 , L213;
let C117 being (Element of ( NAT ));
reconsider D32 = ( C113 . C117 ) as Function;
assume L244: C117 in ( dom C113 );
L245: C117 >= 1 by L244 , L241 , FINSEQ_1:1;
L246: ( C117 + 1 ) >= 1 by L245 , NAT_1:13;
L247: C117 <= ( len C113 ) by L241 , L244 , FINSEQ_1:1;
L248: C117 <= ( len C112 ) by L247 , L198 , NAT_1:13;
L249: C117 in ( Seg ( len C112 ) ) by L248 , L245 , FINSEQ_1:1;
L250: ( C117 + 1 ) <= ( len C112 ) by L198 , L247 , XREAL_1:6;
L251: ( C117 + 1 ) in ( Seg ( len C112 ) ) by L250 , L246 , FINSEQ_1:1;
L252: [ ( C112 . C117 ) , ( C112 . ( C117 + 1 ) ) ] in ( TranslationRel C108 ) by L251 , L212 , L249 , REWRITE1:def 2;
reconsider D33 = ( C112 . C117 ) , D34 = ( C112 . ( C117 + 1 ) ) as (SortSymbol of C108) by L252 , ZFMISC_1:87;
L253: ( D31 . ( C117 + 1 ) ) = ( (the Sorts of C109) . D34 ) by L214 , L240 , L251;
L254: D32 is_e.translation_of C109 , D33 , D34 by L201 , L244;
L255: ( C113 . C117 ) is (Function of ( (the Sorts of C109) . D33 ) , ( (the Sorts of C109) . D34 )) by L254 , L180;
L256: ( (the Sorts of C109) . D34 ) <> ( {} ) by L254 , L180;
L257: ( D31 . C117 ) = ( (the Sorts of C109) . D33 ) by L214 , L240 , L249;
thus L258: thesis by L257 , L255 , L256 , L253 , FUNCT_2:8;
end;
reconsider D35 = C113 as (FuncSequence of D31) by L242;
L259: 1 in ( dom C112 ) by FINSEQ_5:6;
L260: ( D31 . 1 ) = ( (the Sorts of C109) . C110 ) by L259 , L199 , L212 , L214 , L215;
L261: ( dom ( compose (D35 , ( (the Sorts of C109) . C110 )) ) ) = ( (the Sorts of C109) . C110 ) by L260 , FUNCT_7:67;
L262: ( len C112 ) in ( dom C112 ) by FINSEQ_5:6;
L263: ( D31 . ( len D31 ) ) = ( (the Sorts of C109) . C111 ) by L262 , L200 , L212 , L213 , L214 , L215;
L264: ( rng ( compose (D35 , ( (the Sorts of C109) . C110 )) ) ) c= ( (the Sorts of C109) . C111 ) by L263 , L260 , FUNCT_7:67;
thus L265: ( compose (C113 , ( (the Sorts of C109) . C110 )) ) is (Function of ( (the Sorts of C109) . C110 ) , ( (the Sorts of C109) . C111 )) by L264 , L212 , L213 , L215 , L262 , L263 , L261 , FUNCT_2:def 1 , RELSET_1:4;
thus L266: thesis by L212 , L213 , L215 , L259 , L262 , L260 , L263;
end;
end;
definition
let C118 being non  empty non  void ManySortedSign;
let C119 being  non-empty MSAlgebra over C118;
let C120 , C121 being (SortSymbol of C118);
assume that
L268: ( TranslationRel C118 ) reduces C120 , C121;
mode Translation of C119 , C120 , C121
 -> (Function of ( (the Sorts of C119) . C120 ) , ( (the Sorts of C119) . C121 ))
means :L269: (ex B118 being (RedSequence of ( TranslationRel C118 )) st (ex B119 being  Function-yielding FinSequence st (it = ( compose (B119 , ( (the Sorts of C119) . C120 )) ) & ( len B118 ) = ( ( len B119 ) + 1 ) & C120 = ( B118 . 1 ) & C121 = ( B118 . ( len B118 ) ) & (for B120 being (Element of ( NAT )) holds (for B121 being Function holds (for B122 , B123 being (SortSymbol of C118) holds ((B120 in ( dom B119 ) & B121 = ( B119 . B120 ) & B122 = ( B118 . B120 ) & B123 = ( B118 . ( B120 + 1 ) )) implies B121 is_e.translation_of C119 , B122 , B123)))))));
existence
proof
consider C122 being (RedSequence of ( TranslationRel C118 )) such that L270: ( C122 . 1 ) = C120 and L271: ( C122 . ( len C122 ) ) = C121 by L268 , REWRITE1:def 3;
defpred S4[ set , set ] means (ex B124 being Function st (ex B125 , B126 being (SortSymbol of C118) st (ex B127 being (Element of ( NAT )) st ($2 = B124 & B127 = $1 & B125 = ( C122 . B127 ) & B126 = ( C122 . ( B127 + 1 ) ) & B124 is_e.translation_of C119 , B125 , B126))));
L272: ( len C122 ) >= ( ( 0 ) + 1 ) by NAT_1:13;
consider C123 being Nat such that L273: ( len C122 ) = ( 1 + C123 ) by L272 , NAT_1:10;
reconsider D36 = C123 as (Element of ( NAT )) by ORDINAL1:def 12;
L274: ( dom C122 ) = ( Seg ( len C122 ) ) by FINSEQ_1:def 3;
L275: (for B128 being set holds (B128 in ( Seg D36 ) implies (ex B129 being set st S4[ B128 , B129 ])))
proof
let C124 being set;
assume L276: C124 in ( Seg D36 );
reconsider D37 = C124 as (Element of ( NAT )) by L276;
L277: D37 <= D36 by L276 , FINSEQ_1:1;
L278: ( D37 + 1 ) <= ( len C122 ) by L277 , L273 , XREAL_1:6;
L279: D37 >= 1 by L276 , FINSEQ_1:1;
L280: ( D37 + 1 ) >= 1 by L279 , NAT_1:13;
L281: ( D37 + 1 ) in ( dom C122 ) by L280 , L274 , L278 , FINSEQ_1:1;
L282: D37 <= ( D36 + 1 ) by L277 , NAT_1:13;
L283: D37 in ( dom C122 ) by L282 , L273 , L274 , L279 , FINSEQ_1:1;
L284: [ ( C122 . D37 ) , ( C122 . ( D37 + 1 ) ) ] in ( TranslationRel C118 ) by L283 , L281 , REWRITE1:def 2;
reconsider D38 = ( C122 . D37 ) , D39 = ( C122 . ( D37 + 1 ) ) as (SortSymbol of C118) by L284 , ZFMISC_1:87;
consider C125 being (OperSymbol of C118) such that L285: ( the_result_sort_of C125 ) = D39 and L286: (ex B130 being (Element of ( NAT )) st (B130 in ( dom ( the_arity_of C125 ) ) & ( ( the_arity_of C125 ) /. B130 ) = D38)) by L284 , L88;
set D40 = the (Element of ( Args (C125 , C119) ));
consider C126 being (Element of ( NAT )) such that L287: C126 in ( dom ( the_arity_of C125 ) ) and L288: ( ( the_arity_of C125 ) /. C126 ) = D38 by L286;
take ( transl (C125 , C126 , D40 , C119) );
take ( transl (C125 , C126 , D40 , C119) );
take D38;
take D39;
take D37;
thus L289: thesis by L285 , L287 , L288 , L178;
end;
consider C127 being Function such that L290: (( dom C127 ) = ( Seg D36 ) & (for B131 being set holds (B131 in ( Seg D36 ) implies S4[ B131 , ( C127 . B131 ) ]))) from CLASSES1:sch 1(L275);
L291: C127 is  Function-yielding
proof
let C128 being set;
assume L292: C128 in ( dom C127 );
L293: (ex B132 being Function st (ex B133 , B134 being (SortSymbol of C118) st (ex B135 being (Element of ( NAT )) st (( C127 . C128 ) = B132 & B135 = C128 & B133 = ( C122 . B135 ) & B134 = ( C122 . ( B135 + 1 ) ) & B132 is_e.translation_of C119 , B133 , B134)))) by L292 , L290;
thus L294: thesis by L293;
end;
reconsider D41 = C127 as  Function-yielding FinSequence by L291 , L290 , FINSEQ_1:def 2;
L295:
now
let C129 being (Element of ( NAT ));
let C130 being Function;
let C131 , C132 being (SortSymbol of C118);
assume L296: C129 in ( dom D41 );
L297: (ex B136 being Function st (ex B137 , B138 being (SortSymbol of C118) st (ex B139 being (Element of ( NAT )) st (( D41 . C129 ) = B136 & B139 = C129 & B137 = ( C122 . B139 ) & B138 = ( C122 . ( B139 + 1 ) ) & B136 is_e.translation_of C119 , B137 , B138)))) by L296 , L290;
thus L298: ((C130 = ( D41 . C129 ) & C131 = ( C122 . C129 ) & C132 = ( C122 . ( C129 + 1 ) )) implies C130 is_e.translation_of C119 , C131 , C132) by L297;
end;
L299: ( len D41 ) = D36 by L290 , FINSEQ_1:def 3;
reconsider D42 = ( compose (D41 , ( (the Sorts of C119) . C120 )) ) as (Function of ( (the Sorts of C119) . C120 ) , ( (the Sorts of C119) . C121 )) by L299 , L270 , L271 , L273 , L295 , L197;
take D42;
take C122;
take D41;
thus L300: thesis by L270 , L271 , L273 , L290 , L295 , FINSEQ_1:def 3;
end;
end;
theorem
L302: (for B140 being non  empty non  void ManySortedSign holds (for B141 being  non-empty MSAlgebra over B140 holds (for B142 , B143 being (SortSymbol of B140) holds (( TranslationRel B140 ) reduces B142 , B143 implies (for B144 being (RedSequence of ( TranslationRel B140 )) holds (for B145 being  Function-yielding FinSequence holds ((( len B144 ) = ( ( len B145 ) + 1 ) & B142 = ( B144 . 1 ) & B143 = ( B144 . ( len B144 ) ) & (for B146 being (Element of ( NAT )) holds (for B147 being Function holds (for B148 , B149 being (SortSymbol of B140) holds ((B146 in ( dom B145 ) & B147 = ( B145 . B146 ) & B148 = ( B144 . B146 ) & B149 = ( B144 . ( B146 + 1 ) )) implies B147 is_e.translation_of B141 , B148 , B149))))) implies ( compose (B145 , ( (the Sorts of B141) . B142 )) ) is (Translation of B141 , B142 , B143))))))))
proof
let C133 being non  empty non  void ManySortedSign;
let C134 being  non-empty MSAlgebra over C133;
let C135 , C136 being (SortSymbol of C133);
assume that
L303: ( TranslationRel C133 ) reduces C135 , C136;
let C137 being (RedSequence of ( TranslationRel C133 ));
let C138 being  Function-yielding FinSequence;
assume that
L304: ( len C137 ) = ( ( len C138 ) + 1 )
and
L305: C135 = ( C137 . 1 )
and
L306: C136 = ( C137 . ( len C137 ) )
and
L307: (for B150 being (Element of ( NAT )) holds (for B151 being Function holds (for B152 , B153 being (SortSymbol of C133) holds ((B150 in ( dom C138 ) & B151 = ( C138 . B150 ) & B152 = ( C137 . B150 ) & B153 = ( C137 . ( B150 + 1 ) )) implies B151 is_e.translation_of C134 , B152 , B153))));
L308: ( compose (C138 , ( (the Sorts of C134) . C135 )) ) is (Function of ( (the Sorts of C134) . C135 ) , ( (the Sorts of C134) . C136 )) by L304 , L305 , L306 , L307 , L197;
thus L309: thesis by L308 , L303 , L304 , L305 , L306 , L307 , L269;
end;
theorem
L310: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B154 being (SortSymbol of R1) holds ( id ( (the Sorts of R3) . B154 ) ) is (Translation of R3 , B154 , B154))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C139 being (SortSymbol of R1);
thus L311: ( TranslationRel R1 ) reduces C139 , C139 by REWRITE1:12;
L312: <* C139 *> is (RedSequence of ( TranslationRel R1 )) by REWRITE1:6;
L313: ( len <* C139 *> ) = ( ( 0 ) + 1 ) by FINSEQ_1:40;
L314: ( len ( {} ) ) = ( 0 );
L315: (for B155 being (Element of ( NAT )) holds (for B156 being Function holds (for B157 , B158 being (SortSymbol of R1) holds ((B155 in ( dom ( {} ) ) & B156 = ( ( {} ) . B155 ) & B157 = ( <* C139 *> . B155 ) & B158 = ( <* C139 *> . ( B155 + 1 ) )) implies B156 is_e.translation_of R3 , B157 , B158))));
L316: ( <* C139 *> . 1 ) = C139 by FINSEQ_1:40;
L317: ( id ( (the Sorts of R3) . C139 ) ) = ( compose (( {} ) , ( (the Sorts of R3) . C139 )) ) by FUNCT_7:39;
thus L318: thesis by L317 , L312 , L313 , L314 , L316 , L315;
end;
theorem
L319: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B159 , B160 being (SortSymbol of R1) holds (for B161 being Function holds (B161 is_e.translation_of R3 , B159 , B160 implies (( TranslationRel R1 ) reduces B159 , B160 & B161 is (Translation of R3 , B159 , B160)))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C140 , C141 being (SortSymbol of R1);
let C142 being Function;
L320: ( len <* C140 , C141 *> ) = ( 1 + 1 ) by FINSEQ_1:44;
L321: ( len <* C142 *> ) = 1 by FINSEQ_1:40;
assume L322: C142 is_e.translation_of R3 , C140 , C141;
reconsider D43 = C142 as (Function of ( (the Sorts of R3) . C140 ) , ( (the Sorts of R3) . C141 )) by L322 , L180;
L323: ( <* C140 , C141 *> . 2 ) = C141 by FINSEQ_1:44;
L324: ( <* C140 , C141 *> . 1 ) = C140 by FINSEQ_1:44;
L325:
now
let C143 being (Element of ( NAT ));
let C144 being Function;
let C145 , C146 being (SortSymbol of R1);
assume L326: C143 in ( dom <* C142 *> );
L327: C143 in { 1 } by L326 , FINSEQ_1:2 , FINSEQ_1:38;
L328: C143 = 1 by L327 , TARSKI:def 1;
thus L329: ((C144 = ( <* C142 *> . C143 ) & C145 = ( <* C140 , C141 *> . C143 ) & C146 = ( <* C140 , C141 *> . ( C143 + 1 ) )) implies C144 is_e.translation_of R3 , C145 , C146) by L328 , L322 , L324 , L323 , FINSEQ_1:40;
end;
L330: ( dom D43 ) = ( (the Sorts of R3) . C140 ) by FUNCT_2:def 1;
L331: D43 = ( compose (<* C142 *> , ( (the Sorts of R3) . C140 )) ) by L330 , FUNCT_7:46;
L332: [ C140 , C141 ] in ( TranslationRel R1 ) by L322 , L186;
thus L333: ( TranslationRel R1 ) reduces C140 , C141 by L332 , REWRITE1:15;
L334: <* C140 , C141 *> is (RedSequence of ( TranslationRel R1 )) by L332 , REWRITE1:7;
thus L335: thesis by L334 , L331 , L333 , L320 , L321 , L324 , L323 , L325 , L269;
end;
theorem
L336: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B162 , B163 , B164 being (SortSymbol of R1) holds ((( TranslationRel R1 ) reduces B162 , B163 & ( TranslationRel R1 ) reduces B163 , B164) implies (for B165 being (Translation of R3 , B162 , B163) holds (for B166 being (Translation of R3 , B163 , B164) holds ( B166 * B165 ) is (Translation of R3 , B162 , B164)))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C147 , C148 , C149 being (SortSymbol of R1);
assume that
L337: ( TranslationRel R1 ) reduces C147 , C148
and
L338: ( TranslationRel R1 ) reduces C148 , C149;
let C150 being (Translation of R3 , C147 , C148);
let C151 being (Translation of R3 , C148 , C149);
thus L339: ( TranslationRel R1 ) reduces C147 , C149 by L337 , L338 , REWRITE1:16;
consider C152 being (RedSequence of ( TranslationRel R1 )), C153 being  Function-yielding FinSequence such that L340: C150 = ( compose (C153 , ( (the Sorts of R3) . C147 )) ) and L341: ( len C152 ) = ( ( len C153 ) + 1 ) and L342: C147 = ( C152 . 1 ) and L343: C148 = ( C152 . ( len C152 ) ) and L344: (for B167 being (Element of ( NAT )) holds (for B168 being Function holds (for B169 , B170 being (SortSymbol of R1) holds ((B167 in ( dom C153 ) & B168 = ( C153 . B167 ) & B169 = ( C152 . B167 ) & B170 = ( C152 . ( B167 + 1 ) )) implies B168 is_e.translation_of R3 , B169 , B170)))) by L337 , L269;
consider C154 being (RedSequence of ( TranslationRel R1 )), C155 being  Function-yielding FinSequence such that L345: C151 = ( compose (C155 , ( (the Sorts of R3) . C148 )) ) and L346: ( len C154 ) = ( ( len C155 ) + 1 ) and L347: C148 = ( C154 . 1 ) and L348: C149 = ( C154 . ( len C154 ) ) and L349: (for B171 being (Element of ( NAT )) holds (for B172 being Function holds (for B173 , B174 being (SortSymbol of R1) holds ((B171 in ( dom C155 ) & B172 = ( C155 . B171 ) & B173 = ( C154 . B171 ) & B174 = ( C154 . ( B171 + 1 ) )) implies B172 is_e.translation_of R3 , B173 , B174)))) by L338 , L269;
reconsider D44 = ( C152 $^ C154 ) as (RedSequence of ( TranslationRel R1 )) by L343 , L347 , REWRITE1:8;
take D44;
take D45 = ( C153 ^ C155 );
L350: ( rng C150 ) c= ( (the Sorts of R3) . C148 ) by RELAT_1:def 19;
thus L351: ( C151 * C150 ) = ( compose (D45 , ( (the Sorts of R3) . C147 )) ) by L350 , L340 , L345 , FUNCT_7:48;
L352: ( len D45 ) = ( ( len C153 ) + ( len C155 ) ) by FINSEQ_1:22;
consider C156 being set, C157 being FinSequence such that L353: C154 = ( <* C156 *> ^ C157 ) and L354: ( len C154 ) = ( ( len C157 ) + 1 ) by REWRITE1:5;
L355: C156 = C148 by L347 , L353 , FINSEQ_1:41;
consider C158 being FinSequence, C159 being set such that L356: C152 = ( C158 ^ <* C159 *> ) by FINSEQ_1:46;
L357: D44 = ( C158 ^ C154 ) by L356 , REWRITE1:2;
L358: ( len <* C159 *> ) = 1 by FINSEQ_1:40;
L359: ( len C152 ) = ( ( len C158 ) + 1 ) by L358 , L356 , FINSEQ_1:22;
L360: ( len D44 ) = ( ( len C153 ) + ( len C154 ) ) by L359 , L341 , L357 , FINSEQ_1:22;
thus L361: ( len D44 ) = ( ( len D45 ) + 1 ) by L360 , L346 , L352;
L362: C159 = C148 by L343 , L356 , L359 , FINSEQ_1:42;
L363: D44 = ( C152 ^ C157 ) by L362 , L356 , L353 , L357 , L355 , FINSEQ_1:32;
L364: (1 <= ( len C158 ) or ( ( 0 ) + 1 ) > ( len C158 ));
L365: ((1 in ( Seg ( len C158 ) ) & ( Seg ( len C158 ) ) = ( dom C158 )) or (( 0 ) <= ( len C158 ) & ( 0 ) >= ( len C158 ))) by L364 , FINSEQ_1:1 , FINSEQ_1:def 3 , NAT_1:13;
L366: ((( D44 . 1 ) = ( C158 . 1 ) & ( C158 . 1 ) = ( C152 . 1 )) or (C158 = ( {} ) & ( ( {} ) ^ C154 ) = C154)) by L365 , L356 , L357 , FINSEQ_1:34 , FINSEQ_1:def 7;
L367: ((( D44 . 1 ) = ( C158 . 1 ) & ( C158 . 1 ) = ( C152 . 1 )) or (( len C158 ) = ( 0 ) & ( ( {} ) ^ C154 ) = C154)) by L356 , L357 , L365 , FINSEQ_1:34 , FINSEQ_1:def 7;
thus L368: C147 = ( D44 . 1 ) by L367 , L342 , L343 , L347 , L356 , L359 , L366 , REWRITE1:2;
L369: ( len C154 ) in ( dom C154 ) by FINSEQ_5:6;
thus L370: C149 = ( D44 . ( len D44 ) ) by L369 , L341 , L348 , L359 , L357 , L360 , FINSEQ_1:def 7;
let C160 being (Element of ( NAT ));
let C161 being Function;
let C162 , C163 being (SortSymbol of R1);
assume that
L371: C160 in ( dom D45 )
and
L372: C161 = ( D45 . C160 )
and
L373: C162 = ( D44 . C160 )
and
L374: C163 = ( D44 . ( C160 + 1 ) );
per cases ;
suppose L375: C160 in ( dom C153 );

L376: ( C160 + 1 ) in ( dom C152 ) by L375 , L341 , FUNCT_7:22;
L377: C163 = ( C152 . ( C160 + 1 ) ) by L376 , L363 , L374 , FINSEQ_1:def 7;
L378: C160 in ( dom C152 ) by L341 , L375 , FUNCT_7:22;
L379: C162 = ( C152 . C160 ) by L378 , L363 , L373 , FINSEQ_1:def 7;
L380: C161 = ( C153 . C160 ) by L372 , L375 , FINSEQ_1:def 7;
thus L381: thesis by L380 , L344 , L375 , L379 , L377;
end;
suppose L382: (not C160 in ( dom C153 ));

L383: (not (C160 <= ( len C153 ) & C160 >= 1)) by L382 , FINSEQ_3:25;
L384: C160 >= ( ( len C153 ) + 1 ) by L383 , L371 , FINSEQ_3:25 , NAT_1:13;
consider C164 being Nat such that L385: C160 = ( ( ( len C153 ) + 1 ) + C164 ) by L384 , NAT_1:10;
L386: ( ( len C153 ) + ( ( C164 + 1 ) + 1 ) ) = ( C160 + 1 ) by L385;
L387: ( C164 + 1 ) >= 1 by NAT_1:11;
L388: C160 = ( ( len C153 ) + ( 1 + C164 ) ) by L385;
L389: C160 <= ( len D45 ) by L371 , FINSEQ_3:25;
L390: ( C164 + 1 ) <= ( len C155 ) by L389 , L352 , L388 , XREAL_1:6;
L391: ( C164 + 1 ) in ( dom C155 ) by L390 , L387 , FINSEQ_3:25;
L392: ( C164 + 1 ) in ( dom C154 ) by L391 , L346 , FUNCT_7:22;
L393: C162 = ( C154 . ( C164 + 1 ) ) by L392 , L341 , L359 , L357 , L373 , L388 , FINSEQ_1:def 7;
L394: ( ( C164 + 1 ) + 1 ) in ( dom C154 ) by L346 , L391 , FUNCT_7:22;
L395: C163 = ( C154 . ( ( C164 + 1 ) + 1 ) ) by L394 , L341 , L359 , L357 , L374 , L386 , FINSEQ_1:def 7;
L396: C161 = ( C155 . ( C164 + 1 ) ) by L372 , L388 , L391 , FINSEQ_1:def 7;
thus L397: thesis by L396 , L349 , L391 , L393 , L395;
end;
end;
theorem
L399: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B175 , B176 , B177 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B175 , B176 implies (for B178 being (Translation of R3 , B175 , B176) holds (for B179 being Function holds (B179 is_e.translation_of R3 , B176 , B177 implies ( B179 * B178 ) is (Translation of R3 , B175 , B177))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C165 , C166 , C167 being (SortSymbol of R1);
assume that
L400: ( TranslationRel R1 ) reduces C165 , C166;
let C168 being (Translation of R3 , C165 , C166);
let C169 being Function;
assume L401: C169 is_e.translation_of R3 , C166 , C167;
L402: C169 is (Translation of R3 , C166 , C167) by L401 , L319;
L403: ( TranslationRel R1 ) reduces C166 , C167 by L401 , L319;
thus L404: thesis by L403 , L400 , L402 , L336;
end;
theorem
L405: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B180 , B181 , B182 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B181 , B182 implies (for B183 being Function holds (B183 is_e.translation_of R3 , B180 , B181 implies (for B184 being (Translation of R3 , B181 , B182) holds ( B184 * B183 ) is (Translation of R3 , B180 , B182))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C170 , C171 , C172 being (SortSymbol of R1);
assume that
L406: ( TranslationRel R1 ) reduces C171 , C172;
let C173 being Function;
assume L407: C173 is_e.translation_of R3 , C170 , C171;
L408: C173 is (Translation of R3 , C170 , C171) by L407 , L319;
L409: ( TranslationRel R1 ) reduces C170 , C171 by L407 , L319;
thus L410: thesis by L409 , L406 , L408 , L336;
end;
scheme TranslationInd { F1() -> non  empty non  void ManySortedSign , F2() ->  non-empty MSAlgebra over F1() , P1[set , set , set] } : (for B185 , B186 being (SortSymbol of F1()) holds (( TranslationRel F1() ) reduces B185 , B186 implies (for B187 being (Translation of F2() , B185 , B186) holds P1[ B187 , B185 , B186 ])))
provided
L411: (for B188 being (SortSymbol of F1()) holds P1[ ( id ( (the Sorts of F2()) . B188 ) ) , B188 , B188 ])
and
L412: (for B189 , B190 , B191 being (SortSymbol of F1()) holds (( TranslationRel F1() ) reduces B189 , B190 implies (for B192 being (Translation of F2() , B189 , B190) holds (P1[ B192 , B189 , B190 ] implies (for B193 being Function holds (B193 is_e.translation_of F2() , B190 , B191 implies P1[ ( B193 * B192 ) , B189 , B191 ]))))))
proof
set D46 = F1();
set D47 = F2();
let C174 , C175 being (SortSymbol of D46);
assume that
L413: ( TranslationRel D46 ) reduces C174 , C175;
let C176 being (Translation of D47 , C174 , C175);
consider C177 being (RedSequence of ( TranslationRel D46 )), C178 being  Function-yielding FinSequence such that L414: C176 = ( compose (C178 , ( (the Sorts of D47) . C174 )) ) and L415: ( len C177 ) = ( ( len C178 ) + 1 ) and L416: C174 = ( C177 . 1 ) and L417: C175 = ( C177 . ( len C177 ) ) and L418: (for B194 being (Element of ( NAT )) holds (for B195 being Function holds (for B196 , B197 being (SortSymbol of D46) holds ((B194 in ( dom C178 ) & B195 = ( C178 . B194 ) & B196 = ( C177 . B194 ) & B197 = ( C177 . ( B194 + 1 ) )) implies B195 is_e.translation_of D47 , B196 , B197)))) by L413 , L269;
defpred S5[ (Element of ( NAT )) ] means ($1 in ( dom C178 ) implies (ex B198 being (SortSymbol of D46) st (ex B199 being (Translation of D47 , C174 , B198) st (ex B200 being  Function-yielding FinSequence st (B200 = ( C178 | ( Seg $1 ) ) & B198 = ( C177 . ( $1 + 1 ) ) & ( TranslationRel D46 ) reduces C174 , B198 & B199 = ( compose (B200 , ( (the Sorts of D47) . C174 )) ) & P1[ B199 , C174 , B198 ])))));
L419: (for B201 being (Element of ( NAT )) holds (S5[ B201 ] implies S5[ ( B201 + 1 ) ]))
proof
let C179 being (Element of ( NAT ));
assume that
L420: (C179 in ( dom C178 ) implies (ex B202 being (SortSymbol of D46) st (ex B203 being (Translation of D47 , C174 , B202) st (ex B204 being  Function-yielding FinSequence st (B204 = ( C178 | ( Seg C179 ) ) & B202 = ( C177 . ( C179 + 1 ) ) & ( TranslationRel D46 ) reduces C174 , B202 & B203 = ( compose (B204 , ( (the Sorts of D47) . C174 )) ) & P1[ B203 , C174 , B202 ])))))
and
L421: ( C179 + 1 ) in ( dom C178 );
L422: ( ( C179 + 1 ) + 1 ) in ( dom C177 ) by L415 , L421 , FUNCT_7:22;
L423: ( C179 + 1 ) in ( dom C177 ) by L415 , L421 , FUNCT_7:22;
L424: [ ( C177 . ( C179 + 1 ) ) , ( C177 . ( ( C179 + 1 ) + 1 ) ) ] in ( TranslationRel D46 ) by L423 , L422 , REWRITE1:def 2;
reconsider D48 = ( C177 . ( C179 + 1 ) ) , D49 = ( C177 . ( ( C179 + 1 ) + 1 ) ) as (SortSymbol of D46) by L424 , ZFMISC_1:87;
reconsider D50 = ( C178 . ( C179 + 1 ) ) as Function;
L425: D50 is_e.translation_of D47 , D48 , D49 by L418 , L421;
reconsider D51 = D50 as (Translation of D47 , D48 , D49) by L425 , L319;
per cases ;
suppose L426: C179 = ( 0 );

reconsider D52 = D51 as (Translation of D47 , C174 , D49) by L426 , L416;
reconsider D53 = ( C178 | ( Seg 1 ) ) as  Function-yielding FinSequence by FINSEQ_1:15;
L427: ( D52 * ( id ( (the Sorts of D47) . C174 ) ) ) = D52 by FUNCT_2:17;
take D49;
take D52;
take D53;
thus L428: (D53 = ( C178 | ( Seg ( C179 + 1 ) ) ) & D49 = ( C177 . ( ( C179 + 1 ) + 1 ) )) by L426;
thus L429: ( TranslationRel D46 ) reduces C174 , D49 by L416 , L425 , L426 , L319;
L430: ( dom D52 ) = ( (the Sorts of D47) . C174 ) by FUNCT_2:def 1;
L431: 1 in ( Seg 1 ) by FINSEQ_1:2 , TARSKI:def 1;
L432: ( D53 . 1 ) = D52 by L431 , L426 , FUNCT_1:49;
L433: ( ( 0 ) + 1 ) <= ( len C178 ) by L421 , L426 , FINSEQ_3:25;
L434: ( len D53 ) = 1 by L433 , FINSEQ_1:17;
L435: D53 = <* D52 *> by L434 , L432 , FINSEQ_1:40;
thus L436: D52 = ( compose (D53 , ( (the Sorts of D47) . C174 )) ) by L435 , L430 , FUNCT_7:46;
L437: ( TranslationRel D46 ) reduces C174 , C174 by REWRITE1:12;
L438: P1[ ( id ( (the Sorts of D47) . C174 ) ) , C174 , C174 ] by L411;
L439: ( id ( (the Sorts of D47) . C174 ) ) is (Translation of D47 , C174 , C174) by L310;
thus L440: thesis by L439 , L412 , L416 , L418 , L421 , L426 , L437 , L427 , L438;
end;
suppose L441: C179 > ( 0 );

reconsider D54 = ( C178 | ( Seg ( C179 + 1 ) ) ) as FinSequence by FINSEQ_1:15;
take D49;
L442: ( C179 + 1 ) <= ( len C178 ) by L421 , FINSEQ_3:25;
L443: C179 <= ( len C178 ) by L442 , NAT_1:13;
L444: C179 >= ( ( 0 ) + 1 ) by L441 , NAT_1:13;
consider C180 being (SortSymbol of D46), C181 being (Translation of D47 , C174 , C180), C182 being  Function-yielding FinSequence such that L445: C182 = ( C178 | ( Seg C179 ) ) and L446: C180 = ( C177 . ( C179 + 1 ) ) and L447: ( TranslationRel D46 ) reduces C174 , C180 and L448: C181 = ( compose (C182 , ( (the Sorts of D47) . C174 )) ) and L449: P1[ C181 , C174 , C180 ] by L444 , L420 , L443 , FINSEQ_3:25;
reconsider D55 = ( D51 * C181 ) as (Translation of D47 , C174 , D49) by L418 , L421 , L446 , L447 , L399;
take D55;
take D56 = ( C182 ^ <* D50 *> );
L450: C179 <= ( len C178 ) by L442 , NAT_1:13;
L451: ( len C182 ) = C179 by L450 , L445 , FINSEQ_1:17;
L452: ( C179 + 1 ) <= ( len C178 ) by L421 , FINSEQ_3:25;
L453: ( dom D54 ) = ( Seg ( C179 + 1 ) ) by L452 , FINSEQ_1:17;
L454:
now
let C183 being Nat;
assume L455: C183 in ( Seg ( C179 + 1 ) );
L456: C183 <= ( C179 + 1 ) by L455 , FINSEQ_1:1;
L457: ((C183 <= C179 & C183 >= 1) or C183 = ( C179 + 1 )) by L456 , L455 , FINSEQ_1:1 , NAT_1:8;
L458: (C183 in ( dom C182 ) or C183 = ( C179 + 1 )) by L457 , L451 , FINSEQ_3:25;
L459: ((( D56 . C183 ) = ( C182 . C183 ) & ( C182 . C183 ) = ( C178 . C183 )) or ( D56 . C183 ) = ( C178 . C183 )) by L458 , L445 , L451 , FINSEQ_1:42 , FINSEQ_1:def 7 , FUNCT_1:47;
thus L460: ( D56 . C183 ) = ( D54 . C183 ) by L459 , L453 , L455 , FUNCT_1:47;
end;
L461: ( len <* D50 *> ) = 1 by FINSEQ_1:40;
L462: ( len D56 ) = ( ( len C182 ) + 1 ) by L461 , FINSEQ_1:22;
L463: ( dom D56 ) = ( Seg ( C179 + 1 ) ) by L462 , L451 , FINSEQ_1:def 3;
thus L464: D56 = ( C178 | ( Seg ( C179 + 1 ) ) ) by L463 , L453 , L454 , FINSEQ_1:13;
thus L465: D49 = ( C177 . ( ( C179 + 1 ) + 1 ) );
L466: ( TranslationRel D46 ) reduces D48 , D49 by L425 , L319;
thus L467: ( TranslationRel D46 ) reduces C174 , D49 by L466 , L446 , L447 , REWRITE1:16;
thus L468: D55 = ( compose (D56 , ( (the Sorts of D47) . C174 )) ) by L448 , FUNCT_7:41;
thus L469: thesis by L412 , L418 , L421 , L446 , L447 , L449;
end;
end;
L471: S5[ ( 0 ) ] by FINSEQ_3:25;
L472: (for B205 being (Element of ( NAT )) holds S5[ B205 ]) from NAT_1:sch 1(L471 , L419);
per cases ;
suppose L473: C178 = ( {} );

L474: ( len C178 ) = ( 0 ) by L473;
L475: C176 = ( id ( (the Sorts of D47) . C174 ) ) by L414 , L473 , FUNCT_7:39;
thus L476: thesis by L475 , L411 , L415 , L416 , L417 , L474;
end;
suppose L477: C178 <> ( {} );

L478: ( len C178 ) >= ( ( 0 ) + 1 ) by L477 , NAT_1:13;
L479: ( len C178 ) in ( dom C178 ) by L478 , FINSEQ_3:25;
L480: ( C178 | ( dom C178 ) ) = C178;
L481: ( dom C178 ) = ( Seg ( len C178 ) ) by FINSEQ_1:def 3;
L482: (ex B206 being (SortSymbol of D46) st (ex B207 being (Translation of D47 , C174 , B206) st (ex B208 being  Function-yielding FinSequence st (B208 = C178 & B206 = ( C177 . ( ( len C178 ) + 1 ) ) & ( TranslationRel D46 ) reduces C174 , B206 & B207 = ( compose (B208 , ( (the Sorts of D47) . C174 )) ) & P1[ B207 , C174 , B206 ])))) by L481 , L472 , L479 , L480;
thus L483: thesis by L482 , L414 , L415 , L417;
end;
end;
theorem
L485: (for R1 being non  empty non  void ManySortedSign holds (for B209 , B210 being  non-empty MSAlgebra over R1 holds (for B211 being (ManySortedFunction of B209 , B210) holds (B211 is_homomorphism B209 , B210 implies (for B212 being (OperSymbol of R1) holds (for B213 being (Element of ( NAT )) holds (B213 in ( dom ( the_arity_of B212 ) ) implies (for B214 being (Element of ( Args (B212 , B209) )) holds ( ( B211 . ( the_result_sort_of B212 ) ) * ( transl (B212 , B213 , B214 , B209) ) ) = ( ( transl (B212 , B213 , ( B211 # B214 ) , B210) ) * ( B211 . ( ( the_arity_of B212 ) /. B213 ) ) )))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let C184 , C185 being  non-empty MSAlgebra over R1;
let C186 being (ManySortedFunction of C184 , C185);
assume that
L486: C186 is_homomorphism C184 , C185;
let C187 being (OperSymbol of R1);
let C188 being (Element of ( NAT ));
assume that
L487: C188 in ( dom ( the_arity_of C187 ) );
let C189 being (Element of ( Args (C187 , C184) ));
set D57 = ( ( the_arity_of C187 ) /. C188 );
set D58 = ( the_result_sort_of C187 );
reconsider D59 = ( transl (C187 , C188 , ( C186 # C189 ) , C185) ) as (Function of ( (the Sorts of C185) . D57 ) , ( (the Sorts of C185) . D58 )) by L165;
reconsider D60 = ( transl (C187 , C188 , C189 , C184) ) as (Function of ( (the Sorts of C184) . D57 ) , ( (the Sorts of C184) . D58 )) by L165;
L488:
now
let C190 being (Element of C184 , D57);
reconsider D61 = ( C189 +* (C188 , C190) ) as (Element of ( Args (C187 , C184) )) by L94;
L489: ( C186 # D61 ) = ( ( C186 # C189 ) +* (C188 , ( ( C186 # D61 ) . C188 )) ) by L487 , L120;
L490: ( C186 # C189 ) in ( Args (C187 , C185) );
L491: ( ( C186 # D61 ) . C188 ) = ( ( C186 . D57 ) . C190 ) by L490 , L487 , L120;
thus L492: ( ( ( C186 . D58 ) * D60 ) . C190 ) = ( ( C186 . D58 ) . ( D60 . C190 ) ) by FUNCT_2:15
.= ( ( C186 . D58 ) . ( ( Den (C187 , C184) ) . D61 ) ) by L152
.= ( ( Den (C187 , C185) ) . ( ( C186 # C189 ) +* (C188 , ( ( C186 . D57 ) . C190 )) ) ) by L486 , L491 , L489 , MSUALG_3:def 7
.= ( D59 . ( ( C186 . D57 ) . C190 ) ) by L152
.= ( ( D59 * ( C186 . D57 ) ) . C190 ) by FUNCT_2:15;
end;
thus L493: thesis by L488 , FUNCT_2:63;
end;
theorem
L494: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B215 being (Endomorphism of R3) holds (for B216 being (OperSymbol of R1) holds (for B217 being (Element of ( NAT )) holds (B217 in ( dom ( the_arity_of B216 ) ) implies (for B218 being (Element of ( Args (B216 , R3) )) holds ( ( B215 . ( the_result_sort_of B216 ) ) * ( transl (B216 , B217 , B218 , R3) ) ) = ( ( transl (B216 , B217 , ( B215 # B218 ) , R3) ) * ( B215 . ( ( the_arity_of B216 ) /. B217 ) ) ))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C191 being (Endomorphism of R3);
L495: C191 is_homomorphism R3 , R3 by L51;
thus L496: thesis by L495 , L485;
end;
theorem
L497: (for R1 being non  empty non  void ManySortedSign holds (for B219 , B220 being  non-empty MSAlgebra over R1 holds (for B221 being (ManySortedFunction of B219 , B220) holds (B221 is_homomorphism B219 , B220 implies (for B222 , B223 being (SortSymbol of R1) holds (for B224 being Function holds (B224 is_e.translation_of B219 , B222 , B223 implies (ex B225 being (Function of ( (the Sorts of B220) . B222 ) , ( (the Sorts of B220) . B223 )) st (B225 is_e.translation_of B220 , B222 , B223 & ( B225 * ( B221 . B222 ) ) = ( ( B221 . B223 ) * B224 ))))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let C192 , C193 being  non-empty MSAlgebra over R1;
let C194 being (ManySortedFunction of C192 , C193);
assume that
L498: C194 is_homomorphism C192 , C193;
let C195 , C196 being (SortSymbol of R1);
let C197 being Function;
assume L499: C197 is_e.translation_of C192 , C195 , C196;
consider C198 being (OperSymbol of R1) such that L500: ( the_result_sort_of C198 ) = C196 and L501: (ex B226 being (Element of ( NAT )) st (B226 in ( dom ( the_arity_of C198 ) ) & ( ( the_arity_of C198 ) /. B226 ) = C195 & (ex B227 being Function st (B227 in ( Args (C198 , C192) ) & C197 = ( transl (C198 , B226 , B227 , C192) ))))) by L499 , L178;
consider C199 being (Element of ( NAT )), C200 being Function such that L502: C199 in ( dom ( the_arity_of C198 ) ) and L503: ( ( the_arity_of C198 ) /. C199 ) = C195 and L504: C200 in ( Args (C198 , C192) ) and L505: C197 = ( transl (C198 , C199 , C200 , C192) ) by L501;
reconsider D62 = C200 as (Element of ( Args (C198 , C192) )) by L504;
reconsider D63 = ( transl (C198 , C199 , ( C194 # D62 ) , C193) ) as (Function of ( (the Sorts of C193) . C195 ) , ( (the Sorts of C193) . C196 )) by L500 , L503 , L165;
take D63;
thus L506: D63 is_e.translation_of C193 , C195 , C196 by L500 , L502 , L503 , L178;
thus L507: thesis by L498 , L500 , L502 , L503 , L505 , L485;
end;
theorem
L508: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B228 being (Endomorphism of R3) holds (for B229 , B230 being (SortSymbol of R1) holds (for B231 being Function holds (B231 is_e.translation_of R3 , B229 , B230 implies (ex B232 being (Function of ( (the Sorts of R3) . B229 ) , ( (the Sorts of R3) . B230 )) st (B232 is_e.translation_of R3 , B229 , B230 & ( B232 * ( B228 . B229 ) ) = ( ( B228 . B230 ) * B231 )))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C201 being (Endomorphism of R3);
L509: C201 is_homomorphism R3 , R3 by L51;
thus L510: thesis by L509 , L497;
end;
theorem
L511: (for R1 being non  empty non  void ManySortedSign holds (for B233 , B234 being  non-empty MSAlgebra over R1 holds (for B235 being (ManySortedFunction of B233 , B234) holds (B235 is_homomorphism B233 , B234 implies (for B236 , B237 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B236 , B237 implies (for B238 being (Translation of B233 , B236 , B237) holds (ex B239 being (Translation of B234 , B236 , B237) st ( B239 * ( B235 . B236 ) ) = ( ( B235 . B237 ) * B238 )))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let C202 , C203 being  non-empty MSAlgebra over R1;
let C204 being (ManySortedFunction of C202 , C203);
assume that
L512: C204 is_homomorphism C202 , C203;
defpred S6[ Function , (SortSymbol of R1) , (SortSymbol of R1) ] means (ex B240 being (Translation of C203 , $2 , $3) st ( B240 * ( C204 . $2 ) ) = ( ( C204 . $3 ) * $1 ));
L513: (for B241 , B242 , B243 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B241 , B242 implies (for B244 being (Translation of C202 , B241 , B242) holds (S6[ B244 , B241 , B242 ] implies (for B245 being Function holds (B245 is_e.translation_of C202 , B242 , B243 implies S6[ ( B245 * B244 ) , B241 , B243 ]))))))
proof
let C205 , C206 , C207 being (SortSymbol of R1);
assume that
L514: ( TranslationRel R1 ) reduces C205 , C206;
let C208 being (Translation of C202 , C205 , C206);
given C209 being (Translation of C203 , C205 , C206) such that
L515: ( C209 * ( C204 . C205 ) ) = ( ( C204 . C206 ) * C208 );

let C210 being Function;
assume L516: C210 is_e.translation_of C202 , C206 , C207;
consider C211 being (Function of ( (the Sorts of C203) . C206 ) , ( (the Sorts of C203) . C207 )) such that L517: C211 is_e.translation_of C203 , C206 , C207 and L518: ( C211 * ( C204 . C206 ) ) = ( ( C204 . C207 ) * C210 ) by L516 , L512 , L497;
reconsider D64 = ( C211 * C209 ) as (Translation of C203 , C205 , C207) by L514 , L517 , L399;
take D64;
thus L519: ( D64 * ( C204 . C205 ) ) = ( C211 * ( C209 * ( C204 . C205 ) ) ) by RELAT_1:36
.= ( ( ( C204 . C207 ) * C210 ) * C208 ) by L515 , L518 , RELAT_1:36
.= ( ( C204 . C207 ) * ( C210 * C208 ) ) by RELAT_1:36;
end;
L520: (for B246 being (SortSymbol of R1) holds S6[ ( id ( (the Sorts of C202) . B246 ) ) , B246 , B246 ])
proof
let C212 being (SortSymbol of R1);
L521: ( ( id ( (the Sorts of C203) . C212 ) ) * ( C204 . C212 ) ) = ( C204 . C212 ) by FUNCT_2:17;
L522: ( ( C204 . C212 ) * ( id ( (the Sorts of C202) . C212 ) ) ) = ( C204 . C212 ) by FUNCT_2:17;
L523: ( id ( (the Sorts of C203) . C212 ) ) is (Translation of C203 , C212 , C212) by L310;
thus L524: thesis by L523 , L521 , L522;
end;
thus L525: (for B247 , B248 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B247 , B248 implies (for B249 being (Translation of C202 , B247 , B248) holds S6[ B249 , B247 , B248 ]))) from TranslationInd(L520 , L513);
end;
theorem
L526: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B250 being (Endomorphism of R3) holds (for B251 , B252 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B251 , B252 implies (for B253 being (Translation of R3 , B251 , B252) holds (ex B254 being (Translation of R3 , B251 , B252) st ( B254 * ( B250 . B251 ) ) = ( ( B250 . B252 ) * B253 ))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C213 being (Endomorphism of R3);
L527: C213 is_homomorphism R3 , R3 by L51;
thus L528: thesis by L527 , L511;
end;
begin
definition
let C214 being non  empty non  void ManySortedSign;
let C215 being MSAlgebra over C214;
let C216 being (ManySortedRelation of C215);
attr C216 is  compatible
means
:L529: (for B255 being (OperSymbol of C214) holds (for B256 , B257 being Function holds ((B256 in ( Args (B255 , C215) ) & B257 in ( Args (B255 , C215) ) & (for B258 being (Element of ( NAT )) holds (B258 in ( dom ( the_arity_of B255 ) ) implies [ ( B256 . B258 ) , ( B257 . B258 ) ] in ( C216 . ( ( the_arity_of B255 ) /. B258 ) )))) implies [ ( ( Den (B255 , C215) ) . B256 ) , ( ( Den (B255 , C215) ) . B257 ) ] in ( C216 . ( the_result_sort_of B255 ) ))));
attr C216 is  invariant
means
:L530: (for B259 , B260 being (SortSymbol of C214) holds (for B261 being Function holds (B261 is_e.translation_of C215 , B259 , B260 implies (for B262 , B263 being set holds ([ B262 , B263 ] in ( C216 . B259 ) implies [ ( B261 . B262 ) , ( B261 . B263 ) ] in ( C216 . B260 ))))));
attr C216 is  stable
means
:L531: (for B264 being (Endomorphism of C215) holds (for B265 being (SortSymbol of C214) holds (for B266 , B267 being set holds ([ B266 , B267 ] in ( C216 . B265 ) implies [ ( ( B264 . B265 ) . B266 ) , ( ( B264 . B265 ) . B267 ) ] in ( C216 . B265 )))));
end;
theorem
L533: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B268 being  MSEquivalence-like (ManySortedRelation of R3) holds (B268 is  compatible iff B268 is (MSCongruence of R3)))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C217 being  MSEquivalence-like (ManySortedRelation of R3);
thus L534:now
assume L535: C217 is  compatible;
L536:
now
let C218 being (OperSymbol of R1);
let C219 , C220 being (Element of ( Args (C218 , R3) ));
assume that
L537: (for B269 being Nat holds (B269 in ( dom C219 ) implies [ ( C219 . B269 ) , ( C220 . B269 ) ] in ( C217 . ( ( the_arity_of C218 ) /. B269 ) )));
L538:
now
let C221 being (Element of ( NAT ));
assume L539: C221 in ( dom ( the_arity_of C218 ) );
L540: C221 in ( dom C219 ) by L539 , MSUALG_3:6;
thus L541: [ ( C219 . C221 ) , ( C220 . C221 ) ] in ( C217 . ( ( the_arity_of C218 ) /. C221 ) ) by L540 , L537;
end;
thus L542: [ ( ( Den (C218 , R3) ) . C219 ) , ( ( Den (C218 , R3) ) . C220 ) ] in ( C217 . ( the_result_sort_of C218 ) ) by L538 , L535 , L529;
end;
thus L543: C217 is (MSCongruence of R3) by L536 , MSUALG_4:def 4;
end;
assume L544: C217 is (MSCongruence of R3);
let C222 being (OperSymbol of R1);
let C223 , C224 being Function;
assume that
L545: C223 in ( Args (C222 , R3) )
and
L546: C224 in ( Args (C222 , R3) )
and
L547: (for B270 being (Element of ( NAT )) holds (B270 in ( dom ( the_arity_of C222 ) ) implies [ ( C223 . B270 ) , ( C224 . B270 ) ] in ( C217 . ( ( the_arity_of C222 ) /. B270 ) )));
reconsider D65 = C223 , D66 = C224 as (Element of ( Args (C222 , R3) )) by L545 , L546;
L548:
now
let C225 being Nat;
assume L549: C225 in ( dom D65 );
L550: C225 in ( dom ( the_arity_of C222 ) ) by L549 , MSUALG_3:6;
thus L551: [ ( D65 . C225 ) , ( D66 . C225 ) ] in ( C217 . ( ( the_arity_of C222 ) /. C225 ) ) by L550 , L547;
end;
thus L552: thesis by L548 , L544 , MSUALG_4:def 4;
end;
theorem
L553: (for R1 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R1 holds (for B271 being (ManySortedRelation of R3) holds (B271 is  invariant iff (for B272 , B273 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B272 , B273 implies (for B274 being (Translation of R3 , B272 , B273) holds (for B275 , B276 being set holds ([ B275 , B276 ] in ( B271 . B272 ) implies [ ( B274 . B275 ) , ( B274 . B276 ) ] in ( B271 . B273 ))))))))))
proof
let R1 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R1;
let C226 being (ManySortedRelation of R3);
thus L554:now
defpred S7[ Function , set , set ] means (for B277 , B278 being set holds ([ B277 , B278 ] in ( C226 . $2 ) implies [ ( $1 . B277 ) , ( $1 . B278 ) ] in ( C226 . $3 )));
deffunc H3((SortSymbol of R1)) = ( id ( (the Sorts of R3) . $1 ) );
assume L555: C226 is  invariant;
L556: (for B279 , B280 , B281 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B279 , B280 implies (for B282 being (Translation of R3 , B279 , B280) holds (S7[ B282 , B279 , B280 ] implies (for B283 being Function holds (B283 is_e.translation_of R3 , B280 , B281 implies S7[ ( B283 * B282 ) , B279 , B281 ]))))))
proof
let C227 , C228 , C229 being (SortSymbol of R1);
assume that
L557: ( TranslationRel R1 ) reduces C227 , C228;
let C230 being (Translation of R3 , C227 , C228);
assume that
L558: (for B284 , B285 being set holds ([ B284 , B285 ] in ( C226 . C227 ) implies [ ( C230 . B284 ) , ( C230 . B285 ) ] in ( C226 . C228 )));
let C231 being Function;
assume that
L559: C231 is_e.translation_of R3 , C228 , C229;
let C232 , C233 being set;
assume L560: [ C232 , C233 ] in ( C226 . C227 );
reconsider D67 = C232 , D68 = C233 as (Element of R3 , C227) by L560 , ZFMISC_1:87;
L561: [ ( C230 . D67 ) , ( C230 . D68 ) ] in ( C226 . C228 ) by L558 , L560;
L562: [ ( C231 . ( C230 . D67 ) ) , ( C231 . ( C230 . D68 ) ) ] in ( C226 . C229 ) by L561 , L555 , L559 , L530;
L563: ( C231 . ( C230 . D67 ) ) = ( ( C231 * C230 ) . D67 ) by FUNCT_2:15;
thus L564: thesis by L563 , L562 , FUNCT_2:15;
end;
L565: (for B286 being (SortSymbol of R1) holds S7[ ( id ( (the Sorts of R3) . B286 ) ) , B286 , B286 ])
proof
let C234 being (SortSymbol of R1);
let C235 , C236 being set;
assume L566: [ C235 , C236 ] in ( C226 . C234 );
L567: C235 in ( (the Sorts of R3) . C234 ) by L566 , ZFMISC_1:87;
L568: ( H3(C234) . C235 ) = C235 by L567 , FUNCT_1:17;
L569: C236 in ( (the Sorts of R3) . C234 ) by L566 , ZFMISC_1:87;
thus L570: thesis by L569 , L566 , L568 , FUNCT_1:17;
end;
thus L571: (for B287 , B288 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B287 , B288 implies (for B289 being (Translation of R3 , B287 , B288) holds S7[ B289 , B287 , B288 ]))) from TranslationInd(L565 , L556);
end;
assume L572: (for B290 , B291 being (SortSymbol of R1) holds (( TranslationRel R1 ) reduces B290 , B291 implies (for B292 being (Translation of R3 , B290 , B291) holds (for B293 , B294 being set holds ([ B293 , B294 ] in ( C226 . B290 ) implies [ ( B292 . B293 ) , ( B292 . B294 ) ] in ( C226 . B291 ))))));
let C237 , C238 being (SortSymbol of R1);
let C239 being Function;
assume L573: C239 is_e.translation_of R3 , C237 , C238;
L574: C239 is (Translation of R3 , C237 , C238) by L573 , L319;
thus L575: thesis by L574 , L572 , L573 , L319;
end;
registration
let C240 being non  empty non  void ManySortedSign;
let C241 being  non-empty MSAlgebra over C240;
cluster  invariant ->  compatible for  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like (ManySortedRelation of C241);
coherence
proof
let C242 being  MSEquivalence-like (ManySortedRelation of C241);
assume that
L576: (for B295 , B296 being (SortSymbol of C240) holds (for B297 being Function holds (B297 is_e.translation_of C241 , B295 , B296 implies (for B298 , B299 being set holds ([ B298 , B299 ] in ( C242 . B295 ) implies [ ( B297 . B298 ) , ( B297 . B299 ) ] in ( C242 . B296 ))))));
let C243 being (OperSymbol of C240);
let C244 , C245 being Function;
assume that
L577: C244 in ( Args (C243 , C241) )
and
L578: C245 in ( Args (C243 , C241) )
and
L579: (for B300 being (Element of ( NAT )) holds (B300 in ( dom ( the_arity_of C243 ) ) implies [ ( C244 . B300 ) , ( C245 . B300 ) ] in ( C242 . ( ( the_arity_of C243 ) /. B300 ) )));
L580: ( dom ( the_arity_of C243 ) ) = ( Seg ( len ( the_arity_of C243 ) ) ) by FINSEQ_1:def 3;
reconsider D69 = C244 as (Element of ( Args (C243 , C241) )) by L577;
defpred S8[ set , set , set ] means (ex B301 being (Element of ( Args (C243 , C241) )) st (B301 = $2 & $3 = ( B301 +* ($1 , ( C245 . $1 )) )));
L581: (for B302 being (Element of ( NAT )) holds ((1 <= B302 & B302 < ( ( len ( the_arity_of C243 ) ) + 1 )) implies (for B303 being (Element of ( Args (C243 , C241) )) holds (ex B304 being (Element of ( Args (C243 , C241) )) st S8[ B302 , B303 , B304 ]))))
proof
let C246 being (Element of ( NAT ));
assume that
L582: 1 <= C246
and
L583: C246 < ( ( len ( the_arity_of C243 ) ) + 1 );
let C247 being (Element of ( Args (C243 , C241) ));
L584: C246 <= ( len ( the_arity_of C243 ) ) by L583 , NAT_1:13;
L585: C246 in ( dom ( the_arity_of C243 ) ) by L584 , L582 , FINSEQ_3:25;
L586: ( C245 . C246 ) in ( (the Sorts of C241) . ( ( the_arity_of C243 ) /. C246 ) ) by L585 , L578 , L16;
L587: ( C247 +* (C246 , ( C245 . C246 )) ) in ( Args (C243 , C241) ) by L586 , L94;
thus L588: thesis by L587;
end;
consider C248 being (FinSequence of ( Args (C243 , C241) )) such that L589: ( len C248 ) = ( ( len ( the_arity_of C243 ) ) + 1 ) and L590: (( C248 . 1 ) = D69 or ( ( len ( the_arity_of C243 ) ) + 1 ) = ( 0 )) and L591: (for B305 being (Element of ( NAT )) holds ((1 <= B305 & B305 < ( ( len ( the_arity_of C243 ) ) + 1 )) implies S8[ B305 , ( C248 . B305 ) , ( C248 . ( B305 + 1 ) ) ])) from RECDEF_1:sch 4(L581);
L592: ( ( len ( the_arity_of C243 ) ) + 1 ) >= 1 by NAT_1:11;
L593: ( ( len ( the_arity_of C243 ) ) + 1 ) in ( dom C248 ) by L592 , L589 , FINSEQ_3:25;
defpred S9[ (Element of ( NAT )) ] means ($1 <= ( len ( the_arity_of C243 ) ) implies (ex B306 being (Element of ( Args (C243 , C241) )) st (B306 = ( C248 . ( $1 + 1 ) ) & (for B307 being (Element of ( NAT )) holds ((B307 in ( dom ( the_arity_of C243 ) ) & B307 > $1) implies ( B306 . B307 ) = ( C244 . B307 ))) & (for B308 being Nat holds (B308 in ( Seg $1 ) implies ( B306 . B308 ) = ( C245 . B308 ))))));
L594: ( dom ( the_arity_of C243 ) ) = ( Seg ( len ( the_arity_of C243 ) ) ) by FINSEQ_1:def 3;
L595: (for B309 being (Element of ( NAT )) holds (S9[ B309 ] implies S9[ ( B309 + 1 ) ]))
proof
let C249 being (Element of ( NAT ));
assume that
L596: (C249 <= ( len ( the_arity_of C243 ) ) implies (ex B310 being (Element of ( Args (C243 , C241) )) st (B310 = ( C248 . ( C249 + 1 ) ) & (for B311 being (Element of ( NAT )) holds ((B311 in ( dom ( the_arity_of C243 ) ) & B311 > C249) implies ( B310 . B311 ) = ( C244 . B311 ))) & (for B312 being Nat holds (B312 in ( Seg C249 ) implies ( B310 . B312 ) = ( C245 . B312 ))))))
and
L597: ( C249 + 1 ) <= ( len ( the_arity_of C243 ) );
L598: ( C249 + 1 ) < ( ( len ( the_arity_of C243 ) ) + 1 ) by L597 , NAT_1:13;
consider C250 being (Element of ( Args (C243 , C241) )) such that L599: C250 = ( C248 . ( C249 + 1 ) ) and L600: ( C248 . ( ( C249 + 1 ) + 1 ) ) = ( C250 +* (( C249 + 1 ) , ( C245 . ( C249 + 1 ) )) ) by L598 , L591 , NAT_1:11;
L601: ( C249 + 1 ) >= 1 by NAT_1:11;
L602: ( C249 + 1 ) in ( dom ( the_arity_of C243 ) ) by L601 , L597 , FINSEQ_3:25;
L603: ( C245 . ( C249 + 1 ) ) in ( (the Sorts of C241) . ( ( the_arity_of C243 ) /. ( C249 + 1 ) ) ) by L602 , L578 , L16;
reconsider D70 = ( C248 . ( ( C249 + 1 ) + 1 ) ) as (Element of ( Args (C243 , C241) )) by L603 , L600 , L94;
take D70;
thus L604: D70 = ( C248 . ( ( C249 + 1 ) + 1 ) );
L605: ( Seg ( C249 + 1 ) ) c= ( dom ( the_arity_of C243 ) ) by L594 , L597 , FINSEQ_1:5;
L606: ( Seg ( C249 + 1 ) ) c= ( dom C250 ) by L605 , MSUALG_3:6;
L607: C249 <= ( C249 + 1 ) by NAT_1:11;
consider C251 being (Element of ( Args (C243 , C241) )) such that L608: C251 = ( C248 . ( C249 + 1 ) ) and L609: (for B313 being (Element of ( NAT )) holds ((B313 in ( dom ( the_arity_of C243 ) ) & B313 > C249) implies ( C251 . B313 ) = ( C244 . B313 ))) and L610: (for B314 being Nat holds (B314 in ( Seg C249 ) implies ( C251 . B314 ) = ( C245 . B314 ))) by L607 , L596 , L597 , XXREAL_0:2;
thus L611:now
let C252 being (Element of ( NAT ));
assume that
L612: C252 in ( dom ( the_arity_of C243 ) )
and
L613: C252 > ( C249 + 1 );
L614: C252 > C249 by L613 , NAT_1:13;
L615: ( C251 . C252 ) = ( C244 . C252 ) by L614 , L609 , L612;
thus L616: ( D70 . C252 ) = ( C244 . C252 ) by L615 , L608 , L599 , L600 , L613 , FUNCT_7:32;
end;
let C253 being Nat;
assume L617: C253 in ( Seg ( C249 + 1 ) );
L618: C253 in ( ( Seg C249 ) \/ { ( C249 + 1 ) } ) by L617 , FINSEQ_1:9;
L619: (C253 in ( Seg C249 ) or C253 in { ( C249 + 1 ) }) by L618 , XBOOLE_0:def 3;
per cases ;
suppose L620: C253 = ( C249 + 1 );

thus L621: thesis by L620 , L600 , L617 , L606 , FUNCT_7:31;
end;
suppose L622: C253 <> ( C249 + 1 );

L623: ( D70 . C253 ) = ( C250 . C253 ) by L622 , L600 , FUNCT_7:32;
thus L624: thesis by L623 , L608 , L610 , L599 , L619 , L622 , TARSKI:def 1;
end;
end;
L626: S9[ ( 0 ) ]
proof
assume L627: ( 0 ) <= ( len ( the_arity_of C243 ) );
take D69;
thus L628: thesis by L590;
end;
L629: (for B315 being (Element of ( NAT )) holds S9[ B315 ]) from NAT_1:sch 1(L626 , L595);
consider C254 being (Element of ( Args (C243 , C241) )) such that L630: C254 = ( C248 . ( ( len ( the_arity_of C243 ) ) + 1 ) ) and L631: (for B316 being (Element of ( NAT )) holds ((B316 in ( dom ( the_arity_of C243 ) ) & B316 > ( len ( the_arity_of C243 ) )) implies ( C254 . B316 ) = ( C244 . B316 ))) and L632: (for B317 being Nat holds (B317 in ( Seg ( len ( the_arity_of C243 ) ) ) implies ( C254 . B317 ) = ( C245 . B317 ))) by L629;
defpred S10[ (Element of ( NAT )) ] means ($1 in ( dom C248 ) implies [ ( ( Den (C243 , C241) ) . D69 ) , ( ( Den (C243 , C241) ) . ( C248 . $1 ) ) ] in ( C242 . ( the_result_sort_of C243 ) ));
L633: (for B318 being (Element of ( NAT )) holds (S10[ B318 ] implies S10[ ( B318 + 1 ) ]))
proof
L634: ( Result (C243 , C241) ) = ( (the Sorts of C241) . ( the_result_sort_of C243 ) ) by PRALG_2:3;
let C255 being (Element of ( NAT ));
assume that
L635: (C255 in ( dom C248 ) implies [ ( ( Den (C243 , C241) ) . D69 ) , ( ( Den (C243 , C241) ) . ( C248 . C255 ) ) ] in ( C242 . ( the_result_sort_of C243 ) ))
and
L636: ( C255 + 1 ) in ( dom C248 );
L637: ( C255 + 1 ) <= ( len C248 ) by L636 , FINSEQ_3:25;
L638: C255 <= ( C255 + 1 ) by NAT_1:11;
L639: C255 <= ( len C248 ) by L638 , L637 , XXREAL_0:2;
per cases ;
suppose L640: C255 = ( 0 );

thus L641: thesis by L640 , L590 , L634 , EQREL_1:5;
end;
suppose L642: C255 > ( 0 );

L643: C255 >= ( ( 0 ) + 1 ) by L642 , NAT_1:13;
consider C256 being Nat such that L644: C255 = ( 1 + C256 ) by L643 , NAT_1:10;
reconsider D71 = C256 as (Element of ( NAT )) by ORDINAL1:def 12;
L645: C255 < ( ( len ( the_arity_of C243 ) ) + 1 ) by L589 , L637 , NAT_1:13;
consider C257 being (Element of ( Args (C243 , C241) )) such that L646: C257 = ( C248 . C255 ) and L647: ( C248 . ( C255 + 1 ) ) = ( C257 +* (C255 , ( C245 . C255 )) ) by L645 , L591 , L643;
L648: C255 <= ( len ( the_arity_of C243 ) ) by L589 , L637 , XREAL_1:6;
L649: C255 in ( dom ( the_arity_of C243 ) ) by L648 , L643 , FINSEQ_3:25;
reconsider D72 = ( C245 . C255 ) , D73 = ( C257 . C255 ) as (Element of C241 , ( ( the_arity_of C243 ) /. C255 )) by L649 , L578 , L16;
L650: D71 <= C255 by L644 , NAT_1:11;
L651: (ex B319 being (Element of ( Args (C243 , C241) )) st (B319 = ( C248 . ( D71 + 1 ) ) & (for B320 being (Element of ( NAT )) holds ((B320 in ( dom ( the_arity_of C243 ) ) & B320 > D71) implies ( B319 . B320 ) = ( C244 . B320 ))) & (for B321 being Nat holds (B321 in ( Seg D71 ) implies ( B319 . B321 ) = ( C245 . B321 ))))) by L650 , L629 , L648 , XXREAL_0:2;
L652: D71 < C255 by L644 , NAT_1:13;
L653: ( C257 . C255 ) = ( C244 . C255 ) by L652 , L646 , L649 , L644 , L651;
L654: [ D73 , D72 ] in ( C242 . ( ( the_arity_of C243 ) /. C255 ) ) by L653 , L579 , L649;
reconsider D74 = ( C257 +* (C255 , D72) ) as (Element of ( Args (C243 , C241) )) by L94;
L655: ( ( Den (C243 , C241) ) . D74 ) = ( ( transl (C243 , C255 , C257 , C241) ) . D72 ) by L152;
L656: C257 = ( C257 +* (C255 , D73) ) by FUNCT_7:35;
L657: ( ( Den (C243 , C241) ) . C257 ) = ( ( transl (C243 , C255 , C257 , C241) ) . D73 ) by L656 , L152;
L658: ( transl (C243 , C255 , C257 , C241) ) is_e.translation_of C241 , ( ( the_arity_of C243 ) /. C255 ) , ( the_result_sort_of C243 ) by L649 , L178;
L659: [ ( ( Den (C243 , C241) ) . C257 ) , ( ( Den (C243 , C241) ) . D74 ) ] in ( C242 . ( the_result_sort_of C243 ) ) by L658 , L576 , L655 , L657 , L654;
thus L660: thesis by L659 , L635 , L639 , L643 , L646 , L647 , EQREL_1:7 , FINSEQ_3:25;
end;
end;
L662: ( dom C245 ) = ( dom ( the_arity_of C243 ) ) by L578 , MSUALG_3:6;
L663: C245 is FinSequence by L662 , L580 , FINSEQ_1:def 2;
L664: S10[ ( 0 ) ] by FINSEQ_3:25;
L665: (for B322 being (Element of ( NAT )) holds S10[ B322 ]) from NAT_1:sch 1(L664 , L633);
L666: ( dom C254 ) = ( dom ( the_arity_of C243 ) ) by MSUALG_3:6;
L667: C254 is FinSequence by L666 , L580 , FINSEQ_1:def 2;
L668: C254 = C245 by L667 , L632 , L666 , L662 , L580 , L663 , FINSEQ_1:13;
thus L669: [ ( ( Den (C243 , C241) ) . C244 ) , ( ( Den (C243 , C241) ) . C245 ) ] in ( C242 . ( the_result_sort_of C243 ) ) by L668 , L665 , L630 , L593;
end;
cluster  compatible ->  invariant for  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like (ManySortedRelation of C241);
coherence
proof
let C258 being  MSEquivalence-like (ManySortedRelation of C241);
assume that
L670: (for B323 being (OperSymbol of C240) holds (for B324 , B325 being Function holds ((B324 in ( Args (B323 , C241) ) & B325 in ( Args (B323 , C241) ) & (for B326 being (Element of ( NAT )) holds (B326 in ( dom ( the_arity_of B323 ) ) implies [ ( B324 . B326 ) , ( B325 . B326 ) ] in ( C258 . ( ( the_arity_of B323 ) /. B326 ) )))) implies [ ( ( Den (B323 , C241) ) . B324 ) , ( ( Den (B323 , C241) ) . B325 ) ] in ( C258 . ( the_result_sort_of B323 ) ))));
let C259 , C260 being (SortSymbol of C240);
let C261 being Function;
given C262 being (OperSymbol of C240) such that
L671: ( the_result_sort_of C262 ) = C260
and
L672: (ex B327 being (Element of ( NAT )) st (B327 in ( dom ( the_arity_of C262 ) ) & ( ( the_arity_of C262 ) /. B327 ) = C259 & (ex B328 being Function st (B328 in ( Args (C262 , C241) ) & C261 = ( transl (C262 , B327 , B328 , C241) )))));

consider C263 being (Element of ( NAT )), C264 being Function such that L673: C263 in ( dom ( the_arity_of C262 ) ) and L674: ( ( the_arity_of C262 ) /. C263 ) = C259 and L675: C264 in ( Args (C262 , C241) ) and L676: C261 = ( transl (C262 , C263 , C264 , C241) ) by L672;
let C265 , C266 being set;
assume L677: [ C265 , C266 ] in ( C258 . C259 );
L678: C266 in ( (the Sorts of C241) . C259 ) by L677 , ZFMISC_1:87;
L679: C265 in ( (the Sorts of C241) . C259 ) by L677 , ZFMISC_1:87;
reconsider D75 = ( C264 +* (C263 , C265) ) , D76 = ( C264 +* (C263 , C266) ) as (Element of ( Args (C262 , C241) )) by L679 , L674 , L675 , L678 , L94;
L680: ( C261 . C266 ) = ( ( Den (C262 , C241) ) . D76 ) by L674 , L676 , L678 , L152;
L681: ( dom C264 ) = ( dom ( the_arity_of C262 ) ) by L675 , MSUALG_3:6;
L682:
now
let C267 being (Element of ( NAT ));
L683: ( dom ( (the Sorts of C241) * ( the_arity_of C262 ) ) ) = ( dom ( the_arity_of C262 ) ) by PARTFUN1:def 2;
assume L684: C267 in ( dom ( the_arity_of C262 ) );
L685: ( ( the_arity_of C262 ) /. C267 ) = ( ( the_arity_of C262 ) . C267 ) by L684 , PARTFUN1:def 6;
L686: ( (the Sorts of C241) . ( ( the_arity_of C262 ) /. C267 ) ) = ( ( (the Sorts of C241) * ( the_arity_of C262 ) ) . C267 ) by L685 , L684 , FUNCT_1:13;
L687: (C267 = C263 or C267 <> C263);
L688: ((( D75 . C267 ) = C265 & ( D76 . C267 ) = C266 & C267 = C263) or (( D75 . C267 ) = ( C264 . C267 ) & ( D76 . C267 ) = ( C264 . C267 ))) by L687 , L681 , L684 , FUNCT_7:31 , FUNCT_7:32;
thus L689: [ ( D75 . C267 ) , ( D76 . C267 ) ] in ( C258 . ( ( the_arity_of C262 ) /. C267 ) ) by L688 , L674 , L677 , L684 , L683 , L686 , EQREL_1:5 , MSUALG_3:6;
end;
L690: ( C261 . C265 ) = ( ( Den (C262 , C241) ) . D75 ) by L674 , L676 , L679 , L152;
thus L691: [ ( C261 . C265 ) , ( C261 . C266 ) ] in ( C258 . C260 ) by L690 , L670 , L671 , L680 , L682;
end;
end;
registration
let C268 being non  empty set;
cluster ( id C268 ) -> non  empty;
coherence;
end;
scheme MSRExistence { F3() -> non  empty set , F4() ->  non-empty (ManySortedSet of F3()) , P2[set , set , set] } : (ex B329 being (ManySortedRelation of F4()) st (for B330 being (Element of F3()) holds (for B331 , B332 being (Element of ( F4() . B330 )) holds ([ B331 , B332 ] in ( B329 . B330 ) iff P2[ B330 , B331 , B332 ]))))
proof
defpred S11[ set , set ] means P2[ $1 , ( $2 `1 ) , ( $2 `2 ) ];
deffunc H4(set) = [: ( F4() . $1 ) , ( F4() . $1 ) :];
consider C269 being Function such that L694: ( dom C269 ) = F3() and L695: (for B333 being set holds (B333 in F3() implies (for B334 being set holds (B334 in ( C269 . B333 ) iff (B334 in H4(B333) & S11[ B333 , B334 ]))))) from CARD_3:sch 2;
reconsider D77 = C269 as (ManySortedSet of F3()) by L694 , PARTFUN1:def 2 , RELAT_1:def 18;
L696: D77 is (ManySortedRelation of F4())
proof
let C270 being set;
assume L697: C270 in F3();
L698: ( D77 . C270 ) c= [: ( F4() . C270 ) , ( F4() . C270 ) :]
proof
let C271 being set;
thus L699: thesis by L695 , L697;
end;
thus L700: thesis by L698;
end;
reconsider D78 = D77 as (ManySortedRelation of F4()) by L696;
take D78;
let C272 being (Element of F3());
let C273 , C274 being (Element of ( F4() . C272 ));
L701: ( [ C273 , C274 ] `2 ) = C274;
L702: [ C273 , C274 ] in [: ( F4() . C272 ) , ( F4() . C272 ) :] by ZFMISC_1:87;
L703: ( [ C273 , C274 ] `1 ) = C273;
thus L704: thesis by L703 , L695 , L701 , L702;
end;
scheme MSRLambdaU { F5() -> set , F6() -> (ManySortedSet of F5()) , F7(set) -> set } : ((ex B335 being (ManySortedRelation of F6()) st (for B336 being set holds (B336 in F5() implies ( B335 . B336 ) = F7(B336)))) & (for B337 , B338 being (ManySortedRelation of F6()) holds (((for B339 being set holds (B339 in F5() implies ( B337 . B339 ) = F7(B339))) & (for B340 being set holds (B340 in F5() implies ( B338 . B340 ) = F7(B340)))) implies B337 = B338)))
provided
L705: (for B341 being set holds (B341 in F5() implies F7(B341) is (Relation of ( F6() . B341 ) , ( F6() . B341 ))))
proof
consider C275 being (ManySortedSet of F5()) such that L706: (for B342 being set holds (B342 in F5() implies ( C275 . B342 ) = F7(B342))) from PBOOLE:sch 4;
L707: C275 is (ManySortedRelation of F6())
proof
let C276 being set;
assume L708: C276 in F5();
L709: F7(C276) is (Relation of ( F6() . C276 ) , ( F6() . C276 )) by L708 , L705;
thus L710: thesis by L709 , L706 , L708;
end;
thus L711: (ex B343 being (ManySortedRelation of F6()) st (for B344 being set holds (B344 in F5() implies ( B343 . B344 ) = F7(B344)))) by L707 , L706;
let C277 , C278 being (ManySortedRelation of F6());
assume that
L712: (for B345 being set holds (B345 in F5() implies ( C277 . B345 ) = F7(B345)))
and
L713: (for B346 being set holds (B346 in F5() implies ( C278 . B346 ) = F7(B346)));
L714:
now
let C279 being set;
assume L715: C279 in F5();
L716: ( C277 . C279 ) = F7(C279) by L715 , L712;
thus L717: ( C277 . C279 ) = ( C278 . C279 ) by L716 , L713 , L715;
end;
thus L718: thesis by L714 , PBOOLE:3;
end;
definition
let C280 being set;
let C281 being (ManySortedSet of C280);
func id (C280 , C281) -> (ManySortedRelation of C281) means 
:L719: (for B347 being set holds (B347 in C280 implies ( it . B347 ) = ( id ( C281 . B347 ) )));
correctness
proof
deffunc H5(set) = ( id ( C281 . $1 ) );
L720: (for B348 being set holds (B348 in C280 implies H5(B348) is (Relation of ( C281 . B348 ) , ( C281 . B348 ))));
L721: ((ex B349 being (ManySortedRelation of C281) st (for B350 being set holds (B350 in C280 implies ( B349 . B350 ) = H5(B350)))) & (for B351 , B352 being (ManySortedRelation of C281) holds (((for B353 being set holds (B353 in C280 implies ( B351 . B353 ) = H5(B353))) & (for B354 being set holds (B354 in C280 implies ( B352 . B354 ) = H5(B354)))) implies B351 = B352))) from MSRLambdaU(L720);
thus L722: thesis by L721;
end;
end;
registration
let C282 being non  empty non  void ManySortedSign;
let C283 being  non-empty MSAlgebra over C282;
cluster  MSEquivalence-like ->  non-empty for (ManySortedRelation of C283);
coherence
proof
let C284 being (ManySortedRelation of C283);
assume L724: (for B355 being set holds (for B356 being (Relation of ( (the Sorts of C283) . B355 )) holds ((B355 in (the carrier of C282) & ( C284 . B355 ) = B356) implies B356 is (Equivalence_Relation of ( (the Sorts of C283) . B355 )))));
let C285 being set;
assume L725: C285 in (the carrier of C282);
reconsider D79 = C285 as (SortSymbol of C282) by L725;
L726: ( C284 . D79 ) is (Equivalence_Relation of ( (the Sorts of C283) . D79 )) by L724;
thus L727: thesis by L726;
end;
end;
registration
let C286 being non  empty non  void ManySortedSign;
let C287 being  non-empty MSAlgebra over C286;
cluster  invariant  stable  MSEquivalence-like for (ManySortedRelation of C287);
existence
proof
reconsider D80 = ( id ((the carrier of C286) , (the Sorts of C287)) ) as (ManySortedRelation of C287);
take D80;
thus L729: D80 is  invariant
proof
let C288 , C289 being (SortSymbol of C286);
let C290 being Function;
assume L730: C290 is_e.translation_of C287 , C288 , C289;
reconsider D81 = C290 as (Function of ( (the Sorts of C287) . C288 ) , ( (the Sorts of C287) . C289 )) by L730 , L180;
let C291 , C292 being set;
assume L731: [ C291 , C292 ] in ( D80 . C288 );
L732: C291 in ( (the Sorts of C287) . C288 ) by L731 , ZFMISC_1:87;
L733: ( D81 . C291 ) in ( (the Sorts of C287) . C289 ) by L732 , FUNCT_2:5;
L734: ( D80 . C288 ) = ( id ( (the Sorts of C287) . C288 ) ) by L719;
L735: C291 = C292 by L734 , L731 , RELAT_1:def 10;
L736: ( D80 . C289 ) = ( id ( (the Sorts of C287) . C289 ) ) by L719;
thus L737: thesis by L736 , L735 , L733 , RELAT_1:def 10;
end;

thus L738: D80 is  stable
proof
let C293 being (Endomorphism of C287);
let C294 being (SortSymbol of C286);
let C295 , C296 being set;
L739: ( D80 . C294 ) = ( id ( (the Sorts of C287) . C294 ) ) by L719;
assume L740: [ C295 , C296 ] in ( D80 . C294 );
L741: C295 in ( (the Sorts of C287) . C294 ) by L740 , L739 , RELAT_1:def 10;
L742: ( ( C293 . C294 ) . C295 ) in ( (the Sorts of C287) . C294 ) by L741 , FUNCT_2:5;
L743: C295 = C296 by L739 , L740 , RELAT_1:def 10;
thus L744: thesis by L743 , L739 , L742 , RELAT_1:def 10;
end;

let C297 being set;
let C298 being (Relation of ( (the Sorts of C287) . C297 ));
assume L745: C297 in (the carrier of C286);
reconsider D82 = C297 as (SortSymbol of C286) by L745;
assume L746: ( D80 . C297 ) = C298;
L747: C298 = ( id ( (the Sorts of C287) . D82 ) ) by L746 , L719;
thus L748: thesis by L747;
end;
end;
begin
scheme MSRelCl { F8() -> non  empty non  void ManySortedSign , F9() ->  non-empty MSAlgebra over F8() , P3[set , set , set] , P4[set] , F10 , F11() -> (ManySortedRelation of F9()) } : (P4[ F11() ] & F10() c= F11() & (for B357 being (ManySortedRelation of F9()) holds ((P4[ B357 ] & F10() c= B357) implies F11() c= B357)))
provided
L750: (for B358 being (ManySortedRelation of F9()) holds (P4[ B358 ] iff (for B359 , B360 being (SortSymbol of F8()) holds (for B361 being (Function of ( (the Sorts of F9()) . B359 ) , ( (the Sorts of F9()) . B360 )) holds (P3[ B361 , B359 , B360 ] implies (for B362 , B363 being set holds ([ B362 , B363 ] in ( B358 . B359 ) implies [ ( B361 . B362 ) , ( B361 . B363 ) ] in ( B358 . B360 ))))))))
and
L751: (for B364 , B365 , B366 being (SortSymbol of F8()) holds (for B367 being (Function of ( (the Sorts of F9()) . B364 ) , ( (the Sorts of F9()) . B365 )) holds (for B368 being (Function of ( (the Sorts of F9()) . B365 ) , ( (the Sorts of F9()) . B366 )) holds ((P3[ B367 , B364 , B365 ] & P3[ B368 , B365 , B366 ]) implies P3[ ( B368 * B367 ) , B364 , B366 ]))))
and
L752: (for B369 being (SortSymbol of F8()) holds P3[ ( id ( (the Sorts of F9()) . B369 ) ) , B369 , B369 ])
and
L753: (for B370 being (SortSymbol of F8()) holds (for B371 , B372 being (Element of F9() , B370) holds ([ B371 , B372 ] in ( F11() . B370 ) iff (ex B373 being (SortSymbol of F8()) st (ex B374 being (Function of ( (the Sorts of F9()) . B373 ) , ( (the Sorts of F9()) . B370 )) st (ex B375 , B376 being (Element of F9() , B373) st (P3[ B374 , B373 , B370 ] & [ B375 , B376 ] in ( F10() . B373 ) & B371 = ( B374 . B375 ) & B372 = ( B374 . B376 ))))))))
proof
L754:
now
let C299 , C300 being (SortSymbol of F8());
set D83 = F11();
let C301 being (Function of ( (the Sorts of F9()) . C299 ) , ( (the Sorts of F9()) . C300 ));
assume L755: P3[ C301 , C299 , C300 ];
let C302 , C303 being set;
assume L756: [ C302 , C303 ] in ( D83 . C299 );
L757: C303 in ( (the Sorts of F9()) . C299 ) by L756 , ZFMISC_1:87;
L758: C302 in ( (the Sorts of F9()) . C299 ) by L756 , ZFMISC_1:87;
consider C304 being (SortSymbol of F8()), C305 being (Function of ( (the Sorts of F9()) . C304 ) , ( (the Sorts of F9()) . C299 )), C306 , C307 being (Element of F9() , C304) such that L759: P3[ C305 , C304 , C299 ] and L760: [ C306 , C307 ] in ( F10() . C304 ) and L761: C302 = ( C305 . C306 ) and L762: C303 = ( C305 . C307 ) by L758 , L753 , L756 , L757;
L763: ( C301 . C302 ) = ( ( C301 * C305 ) . C306 ) by L761 , FUNCT_2:15;
L764: ( C301 . C303 ) = ( ( C301 * C305 ) . C307 ) by L762 , FUNCT_2:15;
L765: P3[ ( C301 * C305 ) , C304 , C300 ] by L751 , L755 , L759;
thus L766: [ ( C301 . C302 ) , ( C301 . C303 ) ] in ( D83 . C300 ) by L765 , L753 , L760 , L763 , L764;
end;
thus L767: P4[ F11() ] by L754 , L750;
thus L768: F10() c= F11()
proof
let C308 being set;
assume L769: C308 in (the carrier of F8());
reconsider D84 = C308 as (SortSymbol of F8()) by L769;
L770: ( F10() . D84 ) c= ( F11() . D84 )
proof
set D85 = ( id ( (the Sorts of F9()) . D84 ) );
let C309 , C310 being set;
assume L771: [ C309 , C310 ] in ( F10() . D84 );
reconsider D86 = C309 , D87 = C310 as (Element of F9() , D84) by L771 , ZFMISC_1:87;
L772: ( D85 . D87 ) = D87 by FUNCT_1:17;
L773: P3[ D85 , D84 , D84 ] by L752;
L774: ( D85 . D86 ) = D86 by FUNCT_1:17;
thus L775: thesis by L774 , L753 , L771 , L773 , L772;
end;
thus L776: thesis by L770;
end;

let C311 being (ManySortedRelation of F9());
assume that
L777: P4[ C311 ]
and
L778: F10() c= C311;
let C312 being set;
assume L779: C312 in (the carrier of F8());
reconsider D88 = C312 as (SortSymbol of F8()) by L779;
L780: ( F11() . D88 ) c= ( C311 . D88 )
proof
let C313 , C314 being set;
assume L781: [ C313 , C314 ] in ( F11() . D88 );
reconsider D89 = C313 , D90 = C314 as (Element of F9() , D88) by L781 , ZFMISC_1:87;
consider C315 being (SortSymbol of F8()), C316 being (Function of ( (the Sorts of F9()) . C315 ) , ( (the Sorts of F9()) . D88 )), C317 , C318 being (Element of F9() , C315) such that L782: P3[ C316 , C315 , D88 ] and L783: [ C317 , C318 ] in ( F10() . C315 ) and L784: D89 = ( C316 . C317 ) and L785: D90 = ( C316 . C318 ) by L753 , L781;
L786: ( F10() . C315 ) c= ( C311 . C315 ) by L778 , PBOOLE:def 2;
thus L787: thesis by L786 , L750 , L777 , L782 , L783 , L784 , L785;
end;
thus L788: thesis by L780;
end;
L789:
now
let C319 being non  empty non  void ManySortedSign;
let C320 being  non-empty MSAlgebra over C319;
let C321 , C322 being (ManySortedRelation of C320);
defpred S12[ (ManySortedRelation of C320) ] means $1 is  invariant;
defpred S13[ Function , (SortSymbol of C319) , (SortSymbol of C319) ] means (( TranslationRel C319 ) reduces $2 , $3 & $1 is (Translation of C320 , $2 , $3));
assume that
L790: (for B377 being (SortSymbol of C319) holds (for B378 , B379 being (Element of C320 , B377) holds ([ B378 , B379 ] in ( C322 . B377 ) iff (ex B380 being (SortSymbol of C319) st (ex B381 being (Function of ( (the Sorts of C320) . B380 ) , ( (the Sorts of C320) . B377 )) st (ex B382 , B383 being (Element of C320 , B380) st (S13[ B381 , B380 , B377 ] & [ B382 , B383 ] in ( C321 . B380 ) & B378 = ( B381 . B382 ) & B379 = ( B381 . B383 ))))))));
L791: (for B384 being (SortSymbol of C319) holds S13[ ( id ( (the Sorts of C320) . B384 ) ) , B384 , B384 ]) by L310 , REWRITE1:12;
L792:
now
let C323 being (ManySortedRelation of C320);
thus L793: (S12[ C323 ] implies (for B385 , B386 being (SortSymbol of C319) holds (for B387 being (Function of ( (the Sorts of C320) . B385 ) , ( (the Sorts of C320) . B386 )) holds (S13[ B387 , B385 , B386 ] implies (for B388 , B389 being set holds ([ B388 , B389 ] in ( C323 . B385 ) implies [ ( B387 . B388 ) , ( B387 . B389 ) ] in ( C323 . B386 ))))))) by L553;
assume L794: (for B390 , B391 being (SortSymbol of C319) holds (for B392 being (Function of ( (the Sorts of C320) . B390 ) , ( (the Sorts of C320) . B391 )) holds (S13[ B392 , B390 , B391 ] implies (for B393 , B394 being set holds ([ B393 , B394 ] in ( C323 . B390 ) implies [ ( B392 . B393 ) , ( B392 . B394 ) ] in ( C323 . B391 ))))));
L795: (for B395 , B396 being (SortSymbol of C319) holds (( TranslationRel C319 ) reduces B395 , B396 implies (for B397 being (Translation of C320 , B395 , B396) holds (for B398 , B399 being set holds ([ B398 , B399 ] in ( C323 . B395 ) implies [ ( B397 . B398 ) , ( B397 . B399 ) ] in ( C323 . B396 )))))) by L794;
thus L796: S12[ C323 ] by L795 , L553;
end;
L797: (for B400 , B401 , B402 being (SortSymbol of C319) holds (for B403 being (Function of ( (the Sorts of C320) . B400 ) , ( (the Sorts of C320) . B401 )) holds (for B404 being (Function of ( (the Sorts of C320) . B401 ) , ( (the Sorts of C320) . B402 )) holds ((S13[ B403 , B400 , B401 ] & S13[ B404 , B401 , B402 ]) implies S13[ ( B404 * B403 ) , B400 , B402 ])))) by L336 , REWRITE1:16;
thus L798: (S12[ C322 ] & C321 c= C322 & (for B405 being (ManySortedRelation of C320) holds ((S12[ B405 ] & C321 c= B405) implies C322 c= B405))) from MSRelCl(L792 , L797 , L791 , L790);
end;
definition
let C324 being non  empty non  void ManySortedSign;
let C325 being  non-empty MSAlgebra over C324;
let C326 being (ManySortedRelation of (the Sorts of C325));
func InvCl C326 ->  invariant (ManySortedRelation of C325) means 
:L799: (C326 c= it & (for B406 being  invariant (ManySortedRelation of C325) holds (C326 c= B406 implies it c= B406)));
uniqueness
proof
let C327 , C328 being  invariant (ManySortedRelation of C325);
assume that
L800: C326 c= C327
and
L801: (for B407 being  invariant (ManySortedRelation of C325) holds (C326 c= B407 implies C327 c= B407))
and
L802: C326 c= C328
and
L803: (for B408 being  invariant (ManySortedRelation of C325) holds (C326 c= B408 implies C328 c= B408));
L804: (C327 c= C328 & C328 c= C327) by L800 , L801 , L802 , L803;
thus L805: thesis by L804 , PBOOLE:146;
end;
existence
proof
defpred S14[ Function , (SortSymbol of C324) , (SortSymbol of C324) ] means (( TranslationRel C324 ) reduces $2 , $3 & $1 is (Translation of C325 , $2 , $3));
defpred S15[ (SortSymbol of C324) , set , set ] means (ex B409 being (SortSymbol of C324) st (ex B410 being (Function of ( (the Sorts of C325) . B409 ) , ( (the Sorts of C325) . $1 )) st (ex B411 , B412 being (Element of C325 , B409) st (S14[ B410 , B409 , $1 ] & [ B411 , B412 ] in ( C326 . B409 ) & $2 = ( B410 . B411 ) & $3 = ( B410 . B412 )))));
consider C329 being (ManySortedRelation of (the Sorts of C325)) such that L806: (for B413 being (SortSymbol of C324) holds (for B414 , B415 being (Element of C325 , B413) holds ([ B414 , B415 ] in ( C329 . B413 ) iff S15[ B413 , B414 , B415 ]))) from MSRExistence;
reconsider D91 = C329 as (ManySortedRelation of C325);
reconsider D92 = D91 as  invariant (ManySortedRelation of C325) by L806 , L789;
take D92;
thus L807: thesis by L806 , L789;
end;
end;
theorem
L809: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B416 being (ManySortedRelation of (the Sorts of R5)) holds (for B417 being (SortSymbol of R4) holds (for B418 , B419 being (Element of R5 , B417) holds ([ B418 , B419 ] in ( ( InvCl B416 ) . B417 ) iff (ex B420 being (SortSymbol of R4) st (ex B421 , B422 being (Element of R5 , B420) st (ex B423 being (Translation of R5 , B420 , B417) st (( TranslationRel R4 ) reduces B420 , B417 & [ B421 , B422 ] in ( B416 . B420 ) & B418 = ( B423 . B421 ) & B419 = ( B423 . B422 )))))))))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C330 being (ManySortedRelation of (the Sorts of R5));
defpred S16[ (SortSymbol of R4) , set , set ] means (ex B424 being (SortSymbol of R4) st (ex B425 being (Function of ( (the Sorts of R5) . B424 ) , ( (the Sorts of R5) . $1 )) st (ex B426 , B427 being (Element of R5 , B424) st (( TranslationRel R4 ) reduces B424 , $1 & B425 is (Translation of R5 , B424 , $1) & [ B426 , B427 ] in ( C330 . B424 ) & $2 = ( B425 . B426 ) & $3 = ( B425 . B427 )))));
let C331 being (SortSymbol of R4);
let C332 , C333 being (Element of R5 , C331);
consider C334 being (ManySortedRelation of (the Sorts of R5)) such that L810: (for B428 being (SortSymbol of R4) holds (for B429 , B430 being (Element of R5 , B428) holds ([ B429 , B430 ] in ( C334 . B428 ) iff S16[ B428 , B429 , B430 ]))) from MSRExistence;
reconsider D93 = C330 , D94 = C334 as (ManySortedRelation of R5);
L811: D93 c= D94 by L810 , L789;
reconsider D95 = D94 as  invariant (ManySortedRelation of R5) by L810 , L789;
L812: D93 c= ( InvCl D93 ) by L799;
L813: D95 c= ( InvCl D93 ) by L812 , L810 , L789;
L814: ( InvCl D93 ) c= D95 by L811 , L799;
L815: ( InvCl D93 ) = D95 by L814 , L813 , PBOOLE:146;
thus L816:now
assume L817: [ C332 , C333 ] in ( ( InvCl C330 ) . C331 );
L818: (ex B431 being (SortSymbol of R4) st (ex B432 being (Function of ( (the Sorts of R5) . B431 ) , ( (the Sorts of R5) . C331 )) st (ex B433 , B434 being (Element of R5 , B431) st (( TranslationRel R4 ) reduces B431 , C331 & B432 is (Translation of R5 , B431 , C331) & [ B433 , B434 ] in ( C330 . B431 ) & C332 = ( B432 . B433 ) & C333 = ( B432 . B434 ))))) by L817 , L810 , L815;
thus L819: (ex B435 being (SortSymbol of R4) st (ex B436 , B437 being (Element of R5 , B435) st (ex B438 being (Translation of R5 , B435 , C331) st (( TranslationRel R4 ) reduces B435 , C331 & [ B436 , B437 ] in ( C330 . B435 ) & C332 = ( B438 . B436 ) & C333 = ( B438 . B437 ))))) by L818;
end;
thus L820: thesis by L810 , L815;
end;
theorem
L821: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B439 being  stable (ManySortedRelation of R5) holds ( InvCl B439 ) is  stable)))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C335 being  stable (ManySortedRelation of R5);
let C336 being (Endomorphism of R5);
let C337 being (SortSymbol of R4);
let C338 , C339 being set;
assume L822: [ C338 , C339 ] in ( ( InvCl C335 ) . C337 );
L823: C339 in ( (the Sorts of R5) . C337 ) by L822 , ZFMISC_1:87;
L824: C338 in ( (the Sorts of R5) . C337 ) by L822 , ZFMISC_1:87;
consider C340 being (SortSymbol of R4), C341 , C342 being (Element of R5 , C340), C343 being (Translation of R5 , C340 , C337) such that L825: ( TranslationRel R4 ) reduces C340 , C337 and L826: [ C341 , C342 ] in ( C335 . C340 ) and L827: C338 = ( C343 . C341 ) and L828: C339 = ( C343 . C342 ) by L824 , L822 , L823 , L809;
consider C344 being (Translation of R5 , C340 , C337) such that L829: ( C344 * ( C336 . C340 ) ) = ( ( C336 . C337 ) * C343 ) by L825 , L526;
L830: ( ( C344 * ( C336 . C340 ) ) . C342 ) = ( C344 . ( ( C336 . C340 ) . C342 ) ) by FUNCT_2:15;
L831: ( C344 . ( ( C336 . C340 ) . C342 ) ) = ( ( C336 . C337 ) . C339 ) by L830 , L828 , L829 , FUNCT_2:15;
L832: ( ( C344 * ( C336 . C340 ) ) . C341 ) = ( C344 . ( ( C336 . C340 ) . C341 ) ) by FUNCT_2:15;
L833: ( C344 . ( ( C336 . C340 ) . C341 ) ) = ( ( C336 . C337 ) . C338 ) by L832 , L827 , L829 , FUNCT_2:15;
L834: [ ( ( C336 . C340 ) . C341 ) , ( ( C336 . C340 ) . C342 ) ] in ( C335 . C340 ) by L826 , L531;
thus L835: thesis by L834 , L825 , L833 , L831 , L809;
end;
L836:
now
let C345 being non  empty non  void ManySortedSign;
let C346 being  non-empty MSAlgebra over C345;
let C347 , C348 being (ManySortedRelation of C346);
defpred S17[ (ManySortedRelation of C346) ] means $1 is  stable;
defpred S18[ Function , (SortSymbol of C345) , (SortSymbol of C345) ] means ($2 = $3 & (ex B440 being (Endomorphism of C346) st $1 = ( B440 . $2 )));
L837: (for B441 , B442 , B443 being (SortSymbol of C345) holds (for B444 being (Function of ( (the Sorts of C346) . B441 ) , ( (the Sorts of C346) . B442 )) holds (for B445 being (Function of ( (the Sorts of C346) . B442 ) , ( (the Sorts of C346) . B443 )) holds ((S18[ B444 , B441 , B442 ] & S18[ B445 , B442 , B443 ]) implies S18[ ( B445 * B444 ) , B441 , B443 ]))))
proof
let C349 , C350 , C351 being (SortSymbol of C345);
let C352 being (Function of ( (the Sorts of C346) . C349 ) , ( (the Sorts of C346) . C350 ));
let C353 being (Function of ( (the Sorts of C346) . C350 ) , ( (the Sorts of C346) . C351 ));
assume L838: C349 = C350;
given C354 being (Endomorphism of C346) such that
L839: C352 = ( C354 . C349 );

assume L840: C350 = C351;
given C355 being (Endomorphism of C346) such that
L841: C353 = ( C355 . C350 );

thus L842: C349 = C351 by L838 , L840;
reconsider D96 = ( C355 ** C354 ) as (Endomorphism of C346);
take D96;
thus L843: thesis by L838 , L839 , L841 , MSUALG_3:2;
end;
L844: (for B446 being (ManySortedRelation of C346) holds (S17[ B446 ] iff (for B447 , B448 being (SortSymbol of C345) holds (for B449 being (Function of ( (the Sorts of C346) . B447 ) , ( (the Sorts of C346) . B448 )) holds (S18[ B449 , B447 , B448 ] implies (for B450 , B451 being set holds ([ B450 , B451 ] in ( B446 . B447 ) implies [ ( B449 . B450 ) , ( B449 . B451 ) ] in ( B446 . B448 ))))))))
proof
let C356 being (ManySortedRelation of C346);
thus L845: (C356 is  stable implies (for B452 , B453 being (SortSymbol of C345) holds (for B454 being (Function of ( (the Sorts of C346) . B452 ) , ( (the Sorts of C346) . B453 )) holds ((B452 = B453 & (ex B455 being (Endomorphism of C346) st B454 = ( B455 . B452 ))) implies (for B456 , B457 being set holds ([ B456 , B457 ] in ( C356 . B452 ) implies [ ( B454 . B456 ) , ( B454 . B457 ) ] in ( C356 . B453 ))))))) by L531;
assume L846: (for B458 , B459 being (SortSymbol of C345) holds (for B460 being (Function of ( (the Sorts of C346) . B458 ) , ( (the Sorts of C346) . B459 )) holds (S18[ B460 , B458 , B459 ] implies (for B461 , B462 being set holds ([ B461 , B462 ] in ( C356 . B458 ) implies [ ( B460 . B461 ) , ( B460 . B462 ) ] in ( C356 . B459 ))))));
thus L847: C356 is  stable
proof
let C357 being (Endomorphism of C346);
let C358 being (SortSymbol of C345);
thus L848: thesis by L846;
end;

end;
L848: (for B463 being (SortSymbol of C345) holds S18[ ( id ( (the Sorts of C346) . B463 ) ) , B463 , B463 ])
proof
reconsider D97 = ( id (the Sorts of C346) ) as (Endomorphism of C346) by L54;
let C359 being (SortSymbol of C345);
thus L849: C359 = C359;
take D97;
thus L850: thesis by MSUALG_3:def 1;
end;
assume that
L851: (for B464 being (SortSymbol of C345) holds (for B465 , B466 being (Element of C346 , B464) holds ([ B465 , B466 ] in ( C348 . B464 ) iff (ex B467 being (SortSymbol of C345) st (ex B468 being (Function of ( (the Sorts of C346) . B467 ) , ( (the Sorts of C346) . B464 )) st (ex B469 , B470 being (Element of C346 , B467) st (S18[ B468 , B467 , B464 ] & [ B469 , B470 ] in ( C347 . B467 ) & B465 = ( B468 . B469 ) & B466 = ( B468 . B470 ))))))));
thus L852: (S17[ C348 ] & C347 c= C348 & (for B471 being (ManySortedRelation of C346) holds ((S17[ B471 ] & C347 c= B471) implies C348 c= B471))) from MSRelCl(L844 , L837 , L848 , L851);
end;
definition
let C360 being non  empty non  void ManySortedSign;
let C361 being  non-empty MSAlgebra over C360;
let C362 being (ManySortedRelation of (the Sorts of C361));
func StabCl C362 ->  stable (ManySortedRelation of C361) means 
:L853: (C362 c= it & (for B472 being  stable (ManySortedRelation of C361) holds (C362 c= B472 implies it c= B472)));
uniqueness
proof
let C363 , C364 being  stable (ManySortedRelation of C361);
assume that
L854: C362 c= C363
and
L855: (for B473 being  stable (ManySortedRelation of C361) holds (C362 c= B473 implies C363 c= B473))
and
L856: C362 c= C364
and
L857: (for B474 being  stable (ManySortedRelation of C361) holds (C362 c= B474 implies C364 c= B474));
L858: (C363 c= C364 & C364 c= C363) by L854 , L855 , L856 , L857;
thus L859: thesis by L858 , PBOOLE:146;
end;
existence
proof
defpred S19[ Function , (SortSymbol of C360) , (SortSymbol of C360) ] means ($2 = $3 & (ex B475 being (Endomorphism of C361) st $1 = ( B475 . $2 )));
defpred S20[ (SortSymbol of C360) , set , set ] means (ex B476 being (SortSymbol of C360) st (ex B477 being (Function of ( (the Sorts of C361) . B476 ) , ( (the Sorts of C361) . $1 )) st (ex B478 , B479 being (Element of C361 , B476) st (S19[ B477 , B476 , $1 ] & [ B478 , B479 ] in ( C362 . B476 ) & $2 = ( B477 . B478 ) & $3 = ( B477 . B479 )))));
consider C365 being (ManySortedRelation of (the Sorts of C361)) such that L860: (for B480 being (SortSymbol of C360) holds (for B481 , B482 being (Element of C361 , B480) holds ([ B481 , B482 ] in ( C365 . B480 ) iff S20[ B480 , B481 , B482 ]))) from MSRExistence;
reconsider D98 = C365 as (ManySortedRelation of C361);
reconsider D99 = D98 as  stable (ManySortedRelation of C361) by L860 , L836;
take D99;
thus L861: thesis by L860 , L836;
end;
end;
theorem
L863: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B483 being (ManySortedRelation of (the Sorts of R5)) holds (for B484 being (SortSymbol of R4) holds (for B485 , B486 being (Element of R5 , B484) holds ([ B485 , B486 ] in ( ( StabCl B483 ) . B484 ) iff (ex B487 , B488 being (Element of R5 , B484) st (ex B489 being (Endomorphism of R5) st ([ B487 , B488 ] in ( B483 . B484 ) & B485 = ( ( B489 . B484 ) . B487 ) & B486 = ( ( B489 . B484 ) . B488 ))))))))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C366 being (ManySortedRelation of (the Sorts of R5));
defpred S21[ (SortSymbol of R4) , set , set ] means (ex B490 being (SortSymbol of R4) st (ex B491 being (Function of ( (the Sorts of R5) . B490 ) , ( (the Sorts of R5) . $1 )) st (ex B492 , B493 being (Element of R5 , B490) st (B490 = $1 & (ex B494 being (Endomorphism of R5) st B491 = ( B494 . B490 )) & [ B492 , B493 ] in ( C366 . B490 ) & $2 = ( B491 . B492 ) & $3 = ( B491 . B493 )))));
let C367 being (SortSymbol of R4);
let C368 , C369 being (Element of R5 , C367);
consider C370 being (ManySortedRelation of (the Sorts of R5)) such that L864: (for B495 being (SortSymbol of R4) holds (for B496 , B497 being (Element of R5 , B495) holds ([ B496 , B497 ] in ( C370 . B495 ) iff S21[ B495 , B496 , B497 ]))) from MSRExistence;
reconsider D100 = C366 , D101 = C370 as (ManySortedRelation of R5);
L865: D100 c= D101 by L864 , L836;
reconsider D102 = D101 as  stable (ManySortedRelation of R5) by L864 , L836;
L866: D100 c= ( StabCl D100 ) by L853;
L867: D102 c= ( StabCl D100 ) by L866 , L864 , L836;
L868: ( StabCl D100 ) c= D102 by L865 , L853;
L869: ( StabCl D100 ) = D102 by L868 , L867 , PBOOLE:146;
thus L870:now
assume L871: [ C368 , C369 ] in ( ( StabCl C366 ) . C367 );
L872: (ex B498 being (SortSymbol of R4) st (ex B499 being (Function of ( (the Sorts of R5) . B498 ) , ( (the Sorts of R5) . C367 )) st (ex B500 , B501 being (Element of R5 , B498) st (B498 = C367 & (ex B502 being (Endomorphism of R5) st B499 = ( B502 . B498 )) & [ B500 , B501 ] in ( C366 . B498 ) & C368 = ( B499 . B500 ) & C369 = ( B499 . B501 ))))) by L871 , L864 , L869;
thus L873: (ex B503 , B504 being (Element of R5 , C367) st (ex B505 being (Endomorphism of R5) st ([ B503 , B504 ] in ( C366 . C367 ) & C368 = ( ( B505 . C367 ) . B503 ) & C369 = ( ( B505 . C367 ) . B504 )))) by L872;
end;
thus L874: thesis by L864 , L869;
end;
theorem
L875: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for R6 being (ManySortedRelation of (the Sorts of R5)) holds ( InvCl ( StabCl R6 ) ) is  stable))) by L821;
definition
let C371 being non  empty non  void ManySortedSign;
let C372 being  non-empty MSAlgebra over C371;
let C373 being (ManySortedRelation of (the Sorts of C372));
func TRS C373 ->  invariant  stable (ManySortedRelation of C372) means 
:L876: (C373 c= it & (for B506 being  invariant  stable (ManySortedRelation of C372) holds (C373 c= B506 implies it c= B506)));
uniqueness
proof
let C374 , C375 being  invariant  stable (ManySortedRelation of C372);
assume that
L877: C373 c= C374
and
L878: (for B507 being  invariant  stable (ManySortedRelation of C372) holds (C373 c= B507 implies C374 c= B507))
and
L879: C373 c= C375
and
L880: (for B508 being  invariant  stable (ManySortedRelation of C372) holds (C373 c= B508 implies C375 c= B508));
L881: (C374 c= C375 & C375 c= C374) by L877 , L878 , L879 , L880;
thus L882: thesis by L881 , PBOOLE:146;
end;
existence
proof
reconsider D103 = ( InvCl ( StabCl C373 ) ) as  invariant  stable (ManySortedRelation of C372) by L821;
take D103;
L883: ( StabCl C373 ) c= ( InvCl ( StabCl C373 ) ) by L799;
L884: C373 c= ( StabCl C373 ) by L853;
thus L885: C373 c= D103 by L884 , L883 , PBOOLE:13;
let C376 being  invariant  stable (ManySortedRelation of C372);
assume L886: C373 c= C376;
L887: ( StabCl C373 ) c= C376 by L886 , L853;
thus L888: thesis by L887 , L799;
end;
end;
registration
let C377 being non  empty non  void ManySortedSign;
let C378 being  non-empty MSAlgebra over C377;
let C379 being  non-empty (ManySortedRelation of C378);
cluster ( InvCl C379 ) ->  non-empty;
coherence
proof
let C380 being set;
assume L890: C380 in (the carrier of C377);
reconsider D104 = C380 as (SortSymbol of C377) by L890;
set D105 = the (Element of ( C379 . D104 ));
L891: C379 c= ( InvCl C379 ) by L799;
L892: ( C379 . D104 ) c= ( ( InvCl C379 ) . D104 ) by L891 , PBOOLE:def 2;
L893: D105 in ( C379 . D104 );
thus L894: thesis by L893 , L892;
end;
cluster ( StabCl C379 ) ->  non-empty;
coherence
proof
let C381 being set;
assume L895: C381 in (the carrier of C377);
reconsider D106 = C381 as (SortSymbol of C377) by L895;
set D107 = the (Element of ( C379 . D106 ));
L896: C379 c= ( StabCl C379 ) by L853;
L897: ( C379 . D106 ) c= ( ( StabCl C379 ) . D106 ) by L896 , PBOOLE:def 2;
L898: D107 in ( C379 . D106 );
thus L899: thesis by L898 , L897;
end;
cluster ( TRS C379 ) ->  non-empty;
coherence
proof
let C382 being set;
assume L900: C382 in (the carrier of C377);
reconsider D108 = C382 as (SortSymbol of C377) by L900;
set D109 = the (Element of ( C379 . D108 ));
L901: C379 c= ( TRS C379 ) by L876;
L902: ( C379 . D108 ) c= ( ( TRS C379 ) . D108 ) by L901 , PBOOLE:def 2;
L903: D109 in ( C379 . D108 );
thus L904: thesis by L903 , L902;
end;
end;
theorem
L906: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B509 being  invariant (ManySortedRelation of R5) holds ( InvCl B509 ) = B509)))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C383 being  invariant (ManySortedRelation of R5);
L907: (( InvCl C383 ) c= C383 & C383 c= ( InvCl C383 )) by L799;
thus L908: thesis by L907 , PBOOLE:146;
end;
theorem
L909: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B510 being  stable (ManySortedRelation of R5) holds ( StabCl B510 ) = B510)))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C384 being  stable (ManySortedRelation of R5);
L910: (( StabCl C384 ) c= C384 & C384 c= ( StabCl C384 )) by L853;
thus L911: thesis by L910 , PBOOLE:146;
end;
theorem
L912: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B511 being  invariant  stable (ManySortedRelation of R5) holds ( TRS B511 ) = B511)))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C385 being  invariant  stable (ManySortedRelation of R5);
L913: (( TRS C385 ) c= C385 & C385 c= ( TRS C385 )) by L876;
thus L914: thesis by L913 , PBOOLE:146;
end;
theorem
L915: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for R6 being (ManySortedRelation of (the Sorts of R5)) holds (( StabCl R6 ) c= ( TRS R6 ) & ( InvCl R6 ) c= ( TRS R6 ) & ( StabCl ( InvCl R6 ) ) c= ( TRS R6 )))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let R6 being (ManySortedRelation of (the Sorts of R5));
L916: R6 c= ( TRS R6 ) by L876;
thus L917: (( StabCl R6 ) c= ( TRS R6 ) & ( InvCl R6 ) c= ( TRS R6 )) by L916 , L799 , L853;
thus L918: thesis by L917 , L853;
end;
theorem
L919: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for R6 being (ManySortedRelation of (the Sorts of R5)) holds ( InvCl ( StabCl R6 ) ) = ( TRS R6 ))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let R6 being (ManySortedRelation of (the Sorts of R5));
L920: ( StabCl R6 ) c= ( InvCl ( StabCl R6 ) ) by L799;
L921: R6 c= ( TRS R6 ) by L876;
L922: ( StabCl R6 ) c= ( TRS R6 ) by L921 , L853;
L923: ( InvCl ( StabCl R6 ) ) c= ( TRS R6 ) by L922 , L799;
L924: ( InvCl ( StabCl R6 ) ) is  invariant  stable  invariant  stable  invariant  stable  invariant  stable (ManySortedRelation of R5) by L821;
L925: R6 c= ( StabCl R6 ) by L853;
L926: R6 c= ( InvCl ( StabCl R6 ) ) by L925 , L920 , PBOOLE:13;
L927: ( TRS R6 ) c= ( InvCl ( StabCl R6 ) ) by L926 , L924 , L876;
thus L928: thesis by L927 , L923 , PBOOLE:146;
end;
theorem
L929: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B512 being (ManySortedRelation of (the Sorts of R5)) holds (for B513 being (SortSymbol of R4) holds (for B514 , B515 being (Element of R5 , B513) holds ([ B514 , B515 ] in ( ( TRS B512 ) . B513 ) iff (ex B516 being (SortSymbol of R4) st (( TranslationRel R4 ) reduces B516 , B513 & (ex B517 , B518 being (Element of R5 , B516) st (ex B519 being (Endomorphism of R5) st (ex B520 being (Translation of R5 , B516 , B513) st ([ B517 , B518 ] in ( B512 . B516 ) & B514 = ( B520 . ( ( B519 . B516 ) . B517 ) ) & B515 = ( B520 . ( ( B519 . B516 ) . B518 ) )))))))))))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C386 being (ManySortedRelation of (the Sorts of R5));
let C387 being (SortSymbol of R4);
let C388 , C389 being (Element of R5 , C387);
L930: ( InvCl ( StabCl C386 ) ) = ( TRS C386 ) by L919;
thus L931:now
assume L932: [ C388 , C389 ] in ( ( TRS C386 ) . C387 );
consider C390 being (SortSymbol of R4), C391 , C392 being (Element of R5 , C390), C393 being (Translation of R5 , C390 , C387) such that L933: ( TranslationRel R4 ) reduces C390 , C387 and L934: [ C391 , C392 ] in ( ( StabCl C386 ) . C390 ) and L935: C388 = ( C393 . C391 ) and L936: C389 = ( C393 . C392 ) by L932 , L930 , L809;
take D110 = C390;
thus L937: ( TranslationRel R4 ) reduces D110 , C387 by L933;
reconsider D111 = C393 as (Translation of R5 , D110 , C387);
consider C394 , C395 being (Element of R5 , D110), C396 being (Endomorphism of R5) such that L938: [ C394 , C395 ] in ( C386 . D110 ) and L939: C391 = ( ( C396 . D110 ) . C394 ) and L940: C392 = ( ( C396 . D110 ) . C395 ) by L934 , L863;
take D112 = C394;
take D113 = C395;
take D114 = C396;
take D115 = D111;
thus L941: ([ D112 , D113 ] in ( C386 . D110 ) & C388 = ( D115 . ( ( D114 . D110 ) . D112 ) ) & C389 = ( D115 . ( ( D114 . D110 ) . D113 ) )) by L935 , L936 , L938 , L939 , L940;
end;
given C397 being (SortSymbol of R4) such that
L942: ( TranslationRel R4 ) reduces C397 , C387
and
L943: (ex B521 , B522 being (Element of R5 , C397) st (ex B523 being (Endomorphism of R5) st (ex B524 being (Translation of R5 , C397 , C387) st ([ B521 , B522 ] in ( C386 . C397 ) & C388 = ( B524 . ( ( B523 . C397 ) . B521 ) ) & C389 = ( B524 . ( ( B523 . C397 ) . B522 ) )))));

consider C398 , C399 being (Element of R5 , C397), C400 being (Endomorphism of R5), C401 being (Translation of R5 , C397 , C387) such that L944: [ C398 , C399 ] in ( C386 . C397 ) and L945: C388 = ( C401 . ( ( C400 . C397 ) . C398 ) ) and L946: C389 = ( C401 . ( ( C400 . C397 ) . C399 ) ) by L943;
L947: [ ( ( C400 . C397 ) . C398 ) , ( ( C400 . C397 ) . C399 ) ] in ( ( StabCl C386 ) . C397 ) by L944 , L863;
thus L948: thesis by L947 , L930 , L942 , L945 , L946 , L809;
end;
begin
theorem
L949: (for B525 being set holds (for B526 , B527 being (Relation of B525) holds ((for B528 , B529 being set holds ((B528 in B525 & B529 in B525) implies ([ B528 , B529 ] in B527 iff B528 , B529 are_convertible_wrt B526))) implies B527 is  total  symmetric  transitive)))
proof
let C402 being set;
let C403 , C404 being (Relation of C402);
set D116 = C402;
assume L950: (for B530 , B531 being set holds ((B530 in C402 & B531 in C402) implies ([ B530 , B531 ] in C404 iff B530 , B531 are_convertible_wrt C403)));
L951:
now
let C405 being set;
L952: C405 , C405 are_convertible_wrt C403 by REWRITE1:26;
thus L953: (C405 in D116 implies [ C405 , C405 ] in C404) by L952 , L950;
end;
L954: C404 is_reflexive_in D116 by L951 , RELAT_2:def 1;
L955: ( field C404 ) = D116 by L954 , ORDERS_1:13;
L956: ( dom C404 ) = D116 by L954 , ORDERS_1:13;
thus L957: C404 is  total by L956 , PARTFUN1:def 2;
L958:
now
let C406 , C407 being set;
assume that
L959: C406 in D116
and
L960: C407 in D116;
assume L961: [ C406 , C407 ] in C404;
L962: C406 , C407 are_convertible_wrt C403 by L961 , L950 , L959 , L960;
L963: C407 , C406 are_convertible_wrt C403 by L962 , REWRITE1:31;
thus L964: [ C407 , C406 ] in C404 by L963 , L950 , L959 , L960;
end;
L965: C404 is_symmetric_in D116 by L958 , RELAT_2:def 3;
thus L966: C404 is  symmetric by L965 , L955 , RELAT_2:def 11;
L967:
now
let C408 , C409 , C410 being set;
assume that
L968: C408 in D116
and
L969: C409 in D116
and
L970: C410 in D116;
assume that
L971: [ C408 , C409 ] in C404
and
L972: [ C409 , C410 ] in C404;
L973: C409 , C410 are_convertible_wrt C403 by L950 , L969 , L970 , L972;
L974: C408 , C409 are_convertible_wrt C403 by L950 , L968 , L969 , L971;
L975: C408 , C410 are_convertible_wrt C403 by L974 , L973 , REWRITE1:30;
thus L976: [ C408 , C410 ] in C404 by L975 , L950 , L968 , L970;
end;
L977: C404 is_transitive_in D116 by L967 , RELAT_2:def 8;
thus L978: thesis by L977 , L955 , RELAT_2:def 16;
end;
theorem
L979: (for B532 being set holds (for B533 being (Relation of B532) holds (for B534 being (Equivalence_Relation of B532) holds (B533 c= B534 implies (for B535 , B536 being set holds ((B535 in B532 & B535 , B536 are_convertible_wrt B533) implies [ B535 , B536 ] in B534))))))
proof
let C411 being set;
let C412 being (Relation of C411);
let C413 being (Equivalence_Relation of C411);
assume that
L980: C412 c= C413;
let C414 , C415 being set;
assume that
L981: C414 in C411;
assume L982: ( C412 \/ ( C412 ~ ) ) reduces C414 , C415;
consider C416 being (RedSequence of ( C412 \/ ( C412 ~ ) )) such that L983: ( C416 . 1 ) = C414 and L984: ( C416 . ( len C416 ) ) = C415 by L982 , REWRITE1:def 3;
defpred S22[ (Element of ( NAT )) ] means ($1 in ( dom C416 ) implies [ C414 , ( C416 . $1 ) ] in C413);
L985: (for B537 being (Element of ( NAT )) holds (S22[ B537 ] implies S22[ ( B537 + 1 ) ]))
proof
let C417 being (Element of ( NAT ));
assume that
L986: (C417 in ( dom C416 ) implies [ C414 , ( C416 . C417 ) ] in C413)
and
L987: ( C417 + 1 ) in ( dom C416 );
L988: C417 <= ( C417 + 1 ) by NAT_1:11;
L989: ( C417 + 1 ) <= ( len C416 ) by L987 , FINSEQ_3:25;
L990: C417 <= ( len C416 ) by L989 , L988 , XXREAL_0:2;
per cases ;
suppose L991: C417 = ( 0 );

thus L992: thesis by L991 , L981 , L983 , EQREL_1:5;
end;
suppose L993: C417 > ( 0 );

L994: C417 >= ( ( 0 ) + 1 ) by L993 , NAT_1:13;
L995: C417 in ( dom C416 ) by L994 , L990 , FINSEQ_3:25;
L996: [ ( C416 . C417 ) , ( C416 . ( C417 + 1 ) ) ] in ( C412 \/ ( C412 ~ ) ) by L995 , L987 , REWRITE1:def 2;
reconsider D117 = ( C416 . C417 ) , D118 = ( C416 . ( C417 + 1 ) ) as (Element of C411) by L996 , ZFMISC_1:87;
L997: ([ ( C416 . C417 ) , ( C416 . ( C417 + 1 ) ) ] in C412 or [ ( C416 . C417 ) , ( C416 . ( C417 + 1 ) ) ] in ( C412 ~ )) by L996 , XBOOLE_0:def 3;
L998: ([ ( C416 . C417 ) , ( C416 . ( C417 + 1 ) ) ] in C412 or [ ( C416 . ( C417 + 1 ) ) , ( C416 . C417 ) ] in C412) by L997 , RELAT_1:def 7;
L999: [ D117 , D118 ] in C413 by L998 , L980 , EQREL_1:6;
thus L1000: thesis by L999 , L986 , L990 , L994 , EQREL_1:7 , FINSEQ_3:25;
end;
end;
L1002: ( len C416 ) in ( dom C416 ) by FINSEQ_5:6;
L1003: S22[ ( 0 ) ] by FINSEQ_3:25;
L1004: (for B538 being (Element of ( NAT )) holds S22[ B538 ]) from NAT_1:sch 1(L1003 , L985);
thus L1005: thesis by L1004 , L984 , L1002;
end;
theorem
L1006: (for B539 being non  empty set holds (for B540 being (Relation of B539) holds (for B541 , B542 being (Element of B539) holds ([ B541 , B542 ] in ( EqCl B540 ) iff B541 , B542 are_convertible_wrt B540))))
proof
let C418 being non  empty set;
let C419 being (Relation of C418);
defpred S23[ set , set ] means $1 , $2 are_convertible_wrt C419;
consider C420 being (Relation of C418) such that L1007: (for B543 , B544 being set holds ([ B543 , B544 ] in C420 iff (B543 in C418 & B544 in C418 & S23[ B543 , B544 ]))) from RELSET_1:sch 1;
L1008: (for B545 , B546 being set holds ((B545 in C418 & B546 in C418) implies ([ B545 , B546 ] in C420 iff B545 , B546 are_convertible_wrt C419))) by L1007;
reconsider D119 = C420 as (Equivalence_Relation of C418) by L1008 , L949;
L1009:
now
let C421 being (Equivalence_Relation of C418);
assume L1010: C419 c= C421;
thus L1011: D119 c= C421
proof
let C422 , C423 being set;
assume L1012: [ C422 , C423 ] in D119;
L1013: C422 , C423 are_convertible_wrt C419 by L1012 , L1007;
L1014: C422 in C418 by L1007 , L1012;
thus L1015: thesis by L1014 , L1010 , L1013 , L979;
end;

end;
L1012: C419 c= D119
proof
let C424 , C425 being set;
assume L1013: [ C424 , C425 ] in C419;
L1014: C425 in C418 by L1013 , ZFMISC_1:87;
L1015: C424 , C425 are_convertible_wrt C419 by L1013 , REWRITE1:29;
L1016: C424 in C418 by L1013 , ZFMISC_1:87;
thus L1017: thesis by L1016 , L1007 , L1014 , L1015;
end;
L1018: D119 = ( EqCl C419 ) by L1012 , L1009 , MSUALG_5:def 1;
thus L1019: thesis by L1018 , L1007;
end;
theorem
L1020: (for B547 being non  empty set holds (for B548 being  non-empty (ManySortedSet of B547) holds (for B549 being (ManySortedRelation of B548) holds (for B550 being (Element of B547) holds (for B551 , B552 being (Element of ( B548 . B550 )) holds ([ B551 , B552 ] in ( ( EqCl B549 ) . B550 ) iff B551 , B552 are_convertible_wrt ( B549 . B550 )))))))
proof
let C426 being non  empty set;
let C427 being  non-empty (ManySortedSet of C426);
let C428 being (ManySortedRelation of C427);
let C429 being (Element of C426);
L1021: ( ( EqCl C428 ) . C429 ) = ( EqCl ( C428 . C429 ) ) by MSUALG_5:def 3;
thus L1022: thesis by L1021 , L1006;
end;
definition
let C430 being non  empty non  void ManySortedSign;
let C431 being  non-empty MSAlgebra over C430;
mode EquationalTheory of C431
 is  stable  invariant  MSEquivalence-like (ManySortedRelation of C431);
let C432 being (ManySortedRelation of C431);
func EqCl (C432 , C431) ->  MSEquivalence-like (ManySortedRelation of C431) equals 
( EqCl C432 );
coherence by MSUALG_4:def 3;
end;
theorem
L1024: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B553 being (ManySortedRelation of R5) holds B553 c= ( EqCl (B553 , R5) ))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C433 being (ManySortedRelation of R5);
let C434 being set;
assume L1025: C434 in (the carrier of R4);
reconsider D120 = C434 as (SortSymbol of R4) by L1025;
L1026: ( ( EqCl (C433 , R5) ) . D120 ) = ( EqCl ( C433 . D120 ) ) by MSUALG_5:def 3;
thus L1027: thesis by L1026 , MSUALG_5:def 1;
end;
theorem
L1028: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B554 being (ManySortedRelation of R5) holds (for B555 being  MSEquivalence-like (ManySortedRelation of R5) holds (B554 c= B555 implies ( EqCl (B554 , R5) ) c= B555)))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C435 being (ManySortedRelation of R5);
let C436 being  MSEquivalence-like (ManySortedRelation of R5);
assume that
L1029: C435 c= C436;
let C437 being set;
assume L1030: C437 in (the carrier of R4);
reconsider D121 = C437 as (SortSymbol of R4) by L1030;
L1031: ( ( EqCl (C435 , R5) ) . D121 ) = ( EqCl ( C435 . D121 ) ) by MSUALG_5:def 3;
L1032: ( C435 . D121 ) c= ( C436 . D121 ) by L1029 , PBOOLE:def 2;
thus L1033: thesis by L1032 , L1031 , MSUALG_5:def 1;
end;
theorem
L1034: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B556 being  stable (ManySortedRelation of R5) holds (for B557 being (SortSymbol of R4) holds (for B558 , B559 being (Element of R5 , B557) holds (B558 , B559 are_convertible_wrt ( B556 . B557 ) implies (for B560 being (Endomorphism of R5) holds ( ( B560 . B557 ) . B558 ) , ( ( B560 . B557 ) . B559 ) are_convertible_wrt ( B556 . B557 ))))))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C438 being  stable (ManySortedRelation of R5);
let C439 being (SortSymbol of R4);
let C440 , C441 being (Element of R5 , C439);
assume L1035: ( ( C438 . C439 ) \/ ( ( C438 . C439 ) ~ ) ) reduces C440 , C441;
consider C442 being (RedSequence of ( ( C438 . C439 ) \/ ( ( C438 . C439 ) ~ ) )) such that L1036: ( C442 . 1 ) = C440 and L1037: ( C442 . ( len C442 ) ) = C441 by L1035 , REWRITE1:def 3;
let C443 being (Endomorphism of R5);
defpred S24[ (Element of ( NAT )) ] means ($1 in ( dom C442 ) implies ( ( C443 . C439 ) . C440 ) , ( ( C443 . C439 ) . ( C442 . $1 ) ) are_convertible_wrt ( C438 . C439 ));
L1038: (for B561 being (Element of ( NAT )) holds (S24[ B561 ] implies S24[ ( B561 + 1 ) ]))
proof
let C444 being (Element of ( NAT ));
assume that
L1039: (C444 in ( dom C442 ) implies ( ( C443 . C439 ) . C440 ) , ( ( C443 . C439 ) . ( C442 . C444 ) ) are_convertible_wrt ( C438 . C439 ))
and
L1040: ( C444 + 1 ) in ( dom C442 );
L1041: C444 <= ( C444 + 1 ) by NAT_1:11;
L1042: ( C444 + 1 ) <= ( len C442 ) by L1040 , FINSEQ_3:25;
L1043: C444 <= ( len C442 ) by L1042 , L1041 , XXREAL_0:2;
per cases ;
suppose L1044: C444 = ( 0 );

thus L1045: thesis by L1044 , L1036 , REWRITE1:26;
end;
suppose L1046: C444 > ( 0 );

L1047: C444 >= ( ( 0 ) + 1 ) by L1046 , NAT_1:13;
L1048: C444 in ( dom C442 ) by L1047 , L1043 , FINSEQ_3:25;
L1049: [ ( C442 . C444 ) , ( C442 . ( C444 + 1 ) ) ] in ( ( C438 . C439 ) \/ ( ( C438 . C439 ) ~ ) ) by L1048 , L1040 , REWRITE1:def 2;
reconsider D122 = ( C442 . C444 ) , D123 = ( C442 . ( C444 + 1 ) ) as (Element of R5 , C439) by L1049 , ZFMISC_1:87;
L1050: ([ ( C442 . C444 ) , ( C442 . ( C444 + 1 ) ) ] in ( C438 . C439 ) or [ ( C442 . C444 ) , ( C442 . ( C444 + 1 ) ) ] in ( ( C438 . C439 ) ~ )) by L1049 , XBOOLE_0:def 3;
L1051: ([ ( C442 . C444 ) , ( C442 . ( C444 + 1 ) ) ] in ( C438 . C439 ) or [ ( C442 . ( C444 + 1 ) ) , ( C442 . C444 ) ] in ( C438 . C439 )) by L1050 , RELAT_1:def 7;
L1052: ([ ( ( C443 . C439 ) . D122 ) , ( ( C443 . C439 ) . D123 ) ] in ( C438 . C439 ) or [ ( ( C443 . C439 ) . D123 ) , ( ( C443 . C439 ) . D122 ) ] in ( C438 . C439 )) by L1051 , L531;
L1053: (( ( C443 . C439 ) . D122 ) , ( ( C443 . C439 ) . D123 ) are_convertible_wrt ( C438 . C439 ) or ( ( C443 . C439 ) . D123 ) , ( ( C443 . C439 ) . D122 ) are_convertible_wrt ( C438 . C439 )) by L1052 , REWRITE1:29;
L1054: ( ( C443 . C439 ) . D122 ) , ( ( C443 . C439 ) . D123 ) are_convertible_wrt ( C438 . C439 ) by L1053 , REWRITE1:31;
thus L1055: thesis by L1054 , L1039 , L1043 , L1047 , FINSEQ_3:25 , REWRITE1:30;
end;
end;
L1057: ( len C442 ) in ( dom C442 ) by FINSEQ_5:6;
L1058: S24[ ( 0 ) ] by FINSEQ_3:25;
L1059: (for B562 being (Element of ( NAT )) holds S24[ B562 ]) from NAT_1:sch 1(L1058 , L1038);
thus L1060: thesis by L1059 , L1037 , L1057;
end;
theorem
L1061: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B563 being  stable (ManySortedRelation of R5) holds ( EqCl (B563 , R5) ) is  stable)))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C445 being  stable (ManySortedRelation of R5);
let C446 being (Endomorphism of R5);
let C447 being (SortSymbol of R4);
let C448 , C449 being set;
assume L1062: [ C448 , C449 ] in ( ( EqCl (C445 , R5) ) . C447 );
reconsider D124 = C448 , D125 = C449 as (Element of R5 , C447) by L1062 , ZFMISC_1:87;
L1063: D124 , D125 are_convertible_wrt ( C445 . C447 ) by L1062 , L1020;
L1064: ( ( C446 . C447 ) . D124 ) , ( ( C446 . C447 ) . D125 ) are_convertible_wrt ( C445 . C447 ) by L1063 , L1034;
thus L1065: thesis by L1064 , L1020;
end;
registration
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C450 being  stable (ManySortedRelation of R5);
cluster ( EqCl (C450 , R5) ) ->  stable;
coherence by L1061;
end;
theorem
L1067: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B564 being  invariant (ManySortedRelation of R5) holds (for B565 , B566 being (SortSymbol of R4) holds (for B567 , B568 being (Element of R5 , B565) holds (B567 , B568 are_convertible_wrt ( B564 . B565 ) implies (for B569 being Function holds (B569 is_e.translation_of R5 , B565 , B566 implies ( B569 . B567 ) , ( B569 . B568 ) are_convertible_wrt ( B564 . B566 )))))))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C451 being  invariant (ManySortedRelation of R5);
let C452 , C453 being (SortSymbol of R4);
let C454 , C455 being (Element of R5 , C452);
assume L1068: ( ( C451 . C452 ) \/ ( ( C451 . C452 ) ~ ) ) reduces C454 , C455;
consider C456 being (RedSequence of ( ( C451 . C452 ) \/ ( ( C451 . C452 ) ~ ) )) such that L1069: ( C456 . 1 ) = C454 and L1070: ( C456 . ( len C456 ) ) = C455 by L1068 , REWRITE1:def 3;
let C457 being Function;
assume that
L1071: C457 is_e.translation_of R5 , C452 , C453;
defpred S25[ (Element of ( NAT )) ] means ($1 in ( dom C456 ) implies ( C457 . C454 ) , ( C457 . ( C456 . $1 ) ) are_convertible_wrt ( C451 . C453 ));
L1072: (for B570 being (Element of ( NAT )) holds (S25[ B570 ] implies S25[ ( B570 + 1 ) ]))
proof
let C458 being (Element of ( NAT ));
assume that
L1073: (C458 in ( dom C456 ) implies ( C457 . C454 ) , ( C457 . ( C456 . C458 ) ) are_convertible_wrt ( C451 . C453 ))
and
L1074: ( C458 + 1 ) in ( dom C456 );
L1075: C458 <= ( C458 + 1 ) by NAT_1:11;
L1076: ( C458 + 1 ) <= ( len C456 ) by L1074 , FINSEQ_3:25;
L1077: C458 <= ( len C456 ) by L1076 , L1075 , XXREAL_0:2;
per cases ;
suppose L1078: C458 = ( 0 );

thus L1079: thesis by L1078 , L1069 , REWRITE1:26;
end;
suppose L1080: C458 > ( 0 );

L1081: C458 >= ( ( 0 ) + 1 ) by L1080 , NAT_1:13;
L1082: C458 in ( dom C456 ) by L1081 , L1077 , FINSEQ_3:25;
L1083: [ ( C456 . C458 ) , ( C456 . ( C458 + 1 ) ) ] in ( ( C451 . C452 ) \/ ( ( C451 . C452 ) ~ ) ) by L1082 , L1074 , REWRITE1:def 2;
reconsider D126 = ( C456 . C458 ) , D127 = ( C456 . ( C458 + 1 ) ) as (Element of R5 , C452) by L1083 , ZFMISC_1:87;
L1084: ([ ( C456 . C458 ) , ( C456 . ( C458 + 1 ) ) ] in ( C451 . C452 ) or [ ( C456 . C458 ) , ( C456 . ( C458 + 1 ) ) ] in ( ( C451 . C452 ) ~ )) by L1083 , XBOOLE_0:def 3;
L1085: ([ ( C456 . C458 ) , ( C456 . ( C458 + 1 ) ) ] in ( C451 . C452 ) or [ ( C456 . ( C458 + 1 ) ) , ( C456 . C458 ) ] in ( C451 . C452 )) by L1084 , RELAT_1:def 7;
L1086: ([ ( C457 . D126 ) , ( C457 . D127 ) ] in ( C451 . C453 ) or [ ( C457 . D127 ) , ( C457 . D126 ) ] in ( C451 . C453 )) by L1085 , L1071 , L530;
L1087: (( C457 . D126 ) , ( C457 . D127 ) are_convertible_wrt ( C451 . C453 ) or ( C457 . D127 ) , ( C457 . D126 ) are_convertible_wrt ( C451 . C453 )) by L1086 , REWRITE1:29;
L1088: ( C457 . D126 ) , ( C457 . D127 ) are_convertible_wrt ( C451 . C453 ) by L1087 , REWRITE1:31;
thus L1089: thesis by L1088 , L1073 , L1077 , L1081 , FINSEQ_3:25 , REWRITE1:30;
end;
end;
L1091: ( len C456 ) in ( dom C456 ) by FINSEQ_5:6;
L1092: S25[ ( 0 ) ] by FINSEQ_3:25;
L1093: (for B571 being (Element of ( NAT )) holds S25[ B571 ]) from NAT_1:sch 1(L1092 , L1072);
thus L1094: thesis by L1093 , L1070 , L1091;
end;
theorem
L1095: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B572 being  invariant (ManySortedRelation of R5) holds ( EqCl (B572 , R5) ) is  invariant)))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C459 being  invariant (ManySortedRelation of R5);
let C460 , C461 being (SortSymbol of R4);
let C462 being Function;
assume L1096: C462 is_e.translation_of R5 , C460 , C461;
reconsider D128 = C462 as (Function of ( (the Sorts of R5) . C460 ) , ( (the Sorts of R5) . C461 )) by L1096 , L180;
let C463 , C464 being set;
assume L1097: [ C463 , C464 ] in ( ( EqCl (C459 , R5) ) . C460 );
reconsider D129 = C463 , D130 = C464 as (Element of R5 , C460) by L1097 , ZFMISC_1:87;
L1098: D129 , D130 are_convertible_wrt ( C459 . C460 ) by L1097 , L1020;
L1099: ( D128 . D129 ) , ( D128 . D130 ) are_convertible_wrt ( C459 . C461 ) by L1098 , L1096 , L1067;
thus L1100: thesis by L1099 , L1020;
end;
registration
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C465 being  invariant (ManySortedRelation of R5);
cluster ( EqCl (C465 , R5) ) ->  invariant;
coherence by L1095;
end;
theorem
L1102: (for B573 being non  empty set holds (for B574 being  non-empty (ManySortedSet of B573) holds (for B575 , B576 being (ManySortedRelation of B574) holds ((for B577 being (Element of B573) holds (for B578 , B579 being (Element of ( B574 . B577 )) holds ([ B578 , B579 ] in ( B576 . B577 ) iff B578 , B579 are_convertible_wrt ( B575 . B577 )))) implies B576 is  MSEquivalence_Relation-like))))
proof
let C466 being non  empty set;
let C467 being  non-empty (ManySortedSet of C466);
let C468 , C469 being (ManySortedRelation of C467);
assume L1103: (for B580 being (Element of C466) holds (for B581 , B582 being (Element of ( C467 . B580 )) holds ([ B581 , B582 ] in ( C469 . B580 ) iff B581 , B582 are_convertible_wrt ( C468 . B580 ))));
let C470 being set;
let C471 being (Relation of ( C467 . C470 ));
assume L1104: C470 in C466;
reconsider D131 = C470 as (Element of C466) by L1104;
L1105: (for B583 , B584 being set holds ((B583 in ( C467 . D131 ) & B584 in ( C467 . D131 )) implies ([ B583 , B584 ] in ( C469 . D131 ) iff B583 , B584 are_convertible_wrt ( C468 . D131 )))) by L1103;
thus L1106: thesis by L1105 , L949;
end;
theorem
L1107: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B585 , B586 being (ManySortedRelation of R5) holds ((for B587 being (SortSymbol of R4) holds (for B588 , B589 being (Element of R5 , B587) holds ([ B588 , B589 ] in ( B586 . B587 ) iff B588 , B589 are_convertible_wrt ( ( TRS B585 ) . B587 )))) implies B586 is (EquationalTheory of R5)))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C472 , C473 being (ManySortedRelation of R5);
assume L1108: (for B590 being (SortSymbol of R4) holds (for B591 , B592 being (Element of R5 , B590) holds ([ B591 , B592 ] in ( C473 . B590 ) iff B591 , B592 are_convertible_wrt ( ( TRS C472 ) . B590 ))));
L1109: C473 is  stable
proof
let C474 being (Endomorphism of R5);
let C475 being (SortSymbol of R4);
let C476 , C477 being set;
assume L1110: [ C476 , C477 ] in ( C473 . C475 );
reconsider D132 = C476 , D133 = C477 as (Element of R5 , C475) by L1110 , ZFMISC_1:87;
reconsider D134 = ( ( C474 . C475 ) . D132 ) , D135 = ( ( C474 . C475 ) . D133 ) as (Element of R5 , C475);
L1111: D132 , D133 are_convertible_wrt ( ( TRS C472 ) . C475 ) by L1108 , L1110;
L1112: D134 , D135 are_convertible_wrt ( ( TRS C472 ) . C475 ) by L1111 , L1034;
thus L1113: thesis by L1112 , L1108;
end;
L1114: C473 is  invariant
proof
let C478 , C479 being (SortSymbol of R4);
let C480 being Function;
assume L1115: C480 is_e.translation_of R5 , C478 , C479;
reconsider D136 = C480 as (Function of ( (the Sorts of R5) . C478 ) , ( (the Sorts of R5) . C479 )) by L1115 , L180;
let C481 , C482 being set;
assume L1116: [ C481 , C482 ] in ( C473 . C478 );
reconsider D137 = C481 , D138 = C482 as (Element of R5 , C478) by L1116 , ZFMISC_1:87;
L1117: D137 , D138 are_convertible_wrt ( ( TRS C472 ) . C478 ) by L1108 , L1116;
L1118: ( C480 . D137 ) , ( C480 . D138 ) are_convertible_wrt ( ( TRS C472 ) . C479 ) by L1117 , L1115 , L1067;
L1119: ( C480 . D138 ) = ( D136 . D138 );
L1120: ( C480 . D137 ) = ( D136 . D137 );
thus L1121: thesis by L1120 , L1108 , L1119 , L1118;
end;
L1122: C473 is  MSEquivalence_Relation-like by L1108 , L1102;
thus L1123: thesis by L1122 , L1109 , L1114 , MSUALG_4:def 3;
end;
theorem
L1124: (for B593 being non  empty set holds (for B594 being  non-empty (ManySortedSet of B593) holds (for B595 being (ManySortedRelation of B594) holds (for B596 being  MSEquivalence_Relation-like (ManySortedRelation of B594) holds (B595 c= B596 implies (for B597 being (Element of B593) holds (for B598 , B599 being (Element of ( B594 . B597 )) holds (B598 , B599 are_convertible_wrt ( B595 . B597 ) implies [ B598 , B599 ] in ( B596 . B597 )))))))))
proof
let C483 being non  empty set;
let C484 being  non-empty (ManySortedSet of C483);
let C485 being (ManySortedRelation of C484);
let C486 being  MSEquivalence_Relation-like (ManySortedRelation of C484);
assume that
L1125: C485 c= C486;
let C487 being (Element of C483);
L1126: ( C486 . C487 ) is (Equivalence_Relation of ( C484 . C487 )) by MSUALG_4:def 2;
L1127: ( C485 . C487 ) c= ( C486 . C487 ) by L1125 , PBOOLE:def 2;
thus L1128: thesis by L1127 , L1126 , L979;
end;
definition
let C488 being non  empty non  void ManySortedSign;
let C489 being  non-empty MSAlgebra over C488;
let C490 being (ManySortedRelation of (the Sorts of C489));
func EqTh C490 -> (EquationalTheory of C489) means 
:L1129: (C490 c= it & (for B600 being (EquationalTheory of C489) holds (C490 c= B600 implies it c= B600)));
uniqueness
proof
let C491 , C492 being (EquationalTheory of C489);
assume that
L1130: C490 c= C491
and
L1131: (for B601 being (EquationalTheory of C489) holds (C490 c= B601 implies C491 c= B601))
and
L1132: C490 c= C492
and
L1133: (for B602 being (EquationalTheory of C489) holds (C490 c= B602 implies C492 c= B602));
L1134: (C491 c= C492 & C492 c= C491) by L1130 , L1131 , L1132 , L1133;
thus L1135: thesis by L1134 , PBOOLE:146;
end;
existence
proof
defpred S26[ (SortSymbol of C488) , set , set ] means $2 , $3 are_convertible_wrt ( ( TRS C490 ) . $1 );
consider C493 being (ManySortedRelation of (the Sorts of C489)) such that L1136: (for B603 being (SortSymbol of C488) holds (for B604 , B605 being (Element of C489 , B603) holds ([ B604 , B605 ] in ( C493 . B603 ) iff S26[ B603 , B604 , B605 ]))) from MSRExistence;
reconsider D139 = C493 as (ManySortedRelation of C489);
reconsider D140 = D139 as (EquationalTheory of C489) by L1136 , L1107;
take D140;
thus L1137: C490 c= D140
proof
let C494 being set;
assume L1138: C494 in (the carrier of C488);
reconsider D141 = C494 as (SortSymbol of C488) by L1138;
L1139: ( C490 . D141 ) c= ( D140 . D141 )
proof
let C495 , C496 being set;
assume L1140: [ C495 , C496 ] in ( C490 . D141 );
reconsider D142 = C495 , D143 = C496 as (Element of C489 , D141) by L1140 , ZFMISC_1:87;
L1141: C490 c= ( TRS C490 ) by L876;
L1142: ( C490 . D141 ) c= ( ( TRS C490 ) . D141 ) by L1141 , PBOOLE:def 2;
L1143: D142 , D143 are_convertible_wrt ( ( TRS C490 ) . D141 ) by L1142 , L1140 , REWRITE1:29;
thus L1144: thesis by L1143 , L1136;
end;
thus L1145: thesis by L1139;
end;

let C497 being (EquationalTheory of C489);
assume L1146: C490 c= C497;
let C498 being set;
assume L1147: C498 in (the carrier of C488);
reconsider D144 = C498 as (SortSymbol of C488) by L1147;
L1148: ( TRS C490 ) c= C497 by L1146 , L876;
L1149: ( D140 . D144 ) c= ( C497 . D144 )
proof
let C499 , C500 being set;
assume L1150: [ C499 , C500 ] in ( D140 . D144 );
reconsider D145 = C499 , D146 = C500 as (Element of C489 , D144) by L1150 , ZFMISC_1:87;
L1151: D145 , D146 are_convertible_wrt ( ( TRS C490 ) . D144 ) by L1136 , L1150;
thus L1152: thesis by L1151 , L1148 , L1124;
end;
thus L1153: thesis by L1149;
end;
end;
theorem
L1155: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B606 being (ManySortedRelation of R5) holds (( EqCl (B606 , R5) ) c= ( EqTh B606 ) & ( InvCl B606 ) c= ( EqTh B606 ) & ( StabCl B606 ) c= ( EqTh B606 ) & ( TRS B606 ) c= ( EqTh B606 )))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C501 being (ManySortedRelation of R5);
L1156: C501 c= ( EqTh C501 ) by L1129;
thus L1157: ( EqCl (C501 , R5) ) c= ( EqTh C501 ) by L1156 , L1028;
thus L1158: thesis by L1156 , L799 , L853 , L876;
end;
theorem
L1159: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B607 being (ManySortedRelation of R5) holds (for B608 being (SortSymbol of R4) holds (for B609 , B610 being (Element of R5 , B608) holds ([ B609 , B610 ] in ( ( EqTh B607 ) . B608 ) iff B609 , B610 are_convertible_wrt ( ( TRS B607 ) . B608 )))))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C502 being (ManySortedRelation of R5);
let C503 being (SortSymbol of R4);
let C504 , C505 being (Element of R5 , C503);
defpred S27[ (SortSymbol of R4) , set , set ] means $2 , $3 are_convertible_wrt ( ( TRS C502 ) . $1 );
consider C506 being (ManySortedRelation of (the Sorts of R5)) such that L1160: (for B611 being (SortSymbol of R4) holds (for B612 , B613 being (Element of R5 , B611) holds ([ B612 , B613 ] in ( C506 . B611 ) iff S27[ B611 , B612 , B613 ]))) from MSRExistence;
reconsider D147 = C506 as (ManySortedRelation of R5);
reconsider D148 = D147 as (EquationalTheory of R5) by L1160 , L1107;
L1161: C502 c= D148
proof
let C507 being set;
assume L1162: C507 in (the carrier of R4);
reconsider D149 = C507 as (SortSymbol of R4) by L1162;
L1163: ( C502 . D149 ) c= ( D148 . D149 )
proof
let C508 , C509 being set;
assume L1164: [ C508 , C509 ] in ( C502 . D149 );
reconsider D150 = C508 , D151 = C509 as (Element of R5 , D149) by L1164 , ZFMISC_1:87;
L1165: C502 c= ( TRS C502 ) by L876;
L1166: ( C502 . D149 ) c= ( ( TRS C502 ) . D149 ) by L1165 , PBOOLE:def 2;
L1167: D150 , D151 are_convertible_wrt ( ( TRS C502 ) . D149 ) by L1166 , L1164 , REWRITE1:29;
thus L1168: thesis by L1167 , L1160;
end;
thus L1169: thesis by L1163;
end;
L1170: ( EqTh C502 ) c= D148 by L1161 , L1129;
L1171: ( ( EqTh C502 ) . C503 ) c= ( D148 . C503 ) by L1170 , PBOOLE:def 2;
thus L1172: ([ C504 , C505 ] in ( ( EqTh C502 ) . C503 ) implies C504 , C505 are_convertible_wrt ( ( TRS C502 ) . C503 )) by L1171 , L1160;
L1173: C502 c= ( EqTh C502 ) by L1129;
L1174: ( TRS C502 ) c= ( EqTh C502 ) by L1173 , L876;
thus L1175: thesis by L1174 , L1124;
end;
theorem
L1176: (for R4 being non  empty non  void ManySortedSign holds (for R5 being  non-empty MSAlgebra over R4 holds (for B614 being (ManySortedRelation of R5) holds ( EqTh B614 ) = ( EqCl (( TRS B614 ) , R5) ))))
proof
let R4 being non  empty non  void ManySortedSign;
let R5 being  non-empty MSAlgebra over R4;
let C510 being (ManySortedRelation of R5);
L1177: ( TRS C510 ) c= ( EqCl (( TRS C510 ) , R5) ) by L1024;
L1178: C510 c= ( TRS C510 ) by L876;
L1179: C510 c= ( EqCl (( TRS C510 ) , R5) ) by L1178 , L1177 , PBOOLE:13;
L1180: ( EqTh C510 ) c= ( EqCl (( TRS C510 ) , R5) ) by L1179 , L1129;
L1181: C510 c= ( EqTh C510 ) by L1129;
L1182: ( TRS C510 ) c= ( EqTh C510 ) by L1181 , L876;
L1183: ( EqCl (( TRS C510 ) , R5) ) c= ( EqTh C510 ) by L1182 , L1028;
thus L1184: thesis by L1183 , L1180 , PBOOLE:146;
end;
