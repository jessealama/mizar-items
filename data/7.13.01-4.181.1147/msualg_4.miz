:: Many Sorted Quotient Algebra
::  by Ma{\l}gorzata Korolkiewicz
::
:: Received May 6, 1994
:: Copyright (c) 1994-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies STRUCT_0, XBOOLE_0, MSUALG_1, FUNCT_1, RELAT_1, PBOOLE, FUNCOP_1,
      EQREL_1, SUBSET_1, NAT_1, MARGREL1, PARTFUN1, FINSEQ_1, TARSKI, CARD_3,
      MSUALG_3, WELLORD1, MSUALG_4;
 notations TARSKI, XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, RELSET_1, PARTFUN1,
      EQREL_1, STRUCT_0, ORDINAL1, NAT_1, FUNCT_2, FINSEQ_1, FINSEQ_2, CARD_3,
      PBOOLE, FUNCOP_1, MSUALG_1, MSUALG_3;
 constructors EQREL_1, PRALG_2, MSUALG_3, RELSET_1;
 registrations RELAT_1, FUNCT_1, PARTFUN1, FUNCOP_1, PBOOLE, STRUCT_0,
      MSUALG_1, MSUALG_3, CARD_3, RELSET_1, FINSEQ_2, FINSEQ_1;
 requirements SUBSET, BOOLE;
 definitions TARSKI, MSUALG_3, XBOOLE_0, FUNCOP_1;
 theorems FUNCT_1, FUNCT_2, PBOOLE, CARD_3, MSUALG_1, ZFMISC_1, RELAT_1,
      RELSET_1, EQREL_1, MSUALG_3, MSAFREE, TARSKI, XBOOLE_0, FUNCOP_1,
      ORDINAL1, PARTFUN1, FINSEQ_2;
 schemes FUNCT_1, CLASSES1, EQREL_1;

begin
registration
let C1 being set;
cluster  Relation-yielding for (ManySortedSet of C1);
existence
proof
set D1 = the Relation;
set D2 = ( C1 --> D1 );
reconsider D3 = D2 as (ManySortedSet of C1);
take D3;
L1: (for B1 being set holds (B1 in ( dom D3 ) implies ( D3 . B1 ) is Relation)) by FUNCOP_1:7;
thus L2: thesis by L1 , FUNCOP_1:def 11;
end;
end;
definition
let C2 being set;
let C3 , C4 being (ManySortedSet of C2);
mode ManySortedRelation of C3 , C4
 -> (ManySortedSet of C2)
means :L4: (for B2 being set holds (B2 in C2 implies ( it . B2 ) is (Relation of ( C3 . B2 ) , ( C4 . B2 ))));
existence
proof
consider C5 being Relation such that L5: C5 = ( {} );
set D4 = ( C2 --> C5 );
reconsider D5 = D4 as (ManySortedSet of C2);
take D5;
L6: (for B3 being set holds (B3 in C2 implies ( D5 . B3 ) is (Relation of ( C3 . B3 ) , ( C4 . B3 ))))
proof
let C6 being set;
assume L7: C6 in C2;
L8: ( D5 . C6 ) = ( {} ) by L7 , L5 , FUNCOP_1:7;
thus L9: thesis by L8 , RELSET_1:12;
end;
thus L10: thesis by L6;
end;
end;
registration
let C7 being set;
let C8 , C9 being (ManySortedSet of C7);
cluster  ->  Relation-yielding for (ManySortedRelation of C8 , C9);
coherence
proof
let C10 being (ManySortedRelation of C8 , C9);
let C11 being set;
assume L12: C11 in ( dom C10 );
L13: C11 in C7 by L12;
thus L14: thesis by L13 , L4;
end;
end;
definition
let C12 being set;
let C13 being (ManySortedSet of C12);
mode ManySortedRelation of C13
 is (ManySortedRelation of C13 , C13);
end;
definition
let C14 being set;
let C15 being (ManySortedSet of C14);
let C16 being (ManySortedRelation of C15);
attr C16 is  MSEquivalence_Relation-like
means
:L17: (for B4 being set holds (for B5 being (Relation of ( C15 . B4 )) holds ((B4 in C14 & ( C16 . B4 ) = B5) implies B5 is (Equivalence_Relation of ( C15 . B4 )))));
end;
definition
let C17 being non  empty set;
let C18 , C19 being (ManySortedSet of C17);
let C20 being (ManySortedRelation of C18 , C19);
let C21 being (Element of C17);
redefine func C20 . C21 -> (Relation of ( C18 . C21 ) , ( C19 . C21 ));

coherence by L4;
end;
definition
let C22 being non  empty ManySortedSign;
let C23 being MSAlgebra over C22;
mode ManySortedRelation of C23
 is (ManySortedRelation of (the Sorts of C23));
end;
definition
let C24 being non  empty ManySortedSign;
let C25 being MSAlgebra over C24;
let C26 being (ManySortedRelation of C25);
attr C26 is  MSEquivalence-like
means
:L21: C26 is  MSEquivalence_Relation-like;
end;
registration
let C27 being non  void non  empty ManySortedSign;
let C28 being MSAlgebra over C27;
cluster  MSEquivalence-like for (ManySortedRelation of C28);
existence
proof
deffunc H1((Element of C27)) = ( id ( (the Sorts of C28) . $1 ) );
consider C29 being Function such that L23: (( dom C29 ) = (the carrier of C27) & (for B6 being (Element of C27) holds ( C29 . B6 ) = H1(B6))) from FUNCT_1:sch 4;
reconsider D6 = C29 as (ManySortedSet of (the carrier of C27)) by L23 , PARTFUN1:def 2 , RELAT_1:def 18;
L24: (for B7 being set holds (B7 in (the carrier of C27) implies ( D6 . B7 ) is (Relation of ( (the Sorts of C28) . B7 ) , ( (the Sorts of C28) . B7 ))))
proof
let C30 being set;
assume L25: C30 in (the carrier of C27);
L26: ( D6 . C30 ) = ( id ( (the Sorts of C28) . C30 ) ) by L25 , L23;
thus L27: thesis by L26;
end;
reconsider D7 = D6 as (ManySortedRelation of (the Sorts of C28) , (the Sorts of C28)) by L24 , L4;
reconsider D8 = D7 as (ManySortedRelation of C28);
take D8;
L28: (for B8 being set holds (for B9 being (Relation of ( (the Sorts of C28) . B8 )) holds ((B8 in (the carrier of C27) & ( D8 . B8 ) = B9) implies B9 is (Equivalence_Relation of ( (the Sorts of C28) . B8 )))))
proof
let C31 being set;
let C32 being (Relation of ( (the Sorts of C28) . C31 ));
assume L29: (C31 in (the carrier of C27) & ( D8 . C31 ) = C32);
L30: C32 = ( id ( (the Sorts of C28) . C31 ) ) by L29 , L23;
thus L31: thesis by L30;
end;
L32: D8 is  MSEquivalence_Relation-like by L28 , L17;
thus L33: thesis by L32 , L21;
end;
end;
theorem
L35: (for R1 being non  void non  empty ManySortedSign holds (for R2 being MSAlgebra over R1 holds (for R4 being (SortSymbol of R1) holds (for B10 being  MSEquivalence-like (ManySortedRelation of R2) holds ( B10 . R4 ) is (Equivalence_Relation of ( (the Sorts of R2) . R4 ))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R2 being MSAlgebra over R1;
let R4 being (SortSymbol of R1);
let C33 being  MSEquivalence-like (ManySortedRelation of R2);
L36: C33 is  MSEquivalence_Relation-like by L21;
thus L37: thesis by L36 , L17;
end;
definition
let C34 being non  void non  empty ManySortedSign;
let C35 being  non-empty MSAlgebra over C34;
let C36 being  MSEquivalence-like (ManySortedRelation of C35);
attr C36 is  MSCongruence-like
means
:L38: (for B11 being (OperSymbol of C34) holds (for B12 , B13 being (Element of ( Args (B11 , C35) )) holds ((for B14 being Nat holds (B14 in ( dom B12 ) implies [ ( B12 . B14 ) , ( B13 . B14 ) ] in ( C36 . ( ( the_arity_of B11 ) /. B14 ) ))) implies [ ( ( Den (B11 , C35) ) . B12 ) , ( ( Den (B11 , C35) ) . B13 ) ] in ( C36 . ( the_result_sort_of B11 ) ))));
end;
registration
let C37 being non  void non  empty ManySortedSign;
let C38 being  non-empty MSAlgebra over C37;
cluster  MSCongruence-like for  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like  MSEquivalence-like (ManySortedRelation of C38);
existence
proof
deffunc H2((Element of C37)) = ( id ( (the Sorts of C38) . $1 ) );
consider C39 being Function such that L40: (( dom C39 ) = (the carrier of C37) & (for B15 being (Element of C37) holds ( C39 . B15 ) = H2(B15))) from FUNCT_1:sch 4;
reconsider D9 = C39 as (ManySortedSet of (the carrier of C37)) by L40 , PARTFUN1:def 2 , RELAT_1:def 18;
L41: (for B16 being set holds (B16 in (the carrier of C37) implies ( D9 . B16 ) is (Relation of ( (the Sorts of C38) . B16 ) , ( (the Sorts of C38) . B16 ))))
proof
let C40 being set;
assume L42: C40 in (the carrier of C37);
L43: ( D9 . C40 ) = ( id ( (the Sorts of C38) . C40 ) ) by L42 , L40;
thus L44: thesis by L43;
end;
reconsider D10 = D9 as (ManySortedRelation of (the Sorts of C38) , (the Sorts of C38)) by L41 , L4;
reconsider D11 = D10 as (ManySortedRelation of C38);
L45: (for B17 being set holds (for B18 being (Relation of ( (the Sorts of C38) . B17 )) holds ((B17 in (the carrier of C37) & ( D11 . B17 ) = B18) implies B18 is (Equivalence_Relation of ( (the Sorts of C38) . B17 )))))
proof
let C41 being set;
let C42 being (Relation of ( (the Sorts of C38) . C41 ));
assume L46: (C41 in (the carrier of C37) & ( D11 . C41 ) = C42);
L47: C42 = ( id ( (the Sorts of C38) . C41 ) ) by L46 , L40;
thus L48: thesis by L47;
end;
L49: D11 is  MSEquivalence_Relation-like by L45 , L17;
reconsider D12 = D11 as  MSEquivalence-like (ManySortedRelation of C38) by L49 , L21;
take D12;
L50: (for B19 being (OperSymbol of C37) holds (for B20 , B21 being (Element of ( Args (B19 , C38) )) holds ((for B22 being Nat holds (B22 in ( dom B20 ) implies [ ( B20 . B22 ) , ( B21 . B22 ) ] in ( D12 . ( ( the_arity_of B19 ) /. B22 ) ))) implies [ ( ( Den (B19 , C38) ) . B20 ) , ( ( Den (B19 , C38) ) . B21 ) ] in ( D12 . ( the_result_sort_of B19 ) ))))
proof
L51: ( dom (the ResultSort of C37) ) = (the carrier' of C37) by FUNCT_2:def 1;
L52: ( dom ( (the Sorts of C38) * (the ResultSort of C37) ) ) = ( dom (the ResultSort of C37) ) by L51 , PARTFUN1:def 2;
let C43 being (OperSymbol of C37);
let C44 , C45 being (Element of ( Args (C43 , C38) ));
L53: ( dom C44 ) = ( dom ( the_arity_of C43 ) ) by MSUALG_3:6;
assume L54: (for B23 being Nat holds (B23 in ( dom C44 ) implies [ ( C44 . B23 ) , ( C45 . B23 ) ] in ( D12 . ( ( the_arity_of C43 ) /. B23 ) )));
L55: (for B24 being set holds (B24 in ( dom ( the_arity_of C43 ) ) implies ( C44 . B24 ) = ( C45 . B24 )))
proof
set D13 = ( the_arity_of C43 );
let C46 being set;
assume L56: C46 in ( dom ( the_arity_of C43 ) );
reconsider D14 = C46 as Nat by L56 , ORDINAL1:def 12;
L57: ( D13 . D14 ) in ( rng D13 ) by L56 , FUNCT_1:def 3;
L58: ( D12 . ( D13 . D14 ) ) = ( id ( (the Sorts of C38) . ( D13 . D14 ) ) ) by L57 , L40;
L59: ( ( the_arity_of C43 ) /. D14 ) = ( ( the_arity_of C43 ) . D14 ) by L56 , PARTFUN1:def 6;
L60: [ ( C44 . D14 ) , ( C45 . D14 ) ] in ( D12 . ( D13 . D14 ) ) by L59 , L54 , L53 , L56;
thus L61: thesis by L60 , L58 , RELAT_1:def 10;
end;
set D15 = ( the_result_sort_of C43 );
L62: ( D12 . D15 ) = ( id ( (the Sorts of C38) . D15 ) ) by L40;
L63: ( Result (C43 , C38) ) = ( ( (the Sorts of C38) * (the ResultSort of C37) ) . C43 ) by MSUALG_1:def 5
.= ( (the Sorts of C38) . ( (the ResultSort of C37) . C43 ) ) by L51 , L52 , FUNCT_1:12
.= ( (the Sorts of C38) . D15 ) by MSUALG_1:def 2;
L64: ( dom C45 ) = ( dom ( the_arity_of C43 ) ) by MSUALG_3:6;
L65: ( ( Den (C43 , C38) ) . C44 ) = ( ( Den (C43 , C38) ) . C45 ) by L64 , L53 , L55 , FUNCT_1:2;
thus L66: thesis by L65 , L62 , L63 , RELAT_1:def 10;
end;
thus L67: thesis by L50 , L38;
end;
end;
definition
let C47 being non  void non  empty ManySortedSign;
let C48 being  non-empty MSAlgebra over C47;
mode MSCongruence of C48
 is  MSCongruence-like  MSEquivalence-like (ManySortedRelation of C48);
end;
definition
let C49 being non  void non  empty ManySortedSign;
let C50 being MSAlgebra over C49;
let C51 being  MSEquivalence-like (ManySortedRelation of C50);
let C52 being (Element of C49);
redefine func C51 . C52 -> (Equivalence_Relation of ( (the Sorts of C50) . C52 ));

coherence by L35;
end;
definition
let C53 being non  void non  empty ManySortedSign;
let C54 being MSAlgebra over C53;
let C55 being  MSEquivalence-like (ManySortedRelation of C54);
let C56 being (Element of C53);
let C57 being (Element of ( (the Sorts of C54) . C56 ));
func Class (C55 , C57) -> (Subset of ( (the Sorts of C54) . C56 )) equals 
( Class (( C55 . C56 ) , C57) );
correctness;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C58 being  non-empty MSAlgebra over R1;
let C59 being (MSCongruence of C58);
func Class C59 ->  non-empty (ManySortedSet of (the carrier of R1)) means 
:L72: (for B25 being (Element of R1) holds ( it . B25 ) = ( Class ( C59 . B25 ) ));
existence
proof
deffunc H3((Element of R1)) = ( Class ( C59 . $1 ) );
consider C60 being Function such that L73: (( dom C60 ) = (the carrier of R1) & (for B26 being (Element of R1) holds ( C60 . B26 ) = H3(B26))) from FUNCT_1:sch 4;
reconsider D16 = C60 as (ManySortedSet of (the carrier of R1)) by L73 , PARTFUN1:def 2 , RELAT_1:def 18;
L74: (for B27 being set holds (B27 in (the carrier of R1) implies ( D16 . B27 ) is non  empty))
proof
let C61 being set;
assume L75: C61 in (the carrier of R1);
reconsider D17 = C61 as (Element of R1) by L75;
consider C62 being set such that L76: C62 in ( (the Sorts of C58) . D17 ) by XBOOLE_0:def 1;
reconsider D18 = C62 as (Element of ( (the Sorts of C58) . D17 )) by L76;
L77: ( D16 . D17 ) = ( Class ( C59 . D17 ) ) by L73;
L78: ( Class (( C59 . D17 ) , D18) ) in ( D16 . D17 ) by L77 , EQREL_1:def 3;
thus L79: thesis by L78;
end;
reconsider D19 = D16 as  non-empty (ManySortedSet of (the carrier of R1)) by L74 , PBOOLE:def 13;
take D19;
thus L80: thesis by L73;
end;
uniqueness
proof
let C63 , C64 being  non-empty (ManySortedSet of (the carrier of R1));
assume that
L81: (for B28 being (Element of R1) holds ( C63 . B28 ) = ( Class ( C59 . B28 ) ))
and
L82: (for B29 being (Element of R1) holds ( C64 . B29 ) = ( Class ( C59 . B29 ) ));
L83:
now
let C65 being set;
assume L84: C65 in (the carrier of R1);
reconsider D20 = C65 as (Element of R1) by L84;
L85: ( C63 . D20 ) = ( Class ( C59 . D20 ) ) by L81;
thus L86: ( C63 . C65 ) = ( C64 . C65 ) by L85 , L82;
end;
thus L87: thesis by L83 , PBOOLE:3;
end;
end;
begin
definition
let R1 being non  void non  empty ManySortedSign;
let C66 , C67 being (ManySortedSet of (the carrier' of R1));
let C68 being (ManySortedFunction of C66 , C67);
let C69 being (OperSymbol of R1);
redefine func C68 . C69 -> (Function of ( C66 . C69 ) , ( C67 . C69 ));

coherence by PBOOLE:def 15;
end;
registration
let C70 being non  empty set;
let C71 being (FinSequence of C70);
let C72 being (ManySortedSet of C70);
cluster ( C72 * C71 ) -> ( dom C71 ) -defined for Function;
coherence
proof
L90: ( rng C71 ) c= C70;
L91: ( rng C71 ) c= ( dom C72 ) by L90 , PARTFUN1:def 2;
L92: ( dom ( C72 * C71 ) ) = ( dom C71 ) by L91 , RELAT_1:27;
reconsider D21 = ( C72 * C71 ) as (ManySortedSet of ( dom C71 )) by L92 , PARTFUN1:def 2 , RELAT_1:def 18;
L93: D21 is (ManySortedSet of ( dom C71 ));
thus L94: thesis by L93;
end;
end;
registration
let C73 being non  empty set;
let C74 being (FinSequence of C73);
let C75 being (ManySortedSet of C73);
cluster ( C75 * C74 ) ->  total for ( dom C74 ) -defined ( dom C74 ) -defined ( dom C74 ) -defined ( dom C74 ) -defined Function;
coherence
proof
L96: ( rng C74 ) c= C73;
L97: ( rng C74 ) c= ( dom C75 ) by L96 , PARTFUN1:def 2;
L98: ( dom ( C75 * C74 ) ) = ( dom C74 ) by L97 , RELAT_1:27;
reconsider D22 = ( C75 * C74 ) as (ManySortedSet of ( dom C74 )) by L98 , PARTFUN1:def 2;
L99: D22 is (ManySortedSet of ( dom C74 ));
thus L100: thesis by L99;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R3 being (OperSymbol of R1);
let C76 being  non-empty MSAlgebra over R1;
let C77 being (MSCongruence of C76);
let C78 being (Element of ( Args (R3 , C76) ));
func C77 # C78 -> (Element of ( product ( ( Class C77 ) * ( the_arity_of R3 ) ) )) means 
:L102: (for B30 being Nat holds (B30 in ( dom ( the_arity_of R3 ) ) implies ( it . B30 ) = ( Class (( C77 . ( ( the_arity_of R3 ) /. B30 ) ) , ( C78 . B30 )) )));
existence
proof
defpred S1[ set , set ] means (for B31 being Nat holds (B31 = $1 implies $2 = ( Class (( C77 . ( ( the_arity_of R3 ) /. B31 ) ) , ( C78 . B31 )) )));
set D23 = ( the_arity_of R3 );
set D24 = ( dom D23 );
L103: (for B32 being set holds (B32 in D24 implies (ex B33 being set st S1[ B32 , B33 ])))
proof
let C79 being set;
assume L104: C79 in D24;
reconsider D25 = C79 as Nat by L104 , ORDINAL1:def 12;
take ( Class (( C77 . ( ( the_arity_of R3 ) /. D25 ) ) , ( C78 . D25 )) );
thus L105: thesis;
end;
consider C80 being Function such that L106: (( dom C80 ) = D24 & (for B34 being set holds (B34 in D24 implies S1[ B34 , ( C80 . B34 ) ]))) from CLASSES1:sch 1(L103);
L107: ( dom ( ( Class C77 ) * D23 ) ) = D24 by PARTFUN1:def 2;
L108: (for B35 being set holds (B35 in ( dom ( ( Class C77 ) * D23 ) ) implies ( C80 . B35 ) in ( ( ( Class C77 ) * D23 ) . B35 )))
proof
let C81 being set;
assume L109: C81 in ( dom ( ( Class C77 ) * D23 ) );
reconsider D26 = C81 as Nat by L109 , ORDINAL1:def 12;
L110: ( D23 . C81 ) in ( rng D23 ) by L107 , L109 , FUNCT_1:def 3;
reconsider D27 = ( D23 . C81 ) as (Element of R1) by L110;
L111: C81 in ( dom ( (the Sorts of C76) * D23 ) ) by L107 , L109 , PARTFUN1:def 2;
L112: ( ( (the Sorts of C76) * D23 ) . C81 ) = ( (the Sorts of C76) . ( D23 . C81 ) ) by L111 , FUNCT_1:12;
L113: ( C78 . C81 ) in ( (the Sorts of C76) . D27 ) by L112 , L111 , MSUALG_3:6;
L114: (( C80 . D26 ) = ( Class (( C77 . ( D23 /. D26 ) ) , ( C78 . D26 )) ) & ( D23 /. D26 ) = ( D23 . D26 )) by L106 , L107 , L109 , PARTFUN1:def 6;
L115: ( C80 . C81 ) in ( Class ( C77 . D27 ) ) by L114 , L113 , EQREL_1:def 3;
L116: ( ( ( Class C77 ) * D23 ) . C81 ) = ( ( Class C77 ) . ( D23 . C81 ) ) by L109 , FUNCT_1:12;
thus L117: thesis by L116 , L115 , L72;
end;
reconsider D28 = C80 as (Element of ( product ( ( Class C77 ) * D23 ) )) by L108 , L106 , L107 , CARD_3:9;
take D28;
let C82 being Nat;
assume L118: C82 in D24;
thus L119: thesis by L118 , L106;
end;
uniqueness
proof
let C83 , C84 being (Element of ( product ( ( Class C77 ) * ( the_arity_of R3 ) ) ));
assume that
L120: (for B36 being Nat holds (B36 in ( dom ( the_arity_of R3 ) ) implies ( C83 . B36 ) = ( Class (( C77 . ( ( the_arity_of R3 ) /. B36 ) ) , ( C78 . B36 )) )))
and
L121: (for B37 being Nat holds (B37 in ( dom ( the_arity_of R3 ) ) implies ( C84 . B37 ) = ( Class (( C77 . ( ( the_arity_of R3 ) /. B37 ) ) , ( C78 . B37 )) )));
L122: (for B38 being set holds (B38 in ( dom ( the_arity_of R3 ) ) implies ( C83 . B38 ) = ( C84 . B38 )))
proof
let C85 being set;
assume L123: C85 in ( dom ( the_arity_of R3 ) );
reconsider D29 = C85 as Nat by L123 , ORDINAL1:def 12;
L124: ( C83 . D29 ) = ( Class (( C77 . ( ( the_arity_of R3 ) /. D29 ) ) , ( C78 . D29 )) ) by L120 , L123;
thus L125: thesis by L124 , L121 , L123;
end;
L126: ( dom C84 ) = ( dom ( the_arity_of R3 ) ) by PARTFUN1:def 2;
L127: ( dom C83 ) = ( dom ( the_arity_of R3 ) ) by PARTFUN1:def 2;
thus L128: thesis by L127 , L126 , L122 , FUNCT_1:2;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R3 being (OperSymbol of R1);
let C86 being  non-empty MSAlgebra over R1;
let C87 being (MSCongruence of C86);
func QuotRes (C87 , R3) -> (Function of ( ( (the Sorts of C86) * (the ResultSort of R1) ) . R3 ) , ( ( ( Class C87 ) * (the ResultSort of R1) ) . R3 )) means 
:L130: (for B39 being (Element of ( (the Sorts of C86) . ( the_result_sort_of R3 ) )) holds ( it . B39 ) = ( Class (C87 , B39) ));
existence
proof
set D30 = ( the_result_sort_of R3 );
set D31 = ( (the Sorts of C86) . D30 );
deffunc H4((Element of D31)) = ( Class (C87 , $1) );
consider C88 being Function such that L131: (( dom C88 ) = D31 & (for B40 being (Element of D31) holds ( C88 . B40 ) = H4(B40))) from FUNCT_1:sch 4;
L132: (for B41 being set holds (B41 in D31 implies ( C88 . B41 ) in ( ( Class C87 ) . D30 )))
proof
let C89 being set;
assume L133: C89 in D31;
reconsider D32 = C89 as (Element of D31) by L133;
L134: ( C88 . D32 ) = ( Class (C87 , D32) ) by L131;
L135: ( C88 . D32 ) in ( Class ( C87 . D30 ) ) by L134 , EQREL_1:def 3;
thus L136: thesis by L135 , L72;
end;
L137: R3 in (the carrier' of R1);
L138: R3 in ( dom ( (the Sorts of C86) * (the ResultSort of R1) ) ) by L137 , PARTFUN1:def 2;
L139: ( ( (the Sorts of C86) * (the ResultSort of R1) ) . R3 ) = ( (the Sorts of C86) . ( (the ResultSort of R1) . R3 ) ) by L138 , FUNCT_1:12
.= D31 by MSUALG_1:def 2;
L140: ( dom (the ResultSort of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L141: ( dom ( ( Class C87 ) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) ) by L140 , PARTFUN1:def 2;
L142: ( ( ( Class C87 ) * (the ResultSort of R1) ) . R3 ) = ( ( Class C87 ) . ( (the ResultSort of R1) . R3 ) ) by L141 , L140 , FUNCT_1:12
.= ( ( Class C87 ) . D30 ) by MSUALG_1:def 2;
reconsider D33 = C88 as (Function of ( ( (the Sorts of C86) * (the ResultSort of R1) ) . R3 ) , ( ( ( Class C87 ) * (the ResultSort of R1) ) . R3 )) by L142 , L131 , L139 , L132 , FUNCT_2:3;
take D33;
thus L143: thesis by L131;
end;
uniqueness
proof
set D34 = (the Sorts of C86);
set D35 = (the ResultSort of R1);
set D36 = ( the_result_sort_of R3 );
let C90 , C91 being (Function of ( ( (the Sorts of C86) * (the ResultSort of R1) ) . R3 ) , ( ( ( Class C87 ) * (the ResultSort of R1) ) . R3 ));
assume that
L144: (for B42 being (Element of ( D34 . D36 )) holds ( C90 . B42 ) = ( Class (C87 , B42) ))
and
L145: (for B43 being (Element of ( D34 . D36 )) holds ( C91 . B43 ) = ( Class (C87 , B43) ));
L146:
now
let C92 being set;
assume L147: C92 in ( D34 . D36 );
reconsider D37 = C92 as (Element of ( D34 . D36 )) by L147;
L148: ( C90 . D37 ) = ( Class (C87 , D37) ) by L144;
thus L149: ( C90 . C92 ) = ( C91 . C92 ) by L148 , L145;
end;
L150: R3 in (the carrier' of R1);
L151: R3 in ( dom ( D34 * D35 ) ) by L150 , PARTFUN1:def 2;
L152: ( ( D34 * D35 ) . R3 ) = ( D34 . ( D35 . R3 ) ) by L151 , FUNCT_1:12
.= ( D34 . D36 ) by MSUALG_1:def 2;
L153: (( dom C90 ) = ( D34 . D36 ) & ( dom C91 ) = ( D34 . D36 )) by L152 , FUNCT_2:def 1;
thus L154: thesis by L153 , L146 , FUNCT_1:2;
end;
func QuotArgs (C87 , R3) -> (Function of ( ( ( (the Sorts of C86) # ) * (the Arity of R1) ) . R3 ) , ( ( ( ( Class C87 ) # ) * (the Arity of R1) ) . R3 )) means 
(for B44 being (Element of ( Args (R3 , C86) )) holds ( it . B44 ) = ( C87 # B44 ));
existence
proof
set D38 = ( the_arity_of R3 );
set D39 = ( Args (R3 , C86) );
deffunc H5((Element of D39)) = ( C87 # $1 );
consider C93 being Function such that L155: (( dom C93 ) = D39 & (for B45 being (Element of D39) holds ( C93 . B45 ) = H5(B45))) from FUNCT_1:sch 4;
L156: R3 in (the carrier' of R1);
L157: R3 in ( dom ( ( (the Sorts of C86) # ) * (the Arity of R1) ) ) by L156 , PARTFUN1:def 2;
L158: ( ( ( (the Sorts of C86) # ) * (the Arity of R1) ) . R3 ) = ( ( (the Sorts of C86) # ) . ( (the Arity of R1) . R3 ) ) by L157 , FUNCT_1:12
.= ( ( (the Sorts of C86) # ) . ( the_arity_of R3 ) ) by MSUALG_1:def 1;
L159: (for B46 being set holds (B46 in ( ( (the Sorts of C86) # ) . D38 ) implies ( C93 . B46 ) in ( ( ( Class C87 ) # ) . D38 )))
proof
let C94 being set;
assume L160: C94 in ( ( (the Sorts of C86) # ) . D38 );
reconsider D40 = C94 as (Element of D39) by L160 , L158 , MSUALG_1:def 4;
L161: (( C93 . D40 ) = ( C87 # D40 ) & ( ( ( Class C87 ) # ) . D38 ) = ( product ( ( Class C87 ) * D38 ) )) by L155 , FINSEQ_2:def 5;
thus L162: thesis by L161;
end;
L163: R3 in ( dom ( ( ( Class C87 ) # ) * (the Arity of R1) ) ) by L156 , PARTFUN1:def 2;
L164: ( ( ( ( Class C87 ) # ) * (the Arity of R1) ) . R3 ) = ( ( ( Class C87 ) # ) . ( (the Arity of R1) . R3 ) ) by L163 , FUNCT_1:12
.= ( ( ( Class C87 ) # ) . D38 ) by MSUALG_1:def 1;
reconsider D41 = C93 as (Function of ( ( ( (the Sorts of C86) # ) * (the Arity of R1) ) . R3 ) , ( ( ( ( Class C87 ) # ) * (the Arity of R1) ) . R3 )) by L164 , L155 , L158 , L159 , FUNCT_2:3 , MSUALG_1:def 4;
take D41;
thus L165: thesis by L155;
end;
uniqueness
proof
set D42 = ( the_arity_of R3 );
let C95 , C96 being (Function of ( ( ( (the Sorts of C86) # ) * (the Arity of R1) ) . R3 ) , ( ( ( ( Class C87 ) # ) * (the Arity of R1) ) . R3 ));
assume that
L166: (for B47 being (Element of ( Args (R3 , C86) )) holds ( C95 . B47 ) = ( C87 # B47 ))
and
L167: (for B48 being (Element of ( Args (R3 , C86) )) holds ( C96 . B48 ) = ( C87 # B48 ));
L168: R3 in (the carrier' of R1);
L169: R3 in ( dom ( ( (the Sorts of C86) # ) * (the Arity of R1) ) ) by L168 , PARTFUN1:def 2;
L170: ( ( ( (the Sorts of C86) # ) * (the Arity of R1) ) . R3 ) = ( ( (the Sorts of C86) # ) . ( (the Arity of R1) . R3 ) ) by L169 , FUNCT_1:12
.= ( ( (the Sorts of C86) # ) . ( the_arity_of R3 ) ) by MSUALG_1:def 1;
L171:
now
let C97 being set;
assume L172: C97 in ( ( (the Sorts of C86) # ) . D42 );
reconsider D43 = C97 as (Element of ( Args (R3 , C86) )) by L172 , L170 , MSUALG_1:def 4;
L173: ( C95 . D43 ) = ( C87 # D43 ) by L166;
thus L174: ( C95 . C97 ) = ( C96 . C97 ) by L173 , L167;
end;
L175: (( dom C95 ) = ( ( (the Sorts of C86) # ) . D42 ) & ( dom C96 ) = ( ( (the Sorts of C86) # ) . D42 )) by L170 , FUNCT_2:def 1;
thus L176: thesis by L175 , L171 , FUNCT_1:2;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C98 being  non-empty MSAlgebra over R1;
let C99 being (MSCongruence of C98);
func QuotRes C99 -> (ManySortedFunction of ( (the Sorts of C98) * (the ResultSort of R1) ) , ( ( Class C99 ) * (the ResultSort of R1) )) means 
(for B49 being (OperSymbol of R1) holds ( it . B49 ) = ( QuotRes (C99 , B49) ));
existence
proof
defpred S2[ set , set ] means (for B50 being (OperSymbol of R1) holds (B50 = $1 implies $2 = ( QuotRes (C99 , B50) )));
set D44 = (the carrier' of R1);
L178: (for B51 being set holds (B51 in D44 implies (ex B52 being set st S2[ B51 , B52 ])))
proof
let C100 being set;
assume L179: C100 in D44;
reconsider D45 = C100 as (OperSymbol of R1) by L179;
take ( QuotRes (C99 , D45) );
thus L180: thesis;
end;
consider C101 being Function such that L181: (( dom C101 ) = D44 & (for B53 being set holds (B53 in D44 implies S2[ B53 , ( C101 . B53 ) ]))) from CLASSES1:sch 1(L178);
reconsider D46 = C101 as (ManySortedSet of D44) by L181 , PARTFUN1:def 2 , RELAT_1:def 18;
L182: (for B54 being set holds (B54 in ( dom D46 ) implies ( D46 . B54 ) is Function))
proof
let C102 being set;
assume L183: C102 in ( dom D46 );
reconsider D47 = C102 as (OperSymbol of R1) by L183;
L184: ( D46 . D47 ) = ( QuotRes (C99 , D47) ) by L181;
thus L185: thesis by L184;
end;
reconsider D48 = D46 as (ManySortedFunction of D44) by L182 , FUNCOP_1:def 6;
L186: (for B55 being set holds (B55 in D44 implies ( D48 . B55 ) is (Function of ( ( (the Sorts of C98) * (the ResultSort of R1) ) . B55 ) , ( ( ( Class C99 ) * (the ResultSort of R1) ) . B55 ))))
proof
let C103 being set;
assume L187: C103 in D44;
reconsider D49 = C103 as (OperSymbol of R1) by L187;
L188: ( D48 . D49 ) = ( QuotRes (C99 , D49) ) by L181;
thus L189: thesis by L188;
end;
reconsider D50 = D48 as (ManySortedFunction of ( (the Sorts of C98) * (the ResultSort of R1) ) , ( ( Class C99 ) * (the ResultSort of R1) )) by L186 , PBOOLE:def 15;
take D50;
thus L190: thesis by L181;
end;
uniqueness
proof
let C104 , C105 being (ManySortedFunction of ( (the Sorts of C98) * (the ResultSort of R1) ) , ( ( Class C99 ) * (the ResultSort of R1) ));
assume that
L191: (for B56 being (OperSymbol of R1) holds ( C104 . B56 ) = ( QuotRes (C99 , B56) ))
and
L192: (for B57 being (OperSymbol of R1) holds ( C105 . B57 ) = ( QuotRes (C99 , B57) ));
L193:
now
let C106 being set;
assume L194: C106 in (the carrier' of R1);
reconsider D51 = C106 as (OperSymbol of R1) by L194;
L195: ( C104 . D51 ) = ( QuotRes (C99 , D51) ) by L191;
thus L196: ( C104 . C106 ) = ( C105 . C106 ) by L195 , L192;
end;
thus L197: thesis by L193 , PBOOLE:3;
end;
func QuotArgs C99 -> (ManySortedFunction of ( ( (the Sorts of C98) # ) * (the Arity of R1) ) , ( ( ( Class C99 ) # ) * (the Arity of R1) )) means 
(for B58 being (OperSymbol of R1) holds ( it . B58 ) = ( QuotArgs (C99 , B58) ));
existence
proof
defpred S3[ set , set ] means (for B59 being (OperSymbol of R1) holds (B59 = $1 implies $2 = ( QuotArgs (C99 , B59) )));
set D52 = (the carrier' of R1);
L198: (for B60 being set holds (B60 in D52 implies (ex B61 being set st S3[ B60 , B61 ])))
proof
let C107 being set;
assume L199: C107 in D52;
reconsider D53 = C107 as (OperSymbol of R1) by L199;
take ( QuotArgs (C99 , D53) );
thus L200: thesis;
end;
consider C108 being Function such that L201: (( dom C108 ) = D52 & (for B62 being set holds (B62 in D52 implies S3[ B62 , ( C108 . B62 ) ]))) from CLASSES1:sch 1(L198);
reconsider D54 = C108 as (ManySortedSet of D52) by L201 , PARTFUN1:def 2 , RELAT_1:def 18;
L202: (for B63 being set holds (B63 in ( dom D54 ) implies ( D54 . B63 ) is Function))
proof
let C109 being set;
assume L203: C109 in ( dom D54 );
reconsider D55 = C109 as (OperSymbol of R1) by L203;
L204: ( D54 . D55 ) = ( QuotArgs (C99 , D55) ) by L201;
thus L205: thesis by L204;
end;
reconsider D56 = D54 as (ManySortedFunction of D52) by L202 , FUNCOP_1:def 6;
L206: (for B64 being set holds (B64 in D52 implies ( D56 . B64 ) is (Function of ( ( ( (the Sorts of C98) # ) * (the Arity of R1) ) . B64 ) , ( ( ( ( Class C99 ) # ) * (the Arity of R1) ) . B64 ))))
proof
let C110 being set;
assume L207: C110 in D52;
reconsider D57 = C110 as (OperSymbol of R1) by L207;
L208: ( D56 . D57 ) = ( QuotArgs (C99 , D57) ) by L201;
thus L209: thesis by L208;
end;
reconsider D58 = D56 as (ManySortedFunction of ( ( (the Sorts of C98) # ) * (the Arity of R1) ) , ( ( ( Class C99 ) # ) * (the Arity of R1) )) by L206 , PBOOLE:def 15;
take D58;
thus L210: thesis by L201;
end;
uniqueness
proof
let C111 , C112 being (ManySortedFunction of ( ( (the Sorts of C98) # ) * (the Arity of R1) ) , ( ( ( Class C99 ) # ) * (the Arity of R1) ));
assume that
L211: (for B65 being (OperSymbol of R1) holds ( C111 . B65 ) = ( QuotArgs (C99 , B65) ))
and
L212: (for B66 being (OperSymbol of R1) holds ( C112 . B66 ) = ( QuotArgs (C99 , B66) ));
L213:
now
let C113 being set;
assume L214: C113 in (the carrier' of R1);
reconsider D59 = C113 as (OperSymbol of R1) by L214;
L215: ( C111 . D59 ) = ( QuotArgs (C99 , D59) ) by L211;
thus L216: ( C111 . C113 ) = ( C112 . C113 ) by L215 , L212;
end;
thus L217: thesis by L213 , PBOOLE:3;
end;
end;
theorem
L219: (for R1 being non  void non  empty ManySortedSign holds (for R3 being (OperSymbol of R1) holds (for B67 being  non-empty MSAlgebra over R1 holds (for B68 being (MSCongruence of B67) holds (for B69 being set holds (B69 in ( ( ( ( Class B68 ) # ) * (the Arity of R1) ) . R3 ) implies (ex B70 being (Element of ( Args (R3 , B67) )) st B69 = ( B68 # B70 ))))))))
proof
let R1 being non  void non  empty ManySortedSign;
let R3 being (OperSymbol of R1);
let C114 being  non-empty MSAlgebra over R1;
let C115 being (MSCongruence of C114);
let C116 being set;
assume L220: C116 in ( ( ( ( Class C115 ) # ) * (the Arity of R1) ) . R3 );
set D60 = ( the_arity_of R3 );
L221: D60 = ( (the Arity of R1) . R3 ) by MSUALG_1:def 1;
L222: ( ( ( ( Class C115 ) # ) * (the Arity of R1) ) . R3 ) = ( product ( ( Class C115 ) * D60 ) ) by L221 , MSAFREE:1;
consider C117 being Function such that L223: C117 = C116 and L224: ( dom C117 ) = ( dom ( ( Class C115 ) * D60 ) ) and L225: (for B71 being set holds (B71 in ( dom ( ( Class C115 ) * D60 ) ) implies ( C117 . B71 ) in ( ( ( Class C115 ) * D60 ) . B71 ))) by L222 , L220 , CARD_3:def 5;
defpred S4[ set , set ] means $2 in ( C117 . $1 );
L226: ( dom ( ( Class C115 ) * D60 ) ) = ( dom D60 ) by PARTFUN1:def 2;
L227: (for B72 being Nat holds (B72 in ( dom C117 ) implies ( C117 . B72 ) in ( Class ( C115 . ( D60 /. B72 ) ) )))
proof
let C118 being Nat;
reconsider D61 = ( D60 /. C118 ) as (Element of R1);
assume L228: C118 in ( dom C117 );
L229: ( D60 . C118 ) = ( D60 /. C118 ) by L228 , L224 , L226 , PARTFUN1:def 6;
L230: ( ( ( Class C115 ) * D60 ) . C118 ) = ( ( Class C115 ) . D61 ) by L229 , L224 , L228 , FUNCT_1:12
.= ( Class ( C115 . D61 ) ) by L72;
thus L231: thesis by L230 , L224 , L225 , L228;
end;
L232: (for B73 being set holds (B73 in ( dom C117 ) implies (ex B74 being set st S4[ B73 , B74 ])))
proof
let C119 being set;
reconsider D62 = ( D60 /. C119 ) as (Element of R1);
assume L233: C119 in ( dom C117 );
reconsider D63 = C119 as Nat by L233 , L224 , ORDINAL1:def 12;
L234: ( C117 . D63 ) in ( Class ( C115 . D62 ) ) by L227 , L233;
consider C120 being set such that L235: (C120 in ( (the Sorts of C114) . D62 ) & ( C117 . D63 ) = ( Class (( C115 . D62 ) , C120) )) by L234 , EQREL_1:def 3;
take C120;
thus L236: thesis by L235 , EQREL_1:20;
end;
consider C121 being Function such that L237: (( dom C121 ) = ( dom C117 ) & (for B75 being set holds (B75 in ( dom C117 ) implies S4[ B75 , ( C121 . B75 ) ]))) from CLASSES1:sch 1(L232);
L238: ( dom (the Sorts of C114) ) = (the carrier of R1) by PARTFUN1:def 2;
L239: ( rng D60 ) c= ( dom (the Sorts of C114) ) by L238;
L240: ( dom C121 ) = ( dom ( (the Sorts of C114) * D60 ) ) by L239 , L224 , L226 , L237 , RELAT_1:27;
L241: (for B76 being set holds (B76 in ( dom ( (the Sorts of C114) * D60 ) ) implies ( C121 . B76 ) in ( ( (the Sorts of C114) * D60 ) . B76 )))
proof
let C122 being set;
assume L242: C122 in ( dom ( (the Sorts of C114) * D60 ) );
L243: (( C121 . C122 ) in ( C117 . C122 ) & ( C117 . C122 ) in ( ( ( Class C115 ) * D60 ) . C122 )) by L242 , L224 , L225 , L237 , L240;
reconsider D64 = C122 as Nat by L242 , ORDINAL1:def 12;
reconsider D65 = ( D60 /. D64 ) as (Element of R1);
L244: ( D60 . D64 ) = ( D60 /. D64 ) by L224 , L226 , L237 , L240 , L242 , PARTFUN1:def 6;
L245: ( ( ( Class C115 ) * D60 ) . C122 ) = ( ( Class C115 ) . D65 ) by L244 , L224 , L237 , L240 , L242 , FUNCT_1:12
.= ( Class ( C115 . D65 ) ) by L72;
L246: ( C121 . D64 ) in ( (the Sorts of C114) . D65 ) by L245 , L243;
thus L247: thesis by L246 , L242 , L244 , FUNCT_1:12;
end;
L248: ( Args (R3 , C114) ) = ( ( ( (the Sorts of C114) # ) * (the Arity of R1) ) . R3 ) by MSUALG_1:def 4
.= ( product ( (the Sorts of C114) * D60 ) ) by L221 , MSAFREE:1;
reconsider D66 = C121 as (Element of ( Args (R3 , C114) )) by L248 , L240 , L241 , CARD_3:9;
L249:
now
let C123 being set;
assume L250: C123 in ( dom D60 );
reconsider D67 = C123 as Nat by L250 , ORDINAL1:def 12;
reconsider D68 = ( D60 /. D67 ) as (Element of R1);
L251: ( C117 . D67 ) in ( Class ( C115 . D68 ) ) by L224 , L226 , L227 , L250;
consider C124 being set such that L252: C124 in ( (the Sorts of C114) . D68 ) and L253: ( C117 . D67 ) = ( Class (( C115 . D68 ) , C124) ) by L251 , EQREL_1:def 3;
L254: ( D66 . D67 ) in ( C117 . D67 ) by L224 , L226 , L237 , L250;
L255: ( Class (( C115 . D68 ) , ( D66 . D67 )) ) = ( Class (( C115 . D68 ) , C124) ) by L254 , L252 , L253 , EQREL_1:23;
thus L256: ( C117 . C123 ) = ( ( C115 # D66 ) . C123 ) by L255 , L250 , L253 , L102;
end;
take D66;
L257: ( dom ( C115 # D66 ) ) = ( dom ( ( Class C115 ) * D60 ) ) by CARD_3:9;
thus L258: thesis by L257 , L223 , L224 , L226 , L249 , FUNCT_1:2;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let R3 being (OperSymbol of R1);
let C125 being  non-empty MSAlgebra over R1;
let C126 being (MSCongruence of C125);
func QuotCharact (C126 , R3) -> (Function of ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) , ( ( ( Class C126 ) * (the ResultSort of R1) ) . R3 )) means 
:L259: (for B77 being (Element of ( Args (R3 , C125) )) holds (( C126 # B77 ) in ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) implies ( it . ( C126 # B77 ) ) = ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . B77 )));
existence
proof
defpred S5[ set , set ] means (for B78 being (Element of ( Args (R3 , C125) )) holds ($1 = ( C126 # B78 ) implies $2 = ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . B78 )));
set D69 = ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 );
set D70 = ( ( ( Class C126 ) * (the ResultSort of R1) ) . R3 );
L260: (for B79 being set holds (B79 in D69 implies (ex B80 being set st (B80 in D70 & S5[ B79 , B80 ]))))
proof
set D71 = ( the_result_sort_of R3 );
set D72 = ( the_arity_of R3 );
let C127 being set;
assume L261: C127 in D69;
consider C128 being (Element of ( Args (R3 , C125) )) such that L262: C127 = ( C126 # C128 ) by L261 , L219;
take D73 = ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . C128 );
L263: R3 in (the carrier' of R1);
L264: R3 in ( dom ( ( Class C126 ) * (the ResultSort of R1) ) ) by L263 , PARTFUN1:def 2;
L265: ( ( ( Class C126 ) * (the ResultSort of R1) ) . R3 ) = ( ( Class C126 ) . ( (the ResultSort of R1) . R3 ) ) by L264 , FUNCT_1:12
.= ( ( Class C126 ) . D71 ) by MSUALG_1:def 2;
L266: R3 in ( dom ( (the Sorts of C125) * (the ResultSort of R1) ) ) by L263 , PARTFUN1:def 2;
L267: ( ( (the Sorts of C125) * (the ResultSort of R1) ) . R3 ) = ( (the Sorts of C125) . ( (the ResultSort of R1) . R3 ) ) by L266 , FUNCT_1:12
.= ( (the Sorts of C125) . D71 ) by MSUALG_1:def 2;
L268: (( dom ( QuotRes (C126 , R3) ) ) = ( (the Sorts of C125) . D71 ) & ( Result (R3 , C125) ) = ( (the Sorts of C125) . D71 )) by L267 , FUNCT_2:def 1 , MSUALG_1:def 5;
L269: ( rng ( Den (R3 , C125) ) ) c= ( Result (R3 , C125) );
L270: (( dom ( Den (R3 , C125) ) ) = ( Args (R3 , C125) ) & ( dom ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) ) = ( dom ( Den (R3 , C125) ) )) by L269 , L268 , FUNCT_2:def 1 , RELAT_1:27;
L271: ( ( QuotRes (C126 , R3) ) . ( ( Den (R3 , C125) ) . C128 ) ) in ( rng ( QuotRes (C126 , R3) ) ) by L268 , FUNCT_1:def 3;
L272: ( ( QuotRes (C126 , R3) ) . ( ( Den (R3 , C125) ) . C128 ) ) in ( ( Class C126 ) . D71 ) by L271 , L265;
thus L273: D73 in D70 by L272 , L265 , L270 , FUNCT_1:12;
let C129 being (Element of ( Args (R3 , C125) ));
reconsider D74 = ( ( Den (R3 , C125) ) . C128 ) , D75 = ( ( Den (R3 , C125) ) . C129 ) as (Element of ( (the Sorts of C125) . D71 )) by L267 , MSUALG_1:def 5;
L274: ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . C129 ) = ( ( QuotRes (C126 , R3) ) . D75 ) by L270 , FUNCT_1:12
.= ( Class (C126 , D75) ) by L130
.= ( Class (( C126 . D71 ) , D75) );
assume L275: C127 = ( C126 # C129 );
L276: (for B81 being Nat holds (B81 in ( dom C128 ) implies [ ( C128 . B81 ) , ( C129 . B81 ) ] in ( C126 . ( D72 /. B81 ) )))
proof
let C130 being Nat;
L277: ( dom C128 ) = ( dom D72 ) by MSUALG_3:6;
assume L278: C130 in ( dom C128 );
L279: (( ( C126 # C128 ) . C130 ) = ( Class (( C126 . ( D72 /. C130 ) ) , ( C128 . C130 )) ) & ( ( C126 # C129 ) . C130 ) = ( Class (( C126 . ( D72 /. C130 ) ) , ( C129 . C130 )) )) by L278 , L277 , L102;
L280: ( dom (the Sorts of C125) ) = (the carrier of R1) by PARTFUN1:def 2;
L281: ( rng D72 ) c= ( dom (the Sorts of C125) ) by L280;
L282: ( dom ( (the Sorts of C125) * D72 ) ) = ( dom D72 ) by L281 , RELAT_1:27;
L283: ( C128 . C130 ) in ( ( (the Sorts of C125) * D72 ) . C130 ) by L282 , L278 , L277 , MSUALG_3:6;
L284: ( ( (the Sorts of C125) * D72 ) . C130 ) = ( (the Sorts of C125) . ( D72 . C130 ) ) by L282 , L278 , L277 , FUNCT_1:12
.= ( (the Sorts of C125) . ( D72 /. C130 ) ) by L278 , L277 , PARTFUN1:def 6;
thus L285: thesis by L284 , L262 , L275 , L283 , L279 , EQREL_1:35;
end;
L286: [ D74 , D75 ] in ( C126 . D71 ) by L276 , L38;
L287: D73 = ( ( QuotRes (C126 , R3) ) . ( ( Den (R3 , C125) ) . C128 ) ) by L270 , FUNCT_1:12
.= ( Class (C126 , D74) ) by L130
.= ( Class (( C126 . D71 ) , D74) );
thus L288: thesis by L287 , L274 , L286 , EQREL_1:35;
end;
consider C131 being Function such that L289: (( dom C131 ) = D69 & ( rng C131 ) c= D70 & (for B82 being set holds (B82 in D69 implies S5[ B82 , ( C131 . B82 ) ]))) from FUNCT_1:sch 5(L260);
reconsider D76 = C131 as (Function of ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) , ( ( ( Class C126 ) * (the ResultSort of R1) ) . R3 )) by L289 , FUNCT_2:2;
take D76;
thus L290: thesis by L289;
end;
uniqueness
proof
set D77 = ( the_arity_of R3 );
let C132 , C133 being (Function of ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) , ( ( ( Class C126 ) * (the ResultSort of R1) ) . R3 ));
assume that
L291: (for B83 being (Element of ( Args (R3 , C125) )) holds (( C126 # B83 ) in ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) implies ( C132 . ( C126 # B83 ) ) = ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . B83 )))
and
L292: (for B84 being (Element of ( Args (R3 , C125) )) holds (( C126 # B84 ) in ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) implies ( C133 . ( C126 # B84 ) ) = ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . B84 )));
L293: ( dom (the Arity of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L294: ( dom ( ( ( Class C126 ) # ) * (the Arity of R1) ) ) = ( dom (the Arity of R1) ) by L293 , PARTFUN1:def 2;
L295: ( ( ( ( Class C126 ) # ) * (the Arity of R1) ) . R3 ) = ( ( ( Class C126 ) # ) . ( (the Arity of R1) . R3 ) ) by L294 , L293 , FUNCT_1:12
.= ( ( ( Class C126 ) # ) . D77 ) by MSUALG_1:def 1;
L296:
now
let C134 being set;
assume L297: C134 in ( ( ( Class C126 ) # ) . D77 );
consider C135 being (Element of ( Args (R3 , C125) )) such that L298: C134 = ( C126 # C135 ) by L297 , L295 , L219;
L299: ( C132 . C134 ) = ( ( ( QuotRes (C126 , R3) ) * ( Den (R3 , C125) ) ) . C135 ) by L291 , L295 , L297 , L298;
thus L300: ( C132 . C134 ) = ( C133 . C134 ) by L299 , L292 , L295 , L297 , L298;
end;
L301: (( dom C132 ) = ( ( ( Class C126 ) # ) . D77 ) & ( dom C133 ) = ( ( ( Class C126 ) # ) . D77 )) by L295 , FUNCT_2:def 1;
thus L302: thesis by L301 , L296 , FUNCT_1:2;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C136 being  non-empty MSAlgebra over R1;
let C137 being (MSCongruence of C136);
func QuotCharact C137 -> (ManySortedFunction of ( ( ( Class C137 ) # ) * (the Arity of R1) ) , ( ( Class C137 ) * (the ResultSort of R1) )) means 
:L304: (for B85 being (OperSymbol of R1) holds ( it . B85 ) = ( QuotCharact (C137 , B85) ));
existence
proof
defpred S6[ set , set ] means (for B86 being (OperSymbol of R1) holds (B86 = $1 implies $2 = ( QuotCharact (C137 , B86) )));
set D78 = (the carrier' of R1);
L305: (for B87 being set holds (B87 in D78 implies (ex B88 being set st S6[ B87 , B88 ])))
proof
let C138 being set;
assume L306: C138 in D78;
reconsider D79 = C138 as (OperSymbol of R1) by L306;
take ( QuotCharact (C137 , D79) );
thus L307: thesis;
end;
consider C139 being Function such that L308: (( dom C139 ) = D78 & (for B89 being set holds (B89 in D78 implies S6[ B89 , ( C139 . B89 ) ]))) from CLASSES1:sch 1(L305);
reconsider D80 = C139 as (ManySortedSet of D78) by L308 , PARTFUN1:def 2 , RELAT_1:def 18;
L309: (for B90 being set holds (B90 in ( dom D80 ) implies ( D80 . B90 ) is Function))
proof
let C140 being set;
assume L310: C140 in ( dom D80 );
reconsider D81 = C140 as (OperSymbol of R1) by L310;
L311: ( D80 . D81 ) = ( QuotCharact (C137 , D81) ) by L308;
thus L312: thesis by L311;
end;
reconsider D82 = D80 as (ManySortedFunction of D78) by L309 , FUNCOP_1:def 6;
L313: (for B91 being set holds (B91 in D78 implies ( D82 . B91 ) is (Function of ( ( ( ( Class C137 ) # ) * (the Arity of R1) ) . B91 ) , ( ( ( Class C137 ) * (the ResultSort of R1) ) . B91 ))))
proof
let C141 being set;
assume L314: C141 in D78;
reconsider D83 = C141 as (OperSymbol of R1) by L314;
L315: ( D82 . D83 ) = ( QuotCharact (C137 , D83) ) by L308;
thus L316: thesis by L315;
end;
reconsider D84 = D82 as (ManySortedFunction of ( ( ( Class C137 ) # ) * (the Arity of R1) ) , ( ( Class C137 ) * (the ResultSort of R1) )) by L313 , PBOOLE:def 15;
take D84;
thus L317: thesis by L308;
end;
uniqueness
proof
let C142 , C143 being (ManySortedFunction of ( ( ( Class C137 ) # ) * (the Arity of R1) ) , ( ( Class C137 ) * (the ResultSort of R1) ));
assume that
L318: (for B92 being (OperSymbol of R1) holds ( C142 . B92 ) = ( QuotCharact (C137 , B92) ))
and
L319: (for B93 being (OperSymbol of R1) holds ( C143 . B93 ) = ( QuotCharact (C137 , B93) ));
L320:
now
let C144 being set;
assume L321: C144 in (the carrier' of R1);
reconsider D85 = C144 as (OperSymbol of R1) by L321;
L322: ( C142 . D85 ) = ( QuotCharact (C137 , D85) ) by L318;
thus L323: ( C142 . C144 ) = ( C143 . C144 ) by L322 , L319;
end;
thus L324: thesis by L320 , PBOOLE:3;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C145 being  non-empty MSAlgebra over R1;
let C146 being (MSCongruence of C145);
func QuotMSAlg (C145 , C146) -> MSAlgebra over R1 equals 
MSAlgebra (# ( Class C146 ) , ( QuotCharact C146 ) #);
coherence;
end;
registration
let R1 being non  void non  empty ManySortedSign;
let C147 being  non-empty MSAlgebra over R1;
let C148 being (MSCongruence of C147);
cluster ( QuotMSAlg (C147 , C148) ) ->  strict  non-empty;
coherence by MSUALG_1:def 3;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C149 being  non-empty MSAlgebra over R1;
let C150 being (MSCongruence of C149);
let C151 being (SortSymbol of R1);
func MSNat_Hom (C149 , C150 , C151) -> (Function of ( (the Sorts of C149) . C151 ) , ( ( Class C150 ) . C151 )) means 
:L328: (for B94 being set holds (B94 in ( (the Sorts of C149) . C151 ) implies ( it . B94 ) = ( Class (( C150 . C151 ) , B94) )));
existence
proof
deffunc H6(set) = ( Class (( C150 . C151 ) , $1) );
consider C152 being Function such that L329: (( dom C152 ) = ( (the Sorts of C149) . C151 ) & (for B95 being set holds (B95 in ( (the Sorts of C149) . C151 ) implies ( C152 . B95 ) = H6(B95)))) from FUNCT_1:sch 3;
L330: (for B96 being set holds (B96 in ( (the Sorts of C149) . C151 ) implies ( C152 . B96 ) in ( ( Class C150 ) . C151 )))
proof
let C153 being set;
assume L331: C153 in ( (the Sorts of C149) . C151 );
L332: ( Class (( C150 . C151 ) , C153) ) in ( Class ( C150 . C151 ) ) by L331 , EQREL_1:def 3;
L333: ( C152 . C153 ) in ( Class ( C150 . C151 ) ) by L332 , L329 , L331;
thus L334: thesis by L333 , L72;
end;
reconsider D86 = C152 as (Function of ( (the Sorts of C149) . C151 ) , ( ( Class C150 ) . C151 )) by L330 , L329 , FUNCT_2:3;
take D86;
thus L335: thesis by L329;
end;
uniqueness
proof
let C154 , C155 being (Function of ( (the Sorts of C149) . C151 ) , ( ( Class C150 ) . C151 ));
assume that
L336: (for B97 being set holds (B97 in ( (the Sorts of C149) . C151 ) implies ( C154 . B97 ) = ( Class (( C150 . C151 ) , B97) )))
and
L337: (for B98 being set holds (B98 in ( (the Sorts of C149) . C151 ) implies ( C155 . B98 ) = ( Class (( C150 . C151 ) , B98) )));
L338:
now
let C156 being set;
assume L339: C156 in ( (the Sorts of C149) . C151 );
L340: ( C154 . C156 ) = ( Class (( C150 . C151 ) , C156) ) by L339 , L336;
thus L341: ( C154 . C156 ) = ( C155 . C156 ) by L340 , L337 , L339;
end;
L342: (( dom C154 ) = ( (the Sorts of C149) . C151 ) & ( dom C155 ) = ( (the Sorts of C149) . C151 )) by FUNCT_2:def 1;
thus L343: thesis by L342 , L338 , FUNCT_1:2;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C157 being  non-empty MSAlgebra over R1;
let C158 being (MSCongruence of C157);
func MSNat_Hom (C157 , C158) -> (ManySortedFunction of C157 , ( QuotMSAlg (C157 , C158) )) means 
:L345: (for B99 being (SortSymbol of R1) holds ( it . B99 ) = ( MSNat_Hom (C157 , C158 , B99) ));
existence
proof
deffunc H7((Element of R1)) = ( MSNat_Hom (C157 , C158 , $1) );
consider C159 being Function such that L346: (( dom C159 ) = (the carrier of R1) & (for B100 being (Element of R1) holds ( C159 . B100 ) = H7(B100))) from FUNCT_1:sch 4;
reconsider D87 = C159 as (ManySortedSet of (the carrier of R1)) by L346 , PARTFUN1:def 2 , RELAT_1:def 18;
L347: (for B101 being set holds (B101 in ( dom D87 ) implies ( D87 . B101 ) is Function))
proof
let C160 being set;
assume L348: C160 in ( dom D87 );
reconsider D88 = C160 as (Element of R1) by L348;
L349: ( D87 . D88 ) = ( MSNat_Hom (C157 , C158 , D88) ) by L346;
thus L350: thesis by L349;
end;
reconsider D89 = D87 as (ManySortedFunction of (the carrier of R1)) by L347 , FUNCOP_1:def 6;
L351: (for B102 being set holds (B102 in (the carrier of R1) implies ( D89 . B102 ) is (Function of ( (the Sorts of C157) . B102 ) , ( ( Class C158 ) . B102 ))))
proof
let C161 being set;
assume L352: C161 in (the carrier of R1);
reconsider D90 = C161 as (Element of R1) by L352;
L353: ( D89 . D90 ) = ( MSNat_Hom (C157 , C158 , D90) ) by L346;
thus L354: thesis by L353;
end;
reconsider D91 = D89 as (ManySortedFunction of (the Sorts of C157) , ( Class C158 )) by L351 , PBOOLE:def 15;
reconsider D92 = D91 as (ManySortedFunction of C157 , ( QuotMSAlg (C157 , C158) ));
take D92;
thus L355: thesis by L346;
end;
uniqueness
proof
let C162 , C163 being (ManySortedFunction of C157 , ( QuotMSAlg (C157 , C158) ));
assume that
L356: (for B103 being (SortSymbol of R1) holds ( C162 . B103 ) = ( MSNat_Hom (C157 , C158 , B103) ))
and
L357: (for B104 being (SortSymbol of R1) holds ( C163 . B104 ) = ( MSNat_Hom (C157 , C158 , B104) ));
L358:
now
let C164 being set;
assume L359: C164 in (the carrier of R1);
reconsider D93 = C164 as (SortSymbol of R1) by L359;
L360: ( C162 . D93 ) = ( MSNat_Hom (C157 , C158 , D93) ) by L356;
thus L361: ( C162 . C164 ) = ( C163 . C164 ) by L360 , L357;
end;
thus L362: thesis by L358 , PBOOLE:3;
end;
end;
theorem
L364: (for R1 being non  void non  empty ManySortedSign holds (for B105 being  non-empty MSAlgebra over R1 holds (for B106 being (MSCongruence of B105) holds ( MSNat_Hom (B105 , B106) ) is_epimorphism B105 , ( QuotMSAlg (B105 , B106) ))))
proof
let R1 being non  void non  empty ManySortedSign;
let C165 being  non-empty MSAlgebra over R1;
let C166 being (MSCongruence of C165);
set D94 = ( MSNat_Hom (C165 , C166) );
set D95 = ( QuotMSAlg (C165 , C166) );
set D96 = (the Sorts of C165);
L365: (for B107 being (OperSymbol of R1) holds (( Args (B107 , C165) ) <> ( {} ) implies (for B108 being (Element of ( Args (B107 , C165) )) holds ( ( D94 . ( the_result_sort_of B107 ) ) . ( ( Den (B107 , C165) ) . B108 ) ) = ( ( Den (B107 , D95) ) . ( D94 # B108 ) ))))
proof
let C167 being (OperSymbol of R1);
assume that
L366: ( Args (C167 , C165) ) <> ( {} );
let C168 being (Element of ( Args (C167 , C165) ));
set D97 = ( the_result_sort_of C167 );
set D98 = ( the_arity_of C167 );
L367: ( (the Arity of R1) . C167 ) = D98 by MSUALG_1:def 1;
L368: ( ( ( ( Class C166 ) # ) * (the Arity of R1) ) . C167 ) = ( product ( ( Class C166 ) * D98 ) ) by L367 , MSAFREE:1;
L369: ( dom C168 ) = ( dom D98 ) by MSUALG_3:6;
L370: (for B109 being set holds (B109 in ( dom D98 ) implies ( ( D94 # C168 ) . B109 ) = ( ( C166 # C168 ) . B109 )))
proof
let C169 being set;
assume L371: C169 in ( dom D98 );
reconsider D99 = C169 as Nat by L371 , ORDINAL1:def 12;
set D100 = ( MSNat_Hom (C165 , C166 , ( D98 /. D99 )) );
set D101 = ( D98 /. D99 );
L372: D99 in ( dom ( (the Sorts of C165) * D98 ) ) by L371 , PARTFUN1:def 2;
L373: ( ( (the Sorts of C165) * D98 ) . D99 ) = ( (the Sorts of C165) . ( D98 . D99 ) ) by L372 , FUNCT_1:12
.= ( D96 . D101 ) by L371 , PARTFUN1:def 6;
reconsider D102 = ( C168 . D99 ) as (Element of ( D96 . D101 )) by L373 , L372 , MSUALG_3:6;
thus L374: ( ( D94 # C168 ) . C169 ) = ( ( D94 . ( D98 /. D99 ) ) . ( C168 . D99 ) ) by L369 , L371 , MSUALG_3:def 6
.= ( D100 . D102 ) by L345
.= ( Class (( C166 . D101 ) , ( C168 . D99 )) ) by L328
.= ( ( C166 # C168 ) . C169 ) by L371 , L102;
end;
L375: ( dom (the Sorts of C165) ) = (the carrier of R1) by PARTFUN1:def 2;
L376: ( rng (the ResultSort of R1) ) c= ( dom (the Sorts of C165) ) by L375;
L377: (( dom (the ResultSort of R1) ) = (the carrier' of R1) & ( dom ( (the Sorts of C165) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) )) by L376 , FUNCT_2:def 1 , RELAT_1:27;
L378: ( ( (the Sorts of C165) * (the ResultSort of R1) ) . C167 ) = ( (the Sorts of C165) . ( (the ResultSort of R1) . C167 ) ) by L377 , FUNCT_1:12
.= ( (the Sorts of C165) . D97 ) by MSUALG_1:def 2;
reconsider D103 = ( ( Den (C167 , C165) ) . C168 ) as (Element of ( D96 . D97 )) by L378 , MSUALG_1:def 5;
L379: (( rng ( Den (C167 , C165) ) ) c= ( Result (C167 , C165) ) & ( Result (C167 , C165) ) = ( D96 . D97 )) by L378 , MSUALG_1:def 5;
L380: ( rng ( Den (C167 , C165) ) ) c= ( dom ( QuotRes (C166 , C167) ) ) by L379 , L378 , FUNCT_2:def 1;
L381: (( dom ( Den (C167 , C165) ) ) = ( Args (C167 , C165) ) & ( dom ( ( QuotRes (C166 , C167) ) * ( Den (C167 , C165) ) ) ) = ( dom ( Den (C167 , C165) ) )) by L380 , FUNCT_2:def 1 , RELAT_1:27;
L382: ( dom ( Class C166 ) ) = (the carrier of R1) by PARTFUN1:def 2;
L383: (( dom ( C166 # C168 ) ) = ( dom ( ( Class C166 ) * ( the_arity_of C167 ) ) ) & ( rng D98 ) c= ( dom ( Class C166 ) )) by L382 , CARD_3:9;
L384: (( dom ( D94 # C168 ) ) = ( dom D98 ) & ( dom ( C166 # C168 ) ) = ( dom D98 )) by L383 , MSUALG_3:6 , RELAT_1:27;
L385: ( D94 # C168 ) = ( C166 # C168 ) by L384 , L370 , FUNCT_1:2;
L386: ( Den (C167 , D95) ) = ( ( QuotCharact C166 ) . C167 ) by MSUALG_1:def 6
.= ( QuotCharact (C166 , C167) ) by L304;
L387: ( ( Den (C167 , D95) ) . ( D94 # C168 ) ) = ( ( ( QuotRes (C166 , C167) ) * ( Den (C167 , C165) ) ) . C168 ) by L386 , L368 , L385 , L259
.= ( ( QuotRes (C166 , C167) ) . D103 ) by L381 , FUNCT_1:12
.= ( Class (C166 , D103) ) by L130
.= ( ( MSNat_Hom (C165 , C166 , D97) ) . D103 ) by L328
.= ( ( D94 . D97 ) . ( ( Den (C167 , C165) ) . C168 ) ) by L345;
thus L388: thesis by L387;
end;
thus L389: D94 is_homomorphism C165 , D95 by L365 , MSUALG_3:def 7;
L390: (for B110 being set holds (B110 in (the carrier of R1) implies ( rng ( D94 . B110 ) ) = ( (the Sorts of D95) . B110 )))
proof
let C170 being set;
assume L391: C170 in (the carrier of R1);
reconsider D104 = C170 as (Element of R1) by L391;
reconsider D105 = ( D94 . C170 ) as (Function of ( D96 . D104 ) , ( (the Sorts of D95) . D104 )) by PBOOLE:def 15;
L392: ( dom D105 ) = ( D96 . D104 ) by FUNCT_2:def 1;
L393: ( (the Sorts of D95) . D104 ) = ( Class ( C166 . D104 ) ) by L72;
L394: (for B111 being set holds (B111 in ( (the Sorts of D95) . C170 ) implies B111 in ( rng D105 )))
proof
let C171 being set;
L395: D105 = ( MSNat_Hom (C165 , C166 , D104) ) by L345;
assume L396: C171 in ( (the Sorts of D95) . C170 );
consider C172 being set such that L397: C172 in ( D96 . D104 ) and L398: C171 = ( Class (( C166 . D104 ) , C172) ) by L396 , L393 , EQREL_1:def 3;
L399: ( D105 . C172 ) in ( rng D105 ) by L392 , L397 , FUNCT_1:def 3;
thus L400: thesis by L399 , L397 , L398 , L395 , L328;
end;
L401: ( (the Sorts of D95) . C170 ) c= ( rng D105 ) by L394 , TARSKI:def 3;
thus L402: thesis by L401 , XBOOLE_0:def 10;
end;
thus L403: thesis by L390 , MSUALG_3:def 3;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C173 , C174 being  non-empty MSAlgebra over R1;
let C175 being (ManySortedFunction of C173 , C174);
let C176 being (SortSymbol of R1);
func MSCng (C175 , C176) -> (Equivalence_Relation of ( (the Sorts of C173) . C176 )) means 
:L404: (for B112 , B113 being (Element of ( (the Sorts of C173) . C176 )) holds ([ B112 , B113 ] in it iff ( ( C175 . C176 ) . B112 ) = ( ( C175 . C176 ) . B113 )));
existence
proof
defpred S7[ set , set ] means ( ( C175 . C176 ) . $1 ) = ( ( C175 . C176 ) . $2 );
set D106 = ( (the Sorts of C173) . C176 );
L405: (for B114 , B115 being set holds (S7[ B114 , B115 ] implies S7[ B115 , B114 ]));
L406: (for B116 , B117 , B118 being set holds ((S7[ B116 , B117 ] & S7[ B117 , B118 ]) implies S7[ B116 , B118 ]));
L407: (for B119 being set holds (B119 in D106 implies S7[ B119 , B119 ]));
consider C177 being (Equivalence_Relation of D106) such that L408: (for B120 , B121 being set holds ([ B120 , B121 ] in C177 iff (B120 in D106 & B121 in D106 & S7[ B120 , B121 ]))) from EQREL_1:sch 1(L407 , L405 , L406);
take C177;
let C178 , C179 being (Element of ( (the Sorts of C173) . C176 ));
thus L409: thesis by L408;
end;
uniqueness
proof
let C180 , C181 being (Equivalence_Relation of ( (the Sorts of C173) . C176 ));
assume that
L410: (for B122 , B123 being (Element of ( (the Sorts of C173) . C176 )) holds ([ B122 , B123 ] in C180 iff ( ( C175 . C176 ) . B122 ) = ( ( C175 . C176 ) . B123 )))
and
L411: (for B124 , B125 being (Element of ( (the Sorts of C173) . C176 )) holds ([ B124 , B125 ] in C181 iff ( ( C175 . C176 ) . B124 ) = ( ( C175 . C176 ) . B125 )));
L412:
now
let C182 , C183 being set;
thus L413: ([ C182 , C183 ] in C180 implies [ C182 , C183 ] in C181)
proof
assume L414: [ C182 , C183 ] in C180;
reconsider D107 = C182 , D108 = C183 as (Element of ( (the Sorts of C173) . C176 )) by L414 , ZFMISC_1:87;
L415: ( ( C175 . C176 ) . D107 ) = ( ( C175 . C176 ) . D108 ) by L410 , L414;
thus L416: thesis by L415 , L411;
end;

assume L417: [ C182 , C183 ] in C181;
reconsider D109 = C182 , D110 = C183 as (Element of ( (the Sorts of C173) . C176 )) by L417 , ZFMISC_1:87;
L418: ( ( C175 . C176 ) . D109 ) = ( ( C175 . C176 ) . D110 ) by L411 , L417;
thus L419: [ C182 , C183 ] in C180 by L418 , L410;
end;
thus L420: thesis by L412 , RELAT_1:def 2;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C184 , C185 being  non-empty MSAlgebra over R1;
let C186 being (ManySortedFunction of C184 , C185);
assume L422: C186 is_homomorphism C184 , C185;
func MSCng C186 -> (MSCongruence of C184) means 
:L423: (for B126 being (SortSymbol of R1) holds ( it . B126 ) = ( MSCng (C186 , B126) ));
existence
proof
deffunc H8((Element of R1)) = ( MSCng (C186 , $1) );
consider C187 being Function such that L424: (( dom C187 ) = (the carrier of R1) & (for B127 being (Element of R1) holds ( C187 . B127 ) = H8(B127))) from FUNCT_1:sch 4;
reconsider D111 = C187 as (ManySortedSet of (the carrier of R1)) by L424 , PARTFUN1:def 2 , RELAT_1:def 18;
L425: (for B128 being set holds (B128 in (the carrier of R1) implies ( D111 . B128 ) is (Relation of ( (the Sorts of C184) . B128 ) , ( (the Sorts of C184) . B128 ))))
proof
let C188 being set;
assume L426: C188 in (the carrier of R1);
reconsider D112 = C188 as (Element of R1) by L426;
L427: ( D111 . C188 ) = ( MSCng (C186 , D112) ) by L424;
thus L428: thesis by L427;
end;
reconsider D113 = D111 as (ManySortedRelation of (the Sorts of C184)) by L425 , L4;
reconsider D114 = D113 as (ManySortedRelation of C184);
L429: (for B129 being set holds (for B130 being (Relation of ( (the Sorts of C184) . B129 )) holds ((B129 in (the carrier of R1) & ( D114 . B129 ) = B130) implies B130 is (Equivalence_Relation of ( (the Sorts of C184) . B129 )))))
proof
let C189 being set;
let C190 being (Relation of ( (the Sorts of C184) . C189 ));
assume that
L430: C189 in (the carrier of R1)
and
L431: ( D114 . C189 ) = C190;
reconsider D115 = C189 as (Element of R1) by L430;
L432: C190 = ( MSCng (C186 , D115) ) by L424 , L431;
thus L433: thesis by L432;
end;
L434: D114 is  MSEquivalence_Relation-like by L429 , L17;
reconsider D116 = D114 as  MSEquivalence-like (ManySortedRelation of C184) by L434 , L21;
L435: (for B131 being (OperSymbol of R1) holds (for B132 , B133 being (Element of ( Args (B131 , C184) )) holds ((for B134 being Nat holds (B134 in ( dom B132 ) implies [ ( B132 . B134 ) , ( B133 . B134 ) ] in ( D116 . ( ( the_arity_of B131 ) /. B134 ) ))) implies [ ( ( Den (B131 , C184) ) . B132 ) , ( ( Den (B131 , C184) ) . B133 ) ] in ( D116 . ( the_result_sort_of B131 ) ))))
proof
let C191 being (OperSymbol of R1);
let C192 , C193 being (Element of ( Args (C191 , C184) ));
set D117 = ( the_arity_of C191 );
set D118 = ( the_result_sort_of C191 );
set D119 = (the Sorts of C184);
L436: ( dom C192 ) = ( dom ( the_arity_of C191 ) ) by MSUALG_3:6;
L437: ( dom C193 ) = ( dom ( the_arity_of C191 ) ) by MSUALG_3:6;
assume L438: (for B135 being Nat holds (B135 in ( dom C192 ) implies [ ( C192 . B135 ) , ( C193 . B135 ) ] in ( D116 . ( ( the_arity_of C191 ) /. B135 ) )));
L439:
now
let C194 being set;
assume L440: C194 in ( dom ( the_arity_of C191 ) );
reconsider D120 = C194 as Nat by L440 , ORDINAL1:def 12;
L441: (( ( C186 # C192 ) . D120 ) = ( ( C186 . ( D117 /. D120 ) ) . ( C192 . D120 ) ) & ( ( C186 # C193 ) . D120 ) = ( ( C186 . ( D117 /. D120 ) ) . ( C193 . D120 ) )) by L436 , L437 , L440 , MSUALG_3:def 6;
L442: ( D117 . D120 ) in ( rng D117 ) by L440 , FUNCT_1:def 3;
reconsider D121 = ( D117 . D120 ) as (SortSymbol of R1) by L442;
L443: C194 in ( dom ( D119 * D117 ) ) by L440 , PARTFUN1:def 2;
L444: (( C192 . D120 ) in ( ( D119 * D117 ) . C194 ) & ( C193 . D120 ) in ( ( D119 * D117 ) . C194 )) by L443 , MSUALG_3:6;
reconsider D122 = ( C192 . D120 ) , D123 = ( C193 . D120 ) as (Element of ( D119 . D121 )) by L444 , L443 , FUNCT_1:12;
L445: [ D122 , D123 ] in ( D116 . ( D117 /. D120 ) ) by L438 , L436 , L440;
L446: ( D117 /. D120 ) = ( D117 . D120 ) by L440 , PARTFUN1:def 6;
L447: ( D116 . ( D117 /. D120 ) ) = ( MSCng (C186 , D121) ) by L446 , L424;
thus L448: ( ( C186 # C192 ) . C194 ) = ( ( C186 # C193 ) . C194 ) by L447 , L441 , L446 , L445 , L404;
end;
L449: (( dom ( C186 # C192 ) ) = ( dom ( the_arity_of C191 ) ) & ( dom ( C186 # C193 ) ) = ( dom ( the_arity_of C191 ) )) by MSUALG_3:6;
L450: ( C186 # C192 ) = ( C186 # C193 ) by L449 , L439 , FUNCT_1:2;
reconsider D124 = D118 as (SortSymbol of R1);
L451: ( dom (the ResultSort of R1) ) = (the carrier' of R1) by FUNCT_2:def 1;
L452: ( dom ( (the Sorts of C184) * (the ResultSort of R1) ) ) = ( dom (the ResultSort of R1) ) by L451 , PARTFUN1:def 2;
L453: ( Result (C191 , C184) ) = ( ( (the Sorts of C184) * (the ResultSort of R1) ) . C191 ) by MSUALG_1:def 5
.= ( (the Sorts of C184) . ( (the ResultSort of R1) . C191 ) ) by L451 , L452 , FUNCT_1:12
.= ( (the Sorts of C184) . D124 ) by MSUALG_1:def 2;
reconsider D125 = ( ( Den (C191 , C184) ) . C192 ) , D126 = ( ( Den (C191 , C184) ) . C193 ) as (Element of ( (the Sorts of C184) . D124 )) by L453;
L454: ( ( C186 . D124 ) . D126 ) = ( ( Den (C191 , C185) ) . ( C186 # C193 ) ) by L422 , MSUALG_3:def 7;
L455: (( D116 . D124 ) = ( MSCng (C186 , D124) ) & ( ( C186 . D124 ) . D125 ) = ( ( Den (C191 , C185) ) . ( C186 # C192 ) )) by L422 , L424 , MSUALG_3:def 7;
thus L456: thesis by L455 , L450 , L454 , L404;
end;
reconsider D127 = D116 as (MSCongruence of C184) by L435 , L38;
take D127;
thus L457: thesis by L424;
end;
uniqueness
proof
let C195 , C196 being (MSCongruence of C184);
assume that
L458: (for B136 being (SortSymbol of R1) holds ( C195 . B136 ) = ( MSCng (C186 , B136) ))
and
L459: (for B137 being (SortSymbol of R1) holds ( C196 . B137 ) = ( MSCng (C186 , B137) ));
L460:
now
let C197 being set;
assume L461: C197 in (the carrier of R1);
reconsider D128 = C197 as (Element of R1) by L461;
L462: ( C195 . D128 ) = ( MSCng (C186 , D128) ) by L458;
thus L463: ( C195 . C197 ) = ( C196 . C197 ) by L462 , L459;
end;
thus L464: thesis by L460 , PBOOLE:3;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C198 , C199 being  non-empty MSAlgebra over R1;
let C200 being (ManySortedFunction of C198 , C199);
let C201 being (SortSymbol of R1);
assume L466: C200 is_homomorphism C198 , C199;
func MSHomQuot (C200 , C201) -> (Function of ( (the Sorts of ( QuotMSAlg (C198 , ( MSCng C200 )) )) . C201 ) , ( (the Sorts of C199) . C201 )) means 
:L467: (for B138 being (Element of ( (the Sorts of C198) . C201 )) holds ( it . ( Class (( MSCng (C200 , C201) ) , B138) ) ) = ( ( C200 . C201 ) . B138 ));
existence
proof
set D129 = ( QuotMSAlg (C198 , ( MSCng C200 )) );
set D130 = (the Sorts of D129);
set D131 = (the Sorts of C198);
set D132 = (the Sorts of C199);
defpred S8[ set , set ] means (for B139 being (Element of ( D131 . C201 )) holds ($1 = ( Class (( MSCng (C200 , C201) ) , B139) ) implies $2 = ( ( C200 . C201 ) . B139 )));
L468: ( D130 . C201 ) = ( Class ( ( MSCng C200 ) . C201 ) ) by L72
.= ( Class ( MSCng (C200 , C201) ) ) by L466 , L423;
L469: (for B140 being set holds (B140 in ( D130 . C201 ) implies (ex B141 being set st (B141 in ( D132 . C201 ) & S8[ B140 , B141 ]))))
proof
let C202 being set;
assume L470: C202 in ( D130 . C201 );
reconsider D133 = C202 as (Subset of ( D131 . C201 )) by L470 , L468;
consider C203 being set such that L471: C203 in ( D131 . C201 ) and L472: D133 = ( Class (( MSCng (C200 , C201) ) , C203) ) by L468 , L470 , EQREL_1:def 3;
reconsider D134 = C203 as (Element of ( D131 . C201 )) by L471;
take D135 = ( ( C200 . C201 ) . D134 );
thus L473: D135 in ( D132 . C201 );
let C204 being (Element of ( D131 . C201 ));
assume L474: C202 = ( Class (( MSCng (C200 , C201) ) , C204) );
L475: C204 in ( Class (( MSCng (C200 , C201) ) , D134) ) by L474 , L472 , EQREL_1:23;
L476: [ C204 , D134 ] in ( MSCng (C200 , C201) ) by L475 , EQREL_1:19;
thus L477: thesis by L476 , L404;
end;
consider C205 being Function such that L478: (( dom C205 ) = ( D130 . C201 ) & ( rng C205 ) c= ( D132 . C201 ) & (for B142 being set holds (B142 in ( D130 . C201 ) implies S8[ B142 , ( C205 . B142 ) ]))) from FUNCT_1:sch 5(L469);
reconsider D136 = C205 as (Function of ( D130 . C201 ) , ( D132 . C201 )) by L478 , FUNCT_2:def 1 , RELSET_1:4;
take D136;
let C206 being (Element of ( D131 . C201 ));
L479: ( Class (( MSCng (C200 , C201) ) , C206) ) in ( Class ( MSCng (C200 , C201) ) ) by EQREL_1:def 3;
thus L480: thesis by L479 , L468 , L478;
end;
uniqueness
proof
set D137 = ( QuotMSAlg (C198 , ( MSCng C200 )) );
set D138 = (the Sorts of D137);
set D139 = (the Sorts of C198);
set D140 = (the Sorts of C199);
let C207 , C208 being (Function of ( D138 . C201 ) , ( D140 . C201 ));
assume that
L481: (for B143 being (Element of ( D139 . C201 )) holds ( C207 . ( Class (( MSCng (C200 , C201) ) , B143) ) ) = ( ( C200 . C201 ) . B143 ))
and
L482: (for B144 being (Element of ( D139 . C201 )) holds ( C208 . ( Class (( MSCng (C200 , C201) ) , B144) ) ) = ( ( C200 . C201 ) . B144 ));
L483: ( D138 . C201 ) = ( Class ( ( MSCng C200 ) . C201 ) ) by L72
.= ( Class ( MSCng (C200 , C201) ) ) by L466 , L423;
L484: (for B145 being set holds (B145 in ( D138 . C201 ) implies ( C207 . B145 ) = ( C208 . B145 )))
proof
let C209 being set;
assume L485: C209 in ( D138 . C201 );
reconsider D141 = C209 as (Subset of ( D139 . C201 )) by L485 , L483;
consider C210 being set such that L486: C210 in ( D139 . C201 ) and L487: D141 = ( Class (( MSCng (C200 , C201) ) , C210) ) by L483 , L485 , EQREL_1:def 3;
reconsider D142 = C210 as (Element of ( D139 . C201 )) by L486;
thus L488: ( C207 . C209 ) = ( ( C200 . C201 ) . D142 ) by L481 , L487
.= ( C208 . C209 ) by L482 , L487;
end;
thus L489: thesis by L484 , FUNCT_2:12;
end;
end;
definition
let R1 being non  void non  empty ManySortedSign;
let C211 , C212 being  non-empty MSAlgebra over R1;
let C213 being (ManySortedFunction of C211 , C212);
func MSHomQuot C213 -> (ManySortedFunction of ( QuotMSAlg (C211 , ( MSCng C213 )) ) , C212) means 
:L491: (for B146 being (SortSymbol of R1) holds ( it . B146 ) = ( MSHomQuot (C213 , B146) ));
existence
proof
deffunc H9((Element of R1)) = ( MSHomQuot (C213 , $1) );
consider C214 being Function such that L492: (( dom C214 ) = (the carrier of R1) & (for B147 being (Element of R1) holds ( C214 . B147 ) = H9(B147))) from FUNCT_1:sch 4;
reconsider D143 = C214 as (ManySortedSet of (the carrier of R1)) by L492 , PARTFUN1:def 2 , RELAT_1:def 18;
L493: (for B148 being set holds (B148 in ( dom D143 ) implies ( D143 . B148 ) is Function))
proof
let C215 being set;
assume L494: C215 in ( dom D143 );
reconsider D144 = C215 as (Element of R1) by L494;
L495: ( D143 . D144 ) = ( MSHomQuot (C213 , D144) ) by L492;
thus L496: thesis by L495;
end;
reconsider D145 = D143 as (ManySortedFunction of (the carrier of R1)) by L493 , FUNCOP_1:def 6;
L497: (for B149 being set holds (B149 in (the carrier of R1) implies ( D145 . B149 ) is (Function of ( (the Sorts of ( QuotMSAlg (C211 , ( MSCng C213 )) )) . B149 ) , ( (the Sorts of C212) . B149 ))))
proof
let C216 being set;
assume L498: C216 in (the carrier of R1);
reconsider D146 = C216 as (Element of R1) by L498;
L499: ( D145 . D146 ) = ( MSHomQuot (C213 , D146) ) by L492;
thus L500: thesis by L499;
end;
reconsider D147 = D145 as (ManySortedFunction of (the Sorts of ( QuotMSAlg (C211 , ( MSCng C213 )) )) , (the Sorts of C212)) by L497 , PBOOLE:def 15;
reconsider D148 = D147 as (ManySortedFunction of ( QuotMSAlg (C211 , ( MSCng C213 )) ) , C212);
take D148;
thus L501: thesis by L492;
end;
uniqueness
proof
let C217 , C218 being (ManySortedFunction of ( QuotMSAlg (C211 , ( MSCng C213 )) ) , C212);
assume that
L502: (for B150 being (SortSymbol of R1) holds ( C217 . B150 ) = ( MSHomQuot (C213 , B150) ))
and
L503: (for B151 being (SortSymbol of R1) holds ( C218 . B151 ) = ( MSHomQuot (C213 , B151) ));
L504:
now
let C219 being set;
assume L505: C219 in (the carrier of R1);
reconsider D149 = C219 as (SortSymbol of R1) by L505;
L506: ( C217 . D149 ) = ( MSHomQuot (C213 , D149) ) by L502;
thus L507: ( C217 . C219 ) = ( C218 . C219 ) by L506 , L503;
end;
thus L508: thesis by L504 , PBOOLE:3;
end;
end;
theorem
L510: (for R1 being non  void non  empty ManySortedSign holds (for B152 , B153 being  non-empty MSAlgebra over R1 holds (for B154 being (ManySortedFunction of B152 , B153) holds (B154 is_homomorphism B152 , B153 implies ( MSHomQuot B154 ) is_monomorphism ( QuotMSAlg (B152 , ( MSCng B154 )) ) , B153))))
proof
let R1 being non  void non  empty ManySortedSign;
let C220 , C221 being  non-empty MSAlgebra over R1;
let C222 being (ManySortedFunction of C220 , C221);
set D150 = ( MSCng C222 );
set D151 = ( QuotMSAlg (C220 , D150) );
set D152 = ( MSHomQuot C222 );
set D153 = (the Sorts of C220);
assume L511: C222 is_homomorphism C220 , C221;
L512: (for B155 being (OperSymbol of R1) holds (( Args (B155 , D151) ) <> ( {} ) implies (for B156 being (Element of ( Args (B155 , D151) )) holds ( ( D152 . ( the_result_sort_of B155 ) ) . ( ( Den (B155 , D151) ) . B156 ) ) = ( ( Den (B155 , C221) ) . ( D152 # B156 ) ))))
proof
let C223 being (OperSymbol of R1);
assume that
L513: ( Args (C223 , D151) ) <> ( {} );
let C224 being (Element of ( Args (C223 , D151) ));
set D154 = ( the_result_sort_of C223 );
set D155 = ( the_arity_of C223 );
L514: ( dom C224 ) = ( dom D155 ) by MSUALG_3:6;
L515: ( Args (C223 , D151) ) = ( ( ( ( Class D150 ) # ) * (the Arity of R1) ) . C223 ) by MSUALG_1:def 4;
consider C225 being (Element of ( Args (C223 , C220) )) such that L516: C224 = ( D150 # C225 ) by L515 , L219;
L517: ( dom C225 ) = ( dom D155 ) by MSUALG_3:6;
L518:
now
let C226 being set;
assume L519: C226 in ( dom D155 );
reconsider D156 = C226 as Nat by L519 , ORDINAL1:def 12;
L520: ( D155 . D156 ) in ( rng D155 ) by L519 , FUNCT_1:def 3;
reconsider D157 = ( D155 . D156 ) as (SortSymbol of R1) by L520;
L521: ( D155 /. D156 ) = ( D155 . D156 ) by L519 , PARTFUN1:def 6;
L522: ( C224 . D156 ) = ( Class (( D150 . D157 ) , ( C225 . D156 )) ) by L521 , L516 , L519 , L102;
L523: ( C224 . D156 ) = ( Class (( MSCng (C222 , D157) ) , ( C225 . D156 )) ) by L522 , L511 , L423;
L524: D156 in ( dom ( D153 * D155 ) ) by L519 , PARTFUN1:def 2;
L525: ( C225 . D156 ) in ( ( D153 * D155 ) . D156 ) by L524 , MSUALG_3:6;
reconsider D158 = ( C225 . D156 ) as (Element of ( D153 . D157 )) by L525 , L524 , FUNCT_1:12;
L526: ( ( D152 # C224 ) . D156 ) = ( ( D152 . D157 ) . ( C224 . D156 ) ) by L514 , L519 , L521 , MSUALG_3:def 6
.= ( ( MSHomQuot (C222 , D157) ) . ( C224 . D156 ) ) by L491
.= ( ( C222 . D157 ) . D158 ) by L511 , L523 , L467
.= ( ( C222 # C225 ) . D156 ) by L517 , L519 , L521 , MSUALG_3:def 6;
thus L527: ( ( D152 # C224 ) . C226 ) = ( ( C222 # C225 ) . C226 ) by L526;
end;
L528: C223 in (the carrier' of R1);
L529: C223 in ( dom ( D153 * (the ResultSort of R1) ) ) by L528 , PARTFUN1:def 2;
L530: ( ( (the Sorts of C220) * (the ResultSort of R1) ) . C223 ) = ( (the Sorts of C220) . ( (the ResultSort of R1) . C223 ) ) by L529 , FUNCT_1:12
.= ( (the Sorts of C220) . D154 ) by MSUALG_1:def 2;
L531: (( rng ( Den (C223 , C220) ) ) c= ( Result (C223 , C220) ) & ( Result (C223 , C220) ) = ( D153 . D154 )) by L530 , MSUALG_1:def 5;
L532: ( rng ( Den (C223 , C220) ) ) c= ( dom ( QuotRes (D150 , C223) ) ) by L531 , L530 , FUNCT_2:def 1;
L533: (( dom ( Den (C223 , C220) ) ) = ( Args (C223 , C220) ) & ( dom ( ( QuotRes (D150 , C223) ) * ( Den (C223 , C220) ) ) ) = ( dom ( Den (C223 , C220) ) )) by L532 , FUNCT_2:def 1 , RELAT_1:27;
L534: D155 = ( (the Arity of R1) . C223 ) by MSUALG_1:def 1;
L535: ( product ( ( Class D150 ) * D155 ) ) = ( ( ( ( Class D150 ) # ) * (the Arity of R1) ) . C223 ) by L534 , MSAFREE:1;
reconsider D159 = ( ( Den (C223 , C220) ) . C225 ) as (Element of ( D153 . D154 )) by L530 , MSUALG_1:def 5;
L536: ( D152 . D154 ) = ( MSHomQuot (C222 , D154) ) by L491;
L537: ( Den (C223 , D151) ) = ( ( QuotCharact D150 ) . C223 ) by MSUALG_1:def 6
.= ( QuotCharact (D150 , C223) ) by L304;
L538: ( ( Den (C223 , D151) ) . C224 ) = ( ( ( QuotRes (D150 , C223) ) * ( Den (C223 , C220) ) ) . C225 ) by L537 , L516 , L535 , L259
.= ( ( QuotRes (D150 , C223) ) . D159 ) by L533 , FUNCT_1:12
.= ( Class (D150 , D159) ) by L130
.= ( Class (( MSCng (C222 , D154) ) , D159) ) by L511 , L423;
L539: ( ( D152 . D154 ) . ( ( Den (C223 , D151) ) . C224 ) ) = ( ( C222 . D154 ) . ( ( Den (C223 , C220) ) . C225 ) ) by L538 , L511 , L536 , L467
.= ( ( Den (C223 , C221) ) . ( C222 # C225 ) ) by L511 , MSUALG_3:def 7;
L540: (( dom ( D152 # C224 ) ) = ( dom D155 ) & ( dom ( C222 # C225 ) ) = ( dom D155 )) by MSUALG_3:6;
thus L541: thesis by L540 , L518 , L539 , FUNCT_1:2;
end;
thus L542: D152 is_homomorphism D151 , C221 by L512 , MSUALG_3:def 7;
L543: (for B157 being set holds (B157 in (the carrier of R1) implies ( D152 . B157 ) is  one-to-one))
proof
let C227 being set;
set D160 = ( D152 . C227 );
assume L544: C227 in (the carrier of R1);
reconsider D161 = C227 as (SortSymbol of R1) by L544;
L545: D160 = ( MSHomQuot (C222 , D161) ) by L491;
L546: (for B158 , B159 being set holds ((B158 in ( dom D160 ) & B159 in ( dom D160 ) & ( D160 . B158 ) = ( D160 . B159 )) implies B158 = B159))
proof
let C228 , C229 being set;
assume that
L547: C228 in ( dom D160 )
and
L548: C229 in ( dom D160 )
and
L549: ( D160 . C228 ) = ( D160 . C229 );
L550: C228 in ( ( Class D150 ) . D161 ) by L545 , L547 , FUNCT_2:def 1;
L551: C228 in ( Class ( D150 . D161 ) ) by L550 , L72;
consider C230 being set such that L552: C230 in ( D153 . D161 ) and L553: C228 = ( Class (( D150 . D161 ) , C230) ) by L551 , EQREL_1:def 3;
L554: C229 in ( ( Class D150 ) . D161 ) by L545 , L548 , FUNCT_2:def 1;
L555: C229 in ( Class ( D150 . D161 ) ) by L554 , L72;
consider C231 being set such that L556: C231 in ( D153 . D161 ) and L557: C229 = ( Class (( D150 . D161 ) , C231) ) by L555 , EQREL_1:def 3;
reconsider D162 = C231 as (Element of ( D153 . D161 )) by L556;
L558: ( D150 . D161 ) = ( MSCng (C222 , D161) ) by L511 , L423;
L559: ( D160 . C229 ) = ( ( C222 . D161 ) . D162 ) by L558 , L511 , L545 , L557 , L467;
reconsider D163 = C230 as (Element of ( D153 . D161 )) by L552;
L560: ( D160 . C228 ) = ( ( C222 . D161 ) . D163 ) by L511 , L545 , L558 , L553 , L467;
L561: [ D163 , D162 ] in ( MSCng (C222 , D161) ) by L560 , L549 , L559 , L404;
thus L562: thesis by L561 , L558 , L553 , L557 , EQREL_1:35;
end;
thus L563: thesis by L546 , FUNCT_1:def 4;
end;
thus L564: thesis by L543 , MSUALG_3:1;
end;
theorem
L565: (for R1 being non  void non  empty ManySortedSign holds (for B160 , B161 being  non-empty MSAlgebra over R1 holds (for B162 being (ManySortedFunction of B160 , B161) holds (B162 is_epimorphism B160 , B161 implies ( MSHomQuot B162 ) is_isomorphism ( QuotMSAlg (B160 , ( MSCng B162 )) ) , B161))))
proof
let R1 being non  void non  empty ManySortedSign;
let C232 , C233 being  non-empty MSAlgebra over R1;
let C234 being (ManySortedFunction of C232 , C233);
set D164 = ( MSCng C234 );
set D165 = ( QuotMSAlg (C232 , D164) );
set D166 = ( MSHomQuot C234 );
set D167 = (the Sorts of D165);
set D168 = (the Sorts of C232);
set D169 = (the Sorts of C233);
assume L566: C234 is_epimorphism C232 , C233;
L567: C234 is_homomorphism C232 , C233 by L566 , MSUALG_3:def 8;
L568: C234 is  "onto" by L566 , MSUALG_3:def 8;
L569: (for B163 being set holds (B163 in (the carrier of R1) implies ( rng ( D166 . B163 ) ) = ( D169 . B163 )))
proof
let C235 being set;
set D170 = ( D166 . C235 );
assume L570: C235 in (the carrier of R1);
reconsider D171 = C235 as (SortSymbol of R1) by L570;
L571: ( rng ( C234 . D171 ) ) = ( D169 . D171 ) by L568 , MSUALG_3:def 3;
L572: ( D166 . C235 ) = ( MSHomQuot (C234 , D171) ) by L491;
thus L573: ( rng D170 ) c= ( D169 . C235 ) by L572 , RELAT_1:def 19;
let C236 being set;
assume L574: C236 in ( D169 . C235 );
consider C237 being set such that L575: C237 in ( dom ( C234 . D171 ) ) and L576: ( ( C234 . D171 ) . C237 ) = C236 by L574 , L571 , FUNCT_1:def 3;
L577: (( MSCng (C234 , D171) ) = ( ( MSCng C234 ) . D171 ) & ( D167 . D171 ) = ( Class ( ( MSCng C234 ) . D171 ) )) by L567 , L72 , L423;
reconsider D172 = C237 as (Element of ( D168 . D171 )) by L575;
L578: ( dom D170 ) = ( D167 . D171 ) by L572 , FUNCT_2:def 1;
L579: ( Class (( MSCng (C234 , D171) ) , D172) ) in ( dom D170 ) by L578 , L577 , EQREL_1:def 3;
L580: ( D170 . ( Class (( MSCng (C234 , D171) ) , D172) ) ) = C236 by L567 , L572 , L576 , L467;
thus L581: thesis by L580 , L579 , FUNCT_1:def 3;
end;
L582: D166 is  "onto" by L569 , MSUALG_3:def 3;
L583: D166 is_monomorphism D165 , C233 by L567 , L510;
L584: (D166 is_homomorphism D165 , C233 & D166 is  "1-1") by L583 , MSUALG_3:def 9;
thus L585: thesis by L584 , L582 , MSUALG_3:13;
end;
theorem
L586: (for R1 being non  void non  empty ManySortedSign holds (for B164 , B165 being  non-empty MSAlgebra over R1 holds (for B166 being (ManySortedFunction of B164 , B165) holds (B166 is_epimorphism B164 , B165 implies ( QuotMSAlg (B164 , ( MSCng B166 )) ) , B165 are_isomorphic ))))
proof
let R1 being non  void non  empty ManySortedSign;
let C238 , C239 being  non-empty MSAlgebra over R1;
let C240 being (ManySortedFunction of C238 , C239);
assume L587: C240 is_epimorphism C238 , C239;
L588: ( MSHomQuot C240 ) is_isomorphism ( QuotMSAlg (C238 , ( MSCng C240 )) ) , C239 by L587 , L565;
thus L589: thesis by L588 , MSUALG_3:def 11;
end;
