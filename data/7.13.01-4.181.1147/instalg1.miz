:: Institution of Many-sorted Algebras, Part { I } : Signature Reduct
:: of an Algebra
::  by Grzegorz Bancerek
::
:: Received December 30, 1996
:: Copyright (c) 1996-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, STRUCT_0, MSUALG_1, RELAT_1, PBOOLE, MSATERM, MSAFREE,
      SUBSET_1, DTCONSTR, FINSEQ_1, TDGROUP, TREES_3, TARSKI, FUNCT_1, NUMBERS,
      MARGREL1, PARTFUN1, PZFMISC1, TREES_4, FUNCT_6, MSUALG_3, MSUALG_6,
      PUA2MSS1, CARD_3, RLTOPSP1, FUNCT_4, REWRITE1, REALSET1, CAT_1, ZFMISC_1,
      NAT_1, MEMBER_1, INSTALG1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, ORDINAL1, RELAT_1, FUNCT_1,
      NUMBERS, FINSEQ_1, STRUCT_0, FINSEQ_2, CARD_3, LANG1, TREES_3, TREES_4,
      DTCONSTR, REWRITE1, FUNCT_7, PBOOLE, PZFMISC1, MSUALG_1, PARTFUN1,
      FUNCT_2, PRALG_2, MSUALG_3, PUA2MSS1, MSAFREE, MSATERM, MSUALG_6;
 constructors NAT_1, REWRITE1, PZFMISC1, FUNCT_7, PRALG_2, MSUALG_3, MSATERM,
      PUA2MSS1, MSUALG_6, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, FUNCT_2, FUNCOP_1, PBOOLE, TREES_3,
      STRUCT_0, MSUALG_1, MSUALG_3, MSAFREE, MSATERM, MSUALG_9, RELSET_1,
      FINSEQ_1;
 requirements SUBSET, BOOLE;
 definitions TARSKI, STRUCT_0, FUNCT_1, MSUALG_1, MSUALG_3, PUA2MSS1, MSUALG_6,
      PBOOLE, PZFMISC1;
 theorems ZFMISC_1, RELAT_1, FUNCT_1, GRFUNC_1, FUNCT_2, FINSEQ_1, TARSKI,
      TREES_4, PBOOLE, MSUALG_1, MSUALG_3, REWRITE1, PRALG_2, PUA2MSS1,
      MSAFREE, MSATERM, EXTENS_1, MSUALG_6, RELSET_1, XBOOLE_0, MSALIMIT,
      PARTFUN1, FINSEQ_2, XTUPLE_0;
 schemes CLASSES1, MSATERM, MSUALG_6, FUNCT_1;

begin
theorem
L1: (for B1 being non  empty non  void ManySortedSign holds (for B2 being (OperSymbol of B1) holds (for B3 being  non-empty (ManySortedSet of (the carrier of B1)) holds (for B4 being set holds (B4 is (ArgumentSeq of ( Sym (B2 , B3) )) iff B4 is (Element of ( Args (B2 , ( FreeMSA B3 )) )))))))
proof
let C1 being non  empty non  void ManySortedSign;
let C2 being (OperSymbol of C1);
let C3 being  non-empty (ManySortedSet of (the carrier of C1));
let C4 being set;
L2: ( TS ( DTConMSA C3 ) ) = ( C1 -Terms C3 ) by MSATERM:def 1;
L3: ( FreeMSA C3 ) = MSAlgebra (# ( FreeSort C3 ) , ( FreeOper C3 ) #) by MSAFREE:def 14;
thus L4:now
assume L5: C4 is (ArgumentSeq of ( Sym (C2 , C3) ));
reconsider D1 = C4 as (ArgumentSeq of ( Sym (C2 , C3) )) by L5;
reconsider D2 = D1 as (FinSequence of ( TS ( DTConMSA C3 ) )) by MSATERM:def 1;
L6: ( Sym (C2 , C3) ) ==> ( roots D2 ) by MSATERM:21;
thus L7: C4 is (Element of ( Args (C2 , ( FreeMSA C3 )) )) by L6 , L3 , MSAFREE:10;
end;
assume L8: C4 is (Element of ( Args (C2 , ( FreeMSA C3 )) ));
reconsider D3 = C4 as (Element of ( Args (C2 , ( FreeMSA C3 )) )) by L8;
L9: ( rng D3 ) c= ( TS ( DTConMSA C3 ) )
proof
let C5 being set;
assume L10: C5 in ( rng D3 );
consider C6 being set such that L11: C6 in ( dom D3 ) and L12: C5 = ( D3 . C6 ) by L10 , FUNCT_1:def 3;
reconsider D4 = C6 as (Element of ( NAT )) by L11;
L13: ( ( FreeSort C3 ) . ( ( the_arity_of C2 ) /. D4 ) ) = ( FreeSort (C3 , ( ( the_arity_of C2 ) /. D4 )) ) by MSAFREE:def 11;
L14: ( dom D3 ) = ( dom ( the_arity_of C2 ) ) by MSUALG_6:2;
L15: C5 in ( ( FreeSort C3 ) . ( ( the_arity_of C2 ) /. D4 ) ) by L14 , L3 , L11 , L12 , MSUALG_6:2;
thus L16: thesis by L15 , L13;
end;
reconsider D5 = D3 as (FinSequence of ( TS ( DTConMSA C3 ) )) by L9 , FINSEQ_1:def 4;
L17: ( Sym (C2 , C3) ) ==> ( roots D5 ) by L3 , MSAFREE:10;
thus L18: thesis by L17 , L2 , MSATERM:21;
end;
registration
let C7 being non  empty non  void ManySortedSign;
let C8 being  non-empty (ManySortedSet of (the carrier of C7));
let C9 being (OperSymbol of C7);
cluster  ->  DTree-yielding for (Element of ( Args (C9 , ( FreeMSA C8 )) ));
coherence by L1;
end;
theorem
L20: (for B5 being non  empty non  void ManySortedSign holds (for B6 , B7 being MSAlgebra over B5 holds ((the Sorts of B6) is_transformable_to (the Sorts of B7) implies (for B8 being (OperSymbol of B5) holds (( Args (B8 , B6) ) <> ( {} ) implies ( Args (B8 , B7) ) <> ( {} ))))))
proof
let C10 being non  void non  empty ManySortedSign;
let C11 , C12 being MSAlgebra over C10;
assume that
L21: (for B9 being set holds ((B9 in (the carrier of C10) & ( (the Sorts of C12) . B9 ) = ( {} )) implies ( (the Sorts of C11) . B9 ) = ( {} )));
let C13 being (OperSymbol of C10);
assume L22: ( Args (C13 , C11) ) <> ( {} );
L23:
now
let C14 being (Element of ( NAT ));
assume L24: C14 in ( dom ( the_arity_of C13 ) );
L25: ( (the Sorts of C11) . ( ( the_arity_of C13 ) /. C14 ) ) <> ( {} ) by L24 , L22 , MSUALG_6:3;
thus L26: ( (the Sorts of C12) . ( ( the_arity_of C13 ) /. C14 ) ) <> ( {} ) by L25 , L21;
end;
thus L27: thesis by L23 , MSUALG_6:3;
end;
theorem
L28: (for B10 being non  empty non  void ManySortedSign holds (for B11 being (OperSymbol of B10) holds (for B12 being  non-empty (ManySortedSet of (the carrier of B10)) holds (for B13 being (Element of ( Args (B11 , ( FreeMSA B12 )) )) holds ( ( Den (B11 , ( FreeMSA B12 )) ) . B13 ) = ( [ B11 , (the carrier of B10) ] -tree B13 )))))
proof
let C15 being non  empty non  void ManySortedSign;
let C16 being (OperSymbol of C15);
let C17 being  non-empty (ManySortedSet of (the carrier of C15));
let C18 being (Element of ( Args (C16 , ( FreeMSA C17 )) ));
L29: ( FreeMSA C17 ) = MSAlgebra (# ( FreeSort C17 ) , ( FreeOper C17 ) #) by MSAFREE:def 14;
reconsider D6 = C18 as (ArgumentSeq of ( Sym (C16 , C17) )) by L1;
L30: ( Sym (C16 , C17) ) = [ C16 , (the carrier of C15) ] by MSAFREE:def 9;
L31: (D6 is (FinSequence of ( TS ( DTConMSA C17 ) )) & ( Sym (C16 , C17) ) ==> ( roots D6 )) by MSATERM:21 , MSATERM:def 1;
L32: ( ( DenOp (C16 , C17) ) . C18 ) = ( [ C16 , (the carrier of C15) ] -tree C18 ) by L31 , L30 , MSAFREE:def 12;
thus L33: thesis by L32 , L29 , MSAFREE:def 13;
end;
theorem
L34: (for B14 being non  empty non  void ManySortedSign holds (for B15 , B16 being MSAlgebra over B14 holds (( the MSAlgebra of B15 ) = ( the MSAlgebra of B16 ) implies (for B17 being (OperSymbol of B14) holds ( Den (B17 , B15) ) = ( Den (B17 , B16) )))));
theorem
L35: (for B18 being non  empty non  void ManySortedSign holds (for B19 , B20 , B21 , B22 being MSAlgebra over B18 holds ((( the MSAlgebra of B19 ) = ( the MSAlgebra of B21 ) & ( the MSAlgebra of B20 ) = ( the MSAlgebra of B22 )) implies (for B23 being (ManySortedFunction of B19 , B20) holds (for B24 being (ManySortedFunction of B21 , B22) holds (B23 = B24 implies (for B25 being (OperSymbol of B18) holds ((( Args (B25 , B19) ) <> ( {} ) & ( Args (B25 , B20) ) <> ( {} )) implies (for B26 being (Element of ( Args (B25 , B19) )) holds (for B27 being (Element of ( Args (B25 , B21) )) holds (B26 = B27 implies ( B23 # B26 ) = ( B24 # B27 ))))))))))))
proof
let C19 being non  empty non  void ManySortedSign;
let C20 , C21 , C22 , C23 being MSAlgebra over C19;
assume that
L36: (( the MSAlgebra of C20 ) = ( the MSAlgebra of C22 ) & ( the MSAlgebra of C21 ) = ( the MSAlgebra of C23 ));
let C24 being (ManySortedFunction of C20 , C21);
let C25 being (ManySortedFunction of C22 , C23);
assume that
L37: C24 = C25;
let C26 being (OperSymbol of C19);
assume that
L38: (( Args (C26 , C20) ) <> ( {} ) & ( Args (C26 , C21) ) <> ( {} ));
let C27 being (Element of ( Args (C26 , C20) ));
let C28 being (Element of ( Args (C26 , C22) ));
assume L39: C27 = C28;
L40: ( C24 # C27 ) = ( ( Frege ( C24 * ( the_arity_of C26 ) ) ) . C27 ) by L38 , MSUALG_3:def 5;
thus L41: thesis by L40 , L36 , L37 , L38 , L39 , MSUALG_3:def 5;
end;
theorem
L42: (for B28 being non  empty non  void ManySortedSign holds (for B29 , B30 , B31 , B32 being MSAlgebra over B28 holds ((( the MSAlgebra of B29 ) = ( the MSAlgebra of B31 ) & ( the MSAlgebra of B30 ) = ( the MSAlgebra of B32 ) & (the Sorts of B29) is_transformable_to (the Sorts of B30)) implies (for B33 being (ManySortedFunction of B29 , B30) holds (B33 is_homomorphism B29 , B30 implies (ex B34 being (ManySortedFunction of B31 , B32) st (B34 = B33 & B34 is_homomorphism B31 , B32)))))))
proof
let C29 being non  empty non  void ManySortedSign;
let C30 , C31 , C32 , C33 being MSAlgebra over C29;
assume that
L43: ( the MSAlgebra of C30 ) = ( the MSAlgebra of C32 )
and
L44: ( the MSAlgebra of C31 ) = ( the MSAlgebra of C33 )
and
L45: (the Sorts of C30) is_transformable_to (the Sorts of C31);
let C34 being (ManySortedFunction of C30 , C31);
assume that
L46: C34 is_homomorphism C30 , C31;
reconsider D7 = C34 as (ManySortedFunction of C32 , C33) by L43 , L44;
take D7;
thus L47: D7 = C34;
let C35 being (OperSymbol of C29);
assume L48: ( Args (C35 , C32) ) <> ( {} );
L49: ( Args (C35 , C33) ) <> ( {} ) by L48 , L43 , L44 , L45 , L20;
let C36 being (Element of ( Args (C35 , C32) ));
reconsider D8 = C36 as (Element of ( Args (C35 , C30) )) by L43;
thus L50: ( ( D7 . ( the_result_sort_of C35 ) ) . ( ( Den (C35 , C32) ) . C36 ) ) = ( ( C34 . ( the_result_sort_of C35 ) ) . ( ( Den (C35 , C30) ) . D8 ) ) by L43
.= ( ( Den (C35 , C31) ) . ( C34 # D8 ) ) by L43 , L46 , L48 , MSUALG_3:def 7
.= ( ( Den (C35 , C33) ) . ( D7 # C36 ) ) by L43 , L44 , L48 , L49 , L35;
end;
definition
let C37 being ManySortedSign;
attr C37 is  feasible
means
:L51: ((the carrier of C37) = ( {} ) implies (the carrier' of C37) = ( {} ));
end;
theorem
L53: (for B35 being ManySortedSign holds (B35 is  feasible iff ( dom (the ResultSort of B35) ) = (the carrier' of B35)))
proof
let C38 being ManySortedSign;
thus L54:now
assume L55: C38 is  feasible;
L56: ((the carrier of C38) = ( {} ) implies (the carrier' of C38) = ( {} )) by L55 , L51;
thus L57: ( dom (the ResultSort of C38) ) = (the carrier' of C38) by L56 , FUNCT_2:def 1;
end;
assume L58: (( dom (the ResultSort of C38) ) = (the carrier' of C38) & (the carrier of C38) = ( {} ) & (the carrier' of C38) <> ( {} ));
thus L59: contradiction by L58;
end;
registration
cluster non  empty ->  feasible for ManySortedSign;
coherence
proof
let C39 being ManySortedSign;
assume L60: ((the carrier of C39) is non  empty & (the carrier of C39) = ( {} ));
thus L61: thesis by L60;
end;
cluster  void ->  feasible for ManySortedSign;
coherence
proof
let C40 being ManySortedSign;
assume that
L62: C40 is  void
and
L63: (the carrier of C40) = ( {} );
thus L64: thesis by L62;
end;
cluster  empty  feasible ->  void for ManySortedSign;
coherence
proof
let C41 being ManySortedSign;
assume L65: (the carrier of C41) is  empty;
assume L66: ((the carrier of C41) = ( {} ) implies (the carrier' of C41) = ( {} ));
thus L67: thesis by L66 , L65;
end;
cluster non  void  feasible -> non  empty for ManySortedSign;
coherence;
end;
registration
cluster non  void non  empty for ManySortedSign;
existence
proof
set D9 = the non  void non  empty ManySortedSign;
take D9;
thus L69: thesis;
end;
end;
theorem
L71: (for B36 being  feasible ManySortedSign holds ( id (the carrier of B36) ) , ( id (the carrier' of B36) ) form_morphism_between B36 , B36)
proof
let C42 being  feasible ManySortedSign;
per cases ;
suppose L72: C42 is  void;

thus L73: thesis by L72 , MSALIMIT:6;
end;
suppose L74: C42 is non  void;

reconsider D10 = C42 as non  void  feasible ManySortedSign by L74;
L75: D10 is non  empty;
thus L76: thesis by L75 , PUA2MSS1:28;
end;
end;
theorem
L78: (for B37 , B38 being ManySortedSign holds (for B39 , B40 being Function holds (B39 , B40 form_morphism_between B37 , B38 implies (B39 is (Function of (the carrier of B37) , (the carrier of B38)) & B40 is (Function of (the carrier' of B37) , (the carrier' of B38))))))
proof
let C43 , C44 being ManySortedSign;
let C45 , C46 being Function;
assume L79: C45 , C46 form_morphism_between C43 , C44;
L80: (( dom C45 ) = (the carrier of C43) & ( rng C45 ) c= (the carrier of C44)) by L79 , PUA2MSS1:def 12;
L81: (( dom C46 ) = (the carrier' of C43) & ( rng C46 ) c= (the carrier' of C44)) by L79 , PUA2MSS1:def 12;
thus L82: thesis by L81 , L80 , FUNCT_2:2;
end;
begin
definition
let C47 being  feasible ManySortedSign;
mode Subsignature of C47
 -> ManySortedSign
means :L83: ( id (the carrier of it) ) , ( id (the carrier' of it) ) form_morphism_between it , C47;
existence
proof
take C47;
thus L84: thesis by L71;
end;
end;
theorem
L86: (for B41 being  feasible ManySortedSign holds (for B42 being (Subsignature of B41) holds ((the carrier of B42) c= (the carrier of B41) & (the carrier' of B42) c= (the carrier' of B41))))
proof
let C48 being  feasible ManySortedSign;
let C49 being (Subsignature of C48);
set D11 = ( id (the carrier' of C49) );
L87: ( id (the carrier of C49) ) , D11 form_morphism_between C49 , C48 by L83;
L88: (( rng ( id (the carrier of C49) ) ) c= (the carrier of C48) & ( rng ( id (the carrier' of C49) ) ) c= (the carrier' of C48)) by L87 , PUA2MSS1:def 12;
thus L89: thesis by L88;
end;
registration
let C50 being  feasible ManySortedSign;
cluster  ->  feasible for (Subsignature of C50);
coherence
proof
let C51 being (Subsignature of C50);
set D12 = ( id (the carrier of C51) );
set D13 = ( id (the carrier' of C51) );
L90: ( dom D13 ) = (the carrier' of C51);
L91: D12 , D13 form_morphism_between C51 , C50 by L83;
L92: ( D12 * (the ResultSort of C51) ) = ( (the ResultSort of C50) * D13 ) by L91 , PUA2MSS1:def 12;
assume L93: (the carrier of C51) = ( {} );
L94: ( {} ) = ( (the ResultSort of C50) * D13 ) by L93 , L92;
L95: ((the carrier' of C50) = ( dom (the ResultSort of C50) ) & ( rng D13 ) = (the carrier' of C51)) by L53;
thus L96: thesis by L95 , L94 , L90 , L86 , RELAT_1:27 , RELAT_1:38;
end;
end;
theorem
L98: (for B43 being  feasible ManySortedSign holds (for B44 being (Subsignature of B43) holds ((the ResultSort of B44) c= (the ResultSort of B43) & (the Arity of B44) c= (the Arity of B43))))
proof
let C52 being  feasible ManySortedSign;
let C53 being (Subsignature of C52);
set D14 = ( id (the carrier of C53) );
set D15 = ( id (the carrier' of C53) );
L99: ( dom (the Arity of C53) ) = (the carrier' of C53) by FUNCT_2:def 1;
L100: D14 , D15 form_morphism_between C53 , C52 by L83;
L101:
now
let C54 being set;
L102: ( rng (the Arity of C53) ) c= ( (the carrier of C53) * ) by RELAT_1:def 19;
assume L103: C54 in ( dom (the Arity of C53) );
L104: ( (the Arity of C53) . C54 ) in ( rng (the Arity of C53) ) by L103 , FUNCT_1:def 3;
reconsider D16 = ( (the Arity of C53) . C54 ) as (Element of ( (the carrier of C53) * )) by L104 , L102;
L105: ( D15 . C54 ) = C54 by L99 , L103 , FUNCT_1:17;
L106: (( rng D16 ) c= (the carrier of C53) & ( D14 * D16 ) = ( (the Arity of C52) . C54 )) by L105 , L100 , L99 , L103 , FINSEQ_1:def 4 , PUA2MSS1:def 12;
thus L107: ( (the Arity of C53) . C54 ) = ( (the Arity of C52) . C54 ) by L106 , RELAT_1:53;
end;
L108: (the ResultSort of C53) = ( D14 * (the ResultSort of C53) ) by FUNCT_2:17
.= ( (the ResultSort of C52) * D15 ) by L100 , PUA2MSS1:def 12;
thus L109: (the ResultSort of C53) c= (the ResultSort of C52) by L108 , RELAT_1:50;
L110: ( dom (the Arity of C52) ) = (the carrier' of C52) by FUNCT_2:def 1;
L111: ( dom (the Arity of C53) ) c= ( dom (the Arity of C52) ) by L110 , L99 , L86;
thus L112: thesis by L111 , L101 , GRFUNC_1:2;
end;
theorem
L113: (for B45 being  feasible ManySortedSign holds (for B46 being (Subsignature of B45) holds ((the Arity of B46) = ( (the Arity of B45) | (the carrier' of B46) ) & (the ResultSort of B46) = ( (the ResultSort of B45) | (the carrier' of B46) ))))
proof
let C55 being  feasible ManySortedSign;
let C56 being (Subsignature of C55);
L114: (the Arity of C56) c= (the Arity of C55) by L98;
L115: ((the carrier of C56) = ( {} ) implies (the carrier' of C56) = ( {} )) by L51;
L116: ( dom (the ResultSort of C56) ) = (the carrier' of C56) by L115 , FUNCT_2:def 1;
L117: (( dom (the Arity of C56) ) = (the carrier' of C56) & (the ResultSort of C56) c= (the ResultSort of C55)) by L98 , FUNCT_2:def 1;
thus L118: thesis by L117 , L116 , L114 , GRFUNC_1:23;
end;
theorem
L119: (for B47 , B48 being  feasible ManySortedSign holds (((the carrier of B48) c= (the carrier of B47) & (the Arity of B48) c= (the Arity of B47) & (the ResultSort of B48) c= (the ResultSort of B47)) implies B48 is (Subsignature of B47)))
proof
let C57 , C58 being  feasible ManySortedSign;
assume that
L120: (the carrier of C58) c= (the carrier of C57)
and
L121: (the Arity of C58) c= (the Arity of C57)
and
L122: (the ResultSort of C58) c= (the ResultSort of C57);
set D17 = ( id (the carrier of C58) );
set D18 = ( id (the carrier' of C58) );
thus L123: (( dom D17 ) = (the carrier of C58) & ( dom D18 ) = (the carrier' of C58));
thus L124: ( rng D17 ) c= (the carrier of C57) by L120;
L125: ( dom (the Arity of C58) ) = (the carrier' of C58) by FUNCT_2:def 1;
L126: (( dom (the Arity of C57) ) = (the carrier' of C57) & ( rng D18 ) = (the carrier' of C58)) by FUNCT_2:def 1;
thus L127: ( rng D18 ) c= (the carrier' of C57) by L126 , L121 , L125 , GRFUNC_1:2;
L128: ( dom (the ResultSort of C58) ) = (the carrier' of C58) by L53;
L129: ( rng (the ResultSort of C58) ) c= (the carrier of C58) by RELAT_1:def 19;
thus L130: ( D17 * (the ResultSort of C58) ) = (the ResultSort of C58) by L129 , RELAT_1:53
.= ( (the ResultSort of C57) | (the carrier' of C58) ) by L122 , L128 , GRFUNC_1:23
.= ( (the ResultSort of C57) * D18 ) by RELAT_1:65;
let C59 being set;
let C60 being Function;
assume that
L131: C59 in (the carrier' of C58)
and
L132: C60 = ( (the Arity of C58) . C59 );
reconsider D19 = C60 as (Element of ( (the carrier of C58) * )) by L131 , L132 , FUNCT_2:5;
L133: ( rng D19 ) c= (the carrier of C58) by FINSEQ_1:def 4;
thus L134: ( D17 * C60 ) = C60 by L133 , RELAT_1:53
.= ( (the Arity of C57) . C59 ) by L121 , L125 , L131 , L132 , GRFUNC_1:2
.= ( (the Arity of C57) . ( D18 . C59 ) ) by L131 , FUNCT_1:17;
end;
theorem
L135: (for B49 , B50 being  feasible ManySortedSign holds (((the carrier of B50) c= (the carrier of B49) & (the Arity of B50) = ( (the Arity of B49) | (the carrier' of B50) ) & (the ResultSort of B50) = ( (the ResultSort of B49) | (the carrier' of B50) )) implies B50 is (Subsignature of B49)))
proof
let C61 , C62 being  feasible ManySortedSign;
assume that
L136: (the carrier of C62) c= (the carrier of C61);
assume that
L137: (the Arity of C62) = ( (the Arity of C61) | (the carrier' of C62) )
and
L138: (the ResultSort of C62) = ( (the ResultSort of C61) | (the carrier' of C62) );
L139: (the Arity of C62) c= (the Arity of C61) by L137 , RELAT_1:59;
thus L140: thesis by L139 , L136 , L138 , L119 , RELAT_1:59;
end;
theorem
L141: (for B51 being  feasible ManySortedSign holds B51 is (Subsignature of B51))
proof
let C63 being  feasible ManySortedSign;
thus L142: ( id (the carrier of C63) ) , ( id (the carrier' of C63) ) form_morphism_between C63 , C63 by L71;
end;
theorem
L143: (for B52 being  feasible ManySortedSign holds (for B53 being (Subsignature of B52) holds (for B54 being (Subsignature of B53) holds B54 is (Subsignature of B52))))
proof
let C64 being  feasible ManySortedSign;
let C65 being (Subsignature of C64);
let C66 being (Subsignature of C65);
L144: ( rng ( id (the carrier of C66) ) ) = (the carrier of C66);
L145: ( ( id (the carrier of C65) ) * ( id (the carrier of C66) ) ) = ( id (the carrier of C66) ) by L144 , L86 , RELAT_1:53;
L146: ( rng ( id (the carrier' of C66) ) ) = (the carrier' of C66);
L147: ( ( id (the carrier' of C65) ) * ( id (the carrier' of C66) ) ) = ( id (the carrier' of C66) ) by L146 , L86 , RELAT_1:53;
L148: (( id (the carrier of C66) ) , ( id (the carrier' of C66) ) form_morphism_between C66 , C65 & ( id (the carrier of C65) ) , ( id (the carrier' of C65) ) form_morphism_between C65 , C64) by L83;
thus L149: ( id (the carrier of C66) ) , ( id (the carrier' of C66) ) form_morphism_between C66 , C64 by L148 , L145 , L147 , PUA2MSS1:29;
end;
theorem
L150: (for B55 being  feasible ManySortedSign holds (for B56 being (Subsignature of B55) holds (B55 is (Subsignature of B56) implies ( the ManySortedSign of B55 ) = ( the ManySortedSign of B56 ))))
proof
let C67 being  feasible ManySortedSign;
let C68 being (Subsignature of C67);
L151: (the carrier of C68) c= (the carrier of C67) by L86;
assume L152: C67 is (Subsignature of C68);
L153: (the carrier of C67) c= (the carrier of C68) by L152 , L86;
L154: (the carrier of C67) = (the carrier of C68) by L153 , L151 , XBOOLE_0:def 10;
L155: (the carrier' of C68) c= (the carrier' of C67) by L86;
L156: (the carrier' of C67) c= (the carrier' of C68) by L152 , L86;
L157: (the carrier' of C67) = (the carrier' of C68) by L156 , L155 , XBOOLE_0:def 10;
L158: (the Arity of C68) c= (the Arity of C67) by L98;
L159: (the ResultSort of C68) c= (the ResultSort of C67) by L98;
L160: (the ResultSort of C67) c= (the ResultSort of C68) by L152 , L98;
L161: (the ResultSort of C67) = (the ResultSort of C68) by L160 , L159 , XBOOLE_0:def 10;
L162: (the Arity of C67) c= (the Arity of C68) by L152 , L98;
thus L163: thesis by L162 , L158 , L154 , L157 , L161 , XBOOLE_0:def 10;
end;
registration
let C69 being non  empty ManySortedSign;
cluster non  empty for (Subsignature of C69);
existence
proof
reconsider D20 = C69 as (Subsignature of C69) by L141;
take D20;
thus L164: thesis;
end;
end;
registration
let C70 being non  void  feasible ManySortedSign;
cluster non  void for (Subsignature of C70);
existence
proof
reconsider D21 = C70 as (Subsignature of C70) by L141;
take D21;
thus L166: thesis;
end;
end;
theorem
L168: (for B57 being  feasible ManySortedSign holds (for B58 being (Subsignature of B57) holds (for B59 being ManySortedSign holds (for B60 , B61 being Function holds (B60 , B61 form_morphism_between B57 , B59 implies ( B60 | (the carrier of B58) ) , ( B61 | (the carrier' of B58) ) form_morphism_between B58 , B59)))))
proof
let C71 being  feasible ManySortedSign;
let C72 being (Subsignature of C71);
let C73 being ManySortedSign;
let C74 , C75 being Function;
L169: ( C75 | (the carrier' of C72) ) = ( C75 * ( id (the carrier' of C72) ) ) by RELAT_1:65;
L170: (( id (the carrier of C72) ) , ( id (the carrier' of C72) ) form_morphism_between C72 , C71 & ( C74 | (the carrier of C72) ) = ( C74 * ( id (the carrier of C72) ) )) by L83 , RELAT_1:65;
thus L171: thesis by L170 , L169 , PUA2MSS1:29;
end;
theorem
L172: (for B62 being ManySortedSign holds (for B63 being  feasible ManySortedSign holds (for B64 being (Subsignature of B63) holds (for B65 , B66 being Function holds (B65 , B66 form_morphism_between B62 , B64 implies B65 , B66 form_morphism_between B62 , B63)))))
proof
let C76 being ManySortedSign;
let C77 being  feasible ManySortedSign;
let C78 being (Subsignature of C77);
let C79 , C80 being Function;
assume that
L173: C79 , C80 form_morphism_between C76 , C78;
L174: ( rng C79 ) c= (the carrier of C78) by L173 , PUA2MSS1:def 12;
L175: ( ( id (the carrier of C78) ) * C79 ) = C79 by L174 , RELAT_1:53;
L176: ( rng C80 ) c= (the carrier' of C78) by L173 , PUA2MSS1:def 12;
L177: ( ( id (the carrier' of C78) ) * C80 ) = C80 by L176 , RELAT_1:53;
L178: ( id (the carrier of C78) ) , ( id (the carrier' of C78) ) form_morphism_between C78 , C77 by L83;
thus L179: thesis by L178 , L173 , L175 , L177 , PUA2MSS1:29;
end;
theorem
L180: (for B67 being ManySortedSign holds (for B68 being  feasible ManySortedSign holds (for B69 being (Subsignature of B68) holds (for B70 , B71 being Function holds ((B70 , B71 form_morphism_between B67 , B68 & ( rng B70 ) c= (the carrier of B69) & ( rng B71 ) c= (the carrier' of B69)) implies B70 , B71 form_morphism_between B67 , B69)))))
proof
let C81 being ManySortedSign;
let C82 being  feasible ManySortedSign;
let C83 being (Subsignature of C82);
let C84 , C85 being Function;
assume that
L181: ( dom C84 ) = (the carrier of C81)
and
L182: ( dom C85 ) = (the carrier' of C81)
and
L183: ( rng C84 ) c= (the carrier of C82)
and
L184: ( rng C85 ) c= (the carrier' of C82)
and
L185: ( C84 * (the ResultSort of C81) ) = ( (the ResultSort of C82) * C85 )
and
L186: (for B72 being set holds (for B73 being Function holds ((B72 in (the carrier' of C81) & B73 = ( (the Arity of C81) . B72 )) implies ( C84 * B73 ) = ( (the Arity of C82) . ( C85 . B72 ) ))))
and
L187: ( rng C84 ) c= (the carrier of C83)
and
L188: ( rng C85 ) c= (the carrier' of C83);
thus L189: (( dom C84 ) = (the carrier of C81) & ( dom C85 ) = (the carrier' of C81)) by L181 , L182;
thus L190: (( rng C84 ) c= (the carrier of C83) & ( rng C85 ) c= (the carrier' of C83)) by L187 , L188;
thus L191: ( C84 * (the ResultSort of C81) ) = ( (the ResultSort of C82) * ( ( id (the carrier' of C83) ) * C85 ) ) by L185 , L188 , RELAT_1:53
.= ( ( (the ResultSort of C82) * ( id (the carrier' of C83) ) ) * C85 ) by RELAT_1:36
.= ( ( (the ResultSort of C82) | (the carrier' of C83) ) * C85 ) by RELAT_1:65
.= ( (the ResultSort of C83) * C85 ) by L113;
let C86 being set;
let C87 being Function;
assume that
L192: C86 in (the carrier' of C81)
and
L193: C87 = ( (the Arity of C81) . C86 );
L194: ((the Arity of C83) c= (the Arity of C82) & ( dom (the Arity of C83) ) = (the carrier' of C83)) by L98 , FUNCT_2:def 1;
L195: ( C85 . C86 ) in ( rng C85 ) by L182 , L192 , FUNCT_1:def 3;
L196: ( (the Arity of C83) . ( C85 . C86 ) ) = ( (the Arity of C82) . ( C85 . C86 ) ) by L195 , L188 , L194 , GRFUNC_1:2;
thus L197: thesis by L196 , L186 , L192 , L193;
end;
begin
definition
let C88 , C89 being non  empty ManySortedSign;
let C90 being MSAlgebra over C89;
let C91 , C92 being Function;
assume that
L198: C91 , C92 form_morphism_between C88 , C89;
func C90 | (C88 , C91 , C92) ->  strict MSAlgebra over C88 means 
:L199: ((the Sorts of it) = ( (the Sorts of C90) * C91 ) & (the Charact of it) = ( (the Charact of C90) * C92 ));
existence
proof
L200: (( dom C91 ) = (the carrier of C88) & ( rng C91 ) c= (the carrier of C89)) by L198 , PUA2MSS1:def 12;
reconsider D22 = C91 as (Function of (the carrier of C88) , (the carrier of C89)) by L200 , FUNCT_2:def 1 , RELSET_1:4;
L201: ( rng C92 ) c= (the carrier' of C89) by L198 , PUA2MSS1:def 12;
L202: ( dom C92 ) = (the carrier' of C88) by L198 , PUA2MSS1:def 12;
reconsider D23 = C92 as (Function of (the carrier' of C88) , (the carrier' of C89)) by L202 , L201 , FUNCT_2:2;
L203: ( dom (the Charact of C90) ) = (the carrier' of C89) by PARTFUN1:def 2;
L204: ( dom ( (the Charact of C90) * D23 ) ) = (the carrier' of C88) by L203 , L202 , L201 , RELAT_1:27;
reconsider D24 = ( (the Charact of C90) * D23 ) as (ManySortedSet of (the carrier' of C88)) by L204 , PARTFUN1:def 2;
L205: D24 is (ManySortedFunction of ( ( ( (the Sorts of C90) * D22 ) # ) * (the Arity of C88) ) , ( ( (the Sorts of C90) * D22 ) * (the ResultSort of C88) ))
proof
let C93 being set;
assume L206: C93 in (the carrier' of C88);
reconsider D25 = ( (the Arity of C88) . C93 ) as (Element of ( (the carrier of C88) * )) by L206 , FUNCT_2:5;
L207: ( C92 . C93 ) in ( rng C92 ) by L202 , L206 , FUNCT_1:def 3;
reconsider D26 = ( (the Arity of C89) . ( C92 . C93 ) ) as (Element of ( (the carrier of C89) * )) by L207 , L201 , FUNCT_2:5;
reconsider D27 = C93 as (OperSymbol of C88) by L206;
L208: ( D24 . D27 ) = ( (the Charact of C90) . ( D23 . D27 ) ) by L201 , L206 , L207 , FUNCT_2:15;
L209: ( ( (the Sorts of C90) * D22 ) * (the ResultSort of C88) ) = ( (the Sorts of C90) * ( D22 * (the ResultSort of C88) ) ) by RELAT_1:36
.= ( (the Sorts of C90) * ( (the ResultSort of C89) * C92 ) ) by L198 , PUA2MSS1:def 12
.= ( ( (the Sorts of C90) * (the ResultSort of C89) ) * C92 ) by RELAT_1:36;
L210: ( ( ( (the Sorts of C90) * D22 ) * (the ResultSort of C88) ) . D27 ) = ( ( (the Sorts of C90) * (the ResultSort of C89) ) . ( D23 . D27 ) ) by L209 , L201 , L206 , L207 , FUNCT_2:15;
L211: ( ( (the Sorts of C90) * D22 ) * D25 ) = ( (the Sorts of C90) * ( D22 * D25 ) ) by RELAT_1:36
.= ( (the Sorts of C90) * D26 ) by L198 , L206 , PUA2MSS1:def 12;
L212: ( ( ( ( (the Sorts of C90) * D22 ) # ) * (the Arity of C88) ) . D27 ) = ( ( ( (the Sorts of C90) * D22 ) # ) . D25 ) by L206 , FUNCT_2:15
.= ( product ( ( (the Sorts of C90) * D22 ) * D25 ) ) by FINSEQ_2:def 5
.= ( ( (the Sorts of C90) # ) . D26 ) by L211 , FINSEQ_2:def 5
.= ( ( ( (the Sorts of C90) # ) * (the Arity of C89) ) . ( D23 . D27 ) ) by L201 , L207 , FUNCT_2:15;
thus L213: thesis by L212 , L201 , L207 , L210 , L208 , PBOOLE:def 15;
end;
reconsider D28 = D24 as (ManySortedFunction of ( ( ( (the Sorts of C90) * D22 ) # ) * (the Arity of C88) ) , ( ( (the Sorts of C90) * D22 ) * (the ResultSort of C88) )) by L205;
take MSAlgebra (# ( (the Sorts of C90) * D22 ) , D28 #);
thus L214: thesis;
end;
correctness;
end;
definition
let C94 , C95 being non  empty ManySortedSign;
let C96 being MSAlgebra over C94;
func C96 | C95 ->  strict MSAlgebra over C95 equals 
( C96 | (C95 , ( id (the carrier of C95) ) , ( id (the carrier' of C95) )) );
correctness;
end;
theorem
L217: (for B74 , B75 being non  empty ManySortedSign holds (for B76 , B77 being MSAlgebra over B75 holds (( the MSAlgebra of B76 ) = ( the MSAlgebra of B77 ) implies (for B78 , B79 being Function holds (B78 , B79 form_morphism_between B74 , B75 implies ( B76 | (B74 , B78 , B79) ) = ( B77 | (B74 , B78 , B79) ))))))
proof
let C97 , C98 being non  empty ManySortedSign;
let C99 , C100 being MSAlgebra over C98;
assume that
L218: ( the MSAlgebra of C99 ) = ( the MSAlgebra of C100 );
let C101 , C102 being Function;
assume L219: C101 , C102 form_morphism_between C97 , C98;
L220: ((the Sorts of ( C99 | (C97 , C101 , C102) )) = ( (the Sorts of C99) * C101 ) & (the Charact of ( C99 | (C97 , C101 , C102) )) = ( (the Charact of C99) * C102 )) by L219 , L199;
thus L221: thesis by L220 , L218 , L219 , L199;
end;
theorem
L222: (for B80 , B81 being non  empty ManySortedSign holds (for B82 being  non-empty MSAlgebra over B81 holds (for B83 , B84 being Function holds (B83 , B84 form_morphism_between B80 , B81 implies ( B82 | (B80 , B83 , B84) ) is  non-empty))))
proof
let C103 , C104 being non  empty ManySortedSign;
let C105 being  non-empty MSAlgebra over C104;
let C106 , C107 being Function;
assume L223: C106 , C107 form_morphism_between C103 , C104;
L224: (the Sorts of ( C105 | (C103 , C106 , C107) )) = ( (the Sorts of C105) * C106 ) by L223 , L199;
thus L225: (the Sorts of ( C105 | (C103 , C106 , C107) )) is  non-empty by L224;
end;
registration
let C108 being non  empty ManySortedSign;
let C109 being non  empty (Subsignature of C108);
let C110 being  non-empty MSAlgebra over C108;
cluster ( C110 | C109 ) ->  non-empty;
coherence
proof
L226: ( id (the carrier of C109) ) , ( id (the carrier' of C109) ) form_morphism_between C109 , C108 by L83;
thus L227: thesis by L226 , L222;
end;
end;
theorem
L229: (for B85 , B86 being non  void non  empty ManySortedSign holds (for B87 , B88 being Function holds (B87 , B88 form_morphism_between B85 , B86 implies (for B89 being MSAlgebra over B86 holds (for B90 being (OperSymbol of B85) holds (for B91 being (OperSymbol of B86) holds (B91 = ( B88 . B90 ) implies ( Den (B90 , ( B89 | (B85 , B87 , B88) )) ) = ( Den (B91 , B89) ))))))))
proof
let C111 , C112 being non  void non  empty ManySortedSign;
let C113 , C114 being Function;
assume L230: C113 , C114 form_morphism_between C111 , C112;
reconsider D29 = C114 as (Function of (the carrier' of C111) , (the carrier' of C112)) by L230 , L78;
let C115 being MSAlgebra over C112;
let C116 being (OperSymbol of C111);
let C117 being (OperSymbol of C112);
assume L231: C117 = ( C114 . C116 );
L232: ( (the Charact of C115) . C117 ) = ( ( (the Charact of C115) * D29 ) . C116 ) by L231 , FUNCT_2:15
.= ( (the Charact of ( C115 | (C111 , C113 , C114) )) . C116 ) by L230 , L199;
thus L233: thesis by L232;
end;
theorem
L234: (for B92 , B93 being non  void non  empty ManySortedSign holds (for B94 , B95 being Function holds (B94 , B95 form_morphism_between B92 , B93 implies (for B96 being MSAlgebra over B93 holds (for B97 being (OperSymbol of B92) holds (for B98 being (OperSymbol of B93) holds (B98 = ( B95 . B97 ) implies (( Args (B98 , B96) ) = ( Args (B97 , ( B96 | (B92 , B94 , B95) )) ) & ( Result (B97 , ( B96 | (B92 , B94 , B95) )) ) = ( Result (B98 , B96) )))))))))
proof
let C118 , C119 being non  void non  empty ManySortedSign;
let C120 , C121 being Function;
assume that
L235: C120 , C121 form_morphism_between C118 , C119;
L236: ( dom C120 ) = (the carrier of C118) by L235 , PUA2MSS1:def 12;
let C122 being MSAlgebra over C119;
let C123 being (OperSymbol of C118);
let C124 being (OperSymbol of C119);
assume L237: C124 = ( C121 . C123 );
thus L238: ( Args (C124 , C122) ) = ( product ( (the Sorts of C122) * ( the_arity_of C124 ) ) ) by PRALG_2:3
.= ( product ( (the Sorts of C122) * ( C120 * ( the_arity_of C123 ) ) ) ) by L235 , L237 , PUA2MSS1:def 12
.= ( product ( ( (the Sorts of C122) * C120 ) * ( the_arity_of C123 ) ) ) by RELAT_1:36
.= ( product ( (the Sorts of ( C122 | (C118 , C120 , C121) )) * ( the_arity_of C123 ) ) ) by L235 , L199
.= ( Args (C123 , ( C122 | (C118 , C120 , C121) )) ) by PRALG_2:3;
L239: ( dom C121 ) = (the carrier' of C118) by L235 , PUA2MSS1:def 12;
L240: ( the_result_sort_of C124 ) = ( ( (the ResultSort of C119) * C121 ) . C123 ) by L239 , L237 , FUNCT_1:13
.= ( ( C120 * (the ResultSort of C118) ) . C123 ) by L235 , PUA2MSS1:def 12
.= ( C120 . ( the_result_sort_of C123 ) ) by FUNCT_2:15;
thus L241: ( Result (C124 , C122) ) = ( (the Sorts of C122) . ( C120 . ( the_result_sort_of C123 ) ) ) by L240 , PRALG_2:3
.= ( ( (the Sorts of C122) * C120 ) . ( the_result_sort_of C123 ) ) by L236 , FUNCT_1:13
.= ( (the Sorts of ( C122 | (C118 , C120 , C121) )) . ( the_result_sort_of C123 ) ) by L235 , L199
.= ( Result (C123 , ( C122 | (C118 , C120 , C121) )) ) by PRALG_2:3;
end;
theorem
L242: (for B99 being non  empty ManySortedSign holds (for B100 being MSAlgebra over B99 holds ( B100 | (B99 , ( id (the carrier of B99) ) , ( id (the carrier' of B99) )) ) = ( the MSAlgebra of B100 )))
proof
let C125 being non  empty ManySortedSign;
let C126 being MSAlgebra over C125;
set D30 = ( id (the carrier of C125) );
set D31 = ( id (the carrier' of C125) );
L243: ( dom (the Charact of C126) ) = (the carrier' of C125) by PARTFUN1:def 2;
L244: (the Charact of ( the MSAlgebra of C126 )) = ( (the Charact of C126) * D31 ) by L243 , RELAT_1:52;
L245: ( dom (the Sorts of C126) ) = (the carrier of C125) by PARTFUN1:def 2;
L246: (the Sorts of ( the MSAlgebra of C126 )) = ( (the Sorts of C126) * D30 ) by L245 , RELAT_1:52;
L247: D30 , D31 form_morphism_between C125 , C125 by L71;
thus L248: thesis by L247 , L246 , L244 , L199;
end;
theorem
L249: (for B101 being non  empty ManySortedSign holds (for B102 being MSAlgebra over B101 holds ( B102 | B101 ) = ( the MSAlgebra of B102 ))) by L242;
theorem
L250: (for B103 , B104 , B105 being non  empty ManySortedSign holds (for B106 , B107 being Function holds (B106 , B107 form_morphism_between B103 , B104 implies (for B108 , B109 being Function holds (B108 , B109 form_morphism_between B104 , B105 implies (for B110 being MSAlgebra over B105 holds ( B110 | (B103 , ( B108 * B106 ) , ( B109 * B107 )) ) = ( ( B110 | (B104 , B108 , B109) ) | (B103 , B106 , B107) )))))))
proof
let C127 , C128 , C129 being non  empty ManySortedSign;
let C130 , C131 being Function;
assume that
L251: C130 , C131 form_morphism_between C127 , C128;
let C132 , C133 being Function;
assume that
L252: C132 , C133 form_morphism_between C128 , C129;
L253: ( C132 * C130 ) , ( C133 * C131 ) form_morphism_between C127 , C129 by L251 , L252 , PUA2MSS1:29;
let C134 being MSAlgebra over C129;
L254: (the Charact of ( ( C134 | (C128 , C132 , C133) ) | (C127 , C130 , C131) )) = ( (the Charact of ( C134 | (C128 , C132 , C133) )) * C131 ) by L251 , L199
.= ( ( (the Charact of C134) * C133 ) * C131 ) by L252 , L199
.= ( (the Charact of C134) * ( C133 * C131 ) ) by RELAT_1:36;
L255: (the Sorts of ( ( C134 | (C128 , C132 , C133) ) | (C127 , C130 , C131) )) = ( (the Sorts of ( C134 | (C128 , C132 , C133) )) * C130 ) by L251 , L199
.= ( ( (the Sorts of C134) * C132 ) * C130 ) by L252 , L199
.= ( (the Sorts of C134) * ( C132 * C130 ) ) by RELAT_1:36;
thus L256: thesis by L255 , L253 , L254 , L199;
end;
theorem
L257: (for B111 being non  empty  feasible ManySortedSign holds (for B112 being non  empty (Subsignature of B111) holds (for B113 being non  empty (Subsignature of B112) holds (for B114 being MSAlgebra over B111 holds ( B114 | B113 ) = ( ( B114 | B112 ) | B113 )))))
proof
let C135 being non  empty  feasible ManySortedSign;
let C136 being non  empty (Subsignature of C135);
let C137 being non  empty (Subsignature of C136);
let C138 being MSAlgebra over C135;
set D32 = ( id (the carrier of C136) );
set D33 = ( id (the carrier' of C136) );
set D34 = ( id (the carrier of C137) );
set D35 = ( id (the carrier' of C137) );
L258: ( rng D34 ) = (the carrier of C137);
L259: ( D32 * D34 ) = D34 by L258 , L86 , RELAT_1:53;
L260: ( rng D35 ) = (the carrier' of C137);
L261: ( D33 * D35 ) = D35 by L260 , L86 , RELAT_1:53;
L262: (D32 , D33 form_morphism_between C136 , C135 & D34 , D35 form_morphism_between C137 , C136) by L83;
thus L263: thesis by L262 , L259 , L261 , L250;
end;
theorem
L264: (for B115 , B116 being non  empty ManySortedSign holds (for B117 being (Function of (the carrier of B115) , (the carrier of B116)) holds (for B118 being Function holds (B117 , B118 form_morphism_between B115 , B116 implies (for B119 , B120 being MSAlgebra over B116 holds (for B121 being (ManySortedFunction of (the Sorts of B119) , (the Sorts of B120)) holds ( B121 * B117 ) is (ManySortedFunction of (the Sorts of ( B119 | (B115 , B117 , B118) )) , (the Sorts of ( B120 | (B115 , B117 , B118) )))))))))
proof
let C139 , C140 being non  empty ManySortedSign;
let C141 being (Function of (the carrier of C139) , (the carrier of C140));
let C142 being Function;
assume that
L265: C141 , C142 form_morphism_between C139 , C140;
let C143 , C144 being MSAlgebra over C140;
let C145 being (ManySortedFunction of (the Sorts of C143) , (the Sorts of C144));
set D36 = ( C143 | (C139 , C141 , C142) );
set D37 = ( C144 | (C139 , C141 , C142) );
let C146 being set;
assume L266: C146 in (the carrier of C139);
reconsider D38 = C146 as (SortSymbol of C139) by L266;
reconsider D39 = ( C141 . D38 ) as (SortSymbol of C140);
L267: (( ( C145 * C141 ) . D38 ) = ( C145 . D39 ) & ( (the Sorts of C143) . D39 ) = ( ( (the Sorts of C143) * C141 ) . D38 )) by FUNCT_2:15;
L268: ( (the Sorts of C144) . D39 ) = ( ( (the Sorts of C144) * C141 ) . D38 ) by FUNCT_2:15;
L269: (( (the Sorts of C143) * C141 ) = (the Sorts of D36) & ( (the Sorts of C144) * C141 ) = (the Sorts of D37)) by L265 , L199;
thus L270: thesis by L269 , L267 , L268;
end;
theorem
L271: (for B122 being non  empty ManySortedSign holds (for B123 being non  empty (Subsignature of B122) holds (for B124 , B125 being MSAlgebra over B122 holds (for B126 being (ManySortedFunction of (the Sorts of B124) , (the Sorts of B125)) holds ( B126 | (the carrier of B123) ) is (ManySortedFunction of (the Sorts of ( B124 | B123 )) , (the Sorts of ( B125 | B123 )))))))
proof
let C147 being non  empty ManySortedSign;
let C148 being non  empty (Subsignature of C147);
set D40 = ( id (the carrier of C148) );
set D41 = ( id (the carrier' of C148) );
let C149 , C150 being MSAlgebra over C147;
let C151 being (ManySortedFunction of (the Sorts of C149) , (the Sorts of C150));
L272: D40 , D41 form_morphism_between C148 , C147 by L83;
reconsider D42 = D40 as (Function of (the carrier of C148) , (the carrier of C147)) by L272 , L78;
L273: ( C151 * D42 ) is (ManySortedFunction of (the Sorts of ( C149 | (C148 , D42 , D41) )) , (the Sorts of ( C150 | (C148 , D42 , D41) ))) by L272 , L264;
thus L274: thesis by L273 , RELAT_1:65;
end;
theorem
L275: (for B127 , B128 being non  empty ManySortedSign holds (for B129 , B130 being Function holds (B129 , B130 form_morphism_between B127 , B128 implies (for B131 being MSAlgebra over B128 holds ( ( id (the Sorts of B131) ) * B129 ) = ( id (the Sorts of ( B131 | (B127 , B129 , B130) )) )))))
proof
let C152 , C153 being non  empty ManySortedSign;
let C154 , C155 being Function;
assume that
L276: C154 , C155 form_morphism_between C152 , C153;
L277: (( dom C154 ) = (the carrier of C152) & ( rng C154 ) c= (the carrier of C153)) by L276 , PUA2MSS1:def 12;
reconsider D43 = C154 as (Function of (the carrier of C152) , (the carrier of C153)) by L277 , FUNCT_2:def 1 , RELSET_1:4;
let C156 being MSAlgebra over C153;
L278:
now
let C157 being set;
assume L279: C157 in (the carrier of C152);
reconsider D44 = C157 as (SortSymbol of C152) by L279;
thus L280: ( ( ( id (the Sorts of C156) ) * D43 ) . C157 ) = ( ( id (the Sorts of C156) ) . ( D43 . D44 ) ) by FUNCT_2:15
.= ( id ( (the Sorts of C156) . ( D43 . D44 ) ) ) by MSUALG_3:def 1
.= ( id ( ( (the Sorts of C156) * D43 ) . D44 ) ) by FUNCT_2:15
.= ( id ( (the Sorts of ( C156 | (C152 , D43 , C155) )) . D44 ) ) by L276 , L199
.= ( ( id (the Sorts of ( C156 | (C152 , D43 , C155) )) ) . C157 ) by MSUALG_3:def 1;
end;
thus L281: thesis by L278 , PBOOLE:3;
end;
theorem
L282: (for B132 being non  empty ManySortedSign holds (for B133 being non  empty (Subsignature of B132) holds (for B134 being MSAlgebra over B132 holds ( ( id (the Sorts of B134) ) | (the carrier of B133) ) = ( id (the Sorts of ( B134 | B133 )) ))))
proof
let C158 being non  empty ManySortedSign;
let C159 being non  empty (Subsignature of C158);
set D45 = ( id (the carrier of C159) );
set D46 = ( id (the carrier' of C159) );
let C160 being MSAlgebra over C158;
L283: D45 , D46 form_morphism_between C159 , C158 by L83;
L284: ( ( id (the Sorts of C160) ) * D45 ) = ( id (the Sorts of ( C160 | C159 )) ) by L283 , L275;
thus L285: thesis by L284 , RELAT_1:65;
end;
theorem
L286: (for B135 , B136 being non  void non  empty ManySortedSign holds (for B137 , B138 being Function holds (B137 , B138 form_morphism_between B135 , B136 implies (for B139 , B140 being MSAlgebra over B136 holds (for B141 being (ManySortedFunction of B139 , B140) holds (for B142 being (ManySortedFunction of ( B139 | (B135 , B137 , B138) ) , ( B140 | (B135 , B137 , B138) )) holds (B142 = ( B141 * B137 ) implies (for B143 being (OperSymbol of B135) holds (for B144 being (OperSymbol of B136) holds ((B144 = ( B138 . B143 ) & ( Args (B144 , B139) ) <> ( {} ) & ( Args (B144 , B140) ) <> ( {} )) implies (for B145 being (Element of ( Args (B144 , B139) )) holds (for B146 being (Element of ( Args (B143 , ( B139 | (B135 , B137 , B138) )) )) holds (B145 = B146 implies ( B142 # B146 ) = ( B141 # B145 ))))))))))))))
proof
let C161 , C162 being non  void non  empty ManySortedSign;
let C163 , C164 being Function;
assume that
L287: C163 , C164 form_morphism_between C161 , C162;
let C165 , C166 being MSAlgebra over C162;
set D47 = ( C165 | (C161 , C163 , C164) );
set D48 = ( C166 | (C161 , C163 , C164) );
let C167 being (ManySortedFunction of C165 , C166);
let C168 being (ManySortedFunction of D47 , D48);
assume that
L288: C168 = ( C167 * C163 );
let C169 being (OperSymbol of C161);
let C170 being (OperSymbol of C162);
assume that
L289: C170 = ( C164 . C169 );
assume that
L290: ( Args (C170 , C165) ) <> ( {} )
and
L291: ( Args (C170 , C166) ) <> ( {} );
let C171 being (Element of ( Args (C170 , C165) ));
let C172 being (Element of ( Args (C169 , D47) ));
assume L292: C171 = C172;
reconsider D49 = C172 , D50 = C171 , D51 = ( C167 # C171 ) as Function by L292 , L290 , L291 , MSUALG_6:1;
L293: ( Args (C170 , C165) ) = ( Args (C169 , D47) ) by L287 , L289 , L234;
L294: ( dom D49 ) = ( dom ( the_arity_of C169 ) ) by L293 , L290 , MSUALG_3:6;
L295: ( dom D50 ) = ( dom ( the_arity_of C170 ) ) by L290 , MSUALG_3:6;
L296:
now
let C173 being Nat;
assume L297: C173 in ( dom D49 );
L298: ( dom C163 ) = (the carrier of C161) by L287 , PUA2MSS1:def 12;
L299: ( C168 . ( ( the_arity_of C169 ) /. C173 ) ) = ( C167 . ( C163 . ( ( the_arity_of C169 ) /. C173 ) ) ) by L298 , L288 , FUNCT_1:13
.= ( C167 . ( C163 . ( ( the_arity_of C169 ) . C173 ) ) ) by L294 , L297 , PARTFUN1:def 6
.= ( C167 . ( ( C163 * ( the_arity_of C169 ) ) . C173 ) ) by L294 , L297 , FUNCT_1:13
.= ( C167 . ( ( the_arity_of C170 ) . C173 ) ) by L287 , L289 , PUA2MSS1:def 12
.= ( C167 . ( ( the_arity_of C170 ) /. C173 ) ) by L292 , L295 , L297 , PARTFUN1:def 6;
thus L300: ( D51 . C173 ) = ( ( C168 . ( ( the_arity_of C169 ) /. C173 ) ) . ( D49 . C173 ) ) by L299 , L290 , L291 , L292 , L297 , MSUALG_3:24;
end;
L301: ( Args (C170 , C166) ) = ( Args (C169 , D48) ) by L287 , L289 , L234;
thus L302: thesis by L301 , L290 , L291 , L293 , L296 , MSUALG_3:24;
end;
theorem
L303: (for B147 , B148 being non  empty non  void ManySortedSign holds (for B149 , B150 being MSAlgebra over B147 holds ((the Sorts of B149) is_transformable_to (the Sorts of B150) implies (for B151 being (ManySortedFunction of B149 , B150) holds (B151 is_homomorphism B149 , B150 implies (for B152 being (Function of (the carrier of B148) , (the carrier of B147)) holds (for B153 being Function holds (B152 , B153 form_morphism_between B148 , B147 implies (ex B154 being (ManySortedFunction of ( B149 | (B148 , B152 , B153) ) , ( B150 | (B148 , B152 , B153) )) st (B154 = ( B151 * B152 ) & B154 is_homomorphism ( B149 | (B148 , B152 , B153) ) , ( B150 | (B148 , B152 , B153) )))))))))))
proof
let C174 , C175 being non  empty non  void ManySortedSign;
let C176 , C177 being MSAlgebra over C174;
assume that
L304: (the Sorts of C176) is_transformable_to (the Sorts of C177);
let C178 being (ManySortedFunction of C176 , C177);
assume that
L305: C178 is_homomorphism C176 , C177;
let C179 being (Function of (the carrier of C175) , (the carrier of C174));
let C180 being Function;
assume that
L306: C179 , C180 form_morphism_between C175 , C174;
L307: (( dom C180 ) = (the carrier' of C175) & ( rng C180 ) c= (the carrier' of C174)) by L306 , PUA2MSS1:def 12;
set D52 = ( C176 | (C175 , C179 , C180) );
set D53 = ( C177 | (C175 , C179 , C180) );
reconsider D54 = C180 as (Function of (the carrier' of C175) , (the carrier' of C174)) by L307 , FUNCT_2:def 1 , RELSET_1:4;
L308: ( C179 * (the ResultSort of C175) ) = ( (the ResultSort of C174) * D54 ) by L306 , PUA2MSS1:def 12;
reconsider D55 = ( C178 * C179 ) as (ManySortedFunction of D52 , D53) by L306 , L264;
take D55;
thus L309: D55 = ( C178 * C179 );
let C181 being (OperSymbol of C175);
set D56 = ( D54 . C181 );
assume L310: ( Args (C181 , D52) ) <> ( {} );
let C182 being (Element of ( Args (C181 , D52) ));
reconsider D57 = C182 as (Element of ( Args (D56 , C176) )) by L306 , L234;
L311: ( D55 . ( the_result_sort_of C181 ) ) = ( C178 . ( C179 . ( the_result_sort_of C181 ) ) ) by FUNCT_2:15
.= ( C178 . ( ( (the ResultSort of C174) * D54 ) . C181 ) ) by L308 , FUNCT_2:15
.= ( C178 . ( the_result_sort_of D56 ) ) by FUNCT_2:15;
L312: (( Den (C181 , D52) ) = ( Den (D56 , C176) ) & ( Den (C181 , D53) ) = ( Den (D56 , C177) )) by L306 , L229;
L313: ( Args (C181 , D52) ) = ( Args (( D54 . C181 ) , C176) ) by L306 , L234;
L314: ( Args (C181 , D53) ) = ( Args (( D54 . C181 ) , C177) ) by L306 , L234;
L315: ( Args (C181 , D53) ) <> ( {} ) by L314 , L304 , L310 , L313 , L20;
L316: ( D55 # C182 ) = ( C178 # D57 ) by L315 , L306 , L310 , L313 , L314 , L286;
thus L317: thesis by L316 , L305 , L310 , L313 , L312 , L311 , MSUALG_3:def 7;
end;
theorem
L318: (for B155 being non  void  feasible ManySortedSign holds (for B156 being non  void (Subsignature of B155) holds (for B157 , B158 being MSAlgebra over B155 holds ((the Sorts of B157) is_transformable_to (the Sorts of B158) implies (for B159 being (ManySortedFunction of B157 , B158) holds (B159 is_homomorphism B157 , B158 implies (ex B160 being (ManySortedFunction of ( B157 | B156 ) , ( B158 | B156 )) st (B160 = ( B159 | (the carrier of B156) ) & B160 is_homomorphism ( B157 | B156 ) , ( B158 | B156 )))))))))
proof
let C183 being non  void  feasible ManySortedSign;
let C184 being non  void (Subsignature of C183);
let C185 , C186 being MSAlgebra over C183;
assume that
L319: (the Sorts of C185) is_transformable_to (the Sorts of C186);
set D58 = ( id (the carrier of C184) );
set D59 = ( id (the carrier' of C184) );
L320: D58 , D59 form_morphism_between C184 , C183 by L83;
reconsider D60 = D58 as (Function of (the carrier of C184) , (the carrier of C183)) by L320 , L78;
let C187 being (ManySortedFunction of C185 , C186);
assume L321: C187 is_homomorphism C185 , C186;
consider C188 being (ManySortedFunction of ( C185 | (C184 , D60 , D59) ) , ( C186 | (C184 , D60 , D59) )) such that L322: C188 = ( C187 * D60 ) and L323: C188 is_homomorphism ( C185 | (C184 , D60 , D59) ) , ( C186 | (C184 , D60 , D59) ) by L321 , L319 , L320 , L303;
consider C189 being (ManySortedFunction of ( C185 | C184 ) , ( C186 | C184 )) such that L324: C189 = C188 and L325: C189 is_homomorphism ( C185 | C184 ) , ( C186 | C184 ) by L323;
take C189;
thus L326: thesis by L322 , L323 , L324 , RELAT_1:65;
end;
theorem
L327: (for B161 , B162 being non  empty non  void ManySortedSign holds (for B163 being  non-empty MSAlgebra over B161 holds (for B164 being (Function of (the carrier of B162) , (the carrier of B161)) holds (for B165 being Function holds (B164 , B165 form_morphism_between B162 , B161 implies (for B166 being  non-empty MSAlgebra over B162 holds (B166 = ( B163 | (B162 , B164 , B165) ) implies (for B167 , B168 being (SortSymbol of B162) holds (for B169 being Function holds (B169 is_e.translation_of B166 , B167 , B168 implies B169 is_e.translation_of B163 , ( B164 . B167 ) , ( B164 . B168 )))))))))))
proof
let C190 , C191 being non  empty non  void ManySortedSign;
let C192 being  non-empty MSAlgebra over C190;
let C193 being (Function of (the carrier of C191) , (the carrier of C190));
let C194 being Function;
assume that
L328: C193 , C194 form_morphism_between C191 , C190;
L329: (( dom C194 ) = (the carrier' of C191) & ( rng C194 ) c= (the carrier' of C190)) by L328 , PUA2MSS1:def 12;
let C195 being  non-empty MSAlgebra over C191;
assume that
L330: C195 = ( C192 | (C191 , C193 , C194) );
reconsider D61 = C194 as (Function of (the carrier' of C191) , (the carrier' of C190)) by L329 , FUNCT_2:def 1 , RELSET_1:4;
let C196 , C197 being (SortSymbol of C191);
let C198 being Function;
given C199 being (OperSymbol of C191) such that
L331: ( the_result_sort_of C199 ) = C197
and
L332: (ex B170 being (Element of ( NAT )) st (B170 in ( dom ( the_arity_of C199 ) ) & ( ( the_arity_of C199 ) /. B170 ) = C196 & (ex B171 being Function st (B171 in ( Args (C199 , C195) ) & C198 = ( transl (C199 , B170 , B171 , C195) )))));

L333: ( C193 * ( the_arity_of C199 ) ) = ( the_arity_of ( D61 . C199 ) ) by L328 , PUA2MSS1:def 12;
take ( D61 . C199 );
L334: ( C193 * (the ResultSort of C191) ) = ( (the ResultSort of C190) * D61 ) by L328 , PUA2MSS1:def 12;
thus L335: ( the_result_sort_of ( D61 . C199 ) ) = ( ( C193 * (the ResultSort of C191) ) . C199 ) by L334 , FUNCT_2:15
.= ( C193 . C197 ) by L331 , FUNCT_2:15;
consider C200 being (Element of ( NAT )), C201 being Function such that L336: C200 in ( dom ( the_arity_of C199 ) ) and L337: ( ( the_arity_of C199 ) /. C200 ) = C196 and L338: C201 in ( Args (C199 , C195) ) and L339: C198 = ( transl (C199 , C200 , C201 , C195) ) by L332;
take C200;
L340: (( rng ( the_arity_of C199 ) ) c= (the carrier of C191) & ( dom C193 ) = (the carrier of C191)) by FINSEQ_1:def 4 , FUNCT_2:def 1;
thus L341: C200 in ( dom ( the_arity_of ( D61 . C199 ) ) ) by L340 , L336 , L333 , RELAT_1:27;
thus L342: ( ( the_arity_of ( D61 . C199 ) ) /. C200 ) = ( ( the_arity_of ( D61 . C199 ) ) . C200 ) by L341 , PARTFUN1:def 6
.= ( C193 . ( ( the_arity_of C199 ) . C200 ) ) by L336 , L333 , FUNCT_1:13
.= ( C193 . C196 ) by L336 , L337 , PARTFUN1:def 6;
L343: ( dom ( transl (( D61 . C199 ) , C200 , C201 , C192) ) ) = ( (the Sorts of C192) . ( C193 . C196 ) ) by L342 , MSUALG_6:def 4;
L344: (the Sorts of C195) = ( (the Sorts of C192) * C193 ) by L328 , L330 , L199;
L345: ( (the Sorts of C195) . C196 ) = ( (the Sorts of C192) . ( C193 . C196 ) ) by L344 , FUNCT_2:15;
L346:
now
let C202 being set;
assume L347: C202 in ( (the Sorts of C195) . C196 );
L348: (( C198 . C202 ) = ( ( Den (C199 , C195) ) . ( C201 +* (C200 , C202) ) ) & ( ( transl (( D61 . C199 ) , C200 , C201 , C192) ) . C202 ) = ( ( Den (( D61 . C199 ) , C192) ) . ( C201 +* (C200 , C202) ) )) by L347 , L337 , L339 , L342 , L345 , MSUALG_6:def 4;
thus L349: ( C198 . C202 ) = ( ( transl (( D61 . C199 ) , C200 , C201 , C192) ) . C202 ) by L348 , L328 , L330 , L229;
end;
take C201;
thus L350: C201 in ( Args (( D61 . C199 ) , C192) ) by L328 , L330 , L338 , L234;
L351: ( dom C198 ) = ( (the Sorts of C195) . C196 ) by L337 , L339 , MSUALG_6:def 4;
thus L352: thesis by L351 , L343 , L344 , L346 , FUNCT_1:2 , FUNCT_2:15;
end;
L353: (for B172 , B173 being non  empty non  void ManySortedSign holds (for B174 being  non-empty MSAlgebra over B172 holds (for B175 being (Function of (the carrier of B173) , (the carrier of B172)) holds (for B176 being Function holds (B175 , B176 form_morphism_between B173 , B172 implies (for B177 being  non-empty MSAlgebra over B173 holds (B177 = ( B174 | (B173 , B175 , B176) ) implies (for B178 , B179 being (SortSymbol of B173) holds (( TranslationRel B173 ) reduces B178 , B179 implies (( TranslationRel B172 ) reduces ( B175 . B178 ) , ( B175 . B179 ) & (for B180 being (Translation of B177 , B178 , B179) holds B180 is (Translation of B174 , ( B175 . B178 ) , ( B175 . B179 )))))))))))))
proof
let C203 , C204 being non  void non  empty ManySortedSign;
let C205 being  non-empty MSAlgebra over C203;
let C206 being (Function of (the carrier of C204) , (the carrier of C203));
let C207 being Function;
assume that
L354: C206 , C207 form_morphism_between C204 , C203;
defpred S1[ set , (SortSymbol of C204) , (SortSymbol of C204) ] means (( TranslationRel C203 ) reduces ( C206 . $2 ) , ( C206 . $3 ) & $1 is (Translation of C205 , ( C206 . $2 ) , ( C206 . $3 )));
let C208 being  non-empty MSAlgebra over C204;
assume that
L355: C208 = ( C205 | (C204 , C206 , C207) );
L356: (for B181 , B182 , B183 being (SortSymbol of C204) holds (( TranslationRel C204 ) reduces B181 , B182 implies (for B184 being (Translation of C208 , B181 , B182) holds (S1[ B184 , B181 , B182 ] implies (for B185 being Function holds (B185 is_e.translation_of C208 , B182 , B183 implies S1[ ( B185 * B184 ) , B181 , B183 ]))))))
proof
let C209 , C210 , C211 being (SortSymbol of C204);
assume that
L357: ( TranslationRel C204 ) reduces C209 , C210;
let C212 being (Translation of C208 , C209 , C210);
assume that
L358: S1[ C212 , C209 , C210 ];
let C213 being Function;
assume L359: C213 is_e.translation_of C208 , C210 , C211;
L360: [ ( C206 . C210 ) , ( C206 . C211 ) ] in ( TranslationRel C203 ) by L359 , L354 , L355 , L327 , MSUALG_6:12;
L361: ( TranslationRel C203 ) reduces ( C206 . C210 ) , ( C206 . C211 ) by L360 , REWRITE1:15;
L362: C213 is_e.translation_of C205 , ( C206 . C210 ) , ( C206 . C211 ) by L354 , L355 , L359 , L327;
thus L363: thesis by L362 , L358 , L361 , MSUALG_6:19 , REWRITE1:16;
end;
let C214 , C215 being (SortSymbol of C204);
assume L364: ( TranslationRel C204 ) reduces C214 , C215;
L365: (for B186 being (SortSymbol of C204) holds S1[ ( id ( (the Sorts of C208) . B186 ) ) , B186 , B186 ])
proof
let C216 being (SortSymbol of C204);
thus L366: ( TranslationRel C203 ) reduces ( C206 . C216 ) , ( C206 . C216 ) by REWRITE1:12;
L367: (the Sorts of C208) = ( (the Sorts of C205) * C206 ) by L354 , L355 , L199;
L368: ( (the Sorts of C208) . C216 ) = ( (the Sorts of C205) . ( C206 . C216 ) ) by L367 , FUNCT_2:15;
thus L369: thesis by L368 , MSUALG_6:16;
end;
L370: (for B187 , B188 being (SortSymbol of C204) holds (( TranslationRel C204 ) reduces B187 , B188 implies (for B189 being (Translation of C208 , B187 , B188) holds S1[ B189 , B187 , B188 ]))) from MSUALG_6:sch 1(L365 , L356);
thus L371: thesis by L370 , L364;
end;
theorem
L372: (for B190 , B191 being non  empty non  void ManySortedSign holds (for B192 being (Function of (the carrier of B191) , (the carrier of B190)) holds (for B193 being Function holds (B192 , B193 form_morphism_between B191 , B190 implies (for B194 , B195 being (SortSymbol of B191) holds (( TranslationRel B191 ) reduces B194 , B195 implies ( TranslationRel B190 ) reduces ( B192 . B194 ) , ( B192 . B195 )))))))
proof
let C217 , C218 being non  empty non  void ManySortedSign;
set D62 = the  non-empty MSAlgebra over C217;
let C219 being (Function of (the carrier of C218) , (the carrier of C217));
let C220 being Function;
assume L373: C219 , C220 form_morphism_between C218 , C217;
L374: ( D62 | (C218 , C219 , C220) ) is  non-empty  non-empty  non-empty  non-empty MSAlgebra over C218 by L373 , L222;
thus L375: thesis by L374 , L373 , L353;
end;
theorem
L376: (for B196 , B197 being non  void non  empty ManySortedSign holds (for B198 being  non-empty MSAlgebra over B196 holds (for B199 being (Function of (the carrier of B197) , (the carrier of B196)) holds (for B200 being Function holds (B199 , B200 form_morphism_between B197 , B196 implies (for B201 being  non-empty MSAlgebra over B197 holds (B201 = ( B198 | (B197 , B199 , B200) ) implies (for B202 , B203 being (SortSymbol of B197) holds (( TranslationRel B197 ) reduces B202 , B203 implies (for B204 being (Translation of B201 , B202 , B203) holds B204 is (Translation of B198 , ( B199 . B202 ) , ( B199 . B203 )))))))))))) by L353;
begin
scheme GenFuncEx { F1() -> non  empty non  void ManySortedSign , F2() ->  non-empty MSAlgebra over F1() , F3() ->  non-empty (ManySortedSet of (the carrier of F1())) , F4(set , set) -> set } : (ex B205 being (ManySortedFunction of ( FreeMSA F3() ) , F2()) st (B205 is_homomorphism ( FreeMSA F3() ) , F2() & (for B206 being (SortSymbol of F1()) holds (for B207 being (Element of ( F3() . B206 )) holds ( ( B205 . B206 ) . ( root-tree [ B207 , B206 ] ) ) = F4(B207 , B206)))))
provided
L377: (for B208 being (SortSymbol of F1()) holds (for B209 being (Element of ( F3() . B208 )) holds F4(B209 , B208) in ( (the Sorts of F2()) . B208 )))
proof
defpred S2[ set , set ] means (ex B210 being (Function of ( ( FreeGen F3() ) . $1 ) , ( (the Sorts of F2()) . $1 )) st ($2 = B210 & (for B211 being (Element of ( F3() . $1 )) holds ( B210 . ( root-tree [ B211 , $1 ] ) ) = F4(B211 , $1))));
L378: (for B212 being set holds (B212 in (the carrier of F1()) implies (ex B213 being set st S2[ B212 , B213 ])))
proof
let C221 being set;
assume L379: C221 in (the carrier of F1());
reconsider D63 = C221 as (SortSymbol of F1()) by L379;
defpred S3[ set , set ] means (ex B214 being (Element of ( F3() . D63 )) st ($1 = ( root-tree [ B214 , D63 ] ) & $2 = F4(B214 , D63)));
L380: ( ( FreeGen F3() ) . D63 ) = ( FreeGen (D63 , F3()) ) by MSAFREE:def 16;
L381: (for B215 being set holds (B215 in ( ( FreeGen F3() ) . D63 ) implies (ex B216 being set st (B216 in ( (the Sorts of F2()) . D63 ) & S3[ B215 , B216 ]))))
proof
let C222 being set;
assume L382: C222 in ( ( FreeGen F3() ) . D63 );
consider C223 being set such that L383: C223 in ( F3() . D63 ) and L384: C222 = ( root-tree [ C223 , D63 ] ) by L382 , L380 , MSAFREE:def 15;
reconsider D64 = C223 as (Element of ( F3() . D63 )) by L383;
take D65 = F4(D64 , D63);
thus L385: D65 in ( (the Sorts of F2()) . D63 ) by L377;
take D64;
thus L386: thesis by L384;
end;
consider C224 being Function such that L387: (( dom C224 ) = ( ( FreeGen F3() ) . D63 ) & ( rng C224 ) c= ( (the Sorts of F2()) . D63 )) and L388: (for B217 being set holds (B217 in ( ( FreeGen F3() ) . D63 ) implies S3[ B217 , ( C224 . B217 ) ])) from FUNCT_1:sch 5(L381);
reconsider D66 = C224 as (Function of ( ( FreeGen F3() ) . C221 ) , ( (the Sorts of F2()) . C221 )) by L387 , FUNCT_2:2;
take D67 = D66;
take D66;
thus L389: D67 = D66;
let C225 being (Element of ( F3() . C221 ));
L390: ( root-tree [ C225 , D63 ] ) in ( ( FreeGen F3() ) . D63 ) by L380 , MSAFREE:def 15;
consider C226 being (Element of ( F3() . D63 )) such that L391: ( root-tree [ C225 , D63 ] ) = ( root-tree [ C226 , D63 ] ) and L392: ( D66 . ( root-tree [ C225 , D63 ] ) ) = F4(C226 , D63) by L390 , L388;
L393: [ C225 , D63 ] = [ C226 , D63 ] by L391 , TREES_4:4;
thus L394: thesis by L393 , L392 , XTUPLE_0:1;
end;
consider C227 being Function such that L395: ( dom C227 ) = (the carrier of F1()) and L396: (for B218 being set holds (B218 in (the carrier of F1()) implies S2[ B218 , ( C227 . B218 ) ])) from CLASSES1:sch 1(L378);
reconsider D68 = C227 as (ManySortedSet of (the carrier of F1())) by L395 , PARTFUN1:def 2 , RELAT_1:def 18;
L397: D68 is (ManySortedFunction of ( FreeGen F3() ) , (the Sorts of F2()))
proof
let C228 being set;
assume L398: C228 in (the carrier of F1());
L399: (ex B219 being (Function of ( ( FreeGen F3() ) . C228 ) , ( (the Sorts of F2()) . C228 )) st (( D68 . C228 ) = B219 & (for B220 being (Element of ( F3() . C228 )) holds ( B219 . ( root-tree [ B220 , C228 ] ) ) = F4(B220 , C228)))) by L398 , L396;
thus L400: thesis by L399;
end;
reconsider D69 = D68 as (ManySortedFunction of ( FreeGen F3() ) , (the Sorts of F2())) by L397;
consider C229 being (ManySortedFunction of ( FreeMSA F3() ) , F2()) such that L401: C229 is_homomorphism ( FreeMSA F3() ) , F2() and L402: ( C229 || ( FreeGen F3() ) ) = D69 by MSAFREE:def 5;
take C229;
thus L403: C229 is_homomorphism ( FreeMSA F3() ) , F2() by L401;
let C230 being (SortSymbol of F1());
let C231 being (Element of ( F3() . C230 ));
L404: (ex B221 being (Function of ( ( FreeGen F3() ) . C230 ) , ( (the Sorts of F2()) . C230 )) st (( D69 . C230 ) = B221 & (for B222 being (Element of ( F3() . C230 )) holds ( B221 . ( root-tree [ B222 , C230 ] ) ) = F4(B222 , C230)))) by L396;
reconsider D70 = ( root-tree [ C231 , C230 ] ) as (Term of F1() , F3()) by MSATERM:4;
L405: ( ( FreeGen F3() ) . C230 ) = ( FreeGen (C230 , F3()) ) by MSAFREE:def 16;
L406: D70 in ( ( FreeGen F3() ) . C230 ) by L405 , MSAFREE:def 15;
L407: ( D69 . C230 ) = ( ( C229 . C230 ) | ( ( FreeGen F3() ) . C230 ) ) by L402 , MSAFREE:def 1;
L408: ( ( C229 . C230 ) . ( root-tree [ C231 , C230 ] ) ) = ( ( D69 . C230 ) . ( root-tree [ C231 , C230 ] ) ) by L407 , L406 , FUNCT_1:49;
thus L409: thesis by L408 , L404;
end;
theorem
L410: (for B223 being set holds (for B224 , B225 being (ManySortedSet of B223) holds (for B226 being (ManySortedSubset of B224) holds (for B227 being (ManySortedFunction of B224 , B225) holds (for B228 being set holds (B228 in B223 implies (for B229 , B230 being Function holds ((B229 = ( B227 . B228 ) & B230 = ( ( B227 || B226 ) . B228 )) implies (for B231 being set holds (B231 in ( B226 . B228 ) implies ( B230 . B231 ) = ( B229 . B231 )))))))))))
proof
let C232 being set;
let C233 , C234 being (ManySortedSet of C232);
let C235 being (ManySortedSubset of C233);
let C236 being (ManySortedFunction of C233 , C234);
let C237 being set;
assume L411: C237 in C232;
reconsider D71 = ( C236 . C237 ) as (Function of ( C233 . C237 ) , ( C234 . C237 )) by L411 , PBOOLE:def 15;
let C238 , C239 being Function;
assume that
L412: C238 = ( C236 . C237 )
and
L413: C239 = ( ( C236 || C235 ) . C237 );
let C240 being set;
L414: C239 = ( D71 | ( C235 . C237 ) ) by L411 , L413 , MSAFREE:def 1;
thus L415: thesis by L414 , L412 , FUNCT_1:49;
end;
registration
let C241 being non  void non  empty ManySortedSign;
let C242 being  non-empty (ManySortedSet of (the carrier of C241));
cluster ( FreeGen C242 ) ->  non-empty;
coherence;
end;
definition
let C243 , C244 being non  empty non  void ManySortedSign;
let C245 being  non-empty (ManySortedSet of (the carrier of C244));
let C246 being (Function of (the carrier of C243) , (the carrier of C244));
let C247 being Function;
assume that
L417: C246 , C247 form_morphism_between C243 , C244;
func hom (C246 , C247 , C245 , C243 , C244) -> (ManySortedFunction of ( FreeMSA ( C245 * C246 ) ) , ( ( FreeMSA C245 ) | (C243 , C246 , C247) )) means 
:L418: (it is_homomorphism ( FreeMSA ( C245 * C246 ) ) , ( ( FreeMSA C245 ) | (C243 , C246 , C247) ) & (for B232 being (SortSymbol of C243) holds (for B233 being (Element of ( ( C245 * C246 ) . B232 )) holds ( ( it . B232 ) . ( root-tree [ B233 , B232 ] ) ) = ( root-tree [ B233 , ( C246 . B232 ) ] ))));
existence
proof
set D72 = ( ( FreeMSA C245 ) | (C243 , C246 , C247) );
L419: (the Sorts of D72) = ( (the Sorts of ( FreeMSA C245 )) * C246 ) by L417 , L199;
reconsider D73 = D72 as  non-empty MSAlgebra over C243 by L419 , MSUALG_1:def 3;
deffunc H1(set , set) = ( root-tree [ $1 , ( C246 . $2 ) ] );
L420:
now
let C248 being (SortSymbol of C243);
let C249 being (Element of ( ( C245 * C246 ) . C248 ));
reconsider D74 = ( C246 . C248 ) as (SortSymbol of C244);
reconsider D75 = C249 as (Element of ( C245 . D74 )) by FUNCT_2:15;
reconsider D76 = ( root-tree [ D75 , D74 ] ) as (Term of C244 , C245) by MSATERM:4;
L421: ( the_sort_of D76 ) = D74 by MSATERM:14;
L422: D76 in ( FreeSort (C245 , D74) ) by L421 , MSATERM:def 5;
L423: D76 in ( ( FreeSort C245 ) . D74 ) by L422 , MSAFREE:def 11;
L424: (( FreeMSA C245 ) = MSAlgebra (# ( FreeSort C245 ) , ( FreeOper C245 ) #) & (the Sorts of D73) = ( (the Sorts of ( FreeMSA C245 )) * C246 )) by L417 , L199 , MSAFREE:def 14;
thus L425: H1(C249 , C248) in ( (the Sorts of D73) . C248 ) by L424 , L423 , FUNCT_2:15;
end;
consider C250 being (ManySortedFunction of ( FreeMSA ( C245 * C246 ) ) , D73) such that L426: (C250 is_homomorphism ( FreeMSA ( C245 * C246 ) ) , D73 & (for B234 being (SortSymbol of C243) holds (for B235 being (Element of ( ( C245 * C246 ) . B234 )) holds ( ( C250 . B234 ) . ( root-tree [ B235 , B234 ] ) ) = H1(B235 , B234)))) from GenFuncEx(L420);
reconsider D77 = C250 as (ManySortedFunction of ( FreeMSA ( C245 * C246 ) ) , ( ( FreeMSA C245 ) | (C243 , C246 , C247) ));
take D77;
thus L427: thesis by L426;
end;
uniqueness
proof
reconsider D78 = ( ( FreeMSA C245 ) | (C243 , C246 , C247) ) as  non-empty MSAlgebra over C243 by L417 , L222;
let C251 , C252 being (ManySortedFunction of (the Sorts of ( FreeMSA ( C245 * C246 ) )) , (the Sorts of ( ( FreeMSA C245 ) | (C243 , C246 , C247) )));
assume that
L428: C251 is_homomorphism ( FreeMSA ( C245 * C246 ) ) , ( ( FreeMSA C245 ) | (C243 , C246 , C247) )
and
L429: (for B236 being (SortSymbol of C243) holds (for B237 being (Element of ( ( C245 * C246 ) . B236 )) holds ( ( C251 . B236 ) . ( root-tree [ B237 , B236 ] ) ) = ( root-tree [ B237 , ( C246 . B236 ) ] )))
and
L430: C252 is_homomorphism ( FreeMSA ( C245 * C246 ) ) , ( ( FreeMSA C245 ) | (C243 , C246 , C247) )
and
L431: (for B238 being (SortSymbol of C243) holds (for B239 being (Element of ( ( C245 * C246 ) . B238 )) holds ( ( C252 . B238 ) . ( root-tree [ B239 , B238 ] ) ) = ( root-tree [ B239 , ( C246 . B238 ) ] )));
set D79 = C251;
set D80 = C252;
L432:
now
let C253 being set;
assume L433: C253 in (the carrier of C243);
reconsider D81 = C253 as (SortSymbol of C243) by L433;
reconsider D82 = ( ( D79 || ( FreeGen ( C245 * C246 ) ) ) . D81 ) , D83 = ( ( D80 || ( FreeGen ( C245 * C246 ) ) ) . D81 ) as (Function of ( ( FreeGen ( C245 * C246 ) ) . D81 ) , ( (the Sorts of D78) . D81 ));
L434:
now
let C254 being (Element of ( ( FreeGen ( C245 * C246 ) ) . D81 ));
L435: ( FreeGen (D81 , ( C245 * C246 )) ) = ( ( FreeGen ( C245 * C246 ) ) . D81 ) by MSAFREE:def 16;
consider C255 being set such that L436: C255 in ( ( C245 * C246 ) . D81 ) and L437: C254 = ( root-tree [ C255 , D81 ] ) by L435 , MSAFREE:def 15;
reconsider D84 = C255 as (Element of ( ( C245 * C246 ) . D81 )) by L436;
thus L438: ( D82 . C254 ) = ( ( D79 . D81 ) . C254 ) by L410
.= ( root-tree [ D84 , ( C246 . D81 ) ] ) by L429 , L437
.= ( ( D80 . D81 ) . C254 ) by L431 , L437
.= ( D83 . C254 ) by L410;
end;
thus L439: ( ( D79 || ( FreeGen ( C245 * C246 ) ) ) . C253 ) = ( ( D80 || ( FreeGen ( C245 * C246 ) ) ) . C253 ) by L434 , FUNCT_2:63;
end;
L440: D78 = ( ( FreeMSA C245 ) | (C243 , C246 , C247) );
thus L441: thesis by L440 , L428 , L430 , L432 , EXTENS_1:14 , PBOOLE:3;
end;
end;
theorem
L443: (for B240 , B241 being non  void non  empty ManySortedSign holds (for B242 being  non-empty (ManySortedSet of (the carrier of B241)) holds (for B243 being (Function of (the carrier of B240) , (the carrier of B241)) holds (for B244 being Function holds (B243 , B244 form_morphism_between B240 , B241 implies (for B245 being (OperSymbol of B240) holds (for B246 being (Element of ( Args (B245 , ( FreeMSA ( B242 * B243 ) )) )) holds (for B247 being FinSequence holds (B247 = ( ( hom (B243 , B244 , B242 , B240 , B241) ) # B246 ) implies ( ( ( hom (B243 , B244 , B242 , B240 , B241) ) . ( the_result_sort_of B245 ) ) . ( [ B245 , (the carrier of B240) ] -tree B246 ) ) = ( [ ( B244 . B245 ) , (the carrier of B241) ] -tree B247 ))))))))))
proof
let C256 , C257 being non  void non  empty ManySortedSign;
let C258 being  non-empty (ManySortedSet of (the carrier of C257));
let C259 being (Function of (the carrier of C256) , (the carrier of C257));
let C260 being Function;
set D85 = ( hom (C259 , C260 , C258 , C256 , C257) );
assume L444: C259 , C260 form_morphism_between C256 , C257;
reconsider D86 = C260 as (Function of (the carrier' of C256) , (the carrier' of C257)) by L444 , L78;
let C261 being (OperSymbol of C256);
let C262 being (Element of ( Args (C261 , ( FreeMSA ( C258 * C259 ) )) ));
let C263 being FinSequence;
assume L445: C263 = ( D85 # C262 );
L446: C263 is (Element of ( Args (( D86 . C261 ) , ( FreeMSA C258 )) )) by L445 , L444 , L234;
L447: D85 is_homomorphism ( FreeMSA ( C258 * C259 ) ) , ( ( FreeMSA C258 ) | (C256 , C259 , C260) ) by L444 , L418;
L448: ( ( D85 . ( the_result_sort_of C261 ) ) . ( ( Den (C261 , ( FreeMSA ( C258 * C259 ) )) ) . C262 ) ) = ( ( Den (C261 , ( ( FreeMSA C258 ) | (C256 , C259 , C260) )) ) . C263 ) by L447 , L445 , MSUALG_3:def 7;
thus L449: ( ( D85 . ( the_result_sort_of C261 ) ) . ( [ C261 , (the carrier of C256) ] -tree C262 ) ) = ( ( Den (C261 , ( ( FreeMSA C258 ) | (C256 , C259 , C260) )) ) . C263 ) by L448 , L28
.= ( ( Den (( D86 . C261 ) , ( FreeMSA C258 )) ) . C263 ) by L444 , L229
.= ( [ ( C260 . C261 ) , (the carrier of C257) ] -tree C263 ) by L446 , L28;
end;
theorem
L450: (for B248 , B249 being non  void non  empty ManySortedSign holds (for B250 being  non-empty (ManySortedSet of (the carrier of B249)) holds (for B251 being (Function of (the carrier of B248) , (the carrier of B249)) holds (for B252 being Function holds (B251 , B252 form_morphism_between B248 , B249 implies (for B253 being (Term of B248 , ( B250 * B251 )) holds (( ( ( hom (B251 , B252 , B250 , B248 , B249) ) . ( the_sort_of B253 ) ) . B253 ) is (CompoundTerm of B249 , B250) iff B253 is (CompoundTerm of B248 , ( B250 * B251 )))))))))
proof
let C264 , C265 being non  void non  empty ManySortedSign;
let C266 being  non-empty (ManySortedSet of (the carrier of C265));
let C267 being (Function of (the carrier of C264) , (the carrier of C265));
let C268 being Function;
assume L451: C267 , C268 form_morphism_between C264 , C265;
reconsider D87 = C268 as (Function of (the carrier' of C264) , (the carrier' of C265)) by L451 , L78;
let C269 being (Term of C264 , ( C266 * C267 ));
thus L452:now
assume L453: ( ( ( hom (C267 , C268 , C266 , C264 , C265) ) . ( the_sort_of C269 ) ) . C269 ) is (CompoundTerm of C265 , C266);
reconsider D88 = ( ( ( hom (C267 , C268 , C266 , C264 , C265) ) . ( the_sort_of C269 ) ) . C269 ) as (CompoundTerm of C265 , C266) by L453;
assume L454: (not C269 is (CompoundTerm of C264 , ( C266 * C267 )));
L455: (not ( C269 . ( {} ) ) in [: (the carrier' of C264) , { (the carrier of C264) } :]) by L454 , MSATERM:def 6;
consider C270 being (SortSymbol of C264), C271 being (Element of ( ( C266 * C267 ) . C270 )) such that L456: ( C269 . ( {} ) ) = [ C271 , C270 ] by L455 , MSATERM:2;
L457: C269 = ( root-tree [ C271 , C270 ] ) by L456 , MSATERM:5;
L458: (( ( ( hom (C267 , C268 , C266 , C264 , C265) ) . C270 ) . C269 ) = ( root-tree [ C271 , ( C267 . C270 ) ] ) & ( the_sort_of C269 ) = C270) by L457 , L451 , L418 , MSATERM:14;
L459: (( D88 . ( {} ) ) in [: (the carrier' of C265) , { (the carrier of C265) } :] & ( D88 . ( {} ) ) = [ C271 , ( C267 . C270 ) ]) by L458 , MSATERM:def 6 , TREES_4:3;
L460: ( C267 . C270 ) = (the carrier of C265) by L459 , ZFMISC_1:106;
L461: ( C267 . C270 ) in (the carrier of C265);
thus L462: contradiction by L461 , L460;
end;
assume L463: C269 is (CompoundTerm of C264 , ( C266 * C267 ));
reconsider D89 = C269 as (CompoundTerm of C264 , ( C266 * C267 )) by L463;
L464: ( D89 . ( {} ) ) in [: (the carrier' of C264) , { (the carrier of C264) } :] by MSATERM:def 6;
consider C272 , C273 being set such that L465: C272 in (the carrier' of C264) and L466: C273 in { (the carrier of C264) } and L467: ( D89 . ( {} ) ) = [ C272 , C273 ] by L464 , ZFMISC_1:def 2;
reconsider D90 = C272 as (OperSymbol of C264) by L465;
L468: C273 = (the carrier of C264) by L466 , TARSKI:def 1;
consider C274 being (ArgumentSeq of ( Sym (D90 , ( C266 * C267 )) )) such that L469: D89 = ( [ D90 , (the carrier of C264) ] -tree C274 ) by L468 , L467 , MSATERM:10;
reconsider D91 = C274 as (Element of ( Args (D90 , ( FreeMSA ( C266 * C267 ) )) )) by L1;
reconsider D92 = ( ( hom (C267 , C268 , C266 , C264 , C265) ) # D91 ) as (Element of ( Args (( D87 . D90 ) , ( FreeMSA C266 )) )) by L451 , L234;
L470: ( ( ( hom (C267 , C268 , C266 , C264 , C265) ) . ( the_result_sort_of D90 ) ) . ( [ D90 , (the carrier of C264) ] -tree D91 ) ) = ( [ ( C268 . D90 ) , (the carrier of C265) ] -tree D92 ) by L451 , L443;
L471: ( D89 . ( {} ) ) = [ D90 , (the carrier of C264) ] by L469 , TREES_4:def 4;
L472: ( the_sort_of D89 ) = ( the_result_sort_of D90 ) by L471 , MSATERM:17;
reconsider D93 = D92 as (ArgumentSeq of ( Sym (( D87 . D90 ) , C266) )) by L1;
L473: ( ( Sym (( D87 . D90 ) , C266) ) -tree D93 ) = ( [ ( D87 . D90 ) , (the carrier of C265) ] -tree D93 ) by MSAFREE:def 9;
reconsider D94 = ( [ ( D87 . D90 ) , (the carrier of C265) ] -tree D93 ) as (Term of C265 , C266) by L473;
L474: (( D94 . ( {} ) ) = [ ( C268 . D90 ) , (the carrier of C265) ] & [ ( D87 . D90 ) , (the carrier of C265) ] in [: (the carrier' of C265) , { (the carrier of C265) } :]) by TREES_4:def 4 , ZFMISC_1:106;
thus L475: thesis by L474 , L469 , L472 , L470 , MSATERM:def 6;
end;
theorem
L476: (for B254 , B255 being non  void non  empty ManySortedSign holds (for B256 being  non-empty (ManySortedSet of (the carrier of B255)) holds (for B257 being (Function of (the carrier of B254) , (the carrier of B255)) holds (for B258 being  one-to-one Function holds (B257 , B258 form_morphism_between B254 , B255 implies ( hom (B257 , B258 , B256 , B254 , B255) ) is_monomorphism ( FreeMSA ( B256 * B257 ) ) , ( ( FreeMSA B256 ) | (B254 , B257 , B258) ))))))
proof
let C275 , C276 being non  void non  empty ManySortedSign;
let C277 being  non-empty (ManySortedSet of (the carrier of C276));
let C278 being (Function of (the carrier of C275) , (the carrier of C276));
let C279 being  one-to-one Function;
set D95 = ( ( FreeMSA C277 ) | (C275 , C278 , C279) );
set D96 = ( hom (C278 , C279 , C277 , C275 , C276) );
defpred S4[ set ] means (ex B259 being (Term of C275 , ( C277 * C278 )) st (B259 = $1 & (for B260 being (Term of C275 , ( C277 * C278 )) holds ((( the_sort_of B259 ) = ( the_sort_of B260 ) & ( ( D96 . ( the_sort_of B259 ) ) . B259 ) = ( ( D96 . ( the_sort_of B259 ) ) . B260 )) implies B259 = B260))));
L477: ( FreeMSA ( C277 * C278 ) ) = MSAlgebra (# ( FreeSort ( C277 * C278 ) ) , ( FreeOper ( C277 * C278 ) ) #) by MSAFREE:def 14;
assume L478: C278 , C279 form_morphism_between C275 , C276;
reconsider D97 = C279 as (Function of (the carrier' of C275) , (the carrier' of C276)) by L478 , L78;
reconsider D98 = D95 as  non-empty MSAlgebra over C275 by L478 , L222;
reconsider D99 = D96 as (ManySortedFunction of ( FreeMSA ( C277 * C278 ) ) , D98);
L479: (for B261 being (OperSymbol of C275) holds (for B262 being (ArgumentSeq of ( Sym (B261 , ( C277 * C278 )) )) holds ((for B263 being (Term of C275 , ( C277 * C278 )) holds (B263 in ( rng B262 ) implies S4[ B263 ])) implies S4[ ( [ B261 , (the carrier of C275) ] -tree B262 ) ])))
proof
let C280 being (OperSymbol of C275);
let C281 being (ArgumentSeq of ( Sym (C280 , ( C277 * C278 )) ));
assume that
L480: (for B264 being (Term of C275 , ( C277 * C278 )) holds (B264 in ( rng C281 ) implies S4[ B264 ]));
L481: ( dom C281 ) = ( dom ( the_arity_of C280 ) ) by MSATERM:22;
reconsider D100 = C281 as (Element of ( Args (C280 , ( FreeMSA ( C277 * C278 ) )) )) by L1;
L482: [ ( D97 . C280 ) , (the carrier of C276) ] in [: (the carrier' of C276) , { (the carrier of C276) } :] by ZFMISC_1:106;
reconsider D101 = ( D96 # D100 ) as (Element of ( Args (( D97 . C280 ) , ( FreeMSA C277 )) )) by L478 , L234;
take D102 = ( ( Sym (C280 , ( C277 * C278 )) ) -tree C281 );
thus L483: D102 = ( [ C280 , (the carrier of C275) ] -tree C281 ) by MSAFREE:def 9;
reconsider D103 = D101 as (ArgumentSeq of ( Sym (( D97 . C280 ) , C277) )) by L1;
let C282 being (Term of C275 , ( C277 * C278 ));
assume that
L484: (( the_sort_of D102 ) = ( the_sort_of C282 ) & ( ( D96 . ( the_sort_of D102 ) ) . D102 ) = ( ( D96 . ( the_sort_of D102 ) ) . C282 ));
L485: ( the_sort_of D102 ) = ( the_result_sort_of C280 ) by MSATERM:20;
L486: ( ( D96 . ( the_sort_of D102 ) ) . D102 ) = ( [ ( C279 . C280 ) , (the carrier of C276) ] -tree D101 ) by L485 , L478 , L483 , L443;
L487: (( ( ( Sym (( D97 . C280 ) , C277) ) -tree D103 ) . ( {} ) ) = ( Sym (( D97 . C280 ) , C277) ) & ( Sym (( D97 . C280 ) , C277) ) = [ ( D97 . C280 ) , (the carrier of C276) ]) by MSAFREE:def 9 , TREES_4:def 4;
L488: ( [ ( D97 . C280 ) , (the carrier of C276) ] -tree D103 ) is (CompoundTerm of C276 , C277) by L487 , L482 , MSATERM:def 6;
L489: C282 is (CompoundTerm of C275 , ( C277 * C278 )) by L488 , L478 , L484 , L486 , L450;
L490: ( C282 . ( {} ) ) in [: (the carrier' of C275) , { (the carrier of C275) } :] by L489 , MSATERM:def 6;
consider C283 , C284 being set such that L491: C283 in (the carrier' of C275) and L492: (C284 in { (the carrier of C275) } & ( C282 . ( {} ) ) = [ C283 , C284 ]) by L490 , ZFMISC_1:def 2;
reconsider D104 = C283 as (OperSymbol of C275) by L491;
L493: ( C282 . ( {} ) ) = [ D104 , (the carrier of C275) ] by L492 , TARSKI:def 1;
consider C285 being (ArgumentSeq of ( Sym (D104 , ( C277 * C278 )) )) such that L494: C282 = ( [ D104 , (the carrier of C275) ] -tree C285 ) by L493 , MSATERM:10;
reconsider D105 = C285 as (Element of ( Args (D104 , ( FreeMSA ( C277 * C278 ) )) )) by L1;
reconsider D106 = ( D96 # D105 ) as (Element of ( Args (( D97 . D104 ) , ( FreeMSA C277 )) )) by L478 , L234;
L495: ( the_result_sort_of D104 ) = ( the_sort_of C282 ) by L493 , MSATERM:17;
L496: ( ( D96 . ( the_sort_of D102 ) ) . D102 ) = ( [ ( C279 . D104 ) , (the carrier of C276) ] -tree D106 ) by L495 , L478 , L484 , L494 , L443;
L497: [ ( C279 . D104 ) , (the carrier of C276) ] = [ ( C279 . C280 ) , (the carrier of C276) ] by L496 , L486 , TREES_4:15;
L498: ( D97 . C280 ) = ( D97 . D104 ) by L497 , XTUPLE_0:1;
L499: C280 = D104 by L498 , FUNCT_2:19;
L500: ( dom C285 ) = ( dom ( the_arity_of C280 ) ) by L499 , MSATERM:22;
L501: D101 = D106 by L486 , L496 , TREES_4:15;
L502:
now
let C286 being Nat;
L503: D106 = ( D99 # D105 );
assume L504: C286 in ( dom ( the_arity_of C280 ) );
reconsider D107 = ( C281 . C286 ) , D108 = ( C285 . C286 ) as (Term of C275 , ( C277 * C278 )) by L504 , L481 , L500 , MSATERM:22;
L505: ( the_sort_of D107 ) = ( ( the_arity_of C280 ) /. C286 ) by L481 , L504 , MSATERM:23;
L506: D101 = ( D99 # D100 );
L507: ( D101 . C286 ) = ( ( D96 . ( the_sort_of D107 ) ) . D107 ) by L506 , L481 , L504 , L505 , MSUALG_3:def 6;
L508: ( ( D96 . ( the_sort_of D107 ) ) . D107 ) = ( ( D96 . ( the_sort_of D107 ) ) . D108 ) by L507 , L501 , L499 , L500 , L504 , L505 , L503 , MSUALG_3:def 6;
L509: D107 in ( rng C281 ) by L481 , L504 , FUNCT_1:def 3;
L510: S4[ D107 ] by L509 , L480;
L511: ( the_sort_of D108 ) = ( ( the_arity_of C280 ) /. C286 ) by L499 , L500 , L504 , MSATERM:23;
thus L512: ( C281 . C286 ) = ( C285 . C286 ) by L511 , L510 , L505 , L508;
end;
thus L513: thesis by L502 , L483 , L494 , L499 , L481 , L500 , FINSEQ_1:13;
end;
thus L514: D96 is_homomorphism ( FreeMSA ( C277 * C278 ) ) , D95 by L478 , L418;
let C287 being set;
let C288 being Function;
assume L515: C287 in ( dom D96 );
reconsider D109 = C287 as (SortSymbol of C275) by L515 , PARTFUN1:def 2;
assume L516: ( D96 . C287 ) = C288;
L517: ( dom C288 ) = ( dom ( D99 . D109 ) ) by L516
.= ( ( FreeSort ( C277 * C278 ) ) . D109 ) by L477 , FUNCT_2:def 1
.= ( FreeSort (( C277 * C278 ) , D109) ) by MSAFREE:def 11;
let C289 , C290 being set;
assume L518: (C289 in ( dom C288 ) & C290 in ( dom C288 ));
L519: ( FreeSort (( C277 * C278 ) , D109) ) c= ( C275 -Terms ( C277 * C278 ) ) by MSATERM:12;
reconsider D110 = C289 , D111 = C290 as (Term of C275 , ( C277 * C278 )) by L519 , L517 , L518;
L520: (for B265 being (SortSymbol of C275) holds (for B266 being (Element of ( ( C277 * C278 ) . B265 )) holds S4[ ( root-tree [ B266 , B265 ] ) ]))
proof
let C291 being (SortSymbol of C275);
let C292 being (Element of ( ( C277 * C278 ) . C291 ));
reconsider D112 = ( root-tree [ C292 , C291 ] ) as (Term of C275 , ( C277 * C278 )) by MSATERM:4;
take D112;
thus L521: D112 = ( root-tree [ C292 , C291 ] );
let C293 being (Term of C275 , ( C277 * C278 ));
assume that
L522: ( the_sort_of D112 ) = ( the_sort_of C293 )
and
L523: ( ( D96 . ( the_sort_of D112 ) ) . D112 ) = ( ( D96 . ( the_sort_of D112 ) ) . C293 );
L524: ( the_sort_of D112 ) = C291 by MSATERM:14;
L525: ( ( D96 . C291 ) . ( root-tree [ C292 , C291 ] ) ) = ( root-tree [ C292 , ( C278 . C291 ) ] ) by L478 , L418;
L526:
now
assume L527: ( C293 . ( {} ) ) in [: (the carrier' of C275) , { (the carrier of C275) } :];
L528: C293 is (CompoundTerm of C275 , ( C277 * C278 )) by L527 , MSATERM:def 6;
L529: (( ( root-tree [ C292 , ( C278 . C291 ) ] ) . ( {} ) ) = [ C292 , ( C278 . C291 ) ] & ( root-tree [ C292 , ( C278 . C291 ) ] ) is (CompoundTerm of C276 , C277)) by L528 , L478 , L522 , L523 , L525 , L524 , L450 , TREES_4:3;
L530: [ C292 , ( C278 . C291 ) ] in [: (the carrier' of C276) , { (the carrier of C276) } :] by L529 , MSATERM:def 6;
L531: ( C278 . C291 ) = (the carrier of C276) by L530 , ZFMISC_1:106;
L532: ( C278 . C291 ) in (the carrier of C276);
thus L533: contradiction by L532 , L531;
end;
consider C294 being (SortSymbol of C275), C295 being (Element of ( ( C277 * C278 ) . C294 )) such that L534: ( C293 . ( {} ) ) = [ C295 , C294 ] by L526 , MSATERM:2;
L535: C293 = ( root-tree [ C295 , C294 ] ) by L534 , MSATERM:5;
L536: C291 = C294 by L535 , L522 , L524 , MSATERM:14;
L537: ( ( D96 . C291 ) . C293 ) = ( root-tree [ C295 , ( C278 . C291 ) ] ) by L536 , L478 , L535 , L418;
L538: [ C292 , ( C278 . C291 ) ] = [ C295 , ( C278 . C291 ) ] by L537 , L523 , L525 , L524 , TREES_4:4;
thus L539: thesis by L538 , L535 , L536 , XTUPLE_0:1;
end;
L540: (for B267 being (Term of C275 , ( C277 * C278 )) holds S4[ B267 ]) from MSATERM:sch 1(L520 , L479);
L541: S4[ D110 ] by L540;
L542: (( the_sort_of D110 ) = D109 & ( the_sort_of D111 ) = D109) by L517 , L518 , MSATERM:def 5;
thus L543: thesis by L542 , L516 , L541;
end;
theorem
L544: (for B268 being non  void non  empty ManySortedSign holds (for B269 being  non-empty (ManySortedSet of (the carrier of B268)) holds ( hom (( id (the carrier of B268) ) , ( id (the carrier' of B268) ) , B269 , B268 , B268) ) = ( id (the Sorts of ( FreeMSA B269 )) )))
proof
let C296 being non  void non  empty ManySortedSign;
let C297 being  non-empty (ManySortedSet of (the carrier of C296));
set D113 = ( id (the carrier of C296) );
set D114 = ( hom (D113 , ( id (the carrier' of C296) ) , C297 , C296 , C296) );
set D115 = ( id (the Sorts of ( FreeMSA C297 )) );
set D116 = ( id (the carrier' of C296) );
L545: D113 , D116 form_morphism_between C296 , C296 by PUA2MSS1:28;
L546: ( dom C297 ) = (the carrier of C296) by PARTFUN1:def 2;
L547: ( C297 * D113 ) = C297 by L546 , RELAT_1:52;
L548: ( ( FreeMSA C297 ) | (C296 , D113 , D116) ) = ( FreeMSA C297 ) by L242;
L549:
now
let C298 being set;
assume L550: C298 in (the carrier of C296);
reconsider D117 = C298 as (SortSymbol of C296) by L550;
L551: ( FreeGen C297 ) c= (the Sorts of ( FreeMSA C297 )) by PBOOLE:def 18;
L552: ( ( FreeGen C297 ) . D117 ) c= ( (the Sorts of ( FreeMSA C297 )) . D117 ) by L551 , PBOOLE:def 2;
L553: ( ( D115 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) is (Function of ( ( FreeGen C297 ) . D117 ) , ( (the Sorts of ( FreeMSA C297 )) . D117 )) by L552 , FUNCT_2:32;
L554: ( dom ( ( D115 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) ) = ( ( FreeGen C297 ) . D117 ) by L553 , FUNCT_2:def 1;
L555:
now
let C299 being set;
assume L556: C299 in ( ( FreeGen C297 ) . D117 );
reconsider D118 = C299 as (Element of ( FreeMSA C297 ) , D117) by L556 , L552;
L557: D118 in ( FreeGen (D117 , C297) ) by L556 , MSAFREE:def 16;
consider C300 being set such that L558: C300 in ( C297 . D117 ) and L559: D118 = ( root-tree [ C300 , D117 ] ) by L557 , MSAFREE:def 15;
thus L560: ( ( ( D115 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) . C299 ) = ( ( D115 . D117 ) . D118 ) by L556 , FUNCT_1:49
.= ( ( id ( (the Sorts of ( FreeMSA C297 )) . D117 ) ) . D118 ) by MSUALG_3:def 1
.= D118 by FUNCT_1:18
.= ( root-tree [ C300 , ( D113 . D117 ) ] ) by L559 , FUNCT_1:18
.= ( ( D114 . D117 ) . D118 ) by L545 , L547 , L558 , L559 , L418
.= ( ( ( D114 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) . C299 ) by L556 , FUNCT_1:49;
end;
L561: ( ( D114 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) is (Function of ( ( FreeGen C297 ) . D117 ) , ( (the Sorts of ( FreeMSA C297 )) . D117 )) by L547 , L548 , L552 , FUNCT_2:32;
L562: ( dom ( ( D114 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) ) = ( ( FreeGen C297 ) . D117 ) by L561 , FUNCT_2:def 1;
L563: (( ( D115 || ( FreeGen C297 ) ) . D117 ) = ( ( D115 . D117 ) | ( ( FreeGen C297 ) . D117 ) ) & ( ( D114 || ( FreeGen ( C297 * D113 ) ) ) . D117 ) = ( ( D114 . D117 ) | ( ( FreeGen ( C297 * D113 ) ) . D117 ) )) by MSAFREE:def 1;
thus L564: ( ( D115 || ( FreeGen C297 ) ) . C298 ) = ( ( D114 || ( FreeGen ( C297 * D113 ) ) ) . C298 ) by L563 , L547 , L554 , L562 , L555 , FUNCT_1:2;
end;
L565: (D115 is_homomorphism ( FreeMSA C297 ) , ( FreeMSA C297 ) & D114 is_homomorphism ( FreeMSA ( C297 * D113 ) ) , ( ( FreeMSA C297 ) | (C296 , D113 , D116) )) by L545 , L418 , MSUALG_3:9;
thus L566: thesis by L565 , L547 , L548 , L549 , EXTENS_1:19 , PBOOLE:3;
end;
theorem
L567: (for B270 , B271 , B272 being non  void non  empty ManySortedSign holds (for B273 being  non-empty (ManySortedSet of (the carrier of B272)) holds (for B274 being (Function of (the carrier of B270) , (the carrier of B271)) holds (for B275 being Function holds (B274 , B275 form_morphism_between B270 , B271 implies (for B276 being (Function of (the carrier of B271) , (the carrier of B272)) holds (for B277 being Function holds (B276 , B277 form_morphism_between B271 , B272 implies ( hom (( B276 * B274 ) , ( B277 * B275 ) , B273 , B270 , B272) ) = ( ( ( hom (B276 , B277 , B273 , B271 , B272) ) * B274 ) ** ( hom (B274 , B275 , ( B273 * B276 ) , B270 , B271) ) )))))))))
proof
let C301 , C302 , C303 being non  void non  empty ManySortedSign;
let C304 being  non-empty (ManySortedSet of (the carrier of C303));
let C305 being (Function of (the carrier of C301) , (the carrier of C302));
let C306 being Function;
assume that
L568: C305 , C306 form_morphism_between C301 , C302;
let C307 being (Function of (the carrier of C302) , (the carrier of C303));
let C308 being Function;
set D119 = ( C307 * C305 );
set D120 = ( C308 * C306 );
assume L569: C307 , C308 form_morphism_between C302 , C303;
reconsider D121 = ( ( FreeMSA C304 ) | (C301 , D119 , D120) ) , D122 = ( ( FreeMSA ( C304 * C307 ) ) | (C301 , C305 , C306) ) as  non-empty MSAlgebra over C301 by L569 , L568 , L222 , PUA2MSS1:29;
L570: ( hom (C307 , C308 , C304 , C302 , C303) ) is_homomorphism ( FreeMSA ( C304 * C307 ) ) , ( ( FreeMSA C304 ) | (C302 , C307 , C308) ) by L569 , L418;
L571: (the Sorts of ( FreeMSA ( C304 * C307 ) )) is_transformable_to (the Sorts of ( ( FreeMSA C304 ) | (C302 , C307 , C308) ))
proof
let C309 being set;
assume L572: C309 in (the carrier of C302);
reconsider D123 = C309 as (SortSymbol of C302) by L572;
L573: ( (the Sorts of ( ( FreeMSA C304 ) | (C302 , C307 , C308) )) . D123 ) = ( ( (the Sorts of ( FreeMSA C304 )) * C307 ) . D123 ) by L569 , L199;
thus L574: thesis by L573;
end;
L575: ( ( FreeMSA C304 ) | (C301 , D119 , D120) ) = ( ( ( FreeMSA C304 ) | (C302 , C307 , C308) ) | (C301 , C305 , C306) ) by L568 , L569 , L250;
consider C310 being (ManySortedFunction of D122 , D121) such that L576: C310 = ( ( hom (C307 , C308 , C304 , C302 , C303) ) * C305 ) and L577: C310 is_homomorphism D122 , D121 by L575 , L568 , L570 , L571 , L303;
reconsider D124 = ( hom (C305 , C306 , ( C304 * C307 ) , C301 , C302) ) as (ManySortedFunction of ( FreeMSA ( C304 * D119 ) ) , D122) by RELAT_1:36;
reconsider D125 = ( C310 ** D124 ) as (ManySortedFunction of ( FreeMSA ( C304 * D119 ) ) , ( ( FreeMSA C304 ) | (C301 , D119 , D120) ));
L578: ( C304 * D119 ) = ( ( C304 * C307 ) * C305 ) by RELAT_1:36;
L579:
now
let C311 being (SortSymbol of C301);
let C312 being (Element of ( ( C304 * D119 ) . C311 ));
reconsider D126 = ( root-tree [ C312 , C311 ] ) as (Term of C301 , ( C304 * D119 )) by MSATERM:4;
L580: ( FreeMSA ( C304 * D119 ) ) = MSAlgebra (# ( FreeSort ( C304 * D119 ) ) , ( FreeOper ( C304 * D119 ) ) #) by MSAFREE:def 14;
L581: (( the_sort_of D126 ) = C311 & ( ( FreeSort ( C304 * D119 ) ) . C311 ) = ( FreeSort (( C304 * D119 ) , C311) )) by MSAFREE:def 11 , MSATERM:14;
L582: ( root-tree [ C312 , C311 ] ) in ( (the Sorts of ( FreeMSA ( C304 * D119 ) )) . C311 ) by L581 , L580 , MSATERM:def 5;
L583: ( ( C304 * D119 ) . C311 ) = ( ( C304 * C307 ) . ( C305 . C311 ) ) by L578 , FUNCT_2:15;
L584: ( ( D125 . C311 ) . ( root-tree [ C312 , C311 ] ) ) = ( ( ( C310 . C311 ) * ( ( hom (C305 , C306 , ( C304 * C307 ) , C301 , C302) ) . C311 ) ) . ( root-tree [ C312 , C311 ] ) ) by MSUALG_3:2
.= ( ( C310 . C311 ) . ( ( ( hom (C305 , C306 , ( C304 * C307 ) , C301 , C302) ) . C311 ) . ( root-tree [ C312 , C311 ] ) ) ) by L578 , L582 , FUNCT_2:15
.= ( ( C310 . C311 ) . ( root-tree [ C312 , ( C305 . C311 ) ] ) ) by L568 , L578 , L418;
thus L585: ( ( D125 . C311 ) . ( root-tree [ C312 , C311 ] ) ) = ( ( ( hom (C307 , C308 , C304 , C302 , C303) ) . ( C305 . C311 ) ) . ( root-tree [ C312 , ( C305 . C311 ) ] ) ) by L584 , L576 , FUNCT_2:15
.= ( root-tree [ C312 , ( C307 . ( C305 . C311 ) ) ] ) by L569 , L583 , L418
.= ( root-tree [ C312 , ( D119 . C311 ) ] ) by FUNCT_2:15;
end;
L586: D119 , D120 form_morphism_between C301 , C303 by L568 , L569 , PUA2MSS1:29;
L587: ( hom (C305 , C306 , ( C304 * C307 ) , C301 , C302) ) is_homomorphism ( FreeMSA ( ( C304 * C307 ) * C305 ) ) , ( ( FreeMSA ( C304 * C307 ) ) | (C301 , C305 , C306) ) by L568 , L418;
L588: ( C310 ** D124 ) is_homomorphism ( FreeMSA ( C304 * D119 ) ) , D121 by L587 , L577 , L578 , MSUALG_3:10;
thus L589: thesis by L588 , L586 , L576 , L579 , L418;
end;
