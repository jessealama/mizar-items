:: The Subformula Tree of a Formula of the First Order Language
::  by Oleg Okhotnikov
::
:: Received October 2, 1995
:: Copyright (c) 1995-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, FINSEQ_1, RELAT_1, TREES_1, XBOOLE_0, ARYTM_3,
      XXREAL_0, ORDINAL4, CARD_1, FUNCT_1, TARSKI, TREES_2, TREES_9, ORDINAL1,
      NAT_1, FINSET_1, QC_LANG1, ZF_LANG, CLASSES2, TREES_4, QC_LANG4;
 notations TARSKI, XBOOLE_0,
      XTUPLE_0, SUBSET_1, CARD_1, NUMBERS, XCMPLX_0, ORDINAL1,
      NAT_1, RELAT_1, FUNCT_1, FUNCT_2, BINOP_1, FINSET_1, FINSEQ_1, FINSEQ_4,
      TREES_1, TREES_2, TREES_4, TREES_9, QC_LANG1, QC_LANG2, XXREAL_0;
 constructors BINOP_1, XXREAL_0, XREAL_0, NAT_1, FINSEQ_4, TREES_4, TREES_9,
      QC_LANG2, RELSET_1, XTUPLE_0;
 registrations SUBSET_1, ORDINAL1, RELSET_1, FINSET_1, XREAL_0, NAT_1,
      FINSEQ_1, TREES_1, TREES_2, TREES_A, TREES_9, CARD_1, RELAT_1, XTUPLE_0;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, XBOOLE_0, TREES_2, TREES_4, BINOP_1, XTUPLE_0;
 theorems TARSKI, NAT_1, RELAT_1, FUNCT_1, FINSEQ_1, TREES_1, TREES_2, TREES_9,
      GRFUNC_1, QC_LANG1, QC_LANG2, XBOOLE_0, XBOOLE_1, FINSEQ_6, XREAL_1,
      XXREAL_0, ORDINAL1;
 schemes NAT_1, TREES_2, FINSEQ_1, TREES_9;

begin
theorem
L1: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (R5 is_subformula_of R6 implies ( len ( @ R5 ) ) <= ( len ( @ R6 ) )))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
assume L2: R5 is_subformula_of R6;
per cases ;
suppose L3: R5 = R6;

thus L4: thesis by L3;
end;
suppose L5: R5 <> R6;

L6: R5 is_proper_subformula_of R6 by L5 , L2 , QC_LANG2:def 21;
thus L7: thesis by L6 , QC_LANG2:54;
end;
end;
theorem
L9: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds ((R5 is_subformula_of R6 & ( len ( @ R5 ) ) = ( len ( @ R6 ) )) implies R5 = R6))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
assume that
L10: R5 is_subformula_of R6
and
L11: ( len ( @ R5 ) ) = ( len ( @ R6 ) );
L12:
now
assume L13: R5 <> R6;
L14: R5 is_proper_subformula_of R6 by L13 , L10 , QC_LANG2:def 21;
thus L15: contradiction by L14 , L11 , QC_LANG2:54;
end;
thus L16: thesis by L12;
end;
definition
let R1 being QC-alphabet;
let C1 being (Element of ( QC-WFF R1 ));
func list_of_immediate_constituents C1 -> (FinSequence of ( QC-WFF R1 )) equals 
:L17: ( <*> ( QC-WFF R1 ) ) if (C1 = ( VERUM R1 ) or C1 is  atomic) , <* ( the_argument_of C1 ) *> if C1 is  negative , <* ( the_left_argument_of C1 ) , ( the_right_argument_of C1 ) *> if C1 is  conjunctive otherwise <* ( the_scope_of C1 ) *>;
coherence;
consistency by QC_LANG1:20;
end;
theorem
L19: (for R1 being QC-alphabet holds (for R3 being (Element of ( NAT )) holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds ((R3 in ( dom ( list_of_immediate_constituents R5 ) ) & R6 = ( ( list_of_immediate_constituents R5 ) . R3 )) implies R6 is_immediate_constituent_of R5)))))
proof
let R1 being QC-alphabet;
let R3 being (Element of ( NAT ));
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
assume that
L20: R3 in ( dom ( list_of_immediate_constituents R5 ) )
and
L21: R6 = ( ( list_of_immediate_constituents R5 ) . R3 );
L22: ( list_of_immediate_constituents R5 ) <> ( <*> ( QC-WFF R1 ) ) by L20;
L23: (R5 <> ( VERUM R1 ) & (not R5 is  atomic)) by L17 , L22;
per cases  by L23 , QC_LANG1:9;
suppose L24: R5 is  negative;

L25: ( list_of_immediate_constituents R5 ) = <* ( the_argument_of R5 ) *> by L24 , L17;
L26: R3 in ( Seg 1 ) by L25 , L20 , FINSEQ_1:def 8;
L27: R3 = 1 by L26 , FINSEQ_1:2 , TARSKI:def 1;
L28: R6 = ( the_argument_of R5 ) by L27 , L21 , L25 , FINSEQ_1:def 8;
thus L29: thesis by L28 , L24 , QC_LANG2:48;
end;
suppose L30: R5 is  universal;

L31: (not R5 is  conjunctive) by L30 , QC_LANG1:20;
L32: ((not R5 is  atomic) & (not R5 is  negative)) by L30 , QC_LANG1:20;
L33: ( list_of_immediate_constituents R5 ) = <* ( the_scope_of R5 ) *> by L32 , L31 , L17 , L23;
L34: R3 in ( Seg 1 ) by L33 , L20 , FINSEQ_1:def 8;
L35: R3 = 1 by L34 , FINSEQ_1:2 , TARSKI:def 1;
L36: R6 = ( the_scope_of R5 ) by L35 , L21 , L33 , FINSEQ_1:def 8;
thus L37: thesis by L36 , L30 , QC_LANG2:50;
end;
suppose L38: R5 is  conjunctive;

L39: ( <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> . 2 ) = ( the_right_argument_of R5 ) by FINSEQ_1:44;
L40: ( <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> . 1 ) = ( the_left_argument_of R5 ) by FINSEQ_1:44;
L41: ( list_of_immediate_constituents R5 ) = <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> by L38 , L17;
L42: ( len <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> ) = 2 by FINSEQ_1:44;
L43: R3 in { 1 , 2 } by L42 , L20 , L41 , FINSEQ_1:2 , FINSEQ_1:def 3;
L44:
now
per cases  by L43 , TARSKI:def 2;
suppose L45: R3 = 1;

thus L46: thesis by L45 , L21 , L38 , L41 , L40 , QC_LANG2:49;
end;
suppose L47: R3 = 2;

thus L48: thesis by L47 , L21 , L38 , L41 , L39 , QC_LANG2:49;
end;
end;
thus L50: thesis by L44;
end;
suppose L51: R5 is  universal;

L52: (not R5 is  conjunctive) by L51 , QC_LANG1:20;
L53: ((not R5 is  atomic) & (not R5 is  negative)) by L51 , QC_LANG1:20;
L54: ( list_of_immediate_constituents R5 ) = <* ( the_scope_of R5 ) *> by L53 , L52 , L17 , L23;
L55: R3 in ( Seg 1 ) by L54 , L20 , FINSEQ_1:def 8;
L56: R3 = 1 by L55 , FINSEQ_1:2 , TARSKI:def 1;
L57: R6 = ( the_scope_of R5 ) by L56 , L21 , L54 , FINSEQ_1:def 8;
thus L58: thesis by L57 , L51 , QC_LANG2:50;
end;
end;
theorem
L60: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds ( rng ( list_of_immediate_constituents R5 ) ) = { B1 where B1 is (Element of ( QC-WFF R1 )) : B1 is_immediate_constituent_of R5 }))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
thus L61: ( rng ( list_of_immediate_constituents R5 ) ) c= { B2 where B2 is (Element of ( QC-WFF R1 )) : B2 is_immediate_constituent_of R5 }
proof
let C2 being set;
assume L62: C2 in ( rng ( list_of_immediate_constituents R5 ) );
L63: ( rng ( list_of_immediate_constituents R5 ) ) c= ( QC-WFF R1 ) by FINSEQ_1:def 4;
reconsider D1 = C2 as (Element of ( QC-WFF R1 )) by L63 , L62;
L64: (ex B3 being set st (B3 in ( dom ( list_of_immediate_constituents R5 ) ) & C2 = ( ( list_of_immediate_constituents R5 ) . B3 ))) by L62 , FUNCT_1:def 3;
L65: D1 is_immediate_constituent_of R5 by L64 , L19;
thus L66: thesis by L65;
end;

thus L67: { B4 where B4 is (Element of ( QC-WFF R1 )) : B4 is_immediate_constituent_of R5 } c= ( rng ( list_of_immediate_constituents R5 ) )
proof
let C3 being set;
assume L68: C3 in { B5 where B5 is (Element of ( QC-WFF R1 )) : B5 is_immediate_constituent_of R5 };
consider R6 being (Element of ( QC-WFF R1 )) such that L69: C3 = R6 and L70: R6 is_immediate_constituent_of R5 by L68;
L71: (ex R2 being (Element of ( NAT )) st (R2 in ( dom ( list_of_immediate_constituents R5 ) ) & R6 = ( ( list_of_immediate_constituents R5 ) . R2 )))
proof
L72: R5 <> ( VERUM R1 ) by L70 , QC_LANG2:41;
per cases  by L70 , L72 , QC_LANG1:9 , QC_LANG2:47;
suppose L73: R5 is  negative;

L74: (( list_of_immediate_constituents R5 ) = <* ( the_argument_of R5 ) *> & R6 = ( the_argument_of R5 )) by L73 , L70 , L17 , QC_LANG2:48;
consider R2 being (Element of ( NAT )) such that L75: R2 = 1;
L76: (( dom <* ( the_argument_of R5 ) *> ) = ( Seg 1 ) & ( <* ( the_argument_of R5 ) *> . R2 ) = ( the_argument_of R5 )) by L75 , FINSEQ_1:def 8;
thus L77: thesis by L76 , L75 , L74 , FINSEQ_1:3;
end;
suppose L78: R5 is  conjunctive;

L79: ( <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> . 2 ) = ( the_right_argument_of R5 ) by FINSEQ_1:44;
L80: ( len <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> ) = 2 by FINSEQ_1:44;
L81: ( dom <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> ) = ( Seg 2 ) by L80 , FINSEQ_1:def 3;
L82: ( list_of_immediate_constituents R5 ) = <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> by L78 , L17;
L83: ( <* ( the_left_argument_of R5 ) , ( the_right_argument_of R5 ) *> . 1 ) = ( the_left_argument_of R5 ) by FINSEQ_1:44;
L84:
now
per cases  by L70 , L78 , QC_LANG2:49;
suppose L85: R6 = ( the_left_argument_of R5 );

L86: 1 in { 1 , 2 } by TARSKI:def 2;
thus L87: thesis by L86 , L82 , L83 , L81 , L85 , FINSEQ_1:2;
end;
suppose L88: R6 = ( the_right_argument_of R5 );

thus L89: thesis by L88 , L82 , L79 , L81 , FINSEQ_1:3;
end;
end;
thus L91: thesis by L84;
end;
suppose L92: R5 is  universal;

L93: (not R5 is  conjunctive) by L92 , QC_LANG1:20;
L94: ((not R5 is  atomic) & (not R5 is  negative)) by L92 , QC_LANG1:20;
L95: ( list_of_immediate_constituents R5 ) = <* ( the_scope_of R5 ) *> by L94 , L93 , L17 , L72;
consider R2 being (Element of ( NAT )) such that L96: R2 = 1;
L97: R6 = ( the_scope_of R5 ) by L70 , L92 , QC_LANG2:50;
L98: (( dom <* ( the_scope_of R5 ) *> ) = ( Seg 1 ) & ( <* ( the_scope_of R5 ) *> . R2 ) = ( the_scope_of R5 )) by L96 , FINSEQ_1:def 8;
thus L99: thesis by L98 , L95 , L96 , L97 , FINSEQ_1:3;
end;
end;
thus L101: thesis by L71 , L69 , FUNCT_1:def 3;
end;

end;
definition
let R1 being QC-alphabet;
let C4 being (Element of ( QC-WFF R1 ));
func tree_of_subformulae C4 ->  finite (DecoratedTree of ( QC-WFF R1 )) means 
:L68: (( it . ( {} ) ) = C4 & (for B6 being (Element of ( dom it )) holds ( succ (it , B6) ) = ( list_of_immediate_constituents ( it . B6 ) )));
existence
proof
deffunc H1((Element of ( QC-WFF R1 ))) = ( len ( @ $1 ) );
deffunc H2((Element of ( QC-WFF R1 ))) = ( list_of_immediate_constituents $1 );
consider C5 being  finite-branching (DecoratedTree of ( QC-WFF R1 )) such that L69: (( C5 . ( {} ) ) = C4 & (for B7 being (Element of ( dom C5 )) holds (for B8 being (Element of ( QC-WFF R1 )) holds (B8 = ( C5 . B7 ) implies ( succ (C5 , B7) ) = H2(B8))))) from TREES_9:sch 2;
L70: (for B9 , B10 being (Element of ( dom C5 )) holds (for B11 being (Element of ( QC-WFF R1 )) holds ((B10 in ( succ B9 ) & B11 = ( C5 . B10 )) implies H1(B11) < H1(( C5 . B9 )))))
proof
let C6 , C7 being (Element of ( dom C5 ));
let C8 being (Element of ( QC-WFF R1 ));
assume that
L71: C7 in ( succ C6 )
and
L72: C8 = ( C5 . C7 );
consider R2 being (Element of ( NAT )) such that L73: C7 = ( C6 ^ <* R2 *> ) and L74: ( C6 ^ <* R2 *> ) in ( dom C5 ) by L71;
L75: ( C5 . C7 ) = ( ( succ (C5 , C6) ) . ( R2 + 1 ) ) by L73 , TREES_9:40
.= ( ( list_of_immediate_constituents ( C5 . C6 ) ) . ( R2 + 1 ) ) by L69;
L76: ( dom ( list_of_immediate_constituents ( C5 . C6 ) ) ) = ( dom ( succ (C5 , C6) ) ) by L69
.= ( dom ( C6 succ ) ) by TREES_9:38;
L77: ( R2 + 1 ) in ( dom ( list_of_immediate_constituents ( C5 . C6 ) ) ) by L76 , L73 , TREES_9:39;
thus L78: thesis by L77 , L72 , L75 , L19 , QC_LANG2:51;
end;
L79: C5 is  finite from TREES_9:sch 3(L70);
reconsider D2 = C5 as  finite (DecoratedTree of ( QC-WFF R1 )) by L79;
take D2;
thus L80: thesis by L69;
end;
uniqueness
proof
let C9 , C10 being  finite (DecoratedTree of ( QC-WFF R1 ));
L81: (for B12 , B13 being  finite (DecoratedTree of ( QC-WFF R1 )) holds ((( B12 . ( {} ) ) = C4 & (for B14 being (Element of ( dom B12 )) holds ( succ (B12 , B14) ) = ( list_of_immediate_constituents ( B12 . B14 ) )) & ( B13 . ( {} ) ) = C4 & (for B15 being (Element of ( dom B13 )) holds ( succ (B13 , B15) ) = ( list_of_immediate_constituents ( B13 . B15 ) ))) implies B12 c= B13))
proof
let C11 , C12 being  finite (DecoratedTree of ( QC-WFF R1 ));
assume that
L82: ( C11 . ( {} ) ) = C4
and
L83: (for B16 being (Element of ( dom C11 )) holds ( succ (C11 , B16) ) = ( list_of_immediate_constituents ( C11 . B16 ) ))
and
L84: ( C12 . ( {} ) ) = C4
and
L85: (for B17 being (Element of ( dom C12 )) holds ( succ (C12 , B17) ) = ( list_of_immediate_constituents ( C12 . B17 ) ));
defpred S1[ set ] means ($1 in ( dom C12 ) & ( C11 . $1 ) = ( C12 . $1 ));
L86: (for B18 being (Element of ( dom C11 )) holds (for R2 being (Element of ( NAT )) holds ((S1[ B18 ] & ( B18 ^ <* R2 *> ) in ( dom C11 )) implies S1[ ( B18 ^ <* R2 *> ) ])))
proof
let C13 being (Element of ( dom C11 ));
let R2 being (Element of ( NAT ));
assume that
L87: S1[ C13 ]
and
L88: ( C13 ^ <* R2 *> ) in ( dom C11 );
reconsider D3 = C13 as (Element of ( dom C12 )) by L87;
L89: ( succ (C11 , C13) ) = ( list_of_immediate_constituents ( C12 . D3 ) ) by L83 , L87
.= ( succ (C12 , D3) ) by L85;
L90: ( C13 ^ <* R2 *> ) in ( succ C13 ) by L88;
L91: R2 < ( card ( succ C13 ) ) by L90 , TREES_9:7;
L92: R2 < ( len ( C13 succ ) ) by L91 , TREES_9:def 5;
L93: R2 < ( len ( succ (C11 , C13) ) ) by L92 , TREES_9:28;
L94: R2 < ( len ( D3 succ ) ) by L93 , L89 , TREES_9:28;
L95: R2 < ( card ( succ D3 ) ) by L94 , TREES_9:def 5;
L96: ( D3 ^ <* R2 *> ) in ( succ D3 ) by L95 , TREES_9:7;
thus L97: ( C13 ^ <* R2 *> ) in ( dom C12 ) by L96;
thus L98: ( C11 . ( C13 ^ <* R2 *> ) ) = ( ( succ (C12 , D3) ) . ( R2 + 1 ) ) by L88 , L89 , TREES_9:40
.= ( C12 . ( C13 ^ <* R2 *> ) ) by L96 , TREES_9:40;
end;
L99: S1[ ( {} ) ] by L82 , L84 , TREES_1:22;
L100: (for B19 being (Element of ( dom C11 )) holds S1[ B19 ]) from TREES_2:sch 1(L99 , L86);
L101: (for B20 being set holds (B20 in ( dom C11 ) implies B20 in ( dom C12 ))) by L100;
L102: ( dom C11 ) c= ( dom C12 ) by L101 , TARSKI:def 3;
L103: (for B21 being set holds (B21 in ( dom C11 ) implies ( C11 . B21 ) = ( C12 . B21 ))) by L100;
thus L104: thesis by L103 , L102 , GRFUNC_1:2;
end;
assume L105: (( C9 . ( {} ) ) = C4 & (for B22 being (Element of ( dom C9 )) holds ( succ (C9 , B22) ) = ( list_of_immediate_constituents ( C9 . B22 ) )) & ( C10 . ( {} ) ) = C4 & (for B23 being (Element of ( dom C10 )) holds ( succ (C10 , B23) ) = ( list_of_immediate_constituents ( C10 . B23 ) )));
L106: (C9 c= C10 & C10 c= C9) by L105 , L81;
thus L107: thesis by L106 , XBOOLE_0:def 10;
end;
end;
theorem
L109: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds R5 in ( rng ( tree_of_subformulae R5 ) )))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
L110: (( ( tree_of_subformulae R5 ) . ( {} ) ) = R5 & ( {} ) in ( dom ( tree_of_subformulae R5 ) )) by L68 , TREES_1:22;
thus L111: thesis by L110 , FUNCT_1:def 3;
end;
theorem
L112: (for R1 being QC-alphabet holds (for R2 being (Element of ( NAT )) holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ) implies (ex R6 being (Element of ( QC-WFF R1 )) st (R6 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) ) & R6 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 ))))))))
proof
let R1 being QC-alphabet;
let R2 being (Element of ( NAT ));
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
L113: ( succ R10 ) = { ( R10 ^ <* R3 *> ) where R3 is (Element of ( NAT )) : ( R10 ^ <* R3 *> ) in ( dom ( tree_of_subformulae R5 ) ) };
assume L114: ( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) );
consider R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L115: R11 = ( R10 ^ <* R2 *> ) by L114;
L116: ( rng ( list_of_immediate_constituents ( ( tree_of_subformulae R5 ) . R10 ) ) ) = { B24 where B24 is (Element of ( QC-WFF R1 )) : B24 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 ) } by L60;
consider R6 being (Element of ( QC-WFF R1 )) such that L117: R6 = ( ( tree_of_subformulae R5 ) . R11 );
L118: R11 in { ( R10 ^ <* R3 *> ) where R3 is (Element of ( NAT )) : ( R10 ^ <* R3 *> ) in ( dom ( tree_of_subformulae R5 ) ) } by L115;
L119: R6 in ( rng ( succ (( tree_of_subformulae R5 ) , R10) ) ) by L118 , L117 , L113 , TREES_9:41;
L120: R6 in ( rng ( list_of_immediate_constituents ( ( tree_of_subformulae R5 ) . R10 ) ) ) by L119 , L68;
thus L121: thesis by L120 , L115 , L117 , L116;
end;
theorem
L122: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R8 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 ) iff (ex R2 being (Element of ( NAT )) st (( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ) & R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) ))))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
L123:
now
set D4 = ( ( tree_of_subformulae R5 ) . R10 );
assume L124: R8 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 );
L125: R8 in { B25 where B25 is (Element of ( QC-WFF R1 )) : B25 is_immediate_constituent_of D4 } by L124;
L126: R8 in ( rng ( list_of_immediate_constituents D4 ) ) by L125 , L60;
L127: ( succ (( tree_of_subformulae R5 ) , R10) ) = ( list_of_immediate_constituents D4 ) by L68;
consider R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L128: R8 = ( ( tree_of_subformulae R5 ) . R11 ) and L129: R11 in ( succ R10 ) by L127 , L126 , TREES_9:42;
L130: (ex R2 being (Element of ( NAT )) st (R11 = ( R10 ^ <* R2 *> ) & ( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ))) by L129;
thus L131: (ex R2 being (Element of ( NAT )) st (( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ) & R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) ))) by L130 , L128;
end;
thus L132: (R8 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 ) implies (ex R2 being (Element of ( NAT )) st (( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ) & R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) )))) by L123;
given R2 being (Element of ( NAT )) such that
L133: ( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) )
and
L134: R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) );

L135: (ex R6 being (Element of ( QC-WFF R1 )) st (R6 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) ) & R6 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 ))) by L133 , L112;
thus L136: thesis by L135 , L134;
end;
theorem
L137: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds ((R6 in ( rng ( tree_of_subformulae R5 ) ) & R8 is_immediate_constituent_of R6) implies R8 in ( rng ( tree_of_subformulae R5 ) ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
assume that
L138: R6 in ( rng ( tree_of_subformulae R5 ) )
and
L139: R8 is_immediate_constituent_of R6;
consider C14 being set such that L140: C14 in ( dom ( tree_of_subformulae R5 ) ) and L141: R6 = ( ( tree_of_subformulae R5 ) . C14 ) by L138 , FUNCT_1:def 3;
consider R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L142: R10 = C14 by L140;
L143: (ex R2 being (Element of ( NAT )) st (( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ) & R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R2 *> ) ))) by L139 , L141 , L142 , L122;
thus L144: thesis by L143 , FUNCT_1:def 3;
end;
theorem
L145: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds ((R6 in ( rng ( tree_of_subformulae R5 ) ) & R8 is_subformula_of R6) implies R8 in ( rng ( tree_of_subformulae R5 ) ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
assume that
L146: R6 in ( rng ( tree_of_subformulae R5 ) )
and
L147: R8 is_subformula_of R6;
consider C15 being (Element of ( NAT )), C16 being FinSequence such that L148: 1 <= C15 and L149: ( len C16 ) = C15 and L150: ( C16 . 1 ) = R8 and L151: ( C16 . C15 ) = R6 and L152: (for R3 being (Element of ( NAT )) holds ((1 <= R3 & R3 < C15) implies (ex B26 , B27 being (Element of ( QC-WFF R1 )) st (( C16 . R3 ) = B26 & ( C16 . ( R3 + 1 ) ) = B27 & B26 is_immediate_constituent_of B27)))) by L147 , QC_LANG2:def 20;
defpred S2[ Nat ] means (ex R9 being (Element of ( QC-WFF R1 )) st (R9 = ( C16 . ( $1 + 1 ) ) & ( $1 + 1 ) in ( dom C16 ) & R9 in ( rng ( tree_of_subformulae R5 ) )));
L153: (for B28 being Nat holds ((B28 <> ( 0 ) & S2[ B28 ]) implies (ex B29 being Nat st (B29 < B28 & S2[ B29 ]))))
proof
L154: ( Seg C15 ) = ( dom C16 ) by L149 , FINSEQ_1:def 3;
let C17 being Nat;
assume that
L155: C17 <> ( 0 )
and
L156: S2[ C17 ];
consider C18 being Nat such that L157: ( C18 + 1 ) = C17 by L155 , NAT_1:6;
L158: ( 0 ) < C17 by L155 , NAT_1:3;
L159: ( ( 0 ) + 1 ) <= C17 by L158 , NAT_1:13;
L160: ( Seg ( len C16 ) ) = ( dom C16 ) by FINSEQ_1:def 3;
L161: ( C17 + 1 ) <= C15 by L160 , L149 , L156 , FINSEQ_1:1;
L162: (C17 in ( NAT ) & C17 < C15) by L161 , NAT_1:13 , ORDINAL1:def 12;
L163: (ex B30 , B31 being (Element of ( QC-WFF R1 )) st (( C16 . C17 ) = B30 & ( C16 . ( C17 + 1 ) ) = B31 & B30 is_immediate_constituent_of B31)) by L162 , L152 , L159;
L164: C17 <= C15 by L161 , NAT_1:13;
L165: C17 in ( dom C16 ) by L164 , L159 , L154 , FINSEQ_1:1;
L166: C18 < C17 by L157 , NAT_1:13;
thus L167: thesis by L166 , L156 , L157 , L163 , L165 , L137;
end;
L168: (ex B32 being Nat st S2[ B32 ])
proof
L169: ( 0 ) <> C15 by L148;
L170: (ex B33 being Nat st ( B33 + 1 ) = C15) by L169 , NAT_1:6;
L171: ( Seg C15 ) = ( dom C16 ) by L149 , FINSEQ_1:def 3;
thus L172: thesis by L171 , L146 , L151 , L170 , FINSEQ_1:3;
end;
L173: S2[ ( 0 ) ] from NAT_1:sch 7(L168 , L153);
thus L174: thesis by L173 , L150;
end;
theorem
L175: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (R6 in ( rng ( tree_of_subformulae R5 ) ) iff R6 is_subformula_of R5))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
L176:
now
set D5 = ( dom ( tree_of_subformulae R5 ) );
defpred S3[ set ] means (ex R8 being (Element of ( QC-WFF R1 )) st (( ( tree_of_subformulae R5 ) . $1 ) = R8 & R8 is_subformula_of R5));
assume L177: R6 in ( rng ( tree_of_subformulae R5 ) );
consider C19 being set such that L178: C19 in ( dom ( tree_of_subformulae R5 ) ) and L179: ( ( tree_of_subformulae R5 ) . C19 ) = R6 by L177 , FUNCT_1:def 3;
reconsider D6 = C19 as (Element of D5) by L178;
L180: (for B34 being (Element of D5) holds (for R2 being (Element of ( NAT )) holds ((S3[ B34 ] & ( B34 ^ <* R2 *> ) in D5) implies S3[ ( B34 ^ <* R2 *> ) ])))
proof
let C20 being (Element of D5);
let R2 being (Element of ( NAT ));
assume that
L181: S3[ C20 ]
and
L182: ( C20 ^ <* R2 *> ) in D5;
L183: ( ( tree_of_subformulae R5 ) . ( C20 ^ <* R2 *> ) ) is (Element of ( QC-WFF R1 )) by L182 , FUNCT_1:102;
consider R9 being (Element of ( QC-WFF R1 )) such that L184: ( ( tree_of_subformulae R5 ) . ( C20 ^ <* R2 *> ) ) = R9 by L183;
consider R8 being (Element of ( QC-WFF R1 )) such that L185: ( ( tree_of_subformulae R5 ) . C20 ) = R8 and L186: R8 is_subformula_of R5 by L181;
L187: (ex R7 being (Element of ( QC-WFF R1 )) st (R7 = ( ( tree_of_subformulae R5 ) . ( C20 ^ <* R2 *> ) ) & R7 is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . C20 ))) by L182 , L112;
L188: R9 is_subformula_of R8 by L187 , L185 , L184 , QC_LANG2:52;
thus L189: thesis by L188 , L186 , L184 , QC_LANG2:57;
end;
L190: S3[ ( {} ) ]
proof
take R5;
thus L191: thesis by L68;
end;
L192: (for B35 being (Element of D5) holds S3[ B35 ]) from TREES_2:sch 1(L190 , L180);
L193: (ex R8 being (Element of ( QC-WFF R1 )) st (( ( tree_of_subformulae R5 ) . D6 ) = R8 & R8 is_subformula_of R5)) by L192;
thus L194: R6 is_subformula_of R5 by L193 , L179;
end;
thus L195: (R6 in ( rng ( tree_of_subformulae R5 ) ) implies R6 is_subformula_of R5) by L176;
assume L196: R6 is_subformula_of R5;
thus L197: thesis by L196 , L109 , L145;
end;
theorem
L198: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds ( rng ( tree_of_subformulae R5 ) ) = ( Subformulae R5 )))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
thus L199: ( rng ( tree_of_subformulae R5 ) ) c= ( Subformulae R5 )
proof
let C21 being set;
assume L200: C21 in ( rng ( tree_of_subformulae R5 ) );
L201: C21 is (Element of ( QC-WFF R1 )) by L200 , RELAT_1:167;
consider R6 being (Element of ( QC-WFF R1 )) such that L202: R6 = C21 by L201;
L203: R6 is_subformula_of R5 by L200 , L202 , L175;
thus L204: thesis by L203 , L202 , QC_LANG2:def 22;
end;

thus L205: ( Subformulae R5 ) c= ( rng ( tree_of_subformulae R5 ) )
proof
let C22 being set;
assume L206: C22 in ( Subformulae R5 );
L207: (ex R6 being (Element of ( QC-WFF R1 )) st (R6 = C22 & R6 is_subformula_of R5)) by L206 , QC_LANG2:def 22;
thus L208: thesis by L207 , L175;
end;

end;
theorem
L206: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R11 in ( succ R10 ) implies ( ( tree_of_subformulae R5 ) . R11 ) is_immediate_constituent_of ( ( tree_of_subformulae R5 ) . R10 ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
assume L207: R11 in ( succ R10 );
L208: (ex R2 being (Element of ( NAT )) st (R11 = ( R10 ^ <* R2 *> ) & ( R10 ^ <* R2 *> ) in ( dom ( tree_of_subformulae R5 ) ))) by L207;
thus L209: thesis by L208 , L122;
end;
theorem
L210: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R10 is_a_prefix_of R11 implies ( ( tree_of_subformulae R5 ) . R11 ) is_subformula_of ( ( tree_of_subformulae R5 ) . R10 ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
assume L211: R10 is_a_prefix_of R11;
consider C23 being FinSequence such that L212: R11 = ( R10 ^ C23 ) by L211 , TREES_1:1;
reconsider D7 = C23 as (FinSequence of ( NAT )) by L212 , FINSEQ_1:36;
consider R2 being (Element of ( NAT )) such that L213: R2 = ( len D7 );
defpred S4[ set , set ] means (ex B36 being (QC-formula of R1) st (ex B37 , B38 being Nat st (ex B39 being FinSequence st (B36 = $2 & B37 = $1 & ( B37 + B38 ) = ( R2 + 1 ) & B39 = ( D7 | ( Seg B38 ) ) & B36 = ( ( tree_of_subformulae R5 ) . ( R10 ^ B39 ) )))));
L214: (for B40 being Nat holds (B40 in ( Seg ( R2 + 1 ) ) implies (ex R13 being set st S4[ B40 , R13 ])))
proof
let C24 being Nat;
assume L215: C24 in ( Seg ( R2 + 1 ) );
L216: C24 <= ( R2 + 1 ) by L215 , FINSEQ_1:1;
consider C25 being Nat such that L217: ( C24 + C25 ) = ( R2 + 1 ) by L216 , NAT_1:10;
reconsider D8 = C25 as (Element of ( NAT )) by ORDINAL1:def 12;
L218: ( D7 | ( Seg D8 ) ) is FinSequence by FINSEQ_1:15;
consider C26 being FinSequence such that L219: C26 = ( D7 | ( Seg D8 ) ) by L218;
L220: ( R10 ^ C26 ) in ( dom ( tree_of_subformulae R5 ) )
proof
L221: (ex B41 being FinSequence st (B41 = ( D7 | ( Seg D8 ) ) & B41 is_a_prefix_of D7)) by TREES_9:32;
thus L222: thesis by L221 , L212 , L219 , FINSEQ_6:13 , TREES_1:20;
end;
reconsider D9 = ( R10 ^ C26 ) as (Element of ( dom ( tree_of_subformulae R5 ) )) by L220;
consider C27 being (QC-formula of R1) such that L223: C27 = ( ( tree_of_subformulae R5 ) . D9 );
take C27;
take C27;
take C24;
take D8;
take C26;
thus L224: thesis by L217 , L219 , L223;
end;
L225: (ex B42 being FinSequence st (( dom B42 ) = ( Seg ( R2 + 1 ) ) & (for B43 being Nat holds (B43 in ( Seg ( R2 + 1 ) ) implies S4[ B43 , ( B42 . B43 ) ])))) from FINSEQ_1:sch 1(L214);
consider C28 being FinSequence such that L226: ( dom C28 ) = ( Seg ( R2 + 1 ) ) and L227: (for B44 being Nat holds (B44 in ( Seg ( R2 + 1 ) ) implies (ex B45 being (QC-formula of R1) st (ex B46 , B47 being Nat st (ex B48 being FinSequence st (B45 = ( C28 . B44 ) & B46 = B44 & ( B46 + B47 ) = ( R2 + 1 ) & B48 = ( D7 | ( Seg B47 ) ) & B45 = ( ( tree_of_subformulae R5 ) . ( R10 ^ B48 ) ))))))) by L225;
L228: ( len C28 ) = ( R2 + 1 ) by L226 , FINSEQ_1:def 3;
L229: (for R3 being (Element of ( NAT )) holds ((1 <= R3 & R3 <= ( R2 + 1 )) implies (ex B49 being (QC-formula of R1) st (ex B50 being Nat st (ex B51 being FinSequence st (B49 = ( C28 . R3 ) & ( R3 + B50 ) = ( R2 + 1 ) & B51 = ( D7 | ( Seg B50 ) ) & B49 = ( ( tree_of_subformulae R5 ) . ( R10 ^ B51 ) )))))))
proof
let R3 being (Element of ( NAT ));
assume L230: (1 <= R3 & R3 <= ( R2 + 1 ));
L231: R3 in ( Seg ( R2 + 1 ) ) by L230 , FINSEQ_1:1;
L232: (ex B52 being (QC-formula of R1) st (ex B53 , B54 being Nat st (ex B55 being FinSequence st (B52 = ( C28 . R3 ) & B53 = R3 & ( B53 + B54 ) = ( R2 + 1 ) & B55 = ( D7 | ( Seg B54 ) ) & B52 = ( ( tree_of_subformulae R5 ) . ( R10 ^ B55 ) ))))) by L231 , L227;
thus L233: thesis by L232;
end;
L234: (for R3 being (Element of ( NAT )) holds ((1 <= R3 & R3 < ( R2 + 1 )) implies (ex B56 , B57 being (Element of ( QC-WFF R1 )) st (( C28 . R3 ) = B56 & ( C28 . ( R3 + 1 ) ) = B57 & B56 is_immediate_constituent_of B57))))
proof
let R3 being (Element of ( NAT ));
assume that
L235: 1 <= R3
and
L236: R3 < ( R2 + 1 );
consider C29 being (QC-formula of R1), C30 being Nat, C31 being FinSequence such that L237: C29 = ( C28 . R3 ) and L238: ( R3 + C30 ) = ( R2 + 1 ) and L239: C31 = ( D7 | ( Seg C30 ) ) and L240: C29 = ( ( tree_of_subformulae R5 ) . ( R10 ^ C31 ) ) by L229 , L235 , L236;
L241: (1 <= ( R3 + 1 ) & ( R3 + 1 ) <= ( R2 + 1 )) by L235 , L236 , NAT_1:13;
consider C32 being (QC-formula of R1), C33 being Nat, C34 being FinSequence such that L242: C32 = ( C28 . ( R3 + 1 ) ) and L243: ( ( R3 + 1 ) + C33 ) = ( R2 + 1 ) and L244: C34 = ( D7 | ( Seg C33 ) ) and L245: C32 = ( ( tree_of_subformulae R5 ) . ( R10 ^ C34 ) ) by L241 , L229;
reconsider D10 = C30 , D11 = C33 as (Element of ( NAT )) by ORDINAL1:def 12;
L246: ( D10 + 1 ) <= ( R2 + 1 ) by L235 , L238 , XREAL_1:6;
L247: ( D11 + 1 ) <= ( len D7 ) by L246 , L213 , L238 , L243 , XREAL_1:6;
consider R4 being (Element of ( NAT )) such that L248: C31 = ( C34 ^ <* R4 *> ) by L247 , L238 , L239 , L243 , L244 , TREES_9:33;
L249: ( R10 ^ C34 ) in ( dom ( tree_of_subformulae R5 ) )
proof
L250: (ex B58 being FinSequence st (B58 = ( D7 | ( Seg D11 ) ) & B58 is_a_prefix_of D7)) by TREES_9:32;
thus L251: thesis by L250 , L212 , L244 , FINSEQ_6:13 , TREES_1:20;
end;
reconsider D12 = ( R10 ^ C34 ) as (Element of ( dom ( tree_of_subformulae R5 ) )) by L249;
L252: ( D12 ^ <* R4 *> ) = ( R10 ^ C31 ) by L248 , FINSEQ_1:32;
L253: ( D12 ^ <* R4 *> ) in ( dom ( tree_of_subformulae R5 ) )
proof
L254: (ex B59 being FinSequence st (B59 = ( D7 | ( Seg D10 ) ) & B59 is_a_prefix_of D7)) by TREES_9:32;
thus L255: thesis by L254 , L212 , L239 , L252 , FINSEQ_6:13 , TREES_1:20;
end;
L256: C29 is_immediate_constituent_of C32 by L253 , L240 , L245 , L252 , L122;
thus L257: thesis by L256 , L237 , L242;
end;
L258: ( 0 ) < ( R2 + 1 ) by NAT_1:3;
L259: ( ( 0 ) + 1 ) <= ( R2 + 1 ) by L258 , NAT_1:13;
consider C35 being (QC-formula of R1), C36 being Nat, C37 being FinSequence such that L260: C35 = ( C28 . 1 ) and L261: ( 1 + C36 ) = ( R2 + 1 ) and L262: C37 = ( D7 | ( Seg C36 ) ) and L263: C35 = ( ( tree_of_subformulae R5 ) . ( R10 ^ C37 ) ) by L259 , L229;
L264: ( C28 . ( R2 + 1 ) ) = ( ( tree_of_subformulae R5 ) . R10 )
proof
consider C38 being (QC-formula of R1), C39 being Nat, C40 being FinSequence such that L265: C38 = ( C28 . ( R2 + 1 ) ) and L266: (( ( R2 + 1 ) + C39 ) = ( R2 + 1 ) & C40 = ( D7 | ( Seg C39 ) )) and L267: C38 = ( ( tree_of_subformulae R5 ) . ( R10 ^ C40 ) ) by L259 , L229;
L268: C40 = ( {} ) by L266;
thus L269: thesis by L268 , L265 , L267 , FINSEQ_1:34;
end;
L270: ( dom D7 ) = ( Seg C36 ) by L213 , L261 , FINSEQ_1:def 3;
L271: R11 = ( R10 ^ C37 ) by L270 , L212 , L262 , RELAT_1:69;
thus L272: thesis by L271 , L259 , L228 , L260 , L263 , L264 , L234 , QC_LANG2:def 20;
end;
theorem
L273: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R10 is_a_proper_prefix_of R11 implies ( len ( @ ( ( tree_of_subformulae R5 ) . R11 ) ) ) < ( len ( @ ( ( tree_of_subformulae R5 ) . R10 ) ) ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D13 = ( ( tree_of_subformulae R5 ) . R10 );
set D14 = ( ( tree_of_subformulae R5 ) . R11 );
assume L274: R10 is_a_proper_prefix_of R11;
L275: R10 is_a_prefix_of R11 by L274 , XBOOLE_0:def 8;
L276:
now
consider C41 being FinSequence such that L277: R11 = ( R10 ^ C41 ) by L275 , TREES_1:1;
reconsider D15 = C41 as (FinSequence of ( NAT )) by L277 , FINSEQ_1:36;
L278: 1 <= ( len D15 )
proof
reconsider D16 = ( {} ) as (Element of ( dom ( tree_of_subformulae R5 ) )) by TREES_1:22;
L279: (D15 <> ( {} ) & D16 is_a_prefix_of D15) by L274 , L277 , FINSEQ_1:34 , XBOOLE_1:2;
L280: D16 is_a_proper_prefix_of D15 by L279 , XBOOLE_0:def 8;
L281: ( len D16 ) = ( 0 );
L282: ( 0 ) < ( len D15 ) by L281 , L280 , TREES_1:6;
L283: ( ( 0 ) + 1 ) <= ( len D15 ) by L282 , NAT_1:13;
thus L284: thesis by L283;
end;
defpred S5[ set , set ] means (ex B60 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (ex B61 being FinSequence st (ex B62 being Nat st (B62 = $1 & B61 = ( D15 | ( Seg B62 ) ) & B60 = ( R10 ^ B61 ) & $2 = ( ( tree_of_subformulae R5 ) . B60 )))));
L285: (for B63 being Nat holds (B63 in ( Seg ( len D15 ) ) implies (ex R13 being set st S5[ B63 , R13 ])))
proof
let C42 being Nat;
assume that
L286: C42 in ( Seg ( len D15 ) );
L287: ( D15 | ( Seg C42 ) ) is FinSequence by FINSEQ_1:15;
consider C43 being FinSequence such that L288: C43 = ( D15 | ( Seg C42 ) ) by L287;
L289: C43 is_a_prefix_of D15 by L286 , L288 , TREES_1:def 1;
L290: ( R10 ^ C43 ) in ( dom ( tree_of_subformulae R5 ) ) by L289 , L277 , FINSEQ_6:13 , TREES_1:20;
consider C44 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L291: C44 = ( R10 ^ C43 ) by L290;
L292: (ex R13 being set st R13 = ( ( tree_of_subformulae R5 ) . C44 ));
thus L293: thesis by L292 , L288 , L291;
end;
L294: (ex B64 being FinSequence st (( dom B64 ) = ( Seg ( len D15 ) ) & (for B65 being Nat holds (B65 in ( Seg ( len D15 ) ) implies S5[ B65 , ( B64 . B65 ) ])))) from FINSEQ_1:sch 1(L285);
consider C45 being FinSequence such that L295: ( dom C45 ) = ( Seg ( len D15 ) ) and L296: (for B66 being Nat holds (B66 in ( Seg ( len D15 ) ) implies (ex B67 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (ex B68 being FinSequence st (ex B69 being Nat st (B69 = B66 & B68 = ( D15 | ( Seg B69 ) ) & B67 = ( R10 ^ B68 ) & ( C45 . B66 ) = ( ( tree_of_subformulae R5 ) . B67 ))))))) by L294;
L297: (for R3 being (Element of ( NAT )) holds ((1 <= R3 & R3 <= ( len D15 )) implies (ex B70 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (ex B71 being FinSequence st (B71 = ( D15 | ( Seg R3 ) ) & B70 = ( R10 ^ B71 ) & ( C45 . R3 ) = ( ( tree_of_subformulae R5 ) . B70 ))))))
proof
let R3 being (Element of ( NAT ));
assume L298: (1 <= R3 & R3 <= ( len D15 ));
L299: R3 in ( Seg ( len D15 ) ) by L298 , FINSEQ_1:1;
L300: (ex B72 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (ex B73 being FinSequence st (ex B74 being Nat st (B74 = R3 & B73 = ( D15 | ( Seg B74 ) ) & B72 = ( R10 ^ B73 ) & ( C45 . R3 ) = ( ( tree_of_subformulae R5 ) . B72 ))))) by L299 , L296;
thus L301: thesis by L300;
end;
consider C46 being (Element of ( dom ( tree_of_subformulae R5 ) )), C47 being FinSequence such that L302: C47 = ( D15 | ( Seg 1 ) ) and L303: C46 = ( R10 ^ C47 ) and L304: ( C45 . 1 ) = ( ( tree_of_subformulae R5 ) . C46 ) by L297 , L278;
set D17 = ( ( tree_of_subformulae R5 ) . C46 );
L305: D17 is_immediate_constituent_of D13
proof
L306: (ex B75 being (Element of ( NAT )) st C47 = <* B75 *>) by L278 , L302 , TREES_9:34;
thus L307: thesis by L306 , L303 , L122;
end;
L308: C47 is_a_prefix_of D15 by L302 , TREES_1:def 1;
L309: C46 is_a_prefix_of R11 by L308 , L277 , L303 , FINSEQ_6:13;
L310: ( len ( @ D14 ) ) <= ( len ( @ D17 ) ) by L309 , L1 , L210;
assume L311: ( len ( @ D14 ) ) = ( len ( @ D13 ) );
thus L312: contradiction by L311 , L310 , L305 , QC_LANG2:51;
end;
L313: ( len ( @ D14 ) ) <= ( len ( @ D13 ) ) by L275 , L1 , L210;
thus L314: thesis by L313 , L276 , XXREAL_0:1;
end;
theorem
L315: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R10 is_a_proper_prefix_of R11 implies ( ( tree_of_subformulae R5 ) . R11 ) <> ( ( tree_of_subformulae R5 ) . R10 ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D18 = ( ( tree_of_subformulae R5 ) . R10 );
set D19 = ( ( tree_of_subformulae R5 ) . R11 );
assume L316: R10 is_a_proper_prefix_of R11;
L317: ( len ( @ D19 ) ) < ( len ( @ D18 ) ) by L316 , L273;
thus L318: thesis by L317;
end;
theorem
L319: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R10 is_a_proper_prefix_of R11 implies ( ( tree_of_subformulae R5 ) . R11 ) is_proper_subformula_of ( ( tree_of_subformulae R5 ) . R10 ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D20 = ( ( tree_of_subformulae R5 ) . R10 );
set D21 = ( ( tree_of_subformulae R5 ) . R11 );
assume L320: R10 is_a_proper_prefix_of R11;
L321: R10 is_a_prefix_of R11 by L320 , XBOOLE_0:def 8;
L322: D21 is_subformula_of D20 by L321 , L210;
L323: D21 <> D20 by L320 , L315;
thus L324: thesis by L323 , L322 , QC_LANG2:def 21;
end;
theorem
L325: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (( ( tree_of_subformulae R5 ) . R10 ) = R5 iff R10 = ( {} )))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
L326:
now
reconsider D22 = ( {} ) as (Element of ( dom ( tree_of_subformulae R5 ) )) by TREES_1:22;
assume L327: ( ( tree_of_subformulae R5 ) . R10 ) = R5;
L328: D22 is_a_prefix_of R10 by XBOOLE_1:2;
assume L329: R10 <> ( {} );
L330: D22 is_a_proper_prefix_of R10 by L329 , L328 , XBOOLE_0:def 8;
L331: ( ( tree_of_subformulae R5 ) . R10 ) is_proper_subformula_of ( ( tree_of_subformulae R5 ) . D22 ) by L330 , L319;
thus L332: contradiction by L331 , L327 , L68;
end;
thus L333: (( ( tree_of_subformulae R5 ) . R10 ) = R5 implies R10 = ( {} )) by L326;
assume L334: R10 = ( {} );
thus L335: thesis by L334 , L68;
end;
theorem
L336: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds ((R10 <> R11 & ( ( tree_of_subformulae R5 ) . R10 ) = ( ( tree_of_subformulae R5 ) . R11 )) implies (not R10 , R11 are_c=-comparable ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
assume that
L337: R10 <> R11
and
L338: ( ( tree_of_subformulae R5 ) . R10 ) = ( ( tree_of_subformulae R5 ) . R11 );
assume L339: R10 , R11 are_c=-comparable ;
per cases  by L339 , XBOOLE_0:def 9;
suppose L340: R10 is_a_prefix_of R11;

L341: R10 is_a_proper_prefix_of R11 by L340 , L337 , XBOOLE_0:def 8;
thus L342: contradiction by L341 , L338 , L319;
end;
suppose L343: R11 is_a_prefix_of R10;

L344: R11 is_a_proper_prefix_of R10 by L343 , L337 , XBOOLE_0:def 8;
thus L345: contradiction by L344 , L338 , L319;
end;
end;
definition
let R1 being QC-alphabet;
let C48 , C49 being (Element of ( QC-WFF R1 ));
func C48 -entry_points_in_subformula_tree_of C49 -> (AntiChain_of_Prefixes of ( dom ( tree_of_subformulae C48 ) )) means 
:L347: (for B76 being (Element of ( dom ( tree_of_subformulae C48 ) )) holds (B76 in it iff ( ( tree_of_subformulae C48 ) . B76 ) = C49));
existence
proof
consider C50 being set such that L348: C50 = { B77 where B77 is (Element of ( dom ( tree_of_subformulae C48 ) )) : ( ( tree_of_subformulae C48 ) . B77 ) = C49 };
L349: C50 is (AntiChain_of_Prefixes of ( dom ( tree_of_subformulae C48 ) ))
proof
L350: (for B78 , B79 being FinSequence holds ((B78 in C50 & B79 in C50 & B78 <> B79) implies (not B78 , B79 are_c=-comparable )))
proof
let C51 , C52 being FinSequence;
assume that
L351: (C51 in C50 & C52 in C50)
and
L352: C51 <> C52;
L353: ((ex B80 being (Element of ( dom ( tree_of_subformulae C48 ) )) st (B80 = C51 & ( ( tree_of_subformulae C48 ) . B80 ) = C49)) & (ex B81 being (Element of ( dom ( tree_of_subformulae C48 ) )) st (B81 = C52 & ( ( tree_of_subformulae C48 ) . B81 ) = C49))) by L348 , L351;
thus L354: thesis by L353 , L352 , L336;
end;
L355: (for B82 being set holds (B82 in C50 implies B82 is FinSequence))
proof
let C53 being set;
assume L356: C53 in C50;
L357: (ex B83 being (Element of ( dom ( tree_of_subformulae C48 ) )) st (B83 = C53 & ( ( tree_of_subformulae C48 ) . B83 ) = C49)) by L356 , L348;
thus L358: thesis by L357;
end;
reconsider D23 = C50 as AntiChain_of_Prefixes by L355 , L350 , TREES_1:def 10;
L359: D23 c= ( dom ( tree_of_subformulae C48 ) )
proof
let C54 being set;
assume L360: C54 in D23;
L361: (ex B84 being (Element of ( dom ( tree_of_subformulae C48 ) )) st (B84 = C54 & ( ( tree_of_subformulae C48 ) . B84 ) = C49)) by L360 , L348;
thus L362: thesis by L361;
end;
thus L363: thesis by L359 , TREES_1:def 11;
end;
L364: (for B85 being (Element of ( dom ( tree_of_subformulae C48 ) )) holds (B85 in C50 iff ( ( tree_of_subformulae C48 ) . B85 ) = C49))
proof
let C55 being (Element of ( dom ( tree_of_subformulae C48 ) ));
thus L365: (C55 in C50 iff ( ( tree_of_subformulae C48 ) . C55 ) = C49)
proof
L366:
now
assume L367: C55 in C50;
L368: (ex B86 being (Element of ( dom ( tree_of_subformulae C48 ) )) st (B86 = C55 & ( ( tree_of_subformulae C48 ) . B86 ) = C49)) by L367 , L348;
thus L369: ( ( tree_of_subformulae C48 ) . C55 ) = C49 by L368;
end;
thus L370: (C55 in C50 implies ( ( tree_of_subformulae C48 ) . C55 ) = C49) by L366;
assume L371: ( ( tree_of_subformulae C48 ) . C55 ) = C49;
thus L372: thesis by L371 , L348;
end;

end;
thus L366: thesis by L364 , L349;
end;
uniqueness
proof
let C56 , C57 being (AntiChain_of_Prefixes of ( dom ( tree_of_subformulae C48 ) ));
assume L367: (for B87 being (Element of ( dom ( tree_of_subformulae C48 ) )) holds (B87 in C56 iff ( ( tree_of_subformulae C48 ) . B87 ) = C49));
assume L368: (for B88 being (Element of ( dom ( tree_of_subformulae C48 ) )) holds (B88 in C57 iff ( ( tree_of_subformulae C48 ) . B88 ) = C49));
thus L369: C56 c= C57
proof
let C58 being set;
assume that
L370: C58 in C56;
L371: C56 c= ( dom ( tree_of_subformulae C48 ) ) by TREES_1:def 11;
reconsider D24 = C58 as (Element of ( dom ( tree_of_subformulae C48 ) )) by L371 , L370;
L372: ( ( tree_of_subformulae C48 ) . D24 ) = C49 by L367 , L370;
thus L373: thesis by L372 , L368;
end;

thus L374: C57 c= C56
proof
let C59 being set;
assume that
L375: C59 in C57;
L376: C57 c= ( dom ( tree_of_subformulae C48 ) ) by TREES_1:def 11;
reconsider D25 = C59 as (Element of ( dom ( tree_of_subformulae C48 ) )) by L376 , L375;
L377: ( ( tree_of_subformulae C48 ) . D25 ) = C49 by L368 , L375;
thus L378: thesis by L377 , L367;
end;

end;
end;
theorem
L376: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds ( R5 -entry_points_in_subformula_tree_of R6 ) = { B89 where B89 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B89 ) = R6 })))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
thus L377: ( R5 -entry_points_in_subformula_tree_of R6 ) c= { B90 where B90 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B90 ) = R6 }
proof
let C60 being set;
assume L378: C60 in ( R5 -entry_points_in_subformula_tree_of R6 );
L379: ( R5 -entry_points_in_subformula_tree_of R6 ) c= ( dom ( tree_of_subformulae R5 ) ) by TREES_1:def 11;
reconsider D26 = C60 as (Element of ( dom ( tree_of_subformulae R5 ) )) by L379 , L378;
L380: ( ( tree_of_subformulae R5 ) . D26 ) = R6 by L378 , L347;
thus L381: thesis by L380;
end;

thus L382: { B91 where B91 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B91 ) = R6 } c= ( R5 -entry_points_in_subformula_tree_of R6 )
proof
let C61 being set;
assume L383: C61 in { B92 where B92 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B92 ) = R6 };
L384: (ex R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (R11 = C61 & ( ( tree_of_subformulae R5 ) . R11 ) = R6)) by L383;
thus L385: thesis by L384 , L347;
end;

end;
theorem
L383: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (R6 is_subformula_of R5 iff ( R5 -entry_points_in_subformula_tree_of R6 ) <> ( {} )))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
L384:
now
assume L385: R6 is_subformula_of R5;
L386: R6 in ( rng ( tree_of_subformulae R5 ) ) by L385 , L175;
L387: (ex B93 being set st (B93 in ( dom ( tree_of_subformulae R5 ) ) & R6 = ( ( tree_of_subformulae R5 ) . B93 ))) by L386 , FUNCT_1:def 3;
thus L388: ( R5 -entry_points_in_subformula_tree_of R6 ) <> ( {} ) by L387 , L347;
end;
thus L389: (R6 is_subformula_of R5 implies ( R5 -entry_points_in_subformula_tree_of R6 ) <> ( {} )) by L384;
assume L390: ( R5 -entry_points_in_subformula_tree_of R6 ) <> ( {} );
consider C62 being set such that L391: C62 in ( R5 -entry_points_in_subformula_tree_of R6 ) by L390 , XBOOLE_0:def 1;
L392: C62 in { B94 where B94 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B94 ) = R6 } by L391 , L376;
L393: (ex R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (C62 = R10 & ( ( tree_of_subformulae R5 ) . R10 ) = R6)) by L392;
L394: R6 in ( rng ( tree_of_subformulae R5 ) ) by L393 , FUNCT_1:def 3;
thus L395: thesis by L394 , L175;
end;
theorem
L396: (for R1 being QC-alphabet holds (for R4 being (Element of ( NAT )) holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds ((R11 = ( R10 ^ <* R4 *> ) & ( ( tree_of_subformulae R5 ) . R10 ) is  negative) implies (( ( tree_of_subformulae R5 ) . R11 ) = ( the_argument_of ( ( tree_of_subformulae R5 ) . R10 ) ) & R4 = ( 0 ))))))))
proof
let R1 being QC-alphabet;
let R4 being (Element of ( NAT ));
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D27 = ( ( tree_of_subformulae R5 ) . R10 );
set D28 = ( ( tree_of_subformulae R5 ) . R11 );
assume that
L397: R11 = ( R10 ^ <* R4 *> )
and
L398: D27 is  negative;
L399: ( dom <* ( the_argument_of D27 ) *> ) = ( Seg 1 ) by FINSEQ_1:def 8;
L400: (( succ (( tree_of_subformulae R5 ) , R10) ) = ( list_of_immediate_constituents D27 ) & (ex B95 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (B95 = R10 & ( succ (( tree_of_subformulae R5 ) , R10) ) = ( ( tree_of_subformulae R5 ) * ( B95 succ ) )))) by L68 , TREES_9:def 6;
L401: ( list_of_immediate_constituents D27 ) = <* ( the_argument_of D27 ) *> by L398 , L17;
L402: ( dom <* ( the_argument_of D27 ) *> ) = ( dom ( R10 succ ) ) by L401 , L400 , TREES_9:37;
L403: ( R4 + 1 ) in ( dom <* ( the_argument_of D27 ) *> ) by L402 , L397 , TREES_9:39;
L404: ( R4 + 1 ) = ( ( 0 ) + 1 ) by L403 , L399 , FINSEQ_1:2 , TARSKI:def 1;
L405: D28 is_immediate_constituent_of D27 by L397 , L122;
thus L406: thesis by L405 , L398 , L404 , QC_LANG2:48;
end;
theorem
L407: (for R1 being QC-alphabet holds (for R4 being (Element of ( NAT )) holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds ((R11 = ( R10 ^ <* R4 *> ) & ( ( tree_of_subformulae R5 ) . R10 ) is  conjunctive) implies ((( ( tree_of_subformulae R5 ) . R11 ) = ( the_left_argument_of ( ( tree_of_subformulae R5 ) . R10 ) ) & R4 = ( 0 )) or (( ( tree_of_subformulae R5 ) . R11 ) = ( the_right_argument_of ( ( tree_of_subformulae R5 ) . R10 ) ) & R4 = 1))))))))
proof
let R1 being QC-alphabet;
let R4 being (Element of ( NAT ));
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D29 = ( ( tree_of_subformulae R5 ) . R10 );
set D30 = ( ( tree_of_subformulae R5 ) . R11 );
assume that
L408: R11 = ( R10 ^ <* R4 *> )
and
L409: D29 is  conjunctive;
L410: ( list_of_immediate_constituents D29 ) = <* ( the_left_argument_of D29 ) , ( the_right_argument_of D29 ) *> by L409 , L17;
L411: ( len <* ( the_left_argument_of D29 ) , ( the_right_argument_of D29 ) *> ) = 2 by FINSEQ_1:44;
L412: ( dom <* ( the_left_argument_of D29 ) , ( the_right_argument_of D29 ) *> ) = ( Seg 2 ) by L411 , FINSEQ_1:def 3;
L413: ( succ (( tree_of_subformulae R5 ) , R10) ) = ( list_of_immediate_constituents D29 ) by L68;
L414: (ex B96 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (B96 = R10 & ( succ (( tree_of_subformulae R5 ) , R10) ) = ( ( tree_of_subformulae R5 ) * ( B96 succ ) ))) by TREES_9:def 6;
L415: ( dom <* ( the_left_argument_of D29 ) , ( the_right_argument_of D29 ) *> ) = ( dom ( R10 succ ) ) by L414 , L413 , L410 , TREES_9:37;
L416: ( R4 + 1 ) in ( dom <* ( the_left_argument_of D29 ) , ( the_right_argument_of D29 ) *> ) by L415 , L408 , TREES_9:39;
L417: (( R4 + 1 ) = ( ( 0 ) + 1 ) or ( R4 + 1 ) = ( 1 + 1 )) by L416 , L412 , FINSEQ_1:2 , TARSKI:def 2;
per cases  by L417;
suppose L418: R4 = ( 0 );

L419: D30 = ( ( succ (( tree_of_subformulae R5 ) , R10) ) . ( R4 + 1 ) ) by L408 , TREES_9:40
.= ( the_left_argument_of D29 ) by L413 , L410 , L418 , FINSEQ_1:44;
thus L420: thesis by L419 , L418;
end;
suppose L421: R4 = 1;

L422: D30 = ( ( succ (( tree_of_subformulae R5 ) , R10) ) . ( R4 + 1 ) ) by L408 , TREES_9:40
.= ( the_right_argument_of D29 ) by L413 , L410 , L421 , FINSEQ_1:44;
thus L423: thesis by L422 , L421;
end;
end;
theorem
L425: (for R1 being QC-alphabet holds (for R4 being (Element of ( NAT )) holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds ((R11 = ( R10 ^ <* R4 *> ) & ( ( tree_of_subformulae R5 ) . R10 ) is  universal) implies (( ( tree_of_subformulae R5 ) . R11 ) = ( the_scope_of ( ( tree_of_subformulae R5 ) . R10 ) ) & R4 = ( 0 ))))))))
proof
let R1 being QC-alphabet;
let R4 being (Element of ( NAT ));
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R11 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D31 = ( ( tree_of_subformulae R5 ) . R10 );
set D32 = ( ( tree_of_subformulae R5 ) . R11 );
assume that
L426: R11 = ( R10 ^ <* R4 *> )
and
L427: D31 is  universal;
L428: ( dom <* ( the_scope_of D31 ) *> ) = ( Seg 1 ) by FINSEQ_1:def 8;
L429: (( succ (( tree_of_subformulae R5 ) , R10) ) = ( list_of_immediate_constituents D31 ) & (ex B97 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (B97 = R10 & ( succ (( tree_of_subformulae R5 ) , R10) ) = ( ( tree_of_subformulae R5 ) * ( B97 succ ) )))) by L68 , TREES_9:def 6;
L430: (not ( VERUM R1 ) is  universal) by QC_LANG1:20;
L431: D31 <> ( VERUM R1 ) by L430 , L427;
L432: D31 is non  atomic non  negative non  conjunctive by L427 , QC_LANG1:20;
L433: ( list_of_immediate_constituents D31 ) = <* ( the_scope_of D31 ) *> by L432 , L17 , L431;
L434: ( dom <* ( the_scope_of D31 ) *> ) = ( dom ( R10 succ ) ) by L433 , L429 , TREES_9:37;
L435: ( R4 + 1 ) in ( dom <* ( the_scope_of D31 ) *> ) by L434 , L426 , TREES_9:39;
L436: ( R4 + 1 ) = ( ( 0 ) + 1 ) by L435 , L428 , FINSEQ_1:2 , TARSKI:def 1;
L437: D32 is_immediate_constituent_of D31 by L426 , L122;
thus L438: thesis by L437 , L427 , L436 , QC_LANG2:50;
end;
theorem
L439: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (( ( tree_of_subformulae R5 ) . R10 ) is  negative implies (( R10 ^ <* ( 0 ) *> ) in ( dom ( tree_of_subformulae R5 ) ) & ( ( tree_of_subformulae R5 ) . ( R10 ^ <* ( 0 ) *> ) ) = ( the_argument_of ( ( tree_of_subformulae R5 ) . R10 ) ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D33 = ( ( tree_of_subformulae R5 ) . R10 );
consider R8 being (Element of ( QC-WFF R1 )) such that L440: R8 = ( the_argument_of D33 );
assume L441: D33 is  negative;
L442: R8 is_immediate_constituent_of D33 by L441 , L440 , QC_LANG2:48;
consider R4 being (Element of ( NAT )) such that L443: ( R10 ^ <* R4 *> ) in ( dom ( tree_of_subformulae R5 ) ) and L444: R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R4 *> ) ) by L442 , L122;
L445: R4 = ( 0 ) by L441 , L443 , L396;
thus L446: thesis by L445 , L441 , L443 , L396;
end;
L447: (for R14 being set holds (for R15 being set holds ( dom <* R14 , R15 *> ) = ( Seg 2 )))
proof
let R14 being set;
let R15 being set;
thus L448: ( dom <* R14 , R15 *> ) = ( Seg ( len <* R14 , R15 *> ) ) by FINSEQ_1:def 3
.= ( Seg 2 ) by FINSEQ_1:44;
end;
theorem
L449: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (( ( tree_of_subformulae R5 ) . R10 ) is  conjunctive implies (( R10 ^ <* ( 0 ) *> ) in ( dom ( tree_of_subformulae R5 ) ) & ( ( tree_of_subformulae R5 ) . ( R10 ^ <* ( 0 ) *> ) ) = ( the_left_argument_of ( ( tree_of_subformulae R5 ) . R10 ) ) & ( R10 ^ <* 1 *> ) in ( dom ( tree_of_subformulae R5 ) ) & ( ( tree_of_subformulae R5 ) . ( R10 ^ <* 1 *> ) ) = ( the_right_argument_of ( ( tree_of_subformulae R5 ) . R10 ) ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D34 = ( ( tree_of_subformulae R5 ) . R10 );
assume L450: D34 is  conjunctive;
L451: ( ( tree_of_subformulae R5 ) * ( R10 succ ) ) = ( succ (( tree_of_subformulae R5 ) , R10) )
proof
L452: (ex B98 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (B98 = R10 & ( succ (( tree_of_subformulae R5 ) , R10) ) = ( ( tree_of_subformulae R5 ) * ( B98 succ ) ))) by TREES_9:def 6;
thus L453: thesis by L452;
end;
L454: ( dom ( R10 succ ) ) = ( dom ( succ (( tree_of_subformulae R5 ) , R10) ) ) by L451 , TREES_9:37
.= ( dom ( list_of_immediate_constituents D34 ) ) by L68
.= ( dom <* ( the_left_argument_of D34 ) , ( the_right_argument_of D34 ) *> ) by L450 , L17
.= { 1 , 2 } by L447 , FINSEQ_1:2;
L455: ( ( 0 ) + 1 ) in { 1 , 2 } by TARSKI:def 2;
L456: ( R10 ^ <* ( 0 ) *> ) in ( dom ( tree_of_subformulae R5 ) ) by L455 , L454 , TREES_9:39;
L457: ( ( tree_of_subformulae R5 ) . ( R10 ^ <* ( 0 ) *> ) ) = ( ( succ (( tree_of_subformulae R5 ) , R10) ) . ( ( 0 ) + 1 ) ) by L456 , TREES_9:40
.= ( ( list_of_immediate_constituents D34 ) . 1 ) by L68
.= ( <* ( the_left_argument_of D34 ) , ( the_right_argument_of D34 ) *> . 1 ) by L450 , L17
.= ( the_left_argument_of D34 ) by FINSEQ_1:44;
thus L458: (( R10 ^ <* ( 0 ) *> ) in ( dom ( tree_of_subformulae R5 ) ) & ( ( tree_of_subformulae R5 ) . ( R10 ^ <* ( 0 ) *> ) ) = ( the_left_argument_of ( ( tree_of_subformulae R5 ) . R10 ) )) by L457 , L454 , L455 , TREES_9:39;
L459: ( 1 + 1 ) in { 1 , 2 } by TARSKI:def 2;
L460: ( R10 ^ <* 1 *> ) in ( dom ( tree_of_subformulae R5 ) ) by L459 , L454 , TREES_9:39;
L461: ( ( tree_of_subformulae R5 ) . ( R10 ^ <* 1 *> ) ) = ( ( succ (( tree_of_subformulae R5 ) , R10) ) . ( 1 + 1 ) ) by L460 , TREES_9:40
.= ( ( list_of_immediate_constituents D34 ) . 2 ) by L68
.= ( <* ( the_left_argument_of D34 ) , ( the_right_argument_of D34 ) *> . 2 ) by L450 , L17
.= ( the_right_argument_of D34 ) by FINSEQ_1:44;
thus L462: thesis by L461 , L454 , L459 , TREES_9:39;
end;
theorem
L463: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R10 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (( ( tree_of_subformulae R5 ) . R10 ) is  universal implies (( R10 ^ <* ( 0 ) *> ) in ( dom ( tree_of_subformulae R5 ) ) & ( ( tree_of_subformulae R5 ) . ( R10 ^ <* ( 0 ) *> ) ) = ( the_scope_of ( ( tree_of_subformulae R5 ) . R10 ) ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R10 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D35 = ( ( tree_of_subformulae R5 ) . R10 );
consider R8 being (Element of ( QC-WFF R1 )) such that L464: R8 = ( the_scope_of D35 );
assume L465: D35 is  universal;
L466: R8 is_immediate_constituent_of D35 by L465 , L464 , QC_LANG2:50;
consider R4 being (Element of ( NAT )) such that L467: ( R10 ^ <* R4 *> ) in ( dom ( tree_of_subformulae R5 ) ) and L468: R8 = ( ( tree_of_subformulae R5 ) . ( R10 ^ <* R4 *> ) ) by L466 , L122;
L469: R4 = ( 0 ) by L465 , L467 , L425;
thus L470: thesis by L469 , L465 , L467 , L425;
end;
theorem
L471: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds (for R16 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R17 being (Element of ( dom ( tree_of_subformulae R6 ) )) holds ((R16 in ( R5 -entry_points_in_subformula_tree_of R6 ) & R17 in ( R6 -entry_points_in_subformula_tree_of R8 )) implies ( R16 ^ R17 ) in ( R5 -entry_points_in_subformula_tree_of R8 ))))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R16 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R17 being (Element of ( dom ( tree_of_subformulae R6 ) ));
defpred S6[ (Element of ( NAT )) ] means (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds (for R16 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R17 being (Element of ( dom ( tree_of_subformulae R6 ) )) holds ((R6 = ( ( tree_of_subformulae R5 ) . R16 ) & R8 = ( ( tree_of_subformulae R6 ) . R17 ) & ( len R17 ) = $1) implies ( R16 ^ R17 ) in ( R5 -entry_points_in_subformula_tree_of R8 )))))));
L472: (for R3 being (Element of ( NAT )) holds (S6[ R3 ] implies S6[ ( R3 + 1 ) ]))
proof
let R3 being (Element of ( NAT ));
assume that
L473: S6[ R3 ];
thus L474: S6[ ( R3 + 1 ) ]
proof
L475: 1 in { 1 } by TARSKI:def 1;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R16 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R17 being (Element of ( dom ( tree_of_subformulae R6 ) ));
assume that
L476: R6 = ( ( tree_of_subformulae R5 ) . R16 )
and
L477: R8 = ( ( tree_of_subformulae R6 ) . R17 )
and
L478: ( len R17 ) = ( R3 + 1 );
consider C63 being FinSequence, C64 being set such that L479: R17 = ( C63 ^ <* C64 *> ) and L480: ( len C63 ) = R3 by L478 , TREES_2:3;
reconsider D36 = <* C64 *> as (FinSequence of ( NAT )) by L479 , FINSEQ_1:36;
L481: ( rng D36 ) c= ( NAT ) by FINSEQ_1:def 4;
L482: (( dom D36 ) = ( Seg 1 ) & ( D36 . 1 ) = C64) by FINSEQ_1:def 8;
L483: C64 in ( rng D36 ) by L482 , L475 , FINSEQ_1:2 , FUNCT_1:def 3;
reconsider D37 = C64 as (Element of ( NAT )) by L483 , L481;
reconsider D38 = C63 as (FinSequence of ( NAT )) by L479 , FINSEQ_1:36;
reconsider D39 = D38 as (Element of ( dom ( tree_of_subformulae R6 ) )) by L479 , TREES_1:21;
consider R9 being (Element of ( QC-WFF R1 )) such that L484: R9 = ( ( tree_of_subformulae R6 ) . D39 );
L485: ( R16 ^ D39 ) in ( R5 -entry_points_in_subformula_tree_of R9 ) by L473 , L476 , L480 , L484;
L486: ( R5 -entry_points_in_subformula_tree_of R9 ) c= ( dom ( tree_of_subformulae R5 ) ) by TREES_1:def 11;
consider C65 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L487: C65 = ( R16 ^ D39 ) by L486 , L485;
L488: R9 = ( ( tree_of_subformulae R5 ) . C65 ) by L485 , L487 , L347;
L489: R17 = ( D39 ^ <* D37 *> ) by L479;
L490: R8 is_immediate_constituent_of R9 by L489 , L477 , L484 , L122;
L491: (R8 = ( ( tree_of_subformulae R5 ) . ( C65 ^ <* D37 *> ) ) & ( C65 ^ <* D37 *> ) in ( dom ( tree_of_subformulae R5 ) ))
proof
L492: R9 <> ( VERUM R1 ) by L490 , QC_LANG2:41;
L493:
now
per cases  by L490 , L492 , QC_LANG1:9 , QC_LANG2:47;
suppose L494: R9 is  negative;

L495: (R8 = ( the_argument_of R9 ) & D37 = ( 0 )) by L494 , L477 , L489 , L484 , L396;
thus L496: thesis by L495 , L488 , L494 , L439;
end;
suppose L497: R9 is  conjunctive;

L498: ((R8 = ( the_left_argument_of R9 ) & D37 = ( 0 )) or (R8 = ( the_right_argument_of R9 ) & D37 = 1)) by L497 , L477 , L489 , L484 , L407;
thus L499: thesis by L498 , L488 , L497 , L449;
end;
suppose L500: R9 is  universal;

L501: (R8 = ( the_scope_of R9 ) & D37 = ( 0 )) by L500 , L477 , L489 , L484 , L425;
thus L502: thesis by L501 , L488 , L500 , L463;
end;
end;
thus L504: thesis by L493;
end;
L505: ( R16 ^ R17 ) = ( C65 ^ <* D37 *> ) by L479 , L487 , FINSEQ_1:32;
thus L506: thesis by L505 , L491 , L347;
end;

end;
L475: S6[ ( 0 ) ]
proof
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R16 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R17 being (Element of ( dom ( tree_of_subformulae R6 ) ));
assume that
L476: R6 = ( ( tree_of_subformulae R5 ) . R16 )
and
L477: R8 = ( ( tree_of_subformulae R6 ) . R17 )
and
L478: ( len R17 ) = ( 0 );
L479: R17 = ( {} ) by L478;
L480: ( R16 ^ R17 ) = R16 by L479 , FINSEQ_1:34;
L481: R8 = R6 by L477 , L479 , L68;
thus L482: thesis by L481 , L476 , L480 , L347;
end;
L483: (for R3 being (Element of ( NAT )) holds S6[ R3 ]) from NAT_1:sch 1(L475 , L472);
L484: ((R6 = ( ( tree_of_subformulae R5 ) . R16 ) & R8 = ( ( tree_of_subformulae R6 ) . R17 ) & ( len R17 ) = ( len R17 )) implies ( R16 ^ R17 ) in ( R5 -entry_points_in_subformula_tree_of R8 )) by L483;
assume L485: (R16 in ( R5 -entry_points_in_subformula_tree_of R6 ) & R17 in ( R6 -entry_points_in_subformula_tree_of R8 ));
thus L486: thesis by L485 , L484 , L347;
end;
theorem
L487: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds (for R18 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R19 being FinSequence holds ((R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) & ( R18 ^ R19 ) in ( R5 -entry_points_in_subformula_tree_of R8 )) implies R19 in ( R6 -entry_points_in_subformula_tree_of R8 ))))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R18 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R19 being FinSequence;
defpred S7[ (Element of ( NAT )) ] means (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds (for R18 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (for R19 being FinSequence holds ((R6 = ( ( tree_of_subformulae R5 ) . R18 ) & ( R18 ^ R19 ) in ( R5 -entry_points_in_subformula_tree_of R8 ) & ( len R19 ) = $1) implies R19 in ( R6 -entry_points_in_subformula_tree_of R8 )))))));
L488: (for R3 being (Element of ( NAT )) holds (S7[ R3 ] implies S7[ ( R3 + 1 ) ]))
proof
let R3 being (Element of ( NAT ));
assume that
L489: S7[ R3 ];
thus L490: S7[ ( R3 + 1 ) ]
proof
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R18 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R19 being FinSequence;
assume that
L491: R6 = ( ( tree_of_subformulae R5 ) . R18 )
and
L492: ( R18 ^ R19 ) in ( R5 -entry_points_in_subformula_tree_of R8 )
and
L493: ( len R19 ) = ( R3 + 1 );
consider C66 being FinSequence, C67 being set such that L494: R19 = ( C66 ^ <* C67 *> ) and L495: ( len C66 ) = R3 by L493 , TREES_2:3;
L496: ( R5 -entry_points_in_subformula_tree_of R8 ) = { B99 where B99 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B99 ) = R8 } by L376;
consider R12 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L497: R12 = ( R18 ^ R19 ) and L498: ( ( tree_of_subformulae R5 ) . R12 ) = R8 by L496 , L492;
reconsider D40 = R19 as (FinSequence of ( NAT )) by L497 , FINSEQ_1:36;
L499: D40 = ( C66 ^ <* C67 *> ) by L494;
reconsider D41 = <* C67 *> as (FinSequence of ( NAT )) by L499 , FINSEQ_1:36;
reconsider D42 = C66 as (FinSequence of ( NAT )) by L499 , FINSEQ_1:36;
L500: ( rng D41 ) c= ( NAT ) by FINSEQ_1:def 4;
L501: 1 in { 1 } by TARSKI:def 1;
L502: (( dom D41 ) = ( Seg 1 ) & ( D41 . 1 ) = C67) by FINSEQ_1:def 8;
L503: C67 in ( rng D41 ) by L502 , L501 , FINSEQ_1:2 , FUNCT_1:def 3;
reconsider D43 = C67 as (Element of ( NAT )) by L503 , L500;
consider C68 being (FinSequence of ( NAT )) such that L504: C68 = ( R18 ^ D42 );
L505: R12 = ( C68 ^ <* D43 *> ) by L494 , L497 , L504 , FINSEQ_1:32;
L506: C68 is_a_prefix_of R12 by L505 , TREES_1:1;
reconsider D44 = C68 as (Element of ( dom ( tree_of_subformulae R5 ) )) by L506 , TREES_1:20;
consider R9 being (Element of ( QC-WFF R1 )) such that L507: R9 = ( ( tree_of_subformulae R5 ) . D44 );
L508: ( R18 ^ D42 ) in ( R5 -entry_points_in_subformula_tree_of R9 ) by L504 , L507 , L347;
L509: D42 in ( R6 -entry_points_in_subformula_tree_of R9 ) by L508 , L489 , L491 , L495;
L510: ( R6 -entry_points_in_subformula_tree_of R9 ) = { B100 where B100 is (Element of ( dom ( tree_of_subformulae R6 ) )) : ( ( tree_of_subformulae R6 ) . B100 ) = R9 } by L376;
L511: (ex B101 being (Element of ( dom ( tree_of_subformulae R6 ) )) st (D42 = B101 & ( ( tree_of_subformulae R6 ) . B101 ) = R9)) by L510 , L509;
reconsider D45 = D42 as (Element of ( dom ( tree_of_subformulae R6 ) )) by L511;
L512: R8 is_immediate_constituent_of R9 by L498 , L505 , L507 , L122;
L513: (R8 = ( ( tree_of_subformulae R6 ) . ( D45 ^ <* D43 *> ) ) & ( D45 ^ <* D43 *> ) in ( dom ( tree_of_subformulae R6 ) ))
proof
L514: R9 <> ( VERUM R1 ) by L512 , QC_LANG2:41;
L515:
now
per cases  by L512 , L514 , QC_LANG1:9 , QC_LANG2:47;
suppose L516: R9 is  negative;

L517: (R8 = ( the_argument_of R9 ) & D43 = ( 0 )) by L516 , L498 , L505 , L507 , L396;
thus L518: thesis by L517 , L511 , L516 , L439;
end;
suppose L519: R9 is  conjunctive;

L520: ((R8 = ( the_left_argument_of R9 ) & D43 = ( 0 )) or (R8 = ( the_right_argument_of R9 ) & D43 = 1)) by L519 , L498 , L505 , L507 , L407;
thus L521: thesis by L520 , L511 , L519 , L449;
end;
suppose L522: R9 is  universal;

L523: (R8 = ( the_scope_of R9 ) & D43 = ( 0 )) by L522 , L498 , L505 , L507 , L425;
thus L524: thesis by L523 , L511 , L522 , L463;
end;
end;
thus L526: thesis by L515;
end;
thus L527: thesis by L513 , L494 , L347;
end;

end;
L491: S7[ ( 0 ) ]
proof
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R18 being (Element of ( dom ( tree_of_subformulae R5 ) ));
let R19 being FinSequence;
assume that
L492: R6 = ( ( tree_of_subformulae R5 ) . R18 )
and
L493: ( R18 ^ R19 ) in ( R5 -entry_points_in_subformula_tree_of R8 )
and
L494: ( len R19 ) = ( 0 );
L495: R19 = ( {} ) by L494;
reconsider D46 = R19 as (Element of ( dom ( tree_of_subformulae R6 ) )) by L495 , TREES_1:22;
L496: R6 = ( ( tree_of_subformulae R6 ) . D46 ) by L495 , L68;
L497: ( R5 -entry_points_in_subformula_tree_of R8 ) = { B102 where B102 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B102 ) = R8 } by L376;
L498: (ex R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (R11 = ( R18 ^ R19 ) & ( ( tree_of_subformulae R5 ) . R11 ) = R8)) by L497 , L493;
L499: R8 = R6 by L498 , L492 , L495 , FINSEQ_1:34;
thus L500: thesis by L499 , L496 , L347;
end;
L501: (for R3 being (Element of ( NAT )) holds S7[ R3 ]) from NAT_1:sch 1(L491 , L488);
L502: ((R6 = ( ( tree_of_subformulae R5 ) . R18 ) & ( R18 ^ R19 ) in ( R5 -entry_points_in_subformula_tree_of R8 ) & ( len R19 ) = ( len R19 )) implies R19 in ( R6 -entry_points_in_subformula_tree_of R8 )) by L501;
assume L503: (R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) & ( R18 ^ R19 ) in ( R5 -entry_points_in_subformula_tree_of R8 ));
thus L504: thesis by L503 , L502 , L347;
end;
theorem
L505: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds { ( B103 ^ B104 ) where B103 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B104 is (Element of ( dom ( tree_of_subformulae R6 ) )) : (B103 in ( R5 -entry_points_in_subformula_tree_of R6 ) & B104 in ( R6 -entry_points_in_subformula_tree_of R8 )) } c= ( R5 -entry_points_in_subformula_tree_of R8 )))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let C69 being set;
assume L506: C69 in { ( B105 ^ B106 ) where B105 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B106 is (Element of ( dom ( tree_of_subformulae R6 ) )) : (B105 in ( R5 -entry_points_in_subformula_tree_of R6 ) & B106 in ( R6 -entry_points_in_subformula_tree_of R8 )) };
L507: (ex B107 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (ex B108 being (Element of ( dom ( tree_of_subformulae R6 ) )) st (C69 = ( B107 ^ B108 ) & B107 in ( R5 -entry_points_in_subformula_tree_of R6 ) & B108 in ( R6 -entry_points_in_subformula_tree_of R8 )))) by L506;
thus L508: thesis by L507 , L471;
end;
theorem
L509: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R18 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds ( ( tree_of_subformulae R5 ) | R18 ) = ( tree_of_subformulae ( ( tree_of_subformulae R5 ) . R18 ) ))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R18 being (Element of ( dom ( tree_of_subformulae R5 ) ));
set D47 = ( ( tree_of_subformulae R5 ) | R18 );
set D48 = ( tree_of_subformulae ( ( tree_of_subformulae R5 ) . R18 ) );
thus L510: ( dom D47 ) = ( dom D48 )
proof
let C70 being (FinSequence of ( NAT ));
L511:
now
consider R6 being (Element of ( QC-WFF R1 )) such that L512: R6 = ( ( tree_of_subformulae R5 ) . R18 );
L513: R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) by L512 , L347;
consider C71 being (FinSequence of ( NAT )) such that L514: C71 = ( R18 ^ C70 );
assume L515: C70 in ( dom D47 );
L516: C70 in ( ( dom ( tree_of_subformulae R5 ) ) | R18 ) by L515 , TREES_2:def 10;
reconsider D49 = C71 as (Element of ( dom ( tree_of_subformulae R5 ) )) by L516 , L514 , TREES_1:def 6;
consider R8 being (Element of ( QC-WFF R1 )) such that L517: R8 = ( ( tree_of_subformulae R5 ) . D49 );
L518: ( R6 -entry_points_in_subformula_tree_of R8 ) c= ( dom D48 ) by L512 , TREES_1:def 11;
L519: D49 in ( R5 -entry_points_in_subformula_tree_of R8 ) by L517 , L347;
L520: C70 in ( R6 -entry_points_in_subformula_tree_of R8 ) by L519 , L513 , L514 , L487;
thus L521: C70 in ( dom D48 ) by L520 , L518;
end;
thus L522: (C70 in ( dom D47 ) implies C70 in ( dom D48 )) by L511;
L523:
now
consider R6 being (Element of ( QC-WFF R1 )) such that L524: R6 = ( ( tree_of_subformulae R5 ) . R18 );
assume L525: C70 in ( dom D48 );
reconsider D50 = C70 as (Element of ( dom ( tree_of_subformulae R6 ) )) by L525 , L524;
consider R8 being (Element of ( QC-WFF R1 )) such that L526: R8 = ( ( tree_of_subformulae R6 ) . D50 );
L527: D50 in ( R6 -entry_points_in_subformula_tree_of R8 ) by L526 , L347;
L528: ( R5 -entry_points_in_subformula_tree_of R8 ) c= ( dom ( tree_of_subformulae R5 ) ) by TREES_1:def 11;
L529: R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) by L524 , L347;
L530: ( R18 ^ D50 ) in ( R5 -entry_points_in_subformula_tree_of R8 ) by L529 , L527 , L471;
L531: D50 in ( ( dom ( tree_of_subformulae R5 ) ) | R18 ) by L530 , L528 , TREES_1:def 6;
thus L532: C70 in ( dom D47 ) by L531 , TREES_2:def 10;
end;
thus L533: thesis by L523;
end;

L534:
now
let C72 being (Node of D47);
consider R6 being (Element of ( QC-WFF R1 )) such that L535: R6 = ( ( tree_of_subformulae R5 ) . R18 );
reconsider D51 = C72 as (Element of ( dom ( tree_of_subformulae R6 ) )) by L510 , L535;
L536: ( dom D47 ) = ( ( dom ( tree_of_subformulae R5 ) ) | R18 ) by TREES_2:def 10;
reconsider D52 = ( R18 ^ D51 ) as (Element of ( dom ( tree_of_subformulae R5 ) )) by L536 , TREES_1:def 6;
consider R8 being (Element of ( QC-WFF R1 )) such that L537: R8 = ( D47 . C72 );
L538: R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) by L535 , L347;
L539: ( D47 . C72 ) = ( ( tree_of_subformulae R5 ) . ( R18 ^ C72 ) ) by L536 , TREES_2:def 10;
L540: D52 in ( R5 -entry_points_in_subformula_tree_of R8 ) by L539 , L537 , L347;
L541: D51 in ( R6 -entry_points_in_subformula_tree_of R8 ) by L540 , L538 , L487;
thus L542: ( D47 . C72 ) = ( D48 . C72 ) by L541 , L535 , L537 , L347;
end;
thus L543: (for B109 being (Node of D47) holds ( D47 . B109 ) = ( D48 . B109 )) by L534;
end;
theorem
L544: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R18 being (Element of ( dom ( tree_of_subformulae R5 ) )) holds (R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) iff ( ( tree_of_subformulae R5 ) | R18 ) = ( tree_of_subformulae R6 ))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R18 being (Element of ( dom ( tree_of_subformulae R5 ) ));
L545:
now
assume L546: R18 in ( R5 -entry_points_in_subformula_tree_of R6 );
L547: ( ( tree_of_subformulae R5 ) . R18 ) = R6 by L546 , L347;
thus L548: ( ( tree_of_subformulae R5 ) | R18 ) = ( tree_of_subformulae R6 ) by L547 , L509;
end;
thus L549: (R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) implies ( ( tree_of_subformulae R5 ) | R18 ) = ( tree_of_subformulae R6 )) by L545;
L550:
now
assume L551: ( ( tree_of_subformulae R5 ) | R18 ) = ( tree_of_subformulae R6 );
L552: ( ( tree_of_subformulae R5 ) . R18 ) = ( ( tree_of_subformulae R6 ) . ( {} ) ) by L551 , TREES_9:35;
L553: ( ( tree_of_subformulae R6 ) . ( {} ) ) = R6 by L68;
thus L554: R18 in ( R5 -entry_points_in_subformula_tree_of R6 ) by L553 , L552 , L347;
end;
thus L555: thesis by L550;
end;
theorem
L556: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds ( R5 -entry_points_in_subformula_tree_of R6 ) = { B110 where B110 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) | B110 ) = ( tree_of_subformulae R6 ) })))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
thus L557: ( R5 -entry_points_in_subformula_tree_of R6 ) c= { B111 where B111 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) | B111 ) = ( tree_of_subformulae R6 ) }
proof
let C73 being set;
assume L558: C73 in ( R5 -entry_points_in_subformula_tree_of R6 );
L559: ( R5 -entry_points_in_subformula_tree_of R6 ) c= ( dom ( tree_of_subformulae R5 ) ) by TREES_1:def 11;
reconsider D53 = C73 as (Element of ( dom ( tree_of_subformulae R5 ) )) by L559 , L558;
L560: ( ( tree_of_subformulae R5 ) | D53 ) = ( tree_of_subformulae R6 ) by L558 , L544;
thus L561: thesis by L560;
end;

thus L562: { B112 where B112 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) | B112 ) = ( tree_of_subformulae R6 ) } c= ( R5 -entry_points_in_subformula_tree_of R6 )
proof
let C74 being set;
assume L563: C74 in { B113 where B113 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) | B113 ) = ( tree_of_subformulae R6 ) };
L564: (ex R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) st (R11 = C74 & ( ( tree_of_subformulae R5 ) | R11 ) = ( tree_of_subformulae R6 ))) by L563;
thus L565: thesis by L564 , L544;
end;

end;
theorem
L563: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R6 being (Element of ( QC-WFF R1 )) holds (for R8 being (Element of ( QC-WFF R1 )) holds (for R20 being (Chain of ( dom ( tree_of_subformulae R5 ) )) holds ((R6 in { ( ( tree_of_subformulae R5 ) . B114 ) where B114 is (Element of ( dom ( tree_of_subformulae R5 ) )) : B114 in R20 } & R8 in { ( ( tree_of_subformulae R5 ) . B115 ) where B115 is (Element of ( dom ( tree_of_subformulae R5 ) )) : B115 in R20 }) implies (R6 is_subformula_of R8 or R8 is_subformula_of R6)))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R6 being (Element of ( QC-WFF R1 ));
let R8 being (Element of ( QC-WFF R1 ));
let R20 being (Chain of ( dom ( tree_of_subformulae R5 ) ));
assume that
L564: R6 in { ( ( tree_of_subformulae R5 ) . B116 ) where B116 is (Element of ( dom ( tree_of_subformulae R5 ) )) : B116 in R20 }
and
L565: R8 in { ( ( tree_of_subformulae R5 ) . B117 ) where B117 is (Element of ( dom ( tree_of_subformulae R5 ) )) : B117 in R20 };
consider R11 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L566: R6 = ( ( tree_of_subformulae R5 ) . R11 ) and L567: R11 in R20 by L564;
consider R12 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L568: R8 = ( ( tree_of_subformulae R5 ) . R12 ) and L569: R12 in R20 by L565;
L570: R11 , R12 are_c=-comparable  by L567 , L569 , TREES_2:def 3;
per cases  by L570 , XBOOLE_0:def 9;
suppose L571: R11 is_a_prefix_of R12;

thus L572: thesis by L571 , L566 , L568 , L210;
end;
suppose L573: R12 is_a_prefix_of R11;

thus L574: thesis by L573 , L566 , L568 , L210;
end;
end;
definition
let R1 being QC-alphabet;
let C75 being (Element of ( QC-WFF R1 ));
mode Subformula of C75
 -> (Element of ( QC-WFF R1 ))
means :L576: it is_subformula_of C75;
existence;
end;
definition
let R1 being QC-alphabet;
let C76 being (Element of ( QC-WFF R1 ));
let C77 being (Subformula of C76);
mode Entry_Point_in_Subformula_Tree of C77
 -> (Element of ( dom ( tree_of_subformulae C76 ) ))
means :L578: ( ( tree_of_subformulae C76 ) . it ) = C77;
existence
proof
L579: C77 is_subformula_of C76 by L576;
L580: C77 in ( rng ( tree_of_subformulae C76 ) ) by L579 , L175;
L581: (ex B118 being set st (B118 in ( dom ( tree_of_subformulae C76 ) ) & ( ( tree_of_subformulae C76 ) . B118 ) = C77)) by L580 , FUNCT_1:def 3;
thus L582: thesis by L581;
end;
end;
theorem
L584: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R21 being (Subformula of R5) holds (for R22 being (Entry_Point_in_Subformula_Tree of R21) holds (for R23 being (Entry_Point_in_Subformula_Tree of R21) holds (R22 <> R23 implies (not R22 , R23 are_c=-comparable )))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R21 being (Subformula of R5);
let R22 being (Entry_Point_in_Subformula_Tree of R21);
let R23 being (Entry_Point_in_Subformula_Tree of R21);
assume L585: R22 <> R23;
L586: (( ( tree_of_subformulae R5 ) . R22 ) = R21 & ( ( tree_of_subformulae R5 ) . R23 ) = R21) by L578;
thus L587: thesis by L586 , L585 , L336;
end;
definition
let R1 being QC-alphabet;
let C78 being (Element of ( QC-WFF R1 ));
let C79 being (Subformula of C78);
func entry_points_in_subformula_tree C79 -> non  empty (AntiChain_of_Prefixes of ( dom ( tree_of_subformulae C78 ) )) equals 
( C78 -entry_points_in_subformula_tree_of C79 );
coherence
proof
L588: C79 is_subformula_of C78 by L576;
thus L589: thesis by L588 , L383;
end;
end;
theorem
L591: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R21 being (Subformula of R5) holds (for R22 being (Entry_Point_in_Subformula_Tree of R21) holds R22 in ( entry_points_in_subformula_tree R21 )))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R21 being (Subformula of R5);
let R22 being (Entry_Point_in_Subformula_Tree of R21);
L592: ( ( tree_of_subformulae R5 ) . R22 ) = R21 by L578;
thus L593: thesis by L592 , L347;
end;
theorem
L594: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R21 being (Subformula of R5) holds ( entry_points_in_subformula_tree R21 ) = { B119 where B119 is (Entry_Point_in_Subformula_Tree of R21) : B119 = B119 })))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R21 being (Subformula of R5);
thus L595: ( entry_points_in_subformula_tree R21 ) c= { B120 where B120 is (Entry_Point_in_Subformula_Tree of R21) : B120 = B120 }
proof
let C80 being set;
assume L596: C80 in ( entry_points_in_subformula_tree R21 );
L597: C80 in { B121 where B121 is (Element of ( dom ( tree_of_subformulae R5 ) )) : ( ( tree_of_subformulae R5 ) . B121 ) = R21 } by L596 , L376;
consider C81 being (Element of ( dom ( tree_of_subformulae R5 ) )) such that L598: C81 = C80 and L599: ( ( tree_of_subformulae R5 ) . C81 ) = R21 by L597;
reconsider D54 = C81 as (Entry_Point_in_Subformula_Tree of R21) by L599 , L578;
L600: D54 = D54;
thus L601: thesis by L600 , L598;
end;

thus L602: { B122 where B122 is (Entry_Point_in_Subformula_Tree of R21) : B122 = B122 } c= ( entry_points_in_subformula_tree R21 )
proof
let C82 being set;
assume L603: C82 in { B123 where B123 is (Entry_Point_in_Subformula_Tree of R21) : B123 = B123 };
L604: (ex R22 being (Entry_Point_in_Subformula_Tree of R21) st (R22 = C82 & R22 = R22)) by L603;
thus L605: thesis by L604 , L591;
end;

end;
theorem
L603: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R24 being (Subformula of R5) holds (for R25 being (Subformula of R5) holds (for R26 being (Entry_Point_in_Subformula_Tree of R24) holds (for R27 being (Element of ( dom ( tree_of_subformulae R24 ) )) holds (R27 in ( R24 -entry_points_in_subformula_tree_of R25 ) implies ( R26 ^ R27 ) is (Entry_Point_in_Subformula_Tree of R25))))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R24 being (Subformula of R5);
let R25 being (Subformula of R5);
let R26 being (Entry_Point_in_Subformula_Tree of R24);
let R27 being (Element of ( dom ( tree_of_subformulae R24 ) ));
L604: ( ( tree_of_subformulae R5 ) . R26 ) = R24 by L578;
L605: R26 in ( R5 -entry_points_in_subformula_tree_of R24 ) by L604 , L347;
assume L606: R27 in ( R24 -entry_points_in_subformula_tree_of R25 );
L607: ( R26 ^ R27 ) in ( R5 -entry_points_in_subformula_tree_of R25 ) by L606 , L605 , L471;
L608: ( R5 -entry_points_in_subformula_tree_of R25 ) c= ( dom ( tree_of_subformulae R5 ) ) by TREES_1:def 11;
reconsider D55 = ( R26 ^ R27 ) as (Element of ( dom ( tree_of_subformulae R5 ) )) by L608 , L607;
L609: ( ( tree_of_subformulae R5 ) . D55 ) = R25 by L607 , L347;
thus L610: thesis by L609 , L578;
end;
theorem
L611: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R24 being (Subformula of R5) holds (for R25 being (Subformula of R5) holds (for R26 being (Entry_Point_in_Subformula_Tree of R24) holds (for R28 being FinSequence holds (( R26 ^ R28 ) is (Entry_Point_in_Subformula_Tree of R25) implies R28 in ( R24 -entry_points_in_subformula_tree_of R25 ))))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R24 being (Subformula of R5);
let R25 being (Subformula of R5);
let R26 being (Entry_Point_in_Subformula_Tree of R24);
let R28 being FinSequence;
consider C83 being FinSequence such that L612: C83 = ( R26 ^ R28 );
L613: ( ( tree_of_subformulae R5 ) . R26 ) = R24 by L578;
L614: R26 in ( R5 -entry_points_in_subformula_tree_of R24 ) by L613 , L347;
assume L615: ( R26 ^ R28 ) is (Entry_Point_in_Subformula_Tree of R25);
L616: C83 in { B124 where B124 is (Entry_Point_in_Subformula_Tree of R25) : B124 = B124 } by L615 , L612;
L617: C83 in ( entry_points_in_subformula_tree R25 ) by L616 , L594;
thus L618: thesis by L617 , L614 , L612 , L487;
end;
theorem
L619: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R24 being (Subformula of R5) holds (for R25 being (Subformula of R5) holds { ( B125 ^ B126 ) where B125 is (Entry_Point_in_Subformula_Tree of R24) , B126 is (Element of ( dom ( tree_of_subformulae R24 ) )) : B126 in ( R24 -entry_points_in_subformula_tree_of R25 ) } = { ( B127 ^ B128 ) where B127 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B128 is (Element of ( dom ( tree_of_subformulae R24 ) )) : (B127 in ( R5 -entry_points_in_subformula_tree_of R24 ) & B128 in ( R24 -entry_points_in_subformula_tree_of R25 )) }))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R24 being (Subformula of R5);
let R25 being (Subformula of R5);
thus L620: { ( B129 ^ B130 ) where B129 is (Entry_Point_in_Subformula_Tree of R24) , B130 is (Element of ( dom ( tree_of_subformulae R24 ) )) : B130 in ( R24 -entry_points_in_subformula_tree_of R25 ) } c= { ( B131 ^ B132 ) where B131 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B132 is (Element of ( dom ( tree_of_subformulae R24 ) )) : (B131 in ( R5 -entry_points_in_subformula_tree_of R24 ) & B132 in ( R24 -entry_points_in_subformula_tree_of R25 )) }
proof
let C84 being set;
assume L621: C84 in { ( B133 ^ B134 ) where B133 is (Entry_Point_in_Subformula_Tree of R24) , B134 is (Element of ( dom ( tree_of_subformulae R24 ) )) : B134 in ( R24 -entry_points_in_subformula_tree_of R25 ) };
consider C85 being (Entry_Point_in_Subformula_Tree of R24), C86 being (Element of ( dom ( tree_of_subformulae R24 ) )) such that L622: (C84 = ( C85 ^ C86 ) & C86 in ( R24 -entry_points_in_subformula_tree_of R25 )) by L621;
L623: ( ( tree_of_subformulae R5 ) . C85 ) = R24 by L578;
L624: C85 in ( R5 -entry_points_in_subformula_tree_of R24 ) by L623 , L347;
thus L625: thesis by L624 , L622;
end;

thus L626: { ( B135 ^ B136 ) where B135 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B136 is (Element of ( dom ( tree_of_subformulae R24 ) )) : (B135 in ( R5 -entry_points_in_subformula_tree_of R24 ) & B136 in ( R24 -entry_points_in_subformula_tree_of R25 )) } c= { ( B137 ^ B138 ) where B137 is (Entry_Point_in_Subformula_Tree of R24) , B138 is (Element of ( dom ( tree_of_subformulae R24 ) )) : B138 in ( R24 -entry_points_in_subformula_tree_of R25 ) }
proof
let C87 being set;
assume L627: C87 in { ( B139 ^ B140 ) where B139 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B140 is (Element of ( dom ( tree_of_subformulae R24 ) )) : (B139 in ( R5 -entry_points_in_subformula_tree_of R24 ) & B140 in ( R24 -entry_points_in_subformula_tree_of R25 )) };
consider C88 being (Element of ( dom ( tree_of_subformulae R5 ) )), C89 being (Element of ( dom ( tree_of_subformulae R24 ) )) such that L628: C87 = ( C88 ^ C89 ) and L629: C88 in ( R5 -entry_points_in_subformula_tree_of R24 ) and L630: C89 in ( R24 -entry_points_in_subformula_tree_of R25 ) by L627;
L631: ( ( tree_of_subformulae R5 ) . C88 ) = R24 by L629 , L347;
reconsider D56 = C88 as (Entry_Point_in_Subformula_Tree of R24) by L631 , L578;
L632: C87 = ( D56 ^ C89 ) by L628;
thus L633: thesis by L632 , L630;
end;

end;
theorem
L627: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R24 being (Subformula of R5) holds (for R25 being (Subformula of R5) holds { ( B141 ^ B142 ) where B141 is (Entry_Point_in_Subformula_Tree of R24) , B142 is (Element of ( dom ( tree_of_subformulae R24 ) )) : B142 in ( R24 -entry_points_in_subformula_tree_of R25 ) } c= ( entry_points_in_subformula_tree R25 )))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R24 being (Subformula of R5);
let R25 being (Subformula of R5);
L628: { ( B143 ^ B144 ) where B143 is (Entry_Point_in_Subformula_Tree of R24) , B144 is (Element of ( dom ( tree_of_subformulae R24 ) )) : B144 in ( R24 -entry_points_in_subformula_tree_of R25 ) } = { ( B145 ^ B146 ) where B145 is (Element of ( dom ( tree_of_subformulae R5 ) )) , B146 is (Element of ( dom ( tree_of_subformulae R24 ) )) : (B145 in ( R5 -entry_points_in_subformula_tree_of R24 ) & B146 in ( R24 -entry_points_in_subformula_tree_of R25 )) } by L619;
thus L629: thesis by L628 , L505;
end;
theorem
L630: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R29 being (Subformula of R5) holds (for R30 being (Subformula of R5) holds ((ex R31 being (Entry_Point_in_Subformula_Tree of R29) st (ex R32 being (Entry_Point_in_Subformula_Tree of R30) st R31 is_a_prefix_of R32)) implies R30 is_subformula_of R29)))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R29 being (Subformula of R5);
let R30 being (Subformula of R5);
given R31 being (Entry_Point_in_Subformula_Tree of R29) , R32 being (Entry_Point_in_Subformula_Tree of R30) such that
L631: R31 is_a_prefix_of R32;

L632: (( ( tree_of_subformulae R5 ) . R31 ) = R29 & ( ( tree_of_subformulae R5 ) . R32 ) = R30) by L578;
thus L633: thesis by L632 , L631 , L210;
end;
theorem
L634: (for R1 being QC-alphabet holds (for R5 being (Element of ( QC-WFF R1 )) holds (for R29 being (Subformula of R5) holds (for R30 being (Subformula of R5) holds (R30 is_subformula_of R29 implies (for R31 being (Entry_Point_in_Subformula_Tree of R29) holds (ex R32 being (Entry_Point_in_Subformula_Tree of R30) st R31 is_a_prefix_of R32)))))))
proof
let R1 being QC-alphabet;
let R5 being (Element of ( QC-WFF R1 ));
let R29 being (Subformula of R5);
let R30 being (Subformula of R5);
assume L635: R30 is_subformula_of R29;
L636:
now
let R31 being (Entry_Point_in_Subformula_Tree of R29);
consider C90 being (Element of ( QC-WFF R1 )) such that L637: C90 = R30;
reconsider D57 = C90 as (Subformula of R29) by L635 , L637 , L576;
set D58 = the (Entry_Point_in_Subformula_Tree of D57);
L638: ( ( tree_of_subformulae R29 ) . D58 ) = D57 by L578;
L639: D58 in ( R29 -entry_points_in_subformula_tree_of R30 ) by L638 , L637 , L347;
L640: ( R31 ^ D58 ) is (Entry_Point_in_Subformula_Tree of R30) by L639 , L603;
consider R32 being (Entry_Point_in_Subformula_Tree of R30) such that L641: R32 = ( R31 ^ D58 ) by L640;
take D59 = R32;
thus L642: R31 is_a_prefix_of D59 by L641 , TREES_1:1;
end;
thus L643: thesis by L636;
end;
