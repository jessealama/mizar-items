:: Basic Properties of Extended Real Numbers
::  by Noboru Endou , Katsumi Wasaki and Yasunari Shidama
::
:: Received September 7, 2000
:: Copyright (c) 2000-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUPINF_1, REAL_1, RELAT_1, XREAL_0, ORDINAL1, XXREAL_0,
      ARYTM_3, COMPLEX1, CARD_1, ARYTM_1, MEASURE6, FINSEQ_1, CARD_3, FUNCT_1,
      SUBSET_1, SUPINF_2, NAT_1, FUNCT_2, FUNCOP_1, XBOOLE_0, TARSKI, ORDINAL4,
      PARTFUN1, RFINSEQ, XCMPLX_0;
 notations TARSKI, XBOOLE_0, SUBSET_1, CARD_1, ORDINAL1, NUMBERS, XXREAL_3,
      XCMPLX_0, XREAL_0, REAL_1, RELAT_1, FUNCT_1, RELSET_1, PARTFUN1, BINOP_1,
      FUNCT_2, SEQ_1, DOMAIN_1, BINOP_2, RFINSEQ, RFUNCT_3, RVSUM_1, FUNCOP_1,
      FINSEQ_1, FINSEQ_4, XXREAL_0, NAT_1, NAT_D, SUPINF_1, SUPINF_2, MEASURE6;
 constructors BINOP_1, DOMAIN_1, REAL_1, NAT_1, FINSEQ_4, FINSOP_1, RVSUM_1,
      SUPINF_2, RFINSEQ, RFUNCT_3, MEASURE6, BINARITH, SEQ_1, BINOP_2,
      SUPINF_1, CLASSES1, NAT_D, RELSET_1, XXREAL_3, FINSEQ_1, FUNCT_1,
      FUNCT_2, INT_1, FUNCOP_1;
 registrations XBOOLE_0, SUBSET_1, FUNCT_1, ORDINAL1, RELSET_1, FUNCT_2,
      FINSET_1, NUMBERS, XXREAL_0, XREAL_0, NAT_1, INT_1, MEMBERED, FINSEQ_1,
      VALUED_0, CARD_1, XXREAL_3, RELAT_1;
 requirements NUMERALS, REAL, SUBSET, BOOLE, ARITHM;
 definitions XXREAL_3, XCMPLX_0;
 theorems FUNCT_2, FINSEQ_1, FINSEQ_2, FINSEQ_3, FINSEQ_5, NAT_1, TARSKI,
      FUNCT_1, INT_1, XCMPLX_1, XBOOLE_0, RFINSEQ, RELAT_1, FUNCOP_1, XREAL_1,
      XXREAL_0, XREAL_0, PARTFUN1, ORDINAL1, MEASURE6, XXREAL_3;
 schemes FUNCT_2, FINSEQ_2, NAT_1, RECDEF_1;

begin
definition
let C1 , C2 being R_eal;
redefine func C1 * C2 -> R_eal;

coherence by XXREAL_0:def 1;
end;
theorem
L2: (for B1 , B2 being R_eal holds (for B3 , B4 being Real holds ((B1 = B3 & B2 = B4) implies ( B1 * B2 ) = ( B3 * B4 )))) by XXREAL_3:def 5;
definition
let C3 , C4 being R_eal;
redefine func C3 / C4 -> R_eal;

coherence by XXREAL_0:def 1;
end;
theorem
L4: (for B5 , B6 being R_eal holds (for B7 , B8 being Real holds ((B5 = B7 & B6 = B8) implies ( B5 / B6 ) = ( B7 / B8 ))))
proof
let C5 , C6 being R_eal;
let C7 , C8 being Real;
assume L5: (C5 = C7 & C6 = C8);
reconsider D1 = C7 , D2 = C8 as  real number;
consider C9 being  complex number such that L6: C6 = C9 and L7: ( C6 " ) = ( C9 " ) by L5 , XXREAL_3:def 6;
L8: ( C5 / C6 ) = ( C5 * ( C6 " ) )
.= ( D1 * ( C9 " ) ) by L5 , L7 , XXREAL_3:def 5
.= ( D1 / D2 ) by L5 , L6;
thus L9: thesis by L8;
end;
definition
let C10 being R_eal;
func |.C10 .| -> R_eal equals 
:L10: C10 if ( 0 ) <= C10 otherwise ( - C10 );
coherence;
consistency;
projectivity
;
end;
theorem
L12: (for B9 being R_eal holds (( 0 ) <= B9 implies |. B9 .| = B9)) by L10;
theorem
L13: (for B10 being R_eal holds (B10 < ( 0 ) implies |. B10 .| = ( - B10 ))) by L10;
registration
let C11 being R_eal;
cluster |. C11 .| -> non  negative;
coherence
proof
per cases ;
suppose L14: ( 0 ) <= C11;

L15: |. C11 .| = C11 by L14 , L10;
thus L16: thesis by L15 , L14;
end;
suppose L17: C11 < ( 0 );

L18: |. C11 .| = ( - C11 ) by L17 , L10;
thus L19: thesis by L18 , L17;
end;
end;
end;
theorem
L22: (for B11 , B12 being Real holds ( B11 * B12 ) = ( ( R_EAL B11 ) * ( R_EAL B12 ) ))
proof
let C12 , C13 being Real;
L23: (( R_EAL C12 ) = C12 & ( R_EAL C13 ) = C13) by MEASURE6:def 1;
thus L24: thesis by L23 , L2;
end;
theorem
L25: (for B13 , B14 being Real holds ( B13 / B14 ) = ( ( R_EAL B13 ) / ( R_EAL B14 ) ))
proof
let C14 , C15 being Real;
L26: (( R_EAL C14 ) = C14 & ( R_EAL C15 ) = C15) by MEASURE6:def 1;
thus L27: thesis by L26 , L4;
end;
begin
definition
let C16 being (FinSequence of ( ExtREAL ));
func Sum C16 -> R_eal means 
:L28: (ex B15 being (Function of ( NAT ) , ( ExtREAL )) st (it = ( B15 . ( len C16 ) ) & ( B15 . ( 0 ) ) = ( 0. ) & (for B16 being (Element of ( NAT )) holds (B16 < ( len C16 ) implies ( B15 . ( B16 + 1 ) ) = ( ( B15 . B16 ) + ( C16 . ( B16 + 1 ) ) )))));
existence
proof
defpred S1[ (FinSequence of ( ExtREAL )) ] means (ex B17 being (Function of ( NAT ) , ( ExtREAL )) st (( B17 . ( 0 ) ) = ( 0. ) & (for B18 being (Element of ( NAT )) holds (B18 < ( len $1 ) implies ( B17 . ( B18 + 1 ) ) = ( ( B17 . B18 ) + ( $1 . ( B18 + 1 ) ) )))));
L29: (for B19 being (FinSequence of ( ExtREAL )) holds (for B20 being (Element of ( ExtREAL )) holds (S1[ B19 ] implies S1[ ( B19 ^ <* B20 *> ) ])))
proof
let C17 being (FinSequence of ( ExtREAL ));
let C18 being (Element of ( ExtREAL ));
assume L30: S1[ C17 ];
consider C19 being (Function of ( NAT ) , ( ExtREAL )) such that L31: ( C19 . ( 0 ) ) = ( 0. ) and L32: (for B21 being (Element of ( NAT )) holds (B21 < ( len C17 ) implies ( C19 . ( B21 + 1 ) ) = ( ( C19 . B21 ) + ( C17 . ( B21 + 1 ) ) ))) by L30;
defpred S2[ (Element of ( NAT )) , set ] means (($1 <= ( len C17 ) implies $2 = ( C19 . $1 )) & ($1 = ( ( len C17 ) + 1 ) implies $2 = ( ( C19 . ( len C17 ) ) + C18 )));
L33: (for B22 being (Element of ( NAT )) holds (ex B23 being (Element of ( ExtREAL )) st S2[ B22 , B23 ]))
proof
let C20 being (Element of ( NAT ));
per cases ;
suppose L34: C20 <> ( ( len C17 ) + 1 );

take ( C19 . C20 );
thus L35: thesis by L34;
end;
suppose L36: C20 = ( ( len C17 ) + 1 );

take ( ( C19 . ( len C17 ) ) + C18 );
thus L37: thesis by L36 , NAT_1:13;
end;
end;
consider C21 being (Function of ( NAT ) , ( ExtREAL )) such that L39: (for B24 being (Element of ( NAT )) holds S2[ B24 , ( C21 . B24 ) ]) from FUNCT_2:sch 3(L33);
thus L40: S1[ ( C17 ^ <* C18 *> ) ]
proof
take C21;
thus L41: ( C21 . ( 0 ) ) = ( 0. ) by L31 , L39;
thus L42: (for B25 being (Element of ( NAT )) holds (B25 < ( len ( C17 ^ <* C18 *> ) ) implies ( C21 . ( B25 + 1 ) ) = ( ( C21 . B25 ) + ( ( C17 ^ <* C18 *> ) . ( B25 + 1 ) ) )))
proof
let C22 being (Element of ( NAT ));
assume L43: C22 < ( len ( C17 ^ <* C18 *> ) );
L44: C22 < ( ( len C17 ) + ( len <* C18 *> ) ) by L43 , FINSEQ_1:22;
L45: C22 < ( ( len C17 ) + 1 ) by L44 , FINSEQ_1:39;
L46: C22 <= ( len C17 ) by L45 , NAT_1:13;
L47: ( C21 . C22 ) = ( C19 . C22 ) by L46 , L39;
per cases  by L46 , XXREAL_0:1;
suppose L48: C22 < ( len C17 );

L49: ( C22 + 1 ) <= ( len C17 ) by L48 , INT_1:7;
L50: 1 <= ( C22 + 1 ) by NAT_1:12;
L51: ( C22 + 1 ) in ( Seg ( len C17 ) ) by L50 , L49 , FINSEQ_1:1;
L52: ( C22 + 1 ) in ( dom C17 ) by L51 , FINSEQ_1:def 3;
L53: ( C21 . ( C22 + 1 ) ) = ( C19 . ( C22 + 1 ) ) by L39 , L49;
L54: ( C21 . ( C22 + 1 ) ) = ( ( C21 . C22 ) + ( C17 . ( C22 + 1 ) ) ) by L53 , L32 , L47 , L48;
thus L55: thesis by L54 , L52 , FINSEQ_1:def 7;
end;
suppose L56: C22 = ( len C17 );

L57: ( C21 . ( C22 + 1 ) ) = ( ( C21 . C22 ) + C18 ) by L56 , L39 , L47;
thus L58: thesis by L57 , L56 , FINSEQ_1:42;
end;
end;

end;

end;
L41: S1[ ( <*> ( ExtREAL ) ) ]
proof
reconsider D3 = ( ( NAT ) --> ( 0. ) ) as (Function of ( NAT ) , ( ExtREAL ));
take D3;
thus L42: ( D3 . ( 0 ) ) = ( 0. ) by FUNCOP_1:7;
thus L43: thesis;
end;
L44: (for B26 being (FinSequence of ( ExtREAL )) holds S1[ B26 ]) from FINSEQ_2:sch 2(L41 , L29);
consider C23 being (Function of ( NAT ) , ( ExtREAL )) such that L45: ( C23 . ( 0 ) ) = ( 0. ) and L46: (for B27 being (Element of ( NAT )) holds (B27 < ( len C16 ) implies ( C23 . ( B27 + 1 ) ) = ( ( C23 . B27 ) + ( C16 . ( B27 + 1 ) ) ))) by L44;
take ( C23 . ( len C16 ) );
thus L47: thesis by L45 , L46;
end;
uniqueness
proof
let C24 , C25 being (Element of ( ExtREAL ));
given C26 being (Function of ( NAT ) , ( ExtREAL )) such that
L48: C24 = ( C26 . ( len C16 ) )
and
L49: ( C26 . ( 0 ) ) = ( 0. )
and
L50: (for B28 being (Element of ( NAT )) holds (B28 < ( len C16 ) implies ( C26 . ( B28 + 1 ) ) = ( ( C26 . B28 ) + ( C16 . ( B28 + 1 ) ) )));

given C27 being (Function of ( NAT ) , ( ExtREAL )) such that
L51: C25 = ( C27 . ( len C16 ) )
and
L52: ( C27 . ( 0 ) ) = ( 0. )
and
L53: (for B29 being (Element of ( NAT )) holds (B29 < ( len C16 ) implies ( C27 . ( B29 + 1 ) ) = ( ( C27 . B29 ) + ( C16 . ( B29 + 1 ) ) )));

defpred S3[ (Element of ( NAT )) ] means ($1 <= ( len C16 ) implies ( C26 . $1 ) = ( C27 . $1 ));
L54: (for B30 being (Element of ( NAT )) holds (S3[ B30 ] implies S3[ ( B30 + 1 ) ]))
proof
let C28 being (Element of ( NAT ));
assume L55: S3[ C28 ];
thus L56: S3[ ( C28 + 1 ) ]
proof
assume L57: ( C28 + 1 ) <= ( len C16 );
L58: C28 < ( len C16 ) by L57 , NAT_1:13;
L59: ( C26 . ( C28 + 1 ) ) = ( ( C26 . C28 ) + ( C16 . ( C28 + 1 ) ) ) by L58 , L50;
thus L60: thesis by L59 , L53 , L55 , L58;
end;

end;
L57: S3[ ( 0 ) ] by L49 , L52;
L58: (for B31 being (Element of ( NAT )) holds S3[ B31 ]) from NAT_1:sch 1(L57 , L54);
thus L59: thesis by L58 , L48 , L51;
end;
end;
theorem
L61: ( Sum ( <*> ( ExtREAL ) ) ) = ( 0. )
proof
reconsider D4 = ( <*> ( ExtREAL ) ) as (FinSequence of ( ExtREAL ));
L62: (ex B32 being (Function of ( NAT ) , ( ExtREAL )) st (( Sum D4 ) = ( B32 . ( len D4 ) ) & ( B32 . ( 0 ) ) = ( 0. ) & (for B33 being (Element of ( NAT )) holds (B33 < ( len D4 ) implies ( B32 . ( B33 + 1 ) ) = ( ( B32 . B33 ) + ( D4 . ( B33 + 1 ) ) ))))) by L28;
thus L63: thesis by L62;
end;
theorem
L64: (for B34 being R_eal holds ( Sum <* B34 *> ) = B34)
proof
let C29 being R_eal;
set D5 = <* C29 *>;
consider C30 being (Function of ( NAT ) , ( ExtREAL )) such that L65: ( Sum D5 ) = ( C30 . ( len D5 ) ) and L66: ( C30 . ( 0 ) ) = ( 0. ) and L67: (for B35 being (Element of ( NAT )) holds (B35 < ( len D5 ) implies ( C30 . ( B35 + 1 ) ) = ( ( C30 . B35 ) + ( D5 . ( B35 + 1 ) ) ))) by L28;
L68: ( C30 . ( ( 0 ) + 1 ) ) = ( ( C30 . ( 0 ) ) + ( D5 . ( ( 0 ) + 1 ) ) ) by L67;
L69: ( Sum D5 ) = ( C30 . 1 ) by L65 , FINSEQ_1:39;
L70: ( Sum D5 ) = ( D5 . 1 ) by L69 , L66 , L68 , XXREAL_3:4
.= C29 by FINSEQ_1:40;
thus L71: thesis by L70;
end;
L72: (for B36 being (FinSequence of ( ExtREAL )) holds (for B37 being (Element of ( ExtREAL )) holds ( Sum ( B36 ^ <* B37 *> ) ) = ( ( Sum B36 ) + B37 )))
proof
let C31 being (FinSequence of ( ExtREAL ));
let C32 being (Element of ( ExtREAL ));
consider C33 being (Function of ( NAT ) , ( ExtREAL )) such that L73: ( Sum ( C31 ^ <* C32 *> ) ) = ( C33 . ( len ( C31 ^ <* C32 *> ) ) ) and L74: ( C33 . ( 0 ) ) = ( 0. ) and L75: (for B38 being (Element of ( NAT )) holds (B38 < ( len ( C31 ^ <* C32 *> ) ) implies ( C33 . ( B38 + 1 ) ) = ( ( C33 . B38 ) + ( ( C31 ^ <* C32 *> ) . ( B38 + 1 ) ) ))) by L28;
L76: ( len ( C31 ^ <* C32 *> ) ) = ( ( len C31 ) + ( len <* C32 *> ) ) by FINSEQ_1:22
.= ( ( len C31 ) + 1 ) by FINSEQ_1:39;
L77: (for B39 being (Element of ( NAT )) holds (B39 < ( len C31 ) implies ( C33 . ( B39 + 1 ) ) = ( ( C33 . B39 ) + ( C31 . ( B39 + 1 ) ) )))
proof
let C34 being (Element of ( NAT ));
L78: 1 <= ( C34 + 1 ) by NAT_1:11;
assume L79: C34 < ( len C31 );
L80: ( C34 + 1 ) <= ( len C31 ) by L79 , INT_1:7;
L81: ( C34 + 1 ) in ( Seg ( len C31 ) ) by L80 , L78 , FINSEQ_1:1;
L82: ( C34 + 1 ) in ( dom C31 ) by L81 , FINSEQ_1:def 3;
L83: C34 < ( len ( C31 ^ <* C32 *> ) ) by L76 , L79 , NAT_1:13;
L84: ( C33 . ( C34 + 1 ) ) = ( ( C33 . C34 ) + ( ( C31 ^ <* C32 *> ) . ( C34 + 1 ) ) ) by L83 , L75;
thus L85: thesis by L84 , L82 , FINSEQ_1:def 7;
end;
L86: ( Sum C31 ) = ( C33 . ( len C31 ) ) by L77 , L74 , L28;
L87: ( len C31 ) < ( len ( C31 ^ <* C32 *> ) ) by L76 , NAT_1:13;
L88: ( C33 . ( ( len C31 ) + 1 ) ) = ( ( C33 . ( len C31 ) ) + ( ( C31 ^ <* C32 *> ) . ( ( len C31 ) + 1 ) ) ) by L87 , L75;
thus L89: thesis by L88 , L73 , L76 , L86 , FINSEQ_1:42;
end;
theorem
L90: (for B40 , B41 being R_eal holds ( Sum <* B40 , B41 *> ) = ( B40 + B41 ))
proof
let C35 , C36 being R_eal;
thus L91: ( Sum <* C35 , C36 *> ) = ( Sum ( <* C35 *> ^ <* C36 *> ) ) by FINSEQ_1:def 9
.= ( ( Sum <* C35 *> ) + C36 ) by L72
.= ( C35 + C36 ) by L64;
end;
L92: (for B42 being (FinSequence of ( ExtREAL )) holds ((not ( -infty ) in ( rng B42 )) implies ( Sum B42 ) <> ( -infty )))
proof
defpred S4[ (FinSequence of ( ExtREAL )) ] means ((not ( -infty ) in ( rng $1 )) implies ( Sum $1 ) <> ( -infty ));
L93: (for B43 being (FinSequence of ( ExtREAL )) holds (for B44 being (Element of ( ExtREAL )) holds (S4[ B43 ] implies S4[ ( B43 ^ <* B44 *> ) ])))
proof
let C37 being (FinSequence of ( ExtREAL ));
let C38 being (Element of ( ExtREAL ));
assume L94: S4[ C37 ];
L95: ( Sum ( C37 ^ <* C38 *> ) ) = ( ( Sum C37 ) + C38 ) by L72;
assume L96: (not ( -infty ) in ( rng ( C37 ^ <* C38 *> ) ));
L97: (not ( -infty ) in ( ( rng C37 ) \/ ( rng <* C38 *> ) )) by L96 , FINSEQ_1:31;
L98: (not ( -infty ) in ( rng <* C38 *> )) by L97 , XBOOLE_0:def 3;
L99: (not ( -infty ) in { C38 }) by L98 , FINSEQ_1:38;
L100: C38 <> ( -infty ) by L99 , TARSKI:def 1;
thus L101: thesis by L100 , L94 , L97 , L95 , XBOOLE_0:def 3 , XXREAL_3:17;
end;
L102: S4[ ( <*> ( ExtREAL ) ) ] by L61;
thus L103: (for B45 being (FinSequence of ( ExtREAL )) holds S4[ B45 ]) from FINSEQ_2:sch 2(L102 , L93);
end;
theorem
L104: (for B46 , B47 being (FinSequence of ( ExtREAL )) holds (((not ( -infty ) in ( rng B46 )) & (not ( -infty ) in ( rng B47 ))) implies ( Sum ( B46 ^ B47 ) ) = ( ( Sum B46 ) + ( Sum B47 ) )))
proof
let C39 , C40 being (FinSequence of ( ExtREAL ));
defpred S5[ (FinSequence of ( ExtREAL )) ] means ((not ( -infty ) in ( rng $1 )) implies ( Sum ( C39 ^ $1 ) ) = ( ( Sum C39 ) + ( Sum $1 ) ));
assume L105: (not ( -infty ) in ( rng C39 ));
L106: (for B48 being (FinSequence of ( ExtREAL )) holds (for B49 being (Element of ( ExtREAL )) holds (S5[ B48 ] implies S5[ ( B48 ^ <* B49 *> ) ])))
proof
let C41 being (FinSequence of ( ExtREAL ));
let C42 being (Element of ( ExtREAL ));
assume L107: S5[ C41 ];
thus L108: S5[ ( C41 ^ <* C42 *> ) ]
proof
assume L109: (not ( -infty ) in ( rng ( C41 ^ <* C42 *> ) ));
L110: (not ( -infty ) in ( ( rng C41 ) \/ ( rng <* C42 *> ) )) by L109 , FINSEQ_1:31;
L111: (not ( -infty ) in ( rng C41 )) by L110 , XBOOLE_0:def 3;
L112: ( Sum C41 ) <> ( -infty ) by L111 , L92;
L113: (not ( -infty ) in ( rng <* C42 *> )) by L110 , XBOOLE_0:def 3;
L114: (not ( -infty ) in { C42 }) by L113 , FINSEQ_1:38;
L115: C42 <> ( -infty ) by L114 , TARSKI:def 1;
L116: ( Sum C39 ) <> ( -infty ) by L105 , L92;
L117: ( C39 ^ ( C41 ^ <* C42 *> ) ) = ( ( C39 ^ C41 ) ^ <* C42 *> ) by FINSEQ_1:32;
thus L118: ( Sum ( C39 ^ ( C41 ^ <* C42 *> ) ) ) = ( ( ( Sum C39 ) + ( Sum C41 ) ) + C42 ) by L117 , L107 , L110 , L72 , XBOOLE_0:def 3
.= ( ( Sum C39 ) + ( ( Sum C41 ) + C42 ) ) by L115 , L116 , L112 , XXREAL_3:29
.= ( ( Sum C39 ) + ( Sum ( C41 ^ <* C42 *> ) ) ) by L72;
end;

end;
assume L109: (not ( -infty ) in ( rng C40 ));
L110: S5[ ( <*> ( ExtREAL ) ) ]
proof
set D6 = ( <*> ( ExtREAL ) );
assume L111: (not ( -infty ) in ( rng D6 ));
thus L112: ( Sum ( C39 ^ D6 ) ) = ( Sum C39 ) by FINSEQ_1:34
.= ( ( Sum C39 ) + ( Sum D6 ) ) by L61 , XXREAL_3:4;
end;
L113: (for B50 being (FinSequence of ( ExtREAL )) holds S5[ B50 ]) from FINSEQ_2:sch 2(L110 , L106);
thus L114: thesis by L113 , L109;
end;
L115: (for B51 , B52 being Nat holds (B52 in ( Seg ( B51 + 1 ) ) implies (ex B53 being (Permutation of ( Seg ( B51 + 1 ) )) st (for B54 being (Element of ( NAT )) holds (B54 in ( Seg ( B51 + 1 ) ) implies ((B54 < B52 implies ( B53 . B54 ) = B54) & (B54 = B52 implies ( B53 . B54 ) = ( B51 + 1 )) & (B54 > B52 implies ( B53 . B54 ) = ( B54 - 1 ))))))))
proof
let C43 , C44 being Nat;
defpred S6[ (Element of ( NAT )) , set ] means (($1 < C44 implies $2 = $1) & ($1 = C44 implies $2 = ( C43 + 1 )) & ($1 > C44 implies $2 = ( $1 - 1 )));
assume L116: C44 in ( Seg ( C43 + 1 ) );
L117: (for B55 being (Element of ( NAT )) holds (B55 in ( Seg ( C43 + 1 ) ) implies (ex B56 being (Element of ( NAT )) st S6[ B55 , B56 ])))
proof
let C45 being (Element of ( NAT ));
assume L118: C45 in ( Seg ( C43 + 1 ) );
per cases  by XXREAL_0:1;
suppose L119: C45 < C44;

take C45;
thus L120: thesis by L119;
end;
suppose L121: C45 = C44;

take ( C43 + 1 );
thus L122: thesis by L121;
end;
suppose L123: C45 > C44;

L124: 1 <= C44 by L116 , FINSEQ_1:1;
reconsider D7 = ( C45 - 1 ) as (Element of ( NAT )) by L124 , L123 , INT_1:5 , XXREAL_0:2;
take D7;
thus L125: thesis by L123;
end;
end;
consider C46 being (FinSequence of ( NAT )) such that L127: ( dom C46 ) = ( Seg ( C43 + 1 ) ) and L128: (for B57 being (Element of ( NAT )) holds (B57 in ( Seg ( C43 + 1 ) ) implies S6[ B57 , ( C46 /. B57 ) ])) from RECDEF_1:sch 17(L117);
L129: (for B58 being (Element of ( NAT )) holds (B58 in ( Seg ( C43 + 1 ) ) implies (B58 = C44 iff ( C46 /. B58 ) = ( C43 + 1 ))))
proof
let C47 being (Element of ( NAT ));
assume L130: C47 in ( Seg ( C43 + 1 ) );
thus L131: (C47 = C44 implies ( C46 /. C47 ) = ( C43 + 1 )) by L130 , L128;
thus L132: (( C46 /. C47 ) = ( C43 + 1 ) implies C47 = C44)
proof
assume L133: ( C46 /. C47 ) = ( C43 + 1 );
per cases  by XXREAL_0:1;
suppose L134: C47 = C44;

thus L135: thesis by L134;
end;
suppose L136: C47 < C44;

L137: ( C43 + 1 ) < C44 by L136 , L128 , L130 , L133;
thus L138: thesis by L137 , L116 , FINSEQ_1:1;
end;
suppose L139: C47 > C44;

L140: ( C47 - 1 ) = ( C43 + 1 ) by L139 , L128 , L130 , L133;
L141: C47 >= ( ( C43 + 1 ) + 1 ) by L140;
L142: C47 > ( C43 + 1 ) by L141 , NAT_1:13;
thus L143: thesis by L142 , L130 , FINSEQ_1:1;
end;
end;

end;
L133: (for B59 being (Element of ( NAT )) holds (B59 in ( Seg ( C43 + 1 ) ) implies ((B59 < C44 implies ( C46 . B59 ) = B59) & (B59 = C44 implies ( C46 . B59 ) = ( C43 + 1 )) & (B59 > C44 implies ( C46 . B59 ) = ( B59 - 1 )))))
proof
let C48 being (Element of ( NAT ));
assume L134: C48 in ( Seg ( C43 + 1 ) );
L135: ( C46 /. C48 ) = ( C46 . C48 ) by L134 , L127 , PARTFUN1:def 6;
thus L136: thesis by L135 , L128 , L134;
end;
L137: (for B60 being set holds (B60 in ( rng C46 ) iff B60 in ( Seg ( C43 + 1 ) )))
proof
let C49 being set;
thus L138: (C49 in ( rng C46 ) implies C49 in ( Seg ( C43 + 1 ) ))
proof
assume L139: C49 in ( rng C46 );
consider C50 being set such that L140: C50 in ( Seg ( C43 + 1 ) ) and L141: ( C46 . C50 ) = C49 by L139 , L127 , FUNCT_1:def 3;
reconsider D8 = C50 as (Element of ( NAT )) by L140;
per cases  by XXREAL_0:1;
suppose L142: D8 < C44;

thus L143: thesis by L142 , L133 , L140 , L141;
end;
suppose L144: D8 = C44;

L145: C49 = ( C43 + 1 ) by L144 , L133 , L140 , L141;
thus L146: thesis by L145 , FINSEQ_1:4;
end;
suppose L147: D8 > C44;

L148: C49 = ( D8 - 1 ) by L147 , L133 , L140 , L141;
L149: 1 <= C44 by L116 , FINSEQ_1:1;
reconsider D9 = C49 as (Element of ( NAT )) by L149 , L147 , L148 , INT_1:5 , XXREAL_0:2;
L150: D8 <= ( C43 + 1 ) by L140 , FINSEQ_1:1;
L151: D9 <= C43 by L150 , L148 , XREAL_1:20;
L152: D9 <= ( C43 + 1 ) by L151 , NAT_1:12;
L153: 1 < ( D9 + 1 ) by L147 , L148 , L149 , XXREAL_0:2;
L154: 1 <= D9 by L153 , NAT_1:13;
thus L155: thesis by L154 , L152 , FINSEQ_1:1;
end;
end;

thus L157: (C49 in ( Seg ( C43 + 1 ) ) implies C49 in ( rng C46 ))
proof
assume L158: C49 in ( Seg ( C43 + 1 ) );
reconsider D10 = C49 as (Element of ( NAT )) by L158;
L159: D10 <= ( C43 + 1 ) by L158 , FINSEQ_1:1;
L160: (D10 = ( C43 + 1 ) or D10 < ( C43 + 1 )) by L159 , XXREAL_0:1;
per cases  by L160 , NAT_1:13;
suppose L161: D10 < C44;

L162: ( C46 . D10 ) = D10 by L161 , L133 , L158;
thus L163: thesis by L162 , L127 , L158 , FUNCT_1:3;
end;
suppose L164: (C44 <= D10 & D10 <= C43);

L165: 1 <= ( D10 + 1 ) by NAT_1:12;
L166: ( D10 + 1 ) <= ( C43 + 1 ) by L164 , XREAL_1:6;
L167: ( D10 + 1 ) in ( Seg ( C43 + 1 ) ) by L166 , L165 , FINSEQ_1:1;
L168: C44 < ( D10 + 1 ) by L164 , NAT_1:13;
L169: ( C46 . ( D10 + 1 ) ) = ( ( D10 + 1 ) - 1 ) by L168 , L133 , L167
.= D10;
thus L170: thesis by L169 , L127 , L167 , FUNCT_1:3;
end;
suppose L171: D10 = ( C43 + 1 );

L172: ( C46 . C44 ) = D10 by L171 , L116 , L133;
thus L173: thesis by L172 , L116 , L127 , FUNCT_1:3;
end;
end;

end;
L158: ( rng C46 ) = ( Seg ( C43 + 1 ) ) by L137 , TARSKI:1;
L159: C46 is (Function of ( Seg ( C43 + 1 ) ) , ( Seg ( C43 + 1 ) )) by L158 , L127 , FUNCT_2:1;
L160: (for B61 being (Element of ( NAT )) holds ((B61 in ( Seg ( C43 + 1 ) ) & ( C46 /. B61 ) <> ( C43 + 1 )) implies (B61 < C44 iff ( C46 /. B61 ) < C44)))
proof
let C51 being (Element of ( NAT ));
assume that
L161: C51 in ( Seg ( C43 + 1 ) )
and
L162: ( C46 /. C51 ) <> ( C43 + 1 );
thus L163: (C51 < C44 implies ( C46 /. C51 ) < C44) by L128 , L161;
thus L164: (( C46 /. C51 ) < C44 implies C51 < C44)
proof
assume L165: ( C46 /. C51 ) < C44;
per cases  by XXREAL_0:1;
suppose L166: C51 < C44;

thus L167: thesis by L166;
end;
suppose L168: C51 = C44;

thus L169: thesis by L168 , L128 , L161 , L162;
end;
suppose L170: C51 > C44;

L171: ( C46 /. C51 ) = ( C51 - 1 ) by L170 , L128 , L161;
L172: ( ( C51 - 1 ) + 1 ) < ( C44 + 1 ) by L171 , L165 , XREAL_1:8;
thus L173: thesis by L172 , L170 , NAT_1:13;
end;
end;

end;
L165: (for B62 , B63 being set holds ((B62 in ( Seg ( C43 + 1 ) ) & B63 in ( Seg ( C43 + 1 ) ) & ( C46 . B62 ) = ( C46 . B63 )) implies B62 = B63))
proof
let C52 , C53 being set;
assume that
L166: C52 in ( Seg ( C43 + 1 ) )
and
L167: C53 in ( Seg ( C43 + 1 ) )
and
L168: ( C46 . C52 ) = ( C46 . C53 );
reconsider D11 = C52 as (Element of ( NAT )) by L166;
L169: ( C46 /. D11 ) = ( C46 . D11 ) by L127 , L166 , PARTFUN1:def 6;
reconsider D12 = C53 as (Element of ( NAT )) by L167;
L170: ( C46 /. D12 ) = ( C46 . D12 ) by L127 , L167 , PARTFUN1:def 6;
per cases ;
suppose L171: ( C46 /. D11 ) = ( C43 + 1 );

L172: D11 = C44 by L171 , L129 , L166;
thus L173: thesis by L172 , L129 , L167 , L168 , L169 , L170 , L171;
end;
suppose L174: (( C46 /. D11 ) <> ( C43 + 1 ) & ( C46 /. D11 ) < C44);

L175: D11 < C44 by L174 , L160 , L166;
L176: ( C46 /. D11 ) = D11 by L175 , L128 , L166;
L177: D12 < C44 by L160 , L167 , L168 , L169 , L170 , L174;
thus L178: thesis by L177 , L128 , L167 , L168 , L169 , L170 , L176;
end;
suppose L179: (( C46 /. D11 ) <> ( C43 + 1 ) & ( C46 /. D11 ) >= C44);

L180: D11 <> C44 by L179 , L129 , L166;
L181: D11 >= C44 by L160 , L166 , L179;
L182: D11 > C44 by L181 , L180 , XXREAL_0:1;
L183: ( C46 /. D11 ) = ( D11 - 1 ) by L182 , L128 , L166;
L184: D12 <> C44 by L129 , L167 , L168 , L169 , L170 , L179;
L185: D12 >= C44 by L160 , L167 , L168 , L169 , L170 , L179;
L186: D12 > C44 by L185 , L184 , XXREAL_0:1;
L187: ( C46 /. D12 ) = ( D12 - 1 ) by L186 , L128 , L167;
thus L188: thesis by L187 , L127 , L167 , L168 , L169 , L183 , PARTFUN1:def 6 , XCMPLX_1:19;
end;
end;
L190: C46 is  one-to-one by L165 , L127 , FUNCT_1:def 4;
reconsider D13 = C46 as (Permutation of ( Seg ( C43 + 1 ) )) by L190 , L158 , L159 , FUNCT_2:57;
take D13;
thus L191: thesis by L133;
end;
L192: (for B64 , B65 being Nat holds (for B66 , B67 being (Permutation of ( Seg ( B64 + 1 ) )) holds (for B68 being (FinSequence of ( Seg ( B64 + 1 ) )) holds ((B68 = B66 & B65 = ( B66 . ( B64 + 1 ) ) & (for B69 being (Element of ( NAT )) holds (B69 in ( Seg ( B64 + 1 ) ) implies ((B69 < B65 implies ( B67 . B69 ) = B69) & (B69 = B65 implies ( B67 . B69 ) = ( B64 + 1 )) & (B69 > B65 implies ( B67 . B69 ) = ( B69 - 1 )))))) implies ( B67 * ( B68 | B64 ) ) is (Permutation of ( Seg B64 ))))))
proof
let C54 , C55 being Nat;
let C56 , C57 being (Permutation of ( Seg ( C54 + 1 ) ));
let C58 being (FinSequence of ( Seg ( C54 + 1 ) ));
assume that
L193: C58 = C56
and
L194: C55 = ( C56 . ( C54 + 1 ) )
and
L195: (for B70 being (Element of ( NAT )) holds (B70 in ( Seg ( C54 + 1 ) ) implies ((B70 < C55 implies ( C57 . B70 ) = B70) & (B70 = C55 implies ( C57 . B70 ) = ( C54 + 1 )) & (B70 > C55 implies ( C57 . B70 ) = ( B70 - 1 )))));
L196: ( dom C57 ) = ( Seg ( C54 + 1 ) ) by FUNCT_2:def 1;
reconsider D14 = ( C57 * ( C58 | C54 ) ) as (FinSequence of ( Seg ( C54 + 1 ) )) by FINSEQ_2:32;
L197: ( ( 0 ) + C54 ) <= ( 1 + C54 ) by XREAL_1:6;
L198: ( Seg C54 ) c= ( Seg ( C54 + 1 ) ) by L197 , FINSEQ_1:5;
L199: ( C58 | C54 ) = ( C58 | ( Seg C54 ) ) by FINSEQ_1:def 15;
L200: ( C58 | C54 ) is  one-to-one by L199 , L193 , FUNCT_1:52;
L201: ( rng C57 ) = ( Seg ( C54 + 1 ) ) by FUNCT_2:def 3;
L202: ( dom C56 ) = ( Seg ( C54 + 1 ) ) by FUNCT_2:def 1;
L203: ( len C58 ) = ( C54 + 1 ) by L202 , L193 , FINSEQ_1:def 3;
L204: ( len ( C58 | C54 ) ) = C54 by L203 , L197 , FINSEQ_1:59;
L205: ( len D14 ) = C54 by L204 , FINSEQ_2:33;
L206: ( dom D14 ) = ( Seg C54 ) by L205 , FINSEQ_1:def 3;
L207: ( rng C56 ) = ( Seg ( C54 + 1 ) ) by FUNCT_2:def 3;
L208: C55 in ( Seg ( C54 + 1 ) ) by L207 , L194 , L202 , FINSEQ_1:4 , FUNCT_1:3;
L209: C55 <= ( C54 + 1 ) by L208 , FINSEQ_1:1;
L210: (for B71 being set holds (B71 in ( rng D14 ) iff B71 in ( Seg C54 )))
proof
let C59 being set;
thus L211: (C59 in ( rng D14 ) implies C59 in ( Seg C54 ))
proof
assume L212: C59 in ( rng D14 );
consider C60 being set such that L213: C60 in ( Seg C54 ) and L214: ( D14 . C60 ) = C59 by L212 , L206 , FUNCT_1:def 3;
reconsider D15 = C60 as (Element of ( NAT )) by L213;
L215: D15 <= C54 by L213 , FINSEQ_1:1;
L216: ( ( C58 | C54 ) . D15 ) = ( C56 . D15 ) by L215 , L193 , FINSEQ_3:112;
L217: C59 = ( C57 . ( C56 . D15 ) ) by L216 , L206 , L213 , L214 , FUNCT_1:12;
L218: ( C56 . D15 ) in ( dom C57 ) by L202 , L207 , L196 , L198 , L213 , FUNCT_1:3;
L219: ( C57 . ( C56 . D15 ) ) in ( rng C57 ) by L218 , FUNCT_1:3;
reconsider D16 = C59 as (Element of ( NAT )) by L219 , L201 , L206 , L213 , L214 , L216 , FUNCT_1:12;
L220: ( C54 + 1 ) in ( dom C56 ) by L202 , FINSEQ_1:4;
L221: ( C56 . D15 ) in ( Seg ( C54 + 1 ) ) by L202 , L207 , L198 , L213 , FUNCT_1:3;
reconsider D17 = ( C56 . D15 ) as (Element of ( NAT )) by L221;
L222: D15 < ( C54 + 1 ) by L215 , NAT_1:13;
L223: D17 <> C55 by L222 , L194 , L202 , L198 , L213 , L220 , FUNCT_1:def 4;
per cases  by L223 , XXREAL_0:1;
suppose L224: D17 < C55;

L225: D16 < C55 by L224 , L195 , L217 , L221;
L226: D16 < ( C54 + 1 ) by L225 , L209 , XXREAL_0:2;
L227: D16 <= C54 by L226 , NAT_1:13;
L228: 1 <= D16 by L201 , L217 , L219 , FINSEQ_1:1;
thus L229: thesis by L228 , L227 , FINSEQ_1:1;
end;
suppose L230: D17 > C55;

L231: D17 <= ( C54 + 1 ) by L221 , FINSEQ_1:1;
L232: D16 = ( D17 - 1 ) by L195 , L217 , L221 , L230;
L233: D16 <= C54 by L232 , L231 , XREAL_1:20;
L234: 1 <= D16 by L201 , L217 , L219 , FINSEQ_1:1;
thus L235: thesis by L234 , L233 , FINSEQ_1:1;
end;
end;

assume L237: C59 in ( Seg C54 );
reconsider D18 = C59 as (Element of ( NAT )) by L237;
per cases ;
suppose L238: D18 < C55;

L239: ( C57 . D18 ) = D18 by L238 , L195 , L198 , L237;
consider C61 being set such that L240: C61 in ( dom C56 ) and L241: D18 = ( C56 . C61 ) by L207 , L198 , L237 , FUNCT_1:def 3;
L242: C61 in ( Seg ( C54 + 1 ) ) by L240;
reconsider D19 = C61 as (Element of ( NAT )) by L242;
L243: D19 <= ( C54 + 1 ) by L240 , FINSEQ_1:1;
L244: D19 < ( C54 + 1 ) by L243 , L194 , L238 , L241 , XXREAL_0:1;
L245: D19 <= C54 by L244 , NAT_1:13;
L246: 1 <= D19 by L240 , FINSEQ_1:1;
L247: D19 in ( dom D14 ) by L246 , L206 , L245 , FINSEQ_1:1;
L248: ( ( C58 | C54 ) . D19 ) = ( C56 . D19 ) by L193 , L245 , FINSEQ_3:112;
L249: ( D14 . D19 ) = D18 by L248 , L239 , L241 , L247 , FUNCT_1:12;
thus L250: thesis by L249 , L247 , FUNCT_1:3;
end;
suppose L251: D18 >= C55;

L252: D18 <= C54 by L237 , FINSEQ_1:1;
L253: ( D18 + 1 ) <= ( C54 + 1 ) by L252 , XREAL_1:6;
L254: 1 <= ( D18 + 1 ) by NAT_1:12;
L255: ( D18 + 1 ) in ( Seg ( C54 + 1 ) ) by L254 , L253 , FINSEQ_1:1;
consider C62 being set such that L256: C62 in ( dom C56 ) and L257: ( D18 + 1 ) = ( C56 . C62 ) by L255 , L207 , FUNCT_1:def 3;
L258: C62 in ( Seg ( C54 + 1 ) ) by L256;
reconsider D20 = C62 as (Element of ( NAT )) by L258;
L259: D20 <= ( C54 + 1 ) by L256 , FINSEQ_1:1;
L260: D20 <> ( C54 + 1 ) by L194 , L251 , L257 , NAT_1:13;
L261: D20 < ( C54 + 1 ) by L260 , L259 , XXREAL_0:1;
L262: D20 <= C54 by L261 , NAT_1:13;
L263: 1 <= D20 by L256 , FINSEQ_1:1;
L264: D20 in ( Seg C54 ) by L263 , L262 , FINSEQ_1:1;
L265: ( D18 + 1 ) > C55 by L251 , NAT_1:13;
L266: ( C57 . ( D18 + 1 ) ) = ( ( D18 + 1 ) - 1 ) by L265 , L195 , L255
.= D18;
L267: ( ( C58 | C54 ) . D20 ) = ( C56 . D20 ) by L193 , L262 , FINSEQ_3:112;
L268: ( D14 . D20 ) = ( C57 . ( C56 . D20 ) ) by L267 , L206 , L264 , FUNCT_1:12;
thus L269: thesis by L268 , L206 , L257 , L266 , L264 , FUNCT_1:3;
end;
end;
L271: ( rng D14 ) = ( Seg C54 ) by L210 , TARSKI:1;
L272: ( C57 * ( C58 | C54 ) ) is (Function of ( Seg C54 ) , ( Seg C54 )) by L271 , L206 , FUNCT_2:1;
thus L273: thesis by L272 , L271 , L200 , FUNCT_2:57;
end;
L274: (for B72 , B73 being Nat holds (for B74 being (Permutation of ( Seg ( B72 + 1 ) )) holds (for B75 , B76 being (FinSequence of ( ExtREAL )) holds ((B75 = ( B76 * B74 ) & B73 in ( Seg ( B72 + 1 ) ) & ( len B76 ) = ( B72 + 1 ) & (not ( -infty ) in ( rng B76 )) & (for B77 being (Element of ( NAT )) holds (B77 in ( Seg ( B72 + 1 ) ) implies ((B77 < B73 implies ( B74 . B77 ) = B77) & (B77 = B73 implies ( B74 . B77 ) = ( B72 + 1 )) & (B77 > B73 implies ( B74 . B77 ) = ( B77 - 1 )))))) implies ( Sum B75 ) = ( Sum B76 )))))
proof
let C63 , C64 being Nat;
let C65 being (Permutation of ( Seg ( C63 + 1 ) ));
let C66 , C67 being (FinSequence of ( ExtREAL ));
assume that
L275: C66 = ( C67 * C65 )
and
L276: C64 in ( Seg ( C63 + 1 ) )
and
L277: ( len C67 ) = ( C63 + 1 )
and
L278: (not ( -infty ) in ( rng C67 ))
and
L279: (for B78 being (Element of ( NAT )) holds (B78 in ( Seg ( C63 + 1 ) ) implies ((B78 < C64 implies ( C65 . B78 ) = B78) & (B78 = C64 implies ( C65 . B78 ) = ( C63 + 1 )) & (B78 > C64 implies ( C65 . B78 ) = ( B78 - 1 )))));
L280: 1 <= C64 by L276 , FINSEQ_1:1;
L281: ( C64 - 1 ) >= ( 1 - 1 ) by L280 , XREAL_1:9;
L282: ( C64 -' 1 ) = ( C64 - 1 ) by L281 , XREAL_0:def 2;
set D21 = ( C67 | C63 );
L283: D21 = ( ( D21 | ( C64 -' 1 ) ) ^ ( D21 /^ ( C64 -' 1 ) ) ) by RFINSEQ:8;
reconsider D22 = C65 as (FinSequence of ( Seg ( C63 + 1 ) )) by FINSEQ_2:25;
L284: ( dom C65 ) = ( Seg ( C63 + 1 ) ) by FUNCT_2:def 1;
L285: ( len D22 ) = ( C63 + 1 ) by L284 , FINSEQ_1:def 3;
L286: C64 <= ( C63 + 1 ) by L276 , FINSEQ_1:1;
L287: ( C64 -' 1 ) <= ( ( C63 + 1 ) - 1 ) by L286 , L282 , XREAL_1:9;
L288: ( dom C67 ) = ( Seg ( C63 + 1 ) ) by L277 , FINSEQ_1:def 3;
L289: C67 is (Function of ( Seg ( C63 + 1 ) ) , ( ExtREAL )) by L288 , FINSEQ_2:26;
L290: ( len C66 ) = ( C63 + 1 ) by L289 , L275 , L285 , FINSEQ_2:33;
L291: ( len ( C66 /^ C64 ) ) = ( ( C63 + 1 ) - C64 ) by L290 , L286 , RFINSEQ:def 1;
L292: C63 <= ( C63 + 1 ) by NAT_1:11;
L293: ( len ( C66 | ( C64 -' 1 ) ) ) = ( C64 -' 1 ) by L292 , L287 , L290 , FINSEQ_1:59 , XXREAL_0:2;
L294: ( dom C66 ) = ( Seg ( C63 + 1 ) ) by L290 , FINSEQ_1:def 3;
L295: (for B79 being Nat holds ((1 <= B79 & B79 <= ( C64 -' 1 )) implies ( ( C66 | ( C64 -' 1 ) ) . B79 ) = ( ( D21 | ( C64 -' 1 ) ) . B79 )))
proof
let C68 being Nat;
assume that
L296: 1 <= C68
and
L297: C68 <= ( C64 -' 1 );
L298: ( ( C66 | ( C64 -' 1 ) ) . C68 ) = ( C66 . C68 ) by L297 , FINSEQ_3:112;
L299: ( D21 . C68 ) = ( C67 . C68 ) by L287 , L297 , FINSEQ_3:112 , XXREAL_0:2;
L300: ( ( D21 | ( C64 -' 1 ) ) . C68 ) = ( D21 . C68 ) by L297 , FINSEQ_3:112;
L301: C68 < ( ( C64 -' 1 ) + 1 ) by L297 , NAT_1:13;
L302: C68 <= C63 by L287 , L297 , XXREAL_0:2;
L303: C68 <= ( C63 + 1 ) by L302 , L292 , XXREAL_0:2;
L304: C68 in ( Seg ( C63 + 1 ) ) by L303 , L296 , FINSEQ_1:1;
L305: ( C66 . C68 ) = ( C67 . ( C65 . C68 ) ) by L304 , L275 , L294 , FUNCT_1:12;
thus L306: thesis by L305 , L279 , L282 , L298 , L300 , L299 , L304 , L301;
end;
L307: ( ( 0 ) + C63 ) <= ( 1 + C63 ) by XREAL_1:6;
L308: ( len D21 ) = C63 by L307 , L277 , FINSEQ_1:59;
L309: ( len ( D21 | ( C64 -' 1 ) ) ) = ( C64 -' 1 ) by L308 , L287 , FINSEQ_1:59;
L310: ( len ( D21 /^ ( C64 -' 1 ) ) ) = ( C63 - ( C64 - 1 ) ) by L282 , L287 , L308 , RFINSEQ:def 1;
L311: (for B80 being Nat holds ((1 <= B80 & B80 <= ( ( C63 + 1 ) - C64 )) implies ( ( C66 /^ C64 ) . B80 ) = ( ( D21 /^ ( C64 -' 1 ) ) . B80 )))
proof
reconsider D23 = ( ( C63 + 1 ) - C64 ) as (Element of ( NAT )) by L286 , INT_1:5;
let C69 being Nat;
assume that
L312: 1 <= C69
and
L313: C69 <= ( ( C63 + 1 ) - C64 );
L314: ( C69 + C64 ) <= ( C63 + 1 ) by L313 , XREAL_1:19;
L315: C69 in ( Seg D23 ) by L312 , L313 , FINSEQ_1:1;
L316: C69 in ( dom ( D21 /^ ( C64 -' 1 ) ) ) by L315 , L310 , FINSEQ_1:def 3;
L317: ( ( D21 /^ ( C64 -' 1 ) ) . C69 ) = ( D21 . ( C69 + ( C64 -' 1 ) ) ) by L316 , L287 , L308 , RFINSEQ:def 1;
L318: ( C69 + ( C64 -' 1 ) ) = ( ( C69 + C64 ) - 1 ) by L282;
L319: ( C69 + ( C64 -' 1 ) ) <= C63 by L318 , L314 , XREAL_1:20;
L320: ( ( D21 /^ ( C64 -' 1 ) ) . C69 ) = ( C67 . ( ( C69 + C64 ) - 1 ) ) by L319 , L282 , L317 , FINSEQ_3:112;
L321: 1 <= ( C69 + C64 ) by L312 , NAT_1:12;
L322: ( C69 + C64 ) in ( dom C66 ) by L321 , L294 , L314 , FINSEQ_1:1;
L323: ( C66 . ( C69 + C64 ) ) = ( C67 . ( C65 . ( C69 + C64 ) ) ) by L322 , L275 , FUNCT_1:12;
L324: ( dom ( C66 /^ C64 ) ) = ( Seg D23 ) by L291 , FINSEQ_1:def 3;
L325: ( ( C66 /^ C64 ) . C69 ) = ( C66 . ( C69 + C64 ) ) by L324 , L286 , L290 , L315 , RFINSEQ:def 1;
L326: ( C69 + C64 ) >= ( 1 + C64 ) by L312 , XREAL_1:6;
L327: ( C69 + C64 ) > C64 by L326 , NAT_1:13;
L328: ( C69 + C64 ) in ( Seg ( C63 + 1 ) ) by L314 , L321 , FINSEQ_1:1;
thus L329: thesis by L328 , L279 , L325 , L320 , L323 , L327;
end;
L330: ( C66 /^ C64 ) = ( D21 /^ ( C64 -' 1 ) ) by L311 , L291 , L310 , FINSEQ_1:14;
L331: C66 = ( ( ( C66 | ( C64 -' 1 ) ) ^ <* ( C66 . C64 ) *> ) ^ ( C66 /^ C64 ) ) by L280 , L286 , L290 , FINSEQ_5:84;
L332: ( rng C66 ) = ( ( rng ( ( C66 | ( C64 -' 1 ) ) ^ <* ( C66 . C64 ) *> ) ) \/ ( rng ( C66 /^ C64 ) ) ) by L331 , FINSEQ_1:31;
L333: ( C65 . C64 ) = ( C63 + 1 ) by L276 , L279;
L334: ( C66 . C64 ) = ( C67 . ( C63 + 1 ) ) by L333 , L275 , L276 , L294 , FUNCT_1:12;
L335: D21 = ( C67 | ( Seg C63 ) ) by FINSEQ_1:def 15;
L336: ( rng D21 ) c= ( rng C67 ) by L335 , RELAT_1:70;
L337: (not ( -infty ) in ( rng D21 )) by L336 , L278;
L338: (not ( -infty ) in ( ( rng ( D21 | ( C64 -' 1 ) ) ) \/ ( rng ( D21 /^ ( C64 -' 1 ) ) ) )) by L337 , L283 , FINSEQ_1:31;
L339: (not ( -infty ) in ( rng ( D21 | ( C64 -' 1 ) ) )) by L338 , XBOOLE_0:def 3;
L340: (not ( -infty ) in ( rng C66 )) by L275 , L278 , FUNCT_1:14;
L341: (not ( -infty ) in ( rng ( ( C66 | ( C64 -' 1 ) ) ^ <* ( C66 . C64 ) *> ) )) by L340 , L332 , XBOOLE_0:def 3;
L342: (not ( -infty ) in ( ( rng ( C66 | ( C64 -' 1 ) ) ) \/ ( rng <* ( C66 . C64 ) *> ) )) by L341 , FINSEQ_1:31;
L343: (not ( -infty ) in ( rng ( C66 | ( C64 -' 1 ) ) )) by L342 , XBOOLE_0:def 3;
L344: ( Sum ( C66 | ( C64 -' 1 ) ) ) <> ( -infty ) by L343 , L92;
L345: (not ( -infty ) in ( rng <* ( C66 . C64 ) *> )) by L342 , XBOOLE_0:def 3;
L346: (not ( -infty ) in { ( C66 . C64 ) }) by L345 , FINSEQ_1:39;
L347: ( -infty ) <> ( C66 . C64 ) by L346 , TARSKI:def 1;
L348: (not ( -infty ) in ( rng ( C66 /^ C64 ) )) by L340 , L332 , XBOOLE_0:def 3;
L349: ( Sum ( C66 /^ C64 ) ) <> ( -infty ) by L348 , L92;
L350: ( C67 | ( C63 + 1 ) ) = ( C67 | ( Seg ( C63 + 1 ) ) ) by FINSEQ_1:def 15;
L351: ( C67 | ( C63 + 1 ) ) = C67 by L277 , FINSEQ_1:58;
L352: C67 = ( D21 ^ <* ( C67 . ( C63 + 1 ) ) *> ) by L351 , L288 , L335 , L350 , FINSEQ_1:4 , FINSEQ_5:10;
L353: (not ( -infty ) in ( rng ( D21 /^ ( C64 -' 1 ) ) )) by L338 , XBOOLE_0:def 3;
thus L354: ( Sum C66 ) = ( ( Sum ( ( C66 | ( C64 -' 1 ) ) ^ <* ( C66 . C64 ) *> ) ) + ( Sum ( C66 /^ C64 ) ) ) by L331 , L341 , L348 , L104
.= ( ( ( Sum ( C66 | ( C64 -' 1 ) ) ) + ( C66 . C64 ) ) + ( Sum ( C66 /^ C64 ) ) ) by L72
.= ( ( ( Sum ( C66 | ( C64 -' 1 ) ) ) + ( Sum ( C66 /^ C64 ) ) ) + ( C66 . C64 ) ) by L347 , L344 , L349 , XXREAL_3:29
.= ( ( ( Sum ( D21 | ( C64 -' 1 ) ) ) + ( Sum ( D21 /^ ( C64 -' 1 ) ) ) ) + ( C67 . ( C63 + 1 ) ) ) by L293 , L309 , L295 , L334 , L330 , FINSEQ_1:14
.= ( ( Sum D21 ) + ( C67 . ( C63 + 1 ) ) ) by L283 , L339 , L353 , L104
.= ( Sum C67 ) by L352 , L72;
end;
theorem
L355: (for B81 , B82 being (FinSequence of ( ExtREAL )) holds (for B83 being (Permutation of ( dom B81 )) holds ((B82 = ( B81 * B83 ) & (not ( -infty ) in ( rng B81 ))) implies ( Sum B81 ) = ( Sum B82 ))))
proof
let C70 , C71 being (FinSequence of ( ExtREAL ));
let C72 being (Permutation of ( dom C70 ));
defpred S7[ Nat ] means (for B84 , B85 being (FinSequence of ( ExtREAL )) holds (for B86 being (Permutation of ( Seg $1 )) holds ((( len B84 ) = $1 & B85 = ( B84 * B86 ) & (not ( -infty ) in ( rng B84 ))) implies ( Sum B84 ) = ( Sum B85 ))));
L356: S7[ ( 0 ) ]
proof
let C73 , C74 being (FinSequence of ( ExtREAL ));
let C75 being (Permutation of ( Seg ( 0 ) ));
assume that
L357: ( len C73 ) = ( 0 )
and
L358: C74 = ( C73 * C75 );
L359: C73 = ( <*> ( ExtREAL ) ) by L357;
thus L360: thesis by L359 , L358;
end;
L361: (for B87 being non  empty Nat holds (S7[ B87 ] implies S7[ ( B87 + 1 ) ]))
proof
let C76 being non  empty Nat;
assume L362: S7[ C76 ];
thus L363: S7[ ( C76 + 1 ) ]
proof
let C77 , C78 being (FinSequence of ( ExtREAL ));
let C79 being (Permutation of ( Seg ( C76 + 1 ) ));
assume that
L364: ( len C77 ) = ( C76 + 1 )
and
L365: C78 = ( C77 * C79 )
and
L366: (not ( -infty ) in ( rng C77 ));
reconsider D24 = C79 as (FinSequence of ( Seg ( C76 + 1 ) )) by FINSEQ_2:25;
L367: ( rng C79 ) = ( Seg ( C76 + 1 ) ) by FUNCT_2:def 3;
L368: ( dom C79 ) = ( Seg ( C76 + 1 ) ) by FUNCT_2:def 1;
L369: ( C76 + 1 ) in ( dom C79 ) by L368 , FINSEQ_1:4;
L370: ( C79 . ( C76 + 1 ) ) in ( Seg ( C76 + 1 ) ) by L369 , L367 , FUNCT_1:def 3;
reconsider D25 = ( C79 . ( C76 + 1 ) ) as (Element of ( NAT )) by L370;
consider C80 being (Permutation of ( Seg ( C76 + 1 ) )) such that L371: (for B88 being (Element of ( NAT )) holds (B88 in ( Seg ( C76 + 1 ) ) implies ((B88 < D25 implies ( C80 . B88 ) = B88) & (B88 = D25 implies ( C80 . B88 ) = ( C76 + 1 )) & (B88 > D25 implies ( C80 . B88 ) = ( B88 - 1 ))))) by L370 , L115;
reconsider D26 = ( C80 " ) as (FinSequence of ( Seg ( C76 + 1 ) )) by FINSEQ_2:25;
L372: ( dom C80 ) = ( Seg ( C76 + 1 ) ) by FUNCT_2:def 1;
L373: ( C80 . D25 ) = ( C76 + 1 ) by L370 , L371;
L374: ( C77 . ( C79 . ( C76 + 1 ) ) ) = ( C77 . ( D26 . ( C76 + 1 ) ) ) by L373 , L370 , L372 , FUNCT_1:34;
L375: ( ( 0 ) + C76 ) <= ( 1 + C76 ) by XREAL_1:6;
L376: ( Seg C76 ) c= ( Seg ( C76 + 1 ) ) by L375 , FINSEQ_1:5;
L377: ( dom C77 ) = ( Seg ( C76 + 1 ) ) by L364 , FINSEQ_1:def 3;
L378: C77 is (Function of ( Seg ( C76 + 1 ) ) , ( ExtREAL )) by L377 , FINSEQ_2:26;
reconsider D27 = ( C77 * D26 ) as (FinSequence of ( ExtREAL )) by L378 , FINSEQ_2:32;
L379: ( D27 * C80 ) = ( C77 * ( D26 * C80 ) ) by RELAT_1:36
.= ( C77 * ( id ( Seg ( C76 + 1 ) ) ) ) by L372 , FUNCT_1:39
.= C77 by L377 , RELAT_1:52;
L380: ( len D24 ) = ( C76 + 1 ) by L368 , FINSEQ_1:def 3;
L381: ( len C78 ) = ( C76 + 1 ) by L380 , L365 , L378 , FINSEQ_2:33;
L382: ( dom C78 ) = ( Seg ( C76 + 1 ) ) by L381 , FINSEQ_1:def 3;
L383: ( C78 . ( C76 + 1 ) ) = ( C77 . ( C79 . ( C76 + 1 ) ) ) by L382 , L365 , FINSEQ_1:4 , FUNCT_1:12;
reconsider D28 = ( C80 * ( D24 | C76 ) ) as (Permutation of ( Seg C76 )) by L371 , L192;
L384: ( dom D28 ) = ( Seg C76 ) by FUNCT_2:def 1;
reconsider D29 = D28 as (FinSequence of ( Seg C76 )) by FINSEQ_2:25;
L385: (not ( -infty ) in ( rng D27 )) by L366 , FUNCT_1:14;
L386: ( dom D26 ) = ( rng C80 ) by FUNCT_1:33;
L387: ( dom D26 ) = ( Seg ( C76 + 1 ) ) by L386 , FUNCT_2:def 3;
L388: ( len D26 ) = ( C76 + 1 ) by L387 , FINSEQ_1:def 3;
L389: ( len D27 ) = ( C76 + 1 ) by L388 , L378 , FINSEQ_2:33;
L390: ( dom D27 ) = ( Seg ( C76 + 1 ) ) by L389 , FINSEQ_1:def 3;
L391: ( len ( D27 | C76 ) ) = C76 by L389 , L375 , FINSEQ_1:59;
L392: ( C78 | C76 ) = ( ( D27 | C76 ) * D28 )
proof
L393: ( dom ( D27 | C76 ) ) = ( Seg C76 ) by L391 , FINSEQ_1:def 3;
L394: ( D27 | C76 ) is (Function of ( Seg C76 ) , ( ExtREAL )) by L393 , FINSEQ_2:26;
reconsider D30 = ( ( D27 | C76 ) * D29 ) as (FinSequence of ( ExtREAL )) by L394 , FINSEQ_2:32;
L395: C76 in ( NAT ) by ORDINAL1:def 12;
L396: ( len D29 ) = C76 by L395 , L384 , FINSEQ_1:def 3;
L397: ( len D30 ) = C76 by L396 , L394 , FINSEQ_2:33;
L398: (for B89 being Nat holds ((1 <= B89 & B89 <= C76) implies ( ( C78 | C76 ) . B89 ) = ( ( ( D27 | C76 ) * D28 ) . B89 )))
proof
let C81 being Nat;
assume that
L399: 1 <= C81
and
L400: C81 <= C76;
L401: C81 in ( Seg C76 ) by L399 , L400 , FINSEQ_1:1;
L402: ( C79 . C81 ) in ( rng C79 ) by L401 , L368 , L376 , FUNCT_1:3;
L403: C81 in ( dom D30 ) by L397 , L401 , FINSEQ_1:def 3;
L404: ( ( ( D27 | C76 ) * D28 ) . C81 ) = ( ( D27 | C76 ) . ( D28 . C81 ) ) by L403 , FUNCT_1:12;
L405: ( rng D28 ) = ( Seg C76 ) by FUNCT_2:def 3;
L406: ( D28 . C81 ) in ( Seg C76 ) by L405 , L384 , L401 , FUNCT_1:3;
reconsider D31 = ( D28 . C81 ) as (Element of ( NAT )) by L406;
L407: D31 <= C76 by L406 , FINSEQ_1:1;
L408: ( ( ( D27 | C76 ) * D28 ) . C81 ) = ( D27 . ( D28 . C81 ) ) by L407 , L404 , FINSEQ_3:112;
L409: ( ( D24 | C76 ) . C81 ) = ( C79 . C81 ) by L400 , FINSEQ_3:112;
L410: ( D28 . C81 ) = ( C80 . ( C79 . C81 ) ) by L409 , L384 , L401 , FUNCT_1:12;
L411: ( ( C78 | C76 ) . C81 ) = ( C78 . C81 ) by L400 , FINSEQ_3:112;
L412: ( D27 . ( D28 . C81 ) ) = ( C77 . ( D26 . ( D28 . C81 ) ) ) by L390 , L376 , L406 , FUNCT_1:12;
L413: ( ( ( D27 | C76 ) * D28 ) . C81 ) = ( C77 . ( C79 . C81 ) ) by L412 , L367 , L372 , L410 , L408 , L402 , FUNCT_1:34;
thus L414: thesis by L413 , L365 , L382 , L376 , L411 , L401 , FUNCT_1:12;
end;
L415: ( len ( C78 | C76 ) ) = C76 by L381 , L375 , FINSEQ_1:59;
thus L416: thesis by L415 , L397 , L398 , FINSEQ_1:14;
end;
L417: ( C78 | C76 ) = ( C78 | ( Seg C76 ) ) by FINSEQ_1:def 15;
L418: C78 = ( ( C78 | C76 ) ^ <* ( C78 . ( C76 + 1 ) ) *> ) by L417 , L381 , FINSEQ_3:55;
L419: ( Sum C78 ) = ( ( Sum ( C78 | C76 ) ) + ( C78 . ( C76 + 1 ) ) ) by L418 , L72;
L420: ( D27 | C76 ) = ( D27 | ( Seg C76 ) ) by FINSEQ_1:def 15;
L421: D27 = ( ( D27 | C76 ) ^ <* ( D27 . ( C76 + 1 ) ) *> ) by L420 , L389 , FINSEQ_3:55;
L422: ( Sum D27 ) = ( ( Sum ( D27 | C76 ) ) + ( D27 . ( C76 + 1 ) ) ) by L421 , L72;
L423: ( rng ( D27 | C76 ) ) c= ( rng D27 ) by L420 , RELAT_1:70;
L424: (not ( -infty ) in ( rng ( D27 | C76 ) )) by L423 , L366 , FUNCT_1:14;
L425: ( Sum ( C78 | C76 ) ) = ( Sum ( D27 | C76 ) ) by L424 , L362 , L391 , L392;
L426: ( D27 . ( C76 + 1 ) ) = ( C77 . ( D26 . ( C76 + 1 ) ) ) by L390 , FINSEQ_1:4 , FUNCT_1:12;
thus L427: thesis by L426 , L370 , L371 , L389 , L425 , L374 , L383 , L419 , L422 , L385 , L379 , L274;
end;

end;
L364: S7[ 1 ]
proof
let C82 , C83 being (FinSequence of ( ExtREAL ));
let C84 being (Permutation of ( Seg 1 ));
assume that
L365: ( len C82 ) = 1
and
L366: C83 = ( C82 * C84 );
reconsider D32 = C84 as (FinSequence of ( Seg 1 )) by FINSEQ_2:25;
L367: ( dom C84 ) = ( Seg 1 ) by FUNCT_2:def 1;
L368: ( len D32 ) = 1 by L367 , FINSEQ_1:def 3;
L369: ( dom C82 ) = ( Seg 1 ) by L365 , FINSEQ_1:def 3;
L370: C82 is (Function of ( Seg 1 ) , ( ExtREAL )) by L369 , FINSEQ_2:26;
L371: ( len C83 ) = 1 by L370 , L366 , L368 , FINSEQ_2:33;
L372: C83 = <* ( C83 . 1 ) *> by L371 , FINSEQ_1:40;
L373: ( rng C83 ) = { ( C83 . 1 ) } by L372 , FINSEQ_1:39;
L374: ( C83 . 1 ) in ( rng C83 ) by L373 , TARSKI:def 1;
L375: ( C83 . 1 ) in ( rng C82 ) by L374 , L366 , FUNCT_1:14;
L376: C82 = <* ( C82 . 1 ) *> by L365 , FINSEQ_1:40;
L377: ( rng C82 ) = { ( C82 . 1 ) } by L376 , FINSEQ_1:39;
thus L378: thesis by L377 , L376 , L372 , L375 , TARSKI:def 1;
end;
L379: (for B90 being non  empty Nat holds S7[ B90 ]) from NAT_1:sch 10(L364 , L361);
L380: (( len C70 ) = ( 0 ) or ( len C70 ) <> ( 0 ));
L381: S7[ ( len C70 ) ] by L380 , L356 , L379;
assume that
L382: C71 = ( C70 * C72 )
and
L383: (not ( -infty ) in ( rng C70 ));
L384: ( dom C70 ) = ( Seg ( len C70 ) ) by FINSEQ_1:def 3;
thus L385: thesis by L384 , L381 , L382 , L383;
end;
