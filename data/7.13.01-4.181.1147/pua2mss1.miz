:: Minimal Manysorted Signature for Partial Algebra
::  by Grzegorz Bancerek
::
:: Received October 1, 1995
:: Copyright (c) 1995-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FINSEQ_1, FUNCT_1, RELAT_1, XBOOLE_0, TARSKI, SETFAM_1, UNIALG_1,
      FUNCT_2, PARTFUN1, SUBSET_1, NAT_1, STRUCT_0, CARD_3, MSUALG_1, UNIALG_2,
      EQREL_1, ZFMISC_1, NUMBERS, FINSEQ_2, PBOOLE, CARD_1, ARYTM_3, INCPROJ,
      ORDINAL4, RELAT_2, NEWTON, MCART_1, MARGREL1, PUA2MSS1;
 notations TARSKI, XBOOLE_0, ZFMISC_1,
      XTUPLE_0, SUBSET_1, NUMBERS, ORDINAL1, NAT_1,
      SETFAM_1, RELAT_1, STRUCT_0, FUNCT_1, PBOOLE, RELSET_1, PARTFUN1,
      MCART_1, FINSEQ_1, FINSEQ_2, FUNCT_2, RELAT_2, EQREL_1, CARD_3, MARGREL1,
      MSUALG_1, UNIALG_1;
 constructors NAT_1, EQREL_1, MSUALG_1, RELSET_1, DOMAIN_1, MARGREL1, XTUPLE_0;
 registrations XBOOLE_0, SUBSET_1, SETFAM_1, RELAT_1, FUNCT_1, PARTFUN1,
      FUNCT_2, NAT_1, FINSEQ_1, EQREL_1, FINSEQ_2, CARD_3, STRUCT_0, UNIALG_1,
      MSUALG_1, ORDINAL1, CARD_1, RELSET_1, PBOOLE, MARGREL1, XTUPLE_0;
 requirements NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions STRUCT_0, XBOOLE_0, TARSKI, SETFAM_1, RELAT_2, EQREL_1, PBOOLE,
      RELAT_1, FUNCT_1, UNIALG_1, MSUALG_1, MARGREL1, XTUPLE_0;
 theorems TARSKI, ZFMISC_1, MCART_1, SETFAM_1, RELAT_1, RELSET_1, FUNCT_1,
      FINSEQ_1, FINSEQ_2, EQREL_1, CARD_3, FUNCT_2, PARTFUN1, CARD_5, FUNCT_6,
      MSUALG_1, XBOOLE_0, XBOOLE_1, RELAT_2, ORDERS_1, CARD_1, XTUPLE_0;
 schemes NAT_1, RELSET_1, PARTFUN1, FUNCT_1, PBOOLE;

begin
L1: (for B1 being FinSequence holds (for B2 being Function holds (( dom B2 ) = ( dom B1 ) implies B2 is FinSequence)))
proof
let C1 being FinSequence;
L2: ( dom C1 ) = ( Seg ( len C1 ) ) by FINSEQ_1:def 3;
thus L3: thesis by L2 , FINSEQ_1:def 2;
end;
L4: (for B3 being set holds (for B4 being non  empty set holds (for B5 being (FinSequence of B3) holds (for B6 being (Function of B3 , B4) holds ( B6 * B5 ) is (FinSequence of B4)))))
proof
let C2 being set;
let C3 being non  empty set;
let C4 being (FinSequence of C2);
let C5 being (Function of C2 , C3);
L5: ( rng C4 ) c= C2;
L6: ( dom C5 ) = C2 by FUNCT_2:def 1;
L7: ( dom ( C5 * C4 ) ) = ( dom C4 ) by L6 , L5 , RELAT_1:27;
L8: ( C5 * C4 ) is FinSequence by L7 , L1;
L9: ( rng ( C5 * C4 ) ) c= C3;
thus L10: thesis by L9 , L8 , FINSEQ_1:def 4;
end;
registration
let C6 being  with_non-empty_elements set;
cluster  ->  non-empty for (FinSequence of C6);
coherence
proof
let C7 being (FinSequence of C6);
let C8 being set;
assume L11: C8 in ( dom C7 );
L12: ( C7 . C8 ) in ( rng C7 ) by L11 , FUNCT_1:def 3;
thus L13: thesis by L12;
end;
end;
registration
let C9 being non  empty set;
cluster  homogeneous  quasi_total  non-empty non  empty for (PFuncFinSequence of C9);
existence
proof
set D1 = the  homogeneous  quasi_total non  empty (PartFunc of ( C9 * ) , C9);
reconsider D2 = D1 as (Element of ( PFuncs (( C9 * ) , C9) )) by PARTFUN1:45;
take <* D2 *>;
thus L15:now
let C10 being Nat;
let C11 being (PartFunc of ( C9 * ) , C9);
assume L16: C10 in ( dom <* D2 *> );
L17: C10 in ( Seg 1 ) by L16 , FINSEQ_1:38;
L18: C10 = 1 by L17 , FINSEQ_1:2 , TARSKI:def 1;
thus L19: (C11 = ( <* D2 *> . C10 ) implies C11 is  homogeneous) by L18 , FINSEQ_1:40;
end;
thus L20:now
let C12 being Nat;
let C13 being (PartFunc of ( C9 * ) , C9);
assume L21: C12 in ( dom <* D2 *> );
L22: C12 in ( Seg 1 ) by L21 , FINSEQ_1:38;
L23: C12 = 1 by L22 , FINSEQ_1:2 , TARSKI:def 1;
thus L24: (C13 = ( <* D2 *> . C12 ) implies C13 is  quasi_total) by L23 , FINSEQ_1:40;
end;
thus L25:now
let C14 being set;
assume L26: C14 in ( dom <* D2 *> );
L27: C14 in ( Seg 1 ) by L26 , FINSEQ_1:38;
L28: C14 = 1 by L27 , FINSEQ_1:2 , TARSKI:def 1;
thus L29: ( <* D2 *> . C14 ) is non  empty by L28 , FINSEQ_1:40;
end;
thus L30: thesis;
end;
end;
registration
cluster  non-empty -> non  empty for UAStr;
coherence
proof
let C15 being UAStr;
assume that
L32: (the charact of C15) <> ( {} )
and
L33: (the charact of C15) is  non-empty;
reconsider D3 = (the charact of C15) as non  empty Function by L32;
set D4 = the (Element of ( dom D3 ));
reconsider D5 = ( D3 . D4 ) as non  empty set by L33;
L34: D5 in ( rng D3 ) by FUNCT_1:def 3;
L35: ( rng D3 ) c= ( PFuncs (( (the carrier of C15) * ) , (the carrier of C15)) ) by FINSEQ_1:def 4;
L36: D5 is (PartFunc of ( (the carrier of C15) * ) , (the carrier of C15)) by L35 , L34 , PARTFUN1:47;
reconsider D6 = D5 as non  empty Function;
thus L37: (the carrier of C15) is non  empty by L36;
end;
end;
theorem
L39: (for B7 , B8 being  non-empty Function holds (( product B7 ) c= ( product B8 ) implies (( dom B7 ) = ( dom B8 ) & (for B9 being set holds (B9 in ( dom B7 ) implies ( B7 . B9 ) c= ( B8 . B9 ))))))
proof
let C16 , C17 being  non-empty Function;
assume L40: ( product C16 ) c= ( product C17 );
set D7 = the (Element of ( product C16 ));
L41: D7 in ( product C16 );
L42: (ex B10 being Function st (D7 = B10 & ( dom B10 ) = ( dom C17 ) & (for B11 being set holds (B11 in ( dom C17 ) implies ( B10 . B11 ) in ( C17 . B11 ))))) by L41 , L40 , CARD_3:def 5;
L43: (ex B12 being Function st (D7 = B12 & ( dom B12 ) = ( dom C16 ) & (for B13 being set holds (B13 in ( dom C16 ) implies ( B12 . B13 ) in ( C16 . B13 ))))) by CARD_3:def 5;
thus L44: ( dom C16 ) = ( dom C17 ) by L43 , L42;
let C18 being set;
assume L45: C18 in ( dom C16 );
let C19 being set;
set D8 = the (Element of ( product C16 ));
reconsider D9 = D8 as Function;
defpred S1[ set ] means $1 = C18;
deffunc H1(set) = C19;
deffunc H2(set) = ( D9 . $1 );
consider C20 being Function such that L46: (( dom C20 ) = ( dom C16 ) & (for B14 being set holds (B14 in ( dom C16 ) implies ((S1[ B14 ] implies ( C20 . B14 ) = H1(B14)) & ((not S1[ B14 ]) implies ( C20 . B14 ) = H2(B14)))))) from PARTFUN1:sch 1;
assume L47: C19 in ( C16 . C18 );
L48:
now
let C21 being set;
assume L49: C21 in ( dom C16 );
L50: (C21 <> C18 implies ( C20 . C21 ) = ( D9 . C21 )) by L49 , L46;
thus L51: ( C20 . C21 ) in ( C16 . C21 ) by L50 , L46 , L47 , L49 , CARD_3:9;
end;
L52: C20 in ( product C16 ) by L48 , L46 , CARD_3:9;
L53: ( C20 . C18 ) in ( C17 . C18 ) by L52 , L40 , L42 , L43 , L45 , CARD_3:9;
thus L54: thesis by L53 , L45 , L46;
end;
theorem
L55: (for B15 , B16 being  non-empty Function holds (( product B15 ) = ( product B16 ) implies B15 = B16))
proof
let C22 , C23 being  non-empty Function;
assume L56: ( product C22 ) = ( product C23 );
set D10 = the (Element of ( product C22 ));
L57: (ex B17 being Function st (D10 = B17 & ( dom B17 ) = ( dom C23 ) & (for B18 being set holds (B18 in ( dom C23 ) implies ( B17 . B18 ) in ( C23 . B18 ))))) by L56 , CARD_3:def 5;
L58: (ex B19 being Function st (D10 = B19 & ( dom B19 ) = ( dom C22 ) & (for B20 being set holds (B20 in ( dom C22 ) implies ( B19 . B20 ) in ( C22 . B20 ))))) by CARD_3:def 5;
L59:
now
let C24 being set;
assume L60: C24 in ( dom C22 );
L61: ( C22 . C24 ) c= ( C23 . C24 ) by L60 , L56 , L39;
L62: ( C23 . C24 ) c= ( C22 . C24 ) by L56 , L57 , L58 , L60 , L39;
thus L63: ( C22 . C24 ) = ( C23 . C24 ) by L62 , L61 , XBOOLE_0:def 10;
end;
thus L64: thesis by L59 , L57 , L58 , FUNCT_1:2;
end;
definition
let C25 being non  empty set;
let C26 being (PFuncFinSequence of C25);
redefine func rng C26 -> (Subset of ( PFuncs (( C25 * ) , C25) ));

coherence by FINSEQ_1:def 4;
end;
definition
let C27 , C28 being non  empty set;
let C29 being non  empty (Subset of ( PFuncs (C27 , C28) ));
redefine mode Element of C29
 -> (PartFunc of C27 , C28);
coherence
proof
let C30 being (Element of C29);
thus L66: thesis by PARTFUN1:46;
end;
end;
definition
let C31 being  non-empty UAStr;
mode OperSymbol of C31
 is (Element of ( dom (the charact of C31) ));
mode operation of C31
 is (Element of ( rng (the charact of C31) ));
end;
definition
let C32 being  non-empty UAStr;
let C33 being (OperSymbol of C32);
func Den (C33 , C32) -> (operation of C32) equals 
( (the charact of C32) . C33 );
correctness by FUNCT_1:def 3;
end;
begin
canceled 1;
L70: (for B21 being set holds (for B22 being (a_partition of B21) holds (for B23 , B24 , B25 being set holds ((B23 in B24 & B24 in B22 & B23 in B25 & B25 in B22) implies B24 = B25)))) by EQREL_1:70;
theorem
L71: (for B26 , B27 being set holds (B26 is_finer_than B27 implies (for B28 being (FinSequence of B26) holds (ex B29 being (FinSequence of B27) st ( product B28 ) c= ( product B29 )))))
proof
let C34 , C35 being set;
assume L72: (for B30 being set holds (B30 in C34 implies (ex B31 being set st (B31 in C35 & B30 c= B31))));
let C36 being (FinSequence of C34);
defpred S2[ set , set ] means ( C36 . $1 ) c= $2;
L73: (for B32 being set holds (B32 in ( dom C36 ) implies (ex B33 being set st (B33 in C35 & S2[ B32 , B33 ]))))
proof
let C37 being set;
assume L74: C37 in ( dom C36 );
L75: ( C36 . C37 ) in ( rng C36 ) by L74 , FUNCT_1:def 3;
thus L76: thesis by L75 , L72;
end;
consider C38 being Function such that L77: (( dom C38 ) = ( dom C36 ) & ( rng C38 ) c= C35 & (for B34 being set holds (B34 in ( dom C36 ) implies S2[ B34 , ( C38 . B34 ) ]))) from FUNCT_1:sch 5(L73);
L78: ( dom C36 ) = ( Seg ( len C36 ) ) by FINSEQ_1:def 3;
L79: C38 is FinSequence by L78 , L77 , FINSEQ_1:def 2;
L80: C38 is (FinSequence of C35) by L79 , L77 , FINSEQ_1:def 4;
L81: ( product C36 ) c= ( product C38 ) by L77 , CARD_3:27;
thus L82: thesis by L81 , L80;
end;
theorem
L83: (for B35 being set holds (for B36 , B37 being (a_partition of B35) holds (for B38 being (Function of B36 , B37) holds ((for B39 being set holds (B39 in B36 implies B39 c= ( B38 . B39 ))) implies (for B40 being (FinSequence of B36) holds (for B41 being (FinSequence of B37) holds (( product B40 ) c= ( product B41 ) iff ( B38 * B40 ) = B41)))))))
proof
let C39 being set;
let C40 , C41 being (a_partition of C39);
let C42 being (Function of C40 , C41);
assume that
L84: (for B42 being set holds (B42 in C40 implies B42 c= ( C42 . B42 )));
let C43 being (FinSequence of C40);
let C44 being (FinSequence of C41);
L85: ( rng C43 ) c= C40;
L86:
now
assume L87: C40 <> ( {} );
reconsider D11 = C39 as non  empty set by L87 , EQREL_1:32;
L88: C41 is (a_partition of D11);
thus L89: C41 <> ( {} ) by L88;
end;
L90: ( dom C42 ) = C40 by L86 , FUNCT_2:def 1;
L91: ( dom ( C42 * C43 ) ) = ( dom C43 ) by L90 , L85 , RELAT_1:27;
thus L92:now
assume L93: ( product C43 ) c= ( product C44 );
L94: ( dom C43 ) = ( dom C44 ) by L93 , L39;
L95:
now
let C45 being set;
assume L96: C45 in ( dom C43 );
L97: ( C43 . C45 ) c= ( C44 . C45 ) by L96 , L93 , L39;
L98: ( C43 . C45 ) in ( rng C43 ) by L96 , FUNCT_1:def 3;
L99: ( C44 . C45 ) in ( rng C44 ) by L94 , L96 , FUNCT_1:def 3;
reconsider D12 = C39 as non  empty set by L98 , EQREL_1:32;
reconsider D13 = C40 , D14 = C41 as (a_partition of D12);
reconsider D15 = ( C43 . C45 ) as (Element of D13) by L98;
set D16 = the (Element of D15);
L100: D15 c= ( C42 . D15 ) by L84;
L101: D16 in D15;
L102: ( C42 . D15 ) in D14 by FUNCT_2:5;
L103: ( C44 . C45 ) = ( C42 . D15 ) by L102 , L97 , L99 , L100 , L101 , L70;
thus L104: ( ( C42 * C43 ) . C45 ) = ( C44 . C45 ) by L103 , L96 , FUNCT_1:13;
end;
thus L105: ( C42 * C43 ) = C44 by L95 , L91 , L94 , FUNCT_1:2;
end;
assume L106: ( C42 * C43 ) = C44;
L107:
now
let C46 being set;
assume L108: C46 in ( dom C43 );
L109: ( C44 . C46 ) = ( C42 . ( C43 . C46 ) ) by L108 , L106 , FUNCT_1:13;
L110: ( C43 . C46 ) in ( rng C43 ) by L108 , FUNCT_1:def 3;
thus L111: ( C43 . C46 ) c= ( C44 . C46 ) by L110 , L84 , L109;
end;
thus L112: thesis by L107 , L91 , L106 , CARD_3:27;
end;
theorem
L113: (for B43 being set holds (for B44 being Function holds (( rng B44 ) c= ( union B43 ) implies (ex B45 being Function st (( dom B45 ) = ( dom B44 ) & ( rng B45 ) c= B43 & B44 in ( product B45 ))))))
proof
let C47 being set;
let C48 being Function;
assume L114: ( rng C48 ) c= ( union C47 );
defpred S3[ set , set ] means ( C48 . $1 ) in $2;
L115: (for B46 being set holds (B46 in ( dom C48 ) implies (ex B47 being set st (B47 in C47 & S3[ B46 , B47 ]))))
proof
let C49 being set;
assume L116: C49 in ( dom C48 );
L117: ( C48 . C49 ) in ( rng C48 ) by L116 , FUNCT_1:def 3;
L118: (ex B48 being set st (( C48 . C49 ) in B48 & B48 in C47)) by L117 , L114 , TARSKI:def 4;
thus L119: thesis by L118;
end;
consider C50 being Function such that L120: (( dom C50 ) = ( dom C48 ) & ( rng C50 ) c= C47) and L121: (for B49 being set holds (B49 in ( dom C48 ) implies S3[ B49 , ( C50 . B49 ) ])) from FUNCT_1:sch 5(L115);
take C50;
thus L122: thesis by L120 , L121 , CARD_3:def 5;
end;
theorem
L123: (for B50 being set holds (for B51 being (a_partition of B50) holds (for B52 being (FinSequence of B50) holds (ex B53 being (FinSequence of B51) st B52 in ( product B53 )))))
proof
let C51 being set;
let C52 being (a_partition of C51);
let C53 being (FinSequence of C51);
L124: ( rng C53 ) c= C51;
L125: ( union C52 ) = C51 by EQREL_1:def 4;
consider C54 being Function such that L126: ( dom C54 ) = ( dom C53 ) and L127: ( rng C54 ) c= C52 and L128: C53 in ( product C54 ) by L125 , L124 , L113;
L129: ( dom C54 ) = ( Seg ( len C53 ) ) by L126 , FINSEQ_1:def 3;
L130: C54 is FinSequence by L129 , FINSEQ_1:def 2;
L131: C54 is (FinSequence of C52) by L130 , L127 , FINSEQ_1:def 4;
thus L132: thesis by L131 , L128;
end;
theorem
L133: (for B54 , B55 being non  empty set holds (for B56 being (a_partition of B54) holds (for B57 being (a_partition of B55) holds { [: B58 , B59 :] where B58 is (Element of B56) , B59 is (Element of B57) : (not contradiction) } is (a_partition of [: B54 , B55 :]))))
proof
let C55 , C56 being non  empty set;
let C57 being (a_partition of C55);
let C58 being (a_partition of C56);
set D17 = { [: B60 , B61 :] where B60 is (Element of C57) , B61 is (Element of C58) : (not contradiction) };
L134: D17 c= ( bool [: C55 , C56 :] )
proof
let C59 being set;
assume L135: C59 in D17;
L136: (ex B62 being (Element of C57) st (ex B63 being (Element of C58) st C59 = [: B62 , B63 :])) by L135;
thus L137: thesis by L136;
end;
reconsider D18 = D17 as (Subset-Family of [: C55 , C56 :]) by L134;
L138: D18 is (a_partition of [: C55 , C56 :])
proof
thus L139: ( union D18 ) = [: C55 , C56 :]
proof
let C60 , C61 being set;
thus L140: ([ C60 , C61 ] in ( union D18 ) implies [ C60 , C61 ] in [: C55 , C56 :]);
assume L141: [ C60 , C61 ] in [: C55 , C56 :];
L142: C60 in C55 by L141 , ZFMISC_1:87;
L143: C61 in C56 by L141 , ZFMISC_1:87;
L144: C55 = ( union C57 ) by EQREL_1:def 4;
consider C62 being set such that L145: C60 in C62 and L146: C62 in C57 by L144 , L142 , TARSKI:def 4;
L147: C56 = ( union C58 ) by EQREL_1:def 4;
consider C63 being set such that L148: C61 in C63 and L149: C63 in C58 by L147 , L143 , TARSKI:def 4;
L150: [ C60 , C61 ] in [: C62 , C63 :] by L145 , L148 , ZFMISC_1:87;
L151: [: C62 , C63 :] in D18 by L146 , L149;
thus L152: thesis by L151 , L150 , TARSKI:def 4;
end;

let C64 being (Subset of [: C55 , C56 :]);
assume L153: C64 in D18;
consider C65 being (Element of C57), C66 being (Element of C58) such that L154: C64 = [: C65 , C66 :] by L153;
thus L155: C64 <> ( {} ) by L154;
let C67 being (Subset of [: C55 , C56 :]);
assume L156: C67 in D18;
consider C68 being (Element of C57), C69 being (Element of C58) such that L157: C67 = [: C68 , C69 :] by L156;
assume L158: C64 <> C67;
L159: (C65 <> C68 or C66 <> C69) by L158 , L154 , L157;
L160: (C65 misses C68 or C66 misses C69) by L159 , EQREL_1:def 4;
L161: (( C65 /\ C68 ) = ( {} ) or ( C66 /\ C69 ) = ( {} )) by L160 , XBOOLE_0:def 7;
L162: (( C64 /\ C67 ) = [: ( {} ) , ( C66 /\ C69 ) :] or ( C64 /\ C67 ) = [: ( C65 /\ C68 ) , ( {} ) :]) by L161 , L154 , L157 , ZFMISC_1:100;
L163: ( C64 /\ C67 ) = ( {} ) by L162 , ZFMISC_1:90;
thus L164: thesis by L163 , XBOOLE_0:def 7;
end;
thus L165: thesis by L138;
end;
theorem
L166: (for B64 being non  empty set holds (for B65 being (a_partition of B64) holds { ( product B66 ) where B66 is (Element of ( B65 * )) : (not contradiction) } is (a_partition of ( B64 * ))))
proof
let C70 being non  empty set;
let C71 being (a_partition of C70);
set D19 = { ( product B67 ) where B67 is (Element of ( C71 * )) : (not contradiction) };
L167: D19 c= ( bool ( C70 * ) )
proof
let C72 being set;
assume L168: C72 in D19;
consider C73 being (Element of ( C71 * )) such that L169: C72 = ( product C73 ) by L168;
L170: C72 c= ( C70 * )
proof
let C74 being set;
assume L171: C74 in C72;
consider C75 being Function such that L172: C74 = C75 and L173: ( dom C75 ) = ( dom C73 ) and L174: (for B68 being set holds (B68 in ( dom C73 ) implies ( C75 . B68 ) in ( C73 . B68 ))) by L171 , L169 , CARD_3:def 5;
L175: ( dom C73 ) = ( Seg ( len C73 ) ) by FINSEQ_1:def 3;
L176: C74 is FinSequence by L175 , L172 , L173 , FINSEQ_1:def 2;
L177: ( rng C75 ) c= C70
proof
let C76 being set;
assume L178: C76 in ( rng C75 );
consider C77 being set such that L179: C77 in ( dom C73 ) and L180: C76 = ( C75 . C77 ) by L178 , L173 , FUNCT_1:def 3;
L181: ( C73 . C77 ) in ( rng C73 ) by L179 , FUNCT_1:def 3;
L182: ( C73 . C77 ) in C71 by L181;
L183: C76 in ( C73 . C77 ) by L174 , L179 , L180;
thus L184: thesis by L183 , L182;
end;
L185: C74 is (FinSequence of C70) by L177 , L172 , L176 , FINSEQ_1:def 4;
thus L186: thesis by L185 , FINSEQ_1:def 11;
end;
thus L187: thesis by L170;
end;
reconsider D20 = D19 as (Subset-Family of ( C70 * )) by L167;
L188: D20 is (a_partition of ( C70 * ))
proof
thus L189: ( union D20 ) c= ( C70 * );
thus L190: ( C70 * ) c= ( union D20 )
proof
let C78 being set;
assume L191: C78 in ( C70 * );
reconsider D21 = C78 as (FinSequence of C70) by L191 , FINSEQ_1:def 11;
L192: ( rng D21 ) c= C70;
L193: ( union C71 ) = C70 by EQREL_1:def 4;
consider C79 being Function such that L194: ( dom C79 ) = ( dom D21 ) and L195: ( rng C79 ) c= C71 and L196: D21 in ( product C79 ) by L193 , L192 , L113;
L197: ( dom C79 ) = ( Seg ( len D21 ) ) by L194 , FINSEQ_1:def 3;
reconsider D22 = C79 as FinSequence by L197 , FINSEQ_1:def 2;
reconsider D23 = D22 as (FinSequence of C71) by L195 , FINSEQ_1:def 4;
reconsider D24 = D23 as (Element of ( C71 * )) by FINSEQ_1:def 11;
L198: ( product D24 ) in D20;
thus L199: thesis by L198 , L196 , TARSKI:def 4;
end;

let C80 being (Subset of ( C70 * ));
assume L200: C80 in D20;
consider C81 being (Element of ( C71 * )) such that L201: C80 = ( product C81 ) by L200;
thus L202: C80 <> ( {} ) by L201;
let C82 being (Subset of ( C70 * ));
assume L203: C82 in D20;
consider C83 being (Element of ( C71 * )) such that L204: C82 = ( product C83 ) by L203;
assume L205: C80 <> C82;
assume L206: C80 meets C82;
consider C84 being set such that L207: C84 in C80 and L208: C84 in C82 by L206 , XBOOLE_0:3;
consider C85 being Function such that L209: C84 = C85 and L210: ( dom C85 ) = ( dom C81 ) and L211: (for B69 being set holds (B69 in ( dom C81 ) implies ( C85 . B69 ) in ( C81 . B69 ))) by L201 , L207 , CARD_3:def 5;
L212: (ex B70 being Function st (C84 = B70 & ( dom B70 ) = ( dom C83 ) & (for B71 being set holds (B71 in ( dom C83 ) implies ( B70 . B71 ) in ( C83 . B71 ))))) by L204 , L208 , CARD_3:def 5;
L213:
now
let C86 being set;
assume L214: C86 in ( dom C81 );
L215: ( C85 . C86 ) in ( C81 . C86 ) by L214 , L211;
L216: ( C85 . C86 ) in ( C83 . C86 ) by L209 , L210 , L212 , L214;
L217: ( C81 . C86 ) in ( rng C81 ) by L214 , FUNCT_1:def 3;
L218: ( C83 . C86 ) in ( rng C83 ) by L209 , L210 , L212 , L214 , FUNCT_1:def 3;
L219: ( C81 . C86 ) meets ( C83 . C86 ) by L215 , L216 , XBOOLE_0:3;
L220: ( C81 . C86 ) in C71 by L217;
L221: ( C83 . C86 ) in C71 by L218;
thus L222: ( C81 . C86 ) = ( C83 . C86 ) by L221 , L219 , L220 , EQREL_1:def 4;
end;
thus L223: contradiction by L213 , L201 , L204 , L205 , L209 , L210 , L212 , FUNCT_1:2;
end;
thus L224: thesis by L188;
end;
theorem
L225: (for B72 being non  empty set holds (for B73 being (Element of ( NAT )) holds (for B74 being (a_partition of B72) holds { ( product B75 ) where B75 is (Element of ( B73 -tuples_on B74 )) : (not contradiction) } is (a_partition of ( B73 -tuples_on B72 )))))
proof
let C87 being non  empty set;
let C88 being (Element of ( NAT ));
let C89 being (a_partition of C87);
set D25 = ( C88 -tuples_on C89 );
set D26 = ( C88 -tuples_on C87 );
set D27 = { ( product B76 ) where B76 is (Element of D25) : (not contradiction) };
L226: D27 c= ( bool D26 )
proof
let C90 being set;
assume L227: C90 in D27;
consider C91 being (Element of D25) such that L228: C90 = ( product C91 ) by L227;
L229: C90 c= D26
proof
let C92 being set;
assume L230: C92 in C90;
consider C93 being Function such that L231: C92 = C93 and L232: ( dom C93 ) = ( dom C91 ) and L233: (for B77 being set holds (B77 in ( dom C91 ) implies ( C93 . B77 ) in ( C91 . B77 ))) by L230 , L228 , CARD_3:def 5;
L234: ( dom C91 ) = ( Seg ( len C91 ) ) by FINSEQ_1:def 3;
reconsider D28 = C92 as FinSequence by L234 , L231 , L232 , FINSEQ_1:def 2;
L235: ( rng C93 ) c= C87
proof
let C94 being set;
assume L236: C94 in ( rng C93 );
consider C95 being set such that L237: C95 in ( dom C91 ) and L238: C94 = ( C93 . C95 ) by L236 , L232 , FUNCT_1:def 3;
L239: ( C91 . C95 ) in ( rng C91 ) by L237 , FUNCT_1:def 3;
L240: ( C91 . C95 ) in C89 by L239;
L241: C94 in ( C91 . C95 ) by L233 , L237 , L238;
thus L242: thesis by L241 , L240;
end;
L243: D28 is (FinSequence of C87) by L235 , L231 , FINSEQ_1:def 4;
L244: ( len D28 ) = ( len C91 ) by L231 , L232 , L234 , FINSEQ_1:def 3;
L245: ( len C91 ) = C88 by CARD_1:def 7;
L246: D28 is (Element of D26) by L245 , L243 , L244 , FINSEQ_2:92;
thus L247: thesis by L246;
end;
thus L248: thesis by L229;
end;
reconsider D29 = D27 as (Subset-Family of D26) by L226;
L249: D29 is (a_partition of D26)
proof
thus L250: ( union D29 ) c= D26;
thus L251: D26 c= ( union D29 )
proof
let C96 being set;
assume L252: C96 in D26;
reconsider D30 = C96 as (Element of D26) by L252;
L253: ( rng D30 ) c= C87;
L254: ( union C89 ) = C87 by EQREL_1:def 4;
consider C97 being Function such that L255: ( dom C97 ) = ( dom D30 ) and L256: ( rng C97 ) c= C89 and L257: D30 in ( product C97 ) by L254 , L253 , L113;
L258: ( dom C97 ) = ( Seg ( len D30 ) ) by L255 , FINSEQ_1:def 3;
reconsider D31 = C97 as FinSequence by L258 , FINSEQ_1:def 2;
reconsider D32 = D31 as (FinSequence of C89) by L256 , FINSEQ_1:def 4;
L259: ( len D32 ) = ( len D30 ) by L258 , FINSEQ_1:def 3;
L260: ( len D30 ) = C88 by CARD_1:def 7;
reconsider D33 = D32 as (Element of D25) by L260 , L259 , FINSEQ_2:92;
L261: ( product D33 ) in D29;
thus L262: thesis by L261 , L257 , TARSKI:def 4;
end;

let C98 being (Subset of D26);
assume L263: C98 in D29;
consider C99 being (Element of D25) such that L264: C98 = ( product C99 ) by L263;
thus L265: C98 <> ( {} ) by L264;
let C100 being (Subset of D26);
assume L266: C100 in D29;
consider C101 being (Element of D25) such that L267: C100 = ( product C101 ) by L266;
assume L268: C98 <> C100;
assume L269: C98 meets C100;
consider C102 being set such that L270: C102 in C98 and L271: C102 in C100 by L269 , XBOOLE_0:3;
consider C103 being Function such that L272: C102 = C103 and L273: ( dom C103 ) = ( dom C99 ) and L274: (for B78 being set holds (B78 in ( dom C99 ) implies ( C103 . B78 ) in ( C99 . B78 ))) by L264 , L270 , CARD_3:def 5;
L275: (ex B79 being Function st (C102 = B79 & ( dom B79 ) = ( dom C101 ) & (for B80 being set holds (B80 in ( dom C101 ) implies ( B79 . B80 ) in ( C101 . B80 ))))) by L267 , L271 , CARD_3:def 5;
L276:
now
let C104 being set;
assume L277: C104 in ( dom C99 );
L278: ( C103 . C104 ) in ( C99 . C104 ) by L277 , L274;
L279: ( C103 . C104 ) in ( C101 . C104 ) by L272 , L273 , L275 , L277;
L280: ( C99 . C104 ) in ( rng C99 ) by L277 , FUNCT_1:def 3;
L281: ( C101 . C104 ) in ( rng C101 ) by L272 , L273 , L275 , L277 , FUNCT_1:def 3;
L282: ( C99 . C104 ) meets ( C101 . C104 ) by L278 , L279 , XBOOLE_0:3;
L283: ( C99 . C104 ) in C89 by L280;
L284: ( C101 . C104 ) in C89 by L281;
thus L285: ( C99 . C104 ) = ( C101 . C104 ) by L284 , L282 , L283 , EQREL_1:def 4;
end;
thus L286: contradiction by L276 , L264 , L267 , L268 , L272 , L273 , L275 , FUNCT_1:2;
end;
thus L287: thesis by L249;
end;
theorem
L288: (for B81 being non  empty set holds (for B82 being set holds (B82 c= B81 implies (for B83 being (a_partition of B81) holds { ( B84 /\ B82 ) where B84 is (Element of B83) : B84 meets B82 } is (a_partition of B82)))))
proof
let C105 being non  empty set;
let C106 being set;
assume L289: C106 c= C105;
let C107 being (a_partition of C105);
set D34 = { ( B85 /\ C106 ) where B85 is (Element of C107) : B85 meets C106 };
L290: D34 c= ( bool C106 )
proof
let C108 being set;
assume L291: C108 in D34;
L292: (ex B86 being (Element of C107) st (C108 = ( B86 /\ C106 ) & B86 meets C106)) by L291;
L293: C108 c= ( C105 /\ C106 ) by L292 , XBOOLE_1:26;
L294: ( C105 /\ C106 ) = C106 by L289 , XBOOLE_1:28;
thus L295: thesis by L294 , L293;
end;
reconsider D35 = D34 as (Subset-Family of C106) by L290;
L296: D35 is (a_partition of C106)
proof
thus L297: ( union D35 ) c= C106;
thus L298: C106 c= ( union D35 )
proof
let C109 being set;
assume L299: C109 in C106;
L300: C105 = ( union C107 ) by EQREL_1:def 4;
consider C110 being set such that L301: C109 in C110 and L302: C110 in C107 by L300 , L289 , L299 , TARSKI:def 4;
L303: C110 meets C106 by L299 , L301 , XBOOLE_0:3;
L304: C109 in ( C110 /\ C106 ) by L299 , L301 , XBOOLE_0:def 4;
L305: ( C110 /\ C106 ) in D35 by L302 , L303;
thus L306: thesis by L305 , L304 , TARSKI:def 4;
end;

let C111 being (Subset of C106);
assume L307: C111 in D35;
consider C112 being (Element of C107) such that L308: C111 = ( C112 /\ C106 ) and L309: C112 meets C106 by L307;
thus L310: C111 <> ( {} ) by L308 , L309 , XBOOLE_0:def 7;
let C113 being (Subset of C106);
assume L311: C113 in D35;
consider C114 being (Element of C107) such that L312: C113 = ( C114 /\ C106 ) and L313: C114 meets C106 by L311;
assume L314: C111 <> C113;
L315: C112 misses C114 by L314 , L308 , L312 , EQREL_1:def 4;
L316: C111 misses C114 by L315 , L308 , XBOOLE_1:74;
thus L317: thesis by L316 , L312 , XBOOLE_1:74;
end;
thus L318: thesis by L296;
end;
theorem
L319: (for B87 being non  empty Function holds (for B88 being (a_partition of ( dom B87 )) holds { ( B87 | B89 ) where B89 is (Element of B88) : (not contradiction) } is (a_partition of B87)))
proof
let C115 being non  empty Function;
set D36 = ( dom C115 );
let C116 being (a_partition of D36);
set D37 = C115;
set D38 = { ( C115 | B90 ) where B90 is (Element of C116) : (not contradiction) };
L320: D38 c= ( bool D37 )
proof
let C117 being set;
assume L321: C117 in D38;
L322: (ex B91 being (Element of C116) st C117 = ( C115 | B91 )) by L321;
L323: C117 c= C115 by L322 , RELAT_1:59;
thus L324: thesis by L323;
end;
reconsider D39 = D38 as (Subset-Family of D37) by L320;
L325: D39 is (a_partition of D37)
proof
L326: D37 c= ( union D39 )
proof
let C118 , C119 being set;
assume L327: [ C118 , C119 ] in C115;
L328: C118 in D36 by L327 , XTUPLE_0:def 12;
L329: D36 = ( union C116 ) by EQREL_1:def 4;
consider C120 being set such that L330: C118 in C120 and L331: C120 in C116 by L329 , L328 , TARSKI:def 4;
L332: [ C118 , C119 ] in ( C115 | C120 ) by L327 , L330 , RELAT_1:def 11;
L333: ( C115 | C120 ) in D39 by L331;
thus L334: thesis by L333 , L332 , TARSKI:def 4;
end;
thus L335: D37 = ( union D39 ) by L326 , XBOOLE_0:def 10;
let C121 being (Subset of D37);
assume L336: C121 in D39;
consider C122 being (Element of C116) such that L337: C121 = ( C115 | C122 ) by L336;
reconsider D40 = C122 as non  empty (Subset of D36);
thus L338: C121 <> ( {} ) by L337;
let C123 being (Subset of D37);
assume L339: C123 in D39;
consider C124 being (Element of C116) such that L340: C123 = ( C115 | C124 ) by L339;
assume L341: C121 <> C123;
L342: D40 misses C124 by L341 , L337 , L340 , EQREL_1:def 4;
assume L343: C121 meets C123;
consider C125 being set such that L344: C125 in C121 and L345: C125 in C123 by L343 , XBOOLE_0:3;
consider C126 , C127 being set such that L346: C125 = [ C126 , C127 ] by L344 , RELAT_1:def 1;
L347: C126 in D40 by L337 , L344 , L346 , RELAT_1:def 11;
L348: C126 in C124 by L340 , L345 , L346 , RELAT_1:def 11;
thus L349: contradiction by L348 , L342 , L347 , XBOOLE_0:3;
end;
thus L350: thesis by L325;
end;
theorem
L351: (for B92 being set holds (for B93 being (FinSequence of ( SmallestPartition B92 )) holds (ex B94 being (FinSequence of B92) st ( product B93 ) = { B94 })))
proof
let C128 being set;
set D41 = ( SmallestPartition C128 );
let C129 being (FinSequence of D41);
set D42 = the (Element of ( product C129 ));
L352: ( dom D42 ) = ( dom C129 ) by CARD_3:9;
reconsider D43 = D42 as FinSequence by L352 , L1;
L353: D43 in ( product C129 );
L354: ( product C129 ) c= ( Funcs (( dom C129 ) , ( Union C129 )) ) by FUNCT_6:1;
L355: ( Union C129 ) = ( union ( rng C129 ) ) by CARD_3:def 4;
L356: (ex B95 being Function st (D43 = B95 & ( dom B95 ) = ( dom C129 ) & ( rng B95 ) c= ( Union C129 ))) by L353 , L354 , FUNCT_2:def 2;
L357: ( Union C129 ) c= ( union D41 ) by L355 , ZFMISC_1:77;
L358: ( rng D43 ) c= ( union D41 ) by L357 , L356 , XBOOLE_1:1;
L359: ( rng D43 ) c= C128 by L358 , EQREL_1:def 4;
reconsider D44 = D43 as (FinSequence of C128) by L359 , FINSEQ_1:def 4;
take D44;
thus L360: ( product C129 ) c= { D44 }
proof
let C130 being set;
assume L361: C130 in ( product C129 );
consider C131 being Function such that L362: C130 = C131 and L363: ( dom C131 ) = ( dom C129 ) and L364: (for B96 being set holds (B96 in ( dom C129 ) implies ( C131 . B96 ) in ( C129 . B96 ))) by L361 , CARD_3:def 5;
L365:
now
let C132 being set;
assume L366: C132 in ( dom C129 );
L367: ( C131 . C132 ) in ( C129 . C132 ) by L366 , L364;
L368: ( D44 . C132 ) in ( C129 . C132 ) by L366 , CARD_3:9;
L369: ( C129 . C132 ) in ( rng C129 ) by L366 , FUNCT_1:def 3;
L370: ( C129 . C132 ) in D41 by L369;
reconsider D45 = C128 as non  empty set by L369 , EQREL_1:32;
L371: D41 = { { B97 } where B97 is (Element of D45) : (not contradiction) } by EQREL_1:37;
consider C133 being (Element of D45) such that L372: ( C129 . C132 ) = { C133 } by L371 , L370;
thus L373: ( C131 . C132 ) = C133 by L367 , L372 , TARSKI:def 1
.= ( D44 . C132 ) by L368 , L372 , TARSKI:def 1;
end;
L374: C130 = D44 by L365 , L352 , L362 , L363 , FUNCT_1:2;
thus L375: thesis by L374 , TARSKI:def 1;
end;

thus L376: thesis by ZFMISC_1:31;
end;
definition
let C134 being set;
mode IndexedPartition of C134
 -> Function
means :L377: (( rng it ) is (a_partition of C134) & it is  one-to-one);
existence
proof
set D46 = the (a_partition of C134);
take ( id D46 );
thus L378: thesis;
end;
end;
definition
let C135 being set;
let C136 being (IndexedPartition of C135);
redefine func rng C136 -> (a_partition of C135);

coherence by L377;
end;
registration
let C137 being set;
cluster  ->  one-to-one  non-empty for (IndexedPartition of C137);
coherence
proof
let C138 being (IndexedPartition of C137);
thus L381: C138 is  one-to-one by L377;
let C139 being set;
assume L382: C139 in ( dom C138 );
L383: ( C138 . C139 ) in ( rng C138 ) by L382 , FUNCT_1:def 3;
thus L384: thesis by L383;
end;
end;
registration
let C140 being non  empty set;
cluster  -> non  empty for (IndexedPartition of C140);
coherence
proof
let C141 being (IndexedPartition of C140);
set D47 = the (Element of ( rng C141 ));
L386: (ex B98 being set st [ B98 , D47 ] in C141) by XTUPLE_0:def 13;
thus L387: thesis by L386;
end;
end;
definition
let C142 being set;
let C143 being (a_partition of C142);
redefine func id C143 -> (IndexedPartition of C142);

coherence
proof
L389: ( rng ( id C143 ) ) = C143;
thus L390: thesis by L389 , L377;
end;
end;
definition
let C144 being set;
let C145 being (IndexedPartition of C144);
let C146 being set;
assume L392: C146 in C144;
L393: ( union ( rng C145 ) ) = C144 by EQREL_1:def 4;
func C145 -index_of C146 -> set means 
:L394: (it in ( dom C145 ) & C146 in ( C145 . it ));
existence
proof
consider C147 being set such that L395: C146 in C147 and L396: C147 in ( rng C145 ) by L392 , L393 , TARSKI:def 4;
L397: (ex B99 being set st (B99 in ( dom C145 ) & C147 = ( C145 . B99 ))) by L396 , FUNCT_1:def 3;
thus L398: thesis by L397 , L395;
end;
correctness
proof
let C148 , C149 being set;
assume that
L399: C148 in ( dom C145 )
and
L400: C146 in ( C145 . C148 )
and
L401: C149 in ( dom C145 )
and
L402: C146 in ( C145 . C149 );
L403: ( C145 . C148 ) in ( rng C145 ) by L399 , FUNCT_1:def 3;
L404: ( C145 . C149 ) in ( rng C145 ) by L401 , FUNCT_1:def 3;
L405: ( C145 . C148 ) meets ( C145 . C149 ) by L400 , L402 , XBOOLE_0:3;
L406: ( C145 . C148 ) = ( C145 . C149 ) by L405 , L403 , L404 , EQREL_1:def 4;
thus L407: thesis by L406 , L399 , L401 , FUNCT_1:def 4;
end;
end;
theorem
L409: (for B100 being set holds (for B101 being  non-empty Function holds ((( Union B101 ) = B100 & (for B102 , B103 being set holds ((B102 in ( dom B101 ) & B103 in ( dom B101 ) & B102 <> B103) implies ( B101 . B102 ) misses ( B101 . B103 )))) implies B101 is (IndexedPartition of B100))))
proof
let C150 being set;
let C151 being  non-empty Function;
assume that
L410: ( Union C151 ) = C150
and
L411: (for B104 , B105 being set holds ((B104 in ( dom C151 ) & B105 in ( dom C151 ) & B104 <> B105) implies ( C151 . B104 ) misses ( C151 . B105 )));
L412: ( rng C151 ) c= ( bool C150 )
proof
let C152 being set;
assume L413: C152 in ( rng C151 );
L414: C152 c= ( union ( rng C151 ) ) by L413 , ZFMISC_1:74;
L415: C152 c= C150 by L414 , L410 , CARD_3:def 4;
thus L416: thesis by L415;
end;
reconsider D48 = ( rng C151 ) as (Subset-Family of C150) by L412;
L417: D48 is (a_partition of C150)
proof
thus L418: ( union D48 ) = C150 by L410 , CARD_3:def 4;
let C153 being (Subset of C150);
assume L419: C153 in D48;
L420: (ex B106 being set st (B106 in ( dom C151 ) & C153 = ( C151 . B106 ))) by L419 , FUNCT_1:def 3;
thus L421: C153 <> ( {} ) by L419;
let C154 being (Subset of C150);
assume L422: C154 in D48;
L423: (ex B107 being set st (B107 in ( dom C151 ) & C154 = ( C151 . B107 ))) by L422 , FUNCT_1:def 3;
thus L424: thesis by L423 , L411 , L420;
end;
thus L425: ( rng C151 ) is (a_partition of C150) by L417;
let C155 , C156 being set;
assume that
L426: C155 in ( dom C151 )
and
L427: C156 in ( dom C151 )
and
L428: ( C151 . C155 ) = ( C151 . C156 )
and
L429: C155 <> C156;
reconsider D49 = ( C151 . C155 ) , D50 = ( C151 . C156 ) as non  empty set by L426 , L427 , FUNCT_1:def 9;
set D51 = the (Element of D49);
L430: ( C151 . C155 ) misses ( C151 . C156 ) by L411 , L426 , L427 , L429;
L431: (not D51 in D50) by L430 , XBOOLE_0:3;
thus L432: contradiction by L431 , L428;
end;
theorem
L433: (for B108 , B109 being non  empty set holds (for B110 being (a_partition of B109) holds (for B111 being (Function of B108 , B110) holds ((B110 c= ( rng B111 ) & B111 is  one-to-one) implies B111 is (IndexedPartition of B109)))))
proof
let C157 , C158 being non  empty set;
let C159 being (a_partition of C158);
let C160 being (Function of C157 , C159);
assume L434: C159 c= ( rng C160 );
L435: ( rng C160 ) = C159 by L434 , XBOOLE_0:def 10;
thus L436: thesis by L435 , L377;
end;
begin
scheme IndRelationEx { F1 , F2() -> non  empty set , F3() -> (Element of ( NAT )) , F4() -> (Relation of F1() , F2()) , F5(set , set) -> (Relation of F1() , F2()) } : (ex B112 being (Relation of F1() , F2()) st (ex B113 being (ManySortedSet of ( NAT )) st (B112 = ( B113 . F3() ) & ( B113 . ( 0 ) ) = F4() & (for B114 being (Element of ( NAT )) holds (for B115 being (Relation of F1() , F2()) holds (B115 = ( B113 . B114 ) implies ( B113 . ( B114 + 1 ) ) = F5(B115 , B114)))))))
proof
deffunc H3(set , set) = F5($2 , $1);
consider C161 being Function such that L437: ( dom C161 ) = ( NAT ) and L438: (( C161 . ( 0 ) ) = F4() & (for B116 being Nat holds ( C161 . ( B116 + 1 ) ) = H3(B116 , ( C161 . B116 )))) from NAT_1:sch 11;
reconsider D52 = C161 as (ManySortedSet of ( NAT )) by L437 , PARTFUN1:def 2 , RELAT_1:def 18;
defpred S4[ (Element of ( NAT )) ] means ( D52 . $1 ) is (Relation of F1() , F2());
L439: S4[ ( 0 ) ] by L438;
L440:
now
let C162 being (Element of ( NAT ));
assume L441: S4[ C162 ];
reconsider D53 = ( D52 . C162 ) as (Relation of F1() , F2()) by L441;
L442: ( D52 . ( C162 + 1 ) ) = F5(D53 , C162) by L438;
thus L443: S4[ ( C162 + 1 ) ] by L442;
end;
L444: (for B117 being (Element of ( NAT )) holds S4[ B117 ]) from NAT_1:sch 1(L439 , L440);
reconsider D54 = ( D52 . F3() ) as (Relation of F1() , F2()) by L444;
take D54;
take D52;
thus L445: thesis by L438;
end;
scheme RelationUniq { F6 , F7() -> non  empty set , P1[set , set] } : (for B118 , B119 being (Relation of F6() , F7()) holds (((for B120 being (Element of F6()) holds (for B121 being (Element of F7()) holds ([ B120 , B121 ] in B118 iff P1[ B120 , B121 ]))) & (for B122 being (Element of F6()) holds (for B123 being (Element of F7()) holds ([ B122 , B123 ] in B119 iff P1[ B122 , B123 ])))) implies B118 = B119))
proof
let C163 , C164 being (Relation of F6() , F7());
assume that
L446: (for B124 being (Element of F6()) holds (for B125 being (Element of F7()) holds ([ B124 , B125 ] in C163 iff P1[ B124 , B125 ])))
and
L447: (for B126 being (Element of F6()) holds (for B127 being (Element of F7()) holds ([ B126 , B127 ] in C164 iff P1[ B126 , B127 ])));
let C165 , C166 being set;
thus L448:now
assume L449: [ C165 , C166 ] in C163;
reconsider D55 = C165 as (Element of F6()) by L449 , ZFMISC_1:87;
reconsider D56 = C166 as (Element of F7()) by L449 , ZFMISC_1:87;
L450: P1[ D55 , D56 ] by L446 , L449;
thus L451: [ C165 , C166 ] in C164 by L450 , L447;
end;
assume L452: [ C165 , C166 ] in C164;
reconsider D57 = C165 as (Element of F6()) by L452 , ZFMISC_1:87;
reconsider D58 = C166 as (Element of F7()) by L452 , ZFMISC_1:87;
L453: P1[ D57 , D58 ] by L447 , L452;
thus L454: thesis by L453 , L446;
end;
scheme IndRelationUniq { F8 , F9() -> non  empty set , F10() -> (Element of ( NAT )) , F11() -> (Relation of F8() , F9()) , F12(set , set) -> (Relation of F8() , F9()) } : (for B128 , B129 being (Relation of F8() , F9()) holds (((ex B130 being (ManySortedSet of ( NAT )) st (B128 = ( B130 . F10() ) & ( B130 . ( 0 ) ) = F11() & (for B131 being (Element of ( NAT )) holds (for B132 being (Relation of F8() , F9()) holds (B132 = ( B130 . B131 ) implies ( B130 . ( B131 + 1 ) ) = F12(B132 , B131)))))) & (ex B133 being (ManySortedSet of ( NAT )) st (B129 = ( B133 . F10() ) & ( B133 . ( 0 ) ) = F11() & (for B134 being (Element of ( NAT )) holds (for B135 being (Relation of F8() , F9()) holds (B135 = ( B133 . B134 ) implies ( B133 . ( B134 + 1 ) ) = F12(B135 , B134))))))) implies B128 = B129))
proof
let C167 , C168 being (Relation of F8() , F9());
given C169 being (ManySortedSet of ( NAT )) such that
L455: C167 = ( C169 . F10() )
and
L456: ( C169 . ( 0 ) ) = F11()
and
L457: (for B136 being (Element of ( NAT )) holds (for B137 being (Relation of F8() , F9()) holds (B137 = ( C169 . B136 ) implies ( C169 . ( B136 + 1 ) ) = F12(B137 , B136))));

given C170 being (ManySortedSet of ( NAT )) such that
L458: C168 = ( C170 . F10() )
and
L459: ( C170 . ( 0 ) ) = F11()
and
L460: (for B138 being (Element of ( NAT )) holds (for B139 being (Relation of F8() , F9()) holds (B139 = ( C170 . B138 ) implies ( C170 . ( B138 + 1 ) ) = F12(B139 , B138))));

defpred S5[ (Element of ( NAT )) ] means (( C169 . $1 ) = ( C170 . $1 ) & ( C169 . $1 ) is (Relation of F8() , F9()));
L461: S5[ ( 0 ) ] by L456 , L459;
L462:
now
let C171 being (Element of ( NAT ));
assume L463: S5[ C171 ];
reconsider D59 = ( C169 . C171 ) as (Relation of F8() , F9()) by L463;
L464: ( C169 . ( C171 + 1 ) ) = F12(D59 , C171) by L457;
thus L465: S5[ ( C171 + 1 ) ] by L464 , L460 , L463;
end;
L466: (for B140 being (Element of ( NAT )) holds S5[ B140 ]) from NAT_1:sch 1(L461 , L462);
thus L467: thesis by L466 , L455 , L458;
end;
definition
let C172 being  partial  non-empty UAStr;
func DomRel C172 -> (Relation of (the carrier of C172)) means 
:L468: (for B141 , B142 being (Element of C172) holds ([ B141 , B142 ] in it iff (for B143 being (operation of C172) holds (for B144 , B145 being FinSequence holds (( ( B144 ^ <* B141 *> ) ^ B145 ) in ( dom B143 ) iff ( ( B144 ^ <* B142 *> ) ^ B145 ) in ( dom B143 ))))));
existence
proof
defpred S6[ set , set ] means (for B146 being (operation of C172) holds (for B147 , B148 being FinSequence holds (( ( B147 ^ <* $1 *> ) ^ B148 ) in ( dom B146 ) iff ( ( B147 ^ <* $2 *> ) ^ B148 ) in ( dom B146 ))));
thus L469: (ex B149 being (Relation of (the carrier of C172)) st (for B150 , B151 being (Element of C172) holds ([ B150 , B151 ] in B149 iff S6[ B150 , B151 ]))) from RELSET_1:sch 2;
end;
uniqueness
proof
defpred S7[ set , set ] means (for B152 being (operation of C172) holds (for B153 , B154 being FinSequence holds (( ( B153 ^ <* $1 *> ) ^ B154 ) in ( dom B152 ) iff ( ( B153 ^ <* $2 *> ) ^ B154 ) in ( dom B152 ))));
thus L470: (for B155 , B156 being (Relation of (the carrier of C172)) holds (((for B157 , B158 being (Element of C172) holds ([ B157 , B158 ] in B155 iff S7[ B157 , B158 ])) & (for B159 , B160 being (Element of C172) holds ([ B159 , B160 ] in B156 iff S7[ B159 , B160 ]))) implies B155 = B156)) from RelationUniq;
end;
end;
registration
let C173 being  partial  non-empty UAStr;
cluster ( DomRel C173 ) ->  total  symmetric  transitive;
coherence
proof
set D60 = (the carrier of C173);
L472: ( DomRel C173 ) is_reflexive_in D60
proof
let C174 being set;
L473: (for B161 being (operation of C173) holds (for B162 , B163 being FinSequence holds (( ( B162 ^ <* C174 *> ) ^ B163 ) in ( dom B161 ) iff ( ( B162 ^ <* C174 *> ) ^ B163 ) in ( dom B161 ))));
thus L474: thesis by L473 , L468;
end;
L475: ( dom ( DomRel C173 ) ) = D60 by L472 , ORDERS_1:13;
L476: ( field ( DomRel C173 ) ) = D60 by L472 , ORDERS_1:13;
thus L477: ( DomRel C173 ) is  total by L475 , PARTFUN1:def 2;
L478: ( DomRel C173 ) is_symmetric_in D60
proof
let C175 , C176 being set;
assume that
L479: C175 in D60
and
L480: C176 in D60;
reconsider D61 = C175 , D62 = C176 as (Element of D60) by L479 , L480;
assume L481: [ C175 , C176 ] in ( DomRel C173 );
L482: (for B164 being (operation of C173) holds (for B165 , B166 being FinSequence holds (( ( B165 ^ <* D61 *> ) ^ B166 ) in ( dom B164 ) iff ( ( B165 ^ <* D62 *> ) ^ B166 ) in ( dom B164 )))) by L481 , L468;
thus L483: thesis by L482 , L468;
end;
thus L484: ( DomRel C173 ) is  symmetric by L478 , L476 , RELAT_2:def 11;
L485: ( DomRel C173 ) is_transitive_in D60
proof
let C177 , C178 , C179 being set;
assume that
L486: C177 in D60
and
L487: C178 in D60
and
L488: C179 in D60;
reconsider D63 = C177 , D64 = C178 , D65 = C179 as (Element of D60) by L486 , L487 , L488;
assume that
L489: [ C177 , C178 ] in ( DomRel C173 )
and
L490: [ C178 , C179 ] in ( DomRel C173 );
L491:
now
let C180 being (operation of C173);
let C181 , C182 being FinSequence;
L492: (( ( C181 ^ <* D63 *> ) ^ C182 ) in ( dom C180 ) iff ( ( C181 ^ <* D64 *> ) ^ C182 ) in ( dom C180 )) by L489 , L468;
thus L493: (( ( C181 ^ <* D63 *> ) ^ C182 ) in ( dom C180 ) iff ( ( C181 ^ <* D65 *> ) ^ C182 ) in ( dom C180 )) by L492 , L490 , L468;
end;
thus L494: thesis by L491 , L468;
end;
thus L495: thesis by L485 , L476 , RELAT_2:def 16;
end;
end;
definition
let C183 being  non-empty  partial UAStr;
let C184 being (Relation of (the carrier of C183));
func C184 |^ C183 -> (Relation of (the carrier of C183)) means 
:L497: (for B167 , B168 being (Element of C183) holds ([ B167 , B168 ] in it iff ([ B167 , B168 ] in C184 & (for B169 being (operation of C183) holds (for B170 , B171 being FinSequence holds ((( ( B170 ^ <* B167 *> ) ^ B171 ) in ( dom B169 ) & ( ( B170 ^ <* B168 *> ) ^ B171 ) in ( dom B169 )) implies [ ( B169 . ( ( B170 ^ <* B167 *> ) ^ B171 ) ) , ( B169 . ( ( B170 ^ <* B168 *> ) ^ B171 ) ) ] in C184))))));
existence
proof
defpred S8[ set , set ] means ([ $1 , $2 ] in C184 & (for B172 being (operation of C183) holds (for B173 , B174 being FinSequence holds ((( ( B173 ^ <* $1 *> ) ^ B174 ) in ( dom B172 ) & ( ( B173 ^ <* $2 *> ) ^ B174 ) in ( dom B172 )) implies [ ( B172 . ( ( B173 ^ <* $1 *> ) ^ B174 ) ) , ( B172 . ( ( B173 ^ <* $2 *> ) ^ B174 ) ) ] in C184))));
thus L498: (ex B175 being (Relation of (the carrier of C183)) st (for B176 , B177 being (Element of C183) holds ([ B176 , B177 ] in B175 iff S8[ B176 , B177 ]))) from RELSET_1:sch 2;
end;
uniqueness
proof
defpred S9[ set , set ] means ([ $1 , $2 ] in C184 & (for B178 being (operation of C183) holds (for B179 , B180 being FinSequence holds ((( ( B179 ^ <* $1 *> ) ^ B180 ) in ( dom B178 ) & ( ( B179 ^ <* $2 *> ) ^ B180 ) in ( dom B178 )) implies [ ( B178 . ( ( B179 ^ <* $1 *> ) ^ B180 ) ) , ( B178 . ( ( B179 ^ <* $2 *> ) ^ B180 ) ) ] in C184))));
thus L499: (for B181 , B182 being (Relation of (the carrier of C183)) holds (((for B183 , B184 being (Element of C183) holds ([ B183 , B184 ] in B181 iff S9[ B183 , B184 ])) & (for B185 , B186 being (Element of C183) holds ([ B185 , B186 ] in B182 iff S9[ B185 , B186 ]))) implies B181 = B182)) from RelationUniq;
end;
end;
definition
let C185 being  non-empty  partial UAStr;
let C186 being (Relation of (the carrier of C185));
let C187 being (Element of ( NAT ));
func C186 |^ (C185 , C187) -> (Relation of (the carrier of C185)) means 
:L501: (ex B187 being (ManySortedSet of ( NAT )) st (it = ( B187 . C187 ) & ( B187 . ( 0 ) ) = C186 & (for B188 being (Element of ( NAT )) holds (for B189 being (Relation of (the carrier of C185)) holds (B189 = ( B187 . B188 ) implies ( B187 . ( B188 + 1 ) ) = ( B189 |^ C185 ))))));
existence
proof
deffunc H4((Relation of (the carrier of C185) , (the carrier of C185)) , (Element of ( NAT ))) = ( $1 |^ C185 );
thus L502: (ex B190 being (Relation of (the carrier of C185)) st (ex B191 being (ManySortedSet of ( NAT )) st (B190 = ( B191 . C187 ) & ( B191 . ( 0 ) ) = C186 & (for B192 being (Element of ( NAT )) holds (for B193 being (Relation of (the carrier of C185)) holds (B193 = ( B191 . B192 ) implies ( B191 . ( B192 + 1 ) ) = H4(B193 , B192))))))) from IndRelationEx;
end;
uniqueness
proof
deffunc H5((Relation of (the carrier of C185) , (the carrier of C185)) , (Element of ( NAT ))) = ( $1 |^ C185 );
thus L503: (for B194 , B195 being (Relation of (the carrier of C185)) holds (((ex B196 being (ManySortedSet of ( NAT )) st (B194 = ( B196 . C187 ) & ( B196 . ( 0 ) ) = C186 & (for B197 being (Element of ( NAT )) holds (for B198 being (Relation of (the carrier of C185)) holds (B198 = ( B196 . B197 ) implies ( B196 . ( B197 + 1 ) ) = H5(B198 , B197)))))) & (ex B199 being (ManySortedSet of ( NAT )) st (B195 = ( B199 . C187 ) & ( B199 . ( 0 ) ) = C186 & (for B200 being (Element of ( NAT )) holds (for B201 being (Relation of (the carrier of C185)) holds (B201 = ( B199 . B200 ) implies ( B199 . ( B200 + 1 ) ) = H5(B201 , B200))))))) implies B194 = B195)) from IndRelationUniq;
end;
end;
theorem
L505: (for B202 being  non-empty  partial UAStr holds (for B203 being (Relation of (the carrier of B202)) holds (( B203 |^ (B202 , ( 0 )) ) = B203 & ( B203 |^ (B202 , 1) ) = ( B203 |^ B202 ))))
proof
let C188 being  non-empty  partial UAStr;
let C189 being (Relation of (the carrier of C188));
consider C190 being (ManySortedSet of ( NAT )) such that L506: ( C189 |^ (C188 , ( 0 )) ) = ( C190 . ( 0 ) ) and L507: ( C190 . ( 0 ) ) = C189 and L508: (for B204 being (Element of ( NAT )) holds (for B205 being (Relation of (the carrier of C188)) holds (B205 = ( C190 . B204 ) implies ( C190 . ( B204 + 1 ) ) = ( B205 |^ C188 )))) by L501;
L509: ( C190 . ( ( 0 ) + 1 ) ) = ( C189 |^ C188 ) by L507 , L508;
thus L510: thesis by L509 , L507 , L508 , L501;
end;
theorem
L511: (for B206 being  non-empty  partial UAStr holds (for B207 being (Element of ( NAT )) holds (for B208 being (Relation of (the carrier of B206)) holds ( B208 |^ (B206 , ( B207 + 1 )) ) = ( ( B208 |^ (B206 , B207) ) |^ B206 ))))
proof
let C191 being  non-empty  partial UAStr;
let C192 being (Element of ( NAT ));
let C193 being (Relation of (the carrier of C191));
consider C194 being (ManySortedSet of ( NAT )) such that L512: ( C193 |^ (C191 , C192) ) = ( C194 . C192 ) and L513: ( C194 . ( 0 ) ) = C193 and L514: (for B209 being (Element of ( NAT )) holds (for B210 being (Relation of (the carrier of C191)) holds (B210 = ( C194 . B209 ) implies ( C194 . ( B209 + 1 ) ) = ( B210 |^ C191 )))) by L501;
L515: ( C194 . ( C192 + 1 ) ) = ( ( C193 |^ (C191 , C192) ) |^ C191 ) by L512 , L514;
thus L516: thesis by L515 , L513 , L514 , L501;
end;
theorem
L517: (for B211 being  non-empty  partial UAStr holds (for B212 , B213 being (Element of ( NAT )) holds (for B214 being (Relation of (the carrier of B211)) holds ( B214 |^ (B211 , ( B212 + B213 )) ) = ( ( B214 |^ (B211 , B212) ) |^ (B211 , B213) ))))
proof
let C195 being  non-empty  partial UAStr;
let C196 , C197 being (Element of ( NAT ));
let C198 being (Relation of (the carrier of C195));
defpred S10[ (Element of ( NAT )) ] means ( C198 |^ (C195 , ( C196 + $1 )) ) = ( ( C198 |^ (C195 , C196) ) |^ (C195 , $1) );
L518: S10[ ( 0 ) ] by L505;
L519:
now
let C199 being (Element of ( NAT ));
assume L520: S10[ C199 ];
L521: ( C198 |^ (C195 , ( C196 + ( C199 + 1 ) )) ) = ( C198 |^ (C195 , ( ( C196 + C199 ) + 1 )) )
.= ( ( C198 |^ (C195 , ( C196 + C199 )) ) |^ C195 ) by L511
.= ( ( C198 |^ (C195 , C196) ) |^ (C195 , ( C199 + 1 )) ) by L520 , L511;
thus L522: S10[ ( C199 + 1 ) ] by L521;
end;
L523: (for B215 being (Element of ( NAT )) holds S10[ B215 ]) from NAT_1:sch 1(L518 , L519);
thus L524: thesis by L523;
end;
theorem
L525: (for B216 being  non-empty  partial UAStr holds (for B217 being (Equivalence_Relation of (the carrier of B216)) holds (B217 c= ( DomRel B216 ) implies ( B217 |^ B216 ) is  total  symmetric  transitive)))
proof
let C200 being  non-empty  partial UAStr;
let C201 being (Equivalence_Relation of (the carrier of C200));
assume L526: C201 c= ( DomRel C200 );
L527:
now
let C202 being set;
assume L528: C202 in (the carrier of C200);
reconsider D66 = C202 as (Element of C200) by L528;
L529: [ D66 , D66 ] in C201 by EQREL_1:5;
L530:
now
let C203 being (operation of C200);
let C204 , C205 being FinSequence;
assume that
L531: ( ( C204 ^ <* D66 *> ) ^ C205 ) in ( dom C203 )
and
L532: ( ( C204 ^ <* D66 *> ) ^ C205 ) in ( dom C203 );
L533: ( C203 . ( ( C204 ^ <* D66 *> ) ^ C205 ) ) in ( rng C203 ) by L531 , FUNCT_1:def 3;
thus L534: [ ( C203 . ( ( C204 ^ <* D66 *> ) ^ C205 ) ) , ( C203 . ( ( C204 ^ <* D66 *> ) ^ C205 ) ) ] in C201 by L533 , EQREL_1:5;
end;
thus L535: [ C202 , C202 ] in ( C201 |^ C200 ) by L530 , L529 , L497;
end;
L536: ( C201 |^ C200 ) is_reflexive_in (the carrier of C200) by L527 , RELAT_2:def 1;
L537: ( dom ( C201 |^ C200 ) ) = (the carrier of C200) by L536 , ORDERS_1:13;
L538: ( field ( C201 |^ C200 ) ) = (the carrier of C200) by L536 , ORDERS_1:13;
thus L539: ( C201 |^ C200 ) is  total by L537 , PARTFUN1:def 2;
L540:
now
let C206 , C207 being set;
assume that
L541: C206 in (the carrier of C200)
and
L542: C207 in (the carrier of C200);
reconsider D67 = C206 , D68 = C207 as (Element of C200) by L541 , L542;
assume L543: [ C206 , C207 ] in ( C201 |^ C200 );
L544: [ D67 , D68 ] in C201 by L543 , L497;
L545:
now
thus L546: [ D68 , D67 ] in C201 by L544 , EQREL_1:6;
let C208 being (operation of C200);
let C209 , C210 being FinSequence;
assume that
L547: ( ( C209 ^ <* D68 *> ) ^ C210 ) in ( dom C208 )
and
L548: ( ( C209 ^ <* D67 *> ) ^ C210 ) in ( dom C208 );
L549: [ ( C208 . ( ( C209 ^ <* D67 *> ) ^ C210 ) ) , ( C208 . ( ( C209 ^ <* D68 *> ) ^ C210 ) ) ] in C201 by L543 , L547 , L548 , L497;
thus L550: [ ( C208 . ( ( C209 ^ <* D68 *> ) ^ C210 ) ) , ( C208 . ( ( C209 ^ <* D67 *> ) ^ C210 ) ) ] in C201 by L549 , EQREL_1:6;
end;
thus L551: [ C207 , C206 ] in ( C201 |^ C200 ) by L545 , L497;
end;
L552: ( C201 |^ C200 ) is_symmetric_in (the carrier of C200) by L540 , RELAT_2:def 3;
thus L553: ( C201 |^ C200 ) is  symmetric by L552 , L538 , RELAT_2:def 11;
L554:
now
let C211 , C212 , C213 being set;
assume that
L555: C211 in (the carrier of C200)
and
L556: C212 in (the carrier of C200)
and
L557: C213 in (the carrier of C200);
reconsider D69 = C211 , D70 = C212 , D71 = C213 as (Element of C200) by L555 , L556 , L557;
assume that
L558: [ C211 , C212 ] in ( C201 |^ C200 )
and
L559: [ C212 , C213 ] in ( C201 |^ C200 );
L560:
now
let C214 being (operation of C200);
let C215 , C216 being FinSequence;
L561: [ D69 , D70 ] in C201 by L558 , L497;
L562: ((( ( C215 ^ <* D69 *> ) ^ C216 ) in ( dom C214 ) & ( ( C215 ^ <* D70 *> ) ^ C216 ) in ( dom C214 )) implies [ ( C214 . ( ( C215 ^ <* D69 *> ) ^ C216 ) ) , ( C214 . ( ( C215 ^ <* D70 *> ) ^ C216 ) ) ] in C201) by L558 , L497;
L563: ((( ( C215 ^ <* D70 *> ) ^ C216 ) in ( dom C214 ) & ( ( C215 ^ <* D71 *> ) ^ C216 ) in ( dom C214 )) implies [ ( C214 . ( ( C215 ^ <* D70 *> ) ^ C216 ) ) , ( C214 . ( ( C215 ^ <* D71 *> ) ^ C216 ) ) ] in C201) by L559 , L497;
thus L564: ((( ( C215 ^ <* D69 *> ) ^ C216 ) in ( dom C214 ) & ( ( C215 ^ <* D71 *> ) ^ C216 ) in ( dom C214 )) implies [ ( C214 . ( ( C215 ^ <* D69 *> ) ^ C216 ) ) , ( C214 . ( ( C215 ^ <* D71 *> ) ^ C216 ) ) ] in C201) by L563 , L526 , L561 , L562 , L468 , EQREL_1:7;
end;
L565: [ D69 , D70 ] in C201 by L558 , L497;
L566: [ D70 , D71 ] in C201 by L559 , L497;
L567: [ D69 , D71 ] in C201 by L566 , L565 , EQREL_1:7;
thus L568: [ C211 , C213 ] in ( C201 |^ C200 ) by L567 , L560 , L497;
end;
L569: ( C201 |^ C200 ) is_transitive_in (the carrier of C200) by L554 , RELAT_2:def 8;
thus L570: thesis by L569 , L538 , RELAT_2:def 16;
end;
theorem
L571: (for B218 being  non-empty  partial UAStr holds (for B219 being (Relation of (the carrier of B218)) holds ( B219 |^ B218 ) c= B219))
proof
let C217 being  non-empty  partial UAStr;
let C218 being (Relation of (the carrier of C217));
let C219 , C220 being set;
assume L572: [ C219 , C220 ] in ( C218 |^ C217 );
L573: C219 in (the carrier of C217) by L572 , ZFMISC_1:87;
L574: C220 in (the carrier of C217) by L572 , ZFMISC_1:87;
thus L575: thesis by L574 , L572 , L573 , L497;
end;
theorem
L576: (for B220 being  non-empty  partial UAStr holds (for B221 being (Equivalence_Relation of (the carrier of B220)) holds (B221 c= ( DomRel B220 ) implies (for B222 being (Element of ( NAT )) holds ( B221 |^ (B220 , B222) ) is  total  symmetric  transitive))))
proof
let C221 being  non-empty  partial UAStr;
let C222 being (Equivalence_Relation of (the carrier of C221));
assume that
L577: C222 c= ( DomRel C221 );
defpred S11[ (Element of ( NAT )) ] means (( C222 |^ (C221 , $1) ) c= ( DomRel C221 ) & ( C222 |^ (C221 , $1) ) is  total  symmetric  transitive);
L578: S11[ ( 0 ) ] by L577 , L505;
L579:
now
let C223 being (Element of ( NAT ));
assume L580: S11[ C223 ];
L581: ( ( C222 |^ (C221 , C223) ) |^ C221 ) c= ( C222 |^ (C221 , C223) ) by L571;
L582: ( ( C222 |^ (C221 , C223) ) |^ C221 ) = ( C222 |^ (C221 , ( C223 + 1 )) ) by L511;
thus L583: S11[ ( C223 + 1 ) ] by L582 , L580 , L581 , L525 , XBOOLE_1:1;
end;
L584: (for B223 being (Element of ( NAT )) holds S11[ B223 ]) from NAT_1:sch 1(L578 , L579);
thus L585: thesis by L584;
end;
definition
let C224 being  non-empty  partial UAStr;
defpred S12[ set , set ] means (for B224 being (Element of ( NAT )) holds [ $1 , $2 ] in ( ( DomRel C224 ) |^ (C224 , B224) ));
func LimDomRel C224 -> (Relation of (the carrier of C224)) means 
:L586: (for B225 , B226 being (Element of C224) holds ([ B225 , B226 ] in it iff (for B227 being (Element of ( NAT )) holds [ B225 , B226 ] in ( ( DomRel C224 ) |^ (C224 , B227) ))));
existence
proof
thus L587: (ex B228 being (Relation of (the carrier of C224)) st (for B229 , B230 being (Element of C224) holds ([ B229 , B230 ] in B228 iff S12[ B229 , B230 ]))) from RELSET_1:sch 2;
end;
uniqueness
proof
thus L588: (for B231 , B232 being (Relation of (the carrier of C224)) holds (((for B233 , B234 being (Element of C224) holds ([ B233 , B234 ] in B231 iff S12[ B233 , B234 ])) & (for B235 , B236 being (Element of C224) holds ([ B235 , B236 ] in B232 iff S12[ B235 , B236 ]))) implies B231 = B232)) from RelationUniq;
end;
end;
theorem
L590: (for B237 being  non-empty  partial UAStr holds ( LimDomRel B237 ) c= ( DomRel B237 ))
proof
let C225 being  non-empty  partial UAStr;
let C226 , C227 being set;
assume L591: [ C226 , C227 ] in ( LimDomRel C225 );
L592: C226 in (the carrier of C225) by L591 , ZFMISC_1:87;
L593: C227 in (the carrier of C225) by L591 , ZFMISC_1:87;
L594: [ C226 , C227 ] in ( ( DomRel C225 ) |^ (C225 , ( 0 )) ) by L593 , L591 , L592 , L586;
thus L595: thesis by L594 , L505;
end;
registration
let C228 being  non-empty  partial UAStr;
cluster ( LimDomRel C228 ) ->  total  symmetric  transitive;
coherence
proof
L596:
now
let C229 being set;
assume L597: C229 in (the carrier of C228);
reconsider D72 = C229 as (Element of C228) by L597;
L598:
now
let C230 being (Element of ( NAT ));
L599: ( ( DomRel C228 ) |^ (C228 , C230) ) is  total  symmetric  transitive by L576;
thus L600: [ D72 , D72 ] in ( ( DomRel C228 ) |^ (C228 , C230) ) by L599 , EQREL_1:5;
end;
thus L601: [ C229 , C229 ] in ( LimDomRel C228 ) by L598 , L586;
end;
L602: ( LimDomRel C228 ) is_reflexive_in (the carrier of C228) by L596 , RELAT_2:def 1;
L603: ( dom ( LimDomRel C228 ) ) = (the carrier of C228) by L602 , ORDERS_1:13;
L604: ( field ( LimDomRel C228 ) ) = (the carrier of C228) by L602 , ORDERS_1:13;
thus L605: ( LimDomRel C228 ) is  total by L603 , PARTFUN1:def 2;
L606:
now
let C231 , C232 being set;
assume that
L607: C231 in (the carrier of C228)
and
L608: C232 in (the carrier of C228);
reconsider D73 = C231 , D74 = C232 as (Element of C228) by L607 , L608;
assume L609: [ C231 , C232 ] in ( LimDomRel C228 );
L610:
now
let C233 being (Element of ( NAT ));
L611: ( ( DomRel C228 ) |^ (C228 , C233) ) is  total  symmetric  transitive by L576;
L612: [ D73 , D74 ] in ( ( DomRel C228 ) |^ (C228 , C233) ) by L609 , L586;
thus L613: [ D74 , D73 ] in ( ( DomRel C228 ) |^ (C228 , C233) ) by L612 , L611 , EQREL_1:6;
end;
thus L614: [ C232 , C231 ] in ( LimDomRel C228 ) by L610 , L586;
end;
L615: ( LimDomRel C228 ) is_symmetric_in (the carrier of C228) by L606 , RELAT_2:def 3;
thus L616: ( LimDomRel C228 ) is  symmetric by L615 , L604 , RELAT_2:def 11;
L617:
now
let C234 , C235 , C236 being set;
assume that
L618: C234 in (the carrier of C228)
and
L619: C235 in (the carrier of C228)
and
L620: C236 in (the carrier of C228);
reconsider D75 = C234 , D76 = C235 , D77 = C236 as (Element of C228) by L618 , L619 , L620;
assume that
L621: [ C234 , C235 ] in ( LimDomRel C228 )
and
L622: [ C235 , C236 ] in ( LimDomRel C228 );
L623:
now
let C237 being (Element of ( NAT ));
L624: ( ( DomRel C228 ) |^ (C228 , C237) ) is  total  symmetric  transitive by L576;
L625: [ D75 , D76 ] in ( ( DomRel C228 ) |^ (C228 , C237) ) by L621 , L586;
L626: [ D76 , D77 ] in ( ( DomRel C228 ) |^ (C228 , C237) ) by L622 , L586;
thus L627: [ D75 , D77 ] in ( ( DomRel C228 ) |^ (C228 , C237) ) by L626 , L624 , L625 , EQREL_1:7;
end;
thus L628: [ C234 , C236 ] in ( LimDomRel C228 ) by L623 , L586;
end;
L629: ( LimDomRel C228 ) is_transitive_in (the carrier of C228) by L617 , RELAT_2:def 8;
thus L630: thesis by L629 , L604 , RELAT_2:def 16;
end;
end;
begin
definition
let C238 being non  empty set;
let C239 being (PartFunc of ( C238 * ) , C238);
let C240 being (a_partition of C238);
pred C239 is_partitable_wrt C240
means
:L632: (for B238 being (FinSequence of C240) holds (ex B239 being (Element of C240) st ( C239 .: ( product B238 ) ) c= B239))
;end;
definition
let C241 being non  empty set;
let C242 being (PartFunc of ( C241 * ) , C241);
let C243 being (a_partition of C241);
pred C242 is_exactly_partitable_wrt C243
means
:L634: (C242 is_partitable_wrt C243 & (for B240 being (FinSequence of C243) holds (( product B240 ) meets ( dom C242 ) implies ( product B240 ) c= ( dom C242 ))))
;end;
theorem
L636: (for B241 being  non-empty  partial UAStr holds (for B242 being (operation of B241) holds B242 is_exactly_partitable_wrt ( SmallestPartition (the carrier of B241) )))
proof
let C244 being  non-empty  partial UAStr;
set D78 = ( SmallestPartition (the carrier of C244) );
let C245 being (operation of C244);
thus L637:now
let C246 being (FinSequence of D78);
consider C247 being (FinSequence of (the carrier of C244)) such that L638: ( product C246 ) = { C247 } by L351;
L639: ((C247 in ( dom C245 ) & ( C245 . C247 ) in ( rng C245 ) & ( rng C245 ) c= (the carrier of C244)) or (not C247 in ( dom C245 ))) by FUNCT_1:def 3;
consider C248 being (Element of C244) such that L640: ((C247 in ( dom C245 ) & C248 = ( C245 . C247 )) or (not C247 in ( dom C245 ))) by L639;
L641: D78 = { { B243 } where B243 is (Element of C244) : (not contradiction) } by EQREL_1:37;
L642: { C248 } in D78 by L641;
reconsider D79 = { C248 } as (Element of D78) by L642;
take D80 = D79;
thus L643: ( C245 .: ( product C246 ) ) c= D80
proof
let C249 being set;
assume L644: C249 in ( C245 .: ( product C246 ) );
consider C250 being set such that L645: C250 in ( dom C245 ) and L646: C250 in ( product C246 ) and L647: C249 = ( C245 . C250 ) by L644 , FUNCT_1:def 6;
L648: C250 = C247 by L638 , L646 , TARSKI:def 1;
thus L649: thesis by L648 , L640 , L645 , L647 , TARSKI:def 1;
end;

end;
let C251 being (FinSequence of D78);
consider C252 being (FinSequence of (the carrier of C244)) such that L644: ( product C251 ) = { C252 } by L351;
assume L645: ( product C251 ) meets ( dom C245 );
L646: (ex B244 being set st (B244 in ( product C251 ) & B244 in ( dom C245 ))) by L645 , XBOOLE_0:3;
let C253 being set;
assume L647: C253 in ( product C251 );
L648: C253 = C252 by L647 , L644 , TARSKI:def 1;
thus L649: thesis by L648 , L644 , L646 , TARSKI:def 1;
end;
scheme FiniteTransitivity { F13 , F14() -> FinSequence , P2[set] , P3[set , set] } : P2[ F14() ]
provided
L650: P2[ F13() ]
and
L651: ( len F13() ) = ( len F14() )
and
L652: (for B245 , B246 being FinSequence holds (for B247 , B248 being set holds ((P2[ ( ( B245 ^ <* B247 *> ) ^ B246 ) ] & P3[ B247 , B248 ]) implies P2[ ( ( B245 ^ <* B248 *> ) ^ B246 ) ])))
and
L653: (for B249 being (Element of ( NAT )) holds (B249 in ( dom F13() ) implies P3[ ( F13() . B249 ) , ( F14() . B249 ) ]))
proof
defpred S13[ (Element of ( NAT )) ] means (for B250 , B251 , B252 , B253 being FinSequence holds ((( len B250 ) = $1 & F13() = ( B250 ^ B251 ) & ( len B252 ) = $1 & F14() = ( B252 ^ B253 )) implies P2[ ( B252 ^ B251 ) ]));
L654: S13[ ( 0 ) ]
proof
let C254 , C255 , C256 , C257 being FinSequence;
assume that
L655: ( len C254 ) = ( 0 )
and
L656: F13() = ( C254 ^ C255 )
and
L657: ( len C256 ) = ( 0 )
and
L658: F14() = ( C256 ^ C257 );
L659: C254 = ( {} ) by L655;
L660: C256 = ( {} ) by L657;
thus L661: thesis by L660 , L650 , L656 , L659;
end;
L662: (for B254 being (Element of ( NAT )) holds (S13[ B254 ] implies S13[ ( B254 + 1 ) ]))
proof
let C258 being (Element of ( NAT ));
assume that
L663: (for B255 , B256 , B257 , B258 being FinSequence holds ((( len B255 ) = C258 & F13() = ( B255 ^ B256 ) & ( len B257 ) = C258 & F14() = ( B257 ^ B258 )) implies P2[ ( B257 ^ B256 ) ]));
let C259 , C260 , C261 , C262 being FinSequence;
assume that
L664: ( len C259 ) = ( C258 + 1 )
and
L665: F13() = ( C259 ^ C260 )
and
L666: ( len C261 ) = ( C258 + 1 )
and
L667: F14() = ( C261 ^ C262 );
L668: C259 <> ( {} ) by L664;
L669: C261 <> ( {} ) by L666;
consider C263 being FinSequence, C264 being set such that L670: C259 = ( C263 ^ <* C264 *> ) by L668 , FINSEQ_1:46;
consider C265 being FinSequence, C266 being set such that L671: C261 = ( C265 ^ <* C266 *> ) by L669 , FINSEQ_1:46;
L672: ( dom C259 ) = ( Seg ( len C259 ) ) by FINSEQ_1:def 3;
L673: ( dom C261 ) = ( Seg ( len C261 ) ) by FINSEQ_1:def 3;
L674: ( len <* C264 *> ) = 1 by FINSEQ_1:40;
L675: ( len <* C266 *> ) = 1 by FINSEQ_1:40;
L676: ( len C259 ) = ( ( len C263 ) + 1 ) by L670 , L674 , FINSEQ_1:22;
L677: ( len C261 ) = ( ( len C265 ) + 1 ) by L671 , L675 , FINSEQ_1:22;
L678: F13() = ( C263 ^ ( <* C264 *> ^ C260 ) ) by L665 , L670 , FINSEQ_1:32;
L679: F14() = ( C265 ^ ( <* C266 *> ^ C262 ) ) by L667 , L671 , FINSEQ_1:32;
L680: ( C258 + 1 ) in ( dom C259 ) by L664 , L672 , FINSEQ_1:4;
L681: ( dom C259 ) c= ( dom F13() ) by L665 , FINSEQ_1:26;
L682: ( C259 . ( ( len C263 ) + 1 ) ) = C264 by L670 , FINSEQ_1:42;
L683: ( C261 . ( ( len C265 ) + 1 ) ) = C266 by L671 , FINSEQ_1:42;
L684: P2[ ( C265 ^ ( <* C264 *> ^ C260 ) ) ] by L663 , L664 , L666 , L676 , L677 , L678 , L679;
L685: ( F13() . ( C258 + 1 ) ) = C264 by L664 , L665 , L676 , L680 , L682 , FINSEQ_1:def 7;
L686: ( F14() . ( C258 + 1 ) ) = C266 by L664 , L666 , L667 , L672 , L673 , L677 , L680 , L683 , FINSEQ_1:def 7;
L687: P2[ ( ( C265 ^ <* C264 *> ) ^ C260 ) ] by L684 , FINSEQ_1:32;
thus L688: thesis by L687 , L652 , L653 , L671 , L680 , L681 , L685 , L686;
end;
L689: (for B259 being (Element of ( NAT )) holds S13[ B259 ]) from NAT_1:sch 1(L654 , L662);
L690: F13() = ( F13() ^ ( {} ) ) by FINSEQ_1:34;
L691: F14() = ( F14() ^ ( {} ) ) by FINSEQ_1:34;
thus L692: thesis by L691 , L651 , L689 , L690;
end;
theorem
L693: (for B260 being  non-empty  partial UAStr holds (for B261 being (operation of B260) holds B261 is_exactly_partitable_wrt ( Class ( LimDomRel B260 ) )))
proof
let C267 being  non-empty  partial UAStr;
set D81 = ( Class ( LimDomRel C267 ) );
let C268 being (operation of C267);
thus L694:now
let C269 being (FinSequence of D81);
set D82 = the (Element of D81);
per cases ;
suppose L695: ( product C269 ) meets ( dom C268 );

consider C270 being set such that L696: C270 in ( product C269 ) and L697: C270 in ( dom C268 ) by L695 , XBOOLE_0:3;
L698: ( C268 . C270 ) in (the carrier of C267) by L697 , PARTFUN1:4;
reconsider D83 = ( Class (( LimDomRel C267 ) , ( C268 . C270 )) ) as (Element of D81) by L698 , EQREL_1:def 3;
take D84 = D83;
thus L699: ( C268 .: ( product C269 ) ) c= D84
proof
let C271 being set;
assume L700: C271 in ( C268 .: ( product C269 ) );
consider C272 being set such that L701: C272 in ( dom C268 ) and L702: C272 in ( product C269 ) and L703: C271 = ( C268 . C272 ) by L700 , FUNCT_1:def 6;
L704: ( product C269 ) c= ( Funcs (( dom C269 ) , ( Union C269 )) ) by FUNCT_6:1;
L705: (ex B262 being Function st (C270 = B262 & ( dom B262 ) = ( dom C269 ) & ( rng B262 ) c= ( Union C269 ))) by L704 , L696 , FUNCT_2:def 2;
L706: (ex B263 being Function st (C272 = B263 & ( dom B263 ) = ( dom C269 ) & ( rng B263 ) c= ( Union C269 ))) by L702 , L704 , FUNCT_2:def 2;
reconsider D85 = C270 , D86 = C272 as Function by L696 , L702;
L707: ( dom C269 ) = ( Seg ( len C269 ) ) by FINSEQ_1:def 3;
reconsider D87 = D85 , D88 = D86 as FinSequence by L707 , L705 , L706 , FINSEQ_1:def 2;
defpred S14[ set ] means ($1 in ( dom C268 ) & ( C268 . $1 ) in D84);
defpred S15[ set , set ] means [ $1 , $2 ] in ( LimDomRel C267 );
L708: ( len D87 ) = ( len C269 ) by L705 , L707 , FINSEQ_1:def 3;
L709: ( len D87 ) = ( len D88 ) by L708 , L706 , L707 , FINSEQ_1:def 3;
L710: S14[ D87 ] by L697 , EQREL_1:20 , PARTFUN1:4;
L711: (for B264 , B265 being FinSequence holds (for B266 , B267 being set holds ((S14[ ( ( B264 ^ <* B266 *> ) ^ B265 ) ] & S15[ B266 , B267 ]) implies S14[ ( ( B264 ^ <* B267 *> ) ^ B265 ) ])))
proof
let C273 , C274 being FinSequence;
let C275 , C276 being set;
assume that
L712: ( ( C273 ^ <* C275 *> ) ^ C274 ) in ( dom C268 )
and
L713: ( C268 . ( ( C273 ^ <* C275 *> ) ^ C274 ) ) in D84
and
L714: [ C275 , C276 ] in ( LimDomRel C267 );
L715: [ ( C268 . ( ( C273 ^ <* C275 *> ) ^ C274 ) ) , ( C268 . D87 ) ] in ( LimDomRel C267 ) by L713 , EQREL_1:19;
L716: ( LimDomRel C267 ) c= ( DomRel C267 ) by L590;
L717: C275 in (the carrier of C267) by L714 , ZFMISC_1:87;
L718: C276 in (the carrier of C267) by L714 , ZFMISC_1:87;
thus L719: ( ( C273 ^ <* C276 *> ) ^ C274 ) in ( dom C268 ) by L718 , L712 , L714 , L716 , L717 , L468;
L720: ( C268 . ( ( C273 ^ <* C275 *> ) ^ C274 ) ) in ( rng C268 ) by L712 , FUNCT_1:def 3;
L721: ( C268 . ( ( C273 ^ <* C276 *> ) ^ C274 ) ) in ( rng C268 ) by L719 , FUNCT_1:def 3;
L722:
now
let C277 being (Element of ( NAT ));
L723: [ C275 , C276 ] in ( ( DomRel C267 ) |^ (C267 , ( C277 + 1 )) ) by L714 , L717 , L718 , L586;
L724: [ C275 , C276 ] in ( ( ( DomRel C267 ) |^ (C267 , C277) ) |^ C267 ) by L723 , L511;
L725: [ ( C268 . ( ( C273 ^ <* C275 *> ) ^ C274 ) ) , ( C268 . ( ( C273 ^ <* C276 *> ) ^ C274 ) ) ] in ( ( DomRel C267 ) |^ (C267 , C277) ) by L724 , L712 , L717 , L718 , L719 , L497;
L726: ( ( DomRel C267 ) |^ (C267 , C277) ) is  total  symmetric  transitive by L576;
thus L727: [ ( C268 . ( ( C273 ^ <* C276 *> ) ^ C274 ) ) , ( C268 . ( ( C273 ^ <* C275 *> ) ^ C274 ) ) ] in ( ( DomRel C267 ) |^ (C267 , C277) ) by L726 , L725 , EQREL_1:6;
end;
L728: [ ( C268 . ( ( C273 ^ <* C276 *> ) ^ C274 ) ) , ( C268 . ( ( C273 ^ <* C275 *> ) ^ C274 ) ) ] in ( LimDomRel C267 ) by L722 , L720 , L721 , L586;
L729: [ ( C268 . ( ( C273 ^ <* C276 *> ) ^ C274 ) ) , ( C268 . D87 ) ] in ( LimDomRel C267 ) by L728 , L715 , EQREL_1:7;
thus L730: thesis by L729 , EQREL_1:19;
end;
L731: (for B268 being (Element of ( NAT )) holds (B268 in ( dom D87 ) implies S15[ ( D87 . B268 ) , ( D88 . B268 ) ]))
proof
let C278 being (Element of ( NAT ));
assume L732: C278 in ( dom D87 );
L733: ( C269 . C278 ) in ( rng C269 ) by L732 , L705 , FUNCT_1:def 3;
reconsider D89 = ( C269 . C278 ) as (Element of D81) by L733;
L734: (ex B269 being Function st (D87 = B269 & ( dom B269 ) = ( dom C269 ) & (for B270 being set holds (B270 in ( dom C269 ) implies ( B269 . B270 ) in ( C269 . B270 ))))) by L696 , CARD_3:def 5;
L735: (ex B271 being Function st (D88 = B271 & ( dom B271 ) = ( dom C269 ) & (for B272 being set holds (B272 in ( dom C269 ) implies ( B271 . B272 ) in ( C269 . B272 ))))) by L702 , CARD_3:def 5;
L736: (ex B273 being set st (B273 in (the carrier of C267) & D89 = ( Class (( LimDomRel C267 ) , B273) ))) by EQREL_1:def 3;
L737: ( D87 . C278 ) in D89 by L732 , L734;
L738: ( D88 . C278 ) in D89 by L732 , L734 , L735;
thus L739: thesis by L738 , L736 , L737 , EQREL_1:22;
end;
L740: S14[ D88 ] from FiniteTransitivity(L710 , L709 , L711 , L731);
thus L741: thesis by L740 , L703;
end;

end;
suppose L700: ( product C269 ) misses ( dom C268 );

L701: ( ( product C269 ) /\ ( dom C268 ) ) = ( {} ) by L700 , XBOOLE_0:def 7;
L702: ( C268 .: ( product C269 ) ) = ( C268 .: ( {} ) ) by L701 , RELAT_1:112
.= ( {} );
L703: ( C268 .: ( product C269 ) ) c= D82 by L702 , XBOOLE_1:2;
thus L704: (ex B274 being (Element of D81) st ( C268 .: ( product C269 ) ) c= B274) by L703;
end;
end;
let C279 being (FinSequence of D81);
assume L706: ( product C279 ) meets ( dom C268 );
consider C280 being set such that L707: C280 in ( product C279 ) and L708: C280 in ( dom C268 ) by L706 , XBOOLE_0:3;
let C281 being set;
assume L709: C281 in ( product C279 );
L710: ( product C279 ) c= ( Funcs (( dom C279 ) , ( Union C279 )) ) by FUNCT_6:1;
L711: (ex B275 being Function st (C280 = B275 & ( dom B275 ) = ( dom C279 ) & ( rng B275 ) c= ( Union C279 ))) by L710 , L707 , FUNCT_2:def 2;
L712: (ex B276 being Function st (C281 = B276 & ( dom B276 ) = ( dom C279 ) & ( rng B276 ) c= ( Union C279 ))) by L709 , L710 , FUNCT_2:def 2;
reconsider D90 = C280 , D91 = C281 as Function by L707 , L709;
L713: ( dom C279 ) = ( Seg ( len C279 ) ) by FINSEQ_1:def 3;
reconsider D92 = D90 , D93 = D91 as FinSequence by L713 , L711 , L712 , FINSEQ_1:def 2;
defpred S16[ set ] means $1 in ( dom C268 );
defpred S17[ set , set ] means [ $1 , $2 ] in ( LimDomRel C267 );
L714: ( len D92 ) = ( len C279 ) by L711 , L713 , FINSEQ_1:def 3;
L715: ( len D92 ) = ( len D93 ) by L714 , L712 , L713 , FINSEQ_1:def 3;
L716: S16[ D92 ] by L708;
L717: (for B277 , B278 being FinSequence holds (for B279 , B280 being set holds ((S16[ ( ( B277 ^ <* B279 *> ) ^ B278 ) ] & S17[ B279 , B280 ]) implies S16[ ( ( B277 ^ <* B280 *> ) ^ B278 ) ])))
proof
let C282 , C283 being FinSequence;
let C284 , C285 being set;
assume that
L718: ( ( C282 ^ <* C284 *> ) ^ C283 ) in ( dom C268 )
and
L719: [ C284 , C285 ] in ( LimDomRel C267 );
L720: ( LimDomRel C267 ) c= ( DomRel C267 ) by L590;
L721: C284 in (the carrier of C267) by L719 , ZFMISC_1:87;
L722: C285 in (the carrier of C267) by L719 , ZFMISC_1:87;
thus L723: thesis by L722 , L718 , L719 , L720 , L721 , L468;
end;
L724: (for B281 being (Element of ( NAT )) holds (B281 in ( dom D92 ) implies S17[ ( D92 . B281 ) , ( D93 . B281 ) ]))
proof
let C286 being (Element of ( NAT ));
assume L725: C286 in ( dom D92 );
L726: ( C279 . C286 ) in ( rng C279 ) by L725 , L711 , FUNCT_1:def 3;
reconsider D94 = ( C279 . C286 ) as (Element of D81) by L726;
L727: (ex B282 being Function st (D92 = B282 & ( dom B282 ) = ( dom C279 ) & (for B283 being set holds (B283 in ( dom C279 ) implies ( B282 . B283 ) in ( C279 . B283 ))))) by L707 , CARD_3:def 5;
L728: (ex B284 being Function st (D93 = B284 & ( dom B284 ) = ( dom C279 ) & (for B285 being set holds (B285 in ( dom C279 ) implies ( B284 . B285 ) in ( C279 . B285 ))))) by L709 , CARD_3:def 5;
L729: (ex B286 being set st (B286 in (the carrier of C267) & D94 = ( Class (( LimDomRel C267 ) , B286) ))) by EQREL_1:def 3;
L730: ( D92 . C286 ) in D94 by L725 , L727;
L731: ( D93 . C286 ) in D94 by L725 , L727 , L728;
thus L732: thesis by L731 , L729 , L730 , EQREL_1:22;
end;
L733: S16[ D93 ] from FiniteTransitivity(L716 , L715 , L717 , L724);
thus L734: thesis by L733;
end;
definition
let C287 being  partial  non-empty UAStr;
mode a_partition of C287
 -> (a_partition of (the carrier of C287))
means :L735: (for B287 being (operation of C287) holds B287 is_exactly_partitable_wrt it);
existence
proof
L736: (for B288 being (operation of C287) holds B288 is_exactly_partitable_wrt ( Class ( LimDomRel C287 ) )) by L693;
thus L737: thesis by L736;
end;
end;
definition
let C288 being  partial  non-empty UAStr;
mode IndexedPartition of C288
 -> (IndexedPartition of (the carrier of C288))
means :L739: ( rng it ) is (a_partition of C288);
existence
proof
set D95 = the (a_partition of C288);
take ( id D95 );
thus L740: thesis;
end;
end;
definition
let C289 being  partial  non-empty UAStr;
let C290 being (IndexedPartition of C289);
redefine func rng C290 -> (a_partition of C289);

coherence by L739;
end;
theorem
L743: (for B289 being  non-empty  partial UAStr holds ( Class ( LimDomRel B289 ) ) is (a_partition of B289))
proof
let C291 being  partial  non-empty UAStr;
thus L744: (for B290 being (operation of C291) holds B290 is_exactly_partitable_wrt ( Class ( LimDomRel C291 ) )) by L693;
end;
theorem
L745: (for B291 being non  empty set holds (for B292 being (a_partition of B291) holds (for B293 being (FinSequence of B292) holds (for B294 , B295 being FinSequence holds (for B296 , B297 being set holds ((( ( B294 ^ <* B296 *> ) ^ B295 ) in ( product B293 ) & (ex B298 being (Element of B292) st (B296 in B298 & B297 in B298))) implies ( ( B294 ^ <* B297 *> ) ^ B295 ) in ( product B293 )))))))
proof
let C292 being non  empty set;
let C293 being (a_partition of C292);
let C294 being (FinSequence of C293);
let C295 , C296 being FinSequence;
let C297 , C298 being set;
assume L746: ( ( C295 ^ <* C297 *> ) ^ C296 ) in ( product C294 );
given C299 being (Element of C293) such that
L747: C297 in C299
and
L748: C298 in C299;

reconsider D96 = C297 , D97 = C298 as (Element of C299) by L747 , L748;
L749:
now
L750: (ex B299 being Function st (( ( C295 ^ <* D96 *> ) ^ C296 ) = B299 & ( dom B299 ) = ( dom C294 ) & (for B300 being set holds (B300 in ( dom C294 ) implies ( B299 . B300 ) in ( C294 . B300 ))))) by L746 , CARD_3:def 5;
thus L751: ( dom ( ( C295 ^ <* D97 *> ) ^ C296 ) ) = ( Seg ( len ( ( C295 ^ <* D97 *> ) ^ C296 ) ) ) by FINSEQ_1:def 3
.= ( Seg ( ( len ( C295 ^ <* D97 *> ) ) + ( len C296 ) ) ) by FINSEQ_1:22
.= ( Seg ( ( ( len C295 ) + ( len <* D97 *> ) ) + ( len C296 ) ) ) by FINSEQ_1:22
.= ( Seg ( ( ( len C295 ) + 1 ) + ( len C296 ) ) ) by FINSEQ_1:40
.= ( Seg ( ( ( len C295 ) + ( len <* D96 *> ) ) + ( len C296 ) ) ) by FINSEQ_1:40
.= ( Seg ( ( len ( C295 ^ <* D96 *> ) ) + ( len C296 ) ) ) by FINSEQ_1:22
.= ( Seg ( len ( ( C295 ^ <* D96 *> ) ^ C296 ) ) ) by FINSEQ_1:22
.= ( dom C294 ) by L750 , FINSEQ_1:def 3;
let C300 being set;
assume L752: C300 in ( dom C294 );
reconsider D98 = C300 as (Element of ( NAT )) by L752;
L753: ( len <* D96 *> ) = 1 by FINSEQ_1:40;
L754: ( len <* D97 *> ) = 1 by FINSEQ_1:40;
L755: ( dom <* D96 *> ) = ( Seg 1 ) by FINSEQ_1:38;
L756: ( len ( C295 ^ <* D96 *> ) ) = ( ( len C295 ) + 1 ) by L753 , FINSEQ_1:22;
L757: ( len ( C295 ^ <* D97 *> ) ) = ( ( len C295 ) + 1 ) by L754 , FINSEQ_1:22;
L758: ( dom ( C295 ^ <* D96 *> ) ) = ( Seg ( ( len C295 ) + 1 ) ) by L756 , FINSEQ_1:def 3;
L759: ( dom ( C295 ^ <* D97 *> ) ) = ( Seg ( ( len C295 ) + 1 ) ) by L757 , FINSEQ_1:def 3;
L760: (D98 in ( dom ( C295 ^ <* D96 *> ) ) or (ex B301 being Nat st (B301 in ( dom C296 ) & D98 = ( ( len ( C295 ^ <* D96 *> ) ) + B301 )))) by L750 , L752 , FINSEQ_1:25;
L761: ( dom C295 ) c= ( dom ( C295 ^ <* D97 *> ) ) by FINSEQ_1:26;
per cases  by L760 , FINSEQ_1:25;
suppose L762: D98 in ( dom C295 );

L763: ( ( C295 ^ <* D97 *> ) . C300 ) = ( C295 . C300 ) by L762 , FINSEQ_1:def 7;
L764: ( ( C295 ^ <* D96 *> ) . C300 ) = ( C295 . C300 ) by L762 , FINSEQ_1:def 7;
L765: ( ( ( C295 ^ <* D97 *> ) ^ C296 ) . C300 ) = ( C295 . C300 ) by L761 , L762 , L763 , FINSEQ_1:def 7;
L766: ( ( ( C295 ^ <* D96 *> ) ^ C296 ) . C300 ) = ( C295 . C300 ) by L758 , L759 , L761 , L762 , L764 , FINSEQ_1:def 7;
thus L767: ( ( ( C295 ^ <* D97 *> ) ^ C296 ) . C300 ) in ( C294 . C300 ) by L766 , L750 , L752 , L765;
end;
suppose L768: (ex B302 being Nat st (B302 in ( dom <* D96 *> ) & D98 = ( ( len C295 ) + B302 )));

consider C301 being Nat such that L769: C301 in ( Seg 1 ) and L770: D98 = ( ( len C295 ) + C301 ) by L768 , L755;
L771: C301 = 1 by L769 , FINSEQ_1:2 , TARSKI:def 1;
L772: ( ( C295 ^ <* D96 *> ) . D98 ) = D96 by L771 , L770 , FINSEQ_1:42;
L773: ( ( C295 ^ <* D97 *> ) . D98 ) = D97 by L770 , L771 , FINSEQ_1:42;
L774: D98 in ( dom ( C295 ^ <* D97 *> ) ) by L759 , L770 , L771 , FINSEQ_1:4;
L775: ( ( ( C295 ^ <* D96 *> ) ^ C296 ) . D98 ) = D96 by L774 , L758 , L759 , L772 , FINSEQ_1:def 7;
L776: ( ( ( C295 ^ <* D97 *> ) ^ C296 ) . D98 ) = D97 by L773 , L774 , FINSEQ_1:def 7;
L777: D96 in ( C294 . C300 ) by L750 , L752 , L775;
L778: ( C294 . C300 ) in ( rng C294 ) by L752 , FUNCT_1:def 3;
L779: ( C294 . C300 ) in C293 by L778;
L780: C299 meets ( C294 . C300 ) by L777 , XBOOLE_0:3;
L781: ( C294 . C300 ) = C299 by L780 , L779 , EQREL_1:def 4;
thus L782: ( ( ( C295 ^ <* D97 *> ) ^ C296 ) . C300 ) in ( C294 . C300 ) by L781 , L776;
end;
suppose L783: (ex B303 being (Element of ( NAT )) st (B303 in ( dom C296 ) & D98 = ( ( len ( C295 ^ <* D96 *> ) ) + B303 )));

consider C302 being (Element of ( NAT )) such that L784: C302 in ( dom C296 ) and L785: D98 = ( ( len ( C295 ^ <* D96 *> ) ) + C302 ) by L783;
L786: ( ( ( C295 ^ <* D97 *> ) ^ C296 ) . C300 ) = ( C296 . C302 ) by L756 , L757 , L784 , L785 , FINSEQ_1:def 7;
L787: ( ( ( C295 ^ <* D96 *> ) ^ C296 ) . C300 ) = ( C296 . C302 ) by L784 , L785 , FINSEQ_1:def 7;
thus L788: ( ( ( C295 ^ <* D97 *> ) ^ C296 ) . C300 ) in ( C294 . C300 ) by L787 , L750 , L752 , L786;
end;
end;
thus L790: thesis by L749 , CARD_3:def 5;
end;
theorem
L791: (for B304 being  partial  non-empty UAStr holds (for B305 being (a_partition of B304) holds B305 is_finer_than ( Class ( LimDomRel B304 ) )))
proof
let C303 being  partial  non-empty UAStr;
let C304 being (a_partition of C303);
consider C305 being (Equivalence_Relation of (the carrier of C303)) such that L792: C304 = ( Class C305 ) by EQREL_1:34;
let C306 being set;
assume L793: C306 in C304;
reconsider D99 = C306 as (Element of C304) by L793;
set D100 = the (Element of D99);
take ( Class (( LimDomRel C303 ) , D100) );
thus L794: ( Class (( LimDomRel C303 ) , D100) ) in ( Class ( LimDomRel C303 ) ) by EQREL_1:def 3;
let C307 being set;
assume L795: C307 in C306;
reconsider D101 = C307 as (Element of D99) by L795;
reconsider D102 = D100 , D103 = D101 as (Element of C303);
defpred S18[ (Element of ( NAT )) ] means C305 c= ( ( DomRel C303 ) |^ (C303 , $1) );
L796: S18[ ( 0 ) ]
proof
let C308 , C309 being set;
assume L797: [ C308 , C309 ] in C305;
reconsider D104 = C308 , D105 = C309 as (Element of C303) by L797 , ZFMISC_1:87;
reconsider D106 = ( Class (C305 , D105) ) as (Element of C304) by L792 , EQREL_1:def 3;
L798: D104 in D106 by L797 , EQREL_1:19;
L799: D105 in D106 by EQREL_1:20;
L800: (for B306 being (operation of C303) holds (for B307 , B308 being FinSequence holds (( ( B307 ^ <* D104 *> ) ^ B308 ) in ( dom B306 ) iff ( ( B307 ^ <* D105 *> ) ^ B308 ) in ( dom B306 ))))
proof
let C310 being (operation of C303);
let C311 , C312 being FinSequence;
L801: C310 is_exactly_partitable_wrt C304 by L735;
L802:
now
let C313 , C314 being FinSequence;
let C315 , C316 being (Element of D106);
assume L803: ( ( C313 ^ <* C315 *> ) ^ C314 ) in ( dom C310 );
L804: ( ( C313 ^ <* C315 *> ) ^ C314 ) is (FinSequence of (the carrier of C303)) by L803 , FINSEQ_1:def 11;
consider C317 being (FinSequence of C304) such that L805: ( ( C313 ^ <* C315 *> ) ^ C314 ) in ( product C317 ) by L804 , L123;
L806: ( product C317 ) meets ( dom C310 ) by L803 , L805 , XBOOLE_0:3;
L807: ( product C317 ) c= ( dom C310 ) by L806 , L801 , L634;
L808: ( ( C313 ^ <* C316 *> ) ^ C314 ) in ( product C317 ) by L805 , L745;
thus L809: ( ( C313 ^ <* C316 *> ) ^ C314 ) in ( dom C310 ) by L808 , L807;
end;
thus L810: thesis by L802 , L798 , L799;
end;
L811: [ D104 , D105 ] in ( DomRel C303 ) by L800 , L468;
thus L812: thesis by L811 , L505;
end;
L813: (for B309 being (Element of ( NAT )) holds (S18[ B309 ] implies S18[ ( B309 + 1 ) ]))
proof
let C318 being (Element of ( NAT ));
assume L814: C305 c= ( ( DomRel C303 ) |^ (C303 , C318) );
let C319 , C320 being set;
assume L815: [ C319 , C320 ] in C305;
reconsider D107 = C319 , D108 = C320 as (Element of C303) by L815 , ZFMISC_1:87;
reconsider D109 = ( Class (C305 , D108) ) as (Element of C304) by L792 , EQREL_1:def 3;
L816:
now
let C321 being (operation of C303);
let C322 , C323 being FinSequence;
assume that
L817: ( ( C322 ^ <* D107 *> ) ^ C323 ) in ( dom C321 )
and
L818: ( ( C322 ^ <* D108 *> ) ^ C323 ) in ( dom C321 );
L819: ( ( C322 ^ <* D107 *> ) ^ C323 ) is (FinSequence of (the carrier of C303)) by L817 , FINSEQ_1:def 11;
consider C324 being (FinSequence of C304) such that L820: ( ( C322 ^ <* D107 *> ) ^ C323 ) in ( product C324 ) by L819 , L123;
L821: C321 is_exactly_partitable_wrt C304 by L735;
L822: C321 is_partitable_wrt C304 by L821 , L634;
consider C325 being (Element of C304) such that L823: ( C321 .: ( product C324 ) ) c= C325 by L822 , L632;
L824: D107 in D109 by L815 , EQREL_1:19;
L825: D108 in D109 by EQREL_1:20;
L826: ( ( C322 ^ <* D108 *> ) ^ C323 ) in ( product C324 ) by L825 , L820 , L824 , L745;
L827: ( C321 . ( ( C322 ^ <* D107 *> ) ^ C323 ) ) in ( C321 .: ( product C324 ) ) by L817 , L820 , FUNCT_1:def 6;
L828: ( C321 . ( ( C322 ^ <* D108 *> ) ^ C323 ) ) in ( C321 .: ( product C324 ) ) by L818 , L826 , FUNCT_1:def 6;
L829: (ex B310 being set st (B310 in (the carrier of C303) & C325 = ( Class (C305 , B310) ))) by L792 , EQREL_1:def 3;
L830: [ ( C321 . ( ( C322 ^ <* D107 *> ) ^ C323 ) ) , ( C321 . ( ( C322 ^ <* D108 *> ) ^ C323 ) ) ] in C305 by L829 , L823 , L827 , L828 , EQREL_1:22;
thus L831: [ ( C321 . ( ( C322 ^ <* D107 *> ) ^ C323 ) ) , ( C321 . ( ( C322 ^ <* D108 *> ) ^ C323 ) ) ] in ( ( DomRel C303 ) |^ (C303 , C318) ) by L830 , L814;
end;
L832: [ D107 , D108 ] in ( ( ( DomRel C303 ) |^ (C303 , C318) ) |^ C303 ) by L816 , L814 , L815 , L497;
thus L833: thesis by L832 , L511;
end;
L834: (for B311 being (Element of ( NAT )) holds S18[ B311 ]) from NAT_1:sch 1(L796 , L813);
L835:
now
let C326 being (Element of ( NAT ));
L836: (ex B312 being set st (B312 in (the carrier of C303) & D99 = ( Class (C305 , B312) ))) by L792 , EQREL_1:def 3;
L837: [ D102 , D103 ] in C305 by L836 , EQREL_1:22;
L838: C305 c= ( ( DomRel C303 ) |^ (C303 , C326) ) by L834;
thus L839: [ D102 , D103 ] in ( ( DomRel C303 ) |^ (C303 , C326) ) by L838 , L837;
end;
L840: [ D102 , D103 ] in ( LimDomRel C303 ) by L835 , L586;
L841: [ D103 , D102 ] in ( LimDomRel C303 ) by L840 , EQREL_1:6;
thus L842: thesis by L841 , EQREL_1:19;
end;
begin
definition
let C327 , C328 being ManySortedSign;
let C329 , C330 being Function;
pred C329 , C330 form_morphism_between C327 , C328
means
:L843: (( dom C329 ) = (the carrier of C327) & ( dom C330 ) = (the carrier' of C327) & ( rng C329 ) c= (the carrier of C328) & ( rng C330 ) c= (the carrier' of C328) & ( C329 * (the ResultSort of C327) ) = ( (the ResultSort of C328) * C330 ) & (for B313 being set holds (for B314 being Function holds ((B313 in (the carrier' of C327) & B314 = ( (the Arity of C327) . B313 )) implies ( C329 * B314 ) = ( (the Arity of C328) . ( C330 . B313 ) )))))
;end;
theorem
L845: (for B315 being non  void non  empty ManySortedSign holds ( id (the carrier of B315) ) , ( id (the carrier' of B315) ) form_morphism_between B315 , B315)
proof
let C331 being non  void non  empty ManySortedSign;
set D110 = ( id (the carrier of C331) );
set D111 = ( id (the carrier' of C331) );
L846: ( dom (the ResultSort of C331) ) = (the carrier' of C331) by FUNCT_2:def 1;
L847: ( rng (the ResultSort of C331) ) c= (the carrier of C331);
L848: ( D110 * (the ResultSort of C331) ) = (the ResultSort of C331) by L847 , RELAT_1:53;
thus L849: (( dom D110 ) = (the carrier of C331) & ( dom D111 ) = (the carrier' of C331) & ( rng D110 ) c= (the carrier of C331) & ( rng D111 ) c= (the carrier' of C331) & ( D110 * (the ResultSort of C331) ) = ( (the ResultSort of C331) * D111 )) by L848 , L846 , RELAT_1:52;
let C332 being set;
let C333 being Function;
assume that
L850: C332 in (the carrier' of C331)
and
L851: C333 = ( (the Arity of C331) . C332 );
L852: ( D111 . C332 ) = C332 by L850 , FUNCT_1:17;
L853: C333 in ( (the carrier of C331) * ) by L850 , L851 , FUNCT_2:5;
L854: C333 is (FinSequence of (the carrier of C331)) by L853 , FINSEQ_1:def 11;
L855: ( rng C333 ) c= (the carrier of C331) by L854 , FINSEQ_1:def 4;
thus L856: thesis by L855 , L851 , L852 , RELAT_1:53;
end;
theorem
L857: (for B316 , B317 , B318 being ManySortedSign holds (for B319 , B320 , B321 , B322 being Function holds ((B319 , B321 form_morphism_between B316 , B317 & B320 , B322 form_morphism_between B317 , B318) implies ( B320 * B319 ) , ( B322 * B321 ) form_morphism_between B316 , B318)))
proof
let C334 , C335 , C336 being ManySortedSign;
let C337 , C338 , C339 , C340 being Function;
assume that
L858: ( dom C337 ) = (the carrier of C334)
and
L859: ( dom C339 ) = (the carrier' of C334)
and
L860: ( rng C337 ) c= (the carrier of C335)
and
L861: ( rng C339 ) c= (the carrier' of C335)
and
L862: ( C337 * (the ResultSort of C334) ) = ( (the ResultSort of C335) * C339 )
and
L863: (for B323 being set holds (for B324 being Function holds ((B323 in (the carrier' of C334) & B324 = ( (the Arity of C334) . B323 )) implies ( C337 * B324 ) = ( (the Arity of C335) . ( C339 . B323 ) ))))
and
L864: ( dom C338 ) = (the carrier of C335)
and
L865: ( dom C340 ) = (the carrier' of C335)
and
L866: ( rng C338 ) c= (the carrier of C336)
and
L867: ( rng C340 ) c= (the carrier' of C336)
and
L868: ( C338 * (the ResultSort of C335) ) = ( (the ResultSort of C336) * C340 )
and
L869: (for B325 being set holds (for B326 being Function holds ((B325 in (the carrier' of C335) & B326 = ( (the Arity of C335) . B325 )) implies ( C338 * B326 ) = ( (the Arity of C336) . ( C340 . B325 ) ))));
set D112 = ( C338 * C337 );
set D113 = ( C340 * C339 );
thus L870: (( dom D112 ) = (the carrier of C334) & ( dom D113 ) = (the carrier' of C334)) by L858 , L859 , L860 , L861 , L864 , L865 , RELAT_1:27;
L871: ( rng D112 ) c= ( rng C338 ) by RELAT_1:26;
L872: ( rng D113 ) c= ( rng C340 ) by RELAT_1:26;
thus L873: (( rng D112 ) c= (the carrier of C336) & ( rng D113 ) c= (the carrier' of C336)) by L872 , L866 , L867 , L871 , XBOOLE_1:1;
thus L874: ( D112 * (the ResultSort of C334) ) = ( C338 * ( (the ResultSort of C335) * C339 ) ) by L862 , RELAT_1:36
.= ( ( C338 * (the ResultSort of C335) ) * C339 ) by RELAT_1:36
.= ( (the ResultSort of C336) * D113 ) by L868 , RELAT_1:36;
let C341 being set;
let C342 being Function;
assume that
L875: C341 in (the carrier' of C334)
and
L876: C342 = ( (the Arity of C334) . C341 );
L877: ( C337 * C342 ) = ( (the Arity of C335) . ( C339 . C341 ) ) by L863 , L875 , L876;
L878: ( C339 . C341 ) in ( rng C339 ) by L859 , L875 , FUNCT_1:def 3;
L879: ( D112 * C342 ) = ( C338 * ( C337 * C342 ) ) by RELAT_1:36;
L880: ( D113 . C341 ) = ( C340 . ( C339 . C341 ) ) by L859 , L875 , FUNCT_1:13;
thus L881: thesis by L880 , L861 , L869 , L877 , L878 , L879;
end;
definition
let C343 , C344 being ManySortedSign;
pred C343 is_rougher_than C344
means
(ex B327 , B328 being Function st (B327 , B328 form_morphism_between C344 , C343 & ( rng B327 ) = (the carrier of C343) & ( rng B328 ) = (the carrier' of C343)))
;end;
definition
let C345 , C346 being non  void non  empty ManySortedSign;
redefine pred C345 is_rougher_than C346
;
reflexivity
proof
let C347 being non  void non  empty ManySortedSign;
take D114 = ( id (the carrier of C347) );
take D115 = ( id (the carrier' of C347) );
thus L883: (D114 , D115 form_morphism_between C347 , C347 & ( rng D114 ) = (the carrier of C347) & ( rng D115 ) = (the carrier' of C347)) by L845 , RELAT_1:45;
end;
end;
theorem
L885: (for B329 , B330 , B331 being ManySortedSign holds ((B329 is_rougher_than B330 & B330 is_rougher_than B331) implies B329 is_rougher_than B331))
proof
let C348 , C349 , C350 being ManySortedSign;
given C351 , C352 being Function such that
L886: C351 , C352 form_morphism_between C349 , C348
and
L887: ( rng C351 ) = (the carrier of C348)
and
L888: ( rng C352 ) = (the carrier' of C348);

given C353 , C354 being Function such that
L889: C353 , C354 form_morphism_between C350 , C349
and
L890: ( rng C353 ) = (the carrier of C349)
and
L891: ( rng C354 ) = (the carrier' of C349);

take D116 = ( C351 * C353 );
take D117 = ( C352 * C354 );
thus L892: D116 , D117 form_morphism_between C350 , C348 by L886 , L889 , L857;
L893: ( dom C351 ) = (the carrier of C349) by L886 , L843;
L894: ( dom C352 ) = (the carrier' of C349) by L886 , L843;
thus L895: thesis by L894 , L887 , L888 , L890 , L891 , L893 , RELAT_1:28;
end;
begin
definition
let C355 being  partial  non-empty UAStr;
let C356 being (a_partition of C355);
func MSSign (C355 , C356) ->  strict ManySortedSign means 
:L896: ((the carrier of it) = C356 & (the carrier' of it) = { [ B332 , B333 ] where B332 is (OperSymbol of C355) , B333 is (Element of ( C356 * )) : ( product B333 ) meets ( dom ( Den (B332 , C355) ) ) } & (for B334 being (OperSymbol of C355) holds (for B335 being (Element of ( C356 * )) holds (( product B335 ) meets ( dom ( Den (B334 , C355) ) ) implies (( (the Arity of it) . [ B334 , B335 ] ) = B335 & ( ( Den (B334 , C355) ) .: ( product B335 ) ) c= ( (the ResultSort of it) . [ B334 , B335 ] ))))));
existence
proof
set D118 = { [ B336 , B337 ] where B336 is (OperSymbol of C355) , B337 is (Element of ( C356 * )) : ( product B337 ) meets ( dom ( Den (B336 , C355) ) ) };
defpred S19[ set , set ] means (ex B338 being (OperSymbol of C355) st (ex B339 being (Element of ( C356 * )) st (B339 = $2 & $1 = [ B338 , B339 ])));
L897: (for B340 being set holds (B340 in D118 implies (ex B341 being set st (B341 in ( C356 * ) & S19[ B340 , B341 ]))))
proof
let C357 being set;
assume L898: C357 in D118;
consider C358 being (OperSymbol of C355), C359 being (Element of ( C356 * )) such that L899: C357 = [ C358 , C359 ] and L900: ( product C359 ) meets ( dom ( Den (C358 , C355) ) ) by L898;
take C359;
thus L901: thesis by L899;
end;
defpred S20[ set , set ] means (ex B342 being (OperSymbol of C355) st (ex B343 being (Element of ( C356 * )) st ($1 = [ B342 , B343 ] & ( ( Den (B342 , C355) ) .: ( product B343 ) ) c= $2)));
L902: (for B344 being set holds (B344 in D118 implies (ex B345 being set st (B345 in C356 & S20[ B344 , B345 ]))))
proof
let C360 being set;
assume L903: C360 in D118;
consider C361 being (OperSymbol of C355), C362 being (Element of ( C356 * )) such that L904: C360 = [ C361 , C362 ] and L905: ( product C362 ) meets ( dom ( Den (C361 , C355) ) ) by L903;
L906: ( Den (C361 , C355) ) is_exactly_partitable_wrt C356 by L735;
L907: ( Den (C361 , C355) ) is_partitable_wrt C356 by L906 , L634;
L908: (ex B346 being (Element of C356) st ( ( Den (C361 , C355) ) .: ( product C362 ) ) c= B346) by L907 , L632;
thus L909: thesis by L908 , L904;
end;
consider C363 being Function such that L910: (( dom C363 ) = D118 & ( rng C363 ) c= ( C356 * )) and L911: (for B347 being set holds (B347 in D118 implies S19[ B347 , ( C363 . B347 ) ])) from FUNCT_1:sch 5(L897);
reconsider D119 = C363 as (Function of D118 , ( C356 * )) by L910 , FUNCT_2:2;
consider C364 being Function such that L912: (( dom C364 ) = D118 & ( rng C364 ) c= C356) and L913: (for B348 being set holds (B348 in D118 implies S20[ B348 , ( C364 . B348 ) ])) from FUNCT_1:sch 5(L902);
reconsider D120 = C364 as (Function of D118 , C356) by L912 , FUNCT_2:2;
take D121 = ManySortedSign (# C356 , D118 , D119 , D120 #);
thus L914: ((the carrier of D121) = C356 & (the carrier' of D121) = D118);
let C365 being (OperSymbol of C355);
let C366 being (Element of ( C356 * ));
set D122 = [ C365 , C366 ];
assume L915: ( product C366 ) meets ( dom ( Den (C365 , C355) ) );
L916: D122 in D118 by L915;
L917: (ex B349 being (OperSymbol of C355) st (ex B350 being (Element of ( C356 * )) st (B350 = ( D119 . D122 ) & D122 = [ B349 , B350 ]))) by L916 , L911;
consider C367 being (OperSymbol of C355), C368 being (Element of ( C356 * )) such that L918: D122 = [ C367 , C368 ] and L919: ( ( Den (C367 , C355) ) .: ( product C368 ) ) c= ( D120 . D122 ) by L913 , L916;
L920: C368 = C366 by L918 , XTUPLE_0:1;
thus L921: thesis by L920 , L917 , L918 , L919 , XTUPLE_0:1;
end;
correctness
proof
set D123 = { [ B351 , B352 ] where B351 is (OperSymbol of C355) , B352 is (Element of ( C356 * )) : ( product B352 ) meets ( dom ( Den (B351 , C355) ) ) };
let C369 , C370 being  strict ManySortedSign;
assume that
L922: (the carrier of C369) = C356
and
L923: (the carrier' of C369) = D123
and
L924: (for B353 being (OperSymbol of C355) holds (for B354 being (Element of ( C356 * )) holds (( product B354 ) meets ( dom ( Den (B353 , C355) ) ) implies (( (the Arity of C369) . [ B353 , B354 ] ) = B354 & ( ( Den (B353 , C355) ) .: ( product B354 ) ) c= ( (the ResultSort of C369) . [ B353 , B354 ] )))))
and
L925: (the carrier of C370) = C356
and
L926: (the carrier' of C370) = D123
and
L927: (for B355 being (OperSymbol of C355) holds (for B356 being (Element of ( C356 * )) holds (( product B356 ) meets ( dom ( Den (B355 , C355) ) ) implies (( (the Arity of C370) . [ B355 , B356 ] ) = B356 & ( ( Den (B355 , C355) ) .: ( product B356 ) ) c= ( (the ResultSort of C370) . [ B355 , B356 ] )))));
L928: ( dom (the Arity of C369) ) = D123 by L923 , FUNCT_2:def 1;
L929: ( dom (the Arity of C370) ) = D123 by L926 , FUNCT_2:def 1;
L930:
now
let C371 being set;
assume L931: C371 in D123;
consider C372 being (OperSymbol of C355), C373 being (Element of ( C356 * )) such that L932: C371 = [ C372 , C373 ] and L933: ( product C373 ) meets ( dom ( Den (C372 , C355) ) ) by L931;
thus L934: ( (the Arity of C369) . C371 ) = C373 by L924 , L932 , L933
.= ( (the Arity of C370) . C371 ) by L927 , L932 , L933;
end;
L935: (the Arity of C369) = (the Arity of C370) by L930 , L928 , L929 , FUNCT_1:2;
L936: ( dom (the ResultSort of C369) ) = D123 by L922 , L923 , FUNCT_2:def 1;
L937: ( dom (the ResultSort of C370) ) = D123 by L925 , L926 , FUNCT_2:def 1;
consider C374 being (Equivalence_Relation of (the carrier of C355)) such that L938: C356 = ( Class C374 ) by EQREL_1:34;
L939:
now
let C375 being set;
assume L940: C375 in D123;
consider C376 being (OperSymbol of C355), C377 being (Element of ( C356 * )) such that L941: C375 = [ C376 , C377 ] and L942: ( product C377 ) meets ( dom ( Den (C376 , C355) ) ) by L940;
consider C378 being set such that L943: C378 in ( product C377 ) and L944: C378 in ( dom ( Den (C376 , C355) ) ) by L942 , XBOOLE_0:3;
L945: ( ( Den (C376 , C355) ) . C378 ) in ( ( Den (C376 , C355) ) .: ( product C377 ) ) by L943 , L944 , FUNCT_1:def 6;
L946: ( ( Den (C376 , C355) ) .: ( product C377 ) ) c= ( (the ResultSort of C369) . C375 ) by L924 , L941 , L942;
L947: ( ( Den (C376 , C355) ) .: ( product C377 ) ) c= ( (the ResultSort of C370) . C375 ) by L927 , L941 , L942;
L948: ( (the ResultSort of C369) . C375 ) in C356 by L922 , L923 , L940 , FUNCT_2:5;
L949: ( (the ResultSort of C370) . C375 ) in C356 by L925 , L926 , L940 , FUNCT_2:5;
L950: (ex B357 being set st (B357 in (the carrier of C355) & ( (the ResultSort of C369) . C375 ) = ( Class (C374 , B357) ))) by L938 , L948 , EQREL_1:def 3;
L951: (ex B358 being set st (B358 in (the carrier of C355) & ( (the ResultSort of C370) . C375 ) = ( Class (C374 , B358) ))) by L938 , L949 , EQREL_1:def 3;
L952: ( (the ResultSort of C369) . C375 ) = ( Class (C374 , ( ( Den (C376 , C355) ) . C378 )) ) by L945 , L946 , L950 , EQREL_1:23;
thus L953: ( (the ResultSort of C369) . C375 ) = ( (the ResultSort of C370) . C375 ) by L952 , L945 , L947 , L951 , EQREL_1:23;
end;
thus L954: thesis by L939 , L922 , L923 , L925 , L926 , L935 , L936 , L937 , FUNCT_1:2;
end;
end;
registration
let C379 being  partial  non-empty UAStr;
let C380 being (a_partition of C379);
cluster ( MSSign (C379 , C380) ) -> non  empty non  void;
coherence
proof
thus L956: (the carrier of ( MSSign (C379 , C380) )) is non  empty by L896;
set D124 = the (OperSymbol of C379);
set D125 = the (Element of ( dom ( Den (D124 , C379) ) ));
reconsider D126 = D125 as (Element of ( (the carrier of C379) * ));
L957: ( union C380 ) = (the carrier of C379) by EQREL_1:def 4;
L958: ( rng D126 ) c= (the carrier of C379);
consider C381 being Function such that L959: ( dom C381 ) = ( dom D126 ) and L960: ( rng C381 ) c= C380 and L961: D126 in ( product C381 ) by L958 , L957 , L113;
L962: ( dom D126 ) = ( Seg ( len D126 ) ) by FINSEQ_1:def 3;
reconsider D127 = C381 as FinSequence by L962 , L959 , FINSEQ_1:def 2;
reconsider D128 = D127 as (FinSequence of C380) by L960 , FINSEQ_1:def 4;
reconsider D129 = D128 as (Element of ( C380 * )) by FINSEQ_1:def 11;
L963: ( product D129 ) meets ( dom ( Den (D124 , C379) ) ) by L961 , XBOOLE_0:3;
L964: (the carrier' of ( MSSign (C379 , C380) )) = { [ B359 , B360 ] where B359 is (OperSymbol of C379) , B360 is (Element of ( C380 * )) : ( product B360 ) meets ( dom ( Den (B359 , C379) ) ) } by L896;
L965: [ D124 , D129 ] in (the carrier' of ( MSSign (C379 , C380) )) by L964 , L963;
thus L966: (the carrier' of ( MSSign (C379 , C380) )) is non  empty by L965;
end;
end;
definition
let C382 being  partial  non-empty UAStr;
let C383 being (a_partition of C382);
let C384 being (OperSymbol of ( MSSign (C382 , C383) ));
redefine func C384 `1 -> (OperSymbol of C382);

coherence
proof
L968: C384 in (the carrier' of ( MSSign (C382 , C383) ));
L969: (the carrier' of ( MSSign (C382 , C383) )) = { [ B361 , B362 ] where B361 is (OperSymbol of C382) , B362 is (Element of ( C383 * )) : ( product B362 ) meets ( dom ( Den (B361 , C382) ) ) } by L896;
L970: (ex B363 being (OperSymbol of C382) st (ex B364 being (Element of ( C383 * )) st (C384 = [ B363 , B364 ] & ( product B364 ) meets ( dom ( Den (B363 , C382) ) )))) by L969 , L968;
thus L971: thesis by L970 , MCART_1:7;
end;
redefine func C384 `2 -> (Element of ( C383 * ));

coherence
proof
L972: C384 in (the carrier' of ( MSSign (C382 , C383) ));
L973: (the carrier' of ( MSSign (C382 , C383) )) = { [ B365 , B366 ] where B365 is (OperSymbol of C382) , B366 is (Element of ( C383 * )) : ( product B366 ) meets ( dom ( Den (B365 , C382) ) ) } by L896;
L974: (ex B367 being (OperSymbol of C382) st (ex B368 being (Element of ( C383 * )) st (C384 = [ B367 , B368 ] & ( product B368 ) meets ( dom ( Den (B367 , C382) ) )))) by L973 , L972;
thus L975: thesis by L974 , MCART_1:7;
end;
end;
definition
let C385 being  partial  non-empty UAStr;
let C386 being non  void non  empty ManySortedSign;
let C387 being MSAlgebra over C386;
let C388 being (IndexedPartition of (the carrier' of C386));
pred C385 can_be_characterized_by C386 , C387 , C388
means
:L977: ((the Sorts of C387) is (IndexedPartition of C385) & ( dom C388 ) = ( dom (the charact of C385) ) & (for B369 being (OperSymbol of C385) holds ( (the Charact of C387) | ( C388 . B369 ) ) is (IndexedPartition of ( Den (B369 , C385) ))))
;end;
definition
let C389 being  partial  non-empty UAStr;
let C390 being non  void non  empty ManySortedSign;
pred C389 can_be_characterized_by C390
means
(ex B370 being MSAlgebra over C390 st (ex B371 being (IndexedPartition of (the carrier' of C390)) st C389 can_be_characterized_by C390 , B370 , B371))
;end;
theorem
L980: (for B372 being  partial  non-empty UAStr holds (for B373 being (a_partition of B372) holds B372 can_be_characterized_by ( MSSign (B372 , B373) )))
proof
let C391 being  partial  non-empty UAStr;
let C392 being (a_partition of C391);
set D130 = ( MSSign (C391 , C392) );
L981: C392 = (the carrier of D130) by L896;
reconsider D131 = ( id C392 ) as (ManySortedSet of (the carrier of D130)) by L981;
deffunc H6((OperSymbol of D130)) = ( ( Den (( $1 `1 ) , C391) ) | ( product ( $1 `2 ) ) );
consider C393 being (ManySortedSet of (the carrier' of D130)) such that L982: (for B374 being (OperSymbol of D130) holds ( C393 . B374 ) = H6(B374)) from PBOOLE:sch 5;
deffunc H7((OperSymbol of C391)) = { B375 where B375 is (OperSymbol of D130) : ( B375 `1 ) = $1 };
consider C394 being (ManySortedSet of ( dom (the charact of C391) )) such that L983: (for B376 being (OperSymbol of C391) holds ( C394 . B376 ) = H7(B376)) from PBOOLE:sch 5;
L984: ( dom C394 ) = ( dom (the charact of C391) ) by PARTFUN1:def 2;
L985: (the carrier of D130) = C392 by L896;
L986: (the carrier' of D130) = { [ B377 , B378 ] where B377 is (OperSymbol of C391) , B378 is (Element of ( C392 * )) : ( product B378 ) meets ( dom ( Den (B377 , C391) ) ) } by L896;
L987: C394 is  non-empty
proof
let C395 being set;
assume L988: C395 in ( dom C394 );
reconsider D132 = C395 as (OperSymbol of C391) by L988;
set D133 = the (Element of ( dom ( Den (D132 , C391) ) ));
reconsider D134 = D133 as (Element of ( (the carrier of C391) * ));
L989: ( rng D134 ) c= (the carrier of C391);
L990: (the carrier of C391) = ( union C392 ) by EQREL_1:def 4;
consider C396 being Function such that L991: ( dom C396 ) = ( dom D134 ) and L992: ( rng C396 ) c= C392 and L993: D134 in ( product C396 ) by L990 , L989 , L113;
L994: ( dom D134 ) = ( Seg ( len D134 ) ) by FINSEQ_1:def 3;
L995: C396 is FinSequence by L994 , L991 , FINSEQ_1:def 2;
L996: C396 is (FinSequence of C392) by L995 , L992 , FINSEQ_1:def 4;
reconsider D135 = C396 as (Element of ( C392 * )) by L996 , FINSEQ_1:def 11;
L997: ( product D135 ) meets ( dom ( Den (D132 , C391) ) ) by L993 , XBOOLE_0:3;
L998: [ D132 , D135 ] in (the carrier' of D130) by L997 , L986;
L999: ( [ D132 , D135 ] `1 ) = D132;
L1000: ( C394 . D132 ) = { B379 where B379 is (OperSymbol of D130) : ( B379 `1 ) = D132 } by L983;
L1001: [ D132 , D135 ] in ( C394 . C395 ) by L1000 , L998 , L999;
thus L1002: thesis by L1001;
end;
reconsider D136 = C394 as  non-empty Function by L987;
L1003: C393 is (ManySortedFunction of ( ( D131 # ) * (the Arity of D130) ) , ( D131 * (the ResultSort of D130) ))
proof
let C397 being set;
assume L1004: C397 in (the carrier' of D130);
consider C398 being (OperSymbol of C391), C399 being (Element of ( C392 * )) such that L1005: C397 = [ C398 , C399 ] and L1006: ( product C399 ) meets ( dom ( Den (C398 , C391) ) ) by L1004 , L986;
reconsider D137 = C397 as (OperSymbol of D130) by L1004;
L1007: ( rng (the ResultSort of D130) ) c= (the carrier of D130);
L1008: ( dom (the Arity of D130) ) = (the carrier' of D130) by FUNCT_2:def 1;
L1009: ( rng C399 ) c= C392;
L1010: ( (the Arity of D130) . C397 ) = C399 by L1005 , L1006 , L896;
L1011: ( ( D131 # ) . C399 ) = ( product ( D131 * C399 ) ) by L985 , FINSEQ_2:def 5;
L1012: ( D131 * C399 ) = C399 by L1009 , RELAT_1:53;
L1013: ( ( ( D131 # ) * (the Arity of D130) ) . C397 ) = ( product C399 ) by L1012 , L1004 , L1008 , L1010 , L1011 , FUNCT_1:13;
L1014: ( ( Den (C398 , C391) ) .: ( product C399 ) ) c= ( (the ResultSort of D130) . C397 ) by L1005 , L1006 , L896;
L1015: ( D137 `2 ) = C399 by L1005 , MCART_1:7;
L1016: ( D137 `1 ) = C398 by L1005 , MCART_1:7;
L1017: ( rng ( ( Den (C398 , C391) ) | ( product C399 ) ) ) = ( ( Den (C398 , C391) ) .: ( product C399 ) ) by RELAT_1:115;
L1018: ( C393 . D137 ) = ( ( Den (C398 , C391) ) | ( product C399 ) ) by L982 , L1015 , L1016;
L1019: ( Den (C398 , C391) ) is_exactly_partitable_wrt C392 by L735;
L1020: ( product C399 ) c= ( dom ( Den (C398 , C391) ) ) by L1019 , L1006 , L634;
L1021: ( D131 * (the ResultSort of D130) ) = (the ResultSort of D130) by L985 , L1007 , RELAT_1:53;
L1022: ( dom ( ( Den (C398 , C391) ) | ( product C399 ) ) ) = ( product C399 ) by L1020 , RELAT_1:62;
thus L1023: thesis by L1022 , L1013 , L1014 , L1017 , L1018 , L1021 , FUNCT_2:2;
end;
reconsider D138 = C393 as (ManySortedFunction of ( ( D131 # ) * (the Arity of D130) ) , ( D131 * (the ResultSort of D130) )) by L1003;
L1024: ( Union D136 ) = (the carrier' of D130)
proof
thus L1025:now
let C400 being set;
assume L1026: C400 in ( Union D136 );
consider C401 being set such that L1027: C401 in ( dom D136 ) and L1028: C400 in ( D136 . C401 ) by L1026 , CARD_5:2;
reconsider D139 = C401 as (OperSymbol of C391) by L1027 , PARTFUN1:def 2;
L1029: ( D136 . D139 ) = { B380 where B380 is (OperSymbol of D130) : ( B380 `1 ) = D139 } by L983;
L1030: (ex B381 being (OperSymbol of D130) st (C400 = B381 & ( B381 `1 ) = D139)) by L1029 , L1028;
thus L1031: C400 in (the carrier' of D130) by L1030;
end;
let C402 being set;
assume L1032: C402 in (the carrier' of D130);
reconsider D140 = C402 as (OperSymbol of D130) by L1032;
L1033: ( D136 . ( D140 `1 ) ) = { B382 where B382 is (OperSymbol of D130) : ( B382 `1 ) = ( D140 `1 ) } by L983;
L1034: D140 in ( D136 . ( D140 `1 ) ) by L1033;
thus L1035: thesis by L1034 , L984 , CARD_5:2;
end;
L1036:
now
let C403 , C404 being set;
assume that
L1037: C403 in ( dom D136 )
and
L1038: C404 in ( dom D136 )
and
L1039: C403 <> C404;
reconsider D141 = C403 , D142 = C404 as (OperSymbol of C391) by L1037 , L1038 , PARTFUN1:def 2;
thus L1040: ( D136 . C403 ) misses ( D136 . C404 )
proof
assume L1041: ( D136 . C403 ) meets ( D136 . C404 );
consider C405 being set such that L1042: C405 in ( D136 . C403 ) and L1043: C405 in ( D136 . C404 ) by L1041 , XBOOLE_0:3;
L1044: ( D136 . D141 ) = { B383 where B383 is (OperSymbol of D130) : ( B383 `1 ) = D141 } by L983;
L1045: ( D136 . D142 ) = { B384 where B384 is (OperSymbol of D130) : ( B384 `1 ) = D142 } by L983;
L1046: (ex B385 being (OperSymbol of D130) st (C405 = B385 & ( B385 `1 ) = D141)) by L1042 , L1044;
L1047: (ex B386 being (OperSymbol of D130) st (C405 = B386 & ( B386 `1 ) = D142)) by L1043 , L1045;
thus L1048: contradiction by L1047 , L1039 , L1046;
end;

end;
reconsider D143 = D136 as (IndexedPartition of (the carrier' of D130)) by L1036 , L1024 , L409;
take D144 = MSAlgebra (# D131 , D138 #);
take D143;
L1041: ( rng ( id C392 ) ) is (a_partition of C391);
thus L1042: (the Sorts of D144) is (IndexedPartition of C391) by L1041 , L739;
thus L1043: ( dom D143 ) = ( dom (the charact of C391) ) by PARTFUN1:def 2;
let C406 being (OperSymbol of C391);
reconsider D145 = { ( product B387 ) where B387 is (Element of ( C392 * )) : (not contradiction) } as (a_partition of ( (the carrier of C391) * )) by L166;
reconsider D146 = { ( B388 /\ ( dom ( Den (C406 , C391) ) ) ) where B388 is (Element of D145) : B388 meets ( dom ( Den (C406 , C391) ) ) } as (a_partition of ( dom ( Den (C406 , C391) ) )) by L288;
set D147 = ( (the Charact of D144) | ( D143 . C406 ) );
L1044: ( D143 . C406 ) in ( rng D143 ) by L984 , FUNCT_1:def 3;
L1045: ( dom D138 ) = (the carrier' of D130) by PARTFUN1:def 2;
L1046: ( dom D147 ) = ( D143 . C406 ) by L1045 , L1044 , RELAT_1:62;
reconsider D148 = D147 as non  empty Function by L1044 , L1045;
reconsider D149 = ( D143 . C406 ) as non  empty set;
reconsider D150 = { ( ( Den (C406 , C391) ) | B389 ) where B389 is (Element of D146) : (not contradiction) } as (a_partition of ( Den (C406 , C391) )) by L319;
L1047: ( D143 . C406 ) = { B390 where B390 is (OperSymbol of D130) : ( B390 `1 ) = C406 } by L983;
L1048: ( rng D148 ) c= D150
proof
let C407 being set;
assume L1049: C407 in ( rng D148 );
consider C408 being set such that L1050: C408 in ( dom D148 ) and L1051: C407 = ( D148 . C408 ) by L1049 , FUNCT_1:def 3;
L1052: C408 in ( ( dom (the Charact of D144) ) /\ ( D143 . C406 ) ) by L1050 , RELAT_1:61;
L1053: C408 in ( D143 . C406 ) by L1052 , XBOOLE_0:def 4;
consider C409 being (OperSymbol of D130) such that L1054: C408 = C409 and L1055: ( C409 `1 ) = C406 by L1053 , L1047;
L1056: C409 in (the carrier' of D130);
consider C410 being (OperSymbol of C391), C411 being (Element of ( C392 * )) such that L1057: C409 = [ C410 , C411 ] and L1058: ( product C411 ) meets ( dom ( Den (C410 , C391) ) ) by L1056 , L986;
L1059: C410 = C406 by L1055 , L1057 , MCART_1:7;
L1060: ( C409 `2 ) = C411 by L1057 , MCART_1:7;
L1061: ( product C411 ) in D145;
L1062: ( Den (C406 , C391) ) is_exactly_partitable_wrt C392 by L735;
L1063: ( ( product C411 ) /\ ( dom ( Den (C406 , C391) ) ) ) in D146 by L1058 , L1059 , L1061;
L1064: ( product C411 ) c= ( dom ( Den (C406 , C391) ) ) by L1058 , L1059 , L1062 , L634;
L1065: ( product C411 ) in D146 by L1064 , L1063 , XBOOLE_1:28;
L1066: ( ( Den (C406 , C391) ) | ( product C411 ) ) in D150 by L1065;
L1067: C407 = ( D138 . C409 ) by L1050 , L1051 , L1054 , FUNCT_1:47;
thus L1068: thesis by L1067 , L982 , L1055 , L1060 , L1066;
end;
reconsider D151 = D148 as (Function of D149 , D150) by L1048 , L1046 , FUNCT_2:2;
L1069: D150 c= ( rng D151 )
proof
let C412 being set;
assume L1070: C412 in D150;
consider C413 being (Element of D146) such that L1071: C412 = ( ( Den (C406 , C391) ) | C413 ) by L1070;
L1072: C413 in D146;
consider C414 being (Element of D145) such that L1073: C413 = ( C414 /\ ( dom ( Den (C406 , C391) ) ) ) and L1074: C414 meets ( dom ( Den (C406 , C391) ) ) by L1072;
L1075: C414 in D145;
consider C415 being (Element of ( C392 * )) such that L1076: C414 = ( product C415 ) by L1075;
L1077: ( Den (C406 , C391) ) is_exactly_partitable_wrt C392 by L735;
L1078: ( product C415 ) c= ( dom ( Den (C406 , C391) ) ) by L1077 , L1074 , L1076 , L634;
L1079: C414 = C413 by L1078 , L1073 , L1076 , XBOOLE_1:28;
L1080: [ C406 , C415 ] in (the carrier' of D130) by L986 , L1074 , L1076;
L1081: ( [ C406 , C415 ] `1 ) = C406;
L1082: ( [ C406 , C415 ] `2 ) = C415;
L1083: [ C406 , C415 ] in ( dom D138 ) by L1080 , PARTFUN1:def 2;
L1084: [ C406 , C415 ] in ( D143 . C406 ) by L1047 , L1080 , L1081;
L1085: ( D138 . [ C406 , C415 ] ) = C412 by L982 , L1071 , L1076 , L1079 , L1080 , L1081 , L1082;
thus L1086: thesis by L1085 , L1083 , L1084 , FUNCT_1:50;
end;
L1087: D151 is  one-to-one
proof
let C416 , C417 being set;
assume that
L1088: C416 in ( dom D151 )
and
L1089: C417 in ( dom D151 )
and
L1090: ( D151 . C416 ) = ( D151 . C417 );
consider C418 being (OperSymbol of D130) such that L1091: C416 = C418 and L1092: ( C418 `1 ) = C406 by L1046 , L1047 , L1088;
consider C419 being (OperSymbol of D130) such that L1093: C417 = C419 and L1094: ( C419 `1 ) = C406 by L1046 , L1047 , L1089;
L1095: C418 in (the carrier' of D130);
consider C420 being (OperSymbol of C391), C421 being (Element of ( C392 * )) such that L1096: C418 = [ C420 , C421 ] and L1097: ( product C421 ) meets ( dom ( Den (C420 , C391) ) ) by L1095 , L986;
L1098: C419 in (the carrier' of D130);
consider C422 being (OperSymbol of C391), C423 being (Element of ( C392 * )) such that L1099: C419 = [ C422 , C423 ] and L1100: ( product C423 ) meets ( dom ( Den (C422 , C391) ) ) by L1098 , L986;
L1101: ( D151 . C416 ) = ( D138 . C418 ) by L1088 , L1091 , FUNCT_1:47;
L1102: ( D151 . C416 ) = ( D138 . C419 ) by L1089 , L1090 , L1093 , FUNCT_1:47;
L1103: ( C418 `2 ) = C421 by L1096 , MCART_1:7;
L1104: ( C419 `2 ) = C423 by L1099 , MCART_1:7;
L1105: ( D151 . C416 ) = ( ( Den (C406 , C391) ) | ( product C421 ) ) by L982 , L1092 , L1101 , L1103;
L1106: ( D151 . C416 ) = ( ( Den (C406 , C391) ) | ( product C423 ) ) by L982 , L1094 , L1102 , L1104;
L1107: ( Den (C406 , C391) ) is_exactly_partitable_wrt C392 by L735;
L1108: C406 = C420 by L1092 , L1096 , MCART_1:7;
L1109: C406 = C422 by L1094 , L1099 , MCART_1:7;
L1110: ( product C421 ) c= ( dom ( Den (C406 , C391) ) ) by L1097 , L1107 , L1108 , L634;
L1111: ( product C423 ) c= ( dom ( Den (C406 , C391) ) ) by L1100 , L1107 , L1109 , L634;
L1112: ( product C421 ) = ( dom ( ( Den (C406 , C391) ) | ( product C421 ) ) ) by L1110 , RELAT_1:62;
thus L1113: thesis by L1112 , L1091 , L1093 , L1096 , L1099 , L1105 , L1106 , L1108 , L1109 , L1111 , L55 , RELAT_1:62;
end;
thus L1114: thesis by L1087 , L1069 , L433;
end;
theorem
L1115: (for B391 being  partial  non-empty UAStr holds (for B392 being non  void non  empty ManySortedSign holds (for B393 being MSAlgebra over B392 holds (for B394 being (IndexedPartition of (the carrier' of B392)) holds (B391 can_be_characterized_by B392 , B393 , B394 implies (for B395 being (OperSymbol of B391) holds (for B396 being (FinSequence of ( rng (the Sorts of B393) )) holds (( product B396 ) c= ( dom ( Den (B395 , B391) ) ) implies (ex B397 being (OperSymbol of B392) st (( (the Sorts of B393) * ( the_arity_of B397 ) ) = B396 & B397 in ( B394 . B395 )))))))))))
proof
let C424 being  partial  non-empty UAStr;
let C425 being non  void non  empty ManySortedSign;
let C426 being MSAlgebra over C425;
let C427 being (IndexedPartition of (the carrier' of C425));
assume that
L1116: (the Sorts of C426) is (IndexedPartition of C424)
and
L1117: ( dom C427 ) = ( dom (the charact of C424) )
and
L1118: (for B398 being (OperSymbol of C424) holds ( (the Charact of C426) | ( C427 . B398 ) ) is (IndexedPartition of ( Den (B398 , C424) )));
reconsider D152 = (the Sorts of C426) as (IndexedPartition of C424) by L1116;
L1119: ( dom D152 ) = (the carrier of C425) by PARTFUN1:def 2;
reconsider D153 = (the Sorts of C426) as (Function of (the carrier of C425) , ( rng D152 )) by L1119 , RELSET_1:4;
let C428 being (OperSymbol of C424);
let C429 being (FinSequence of ( rng (the Sorts of C426) ));
reconsider D154 = C429 as (Element of ( ( rng D152 ) * )) by FINSEQ_1:def 11;
assume L1120: ( product C429 ) c= ( dom ( Den (C428 , C424) ) );
reconsider D155 = ( (the Charact of C426) | ( C427 . C428 ) ) as (IndexedPartition of ( Den (C428 , C424) )) by L1118;
set D156 = the (Element of ( product D154 ));
L1121: D156 in ( product C429 );
L1122: [ D156 , ( ( Den (C428 , C424) ) . D156 ) ] in ( Den (C428 , C424) ) by L1121 , L1120 , FUNCT_1:def 2;
L1123: ( D155 -index_of [ D156 , ( ( Den (C428 , C424) ) . D156 ) ] ) in ( dom D155 ) by L1122 , L394;
L1124: [ D156 , ( ( Den (C428 , C424) ) . D156 ) ] in ( D155 . ( D155 -index_of [ D156 , ( ( Den (C428 , C424) ) . D156 ) ] ) ) by L1122 , L394;
reconsider D157 = ( C427 . C428 ) as (Element of ( rng C427 )) by L1117 , FUNCT_1:def 3;
L1125: ( dom (the Charact of C426) ) = (the carrier' of C425) by PARTFUN1:def 2;
L1126: ( dom D155 ) = D157 by L1125 , RELAT_1:62;
reconsider D158 = ( D155 -index_of [ D156 , ( ( Den (C428 , C424) ) . D156 ) ] ) as (Element of D157) by L1123 , L1125 , RELAT_1:62;
reconsider D159 = ( D153 * ( the_arity_of D158 ) ) as (FinSequence of ( rng D152 )) by L4;
reconsider D160 = D159 as (Element of ( ( rng D152 ) * )) by FINSEQ_1:def 11;
reconsider D161 = { ( product B399 ) where B399 is (Element of ( ( rng D152 ) * )) : (not contradiction) } as (a_partition of ( (the carrier of C424) * )) by L166;
take D158;
L1127: ( dom (the Arity of C425) ) = (the carrier' of C425) by FUNCT_2:def 1;
L1128: ( Args (D158 , C426) ) = ( ( (the Sorts of C426) # ) . ( (the Arity of C425) . D158 ) ) by L1127 , FUNCT_1:13
.= ( product D160 ) by FINSEQ_2:def 5;
L1129: ( product D160 ) in D161;
L1130: ( product D154 ) in D161;
L1131: ( D155 . D158 ) = ( (the Charact of C426) . D158 ) by L1126 , FUNCT_1:47;
L1132: D156 in ( dom ( Den (D158 , C426) ) ) by L1131 , L1124 , XTUPLE_0:def 12;
thus L1133: ( (the Sorts of C426) * ( the_arity_of D158 ) ) = C429 by L1132 , L1128 , L1129 , L1130 , L55 , L70;
thus L1134: thesis;
end;
theorem
L1135: (for B400 being  partial  non-empty UAStr holds (for B401 being (a_partition of B400) holds (B401 = ( Class ( LimDomRel B400 ) ) implies (for B402 being non  void non  empty ManySortedSign holds (B400 can_be_characterized_by B402 implies ( MSSign (B400 , B401) ) is_rougher_than B402)))))
proof
let C430 being  partial  non-empty UAStr;
let C431 being (a_partition of C430);
assume L1136: C431 = ( Class ( LimDomRel C430 ) );
set D162 = ( MSSign (C430 , C431) );
let C432 being non  void non  empty ManySortedSign;
given C433 being MSAlgebra over C432 , C434 being (IndexedPartition of (the carrier' of C432)) such that
L1137: C430 can_be_characterized_by C432 , C433 , C434;

L1138: (the Sorts of C433) is (IndexedPartition of C430) by L1137 , L977;
L1139: ( dom C434 ) = ( dom (the charact of C430) ) by L1137 , L977;
reconsider D163 = C433 as  non-empty MSAlgebra over C432 by L1138 , MSUALG_1:def 3;
reconsider D164 = (the Sorts of D163) as (IndexedPartition of C430) by L1137 , L977;
L1140: ( dom D164 ) = (the carrier of C432) by PARTFUN1:def 2;
reconsider D165 = (the Sorts of D163) as (Function of (the carrier of C432) , ( rng D164 )) by L1140 , RELSET_1:4;
L1141: (the carrier' of D162) = { [ B403 , B404 ] where B403 is (OperSymbol of C430) , B404 is (Element of ( C431 * )) : ( product B404 ) meets ( dom ( Den (B403 , C430) ) ) } by L896;
L1142: (the carrier of D162) = C431 by L896;
defpred S21[ set , set ] means $1 c= $2;
L1143: ( rng D164 ) is_finer_than C431 by L1136 , L791;
L1144: (for B405 being set holds (B405 in ( rng D164 ) implies (ex B406 being set st (B406 in C431 & S21[ B405 , B406 ])))) by L1143 , SETFAM_1:def 2;
consider C435 being Function such that L1145: (( dom C435 ) = ( rng D164 ) & ( rng C435 ) c= C431) and L1146: (for B407 being set holds (B407 in ( rng D164 ) implies S21[ B407 , ( C435 . B407 ) ])) from FUNCT_1:sch 5(L1144);
reconsider D166 = C435 as (Function of ( rng D164 ) , C431) by L1145 , FUNCT_2:2;
L1147: ( dom ( D166 * D164 ) ) = ( dom D164 ) by L1145 , RELAT_1:27;
L1148: ( rng ( D166 * D164 ) ) = ( rng D166 ) by L1145 , RELAT_1:28;
reconsider D167 = ( D166 * D164 ) as (Function of (the carrier of C432) , (the carrier of D162)) by L1148 , L1140 , L1142 , L1147 , FUNCT_2:2;
take D167;
defpred S22[ set , set ] means (ex B408 being (FinSequence of C431) st (ex B409 being (OperSymbol of C432) st ($2 = [ ( C434 -index_of $1 ) , B408 ] & $1 = B409 & ( Args (B409 , D163) ) c= ( product B408 ))));
L1149: (for B410 being set holds (B410 in (the carrier' of C432) implies (ex B411 being set st (B411 in (the carrier' of D162) & S22[ B410 , B411 ]))))
proof
let C436 being set;
assume L1150: C436 in (the carrier' of C432);
reconsider D168 = C436 as (OperSymbol of C432) by L1150;
L1151: ( D165 * ( the_arity_of D168 ) ) is (FinSequence of ( rng D164 )) by L4;
consider C437 being (FinSequence of C431) such that L1152: ( product ( D165 * ( the_arity_of D168 ) ) ) c= ( product C437 ) by L1151 , L1136 , L71 , L791;
reconsider D169 = C437 as (Element of ( C431 * )) by FINSEQ_1:def 11;
take D170 = [ ( C434 -index_of D168 ) , D169 ];
reconsider D171 = ( C434 -index_of D168 ) as (OperSymbol of C430) by L1139 , L394;
set D172 = the (Element of ( Args (D168 , D163) ));
L1153: D172 in ( Args (D168 , D163) );
L1154: ( dom ( Den (D168 , D163) ) ) = ( Args (D168 , D163) ) by FUNCT_2:def 1;
L1155: ( dom (the Arity of C432) ) = (the carrier' of C432) by PARTFUN1:def 2;
L1156: ( dom (the Charact of D163) ) = (the carrier' of C432) by PARTFUN1:def 2;
L1157: ( (the Charact of D163) | ( C434 . D171 ) ) is (IndexedPartition of ( Den (D171 , C430) )) by L1137 , L977;
L1158: ( rng ( (the Charact of D163) | ( C434 . D171 ) ) ) is (a_partition of ( Den (D171 , C430) )) by L1157 , L377;
L1159: ( (the Charact of D163) .: ( C434 . D171 ) ) is (a_partition of ( Den (D171 , C430) )) by L1158 , RELAT_1:115;
L1160: D168 in ( C434 . D171 ) by L394;
L1161: ( (the Charact of D163) . D168 ) in ( (the Charact of D163) .: ( C434 . D171 ) ) by L1160 , L1156 , FUNCT_1:def 6;
L1162: ( dom ( Den (D168 , D163) ) ) c= ( dom ( Den (D171 , C430) ) ) by L1161 , L1159 , RELAT_1:11;
L1163: ( Args (D168 , D163) ) = ( ( (the Sorts of D163) # ) . ( (the Arity of C432) . D168 ) ) by L1155 , FUNCT_1:13
.= ( product ( D165 * ( the_arity_of D168 ) ) ) by FINSEQ_2:def 5;
L1164: ( product D169 ) meets ( dom ( Den (D171 , C430) ) ) by L1163 , L1152 , L1153 , L1154 , L1162 , XBOOLE_0:3;
thus L1165: D170 in (the carrier' of D162) by L1164 , L1141;
take D169;
take D168;
thus L1166: thesis by L1152 , L1163;
end;
consider C438 being Function such that L1167: (( dom C438 ) = (the carrier' of C432) & ( rng C438 ) c= (the carrier' of D162) & (for B412 being set holds (B412 in (the carrier' of C432) implies S22[ B412 , ( C438 . B412 ) ]))) from FUNCT_1:sch 5(L1149);
reconsider D173 = C438 as (Function of (the carrier' of C432) , (the carrier' of D162)) by L1167 , FUNCT_2:2;
take D173;
thus L1168: (( dom D167 ) = (the carrier of C432) & ( dom D173 ) = (the carrier' of C432) & ( rng D167 ) c= (the carrier of D162) & ( rng D173 ) c= (the carrier' of D162)) by FUNCT_2:def 1;
L1169:
now
let C439 being (OperSymbol of C432);
set D174 = ( (the ResultSort of C432) . C439 );
L1170: ( D164 . D174 ) = ( ( (the Sorts of D163) * (the ResultSort of C432) ) . C439 ) by FUNCT_2:15;
L1171: ( ( D167 * (the ResultSort of C432) ) . C439 ) = ( D167 . D174 ) by FUNCT_2:15;
L1172: ( D164 . D174 ) in ( rng D164 ) by L1140 , FUNCT_1:def 3;
L1173: ( D164 . D174 ) c= ( D166 . ( D164 . D174 ) ) by L1172 , L1146;
L1174: ( D164 . D174 ) c= ( D167 . D174 ) by L1173 , L1140 , FUNCT_1:13;
consider C440 being (FinSequence of C431), C441 being (OperSymbol of C432) such that L1175: ( D173 . C439 ) = [ ( C434 -index_of C439 ) , C440 ] and L1176: C439 = C441 and L1177: ( Args (C441 , D163) ) c= ( product C440 ) by L1167;
reconsider D175 = C440 as (Element of ( C431 * )) by FINSEQ_1:def 11;
reconsider D176 = ( C434 -index_of C439 ) as (OperSymbol of C430) by L1139 , L394;
set D177 = the (Element of ( Args (C441 , D163) ));
L1178: ( (the Charact of D163) | ( C434 . D176 ) ) is (IndexedPartition of ( Den (D176 , C430) )) by L1137 , L977;
L1179: ( rng ( (the Charact of D163) | ( C434 . D176 ) ) ) is (a_partition of ( Den (D176 , C430) )) by L1178 , L377;
L1180: C441 in ( C434 . D176 ) by L1176 , L394;
L1181: ( dom (the Charact of D163) ) = (the carrier' of C432) by PARTFUN1:def 2;
L1182: ( (the Charact of D163) .: ( C434 . D176 ) ) is (a_partition of ( Den (D176 , C430) )) by L1179 , RELAT_1:115;
L1183: ( (the Charact of D163) . C441 ) in ( (the Charact of D163) .: ( C434 . D176 ) ) by L1180 , L1181 , FUNCT_1:def 6;
L1184: ( dom ( Den (C441 , D163) ) ) = ( Args (C441 , D163) ) by FUNCT_2:def 1;
L1185: ( dom ( Den (C441 , D163) ) ) c= ( dom ( Den (D176 , C430) ) ) by L1182 , L1183 , RELAT_1:11;
L1186: D177 in ( Args (C441 , D163) );
L1187: ( product D175 ) meets ( dom ( Den (D176 , C430) ) ) by L1186 , L1177 , L1184 , L1185 , XBOOLE_0:3;
L1188: ( ( Den (D176 , C430) ) .: ( product D175 ) ) c= ( (the ResultSort of D162) . ( D173 . C439 ) ) by L1187 , L1175 , L896;
L1189: ( rng ( Den (C439 , D163) ) ) = ( ( Den (C439 , D163) ) .: ( Args (C439 , D163) ) ) by L1176 , L1184 , RELAT_1:113;
L1190: ( rng ( Den (C439 , D163) ) ) c= ( ( Den (C439 , D163) ) .: ( product D175 ) ) by L1189 , L1176 , L1177 , RELAT_1:123;
L1191: ( ( Den (C439 , D163) ) .: ( product D175 ) ) c= ( ( Den (D176 , C430) ) .: ( product D175 ) ) by L1176 , L1182 , L1183 , RELAT_1:124;
L1192: ( rng ( Den (C439 , D163) ) ) c= ( ( Den (D176 , C430) ) .: ( product D175 ) ) by L1191 , L1190 , XBOOLE_1:1;
L1193: ( rng ( Den (C439 , D163) ) ) c= ( (the ResultSort of D162) . ( D173 . C439 ) ) by L1192 , L1188 , XBOOLE_1:1;
L1194: ( ( Den (C439 , D163) ) . D177 ) in ( rng ( Den (C439 , D163) ) ) by L1176 , L1184 , FUNCT_1:def 3;
L1195: ( ( Den (C439 , D163) ) . D177 ) in ( ( (the Sorts of D163) * (the ResultSort of C432) ) . C439 ) by L1194;
L1196: ( ( Den (C439 , D163) ) . D177 ) in ( (the ResultSort of D162) . ( D173 . C439 ) ) by L1193 , L1194;
L1197: ( ( Den (C439 , D163) ) . D177 ) in ( ( (the ResultSort of D162) * D173 ) . C439 ) by L1196 , FUNCT_2:15;
thus L1198: ( ( D167 * (the ResultSort of C432) ) . C439 ) = ( ( (the ResultSort of D162) * D173 ) . C439 ) by L1197 , L1142 , L1170 , L1171 , L1174 , L1195 , L70;
end;
thus L1199: ( D167 * (the ResultSort of C432) ) = ( (the ResultSort of D162) * D173 ) by L1169 , FUNCT_2:63;
thus L1200:now
let C442 being set;
let C443 being Function;
assume L1201: C442 in (the carrier' of C432);
reconsider D178 = C442 as (OperSymbol of C432) by L1201;
assume L1202: C443 = ( (the Arity of C432) . C442 );
reconsider D179 = ( (the Arity of C432) . D178 ) as (Element of ( (the carrier of C432) * ));
reconsider D180 = ( D165 * D179 ) as (FinSequence of ( rng D164 )) by L4;
consider C444 being (FinSequence of C431), C445 being (OperSymbol of C432) such that L1203: ( D173 . D178 ) = [ ( C434 -index_of D178 ) , C444 ] and L1204: D178 = C445 and L1205: ( Args (C445 , D163) ) c= ( product C444 ) by L1167;
L1206: ( D173 . D178 ) in (the carrier' of D162);
consider C446 being (OperSymbol of C430), C447 being (Element of ( C431 * )) such that L1207: ( D173 . D178 ) = [ C446 , C447 ] and L1208: ( product C447 ) meets ( dom ( Den (C446 , C430) ) ) by L1206 , L1141;
L1209: C444 = C447 by L1203 , L1207 , XTUPLE_0:1;
L1210: ( (the Arity of D162) . ( D173 . C442 ) ) = C444 by L1209 , L1207 , L1208 , L896;
L1211: ( Args (C445 , D163) ) = ( ( (the Sorts of D163) # ) . D179 ) by L1204 , FUNCT_2:15
.= ( product D180 ) by FINSEQ_2:def 5;
L1212: ( D166 * D180 ) = C444 by L1211 , L1146 , L1205 , L83;
thus L1213: ( D167 * C443 ) = ( (the Arity of D162) . ( D173 . C442 ) ) by L1212 , L1202 , L1210 , RELAT_1:36;
end;
thus L1214: ( rng D167 ) c= (the carrier of D162);
thus L1215: (the carrier of D162) c= ( rng D167 )
proof
let C448 being set;
assume L1216: C448 in (the carrier of D162);
reconsider D181 = C448 as (Element of C431) by L1216 , L896;
set D182 = the (Element of D181);
L1217: ( D164 -index_of D182 ) in ( dom D164 ) by L394;
L1218: D182 in ( D164 . ( D164 -index_of D182 ) ) by L394;
L1219: ( D164 . ( D164 -index_of D182 ) ) in ( rng D164 ) by L1217 , FUNCT_1:def 3;
L1220: ( D166 . ( D164 . ( D164 -index_of D182 ) ) ) = ( D167 . ( D164 -index_of D182 ) ) by L1217 , FUNCT_1:13;
L1221: ( D164 . ( D164 -index_of D182 ) ) c= ( D167 . ( D164 -index_of D182 ) ) by L1220 , L1146 , L1219;
L1222: ( D167 . ( D164 -index_of D182 ) ) in ( rng D167 ) by L1140 , L1168 , L1217 , FUNCT_1:def 3;
L1223: ( rng D167 ) c= C431 by L1168 , L896;
thus L1224: thesis by L1223 , L1218 , L1221 , L1222 , L70;
end;

thus L1225: ( rng D173 ) c= (the carrier' of D162);
thus L1226: (the carrier' of D162) c= ( rng D173 )
proof
let C449 being set;
assume L1227: C449 in (the carrier' of D162);
consider C450 being (OperSymbol of C430), C451 being (Element of ( C431 * )) such that L1228: C449 = [ C450 , C451 ] and L1229: ( product C451 ) meets ( dom ( Den (C450 , C430) ) ) by L1227 , L1141;
consider C452 being set such that L1230: C452 in ( product C451 ) and L1231: C452 in ( dom ( Den (C450 , C430) ) ) by L1229 , XBOOLE_0:3;
consider C453 being Function such that L1232: C452 = C453 and L1233: ( dom C453 ) = ( dom C451 ) and L1234: (for B413 being set holds (B413 in ( dom C451 ) implies ( C453 . B413 ) in ( C451 . B413 ))) by L1230 , CARD_3:def 5;
reconsider D183 = C453 as FinSequence by L1233 , L1;
L1235: ( product C451 ) c= ( Funcs (( dom C451 ) , ( Union C451 )) ) by FUNCT_6:1;
L1236: (ex B414 being Function st (D183 = B414 & ( dom B414 ) = ( dom C451 ) & ( rng B414 ) c= ( Union C451 ))) by L1235 , L1230 , L1232 , FUNCT_2:def 2;
L1237: ( Union C451 ) = ( union ( rng C451 ) ) by CARD_3:def 4;
L1238: ( union ( rng C451 ) ) c= ( union C431 ) by ZFMISC_1:77;
L1239: ( union C431 ) = (the carrier of C430) by EQREL_1:def 4;
L1240: ( rng D183 ) c= (the carrier of C430) by L1239 , L1236 , L1237 , L1238 , XBOOLE_1:1;
L1241: D183 is (FinSequence of (the carrier of C430)) by L1240 , FINSEQ_1:def 4;
consider C454 being (FinSequence of ( rng D164 )) such that L1242: D183 in ( product C454 ) by L1241 , L123;
L1243: ( dom D183 ) = ( dom C454 ) by L1242 , CARD_3:9;
L1244: ( Den (C450 , C430) ) is_exactly_partitable_wrt C431 by L735;
L1245:
now
let C455 being set;
assume L1246: C455 in ( dom C454 );
L1247: ( D183 . C455 ) in ( C451 . C455 ) by L1246 , L1233 , L1234 , L1243;
L1248: ( D183 . C455 ) in ( C454 . C455 ) by L1242 , L1246 , CARD_3:9;
L1249: ( C454 . C455 ) in ( rng C454 ) by L1246 , FUNCT_1:def 3;
L1250: ( C451 . C455 ) in ( rng C451 ) by L1233 , L1243 , L1246 , FUNCT_1:def 3;
L1251: (ex B415 being set st (B415 in C431 & ( C454 . C455 ) c= B415)) by L1143 , L1249 , SETFAM_1:def 2;
thus L1252: ( C454 . C455 ) c= ( C451 . C455 ) by L1251 , L1247 , L1248 , L1250 , L70;
end;
L1253: ( product C454 ) c= ( product C451 ) by L1245 , L1233 , L1243 , CARD_3:27;
L1254: ( product C451 ) c= ( dom ( Den (C450 , C430) ) ) by L1229 , L1244 , L634;
consider C456 being (OperSymbol of C432) such that L1255: ( (the Sorts of D163) * ( the_arity_of C456 ) ) = C454 and L1256: C456 in ( C434 . C450 ) by L1254 , L1137 , L1253 , L1115 , XBOOLE_1:1;
consider C457 being (FinSequence of C431), C458 being (OperSymbol of C432) such that L1257: ( D173 . C456 ) = [ ( C434 -index_of C456 ) , C457 ] and L1258: C456 = C458 and L1259: ( Args (C458 , D163) ) c= ( product C457 ) by L1167;
L1260: ( dom (the Arity of C432) ) = (the carrier' of C432) by FUNCT_2:def 1;
L1261: ( Args (C456 , D163) ) = ( ( (the Sorts of D163) # ) . ( (the Arity of C432) . C456 ) ) by L1260 , FUNCT_1:13
.= ( product C454 ) by L1255 , FINSEQ_2:def 5;
L1262: C457 = ( D166 * C454 ) by L1261 , L1146 , L1258 , L1259 , L83;
L1263: C451 = ( D166 * C454 ) by L1146 , L1253 , L83;
L1264: ( C434 -index_of C456 ) = C450 by L1139 , L1256 , L394;
thus L1265: thesis by L1264 , L1167 , L1228 , L1257 , L1262 , L1263 , FUNCT_1:def 3;
end;

end;
