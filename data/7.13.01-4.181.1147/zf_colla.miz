:: The Contraction Lemma
::  by Grzegorz Bancerek
::
:: Received April 14, 1989
:: Copyright (c) 1990-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, ORDINAL1, FUNCT_1, SUBSET_1, RELAT_1, TARSKI, ZF_LANG,
      ZF_MODEL, BVFUNC_2, CARD_1, XBOOLEAN, FUNCT_4, ARYTM_3, ZF_COLLA;
 notations TARSKI, XBOOLE_0, SUBSET_1, XCMPLX_0, RELAT_1, FUNCT_1, ZF_LANG,
      NUMBERS, FUNCT_2, FUNCT_7, ORDINAL1, ZF_MODEL;
 constructors NAT_1, MEMBERED, ZF_MODEL, FUNCT_7;
 registrations XBOOLE_0, FUNCT_1, ORDINAL1, MEMBERED, ZF_LANG, RELSET_1;
 requirements NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, ORDINAL1, XBOOLE_0;
 theorems TARSKI, FUNCT_1, ZF_LANG, ZF_MODEL, ORDINAL1, ZFMISC_1, RELAT_1,
      XBOOLE_0, FUNCT_7, XREGULAR;
 schemes TARSKI, CLASSES1, ORDINAL1, XBOOLE_0;

begin
definition
let R7 being non  empty set;
let R8 being Ordinal;
deffunc H1(T-Sequence) = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R10 being Ordinal st (R10 in ( dom $1 ) & R18 in ( union { ( $1 . R10 ) } ))))) };
func Collapse (R7 , R8) -> set means 
:L1: (ex R11 being T-Sequence st (it = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom R11 ) & R18 in ( union { ( R11 . R9 ) } ))))) } & ( dom R11 ) = R8 & (for R9 being Ordinal holds (R9 in R8 implies ( R11 . R9 ) = { R18 where R18 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R18 implies (ex R10 being Ordinal st (R10 in ( dom ( R11 | R9 ) ) & R17 in ( union { ( ( R11 | R9 ) . R10 ) } ))))) }))));
existence
proof
consider R11 being T-Sequence such that L2: ( dom R11 ) = R8 and L3: (for R9 being Ordinal holds (for R12 being T-Sequence holds ((R9 in R8 & R12 = ( R11 | R9 )) implies ( R11 . R9 ) = H1(R12)))) from ORDINAL1:sch 4;
take D1 = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom R11 ) & R18 in ( union { ( R11 . R9 ) } ))))) };
take R11;
thus L4: D1 = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom R11 ) & R18 in ( union { ( R11 . R9 ) } ))))) };
thus L5: ( dom R11 ) = R8 by L2;
let R9 being Ordinal;
assume L6: R9 in R8;
thus L7: thesis by L6 , L3;
end;
uniqueness
proof
let C1 , C2 being set;
given R11 being T-Sequence such that
L8: (C1 = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom R11 ) & R18 in ( union { ( R11 . R9 ) } ))))) } & ( dom R11 ) = R8 & (for R9 being Ordinal holds (R9 in R8 implies ( R11 . R9 ) = { R18 where R18 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R18 implies (ex R10 being Ordinal st (R10 in ( dom ( R11 | R9 ) ) & R17 in ( union { ( ( R11 | R9 ) . R10 ) } ))))) })));

L9: (( dom R11 ) = R8 & (for R9 being Ordinal holds (for R12 being T-Sequence holds ((R9 in R8 & R12 = ( R11 | R9 )) implies ( R11 . R9 ) = H1(R12))))) by L8;
given R12 being T-Sequence such that
L10: (C2 = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom R12 ) & R18 in ( union { ( R12 . R9 ) } ))))) } & ( dom R12 ) = R8 & (for R9 being Ordinal holds (R9 in R8 implies ( R12 . R9 ) = { R18 where R18 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R18 implies (ex R10 being Ordinal st (R10 in ( dom ( R12 | R9 ) ) & R17 in ( union { ( ( R12 | R9 ) . R10 ) } ))))) })));

L11: (( dom R12 ) = R8 & (for R9 being Ordinal holds (for R11 being T-Sequence holds ((R9 in R8 & R11 = ( R12 | R9 )) implies ( R12 . R9 ) = H1(R11))))) by L10;
L12: R11 = R12 from ORDINAL1:sch 3(L9 , L11);
thus L13: thesis by L12 , L8 , L10;
end;
end;
theorem
L15: (for R7 being non  empty set holds (for R8 being Ordinal holds ( Collapse (R7 , R8) ) = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))) }))
proof
let R7 being non  empty set;
let R8 being Ordinal;
defpred S1[ set , set ] means (ex R9 being Ordinal st (R9 = $1 & $2 = ( Collapse (R7 , R9) )));
deffunc H2(T-Sequence) = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R10 being Ordinal st (R10 in ( dom $1 ) & R18 in ( union { ( $1 . R10 ) } ))))) };
deffunc H3(Ordinal) = ( Collapse (R7 , $1) );
L16: (for R4 being set holds (R4 in R8 implies (ex R5 being set st S1[ R4 , R5 ])))
proof
let R4 being set;
assume L17: R4 in R8;
reconsider D2 = R4 as Ordinal by L17;
take ( Collapse (R7 , D2) );
take D2;
thus L18: thesis;
end;
consider R13 being Function such that L19: (( dom R13 ) = R8 & (for R4 being set holds (R4 in R8 implies S1[ R4 , ( R13 . R4 ) ]))) from CLASSES1:sch 1(L16);
reconsider D3 = R13 as T-Sequence by L19 , ORDINAL1:def 7;
L20:
now
let R8 being Ordinal;
assume L21: R8 in ( dom D3 );
L22: (ex R9 being Ordinal st (R9 = R8 & ( D3 . R8 ) = ( Collapse (R7 , R9) ))) by L21 , L19;
thus L23: ( D3 . R8 ) = H3(R8) by L22;
end;
L24: (for R8 being Ordinal holds (for R4 being set holds (R4 = H3(R8) iff (ex R11 being T-Sequence st (R4 = H2(R11) & ( dom R11 ) = R8 & (for R9 being Ordinal holds (R9 in R8 implies ( R11 . R9 ) = H2(( R11 | R9 ))))))))) by L1;
L25: (for R9 being Ordinal holds (R9 in ( dom D3 ) implies ( D3 . R9 ) = H2(( D3 | R9 )))) from ORDINAL1:sch 5(L24 , L20);
L26: ( Collapse (R7 , R8) ) = { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom D3 ) & R18 in ( union { ( D3 . R9 ) } ))))) } by L25 , L19 , L1;
L27:
now
let R4 being set;
assume L28: R4 in { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom D3 ) & R18 in ( union { ( D3 . R9 ) } ))))) };
consider R17 being (Element of R7) such that L29: R4 = R17 and L30: (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( dom D3 ) & R18 in ( union { ( D3 . R9 ) } ))))) by L28;
L31: (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) )))))
proof
let R18 being (Element of R7);
assume L32: R18 in R17;
consider R9 being Ordinal such that L33: R9 in ( dom D3 ) and L34: R18 in ( union { ( D3 . R9 ) } ) by L32 , L30;
take R9;
thus L35: R9 in R8 by L19 , L33;
L36: ( D3 . R9 ) = ( Collapse (R7 , R9) ) by L20 , L33;
thus L37: thesis by L36 , L34 , ZFMISC_1:25;
end;
thus L38: R4 in { R18 where R18 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R18 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) ))))) } by L31 , L29;
end;
thus L39: ( Collapse (R7 , R8) ) c= { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))) } by L27 , L26 , TARSKI:def 3;
let R4 being set;
assume L40: R4 in { R18 where R18 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R18 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) ))))) };
consider R18 being (Element of R7) such that L41: R4 = R18 and L42: (for R17 being (Element of R7) holds (R17 in R18 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) ))))) by L40;
L43: (for R17 being (Element of R7) holds (R17 in R18 implies (ex R9 being Ordinal st (R9 in ( dom D3 ) & R17 in ( union { ( D3 . R9 ) } )))))
proof
let R17 being (Element of R7);
assume L44: R17 in R18;
consider R9 being Ordinal such that L45: R9 in R8 and L46: R17 in ( Collapse (R7 , R9) ) by L44 , L42;
take R9;
thus L47: R9 in ( dom D3 ) by L19 , L45;
L48: ( D3 . R9 ) = ( Collapse (R7 , R9) ) by L19 , L20 , L45;
thus L49: thesis by L48 , L46 , ZFMISC_1:25;
end;
thus L50: thesis by L43 , L26 , L41;
end;
theorem
L51: (for R7 being non  empty set holds (for R17 being (Element of R7) holds ((not (ex R18 being (Element of R7) st R18 in R17)) iff R17 in ( Collapse (R7 , ( {} )) ))))
proof
let R7 being non  empty set;
let R17 being (Element of R7);
L52: ( Collapse (R7 , ( {} )) ) = { R20 where R20 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R20 implies (ex R9 being Ordinal st (R9 in ( {} ) & R18 in ( Collapse (R7 , R9) ))))) } by L15;
thus L53: ((not (ex R18 being (Element of R7) st R18 in R17)) implies R17 in ( Collapse (R7 , ( {} )) ))
proof
assume L54: (not (ex R18 being (Element of R7) st R18 in R17));
L55: (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in ( {} ) & R18 in ( Collapse (R7 , R9) ))))) by L54;
thus L56: thesis by L55 , L52;
end;

assume L57: R17 in ( Collapse (R7 , ( {} )) );
L58: (ex R20 being (Element of R7) st (R20 = R17 & (for R18 being (Element of R7) holds (R18 in R20 implies (ex R9 being Ordinal st (R9 in ( {} ) & R18 in ( Collapse (R7 , R9) ))))))) by L57 , L52;
given R18 being (Element of R7) such that
L59: R18 in R17;

L60: (ex R9 being Ordinal st (R9 in ( {} ) & R18 in ( Collapse (R7 , R9) ))) by L59 , L58;
thus L61: contradiction by L60;
end;
theorem
L62: (for R7 being non  empty set holds (for R8 being Ordinal holds (for R17 being (Element of R7) holds (( R17 /\ R7 ) c= ( Collapse (R7 , R8) ) iff R17 in ( Collapse (R7 , ( succ R8 )) )))))
proof
let R7 being non  empty set;
let R8 being Ordinal;
let R17 being (Element of R7);
L63: ( Collapse (R7 , ( succ R8 )) ) = { R20 where R20 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R20 implies (ex R9 being Ordinal st (R9 in ( succ R8 ) & R18 in ( Collapse (R7 , R9) ))))) } by L15;
thus L64: (( R17 /\ R7 ) c= ( Collapse (R7 , R8) ) implies R17 in ( Collapse (R7 , ( succ R8 )) ))
proof
assume L65: (for B1 being set holds (B1 in ( R17 /\ R7 ) implies B1 in ( Collapse (R7 , R8) )));
L66:
now
let R18 being (Element of R7);
assume L67: R18 in R17;
L68: R18 in ( R17 /\ R7 ) by L67 , XBOOLE_0:def 4;
L69: R18 in ( Collapse (R7 , R8) ) by L68 , L65;
thus L70: (ex R9 being Ordinal st (R9 in ( succ R8 ) & R18 in ( Collapse (R7 , R9) ))) by L69 , ORDINAL1:6;
end;
thus L71: thesis by L66 , L63;
end;

assume L72: R17 in ( Collapse (R7 , ( succ R8 )) );
L73: (ex B2 being (Element of R7) st (B2 = R17 & (for R18 being (Element of R7) holds (R18 in B2 implies (ex R9 being Ordinal st (R9 in ( succ R8 ) & R18 in ( Collapse (R7 , R9) ))))))) by L72 , L63;
let C3 being set;
assume L74: C3 in ( R17 /\ R7 );
reconsider D4 = C3 as (Element of R7) by L74 , XBOOLE_0:def 4;
L75: C3 in R17 by L74 , XBOOLE_0:def 4;
consider R9 being Ordinal such that L76: R9 in ( succ R8 ) and L77: D4 in ( Collapse (R7 , R9) ) by L75 , L73;
L78:
now
L79: ( Collapse (R7 , R9) ) = { R20 where R20 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R20 implies (ex R10 being Ordinal st (R10 in R9 & R18 in ( Collapse (R7 , R10) ))))) } by L15;
L80: (ex R20 being (Element of R7) st (R20 = D4 & (for R18 being (Element of R7) holds (R18 in R20 implies (ex R10 being Ordinal st (R10 in R9 & R18 in ( Collapse (R7 , R10) ))))))) by L79 , L77;
let R18 being (Element of R7);
assume L81: R18 in D4;
consider R10 being Ordinal such that L82: (R10 in R9 & R18 in ( Collapse (R7 , R10) )) by L81 , L80;
take D5 = R10;
L83: R9 c= R8 by L76 , ORDINAL1:22;
thus L84: (D5 in R8 & R18 in ( Collapse (R7 , D5) )) by L83 , L82;
end;
L85: ( Collapse (R7 , R8) ) = { R20 where R20 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R20 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))) } by L15;
thus L86: thesis by L85 , L78;
end;
theorem
L87: (for R7 being non  empty set holds (for R8 being Ordinal holds (for R9 being Ordinal holds (R8 c= R9 implies ( Collapse (R7 , R8) ) c= ( Collapse (R7 , R9) )))))
proof
let R7 being non  empty set;
let R8 being Ordinal;
let R9 being Ordinal;
assume L88: R8 c= R9;
let R4 being set;
assume L89: R4 in ( Collapse (R7 , R8) );
L90: R4 in { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))) } by L89 , L15;
consider R17 being (Element of R7) such that L91: R17 = R4 and L92: (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))) by L90;
L93: (for R18 being (Element of R7) holds (R18 in R17 implies (ex R10 being Ordinal st (R10 in R9 & R18 in ( Collapse (R7 , R10) )))))
proof
let R18 being (Element of R7);
assume L94: R18 in R17;
consider R10 being Ordinal such that L95: (R10 in R8 & R18 in ( Collapse (R7 , R10) )) by L94 , L92;
take R10;
thus L96: thesis by L88 , L95;
end;
L97: R4 in { R20 where R20 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R20 implies (ex R10 being Ordinal st (R10 in R9 & R18 in ( Collapse (R7 , R10) ))))) } by L93 , L91;
thus L98: thesis by L97 , L15;
end;
theorem
L99: (for R7 being non  empty set holds (for R17 being (Element of R7) holds (ex R8 being Ordinal st R17 in ( Collapse (R7 , R8) ))))
proof
let R7 being non  empty set;
let R17 being (Element of R7);
defpred S2[ set ] means (not (ex R8 being Ordinal st $1 in ( Collapse (R7 , R8) )));
defpred S3[ set , set ] means (ex R8 being Ordinal st ($2 = R8 & $1 in ( Collapse (R7 , R8) ) & (for R9 being Ordinal holds ($1 in ( Collapse (R7 , R9) ) implies R8 c= R9))));
consider R1 being set such that L100: (for R4 being set holds (R4 in R1 iff (R4 in R7 & S2[ R4 ]))) from XBOOLE_0:sch 1;
L101:
now
given R4 being set such that
L102: R4 in R1;

consider C4 being set such that L103: C4 in R1 and L104: R1 misses C4 by L102 , XREGULAR:1;
reconsider D6 = C4 as (Element of R7) by L100 , L103;
L105:
now
let R4 being set;
defpred S4[ Ordinal ] means R4 in ( Collapse (R7 , $1) );
assume L106: R4 in ( D6 /\ R7 );
L107: R4 in D6 by L106 , XBOOLE_0:def 4;
L108: (not R4 in R1) by L107 , L104 , XBOOLE_0:3;
L109: R4 in R7 by L106 , XBOOLE_0:def 4;
L110: (ex R8 being Ordinal st S4[ R8 ]) by L109 , L100 , L108;
L111: (ex R8 being Ordinal st (S4[ R8 ] & (for R9 being Ordinal holds (S4[ R9 ] implies R8 c= R9)))) from ORDINAL1:sch 1(L110);
thus L112: (ex R5 being set st S3[ R4 , R5 ]) by L111;
end;
consider R13 being Function such that L113: (( dom R13 ) = ( D6 /\ R7 ) & (for R4 being set holds (R4 in ( D6 /\ R7 ) implies S3[ R4 , ( R13 . R4 ) ]))) from CLASSES1:sch 1(L105);
L114: (for R5 being set holds (R5 in ( rng R13 ) implies R5 is Ordinal))
proof
let R5 being set;
assume L115: R5 in ( rng R13 );
consider R4 being set such that L116: R4 in ( dom R13 ) and L117: R5 = ( R13 . R4 ) by L115 , FUNCT_1:def 3;
L118: (ex R8 being Ordinal st (( R13 . R4 ) = R8 & R4 in ( Collapse (R7 , R8) ) & (for R9 being Ordinal holds (R4 in ( Collapse (R7 , R9) ) implies R8 c= R9)))) by L113 , L116;
thus L119: thesis by L118 , L117;
end;
consider R8 being Ordinal such that L120: ( rng R13 ) c= R8 by L114 , ORDINAL1:24;
L121: (for R17 being (Element of R7) holds (R17 in D6 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) )))))
proof
let R17 being (Element of R7);
assume L122: R17 in D6;
L123: R17 in ( D6 /\ R7 ) by L122 , XBOOLE_0:def 4;
consider R9 being Ordinal such that L124: ( R13 . R17 ) = R9 and L125: R17 in ( Collapse (R7 , R9) ) and L126: (for R10 being Ordinal holds (R17 in ( Collapse (R7 , R10) ) implies R9 c= R10)) by L123 , L113;
take R9;
L127: R9 in ( rng R13 ) by L113 , L123 , L124 , FUNCT_1:def 3;
thus L128: thesis by L127 , L120 , L125;
end;
L129: D6 in { R20 where R20 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R20 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) ))))) } by L121;
L130: D6 in ( Collapse (R7 , R8) ) by L129 , L15;
thus L131: contradiction by L130 , L100 , L103;
end;
thus L132: thesis by L101 , L100;
end;
theorem
L133: (for R7 being non  empty set holds (for R8 being Ordinal holds (for R17 being (Element of R7) holds (for R20 being (Element of R7) holds ((R20 in R17 & R17 in ( Collapse (R7 , R8) )) implies (R20 in ( Collapse (R7 , R8) ) & (ex R9 being Ordinal st (R9 in R8 & R20 in ( Collapse (R7 , R9) )))))))))
proof
let R7 being non  empty set;
let R8 being Ordinal;
let R17 being (Element of R7);
let R20 being (Element of R7);
assume that
L134: R20 in R17
and
L135: R17 in ( Collapse (R7 , R8) );
L136: R17 in { R18 where R18 is (Element of R7) : (for R17 being (Element of R7) holds (R17 in R18 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) ))))) } by L135 , L15;
L137: (ex R18 being (Element of R7) st (R17 = R18 & (for R17 being (Element of R7) holds (R17 in R18 implies (ex R9 being Ordinal st (R9 in R8 & R17 in ( Collapse (R7 , R9) ))))))) by L136;
consider R9 being Ordinal such that L138: R9 in R8 and L139: R20 in ( Collapse (R7 , R9) ) by L137 , L134;
L140: ( Collapse (R7 , R9) ) c= ( Collapse (R7 , R8) ) by L87 , L138 , ORDINAL1:def 2;
thus L141: R20 in ( Collapse (R7 , R8) ) by L140 , L139;
thus L142: thesis by L138 , L139;
end;
theorem
L143: (for R7 being non  empty set holds (for R8 being Ordinal holds ( Collapse (R7 , R8) ) c= R7))
proof
let R7 being non  empty set;
let R8 being Ordinal;
let R4 being set;
assume L144: R4 in ( Collapse (R7 , R8) );
L145: R4 in { R17 where R17 is (Element of R7) : (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))) } by L144 , L15;
L146: (ex R17 being (Element of R7) st (R4 = R17 & (for R18 being (Element of R7) holds (R18 in R17 implies (ex R9 being Ordinal st (R9 in R8 & R18 in ( Collapse (R7 , R9) ))))))) by L145;
thus L147: thesis by L146;
end;
theorem
L148: (for R7 being non  empty set holds (ex R8 being Ordinal st R7 = ( Collapse (R7 , R8) )))
proof
let R7 being non  empty set;
defpred S5[ set , set ] means (ex R8 being Ordinal st ($2 = R8 & $1 in ( Collapse (R7 , R8) ) & (for R9 being Ordinal holds ($1 in ( Collapse (R7 , R9) ) implies R8 c= R9))));
L149:
now
let R4 being set;
assume L150: R4 in R7;
reconsider D7 = R4 as (Element of R7) by L150;
defpred S6[ Ordinal ] means D7 in ( Collapse (R7 , $1) );
L151: (ex R8 being Ordinal st S6[ R8 ]) by L99;
L152: (ex R8 being Ordinal st (S6[ R8 ] & (for R9 being Ordinal holds (S6[ R9 ] implies R8 c= R9)))) from ORDINAL1:sch 1(L151);
thus L153: (ex R5 being set st S5[ R4 , R5 ]) by L152;
end;
consider R13 being Function such that L154: (( dom R13 ) = R7 & (for R4 being set holds (R4 in R7 implies S5[ R4 , ( R13 . R4 ) ]))) from CLASSES1:sch 1(L149);
L155: (for R4 being set holds (R4 in ( rng R13 ) implies R4 is Ordinal))
proof
let R4 being set;
assume L156: R4 in ( rng R13 );
consider R5 being set such that L157: R5 in ( dom R13 ) and L158: R4 = ( R13 . R5 ) by L156 , FUNCT_1:def 3;
L159: (ex R8 being Ordinal st (( R13 . R5 ) = R8 & R5 in ( Collapse (R7 , R8) ) & (for R10 being Ordinal holds (R5 in ( Collapse (R7 , R10) ) implies R8 c= R10)))) by L154 , L157;
thus L160: thesis by L159 , L158;
end;
consider R8 being Ordinal such that L161: ( rng R13 ) c= R8 by L155 , ORDINAL1:24;
take R8;
thus L162: (for R4 being set holds (R4 in R7 implies R4 in ( Collapse (R7 , R8) )))
proof
let R4 being set;
assume L163: R4 in R7;
consider R9 being Ordinal such that L164: ( R13 . R4 ) = R9 and L165: R4 in ( Collapse (R7 , R9) ) and L166: (for R10 being Ordinal holds (R4 in ( Collapse (R7 , R10) ) implies R9 c= R10)) by L163 , L154;
L167: R9 in ( rng R13 ) by L154 , L163 , L164 , FUNCT_1:def 3;
L168: ( Collapse (R7 , R9) ) c= ( Collapse (R7 , R8) ) by L167 , L87 , L161 , ORDINAL1:def 2;
thus L169: thesis by L168 , L165;
end;

thus L170: thesis by L143;
end;
theorem
L171: (for R7 being non  empty set holds (ex R13 being Function st (( dom R13 ) = R7 & (for R17 being (Element of R7) holds ( R13 . R17 ) = ( R13 .: R17 )))))
proof
let R7 being non  empty set;
defpred S7[ Ordinal , Function , non  empty set ] means (( dom $2 ) = ( Collapse ($3 , $1) ) & (for R17 being (Element of R7) holds (R17 in ( Collapse ($3 , $1) ) implies ( $2 . R17 ) = ( $2 .: R17 ))));
defpred S8[ Ordinal ] means (for R14 being Function holds (for R15 being Function holds ((S7[ $1 , R14 , R7 ] & S7[ $1 , R15 , R7 ]) implies R14 = R15)));
defpred S9[ Ordinal ] means (ex R13 being Function st S7[ $1 , R13 , R7 ]);
L172: (for R8 being Ordinal holds (for R9 being Ordinal holds (for R13 being Function holds ((R8 c= R9 & S7[ R9 , R13 , R7 ]) implies S7[ R8 , ( R13 | ( Collapse (R7 , R8) ) ) , R7 ]))))
proof
let R8 being Ordinal;
let R9 being Ordinal;
let R13 being Function;
assume that
L173: R8 c= R9
and
L174: ( dom R13 ) = ( Collapse (R7 , R9) )
and
L175: (for R17 being (Element of R7) holds (R17 in ( Collapse (R7 , R9) ) implies ( R13 . R17 ) = ( R13 .: R17 )));
L176: ( Collapse (R7 , R8) ) c= ( Collapse (R7 , R9) ) by L173 , L87;
thus L177: ( dom ( R13 | ( Collapse (R7 , R8) ) ) ) = ( Collapse (R7 , R8) ) by L173 , L174 , L87 , RELAT_1:62;
let R17 being (Element of R7);
assume that
L178: R17 in ( Collapse (R7 , R8) );
L179: (for R4 being set holds (R4 in ( R13 .: R17 ) implies R4 in ( ( R13 | ( Collapse (R7 , R8) ) ) .: R17 )))
proof
let R4 being set;
L180: ( dom ( R13 | ( Collapse (R7 , R8) ) ) ) = ( Collapse (R7 , R8) ) by L173 , L174 , L87 , RELAT_1:62;
assume L181: R4 in ( R13 .: R17 );
consider R6 being set such that L182: R6 in ( dom R13 ) and L183: R6 in R17 and L184: R4 = ( R13 . R6 ) by L181 , FUNCT_1:def 6;
L185: ( dom R13 ) c= R7 by L174 , L143;
reconsider D8 = R6 as (Element of R7) by L185 , L182;
L186: D8 in ( Collapse (R7 , R8) ) by L178 , L183 , L133;
L187: ( ( R13 | ( Collapse (R7 , R8) ) ) . R6 ) = ( R13 . R6 ) by L186 , FUNCT_1:49;
thus L188: thesis by L187 , L183 , L184 , L186 , L180 , FUNCT_1:def 6;
end;
L189: ( R13 .: R17 ) c= ( ( R13 | ( Collapse (R7 , R8) ) ) .: R17 ) by L179 , TARSKI:def 3;
L190: ( ( R13 | ( Collapse (R7 , R8) ) ) .: R17 ) c= ( R13 .: R17 ) by RELAT_1:128;
L191: ( R13 .: R17 ) = ( ( R13 | ( Collapse (R7 , R8) ) ) .: R17 ) by L190 , L189 , XBOOLE_0:def 10;
thus L192: ( ( R13 | ( Collapse (R7 , R8) ) ) . R17 ) = ( R13 . R17 ) by L178 , FUNCT_1:49
.= ( ( R13 | ( Collapse (R7 , R8) ) ) .: R17 ) by L175 , L176 , L178 , L191;
end;
L193:
now
let R8 being Ordinal;
assume that
L194: (for R9 being Ordinal holds (R9 in R8 implies S8[ R9 ]));
thus L195: S8[ R8 ]
proof
let R14 being Function;
let R15 being Function;
assume that
L196: S7[ R8 , R14 , R7 ]
and
L197: S7[ R8 , R15 , R7 ];
L198:
now
let R4 being set;
assume that
L199: R4 in ( Collapse (R7 , R8) );
L200: ( Collapse (R7 , R8) ) c= R7 by L143;
reconsider D9 = R4 as (Element of R7) by L200 , L199;
L201: ( R14 .: D9 ) = ( R15 .: D9 )
proof
thus L202: (for R5 being set holds (R5 in ( R14 .: D9 ) implies R5 in ( R15 .: D9 )))
proof
let R5 being set;
assume L203: R5 in ( R14 .: D9 );
consider R6 being set such that L204: R6 in ( dom R14 ) and L205: R6 in D9 and L206: R5 = ( R14 . R6 ) by L203 , FUNCT_1:def 6;
L207: ( dom R14 ) c= R7 by L196 , L143;
reconsider D10 = R6 as (Element of R7) by L207 , L204;
consider R9 being Ordinal such that L208: R9 in R8 and L209: D10 in ( Collapse (R7 , R9) ) by L199 , L205 , L133;
L210: R9 c= R8 by L208 , ORDINAL1:def 2;
L211: (S7[ R9 , ( R14 | ( Collapse (R7 , R9) ) ) , R7 ] & S7[ R9 , ( R15 | ( Collapse (R7 , R9) ) ) , R7 ]) by L210 , L172 , L196 , L197;
L212: ( R14 | ( Collapse (R7 , R9) ) ) = ( R15 | ( Collapse (R7 , R9) ) ) by L211 , L194 , L208;
L213: ( R14 . D10 ) = ( ( R14 | ( Collapse (R7 , R9) ) ) . D10 ) by L209 , FUNCT_1:49
.= ( R15 . D10 ) by L209 , L212 , FUNCT_1:49;
thus L214: thesis by L213 , L196 , L197 , L204 , L205 , L206 , FUNCT_1:def 6;
end;

let R5 being set;
assume L215: R5 in ( R15 .: D9 );
consider R6 being set such that L216: R6 in ( dom R15 ) and L217: R6 in D9 and L218: R5 = ( R15 . R6 ) by L215 , FUNCT_1:def 6;
L219: ( dom R15 ) c= R7 by L197 , L143;
reconsider D11 = R6 as (Element of R7) by L219 , L216;
consider R9 being Ordinal such that L220: R9 in R8 and L221: D11 in ( Collapse (R7 , R9) ) by L199 , L217 , L133;
L222: R9 c= R8 by L220 , ORDINAL1:def 2;
L223: (S7[ R9 , ( R14 | ( Collapse (R7 , R9) ) ) , R7 ] & S7[ R9 , ( R15 | ( Collapse (R7 , R9) ) ) , R7 ]) by L222 , L172 , L196 , L197;
L224: ( R14 | ( Collapse (R7 , R9) ) ) = ( R15 | ( Collapse (R7 , R9) ) ) by L223 , L194 , L220;
L225: ( R14 . D11 ) = ( ( R14 | ( Collapse (R7 , R9) ) ) . D11 ) by L221 , FUNCT_1:49
.= ( R15 . D11 ) by L221 , L224 , FUNCT_1:49;
thus L226: thesis by L225 , L196 , L197 , L216 , L217 , L218 , FUNCT_1:def 6;
end;
L227: ( R14 . D9 ) = ( R14 .: D9 ) by L196 , L199;
thus L228: ( R14 . R4 ) = ( R15 . R4 ) by L227 , L197 , L199 , L201;
end;
thus L229: thesis by L198 , L196 , L197 , FUNCT_1:2;
end;

end;
L196: (for R8 being Ordinal holds S8[ R8 ]) from ORDINAL1:sch 2(L193);
L197: (for R8 being Ordinal holds ((for R9 being Ordinal holds (R9 in R8 implies S9[ R9 ])) implies S9[ R8 ]))
proof
let R8 being Ordinal;
assume L198: (for R9 being Ordinal holds (R9 in R8 implies (ex R13 being Function st S7[ R9 , R13 , R7 ])));
defpred S10[ set , set ] means (ex R17 being (Element of R7) st (R17 = $1 & (for R4 being set holds (R4 in $2 iff (ex R18 being (Element of R7) st (ex R9 being Ordinal st (ex R13 being Function st (R18 in R17 & R9 in R8 & R18 in ( Collapse (R7 , R9) ) & S7[ R9 , R13 , R7 ] & R4 = ( R13 . R18 )))))))));
L199: (for R4 being set holds (R4 in ( Collapse (R7 , R8) ) implies (ex R5 being set st S10[ R4 , R5 ])))
proof
L200: ( Collapse (R7 , R8) ) c= R7 by L143;
let R4 being set;
assume L201: R4 in ( Collapse (R7 , R8) );
reconsider D12 = R4 as (Element of R7) by L201 , L200;
defpred S11[ set , set ] means (ex R9 being Ordinal st (ex R13 being Function st (R9 in R8 & $1 in ( Collapse (R7 , R9) ) & S7[ R9 , R13 , R7 ] & $2 = ( R13 . $1 ))));
L202: (for R4 being set holds (for R5 being set holds (for R6 being set holds ((S11[ R4 , R5 ] & S11[ R4 , R6 ]) implies R5 = R6))))
proof
let R4 being set;
let R5 being set;
let R6 being set;
given C5 being Ordinal , R14 being Function such that
L203: C5 in R8
and
L204: R4 in ( Collapse (R7 , C5) )
and
L205: S7[ C5 , R14 , R7 ]
and
L206: R5 = ( R14 . R4 );

given C6 being Ordinal , R15 being Function such that
L207: C6 in R8
and
L208: R4 in ( Collapse (R7 , C6) )
and
L209: S7[ C6 , R15 , R7 ]
and
L210: R6 = ( R15 . R4 );

L211:
now
assume L212: C6 c= C5;
L213: S7[ C6 , ( R14 | ( Collapse (R7 , C6) ) ) , R7 ] by L212 , L172 , L205;
L214: ( R14 | ( Collapse (R7 , C6) ) ) = R15 by L213 , L196 , L209;
thus L215: thesis by L214 , L206 , L208 , L210 , FUNCT_1:49;
end;
L216:
now
assume L217: C5 c= C6;
L218: S7[ C5 , ( R15 | ( Collapse (R7 , C5) ) ) , R7 ] by L217 , L172 , L209;
L219: ( R15 | ( Collapse (R7 , C5) ) ) = R14 by L218 , L196 , L205;
thus L220: thesis by L219 , L204 , L206 , L210 , FUNCT_1:49;
end;
thus L221: thesis by L216 , L211;
end;
consider R1 being set such that L222: (for R5 being set holds (R5 in R1 iff (ex R4 being set st (R4 in D12 & S11[ R4 , R5 ])))) from TARSKI:sch 1(L202);
take D13 = R1;
take D12;
thus L223: D12 = R4;
let R4 being set;
thus L224: (R4 in D13 implies (ex R18 being (Element of R7) st (ex R9 being Ordinal st (ex R13 being Function st (R18 in D12 & R9 in R8 & R18 in ( Collapse (R7 , R9) ) & S7[ R9 , R13 , R7 ] & R4 = ( R13 . R18 ))))))
proof
assume L225: R4 in D13;
consider R5 being set such that L226: R5 in D12 and L227: (ex R9 being Ordinal st (ex R13 being Function st (R9 in R8 & R5 in ( Collapse (R7 , R9) ) & S7[ R9 , R13 , R7 ] & R4 = ( R13 . R5 )))) by L225 , L222;
consider R9 being Ordinal, R13 being Function such that L228: R9 in R8 and L229: R5 in ( Collapse (R7 , R9) ) and L230: (S7[ R9 , R13 , R7 ] & R4 = ( R13 . R5 )) by L227;
L231: ( Collapse (R7 , R9) ) c= R7 by L143;
reconsider D14 = R5 as (Element of R7) by L231 , L229;
take D14;
take R9;
take R13;
thus L232: thesis by L226 , L228 , L229 , L230;
end;

given R18 being (Element of R7) , R9 being Ordinal , R13 being Function such that
L233: (R18 in D12 & R9 in R8 & R18 in ( Collapse (R7 , R9) ) & S7[ R9 , R13 , R7 ] & R4 = ( R13 . R18 ));

thus L234: thesis by L222 , L233;
end;
consider R13 being Function such that L235: (( dom R13 ) = ( Collapse (R7 , R8) ) & (for R4 being set holds (R4 in ( Collapse (R7 , R8) ) implies S10[ R4 , ( R13 . R4 ) ]))) from CLASSES1:sch 1(L199);
defpred S12[ Ordinal ] means ($1 c= R8 implies S7[ $1 , ( R13 | ( Collapse (R7 , $1) ) ) , R7 ]);
L236: (for R9 being Ordinal holds ((for R10 being Ordinal holds (R10 in R9 implies S12[ R10 ])) implies S12[ R9 ]))
proof
let R9 being Ordinal;
assume that
L237: (for R10 being Ordinal holds (R10 in R9 implies S12[ R10 ]));
assume L238: R9 c= R8;
L239: ( Collapse (R7 , R9) ) c= ( Collapse (R7 , R8) ) by L238 , L87;
thus L240: ( dom ( R13 | ( Collapse (R7 , R9) ) ) ) = ( Collapse (R7 , R9) ) by L235 , L238 , L87 , RELAT_1:62;
let R17 being (Element of R7);
assume L241: R17 in ( Collapse (R7 , R9) );
L242: ( ( R13 | ( Collapse (R7 , R9) ) ) . R17 ) = ( R13 . R17 ) by L241 , FUNCT_1:49;
consider R20 being (Element of R7) such that L243: R20 = R17 and L244: (for R4 being set holds (R4 in ( ( R13 | ( Collapse (R7 , R9) ) ) . R17 ) iff (ex R18 being (Element of R7) st (ex R9 being Ordinal st (ex R13 being Function st (R18 in R20 & R9 in R8 & R18 in ( Collapse (R7 , R9) ) & S7[ R9 , R13 , R7 ] & R4 = ( R13 . R18 ))))))) by L242 , L235 , L239 , L241;
set D15 = ( ( R13 | ( Collapse (R7 , R9) ) ) . R17 );
L245: D15 c= ( ( R13 | ( Collapse (R7 , R9) ) ) .: R17 )
proof
let R4 being set;
assume L246: R4 in D15;
consider R18 being (Element of R7), R10 being Ordinal, R16 being Function such that L247: R18 in R20 and L248: R10 in R8 and L249: R18 in ( Collapse (R7 , R10) ) and L250: S7[ R10 , R16 , R7 ] and L251: R4 = ( R16 . R18 ) by L246 , L244;
consider C7 being Ordinal such that L252: C7 in R9 and L253: R18 in ( Collapse (R7 , C7) ) by L241 , L243 , L247 , L133;
L254: (for R10 being Ordinal holds (for R16 being Function holds ((R10 c= C7 & S7[ R10 , R16 , R7 ] & R18 in ( Collapse (R7 , R10) ) & R4 = ( R16 . R18 )) implies thesis)))
proof
let R10 being Ordinal;
let R16 being Function;
assume that
L255: R10 c= C7
and
L256: S7[ R10 , R16 , R7 ]
and
L257: R18 in ( Collapse (R7 , R10) )
and
L258: R4 = ( R16 . R18 );
L259: R10 in R9 by L252 , L255 , ORDINAL1:12;
L260: R10 c= R8 by L259 , L238 , ORDINAL1:def 2;
L261: S7[ R10 , ( R13 | ( Collapse (R7 , R10) ) ) , R7 ] by L260 , L237 , L259;
L262: ( R13 | ( Collapse (R7 , R10) ) ) = R16 by L261 , L196 , L256;
L263: ( Collapse (R7 , R10) ) c= ( Collapse (R7 , R9) ) by L87 , L259 , ORDINAL1:def 2;
L264: ( R13 | ( Collapse (R7 , R10) ) ) = ( ( R13 | ( Collapse (R7 , R9) ) ) | ( Collapse (R7 , R10) ) ) by L263 , FUNCT_1:51;
L265: ( R16 . R18 ) = ( ( R13 | ( Collapse (R7 , R9) ) ) . R18 ) by L264 , L257 , L262 , FUNCT_1:49;
thus L266: thesis by L265 , L240 , L243 , L247 , L257 , L258 , L263 , FUNCT_1:def 6;
end;
L267: (C7 c= R10 implies thesis)
proof
assume L268: C7 c= R10;
L269: S7[ C7 , ( R16 | ( Collapse (R7 , C7) ) ) , R7 ] by L268 , L172 , L250;
L270: ( R16 . R18 ) = ( ( R16 | ( Collapse (R7 , C7) ) ) . R18 ) by L253 , FUNCT_1:49;
thus L271: thesis by L270 , L251 , L253 , L254 , L269;
end;
thus L272: thesis by L267 , L249 , L250 , L251 , L254;
end;
L273: ( ( R13 | ( Collapse (R7 , R9) ) ) .: R17 ) c= D15
proof
let R4 being set;
assume L274: R4 in ( ( R13 | ( Collapse (R7 , R9) ) ) .: R17 );
consider R5 being set such that L275: R5 in ( dom ( R13 | ( Collapse (R7 , R9) ) ) ) and L276: R5 in R17 and L277: R4 = ( ( R13 | ( Collapse (R7 , R9) ) ) . R5 ) by L274 , FUNCT_1:def 6;
L278: ( Collapse (R7 , R9) ) c= R7 by L143;
reconsider D16 = R5 as (Element of R7) by L278 , L240 , L275;
consider R10 being Ordinal such that L279: R10 in R9 and L280: D16 in ( Collapse (R7 , R10) ) by L241 , L276 , L133;
L281: ( Collapse (R7 , R10) ) c= ( Collapse (R7 , R9) ) by L87 , L279 , ORDINAL1:def 2;
L282: ( ( R13 | ( Collapse (R7 , R9) ) ) | ( Collapse (R7 , R10) ) ) = ( R13 | ( Collapse (R7 , R10) ) ) by L281 , FUNCT_1:51;
L283: ( ( R13 | ( Collapse (R7 , R10) ) ) . R5 ) = ( ( R13 | ( Collapse (R7 , R9) ) ) . R5 ) by L282 , L280 , FUNCT_1:49;
L284: R10 c= R8 by L238 , L279 , ORDINAL1:def 2;
L285: S7[ R10 , ( R13 | ( Collapse (R7 , R10) ) ) , R7 ] by L284 , L237 , L279;
thus L286: thesis by L285 , L238 , L243 , L244 , L276 , L277 , L279 , L280 , L283;
end;
thus L287: thesis by L273 , L245 , XBOOLE_0:def 10;
end;
L288: (for R9 being Ordinal holds S12[ R9 ]) from ORDINAL1:sch 2(L236);
take R13;
L289: ( R13 | ( dom R13 ) ) = R13 by RELAT_1:68;
thus L290: thesis by L289 , L235 , L288;
end;
L291: (for R8 being Ordinal holds S9[ R8 ]) from ORDINAL1:sch 2(L197);
consider R8 being Ordinal such that L292: R7 = ( Collapse (R7 , R8) ) by L148;
consider R13 being Function such that L293: S7[ R8 , R13 , R7 ] by L291;
take R13;
thus L294: ( dom R13 ) = R7 by L292 , L293;
let R17 being (Element of R7);
thus L295: thesis by L292 , L293;
end;
definition
let R13 being Function;
let R1 being set;
let R2 being set;
pred R13 is_epsilon-isomorphism_of R1 , R2
means
(( dom R13 ) = R1 & ( rng R13 ) = R2 & R13 is  one-to-one & (for R4 being set holds (for R5 being set holds ((R4 in R1 & R5 in R1) implies ((ex R3 being set st (R3 = R5 & R4 in R3)) iff (ex R3 being set st (( R13 . R5 ) = R3 & ( R13 . R4 ) in R3)))))))
;end;
definition
let R1 being set;
let R2 being set;
pred R1 , R2 are_epsilon-isomorphic 
means
(ex R13 being Function st R13 is_epsilon-isomorphism_of R1 , R2)
;end;
theorem
L298: (for R7 being non  empty set holds (for R13 being Function holds ((( dom R13 ) = R7 & (for R17 being (Element of R7) holds ( R13 . R17 ) = ( R13 .: R17 ))) implies ( rng R13 ) is  epsilon-transitive)))
proof
let R7 being non  empty set;
let R13 being Function;
assume that
L299: ( dom R13 ) = R7
and
L300: (for R17 being (Element of R7) holds ( R13 . R17 ) = ( R13 .: R17 ));
let R2 being set;
assume L301: R2 in ( rng R13 );
consider C8 being set such that L302: C8 in ( dom R13 ) and L303: R2 = ( R13 . C8 ) by L301 , FUNCT_1:def 3;
reconsider D17 = C8 as (Element of R7) by L299 , L302;
L304: ( R13 . D17 ) = ( R13 .: D17 ) by L300;
let C9 being set;
assume L305: C9 in R2;
L306: (ex B3 being set st (B3 in ( dom R13 ) & B3 in D17 & C9 = ( R13 . B3 ))) by L305 , L303 , L304 , FUNCT_1:def 6;
thus L307: thesis by L306 , FUNCT_1:def 3;
end;
theorem
L308: (for R7 being non  empty set holds (R7 |= ( the_axiom_of_extensionality ) implies (for R24 being (Element of R7) holds (for R25 being (Element of R7) holds ((for R26 being (Element of R7) holds (R26 in R24 iff R26 in R25)) implies R24 = R25)))))
proof
let R7 being non  empty set;
assume L309: R7 |= ( the_axiom_of_extensionality );
L310: ( All (( x. ( 0 ) ) , ( All (( x. 1 ) , ( ( All (( x. 2 ) , ( ( ( x. 2 ) 'in' ( x. ( 0 ) ) ) <=> ( ( x. 2 ) 'in' ( x. 1 ) ) )) ) => ( ( x. ( 0 ) ) '=' ( x. 1 ) ) )) )) ) = ( All (( x. ( 0 ) ) , ( x. 1 ) , ( ( All (( x. 2 ) , ( ( ( x. 2 ) 'in' ( x. ( 0 ) ) ) <=> ( ( x. 2 ) 'in' ( x. 1 ) ) )) ) => ( ( x. ( 0 ) ) '=' ( x. 1 ) ) )) ) by ZF_LANG:7;
L311: R7 |= ( All (( x. 1 ) , ( ( All (( x. 2 ) , ( ( ( x. 2 ) 'in' ( x. ( 0 ) ) ) <=> ( ( x. 2 ) 'in' ( x. 1 ) ) )) ) => ( ( x. ( 0 ) ) '=' ( x. 1 ) ) )) ) by L310 , L309 , ZF_MODEL:23 , ZF_MODEL:def 6;
L312: (for R21 being (Function of ( VAR ) , R7) holds ((for R22 being (Function of ( VAR ) , R7) holds ((for R27 being Variable holds (( R22 . R27 ) <> ( R21 . R27 ) implies ( x. 2 ) = R27)) implies (( R22 . ( x. 2 ) ) in ( R22 . ( x. ( 0 ) ) ) iff ( R22 . ( x. 2 ) ) in ( R22 . ( x. 1 ) )))) implies ( R21 . ( x. ( 0 ) ) ) = ( R21 . ( x. 1 ) )))
proof
let R21 being (Function of ( VAR ) , R7);
assume that
L313: (for R22 being (Function of ( VAR ) , R7) holds ((for R27 being Variable holds (( R22 . R27 ) <> ( R21 . R27 ) implies ( x. 2 ) = R27)) implies (( R22 . ( x. 2 ) ) in ( R22 . ( x. ( 0 ) ) ) iff ( R22 . ( x. 2 ) ) in ( R22 . ( x. 1 ) ))));
L314:
now
let R22 being (Function of ( VAR ) , R7);
assume that
L315: (for R27 being Variable holds (( R22 . R27 ) <> ( R21 . R27 ) implies ( x. 2 ) = R27));
L316: (( R22 . ( x. 2 ) ) in ( R22 . ( x. 1 ) ) iff R7 , R22 |= ( ( x. 2 ) 'in' ( x. 1 ) )) by ZF_MODEL:13;
L317: (( R22 . ( x. 2 ) ) in ( R22 . ( x. ( 0 ) ) ) iff R7 , R22 |= ( ( x. 2 ) 'in' ( x. ( 0 ) ) )) by ZF_MODEL:13;
thus L318: R7 , R22 |= ( ( ( x. 2 ) 'in' ( x. ( 0 ) ) ) <=> ( ( x. 2 ) 'in' ( x. 1 ) ) ) by L317 , L313 , L315 , L316 , ZF_MODEL:19;
end;
L319: R7 , R21 |= ( ( All (( x. 2 ) , ( ( ( x. 2 ) 'in' ( x. ( 0 ) ) ) <=> ( ( x. 2 ) 'in' ( x. 1 ) ) )) ) => ( ( x. ( 0 ) ) '=' ( x. 1 ) ) ) by L311 , ZF_MODEL:def 5 , ZF_MODEL:23;
L320: (R7 , R21 |= ( All (( x. 2 ) , ( ( ( x. 2 ) 'in' ( x. ( 0 ) ) ) <=> ( ( x. 2 ) 'in' ( x. 1 ) ) )) ) implies R7 , R21 |= ( ( x. ( 0 ) ) '=' ( x. 1 ) )) by L319 , ZF_MODEL:18;
thus L321: thesis by L320 , L314 , ZF_MODEL:12 , ZF_MODEL:16;
end;
L322: (for B4 , B5 being (Element of R7) holds ((for B6 being (Element of R7) holds (B6 in B4 iff B6 in B5)) implies B4 = B5))
proof
set D18 = the (Function of ( VAR ) , R7);
let C10 , C11 being (Element of R7);
assume that
L323: (for B7 being (Element of R7) holds (B7 in C10 iff B7 in C11));
set D19 = ( D18 +* (( x. ( 0 ) ) , C10) );
L324: ( D19 . ( x. ( 0 ) ) ) = C10 by FUNCT_7:128;
L325: (( x. ( 0 ) ) = ( 5 + ( 0 ) ) & ( x. 1 ) = ( 5 + 1 )) by ZF_LANG:def 2;
set D20 = ( D19 +* (( x. 1 ) , C11) );
L326: ( x. 2 ) = ( 5 + 2 ) by ZF_LANG:def 2;
L327: (for R23 being (Function of ( VAR ) , R7) holds ((for R27 being Variable holds (( R23 . R27 ) <> ( D20 . R27 ) implies ( x. 2 ) = R27)) implies (( R23 . ( x. 2 ) ) in ( R23 . ( x. ( 0 ) ) ) iff ( R23 . ( x. 2 ) ) in ( R23 . ( x. 1 ) ))))
proof
let R23 being (Function of ( VAR ) , R7);
assume L328: (for R27 being Variable holds (( R23 . R27 ) <> ( D20 . R27 ) implies ( x. 2 ) = R27));
L329: (( R23 . ( x. ( 0 ) ) ) = ( D20 . ( x. ( 0 ) ) ) & ( R23 . ( x. 1 ) ) = ( D20 . ( x. 1 ) )) by L328 , L325 , L326;
L330: (( R23 . ( x. 2 ) ) in C10 iff ( R23 . ( x. 2 ) ) in C11) by L323;
thus L331: thesis by L330 , L324 , L329 , FUNCT_7:32 , FUNCT_7:128;
end;
L332: (( D20 . ( x. 1 ) ) = C11 & ( D20 . ( x. ( 0 ) ) ) = ( D19 . ( x. ( 0 ) ) )) by L325 , FUNCT_7:32 , FUNCT_7:128;
thus L333: thesis by L332 , L312 , L324 , L327;
end;
thus L334: thesis by L322;
end;
::$N Contraction Lemma
theorem
L335: (for R7 being non  empty set holds (R7 |= ( the_axiom_of_extensionality ) implies (ex R1 being set st (R1 is  epsilon-transitive & R7 , R1 are_epsilon-isomorphic ))))
proof
let R7 being non  empty set;
consider C12 being Function such that L336: ( dom C12 ) = R7 and L337: (for R17 being (Element of R7) holds ( C12 . R17 ) = ( C12 .: R17 )) by L171;
assume L338: R7 |= ( the_axiom_of_extensionality );
L339:
now
defpred S13[ Ordinal ] means (ex R18 being (Element of R7) st (ex R19 being (Element of R7) st (R18 in ( Collapse (R7 , $1) ) & R19 in ( Collapse (R7 , $1) ) & ( C12 . R18 ) = ( C12 . R19 ) & R18 <> R19)));
given R28 being set , R29 being set such that
L340: (R28 in ( dom C12 ) & R29 in ( dom C12 ))
and
L341: (( C12 . R28 ) = ( C12 . R29 ) & R28 <> R29);

reconsider D21 = R28 , D22 = R29 as (Element of R7) by L336 , L340;
consider C13 being Ordinal such that L342: D21 in ( Collapse (R7 , C13) ) by L99;
consider C14 being Ordinal such that L343: D22 in ( Collapse (R7 , C14) ) by L99;
L344: (C13 c= C14 or C14 c= C13);
L345: (( Collapse (R7 , C13) ) c= ( Collapse (R7 , C14) ) or ( Collapse (R7 , C14) ) c= ( Collapse (R7 , C13) )) by L344 , L87;
L346: (ex R8 being Ordinal st S13[ R8 ]) by L345 , L341 , L342 , L343;
consider R8 being Ordinal such that L347: (S13[ R8 ] & (for R9 being Ordinal holds (S13[ R9 ] implies R8 c= R9))) from ORDINAL1:sch 1(L346);
consider R18 being (Element of R7), R19 being (Element of R7) such that L348: R18 in ( Collapse (R7 , R8) ) and L349: R19 in ( Collapse (R7 , R8) ) and L350: ( C12 . R18 ) = ( C12 . R19 ) and L351: R18 <> R19 by L347;
consider R26 being (Element of R7) such that L352: (not (R26 in R18 iff R26 in R19)) by L338 , L351 , L308;
L353: (( C12 . R18 ) = ( C12 .: R18 ) & ( C12 . R19 ) = ( C12 .: R19 )) by L337;
L354:
now
assume that
L355: R26 in R19
and
L356: (not R26 in R18);
consider C15 being Ordinal such that L357: (C15 in R8 & R26 in ( Collapse (R7 , C15) )) by L349 , L355 , L133;
L358: ( C12 . R26 ) in ( C12 .: R19 ) by L336 , L355 , FUNCT_1:def 6;
consider R28 being set such that L359: R28 in ( dom C12 ) and L360: R28 in R18 and L361: ( C12 . R26 ) = ( C12 . R28 ) by L358 , L350 , L353 , FUNCT_1:def 6;
reconsider D23 = R28 as (Element of R7) by L336 , L359;
consider C16 being Ordinal such that L362: (C16 in R8 & D23 in ( Collapse (R7 , C16) )) by L348 , L360 , L133;
L363: (C15 c= C16 or C16 c= C15);
L364: (( Collapse (R7 , C15) ) c= ( Collapse (R7 , C16) ) or ( Collapse (R7 , C16) ) c= ( Collapse (R7 , C15) )) by L363 , L87;
thus L365: contradiction by L364 , L347 , L356 , L360 , L361 , L357 , L362 , ORDINAL1:5;
end;
L366:
now
assume that
L367: R26 in R18
and
L368: (not R26 in R19);
consider C17 being Ordinal such that L369: (C17 in R8 & R26 in ( Collapse (R7 , C17) )) by L348 , L367 , L133;
L370: ( C12 . R26 ) in ( C12 .: R18 ) by L336 , L367 , FUNCT_1:def 6;
consider R28 being set such that L371: R28 in ( dom C12 ) and L372: R28 in R19 and L373: ( C12 . R26 ) = ( C12 . R28 ) by L370 , L350 , L353 , FUNCT_1:def 6;
reconsider D24 = R28 as (Element of R7) by L336 , L371;
consider C18 being Ordinal such that L374: (C18 in R8 & D24 in ( Collapse (R7 , C18) )) by L349 , L372 , L133;
L375: (C17 c= C18 or C18 c= C17);
L376: (( Collapse (R7 , C17) ) c= ( Collapse (R7 , C18) ) or ( Collapse (R7 , C18) ) c= ( Collapse (R7 , C17) )) by L375 , L87;
thus L377: contradiction by L376 , L347 , L368 , L372 , L373 , L369 , L374 , ORDINAL1:5;
end;
thus L378: contradiction by L366 , L352 , L354;
end;
take D25 = ( rng C12 );
thus L379: D25 is  epsilon-transitive by L336 , L337 , L298;
take C12;
thus L380: (( dom C12 ) = R7 & ( rng C12 ) = D25) by L336;
thus L381: C12 is  one-to-one by L339 , FUNCT_1:def 4;
let R28 being set;
let R29 being set;
assume that
L382: R28 in R7
and
L383: R29 in R7;
reconsider D26 = R29 as (Element of R7) by L383;
thus L384: ((ex R3 being set st (R3 = R29 & R28 in R3)) implies (ex R3 being set st (R3 = ( C12 . R29 ) & ( C12 . R28 ) in R3)))
proof
given R3 being set such that
L385: (R3 = R29 & R28 in R3);

L386: ( C12 . D26 ) = ( C12 .: D26 ) by L337;
L387: ( C12 . R28 ) in ( C12 .: D26 ) by L336 , L382 , L385 , FUNCT_1:def 6;
thus L388: thesis by L387 , L386;
end;

given R3 being set such that
L389: (R3 = ( C12 . R29 ) & ( C12 . R28 ) in R3);

L390: ( C12 . D26 ) = ( C12 .: D26 ) by L337;
consider R30 being set such that L391: R30 in ( dom C12 ) and L392: R30 in D26 and L393: ( C12 . R28 ) = ( C12 . R30 ) by L390 , L389 , FUNCT_1:def 6;
L394: R28 = R30 by L336 , L339 , L382 , L391 , L393;
thus L395: thesis by L394 , L392;
end;
