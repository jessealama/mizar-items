:: Functions and Finite Sequences of Real Numbers
::  by Jaros{\l}aw Kotowicz
::
:: Received March 15, 1993
:: Copyright (c) 1993-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, REAL_1, FINSEQ_1, RELAT_1, FINSET_1, CLASSES1,
      ORDINAL4, CARD_1, ARYTM_3, FUNCT_2, XBOOLE_0, TARSKI, NAT_1, FUNCT_1,
      ARYTM_1, XXREAL_0, CARD_3, VALUED_0, FUNCOP_1, FUNCT_4, RFINSEQ;
 notations TARSKI, XBOOLE_0, SUBSET_1, CARD_1, NUMBERS, RELAT_1, FUNCT_1,
      RELSET_1, FUNCT_2, FINSEQ_1, XCMPLX_0, XREAL_0, ORDINAL1, NAT_1, REAL_1,
      SEQ_1, CLASSES1, SEQM_3, FINSEQ_4, FINSET_1, FUNCOP_1, FUNCT_4, RVSUM_1,
      XXREAL_0;
 constructors PARTFUN1, WELLORD2, REAL_1, SQUARE_1, NAT_1, BINOP_2, SEQM_3,
      FINSEQ_4, FINSOP_1, RVSUM_1, SEQ_1, FUNCOP_1, CLASSES1, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, FINSET_1, NUMBERS, XREAL_0, NAT_1,
      MEMBERED, FINSEQ_1, FUNCOP_1, VALUED_0, CARD_1, INT_1, RELSET_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, XBOOLE_0, SEQM_3, RVSUM_1, FUNCOP_1, CLASSES1, RELAT_1;
 theorems TARSKI, FINSEQ_1, FINSEQ_2, FINSEQ_3, NAT_1, FUNCT_1, FUNCT_2,
      CARD_1, CARD_2, RVSUM_1, ZFMISC_1, RELAT_1, XBOOLE_0, XBOOLE_1, XCMPLX_1,
      XREAL_1, FINSEQ_4, XXREAL_0, FINSOP_1, SEQM_3, FUNCOP_1, FUNCT_4,
      ORDINAL1, XREAL_0, CLASSES1, INT_1;
 schemes NAT_1, FINSEQ_1;

begin
registration
let C1 being FinSequence;
let C2 being set;
cluster ( Coim (C1 , C2) ) ->  finite;
coherence;
end;
theorem
L2: (for B1 , B2 , B3 being FinSequence holds (B1 , B2 are_fiberwise_equipotent  iff ( B1 ^ B3 ) , ( B2 ^ B3 ) are_fiberwise_equipotent ))
proof
let C3 , C4 , C5 being FinSequence;
thus L3: (C3 , C4 are_fiberwise_equipotent  implies ( C3 ^ C5 ) , ( C4 ^ C5 ) are_fiberwise_equipotent )
proof
assume L4: C3 , C4 are_fiberwise_equipotent ;
L5:
now
let R2 being set;
L6: ( card ( Coim (C3 , R2) ) ) = ( card ( Coim (C4 , R2) ) ) by L4 , CLASSES1:def 9;
thus L7: ( card ( Coim (( C3 ^ C5 ) , R2) ) ) = ( ( card ( Coim (C4 , R2) ) ) + ( card ( Coim (C5 , R2) ) ) ) by L6 , FINSEQ_3:57
.= ( card ( Coim (( C4 ^ C5 ) , R2) ) ) by FINSEQ_3:57;
end;
thus L8: thesis by L5 , CLASSES1:def 9;
end;

assume L9: ( C3 ^ C5 ) , ( C4 ^ C5 ) are_fiberwise_equipotent ;
L10:
now
let R1 being set;
L11: (( card ( Coim (( C3 ^ C5 ) , R1) ) ) = ( ( card ( Coim (C3 , R1) ) ) + ( card ( Coim (C5 , R1) ) ) ) & ( card ( Coim (( C4 ^ C5 ) , R1) ) ) = ( ( card ( Coim (C4 , R1) ) ) + ( card ( Coim (C5 , R1) ) ) )) by FINSEQ_3:57;
L12: ( card ( Coim (( C3 ^ C5 ) , R1) ) ) = ( card ( Coim (( C4 ^ C5 ) , R1) ) ) by L9 , CLASSES1:def 9;
thus L13: ( card ( Coim (C3 , R1) ) ) = ( card ( Coim (C4 , R1) ) ) by L12 , L11;
end;
thus L14: thesis by L10 , CLASSES1:def 9;
end;
theorem
L15: (for B4 , B5 being FinSequence holds ( B4 ^ B5 ) , ( B5 ^ B4 ) are_fiberwise_equipotent )
proof
let C6 , C7 being FinSequence;
let R2 being set;
thus L16: ( card ( Coim (( C6 ^ C7 ) , R2) ) ) = ( ( card ( C7 " { R2 } ) ) + ( card ( C6 " { R2 } ) ) ) by FINSEQ_3:57
.= ( card ( Coim (( C7 ^ C6 ) , R2) ) ) by FINSEQ_3:57;
end;
theorem
L17: (for B6 , B7 being FinSequence holds (B6 , B7 are_fiberwise_equipotent  implies (( len B6 ) = ( len B7 ) & ( dom B6 ) = ( dom B7 ))))
proof
let C8 , C9 being FinSequence;
L18: ( dom C8 ) = ( Seg ( len C8 ) ) by FINSEQ_1:def 3;
assume L19: C8 , C9 are_fiberwise_equipotent ;
L20: (( card ( C8 " ( rng C8 ) ) ) = ( card ( C9 " ( rng C8 ) ) ) & ( rng C8 ) = ( rng C9 )) by L19 , CLASSES1:75 , CLASSES1:78;
L21: ( Seg ( len C9 ) ) = ( dom C9 ) by FINSEQ_1:def 3;
thus L22: ( len C8 ) = ( card ( Seg ( len C8 ) ) ) by FINSEQ_1:57
.= ( card ( C9 " ( rng C9 ) ) ) by L18 , L20 , RELAT_1:134
.= ( card ( Seg ( len C9 ) ) ) by L21 , RELAT_1:134
.= ( len C9 ) by FINSEQ_1:57;
thus L23: thesis by L22 , L18 , FINSEQ_1:def 3;
end;
theorem
L24: (for B8 , B9 being FinSequence holds (B8 , B9 are_fiberwise_equipotent  iff (ex B10 being (Permutation of ( dom B9 )) st B8 = ( B9 * B10 ))))
proof
let C10 , C11 being FinSequence;
thus L25: (C10 , C11 are_fiberwise_equipotent  implies (ex B11 being (Permutation of ( dom C11 )) st C10 = ( C11 * B11 )))
proof
assume L26: C10 , C11 are_fiberwise_equipotent ;
L27: ( dom C10 ) = ( dom C11 ) by L26 , L17;
thus L28: thesis by L27 , L26 , CLASSES1:80;
end;

given C12 being (Permutation of ( dom C11 )) such that
L29: C10 = ( C11 * C12 );

L30: (( dom C11 ) = ( {} ) implies ( dom C11 ) = ( {} ));
L31: (( rng C12 ) c= ( dom C11 ) & ( dom C12 ) = ( dom C11 )) by L30 , FUNCT_2:def 1 , RELAT_1:def 19;
L32: ( dom C10 ) = ( dom C11 ) by L31 , L29 , RELAT_1:27;
thus L33: thesis by L32 , L29 , CLASSES1:80;
end;
defpred S1[ Nat ] means (for B12 being  finite set holds (for B13 being Function holds (( card ( dom ( B13 | B12 ) ) ) = $1 implies (ex B14 being FinSequence st ( B13 | B12 ) , B14 are_fiberwise_equipotent ))));
L34: S1[ ( 0 ) ]
proof
let C13 being  finite set;
let C14 being Function;
assume L35: ( card ( dom ( C14 | C13 ) ) ) = ( 0 );
take D1 = ( {} );
let R1 being set;
L36: ( dom ( C14 | C13 ) ) = ( {} ) by L35;
thus L37: ( card ( Coim (( C14 | C13 ) , R1) ) ) = ( card ( Coim (D1 , R1) ) ) by L36 , RELAT_1:132 , XBOOLE_1:3;
end;
L38: (for R3 being (Element of ( NAT )) holds (S1[ R3 ] implies S1[ ( R3 + 1 ) ]))
proof
let C15 being (Element of ( NAT ));
assume L39: S1[ C15 ];
let C16 being  finite set;
let C17 being Function;
reconsider D2 = ( dom ( C17 | C16 ) ) as  finite set;
set D3 = the (Element of D2);
set D4 = ( C16 \ { D3 } );
set D5 = ( dom ( C17 | D4 ) );
L40: D5 = ( ( dom C17 ) /\ D4 ) by RELAT_1:61;
L41: D2 = ( ( dom C17 ) /\ C16 ) by RELAT_1:61;
L42: D5 = ( D2 \ { D3 } )
proof
thus L43: D5 c= ( D2 \ { D3 } )
proof
let R2 being set;
assume L44: R2 in D5;
L45: R2 in ( C16 \ { D3 } ) by L44 , L40 , XBOOLE_0:def 4;
L46: (not R2 in { D3 }) by L45 , XBOOLE_0:def 5;
L47: R2 in ( dom C17 ) by L40 , L44 , XBOOLE_0:def 4;
L48: R2 in D2 by L47 , L40 , L41 , L44 , XBOOLE_0:def 4;
thus L49: thesis by L48 , L46 , XBOOLE_0:def 5;
end;

let R2 being set;
assume L50: R2 in ( D2 \ { D3 } );
L51: ((not R2 in { D3 }) & R2 in C16) by L50 , L41 , XBOOLE_0:def 4 , XBOOLE_0:def 5;
L52: R2 in D4 by L51 , XBOOLE_0:def 5;
L53: R2 in ( dom C17 ) by L41 , L50 , XBOOLE_0:def 4;
thus L54: thesis by L53 , L40 , L52 , XBOOLE_0:def 4;
end;
assume L55: ( card ( dom ( C17 | C16 ) ) ) = ( C15 + 1 );
L56: { D3 } c= D2 by L55 , CARD_1:27 , ZFMISC_1:31;
L57: ( card ( dom ( C17 | D4 ) ) ) = ( ( card D2 ) - ( card { D3 } ) ) by L56 , L42 , CARD_2:44
.= ( ( C15 + 1 ) - 1 ) by L55 , CARD_1:30
.= C15;
consider C18 being FinSequence such that L58: ( C17 | D4 ) , C18 are_fiberwise_equipotent  by L57 , L39;
take D6 = ( C18 ^ <* ( C17 . D3 ) *> );
L59: D2 <> ( {} ) by L55;
L60: D3 in D2 by L59;
L61: D3 in ( ( dom C17 ) /\ C16 ) by L60 , RELAT_1:61;
L62: D3 in ( dom C17 ) by L61 , XBOOLE_0:def 4;
L63: { D3 } c= ( dom C17 ) by L62 , ZFMISC_1:31;
L64: D3 in C16 by L61 , XBOOLE_0:def 4;
L65: { D3 } c= C16 by L64 , ZFMISC_1:31;
L66:
now
let R2 being set;
L67: D4 misses { D3 } by XBOOLE_1:79;
L68: ( ( ( C17 | D4 ) " { R2 } ) \/ ( ( C17 | { D3 } ) " { R2 } ) ) = ( ( D4 /\ ( C17 " { R2 } ) ) \/ ( ( C17 | { D3 } ) " { R2 } ) ) by FUNCT_1:70
.= ( ( D4 /\ ( C17 " { R2 } ) ) \/ ( { D3 } /\ ( C17 " { R2 } ) ) ) by FUNCT_1:70
.= ( ( D4 \/ { D3 } ) /\ ( C17 " { R2 } ) ) by XBOOLE_1:23
.= ( ( C16 \/ { D3 } ) /\ ( C17 " { R2 } ) ) by XBOOLE_1:39
.= ( C16 /\ ( C17 " { R2 } ) ) by L65 , XBOOLE_1:12
.= ( ( C17 | C16 ) " { R2 } ) by FUNCT_1:70;
reconsider D7 = ( <* ( C17 . D3 ) *> " { R2 } ) as  finite set;
L69: ( card ( Coim (( C17 | D4 ) , R2) ) ) = ( card ( Coim (C18 , R2) ) ) by L58 , CLASSES1:def 9;
L70: ( dom ( C17 | { D3 } ) ) = { D3 } by L63 , RELAT_1:62;
L71: ( dom <* ( C17 . D3 ) *> ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:38;
L72:
now
per cases ;
case L73: R2 = ( C17 . D3 );
L74: { D3 } c= ( ( C17 | { D3 } ) " { R2 } )
proof
let C19 being set;
L75: R2 in { R2 } by TARSKI:def 1;
assume L76: C19 in { D3 };
L77: C19 = D3 by L76 , TARSKI:def 1;
L78: R2 = ( ( C17 | { D3 } ) . C19 ) by L77 , L70 , L73 , L76 , FUNCT_1:47;
thus L79: thesis by L78 , L70 , L76 , L75 , FUNCT_1:def 7;
end;
L80: ( ( C17 | { D3 } ) " { R2 } ) c= { D3 } by L70 , RELAT_1:132;
L81: ( ( C17 | { D3 } ) " { R2 } ) = { D3 } by L80 , L74 , XBOOLE_0:def 10;
L82: ( card ( ( C17 | { D3 } ) " { R2 } ) ) = 1 by L81 , CARD_1:30;
L83: { 1 } c= ( <* ( C17 . D3 ) *> " { R2 } )
proof
let C20 being set;
L84: R2 in { R2 } by TARSKI:def 1;
assume L85: C20 in { 1 };
L86: C20 = 1 by L85 , TARSKI:def 1;
L87: R2 = ( <* ( C17 . D3 ) *> . C20 ) by L86 , L73 , FINSEQ_1:40;
thus L88: thesis by L87 , L71 , L85 , L84 , FUNCT_1:def 7;
end;
L89: ( <* ( C17 . D3 ) *> " { R2 } ) c= { 1 } by L71 , RELAT_1:132;
L90: ( <* ( C17 . D3 ) *> " { R2 } ) = { 1 } by L89 , L83 , XBOOLE_0:def 10;
thus L91: ( card ( ( C17 | { D3 } ) " { R2 } ) ) = ( card D7 ) by L90 , L82 , CARD_1:30;
end;
case L92: R2 <> ( C17 . D3 );
L93:
now
set D8 = the (Element of ( <* ( C17 . D3 ) *> " { R2 } ));
assume L94: ( <* ( C17 . D3 ) *> " { R2 } ) <> ( {} );
L95: ( <* ( C17 . D3 ) *> . D8 ) in { R2 } by L94 , FUNCT_1:def 7;
L96: ( <* ( C17 . D3 ) *> . D8 ) = R2 by L95 , TARSKI:def 1;
L97: D8 in { 1 } by L71 , L94 , FUNCT_1:def 7;
L98: D8 = 1 by L97 , TARSKI:def 1;
thus L99: contradiction by L98 , L92 , L96 , FINSEQ_1:40;
end;
L100:
now
set D9 = the (Element of ( ( C17 | { D3 } ) " { R2 } ));
assume L101: ( ( C17 | { D3 } ) " { R2 } ) <> ( {} );
L102: ( ( C17 | { D3 } ) . D9 ) in { R2 } by L101 , FUNCT_1:def 7;
L103: ( ( C17 | { D3 } ) . D9 ) = R2 by L102 , TARSKI:def 1;
L104: D9 in { D3 } by L70 , L101 , FUNCT_1:def 7;
L105: D9 = D3 by L104 , TARSKI:def 1;
thus L106: contradiction by L105 , L70 , L92 , L104 , L103 , FUNCT_1:47;
end;
thus L107: ( card ( ( C17 | { D3 } ) " { R2 } ) ) = ( card D7 ) by L100 , L93;
end;
end;
L109: ( ( ( C17 | D4 ) " { R2 } ) /\ ( ( C17 | { D3 } ) " { R2 } ) ) = ( ( D4 /\ ( C17 " { R2 } ) ) /\ ( ( C17 | { D3 } ) " { R2 } ) ) by FUNCT_1:70
.= ( ( D4 /\ ( C17 " { R2 } ) ) /\ ( { D3 } /\ ( C17 " { R2 } ) ) ) by FUNCT_1:70
.= ( ( ( ( C17 " { R2 } ) /\ D4 ) /\ { D3 } ) /\ ( C17 " { R2 } ) ) by XBOOLE_1:16
.= ( ( ( C17 " { R2 } ) /\ ( D4 /\ { D3 } ) ) /\ ( C17 " { R2 } ) ) by XBOOLE_1:16
.= ( ( {} ) /\ ( C17 " { R2 } ) ) by L67 , XBOOLE_0:def 7
.= ( {} );
thus L110: ( card ( Coim (( C17 | C16 ) , R2) ) ) = ( ( ( card ( ( C17 | D4 ) " { R2 } ) ) + ( card D7 ) ) - ( card ( {} ) ) ) by L109 , L68 , L72 , CARD_2:45
.= ( card ( Coim (D6 , R2) ) ) by L69 , FINSEQ_3:57;
end;
thus L111: thesis by L66 , CLASSES1:def 9;
end;
theorem
L112: (for B15 being Function holds (for B16 being  finite set holds (ex B17 being FinSequence st ( B15 | B16 ) , B17 are_fiberwise_equipotent )))
proof
let C21 being Function;
let C22 being  finite set;
L113: ( card ( dom ( C21 | C22 ) ) ) = ( card ( dom ( C21 | C22 ) ) );
L114: (for R3 being (Element of ( NAT )) holds S1[ R3 ]) from NAT_1:sch 1(L34 , L38);
thus L115: thesis by L114 , L113;
end;
definition
let C23 being Nat;
let C24 being FinSequence;
func C24 /^ C23 -> FinSequence means 
:L116: (( len it ) = ( ( len C24 ) - C23 ) & (for B18 being Nat holds (B18 in ( dom it ) implies ( it . B18 ) = ( C24 . ( B18 + C23 ) )))) if C23 <= ( len C24 ) otherwise it = ( {} );
existence
proof
thus L117: (C23 <= ( len C24 ) implies (ex B19 being FinSequence st (( len B19 ) = ( ( len C24 ) - C23 ) & (for B20 being Nat holds (B20 in ( dom B19 ) implies ( B19 . B20 ) = ( C24 . ( B20 + C23 ) ))))))
proof
assume L118: C23 <= ( len C24 );
reconsider D10 = ( ( len C24 ) - C23 ) as (Element of ( NAT )) by L118 , NAT_1:21;
deffunc H1(Nat) = ( C24 . ( $1 + C23 ) );
consider C25 being FinSequence such that L119: (( len C25 ) = D10 & (for B21 being Nat holds (B21 in ( dom C25 ) implies ( C25 . B21 ) = H1(B21)))) from FINSEQ_1:sch 2;
take C25;
thus L120: ( len C25 ) = ( ( len C24 ) - C23 ) by L119;
let C26 being Nat;
assume L121: C26 in ( dom C25 );
thus L122: thesis by L121 , L119;
end;

thus L123: thesis;
end;
uniqueness
proof
let C27 , C28 being FinSequence;
thus L124: ((C23 <= ( len C24 ) & ( len C27 ) = ( ( len C24 ) - C23 ) & (for B22 being Nat holds (B22 in ( dom C27 ) implies ( C27 . B22 ) = ( C24 . ( B22 + C23 ) ))) & ( len C28 ) = ( ( len C24 ) - C23 ) & (for B23 being Nat holds (B23 in ( dom C28 ) implies ( C28 . B23 ) = ( C24 . ( B23 + C23 ) )))) implies C27 = C28)
proof
assume that
L125: C23 <= ( len C24 )
and
L126: ( len C27 ) = ( ( len C24 ) - C23 )
and
L127: (for B24 being Nat holds (B24 in ( dom C27 ) implies ( C27 . B24 ) = ( C24 . ( B24 + C23 ) )))
and
L128: ( len C28 ) = ( ( len C24 ) - C23 )
and
L129: (for B25 being Nat holds (B25 in ( dom C28 ) implies ( C28 . B25 ) = ( C24 . ( B25 + C23 ) )));
L130: (( dom C27 ) = ( Seg ( len C27 ) ) & ( Seg ( len C28 ) ) = ( dom C28 )) by FINSEQ_1:def 3;
L131:
now
let C29 being Nat;
assume L132: C29 in ( dom C27 );
L133: ( C27 . C29 ) = ( C24 . ( C29 + C23 ) ) by L132 , L127;
thus L134: ( C27 . C29 ) = ( C28 . C29 ) by L133 , L126 , L128 , L129 , L130 , L132;
end;
thus L135: thesis by L131 , L126 , L128 , FINSEQ_2:9;
end;

thus L136: thesis;
end;
consistency;
end;
definition
let C30 being set;
let C31 being Nat;
let C32 being (FinSequence of C30);
redefine func C32 /^ C31 -> (FinSequence of C30);

coherence
proof
set D11 = ( C32 /^ C31 );
per cases ;
suppose L138: C31 <= ( len C32 );

reconsider D12 = ( ( len C32 ) - C31 ) as (Element of ( NAT )) by L138 , NAT_1:21;
L139: ( len D11 ) = D12 by L138 , L116;
L140: ( rng D11 ) c= ( rng C32 )
proof
let R1 being set;
assume L141: R1 in ( rng D11 );
consider C33 being Nat such that L142: C33 in ( dom D11 ) and L143: ( D11 . C33 ) = R1 by L141 , FINSEQ_2:10;
L144: C33 <= ( len D11 ) by L142 , FINSEQ_3:25;
L145: ( C33 + C31 ) <= ( len C32 ) by L144 , L139 , XREAL_1:19;
L146: C33 <= ( C33 + C31 ) by NAT_1:11;
L147: 1 <= C33 by L142 , FINSEQ_3:25;
L148: 1 <= ( C33 + C31 ) by L147 , L146 , XXREAL_0:2;
L149: ( C33 + C31 ) in ( dom C32 ) by L148 , L145 , FINSEQ_3:25;
L150: ( D11 . C33 ) = ( C32 . ( C33 + C31 ) ) by L138 , L142 , L116;
thus L151: thesis by L150 , L143 , L149 , FUNCT_1:def 3;
end;
L152: ( rng D11 ) c= C30 by L140 , XBOOLE_1:1;
thus L153: thesis by L152 , FINSEQ_1:def 4;
end;
suppose L154: ( len C32 ) < C31;

L155: ( C32 /^ C31 ) = ( <*> C30 ) by L154 , L116;
thus L156: thesis by L155;
end;
end;
end;
L159: (for B26 being Nat holds (for B27 being non  empty set holds (for B28 being (FinSequence of B27) holds (( len B28 ) <= B26 implies ( B28 | B26 ) = B28))))
proof
let C34 being Nat;
let C35 being non  empty set;
let C36 being (FinSequence of C35);
L160: ( dom C36 ) = ( Seg ( len C36 ) ) by FINSEQ_1:def 3;
assume L161: ( len C36 ) <= C34;
L162: (( C36 | C34 ) = ( C36 | ( Seg C34 ) ) & ( dom C36 ) c= ( Seg C34 )) by L161 , L160 , FINSEQ_1:5 , FINSEQ_1:def 15;
thus L163: thesis by L162 , RELAT_1:68;
end;
theorem
L164: (for B29 being non  empty set holds (for B30 being (FinSequence of B29) holds (for B31 , B32 being Nat holds ((B31 in ( dom B30 ) & B32 in ( Seg B31 )) implies (( ( B30 | B31 ) . B32 ) = ( B30 . B32 ) & B32 in ( dom B30 ))))))
proof
let C37 being non  empty set;
let C38 being (FinSequence of C37);
let C39 , C40 being Nat;
assume that
L165: C39 in ( dom C38 )
and
L166: C40 in ( Seg C39 );
L167: ( C38 | C39 ) = ( C38 | ( Seg C39 ) ) by FINSEQ_1:def 15;
L168: (( dom C38 ) = ( Seg ( len C38 ) ) & C39 <= ( len C38 )) by L165 , FINSEQ_1:def 3 , FINSEQ_3:25;
L169: ( Seg C39 ) c= ( dom C38 ) by L168 , FINSEQ_1:5;
L170: ( Seg C39 ) = ( ( dom C38 ) /\ ( Seg C39 ) ) by L169 , XBOOLE_1:28
.= ( dom ( C38 | C39 ) ) by L167 , RELAT_1:61;
thus L171: thesis by L170 , L166 , L167 , L169 , FUNCT_1:47;
end;
theorem
L172: (for B33 being non  empty set holds (for B34 being (FinSequence of B33) holds (for B35 being Nat holds (for B36 being set holds ((( len B34 ) = ( B35 + 1 ) & B36 = ( B34 . ( B35 + 1 ) )) implies B34 = ( ( B34 | B35 ) ^ <* B36 *> ))))))
proof
let C41 being non  empty set;
let C42 being (FinSequence of C41);
let C43 being Nat;
let R1 being set;
assume that
L173: ( len C42 ) = ( C43 + 1 )
and
L174: R1 = ( C42 . ( C43 + 1 ) );
set D13 = ( C42 | C43 );
L175: ( len D13 ) = C43 by L173 , FINSEQ_1:59 , NAT_1:11;
L176: ( dom C42 ) = ( Seg ( len C42 ) ) by FINSEQ_1:def 3;
L177: C43 <= ( C43 + 1 ) by NAT_1:11;
L178:
now
let C44 being Nat;
assume L179: C44 in ( dom C42 );
L180: 1 <= C44 by L179 , L176 , FINSEQ_1:1;
L181: C44 <= ( len C42 ) by L176 , L179 , FINSEQ_1:1;
L182:
now
per cases ;
case L183: C44 = ( len C42 );
thus L184: ( C42 . C44 ) = ( ( D13 ^ <* R1 *> ) . C44 ) by L183 , L173 , L174 , L175 , FINSEQ_1:42;
end;
case L185: C44 <> ( len C42 );
L186: C44 < ( C43 + 1 ) by L185 , L173 , L181 , XXREAL_0:1;
L187: C44 <= C43 by L186 , NAT_1:13;
L188: 1 <= C43 by L187 , L180 , XXREAL_0:2;
L189: C43 in ( dom C42 ) by L188 , L173 , L177 , FINSEQ_3:25;
L190: ( Seg ( len D13 ) ) = ( dom D13 ) by FINSEQ_1:def 3;
L191: C44 in ( dom D13 ) by L175 , L180 , L187 , FINSEQ_3:25;
thus L192: ( ( D13 ^ <* R1 *> ) . C44 ) = ( D13 . C44 ) by L191 , FINSEQ_1:def 7
.= ( C42 . C44 ) by L175 , L191 , L189 , L190 , L164;
end;
end;
thus L194: ( C42 . C44 ) = ( ( D13 ^ <* R1 *> ) . C44 ) by L182;
end;
L195: ( len ( D13 ^ <* R1 *> ) ) = ( C43 + ( len <* R1 *> ) ) by L175 , FINSEQ_1:22
.= ( len C42 ) by L173 , FINSEQ_1:40;
thus L196: thesis by L195 , L178 , FINSEQ_2:9;
end;
theorem
L197: (for B37 being non  empty set holds (for B38 being (FinSequence of B37) holds (for B39 being Nat holds ( ( B38 | B39 ) ^ ( B38 /^ B39 ) ) = B38)))
proof
let C45 being non  empty set;
let C46 being (FinSequence of C45);
let C47 being Nat;
set D14 = ( C46 /^ C47 );
L198:
now
per cases ;
case L199: ( len C46 ) < C47;
L200: (( C46 /^ C47 ) = ( <*> C45 ) & ( C46 | C47 ) = C46) by L199 , L116 , L159;
thus L201: thesis by L200 , FINSEQ_1:34;
end;
case L202: C47 <= ( len C46 );
L203: ( dom C46 ) = ( Seg ( len C46 ) ) by FINSEQ_1:def 3;
L204: ( len ( C46 | C47 ) ) = C47 by L202 , FINSEQ_1:59;
L205: ( len D14 ) = ( ( len C46 ) - C47 ) by L202 , L116;
L206: ( len ( ( C46 | C47 ) ^ ( C46 /^ C47 ) ) ) = ( C47 + ( ( len C46 ) - C47 ) ) by L205 , L204 , FINSEQ_1:22
.= ( len C46 );
L207: ( dom ( C46 | C47 ) ) = ( Seg C47 ) by L204 , FINSEQ_1:def 3;
L208:
now
let C48 being Nat;
assume L209: C48 in ( dom C46 );
L210: C48 <= ( len C46 ) by L209 , L203 , FINSEQ_1:1;
L211: 1 <= C48 by L203 , L209 , FINSEQ_1:1;
L212:
now
per cases ;
case L213: C48 <= C47;
L214: 1 <= C47 by L213 , L211 , XXREAL_0:2;
L215: C47 in ( dom C46 ) by L214 , L202 , FINSEQ_3:25;
L216: C48 in ( Seg C47 ) by L211 , L213 , FINSEQ_1:1;
thus L217: ( ( ( C46 | C47 ) ^ ( C46 /^ C47 ) ) . C48 ) = ( ( C46 | C47 ) . C48 ) by L216 , L207 , FINSEQ_1:def 7
.= ( C46 . C48 ) by L216 , L215 , L164;
end;
case L218: C47 < C48;
L219: ( max (( 0 ) , ( C48 - C47 )) ) = ( C48 - C47 ) by L218 , FINSEQ_2:4;
reconsider D15 = ( C48 - C47 ) as (Element of ( NAT )) by L219 , FINSEQ_2:5;
L220: ( C47 + 1 ) <= C48 by L218 , NAT_1:13;
L221: 1 <= D15 by L220 , XREAL_1:19;
L222: D15 <= ( len D14 ) by L205 , L210 , XREAL_1:9;
L223: D15 in ( dom D14 ) by L222 , L221 , FINSEQ_3:25;
thus L224: ( ( ( C46 | C47 ) ^ ( C46 /^ C47 ) ) . C48 ) = ( D14 . D15 ) by L204 , L206 , L210 , L218 , FINSEQ_1:24
.= ( C46 . ( D15 + C47 ) ) by L202 , L223 , L116
.= ( C46 . C48 );
end;
end;
thus L226: ( ( ( C46 | C47 ) ^ ( C46 /^ C47 ) ) . C48 ) = ( C46 . C48 ) by L212;
end;
thus L227: thesis by L208 , L206 , FINSEQ_2:9;
end;
end;
thus L229: thesis by L198;
end;
theorem
L230: (for B40 , B41 being (FinSequence of ( REAL )) holds (B40 , B41 are_fiberwise_equipotent  implies ( Sum B40 ) = ( Sum B41 )))
proof
let C49 , C50 being (FinSequence of ( REAL ));
defpred S2[ Nat ] means (for B42 , B43 being (FinSequence of ( REAL )) holds ((B42 , B43 are_fiberwise_equipotent  & ( len B42 ) = $1) implies ( Sum B42 ) = ( Sum B43 )));
assume L231: C49 , C50 are_fiberwise_equipotent ;
L232: ( len C49 ) = ( len C49 );
L233: (for R3 being (Element of ( NAT )) holds (S2[ R3 ] implies S2[ ( R3 + 1 ) ]))
proof
let R3 being (Element of ( NAT ));
assume L234: S2[ R3 ];
let C51 , C52 being (FinSequence of ( REAL ));
assume that
L235: C51 , C52 are_fiberwise_equipotent 
and
L236: ( len C51 ) = ( R3 + 1 );
set D16 = ( C51 . ( R3 + 1 ) );
L237: ( rng C51 ) = ( rng C52 ) by L235 , CLASSES1:75;
L238: ( 0 ) < ( R3 + 1 ) by NAT_1:3;
L239: ( (( 0 ) qua Nat) + 1 ) <= ( R3 + 1 ) by L238 , NAT_1:13;
L240: ( R3 + 1 ) in ( dom C51 ) by L239 , L236 , FINSEQ_3:25;
L241: D16 in ( rng C52 ) by L240 , L237 , FUNCT_1:def 3;
consider C53 being Nat such that L242: C53 in ( dom C52 ) and L243: ( C52 . C53 ) = D16 by L241 , FINSEQ_2:10;
set D17 = ( C52 /^ C53 );
set D18 = ( C52 | C53 );
L244: C53 <= ( len C52 ) by L242 , FINSEQ_3:25;
L245: ( len D18 ) = C53 by L244 , FINSEQ_1:59;
L246: 1 <= C53 by L242 , FINSEQ_3:25;
L247: ( max (( 0 ) , ( C53 - 1 )) ) = ( C53 - 1 ) by L246 , FINSEQ_2:4;
reconsider D19 = ( C53 - 1 ) as (Element of ( NAT )) by L247 , FINSEQ_2:5;
L248: C53 = ( D19 + 1 );
L249: D19 <= C53 by L248 , NAT_1:11;
L250: ( Seg D19 ) c= ( Seg C53 ) by L249 , FINSEQ_1:5;
L251: C53 in ( Seg C53 ) by L246 , FINSEQ_1:1;
L252: ( D18 . C53 ) = D16 by L251 , L242 , L243 , L164;
L253: D18 = ( ( D18 | D19 ) ^ <* D16 *> ) by L252 , L245 , L248 , L172;
set D20 = ( C51 | R3 );
L254: C52 = ( ( C52 | C53 ) ^ ( C52 /^ C53 ) ) by L197;
L255: ( D18 | D19 ) = ( D18 | ( Seg D19 ) ) by FINSEQ_1:def 15
.= ( ( C52 | ( Seg C53 ) ) | ( Seg D19 ) ) by FINSEQ_1:def 15
.= ( C52 | ( ( Seg C53 ) /\ ( Seg D19 ) ) ) by RELAT_1:71
.= ( C52 | ( Seg D19 ) ) by L250 , XBOOLE_1:28
.= ( C52 | D19 ) by FINSEQ_1:def 15;
L256: C51 = ( D20 ^ <* D16 *> ) by L236 , L172;
L257:
now
let R1 being set;
L258: ( card ( Coim (C51 , R1) ) ) = ( card ( Coim (C52 , R1) ) ) by L235 , CLASSES1:def 9;
L259: ( ( card ( D20 " { R1 } ) ) + ( card ( <* D16 *> " { R1 } ) ) ) = ( card ( ( ( ( C52 | D19 ) ^ <* D16 *> ) ^ ( C52 /^ C53 ) ) " { R1 } ) ) by L258 , L254 , L253 , L255 , L256 , FINSEQ_3:57
.= ( ( card ( ( ( C52 | D19 ) ^ <* D16 *> ) " { R1 } ) ) + ( card ( ( C52 /^ C53 ) " { R1 } ) ) ) by FINSEQ_3:57
.= ( ( ( card ( ( C52 | D19 ) " { R1 } ) ) + ( card ( <* D16 *> " { R1 } ) ) ) + ( card ( ( C52 /^ C53 ) " { R1 } ) ) ) by FINSEQ_3:57
.= ( ( ( card ( ( C52 | D19 ) " { R1 } ) ) + ( card ( ( C52 /^ C53 ) " { R1 } ) ) ) + ( card ( <* D16 *> " { R1 } ) ) )
.= ( ( card ( ( ( C52 | D19 ) ^ ( C52 /^ C53 ) ) " { R1 } ) ) + ( card ( <* D16 *> " { R1 } ) ) ) by FINSEQ_3:57;
thus L260: ( card ( Coim (D20 , R1) ) ) = ( card ( Coim (( ( C52 | D19 ) ^ ( C52 /^ C53 ) ) , R1) ) ) by L259;
end;
L261: D20 , ( ( C52 | D19 ) ^ ( C52 /^ C53 ) ) are_fiberwise_equipotent  by L257 , CLASSES1:def 9;
L262: ( len D20 ) = R3 by L236 , FINSEQ_1:59 , NAT_1:11;
L263: ( Sum D20 ) = ( Sum ( ( C52 | D19 ) ^ D17 ) ) by L262 , L234 , L261;
thus L264: ( Sum C51 ) = ( ( Sum ( ( C52 | D19 ) ^ D17 ) ) + ( Sum <* D16 *> ) ) by L263 , L256 , RVSUM_1:75
.= ( ( ( Sum ( C52 | D19 ) ) + ( Sum D17 ) ) + ( Sum <* D16 *> ) ) by RVSUM_1:75
.= ( ( ( Sum ( C52 | D19 ) ) + ( Sum <* D16 *> ) ) + ( Sum D17 ) )
.= ( ( Sum D18 ) + ( Sum D17 ) ) by L253 , L255 , RVSUM_1:75
.= ( Sum C52 ) by L254 , RVSUM_1:75;
end;
L265: S2[ ( 0 ) ]
proof
let C54 , C55 being (FinSequence of ( REAL ));
assume L266: (C54 , C55 are_fiberwise_equipotent  & ( len C54 ) = ( 0 ));
L267: (( len C55 ) = ( 0 ) & C54 = ( <*> ( REAL ) )) by L266 , L17;
L268: C55 = ( <*> ( REAL ) ) by L267;
thus L269: thesis by L268 , L267;
end;
L270: (for R3 being (Element of ( NAT )) holds S2[ R3 ]) from NAT_1:sch 1(L265 , L233);
thus L271: thesis by L270 , L231 , L232;
end;
definition
let C56 being (FinSequence of ( REAL ));
func MIM C56 -> (FinSequence of ( REAL )) means 
:L272: (( len it ) = ( len C56 ) & ( it . ( len it ) ) = ( C56 . ( len C56 ) ) & (for B44 being Nat holds ((1 <= B44 & B44 <= ( ( len it ) - 1 )) implies ( it . B44 ) = ( ( C56 . B44 ) - ( C56 . ( B44 + 1 ) ) ))));
existence
proof
per cases ;
suppose L273: ( len C56 ) = ( 0 );

take D21 = C56;
thus L274: (( len D21 ) = ( len C56 ) & ( D21 . ( len D21 ) ) = ( C56 . ( len C56 ) ));
let C57 being Nat;
assume L275: (1 <= C57 & C57 <= ( ( len D21 ) - 1 ));
thus L276: thesis by L275 , L273 , XXREAL_0:2;
end;
suppose L277: ( len C56 ) <> ( 0 );

L278: ( 0 ) < ( len C56 ) by L277 , NAT_1:3;
L279: ( (( 0 ) qua Nat) + 1 ) <= ( len C56 ) by L278 , NAT_1:13;
L280: ( max (( 0 ) , ( ( len C56 ) - 1 )) ) = ( ( len C56 ) - 1 ) by L279 , FINSEQ_2:4;
reconsider D22 = ( ( len C56 ) - 1 ) as (Element of ( NAT )) by L280 , FINSEQ_2:5;
defpred S3[ Nat , set ] means $2 = ( ( C56 . $1 ) - ( C56 . ( $1 + 1 ) ) );
set D23 = ( C56 . ( len C56 ) );
L281: (for B45 being Nat holds (B45 in ( Seg D22 ) implies (ex B46 being Real st S3[ B45 , B46 ])));
consider C58 being (FinSequence of ( REAL )) such that L282: (( dom C58 ) = ( Seg D22 ) & (for B47 being Nat holds (B47 in ( Seg D22 ) implies S3[ B47 , ( C58 . B47 ) ]))) from FINSEQ_1:sch 5(L281);
take D24 = ( C58 ^ <* D23 *> );
thus L283: ( len D24 ) = ( ( len C58 ) + ( len <* D23 *> ) ) by FINSEQ_1:22
.= ( D22 + ( len <* D23 *> ) ) by L282 , FINSEQ_1:def 3
.= ( D22 + 1 ) by FINSEQ_1:39
.= ( len C56 );
thus L284: ( D24 . ( len D24 ) ) = ( D24 . ( D22 + 1 ) ) by L283
.= ( D24 . ( ( len C58 ) + 1 ) ) by L282 , FINSEQ_1:def 3
.= ( C56 . ( len C56 ) ) by FINSEQ_1:42;
let C59 being Nat;
assume L285: (1 <= C59 & C59 <= ( ( len D24 ) - 1 ));
L286: C59 in ( Seg D22 ) by L285 , L283 , FINSEQ_1:1;
L287: ( C58 . C59 ) = ( ( C56 . C59 ) - ( C56 . ( C59 + 1 ) ) ) by L286 , L282;
thus L288: thesis by L287 , L282 , L286 , FINSEQ_1:def 7;
end;
end;
uniqueness
proof
let C60 , C61 being (FinSequence of ( REAL ));
assume that
L290: ( len C60 ) = ( len C56 )
and
L291: ( C60 . ( len C60 ) ) = ( C56 . ( len C56 ) )
and
L292: (for B48 being Nat holds ((1 <= B48 & B48 <= ( ( len C60 ) - 1 )) implies ( C60 . B48 ) = ( ( C56 . B48 ) - ( C56 . ( B48 + 1 ) ) )))
and
L293: ( len C61 ) = ( len C56 )
and
L294: ( C61 . ( len C61 ) ) = ( C56 . ( len C56 ) )
and
L295: (for B49 being Nat holds ((1 <= B49 & B49 <= ( ( len C61 ) - 1 )) implies ( C61 . B49 ) = ( ( C56 . B49 ) - ( C56 . ( B49 + 1 ) ) )));
L296: ( dom C60 ) = ( Seg ( len C56 ) ) by L290 , FINSEQ_1:def 3;
L297:
now
let C62 being Nat;
set D25 = ( C56 . C62 );
assume L298: C62 in ( dom C60 );
L299: 1 <= C62 by L298 , L296 , FINSEQ_1:1;
L300: C62 <= ( len C56 ) by L296 , L298 , FINSEQ_1:1;
L301:
now
per cases ;
case L302: C62 = ( len C56 );
thus L303: ( C60 . C62 ) = ( C61 . C62 ) by L302 , L290 , L291 , L293 , L294;
end;
case L304: C62 <> ( len C56 );
set D26 = ( C56 . ( C62 + 1 ) );
L305: C62 < ( len C56 ) by L300 , L304 , XXREAL_0:1;
L306: ( C62 + 1 ) <= ( len C56 ) by L305 , NAT_1:13;
L307: C62 <= ( ( len C56 ) - 1 ) by L306 , XREAL_1:19;
L308: ( C60 . C62 ) = ( D25 - D26 ) by L307 , L290 , L292 , L299;
thus L309: ( C60 . C62 ) = ( C61 . C62 ) by L308 , L293 , L295 , L299 , L307;
end;
end;
thus L311: ( C60 . C62 ) = ( C61 . C62 ) by L301;
end;
thus L312: thesis by L297 , L290 , L293 , FINSEQ_2:9;
end;
end;
theorem
L314: (for B50 being (FinSequence of ( REAL )) holds (for B51 being Real holds (for B52 being (Element of ( NAT )) holds ((( len B50 ) = ( B52 + 2 ) & ( B50 . ( B52 + 1 ) ) = B51) implies ( MIM ( B50 | ( B52 + 1 ) ) ) = ( ( ( MIM B50 ) | B52 ) ^ <* B51 *> )))))
proof
let C63 being (FinSequence of ( REAL ));
let R6 being Real;
let R3 being (Element of ( NAT ));
assume that
L315: ( len C63 ) = ( R3 + 2 )
and
L316: ( C63 . ( R3 + 1 ) ) = R6;
set D27 = ( C63 | ( R3 + 1 ) );
set D28 = ( MIM D27 );
set D29 = ( MIM C63 );
set D30 = ( D29 | R3 );
L317: ( 0 ) < ( R3 + 1 ) by NAT_1:3;
L318: ( (( 0 ) qua Nat) + 1 ) <= ( R3 + 1 ) by L317 , NAT_1:13;
L319: ( ( R3 + 1 ) + 1 ) = ( R3 + ( 1 + 1 ) );
L320: ( R3 + 1 ) <= ( R3 + 2 ) by L319 , NAT_1:11;
L321: (( Seg ( len C63 ) ) = ( dom C63 ) & ( R3 + 1 ) in ( Seg ( R3 + 2 ) )) by L320 , L318 , FINSEQ_1:1 , FINSEQ_1:def 3;
L322: ( len D27 ) = ( R3 + 1 ) by L315 , L319 , FINSEQ_1:59 , NAT_1:11;
L323: ( len ( MIM D27 ) ) = ( R3 + 1 ) by L322 , L272;
L324: ( dom D28 ) = ( Seg ( R3 + 1 ) ) by L323 , FINSEQ_1:def 3;
L325: ( R3 + 1 ) in ( Seg ( R3 + 1 ) ) by L318 , FINSEQ_1:1;
L326: ( D27 . ( R3 + 1 ) ) = R6 by L325 , L315 , L316 , L321 , L164;
L327: ( D28 . ( R3 + 1 ) ) = R6 by L326 , L322 , L323 , L272;
L328: ( Seg ( len D30 ) ) = ( dom D30 ) by FINSEQ_1:def 3;
L329: ( Seg ( len D29 ) ) = ( dom D29 ) by FINSEQ_1:def 3;
L330: ( len D29 ) = ( R3 + 2 ) by L315 , L272;
L331: ( len D30 ) = R3 by L330 , FINSEQ_1:59 , NAT_1:11;
L332: R3 <= ( R3 + 2 ) by NAT_1:11;
L333:
now
let C64 being Nat;
assume L334: C64 in ( dom D28 );
L335: 1 <= C64 by L334 , L324 , FINSEQ_1:1;
L336: C64 <= ( R3 + 1 ) by L324 , L334 , FINSEQ_1:1;
L337:
now
per cases ;
case L338: C64 = ( R3 + 1 );
thus L339: ( D28 . C64 ) = ( ( D30 ^ <* R6 *> ) . C64 ) by L338 , L331 , L327 , FINSEQ_1:42;
end;
case L340: C64 <> ( R3 + 1 );
L341: C64 < ( R3 + 1 ) by L340 , L336 , XXREAL_0:1;
L342: C64 <= R3 by L341 , NAT_1:13;
L343: C64 in ( Seg R3 ) by L342 , L335 , FINSEQ_1:1;
set D31 = ( C63 . ( C64 + 1 ) );
set D32 = ( C63 . C64 );
L344: ( ( len D29 ) - 1 ) = ( R3 + 1 ) by L330;
L345: 1 <= R3 by L335 , L342 , XXREAL_0:2;
L346: R3 in ( Seg ( R3 + 2 ) ) by L345 , L332 , FINSEQ_1:1;
L347: ( D30 . C64 ) = ( D29 . C64 ) by L346 , L330 , L329 , L343 , L164;
L348: ( D32 - D31 ) = ( D30 . C64 ) by L347 , L335 , L336 , L344 , L272
.= ( ( D30 ^ <* R6 *> ) . C64 ) by L331 , L328 , L343 , FINSEQ_1:def 7;
L349: (1 <= ( C64 + 1 ) & ( C64 + 1 ) <= ( R3 + 1 )) by L341 , NAT_1:11 , NAT_1:13;
L350: ( C64 + 1 ) in ( Seg ( R3 + 1 ) ) by L349 , FINSEQ_1:1;
L351: ( D27 . ( C64 + 1 ) ) = D31 by L350 , L315 , L321 , L164;
L352: (( ( len D28 ) - 1 ) = R3 & ( D27 . C64 ) = D32) by L315 , L323 , L321 , L324 , L334 , L164;
thus L353: ( D28 . C64 ) = ( ( D30 ^ <* R6 *> ) . C64 ) by L352 , L335 , L342 , L348 , L351 , L272;
end;
end;
thus L355: ( D28 . C64 ) = ( ( D30 ^ <* R6 *> ) . C64 ) by L337;
end;
L356: ( len ( D30 ^ <* R6 *> ) ) = ( R3 + ( len <* R6 *> ) ) by L331 , FINSEQ_1:22
.= ( R3 + 1 ) by FINSEQ_1:40;
thus L357: thesis by L356 , L323 , L333 , FINSEQ_2:9;
end;
theorem
L358: (for B53 being (FinSequence of ( REAL )) holds (for B54 , B55 being Real holds (for B56 being (Element of ( NAT )) holds ((( len B53 ) = ( B56 + 2 ) & ( B53 . ( B56 + 1 ) ) = B54 & ( B53 . ( B56 + 2 ) ) = B55) implies ( MIM B53 ) = ( ( ( MIM B53 ) | B56 ) ^ <* ( B54 - B55 ) , B55 *> )))))
proof
let C65 being (FinSequence of ( REAL ));
let R5 being Real;
let R6 being Real;
let R3 being (Element of ( NAT ));
set D33 = ( MIM C65 );
set D34 = ( D33 | R3 );
assume that
L359: ( len C65 ) = ( R3 + 2 )
and
L360: ( C65 . ( R3 + 1 ) ) = R5
and
L361: ( C65 . ( R3 + 2 ) ) = R6;
L362: ( len D33 ) = ( R3 + 2 ) by L359 , L272;
L363: ( dom D33 ) = ( Seg ( R3 + 2 ) ) by L362 , FINSEQ_1:def 3;
L364: ( R3 + ( 1 + 1 ) ) = ( ( R3 + 1 ) + 1 );
L365: ( R3 + 1 ) <= ( R3 + 2 ) by L364 , NAT_1:11;
L366: R3 < ( R3 + 2 ) by L365 , NAT_1:13;
L367: ( len D34 ) = R3 by L362 , FINSEQ_1:59 , NAT_1:11;
L368: ( len ( D34 ^ <* ( R5 - R6 ) , R6 *> ) ) = ( R3 + ( len <* ( R5 - R6 ) , R6 *> ) ) by L367 , FINSEQ_1:22;
L369: ( len ( D34 ^ <* ( R5 - R6 ) , R6 *> ) ) = ( R3 + 2 ) by L368 , FINSEQ_1:44;
L370: R3 <= ( R3 + 2 ) by NAT_1:11;
L371:
now
let C66 being Nat;
assume L372: C66 in ( dom D33 );
L373: 1 <= C66 by L372 , L363 , FINSEQ_1:1;
L374: C66 <= ( R3 + 2 ) by L363 , L372 , FINSEQ_1:1;
L375:
now
per cases ;
case L376: C66 = ( R3 + 2 );
thus L377: ( D33 . C66 ) = R6 by L376 , L359 , L361 , L362 , L272
.= ( <* ( R5 - R6 ) , R6 *> . ( ( R3 + 2 ) - R3 ) ) by FINSEQ_1:44
.= ( ( D34 ^ <* ( R5 - R6 ) , R6 *> ) . C66 ) by L367 , L369 , L366 , L376 , FINSEQ_1:24;
end;
case L378: C66 <> ( R3 + 2 );
L379: C66 < ( R3 + 2 ) by L378 , L374 , XXREAL_0:1;
L380: C66 <= ( R3 + 1 ) by L379 , L364 , NAT_1:13;
L381: ( ( len D33 ) - 1 ) = ( R3 + 1 ) by L362;
L382:
now
per cases ;
case L383: C66 = ( R3 + 1 );
L384: R3 < C66 by L383 , NAT_1:13;
thus L385: ( D33 . C66 ) = ( R5 - R6 ) by L360 , L361 , L364 , L373 , L381 , L383 , L272
.= ( <* ( R5 - R6 ) , R6 *> . ( ( R3 + 1 ) - R3 ) ) by FINSEQ_1:44
.= ( ( D34 ^ <* ( R5 - R6 ) , R6 *> ) . C66 ) by L367 , L369 , L374 , L383 , L384 , FINSEQ_1:24;
end;
case L386: C66 <> ( R3 + 1 );
L387: C66 < ( R3 + 1 ) by L386 , L380 , XXREAL_0:1;
L388: C66 <= R3 by L387 , NAT_1:13;
L389: C66 in ( Seg R3 ) by L388 , L373 , FINSEQ_1:1;
L390: 1 <= R3 by L373 , L388 , XXREAL_0:2;
L391: R3 in ( Seg ( R3 + 2 ) ) by L390 , L370 , FINSEQ_1:1;
L392: ( dom D34 ) = ( Seg ( len D34 ) ) by FINSEQ_1:def 3;
L393: ( dom D33 ) = ( Seg ( len D33 ) ) by FINSEQ_1:def 3;
thus L394: ( D33 . C66 ) = ( D34 . C66 ) by L393 , L362 , L389 , L391 , L164
.= ( ( D34 ^ <* ( R5 - R6 ) , R6 *> ) . C66 ) by L367 , L389 , L392 , FINSEQ_1:def 7;
end;
end;
thus L396: ( D33 . C66 ) = ( ( D34 ^ <* ( R5 - R6 ) , R6 *> ) . C66 ) by L382;
end;
end;
thus L398: ( D33 . C66 ) = ( ( D34 ^ <* ( R5 - R6 ) , R6 *> ) . C66 ) by L375;
end;
thus L399: thesis by L371 , L362 , L369 , FINSEQ_2:9;
end;
theorem
L400: ( MIM ( <*> ( REAL ) ) ) = ( <*> ( REAL ) )
proof
set D35 = ( <*> ( REAL ) );
set D36 = ( MIM D35 );
L401: ( len D36 ) = ( len D35 ) by L272;
thus L402: thesis by L401;
end;
theorem
L403: (for B57 being Real holds ( MIM <* B57 *> ) = <* B57 *>)
proof
let C67 being Real;
set D37 = <* C67 *>;
L404: ( len D37 ) = 1 by FINSEQ_1:40;
L405: ( len ( MIM D37 ) ) = 1 by L404 , L272;
L406: ( dom ( MIM D37 ) ) = ( Seg 1 ) by L405 , FINSEQ_1:def 3;
L407:
now
let C68 being Nat;
assume L408: C68 in ( dom ( MIM D37 ) );
L409: C68 = 1 by L408 , L406 , FINSEQ_1:2 , TARSKI:def 1;
thus L410: ( ( MIM D37 ) . C68 ) = ( D37 . C68 ) by L409 , L404 , L405 , L272;
end;
thus L411: thesis by L407 , L404 , L405 , FINSEQ_2:9;
end;
theorem
L412: (for B58 , B59 being Real holds ( MIM <* B58 , B59 *> ) = <* ( B58 - B59 ) , B59 *>)
proof
let C69 , C70 being Real;
set D38 = <* C69 , C70 *>;
L413: (( len D38 ) = 2 & ( D38 . 1 ) = C69) by FINSEQ_1:44;
L414: ( D38 . 2 ) = C70 by FINSEQ_1:44;
L415: (( (( 0 ) qua Nat) + 2 ) = 2 & ( (( 0 ) qua Nat) + 1 ) = 1);
L416: ( MIM D38 ) = ( ( ( MIM D38 ) | ( 0 ) ) ^ <* ( C69 - C70 ) , C70 *> ) by L415 , L413 , L414 , L358;
thus L417: thesis by L416 , FINSEQ_1:34;
end;
theorem
L418: (for B60 being (FinSequence of ( REAL )) holds (for B61 being (Element of ( NAT )) holds ( ( MIM B60 ) /^ B61 ) = ( MIM ( B60 /^ B61 ) )))
proof
let C71 being (FinSequence of ( REAL ));
let R3 being (Element of ( NAT ));
set D39 = ( MIM C71 );
set D40 = ( C71 /^ R3 );
set D41 = ( MIM D40 );
L419: ( len D39 ) = ( len C71 ) by L272;
L420: ( len D41 ) = ( len D40 ) by L272;
L421:
now
per cases ;
case L422: ( len C71 ) < R3;
L423: ( D39 /^ R3 ) = ( <*> ( REAL ) ) by L422 , L419 , L116;
thus L424: thesis by L423 , L422 , L116 , L400;
end;
case L425: R3 <= ( len C71 );
L426: ( len ( D39 /^ R3 ) ) = ( ( len C71 ) - R3 ) by L425 , L419 , L116;
L427: ( len D41 ) = ( len D40 ) by L272;
L428: ( dom D41 ) = ( Seg ( len D40 ) ) by L427 , FINSEQ_1:def 3;
L429: ( Seg ( len ( D39 /^ R3 ) ) ) = ( dom ( D39 /^ R3 ) ) by FINSEQ_1:def 3;
L430: ( len D40 ) = ( ( len C71 ) - R3 ) by L425 , L116;
L431: ( Seg ( len D40 ) ) = ( dom D40 ) by FINSEQ_1:def 3;
L432:
now
let C72 being Nat;
set D42 = ( C71 . ( C72 + R3 ) );
assume L433: C72 in ( dom D41 );
L434: 1 <= C72 by L433 , L428 , FINSEQ_1:1;
L435: C72 <= ( len D40 ) by L428 , L433 , FINSEQ_1:1;
L436: ( D40 . C72 ) = D42 by L425 , L431 , L428 , L433 , L116;
L437: C72 <= ( C72 + R3 ) by NAT_1:11;
L438: 1 <= ( C72 + R3 ) by L437 , L434 , XXREAL_0:2;
L439:
now
per cases ;
case L440: C72 = ( len D40 );
thus L441: ( ( D39 /^ R3 ) . C72 ) = ( D39 . ( C72 + R3 ) ) by L419 , L425 , L426 , L430 , L429 , L428 , L433 , L116
.= D42 by L419 , L430 , L440 , L272
.= ( D41 . C72 ) by L427 , L436 , L440 , L272;
end;
case L442: C72 <> ( len D40 );
L443: C72 < ( len D40 ) by L442 , L435 , XXREAL_0:1;
L444: ( C72 + 1 ) <= ( len D40 ) by L443 , NAT_1:13;
L445: C72 <= ( ( len D40 ) - 1 ) by L444 , XREAL_1:19;
set D43 = ( C71 . ( ( C72 + 1 ) + R3 ) );
L446: ( ( C72 + 1 ) + R3 ) = ( ( C72 + R3 ) + 1 );
L447: 1 <= ( C72 + 1 ) by NAT_1:11;
L448: ( C72 + 1 ) in ( dom D40 ) by L447 , L444 , FINSEQ_3:25;
L449: ( D40 . ( C72 + 1 ) ) = D43 by L448 , L425 , L116;
L450: ( ( C72 + 1 ) + R3 ) <= ( len C71 ) by L430 , L444 , XREAL_1:19;
L451: ( C72 + R3 ) <= ( ( len C71 ) - 1 ) by L450 , L446 , XREAL_1:19;
thus L452: ( ( D39 /^ R3 ) . C72 ) = ( D39 . ( C72 + R3 ) ) by L419 , L425 , L426 , L430 , L429 , L428 , L433 , L116
.= ( D42 - D43 ) by L419 , L438 , L446 , L451 , L272
.= ( D41 . C72 ) by L420 , L434 , L436 , L445 , L449 , L272;
end;
end;
thus L454: ( ( D39 /^ R3 ) . C72 ) = ( D41 . C72 ) by L439;
end;
thus L455: thesis by L432 , L426 , L430 , L427 , FINSEQ_2:9;
end;
end;
thus L457: thesis by L421;
end;
theorem
L458: (for B62 being (FinSequence of ( REAL )) holds (( len B62 ) <> ( 0 ) implies ( Sum ( MIM B62 ) ) = ( B62 . 1 )))
proof
defpred S4[ Nat ] means (for B63 being (FinSequence of ( REAL )) holds ((( len B63 ) <> ( 0 ) & ( len B63 ) = $1) implies ( Sum ( MIM B63 ) ) = ( B63 . 1 )));
let C73 being (FinSequence of ( REAL ));
assume L459: ( len C73 ) <> ( 0 );
L460: (for R3 being (Element of ( NAT )) holds (S4[ R3 ] implies S4[ ( R3 + 1 ) ]))
proof
let R3 being (Element of ( NAT ));
assume L461: S4[ R3 ];
let C74 being (FinSequence of ( REAL ));
assume that
L462: ( len C74 ) <> ( 0 )
and
L463: ( len C74 ) = ( R3 + 1 );
L464:
now
per cases ;
case L465: R3 = ( 0 );
L466: C74 = <* ( C74 . 1 ) *> by L465 , L463 , FINSEQ_1:40;
L467: ( MIM C74 ) = C74 by L466 , L403;
thus L468: thesis by L467 , L466 , FINSOP_1:11;
end;
case L469: R3 <> ( 0 );
L470: ( 0 ) < R3 by L469 , NAT_1:3;
L471: ( (( 0 ) qua Nat) + 1 ) <= R3 by L470 , NAT_1:13;
L472: ( max (( 0 ) , ( R3 - 1 )) ) = ( R3 - 1 ) by L471 , FINSEQ_2:4;
reconsider D44 = ( R3 - 1 ) as (Element of ( NAT )) by L472 , FINSEQ_2:5;
L473: ( (( 0 ) qua Nat) + 1 ) <= ( D44 + 1 ) by NAT_1:11;
L474: (( Seg ( len C74 ) ) = ( dom C74 ) & 1 in ( Seg ( D44 + 1 ) )) by L473 , FINSEQ_1:1 , FINSEQ_1:def 3;
L475: ( D44 + 2 ) = ( ( D44 + 1 ) + 1 );
L476: ( D44 + 1 ) <= ( D44 + 2 ) by L475 , NAT_1:11;
L477: ( D44 + 1 ) in ( Seg ( D44 + 2 ) ) by L476 , L473 , FINSEQ_1:1;
set D45 = ( C74 | ( D44 + 1 ) );
set D46 = ( C74 . ( D44 + 2 ) );
set D47 = ( C74 . ( D44 + 1 ) );
L478: ( D44 + 2 ) = ( len C74 ) by L463;
L479: ( len D45 ) = ( D44 + 1 ) by L463 , FINSEQ_1:59 , NAT_1:11;
thus L480: ( Sum ( MIM C74 ) ) = ( Sum ( ( ( MIM C74 ) | D44 ) ^ <* ( D47 - D46 ) , D46 *> ) ) by L463 , L358
.= ( ( Sum ( ( MIM C74 ) | D44 ) ) + ( Sum <* ( D47 - D46 ) , D46 *> ) ) by RVSUM_1:75
.= ( ( Sum ( ( MIM C74 ) | D44 ) ) + ( ( D47 - D46 ) + D46 ) ) by RVSUM_1:77
.= ( Sum ( ( ( MIM C74 ) | D44 ) ^ <* D47 *> ) ) by RVSUM_1:74
.= ( Sum ( MIM D45 ) ) by L478 , L314
.= ( D45 . 1 ) by L461 , L479
.= ( C74 . 1 ) by L463 , L477 , L474 , L164;
end;
end;
thus L482: thesis by L464;
end;
L483: S4[ ( 0 ) ];
L484: (for R3 being (Element of ( NAT )) holds S4[ R3 ]) from NAT_1:sch 1(L483 , L460);
thus L485: thesis by L484 , L459;
end;
theorem
L486: (for B64 being (FinSequence of ( REAL )) holds (for B65 being (Element of ( NAT )) holds (B65 < ( len B64 ) implies ( Sum ( MIM ( B64 /^ B65 ) ) ) = ( B64 . ( B65 + 1 ) ))))
proof
let C75 being (FinSequence of ( REAL ));
let R3 being (Element of ( NAT ));
assume L487: R3 < ( len C75 );
L488: ( len ( C75 /^ R3 ) ) = ( ( len C75 ) - R3 ) by L487 , L116;
L489: ( R3 + 1 ) <= ( len C75 ) by L487 , NAT_1:13;
L490: 1 <= ( ( len C75 ) - R3 ) by L489 , XREAL_1:19;
L491: 1 in ( dom ( C75 /^ R3 ) ) by L490 , L488 , FINSEQ_3:25;
L492: ( len ( C75 /^ R3 ) ) <> ( 0 ) by L487 , L488;
thus L493: ( Sum ( MIM ( C75 /^ R3 ) ) ) = ( ( C75 /^ R3 ) . 1 ) by L492 , L458
.= ( C75 . ( R3 + 1 ) ) by L487 , L491 , L116;
end;
definition
let C76 being (FinSequence of ( REAL ));
redefine attr C76 is  non-increasing
means
:L494: (for B66 being (Element of ( NAT )) holds ((B66 in ( dom C76 ) & ( B66 + 1 ) in ( dom C76 )) implies ( C76 . B66 ) >= ( C76 . ( B66 + 1 ) )));
compatibility
proof
thus L495: (C76 is  non-increasing implies (for B67 being (Element of ( NAT )) holds ((B67 in ( dom C76 ) & ( B67 + 1 ) in ( dom C76 )) implies ( C76 . B67 ) >= ( C76 . ( B67 + 1 ) ))))
proof
assume L496: C76 is  non-increasing;
let C77 being (Element of ( NAT ));
assume that
L497: (C77 in ( dom C76 ) & ( C77 + 1 ) in ( dom C76 ));
L498: ( C77 + (( 0 ) qua Nat) ) <= ( C77 + 1 ) by XREAL_1:6;
thus L499: thesis by L498 , L496 , L497 , SEQM_3:def 4;
end;

assume L500: (for B68 being (Element of ( NAT )) holds ((B68 in ( dom C76 ) & ( B68 + 1 ) in ( dom C76 )) implies ( C76 . B68 ) >= ( C76 . ( B68 + 1 ) )));
let R4 being (Element of ( NAT ));
let R3 being (Element of ( NAT ));
assume that
L501: R4 in ( dom C76 )
and
L502: (R3 in ( dom C76 ) & R4 <= R3);
defpred S5[ Nat ] means (($1 in ( dom C76 ) & R4 <= $1) implies ( C76 . R4 ) >= ( C76 . $1 ));
L503: (for B69 being (Element of ( NAT )) holds (S5[ B69 ] implies S5[ ( B69 + 1 ) ]))
proof
let C78 being (Element of ( NAT ));
assume that
L504: S5[ C78 ]
and
L505: ( C78 + 1 ) in ( dom C76 );
assume L506: R4 <= ( C78 + 1 );
L507: (R4 < ( C78 + 1 ) or R4 = ( C78 + 1 )) by L506 , XXREAL_0:1;
per cases  by L507 , NAT_1:13;
suppose L508: R4 <= C78;

L509: (( C78 + (( 0 ) qua Nat) ) <= ( C78 + 1 ) & ( C78 + 1 ) <= ( len C76 )) by L505 , FINSEQ_3:25 , XREAL_1:6;
L510: C78 <= ( len C76 ) by L509 , XXREAL_0:2;
L511: 1 <= R4 by L501 , FINSEQ_3:25;
L512: 1 <= C78 by L511 , L508 , XXREAL_0:2;
L513: C78 in ( dom C76 ) by L512 , L510 , FINSEQ_3:25;
L514: ( C76 . C78 ) >= ( C76 . ( C78 + 1 ) ) by L513 , L500 , L505;
thus L515: thesis by L514 , L504 , L508 , L512 , L510 , FINSEQ_3:25 , XXREAL_0:2;
end;
suppose L516: R4 = ( C78 + 1 );

thus L517: thesis by L516;
end;
end;
L519: S5[ ( 0 ) ] by FINSEQ_3:24;
L520: (for B70 being (Element of ( NAT )) holds S5[ B70 ]) from NAT_1:sch 1(L519 , L503);
thus L521: thesis by L520 , L502;
end;
end;
registration
cluster  non-increasing for (FinSequence of ( REAL ));
existence
proof
take ( <*> ( REAL ) );
let R3 being (Element of ( NAT ));
thus L523: thesis;
end;
end;
theorem
L525: (for B71 being (FinSequence of ( REAL )) holds ((( len B71 ) = ( 0 ) or ( len B71 ) = 1) implies B71 is  non-increasing))
proof
let C79 being (FinSequence of ( REAL ));
assume L526: (( len C79 ) = ( 0 ) or ( len C79 ) = 1);
L527:
now
per cases  by L526;
case L528: ( len C79 ) = ( 0 );
L529: C79 = ( <*> ( REAL ) ) by L528;
L530: (for R3 being (Element of ( NAT )) holds ((R3 in ( dom C79 ) & ( R3 + 1 ) in ( dom C79 )) implies ( C79 . R3 ) >= ( C79 . ( R3 + 1 ) ))) by L529;
thus L531: thesis by L530 , L494;
end;
case L532: ( len C79 ) = 1;
L533: ( dom C79 ) = { 1 } by L532 , FINSEQ_1:2 , FINSEQ_1:def 3;
L534:
now
let R3 being (Element of ( NAT ));
assume that
L535: R3 in ( dom C79 )
and
L536: ( R3 + 1 ) in ( dom C79 );
L537: R3 = 1 by L533 , L535 , TARSKI:def 1;
thus L538: ( C79 . R3 ) >= ( C79 . ( R3 + 1 ) ) by L537 , L533 , L536 , TARSKI:def 1;
end;
thus L539: thesis by L534 , L494;
end;
end;
thus L541: thesis by L527;
end;
theorem
L542: (for B72 being (FinSequence of ( REAL )) holds (B72 is  non-increasing iff (for B73 , B74 being (Element of ( NAT )) holds ((B73 in ( dom B72 ) & B74 in ( dom B72 ) & B73 < B74) implies ( B72 . B73 ) >= ( B72 . B74 )))))
proof
let C80 being (FinSequence of ( REAL ));
thus L543: (C80 is  non-increasing implies (for R3 being (Element of ( NAT )) holds (for R4 being (Element of ( NAT )) holds ((R3 in ( dom C80 ) & R4 in ( dom C80 ) & R3 < R4) implies ( C80 . R3 ) >= ( C80 . R4 )))))
proof
defpred S6[ Nat ] means ($1 in ( dom C80 ) implies (for R3 being (Element of ( NAT )) holds ((R3 in ( dom C80 ) & R3 < $1) implies ( C80 . R3 ) >= ( C80 . $1 ))));
assume L544: C80 is  non-increasing;
L545: (for R4 being (Element of ( NAT )) holds (S6[ R4 ] implies S6[ ( R4 + 1 ) ]))
proof
let R4 being (Element of ( NAT ));
assume L546: S6[ R4 ];
assume L547: ( R4 + 1 ) in ( dom C80 );
L548: ( R4 + 1 ) <= ( len C80 ) by L547 , FINSEQ_3:25;
L549: R4 <= ( len C80 ) by L548 , NAT_1:13;
let R3 being (Element of ( NAT ));
assume that
L550: R3 in ( dom C80 )
and
L551: R3 < ( R4 + 1 );
set D48 = ( C80 . R4 );
set D49 = ( C80 . R3 );
set D50 = ( C80 . ( R4 + 1 ) );
L552: R3 <= R4 by L551 , NAT_1:13;
L553: 1 <= R3 by L550 , FINSEQ_3:25;
L554: 1 <= R4 by L553 , L552 , XXREAL_0:2;
L555: R4 in ( dom C80 ) by L554 , L549 , FINSEQ_3:25;
L556:
now
per cases ;
case L557: R3 = R4;
thus L558: thesis by L557 , L544 , L547 , L550 , L494;
end;
case L559: R3 <> R4;
L560: R3 < R4 by L559 , L552 , XXREAL_0:1;
L561: D49 >= D48 by L560 , L546 , L550 , L554 , L549 , FINSEQ_3:25;
L562: D48 >= D50 by L544 , L547 , L555 , L494;
thus L563: thesis by L562 , L561 , XXREAL_0:2;
end;
end;
thus L565: thesis by L556;
end;
L566: ( Seg ( len C80 ) ) = ( dom C80 ) by FINSEQ_1:def 3;
L567: S6[ ( 0 ) ] by L566 , FINSEQ_1:1;
L568: (for R4 being (Element of ( NAT )) holds S6[ R4 ]) from NAT_1:sch 1(L567 , L545);
thus L569: thesis by L568;
end;

assume L570: (for R3 being (Element of ( NAT )) holds (for R4 being (Element of ( NAT )) holds ((R3 in ( dom C80 ) & R4 in ( dom C80 ) & R3 < R4) implies ( C80 . R3 ) >= ( C80 . R4 ))));
let R3 being (Element of ( NAT ));
L571: R3 < ( R3 + 1 ) by NAT_1:13;
assume L572: (R3 in ( dom C80 ) & ( R3 + 1 ) in ( dom C80 ));
thus L573: thesis by L572 , L570 , L571;
end;
theorem
L574: (for B75 being  non-increasing (FinSequence of ( REAL )) holds (for B76 being (Element of ( NAT )) holds ( B75 | B76 ) is  non-increasing  non-increasing  non-increasing  non-increasing (FinSequence of ( REAL ))))
proof
let C81 being  non-increasing (FinSequence of ( REAL ));
let R3 being (Element of ( NAT ));
set D51 = ( C81 | R3 );
L575:
now
per cases ;
case L576: R3 = ( 0 );
L577: ( len D51 ) = ( 0 ) by L576;
thus L578: thesis by L577 , L525;
end;
case L579: R3 <> ( 0 );
L580: ( 0 ) < R3 by L579 , NAT_1:3;
L581: ( (( 0 ) qua Nat) + 1 ) <= R3 by L580 , NAT_1:13;
L582:
now
per cases ;
case L583: ( len C81 ) <= R3;
thus L584: thesis by L583 , L159;
end;
case L585: R3 < ( len C81 );
L586: (R3 in ( dom C81 ) & ( len D51 ) = R3) by L585 , L581 , FINSEQ_1:59 , FINSEQ_3:25;
L587:
now
let R4 being (Element of ( NAT ));
L588: ( dom D51 ) = ( Seg ( len D51 ) ) by FINSEQ_1:def 3;
assume L589: (R4 in ( dom D51 ) & ( R4 + 1 ) in ( dom D51 ));
L590: (R4 in ( dom C81 ) & ( R4 + 1 ) in ( dom C81 )) by L589 , L586 , L588 , L164;
L591: (( C81 . R4 ) = ( D51 . R4 ) & ( C81 . ( R4 + 1 ) ) = ( D51 . ( R4 + 1 ) )) by L586 , L589 , L588 , L164;
thus L592: ( D51 . R4 ) >= ( D51 . ( R4 + 1 ) ) by L591 , L590 , L494;
end;
thus L593: thesis by L587 , L494;
end;
end;
thus L595: thesis by L582;
end;
end;
thus L597: thesis by L575;
end;
theorem
L598: (for B77 being  non-increasing (FinSequence of ( REAL )) holds (for B78 being (Element of ( NAT )) holds ( B77 /^ B78 ) is  non-increasing))
proof
let C82 being  non-increasing (FinSequence of ( REAL ));
let R3 being (Element of ( NAT ));
set D52 = ( C82 /^ R3 );
L599:
now
let R4 being (Element of ( NAT ));
assume that
L600: R4 in ( dom D52 )
and
L601: ( R4 + 1 ) in ( dom D52 );
L602: R4 <= ( R4 + R3 ) by NAT_1:11;
L603: 1 <= R4 by L600 , FINSEQ_3:25;
L604: 1 <= ( R4 + R3 ) by L603 , L602 , XXREAL_0:2;
L605: 1 <= ( ( R4 + R3 ) + 1 ) by NAT_1:11;
L606: ( R4 + 1 ) <= ( len D52 ) by L601 , FINSEQ_3:25;
set D53 = ( D52 . R4 );
set D54 = ( D52 . ( R4 + 1 ) );
L607: ( ( R4 + 1 ) + R3 ) = ( ( R4 + R3 ) + 1 );
L608: R4 <= ( len D52 ) by L600 , FINSEQ_3:25;
L609:
now
per cases ;
case L610: R3 <= ( len C82 );
L611: ( len D52 ) = ( ( len C82 ) - R3 ) by L610 , L116;
L612: ( R4 + R3 ) <= ( len C82 ) by L611 , L608 , XREAL_1:19;
L613: ( R4 + R3 ) in ( dom C82 ) by L612 , L604 , FINSEQ_3:25;
L614: ( ( R4 + R3 ) + 1 ) <= ( len C82 ) by L606 , L607 , L611 , XREAL_1:19;
L615: ( ( R4 + R3 ) + 1 ) in ( dom C82 ) by L614 , L605 , FINSEQ_3:25;
L616: (D53 = ( C82 . ( R4 + R3 ) ) & D54 = ( C82 . ( ( R4 + R3 ) + 1 ) )) by L600 , L601 , L607 , L610 , L116;
thus L617: D53 >= D54 by L616 , L613 , L615 , L494;
end;
case L618: ( len C82 ) < R3;
L619: D52 = ( <*> ( REAL ) ) by L618 , L116;
thus L620: D53 >= D54 by L619;
end;
end;
thus L622: D53 >= D54 by L609;
end;
thus L623: thesis by L599 , L494;
end;
L624: (for B79 , B80 being  non-increasing (FinSequence of ( REAL )) holds (for R3 being (Element of ( NAT )) holds ((( len B79 ) = ( R3 + 1 ) & ( len B79 ) = ( len B80 ) & B79 , B80 are_fiberwise_equipotent ) implies (( B79 . ( len B79 ) ) = ( B80 . ( len B80 ) ) & ( B79 | R3 ) , ( B80 | R3 ) are_fiberwise_equipotent ))))
proof
let C83 , C84 being  non-increasing (FinSequence of ( REAL ));
let R3 being (Element of ( NAT ));
assume that
L625: ( len C83 ) = ( R3 + 1 )
and
L626: ( len C83 ) = ( len C84 )
and
L627: C83 , C84 are_fiberwise_equipotent ;
set D55 = ( C83 . ( R3 + 1 ) );
set D56 = ( C84 . ( R3 + 1 ) );
L628: ( 0 ) < ( R3 + 1 ) by NAT_1:3;
L629: ( (( 0 ) qua Nat) + 1 ) <= ( R3 + 1 ) by L628 , NAT_1:13;
L630: ( R3 + 1 ) in ( dom C83 ) by L629 , L625 , FINSEQ_3:25;
L631: C83 = ( ( C83 | R3 ) ^ <* D55 *> ) by L625 , L172;
L632: ( R3 + 1 ) in ( dom C84 ) by L625 , L626 , L629 , FINSEQ_3:25;
L633:
now
L634: ( rng C83 ) = ( rng C84 ) by L627 , CLASSES1:75;
assume L635: D55 <> D56;
L636:
now
per cases  by L635 , XXREAL_0:1;
case L637: D55 > D56;
L638: D56 in ( rng C83 ) by L632 , L634 , FUNCT_1:def 3;
consider C85 being Nat such that L639: C85 in ( dom C83 ) and L640: ( C83 . C85 ) = D56 by L638 , FINSEQ_2:10;
L641: C85 <= ( len C83 ) by L639 , FINSEQ_3:25;
L642:
now
per cases ;
case L643: C85 = ( len C83 );
thus L644: contradiction by L643 , L625 , L637 , L640;
end;
case L645: C85 <> ( len C83 );
L646: C85 < ( R3 + 1 ) by L645 , L625 , L641 , XXREAL_0:1;
thus L647: contradiction by L646 , L630 , L637 , L639 , L640 , L542;
end;
end;
thus L649: contradiction by L642;
end;
case L650: D55 < D56;
L651: D55 in ( rng C84 ) by L630 , L634 , FUNCT_1:def 3;
consider C86 being Nat such that L652: C86 in ( dom C84 ) and L653: ( C84 . C86 ) = D55 by L651 , FINSEQ_2:10;
L654: C86 <= ( len C84 ) by L652 , FINSEQ_3:25;
L655:
now
per cases ;
case L656: C86 = ( len C84 );
thus L657: contradiction by L656 , L625 , L626 , L650 , L653;
end;
case L658: C86 <> ( len C84 );
L659: C86 < ( R3 + 1 ) by L658 , L625 , L626 , L654 , XXREAL_0:1;
thus L660: contradiction by L659 , L632 , L650 , L652 , L653 , L542;
end;
end;
thus L662: contradiction by L655;
end;
end;
thus L664: contradiction by L636;
end;
thus L665: ( C83 . ( len C83 ) ) = ( C84 . ( len C84 ) ) by L633 , L625 , L626;
L666: C84 = ( ( C84 | R3 ) ^ <* D55 *> ) by L625 , L626 , L633 , L172;
L667:
now
let R1 being set;
L668: ( ( card ( Coim (( C83 | R3 ) , R1) ) ) + ( card ( <* D55 *> " { R1 } ) ) ) = ( card ( Coim (C83 , R1) ) ) by L631 , FINSEQ_3:57
.= ( card ( Coim (C84 , R1) ) ) by L627 , CLASSES1:def 9
.= ( ( card ( Coim (( C84 | R3 ) , R1) ) ) + ( card ( <* D55 *> " { R1 } ) ) ) by L666 , FINSEQ_3:57;
thus L669: ( card ( Coim (( C83 | R3 ) , R1) ) ) = ( card ( Coim (( C84 | R3 ) , R1) ) ) by L668;
end;
thus L670: thesis by L667 , CLASSES1:def 9;
end;
defpred S7[ Nat ] means (for B81 being (FinSequence of ( REAL )) holds ($1 = ( len B81 ) implies (ex B82 being  non-increasing (FinSequence of ( REAL )) st B81 , B82 are_fiberwise_equipotent )));
L671: S7[ ( 0 ) ]
proof
let C87 being (FinSequence of ( REAL ));
assume L672: ( len C87 ) = ( 0 );
reconsider D57 = C87 as  non-increasing (FinSequence of ( REAL )) by L672 , L525;
take D57;
thus L673: thesis;
end;
L674: (for R3 being (Element of ( NAT )) holds (S7[ R3 ] implies S7[ ( R3 + 1 ) ]))
proof
let R3 being (Element of ( NAT ));
assume L675: S7[ R3 ];
let C88 being (FinSequence of ( REAL ));
set D58 = ( C88 | ( Seg R3 ) );
L676: D58 = ( C88 | R3 ) by FINSEQ_1:def 15;
set D59 = ( C88 . ( R3 + 1 ) );
reconsider D60 = D58 as FinSequence by FINSEQ_1:15;
L677: ( rng D60 ) c= ( rng C88 ) by RELAT_1:70;
L678: ( rng D60 ) c= ( REAL ) by L677 , XBOOLE_1:1;
reconsider D61 = D60 as (FinSequence of ( REAL )) by L678 , FINSEQ_1:def 4;
L679: R3 <= ( R3 + 1 ) by NAT_1:11;
L680: (( dom D61 ) = ( ( dom C88 ) /\ ( Seg R3 ) ) & ( Seg R3 ) c= ( Seg ( R3 + 1 ) )) by L679 , FINSEQ_1:5 , RELAT_1:61;
assume L681: ( R3 + 1 ) = ( len C88 );
L682: ( dom C88 ) = ( Seg ( R3 + 1 ) ) by L681 , FINSEQ_1:def 3;
L683: ( dom D61 ) = ( Seg R3 ) by L682 , L680 , XBOOLE_1:28;
L684: ( len D61 ) = R3 by L683 , FINSEQ_1:def 3;
consider C89 being  non-increasing (FinSequence of ( REAL )) such that L685: D61 , C89 are_fiberwise_equipotent  by L684 , L675;
L686: ( len D61 ) = ( len C89 ) by L685 , L17;
L687: ( Seg ( len C89 ) ) = ( dom C89 ) by FINSEQ_1:def 3;
L688:
now
per cases ;
case L689: (for B83 being Real holds (B83 in ( rng C89 ) implies D59 <= B83));
set D62 = ( C89 ^ <* D59 *> );
L690: ( len D62 ) = ( R3 + ( len <* D59 *> ) ) by L684 , L686 , FINSEQ_1:22
.= ( R3 + 1 ) by FINSEQ_1:39;
L691:
now
let R4 being (Element of ( NAT ));
assume that
L692: R4 in ( dom D62 )
and
L693: ( R4 + 1 ) in ( dom D62 );
L694: 1 <= ( R4 + 1 ) by L693 , FINSEQ_3:25;
set D63 = ( D62 . R4 );
set D64 = ( D62 . ( R4 + 1 ) );
L695: 1 <= R4 by L692 , FINSEQ_3:25;
L696: ( R4 + 1 ) <= ( len D62 ) by L693 , FINSEQ_3:25;
L697: R4 <= ( ( R3 + 1 ) - 1 ) by L696 , L690 , XREAL_1:19;
L698: R4 in ( Seg R3 ) by L697 , L695 , FINSEQ_1:1;
L699: R4 in ( dom C89 ) by L698 , L684 , L686 , FINSEQ_1:def 3;
L700: D63 = ( C89 . R4 ) by L699 , FINSEQ_1:def 7;
L701: ( C89 . R4 ) in ( rng C89 ) by L699 , FUNCT_1:def 3;
L702:
now
per cases ;
case L703: ( R4 + 1 ) = ( len D62 );
L704: D64 = D59 by L703 , L684 , L686 , L690 , FINSEQ_1:42;
thus L705: D63 >= D64 by L704 , L689 , L700 , L701;
end;
case L706: ( R4 + 1 ) <> ( len D62 );
L707: ( R4 + 1 ) < ( len D62 ) by L706 , L696 , XXREAL_0:1;
L708: ( R4 + 1 ) <= ( ( R3 + 1 ) - 1 ) by L707 , L690 , NAT_1:13;
L709: ( R4 + 1 ) in ( Seg R3 ) by L708 , L694 , FINSEQ_1:1;
L710: ( R4 + 1 ) in ( dom C89 ) by L709 , L684 , L686 , FINSEQ_1:def 3;
L711: ( C89 . ( R4 + 1 ) ) = D64 by L710 , FINSEQ_1:def 7;
thus L712: D63 >= D64 by L711 , L699 , L700 , L710 , L494;
end;
end;
thus L714: D63 >= D64 by L702;
end;
reconsider D65 = D62 as  non-increasing (FinSequence of ( REAL )) by L691 , L494;
take D66 = D65;
L715: ( D61 ^ <* D59 *> ) = C88 by L681 , L676 , L172;
thus L716: C88 , D66 are_fiberwise_equipotent  by L715 , L685 , L2;
end;
case L717: (ex B84 being Real st (B84 in ( rng C89 ) & (not D59 <= B84)));
defpred S8[ Nat ] means ($1 in ( dom C89 ) & (for R5 being Real holds (R5 = ( C89 . $1 ) implies R5 < D59)));
L718: (ex B85 being Nat st S8[ B85 ])
proof
consider C90 being Real such that L719: C90 in ( rng C89 ) and L720: C90 < D59 by L717;
consider C91 being Nat such that L721: C91 in ( dom C89 ) and L722: ( C89 . C91 ) = C90 by L719 , FINSEQ_2:10;
reconsider D67 = C91 as (Element of ( NAT )) by ORDINAL1:def 12;
take D67;
thus L723: D67 in ( dom C89 ) by L721;
let R5 being Real;
assume L724: R5 = ( C89 . D67 );
thus L725: thesis by L724 , L720 , L722;
end;
consider C92 being Nat such that L726: (S8[ C92 ] & (for B86 being Nat holds (S8[ B86 ] implies C92 <= B86))) from NAT_1:sch 5(L718);
L727: 1 <= C92 by L726 , FINSEQ_3:25;
L728: ( max (( 0 ) , ( C92 - 1 )) ) = ( C92 - 1 ) by L727 , FINSEQ_2:4;
reconsider D68 = ( C92 - 1 ) as (Element of ( NAT )) by L728 , FINSEQ_2:5;
L729: C92 < ( C92 + 1 ) by NAT_1:13;
L730: D68 <= C92 by L729 , XREAL_1:19;
L731: C92 <= ( len C89 ) by L726 , FINSEQ_3:25;
L732: D68 <= ( len C89 ) by L731 , L730 , XXREAL_0:2;
L733: ( len ( C89 /^ D68 ) ) = ( ( len C89 ) - D68 ) by L732 , L116;
L734: ( dom ( ( C89 | D68 ) ^ <* D59 *> ) ) = ( Seg ( len ( ( C89 | D68 ) ^ <* D59 *> ) ) ) by FINSEQ_1:def 3;
L735: ( dom ( C89 | D68 ) ) c= ( dom ( ( C89 | D68 ) ^ <* D59 *> ) ) by FINSEQ_1:26;
set D69 = ( C89 /^ D68 );
set D70 = ( ( ( C89 | D68 ) ^ <* D59 *> ) ^ D69 );
L736: ( dom ( C89 | D68 ) ) = ( Seg ( len ( C89 | D68 ) ) ) by FINSEQ_1:def 3;
L737: ( len ( C89 | D68 ) ) = D68 by L731 , L730 , FINSEQ_1:59 , XXREAL_0:2;
L738: ( len ( ( C89 | D68 ) ^ <* D59 *> ) ) = ( D68 + ( len <* D59 *> ) ) by L737 , FINSEQ_1:22
.= ( D68 + 1 ) by FINSEQ_1:39;
L739: ( len D70 ) = ( ( D68 + 1 ) + ( len ( C89 /^ D68 ) ) ) by L738 , FINSEQ_1:22;
L740: ( D68 + 1 ) <= ( len C89 ) by L726 , FINSEQ_3:25;
L741: 1 <= ( len ( C89 /^ D68 ) ) by L740 , L733 , XREAL_1:19;
L742:
now
let R4 being (Element of ( NAT ));
assume that
L743: R4 in ( dom D70 )
and
L744: ( R4 + 1 ) in ( dom D70 );
L745: 1 <= ( R4 + 1 ) by L744 , FINSEQ_3:25;
L746: ( R4 + 1 ) <= ( len D70 ) by L744 , FINSEQ_3:25;
set D71 = ( D70 . R4 );
set D72 = ( D70 . ( R4 + 1 ) );
L747: 1 <= R4 by L743 , FINSEQ_3:25;
L748: R4 <= ( len D70 ) by L743 , FINSEQ_3:25;
L749:
now
per cases ;
case L750: ( R4 + 1 ) <= D68;
L751: ( dom ( C89 | D68 ) ) c= ( dom ( ( C89 | D68 ) ^ ( C89 /^ D68 ) ) ) by FINSEQ_1:26;
L752: ( dom ( C89 | D68 ) ) c= ( dom C89 ) by L751 , L197;
L753: ( dom C89 ) = ( Seg ( len C89 ) ) by FINSEQ_1:def 3;
L754: R4 <= D68 by L750 , NAT_1:13;
L755: R4 in ( Seg D68 ) by L754 , L747 , FINSEQ_1:1;
L756: 1 <= D68 by L745 , L750 , XXREAL_0:2;
L757: D68 in ( dom C89 ) by L756 , L732 , L753 , FINSEQ_1:1;
L758: ( C89 . R4 ) = ( ( C89 | D68 ) . R4 ) by L757 , L755 , L164;
L759: ( R4 + 1 ) in ( Seg D68 ) by L745 , L750 , FINSEQ_1:1;
L760: ( C89 . ( R4 + 1 ) ) = ( ( C89 | D68 ) . ( R4 + 1 ) ) by L759 , L757 , L164;
L761: ( D70 . ( R4 + 1 ) ) = ( ( ( C89 | D68 ) ^ <* D59 *> ) . ( R4 + 1 ) ) by L737 , L736 , L735 , L759 , FINSEQ_1:def 7
.= ( C89 . ( R4 + 1 ) ) by L737 , L736 , L759 , L760 , FINSEQ_1:def 7;
L762: ( D70 . R4 ) = ( ( ( C89 | D68 ) ^ <* D59 *> ) . R4 ) by L737 , L736 , L735 , L755 , FINSEQ_1:def 7
.= ( C89 . R4 ) by L737 , L736 , L755 , L758 , FINSEQ_1:def 7;
thus L763: D71 >= D72 by L762 , L737 , L736 , L755 , L759 , L761 , L752 , L494;
end;
case L764: D68 < ( R4 + 1 );
L765: D68 <= R4 by L764 , NAT_1:13;
L766:
now
per cases ;
case L767: D68 = R4;
L768: ( R4 + 1 ) in ( dom ( ( C89 | D68 ) ^ <* D59 *> ) ) by L767 , L738 , L734 , FINSEQ_1:4;
L769: ( D70 . ( R4 + 1 ) ) = ( ( ( C89 | D68 ) ^ <* D59 *> ) . ( D68 + 1 ) ) by L768 , L767 , FINSEQ_1:def 7
.= D59 by L737 , FINSEQ_1:42;
L770: R4 in ( Seg D68 ) by L747 , L767 , FINSEQ_1:1;
L771: D68 in ( dom C89 ) by L687 , L732 , L747 , L767 , FINSEQ_1:1;
L772: ( C89 . R4 ) = ( ( C89 | D68 ) . R4 ) by L771 , L770 , L164;
L773: ( D70 . R4 ) = ( ( ( C89 | D68 ) ^ <* D59 *> ) . R4 ) by L737 , L736 , L735 , L770 , FINSEQ_1:def 7
.= ( C89 . R4 ) by L737 , L736 , L770 , L772 , FINSEQ_1:def 7;
L774:
now
assume L775: D72 > D71;
L776: (for B87 being Real holds (B87 = ( C89 . D68 ) implies B87 < D59)) by L775 , L767 , L773 , L769;
L777: C92 <= D68 by L776 , L726 , L771;
thus L778: contradiction by L777 , XREAL_1:44;
end;
thus L779: D71 >= D72 by L774;
end;
case L780: D68 <> R4;
L781: D68 < R4 by L780 , L765 , XXREAL_0:1;
L782: ( D68 + 1 ) <= R4 by L781 , NAT_1:13;
L783: ( D68 + 1 ) < ( R4 + 1 ) by L782 , NAT_1:13;
L784: ( max (( 0 ) , ( R4 - ( D68 + 1 ) )) ) = ( R4 - ( D68 + 1 ) ) by L782 , FINSEQ_2:4;
reconsider D73 = ( R4 - ( D68 + 1 ) ) as (Element of ( NAT )) by L784 , FINSEQ_2:5;
L785: ( D73 + 1 ) = ( ( R4 + 1 ) - ( D68 + 1 ) );
L786: ( D73 + 1 ) <= ( ( len D70 ) - ( D68 + 1 ) ) by L785 , L746 , XREAL_1:13;
L787: D73 <= ( D73 + 1 ) by NAT_1:11;
L788: D73 <= ( len ( C89 /^ D68 ) ) by L787 , L739 , L786 , XXREAL_0:2;
L789: 1 <= ( D73 + 1 ) by NAT_1:11;
L790: ( D73 + 1 ) in ( dom ( C89 /^ D68 ) ) by L789 , L739 , L786 , FINSEQ_3:25;
L791: 1 <= ( ( D73 + 1 ) + D68 ) by L743 , FINSEQ_3:25;
L792: ( ( D68 + D73 ) + 1 ) <= ( len C89 ) by L791 , L733 , L739 , L786 , XREAL_1:19;
L793: ( ( D68 + D73 ) + 1 ) in ( dom C89 ) by L792 , L747 , FINSEQ_3:25;
L794: ( D68 + D73 ) <= ( ( D68 + D73 ) + 1 ) by NAT_1:11;
L795: ( D68 + D73 ) <= ( len C89 ) by L794 , L792 , XXREAL_0:2;
L796: ( D68 + ( D73 + 1 ) ) <= ( len C89 ) by L733 , L739 , L786 , XREAL_1:19;
L797:
now
per cases ;
case L798: ( D68 + 1 ) = R4;
L799: R4 in ( Seg ( D68 + 1 ) ) by L798 , L747 , FINSEQ_1:1;
L800: ( D70 . R4 ) = ( ( ( C89 | D68 ) ^ <* D59 *> ) . ( D68 + 1 ) ) by L799 , L738 , L734 , L798 , FINSEQ_1:def 7
.= D59 by L737 , FINSEQ_1:42;
L801: 1 in ( dom ( C89 /^ D68 ) ) by L741 , FINSEQ_3:25;
L802: ( D70 . ( R4 + 1 ) ) = ( ( C89 /^ D68 ) . ( ( ( D68 + 1 ) + 1 ) - ( D68 + 1 ) ) ) by L738 , L746 , L783 , L798 , FINSEQ_1:24
.= ( C89 . C92 ) by L732 , L801 , L116;
thus L803: D71 >= D72 by L802 , L726 , L800;
end;
case L804: ( D68 + 1 ) <> R4;
L805: ( D68 + 1 ) < R4 by L804 , L782 , XXREAL_0:1;
L806: ( ( D68 + 1 ) + 1 ) <= R4 by L805 , NAT_1:13;
L807: 1 <= D73 by L806 , XREAL_1:19;
L808: D73 in ( dom ( C89 /^ D68 ) ) by L807 , L788 , FINSEQ_3:25;
L809: D73 <= ( D68 + D73 ) by NAT_1:11;
L810: 1 <= ( D68 + D73 ) by L809 , L807 , XXREAL_0:2;
L811: ( D68 + D73 ) in ( dom C89 ) by L810 , L795 , FINSEQ_3:25;
L812: ( D70 . R4 ) = ( ( C89 /^ D68 ) . D73 ) by L738 , L748 , L805 , FINSEQ_1:24
.= ( C89 . ( D68 + D73 ) ) by L732 , L808 , L116;
L813: ( D70 . ( R4 + 1 ) ) = ( ( C89 /^ D68 ) . ( D73 + 1 ) ) by L738 , L746 , L783 , L785 , FINSEQ_1:24
.= ( C89 . ( ( D68 + D73 ) + 1 ) ) by L732 , L790 , L796 , L116;
thus L814: D71 >= D72 by L813 , L793 , L812 , L811 , L494;
end;
end;
thus L816: D71 >= D72 by L797;
end;
end;
thus L818: D71 >= D72 by L766;
end;
end;
thus L820: D71 >= D72 by L749;
end;
reconsider D74 = D70 as  non-increasing (FinSequence of ( REAL )) by L742 , L494;
take D75 = D74;
L821:
now
let R1 being set;
L822: ( card ( Coim (D61 , R1) ) ) = ( card ( Coim (C89 , R1) ) ) by L685 , CLASSES1:def 9;
thus L823: ( card ( Coim (D75 , R1) ) ) = ( ( card ( ( ( C89 | D68 ) ^ <* D59 *> ) " { R1 } ) ) + ( card ( D69 " { R1 } ) ) ) by FINSEQ_3:57
.= ( ( ( card ( ( C89 | D68 ) " { R1 } ) ) + ( card ( <* D59 *> " { R1 } ) ) ) + ( card ( D69 " { R1 } ) ) ) by FINSEQ_3:57
.= ( ( ( card ( ( C89 | D68 ) " { R1 } ) ) + ( card ( D69 " { R1 } ) ) ) + ( card ( <* D59 *> " { R1 } ) ) )
.= ( ( card ( ( ( C89 | D68 ) ^ D69 ) " { R1 } ) ) + ( card ( <* D59 *> " { R1 } ) ) ) by FINSEQ_3:57
.= ( ( card ( D61 " { R1 } ) ) + ( card ( <* D59 *> " { R1 } ) ) ) by L822 , L197
.= ( card ( ( D61 ^ <* D59 *> ) " { R1 } ) ) by FINSEQ_3:57
.= ( card ( Coim (C88 , R1) ) ) by L681 , L676 , L172;
end;
thus L824: C88 , D75 are_fiberwise_equipotent  by L821 , CLASSES1:def 9;
end;
end;
thus L826: thesis by L688;
end;
theorem
L827: (for B88 being (FinSequence of ( REAL )) holds (ex B89 being  non-increasing (FinSequence of ( REAL )) st B88 , B89 are_fiberwise_equipotent ))
proof
let C93 being (FinSequence of ( REAL ));
L828: ( len C93 ) = ( len C93 );
L829: (for R3 being (Element of ( NAT )) holds S7[ R3 ]) from NAT_1:sch 1(L671 , L674);
thus L830: thesis by L829 , L828;
end;
L831: (for R3 being (Element of ( NAT )) holds (for B90 , B91 being  non-increasing (FinSequence of ( REAL )) holds ((R3 = ( len B90 ) & B90 , B91 are_fiberwise_equipotent ) implies B90 = B91)))
proof
defpred S9[ Nat ] means (for B92 , B93 being  non-increasing (FinSequence of ( REAL )) holds (($1 = ( len B92 ) & B92 , B93 are_fiberwise_equipotent ) implies B92 = B93));
L832: (for R3 being (Element of ( NAT )) holds (S9[ R3 ] implies S9[ ( R3 + 1 ) ]))
proof
let R3 being (Element of ( NAT ));
assume L833: S9[ R3 ];
let C94 , C95 being  non-increasing (FinSequence of ( REAL ));
set D76 = ( C94 . ( R3 + 1 ) );
reconsider D77 = ( C94 | R3 ) , D78 = ( C95 | R3 ) as  non-increasing (FinSequence of ( REAL )) by L574;
assume that
L834: ( len C94 ) = ( R3 + 1 )
and
L835: C94 , C95 are_fiberwise_equipotent ;
L836: ( len C95 ) = ( len C94 ) by L835 , L17;
L837: ( C94 . ( len C94 ) ) = ( C95 . ( len C95 ) ) by L836 , L834 , L835 , L624;
L838: ( ( C94 | R3 ) ^ <* D76 *> ) = C94 by L834 , L172;
L839: ( len ( C94 | R3 ) ) = R3 by L834 , FINSEQ_1:59 , NAT_1:11;
L840: D77 = D78 by L839 , L833 , L834 , L835 , L836 , L624;
thus L841: thesis by L840 , L834 , L836 , L837 , L838 , L172;
end;
L842: S9[ ( 0 ) ]
proof
let C96 , C97 being  non-increasing (FinSequence of ( REAL ));
assume L843: (( len C96 ) = ( 0 ) & C96 , C97 are_fiberwise_equipotent );
L844: (( len C97 ) = ( len C96 ) & C96 = ( <*> ( REAL ) )) by L843 , L17;
thus L845: thesis by L844;
end;
thus L846: (for R3 being (Element of ( NAT )) holds S9[ R3 ]) from NAT_1:sch 1(L842 , L832);
end;
theorem
L847: (for B94 , B95 being  non-increasing (FinSequence of ( REAL )) holds (B94 , B95 are_fiberwise_equipotent  implies B94 = B95))
proof
let C98 , C99 being  non-increasing (FinSequence of ( REAL ));
L848: ( len C98 ) = ( len C98 );
assume L849: C98 , C99 are_fiberwise_equipotent ;
thus L850: thesis by L849 , L848 , L831;
end;
theorem
L851: (for B96 being (FinSequence of ( REAL )) holds (for B97 , B98 being Real holds (B97 <> ( 0 ) implies ( B96 " { ( B98 / B97 ) } ) = ( ( B97 * B96 ) " { B98 } ))))
proof
let C100 being (FinSequence of ( REAL ));
let R5 being Real;
let R6 being Real;
L852: (( Seg ( len C100 ) ) = ( dom C100 ) & ( dom ( R5 * C100 ) ) = ( Seg ( len ( R5 * C100 ) ) )) by FINSEQ_1:def 3;
assume L853: R5 <> ( 0 );
thus L854: ( C100 " { ( R6 / R5 ) } ) c= ( ( R5 * C100 ) " { R6 } )
proof
let R1 being set;
assume L855: R1 in ( C100 " { ( R6 / R5 ) } );
reconsider D79 = R1 as (Element of ( NAT )) by L855;
L856: ( C100 . D79 ) in { ( R6 / R5 ) } by L855 , FUNCT_1:def 7;
L857: ( C100 . D79 ) = ( R6 / R5 ) by L856 , TARSKI:def 1;
L858: ( R5 * ( C100 . D79 ) ) = R6 by L857 , L853 , XCMPLX_1:87;
L859: ( ( R5 * C100 ) . D79 ) = R6 by L858 , RVSUM_1:44;
L860: ( ( R5 * C100 ) . D79 ) in { R6 } by L859 , TARSKI:def 1;
L861: D79 in ( dom C100 ) by L855 , FUNCT_1:def 7;
L862: D79 in ( dom ( R5 * C100 ) ) by L861 , L852 , FINSEQ_2:33;
thus L863: thesis by L862 , L860 , FUNCT_1:def 7;
end;

let R1 being set;
assume L864: R1 in ( ( R5 * C100 ) " { R6 } );
reconsider D80 = R1 as (Element of ( NAT )) by L864;
L865: ( ( R5 * C100 ) . D80 ) in { R6 } by L864 , FUNCT_1:def 7;
L866: ( ( R5 * C100 ) . D80 ) = R6 by L865 , TARSKI:def 1;
L867: ( R5 * ( C100 . D80 ) ) = R6 by L866 , RVSUM_1:44;
L868: ( C100 . D80 ) = ( R6 / R5 ) by L867 , L853 , XCMPLX_1:89;
L869: ( C100 . D80 ) in { ( R6 / R5 ) } by L868 , TARSKI:def 1;
L870: D80 in ( dom ( R5 * C100 ) ) by L864 , FUNCT_1:def 7;
L871: D80 in ( dom C100 ) by L870 , L852 , FINSEQ_2:33;
thus L872: thesis by L871 , L869 , FUNCT_1:def 7;
end;
theorem
L873: (for B99 being (FinSequence of ( REAL )) holds ( ( ( 0 ) * B99 ) " { ( 0 ) } ) = ( dom B99 ))
proof
let C101 being (FinSequence of ( REAL ));
L874: ( Seg ( len ( ( 0 ) * C101 ) ) ) = ( dom ( ( 0 ) * C101 ) ) by FINSEQ_1:def 3;
L875: (( len ( ( 0 ) * C101 ) ) = ( len C101 ) & ( dom C101 ) = ( Seg ( len C101 ) )) by FINSEQ_1:def 3 , FINSEQ_2:33;
thus L876: ( ( ( 0 ) * C101 ) " { ( 0 ) } ) c= ( dom C101 ) by L875 , L874 , RELAT_1:132;
let R1 being set;
assume L877: R1 in ( dom C101 );
reconsider D81 = R1 as (Element of ( NAT )) by L877;
L878: ( ( ( 0 ) * C101 ) . D81 ) = ( ( 0 ) * ( C101 . D81 ) ) by RVSUM_1:44
.= ( 0 );
L879: ( ( ( 0 ) * C101 ) . D81 ) in { ( 0 ) } by L878 , TARSKI:def 1;
thus L880: thesis by L879 , L875 , L874 , L877 , FUNCT_1:def 7;
end;
begin
theorem
L881: (for R7 being Function holds (for R8 being Function holds ((( rng R7 ) = ( rng R8 ) & R7 is  one-to-one & R8 is  one-to-one) implies R7 , R8 are_fiberwise_equipotent )))
proof
let C102 , C103 being Function;
assume that
L882: ( rng C102 ) = ( rng C103 )
and
L883: C102 is  one-to-one
and
L884: C103 is  one-to-one;
let R1 being set;
per cases ;
suppose L885: R1 in ( rng C102 );

L886: ( card ( Coim (C102 , R1) ) ) = 1 by L885 , L883 , FINSEQ_4:73;
thus L887: thesis by L886 , L882 , L884 , L885 , FINSEQ_4:73;
end;
suppose L888: (not R1 in ( rng C102 ));

L889: ( card ( C102 " { R1 } ) ) = ( 0 ) by L888 , CARD_1:27 , FUNCT_1:72;
thus L890: thesis by L889 , L882 , L888 , CARD_1:27 , FUNCT_1:72;
end;
end;
theorem
L892: (for B100 being set holds (for B101 being (FinSequence of B100) holds ( B101 /^ ( len B101 ) ) = ( {} )))
proof
let C104 being set;
let C105 being (FinSequence of C104);
L893: ( len ( C105 /^ ( len C105 ) ) ) = ( ( len C105 ) - ( len C105 ) ) by L116
.= ( 0 );
thus L894: thesis by L893;
end;
theorem
L895: (for B102 , B103 being Function holds (for B104 , B105 being set holds ((( B102 . B104 ) = ( B103 . B105 ) & ( B102 . B105 ) = ( B103 . B104 ) & B104 in ( dom B102 ) & B105 in ( dom B102 ) & ( dom B102 ) = ( dom B103 ) & (for B106 being set holds ((B106 <> B104 & B106 <> B105 & B106 in ( dom B102 )) implies ( B102 . B106 ) = ( B103 . B106 )))) implies B102 , B103 are_fiberwise_equipotent )))
proof
let C106 , C107 being Function;
let C108 , C109 being set;
assume that
L896: ( C106 . C108 ) = ( C107 . C109 )
and
L897: ( C106 . C109 ) = ( C107 . C108 )
and
L898: C108 in ( dom C106 )
and
L899: C109 in ( dom C106 )
and
L900: ( dom C106 ) = ( dom C107 )
and
L901: (for B107 being set holds ((B107 <> C108 & B107 <> C109 & B107 in ( dom C106 )) implies ( C106 . B107 ) = ( C107 . B107 )));
set D82 = ( id ( dom C106 ) );
set D83 = ( C109 .--> C108 );
set D84 = ( C108 .--> C109 );
set D85 = ( ( D82 +* D83 ) +* D84 );
L902: ( dom D83 ) = { C109 } by FUNCOP_1:13;
L903: ( dom D82 ) = ( dom C106 );
L904: ( rng D82 ) = ( dom ( D82 " ) ) by FUNCT_1:33
.= ( dom C106 ) by L903 , FUNCT_1:45;
L905: ( dom D84 ) = { C108 } by FUNCOP_1:13;
L906: ( dom D85 ) = ( ( dom ( D82 +* D83 ) ) \/ { C108 } ) by L905 , FUNCT_4:def 1
.= ( ( ( dom D82 ) \/ { C109 } ) \/ { C108 } ) by L902 , FUNCT_4:def 1
.= ( ( ( dom C106 ) \/ { C109 } ) \/ { C108 } )
.= ( ( dom C106 ) \/ { C108 } ) by L899 , ZFMISC_1:40
.= ( dom C106 ) by L898 , ZFMISC_1:40;
L907:
now
let C110 being set;
assume L908: C110 in ( dom C106 );
L909: ( ( D85 * D85 ) . C110 ) = ( D85 . ( D85 . C110 ) ) by L908 , L906 , FUNCT_1:13;
per cases ;
suppose L910: C110 = C108;

thus L911: ( ( D85 * D85 ) . C110 ) = ( D85 . C109 ) by L910 , L909 , FUNCT_4:89
.= C110 by L910 , FUNCT_4:90;
end;
suppose L912: C110 <> C108;

L913:
now
per cases ;
suppose L914: C110 = C109;

thus L915: ( ( D85 * D85 ) . C110 ) = ( D85 . C108 ) by L914 , L909 , FUNCT_4:90
.= C110 by L914 , FUNCT_4:89;
end;
suppose L916: C110 <> C109;

thus L917: ( ( D85 * D85 ) . C110 ) = ( D85 . ( D82 . C110 ) ) by L916 , L909 , L912 , FUNCT_4:91
.= ( D85 . C110 ) by L908 , FUNCT_1:17
.= ( D82 . C110 ) by L912 , L916 , FUNCT_4:91
.= C110 by L908 , FUNCT_1:17;
end;
end;
thus L919: ( ( D85 * D85 ) . C110 ) = C110 by L913;
end;
end;
L921: ( rng D83 ) = { C108 } by FUNCOP_1:8;
L922: ( ( rng D82 ) \/ ( rng D83 ) ) = ( dom C106 ) by L921 , L898 , ZFMISC_1:40;
L923: ( ( rng ( D82 +* D83 ) ) \/ ( rng D84 ) ) c= ( ( dom C106 ) \/ ( rng D84 ) ) by L922 , FUNCT_4:17 , XBOOLE_1:9;
L924: (for B108 being set holds (B108 in ( rng ( D85 * D85 ) ) implies B108 in ( rng D85 ))) by FUNCT_1:14;
L925: ( rng ( D85 * D85 ) ) c= ( rng D85 ) by L924 , TARSKI:def 3;
L926: ( rng D85 ) c= ( ( rng ( D82 +* D83 ) ) \/ ( rng D84 ) ) by FUNCT_4:17;
L927: ( rng D84 ) = { C109 } by FUNCOP_1:8;
L928: ( ( dom C106 ) \/ ( rng D84 ) ) = ( dom D85 ) by L927 , L899 , L906 , ZFMISC_1:40;
L929: ( dom ( D85 * D85 ) ) = ( dom C106 ) by L928 , L906 , L923 , L926 , RELAT_1:27 , XBOOLE_1:1;
L930: ( D85 * D85 ) = D82 by L929 , L907 , FUNCT_1:17;
L931: D85 is  one-to-one by L930 , L906 , FUNCT_1:31;
L932: ( rng D85 ) c= ( ( dom C106 ) \/ ( rng D84 ) ) by L923 , L926 , XBOOLE_1:1;
L933: ( rng D85 ) c= ( dom D85 ) by L932 , L899 , L906 , L927 , ZFMISC_1:40;
L934: ( dom ( C107 * D85 ) ) = ( dom C106 ) by L933 , L900 , L906 , RELAT_1:27;
L935:
now
let C111 being set;
assume L936: C111 in ( dom C106 );
L937: ( ( C107 * D85 ) . C111 ) = ( C107 . ( D85 . C111 ) ) by L936 , L934 , FUNCT_1:12;
per cases ;
suppose L938: C111 = C108;

thus L939: ( ( C107 * D85 ) . C111 ) = ( C106 . C111 ) by L938 , L896 , L937 , FUNCT_4:89;
end;
suppose L940: C111 <> C108;

L941:
now
per cases ;
suppose L942: C111 = C109;

thus L943: ( ( C107 * D85 ) . C111 ) = ( C106 . C111 ) by L942 , L897 , L937 , FUNCT_4:90;
end;
suppose L944: C111 <> C109;

thus L945: ( ( C107 * D85 ) . C111 ) = ( C107 . ( D82 . C111 ) ) by L944 , L937 , L940 , FUNCT_4:91
.= ( C107 . C111 ) by L936 , FUNCT_1:17
.= ( C106 . C111 ) by L901 , L936 , L940 , L944;
end;
end;
thus L947: ( ( C107 * D85 ) . C111 ) = ( C106 . C111 ) by L941;
end;
end;
L949: C106 = ( C107 * D85 ) by L935 , L934 , FUNCT_1:2;
L950: ( rng ( D85 * D85 ) ) = ( dom C106 ) by L904 , L929 , L907 , FUNCT_1:17;
L951: ( rng D85 ) = ( dom C107 ) by L950 , L900 , L906 , L933 , L925 , XBOOLE_0:def 10;
thus L952: thesis by L951 , L906 , L931 , L949 , CLASSES1:77;
end;
theorem
L953: (for B109 being non  empty set holds (for B110 being (FinSequence of B109) holds (for B111 being Nat holds ( len ( B110 /^ B111 ) ) = ( ( len B110 ) -' B111 ))))
proof
let C112 being non  empty set;
let C113 being (FinSequence of C112);
let C114 being Nat;
per cases ;
suppose L954: C114 <= ( len C113 );

L955: ( ( len C113 ) -' C114 ) = ( ( len C113 ) - C114 ) by L954 , XREAL_1:233;
thus L956: thesis by L955 , L954 , L116;
end;
suppose L957: C114 > ( len C113 );

L958: ( C113 /^ C114 ) = ( <*> C112 ) by L957 , L116;
L959: ( len ( C113 /^ C114 ) ) = ( 0 ) by L958;
L960: ( ( len C113 ) - C114 ) < ( 0 ) by L957 , XREAL_1:49;
thus L961: thesis by L960 , L959 , XREAL_0:def 2;
end;
end;
theorem
L963: (for B112 , B113 being FinSequence holds (for B114 being set holds ((B114 in ( dom B113 ) & B112 , B113 are_fiberwise_equipotent ) implies (ex B115 being set st (B115 in ( dom B113 ) & ( B112 . B114 ) = ( B113 . B115 ))))))
proof
let C115 , C116 being FinSequence;
let C117 being set;
assume that
L964: C117 in ( dom C116 )
and
L965: C115 , C116 are_fiberwise_equipotent ;
consider C118 being (Permutation of ( dom C116 )) such that L966: C115 = ( C116 * C118 ) by L965 , L24;
take D86 = ( C118 . C117 );
thus L967: D86 in ( dom C116 ) by L964 , FUNCT_2:5;
thus L968: thesis by L964 , L966 , FUNCT_2:15;
end;
theorem
L969: (for B116 , B117 , B118 being FinSequence holds (B116 , B117 are_fiberwise_equipotent  iff ( B118 ^ B116 ) , ( B118 ^ B117 ) are_fiberwise_equipotent ))
proof
let C119 , C120 , C121 being FinSequence;
thus L970: (C119 , C120 are_fiberwise_equipotent  implies ( C121 ^ C119 ) , ( C121 ^ C120 ) are_fiberwise_equipotent )
proof
assume L971: C119 , C120 are_fiberwise_equipotent ;
L972:
now
let C122 being set;
L973: ( card ( Coim (C119 , C122) ) ) = ( card ( Coim (C120 , C122) ) ) by L971 , CLASSES1:def 9;
thus L974: ( card ( Coim (( C121 ^ C119 ) , C122) ) ) = ( ( card ( C120 " { C122 } ) ) + ( card ( C121 " { C122 } ) ) ) by L973 , FINSEQ_3:57
.= ( card ( Coim (( C121 ^ C120 ) , C122) ) ) by FINSEQ_3:57;
end;
thus L975: thesis by L972 , CLASSES1:def 9;
end;

assume L976: ( C121 ^ C119 ) , ( C121 ^ C120 ) are_fiberwise_equipotent ;
L977:
now
let C123 being set;
L978: (( card ( Coim (( C121 ^ C119 ) , C123) ) ) = ( ( card ( Coim (C119 , C123) ) ) + ( card ( C121 " { C123 } ) ) ) & ( card ( ( C121 ^ C120 ) " { C123 } ) ) = ( ( card ( C120 " { C123 } ) ) + ( card ( C121 " { C123 } ) ) )) by FINSEQ_3:57;
L979: ( card ( Coim (( C121 ^ C119 ) , C123) ) ) = ( card ( Coim (( C121 ^ C120 ) , C123) ) ) by L976 , CLASSES1:def 9;
thus L980: ( card ( Coim (C119 , C123) ) ) = ( card ( Coim (C120 , C123) ) ) by L979 , L978;
end;
thus L981: thesis by L977 , CLASSES1:def 9;
end;
theorem
L982: (for B119 , B120 being FinSequence holds (for B121 , B122 , B123 being (Element of ( NAT )) holds ((B119 , B120 are_fiberwise_equipotent  & B121 <= B122 & B122 <= ( len B119 ) & (for B124 being (Element of ( NAT )) holds ((1 <= B124 & B124 <= B121) implies ( B119 . B124 ) = ( B120 . B124 ))) & (for B125 being (Element of ( NAT )) holds ((B122 < B125 & B125 <= ( len B119 )) implies ( B119 . B125 ) = ( B120 . B125 ))) & B121 < B123 & B123 <= B122) implies (ex B126 being (Element of ( NAT )) st (B121 < B126 & B126 <= B122 & ( B119 . B123 ) = ( B120 . B126 ))))))
proof
let C124 , C125 being FinSequence;
let C126 , C127 , C128 being (Element of ( NAT ));
assume L983: C124 , C125 are_fiberwise_equipotent ;
assume that
L984: C126 <= C127
and
L985: C127 <= ( len C124 );
assume L986: (for B127 being (Element of ( NAT )) holds ((1 <= B127 & B127 <= C126) implies ( C124 . B127 ) = ( C125 . B127 )));
reconsider D87 = ( ( len C124 ) - C127 ) as (Element of ( NAT )) by L985 , INT_1:3 , XREAL_1:48;
L987: ( len C125 ) = ( C127 + D87 ) by L983 , L17;
consider C129 , C130 being FinSequence such that L988: ( len C129 ) = C127 and L989: ( len C130 ) = D87 and L990: C125 = ( C129 ^ C130 ) by L987 , FINSEQ_2:22;
L991: ( len C124 ) = ( C127 + D87 );
consider C131 , C132 being FinSequence such that L992: ( len C131 ) = C127 and L993: ( len C132 ) = D87 and L994: C124 = ( C131 ^ C132 ) by L991 , FINSEQ_2:22;
L995: ( dom C132 ) = ( Seg D87 ) by L993 , FINSEQ_1:def 3;
assume L996: (for B128 being (Element of ( NAT )) holds ((C127 < B128 & B128 <= ( len C124 )) implies ( C124 . B128 ) = ( C125 . B128 )));
L997:
now
let C133 being Nat;
reconsider D88 = C133 as (Element of ( NAT )) by ORDINAL1:def 12;
L998: C127 < ( C127 + 1 ) by XREAL_1:29;
assume L999: C133 in ( dom C132 );
L1000: C133 in ( dom C130 ) by L999 , L989 , L995 , FINSEQ_1:def 3;
L1001: 1 <= C133 by L995 , L999 , FINSEQ_1:1;
L1002: ( C127 + 1 ) <= ( C127 + C133 ) by L1001 , XREAL_1:6;
L1003: C127 < ( C133 + C127 ) by L1002 , L998 , XXREAL_0:2;
L1004: C133 <= D87 by L995 , L999 , FINSEQ_1:1;
L1005: ( ( len C131 ) + C133 ) <= ( len C124 ) by L1004 , L991 , L992 , XREAL_1:6;
thus L1006: ( C132 . C133 ) = ( C124 . ( ( len C131 ) + C133 ) ) by L994 , L999 , FINSEQ_1:def 7
.= ( C125 . ( ( len C129 ) + D88 ) ) by L996 , L992 , L988 , L1003 , L1005
.= ( C130 . C133 ) by L990 , L1000 , FINSEQ_1:def 7;
end;
L1007: C132 = C130 by L997 , L993 , L989 , FINSEQ_2:9;
L1008: C131 , C129 are_fiberwise_equipotent  by L1007 , L983 , L994 , L990 , L2;
reconsider D89 = ( C127 - C126 ) as (Element of ( NAT )) by L984 , INT_1:3 , XREAL_1:48;
L1009: ( C126 + 1 ) > C126 by XREAL_1:29;
L1010: ( len C129 ) = ( C126 + D89 ) by L988;
consider C134 , C135 being FinSequence such that L1011: ( len C134 ) = C126 and L1012: ( len C135 ) = D89 and L1013: C129 = ( C134 ^ C135 ) by L1010 , FINSEQ_2:22;
L1014: ( Seg C126 ) = ( dom C134 ) by L1011 , FINSEQ_1:def 3;
L1015: ( len C131 ) = ( C126 + D89 ) by L992;
consider C136 , C137 being FinSequence such that L1016: ( len C136 ) = C126 and L1017: ( len C137 ) = D89 and L1018: C131 = ( C136 ^ C137 ) by L1015 , FINSEQ_2:22;
L1019: C124 = ( C136 ^ ( C137 ^ C132 ) ) by L994 , L1018 , FINSEQ_1:32;
L1020: ( dom C136 ) = ( Seg C126 ) by L1016 , FINSEQ_1:def 3;
L1021: C125 = ( C134 ^ ( C135 ^ C130 ) ) by L990 , L1013 , FINSEQ_1:32;
L1022:
now
let C138 being Nat;
reconsider D90 = C138 as (Element of ( NAT )) by ORDINAL1:def 12;
assume L1023: C138 in ( dom C136 );
L1024: (1 <= C138 & C138 <= C126) by L1023 , L1020 , FINSEQ_1:1;
thus L1025: ( C136 . C138 ) = ( C124 . C138 ) by L1019 , L1023 , FINSEQ_1:def 7
.= ( C125 . D90 ) by L986 , L1024
.= ( C134 . C138 ) by L1021 , L1014 , L1020 , L1023 , FINSEQ_1:def 7;
end;
L1026: C136 = C134 by L1022 , L1016 , L1011 , FINSEQ_2:9;
L1027: C137 , C135 are_fiberwise_equipotent  by L1026 , L1018 , L1013 , L1008 , L969;
assume that
L1028: C126 < C128
and
L1029: C128 <= C127;
L1030: ( C128 - ( len C136 ) ) > ( 0 ) by L1028 , L1016 , XREAL_1:50;
reconsider D91 = ( C128 - ( len C136 ) ) as (Element of ( NAT )) by L1030 , INT_1:3;
L1031: D91 <= ( C127 - ( len C136 ) ) by L1029 , XREAL_1:9;
L1032: ( Seg D89 ) = ( dom C135 ) by L1012 , FINSEQ_1:def 3;
L1033: ( 1 + ( 0 ) ) <= D91 by L1028 , L1016 , INT_1:7 , XREAL_1:50;
L1034: D91 in ( dom C135 ) by L1033 , L1016 , L1032 , L1031 , FINSEQ_1:1;
consider C139 being set such that L1035: C139 in ( dom C135 ) and L1036: ( C137 . D91 ) = ( C135 . C139 ) by L1034 , L1027 , L963;
reconsider D92 = C139 as (Element of ( NAT )) by L1035;
L1037: ( ( len C134 ) + D92 ) in ( dom C129 ) by L1013 , L1035 , FINSEQ_1:28;
reconsider D93 = ( ( len C134 ) + D92 ) as (Element of ( NAT )) by ORDINAL1:def 12;
take D93;
L1038: 1 <= D92 by L1032 , L1035 , FINSEQ_1:1;
L1039: D93 >= ( ( len C134 ) + 1 ) by L1038 , XREAL_1:6;
thus L1040: C126 < D93 by L1039 , L1011 , L1009 , XXREAL_0:2;
L1041: D92 <= D89 by L1032 , L1035 , FINSEQ_1:1;
L1042: D93 <= ( D89 + ( len C134 ) ) by L1041 , XREAL_1:6;
thus L1043: D93 <= C127 by L1042 , L1011;
L1044: ( Seg D89 ) = ( dom C137 ) by L1017 , FINSEQ_1:def 3;
L1045: D91 in ( dom C137 ) by L1044 , L1016 , L1033 , L1031 , FINSEQ_1:1;
L1046: ( ( len C136 ) + D91 ) in ( dom C131 ) by L1045 , L1018 , FINSEQ_1:28;
thus L1047: ( C124 . C128 ) = ( C131 . ( ( len C136 ) + D91 ) ) by L1046 , L994 , FINSEQ_1:def 7
.= ( C135 . D92 ) by L1018 , L1036 , L1045 , FINSEQ_1:def 7
.= ( C129 . ( ( len C134 ) + D92 ) ) by L1013 , L1035 , FINSEQ_1:def 7
.= ( C125 . D93 ) by L990 , L1037 , FINSEQ_1:def 7;
end;
theorem
L1048: (for B129 being (FinSequence of ( INT )) holds (ex B130 being (FinSequence of ( REAL )) st (B129 , B130 are_fiberwise_equipotent  & B130 is (FinSequence of ( INT )) & B130 is  non-increasing)))
proof
let C140 being (FinSequence of ( INT ));
L1049: C140 is (FinSequence of ( REAL )) by FINSEQ_3:117;
consider C141 being  non-increasing (FinSequence of ( REAL )) such that L1050: C140 , C141 are_fiberwise_equipotent  by L1049 , L827;
take C141;
thus L1051: C140 , C141 are_fiberwise_equipotent  by L1050;
L1052: ( rng C140 ) = ( rng C141 ) by L1050 , CLASSES1:75;
thus L1053: C141 is (FinSequence of ( INT )) by L1052 , FINSEQ_1:def 4;
thus L1054: thesis;
end;
