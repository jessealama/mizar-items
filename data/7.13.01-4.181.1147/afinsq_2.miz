:: Basic Properties and Concept of Selected Subsequence of Zero Based Finite
:: Sequences
::  by Yatsuka Nakamura and Hisashi Ito
::
:: Received June 27, 2008
:: Copyright (c) 2008-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, SUBSET_1, FUNCT_1, NAT_1, TARSKI, MEMBERED, ORDINAL1,
      FINSET_1, RELAT_1, AFINSQ_1, ARYTM_1, ARYTM_3, FINSEQ_1, XXREAL_0,
      CARD_1, XBOOLE_0, ORDINAL4, FINSEQ_5, RFINSEQ, JORDAN3, CARD_3, XCMPLX_0,
      AFINSQ_2, BINOP_1, SETWISEO, FINSOP_1, FUNCOP_1, BINOP_2, VALUED_0,
      FUNCT_2, INT_1, PRGCOR_2, XREAL_0, SEQ_1, SERIES_1, VALUED_1, RAT_1,
      SQUARE_1, COMPLEX1, PARTFUN3, PRE_POLY, AMISTD_1, AMISTD_2;
 notations TARSKI, XBOOLE_0, SUBSET_1, CARD_1, XREAL_0, NUMBERS, RELAT_1,
      FUNCT_1, XCMPLX_0, ORDINAL1, NAT_1, FINSET_1, XXREAL_0, NAT_D, AFINSQ_1,
      SEQ_1, MEMBERED, VALUED_1, RELSET_1, PARTFUN1, FUNCT_2, FUNCOP_1, INT_1,
      BINOP_1, BINOP_2, SETWISEO, FINSOP_1, FINSEQ_1, RECDEF_1, VALUED_0,
      SERIES_1, RAT_1, PARTFUN3;
 constructors SERIES_1, PARTFUN3, WELLORD2, SETWISEO, FINSOP_1, NAT_D,
      RECDEF_1, BINOP_2, RELSET_1, AFINSQ_1, FUNCOP_1, SQUARE_1, BINOP_1,
      XTUPLE_0;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, ORDINAL1, FUNCT_2, FINSET_1,
      NUMBERS, XXREAL_0, XREAL_0, NAT_1, BINOP_2, CARD_1, FINSEQ_1, AFINSQ_1,
      RELSET_1, ORDINAL3, VALUED_1, VALUED_0, MEMBERED;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, XBOOLE_0, FUNCT_1, VALUED_1;
 theorems TARSKI, FUNCT_1, NAT_1, ZFMISC_1, RELAT_1, CARD_2, XBOOLE_0,
      XBOOLE_1, FINSET_1, ORDINAL1, CARD_1, XREAL_1, AFINSQ_1, XXREAL_0, NAT_2,
      FINSEQ_2, WELLORD2, MEMBERED, VALUED_0, VALUED_1, XREAL_0, NAT_D,
      SERIES_1, PARTFUN3, BINOP_1, BINOP_2, SETWISEO, FUNCOP_1, FINSOP_1,
      FINSEQ_1, FUNCT_2, XCMPLX_0, GRFUNC_1, XTUPLE_0;
 schemes NAT_1, AFINSQ_1, FUNCT_2, BINOP_1;

begin
L1: (for B1 , B2 being  finite set holds ((B1 c= B2 & ( card B1 ) = ( card B2 )) implies B1 = B2))
proof
let C1 , C2 being  finite set;
assume that
L2: C1 c= C2
and
L3: ( card C1 ) = ( card C2 );
L4: ( card ( C2 \ C1 ) ) = ( ( card C2 ) - ( card C1 ) ) by L2 , CARD_2:44;
L5: ( C2 \ C1 ) = ( {} ) by L4 , L3;
L6: C2 c= C1 by L5 , XBOOLE_1:37;
thus L7: thesis by L6 , L2 , XBOOLE_0:def 10;
end;
L8: (for B3 , B4 being  finite set holds (for B5 being (Function of B3 , B4) holds (( card B3 ) = ( card B4 ) implies (B5 is  onto iff B5 is  one-to-one))))
proof
let C3 , C4 being  finite set;
let C5 being (Function of C3 , C4);
assume that
L9: ( card C3 ) = ( card C4 );
thus L10: (C5 is  onto implies C5 is  one-to-one)
proof
assume L11: C5 is  onto;
assume L12: (not C5 is  one-to-one);
consider C6 , C7 being set such that L13: C6 in ( dom C5 ) and L14: C7 in ( dom C5 ) and L15: ( C5 . C6 ) = ( C5 . C7 ) and L16: C6 <> C7 by L12 , FUNCT_1:def 4;
reconsider D1 = ( C3 \ { C6 } ) as  finite set;
L17: C4 c= ( C5 .: D1 )
proof
let C8 being set;
assume L18: C8 in C4;
L19: C8 in ( rng C5 ) by L18 , L11 , FUNCT_2:def 3;
consider R7 being set such that L20: R7 in ( dom C5 ) and L21: ( C5 . R7 ) = C8 by L19 , FUNCT_1:def 3;
L22:
now
per cases ;
suppose L23: R7 = C6;

L24: C7 in D1 by L14 , L16 , ZFMISC_1:56;
thus L25: thesis by L24 , L14 , L15 , L21 , L23 , FUNCT_1:def 6;
end;
suppose L26: R7 <> C6;

L27: R7 in D1 by L26 , L20 , ZFMISC_1:56;
thus L28: thesis by L27 , L20 , L21 , FUNCT_1:def 6;
end;
end;
thus L30: thesis by L22;
end;
L31: ( card C4 ) c= ( card D1 ) by L17 , CARD_1:66;
L32: { C6 } meets C3 by L13 , ZFMISC_1:48;
L33: D1 <> C3 by L32 , XBOOLE_1:83;
L34: D1 c< C3 by L33 , XBOOLE_0:def 8;
L35: ( card D1 ) < ( card C3 ) by L34 , CARD_2:48;
thus L36: thesis by L35 , L9 , L31 , NAT_1:39;
end;

thus L37: (C5 is  one-to-one implies C5 is  onto)
proof
assume L38: C5 is  one-to-one;
L39: ( dom C5 ) , ( C5 .: ( dom C5 ) ) are_equipotent  by L38 , CARD_1:33;
L40: ( card ( dom C5 ) ) = ( card ( C5 .: ( dom C5 ) ) ) by L39 , CARD_1:5;
assume L41: (not C5 is  onto);
L42: (not ( rng C5 ) = C4) by L41 , FUNCT_2:def 3;
L43: (not C4 c= ( rng C5 )) by L42 , XBOOLE_0:def 10;
consider R7 being set such that L44: R7 in C4 and L45: (not R7 in ( rng C5 )) by L43 , TARSKI:def 3;
L46: ( card ( rng C5 ) ) <= ( card ( C4 \ { R7 } ) ) by L45 , NAT_1:43 , ZFMISC_1:34;
L47: ( C5 .: ( dom C5 ) ) = ( rng C5 ) by RELAT_1:113;
L48: { R7 } meets C4 by L44 , ZFMISC_1:48;
L49: ( C4 \ { R7 } ) <> C4 by L48 , XBOOLE_1:83;
L50: ( C4 \ { R7 } ) c< C4 by L49 , XBOOLE_0:def 8;
L51: ( card ( C4 \ { R7 } ) ) < ( card C4 ) by L50 , CARD_2:48;
thus L52: thesis by L51 , L9 , L44 , L46 , L40 , L47 , FUNCT_2:def 1;
end;

end;
theorem
L38: (for R1 being Nat holds (for R6 being set holds (R6 in R1 implies R6 is (Element of ( NAT )))))
proof
let R1 being Nat;
let R6 being set;
L39: R1 c= ( NAT );
assume L40: R6 in R1;
thus L41: thesis by L40 , L39;
end;
registration
cluster  ->  natural-membered for Nat;
coherence
proof
let R4 being Nat;
L42: (for R6 being set holds (R6 in R4 implies R6 is  natural)) by L38;
thus L43: thesis by L42 , MEMBERED:def 6;
end;
end;
begin
theorem
L45: (for B6 being  finite  natural-membered set holds (ex R4 being Nat st B6 c= R4))
proof
let C9 being  finite  natural-membered set;
consider C10 being Function such that L46: ( rng C10 ) = C9 and L47: ( dom C10 ) in ( NAT ) by FINSET_1:def 1;
reconsider D2 = ( dom C10 ) as (Element of ( NAT )) by L47;
L48: D2 = ( dom C10 );
reconsider D3 = C10 as XFinSequence by L48 , AFINSQ_1:5;
L49: C9 c= ( NAT ) by MEMBERED:6;
reconsider D4 = D3 as (XFinSequence of ( NAT )) by L49 , L46 , RELAT_1:def 19;
defpred S1[ Nat ] means (ex R4 being Nat st (for R1 being Nat holds ((R1 in $1 & ( $1 -' 1 ) in ( dom D4 )) implies ( D4 . R1 ) in R4)));
L50: (for R3 being Nat holds (S1[ R3 ] implies S1[ ( R3 + 1 ) ]))
proof
let R3 being Nat;
assume L51: S1[ R3 ];
consider R4 being Nat such that L52: (for R1 being Nat holds ((R1 in R3 & ( R3 -' 1 ) in ( dom D4 )) implies ( D4 . R1 ) in R4)) by L51;
per cases ;
suppose L53: ( ( R3 + 1 ) - 1 ) < ( len D4 );

set D5 = ( D4 . R3 );
set D6 = ( max (R4 , ( D5 + 1 )) );
L54: ( R3 -' 1 ) <= R3 by NAT_D:35;
L55: ( R3 -' 1 ) < ( len D4 ) by L54 , L53 , XXREAL_0:2;
L56: ( R3 -' 1 ) in ( dom D4 ) by L55 , NAT_1:44;
L57: (for R1 being Nat holds ((R1 in ( R3 + 1 ) & ( ( R3 + 1 ) -' 1 ) in ( dom D4 )) implies ( D4 . R1 ) in D6))
proof
let R1 being Nat;
assume that
L58: R1 in ( R3 + 1 )
and
L59: ( ( R3 + 1 ) -' 1 ) in ( dom D4 );
L60: R1 < ( R3 + 1 ) by L58 , NAT_1:44;
per cases ;
suppose L61: R1 < R3;

set D7 = ( D4 . R1 );
L62: R1 in R3 by L61 , NAT_1:44;
L63: ( D4 . R1 ) in R4 by L62 , L52 , L56;
L64: D7 < R4 by L63 , NAT_1:44;
L65: D7 < D6 by L64 , XXREAL_0:30;
thus L66: thesis by L65 , NAT_1:44;
end;
suppose L67: R1 >= R3;

L68: D5 < ( D5 + 1 ) by XREAL_1:29;
L69: D5 < D6 by L68 , XXREAL_0:30;
L70: R1 <= R3 by L60 , NAT_1:13;
L71: ( D4 . R1 ) = D5 by L70 , L67 , XXREAL_0:1;
thus L72: thesis by L71 , L69 , NAT_1:44;
end;
end;
thus L74: thesis by L57;
end;
suppose L75: ( ( R3 + 1 ) - 1 ) >= ( len D4 );

L76: ( ( R3 + 1 ) -' 1 ) = R3 by NAT_D:34;
L77: (for R1 being Nat holds ((R1 in ( R3 + 1 ) & ( ( R3 + 1 ) -' 1 ) in ( dom D4 )) implies ( D4 . R1 ) in 2)) by L76 , L75 , NAT_1:44;
thus L78: thesis by L77;
end;
end;
L80: (for R1 being Nat holds ((R1 in ( 0 ) & ( ( 0 ) -' 1 ) in ( dom D4 )) implies ( D4 . R1 ) in ( 0 )));
L81: S1[ ( 0 ) ] by L80;
L82: (for R3 being Nat holds S1[ R3 ]) from NAT_1:sch 2(L81 , L50);
consider R4 being Nat such that L83: (for R1 being Nat holds ((R1 in ( len D4 ) & ( ( len D4 ) -' 1 ) in ( dom D4 )) implies ( D4 . R1 ) in R4)) by L82;
L84: ( rng D4 ) c= R4
proof
let C11 being set;
assume L85: C11 in ( rng D4 );
consider R6 being set such that L86: R6 in ( dom D4 ) and L87: C11 = ( D4 . R6 ) by L85 , FUNCT_1:def 3;
L88: ( ( len D4 ) - 1 ) < ( len D4 ) by XREAL_1:44;
L89: ( (( 0 ) qua (Element of ( NAT ))) + 1 ) <= ( len D4 ) by L86 , NAT_1:13;
L90: ( ( len D4 ) -' 1 ) = ( ( len D4 ) - 1 ) by L89 , XREAL_1:233;
L91: ( ( len D4 ) -' 1 ) in ( dom D4 ) by L90 , L88 , NAT_1:44;
thus L92: thesis by L91 , L83 , L86 , L87;
end;
thus L93: thesis by L84 , L46;
end;
theorem
L94: (for R6 being set holds (for R14 being XFinSequence holds (R6 in ( rng R14 ) implies (ex B7 being (Element of ( NAT )) st (B7 in ( dom R14 ) & ( R14 . B7 ) = R6)))))
proof
let R6 being set;
let R14 being XFinSequence;
assume L95: R6 in ( rng R14 );
L96: (ex B8 being set st (B8 in ( dom R14 ) & R6 = ( R14 . B8 ))) by L95 , FUNCT_1:def 3;
thus L97: thesis by L96;
end;
theorem
L98: (for R13 being set holds (for R14 being XFinSequence holds ((for R1 being Nat holds (R1 in ( dom R14 ) implies ( R14 . R1 ) in R13)) implies R14 is (XFinSequence of R13))))
proof
let R13 being set;
let R14 being XFinSequence;
assume L99: (for R1 being Nat holds (R1 in ( dom R14 ) implies ( R14 . R1 ) in R13));
L100: ( rng R14 ) c= R13
proof
let R6 being set;
assume L101: R6 in ( rng R14 );
L102: (ex B9 being (Element of ( NAT )) st (B9 in ( dom R14 ) & ( R14 . B9 ) = R6)) by L101 , L94;
thus L103: thesis by L102 , L99;
end;
thus L104: thesis by L100 , RELAT_1:def 19;
end;
scheme XSeqLambdaD { F1() -> Nat , F2() -> non  empty set , F3(set) -> (Element of F2()) } : (ex B10 being (XFinSequence of F2()) st (( len B10 ) = F1() & (for R2 being Nat holds (R2 in F1() implies ( B10 . R2 ) = F3(R2)))))
proof
consider C12 being XFinSequence such that L105: ( len C12 ) = F1() and L106: (for R1 being Nat holds (R1 in F1() implies ( C12 . R1 ) = F3(R1))) from AFINSQ_1:sch 2;
L107: (for B11 being Nat holds (B11 in F1() implies ( C12 . B11 ) in F2()))
proof
let C13 being Nat;
reconsider D8 = C13 as (Element of ( NAT )) by ORDINAL1:def 12;
assume L108: C13 in F1();
L109: ( C12 . D8 ) = F3(D8) by L108 , L106;
thus L110: thesis by L109;
end;
reconsider D9 = C12 as (XFinSequence of F2()) by L107 , L105 , L98;
take D9;
thus L111: ( len D9 ) = F1() by L105;
let C14 being Nat;
thus L112: thesis by L106;
end;
registration
cluster  empty  natural-valued for XFinSequence;
existence
proof
take the  empty (XFinSequence of ( NAT ));
thus L113: thesis;
end;
let C15 being  complex-valued  T-Sequence-like Function;
cluster ( - C15 ) ->  T-Sequence-like;
coherence
proof
L114: (( dom C15 ) = ( dom ( - C15 ) ) & ( dom C15 ) is  ordinal) by VALUED_1:8;
thus L115: thesis by L114 , ORDINAL1:def 7;
end;
cluster ( C15 " ) ->  T-Sequence-like;
coherence
proof
L116: ( dom C15 ) = ( dom ( C15 " ) ) by VALUED_1:def 7;
thus L117: thesis by L116 , ORDINAL1:def 7;
end;
cluster ( C15 ^2 ) ->  T-Sequence-like;
coherence
proof
L118: ( dom C15 ) = ( dom ( C15 ^2 ) ) by VALUED_1:11;
thus L119: thesis by L118 , ORDINAL1:def 7;
end;
cluster ( abs C15 ) ->  T-Sequence-like;
coherence
proof
L120: ( dom C15 ) = ( dom ( abs C15 ) ) by VALUED_1:def 11;
thus L121: thesis by L120 , ORDINAL1:def 7;
end;
let C16 being  complex-valued  T-Sequence-like Function;
cluster ( C15 + C16 ) ->  T-Sequence-like;
coherence
proof
L122: (( dom ( C15 + C16 ) ) = ( ( dom C15 ) /\ ( dom C16 ) ) & ( dom C15 ) is  ordinal & ( dom C16 ) is  ordinal) by VALUED_1:def 1;
thus L123: thesis by L122 , ORDINAL1:def 7;
end;
cluster ( C15 - C16 ) ->  T-Sequence-like;
coherence;
cluster ( C15 (#) C16 ) ->  T-Sequence-like;
coherence
proof
L124: (( dom ( C15 (#) C16 ) ) = ( ( dom C15 ) /\ ( dom C16 ) ) & ( dom C15 ) is  ordinal & ( dom C16 ) is  ordinal) by VALUED_1:def 4;
thus L125: thesis by L124 , ORDINAL1:def 7;
end;
cluster ( C15 /" C16 ) ->  T-Sequence-like;
coherence;
end;
registration
let C17 being  complex-valued  finite Function;
cluster ( - C17 ) ->  finite;
coherence
proof
L127: ( dom C17 ) = ( dom ( - C17 ) ) by VALUED_1:8;
thus L128: thesis by L127 , FINSET_1:10;
end;
cluster ( C17 " ) ->  finite;
coherence
proof
L129: ( dom C17 ) = ( dom ( C17 " ) ) by VALUED_1:def 7;
thus L130: thesis by L129 , FINSET_1:10;
end;
cluster ( C17 ^2 ) ->  finite;
coherence
proof
L131: ( dom C17 ) = ( dom ( C17 ^2 ) ) by VALUED_1:11;
thus L132: thesis by L131 , FINSET_1:10;
end;
cluster ( abs C17 ) ->  finite;
coherence
proof
L133: ( dom C17 ) = ( dom ( abs C17 ) ) by VALUED_1:def 11;
thus L134: thesis by L133 , FINSET_1:10;
end;
let C18 being  complex-valued Function;
cluster ( C17 + C18 ) ->  finite;
coherence
proof
L135: ( dom ( C17 + C18 ) ) = ( ( dom C17 ) /\ ( dom C18 ) ) by VALUED_1:def 1;
thus L136: thesis by L135 , FINSET_1:10;
end;
cluster ( C17 - C18 ) ->  finite;
coherence;
cluster ( C17 (#) C18 ) ->  finite;
coherence
proof
L137: ( dom ( C17 (#) C18 ) ) = ( ( dom C17 ) /\ ( dom C18 ) ) by VALUED_1:def 4;
thus L138: thesis by L137 , FINSET_1:10;
end;
cluster ( C17 /" C18 ) ->  finite;
coherence;
cluster ( C18 /" C17 ) ->  finite;
coherence;
end;
registration
let C19 being  complex-valued  T-Sequence-like Function;
let C20 being  complex number;
cluster ( C20 + C19 ) ->  T-Sequence-like;
coherence
proof
L140: ( dom C19 ) = ( dom ( C20 + C19 ) ) by VALUED_1:def 2;
thus L141: thesis by L140 , ORDINAL1:def 7;
end;
cluster ( C19 - C20 ) ->  T-Sequence-like;
coherence;
cluster ( C20 (#) C19 ) ->  T-Sequence-like;
coherence
proof
L142: ( dom C19 ) = ( dom ( C20 (#) C19 ) ) by VALUED_1:def 5;
thus L143: thesis by L142 , ORDINAL1:def 7;
end;
end;
registration
let C21 being  complex-valued  finite Function;
let C22 being  complex number;
cluster ( C22 + C21 ) ->  finite;
coherence
proof
L145: ( dom C21 ) = ( dom ( C22 + C21 ) ) by VALUED_1:def 2;
thus L146: thesis by L145 , FINSET_1:10;
end;
cluster ( C21 - C22 ) ->  finite;
coherence;
cluster ( C22 (#) C21 ) ->  finite;
coherence
proof
L147: ( dom C21 ) = ( dom ( C22 (#) C21 ) ) by VALUED_1:def 5;
thus L148: thesis by L147 , FINSET_1:10;
end;
end;
definition
let R14 being XFinSequence;
func Rev R14 -> XFinSequence means 
:L150: (( len it ) = ( len R14 ) & (for R1 being Nat holds (R1 in ( dom it ) implies ( it . R1 ) = ( R14 . ( ( len R14 ) - ( R1 + 1 ) ) ))));
existence
proof
deffunc H1(Nat) = ( R14 . ( ( len R14 ) - ( $1 + 1 ) ) );
L151: (ex R15 being XFinSequence st (( len R15 ) = ( len R14 ) & (for R3 being Nat holds (R3 in ( len R14 ) implies ( R15 . R3 ) = H1(R3))))) from AFINSQ_1:sch 2;
thus L152: thesis by L151;
end;
uniqueness
proof
let C23 , C24 being XFinSequence;
assume that
L153: ( len C23 ) = ( len R14 )
and
L154: (for R1 being Nat holds (R1 in ( dom C23 ) implies ( C23 . R1 ) = ( R14 . ( ( len R14 ) - ( R1 + 1 ) ) )))
and
L155: ( len C24 ) = ( len R14 )
and
L156: (for R1 being Nat holds (R1 in ( dom C24 ) implies ( C24 . R1 ) = ( R14 . ( ( len R14 ) - ( R1 + 1 ) ) )));
L157:
now
let R1 being Nat;
assume L158: R1 in ( dom R14 );
L159: ( C23 . R1 ) = ( R14 . ( ( len R14 ) - ( R1 + 1 ) ) ) by L158 , L153 , L154;
thus L160: ( C23 . R1 ) = ( C24 . R1 ) by L159 , L155 , L156 , L158;
end;
thus L161: thesis by L157 , L153 , L155 , AFINSQ_1:8;
end;
end;
theorem
L163: (for R14 being XFinSequence holds (( dom R14 ) = ( dom ( Rev R14 ) ) & ( rng R14 ) = ( rng ( Rev R14 ) )))
proof
let R14 being XFinSequence;
thus L164: ( dom R14 ) = ( len R14 )
.= ( len ( Rev R14 ) ) by L150
.= ( dom ( Rev R14 ) );
L165: ( len R14 ) = ( len ( Rev R14 ) ) by L150;
thus L166:now
let C25 being set;
assume L167: C25 in ( rng R14 );
consider C26 being set such that L168: C26 in ( dom R14 ) and L169: ( R14 . C26 ) = C25 by L167 , FUNCT_1:def 3;
reconsider D10 = C26 as (Element of ( NAT )) by L168;
L170: D10 < ( len R14 ) by L168 , NAT_1:44;
L171: ( D10 + 1 ) <= ( len R14 ) by L170 , NAT_1:13;
L172: ( ( len R14 ) -' ( D10 + 1 ) ) = ( ( len R14 ) - ( D10 + 1 ) ) by L171 , XREAL_1:233;
reconsider D11 = ( ( len R14 ) - ( D10 + 1 ) ) as (Element of ( NAT )) by L172;
L173: ( ( len R14 ) - ( D10 + 1 ) ) < ( len R14 ) by XREAL_1:44;
L174: D11 in ( len ( Rev R14 ) ) by L173 , L165 , NAT_1:44;
L175: ( ( Rev R14 ) . D11 ) = ( R14 . ( ( len R14 ) - ( D11 + 1 ) ) ) by L174 , L150;
thus L176: C25 in ( rng ( Rev R14 ) ) by L175 , L169 , L174 , FUNCT_1:def 3;
end;
let R6 being set;
assume L177: R6 in ( rng ( Rev R14 ) );
consider C27 being set such that L178: C27 in ( dom ( Rev R14 ) ) and L179: ( ( Rev R14 ) . C27 ) = R6 by L177 , FUNCT_1:def 3;
reconsider D12 = C27 as (Element of ( NAT )) by L178;
L180: D12 < ( len R14 ) by L165 , L178 , NAT_1:44;
L181: ( D12 + 1 ) <= ( len R14 ) by L180 , NAT_1:13;
L182: ( ( len R14 ) -' ( D12 + 1 ) ) = ( ( len R14 ) - ( D12 + 1 ) ) by L181 , XREAL_1:233;
reconsider D13 = ( ( len R14 ) - ( D12 + 1 ) ) as (Element of ( NAT )) by L182;
L183: ( ( len R14 ) - ( D12 + 1 ) ) < ( len R14 ) by XREAL_1:44;
L184: D13 in ( len ( Rev R14 ) ) by L183 , L165 , NAT_1:44;
L185: ( ( Rev R14 ) . D12 ) = ( R14 . ( ( len R14 ) - ( D12 + 1 ) ) ) by L178 , L150;
thus L186: thesis by L185 , L164 , L179 , L184 , FUNCT_1:def 3;
end;
registration
let C28 being set;
let C29 being (XFinSequence of C28);
cluster ( Rev C29 ) -> C28 -valued;
coherence
proof
L187: ( rng C29 ) = ( rng ( Rev C29 ) ) by L163;
thus L188: thesis by L187 , RELAT_1:def 19;
end;
end;
definition
let R14 being XFinSequence;
let R4 being Nat;
func R14 /^ R4 -> XFinSequence means 
:L190: (( len it ) = ( ( len R14 ) -' R4 ) & (for R5 being Nat holds (R5 in ( dom it ) implies ( it . R5 ) = ( R14 . ( R5 + R4 ) ))));
existence
proof
thus L191: (ex B12 being XFinSequence st (( len B12 ) = ( ( len R14 ) -' R4 ) & (for R5 being Nat holds (R5 in ( dom B12 ) implies ( B12 . R5 ) = ( R14 . ( R5 + R4 ) )))))
proof
deffunc H2(Nat) = ( R14 . ( $1 + R4 ) );
set D14 = ( ( len R14 ) -' R4 );
consider R15 being XFinSequence such that L192: (( len R15 ) = D14 & (for B13 being Nat holds (B13 in D14 implies ( R15 . B13 ) = H2(B13)))) from AFINSQ_1:sch 2;
take R15;
thus L193: thesis by L192;
end;

end;
uniqueness
proof
let C30 , C31 being XFinSequence;
thus L192: ((( len C30 ) = ( ( len R14 ) -' R4 ) & (for B14 being Nat holds (B14 in ( dom C30 ) implies ( C30 . B14 ) = ( R14 . ( B14 + R4 ) ))) & ( len C31 ) = ( ( len R14 ) -' R4 ) & (for B15 being Nat holds (B15 in ( dom C31 ) implies ( C31 . B15 ) = ( R14 . ( B15 + R4 ) )))) implies C30 = C31)
proof
assume that
L193: ( len C30 ) = ( ( len R14 ) -' R4 )
and
L194: (for R5 being Nat holds (R5 in ( dom C30 ) implies ( C30 . R5 ) = ( R14 . ( R5 + R4 ) )))
and
L195: ( len C31 ) = ( ( len R14 ) -' R4 )
and
L196: (for R5 being Nat holds (R5 in ( dom C31 ) implies ( C31 . R5 ) = ( R14 . ( R5 + R4 ) )));
L197:
now
let R5 being Nat;
assume L198: R5 in ( dom C30 );
L199: ( C30 . R5 ) = ( R14 . ( R5 + R4 ) ) by L198 , L194;
thus L200: ( C30 . R5 ) = ( C31 . R5 ) by L199 , L193 , L195 , L196 , L198;
end;
thus L201: thesis by L197 , L193 , L195 , AFINSQ_1:8;
end;

end;
end;
theorem
L194: (for R4 being Nat holds (for R14 being XFinSequence holds (R4 >= ( len R14 ) implies ( R14 /^ R4 ) = ( {} ))))
proof
let R4 being Nat;
let R14 being XFinSequence;
assume L195: R4 >= ( len R14 );
L196: ( ( len R14 ) -' R4 ) = ( 0 ) by L195 , NAT_2:8;
L197: ( len ( R14 /^ R4 ) ) = ( 0 ) by L196 , L190;
thus L198: thesis by L197;
end;
theorem
L199: (for R4 being Nat holds (for R14 being XFinSequence holds (R4 < ( len R14 ) implies ( len ( R14 /^ R4 ) ) = ( ( len R14 ) - R4 ))))
proof
let R4 being Nat;
let R14 being XFinSequence;
assume L200: R4 < ( len R14 );
L201: ( ( len R14 ) - R4 ) >= ( 0 ) by L200 , XREAL_1:48;
L202: ( ( len R14 ) -' R4 ) = ( ( len R14 ) - R4 ) by L201 , XREAL_0:def 2;
thus L203: thesis by L202 , L190;
end;
theorem
L204: (for R4 being Nat holds (for R5 being Nat holds (for R14 being XFinSequence holds (( R5 + R4 ) < ( len R14 ) implies ( ( R14 /^ R4 ) . R5 ) = ( R14 . ( R5 + R4 ) )))))
proof
let R4 being Nat;
let R5 being Nat;
let R14 being XFinSequence;
assume L205: ( R5 + R4 ) < ( len R14 );
L206: R5 < ( ( len R14 ) - R4 ) by L205 , XREAL_1:20;
L207: ( len ( R14 /^ R4 ) ) = ( ( len R14 ) - R4 ) by L205 , L199 , NAT_1:12;
L208: R5 in ( dom ( R14 /^ R4 ) ) by L207 , L206 , NAT_1:44;
thus L209: thesis by L208 , L190;
end;
registration
let C32 being  one-to-one XFinSequence;
let R4 being Nat;
cluster ( C32 /^ R4 ) ->  one-to-one;
coherence
proof
let C33 , C34 being set;
assume that
L210: C33 in ( dom ( C32 /^ R4 ) )
and
L211: C34 in ( dom ( C32 /^ R4 ) )
and
L212: ( ( C32 /^ R4 ) . C33 ) = ( ( C32 /^ R4 ) . C34 );
reconsider D15 = C33 , D16 = C34 as Nat by L210 , L211;
L213: D15 < ( len ( C32 /^ R4 ) ) by L210 , NAT_1:44;
L214: ( len ( C32 /^ R4 ) ) = ( ( len C32 ) -' R4 ) by L190;
L215: D16 < ( len ( C32 /^ R4 ) ) by L211 , NAT_1:44;
per cases ;
suppose L216: R4 <= ( len C32 );

L217: ( ( len C32 ) -' R4 ) = ( ( len C32 ) - R4 ) by L216 , XREAL_1:233;
L218: ( D15 + R4 ) < ( len C32 ) by L217 , L213 , L214 , XREAL_1:20;
L219: ( D15 + R4 ) in ( dom C32 ) by L218 , NAT_1:44;
L220: ( D16 + R4 ) < ( len C32 ) by L215 , L214 , L217 , XREAL_1:20;
L221: ( D16 + R4 ) in ( dom C32 ) by L220 , NAT_1:44;
L222: ( ( C32 /^ R4 ) . D16 ) = ( C32 . ( D16 + R4 ) ) by L220 , L204;
L223: ( ( C32 /^ R4 ) . D15 ) = ( C32 . ( D15 + R4 ) ) by L218 , L204;
L224: ( D15 + R4 ) = ( D16 + R4 ) by L223 , L212 , L219 , L222 , L221 , FUNCT_1:def 4;
thus L225: thesis by L224;
end;
suppose L226: R4 > ( len C32 );

L227: ( C32 /^ R4 ) = ( {} ) by L226 , L194;
thus L228: thesis by L227 , L210;
end;
end;
end;
theorem
L231: (for R4 being Nat holds (for R14 being XFinSequence holds ( rng ( R14 /^ R4 ) ) c= ( rng R14 )))
proof
let R4 being Nat;
let R14 being XFinSequence;
thus L232: ( rng ( R14 /^ R4 ) ) c= ( rng R14 )
proof
let C35 being set;
assume L233: C35 in ( rng ( R14 /^ R4 ) );
consider C36 being set such that L234: C36 in ( dom ( R14 /^ R4 ) ) and L235: C35 = ( ( R14 /^ R4 ) . C36 ) by L233 , FUNCT_1:def 3;
reconsider D17 = C36 as (Element of ( NAT )) by L234;
L236: D17 < ( len ( R14 /^ R4 ) ) by L234 , NAT_1:44;
L237: D17 < ( ( len R14 ) -' R4 ) by L236 , L190;
per cases ;
suppose L238: R4 < ( len R14 );

L239: ( ( len R14 ) -' R4 ) = ( ( len R14 ) - R4 ) by L238 , XREAL_1:233;
L240: ( D17 + R4 ) < ( len R14 ) by L239 , L237 , XREAL_1:20;
L241: ( D17 + R4 ) in ( dom R14 ) by L240 , NAT_1:44;
L242: ( ( R14 /^ R4 ) . D17 ) = ( R14 . ( D17 + R4 ) ) by L234 , L190;
thus L243: thesis by L242 , L235 , L241 , FUNCT_1:def 3;
end;
suppose L244: R4 >= ( len R14 );

L245: ( R14 /^ R4 ) = ( {} ) by L244 , L194;
thus L246: thesis by L245 , L234;
end;
end;

end;
theorem
L233: (for R14 being XFinSequence holds ( R14 /^ ( 0 ) ) = R14)
proof
let R14 being XFinSequence;
per cases ;
suppose L234: ( 0 ) < ( len R14 );

L235:
now
let R1 being Nat;
assume L236: R1 < ( len ( R14 /^ ( 0 ) ) );
L237: R1 in ( dom ( R14 /^ ( 0 ) ) ) by L236 , NAT_1:44;
thus L238: ( ( R14 /^ ( 0 ) ) . R1 ) = ( R14 . ( R1 + (( 0 ) qua (Element of ( NAT ))) ) ) by L237 , L190
.= ( R14 . R1 );
end;
L239: ( len ( R14 /^ ( 0 ) ) ) = ( ( len R14 ) - ( 0 ) ) by L234 , L199
.= ( len R14 );
thus L240: thesis by L239 , L235 , AFINSQ_1:9;
end;
suppose L241: ( 0 ) >= ( len R14 );

L242: ( R14 /^ ( 0 ) ) = ( {} ) by L241 , L194;
thus L243: thesis by L242 , L241;
end;
end;
theorem
L245: (for R1 being Nat holds (for R14 being XFinSequence holds (for R15 being XFinSequence holds ( ( R14 ^ R15 ) /^ ( ( len R14 ) + R1 ) ) = ( R15 /^ R1 ))))
proof
let R1 being Nat;
let R14 being XFinSequence;
let R15 being XFinSequence;
L246: ( len ( R14 ^ R15 ) ) = ( ( len R14 ) + ( len R15 ) ) by AFINSQ_1:17;
per cases ;
suppose L247: R1 < ( len R15 );

L248: ( ( len R14 ) + R1 ) < ( ( len R14 ) + ( len R15 ) ) by L247 , XREAL_1:6;
L249: ( ( len R14 ) + R1 ) < ( len ( R14 ^ R15 ) ) by L248 , AFINSQ_1:17;
L250: ( len ( ( R14 ^ R15 ) /^ ( ( len R14 ) + R1 ) ) ) = ( ( len ( R14 ^ R15 ) ) - ( ( len R14 ) + R1 ) ) by L249 , L199
.= ( ( ( len R15 ) + ( len R14 ) ) - ( ( len R14 ) + R1 ) ) by AFINSQ_1:17
.= ( ( len R15 ) - R1 )
.= ( len ( R15 /^ R1 ) ) by L247 , L199;
L251:
now
let R3 being Nat;
assume L252: R3 < ( len ( R15 /^ R1 ) );
L253: R3 in ( dom ( R15 /^ R1 ) ) by L252 , NAT_1:44;
L254: R3 < ( ( len R15 ) - R1 ) by L247 , L252 , L199;
L255: ( R1 + R3 ) < ( len R15 ) by L254 , XREAL_1:20;
L256: ( R1 + R3 ) in ( dom R15 ) by L255 , NAT_1:44;
L257: R3 in ( dom ( ( R14 ^ R15 ) /^ ( ( len R14 ) + R1 ) ) ) by L250 , L252 , NAT_1:44;
thus L258: ( ( ( R14 ^ R15 ) /^ ( ( len R14 ) + R1 ) ) . R3 ) = ( ( R14 ^ R15 ) . ( ( ( len R14 ) + R1 ) + R3 ) ) by L257 , L190
.= ( ( R14 ^ R15 ) . ( ( len R14 ) + ( R1 + R3 ) ) )
.= ( R15 . ( R1 + R3 ) ) by L256 , AFINSQ_1:def 3
.= ( ( R15 /^ R1 ) . R3 ) by L253 , L190;
end;
thus L259: thesis by L251 , L250 , AFINSQ_1:9;
end;
suppose L260: R1 >= ( len R15 );

L261: ( ( len R14 ) + R1 ) >= ( len ( R14 ^ R15 ) ) by L260 , L246 , XREAL_1:6;
thus L262: ( ( R14 ^ R15 ) /^ ( ( len R14 ) + R1 ) ) = ( {} ) by L261 , L194
.= ( R15 /^ R1 ) by L260 , L194;
end;
end;
theorem
L264: (for R14 being XFinSequence holds (for R15 being XFinSequence holds ( ( R14 ^ R15 ) /^ ( len R14 ) ) = R15))
proof
let R14 being XFinSequence;
let R15 being XFinSequence;
thus L265: ( ( R14 ^ R15 ) /^ ( len R14 ) ) = ( ( R14 ^ R15 ) /^ ( ( len R14 ) + (( 0 ) qua (Element of ( NAT ))) ) )
.= ( R15 /^ ( 0 ) ) by L245
.= R15 by L233;
end;
theorem
L266: (for R4 being Nat holds (for R14 being XFinSequence holds ( ( R14 | R4 ) ^ ( R14 /^ R4 ) ) = R14))
proof
let R4 being Nat;
let R14 being XFinSequence;
set D18 = ( R14 /^ R4 );
L267:
now
per cases ;
case L268: ( len R14 ) <= R4;
L269: ( R14 ^ ( {} ) ) = R14;
L270: ( R14 /^ R4 ) = ( {} ) by L268 , L194;
thus L271: thesis by L270 , L268 , L269 , AFINSQ_1:52;
end;
case L272: R4 < ( len R14 );
set D19 = ( R14 | R4 );
L273: ( len D19 ) = R4 by L272 , AFINSQ_1:54;
L274: ( len D18 ) = ( ( len R14 ) - R4 ) by L272 , L199;
L275:
now
let R5 being Nat;
assume L276: R5 < ( len R14 );
L277:
now
per cases ;
case L278: R5 < R4;
L279: R5 in R4 by L278 , NAT_1:44;
thus L280: ( ( ( R14 | R4 ) ^ ( R14 /^ R4 ) ) . R5 ) = ( ( R14 | R4 ) . R5 ) by L279 , L273 , AFINSQ_1:def 3
.= ( R14 . R5 ) by L272 , L279 , AFINSQ_1:53;
end;
case L281: R4 <= R5;
L282: ( max (( 0 ) , ( R5 - R4 )) ) = ( R5 - R4 ) by L281 , FINSEQ_2:4;
reconsider D20 = ( R5 - R4 ) as (Element of ( NAT )) by L282 , FINSEQ_2:5;
L283: D20 < ( len D18 ) by L274 , L276 , XREAL_1:9;
L284: D20 in ( dom D18 ) by L283 , NAT_1:44;
L285: R5 = ( ( len ( R14 | R4 ) ) + D20 ) by L273;
thus L286: ( ( ( R14 | R4 ) ^ ( R14 /^ R4 ) ) . R5 ) = ( D18 . D20 ) by L285 , L284 , AFINSQ_1:def 3
.= ( R14 . ( D20 + R4 ) ) by L284 , L190
.= ( R14 . R5 );
end;
end;
thus L288: ( ( ( R14 | R4 ) ^ ( R14 /^ R4 ) ) . R5 ) = ( R14 . R5 ) by L277;
end;
L289: ( len ( D19 ^ ( R14 /^ R4 ) ) ) = ( R4 + ( ( len R14 ) - R4 ) ) by L274 , L273 , AFINSQ_1:17
.= ( len R14 );
thus L290: thesis by L289 , L275 , AFINSQ_1:9;
end;
end;
thus L292: thesis by L267;
end;
registration
let C37 being set;
let C38 being (XFinSequence of C37);
let R4 being Nat;
cluster ( C38 /^ R4 ) -> C37 -valued;
coherence
proof
deffunc H3((Element of ( NAT ))) = ( C38 . ( $1 + R4 ) );
set D21 = ( C38 /^ R4 );
per cases ;
suppose L293: R4 < ( len C38 );

reconsider D22 = ( ( len C38 ) - R4 ) as Nat by L293 , NAT_1:21;
L294: ( len D21 ) = D22 by L293 , L199;
L295: ( rng D21 ) c= ( rng C38 )
proof
let C39 being set;
assume L296: C39 in ( rng D21 );
consider C40 being (Element of ( NAT )) such that L297: C40 in ( dom D21 ) and L298: ( D21 . C40 ) = C39 by L296 , L94;
L299: C40 < ( len D21 ) by L297 , NAT_1:44;
L300: ( C40 + R4 ) < ( D22 + R4 ) by L299 , L294 , XREAL_1:6;
L301: ( C40 + R4 ) in ( dom C38 ) by L300 , NAT_1:44;
L302: ( D21 . C40 ) = ( C38 . ( C40 + R4 ) ) by L297 , L190;
thus L303: thesis by L302 , L298 , L301 , FUNCT_1:def 3;
end;
L304: (for B16 being XFinSequence holds (( rng B16 ) c= C37 implies B16 is (XFinSequence of C37))) by RELAT_1:def 19;
thus L305: thesis by L304 , L295 , XBOOLE_1:1;
end;
suppose L306: ( len C38 ) <= R4;

L307: ( C38 /^ R4 ) = ( <%> C37 ) by L306 , L194;
thus L308: thesis by L307;
end;
end;
end;
definition
let R14 being XFinSequence;
let R16 being Nat;
let R17 being Nat;
func mid (R14 , R16 , R17) -> XFinSequence equals 
( ( R14 | R17 ) /^ ( R16 -' 1 ) );
coherence;
end;
theorem
L312: (for R14 being XFinSequence holds (for R16 being Nat holds (for R17 being Nat holds (R16 > R17 implies ( mid (R14 , R16 , R17) ) = ( {} )))))
proof
let R14 being XFinSequence;
let R16 being Nat;
let R17 being Nat;
set D23 = R17;
L313: ( len ( R14 | D23 ) ) <= D23 by AFINSQ_1:55;
assume L314: R16 > R17;
L315: R16 >= ( (( 0 ) qua Nat) + 1 ) by L314 , NAT_1:13;
L316: ( R16 -' 1 ) = ( R16 - 1 ) by L315 , XREAL_1:233;
L317: R16 >= ( R17 + 1 ) by L314 , NAT_1:13;
L318: ( R16 - 1 ) >= ( ( R17 + 1 ) - 1 ) by L317 , XREAL_1:9;
thus L319: thesis by L318 , L316 , L313 , L194 , XXREAL_0:2;
end;
theorem
L320: (for R14 being XFinSequence holds (for R16 being Nat holds (for R17 being Nat holds ((1 <= R16 & R17 <= ( len R14 )) implies ( mid (R14 , R16 , R17) ) = ( ( R14 /^ ( R16 -' 1 ) ) | ( ( R17 + 1 ) -' R16 ) )))))
proof
let R14 being XFinSequence;
let R16 being Nat;
let R17 being Nat;
assume that
L321: 1 <= R16
and
L322: R17 <= ( len R14 );
set D24 = R16;
set D25 = R17;
L323: ( len ( R14 | D25 ) ) = D25 by L322 , AFINSQ_1:54;
L324: R16 < ( R16 + 1 ) by NAT_1:13;
L325: ( R16 - 1 ) < ( ( R16 + 1 ) - 1 ) by L324 , XREAL_1:9;
L326: ( R16 -' 1 ) < R16 by L325 , L321 , XREAL_1:233;
per cases ;
suppose L327: R16 <= R17;

L328: R17 < ( R17 + 1 ) by XREAL_1:29;
L329: ( ( R17 + 1 ) -' R16 ) = ( ( R17 + 1 ) - R16 ) by L328 , L327 , XREAL_1:233 , XXREAL_0:2
.= ( R17 - ( R16 - 1 ) );
L330: ( D24 -' 1 ) = ( D24 - 1 ) by L321 , XREAL_1:233;
L331: ( D24 - 1 ) < D24 by XREAL_1:44;
L332: ( D24 - 1 ) < D25 by L331 , L327 , XXREAL_0:2;
L333: ( len ( mid (R14 , R16 , R17) ) ) = ( D25 - ( D24 - 1 ) ) by L332 , L323 , L330 , L199;
L334: ( len ( mid (R14 , R16 , R17) ) ) = ( ( D25 + 1 ) - D24 ) by L333;
L335: ( R16 -' 1 ) < R17 by L326 , L327 , XXREAL_0:2;
L336: ( R16 -' 1 ) < ( len R14 ) by L335 , L322 , XXREAL_0:2;
L337: ( len ( R14 /^ ( R16 -' 1 ) ) ) = ( ( len R14 ) - ( R16 -' 1 ) ) by L336 , L199;
L338: ( ( R17 + 1 ) -' R16 ) <= ( len ( R14 /^ ( R16 -' 1 ) ) ) by L337 , L322 , L330 , L329 , XREAL_1:9;
L339: (for R1 being Nat holds (R1 < ( len ( mid (R14 , R16 , R17) ) ) implies ( ( mid (R14 , R16 , R17) ) . R1 ) = ( ( ( R14 /^ ( R16 -' 1 ) ) | ( ( R17 + 1 ) -' R16 ) ) . R1 )))
proof
let R1 being Nat;
assume L340: R1 < ( len ( mid (R14 , R16 , R17) ) );
L341: ( R1 + ( D24 -' 1 ) ) < D25 by L340 , L330 , L333 , XREAL_1:20;
L342: ( R1 + ( D24 -' 1 ) ) in D25 by L341 , NAT_1:44;
L343: ( R1 + ( R16 -' 1 ) ) < ( ( D25 - ( D24 - 1 ) ) + ( R16 -' 1 ) ) by L333 , L340 , XREAL_1:6;
L344: ( R1 + ( R16 -' 1 ) ) < ( len R14 ) by L343 , L322 , L330 , XXREAL_0:2;
L345: ( R1 + ( D24 - 1 ) ) < D25 by L333 , L340 , XREAL_1:20;
L346: ( ( ( R14 | D25 ) /^ ( D24 -' 1 ) ) . R1 ) = ( ( R14 | D25 ) . ( R1 + ( D24 -' 1 ) ) ) by L345 , L323 , L330 , L204;
L347: R1 in ( ( R17 + 1 ) -' R16 ) by L329 , L333 , L340 , NAT_1:44;
L348: ( ( ( R14 /^ ( R16 -' 1 ) ) | ( ( R17 + 1 ) -' R16 ) ) . R1 ) = ( ( R14 /^ ( R16 -' 1 ) ) . R1 ) by L347 , L338 , AFINSQ_1:53
.= ( R14 . ( R1 + ( R16 -' 1 ) ) ) by L344 , L204;
thus L349: thesis by L348 , L322 , L346 , L342 , AFINSQ_1:53;
end;
L350: ( len ( ( R14 /^ ( R16 -' 1 ) ) | ( ( R17 + 1 ) -' R16 ) ) ) = ( ( R17 + 1 ) -' R16 ) by L338 , AFINSQ_1:54;
L351: ( len ( mid (R14 , R16 , R17) ) ) = ( len ( ( R14 /^ ( R16 -' 1 ) ) | ( ( R17 + 1 ) -' R16 ) ) ) by L350 , L327 , L328 , L334 , XREAL_1:233 , XXREAL_0:2;
thus L352: thesis by L351 , L339 , AFINSQ_1:9;
end;
suppose L353: R16 > R17;

L354: ( R17 + 1 ) <= R16 by L353 , NAT_1:13;
L355: ( ( R17 + 1 ) -' R16 ) = ( 0 ) by L354 , NAT_2:8;
L356: ( mid (R14 , R16 , R17) ) = ( {} ) by L353 , L312;
thus L357: thesis by L356 , L355;
end;
end;
theorem
L359: (for R3 being Nat holds (for R14 being XFinSequence holds ( mid (R14 , 1 , R3) ) = ( R14 | R3 )))
proof
let R3 being Nat;
let R14 being XFinSequence;
L360: ( 1 -' 1 ) = ( 0 ) by XREAL_1:232;
thus L361: thesis by L360 , L233;
end;
theorem
L362: (for R3 being Nat holds (for R14 being XFinSequence holds (( len R14 ) <= R3 implies ( mid (R14 , 1 , R3) ) = R14)))
proof
let R3 being Nat;
let R14 being XFinSequence;
assume L363: ( len R14 ) <= R3;
thus L364: ( mid (R14 , 1 , R3) ) = ( R14 | R3 ) by L359
.= R14 by L363 , AFINSQ_1:52;
end;
theorem
L365: (for R3 being Nat holds (for R14 being XFinSequence holds ( mid (R14 , ( 0 ) , R3) ) = ( mid (R14 , 1 , R3) )))
proof
let R3 being Nat;
let R14 being XFinSequence;
L366: ( ( 0 ) -' 1 ) = ( 0 ) by NAT_2:8;
L367: ( mid (R14 , 1 , R3) ) = ( R14 | R3 ) by L359;
thus L368: thesis by L367 , L366 , L233;
end;
theorem
L369: (for R14 being XFinSequence holds (for R15 being XFinSequence holds ( mid (( R14 ^ R15 ) , ( ( len R14 ) + 1 ) , ( ( len R14 ) + ( len R15 ) )) ) = R15))
proof
let R14 being XFinSequence;
let R15 being XFinSequence;
L370: ( ( ( len R14 ) + 1 ) -' 1 ) = ( len R14 ) by NAT_D:34;
L371: ( len ( R14 ^ R15 ) ) = ( ( len R14 ) + ( len R15 ) ) by AFINSQ_1:17;
L372: ( ( R14 ^ R15 ) | ( ( len R14 ) + ( len R15 ) ) ) = ( R14 ^ R15 ) by L371 , AFINSQ_1:52;
thus L373: thesis by L372 , L370 , L264;
end;
registration
let C41 being set;
let C42 being (XFinSequence of C41);
let R16 being Nat;
let R17 being Nat;
cluster ( mid (C42 , R16 , R17) ) -> C41 -valued;
coherence;
end;
begin
definition
let C43 being  finite  natural-membered set;
func Sgm0 C43 -> (XFinSequence of ( NAT )) means 
:L375: (( rng it ) = C43 & (for B17 , B18 , B19 , B20 being Nat holds ((B17 < B18 & B18 < ( len it ) & B19 = ( it . B17 ) & B20 = ( it . B18 )) implies B19 < B20)));
existence
proof
defpred S2[ Nat ] means (for B21 being set holds (B21 c= $1 implies (ex B22 being (XFinSequence of ( NAT )) st (( rng B22 ) = B21 & (for B23 , B24 , B25 , B26 being Nat holds ((B23 < B24 & B24 < ( len B22 ) & B25 = ( B22 . B23 ) & B26 = ( B22 . B24 )) implies B25 < B26))))));
L376: (ex B27 being Nat st C43 c= B27) by L45;
L377: (for B28 being Nat holds (S2[ B28 ] implies S2[ ( B28 + 1 ) ]))
proof
let C44 being Nat;
assume that
L378: (for B29 being set holds (B29 c= C44 implies (ex B30 being (XFinSequence of ( NAT )) st (( rng B30 ) = B29 & (for B31 , B32 , B33 , B34 being Nat holds ((B31 < B32 & B32 < ( len B30 ) & B33 = ( B30 . B31 ) & B34 = ( B30 . B32 )) implies B33 < B34))))));
let C45 being set;
assume L379: C45 c= ( C44 + 1 );
L380:
now
set D26 = ( C45 \ { C44 } );
assume L381: (not C45 c= C44);
consider R6 being set such that L382: R6 in C45 and L383: (not R6 in C44) by L381 , TARSKI:def 3;
reconsider D27 = R6 as (Element of ( NAT )) by L379 , L382 , L38;
L384: D27 < ( C44 + 1 ) by L379 , L382 , NAT_1:44;
L385: D27 <= C44 by L384 , NAT_1:13;
L386: (not D27 < C44) by L383 , NAT_1:44;
L387: D27 = C44 by L386 , L385 , XXREAL_0:1;
L388: D26 c= C44
proof
let R6 being set;
assume L389: R6 in D26;
L390: R6 in C45 by L389;
reconsider D28 = R6 as (Element of ( NAT )) by L390 , L379 , L38;
L391: (not R6 in { C44 }) by L389 , XBOOLE_0:def 5;
L392: D28 <> C44 by L391 , TARSKI:def 1;
L393: D28 < ( C44 + 1 ) by L379 , L390 , NAT_1:44;
L394: D28 <= C44 by L393 , NAT_1:13;
L395: D28 < C44 by L394 , L392 , XXREAL_0:1;
thus L396: thesis by L395 , NAT_1:44;
end;
consider C46 being (XFinSequence of ( NAT )) such that L397: ( rng C46 ) = D26 and L398: (for B35 , B36 , B37 , B38 being Nat holds ((B35 < B36 & B36 < ( len C46 ) & B37 = ( C46 . B35 ) & B38 = ( C46 . B36 )) implies B37 < B38)) by L388 , L378;
reconsider D29 = C44 as (Element of ( NAT )) by ORDINAL1:def 12;
consider C47 being (XFinSequence of ( NAT )) such that L399: C47 = ( C46 ^ <% D29 %> );
L400: (for B39 , B40 , B41 , B42 being Nat holds ((B39 < B40 & B40 < ( len C47 ) & B41 = ( C47 . B39 ) & B42 = ( C47 . B40 )) implies B41 < B42))
proof
let C48 , C49 , C50 , C51 being Nat;
assume that
L401: C48 < C49
and
L402: C49 < ( len C47 )
and
L403: C50 = ( C47 . C48 )
and
L404: C51 = ( C47 . C49 );
L405: ( C49 + 1 ) <= ( len C47 ) by L402 , NAT_1:13;
L406: C49 <= ( ( len C47 ) - 1 ) by L405 , XREAL_1:19;
L407: C48 < ( ( len ( C46 ^ <% D29 %> ) ) - 1 ) by L406 , L399 , L401 , XXREAL_0:2;
L408: C48 < ( ( ( len C46 ) + ( len <% D29 %> ) ) - 1 ) by L407 , AFINSQ_1:17;
L409: C48 < ( ( ( len C46 ) + 1 ) - 1 ) by L408 , AFINSQ_1:34;
L410: C48 in ( dom C46 ) by L409 , NAT_1:44;
L411: C49 <= ( ( len C47 ) -' 1 ) by L406 , XREAL_0:def 2;
L412:
now
L413: C50 = ( C46 . C48 ) by L399 , L403 , L410 , AFINSQ_1:def 3;
assume L414: C49 <> ( ( len C47 ) -' 1 );
L415: C49 < ( ( len ( C46 ^ <% D29 %> ) ) -' 1 ) by L414 , L399 , L411 , XXREAL_0:1;
L416: C49 < ( ( ( len C46 ) + ( len <% D29 %> ) ) -' 1 ) by L415 , AFINSQ_1:17;
L417: C49 < ( ( ( len C46 ) + 1 ) -' 1 ) by L416 , AFINSQ_1:34;
L418: C49 < ( len C46 ) by L417 , NAT_D:34;
L419: C49 in ( dom C46 ) by L418 , NAT_1:44;
L420: C51 = ( C46 . C49 ) by L419 , L399 , L404 , AFINSQ_1:def 3;
thus L421: thesis by L420 , L398 , L401 , L418 , L413;
end;
L422:
now
assume L423: C49 = ( ( len C47 ) -' 1 );
L424: ( C47 . C49 ) = ( ( C46 ^ <% D29 %> ) . ( ( ( len C46 ) + ( len <% D29 %> ) ) -' 1 ) ) by L423 , L399 , AFINSQ_1:17
.= ( ( C46 ^ <% D29 %> ) . ( ( ( len C46 ) + 1 ) -' 1 ) ) by AFINSQ_1:34
.= ( ( C46 ^ <% D29 %> ) . ( len C46 ) ) by NAT_D:34
.= D29 by AFINSQ_1:36;
L425: C50 = ( C46 . C48 ) by L399 , L403 , L410 , AFINSQ_1:def 3;
L426: C50 in D26 by L425 , L397 , L410 , FUNCT_1:def 3;
thus L427: thesis by L426 , L388 , L404 , L424 , NAT_1:44;
end;
thus L428: thesis by L422 , L412;
end;
L429: { D29 } c= C45 by L382 , L387 , ZFMISC_1:31;
L430: ( rng C47 ) = ( ( rng C46 ) \/ ( rng <% D29 %> ) ) by L399 , AFINSQ_1:26
.= ( D26 \/ { D29 } ) by L397 , AFINSQ_1:33
.= ( C45 \/ { D29 } ) by XBOOLE_1:39
.= C45 by L429 , XBOOLE_1:12;
thus L431: thesis by L430 , L400;
end;
thus L432: thesis by L380 , L378;
end;
L433: S2[ ( 0 ) ]
proof
let C52 being set;
assume L434: C52 c= ( 0 );
take ( <%> ( NAT ) );
thus L435: ( rng ( <%> ( NAT ) ) ) = C52 by L434;
thus L436: thesis;
end;
L437: (for B43 being Nat holds S2[ B43 ]) from NAT_1:sch 2(L433 , L377);
thus L438: thesis by L437 , L376;
end;
uniqueness
proof
defpred S3[ XFinSequence ] means (for R11 being set holds ((ex B44 being Nat st R11 c= B44) implies (($1 is (XFinSequence of ( NAT )) & ( rng $1 ) = R11 & (for B45 , B46 , B47 , B48 being Nat holds ((B45 < B46 & B46 < ( len $1 ) & B47 = ( $1 . B45 ) & B48 = ( $1 . B46 )) implies B47 < B48))) implies (for B49 being (XFinSequence of ( NAT )) holds ((( rng B49 ) = R11 & (for B50 , B51 , B52 , B53 being Nat holds ((B50 < B51 & B51 < ( len B49 ) & B52 = ( B49 . B50 ) & B53 = ( B49 . B51 )) implies B52 < B53))) implies B49 = $1)))));
let C53 , C54 being (XFinSequence of ( NAT ));
assume that
L439: ( rng C53 ) = C43
and
L440: (for B54 , B55 , B56 , B57 being Nat holds ((B54 < B55 & B55 < ( len C53 ) & B56 = ( C53 . B54 ) & B57 = ( C53 . B55 )) implies B56 < B57))
and
L441: ( rng C54 ) = C43
and
L442: (for B58 , B59 , B60 , B61 being Nat holds ((B58 < B59 & B59 < ( len C54 ) & B60 = ( C54 . B58 ) & B61 = ( C54 . B59 )) implies B60 < B61));
L443: (for B62 being XFinSequence holds (for B63 being set holds (S3[ B62 ] implies S3[ ( B62 ^ <% B63 %> ) ])))
proof
let C55 being XFinSequence;
let C56 being set;
assume L444: S3[ C55 ];
let C57 being set;
given C58 being Nat such that
L445: C57 c= C58;

assume that
L446: ( C55 ^ <% C56 %> ) is (XFinSequence of ( NAT ))
and
L447: ( rng ( C55 ^ <% C56 %> ) ) = C57
and
L448: (for B64 , B65 , B66 , B67 being Nat holds ((B64 < B65 & B65 < ( len ( C55 ^ <% C56 %> ) ) & B66 = ( ( C55 ^ <% C56 %> ) . B64 ) & B67 = ( ( C55 ^ <% C56 %> ) . B65 )) implies B66 < B67));
let C59 being (XFinSequence of ( NAT ));
assume that
L449: ( rng C59 ) = C57
and
L450: (for B68 , B69 , B70 , B71 being Nat holds ((B68 < B69 & B69 < ( len C59 ) & B70 = ( C59 . B68 ) & B71 = ( C59 . B69 )) implies B70 < B71));
deffunc H4(Nat) = ( C59 . $1 );
L451: ( len C59 ) <> ( 0 )
proof
assume L452: ( len C59 ) = ( 0 );
L453: ( C55 ^ <% C56 %> ) = ( {} ) by L452 , L447 , L449 , AFINSQ_1:15 , RELAT_1:38;
L454: ( 0 ) = ( len ( C55 ^ <% C56 %> ) ) by L453
.= ( ( len C55 ) + ( len <% C56 %> ) ) by AFINSQ_1:17
.= ( 1 + ( len C55 ) ) by AFINSQ_1:34;
thus L455: contradiction by L454;
end;
consider C60 being Nat such that L456: ( len C59 ) = ( C60 + 1 ) by L451 , NAT_1:6;
L457: (ex B72 being Nat st (B72 = C56 & (for B73 being Nat holds ((B73 in C57 & B73 <> C56) implies B73 < B72))))
proof
L458: <% C56 %> is (XFinSequence of ( NAT )) by L446 , AFINSQ_1:31;
L459: ( rng <% C56 %> ) c= ( NAT ) by L458 , RELAT_1:def 19;
L460: { C56 } c= ( NAT ) by L459 , AFINSQ_1:33;
reconsider D30 = C56 as (Element of ( NAT )) by L460 , ZFMISC_1:31;
take D30;
thus L461: D30 = C56;
thus L462: (for B74 being Nat holds ((B74 in C57 & B74 <> C56) implies B74 < D30))
proof
L463: ( len <% C56 %> ) = 1 by AFINSQ_1:34;
L464: D30 = ( ( C55 ^ <% C56 %> ) . ( ( ( len C55 ) + ( len <% C56 %> ) ) - 1 ) ) by L463 , AFINSQ_1:36
.= ( ( C55 ^ <% C56 %> ) . ( ( len ( C55 ^ <% C56 %> ) ) - 1 ) ) by AFINSQ_1:17;
L465: ( len ( C55 ^ <% C56 %> ) ) < ( ( len ( C55 ^ <% C56 %> ) ) + 1 ) by XREAL_1:29;
L466: ( ( len ( C55 ^ <% C56 %> ) ) - 1 ) < ( len ( C55 ^ <% C56 %> ) ) by L465 , XREAL_1:19;
let C61 being Nat;
assume that
L467: C61 in C57
and
L468: C61 <> C56;
consider R7 being set such that L469: R7 in ( dom ( C55 ^ <% C56 %> ) ) and L470: C61 = ( ( C55 ^ <% C56 %> ) . R7 ) by L447 , L467 , FUNCT_1:def 3;
reconsider D31 = R7 as (Element of ( NAT )) by L469;
L471: D31 < ( len ( C55 ^ <% C56 %> ) ) by L469 , NAT_1:44;
L472: D31 < ( ( len C55 ) + ( len <% C56 %> ) ) by L471 , AFINSQ_1:17;
L473: D31 < ( ( len C55 ) + 1 ) by L472 , AFINSQ_1:34;
L474: D31 <= ( len C55 ) by L473 , NAT_1:13;
L475: D31 <> ( len C55 ) by L468 , L470 , AFINSQ_1:36;
L476: D31 < ( ( ( len C55 ) + 1 ) - 1 ) by L475 , L474 , XXREAL_0:1;
L477: D31 < ( ( ( len C55 ) + ( len <% C56 %> ) ) - 1 ) by L476 , AFINSQ_1:34;
L478: D31 < ( ( len ( C55 ^ <% C56 %> ) ) - 1 ) by L477 , AFINSQ_1:17;
L479: ( ( len ( C55 ^ <% C56 %> ) ) -' 1 ) = ( ( len ( C55 ^ <% C56 %> ) ) - 1 ) by L478 , XREAL_0:def 2;
thus L480: thesis by L479 , L448 , L470 , L478 , L466 , L464;
end;

end;
reconsider D32 = C56 as Nat by L457;
L463: (not C56 in ( rng C55 ))
proof
L464: ( ( len C55 ) + 1 ) = ( ( len C55 ) + ( len <% C56 %> ) ) by AFINSQ_1:34
.= ( len ( C55 ^ <% C56 %> ) ) by AFINSQ_1:17;
L465: ( len C55 ) < ( len ( C55 ^ <% C56 %> ) ) by L464 , XREAL_1:29;
L466: D32 = ( ( C55 ^ <% C56 %> ) . ( len C55 ) ) by AFINSQ_1:36;
assume L467: C56 in ( rng C55 );
consider R7 being set such that L468: R7 in ( dom C55 ) and L469: C56 = ( C55 . R7 ) by L467 , FUNCT_1:def 3;
reconsider D33 = R7 as (Element of ( NAT )) by L468;
L470: D33 < ( len C55 ) by L468 , NAT_1:44;
L471: D32 = ( ( C55 ^ <% C56 %> ) . D33 ) by L468 , L469 , AFINSQ_1:def 3;
thus L472: contradiction by L471 , L448 , L470 , L465 , L466;
end;
L473: (for R8 being set holds (R8 in ( ( ( rng C55 ) \/ { C56 } ) \ { C56 } ) iff R8 in ( rng C55 )))
proof
let R8 being set;
thus L474: (R8 in ( ( ( rng C55 ) \/ { C56 } ) \ { C56 } ) implies R8 in ( rng C55 ))
proof
assume L475: R8 in ( ( ( rng C55 ) \/ { C56 } ) \ { C56 } );
L476: (not R8 in { C56 }) by L475 , XBOOLE_0:def 5;
thus L477: thesis by L476 , L475 , XBOOLE_0:def 3;
end;

assume L478: R8 in ( rng C55 );
L479: R8 in ( ( rng C55 ) \/ { C56 } ) by L478 , XBOOLE_0:def 3;
L480: (not R8 in { C56 }) by L463 , L478 , TARSKI:def 1;
thus L481: thesis by L480 , L479 , XBOOLE_0:def 5;
end;
deffunc H5(set) = ( C59 . $1 );
consider C62 being XFinSequence such that L482: ( len C62 ) = C60 and L483: (for B75 being Nat holds (B75 in C60 implies ( C62 . B75 ) = H5(B75))) from AFINSQ_1:sch 2;
L484:
now
let R6 being set;
assume L485: R6 in ( rng C62 );
consider R7 being set such that L486: R7 in ( dom C62 ) and L487: R6 = ( C62 . R7 ) by L485 , FUNCT_1:def 3;
reconsider D34 = R7 as (Element of ( NAT )) by L486;
L488: ( C59 . D34 ) in ( NAT );
thus L489: R6 in ( NAT ) by L488 , L482 , L483 , L486 , L487;
end;
L490: ( rng C62 ) c= ( NAT ) by L484 , TARSKI:def 3;
reconsider D35 = C62 as (XFinSequence of ( NAT )) by L490 , RELAT_1:def 19;
L491: C55 is (XFinSequence of ( NAT )) by L446 , AFINSQ_1:31;
L492: (for B76 being Nat holds (B76 in ( dom <% C56 %> ) implies ( C59 . ( ( len C62 ) + B76 ) ) = ( <% C56 %> . B76 )))
proof
let C63 being Nat;
assume L493: C63 in ( dom <% C56 %> );
L494: C63 in ( len <% C56 %> ) by L493;
L495: C63 in 1 by L494 , AFINSQ_1:34;
L496: ( (( 0 ) qua (Element of ( NAT ))) + 1 ) = ( ( 0 ) \/ { ( 0 ) } ) by AFINSQ_1:2;
L497: C63 = ( 0 ) by L496 , L495 , TARSKI:def 1;
L498: ( C59 . ( ( len C62 ) + C63 ) ) = C56
proof
L499: C56 in { C56 } by TARSKI:def 1;
L500: C56 in ( rng <% C56 %> ) by L499 , AFINSQ_1:33;
L501: C56 in ( ( rng C55 ) \/ ( rng <% C56 %> ) ) by L500 , XBOOLE_0:def 3;
L502: C56 in ( rng C59 ) by L501 , L447 , L449 , AFINSQ_1:26;
consider R7 being set such that L503: R7 in ( dom C59 ) and L504: C56 = ( C59 . R7 ) by L502 , FUNCT_1:def 3;
reconsider D36 = R7 as (Element of ( NAT )) by L503;
L505: D36 < ( len C59 ) by L503 , NAT_1:44;
L506: ( D36 + 1 ) <= ( len C59 ) by L505 , NAT_1:13;
L507: D36 <= ( ( len C59 ) - 1 ) by L506 , XREAL_1:19;
L508: ( len C59 ) < ( ( len C59 ) + 1 ) by XREAL_1:29;
L509: ( ( len C59 ) - 1 ) < ( len C59 ) by L508 , XREAL_1:19;
L510: ( ( len C59 ) - 1 ) in ( dom C59 ) by L509 , L456 , NAT_1:44;
L511: ( C59 . ( ( len C59 ) - 1 ) ) in C57 by L510 , L449 , FUNCT_1:def 3;
L512: ( len C59 ) < ( ( len C59 ) + 1 ) by XREAL_1:29;
L513: ((D36 < ( ( len C59 ) - 1 ) & ( ( len C59 ) - 1 ) < ( len C59 )) or D36 = ( ( len C59 ) - 1 )) by L512 , L507 , XREAL_1:19 , XXREAL_0:1;
set D37 = ( C59 . ( ( len C59 ) - 1 ) );
consider C64 being Nat such that L514: C64 = C56 and L515: (for B77 being Nat holds ((B77 in C57 & B77 <> C56) implies B77 < C64)) by L457;
assume L516: ( C59 . ( ( len C62 ) + C63 ) ) <> C56;
L517: D37 < C64 by L516 , L456 , L482 , L497 , L515 , L511;
thus L518: contradiction by L517 , L450 , L456 , L514 , L504 , L513;
end;
thus L519: thesis by L498 , L497 , AFINSQ_1:34;
end;
L520: ( dom C59 ) = ( ( len C62 ) + ( len <% C56 %> ) ) by L456 , L482 , AFINSQ_1:34;
L521: ( C62 ^ <% C56 %> ) = C59 by L520 , L482 , L483 , L492 , AFINSQ_1:def 3;
L522: (not C56 in ( rng D35 ))
proof
L523: ( ( len D35 ) + 1 ) = ( ( len D35 ) + ( len <% C56 %> ) ) by AFINSQ_1:34
.= ( len ( D35 ^ <% C56 %> ) ) by AFINSQ_1:17;
L524: ( len D35 ) < ( len ( D35 ^ <% C56 %> ) ) by L523 , XREAL_1:29;
L525: D32 = ( C59 . ( len D35 ) ) by L521 , AFINSQ_1:36;
assume L526: C56 in ( rng D35 );
consider R7 being set such that L527: R7 in ( dom D35 ) and L528: C56 = ( D35 . R7 ) by L526 , FUNCT_1:def 3;
reconsider D38 = R7 as (Element of ( NAT )) by L527;
L529: D38 < ( len D35 ) by L527 , NAT_1:44;
L530: D32 = ( C59 . D38 ) by L482 , L483 , L527 , L528;
thus L531: contradiction by L530 , L450 , L521 , L529 , L524 , L525;
end;
L532: (for R8 being set holds (R8 in ( ( ( rng D35 ) \/ { C56 } ) \ { C56 } ) iff R8 in ( rng D35 )))
proof
let R8 being set;
thus L533: (R8 in ( ( ( rng D35 ) \/ { C56 } ) \ { C56 } ) implies R8 in ( rng D35 ))
proof
assume L534: R8 in ( ( ( rng D35 ) \/ { C56 } ) \ { C56 } );
L535: (not R8 in { C56 }) by L534 , XBOOLE_0:def 5;
thus L536: thesis by L535 , L534 , XBOOLE_0:def 3;
end;

assume L537: R8 in ( rng D35 );
L538: R8 in ( ( rng D35 ) \/ { C56 } ) by L537 , XBOOLE_0:def 3;
L539: (not R8 in { C56 }) by L522 , L537 , TARSKI:def 1;
thus L540: thesis by L539 , L538 , XBOOLE_0:def 5;
end;
L541: C57 = ( ( rng C55 ) \/ ( rng <% C56 %> ) ) by L447 , AFINSQ_1:26
.= ( ( rng C55 ) \/ { C56 } ) by AFINSQ_1:33;
L542: ( rng C55 ) = ( C57 \ { C56 } ) by L541 , L473 , TARSKI:1;
L543: (for B78 , B79 , B80 , B81 being Nat holds ((B78 < B79 & B79 < ( len C55 ) & B80 = ( C55 . B78 ) & B81 = ( C55 . B79 )) implies B80 < B81))
proof
let C65 , C66 , C67 , C68 being Nat;
assume that
L544: C65 < C66
and
L545: C66 < ( len C55 )
and
L546: C67 = ( C55 . C65 )
and
L547: C68 = ( C55 . C66 );
L548: C65 < ( len C55 ) by L544 , L545 , XXREAL_0:2;
L549: C65 in ( dom C55 ) by L548 , NAT_1:44;
L550: C67 = ( ( C55 ^ <% C56 %> ) . C65 ) by L549 , L546 , AFINSQ_1:def 3;
L551: ( len C55 ) < ( ( len C55 ) + 1 ) by XREAL_1:29;
L552: C66 < ( ( len C55 ) + 1 ) by L551 , L545 , XXREAL_0:2;
L553: C66 < ( ( len C55 ) + ( len <% C56 %> ) ) by L552 , AFINSQ_1:34;
L554: C66 < ( len ( C55 ^ <% C56 %> ) ) by L553 , AFINSQ_1:17;
L555: C66 in ( dom C55 ) by L545 , NAT_1:44;
L556: C68 = ( ( C55 ^ <% C56 %> ) . C66 ) by L555 , L547 , AFINSQ_1:def 3;
thus L557: thesis by L556 , L448 , L544 , L550 , L554;
end;
L558: (for B82 , B83 , B84 , B85 being Nat holds ((B82 < B83 & B83 < ( len D35 ) & B84 = ( D35 . B82 ) & B85 = ( D35 . B83 )) implies B84 < B85))
proof
let C69 , C70 , C71 , C72 being Nat;
assume that
L559: C69 < C70
and
L560: C70 < ( len D35 )
and
L561: C71 = ( D35 . C69 )
and
L562: C72 = ( D35 . C70 );
L563: C70 in C60 by L482 , L560 , NAT_1:44;
L564: C72 = ( C59 . C70 ) by L563 , L483 , L562;
L565: C69 < C60 by L482 , L559 , L560 , XXREAL_0:2;
L566: C69 in C60 by L565 , NAT_1:44;
L567: C71 = ( C59 . C69 ) by L566 , L483 , L561;
L568: C70 < ( len C59 ) by L456 , L482 , L560 , NAT_1:13;
thus L569: thesis by L568 , L450 , L559 , L567 , L564;
end;
L570: C57 = ( ( rng D35 ) \/ ( rng <% C56 %> ) ) by L449 , L521 , AFINSQ_1:26
.= ( ( rng D35 ) \/ { C56 } ) by AFINSQ_1:33;
L571: ( rng D35 ) = ( C57 \ { C56 } ) by L570 , L532 , TARSKI:1;
L572: (ex B86 being Nat st ( C57 \ { C56 } ) c= B86) by L445 , XBOOLE_1:1;
L573: C62 = C55 by L572 , L444 , L543 , L491 , L542 , L558 , L571;
thus L574: thesis by L573 , L482 , L483 , L520 , L492 , AFINSQ_1:def 3;
end;
L575: S3[ ( {} ) ];
L576: (for B87 being XFinSequence holds S3[ B87 ]) from AFINSQ_1:sch 3(L575 , L443);
L577: (ex B88 being Nat st C43 c= B88) by L45;
thus L578: thesis by L577 , L439 , L440 , L441 , L442 , L576;
end;
end;
registration
let C73 being  finite  natural-membered set;
cluster ( Sgm0 C73 ) ->  one-to-one;
coherence
proof
L580: (for B89 , B90 being set holds ((B89 in ( dom ( Sgm0 C73 ) ) & B90 in ( dom ( Sgm0 C73 ) ) & ( ( Sgm0 C73 ) . B89 ) = ( ( Sgm0 C73 ) . B90 ) & B89 <> B90) implies contradiction))
proof
let C74 , C75 being set;
assume that
L581: C74 in ( dom ( Sgm0 C73 ) )
and
L582: C75 in ( dom ( Sgm0 C73 ) )
and
L583: ( ( Sgm0 C73 ) . C74 ) = ( ( Sgm0 C73 ) . C75 )
and
L584: C74 <> C75;
reconsider D39 = C74 , D40 = C75 as (Element of ( NAT )) by L581 , L582;
per cases  by L584 , XXREAL_0:1;
suppose L585: D39 < D40;

L586: D40 < ( len ( Sgm0 C73 ) ) by L582 , NAT_1:44;
thus L587: contradiction by L586 , L583 , L585 , L375;
end;
suppose L588: D40 < D39;

L589: D39 < ( len ( Sgm0 C73 ) ) by L581 , NAT_1:44;
thus L590: contradiction by L589 , L583 , L588 , L375;
end;
end;
thus L592: thesis by L580 , FUNCT_1:def 4;
end;
end;
theorem
L594: (for B91 being  finite  natural-membered set holds ( len ( Sgm0 B91 ) ) = ( card B91 ))
proof
let C76 being  finite  natural-membered set;
L595: ( rng ( Sgm0 C76 ) ) = C76 by L375;
L596: ( len ( Sgm0 C76 ) ) , C76 are_equipotent  by L595 , WELLORD2:def 4;
L597: ( card C76 ) = ( card ( len ( Sgm0 C76 ) ) ) by L596 , CARD_1:5;
thus L598: thesis by L597;
end;
theorem
L599: (for B92 , B93 being  finite  natural-membered set holds ((B92 c= B93 & B92 <> ( {} )) implies ( ( Sgm0 B93 ) . ( 0 ) ) <= ( ( Sgm0 B92 ) . ( 0 ) )))
proof
let C77 , C78 being  finite  natural-membered set;
assume that
L600: C77 c= C78
and
L601: C77 <> ( {} );
reconsider D41 = C77 as  finite set;
L602: ( 0 ) <> ( card D41 ) by L601;
L603: ( 0 ) < ( len ( Sgm0 C77 ) ) by L602 , L594;
L604: ( 0 ) in ( dom ( Sgm0 C77 ) ) by L603 , NAT_1:44;
L605: ( rng ( Sgm0 C78 ) ) = C78 by L375;
L606: ( rng ( Sgm0 C77 ) ) = C77 by L375;
L607: ( ( Sgm0 C77 ) . ( 0 ) ) in C77 by L606 , L604 , FUNCT_1:def 3;
consider C79 being set such that L608: C79 in ( dom ( Sgm0 C78 ) ) and L609: ( ( Sgm0 C78 ) . C79 ) = ( ( Sgm0 C77 ) . ( 0 ) ) by L607 , L600 , L605 , FUNCT_1:def 3;
reconsider D42 = C79 as Nat by L608;
L610: D42 < ( len ( Sgm0 C78 ) ) by L608 , NAT_1:44;
L611:
now
per cases ;
case L612: ( 0 ) <> D42;
thus L613: thesis by L612 , L609 , L610 , L375;
end;
case L614: ( 0 ) = D42;
thus L615: thesis by L614 , L609;
end;
end;
thus L617: thesis by L611;
end;
theorem
L618: (for R4 being Nat holds ( ( Sgm0 { R4 } ) . ( 0 ) ) = R4)
proof
let R4 being Nat;
L619: ( len ( Sgm0 { R4 } ) ) = ( card { R4 } ) by L594;
L620: ( 0 ) in ( dom ( Sgm0 { R4 } ) ) by L619 , NAT_1:44;
L621: ( ( Sgm0 { R4 } ) . ( 0 ) ) in ( rng ( Sgm0 { R4 } ) ) by L620 , FUNCT_1:def 3;
L622: ( rng ( Sgm0 { R4 } ) ) = { R4 } by L375;
thus L623: thesis by L622 , L621 , TARSKI:def 1;
end;
definition
let C80 , C81 being set;
pred C80 <N< C81
means
:L624: (for B94 , B95 being Nat holds ((B94 in C80 & B95 in C81) implies B94 < B95))
;end;
definition
let C82 , C83 being set;
pred C82 <N= C83
means
:L626: (for R4 being Nat holds (for R5 being Nat holds ((R4 in C82 & R5 in C83) implies R4 <= R5)))
;end;
theorem
L628: (for B96 , B97 being set holds (B96 <N< B97 implies ( ( B96 /\ B97 ) /\ ( NAT ) ) = ( {} )))
proof
let C84 , C85 being set;
assume L629: C84 <N< C85;
L630:
now
set D43 = the (Element of ( ( C84 /\ C85 ) /\ ( NAT ) ));
reconsider D44 = D43 as Nat;
assume L631: ( ( C84 /\ C85 ) /\ ( NAT ) ) <> ( {} );
L632: D43 in ( C84 /\ C85 ) by L631 , XBOOLE_0:def 4;
L633: D44 in C85 by L632 , XBOOLE_0:def 4;
L634: D44 in C84 by L632 , XBOOLE_0:def 4;
thus L635: contradiction by L634 , L629 , L633 , L624;
end;
thus L636: thesis by L630;
end;
theorem
L637: (for B98 , B99 being  finite  natural-membered set holds (B98 <N< B99 implies B98 misses B99))
proof
let C86 , C87 being  finite  natural-membered set;
assume L638: C86 <N< C87;
L639:
now
set D45 = the (Element of ( C86 /\ C87 ));
assume L640: C86 meets C87;
L641: ( C86 /\ C87 ) <> ( {} ) by L640 , XBOOLE_0:def 7;
L642: D45 in C87 by L641 , XBOOLE_0:def 4;
L643: D45 in C86 by L641 , XBOOLE_0:def 4;
thus L644: contradiction by L643 , L638 , L642 , L624;
end;
thus L645: thesis by L639;
end;
theorem
L646: (for B100 , B101 , B102 being set holds (B101 <N< B102 implies ( B100 /\ B101 ) <N< ( B100 /\ B102 )))
proof
let C88 , C89 , C90 being set;
assume L647: C89 <N< C90;
L648: (for R4 being Nat holds (for R5 being Nat holds ((R4 in ( C88 /\ C89 ) & R5 in ( C88 /\ C90 )) implies R4 < R5)))
proof
let R4 being Nat;
let R5 being Nat;
assume that
L649: R4 in ( C88 /\ C89 )
and
L650: R5 in ( C88 /\ C90 );
L651: R5 in C90 by L650 , XBOOLE_0:def 4;
L652: R4 in C89 by L649 , XBOOLE_0:def 4;
thus L653: thesis by L652 , L647 , L651 , L624;
end;
thus L654: thesis by L648 , L624;
end;
theorem
L655: (for B103 , B104 being  finite  natural-membered set holds ((B104 <> ( {} ) & (ex B105 being set st (B105 in B103 & { B105 } <N= B104))) implies ( ( Sgm0 B103 ) . ( 0 ) ) <= ( ( Sgm0 B104 ) . ( 0 ) )))
proof
let C91 , C92 being  finite  natural-membered set;
assume that
L656: C92 <> ( {} )
and
L657: (ex B106 being set st (B106 in C91 & { B106 } <N= C92));
consider C93 being set such that L658: C93 in C91 and L659: { C93 } <N= C92 by L657;
L660: ( 0 ) <> ( card C92 ) by L656;
L661: ( 0 ) < ( len ( Sgm0 C92 ) ) by L660 , L594;
L662: ( 0 ) in ( dom ( Sgm0 C92 ) ) by L661 , NAT_1:44;
L663: ( rng ( Sgm0 C92 ) ) = C92 by L375;
L664: ( ( Sgm0 C92 ) . ( 0 ) ) in C92 by L663 , L662 , FUNCT_1:def 3;
reconsider D46 = C93 as (Element of ( NAT )) by L658 , ORDINAL1:def 12;
set D47 = D46;
L665: D47 in { D46 } by TARSKI:def 1;
L666: D47 <= ( ( Sgm0 C92 ) . ( 0 ) ) by L665 , L659 , L664 , L626;
L667: { D46 } c= C91
proof
let C94 being set;
assume L668: C94 in { D46 };
thus L669: thesis by L668 , L658 , TARSKI:def 1;
end;
L670: ( ( Sgm0 C91 ) . ( 0 ) ) <= ( ( Sgm0 { D46 } ) . ( 0 ) ) by L667 , L599;
L671: ( ( Sgm0 { D46 } ) . ( 0 ) ) = D47 by L618;
thus L672: thesis by L671 , L670 , L666 , XXREAL_0:2;
end;
theorem
L673: (for R1 being Nat holds (for B107 , B108 being  finite  natural-membered set holds ((B107 <N< B108 & R1 < ( card B107 )) implies (( rng ( ( Sgm0 ( B107 \/ B108 ) ) | ( card B107 ) ) ) = B107 & ( ( ( Sgm0 ( B107 \/ B108 ) ) | ( card B107 ) ) . R1 ) = ( ( Sgm0 ( B107 \/ B108 ) ) . R1 )))))
proof
let R1 being Nat;
let C95 , C96 being  finite  natural-membered set;
assume that
L674: C95 <N< C96
and
L675: R1 < ( card C95 );
L676: R1 in ( card C95 ) by L675 , NAT_1:44;
set D48 = ( ( Sgm0 ( C95 \/ C96 ) ) | ( card C95 ) );
set D49 = ( Sgm0 ( C95 \/ C96 ) );
set D50 = { B109 where B109 is (Element of ( C95 \/ C96 )) : (ex B110 being Nat st (B109 = ( D48 . B110 ) & B110 in ( card C95 ))) };
L677: C95 c= ( C95 \/ C96 ) by XBOOLE_1:7;
L678: ( len ( Sgm0 ( C95 \/ C96 ) ) ) = ( card ( C95 \/ C96 ) ) by L594;
L679: ( len D48 ) = ( card C95 ) by L678 , L677 , AFINSQ_1:54 , NAT_1:43;
L680: D50 c= ( rng D48 )
proof
let C97 being set;
assume L681: C97 in D50;
L682: (ex B111 being (Element of ( C95 \/ C96 )) st (C97 = B111 & (ex B112 being Nat st (B111 = ( D48 . B112 ) & B112 in ( card C95 ))))) by L681;
thus L683: thesis by L682 , L679 , FUNCT_1:def 3;
end;
reconsider D51 = D50 as  finite set by L680;
L684: D48 is  one-to-one by FUNCT_1:52;
L685: ( dom D48 ) , ( D48 .: ( dom D48 ) ) are_equipotent  by L684 , CARD_1:33;
L686: ( D48 .: ( dom D48 ) ) = ( rng D48 ) by RELAT_1:113;
L687: ( len D49 ) = ( card ( C95 \/ C96 ) ) by L594;
L688: ( rng D49 ) = ( C95 \/ C96 ) by L375;
L689: ( rng D48 ) c= D50
proof
let C98 being set;
assume L690: C98 in ( rng D48 );
consider C99 being set such that L691: C99 in ( dom D48 ) and L692: C98 = ( D48 . C99 ) by L690 , FUNCT_1:def 3;
L693: C98 in ( rng D49 ) by L690;
reconsider D52 = C98 as (Element of ( C95 \/ C96 )) by L693 , L375;
L694: (ex B113 being Nat st (D52 = ( D48 . B113 ) & B113 in ( card C95 ))) by L691 , L692;
thus L695: thesis by L694;
end;
L696: ( rng D48 ) = D50 by L689 , L680 , XBOOLE_0:def 10;
L697: ( card D50 ) = ( card ( len D48 ) ) by L696 , L685 , L686 , CARD_1:5;
L698: ( card D50 ) = ( card C95 ) by L697 , L678 , L677 , AFINSQ_1:54 , NAT_1:43;
L699: ( C95 \/ C96 ) <> ( {} ) by L675 , CARD_1:27 , XBOOLE_1:15;
L700:
now
assume that
L701: (not D50 c= C95)
and
L702: (not C95 c= D50);
consider C100 being set such that L703: C100 in D50 and L704: (not C100 in C95) by L701 , TARSKI:def 3;
consider C101 being (Element of ( C95 \/ C96 )) such that L705: C100 = C101 and L706: (ex B114 being Nat st (C101 = ( D48 . B114 ) & B114 in ( card C95 ))) by L703;
L707: C101 in C96 by L699 , L704 , L705 , XBOOLE_0:def 3;
reconsider D53 = C101 as Nat;
consider C102 being set such that L708: C102 in C95 and L709: (not C102 in D50) by L702 , TARSKI:def 3;
L710: C95 c= ( C95 \/ C96 ) by XBOOLE_1:7;
consider C103 being set such that L711: C103 in ( dom D49 ) and L712: C102 = ( D49 . C103 ) by L710 , L688 , L708 , FUNCT_1:def 3;
reconsider D54 = C103 as Nat by L711;
reconsider D55 = C102 as Nat by L712;
L713: D54 < ( len D49 ) by L711 , NAT_1:44;
L714:
now
assume L715: D54 < ( card C95 );
L716: D54 in ( card C95 ) by L715 , NAT_1:44;
L717: ( card C95 ) <= ( card ( C95 \/ C96 ) ) by NAT_1:43 , XBOOLE_1:7;
L718: ( card C95 ) <= ( len D49 ) by L717 , L594;
L719: ( D48 . D54 ) = ( D49 . D54 ) by L718 , L716 , AFINSQ_1:53;
thus L720: contradiction by L719 , L677 , L708 , L709 , L712 , L716;
end;
consider C104 being Nat such that L721: C101 = ( D48 . C104 ) and L722: C104 in ( card C95 ) by L706;
L723: ( card C95 ) <= ( len D49 ) by L687 , NAT_1:43 , XBOOLE_1:7;
L724: ( D48 . C104 ) = ( D49 . C104 ) by L723 , L722 , AFINSQ_1:53;
L725: C104 < ( len D48 ) by L679 , L722 , NAT_1:44;
L726: C104 < D54 by L725 , L679 , L714 , XXREAL_0:2;
L727: D53 < D55 by L726 , L721 , L712 , L724 , L713 , L375;
thus L728: contradiction by L727 , L674 , L708 , L707 , L624;
end;
L729:
now
per cases  by L700;
case L730: D51 c= C95;
thus L731: D51 = C95 by L730 , L698 , L1;
end;
case L732: C95 c= D51;
thus L733: D51 = C95 by L732 , L698 , L1;
end;
end;
L735: ( card C95 ) <= ( len D49 ) by L678 , NAT_1:43 , XBOOLE_1:7;
thus L736: thesis by L735 , L689 , L680 , L729 , L676 , AFINSQ_1:53 , XBOOLE_0:def 10;
end;
theorem
L737: (for R1 being Nat holds (for B115 , B116 being  finite  natural-membered set holds ((B115 <N< B116 & R1 in ( card B115 )) implies ( ( Sgm0 ( B115 \/ B116 ) ) . R1 ) in B115)))
proof
let R1 being Nat;
let C105 , C106 being  finite  natural-membered set;
assume that
L738: C105 <N< C106
and
L739: R1 in ( card C105 );
set D56 = ( ( Sgm0 ( C105 \/ C106 ) ) | ( card C105 ) );
set D57 = ( Sgm0 ( C105 \/ C106 ) );
set D58 = { B117 where B117 is (Element of ( C105 \/ C106 )) : (ex B118 being Nat st (B117 = ( D56 . B118 ) & B118 in ( card C105 ))) };
L740: ( rng D57 ) = ( C105 \/ C106 ) by L375;
L741: ( len ( Sgm0 ( C105 \/ C106 ) ) ) = ( card ( C105 \/ C106 ) ) by L594;
L742: ( card C105 ) <= ( len ( Sgm0 ( C105 \/ C106 ) ) ) by L741 , NAT_1:43 , XBOOLE_1:7;
L743: ( len D56 ) = ( card C105 ) by L742 , AFINSQ_1:54;
L744: D58 c= ( rng D56 )
proof
let C107 being set;
assume L745: C107 in D58;
L746: (ex B119 being (Element of ( C105 \/ C106 )) st (C107 = B119 & (ex B120 being Nat st (B119 = ( D56 . B120 ) & B120 in ( card C105 ))))) by L745;
thus L747: thesis by L746 , L743 , FUNCT_1:def 3;
end;
reconsider D59 = D58 as  finite set by L744;
L748: ( rng D56 ) c= D58
proof
let C108 being set;
assume L749: C108 in ( rng D56 );
consider C109 being set such that L750: C109 in ( dom D56 ) and L751: C108 = ( D56 . C109 ) by L749 , FUNCT_1:def 3;
reconsider D60 = C108 as (Element of ( C105 \/ C106 )) by L749 , L375;
L752: (ex B121 being Nat st (D60 = ( D56 . B121 ) & B121 in ( card C105 ))) by L750 , L751;
thus L753: thesis by L752;
end;
L754: ( rng D56 ) = D58 by L748 , L744 , XBOOLE_0:def 10;
L755: ( C105 \/ C106 ) <> ( {} ) by L739 , CARD_1:27 , XBOOLE_1:15;
L756:
now
assume that
L757: (not D58 c= C105)
and
L758: (not C105 c= D58);
consider C110 being set such that L759: C110 in D58 and L760: (not C110 in C105) by L757 , TARSKI:def 3;
consider C111 being (Element of ( C105 \/ C106 )) such that L761: C110 = C111 and L762: (ex B122 being Nat st (C111 = ( D56 . B122 ) & B122 in ( card C105 ))) by L759;
L763: C111 in C106 by L755 , L760 , L761 , XBOOLE_0:def 3;
reconsider D61 = C111 as Nat;
consider C112 being set such that L764: C112 in C105 and L765: (not C112 in D58) by L758 , TARSKI:def 3;
L766: C105 c= ( C105 \/ C106 ) by XBOOLE_1:7;
consider C113 being set such that L767: C113 in ( dom D57 ) and L768: C112 = ( D57 . C113 ) by L766 , L740 , L764 , FUNCT_1:def 3;
reconsider D62 = C113 as Nat by L767;
L769:
now
assume L770: D62 < ( card C105 );
L771: D62 in ( card C105 ) by L770 , NAT_1:44;
L772: ( card C105 ) <= ( card ( C105 \/ C106 ) ) by NAT_1:43 , XBOOLE_1:7;
L773: ( card C105 ) <= ( len D57 ) by L772 , L594;
L774: ( D56 . D62 ) = ( D57 . D62 ) by L773 , L771 , AFINSQ_1:53;
thus L775: contradiction by L774 , L743 , L754 , L765 , L768 , L771 , FUNCT_1:def 3;
end;
L776: ( len D56 ) <= D62 by L769 , L742 , AFINSQ_1:54;
consider C114 being Nat such that L777: C111 = ( D56 . C114 ) and L778: C114 in ( card C105 ) by L762;
L779: ( D56 . C114 ) = ( D57 . C114 ) by L742 , L778 , AFINSQ_1:53;
reconsider D63 = C112 as Nat by L768;
L780: C114 < ( len D56 ) by L743 , L778 , NAT_1:44;
L781: C114 < D62 by L780 , L776 , XXREAL_0:2;
L782: D62 < ( len D57 ) by L767 , NAT_1:44;
L783: D61 < D63 by L782 , L777 , L768 , L781 , L779 , L375;
thus L784: contradiction by L783 , L738 , L764 , L763 , L624;
end;
L785: D56 is  one-to-one by FUNCT_1:52;
L786: ( dom D56 ) , ( D56 .: ( dom D56 ) ) are_equipotent  by L785 , CARD_1:33;
L787: ( D56 .: ( dom D56 ) ) = ( rng D56 ) by RELAT_1:113;
L788: ( card D58 ) = ( card ( len D56 ) ) by L787 , L754 , L786 , CARD_1:5;
L789: ( card D58 ) = ( card C105 ) by L788 , L742 , AFINSQ_1:54;
L790:
now
per cases  by L756;
case L791: D59 c= C105;
thus L792: D59 = C105 by L791 , L742 , L788 , L1 , AFINSQ_1:54;
end;
case L793: C105 c= D59;
thus L794: D59 = C105 by L793 , L789 , L1;
end;
end;
L796: ( D56 . R1 ) = ( D57 . R1 ) by L739 , L742 , AFINSQ_1:53;
thus L797: thesis by L796 , L739 , L743 , L754 , L790 , FUNCT_1:def 3;
end;
theorem
L798: (for R1 being Nat holds (for B123 , B124 being  finite  natural-membered set holds ((B123 <N< B124 & R1 < ( len ( Sgm0 B123 ) )) implies ( ( Sgm0 B123 ) . R1 ) = ( ( Sgm0 ( B123 \/ B124 ) ) . R1 ))))
proof
let R1 being Nat;
let C115 , C116 being  finite  natural-membered set;
assume that
L799: C115 <N< C116
and
L800: R1 < ( len ( Sgm0 C115 ) );
reconsider D64 = ( ( Sgm0 ( C115 \/ C116 ) ) | ( len ( Sgm0 C115 ) ) ) as (XFinSequence of ( NAT ));
L801: ( len ( Sgm0 C115 ) ) = ( card C115 ) by L594;
L802: ( D64 . R1 ) = ( ( Sgm0 ( C115 \/ C116 ) ) . R1 ) by L801 , L799 , L800 , L673;
L803: ( card C115 ) c= ( card ( C115 \/ C116 ) ) by CARD_1:11 , XBOOLE_1:7;
L804: ( card C115 ) <= ( card ( C115 \/ C116 ) ) by L803 , NAT_1:39;
L805: ( card C115 ) <= ( len ( Sgm0 ( C115 \/ C116 ) ) ) by L804 , L594;
L806: ( len ( Sgm0 C115 ) ) <= ( len ( Sgm0 ( C115 \/ C116 ) ) ) by L805 , L594;
L807: ( len ( Sgm0 ( C115 \/ C116 ) ) ) = ( card ( C115 \/ C116 ) ) by L594;
L808: ( len D64 ) = ( len ( Sgm0 C115 ) ) by L807 , L804 , L801 , AFINSQ_1:54;
L809: ( len D64 ) = ( card C115 ) by L804 , L801 , L807 , AFINSQ_1:54;
L810: (for B125 , B126 , B127 , B128 being Nat holds ((B125 < B126 & B126 < ( len D64 ) & B127 = ( D64 . B125 ) & B128 = ( D64 . B126 )) implies B127 < B128))
proof
let C117 , C118 , C119 , C120 being Nat;
assume that
L811: C117 < C118
and
L812: C118 < ( len D64 )
and
L813: C119 = ( D64 . C117 )
and
L814: C120 = ( D64 . C118 );
L815: C118 < ( len ( Sgm0 ( C115 \/ C116 ) ) ) by L808 , L806 , L812 , XXREAL_0:2;
L816: C117 < ( card C115 ) by L809 , L811 , L812 , XXREAL_0:2;
L817: ( D64 . C117 ) = ( ( Sgm0 ( C115 \/ C116 ) ) . C117 ) by L816 , L799 , L801 , L673;
L818: ( D64 . C118 ) = ( ( Sgm0 ( C115 \/ C116 ) ) . C118 ) by L799 , L801 , L808 , L812 , L673;
thus L819: thesis by L818 , L811 , L813 , L814 , L817 , L815 , L375;
end;
L820: ( rng D64 ) = C115 by L799 , L800 , L801 , L673;
thus L821: thesis by L820 , L810 , L802 , L375;
end;
theorem
L822: (for R1 being Nat holds (for B129 , B130 being  finite  natural-membered set holds ((B129 <N< B130 & R1 < ( card B130 )) implies (( rng ( ( Sgm0 ( B129 \/ B130 ) ) /^ ( card B129 ) ) ) = B130 & ( ( ( Sgm0 ( B129 \/ B130 ) ) /^ ( card B129 ) ) . R1 ) = ( ( Sgm0 ( B129 \/ B130 ) ) . ( R1 + ( card B129 ) ) )))))
proof
let R1 being Nat;
let C121 , C122 being  finite  natural-membered set;
assume that
L823: C121 <N< C122
and
L824: R1 < ( card C122 );
consider C123 being Nat such that L825: C122 c= C123 by L45;
L826: C123 c= ( NAT ) by MEMBERED:6;
L827: ( C121 /\ C122 ) = ( C121 /\ ( C122 /\ ( NAT ) ) ) by L826 , L825 , XBOOLE_1:1 , XBOOLE_1:28
.= ( ( C121 /\ C122 ) /\ ( NAT ) ) by XBOOLE_1:16
.= ( {} ) by L823 , L628;
L828: C121 misses C122 by L827 , XBOOLE_0:def 7;
set D65 = ( ( Sgm0 ( C121 \/ C122 ) ) /^ ( card C121 ) );
set D66 = ( Sgm0 ( C121 \/ C122 ) );
set D67 = { B131 where B131 is (Element of ( C121 \/ C122 )) : (ex B132 being Nat st (B131 = ( D65 . B132 ) & B132 in ( card C122 ))) };
L829: ( dom D65 ) , ( D65 .: ( dom D65 ) ) are_equipotent  by CARD_1:33;
L830: ( rng D66 ) = ( C121 \/ C122 ) by L375;
L831: ( len ( Sgm0 ( C121 \/ C122 ) ) ) = ( card ( C121 \/ C122 ) ) by L594;
L832: ( card C121 ) <= ( len ( Sgm0 ( C121 \/ C122 ) ) ) by L831 , NAT_1:43 , XBOOLE_1:7;
L833: ( len D65 ) = ( ( len D66 ) -' ( card C121 ) ) by L190
.= ( ( len D66 ) - ( card C121 ) ) by L832 , XREAL_1:233;
L834: ( ( C121 \/ C122 ) \ C121 ) = ( ( C121 \ C121 ) \/ ( C122 \ C121 ) ) by XBOOLE_1:42
.= ( ( {} ) \/ ( C122 \ C121 ) ) by XBOOLE_1:37
.= C122 by L828 , XBOOLE_1:83;
L835: ( len D65 ) = ( card C122 ) by L834 , L831 , L833 , CARD_2:44 , XBOOLE_1:7;
L836: D67 c= ( rng D65 )
proof
let C124 being set;
assume L837: C124 in D67;
L838: (ex B133 being (Element of ( C121 \/ C122 )) st (C124 = B133 & (ex B134 being Nat st (B133 = ( D65 . B134 ) & B134 in ( card C122 ))))) by L837;
thus L839: thesis by L838 , L835 , FUNCT_1:def 3;
end;
reconsider D68 = D67 as  finite set by L836;
L840: ( D65 .: ( dom D65 ) ) = ( rng D65 ) by RELAT_1:113;
L841: ( rng D65 ) c= ( rng ( Sgm0 ( C121 \/ C122 ) ) ) by L231;
L842: ( rng D65 ) c= D67
proof
let C125 being set;
assume L843: C125 in ( rng D65 );
consider C126 being set such that L844: C126 in ( dom D65 ) and L845: C125 = ( D65 . C126 ) by L843 , FUNCT_1:def 3;
reconsider D69 = C125 as (Element of ( C121 \/ C122 )) by L841 , L843 , L375;
L846: (ex B135 being Nat st (D69 = ( D65 . B135 ) & B135 in ( card C122 ))) by L835 , L844 , L845;
thus L847: thesis by L846;
end;
L848: ( rng D65 ) = D67 by L842 , L836 , XBOOLE_0:def 10;
L849: ( card D67 ) = ( card ( len D65 ) ) by L848 , L829 , L840 , CARD_1:5;
L850: ( card D67 ) = ( card C122 ) by L849 , L831 , L833 , L834 , CARD_2:44 , XBOOLE_1:7;
L851: ( len D66 ) = ( card ( C121 \/ C122 ) ) by L594;
L852: ( len D66 ) = ( ( card C121 ) + ( card C122 ) ) by L851 , L828 , CARD_2:40;
L853: ( C121 \/ C122 ) <> ( {} ) by L824 , CARD_1:27 , XBOOLE_1:15;
L854:
now
assume that
L855: (not D67 c= C122)
and
L856: (not C122 c= D67);
consider C127 being set such that L857: C127 in C122 and L858: (not C127 in D67) by L856 , TARSKI:def 3;
L859: C122 c= ( C121 \/ C122 ) by XBOOLE_1:7;
consider C128 being set such that L860: C128 in ( dom D66 ) and L861: C127 = ( D66 . C128 ) by L859 , L830 , L857 , FUNCT_1:def 3;
consider C129 being set such that L862: C129 in D67 and L863: (not C129 in C122) by L855 , TARSKI:def 3;
consider C130 being (Element of ( C121 \/ C122 )) such that L864: C129 = C130 and L865: (ex B136 being Nat st (C130 = ( D65 . B136 ) & B136 in ( card C122 ))) by L862;
L866: C130 in C121 by L853 , L863 , L864 , XBOOLE_0:def 3;
reconsider D70 = C130 as Nat;
reconsider D71 = C127 as Nat by L861;
consider C131 being Nat such that L867: C130 = ( D65 . C131 ) and L868: C131 in ( card C122 ) by L865;
L869: C131 < ( card C122 ) by L868 , NAT_1:44;
L870: ( C131 + ( card C121 ) ) < ( len D66 ) by L869 , L852 , XREAL_1:6;
L871: ( D65 . C131 ) = ( D66 . ( C131 + ( card C121 ) ) ) by L870 , L204;
reconsider D72 = C128 as Nat by L860;
set D73 = ( D72 -' ( card C121 ) );
L872: C127 in ( C121 \/ C122 ) by L830 , L860 , L861 , FUNCT_1:def 3;
L873:
now
assume L874: D72 >= ( card C121 );
L875: ( D72 -' ( card C121 ) ) = ( D72 - ( card C121 ) ) by L874 , XREAL_1:233;
L876: D72 < ( ( card C121 ) + ( card C122 ) ) by L852 , L860 , NAT_1:44;
L877: ( D72 - ( card C121 ) ) < ( ( ( card C121 ) + ( card C122 ) ) - ( card C121 ) ) by L876 , XREAL_1:9;
L878: D73 < ( card C122 ) by L877 , L874 , XREAL_1:233;
L879: D73 in ( card C122 ) by L878 , NAT_1:44;
L880: ( D73 + ( card C121 ) ) < ( len D66 ) by L852 , L878 , XREAL_1:6;
L881: ( D65 . D73 ) = ( D66 . D72 ) by L880 , L875 , L204;
thus L882: contradiction by L881 , L858 , L861 , L872 , L879;
end;
L883: ( card C121 ) <= ( ( card C121 ) + C131 ) by NAT_1:12;
L884: ( C131 + ( card C121 ) ) > D72 by L883 , L873 , XXREAL_0:2;
L885: D70 > D71 by L884 , L867 , L861 , L870 , L871 , L375;
thus L886: contradiction by L885 , L823 , L857 , L866 , L624;
end;
L887:
now
per cases  by L854;
case L888: D68 c= C122;
thus L889: D68 = C122 by L888 , L850 , L1;
end;
case L890: C122 c= D68;
thus L891: D68 = C122 by L890 , L850 , L1;
end;
end;
L893: ( R1 + ( card C121 ) ) < ( len D66 ) by L824 , L833 , L835 , XREAL_1:20;
thus L894: thesis by L893 , L842 , L836 , L887 , L204 , XBOOLE_0:def 10;
end;
theorem
L895: (for R1 being Nat holds (for B137 , B138 being  finite  natural-membered set holds ((B137 <N< B138 & R1 < ( len ( Sgm0 B138 ) )) implies ( ( Sgm0 B138 ) . R1 ) = ( ( Sgm0 ( B137 \/ B138 ) ) . ( R1 + ( len ( Sgm0 B137 ) ) ) ))))
proof
let R1 being Nat;
let C132 , C133 being  finite  natural-membered set;
assume that
L896: C132 <N< C133
and
L897: R1 < ( len ( Sgm0 C133 ) );
consider C134 being Nat such that L898: C133 c= C134 by L45;
reconsider D74 = ( ( Sgm0 ( C132 \/ C133 ) ) /^ ( len ( Sgm0 C132 ) ) ) as (XFinSequence of ( NAT ));
L899: ( len ( Sgm0 C132 ) ) = ( card C132 ) by L594;
L900: ( len ( Sgm0 C133 ) ) = ( card C133 ) by L594;
L901: ( D74 . R1 ) = ( ( Sgm0 ( C132 \/ C133 ) ) . ( R1 + ( card C132 ) ) ) by L900 , L896 , L897 , L899 , L822;
L902: ( len ( Sgm0 ( C132 \/ C133 ) ) ) = ( card ( C132 \/ C133 ) ) by L594;
L903: C134 c= ( NAT ) by MEMBERED:6;
L904: ( C132 /\ C133 ) = ( C132 /\ ( C133 /\ ( NAT ) ) ) by L903 , L898 , XBOOLE_1:1 , XBOOLE_1:28
.= ( ( C132 /\ C133 ) /\ ( NAT ) ) by XBOOLE_1:16
.= ( {} ) by L896 , L628;
L905: C132 misses C133 by L904 , XBOOLE_0:def 7;
L906: ( ( card C133 ) + ( card C132 ) ) = ( card ( C132 \/ C133 ) ) by L905 , CARD_2:40;
L907: ( len D74 ) = ( ( len ( Sgm0 ( C132 \/ C133 ) ) ) -' ( len ( Sgm0 C132 ) ) ) by L190
.= ( ( ( card C132 ) + ( card C133 ) ) -' ( card C132 ) ) by L906 , L902 , L594
.= ( card C133 ) by NAT_D:34
.= ( len ( Sgm0 C133 ) ) by L594;
L908: ( len D74 ) = ( card C133 ) by L907 , L594;
L909: (for B139 , B140 , B141 , B142 being Nat holds ((B139 < B140 & B140 < ( len D74 ) & B141 = ( D74 . B139 ) & B142 = ( D74 . B140 )) implies B141 < B142))
proof
let C135 , C136 , C137 , C138 being Nat;
assume that
L910: C135 < C136
and
L911: C136 < ( len D74 )
and
L912: C137 = ( D74 . C135 )
and
L913: C138 = ( D74 . C136 );
L914: ( C136 + ( card C132 ) ) < ( len ( Sgm0 ( C132 \/ C133 ) ) ) by L906 , L902 , L908 , L911 , XREAL_1:6;
set D75 = ( C136 + ( card C132 ) );
set D76 = ( C135 + ( card C132 ) );
L915: D76 < D75 by L910 , XREAL_1:6;
L916: C135 < ( card C133 ) by L908 , L910 , L911 , XXREAL_0:2;
L917: ( D74 . C135 ) = ( ( Sgm0 ( C132 \/ C133 ) ) . ( C135 + ( card C132 ) ) ) by L916 , L896 , L899 , L822;
L918: ( D74 . C136 ) = ( ( Sgm0 ( C132 \/ C133 ) ) . ( C136 + ( card C132 ) ) ) by L896 , L899 , L908 , L911 , L822;
thus L919: thesis by L918 , L912 , L913 , L917 , L914 , L915 , L375;
end;
L920: ( rng D74 ) = C133 by L896 , L897 , L899 , L900 , L822;
thus L921: thesis by L920 , L899 , L909 , L901 , L375;
end;
theorem
L922: (for B143 , B144 being  finite  natural-membered set holds ((B144 <> ( {} ) & B143 <N< B144) implies ( ( Sgm0 B144 ) . ( 0 ) ) = ( ( Sgm0 ( B143 \/ B144 ) ) . ( len ( Sgm0 B143 ) ) )))
proof
let C139 , C140 being  finite  natural-membered set;
assume that
L923: C140 <> ( {} )
and
L924: C139 <N< C140;
L925: ( card C140 ) <> ( 0 ) by L923;
L926: ( 0 ) < ( len ( Sgm0 C140 ) ) by L925 , L594;
L927: ( ( Sgm0 C140 ) . ( 0 ) ) = ( ( Sgm0 ( C139 \/ C140 ) ) . ( (( 0 ) qua (Element of ( NAT ))) + ( len ( Sgm0 C139 ) ) ) ) by L926 , L924 , L895;
thus L928: thesis by L927;
end;
theorem
L929: (for B145 , B146 , B147 , B148 being Nat holds (for B149 being  finite  natural-membered set holds ((B148 < B145 & B146 < ( len ( Sgm0 B149 ) ) & ( ( Sgm0 B149 ) . B146 ) = B148 & ( ( Sgm0 B149 ) . B147 ) = B145) implies B146 < B147)))
proof
let C141 , C142 , C143 , C144 being Nat;
let C145 being  finite  natural-membered set;
assume that
L930: C144 < C141
and
L931: C142 < ( len ( Sgm0 C145 ) )
and
L932: ( ( Sgm0 C145 ) . C142 ) = C144
and
L933: ( ( Sgm0 C145 ) . C143 ) = C141
and
L934: (not C142 < C143);
L935: C143 < C142 by L930 , L932 , L933 , L934 , XXREAL_0:1;
thus L936: thesis by L935 , L930 , L931 , L932 , L933 , L375;
end;
theorem
L937: (for B150 , B151 being  finite  natural-membered set holds ((B150 <> ( {} ) & B150 <N< B151) implies ( ( Sgm0 B150 ) . ( 0 ) ) = ( ( Sgm0 ( B150 \/ B151 ) ) . ( 0 ) )))
proof
let C146 , C147 being  finite  natural-membered set;
assume that
L938: C146 <> ( {} )
and
L939: C146 <N< C147;
L940: ( card C146 ) <> ( 0 ) by L938;
L941: ( 0 ) < ( len ( Sgm0 C146 ) ) by L940 , L594;
thus L942: thesis by L941 , L939 , L798;
end;
theorem
L943: (for B152 , B153 being  finite  natural-membered set holds (B152 <N< B153 iff ( Sgm0 ( B152 \/ B153 ) ) = ( ( Sgm0 B152 ) ^ ( Sgm0 B153 ) )))
proof
let C148 , C149 being  finite  natural-membered set;
set D77 = ( Sgm0 C148 );
set D78 = ( Sgm0 C149 );
set D79 = ( Sgm0 ( C148 \/ C149 ) );
thus L944: (C148 <N< C149 implies ( Sgm0 ( C148 \/ C149 ) ) = ( ( Sgm0 C148 ) ^ ( Sgm0 C149 ) ))
proof
defpred S4[ Nat ] means ($1 in ( dom D77 ) implies ( D79 . $1 ) = ( D77 . $1 ));
reconsider D80 = C148 , D81 = C149 as  finite set;
assume L945: C148 <N< C149;
L946: ( C148 /\ C149 ) = ( {} )
proof
set D82 = the (Element of ( C148 /\ C149 ));
L947: C148 = ( rng D77 ) by L375;
assume L948: (not thesis);
L949: D82 in C148 by L948 , XBOOLE_0:def 4;
reconsider D83 = D82 as (Element of ( NAT )) by L949 , L947;
L950: D83 in C149 by L948 , XBOOLE_0:def 4;
L951: D83 in C148 by L948 , XBOOLE_0:def 4;
thus L952: thesis by L951 , L945 , L950 , L624;
end;
L953: C148 misses C149 by L946 , XBOOLE_0:def 7;
L954: ( len D79 ) = ( card ( D80 \/ D81 ) ) by L594
.= ( ( card D80 ) + ( card D81 ) ) by L953 , CARD_2:40
.= ( ( len D77 ) + ( card D81 ) ) by L594
.= ( ( len D77 ) + ( len D78 ) ) by L594;
L955:
now
let R3 being Nat;
assume L956: S4[ R3 ];
thus L957: S4[ ( R3 + 1 ) ]
proof
set D84 = ( D79 . ( R3 + 1 ) );
set D85 = ( D77 . ( R3 + 1 ) );
assume L958: ( R3 + 1 ) in ( dom D77 );
L959: D85 in ( rng D77 ) by L958 , FUNCT_1:def 3;
L960: D85 in C148 by L959 , L375;
L961: ( len D77 ) <= ( len D79 ) by L954 , NAT_1:12;
L962: ( len D77 ) c= ( len D79 ) by L961 , NAT_1:39;
L963: D84 in ( rng D79 ) by L962 , L958 , FUNCT_1:def 3;
L964: D84 in ( C148 \/ C149 ) by L963 , L375;
assume L965: D84 <> D85;
L966:
now
per cases ;
suppose L967: R3 in ( dom D77 );

set D86 = ( D79 . R3 );
set D87 = ( D77 . R3 );
L968:
now
per cases  by L965 , XXREAL_0:1;
suppose L969: D84 < D85;

L970: (not D84 in C149) by L969 , L945 , L960 , L624;
L971: D84 in C148 by L970 , L964 , XBOOLE_0:def 3;
L972: D84 in ( rng D77 ) by L971 , L375;
consider R6 being set such that L973: R6 in ( dom D77 ) and L974: ( D77 . R6 ) = D84 by L972 , FUNCT_1:def 3;
reconsider D88 = R6 as (Element of ( NAT )) by L973;
L975: D88 < ( len D77 ) by L973 , NAT_1:44;
L976: D88 < ( R3 + 1 ) by L975 , L969 , L974 , L929;
L977: R3 < ( R3 + 1 ) by XREAL_1:29;
L978: ( R3 + 1 ) < ( len D79 ) by L958 , L962 , NAT_1:44;
L979: D87 < D84 by L978 , L956 , L967 , L977 , L375;
L980: R3 < ( len D77 ) by L967 , NAT_1:44;
L981: R3 < D88 by L980 , L974 , L979 , L929;
thus L982: contradiction by L981 , L976 , NAT_1:13;
end;
suppose L983: D85 < D84;

L984: D85 in ( C148 \/ C149 ) by L960 , XBOOLE_0:def 3;
L985: D85 in ( rng D79 ) by L984 , L375;
consider R6 being set such that L986: R6 in ( dom D79 ) and L987: ( D79 . R6 ) = D85 by L985 , FUNCT_1:def 3;
reconsider D89 = R6 as (Element of ( NAT )) by L986;
L988: D89 < ( len D79 ) by L986 , NAT_1:44;
L989: D89 < ( R3 + 1 ) by L988 , L983 , L987 , L929;
L990: R3 < ( R3 + 1 ) by XREAL_1:29;
L991: ( R3 + 1 ) < ( len D77 ) by L958 , NAT_1:44;
L992: D86 < D85 by L991 , L956 , L967 , L990 , L375;
L993: R3 < ( len D79 ) by L962 , L967 , NAT_1:44;
L994: R3 < D89 by L993 , L987 , L992 , L929;
thus L995: contradiction by L994 , L989 , NAT_1:13;
end;
end;
thus L997: contradiction by L968;
end;
suppose L998: (not R3 in ( dom D77 ));

L999: R3 < ( R3 + 1 ) by XREAL_1:29;
L1000: ( len D77 ) <= R3 by L998 , NAT_1:44;
L1001: ( len D77 ) < ( R3 + 1 ) by L1000 , L999 , XXREAL_0:2;
thus L1002: contradiction by L1001 , L958 , NAT_1:44;
end;
end;
thus L1004: contradiction by L966;
end;

end;
L958: (( 0 ) < ( len D77 ) implies D80 <> ( {} )) by L594 , CARD_1:27;
L959: S4[ ( 0 ) ] by L958 , L945 , L937;
L960: (for R3 being Nat holds S4[ R3 ]) from NAT_1:sch 2(L959 , L955);
defpred S5[ Nat ] means ($1 in ( dom D78 ) implies ( D79 . ( ( len D77 ) + $1 ) ) = ( D78 . $1 ));
L961:
now
let R3 being Nat;
assume L962: S5[ R3 ];
thus L963: S5[ ( R3 + 1 ) ]
proof
set D90 = ( D78 . ( R3 + 1 ) );
set D91 = ( ( len D77 ) + ( R3 + 1 ) );
set D92 = ( D79 . D91 );
assume L964: ( R3 + 1 ) in ( dom D78 );
L965: ( D78 . ( R3 + 1 ) ) in ( rng D78 ) by L964 , FUNCT_1:def 3;
L966: D90 in C149 by L965 , L375;
L967: ( R3 + 1 ) < ( len D78 ) by L964 , NAT_1:44;
L968: D91 < ( len D79 ) by L967 , L954 , XREAL_1:6;
L969: D91 in ( dom D79 ) by L968 , NAT_1:44;
L970: ( D79 . D91 ) in ( rng D79 ) by L969 , FUNCT_1:def 3;
L971: D92 in ( C148 \/ C149 ) by L970 , L375;
L972:
now
L973: ( len D77 ) <= ( len D79 ) by L954 , NAT_1:12;
assume L974: D92 in C148;
L975: D92 in ( rng D77 ) by L974 , L375;
consider R6 being set such that L976: R6 in ( dom D77 ) and L977: ( D77 . R6 ) = D92 by L975 , FUNCT_1:def 3;
reconsider D93 = R6 as (Element of ( NAT )) by L976;
L978: D93 < ( len D77 ) by L976 , NAT_1:44;
L979: D93 < ( len D79 ) by L978 , L973 , XXREAL_0:2;
L980: D93 in ( dom D79 ) by L979 , NAT_1:44;
L981: ( D79 . D93 ) = ( D79 . D91 ) by L960 , L976 , L977;
L982: D93 = D91 by L981 , L969 , L980 , FUNCT_1:def 4;
L983: ( ( len D77 ) + ( R3 + 1 ) ) <= ( ( len D77 ) + (( 0 ) qua (Element of ( NAT ))) ) by L982 , L976 , NAT_1:44;
thus L984: contradiction by L983 , XREAL_1:29;
end;
assume L985: ( D79 . ( ( len D77 ) + ( R3 + 1 ) ) ) <> ( D78 . ( R3 + 1 ) );
L986:
now
per cases ;
suppose L987: R3 in ( dom D78 );

set D94 = ( D79 . ( ( len D77 ) + R3 ) );
set D95 = ( D78 . R3 );
L988: R3 < ( len D78 ) by L987 , NAT_1:44;
L989:
now
per cases  by L985 , XXREAL_0:1;
suppose L990: D92 < D90;

L991: D92 in C149 by L971 , L972 , XBOOLE_0:def 3;
L992: D92 in ( rng D78 ) by L991 , L375;
consider R6 being set such that L993: R6 in ( dom D78 ) and L994: ( D78 . R6 ) = D92 by L992 , FUNCT_1:def 3;
reconsider D96 = R6 as (Element of ( NAT )) by L993;
L995: D96 < ( len D78 ) by L993 , NAT_1:44;
L996: D96 < ( R3 + 1 ) by L995 , L990 , L994 , L929;
L997: ( ( len D77 ) + R3 ) < ( ( ( len D77 ) + R3 ) + 1 ) by XREAL_1:29;
L998: D95 < D92 by L997 , L962 , L968 , L987 , L375;
L999: R3 < ( len D78 ) by L987 , NAT_1:44;
L1000: R3 < D96 by L999 , L994 , L998 , L929;
thus L1001: contradiction by L1000 , L996 , NAT_1:13;
end;
suppose L1002: D90 < D92;

L1003: D90 in ( C148 \/ C149 ) by L966 , XBOOLE_0:def 3;
L1004: D90 in ( rng D79 ) by L1003 , L375;
consider R6 being set such that L1005: R6 in ( dom D79 ) and L1006: ( D79 . R6 ) = D90 by L1004 , FUNCT_1:def 3;
reconsider D97 = R6 as (Element of ( NAT )) by L1005;
L1007: D97 < ( len D79 ) by L1005 , NAT_1:44;
L1008: D97 < ( ( ( len D77 ) + R3 ) + 1 ) by L1007 , L1002 , L1006 , L929;
L1009: R3 < ( R3 + 1 ) by XREAL_1:29;
L1010: ( R3 + 1 ) < ( len D78 ) by L964 , NAT_1:44;
L1011: D94 < D90 by L1010 , L962 , L987 , L1009 , L375;
L1012: ( ( len D77 ) + R3 ) < ( len D79 ) by L954 , L988 , XREAL_1:6;
L1013: ( ( len D77 ) + R3 ) < D97 by L1012 , L1006 , L1011 , L929;
thus L1014: contradiction by L1013 , L1008 , NAT_1:13;
end;
end;
thus L1016: contradiction by L989;
end;
suppose L1017: (not R3 in ( dom D78 ));

L1018: R3 < ( R3 + 1 ) by XREAL_1:29;
L1019: ( len D78 ) <= R3 by L1017 , NAT_1:44;
L1020: ( len D78 ) < ( R3 + 1 ) by L1019 , L1018 , XXREAL_0:2;
thus L1021: contradiction by L1020 , L964 , NAT_1:44;
end;
end;
thus L1023: contradiction by L986;
end;

end;
L964: (( len D78 ) > ( 0 ) implies C149 <> ( {} )) by L594 , CARD_1:27;
L965: S5[ ( 0 ) ] by L964 , L945 , L922;
L966: (for R3 being Nat holds S5[ R3 ]) from NAT_1:sch 2(L965 , L961);
thus L967: thesis by L966 , L954 , L960 , AFINSQ_1:def 3;
end;

assume L968: ( Sgm0 ( C148 \/ C149 ) ) = ( ( Sgm0 C148 ) ^ ( Sgm0 C149 ) );
let C150 , C151 being Nat;
assume that
L969: C150 in C148
and
L970: C151 in C149;
L971: C151 in ( rng D78 ) by L970 , L375;
consider R7 being set such that L972: R7 in ( dom D78 ) and L973: ( D78 . R7 ) = C151 by L971 , FUNCT_1:def 3;
reconsider D98 = R7 as (Element of ( NAT )) by L972;
L974: C151 = ( D79 . ( ( len D77 ) + D98 ) ) by L968 , L972 , L973 , AFINSQ_1:def 3;
L975: D98 < ( len D78 ) by L972 , NAT_1:44;
L976: ( ( len D77 ) + D98 ) < ( ( len D77 ) + ( len D78 ) ) by L975 , XREAL_1:6;
L977: ( ( len D77 ) + D98 ) < ( len D79 ) by L976 , L968 , AFINSQ_1:17;
L978: ( len D77 ) <= ( ( len D77 ) + D98 ) by NAT_1:12;
L979: C150 in ( rng ( Sgm0 C148 ) ) by L969 , L375;
consider R6 being set such that L980: R6 in ( dom D77 ) and L981: ( D77 . R6 ) = C150 by L979 , FUNCT_1:def 3;
reconsider D99 = R6 as (Element of ( NAT )) by L980;
L982: D99 < ( len D77 ) by L980 , NAT_1:44;
L983: D99 < ( ( len D77 ) + D98 ) by L982 , L978 , XXREAL_0:2;
L984: C150 = ( D79 . D99 ) by L968 , L980 , L981 , AFINSQ_1:def 3;
thus L985: thesis by L984 , L974 , L983 , L977 , L375;
end;
definition
let C152 being XFinSequence;
let C153 being set;
func SubXFinS (C152 , C153) -> XFinSequence equals 
( C152 * ( Sgm0 ( C153 /\ ( len C152 ) ) ) );
coherence
proof
L986: ( C153 /\ ( len C152 ) ) c= ( dom C152 ) by XBOOLE_1:17;
L987: ( rng ( Sgm0 ( C153 /\ ( len C152 ) ) ) ) c= ( dom C152 ) by L986 , L375;
thus L988: thesis by L987 , AFINSQ_1:10;
end;
end;
theorem
L990: (for R14 being XFinSequence holds (for B154 being set holds (( len ( SubXFinS (R14 , B154) ) ) = ( card ( B154 /\ ( len R14 ) ) ) & (for R1 being Nat holds (R1 < ( len ( SubXFinS (R14 , B154) ) ) implies ( ( SubXFinS (R14 , B154) ) . R1 ) = ( R14 . ( ( Sgm0 ( B154 /\ ( len R14 ) ) ) . R1 ) ))))))
proof
let R14 being XFinSequence;
let C154 being set;
L991: ( C154 /\ ( len R14 ) ) c= ( dom R14 ) by XBOOLE_1:17;
L992: ( rng ( Sgm0 ( C154 /\ ( len R14 ) ) ) ) c= ( dom R14 ) by L991 , L375;
L993: ( dom ( SubXFinS (R14 , C154) ) ) = ( len ( Sgm0 ( C154 /\ ( len R14 ) ) ) ) by L992 , RELAT_1:27
.= ( card ( C154 /\ ( len R14 ) ) ) by L594;
thus L994: ( len ( SubXFinS (R14 , C154) ) ) = ( card ( C154 /\ ( len R14 ) ) ) by L993;
let R1 being Nat;
assume L995: R1 < ( len ( SubXFinS (R14 , C154) ) );
L996: R1 in ( dom ( SubXFinS (R14 , C154) ) ) by L995 , NAT_1:44;
thus L997: thesis by L996 , FUNCT_1:12;
end;
registration
let C155 being set;
let C156 being (XFinSequence of C155);
let C157 being set;
cluster ( SubXFinS (C156 , C157) ) -> C155 -valued;
coherence;
end;
registration
let R14 being XFinSequence;
cluster ( SubXFinS (R14 , ( {} )) ) ->  empty;
coherence
proof
L999: ( len ( SubXFinS (R14 , ( {} )) ) ) = ( card ( {} ) ) by L990;
thus L1000: thesis by L999;
end;
end;
registration
let C158 being set;
cluster ( SubXFinS (( {} ) , C158) ) ->  empty;
coherence;
end;
registration
let C159 being Nat;
let C160 being set;
cluster ( C159 --> C160 ) ->  T-Sequence-like;
coherence;
end;
scheme Sch5 { F4() -> set , P1[set] } : (for B155 being (XFinSequence of F4()) holds P1[ B155 ])
provided
L1004: P1[ ( <%> F4() ) ]
and
L1005: (for B156 being (XFinSequence of F4()) holds (for B157 being (Element of F4()) holds (P1[ B156 ] implies P1[ ( B156 ^ <% B157 %> ) ])))
proof
defpred S6[ set ] means (for B158 being (XFinSequence of F4()) holds (( len B158 ) = $1 implies P1[ B158 ]));
L1006: (for R4 being Nat holds (S6[ R4 ] implies S6[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L1007: (for B159 being (XFinSequence of F4()) holds (( len B159 ) = R4 implies P1[ B159 ]));
let C161 being (XFinSequence of F4());
assume L1008: ( len C161 ) = ( R4 + 1 );
L1009: C161 <> ( {} ) by L1008;
consider C162 being XFinSequence, C163 being set such that L1010: C161 = ( C162 ^ <% C163 %> ) by L1009 , AFINSQ_1:40;
reconsider D100 = C162 , D101 = <% C163 %> as (XFinSequence of F4()) by L1010 , AFINSQ_1:31;
L1011: (( rng D101 ) c= F4() & ( rng D101 ) = { C163 } & C163 in { C163 }) by AFINSQ_1:33 , TARSKI:def 1;
L1012: ( len D101 ) = 1 by AFINSQ_1:34;
L1013: ( len C161 ) = ( ( len D100 ) + 1 ) by L1012 , L1010 , AFINSQ_1:17;
thus L1014: thesis by L1013 , L1005 , L1007 , L1008 , L1010 , L1011;
end;
let C164 being (XFinSequence of F4());
L1015: ( len C164 ) = ( len C164 );
L1016: (for R11 being set holds (( card R11 ) = ( {} ) implies R11 = ( {} )));
L1017: S6[ ( 0 ) ] by L1016 , L1004;
L1018: (for R4 being Nat holds S6[ R4 ]) from NAT_1:sch 2(L1017 , L1006);
thus L1019: thesis by L1018 , L1015;
end;
definition
let R18 being non  empty set;
let C165 being XFinSequence;
assume L1020: C165 is R18 -valued;
let R21 being (BinOp of R18);
assume L1021: (R21 is  having_a_unity or ( len C165 ) >= 1);
func R21 "**" C165 -> (Element of R18) means 
:L1022: it = ( the_unity_wrt R21 ) if (R21 is  having_a_unity & ( len C165 ) = ( 0 )) otherwise (ex B160 being (Function of ( NAT ) , R18) st (( B160 . ( 0 ) ) = ( C165 . ( 0 ) ) & (for R4 being Nat holds (( R4 + 1 ) < ( len C165 ) implies ( B160 . ( R4 + 1 ) ) = ( R21 . (( B160 . R4 ) , ( C165 . ( R4 + 1 ) )) ))) & it = ( B160 . ( ( len C165 ) - 1 ) )));
existence
proof
L1023:
now
per cases ;
suppose L1024: ( len C165 ) = ( 0 );

thus L1025: thesis by L1024 , L1021;
end;
suppose L1026: ( len C165 ) <> ( 0 );

defpred S7[ Nat ] means (for R19 being (XFinSequence of R18) holds ((( len R19 ) = $1 & ( len R19 ) <> ( 0 )) implies (ex B161 being (Element of R18) st (ex B162 being (Function of ( NAT ) , R18) st (( B162 . ( 0 ) ) = ( R19 . ( 0 ) ) & (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( B162 . ( R4 + 1 ) ) = ( R21 . (( B162 . R4 ) , ( R19 . ( R4 + 1 ) )) ))) & B161 = ( B162 . ( ( len R19 ) - 1 ) ))))));
L1027: (for R3 being Nat holds (S7[ R3 ] implies S7[ ( R3 + 1 ) ]))
proof
let R3 being Nat;
assume that
L1028: S7[ R3 ];
let R19 being (XFinSequence of R18);
assume that
L1029: ( len R19 ) = ( R3 + 1 )
and
L1030: ( len R19 ) <> ( 0 );
set D102 = ( R19 | R3 );
L1031: R3 < ( R3 + 1 ) by NAT_1:13;
L1032: ( len D102 ) = R3 by L1031 , L1029 , AFINSQ_1:11;
L1033:
now
per cases ;
suppose L1034: ( len D102 ) = ( 0 );

L1035: ( 0 ) in ( dom R19 ) by L1034 , L1029 , L1032 , CARD_1:49 , TARSKI:def 1;
L1036: ( R19 . ( 0 ) ) in ( rng R19 ) by L1035 , FUNCT_1:def 3;
reconsider D103 = ( ( NAT ) --> ( R19 . ( 0 ) ) ) as (Function of ( NAT ) , R18) by L1036 , FUNCOP_1:45;
take D104 = ( D103 . ( 0 ) );
take D105 = D103;
thus L1037: ( D105 . ( 0 ) ) = ( R19 . ( 0 ) ) by FUNCOP_1:7;
thus L1038: (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( D105 . ( R4 + 1 ) ) = ( R21 . (( D105 . R4 ) , ( R19 . ( R4 + 1 ) )) ))) by L1029 , L1032 , L1034 , NAT_1:14;
L1039: R3 < ( R3 + 1 ) by NAT_1:13;
thus L1040: D104 = ( D105 . ( ( len R19 ) - 1 ) ) by L1039 , L1029 , L1034 , AFINSQ_1:11;
end;
suppose L1041: ( len D102 ) <> ( 0 );

L1042: R3 < ( len R19 ) by L1029 , NAT_1:13;
L1043: R3 in ( dom R19 ) by L1042 , NAT_1:44;
L1044: ( R19 . R3 ) in ( rng R19 ) by L1043 , FUNCT_1:def 3;
reconsider D106 = ( R19 . R3 ) as (Element of R18) by L1044;
L1045: ( 0 ) in ( len D102 ) by L1041 , NAT_1:44;
consider C166 being (Element of R18), C167 being (Function of ( NAT ) , R18) such that L1046: ( C167 . ( 0 ) ) = ( D102 . ( 0 ) ) and L1047: (for R4 being Nat holds (( R4 + 1 ) < ( len D102 ) implies ( C167 . ( R4 + 1 ) ) = ( R21 . (( C167 . R4 ) , ( D102 . ( R4 + 1 ) )) ))) and L1048: C166 = ( C167 . ( ( len D102 ) - 1 ) ) by L1028 , L1029 , L1031 , L1041 , AFINSQ_1:11;
deffunc H6((Element of ( NAT ))) = ( C167 . $1 );
reconsider D107 = R3 as (Element of ( NAT )) by ORDINAL1:def 12;
consider C168 being (Function of ( NAT ) , R18) such that L1049: ( C168 . D107 ) = ( R21 . (C166 , D106) ) and L1050: (for B163 being (Element of ( NAT )) holds (B163 <> D107 implies ( C168 . B163 ) = H6(B163))) from FUNCT_2:sch 6;
take D108 = ( C168 . R3 );
take D109 = C168;
L1051: ( D109 . ( 0 ) ) = ( C167 . ( 0 ) ) by L1032 , L1041 , L1050;
thus L1052: ( D109 . ( 0 ) ) = ( R19 . ( 0 ) ) by L1051 , L1046 , L1045 , FUNCT_1:47;
thus L1053: (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( D109 . ( R4 + 1 ) ) = ( R21 . (( D109 . R4 ) , ( R19 . ( R4 + 1 ) )) )))
proof
let R4 being Nat;
assume L1054: ( R4 + 1 ) < ( len R19 );
L1055: ( R4 + 1 ) <= ( len D102 ) by L1054 , L1029 , L1032 , NAT_1:13;
L1056:
now
per cases  by L1055 , XXREAL_0:1;
suppose L1057: ( R4 + 1 ) = ( len D102 );

L1058: R4 < R3 by L1057 , L1032 , NAT_1:13;
L1059: (( R4 + 1 ) = R3 & R4 in ( NAT )) by L1029 , L1031 , L1057 , AFINSQ_1:11 , ORDINAL1:def 12;
thus L1060: thesis by L1059 , L1048 , L1049 , L1050 , L1057 , L1058;
end;
suppose L1061: ( R4 + 1 ) < ( len D102 );

L1062: ( R4 + 1 ) in ( dom D102 ) by L1061 , NAT_1:44;
L1063: ( D102 . ( R4 + 1 ) ) = ( R19 . ( R4 + 1 ) ) by L1062 , FUNCT_1:47;
L1064: (R4 <= ( R4 + 1 ) & R4 in ( NAT )) by NAT_1:11 , ORDINAL1:def 12;
L1065: ( C167 . R4 ) = ( D109 . R4 ) by L1064 , L1032 , L1050 , L1061;
L1066: ( C167 . ( R4 + 1 ) ) = ( D109 . ( R4 + 1 ) ) by L1032 , L1050 , L1061;
thus L1067: thesis by L1066 , L1047 , L1061 , L1063 , L1065;
end;
end;
thus L1069: thesis by L1056;
end;

thus L1070: D108 = ( D109 . ( ( len R19 ) - 1 ) ) by L1029;
end;
end;
thus L1072: thesis by L1033;
end;
L1073: S7[ ( 0 ) ];
L1074: (for R3 being Nat holds S7[ R3 ]) from NAT_1:sch 2(L1073 , L1027);
thus L1075: thesis by L1074 , L1020 , L1026;
end;
end;
thus L1077: thesis by L1023;
end;
uniqueness
proof
let C169 , C170 being (Element of R18);
thus L1078: ((R21 is  having_a_unity & ( len C165 ) = ( 0 ) & C169 = ( the_unity_wrt R21 ) & C170 = ( the_unity_wrt R21 )) implies C169 = C170);
L1079: ( ( ( len C165 ) - 1 ) + 1 ) = ( len C165 );
assume L1080: ((not R21 is  having_a_unity) or ( len C165 ) <> ( 0 ));
L1081: ( 0 ) < ( len C165 ) by L1080 , L1021;
L1082: ( ( len C165 ) - 1 ) is (Element of ( NAT )) by L1081 , NAT_1:20;
given C171 being (Function of ( NAT ) , R18) such that
L1083: ( C171 . ( 0 ) ) = ( C165 . ( 0 ) )
and
L1084: (for R4 being Nat holds (( R4 + 1 ) < ( len C165 ) implies ( C171 . ( R4 + 1 ) ) = ( R21 . (( C171 . R4 ) , ( C165 . ( R4 + 1 ) )) )))
and
L1085: C169 = ( C171 . ( ( len C165 ) - 1 ) );

given C172 being (Function of ( NAT ) , R18) such that
L1086: ( C172 . ( 0 ) ) = ( C165 . ( 0 ) )
and
L1087: (for R4 being Nat holds (( R4 + 1 ) < ( len C165 ) implies ( C172 . ( R4 + 1 ) ) = ( R21 . (( C172 . R4 ) , ( C165 . ( R4 + 1 ) )) )))
and
L1088: C170 = ( C172 . ( ( len C165 ) - 1 ) );

defpred S8[ Nat ] means (( $1 + 1 ) <= ( len C165 ) implies ( C171 . $1 ) = ( C172 . $1 ));
L1089: (for R4 being Nat holds (S8[ R4 ] implies S8[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume L1090: S8[ R4 ];
assume L1091: ( ( R4 + 1 ) + 1 ) <= ( len C165 );
L1092: ( R4 + 1 ) < ( len C165 ) by L1091 , NAT_1:13;
L1093: ( C172 . ( R4 + 1 ) ) = ( R21 . (( C172 . R4 ) , ( C165 . ( R4 + 1 ) )) ) by L1092 , L1087;
thus L1094: thesis by L1093 , L1084 , L1090 , L1092;
end;
L1095: S8[ ( 0 ) ] by L1083 , L1086;
L1096: (for R4 being Nat holds S8[ R4 ]) from NAT_1:sch 2(L1095 , L1089);
thus L1097: thesis by L1096 , L1085 , L1088 , L1079 , L1082;
end;
consistency;
end;
theorem
L1099: (for R18 being non  empty set holds (for R21 being (BinOp of R18) holds (for R22 being (Element of R18) holds ( R21 "**" <% R22 %> ) = R22)))
proof
let R18 being non  empty set;
let R21 being (BinOp of R18);
let R22 being (Element of R18);
L1100: ( len <% R22 %> ) = 1 by AFINSQ_1:33;
L1101: (ex B164 being (Function of ( NAT ) , R18) st (( B164 . ( 0 ) ) = ( <% R22 %> . ( 0 ) ) & (for R4 being Nat holds (( R4 + 1 ) < ( len <% R22 %> ) implies ( B164 . ( R4 + 1 ) ) = ( R21 . (( B164 . R4 ) , ( <% R22 %> . ( R4 + 1 ) )) ))) & ( R21 "**" <% R22 %> ) = ( B164 . ( 1 - 1 ) ))) by L1100 , L1022;
thus L1102: thesis by L1101 , AFINSQ_1:34;
end;
theorem
L1103: (for R18 being non  empty set holds (for R21 being (BinOp of R18) holds (for R23 being (Element of R18) holds (for R24 being (Element of R18) holds ( R21 "**" <% R23 , R24 %> ) = ( R21 . (R23 , R24) )))))
proof
let R18 being non  empty set;
let R21 being (BinOp of R18);
let R23 being (Element of R18);
let R24 being (Element of R18);
L1104: ( <% R23 , R24 %> . ( 0 ) ) = R23 by AFINSQ_1:38;
L1105: ( len <% R23 , R24 %> ) = 2 by AFINSQ_1:38;
consider C173 being (Function of ( NAT ) , R18) such that L1106: ( C173 . ( 0 ) ) = ( <% R23 , R24 %> . ( 0 ) ) and L1107: (for R4 being Nat holds (( R4 + 1 ) < 2 implies ( C173 . ( R4 + 1 ) ) = ( R21 . (( C173 . R4 ) , ( <% R23 , R24 %> . ( R4 + 1 ) )) ))) and L1108: ( R21 "**" <% R23 , R24 %> ) = ( C173 . ( 2 - 1 ) ) by L1105 , L1022;
L1109: ( C173 . ( ( 0 ) + 1 ) ) = ( R21 . (( C173 . ( 0 ) ) , ( <% R23 , R24 %> . ( ( 0 ) + 1 ) )) ) by L1107;
thus L1110: thesis by L1109 , L1106 , L1108 , L1104 , AFINSQ_1:38;
end;
theorem
L1111: (for R18 being non  empty set holds (for R21 being (BinOp of R18) holds (for R22 being (Element of R18) holds (for R23 being (Element of R18) holds (for R24 being (Element of R18) holds ( R21 "**" <% R22 , R23 , R24 %> ) = ( R21 . (( R21 . (R22 , R23) ) , R24) ))))))
proof
let R18 being non  empty set;
let R21 being (BinOp of R18);
let R22 being (Element of R18);
let R23 being (Element of R18);
let R24 being (Element of R18);
set D110 = <% R22 , R23 , R24 %>;
L1112: ( D110 . ( 0 ) ) = R22 by AFINSQ_1:39;
L1113: ( D110 . 1 ) = R23 by AFINSQ_1:39;
L1114: ( len D110 ) = 3 by AFINSQ_1:39;
consider C174 being (Function of ( NAT ) , R18) such that L1115: ( C174 . ( 0 ) ) = ( D110 . ( 0 ) ) and L1116: (for R4 being Nat holds (( R4 + 1 ) < 3 implies ( C174 . ( R4 + 1 ) ) = ( R21 . (( C174 . R4 ) , ( D110 . ( R4 + 1 ) )) ))) and L1117: ( R21 "**" D110 ) = ( C174 . ( 3 - 1 ) ) by L1114 , L1022;
L1118: ( C174 . ( 1 + 1 ) ) = ( R21 . (( C174 . 1 ) , ( D110 . ( 1 + 1 ) )) ) by L1116;
L1119: ( C174 . ( ( 0 ) + 1 ) ) = ( R21 . (( C174 . ( 0 ) ) , ( D110 . ( ( 0 ) + 1 ) )) ) by L1116;
thus L1120: thesis by L1119 , L1115 , L1117 , L1118 , L1112 , L1113 , AFINSQ_1:39;
end;
theorem
L1121: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds (for R22 being (Element of R18) holds ((R21 is  having_a_unity or ( len R19 ) > ( 0 )) implies ( R21 "**" ( R19 ^ <% R22 %> ) ) = ( R21 . (( R21 "**" R19 ) , R22) ))))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
let R22 being (Element of R18);
assume L1122: (R21 is  having_a_unity or ( len R19 ) > ( 0 ));
L1123:
now
per cases ;
suppose L1124: ( len R19 ) < ( ( 0 ) + 1 );

L1125: R19 = ( {} ) by L1124 , NAT_1:13;
L1126: ( ( {} ) ^ <% R22 %> ) = <% R22 %>;
L1127: ( R21 "**" ( R19 ^ <% R22 %> ) ) = R22 by L1126 , L1099 , L1125;
L1128: ( len R19 ) = ( 0 ) by L1124 , NAT_1:13;
L1129: ( R21 "**" R19 ) = ( the_unity_wrt R21 ) by L1128 , L1122 , L1022;
thus L1130: thesis by L1129 , L1122 , L1124 , L1127 , NAT_1:13 , SETWISEO:15;
end;
suppose L1131: ( len R19 ) >= 1;

set D111 = ( R19 ^ <% R22 %> );
reconsider D112 = ( ( len R19 ) - 1 ) as (Element of ( NAT )) by L1131 , NAT_1:21;
L1132: ( D111 . ( len R19 ) ) = R22 by AFINSQ_1:36;
L1133: ( len D111 ) = ( ( len R19 ) + ( len <% R22 %> ) ) by AFINSQ_1:17
.= ( ( len R19 ) + 1 ) by AFINSQ_1:33;
L1134: 1 <= ( len D111 ) by L1133 , NAT_1:12;
consider C175 being (Function of ( NAT ) , R18) such that L1135: ( C175 . ( 0 ) ) = ( D111 . ( 0 ) ) and L1136: (for R4 being Nat holds (( R4 + 1 ) < ( len D111 ) implies ( C175 . ( R4 + 1 ) ) = ( R21 . (( C175 . R4 ) , ( D111 . ( R4 + 1 ) )) ))) and L1137: ( R21 "**" D111 ) = ( C175 . ( ( len D111 ) - 1 ) ) by L1134 , L1022;
consider C176 being (Function of ( NAT ) , R18) such that L1138: ( C176 . ( 0 ) ) = ( R19 . ( 0 ) ) and L1139: (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( C176 . ( R4 + 1 ) ) = ( R21 . (( C176 . R4 ) , ( R19 . ( R4 + 1 ) )) ))) and L1140: ( R21 "**" R19 ) = ( C176 . ( ( len R19 ) - 1 ) ) by L1131 , L1022;
defpred S9[ Nat ] means (( $1 + 1 ) < ( len D111 ) implies ( C176 . $1 ) = ( C175 . $1 ));
L1141: (for R4 being Nat holds (S9[ R4 ] implies S9[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume L1142: S9[ R4 ];
set D113 = ( R4 + 1 );
assume L1143: ( D113 + 1 ) < ( len D111 );
L1144: D113 < ( len D111 ) by L1143 , NAT_1:13;
L1145: ( C175 . D113 ) = ( R21 . (( C175 . R4 ) , ( D111 . ( R4 + 1 ) )) ) by L1144 , L1136;
L1146: ( ( D113 + 1 ) + ( - 1 ) ) < ( ( ( len R19 ) + 1 ) + ( - 1 ) ) by L1133 , L1143 , XREAL_1:8;
L1147: D113 in ( len R19 ) by L1146 , NAT_1:44;
L1148: ( C176 . D113 ) = ( R21 . (( C176 . R4 ) , ( R19 . D113 )) ) by L1139 , L1146;
thus L1149: thesis by L1148 , L1142 , L1143 , L1145 , L1147 , AFINSQ_1:def 3 , NAT_1:13;
end;
L1150: ( 0 ) in ( len R19 ) by L1131 , NAT_1:44;
L1151: S9[ ( 0 ) ] by L1150 , L1138 , L1135 , AFINSQ_1:def 3;
L1152: (for R4 being Nat holds S9[ R4 ]) from NAT_1:sch 2(L1151 , L1141);
L1153: ( D112 + 1 ) < ( len D111 ) by L1133 , NAT_1:13;
L1154: ( R21 "**" D111 ) = ( R21 . (( C175 . D112 ) , ( D111 . ( D112 + 1 ) )) ) by L1153 , L1133 , L1136 , L1137;
thus L1155: thesis by L1154 , L1140 , L1152 , L1153 , L1132;
end;
end;
thus L1157: thesis by L1123;
end;
theorem
L1158: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R20 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds ((R21 is  associative & (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len R20 ) >= 1))) implies ( R21 "**" ( R19 ^ R20 ) ) = ( R21 . (( R21 "**" R19 ) , ( R21 "**" R20 )) ))))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R20 being (XFinSequence of R18);
let R21 being (BinOp of R18);
defpred S10[ (XFinSequence of R18) ] means (for R19 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds ((R21 is  associative & (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len $1 ) >= 1))) implies ( R21 "**" ( R19 ^ $1 ) ) = ( R21 . (( R21 "**" R19 ) , ( R21 "**" $1 )) ))));
L1159: (for R20 being (XFinSequence of R18) holds (for R22 being (Element of R18) holds (S10[ R20 ] implies S10[ ( R20 ^ <% R22 %> ) ])))
proof
let R20 being (XFinSequence of R18);
let R22 being (Element of R18);
assume that
L1160: S10[ R20 ];
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
assume that
L1161: R21 is  associative
and
L1162: (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len ( R20 ^ <% R22 %> ) ) >= 1));
L1163:
now
per cases ;
suppose L1164: ( len R20 ) <> ( 0 );

L1165: (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len ( R19 ^ R20 ) ) = ( ( len R19 ) + ( len R20 ) ) & ( ( len R19 ) + ( len R20 ) ) > ( ( len R19 ) + ( 0 ) ))) by L1164 , L1162 , AFINSQ_1:17 , XREAL_1:8;
L1166: ( R21 . (( R21 "**" ( R19 ^ R20 ) ) , R22) ) = ( R21 "**" ( ( R19 ^ R20 ) ^ <% R22 %> ) ) by L1165 , L1121;
L1167: ( R21 "**" ( R19 ^ ( R20 ^ <% R22 %> ) ) ) = ( R21 . (( R21 "**" ( R19 ^ R20 ) ) , R22) ) by L1166 , AFINSQ_1:27;
L1168: ( len R20 ) >= 1 by L1164 , NAT_1:14;
L1169: ( R21 "**" ( R19 ^ ( R20 ^ <% R22 %> ) ) ) = ( R21 . (( R21 . (( R21 "**" R19 ) , ( R21 "**" R20 )) ) , R22) ) by L1168 , L1160 , L1161 , L1162 , L1167
.= ( R21 . (( R21 "**" R19 ) , ( R21 . (( R21 "**" R20 ) , R22) )) ) by L1161 , BINOP_1:def 3
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( R20 ^ <% R22 %> ) )) ) by L1164 , L1121;
thus L1170: thesis by L1169;
end;
suppose L1171: ( len R20 ) = ( 0 );

L1172: R20 = ( {} ) by L1171;
thus L1173: ( R21 "**" ( R19 ^ ( R20 ^ <% R22 %> ) ) ) = ( R21 "**" ( R19 ^ ( ( {} ) ^ <% R22 %> ) ) ) by L1172
.= ( R21 "**" ( R19 ^ <% R22 %> ) )
.= ( R21 . (( R21 "**" R19 ) , R22) ) by L1162 , L1121
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( ( {} ) ^ <% R22 %> ) )) ) by L1099
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( R20 ^ <% R22 %> ) )) ) by L1172;
end;
end;
thus L1175: thesis by L1163;
end;
L1176: S10[ ( <%> R18 ) ]
proof
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
assume that
L1177: R21 is  associative
and
L1178: (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len ( <%> R18 ) ) >= 1));
thus L1179: ( R21 "**" ( R19 ^ ( <%> R18 ) ) ) = ( R21 "**" ( R19 ^ ( {} ) ) )
.= ( R21 . (( R21 "**" R19 ) , ( the_unity_wrt R21 )) ) by L1178 , SETWISEO:15
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( <%> R18 ) )) ) by L1178 , L1022 , CARD_1:27;
end;
L1180: (for R20 being (XFinSequence of R18) holds S10[ R20 ]) from Sch5(L1176 , L1159);
thus L1181: thesis by L1180;
end;
theorem
L1182: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R20 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds ((R21 is  associative & (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len R20 ) >= 1))) implies ( R21 "**" ( R19 ^ R20 ) ) = ( R21 . (( R21 "**" R19 ) , ( R21 "**" R20 )) ))))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R20 being (XFinSequence of R18);
let R21 being (BinOp of R18);
defpred S11[ (XFinSequence of R18) ] means (for R19 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds ((R21 is  associative & (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len $1 ) >= 1))) implies ( R21 "**" ( R19 ^ $1 ) ) = ( R21 . (( R21 "**" R19 ) , ( R21 "**" $1 )) ))));
L1183: (for R20 being (XFinSequence of R18) holds (for R22 being (Element of R18) holds (S11[ R20 ] implies S11[ ( R20 ^ <% R22 %> ) ])))
proof
let R20 being (XFinSequence of R18);
let R22 being (Element of R18);
assume that
L1184: S11[ R20 ];
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
assume that
L1185: R21 is  associative
and
L1186: (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len ( R20 ^ <% R22 %> ) ) >= 1));
L1187:
now
per cases ;
suppose L1188: ( len R20 ) <> ( 0 );

L1189: (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len ( R19 ^ R20 ) ) = ( ( len R19 ) + ( len R20 ) ) & ( ( len R19 ) + ( len R20 ) ) > ( ( len R19 ) + ( 0 ) ))) by L1188 , L1186 , AFINSQ_1:17 , XREAL_1:8;
L1190: ( R21 . (( R21 "**" ( R19 ^ R20 ) ) , R22) ) = ( R21 "**" ( ( R19 ^ R20 ) ^ <% R22 %> ) ) by L1189 , L1121;
L1191: ( R21 "**" ( R19 ^ ( R20 ^ <% R22 %> ) ) ) = ( R21 . (( R21 "**" ( R19 ^ R20 ) ) , R22) ) by L1190 , AFINSQ_1:27;
L1192: ( len R20 ) >= 1 by L1188 , NAT_1:14;
L1193: ( R21 "**" ( R19 ^ ( R20 ^ <% R22 %> ) ) ) = ( R21 . (( R21 . (( R21 "**" R19 ) , ( R21 "**" R20 )) ) , R22) ) by L1192 , L1184 , L1185 , L1186 , L1191
.= ( R21 . (( R21 "**" R19 ) , ( R21 . (( R21 "**" R20 ) , R22) )) ) by L1185 , BINOP_1:def 3
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( R20 ^ <% R22 %> ) )) ) by L1188 , L1121;
thus L1194: thesis by L1193;
end;
suppose L1195: ( len R20 ) = ( 0 );

L1196: R20 = ( {} ) by L1195;
thus L1197: ( R21 "**" ( R19 ^ ( R20 ^ <% R22 %> ) ) ) = ( R21 "**" ( R19 ^ ( ( {} ) ^ <% R22 %> ) ) ) by L1196
.= ( R21 "**" ( R19 ^ <% R22 %> ) )
.= ( R21 . (( R21 "**" R19 ) , R22) ) by L1186 , L1121
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( ( {} ) ^ <% R22 %> ) )) ) by L1099
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( R20 ^ <% R22 %> ) )) ) by L1196;
end;
end;
thus L1199: thesis by L1187;
end;
L1200: S11[ ( <%> R18 ) ]
proof
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
assume that
L1201: R21 is  associative
and
L1202: (R21 is  having_a_unity or (( len R19 ) >= 1 & ( len ( <%> R18 ) ) >= 1));
thus L1203: ( R21 "**" ( R19 ^ ( <%> R18 ) ) ) = ( R21 "**" ( R19 ^ ( {} ) ) )
.= ( R21 . (( R21 "**" R19 ) , ( the_unity_wrt R21 )) ) by L1202 , SETWISEO:15
.= ( R21 . (( R21 "**" R19 ) , ( R21 "**" ( <%> R18 ) )) ) by L1202 , L1022 , CARD_1:27;
end;
L1204: (for R20 being (XFinSequence of R18) holds S11[ R20 ]) from Sch5(L1200 , L1183);
thus L1205: thesis by L1204;
end;
theorem
L1206: (for R4 being Nat holds (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds ((R4 in ( dom R19 ) & (R21 is  having_a_unity or R4 <> ( 0 ))) implies ( R21 . (( R21 "**" ( R19 | R4 ) ) , ( R19 . R4 )) ) = ( R21 "**" ( R19 | ( R4 + 1 ) ) ))))))
proof
let R4 being Nat;
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
assume that
L1207: R4 in ( dom R19 )
and
L1208: (R21 is  having_a_unity or R4 <> ( 0 ));
L1209: ( len R19 ) > R4 by L1207 , NAT_1:44;
L1210: ( len ( R19 | R4 ) ) = R4 by L1209 , AFINSQ_1:54;
defpred S12[ Nat ] means (($1 in ( dom R19 ) & (R21 is  having_a_unity or ( len ( R19 | $1 ) ) >= 1)) implies ( R21 . (( R21 "**" ( R19 | $1 ) ) , ( R19 . $1 )) ) = ( R21 "**" ( R19 | ( $1 + 1 ) ) ));
L1211: (for R3 being Nat holds (S12[ R3 ] implies S12[ ( R3 + 1 ) ]))
proof
let R3 being Nat;
assume that
L1212: S12[ R3 ];
set D114 = ( R3 + 1 );
set D115 = ( R19 | D114 );
set D116 = ( R19 | ( D114 + 1 ) );
assume that
L1213: D114 in ( dom R19 )
and
L1214: (R21 is  having_a_unity or ( len D115 ) >= 1);
L1215: ( 0 ) in ( dom R19 ) by L1213 , NAT_1:44;
L1216: ( 0 ) in D114 by NAT_1:44;
L1217: ( 0 ) in ( ( dom R19 ) /\ D114 ) by L1216 , L1215 , XBOOLE_0:def 4;
L1218: ( 0 ) in ( dom D115 ) by L1217 , RELAT_1:61;
L1219: ( D115 . ( 0 ) ) = ( R19 . ( 0 ) ) by L1218 , FUNCT_1:47;
L1220: R3 < D114 by NAT_1:13;
L1221: D114 < ( D114 + 1 ) by NAT_1:13;
L1222: D114 in ( D114 + 1 ) by L1221 , NAT_1:44;
L1223: D114 in ( ( dom R19 ) /\ ( D114 + 1 ) ) by L1222 , L1213 , XBOOLE_0:def 4;
L1224: ( dom R19 ) = ( len R19 );
L1225: D114 < ( dom R19 ) by L1213 , NAT_1:44;
L1226: ( len D115 ) = D114 by L1225 , L1224 , AFINSQ_1:54;
consider C177 being (Function of ( NAT ) , R18) such that L1227: ( C177 . ( 0 ) ) = ( D115 . ( 0 ) ) and L1228: (for R4 being Nat holds (( R4 + 1 ) < ( len D115 ) implies ( C177 . ( R4 + 1 ) ) = ( R21 . (( C177 . R4 ) , ( D115 . ( R4 + 1 ) )) ))) and L1229: ( R21 "**" D115 ) = ( C177 . ( D114 - 1 ) ) by L1226 , L1214 , L1022;
L1230: ( D114 + 1 ) <= ( dom R19 ) by L1225 , NAT_1:13;
L1231: ( len D116 ) = ( D114 + 1 ) by L1230 , L1224 , AFINSQ_1:54;
L1232: (R21 is  having_a_unity or ( len D116 ) >= 1) by L1231 , L1214 , L1226 , NAT_1:13;
consider C178 being (Function of ( NAT ) , R18) such that L1233: ( C178 . ( 0 ) ) = ( D116 . ( 0 ) ) and L1234: (for R4 being Nat holds (( R4 + 1 ) < ( len D116 ) implies ( C178 . ( R4 + 1 ) ) = ( R21 . (( C178 . R4 ) , ( D116 . ( R4 + 1 ) )) ))) and L1235: ( R21 "**" D116 ) = ( C178 . ( ( D114 + 1 ) - 1 ) ) by L1232 , L1231 , L1022;
defpred S13[ Nat ] means ($1 < D114 implies ( C177 . $1 ) = ( C178 . $1 ));
L1236: (for R5 being Nat holds (S13[ R5 ] implies S13[ ( R5 + 1 ) ]))
proof
let R5 being Nat;
assume that
L1237: S13[ R5 ];
set D117 = ( R5 + 1 );
assume L1238: D117 < D114;
L1239: D114 < ( dom R19 ) by L1213 , NAT_1:44;
L1240: D117 < ( dom R19 ) by L1239 , L1238 , XXREAL_0:2;
L1241: D117 in ( dom R19 ) by L1240 , NAT_1:44;
L1242: D117 < ( D114 + 1 ) by L1238 , NAT_1:13;
L1243: D117 in ( D114 + 1 ) by L1242 , NAT_1:44;
L1244: D117 in ( ( dom R19 ) /\ ( D114 + 1 ) ) by L1243 , L1241 , XBOOLE_0:def 4;
L1245: D117 in ( dom D116 ) by L1244 , RELAT_1:61;
L1246: ( D116 . D117 ) = ( R19 . D117 ) by L1245 , FUNCT_1:47;
L1247: D117 in D114 by L1238 , NAT_1:44;
L1248: D117 in ( ( dom R19 ) /\ D114 ) by L1247 , L1241 , XBOOLE_0:def 4;
L1249: D117 in ( dom D115 ) by L1248 , RELAT_1:61;
L1250: ( D115 . D117 ) = ( R19 . D117 ) by L1249 , FUNCT_1:47;
L1251: D117 < ( len D116 ) by L1231 , L1238 , NAT_1:13;
L1252: ( C178 . D117 ) = ( R21 . (( C177 . R5 ) , ( D115 . D117 )) ) by L1251 , L1234 , L1237 , L1238 , L1250 , L1246 , NAT_1:13;
thus L1253: thesis by L1252 , L1226 , L1228 , L1238;
end;
L1254: ( 0 ) in ( D114 + 1 ) by NAT_1:44;
L1255: ( 0 ) in ( ( dom R19 ) /\ ( D114 + 1 ) ) by L1254 , L1215 , XBOOLE_0:def 4;
L1256: ( 0 ) in ( dom D116 ) by L1255 , RELAT_1:61;
L1257: S13[ ( 0 ) ] by L1256 , L1227 , L1233 , L1219 , FUNCT_1:47;
L1258: (for R5 being Nat holds S13[ R5 ]) from NAT_1:sch 2(L1257 , L1236);
L1259: (( ( dom R19 ) /\ ( D114 + 1 ) ) = ( dom D116 ) & ( C177 . R3 ) = ( C178 . R3 )) by L1258 , L1220 , RELAT_1:61;
L1260: D114 < ( D114 + 1 ) by NAT_1:13;
L1261: ( C178 . D114 ) = ( R21 . (( C178 . R3 ) , ( D116 . D114 )) ) by L1260 , L1231 , L1234;
thus L1262: thesis by L1261 , L1229 , L1235 , L1223 , L1259 , FUNCT_1:47;
end;
L1263: S12[ ( 0 ) ]
proof
assume that
L1264: ( 0 ) in ( dom R19 )
and
L1265: (R21 is  having_a_unity or ( len ( R19 | (( 0 ) qua Ordinal) ) ) >= 1);
L1266: ( R19 . ( 0 ) ) in ( rng R19 ) by L1264 , FUNCT_1:def 3;
L1267: ( len R19 ) > ( 0 ) by L1264;
L1268: ( len ( R19 | 1 ) ) = 1 by L1267 , AFINSQ_1:54 , NAT_1:14;
L1269: ( R19 | 1 ) = <% ( ( R19 | 1 ) . ( 0 ) ) %> by L1268 , AFINSQ_1:34;
L1270: ( 0 ) in 1 by NAT_1:44;
L1271: ( R19 . ( 0 ) ) = ( ( R19 | 1 ) . ( 0 ) ) by L1270 , L1268 , FUNCT_1:47;
L1272: ( len ( R19 | (( 0 ) qua Ordinal) ) ) = ( 0 );
L1273: ( R21 "**" ( R19 | (( 0 ) qua Ordinal) ) ) = ( the_unity_wrt R21 ) by L1272 , L1265 , L1022;
L1274: ( R21 . (( R21 "**" ( R19 | (( 0 ) qua Ordinal) ) ) , ( R19 . ( 0 ) )) ) = ( R19 . ( 0 ) ) by L1273 , L1265 , L1266 , SETWISEO:15;
thus L1275: thesis by L1274 , L1266 , L1269 , L1271 , L1099;
end;
L1276: (for R3 being Nat holds S12[ R3 ]) from NAT_1:sch 2(L1263 , L1211);
thus L1277: thesis by L1276 , L1207 , L1208 , L1210 , NAT_1:14;
end;
theorem
L1278: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds ((R21 is  having_a_unity or ( len R19 ) >= 1) implies ( R21 "**" R19 ) = ( R21 "**" ( XFS2FS R19 ) )))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R21 being (BinOp of R18);
assume L1279: (R21 is  having_a_unity or ( len R19 ) >= 1);
per cases  by L1279;
suppose L1280: ( len R19 ) >= 1;

set D118 = ( XFS2FS R19 );
L1281: ( len R19 ) = ( len D118 ) by AFINSQ_1:def 9;
consider C179 being (Function of ( NAT ) , R18) such that L1282: ( C179 . 1 ) = ( D118 . 1 ) and L1283: (for B165 being (Element of ( NAT )) holds ((( 0 ) <> B165 & B165 < ( len R19 )) implies ( C179 . ( B165 + 1 ) ) = ( R21 . (( C179 . B165 ) , ( D118 . ( B165 + 1 ) )) ))) and L1284: ( R21 "**" D118 ) = ( C179 . ( len R19 ) ) by L1281 , L1280 , FINSOP_1:def 1;
consider C180 being (Function of ( NAT ) , R18) such that L1285: ( C180 . ( 0 ) ) = ( R19 . ( 0 ) ) and L1286: (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( C180 . ( R4 + 1 ) ) = ( R21 . (( C180 . R4 ) , ( R19 . ( R4 + 1 ) )) ))) and L1287: ( R21 "**" R19 ) = ( C180 . ( ( len R19 ) - 1 ) ) by L1280 , L1022;
defpred S14[ Nat ] means ($1 < ( len R19 ) implies ( C180 . $1 ) = ( C179 . ( $1 + 1 ) ));
L1288: (for R4 being Nat holds (S14[ R4 ] implies S14[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L1289: S14[ R4 ];
set D119 = ( R4 + 1 );
set D120 = ( D119 + 1 );
assume L1290: D119 < ( len R19 );
L1291: (( ( 0 ) + 1 ) <= D120 & D120 <= ( len R19 )) by L1290 , NAT_1:13;
L1292: ( R19 . ( D120 -' 1 ) ) = ( D118 . D120 ) by L1291 , AFINSQ_1:def 9;
L1293: (( C180 . D119 ) = ( R21 . (( C180 . R4 ) , ( R19 . D119 )) ) & ( C179 . ( D119 + 1 ) ) = ( R21 . (( C179 . D119 ) , ( D118 . ( D119 + 1 ) )) )) by L1286 , L1283 , L1290;
thus L1294: thesis by L1293 , L1289 , L1290 , L1292 , NAT_1:13 , NAT_D:34;
end;
reconsider D121 = ( ( len R19 ) - 1 ) as (Element of ( NAT )) by L1280 , NAT_1:21;
L1295: D121 < ( D121 + 1 ) by NAT_1:13;
L1296: S14[ ( 0 ) ]
proof
assume L1297: ( 0 ) < ( len R19 );
L1298: ( ( 0 ) + 1 ) <= ( len R19 ) by L1297 , NAT_1:13;
L1299: ( R19 . ( 1 -' 1 ) ) = ( D118 . 1 ) by L1298 , AFINSQ_1:def 9;
thus L1300: thesis by L1299 , L1285 , L1282 , XREAL_1:232;
end;
L1301: (for R4 being Nat holds S14[ R4 ]) from NAT_1:sch 2(L1296 , L1288);
thus L1302: thesis by L1301 , L1287 , L1284 , L1295;
end;
suppose L1303: (R21 is  having_a_unity & ( len R19 ) < 1);

L1304: ( len R19 ) <= ( ( 0 ) + 1 ) by L1303;
L1305: ( len R19 ) = ( 0 ) by L1304 , L1303 , NAT_1:8;
L1306: (( len R19 ) = ( len ( XFS2FS R19 ) ) & ( R21 "**" R19 ) = ( the_unity_wrt R21 )) by L1305 , L1303 , L1022 , AFINSQ_1:def 9;
thus L1307: thesis by L1306 , L1303 , L1305 , FINSOP_1:def 1;
end;
end;
theorem
L1309: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R20 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds (for B166 being (Permutation of ( dom R19 )) holds ((R21 is  commutative  associative & (R21 is  having_a_unity or ( len R19 ) >= 1) & R20 = ( R19 * B166 )) implies ( R21 "**" R19 ) = ( R21 "**" R20 )))))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R20 being (XFinSequence of R18);
let R21 being (BinOp of R18);
let C181 being (Permutation of ( dom R19 ));
assume that
L1310: R21 is  commutative  associative
and
L1311: (R21 is  having_a_unity or ( len R19 ) >= 1)
and
L1312: R20 = ( R19 * C181 );
set D122 = ( XFS2FS R19 );
L1313: (R21 is  having_a_unity or ( len D122 ) >= 1) by L1311 , AFINSQ_1:def 9;
set D123 = ( XFS2FS R20 );
defpred S15[ set , set ] means (for R4 being Nat holds ($1 = R4 implies $2 = ( ( C181 . ( R4 - 1 ) ) + 1 )));
L1314: ( dom R19 ) = ( len R19 );
reconsider D124 = ( dom R19 ) as (Element of ( NAT )) by L1314;
L1315: (for R6 being set holds (R6 in ( Seg D124 ) implies (ex R7 being set st (R7 in ( Seg D124 ) & S15[ R6 , R7 ]))))
proof
let R6 being set;
assume that
L1316: R6 in ( Seg D124 );
reconsider D125 = R6 as (Element of ( NAT )) by L1316;
L1317: ( 1 + ( 0 ) ) <= D125 by L1316 , FINSEQ_1:1;
reconsider D126 = ( D125 - 1 ) as (Element of ( NAT )) by L1317 , NAT_1:21;
L1318: ( D126 + 1 ) <= D124 by L1316 , FINSEQ_1:1;
L1319: D126 < D124 by L1318 , NAT_1:13;
L1320: D126 in D124 by L1319 , NAT_1:44;
take ( ( C181 . D126 ) + 1 );
L1321: ( dom R19 ) = ( dom C181 ) by L1318 , FUNCT_2:def 1;
L1322: ( C181 . D126 ) in ( rng C181 ) by L1321 , L1320 , FUNCT_1:def 3;
L1323: ( C181 . D126 ) < D124 by L1322 , NAT_1:44;
L1324: (( ( 0 ) + 1 ) <= ( ( C181 . D126 ) + 1 ) & ( ( C181 . D126 ) + 1 ) <= D124) by L1323 , NAT_1:13;
thus L1325: thesis by L1324 , FINSEQ_1:1;
end;
consider C182 being (Function of ( Seg D124 ) , ( Seg D124 )) such that L1326: (for R6 being set holds (R6 in ( Seg D124 ) implies S15[ R6 , ( C182 . R6 ) ])) from FUNCT_2:sch 1(L1315);
L1327:
now
let C183 , C184 being set;
assume that
L1328: C183 in ( dom C182 )
and
L1329: C184 in ( dom C182 )
and
L1330: ( C182 . C183 ) = ( C182 . C184 );
L1331: ( dom C182 ) = ( Seg D124 ) by FUNCT_2:52;
reconsider D127 = C183 , D128 = C184 as (Element of ( NAT )) by L1331 , L1328 , L1329;
L1332: (( 1 + ( 0 ) ) <= D127 & ( 1 + ( 0 ) ) <= D128) by L1328 , L1329 , FINSEQ_1:1;
reconsider D129 = ( D127 - 1 ) , D130 = ( D128 - 1 ) as (Element of ( NAT )) by L1332 , NAT_1:21;
L1333: (D129 < ( D129 + 1 ) & D127 <= D124) by L1328 , FINSEQ_1:1 , NAT_1:13;
L1334: ( dom C181 ) = ( dom R19 ) by L1333 , FUNCT_2:def 1;
L1335: (D130 < ( D130 + 1 ) & D128 <= D124) by L1329 , FINSEQ_1:1 , NAT_1:13;
L1336: D130 < D124 by L1335 , XXREAL_0:2;
L1337: D130 in ( dom C181 ) by L1336 , L1334 , NAT_1:44;
L1338: D129 < D124 by L1333 , XXREAL_0:2;
L1339: D129 in ( dom C181 ) by L1338 , L1334 , NAT_1:44;
L1340: ( C182 . D127 ) = ( ( C181 . D129 ) + 1 ) by L1326 , L1328;
L1341: ( ( ( C181 . D129 ) + 1 ) - 1 ) = ( ( ( C181 . D130 ) + 1 ) - 1 ) by L1340 , L1326 , L1329 , L1330;
L1342: ( ( D127 - 1 ) + 1 ) = ( ( D128 - 1 ) + 1 ) by L1341 , L1339 , L1337 , FUNCT_1:def 4;
thus L1343: C183 = C184 by L1342;
end;
L1344: C182 is  one-to-one by L1327 , FUNCT_1:def 4;
L1345: ( card ( Seg D124 ) ) = ( card ( Seg D124 ) );
L1346: C182 is  one-to-one  onto by L1345 , L1344 , L8;
L1347: ( len D122 ) = ( len R19 ) by AFINSQ_1:def 9;
L1348: ( dom D122 ) = ( Seg ( len R19 ) ) by L1347 , FINSEQ_1:def 3;
reconsider D131 = C182 as (Permutation of ( dom D122 )) by L1348 , L1346;
L1349: (( dom D131 ) = ( Seg D124 ) & ( dom D123 ) = ( Seg ( len D123 ) )) by FINSEQ_1:def 3 , FUNCT_2:52;
L1350: ( rng D131 ) c= ( dom D122 );
L1351: ( dom ( D122 * D131 ) ) = ( dom D131 ) by L1350 , RELAT_1:27;
L1352: ( rng C181 ) c= ( dom R19 );
L1353: ( dom ( R19 * C181 ) ) = ( dom C181 ) by L1352 , RELAT_1:27;
L1354: ( dom R20 ) = ( dom R19 ) by L1353 , L1312 , FUNCT_2:52;
L1355: ( dom R20 ) = ( len R20 );
L1356: (for B167 being set holds (B167 in ( dom D123 ) implies ( D123 . B167 ) = ( ( D122 * D131 ) . B167 )))
proof
let C185 being set;
assume that
L1357: C185 in ( dom D123 );
reconsider D132 = C185 as (Element of ( NAT )) by L1357;
L1358: ( dom D123 ) = ( Seg ( len D123 ) ) by FINSEQ_1:def 3;
L1359: 1 <= D132 by L1358 , L1357 , FINSEQ_1:1;
L1360: ( D132 -' 1 ) = ( D132 - 1 ) by L1359 , XREAL_1:233;
L1361: ( 0 ) < D132 by L1357 , L1358 , FINSEQ_1:1;
reconsider D133 = ( D132 - 1 ) as (Element of ( NAT )) by L1361 , NAT_1:20;
L1362: ( dom D122 ) = ( Seg ( len D122 ) ) by FINSEQ_1:def 3;
L1363: ( len D123 ) = ( len R20 ) by AFINSQ_1:def 9;
L1364: (( ( C181 . ( D132 - 1 ) ) + 1 ) = ( D131 . D132 ) & D132 in ( dom D131 )) by L1363 , L1326 , L1354 , L1357 , L1358 , FUNCT_2:52;
L1365: ( ( C181 . ( D132 - 1 ) ) + 1 ) in ( rng D131 ) by L1364 , FUNCT_1:def 3;
L1366: D132 <= ( len R19 ) by L1354 , L1357 , L1358 , L1363 , FINSEQ_1:1;
L1367: ( D123 . D132 ) = ( ( R19 * C181 ) . ( D132 -' 1 ) ) by L1366 , L1312 , L1354 , L1355 , L1359 , AFINSQ_1:def 9;
L1368: ( len D122 ) = ( len R19 ) by AFINSQ_1:def 9;
L1369: ( ( C181 . ( D132 - 1 ) ) + 1 ) <= ( len R19 ) by L1368 , L1365 , L1362 , FINSEQ_1:1;
L1370: (D133 < ( D133 + 1 ) & ( D132 -' 1 ) = D133) by L1359 , NAT_1:13 , XREAL_1:233;
L1371: ( D132 -' 1 ) < ( dom R20 ) by L1370 , L1354 , L1366 , XXREAL_0:2;
L1372: ( D132 -' 1 ) in ( dom R20 ) by L1371 , NAT_1:44;
L1373: (( ( ( C181 . ( D132 -' 1 ) ) + 1 ) -' 1 ) = ( C181 . ( D132 -' 1 ) ) & ( ( R19 * C181 ) . ( D132 -' 1 ) ) = ( R19 . ( C181 . ( D132 -' 1 ) ) )) by L1372 , L1312 , FUNCT_1:12 , NAT_D:34;
L1374: 1 <= ( ( C181 . ( D132 - 1 ) ) + 1 ) by L1365 , L1362 , FINSEQ_1:1;
L1375: ( ( R19 * C181 ) . ( D132 -' 1 ) ) = ( D122 . ( ( C181 . ( D132 - 1 ) ) + 1 ) ) by L1374 , L1369 , L1360 , L1373 , AFINSQ_1:def 9;
thus L1376: thesis by L1375 , L1364 , L1367 , FUNCT_1:13;
end;
L1377: ( len D123 ) = ( len R19 ) by L1354 , L1355 , AFINSQ_1:def 9;
L1378: D123 = ( D122 * D131 ) by L1377 , L1356 , L1351 , L1349 , FUNCT_1:def 11;
L1379: ( R21 "**" D123 ) = ( R21 "**" D122 ) by L1378 , L1310 , L1313 , FINSOP_1:7;
L1380: ( R21 "**" D123 ) = ( R21 "**" R20 ) by L1311 , L1354 , L1355 , L1278;
thus L1381: thesis by L1380 , L1311 , L1379 , L1278;
end;
theorem
L1382: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for R20 being (XFinSequence of R18) holds (for R21 being (BinOp of R18) holds (for B168 being (XFinSequence of R18) holds ((R21 is  commutative  associative & (R21 is  having_a_unity or ( len R19 ) >= 1) & ( len R19 ) = ( len R20 ) & ( len R19 ) = ( len B168 ) & (for R4 being Nat holds (R4 in ( dom B168 ) implies ( B168 . R4 ) = ( R21 . (( R19 . R4 ) , ( R20 . R4 )) )))) implies ( R21 "**" ( R19 ^ R20 ) ) = ( R21 "**" B168 )))))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let R20 being (XFinSequence of R18);
let R21 being (BinOp of R18);
let C186 being (XFinSequence of R18);
assume that
L1383: R21 is  commutative  associative
and
L1384: (R21 is  having_a_unity or ( len R19 ) >= 1)
and
L1385: ( len R19 ) = ( len R20 )
and
L1386: ( len R19 ) = ( len C186 )
and
L1387: (for R4 being Nat holds (R4 in ( dom C186 ) implies ( C186 . R4 ) = ( R21 . (( R19 . R4 ) , ( R20 . R4 )) )));
set D134 = ( XFS2FS R20 );
set D135 = ( XFS2FS R19 );
L1388: (( R21 "**" R19 ) = ( R21 "**" D135 ) & ( R21 "**" R20 ) = ( R21 "**" D134 )) by L1384 , L1385 , L1278;
set D136 = ( XFS2FS C186 );
L1389: ( len D136 ) = ( len C186 ) by AFINSQ_1:def 9;
L1390: (for B169 being (Element of ( NAT )) holds (B169 in ( dom D136 ) implies ( D136 . B169 ) = ( R21 . (( D135 . B169 ) , ( D134 . B169 )) )))
proof
let C187 being (Element of ( NAT ));
assume that
L1391: C187 in ( dom D136 );
L1392: C187 in ( Seg ( len D136 ) ) by L1391 , FINSEQ_1:def 3;
L1393: C187 >= 1 by L1392 , FINSEQ_1:1;
reconsider D137 = ( C187 - 1 ) as (Element of ( NAT )) by L1393 , NAT_1:21;
L1394: C187 in ( Seg ( len D136 ) ) by L1391 , FINSEQ_1:def 3;
L1395: 1 <= C187 by L1394 , FINSEQ_1:1;
L1396: D137 = ( C187 -' 1 ) by L1395 , XREAL_1:233;
L1397: C187 in ( Seg ( len D136 ) ) by L1391 , FINSEQ_1:def 3;
L1398: (D137 < ( D137 + 1 ) & C187 <= ( len D136 )) by L1397 , FINSEQ_1:1 , NAT_1:13;
L1399: D137 < ( len D136 ) by L1398 , XXREAL_0:2;
L1400: D137 in ( dom C186 ) by L1399 , L1389 , NAT_1:44;
L1401: ( C186 . D137 ) = ( R21 . (( R19 . D137 ) , ( R20 . D137 )) ) by L1400 , L1387;
L1402: C187 <= ( len C186 ) by L1389 , L1394 , FINSEQ_1:1;
L1403: (( C186 . ( C187 -' 1 ) ) = ( D136 . C187 ) & ( R19 . ( C187 -' 1 ) ) = ( D135 . C187 )) by L1402 , L1386 , L1395 , AFINSQ_1:def 9;
thus L1404: thesis by L1403 , L1385 , L1386 , L1395 , L1402 , L1401 , L1396 , AFINSQ_1:def 9;
end;
L1405: (( len D135 ) = ( len R19 ) & ( len R20 ) = ( len D134 )) by AFINSQ_1:def 9;
L1406: ( R21 "**" D136 ) = ( R21 . (( R21 "**" D135 ) , ( R21 "**" D134 )) ) by L1405 , L1383 , L1384 , L1385 , L1386 , L1389 , L1390 , FINSOP_1:9;
L1407: ( R21 "**" C186 ) = ( R21 . (( R21 "**" R19 ) , ( R21 "**" R20 )) ) by L1406 , L1384 , L1386 , L1388 , L1278;
thus L1408: thesis by L1407 , L1383 , L1384 , L1385 , L1182;
end;
theorem
L1409: (for R18 being non  empty set holds (for R19 being (XFinSequence of R18) holds (for B170 , B171 being non  empty set holds (for B172 being (BinOp of B170) holds (for B173 being (BinOp of B171) holds ((( len R19 ) >= 1 & R18 c= ( B170 /\ B171 ) & (for R6 being set holds (for R7 being set holds ((R6 in R18 & R7 in R18) implies (( B172 . (R6 , R7) ) = ( B173 . (R6 , R7) ) & ( B172 . (R6 , R7) ) in R18))))) implies ( B172 "**" R19 ) = ( B173 "**" R19 )))))))
proof
let R18 being non  empty set;
let R19 being (XFinSequence of R18);
let C188 , C189 being non  empty set;
let C190 being (BinOp of C188);
let C191 being (BinOp of C189);
assume that
L1410: ( len R19 ) >= 1
and
L1411: R18 c= ( C188 /\ C189 )
and
L1412: (for R6 being set holds (for R7 being set holds ((R6 in R18 & R7 in R18) implies (( C190 . (R6 , R7) ) = ( C191 . (R6 , R7) ) & ( C190 . (R6 , R7) ) in R18))));
L1413: (( C188 /\ C189 ) c= C188 & ( C188 /\ C189 ) c= C189) by XBOOLE_1:17;
L1414: (R18 c= C188 & R18 c= C189) by L1413 , L1411 , XBOOLE_1:1;
L1415: (( rng R19 ) c= C188 & ( rng R19 ) c= C189) by L1414 , XBOOLE_1:1;
L1416: (R19 is C188 -valued & R19 is C189 -valued) by L1415 , RELAT_1:def 19;
consider C192 being (Function of ( NAT ) , C188) such that L1417: ( C192 . ( 0 ) ) = ( R19 . ( 0 ) ) and L1418: (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( C192 . ( R4 + 1 ) ) = ( C190 . (( C192 . R4 ) , ( R19 . ( R4 + 1 ) )) ))) and L1419: ( C190 "**" R19 ) = ( C192 . ( ( len R19 ) - 1 ) ) by L1416 , L1410 , L1022;
consider C193 being (Function of ( NAT ) , C189) such that L1420: ( C193 . ( 0 ) ) = ( R19 . ( 0 ) ) and L1421: (for R4 being Nat holds (( R4 + 1 ) < ( len R19 ) implies ( C193 . ( R4 + 1 ) ) = ( C191 . (( C193 . R4 ) , ( R19 . ( R4 + 1 ) )) ))) and L1422: ( C191 "**" R19 ) = ( C193 . ( ( len R19 ) - 1 ) ) by L1410 , L1022 , L1416;
defpred S16[ Nat ] means ($1 < ( len R19 ) implies (( C192 . $1 ) = ( C193 . $1 ) & ( C192 . $1 ) in R18));
L1423: ( 0 ) in ( dom R19 ) by L1410 , NAT_1:44;
L1424: ( R19 . ( 0 ) ) in ( rng R19 ) by L1423 , FUNCT_1:def 3;
L1425: S16[ ( 0 ) ] by L1424 , L1417 , L1420;
L1426: (for R4 being Nat holds (S16[ R4 ] implies S16[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume L1427: S16[ R4 ];
assume L1428: ( R4 + 1 ) < ( len R19 );
L1429: (( R4 + 1 ) in ( dom R19 ) & R4 < ( len R19 )) by L1428 , NAT_1:13 , NAT_1:44;
L1430: (( R19 . ( R4 + 1 ) ) in ( rng R19 ) & R4 in ( dom R19 )) by L1429 , FUNCT_1:def 3 , NAT_1:44;
L1431: ( C192 . ( R4 + 1 ) ) = ( C190 . (( C192 . R4 ) , ( R19 . ( R4 + 1 ) )) ) by L1418 , L1428;
L1432: ( C192 . ( R4 + 1 ) ) = ( C191 . (( C193 . R4 ) , ( R19 . ( R4 + 1 ) )) ) by L1431 , L1412 , L1430 , L1427 , NAT_1:44
.= ( C193 . ( R4 + 1 ) ) by L1421 , L1428;
thus L1433: thesis by L1432 , L1430 , L1427 , L1431 , L1412 , NAT_1:44;
end;
reconsider D138 = ( ( len R19 ) - 1 ) as (Element of ( NAT )) by L1410 , NAT_1:21;
L1434: D138 < ( D138 + 1 ) by NAT_1:13;
L1435: (for R4 being Nat holds S16[ R4 ]) from NAT_1:sch 2(L1425 , L1426);
thus L1436: thesis by L1435 , L1419 , L1422 , L1434;
end;
L1437: (for R30 being  complex-valued XFinSequence holds R30 is ( COMPLEX ) -valued)
proof
let R30 being  complex-valued XFinSequence;
L1438: ( rng R30 ) c= ( COMPLEX ) by VALUED_0:def 1;
thus L1439: thesis by L1438 , RELAT_1:def 19;
end;
L1440: (for R26 being  real-valued XFinSequence holds R26 is ( REAL ) -valued)
proof
let R26 being  real-valued XFinSequence;
L1441: ( rng R26 ) c= ( REAL ) by VALUED_0:def 3;
thus L1442: thesis by L1441 , RELAT_1:def 19;
end;
definition
let R25 being XFinSequence;
func Sum R25 -> (Element of ( COMPLEX )) equals 
( ( addcomplex ) "**" R25 );
coherence;
end;
registration
let C194 being  empty  complex-valued XFinSequence;
cluster ( Sum C194 ) ->  zero;
coherence
proof
L1444: (C194 is ( COMPLEX ) -valued & ( len C194 ) = ( 0 )) by L1437;
thus L1445: thesis by L1444 , L1022 , BINOP_2:1;
end;
end;
theorem
L1447: (for R25 being XFinSequence holds (R25 is  real-valued implies ( Sum R25 ) = ( ( addreal ) "**" R25 )))
proof
let R25 being XFinSequence;
assume L1448: R25 is  real-valued;
L1449: ( rng R25 ) c= ( REAL ) by L1448 , VALUED_0:def 3;
L1450: R25 is ( REAL ) -valued by L1449 , RELAT_1:def 19;
L1451: ( rng R25 ) c= ( COMPLEX ) by L1448 , MEMBERED:1;
L1452: R25 is ( COMPLEX ) -valued by L1451 , RELAT_1:def 19;
per cases  by NAT_1:14;
suppose L1453: ( len R25 ) = ( 0 );

thus L1454: ( ( addreal ) "**" R25 ) = ( 0 ) by L1453 , L1022 , L1450 , BINOP_2:2
.= ( Sum R25 ) by L1022 , L1452 , L1453 , BINOP_2:1;
end;
suppose L1455: ( len R25 ) >= 1;

L1456: ( REAL ) = ( ( REAL ) /\ ( COMPLEX ) ) by MEMBERED:1 , XBOOLE_1:28;
L1457:
now
let R6 being set;
let R7 being set;
assume L1458: (R6 in ( REAL ) & R7 in ( REAL ));
reconsider D139 = R6 , D140 = R7 as (Element of ( REAL )) by L1458;
L1459: ( ( addreal ) . (R6 , R7) ) = ( D139 + D140 ) by BINOP_2:def 9;
thus L1460: (( ( addreal ) . (R6 , R7) ) = ( ( addcomplex ) . (R6 , R7) ) & ( ( addreal ) . (R6 , R7) ) in ( REAL )) by L1459 , BINOP_2:def 3;
end;
thus L1461: thesis by L1457 , L1409 , L1455 , L1456 , L1450;
end;
end;
theorem
L1463: (for R25 being XFinSequence holds (R25 is ( RAT ) -valued implies ( Sum R25 ) = ( ( addrat ) "**" R25 )))
proof
let R25 being XFinSequence;
assume L1464: R25 is ( RAT ) -valued;
L1465: ( rng R25 ) c= ( COMPLEX ) by L1464 , MEMBERED:1;
L1466: R25 is ( COMPLEX ) -valued by L1465 , RELAT_1:def 19;
per cases  by NAT_1:14;
suppose L1467: ( len R25 ) = ( 0 );

thus L1468: ( ( addrat ) "**" R25 ) = ( 0 ) by L1467 , L1022 , L1464 , BINOP_2:3
.= ( Sum R25 ) by L1022 , L1466 , L1467 , BINOP_2:1;
end;
suppose L1469: ( len R25 ) >= 1;

L1470: ( RAT ) = ( ( RAT ) /\ ( COMPLEX ) ) by MEMBERED:1 , XBOOLE_1:28;
L1471:
now
let R6 being set;
let R7 being set;
assume L1472: (R6 in ( RAT ) & R7 in ( RAT ));
reconsider D141 = R6 , D142 = R7 as (Element of ( RAT )) by L1472;
L1473: ( ( addrat ) . (R6 , R7) ) = ( D141 + D142 ) by BINOP_2:def 15;
thus L1474: (( ( addrat ) . (R6 , R7) ) = ( ( addcomplex ) . (R6 , R7) ) & ( ( addrat ) . (R6 , R7) ) in ( RAT )) by L1473 , BINOP_2:def 3;
end;
thus L1475: thesis by L1471 , L1409 , L1469 , L1470 , L1464;
end;
end;
theorem
L1477: (for R25 being XFinSequence holds (R25 is ( INT ) -valued implies ( Sum R25 ) = ( ( addint ) "**" R25 )))
proof
let R25 being XFinSequence;
assume L1478: R25 is ( INT ) -valued;
L1479: ( rng R25 ) c= ( COMPLEX ) by L1478 , MEMBERED:1;
L1480: R25 is ( COMPLEX ) -valued by L1479 , RELAT_1:def 19;
per cases  by NAT_1:14;
suppose L1481: ( len R25 ) = ( 0 );

thus L1482: ( ( addint ) "**" R25 ) = ( 0 ) by L1481 , L1022 , L1478 , BINOP_2:4
.= ( Sum R25 ) by L1022 , L1480 , L1481 , BINOP_2:1;
end;
suppose L1483: ( len R25 ) >= 1;

L1484: ( INT ) = ( ( INT ) /\ ( COMPLEX ) ) by MEMBERED:1 , XBOOLE_1:28;
L1485:
now
let R6 being set;
let R7 being set;
assume L1486: (R6 in ( INT ) & R7 in ( INT ));
reconsider D143 = R6 , D144 = R7 as (Element of ( INT )) by L1486;
L1487: ( ( addint ) . (R6 , R7) ) = ( D143 + D144 ) by BINOP_2:def 20;
thus L1488: (( ( addint ) . (R6 , R7) ) = ( ( addcomplex ) . (R6 , R7) ) & ( ( addint ) . (R6 , R7) ) in ( INT )) by L1487 , BINOP_2:def 3;
end;
thus L1489: thesis by L1485 , L1409 , L1483 , L1484 , L1478;
end;
end;
theorem
L1491: (for R25 being XFinSequence holds (R25 is  natural-valued implies ( Sum R25 ) = ( ( addnat ) "**" R25 )))
proof
let R25 being XFinSequence;
assume L1492: R25 is  natural-valued;
L1493: ( rng R25 ) c= ( NAT ) by L1492 , VALUED_0:def 6;
L1494: R25 is ( NAT ) -valued by L1493 , RELAT_1:def 19;
L1495: ( rng R25 ) c= ( COMPLEX ) by L1492 , MEMBERED:1;
L1496: R25 is ( COMPLEX ) -valued by L1495 , RELAT_1:def 19;
per cases  by NAT_1:14;
suppose L1497: ( len R25 ) = ( 0 );

thus L1498: ( ( addnat ) "**" R25 ) = ( 0 ) by L1497 , L1022 , L1494 , BINOP_2:5
.= ( Sum R25 ) by L1022 , L1496 , L1497 , BINOP_2:1;
end;
suppose L1499: ( len R25 ) >= 1;

L1500: ( NAT ) = ( ( NAT ) /\ ( COMPLEX ) ) by MEMBERED:1 , XBOOLE_1:28;
L1501:
now
let R6 being set;
let R7 being set;
assume L1502: (R6 in ( NAT ) & R7 in ( NAT ));
reconsider D145 = R6 , D146 = R7 as (Element of ( NAT )) by L1502;
L1503: ( ( addnat ) . (R6 , R7) ) = ( D145 + D146 ) by BINOP_2:def 23;
thus L1504: (( ( addnat ) . (R6 , R7) ) = ( ( addcomplex ) . (R6 , R7) ) & ( ( addnat ) . (R6 , R7) ) in ( NAT )) by L1503 , BINOP_2:def 3;
end;
thus L1505: thesis by L1501 , L1409 , L1499 , L1500 , L1494;
end;
end;
registration
let C195 being  real-valued XFinSequence;
cluster ( Sum C195 ) ->  real;
coherence
proof
L1507: ( Sum C195 ) = ( ( addreal ) "**" C195 ) by L1447;
thus L1508: thesis by L1507;
end;
end;
registration
let C196 being ( RAT ) -valued XFinSequence;
cluster ( Sum C196 ) ->  rational;
coherence
proof
L1510: ( Sum C196 ) = ( ( addrat ) "**" C196 ) by L1463;
thus L1511: thesis by L1510;
end;
end;
registration
let C197 being ( INT ) -valued XFinSequence;
cluster ( Sum C197 ) ->  integer;
coherence
proof
L1513: ( Sum C197 ) = ( ( addint ) "**" C197 ) by L1477;
thus L1514: thesis by L1513;
end;
end;
registration
let C198 being  natural-valued XFinSequence;
cluster ( Sum C198 ) ->  natural;
coherence
proof
L1516: ( Sum C198 ) = ( ( addnat ) "**" C198 ) by L1491;
thus L1517: thesis by L1516;
end;
end;
registration
cluster  natural-valued ->  nonnegative-yielding for Relation;
coherence
proof
let C199 being Relation;
assume L1519: C199 is  natural-valued;
L1520: (for B174 being  real number holds (B174 in ( rng C199 ) implies B174 >= ( 0 ))) by L1519;
thus L1521: thesis by L1520 , PARTFUN3:def 4;
end;
end;
theorem
L1523: (for R30 being  complex-valued XFinSequence holds (R30 = ( {} ) implies ( Sum R30 ) = ( 0 )));
theorem
L1524: (for R33 being  complex number holds ( Sum <% R33 %> ) = R33)
proof
let R33 being  complex number;
L1525: R33 in ( COMPLEX ) by XCMPLX_0:def 2;
thus L1526: thesis by L1525 , L1099;
end;
theorem
L1527: (for R34 being  complex number holds (for R35 being  complex number holds ( Sum <% R34 , R35 %> ) = ( R34 + R35 )))
proof
let R34 being  complex number;
let R35 being  complex number;
L1528: (R34 in ( COMPLEX ) & R35 in ( COMPLEX )) by XCMPLX_0:def 2;
L1529: ( ( addcomplex ) "**" <% R34 , R35 %> ) = ( ( addcomplex ) . (R34 , R35) ) by L1528 , L1103
.= ( R34 + R35 ) by BINOP_2:def 3;
thus L1530: thesis by L1529;
end;
theorem
L1531: (for R31 being  complex-valued XFinSequence holds (for R32 being  complex-valued XFinSequence holds ( Sum ( R31 ^ R32 ) ) = ( ( Sum R31 ) + ( Sum R32 ) )))
proof
let R31 being  complex-valued XFinSequence;
let R32 being  complex-valued XFinSequence;
L1532: (R31 is ( COMPLEX ) -valued & R32 is ( COMPLEX ) -valued) by L1437;
thus L1533: ( Sum ( R31 ^ R32 ) ) = ( ( addcomplex ) . (( Sum R31 ) , ( Sum R32 )) ) by L1182 , L1532
.= ( ( Sum R31 ) + ( Sum R32 ) ) by BINOP_2:def 3;
end;
theorem
L1534: (for R4 being Nat holds (for R26 being  real-valued XFinSequence holds (for B175 being Real_Sequence holds (R26 = ( B175 | ( R4 + 1 ) ) implies ( Sum R26 ) = ( ( Partial_Sums B175 ) . R4 )))))
proof
let R4 being Nat;
let R26 being  real-valued XFinSequence;
let C200 being Real_Sequence;
L1535: R26 is ( REAL ) -valued by L1440;
L1536: ( R4 + 1 ) c= ( NAT ) by ORDINAL1:def 2;
L1537: ( R4 + 1 ) c= ( dom C200 ) by L1536 , FUNCT_2:def 1;
assume L1538: R26 = ( C200 | ( R4 + 1 ) );
L1539: ( dom R26 ) = ( ( dom C200 ) /\ ( R4 + 1 ) ) by L1538 , RELAT_1:61;
L1540: ( dom R26 ) = ( R4 + 1 ) by L1539 , L1537 , XBOOLE_1:28;
consider C201 being (Function of ( NAT ) , ( REAL )) such that L1541: ( C201 . ( 0 ) ) = ( R26 . ( 0 ) ) and L1542: (for B176 being Nat holds (( B176 + 1 ) < ( len R26 ) implies ( C201 . ( B176 + 1 ) ) = ( ( addreal ) . (( C201 . B176 ) , ( R26 . ( B176 + 1 ) )) ))) and L1543: ( ( addreal ) "**" R26 ) = ( C201 . ( ( len R26 ) - 1 ) ) by L1540 , L1022 , L1535;
defpred S17[ Nat ] means ($1 in ( dom R26 ) implies ( C201 . $1 ) = ( ( Partial_Sums C200 ) . $1 ));
L1544:
now
let R3 being Nat;
assume L1545: S17[ R3 ];
thus L1546: S17[ ( R3 + 1 ) ]
proof
assume L1547: ( R3 + 1 ) in ( dom R26 );
L1548: ( R3 + 1 ) < ( len R26 ) by L1547 , NAT_1:44;
L1549: R3 < ( len R26 ) by L1548 , NAT_1:13;
L1550: R3 in ( NAT ) by ORDINAL1:def 12;
thus L1551: ( C201 . ( R3 + 1 ) ) = ( ( addreal ) . (( C201 . R3 ) , ( R26 . ( R3 + 1 ) )) ) by L1542 , L1548
.= ( ( C201 . R3 ) + ( R26 . ( R3 + 1 ) ) ) by BINOP_2:def 9
.= ( ( C201 . R3 ) + ( C200 . ( R3 + 1 ) ) ) by L1538 , L1547 , FUNCT_1:47
.= ( ( Partial_Sums C200 ) . ( R3 + 1 ) ) by L1545 , L1549 , L1550 , NAT_1:44 , SERIES_1:def 1;
end;

end;
L1547: ( ( Partial_Sums C200 ) . ( 0 ) ) = ( C200 . ( 0 ) ) by SERIES_1:def 1;
L1548: S17[ ( 0 ) ] by L1547 , L1538 , L1541 , FUNCT_1:47;
L1549: (for R5 being Nat holds S17[ R5 ]) from NAT_1:sch 2(L1548 , L1544);
thus L1550: ( ( Partial_Sums C200 ) . R4 ) = ( C201 . R4 ) by L1549 , L1540 , NAT_1:45
.= ( Sum R26 ) by L1447 , L1543 , L1540;
end;
theorem
L1551: (for R27 being  real-valued XFinSequence holds (for R28 being  real-valued XFinSequence holds ((( len R27 ) = ( len R28 ) & (for R1 being Nat holds (R1 in ( dom R27 ) implies ( R27 . R1 ) <= ( R28 . R1 )))) implies ( Sum R27 ) <= ( Sum R28 ))))
proof
let R27 being  real-valued XFinSequence;
let R28 being  real-valued XFinSequence;
set D147 = R27;
set D148 = R28;
assume that
L1552: ( len D147 ) = ( len D148 )
and
L1553: (for R1 being Nat holds (R1 in ( dom D147 ) implies ( D147 . R1 ) <= ( D148 . R1 )));
reconsider D149 = D147 , D150 = D148 as (XFinSequence of ( REAL )) by L1440;
L1554: (( Sum D149 ) = ( ( addreal ) "**" D149 ) & ( Sum D150 ) = ( ( addreal ) "**" D150 )) by L1447;
per cases  by NAT_1:14;
suppose L1555: ( len D149 ) >= 1;

consider C202 being (Function of ( NAT ) , ( REAL )) such that L1556: ( C202 . ( 0 ) ) = ( D149 . ( 0 ) ) and L1557: (for R4 being Nat holds (( R4 + 1 ) < ( len D149 ) implies ( C202 . ( R4 + 1 ) ) = ( ( addreal ) . (( C202 . R4 ) , ( D149 . ( R4 + 1 ) )) ))) and L1558: ( Sum D149 ) = ( C202 . ( ( len D149 ) - 1 ) ) by L1555 , L1022 , L1554;
consider C203 being (Function of ( NAT ) , ( REAL )) such that L1559: ( C203 . ( 0 ) ) = ( D150 . ( 0 ) ) and L1560: (for R4 being Nat holds (( R4 + 1 ) < ( len D150 ) implies ( C203 . ( R4 + 1 ) ) = ( ( addreal ) . (( C203 . R4 ) , ( D150 . ( R4 + 1 ) )) ))) and L1561: ( Sum D150 ) = ( C203 . ( ( len D150 ) - 1 ) ) by L1555 , L1552 , L1022 , L1554;
defpred S18[ Nat ] means ($1 in ( dom D149 ) implies ( C202 . $1 ) <= ( C203 . $1 ));
L1562:
now
let R1 being Nat;
assume L1563: S18[ R1 ];
thus L1564: S18[ ( R1 + 1 ) ]
proof
assume L1565: ( R1 + 1 ) in ( dom D149 );
L1566: ( R1 + 1 ) < ( len D149 ) by L1565 , NAT_1:44;
L1567: R1 < ( len D149 ) by L1566 , NAT_1:13;
L1568: ( D149 . ( R1 + 1 ) ) <= ( D150 . ( R1 + 1 ) ) by L1553 , L1565;
L1569: ( C202 . ( R1 + 1 ) ) = ( ( addreal ) . (( C202 . R1 ) , ( D149 . ( R1 + 1 ) )) ) by L1557 , L1566
.= ( ( C202 . R1 ) + ( D149 . ( R1 + 1 ) ) ) by BINOP_2:def 9;
L1570: ( C203 . ( R1 + 1 ) ) = ( ( addreal ) . (( C203 . R1 ) , ( D150 . ( R1 + 1 ) )) ) by L1552 , L1560 , L1566
.= ( ( C203 . R1 ) + ( D150 . ( R1 + 1 ) ) ) by BINOP_2:def 9;
thus L1571: thesis by L1570 , L1563 , L1567 , L1569 , L1568 , NAT_1:44 , XREAL_1:7;
end;

end;
reconsider D151 = ( ( len D149 ) - 1 ) as (Element of ( NAT )) by L1555 , NAT_1:21;
L1565: ( ( len D149 ) - 1 ) < ( ( len D149 ) - ( 0 ) ) by XREAL_1:10;
L1566: D151 in ( len D149 ) by L1565 , NAT_1:44;
L1567: S18[ ( 0 ) ] by L1553 , L1556 , L1559;
L1568: (for R1 being Nat holds S18[ R1 ]) from NAT_1:sch 2(L1567 , L1562);
thus L1569: thesis by L1568 , L1552 , L1558 , L1561 , L1566;
end;
suppose L1570: ( len D149 ) = ( 0 );

L1571: (( Sum D149 ) = ( the_unity_wrt ( addreal ) ) & ( Sum D150 ) = ( the_unity_wrt ( addreal ) )) by L1570 , L1022 , L1554 , L1552;
thus L1572: thesis by L1571;
end;
end;
theorem
L1574: (for R4 being Nat holds (for R33 being  complex number holds ( Sum ( R4 --> R33 ) ) = ( R4 * R33 )))
proof
let R4 being Nat;
let R33 being  complex number;
set D152 = ( R4 --> R33 );
reconsider D153 = D152 as (XFinSequence of ( COMPLEX )) by L1437;
L1575: ( dom D153 ) = R4 by FUNCOP_1:13;
L1576:
now
per cases ;
suppose L1577: ( dom D153 ) = ( 0 );

thus L1578: thesis by L1577 , L1575;
end;
suppose L1579: ( dom D153 ) > ( 0 );

consider C204 being (Function of ( NAT ) , ( COMPLEX )) such that L1580: ( C204 . ( 0 ) ) = ( D153 . ( 0 ) ) and L1581: (for R3 being Nat holds (( R3 + 1 ) < ( len D153 ) implies ( C204 . ( R3 + 1 ) ) = ( ( addcomplex ) . (( C204 . R3 ) , ( D153 . ( R3 + 1 ) )) ))) and L1582: ( Sum D153 ) = ( C204 . ( ( len D153 ) - 1 ) ) by L1579 , L1022;
defpred S19[ Nat ] means ($1 < ( len D153 ) implies ( C204 . $1 ) = ( ( $1 + 1 ) * R33 ));
L1583: (for R5 being Nat holds (S19[ R5 ] implies S19[ ( R5 + 1 ) ]))
proof
let R5 being Nat;
assume that
L1584: S19[ R5 ];
assume L1585: ( R5 + 1 ) < ( len D153 );
L1586: ( C204 . ( R5 + 1 ) ) = ( ( addcomplex ) . (( C204 . R5 ) , ( D153 . ( R5 + 1 ) )) ) by L1585 , L1581;
L1587: ( C204 . ( R5 + 1 ) ) = ( ( C204 . R5 ) + ( D153 . ( R5 + 1 ) ) ) by L1586 , BINOP_2:def 3;
L1588: ( R5 + 1 ) in ( len D153 ) by L1585 , NAT_1:44;
L1589: ( D153 . ( R5 + 1 ) ) = R33 by L1588 , L1575 , FUNCOP_1:7;
thus L1590: thesis by L1589 , L1584 , L1585 , L1587 , NAT_1:13;
end;
reconsider D154 = ( ( len D153 ) - 1 ) as (Element of ( NAT )) by L1579 , NAT_1:20;
L1591: D154 < ( D154 + 1 ) by NAT_1:13;
L1592: S19[ ( 0 ) ]
proof
assume L1593: ( 0 ) < ( len D153 );
L1594: ( 0 ) in ( dom D153 ) by L1593 , NAT_1:44;
thus L1595: thesis by L1594 , L1580 , L1575 , FUNCOP_1:7;
end;
L1596: (for R5 being Nat holds S19[ R5 ]) from NAT_1:sch 2(L1592 , L1583);
thus L1597: thesis by L1596 , L1582 , L1591 , L1575;
end;
end;
thus L1599: thesis by L1576;
end;
theorem
L1600: (for R26 being  real-valued XFinSequence holds (for R29 being  real number holds ((for R4 being Nat holds (R4 in ( dom R26 ) implies ( R26 . R4 ) <= R29)) implies ( Sum R26 ) <= ( ( len R26 ) * R29 ))))
proof
let R26 being  real-valued XFinSequence;
let R29 being  real number;
set D155 = ( ( len R26 ) --> R29 );
assume L1601: (for R4 being Nat holds (R4 in ( dom R26 ) implies ( R26 . R4 ) <= R29));
L1602: ( len D155 ) = ( len R26 ) by FUNCOP_1:13;
L1603:
now
let R4 being Nat;
assume L1604: R4 in ( dom R26 );
L1605: (( R26 . R4 ) <= R29 & ( D155 . R4 ) = R29) by L1604 , L1601 , FUNCOP_1:7;
thus L1606: ( R26 . R4 ) <= ( D155 . R4 ) by L1605;
end;
L1607: ( Sum R26 ) <= ( Sum D155 ) by L1603 , L1551 , L1602;
thus L1608: thesis by L1607 , L1574;
end;
theorem
L1609: (for R26 being  real-valued XFinSequence holds (for R29 being  real number holds ((for R4 being Nat holds (R4 in ( dom R26 ) implies ( R26 . R4 ) >= R29)) implies ( Sum R26 ) >= ( ( len R26 ) * R29 ))))
proof
let R26 being  real-valued XFinSequence;
let R29 being  real number;
set D156 = ( ( len R26 ) --> R29 );
assume L1610: (for R4 being Nat holds (R4 in ( dom R26 ) implies ( R26 . R4 ) >= R29));
L1611: ( len D156 ) = ( len R26 ) by FUNCOP_1:13;
L1612:
now
let R4 being Nat;
assume L1613: R4 in ( dom R26 );
L1614: (( R26 . R4 ) >= R29 & ( D156 . R4 ) = R29) by L1613 , L1610 , FUNCOP_1:7;
thus L1615: ( R26 . R4 ) >= ( D156 . R4 ) by L1614;
end;
L1616: ( Sum R26 ) >= ( Sum D156 ) by L1612 , L1551 , L1611;
thus L1617: thesis by L1616 , L1574;
end;
theorem
L1618: (for R26 being  real-valued XFinSequence holds (for R29 being  real number holds ((R26 is  nonnegative-yielding & ( len R26 ) > ( 0 ) & (ex R6 being set st (R6 in ( dom R26 ) & ( R26 . R6 ) = R29))) implies ( Sum R26 ) >= R29)))
proof
let R26 being  real-valued XFinSequence;
let R29 being  real number;
assume that
L1619: R26 is  nonnegative-yielding
and
L1620: ( len R26 ) > ( 0 )
and
L1621: (ex R6 being set st (R6 in ( dom R26 ) & ( R26 . R6 ) = R29));
consider R6 being set such that L1622: R6 in ( dom R26 ) and L1623: ( R26 . R6 ) = R29 by L1621;
reconsider D157 = ( ( len R26 ) - 1 ) as (Element of ( NAT )) by L1620 , NAT_1:20;
L1624: ( dom R26 ) = ( D157 + 1 );
reconsider D158 = R6 as (Element of ( NAT )) by L1622;
L1625: D157 < ( D157 + 1 ) by NAT_1:13;
L1626: D158 < ( dom R26 ) by L1622 , NAT_1:44;
L1627: D158 <= D157 by L1626 , L1624 , NAT_1:13;
L1628: R26 is ( REAL ) -valued by L1440;
consider C205 being (Function of ( NAT ) , ( REAL )) such that L1629: ( C205 . ( 0 ) ) = ( R26 . ( 0 ) ) and L1630: (for R4 being Nat holds (( R4 + 1 ) < ( len R26 ) implies ( C205 . ( R4 + 1 ) ) = ( ( addreal ) . (( C205 . R4 ) , ( R26 . ( R4 + 1 ) )) ))) and L1631: ( ( addreal ) "**" R26 ) = ( C205 . ( ( len R26 ) - 1 ) ) by L1628 , L1022 , L1620;
defpred S20[ Nat ] means ($1 < D158 implies ( C205 . $1 ) >= ( 0 ));
L1632: ( 0 ) in ( len R26 ) by L1620 , NAT_1:44;
L1633: ( R26 . ( 0 ) ) in ( rng R26 ) by L1632 , FUNCT_1:def 3;
L1634: S20[ ( 0 ) ] by L1633 , L1619 , L1629 , PARTFUN3:def 4;
L1635: (for R4 being Nat holds (S20[ R4 ] implies S20[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume L1636: S20[ R4 ];
assume L1637: ( R4 + 1 ) < D158;
L1638: (R4 < D158 & ( R4 + 1 ) < ( len R26 )) by L1637 , L1626 , NAT_1:13 , XXREAL_0:2;
L1639: (( C205 . ( R4 + 1 ) ) = ( ( addreal ) . (( C205 . R4 ) , ( R26 . ( R4 + 1 ) )) ) & ( C205 . R4 ) >= ( 0 ) & ( R4 + 1 ) in ( dom R26 )) by L1638 , L1630 , L1636 , NAT_1:44;
L1640: ( R26 . ( R4 + 1 ) ) in ( rng R26 ) by L1639 , FUNCT_1:def 3;
L1641: ( R26 . ( R4 + 1 ) ) >= ( 0 ) by L1640 , L1619 , PARTFUN3:def 4;
L1642: ( ( C205 . R4 ) + ( R26 . ( R4 + 1 ) ) ) >= ( ( 0 ) + ( 0 ) ) by L1641 , L1637 , L1636 , NAT_1:13;
thus L1643: thesis by L1642 , L1639 , BINOP_2:def 9;
end;
L1644: (for R4 being Nat holds S20[ R4 ]) from NAT_1:sch 2(L1634 , L1635);
defpred S21[ Nat ] means ((D158 <= $1 & $1 < ( len R26 )) implies ( C205 . $1 ) >= R29);
L1645:
now
per cases ;
suppose L1646: D158 = ( 0 );

assume that
L1647: D158 <= D158
and
L1648: D158 < ( len R26 );
thus L1649: ( C205 . D158 ) >= R29 by L1623 , L1629 , L1646;
end;
suppose L1650: D158 > ( 0 );

reconsider D159 = ( D158 - 1 ) as (Element of ( NAT )) by L1650 , NAT_1:20;
assume that
L1651: D158 <= D158
and
L1652: D158 < ( len R26 );
L1653: D159 < ( D159 + 1 ) by NAT_1:13;
L1654: ( D159 + 1 ) < ( len R26 ) by L1652;
L1655: ( C205 . D158 ) = ( ( addreal ) . (( C205 . D159 ) , ( R26 . D158 )) ) by L1654 , L1630;
L1656: (( C205 . D158 ) = ( ( C205 . D159 ) + ( R26 . D158 ) ) & ( C205 . D159 ) >= ( 0 )) by L1655 , L1653 , L1644 , BINOP_2:def 9;
L1657: ( C205 . D158 ) >= ( R29 + ( 0 ) ) by L1656 , L1623 , XREAL_1:7;
thus L1658: ( C205 . D158 ) >= R29 by L1657;
end;
end;
L1660: S21[ D158 ] by L1645;
L1661: (for B177 being Nat holds ((B177 >= D158 & S21[ B177 ]) implies S21[ ( B177 + 1 ) ]))
proof
let C206 being Nat;
assume that
L1662: C206 >= D158
and
L1663: S21[ C206 ];
reconsider D160 = C206 as (Element of ( NAT )) by ORDINAL1:def 12;
assume that
L1664: D158 <= ( C206 + 1 )
and
L1665: ( C206 + 1 ) < ( len R26 );
L1666: ( C206 + 1 ) in ( dom R26 ) by L1665 , NAT_1:44;
L1667: ( R26 . ( C206 + 1 ) ) in ( rng R26 ) by L1666 , FUNCT_1:def 3;
L1668: ( C205 . ( D160 + 1 ) ) = ( ( addreal ) . (( C205 . D160 ) , ( R26 . ( D160 + 1 ) )) ) by L1630 , L1665;
L1669: (( C205 . ( D160 + 1 ) ) = ( ( C205 . D160 ) + ( R26 . ( D160 + 1 ) ) ) & ( R26 . ( D160 + 1 ) ) >= ( 0 )) by L1668 , L1667 , L1619 , BINOP_2:def 9 , PARTFUN3:def 4;
L1670: ( C205 . ( C206 + 1 ) ) >= ( R29 + ( 0 ) ) by L1669 , L1662 , L1663 , L1665 , NAT_1:13 , XREAL_1:7;
thus L1671: thesis by L1670;
end;
L1672: (for B178 being Nat holds (B178 >= D158 implies S21[ B178 ])) from NAT_1:sch 8(L1660 , L1661);
L1673: ( ( addreal ) "**" R26 ) >= R29 by L1672 , L1631 , L1627 , L1625;
thus L1674: thesis by L1673 , L1447;
end;
theorem
L1675: (for R26 being  real-valued XFinSequence holds (R26 is  nonnegative-yielding implies (( Sum R26 ) = ( 0 ) iff (( len R26 ) = ( 0 ) or R26 = ( ( len R26 ) --> ( 0 ) )))))
proof
let R26 being  real-valued XFinSequence;
assume L1676: R26 is  nonnegative-yielding;
thus L1677:now
assume L1678: ( Sum R26 ) = ( 0 );
assume L1679: ( len R26 ) <> ( 0 );
set D161 = ( ( len R26 ) --> ( 0 ) );
assume L1680: R26 <> ( ( len R26 ) --> ( 0 ) );
consider R3 being Nat such that L1681: (R3 in ( dom D161 ) & ( D161 . R3 ) <> ( R26 . R3 )) by L1680 , AFINSQ_1:8 , FUNCOP_1:13;
L1682: ( R26 . R3 ) in ( rng R26 ) by L1681 , FUNCT_1:def 3;
L1683: (( D161 . R3 ) = ( 0 ) & ( R26 . R3 ) >= ( 0 )) by L1682 , L1681 , L1676 , FUNCOP_1:7 , PARTFUN3:def 4;
thus L1684: contradiction by L1683 , L1678 , L1618 , L1676 , L1681;
end;
L1685: R26 is ( COMPLEX ) -valued by L1437;
assume L1686: (( len R26 ) = ( 0 ) or R26 = ( ( len R26 ) --> ( 0 ) ));
L1687: (( Sum R26 ) = ( 0 ) or ( Sum R26 ) = ( ( len R26 ) * ( 0 ) )) by L1686 , L1685 , L1574 , L1022 , BINOP_2:1;
thus L1688: thesis by L1687;
end;
theorem
L1689: (for R4 being Nat holds (for R30 being  complex-valued XFinSequence holds (for R33 being  complex number holds ( R33 (#) ( R30 | R4 ) ) = ( ( R33 (#) R30 ) | R4 ))))
proof
let R4 being Nat;
let R30 being  complex-valued XFinSequence;
let R33 being  complex number;
set D162 = ( R33 (#) R30 );
set D163 = ( R30 | R4 );
L1690: (( len D162 ) = ( len R30 ) & ( len ( R33 (#) D163 ) ) = ( len D163 )) by VALUED_1:def 5;
per cases ;
suppose L1691: R4 <= ( len R30 );

L1692: (( len D163 ) = R4 & ( len ( D162 | R4 ) ) = R4) by L1691 , L1690 , AFINSQ_1:54;
L1693:
now
let R1 being Nat;
assume L1694: R1 < ( len ( R33 (#) D163 ) );
L1695: R1 in ( dom ( R33 (#) D163 ) ) by L1694 , NAT_1:44;
thus L1696: ( ( R33 (#) D163 ) . R1 ) = ( R33 * ( D163 . R1 ) ) by VALUED_1:6
.= ( R33 * ( R30 . R1 ) ) by L1695 , L1691 , AFINSQ_1:53
.= ( D162 . R1 ) by VALUED_1:6
.= ( ( D162 | R4 ) . R1 ) by L1695 , L1690 , L1691 , AFINSQ_1:53;
end;
thus L1697: thesis by L1693 , L1690 , L1692 , AFINSQ_1:9;
end;
suppose L1698: R4 > ( len R30 );

L1699: (( R30 | R4 ) = R30 & ( D162 | R4 ) = D162) by L1698 , L1690 , AFINSQ_1:52;
thus L1700: thesis by L1699;
end;
end;
theorem
L1702: (for R30 being  complex-valued XFinSequence holds (for R33 being  complex number holds ( R33 * ( Sum R30 ) ) = ( Sum ( R33 (#) R30 ) )))
proof
let R30 being  complex-valued XFinSequence;
let R33 being  complex number;
defpred S22[ Nat ] means (for R30 being  complex-valued XFinSequence holds (( dom R30 ) = $1 implies ( R33 * ( Sum R30 ) ) = ( Sum ( R33 (#) R30 ) )));
L1703: (for R3 being Nat holds (S22[ R3 ] implies S22[ ( R3 + 1 ) ]))
proof
let R3 being Nat;
assume that
L1704: S22[ R3 ];
L1705: R3 < ( R3 + 1 ) by NAT_1:13;
let R30 being  complex-valued XFinSequence;
assume that
L1706: ( dom R30 ) = ( R3 + 1 );
set D164 = ( R33 (#) R30 );
L1707: ( dom R30 ) = ( dom D164 ) by VALUED_1:def 5;
reconsider D165 = R30 , D166 = D164 as (XFinSequence of ( COMPLEX )) by L1437;
L1708: ( D165 | ( R3 + 1 ) ) = D165 by L1706 , RELAT_1:69;
L1709: ( len D165 ) = ( R3 + 1 ) by L1706;
L1710: ( len ( D165 | R3 ) ) = R3 by L1709 , L1705 , AFINSQ_1:11;
L1711: R3 < ( R3 + 1 ) by NAT_1:13;
L1712: R3 in ( dom D165 ) by L1711 , L1706 , NAT_1:44;
L1713: ( ( addcomplex ) . (( ( addcomplex ) "**" ( D165 | R3 ) ) , ( D165 . R3 )) ) = ( ( addcomplex ) "**" ( D165 | ( R3 + 1 ) ) ) by L1712 , L1206;
L1714: ( Sum D165 ) = ( ( Sum ( D165 | R3 ) ) + ( D165 . R3 ) ) by L1713 , L1708 , BINOP_2:def 3;
L1715: ( R33 * ( Sum ( D165 | R3 ) ) ) = ( Sum ( R33 (#) ( D165 | R3 ) ) ) by L1704 , L1710
.= ( Sum ( D166 | R3 ) ) by L1689;
L1716: ( R33 * ( D165 . R3 ) ) = ( D166 . R3 ) by VALUED_1:6;
L1717: ( D166 | ( R3 + 1 ) ) = D166 by L1706 , L1707 , RELAT_1:69;
L1718: ( ( addcomplex ) . (( ( addcomplex ) "**" ( D166 | R3 ) ) , ( D166 . R3 )) ) = ( ( addcomplex ) "**" ( D166 | ( R3 + 1 ) ) ) by L1707 , L1712 , L1206;
L1719: ( Sum D166 ) = ( ( Sum ( D166 | R3 ) ) + ( D166 . R3 ) ) by L1718 , L1717 , BINOP_2:def 3;
thus L1720: thesis by L1719 , L1714 , L1716 , L1715;
end;
L1721: S22[ ( 0 ) ]
proof
let R30 being  complex-valued XFinSequence;
assume that
L1722: ( dom R30 ) = ( 0 );
set D167 = ( R33 (#) R30 );
reconsider D168 = R30 , D169 = D167 as (XFinSequence of ( COMPLEX )) by L1437;
L1723: ( len D168 ) = ( 0 ) by L1722;
L1724: ( ( addcomplex ) "**" D168 ) = ( 0 ) by L1723 , L1022 , BINOP_2:1;
L1725: ( len D169 ) = ( 0 ) by L1722 , VALUED_1:def 5;
thus L1726: thesis by L1725 , L1724 , L1022 , BINOP_2:1;
end;
L1727: (for R3 being Nat holds S22[ R3 ]) from NAT_1:sch 2(L1721 , L1703);
L1728: S22[ ( len R30 ) ] by L1727;
thus L1729: thesis by L1728;
end;
theorem
L1730: (for R4 being Nat holds (for R30 being  complex-valued XFinSequence holds (R4 in ( dom R30 ) implies ( ( Sum ( R30 | R4 ) ) + ( R30 . R4 ) ) = ( Sum ( R30 | ( R4 + 1 ) ) ))))
proof
let R4 being Nat;
let R30 being  complex-valued XFinSequence;
assume L1731: R4 in ( dom R30 );
reconsider D170 = R30 as (XFinSequence of ( COMPLEX )) by L1437;
L1732: ( ( addcomplex ) . (( ( addcomplex ) "**" ( D170 | R4 ) ) , ( D170 . R4 )) ) = ( ( addcomplex ) "**" ( D170 | ( R4 + 1 ) ) ) by L1206 , L1731;
thus L1733: thesis by L1732 , BINOP_2:def 3;
end;
theorem
L1734: (for R6 being set holds (for R7 being set holds (for B179 being Function holds ((( B179 . R7 ) = R6 & R7 in ( dom B179 )) implies ( { R7 } \/ ( ( B179 | ( ( dom B179 ) \ { R7 } ) ) " { R6 } ) ) = ( B179 " { R6 } )))))
proof
let R6 being set;
let R7 being set;
let C207 being Function;
assume that
L1735: ( C207 . R7 ) = R6
and
L1736: R7 in ( dom C207 );
set D171 = ( ( dom C207 ) \ { R7 } );
L1737: ( ( C207 | D171 ) " { R6 } ) c= ( C207 " { R6 } )
proof
let C208 being set;
assume that
L1738: C208 in ( ( C207 | D171 ) " { R6 } );
L1739: ( ( C207 | D171 ) . C208 ) in { R6 } by L1738 , FUNCT_1:def 7;
L1740: C208 in ( dom ( C207 | D171 ) ) by L1738 , FUNCT_1:def 7;
L1741: (( dom ( C207 | D171 ) ) = ( ( dom C207 ) /\ D171 ) & ( C207 . C208 ) = ( ( C207 | D171 ) . C208 )) by L1740 , FUNCT_1:47 , RELAT_1:61;
thus L1742: thesis by L1741 , L1740 , L1739 , FUNCT_1:def 7;
end;
L1743: ( C207 " { R6 } ) c= ( { R7 } \/ ( ( C207 | D171 ) " { R6 } ) )
proof
let C209 being set;
assume that
L1744: C209 in ( C207 " { R6 } );
L1745: ((C209 in ( dom C207 ) & (not C209 in { R7 })) or C209 = R7) by L1744 , FUNCT_1:def 7 , TARSKI:def 1;
L1746: ((C209 in ( dom C207 ) & C209 in D171 & ( dom ( C207 | D171 ) ) = ( ( dom C207 ) /\ D171 )) or C209 = R7) by L1745 , RELAT_1:61 , XBOOLE_0:def 5;
L1747: (C209 in ( dom ( C207 | D171 ) ) or C209 = R7) by L1746 , XBOOLE_0:def 4;
L1748: ((C209 in ( dom ( C207 | D171 ) ) & ( C207 . C209 ) = ( ( C207 | D171 ) . C209 ) & ( C207 . C209 ) in { R6 }) or C209 in { R7 }) by L1747 , L1744 , FUNCT_1:47 , FUNCT_1:def 7 , TARSKI:def 1;
L1749: (C209 in ( ( C207 | D171 ) " { R6 } ) or C209 in { R7 }) by L1748 , FUNCT_1:def 7;
thus L1750: thesis by L1749 , XBOOLE_0:def 3;
end;
L1751: { R7 } c= ( C207 " { R6 } )
proof
let R8 being set;
assume L1752: R8 in { R7 };
L1753: R8 = R7 by L1752 , TARSKI:def 1;
L1754: ( C207 . R7 ) in { R6 } by L1735 , TARSKI:def 1;
thus L1755: thesis by L1754 , L1736 , L1753 , FUNCT_1:def 7;
end;
L1756: ( { R7 } \/ ( ( C207 | D171 ) " { R6 } ) ) c= ( C207 " { R6 } ) by L1751 , L1737 , XBOOLE_1:8;
thus L1757: thesis by L1756 , L1743 , XBOOLE_0:def 10;
end;
theorem
L1758: (for R6 being set holds (for R7 being set holds (for B180 being Function holds (( B180 . R7 ) <> R6 implies ( ( B180 | ( ( dom B180 ) \ { R7 } ) ) " { R6 } ) = ( B180 " { R6 } )))))
proof
let R6 being set;
let R7 being set;
let C210 being Function;
set D172 = ( ( dom C210 ) \ { R7 } );
assume L1759: ( C210 . R7 ) <> R6;
L1760: ( C210 " { R6 } ) c= ( ( C210 | D172 ) " { R6 } )
proof
L1761: ( dom ( C210 | D172 ) ) = ( ( dom C210 ) /\ D172 ) by RELAT_1:61;
let C211 being set;
assume that
L1762: C211 in ( C210 " { R6 } );
L1763: ( C210 . C211 ) in { R6 } by L1762 , FUNCT_1:def 7;
L1764: ( C210 . C211 ) in { R6 } by L1762 , FUNCT_1:def 7;
L1765: ( C210 . C211 ) = R6 by L1764 , TARSKI:def 1;
L1766: (not C211 in { R7 }) by L1765 , L1759 , TARSKI:def 1;
L1767: C211 in ( dom C210 ) by L1762 , FUNCT_1:def 7;
L1768: C211 in D172 by L1767 , L1766 , XBOOLE_0:def 5;
L1769: C211 in ( dom ( C210 | D172 ) ) by L1768 , L1761 , XBOOLE_0:def 4;
L1770: ( C210 . C211 ) = ( ( C210 | D172 ) . C211 ) by L1769 , FUNCT_1:47;
thus L1771: thesis by L1770 , L1769 , L1763 , FUNCT_1:def 7;
end;
L1772: ( ( C210 | D172 ) " { R6 } ) c= ( C210 " { R6 } )
proof
let C212 being set;
assume that
L1773: C212 in ( ( C210 | D172 ) " { R6 } );
L1774: ( ( C210 | D172 ) . C212 ) in { R6 } by L1773 , FUNCT_1:def 7;
L1775: C212 in ( dom ( C210 | D172 ) ) by L1773 , FUNCT_1:def 7;
L1776: (( dom ( C210 | D172 ) ) = ( ( dom C210 ) /\ D172 ) & ( C210 . C212 ) = ( ( C210 | D172 ) . C212 )) by L1775 , FUNCT_1:47 , RELAT_1:61;
thus L1777: thesis by L1776 , L1775 , L1774 , FUNCT_1:def 7;
end;
thus L1778: thesis by L1772 , L1760 , XBOOLE_0:def 10;
end;
theorem
L1779: (for R30 being  complex-valued XFinSequence holds (for R33 being  complex number holds (( rng R30 ) c= { ( 0 ) , R33 } implies ( Sum R30 ) = ( R33 * ( card ( R30 " { R33 } ) ) ))))
proof
let R30 being  complex-valued XFinSequence;
let R33 being  complex number;
defpred S23[ Nat ] means (for R30 being  complex-valued XFinSequence holds (for R33 being  complex number holds ((( dom R30 ) = $1 & ( rng R30 ) c= { ( 0 ) , R33 }) implies ( Sum R30 ) = ( R33 * ( card ( R30 " { R33 } ) ) ))));
assume L1780: ( rng R30 ) c= { ( 0 ) , R33 };
L1781: (for R3 being Nat holds (S23[ R3 ] implies S23[ ( R3 + 1 ) ]))
proof
let R3 being Nat;
assume that
L1782: S23[ R3 ];
let C213 being  complex-valued XFinSequence;
let C214 being  complex number;
assume that
L1783: ( dom C213 ) = ( R3 + 1 )
and
L1784: ( rng C213 ) c= { ( 0 ) , C214 };
per cases ;
suppose L1785: C214 <> ( 0 );

L1786: ((not R3 in R3) & ( R3 \/ { R3 } ) = ( R3 + 1 )) by AFINSQ_1:2;
L1787: ( ( dom C213 ) \ { R3 } ) = R3 by L1786 , L1783 , ZFMISC_1:117;
L1788: R3 < ( R3 + 1 ) by NAT_1:13;
L1789: R3 in ( dom C213 ) by L1788 , L1783 , NAT_1:44;
L1790: ( C213 . R3 ) in ( rng C213 ) by L1789 , FUNCT_1:def 3;
per cases  by L1784 , L1790 , TARSKI:def 2;
suppose L1791: ( C213 . R3 ) = ( 0 );

L1792: ( C213 | ( R3 + 1 ) ) = C213 by L1783 , RELAT_1:69;
L1793: R3 < ( R3 + 1 ) by NAT_1:13;
L1794: R3 in ( dom C213 ) by L1793 , L1783 , NAT_1:44;
L1795: ( ( Sum ( C213 | R3 ) ) + ( 0 ) ) = ( Sum C213 ) by L1794 , L1791 , L1792 , L1730;
L1796: ( dom C213 ) = ( len C213 );
L1797: ( len ( C213 | R3 ) ) = R3 by L1796 , L1783 , L1793 , AFINSQ_1:54;
L1798: (( rng ( C213 | R3 ) ) c= ( rng C213 ) & ( ( C213 | R3 ) " { C214 } ) = ( C213 " { C214 } )) by L1785 , L1787 , L1791 , L1758;
thus L1799: thesis by L1798 , L1782 , L1784 , L1797 , L1795 , XBOOLE_1:1;
end;
suppose L1800: ( C213 . R3 ) = C214;

set D173 = ( ( C213 | R3 ) " { C214 } );
L1801: (not R3 in R3);
L1802: (not R3 in ( dom ( C213 | R3 ) )) by L1801;
L1803: (not R3 in D173) by L1802 , FUNCT_1:def 7;
L1804: R3 < ( R3 + 1 ) by NAT_1:13;
L1805: R3 in ( dom C213 ) by L1804 , L1783 , NAT_1:44;
L1806: ( dom C213 ) = ( len C213 );
L1807: (( rng ( C213 | R3 ) ) c= ( rng C213 ) & ( len ( C213 | R3 ) ) = R3) by L1806 , L1783 , L1804 , AFINSQ_1:54;
L1808: ( Sum ( C213 | R3 ) ) = ( C214 * ( card ( ( C213 | R3 ) " { C214 } ) ) ) by L1807 , L1782 , L1784 , XBOOLE_1:1;
L1809: ( C213 | ( R3 + 1 ) ) = C213 by L1783 , RELAT_1:69;
L1810: ( ( Sum ( C213 | R3 ) ) + C214 ) = ( Sum C213 ) by L1809 , L1800 , L1805 , L1730;
L1811: ( { R3 } \/ D173 ) = ( C213 " { C214 } ) by L1787 , L1800 , L1805 , L1734;
L1812: ( ( card D173 ) + 1 ) = ( card ( C213 " { C214 } ) ) by L1811 , L1803 , CARD_2:41;
thus L1813: thesis by L1812 , L1808 , L1810;
end;
end;
suppose L1815: C214 = ( 0 );

L1816: (for R6 being set holds (R6 in ( dom C213 ) implies ( C213 . R6 ) = ( 0 )))
proof
let R6 being set;
assume L1817: R6 in ( dom C213 );
L1818: ( C213 . R6 ) in ( rng C213 ) by L1817 , FUNCT_1:def 3;
thus L1819: thesis by L1818 , L1784 , L1815 , TARSKI:def 2;
end;
L1820: C213 = ( ( dom C213 ) --> ( 0 ) ) by L1816 , FUNCOP_1:11;
L1821: ( Sum C213 ) = ( ( len C213 ) * ( 0 ) ) by L1820 , L1675;
thus L1822: thesis by L1821 , L1815;
end;
end;
L1824: S23[ ( 0 ) ]
proof
let C215 being  complex-valued XFinSequence;
let C216 being  complex number;
assume that
L1825: ( dom C215 ) = ( 0 )
and
L1826: ( rng C215 ) c= { ( 0 ) , C216 };
L1827: (( C215 " { C216 } ) c= ( 0 ) & C215 = ( {} )) by L1825 , RELAT_1:132;
L1828: (( card ( C215 " { C216 } ) ) = ( 0 ) & ( Sum C215 ) = ( 0 )) by L1827;
thus L1829: thesis by L1828;
end;
L1830: (for R3 being Nat holds S23[ R3 ]) from NAT_1:sch 2(L1824 , L1781);
L1831: S23[ ( len R30 ) ] by L1830;
thus L1832: thesis by L1831 , L1780;
end;
theorem
L1833: (for R30 being  complex-valued XFinSequence holds ( Sum R30 ) = ( Sum ( Rev R30 ) ))
proof
let R30 being  complex-valued XFinSequence;
L1834: R30 is ( COMPLEX ) -valued by L1437;
reconsider D174 = R30 , D175 = ( Rev R30 ) as (XFinSequence of ( COMPLEX )) by L1834;
L1835: ( len D175 ) = ( len D174 ) by L150;
defpred S24[ set , set ] means (for R1 being Nat holds (R1 = $1 implies $2 = ( ( len D175 ) - ( 1 + R1 ) )));
L1836: ( card ( len D175 ) ) = ( card ( len D175 ) );
L1837: (for R6 being set holds (R6 in ( len D175 ) implies (ex R7 being set st (R7 in ( len D175 ) & S24[ R6 , R7 ]))))
proof
let R6 being set;
assume that
L1838: R6 in ( len D175 );
reconsider D176 = R6 as (Element of ( NAT )) by L38 , L1838;
L1839: D176 < ( len D175 ) by L1838 , NAT_1:44;
L1840: ( D176 + 1 ) <= ( len D175 ) by L1839 , NAT_1:13;
L1841: ( ( len D175 ) -' ( 1 + D176 ) ) = ( ( len D175 ) - ( 1 + D176 ) ) by L1840 , XREAL_1:233;
take ( ( len D175 ) -' ( 1 + D176 ) );
L1842: ( ( len D175 ) + ( 0 ) ) < ( ( len D175 ) + ( 1 + D176 ) ) by XREAL_1:8;
L1843: ( ( len D175 ) - ( 1 + D176 ) ) < ( ( ( len D175 ) + ( 1 + D176 ) ) - ( 1 + D176 ) ) by L1842 , XREAL_1:9;
thus L1844: thesis by L1843 , L1841 , NAT_1:44;
end;
consider C217 being (Function of ( len D175 ) , ( len D175 )) such that L1845: (for R6 being set holds (R6 in ( len D175 ) implies S24[ R6 , ( C217 . R6 ) ])) from FUNCT_2:sch 1(L1837);
L1846: (for B181 , B182 being set holds ((B181 in ( len D175 ) & B182 in ( len D175 ) & ( C217 . B181 ) = ( C217 . B182 )) implies B181 = B182))
proof
let C218 , C219 being set;
assume that
L1847: C218 in ( len D175 )
and
L1848: C219 in ( len D175 )
and
L1849: ( C217 . C218 ) = ( C217 . C219 );
reconsider D177 = C218 , D178 = C219 as (Element of ( NAT )) by L1847 , L1848 , L38;
L1850: ( C217 . C219 ) = ( ( len D175 ) - ( 1 + D178 ) ) by L1845 , L1848;
L1851: ( C217 . C218 ) = ( ( len D175 ) - ( 1 + D177 ) ) by L1845 , L1847;
thus L1852: thesis by L1851 , L1849 , L1850;
end;
L1853: C217 is  one-to-one by L1846 , FUNCT_2:56;
L1854: C217 is  one-to-one by L1846 , FUNCT_2:56;
L1855: C217 is  onto by L1854 , L1836 , L8;
reconsider D179 = C217 as (Permutation of ( dom D175 )) by L1855 , L1853;
L1856:
now
let R6 being set;
assume that
L1857: R6 in ( dom D175 );
reconsider D180 = R6 as (Element of ( NAT )) by L1857;
L1858: ( D179 . D180 ) = ( ( len D175 ) - ( 1 + D180 ) ) by L1845 , L1857;
thus L1859: ( D175 . R6 ) = ( D174 . ( D179 . R6 ) ) by L1858 , L1835 , L150 , L1857;
end;
L1860:
now
let R6 being set;
assume that
L1861: R6 in ( dom D175 );
L1862: R6 in ( dom D179 ) by L1861 , FUNCT_2:52;
L1863: ( D179 . R6 ) in ( rng D179 ) by L1862 , FUNCT_1:3;
thus L1864: (R6 in ( dom D179 ) & ( D179 . R6 ) in ( dom D174 )) by L1863 , L1835 , L1861 , FUNCT_2:52;
end;
L1865: (for R6 being set holds ((R6 in ( dom D179 ) & ( D179 . R6 ) in ( dom D174 )) implies R6 in ( dom D175 )));
L1866: D175 = ( D174 * D179 ) by L1865 , L1860 , L1856 , FUNCT_1:10;
thus L1867: thesis by L1866 , L1835 , L1309;
end;
theorem
L1868: (for B183 being Function holds (for B184 , B185 , B186 , B187 being XFinSequence holds ((( rng B184 ) c= ( dom B183 ) & ( rng B185 ) c= ( dom B183 ) & B186 = ( B183 * B184 ) & B187 = ( B183 * B185 )) implies ( B186 ^ B187 ) = ( B183 * ( B184 ^ B185 ) ))))
proof
let C220 being Function;
let C221 , C222 , C223 , C224 being XFinSequence;
assume that
L1869: (( rng C221 ) c= ( dom C220 ) & ( rng C222 ) c= ( dom C220 ) & C223 = ( C220 * C221 ) & C224 = ( C220 * C222 ));
set D181 = ( C221 ^ C222 );
L1870: ( rng D181 ) = ( ( rng C221 ) \/ ( rng C222 ) ) by AFINSQ_1:26;
L1871: ( dom ( C220 * D181 ) ) = ( dom D181 ) by L1870 , L1869 , RELAT_1:27 , XBOOLE_1:8;
reconsider D182 = ( C220 * D181 ) as XFinSequence by L1870 , L1869 , AFINSQ_1:10 , XBOOLE_1:8;
L1872: (( dom C223 ) = ( dom C221 ) & ( dom C224 ) = ( dom C222 )) by L1869 , RELAT_1:27;
L1873: (( dom D181 ) = ( ( len C221 ) + ( len C222 ) ) & ( dom ( C223 ^ C224 ) ) = ( ( len C223 ) + ( len C224 ) )) by AFINSQ_1:def 3;
L1874: ( len D182 ) = ( len ( C223 ^ C224 ) ) by L1870 , L1869 , L1872 , L1873 , RELAT_1:27 , XBOOLE_1:8;
L1875: (for R3 being Nat holds (R3 < ( len D182 ) implies ( ( C223 ^ C224 ) . R3 ) = ( D182 . R3 )))
proof
let R3 being Nat;
assume L1876: R3 < ( len D182 );
L1877: R3 in ( dom D182 ) by L1876 , NAT_1:44;
per cases ;
suppose L1878: R3 < ( len C221 );

L1879: R3 in ( dom C221 ) by L1878 , NAT_1:44;
L1880: (( D181 . R3 ) = ( C221 . R3 ) & ( C223 . R3 ) = ( C220 . ( C221 . R3 ) ) & ( ( C223 ^ C224 ) . R3 ) = ( C223 . R3 )) by L1879 , L1869 , L1872 , AFINSQ_1:def 3 , FUNCT_1:13;
thus L1881: thesis by L1880 , L1877 , FUNCT_1:12;
end;
suppose L1882: R3 >= ( len C221 );

reconsider D183 = ( R3 - ( len C221 ) ) as (Element of ( NAT )) by L1882 , NAT_1:21;
L1883: ( ( len C221 ) + D183 ) < ( ( len C221 ) + ( len C222 ) ) by L1873 , L1870 , L1869 , L1876 , RELAT_1:27 , XBOOLE_1:8;
L1884: D183 < ( len C222 ) by L1883 , XREAL_1:7;
L1885: D183 in ( dom C222 ) by L1884 , NAT_1:44;
L1886: (( D181 . R3 ) = ( C222 . D183 ) & ( ( C223 ^ C224 ) . R3 ) = ( C224 . D183 ) & ( C224 . D183 ) = ( C220 . ( C222 . D183 ) )) by L1885 , L1876 , L1869 , L1871 , L1872 , L1873 , L1882 , AFINSQ_1:18 , FUNCT_1:13;
thus L1887: thesis by L1886 , L1877 , FUNCT_1:12;
end;
end;
thus L1889: thesis by L1875 , L1874 , AFINSQ_1:9;
end;
theorem
L1890: (for R30 being  complex-valued XFinSequence holds (for B188 , B189 being  finite  natural-membered set holds (B188 <N< B189 implies ( Sum ( SubXFinS (R30 , ( B188 \/ B189 )) ) ) = ( ( Sum ( SubXFinS (R30 , B188) ) ) + ( Sum ( SubXFinS (R30 , B189) ) ) ))))
proof
let R30 being  complex-valued XFinSequence;
let C225 , C226 being  finite  natural-membered set;
assume that
L1891: C225 <N< C226;
set D184 = ( C225 \/ C226 );
set D185 = ( D184 /\ ( len R30 ) );
set D186 = ( C225 /\ ( len R30 ) );
set D187 = ( C226 /\ ( len R30 ) );
L1892: ( D186 \/ D187 ) = D185 by XBOOLE_1:23;
L1893: D186 <N< D187 by L1891 , L646;
L1894: ( Sgm0 D185 ) = ( ( Sgm0 D186 ) ^ ( Sgm0 D187 ) ) by L1893 , L943 , L1892;
L1895: (( rng ( Sgm0 D186 ) ) = D186 & ( rng ( Sgm0 D187 ) ) = D187) by L375;
L1896: (( rng ( Sgm0 D186 ) ) c= ( dom R30 ) & ( rng ( Sgm0 D187 ) ) c= ( dom R30 )) by L1895 , XBOOLE_1:17;
L1897: ( ( SubXFinS (R30 , C225) ) ^ ( SubXFinS (R30 , C226) ) ) = ( SubXFinS (R30 , D184) ) by L1896 , L1894 , L1868;
thus L1898: thesis by L1897 , L1531;
end;
theorem
L1899: (for R18 being non  empty set holds (for R21 being (BinOp of R18) holds (R21 is  having_a_unity implies ( R21 "**" ( <%> R18 ) ) = ( the_unity_wrt R21 ))))
proof
let R18 being non  empty set;
let R21 being (BinOp of R18);
L1900: ( len ( <%> R18 ) ) = ( 0 );
assume L1901: R21 is  having_a_unity;
thus L1902: thesis by L1901 , L1900 , L1022;
end;
definition
let C227 being set;
let C228 being (XFinSequence of ( C227 ^omega ));
func FlattenSeq C228 -> (Element of ( C227 ^omega )) means 
:L1903: (ex B190 being (BinOp of ( C227 ^omega )) st ((for B191 , B192 being (Element of ( C227 ^omega )) holds ( B190 . (B191 , B192) ) = ( B191 ^ B192 )) & it = ( B190 "**" C228 )));
existence
proof
deffunc H7((Element of ( C227 ^omega )) , (Element of ( C227 ^omega ))) = ( $1 ^ $2 );
consider C229 being (BinOp of ( C227 ^omega )) such that L1904: (for B193 , B194 being (Element of ( C227 ^omega )) holds ( C229 . (B193 , B194) ) = H7(B193 , B194)) from BINOP_1:sch 4;
take ( C229 "**" C228 );
take C229;
thus L1905: thesis by L1904;
end;
uniqueness
proof
let C230 , C231 being (Element of ( C227 ^omega ));
given C232 being (BinOp of ( C227 ^omega )) such that
L1906: (for B195 , B196 being (Element of ( C227 ^omega )) holds ( C232 . (B195 , B196) ) = ( B195 ^ B196 ))
and
L1907: C230 = ( C232 "**" C228 );

given C233 being (BinOp of ( C227 ^omega )) such that
L1908: (for B197 , B198 being (Element of ( C227 ^omega )) holds ( C233 . (B197 , B198) ) = ( B197 ^ B198 ))
and
L1909: C231 = ( C233 "**" C228 );

L1910:
now
let C234 , C235 being (Element of ( C227 ^omega ));
thus L1911: ( C232 . (C234 , C235) ) = ( C234 ^ C235 ) by L1906
.= ( C233 . (C234 , C235) ) by L1908;
end;
thus L1912: thesis by L1910 , L1907 , L1909 , BINOP_1:2;
end;
end;
theorem
L1914: (for B199 being set holds (for B200 being (Element of ( B199 ^omega )) holds ( FlattenSeq <% B200 %> ) = B200))
proof
let C236 being set;
let C237 being (Element of ( C236 ^omega ));
L1915: (ex B201 being (BinOp of ( C236 ^omega )) st ((for B202 , B203 being (Element of ( C236 ^omega )) holds ( B201 . (B202 , B203) ) = ( B202 ^ B203 )) & ( FlattenSeq <% C237 %> ) = ( B201 "**" <% C237 %> ))) by L1903;
thus L1916: thesis by L1915 , L1099;
end;
theorem
L1917: (for B204 being set holds ( FlattenSeq ( <%> ( B204 ^omega ) ) ) = ( <%> B204 ))
proof
let C238 being set;
consider C239 being (BinOp of ( C238 ^omega )) such that L1918: (for B205 , B206 being (Element of ( C238 ^omega )) holds ( C239 . (B205 , B206) ) = ( B205 ^ B206 )) and L1919: ( FlattenSeq ( <%> ( C238 ^omega ) ) ) = ( C239 "**" ( <%> ( C238 ^omega ) ) ) by L1903;
L1920: ( {} ) is (Element of ( C238 ^omega )) by AFINSQ_1:43;
reconsider D188 = ( {} ) as (Element of ( C238 ^omega )) by AFINSQ_1:43;
L1921:
now
let C240 being (Element of ( C238 ^omega ));
thus L1922: ( C239 . (( {} ) , C240) ) = ( ( {} ) ^ C240 ) by L1918 , L1920
.= C240;
thus L1923: ( C239 . (C240 , ( {} )) ) = ( C240 ^ ( {} ) ) by L1918 , L1920
.= C240;
end;
L1924: D188 is_a_unity_wrt C239 by L1921 , BINOP_1:3;
L1925: C239 is  having_a_unity by L1924 , SETWISEO:def 2;
L1926: ( C239 "**" ( <%> ( C238 ^omega ) ) ) = ( the_unity_wrt C239 ) by L1925 , L1899;
thus L1927: thesis by L1926 , L1919 , L1924 , BINOP_1:def 8;
end;
theorem
L1928: (for B207 being set holds (for B208 , B209 being (XFinSequence of ( B207 ^omega )) holds ( FlattenSeq ( B208 ^ B209 ) ) = ( ( FlattenSeq B208 ) ^ ( FlattenSeq B209 ) )))
proof
let C241 being set;
let C242 , C243 being (XFinSequence of ( C241 ^omega ));
consider C244 being (BinOp of ( C241 ^omega )) such that L1929: (for B210 , B211 being (Element of ( C241 ^omega )) holds ( C244 . (B210 , B211) ) = ( B210 ^ B211 )) and L1930: ( FlattenSeq ( C242 ^ C243 ) ) = ( C244 "**" ( C242 ^ C243 ) ) by L1903;
L1931:
now
let C245 , C246 , C247 being (Element of ( C241 ^omega ));
thus L1932: ( C244 . (C245 , ( C244 . (C246 , C247) )) ) = ( C245 ^ ( C244 . (C246 , C247) ) ) by L1929
.= ( C245 ^ ( C246 ^ C247 ) ) by L1929
.= ( ( C245 ^ C246 ) ^ C247 ) by AFINSQ_1:27
.= ( ( C244 . (C245 , C246) ) ^ C247 ) by L1929
.= ( C244 . (( C244 . (C245 , C246) ) , C247) ) by L1929;
end;
L1933: C244 is  associative by L1931 , BINOP_1:def 3;
L1934: ( {} ) is (Element of ( C241 ^omega )) by AFINSQ_1:43;
reconsider D189 = ( {} ) as (Element of ( C241 ^omega )) by AFINSQ_1:43;
L1935:
now
let C248 being (Element of ( C241 ^omega ));
thus L1936: ( C244 . (( {} ) , C248) ) = ( ( {} ) ^ C248 ) by L1929 , L1934
.= C248;
thus L1937: ( C244 . (C248 , ( {} )) ) = ( C248 ^ ( {} ) ) by L1929 , L1934
.= C248;
end;
L1938: D189 is_a_unity_wrt C244 by L1935 , BINOP_1:3;
L1939: (C244 is  having_a_unity or (( len C242 ) >= 1 & ( len C243 ) >= 1)) by L1938 , SETWISEO:def 2;
thus L1940: ( FlattenSeq ( C242 ^ C243 ) ) = ( C244 . (( C244 "**" C242 ) , ( C244 "**" C243 )) ) by L1939 , L1930 , L1933 , L1158
.= ( ( C244 "**" C242 ) ^ ( C244 "**" C243 ) ) by L1929
.= ( ( FlattenSeq C242 ) ^ ( C244 "**" C243 ) ) by L1929 , L1903
.= ( ( FlattenSeq C242 ) ^ ( FlattenSeq C243 ) ) by L1929 , L1903;
end;
theorem
L1941: (for B212 being set holds (for B213 , B214 being (Element of ( B212 ^omega )) holds ( FlattenSeq <% B213 , B214 %> ) = ( B213 ^ B214 )))
proof
let C249 being set;
let C250 , C251 being (Element of ( C249 ^omega ));
consider C252 being (BinOp of ( C249 ^omega )) such that L1942: (for B215 , B216 being (Element of ( C249 ^omega )) holds ( C252 . (B215 , B216) ) = ( B215 ^ B216 )) and L1943: ( FlattenSeq <% C250 , C251 %> ) = ( C252 "**" <% C250 , C251 %> ) by L1903;
thus L1944: ( FlattenSeq <% C250 , C251 %> ) = ( C252 . (C250 , C251) ) by L1943 , L1103
.= ( C250 ^ C251 ) by L1942;
end;
theorem
L1945: (for B217 being set holds (for B218 , B219 , B220 being (Element of ( B217 ^omega )) holds ( FlattenSeq <% B218 , B219 , B220 %> ) = ( ( B218 ^ B219 ) ^ B220 )))
proof
let C253 being set;
let C254 , C255 , C256 being (Element of ( C253 ^omega ));
consider C257 being (BinOp of ( C253 ^omega )) such that L1946: (for B221 , B222 being (Element of ( C253 ^omega )) holds ( C257 . (B221 , B222) ) = ( B221 ^ B222 )) and L1947: ( FlattenSeq <% C254 , C255 , C256 %> ) = ( C257 "**" <% C254 , C255 , C256 %> ) by L1903;
thus L1948: ( FlattenSeq <% C254 , C255 , C256 %> ) = ( C257 . (( C257 . (C254 , C255) ) , C256) ) by L1947 , L1111
.= ( ( C257 . (C254 , C255) ) ^ C256 ) by L1946
.= ( ( C254 ^ C255 ) ^ C256 ) by L1946;
end;
theorem
L1949: (for R14 being XFinSequence holds (for R15 being XFinSequence holds (R14 c= R15 implies ( R14 ^ ( R15 /^ ( len R14 ) ) ) = R15)))
proof
let R14 being XFinSequence;
let R15 being XFinSequence;
assume L1950: R14 c= R15;
L1951: ( ( len R14 ) + ( len ( R15 /^ ( len R14 ) ) ) ) = ( ( len R14 ) + ( ( len R15 ) -' ( len R14 ) ) ) by L190
.= ( ( ( len R15 ) + ( len R14 ) ) -' ( len R14 ) ) by L1950 , NAT_1:43 , NAT_D:38
.= ( dom R15 ) by NAT_D:34;
L1952: (for R3 being Nat holds (R3 in ( dom R14 ) implies ( R15 . R3 ) = ( R14 . R3 ))) by L1950 , GRFUNC_1:2;
L1953: (for R3 being Nat holds (R3 in ( dom ( R15 /^ ( len R14 ) ) ) implies ( R15 . ( ( len R14 ) + R3 ) ) = ( ( R15 /^ ( len R14 ) ) . R3 ))) by L190;
thus L1954: ( R14 ^ ( R15 /^ ( len R14 ) ) ) = R15 by L1953 , L1951 , L1952 , AFINSQ_1:def 3;
end;
theorem
L1955: (for R14 being XFinSequence holds (for R15 being XFinSequence holds (R14 c= R15 implies (ex R36 being XFinSequence st ( R14 ^ R36 ) = R15))))
proof
let R14 being XFinSequence;
let R15 being XFinSequence;
assume L1956: R14 c= R15;
take D190 = ( R15 /^ ( len R14 ) );
thus L1957: ( R14 ^ D190 ) = R15 by L1956 , L1949;
end;
theorem
L1958: (for R18 being non  empty set holds (for B223 , B224 being (XFinSequence of R18) holds (B223 c= B224 implies (ex B225 being (XFinSequence of R18) st ( B223 ^ B225 ) = B224))))
proof
let R18 being non  empty set;
let C258 , C259 being (XFinSequence of R18);
assume L1959: C258 c= C259;
consider R36 being XFinSequence such that L1960: ( C258 ^ R36 ) = C259 by L1959 , L1955;
reconsider D191 = R36 as (XFinSequence of R18) by L1960 , AFINSQ_1:31;
take D191;
thus L1961: thesis by L1960;
end;
theorem
L1962: (for R14 being XFinSequence holds (for R15 being XFinSequence holds (for R36 being XFinSequence holds (R15 c= R36 implies ( R14 ^ R15 ) c= ( R14 ^ R36 )))))
proof
let R14 being XFinSequence;
let R15 being XFinSequence;
let R36 being XFinSequence;
assume L1963: R15 c= R36;
consider R37 being XFinSequence such that L1964: ( R15 ^ R37 ) = R36 by L1963 , L1955;
L1965: ( R14 ^ R15 ) c= ( ( R14 ^ R15 ) ^ R37 ) by AFINSQ_1:74;
thus L1966: thesis by L1965 , L1964 , AFINSQ_1:27;
end;
theorem
L1967: (for B226 being set holds (for B227 , B228 being (XFinSequence of ( B226 ^omega )) holds (B227 c= B228 implies ( FlattenSeq B227 ) c= ( FlattenSeq B228 ))))
proof
let C260 being set;
let C261 , C262 being (XFinSequence of ( C260 ^omega ));
assume L1968: C261 c= C262;
consider C263 being (XFinSequence of ( C260 ^omega )) such that L1969: ( C261 ^ C263 ) = C262 by L1968 , L1958;
L1970: ( ( FlattenSeq C261 ) ^ ( FlattenSeq C263 ) ) = ( FlattenSeq C262 ) by L1969 , L1928;
thus L1971: thesis by L1970 , AFINSQ_1:74;
end;
registration
let R14 being XFinSequence;
let C264 being non  empty XFinSequence;
cluster ( R14 ^ C264 ) -> non  empty;
coherence by AFINSQ_1:30;
cluster ( C264 ^ R14 ) -> non  empty;
coherence by AFINSQ_1:30;
end;
theorem
L1973: (for R6 being set holds (for R14 being XFinSequence holds ( CutLastLoc ( R14 ^ <% R6 %> ) ) = R14))
proof
let R6 being set;
let R14 being XFinSequence;
set D192 = ( CutLastLoc ( R14 ^ <% R6 %> ) );
L1974: ( ( len ( R14 ^ <% R6 %> ) ) -' 1 ) = ( ( ( len R14 ) + 1 ) -' 1 ) by AFINSQ_1:75
.= ( len R14 ) by NAT_D:34;
L1975: ( dom ( R14 ^ <% R6 %> ) ) = ( len ( R14 ^ <% R6 %> ) )
.= ( ( len R14 ) + 1 ) by AFINSQ_1:75
.= ( ( dom R14 ) \/ { ( len R14 ) } ) by AFINSQ_1:2;
L1976: (not ( len R14 ) in ( dom R14 ));
L1977: ( LastLoc ( R14 ^ <% R6 %> ) ) = ( ( len ( R14 ^ <% R6 %> ) ) -' 1 ) by AFINSQ_1:70;
thus L1978: ( dom D192 ) = ( ( dom ( R14 ^ <% R6 %> ) ) \ { ( len R14 ) } ) by L1977 , L1974 , VALUED_1:36
.= ( dom R14 ) by L1975 , L1976 , ZFMISC_1:117;
let R7 being set;
assume L1979: R7 in ( dom D192 );
L1980: R14 c= ( R14 ^ <% R6 %> ) by AFINSQ_1:74;
thus L1981: ( D192 . R7 ) = ( ( R14 ^ <% R6 %> ) . R7 ) by L1979 , GRFUNC_1:2
.= ( R14 . R7 ) by L1979 , L1978 , L1980 , GRFUNC_1:2;
end;
