:: On the Group of Automorphisms of Universal Algebra & Many
:: Sorted Algebra
::  by Artur Korni{\l}owicz
::
:: Received December 13, 1994
:: Copyright (c) 1994-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies UNIALG_1, FUNCT_1, RELAT_1, STRUCT_0, MSUALG_3, FUNCT_2,
      SUBSET_1, XBOOLE_0, TARSKI, BINOP_1, GROUP_1, ALGSTR_0, PBOOLE, PZFMISC1,
      FUNCOP_1, MEMBER_1, MSUALG_1, CARD_3, CARD_1, MSUHOM_1, CQC_SIM1,
      GROUP_6, ZFMISC_1, WELLORD1, AUTALG_1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, RELAT_1, FUNCT_1, PBOOLE,
      PARTFUN1, FUNCT_2, NUMBERS, FUNCOP_1, STRUCT_0, ALGSTR_0, FINSEQ_1,
      BINOP_1, GROUP_1, GROUP_6, CARD_3, PZFMISC1, UNIALG_1, UNIALG_2, ALG_1,
      MSUALG_1, MSUALG_3, MSUHOM_1;
 constructors BINOP_1, CARD_3, PZFMISC1, GROUP_6, ALG_1, MSUALG_3, MSUHOM_1,
      RELSET_1;
 registrations XBOOLE_0, FUNCT_1, ORDINAL1, RELSET_1, FUNCT_2, FUNCOP_1,
      PBOOLE, STRUCT_0, MSUALG_1, SUBSET_1;
 requirements BOOLE, SUBSET;
 definitions FUNCT_1, ALG_1, GROUP_1, GROUP_6, MSUALG_3, TARSKI, XBOOLE_0,
      PZFMISC1, FUNCOP_1, ALGSTR_0, FUNCT_2;
 theorems ALG_1, BINOP_1, CARD_3, FUNCOP_1, FUNCT_1, FUNCT_2, GROUP_1, GROUP_6,
      MSUALG_1, MSUALG_3, MSUHOM_1, PBOOLE, TARSKI, ZFMISC_1, RELAT_1,
      RELSET_1, XBOOLE_0, PZFMISC1, PARTFUN1;
 schemes BINOP_1, FUNCT_1, XBOOLE_0;

begin
theorem
L1: (for R1 being Universal_Algebra holds ( id (the carrier of R1) ) is_isomorphism R1 , R1)
proof
let R1 being Universal_Algebra;
set D1 = ( id (the carrier of R1) );
L2: D1 is_homomorphism R1 , R1 by ALG_1:5;
thus L3: D1 is_monomorphism R1 , R1 by L2 , ALG_1:def 2;
L4: (D1 is_homomorphism R1 , R1 & ( rng D1 ) = (the carrier of R1)) by ALG_1:5 , RELAT_1:45;
thus L5: D1 is_epimorphism R1 , R1 by L4 , ALG_1:def 3;
end;
definition
let R1 being Universal_Algebra;
func UAAut R1 -> (FUNCTION_DOMAIN of (the carrier of R1) , (the carrier of R1)) means 
:L6: (for B1 being (Function of R1 , R1) holds (B1 in it iff B1 is_isomorphism R1 , R1));
existence
proof
set D2 = { B2 where B2 is (Element of ( Funcs ((the carrier of R1) , (the carrier of R1)) )) : B2 is_isomorphism R1 , R1 };
L7: ( id (the carrier of R1) ) in D2
proof
set D3 = ( id (the carrier of R1) );
L8: (D3 in ( Funcs ((the carrier of R1) , (the carrier of R1)) ) & D3 is_isomorphism R1 , R1) by L1 , FUNCT_2:8;
thus L9: thesis by L8;
end;
reconsider D4 = D2 as set;
L10: D4 is  functional
proof
let C1 being set;
assume L11: C1 in D4;
L12: (ex B3 being (Element of ( Funcs ((the carrier of R1) , (the carrier of R1)) )) st (C1 = B3 & B3 is_isomorphism R1 , R1)) by L11;
thus L13: thesis by L12;
end;
reconsider D5 = D4 as  functional non  empty set by L10 , L7;
L14: D5 is (FUNCTION_DOMAIN of (the carrier of R1) , (the carrier of R1))
proof
let C2 being (Element of D5);
L15: C2 in D5;
L16: (ex B4 being (Element of ( Funcs ((the carrier of R1) , (the carrier of R1)) )) st (C2 = B4 & B4 is_isomorphism R1 , R1)) by L15;
thus L17: thesis by L16;
end;
reconsider D6 = D5 as (FUNCTION_DOMAIN of (the carrier of R1) , (the carrier of R1)) by L14;
take D6;
let C3 being (Function of R1 , R1);
thus L18: (C3 in D6 implies C3 is_isomorphism R1 , R1)
proof
assume L19: C3 in D6;
L20: (ex B5 being (Element of ( Funcs ((the carrier of R1) , (the carrier of R1)) )) st (B5 = C3 & B5 is_isomorphism R1 , R1)) by L19;
thus L21: thesis by L20;
end;

L22: C3 is (Element of ( Funcs ((the carrier of R1) , (the carrier of R1)) )) by FUNCT_2:8;
assume L23: C3 is_isomorphism R1 , R1;
thus L24: thesis by L23 , L22;
end;
uniqueness
proof
let C4 , C5 being (FUNCTION_DOMAIN of (the carrier of R1) , (the carrier of R1));
assume that
L25: (for B6 being (Function of R1 , R1) holds (B6 in C4 iff B6 is_isomorphism R1 , R1))
and
L26: (for B7 being (Function of R1 , R1) holds (B7 in C5 iff B7 is_isomorphism R1 , R1));
L27: C5 c= C4
proof
let C6 being set;
assume L28: C6 in C5;
reconsider D7 = C6 as (Function of R1 , R1) by L28 , FUNCT_2:def 12;
L29: D7 is_isomorphism R1 , R1 by L26 , L28;
thus L30: thesis by L29 , L25;
end;
L31: C4 c= C5
proof
let C7 being set;
assume L32: C7 in C4;
reconsider D8 = C7 as (Function of R1 , R1) by L32 , FUNCT_2:def 12;
L33: D8 is_isomorphism R1 , R1 by L25 , L32;
thus L34: thesis by L33 , L26;
end;
thus L35: thesis by L31 , L27 , XBOOLE_0:def 10;
end;
end;
theorem
L37: (for R1 being Universal_Algebra holds ( UAAut R1 ) c= ( Funcs ((the carrier of R1) , (the carrier of R1)) ))
proof
let R1 being Universal_Algebra;
let C8 being set;
assume L38: C8 in ( UAAut R1 );
L39: (ex B8 being (Element of ( UAAut R1 )) st B8 = C8) by L38;
thus L40: thesis by L39 , FUNCT_2:9;
end;
theorem
L41: (for R1 being Universal_Algebra holds ( id (the carrier of R1) ) in ( UAAut R1 ))
proof
let R1 being Universal_Algebra;
L42: ( id (the carrier of R1) ) is_isomorphism R1 , R1 by L1;
thus L43: thesis by L42 , L6;
end;
theorem
L44: (for R1 being Universal_Algebra holds (for R2 being (Function of R1 , R1) holds (for R3 being (Function of R1 , R1) holds ((R2 is (Element of ( UAAut R1 )) & R3 = ( R2 " )) implies R3 is_isomorphism R1 , R1))))
proof
let R1 being Universal_Algebra;
let R2 being (Function of R1 , R1);
let R3 being (Function of R1 , R1);
assume that
L45: R2 is (Element of ( UAAut R1 ))
and
L46: R3 = ( R2 " );
L47: R2 is_isomorphism R1 , R1 by L45 , L6;
thus L48: thesis by L47 , L46 , ALG_1:10;
end;
L49: (for R1 being Universal_Algebra holds (for R2 being (Function of R1 , R1) holds (R2 is_isomorphism R1 , R1 implies ( R2 " ) is (Function of R1 , R1))))
proof
let R1 being Universal_Algebra;
let R2 being (Function of R1 , R1);
assume L50: R2 is_isomorphism R1 , R1;
L51: R2 is_epimorphism R1 , R1 by L50 , ALG_1:def 4;
L52: ( rng R2 ) = (the carrier of R1) by L51 , ALG_1:def 3;
L53: R2 is  one-to-one by L50 , ALG_1:7;
thus L54: thesis by L53 , L52 , FUNCT_2:25;
end;
theorem
L55: (for R1 being Universal_Algebra holds (for B9 being (Element of ( UAAut R1 )) holds ( B9 " ) in ( UAAut R1 )))
proof
let R1 being Universal_Algebra;
let C9 being (Element of ( UAAut R1 ));
L56: C9 is_isomorphism R1 , R1 by L6;
L57: ( C9 " ) is (Function of R1 , R1) by L56 , L49;
consider C10 being (Function of R1 , R1) such that L58: C10 = ( C9 " ) by L57;
L59: C10 is_isomorphism R1 , R1 by L56 , L58 , ALG_1:10;
thus L60: thesis by L59 , L58 , L6;
end;
theorem
L61: (for R1 being Universal_Algebra holds (for B10 , B11 being (Element of ( UAAut R1 )) holds ( B10 * B11 ) in ( UAAut R1 )))
proof
let R1 being Universal_Algebra;
let C11 , C12 being (Element of ( UAAut R1 ));
L62: (C11 is_isomorphism R1 , R1 & C12 is_isomorphism R1 , R1) by L6;
L63: ( C11 * C12 ) is_isomorphism R1 , R1 by L62 , ALG_1:11;
thus L64: thesis by L63 , L6;
end;
definition
let R1 being Universal_Algebra;
func UAAutComp R1 -> (BinOp of ( UAAut R1 )) means 
:L65: (for B12 , B13 being (Element of ( UAAut R1 )) holds ( it . (B12 , B13) ) = ( B13 * B12 ));
existence
proof
defpred S1[ (Element of ( UAAut R1 )) , (Element of ( UAAut R1 )) , set ] means $3 = ( $2 * $1 );
L66: (for B14 , B15 being (Element of ( UAAut R1 )) holds (ex B16 being (Element of ( UAAut R1 )) st S1[ B14 , B15 , B16 ]))
proof
let C13 , C14 being (Element of ( UAAut R1 ));
reconsider D9 = C13 , D10 = C14 as (Function of R1 , R1);
reconsider D11 = ( D10 * D9 ) as (Element of ( UAAut R1 )) by L61;
take D11;
thus L67: thesis;
end;
thus L68: (ex B17 being (BinOp of ( UAAut R1 )) st (for B18 , B19 being (Element of ( UAAut R1 )) holds S1[ B18 , B19 , ( B17 . (B18 , B19) ) ])) from BINOP_1:sch 3(L66);
end;
uniqueness
proof
let C15 , C16 being (BinOp of ( UAAut R1 ));
assume that
L69: (for B20 , B21 being (Element of ( UAAut R1 )) holds ( C15 . (B20 , B21) ) = ( B21 * B20 ))
and
L70: (for B22 , B23 being (Element of ( UAAut R1 )) holds ( C16 . (B22 , B23) ) = ( B23 * B22 ));
L71: (for B24 , B25 being (Element of ( UAAut R1 )) holds ( C15 . (B24 , B25) ) = ( C16 . (B24 , B25) ))
proof
let C17 , C18 being (Element of ( UAAut R1 ));
thus L72: ( C15 . (C17 , C18) ) = ( C18 * C17 ) by L69
.= ( C16 . (C17 , C18) ) by L70;
end;
thus L73: thesis by L71 , BINOP_1:2;
end;
end;
definition
let R1 being Universal_Algebra;
func UAAutGroup R1 -> Group equals 
multMagma (# ( UAAut R1 ) , ( UAAutComp R1 ) #);
coherence
proof
set D12 = multMagma (# ( UAAut R1 ) , ( UAAutComp R1 ) #);
L75: (ex B26 being (Element of D12) st (for B27 being (Element of D12) holds (( B27 * B26 ) = B27 & ( B26 * B27 ) = B27 & (ex B28 being (Element of D12) st (( B27 * B28 ) = B26 & ( B28 * B27 ) = B26)))))
proof
reconsider D13 = ( id (the carrier of R1) ) as (Element of D12) by L41;
take D13;
let C19 being (Element of D12);
consider C20 being (Element of ( UAAut R1 )) such that L76: C20 = C19;
L77: ( C19 * D13 ) = ( ( id (the carrier of R1) ) * C20 ) by L76 , L65
.= C20 by FUNCT_2:17;
thus L78: ( C19 * D13 ) = C19 by L77 , L76;
L79: ( D13 * C19 ) = ( C20 * ( id (the carrier of R1) ) ) by L76 , L65
.= C20 by FUNCT_2:17;
thus L80: ( D13 * C19 ) = C19 by L79 , L76;
reconsider D14 = ( C20 " ) as (Element of D12) by L55;
take D14;
L81: C20 is_isomorphism R1 , R1 by L6;
L82: C20 is  one-to-one by L81 , ALG_1:7;
L83: C20 is_epimorphism R1 , R1 by L81 , ALG_1:def 4;
L84: ( rng C20 ) = (the carrier of R1) by L83 , ALG_1:def 3;
thus L85: ( C19 * D14 ) = ( ( C20 " ) * C20 ) by L76 , L65
.= D13 by L82 , L84 , FUNCT_2:29;
thus L86: ( D14 * C19 ) = ( C20 * ( C20 " ) ) by L76 , L65
.= D13 by L82 , L84 , FUNCT_2:29;
end;
L87: (for B29 , B30 , B31 being (Element of D12) holds ( ( B29 * B30 ) * B31 ) = ( B29 * ( B30 * B31 ) ))
proof
let C21 , C22 , C23 being (Element of D12);
reconsider D15 = C21 , D16 = C22 , D17 = C23 as (Element of ( UAAut R1 ));
L88: ( C22 * C23 ) = ( D17 * D16 ) by L65;
L89: ( C21 * C22 ) = ( D16 * D15 ) by L65;
thus L90: ( ( C21 * C22 ) * C23 ) = ( D17 * ( D16 * D15 ) ) by L89 , L65
.= ( ( D17 * D16 ) * D15 ) by RELAT_1:36
.= ( C21 * ( C22 * C23 ) ) by L88 , L65;
end;
thus L91: thesis by L87 , L75 , GROUP_1:def 2 , GROUP_1:def 3;
end;
end;
registration
let R1 being Universal_Algebra;
cluster ( UAAutGroup R1 ) ->  strict;
coherence;
end;
L94: (for R1 being Universal_Algebra holds (for B32 being (Element of ( UAAut R1 )) holds (( dom B32 ) = ( rng B32 ) & ( dom B32 ) = (the carrier of R1))))
proof
let R1 being Universal_Algebra;
let C24 being (Element of ( UAAut R1 ));
L95: C24 is_isomorphism R1 , R1 by L6;
L96: ( dom C24 ) = (the carrier of R1) by L95 , ALG_1:8;
thus L97: thesis by L96 , L95 , ALG_1:8;
end;
theorem
L98: (for R1 being Universal_Algebra holds (for B33 , B34 being (Element of ( UAAutGroup R1 )) holds (for B35 , B36 being (Element of ( UAAut R1 )) holds ((B33 = B35 & B34 = B36) implies ( B33 * B34 ) = ( B36 * B35 ))))) by L65;
theorem
L99: (for R1 being Universal_Algebra holds ( id (the carrier of R1) ) = ( 1_ ( UAAutGroup R1 ) ))
proof
let R1 being Universal_Algebra;
set D18 = the (Element of ( UAAutGroup R1 ));
reconsider D19 = ( id (the carrier of R1) ) as (Element of ( UAAutGroup R1 )) by L41;
consider C25 being (Function of (the carrier of R1) , (the carrier of R1)) such that L100: C25 = D19;
L101: D18 is (Element of ( UAAut R1 ));
consider C26 being (Function of (the carrier of R1) , (the carrier of R1)) such that L102: C26 = D18 by L101;
L103: ( D19 * D18 ) = ( C26 * C25 ) by L100 , L102 , L65
.= D18 by L100 , L102 , FUNCT_2:17;
thus L104: thesis by L103 , GROUP_1:7;
end;
theorem
L105: (for R1 being Universal_Algebra holds (for B37 being (Element of ( UAAut R1 )) holds (for B38 being (Element of ( UAAutGroup R1 )) holds (B37 = B38 implies ( B37 " ) = ( B38 " )))))
proof
let R1 being Universal_Algebra;
let C27 being (Element of ( UAAut R1 ));
let C28 being (Element of ( UAAutGroup R1 ));
consider C29 being (Element of ( UAAut R1 )) such that L106: C29 = ( C28 " );
assume L107: C27 = C28;
L108: ( C29 * C27 ) = ( C28 * ( C28 " ) ) by L107 , L106 , L65;
L109: ( C29 * C27 ) = ( 1_ ( UAAutGroup R1 ) ) by L108 , GROUP_1:def 5;
L110: ( C29 * C27 ) = ( id (the carrier of R1) ) by L109 , L99;
L111: C27 is_isomorphism R1 , R1 by L6;
L112: C27 is_monomorphism R1 , R1 by L111 , ALG_1:def 4;
L113: C27 is  one-to-one by L112 , ALG_1:def 2;
L114: ( rng C27 ) = ( dom C27 ) by L94
.= (the carrier of R1) by L94;
thus L115: thesis by L114 , L106 , L113 , L110 , FUNCT_2:30;
end;
begin
theorem
L116: (for R4 being set holds (for R5 being (ManySortedSet of R4) holds (for R6 being (ManySortedSet of R4) holds (for R7 being (ManySortedSet of R4) holds ((R5 is_transformable_to R6 & R6 is_transformable_to R7) implies R5 is_transformable_to R7)))))
proof
let R4 being set;
let R5 being (ManySortedSet of R4);
let R6 being (ManySortedSet of R4);
let R7 being (ManySortedSet of R4);
assume that
L117: R5 is_transformable_to R6
and
L118: R6 is_transformable_to R7;
let C30 being set;
assume L119: C30 in R4;
L120: (( R6 . C30 ) = ( {} ) implies ( R5 . C30 ) = ( {} )) by L119 , L117 , PZFMISC1:def 3;
thus L121: thesis by L120 , L118 , L119 , PZFMISC1:def 3;
end;
theorem
L122: (for B39 being set holds (for B40 being (ManySortedSet of { B39 }) holds B40 = ( B39 .--> ( B40 . B39 ) )))
proof
let C31 being set;
let C32 being (ManySortedSet of { C31 });
L123: ( dom C32 ) = { C31 } by PARTFUN1:def 2;
L124: ( rng C32 ) = { ( C32 . C31 ) } by L123 , FUNCT_1:4;
thus L125: thesis by L124 , L123 , FUNCOP_1:9;
end;
theorem
L126: (for R4 being set holds (for B41 , B42 being  non-empty (ManySortedSet of R4) holds (for B43 being (ManySortedFunction of B41 , B42) holds (B43 is  "1-1"  "onto" implies ( B43 "" ) is  "1-1"  "onto"))))
proof
let R4 being set;
let C33 , C34 being  non-empty (ManySortedSet of R4);
let C35 being (ManySortedFunction of C33 , C34);
assume L127: C35 is  "1-1"  "onto";
L128:
now
let C36 being set;
assume L129: C36 in R4;
reconsider D20 = ( C35 . C36 ) as (Function of ( C33 . C36 ) , ( C34 . C36 )) by L129 , PBOOLE:def 15;
L130: D20 is  one-to-one by L127 , L129 , MSUALG_3:1;
L131: ( D20 " ) is  one-to-one by L130;
thus L132: ( ( C35 "" ) . C36 ) is  one-to-one by L131 , L127 , L129 , MSUALG_3:def 4;
end;
thus L133: ( C35 "" ) is  "1-1" by L128 , MSUALG_3:1;
thus L134: ( C35 "" ) is  "onto"
proof
let C37 being set;
assume L135: C37 in R4;
reconsider D21 = ( C35 . C37 ) as (Function of ( C33 . C37 ) , ( C34 . C37 )) by L135 , PBOOLE:def 15;
L136: D21 is  one-to-one by L127 , L135 , MSUALG_3:1;
L137: ( C33 . C37 ) = ( dom D21 ) by L135 , FUNCT_2:def 1
.= ( rng ( D21 " ) ) by L136 , FUNCT_1:33;
thus L138: thesis by L137 , L127 , L135 , MSUALG_3:def 4;
end;

end;
theorem
L135: (for R4 being set holds (for B44 , B45 being  non-empty (ManySortedSet of R4) holds (for B46 being (ManySortedFunction of B44 , B45) holds (B46 is  "1-1"  "onto" implies ( ( B46 "" ) "" ) = B46))))
proof
let R4 being set;
let C38 , C39 being  non-empty (ManySortedSet of R4);
let C40 being (ManySortedFunction of C38 , C39);
assume L136: C40 is  "1-1"  "onto";
L137:
now
let C41 being set;
assume L138: C41 in R4;
reconsider D22 = ( C40 . C41 ) as (Function of ( C38 . C41 ) , ( C39 . C41 )) by L138 , PBOOLE:def 15;
reconsider D23 = ( ( C40 "" ) . C41 ) as (Function of ( C39 . C41 ) , ( C38 . C41 )) by L138 , PBOOLE:def 15;
L139: D22 is  one-to-one by L136 , L138 , MSUALG_3:1;
L140: ( ( D22 " ) " ) = D22 by L139 , FUNCT_1:43;
L141: ( C40 "" ) is  "1-1"  "onto" by L136 , L126;
L142: ( ( ( C40 "" ) "" ) . C41 ) = ( D23 " ) by L141 , L138 , MSUALG_3:def 4;
thus L143: ( ( ( C40 "" ) "" ) . C41 ) = ( C40 . C41 ) by L142 , L136 , L138 , L140 , MSUALG_3:def 4;
end;
thus L144: thesis by L137 , PBOOLE:3;
end;
theorem
L145: (for B47 , B48 being  Function-yielding Function holds ((B47 is  "1-1" & B48 is  "1-1") implies ( B48 ** B47 ) is  "1-1"))
proof
let C42 , C43 being  Function-yielding Function;
assume that
L146: C42 is  "1-1"
and
L147: C43 is  "1-1";
let C44 being set;
let C45 being Function;
assume that
L148: C44 in ( dom ( C43 ** C42 ) )
and
L149: ( ( C43 ** C42 ) . C44 ) = C45;
L150: ( dom ( C43 ** C42 ) ) = ( ( dom C43 ) /\ ( dom C42 ) ) by PBOOLE:def 19;
L151: C44 in ( dom C42 ) by L150 , L148 , XBOOLE_0:def 4;
L152: ( C42 . C44 ) is  one-to-one by L151 , L146 , MSUALG_3:def 2;
L153: C44 in ( dom C43 ) by L148 , L150 , XBOOLE_0:def 4;
L154: ( C43 . C44 ) is  one-to-one by L153 , L147 , MSUALG_3:def 2;
L155: ( ( C43 . C44 ) * ( C42 . C44 ) ) is  one-to-one by L154 , L152;
thus L156: thesis by L155 , L148 , L149 , PBOOLE:def 19;
end;
theorem
L157: (for R4 being set holds (for R5 being (ManySortedSet of R4) holds (for B49 , B50 being  non-empty (ManySortedSet of R4) holds (for B51 being (ManySortedFunction of R5 , B49) holds (for B52 being (ManySortedFunction of B49 , B50) holds ((B51 is  "onto" & B52 is  "onto") implies ( B52 ** B51 ) is  "onto"))))))
proof
let R4 being set;
let R5 being (ManySortedSet of R4);
let C46 , C47 being  non-empty (ManySortedSet of R4);
let C48 being (ManySortedFunction of R5 , C46);
let C49 being (ManySortedFunction of C46 , C47);
assume L158: (C48 is  "onto" & C49 is  "onto");
L159:
now
let C50 being set;
assume L160: C50 in R4;
reconsider D24 = ( C48 . C50 ) as (Function of ( R5 . C50 ) , ( C46 . C50 )) by L160 , PBOOLE:def 15;
reconsider D25 = ( C49 . C50 ) as (Function of ( C46 . C50 ) , ( C47 . C50 )) by L160 , PBOOLE:def 15;
L161: (( rng D24 ) = ( C46 . C50 ) & ( rng D25 ) = ( C47 . C50 )) by L158 , L160 , MSUALG_3:def 3;
L162: ( rng ( D25 * D24 ) ) = ( C47 . C50 ) by L161 , L160 , FUNCT_2:14;
thus L163: ( rng ( ( C49 ** C48 ) . C50 ) ) = ( C47 . C50 ) by L162 , L160 , MSUALG_3:2;
end;
thus L164: thesis by L159 , MSUALG_3:def 3;
end;
theorem
L165: (for R4 being set holds (for B53 , B54 , B55 being  non-empty (ManySortedSet of R4) holds (for B56 being (ManySortedFunction of B53 , B54) holds (for B57 being (ManySortedFunction of B54 , B55) holds ((B56 is  "1-1"  "onto" & B57 is  "1-1"  "onto") implies ( ( B57 ** B56 ) "" ) = ( ( B56 "" ) ** ( B57 "" ) ))))))
proof
let R4 being set;
let C51 , C52 , C53 being  non-empty (ManySortedSet of R4);
let C54 being (ManySortedFunction of C51 , C52);
let C55 being (ManySortedFunction of C52 , C53);
assume that
L166: C54 is  "1-1"  "onto"
and
L167: C55 is  "1-1"  "onto";
L168:
now
let C56 being set;
assume L169: C56 in R4;
reconsider D26 = ( C54 . C56 ) as (Function of ( C51 . C56 ) , ( C52 . C56 )) by L169 , PBOOLE:def 15;
L170: D26 is  one-to-one by L166 , L169 , MSUALG_3:1;
reconsider D27 = ( C55 . C56 ) as (Function of ( C52 . C56 ) , ( C53 . C56 )) by L169 , PBOOLE:def 15;
L171: D27 is  one-to-one by L167 , L169 , MSUALG_3:1;
L172: (( ( C54 "" ) . C56 ) = ( D26 " ) & ( rng D26 ) = ( C52 . C56 )) by L166 , L169 , MSUALG_3:def 3 , MSUALG_3:def 4;
reconsider D28 = ( ( C54 "" ) . C56 ) as (Function of ( C52 . C56 ) , ( C51 . C56 )) by L172 , L170 , FUNCT_2:25;
L173: ( C55 ** C54 ) is  "1-1"  "onto" by L166 , L167 , L145 , L157;
L174: ( ( C55 ** C54 ) . C56 ) = ( D27 * D26 ) by L169 , MSUALG_3:2;
L175: ( ( ( C55 ** C54 ) "" ) . C56 ) = ( ( D27 * D26 ) " ) by L174 , L169 , L173 , MSUALG_3:def 4;
L176: (( ( C55 "" ) . C56 ) = ( D27 " ) & ( rng D27 ) = ( C53 . C56 )) by L167 , L169 , MSUALG_3:def 3 , MSUALG_3:def 4;
reconsider D29 = ( ( C55 "" ) . C56 ) as (Function of ( C53 . C56 ) , ( C52 . C56 )) by L176 , L171 , FUNCT_2:25;
L177: ( ( ( C54 "" ) ** ( C55 "" ) ) . C56 ) = ( D28 * D29 ) by L169 , MSUALG_3:2
.= ( D28 * ( D27 " ) ) by L167 , L169 , MSUALG_3:def 4
.= ( ( D26 " ) * ( D27 " ) ) by L166 , L169 , MSUALG_3:def 4;
thus L178: ( ( ( C55 ** C54 ) "" ) . C56 ) = ( ( ( C54 "" ) ** ( C55 "" ) ) . C56 ) by L177 , L170 , L171 , L175 , FUNCT_1:44;
end;
thus L179: thesis by L168 , PBOOLE:3;
end;
theorem
L180: (for R4 being set holds (for B58 , B59 being  non-empty (ManySortedSet of R4) holds (for B60 being (ManySortedFunction of B58 , B59) holds (for B61 being (ManySortedFunction of B59 , B58) holds ((B60 is  "1-1" & B60 is  "onto" & ( B61 ** B60 ) = ( id B58 )) implies B61 = ( B60 "" ))))))
proof
let R4 being set;
let C57 , C58 being  non-empty (ManySortedSet of R4);
let C59 being (ManySortedFunction of C57 , C58);
let C60 being (ManySortedFunction of C58 , C57);
assume that
L181: C59 is  "1-1"
and
L182: C59 is  "onto"
and
L183: ( C60 ** C59 ) = ( id C57 );
L184:
now
let C61 being set;
assume L185: C61 in R4;
reconsider D30 = ( C59 . C61 ) as (Function of ( C57 . C61 ) , ( C58 . C61 )) by L185 , PBOOLE:def 15;
L186: D30 is  one-to-one by L181 , L185 , MSUALG_3:1;
reconsider D31 = ( C60 . C61 ) as (Function of ( C58 . C61 ) , ( C57 . C61 )) by L185 , PBOOLE:def 15;
L187: ( ( C60 ** C59 ) . C61 ) = ( id ( C57 . C61 ) ) by L183 , L185 , MSUALG_3:def 1;
L188: ( D31 * D30 ) = ( id ( C57 . C61 ) ) by L187 , L185 , MSUALG_3:2;
L189: (( ( C59 "" ) . C61 ) = ( D30 " ) & ( rng D30 ) = ( C58 . C61 )) by L181 , L182 , L185 , MSUALG_3:def 3 , MSUALG_3:def 4;
thus L190: ( C60 . C61 ) = ( ( C59 "" ) . C61 ) by L189 , L185 , L188 , L186 , FUNCT_2:30;
end;
thus L191: thesis by L184 , PBOOLE:3;
end;
theorem
L192: (for R4 being set holds (for R5 being (ManySortedSet of R4) holds (for R6 being (ManySortedSet of R4) holds (R5 is_transformable_to R6 implies ( (Funcs) (R5 , R6) ) is  non-empty))))
proof
let R4 being set;
let R5 being (ManySortedSet of R4);
let R6 being (ManySortedSet of R4);
assume L193: R5 is_transformable_to R6;
L194: (for B62 being set holds (B62 in R4 implies ( Funcs (( R5 . B62 ) , ( R6 . B62 )) ) <> ( {} )))
proof
let C62 being set;
assume L195: C62 in R4;
L196: (( R6 . C62 ) = ( {} ) implies ( R5 . C62 ) = ( {} )) by L195 , L193 , PZFMISC1:def 3;
thus L197: thesis by L196 , FUNCT_2:8;
end;
L198: (for B63 being set holds (B63 in R4 implies ( ( (Funcs) (R5 , R6) ) . B63 ) <> ( {} )))
proof
let C63 being set;
assume L199: C63 in R4;
L200: ( ( (Funcs) (R5 , R6) ) . C63 ) = ( Funcs (( R5 . C63 ) , ( R6 . C63 )) ) by L199 , PBOOLE:def 17;
thus L201: thesis by L200 , L194 , L199;
end;
L202: (for B64 being set holds (B64 in R4 implies ( ( (Funcs) (R5 , R6) ) . B64 ) is non  empty)) by L198;
thus L203: thesis by L202 , PBOOLE:def 13;
end;
definition
let R4 being set;
let R5 being (ManySortedSet of R4);
let R6 being (ManySortedSet of R4);
assume L204: R5 is_transformable_to R6;
func MSFuncs (R5 , R6) -> non  empty set equals 
:L205: ( product ( (Funcs) (R5 , R6) ) );
coherence
proof
L206: ( (Funcs) (R5 , R6) ) is  non-empty by L204 , L192;
L207: (not ( {} ) in ( rng ( (Funcs) (R5 , R6) ) )) by L206 , PBOOLE:137;
thus L208: thesis by L207 , CARD_3:26;
end;
end;
theorem
L210: (for R4 being set holds (for R5 being (ManySortedSet of R4) holds (for R6 being (ManySortedSet of R4) holds (R5 is_transformable_to R6 implies (for B65 being set holds (B65 in ( MSFuncs (R5 , R6) ) implies B65 is (ManySortedFunction of R5 , R6)))))))
proof
let R4 being set;
let R5 being (ManySortedSet of R4);
let R6 being (ManySortedSet of R4);
assume L211: R5 is_transformable_to R6;
set D32 = ( (Funcs) (R5 , R6) );
let C64 being set;
assume L212: C64 in ( MSFuncs (R5 , R6) );
L213: C64 in ( product D32 ) by L212 , L211 , L205;
consider C65 being Function such that L214: C64 = C65 and L215: ( dom C65 ) = ( dom D32 ) and L216: (for B66 being set holds (B66 in ( dom D32 ) implies ( C65 . B66 ) in ( D32 . B66 ))) by L213 , CARD_3:def 5;
L217: ( dom D32 ) = R4 by PARTFUN1:def 2;
L218: (for B67 being set holds (B67 in R4 implies ( C65 . B67 ) in ( Funcs (( R5 . B67 ) , ( R6 . B67 )) )))
proof
let C66 being set;
assume L219: C66 in R4;
L220: ( ( (Funcs) (R5 , R6) ) . C66 ) = ( Funcs (( R5 . C66 ) , ( R6 . C66 )) ) by L219 , PBOOLE:def 17;
thus L221: thesis by L220 , L216 , L217 , L219;
end;
L222: (for B68 being set holds (B68 in R4 implies (ex B69 being Function st (B69 = ( C65 . B68 ) & ( dom B69 ) = ( R5 . B68 ) & ( rng B69 ) c= ( R6 . B68 )))))
proof
let C67 being set;
assume L223: C67 in R4;
L224: ( C65 . C67 ) in ( Funcs (( R5 . C67 ) , ( R6 . C67 )) ) by L223 , L218;
thus L225: thesis by L224 , FUNCT_2:def 2;
end;
L226: (for B70 being set holds (B70 in R4 implies ( C65 . B70 ) is (Function of ( R5 . B70 ) , ( R6 . B70 ))))
proof
let C68 being set;
assume L227: C68 in R4;
L228: (ex B71 being Function st (B71 = ( C65 . C68 ) & ( dom B71 ) = ( R5 . C68 ) & ( rng B71 ) c= ( R6 . C68 ))) by L222 , L227;
thus L229: thesis by L228 , FUNCT_2:2;
end;
L230: ( dom C65 ) = R4 by L215 , PARTFUN1:def 2;
L231: C65 is (ManySortedSet of R4) by L230 , PARTFUN1:def 2 , RELAT_1:def 18;
thus L232: thesis by L231 , L214 , L226 , PBOOLE:def 15;
end;
theorem
L233: (for R4 being set holds (for R5 being (ManySortedSet of R4) holds (for R6 being (ManySortedSet of R4) holds (R5 is_transformable_to R6 implies (for B72 being (ManySortedFunction of R5 , R6) holds B72 in ( MSFuncs (R5 , R6) ))))))
proof
let R4 being set;
let R5 being (ManySortedSet of R4);
let R6 being (ManySortedSet of R4);
assume L234: R5 is_transformable_to R6;
set D33 = ( (Funcs) (R5 , R6) );
let C69 being (ManySortedFunction of R5 , R6);
L235: ( dom D33 ) = R4 by PARTFUN1:def 2;
L236:
now
let C70 being set;
assume L237: C70 in ( dom D33 );
reconsider D34 = C70 as (Element of R4) by L237 , PARTFUN1:def 2;
L238: ( C69 . D34 ) is (Function of ( R5 . D34 ) , ( R6 . D34 )) by L235 , L237 , PBOOLE:def 15;
L239: (( R6 . D34 ) = ( {} ) implies ( R5 . D34 ) = ( {} )) by L234 , L235 , L237 , PZFMISC1:def 3;
L240: ( C69 . D34 ) in ( Funcs (( R5 . D34 ) , ( R6 . D34 )) ) by L239 , L238 , FUNCT_2:8;
thus L241: ( C69 . C70 ) in ( D33 . C70 ) by L240 , L235 , L237 , PBOOLE:def 17;
end;
L242: ( dom C69 ) = R4 by PARTFUN1:def 2;
L243: C69 in ( product D33 ) by L242 , L235 , L236 , CARD_3:9;
thus L244: thesis by L243 , L234 , L205;
end;
registration
let R4 being set;
let R5 being (ManySortedSet of R4);
cluster ( (Funcs) (R5 , R5) ) ->  non-empty;
coherence
proof
L245: (for B73 being set holds (B73 in R4 implies ( ( (Funcs) (R5 , R5) ) . B73 ) is non  empty))
proof
let C71 being set;
assume L246: C71 in R4;
L247: ( ( id R5 ) . C71 ) is (Function of ( R5 . C71 ) , ( R5 . C71 )) by L246 , PBOOLE:def 15;
L248: ( ( id R5 ) . C71 ) in ( Funcs (( R5 . C71 ) , ( R5 . C71 )) ) by L247 , FUNCT_2:9;
thus L249: thesis by L248 , L246 , PBOOLE:def 17;
end;
thus L250: thesis by L245 , PBOOLE:def 13;
end;
end;
definition
let C72 being set;
let C73 being (ManySortedSet of C72);
let C74 being non  empty (Subset of ( MSFuncs (C73 , C73) ));
redefine mode Element of C74
 -> (ManySortedFunction of C73 , C73);
coherence
proof
let C75 being (Element of C74);
thus L252: thesis by L210;
end;
end;
registration
let R4 being set;
let R5 being (ManySortedSet of R4);
cluster ( id R5 ) ->  "onto";
coherence
proof
let C76 being set;
assume L254: C76 in R4;
L255: ( ( id R5 ) . C76 ) = ( id ( R5 . C76 ) ) by L254 , MSUALG_3:def 1;
thus L256: thesis by L255 , RELAT_1:45;
end;
cluster ( id R5 ) ->  "1-1";
coherence
proof
L257:
now
let C77 being set;
assume L258: C77 in R4;
L259: ( ( id R5 ) . C77 ) = ( id ( R5 . C77 ) ) by L258 , MSUALG_3:def 1;
thus L260: ( ( id R5 ) . C77 ) is  one-to-one by L259;
end;
thus L261: thesis by L257 , MSUALG_3:1;
end;
end;
begin
definition
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
let R10 being  non-empty MSAlgebra over R8;
mode MSFunctionSet of R9 , R10
 is non  empty (Subset of ( MSFuncs ((the Sorts of R9) , (the Sorts of R10)) ));
end;
theorem
L264: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds ( id (the Sorts of R9) ) in ( MSFuncs ((the Sorts of R9) , (the Sorts of R9)) ))) by L233;
definition
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
set D35 = (the Sorts of R9);
func MSAAut R9 -> (MSFunctionSet of R9 , R9) means 
:L265: (for B74 being (ManySortedFunction of R9 , R9) holds (B74 in it iff B74 is_isomorphism R9 , R9));
existence
proof
defpred S2[ set ] means (ex B75 being (ManySortedFunction of R9 , R9) st ($1 = B75 & B75 is_isomorphism R9 , R9));
consider C78 being set such that L266: (for B76 being set holds (B76 in C78 iff (B76 in ( MSFuncs (D35 , D35) ) & S2[ B76 ]))) from XBOOLE_0:sch 1;
L267: C78 c= ( MSFuncs (D35 , D35) )
proof
let C79 being set;
thus L268: thesis by L266;
end;
L269: (( id D35 ) in ( MSFuncs (D35 , D35) ) & (ex B77 being (ManySortedFunction of R9 , R9) st (( id D35 ) = B77 & B77 is_isomorphism R9 , R9))) by L233 , MSUALG_3:16;
reconsider D36 = C78 as (MSFunctionSet of R9 , R9) by L269 , L266 , L267;
take D36;
let C80 being (ManySortedFunction of R9 , R9);
thus L270:now
assume L271: C80 in D36;
L272: (ex B78 being (ManySortedFunction of R9 , R9) st (C80 = B78 & B78 is_isomorphism R9 , R9)) by L271 , L266;
thus L273: C80 is_isomorphism R9 , R9 by L272;
end;
L274: C80 in ( MSFuncs (D35 , D35) ) by L233;
thus L275: thesis by L274 , L266;
end;
uniqueness
proof
let C81 , C82 being (MSFunctionSet of R9 , R9);
assume that
L276: (for B79 being (ManySortedFunction of R9 , R9) holds (B79 in C81 iff B79 is_isomorphism R9 , R9))
and
L277: (for B80 being (ManySortedFunction of R9 , R9) holds (B80 in C82 iff B80 is_isomorphism R9 , R9));
thus L278: C81 c= C82
proof
let C83 being set;
assume L279: C83 in C81;
reconsider D37 = C83 as (ManySortedFunction of R9 , R9) by L279 , L210;
L280: D37 is_isomorphism R9 , R9 by L276 , L279;
thus L281: thesis by L280 , L277;
end;

let C84 being set;
assume L282: C84 in C82;
reconsider D38 = C84 as (ManySortedFunction of R9 , R9) by L282 , L210;
L283: D38 is_isomorphism R9 , R9 by L277 , L282;
thus L284: thesis by L283 , L276;
end;
end;
theorem
L286: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds (for B81 being (Element of ( MSAAut R9 )) holds B81 in ( MSFuncs ((the Sorts of R9) , (the Sorts of R9)) )))) by L233;
theorem
L287: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds ( MSAAut R9 ) c= ( MSFuncs ((the Sorts of R9) , (the Sorts of R9)) )));
L288: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds (for B82 being (Element of ( MSAAut R9 )) holds (B82 is  "1-1" & B82 is  "onto"))))
proof
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
let C85 being (Element of ( MSAAut R9 ));
L289: C85 is_isomorphism R9 , R9 by L265;
thus L290: thesis by L289 , MSUALG_3:13;
end;
theorem
L291: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds ( id (the Sorts of R9) ) in ( MSAAut R9 )))
proof
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
L292: ( id (the Sorts of R9) ) is_isomorphism R9 , R9 by MSUALG_3:16;
thus L293: thesis by L292 , L265;
end;
theorem
L294: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds (for B83 being (Element of ( MSAAut R9 )) holds ( B83 "" ) in ( MSAAut R9 ))))
proof
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
let C86 being (Element of ( MSAAut R9 ));
L295: C86 is_isomorphism R9 , R9 by L265;
L296: ( C86 "" ) is_isomorphism R9 , R9 by L295 , MSUALG_3:14;
thus L297: thesis by L296 , L265;
end;
theorem
L298: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds (for B84 , B85 being (Element of ( MSAAut R9 )) holds ( B84 ** B85 ) in ( MSAAut R9 ))))
proof
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
let C87 , C88 being (Element of ( MSAAut R9 ));
L299: (C87 is_isomorphism R9 , R9 & C88 is_isomorphism R9 , R9) by L265;
L300: ( C87 ** C88 ) is_isomorphism R9 , R9 by L299 , MSUALG_3:15;
thus L301: thesis by L300 , L265;
end;
theorem
L302: (for R1 being Universal_Algebra holds (for B86 being (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 )) holds (for B87 being (Element of ( UAAut R1 )) holds (B86 = ( ( 0 ) .--> B87 ) implies B86 in ( MSAAut ( MSAlg R1 ) )))))
proof
let R1 being Universal_Algebra;
let C89 being (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 ));
let C90 being (Element of ( UAAut R1 ));
assume L303: C89 = ( ( 0 ) .--> C90 );
L304: C89 = ( MSAlg C90 ) by L303 , MSUHOM_1:def 3;
L305: C90 is_isomorphism R1 , R1 by L6;
L306: ( MSAlg C90 ) is_isomorphism ( MSAlg R1 ) , ( ( MSAlg R1 ) Over ( MSSign R1 ) ) by L305 , MSUHOM_1:20;
L307: C89 is_isomorphism ( MSAlg R1 ) , ( MSAlg R1 ) by L306 , L304 , MSUHOM_1:9;
thus L308: thesis by L307 , L265;
end;
definition
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
func MSAAutComp R9 -> (BinOp of ( MSAAut R9 )) means 
:L309: (for B88 , B89 being (Element of ( MSAAut R9 )) holds ( it . (B88 , B89) ) = ( B89 ** B88 ));
existence
proof
defpred S3[ (Element of ( MSAAut R9 )) , (Element of ( MSAAut R9 )) , set ] means $3 = ( $2 ** $1 );
L310: (for B90 , B91 being (Element of ( MSAAut R9 )) holds (ex B92 being (Element of ( MSAAut R9 )) st S3[ B90 , B91 , B92 ]))
proof
let C91 , C92 being (Element of ( MSAAut R9 ));
reconsider D39 = C91 , D40 = C92 as (ManySortedFunction of R9 , R9);
reconsider D41 = ( D40 ** D39 ) as (Element of ( MSAAut R9 )) by L298;
take D41;
thus L311: thesis;
end;
thus L312: (ex B93 being (BinOp of ( MSAAut R9 )) st (for B94 , B95 being (Element of ( MSAAut R9 )) holds S3[ B94 , B95 , ( B93 . (B94 , B95) ) ])) from BINOP_1:sch 3(L310);
end;
uniqueness
proof
let C93 , C94 being (BinOp of ( MSAAut R9 ));
assume that
L313: (for B96 , B97 being (Element of ( MSAAut R9 )) holds ( C93 . (B96 , B97) ) = ( B97 ** B96 ))
and
L314: (for B98 , B99 being (Element of ( MSAAut R9 )) holds ( C94 . (B98 , B99) ) = ( B99 ** B98 ));
L315: (for B100 , B101 being (Element of ( MSAAut R9 )) holds ( C93 . (B100 , B101) ) = ( C94 . (B100 , B101) ))
proof
let C95 , C96 being (Element of ( MSAAut R9 ));
thus L316: ( C93 . (C95 , C96) ) = ( C96 ** C95 ) by L313
.= ( C94 . (C95 , C96) ) by L314;
end;
thus L317: thesis by L315 , BINOP_1:2;
end;
end;
definition
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
func MSAAutGroup R9 -> Group equals 
multMagma (# ( MSAAut R9 ) , ( MSAAutComp R9 ) #);
coherence
proof
set D42 = (the Sorts of R9);
set D43 = multMagma (# ( MSAAut R9 ) , ( MSAAutComp R9 ) #);
L319: (ex B102 being (Element of D43) st (for B103 being (Element of D43) holds (( B103 * B102 ) = B103 & ( B102 * B103 ) = B103 & (ex B104 being (Element of D43) st (( B103 * B104 ) = B102 & ( B104 * B103 ) = B102)))))
proof
reconsider D44 = ( id D42 ) as (Element of D43) by L291;
take D44;
let C97 being (Element of D43);
consider C98 being (Element of ( MSAAut R9 )) such that L320: C98 = C97;
L321: ( C97 * D44 ) = ( ( id D42 ) ** C98 ) by L320 , L309
.= C98 by MSUALG_3:4;
thus L322: ( C97 * D44 ) = C97 by L321 , L320;
L323: ( D44 * C97 ) = ( C98 ** ( id D42 ) ) by L320 , L309
.= C98 by MSUALG_3:3;
thus L324: ( D44 * C97 ) = C97 by L323 , L320;
reconsider D45 = ( C98 "" ) as (Element of D43) by L294;
take D45;
L325: (C98 is  "onto" & C98 is  "1-1") by L288;
thus L326: ( C97 * D45 ) = ( ( C98 "" ) ** C98 ) by L320 , L309
.= D44 by L325 , MSUALG_3:5;
thus L327: ( D45 * C97 ) = ( C98 ** ( C98 "" ) ) by L320 , L309
.= D44 by L325 , MSUALG_3:5;
end;
L328: (for B105 , B106 , B107 being (Element of D43) holds ( ( B105 * B106 ) * B107 ) = ( B105 * ( B106 * B107 ) ))
proof
let C99 , C100 , C101 being (Element of D43);
reconsider D46 = C99 , D47 = C100 , D48 = C101 as (Element of ( MSAAut R9 ));
L329: ( C100 * C101 ) = ( D48 ** D47 ) by L309;
L330: ( C99 * C100 ) = ( D47 ** D46 ) by L309;
thus L331: ( ( C99 * C100 ) * C101 ) = ( D48 ** ( D47 ** D46 ) ) by L330 , L309
.= ( ( D48 ** D47 ) ** D46 ) by PBOOLE:140
.= ( C99 * ( C100 * C101 ) ) by L329 , L309;
end;
thus L332: thesis by L328 , L319 , GROUP_1:def 2 , GROUP_1:def 3;
end;
end;
registration
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
cluster ( MSAAutGroup R9 ) ->  strict;
coherence;
end;
theorem
L335: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds (for B108 , B109 being (Element of ( MSAAutGroup R9 )) holds (for B110 , B111 being (Element of ( MSAAut R9 )) holds ((B108 = B110 & B109 = B111) implies ( B108 * B109 ) = ( B111 ** B110 )))))) by L309;
theorem
L336: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds ( id (the Sorts of R9) ) = ( 1_ ( MSAAutGroup R9 ) )))
proof
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
set D49 = (the Sorts of R9);
set D50 = the (Element of ( MSAAutGroup R9 ));
reconsider D51 = ( id D49 ) as (Element of ( MSAAutGroup R9 )) by L291;
consider C102 being (ManySortedFunction of D49 , D49) such that L337: C102 = D51;
L338: D50 is (Element of ( MSAAut R9 ));
consider C103 being (ManySortedFunction of D49 , D49) such that L339: C103 = D50 by L338;
L340: ( D51 * D50 ) = ( C103 ** C102 ) by L337 , L339 , L309
.= D50 by L337 , L339 , MSUALG_3:3;
thus L341: thesis by L340 , GROUP_1:7;
end;
theorem
L342: (for R8 being non  void non  empty ManySortedSign holds (for R9 being  non-empty MSAlgebra over R8 holds (for B112 being (Element of ( MSAAut R9 )) holds (for B113 being (Element of ( MSAAutGroup R9 )) holds (B112 = B113 implies ( B112 "" ) = ( B113 " ))))))
proof
let R8 being non  void non  empty ManySortedSign;
let R9 being  non-empty MSAlgebra over R8;
let C104 being (Element of ( MSAAut R9 ));
let C105 being (Element of ( MSAAutGroup R9 ));
consider C106 being (Element of ( MSAAut R9 )) such that L343: C106 = ( C105 " );
assume L344: C104 = C105;
L345: ( C106 ** C104 ) = ( C105 * ( C105 " ) ) by L344 , L343 , L309;
L346: ( C106 ** C104 ) = ( 1_ ( MSAAutGroup R9 ) ) by L345 , GROUP_1:def 5;
L347: ( C106 ** C104 ) = ( id (the Sorts of R9) ) by L346 , L336;
L348: (C104 is  "1-1" & C104 is  "onto") by L288;
thus L349: thesis by L348 , L343 , L347 , L180;
end;
begin
theorem
L350: (for B114 , B115 being Universal_Algebra holds (B114 , B115 are_similar  implies (for B116 being (ManySortedFunction of ( MSAlg B114 ) , ( ( MSAlg B115 ) Over ( MSSign B114 ) )) holds ( B116 . ( 0 ) ) is (Function of B114 , B115))))
proof
let C107 , C108 being Universal_Algebra;
L351: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
assume L352: C107 , C108 are_similar ;
L353: ( MSSign C107 ) = ( MSSign C108 ) by L352 , MSUHOM_1:10;
L354: (( MSAlg C108 ) = MSAlgebra (# ( MSSorts C108 ) , ( MSCharact C108 ) #) & ( ( MSAlg C108 ) Over ( MSSign C107 ) ) = ( MSAlg C108 )) by L353 , MSUALG_1:def 11 , MSUHOM_1:9;
let C109 being (ManySortedFunction of ( MSAlg C107 ) , ( ( MSAlg C108 ) Over ( MSSign C107 ) ));
L355: ((the carrier of ( MSSign C107 )) = { ( 0 ) } & ( MSAlg C107 ) = MSAlgebra (# ( MSSorts C107 ) , ( MSCharact C107 ) #)) by MSUALG_1:def 8 , MSUALG_1:def 11;
L356: ( ( MSSorts C108 ) . ( 0 ) ) = ( ( ( 0 ) .--> (the carrier of C108) ) . ( 0 ) ) by MSUALG_1:def 9
.= (the carrier of C108) by L351 , FUNCOP_1:7;
L357: ( ( MSSorts C107 ) . ( 0 ) ) = ( ( ( 0 ) .--> (the carrier of C107) ) . ( 0 ) ) by MSUALG_1:def 9
.= (the carrier of C107) by L351 , FUNCOP_1:7;
thus L358: thesis by L357 , L351 , L355 , L356 , L354 , PBOOLE:def 15;
end;
theorem
L359: (for R1 being Universal_Algebra holds (for B117 being (Element of ( UAAut R1 )) holds ( ( 0 ) .--> B117 ) is (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 ))))
proof
let R1 being Universal_Algebra;
let C110 being (Element of ( UAAut R1 ));
L360: ( MSAlg C110 ) is (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 )) by MSUHOM_1:9;
thus L361: thesis by L360 , MSUHOM_1:def 3;
end;
L362: (for R1 being Universal_Algebra holds (for B118 being Function holds ((( dom B118 ) = ( UAAut R1 ) & (for B119 being set holds (B119 in ( UAAut R1 ) implies ( B118 . B119 ) = ( ( 0 ) .--> B119 )))) implies ( rng B118 ) = ( MSAAut ( MSAlg R1 ) ))))
proof
let R1 being Universal_Algebra;
let C111 being Function;
assume that
L363: ( dom C111 ) = ( UAAut R1 )
and
L364: (for B120 being set holds (B120 in ( UAAut R1 ) implies ( C111 . B120 ) = ( ( 0 ) .--> B120 )));
thus L365: ( rng C111 ) c= ( MSAAut ( MSAlg R1 ) )
proof
let C112 being set;
assume L366: C112 in ( rng C111 );
consider C113 being set such that L367: C113 in ( dom C111 ) and L368: C112 = ( C111 . C113 ) by L366 , FUNCT_1:def 3;
consider C114 being (Element of ( UAAut R1 )) such that L369: C114 = C113 by L363 , L367;
L370: (C112 = ( ( 0 ) .--> C113 ) & ( ( 0 ) .--> C113 ) is (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 ))) by L363 , L364 , L367 , L368 , L359;
consider C115 being (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 )) such that L371: C115 = C112 by L370;
L372: C114 is_isomorphism R1 , R1 by L6;
L373: ( MSAlg C114 ) is_isomorphism ( MSAlg R1 ) , ( ( MSAlg R1 ) Over ( MSSign R1 ) ) by L372 , MSUHOM_1:20;
L374: ( MSAlg C114 ) = ( ( 0 ) .--> C113 ) by L369 , MSUHOM_1:def 3
.= C112 by L363 , L364 , L367 , L368;
L375: C115 is_isomorphism ( MSAlg R1 ) , ( MSAlg R1 ) by L374 , L371 , L373 , MSUHOM_1:9;
thus L376: thesis by L375 , L371 , L265;
end;

let C116 being set;
assume L377: C116 in ( MSAAut ( MSAlg R1 ) );
reconsider D52 = C116 as (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 )) by L377 , L210;
L378: (the carrier of ( MSSign R1 )) = { ( 0 ) } by MSUALG_1:def 8;
L379: D52 = ( ( 0 ) .--> ( D52 . ( 0 ) ) ) by L378 , L122;
L380: D52 is_isomorphism ( MSAlg R1 ) , ( MSAlg R1 ) by L377 , L265;
L381: (ex B121 being set st (B121 in ( dom C111 ) & C116 = ( C111 . B121 )))
proof
take D53 = ( D52 . ( 0 ) );
L382: D52 is (ManySortedFunction of ( MSAlg R1 ) , ( ( MSAlg R1 ) Over ( MSSign R1 ) )) by MSUHOM_1:9;
reconsider D54 = D53 as (Function of R1 , R1) by L382 , L350;
L383: ( MSAlg D54 ) = D52 by L379 , MSUHOM_1:def 3;
L384: ( MSAlg D54 ) is_isomorphism ( MSAlg R1 ) , ( ( MSAlg R1 ) Over ( MSSign R1 ) ) by L383 , L380 , MSUHOM_1:9;
L385: D54 is_isomorphism R1 , R1 by L384 , MSUHOM_1:24;
thus L386: D53 in ( dom C111 ) by L385 , L363 , L6;
thus L387: thesis by L386 , L363 , L364 , L379;
end;
thus L388: thesis by L381 , FUNCT_1:def 3;
end;
theorem
L389: (for R1 being Universal_Algebra holds (for B122 being Function holds ((( dom B122 ) = ( UAAut R1 ) & (for B123 being set holds (B123 in ( UAAut R1 ) implies ( B122 . B123 ) = ( ( 0 ) .--> B123 )))) implies B122 is (Homomorphism of ( UAAutGroup R1 ) , ( MSAAutGroup ( MSAlg R1 ) )))))
proof
let R1 being Universal_Algebra;
let C117 being Function;
assume that
L390: ( dom C117 ) = ( UAAut R1 )
and
L391: (for B124 being set holds (B124 in ( UAAut R1 ) implies ( C117 . B124 ) = ( ( 0 ) .--> B124 )));
set D55 = ( MSAAutGroup ( MSAlg R1 ) );
set D56 = ( UAAutGroup R1 );
L392: ( rng C117 ) c= (the carrier of D55) by L390 , L391 , L362;
reconsider D57 = C117 as (Function of D56 , D55) by L392 , L390 , FUNCT_2:def 1 , RELSET_1:4;
L393:
now
let C118 , C119 being (Element of ( UAAutGroup R1 ));
thus L394: ( D57 . ( C118 * C119 ) ) = ( ( D57 . C118 ) * ( D57 . C119 ) )
proof
reconsider D58 = C118 , D59 = C119 as (Element of ( UAAut R1 ));
L395: ( D57 . ( D59 * D58 ) ) = ( ( 0 ) .--> ( D59 * D58 ) ) by L391 , L61;
reconsider D60 = ( ( 0 ) .--> D58 ) , D61 = ( ( 0 ) .--> D59 ) as (ManySortedFunction of ( MSAlg R1 ) , ( MSAlg R1 )) by L359;
reconsider D62 = ( D57 . C118 ) , D63 = ( D57 . C119 ) as (Element of ( MSAAut ( MSAlg R1 ) ));
reconsider D64 = D60 , D65 = D61 as (Element of ( MSAAutGroup ( MSAlg R1 ) )) by L302;
L396: (D62 = D64 & D63 = D65) by L391;
thus L397: ( D57 . ( C118 * C119 ) ) = ( D57 . ( D59 * D58 ) ) by L65
.= ( MSAlg ( D59 * D58 ) ) by L395 , MSUHOM_1:def 3
.= ( ( MSAlg D59 ) ** ( MSAlg D58 ) ) by MSUHOM_1:26
.= ( D61 ** ( MSAlg D58 ) ) by MSUHOM_1:def 3
.= ( D61 ** D60 ) by MSUHOM_1:def 3
.= ( ( D57 . C118 ) * ( D57 . C119 ) ) by L396 , L309;
end;

end;
thus L395: thesis by L393 , GROUP_6:def 6;
end;
theorem
L396: (for R1 being Universal_Algebra holds (for B125 being (Homomorphism of ( UAAutGroup R1 ) , ( MSAAutGroup ( MSAlg R1 ) )) holds ((for B126 being set holds (B126 in ( UAAut R1 ) implies ( B125 . B126 ) = ( ( 0 ) .--> B126 ))) implies B125 is  bijective)))
proof
let R1 being Universal_Algebra;
let C120 being (Homomorphism of ( UAAutGroup R1 ) , ( MSAAutGroup ( MSAlg R1 ) ));
set D66 = ( UAAutGroup R1 );
assume L397: (for B127 being set holds (B127 in ( UAAut R1 ) implies ( C120 . B127 ) = ( ( 0 ) .--> B127 )));
L398: (for B128 , B129 being (Element of D66) holds (( C120 . B128 ) = ( C120 . B129 ) implies B128 = B129))
proof
let C121 , C122 being (Element of D66);
assume L399: ( C120 . C121 ) = ( C120 . C122 );
L400: ( C120 . C122 ) = ( ( 0 ) .--> C122 ) by L397
.= [: { ( 0 ) } , { C122 } :];
L401: ( C120 . C121 ) = ( ( 0 ) .--> C121 ) by L397
.= [: { ( 0 ) } , { C121 } :];
L402: { C121 } = { C122 } by L401 , L399 , L400 , ZFMISC_1:110;
thus L403: thesis by L402 , ZFMISC_1:3;
end;
L404: C120 is  one-to-one by L398 , GROUP_6:1;
L405: ( dom C120 ) = ( UAAut R1 ) by FUNCT_2:def 1;
L406: ( rng C120 ) = (the carrier of ( MSAAutGroup ( MSAlg R1 ) )) by L405 , L397 , L362;
L407: C120 is  onto by L406 , FUNCT_2:def 3;
thus L408: C120 is  bijective by L407 , L404;
end;
theorem
L409: (for R1 being Universal_Algebra holds ( UAAutGroup R1 ) , ( MSAAutGroup ( MSAlg R1 ) ) are_isomorphic )
proof
let R1 being Universal_Algebra;
deffunc H1(set) = ( ( 0 ) .--> $1 );
consider C123 being Function such that L410: (( dom C123 ) = ( UAAut R1 ) & (for B130 being set holds (B130 in ( UAAut R1 ) implies ( C123 . B130 ) = H1(B130)))) from FUNCT_1:sch 3;
reconsider D67 = C123 as (Homomorphism of ( UAAutGroup R1 ) , ( MSAAutGroup ( MSAlg R1 ) )) by L410 , L389;
take D67;
thus L411: thesis by L410 , L396;
end;
