:: Probability Measure on Discrete Spaces and Algebra of Real Valued Random
:: Variables
::  by Hiroyuki Okazaki and Yasunari Shidama
::
:: Received March 16, 2010
:: Copyright (c) 2010-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FUNCT_1, COMPLEX1, RELAT_1, ZFMISC_1, XXREAL_0, PARTFUN1,
      ARYTM_1, XBOOLE_0, ORDINAL4, INT_1, SQUARE_1, ARYTM_3, RLVECT_1,
      SUPINF_2, RSSPACE, FUNCOP_1, FINSOP_1, NAT_1, FUNCT_4, BINOP_2, PROB_1,
      MEASURE6, MESFUNC1, TARSKI, MESFUNC5, IDEAL_1, SUBSET_1, RANDOM_1,
      RANDOM_2, C0SP1, FINSET_1, FINSEQ_1, ORDINAL2, RPR_1, CARD_1, SEQ_2,
      POWER, FUNCT_3, PROB_4, UPROOTS, FINSEQ_2, CARD_3, FUNCT_2, RFINSEQ,
      FUNCSDOM, POLYALG1, BHSP_5, NUMBERS, REAL_1, INTEGRA5, VALUED_1, EQREL_1;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, RELAT_1, FUNCT_1, RELSET_1,
      PARTFUN1, FUNCT_2, FUNCT_4, FUNCOP_1, FINSEQ_1, ORDINAL1, REAL_1, CARD_1,
      FINSET_1, NUMBERS, XXREAL_0, NAT_D, COMPLEX1, VALUED_1, FINSEQ_2,
      RFINSEQ,
      FINSOP_1, STRUCT_0, IDEAL_1, BINOP_1, BINOP_2, RLVECT_1, FUNCSDOM,
      SUPINF_2, SEQ_1, SEQ_2, SQUARE_1, GROUP_1, POWER, PROB_1, PROB_4,
      EXTREAL1, MESFUNC1, MEASURE6, MESFUNC5, MESFUNC6, MESFUNC2, RVSUM_1,
      UPROOTS, MESFUN6C, C0SP1, RANDOM_1, BHSP_5;
 constructors EXTREAL1, REAL_1, IDEAL_1, MEASURE6, MESFUNC2, MESFUNC5,
      MESFUNC6, SEQ_1, SUPINF_1, REALSET1, RVSUM_1, MESFUNC1, RELSET_1,
      RANDOM_1, C0SP1, RFINSEQ, POWER, FINSOP_1, BINARITH, FINSEQOP, SETWISEO,
      PROB_4, WELLORD2, SQUARE_1, NAT_D, UPROOTS, MESFUN6C, BHSP_5, COMSEQ_2;
 registrations XBOOLE_0, ORDINAL1, NUMBERS, XREAL_0, MEMBERED, VALUED_0, NAT_1,
      SUBSET_1, XCMPLX_0, XXREAL_0, MEASURE1, FINSEQ_1, RELAT_1, XXREAL_3,
      C0SP1, FUNCT_2, CARD_1, FINSET_1, BINOP_2, FUNCT_1, UPROOTS, MESFUN6C,
      FUNCSDOM, RELSET_1;
 requirements NUMERALS, BOOLE, SUBSET, REAL, ARITHM;
 definitions TARSKI, BINOP_1, STRUCT_0, ALGSTR_0, RLVECT_1, MEASURE6, MESFUNC5,
      FINSEQ_2, FINSEQ_1, PROB_4, FUNCSDOM, VALUED_1, BHSP_5, RVSUM_1,
      SQUARE_1;
 theorems FUNCT_1, FUNCT_2, PARTFUN1, COMPLEX1, XBOOLE_0, TARSKI, RELAT_1,
      VALUED_1, IDEAL_1, ZFMISC_1, RLVECT_1, FUNCOP_1, XBOOLE_1, MESFUNC2,
      EXTREAL1, MEASURE1, MESFUNC6, PROB_1, XXREAL_0, ABSVALUE, MESFUNC7,
      RELSET_1, XXREAL_3, XREAL_0, RANDOM_1, C0SP1, FINSEQ_4, POWER, BINOP_2,
      RFINSEQ, CARD_2, FINSEQ_1, FUNCT_4, FINSOP_1, NAT_1, NAT_2, NAT_D,
      XREAL_1, SQUARE_1, FINSEQ_2, INT_1, FUNCT_3, CARD_1, FINSEQ_3, FINSEQ_5,
      UPROOTS, MESFUN6C, FUNCSDOM, BHSP_5, RVSUM_1, FIB_NUM3, SUBSET, XTUPLE_0;
 schemes FINSEQ_1, FUNCT_2, NAT_1, FUNCT_3;

begin
theorem
L1: (for B1 being  one-to-one Function holds (for B2 , B3 being (Subset of ( dom B1 )) holds (B2 misses B3 implies ( rng ( B1 | B2 ) ) misses ( rng ( B1 | B3 ) ))))
proof
let C1 being  one-to-one Function;
let C2 , C3 being (Subset of ( dom C1 ));
assume L2: C2 misses C3;
assume L3: ( rng ( C1 | C2 ) ) meets ( rng ( C1 | C3 ) );
consider C4 being set such that L4: (C4 in ( rng ( C1 | C2 ) ) & C4 in ( rng ( C1 | C3 ) )) by L3 , XBOOLE_0:3;
consider C5 being set such that L5: (C5 in ( dom ( C1 | C2 ) ) & C4 = ( ( C1 | C2 ) . C5 )) by L4 , FUNCT_1:def 3;
consider C6 being set such that L6: (C6 in ( dom ( C1 | C3 ) ) & C4 = ( ( C1 | C3 ) . C6 )) by L4 , FUNCT_1:def 3;
L7: (C5 in ( dom C1 ) & C6 in ( dom C1 )) by L5 , L6 , RELAT_1:57;
L8: (C4 = ( C1 . C5 ) & C4 = ( C1 . C6 )) by L5 , L6 , FUNCT_1:47;
L9: C5 = C6 by L8 , L7 , FUNCT_1:def 4;
L10: (( dom ( C1 | C2 ) ) c= C2 & ( dom ( C1 | C3 ) ) c= C3) by RELAT_1:58;
L11: C5 in ( C2 /\ C3 ) by L10 , L9 , L5 , L6 , XBOOLE_0:def 4;
thus L12: contradiction by L11 , L2 , XBOOLE_0:4;
end;
theorem
L13: (for B4 , B5 being Function holds ( rng ( B4 * B5 ) ) c= ( rng ( B4 | ( rng B5 ) ) ))
proof
let C7 , C8 being Function;
let C9 being set;
assume L14: C9 in ( rng ( C7 * C8 ) );
consider C10 being set such that L15: (C10 in ( dom ( C7 * C8 ) ) & C9 = ( ( C7 * C8 ) . C10 )) by L14 , FUNCT_1:def 3;
L16: (C10 in ( dom C8 ) & ( C8 . C10 ) in ( dom C7 )) by L15 , FUNCT_1:11;
reconsider D1 = ( C8 . C10 ) as set;
L17: ( C7 . D1 ) in ( rng ( C7 | ( rng C8 ) ) ) by L16 , FUNCT_1:3 , FUNCT_1:50;
thus L18: thesis by L17 , L15 , FUNCT_1:12;
end;
registration
let R1 being non  empty set;
let R3 being (SigmaField of R1);
cluster  nonnegative for (Real-Valued-Random-Variable of R3);
existence
proof
set D2 = the (Real-Valued-Random-Variable of R3);
L19:
now
let C11 being set;
assume L20: C11 in ( dom ( abs D2 ) );
L21: ( ( abs D2 ) . C11 ) = ( abs ( D2 . C11 ) ) by L20 , VALUED_1:def 11;
thus L22: ( 0 ) <= ( ( abs D2 ) . C11 ) by L21 , COMPLEX1:46;
end;
L23: ( abs D2 ) is  nonnegative by L19 , MESFUNC6:52;
thus L24: thesis by L23;
end;
end;
registration
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let C12 being (Real-Valued-Random-Variable of R3);
cluster ( abs C12 ) ->  nonnegative;
coherence
proof
L26:
now
let C13 being set;
assume L27: C13 in ( dom ( abs C12 ) );
L28: ( ( abs C12 ) . C13 ) = ( abs ( C12 . C13 ) ) by L27 , VALUED_1:def 11;
thus L29: ( 0 ) <= ( ( abs C12 ) . C13 ) by L28 , COMPLEX1:46;
end;
thus L30: thesis by L26 , MESFUNC6:52;
end;
end;
theorem
L32: (for R1 being non  empty set holds ( R1 --> 1 ) = ( chi (R1 , R1) ))
proof
let R1 being non  empty set;
set D3 = ( R1 --> 1 );
L33: ( dom ( chi (R1 , R1) ) ) = R1 by FUNCT_3:def 3;
L34: ( dom D3 ) = R1 by FUNCT_2:def 1;
L35:
now
let C14 being set;
assume L36: C14 in ( dom ( chi (R1 , R1) ) );
per cases ;
suppose L37: C14 in R1;

thus L38: ( ( chi (R1 , R1) ) . C14 ) = 1 by L37 , FUNCT_3:def 3
.= ( D3 . C14 ) by L36 , FUNCOP_1:7;
end;
suppose L39: (not C14 in R1);

thus L40: ( ( chi (R1 , R1) ) . C14 ) = ( D3 . C14 ) by L39 , L36;
end;
end;
thus L42: thesis by L35 , L33 , L34 , FUNCT_1:2;
end;
theorem
L43: (for R1 being non  empty set holds (for R2 being Real holds (for R3 being (SigmaField of R1) holds ( R1 --> R2 ) is (Real-Valued-Random-Variable of R3))))
proof
let R1 being non  empty set;
let R2 being Real;
let R3 being (SigmaField of R1);
set D4 = ( R1 --> 1 );
set D5 = ( R1 --> R2 );
reconsider D6 = R1 as (Element of R3) by MEASURE1:7;
L44: (( dom D4 ) = R1 & ( rng D4 ) c= { 1 }) by FUNCOP_1:13;
reconsider D7 = D4 as (Function of R1 , ( REAL )) by FUNCT_2:7;
L45: ( R_EAL D7 ) = ( chi (D6 , R1) ) by L32;
L46: ( chi (D6 , R1) ) is_measurable_on D6 by MESFUNC2:29;
L47: D7 is_measurable_on D6 by L46 , L45 , MESFUNC6:def 1;
L48: D7 is (Real-Valued-Random-Variable of R3) by L47 , RANDOM_1:def 2;
L49: ( dom D5 ) = ( dom D7 ) by L44 , FUNCT_2:def 1;
L50:
now
let C15 being set;
assume L51: C15 in ( dom D5 );
thus L52: ( D5 . C15 ) = ( R2 * 1 ) by L51 , FUNCOP_1:7
.= ( R2 * ( D7 . C15 ) ) by L51 , FUNCOP_1:7;
end;
L53: D5 = ( R2 (#) D7 ) by L50 , L49 , VALUED_1:def 5;
thus L54: thesis by L53 , L48 , RANDOM_1:20;
end;
theorem
L55: (for B6 being non  empty set holds (for B7 being (PartFunc of B6 , ( REAL )) holds (( B7 to_power 2 ) = ( ( - B7 ) to_power 2 ) & ( B7 to_power 2 ) = ( ( abs B7 ) to_power 2 ))))
proof
let C16 being non  empty set;
let C17 being (PartFunc of C16 , ( REAL ));
L56: ( dom ( - C17 ) ) = ( dom C17 ) by VALUED_1:8;
L57: ( dom ( ( - C17 ) to_power 2 ) ) = ( dom C17 ) by L56 , MESFUN6C:def 4;
L58: ( dom ( C17 to_power 2 ) ) = ( dom ( ( - C17 ) to_power 2 ) ) by L57 , MESFUN6C:def 4;
L59: ( dom ( abs C17 ) ) = ( dom C17 ) by VALUED_1:def 11;
L60: ( dom ( ( abs C17 ) to_power 2 ) ) = ( dom C17 ) by L59 , MESFUN6C:def 4;
L61: ( dom ( C17 to_power 2 ) ) = ( dom ( ( abs C17 ) to_power 2 ) ) by L60 , MESFUN6C:def 4;
L62: (for B8 being (Element of C16) holds (B8 in ( dom ( C17 to_power 2 ) ) implies (( ( C17 to_power 2 ) . B8 ) = ( ( ( - C17 ) to_power 2 ) . B8 ) & ( ( C17 to_power 2 ) . B8 ) = ( ( ( abs C17 ) to_power 2 ) . B8 ))))
proof
let C18 being (Element of C16);
assume L63: C18 in ( dom ( C17 to_power 2 ) );
L64: (C18 in ( dom ( ( - C17 ) to_power 2 ) ) & C18 in ( dom ( C17 to_power 2 ) ) & C18 in ( dom C17 ) & C18 in ( dom ( - C17 ) ) & C18 in ( dom ( ( abs C17 ) to_power 2 ) )) by L63 , L60 , L58 , MESFUN6C:def 4;
L65: ( ( ( - C17 ) to_power 2 ) . C18 ) = ( ( ( - C17 ) . C18 ) to_power 2 ) by L63 , L58 , MESFUN6C:def 4
.= ( ( - ( C17 . C18 ) ) to_power 2 ) by VALUED_1:8
.= ( ( C17 . C18 ) to_power 2 ) by FIB_NUM3:3
.= ( ( C17 to_power 2 ) . C18 ) by L63 , MESFUN6C:def 4;
L66: ( ( ( abs C17 ) to_power 2 ) . C18 ) = ( ( C17 to_power 2 ) . C18 )
proof
L67: ( ( ( abs C17 ) to_power 2 ) . C18 ) = ( ( ( abs C17 ) . C18 ) to_power 2 ) by L64 , MESFUN6C:def 4
.= ( ( abs ( C17 . C18 ) ) to_power 2 ) by VALUED_1:18;
L68:
now
per cases  by L67 , ABSVALUE:1;
case L69: ( ( ( abs C17 ) to_power 2 ) . C18 ) = ( ( C17 . C18 ) to_power 2 );
thus L70: thesis by L69 , L63 , MESFUN6C:def 4;
end;
case L71: ( ( ( abs C17 ) to_power 2 ) . C18 ) = ( ( - ( C17 . C18 ) ) to_power 2 );
L72: ( ( ( abs C17 ) to_power 2 ) . C18 ) = ( ( C17 . C18 ) to_power 2 ) by L71 , FIB_NUM3:3
.= ( ( C17 to_power 2 ) . C18 ) by L63 , MESFUN6C:def 4;
thus L73: thesis by L72;
end;
end;
thus L75: thesis by L68;
end;
thus L76: thesis by L66 , L65;
end;
L77: ((for B9 being (Element of C16) holds (B9 in ( dom ( C17 to_power 2 ) ) implies ( ( C17 to_power 2 ) . B9 ) = ( ( ( - C17 ) to_power 2 ) . B9 ))) & (for B10 being (Element of C16) holds (B10 in ( dom ( C17 to_power 2 ) ) implies ( ( C17 to_power 2 ) . B10 ) = ( ( ( abs C17 ) to_power 2 ) . B10 )))) by L62;
thus L78: thesis by L77 , L58 , L61 , PARTFUN1:5;
end;
theorem
L79: (for B11 being non  empty set holds (for B12 , B13 being (PartFunc of B11 , ( REAL )) holds (( ( B12 + B13 ) to_power 2 ) = ( ( ( B12 to_power 2 ) + ( 2 (#) ( B12 (#) B13 ) ) ) + ( B13 to_power 2 ) ) & ( ( B12 - B13 ) to_power 2 ) = ( ( ( B12 to_power 2 ) - ( 2 (#) ( B12 (#) B13 ) ) ) + ( B13 to_power 2 ) ))))
proof
let C19 being non  empty set;
let C20 , C21 being (PartFunc of C19 , ( REAL ));
L80: (( dom ( C20 to_power 2 ) ) = ( dom C20 ) & (for B14 being (Element of C19) holds (B14 in ( dom ( C20 to_power 2 ) ) implies ( ( C20 to_power 2 ) . B14 ) = ( ( C20 . B14 ) to_power 2 )))) by MESFUN6C:def 4;
L81: (( dom ( C21 to_power 2 ) ) = ( dom C21 ) & (for B15 being (Element of C19) holds (B15 in ( dom ( C21 to_power 2 ) ) implies ( ( C21 to_power 2 ) . B15 ) = ( ( C21 . B15 ) to_power 2 )))) by MESFUN6C:def 4;
L82: ( dom ( 2 (#) ( C20 (#) C21 ) ) ) = ( dom ( C20 (#) C21 ) ) by VALUED_1:def 5
.= ( ( dom C20 ) /\ ( dom C21 ) ) by VALUED_1:def 4;
L83:
now
let C22 being (Element of C19);
assume L84: C22 in ( ( dom C20 ) /\ ( dom C21 ) );
thus L85: ( ( 2 (#) ( C20 (#) C21 ) ) . C22 ) = ( 2 * ( ( C20 (#) C21 ) . C22 ) ) by VALUED_1:6
.= ( 2 * ( ( C20 . C22 ) * ( C21 . C22 ) ) ) by VALUED_1:5
.= ( ( 2 * ( C20 . C22 ) ) * ( C21 . C22 ) );
end;
L86: ( dom ( ( C20 + C21 ) to_power 2 ) ) = ( dom ( C20 + C21 ) ) by MESFUN6C:def 4
.= ( ( dom C20 ) /\ ( dom C21 ) ) by VALUED_1:def 1;
L87: ( dom ( ( C20 - C21 ) to_power 2 ) ) = ( dom ( C20 - C21 ) ) by MESFUN6C:def 4
.= ( ( dom C20 ) /\ ( dom C21 ) ) by VALUED_1:12;
L88: ( dom ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) ) = ( ( dom C20 ) /\ ( dom ( 2 (#) ( C20 (#) C21 ) ) ) ) by L80 , VALUED_1:def 1
.= ( ( dom C20 ) /\ ( dom C21 ) ) by L82 , XBOOLE_1:17 , XBOOLE_1:28;
L89: ( dom ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) ) = ( ( dom C20 ) /\ ( dom ( 2 (#) ( C20 (#) C21 ) ) ) ) by L80 , VALUED_1:12
.= ( ( dom C20 ) /\ ( dom C21 ) ) by L82 , XBOOLE_1:17 , XBOOLE_1:28;
L90: ( dom ( ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) ) = ( ( dom ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) ) /\ ( dom C21 ) ) by L81 , VALUED_1:def 1
.= ( ( ( dom C20 ) /\ ( dom ( 2 (#) ( C20 (#) C21 ) ) ) ) /\ ( dom C21 ) ) by L80 , VALUED_1:def 1
.= ( ( ( dom C20 ) /\ ( dom C21 ) ) /\ ( dom C21 ) ) by L82 , XBOOLE_1:17 , XBOOLE_1:28
.= ( ( dom C20 ) /\ ( dom C21 ) ) by XBOOLE_1:17 , XBOOLE_1:28;
L91: ( dom ( ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) ) = ( ( dom ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) ) /\ ( dom C21 ) ) by L81 , VALUED_1:def 1
.= ( ( dom C20 ) /\ ( dom C21 ) ) by L89 , XBOOLE_1:17 , XBOOLE_1:28;
L92:
now
let C23 being (Element of C19);
assume L93: C23 in ( ( dom C20 ) /\ ( dom C21 ) );
L94: C23 in ( dom ( C20 + C21 ) ) by L93 , VALUED_1:def 1;
L95: C23 in ( dom C20 ) by L93 , XBOOLE_0:def 4;
L96: C23 in ( dom C21 ) by L93 , XBOOLE_0:def 4;
L97: C23 in ( dom ( C20 - C21 ) ) by L93 , VALUED_1:12;
L98: C23 in ( dom ( ( C20 - C21 ) to_power 2 ) ) by L97 , MESFUN6C:def 4;
L99: ( ( ( C20 + C21 ) to_power 2 ) . C23 ) = ( ( ( C20 + C21 ) . C23 ) to_power 2 ) by L93 , L86 , MESFUN6C:def 4
.= ( ( ( C20 . C23 ) + ( C21 . C23 ) ) to_power 2 ) by L94 , VALUED_1:def 1
.= ( ( ( C20 . C23 ) + ( C21 . C23 ) ) ^2 ) by POWER:46
.= ( ( ( ( C20 . C23 ) ^2 ) + ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) ^2 ) )
.= ( ( ( ( C20 . C23 ) to_power 2 ) + ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) ^2 ) ) by POWER:46
.= ( ( ( ( C20 . C23 ) to_power 2 ) + ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) to_power 2 ) ) by POWER:46
.= ( ( ( ( C20 to_power 2 ) . C23 ) + ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) to_power 2 ) ) by L80 , L95
.= ( ( ( ( C20 to_power 2 ) . C23 ) + ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 to_power 2 ) . C23 ) ) by L81 , L96
.= ( ( ( ( C20 to_power 2 ) . C23 ) + ( ( 2 (#) ( C20 (#) C21 ) ) . C23 ) ) + ( ( C21 to_power 2 ) . C23 ) ) by L83 , L93
.= ( ( ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) . C23 ) + ( ( C21 to_power 2 ) . C23 ) ) by L88 , L93 , VALUED_1:def 1
.= ( ( ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) . C23 ) by L90 , L93 , VALUED_1:def 1;
L100: ( ( ( C20 - C21 ) to_power 2 ) . C23 ) = ( ( ( C20 - C21 ) . C23 ) to_power 2 ) by L98 , MESFUN6C:def 4
.= ( ( ( C20 . C23 ) - ( C21 . C23 ) ) to_power 2 ) by L97 , VALUED_1:13
.= ( ( ( C20 . C23 ) - ( C21 . C23 ) ) ^2 ) by POWER:46
.= ( ( ( ( C20 . C23 ) ^2 ) - ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) ^2 ) )
.= ( ( ( ( C20 . C23 ) to_power 2 ) - ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) ^2 ) ) by POWER:46
.= ( ( ( ( C20 . C23 ) to_power 2 ) - ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) to_power 2 ) ) by POWER:46
.= ( ( ( ( C20 to_power 2 ) . C23 ) - ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 . C23 ) to_power 2 ) ) by L80 , L95
.= ( ( ( ( C20 to_power 2 ) . C23 ) - ( ( 2 * ( C20 . C23 ) ) * ( C21 . C23 ) ) ) + ( ( C21 to_power 2 ) . C23 ) ) by L81 , L96
.= ( ( ( ( C20 to_power 2 ) . C23 ) - ( ( 2 (#) ( C20 (#) C21 ) ) . C23 ) ) + ( ( C21 to_power 2 ) . C23 ) ) by L83 , L93
.= ( ( ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) . C23 ) + ( ( C21 to_power 2 ) . C23 ) ) by L89 , L93 , VALUED_1:13
.= ( ( ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) . C23 ) by L91 , L93 , VALUED_1:def 1;
thus L101: (( ( ( C20 + C21 ) to_power 2 ) . C23 ) = ( ( ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) . C23 ) & ( ( ( C20 - C21 ) to_power 2 ) . C23 ) = ( ( ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) . C23 )) by L100 , L99;
end;
L102: ((for B16 being (Element of C19) holds (B16 in ( dom ( ( C20 + C21 ) to_power 2 ) ) implies ( ( ( C20 + C21 ) to_power 2 ) . B16 ) = ( ( ( ( C20 to_power 2 ) + ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) . B16 ))) & (for B17 being (Element of C19) holds (B17 in ( dom ( ( C20 - C21 ) to_power 2 ) ) implies ( ( ( C20 - C21 ) to_power 2 ) . B17 ) = ( ( ( ( C20 to_power 2 ) - ( 2 (#) ( C20 (#) C21 ) ) ) + ( C21 to_power 2 ) ) . B17 )))) by L92 , L86 , L87;
thus L103: thesis by L102 , L86 , L90 , L91 , L87 , PARTFUN1:5;
end;
definition
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let R4 being (Probability of R3);
let C24 being (Real-Valued-Random-Variable of R3);
assume L104: (C24 is_integrable_on R4 & ( ( abs C24 ) to_power 2 ) is_integrable_on ( P2M R4 ));
func variance (C24 , R4) -> (Element of ( REAL )) means 
:L105: (ex B18 being (Real-Valued-Random-Variable of R3) st (ex B19 being (Real-Valued-Random-Variable of R3) st (B19 = ( R1 --> ( expect (C24 , R4) ) ) & B18 = ( C24 - B19 ) & B18 is_integrable_on R4 & ( ( abs B18 ) to_power 2 ) is_integrable_on ( P2M R4 ) & it = ( Integral (( P2M R4 ) , ( ( abs B18 ) to_power 2 )) ))));
correctness
proof
consider C25 being (Element of R3) such that L106: (C25 = R1 & C24 is_measurable_on C25) by RANDOM_1:def 2;
L107: ( ( P2M R4 ) . C25 ) <= 1 by PROB_1:35;
L108: ( ( P2M R4 ) . C25 ) < ( +infty ) by L107 , XXREAL_0:2 , XXREAL_0:9;
set D8 = ( expect (C24 , R4) );
set D9 = ( R1 --> 1 );
set D10 = ( R1 --> ( expect (C24 , R4) ) );
L109: (( dom D9 ) = R1 & ( rng D9 ) c= { 1 }) by FUNCOP_1:13;
reconsider D11 = D9 as (Real-Valued-Random-Variable of R3) by L43;
L110: ( R_EAL D11 ) = ( chi (C25 , R1) ) by L106 , L32;
L111: ( dom D10 ) = ( dom D11 ) by L109 , FUNCT_2:def 1;
L112:
now
let C26 being set;
assume L113: C26 in ( dom D10 );
thus L114: ( D10 . C26 ) = ( D8 * 1 ) by L113 , FUNCOP_1:7
.= ( D8 * ( D11 . C26 ) ) by L113 , FUNCOP_1:7;
end;
L115: D10 = ( D8 (#) D11 ) by L112 , L111 , VALUED_1:def 5;
reconsider D12 = D10 as (Real-Valued-Random-Variable of R3) by L43;
set D13 = ( C24 - D12 );
reconsider D14 = D13 as (Real-Valued-Random-Variable of R3);
L116: ( chi (C25 , R1) ) is_integrable_on ( P2M R4 ) by L108 , MESFUNC7:24;
L117: D11 is_integrable_on ( P2M R4 ) by L116 , L110 , MESFUNC6:def 4;
L118: ( D8 (#) D11 ) is_integrable_on ( P2M R4 ) by L117 , MESFUNC6:102;
L119: ( - 1 ) is Real by XREAL_0:def 1;
L120: ( ( - 1 ) (#) ( D8 (#) D11 ) ) is_integrable_on ( P2M R4 ) by L119 , L118 , MESFUNC6:102;
L121: C24 is_integrable_on ( P2M R4 ) by L104 , RANDOM_1:def 3;
L122: D14 is_integrable_on ( P2M R4 ) by L121 , L115 , L120 , MESFUNC6:100;
L123: D14 is_integrable_on R4 by L122 , RANDOM_1:def 3;
L124: ( ( 2 * D8 ) (#) C24 ) is_integrable_on ( P2M R4 ) by L121 , MESFUNC6:102;
L125: ( ( - 1 ) (#) ( ( 2 * D8 ) (#) C24 ) ) is_integrable_on ( P2M R4 ) by L124 , L119 , MESFUNC6:102;
L126: ( ( ( abs C24 ) to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) is_integrable_on ( P2M R4 ) by L125 , L104 , MESFUNC6:100;
L127: ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) = ( ( ( C24 to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) + ( ( D8 * D8 ) (#) D11 ) )
proof
L128: ( dom ( C24 to_power 2 ) ) = ( dom C24 ) by MESFUN6C:def 4;
L129: ( dom ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) = ( dom ( ( D8 (#) D11 ) (#) C24 ) ) by VALUED_1:def 5
.= ( ( dom ( D8 (#) D11 ) ) /\ ( dom C24 ) ) by VALUED_1:def 4
.= ( R1 /\ ( dom C24 ) ) by L109 , VALUED_1:def 5;
L130: ( dom ( ( D8 (#) D11 ) to_power 2 ) ) = ( dom ( D8 (#) D11 ) ) by MESFUN6C:def 4
.= R1 by L109 , VALUED_1:def 5;
L131: ( dom ( ( D8 * D8 ) (#) D11 ) ) = R1 by L109 , VALUED_1:def 5;
L132: ( dom ( ( 2 * D8 ) (#) C24 ) ) = ( dom C24 ) by VALUED_1:def 5;
L133: ( dom ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) ) = ( ( dom C24 ) /\ ( R1 /\ ( dom C24 ) ) ) by L128 , L129 , VALUED_1:12
.= ( ( ( dom C24 ) /\ ( dom C24 ) ) /\ R1 ) by XBOOLE_1:16
.= ( ( dom C24 ) /\ R1 );
L134: ( dom ( ( C24 to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) ) = ( ( dom ( C24 to_power 2 ) ) /\ ( dom ( ( 2 * D8 ) (#) C24 ) ) ) by VALUED_1:12
.= ( dom C24 ) by L128 , L132;
L135: ( dom ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) ) = ( ( dom ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) ) /\ ( dom ( ( D8 (#) D11 ) to_power 2 ) ) ) by VALUED_1:def 1
.= ( ( dom C24 ) /\ ( R1 /\ R1 ) ) by L130 , L133 , XBOOLE_1:16
.= ( ( dom C24 ) /\ R1 );
L136: ( dom ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) ) = ( dom ( ( ( C24 to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) + ( ( D8 * D8 ) (#) D11 ) ) ) by L135 , L131 , L134 , VALUED_1:def 1;
L137: (for B20 being (Element of R1) holds (B20 in ( dom ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) ) implies ( ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) . B20 ) = ( ( ( ( C24 to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) + ( ( D8 * D8 ) (#) D11 ) ) . B20 )))
proof
let C27 being (Element of R1);
assume L138: C27 in ( dom ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) );
L139: (C27 in ( dom C24 ) & C27 in R1) by L138 , L135 , XBOOLE_0:def 4;
L140: ( ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) . C27 ) = ( ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) . C27 ) + ( ( ( D8 (#) D11 ) to_power 2 ) . C27 ) ) by L138 , VALUED_1:def 1
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) . C27 ) ) + ( ( ( D8 (#) D11 ) to_power 2 ) . C27 ) ) by L133 , L135 , L138 , VALUED_1:13
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( 2 * ( ( ( D8 (#) D11 ) (#) C24 ) . C27 ) ) ) + ( ( ( D8 (#) D11 ) to_power 2 ) . C27 ) ) by VALUED_1:6
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( 2 * ( ( ( D8 (#) D11 ) . C27 ) * ( C24 . C27 ) ) ) ) + ( ( ( D8 (#) D11 ) to_power 2 ) . C27 ) ) by VALUED_1:5
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( 2 * ( ( D8 * ( D11 . C27 ) ) * ( C24 . C27 ) ) ) ) + ( ( ( D8 (#) D11 ) to_power 2 ) . C27 ) ) by VALUED_1:6
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( 2 * ( ( D8 * 1 ) * ( C24 . C27 ) ) ) ) + ( ( ( D8 (#) D11 ) to_power 2 ) . C27 ) ) by FUNCOP_1:7
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( ( ( D8 (#) D11 ) . C27 ) to_power 2 ) ) by L130 , MESFUN6C:def 4
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( ( D8 * ( D11 . C27 ) ) to_power 2 ) ) by VALUED_1:6
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( ( D8 * 1 ) to_power 2 ) ) by FUNCOP_1:7
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( D8 ^2 ) ) by POWER:46
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( D8 * D8 ) );
L141: ( ( ( ( C24 to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) + ( ( D8 * D8 ) (#) D11 ) ) . C27 ) = ( ( ( ( C24 to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) . C27 ) + ( ( ( D8 * D8 ) (#) D11 ) . C27 ) ) by L138 , L136 , VALUED_1:def 1
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( ( 2 * D8 ) (#) C24 ) . C27 ) ) + ( ( ( D8 * D8 ) (#) D11 ) . C27 ) ) by L134 , L139 , VALUED_1:13
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( ( ( D8 * D8 ) (#) D11 ) . C27 ) ) by VALUED_1:6
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( ( D8 * D8 ) * ( D11 . C27 ) ) ) by VALUED_1:6
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( ( D8 * D8 ) * 1 ) ) by FUNCOP_1:7
.= ( ( ( ( C24 to_power 2 ) . C27 ) - ( ( 2 * D8 ) * ( C24 . C27 ) ) ) + ( D8 * D8 ) );
thus L142: thesis by L141 , L140;
end;
thus L143: thesis by L137 , L136 , PARTFUN1:5;
end;
L144: ( ( abs D14 ) to_power 2 ) = ( ( C24 - ( D8 (#) D11 ) ) to_power 2 ) by L55 , L115
.= ( ( ( C24 to_power 2 ) - ( 2 (#) ( ( D8 (#) D11 ) (#) C24 ) ) ) + ( ( D8 (#) D11 ) to_power 2 ) ) by L79
.= ( ( ( ( abs C24 ) to_power 2 ) - ( ( 2 * D8 ) (#) C24 ) ) + ( ( D8 * D8 ) (#) D11 ) ) by L55 , L127;
L145: ( ( D8 * D8 ) (#) D11 ) is_integrable_on ( P2M R4 ) by L117 , MESFUNC6:102;
L146: ( ( abs D14 ) to_power 2 ) is_integrable_on ( P2M R4 ) by L145 , L126 , L144 , MESFUNC6:100;
L147: (( -infty ) < ( Integral (( P2M R4 ) , ( ( abs D14 ) to_power 2 )) ) & ( Integral (( P2M R4 ) , ( ( abs D14 ) to_power 2 )) ) < ( +infty )) by L146 , MESFUNC6:90;
L148: ( Integral (( P2M R4 ) , ( ( abs D14 ) to_power 2 )) ) is (Element of ( REAL )) by L147 , XXREAL_0:14;
thus L149: thesis by L148 , L145 , L126 , L144 , L123 , MESFUNC6:100;
end;
end;
begin
theorem
L151: (for R1 being non  empty set holds (for R3 being (SigmaField of R1) holds (for R4 being (Probability of R3) holds (for R2 being Real holds (for B21 being (Real-Valued-Random-Variable of R3) holds ((( 0 ) < R2 & B21 is  nonnegative & B21 is_integrable_on R4 & ( ( abs B21 ) to_power 2 ) is_integrable_on ( P2M R4 )) implies ( R4 . { B22 where B22 is (Element of R1) : R2 <= |. ( ( B21 . B22 ) - ( expect (B21 , R4) ) ) .| } ) <= ( ( variance (B21 , R4) ) / ( R2 to_power 2 ) )))))))
proof
let R1 being non  empty set;
let R3 being (SigmaField of R1);
let R4 being (Probability of R3);
let R2 being Real;
let C28 being (Real-Valued-Random-Variable of R3);
assume L152: (( 0 ) < R2 & C28 is  nonnegative & C28 is_integrable_on R4 & ( ( abs C28 ) to_power 2 ) is_integrable_on ( P2M R4 ));
L153: { B23 where B23 is (Element of R1) : R2 <= |. ( ( C28 . B23 ) - ( expect (C28 , R4) ) ) .| } c= { B24 where B24 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B24 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) }
proof
let C29 being set;
assume L154: C29 in { B25 where B25 is (Element of R1) : R2 <= |. ( ( C28 . B25 ) - ( expect (C28 , R4) ) ) .| };
L155: (ex B26 being (Element of R1) st (C29 = B26 & R2 <= |. ( ( C28 . B26 ) - ( expect (C28 , R4) ) ) .|)) by L154;
L156: (( R2 ^2 ) = ( R2 to_power 2 ) & ( ( abs ( ( C28 . C29 ) - ( expect (C28 , R4) ) ) ) ^2 ) = ( ( abs ( ( C28 . C29 ) - ( expect (C28 , R4) ) ) ) to_power 2 )) by POWER:46;
L157: ( R2 ^2 ) <= ( ( abs ( ( C28 . C29 ) - ( expect (C28 , R4) ) ) ) ^2 ) by L152 , L155 , SQUARE_1:15;
thus L158: thesis by L157 , L155 , L156;
end;
L159: { B27 where B27 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B27 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) } c= { B28 where B28 is (Element of R1) : R2 <= |. ( ( C28 . B28 ) - ( expect (C28 , R4) ) ) .| }
proof
let C30 being set;
assume L160: C30 in { B29 where B29 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B29 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) };
L161: (ex B30 being (Element of R1) st (C30 = B30 & ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B30 ) - ( expect (C28 , R4) ) ) ) to_power 2 ))) by L160;
L162: ( 0 ) <= ( abs ( ( C28 . C30 ) - ( expect (C28 , R4) ) ) ) by COMPLEX1:46;
L163: (( R2 ^2 ) = ( R2 to_power 2 ) & ( ( abs ( ( C28 . C30 ) - ( expect (C28 , R4) ) ) ) ^2 ) = ( ( abs ( ( C28 . C30 ) - ( expect (C28 , R4) ) ) ) to_power 2 )) by POWER:46;
L164: R2 <= ( abs ( ( C28 . C30 ) - ( expect (C28 , R4) ) ) ) by L163 , L162 , L161 , SQUARE_1:47;
thus L165: thesis by L164 , L161;
end;
L166: { B31 where B31 is (Element of R1) : R2 <= |. ( ( C28 . B31 ) - ( expect (C28 , R4) ) ) .| } = { B32 where B32 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B32 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) } by L159 , L153 , XBOOLE_0:def 10;
consider C31 being (Real-Valued-Random-Variable of R3), C32 being (Real-Valued-Random-Variable of R3) such that L167: (C32 = ( R1 --> ( expect (C28 , R4) ) ) & C31 = ( C28 - C32 ) & C31 is_integrable_on R4 & ( ( abs C31 ) to_power 2 ) is_integrable_on ( P2M R4 ) & ( variance (C28 , R4) ) = ( Integral (( P2M R4 ) , ( ( abs C31 ) to_power 2 )) )) by L105 , L152;
reconsider D15 = ( ( abs C31 ) to_power 2 ) as (Real-Valued-Random-Variable of R3) by RANDOM_1:23;
L168: D15 is_integrable_on R4 by L167 , RANDOM_1:def 3;
L169: ( R4 . { B33 where B33 is (Element of R1) : ( R2 to_power 2 ) <= ( D15 . B33 ) } ) <= ( ( expect (D15 , R4) ) / ( R2 to_power 2 ) ) by L168 , L152 , POWER:34 , RANDOM_1:36;
L170: ( expect (D15 , R4) ) = ( variance (C28 , R4) ) by L167 , L168 , RANDOM_1:def 4;
L171: ( dom C28 ) = R1 by FUNCT_2:def 1;
L172: ( dom ( R1 --> ( expect (C28 , R4) ) ) ) = R1 by FUNCOP_1:13;
L173: ( dom ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) ) = ( ( dom C28 ) /\ ( dom ( R1 --> ( expect (C28 , R4) ) ) ) ) by VALUED_1:12
.= R1 by L171 , L172;
L174: ( dom ( abs ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) ) ) = R1 by L173 , VALUED_1:def 11;
L175: ( dom ( ( abs ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) ) to_power 2 ) ) = R1 by L174 , MESFUN6C:def 4;
L176: { B34 where B34 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B34 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) } c= { B35 where B35 is (Element of R1) : ( R2 to_power 2 ) <= ( D15 . B35 ) }
proof
let C33 being set;
assume L177: C33 in { B36 where B36 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B36 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) };
L178: (ex B37 being (Element of R1) st (C33 = B37 & ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B37 ) - ( expect (C28 , R4) ) ) ) to_power 2 ))) by L177;
L179: ( D15 . C33 ) = ( ( ( abs ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) ) . C33 ) to_power 2 ) by L178 , L175 , L167 , MESFUN6C:def 4
.= ( ( abs ( ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) . C33 ) ) to_power 2 ) by L174 , L178 , VALUED_1:def 11
.= ( ( abs ( ( C28 . C33 ) - ( ( R1 --> ( expect (C28 , R4) ) ) . C33 ) ) ) to_power 2 ) by L173 , L178 , VALUED_1:13
.= ( ( abs ( ( C28 . C33 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) by L178 , FUNCOP_1:7;
thus L180: thesis by L179 , L178;
end;
L181: { B38 where B38 is (Element of R1) : ( R2 to_power 2 ) <= ( D15 . B38 ) } c= { B39 where B39 is (Element of R1) : ( R2 to_power 2 ) <= ( ( abs ( ( C28 . B39 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) }
proof
let C34 being set;
assume L182: C34 in { B40 where B40 is (Element of R1) : ( R2 to_power 2 ) <= ( D15 . B40 ) };
L183: (ex B41 being (Element of R1) st (C34 = B41 & ( R2 to_power 2 ) <= ( D15 . B41 ))) by L182;
L184: ( D15 . C34 ) = ( ( ( abs ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) ) . C34 ) to_power 2 ) by L183 , L175 , L167 , MESFUN6C:def 4
.= ( ( abs ( ( C28 - ( R1 --> ( expect (C28 , R4) ) ) ) . C34 ) ) to_power 2 ) by L174 , L183 , VALUED_1:def 11
.= ( ( abs ( ( C28 . C34 ) - ( ( R1 --> ( expect (C28 , R4) ) ) . C34 ) ) ) to_power 2 ) by L173 , L183 , VALUED_1:13
.= ( ( abs ( ( C28 . C34 ) - ( expect (C28 , R4) ) ) ) to_power 2 ) by L183 , FUNCOP_1:7;
thus L185: thesis by L184 , L183;
end;
thus L186: thesis by L181 , L170 , L169 , L166 , L176 , XBOOLE_0:def 10;
end;
begin
theorem
L187: (for B42 being non  empty  finite set holds (for B43 being (Function of B42 , ( REAL )) holds (for B44 being (Function of ( bool B42 ) , ( REAL )) holds (((for B45 being set holds (B45 c= B42 implies (( 0 ) <= ( B44 . B45 ) & ( B44 . B45 ) <= 1))) & ( B44 . B42 ) = 1 & (for B46 being  finite (Subset of B42) holds ( B44 . B46 ) = ( setopfunc (B46 , B42 , ( REAL ) , B43 , ( addreal )) ))) implies B44 is (Probability of ( Trivial-SigmaField B42 ))))))
proof
let C35 being non  empty  finite set;
let C36 being (Function of C35 , ( REAL ));
let C37 being (Function of ( bool C35 ) , ( REAL ));
assume that
L188: (for B47 being set holds (B47 c= C35 implies (( 0 ) <= ( C37 . B47 ) & ( C37 . B47 ) <= 1)))
and
L189: ( C37 . C35 ) = 1
and
L190: (for B48 being  finite (Subset of C35) holds ( C37 . B48 ) = ( setopfunc (B48 , C35 , ( REAL ) , C36 , ( addreal )) ));
L191: (for B49 , B50 being (Event of ( Trivial-SigmaField C35 )) holds (B49 misses B50 implies ( C37 . ( B49 \/ B50 ) ) = ( ( C37 . B49 ) + ( C37 . B50 ) )))
proof
let C38 , C39 being (Event of ( Trivial-SigmaField C35 ));
assume L192: C38 misses C39;
reconsider D16 = C38 , D17 = C39 as  finite (Subset of C35);
L193: C35 = ( dom C36 ) by FUNCT_2:def 1;
thus L194: ( C37 . ( C38 \/ C39 ) ) = ( setopfunc (( D16 \/ D17 ) , C35 , ( REAL ) , C36 , ( addreal )) ) by L190
.= ( ( addreal ) . (( setopfunc (D16 , C35 , ( REAL ) , C36 , ( addreal )) ) , ( setopfunc (D17 , C35 , ( REAL ) , C36 , ( addreal )) )) ) by L192 , L193 , BHSP_5:14
.= ( ( addreal ) . (( setopfunc (D16 , C35 , ( REAL ) , C36 , ( addreal )) ) , ( C37 . C39 )) ) by L190
.= ( ( addreal ) . (( C37 . C38 ) , ( C37 . C39 )) ) by L190
.= ( ( C37 . C38 ) + ( C37 . C39 ) ) by BINOP_2:def 9;
end;
L195: (for B51 being (Event of ( Trivial-SigmaField C35 )) holds ( 0 ) <= ( C37 . B51 )) by L188;
L196: (for B52 being (SetSequence of ( Trivial-SigmaField C35 )) holds (B52 is  non-ascending implies (( C37 * B52 ) is  convergent & ( lim ( C37 * B52 ) ) = ( C37 . ( Intersection B52 ) ))))
proof
let C40 being (SetSequence of ( Trivial-SigmaField C35 ));
assume L197: C40 is  non-ascending;
consider C41 being (Element of ( NAT )) such that L198: (for B53 being (Element of ( NAT )) holds (C41 <= B53 implies ( Intersection C40 ) = ( C40 . B53 ))) by L197 , RANDOM_1:15;
L199:
now
let C42 being (Element of ( NAT ));
assume L200: C41 <= C42;
L201: C42 in ( NAT );
L202: C42 in ( dom C40 ) by L201 , FUNCT_2:def 1;
thus L203: ( ( C37 * C40 ) . C42 ) = ( C37 . ( C40 . C42 ) ) by L202 , FUNCT_1:13
.= ( C37 . ( Intersection C40 ) ) by L198 , L200;
end;
thus L204: thesis by L199 , PROB_1:1;
end;
thus L205: thesis by L196 , L195 , L191 , L189 , PROB_1:def 8;
end;
L206: (for B54 , B55 being non  empty  finite set holds (for B56 being (Probability of ( Trivial-SigmaField B54 )) holds (for B57 being (Probability of ( Trivial-SigmaField B55 )) holds (ex B58 being (Function of [: B54 , B55 :] , ( REAL )) st (for B59 , B60 being set holds ((B59 in B54 & B60 in B55) implies ( B58 . (B59 , B60) ) = ( ( B56 . { B59 } ) * ( B57 . { B60 } ) )))))))
proof
let C43 , C44 being non  empty  finite set;
let C45 being (Probability of ( Trivial-SigmaField C43 ));
let C46 being (Probability of ( Trivial-SigmaField C44 ));
deffunc H1(set , set) = ( ( C45 . { $1 } ) * ( C46 . { $2 } ) );
consider C47 being Function such that L207: (( dom C47 ) = [: C43 , C44 :] & (for B61 , B62 being set holds ((B61 in C43 & B62 in C44) implies ( C47 . (B61 , B62) ) = H1(B61 , B62)))) from FUNCT_3:sch 2;
L208: (for B63 being set holds (B63 in [: C43 , C44 :] implies ( C47 . B63 ) in ( REAL )))
proof
let C48 being set;
assume L209: C48 in [: C43 , C44 :];
consider C49 , C50 being set such that L210: (C49 in C43 & C50 in C44 & C48 = [ C49 , C50 ]) by L209 , ZFMISC_1:def 2;
L211: ( C47 . C48 ) = ( C47 . (C49 , C50) ) by L210
.= H1(C49 , C50) by L207 , L210;
thus L212: ( C47 . C48 ) in ( REAL ) by L211;
end;
reconsider D18 = C47 as (Function of [: C43 , C44 :] , ( REAL )) by L208 , L207 , FUNCT_2:3;
take D18;
thus L213: thesis by L207;
end;
L214: (for B64 , B65 being non  empty  finite set holds (for B66 being (Probability of ( Trivial-SigmaField B64 )) holds (for B67 being (Probability of ( Trivial-SigmaField B65 )) holds (for B68 , B69 being (Function of [: B64 , B65 :] , ( REAL )) holds (((for B70 , B71 being set holds ((B70 in B64 & B71 in B65) implies ( B68 . (B70 , B71) ) = ( ( B66 . { B70 } ) * ( B67 . { B71 } ) ))) & (for B72 , B73 being set holds ((B72 in B64 & B73 in B65) implies ( B69 . (B72 , B73) ) = ( ( B66 . { B72 } ) * ( B67 . { B73 } ) )))) implies B68 = B69)))))
proof
let C51 , C52 being non  empty  finite set;
let C53 being (Probability of ( Trivial-SigmaField C51 ));
let C54 being (Probability of ( Trivial-SigmaField C52 ));
let C55 , C56 being (Function of [: C51 , C52 :] , ( REAL ));
assume L215: ((for B74 , B75 being set holds ((B74 in C51 & B75 in C52) implies ( C55 . (B74 , B75) ) = ( ( C53 . { B74 } ) * ( C54 . { B75 } ) ))) & (for B76 , B77 being set holds ((B76 in C51 & B77 in C52) implies ( C56 . (B76 , B77) ) = ( ( C53 . { B76 } ) * ( C54 . { B77 } ) ))));
L216: (( dom C55 ) = [: C51 , C52 :] & ( dom C56 ) = [: C51 , C52 :]) by FUNCT_2:def 1;
L217:
now
let C57 being set;
assume L218: C57 in ( dom C55 );
consider C58 , C59 being set such that L219: (C58 in C51 & C59 in C52 & C57 = [ C58 , C59 ]) by L218 , ZFMISC_1:def 2;
thus L220: ( C55 . C57 ) = ( C55 . (C58 , C59) ) by L219
.= ( ( C53 . { C58 } ) * ( C54 . { C59 } ) ) by L219 , L215
.= ( C56 . (C58 , C59) ) by L219 , L215
.= ( C56 . C57 ) by L219;
end;
thus L221: thesis by L217 , L216 , FUNCT_1:2;
end;
L222: (for B78 , B79 being non  empty  finite set holds (for B80 being (Probability of ( Trivial-SigmaField B78 )) holds (for B81 being (Probability of ( Trivial-SigmaField B79 )) holds (for B82 being (Function of [: B78 , B79 :] , ( REAL )) holds (ex B83 being (Function of ( bool [: B78 , B79 :] ) , ( REAL )) st (for B84 being  finite (Subset of [: B78 , B79 :]) holds ( B83 . B84 ) = ( setopfunc (B84 , [: B78 , B79 :] , ( REAL ) , B82 , ( addreal )) )))))))
proof
let C60 , C61 being non  empty  finite set;
let C62 being (Probability of ( Trivial-SigmaField C60 ));
let C63 being (Probability of ( Trivial-SigmaField C61 ));
let C64 being (Function of [: C60 , C61 :] , ( REAL ));
defpred S1[ set , set ] means (ex B85 being  finite (Subset of [: C60 , C61 :]) st ($1 = B85 & $2 = ( setopfunc (B85 , [: C60 , C61 :] , ( REAL ) , C64 , ( addreal )) )));
L223: (for B86 being set holds (B86 in ( bool [: C60 , C61 :] ) implies (ex B87 being set st (B87 in ( REAL ) & S1[ B86 , B87 ]))))
proof
let C65 being set;
assume L224: C65 in ( bool [: C60 , C61 :] );
reconsider D19 = C65 as  finite (Subset of [: C60 , C61 :]) by L224;
L225: ( setopfunc (D19 , [: C60 , C61 :] , ( REAL ) , C64 , ( addreal )) ) in ( REAL );
thus L226: thesis by L225;
end;
consider C66 being (Function of ( bool [: C60 , C61 :] ) , ( REAL )) such that L227: (for B88 being set holds (B88 in ( bool [: C60 , C61 :] ) implies S1[ B88 , ( C66 . B88 ) ])) from FUNCT_2:sch 1(L223);
take C66;
thus L228: (for B89 being  finite (Subset of [: C60 , C61 :]) holds ( C66 . B89 ) = ( setopfunc (B89 , [: C60 , C61 :] , ( REAL ) , C64 , ( addreal )) ))
proof
let C67 being  finite (Subset of [: C60 , C61 :]);
L229: (ex B90 being  finite (Subset of [: C60 , C61 :]) st (C67 = B90 & ( C66 . C67 ) = ( setopfunc (B90 , [: C60 , C61 :] , ( REAL ) , C64 , ( addreal )) ))) by L227;
thus L230: ( C66 . C67 ) = ( setopfunc (C67 , [: C60 , C61 :] , ( REAL ) , C64 , ( addreal )) ) by L229;
end;

end;
L229: (for B91 , B92 being non  empty  finite set holds (for B93 being (Probability of ( Trivial-SigmaField B91 )) holds (for B94 being (Probability of ( Trivial-SigmaField B92 )) holds (for B95 being (Function of [: B91 , B92 :] , ( REAL )) holds (for B96 , B97 being (Function of ( bool [: B91 , B92 :] ) , ( REAL )) holds (((for B98 being  finite (Subset of [: B91 , B92 :]) holds ( B96 . B98 ) = ( setopfunc (B98 , [: B91 , B92 :] , ( REAL ) , B95 , ( addreal )) )) & (for B99 being  finite (Subset of [: B91 , B92 :]) holds ( B97 . B99 ) = ( setopfunc (B99 , [: B91 , B92 :] , ( REAL ) , B95 , ( addreal )) ))) implies B96 = B97))))))
proof
let C68 , C69 being non  empty  finite set;
let C70 being (Probability of ( Trivial-SigmaField C68 ));
let C71 being (Probability of ( Trivial-SigmaField C69 ));
let C72 being (Function of [: C68 , C69 :] , ( REAL ));
let C73 , C74 being (Function of ( bool [: C68 , C69 :] ) , ( REAL ));
assume L230: (for B100 being  finite (Subset of [: C68 , C69 :]) holds ( C73 . B100 ) = ( setopfunc (B100 , [: C68 , C69 :] , ( REAL ) , C72 , ( addreal )) ));
assume L231: (for B101 being  finite (Subset of [: C68 , C69 :]) holds ( C74 . B101 ) = ( setopfunc (B101 , [: C68 , C69 :] , ( REAL ) , C72 , ( addreal )) ));
L232:
now
let C75 being set;
assume L233: C75 in ( bool [: C68 , C69 :] );
reconsider D20 = C75 as  finite (Subset of [: C68 , C69 :]) by L233;
thus L234: ( C73 . C75 ) = ( setopfunc (D20 , [: C68 , C69 :] , ( REAL ) , C72 , ( addreal )) ) by L230
.= ( C74 . C75 ) by L231;
end;
thus L235: C73 = C74 by L232 , FUNCT_2:12;
end;
L236: (for B102 , B103 being non  empty set holds (for B104 being (Function of B103 , B102) holds (for B105 , B106 being (FinSequence of B103) holds (for B107 , B108 being (FinSequence of B102) holds ((B107 = ( B104 * B105 ) & B108 = ( B104 * B106 )) implies ( B104 * ( B105 ^ B106 ) ) = ( B107 ^ B108 ))))))
proof
let C76 , C77 being non  empty set;
let C78 being (Function of C77 , C76);
let C79 , C80 being (FinSequence of C77);
let C81 , C82 being (FinSequence of C76);
assume L237: (C81 = ( C78 * C79 ) & C82 = ( C78 * C80 ));
L238: (( dom C81 ) = ( dom C79 ) & ( dom C82 ) = ( dom C80 )) by L237 , FINSEQ_3:120;
L239: (( len C81 ) = ( len C79 ) & ( len C82 ) = ( len C80 )) by L237 , FINSEQ_3:120;
L240: ( dom ( C81 ^ C82 ) ) = ( Seg ( ( len C79 ) + ( len C80 ) ) ) by L239 , FINSEQ_1:def 7;
L241: ( dom ( C78 * ( C79 ^ C80 ) ) ) = ( dom ( C79 ^ C80 ) ) by FINSEQ_3:120
.= ( Seg ( ( len C79 ) + ( len C80 ) ) ) by FINSEQ_1:def 7;
L242: (for B109 being set holds (B109 in ( dom ( C78 * ( C79 ^ C80 ) ) ) implies ( ( C81 ^ C82 ) . B109 ) = ( ( C78 * ( C79 ^ C80 ) ) . B109 )))
proof
let C83 being set;
assume L243: C83 in ( dom ( C78 * ( C79 ^ C80 ) ) );
reconsider D21 = C83 as (Element of ( NAT )) by L243;
L244: (1 <= D21 & D21 <= ( ( len C79 ) + ( len C80 ) )) by L243 , L241 , FINSEQ_1:1;
L245: ( ( C78 * ( C79 ^ C80 ) ) . D21 ) = ( C78 . ( ( C79 ^ C80 ) . D21 ) ) by L243 , FINSEQ_3:120;
per cases ;
suppose L246: D21 <= ( len C79 );

L247: D21 in ( Seg ( len C79 ) ) by L246 , L244;
L248: D21 in ( dom C79 ) by L247 , FINSEQ_1:def 3;
thus L249: ( ( C78 * ( C79 ^ C80 ) ) . C83 ) = ( C78 . ( C79 . D21 ) ) by L248 , L245 , FINSEQ_1:def 7
.= ( C81 . D21 ) by L237 , L248 , L238 , FINSEQ_3:120
.= ( ( C81 ^ C82 ) . C83 ) by L248 , L238 , FINSEQ_1:def 7;
end;
suppose L250: (not D21 <= ( len C79 ));

L251: (( len C79 ) < D21 & D21 <= ( len ( C79 ^ C80 ) )) by L250 , L244 , FINSEQ_1:22;
L252: ( ( C79 ^ C80 ) . D21 ) = ( C80 . ( D21 - ( len C79 ) ) ) by L251 , FINSEQ_1:24;
L253: ( D21 - ( len C79 ) ) <= ( ( ( len C79 ) + ( len C80 ) ) - ( len C79 ) ) by L244 , XREAL_1:9;
L254: ( ( len C79 ) - ( len C79 ) ) < ( D21 - ( len C79 ) ) by L250 , XREAL_1:9;
L255: ( D21 - ( len C79 ) ) is (Element of ( NAT )) by L254 , INT_1:3;
L256: 1 <= ( D21 - ( len C79 ) ) by L255 , L254 , NAT_1:14;
L257: ( D21 - ( len C79 ) ) in ( Seg ( len C80 ) ) by L256 , L253 , L255;
L258: ( D21 - ( len C79 ) ) in ( dom C80 ) by L257 , FINSEQ_1:def 3;
L259: (( len C81 ) < D21 & D21 <= ( len ( C81 ^ C82 ) )) by L239 , L250 , L244 , FINSEQ_1:22;
thus L260: ( ( C78 * ( C79 ^ C80 ) ) . C83 ) = ( C82 . ( D21 - ( len C79 ) ) ) by L237 , L258 , L238 , L252 , L245 , FINSEQ_3:120
.= ( ( C81 ^ C82 ) . C83 ) by L259 , L239 , FINSEQ_1:24;
end;
end;
thus L262: thesis by L242 , L240 , L241 , FUNCT_1:2;
end;
theorem
L263: (for B110 being non  empty set holds (for B111 being (Function of B110 , ( REAL )) holds (for B112 being  finite (Subset of B110) holds (ex B113 being (FinSequence of B110) st (B113 is  one-to-one & ( rng B113 ) = B112 & ( setopfunc (B112 , B110 , ( REAL ) , B111 , ( addreal )) ) = ( Sum ( Func_Seq (B111 , B113) ) ))))))
proof
let C84 being non  empty set;
let C85 being (Function of C84 , ( REAL ));
let C86 being  finite (Subset of C84);
L264: ( dom C85 ) = C84 by FUNCT_2:def 1;
consider C87 being (FinSequence of C84) such that L265: (C87 is  one-to-one & ( rng C87 ) = C86 & ( setopfunc (C86 , C84 , ( REAL ) , C85 , ( addreal )) ) = ( ( addreal ) "**" ( Func_Seq (C85 , C87) ) )) by L264 , BHSP_5:def 5;
L266: ( Sum ( Func_Seq (C85 , C87) ) ) = ( ( addreal ) "**" ( Func_Seq (C85 , C87) ) );
thus L267: thesis by L266 , L265;
end;
theorem
L268: (for B114 being non  empty set holds (for B115 being (Function of B114 , ( REAL )) holds (for B116 being  finite (Subset of B114) holds (for B117 being (FinSequence of B114) holds ((B117 is  one-to-one & ( rng B117 ) = B116) implies ( setopfunc (B116 , B114 , ( REAL ) , B115 , ( addreal )) ) = ( Sum ( Func_Seq (B115 , B117) ) ))))))
proof
let C88 being non  empty set;
let C89 being (Function of C88 , ( REAL ));
let C90 being  finite (Subset of C88);
let C91 being (FinSequence of C88);
assume L269: (C91 is  one-to-one & ( rng C91 ) = C90);
L270: ( dom C89 ) = C88 by FUNCT_2:def 1;
thus L271: thesis by L270 , L269 , BHSP_5:def 5;
end;
L272: (for B118 being Function holds (( dom B118 ) = ( Seg 1 ) implies B118 = <* ( B118 . 1 ) *>))
proof
let C92 being Function;
assume L273: ( dom C92 ) = ( Seg 1 );
consider C93 being set such that L274: C93 = ( C92 . 1 );
L275: ( rng C92 ) = { C93 } by L274 , L273 , FINSEQ_1:2 , FUNCT_1:4;
L276: C92 is  FinSequence-like by L273 , FINSEQ_1:def 2;
consider C94 being FinSequence such that L277: C94 = C92 by L276;
thus L278: thesis by L274 , L277 , L275 , L273 , FINSEQ_1:38;
end;
theorem
L279: (for B119 , B120 being non  empty set holds (for B121 being (Function of B119 , ( REAL )) holds (for B122 being (Function of B120 , ( REAL )) holds (for B123 being (Function of [: B119 , B120 :] , ( REAL )) holds (for B124 being non  empty  finite (Subset of B119) holds (for B125 being (FinSequence of B119) holds ((B125 is  one-to-one & ( rng B125 ) = B124) implies (for B126 being (FinSequence of B120) holds (for B127 being (FinSequence of [: B119 , B120 :]) holds (for B128 being non  empty  finite (Subset of B120) holds (for B129 being  finite (Subset of [: B119 , B120 :]) holds ((B126 is  one-to-one & ( rng B126 ) = B128 & B127 is  one-to-one & ( rng B127 ) = B129 & B129 = [: B124 , B128 :] & (for B130 , B131 being set holds ((B130 in B124 & B131 in B128) implies ( B123 . (B130 , B131) ) = ( ( B121 . B130 ) * ( B122 . B131 ) )))) implies ( Sum ( Func_Seq (B123 , B127) ) ) = ( ( Sum ( Func_Seq (B121 , B125) ) ) * ( Sum ( Func_Seq (B122 , B126) ) ) )))))))))))))
proof
let C95 , C96 being non  empty set;
let C97 being (Function of C95 , ( REAL ));
let C98 being (Function of C96 , ( REAL ));
let C99 being (Function of [: C95 , C96 :] , ( REAL ));
let C100 being non  empty  finite (Subset of C95);
let C101 being (FinSequence of C95);
assume L280: (C101 is  one-to-one & ( rng C101 ) = C100);
defpred S2[ Nat ] means (for B132 being (FinSequence of C96) holds (for B133 being (FinSequence of [: C95 , C96 :]) holds (for B134 being non  empty  finite (Subset of C96) holds (for B135 being  finite (Subset of [: C95 , C96 :]) holds ((( len B132 ) = $1 & B132 is  one-to-one & ( rng B132 ) = B134 & B133 is  one-to-one & ( rng B133 ) = B135 & B135 = [: C100 , B134 :] & (for B136 , B137 being set holds ((B136 in C100 & B137 in B134) implies ( C99 . (B136 , B137) ) = ( ( C97 . B136 ) * ( C98 . B137 ) )))) implies ( Sum ( Func_Seq (C99 , B133) ) ) = ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( Sum ( Func_Seq (C98 , B132) ) ) ))))));
consider C102 being set such that L281: C102 in ( rng C101 ) by L280 , XBOOLE_0:def 1;
L282: (ex B138 being set st (B138 in ( dom C101 ) & C102 = ( C101 . B138 ))) by L281 , FUNCT_1:def 3;
L283: S2[ ( 0 ) ]
proof
let C103 being (FinSequence of C96);
let C104 being (FinSequence of [: C95 , C96 :]);
let C105 being non  empty  finite (Subset of C96);
let C106 being  finite (Subset of [: C95 , C96 :]);
assume L284: (( len C103 ) = ( 0 ) & C103 is  one-to-one & ( rng C103 ) = C105 & C104 is  one-to-one & ( rng C104 ) = C106 & C106 = [: C100 , C105 :] & (for B139 , B140 being set holds ((B139 in C100 & B140 in C105) implies ( C99 . (B139 , B140) ) = ( ( C97 . B139 ) * ( C98 . B140 ) ))));
L285: C103 = ( {} ) by L284;
thus L286: ( Sum ( Func_Seq (C99 , C104) ) ) = ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( Sum ( Func_Seq (C98 , C103) ) ) ) by L285 , L284;
end;
L287: S2[ 1 ]
proof
let C107 being (FinSequence of C96);
let C108 being (FinSequence of [: C95 , C96 :]);
let C109 being non  empty  finite (Subset of C96);
let C110 being  finite (Subset of [: C95 , C96 :]);
assume L288: (( len C107 ) = 1 & C107 is  one-to-one & ( rng C107 ) = C109 & C108 is  one-to-one & ( rng C108 ) = C110 & C110 = [: C100 , C109 :] & (for B141 , B142 being set holds ((B141 in C100 & B142 in C109) implies ( C99 . (B141 , B142) ) = ( ( C97 . B141 ) * ( C98 . B142 ) ))));
L289: C107 = <* ( C107 . 1 ) *> by L288 , FINSEQ_1:40;
L290: C109 = { ( C107 . 1 ) } by L289 , L288 , FINSEQ_1:38;
set D22 = ( C107 . 1 );
set D23 = ( ( C98 * C107 ) . 1 );
L291: ( dom C98 ) = C96 by FUNCT_2:def 1;
L292: ( rng C107 ) c= ( dom C98 ) by L291;
L293: ( dom ( C98 * C107 ) ) = ( dom C107 ) by L292 , RELAT_1:27;
L294: ( dom ( C98 * C107 ) ) = ( Seg 1 ) by L293 , L289 , FINSEQ_1:38;
L295: ( Func_Seq (C98 , C107) ) = <* D23 *> by L294 , L272;
L296: ( Sum ( Func_Seq (C98 , C107) ) ) = D23 by L295 , RVSUM_1:73;
L297: C110 = [: C100 , { D22 } :] by L288 , L289 , FINSEQ_1:38;
L298: ( len C101 ) = ( card C100 ) by L280 , FINSEQ_4:62;
L299: ( len C108 ) = ( card ( rng C108 ) ) by L288 , FINSEQ_4:62
.= ( card C100 ) by L297 , L288 , CARD_1:69;
L300: ( dom C101 ) = ( Seg ( card C100 ) ) by L298 , FINSEQ_1:def 3
.= ( dom C108 ) by L299 , FINSEQ_1:def 3;
deffunc H2(Nat) = [ ( C101 . $1 ) , D22 ];
consider C111 being FinSequence such that L301: ( len C111 ) = ( len C108 ) and L302: (for B143 being Nat holds (B143 in ( dom C111 ) implies ( C111 . B143 ) = H2(B143))) from FINSEQ_1:sch 2;
L303: ( dom C111 ) = ( Seg ( len C108 ) ) by L301 , FINSEQ_1:def 3;
L304: ( dom C108 ) = ( Seg ( len C108 ) ) by FINSEQ_1:def 3;
L305:
now
let C112 being Nat;
assume L306: C112 in ( dom C111 );
L307: ( C101 . C112 ) in C100 by L306 , L280 , L303 , L304 , L300 , FUNCT_1:3;
L308: ( C107 . 1 ) in C109 by L290 , TARSKI:def 1;
L309: [ ( C101 . C112 ) , D22 ] in [: C100 , C109 :] by L308 , L307 , ZFMISC_1:87;
thus L310: ( C111 . C112 ) in [: C100 , C109 :] by L309 , L306 , L302;
end;
L311: C111 is (FinSequence of [: C100 , C109 :]) by L305 , FINSEQ_2:12;
L312: ( rng C111 ) c= [: C100 , C109 :] by L311 , FINSEQ_1:def 4;
L313: [: C100 , C109 :] c= [: C95 , C96 :] by ZFMISC_1:96;
L314: ( rng C111 ) c= [: C95 , C96 :] by L313 , L312 , XBOOLE_1:1;
reconsider D24 = C111 as (FinSequence of [: C95 , C96 :]) by L314 , FINSEQ_1:def 4;
L315:
now
let C113 , C114 being set;
assume L316: (C113 in ( dom D24 ) & C114 in ( dom D24 ) & ( D24 . C113 ) = ( D24 . C114 ));
L317: (C113 in ( dom C101 ) & C114 in ( dom C101 )) by L316 , L301 , L304 , L300 , FINSEQ_1:def 3;
reconsider D25 = C113 , D26 = C114 as (Element of ( NAT )) by L316;
L318: [ ( C101 . D25 ) , D22 ] = ( D24 . D25 ) by L302 , L316
.= [ ( C101 . D26 ) , D22 ] by L302 , L316;
L319: ( C101 . D25 ) = ( C101 . D26 ) by L318 , XTUPLE_0:1;
thus L320: C113 = C114 by L319 , L280 , L317 , FUNCT_1:def 4;
end;
L321: D24 is  one-to-one by L315 , FUNCT_1:def 4;
L322: ( rng D24 ) = [: C100 , C109 :]
proof
L323:
now
let C115 being set;
assume L324: C115 in [: C100 , C109 :];
consider C116 , C117 being set such that L325: (C116 in C100 & C117 in C109 & C115 = [ C116 , C117 ]) by L324 , ZFMISC_1:def 2;
consider C118 being set such that L326: (C118 in ( dom C101 ) & C116 = ( C101 . C118 )) by L280 , L325 , FUNCT_1:def 3;
reconsider D27 = C118 as (Element of ( NAT )) by L326;
L327: D27 in ( dom D24 ) by L326 , L301 , L304 , L300 , FINSEQ_1:def 3;
L328: C117 = D22 by L290 , L325 , TARSKI:def 1;
L329: ( D24 . D27 ) = C115 by L328 , L325 , L326 , L302 , L327;
thus L330: C115 in ( rng D24 ) by L329 , L327 , FUNCT_1:3;
end;
L331: [: C100 , C109 :] c= ( rng D24 ) by L323 , TARSKI:def 3;
thus L332: thesis by L331 , L312 , XBOOLE_0:def 10;
end;
consider C119 being (Permutation of ( dom C108 )) such that L333: (D24 = ( C108 * C119 ) & ( dom C119 ) = ( dom C108 ) & ( rng C119 ) = ( dom C108 )) by L322 , L321 , L288 , BHSP_5:1;
L334: ( Func_Seq (C99 , D24) ) = ( ( Func_Seq (C99 , C108) ) * C119 ) by L333 , RELAT_1:36;
L335: ( dom C99 ) = [: C95 , C96 :] by FUNCT_2:def 1;
L336: ( rng C108 ) c= ( dom C99 ) by L335;
L337: ( dom ( Func_Seq (C99 , C108) ) ) = ( dom C108 ) by L336 , RELAT_1:27;
L338: ( Sum ( Func_Seq (C99 , D24) ) ) = ( Sum ( Func_Seq (C99 , C108) ) ) by L337 , L334 , FINSOP_1:7;
L339: ( dom C99 ) = [: C95 , C96 :] by FUNCT_2:def 1;
L340: ( dom C97 ) = C95 by FUNCT_2:def 1;
L341: ( dom ( C97 * C101 ) ) = ( dom C101 ) by L340 , L280 , RELAT_1:27
.= ( Seg ( len C101 ) ) by FINSEQ_1:def 3;
L342: ( dom ( C99 * D24 ) ) = ( dom D24 ) by L339 , L322 , RELAT_1:27
.= ( Seg ( len C101 ) ) by L298 , L299 , L301 , FINSEQ_1:def 3;
L343: ( dom ( C99 * D24 ) ) = ( dom ( D23 (#) ( C97 * C101 ) ) ) by L342 , L341 , VALUED_1:def 5;
L344:
now
let C120 being set;
assume L345: C120 in ( dom ( C99 * D24 ) );
reconsider D28 = C120 as (Element of ( NAT )) by L345;
L346: ( dom ( C99 * D24 ) ) = ( dom D24 ) by L339 , L322 , RELAT_1:27
.= ( Seg ( len D24 ) ) by FINSEQ_1:def 3;
L347: D28 in ( dom D24 ) by L346 , L345 , FINSEQ_1:def 3;
L348: (1 <= D28 & D28 <= ( len C101 )) by L345 , L342 , FINSEQ_1:1;
L349: ( C101 /. D28 ) = ( C101 . D28 ) by L348 , FINSEQ_4:15;
L350: ( D24 . D28 ) = [ ( C101 . D28 ) , D22 ] by L302 , L347;
L351: D28 in ( dom C101 ) by L345 , L342 , FINSEQ_1:def 3;
L352: ( D24 . D28 ) = [ ( C101 /. D28 ) , D22 ] by L351 , L350 , PARTFUN1:def 6;
L353: ( C101 . D28 ) in C100 by L351 , L280 , FUNCT_1:3;
L354: (( C101 /. D28 ) in C100 & D22 in C109) by L353 , L351 , L290 , PARTFUN1:def 6 , TARSKI:def 1;
L355: 1 in ( dom ( C98 * C107 ) ) by L294;
L356: D23 = ( C98 . D22 ) by L355 , FUNCT_1:12;
thus L357: ( ( C99 * D24 ) . C120 ) = ( C99 . (( C101 /. D28 ) , D22) ) by L352 , L345 , FUNCT_1:12
.= ( ( C97 . ( C101 /. D28 ) ) * D23 ) by L356 , L288 , L354
.= ( ( ( C97 * C101 ) . D28 ) * D23 ) by L349 , L342 , L341 , L345 , FUNCT_1:12
.= ( ( D23 (#) ( C97 * C101 ) ) . C120 ) by VALUED_1:6;
end;
L358: ( Func_Seq (C99 , D24) ) = ( D23 * ( Func_Seq (C97 , C101) ) ) by L344 , L343 , FUNCT_1:2;
thus L359: thesis by L358 , L296 , L338 , RVSUM_1:87;
end;
L360: (for B144 being (Element of ( NAT )) holds (S2[ B144 ] implies S2[ ( B144 + 1 ) ]))
proof
let C121 being (Element of ( NAT ));
assume L361: S2[ C121 ];
L362:
now
per cases ;
case L363: C121 = ( 0 );
thus L364: S2[ ( C121 + 1 ) ] by L363 , L287;
end;
case L365: C121 > ( 0 );
L366:
now
let C122 being (FinSequence of C96);
let C123 being (FinSequence of [: C95 , C96 :]);
let C124 being non  empty  finite (Subset of C96);
let C125 being  finite (Subset of [: C95 , C96 :]);
assume L367: (( len C122 ) = ( C121 + 1 ) & C122 is  one-to-one & ( rng C122 ) = C124 & C123 is  one-to-one & ( rng C123 ) = C125 & C125 = [: C100 , C124 :] & (for B145 , B146 being set holds ((B145 in C100 & B146 in C124) implies ( C99 . (B145 , B146) ) = ( ( C97 . B145 ) * ( C98 . B146 ) ))));
set D29 = ( len C101 );
set D30 = ( len C122 );
deffunc H3(Nat) = [ ( C101 . ( ( ( $1 -' 1 ) mod D29 ) + 1 ) ) , ( C122 . ( ( ( $1 -' 1 ) div D29 ) + 1 ) ) ];
consider C126 being FinSequence such that L368: ( len C126 ) = ( D30 * D29 ) and L369: (for B147 being Nat holds (B147 in ( dom C126 ) implies ( C126 . B147 ) = H3(B147))) from FINSEQ_1:sch 2;
L370: ( dom C126 ) = ( Seg ( D30 * D29 ) ) by L368 , FINSEQ_1:def 3;
L371: ( dom C101 ) = ( Seg D29 ) by FINSEQ_1:def 3;
L372:
now
reconsider D31 = D30 , D32 = D29 as Nat;
let C127 being Nat;
set D33 = ( ( ( C127 -' 1 ) div D29 ) + 1 );
set D34 = ( ( ( C127 -' 1 ) mod D29 ) + 1 );
assume L373: C127 in ( dom C126 );
L374: C127 in ( Seg ( D30 * D29 ) ) by L373 , L368 , FINSEQ_1:def 3;
L375: C127 <= ( D30 * D29 ) by L374 , FINSEQ_1:1;
L376: ( C127 -' 1 ) <= ( ( D30 * D29 ) -' 1 ) by L375 , NAT_D:42;
L377: ( ( C127 -' 1 ) div D29 ) <= ( ( ( D30 * D29 ) -' 1 ) div D29 ) by L376 , NAT_2:24;
L378: 1 <= C127 by L374 , FINSEQ_1:1;
L379: (D32 divides ( D31 * D32 ) & 1 <= ( D30 * D29 )) by L378 , L375 , NAT_D:def 3 , XXREAL_0:2;
L380: D29 <> ( 0 ) by L374;
L381: D29 >= ( ( 0 ) + 1 ) by L380 , NAT_1:13;
L382: ( ( ( D31 * D32 ) -' 1 ) div D32 ) = ( ( ( D31 * D32 ) div D32 ) - 1 ) by L381 , L379 , NAT_2:15;
L383: ( ( ( C127 -' 1 ) div D29 ) + 1 ) <= ( ( D30 * D29 ) div D29 ) by L382 , L377 , XREAL_1:19;
reconsider D35 = D30 , D36 = D29 as Nat;
L384: (D33 >= ( ( 0 ) + 1 ) & D33 <= D35) by L380 , L383 , NAT_D:18 , XREAL_1:6;
L385: D33 in ( Seg D35 ) by L384;
thus L386: D33 in ( dom C122 ) by L385 , FINSEQ_1:def 3;
L387: ( ( C127 -' 1 ) mod D36 ) < D36 by L380 , NAT_D:1;
L388: (D34 >= ( ( 0 ) + 1 ) & D34 <= D36) by L387 , NAT_1:13;
L389: D34 in ( Seg D36 ) by L388;
thus L390: D34 in ( dom C101 ) by L389 , FINSEQ_1:def 3;
end;
L391:
now
let C128 being Nat;
set D37 = ( ( ( C128 -' 1 ) div D29 ) + 1 );
set D38 = ( ( ( C128 -' 1 ) mod D29 ) + 1 );
assume L392: C128 in ( dom C126 );
L393: ( C122 . D37 ) in ( rng C122 ) by L392 , L372 , FUNCT_1:3;
L394: ( C101 . D38 ) in ( rng C101 ) by L372 , L392 , FUNCT_1:3;
L395: [ ( C101 . D38 ) , ( C122 . D37 ) ] in [: C95 , C96 :] by L394 , L393 , ZFMISC_1:87;
thus L396: ( C126 . C128 ) in [: C95 , C96 :] by L395 , L369 , L392;
end;
reconsider D39 = C126 as (FinSequence of [: C95 , C96 :]) by L391 , FINSEQ_2:12;
L397: ( len C101 ) = ( card C100 ) by L280 , FINSEQ_4:62;
L398:
now
let C129 , C130 being set;
assume L399: (C129 in ( dom D39 ) & C130 in ( dom D39 ) & ( D39 . C129 ) = ( D39 . C130 ));
L400: (C129 in ( Seg ( len D39 ) ) & C130 in ( Seg ( len D39 ) )) by L399 , FINSEQ_1:def 3;
reconsider D40 = C129 , D41 = C130 as (Element of ( NAT )) by L399;
L401: ( D39 . D40 ) = [ ( C101 . ( ( ( D40 -' 1 ) mod D29 ) + 1 ) ) , ( C122 . ( ( ( D40 -' 1 ) div D29 ) + 1 ) ) ] by L369 , L399;
L402: ( D39 . D41 ) = [ ( C101 . ( ( ( D41 -' 1 ) mod D29 ) + 1 ) ) , ( C122 . ( ( ( D41 -' 1 ) div D29 ) + 1 ) ) ] by L369 , L399;
L403: ( C101 . ( ( ( D40 -' 1 ) mod D29 ) + 1 ) ) = ( C101 . ( ( ( D41 -' 1 ) mod D29 ) + 1 ) ) by L402 , L399 , L401 , XTUPLE_0:1;
L404: (( ( ( D40 -' 1 ) mod D29 ) + 1 ) in ( dom C101 ) & ( ( ( D41 -' 1 ) mod D29 ) + 1 ) in ( dom C101 )) by L399 , L372;
L405: ( ( ( D40 -' 1 ) mod D29 ) + 1 ) = ( ( ( D41 -' 1 ) mod D29 ) + 1 ) by L404 , L280 , L403 , FUNCT_1:def 4;
L406: ( C122 . ( ( ( D40 -' 1 ) div D29 ) + 1 ) ) = ( C122 . ( ( ( D41 -' 1 ) div D29 ) + 1 ) ) by L399 , L401 , L402 , XTUPLE_0:1;
L407: (( ( ( D40 -' 1 ) div D29 ) + 1 ) in ( dom C122 ) & ( ( ( D41 -' 1 ) div D29 ) + 1 ) in ( dom C122 )) by L399 , L372;
L408: ( ( ( D40 -' 1 ) div D29 ) + 1 ) = ( ( ( D41 -' 1 ) div D29 ) + 1 ) by L407 , L367 , L406 , FUNCT_1:def 4;
L409: D40 = D41
proof
L410: (1 <= D40 & D40 <= ( len D39 )) by L400 , FINSEQ_1:1;
L411: (1 <= D41 & D41 <= ( len D39 )) by L400 , FINSEQ_1:1;
L412: ( 0 ) < D29 by L371 , L282;
L413: (( D40 -' 1 ) = ( ( D29 * ( ( D40 -' 1 ) div D29 ) ) + ( ( D40 -' 1 ) mod D29 ) ) & ( D41 -' 1 ) = ( ( D29 * ( ( D40 -' 1 ) div D29 ) ) + ( ( D40 -' 1 ) mod D29 ) )) by L412 , L405 , L408 , NAT_D:2;
L414: ( ( D40 -' 1 ) + 1 ) = ( ( D40 + 1 ) -' 1 ) by L410 , NAT_D:38
.= D40 by NAT_D:34;
L415: ( ( D41 -' 1 ) + 1 ) = ( ( D41 + 1 ) -' 1 ) by L411 , NAT_D:38
.= D41 by NAT_D:34;
thus L416: thesis by L415 , L413 , L414;
end;
thus L417: C129 = C130 by L409;
end;
L418: D39 is  one-to-one by L398 , FUNCT_1:def 4;
L419: ( rng D39 ) = [: C100 , C124 :]
proof
L420:
now
let C131 being set;
assume L421: C131 in [: C100 , C124 :];
consider C132 , C133 being set such that L422: (C132 in C100 & C133 in C124 & C131 = [ C132 , C133 ]) by L421 , ZFMISC_1:def 2;
consider C134 being set such that L423: (C134 in ( dom C101 ) & C132 = ( C101 . C134 )) by L280 , L422 , FUNCT_1:def 3;
L424: C134 in ( Seg ( len C101 ) ) by L423 , FINSEQ_1:def 3;
reconsider D42 = C134 as (Element of ( NAT )) by L423;
consider C135 being set such that L425: (C135 in ( dom C122 ) & C133 = ( C122 . C135 )) by L367 , L422 , FUNCT_1:def 3;
L426: C135 in ( Seg ( len C122 ) ) by L425 , FINSEQ_1:def 3;
reconsider D43 = C135 as (Element of ( NAT )) by L425;
L427: (1 <= D42 & D42 <= ( len C101 )) by L424 , FINSEQ_1:1;
L428: (1 <= D43 & D43 <= ( len C122 )) by L426 , FINSEQ_1:1;
reconsider D44 = ( D42 - 1 ) as (Element of ( NAT )) by L427 , INT_1:5;
reconsider D45 = ( D43 - 1 ) as (Element of ( NAT )) by L428 , INT_1:5;
set D46 = ( D44 + ( D29 * D45 ) );
L429: D44 <= ( ( len C101 ) - 1 ) by L427 , XREAL_1:9;
L430: ( ( len C101 ) - 1 ) < ( len C101 ) by XREAL_1:44;
L431: D44 < ( len C101 ) by L430 , L429 , XXREAL_0:2;
L432: ( D46 div D29 ) = ( ( D44 div D29 ) + D45 ) by L397 , NAT_D:61
.= ( ( 0 ) + D45 ) by L431 , NAT_D:27
.= D45;
L433: ( D46 mod D29 ) = ( D44 mod D29 ) by NAT_D:61
.= D44 by L431 , NAT_D:24;
set D47 = ( D46 + 1 );
L434: 1 <= D47 by NAT_1:14;
L435: ( D47 -' 1 ) = ( D47 - 1 ) by NAT_1:14 , XREAL_1:233
.= D46;
L436: D42 = ( ( ( D47 -' 1 ) mod D29 ) + 1 ) by L435 , L433;
L437: D43 = ( ( ( D47 -' 1 ) div D29 ) + 1 ) by L435 , L432;
L438: ( ( D44 + 1 ) + ( D29 * D45 ) ) <= ( ( len C101 ) + ( D29 * D45 ) ) by L427 , XREAL_1:6;
L439: D45 <= ( ( len C122 ) - 1 ) by L428 , XREAL_1:9;
L440: ( D29 * D45 ) <= ( D29 * ( ( len C122 ) - 1 ) ) by L439 , XREAL_1:64;
L441: ( ( len C101 ) + ( D29 * D45 ) ) <= ( ( len C101 ) + ( D29 * ( ( len C122 ) - 1 ) ) ) by L440 , XREAL_1:6;
L442: D47 <= ( D29 * D30 ) by L441 , L438 , XXREAL_0:2;
L443: D47 in ( Seg ( len C126 ) ) by L442 , L368 , L434;
L444: D47 in ( dom C126 ) by L443 , FINSEQ_1:def 3;
L445: ( D39 . D47 ) = C131 by L444 , L422 , L423 , L425 , L369 , L436 , L437;
thus L446: C131 in ( rng D39 ) by L445 , L444 , FUNCT_1:3;
end;
L447: [: C100 , C124 :] c= ( rng D39 ) by L420 , TARSKI:def 3;
L448:
now
let C136 being set;
assume L449: C136 in ( rng D39 );
consider C137 being set such that L450: (C137 in ( dom D39 ) & C136 = ( D39 . C137 )) by L449 , FUNCT_1:def 3;
reconsider D48 = C137 as (Element of ( NAT )) by L450;
L451: C136 = [ ( C101 . ( ( ( D48 -' 1 ) mod D29 ) + 1 ) ) , ( C122 . ( ( ( D48 -' 1 ) div D29 ) + 1 ) ) ] by L450 , L369;
L452: ( C101 . ( ( ( D48 -' 1 ) mod D29 ) + 1 ) ) in C100 by L280 , L450 , L372 , FUNCT_1:3;
L453: ( ( ( D48 -' 1 ) div D29 ) + 1 ) in ( dom C122 ) by L450 , L372;
L454: ( C122 . ( ( ( D48 -' 1 ) div D29 ) + 1 ) ) in C124 by L453 , L367 , FUNCT_1:3;
thus L455: C136 in [: C100 , C124 :] by L454 , L451 , L452 , ZFMISC_1:def 2;
end;
L456: ( rng D39 ) c= [: C100 , C124 :] by L448 , TARSKI:def 3;
thus L457: thesis by L456 , L447 , XBOOLE_0:def 10;
end;
set D49 = ( D39 | ( D29 * C121 ) );
L458: ( D29 * C121 ) <= ( D29 * D30 ) by L367 , NAT_1:11 , XREAL_1:64;
L459: ( len D49 ) = ( D29 * C121 ) by L458 , L368 , FINSEQ_1:17;
set D50 = ( D39 /^ ( D29 * C121 ) );
reconsider D51 = D49 as (FinSequence of [: C95 , C96 :]);
reconsider D52 = D50 as (FinSequence of [: C95 , C96 :]);
L460: D39 = ( D51 ^ D52 ) by RFINSEQ:8;
set D53 = ( C122 | C121 );
reconsider D54 = D53 as (FinSequence of C96);
L461: ( len D54 ) = C121 by L367 , FINSEQ_3:53;
L462: ( dom D54 ) is non  empty by L461 , L365 , FINSEQ_1:def 3;
L463: D54 is  one-to-one by L367 , FUNCT_1:52;
reconsider D55 = ( rng D54 ) as non  empty  finite (Subset of C96) by L462 , RELAT_1:42;
L464: D51 is  one-to-one by L418 , FUNCT_1:52;
L465: ( rng D51 ) = [: C100 , D55 :]
proof
L466:
now
let C138 being set;
assume L467: C138 in [: C100 , D55 :];
consider C139 , C140 being set such that L468: (C139 in C100 & C140 in D55 & C138 = [ C139 , C140 ]) by L467 , ZFMISC_1:def 2;
consider C141 being set such that L469: (C141 in ( dom C101 ) & C139 = ( C101 . C141 )) by L280 , L468 , FUNCT_1:def 3;
L470: C141 in ( Seg ( len C101 ) ) by L469 , FINSEQ_1:def 3;
reconsider D56 = C141 as (Element of ( NAT )) by L469;
consider C142 being set such that L471: (C142 in ( dom D54 ) & C140 = ( D54 . C142 )) by L468 , FUNCT_1:def 3;
L472: C142 in ( Seg ( len D54 ) ) by L471 , FINSEQ_1:def 3;
reconsider D57 = C142 as (Element of ( NAT )) by L471;
L473: C140 = ( C122 . D57 ) by L471 , FUNCT_1:47;
L474: (1 <= D56 & D56 <= ( len C101 )) by L470 , FINSEQ_1:1;
L475: (1 <= D57 & D57 <= ( len D54 )) by L472 , FINSEQ_1:1;
reconsider D58 = ( D56 - 1 ) as (Element of ( NAT )) by L474 , INT_1:5;
reconsider D59 = ( D57 - 1 ) as (Element of ( NAT )) by L475 , INT_1:5;
set D60 = ( D58 + ( D29 * D59 ) );
L476: D58 <= ( ( len C101 ) - 1 ) by L474 , XREAL_1:9;
L477: ( ( len C101 ) - 1 ) < ( len C101 ) by XREAL_1:44;
L478: D58 < ( len C101 ) by L477 , L476 , XXREAL_0:2;
L479: ( D60 div D29 ) = ( ( D58 div D29 ) + D59 ) by L397 , NAT_D:61
.= ( ( 0 ) + D59 ) by L478 , NAT_D:27
.= D59;
L480: ( D60 mod D29 ) = ( D58 mod D29 ) by NAT_D:61
.= D58 by L478 , NAT_D:24;
set D61 = ( D60 + 1 );
L481: 1 <= D61 by NAT_1:14;
L482: ( D61 -' 1 ) = ( D61 - 1 ) by NAT_1:14 , XREAL_1:233
.= D60;
L483: D56 = ( ( ( D61 -' 1 ) mod D29 ) + 1 ) by L482 , L480;
L484: D57 = ( ( ( D61 -' 1 ) div D29 ) + 1 ) by L482 , L479;
L485: ( ( D58 + 1 ) + ( D29 * D59 ) ) <= ( ( len C101 ) + ( D29 * D59 ) ) by L474 , XREAL_1:6;
L486: D59 <= ( ( len D54 ) - 1 ) by L475 , XREAL_1:9;
L487: ( D29 * D59 ) <= ( D29 * ( ( len D54 ) - 1 ) ) by L486 , XREAL_1:64;
L488: ( ( len C101 ) + ( D29 * D59 ) ) <= ( ( len C101 ) + ( D29 * ( ( len D54 ) - 1 ) ) ) by L487 , XREAL_1:6;
L489: D61 <= ( D29 * C121 ) by L488 , L485 , L461 , XXREAL_0:2;
L490: D61 in ( Seg ( len D51 ) ) by L489 , L481 , L459;
L491: D61 in ( dom D51 ) by L490 , FINSEQ_1:def 3;
L492: D61 in ( dom D39 ) by L491 , RELAT_1:57;
L493: ( D51 . D61 ) = ( D39 . D61 ) by L491 , FUNCT_1:47
.= C138 by L468 , L469 , L473 , L369 , L492 , L483 , L484;
thus L494: C138 in ( rng D51 ) by L493 , L491 , FUNCT_1:3;
end;
L495: [: C100 , D55 :] c= ( rng D51 ) by L466 , TARSKI:def 3;
L496:
now
let C143 being set;
assume L497: C143 in ( rng D51 );
consider C144 being set such that L498: (C144 in ( dom D51 ) & C143 = ( D51 . C144 )) by L497 , FUNCT_1:def 3;
L499: C144 in ( Seg ( len D51 ) ) by L498 , FINSEQ_1:def 3;
reconsider D62 = C144 as (Element of ( NAT )) by L498;
L500: D62 in ( dom D39 ) by L498 , RELAT_1:57;
L501: C143 = ( D39 . D62 ) by L498 , FUNCT_1:47;
L502: C143 = [ ( C101 . ( ( ( D62 -' 1 ) mod D29 ) + 1 ) ) , ( C122 . ( ( ( D62 -' 1 ) div D29 ) + 1 ) ) ] by L501 , L369 , L500;
L503: ( C101 . ( ( ( D62 -' 1 ) mod D29 ) + 1 ) ) in C100 by L280 , L500 , L372 , FUNCT_1:3;
L504: (1 <= D62 & D62 <= ( D29 * C121 )) by L499 , L459 , FINSEQ_1:1;
L505: D29 divides ( D29 * C121 ) by INT_1:def 3;
L506: 1 <= D29 by L397 , NAT_1:14;
L507: 1 <= ( D29 * C121 ) by L397 , L365 , NAT_1:14;
L508: ( ( ( D29 * C121 ) -' 1 ) div D29 ) = ( ( ( D29 * C121 ) div D29 ) - 1 ) by L507 , L505 , L506 , NAT_2:15
.= ( C121 - 1 ) by L397 , NAT_D:20;
L509: ( D62 -' 1 ) <= ( ( D29 * C121 ) -' 1 ) by L504 , NAT_D:42;
L510: ( ( D62 -' 1 ) div D29 ) <= ( ( ( D29 * C121 ) -' 1 ) div D29 ) by L509 , NAT_2:24;
L511: ( ( ( D62 -' 1 ) div D29 ) + 1 ) <= ( ( C121 - 1 ) + 1 ) by L510 , L508 , XREAL_1:6;
L512: ( ( ( D62 -' 1 ) div D29 ) + 1 ) in ( dom C122 ) by L500 , L372;
L513: ( ( ( D62 -' 1 ) div D29 ) + 1 ) in ( Seg ( len C122 ) ) by L512 , FINSEQ_1:def 3;
L514: (1 <= ( ( ( D62 -' 1 ) div D29 ) + 1 ) & ( ( ( D62 -' 1 ) div D29 ) + 1 ) <= C121) by L513 , L511 , FINSEQ_1:1;
L515: ( ( ( D62 -' 1 ) div D29 ) + 1 ) in ( Seg C121 ) by L514;
L516: ( ( ( D62 -' 1 ) div D29 ) + 1 ) in ( dom C122 ) by L500 , L372;
L517: ( ( ( D62 -' 1 ) div D29 ) + 1 ) in ( dom D54 ) by L516 , L515 , RELAT_1:57;
L518: ( D54 . ( ( ( D62 -' 1 ) div D29 ) + 1 ) ) in D55 by L517 , FUNCT_1:3;
L519: ( C122 . ( ( ( D62 -' 1 ) div D29 ) + 1 ) ) in D55 by L518 , L517 , FUNCT_1:47;
thus L520: C143 in [: C100 , D55 :] by L519 , L502 , L503 , ZFMISC_1:def 2;
end;
L521: ( rng D51 ) c= [: C100 , D55 :] by L496 , TARSKI:def 3;
thus L522: thesis by L521 , L495 , XBOOLE_0:def 10;
end;
L523:
now
let C145 , C146 being set;
assume L524: (C145 in C100 & C146 in D55);
L525: D55 c= ( rng C122 ) by RELAT_1:70;
thus L526: ( C99 . (C145 , C146) ) = ( ( C97 . C145 ) * ( C98 . C146 ) ) by L525 , L367 , L524;
end;
L527: ( Sum ( Func_Seq (C99 , D51) ) ) = ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( Sum ( Func_Seq (C98 , D54) ) ) ) by L523 , L361 , L463 , L464 , L465 , L461;
L528: ( dom C97 ) = C95 by FUNCT_2:def 1;
L529: ( dom ( C97 * C101 ) ) = ( dom C101 ) by L528 , L280 , RELAT_1:27
.= ( Seg ( len C101 ) ) by FINSEQ_1:def 3;
L530: ( dom C99 ) = [: C95 , C96 :] by FUNCT_2:def 1;
L531: ( len D39 ) = ( ( C121 * D29 ) + D29 ) by L367 , L368;
L532: ( C121 * D29 ) <= ( len D39 ) by L531 , NAT_1:11;
L533: ( len D52 ) = ( ( len D39 ) - ( D29 * C121 ) ) by L532 , RFINSEQ:def 1
.= D29 by L367 , L368;
L534: ([: C100 , C124 :] c= [: C95 , C96 :] & ( rng D52 ) c= ( rng D39 )) by L367 , FINSEQ_5:33;
L535: ( dom ( C99 * D52 ) ) = ( dom D52 ) by L534 , L530 , RELAT_1:27
.= ( Seg ( len C101 ) ) by L533 , FINSEQ_1:def 3;
L536: ( dom ( C99 * D52 ) ) = ( dom ( ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) (#) ( C97 * C101 ) ) ) by L535 , L529 , VALUED_1:def 5;
L537:
now
let C147 being set;
assume L538: C147 in ( dom ( C99 * D52 ) );
reconsider D63 = C147 as (Element of ( NAT )) by L538;
L539: ( dom ( C99 * D52 ) ) = ( dom D52 ) by L530 , L534 , RELAT_1:27
.= ( Seg ( len D52 ) ) by FINSEQ_1:def 3;
L540: (1 <= D63 & D63 <= ( len C101 )) by L538 , L535 , FINSEQ_1:1;
L541: ( C101 /. D63 ) = ( C101 . D63 ) by L540 , FINSEQ_4:15;
L542: (1 <= ( C121 + 1 ) & ( C121 + 1 ) <= ( len C122 )) by L367 , XREAL_1:31;
L543: ( C121 + 1 ) in ( Seg ( len C122 ) ) by L542;
L544: ( C121 + 1 ) in ( dom C122 ) by L543 , FINSEQ_1:def 3;
L545: ( C122 /. ( C121 + 1 ) ) = ( C122 . ( C121 + 1 ) ) by L542 , FINSEQ_4:15;
L546: ( dom C98 ) = C96 by FUNCT_2:def 1;
L547: ( rng C122 ) c= ( dom C98 ) by L546;
L548: ( C121 + 1 ) in ( dom ( C98 * C122 ) ) by L547 , L544 , RELAT_1:27;
L549: ( C98 . ( C122 /. ( C121 + 1 ) ) ) = ( ( C98 * C122 ) . ( C121 + 1 ) ) by L544 , L545 , FUNCT_1:13
.= ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) by L548 , PARTFUN1:def 6;
L550: (1 <= D63 & D63 <= D29) by L539 , L538 , L533 , FINSEQ_1:1;
L551: ( D63 + ( D29 * C121 ) ) <= ( D29 + ( D29 * C121 ) ) by L550 , XREAL_1:6;
L552: D63 <= ( D63 + ( D29 * C121 ) ) by NAT_1:11;
L553: (1 <= ( D63 + ( D29 * C121 ) ) & ( D63 + ( D29 * C121 ) ) <= ( D29 * D30 )) by L552 , L551 , L367 , L550 , XXREAL_0:2;
L554: ( D63 + ( D29 * C121 ) ) in ( dom C126 ) by L553 , L370;
L555: ( D39 . ( D63 + ( D29 * C121 ) ) ) = [ ( C101 . ( ( ( ( D63 + ( D29 * C121 ) ) -' 1 ) mod D29 ) + 1 ) ) , ( C122 . ( ( ( ( D63 + ( D29 * C121 ) ) -' 1 ) div D29 ) + 1 ) ) ] by L554 , L369;
L556: D63 in ( dom D52 ) by L539 , L538 , FINSEQ_1:def 3;
L557: ( ( D63 + ( D29 * C121 ) ) -' 1 ) = ( ( D63 + ( D29 * C121 ) ) - 1 ) by L552 , L550 , XREAL_1:233 , XXREAL_0:2
.= ( ( D63 - 1 ) + ( D29 * C121 ) )
.= ( ( D63 -' 1 ) + ( D29 * C121 ) ) by L540 , XREAL_1:233;
L558: ( D63 - 1 ) < D63 by XREAL_1:44;
L559: ( D63 - 1 ) < D29 by L558 , L550 , XXREAL_0:2;
L560: ( D63 -' 1 ) < D29 by L559 , L540 , XREAL_1:233;
L561: ( ( ( ( D63 -' 1 ) + ( D29 * C121 ) ) div D29 ) + 1 ) = ( ( ( ( D63 -' 1 ) div D29 ) + C121 ) + 1 ) by L397 , NAT_D:61
.= ( ( ( 0 ) + C121 ) + 1 ) by L560 , NAT_D:27;
L562: ( ( ( ( D63 -' 1 ) + ( D29 * C121 ) ) mod D29 ) + 1 ) = ( ( ( D63 -' 1 ) mod D29 ) + 1 ) by NAT_D:61
.= ( ( D63 -' 1 ) + 1 ) by L560 , NAT_D:24
.= ( ( D63 - 1 ) + 1 ) by L540 , XREAL_1:233;
L563: (D63 in ( dom C101 ) & ( C121 + 1 ) in ( dom C122 )) by L538 , L535 , L543 , FINSEQ_1:def 3;
L564: (( C101 /. D63 ) = ( C101 . D63 ) & ( C122 . ( C121 + 1 ) ) = ( C122 /. ( C121 + 1 ) )) by L563 , PARTFUN1:def 6;
L565: ( D52 . D63 ) = [ ( C101 /. D63 ) , ( C122 /. ( C121 + 1 ) ) ] by L564 , L556 , L555 , L532 , L557 , L561 , L562 , RFINSEQ:def 1;
L566: (( C101 . D63 ) in C100 & ( C122 . ( C121 + 1 ) ) in C124) by L563 , L367 , L280 , FUNCT_1:3;
L567: (( C101 /. D63 ) in C100 & ( C122 /. ( C121 + 1 ) ) in C124) by L566 , L563 , PARTFUN1:def 6;
thus L568: ( ( C99 * D52 ) . C147 ) = ( C99 . (( C101 /. D63 ) , ( C122 /. ( C121 + 1 ) )) ) by L565 , L538 , FUNCT_1:12
.= ( ( C97 . ( C101 /. D63 ) ) * ( C98 . ( C122 /. ( C121 + 1 ) ) ) ) by L367 , L567
.= ( ( ( C97 * C101 ) . D63 ) * ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) ) by L549 , L541 , L529 , L538 , L535 , FUNCT_1:12
.= ( ( ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) (#) ( C97 * C101 ) ) . C147 ) by VALUED_1:6;
end;
L569: ( Func_Seq (C99 , D52) ) = ( ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) * ( Func_Seq (C97 , C101) ) ) by L537 , L536 , FUNCT_1:2;
L570: ( Sum ( Func_Seq (C99 , D52) ) ) = ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) ) by L569 , RVSUM_1:87;
L571: ( Func_Seq (C99 , D39) ) = ( ( Func_Seq (C99 , D51) ) ^ ( Func_Seq (C99 , D52) ) ) by L460 , L236;
L572: ( dom C98 ) = C96 by FUNCT_2:def 1;
L573: ( rng C122 ) c= ( dom C98 ) by L572;
L574: ( dom ( C98 * C122 ) ) = ( dom C122 ) by L573 , RELAT_1:27;
L575: ( dom ( Func_Seq (C98 , C122) ) ) = ( Seg ( len C122 ) ) by L574 , FINSEQ_1:def 3;
L576: ( len ( Func_Seq (C98 , C122) ) ) = ( C121 + 1 ) by L575 , L367 , FINSEQ_1:def 3;
L577: ( ( Func_Seq (C98 , C122) ) | C121 ) = ( Func_Seq (C98 , D54) ) by RELAT_1:83;
L578: ( Func_Seq (C98 , C122) ) = ( ( Func_Seq (C98 , D54) ) ^ <* ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) *> ) by L577 , L576 , FINSEQ_5:21;
L579: ( Sum ( Func_Seq (C99 , D39) ) ) = ( ( Sum ( Func_Seq (C99 , D51) ) ) + ( Sum ( Func_Seq (C99 , D52) ) ) ) by L571 , RVSUM_1:75
.= ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( ( Sum ( Func_Seq (C98 , D54) ) ) + ( ( Func_Seq (C98 , C122) ) /. ( C121 + 1 ) ) ) ) by L527 , L570
.= ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( Sum ( Func_Seq (C98 , C122) ) ) ) by L578 , RVSUM_1:74;
consider C148 being (Permutation of ( dom C123 )) such that L580: (D39 = ( C123 * C148 ) & ( dom C148 ) = ( dom C123 ) & ( rng C148 ) = ( dom C123 )) by L418 , L419 , L367 , BHSP_5:1;
L581: ( Func_Seq (C99 , D39) ) = ( ( Func_Seq (C99 , C123) ) * C148 ) by L580 , RELAT_1:36;
L582: ( dom C99 ) = [: C95 , C96 :] by FUNCT_2:def 1;
L583: ( rng C123 ) c= ( dom C99 ) by L582;
L584: ( dom ( Func_Seq (C99 , C123) ) ) = ( dom C123 ) by L583 , RELAT_1:27;
thus L585: ( Sum ( Func_Seq (C99 , C123) ) ) = ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( Sum ( Func_Seq (C98 , C122) ) ) ) by L584 , L579 , L581 , FINSOP_1:7;
end;
thus L586: S2[ ( C121 + 1 ) ] by L366;
end;
end;
thus L588: S2[ ( C121 + 1 ) ] by L362;
end;
L589: (for B148 being (Element of ( NAT )) holds S2[ B148 ]) from NAT_1:sch 1(L283 , L360);
L590:
now
let C149 being (FinSequence of C96);
let C150 being (FinSequence of [: C95 , C96 :]);
let C151 being non  empty  finite (Subset of C96);
let C152 being  finite (Subset of [: C95 , C96 :]);
assume L591: (C149 is  one-to-one & ( rng C149 ) = C151 & C150 is  one-to-one & ( rng C150 ) = C152 & C152 = [: C100 , C151 :] & (for B149 , B150 being set holds ((B149 in C100 & B150 in C151) implies ( C99 . (B149 , B150) ) = ( ( C97 . B149 ) * ( C98 . B150 ) ))));
L592: ( len C149 ) is (Element of ( NAT ));
thus L593: ( Sum ( Func_Seq (C99 , C150) ) ) = ( ( Sum ( Func_Seq (C97 , C101) ) ) * ( Sum ( Func_Seq (C98 , C149) ) ) ) by L592 , L589 , L591;
end;
thus L594: thesis by L590;
end;
theorem
L595: (for B151 , B152 being non  empty set holds (for B153 being (Function of B151 , ( REAL )) holds (for B154 being (Function of B152 , ( REAL )) holds (for B155 being (Function of [: B151 , B152 :] , ( REAL )) holds (for B156 being non  empty  finite (Subset of B151) holds (for B157 being non  empty  finite (Subset of B152) holds (for B158 being  finite (Subset of [: B151 , B152 :]) holds ((B158 = [: B156 , B157 :] & (for B159 , B160 being set holds ((B159 in B156 & B160 in B157) implies ( B155 . (B159 , B160) ) = ( ( B153 . B159 ) * ( B154 . B160 ) )))) implies ( setopfunc (B158 , [: B151 , B152 :] , ( REAL ) , B155 , ( addreal )) ) = ( ( setopfunc (B156 , B151 , ( REAL ) , B153 , ( addreal )) ) * ( setopfunc (B157 , B152 , ( REAL ) , B154 , ( addreal )) ) )))))))))
proof
let C153 , C154 being non  empty set;
let C155 being (Function of C153 , ( REAL ));
let C156 being (Function of C154 , ( REAL ));
let C157 being (Function of [: C153 , C154 :] , ( REAL ));
let C158 being non  empty  finite (Subset of C153);
let C159 being non  empty  finite (Subset of C154);
let C160 being  finite (Subset of [: C153 , C154 :]);
assume L596: (C160 = [: C158 , C159 :] & (for B161 , B162 being set holds ((B161 in C158 & B162 in C159) implies ( C157 . (B161 , B162) ) = ( ( C155 . B161 ) * ( C156 . B162 ) ))));
consider C161 being (FinSequence of C153) such that L597: (C161 is  one-to-one & ( rng C161 ) = C158 & ( setopfunc (C158 , C153 , ( REAL ) , C155 , ( addreal )) ) = ( Sum ( Func_Seq (C155 , C161) ) )) by L263;
consider C162 being (FinSequence of C154) such that L598: (C162 is  one-to-one & ( rng C162 ) = C159 & ( setopfunc (C159 , C154 , ( REAL ) , C156 , ( addreal )) ) = ( Sum ( Func_Seq (C156 , C162) ) )) by L263;
consider C163 being (FinSequence of [: C153 , C154 :]) such that L599: (C163 is  one-to-one & ( rng C163 ) = C160 & ( setopfunc (C160 , [: C153 , C154 :] , ( REAL ) , C157 , ( addreal )) ) = ( Sum ( Func_Seq (C157 , C163) ) )) by L263;
thus L600: thesis by L596 , L597 , L598 , L599 , L279;
end;
theorem
L601: (for B163 being non  empty set holds (for B164 being (Function of B163 , ( REAL )) holds (for B165 being  finite (Subset of B163) holds ((for B166 being set holds (B166 in B165 implies ( 0 ) <= ( B164 . B166 ))) implies ( 0 ) <= ( setopfunc (B165 , B163 , ( REAL ) , B164 , ( addreal )) )))))
proof
let C164 being non  empty set;
let C165 being (Function of C164 , ( REAL ));
let C166 being  finite (Subset of C164);
assume L602: (for B167 being set holds (B167 in C166 implies ( 0 ) <= ( C165 . B167 )));
consider C167 being (FinSequence of C164) such that L603: (C167 is  one-to-one & ( rng C167 ) = C166 & ( setopfunc (C166 , C164 , ( REAL ) , C165 , ( addreal )) ) = ( Sum ( Func_Seq (C165 , C167) ) )) by L263;
L604:
now
let C168 being Nat;
assume L605: C168 in ( dom ( Func_Seq (C165 , C167) ) );
L606: ( ( Func_Seq (C165 , C167) ) . C168 ) = ( C165 . ( C167 . C168 ) ) by L605 , FUNCT_1:12;
L607: C168 in ( dom C167 ) by L605 , FUNCT_1:11;
thus L608: ( 0 ) <= ( ( Func_Seq (C165 , C167) ) . C168 ) by L607 , L606 , L602 , L603 , FUNCT_1:3;
end;
thus L609: thesis by L604 , L603 , RVSUM_1:84;
end;
theorem
L610: (for B168 being non  empty set holds (for B169 being (Function of B168 , ( REAL )) holds (for B170 , B171 being  finite (Subset of B168) holds ((B170 c= B171 & (for B172 being set holds (B172 in B171 implies ( 0 ) <= ( B169 . B172 )))) implies ( setopfunc (B170 , B168 , ( REAL ) , B169 , ( addreal )) ) <= ( setopfunc (B171 , B168 , ( REAL ) , B169 , ( addreal )) )))))
proof
let C169 being non  empty set;
let C170 being (Function of C169 , ( REAL ));
let C171 , C172 being  finite (Subset of C169);
assume L611: (C171 c= C172 & (for B173 being set holds (B173 in C172 implies ( 0 ) <= ( C170 . B173 ))));
consider C173 being (FinSequence of C169) such that L612: (C173 is  one-to-one & ( rng C173 ) = C171 & ( setopfunc (C171 , C169 , ( REAL ) , C170 , ( addreal )) ) = ( Sum ( Func_Seq (C170 , C173) ) )) by L263;
reconsider D64 = ( C172 \ C171 ) as  finite (Subset of C169);
consider C174 being (FinSequence of C169) such that L613: (C174 is  one-to-one & ( rng C174 ) = D64 & ( setopfunc (D64 , C169 , ( REAL ) , C170 , ( addreal )) ) = ( Sum ( Func_Seq (C170 , C174) ) )) by L263;
L614:
now
let C175 being Nat;
assume L615: C175 in ( dom ( Func_Seq (C170 , C174) ) );
L616: ( ( Func_Seq (C170 , C174) ) . C175 ) = ( C170 . ( C174 . C175 ) ) by L615 , FUNCT_1:12;
L617: C175 in ( dom C174 ) by L615 , FUNCT_1:11;
L618: ( C174 . C175 ) in D64 by L617 , L613 , FUNCT_1:3;
L619: D64 c= C172 by XBOOLE_1:36;
thus L620: ( 0 ) <= ( ( Func_Seq (C170 , C174) ) . C175 ) by L619 , L616 , L611 , L618;
end;
L621: ( 0 ) <= ( Sum ( Func_Seq (C170 , C174) ) ) by L614 , RVSUM_1:84;
reconsider D65 = ( C173 ^ C174 ) as (FinSequence of C169);
L622: ( rng D65 ) = ( ( rng C173 ) \/ ( rng C174 ) ) by FINSEQ_1:31
.= ( C171 \/ C172 ) by L613 , L612 , XBOOLE_1:39
.= C172 by L611 , XBOOLE_1:12;
L623: ( rng C173 ) misses ( rng C174 ) by L612 , L613 , XBOOLE_1:79;
L624: D65 is  one-to-one by L623 , L612 , L613 , FINSEQ_3:91;
L625: ( setopfunc (C172 , C169 , ( REAL ) , C170 , ( addreal )) ) = ( Sum ( Func_Seq (C170 , D65) ) ) by L624 , L622 , L268;
L626: ( Func_Seq (C170 , D65) ) = ( ( Func_Seq (C170 , C173) ) ^ ( Func_Seq (C170 , C174) ) ) by L236;
L627: ( ( Sum ( Func_Seq (C170 , C173) ) ) + ( 0 ) ) <= ( ( Sum ( Func_Seq (C170 , C173) ) ) + ( Sum ( Func_Seq (C170 , C174) ) ) ) by L621 , XREAL_1:6;
thus L628: thesis by L627 , L612 , L626 , L625 , RVSUM_1:75;
end;
theorem
L629: (for B174 being non  empty  finite set holds (for B175 being (Probability of ( Trivial-SigmaField B174 )) holds (for B176 being non  empty  finite (Subset of B174) holds (for B177 being (Function of B174 , ( REAL )) holds (ex B178 being (FinSequence of ( REAL )) st (ex B179 being (FinSequence of B176) st (( len B178 ) = ( card B176 ) & B179 is  one-to-one & ( rng B179 ) = B176 & ( len B179 ) = ( card B176 ) & (for B180 being Nat holds (B180 in ( dom B178 ) implies ( B178 . B180 ) = ( ( B177 . ( B179 . B180 ) ) * ( B175 . { ( B179 . B180 ) } ) ))) & ( Integral (( P2M B175 ) , ( B177 | B176 )) ) = ( Sum B178 ))))))))
proof
let C176 being non  empty  finite set;
let C177 being (Probability of ( Trivial-SigmaField C176 ));
let C178 being non  empty  finite (Subset of C176);
let C179 being (Function of C176 , ( REAL ));
set D66 = ( C176 \ C178 );
L630: (( dom ( D66 --> ( 0 ) ) ) = D66 & ( rng ( D66 --> ( 0 ) ) ) c= ( REAL )) by FUNCOP_1:13;
L631: ( dom ( C179 +* ( D66 --> ( 0 ) ) ) ) = ( ( dom C179 ) \/ ( dom ( D66 --> ( 0 ) ) ) ) by FUNCT_4:def 1
.= ( C176 \/ D66 ) by L630 , FUNCT_2:def 1
.= C176 by XBOOLE_1:12;
L632: ( rng ( C179 +* ( D66 --> ( 0 ) ) ) ) c= ( REAL );
reconsider D67 = ( C179 +* ( D66 --> ( 0 ) ) ) as (Function of C176 , ( REAL )) by L632 , L631 , FUNCT_2:2;
consider C180 being (FinSequence of ( REAL )), C181 being (FinSequence of C176) such that L633: (( len C180 ) = ( card C176 ) & C181 is  one-to-one & ( rng C181 ) = C176 & ( len C181 ) = ( card C176 ) & (for B181 being Nat holds (B181 in ( dom C180 ) implies ( C180 . B181 ) = ( ( D67 . ( C181 . B181 ) ) * ( C177 . { ( C181 . B181 ) } ) ))) & ( Integral (( P2M C177 ) , D67) ) = ( Sum C180 )) by RANDOM_1:13;
reconsider D68 = D67 as (Real-Valued-Random-Variable of ( Trivial-SigmaField C176 )) by RANDOM_1:29;
L634: ( dom D68 ) = C176 by FUNCT_2:def 1;
L635: D68 is_integrable_on C177 by RANDOM_1:30;
L636: D68 is_integrable_on ( P2M C177 ) by L635 , RANDOM_1:def 3;
L637: C178 misses D66 by XBOOLE_1:79;
L638: ( Integral (( P2M C177 ) , ( D68 | ( C178 \/ D66 ) )) ) = ( ( Integral (( P2M C177 ) , ( D68 | C178 )) ) + ( Integral (( P2M C177 ) , ( D68 | D66 )) ) ) by L636 , MESFUNC6:92 , XBOOLE_1:79;
L639: ( C178 \/ D66 ) = ( C178 \/ C176 ) by XBOOLE_1:39
.= C176 by XBOOLE_1:12;
L640: ( D68 | ( C178 \/ D66 ) ) = D68 by L639 , FUNCT_2:33;
L641: ( D68 | C178 ) = ( C179 | C178 ) by L630 , L637 , FUNCT_4:72;
L642: ( dom ( D68 | D66 ) ) = D66 by L634 , RELAT_1:62;
L643: (for B182 being set holds (B182 in ( dom ( D68 | D66 ) ) implies ( ( D68 | D66 ) . B182 ) = ( 0 )))
proof
let C182 being set;
assume L644: C182 in ( dom ( D68 | D66 ) );
L645: (C182 in D66 & ( ( D68 | D66 ) . C182 ) = ( D68 . C182 )) by L644 , L634 , FUNCT_1:47 , RELAT_1:62;
L646: ( D68 . C182 ) = ( ( D66 --> ( 0 ) ) . C182 ) by L644 , L630 , L642 , FUNCT_4:13;
thus L647: thesis by L646 , L645 , FUNCOP_1:7;
end;
L648: ( Integral (( P2M C177 ) , ( D68 | D66 )) ) = ( ( R_EAL ( 0 ) ) * ( ( P2M C177 ) . D66 ) ) by L643 , L642 , MESFUNC6:97
.= ( R_EAL ( 0 ) );
L649: ( Integral (( P2M C177 ) , D68) ) = ( Integral (( P2M C177 ) , ( C179 | C178 )) ) by L648 , L641 , L638 , L640 , XXREAL_3:4;
set D69 = ( C181 " C178 );
L650: C181 is (Function of ( dom C181 ) , ( rng C181 )) by FUNCT_2:1;
L651: D69 is  finite  finite  finite  finite (Subset of ( dom C181 )) by L650 , FUNCT_2:39;
reconsider D70 = D69 as  finite (Subset of ( Seg ( len C180 ) )) by L651 , L633 , FINSEQ_1:def 3;
L652: ( rng ( canFS D70 ) ) c= D70 by FINSEQ_1:def 4;
L653: ( rng ( canFS D70 ) ) c= ( Seg ( len C180 ) ) by L652 , XBOOLE_1:1;
L654: ( canFS D70 ) is (FinSequence of ( Seg ( len C180 ) )) by L653 , FINSEQ_1:def 4;
L655: ( dom C181 ) = ( Seg ( len C180 ) ) by L633 , FINSEQ_1:def 3;
L656: C181 is (Function of ( Seg ( len C180 ) ) , C176) by L655 , L633 , FUNCT_2:1;
reconsider D71 = ( C181 * ( canFS D70 ) ) as (FinSequence of C176) by L656 , L654 , FINSEQ_2:32;
L657: ( rng D71 ) = ( C181 .: ( rng ( canFS D70 ) ) ) by RELAT_1:127
.= ( C181 .: D70 ) by FUNCT_2:def 3
.= C178 by L633 , FUNCT_1:77;
set D72 = ( ( Seg ( len C180 ) ) \ D70 );
reconsider D73 = D72 as  finite (Subset of ( Seg ( len C180 ) )) by XBOOLE_1:36;
L658: ( rng ( canFS D73 ) ) c= D73 by FINSEQ_1:def 4;
L659: ( rng ( canFS D73 ) ) c= ( Seg ( len C180 ) ) by L658 , XBOOLE_1:1;
L660: ( canFS D73 ) is (FinSequence of ( Seg ( len C180 ) )) by L659 , FINSEQ_1:def 4;
reconsider D74 = ( C181 * ( canFS D73 ) ) as (FinSequence of C176) by L660 , L656 , FINSEQ_2:32;
reconsider D75 = ( D71 ^ D74 ) as (FinSequence of C176);
L661: ( rng ( canFS D70 ) ) = D70 by FUNCT_2:def 3;
L662: ( rng ( canFS D73 ) ) = D73 by FUNCT_2:def 3;
L663: (D70 is  finite  finite  finite  finite (Subset of ( dom C181 )) & D73 is  finite  finite  finite  finite (Subset of ( dom C181 ))) by L633 , FINSEQ_1:def 3;
L664: ( rng ( C181 | D70 ) ) misses ( rng ( C181 | D73 ) ) by L663 , L1 , L633 , XBOOLE_1:79;
L665: ( rng D71 ) misses ( rng ( C181 | D73 ) ) by L664 , L661 , L13 , XBOOLE_1:63;
L666: ( rng D71 ) misses ( rng D74 ) by L665 , L662 , L13 , XBOOLE_1:63;
L667: D75 is  one-to-one by L666 , L633 , FINSEQ_3:91;
L668: ( len ( canFS D70 ) ) = ( card D70 ) by UPROOTS:3;
L669: ( dom ( canFS D70 ) ) = ( Seg ( card D70 ) ) by L668 , FINSEQ_1:def 3;
L670: ( rng ( canFS D70 ) ) is (Subset of ( dom C181 )) by L663 , FUNCT_2:def 3;
L671: ( dom D71 ) = ( Seg ( card D70 ) ) by L670 , L669 , RELAT_1:27;
L672: ( len D71 ) = ( card D70 ) by L671 , FINSEQ_1:def 3;
L673: ( len ( canFS D73 ) ) = ( card D73 ) by UPROOTS:3;
L674: ( dom ( canFS D73 ) ) = ( Seg ( card D73 ) ) by L673 , FINSEQ_1:def 3;
L675: ( rng ( canFS D73 ) ) is (Subset of ( dom C181 )) by L663 , FUNCT_2:def 3;
L676: ( dom D74 ) = ( Seg ( card D73 ) ) by L675 , L674 , RELAT_1:27;
L677: ( len D74 ) = ( card D73 ) by L676 , FINSEQ_1:def 3;
L678: ( D70 \/ D73 ) = ( ( Seg ( len C180 ) ) \/ D70 ) by XBOOLE_1:39
.= ( Seg ( len C180 ) ) by XBOOLE_1:12
.= ( dom C181 ) by L633 , FINSEQ_1:def 3;
L679: ( dom D75 ) = ( Seg ( ( len D71 ) + ( len D74 ) ) ) by FINSEQ_1:def 7
.= ( Seg ( card ( D70 \/ D73 ) ) ) by L672 , L677 , CARD_2:40 , XBOOLE_1:79;
L680: ( len D75 ) = ( card ( D70 \/ D73 ) ) by L679 , FINSEQ_1:def 3;
L681: ( len D75 ) = ( len C181 ) by L680 , L678 , CARD_1:62;
L682: ( Seg ( len C181 ) ) = ( Seg ( len D75 ) ) by L680 , L678 , CARD_1:62;
L683: ( dom C181 ) = ( Seg ( len C181 ) ) by FINSEQ_1:def 3
.= ( dom D75 ) by L682 , FINSEQ_1:def 3;
L684: ( card ( dom D75 ) ) = ( card C176 ) by L633 , L681 , CARD_1:62;
L685: D75 is (Function of ( dom D75 ) , C176) by FINSEQ_2:26;
L686: ( rng C181 ) = ( rng D75 ) by L685 , L633 , L667 , L684 , FINSEQ_4:63;
consider C183 being (Permutation of ( dom C181 )) such that L687: (D75 = ( C181 * C183 ) & ( dom C183 ) = ( dom C181 ) & ( rng C183 ) = ( dom C181 )) by L686 , L633 , L667 , BHSP_5:1;
defpred S3[ set , set ] means ((( D75 . $1 ) in C178 implies $2 = ( ( C179 . ( D75 . $1 ) ) * ( C177 . { ( D75 . $1 ) } ) )) & ((not ( D75 . $1 ) in C178) implies $2 = ( ( D68 . ( D75 . $1 ) ) * ( C177 . { ( D75 . $1 ) } ) )));
L688:
now
let C184 being Nat;
assume L689: C184 in ( Seg ( card C176 ) );
L690:
now
per cases ;
suppose L691: ( D75 . C184 ) in C178;

thus L692: (ex B183 being (Element of ( REAL )) st S3[ C184 , B183 ]) by L691;
end;
suppose L693: (not ( D75 . C184 ) in C178);

thus L694: (ex B184 being (Element of ( REAL )) st S3[ C184 , B184 ]) by L693;
end;
end;
thus L696: (ex B185 being (Element of ( REAL )) st S3[ C184 , B185 ]) by L690;
end;
consider C185 being (FinSequence of ( REAL )) such that L697: ( dom C185 ) = ( Seg ( card C176 ) ) and L698: (for B186 being Nat holds (B186 in ( Seg ( card C176 ) ) implies S3[ B186 , ( C185 . B186 ) ])) from FINSEQ_1:sch 5(L688);
L699: ( dom C181 ) = ( Seg ( len C180 ) ) by L633 , FINSEQ_1:def 3
.= ( dom C180 ) by FINSEQ_1:def 3;
L700: ( dom ( C180 * C183 ) ) = ( dom C183 ) by L699 , L687 , RELAT_1:27;
L701: ( dom C185 ) = ( dom C181 ) by L633 , L697 , FINSEQ_1:def 3;
L702:
now
let C186 being set;
assume L703: C186 in ( dom C185 );
reconsider D76 = C186 as (Element of ( NAT )) by L703;
L704: D76 in ( dom D75 ) by L703 , L633 , L697 , L683 , FINSEQ_1:def 3;
L705: ( D75 . D76 ) = ( C181 . ( C183 . D76 ) ) by L687 , L703 , L701 , L683 , FUNCT_1:12;
L706: ( C183 . D76 ) in ( dom C180 ) by L699 , L704 , L687 , FUNCT_1:11;
L707: ( C180 . ( C183 . D76 ) ) = ( ( D68 . ( C181 . ( C183 . D76 ) ) ) * ( C177 . { ( C181 . ( C183 . D76 ) ) } ) ) by L706 , L633;
L708:
now
per cases ;
suppose L709: ( D75 . D76 ) in C178;

thus L710: ( C185 . D76 ) = ( ( C179 . ( D75 . D76 ) ) * ( C177 . { ( D75 . D76 ) } ) ) by L709 , L698 , L697 , L703
.= ( ( ( C179 | C178 ) . ( C181 . ( C183 . D76 ) ) ) * ( C177 . { ( C181 . ( C183 . D76 ) ) } ) ) by L705 , L709 , FUNCT_1:49
.= ( ( D68 . ( C181 . ( C183 . D76 ) ) ) * ( C177 . { ( C181 . ( C183 . D76 ) ) } ) ) by L709 , L705 , L641 , FUNCT_1:49
.= ( ( C180 * C183 ) . D76 ) by L701 , L703 , L687 , L707 , FUNCT_1:13;
end;
suppose L711: (not ( D75 . D76 ) in C178);

thus L712: ( C185 . D76 ) = ( ( D68 . ( C181 . ( C183 . D76 ) ) ) * ( C177 . { ( C181 . ( C183 . D76 ) ) } ) ) by L711 , L705 , L698 , L697 , L703
.= ( ( C180 * C183 ) . D76 ) by L701 , L703 , L687 , L707 , FUNCT_1:13;
end;
end;
thus L714: ( C185 . C186 ) = ( ( C180 * C183 ) . C186 ) by L708;
end;
L715: C185 = ( C180 * C183 ) by L702 , L687 , L700 , L701 , FUNCT_1:2;
L716: ( Sum C180 ) = ( Sum C185 ) by L715 , L699 , FINSOP_1:7;
reconsider D77 = D71 as (FinSequence of C178) by L657 , FINSEQ_1:def 4;
reconsider D78 = ( C185 | ( len D77 ) ) as (FinSequence of ( REAL ));
reconsider D79 = ( C185 /^ ( len D77 ) ) as (FinSequence of ( REAL ));
L717: C185 = ( D78 ^ D79 ) by RFINSEQ:8;
L718: ( len D77 ) = ( card C178 ) by L657 , L633 , FINSEQ_4:62;
L719: ( len C185 ) = ( card C176 ) by L697 , FINSEQ_1:def 3;
L720: ( len C185 ) = ( len D75 ) by L681 , L633 , L697 , FINSEQ_1:def 3;
L721: ( len D75 ) = ( ( len D77 ) + ( len D74 ) ) by FINSEQ_1:22;
L722: ( len D77 ) <= ( len D75 ) by L721 , NAT_1:11;
L723: ( len D79 ) = ( ( len C185 ) - ( len D77 ) ) by L722 , L720 , RFINSEQ:def 1
.= ( len D74 ) by L721 , L720;
L724: ( dom D79 ) = ( Seg ( len D74 ) ) by L723 , FINSEQ_1:def 3
.= ( dom ( ( len D74 ) |-> ( 0 ) ) ) by FUNCOP_1:13;
L725:
now
let C187 being Nat;
assume L726: C187 in ( dom D79 );
L727: C187 in ( Seg ( len D74 ) ) by L726 , L723 , FINSEQ_1:def 3;
L728: C187 in ( dom D74 ) by L727 , FINSEQ_1:def 3;
L729: (1 <= C187 & C187 <= ( len D74 )) by L727 , FINSEQ_1:1;
L730: C187 <= ( C187 + ( len D77 ) ) by NAT_1:11;
L731: (1 <= ( C187 + ( len D77 ) ) & ( C187 + ( len D77 ) ) <= ( len D75 )) by L730 , L721 , L729 , XREAL_1:6 , XXREAL_0:2;
L732: ( C187 + ( len D77 ) ) in ( Seg ( card C176 ) ) by L731 , L633 , L681;
L733: ( D75 . ( C187 + ( len D77 ) ) ) = ( D74 . C187 ) by L728 , FINSEQ_1:def 7;
L734: ( ( rng D77 ) /\ ( rng D74 ) ) = ( {} ) by L666 , XBOOLE_0:def 7;
L735: ( D74 . C187 ) in ( rng D74 ) by L728 , FUNCT_1:3;
L736: (not ( D74 . C187 ) in ( rng D77 )) by L735 , L734 , XBOOLE_0:def 4;
L737: ( D74 . C187 ) in ( dom ( D68 | D66 ) ) by L736 , L642 , L657 , L735 , XBOOLE_0:def 5;
L738: ( D68 . ( D74 . C187 ) ) = ( ( D68 | D66 ) . ( D74 . C187 ) ) by L737 , FUNCT_1:47
.= ( 0 ) by L643 , L737;
L739: (not ( D75 . ( C187 + ( len D77 ) ) ) in C178) by L657 , L734 , L735 , L733 , XBOOLE_0:def 4;
L740: ( C185 . ( C187 + ( len D77 ) ) ) = ( ( D68 . ( D75 . ( C187 + ( len D77 ) ) ) ) * ( C177 . { ( D75 . ( C187 + ( len D77 ) ) ) } ) ) by L739 , L698 , L732
.= ( 0 ) by L738 , L733;
thus L741: ( D79 . C187 ) = ( C185 . ( C187 + ( len D77 ) ) ) by L720 , L722 , L726 , RFINSEQ:def 1
.= ( ( ( len D74 ) |-> ( 0 ) ) . C187 ) by L727 , L740 , FINSEQ_2:57;
end;
L742: D79 = ( ( len D74 ) |-> ( 0 ) ) by L725 , L724 , FINSEQ_1:13;
L743: ( card C178 ) c= ( card C176 ) by CARD_1:11;
L744: ( card C178 ) <= ( card C176 ) by L743 , NAT_1:39;
L745: ( Sum C185 ) = ( ( Sum D78 ) + ( Sum D79 ) ) by L717 , RVSUM_1:75
.= ( ( Sum D78 ) + ( 0 ) ) by L742 , RVSUM_1:81
.= ( Sum D78 );
L746: ( len D78 ) = ( card C178 ) by L719 , L718 , L744 , FINSEQ_1:59;
L747: (for B187 being Nat holds (B187 in ( dom D78 ) implies ( D78 . B187 ) = ( ( C179 . ( D77 . B187 ) ) * ( C177 . { ( D77 . B187 ) } ) )))
proof
let C188 being Nat;
assume L748: C188 in ( dom D78 );
L749: C188 in ( Seg ( len D77 ) ) by L748 , L746 , L718 , FINSEQ_1:def 3;
L750: C188 in ( dom D77 ) by L749 , FINSEQ_1:def 3;
L751: ( D75 . C188 ) = ( D77 . C188 ) by L750 , FINSEQ_1:def 7;
L752: ( D75 . C188 ) in C178 by L751 , L657 , L750 , FUNCT_1:3;
L753: ( Seg ( len D77 ) ) c= ( Seg ( card C176 ) ) by L718 , L744 , FINSEQ_1:5;
thus L754: ( D78 . C188 ) = ( C185 . C188 ) by L749 , FUNCT_1:49
.= ( ( C179 . ( D77 . C188 ) ) * ( C177 . { ( D77 . C188 ) } ) ) by L751 , L753 , L749 , L698 , L752;
end;
thus L755: thesis by L747 , L746 , L718 , L657 , L745 , L716 , L633 , L649;
end;
L756: (for B188 , B189 being non  empty  finite set holds (for B190 being (Probability of ( Trivial-SigmaField B188 )) holds (for B191 being (Probability of ( Trivial-SigmaField B189 )) holds (for B192 being (Function of [: B188 , B189 :] , ( REAL )) holds (for B193 being (Function of ( bool [: B188 , B189 :] ) , ( REAL )) holds (for B194 being non  empty  finite (Subset of B188) holds (for B195 being non  empty  finite (Subset of B189) holds (((for B196 , B197 being set holds ((B196 in B188 & B197 in B189) implies ( B192 . (B196 , B197) ) = ( ( B190 . { B196 } ) * ( B191 . { B197 } ) ))) & (for B198 being  finite (Subset of [: B188 , B189 :]) holds ( B193 . B198 ) = ( setopfunc (B198 , [: B188 , B189 :] , ( REAL ) , B192 , ( addreal )) ))) implies ( B193 . [: B194 , B195 :] ) = ( ( B190 . B194 ) * ( B191 . B195 ) )))))))))
proof
let C189 , C190 being non  empty  finite set;
let C191 being (Probability of ( Trivial-SigmaField C189 ));
let C192 being (Probability of ( Trivial-SigmaField C190 ));
let C193 being (Function of [: C189 , C190 :] , ( REAL ));
let C194 being (Function of ( bool [: C189 , C190 :] ) , ( REAL ));
let C195 being non  empty  finite (Subset of C189);
let C196 being non  empty  finite (Subset of C190);
assume L757: ((for B199 , B200 being set holds ((B199 in C189 & B200 in C190) implies ( C193 . (B199 , B200) ) = ( ( C191 . { B199 } ) * ( C192 . { B200 } ) ))) & (for B201 being  finite (Subset of [: C189 , C190 :]) holds ( C194 . B201 ) = ( setopfunc (B201 , [: C189 , C190 :] , ( REAL ) , C193 , ( addreal )) )));
deffunc H4(set) = ( C191 . { $1 } );
L758: (for B202 being set holds (B202 in C195 implies H4(B202) in ( REAL )));
consider C197 being (Function of C195 , ( REAL )) such that L759: (for B203 being set holds (B203 in C195 implies ( C197 . B203 ) = H4(B203))) from FUNCT_2:sch 2(L758);
deffunc H5(set) = ( C192 . { $1 } );
L760: (for B204 being set holds (B204 in C196 implies H5(B204) in ( REAL )));
consider C198 being (Function of C196 , ( REAL )) such that L761: (for B205 being set holds (B205 in C196 implies ( C198 . B205 ) = H5(B205))) from FUNCT_2:sch 2(L760);
L762:
now
let C199 being set;
assume L763: C199 in { ( {} ) , 1 };
L764: (C199 = ( 0 ) or C199 = 1) by L763 , TARSKI:def 2;
thus L765: C199 in ( REAL ) by L764;
end;
L766: { ( {} ) , 1 } c= ( REAL ) by L762 , TARSKI:def 3;
L767: (( dom ( chi (C195 , C189) ) ) = C189 & ( rng ( chi (C195 , C189) ) ) c= { ( {} ) , 1 }) by FUNCT_3:39 , FUNCT_3:def 3;
L768: ( chi (C195 , C189) ) is (Function of C189 , { ( {} ) , 1 }) by L767 , FUNCT_2:def 1 , RELSET_1:4;
reconsider D80 = ( chi (C195 , C189) ) as (Function of C189 , ( REAL )) by L768 , L766 , FUNCT_2:7;
L769: ( dom ( D80 | C195 ) ) = ( ( dom D80 ) /\ C195 ) by RELAT_1:61
.= C195 by L767 , XBOOLE_1:28;
L770: (for B206 being set holds (B206 in ( dom ( D80 | C195 ) ) implies ( ( D80 | C195 ) . B206 ) = 1))
proof
let C200 being set;
assume L771: C200 in ( dom ( D80 | C195 ) );
L772: ( ( D80 | C195 ) . C200 ) = ( D80 . C200 ) by L771 , FUNCT_1:47
.= 1 by L771 , L769 , FUNCT_3:def 3;
thus L773: thesis by L772;
end;
L774: ( Integral (( P2M C191 ) , ( D80 | C195 )) ) = ( ( R_EAL 1 ) * ( ( P2M C191 ) . ( dom ( D80 | C195 ) ) ) ) by L770 , MESFUNC6:97
.= ( 1 * ( C191 . C195 ) ) by L769 , EXTREAL1:1
.= ( C191 . C195 );
consider C201 being (FinSequence of ( REAL )), C202 being (FinSequence of C195) such that L775: (( len C201 ) = ( card C195 ) & C202 is  one-to-one & ( rng C202 ) = C195 & ( len C202 ) = ( card C195 ) & (for B207 being Nat holds (B207 in ( dom C201 ) implies ( C201 . B207 ) = ( ( D80 . ( C202 . B207 ) ) * ( C191 . { ( C202 . B207 ) } ) ))) & ( Integral (( P2M C191 ) , ( D80 | C195 )) ) = ( Sum C201 )) by L629;
L776: C195 c= C195;
reconsider D81 = C195 as  finite (Subset of C195) by L776;
L777: ( dom C197 ) = C195 by FUNCT_2:def 1;
L778: ( dom ( C197 * C202 ) ) = ( dom C202 ) by L777 , L775 , RELAT_1:27;
L779: ( dom C201 ) = ( Seg ( len C202 ) ) by L775 , FINSEQ_1:def 3
.= ( dom C202 ) by FINSEQ_1:def 3;
L780:
now
let C203 being set;
assume L781: C203 in ( dom C201 );
reconsider D82 = C203 as (Element of ( NAT )) by L781;
L782: ( C202 . D82 ) in C195 by L775 , L779 , L781 , FUNCT_1:3;
thus L783: ( C201 . C203 ) = ( ( D80 . ( C202 . D82 ) ) * ( C191 . { ( C202 . D82 ) } ) ) by L775 , L781
.= ( 1 * ( C191 . { ( C202 . D82 ) } ) ) by L782 , FUNCT_3:def 3
.= ( C197 . ( C202 . D82 ) ) by L759 , L775 , L779 , L781 , FUNCT_1:3
.= ( ( C197 * C202 ) . C203 ) by L779 , L781 , FUNCT_1:13;
end;
L784: C201 = ( Func_Seq (C197 , C202) ) by L780 , L778 , L779 , FUNCT_1:2;
L785: ( setopfunc (D81 , C195 , ( REAL ) , C197 , ( addreal )) ) = ( Sum C201 ) by L784 , L775 , L268;
L786: (( dom ( chi (C196 , C190) ) ) = C190 & ( rng ( chi (C196 , C190) ) ) c= { ( {} ) , 1 }) by FUNCT_3:39 , FUNCT_3:def 3;
L787: ( chi (C196 , C190) ) is (Function of C190 , { ( {} ) , 1 }) by L786 , FUNCT_2:def 1 , RELSET_1:4;
reconsider D83 = ( chi (C196 , C190) ) as (Function of C190 , ( REAL )) by L787 , L766 , FUNCT_2:7;
L788: ( dom ( D83 | C196 ) ) = ( ( dom D83 ) /\ C196 ) by RELAT_1:61
.= C196 by L786 , XBOOLE_1:28;
L789: (for B208 being set holds (B208 in ( dom ( D83 | C196 ) ) implies ( ( D83 | C196 ) . B208 ) = 1))
proof
let C204 being set;
assume L790: C204 in ( dom ( D83 | C196 ) );
L791: ( ( D83 | C196 ) . C204 ) = ( D83 . C204 ) by L790 , FUNCT_1:47
.= 1 by L790 , L788 , FUNCT_3:def 3;
thus L792: thesis by L791;
end;
L793: ( Integral (( P2M C192 ) , ( D83 | C196 )) ) = ( ( R_EAL 1 ) * ( ( P2M C192 ) . C196 ) ) by L789 , L788 , MESFUNC6:97
.= ( 1 * ( C192 . C196 ) ) by EXTREAL1:1
.= ( C192 . C196 );
consider C205 being (FinSequence of ( REAL )), C206 being (FinSequence of C196) such that L794: (( len C205 ) = ( card C196 ) & C206 is  one-to-one & ( rng C206 ) = C196 & ( len C206 ) = ( card C196 ) & (for B209 being Nat holds (B209 in ( dom C205 ) implies ( C205 . B209 ) = ( ( D83 . ( C206 . B209 ) ) * ( C192 . { ( C206 . B209 ) } ) ))) & ( Integral (( P2M C192 ) , ( D83 | C196 )) ) = ( Sum C205 )) by L629;
L795: C196 c= C196;
reconsider D84 = C196 as  finite (Subset of C196) by L795;
L796: ( dom C198 ) = C196 by FUNCT_2:def 1;
L797: ( dom ( C198 * C206 ) ) = ( dom C206 ) by L796 , L794 , RELAT_1:27;
L798: ( dom C205 ) = ( Seg ( len C206 ) ) by L794 , FINSEQ_1:def 3
.= ( dom C206 ) by FINSEQ_1:def 3;
L799:
now
let C207 being set;
assume L800: C207 in ( dom C205 );
reconsider D85 = C207 as (Element of ( NAT )) by L800;
L801: ( C206 . D85 ) in C196 by L794 , L798 , L800 , FUNCT_1:3;
thus L802: ( C205 . C207 ) = ( ( D83 . ( C206 . D85 ) ) * ( C192 . { ( C206 . D85 ) } ) ) by L794 , L800
.= ( 1 * ( C192 . { ( C206 . D85 ) } ) ) by L801 , FUNCT_3:def 3
.= ( C198 . ( C206 . D85 ) ) by L761 , L794 , L798 , L800 , FUNCT_1:3
.= ( ( C198 * C206 ) . C207 ) by L798 , L800 , FUNCT_1:13;
end;
L803: C205 = ( Func_Seq (C198 , C206) ) by L799 , L797 , L798 , FUNCT_1:2;
L804: ( setopfunc (D84 , C196 , ( REAL ) , C198 , ( addreal )) ) = ( Sum C205 ) by L803 , L794 , L268;
reconsider D86 = [: C195 , C196 :] as  finite (Subset of [: C195 , C196 :]) by ZFMISC_1:96;
reconsider D87 = [: C195 , C196 :] as  finite (Subset of [: C189 , C190 :]) by ZFMISC_1:96;
L805: [: C195 , C196 :] c= [: C189 , C190 :] by ZFMISC_1:96;
reconsider D88 = ( C193 | [: C195 , C196 :] ) as (Function of [: C195 , C196 :] , ( REAL )) by L805 , FUNCT_2:32;
L806:
now
let C208 , C209 being set;
assume L807: (C208 in C195 & C209 in C196);
L808: [ C208 , C209 ] in [: C195 , C196 :] by L807 , ZFMISC_1:def 2;
L809: [ C208 , C209 ] in ( dom D88 ) by L808 , FUNCT_2:def 1;
thus L810: ( D88 . (C208 , C209) ) = ( C193 . (C208 , C209) ) by L809 , FUNCT_1:47
.= ( ( C191 . { C208 } ) * ( C192 . { C209 } ) ) by L757 , L807
.= ( ( C197 . C208 ) * ( C192 . { C209 } ) ) by L807 , L759
.= ( ( C197 . C208 ) * ( C198 . C209 ) ) by L807 , L761;
end;
L811: D86 c= ( dom D88 ) by FUNCT_2:def 1;
consider C210 being (FinSequence of [: C195 , C196 :]) such that L812: (C210 is  one-to-one & ( rng C210 ) = D86 & ( setopfunc (D86 , [: C195 , C196 :] , ( REAL ) , D88 , ( addreal )) ) = ( ( addreal ) "**" ( Func_Seq (D88 , C210) ) )) by L811 , BHSP_5:def 5;
L813: ( rng C210 ) c= [: C189 , C190 :] by L805 , XBOOLE_1:1;
reconsider D89 = C210 as (FinSequence of [: C189 , C190 :]) by L813 , FINSEQ_1:def 4;
L814: ( rng C210 ) c= ( dom C193 ) by L813 , FUNCT_2:def 1;
L815: ( dom ( C193 * C210 ) ) = ( dom C210 ) by L814 , RELAT_1:27;
L816: ( dom D88 ) = [: C195 , C196 :] by FUNCT_2:def 1;
L817: (for B210 being set holds (B210 in ( dom ( D88 * C210 ) ) implies ( ( D88 * C210 ) . B210 ) = ( ( C193 * C210 ) . B210 )))
proof
let C211 being set;
assume L818: C211 in ( dom ( D88 * C210 ) );
L819: (( ( D88 * C210 ) . C211 ) = ( D88 . ( C210 . C211 ) ) & C211 in ( dom C210 )) by L818 , FUNCT_1:11 , FUNCT_1:12;
L820: ( C210 . C211 ) in ( rng C210 ) by L819 , FUNCT_1:3;
L821: ( D88 . ( C210 . C211 ) ) = ( C193 . ( C210 . C211 ) ) by L820 , FUNCT_1:49;
thus L822: thesis by L821 , L819 , FUNCT_1:13;
end;
L823: ( Func_Seq (D88 , C210) ) = ( Func_Seq (C193 , D89) ) by L817 , L816 , L815 , L813 , FUNCT_1:2 , RELAT_1:27;
L824: ( dom C193 ) = [: C189 , C190 :] by FUNCT_2:def 1;
L825: ( setopfunc (D86 , [: C195 , C196 :] , ( REAL ) , D88 , ( addreal )) ) = ( setopfunc (D87 , [: C189 , C190 :] , ( REAL ) , C193 , ( addreal )) ) by L824 , L812 , L823 , BHSP_5:def 5;
thus L826: ( C194 . [: C195 , C196 :] ) = ( setopfunc (D87 , [: C189 , C190 :] , ( REAL ) , C193 , ( addreal )) ) by L757
.= ( ( C191 . C195 ) * ( C192 . C196 ) ) by L793 , L794 , L774 , L775 , L804 , L785 , L595 , L806 , L825;
end;
L827: (for B211 , B212 being non  empty  finite set holds (for B213 being (Probability of ( Trivial-SigmaField B211 )) holds (for B214 being (Probability of ( Trivial-SigmaField B212 )) holds (for B215 being (Function of [: B211 , B212 :] , ( REAL )) holds (for B216 being (Function of ( bool [: B211 , B212 :] ) , ( REAL )) holds (((for B217 , B218 being set holds ((B217 in B211 & B218 in B212) implies ( B215 . (B217 , B218) ) = ( ( B213 . { B217 } ) * ( B214 . { B218 } ) ))) & (for B219 being  finite (Subset of [: B211 , B212 :]) holds ( B216 . B219 ) = ( setopfunc (B219 , [: B211 , B212 :] , ( REAL ) , B215 , ( addreal )) ))) implies ( B216 . [: B211 , B212 :] ) = 1))))))
proof
let C212 , C213 being non  empty  finite set;
let C214 being (Probability of ( Trivial-SigmaField C212 ));
let C215 being (Probability of ( Trivial-SigmaField C213 ));
let C216 being (Function of [: C212 , C213 :] , ( REAL ));
let C217 being (Function of ( bool [: C212 , C213 :] ) , ( REAL ));
assume L828: ((for B220 , B221 being set holds ((B220 in C212 & B221 in C213) implies ( C216 . (B220 , B221) ) = ( ( C214 . { B220 } ) * ( C215 . { B221 } ) ))) & (for B222 being  finite (Subset of [: C212 , C213 :]) holds ( C217 . B222 ) = ( setopfunc (B222 , [: C212 , C213 :] , ( REAL ) , C216 , ( addreal )) )));
deffunc H6(set) = ( C214 . { $1 } );
L829: (for B223 being set holds (B223 in C212 implies H6(B223) in ( REAL )));
consider C218 being (Function of C212 , ( REAL )) such that L830: (for B224 being set holds (B224 in C212 implies ( C218 . B224 ) = H6(B224))) from FUNCT_2:sch 2(L829);
deffunc H7(set) = ( C215 . { $1 } );
L831: (for B225 being set holds (B225 in C213 implies H7(B225) in ( REAL )));
consider C219 being (Function of C213 , ( REAL )) such that L832: (for B226 being set holds (B226 in C213 implies ( C219 . B226 ) = H7(B226))) from FUNCT_2:sch 2(L831);
L833: ( dom ( C212 --> 1 ) ) = C212 by FUNCOP_1:13;
L834: ( rng ( C212 --> 1 ) ) c= ( REAL );
reconsider D90 = ( C212 --> 1 ) as (Function of C212 , ( REAL )) by L834 , L833 , FUNCT_2:2;
L835: (for B227 being set holds (B227 in ( dom ( C212 --> 1 ) ) implies ( ( C212 --> 1 ) . B227 ) = 1)) by FUNCOP_1:7;
L836: ( Integral (( P2M C214 ) , D90) ) = ( ( R_EAL 1 ) * ( ( P2M C214 ) . C212 ) ) by L835 , L833 , MESFUNC6:97
.= ( 1 * ( C214 . C212 ) ) by EXTREAL1:1
.= 1 by PROB_1:def 8;
consider C220 being (FinSequence of ( REAL )), C221 being (FinSequence of C212) such that L837: (( len C220 ) = ( card C212 ) & C221 is  one-to-one & ( rng C221 ) = C212 & ( len C221 ) = ( card C212 ) & (for B228 being Nat holds (B228 in ( dom C220 ) implies ( C220 . B228 ) = ( ( D90 . ( C221 . B228 ) ) * ( C214 . { ( C221 . B228 ) } ) ))) & ( Integral (( P2M C214 ) , D90) ) = ( Sum C220 )) by RANDOM_1:13;
L838: C212 c= C212;
reconsider D91 = C212 as  finite (Subset of C212) by L838;
L839: ( dom C218 ) = D91 by FUNCT_2:def 1;
L840: ( dom ( C218 * C221 ) ) = ( dom C221 ) by L839 , L837 , RELAT_1:27;
L841: ( dom C220 ) = ( Seg ( len C221 ) ) by L837 , FINSEQ_1:def 3
.= ( dom C221 ) by FINSEQ_1:def 3;
L842:
now
let C222 being set;
assume L843: C222 in ( dom C220 );
reconsider D92 = C222 as (Element of ( NAT )) by L843;
thus L844: ( C220 . C222 ) = ( ( D90 . ( C221 . D92 ) ) * ( C214 . { ( C221 . D92 ) } ) ) by L837 , L843
.= ( 1 * ( C214 . { ( C221 . D92 ) } ) ) by L837 , L841 , L843 , FUNCOP_1:7 , FUNCT_1:3
.= ( C218 . ( C221 . D92 ) ) by L830 , L837 , L841 , L843 , FUNCT_1:3
.= ( ( C218 * C221 ) . C222 ) by L841 , L843 , FUNCT_1:13;
end;
L845: C220 = ( Func_Seq (C218 , C221) ) by L842 , L840 , L841 , FUNCT_1:2;
L846: ( setopfunc (D91 , C212 , ( REAL ) , C218 , ( addreal )) ) = 1 by L845 , L836 , L837 , L268;
L847: ( dom ( C213 --> 1 ) ) = C213 by FUNCOP_1:13;
L848: ( rng ( C213 --> 1 ) ) c= ( REAL );
reconsider D93 = ( C213 --> 1 ) as (Function of C213 , ( REAL )) by L848 , L847 , FUNCT_2:2;
L849: (for B229 being set holds (B229 in ( dom ( C213 --> 1 ) ) implies ( ( C213 --> 1 ) . B229 ) = 1)) by FUNCOP_1:7;
L850: ( Integral (( P2M C215 ) , D93) ) = ( ( R_EAL 1 ) * ( ( P2M C215 ) . C213 ) ) by L849 , L847 , MESFUNC6:97
.= ( 1 * ( C215 . C213 ) ) by EXTREAL1:1
.= 1 by PROB_1:def 8;
consider C223 being (FinSequence of ( REAL )), C224 being (FinSequence of C213) such that L851: (( len C223 ) = ( card C213 ) & C224 is  one-to-one & ( rng C224 ) = C213 & ( len C224 ) = ( card C213 ) & (for B230 being Nat holds (B230 in ( dom C223 ) implies ( C223 . B230 ) = ( ( D93 . ( C224 . B230 ) ) * ( C215 . { ( C224 . B230 ) } ) ))) & ( Integral (( P2M C215 ) , D93) ) = ( Sum C223 )) by RANDOM_1:13;
L852: C213 c= C213;
reconsider D94 = C213 as  finite (Subset of C213) by L852;
L853: ( dom C219 ) = D94 by FUNCT_2:def 1;
L854: ( dom ( C219 * C224 ) ) = ( dom C224 ) by L853 , L851 , RELAT_1:27;
L855: ( dom C223 ) = ( Seg ( len C224 ) ) by L851 , FINSEQ_1:def 3
.= ( dom C224 ) by FINSEQ_1:def 3;
L856:
now
let C225 being set;
assume L857: C225 in ( dom C223 );
reconsider D95 = C225 as (Element of ( NAT )) by L857;
thus L858: ( C223 . C225 ) = ( ( D93 . ( C224 . D95 ) ) * ( C215 . { ( C224 . D95 ) } ) ) by L851 , L857
.= ( 1 * ( C215 . { ( C224 . D95 ) } ) ) by L851 , L855 , L857 , FUNCOP_1:7 , FUNCT_1:3
.= ( C219 . ( C224 . D95 ) ) by L832 , L851 , L855 , L857 , FUNCT_1:3
.= ( ( C219 * C224 ) . C225 ) by L855 , L857 , FUNCT_1:13;
end;
L859: C223 = ( Func_Seq (C219 , C224) ) by L856 , L854 , L855 , FUNCT_1:2;
reconsider D96 = [: D91 , D94 :] as  finite (Subset of [: C212 , C213 :]) by ZFMISC_1:96;
L860:
now
let C226 , C227 being set;
assume L861: (C226 in D91 & C227 in D94);
thus L862: ( C216 . (C226 , C227) ) = ( ( C214 . { C226 } ) * ( C215 . { C227 } ) ) by L861 , L828
.= ( ( C218 . C226 ) * ( C215 . { C227 } ) ) by L861 , L830
.= ( ( C218 . C226 ) * ( C219 . C227 ) ) by L861 , L832;
end;
thus L863: ( C217 . [: C212 , C213 :] ) = ( setopfunc (D96 , [: C212 , C213 :] , ( REAL ) , C216 , ( addreal )) ) by L828
.= ( ( setopfunc (D91 , C212 , ( REAL ) , C218 , ( addreal )) ) * ( setopfunc (D94 , C213 , ( REAL ) , C219 , ( addreal )) ) ) by L595 , L860
.= 1 by L859 , L850 , L851 , L268 , L846;
end;
L864: (for B231 , B232 being non  empty  finite set holds (for B233 being (Probability of ( Trivial-SigmaField B231 )) holds (for B234 being (Probability of ( Trivial-SigmaField B232 )) holds (for B235 being (Function of [: B231 , B232 :] , ( REAL )) holds (for B236 being (Function of ( bool [: B231 , B232 :] ) , ( REAL )) holds (((for B237 , B238 being set holds ((B237 in B231 & B238 in B232) implies ( B235 . (B237 , B238) ) = ( ( B233 . { B237 } ) * ( B234 . { B238 } ) ))) & (for B239 being  finite (Subset of [: B231 , B232 :]) holds ( B236 . B239 ) = ( setopfunc (B239 , [: B231 , B232 :] , ( REAL ) , B235 , ( addreal )) ))) implies (for B240 being set holds (B240 c= [: B231 , B232 :] implies (( 0 ) <= ( B236 . B240 ) & ( B236 . B240 ) <= 1)))))))))
proof
let C228 , C229 being non  empty  finite set;
let C230 being (Probability of ( Trivial-SigmaField C228 ));
let C231 being (Probability of ( Trivial-SigmaField C229 ));
let C232 being (Function of [: C228 , C229 :] , ( REAL ));
let C233 being (Function of ( bool [: C228 , C229 :] ) , ( REAL ));
assume L865: ((for B241 , B242 being set holds ((B241 in C228 & B242 in C229) implies ( C232 . (B241 , B242) ) = ( ( C230 . { B241 } ) * ( C231 . { B242 } ) ))) & (for B243 being  finite (Subset of [: C228 , C229 :]) holds ( C233 . B243 ) = ( setopfunc (B243 , [: C228 , C229 :] , ( REAL ) , C232 , ( addreal )) )));
reconsider D97 = [: C228 , C229 :] as  finite (Subset of [: C228 , C229 :]) by SUBSET:3;
L866:
now
let C234 being set;
assume L867: C234 in [: C228 , C229 :];
consider C235 , C236 being set such that L868: (C235 in C228 & C236 in C229 & C234 = [ C235 , C236 ]) by L867 , ZFMISC_1:def 2;
L869: (for B244 being set holds (B244 in { C235 } implies B244 in C228)) by L868 , TARSKI:def 1;
L870: ({ C235 } is (Event of ( Trivial-SigmaField C228 )) & (for B245 being set holds (B245 in { C236 } implies B245 in C229))) by L869 , L868 , TARSKI:def 1 , TARSKI:def 3;
L871: { C236 } is (Event of ( Trivial-SigmaField C229 )) by L870 , TARSKI:def 3;
L872: ( C232 . C234 ) = ( C232 . (C235 , C236) ) by L868
.= ( ( C230 . { C235 } ) * ( C231 . { C236 } ) ) by L868 , L865;
L873: (( 0 ) <= ( C230 . { C235 } ) & ( 0 ) <= ( C231 . { C236 } )) by L870 , L871 , PROB_1:def 8;
thus L874: ( 0 ) <= ( C232 . C234 ) by L873 , L872;
end;
let C237 being set;
assume L875: C237 c= [: C228 , C229 :];
reconsider D98 = C237 as  finite (Subset of [: C228 , C229 :]) by L875;
L876: (for B246 being set holds (B246 in D98 implies ( 0 ) <= ( C232 . B246 ))) by L866;
L877: ( 0 ) <= ( setopfunc (D98 , [: C228 , C229 :] , ( REAL ) , C232 , ( addreal )) ) by L876 , L601;
thus L878: ( 0 ) <= ( C233 . C237 ) by L877 , L865;
L879: ( setopfunc (D98 , [: C228 , C229 :] , ( REAL ) , C232 , ( addreal )) ) <= ( setopfunc (D97 , [: C228 , C229 :] , ( REAL ) , C232 , ( addreal )) ) by L866 , L610;
L880: ( setopfunc (D97 , [: C228 , C229 :] , ( REAL ) , C232 , ( addreal )) ) = ( C233 . [: C228 , C229 :] ) by L865;
L881: ( setopfunc (D98 , [: C228 , C229 :] , ( REAL ) , C232 , ( addreal )) ) <= 1 by L880 , L879 , L865 , L827;
thus L882: ( C233 . C237 ) <= 1 by L881 , L865;
end;
definition
let C238 , C239 being non  empty  finite set;
let C240 being (Probability of ( Trivial-SigmaField C238 ));
let C241 being (Probability of ( Trivial-SigmaField C239 ));
func Product-Probability (C238 , C239 , C240 , C241) -> (Probability of ( Trivial-SigmaField [: C238 , C239 :] )) means 
:L883: (ex B247 being (Function of [: C238 , C239 :] , ( REAL )) st ((for B248 , B249 being set holds ((B248 in C238 & B249 in C239) implies ( B247 . (B248 , B249) ) = ( ( C240 . { B248 } ) * ( C241 . { B249 } ) ))) & (for B250 being  finite (Subset of [: C238 , C239 :]) holds ( it . B250 ) = ( setopfunc (B250 , [: C238 , C239 :] , ( REAL ) , B247 , ( addreal )) ))));
existence
proof
consider C242 being (Function of [: C238 , C239 :] , ( REAL )) such that L884: (for B251 , B252 being set holds ((B251 in C238 & B252 in C239) implies ( C242 . (B251 , B252) ) = ( ( C240 . { B251 } ) * ( C241 . { B252 } ) ))) by L206;
consider C243 being (Function of ( bool [: C238 , C239 :] ) , ( REAL )) such that L885: (for B253 being  finite (Subset of [: C238 , C239 :]) holds ( C243 . B253 ) = ( setopfunc (B253 , [: C238 , C239 :] , ( REAL ) , C242 , ( addreal )) )) by L222;
L886: (for B254 being set holds (B254 c= [: C238 , C239 :] implies (( 0 ) <= ( C243 . B254 ) & ( C243 . B254 ) <= 1))) by L864 , L884 , L885;
L887: ( C243 . [: C238 , C239 :] ) = 1 by L884 , L885 , L827;
L888: C243 is (Probability of ( Trivial-SigmaField [: C238 , C239 :] )) by L887 , L885 , L886 , L187;
thus L889: thesis by L888 , L884 , L885;
end;
uniqueness
proof
let C244 , C245 being (Probability of ( Trivial-SigmaField [: C238 , C239 :] ));
assume L890: (ex B255 being (Function of [: C238 , C239 :] , ( REAL )) st ((for B256 , B257 being set holds ((B256 in C238 & B257 in C239) implies ( B255 . (B256 , B257) ) = ( ( C240 . { B256 } ) * ( C241 . { B257 } ) ))) & (for B258 being  finite (Subset of [: C238 , C239 :]) holds ( C244 . B258 ) = ( setopfunc (B258 , [: C238 , C239 :] , ( REAL ) , B255 , ( addreal )) ))));
assume L891: (ex B259 being (Function of [: C238 , C239 :] , ( REAL )) st ((for B260 , B261 being set holds ((B260 in C238 & B261 in C239) implies ( B259 . (B260 , B261) ) = ( ( C240 . { B260 } ) * ( C241 . { B261 } ) ))) & (for B262 being  finite (Subset of [: C238 , C239 :]) holds ( C245 . B262 ) = ( setopfunc (B262 , [: C238 , C239 :] , ( REAL ) , B259 , ( addreal )) ))));
consider C246 being (Function of [: C238 , C239 :] , ( REAL )) such that L892: ((for B263 , B264 being set holds ((B263 in C238 & B264 in C239) implies ( C246 . (B263 , B264) ) = ( ( C240 . { B263 } ) * ( C241 . { B264 } ) ))) & (for B265 being  finite (Subset of [: C238 , C239 :]) holds ( C244 . B265 ) = ( setopfunc (B265 , [: C238 , C239 :] , ( REAL ) , C246 , ( addreal )) ))) by L890;
consider C247 being (Function of [: C238 , C239 :] , ( REAL )) such that L893: ((for B266 , B267 being set holds ((B266 in C238 & B267 in C239) implies ( C247 . (B266 , B267) ) = ( ( C240 . { B266 } ) * ( C241 . { B267 } ) ))) & (for B268 being  finite (Subset of [: C238 , C239 :]) holds ( C245 . B268 ) = ( setopfunc (B268 , [: C238 , C239 :] , ( REAL ) , C247 , ( addreal )) ))) by L891;
L894: C246 = C247 by L892 , L893 , L214;
thus L895: C244 = C245 by L894 , L229 , L892 , L893;
end;
end;
theorem
L897: (for B269 , B270 being non  empty  finite set holds (for B271 being (Probability of ( Trivial-SigmaField B269 )) holds (for B272 being (Probability of ( Trivial-SigmaField B270 )) holds (for B273 being non  empty  finite (Subset of B269) holds (for B274 being non  empty  finite (Subset of B270) holds ( ( Product-Probability (B269 , B270 , B271 , B272) ) . [: B273 , B274 :] ) = ( ( B271 . B273 ) * ( B272 . B274 ) ))))))
proof
let C248 , C249 being non  empty  finite set;
let C250 being (Probability of ( Trivial-SigmaField C248 ));
let C251 being (Probability of ( Trivial-SigmaField C249 ));
let C252 being non  empty  finite (Subset of C248);
let C253 being non  empty  finite (Subset of C249);
set D99 = ( Product-Probability (C248 , C249 , C250 , C251) );
consider C254 being (Function of [: C248 , C249 :] , ( REAL )) such that L898: ((for B275 , B276 being set holds ((B275 in C248 & B276 in C249) implies ( C254 . (B275 , B276) ) = ( ( C250 . { B275 } ) * ( C251 . { B276 } ) ))) & (for B277 being  finite (Subset of [: C248 , C249 :]) holds ( D99 . B277 ) = ( setopfunc (B277 , [: C248 , C249 :] , ( REAL ) , C254 , ( addreal )) ))) by L883;
thus L899: ( D99 . [: C252 , C253 :] ) = ( ( C250 . C252 ) * ( C251 . C253 ) ) by L756 , L898;
end;
theorem
L900: (for B278 , B279 being non  empty  finite set holds (for B280 being (Probability of ( Trivial-SigmaField B278 )) holds (for B281 being (Probability of ( Trivial-SigmaField B279 )) holds (for B282 , B283 being set holds ((B282 in B278 & B283 in B279) implies ( ( Product-Probability (B278 , B279 , B280 , B281) ) . { [ B282 , B283 ] } ) = ( ( B280 . { B282 } ) * ( B281 . { B283 } ) ))))))
proof
let C255 , C256 being non  empty  finite set;
let C257 being (Probability of ( Trivial-SigmaField C255 ));
let C258 being (Probability of ( Trivial-SigmaField C256 ));
let C259 , C260 being set;
assume L901: (C259 in C255 & C260 in C256);
L902: { C259 } is  finite  finite  finite  finite (Subset of C255) by L901 , ZFMISC_1:31;
L903: (for B284 being set holds (B284 in { C260 } implies B284 in C256)) by L901 , TARSKI:def 1;
L904: { C260 } is  finite  finite  finite  finite (Subset of C256) by L903 , TARSKI:def 3;
L905: [: { C259 } , { C260 } :] = { [ C259 , C260 ] } by ZFMISC_1:29;
thus L906: ( ( Product-Probability (C255 , C256 , C257 , C258) ) . { [ C259 , C260 ] } ) = ( ( C257 . { C259 } ) * ( C258 . { C260 } ) ) by L905 , L897 , L902 , L904;
end;
begin
definition
let C261 being non  empty set;
let C262 being (SigmaField of C261);
func Real-Valued-Random-Variables-Set C262 -> non  empty (Subset of ( RAlgebra C261 )) equals 
{ B285 where B285 is (Real-Valued-Random-Variable of C262) : (not contradiction) };
correctness
proof
L907: { B286 where B286 is (Real-Valued-Random-Variable of C262) : (not contradiction) } is non  empty
proof
set D100 = the (Real-Valued-Random-Variable of C262);
L908: D100 in { B287 where B287 is (Real-Valued-Random-Variable of C262) : (not contradiction) };
thus L909: thesis by L908;
end;
L910: { B288 where B288 is (Real-Valued-Random-Variable of C262) : (not contradiction) } c= ( Funcs (C261 , ( REAL )) )
proof
let C263 being set;
assume L911: C263 in { B289 where B289 is (Real-Valued-Random-Variable of C262) : (not contradiction) };
consider C264 being (Real-Valued-Random-Variable of C262) such that L912: C263 = C264 by L911;
thus L913: thesis by L912 , FUNCT_2:8;
end;
thus L914: thesis by L910 , L907;
end;
end;
L916: (for R1 being non  empty set holds (for R3 being (SigmaField of R1) holds ( Real-Valued-Random-Variables-Set R3 ) is  additively-linearly-closed  multiplicatively-closed))
proof
let R1 being non  empty set;
let R3 being (SigmaField of R1);
set D101 = ( Real-Valued-Random-Variables-Set R3 );
set D102 = ( RAlgebra R1 );
L917: (for B290 , B291 being (Element of D102) holds ((B290 in D101 & B291 in D101) implies ( B290 * B291 ) in D101))
proof
let C265 , C266 being (Element of D102);
assume that
L918: C265 in D101
and
L919: C266 in D101;
consider C267 being (Real-Valued-Random-Variable of R3) such that L920: C267 = C266 by L919;
reconsider D103 = ( C265 * C266 ) as (Element of ( Funcs (R1 , ( REAL )) ));
consider C268 being (Real-Valued-Random-Variable of R3) such that L921: C268 = C265 by L918;
L922: ( ( dom C268 ) /\ ( dom C267 ) ) = ( R1 /\ ( dom C267 ) ) by FUNCT_2:def 1;
L923: ((ex B292 being Function st (D103 = B292 & ( dom B292 ) = R1 & ( rng B292 ) c= ( REAL ))) & ( ( dom C268 ) /\ ( dom C267 ) ) = ( R1 /\ R1 )) by L922 , FUNCT_2:def 1 , FUNCT_2:def 2;
L924: (for B293 being set holds (B293 in ( dom D103 ) implies ( D103 . B293 ) = ( ( C268 . B293 ) * ( C267 . B293 ) ))) by L921 , L920 , FUNCSDOM:2;
L925: ( C265 * C266 ) = ( C268 (#) C267 ) by L924 , L923 , VALUED_1:def 4;
thus L926: thesis by L925;
end;
L927: (for B294 , B295 being (Element of D102) holds ((B294 in D101 & B295 in D101) implies ( B294 + B295 ) in D101))
proof
let C269 , C270 being (Element of D102);
assume that
L928: C269 in D101
and
L929: C270 in D101;
consider C271 being (Real-Valued-Random-Variable of R3) such that L930: C271 = C270 by L929;
reconsider D104 = ( C269 + C270 ) as (Element of ( Funcs (R1 , ( REAL )) ));
consider C272 being (Real-Valued-Random-Variable of R3) such that L931: C272 = C269 by L928;
L932: ( ( dom C272 ) /\ ( dom C271 ) ) = ( R1 /\ ( dom C271 ) ) by FUNCT_2:def 1;
L933: ((ex B296 being Function st (D104 = B296 & ( dom B296 ) = R1 & ( rng B296 ) c= ( REAL ))) & ( ( dom C272 ) /\ ( dom C271 ) ) = ( R1 /\ R1 )) by L932 , FUNCT_2:def 1 , FUNCT_2:def 2;
L934: (for B297 being set holds (B297 in ( dom D104 ) implies ( D104 . B297 ) = ( ( C272 . B297 ) + ( C271 . B297 ) ))) by L931 , L930 , FUNCSDOM:1;
L935: ( C269 + C270 ) = ( C272 + C271 ) by L934 , L933 , VALUED_1:def 1;
thus L936: thesis by L935;
end;
L937: D101 is  add-closed by L927 , IDEAL_1:def 1;
L938: ( RAlgebra R1 ) is RealLinearSpace by C0SP1:7;
L939: (for B298 being (Element of D102) holds (B298 in D101 implies ( - B298 ) in D101))
proof
let C273 being (Element of D102);
assume L940: C273 in D101;
consider C274 being (Real-Valued-Random-Variable of R3) such that L941: C274 = C273 by L940;
L942: ( - 1 ) is Real by XREAL_0:def 1;
L943: ( - C274 ) is (Real-Valued-Random-Variable of R3) by L942 , RANDOM_1:20;
reconsider D105 = ( - C273 ) as (Element of ( Funcs (R1 , ( REAL )) ));
L944: D105 = ( ( - 1 ) * C273 ) by L938 , RLVECT_1:16;
L945:
now
let C275 being set;
assume L946: C275 in ( dom D105 );
reconsider D106 = C275 as (Element of R1) by L946;
thus L947: ( D105 . C275 ) = ( ( - 1 ) * ( C274 . D106 ) ) by L944 , L941 , L942 , FUNCSDOM:4
.= ( - ( C274 . C275 ) );
end;
L948: ((ex B299 being Function st (D105 = B299 & ( dom B299 ) = R1 & ( rng B299 ) c= ( REAL ))) & ( dom C274 ) = R1) by FUNCT_2:def 1 , FUNCT_2:def 2;
L949: ( - C273 ) = ( - C274 ) by L948 , L945 , VALUED_1:9;
thus L950: thesis by L949 , L943;
end;
L951: D101 is  having-inverse by L939 , C0SP1:def 1;
L952: (for B300 being Real holds (for B301 being (Element of D102) holds (B301 in D101 implies ( B300 * B301 ) in D101)))
proof
let C276 being Real;
let C277 being (Element of D102);
assume L953: C277 in D101;
consider C278 being (Real-Valued-Random-Variable of R3) such that L954: C278 = C277 by L953;
reconsider D107 = ( C276 * C277 ) as (Element of ( Funcs (R1 , ( REAL )) ));
L955: ((ex B302 being Function st (D107 = B302 & ( dom B302 ) = R1 & ( rng B302 ) c= ( REAL ))) & ( dom C278 ) = R1) by FUNCT_2:def 1 , FUNCT_2:def 2;
L956: (for B303 being set holds (B303 in ( dom D107 ) implies ( D107 . B303 ) = ( C276 * ( C278 . B303 ) ))) by L954 , FUNCSDOM:4;
L957: ( C276 * C277 ) = ( C276 (#) C278 ) by L956 , L955 , VALUED_1:def 5;
thus L958: thesis by L957;
end;
thus L959: ( Real-Valued-Random-Variables-Set R3 ) is  additively-linearly-closed by L952 , L937 , L951 , C0SP1:def 10;
reconsider D108 = ( RealFuncUnit R1 ) as (Function of R1 , ( REAL ));
L960: D108 is (Real-Valued-Random-Variable of R3) by L43;
L961: ( 1. D102 ) in D101 by L960;
thus L962: thesis by L961 , L917 , C0SP1:def 4;
end;
registration
let R1 being non  empty set;
let R3 being (SigmaField of R1);
cluster ( Real-Valued-Random-Variables-Set R3 ) ->  additively-linearly-closed  multiplicatively-closed;
coherence by L916;
end;
definition
let R1 being non  empty set;
let R3 being (SigmaField of R1);
func R_Algebra_of_Real-Valued-Random-Variables R3 -> Algebra equals 
AlgebraStr (# ( Real-Valued-Random-Variables-Set R3 ) , ( mult_ (( Real-Valued-Random-Variables-Set R3 ) , ( RAlgebra R1 )) ) , ( Add_ (( Real-Valued-Random-Variables-Set R3 ) , ( RAlgebra R1 )) ) , ( Mult_ (( Real-Valued-Random-Variables-Set R3 ) , ( RAlgebra R1 )) ) , ( One_ (( Real-Valued-Random-Variables-Set R3 ) , ( RAlgebra R1 )) ) , ( Zero_ (( Real-Valued-Random-Variables-Set R3 ) , ( RAlgebra R1 )) ) #);
coherence by C0SP1:6;
end;
registration
let R1 being non  empty set;
let R3 being (SigmaField of R1);
cluster ( R_Algebra_of_Real-Valued-Random-Variables R3 ) ->  scalar-unital;
coherence
proof
let C279 being (VECTOR of ( R_Algebra_of_Real-Valued-Random-Variables R3 ));
reconsider D109 = C279 as (VECTOR of ( RAlgebra R1 )) by TARSKI:def 3;
L965: ( R_Algebra_of_Real-Valued-Random-Variables R3 ) is (Subalgebra of ( RAlgebra R1 )) by C0SP1:6;
L966: ( 1 * C279 ) = ( 1 * D109 ) by L965 , C0SP1:8;
thus L967: ( 1 * C279 ) = C279 by L966 , FUNCSDOM:12;
end;
end;
