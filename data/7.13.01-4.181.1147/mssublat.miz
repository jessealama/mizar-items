:: The Correspondence Between Lattices of Subalgebras of Universal
:: Algebras and Many Sorted Algebras
::  by Adam Naumowicz and Agnieszka Julia Marasik
::
:: Received September 22, 1998
:: Copyright (c) 1998-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NAT_1, PBOOLE, FUNCT_1, CARD_1, XBOOLE_0, FINSEQ_2, FINSEQ_1,
      RELAT_1, TARSKI, NUMBERS, SUBSET_1, UNIALG_1, UNIALG_2, MSUALG_1,
      FUNCOP_1, CQC_SIM1, STRUCT_0, MSUALG_2, MARGREL1, PARTFUN1, CARD_3,
      FUNCT_2, ZFMISC_1, EQREL_1, INCPROJ, WELLORD1, GROUP_6, LATTICES;
 notations TARSKI, XBOOLE_0, SUBSET_1, BINOP_1, CARD_3, ORDINAL1, LATTICES,
      LATTICE4, RELAT_1, FUNCT_1, PARTFUN1, FUNCT_2, FUNCOP_1, STRUCT_0,
      PBOOLE, UNIALG_1, UNIALG_2, NUMBERS, FINSEQ_1, FINSEQ_2, MARGREL1,
      MSUALG_1, MSUALG_2;
 constructors BINOP_1, FINSEQOP, FILTER_1, UNIALG_2, LATTICE4, MSUALG_2,
      RELSET_1;
 registrations XBOOLE_0, FUNCT_1, ORDINAL1, RELSET_1, FUNCOP_1, FINSEQ_2,
      RELAT_1, PBOOLE, STRUCT_0, UNIALG_1, UNIALG_2, MSUALG_1, MSUALG_2,
      FINSEQ_1, MARGREL1;
 requirements NUMERALS, SUBSET, BOOLE;
 definitions TARSKI, XBOOLE_0, MSUALG_2, PBOOLE, LATTICE4, UNIALG_1, UNIALG_2,
      FUNCOP_1, FINSEQ_2, FUNCT_2;
 theorems MSUALG_1, MSUALG_2, PBOOLE, TARSKI, UNIALG_1, UNIALG_2, FUNCT_1,
      RELAT_1, FUNCOP_1, PARTFUN1, FUNCT_2, FINSEQ_1, FINSEQ_2, FINSEQ_3,
      ZFMISC_1, CARD_3, LATTICES, MSUHOM_1, XBOOLE_0, XBOOLE_1, ORDINAL1,
      STRUCT_0, MARGREL1, CARD_1;
 schemes FUNCT_2;

begin
theorem
L1: (for R1 being set holds ( ( *--> R1 ) . ( 0 ) ) = ( {} ))
proof
let R1 being set;
thus L2: ( ( *--> R1 ) . ( 0 ) ) = ( ( 0 ) |-> R1 ) by FINSEQ_2:def 6
.= ( {} );
end;
theorem
L3: (for R1 being set holds ( ( *--> R1 ) . 1 ) = <* R1 *>)
proof
let R1 being set;
thus L4: ( ( *--> R1 ) . 1 ) = ( 1 |-> R1 ) by FINSEQ_2:def 6
.= <* R1 *> by FINSEQ_2:59;
end;
theorem
L5: (for R1 being set holds ( ( *--> R1 ) . 2 ) = <* R1 , R1 *>)
proof
let R1 being set;
thus L6: ( ( *--> R1 ) . 2 ) = ( 2 |-> R1 ) by FINSEQ_2:def 6
.= <* R1 , R1 *> by FINSEQ_2:61;
end;
theorem
L7: (for R1 being set holds ( ( *--> R1 ) . 3 ) = <* R1 , R1 , R1 *>)
proof
let R1 being set;
thus L8: ( ( *--> R1 ) . 3 ) = ( 3 |-> R1 ) by FINSEQ_2:def 6
.= <* R1 , R1 , R1 *> by FINSEQ_2:62;
end;
theorem
L9: (for R2 being Nat holds (for B1 being (FinSequence of { ( 0 ) }) holds (B1 = ( R2 |-> ( 0 ) ) iff ( len B1 ) = R2)))
proof
let R2 being Nat;
let C1 being (FinSequence of { ( 0 ) });
thus L10: (C1 = ( R2 |-> ( 0 ) ) implies ( len C1 ) = R2) by CARD_1:def 7;
assume L11: ( len C1 ) = R2;
L12: ( dom C1 ) = ( Seg R2 ) by L11 , FINSEQ_1:def 3;
per cases ;
suppose L13: ( Seg R2 ) = ( {} );

thus L14: C1 = ( {} ) by L13 , L12
.= ( ( 0 ) |-> ( 0 ) )
.= ( R2 |-> ( 0 ) ) by L13;
end;
suppose L15: ( Seg R2 ) <> ( {} );

L16: ( rng C1 ) c= { ( 0 ) } by FINSEQ_1:def 4;
L17: (( rng C1 ) = { ( 0 ) } or ( rng C1 ) = ( {} )) by L16 , ZFMISC_1:33;
thus L18: thesis by L17 , L12 , L15 , FUNCOP_1:9 , RELAT_1:42;
end;
end;
theorem
L20: (for R2 being Nat holds (for B2 being FinSequence holds (B2 = ( ( *--> ( 0 ) ) . R2 ) implies ( len B2 ) = R2)))
proof
let R2 being Nat;
let C2 being FinSequence;
assume L21: C2 = ( ( *--> ( 0 ) ) . R2 );
L22: R2 in ( NAT ) by ORDINAL1:def 12;
L23: C2 = ( R2 |-> ( 0 ) ) by L22 , L21 , FINSEQ_2:def 6;
thus L24: thesis by L23 , CARD_1:def 7;
end;
begin
reconsider D1 = ( 0 ) as (Element of { ( 0 ) }) by TARSKI:def 1;
theorem
L25: (for B3 , B4 being Universal_Algebra holds (B3 is (SubAlgebra of B4) implies ( MSSign B3 ) = ( MSSign B4 )))
proof
let C3 , C4 being Universal_Algebra;
set D2 = ( ( dom ( signature C3 ) ) --> D1 );
set D3 = ( ( dom ( signature C4 ) ) --> D1 );
reconsider D4 = ( ( *--> ( 0 ) ) * ( signature C3 ) ) as (Function of ( dom ( signature C3 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
reconsider D5 = ( ( *--> ( 0 ) ) * ( signature C4 ) ) as (Function of ( dom ( signature C4 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
assume L26: C3 is (SubAlgebra of C4);
L27: C3 , C4 are_similar  by L26 , UNIALG_2:13;
L28: (( MSSign C3 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C3 ) ) , D4 , D2 #) & ( MSSign C4 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C4 ) ) , D5 , D3 #)) by MSUALG_1:10;
L29: (the carrier' of ( MSSign C3 )) = (the carrier' of ( MSSign C4 )) by L28 , L27 , UNIALG_2:def 1;
thus L30: thesis by L29 , L27 , L28 , UNIALG_2:def 1;
end;
theorem
L31: (for B5 , B6 being Universal_Algebra holds (B5 is (SubAlgebra of B6) implies (for B7 being (MSSubset of ( MSAlg B6 )) holds (B7 = (the Sorts of ( MSAlg B5 )) implies (for B8 being (OperSymbol of ( MSSign B6 )) holds (for B9 being (OperSymbol of ( MSSign B5 )) holds (B9 = B8 implies ( Den (B9 , ( MSAlg B5 )) ) = ( ( Den (B8 , ( MSAlg B6 )) ) | ( Args (B9 , ( MSAlg B5 )) ) ))))))))
proof
let C5 , C6 being Universal_Algebra;
assume that
L32: C5 is (SubAlgebra of C6);
L33: ( MSSign C5 ) = ( MSSign C6 ) by L32 , L25;
L34: ( MSSign C5 ) = ( MSSign C6 ) by L32 , L25;
let C7 being (MSSubset of ( MSAlg C6 ));
assume that
L35: C7 = (the Sorts of ( MSAlg C5 ));
let C8 being (OperSymbol of ( MSSign C6 ));
reconsider D6 = C8 as (Element of (the carrier' of ( MSSign C5 ))) by L32 , L25;
set D7 = ( Args (D6 , ( MSAlg C5 )) );
set D8 = ( dom ( Den (D6 , ( MSAlg C5 )) ) );
L36: ((the Sorts of ( MSAlg C6 )) is (MSSubset of ( MSAlg C6 )) & C7 c= (the Sorts of ( MSAlg C6 ))) by PBOOLE:def 18;
L37: ( ( ( C7 # ) * (the Arity of ( MSSign C5 )) ) . D6 ) c= ( ( ( (the Sorts of ( MSAlg C6 )) # ) * (the Arity of ( MSSign C6 )) ) . C8 ) by L36 , L34 , MSUALG_2:2;
L38: (( dom ( Den (C8 , ( MSAlg C6 )) ) ) = ( Args (C8 , ( MSAlg C6 )) ) & ( Args (C8 , ( MSAlg C6 )) ) = ( ( ( (the Sorts of ( MSAlg C6 )) # ) * (the Arity of ( MSSign C6 )) ) . C8 )) by FUNCT_2:def 1 , MSUALG_1:def 4;
L39: ( Args (D6 , ( MSAlg C5 )) ) c= ( dom ( Den (C8 , ( MSAlg C6 )) ) ) by L38 , L35 , L33 , L37 , MSUALG_1:def 4;
L40: ( dom ( ( Den (C8 , ( MSAlg C6 )) ) | ( Args (D6 , ( MSAlg C5 )) ) ) ) = ( Args (D6 , ( MSAlg C5 )) ) by L39 , RELAT_1:62;
L41: ( dom ( ( Den (C8 , ( MSAlg C6 )) ) | ( Args (D6 , ( MSAlg C5 )) ) ) ) = ( dom ( Den (D6 , ( MSAlg C5 )) ) ) by L40 , FUNCT_2:def 1;
L42: D8 = ( ( dom ( Den (C8 , ( MSAlg C6 )) ) ) /\ D7 ) by L41 , RELAT_1:61;
L43: (for B10 being set holds (B10 in D8 implies ( ( Den (C8 , ( MSAlg C6 )) ) . B10 ) = ( ( Den (D6 , ( MSAlg C5 )) ) . B10 )))
proof
L44: ( MSAlg C5 ) = MSAlgebra (# ( MSSorts C5 ) , ( MSCharact C5 ) #) by MSUALG_1:def 11;
L45: (the Sorts of ( MSAlg C5 )) = ( ( 0 ) .--> (the carrier of C5) ) by L44 , MSUALG_1:def 9;
L46: ( rng (the Sorts of ( MSAlg C5 )) ) = { (the carrier of C5) } by L45 , FUNCOP_1:8;
L47: (the carrier of C5) is (Component of (the Sorts of ( MSAlg C5 ))) by L46 , TARSKI:def 1;
reconsider D9 = (the carrier of C5) as non  empty (Subset of C6) by L32 , UNIALG_2:def 7;
let C9 being set;
L48: ( MSAlg C6 ) = MSAlgebra (# ( MSSorts C6 ) , ( MSCharact C6 ) #) by MSUALG_1:def 11;
L49: C5 , C6 are_similar  by L32 , UNIALG_2:13;
L50: ( signature C5 ) = ( signature C6 ) by L49 , UNIALG_2:def 1;
assume L51: C9 in D8;
L52: C9 in D7 by L51 , L42 , XBOOLE_0:def 4;
L53: C9 in ( ( len ( the_arity_of D6 ) ) -tuples_on ( the_sort_of ( MSAlg C5 ) ) ) by L52 , MSUALG_1:6;
L54: C9 in ( ( len ( the_arity_of D6 ) ) -tuples_on (the carrier of C5) ) by L53 , L47 , MSUALG_1:def 12;
reconsider D10 = ( ( *--> ( 0 ) ) * ( signature C6 ) ) as (Function of ( dom ( signature C6 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
set D11 = ( ( *--> ( 0 ) ) * ( signature C5 ) );
set D12 = ( ( dom ( signature C5 ) ) --> D1 );
set D13 = ( ( dom ( signature C6 ) ) --> D1 );
reconsider D14 = D11 as (Function of ( dom ( signature C5 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
consider C10 being Nat such that L55: ( dom ( signature C6 ) ) = ( Seg C10 ) by FINSEQ_1:def 2;
L56: ( MSSign C6 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C6 ) ) , D10 , D13 #) by MSUALG_1:10;
L57: D6 in ( Seg C10 ) by L56 , L55;
L58: ( dom (the charact of C6) ) = ( Seg ( len (the charact of C6) ) ) by FINSEQ_1:def 3
.= ( Seg ( len ( signature C6 ) ) ) by UNIALG_1:def 4
.= ( dom ( signature C6 ) ) by FINSEQ_1:def 3;
reconsider D15 = ( (the charact of C6) . D6 ) as (operation of C6) by L58 , L56 , FUNCT_1:def 3;
reconsider D16 = D6 as (Element of ( NAT )) by L57;
L59: ( rng ( signature C5 ) ) c= ( NAT ) by FINSEQ_1:def 4;
L60: C5 , C6 are_similar  by L32 , UNIALG_2:13;
L61: ( signature C5 ) = ( signature C6 ) by L60 , UNIALG_2:def 1;
L62: ( ( signature C5 ) . D16 ) in ( rng ( signature C5 ) ) by L61 , L56 , FUNCT_1:def 3;
reconsider D17 = ( ( signature C5 ) . D16 ) as (Element of ( NAT )) by L62 , L59;
L63: ( dom ( *--> ( 0 ) ) ) = ( NAT ) by FUNCT_2:def 1;
L64: (( MSSign C5 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C5 ) ) , D14 , D12 #) & D16 in ( dom ( ( *--> ( 0 ) ) * ( signature C5 ) ) )) by L63 , L56 , L61 , L62 , L59 , FUNCT_1:11 , MSUALG_1:10;
L65: ( (the Arity of ( MSSign C5 )) . D16 ) = ( ( *--> ( 0 ) ) . ( ( signature C5 ) . D16 ) ) by L64 , FUNCT_1:12;
L66: ( (the Arity of ( MSSign C5 )) . D16 ) = ( D17 |-> ( 0 ) ) by L65 , FINSEQ_2:def 6;
reconsider D18 = ( (the Arity of ( MSSign C5 )) . D16 ) as FinSequence;
L67: C9 in ( ( len D18 ) -tuples_on (the carrier of C5) ) by L54 , MSUALG_1:def 1;
L68: C9 in ( D17 -tuples_on (the carrier of C5) ) by L67 , L66 , CARD_1:def 7;
L69: C9 in ( ( arity D15 ) -tuples_on (the carrier of C5) ) by L68 , L56 , L50 , UNIALG_1:def 4;
L70:
now
let C11 being set;
assume L71: C11 in ( dom ( Opers (C6 , D9) ) );
L72: (( rng ( Opers (C6 , D9) ) ) c= ( PFuncs (( D9 * ) , D9) ) & ( ( Opers (C6 , D9) ) . C11 ) in ( rng ( Opers (C6 , D9) ) )) by L71 , FINSEQ_1:def 4 , FUNCT_1:def 3;
thus L73: ( ( Opers (C6 , D9) ) . C11 ) is Function by L72 , PARTFUN1:46;
end;
reconsider D19 = ( Opers (C6 , D9) ) as  Function-yielding Function by L70 , FUNCOP_1:def 6;
L74: D9 is  opers_closed by L32 , UNIALG_2:def 7;
L75: D9 is_closed_on D15 by L74 , UNIALG_2:def 4;
L76: D16 in ( dom (the charact of C6) ) by L56 , L58;
L77: C8 in ( dom ( Opers (C6 , D9) ) ) by L76 , UNIALG_2:def 6;
reconsider D20 = D16 as (OperSymbol of ( MSSign C5 ));
L78: ( MSAlg C5 ) = MSAlgebra (# ( MSSorts C5 ) , ( MSCharact C5 ) #) by MSUALG_1:def 11;
L79: ( ( Den (D20 , ( MSAlg C5 )) ) . C9 ) = ( ( ( MSCharact C5 ) . C8 ) . C9 ) by L78 , MSUALG_1:def 6
.= ( ( (the charact of C5) . C8 ) . C9 ) by MSUALG_1:def 10
.= ( ( D19 . C8 ) . C9 ) by L32 , UNIALG_2:def 7
.= ( ( D15 /. D9 ) . C9 ) by L77 , UNIALG_2:def 6
.= ( ( D15 | ( ( arity D15 ) -tuples_on D9 ) ) . C9 ) by L75 , UNIALG_2:def 5
.= ( ( (the charact of C6) . C8 ) . C9 ) by L69 , FUNCT_1:49
.= ( ( (the Charact of ( MSAlg C6 )) . C8 ) . C9 ) by L48 , MSUALG_1:def 10
.= ( ( Den (C8 , ( MSAlg C6 )) ) . C9 ) by MSUALG_1:def 6;
thus L80: thesis by L79;
end;
thus L81: thesis by L43 , L42 , FUNCT_1:46;
end;
theorem
L82: (for B11 , B12 being Universal_Algebra holds (B11 is (SubAlgebra of B12) implies (the Sorts of ( MSAlg B11 )) is (MSSubset of ( MSAlg B12 ))))
proof
let C12 , C13 being Universal_Algebra;
set D21 = ( ( *--> ( 0 ) ) * ( signature C13 ) );
set D22 = ( ( dom ( signature C13 ) ) --> D1 );
reconsider D23 = D21 as (Function of ( dom ( signature C13 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L83: ( MSSign C13 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C13 ) ) , D23 , D22 #) by MSUALG_1:10;
L84: ( MSAlg C13 ) = MSAlgebra (# ( MSSorts C13 ) , ( MSCharact C13 ) #) by MSUALG_1:def 11;
L85: (the Sorts of ( MSAlg C13 )) = ( ( 0 ) .--> (the carrier of C13) ) by L84 , MSUALG_1:def 9;
assume L86: C12 is (SubAlgebra of C13);
L87: ( MSSign C12 ) = ( MSSign C13 ) by L86 , L25;
reconsider D24 = ( MSAlg C12 ) as  non-empty MSAlgebra over ( MSSign C13 ) by L87;
L88: ( MSAlg C12 ) = MSAlgebra (# ( MSSorts C12 ) , ( MSCharact C12 ) #) by MSUALG_1:def 11;
L89: (the Sorts of D24) = ( ( 0 ) .--> (the carrier of C12) ) by L88 , MSUALG_1:def 9;
L90: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
L91: (the carrier of C12) is (Subset of C13) by L86 , UNIALG_2:def 7;
L92: (the Sorts of D24) c= (the Sorts of ( MSAlg C13 ))
proof
let C14 being set;
assume L93: C14 in (the carrier of ( MSSign C13 ));
L94: C14 = ( 0 ) by L93 , L83 , TARSKI:def 1;
L95: (( (the Sorts of D24) . ( 0 ) ) = (the carrier of C12) & ( (the Sorts of ( MSAlg C13 )) . ( 0 ) ) = (the carrier of C13)) by L89 , L85 , L90 , FUNCOP_1:7;
thus L96: thesis by L95 , L91 , L94;
end;
thus L97: thesis by L92 , PBOOLE:def 18;
end;
theorem
L98: (for B13 , B14 being Universal_Algebra holds (B13 is (SubAlgebra of B14) implies (for B15 being (MSSubset of ( MSAlg B14 )) holds (B15 = (the Sorts of ( MSAlg B13 )) implies B15 is  opers_closed))))
proof
let C15 , C16 being Universal_Algebra;
assume that
L99: C15 is (SubAlgebra of C16);
let C17 being (MSSubset of ( MSAlg C16 ));
assume that
L100: C17 = (the Sorts of ( MSAlg C15 ));
let C18 being (OperSymbol of ( MSSign C16 ));
reconsider D25 = C18 as (Element of (the carrier' of ( MSSign C15 ))) by L99 , L25;
set D26 = ( ( C17 * (the ResultSort of ( MSSign C16 )) ) . D25 );
L101: D26 = ( ( (the Sorts of ( MSAlg C15 )) * (the ResultSort of ( MSSign C15 )) ) . D25 ) by L99 , L100 , L25;
L102: D26 = ( Result (D25 , ( MSAlg C15 )) ) by L101 , MSUALG_1:def 5;
set D27 = ( rng ( ( Den (C18 , ( MSAlg C16 )) ) | ( ( ( C17 # ) * (the Arity of ( MSSign C16 )) ) . D25 ) ) );
L103: ( MSSign C15 ) = ( MSSign C16 ) by L99 , L25;
L104: (( rng ( Den (D25 , ( MSAlg C15 )) ) ) c= ( Result (D25 , ( MSAlg C15 )) ) & D27 = ( rng ( ( Den (C18 , ( MSAlg C16 )) ) | ( Args (D25 , ( MSAlg C15 )) ) ) )) by L103 , L100 , MSUALG_1:def 4 , RELAT_1:def 19;
L105: D27 c= ( Result (D25 , ( MSAlg C15 )) ) by L104 , L99 , L100 , L31;
thus L106: thesis by L105 , L102 , MSUALG_2:def 5;
end;
theorem
L107: (for B16 , B17 being Universal_Algebra holds (B16 is (SubAlgebra of B17) implies (for B18 being (MSSubset of ( MSAlg B17 )) holds (B18 = (the Sorts of ( MSAlg B16 )) implies (the Charact of ( MSAlg B16 )) = ( Opers (( MSAlg B17 ) , B18) )))))
proof
let C19 , C20 being Universal_Algebra;
assume that
L108: C19 is (SubAlgebra of C20);
let C21 being (MSSubset of ( MSAlg C20 ));
set D28 = (the Charact of ( MSAlg C19 ));
set D29 = ( Opers (( MSAlg C20 ) , C21) );
L109: (the carrier' of ( MSSign C19 )) = (the carrier' of ( MSSign C20 ))
proof
set D30 = ( ( *--> ( 0 ) ) * ( signature C19 ) );
set D31 = ( ( dom ( signature C19 ) ) --> D1 );
set D32 = ( ( *--> ( 0 ) ) * ( signature C20 ) );
set D33 = ( ( dom ( signature C20 ) ) --> D1 );
reconsider D34 = D30 as (Function of ( dom ( signature C19 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
reconsider D35 = D32 as (Function of ( dom ( signature C20 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L110: ( MSSign C20 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C20 ) ) , D35 , D33 #) by MSUALG_1:10;
L111: (C19 , C20 are_similar  & ( MSSign C19 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C19 ) ) , D34 , D31 #)) by L108 , MSUALG_1:10 , UNIALG_2:13;
thus L112: thesis by L111 , L110 , UNIALG_2:def 1;
end;
reconsider D36 = D28 as (ManySortedSet of (the carrier' of ( MSSign C20 ))) by L109;
assume L113: C21 = (the Sorts of ( MSAlg C19 ));
L114: (for B19 being set holds (B19 in (the carrier' of ( MSSign C20 )) implies ( D36 . B19 ) = ( D29 . B19 )))
proof
let C22 being set;
assume L115: C22 in (the carrier' of ( MSSign C20 ));
reconsider D37 = C22 as (OperSymbol of ( MSSign C20 )) by L115;
reconsider D38 = C22 as (OperSymbol of ( MSSign C19 )) by L108 , L115 , L25;
L116: C21 is  opers_closed by L108 , L113 , L98;
L117: (( D29 . D37 ) = ( D37 /. C21 ) & C21 is_closed_on D37) by L116 , MSUALG_2:def 6 , MSUALG_2:def 8;
L118: ( D29 . D37 ) = ( ( Den (D37 , ( MSAlg C20 )) ) | ( ( ( C21 # ) * (the Arity of ( MSSign C20 )) ) . D37 ) ) by L117 , MSUALG_2:def 7;
L119: ( ( ( C21 # ) * (the Arity of ( MSSign C19 )) ) . D38 ) = ( ( ( (the Sorts of ( MSAlg C19 )) # ) * (the Arity of ( MSSign C19 )) ) . D38 ) by L108 , L113 , L25;
L120: ( D29 . D37 ) = ( ( Den (D37 , ( MSAlg C20 )) ) | ( ( ( (the Sorts of ( MSAlg C19 )) # ) * (the Arity of ( MSSign C19 )) ) . D38 ) ) by L119 , L108 , L118 , L25;
L121: (( D36 . D38 ) = ( Den (D38 , ( MSAlg C19 )) ) & ( D29 . D37 ) = ( ( Den (D37 , ( MSAlg C20 )) ) | ( Args (D38 , ( MSAlg C19 )) ) )) by L120 , MSUALG_1:def 4 , MSUALG_1:def 6;
thus L122: thesis by L121 , L108 , L113 , L31;
end;
thus L123: thesis by L114 , PBOOLE:3;
end;
theorem
L124: (for B20 , B21 being Universal_Algebra holds (B20 is (SubAlgebra of B21) implies ( MSAlg B20 ) is (MSSubAlgebra of ( MSAlg B21 ))))
proof
let C23 , C24 being Universal_Algebra;
assume L125: C23 is (SubAlgebra of C24);
L126: ( MSSign C23 ) = ( MSSign C24 ) by L125 , L25;
reconsider D39 = ( MSAlg C23 ) as  non-empty MSAlgebra over ( MSSign C24 ) by L126;
L127: D39 is (MSSubAlgebra of ( MSAlg C24 ))
proof
thus L128: (the Sorts of D39) is (MSSubset of ( MSAlg C24 )) by L125 , L82;
let C25 being (MSSubset of ( MSAlg C24 ));
assume L129: C25 = (the Sorts of D39);
thus L130: C25 is  opers_closed by L129 , L125 , L98;
thus L131: thesis by L125 , L129 , L107;
end;
thus L132: thesis by L127;
end;
theorem
L133: (for B22 , B23 being Universal_Algebra holds (( MSAlg B22 ) is (MSSubAlgebra of ( MSAlg B23 )) implies (the carrier of B22) is (Subset of B23)))
proof
let C26 , C27 being Universal_Algebra;
set D40 = ( MSAlg C26 );
set D41 = ( MSAlg C27 );
assume L134: D40 is (MSSubAlgebra of D41);
reconsider D42 = D40 as MSAlgebra over ( MSSign C27 ) by L134;
reconsider D43 = (the Sorts of D42) as (MSSubset of D41) by L134 , MSUALG_2:def 9;
set D44 = ( ( *--> ( 0 ) ) * ( signature C27 ) );
set D45 = ( ( dom ( signature C27 ) ) --> D1 );
reconsider D46 = D44 as (Function of ( dom ( signature C27 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
reconsider D47 = D43 as (ManySortedSet of (the carrier of ( MSSign C27 )));
L135: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
L136: D41 = MSAlgebra (# ( MSSorts C27 ) , ( MSCharact C27 ) #) by MSUALG_1:def 11;
L137: D47 c= ( MSSorts C27 ) by L136 , PBOOLE:def 18;
L138: (( MSSign C27 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C27 ) ) , D46 , D45 #) & ( MSSorts C27 ) = ( ( 0 ) .--> (the carrier of C27) )) by MSUALG_1:10 , MSUALG_1:def 9;
L139: (D42 = MSAlgebra (# ( MSSorts C26 ) , ( MSCharact C26 ) #) & ( D47 . ( 0 ) ) c= ( ( { ( 0 ) } --> (the carrier of C27) ) . ( 0 ) )) by L138 , L137 , MSUALG_1:def 11 , PBOOLE:def 2;
L140: ( ( MSSorts C26 ) . ( 0 ) ) c= (the carrier of C27) by L139 , L135 , FUNCOP_1:7;
L141: ( ( ( 0 ) .--> (the carrier of C26) ) . ( 0 ) ) c= (the carrier of C27) by L140 , MSUALG_1:def 9;
thus L142: thesis by L141 , L135 , FUNCOP_1:7;
end;
theorem
L143: (for B24 , B25 being Universal_Algebra holds (( MSAlg B24 ) is (MSSubAlgebra of ( MSAlg B25 )) implies (for B26 being non  empty (Subset of B25) holds (B26 = (the carrier of B24) implies B26 is  opers_closed))))
proof
let C28 , C29 being Universal_Algebra;
set D48 = ( MSAlg C28 );
set D49 = ( MSAlg C29 );
L144: D49 = MSAlgebra (# ( MSSorts C29 ) , ( MSCharact C29 ) #) by MSUALG_1:def 11;
assume L145: D48 is (MSSubAlgebra of D49);
reconsider D50 = D48 as MSAlgebra over ( MSSign C29 ) by L145;
let C30 being non  empty (Subset of C29);
assume L146: C30 = (the carrier of C28);
let C31 being (operation of C29);
reconsider D51 = (the Sorts of D50) as (MSSubset of D49) by L145 , MSUALG_2:def 9;
L147: D50 = MSAlgebra (# ( MSSorts C28 ) , ( MSCharact C28 ) #) by MSUALG_1:def 11;
set D52 = ( ( *--> ( 0 ) ) * ( signature C29 ) );
set D53 = ( ( dom ( signature C29 ) ) --> D1 );
reconsider D54 = D52 as (Function of ( dom ( signature C29 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L148: ( MSSign C29 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C29 ) ) , D54 , D53 #) by MSUALG_1:10;
L149: D51 is  opers_closed by L145 , MSUALG_2:def 9;
thus L150: C30 is_closed_on C31
proof
L151: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
let C32 being (FinSequence of C30);
consider C33 being set such that L152: C33 in ( dom (the charact of C29) ) and L153: C31 = ( (the charact of C29) . C33 ) by FUNCT_1:def 3;
L154: (( dom (the charact of C29) ) = ( Seg ( len (the charact of C29) ) ) & ( dom ( signature C29 ) ) = ( Seg ( len ( signature C29 ) ) )) by FINSEQ_1:def 3;
L155: C33 in ( dom ( signature C29 ) ) by L154 , L152 , UNIALG_1:def 4;
reconsider D55 = C33 as (OperSymbol of ( MSSign C29 )) by L148 , L152 , L154 , UNIALG_1:def 4;
assume L156: ( len C32 ) = ( arity C31 );
L157: (ex B27 being set st (B27 in ( dom ( ( Den (D55 , D49) ) | ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) ) & ( ( ( Den (D55 , D49) ) | ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) . B27 ) = ( C31 . C32 )))
proof
take C32;
thus L158: C32 in ( dom ( ( Den (D55 , D49) ) | ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) )
proof
L159: ( ( arity C31 ) |-> ( 0 ) ) is (FinSequence of (the carrier of ( MSSign C29 ))) by L148 , FINSEQ_2:63;
reconsider D56 = ( ( arity C31 ) |-> ( 0 ) ) as (Element of ( (the carrier of ( MSSign C29 )) * )) by L159 , FINSEQ_1:def 11;
L160:
now
assume L161: ( Seg ( arity C31 ) ) = ( {} );
L162: ( ( arity C31 ) |-> ( 0 ) ) = ( <*> (the carrier of ( MSSign C29 )) ) by L161;
thus L163: ( ( arity C31 ) |-> ( 0 ) ) is (FinSequence of (the carrier of ( MSSign C29 ))) by L162;
end;
L164: (( Seg ( arity C31 ) ) <> ( {} ) implies (( dom ( ( arity C31 ) |-> ( 0 ) ) ) = ( Seg ( arity C31 ) ) & ( rng ( ( arity C31 ) |-> ( 0 ) ) ) c= (the carrier of ( MSSign C29 )))) by L148 , FUNCOP_1:13;
L165: ( ( arity C31 ) |-> ( 0 ) ) is (FinSequence of (the carrier of ( MSSign C29 ))) by L164 , L160 , FINSEQ_1:def 4;
reconsider D57 = ( ( arity C31 ) |-> ( 0 ) ) as (Element of ( (the carrier of ( MSSign C29 )) * )) by L165 , FINSEQ_1:def 11;
L166: ( dom (the Arity of ( MSSign C29 )) ) = (the carrier' of ( MSSign C29 )) by FUNCT_2:def 1;
L167: (the Sorts of D49) = ( ( 0 ) .--> (the carrier of C29) ) by L144 , MSUALG_1:def 9;
L168: ( (the Sorts of D49) * D57 ) = ( ( arity C31 ) |-> (the carrier of C29) ) by L167 , FINSEQ_2:144
.= ( ( Seg ( arity C31 ) ) --> (the carrier of C29) );
L169: ( dom C32 ) = ( Seg ( arity C31 ) ) by L156 , FINSEQ_1:def 3;
L170: ( dom C32 ) = ( dom ( (the Sorts of D49) * D57 ) ) by L169 , L168 , FUNCT_2:def 1;
L171: (for B28 being set holds (B28 in ( dom ( (the Sorts of D49) * D57 ) ) implies ( C32 . B28 ) in ( ( (the Sorts of D49) * D57 ) . B28 )))
proof
let C34 being set;
L172: ( rng C32 ) c= C30 by FINSEQ_1:def 4;
L173: ( rng C32 ) c= (the carrier of C29) by L172 , XBOOLE_1:1;
assume L174: C34 in ( dom ( (the Sorts of D49) * D57 ) );
L175: ( C32 . C34 ) in ( rng C32 ) by L170 , L174 , FUNCT_1:def 3;
L176: (( 0 ) in { ( 0 ) } & ( C32 . C34 ) in (the carrier of C29)) by L175 , L173 , TARSKI:def 1;
L177: ( ( (the Sorts of D49) * D57 ) . C34 ) = ( (the Sorts of D49) . ( D57 . C34 ) ) by L174 , FUNCT_1:12
.= ( ( MSSorts C29 ) . ( 0 ) ) by L144
.= ( ( ( 0 ) .--> (the carrier of C29) ) . ( 0 ) ) by MSUALG_1:def 9;
thus L178: thesis by L177 , L176 , FUNCOP_1:7;
end;
L179: ( dom ( Den (D55 , D49) ) ) = ( Args (D55 , D49) ) by FUNCT_2:def 1;
L180: ( dom ( Den (D55 , D49) ) ) = ( ( ( (the Sorts of D49) # ) * (the Arity of ( MSSign C29 )) ) . D55 ) by L179 , MSUALG_1:def 4
.= ( ( (the Sorts of D49) # ) . ( ( ( *--> ( 0 ) ) * ( signature C29 ) ) . D55 ) ) by L148 , L166 , FUNCT_1:13
.= ( ( (the Sorts of D49) # ) . ( ( *--> ( 0 ) ) . ( ( signature C29 ) . D55 ) ) ) by L155 , FUNCT_1:13
.= ( ( (the Sorts of D49) # ) . ( ( *--> ( 0 ) ) . ( arity C31 ) ) ) by L153 , L155 , UNIALG_1:def 4
.= ( ( (the Sorts of D49) # ) . ( ( arity C31 ) |-> ( 0 ) ) ) by FINSEQ_2:def 6;
L181: ( dom ( Den (D55 , D49) ) ) = ( product ( (the Sorts of D49) * D57 ) ) by L180 , FINSEQ_2:def 5;
L182: C32 in ( dom ( Den (D55 , D49) ) ) by L181 , L170 , L171 , CARD_3:def 5;
L183: C32 is (Element of ( ( len C32 ) -tuples_on C30 )) by FINSEQ_2:92;
L184: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
L185: D55 in ( dom ( signature C29 ) ) by L152 , L154 , UNIALG_1:def 4;
L186: D51 = ( ( 0 ) .--> (the carrier of C28) ) by L147 , MSUALG_1:def 9;
L187: ( dom D51 ) = { ( 0 ) } by L186 , FUNCOP_1:13;
L188: ( 0 ) in ( dom D51 ) by L187 , TARSKI:def 1;
L189: (( dom ( *--> ( 0 ) ) ) = ( NAT ) & ( ( signature C29 ) . D55 ) = ( arity C31 )) by L153 , L155 , FUNCT_2:def 1 , UNIALG_1:def 4;
L190: D55 in ( dom ( ( *--> ( 0 ) ) * ( signature C29 ) ) ) by L189 , L185 , FUNCT_1:11;
L191: ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) = ( ( D51 # ) . ( ( ( *--> ( 0 ) ) * ( signature C29 ) ) . D55 ) ) by L190 , L148 , FUNCT_1:13
.= ( ( D51 # ) . ( ( *--> ( 0 ) ) . ( ( signature C29 ) . D55 ) ) ) by L190 , FUNCT_1:12
.= ( ( D51 # ) . ( ( *--> ( 0 ) ) . ( arity C31 ) ) ) by L153 , L185 , UNIALG_1:def 4
.= ( ( D51 # ) . ( ( arity C31 ) |-> ( 0 ) ) ) by FINSEQ_2:def 6;
L192: ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) = ( product ( D51 * D56 ) ) by L191 , FINSEQ_2:def 5
.= ( product ( ( Seg ( arity C31 ) ) --> ( D51 . ( 0 ) ) ) ) by L188 , FUNCOP_1:17
.= ( product ( ( Seg ( arity C31 ) ) --> C30 ) ) by L146 , L186 , L184 , FUNCOP_1:7
.= ( Funcs (( Seg ( arity C31 ) ) , C30) ) by CARD_3:11
.= ( ( arity C31 ) -tuples_on C30 ) by FINSEQ_2:93;
L193: C32 in ( ( dom ( Den (D55 , D49) ) ) /\ ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) by L192 , L156 , L182 , L183 , XBOOLE_0:def 4;
thus L194: thesis by L193 , RELAT_1:61;
end;

thus L195: ( ( ( Den (D55 , D49) ) | ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) . C32 ) = ( ( Den (D55 , D49) ) . C32 ) by L158 , FUNCT_1:47
.= ( ( ( MSCharact C29 ) . D55 ) . C32 ) by L144 , MSUALG_1:def 6
.= ( C31 . C32 ) by L153 , MSUALG_1:def 10;
end;
L196: ( C31 . C32 ) in ( rng ( ( Den (D55 , D49) ) | ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) ) by L157 , FUNCT_1:def 3;
L197: D51 is_closed_on D55 by L149 , MSUALG_2:def 6;
L198: ( rng ( ( Den (D55 , D49) ) | ( ( ( D51 # ) * (the Arity of ( MSSign C29 )) ) . D55 ) ) ) c= ( ( D51 * (the ResultSort of ( MSSign C29 )) ) . D55 ) by L197 , MSUALG_2:def 5;
L199: D55 in ( dom ( ( dom ( signature C29 ) ) --> ( 0 ) ) ) by L155 , FUNCOP_1:13;
L200: ( ( D51 * (the ResultSort of ( MSSign C29 )) ) . D55 ) = ( D51 . ( ( ( dom ( signature C29 ) ) --> ( 0 ) ) . D55 ) ) by L199 , L148 , FUNCT_1:13
.= ( (the Sorts of D50) . ( 0 ) ) by L155 , FUNCOP_1:7
.= ( ( ( 0 ) .--> (the carrier of C28) ) . ( 0 ) ) by L147 , MSUALG_1:def 9
.= C30 by L146 , L151 , FUNCOP_1:7;
thus L201: thesis by L200 , L198 , L196;
end;

end;
theorem
L151: (for B29 , B30 being Universal_Algebra holds (( MSAlg B29 ) is (MSSubAlgebra of ( MSAlg B30 )) implies (for B31 being non  empty (Subset of B30) holds (B31 = (the carrier of B29) implies (the charact of B29) = ( Opers (B30 , B31) )))))
proof
let C35 , C36 being Universal_Algebra;
set D58 = ( MSAlg C35 );
set D59 = ( MSAlg C36 );
L152: D59 = MSAlgebra (# ( MSSorts C36 ) , ( MSCharact C36 ) #) by MSUALG_1:def 11;
assume L153: D58 is (MSSubAlgebra of D59);
reconsider D60 = D58 as MSAlgebra over ( MSSign C36 ) by L153;
reconsider D61 = (the Sorts of D60) as (MSSubset of D59) by L153 , MSUALG_2:def 9;
L154: (the Charact of D60) = ( Opers (D59 , D61) ) by L153 , MSUALG_2:def 9;
set D62 = ( ( *--> ( 0 ) ) * ( signature C36 ) );
set D63 = ( ( dom ( signature C36 ) ) --> D1 );
reconsider D64 = D62 as (Function of ( dom ( signature C36 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L155: ( MSSign C36 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C36 ) ) , D64 , D63 #) by MSUALG_1:10;
let C37 being non  empty (Subset of C36);
assume L156: C37 = (the carrier of C35);
reconsider D65 = (the charact of C35) as (PFuncFinSequence of C37) by L156;
L157: D60 = MSAlgebra (# ( MSSorts C35 ) , ( MSCharact C35 ) #) by MSUALG_1:def 11;
L158: ( dom D65 ) = ( dom (the Charact of D60) ) by L157 , MSUALG_1:def 10
.= (the carrier' of ( MSSign C36 )) by PARTFUN1:def 2
.= ( Seg ( len ( signature C36 ) ) ) by L155 , FINSEQ_1:def 3
.= ( Seg ( len (the charact of C36) ) ) by UNIALG_1:def 4
.= ( dom (the charact of C36) ) by FINSEQ_1:def 3;
L159: D61 is  opers_closed by L153 , MSUALG_2:def 9;
L160: (for B32 being set holds (for B33 being (operation of C36) holds ((B32 in ( dom D65 ) & B33 = ( (the charact of C36) . B32 )) implies ( D65 . B32 ) = ( B33 /. C37 ))))
proof
L161: D61 = ( ( 0 ) .--> (the carrier of C35) ) by L157 , MSUALG_1:def 9;
L162: ( dom D61 ) = { ( 0 ) } by L161 , FUNCOP_1:13;
L163: ( 0 ) in ( dom D61 ) by L162 , TARSKI:def 1;
let C38 being set;
let C39 being (operation of C36);
assume that
L164: C38 in ( dom D65 )
and
L165: C39 = ( (the charact of C36) . C38 );
L166: C38 in ( dom (the Charact of D59) ) by L152 , L158 , L164 , MSUALG_1:def 10;
reconsider D66 = C38 as (OperSymbol of ( MSSign C36 )) by L166 , PARTFUN1:def 2;
L167: (( dom (the charact of C36) ) = ( Seg ( len (the charact of C36) ) ) & ( dom ( signature C36 ) ) = ( Seg ( len ( signature C36 ) ) )) by FINSEQ_1:def 3;
L168: D66 in ( dom ( signature C36 ) ) by L167 , L158 , L164 , UNIALG_1:def 4;
L169: ( ( arity C39 ) |-> ( 0 ) ) is (FinSequence of (the carrier of ( MSSign C36 ))) by L155 , FINSEQ_2:63;
reconsider D67 = ( ( arity C39 ) |-> ( 0 ) ) as (Element of ( (the carrier of ( MSSign C36 )) * )) by L169 , FINSEQ_1:def 11;
L170: D61 is_closed_on D66 by L159 , MSUALG_2:def 6;
L171: C37 is  opers_closed by L153 , L156 , L143;
L172: C37 is_closed_on C39 by L171 , UNIALG_2:def 4;
L173: ( 0 ) in { ( 0 ) } by TARSKI:def 1;
L174: D66 in ( dom ( signature C36 ) ) by L158 , L164 , L167 , UNIALG_1:def 4;
L175: (( dom ( *--> ( 0 ) ) ) = ( NAT ) & ( ( signature C36 ) . D66 ) = ( arity C39 )) by L174 , L165 , FUNCT_2:def 1 , UNIALG_1:def 4;
L176: D66 in ( dom ( ( *--> ( 0 ) ) * ( signature C36 ) ) ) by L175 , L168 , FUNCT_1:11;
L177: ( ( ( D61 # ) * (the Arity of ( MSSign C36 )) ) . D66 ) = ( ( D61 # ) . ( ( ( *--> ( 0 ) ) * ( signature C36 ) ) . D66 ) ) by L176 , L155 , FUNCT_1:13
.= ( ( D61 # ) . ( ( *--> ( 0 ) ) . ( ( signature C36 ) . D66 ) ) ) by L176 , FUNCT_1:12
.= ( ( D61 # ) . ( ( *--> ( 0 ) ) . ( arity C39 ) ) ) by L165 , L168 , UNIALG_1:def 4
.= ( ( D61 # ) . ( ( arity C39 ) |-> ( 0 ) ) ) by FINSEQ_2:def 6;
L178: ( ( ( D61 # ) * (the Arity of ( MSSign C36 )) ) . D66 ) = ( product ( D61 * D67 ) ) by L177 , FINSEQ_2:def 5
.= ( product ( ( Seg ( arity C39 ) ) --> ( D61 . ( 0 ) ) ) ) by L163 , FUNCOP_1:17
.= ( product ( ( Seg ( arity C39 ) ) --> C37 ) ) by L156 , L161 , L173 , FUNCOP_1:7
.= ( Funcs (( Seg ( arity C39 ) ) , C37) ) by CARD_3:11
.= ( ( arity C39 ) -tuples_on C37 ) by FINSEQ_2:93;
L179: ( D65 . D66 ) = ( (the Charact of D60) . D66 ) by L157 , MSUALG_1:def 10
.= ( D66 /. D61 ) by L154 , MSUALG_2:def 8
.= ( ( Den (D66 , D59) ) | ( ( ( D61 # ) * (the Arity of ( MSSign C36 )) ) . D66 ) ) by L170 , MSUALG_2:def 7
.= ( ( ( MSCharact C36 ) . D66 ) | ( ( ( D61 # ) * (the Arity of ( MSSign C36 )) ) . D66 ) ) by L152 , MSUALG_1:def 6
.= ( C39 | ( ( arity C39 ) -tuples_on C37 ) ) by L165 , L178 , MSUALG_1:def 10;
thus L180: thesis by L179 , L172 , UNIALG_2:def 5;
end;
thus L181: thesis by L160 , L158 , UNIALG_2:def 6;
end;
theorem
L182: (for B34 , B35 being Universal_Algebra holds (( MSAlg B34 ) is (MSSubAlgebra of ( MSAlg B35 )) implies B34 is (SubAlgebra of B35)))
proof
let C40 , C41 being Universal_Algebra;
assume L183: ( MSAlg C40 ) is (MSSubAlgebra of ( MSAlg C41 ));
thus L184: (the carrier of C40) is (Subset of C41) by L183 , L133;
let C42 being non  empty (Subset of C41);
assume L185: C42 = (the carrier of C40);
thus L186: thesis by L185 , L183 , L143 , L151;
end;
theorem
L187: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for R4 being  non-empty MSAlgebra over R3 holds (for B36 being  non-empty (MSSubAlgebra of R4) holds (the carrier of ( 1-Alg B36 )) is (Subset of ( 1-Alg R4 )))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let R4 being  non-empty MSAlgebra over R3;
let C43 being  non-empty (MSSubAlgebra of R4);
L188: (the Sorts of C43) is (MSSubset of R4) by MSUALG_2:def 9;
L189: (the Sorts of C43) c= (the Sorts of R4) by L188 , PBOOLE:def 18;
L190: ( 1-Alg C43 ) = UAStr (# ( the_sort_of C43 ) , ( the_charact_of C43 ) #) by MSUALG_1:def 14;
reconsider D68 = (the carrier of ( 1-Alg C43 )) as (Component of (the Sorts of C43)) by L190 , MSUALG_1:def 12;
L191: ( 1-Alg R4 ) = UAStr (# ( the_sort_of R4 ) , ( the_charact_of R4 ) #) by MSUALG_1:def 14;
reconsider D69 = (the carrier of ( 1-Alg R4 )) as (Component of (the Sorts of R4)) by L191 , MSUALG_1:def 12;
L192: ( dom (the Sorts of R4) ) = (the carrier of R3) by PARTFUN1:def 2;
consider C44 being set such that L193: C44 in (the carrier of R3) and L194: D69 = ( (the Sorts of R4) . C44 ) by L192 , FUNCT_1:def 3;
L195: ( dom (the Sorts of R4) ) = ( dom (the Sorts of C43) ) by L192 , PARTFUN1:def 2;
consider C45 being set such that L196: C45 in (the carrier of R3) and L197: D68 = ( (the Sorts of C43) . C45 ) by L195 , L192 , FUNCT_1:def 3;
L198: C45 = C44 by L196 , L193 , STRUCT_0:def 10;
thus L199: thesis by L198 , L189 , L196 , L197 , L194 , PBOOLE:def 2;
end;
theorem
L200: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for R4 being  non-empty MSAlgebra over R3 holds (for B37 being  non-empty (MSSubAlgebra of R4) holds (for B38 being non  empty (Subset of ( 1-Alg R4 )) holds (B38 = (the carrier of ( 1-Alg B37 )) implies B38 is  opers_closed)))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let R4 being  non-empty MSAlgebra over R3;
let C46 being  non-empty (MSSubAlgebra of R4);
reconsider D70 = (the Sorts of C46) as (MSSubset of R4) by MSUALG_2:def 9;
L201: D70 is  opers_closed by MSUALG_2:def 9;
L202: ( 1-Alg C46 ) = UAStr (# ( the_sort_of C46 ) , ( the_charact_of C46 ) #) by MSUALG_1:def 14;
let C47 being non  empty (Subset of ( 1-Alg R4 ));
assume that
L203: C47 = (the carrier of ( 1-Alg C46 ));
set D71 = ( 1-Alg R4 );
L204: ( 1-Alg R4 ) = UAStr (# ( the_sort_of R4 ) , ( the_charact_of R4 ) #) by MSUALG_1:def 14;
let C48 being (operation of D71);
L205: ( dom (the Sorts of R4) ) = (the carrier of R3) by PARTFUN1:def 2;
L206: ( dom (the Sorts of R4) ) = ( dom (the Sorts of C46) ) by L205 , PARTFUN1:def 2;
thus L207: C47 is_closed_on C48
proof
reconsider D72 = C47 as (Component of (the Sorts of C46)) by L202 , L203 , MSUALG_1:def 12;
consider C49 being set such that L208: C49 in ( dom (the charact of D71) ) and L209: C48 = ( (the charact of D71) . C49 ) by FUNCT_1:def 3;
L210: C49 in ( dom (the Charact of R4) ) by L204 , L208 , MSUALG_1:def 13;
reconsider D73 = C49 as (OperSymbol of R3) by L210 , PARTFUN1:def 2;
reconsider D74 = ( D70 . ( (the ResultSort of R3) . D73 ) ) as (Component of (the Sorts of C46)) by L205 , L206 , FUNCT_1:def 3;
let C50 being (FinSequence of C47);
L211: ( dom (the Arity of R3) ) = (the carrier' of R3) by FUNCT_2:def 1;
assume L212: ( len C50 ) = ( arity C48 );
L213: (ex B39 being set st (B39 in ( dom ( ( Den (D73 , R4) ) | ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) ) & ( ( ( Den (D73 , R4) ) | ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) . B39 ) = ( C48 . C50 )))
proof
take C50;
L214: ( (the Charact of R4) . D73 ) = ( (the charact of D71) . D73 ) by L204 , MSUALG_1:def 13;
thus L215: C50 in ( dom ( ( Den (D73 , R4) ) | ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) )
proof
L216: ( rng C50 ) c= C47 by FINSEQ_1:def 4;
L217: ( rng C50 ) c= (the carrier of D71) by L216 , XBOOLE_1:1;
reconsider D75 = C50 as (FinSequence of (the carrier of D71)) by L217 , FINSEQ_1:def 4;
reconsider D76 = ( (the Arity of R3) . D73 ) as (Element of ( (the carrier of R3) * ));
set D77 = ( (the Sorts of R4) * D76 );
consider C51 being set such that L218: C51 in ( dom C48 ) by XBOOLE_0:def 1;
L219: C48 in ( PFuncs (( (the carrier of D71) * ) , (the carrier of D71)) ) by PARTFUN1:45;
L220: (ex B40 being Function st (B40 = C48 & ( dom B40 ) c= ( (the carrier of D71) * ) & ( rng B40 ) c= (the carrier of D71))) by L219 , PARTFUN1:def 3;
reconsider D78 = C51 as (FinSequence of (the carrier of D71)) by L220 , L218 , FINSEQ_1:def 11;
L221: ( dom ( Den (D73 , R4) ) ) = ( Args (D73 , R4) ) by FUNCT_2:def 1
.= ( ( len ( the_arity_of D73 ) ) -tuples_on (the carrier of D71) ) by L204 , MSUALG_1:6;
L222: ( dom ( Den (D73 , R4) ) ) = ( Args (D73 , R4) ) by FUNCT_2:def 1;
L223: ( dom ( Den (D73 , R4) ) ) = ( ( ( (the Sorts of R4) # ) * (the Arity of R3) ) . D73 ) by L222 , MSUALG_1:def 4
.= ( ( (the Sorts of R4) # ) . ( (the Arity of R3) . D73 ) ) by L211 , FUNCT_1:13;
L224: ( dom ( Den (D73 , R4) ) ) = ( product ( (the Sorts of R4) * D76 ) ) by L223 , FINSEQ_2:def 5;
L225: C48 = ( (the Charact of R4) . D73 ) by L204 , L209 , MSUALG_1:def 13
.= ( Den (D73 , R4) ) by MSUALG_1:def 6;
L226: ( len D78 ) = ( len D75 ) by L212 , L218 , MARGREL1:def 25;
L227: ( len C50 ) = ( len ( the_arity_of D73 ) ) by L226 , L218 , L225 , L221 , CARD_1:def 7;
L228: ( dom C50 ) = ( Seg ( len ( the_arity_of D73 ) ) ) by L227 , FINSEQ_1:def 3
.= ( dom ( the_arity_of D73 ) ) by FINSEQ_1:def 3
.= ( dom D76 ) by MSUALG_1:def 1;
L229: ( dom C50 ) c= ( dom ( D70 * D76 ) )
proof
let C52 being set;
assume L230: C52 in ( dom C50 );
L231: (( rng D76 ) c= (the carrier of R3) & ( D76 . C52 ) in ( rng D76 )) by L230 , L228 , FINSEQ_1:def 4 , FUNCT_1:def 3;
L232: ( D76 . C52 ) in (the carrier of R3) by L231;
L233: ( D76 . C52 ) in ( dom D70 ) by L232 , PARTFUN1:def 2;
thus L234: thesis by L233 , L228 , L230 , FUNCT_1:11;
end;
L235: ( dom ( D70 * D76 ) ) c= ( dom C50 ) by L228 , RELAT_1:25;
L236: ( dom C50 ) = ( dom ( D70 * D76 ) ) by L235 , L229 , XBOOLE_0:def 10;
L237: (for B41 being set holds (B41 in ( dom C50 ) implies ( C50 . B41 ) in ( ( D70 * D76 ) . B41 )))
proof
let C53 being set;
L238: ( rng C50 ) c= C47 by FINSEQ_1:def 4;
assume L239: C53 in ( dom C50 );
L240: ( C50 . C53 ) in ( rng C50 ) by L239 , FUNCT_1:def 3;
L241: ( dom C50 ) c= ( dom D76 ) by L236 , RELAT_1:25;
L242: (( rng D76 ) c= (the carrier of R3) & ( D76 . C53 ) in ( rng D76 )) by L241 , L239 , FINSEQ_1:def 4 , FUNCT_1:def 3;
L243: ( D76 . C53 ) in (the carrier of R3) by L242;
L244: ( D76 . C53 ) in ( dom D70 ) by L243 , PARTFUN1:def 2;
L245: ( ( D70 * D76 ) . C53 ) = ( D70 . ( D76 . C53 ) ) by L229 , L239 , FUNCT_1:12;
reconsider D79 = ( ( D70 * D76 ) . C53 ) as (Component of D70) by L245 , L244 , FUNCT_1:def 3;
L246: ( ( D70 * D76 ) . C53 ) = D79
.= C47 by L202 , L203 , MSUALG_1:def 12;
thus L247: thesis by L246 , L240 , L238;
end;
L248: ( dom D77 ) c= ( dom C50 )
proof
let C54 being set;
assume L249: C54 in ( dom D77 );
thus L250: thesis by L249 , L228 , FUNCT_1:11;
end;
L251: (for B42 being set holds (B42 in ( dom D77 ) implies ( C50 . B42 ) in ( D77 . B42 )))
proof
let C55 being set;
L252: ( rng C50 ) c= C47 by FINSEQ_1:def 4;
assume L253: C55 in ( dom D77 );
L254: ( D77 . C55 ) in ( rng D77 ) by L253 , FUNCT_1:def 3;
reconsider D80 = ( D77 . C55 ) as (Component of (the Sorts of R4)) by L254 , FUNCT_1:14;
L255: ( C50 . C55 ) in ( rng C50 ) by L248 , L253 , FUNCT_1:def 3;
L256: (D80 = ( the_sort_of R4 ) & ( C50 . C55 ) in C47) by L255 , L252 , MSUALG_1:def 12;
thus L257: thesis by L256 , L204;
end;
L258: ( dom (the Arity of R3) ) = (the carrier' of R3) by FUNCT_2:def 1;
L259: ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) = ( ( D70 # ) . D76 ) by L258 , FUNCT_1:13
.= ( product ( D70 * D76 ) ) by FINSEQ_2:def 5;
L260: C50 in ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) by L259 , L236 , L237 , CARD_3:9;
L261: ( dom C50 ) c= ( dom D77 )
proof
let C56 being set;
assume L262: C56 in ( dom C50 );
L263: (( rng D76 ) c= (the carrier of R3) & ( D76 . C56 ) in ( rng D76 )) by L262 , L228 , FINSEQ_1:def 4 , FUNCT_1:def 3;
L264: ( D76 . C56 ) in (the carrier of R3) by L263;
L265: ( D76 . C56 ) in ( dom (the Sorts of R4) ) by L264 , PARTFUN1:def 2;
thus L266: thesis by L265 , L228 , L262 , FUNCT_1:11;
end;
L267: ( dom C50 ) = ( dom D77 ) by L261 , L248 , XBOOLE_0:def 10;
L268: C50 in ( dom ( Den (D73 , R4) ) ) by L267 , L224 , L251 , CARD_3:9;
L269: C50 in ( ( dom ( Den (D73 , R4) ) ) /\ ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) by L268 , L260 , XBOOLE_0:def 4;
thus L270: thesis by L269 , RELAT_1:61;
end;

thus L271: ( ( ( Den (D73 , R4) ) | ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) . C50 ) = ( ( Den (D73 , R4) ) . C50 ) by L215 , FUNCT_1:47
.= ( C48 . C50 ) by L209 , L214 , MSUALG_1:def 6;
end;
L272: ( C48 . C50 ) in ( rng ( ( Den (D73 , R4) ) | ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) ) by L213 , FUNCT_1:def 3;
L273: ( dom (the ResultSort of R3) ) = (the carrier' of R3) by FUNCT_2:def 1;
L274: ( ( D70 * (the ResultSort of R3) ) . D73 ) = D74 by L273 , FUNCT_1:13
.= D72 by MSUALG_1:5;
L275: D70 is_closed_on D73 by L201 , MSUALG_2:def 6;
L276: ( rng ( ( Den (D73 , R4) ) | ( ( ( D70 # ) * (the Arity of R3) ) . D73 ) ) ) c= ( ( D70 * (the ResultSort of R3) ) . D73 ) by L275 , MSUALG_2:def 5;
thus L277: thesis by L276 , L272 , L274;
end;

end;
theorem
L208: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for R4 being  non-empty MSAlgebra over R3 holds (for B43 being  non-empty (MSSubAlgebra of R4) holds (for B44 being non  empty (Subset of ( 1-Alg R4 )) holds (B44 = (the carrier of ( 1-Alg B43 )) implies (the charact of ( 1-Alg B43 )) = ( Opers (( 1-Alg R4 ) , B44) ))))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let R4 being  non-empty MSAlgebra over R3;
let C57 being  non-empty (MSSubAlgebra of R4);
reconsider D81 = (the Sorts of C57) as (MSSubset of R4) by MSUALG_2:def 9;
L209: (the Charact of C57) = ( Opers (R4 , D81) ) by MSUALG_2:def 9;
set D82 = ( 1-Alg C57 );
set D83 = ( 1-Alg R4 );
L210: ( 1-Alg R4 ) = UAStr (# ( the_sort_of R4 ) , ( the_charact_of R4 ) #) by MSUALG_1:def 14;
set D84 = (the charact of D82);
let C58 being non  empty (Subset of ( 1-Alg R4 ));
assume that
L211: C58 = (the carrier of ( 1-Alg C57 ));
reconsider D85 = D84 as (PFuncFinSequence of C58) by L211;
L212: ( 1-Alg C57 ) = UAStr (# ( the_sort_of C57 ) , ( the_charact_of C57 ) #) by MSUALG_1:def 14;
L213: D85 = (the Charact of C57) by L212 , MSUALG_1:def 13;
L214: D81 is  opers_closed by MSUALG_2:def 9;
L215: (for B45 being set holds (for B46 being (operation of D83) holds ((B45 in ( dom D85 ) & B46 = ( (the charact of D83) . B45 )) implies ( D85 . B45 ) = ( B46 /. C58 ))))
proof
let C59 being set;
let C60 being (operation of D83);
assume that
L216: C59 in ( dom D85 )
and
L217: C60 = ( (the charact of D83) . C59 );
reconsider D86 = C59 as (OperSymbol of R3) by L213 , L216 , PARTFUN1:def 2;
L218: C60 = ( (the Charact of R4) . D86 ) by L210 , L217 , MSUALG_1:def 13
.= ( Den (D86 , R4) ) by MSUALG_1:def 6;
L219: ( dom C60 ) = ( Args (D86 , R4) ) by L218 , FUNCT_2:def 1
.= ( ( len ( the_arity_of D86 ) ) -tuples_on ( the_sort_of R4 ) ) by MSUALG_1:6;
L220:
now
set D87 = the (Element of ( ( len ( the_arity_of D86 ) ) -tuples_on ( the_sort_of R4 ) ));
L221: D87 in ( dom C60 ) by L219;
thus L222: (ex B47 being FinSequence st B47 in ( dom C60 )) by L221;
let C61 being FinSequence;
assume L223: C61 in ( dom C60 );
L224: (ex B48 being (Element of ( ( the_sort_of R4 ) * )) st (C61 = B48 & ( len B48 ) = ( len ( the_arity_of D86 ) ))) by L223 , L219;
thus L225: ( len ( the_arity_of D86 ) ) = ( len C61 ) by L224;
end;
L226: ( arity C60 ) = ( len ( the_arity_of D86 ) ) by L220 , MARGREL1:def 25;
L227: C58 is  opers_closed by L211 , L200;
L228: C58 is_closed_on C60 by L227 , UNIALG_2:def 4;
L229: D81 is_closed_on D86 by L214 , MSUALG_2:def 6;
L230: ( ( ( D81 # ) * (the Arity of R3) ) . D86 ) = ( Args (D86 , C57) ) by MSUALG_1:def 4
.= ( ( arity C60 ) -tuples_on C58 ) by L212 , L211 , L226 , MSUALG_1:6;
L231: ( D85 . C59 ) = ( (the Charact of C57) . D86 ) by L212 , MSUALG_1:def 13
.= ( D86 /. D81 ) by L209 , MSUALG_2:def 8
.= ( ( Den (D86 , R4) ) | ( ( ( D81 # ) * (the Arity of R3) ) . D86 ) ) by L229 , MSUALG_2:def 7
.= ( ( (the Charact of R4) . D86 ) | ( ( ( D81 # ) * (the Arity of R3) ) . D86 ) ) by MSUALG_1:def 6
.= ( C60 | ( ( arity C60 ) -tuples_on C58 ) ) by L210 , L217 , L230 , MSUALG_1:def 13;
thus L232: thesis by L231 , L228 , UNIALG_2:def 5;
end;
L233: ( dom D85 ) = (the carrier' of R3) by L213 , PARTFUN1:def 2
.= ( dom (the Charact of R4) ) by PARTFUN1:def 2
.= ( dom (the charact of D83) ) by L210 , MSUALG_1:def 13;
thus L234: thesis by L233 , L215 , UNIALG_2:def 6;
end;
theorem
L235: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for R4 being  non-empty MSAlgebra over R3 holds (for B49 being  non-empty (MSSubAlgebra of R4) holds ( 1-Alg B49 ) is (SubAlgebra of ( 1-Alg R4 )))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let R4 being  non-empty MSAlgebra over R3;
let C62 being  non-empty (MSSubAlgebra of R4);
L236: ((the carrier of ( 1-Alg C62 )) is (Subset of ( 1-Alg R4 )) & (for B50 being non  empty (Subset of ( 1-Alg R4 )) holds (B50 = (the carrier of ( 1-Alg C62 )) implies ((the charact of ( 1-Alg C62 )) = ( Opers (( 1-Alg R4 ) , B50) ) & B50 is  opers_closed)))) by L187 , L200 , L208;
thus L237: thesis by L236 , UNIALG_2:def 7;
end;
theorem
L238: (for B51 being non  empty non  void ManySortedSign holds (for B52 , B53 being MSAlgebra over B51 holds (B52 is (MSSubAlgebra of B53) iff B52 is (MSSubAlgebra of ( the MSAlgebra of B53 )))))
proof
let C63 being non  empty non  void ManySortedSign;
let C64 , C65 being MSAlgebra over C63;
thus L239: (C64 is (MSSubAlgebra of C65) implies C64 is (MSSubAlgebra of ( the MSAlgebra of C65 )))
proof
assume L240: C64 is (MSSubAlgebra of C65);
thus L241: (the Sorts of C64) is (MSSubset of ( the MSAlgebra of C65 )) by L240 , MSUALG_2:def 9;
thus L242: (for B54 being (MSSubset of ( the MSAlgebra of C65 )) holds (B54 = (the Sorts of C64) implies (B54 is  opers_closed & (the Charact of C64) = ( Opers (( the MSAlgebra of C65 ) , B54) ))))
proof
let C66 being (MSSubset of ( the MSAlgebra of C65 ));
assume that
L243: C66 = (the Sorts of C64);
reconsider D88 = C66 as (MSSubset of C65);
L244: D88 is  opers_closed by L240 , L243 , MSUALG_2:def 9;
L245: C66 is  opers_closed
proof
let C67 being (OperSymbol of C63);
L246: ( Den (C67 , C65) ) = ( (the Charact of ( the MSAlgebra of C65 )) . C67 ) by MSUALG_1:def 6
.= ( Den (C67 , ( the MSAlgebra of C65 )) ) by MSUALG_1:def 6;
L247: D88 is_closed_on C67 by L244 , MSUALG_2:def 6;
L248: ( rng ( ( Den (C67 , ( the MSAlgebra of C65 )) ) | ( ( ( C66 # ) * (the Arity of C63) ) . C67 ) ) ) c= ( ( C66 * (the ResultSort of C63) ) . C67 ) by L247 , L246 , MSUALG_2:def 5;
thus L249: thesis by L248 , MSUALG_2:def 5;
end;
L250: (for B55 being set holds (B55 in (the carrier' of C63) implies ( (the Charact of C64) . B55 ) = ( ( Opers (( the MSAlgebra of C65 ) , C66) ) . B55 )))
proof
let C68 being set;
assume L251: C68 in (the carrier' of C63);
reconsider D89 = C68 as (OperSymbol of C63) by L251;
L252: ( Den (D89 , C65) ) = ( (the Charact of ( the MSAlgebra of C65 )) . D89 ) by MSUALG_1:def 6
.= ( Den (D89 , ( the MSAlgebra of C65 )) ) by MSUALG_1:def 6;
L253: D88 is_closed_on D89 by L244 , MSUALG_2:def 6;
L254: C66 is_closed_on D89 by L245 , MSUALG_2:def 6;
L255: ( ( Opers (C65 , D88) ) . D89 ) = ( D89 /. D88 ) by MSUALG_2:def 8
.= ( ( Den (D89 , ( the MSAlgebra of C65 )) ) | ( ( ( C66 # ) * (the Arity of C63) ) . D89 ) ) by L252 , L253 , MSUALG_2:def 7
.= ( D89 /. C66 ) by L254 , MSUALG_2:def 7
.= ( ( Opers (( the MSAlgebra of C65 ) , C66) ) . D89 ) by MSUALG_2:def 8;
thus L256: thesis by L255 , L240 , L243 , MSUALG_2:def 9;
end;
thus L257: thesis by L250 , L245 , PBOOLE:3;
end;

end;

assume L243: C64 is (MSSubAlgebra of ( the MSAlgebra of C65 ));
thus L244: (the Sorts of C64) is (MSSubset of C65) by L243 , MSUALG_2:def 9;
let C69 being (MSSubset of C65);
assume that
L245: C69 = (the Sorts of C64);
reconsider D90 = C69 as (MSSubset of ( the MSAlgebra of C65 ));
L246: D90 is  opers_closed by L243 , L245 , MSUALG_2:def 9;
L247: C69 is  opers_closed
proof
let C70 being (OperSymbol of C63);
L248: ( Den (C70 , C65) ) = ( (the Charact of ( the MSAlgebra of C65 )) . C70 ) by MSUALG_1:def 6
.= ( Den (C70 , ( the MSAlgebra of C65 )) ) by MSUALG_1:def 6;
L249: D90 is_closed_on C70 by L246 , MSUALG_2:def 6;
L250: ( rng ( ( Den (C70 , C65) ) | ( ( ( C69 # ) * (the Arity of C63) ) . C70 ) ) ) c= ( ( C69 * (the ResultSort of C63) ) . C70 ) by L249 , L248 , MSUALG_2:def 5;
thus L251: thesis by L250 , MSUALG_2:def 5;
end;
L252: (for B56 being set holds (B56 in (the carrier' of C63) implies ( (the Charact of C64) . B56 ) = ( ( Opers (C65 , C69) ) . B56 )))
proof
let C71 being set;
assume L253: C71 in (the carrier' of C63);
reconsider D91 = C71 as (OperSymbol of C63) by L253;
L254: ( Den (D91 , C65) ) = ( (the Charact of ( the MSAlgebra of C65 )) . D91 ) by MSUALG_1:def 6
.= ( Den (D91 , ( the MSAlgebra of C65 )) ) by MSUALG_1:def 6;
L255: D90 is_closed_on D91 by L246 , MSUALG_2:def 6;
L256: C69 is_closed_on D91 by L247 , MSUALG_2:def 6;
L257: ( ( Opers (( the MSAlgebra of C65 ) , D90) ) . D91 ) = ( D91 /. D90 ) by MSUALG_2:def 8
.= ( ( Den (D91 , C65) ) | ( ( ( C69 # ) * (the Arity of C63) ) . D91 ) ) by L254 , L255 , MSUALG_2:def 7
.= ( D91 /. C69 ) by L256 , MSUALG_2:def 7
.= ( ( Opers (C65 , C69) ) . D91 ) by MSUALG_2:def 8;
thus L258: thesis by L257 , L243 , L245 , MSUALG_2:def 9;
end;
thus L259: thesis by L252 , L247 , PBOOLE:3;
end;
theorem
L260: (for B57 , B58 being Universal_Algebra holds (( signature B57 ) = ( signature B58 ) iff ( MSSign B57 ) = ( MSSign B58 )))
proof
L261: (for B59 , B60 being Universal_Algebra holds (( MSSign B59 ) = ( MSSign B60 ) implies ( signature B59 ) = ( signature B60 )))
proof
let C72 , C73 being Universal_Algebra;
reconsider D92 = ( ( *--> ( 0 ) ) * ( signature C72 ) ) as (Function of ( dom ( signature C72 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
reconsider D93 = ( ( *--> ( 0 ) ) * ( signature C73 ) ) as (Function of ( dom ( signature C73 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L262: (( MSSign C72 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C72 ) ) , D92 , ( ( dom ( signature C72 ) ) --> D1 ) #) & ( MSSign C73 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C73 ) ) , D93 , ( ( dom ( signature C73 ) ) --> D1 ) #)) by MSUALG_1:10;
assume L263: ( MSSign C72 ) = ( MSSign C73 );
L264:
now
let C74 being Nat;
assume L265: C74 in ( dom ( signature C72 ) );
reconsider D94 = ( ( signature C72 ) . C74 ) as (Element of ( NAT )) by L265 , PARTFUN1:4;
L266: C74 in ( dom ( ( *--> ( 0 ) ) * ( signature C72 ) ) ) by L265 , FINSEQ_3:120;
L267: ( ( *--> ( 0 ) ) . ( ( signature C73 ) . C74 ) ) = ( ( ( *--> ( 0 ) ) * ( signature C72 ) ) . C74 ) by L266 , L263 , L262 , FINSEQ_3:120
.= ( ( *--> ( 0 ) ) . ( ( signature C72 ) . C74 ) ) by L266 , FINSEQ_3:120;
reconsider D95 = ( ( signature C73 ) . C74 ) as (Element of ( NAT )) by L263 , L262 , L265 , PARTFUN1:4;
reconsider D96 = ( ( *--> ( 0 ) ) . D95 ) as FinSequence;
reconsider D97 = ( ( *--> ( 0 ) ) . D94 ) as FinSequence;
thus L268: ( ( signature C72 ) . C74 ) = ( len D97 ) by L20
.= ( len D96 ) by L267
.= ( ( signature C73 ) . C74 ) by L20;
end;
thus L269: thesis by L264 , L263 , L262 , FINSEQ_1:13;
end;
L270: (for B61 , B62 being Universal_Algebra holds (( signature B61 ) = ( signature B62 ) implies ( MSSign B61 ) = ( MSSign B62 )))
proof
let C75 , C76 being Universal_Algebra;
assume L271: ( signature C75 ) = ( signature C76 );
L272: C75 , C76 are_similar  by L271 , UNIALG_2:def 1;
thus L273: thesis by L272 , MSUHOM_1:10;
end;
thus L274: thesis by L270 , L261;
end;
theorem
L275: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for B63 being  non-empty MSAlgebra over R3 holds ((the carrier of R3) = { ( 0 ) } implies ( MSSign ( 1-Alg B63 ) ) = ( the ManySortedSign of R3 ))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let C77 being  non-empty MSAlgebra over R3;
reconsider D98 = ( ( *--> ( 0 ) ) * ( signature ( 1-Alg C77 ) ) ) as (Function of ( dom ( signature ( 1-Alg C77 ) ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L276: ( MSSign ( 1-Alg C77 ) ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature ( 1-Alg C77 ) ) ) , D98 , ( ( dom ( signature ( 1-Alg C77 ) ) ) --> D1 ) #) by MSUALG_1:10;
L277: ( dom (the ResultSort of R3) ) = (the carrier' of R3) by FUNCT_2:def 1;
L278: ( rng (the ResultSort of R3) ) <> ( {} ) by L277 , RELAT_1:42;
consider C78 being Nat such that L279: (the carrier' of R3) = ( Seg C78 ) by MSUALG_1:def 7;
L280: ( 1-Alg C77 ) = UAStr (# ( the_sort_of C77 ) , ( the_charact_of C77 ) #) by MSUALG_1:def 14;
L281: ( len ( signature ( 1-Alg C77 ) ) ) = ( len (the charact of ( 1-Alg C77 )) ) by UNIALG_1:def 4;
L282: ( dom ( signature ( 1-Alg C77 ) ) ) = ( dom (the charact of ( 1-Alg C77 )) ) by L281 , FINSEQ_3:29
.= ( dom (the Charact of C77) ) by L280 , MSUALG_1:def 13
.= (the carrier' of R3) by PARTFUN1:def 2;
L283: (the carrier' of R3) = ( dom D98 ) by L282 , FUNCT_2:def 1;
assume L284: (the carrier of R3) = { ( 0 ) };
L285: (for B64 being set holds (B64 in (the carrier' of R3) implies ( ( ( *--> ( 0 ) ) * ( signature ( 1-Alg C77 ) ) ) . B64 ) = ( (the Arity of R3) . B64 )))
proof
let C79 being set;
assume L286: C79 in (the carrier' of R3);
reconsider D99 = C79 as (OperSymbol of R3) by L286;
L287: D99 in ( Seg C78 ) by L279;
reconsider D100 = D99 as Nat by L287;
L288: D100 in ( dom ( signature ( 1-Alg C77 ) ) ) by L282;
L289: D100 in ( dom (the charact of ( 1-Alg C77 )) ) by L288 , L281 , FINSEQ_3:29;
reconsider D101 = ( (the charact of ( 1-Alg C77 )) . D100 ) as (PartFunc of ( (the carrier of ( 1-Alg C77 )) * ) , (the carrier of ( 1-Alg C77 ))) by L289 , UNIALG_1:1;
reconsider D102 = D101 as  homogeneous  quasi_total non  empty (PartFunc of ( (the carrier of ( 1-Alg C77 )) * ) , (the carrier of ( 1-Alg C77 ))) by L289 , MARGREL1:def 24;
set D103 = the (Element of ( dom D102 ));
set D104 = ( arity D102 );
L290: ( dom D102 ) c= ( (the carrier of ( 1-Alg C77 )) * ) by RELAT_1:def 18;
L291: D103 in ( (the carrier of ( 1-Alg C77 )) * ) by L290 , TARSKI:def 3;
reconsider D105 = D103 as (FinSequence of (the carrier of ( 1-Alg C77 ))) by L291 , FINSEQ_1:def 11;
L292: D105 in ( dom D102 );
L293: D102 = ( (the Charact of C77) . D99 ) by L280 , MSUALG_1:def 13
.= ( Den (D99 , C77) ) by MSUALG_1:def 6;
L294: D105 in ( Args (D99 , C77) ) by L293 , L292 , FUNCT_2:def 1;
L295: D105 in ( ( len ( the_arity_of D99 ) ) -tuples_on ( the_sort_of C77 ) ) by L294 , MSUALG_1:6;
L296: ( len ( the_arity_of D99 ) ) = ( len D105 ) by L295 , CARD_1:def 7
.= D104 by MARGREL1:def 25;
L297: ( ( ( *--> ( 0 ) ) * ( signature ( 1-Alg C77 ) ) ) . D99 ) = ( ( *--> ( 0 ) ) . ( ( signature ( 1-Alg C77 ) ) . D99 ) ) by L282 , FUNCT_1:13
.= ( ( *--> ( 0 ) ) . D104 ) by L282 , UNIALG_1:def 4
.= ( D104 |-> ( 0 ) ) by FINSEQ_2:def 6
.= ( the_arity_of D99 ) by L284 , L296 , L9
.= ( (the Arity of R3) . D99 ) by MSUALG_1:def 1;
thus L298: thesis by L297;
end;
L299: ( rng (the ResultSort of R3) ) c= { ( 0 ) } by L284 , RELAT_1:def 19;
L300: ((the carrier' of R3) = ( dom (the ResultSort of R3) ) & ( rng (the ResultSort of R3) ) = { ( 0 ) }) by L299 , L278 , FUNCT_2:def 1 , ZFMISC_1:33;
L301: ((the carrier' of R3) = ( dom (the Arity of R3) ) & (the ResultSort of ( MSSign ( 1-Alg C77 ) )) = (the ResultSort of R3)) by L300 , L276 , L282 , FUNCOP_1:9 , FUNCT_2:def 1;
thus L302: thesis by L301 , L284 , L276 , L282 , L283 , L285 , FUNCT_1:2;
end;
theorem
L303: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for B65 , B66 being  non-empty MSAlgebra over R3 holds (( 1-Alg B65 ) = ( 1-Alg B66 ) implies ( the MSAlgebra of B65 ) = ( the MSAlgebra of B66 ))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let C80 , C81 being  non-empty MSAlgebra over R3;
assume that
L304: ( 1-Alg C80 ) = ( 1-Alg C81 );
L305: ( 1-Alg C81 ) = UAStr (# ( the_sort_of C81 ) , ( the_charact_of C81 ) #) by MSUALG_1:def 14;
L306: ( 1-Alg C80 ) = UAStr (# ( the_sort_of C80 ) , ( the_charact_of C80 ) #) by MSUALG_1:def 14;
L307:
now
let C82 being set;
assume that
L308: C82 in (the carrier of R3);
L309: (ex B67 being (Component of (the Sorts of C81)) st ( (the Sorts of C81) . C82 ) = B67)
proof
reconsider D106 = ( (the Sorts of C81) . C82 ) as (Component of (the Sorts of C81)) by L308 , PBOOLE:139;
take D106;
thus L310: thesis;
end;
L311: (ex B68 being (Component of (the Sorts of C80)) st ( (the Sorts of C80) . C82 ) = B68)
proof
reconsider D107 = ( (the Sorts of C80) . C82 ) as (Component of (the Sorts of C80)) by L308 , PBOOLE:139;
take D107;
thus L312: thesis;
end;
L313: ( (the Sorts of C80) . C82 ) = ( the_sort_of C81 ) by L311 , L304 , L306 , L305 , MSUALG_1:def 12
.= ( (the Sorts of C81) . C82 ) by L309 , MSUALG_1:def 12;
thus L314: ( (the Sorts of C80) . C82 ) = ( (the Sorts of C81) . C82 ) by L313;
end;
L315: (the Charact of C80) = (the charact of ( 1-Alg C80 )) by L306 , MSUALG_1:def 13
.= (the Charact of C81) by L304 , L305 , MSUALG_1:def 13;
thus L316: thesis by L315 , L307 , PBOOLE:3;
end;
theorem
L317: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for B69 being  non-empty MSAlgebra over R3 holds ((the carrier of R3) = { ( 0 ) } implies (the Sorts of B69) = (the Sorts of ( MSAlg ( 1-Alg B69 ) )))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let C83 being  non-empty MSAlgebra over R3;
assume L318: (the carrier of R3) = { ( 0 ) };
L319:
now
let C84 being set;
assume L320: C84 in (the carrier of R3);
L321: (ex B70 being (Component of (the Sorts of C83)) st ( (the Sorts of C83) . C84 ) = B70)
proof
reconsider D108 = ( (the Sorts of C83) . C84 ) as (Component of (the Sorts of C83)) by L320 , PBOOLE:139;
take D108;
thus L322: thesis;
end;
L323: ( ( { ( 0 ) } --> ( the_sort_of C83 ) ) . C84 ) = ( the_sort_of C83 ) by L318 , L320 , FUNCOP_1:7;
thus L324: ( (the Sorts of C83) . C84 ) = ( ( { ( 0 ) } --> ( the_sort_of C83 ) ) . C84 ) by L323 , L321 , MSUALG_1:def 12;
end;
L325: ( 1-Alg C83 ) = UAStr (# ( the_sort_of C83 ) , ( the_charact_of C83 ) #) by MSUALG_1:def 14;
L326: (( MSAlg ( 1-Alg C83 ) ) = MSAlgebra (# ( MSSorts ( 1-Alg C83 ) ) , ( MSCharact ( 1-Alg C83 ) ) #) & ( MSSorts ( 1-Alg C83 ) ) = ( ( 0 ) .--> ( the_sort_of C83 ) )) by L325 , MSUALG_1:def 9 , MSUALG_1:def 11;
L327: ( { ( 0 ) } --> ( the_sort_of C83 ) ) is (ManySortedSet of (the carrier of R3)) by L318;
thus L328: thesis by L327 , L326 , L319 , PBOOLE:3;
end;
theorem
L329: (for R3 being  segmental non  void 1 -element ManySortedSign holds (for B71 being  non-empty MSAlgebra over R3 holds ((the carrier of R3) = { ( 0 ) } implies ( MSAlg ( 1-Alg B71 ) ) = ( the MSAlgebra of B71 ))))
proof
let R3 being  segmental non  void 1 -element ManySortedSign;
let C85 being  non-empty MSAlgebra over R3;
reconsider D109 = ( the_sort_of ( MSAlg ( 1-Alg C85 ) ) ) as (Component of (the Sorts of ( MSAlg ( 1-Alg C85 ) ))) by MSUALG_1:def 12;
assume L330: (the carrier of R3) = { ( 0 ) };
L331: ( MSSign ( 1-Alg C85 ) ) = ( the ManySortedSign of R3 ) by L330 , L275;
reconsider D110 = ( MSAlg ( 1-Alg C85 ) ) as  strict MSAlgebra over R3 by L331;
reconsider D111 = D110 as  non-empty  strict MSAlgebra over R3 by MSUALG_1:def 3;
L332: ( 1-Alg D111 ) = UAStr (# ( the_sort_of D111 ) , ( the_charact_of D111 ) #) by MSUALG_1:def 14;
reconsider D112 = D109 as (Component of (the Sorts of D111));
L333: ( 1-Alg ( MSAlg ( 1-Alg C85 ) ) ) = UAStr (# ( the_sort_of ( MSAlg ( 1-Alg C85 ) ) ) , ( the_charact_of ( MSAlg ( 1-Alg C85 ) ) ) #) by MSUALG_1:def 14;
L334: (the charact of ( 1-Alg C85 )) = ( the_charact_of ( MSAlg ( 1-Alg C85 ) ) ) by L333 , MSUALG_1:9
.= (the Charact of D111) by MSUALG_1:def 13
.= (the charact of ( 1-Alg D111 )) by L332 , MSUALG_1:def 13;
L335: D112 = ( the_sort_of D111 ) by MSUALG_1:def 12;
L336: (the carrier of ( 1-Alg C85 )) = (the carrier of ( 1-Alg D111 )) by L335 , L333 , L332 , MSUALG_1:9;
thus L337: thesis by L336 , L334 , L303;
end;
theorem
L338: (for B72 being Universal_Algebra holds (for B73 being  strict  non-empty (MSSubAlgebra of ( MSAlg B72 )) holds ((the carrier of ( MSSign B72 )) = { ( 0 ) } implies ( 1-Alg B73 ) is (SubAlgebra of B72))))
proof
let C86 being Universal_Algebra;
let C87 being  strict  non-empty (MSSubAlgebra of ( MSAlg C86 ));
assume L339: (the carrier of ( MSSign C86 )) = { ( 0 ) };
L340: ( MSAlg ( 1-Alg C87 ) ) = ( the MSAlgebra of C87 ) by L339 , L329;
thus L341: thesis by L340 , L182;
end;
begin
theorem
L342: (for B74 being Universal_Algebra holds (for B75 , B76 being  strict (SubAlgebra of B74) holds (for B77 , B78 being  strict  non-empty (MSSubAlgebra of ( MSAlg B74 )) holds ((B77 = ( MSAlg B75 ) & B78 = ( MSAlg B76 )) implies ( (the Sorts of B77) \/ (the Sorts of B78) ) = ( ( 0 ) .--> ( (the carrier of B75) \/ (the carrier of B76) ) )))))
proof
let C88 being Universal_Algebra;
let C89 , C90 being  strict (SubAlgebra of C88);
let C91 , C92 being  strict  non-empty (MSSubAlgebra of ( MSAlg C88 ));
assume that
L343: C91 = ( MSAlg C89 )
and
L344: C92 = ( MSAlg C90 );
L345: C91 = MSAlgebra (# ( MSSorts C89 ) , ( MSCharact C89 ) #) by L343 , MSUALG_1:def 11;
L346: (the Sorts of C91) = ( ( 0 ) .--> (the carrier of C89) ) by L345 , MSUALG_1:def 9;
reconsider D113 = ( ( *--> ( 0 ) ) * ( signature C88 ) ) as (Function of ( dom ( signature C88 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L347: ( MSSign C88 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C88 ) ) , D113 , ( ( dom ( signature C88 ) ) --> D1 ) #) by MSUALG_1:10;
reconsider D114 = ( ( 0 ) .--> ( (the carrier of C89) \/ (the carrier of C90) ) ) as (ManySortedSet of (the carrier of ( MSSign C88 ))) by L347;
L348: C92 = MSAlgebra (# ( MSSorts C90 ) , ( MSCharact C90 ) #) by L344 , MSUALG_1:def 11;
L349:
now
let C93 being set;
assume L350: C93 in (the carrier of ( MSSign C88 ));
L351: C93 = ( 0 ) by L350 , L347 , TARSKI:def 1;
L352: ( D114 . C93 ) = ( ( ( 0 ) .--> ( (the carrier of C89) \/ (the carrier of C90) ) ) . ( 0 ) ) by L347 , L350 , TARSKI:def 1
.= ( (the carrier of C89) \/ (the carrier of C90) ) by FUNCOP_1:72
.= ( ( ( ( 0 ) .--> (the carrier of C89) ) . ( 0 ) ) \/ (the carrier of C90) ) by FUNCOP_1:72
.= ( ( ( ( 0 ) .--> (the carrier of C89) ) . ( 0 ) ) \/ ( ( ( 0 ) .--> (the carrier of C90) ) . ( 0 ) ) ) by FUNCOP_1:72
.= ( ( (the Sorts of C91) . C93 ) \/ ( (the Sorts of C92) . C93 ) ) by L346 , L348 , L351 , MSUALG_1:def 9;
thus L353: ( D114 . C93 ) = ( ( (the Sorts of C91) . C93 ) \/ ( (the Sorts of C92) . C93 ) ) by L352;
end;
thus L354: thesis by L349 , PBOOLE:def 4;
end;
theorem
L355: (for B79 being Universal_Algebra holds (for B80 , B81 being  strict  non-empty (SubAlgebra of B79) holds (for B82 , B83 being  strict  non-empty (MSSubAlgebra of ( MSAlg B79 )) holds ((B82 = ( MSAlg B80 ) & B83 = ( MSAlg B81 )) implies ( (the Sorts of B82) /\ (the Sorts of B83) ) = ( ( 0 ) .--> ( (the carrier of B80) /\ (the carrier of B81) ) )))))
proof
let C94 being Universal_Algebra;
let C95 , C96 being  strict  non-empty (SubAlgebra of C94);
let C97 , C98 being  strict  non-empty (MSSubAlgebra of ( MSAlg C94 ));
assume that
L356: C97 = ( MSAlg C95 )
and
L357: C98 = ( MSAlg C96 );
L358: C97 = MSAlgebra (# ( MSSorts C95 ) , ( MSCharact C95 ) #) by L356 , MSUALG_1:def 11;
L359: (the Sorts of C97) = ( ( 0 ) .--> (the carrier of C95) ) by L358 , MSUALG_1:def 9;
reconsider D115 = ( ( *--> ( 0 ) ) * ( signature C94 ) ) as (Function of ( dom ( signature C94 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L360: ( MSSign C94 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C94 ) ) , D115 , ( ( dom ( signature C94 ) ) --> D1 ) #) by MSUALG_1:10;
reconsider D116 = ( ( 0 ) .--> ( (the carrier of C95) /\ (the carrier of C96) ) ) as (ManySortedSet of (the carrier of ( MSSign C94 ))) by L360;
L361: C98 = MSAlgebra (# ( MSSorts C96 ) , ( MSCharact C96 ) #) by L357 , MSUALG_1:def 11;
L362:
now
let C99 being set;
assume L363: C99 in (the carrier of ( MSSign C94 ));
L364: C99 = ( 0 ) by L363 , L360 , TARSKI:def 1;
L365: ( D116 . C99 ) = ( (the carrier of C95) /\ (the carrier of C96) ) by L364 , FUNCOP_1:72
.= ( ( ( ( 0 ) .--> (the carrier of C95) ) . ( 0 ) ) /\ (the carrier of C96) ) by FUNCOP_1:72
.= ( ( ( ( 0 ) .--> (the carrier of C95) ) . ( 0 ) ) /\ ( ( ( 0 ) .--> (the carrier of C96) ) . ( 0 ) ) ) by FUNCOP_1:72
.= ( ( (the Sorts of C97) . C99 ) /\ ( (the Sorts of C98) . C99 ) ) by L359 , L361 , L364 , MSUALG_1:def 9;
thus L366: ( D116 . C99 ) = ( ( (the Sorts of C97) . C99 ) /\ ( (the Sorts of C98) . C99 ) ) by L365;
end;
thus L367: thesis by L362 , PBOOLE:def 5;
end;
theorem
L368: (for B84 being  strict Universal_Algebra holds (for B85 , B86 being  strict  non-empty (SubAlgebra of B84) holds (for B87 , B88 being  strict  non-empty (MSSubAlgebra of ( MSAlg B84 )) holds ((B87 = ( MSAlg B85 ) & B88 = ( MSAlg B86 )) implies ( MSAlg ( B85 "\/" B86 ) ) = ( B87 "\/" B88 )))))
proof
let C100 being  strict Universal_Algebra;
let C101 , C102 being  strict  non-empty (SubAlgebra of C100);
reconsider D117 = ( MSAlg ( C101 "\/" C102 ) ) as (MSSubAlgebra of ( MSAlg C100 )) by L124;
let C103 , C104 being  strict  non-empty (MSSubAlgebra of ( MSAlg C100 ));
assume that
L369: C103 = ( MSAlg C101 )
and
L370: C104 = ( MSAlg C102 );
L371: ( MSSign ( C101 "\/" C102 ) ) = ( MSSign C100 ) by L25;
reconsider D118 = D117 as  strict  non-empty (MSSubAlgebra of ( MSAlg C100 )) by L371;
L372: (for B89 being (MSSubset of ( MSAlg C100 )) holds (B89 = ( (the Sorts of C103) \/ (the Sorts of C104) ) implies D118 = ( GenMSAlg B89 )))
proof
L373: ((the carrier of C101) is (Subset of C100) & (the carrier of C102) is (Subset of C100)) by UNIALG_2:def 7;
reconsider D119 = ( (the carrier of C101) \/ (the carrier of C102) ) as non  empty (Subset of C100) by L373 , XBOOLE_1:8;
reconsider D120 = ( ( *--> ( 0 ) ) * ( signature C100 ) ) as (Function of ( dom ( signature C100 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
set D121 = D118;
reconsider D122 = (the Sorts of D121) as (ManySortedSet of (the carrier of ( MSSign C100 )));
L374: ( MSSign C100 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C100 ) ) , D120 , ( ( dom ( signature C100 ) ) --> D1 ) #) by MSUALG_1:10;
reconsider D123 = ( 0 ) as (Element of ( MSSign C100 )) by L374;
let C105 being (MSSubset of ( MSAlg C100 ));
assume that
L375: C105 = ( (the Sorts of C103) \/ (the Sorts of C104) );
L376: (for B90 being (MSSubAlgebra of ( MSAlg C100 )) holds (C105 is (MSSubset of B90) implies D121 is (MSSubAlgebra of B90)))
proof
let C106 being (MSSubAlgebra of ( MSAlg C100 ));
assume L377: C105 is (MSSubset of C106);
per cases ;
suppose L378: C106 is  non-empty;

reconsider D124 = C106 as  non-empty (MSSubAlgebra of ( MSAlg C100 )) by L378;
L379: ( 1-Alg D124 ) is (SubAlgebra of ( 1-Alg ( MSAlg C100 ) )) by L235;
reconsider D125 = ( 1-Alg D124 ) as  strict (SubAlgebra of C100) by L379 , MSUALG_1:9;
L380: C105 c= (the Sorts of D124) by L377 , PBOOLE:def 18;
L381: ( C105 . D123 ) c= ( (the Sorts of D124) . D123 ) by L380 , PBOOLE:def 2;
L382: (( the MSAlgebra of D124 ) = ( MSAlg ( 1-Alg D124 ) ) & ( MSAlg ( 1-Alg D124 ) ) = MSAlgebra (# ( MSSorts ( 1-Alg D124 ) ) , ( MSCharact ( 1-Alg D124 ) ) #)) by L374 , L329 , MSUALG_1:def 11;
L383: ( (the Sorts of D124) . ( 0 ) ) = ( ( ( 0 ) .--> (the carrier of ( 1-Alg D124 )) ) . ( 0 ) ) by L382 , MSUALG_1:def 9;
L384: ( C105 . ( 0 ) ) = ( ( ( 0 ) .--> D119 ) . ( 0 ) ) by L369 , L370 , L375 , L342
.= D119 by FUNCOP_1:72;
L385: ( (the carrier of C101) \/ (the carrier of C102) ) c= (the carrier of D125) by L384 , L381 , L383 , FUNCOP_1:72;
L386: ( GenUnivAlg D119 ) is (SubAlgebra of ( 1-Alg D124 )) by L385 , UNIALG_2:def 12;
L387: ( C101 "\/" C102 ) is (SubAlgebra of ( 1-Alg D124 )) by L386 , UNIALG_2:def 13;
L388: D118 is (MSSubAlgebra of ( MSAlg ( 1-Alg D124 ) )) by L387 , L124;
L389: ( 1-Alg D124 ) is (SubAlgebra of C100) by L379 , MSUALG_1:9;
L390: ( MSSign C100 ) = ( MSSign ( 1-Alg D124 ) ) by L389 , L25;
L391: D121 is (MSSubAlgebra of ( the MSAlgebra of D124 )) by L390 , L374 , L388 , L329;
thus L392: thesis by L391 , L238;
end;
suppose L393: (not C106 is  non-empty);

L394: (the Sorts of C106) is non  non-empty by L393 , MSUALG_1:def 3;
L395: (ex B91 being set st (B91 in (the carrier of ( MSSign C100 )) & ( (the Sorts of C106) . B91 ) is  empty)) by L394 , PBOOLE:def 13;
reconsider D126 = ( ( 0 ) .--> (the carrier of C101) ) as (ManySortedSet of (the carrier of ( MSSign C100 ))) by L374;
set D127 = the (Element of C101);
L396: C105 c= (the Sorts of C106) by L377 , PBOOLE:def 18;
L397: ( C105 . D123 ) c= ( (the Sorts of C106) . D123 ) by L396 , PBOOLE:def 2;
L398: C103 = MSAlgebra (# ( MSSorts C101 ) , ( MSCharact C101 ) #) by L369 , MSUALG_1:def 11;
L399: C105 = ( D126 \/ (the Sorts of C104) ) by L398 , L375 , MSUALG_1:def 9;
L400: ( C105 . D123 ) = ( ( D126 . D123 ) \/ ( (the Sorts of C104) . D123 ) ) by L399 , PBOOLE:def 4;
L401: D123 in { ( 0 ) } by TARSKI:def 1;
L402: ( D126 . D123 ) = (the carrier of C101) by L401 , FUNCOP_1:7;
L403: D127 in ( C105 . D123 ) by L402 , L400 , XBOOLE_0:def 3;
thus L404: thesis by L403 , L374 , L395 , L397 , TARSKI:def 1;
end;
end;
L406: D121 = MSAlgebra (# ( MSSorts ( C101 "\/" C102 ) ) , ( MSCharact ( C101 "\/" C102 ) ) #) by MSUALG_1:def 11;
L407: (the Sorts of D121) = ( ( 0 ) .--> (the carrier of ( C101 "\/" C102 )) ) by L406 , MSUALG_1:def 9;
L408: ( (the Sorts of C103) \/ (the Sorts of C104) ) c= D122
proof
let C107 being set;
L409: ( C101 "\/" C102 ) = ( GenUnivAlg D119 ) by UNIALG_2:def 13;
assume L410: C107 in (the carrier of ( MSSign C100 ));
L411: ( D122 . C107 ) = ( ( ( 0 ) .--> (the carrier of ( C101 "\/" C102 )) ) . ( 0 ) ) by L410 , L407 , L374 , TARSKI:def 1
.= (the carrier of ( C101 "\/" C102 )) by FUNCOP_1:72;
L412: ( ( (the Sorts of C103) \/ (the Sorts of C104) ) . C107 ) = ( ( (the Sorts of C103) \/ (the Sorts of C104) ) . ( 0 ) ) by L374 , L410 , TARSKI:def 1
.= ( ( ( 0 ) .--> ( (the carrier of C101) \/ (the carrier of C102) ) ) . ( 0 ) ) by L369 , L370 , L342
.= ( (the carrier of C101) \/ (the carrier of C102) ) by FUNCOP_1:72;
thus L413: thesis by L412 , L411 , L409 , UNIALG_2:def 12;
end;
L414: C105 is (MSSubset of D121) by L408 , L375 , PBOOLE:def 18;
thus L415: thesis by L414 , L376 , MSUALG_2:def 17;
end;
thus L416: thesis by L372 , MSUALG_2:def 18;
end;
registration
let C108 being  with_const_op Universal_Algebra;
cluster ( MSSign C108 ) -> non  void  strict  segmental  trivial  all-with_const_op;
coherence
proof
reconsider D128 = ( ( *--> ( 0 ) ) * ( signature C108 ) ) as (Function of ( dom ( signature C108 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L417: ( MSSign C108 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C108 ) ) , D128 , ( ( dom ( signature C108 ) ) --> D1 ) #) by MSUALG_1:10;
L418: ( MSSign C108 ) is  all-with_const_op
proof
let C109 being (SortSymbol of ( MSSign C108 ));
consider C110 being (operation of C108) such that L419: ( arity C110 ) = ( 0 ) by UNIALG_2:def 11;
L420: ( Seg ( len (the charact of C108) ) ) = ( dom (the charact of C108) ) by FINSEQ_1:def 3;
consider C111 being Nat such that L421: C111 in ( Seg ( len (the charact of C108) ) ) and L422: ( (the charact of C108) . C111 ) = C110 by L420 , FINSEQ_2:10;
L423: ( len ( signature C108 ) ) = ( len (the charact of C108) ) by UNIALG_1:def 4;
L424: C111 in ( dom ( signature C108 ) ) by L423 , L421 , FINSEQ_1:def 3;
reconsider D129 = C111 as (OperSymbol of ( MSSign C108 )) by L417 , L421 , L423 , FINSEQ_1:def 3;
take D129;
L425: ( ( *--> ( 0 ) ) . ( ( signature C108 ) . D129 ) ) = ( ( *--> ( 0 ) ) . ( 0 ) ) by L419 , L422 , L424 , UNIALG_1:def 4
.= ( {} ) by L1;
thus L426: ( (the Arity of ( MSSign C108 )) . D129 ) = ( {} ) by L425 , L417 , FUNCT_1:13;
L427: ( (the ResultSort of ( MSSign C108 )) . D129 ) = ( 0 ) by L417 , TARSKI:def 1;
thus L428: ( (the ResultSort of ( MSSign C108 )) . D129 ) = C109 by L427 , L417 , TARSKI:def 1;
end;
thus L429: thesis by L418;
end;
end;
theorem
L431: (for B92 being  with_const_op Universal_Algebra holds (for B93 , B94 being  strict  non-empty (SubAlgebra of B92) holds (for B95 , B96 being  strict  non-empty (MSSubAlgebra of ( MSAlg B92 )) holds ((B95 = ( MSAlg B93 ) & B96 = ( MSAlg B94 )) implies ( MSAlg ( B93 /\ B94 ) ) = ( B95 /\ B96 )))))
proof
let C112 being  with_const_op Universal_Algebra;
let C113 , C114 being  strict  non-empty (SubAlgebra of C112);
reconsider D130 = ( ( *--> ( 0 ) ) * ( signature C112 ) ) as (Function of ( dom ( signature C112 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L432: ( MSSign C112 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature C112 ) ) , D130 , ( ( dom ( signature C112 ) ) --> D1 ) #) by MSUALG_1:10;
L433: ( MSAlg ( C113 /\ C114 ) ) = MSAlgebra (# ( MSSorts ( C113 /\ C114 ) ) , ( MSCharact ( C113 /\ C114 ) ) #) by MSUALG_1:def 11;
L434: (the Sorts of ( MSAlg ( C113 /\ C114 ) )) = ( ( 0 ) .--> (the carrier of ( C113 /\ C114 )) ) by L433 , MSUALG_1:def 9;
L435: ( dom (the Sorts of ( MSAlg ( C113 /\ C114 ) )) ) = (the carrier of ( MSSign C112 )) by L434 , L432 , FUNCOP_1:13;
reconsider D131 = (the Sorts of ( MSAlg ( C113 /\ C114 ) )) as (ManySortedSet of (the carrier of ( MSSign C112 ))) by L435 , PARTFUN1:def 2 , RELAT_1:def 18;
let C115 , C116 being  strict  non-empty (MSSubAlgebra of ( MSAlg C112 ));
assume that
L436: (C115 = ( MSAlg C113 ) & C116 = ( MSAlg C114 ));
L437:
now
let C117 being set;
L438: (the carrier of C113) meets (the carrier of C114) by UNIALG_2:17;
assume L439: C117 in (the carrier of ( MSSign C112 ));
thus L440: ( D131 . C117 ) = ( ( ( 0 ) .--> (the carrier of ( C113 /\ C114 )) ) . ( 0 ) ) by L439 , L434 , L432 , TARSKI:def 1
.= (the carrier of ( C113 /\ C114 )) by FUNCOP_1:72
.= ( (the carrier of C113) /\ (the carrier of C114) ) by L438 , UNIALG_2:def 9
.= ( ( ( 0 ) .--> ( (the carrier of C113) /\ (the carrier of C114) ) ) . ( 0 ) ) by FUNCOP_1:72
.= ( ( (the Sorts of C115) /\ (the Sorts of C116) ) . ( 0 ) ) by L436 , L355
.= ( ( (the Sorts of C115) /\ (the Sorts of C116) ) . C117 ) by L432 , L439 , TARSKI:def 1;
end;
L441: D131 = ( (the Sorts of C115) /\ (the Sorts of C116) ) by L437 , PBOOLE:3;
L442: ( MSSign ( C113 /\ C114 ) ) = ( MSSign C112 ) by L25;
reconsider D132 = ( MSAlg ( C113 /\ C114 ) ) as  strict  non-empty (MSSubAlgebra of ( MSAlg C112 )) by L442 , L124;
L443: (for B97 being (MSSubset of ( MSAlg C112 )) holds (B97 = (the Sorts of D132) implies (B97 is  opers_closed & (the Charact of D132) = ( Opers (( MSAlg C112 ) , B97) )))) by MSUALG_2:def 9;
thus L444: thesis by L443 , L441 , MSUALG_2:def 16;
end;
registration
let C118 being  quasi_total UAStr;
cluster ( the UAStr of C118 ) ->  quasi_total;
coherence
proof
thus L445: (the charact of ( the UAStr of C118 )) is  quasi_total;
end;
end;
registration
let C119 being  partial UAStr;
cluster ( the UAStr of C119 ) ->  partial;
coherence
proof
thus L447: (the charact of ( the UAStr of C119 )) is  homogeneous;
end;
end;
registration
let C120 being  non-empty UAStr;
cluster ( the UAStr of C120 ) ->  non-empty;
coherence
proof
thus L449: ((the charact of ( the UAStr of C120 )) <> ( {} ) & (the charact of ( the UAStr of C120 )) is  non-empty);
end;
end;
registration
let C121 being  with_const_op Universal_Algebra;
cluster ( the UAStr of C121 ) ->  with_const_op;
coherence
proof
consider C122 being (operation of C121) such that L451: ( arity C122 ) = ( 0 ) by UNIALG_2:def 11;
reconsider D133 = C122 as (operation of ( the UAStr of C121 ));
take D133;
thus L452: thesis by L451;
end;
end;
theorem
L454: (for B98 being  with_const_op Universal_Algebra holds ( UnSubAlLattice ( the UAStr of B98 ) ) , ( MSSubAlLattice ( MSAlg ( the UAStr of B98 ) ) ) are_isomorphic )
proof
let C123 being  with_const_op Universal_Algebra;
set D134 = ( the UAStr of C123 );
reconsider D135 = ( ( *--> ( 0 ) ) * ( signature D134 ) ) as (Function of ( dom ( signature D134 ) ) , ( { ( 0 ) } * )) by MSUALG_1:2;
L455: ( MSSign D134 ) = ManySortedSign (# { ( 0 ) } , ( dom ( signature D134 ) ) , D135 , ( ( dom ( signature D134 ) ) --> D1 ) #) by MSUALG_1:10;
defpred S1[ set , set ] means (ex B99 being  strict (SubAlgebra of D134) st (B99 = $1 & $2 = ( MSAlg B99 )));
L456: (for B100 being (Element of ( Sub D134 )) holds (ex B101 being (Element of ( MSSub ( MSAlg D134 ) )) st S1[ B100 , B101 ]))
proof
let C124 being (Element of ( Sub D134 ));
reconsider D136 = C124 as  strict (SubAlgebra of D134) by UNIALG_2:def 14;
L457: ( MSSign D134 ) = ( MSSign D136 ) by L25;
L458: ( MSAlg D136 ) is  strict  non-empty  strict  non-empty  strict  non-empty  strict  non-empty (MSSubAlgebra of ( MSAlg D134 )) by L457 , L124;
reconsider D137 = ( MSAlg D136 ) as (Element of ( MSSub ( MSAlg D134 ) )) by L458 , MSUALG_2:def 19;
take D137;
take D136;
thus L459: thesis;
end;
consider C125 being (Function of ( Sub D134 ) , ( MSSub ( MSAlg D134 ) )) such that L460: (for B102 being (Element of ( Sub D134 )) holds S1[ B102 , ( C125 . B102 ) ]) from FUNCT_2:sch 3(L456);
reconsider D138 = C125 as (Function of (the carrier of ( UnSubAlLattice D134 )) , (the carrier of ( MSSubAlLattice ( MSAlg D134 ) )));
L461: D138 is (Homomorphism of ( UnSubAlLattice D134 ) , ( MSSubAlLattice ( MSAlg D134 ) ))
proof
let C126 , C127 being (Element of ( UnSubAlLattice D134 ));
reconsider D139 = C126 , D140 = C127 as (Element of ( Sub D134 ));
reconsider D141 = D139 , D142 = D140 as  strict  non-empty (SubAlgebra of D134) by UNIALG_2:def 14;
reconsider D143 = ( D141 "\/" D142 ) as (Element of ( Sub D134 )) by UNIALG_2:def 14;
reconsider D144 = ( D141 /\ D142 ) as (Element of ( Sub D134 )) by UNIALG_2:def 14;
L462: (ex B103 being  strict  non-empty (SubAlgebra of D134) st (B103 = D143 & ( D138 . D143 ) = ( MSAlg B103 ))) by L460;
L463: ( MSSign D142 ) = ( MSSign D134 ) by L25;
reconsider D145 = ( MSAlg D142 ) as  strict  non-empty (MSSubAlgebra of ( MSAlg D134 )) by L463 , L124;
consider C128 being  strict  non-empty (SubAlgebra of D134) such that L464: C128 = D142 and L465: ( D138 . D142 ) = ( MSAlg C128 ) by L460;
L466: ( MSSign C128 ) = ( MSSign D134 ) by L25;
reconsider D146 = ( MSAlg C128 ) as  strict  non-empty (MSSubAlgebra of ( MSAlg D134 )) by L466 , L124;
L467: ( MSSign D141 ) = ( MSSign D134 ) by L25;
reconsider D147 = ( MSAlg D141 ) as  strict  non-empty (MSSubAlgebra of ( MSAlg D134 )) by L467 , L124;
consider C129 being  strict  non-empty (SubAlgebra of D134) such that L468: C129 = D141 and L469: ( D138 . D141 ) = ( MSAlg C129 ) by L460;
L470: ( MSSign C129 ) = ( MSSign D134 ) by L25;
reconsider D148 = ( MSAlg C129 ) as  strict  non-empty (MSSubAlgebra of ( MSAlg D134 )) by L470 , L124;
L471: (ex B104 being  strict  non-empty (SubAlgebra of D134) st (B104 = D144 & ( D138 . D144 ) = ( MSAlg B104 ))) by L460;
L472: ( D138 . ( C126 "/\" C127 ) ) = ( D138 . ( ( UniAlg_meet D134 ) . (D139 , D140) ) ) by LATTICES:def 2
.= ( MSAlg ( D141 /\ D142 ) ) by L471 , UNIALG_2:def 16
.= ( D147 /\ D145 ) by L431
.= ( (the L_meet of ( MSSubAlLattice ( MSAlg D134 ) )) . (( D138 . C126 ) , ( D138 . C127 )) ) by L468 , L469 , L464 , L465 , MSUALG_2:def 21
.= ( ( D138 . C126 ) "/\" ( D138 . C127 ) ) by LATTICES:def 2;
L473: ( D138 . ( C126 "\/" C127 ) ) = ( D138 . ( ( UniAlg_join D134 ) . (D139 , D140) ) ) by LATTICES:def 1
.= ( MSAlg ( D141 "\/" D142 ) ) by L462 , UNIALG_2:def 15
.= ( D148 "\/" D146 ) by L468 , L464 , L368
.= ( (the L_join of ( MSSubAlLattice ( MSAlg D134 ) )) . (( D138 . C126 ) , ( D138 . C127 )) ) by L469 , L465 , MSUALG_2:def 20
.= ( ( D138 . C126 ) "\/" ( D138 . C127 ) ) by LATTICES:def 1;
thus L474: thesis by L473 , L472;
end;
reconsider D149 = D138 as (Homomorphism of ( UnSubAlLattice D134 ) , ( MSSubAlLattice ( MSAlg D134 ) )) by L461;
take D149;
L475:
now
let C130 , C131 being set;
assume that
L476: (C130 in ( dom D149 ) & C131 in ( dom D149 ))
and
L477: ( D149 . C130 ) = ( D149 . C131 );
reconsider D150 = C130 , D151 = C131 as (Element of ( Sub D134 )) by L476 , FUNCT_2:def 1;
consider C132 being  strict (SubAlgebra of D134) such that L478: C132 = D150 and L479: ( D149 . D150 ) = ( MSAlg C132 ) by L460;
consider C133 being  strict (SubAlgebra of D134) such that L480: (C133 = D151 & ( D149 . D151 ) = ( MSAlg C133 )) by L460;
L481: ( MSSign C132 ) = ( MSSign D134 ) by L25
.= ( MSSign C133 ) by L25;
thus L482: C130 = ( 1-Alg ( MSAlg C132 ) ) by L478 , MSUALG_1:9
.= C131 by L477 , L479 , L480 , L481 , MSUALG_1:9;
end;
thus L483: D149 is  one-to-one by L475 , FUNCT_1:def 4;
L484: ( dom D149 ) = ( Sub D134 ) by FUNCT_2:def 1;
thus L485: ( rng D149 ) = (the carrier of ( MSSubAlLattice ( MSAlg D134 ) ))
proof
thus L486: ( rng D149 ) c= (the carrier of ( MSSubAlLattice ( MSAlg D134 ) )) by RELAT_1:def 19;
let C134 being set;
assume L487: C134 in (the carrier of ( MSSubAlLattice ( MSAlg D134 ) ));
reconsider D152 = C134 as  strict (MSSubAlgebra of ( MSAlg D134 )) by L487 , MSUALG_2:def 19;
reconsider D153 = ( Constants ( MSAlg D134 ) ) as (MSSubset of D152) by MSUALG_2:10;
L488: D153 c= (the Sorts of D152) by PBOOLE:def 18;
L489: (the Sorts of D152) is  non-empty by L488 , PBOOLE:131;
reconsider D154 = D152 as  strict  non-empty (MSSubAlgebra of ( MSAlg D134 )) by L489 , MSUALG_1:def 3;
L490: ( 1-Alg D154 ) is (SubAlgebra of ( 1-Alg ( MSAlg D134 ) )) by L235;
L491: ( 1-Alg D154 ) is (SubAlgebra of D134) by L490 , MSUALG_1:9;
reconsider D155 = ( 1-Alg D154 ) as (Element of ( Sub D134 )) by L491 , UNIALG_2:def 14;
L492: (ex B105 being  strict (SubAlgebra of D134) st (B105 = D155 & ( D149 . D155 ) = ( MSAlg B105 ))) by L460;
L493: ( D149 . ( 1-Alg D154 ) ) = C134 by L492 , L455 , L329;
L494: D155 in ( dom D149 ) by L484;
thus L495: thesis by L494 , L493 , FUNCT_1:def 3;
end;

end;
