:: Introduction to Trees
::  by Grzegorz Bancerek
::
:: Received October 25, 1989
:: Copyright (c) 1990-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, XBOOLE_0, SUBSET_1, FUNCT_1, FINSEQ_1, TARSKI, RELAT_1,
      NAT_1, ORDINAL4, ARYTM_3, FINSET_1, CARD_1, ARYTM_1, XXREAL_0, ORDINAL1,
      TREES_1, AMISTD_3, FINSEQ_2;
 notations TARSKI, XBOOLE_0, ENUMSET1, SUBSET_1, CARD_1, XCMPLX_0, ORDINAL1,
      NAT_1, NUMBERS, RELAT_1, FUNCT_1, FINSEQ_1, FINSEQ_2, FUNCT_2, FINSET_1,
      XXREAL_0;
 constructors ENUMSET1, WELLORD2, XXREAL_0, XREAL_0, NAT_1, FINSEQ_1, FINSEQ_2,
      FUNCOP_1, FUNCT_2, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, ORDINAL1, FINSET_1, XXREAL_0,
      XREAL_0, NAT_1, FINSEQ_1, CARD_1, RELSET_1, FINSEQ_2, FUNCOP_1;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, FINSET_1, FUNCT_1, WELLORD2, XBOOLE_0, FUNCOP_1, FINSEQ_2;
 theorems TARSKI, NAT_1, FINSEQ_1, FINSET_1, FUNCT_1, CARD_1, RELAT_1,
      GRFUNC_1, CARD_2, XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, ORDINAL1,
      ENUMSET1, FINSEQ_2, FINSEQ_3, FUNCT_2;
 schemes NAT_1, CLASSES1, XBOOLE_0, FUNCT_2;

begin
notation
let C1 , C2 being FinSequence;
synonym C1 is_a_prefix_of C2 for C1 c= C2;
end;
definition
let C3 , C4 being FinSequence;
redefine pred C3 is_a_prefix_of C4
means
:L2: (ex R6 being (Element of ( NAT )) st C3 = ( C4 | ( Seg R6 ) ))
;compatibility
proof
thus L3: (C3 c= C4 implies (ex R6 being (Element of ( NAT )) st C3 = ( C4 | ( Seg R6 ) )))
proof
assume L4: C3 c= C4;
consider C5 being Nat such that L5: ( dom C3 ) = ( Seg C5 ) by FINSEQ_1:def 2;
reconsider D1 = C5 as (Element of ( NAT )) by ORDINAL1:def 12;
take D1;
thus L6: thesis by L4 , L5 , GRFUNC_1:23;
end;

thus L7: thesis by RELAT_1:59;
end;
end;
theorem
L9: (for B1 , B2 being FinSequence holds (B1 is_a_prefix_of B2 iff (ex B3 being FinSequence st B2 = ( B1 ^ B3 ))))
proof
let C6 , C7 being FinSequence;
thus L10: (C6 is_a_prefix_of C7 implies (ex B4 being FinSequence st C7 = ( C6 ^ B4 )))
proof
given R6 being (Element of ( NAT )) such that
L11: C6 = ( C7 | ( Seg R6 ) );

thus L12: thesis by L11 , FINSEQ_1:80;
end;

given C8 being FinSequence such that
L13: C7 = ( C6 ^ C8 );

L14: (( dom C6 ) = ( Seg ( len C6 ) ) & C6 = ( C7 | ( dom C6 ) )) by L13 , FINSEQ_1:21 , FINSEQ_1:def 3;
thus L15: thesis by L14 , L2;
end;
theorem
L16: (for B5 , B6 being FinSequence holds ((B5 is_a_prefix_of B6 & ( len B5 ) = ( len B6 )) implies B5 = B6))
proof
let C9 , C10 being FinSequence;
assume that
L17: C9 is_a_prefix_of C10
and
L18: ( len C9 ) = ( len C10 );
consider C11 being FinSequence such that L19: C10 = ( C9 ^ C11 ) by L17 , L9;
L20: ( len C9 ) = ( ( len C9 ) + ( len C11 ) ) by L18 , L19 , FINSEQ_1:22;
L21: C11 = ( {} ) by L20;
thus L22: thesis by L21 , L19 , FINSEQ_1:34;
end;
theorem
L23: (for R2 being set holds (for R3 being set holds (<* R2 *> is_a_prefix_of <* R3 *> iff R2 = R3)))
proof
let R2 being set;
let R3 being set;
thus L24: (<* R2 *> is_a_prefix_of <* R3 *> implies R2 = R3)
proof
assume L25: <* R2 *> is_a_prefix_of <* R3 *>;
L26: (( len <* R2 *> ) = 1 & ( len <* R3 *> ) = 1) by FINSEQ_1:40;
L27: <* R2 *> = <* R3 *> by L26 , L25 , L16;
L28: ( <* R2 *> . 1 ) = R2 by FINSEQ_1:40;
thus L29: thesis by L28 , L27 , FINSEQ_1:40;
end;

thus L30: thesis;
end;
notation
let C12 , C13 being FinSequence;
synonym C12 is_a_proper_prefix_of C13 for C12 c< C13;
end;
L32: (for B7 , B8 being  finite set holds ((B7 c= B8 & ( card B7 ) = ( card B8 )) implies B7 = B8))
proof
let C14 , C15 being  finite set;
assume that
L33: C14 c= C15
and
L34: ( card C14 ) = ( card C15 );
L35: ( card ( C15 \ C14 ) ) = ( ( card C15 ) - ( card C14 ) ) by L33 , CARD_2:44
.= ( 0 ) by L34;
L36: ( C15 \ C14 ) = ( {} ) by L35;
L37: C15 c= C14 by L36 , XBOOLE_1:37;
thus L38: thesis by L37 , L33 , XBOOLE_0:def 10;
end;
theorem
L39: (for B9 , B10 being  finite set holds ((B9 , B10 are_c=-comparable  & ( card B9 ) = ( card B10 )) implies B9 = B10))
proof
let C16 , C17 being  finite set;
assume that
L40: (C16 c= C17 or C17 c= C16)
and
L41: ( card C16 ) = ( card C17 );
per cases  by L40;
suppose L42: C16 c= C17;

thus L43: thesis by L42 , L41 , L32;
end;
suppose L44: C17 c= C16;

thus L45: thesis by L44 , L41 , L32;
end;
end;
theorem
L47: (for R2 being set holds (for R3 being set holds (<* R2 *> , <* R3 *> are_c=-comparable  implies R2 = R3)))
proof
let R2 being set;
let R3 being set;
assume L48: <* R2 *> , <* R3 *> are_c=-comparable ;
L49: (( len <* R2 *> ) = 1 & ( len <* R3 *> ) = 1) by FINSEQ_1:40;
L50: <* R2 *> = <* R3 *> by L49 , L48 , L39;
L51: ( <* R2 *> . 1 ) = R2 by FINSEQ_1:40;
thus L52: thesis by L51 , L50 , FINSEQ_1:40;
end;
theorem
L53: (for B11 , B12 being  finite set holds (B11 c< B12 implies ( card B11 ) < ( card B12 )))
proof
let C18 , C19 being  finite set;
assume that
L54: C18 c= C19
and
L55: C18 <> C19;
L56: ( card C18 ) <= ( card C19 ) by L54 , NAT_1:43;
L57: C18 , C19 are_c=-comparable  by L54 , XBOOLE_0:def 9;
thus L58: thesis by L57 , L56 , L55 , L39 , XXREAL_0:1;
end;
theorem
L59: (for R2 being set holds (for R12 being FinSequence holds (for R13 being FinSequence holds (( R12 ^ <* R2 *> ) is_a_prefix_of R13 implies R12 is_a_proper_prefix_of R13))))
proof
let R2 being set;
let R12 being FinSequence;
let R13 being FinSequence;
assume L60: ( R12 ^ <* R2 *> ) is_a_prefix_of R13;
consider R14 being FinSequence such that L61: R13 = ( ( R12 ^ <* R2 *> ) ^ R14 ) by L60 , L9;
L62: R13 = ( R12 ^ ( <* R2 *> ^ R14 ) ) by L61 , FINSEQ_1:32;
thus L63: R12 is_a_prefix_of R13 by L62 , L9;
assume L64: R12 = R13;
L65: ( len R12 ) = ( ( len ( R12 ^ <* R2 *> ) ) + ( len R14 ) ) by L64 , L61 , FINSEQ_1:22
.= ( ( ( len R12 ) + ( len <* R2 *> ) ) + ( len R14 ) ) by FINSEQ_1:22
.= ( ( ( len R12 ) + 1 ) + ( len R14 ) ) by FINSEQ_1:39;
L66: ( ( len R12 ) + 1 ) <= ( len R12 ) by L65 , NAT_1:11;
thus L67: contradiction by L66 , NAT_1:13;
end;
theorem
L68: (for R2 being set holds (for R12 being FinSequence holds (for R13 being FinSequence holds (R12 is_a_prefix_of R13 implies R12 is_a_proper_prefix_of ( R13 ^ <* R2 *> )))))
proof
let R2 being set;
let R12 being FinSequence;
let R13 being FinSequence;
assume L69: R12 is_a_prefix_of R13;
consider R14 being FinSequence such that L70: R13 = ( R12 ^ R14 ) by L69 , L9;
L71: ( R13 ^ <* R2 *> ) = ( R12 ^ ( R14 ^ <* R2 *> ) ) by L70 , FINSEQ_1:32;
thus L72: R12 is_a_prefix_of ( R13 ^ <* R2 *> ) by L71 , L9;
assume L73: R12 = ( R13 ^ <* R2 *> );
L74: ( len R13 ) = ( ( len ( R13 ^ <* R2 *> ) ) + ( len R14 ) ) by L73 , L70 , FINSEQ_1:22
.= ( ( ( len R13 ) + ( len <* R2 *> ) ) + ( len R14 ) ) by FINSEQ_1:22
.= ( ( ( len R13 ) + 1 ) + ( len R14 ) ) by FINSEQ_1:39;
L75: ( ( len R13 ) + 1 ) <= ( len R13 ) by L74 , NAT_1:11;
thus L76: contradiction by L75 , NAT_1:13;
end;
theorem
L77: (for R2 being set holds (for R12 being FinSequence holds (for R13 being FinSequence holds (R12 is_a_proper_prefix_of ( R13 ^ <* R2 *> ) implies R12 is_a_prefix_of R13))))
proof
let R2 being set;
let R12 being FinSequence;
let R13 being FinSequence;
assume that
L78: R12 is_a_prefix_of ( R13 ^ <* R2 *> )
and
L79: R12 <> ( R13 ^ <* R2 *> );
L80: (ex R14 being FinSequence st ( R13 ^ <* R2 *> ) = ( R12 ^ R14 )) by L78 , L9;
L81: ( len R12 ) <= ( len ( R13 ^ <* R2 *> ) ) by L78 , NAT_1:43;
L82: (( len ( R13 ^ <* R2 *> ) ) = ( ( len R13 ) + ( len <* R2 *> ) ) & ( len <* R2 *> ) = 1) by FINSEQ_1:22 , FINSEQ_1:39;
L83: ( len R12 ) < ( ( len R13 ) + 1 ) by L82 , L78 , L79 , L81 , L16 , XXREAL_0:1;
L84: ( len R12 ) <= ( len R13 ) by L83 , NAT_1:13;
L85: (ex R14 being FinSequence st ( R12 ^ R14 ) = R13) by L84 , L80 , FINSEQ_1:47;
thus L86: thesis by L85 , L9;
end;
theorem
L87: (for R12 being FinSequence holds (for R13 being FinSequence holds ((( {} ) is_a_proper_prefix_of R13 or ( {} ) <> R13) implies R12 is_a_proper_prefix_of ( R12 ^ R13 ))))
proof
let R12 being FinSequence;
let R13 being FinSequence;
assume L88: (( {} ) is_a_proper_prefix_of R13 or ( {} ) <> R13);
thus L89: R12 is_a_prefix_of ( R12 ^ R13 ) by L9;
assume L90: R12 = ( R12 ^ R13 );
L91: ( len R12 ) = ( ( len R12 ) + ( len R13 ) ) by L90 , FINSEQ_1:22;
L92: R13 = ( {} ) by L91;
thus L93: contradiction by L92 , L88;
end;
definition
let C20 being FinSequence;
func ProperPrefixes C20 -> set means 
:L94: (for R2 being set holds (R2 in it iff (ex B13 being FinSequence st (R2 = B13 & B13 is_a_proper_prefix_of C20))));
existence
proof
set D2 = ( rng C20 );
defpred S1[ set ] means (ex B14 being FinSequence st ($1 = B14 & B14 is_a_proper_prefix_of C20));
consider R1 being set such that L95: (for R2 being set holds (R2 in R1 iff (R2 in ( D2 * ) & S1[ R2 ]))) from XBOOLE_0:sch 1;
take R1;
let R2 being set;
thus L96: (R2 in R1 implies (ex B15 being FinSequence st (R2 = B15 & B15 is_a_proper_prefix_of C20))) by L95;
given C21 being FinSequence such that
L97: R2 = C21
and
L98: C21 is_a_proper_prefix_of C20;

L99: C21 is_a_prefix_of C20 by L98 , XBOOLE_0:def 8;
L100: (ex R6 being (Element of ( NAT )) st C21 = ( C20 | ( Seg R6 ) )) by L99 , L2;
L101: ( rng C21 ) c= D2 by L100 , RELAT_1:70;
reconsider D3 = C21 as (FinSequence of D2) by L101 , FINSEQ_1:def 4;
L102: D3 in ( D2 * ) by FINSEQ_1:def 11;
thus L103: thesis by L102 , L95 , L97 , L98;
end;
uniqueness
proof
let C22 , C23 being set;
assume that
L104: (for R2 being set holds (R2 in C22 iff (ex B16 being FinSequence st (R2 = B16 & B16 is_a_proper_prefix_of C20))))
and
L105: (for R2 being set holds (R2 in C23 iff (ex B17 being FinSequence st (R2 = B17 & B17 is_a_proper_prefix_of C20))));
defpred S2[ set ] means (ex B18 being FinSequence st ($1 = B18 & B18 is_a_proper_prefix_of C20));
L106: (for R2 being set holds (R2 in C22 iff S2[ R2 ])) by L104;
L107: (for R2 being set holds (R2 in C23 iff S2[ R2 ])) by L105;
thus L108: thesis from XBOOLE_0:sch 2(L106 , L107);
end;
end;
theorem
L110: (for R2 being set holds (for B19 being FinSequence holds (R2 in ( ProperPrefixes B19 ) implies R2 is FinSequence)))
proof
let R2 being set;
let C24 being FinSequence;
assume L111: R2 in ( ProperPrefixes C24 );
L112: (ex B20 being FinSequence st (R2 = B20 & B20 is_a_proper_prefix_of C24)) by L111 , L94;
thus L113: thesis by L112;
end;
theorem
L114: (for B21 , B22 being FinSequence holds (B21 in ( ProperPrefixes B22 ) iff B21 is_a_proper_prefix_of B22))
proof
let C25 , C26 being FinSequence;
thus L115: (C25 in ( ProperPrefixes C26 ) implies C25 is_a_proper_prefix_of C26)
proof
assume L116: C25 in ( ProperPrefixes C26 );
L117: (ex B23 being FinSequence st (C25 = B23 & B23 is_a_proper_prefix_of C26)) by L116 , L94;
thus L118: thesis by L117;
end;

thus L119: thesis by L94;
end;
theorem
L120: (for B24 , B25 being FinSequence holds (B24 in ( ProperPrefixes B25 ) implies ( len B24 ) < ( len B25 )))
proof
let C27 , C28 being FinSequence;
assume L121: C27 in ( ProperPrefixes C28 );
L122: C27 is_a_proper_prefix_of C28 by L121 , L114;
thus L123: thesis by L122 , L53;
end;
theorem
L124: (for B26 , B27 , B28 being FinSequence holds (( B27 ^ B28 ) in ( ProperPrefixes B26 ) implies B27 in ( ProperPrefixes B26 )))
proof
let C29 , C30 , C31 being FinSequence;
assume L125: ( C30 ^ C31 ) in ( ProperPrefixes C29 );
L126: C30 is_a_prefix_of ( C30 ^ C31 ) by L9;
L127: ( C30 ^ C31 ) is_a_proper_prefix_of C29 by L125 , L114;
L128: C30 is_a_proper_prefix_of C29 by L127 , L126 , XBOOLE_1:59;
thus L129: thesis by L128 , L114;
end;
theorem
L130: ( ProperPrefixes ( {} ) ) = ( {} )
proof
set D4 = the (Element of ( ProperPrefixes ( {} ) ));
assume L131: (not thesis);
reconsider D5 = D4 as FinSequence by L131 , L110;
L132: D5 is_a_proper_prefix_of ( {} ) by L131 , L114;
thus L133: contradiction by L132 , XBOOLE_1:115;
end;
set D6 = { ( {} ) };
theorem
L134: (for R2 being set holds ( ProperPrefixes <* R2 *> ) = { ( {} ) })
proof
let R2 being set;
thus L135: ( ProperPrefixes <* R2 *> ) c= D6
proof
let R3 being set;
assume L136: R3 in ( ProperPrefixes <* R2 *> );
consider C32 being FinSequence such that L137: R3 = C32 and L138: C32 is_a_proper_prefix_of <* R2 *> by L136 , L94;
L139: ( len C32 ) < ( len <* R2 *> ) by L138 , L53;
L140: (( len <* R2 *> ) = 1 & 1 = ( ( 0 ) + 1 )) by FINSEQ_1:39;
L141: C32 = ( {} ) by L140 , L139 , NAT_1:13;
thus L142: thesis by L141 , L137 , TARSKI:def 1;
end;

let R3 being set;
assume L143: R3 in D6;
L144: R3 = ( {} ) by L143 , TARSKI:def 1;
L145: ( {} ) is_a_prefix_of <* R2 *> by XBOOLE_1:2;
L146: ( {} ) is_a_proper_prefix_of <* R2 *> by L145 , XBOOLE_0:def 8;
thus L147: thesis by L146 , L144 , L94;
end;
theorem
L148: (for B29 , B30 being FinSequence holds (B29 is_a_prefix_of B30 implies ( ProperPrefixes B29 ) c= ( ProperPrefixes B30 )))
proof
let C33 , C34 being FinSequence;
assume that
L149: C33 is_a_prefix_of C34;
let R2 being set;
assume L150: R2 in ( ProperPrefixes C33 );
reconsider D7 = R2 as FinSequence by L150 , L110;
L151: D7 is_a_proper_prefix_of C33 by L150 , L114;
L152: D7 is_a_proper_prefix_of C34 by L151 , L149 , XBOOLE_1:58;
thus L153: thesis by L152 , L114;
end;
theorem
L154: (for B31 , B32 , B33 being FinSequence holds ((B32 in ( ProperPrefixes B31 ) & B33 in ( ProperPrefixes B31 )) implies B32 , B33 are_c=-comparable ))
proof
let C35 , C36 , C37 being FinSequence;
assume L155: C36 in ( ProperPrefixes C35 );
L156: (ex B34 being FinSequence st (C36 = B34 & B34 is_a_proper_prefix_of C35)) by L155 , L94;
assume L157: C37 in ( ProperPrefixes C35 );
L158: (ex B35 being FinSequence st (C37 = B35 & B35 is_a_proper_prefix_of C35)) by L157 , L94;
L159: C36 is_a_prefix_of C35 by L156 , XBOOLE_0:def 8;
consider R6 being (Element of ( NAT )) such that L160: C36 = ( C35 | ( Seg R6 ) ) by L159 , L2;
L161: C37 is_a_prefix_of C35 by L158 , XBOOLE_0:def 8;
consider R5 being (Element of ( NAT )) such that L162: C37 = ( C35 | ( Seg R5 ) ) by L161 , L2;
L163: (R6 <= R5 implies thesis)
proof
assume L164: R6 <= R5;
L165: ( Seg R6 ) c= ( Seg R5 ) by L164 , FINSEQ_1:5;
L166: C36 = ( C37 | ( Seg R6 ) ) by L165 , L160 , L162 , FUNCT_1:51;
L167: C36 is_a_prefix_of C37 by L166 , L2;
thus L168: thesis by L167 , XBOOLE_0:def 9;
end;
L169: (R5 <= R6 implies thesis)
proof
assume L170: R5 <= R6;
L171: ( Seg R5 ) c= ( Seg R6 ) by L170 , FINSEQ_1:5;
L172: C37 = ( C36 | ( Seg R5 ) ) by L171 , L160 , L162 , FUNCT_1:51;
L173: C37 is_a_prefix_of C36 by L172 , L2;
thus L174: thesis by L173 , XBOOLE_0:def 9;
end;
thus L175: thesis by L169 , L163;
end;
definition
let R1 being set;
attr R1 is  Tree-like
means
:L176: (R1 c= ( ( NAT ) * ) & (for R9 being (FinSequence of ( NAT )) holds (R9 in R1 implies ( ProperPrefixes R9 ) c= R1)) & (for R9 being (FinSequence of ( NAT )) holds (for R5 being (Element of ( NAT )) holds (for R6 being (Element of ( NAT )) holds ((( R9 ^ <* R5 *> ) in R1 & R6 <= R5) implies ( R9 ^ <* R6 *> ) in R1)))));
end;
registration
cluster { ( {} ) } ->  Tree-like;
coherence
proof
thus L178: D6 c= ( ( NAT ) * )
proof
let R2 being set;
assume L179: R2 in D6;
L180: R2 = ( {} ) by L179 , TARSKI:def 1;
thus L181: thesis by L180 , FINSEQ_1:49;
end;

thus L182: (for R9 being (FinSequence of ( NAT )) holds (R9 in D6 implies ( ProperPrefixes R9 ) c= D6))
proof
let R9 being (FinSequence of ( NAT ));
assume L183: R9 in D6;
L184: R9 = ( {} ) by L183 , TARSKI:def 1;
thus L185: thesis by L184 , L130 , XBOOLE_1:2;
end;

thus L186: thesis by TARSKI:def 1;
end;
end;
registration
cluster non  empty  Tree-like for set;
existence
proof
take D8 = { ( <*> ( NAT ) ) };
thus L188: thesis;
end;
end;
definition
mode Tree
 is  Tree-like non  empty set;
end;
theorem
L191: (for R2 being set holds (for R15 being Tree holds (R2 in R15 implies R2 is (FinSequence of ( NAT )))))
proof
let R2 being set;
let R15 being Tree;
L192: R15 c= ( ( NAT ) * ) by L176;
thus L193: thesis by L192 , FINSEQ_1:def 11;
end;
definition
let R15 being Tree;
redefine mode Element of R15
 -> (FinSequence of ( NAT ));
coherence by L191;
end;
theorem
L195: (for R15 being Tree holds (for B36 , B37 being FinSequence holds ((B36 in R15 & B37 is_a_prefix_of B36) implies B37 in R15)))
proof
let R15 being Tree;
let C38 , C39 being FinSequence;
assume that
L196: C38 in R15
and
L197: C39 is_a_prefix_of C38;
reconsider D9 = C38 as (Element of R15) by L196;
L198: ( ProperPrefixes D9 ) c= R15 by L176;
L199: (C39 is_a_proper_prefix_of C38 or C39 = C38) by L197 , XBOOLE_0:def 8;
L200: (C39 in ( ProperPrefixes C38 ) or C38 = C39) by L199 , L114;
thus L201: thesis by L200 , L198;
end;
theorem
L202: (for R10 being (FinSequence of ( NAT )) holds (for R15 being Tree holds (for B38 being FinSequence holds (( R10 ^ B38 ) in R15 implies R10 in R15))))
proof
let R10 being (FinSequence of ( NAT ));
let R15 being Tree;
let C40 being FinSequence;
assume L203: ( R10 ^ C40 ) in R15;
reconsider D10 = ( R10 ^ C40 ) as (FinSequence of ( NAT )) by L203 , L191;
reconsider D11 = ( D10 | ( Seg ( len R10 ) ) ) as (FinSequence of ( NAT )) by FINSEQ_1:18;
L204: ( len D10 ) = ( ( len R10 ) + ( len C40 ) ) by FINSEQ_1:22;
L205: ( len R10 ) <= ( len D10 ) by L204 , NAT_1:11;
L206: ( len D11 ) = ( len R10 ) by L205 , FINSEQ_1:17;
L207:
now
let C41 being Nat;
assume L208: (1 <= C41 & C41 <= ( len R10 ));
L209: C41 in ( Seg ( len R10 ) ) by L208 , FINSEQ_1:1;
L210: ( Seg ( len R10 ) ) = ( dom R10 ) by FINSEQ_1:def 3;
L211: ( D10 . C41 ) = ( R10 . C41 ) by L210 , L209 , FINSEQ_1:def 7;
thus L212: ( R10 . C41 ) = ( D11 . C41 ) by L211 , L209 , FUNCT_1:49;
end;
L213: R10 = D11 by L207 , L206 , FINSEQ_1:14;
L214: R10 is_a_prefix_of D10 by L213 , L2;
L215:
now
assume L216: R10 <> D10;
L217: R10 is_a_proper_prefix_of D10 by L216 , L214 , XBOOLE_0:def 8;
L218: R10 in ( ProperPrefixes D10 ) by L217 , L94;
L219: ( ProperPrefixes D10 ) c= R15 by L203 , L176;
thus L220: thesis by L219 , L218;
end;
thus L221: thesis by L215 , L203;
end;
theorem
L222: (for R15 being Tree holds (( {} ) in R15 & ( <*> ( NAT ) ) in R15))
proof
let R15 being Tree;
reconsider D12 = the (Element of R15) as (FinSequence of ( NAT ));
L223: D12 in R15;
L224: ( ( {} ) ^ D12 ) in R15 by L223 , FINSEQ_1:34;
L225: ( {} ) = ( <*> ( NAT ) );
thus L226: thesis by L225 , L224 , L202;
end;
theorem
L227: { ( {} ) } is Tree;
registration
let R15 being Tree;
let R16 being Tree;
cluster ( R15 \/ R16 ) ->  Tree-like;
coherence
proof
set D13 = ( R15 \/ R16 );
L228: (R15 c= ( ( NAT ) * ) & R16 c= ( ( NAT ) * )) by L176;
thus L229: D13 c= ( ( NAT ) * ) by L228 , XBOOLE_1:8;
thus L230: (for R9 being (FinSequence of ( NAT )) holds (R9 in D13 implies ( ProperPrefixes R9 ) c= D13))
proof
let R9 being (FinSequence of ( NAT ));
assume L231: R9 in D13;
L232: (R9 in R15 or R9 in R16) by L231 , XBOOLE_0:def 3;
L233: (( ProperPrefixes R9 ) c= R15 or ( ProperPrefixes R9 ) c= R16) by L232 , L176;
L234: (R15 c= D13 & R16 c= D13) by XBOOLE_1:7;
thus L235: thesis by L234 , L233 , XBOOLE_1:1;
end;

let R9 being (FinSequence of ( NAT ));
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume that
L236: ( R9 ^ <* R5 *> ) in D13
and
L237: R6 <= R5;
L238: (( R9 ^ <* R5 *> ) in R15 or ( R9 ^ <* R5 *> ) in R16) by L236 , XBOOLE_0:def 3;
L239: (( R9 ^ <* R6 *> ) in R15 or ( R9 ^ <* R6 *> ) in R16) by L238 , L237 , L176;
thus L240: thesis by L239 , XBOOLE_0:def 3;
end;
cluster ( R15 /\ R16 ) ->  Tree-like non  empty;
coherence
proof
set D14 = ( R15 /\ R16 );
thus L241: D14 is  Tree-like
proof
L242: (R15 c= ( ( NAT ) * ) & ( R15 /\ R16 ) c= R15) by L176 , XBOOLE_1:17;
thus L243: D14 c= ( ( NAT ) * ) by L242 , XBOOLE_1:1;
thus L244: (for R9 being (FinSequence of ( NAT )) holds (R9 in D14 implies ( ProperPrefixes R9 ) c= D14))
proof
let R9 being (FinSequence of ( NAT ));
assume L245: R9 in D14;
L246: R9 in R15 by L245 , XBOOLE_0:def 4;
L247: R9 in R16 by L245 , XBOOLE_0:def 4;
L248: ( ProperPrefixes R9 ) c= R15 by L246 , L176;
L249: ( ProperPrefixes R9 ) c= R16 by L247 , L176;
thus L250: thesis by L249 , L248 , XBOOLE_1:19;
end;

let R9 being (FinSequence of ( NAT ));
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume that
L251: ( R9 ^ <* R5 *> ) in D14
and
L252: R6 <= R5;
L253: ( R9 ^ <* R5 *> ) in R15 by L251 , XBOOLE_0:def 4;
L254: ( R9 ^ <* R5 *> ) in R16 by L251 , XBOOLE_0:def 4;
L255: ( R9 ^ <* R6 *> ) in R15 by L252 , L253 , L176;
L256: ( R9 ^ <* R6 *> ) in R16 by L252 , L254 , L176;
thus L257: thesis by L256 , L255 , XBOOLE_0:def 4;
end;

L258: (( {} ) in R15 & ( {} ) in R16) by L222;
thus L259: thesis by L258 , XBOOLE_0:def 4;
end;
end;
theorem
L261: (for R15 being Tree holds (for R16 being Tree holds ( R15 \/ R16 ) is Tree));
theorem
L262: (for R15 being Tree holds (for R16 being Tree holds ( R15 /\ R16 ) is Tree));
registration
cluster  finite for Tree;
existence
proof
take D6;
thus L263: thesis;
end;
end;
theorem
L265: (for R17 being  finite Tree holds (for R18 being  finite Tree holds ( R17 \/ R18 ) is  finite  finite  finite  finite Tree));
theorem
L266: (for R15 being Tree holds (for R17 being  finite Tree holds ( R17 /\ R15 ) is  finite  finite  finite  finite Tree));
definition
let R6 being (Element of ( NAT ));
func elementary_tree R6 -> Tree equals 
( { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 } \/ { ( {} ) } );
correctness
proof
set D15 = ( { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 } \/ D6 );
L267: D15 is  Tree-like
proof
thus L268: D15 c= ( ( NAT ) * )
proof
let R2 being set;
assume L269: R2 in D15;
L270: (R2 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 } or R2 in D6) by L269 , XBOOLE_0:def 3;
L271: ( {} ) in ( ( NAT ) * ) by FINSEQ_1:49;
L272:
now
assume L273: R2 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 };
L274: (ex R5 being (Element of ( NAT )) st (R2 = <* R5 *> & R5 < R6)) by L273;
thus L275: thesis by L274 , FINSEQ_1:def 11;
end;
thus L276: thesis by L272 , L270 , L271 , TARSKI:def 1;
end;

thus L277: (for R9 being (FinSequence of ( NAT )) holds (R9 in D15 implies ( ProperPrefixes R9 ) c= D15))
proof
let R9 being (FinSequence of ( NAT ));
assume L278: R9 in D15;
L279: (R9 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 } or R9 in D6) by L278 , XBOOLE_0:def 3;
L280: ( {} ) c= D15 by XBOOLE_1:2;
L281:
now
assume L282: R9 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 };
L283: (ex R5 being (Element of ( NAT )) st (R9 = <* R5 *> & R5 < R6)) by L282;
L284: ( ProperPrefixes R9 ) = D6 by L283 , L134;
thus L285: thesis by L284 , XBOOLE_1:7;
end;
thus L286: thesis by L281 , L279 , L280 , L130 , TARSKI:def 1;
end;

let R9 being (FinSequence of ( NAT ));
let R5 being (Element of ( NAT ));
let R7 being (Element of ( NAT ));
assume L287: ( R9 ^ <* R5 *> ) in D15;
L288: (( R9 ^ <* R5 *> ) in { <* B39 *> where B39 is (Element of ( NAT )) : B39 < R6 } or ( R9 ^ <* R5 *> ) in D6) by L287 , XBOOLE_0:def 3;
consider C42 being (Element of ( NAT )) such that L289: ( R9 ^ <* R5 *> ) = <* C42 *> and L290: C42 < R6 by L288 , TARSKI:def 1;
L291: ( ( len R9 ) + ( len <* R5 *> ) ) = ( len <* C42 *> ) by L289 , FINSEQ_1:22
.= 1 by FINSEQ_1:39;
L292: ( ( len R9 ) + 1 ) = ( ( 0 ) + 1 ) by L291 , FINSEQ_1:39;
L293: R9 = ( {} ) by L292;
L294: <* R5 *> = <* C42 *> by L293 , L289 , FINSEQ_1:34;
L295: ( <* R5 *> . 1 ) = R5 by FINSEQ_1:def 8;
L296: R5 = C42 by L295 , L294 , FINSEQ_1:def 8;
assume L297: R7 <= R5;
L298: ( R9 ^ <* R7 *> ) = <* R7 *> by L293 , FINSEQ_1:34;
L299: R7 < R6 by L290 , L296 , L297 , XXREAL_0:2;
L300: ( R9 ^ <* R7 *> ) in { <* B40 *> where B40 is (Element of ( NAT )) : B40 < R6 } by L299 , L298;
thus L301: thesis by L300 , XBOOLE_0:def 3;
end;
thus L302: thesis by L267;
end;
end;
registration
let R6 being (Element of ( NAT ));
cluster ( elementary_tree R6 ) ->  finite;
coherence
proof
set D16 = ( elementary_tree R6 );
L304: D16 , ( Seg ( R6 + 1 ) ) are_equipotent 
proof
defpred S3[ set , set ] means (($1 = ( {} ) & $2 = 1) or (ex R6 being (Element of ( NAT )) st ($1 = <* R6 *> & $2 = ( R6 + 2 ))));
L305: (for R2 being set holds (for R3 being set holds (for R4 being set holds ((R2 in D16 & S3[ R2 , R3 ] & S3[ R2 , R4 ]) implies R3 = R4))))
proof
let R2 being set;
let R3 being set;
let R4 being set;
assume that
L306: R2 in D16
and
L307: (((R2 = ( {} ) & R3 = 1) or (ex R6 being (Element of ( NAT )) st (R2 = <* R6 *> & R3 = ( R6 + 2 )))) & ((R2 = ( {} ) & R4 = 1) or (ex R6 being (Element of ( NAT )) st (R2 = <* R6 *> & R4 = ( R6 + 2 )))));
L308:
now
given C43 being (Element of ( NAT )) such that
L309: (R2 = <* C43 *> & R3 = ( C43 + 2 ));

given C44 being (Element of ( NAT )) such that
L310: (R2 = <* C44 *> & R4 = ( C44 + 2 ));

L311: ( <* C43 *> . 1 ) = C43 by FINSEQ_1:def 8;
thus L312: thesis by L311 , L309 , L310 , FINSEQ_1:def 8;
end;
thus L313: thesis by L308 , L307;
end;
L314: (for R2 being set holds (R2 in D16 implies (ex R3 being set st S3[ R2 , R3 ])))
proof
let R2 being set;
assume L315: R2 in D16;
L316:
now
assume L317: R2 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 };
consider R5 being (Element of ( NAT )) such that L318: R2 = <* R5 *> and L319: R5 < R6 by L317;
reconsider D17 = ( R5 + 2 ) as set;
take D18 = D17;
thus L320: S3[ R2 , D18 ] by L318;
end;
L321:
now
assume L322: R2 in D6;
reconsider D19 = 1 as set;
take D20 = D19;
thus L323: S3[ R2 , D20 ] by L322 , TARSKI:def 1;
end;
thus L324: thesis by L321 , L315 , L316 , XBOOLE_0:def 3;
end;
consider R8 being Function such that L325: (( dom R8 ) = D16 & (for R2 being set holds (R2 in D16 implies S3[ R2 , ( R8 . R2 ) ]))) from CLASSES1:sch 1(L314);
take R8;
thus L326: R8 is  one-to-one
proof
let R2 being set;
let R3 being set;
assume that
L327: R2 in ( dom R8 )
and
L328: R3 in ( dom R8 )
and
L329: ( R8 . R2 ) = ( R8 . R3 );
L330: ((R2 = ( {} ) & ( R8 . R2 ) = 1) or (ex R6 being (Element of ( NAT )) st (R2 = <* R6 *> & ( R8 . R2 ) = ( R6 + 2 )))) by L325 , L327;
L331: ((R3 = ( {} ) & ( R8 . R3 ) = 1) or (ex R6 being (Element of ( NAT )) st (R3 = <* R6 *> & ( R8 . R3 ) = ( R6 + 2 )))) by L325 , L328;
L332:
now
assume that
L333: R2 = ( {} )
and
L334: ( R8 . R2 ) = 1;
given R6 being (Element of ( NAT )) such that
L335: R3 = <* R6 *>
and
L336: ( R8 . R3 ) = ( R6 + 2 );

L337: ( ( 0 ) + 1 ) = ( ( R6 + 1 ) + 1 ) by L329 , L334 , L336;
thus L338: contradiction by L337;
end;
L339:
now
assume that
L340: R3 = ( {} )
and
L341: ( R8 . R3 ) = 1;
given R6 being (Element of ( NAT )) such that
L342: R2 = <* R6 *>
and
L343: ( R8 . R2 ) = ( R6 + 2 );

L344: ( ( 0 ) + 1 ) = ( ( R6 + 1 ) + 1 ) by L329 , L341 , L343;
thus L345: contradiction by L344;
end;
thus L346: thesis by L339 , L329 , L330 , L331 , L332;
end;

thus L347: ( dom R8 ) = D16 by L325;
thus L348: ( rng R8 ) c= ( Seg ( R6 + 1 ) )
proof
let R2 being set;
assume L349: R2 in ( rng R8 );
consider R3 being set such that L350: R3 in ( dom R8 ) and L351: R2 = ( R8 . R3 ) by L349 , FUNCT_1:def 3;
L352: 1 <= ( 1 + R6 ) by NAT_1:11;
L353: 1 in ( Seg ( R6 + 1 ) ) by L352 , FINSEQ_1:1;
L354:
now
given R5 being (Element of ( NAT )) such that
L355: R3 = <* R5 *>
and
L356: R2 = ( R5 + 2 );

L357: (R3 in { <* B41 *> where B41 is (Element of ( NAT )) : B41 < R6 } or R3 in D6) by L325 , L350 , XBOOLE_0:def 3;
consider C45 being (Element of ( NAT )) such that L358: (R3 = <* C45 *> & C45 < R6) by L357 , L355 , TARSKI:def 1;
L359: (( <* R5 *> . 1 ) = R5 & ( <* C45 *> . 1 ) = C45) by FINSEQ_1:def 8;
L360: ( R5 + 1 ) <= R6 by L359 , L355 , L358 , NAT_1:13;
L361: (( 1 + ( 0 ) ) <= ( ( R5 + 1 ) + 1 ) & ( ( R5 + 1 ) + 1 ) <= ( R6 + 1 )) by L360 , XREAL_1:7;
thus L362: thesis by L361 , L356 , FINSEQ_1:1;
end;
thus L363: thesis by L354 , L325 , L350 , L351 , L353;
end;

let R2 being set;
assume L364: R2 in ( Seg ( R6 + 1 ) );
reconsider D21 = R2 as (Element of ( NAT )) by L364;
L365: 1 <= D21 by L364 , FINSEQ_1:1;
L366: D21 <= ( R6 + 1 ) by L364 , FINSEQ_1:1;
L367: ( {} ) in D6 by TARSKI:def 1;
L368: ( {} ) in D16 by L367 , XBOOLE_0:def 3;
L369: S3[ ( {} ) , ( R8 . ( {} ) ) ] by L368 , L325;
L370: 1 in ( rng R8 ) by L369 , L325 , L368 , FUNCT_1:def 3;
L371:
now
assume L372: 1 < D21;
L373: ( 1 + 1 ) <= D21 by L372 , NAT_1:13;
consider C46 being Nat such that L374: D21 = ( 2 + C46 ) by L373 , NAT_1:10;
reconsider D22 = C46 as (Element of ( NAT )) by ORDINAL1:def 12;
L375: ( ( 1 + 1 ) + D22 ) = ( 1 + ( 1 + D22 ) );
L376: ( 1 + D22 ) <= R6 by L375 , L366 , L374 , XREAL_1:6;
L377: D22 < R6 by L376 , NAT_1:13;
L378: <* D22 *> in { <* B42 *> where B42 is (Element of ( NAT )) : B42 < R6 } by L377;
L379: <* D22 *> in D16 by L378 , XBOOLE_0:def 3;
L380: S3[ <* D22 *> , ( R8 . <* D22 *> ) ] by L379 , L325;
L381: D21 = ( R8 . <* D22 *> ) by L380 , L305 , L374 , L379;
thus L382: D21 in ( rng R8 ) by L381 , L325 , L379 , FUNCT_1:def 3;
end;
thus L383: thesis by L371 , L365 , L370 , XXREAL_0:1;
end;
thus L384: thesis by L304 , CARD_1:38;
end;
end;
theorem
L386: (for R5 being (Element of ( NAT )) holds (for R6 being (Element of ( NAT )) holds (R5 < R6 implies <* R5 *> in ( elementary_tree R6 ))))
proof
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume L387: R5 < R6;
L388: <* R5 *> in { <* B43 *> where B43 is (Element of ( NAT )) : B43 < R6 } by L387;
thus L389: thesis by L388 , XBOOLE_0:def 3;
end;
theorem
L390: ( elementary_tree ( 0 ) ) = { ( {} ) }
proof
L391:
now
set D23 = the (Element of { <* B44 *> where B44 is (Element of ( NAT )) : B44 < ( 0 ) });
assume L392: { <* B45 *> where B45 is (Element of ( NAT )) : B45 < ( 0 ) } <> ( {} );
L393: D23 in { <* B46 *> where B46 is (Element of ( NAT )) : B46 < ( 0 ) } by L392;
L394: (ex R5 being (Element of ( NAT )) st (D23 = <* R5 *> & R5 < ( 0 ))) by L393;
thus L395: contradiction by L394;
end;
thus L396: thesis by L391;
end;
theorem
L397: (for R6 being (Element of ( NAT )) holds (for R9 being (FinSequence of ( NAT )) holds (R9 in ( elementary_tree R6 ) implies (R9 = ( {} ) or (ex R5 being (Element of ( NAT )) st (R5 < R6 & R9 = <* R5 *>))))))
proof
let R6 being (Element of ( NAT ));
let R9 being (FinSequence of ( NAT ));
assume L398: R9 in ( elementary_tree R6 );
L399: (R9 in D6 or R9 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 }) by L398 , XBOOLE_0:def 3;
L400: (R9 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < R6 } implies (ex R5 being (Element of ( NAT )) st (R9 = <* R5 *> & R5 < R6)));
thus L401: thesis by L400 , L399 , TARSKI:def 1;
end;
definition
let R15 being Tree;
func Leaves R15 -> (Subset of R15) means 
:L402: (for R9 being (FinSequence of ( NAT )) holds (R9 in it iff (R9 in R15 & (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & R9 is_a_proper_prefix_of R10))))));
existence
proof
defpred S4[ set ] means (for R9 being (FinSequence of ( NAT )) holds ($1 = R9 implies (for R10 being (FinSequence of ( NAT )) holds (R10 in R15 implies (not R9 is_a_proper_prefix_of R10)))));
consider R1 being set such that L403: (for R2 being set holds (R2 in R1 iff (R2 in R15 & S4[ R2 ]))) from XBOOLE_0:sch 1;
L404: R1 c= R15
proof
let R2 being set;
thus L405: thesis by L403;
end;
reconsider D24 = R1 as (Subset of R15) by L404;
take D24;
let R9 being (FinSequence of ( NAT ));
thus L406: (R9 in D24 implies (R9 in R15 & (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & R9 is_a_proper_prefix_of R10))))) by L403;
assume that
L407: R9 in R15
and
L408: (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & R9 is_a_proper_prefix_of R10)));
L409: (for B47 being (FinSequence of ( NAT )) holds (R9 = B47 implies (for R10 being (FinSequence of ( NAT )) holds (R10 in R15 implies (not B47 is_a_proper_prefix_of R10))))) by L408;
thus L410: thesis by L409 , L403 , L407;
end;
uniqueness
proof
let C47 , C48 being (Subset of R15);
assume that
L411: (for R9 being (FinSequence of ( NAT )) holds (R9 in C47 iff (R9 in R15 & (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & R9 is_a_proper_prefix_of R10))))))
and
L412: (for R9 being (FinSequence of ( NAT )) holds (R9 in C48 iff (R9 in R15 & (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & R9 is_a_proper_prefix_of R10))))));
L413: R15 c= ( ( NAT ) * ) by L176;
L414: C47 c= ( ( NAT ) * ) by L413 , XBOOLE_1:1;
L415: C48 c= ( ( NAT ) * ) by L413 , XBOOLE_1:1;
L416:
now
let R2 being set;
thus L417: (R2 in C47 implies R2 in C48)
proof
assume L418: R2 in C47;
reconsider D25 = R2 as (FinSequence of ( NAT )) by L418 , L414 , FINSEQ_1:def 11;
L419: (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & D25 is_a_proper_prefix_of R10))) by L411 , L418;
thus L420: thesis by L419 , L412 , L418;
end;

assume L421: R2 in C48;
reconsider D26 = R2 as (FinSequence of ( NAT )) by L421 , L415 , FINSEQ_1:def 11;
L422: (not (ex R10 being (FinSequence of ( NAT )) st (R10 in R15 & D26 is_a_proper_prefix_of R10))) by L412 , L421;
thus L423: R2 in C47 by L422 , L411 , L421;
end;
thus L424: thesis by L416 , TARSKI:1;
end;
let R9 being (FinSequence of ( NAT ));
assume that
L425: R9 in R15;
func R15 | R9 -> Tree means 
:L426: (for R10 being (FinSequence of ( NAT )) holds (R10 in it iff ( R9 ^ R10 ) in R15));
existence
proof
defpred S5[ set ] means (for R10 being (FinSequence of ( NAT )) holds ($1 = R10 implies ( R9 ^ R10 ) in R15));
consider R1 being set such that L427: (for R2 being set holds (R2 in R1 iff (R2 in ( ( NAT ) * ) & S5[ R2 ]))) from XBOOLE_0:sch 1;
L428: (( <*> ( NAT ) ) in ( ( NAT ) * ) & (for R10 being (FinSequence of ( NAT )) holds (( <*> ( NAT ) ) = R10 implies ( R9 ^ R10 ) in R15))) by L425 , FINSEQ_1:34 , FINSEQ_1:def 11;
reconsider D27 = R1 as non  empty set by L428 , L427;
L429: D27 c= ( ( NAT ) * )
proof
let R2 being set;
thus L430: thesis by L427;
end;
L431:
now
let R10 being (FinSequence of ( NAT ));
assume that
L432: R10 in D27;
thus L433: ( ProperPrefixes R10 ) c= D27
proof
let R2 being set;
assume L434: R2 in ( ProperPrefixes R10 );
consider C49 being FinSequence such that L435: R2 = C49 and L436: C49 is_a_proper_prefix_of R10 by L434 , L94;
L437: C49 is_a_prefix_of R10 by L436 , XBOOLE_0:def 8;
L438: (ex R6 being (Element of ( NAT )) st C49 = ( R10 | ( Seg R6 ) )) by L437 , L2;
reconsider D28 = C49 as (FinSequence of ( NAT )) by L438 , FINSEQ_1:18;
consider C50 being FinSequence such that L439: R10 = ( D28 ^ C50 ) by L438 , FINSEQ_1:80;
L440: ( R9 ^ R10 ) in R15 by L427 , L432;
L441: ( R9 ^ R10 ) = ( ( R9 ^ D28 ) ^ C50 ) by L439 , FINSEQ_1:32;
L442: (D28 in ( ( NAT ) * ) & (for R10 being (FinSequence of ( NAT )) holds (D28 = R10 implies ( R9 ^ R10 ) in R15))) by L441 , L440 , L202 , FINSEQ_1:def 11;
thus L443: thesis by L442 , L427 , L435;
end;

end;
L434:
now
let R10 being (FinSequence of ( NAT ));
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume that
L435: ( R10 ^ <* R5 *> ) in D27
and
L436: R6 <= R5;
L437: ( R9 ^ ( R10 ^ <* R5 *> ) ) in R15 by L427 , L435;
L438: ( ( R9 ^ R10 ) ^ <* R5 *> ) in R15 by L437 , FINSEQ_1:32;
L439: ( ( R9 ^ R10 ) ^ <* R6 *> ) in R15 by L438 , L436 , L176;
L440: (( R10 ^ <* R6 *> ) in ( ( NAT ) * ) & (for R11 being (FinSequence of ( NAT )) holds (R11 = ( R10 ^ <* R6 *> ) implies ( R9 ^ R11 ) in R15))) by L439 , FINSEQ_1:32 , FINSEQ_1:def 11;
thus L441: ( R10 ^ <* R6 *> ) in D27 by L440 , L427;
end;
reconsider D29 = D27 as Tree by L434 , L429 , L431 , L176;
take D29;
let R10 being (FinSequence of ( NAT ));
thus L442: (R10 in D29 implies ( R9 ^ R10 ) in R15) by L427;
assume L443: ( R9 ^ R10 ) in R15;
L444: (R10 in ( ( NAT ) * ) & (for B48 being (FinSequence of ( NAT )) holds (R10 = B48 implies ( R9 ^ B48 ) in R15))) by L443 , FINSEQ_1:def 11;
thus L445: thesis by L444 , L427;
end;
uniqueness
proof
let C51 , C52 being Tree;
assume that
L446: (for R10 being (FinSequence of ( NAT )) holds (R10 in C51 iff ( R9 ^ R10 ) in R15))
and
L447: (for R10 being (FinSequence of ( NAT )) holds (R10 in C52 iff ( R9 ^ R10 ) in R15));
L448:
now
let R2 being set;
thus L449: (R2 in C51 implies R2 in C52)
proof
assume L450: R2 in C51;
reconsider D30 = R2 as (FinSequence of ( NAT )) by L450 , L191;
L451: ( R9 ^ D30 ) in R15 by L446 , L450;
thus L452: thesis by L451 , L447;
end;

assume L453: R2 in C52;
reconsider D31 = R2 as (FinSequence of ( NAT )) by L453 , L191;
L454: ( R9 ^ D31 ) in R15 by L447 , L453;
thus L455: R2 in C51 by L454 , L446;
end;
thus L456: thesis by L448 , TARSKI:1;
end;
end;
theorem
L458: (for R15 being Tree holds ( R15 | ( <*> ( NAT ) ) ) = R15)
proof
let R15 being Tree;
L459: ( <*> ( NAT ) ) in R15 by L222;
thus L460: ( R15 | ( <*> ( NAT ) ) ) c= R15
proof
let R2 being set;
assume L461: R2 in ( R15 | ( <*> ( NAT ) ) );
reconsider D32 = R2 as (Element of ( R15 | ( <*> ( NAT ) ) )) by L461;
L462: ( ( {} ) ^ D32 ) = D32 by FINSEQ_1:34;
thus L463: thesis by L462 , L459 , L426;
end;

let R2 being set;
assume L464: R2 in R15;
reconsider D33 = R2 as (Element of R15) by L464;
L465: ( ( {} ) ^ D33 ) = D33 by FINSEQ_1:34;
thus L466: thesis by L465 , L459 , L426;
end;
registration
let C53 being  finite Tree;
let C54 being (Element of C53);
cluster ( C53 | C54 ) ->  finite;
coherence
proof
consider C55 being Function such that L467: ( rng C55 ) = C53 and L468: ( dom C55 ) in ( omega ) by FINSET_1:def 1;
defpred S6[ set , set ] means (ex R10 being (FinSequence of ( NAT )) st (( C55 . $1 ) = R10 & ((ex R11 being (FinSequence of ( NAT )) st ($2 = R11 & R10 = ( C54 ^ R11 ))) or ((for R11 being (FinSequence of ( NAT )) holds R10 <> ( C54 ^ R11 )) & $2 = ( <*> ( NAT ) )))));
L469: (for R2 being set holds (R2 in ( dom C55 ) implies (ex R3 being set st S6[ R2 , R3 ])))
proof
let R2 being set;
assume L470: R2 in ( dom C55 );
L471: ( C55 . R2 ) in C53 by L470 , L467 , FUNCT_1:def 3;
reconsider D34 = ( C55 . R2 ) as (FinSequence of ( NAT )) by L471 , L191;
L472: ((ex R11 being (FinSequence of ( NAT )) st D34 = ( C54 ^ R11 )) implies thesis);
thus L473: thesis by L472;
end;
consider C56 being Function such that L474: (( dom C56 ) = ( dom C55 ) & (for R2 being set holds (R2 in ( dom C55 ) implies S6[ R2 , ( C56 . R2 ) ]))) from CLASSES1:sch 1(L469);
L475: ( C53 | C54 ) is  finite
proof
take C56;
thus L476: ( rng C56 ) c= ( C53 | C54 )
proof
let R2 being set;
assume L477: R2 in ( rng C56 );
consider R3 being set such that L478: R3 in ( dom C56 ) and L479: R2 = ( C56 . R3 ) by L477 , FUNCT_1:def 3;
consider R10 being (FinSequence of ( NAT )) such that L480: ( C55 . R3 ) = R10 and L481: ((ex R11 being (FinSequence of ( NAT )) st (R2 = R11 & R10 = ( C54 ^ R11 ))) or ((for R11 being (FinSequence of ( NAT )) holds R10 <> ( C54 ^ R11 )) & R2 = ( <*> ( NAT ) ))) by L474 , L478 , L479;
assume L482: (not R2 in ( C53 | C54 ));
L483: (( C54 ^ ( <*> ( NAT ) ) ) = C54 & R10 in C53) by L467 , L474 , L478 , L480 , FINSEQ_1:34 , FUNCT_1:def 3;
thus L484: contradiction by L483 , L481 , L482 , L426;
end;

thus L485: ( C53 | C54 ) c= ( rng C56 )
proof
let R2 being set;
assume L486: R2 in ( C53 | C54 );
reconsider D35 = R2 as (FinSequence of ( NAT )) by L486 , L191;
L487: ( C54 ^ D35 ) in C53 by L486 , L426;
consider R3 being set such that L488: R3 in ( dom C55 ) and L489: ( C54 ^ D35 ) = ( C55 . R3 ) by L487 , L467 , FUNCT_1:def 3;
L490: S6[ R3 , ( C56 . R3 ) ] by L474 , L488;
L491: R2 = ( C56 . R3 ) by L490 , L489 , FINSEQ_1:33;
thus L492: thesis by L491 , L474 , L488 , FUNCT_1:def 3;
end;

thus L493: thesis by L468 , L474;
end;
thus L494: thesis by L475;
end;
end;
definition
let R15 being Tree;
assume L496: ( Leaves R15 ) <> ( {} );
mode Leaf of R15
 -> (Element of R15)
means it in ( Leaves R15 );
existence
proof
set D36 = the (Element of ( Leaves R15 ));
reconsider D37 = D36 as (Element of R15) by L496 , TARSKI:def 3;
take D37;
thus L497: thesis by L496;
end;
end;
definition
let R15 being Tree;
mode Subtree of R15
 -> Tree
means (ex B49 being (Element of R15) st it = ( R15 | B49 ));
existence
proof
set D38 = the (Element of R15);
take ( R15 | D38 );
take D38;
thus L499: thesis;
end;
end;
definition
let R15 being Tree;
let R9 being (FinSequence of ( NAT ));
let R16 being Tree;
assume L501: R9 in R15;
func R15 with-replacement (R9 , R16) -> Tree means 
:L502: (for R10 being (FinSequence of ( NAT )) holds (R10 in it iff ((R10 in R15 & (not R9 is_a_proper_prefix_of R10)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 ))))));
existence
proof
reconsider D39 = R9 as (Element of R15) by L501;
L503: (not R9 is_a_proper_prefix_of D39);
L504: R9 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } by L503;
reconsider D40 = ( { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } \/ { ( R9 ^ B50 ) where B50 is (Element of R16) : B50 = B50 } ) as non  empty set by L504;
L505: (for R2 being set holds (R2 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } implies (R2 is (FinSequence of ( NAT )) & R2 in ( ( NAT ) * ) & R2 in R15)))
proof
let R2 being set;
assume L506: R2 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) };
L507: (ex R19 being (Element of R15) st (R2 = R19 & (not R9 is_a_proper_prefix_of R19))) by L506;
thus L508: R2 is (FinSequence of ( NAT )) by L507;
thus L509: thesis by L507 , FINSEQ_1:def 11;
end;
L510: D40 is  Tree-like
proof
thus L511: D40 c= ( ( NAT ) * )
proof
let R2 being set;
assume L512: R2 in D40;
L513: (R2 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } or R2 in { ( R9 ^ B51 ) where B51 is (Element of R16) : B51 = B51 }) by L512 , XBOOLE_0:def 3;
L514:
now
assume L515: R2 in { ( R9 ^ B52 ) where B52 is (Element of R16) : B52 = B52 };
L516: (ex B53 being (Element of R16) st (R2 = ( R9 ^ B53 ) & B53 = B53)) by L515;
thus L517: R2 is (FinSequence of ( NAT )) by L516;
end;
thus L518: thesis by L514 , L505 , L513 , FINSEQ_1:def 11;
end;

thus L519: (for R10 being (FinSequence of ( NAT )) holds (R10 in D40 implies ( ProperPrefixes R10 ) c= D40))
proof
let R10 being (FinSequence of ( NAT ));
assume that
L520: R10 in D40;
L521:
now
assume L522: R10 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) };
L523: (ex R19 being (Element of R15) st (R10 = R19 & (not R9 is_a_proper_prefix_of R19))) by L522;
L524: ( ProperPrefixes R10 ) c= R15 by L523 , L176;
thus L525: ( ProperPrefixes R10 ) c= D40
proof
let R2 being set;
assume L526: R2 in ( ProperPrefixes R10 );
consider R12 being FinSequence such that L527: R2 = R12 and L528: R12 is_a_proper_prefix_of R10 by L526 , L94;
reconsider D41 = R12 as (Element of R15) by L524 , L526 , L527;
L529: (not R9 is_a_proper_prefix_of D41) by L523 , L528 , XBOOLE_1:56;
L530: R2 in { B54 where B54 is (Element of R15) : (not R9 is_a_proper_prefix_of B54) } by L529 , L527;
thus L531: thesis by L530 , XBOOLE_0:def 3;
end;

end;
L526:
now
assume L527: R10 in { ( R9 ^ B55 ) where B55 is (Element of R16) : B55 = B55 };
consider C57 being (Element of R16) such that L528: R10 = ( R9 ^ C57 ) and L529: C57 = C57 by L527;
thus L530: ( ProperPrefixes R10 ) c= D40
proof
let R2 being set;
assume L531: R2 in ( ProperPrefixes R10 );
reconsider D42 = R2 as FinSequence by L531 , L110;
L532: D42 is_a_proper_prefix_of ( R9 ^ C57 ) by L528 , L531 , L114;
L533: D42 is_a_prefix_of ( R9 ^ C57 ) by L532 , XBOOLE_0:def 8;
consider C58 being FinSequence such that L534: ( R9 ^ C57 ) = ( D42 ^ C58 ) by L533 , L9;
L535:
now
assume L536: ( len R9 ) <= ( len D42 );
consider C59 being FinSequence such that L537: ( R9 ^ C59 ) = D42 by L536 , L534 , FINSEQ_1:47;
L538: ( R9 ^ C57 ) = ( R9 ^ ( C59 ^ C58 ) ) by L534 , L537 , FINSEQ_1:32;
L539: C57 = ( C59 ^ C58 ) by L538 , FINSEQ_1:33;
L540: (( dom C59 ) = ( Seg ( len C59 ) ) & ( C57 | ( dom C59 ) ) = C59) by L539 , FINSEQ_1:21 , FINSEQ_1:def 3;
reconsider D43 = C59 as (FinSequence of ( NAT )) by L540 , FINSEQ_1:18;
L541: D43 is_a_prefix_of C57 by L540 , L2;
reconsider D44 = D43 as (Element of R16) by L541 , L195;
L542: D42 = ( R9 ^ D44 ) by L537;
L543: D42 in { ( R9 ^ B56 ) where B56 is (Element of R16) : B56 = B56 } by L542;
thus L544: D42 in D40 by L543 , XBOOLE_0:def 3;
end;
L545:
now
assume L546: ( len D42 ) <= ( len R9 );
L547: (ex B57 being FinSequence st ( D42 ^ B57 ) = R9) by L546 , L534 , FINSEQ_1:47;
L548: ( R9 | ( dom D42 ) ) = D42 by L547 , FINSEQ_1:21;
L549: ( dom D42 ) = ( Seg ( len D42 ) ) by FINSEQ_1:def 3;
reconsider D45 = D42 as (FinSequence of ( NAT )) by L549 , L548 , FINSEQ_1:18;
L550: D45 is_a_prefix_of R9 by L548 , L549 , L2;
L551: (not R9 is_a_proper_prefix_of D45) by L550 , XBOOLE_0:def 8;
reconsider D46 = D45 as (Element of R15) by L501 , L550 , L195;
L552: D46 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } by L551;
thus L553: D42 in D40 by L552 , XBOOLE_0:def 3;
end;
thus L554: thesis by L545 , L535;
end;

end;
thus L531: thesis by L526 , L520 , L521 , XBOOLE_0:def 3;
end;

let R10 being (FinSequence of ( NAT ));
let R5 being (Element of ( NAT ));
let R6 being (Element of ( NAT ));
assume that
L532: ( R10 ^ <* R5 *> ) in D40
and
L533: R6 <= R5;
L534:
now
assume L535: ( R10 ^ <* R5 *> ) in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) };
L536: (ex B58 being (Element of R15) st (( R10 ^ <* R5 *> ) = B58 & (not R9 is_a_proper_prefix_of B58))) by L535;
reconsider D47 = ( R10 ^ <* R6 *> ) as (Element of R15) by L536 , L533 , L176;
L537:
now
assume L538: R9 is_a_proper_prefix_of D47;
L539: R9 is_a_prefix_of R10 by L538 , L77;
thus L540: contradiction by L539 , L536 , L68;
end;
L541: ( R10 ^ <* R6 *> ) in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } by L537;
thus L542: thesis by L541 , XBOOLE_0:def 3;
end;
L543:
now
assume L544: ( R10 ^ <* R5 *> ) in { ( R9 ^ B59 ) where B59 is (Element of R16) : B59 = B59 };
consider C60 being (Element of R16) such that L545: ( R10 ^ <* R5 *> ) = ( R9 ^ C60 ) and L546: C60 = C60 by L544;
L547:
now
assume L548: ( len R10 ) <= ( len R9 );
consider C61 being FinSequence such that L549: ( R10 ^ C61 ) = R9 by L548 , L545 , FINSEQ_1:47;
L550: ( R10 ^ <* R5 *> ) = ( R10 ^ ( C61 ^ C60 ) ) by L545 , L549 , FINSEQ_1:32;
L551: <* R5 *> = ( C61 ^ C60 ) by L550 , FINSEQ_1:33;
L552:
now
assume L553: C61 = <* R5 *>;
reconsider D48 = ( R10 ^ <* R6 *> ) as (Element of R15) by L553 , L501 , L533 , L549 , L176;
L554:
now
assume L555: R9 is_a_proper_prefix_of D48;
L556: R9 is_a_prefix_of D48 by L555 , XBOOLE_0:def 8;
L557: ( len R9 ) = ( ( len R10 ) + ( len <* R5 *> ) ) by L549 , L553 , FINSEQ_1:22
.= ( ( len R10 ) + 1 ) by FINSEQ_1:40
.= ( ( len R10 ) + ( len <* R6 *> ) ) by FINSEQ_1:40
.= ( len D48 ) by FINSEQ_1:22;
thus L558: contradiction by L557 , L555 , L556 , L16;
end;
thus L559: ( R10 ^ <* R6 *> ) in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } by L554;
end;
L560:
now
assume that
L561: C60 = <* R5 *>
and
L562: C61 = ( {} );
L563: (C60 = ( ( {} ) ^ C60 ) & ( {} ) = ( <*> ( NAT ) )) by FINSEQ_1:34;
L564: ( ( {} ) ^ <* R6 *> ) in R16 by L563 , L533 , L561 , L176;
reconsider D49 = <* R6 *> as (Element of R16) by L564 , FINSEQ_1:34;
L565: ( R10 ^ <* R6 *> ) = ( R9 ^ D49 ) by L549 , L562 , FINSEQ_1:34;
thus L566: ( R10 ^ <* R6 *> ) in { ( R9 ^ B60 ) where B60 is (Element of R16) : B60 = B60 } by L565;
end;
thus L567: thesis by L560 , L551 , L552 , FINSEQ_1:88 , XBOOLE_0:def 3;
end;
L568:
now
assume L569: ( len R9 ) <= ( len R10 );
consider C62 being FinSequence such that L570: ( R9 ^ C62 ) = R10 by L569 , L545 , FINSEQ_1:47;
L571: ( R9 ^ ( C62 ^ <* R5 *> ) ) = ( R9 ^ C60 ) by L545 , L570 , FINSEQ_1:32;
L572: ( C62 ^ <* R5 *> ) = C60 by L571 , FINSEQ_1:33;
L573: (( dom C62 ) = ( Seg ( len C62 ) ) & ( C60 | ( dom C62 ) ) = C62) by L572 , FINSEQ_1:21 , FINSEQ_1:def 3;
reconsider D50 = C62 as (FinSequence of ( NAT )) by L573 , FINSEQ_1:18;
reconsider D51 = ( D50 ^ <* R6 *> ) as (Element of R16) by L533 , L572 , L176;
L574: ( R10 ^ <* R6 *> ) = ( R9 ^ D51 ) by L570 , FINSEQ_1:32;
L575: ( R10 ^ <* R6 *> ) in { ( R9 ^ B61 ) where B61 is (Element of R16) : B61 = B61 } by L574;
thus L576: thesis by L575 , XBOOLE_0:def 3;
end;
thus L577: thesis by L568 , L547;
end;
thus L578: thesis by L543 , L532 , L534 , XBOOLE_0:def 3;
end;
reconsider D52 = D40 as Tree by L510;
take D52;
let R10 being (FinSequence of ( NAT ));
thus L579: (R10 in D52 implies ((R10 in R15 & (not R9 is_a_proper_prefix_of R10)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 )))))
proof
assume L580: R10 in D52;
L581:
now
assume L582: R10 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) };
L583: (ex B62 being (Element of R15) st (R10 = B62 & (not R9 is_a_proper_prefix_of B62))) by L582;
thus L584: thesis by L583;
end;
L585:
now
assume L586: R10 in { ( R9 ^ B63 ) where B63 is (Element of R16) : B63 = B63 };
L587: (ex B64 being (Element of R16) st (R10 = ( R9 ^ B64 ) & B64 = B64)) by L586;
thus L588: (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 ))) by L587;
end;
thus L589: thesis by L585 , L580 , L581 , XBOOLE_0:def 3;
end;

assume L590: ((R10 in R15 & (not R9 is_a_proper_prefix_of R10)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 ))));
L591: ((R10 in R15 & (not R9 is_a_proper_prefix_of R10)) implies R10 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) });
L592: ((ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 ))) implies R10 in { ( R9 ^ B65 ) where B65 is (Element of R16) : B65 = B65 });
thus L593: thesis by L592 , L590 , L591 , XBOOLE_0:def 3;
end;
uniqueness
proof
let C63 , C64 being Tree;
assume that
L594: (for R10 being (FinSequence of ( NAT )) holds (R10 in C63 iff ((R10 in R15 & (not R9 is_a_proper_prefix_of R10)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 ))))))
and
L595: (for R10 being (FinSequence of ( NAT )) holds (R10 in C64 iff ((R10 in R15 & (not R9 is_a_proper_prefix_of R10)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & R10 = ( R9 ^ R11 ))))));
thus L596: C63 c= C64
proof
let R2 being set;
assume L597: R2 in C63;
reconsider D53 = R2 as (FinSequence of ( NAT )) by L597 , L191;
L598: ((D53 in R15 & (not R9 is_a_proper_prefix_of D53)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & D53 = ( R9 ^ R11 )))) by L594 , L597;
thus L599: thesis by L598 , L595;
end;

let R2 being set;
assume L600: R2 in C64;
reconsider D54 = R2 as (FinSequence of ( NAT )) by L600 , L191;
L601: ((D54 in R15 & (not R9 is_a_proper_prefix_of D54)) or (ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & D54 = ( R9 ^ R11 )))) by L595 , L600;
thus L602: thesis by L601 , L594;
end;
end;
theorem
L604: (for R9 being (FinSequence of ( NAT )) holds (for R15 being Tree holds (for R16 being Tree holds (R9 in R15 implies ( R15 with-replacement (R9 , R16) ) = ( { B66 where B66 is (Element of R15) : (not R9 is_a_proper_prefix_of B66) } \/ { ( R9 ^ B67 ) where B67 is (Element of R16) : B67 = B67 } )))))
proof
let R9 being (FinSequence of ( NAT ));
let R15 being Tree;
let R16 being Tree;
assume L605: R9 in R15;
thus L606: ( R15 with-replacement (R9 , R16) ) c= ( { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } \/ { ( R9 ^ B68 ) where B68 is (Element of R16) : B68 = B68 } )
proof
let R2 being set;
assume L607: R2 in ( R15 with-replacement (R9 , R16) );
reconsider D55 = R2 as (FinSequence of ( NAT )) by L607 , L191;
L608: ((ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & D55 = ( R9 ^ R11 ))) implies R2 in { ( R9 ^ B69 ) where B69 is (Element of R16) : B69 = B69 });
L609: ((D55 in R15 & (not R9 is_a_proper_prefix_of D55)) implies R2 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) });
thus L610: thesis by L609 , L605 , L607 , L608 , L502 , XBOOLE_0:def 3;
end;

let R2 being set;
assume that
L611: R2 in ( { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) } \/ { ( R9 ^ B70 ) where B70 is (Element of R16) : B70 = B70 } );
L612:
now
assume L613: R2 in { ( R9 ^ B71 ) where B71 is (Element of R16) : B71 = B71 };
L614: (ex B72 being (Element of R16) st (R2 = ( R9 ^ B72 ) & B72 = B72)) by L613;
thus L615: thesis by L614 , L605 , L502;
end;
L616:
now
assume L617: R2 in { R19 where R19 is (Element of R15) : (not R9 is_a_proper_prefix_of R19) };
L618: (ex R19 being (Element of R15) st (R2 = R19 & (not R9 is_a_proper_prefix_of R19))) by L617;
thus L619: thesis by L618 , L605 , L502;
end;
thus L620: thesis by L616 , L611 , L612 , XBOOLE_0:def 3;
end;
theorem
L621: (for R9 being (FinSequence of ( NAT )) holds (for R15 being Tree holds (for R16 being Tree holds (R9 in R15 implies R16 = ( ( R15 with-replacement (R9 , R16) ) | R9 )))))
proof
let R9 being (FinSequence of ( NAT ));
let R15 being Tree;
let R16 being Tree;
assume L622: R9 in R15;
L623: R9 in ( R15 with-replacement (R9 , R16) ) by L622 , L502;
thus L624: R16 c= ( ( R15 with-replacement (R9 , R16) ) | R9 )
proof
let R2 being set;
assume L625: R2 in R16;
reconsider D56 = R2 as (FinSequence of ( NAT )) by L625 , L191;
L626: ( R9 ^ D56 ) in ( R15 with-replacement (R9 , R16) ) by L622 , L625 , L502;
thus L627: thesis by L626 , L623 , L426;
end;

let R2 being set;
assume L628: R2 in ( ( R15 with-replacement (R9 , R16) ) | R9 );
reconsider D57 = R2 as (FinSequence of ( NAT )) by L628 , L191;
L629: ( R9 ^ D57 ) in ( R15 with-replacement (R9 , R16) ) by L623 , L628 , L426;
L630:
now
assume that
L631: ( R9 ^ D57 ) in R15
and
L632: (not R9 is_a_proper_prefix_of ( R9 ^ D57 ));
L633: R9 is_a_prefix_of ( R9 ^ D57 ) by L9;
L634: ( R9 ^ D57 ) = R9 by L633 , L632 , XBOOLE_0:def 8
.= ( R9 ^ ( {} ) ) by FINSEQ_1:34;
L635: D57 = ( {} ) by L634 , FINSEQ_1:33;
thus L636: D57 in R16 by L635 , L222;
end;
L637: ((ex R11 being (FinSequence of ( NAT )) st (R11 in R16 & ( R9 ^ D57 ) = ( R9 ^ R11 ))) implies D57 in R16) by FINSEQ_1:33;
thus L638: thesis by L637 , L622 , L629 , L630 , L502;
end;
registration
let C65 being  finite Tree;
let C66 being (Element of C65);
let C67 being  finite Tree;
cluster ( C65 with-replacement (C66 , C67) ) ->  finite;
coherence
proof
L639: { B73 where B73 is (Element of C65) : (not C66 is_a_proper_prefix_of B73) } c= C65
proof
let R2 being set;
assume L640: R2 in { B74 where B74 is (Element of C65) : (not C66 is_a_proper_prefix_of B74) };
L641: (ex B75 being (Element of C65) st (R2 = B75 & (not C66 is_a_proper_prefix_of B75))) by L640;
thus L642: thesis by L641;
end;
L643: C67 , { ( C66 ^ B76 ) where B76 is (Element of C67) : B76 = B76 } are_equipotent 
proof
defpred S7[ set , set ] means (ex R10 being (FinSequence of ( NAT )) st ($1 = R10 & $2 = ( C66 ^ R10 )));
L644: (for R2 being set holds (R2 in C67 implies (ex R3 being set st S7[ R2 , R3 ])))
proof
let R2 being set;
assume L645: R2 in C67;
reconsider D58 = R2 as (FinSequence of ( NAT )) by L645 , L191;
L646: ( C66 ^ D58 ) = ( C66 ^ D58 );
thus L647: thesis by L646;
end;
consider R8 being Function such that L648: (( dom R8 ) = C67 & (for R2 being set holds (R2 in C67 implies S7[ R2 , ( R8 . R2 ) ]))) from CLASSES1:sch 1(L644);
take R8;
thus L649: R8 is  one-to-one
proof
let R2 being set;
let R3 being set;
assume that
L650: (R2 in ( dom R8 ) & R3 in ( dom R8 ))
and
L651: ( R8 . R2 ) = ( R8 . R3 );
L652: ((ex R10 being (FinSequence of ( NAT )) st (R2 = R10 & ( R8 . R2 ) = ( C66 ^ R10 ))) & (ex R11 being (FinSequence of ( NAT )) st (R3 = R11 & ( R8 . R3 ) = ( C66 ^ R11 )))) by L648 , L650;
thus L653: thesis by L652 , L651 , FINSEQ_1:33;
end;

thus L654: ( dom R8 ) = C67 by L648;
thus L655: ( rng R8 ) c= { ( C66 ^ B77 ) where B77 is (Element of C67) : B77 = B77 }
proof
let R2 being set;
assume L656: R2 in ( rng R8 );
consider R3 being set such that L657: R3 in ( dom R8 ) and L658: R2 = ( R8 . R3 ) by L656 , FUNCT_1:def 3;
consider R10 being (FinSequence of ( NAT )) such that L659: R3 = R10 and L660: ( R8 . R3 ) = ( C66 ^ R10 ) by L648 , L657;
reconsider D59 = R10 as (Element of C67) by L648 , L657 , L659;
L661: R2 = ( C66 ^ D59 ) by L658 , L660;
thus L662: thesis by L661;
end;

let R2 being set;
assume L663: R2 in { ( C66 ^ B78 ) where B78 is (Element of C67) : B78 = B78 };
consider C68 being (Element of C67) such that L664: R2 = ( C66 ^ C68 ) and L665: C68 = C68 by L663;
L666: S7[ C68 , ( R8 . C68 ) ] by L648;
thus L667: thesis by L666 , L648 , L664 , FUNCT_1:def 3;
end;
L668: { ( C66 ^ B79 ) where B79 is (Element of C67) : B79 = B79 } is  finite by L643 , CARD_1:38;
L669: ( { B80 where B80 is (Element of C65) : (not C66 is_a_proper_prefix_of B80) } \/ { ( C66 ^ B81 ) where B81 is (Element of C67) : B81 = B81 } ) is  finite by L668 , L639;
thus L670: thesis by L669 , L604;
end;
end;
theorem
L672: (for B82 being FinSequence holds ( ProperPrefixes B82 ) , ( dom B82 ) are_equipotent )
proof
let C69 being FinSequence;
defpred S8[ set , set ] means (ex R20 being FinSequence st ($1 = R20 & $2 = ( ( len R20 ) + 1 )));
L673: (for R2 being set holds (R2 in ( ProperPrefixes C69 ) implies (ex R3 being set st S8[ R2 , R3 ])))
proof
let R2 being set;
assume L674: R2 in ( ProperPrefixes C69 );
consider C70 being FinSequence such that L675: R2 = C70 and L676: C70 is_a_proper_prefix_of C69 by L674 , L94;
reconsider D60 = ( ( len C70 ) + 1 ) as set;
take D60;
take C70;
thus L677: thesis by L675;
end;
consider R8 being Function such that L678: ( dom R8 ) = ( ProperPrefixes C69 ) and L679: (for R2 being set holds (R2 in ( ProperPrefixes C69 ) implies S8[ R2 , ( R8 . R2 ) ])) from CLASSES1:sch 1(L673);
take R8;
thus L680: R8 is  one-to-one
proof
let R2 being set;
let R3 being set;
assume that
L681: (R2 in ( dom R8 ) & R3 in ( dom R8 ))
and
L682: ( R8 . R2 ) = ( R8 . R3 );
L683: ((ex B83 being FinSequence st (R2 = B83 & ( R8 . R2 ) = ( ( len B83 ) + 1 ))) & (ex B84 being FinSequence st (R3 = B84 & ( R8 . R2 ) = ( ( len B84 ) + 1 )))) by L678 , L679 , L681 , L682;
thus L684: thesis by L683 , L678 , L681 , L39 , L154;
end;

thus L685: ( dom R8 ) = ( ProperPrefixes C69 ) by L678;
thus L686: ( rng R8 ) c= ( dom C69 )
proof
let R2 being set;
assume L687: R2 in ( rng R8 );
consider R3 being set such that L688: R3 in ( dom R8 ) and L689: R2 = ( R8 . R3 ) by L687 , FUNCT_1:def 3;
consider C71 being FinSequence such that L690: R3 = C71 and L691: R2 = ( ( len C71 ) + 1 ) by L678 , L679 , L688 , L689;
L692: ( len C71 ) < ( len C69 ) by L678 , L688 , L690 , L120;
L693: (( ( 0 ) + 1 ) <= ( ( len C71 ) + 1 ) & ( ( len C71 ) + 1 ) <= ( len C69 )) by L692 , NAT_1:13;
L694: R2 in ( Seg ( len C69 ) ) by L693 , L691 , FINSEQ_1:1;
thus L695: thesis by L694 , FINSEQ_1:def 3;
end;

let R2 being set;
assume L696: R2 in ( dom C69 );
L697: R2 in ( Seg ( len C69 ) ) by L696 , FINSEQ_1:def 3;
reconsider D61 = R2 as (Element of ( NAT )) by L696;
L698: 1 <= D61 by L697 , FINSEQ_1:1;
L699: D61 <= ( len C69 ) by L697 , FINSEQ_1:1;
consider C72 being Nat such that L700: D61 = ( 1 + C72 ) by L698 , NAT_1:10;
reconsider D62 = C72 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D63 = ( C69 | ( Seg D62 ) ) as FinSequence by FINSEQ_1:15;
L701: D62 <= ( len C69 ) by L699 , L700 , NAT_1:13;
L702: D62 <> ( len C69 ) by L699 , L700 , NAT_1:13;
L703: ( len D63 ) = D62 by L701 , FINSEQ_1:17;
L704: D63 is_a_prefix_of C69 by L2;
L705: ( len D63 ) = D62 by L701 , FINSEQ_1:17;
L706: D63 is_a_proper_prefix_of C69 by L705 , L702 , L704 , XBOOLE_0:def 8;
L707: D63 in ( ProperPrefixes C69 ) by L706 , L114;
L708: (ex B85 being FinSequence st (D63 = B85 & ( R8 . D63 ) = ( ( len B85 ) + 1 ))) by L707 , L679;
thus L709: thesis by L708 , L678 , L700 , L703 , L707 , FUNCT_1:def 3;
end;
registration
let C73 being FinSequence;
cluster ( ProperPrefixes C73 ) ->  finite;
coherence
proof
L710: ( ProperPrefixes C73 ) , ( dom C73 ) are_equipotent  by L672;
thus L711: thesis by L710 , CARD_1:38;
end;
end;
theorem
L713: (for B86 being FinSequence holds ( card ( ProperPrefixes B86 ) ) = ( len B86 ))
proof
let C74 being FinSequence;
L714: ( dom C74 ) = ( Seg ( len C74 ) ) by FINSEQ_1:def 3;
L715: ( ProperPrefixes C74 ) , ( dom C74 ) are_equipotent  by L672;
L716: ( card ( dom C74 ) ) = ( card ( len C74 ) ) by L714 , FINSEQ_1:55;
thus L717: thesis by L716 , L715 , CARD_1:5;
end;
definition
let C75 being set;
attr C75 is  AntiChain_of_Prefixes-like
means
:L718: ((for R2 being set holds (R2 in C75 implies R2 is FinSequence)) & (for R12 being FinSequence holds (for R13 being FinSequence holds ((R12 in C75 & R13 in C75 & R12 <> R13) implies (not R12 , R13 are_c=-comparable )))));
end;
registration
cluster  AntiChain_of_Prefixes-like for set;
existence
proof
take ( {} );
thus L720: (for R2 being set holds (R2 in ( {} ) implies R2 is FinSequence));
let R12 being FinSequence;
let R13 being FinSequence;
thus L721: thesis;
end;
end;
definition
mode AntiChain_of_Prefixes
 is  AntiChain_of_Prefixes-like set;
end;
theorem
L724: (for R20 being FinSequence holds { R20 } is  AntiChain_of_Prefixes-like)
proof
let R20 being FinSequence;
thus L725: (for R2 being set holds (R2 in { R20 } implies R2 is FinSequence)) by TARSKI:def 1;
let R12 being FinSequence;
let R13 being FinSequence;
assume that
L726: R12 in { R20 }
and
L727: R13 in { R20 };
L728: R12 = R20 by L726 , TARSKI:def 1;
thus L729: thesis by L728 , L727 , TARSKI:def 1;
end;
theorem
L730: (for R12 being FinSequence holds (for R13 being FinSequence holds ((not R12 , R13 are_c=-comparable ) implies { R12 , R13 } is  AntiChain_of_Prefixes-like)))
proof
let R12 being FinSequence;
let R13 being FinSequence;
assume L731: (not R12 , R13 are_c=-comparable );
thus L732: (for R2 being set holds (R2 in { R12 , R13 } implies R2 is FinSequence)) by TARSKI:def 2;
let C76 , C77 being FinSequence;
assume that
L733: C76 in { R12 , R13 }
and
L734: C77 in { R12 , R13 };
L735: (C76 = R12 or C76 = R13) by L733 , TARSKI:def 2;
L736: (C77 = R12 or C77 = R13) by L734 , TARSKI:def 2;
thus L737: thesis by L736 , L731 , L735;
end;
definition
let R15 being Tree;
mode AntiChain_of_Prefixes of R15
 -> AntiChain_of_Prefixes
means :L738: it c= R15;
existence
proof
set D64 = the (Element of R15);
reconsider D65 = { D64 } as AntiChain_of_Prefixes by L724;
take D65;
let R2 being set;
assume L739: R2 in D65;
L740: R2 = D64 by L739 , TARSKI:def 1;
thus L741: thesis by L740;
end;
end;
theorem
L743: (for R15 being Tree holds (( {} ) is (AntiChain_of_Prefixes of R15) & { ( {} ) } is (AntiChain_of_Prefixes of R15)))
proof
let R15 being Tree;
L744: ( {} ) is  AntiChain_of_Prefixes-like
proof
thus L745: (for R2 being set holds (R2 in ( {} ) implies R2 is FinSequence));
let R12 being FinSequence;
let R13 being FinSequence;
thus L746: thesis;
end;
reconsider D66 = ( {} ) as AntiChain_of_Prefixes by L744;
L747: D66 c= R15 by XBOOLE_1:2;
thus L748: ( {} ) is (AntiChain_of_Prefixes of R15) by L747 , L738;
reconsider D67 = D6 as AntiChain_of_Prefixes by L724;
L749: D67 is (AntiChain_of_Prefixes of R15)
proof
let R2 being set;
assume L750: R2 in D67;
L751: R2 = ( {} ) by L750 , TARSKI:def 1;
thus L752: thesis by L751 , L222;
end;
thus L753: thesis by L749;
end;
theorem
L754: (for R15 being Tree holds (for R19 being (Element of R15) holds { R19 } is (AntiChain_of_Prefixes of R15)))
proof
let R15 being Tree;
let R19 being (Element of R15);
reconsider D68 = { R19 } as AntiChain_of_Prefixes by L724;
L755: D68 is (AntiChain_of_Prefixes of R15)
proof
let R2 being set;
assume L756: R2 in D68;
L757: R2 = R19 by L756 , TARSKI:def 1;
thus L758: thesis by L757;
end;
thus L759: thesis by L755;
end;
theorem
L760: (for R15 being Tree holds (for R21 being (Element of R15) holds (for R22 being (Element of R15) holds ((not R21 , R22 are_c=-comparable ) implies { R21 , R22 } is (AntiChain_of_Prefixes of R15)))))
proof
let R15 being Tree;
let R21 being (Element of R15);
let R22 being (Element of R15);
assume L761: (not R21 , R22 are_c=-comparable );
reconsider D69 = { R21 , R22 } as AntiChain_of_Prefixes by L761 , L730;
L762: D69 is (AntiChain_of_Prefixes of R15)
proof
let R2 being set;
assume L763: R2 in D69;
L764: (R2 = R21 or R2 = R22) by L763 , TARSKI:def 2;
thus L765: thesis by L764;
end;
thus L766: thesis by L762;
end;
registration
let C78 being  finite Tree;
cluster  ->  finite for (AntiChain_of_Prefixes of C78);
coherence
proof
let C79 being (AntiChain_of_Prefixes of C78);
L767: C79 c= C78 by L738;
thus L768: thesis by L767;
end;
end;
definition
let C80 being  finite Tree;
func height C80 -> (Element of ( NAT )) means 
:L770: ((ex R9 being (FinSequence of ( NAT )) st (R9 in C80 & ( len R9 ) = it)) & (for R9 being (FinSequence of ( NAT )) holds (R9 in C80 implies ( len R9 ) <= it)));
existence
proof
consider C81 being Nat such that L771: C80 , ( Seg C81 ) are_equipotent  by FINSEQ_1:56;
defpred S9[ Nat ] means (for R9 being (FinSequence of ( NAT )) holds (R9 in C80 implies ( len R9 ) <= $1));
L772: (ex B87 being Nat st S9[ B87 ])
proof
L773:
now
given R9 being (FinSequence of ( NAT )) such that
L774: R9 in C80
and
L775: (not ( len R9 ) <= C81);

L776: ( ProperPrefixes R9 ) c= C80 by L774 , L176;
L777: ( ProperPrefixes R9 ) , ( dom R9 ) are_equipotent  by L672;
L778: ( card ( ProperPrefixes R9 ) ) c= ( card C80 ) by L776 , CARD_1:11;
L779: ( card ( ProperPrefixes R9 ) ) = ( card ( dom R9 ) ) by L777 , CARD_1:5;
L780: (( card C80 ) = ( card ( Seg C81 ) ) & ( dom R9 ) = ( Seg ( len R9 ) )) by L771 , CARD_1:5 , FINSEQ_1:def 3;
L781: ( Seg C81 ) c= ( Seg ( len R9 ) ) by L775 , FINSEQ_1:5;
L782: ( card ( Seg C81 ) ) c= ( card ( Seg ( len R9 ) ) ) by L781 , CARD_1:11;
L783: (( card ( Seg C81 ) ) = ( card C81 ) & ( card ( Seg ( len R9 ) ) ) = ( card ( len R9 ) )) by FINSEQ_1:55;
L784: ( card C81 ) = ( card ( len R9 ) ) by L783 , L778 , L779 , L780 , L782 , XBOOLE_0:def 10;
thus L785: contradiction by L784 , L775 , CARD_1:40;
end;
consider C82 being Nat such that L786: S9[ C82 ] by L773;
reconsider D70 = C82 as (Element of ( NAT )) by ORDINAL1:def 12;
take D70;
thus L787: thesis by L786;
end;
consider C83 being Nat such that L788: S9[ C83 ] and L789: (for B88 being Nat holds (S9[ B88 ] implies C83 <= B88)) from NAT_1:sch 5(L772);
set D71 = the (Element of C80);
reconsider D72 = C83 as (Element of ( NAT )) by ORDINAL1:def 12;
take D72;
thus L790: (ex R9 being (FinSequence of ( NAT )) st (R9 in C80 & ( len R9 ) = D72))
proof
assume L791: (for R9 being (FinSequence of ( NAT )) holds (R9 in C80 implies ( len R9 ) <> D72));
reconsider D73 = D71 as (FinSequence of ( NAT ));
L792: ( len D73 ) <= D72 by L788;
L793: ( len D73 ) < D72 by L792 , L791 , XXREAL_0:1;
consider C84 being Nat such that L794: D72 = ( C84 + 1 ) by L793 , NAT_1:6;
reconsider D74 = C84 as (Element of ( NAT )) by ORDINAL1:def 12;
L795: (for R9 being (FinSequence of ( NAT )) holds (R9 in C80 implies ( len R9 ) <= D74))
proof
let R9 being (FinSequence of ( NAT ));
assume L796: R9 in C80;
L797: ( len R9 ) <= D72 by L796 , L788;
L798: ( len R9 ) < ( D74 + 1 ) by L797 , L791 , L794 , L796 , XXREAL_0:1;
thus L799: thesis by L798 , NAT_1:13;
end;
L800: D72 <= D74 by L795 , L789;
thus L801: contradiction by L800 , L794 , NAT_1:13;
end;

let R9 being (FinSequence of ( NAT ));
assume L802: R9 in C80;
thus L803: thesis by L802 , L788;
end;
uniqueness
proof
let C85 , C86 being (Element of ( NAT ));
given C87 being (FinSequence of ( NAT )) such that
L804: (C87 in C80 & ( len C87 ) = C85);

assume L805: (for R9 being (FinSequence of ( NAT )) holds (R9 in C80 implies ( len R9 ) <= C85));
given C88 being (FinSequence of ( NAT )) such that
L806: (C88 in C80 & ( len C88 ) = C86);

assume L807: (for R9 being (FinSequence of ( NAT )) holds (R9 in C80 implies ( len R9 ) <= C86));
L808: C85 <= C86 by L807 , L804;
L809: C86 <= C85 by L805 , L806;
thus L810: thesis by L809 , L808 , XXREAL_0:1;
end;
func width C80 -> (Element of ( NAT )) means 
:L811: (ex B89 being (AntiChain_of_Prefixes of C80) st (it = ( card B89 ) & (for B90 being (AntiChain_of_Prefixes of C80) holds ( card B90 ) <= ( card B89 ))));
existence
proof
defpred S10[ Nat ] means (ex B91 being  finite set st ($1 = ( card B91 ) & B91 c= C80 & (for R9 being (FinSequence of ( NAT )) holds (for R10 being (FinSequence of ( NAT )) holds ((R9 in B91 & R10 in B91 & R9 <> R10) implies (not R9 , R10 are_c=-comparable ))))));
L812: (( 0 ) = ( card ( {} ) ) & (for R9 being (FinSequence of ( NAT )) holds (for R10 being (FinSequence of ( NAT )) holds ((R9 in ( {} ) & R10 in ( {} ) & R9 <> R10) implies (not R9 , R10 are_c=-comparable )))));
L813: (ex B92 being Nat st S10[ B92 ]) by L812 , XBOOLE_1:2;
L814: (for B93 being Nat holds (S10[ B93 ] implies B93 <= ( card C80 )))
proof
let C89 being Nat;
given C90 being  finite set such that
L815: (C89 = ( card C90 ) & C90 c= C80)
and
L816: (for R9 being (FinSequence of ( NAT )) holds (for R10 being (FinSequence of ( NAT )) holds ((R9 in C90 & R10 in C90 & R9 <> R10) implies (not R9 , R10 are_c=-comparable ))));

L817: (( card C90 ) c= ( card C80 ) & ( card C90 ) = ( card C89 )) by L815 , CARD_1:11;
L818: ( card C80 ) = ( card ( card C80 ) );
thus L819: thesis by L818 , L817 , NAT_1:40;
end;
consider C91 being Nat such that L820: S10[ C91 ] and L821: (for B94 being Nat holds (S10[ B94 ] implies B94 <= C91)) from NAT_1:sch 6(L814 , L813);
consider C92 being  finite set such that L822: C91 = ( card C92 ) and L823: C92 c= C80 and L824: (for R9 being (FinSequence of ( NAT )) holds (for R10 being (FinSequence of ( NAT )) holds ((R9 in C92 & R10 in C92 & R9 <> R10) implies (not R9 , R10 are_c=-comparable )))) by L820;
L825: C92 is  AntiChain_of_Prefixes-like
proof
thus L826: (for R2 being set holds (R2 in C92 implies R2 is FinSequence))
proof
let R2 being set;
assume L827: R2 in C92;
L828: C80 c= ( ( NAT ) * ) by L176;
thus L829: thesis by L828 , L827 , L823;
end;

let R12 being FinSequence;
let R13 being FinSequence;
assume L830: (R12 in C92 & R13 in C92);
reconsider D75 = R12 , D76 = R13 as (Element of C80) by L830 , L823;
L831: (R12 = D75 & R13 = D76);
thus L832: thesis by L831 , L824 , L830;
end;
reconsider D77 = C92 as AntiChain_of_Prefixes by L825;
reconsider D78 = D77 as (AntiChain_of_Prefixes of C80) by L823 , L738;
reconsider D79 = C91 as (Element of ( NAT )) by ORDINAL1:def 12;
take D79;
take D78;
thus L833: D79 = ( card D78 ) by L822;
let C93 being (AntiChain_of_Prefixes of C80);
L834: (C93 c= C80 & (for R9 being (FinSequence of ( NAT )) holds (for R10 being (FinSequence of ( NAT )) holds ((R9 in C93 & R10 in C93 & R9 <> R10) implies (not R9 , R10 are_c=-comparable ))))) by L718 , L738;
thus L835: thesis by L834 , L821 , L822;
end;
uniqueness
proof
let C94 , C95 being (Element of ( NAT ));
given C96 being (AntiChain_of_Prefixes of C80) such that
L836: C94 = ( card C96 )
and
L837: (for B95 being (AntiChain_of_Prefixes of C80) holds ( card B95 ) <= ( card C96 ));

given C97 being (AntiChain_of_Prefixes of C80) such that
L838: C95 = ( card C97 )
and
L839: (for B96 being (AntiChain_of_Prefixes of C80) holds ( card B96 ) <= ( card C97 ));

L840: ( card C96 ) <= ( card C97 ) by L839;
L841: ( card C97 ) <= ( card C96 ) by L837;
thus L842: thesis by L841 , L836 , L838 , L840 , XXREAL_0:1;
end;
end;
theorem
L844: (for R17 being  finite Tree holds 1 <= ( width R17 ))
proof
let R17 being  finite Tree;
L845: ((ex B97 being (AntiChain_of_Prefixes of R17) st (( width R17 ) = ( card B97 ) & (for B98 being (AntiChain_of_Prefixes of R17) holds ( card B98 ) <= ( card B97 )))) & D6 is (AntiChain_of_Prefixes of R17)) by L811 , L743;
L846: ( card D6 ) <= ( width R17 ) by L845;
thus L847: thesis by L846 , CARD_1:30;
end;
theorem
L848: ( height ( elementary_tree ( 0 ) ) ) = ( 0 )
proof
L849:
now
thus L850: (ex R9 being (FinSequence of ( NAT )) st (R9 in ( elementary_tree ( 0 ) ) & ( len R9 ) = ( 0 )))
proof
take ( <*> ( NAT ) );
thus L851: thesis by L390 , TARSKI:def 1;
end;

let R9 being (FinSequence of ( NAT ));
assume L852: R9 in ( elementary_tree ( 0 ) );
L853: R9 = ( {} ) by L852 , L390 , TARSKI:def 1;
thus L854: ( len R9 ) <= ( 0 ) by L853;
end;
thus L855: thesis by L849 , L770;
end;
theorem
L856: (for R17 being  finite Tree holds (( height R17 ) = ( 0 ) implies R17 = ( elementary_tree ( 0 ) )))
proof
let R17 being  finite Tree;
assume L857: ( height R17 ) = ( 0 );
thus L858: R17 c= ( elementary_tree ( 0 ) )
proof
let R2 being set;
assume L859: R2 in R17;
reconsider D80 = R2 as (Element of R17) by L859;
L860: ( len D80 ) = ( 0 ) by L857 , L770;
L861: R2 = ( {} ) by L860;
thus L862: thesis by L861 , L222;
end;

let R2 being set;
assume L863: R2 in ( elementary_tree ( 0 ) );
L864: R2 = ( {} ) by L863 , L390 , TARSKI:def 1;
thus L865: thesis by L864 , L222;
end;
theorem
L866: (for R6 being (Element of ( NAT )) holds ( height ( elementary_tree ( R6 + 1 ) ) ) = 1)
proof
let R6 being (Element of ( NAT ));
set D81 = ( elementary_tree ( R6 + 1 ) );
L867:
now
thus L868: (ex R9 being (FinSequence of ( NAT )) st (R9 in D81 & ( len R9 ) = 1))
proof
take D82 = <* ( 0 ) *>;
thus L869: D82 in D81 by L386;
thus L870: thesis by FINSEQ_1:40;
end;

let R9 being (FinSequence of ( NAT ));
assume that
L871: R9 in D81;
L872: (R9 in D6 implies R9 = ( {} )) by TARSKI:def 1;
L873:
now
assume L874: R9 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) };
L875: (ex R5 being (Element of ( NAT )) st (R9 = <* R5 *> & R5 < ( R6 + 1 ))) by L874;
thus L876: ( len R9 ) = 1 by L875 , FINSEQ_1:40;
end;
thus L877: ( len R9 ) <= 1 by L873 , L871 , L872 , XBOOLE_0:def 3;
end;
thus L878: thesis by L867 , L770;
end;
theorem
L879: ( width ( elementary_tree ( 0 ) ) ) = 1
proof
set D83 = ( elementary_tree ( 0 ) );
L880:
now
reconsider D84 = D6 as (AntiChain_of_Prefixes of D83) by L743;
take D85 = D84;
thus L881: 1 = ( card D85 ) by CARD_1:30;
let C98 being (AntiChain_of_Prefixes of D83);
L882: C98 c= D85 by L738 , L390;
thus L883: ( card C98 ) <= ( card D85 ) by L882 , NAT_1:43;
end;
thus L884: thesis by L880 , L811;
end;
theorem
L885: (for R6 being (Element of ( NAT )) holds ( width ( elementary_tree ( R6 + 1 ) ) ) = ( R6 + 1 ))
proof
let R6 being (Element of ( NAT ));
set D86 = ( elementary_tree ( R6 + 1 ) );
L886:
now
L887: { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) } is  AntiChain_of_Prefixes-like
proof
thus L888: (for R2 being set holds (R2 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) } implies R2 is FinSequence))
proof
let R2 being set;
assume L889: R2 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) };
L890: (ex R5 being (Element of ( NAT )) st (R2 = <* R5 *> & R5 < ( R6 + 1 ))) by L889;
thus L891: thesis by L890;
end;

let R12 being FinSequence;
let R13 being FinSequence;
assume L892: (R12 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) } & R13 in { <* R7 *> where R7 is (Element of ( NAT )) : R7 < ( R6 + 1 ) });
L893: ((ex R5 being (Element of ( NAT )) st (R12 = <* R5 *> & R5 < ( R6 + 1 ))) & (ex R7 being (Element of ( NAT )) st (R13 = <* R7 *> & R7 < ( R6 + 1 )))) by L892;
thus L894: thesis by L893 , L47;
end;
reconsider D87 = { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) } as AntiChain_of_Prefixes by L887;
L895: D87 c= D86 by XBOOLE_1:7;
reconsider D88 = D87 as (AntiChain_of_Prefixes of D86) by L895 , L738;
take D89 = D88;
L896: D89 , ( Seg ( R6 + 1 ) ) are_equipotent 
proof
defpred S11[ set , set ] means (ex R6 being (Element of ( NAT )) st ($1 = <* R6 *> & $2 = ( R6 + 1 )));
L897: (for R2 being set holds (for R3 being set holds (for R4 being set holds ((R2 in D89 & S11[ R2 , R3 ] & S11[ R2 , R4 ]) implies R3 = R4))))
proof
let R2 being set;
let R3 being set;
let R4 being set;
assume L898: R2 in D89;
given C99 being (Element of ( NAT )) such that
L899: (R2 = <* C99 *> & R3 = ( C99 + 1 ));

given C100 being (Element of ( NAT )) such that
L900: (R2 = <* C100 *> & R4 = ( C100 + 1 ));

L901: ( <* C99 *> . 1 ) = C99 by FINSEQ_1:def 8;
thus L902: thesis by L901 , L899 , L900 , FINSEQ_1:def 8;
end;
L903: (for R2 being set holds (R2 in D89 implies (ex R3 being set st S11[ R2 , R3 ])))
proof
let R2 being set;
assume L904: R2 in D89;
consider R5 being (Element of ( NAT )) such that L905: R2 = <* R5 *> and L906: R5 < ( R6 + 1 ) by L904;
reconsider D90 = ( R5 + 1 ) as set;
take D90;
thus L907: thesis by L905;
end;
consider R8 being Function such that L908: (( dom R8 ) = D89 & (for R2 being set holds (R2 in D89 implies S11[ R2 , ( R8 . R2 ) ]))) from CLASSES1:sch 1(L903);
take R8;
thus L909: R8 is  one-to-one
proof
let R2 being set;
let R3 being set;
assume that
L910: (R2 in ( dom R8 ) & R3 in ( dom R8 ))
and
L911: ( R8 . R2 ) = ( R8 . R3 );
L912: ((ex B99 being (Element of ( NAT )) st (R2 = <* B99 *> & ( R8 . R2 ) = ( B99 + 1 ))) & (ex B100 being (Element of ( NAT )) st (R3 = <* B100 *> & ( R8 . R3 ) = ( B100 + 1 )))) by L908 , L910;
thus L913: thesis by L912 , L911;
end;

thus L914: ( dom R8 ) = D89 by L908;
thus L915: ( rng R8 ) c= ( Seg ( R6 + 1 ) )
proof
let R2 being set;
assume L916: R2 in ( rng R8 );
consider R3 being set such that L917: R3 in ( dom R8 ) and L918: R2 = ( R8 . R3 ) by L916 , FUNCT_1:def 3;
consider R5 being (Element of ( NAT )) such that L919: R3 = <* R5 *> and L920: R2 = ( R5 + 1 ) by L908 , L917 , L918;
consider R7 being (Element of ( NAT )) such that L921: (R3 = <* R7 *> & R7 < ( R6 + 1 )) by L908 , L917;
L922: (( <* R5 *> . 1 ) = R5 & ( <* R7 *> . 1 ) = R7) by FINSEQ_1:def 8;
L923: (( ( 0 ) + 1 ) <= ( R5 + 1 ) & ( R5 + 1 ) <= ( R6 + 1 )) by L922 , L919 , L921 , NAT_1:13;
thus L924: thesis by L923 , L920 , FINSEQ_1:1;
end;

let R2 being set;
assume L925: R2 in ( Seg ( R6 + 1 ) );
reconsider D91 = R2 as (Element of ( NAT )) by L925;
L926: 1 <= D91 by L925 , FINSEQ_1:1;
L927: D91 <= ( R6 + 1 ) by L925 , FINSEQ_1:1;
consider C101 being Nat such that L928: D91 = ( 1 + C101 ) by L926 , NAT_1:10;
reconsider D92 = C101 as (Element of ( NAT )) by ORDINAL1:def 12;
L929: D92 < ( R6 + 1 ) by L927 , L928 , NAT_1:13;
L930: <* D92 *> in D89 by L929;
L931: S11[ <* D92 *> , ( R8 . <* D92 *> ) ] by L930 , L908;
L932: R2 = ( R8 . <* D92 *> ) by L931 , L897 , L928 , L930;
thus L933: thesis by L932 , L908 , L930 , FUNCT_1:def 3;
end;
L934: ( card ( Seg ( R6 + 1 ) ) ) = ( card D89 ) by L896 , CARD_1:5;
thus L935: ( R6 + 1 ) = ( card D89 ) by L934 , FINSEQ_1:57;
let C102 being (AntiChain_of_Prefixes of D86);
L936: C102 c= D86 by L738;
L937: (( {} ) in C102 implies C102 = D6)
proof
assume that
L938: ( {} ) in C102
and
L939: C102 <> D6;
consider R2 being set such that L940: (not (R2 in C102 iff R2 in D6)) by L939 , TARSKI:1;
L941: ( {} ) <> R2 by L938 , L940 , TARSKI:def 1;
reconsider D93 = R2 as (FinSequence of ( NAT )) by L936 , L940 , L191;
L942: ( {} ) is_a_prefix_of D93 by XBOOLE_1:2;
L943: ( {} ) , D93 are_c=-comparable  by L942 , XBOOLE_0:def 9;
thus L944: contradiction by L943 , L938 , L940 , L941 , L718 , TARSKI:def 1;
end;
L945: (( card D6 ) = 1 & 1 <= ( 1 + R6 )) by CARD_1:30 , NAT_1:11;
L946:
now
assume L947: (not ( {} ) in C102);
L948: C102 c= D89
proof
let R2 being set;
assume L949: R2 in C102;
L950: (R2 in { <* R5 *> where R5 is (Element of ( NAT )) : R5 < ( R6 + 1 ) } or R2 in D6) by L949 , L936 , XBOOLE_0:def 3;
thus L951: thesis by L950 , L947 , L949 , TARSKI:def 1;
end;
thus L952: ( card C102 ) <= ( card D89 ) by L948 , NAT_1:43;
end;
thus L953: ( card C102 ) <= ( card D89 ) by L946 , L934 , L937 , L945 , FINSEQ_1:57;
end;
thus L954: thesis by L886 , L811;
end;
theorem
L955: (for R17 being  finite Tree holds (for B101 being (Element of R17) holds ( height ( R17 | B101 ) ) <= ( height R17 )))
proof
let R17 being  finite Tree;
let C103 being (Element of R17);
consider R9 being (FinSequence of ( NAT )) such that L956: R9 in ( R17 | C103 ) and L957: ( len R9 ) = ( height ( R17 | C103 ) ) by L770;
L958: ( C103 ^ R9 ) in R17 by L956 , L426;
L959: ( len ( C103 ^ R9 ) ) <= ( height R17 ) by L958 , L770;
L960: (( len ( C103 ^ R9 ) ) = ( ( len C103 ) + ( len R9 ) ) & ( len R9 ) <= ( ( len R9 ) + ( len C103 ) )) by FINSEQ_1:22 , NAT_1:11;
thus L961: thesis by L960 , L957 , L959 , XXREAL_0:2;
end;
theorem
L962: (for R17 being  finite Tree holds (for B102 being (Element of R17) holds (B102 <> ( {} ) implies ( height ( R17 | B102 ) ) < ( height R17 ))))
proof
let R17 being  finite Tree;
let C104 being (Element of R17);
assume L963: C104 <> ( {} );
L964: ( ( 0 ) + 1 ) <= ( len C104 ) by L963 , NAT_1:13;
consider R9 being (FinSequence of ( NAT )) such that L965: R9 in ( R17 | C104 ) and L966: ( len R9 ) = ( height ( R17 | C104 ) ) by L770;
L967: ( C104 ^ R9 ) in R17 by L965 , L426;
L968: ( len ( C104 ^ R9 ) ) <= ( height R17 ) by L967 , L770;
L969: (( len ( C104 ^ R9 ) ) = ( ( len C104 ) + ( len R9 ) ) & ( ( len R9 ) + 1 ) <= ( ( len C104 ) + ( len R9 ) )) by L964 , FINSEQ_1:22 , XREAL_1:7;
L970: ( ( height ( R17 | C104 ) ) + 1 ) <= ( height R17 ) by L969 , L966 , L968 , XXREAL_0:2;
thus L971: thesis by L970 , NAT_1:13;
end;
scheme TreeInd { P1[Tree] } : (for R17 being  finite Tree holds P1[ R17 ])
provided
L972: (for R17 being  finite Tree holds ((for R6 being (Element of ( NAT )) holds (<* R6 *> in R17 implies P1[ ( R17 | <* R6 *> ) ])) implies P1[ R17 ]))
proof
defpred S12[ set ] means (for R17 being  finite Tree holds (( height R17 ) = $1 implies P1[ R17 ]));
L973: (for B103 being Nat holds ((for B104 being Nat holds (B104 < B103 implies S12[ B104 ])) implies S12[ B103 ]))
proof
let C105 being Nat;
assume that
L974: (for B105 being Nat holds (B105 < C105 implies (for R17 being  finite Tree holds (( height R17 ) = B105 implies P1[ R17 ]))));
let R17 being  finite Tree;
assume that
L975: ( height R17 ) = C105;
L976:
now
let R5 being (Element of ( NAT ));
assume L977: <* R5 *> in R17;
reconsider D94 = <* R5 *> as (Element of R17) by L977;
L978: ( height ( R17 | D94 ) ) < ( height R17 ) by L962;
thus L979: P1[ ( R17 | <* R5 *> ) ] by L978 , L974 , L975;
end;
thus L980: thesis by L976 , L972;
end;
L981: (for B106 being Nat holds S12[ B106 ]) from NAT_1:sch 4(L973);
let R17 being  finite Tree;
L982: ( height R17 ) = ( height R17 );
thus L983: thesis by L982 , L981;
end;
begin
theorem
L984: (for R20 being FinSequence holds (for R23 being FinSequence holds (for R24 being FinSequence holds (( R20 ^ R24 ) is_a_proper_prefix_of ( R20 ^ R23 ) implies R24 is_a_proper_prefix_of R23))))
proof
let R20 being FinSequence;
let R23 being FinSequence;
let R24 being FinSequence;
assume L985: ( R20 ^ R24 ) is_a_proper_prefix_of ( R20 ^ R23 );
L986: ( R20 ^ R24 ) is_a_prefix_of ( R20 ^ R23 ) by L985 , XBOOLE_0:def 8;
consider C106 being FinSequence such that L987: ( R20 ^ R23 ) = ( ( R20 ^ R24 ) ^ C106 ) by L986 , L9;
L988: ( ( R20 ^ R24 ) ^ C106 ) = ( R20 ^ ( R24 ^ C106 ) ) by FINSEQ_1:32;
L989: R23 = ( R24 ^ C106 ) by L988 , L987 , FINSEQ_1:33;
L990: R24 is_a_prefix_of R23 by L989 , L9;
thus L991: thesis by L990 , L985 , XBOOLE_0:def 8;
end;
theorem
L992: (for R6 being (Element of ( NAT )) holds (for R7 being (Element of ( NAT )) holds (for R23 being FinSequence holds (R6 <> R7 implies (not <* R6 *> is_a_prefix_of ( <* R7 *> ^ R23 ))))))
proof
let R6 being (Element of ( NAT ));
let R7 being (Element of ( NAT ));
let R23 being FinSequence;
assume L993: R6 <> R7;
assume L994: <* R6 *> is_a_prefix_of ( <* R7 *> ^ R23 );
L995: (ex B107 being FinSequence st ( <* R7 *> ^ R23 ) = ( <* R6 *> ^ B107 )) by L994 , L9;
L996: R7 = ( ( <* R7 *> ^ R23 ) . 1 ) by FINSEQ_1:41
.= R6 by L995 , FINSEQ_1:41;
thus L997: contradiction by L996 , L993;
end;
theorem
L998: ( elementary_tree 1 ) = { ( {} ) , <* ( 0 ) *> }
proof
L999:
now
let R2 being set;
thus L1000: (R2 in { ( {} ) , <* ( 0 ) *> } implies (R2 in { <* R6 *> where R6 is (Element of ( NAT )) : R6 < 1 } or R2 in D6))
proof
assume L1001: R2 in { ( {} ) , <* ( 0 ) *> };
L1002: (R2 = ( {} ) or R2 = <* ( 0 ) *>) by L1001 , TARSKI:def 2;
thus L1003: thesis by L1002 , TARSKI:def 1;
end;

assume L1004: (R2 in { <* R6 *> where R6 is (Element of ( NAT )) : R6 < 1 } or R2 in D6);
L1005:
now
per cases  by L1004;
suppose L1006: R2 in { <* R6 *> where R6 is (Element of ( NAT )) : R6 < 1 };

consider R6 being (Element of ( NAT )) such that L1007: R2 = <* R6 *> and L1008: R6 < 1 by L1006;
L1009: R6 = ( 0 ) by L1008 , NAT_1:25;
thus L1010: R2 in { ( {} ) , <* ( 0 ) *> } by L1009 , L1007 , TARSKI:def 2;
end;
suppose L1011: R2 in D6;

L1012: R2 = ( {} ) by L1011 , TARSKI:def 1;
thus L1013: R2 in { ( {} ) , <* ( 0 ) *> } by L1012 , TARSKI:def 2;
end;
end;
thus L1015: R2 in { ( {} ) , <* ( 0 ) *> } by L1005;
end;
thus L1016: thesis by L999 , XBOOLE_0:def 3;
end;
theorem
L1017: (for R6 being (Element of ( NAT )) holds (for R7 being (Element of ( NAT )) holds (not <* R6 *> is_a_proper_prefix_of <* R7 *>)))
proof
let R6 being (Element of ( NAT ));
let R7 being (Element of ( NAT ));
assume L1018: (not thesis);
L1019: <* R6 *> is_a_prefix_of <* R7 *> by L1018 , XBOOLE_0:def 8;
thus L1020: contradiction by L1019 , L1018 , L23;
end;
theorem
L1021: ( elementary_tree 2 ) = { ( {} ) , <* ( 0 ) *> , <* 1 *> }
proof
L1022:
now
let R2 being set;
thus L1023: (R2 in { ( {} ) , <* ( 0 ) *> , <* 1 *> } implies (R2 in { <* R6 *> where R6 is (Element of ( NAT )) : R6 < 2 } or R2 in D6))
proof
assume L1024: R2 in { ( {} ) , <* ( 0 ) *> , <* 1 *> };
L1025: (R2 = ( {} ) or R2 = <* ( 0 ) *> or R2 = <* 1 *>) by L1024 , ENUMSET1:def 1;
thus L1026: thesis by L1025 , TARSKI:def 1;
end;

assume L1027: (R2 in { <* R6 *> where R6 is (Element of ( NAT )) : R6 < 2 } or R2 in D6);
L1028:
now
per cases  by L1027;
suppose L1029: R2 in { <* R6 *> where R6 is (Element of ( NAT )) : R6 < 2 };

consider R6 being (Element of ( NAT )) such that L1030: R2 = <* R6 *> and L1031: R6 < 2 by L1029;
L1032: (R6 = ( 0 ) or R6 = 1) by L1031 , NAT_1:26;
thus L1033: R2 in { ( {} ) , <* ( 0 ) *> , <* 1 *> } by L1032 , L1030 , ENUMSET1:def 1;
end;
suppose L1034: R2 in D6;

L1035: R2 = ( {} ) by L1034 , TARSKI:def 1;
thus L1036: R2 in { ( {} ) , <* ( 0 ) *> , <* 1 *> } by L1035 , ENUMSET1:def 1;
end;
end;
thus L1038: R2 in { ( {} ) , <* ( 0 ) *> , <* 1 *> } by L1028;
end;
thus L1039: thesis by L1022 , XBOOLE_0:def 3;
end;
theorem
L1040: (for B108 being Tree holds (for B109 being (Element of B108) holds (B109 in ( Leaves B108 ) iff (not ( B109 ^ <* ( 0 ) *> ) in B108))))
proof
let C107 being Tree;
let C108 being (Element of C107);
thus L1041:now
assume L1042: C108 in ( Leaves C107 );
L1043: C108 is_a_proper_prefix_of ( C108 ^ <* ( 0 ) *> ) by L59;
thus L1044: (not ( C108 ^ <* ( 0 ) *> ) in C107) by L1043 , L1042 , L402;
end;
assume that
L1045: (not ( C108 ^ <* ( 0 ) *> ) in C107)
and
L1046: (not C108 in ( Leaves C107 ));
consider C109 being (FinSequence of ( NAT )) such that L1047: C109 in C107 and L1048: C108 is_a_proper_prefix_of C109 by L1046 , L402;
L1049: C108 is_a_prefix_of C109 by L1048 , XBOOLE_0:def 8;
consider C110 being FinSequence such that L1050: C109 = ( C108 ^ C110 ) by L1049 , L9;
reconsider D95 = C110 as (FinSequence of ( NAT )) by L1050 , FINSEQ_1:36;
L1051: ( len C109 ) = ( ( len C108 ) + ( len D95 ) ) by L1050 , FINSEQ_1:22;
L1052: ( len D95 ) <> ( 0 ) by L1051 , L1048 , L53;
L1053: D95 <> ( {} ) by L1052;
consider C111 being (FinSequence of ( NAT )), C112 being (Element of ( NAT )) such that L1054: D95 = ( <* C112 *> ^ C111 ) by L1053 , FINSEQ_2:130;
reconsider D96 = C112 as (Element of ( NAT ));
L1055: C109 = ( ( C108 ^ <* D96 *> ) ^ C111 ) by L1050 , L1054 , FINSEQ_1:32;
L1056: ( C108 ^ <* D96 *> ) in C107 by L1055 , L1047 , L202;
thus L1057: contradiction by L1056 , L1045 , L176;
end;
theorem
L1058: (for B110 being Tree holds (for B111 being (Element of B110) holds (B111 in ( Leaves B110 ) iff (not (ex B112 being (Element of ( NAT )) st ( B111 ^ <* B112 *> ) in B110)))))
proof
let C113 being Tree;
let C114 being (Element of C113);
thus L1059:now
assume L1060: C114 in ( Leaves C113 );
given C115 being (Element of ( NAT )) such that
L1061: ( C114 ^ <* C115 *> ) in C113;

L1062: (not C114 is_a_proper_prefix_of ( C114 ^ <* C115 *> )) by L1060 , L1061 , L402;
L1063: C114 is_a_prefix_of ( C114 ^ <* C115 *> ) by L9;
L1064: C114 = ( C114 ^ <* C115 *> ) by L1063 , L1062 , XBOOLE_0:def 8;
L1065: C114 = ( C114 ^ ( {} ) ) by FINSEQ_1:34;
thus L1066: contradiction by L1065 , L1064 , FINSEQ_1:33;
end;
assume that
L1067: (not (ex B113 being (Element of ( NAT )) st ( C114 ^ <* B113 *> ) in C113))
and
L1068: (not C114 in ( Leaves C113 ));
consider C116 being (FinSequence of ( NAT )) such that L1069: C116 in C113 and L1070: C114 is_a_proper_prefix_of C116 by L1068 , L402;
L1071: C114 is_a_prefix_of C116 by L1070 , XBOOLE_0:def 8;
consider C117 being FinSequence such that L1072: C116 = ( C114 ^ C117 ) by L1071 , L9;
reconsider D97 = C117 as (FinSequence of ( NAT )) by L1072 , FINSEQ_1:36;
L1073: ( len C116 ) = ( ( len C114 ) + ( len D97 ) ) by L1072 , FINSEQ_1:22;
L1074: ( len D97 ) <> ( 0 ) by L1073 , L1070 , L53;
L1075: D97 <> ( {} ) by L1074;
consider C118 being (FinSequence of ( NAT )), C119 being (Element of ( NAT )) such that L1076: D97 = ( <* C119 *> ^ C118 ) by L1075 , FINSEQ_2:130;
reconsider D98 = C119 as (Element of ( NAT ));
L1077: C116 = ( ( C114 ^ <* D98 *> ) ^ C118 ) by L1072 , L1076 , FINSEQ_1:32;
thus L1078: contradiction by L1077 , L1067 , L1069 , L202;
end;
definition
func TrivialInfiniteTree equals 
{ ( B114 |-> ( 0 ) ) where B114 is (Element of ( NAT )) : (not contradiction) };
coherence;
end;
registration
cluster ( TrivialInfiniteTree ) -> non  empty  Tree-like;
coherence
proof
set D99 = ( TrivialInfiniteTree );
L1080: ( ( 0 ) |-> ( 0 ) ) in D99;
thus L1081: D99 is non  empty by L1080;
thus L1082: D99 c= ( ( NAT ) * )
proof
let C120 being set;
assume L1083: C120 in D99;
L1084: (ex B115 being (Element of ( NAT )) st C120 = ( B115 |-> ( 0 ) )) by L1083;
thus L1085: thesis by L1084 , FINSEQ_1:def 11;
end;

thus L1086: (for B116 being (FinSequence of ( NAT )) holds (B116 in D99 implies ( ProperPrefixes B116 ) c= D99))
proof
let C121 being (FinSequence of ( NAT ));
assume L1087: C121 in D99;
consider C122 being (Element of ( NAT )) such that L1088: C121 = ( C122 |-> ( 0 ) ) by L1087;
let C123 being set;
assume L1089: C123 in ( ProperPrefixes C121 );
reconsider D100 = C123 as FinSequence by L1089 , L110;
L1090: (for B117 being Nat holds ((1 <= B117 & B117 <= ( len D100 )) implies ( D100 . B117 ) = ( ( ( len D100 ) |-> ( 0 ) ) . B117 )))
proof
L1091: D100 is_a_proper_prefix_of C121 by L1089 , L114;
L1092: D100 c= C121 by L1091 , XBOOLE_0:def 8;
let C124 being Nat;
assume L1093: (1 <= C124 & C124 <= ( len D100 ));
L1094: C124 in ( dom D100 ) by L1093 , FINSEQ_3:25;
thus L1095: ( ( ( len D100 ) |-> ( 0 ) ) . C124 ) = ( 0 )
.= ( C121 . C124 ) by L1088
.= ( D100 . C124 ) by L1094 , L1092 , GRFUNC_1:2;
end;
L1096: ( len D100 ) = ( len ( ( len D100 ) |-> ( 0 ) ) ) by CARD_1:def 7;
L1097: D100 = ( ( len D100 ) |-> ( 0 ) ) by L1096 , L1090 , FINSEQ_1:14;
thus L1098: thesis by L1097;
end;

let C125 being (FinSequence of ( NAT ));
let C126 , C127 being (Element of ( NAT ));
assume L1099: ( C125 ^ <* C126 *> ) in D99;
consider C128 being (Element of ( NAT )) such that L1100: ( C125 ^ <* C126 *> ) = ( C128 |-> ( 0 ) ) by L1099;
assume L1101: C127 <= C126;
L1102: ( len ( C125 ^ <* C126 *> ) ) = ( ( len C125 ) + 1 ) by FINSEQ_2:16;
L1103: ( ( C125 ^ <* C126 *> ) . ( len ( C125 ^ <* C126 *> ) ) ) = C126 by L1102 , FINSEQ_1:42;
L1104: C126 = ( 0 ) by L1103 , L1100;
L1105: (for B118 being Nat holds ((1 <= B118 & B118 <= ( len ( C125 ^ <* C127 *> ) )) implies ( ( ( len ( C125 ^ <* C127 *> ) ) |-> ( 0 ) ) . B118 ) = ( ( C125 ^ <* C127 *> ) . B118 )))
proof
let C129 being Nat;
assume L1106: (1 <= C129 & C129 <= ( len ( C125 ^ <* C127 *> ) ));
thus L1107: ( ( ( len ( C125 ^ <* C127 *> ) ) |-> ( 0 ) ) . C129 ) = ( 0 )
.= ( ( C125 ^ <* C126 *> ) . C129 ) by L1100
.= ( ( C125 ^ <* C127 *> ) . C129 ) by L1101 , L1104;
end;
L1108: ( len ( C125 ^ <* C127 *> ) ) = ( len ( ( len ( C125 ^ <* C127 *> ) ) |-> ( 0 ) ) ) by CARD_1:def 7;
L1109: ( ( len ( C125 ^ <* C127 *> ) ) |-> ( 0 ) ) = ( C125 ^ <* C127 *> ) by L1108 , L1105 , FINSEQ_1:14;
thus L1110: thesis by L1109;
end;
end;
theorem
L1112: ( NAT ) , ( TrivialInfiniteTree ) are_equipotent 
proof
defpred S13[ (Element of ( NAT )) , set ] means $2 = ( $1 |-> ( 0 ) );
L1113: (for B119 being (Element of ( NAT )) holds (ex B120 being (Element of ( TrivialInfiniteTree )) st S13[ B119 , B120 ]))
proof
let C130 being (Element of ( NAT ));
L1114: ( C130 |-> ( 0 ) ) in ( TrivialInfiniteTree );
reconsider D101 = ( C130 |-> ( 0 ) ) as (Element of ( TrivialInfiniteTree )) by L1114;
take D101;
thus L1115: thesis;
end;
consider C131 being (Function of ( NAT ) , ( TrivialInfiniteTree )) such that L1116: (for B121 being (Element of ( NAT )) holds S13[ B121 , ( C131 . B121 ) ]) from FUNCT_2:sch 3(L1113);
take C131;
thus L1117: C131 is  one-to-one
proof
let C132 , C133 being set;
assume L1118: (C132 in ( dom C131 ) & C133 in ( dom C131 ));
assume L1119: ( C131 . C132 ) = ( C131 . C133 );
reconsider D102 = C132 , D103 = C133 as (Element of ( NAT )) by L1118 , FUNCT_2:def 1;
L1120: (S13[ D102 , ( C131 . D102 ) ] & S13[ D103 , ( C131 . D103 ) ]) by L1116;
thus L1121: thesis by L1120 , L1119 , FINSEQ_2:143;
end;

thus L1122: ( dom C131 ) = ( NAT ) by FUNCT_2:def 1;
thus L1123: ( rng C131 ) c= ( TrivialInfiniteTree ) by RELAT_1:def 19;
let C134 being set;
assume L1124: C134 in ( TrivialInfiniteTree );
consider C135 being (Element of ( NAT )) such that L1125: C134 = ( C135 |-> ( 0 ) ) by L1124;
L1126: ( C131 . C135 ) = C134 by L1116 , L1125;
thus L1127: thesis by L1126 , L1122 , FUNCT_1:def 3;
end;
registration
cluster ( TrivialInfiniteTree ) ->  infinite;
coherence by L1112 , CARD_1:38;
end;
