:: The Rank+Nullity Theorem
::  by Jesse Alama
::
:: Received July 31, 2007
:: Copyright (c) 2007-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FUNCT_1, RELAT_1, TARSKI, STRUCT_0, SUBSET_1, XBOOLE_0, VECTSP_1,
      RLVECT_5, FINSET_1, RLVECT_3, LOPBAN_1, ARYTM_3, SUPINF_2, CARD_1,
      RLSUB_1, FUNCT_2, ARYTM_1, MESFUNC1, VECTSP10, RLVECT_2, FUNCT_4,
      REALSET1, FUNCOP_1, QC_LANG1, CARD_3, RLSUB_2, FINSEQ_1, VALUED_1, NAT_1,
      XXREAL_0, PARTFUN1, NUMBERS, PBOOLE, RANKNULL, MSSUBFAM, UNIALG_1;
 notations TARSKI, XBOOLE_0, SUBSET_1, DOMAIN_1, RELAT_1, RELSET_1, FUNCT_1,
      ORDINAL1, NAT_1, NUMBERS, FUNCOP_1, PARTFUN1, FUNCT_2, FUNCT_4, XCMPLX_0,
      XXREAL_0, CARD_1, FINSET_1, FINSEQ_1, FINSEQOP, STRUCT_0, RLVECT_1,
      RLVECT_2, VECTSP_1, FUNCT_7, VECTSP_4, VECTSP_5, VECTSP_6, VECTSP_7,
      MOD_2, MATRLIN, VECTSP_9, LOPBAN_1;
 constructors NAT_1, FINSEQOP, HAHNBAN, VECTSP_6, VECTSP_7, MOD_2, VECTSP_9,
      REALSET1, RLVECT_2, WELLORD2, LOPBAN_1, VECTSP_5, FUNCT_7, FUNCT_4,
      XXREAL_0, MATRLIN, RELSET_1;
 registrations RELAT_1, FUNCT_1, STRUCT_0, CARD_1, FINSET_1, VECTSP_9,
      XBOOLE_0, MATRLIN, FUNCOP_1, ORDINAL1, XREAL_0, SUBSET_1, FINSEQ_1,
      MOD_2, GRCAT_1, RELSET_1;
 requirements BOOLE, SUBSET, NUMERALS, ARITHM;
 definitions TARSKI, RELAT_1, FUNCT_1, FINSEQ_1, VECTSP_4, VECTSP_6, XBOOLE_0,
      RLVECT_1, STRUCT_0, MOD_2, MATRLIN, FUNCOP_1, LOPBAN_1, FUNCT_2;
 theorems TARSKI, ZFMISC_1, RELAT_1, FINSET_1, FINSEQ_1, FUNCT_1, VECTSP_7,
      VECTSP_9, CARD_2, XBOOLE_1, FUNCT_2, SUBSET_1, XBOOLE_0, VECTSP_1,
      RLVECT_1, VECTSP_4, VECTSP_6, STRUCT_0, RLVECT_2, MOD_2, MATRLIN, CARD_1,
      FUNCOP_1, VECTSP_5, FUNCT_7, FINSEQ_2, FUNCT_4, ENUMSET1, ORDINAL1,
      PARTFUN1;
 schemes CLASSES1;

begin
theorem
L1: (for B1 , B2 being Function holds ((B2 is  one-to-one & ( B1 | ( rng B2 ) ) is  one-to-one & ( rng B2 ) c= ( dom B1 )) implies ( B1 * B2 ) is  one-to-one))
proof
let C1 , C2 being Function;
assume that
L2: C2 is  one-to-one
and
L3: ( C1 | ( rng C2 ) ) is  one-to-one
and
L4: ( rng C2 ) c= ( dom C1 );
set D1 = ( C1 * C2 );
L5: ( dom D1 ) c= ( dom C2 )
proof
let C3 being set;
assume L6: C3 in ( dom D1 );
thus L7: thesis by L6 , FUNCT_1:11;
end;
L8: ( dom C2 ) c= ( dom D1 )
proof
let C4 being set;
assume that
L9: C4 in ( dom C2 );
L10: ( C2 . C4 ) in ( rng C2 ) by L9 , FUNCT_1:3;
thus L11: thesis by L10 , L4 , L9 , FUNCT_1:11;
end;
L12: ( dom D1 ) = ( dom C2 ) by L8 , L5 , XBOOLE_0:def 10;
L13: (for B3 , B4 being set holds ((B3 in ( dom D1 ) & B4 in ( dom D1 ) & ( D1 . B3 ) = ( D1 . B4 )) implies B3 = B4))
proof
let C5 , C6 being set;
assume that
L14: C5 in ( dom D1 )
and
L15: C6 in ( dom D1 )
and
L16: ( D1 . C5 ) = ( D1 . C6 );
L17: (( D1 . C5 ) = ( C1 . ( C2 . C5 ) ) & ( D1 . C6 ) = ( C1 . ( C2 . C6 ) )) by L14 , L15 , FUNCT_1:12;
L18: ( dom ( C1 | ( rng C2 ) ) ) = ( rng C2 ) by L4 , RELAT_1:62;
L19: ( C2 . C5 ) in ( dom ( C1 | ( rng C2 ) ) ) by L18 , L5 , L14 , FUNCT_1:3;
L20: ( C2 . C6 ) in ( rng C2 ) by L5 , L15 , FUNCT_1:3;
L21: ( C2 . C6 ) in ( dom ( C1 | ( rng C2 ) ) ) by L20 , L4 , RELAT_1:62;
L22: (( C1 . ( C2 . C5 ) ) = ( ( C1 | ( rng C2 ) ) . ( C2 . C5 ) ) & ( C1 . ( C2 . C6 ) ) = ( ( C1 | ( rng C2 ) ) . ( C2 . C6 ) )) by L12 , L14 , L15 , FUNCT_1:3 , FUNCT_1:49;
L23: ( C2 . C5 ) = ( C2 . C6 ) by L22 , L3 , L16 , L17 , L19 , L21 , FUNCT_1:def 4;
thus L24: thesis by L23 , L2 , L5 , L14 , L15 , FUNCT_1:def 4;
end;
thus L25: thesis by L13 , FUNCT_1:def 4;
end;
theorem
L26: (for B5 being Function holds (for B6 , B7 being set holds ((B6 c= B7 & ( B5 | B7 ) is  one-to-one) implies ( B5 | B6 ) is  one-to-one)))
proof
let C7 being Function;
let C8 , C9 being set;
assume that
L27: C8 c= C9
and
L28: ( C7 | C9 ) is  one-to-one;
L29: ( C7 | C8 ) = ( ( C7 | C9 ) | C8 ) by L27 , RELAT_1:74;
thus L30: thesis by L29 , L28 , FUNCT_1:52;
end;
theorem
L31: (for B8 being 1-sorted holds (for B9 , B10 being (Subset of B8) holds (B9 meets B10 iff (ex B11 being (Element of B8) st (B11 in B9 & B11 in B10)))))
proof
let C10 being 1-sorted;
let C11 , C12 being (Subset of C10);
L32: (C11 meets C12 implies (ex B12 being (Element of C10) st (B12 in C11 & B12 in C12)))
proof
assume L33: C11 meets C12;
consider C13 being set such that L34: C13 in C11 and L35: C13 in C12 by L33 , XBOOLE_0:3;
reconsider D2 = C13 as (Element of C10) by L34;
take D2;
thus L36: thesis by L34 , L35;
end;
thus L37: thesis by L32 , XBOOLE_0:3;
end;
registration
let C14 being Field;
let C15 being  finite-dimensional (VectSp of C14);
cluster  finite for (Basis of C15);
existence
proof
consider C16 being  finite (Subset of C15) such that L38: C16 is (Basis of C15) by MATRLIN:def 1;
reconsider D3 = C16 as (Basis of C15) by L38;
take D3;
thus L39: thesis;
end;
end;
registration
let C17 being Field;
let C18 , C19 being (VectSp of C17);
cluster  additive  homogeneous for (Function of C18 , C19);
existence
proof
set D4 = ( FuncZero (( [#] C18 ) , C19) );
reconsider D5 = D4 as (Function of C18 , C19);
L41: (for B13 , B14 being (Vector of C18) holds ( D5 . ( B13 + B14 ) ) = ( ( D5 . B13 ) + ( D5 . B14 ) ))
proof
let C20 , C21 being (Vector of C18);
L42: ( D5 . C21 ) = ( 0. C19 ) by FUNCOP_1:7;
L43: (( D5 . ( C20 + C21 ) ) = ( 0. C19 ) & ( D5 . C20 ) = ( 0. C19 )) by FUNCOP_1:7;
thus L44: thesis by L43 , L42 , RLVECT_1:def 4;
end;
take D5;
L45: (for B15 being (Element of C17) holds (for B16 being (Element of C18) holds ( D5 . ( B15 * B16 ) ) = ( B15 * ( D5 . B16 ) )))
proof
let C22 being (Element of C17);
let C23 being (Element of C18);
L46: (( D5 . ( C22 * C23 ) ) = ( 0. C19 ) & ( D5 . C23 ) = ( 0. C19 )) by FUNCOP_1:7;
thus L47: thesis by L46 , VECTSP_1:14;
end;
thus L48: D5 is  additive  homogeneous by L45 , L41 , VECTSP_1:def 20 , MOD_2:def 2;
end;
end;
theorem
L50: (for R1 being Field holds (for R2 being (VectSp of R1) holds (( [#] R2 ) is  finite implies R2 is  finite-dimensional)))
proof
let R1 being Field;
let R2 being (VectSp of R1);
set D6 = the (Basis of R2);
assume L51: ( [#] R2 ) is  finite;
reconsider D7 = D6 as  finite (Subset of R2) by L51;
take D7;
thus L52: thesis;
end;
theorem
L53: (for R1 being Field holds (for B17 being  finite-dimensional (VectSp of R1) holds (( card ( [#] B17 ) ) = 1 implies ( dim B17 ) = ( 0 ))))
proof
let R1 being Field;
let C24 being  finite-dimensional (VectSp of R1);
assume that
L54: ( card ( [#] C24 ) ) = 1;
L55: ( [#] C24 ) = { ( 0. C24 ) }
proof
L56: (ex B18 being set st ( [#] C24 ) = { B18 }) by L54 , CARD_2:42;
thus L57: thesis by L56 , TARSKI:def 1;
end;
L58: ( (Omega). C24 ) = ( (0). C24 ) by L55 , VECTSP_4:def 3;
thus L59: thesis by L58 , VECTSP_9:29;
end;
theorem
L60: (for R1 being Field holds (for R2 being (VectSp of R1) holds (( card ( [#] R2 ) ) = 2 implies ( dim R2 ) = 1)))
proof
let R1 being Field;
let R2 being (VectSp of R1);
assume L61: ( card ( [#] R2 ) ) = 2;
L62: ( [#] R2 ) is  finite by L61;
reconsider D8 = ( [#] R2 ) as  finite set by L61;
reconsider D9 = R2 as  finite-dimensional (VectSp of R1) by L62 , L50;
L63: (ex B19 being (Vector of D9) st (B19 <> ( 0. D9 ) & ( (Omega). D9 ) = ( Lin { B19 } )))
proof
consider C25 , C26 being set such that L64: C25 <> C26 and L65: ( [#] D9 ) = { C25 , C26 } by L61 , CARD_2:60;
per cases  by L65 , TARSKI:def 2;
suppose L66: C25 = ( 0. D9 );

reconsider D10 = C25 as (Element of D9) by L66;
reconsider D11 = C26 as (Element of D9) by L65 , TARSKI:def 2;
set D12 = ( Lin { D11 } );
take D11;
L67: (for B20 being (Element of D9) holds (B20 in ( (Omega). D9 ) iff B20 in D12))
proof
let C27 being (Element of D9);
L68: (C27 in ( (Omega). D9 ) implies C27 in D12)
proof
assume L69: C27 in ( (Omega). D9 );
L70: D11 in { D11 } by TARSKI:def 1;
L71: ( 0. D12 ) in D12 by STRUCT_0:def 5;
per cases  by L65 , TARSKI:def 2;
suppose L72: C27 = D10;

thus L73: thesis by L72 , L66 , L71 , VECTSP_4:def 2;
end;
suppose L74: C27 = D11;

thus L75: thesis by L74 , L70 , VECTSP_7:8;
end;
end;
thus L77: thesis by L68 , STRUCT_0:def 5;
end;
thus L78: thesis by L67 , L64 , L66 , VECTSP_4:30;
end;
suppose L79: C26 = ( 0. D9 );

reconsider D13 = C25 as (Element of D9) by L65 , TARSKI:def 2;
reconsider D14 = C26 as (Element of D9) by L79;
set D15 = ( Lin { D13 } );
take D13;
L80: (for B21 being (Element of D9) holds (B21 in ( (Omega). D9 ) iff B21 in D15))
proof
let C28 being (Element of D9);
L81: (C28 in ( (Omega). D9 ) implies C28 in D15)
proof
assume L82: C28 in ( (Omega). D9 );
L83: D13 in { D13 } by TARSKI:def 1;
L84: ( 0. D15 ) in D15 by STRUCT_0:def 5;
per cases  by L65 , TARSKI:def 2;
suppose L85: C28 = D14;

thus L86: thesis by L85 , L79 , L84 , VECTSP_4:def 2;
end;
suppose L87: C28 = D13;

thus L88: thesis by L87 , L83 , VECTSP_7:8;
end;
end;
thus L90: thesis by L81 , STRUCT_0:def 5;
end;
thus L91: thesis by L80 , L64 , L79 , VECTSP_4:30;
end;
end;
thus L93: thesis by L63 , VECTSP_9:30;
end;
begin
definition
let C29 being Field;
let C30 , C31 being (VectSp of C29);
mode linear-transformation of C30 , C31
 is  additive  homogeneous (Function of C30 , C31);
end;
theorem
L95: (for B22 , B23 being non  empty 1-sorted holds (for B24 being (Function of B22 , B23) holds (( dom B24 ) = ( [#] B22 ) & ( rng B24 ) c= ( [#] B23 ))))
proof
let C32 , C33 being non  empty 1-sorted;
let C34 being (Function of C32 , C33);
L96: C34 is (Element of ( Funcs (( [#] C32 ) , ( [#] C33 )) )) by FUNCT_2:8;
thus L97: thesis by L96 , FUNCT_2:92;
end;
theorem
L98: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B25 , B26 being (Element of R2) holds ( ( R4 . B25 ) - ( R4 . B26 ) ) = ( R4 . ( B25 - B26 ) ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C35 , C36 being (Element of R2);
L99: ( R4 . ( ( - ( 1. R1 ) ) * C36 ) ) = ( ( - ( 1. R1 ) ) * ( R4 . C36 ) ) by MOD_2:def 2;
L100: (( R4 . ( C35 - C36 ) ) = ( ( R4 . C35 ) + ( R4 . ( - C36 ) ) ) & ( - C36 ) = ( ( - ( 1. R1 ) ) * C36 )) by VECTSP_1:def 20 , VECTSP_1:14;
thus L101: thesis by L100 , L99 , VECTSP_1:14;
end;
theorem
L102: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds ( R4 . ( 0. R2 ) ) = ( 0. R3 )))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
L103: ( 0. R2 ) = ( ( 0. R1 ) * ( 0. R2 ) ) by VECTSP_1:14;
L104: ( R4 . ( 0. R2 ) ) = ( ( 0. R1 ) * ( R4 . ( 0. R2 ) ) ) by L103 , MOD_2:def 2
.= ( 0. R3 ) by VECTSP_1:14;
thus L105: thesis by L104;
end;
definition
let C37 being Field;
let C38 , C39 being (VectSp of C37);
let C40 being (linear-transformation of C38 , C39);
func ker C40 ->  strict (Subspace of C38) means 
:L106: ( [#] it ) = { B27 where B27 is (Element of C38) : ( C40 . B27 ) = ( 0. C39 ) };
existence
proof
set D16 = { B28 where B28 is (Element of C38) : ( C40 . B28 ) = ( 0. C39 ) };
L107: D16 c= ( [#] C38 )
proof
let C41 being set;
assume L108: C41 in D16;
L109: (ex B29 being (Element of C38) st (B29 = C41 & ( C40 . B29 ) = ( 0. C39 ))) by L108;
thus L110: thesis by L109;
end;
reconsider D17 = D16 as (Subset of C38) by L107;
L111: (for B30 being (Element of C38) holds (B30 in D17 implies ( C40 . B30 ) = ( 0. C39 )))
proof
let C42 being (Element of C38);
assume L112: C42 in D17;
L113: (ex B31 being (Element of C38) st (B31 = C42 & ( C40 . B31 ) = ( 0. C39 ))) by L112;
thus L114: thesis by L113;
end;
L115:
now
let C43 being (Element of C38);
let C44 being (Element of C37);
assume L116: C43 in D17;
L117: ( C40 . C43 ) = ( 0. C39 ) by L116 , L111;
L118: ( C40 . ( C44 * C43 ) ) = ( C44 * ( 0. C39 ) ) by L117 , MOD_2:def 2
.= ( 0. C39 ) by VECTSP_1:14;
thus L119: ( C44 * C43 ) in D17 by L118;
end;
L120: (for B32 being (Element of C37) holds (for B33 being (Element of C38) holds (B33 in D17 implies ( B32 * B33 ) in D17))) by L115;
L121: ( C40 . ( 0. C38 ) ) = ( 0. C39 ) by L102;
L122: ( 0. C38 ) in D17 by L121;
L123:
now
let C45 , C46 being (Element of C38);
assume L124: (C45 in D17 & C46 in D17);
L125: (( C40 . C45 ) = ( 0. C39 ) & ( C40 . C46 ) = ( 0. C39 )) by L124 , L111;
L126: ( C40 . ( C45 + C46 ) ) = ( ( 0. C39 ) + ( 0. C39 ) ) by L125 , VECTSP_1:def 20
.= ( 0. C39 ) by RLVECT_1:def 4;
thus L127: ( C45 + C46 ) in D17 by L126;
end;
L128: D17 is  linearly-closed by L123 , L120 , VECTSP_4:def 1;
consider C47 being  strict (Subspace of C38) such that L129: D17 = (the carrier of C47) by L128 , L122 , VECTSP_4:34;
take C47;
thus L130: thesis by L129;
end;
uniqueness by VECTSP_4:29;
end;
theorem
L132: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B34 being (Element of R2) holds (B34 in ( ker R4 ) iff ( R4 . B34 ) = ( 0. R3 )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C48 being (Element of R2);
thus L133: (C48 in ( ker R4 ) implies ( R4 . C48 ) = ( 0. R3 ))
proof
assume L134: C48 in ( ker R4 );
L135: C48 in ( [#] ( ker R4 ) ) by L134 , STRUCT_0:def 5;
L136: ( [#] ( ker R4 ) ) = { B35 where B35 is (Element of R2) : ( R4 . B35 ) = ( 0. R3 ) } by L106;
L137: (ex B36 being (Element of R2) st (B36 = C48 & ( R4 . B36 ) = ( 0. R3 ))) by L136 , L135;
thus L138: thesis by L137;
end;

assume L139: ( R4 . C48 ) = ( 0. R3 );
L140: C48 in { B37 where B37 is (Element of R2) : ( R4 . B37 ) = ( 0. R3 ) } by L139;
L141: C48 in ( [#] ( ker R4 ) ) by L140 , L106;
thus L142: thesis by L141 , STRUCT_0:def 5;
end;
definition
let C49 , C50 being non  empty 1-sorted;
let C51 being (Function of C49 , C50);
let C52 being (Subset of C49);
redefine func C51 .: C52 -> (Subset of C50);

coherence
proof
L143: (( rng C51 ) c= ( [#] C50 ) & ( C51 .: C52 ) c= ( rng C51 )) by L95 , RELAT_1:111;
thus L144: thesis by L143 , XBOOLE_1:1;
end;
end;
definition
let C53 being Field;
let C54 , C55 being (VectSp of C53);
let C56 being (linear-transformation of C54 , C55);
func im C56 ->  strict (Subspace of C55) means 
:L146: ( [#] it ) = ( C56 .: ( [#] C54 ) );
existence
proof
reconsider D18 = ( C56 .: ( [#] C54 ) ) as (Subset of C55);
L147: (for B38 being (Element of C55) holds (B38 in D18 iff (ex B39 being (Element of C54) st ( C56 . B39 ) = B38)))
proof
let C57 being (Element of C55);
thus L148: (C57 in D18 implies (ex B40 being (Element of C54) st ( C56 . B40 ) = C57))
proof
assume L149: C57 in D18;
consider C58 being set such that L150: C58 in ( dom C56 ) and L151: C58 in ( [#] C54 ) and L152: C57 = ( C56 . C58 ) by L149 , FUNCT_1:def 6;
reconsider D19 = C58 as (Element of C54) by L151;
take D19;
thus L153: thesis by L152;
end;

thus L154: ((ex B41 being (Element of C54) st ( C56 . B41 ) = C57) implies C57 in D18)
proof
given C59 being (Element of C54) such that
L155: ( C56 . C59 ) = C57;

L156: C59 in ( [#] C54 );
L157: C59 in ( dom C56 ) by L156 , L95;
thus L158: thesis by L157 , L155 , FUNCT_1:def 6;
end;

end;
L155:
now
let C60 , C61 being (Element of C55);
assume that
L156: C60 in D18
and
L157: C61 in D18;
consider C62 being (Element of C54) such that L158: ( C56 . C62 ) = C60 by L147 , L156;
consider C63 being (Element of C54) such that L159: ( C56 . C63 ) = C61 by L147 , L157;
L160: ( C60 + C61 ) = ( C56 . ( C62 + C63 ) ) by L158 , L159 , VECTSP_1:def 20;
thus L161: ( C60 + C61 ) in D18 by L160 , L147;
end;
L162:
now
let C64 being (Element of C53);
let C65 being (Element of C55);
assume L163: C65 in D18;
consider C66 being (Element of C54) such that L164: ( C56 . C66 ) = C65 by L163 , L147;
L165: ( C56 . ( C64 * C66 ) ) = ( C64 * C65 ) by L164 , MOD_2:def 2;
thus L166: ( C64 * C65 ) in D18 by L165 , L147;
end;
L167: D18 is  linearly-closed by L162 , L155 , VECTSP_4:def 1;
L168: ( C56 . ( 0. C54 ) ) = ( 0. C55 ) by L102;
L169: D18 <> ( {} ) by L168 , L147;
consider C67 being  strict (Subspace of C55) such that L170: D18 = (the carrier of C67) by L169 , L167 , VECTSP_4:34;
take C67;
thus L171: thesis by L170;
end;
uniqueness by VECTSP_4:29;
end;
theorem
L173: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds ( 0. R2 ) in ( ker R4 )))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
L174: ( 0. R2 ) = ( ( 0. R1 ) * ( 0. R2 ) ) by VECTSP_1:14;
L175: ( R4 . ( 0. R2 ) ) = ( ( 0. R1 ) * ( R4 . ( 0. R2 ) ) ) by L174 , MOD_2:def 2
.= ( 0. R3 ) by VECTSP_1:14;
thus L176: thesis by L175 , L132;
end;
theorem
L177: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B42 being (Subset of R2) holds ( R4 .: B42 ) is (Subset of ( im R4 )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C68 being (Subset of R2);
L178: ( [#] ( im R4 ) ) = ( R4 .: ( [#] R2 ) ) by L146;
thus L179: thesis by L178 , RELAT_1:123;
end;
theorem
L180: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B43 being (Element of R3) holds (B43 in ( im R4 ) iff (ex B44 being (Element of R2) st B43 = ( R4 . B44 ))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C69 being (Element of R3);
L181: (C69 in ( im R4 ) implies (ex B45 being (Element of R2) st C69 = ( R4 . B45 )))
proof
assume L182: C69 in ( im R4 );
reconsider D20 = C69 as (Element of ( im R4 )) by L182 , STRUCT_0:def 5;
L183: ( [#] ( im R4 ) ) = ( R4 .: ( [#] R2 ) ) by L146;
consider C70 being set such that L184: C70 in ( dom R4 ) and L185: C70 in ( [#] R2 ) and L186: D20 = ( R4 . C70 ) by L183 , FUNCT_1:def 6;
reconsider D21 = C70 as (Element of R2) by L185;
take D21;
thus L187: thesis by L186;
end;
L188: ((ex B46 being (Element of R2) st C69 = ( R4 . B46 )) implies C69 in ( im R4 ))
proof
assume L189: (ex B47 being (Element of R2) st C69 = ( R4 . B47 ));
L190: ( dom R4 ) = ( [#] R2 ) by L95;
L191: C69 in ( R4 .: ( [#] R2 ) ) by L190 , L189 , FUNCT_1:def 6;
L192: C69 in ( [#] ( im R4 ) ) by L191 , L146;
thus L193: thesis by L192 , STRUCT_0:def 5;
end;
thus L194: thesis by L188 , L181;
end;
theorem
L195: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B48 being (Element of ( ker R4 )) holds ( R4 . B48 ) = ( 0. R3 ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C71 being (Element of ( ker R4 ));
reconsider D22 = C71 as (Element of R2) by VECTSP_4:10;
L196: D22 in ( ker R4 ) by STRUCT_0:def 5;
thus L197: thesis by L196 , L132;
end;
theorem
L198: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (R4 is  one-to-one implies ( ker R4 ) = ( (0). R2 ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
reconsider D23 = ( (0). R2 ) as (Subspace of ( ker R4 )) by VECTSP_4:39;
assume L199: R4 is  one-to-one;
L200: (for B49 being (Element of ( ker R4 )) holds B49 in D23)
proof
let C72 being (Element of ( ker R4 ));
L201: C72 in ( ker R4 ) by STRUCT_0:def 5;
assume L202: (not C72 in D23);
L203: (not C72 = ( 0. R2 )) by L202 , VECTSP_4:35;
L204: (( R4 . ( 0. R2 ) ) = ( 0. R3 ) & ( dom R4 ) = ( [#] R2 )) by L95 , L102;
reconsider D24 = C72 as (Element of R2) by VECTSP_4:10;
L205: ( R4 . D24 ) = ( 0. R3 ) by L201 , L132;
thus L206: thesis by L205 , L199 , L203 , L204 , FUNCT_1:def 4;
end;
thus L207: thesis by L200 , VECTSP_4:32;
end;
theorem
L208: (for R1 being Field holds (for B50 being  finite-dimensional (VectSp of R1) holds ( dim ( (0). B50 ) ) = ( 0 )))
proof
let R1 being Field;
let C73 being  finite-dimensional (VectSp of R1);
L209: ( (Omega). ( (0). C73 ) ) = ( (0). ( (0). C73 ) ) by VECTSP_4:36;
thus L210: thesis by L209 , VECTSP_9:29;
end;
theorem
L211: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B51 , B52 being (Element of R2) holds (( R4 . B51 ) = ( R4 . B52 ) implies ( B51 - B52 ) in ( ker R4 )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C74 , C75 being (Element of R2);
assume that
L212: ( R4 . C74 ) = ( R4 . C75 );
L213: ( R4 . ( C74 - C75 ) ) = ( ( R4 . C74 ) - ( R4 . C75 ) ) by L98
.= ( 0. R3 ) by L212 , VECTSP_1:19;
thus L214: thesis by L213 , L132;
end;
theorem
L215: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B53 being (Subset of R2) holds (for B54 , B55 being (Element of R2) holds (( B54 - B55 ) in ( Lin B53 ) implies B54 in ( Lin ( B53 \/ { B55 } ) ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C76 being (Subset of R2);
let C77 , C78 being (Element of R2);
assume that
L216: ( C77 - C78 ) in ( Lin C76 );
L217: ( Lin ( C76 \/ { C78 } ) ) = ( ( Lin C76 ) + ( Lin { C78 } ) ) by VECTSP_7:15;
L218: C78 in { C78 } by TARSKI:def 1;
L219: C78 in ( Lin { C78 } ) by L218 , VECTSP_7:8;
L220: ( ( C77 - C78 ) + C78 ) = ( C77 - ( C78 - C78 ) ) by RLVECT_1:29
.= ( C77 - ( 0. R2 ) ) by VECTSP_1:19
.= C77 by RLVECT_1:13;
thus L221: thesis by L220 , L216 , L219 , L217 , VECTSP_5:1;
end;
begin
theorem
L222: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for B56 being (Subset of R2) holds (R2 is (Subspace of R3) implies B56 is (Subset of R3))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let C79 being (Subset of R2);
assume L223: R2 is (Subspace of R3);
L224: ( [#] R2 ) c= ( [#] R3 ) by L223 , VECTSP_4:def 2;
L225: C79 c= ( [#] R3 )
proof
let C80 being set;
assume L226: C80 in C79;
L227: C80 in ( [#] R2 ) by L226;
thus L228: thesis by L227 , L224;
end;
thus L229: thesis by L225;
end;
theorem
L230: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B57 being (Subset of R2) holds (B57 is  linearly-independent implies B57 is (Basis of ( Lin B57 ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C81 being (Subset of R2);
assume that
L231: C81 is  linearly-independent;
L232: C81 c= ( [#] ( Lin C81 ) )
proof
let C82 being set;
assume that
L233: C82 in C81;
reconsider D25 = C82 as (Element of R2) by L233;
L234: D25 in ( Lin C81 ) by L233 , VECTSP_7:8;
thus L235: thesis by L234 , STRUCT_0:def 5;
end;
reconsider D26 = C81 as (Subset of ( Lin C81 )) by L232;
L236: ( Lin D26 ) = ( Lin C81 ) by VECTSP_9:17;
L237: D26 is  linearly-independent by L231 , VECTSP_9:12;
thus L238: thesis by L237 , L236 , VECTSP_7:def 3;
end;
theorem
L239: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B58 being (Subset of R2) holds (for B59 being (Element of R2) holds ((B59 in ( Lin B58 ) & (not B59 in B58)) implies ( B58 \/ { B59 } ) is  linearly-dependent)))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C83 being (Subset of R2);
let C84 being (Element of R2);
assume that
L240: C84 in ( Lin C83 )
and
L241: (not C84 in C83);
per cases ;
suppose L242: C83 is  linearly-independent;

L243: C84 in ( [#] ( Lin C83 ) ) by L240 , STRUCT_0:def 5;
reconsider D27 = { C84 } as (Subset of ( Lin C83 )) by L243 , SUBSET_1:41;
reconsider D28 = C83 as (Basis of ( Lin C83 )) by L242 , L230;
reconsider D29 = ( D28 \/ D27 ) as (Subset of ( Lin C83 ));
L244: D27 misses D28
proof
assume L245: D27 meets D28;
L246: (ex B60 being set st (B60 in D27 & B60 in D28)) by L245 , XBOOLE_0:3;
thus L247: contradiction by L246 , L241 , TARSKI:def 1;
end;
L248: D29 is  linearly-dependent by L244 , VECTSP_9:15;
thus L249: thesis by L248 , VECTSP_9:12;
end;
suppose L250: C83 is  linearly-dependent;

thus L251: thesis by L250 , VECTSP_7:1 , XBOOLE_1:7;
end;
end;
theorem
L253: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B61 being (Subset of R2) holds (for B62 being (Basis of R2) holds ((B61 is (Basis of ( ker R4 )) & B61 c= B62) implies ( R4 | ( B62 \ B61 ) ) is  one-to-one)))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C85 being (Subset of R2);
let C86 being (Basis of R2);
assume that
L254: C85 is (Basis of ( ker R4 ))
and
L255: C85 c= C86;
reconsider D30 = C85 as (Subset of R2);
set D31 = ( R4 | ( C86 \ C85 ) );
let C87 , C88 being set;
assume that
L256: C87 in ( dom D31 )
and
L257: C88 in ( dom D31 )
and
L258: ( D31 . C87 ) = ( D31 . C88 )
and
L259: C87 <> C88;
L260: C88 in ( dom R4 ) by L257 , RELAT_1:57;
reconsider D32 = C88 as (Element of R2) by L260;
L261: C87 in ( dom R4 ) by L256 , RELAT_1:57;
reconsider D33 = C87 as (Element of R2) by L261;
L262: D33 in ( C86 \ C85 ) by L256;
L263: (not D33 in ( D30 \/ { D32 } ))
proof
assume L264: D33 in ( D30 \/ { D32 } );
per cases  by L264 , XBOOLE_0:def 3;
suppose L265: D33 in D30;

thus L266: contradiction by L265 , L262 , XBOOLE_0:def 5;
end;
suppose L267: D33 in { D32 };

thus L268: contradiction by L267 , L259 , TARSKI:def 1;
end;
end;
L270: D32 in ( C86 \ C85 ) by L257;
L271: ( D31 . D32 ) = ( R4 . D32 ) by L270 , FUNCT_1:49;
reconsider D34 = C85 as (Basis of ( ker R4 )) by L254;
L272: ( ker R4 ) = ( Lin D34 ) by VECTSP_7:def 3;
L273: ( D31 . D33 ) = ( R4 . D33 ) by L262 , FUNCT_1:49;
L274: ( D33 - D32 ) in ( ker R4 ) by L273 , L258 , L271 , L211;
L275: ( D33 - D32 ) in ( Lin D30 ) by L274 , L272 , VECTSP_9:17;
L276: D33 in ( Lin ( D30 \/ { D32 } ) ) by L275 , L215;
L277: ( { D32 } \/ { D33 } ) = { D33 , D32 } by ENUMSET1:1;
L278: ( ( D30 \/ { D32 } ) \/ { D33 } ) = ( D30 \/ { D33 , D32 } ) by L277 , XBOOLE_1:4;
L279: { D33 , D32 } c= C86
proof
let C89 being set;
assume that
L280: C89 in { D33 , D32 };
per cases  by L280 , TARSKI:def 2;
suppose L281: C89 = D33;

thus L282: thesis by L281 , L262 , XBOOLE_0:def 5;
end;
suppose L283: C89 = D32;

thus L284: thesis by L283 , L270 , XBOOLE_0:def 5;
end;
end;
L286: ( D30 \/ { D33 , D32 } ) c= C86 by L279 , L255 , XBOOLE_1:8;
L287: C86 is  linearly-independent by VECTSP_7:def 3;
thus L288: thesis by L287 , L276 , L278 , L263 , L286 , L239 , VECTSP_7:1;
end;
theorem
L289: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B63 being (Subset of R2) holds (for B64 being (Linear_Combination of B63) holds (for B65 being (Element of R2) holds (for B66 being (Element of R1) holds ( B64 +* (B65 , B66) ) is (Linear_Combination of ( B63 \/ { B65 } ))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C90 being (Subset of R2);
let C91 being (Linear_Combination of C90);
let C92 being (Element of R2);
let C93 being (Element of R1);
set D35 = ( C91 +* (C92 , C93) );
L290: ( dom D35 ) = ( [#] R2 ) by FUNCT_2:def 1;
L291: ( rng D35 ) c= ( [#] R1 )
proof
let C94 being set;
assume L292: C94 in ( rng D35 );
consider C95 being set such that L293: C95 in ( dom D35 ) and L294: ( D35 . C95 ) = C94 by L292 , FUNCT_1:def 3;
L295: C95 in ( dom C91 ) by L290 , L293 , FUNCT_2:92;
per cases ;
suppose L296: C95 = C92;

L297: ( D35 . C95 ) = C93 by L296 , L295 , FUNCT_7:31;
thus L298: thesis by L297 , L294;
end;
suppose L299: C95 <> C92;

L300: (( C91 . C95 ) in ( rng C91 ) & ( rng C91 ) c= ( [#] R1 )) by L295 , FUNCT_1:3 , FUNCT_2:92;
L301: ( D35 . C95 ) = ( C91 . C95 ) by L299 , FUNCT_7:32;
thus L302: thesis by L301 , L294 , L300;
end;
end;
reconsider D36 = D35 as (Element of ( Funcs (( [#] R2 ) , ( [#] R1 )) )) by L291 , L290 , FUNCT_2:def 2;
set D37 = ( ( Carrier C91 ) \/ { C92 } );
L304: (for B67 being (Element of R2) holds ((not B67 in D37) implies ( D36 . B67 ) = ( 0. R1 )))
proof
let C96 being (Element of R2);
assume that
L305: (not C96 in D37);
L306: (not C96 in { C92 }) by L305 , XBOOLE_0:def 3;
L307: C96 <> C92 by L306 , TARSKI:def 1;
L308: ( D36 . C96 ) = ( C91 . C96 ) by L307 , FUNCT_7:32;
L309: (not C96 in ( Carrier C91 )) by L305 , XBOOLE_0:def 3;
thus L310: thesis by L309 , L308;
end;
reconsider D38 = D36 as (Linear_Combination of R2) by L304 , VECTSP_6:def 1;
L311: ( Carrier D38 ) c= D37
proof
let C97 being set;
assume L312: C97 in ( Carrier D38 );
consider C98 being (Element of R2) such that L313: C97 = C98 and L314: ( D38 . C98 ) <> ( 0. R1 ) by L312;
per cases ;
suppose L315: C98 = C92;

L316: (C92 in { C92 } & { C92 } c= D37) by TARSKI:def 1 , XBOOLE_1:7;
thus L317: thesis by L316 , L313 , L315;
end;
suppose L318: C98 <> C92;

L319: ( D38 . C98 ) = ( C91 . C98 ) by L318 , FUNCT_7:32;
L320: C98 in ( Carrier C91 ) by L319 , L314;
L321: ( Carrier C91 ) c= D37 by XBOOLE_1:7;
thus L322: thesis by L321 , L313 , L320;
end;
end;
L324: ( Carrier C91 ) c= C90 by VECTSP_6:def 4;
L325: D37 c= ( C90 \/ { C92 } ) by L324 , XBOOLE_1:9;
L326: ( Carrier D38 ) c= ( C90 \/ { C92 } ) by L325 , L311 , XBOOLE_1:1;
thus L327: thesis by L326 , VECTSP_6:def 4;
end;
definition
let C99 being 1-sorted;
let C100 being (Subset of C99);
func C99 \ C100 -> (Subset of C99) equals 
( ( [#] C99 ) \ C100 );
coherence;
end;
definition
let C101 being Field;
let C102 being (VectSp of C101);
let C103 being (Linear_Combination of C102);
let C104 being (Subset of C102);
redefine func C103 .: C104 -> (Subset of C101);

coherence
proof
L329: ( C103 .: C104 ) c= ( [#] C101 );
thus L330: thesis by L329;
end;
end;
registration
let C105 being Field;
let C106 being (VectSp of C105);
cluster  linearly-dependent for (Subset of C106);
existence
proof
reconsider D39 = { ( 0. C106 ) } as (Subset of C106);
take D39;
L332: ( 0. C106 ) in D39 by TARSKI:def 1;
thus L333: thesis by L332 , VECTSP_7:2;
end;
end;
definition
let C107 being Field;
let C108 being (VectSp of C107);
let C109 being (Linear_Combination of C108);
let C110 being (Subset of C108);
func C109 ! C110 -> (Linear_Combination of C110) equals 
( ( C109 | C110 ) +* ( ( C108 \ C110 ) --> ( 0. C107 ) ) );
coherence
proof
set D40 = ( ( C109 | C110 ) +* ( ( C108 \ C110 ) --> ( 0. C107 ) ) );
L335: ( dom D40 ) = ( ( dom ( C109 | C110 ) ) \/ ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) ) ) by FUNCT_4:def 1;
L336: ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) ) = ( C108 \ C110 ) by FUNCOP_1:13;
L337: ( dom C109 ) = ( [#] C108 ) by FUNCT_2:92;
L338: ( dom ( C109 | C110 ) ) = C110 by L337 , RELAT_1:62;
L339: ( dom D40 ) = ( [#] C108 ) by L338 , L335 , L336 , XBOOLE_1:45;
L340: ( C110 \/ ( ( [#] C108 ) \ C110 ) ) = ( [#] C108 ) by XBOOLE_1:45;
L341: ( rng D40 ) c= ( [#] C107 )
proof
let C111 being set;
assume L342: C111 in ( rng D40 );
consider C112 being set such that L343: C112 in ( dom D40 ) and L344: C111 = ( D40 . C112 ) by L342 , FUNCT_1:def 3;
reconsider D41 = C112 as (Element of C108) by L335 , L338 , L336 , L343 , XBOOLE_1:45;
per cases  by L340 , XBOOLE_0:def 3;
suppose L345: D41 in C110;

L346: (not D41 in ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) )) by L345 , XBOOLE_0:def 5;
L347: ( D40 . D41 ) = ( ( C109 | C110 ) . D41 ) by L346 , FUNCT_4:11;
L348: ( ( C109 | C110 ) . D41 ) = ( C109 . D41 ) by L345 , FUNCT_1:49;
thus L349: thesis by L348 , L344 , L347;
end;
suppose L350: D41 in ( C108 \ C110 );

L351: D41 in ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) ) by L350 , FUNCOP_1:13;
L352: ( D40 . D41 ) = ( ( ( C108 \ C110 ) --> ( 0. C107 ) ) . D41 ) by L351 , FUNCT_4:13
.= ( 0. C107 ) by L350 , FUNCOP_1:7;
thus L353: thesis by L352 , L344;
end;
end;
reconsider D42 = D40 as (Element of ( Funcs (( [#] C108 ) , ( [#] C107 )) )) by L341 , L339 , FUNCT_2:def 2;
L355: (ex B68 being  finite (Subset of C108) st (for B69 being (Element of C108) holds ((not B69 in B68) implies ( D42 . B69 ) = ( 0. C107 ))))
proof
set D43 = { B70 where B70 is (Element of C108) : ( D42 . B70 ) <> ( 0. C107 ) };
L356: D43 c= ( [#] C108 )
proof
let C113 being set;
assume L357: C113 in D43;
L358: (ex B71 being (Element of C108) st (C113 = B71 & ( D42 . B71 ) <> ( 0. C107 ))) by L357;
thus L359: thesis by L358;
end;
reconsider D44 = D43 as (Subset of C108) by L356;
set D45 = ( Carrier C109 );
L360: D44 c= D45
proof
let C114 being set;
assume L361: C114 in D44;
consider C115 being (Element of C108) such that L362: C114 = C115 and L363: ( D42 . C115 ) <> ( 0. C107 ) by L361;
L364: ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) ) = ( C108 \ C110 ) by FUNCOP_1:13;
L365:
now
assume L366: C115 in ( C108 \ C110 );
L367: ( D42 . C115 ) = ( ( ( C108 \ C110 ) --> ( 0. C107 ) ) . C115 ) by L366 , L335 , L339 , L364 , FUNCT_4:def 1
.= ( 0. C107 ) by L366 , FUNCOP_1:7;
thus L368: contradiction by L367 , L363;
end;
L369: C115 in C110 by L365 , XBOOLE_0:def 5;
L370: ( ( C109 | C110 ) . C115 ) = ( C109 . C115 ) by L369 , FUNCT_1:49;
L371: (not C115 in ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) )) by L365;
L372: ( D42 . C115 ) = ( ( C109 | C110 ) . C115 ) by L371 , FUNCT_4:11;
thus L373: thesis by L372 , L362 , L363 , L370;
end;
reconsider D46 = D44 as  finite (Subset of C108) by L360;
take D46;
thus L374: thesis;
end;
reconsider D47 = D42 as (Linear_Combination of C108) by L355 , VECTSP_6:def 1;
L375: ( Carrier D47 ) c= C110
proof
let C116 being set;
assume that
L376: C116 in ( Carrier D47 );
reconsider D48 = C116 as (Element of C108) by L376;
L377: ( D47 . D48 ) <> ( 0. C107 ) by L376 , VECTSP_6:2;
L378:
now
assume L379: (not D48 in C110);
L380: D48 in ( C108 \ C110 ) by L379 , XBOOLE_0:def 5;
L381: D48 in ( ( dom ( C109 | C110 ) ) \/ ( dom ( ( C108 \ C110 ) --> ( 0. C107 ) ) ) ) by L380 , L336 , XBOOLE_0:def 3;
L382: ( D47 . D48 ) = ( ( ( C108 \ C110 ) --> ( 0. C107 ) ) . D48 ) by L381 , L336 , L380 , FUNCT_4:def 1;
thus L383: contradiction by L382 , L377 , L380 , FUNCOP_1:7;
end;
thus L384: thesis by L378;
end;
thus L385: thesis by L375 , VECTSP_6:def 4;
end;
end;
theorem
L387: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R5 being (Linear_Combination of R2) holds R5 = ( R5 ! ( Carrier R5 ) ))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R5 being (Linear_Combination of R2);
set D49 = ( R5 | ( Carrier R5 ) );
set D50 = ( ( R2 \ ( Carrier R5 ) ) --> ( 0. R1 ) );
set D51 = ( D49 +* D50 );
L388: ( dom D50 ) = ( R2 \ ( Carrier R5 ) ) by FUNCOP_1:13;
L389: ( dom R5 ) = ( [#] R2 ) by FUNCT_2:92;
L390: ( dom D49 ) = ( Carrier R5 ) by L389 , RELAT_1:62;
L391: ( ( dom D49 ) \/ ( dom D50 ) ) = ( [#] R2 ) by L390 , L388 , XBOOLE_1:45;
L392: (for B72 being set holds (B72 in ( dom R5 ) implies ( R5 . B72 ) = ( D51 . B72 )))
proof
let C117 being set;
assume L393: C117 in ( dom R5 );
reconsider D52 = C117 as (Element of R2) by L393;
per cases ;
suppose L394: D52 in ( Carrier R5 );

L395: (not D52 in ( dom D50 )) by L394 , XBOOLE_0:def 5;
L396: ( D51 . D52 ) = ( D49 . D52 ) by L395 , L391 , FUNCT_4:def 1;
thus L397: thesis by L396 , L394 , FUNCT_1:49;
end;
suppose L398: (not D52 in ( Carrier R5 ));

L399: D52 in ( R2 \ ( Carrier R5 ) ) by L398 , XBOOLE_0:def 5;
L400: (( D51 . D52 ) = ( D50 . D52 ) & ( D50 . D52 ) = ( 0. R1 )) by L399 , L388 , L391 , FUNCOP_1:7 , FUNCT_4:def 1;
thus L401: thesis by L400 , L398;
end;
end;
L403: ( dom R5 ) = ( dom D51 ) by L389 , L391 , FUNCT_4:def 1;
thus L404: thesis by L403 , L392 , FUNCT_1:def 11;
end;
L405: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R5 being (Linear_Combination of R2) holds (for B73 being (Subset of R2) holds ( R5 .: B73 ) is  finite))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R5 being (Linear_Combination of R2);
let C118 being (Subset of R2);
L406: R5 = ( R5 ! ( Carrier R5 ) ) by L387;
L407: ( ( rng ( R5 | ( Carrier R5 ) ) ) \/ ( rng ( ( R2 \ ( Carrier R5 ) ) --> ( 0. R1 ) ) ) ) is  finite;
L408: ( rng R5 ) is  finite by L407 , L406 , FINSET_1:1 , FUNCT_4:17;
thus L409: thesis by L408 , FINSET_1:1 , RELAT_1:111;
end;
theorem
L410: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R5 being (Linear_Combination of R2) holds (for B74 being (Subset of R2) holds (for B75 being (Element of R2) holds (B75 in B74 implies ( ( R5 ! B74 ) . B75 ) = ( R5 . B75 )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R5 being (Linear_Combination of R2);
let C119 being (Subset of R2);
let C120 being (Element of R2);
assume that
L411: C120 in C119;
L412: ( dom ( R5 ! C119 ) ) = ( [#] R2 ) by FUNCT_2:92;
L413: ( ( dom ( R5 | C119 ) ) \/ ( dom ( ( R2 \ C119 ) --> ( 0. R1 ) ) ) ) = ( [#] R2 ) by L412 , FUNCT_4:def 1;
L414: (not C120 in ( dom ( ( R2 \ C119 ) --> ( 0. R1 ) ) )) by L411 , XBOOLE_0:def 5;
L415: ( ( R5 ! C119 ) . C120 ) = ( ( R5 | C119 ) . C120 ) by L414 , L413 , FUNCT_4:def 1
.= ( R5 . C120 ) by L411 , FUNCT_1:49;
thus L416: thesis by L415;
end;
theorem
L417: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R5 being (Linear_Combination of R2) holds (for B76 being (Subset of R2) holds (for B77 being (Element of R2) holds ((not B77 in B76) implies ( ( R5 ! B76 ) . B77 ) = ( 0. R1 )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R5 being (Linear_Combination of R2);
let C121 being (Subset of R2);
let C122 being (Element of R2);
assume L418: (not C122 in C121);
L419: C122 in ( R2 \ C121 ) by L418 , XBOOLE_0:def 5;
L420: ( dom ( R5 ! C121 ) ) = ( [#] R2 ) by FUNCT_2:92;
L421: (( dom ( ( R2 \ C121 ) --> ( 0. R1 ) ) ) = ( R2 \ C121 ) & ( dom ( R5 ! C121 ) ) = ( ( dom ( R5 | C121 ) ) \/ ( dom ( ( R2 \ C121 ) --> ( 0. R1 ) ) ) )) by FUNCOP_1:13 , FUNCT_4:def 1;
L422: ( ( R5 ! C121 ) . C122 ) = ( ( ( R2 \ C121 ) --> ( 0. R1 ) ) . C122 ) by L421 , L420 , L419 , FUNCT_4:def 1
.= ( 0. R1 ) by L419 , FUNCOP_1:7;
thus L423: thesis by L422;
end;
theorem
L424: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B78 , B79 being (Subset of R2) holds (for B80 being (Linear_Combination of B79) holds (B78 c= B79 implies B80 = ( ( B80 ! B78 ) + ( B80 ! ( B79 \ B78 ) ) ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C123 , C124 being (Subset of R2);
let C125 being (Linear_Combination of C124);
assume that
L425: C123 c= C124;
set D53 = ( ( C125 ! C123 ) + ( C125 ! ( C124 \ C123 ) ) );
let C126 being (Element of R2);
L426: (C126 in C124 implies (C126 in C123 or C126 in ( C124 \ C123 )))
proof
assume L427: C126 in C124;
L428: C124 = ( C123 \/ ( C124 \ C123 ) ) by L425 , XBOOLE_1:45;
thus L429: thesis by L428 , L427 , XBOOLE_0:def 3;
end;
per cases  by L426;
suppose L430: C126 in C123;

L431: (not C126 in ( C124 \ C123 )) by L430 , XBOOLE_0:def 5;
L432: ( ( C125 ! ( C124 \ C123 ) ) . C126 ) = ( 0. R1 ) by L431 , L417;
L433: ( ( C125 ! C123 ) . C126 ) = ( C125 . C126 ) by L430 , L410;
L434: ( D53 . C126 ) = ( ( C125 . C126 ) + ( 0. R1 ) ) by L433 , L432 , VECTSP_6:22
.= ( C125 . C126 ) by RLVECT_1:4;
thus L435: ( C125 . C126 ) = ( D53 . C126 ) by L434;
end;
suppose L436: C126 in ( C124 \ C123 );

L437: (not C126 in C123) by L436 , XBOOLE_0:def 5;
L438: ( ( C125 ! C123 ) . C126 ) = ( 0. R1 ) by L437 , L417;
L439: ( ( C125 ! ( C124 \ C123 ) ) . C126 ) = ( C125 . C126 ) by L436 , L410;
L440: ( D53 . C126 ) = ( ( 0. R1 ) + ( C125 . C126 ) ) by L439 , L438 , VECTSP_6:22
.= ( C125 . C126 ) by RLVECT_1:4;
thus L441: ( C125 . C126 ) = ( D53 . C126 ) by L440;
end;
suppose L442: (not C126 in C124);

L443: ( Carrier C125 ) c= C124 by VECTSP_6:def 4;
L444: (not C126 in ( Carrier C125 )) by L443 , L442;
L445: (not C126 in ( C124 \ C123 )) by L442 , XBOOLE_0:def 5;
L446: ( ( C125 ! ( C124 \ C123 ) ) . C126 ) = ( 0. R1 ) by L445 , L417;
L447: (not C126 in C123) by L425 , L442;
L448: ( ( C125 ! C123 ) . C126 ) = ( 0. R1 ) by L447 , L417;
L449: ( D53 . C126 ) = ( ( 0. R1 ) + ( 0. R1 ) ) by L448 , L446 , VECTSP_6:22
.= ( 0. R1 ) by RLVECT_1:4;
thus L450: ( C125 . C126 ) = ( D53 . C126 ) by L449 , L444;
end;
end;
registration
let C127 being Field;
let C128 being (VectSp of C127);
let C129 being (Linear_Combination of C128);
let C130 being (Subset of C128);
cluster ( C129 .: C130 ) ->  finite;
coherence by L405;
end;
definition
let C131 , C132 being non  empty 1-sorted;
let C133 being (Function of C131 , C132);
let C134 being (Subset of C132);
redefine func C133 " C134 -> (Subset of C131);

coherence
proof
L453: ( dom C133 ) = ( [#] C131 ) by L95;
thus L454: thesis by L453 , RELAT_1:132;
end;
end;
theorem
L456: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R5 being (Linear_Combination of R2) holds (for B81 being (Subset of R2) holds (B81 misses ( Carrier R5 ) implies ( R5 .: B81 ) c= { ( 0. R1 ) })))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R5 being (Linear_Combination of R2);
let C135 being (Subset of R2);
assume that
L457: C135 misses ( Carrier R5 );
set D54 = ( R5 .: C135 );
let C136 being set;
assume L458: C136 in D54;
consider C137 being set such that L459: C137 in ( dom R5 ) and L460: C137 in C135 and L461: C136 = ( R5 . C137 ) by L458 , FUNCT_1:def 6;
reconsider D55 = C137 as (Element of R2) by L459;
L462:
now
assume L463: ( R5 . D55 ) <> ( 0. R1 );
L464: D55 in ( Carrier R5 ) by L463;
L465: D55 in ( ( Carrier R5 ) /\ C135 ) by L464 , L460 , XBOOLE_0:def 4;
thus L466: contradiction by L465 , L457 , XBOOLE_0:def 7;
end;
thus L467: thesis by L462 , L461 , TARSKI:def 1;
end;
definition
let C138 being Field;
let C139 , C140 being (VectSp of C138);
let C141 being (Linear_Combination of C139);
let C142 being (linear-transformation of C139 , C140);
func C142 @ C141 -> (Linear_Combination of C140) means 
:L468: (for B82 being (Element of C140) holds ( it . B82 ) = ( Sum ( C141 .: ( C142 " { B82 } ) ) ));
existence
proof
defpred S1[ set , set ] means (ex B83 being (Element of C140) st ($1 = B83 & $2 = ( Sum ( C141 .: ( C142 " { B83 } ) ) )));
L469: (for B84 being set holds (B84 in ( [#] C140 ) implies (ex B85 being set st S1[ B84 , B85 ])))
proof
let C143 being set;
assume L470: C143 in ( [#] C140 );
reconsider D56 = C143 as (Element of C140) by L470;
take ( Sum ( C141 .: ( C142 " { D56 } ) ) );
thus L471: thesis;
end;
consider C144 being Function such that L472: ( dom C144 ) = ( [#] C140 ) and L473: (for B86 being set holds (B86 in ( [#] C140 ) implies S1[ B86 , ( C144 . B86 ) ])) from CLASSES1:sch 1(L469);
L474: ( rng C144 ) c= ( [#] C138 )
proof
let C145 being set;
assume L475: C145 in ( rng C144 );
consider C146 being set such that L476: C146 in ( dom C144 ) and L477: ( C144 . C146 ) = C145 by L475 , FUNCT_1:def 3;
L478: (ex B87 being (Element of C140) st (C146 = B87 & ( C144 . C146 ) = ( Sum ( C141 .: ( C142 " { B87 } ) ) ))) by L472 , L473 , L476;
thus L479: thesis by L478 , L477;
end;
L480: (for B88 being (Element of C140) holds ( C144 . B88 ) = ( Sum ( C141 .: ( C142 " { B88 } ) ) ))
proof
let C147 being (Element of C140);
L481: (ex B89 being (Element of C140) st (C147 = B89 & ( C144 . C147 ) = ( Sum ( C141 .: ( C142 " { B89 } ) ) ))) by L473;
thus L482: thesis by L481;
end;
reconsider D57 = C144 as (Element of ( Funcs (( [#] C140 ) , ( [#] C138 )) )) by L472 , L474 , FUNCT_2:def 2;
L483: (ex B90 being  finite (Subset of C140) st (for B91 being (Element of C140) holds ((not B91 in B90) implies ( D57 . B91 ) = ( 0. C138 ))))
proof
set D58 = { B92 where B92 is (Element of C140) : ( D57 . B92 ) <> ( 0. C138 ) };
L484: D58 c= ( [#] C140 )
proof
let C148 being set;
assume L485: C148 in D58;
L486: (ex B93 being (Element of C140) st (C148 = B93 & ( D57 . B93 ) <> ( 0. C138 ))) by L485;
thus L487: thesis by L486;
end;
reconsider D59 = D58 as (Subset of C140) by L484;
set D60 = ( Carrier C141 );
reconsider D61 = ( C142 .: D60 ) as (Subset of C140);
L488: D59 c= D61
proof
let C149 being set;
assume L489: C149 in D59;
consider C150 being (Element of C140) such that L490: C149 = C150 and L491: ( D57 . C150 ) <> ( 0. C138 ) by L489;
L492: ( C142 " { C150 } ) meets ( Carrier C141 )
proof
assume L493: ( C142 " { C150 } ) misses ( Carrier C141 );
L494: ( C141 .: ( C142 " { C150 } ) ) c= { ( 0. C138 ) } by L493 , L456;
L495: ( Sum ( C141 .: ( C142 " { C150 } ) ) ) = ( 0. C138 )
proof
per cases ;
suppose L496: ( C141 .: ( C142 " { C150 } ) ) = ( {} C138 );

thus L497: thesis by L496 , RLVECT_2:8;
end;
suppose L498: ( C141 .: ( C142 " { C150 } ) ) <> ( {} C138 );

L499: { ( 0. C138 ) } c= ( C141 .: ( C142 " { C150 } ) )
proof
let C151 being set;
assume L500: C151 in { ( 0. C138 ) };
L501: C151 = ( 0. C138 ) by L500 , TARSKI:def 1;
L502: (ex B94 being set st B94 in ( C141 .: ( C142 " { C150 } ) )) by L498 , XBOOLE_0:def 1;
thus L503: thesis by L502 , L494 , L501 , TARSKI:def 1;
end;
L504: ( C141 .: ( C142 " { C150 } ) ) c= { ( 0. C138 ) } by L493 , L456;
L505: ( C141 .: ( C142 " { C150 } ) ) = { ( 0. C138 ) } by L504 , L499 , XBOOLE_0:def 10;
thus L506: thesis by L505 , RLVECT_2:9;
end;
end;
thus L508: contradiction by L495 , L480 , L491;
end;
consider C152 being set such that L509: C152 in ( C142 " { C150 } ) and L510: C152 in ( Carrier C141 ) by L492 , XBOOLE_0:3;
L511: ( dom C142 ) = ( [#] C139 ) by L95;
reconsider D62 = C152 as (Element of C139) by L510;
L512: ( C142 . D62 ) in { C150 } by L509 , FUNCT_1:def 7;
L513: ( C142 . D62 ) = C150 by L512 , TARSKI:def 1;
thus L514: thesis by L513 , L490 , L510 , L511 , FUNCT_1:def 6;
end;
reconsider D63 = D59 as  finite (Subset of C140) by L488;
take D63;
thus L515: thesis;
end;
reconsider D64 = D57 as (Linear_Combination of C140) by L483 , VECTSP_6:def 1;
take D64;
L516: (for B95 being (Element of C140) holds ( D64 . B95 ) = ( Sum ( C141 .: ( C142 " { B95 } ) ) ))
proof
let C153 being (Element of C140);
L517: (ex B96 being (Element of C140) st (C153 = B96 & ( D64 . C153 ) = ( Sum ( C141 .: ( C142 " { B96 } ) ) ))) by L473;
thus L518: thesis by L517;
end;
thus L519: thesis by L516;
end;
uniqueness
proof
let C154 , C155 being (Linear_Combination of C140);
assume that
L520: (for B97 being (Element of C140) holds ( C154 . B97 ) = ( Sum ( C141 .: ( C142 " { B97 } ) ) ))
and
L521: (for B98 being (Element of C140) holds ( C155 . B98 ) = ( Sum ( C141 .: ( C142 " { B98 } ) ) ));
L522: (for B99 being set holds (B99 in ( dom C154 ) implies ( C154 . B99 ) = ( C155 . B99 )))
proof
let C156 being set;
assume L523: C156 in ( dom C154 );
reconsider D65 = C156 as (Element of C140) by L523;
L524: ( C154 . D65 ) = ( Sum ( C141 .: ( C142 " { D65 } ) ) ) by L520;
thus L525: thesis by L524 , L521;
end;
L526: (( dom C154 ) = ( [#] C140 ) & ( dom C155 ) = ( [#] C140 )) by FUNCT_2:92;
thus L527: thesis by L526 , L522 , FUNCT_1:def 11;
end;
end;
theorem
L529: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for R5 being (Linear_Combination of R2) holds ( R4 @ R5 ) is (Linear_Combination of ( R4 .: ( Carrier R5 ) )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let R5 being (Linear_Combination of R2);
L530: ( Carrier ( R4 @ R5 ) ) c= ( R4 .: ( Carrier R5 ) )
proof
let C157 being set;
assume that
L531: C157 in ( Carrier ( R4 @ R5 ) );
reconsider D66 = C157 as (Element of R3) by L531;
L532: ( ( R4 @ R5 ) . D66 ) <> ( 0. R1 ) by L531 , VECTSP_6:2;
L533:
now
assume L534: ( R4 " { D66 } ) misses ( Carrier R5 );
L535: ( R5 .: ( R4 " { D66 } ) ) c= { ( 0. R1 ) } by L534 , L456;
L536: ( Sum ( R5 .: ( R4 " { D66 } ) ) ) = ( 0. R1 )
proof
per cases ;
suppose L537: ( R5 .: ( R4 " { D66 } ) ) = ( {} R1 );

thus L538: thesis by L537 , RLVECT_2:8;
end;
suppose L539: ( R5 .: ( R4 " { D66 } ) ) <> ( {} R1 );

L540: { ( 0. R1 ) } c= ( R5 .: ( R4 " { D66 } ) )
proof
let C158 being set;
assume L541: C158 in { ( 0. R1 ) };
L542: C158 = ( 0. R1 ) by L541 , TARSKI:def 1;
L543: (ex B100 being set st B100 in ( R5 .: ( R4 " { D66 } ) )) by L539 , XBOOLE_0:def 1;
thus L544: thesis by L543 , L535 , L542 , TARSKI:def 1;
end;
L545: ( R5 .: ( R4 " { D66 } ) ) c= { ( 0. R1 ) } by L534 , L456;
L546: ( R5 .: ( R4 " { D66 } ) ) = { ( 0. R1 ) } by L545 , L540 , XBOOLE_0:def 10;
thus L547: thesis by L546 , RLVECT_2:9;
end;
end;
thus L549: contradiction by L536 , L532 , L468;
end;
consider C159 being set such that L550: C159 in ( R4 " { D66 } ) and L551: C159 in ( Carrier R5 ) by L533 , XBOOLE_0:3;
L552: C159 in ( dom R4 ) by L550 , FUNCT_1:def 7;
L553: ( R4 . C159 ) in { D66 } by L550 , FUNCT_1:def 7;
reconsider D67 = C159 as (Element of R2) by L550;
L554: ( R4 . D67 ) = D66 by L553 , TARSKI:def 1;
thus L555: thesis by L554 , L551 , L552 , FUNCT_1:def 6;
end;
thus L556: thesis by L530 , VECTSP_6:def 4;
end;
theorem
L557: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for R5 being (Linear_Combination of R2) holds ( Carrier ( R4 @ R5 ) ) c= ( R4 .: ( Carrier R5 ) ))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let R5 being (Linear_Combination of R2);
L558: ( R4 @ R5 ) is (Linear_Combination of ( R4 .: ( Carrier R5 ) )) by L529;
thus L559: thesis by L558 , VECTSP_6:def 4;
end;
theorem
L560: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B101 , B102 being (Linear_Combination of R2) holds (( Carrier B101 ) misses ( Carrier B102 ) implies ( Carrier ( B101 + B102 ) ) = ( ( Carrier B101 ) \/ ( Carrier B102 ) )))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C160 , C161 being (Linear_Combination of R2);
assume that
L561: ( Carrier C160 ) misses ( Carrier C161 );
thus L562: ( Carrier ( C160 + C161 ) ) c= ( ( Carrier C160 ) \/ ( Carrier C161 ) ) by VECTSP_6:23;
thus L563: ( ( Carrier C160 ) \/ ( Carrier C161 ) ) c= ( Carrier ( C160 + C161 ) )
proof
let C162 being set;
assume that
L564: C162 in ( ( Carrier C160 ) \/ ( Carrier C161 ) );
per cases  by L564 , XBOOLE_0:def 3;
suppose L565: C162 in ( Carrier C160 );

reconsider D68 = C162 as (Element of R2) by L565;
L566: (not D68 in ( Carrier C161 )) by L561 , L564 , L565 , XBOOLE_0:5;
L567: (( ( C160 + C161 ) . D68 ) = ( ( C160 . D68 ) + ( C161 . D68 ) ) & ( C161 . D68 ) = ( 0. R1 )) by L566 , VECTSP_6:22;
L568: ( ( C160 + C161 ) . D68 ) = ( C160 . D68 ) by L567 , RLVECT_1:4;
L569: ( C160 . D68 ) <> ( 0. R1 ) by L565 , VECTSP_6:2;
thus L570: thesis by L569 , L568;
end;
suppose L571: C162 in ( Carrier C161 );

reconsider D69 = C162 as (Element of R2) by L571;
L572: (not D69 in ( Carrier C160 )) by L561 , L564 , L571 , XBOOLE_0:5;
L573: (( ( C160 + C161 ) . D69 ) = ( ( C160 . D69 ) + ( C161 . D69 ) ) & ( C160 . D69 ) = ( 0. R1 )) by L572 , VECTSP_6:22;
L574: ( ( C160 + C161 ) . D69 ) = ( C161 . D69 ) by L573 , RLVECT_1:4;
L575: ( C161 . D69 ) <> ( 0. R1 ) by L571 , VECTSP_6:2;
thus L576: thesis by L575 , L574;
end;
end;

end;
theorem
L564: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B103 , B104 being (Linear_Combination of R2) holds (( Carrier B103 ) misses ( Carrier B104 ) implies ( Carrier ( B103 - B104 ) ) = ( ( Carrier B103 ) \/ ( Carrier B104 ) )))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C163 , C164 being (Linear_Combination of R2);
assume that
L565: ( Carrier C163 ) misses ( Carrier C164 );
L566: ( Carrier ( - C164 ) ) = ( Carrier C164 ) by VECTSP_6:38;
thus L567: thesis by L566 , L565 , L560;
end;
theorem
L568: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B105 , B106 being (Subset of R2) holds ((B105 c= B106 & B106 is (Basis of R2)) implies R2 is_the_direct_sum_of ( Lin B105 ) , ( Lin ( B106 \ B105 ) )))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C165 , C166 being (Subset of R2);
assume that
L569: C165 c= C166
and
L570: C166 is (Basis of R2);
L571: ( ( Lin C165 ) /\ ( Lin ( C166 \ C165 ) ) ) = ( (0). R2 )
proof
set D70 = ( ( Lin C165 ) /\ ( Lin ( C166 \ C165 ) ) );
reconsider D71 = ( (0). R2 ) as  strict (Subspace of D70) by VECTSP_4:39;
L572: (for B107 being (Element of D70) holds B107 in D71)
proof
let C167 being (Element of D70);
L573: C166 is  linearly-independent by L570 , VECTSP_7:def 3;
L574: C167 in D70 by STRUCT_0:def 5;
L575: C167 in ( Lin C165 ) by L574 , VECTSP_5:3;
consider C168 being (Linear_Combination of C165) such that L576: C167 = ( Sum C168 ) by L575 , VECTSP_7:7;
L577: C167 in ( Lin ( C166 \ C165 ) ) by L574 , VECTSP_5:3;
consider C169 being (Linear_Combination of ( C166 \ C165 )) such that L578: C167 = ( Sum C169 ) by L577 , VECTSP_7:7;
L579: ( 0. R2 ) = ( ( Sum C168 ) - ( Sum C169 ) ) by L576 , L578 , VECTSP_1:19
.= ( Sum ( C168 - C169 ) ) by VECTSP_6:47;
L580: (( Carrier ( C168 - C169 ) ) c= ( ( Carrier C168 ) \/ ( Carrier C169 ) ) & ( C165 \/ ( C166 \ C165 ) ) = C166) by L569 , VECTSP_6:41 , XBOOLE_1:45;
L581: (( Carrier C168 ) c= C165 & ( Carrier C169 ) c= ( C166 \ C165 )) by VECTSP_6:def 4;
L582: ( ( Carrier C168 ) \/ ( Carrier C169 ) ) c= ( C165 \/ ( C166 \ C165 ) ) by L581 , XBOOLE_1:13;
L583: ( Carrier ( C168 - C169 ) ) c= C166 by L582 , L580 , XBOOLE_1:1;
reconsider D72 = ( C168 - C169 ) as (Linear_Combination of C166) by L583 , VECTSP_6:def 4;
L584: C165 misses ( C166 \ C165 ) by XBOOLE_1:79;
L585: ( Carrier D72 ) = ( ( Carrier C168 ) \/ ( Carrier C169 ) ) by L584 , L581 , L564 , XBOOLE_1:64;
L586: ( Carrier C168 ) = ( {} ) by L585 , L579 , L573 , VECTSP_7:def 1;
L587: C168 = ( ZeroLC R2 ) by L586 , VECTSP_6:def 3;
L588: ( Sum C168 ) = ( 0. R2 ) by L587 , VECTSP_6:15;
thus L589: thesis by L588 , L576 , VECTSP_4:35;
end;
thus L590: thesis by L572 , VECTSP_4:32;
end;
L591: ( (Omega). R2 ) = ( ( Lin C165 ) + ( Lin ( C166 \ C165 ) ) )
proof
set D73 = ( ( Lin C165 ) + ( Lin ( C166 \ C165 ) ) );
L592: ( [#] R2 ) c= ( [#] D73 )
proof
let C170 being set;
assume L593: C170 in ( [#] R2 );
reconsider D74 = C170 as (Element of R2) by L593;
L594: D74 in ( Lin C166 ) by L570 , VECTSP_9:10;
consider C171 being (Linear_Combination of C166) such that L595: D74 = ( Sum C171 ) by L594 , VECTSP_7:7;
set D75 = ( C171 ! ( C166 \ C165 ) );
set D76 = ( C171 ! C165 );
L596: C171 = ( D76 + D75 ) by L569 , L424;
L597: (ex B108 , B109 being (Element of R2) st (B108 in ( Lin C165 ) & B109 in ( Lin ( C166 \ C165 ) ) & D74 = ( B108 + B109 )))
proof
take ( Sum D76 );
take ( Sum D75 );
thus L598: thesis by L595 , L596 , VECTSP_6:44 , VECTSP_7:7;
end;
L599: D74 in ( ( Lin C165 ) + ( Lin ( C166 \ C165 ) ) ) by L597 , VECTSP_5:1;
thus L600: thesis by L599 , STRUCT_0:def 5;
end;
L601: ( [#] D73 ) c= ( [#] R2 ) by VECTSP_4:def 2;
L602: ( [#] D73 ) = ( [#] R2 ) by L601 , L592 , XBOOLE_0:def 10;
thus L603: thesis by L602 , VECTSP_4:29;
end;
thus L604: thesis by L591 , L571 , VECTSP_5:def 4;
end;
theorem
L605: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B110 being (Subset of R2) holds (for B111 being (Linear_Combination of B110) holds (for B112 being (Element of R2) holds ((( R4 | B110 ) is  one-to-one & B112 in B110) implies (ex B113 being (Subset of R2) st (B113 misses B110 & ( R4 " { ( R4 . B112 ) } ) = ( { B112 } \/ B113 )))))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C172 being (Subset of R2);
let C173 being (Linear_Combination of C172);
let C174 being (Element of R2);
assume that
L606: ( R4 | C172 ) is  one-to-one
and
L607: C174 in C172;
set D77 = ( ( R4 " { ( R4 . C174 ) } ) \ { C174 } );
L608: D77 misses C172
proof
L609: ( dom R4 ) = ( [#] R2 ) by L95;
L610: ( dom ( R4 | C172 ) ) = C172 by L609 , RELAT_1:62;
assume L611: D77 meets C172;
consider C175 being set such that L612: C175 in D77 and L613: C175 in C172 by L611 , XBOOLE_0:3;
L614: (not C175 in { C174 }) by L612 , XBOOLE_0:def 5;
L615: C175 <> C174 by L614 , TARSKI:def 1;
L616: C175 in ( R4 " { ( R4 . C174 ) } ) by L612 , XBOOLE_0:def 5;
L617: ( R4 . C175 ) in { ( R4 . C174 ) } by L616 , FUNCT_1:def 7;
L618: ( R4 . C175 ) = ( R4 . C174 ) by L617 , TARSKI:def 1;
L619: ( R4 . C175 ) = ( ( R4 | C172 ) . C175 ) by L613 , FUNCT_1:49;
L620: ( ( R4 | C172 ) . C174 ) = ( ( R4 | C172 ) . C175 ) by L619 , L607 , L618 , FUNCT_1:49;
thus L621: thesis by L620 , L606 , L607 , L613 , L615 , L610 , FUNCT_1:def 4;
end;
take D77;
L622: { C174 } c= ( R4 " { ( R4 . C174 ) } )
proof
let C176 being set;
assume L623: C176 in { C174 };
L624: C176 = C174 by L623 , TARSKI:def 1;
L625: (( dom R4 ) = ( [#] R2 ) & ( R4 . C174 ) in { ( R4 . C174 ) }) by L95 , TARSKI:def 1;
thus L626: thesis by L625 , L624 , FUNCT_1:def 7;
end;
thus L627: thesis by L622 , L608 , XBOOLE_1:45;
end;
theorem
L628: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R5 being (Linear_Combination of R2) holds (for B114 being (Subset of R2) holds ((B114 misses ( Carrier R5 ) & B114 <> ( {} )) implies ( R5 .: B114 ) = { ( 0. R1 ) })))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R5 being (Linear_Combination of R2);
let C177 being (Subset of R2);
assume that
L629: C177 misses ( Carrier R5 )
and
L630: C177 <> ( {} );
L631: ( dom R5 ) = ( [#] R2 ) by FUNCT_2:92;
L632: ( R5 .: C177 ) <> ( {} ) by L631 , L630 , RELAT_1:119;
L633: ( R5 .: C177 ) c= { ( 0. R1 ) } by L629 , L456;
thus L634: thesis by L633 , L632 , ZFMISC_1:33;
end;
theorem
L635: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for R5 being (Linear_Combination of R2) holds (for B115 being (Element of R3) holds (B115 in ( Carrier ( R4 @ R5 ) ) implies ( R4 " { B115 } ) meets ( Carrier R5 ))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let R5 being (Linear_Combination of R2);
let C178 being (Element of R3);
assume L636: C178 in ( Carrier ( R4 @ R5 ) );
L637: ( ( R4 @ R5 ) . C178 ) <> ( 0. R1 ) by L636 , VECTSP_6:2;
assume L638: ( R4 " { C178 } ) misses ( Carrier R5 );
per cases ;
suppose L639: ( R4 " { C178 } ) = ( {} );

L640: ( Sum ( R5 .: ( R4 " { C178 } ) ) ) = ( Sum ( {} R1 ) ) by L639
.= ( 0. R1 ) by RLVECT_2:8;
thus L641: thesis by L640 , L637 , L468;
end;
suppose L642: ( R4 " { C178 } ) <> ( {} );

L643: ( R5 .: ( R4 " { C178 } ) ) = { ( 0. R1 ) } by L642 , L638 , L628;
L644: ( Sum ( R5 .: ( R4 " { C178 } ) ) ) = ( 0. R1 ) by L643 , RLVECT_2:9;
thus L645: thesis by L644 , L637 , L468;
end;
end;
theorem
L647: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for R5 being (Linear_Combination of R2) holds (for B116 being (Element of R2) holds ((( R4 | ( Carrier R5 ) ) is  one-to-one & B116 in ( Carrier R5 )) implies ( ( R4 @ R5 ) . ( R4 . B116 ) ) = ( R5 . B116 ))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let R5 being (Linear_Combination of R2);
let C179 being (Element of R2);
assume that
L648: ( R4 | ( Carrier R5 ) ) is  one-to-one
and
L649: C179 in ( Carrier R5 );
consider C180 being (Subset of R2) such that L650: C180 misses ( Carrier R5 ) and L651: ( R4 " { ( R4 . C179 ) } ) = ( { C179 } \/ C180 ) by L648 , L649 , L605;
per cases ;
suppose L652: C180 = ( {} );

L653: ( dom R5 ) = ( [#] R2 ) by FUNCT_2:92;
L654: ( R5 .: { C179 } ) = ( Im (R5 , C179) )
.= { ( R5 . C179 ) } by L653 , FUNCT_1:59;
L655: ( Sum ( R5 .: ( R4 " { ( R4 . C179 ) } ) ) ) = ( R5 . C179 ) by L654 , L651 , L652 , RLVECT_2:9;
thus L656: thesis by L655 , L468;
end;
suppose L657: C180 <> ( {} );

L658: ( R5 .: C180 ) c= { ( 0. R1 ) }
proof
let C181 being set;
assume L659: C181 in ( R5 .: C180 );
consider C182 being set such that L660: C182 in ( dom R5 ) and L661: C182 in C180 and L662: C181 = ( R5 . C182 ) by L659 , FUNCT_1:def 6;
L663:
now
assume L664: C182 in ( Carrier R5 );
L665: C182 in ( ( Carrier R5 ) /\ C180 ) by L664 , L661 , XBOOLE_0:def 4;
thus L666: contradiction by L665 , L650 , XBOOLE_0:def 7;
end;
reconsider D78 = C182 as (Element of R2) by L660;
L667: ( R5 . D78 ) = ( 0. R1 ) by L663;
thus L668: thesis by L667 , L662 , TARSKI:def 1;
end;
L669: ( R5 .: C180 ) misses ( R5 .: { C179 } )
proof
assume L670: ( R5 .: C180 ) meets ( R5 .: { C179 } );
consider C183 being set such that L671: C183 in ( R5 .: C180 ) and L672: C183 in ( R5 .: { C179 } ) by L670 , XBOOLE_0:3;
L673: ( dom R5 ) = ( [#] R2 ) by FUNCT_2:92;
L674: ( R5 .: { C179 } ) = ( Im (R5 , C179) )
.= { ( R5 . C179 ) } by L673 , FUNCT_1:59;
L675: C183 = ( R5 . C179 ) by L674 , L672 , TARSKI:def 1;
L676: C183 = ( 0. R1 ) by L658 , L671 , TARSKI:def 1;
thus L677: thesis by L676 , L649 , L675 , VECTSP_6:2;
end;
L678: ( dom R5 ) = ( [#] R2 ) by FUNCT_2:92;
L679: { ( 0. R1 ) } c= ( R5 .: C180 )
proof
consider C184 being set such that L680: C184 in C180 by L657 , XBOOLE_0:def 1;
L681:
now
assume L682: C184 in ( Carrier R5 );
L683: C184 in ( ( Carrier R5 ) /\ C180 ) by L682 , L680 , XBOOLE_0:def 4;
thus L684: contradiction by L683 , L650 , XBOOLE_0:def 7;
end;
reconsider D79 = C184 as (Element of R2) by L680;
let C185 being set;
assume L685: C185 in { ( 0. R1 ) };
L686: C185 = ( 0. R1 ) by L685 , TARSKI:def 1;
L687: ( R5 . D79 ) = C185 by L686 , L681;
thus L688: thesis by L687 , L678 , L680 , FUNCT_1:def 6;
end;
L689: ( R5 .: C180 ) = { ( 0. R1 ) } by L679 , L658 , XBOOLE_0:def 10;
L690: ( R5 .: { C179 } ) = ( Im (R5 , C179) )
.= { ( R5 . C179 ) } by L678 , FUNCT_1:59;
L691: ( R5 .: ( R4 " { ( R4 . C179 ) } ) ) = ( ( R5 .: { C179 } ) \/ ( R5 .: C180 ) ) by L651 , RELAT_1:120;
L692: ( Sum ( R5 .: ( R4 " { ( R4 . C179 ) } ) ) ) = ( ( Sum ( R5 .: { C179 } ) ) + ( Sum ( R5 .: C180 ) ) ) by L691 , L669 , RLVECT_2:12
.= ( ( R5 . C179 ) + ( Sum { ( 0. R1 ) } ) ) by L690 , L689 , RLVECT_2:9
.= ( ( R5 . C179 ) + ( 0. R1 ) ) by RLVECT_2:9
.= ( R5 . C179 ) by RLVECT_1:4;
thus L693: thesis by L692 , L468;
end;
end;
theorem
L695: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for R5 being (Linear_Combination of R2) holds (for B117 being (FinSequence of R2) holds ((( rng B117 ) = ( Carrier R5 ) & ( R4 | ( Carrier R5 ) ) is  one-to-one) implies ( R4 * ( R5 (#) B117 ) ) = ( ( R4 @ R5 ) (#) ( R4 * B117 ) ))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let R5 being (Linear_Combination of R2);
let C186 being (FinSequence of R2);
assume that
L696: ( rng C186 ) = ( Carrier R5 )
and
L697: ( R4 | ( Carrier R5 ) ) is  one-to-one;
reconsider D80 = ( ( R4 @ R5 ) (#) ( R4 * C186 ) ) as (FinSequence of R3);
reconsider D81 = ( R4 * ( R5 (#) C186 ) ) as (FinSequence of R3);
L698: ( len D80 ) = ( len ( R4 * C186 ) ) by VECTSP_6:def 5
.= ( len C186 ) by FINSEQ_2:33;
L699: ( len D81 ) = ( len ( R5 (#) C186 ) ) by FINSEQ_2:33
.= ( len C186 ) by VECTSP_6:def 5;
L700: (for B118 being Nat holds ((1 <= B118 & B118 <= ( len D81 )) implies ( D81 . B118 ) = ( D80 . B118 )))
proof
L701: ( dom D80 ) = ( Seg ( len C186 ) ) by L698 , FINSEQ_1:def 3;
let C187 being Nat;
assume that
L702: (1 <= C187 & C187 <= ( len D81 ));
reconsider D82 = ( C186 /. C187 ) as (Element of R2);
L703: ( len ( R5 (#) C186 ) ) = ( len C186 ) by VECTSP_6:def 5;
L704: ( dom ( R5 (#) C186 ) ) = ( Seg ( len C186 ) ) by L703 , FINSEQ_1:def 3;
L705: C187 in ( NAT ) by ORDINAL1:def 12;
L706: C187 in ( dom ( R5 (#) C186 ) ) by L705 , L699 , L702 , L704;
L707: C187 in ( dom C186 ) by L706 , L704 , FINSEQ_1:def 3;
L708: ( C186 . C187 ) = ( C186 /. C187 ) by L707 , PARTFUN1:def 6;
reconsider D83 = ( C186 . C187 ) as (Element of R2) by L708;
L709: ( ( R4 * C186 ) . C187 ) = ( R4 . D83 ) by L707 , FUNCT_1:13;
reconsider D84 = ( ( R4 * C186 ) . C187 ) as (Element of R3) by L709;
L710: ( ( R5 (#) C186 ) . C187 ) = ( ( R5 . D82 ) * D82 ) by L706 , VECTSP_6:def 5;
L711: ( D81 . C187 ) = ( R4 . ( ( R5 . D82 ) * D82 ) ) by L710 , L706 , FUNCT_1:13
.= ( ( R5 . D82 ) * ( R4 . D82 ) ) by MOD_2:def 2
.= ( ( R5 . D83 ) * D84 ) by L707 , L708 , FUNCT_1:13;
L712: (( C186 . C187 ) in ( rng C186 ) & ( ( R4 * C186 ) . C187 ) = ( R4 . ( C186 . C187 ) )) by L707 , FUNCT_1:3 , FUNCT_1:13;
L713: ( ( R4 @ R5 ) . ( ( R4 * C186 ) . C187 ) ) = ( R5 . ( C186 . C187 ) ) by L712 , L696 , L697 , L647;
L714: ( dom R4 ) = ( [#] R2 ) by L95;
L715: ( dom ( R4 * C186 ) ) = ( dom C186 ) by L714 , L696 , RELAT_1:27;
L716: ( ( R4 * C186 ) /. C187 ) = ( ( R4 * C186 ) . C187 ) by L715 , L707 , PARTFUN1:def 6;
thus L717: thesis by L716 , L704 , L706 , L711 , L701 , L713 , VECTSP_6:def 5;
end;
thus L718: thesis by L700 , L699 , L698 , FINSEQ_1:14;
end;
theorem
L719: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for R5 being (Linear_Combination of R2) holds (( R4 | ( Carrier R5 ) ) is  one-to-one implies ( R4 .: ( Carrier R5 ) ) = ( Carrier ( R4 @ R5 ) )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let R5 being (Linear_Combination of R2);
assume L720: ( R4 | ( Carrier R5 ) ) is  one-to-one;
L721: ( R4 .: ( Carrier R5 ) ) c= ( Carrier ( R4 @ R5 ) )
proof
let C188 being set;
assume L722: C188 in ( R4 .: ( Carrier R5 ) );
consider C189 being set such that L723: C189 in ( dom R4 ) and L724: C189 in ( Carrier R5 ) and L725: ( R4 . C189 ) = C188 by L722 , FUNCT_1:def 6;
reconsider D85 = C189 as (Element of R2) by L723;
L726: (( ( R4 @ R5 ) . ( R4 . D85 ) ) = ( R5 . D85 ) & ( R5 . D85 ) <> ( 0. R1 )) by L720 , L724 , L647 , VECTSP_6:2;
thus L727: thesis by L726 , L725;
end;
L728: ( Carrier ( R4 @ R5 ) ) c= ( R4 .: ( Carrier R5 ) ) by L557;
thus L729: thesis by L728 , L721 , XBOOLE_0:def 10;
end;
theorem
L730: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B119 being (Subset of R2) holds (for B120 being (Basis of R2) holds (for B121 being (Linear_Combination of ( B120 \ B119 )) holds ((B119 is (Basis of ( ker R4 )) & B119 c= B120) implies ( R4 . ( Sum B121 ) ) = ( Sum ( R4 @ B121 ) )))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C190 being (Subset of R2);
let C191 being (Basis of R2);
let C192 being (Linear_Combination of ( C191 \ C190 ));
assume L731: (C190 is (Basis of ( ker R4 )) & C190 c= C191);
L732: ( R4 | ( C191 \ C190 ) ) is  one-to-one by L731 , L253;
L733: ( Carrier C192 ) c= ( C191 \ C190 ) by VECTSP_6:def 4;
L734: ( ( R4 | ( C191 \ C190 ) ) | ( Carrier C192 ) ) = ( R4 | ( Carrier C192 ) ) by L733 , RELAT_1:74;
L735: ( R4 | ( Carrier C192 ) ) is  one-to-one by L734 , L732 , FUNCT_1:52;
consider C193 being (FinSequence of R2) such that L736: C193 is  one-to-one and L737: ( rng C193 ) = ( Carrier C192 ) and L738: ( Sum C192 ) = ( Sum ( C192 (#) C193 ) ) by VECTSP_6:def 6;
set D86 = ( R4 * C193 );
reconsider D87 = D86 as (FinSequence of R3);
L739: ( rng D87 ) = ( R4 .: ( Carrier C192 ) ) by L737 , RELAT_1:127
.= ( Carrier ( R4 @ C192 ) ) by L735 , L719;
L740: ( dom R4 ) = ( [#] R2 ) by L95;
L741: D87 is  one-to-one by L740 , L736 , L737 , L732 , L734 , L1 , FUNCT_1:52;
L742: ( Sum ( R4 @ C192 ) ) = ( Sum ( ( R4 @ C192 ) (#) D87 ) ) by L741 , L739 , VECTSP_6:def 6;
L743: ( R4 * ( C192 (#) C193 ) ) = ( ( R4 @ C192 ) (#) D87 ) by L737 , L735 , L695;
thus L744: thesis by L743 , L738 , L742 , MATRLIN:16;
end;
theorem
L745: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for B122 being (Subset of R2) holds (B122 is  linearly-dependent implies (ex B123 being (Linear_Combination of B122) st (( Carrier B123 ) <> ( {} ) & ( Sum B123 ) = ( 0. R2 )))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let C194 being (Subset of R2);
assume L746: C194 is  linearly-dependent;
L747: (not (for B124 being (Linear_Combination of C194) holds (( Sum B124 ) = ( 0. R2 ) implies ( Carrier B124 ) = ( {} )))) by L746 , VECTSP_7:def 1;
thus L748: thesis by L747;
end;
definition
let C195 being Field;
let C196 , C197 being (VectSp of C195);
let C198 being (Subset of C196);
let C199 being (linear-transformation of C196 , C197);
let C200 being (Linear_Combination of ( C199 .: C198 ));
assume L749: ( C199 | C198 ) is  one-to-one;
func C199 # C200 -> (Linear_Combination of C198) equals 
:L750: ( ( C200 * C199 ) +* ( ( C196 \ C198 ) --> ( 0. C195 ) ) );
coherence
proof
L751: (( rng ( C200 * C199 ) ) c= ( rng C200 ) & ( rng C200 ) c= ( [#] C195 )) by FUNCT_2:92 , RELAT_1:26;
L752: ( rng ( C200 * C199 ) ) c= ( [#] C195 ) by L751 , XBOOLE_1:1;
L753: ( dom C200 ) = ( [#] C197 ) by FUNCT_2:92;
L754: ( rng C199 ) c= ( dom C200 ) by L753 , L95;
L755: ( dom ( C200 * C199 ) ) = ( dom C199 ) by L754 , RELAT_1:27;
set D88 = ( ( C200 * C199 ) +* ( ( C196 \ C198 ) --> ( 0. C195 ) ) );
L756: ( dom ( ( C196 \ C198 ) --> ( 0. C195 ) ) ) = ( ( [#] C196 ) \ C198 ) by FUNCOP_1:13;
L757: ( rng ( ( C196 \ C198 ) --> ( 0. C195 ) ) ) c= { ( 0. C195 ) } by FUNCOP_1:13;
L758: ( rng ( ( C196 \ C198 ) --> ( 0. C195 ) ) ) c= ( [#] C195 ) by L757 , XBOOLE_1:1;
L759: (( rng D88 ) c= ( ( rng ( C200 * C199 ) ) \/ ( rng ( ( C196 \ C198 ) --> ( 0. C195 ) ) ) ) & ( ( rng ( C200 * C199 ) ) \/ ( rng ( ( C196 \ C198 ) --> ( 0. C195 ) ) ) ) c= ( [#] C195 )) by L758 , L752 , FUNCT_4:17 , XBOOLE_1:8;
L760: ( rng D88 ) c= ( [#] C195 ) by L759 , XBOOLE_1:1;
L761: (( dom C199 ) = ( [#] C196 ) & ( ( [#] C196 ) \/ ( ( [#] C196 ) \ C198 ) ) = ( [#] C196 )) by L95 , XBOOLE_1:12;
L762: ( dom D88 ) = ( [#] C196 ) by L761 , L755 , L756 , FUNCT_4:def 1;
reconsider D89 = D88 as (Element of ( Funcs (( [#] C196 ) , ( [#] C195 )) )) by L762 , L760 , FUNCT_2:def 2;
L763: (ex B125 being  finite (Subset of C196) st (for B126 being (Element of C196) holds ((not B126 in B125) implies ( D89 . B126 ) = ( 0. C195 ))))
proof
set D90 = { B127 where B127 is (Element of C196) : ( D89 . B127 ) <> ( 0. C195 ) };
L764: D90 c= ( [#] C196 )
proof
let C201 being set;
assume L765: C201 in D90;
L766: (ex B128 being (Element of C196) st (B128 = C201 & ( D89 . B128 ) <> ( 0. C195 ))) by L765;
thus L767: thesis by L766;
end;
reconsider D91 = D90 as (Subset of C196) by L764;
L768: (ex B129 being Function st (B129 is  one-to-one & ( dom B129 ) = D91 & ( rng B129 ) c= ( Carrier C200 )))
proof
set D92 = ( ( C199 " ( Carrier C200 ) ) /\ C198 );
set D93 = ( C199 | D92 );
take D93;
L769: D91 c= D92
proof
let C202 being set;
assume that
L770: C202 in D91;
L771: (ex B130 being (Element of C196) st (B130 = C202 & ( D89 . B130 ) <> ( 0. C195 ))) by L770;
reconsider D94 = C202 as (Element of C196) by L770;
L772:
now
assume L773: (not D94 in C198);
L774: D94 in ( C196 \ C198 ) by L773 , XBOOLE_0:def 5;
L775: D94 in ( dom ( ( C196 \ C198 ) --> ( 0. C195 ) ) ) by L774 , FUNCOP_1:13;
L776: ( D89 . D94 ) = ( ( ( C196 \ C198 ) --> ( 0. C195 ) ) . D94 ) by L775 , FUNCT_4:13;
thus L777: contradiction by L776 , L771 , L774 , FUNCOP_1:7;
end;
L778: (not D94 in ( C196 \ C198 )) by L772 , XBOOLE_0:def 5;
L779: ( D89 . D94 ) = ( ( C200 * C199 ) . D94 ) by L778 , L756 , FUNCT_4:11;
L780: ( dom C199 ) = ( [#] C196 ) by L95;
L781: ( ( C200 * C199 ) . D94 ) = ( C200 . ( C199 . D94 ) ) by L780 , FUNCT_1:13;
L782: ( C199 . D94 ) in ( Carrier C200 ) by L781 , L771 , L779;
L783: D94 in ( C199 " ( Carrier C200 ) ) by L782 , L780 , FUNCT_1:def 7;
thus L784: thesis by L783 , L772 , XBOOLE_0:def 4;
end;
L785: ( dom C199 ) = ( [#] C196 ) by L95;
L786: ( rng D93 ) c= ( Carrier C200 )
proof
let C203 being set;
assume L787: C203 in ( rng D93 );
consider C204 being set such that L788: C204 in ( dom D93 ) and L789: C203 = ( D93 . C204 ) by L787 , FUNCT_1:def 3;
L790: C204 in ( C199 " ( Carrier C200 ) ) by L788 , XBOOLE_0:def 4;
L791: ( C199 . C204 ) in ( Carrier C200 ) by L790 , FUNCT_1:def 7;
thus L792: thesis by L791 , L788 , L789 , FUNCT_1:49;
end;
L793: D92 c= D91
proof
let C205 being set;
assume that
L794: C205 in D92;
L795: C205 in C198 by L794 , XBOOLE_0:def 4;
L796: C205 in ( C199 " ( Carrier C200 ) ) by L794 , XBOOLE_0:def 4;
L797: C205 in ( dom C199 ) by L796 , FUNCT_1:def 7;
L798: ( C199 . C205 ) in ( Carrier C200 ) by L796 , FUNCT_1:def 7;
reconsider D95 = C205 as (Element of C196) by L794;
L799: ( C200 . ( C199 . D95 ) ) <> ( 0. C195 ) by L798 , VECTSP_6:2;
L800: (not D95 in ( dom ( ( C196 \ C198 ) --> ( 0. C195 ) ) )) by L795 , XBOOLE_0:def 5;
L801: ( D89 . D95 ) = ( ( C200 * C199 ) . D95 ) by L800 , FUNCT_4:11;
L802: ( ( C200 * C199 ) . D95 ) = ( C200 . ( C199 . D95 ) ) by L797 , FUNCT_1:13;
thus L803: thesis by L802 , L801 , L799;
end;
L804: D92 = D91 by L793 , L769 , XBOOLE_0:def 10;
thus L805: thesis by L804 , L749 , L785 , L786 , L26 , RELAT_1:62 , XBOOLE_1:17;
end;
L806: ( card D91 ) c= ( card ( Carrier C200 ) ) by L768 , CARD_1:10;
reconsider D96 = D91 as  finite (Subset of C196) by L806;
take D96;
thus L807: thesis;
end;
reconsider D97 = D89 as (Linear_Combination of C196) by L763 , VECTSP_6:def 1;
L808: ( Carrier D97 ) c= C198
proof
let C206 being set;
assume that
L809: C206 in ( Carrier D97 );
reconsider D98 = C206 as (Element of C196) by L809;
L810:
now
assume L811: (not D98 in C198);
L812: D98 in ( C196 \ C198 ) by L811 , XBOOLE_0:def 5;
L813: ( D97 . D98 ) = ( ( ( C196 \ C198 ) --> ( 0. C195 ) ) . D98 ) by L812 , L756 , FUNCT_4:13
.= ( 0. C195 ) by L812 , FUNCOP_1:7;
thus L814: contradiction by L813 , L809 , VECTSP_6:2;
end;
thus L815: thesis by L810;
end;
thus L816: thesis by L808 , VECTSP_6:def 4;
end;
end;
theorem
L818: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B131 being (Subset of R2) holds (for B132 being (Linear_Combination of ( R4 .: B131 )) holds (for B133 being (Element of R2) holds ((B133 in B131 & ( R4 | B131 ) is  one-to-one) implies ( ( R4 # B132 ) . B133 ) = ( B132 . ( R4 . B133 ) )))))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C207 being (Subset of R2);
let C208 being (Linear_Combination of ( R4 .: C207 ));
let C209 being (Element of R2);
assume L819: (C209 in C207 & ( R4 | C207 ) is  one-to-one);
L820: ((not C209 in ( dom ( ( R2 \ C207 ) --> ( 0. R1 ) ) )) & ( R4 # C208 ) = ( ( C208 * R4 ) +* ( ( R2 \ C207 ) --> ( 0. R1 ) ) )) by L819 , L750 , XBOOLE_0:def 5;
L821: ( ( R4 # C208 ) . C209 ) = ( ( C208 * R4 ) . C209 ) by L820 , FUNCT_4:11;
L822: ( dom R4 ) = ( [#] R2 ) by L95;
thus L823: thesis by L822 , L821 , FUNCT_1:13;
end;
theorem
L824: (for R1 being Field holds (for R2 being (VectSp of R1) holds (for R3 being (VectSp of R1) holds (for R4 being (linear-transformation of R2 , R3) holds (for B134 being (Subset of R2) holds (for B135 being (Linear_Combination of ( R4 .: B134 )) holds (( R4 | B134 ) is  one-to-one implies ( R4 @ ( R4 # B135 ) ) = B135)))))))
proof
let R1 being Field;
let R2 being (VectSp of R1);
let R3 being (VectSp of R1);
let R4 being (linear-transformation of R2 , R3);
let C210 being (Subset of R2);
let C211 being (Linear_Combination of ( R4 .: C210 ));
assume that
L825: ( R4 | C210 ) is  one-to-one;
let C212 being (Element of R3);
set D99 = ( R4 @ ( R4 # C211 ) );
per cases ;
suppose L826: C212 in ( Carrier C211 );

L827: ( C211 . C212 ) <> ( 0. R1 ) by L826 , VECTSP_6:2;
L828: ( dom ( R4 # C211 ) ) = ( [#] R2 ) by FUNCT_2:92;
L829: ( Carrier C211 ) c= ( R4 .: C210 ) by VECTSP_6:def 4;
consider C213 being set such that L830: C213 in ( dom R4 ) and L831: C213 in C210 and L832: C212 = ( R4 . C213 ) by L829 , L826 , FUNCT_1:def 6;
reconsider D100 = C213 as (Element of R2) by L830;
consider C214 being (Subset of R2) such that L833: C214 misses C210 and L834: ( R4 " { ( R4 . D100 ) } ) = ( { D100 } \/ C214 ) by L825 , L831 , L605;
L835: ( ( R4 # C211 ) . D100 ) = ( C211 . ( R4 . D100 ) ) by L825 , L831 , L818;
L836: ( ( R4 # C211 ) .: { D100 } ) = ( Im (( R4 # C211 ) , D100) )
.= { ( ( R4 # C211 ) . D100 ) } by L828 , FUNCT_1:59;
L837: ( D99 . C212 ) = ( Sum ( ( R4 # C211 ) .: ( R4 " { ( R4 . D100 ) } ) ) ) by L832 , L468
.= ( Sum ( { ( C211 . ( R4 . D100 ) ) } \/ ( ( R4 # C211 ) .: C214 ) ) ) by L834 , L835 , L836 , RELAT_1:120;
per cases ;
suppose L838: C214 = ( {} );

L839: ( D99 . C212 ) = ( Sum ( { ( C211 . ( R4 . D100 ) ) } \/ ( {} R1 ) ) ) by L838 , L837
.= ( C211 . C212 ) by L832 , RLVECT_2:9;
thus L840: thesis by L839;
end;
suppose L841: C214 <> ( {} );

L842: ( Carrier ( R4 # C211 ) ) c= C210 by VECTSP_6:def 4;
L843: C214 misses ( Carrier ( R4 # C211 ) ) by L842 , L833 , XBOOLE_1:63;
L844: ( D99 . C212 ) = ( Sum ( { ( C211 . ( R4 . D100 ) ) } \/ { ( 0. R1 ) } ) ) by L843 , L837 , L841 , L628
.= ( ( Sum { ( C211 . ( R4 . D100 ) ) } ) + ( Sum { ( 0. R1 ) } ) ) by L827 , L832 , RLVECT_2:12 , ZFMISC_1:11
.= ( ( C211 . ( R4 . D100 ) ) + ( Sum { ( 0. R1 ) } ) ) by RLVECT_2:9
.= ( ( C211 . ( R4 . D100 ) ) + ( 0. R1 ) ) by RLVECT_2:9
.= ( C211 . C212 ) by L832 , RLVECT_1:4;
thus L845: thesis by L844;
end;
end;
suppose L847: (not C212 in ( Carrier C211 ));

L848: ( C211 . C212 ) = ( 0. R1 ) by L847;
L849:
now
assume L850: ( D99 . C212 ) <> ( 0. R1 );
L851: C212 in ( Carrier D99 ) by L850;
L852: ( R4 " { C212 } ) meets ( Carrier ( R4 # C211 ) ) by L851 , L635;
consider C215 being (Element of R2) such that L853: C215 in ( R4 " { C212 } ) and L854: C215 in ( Carrier ( R4 # C211 ) ) by L852 , L31;
L855: ( R4 . C215 ) in { C212 } by L853 , FUNCT_1:def 7;
L856: ( R4 . C215 ) = C212 by L855 , TARSKI:def 1;
L857: ( Carrier ( R4 # C211 ) ) c= C210 by VECTSP_6:def 4;
L858: ( R4 | ( Carrier ( R4 # C211 ) ) ) is  one-to-one by L857 , L825 , L26;
L859: ( D99 . C212 ) = ( ( R4 # C211 ) . C215 ) by L858 , L854 , L856 , L647
.= ( 0. R1 ) by L825 , L848 , L854 , L856 , L857 , L818;
thus L860: contradiction by L859 , L850;
end;
thus L861: thesis by L849 , L847;
end;
end;
begin
definition
let C216 being Field;
let C217 , C218 being  finite-dimensional (VectSp of C216);
let C219 being (linear-transformation of C217 , C218);
func rank C219 -> Nat equals 
( dim ( im C219 ) );
coherence;
func nullity C219 -> Nat equals 
( dim ( ker C219 ) );
coherence;
end;
::$N Rank-nullity theorem
theorem
L864: (for R1 being Field holds (for B136 , B137 being  finite-dimensional (VectSp of R1) holds (for B138 being (linear-transformation of B136 , B137) holds ( dim B136 ) = ( ( rank B138 ) + ( nullity B138 ) ))))
proof
let R1 being Field;
let C220 , C221 being  finite-dimensional (VectSp of R1);
let C222 being (linear-transformation of C220 , C221);
set D101 = the  finite (Basis of ( ker C222 ));
reconsider D102 = D101 as (Subset of C220) by L222;
consider C223 being (Basis of C220) such that L865: D101 c= C223 by VECTSP_9:13;
reconsider D103 = C223 as  finite (Subset of C220) by VECTSP_9:20;
reconsider D104 = ( D103 \ D102 ) as  finite (Subset of D103) by XBOOLE_1:36;
reconsider D105 = D104 as  finite (Subset of C220);
L866: D103 = ( D101 \/ D105 ) by L865 , XBOOLE_1:45;
reconsider D106 = D103 as  finite (Basis of C220);
reconsider D107 = D101 as  finite (Basis of ( ker C222 ));
reconsider D108 = ( C222 .: D105 ) as  finite (Subset of C221);
L867: ( C222 | D105 ) is  one-to-one by L865 , L253;
L868: D108 is  linearly-independent
proof
assume L869: D108 is  linearly-dependent;
consider C224 being (Linear_Combination of D108) such that L870: ( Carrier C224 ) <> ( {} ) and L871: ( Sum C224 ) = ( 0. C221 ) by L869 , L745;
L872: (ex B139 being (Linear_Combination of D105) st C224 = ( C222 @ B139 ))
proof
reconsider D109 = C224 as (Linear_Combination of ( C222 .: D105 ));
set D110 = ( C222 # D109 );
take D110;
thus L873: thesis by L867 , L824;
end;
consider C225 being (Linear_Combination of ( D106 \ D102 )) such that L874: C224 = ( C222 @ C225 ) by L872;
L875: ( C222 . ( Sum C225 ) ) = ( 0. C221 ) by L865 , L871 , L874 , L730;
L876: ( Sum C225 ) in ( ker C222 ) by L875 , L132;
L877: ( Sum C225 ) in ( Lin D107 ) by L876 , VECTSP_7:def 3;
L878: ( Sum C225 ) in ( Lin D102 ) by L877 , VECTSP_9:17;
consider C226 being (Linear_Combination of D102) such that L879: ( Sum C225 ) = ( Sum C226 ) by L878 , VECTSP_7:7;
L880: (( Carrier ( C225 - C226 ) ) c= ( ( Carrier C225 ) \/ ( Carrier C226 ) ) & ( ( D106 \ D102 ) \/ D102 ) = D106) by L865 , VECTSP_6:41 , XBOOLE_1:45;
L881: (( Carrier C225 ) c= ( D106 \ D102 ) & ( Carrier C226 ) c= D107) by VECTSP_6:def 4;
L882: ( ( Carrier C225 ) \/ ( Carrier C226 ) ) c= ( ( D106 \ D102 ) \/ D107 ) by L881 , XBOOLE_1:13;
L883: ( Carrier ( C225 - C226 ) ) c= D106 by L882 , L880 , XBOOLE_1:1;
reconsider D111 = ( C225 - C226 ) as (Linear_Combination of D106) by L883 , VECTSP_6:def 4;
L884: D106 is  linearly-independent by VECTSP_7:def 3;
L885: ( ( Sum C225 ) - ( Sum C226 ) ) = ( 0. C220 ) by L879 , VECTSP_1:19;
L886: ( Sum ( C225 - C226 ) ) = ( 0. C220 ) by L885 , VECTSP_6:47;
L887: ( Carrier D111 ) = ( {} ) by L886 , L884 , VECTSP_7:def 1;
L888: D102 misses ( D106 \ D102 ) by XBOOLE_1:79;
L889: ( Carrier ( C225 - C226 ) ) = ( ( Carrier C225 ) \/ ( Carrier C226 ) ) by L888 , L881 , L564 , XBOOLE_1:64;
L890: ( Carrier C225 ) = ( {} ) by L889 , L887;
L891: ( C222 .: ( Carrier C225 ) ) = ( {} ) by L890;
thus L892: thesis by L891 , L870 , L874 , L557 , XBOOLE_1:3;
end;
L893: ( dom C222 ) = ( [#] C220 ) by L95;
L894: D105 c= ( dom ( C222 | D105 ) ) by L893 , RELAT_1:62;
L895: D105 , ( ( C222 | D105 ) .: D105 ) are_equipotent  by L894 , L867 , CARD_1:33;
L896: D105 , D108 are_equipotent  by L895 , RELAT_1:129;
L897: ( card D108 ) = ( card D105 ) by L896 , CARD_1:5;
reconsider D112 = D108 as  finite (Subset of ( im C222 )) by L177;
reconsider D113 = ( Lin D112 ) as  strict (Subspace of ( im C222 ));
L898: (for B140 being (Element of ( im C222 )) holds B140 in D113)
proof
reconsider D114 = D107 as (Subset of C220) by L222;
let C227 being (Element of ( im C222 ));
reconsider D115 = C227 as (Element of C221) by VECTSP_4:10;
reconsider D116 = D112 as (Subset of C221);
L899: C227 in ( im C222 ) by STRUCT_0:def 5;
consider C228 being (Element of C220) such that L900: ( C222 . C228 ) = D115 by L899 , L180;
L901: C220 is_the_direct_sum_of ( Lin D114 ) , ( Lin ( D106 \ D114 ) ) by L865 , L568;
L902: ( (Omega). C220 ) = ( ( Lin D114 ) + ( Lin ( D106 \ D114 ) ) ) by L901 , VECTSP_5:def 4;
L903: C228 in ( (Omega). C220 ) by STRUCT_0:def 5;
consider C229 , C230 being (Element of C220) such that L904: C229 in ( Lin D114 ) and L905: C230 in ( Lin ( D106 \ D114 ) ) and L906: C228 = ( C229 + C230 ) by L903 , L902 , VECTSP_5:1;
consider C231 being (Linear_Combination of ( D106 \ D114 )) such that L907: C230 = ( Sum C231 ) by L905 , VECTSP_7:7;
L908: ( Lin D107 ) = ( ker C222 ) by VECTSP_7:def 3;
L909: C229 in ( ker C222 ) by L908 , L904 , VECTSP_9:17;
L910: ( C222 . C229 ) = ( 0. C221 ) by L909 , L132;
L911: (( C222 @ C231 ) is (Linear_Combination of ( C222 .: ( Carrier C231 ) )) & ( Carrier C231 ) c= ( D106 \ D114 )) by L529 , VECTSP_6:def 4;
reconsider D117 = ( C222 @ C231 ) as (Linear_Combination of D116) by L911 , RELAT_1:123 , VECTSP_6:4;
L912: ( C222 . C228 ) = ( ( C222 . C229 ) + ( C222 . C230 ) ) by L906 , VECTSP_1:def 20;
L913: ( C222 . C228 ) = ( C222 . C230 ) by L912 , L910 , RLVECT_1:4;
L914: (ex B141 being (Linear_Combination of D116) st C227 = ( Sum B141 ))
proof
take D117;
thus L915: thesis by L865 , L900 , L913 , L907 , L730;
end;
L916: C227 in ( Lin D116 ) by L914 , VECTSP_7:7;
thus L917: thesis by L916 , VECTSP_9:17;
end;
L918: ( Lin D112 ) = ( im C222 ) by L898 , VECTSP_4:32;
reconsider D118 = D112 as  linearly-independent (Subset of ( im C222 )) by L868 , VECTSP_9:12;
reconsider D119 = D118 as  finite (Basis of ( im C222 )) by L918 , VECTSP_7:def 3;
L919: (( nullity C222 ) = ( card D107 ) & ( rank C222 ) = ( card D119 )) by VECTSP_9:def 1;
L920: ( dim C220 ) = ( card D106 ) by VECTSP_9:def 1
.= ( ( rank C222 ) + ( nullity C222 ) ) by L866 , L897 , L919 , CARD_2:40 , XBOOLE_1:79;
thus L921: thesis by L920;
end;
theorem
L922: (for R1 being Field holds (for B142 , B143 being  finite-dimensional (VectSp of R1) holds (for B144 being (linear-transformation of B142 , B143) holds (B144 is  one-to-one implies ( dim B142 ) = ( rank B144 )))))
proof
let R1 being Field;
let C232 , C233 being  finite-dimensional (VectSp of R1);
let C234 being (linear-transformation of C232 , C233);
assume L923: C234 is  one-to-one;
L924: ( ker C234 ) = ( (0). C232 ) by L923 , L198;
L925: ( nullity C234 ) = ( 0 ) by L924 , L208;
L926: ( dim C232 ) = ( ( rank C234 ) + ( nullity C234 ) ) by L864
.= ( rank C234 ) by L925;
thus L927: thesis by L926;
end;
