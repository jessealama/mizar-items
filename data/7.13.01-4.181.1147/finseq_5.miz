:: Some Properties of Restrictions of Finite Sequences
::  by Czes\law Byli\'nski
::
:: Received January 25, 1995
:: Copyright (c) 1995-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, NAT_1, XXREAL_0, ARYTM_1, ARYTM_3, SUBSET_1, FINSEQ_1,
      CARD_1, FUNCT_1, RELAT_1, FINSEQ_4, ZFMISC_1, XBOOLE_0, ORDINAL4, TARSKI,
      PARTFUN1, RFINSEQ, FINSEQ_5;
 notations TARSKI, XBOOLE_0, SUBSET_1, XCMPLX_0, NUMBERS, ORDINAL1, NAT_1,
      RELAT_1, FUNCT_1, PARTFUN1, FINSEQ_1, FINSEQ_4, ZFMISC_1, RFINSEQ, NAT_D,
      XXREAL_0;
 constructors XXREAL_0, NAT_1, INT_1, PARTFUN1, FINSEQ_4, ZFMISC_1, RFINSEQ,
      NAT_D, REAL_1, RELSET_1;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, ORDINAL1, XXREAL_0,
      XREAL_0, NAT_1, INT_1, FINSEQ_1, CARD_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, FUNCT_1, XBOOLE_0, FINSEQ_1;
 theorems TARSKI, NAT_1, PARTFUN2, FUNCT_1, FINSEQ_1, FINSEQ_2, FINSEQ_3,
      FINSEQ_4, RFINSEQ, RELAT_1, INT_1, XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0,
      ORDINAL1, PARTFUN1, XREAL_0, NAT_D;
 schemes FINSEQ_1;

begin
theorem
L1: (for B1 , B2 being Nat holds (B1 <= B2 implies ( ( B2 - B1 ) + 1 ) is (Element of ( NAT ))))
proof
let C1 , C2 being Nat;
assume L2: C1 <= C2;
reconsider D1 = ( C2 - C1 ) as (Element of ( NAT )) by L2 , INT_1:5;
L3: ( D1 + 1 ) is (Element of ( NAT ));
thus L4: thesis by L3;
end;
theorem
L5: (for B3 , B4 being Nat holds (B3 in ( Seg B4 ) implies ( ( B4 - B3 ) + 1 ) in ( Seg B4 )))
proof
let C3 , C4 being Nat;
assume L6: C3 in ( Seg C4 );
L7: C3 <= C4 by L6 , FINSEQ_1:1;
reconsider D2 = ( C4 - C3 ) as (Element of ( NAT )) by L7 , INT_1:5;
reconsider D3 = ( D2 + 1 ) as (Element of ( NAT ));
L8:
now
assume L9: D3 = ( C4 + 1 );
L10: ( - ( 0 ) ) = ( - C3 ) by L9;
thus L11: contradiction by L10 , L6 , FINSEQ_1:1;
end;
L12: D2 <= C4 by XREAL_1:43;
L13: D3 <= ( C4 + 1 ) by L12 , XREAL_1:6;
L14: D3 < ( C4 + 1 ) by L13 , L8 , XXREAL_0:1;
L15: (( ( 0 ) + 1 ) <= D3 & D3 <= C4) by L14 , NAT_1:13;
thus L16: thesis by L15;
end;
theorem
L17: (for B5 being Function holds (for B6 , B7 being set holds (( B5 " { B7 } ) = { B6 } implies (B6 in ( dom B5 ) & B7 in ( rng B5 ) & ( B5 . B6 ) = B7))))
proof
let C5 being Function;
let C6 , C7 being set;
assume L18: ( C5 " { C7 } ) = { C6 };
L19: C6 in ( C5 " { C7 } ) by L18 , TARSKI:def 1;
thus L20: C6 in ( dom C5 ) by L19 , FUNCT_1:def 7;
L21: ( C5 . C6 ) in { C7 } by L19 , FUNCT_1:def 7;
L22: ( C5 . C6 ) = C7 by L21 , TARSKI:def 1;
thus L23: thesis by L22 , L20 , FUNCT_1:def 3;
end;
theorem
L24: (for B8 being Function holds (B8 is  one-to-one iff (for B9 being set holds (B9 in ( dom B8 ) implies ( B8 " { ( B8 . B9 ) } ) = { B9 }))))
proof
let C8 being Function;
L25:
now
thus L26:now
assume L27: (for B10 being set holds (B10 in ( dom C8 ) implies C8 is_one-to-one_at B10));
let C9 being set;
assume L28: C9 in ( dom C8 );
L29: C8 is_one-to-one_at C9 by L28 , L27;
thus L30: ( C8 " { ( C8 . C9 ) } ) = { C9 } by L29 , FINSEQ_4:2;
end;
assume L31: (for B11 being set holds (B11 in ( dom C8 ) implies ( C8 " { ( C8 . B11 ) } ) = { B11 }));
let C10 being set;
assume L32: C10 in ( dom C8 );
L33: ( C8 " { ( C8 . C10 ) } ) = { C10 } by L32 , L31;
thus L34: C8 is_one-to-one_at C10 by L33 , L32 , FINSEQ_4:2;
end;
thus L35: thesis by L25 , FINSEQ_4:4;
end;
theorem
L36: (for B12 being Function holds (for B13 , B14 being set holds ((B12 is  one-to-one & B13 in ( rng B12 ) & ( B12 " { B13 } ) = ( B12 " { B14 } )) implies B13 = B14)))
proof
let C11 being Function;
let C12 , C13 being set;
assume that
L37: (C11 is  one-to-one & C12 in ( rng C11 ))
and
L38: ( C11 " { C12 } ) = ( C11 " { C13 } );
consider C14 being set such that L39: ( C11 " { C12 } ) = { C14 } by L37 , FUNCT_1:74;
L40: ( C11 . C14 ) = C12 by L39 , L17;
thus L41: thesis by L40 , L38 , L39 , L17;
end;
registration
let C15 being set;
cluster <* C15 *> ->  trivial;
coherence;
let C16 being set;
cluster <* C15 , C16 *> -> non  trivial;
coherence
proof
L42: ( len <* C15 , C16 *> ) = 2 by FINSEQ_1:44;
thus L43: thesis by L42 , NAT_D:60;
end;
end;
registration
cluster  one-to-one non  empty for FinSequence;
existence
proof
set D4 = <* ( {} ) *>;
L45: D4 is  one-to-one by FINSEQ_3:93;
thus L46: thesis by L45;
end;
end;
theorem
L48: (for B15 being non  empty FinSequence holds (1 in ( dom B15 ) & ( len B15 ) in ( dom B15 )))
proof
let C17 being non  empty FinSequence;
L49: ( len C17 ) >= 1 by NAT_1:14;
thus L50: 1 in ( dom C17 ) by L49 , FINSEQ_3:25;
thus L51: thesis by L49 , FINSEQ_3:25;
end;
theorem
L52: (for B16 being non  empty FinSequence holds (ex B17 being Nat st ( B17 + 1 ) = ( len B16 ))) by NAT_1:6;
theorem
L53: (for B18 being set holds (for B19 being FinSequence holds ( len ( <* B18 *> ^ B19 ) ) = ( 1 + ( len B19 ) )))
proof
let C18 being set;
let C19 being FinSequence;
thus L54: ( len ( <* C18 *> ^ C19 ) ) = ( ( len <* C18 *> ) + ( len C19 ) ) by FINSEQ_1:22
.= ( 1 + ( len C19 ) ) by FINSEQ_1:39;
end;
theorem
L55: (for B20 being FinSequence holds (for B21 , B22 being set holds ((B21 in ( rng B20 ) & B22 in ( rng B20 ) & ( B21 .. B20 ) = ( B22 .. B20 )) implies B21 = B22)))
proof
let C20 being FinSequence;
let C21 , C22 being set;
assume that
L56: C21 in ( rng C20 )
and
L57: C22 in ( rng C20 );
assume L58: ( C21 .. C20 ) = ( C22 .. C20 );
thus L59: C21 = ( C20 . ( C22 .. C20 ) ) by L58 , L56 , FINSEQ_4:19
.= C22 by L57 , FINSEQ_4:19;
end;
theorem
L60: (for R4 being Nat holds (for B23 , B24 being FinSequence holds ((( R4 + 1 ) in ( dom B23 ) & B24 = ( B23 | ( Seg R4 ) )) implies ( B23 | ( Seg ( R4 + 1 ) ) ) = ( B24 ^ <* ( B23 . ( R4 + 1 ) ) *> ))))
proof
let R4 being Nat;
let C23 , C24 being FinSequence;
assume that
L61: ( R4 + 1 ) in ( dom C23 )
and
L62: C24 = ( C23 | ( Seg R4 ) );
reconsider D5 = ( C23 | ( Seg ( R4 + 1 ) ) ) as FinSequence by FINSEQ_1:15;
L63: ( R4 + 1 ) <= ( len C23 ) by L61 , FINSEQ_3:25;
L64: ( len D5 ) = ( R4 + 1 ) by L63 , FINSEQ_1:17;
L65: R4 <= ( R4 + 1 ) by NAT_1:11;
L66: ( Seg R4 ) c= ( Seg ( R4 + 1 ) ) by L65 , FINSEQ_1:5;
L67: (( D5 . ( R4 + 1 ) ) = ( C23 . ( R4 + 1 ) ) & C24 = ( D5 | ( Seg R4 ) )) by L66 , L62 , FINSEQ_1:4 , FUNCT_1:49 , FUNCT_1:51;
thus L68: thesis by L67 , L64 , FINSEQ_3:55;
end;
theorem
L69: (for R1 being Nat holds (for B25 being  one-to-one FinSequence holds (R1 in ( dom B25 ) implies ( ( B25 . R1 ) .. B25 ) = R1)))
proof
let R1 being Nat;
let C25 being  one-to-one FinSequence;
assume L70: R1 in ( dom C25 );
L71: ( C25 . R1 ) in ( rng C25 ) by L70 , FUNCT_1:def 3;
L72: C25 just_once_values ( C25 . R1 ) by L71 , FINSEQ_4:8;
L73: ( C25 <- ( C25 . R1 ) ) = ( ( C25 . R1 ) .. C25 ) by L72 , FINSEQ_4:25;
thus L74: thesis by L73 , L70 , L72 , FINSEQ_4:def 3;
end;
registration
let C26 being non  empty set;
cluster  one-to-one non  empty for (FinSequence of C26);
existence
proof
set D6 = the (Element of C26);
set D7 = <* D6 *>;
L75: D7 is  one-to-one by FINSEQ_3:93;
thus L76: thesis by L75;
end;
end;
theorem
L78: (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds (for R8 being (FinSequence of R5) holds ((( dom R7 ) = ( dom R8 ) & (for R1 being Nat holds (R1 in ( dom R7 ) implies ( R7 /. R1 ) = ( R8 /. R1 )))) implies R7 = R8))))
proof
let R5 being non  empty set;
let R7 being (FinSequence of R5);
let R8 being (FinSequence of R5);
assume that
L79: ( dom R7 ) = ( dom R8 )
and
L80: (for R1 being Nat holds (R1 in ( dom R7 ) implies ( R7 /. R1 ) = ( R8 /. R1 )));
L81:
now
let C27 being Nat;
assume L82: C27 in ( dom R7 );
thus L83: ( R7 . C27 ) = ( R7 /. C27 ) by L82 , PARTFUN1:def 6
.= ( R8 /. C27 ) by L80 , L82
.= ( R8 . C27 ) by L79 , L82 , PARTFUN1:def 6;
end;
thus L84: thesis by L81 , L79 , FINSEQ_1:13;
end;
theorem
L85: (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds (for R8 being (FinSequence of R5) holds ((( len R7 ) = ( len R8 ) & (for R3 being Nat holds ((1 <= R3 & R3 <= ( len R7 )) implies ( R7 /. R3 ) = ( R8 /. R3 )))) implies R7 = R8))))
proof
let R5 being non  empty set;
let R7 being (FinSequence of R5);
let R8 being (FinSequence of R5);
assume that
L86: ( len R7 ) = ( len R8 )
and
L87: (for R3 being Nat holds ((1 <= R3 & R3 <= ( len R7 )) implies ( R7 /. R3 ) = ( R8 /. R3 )));
L88:
now
let C28 being Nat;
assume L89: (1 <= C28 & C28 <= ( len R7 ));
thus L90: ( R7 . C28 ) = ( R7 /. C28 ) by L89 , FINSEQ_4:15
.= ( R8 /. C28 ) by L87 , L89
.= ( R8 . C28 ) by L86 , L89 , FINSEQ_4:15;
end;
thus L91: thesis by L88 , L86 , FINSEQ_1:14;
end;
theorem
L92: (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds (( len R7 ) = 1 implies R7 = <* ( R7 /. 1 ) *>)))
proof
let R5 being non  empty set;
let R7 being (FinSequence of R5);
assume L93: ( len R7 ) = 1;
L94: R7 is non  empty by L93;
L95: 1 in ( dom R7 ) by L94 , L48;
L96: ( R7 . 1 ) = ( R7 /. 1 ) by L95 , PARTFUN1:def 6;
thus L97: thesis by L96 , L93 , FINSEQ_1:40;
end;
theorem
L98: (for B26 being non  empty set holds (for B27 being (Element of B26) holds (for B28 being (FinSequence of B26) holds ( ( <* B27 *> ^ B28 ) /. 1 ) = B27)))
proof
let C29 being non  empty set;
let C30 being (Element of C29);
let C31 being (FinSequence of C29);
L99: ( len ( <* C30 *> ^ C31 ) ) = ( 1 + ( len C31 ) ) by L53;
L100: 1 <= ( len ( <* C30 *> ^ C31 ) ) by L99 , NAT_1:11;
L101: 1 in ( dom ( <* C30 *> ^ C31 ) ) by L100 , FINSEQ_3:25;
L102: ( ( <* C30 *> ^ C31 ) /. 1 ) = ( ( <* C30 *> ^ C31 ) . 1 ) by L101 , PARTFUN1:def 6;
thus L103: thesis by L102 , FINSEQ_1:41;
end;
L104: (for R1 being Nat holds (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds (for R8 being (FinSequence of R5) holds (R1 in ( dom R7 ) implies ( ( R7 ^ R8 ) /. R1 ) = ( R7 /. R1 ))))))
proof
let R1 being Nat;
let R5 being non  empty set;
let R7 being (FinSequence of R5);
let R8 being (FinSequence of R5);
assume L105: R1 in ( dom R7 );
L106: ( dom R7 ) c= ( dom ( R7 ^ R8 ) ) by FINSEQ_1:26;
thus L107: ( ( R7 ^ R8 ) /. R1 ) = ( ( R7 ^ R8 ) . R1 ) by L106 , L105 , PARTFUN1:def 6
.= ( R7 . R1 ) by L105 , FINSEQ_1:def 7
.= ( R7 /. R1 ) by L105 , PARTFUN1:def 6;
end;
theorem
L108: (for B29 being FinSequence holds (for B30 being Nat holds ( len ( B29 | B30 ) ) <= ( len B29 )))
proof
let C32 being FinSequence;
let C33 being Nat;
L109: (C33 <= ( len C32 ) implies ( len ( C32 | C33 ) ) = C33) by FINSEQ_1:59;
thus L110: thesis by L109 , FINSEQ_1:58;
end;
theorem
L111: (for B31 being FinSequence holds (for B32 being Nat holds ( len ( B31 | B32 ) ) <= B32))
proof
let C34 being FinSequence;
let C35 being Nat;
L112: (C35 <= ( len C34 ) implies ( len ( C34 | C35 ) ) = C35) by FINSEQ_1:59;
thus L113: thesis by L112 , FINSEQ_1:58;
end;
theorem
L114: (for B33 being FinSequence holds (for B34 being Nat holds ( dom ( B33 | B34 ) ) c= ( dom B33 )))
proof
let C36 being FinSequence;
let C37 being Nat;
L115: ( C36 | C37 ) c= C36 by RELAT_1:59;
thus L116: thesis by L115 , RELAT_1:11;
end;
theorem
L117: (for B35 being FinSequence holds (for B36 being Nat holds ( rng ( B35 | B36 ) ) c= ( rng B35 )))
proof
let C38 being FinSequence;
let C39 being Nat;
L118: ( C38 | C39 ) c= C38 by RELAT_1:59;
thus L119: thesis by L118 , RELAT_1:11;
end;
theorem
L120: (for B37 being set holds (for B38 being (FinSequence of B37) holds (B38 is non  empty implies ( B38 | 1 ) = <* ( B38 /. 1 ) *>)))
proof
let C40 being set;
let C41 being (FinSequence of C40);
assume L121: C41 is non  empty;
L122: 1 in ( dom C41 ) by L121 , L48;
L123: 1 <= ( len C41 ) by L122 , FINSEQ_3:25;
L124: ( len ( C41 | 1 ) ) = 1 by L123 , FINSEQ_1:59;
L125: 1 in ( dom ( C41 | 1 ) ) by L124 , FINSEQ_3:25;
L126: (( ( C41 | 1 ) /. 1 ) = ( ( C41 | 1 ) . 1 ) & ( C41 /. 1 ) = ( ( C41 | 1 ) /. 1 )) by L125 , FINSEQ_4:70 , PARTFUN1:def 6;
thus L127: thesis by L126 , L124 , FINSEQ_1:40;
end;
theorem
L128: (for R1 being Nat holds (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds (( R1 + 1 ) = ( len R7 ) implies R7 = ( ( R7 | R1 ) ^ <* ( R7 /. ( len R7 ) ) *> )))))
proof
let R1 being Nat;
let R5 being non  empty set;
let R7 being (FinSequence of R5);
assume L129: ( R1 + 1 ) = ( len R7 );
L130: R7 is non  empty by L129;
L131: ( R1 + 1 ) in ( dom R7 ) by L130 , L129 , L48;
L132: ( dom R7 ) = ( Seg ( R1 + 1 ) ) by L129 , FINSEQ_1:def 3;
thus L133: R7 = ( R7 | ( Seg ( R1 + 1 ) ) ) by L132 , RELAT_1:68
.= ( ( R7 | R1 ) ^ <* ( R7 . ( R1 + 1 ) ) *> ) by L131 , L60
.= ( ( R7 | R1 ) ^ <* ( R7 /. ( len R7 ) ) *> ) by L129 , L131 , PARTFUN1:def 6;
end;
L134: (for R1 being Nat holds (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds (R7 is  one-to-one implies ( R7 | R1 ) is  one-to-one))))
proof
let R1 being Nat;
let R5 being non  empty set;
let R7 being (FinSequence of R5);
assume L135: R7 is  one-to-one;
L136:
now
L137: ( dom ( R7 | R1 ) ) c= ( dom R7 ) by L114;
let C42 , C43 being (Element of ( NAT ));
assume that
L138: C42 in ( dom ( R7 | R1 ) )
and
L139: C43 in ( dom ( R7 | R1 ) )
and
L140: ( ( R7 | R1 ) /. C42 ) = ( ( R7 | R1 ) /. C43 );
L141: ( R7 /. C42 ) = ( ( R7 | R1 ) /. C42 ) by L138 , FINSEQ_4:70
.= ( R7 /. C43 ) by L139 , L140 , FINSEQ_4:70;
thus L142: C42 = C43 by L141 , L135 , L138 , L139 , L137 , PARTFUN2:10;
end;
thus L143: thesis by L136 , PARTFUN2:9;
end;
registration
let R1 being Nat;
let R5 being non  empty set;
let C44 being  one-to-one (FinSequence of R5);
cluster ( C44 | R1 ) ->  one-to-one;
coherence by L134;
end;
theorem
L145: (for R1 being Nat holds (for B39 being set holds (for B40 , B41 being (FinSequence of B39) holds (R1 <= ( len B40 ) implies ( ( B40 ^ B41 ) | R1 ) = ( B40 | R1 )))))
proof
let R1 being Nat;
let C45 being set;
let C46 , C47 being (FinSequence of C45);
assume L146: R1 <= ( len C46 );
L147: ( len ( C46 | R1 ) ) = R1 by L146 , FINSEQ_1:59;
L148: ( dom ( C46 | R1 ) ) = ( Seg R1 ) by L147 , FINSEQ_1:def 3;
L149:
now
let C48 being Nat;
assume L150: C48 in ( dom ( C46 | R1 ) );
L151: C48 <= R1 by L150 , L148 , FINSEQ_1:1;
L152: C48 <= ( len C46 ) by L151 , L146 , XXREAL_0:2;
L153: (C48 in ( NAT ) & 1 <= C48) by L148 , L150 , FINSEQ_1:1;
L154: C48 in ( Seg ( len C46 ) ) by L153 , L152;
L155: C48 in ( dom C46 ) by L154 , FINSEQ_1:def 3;
thus L156: ( ( ( C46 ^ C47 ) | R1 ) . C48 ) = ( ( C46 ^ C47 ) . C48 ) by L148 , L150 , FUNCT_1:49
.= ( C46 . C48 ) by L155 , FINSEQ_1:def 7
.= ( ( C46 | R1 ) . C48 ) by L148 , L150 , FUNCT_1:49;
end;
L157: R1 <= ( ( len C46 ) + ( len C47 ) ) by L146 , NAT_1:12;
L158: R1 <= ( len ( C46 ^ C47 ) ) by L157 , FINSEQ_1:22;
L159: ( len ( ( C46 ^ C47 ) | R1 ) ) = R1 by L158 , FINSEQ_1:59;
thus L160: thesis by L159 , L147 , L149 , FINSEQ_2:9;
end;
theorem
L161: (for B42 being set holds (for B43 , B44 being (FinSequence of B42) holds ( ( B43 ^ B44 ) | ( len B43 ) ) = B43))
proof
let C49 being set;
let C50 , C51 being (FinSequence of C49);
thus L162: C50 = ( C50 | ( len C50 ) ) by FINSEQ_2:20
.= ( ( C50 ^ C51 ) | ( len C50 ) ) by L145;
end;
theorem
L163: (for R5 being non  empty set holds (for R6 being (Element of R5) holds (for B45 being set holds (for B46 being (FinSequence of B45) holds (R6 in ( rng B46 ) implies ( ( B46 -| R6 ) ^ <* R6 *> ) = ( B46 | ( R6 .. B46 ) ))))))
proof
let R5 being non  empty set;
let R6 being (Element of R5);
let C52 being set;
let C53 being (FinSequence of C52);
assume L164: R6 in ( rng C53 );
consider C54 being Nat such that L165: C54 = ( ( R6 .. C53 ) - 1 ) and L166: ( C53 -| R6 ) = ( C53 | ( Seg C54 ) ) by L164 , FINSEQ_4:def 5;
L167: (( C54 + 1 ) in ( dom C53 ) & ( C53 . ( C54 + 1 ) ) = R6) by L164 , L165 , FINSEQ_4:19 , FINSEQ_4:20;
thus L168: thesis by L167 , L165 , L166 , L60;
end;
theorem
L169: (for R1 being Nat holds (for R5 being non  empty set holds (for R7 being (FinSequence of R5) holds ( len ( R7 /^ R1 ) ) <= ( len R7 ))))
proof
let R1 being Nat;
let R5 being non  empty set;
let R7 being (FinSequence of R5);
per cases ;
suppose L170: R1 <= ( len R7 );

L171: ( len ( R7 /^ R1 ) ) = ( ( len R7 ) - R1 ) by L170 , RFINSEQ:def 1;
L172: ( ( len ( R7 /^ R1 ) ) + R1 ) = ( len R7 ) by L171;
thus L173: thesis by L172 , NAT_1:11;
end;
suppose L174: ( len R7 ) < R1;

L175: ( R7 /^ R1 ) = ( <*> R5 ) by L174 , RFINSEQ:def 1;
thus L176: thesis by L175;
end;
end;
theorem
L178: (for R1 being Nat holds (for R4 being Nat holds (for R9 being set holds (for R10 being (FinSequence of R9) holds (R1 in ( dom ( R10 /^ R4 ) ) implies ( R4 + R1 ) in ( dom R10 ))))))
proof
let R1 being Nat;
let R4 being Nat;
let R9 being set;
let R10 being (FinSequence of R9);
assume L179: R1 in ( dom ( R10 /^ R4 ) );
per cases ;
suppose L180: R4 <= ( len R10 );

L181: R1 <= ( len ( R10 /^ R4 ) ) by L179 , FINSEQ_3:25;
L182: R1 <= ( ( len R10 ) - R4 ) by L181 , L180 , RFINSEQ:def 1;
L183: ( R4 + R1 ) <= ( len R10 ) by L182 , XREAL_1:19;
L184: (1 <= R1 & R1 <= ( R1 + R4 )) by L179 , FINSEQ_3:25 , NAT_1:11;
L185: 1 <= ( R1 + R4 ) by L184 , XXREAL_0:2;
thus L186: thesis by L185 , L183 , FINSEQ_3:25;
end;
suppose L187: R4 > ( len R10 );

L188: ( R10 /^ R4 ) = ( <*> R9 ) by L187 , RFINSEQ:def 1;
thus L189: thesis by L188 , L179;
end;
end;
theorem
L191: (for R1 being Nat holds (for R4 being Nat holds (for R9 being set holds (for R10 being (FinSequence of R9) holds (R1 in ( dom ( R10 /^ R4 ) ) implies ( ( R10 /^ R4 ) /. R1 ) = ( R10 /. ( R4 + R1 ) ))))))
proof
let R1 being Nat;
let R4 being Nat;
let R9 being set;
let R10 being (FinSequence of R9);
assume L192: R1 in ( dom ( R10 /^ R4 ) );
per cases ;
suppose L193: R4 <= ( len R10 );

L194: ( R4 + R1 ) in ( dom R10 ) by L192 , L178;
thus L195: ( ( R10 /^ R4 ) /. R1 ) = ( ( R10 /^ R4 ) . R1 ) by L192 , PARTFUN1:def 6
.= ( R10 . ( R4 + R1 ) ) by L192 , L193 , RFINSEQ:def 1
.= ( R10 /. ( R4 + R1 ) ) by L194 , PARTFUN1:def 6;
end;
suppose L196: R4 > ( len R10 );

L197: ( R10 /^ R4 ) = ( <*> R9 ) by L196 , RFINSEQ:def 1;
thus L198: thesis by L197 , L192;
end;
end;
theorem
L200: (for R9 being set holds (for R10 being (FinSequence of R9) holds ( R10 /^ ( 0 ) ) = R10))
proof
let R9 being set;
let R10 being (FinSequence of R9);
L201: ( 0 ) <= ( len R10 );
L202:
now
let C55 being Nat;
assume L203: (1 <= C55 & C55 <= ( len ( R10 /^ ( 0 ) ) ));
L204: C55 in ( dom ( R10 /^ ( 0 ) ) ) by L203 , FINSEQ_3:25;
thus L205: ( ( R10 /^ ( 0 ) ) . C55 ) = ( R10 . ( C55 + ( 0 ) ) ) by L204 , L201 , RFINSEQ:def 1
.= ( R10 . C55 );
end;
L206: ( len ( R10 /^ ( 0 ) ) ) = ( ( len R10 ) - ( 0 ) ) by RFINSEQ:def 1
.= ( len R10 );
thus L207: thesis by L206 , L202 , FINSEQ_1:14;
end;
theorem
L208: (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (R13 is non  empty implies R13 = ( <* ( R13 /. 1 ) *> ^ ( R13 /^ 1 ) ))))
proof
let R11 being non  empty set;
let R13 being (FinSequence of R11);
assume L209: R13 is non  empty;
L210: ( R13 | 1 ) = <* ( R13 /. 1 ) *> by L209 , L120;
thus L211: thesis by L210 , RFINSEQ:8;
end;
theorem
L212: (for R1 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (( R1 + 1 ) = ( len R13 ) implies ( R13 /^ R1 ) = <* ( R13 /. ( len R13 ) ) *>))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
assume L213: ( R1 + 1 ) = ( len R13 );
L214: R1 <= ( len R13 ) by L213 , NAT_1:11;
L215: ( len ( R13 /^ R1 ) ) = ( ( len R13 ) - R1 ) by L214 , RFINSEQ:def 1
.= 1 by L213;
L216: 1 in ( dom ( R13 /^ R1 ) ) by L215 , FINSEQ_3:25;
thus L217: ( R13 /^ R1 ) = <* ( ( R13 /^ R1 ) /. 1 ) *> by L215 , L92
.= <* ( R13 /. ( len R13 ) ) *> by L213 , L216 , L191;
end;
theorem
L218: (for R1 being Nat holds (for R2 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds ((( R2 + 1 ) = R1 & R1 in ( dom R13 )) implies ( <* ( R13 /. R1 ) *> ^ ( R13 /^ R1 ) ) = ( R13 /^ R2 ))))))
proof
let R1 being Nat;
let R2 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
assume that
L219: ( R2 + 1 ) = R1
and
L220: R1 in ( dom R13 );
set D8 = ( <* ( R13 /. R1 ) *> ^ ( R13 /^ R1 ) );
L221: R1 <= ( len R13 ) by L220 , FINSEQ_3:25;
L222: R2 <= R1 by L219 , NAT_1:11;
L223: R2 <= ( len R13 ) by L222 , L221 , XXREAL_0:2;
L224: ( len D8 ) = ( ( len ( R13 /^ R1 ) ) + 1 ) by L53;
L225: ( len D8 ) = ( ( ( len R13 ) - R1 ) + 1 ) by L224 , L221 , RFINSEQ:def 1
.= ( ( len R13 ) - R2 ) by L219
.= ( len ( R13 /^ R2 ) ) by L223 , RFINSEQ:def 1;
L226:
now
let C56 being Nat;
assume that
L227: 1 <= C56
and
L228: C56 <= ( len D8 );
L229: C56 in ( dom ( R13 /^ R2 ) ) by L225 , L227 , L228 , FINSEQ_3:25;
per cases ;
suppose L230: C56 = 1;

thus L231: ( D8 . C56 ) = ( R13 /. R1 ) by L230 , FINSEQ_1:41
.= ( R13 . R1 ) by L220 , PARTFUN1:def 6
.= ( ( R13 /^ R2 ) . C56 ) by L219 , L223 , L229 , L230 , RFINSEQ:def 1;
end;
suppose L232: C56 <> 1;

L233: 1 < C56 by L232 , L227 , XXREAL_0:1;
reconsider D9 = ( C56 - 1 ) as (Element of ( NAT )) by L227 , INT_1:5;
L234: D9 <= ( ( len D8 ) - 1 ) by L228 , XREAL_1:9;
L235: ( D9 + 1 ) = C56;
L236: 1 <= D9 by L235 , L233 , NAT_1:13;
L237: D9 in ( dom ( R13 /^ R1 ) ) by L236 , L224 , L234 , FINSEQ_3:25;
L238: ( len <* ( R13 /. R1 ) *> ) = 1 by FINSEQ_1:39;
thus L239: ( D8 . C56 ) = ( ( R13 /^ R1 ) . D9 ) by L238 , L228 , L233 , FINSEQ_1:24
.= ( R13 . ( D9 + R1 ) ) by L221 , L237 , RFINSEQ:def 1
.= ( R13 . ( C56 + R2 ) ) by L219
.= ( ( R13 /^ R2 ) . C56 ) by L223 , L229 , RFINSEQ:def 1;
end;
end;
thus L241: thesis by L226 , L225 , FINSEQ_1:14;
end;
theorem
L242: (for R1 being Nat holds (for B47 being set holds (for B48 being (FinSequence of B47) holds (( len B48 ) <= R1 implies ( B48 /^ R1 ) is  empty))))
proof
let R1 being Nat;
let C57 being set;
let C58 being (FinSequence of C57);
assume L243: ( len C58 ) <= R1;
per cases ;
suppose L244: ( len C58 ) = R1;

L245: ( len ( C58 /^ R1 ) ) = ( ( len C58 ) - ( len C58 ) ) by L244 , RFINSEQ:def 1
.= ( 0 );
thus L246: thesis by L245;
end;
suppose L247: ( len C58 ) <> R1;

L248: ( len C58 ) < R1 by L247 , L243 , XXREAL_0:1;
thus L249: thesis by L248 , RFINSEQ:def 1;
end;
end;
theorem
L251: (for R4 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds ( rng ( R13 /^ R4 ) ) c= ( rng R13 ))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let C59 being set;
assume L252: C59 in ( rng ( R13 /^ R4 ) );
consider C60 being (Element of ( NAT )) such that L253: C60 in ( dom ( R13 /^ R4 ) ) and L254: ( ( R13 /^ R4 ) /. C60 ) = C59 by L252 , PARTFUN2:2;
L255: ( C60 + R4 ) in ( dom R13 ) by L253 , L178;
L256: ( R13 /. ( C60 + R4 ) ) in ( rng R13 ) by L255 , PARTFUN2:2;
thus L257: thesis by L256 , L253 , L254 , L191;
end;
L258: (for R1 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (R13 is  one-to-one implies ( R13 /^ R1 ) is  one-to-one))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
assume L259: R13 is  one-to-one;
L260:
now
let C61 , C62 being (Element of ( NAT ));
assume that
L261: C61 in ( dom ( R13 /^ R1 ) )
and
L262: C62 in ( dom ( R13 /^ R1 ) )
and
L263: ( ( R13 /^ R1 ) /. C61 ) = ( ( R13 /^ R1 ) /. C62 );
L264: (( R1 + C61 ) in ( dom R13 ) & ( R1 + C62 ) in ( dom R13 )) by L261 , L262 , L178;
L265: ( R13 /. ( R1 + C61 ) ) = ( ( R13 /^ R1 ) /. C61 ) by L261 , L191
.= ( R13 /. ( R1 + C62 ) ) by L262 , L263 , L191;
L266: ( R1 + C61 ) = ( R1 + C62 ) by L265 , L259 , L264 , PARTFUN2:10;
thus L267: C61 = C62 by L266;
end;
thus L268: thesis by L260 , PARTFUN2:9;
end;
registration
let R1 being Nat;
let R11 being non  empty set;
let C63 being  one-to-one (FinSequence of R11);
cluster ( C63 /^ R1 ) ->  one-to-one;
coherence by L258;
end;
theorem
L270: (for R4 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (R13 is  one-to-one implies ( rng ( R13 | R4 ) ) misses ( rng ( R13 /^ R4 ) )))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
assume L271: R13 is  one-to-one;
L272: ( dom ( R13 | R4 ) ) c= ( dom R13 ) by L114;
assume L273: ( rng ( R13 | R4 ) ) meets ( rng ( R13 /^ R4 ) );
consider C64 being set such that L274: C64 in ( rng ( R13 | R4 ) ) and L275: C64 in ( rng ( R13 /^ R4 ) ) by L273 , XBOOLE_0:3;
consider C65 being (Element of ( NAT )) such that L276: C65 in ( dom ( R13 | R4 ) ) and L277: ( ( R13 | R4 ) /. C65 ) = C64 by L274 , PARTFUN2:2;
consider C66 being (Element of ( NAT )) such that L278: C66 in ( dom ( R13 /^ R4 ) ) and L279: ( ( R13 /^ R4 ) /. C66 ) = C64 by L275 , PARTFUN2:2;
L280: ( C66 + R4 ) in ( dom R13 ) by L278 , L178;
L281:
now
L282: (C65 <= ( len ( R13 | R4 ) ) & ( len ( R13 | R4 ) ) <= R4) by L276 , L111 , FINSEQ_3:25;
L283: C65 <= R4 by L282 , XXREAL_0:2;
assume L284: C65 = ( C66 + R4 );
L285: R4 <= C65 by L284 , NAT_1:11;
L286: C65 = R4 by L285 , L283 , XXREAL_0:1;
L287: C66 = ( 0 ) by L286 , L284;
thus L288: contradiction by L287 , L278 , FINSEQ_3:25;
end;
L289: ( R13 /. ( C66 + R4 ) ) = ( ( R13 /^ R4 ) /. C66 ) by L278 , L191
.= ( R13 /. C65 ) by L276 , L277 , L279 , FINSEQ_4:70;
thus L290: contradiction by L289 , L271 , L276 , L272 , L280 , L281 , PARTFUN2:10;
end;
theorem
L291: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( R13 |-- R12 ) = ( R13 /^ ( R12 .. R13 ) )))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L292: R12 in ( rng R13 );
L293: ( len ( R13 |-- R12 ) ) = ( ( len R13 ) - ( R12 .. R13 ) ) by L292 , FINSEQ_4:def 6;
L294: ( R12 .. R13 ) <= ( len R13 ) by L292 , FINSEQ_4:21;
L295: ( len ( R13 /^ ( R12 .. R13 ) ) ) = ( ( len R13 ) - ( R12 .. R13 ) ) by L294 , RFINSEQ:def 1;
L296: (( Seg ( len ( R13 |-- R12 ) ) ) = ( dom ( R13 |-- R12 ) ) & ( Seg ( len ( R13 /^ ( R12 .. R13 ) ) ) ) = ( dom ( R13 /^ ( R12 .. R13 ) ) )) by FINSEQ_1:def 3;
L297:
now
let C67 being Nat;
assume L298: C67 in ( dom ( R13 |-- R12 ) );
thus L299: ( ( R13 |-- R12 ) . C67 ) = ( R13 . ( C67 + ( R12 .. R13 ) ) ) by L298 , L292 , FINSEQ_4:def 6
.= ( ( R13 /^ ( R12 .. R13 ) ) . C67 ) by L293 , L294 , L295 , L296 , L298 , RFINSEQ:def 1;
end;
thus L300: thesis by L297 , L293 , L295 , FINSEQ_2:9;
end;
theorem
L301: (for R1 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (for R14 being (FinSequence of R11) holds ( ( R13 ^ R14 ) /^ ( ( len R13 ) + R1 ) ) = ( R14 /^ R1 )))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let R14 being (FinSequence of R11);
L302: ( len ( R13 ^ R14 ) ) = ( ( len R13 ) + ( len R14 ) ) by FINSEQ_1:22;
per cases ;
suppose L303: R1 <= ( len R14 );

L304: ( ( len R13 ) + R1 ) <= ( ( len R13 ) + ( len R14 ) ) by L303 , XREAL_1:6;
L305: ( len ( ( R13 ^ R14 ) /^ ( ( len R13 ) + R1 ) ) ) = ( ( ( len R14 ) + ( len R13 ) ) - ( ( len R13 ) + R1 ) ) by L304 , L302 , RFINSEQ:def 1
.= ( ( len R14 ) - R1 )
.= ( len ( R14 /^ R1 ) ) by L303 , RFINSEQ:def 1;
L306:
now
let R3 being Nat;
assume L307: (1 <= R3 & R3 <= ( len ( R14 /^ R1 ) ));
L308: R3 in ( dom ( R14 /^ R1 ) ) by L307 , FINSEQ_3:25;
L309: ( R1 + R3 ) in ( dom R14 ) by L308 , L178;
L310: R3 in ( dom ( ( R13 ^ R14 ) /^ ( ( len R13 ) + R1 ) ) ) by L305 , L307 , FINSEQ_3:25;
thus L311: ( ( ( R13 ^ R14 ) /^ ( ( len R13 ) + R1 ) ) /. R3 ) = ( ( R13 ^ R14 ) /. ( ( ( len R13 ) + R1 ) + R3 ) ) by L310 , L191
.= ( ( R13 ^ R14 ) /. ( ( len R13 ) + ( R1 + R3 ) ) )
.= ( R14 /. ( R1 + R3 ) ) by L309 , FINSEQ_4:69
.= ( ( R14 /^ R1 ) /. R3 ) by L308 , L191;
end;
thus L312: thesis by L306 , L305 , L85;
end;
suppose L313: R1 > ( len R14 );

L314: ( ( len R13 ) + R1 ) > ( len ( R13 ^ R14 ) ) by L313 , L302 , XREAL_1:6;
thus L315: ( ( R13 ^ R14 ) /^ ( ( len R13 ) + R1 ) ) = ( <*> R11 ) by L314 , RFINSEQ:def 1
.= ( R14 /^ R1 ) by L313 , RFINSEQ:def 1;
end;
end;
theorem
L317: (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (for R14 being (FinSequence of R11) holds ( ( R13 ^ R14 ) /^ ( len R13 ) ) = R14)))
proof
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let R14 being (FinSequence of R11);
thus L318: ( ( R13 ^ R14 ) /^ ( len R13 ) ) = ( ( R13 ^ R14 ) /^ ( ( len R13 ) + ( 0 ) ) )
.= ( R14 /^ ( 0 ) ) by L301
.= R14 by L200;
end;
theorem
L319: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( R13 /. ( R12 .. R13 ) ) = R12))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L320: R12 in ( rng R13 );
L321: (( R12 .. R13 ) in ( dom R13 ) & ( R13 . ( R12 .. R13 ) ) = R12) by L320 , FINSEQ_4:19 , FINSEQ_4:20;
thus L322: thesis by L321 , PARTFUN1:def 6;
end;
theorem
L323: (for R1 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (R1 in ( dom R13 ) implies ( ( R13 /. R1 ) .. R13 ) <= R1))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
set D10 = ( R13 /. R1 );
L324: ( D10 .. R13 ) = ( ( Sgm ( R13 " { D10 } ) ) . 1 ) by FINSEQ_4:def 4;
L325: ( R13 " { D10 } ) c= ( dom R13 ) by RELAT_1:132;
L326: ( R13 " { D10 } ) c= ( Seg ( len R13 ) ) by L325 , FINSEQ_1:def 3;
assume L327: R1 in ( dom R13 );
L328: ( R13 /. R1 ) = ( R13 . R1 ) by L327 , PARTFUN1:def 6;
L329: ( R13 . R1 ) in { D10 } by L328 , TARSKI:def 1;
L330: R1 in ( R13 " { D10 } ) by L329 , L327 , FUNCT_1:def 7;
L331: R1 in ( rng ( Sgm ( R13 " { D10 } ) ) ) by L330 , L326 , FINSEQ_1:def 13;
consider C68 being set such that L332: C68 in ( dom ( Sgm ( R13 " { D10 } ) ) ) and L333: ( ( Sgm ( R13 " { D10 } ) ) . C68 ) = R1 by L331 , FUNCT_1:def 3;
reconsider D11 = C68 as (Element of ( NAT )) by L332;
L334: (1 <= D11 & D11 <= ( len ( Sgm ( R13 " { D10 } ) ) )) by L332 , FINSEQ_3:25;
thus L335: thesis by L334 , L324 , L326 , L333 , FINSEQ_3:41;
end;
theorem
L336: (for R1 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng ( R13 | R1 ) ) implies ( R12 .. ( R13 | R1 ) ) = ( R12 .. R13 ))))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
L337: ( dom ( R13 | R1 ) ) c= ( dom R13 ) by L114;
assume L338: R12 in ( rng ( R13 | R1 ) );
L339: ( R12 .. ( R13 | R1 ) ) in ( dom ( R13 | R1 ) ) by L338 , FINSEQ_4:20;
L340: ( R13 /. ( R12 .. ( R13 | R1 ) ) ) = ( ( R13 | R1 ) /. ( R12 .. ( R13 | R1 ) ) ) by L339 , FINSEQ_4:70
.= R12 by L338 , L319;
L341: ( R12 .. R13 ) <= ( R12 .. ( R13 | R1 ) ) by L340 , L339 , L337 , L323;
L342: ( R12 .. ( R13 | R1 ) ) <= ( len ( R13 | R1 ) ) by L338 , FINSEQ_4:21;
L343: ( R12 .. R13 ) <= ( len ( R13 | R1 ) ) by L342 , L341 , XXREAL_0:2;
L344: ( rng ( R13 | R1 ) ) c= ( rng R13 ) by L117;
L345: 1 <= ( R12 .. R13 ) by L344 , L338 , FINSEQ_4:21;
L346: ( R12 .. R13 ) in ( dom ( R13 | R1 ) ) by L345 , L343 , FINSEQ_3:25;
L347: ( ( R13 | R1 ) /. ( R12 .. R13 ) ) = ( R13 /. ( R12 .. R13 ) ) by L346 , FINSEQ_4:70
.= R12 by L338 , L344 , L319;
L348: ( R12 .. ( R13 | R1 ) ) <= ( R12 .. R13 ) by L347 , L346 , L323;
thus L349: thesis by L348 , L341 , XXREAL_0:1;
end;
theorem
L350: (for R1 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds ((R1 in ( dom R13 ) & R13 is  one-to-one) implies ( ( R13 /. R1 ) .. R13 ) = R1))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
assume L351: R1 in ( dom R13 );
assume L352: R13 is  one-to-one;
L353: ( ( R13 . R1 ) .. R13 ) = R1 by L352 , L351 , L69;
thus L354: thesis by L353 , L351 , PARTFUN1:def 6;
end;
definition
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let C69 being set;
func R13 -: C69 -> (FinSequence of R11) equals 
( R13 | ( C69 .. R13 ) );
correctness;
end;
theorem
L356: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( len ( R13 -: R12 ) ) = ( R12 .. R13 )))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L357: R12 in ( rng R13 );
L358: ( R12 .. R13 ) in ( dom R13 ) by L357 , FINSEQ_4:20;
L359: ( R12 .. R13 ) <= ( len R13 ) by L358 , FINSEQ_3:25;
thus L360: thesis by L359 , FINSEQ_1:59;
end;
theorem
L361: (for R1 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ((R12 in ( rng R13 ) & R1 in ( Seg ( R12 .. R13 ) )) implies ( ( R13 -: R12 ) /. R1 ) = ( R13 /. R1 ))))))
proof
let R1 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume that
L362: R12 in ( rng R13 )
and
L363: R1 in ( Seg ( R12 .. R13 ) );
L364: ( R12 .. R13 ) in ( dom R13 ) by L362 , FINSEQ_4:20;
thus L365: thesis by L364 , L363 , FINSEQ_4:71;
end;
theorem
L366: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( ( R13 -: R12 ) /. 1 ) = ( R13 /. 1 )))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L367: R12 in ( rng R13 );
L368: 1 <= ( R12 .. R13 ) by L367 , FINSEQ_4:21;
L369: 1 in ( Seg ( R12 .. R13 ) ) by L368;
thus L370: thesis by L369 , L367 , L361;
end;
theorem
L371: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( ( R13 -: R12 ) /. ( R12 .. R13 ) ) = R12))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L372: R12 in ( rng R13 );
L373: ( R12 .. R13 ) in ( dom R13 ) by L372 , FINSEQ_4:20;
L374: 1 <= ( R12 .. R13 ) by L372 , FINSEQ_4:21;
L375: ( R12 .. R13 ) in ( Seg ( R12 .. R13 ) ) by L374;
thus L376: ( ( R13 -: R12 ) /. ( R12 .. R13 ) ) = ( R13 /. ( R12 .. R13 ) ) by L375 , L372 , L361
.= ( R13 . ( R12 .. R13 ) ) by L373 , PARTFUN1:def 6
.= R12 by L372 , FINSEQ_4:19;
end;
theorem
L377: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (for B49 being set holds ((B49 in ( rng R13 ) & R12 in ( rng R13 ) & ( B49 .. R13 ) <= ( R12 .. R13 )) implies B49 in ( rng ( R13 -: R12 ) ))))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
let C70 being set;
assume that
L378: C70 in ( rng R13 )
and
L379: R12 in ( rng R13 )
and
L380: ( C70 .. R13 ) <= ( R12 .. R13 );
set D12 = ( R13 -: R12 );
set D13 = ( C70 .. R13 );
L381: 1 <= D13 by L378 , FINSEQ_4:21;
L382: D13 in ( Seg ( R12 .. R13 ) ) by L381 , L380;
L383: ( Seg ( len D12 ) ) = ( dom D12 ) by FINSEQ_1:def 3;
L384: D13 in ( dom D12 ) by L383 , L379 , L382 , L356;
L385: ( D12 . D13 ) in ( rng D12 ) by L384 , FUNCT_1:def 3;
L386: ( D12 /. D13 ) in ( rng D12 ) by L385 , L384 , PARTFUN1:def 6;
L387: ( R13 /. D13 ) in ( rng D12 ) by L386 , L379 , L382 , L361;
L388: D13 in ( dom R13 ) by L378 , FINSEQ_4:20;
L389: ( R13 . D13 ) in ( rng D12 ) by L388 , L387 , PARTFUN1:def 6;
thus L390: thesis by L389 , L378 , FINSEQ_4:19;
end;
theorem
L391: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( R13 -: R12 ) is non  empty))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L392: R12 in ( rng R13 );
L393: 1 <= ( R12 .. R13 ) by L392 , FINSEQ_4:21;
L394: 1 <= ( len ( R13 -: R12 ) ) by L393 , L392 , L356;
thus L395: thesis by L394;
end;
theorem
L396: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ( rng ( R13 -: R12 ) ) c= ( rng R13 )))) by L117;
registration
let R11 being non  empty set;
let R12 being (Element of R11);
let C71 being  one-to-one (FinSequence of R11);
cluster ( C71 -: R12 ) ->  one-to-one;
coherence;
end;
definition
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let R12 being (Element of R11);
func R13 :- R12 -> (FinSequence of R11) equals 
( <* R12 *> ^ ( R13 /^ ( R12 .. R13 ) ) );
coherence;
end;
theorem
L399: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies (ex B50 being (Element of ( NAT )) st (( B50 + 1 ) = ( R12 .. R13 ) & ( R13 :- R12 ) = ( R13 /^ B50 )))))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L400: R12 in ( rng R13 );
reconsider D14 = ( ( R12 .. R13 ) - 1 ) as (Element of ( NAT )) by L400 , FINSEQ_4:21 , INT_1:5;
L401: ( R12 .. R13 ) in ( dom R13 ) by L400 , FINSEQ_4:20;
take D14;
thus L402: ( D14 + 1 ) = ( R12 .. R13 );
thus L403: ( R13 :- R12 ) = ( <* ( R13 /. ( R12 .. R13 ) ) *> ^ ( R13 /^ ( R12 .. R13 ) ) ) by L400 , L319
.= ( R13 /^ D14 ) by L402 , L401 , L218;
end;
theorem
L404: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( len ( R13 :- R12 ) ) = ( ( ( len R13 ) - ( R12 .. R13 ) ) + 1 )))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L405: R12 in ( rng R13 );
L406: ( R12 .. R13 ) <= ( len R13 ) by L405 , FINSEQ_4:21;
consider C72 being (Element of ( NAT )) such that L407: ( C72 + 1 ) = ( R12 .. R13 ) and L408: ( R13 :- R12 ) = ( R13 /^ C72 ) by L405 , L399;
L409: C72 <= ( R12 .. R13 ) by L407 , NAT_1:11;
L410: C72 <= ( len R13 ) by L409 , L406 , XXREAL_0:2;
thus L411: ( len ( R13 :- R12 ) ) = ( ( len R13 ) - C72 ) by L410 , L408 , RFINSEQ:def 1
.= ( ( ( len R13 ) - ( R12 .. R13 ) ) + 1 ) by L407;
end;
theorem
L412: (for R2 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ((R12 in ( rng R13 ) & ( R2 + 1 ) in ( dom ( R13 :- R12 ) )) implies ( R2 + ( R12 .. R13 ) ) in ( dom R13 ))))))
proof
let R2 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume that
L413: R12 in ( rng R13 )
and
L414: ( R2 + 1 ) in ( dom ( R13 :- R12 ) );
L415: ( R2 + 1 ) <= ( len ( R13 :- R12 ) ) by L414 , FINSEQ_3:25;
L416: ( R2 + 1 ) <= ( ( ( len R13 ) - ( R12 .. R13 ) ) + 1 ) by L415 , L413 , L404;
L417: R2 <= ( ( len R13 ) - ( R12 .. R13 ) ) by L416 , XREAL_1:6;
L418: ( R2 + ( R12 .. R13 ) ) <= ( len R13 ) by L417 , XREAL_1:19;
L419: ( R12 .. R13 ) <= ( R2 + ( R12 .. R13 ) ) by NAT_1:11;
L420: 1 <= ( R12 .. R13 ) by L413 , FINSEQ_4:21;
L421: 1 <= ( R2 + ( R12 .. R13 ) ) by L420 , L419 , XXREAL_0:2;
thus L422: thesis by L421 , L418 , FINSEQ_3:25;
end;
registration
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
cluster ( R13 :- R12 ) -> non  empty;
coherence;
end;
theorem
L424: (for R2 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ((R12 in ( rng R13 ) & ( R2 + 1 ) in ( dom ( R13 :- R12 ) )) implies ( ( R13 :- R12 ) /. ( R2 + 1 ) ) = ( R13 /. ( R2 + ( R12 .. R13 ) ) ))))))
proof
let R2 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume that
L425: R12 in ( rng R13 )
and
L426: ( R2 + 1 ) in ( dom ( R13 :- R12 ) );
L427: ( R2 + ( R12 .. R13 ) ) in ( dom R13 ) by L425 , L426 , L412;
set D15 = ( R2 + 1 );
L428: ( R12 .. R13 ) <= ( len R13 ) by L425 , FINSEQ_4:21;
consider C73 being (Element of ( NAT )) such that L429: ( C73 + 1 ) = ( R12 .. R13 ) and L430: ( R13 :- R12 ) = ( R13 /^ C73 ) by L425 , L399;
L431: C73 <= ( R12 .. R13 ) by L429 , NAT_1:11;
L432: C73 <= ( len R13 ) by L431 , L428 , XXREAL_0:2;
thus L433: ( ( R13 :- R12 ) /. D15 ) = ( ( R13 :- R12 ) . D15 ) by L426 , PARTFUN1:def 6
.= ( R13 . ( D15 + C73 ) ) by L426 , L430 , L432 , RFINSEQ:def 1
.= ( R13 /. ( R2 + ( R12 .. R13 ) ) ) by L429 , L427 , PARTFUN1:def 6;
end;
theorem
L434: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ( ( R13 :- R12 ) /. 1 ) = R12))) by L98;
theorem
L435: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( ( R13 :- R12 ) /. ( len ( R13 :- R12 ) ) ) = ( R13 /. ( len R13 ) )))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
L436: ( len ( R13 :- R12 ) ) in ( dom ( R13 :- R12 ) ) by L48;
assume L437: R12 in ( rng R13 );
L438: ( R12 .. R13 ) <= ( len R13 ) by L437 , FINSEQ_4:21;
reconsider D16 = ( ( len R13 ) - ( R12 .. R13 ) ) as (Element of ( NAT )) by L438 , INT_1:5;
L439: ( len ( R13 :- R12 ) ) = ( D16 + 1 ) by L437 , L404;
thus L440: ( ( R13 :- R12 ) /. ( len ( R13 :- R12 ) ) ) = ( R13 /. ( D16 + ( R12 .. R13 ) ) ) by L439 , L437 , L436 , L424
.= ( R13 /. ( len R13 ) );
end;
theorem
L441: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R12 in ( rng R13 ) implies ( rng ( R13 :- R12 ) ) c= ( rng R13 )))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L442: R12 in ( rng R13 );
L443: (ex B51 being (Element of ( NAT )) st (( B51 + 1 ) = ( R12 .. R13 ) & ( R13 :- R12 ) = ( R13 /^ B51 ))) by L442 , L399;
thus L444: thesis by L443 , L251;
end;
theorem
L445: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ((R12 in ( rng R13 ) & R13 is  one-to-one) implies ( R13 :- R12 ) is  one-to-one))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L446: R12 in ( rng R13 );
L447: (ex B52 being (Element of ( NAT )) st (( B52 + 1 ) = ( R12 .. R13 ) & ( R13 :- R12 ) = ( R13 /^ B52 ))) by L446 , L399;
thus L448: thesis by L447;
end;
definition
let C74 being FinSequence;
func Rev C74 -> FinSequence means 
:L449: (( len it ) = ( len C74 ) & (for R15 being Nat holds (R15 in ( dom it ) implies ( it . R15 ) = ( C74 . ( ( ( len C74 ) - R15 ) + 1 ) ))));
existence
proof
deffunc H1(Nat) = ( C74 . ( ( ( len C74 ) - $1 ) + 1 ) );
L450: (ex B53 being FinSequence st (( len B53 ) = ( len C74 ) & (for B54 being Nat holds (B54 in ( dom B53 ) implies ( B53 . B54 ) = H1(B54))))) from FINSEQ_1:sch 2;
thus L451: thesis by L450;
end;
uniqueness
proof
L452: ( dom C74 ) = ( Seg ( len C74 ) ) by FINSEQ_1:def 3;
let C75 , C76 being FinSequence;
assume that
L453: ( len C75 ) = ( len C74 )
and
L454: (for R15 being Nat holds (R15 in ( dom C75 ) implies ( C75 . R15 ) = ( C74 . ( ( ( len C74 ) - R15 ) + 1 ) )))
and
L455: ( len C76 ) = ( len C74 )
and
L456: (for R15 being Nat holds (R15 in ( dom C76 ) implies ( C76 . R15 ) = ( C74 . ( ( ( len C74 ) - R15 ) + 1 ) )));
L457: ( dom C75 ) = ( Seg ( len C75 ) ) by FINSEQ_1:def 3;
L458: ( dom C76 ) = ( Seg ( len C76 ) ) by FINSEQ_1:def 3;
L459:
now
let C77 being Nat;
assume L460: C77 in ( dom C74 );
L461: ( C75 . C77 ) = ( C74 . ( ( ( len C74 ) - C77 ) + 1 ) ) by L460 , L453 , L454 , L457 , L452;
thus L462: ( C75 . C77 ) = ( C76 . C77 ) by L461 , L455 , L456 , L458 , L452 , L460;
end;
thus L463: thesis by L459 , L453 , L455 , L457 , L452 , FINSEQ_2:9;
end;
involutiveness
proof
let C78 , C79 being FinSequence;
assume that
L464: ( len C78 ) = ( len C79 )
and
L465: (for R15 being Nat holds (R15 in ( dom C78 ) implies ( C78 . R15 ) = ( C79 . ( ( ( len C79 ) - R15 ) + 1 ) )));
thus L466: ( len C79 ) = ( len C78 ) by L464;
let R15 being Nat;
assume L467: R15 in ( dom C79 );
L468: R15 in ( dom C78 ) by L467 , L464 , FINSEQ_3:29;
L469: R15 <= ( len C78 ) by L468 , FINSEQ_3:25;
reconsider D17 = ( ( len C78 ) - R15 ) as (Element of ( NAT )) by L469 , INT_1:5;
L470: R15 >= 1 by L467 , FINSEQ_3:25;
L471: ( D17 + R15 ) >= ( D17 + 1 ) by L470 , XREAL_1:6;
L472: ( D17 + 1 ) <= ( len C78 ) by L471;
L473: D17 < ( len C78 ) by L472 , NAT_1:13;
L474: (1 <= ( D17 + 1 ) & ( D17 + 1 ) <= ( len C78 )) by L473 , NAT_1:11 , NAT_1:13;
L475: ( D17 + 1 ) in ( dom C78 ) by L474 , FINSEQ_3:25;
thus L476: ( C79 . R15 ) = ( C79 . ( ( ( len C79 ) - ( D17 + 1 ) ) + 1 ) ) by L464
.= ( C78 . ( D17 + 1 ) ) by L465 , L475
.= ( C78 . ( ( ( len C78 ) - R15 ) + 1 ) );
end;
end;
theorem
L478: (for B55 being FinSequence holds (( dom B55 ) = ( dom ( Rev B55 ) ) & ( rng B55 ) = ( rng ( Rev B55 ) )))
proof
let C80 being FinSequence;
thus L479: ( dom C80 ) = ( Seg ( len C80 ) ) by FINSEQ_1:def 3
.= ( Seg ( len ( Rev C80 ) ) ) by L449
.= ( dom ( Rev C80 ) ) by FINSEQ_1:def 3;
L480: ( len C80 ) = ( len ( Rev C80 ) ) by L449;
thus L481:now
let C81 being set;
assume L482: C81 in ( rng C80 );
consider C82 being Nat such that L483: C82 in ( dom C80 ) and L484: ( C80 . C82 ) = C81 by L482 , FINSEQ_2:10;
L485: C82 <= ( len C80 ) by L483 , FINSEQ_3:25;
reconsider D18 = ( ( ( len C80 ) - C82 ) + 1 ) as (Element of ( NAT )) by L485 , L1;
L486: ( dom C80 ) = ( Seg ( len C80 ) ) by FINSEQ_1:def 3;
L487: D18 in ( Seg ( len ( Rev C80 ) ) ) by L486 , L480 , L483 , L5;
L488: D18 in ( dom ( Rev C80 ) ) by L487 , FINSEQ_1:def 3;
L489: ( ( Rev C80 ) . D18 ) = ( C80 . ( ( ( len C80 ) - D18 ) + 1 ) ) by L488 , L449;
thus L490: C81 in ( rng ( Rev C80 ) ) by L489 , L484 , L488 , FUNCT_1:def 3;
end;
let C83 being set;
assume L491: C83 in ( rng ( Rev C80 ) );
consider C84 being Nat such that L492: C84 in ( dom ( Rev C80 ) ) and L493: ( ( Rev C80 ) . C84 ) = C83 by L491 , FINSEQ_2:10;
L494: C84 <= ( len C80 ) by L480 , L492 , FINSEQ_3:25;
reconsider D19 = ( ( ( len C80 ) - C84 ) + 1 ) as (Element of ( NAT )) by L494 , L1;
L495: C84 in ( Seg ( len ( Rev C80 ) ) ) by L492 , FINSEQ_1:def 3;
L496: D19 in ( Seg ( len ( Rev C80 ) ) ) by L495 , L480 , L5;
L497: D19 in ( dom ( Rev C80 ) ) by L496 , FINSEQ_1:def 3;
L498: ( ( Rev C80 ) . C84 ) = ( C80 . ( ( ( len C80 ) - C84 ) + 1 ) ) by L492 , L449;
thus L499: thesis by L498 , L479 , L493 , L497 , FUNCT_1:def 3;
end;
theorem
L500: (for R15 being Nat holds (for B56 being FinSequence holds (R15 in ( dom B56 ) implies ( ( Rev B56 ) . R15 ) = ( B56 . ( ( ( len B56 ) - R15 ) + 1 ) ))))
proof
let R15 being Nat;
let C85 being FinSequence;
L501: ( dom C85 ) = ( dom ( Rev C85 ) ) by L478;
thus L502: thesis by L501 , L449;
end;
theorem
L503: (for B57 being FinSequence holds (for B58 , B59 being Nat holds ((B58 in ( dom B57 ) & ( B58 + B59 ) = ( ( len B57 ) + 1 )) implies B59 in ( dom ( Rev B57 ) ))))
proof
let C86 being FinSequence;
let C87 , C88 being Nat;
assume that
L504: C87 in ( dom C86 )
and
L505: ( C87 + C88 ) = ( ( len C86 ) + 1 );
L506: (( dom C86 ) = ( Seg ( len C86 ) ) & ( dom C86 ) = ( dom ( Rev C86 ) )) by L478 , FINSEQ_1:def 3;
L507: C88 = ( ( ( len C86 ) - C87 ) + 1 ) by L505;
thus L508: thesis by L507 , L504 , L506 , L5;
end;
registration
let C89 being  empty FinSequence;
cluster ( Rev C89 ) ->  empty;
coherence
proof
L509: ( len ( {} ) ) = ( 0 );
L510: ( len ( Rev ( {} ) ) ) = ( 0 ) by L509 , L449;
thus L511: thesis by L510;
end;
end;
theorem
L513: (for B60 being set holds ( Rev <* B60 *> ) = <* B60 *>)
proof
let C90 being set;
set D20 = <* C90 *>;
L514: ( len D20 ) = 1 by FINSEQ_1:39;
L515:
now
let R15 being Nat;
assume L516: R15 in ( dom D20 );
L517: R15 in ( Seg ( len D20 ) ) by L516 , FINSEQ_1:def 3;
L518: R15 = 1 by L517 , L514 , FINSEQ_1:2 , TARSKI:def 1;
thus L519: ( D20 . R15 ) = ( D20 . ( ( ( len D20 ) - R15 ) + 1 ) ) by L518 , FINSEQ_1:39;
end;
thus L520: thesis by L515 , L449;
end;
theorem
L521: (for B61 , B62 being set holds ( Rev <* B61 , B62 *> ) = <* B62 , B61 *>)
proof
let C91 , C92 being set;
set D21 = <* C91 , C92 *>;
set D22 = <* C92 , C91 *>;
L522: ( len D21 ) = 2 by FINSEQ_1:44;
L523: ( len D22 ) = 2 by FINSEQ_1:44;
L524:
now
let R15 being Nat;
assume L525: R15 in ( dom D22 );
L526: R15 in ( Seg ( len D21 ) ) by L525 , L522 , L523 , FINSEQ_1:def 3;
per cases  by L522 , L526 , FINSEQ_1:2 , TARSKI:def 2;
suppose L527: R15 = 1;

thus L528: ( D22 . R15 ) = C92 by L527 , FINSEQ_1:44
.= ( D21 . ( ( ( len D21 ) - R15 ) + 1 ) ) by L522 , L527 , FINSEQ_1:44;
end;
suppose L529: R15 = 2;

thus L530: ( D22 . R15 ) = C91 by L529 , FINSEQ_1:44
.= ( D21 . ( ( ( len D21 ) - R15 ) + 1 ) ) by L522 , L529 , FINSEQ_1:44;
end;
end;
thus L532: thesis by L524 , L522 , L523 , L449;
end;
theorem
L533: (for B63 being FinSequence holds (( B63 . 1 ) = ( ( Rev B63 ) . ( len B63 ) ) & ( B63 . ( len B63 ) ) = ( ( Rev B63 ) . 1 )))
proof
let C93 being FinSequence;
per cases ;
suppose L534: C93 is  empty;

L535: ( dom ( Rev C93 ) ) = ( {} ) by L534;
thus L536: ( C93 . 1 ) = ( {} ) by L534
.= ( ( Rev C93 ) . ( len C93 ) ) by L535 , FUNCT_1:def 2;
thus L537: ( C93 . ( len C93 ) ) = ( {} ) by L534
.= ( ( Rev C93 ) . 1 ) by L535 , FUNCT_1:def 2;
end;
suppose L538: C93 is non  empty;

L539: ( len C93 ) in ( Seg ( len C93 ) ) by L538 , FINSEQ_1:3;
L540: ( len C93 ) in ( dom C93 ) by L539 , FINSEQ_1:def 3;
thus L541: ( ( Rev C93 ) . ( len C93 ) ) = ( C93 . ( ( ( len C93 ) - ( len C93 ) ) + 1 ) ) by L540 , L500
.= ( C93 . 1 );
L542: ( len C93 ) >= 1 by L538 , NAT_1:14;
L543: 1 in ( dom C93 ) by L542 , FINSEQ_3:25;
thus L544: ( ( Rev C93 ) . 1 ) = ( C93 . ( ( ( len C93 ) - 1 ) + 1 ) ) by L543 , L500
.= ( C93 . ( len C93 ) );
end;
end;
registration
let C94 being  one-to-one FinSequence;
cluster ( Rev C94 ) ->  one-to-one;
coherence
proof
set D23 = ( Rev C94 );
let C95 , C96 being set;
assume that
L546: C95 in ( dom D23 )
and
L547: C96 in ( dom D23 )
and
L548: ( D23 . C95 ) = ( D23 . C96 );
reconsider D24 = C95 , D25 = C96 as (Element of ( NAT )) by L546 , L547;
L549: ( len D23 ) = ( len C94 ) by L449;
L550: (D24 <= ( len C94 ) & D25 <= ( len C94 )) by L549 , L546 , L547 , FINSEQ_3:25;
reconsider D26 = ( ( ( len C94 ) - D24 ) + 1 ) , D27 = ( ( ( len C94 ) - D25 ) + 1 ) as (Element of ( NAT )) by L550 , L1;
L551: ( C94 . D26 ) = ( D23 . C95 ) by L546 , L449
.= ( C94 . D27 ) by L547 , L548 , L449;
L552: (( dom D23 ) = ( Seg ( len D23 ) ) & ( dom C94 ) = ( Seg ( len C94 ) )) by FINSEQ_1:def 3;
L553: (D26 in ( dom C94 ) & D27 in ( dom C94 )) by L552 , L546 , L547 , L549 , L5;
L554: D26 = D27 by L553 , L551 , FUNCT_1:def 4;
thus L555: thesis by L554;
end;
end;
theorem
L557: (for B64 being FinSequence holds (for B65 being set holds ( Rev ( B64 ^ <* B65 *> ) ) = ( <* B65 *> ^ ( Rev B64 ) )))
proof
let C97 being FinSequence;
let C98 being set;
set D28 = ( ( len C97 ) + 1 );
set D29 = <* C98 *>;
L558: ( len ( D29 ^ ( Rev C97 ) ) ) = ( ( len D29 ) + ( len ( Rev C97 ) ) ) by FINSEQ_1:22
.= ( 1 + ( len ( Rev C97 ) ) ) by FINSEQ_1:39
.= D28 by L449;
L559: ( len ( C97 ^ D29 ) ) = D28 by FINSEQ_2:16;
L560: ( len ( Rev ( C97 ^ D29 ) ) ) = D28 by L559 , L449;
L561:
now
let C99 being Nat;
L562: ( len D29 ) = 1 by FINSEQ_1:40;
assume L563: C99 in ( dom ( Rev ( C97 ^ D29 ) ) );
L564: 1 <= C99 by L563 , FINSEQ_3:25;
L565: C99 <= D28 by L560 , L563 , FINSEQ_3:25;
per cases  by L564 , XXREAL_0:1;
suppose L566: C99 = 1;

L567: ( Seg ( len D29 ) ) = ( dom D29 ) by FINSEQ_1:def 3;
L568: 1 in ( dom D29 ) by L567 , L562;
thus L569: ( ( Rev ( C97 ^ D29 ) ) . C99 ) = ( ( C97 ^ D29 ) . ( ( D28 - 1 ) + 1 ) ) by L559 , L563 , L566 , L449
.= C98 by FINSEQ_1:42
.= ( D29 . 1 ) by FINSEQ_1:40
.= ( ( D29 ^ ( Rev C97 ) ) . C99 ) by L566 , L568 , FINSEQ_1:def 7;
end;
suppose L570: C99 > 1;

reconsider D30 = ( C99 - 1 ) as (Element of ( NAT )) by L570 , NAT_1:20;
consider C100 being Nat such that L571: C99 = ( C100 + 1 ) by L570 , NAT_1:6;
reconsider D31 = ( ( D28 - C99 ) + 1 ) as (Element of ( NAT )) by L565 , L1;
L572: D28 < ( ( len C97 ) + C99 ) by L570 , XREAL_1:8;
L573: ( D28 - C99 ) < ( ( ( len C97 ) + C99 ) - C99 ) by L572 , XREAL_1:9;
L574: D31 < ( ( len C97 ) + 1 ) by L573 , XREAL_1:6;
L575: D31 <= ( len C97 ) by L574 , NAT_1:13;
L576: ( C99 - C99 ) <= ( D28 - C99 ) by L565 , XREAL_1:9;
L577: ( ( 0 ) + 1 ) <= D31 by L576 , XREAL_1:6;
L578: D31 in ( dom C97 ) by L577 , L575 , FINSEQ_3:25;
L579: C100 <> ( 0 ) by L570 , L571;
L580: 1 <= D30 by L579 , L571 , NAT_1:14;
L581: D30 <= ( D28 - 1 ) by L565 , XREAL_1:9;
L582: D30 in ( dom C97 ) by L581 , L580 , FINSEQ_3:25;
thus L583: ( ( Rev ( C97 ^ D29 ) ) . C99 ) = ( ( C97 ^ D29 ) . ( ( D28 - C99 ) + 1 ) ) by L559 , L563 , L449
.= ( C97 . ( ( ( len C97 ) - D30 ) + 1 ) ) by L578 , FINSEQ_1:def 7
.= ( ( Rev C97 ) . D30 ) by L582 , L500
.= ( ( D29 ^ ( Rev C97 ) ) . C99 ) by L558 , L565 , L562 , L570 , FINSEQ_1:24;
end;
end;
thus L585: thesis by L561 , L558 , L560 , FINSEQ_2:9;
end;
theorem
L586: (for B66 , B67 being FinSequence holds ( Rev ( B66 ^ B67 ) ) = ( ( Rev B67 ) ^ ( Rev B66 ) ))
proof
let C101 being FinSequence;
defpred S1[ FinSequence ] means ( Rev ( C101 ^ $1 ) ) = ( ( Rev $1 ) ^ ( Rev C101 ) );
L587: S1[ ( {} ) ]
proof
set D32 = ( {} );
thus L588: ( Rev ( C101 ^ D32 ) ) = ( Rev C101 ) by FINSEQ_1:34
.= ( ( Rev D32 ) ^ ( Rev C101 ) ) by FINSEQ_1:34;
end;
L589: (for B68 being FinSequence holds (for B69 being set holds (S1[ B68 ] implies S1[ ( B68 ^ <* B69 *> ) ])))
proof
let C102 being FinSequence;
let C103 being set;
assume that
L590: S1[ C102 ];
thus L591: ( Rev ( C101 ^ ( C102 ^ <* C103 *> ) ) ) = ( Rev ( ( C101 ^ C102 ) ^ <* C103 *> ) ) by FINSEQ_1:32
.= ( <* C103 *> ^ ( ( Rev C102 ) ^ ( Rev C101 ) ) ) by L590 , L557
.= ( ( <* C103 *> ^ ( Rev C102 ) ) ^ ( Rev C101 ) ) by FINSEQ_1:32
.= ( ( Rev ( C102 ^ <* C103 *> ) ) ^ ( Rev C101 ) ) by L557;
end;
thus L592: (for B70 being FinSequence holds S1[ B70 ]) from FINSEQ_1:sch 3(L587 , L589);
end;
definition
let C104 being set;
let C105 being (FinSequence of C104);
redefine func Rev C105 -> (FinSequence of C104);

coherence
proof
set D33 = ( len C105 );
L593: ( dom C105 ) = ( Seg D33 ) by FINSEQ_1:def 3;
L594:
now
let C106 being Nat;
set D34 = ( ( D33 - C106 ) + 1 );
assume L595: C106 in ( dom ( Rev C105 ) );
L596: C106 in ( Seg ( len ( Rev C105 ) ) ) by L595 , FINSEQ_1:def 3;
L597: C106 in ( Seg D33 ) by L596 , L449;
L598: D34 in ( Seg D33 ) by L597 , L5;
L599: ( C105 . D34 ) in C104 by L598 , L593 , FINSEQ_2:11;
thus L600: ( ( Rev C105 ) . C106 ) in C104 by L599 , L593 , L597 , L500;
end;
thus L601: thesis by L594 , FINSEQ_2:12;
end;
end;
theorem
L603: (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (R13 is non  empty implies (( R13 /. 1 ) = ( ( Rev R13 ) /. ( len R13 ) ) & ( R13 /. ( len R13 ) ) = ( ( Rev R13 ) /. 1 )))))
proof
let R11 being non  empty set;
let R13 being (FinSequence of R11);
L604: ( dom R13 ) = ( dom ( Rev R13 ) ) by L478;
assume L605: R13 is non  empty;
L606: ( len R13 ) in ( dom R13 ) by L605 , L48;
L607: 1 in ( dom R13 ) by L605 , L48;
thus L608: ( R13 /. 1 ) = ( R13 . 1 ) by L607 , PARTFUN1:def 6
.= ( ( Rev R13 ) . ( len R13 ) ) by L533
.= ( ( Rev R13 ) /. ( len R13 ) ) by L606 , L604 , PARTFUN1:def 6;
thus L609: ( R13 /. ( len R13 ) ) = ( R13 . ( len R13 ) ) by L606 , PARTFUN1:def 6
.= ( ( Rev R13 ) . 1 ) by L533
.= ( ( Rev R13 ) /. 1 ) by L605 , L604 , L48 , PARTFUN1:def 6;
end;
theorem
L610: (for R2 being Nat holds (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (for R15 being Nat holds ((R15 in ( dom R13 ) & ( R15 + R2 ) = ( ( len R13 ) + 1 )) implies ( R13 /. R15 ) = ( ( Rev R13 ) /. R2 ))))))
proof
let R2 being Nat;
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let R15 being Nat;
assume that
L611: R15 in ( dom R13 )
and
L612: ( R15 + R2 ) = ( ( len R13 ) + 1 );
L613: R2 in ( dom ( Rev R13 ) ) by L611 , L612 , L503;
L614: R15 = ( ( ( len R13 ) - R2 ) + 1 ) by L612;
thus L615: ( R13 /. R15 ) = ( R13 . R15 ) by L611 , PARTFUN1:def 6
.= ( ( Rev R13 ) . R2 ) by L614 , L613 , L449
.= ( ( Rev R13 ) /. R2 ) by L613 , PARTFUN1:def 6;
end;
definition
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let R12 being (Element of R11);
let C107 being Nat;
func Ins (R13 , C107 , R12) -> (FinSequence of R11) equals 
( ( ( R13 | C107 ) ^ <* R12 *> ) ^ ( R13 /^ C107 ) );
correctness;
end;
theorem
L617: (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ( Ins (R13 , ( 0 ) , R12) ) = ( <* R12 *> ^ R13 ))))
proof
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
thus L618: ( Ins (R13 , ( 0 ) , R12) ) = ( <* R12 *> ^ ( R13 /^ ( 0 ) ) ) by FINSEQ_1:34
.= ( <* R12 *> ^ R13 ) by L200;
end;
theorem
L619: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (( len R13 ) <= R4 implies ( Ins (R13 , R4 , R12) ) = ( R13 ^ <* R12 *> ))))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume L620: ( len R13 ) <= R4;
L621: ( R13 /^ R4 ) is  empty by L620 , L242;
thus L622: ( Ins (R13 , R4 , R12) ) = ( ( R13 | R4 ) ^ <* R12 *> ) by L621 , FINSEQ_1:34
.= ( R13 ^ <* R12 *> ) by L620 , FINSEQ_1:58;
end;
theorem
L623: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ( len ( Ins (R13 , R4 , R12) ) ) = ( ( len R13 ) + 1 )))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
per cases ;
suppose L624: R4 <= ( len R13 );

thus L625: ( len ( Ins (R13 , R4 , R12) ) ) = ( ( len ( ( R13 | R4 ) ^ <* R12 *> ) ) + ( len ( R13 /^ R4 ) ) ) by FINSEQ_1:22
.= ( ( len ( ( R13 | R4 ) ^ <* R12 *> ) ) + ( ( len R13 ) - R4 ) ) by L624 , RFINSEQ:def 1
.= ( ( ( len ( R13 | R4 ) ) + ( len <* R12 *> ) ) + ( ( len R13 ) - R4 ) ) by FINSEQ_1:22
.= ( ( ( len ( R13 | R4 ) ) + 1 ) + ( ( len R13 ) - R4 ) ) by FINSEQ_1:39
.= ( ( R4 + 1 ) + ( ( len R13 ) - R4 ) ) by L624 , FINSEQ_1:59
.= ( ( len R13 ) + 1 );
end;
suppose L626: ( len R13 ) < R4;

L627: ( Ins (R13 , R4 , R12) ) = ( R13 ^ <* R12 *> ) by L626 , L619;
thus L628: thesis by L627 , FINSEQ_2:16;
end;
end;
theorem
L630: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ( rng ( Ins (R13 , R4 , R12) ) ) = ( { R12 } \/ ( rng R13 ) )))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
thus L631: ( rng ( Ins (R13 , R4 , R12) ) ) = ( ( rng ( ( R13 | R4 ) ^ <* R12 *> ) ) \/ ( rng ( R13 /^ R4 ) ) ) by FINSEQ_1:31
.= ( ( ( rng ( R13 | R4 ) ) \/ ( rng <* R12 *> ) ) \/ ( rng ( R13 /^ R4 ) ) ) by FINSEQ_1:31
.= ( ( ( rng ( R13 | R4 ) ) \/ ( rng ( R13 /^ R4 ) ) ) \/ ( rng <* R12 *> ) ) by XBOOLE_1:4
.= ( ( rng ( ( R13 | R4 ) ^ ( R13 /^ R4 ) ) ) \/ ( rng <* R12 *> ) ) by FINSEQ_1:31
.= ( ( rng <* R12 *> ) \/ ( rng R13 ) ) by RFINSEQ:8
.= ( { R12 } \/ ( rng R13 ) ) by FINSEQ_1:38;
end;
registration
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let R4 being Nat;
let R12 being (Element of R11);
cluster ( Ins (R13 , R4 , R12) ) -> non  empty;
coherence;
end;
theorem
L633: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds R12 in ( rng ( Ins (R13 , R4 , R12) ) )))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
L634: R12 in { R12 } by TARSKI:def 1;
L635: R12 in ( { R12 } \/ ( rng R13 ) ) by L634 , XBOOLE_0:def 3;
thus L636: thesis by L635 , L630;
end;
theorem
L637: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (for R15 being Nat holds (R15 in ( dom ( R13 | R4 ) ) implies ( ( Ins (R13 , R4 , R12) ) /. R15 ) = ( R13 /. R15 )))))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
let R15 being Nat;
assume L638: R15 in ( dom ( R13 | R4 ) );
thus L639: ( ( Ins (R13 , R4 , R12) ) /. R15 ) = ( ( ( R13 | R4 ) ^ ( <* R12 *> ^ ( R13 /^ R4 ) ) ) /. R15 ) by FINSEQ_1:32
.= ( ( R13 | R4 ) /. R15 ) by L638 , L104
.= ( R13 /. R15 ) by L638 , FINSEQ_4:70;
end;
theorem
L640: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (R4 <= ( len R13 ) implies ( ( Ins (R13 , R4 , R12) ) /. ( R4 + 1 ) ) = R12)))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
L641: 1 <= ( R4 + 1 ) by NAT_1:11;
assume L642: R4 <= ( len R13 );
L643: ( len ( R13 | R4 ) ) = R4 by L642 , FINSEQ_1:59;
L644: ( len ( ( R13 | R4 ) ^ <* R12 *> ) ) = ( R4 + 1 ) by L643 , FINSEQ_2:16;
L645: ( R4 + 1 ) in ( dom ( ( R13 | R4 ) ^ <* R12 *> ) ) by L644 , L641 , FINSEQ_3:25;
thus L646: ( ( Ins (R13 , R4 , R12) ) /. ( R4 + 1 ) ) = ( ( ( R13 | R4 ) ^ <* R12 *> ) /. ( R4 + 1 ) ) by L645 , L104
.= R12 by L643 , FINSEQ_4:67;
end;
theorem
L647: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds (for R15 being Nat holds ((( R4 + 1 ) <= R15 & R15 <= ( len R13 )) implies ( ( Ins (R13 , R4 , R12) ) /. ( R15 + 1 ) ) = ( R13 /. R15 )))))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
let R15 being Nat;
assume that
L648: ( R4 + 1 ) <= R15
and
L649: R15 <= ( len R13 );
reconsider D35 = ( R15 - ( R4 + 1 ) ) as (Element of ( NAT )) by L648 , INT_1:5;
L650: ( R4 + ( D35 + 1 ) ) <= ( len R13 ) by L649;
L651: ( D35 + 1 ) <= ( ( len R13 ) - R4 ) by L650 , XREAL_1:19;
L652: R4 <= ( R4 + 1 ) by NAT_1:11;
L653: R4 <= R15 by L652 , L648 , XXREAL_0:2;
L654: ( len ( R13 | R4 ) ) = R4 by L653 , L649 , FINSEQ_1:59 , XXREAL_0:2;
L655: ( len ( ( R13 | R4 ) ^ <* R12 *> ) ) = ( R4 + 1 ) by L654 , FINSEQ_2:16;
L656: R4 <= ( len R13 ) by L649 , L653 , XXREAL_0:2;
L657: (1 <= ( D35 + 1 ) & ( D35 + 1 ) <= ( len ( R13 /^ R4 ) )) by L656 , L651 , NAT_1:11 , RFINSEQ:def 1;
L658: ( D35 + 1 ) in ( dom ( R13 /^ R4 ) ) by L657 , FINSEQ_3:25;
L659: ( ( R4 + 1 ) + ( D35 + 1 ) ) = ( R15 + 1 );
thus L660: ( ( Ins (R13 , R4 , R12) ) /. ( R15 + 1 ) ) = ( ( R13 /^ R4 ) /. ( D35 + 1 ) ) by L659 , L655 , L658 , FINSEQ_4:69
.= ( R13 /. ( R4 + ( D35 + 1 ) ) ) by L658 , L191
.= ( R13 /. R15 );
end;
theorem
L661: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ((1 <= R4 & R13 is non  empty) implies ( ( Ins (R13 , R4 , R12) ) /. 1 ) = ( R13 /. 1 ))))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume that
L662: 1 <= R4
and
L663: R13 is non  empty;
L664: (R4 <= ( len R13 ) implies ( len ( R13 | R4 ) ) = R4) by FINSEQ_1:59;
L665: 1 <= ( len R13 ) by L663 , NAT_1:14;
L666: 1 <= ( len ( R13 | R4 ) ) by L665 , L662 , L664 , FINSEQ_1:58;
L667: 1 in ( dom ( R13 | R4 ) ) by L666 , FINSEQ_3:25;
thus L668: thesis by L667 , L637;
end;
theorem
L669: (for R4 being Nat holds (for R11 being non  empty set holds (for R12 being (Element of R11) holds (for R13 being (FinSequence of R11) holds ((R13 is  one-to-one & (not R12 in ( rng R13 ))) implies ( Ins (R13 , R4 , R12) ) is  one-to-one)))))
proof
let R4 being Nat;
let R11 being non  empty set;
let R12 being (Element of R11);
let R13 being (FinSequence of R11);
assume that
L670: R13 is  one-to-one
and
L671: (not R12 in ( rng R13 ));
L672:
now
let C108 being set;
assume L673: C108 in ( rng ( R13 /^ R4 ) );
L674: ( rng ( R13 /^ R4 ) ) c= ( rng R13 ) by L251;
L675: C108 in ( rng R13 ) by L674 , L673;
L676: (not C108 in { R12 }) by L675 , L671 , TARSKI:def 1;
L677: (not C108 in ( rng <* R12 *> )) by L676 , FINSEQ_1:38;
L678: ( rng ( R13 | R4 ) ) misses ( rng ( R13 /^ R4 ) ) by L670 , L270;
L679: (not C108 in ( rng ( R13 | R4 ) )) by L678 , L673 , XBOOLE_0:3;
L680: (not C108 in ( ( rng ( R13 | R4 ) ) \/ ( rng <* R12 *> ) )) by L679 , L677 , XBOOLE_0:def 3;
thus L681: (not C108 in ( rng ( ( R13 | R4 ) ^ <* R12 *> ) )) by L680 , FINSEQ_1:31;
end;
L682: ( rng ( ( R13 | R4 ) ^ <* R12 *> ) ) misses ( rng ( R13 /^ R4 ) ) by L672 , XBOOLE_0:3;
L683:
now
let C109 being set;
assume L684: C109 in ( rng <* R12 *> );
L685: C109 in { R12 } by L684 , FINSEQ_1:38;
L686: (not C109 in ( rng R13 )) by L685 , L671 , TARSKI:def 1;
L687: ( rng ( R13 | R4 ) ) c= ( rng R13 ) by L117;
thus L688: (not C109 in ( rng ( R13 | R4 ) )) by L687 , L686;
end;
L689: (<* R12 *> is  one-to-one & ( rng ( R13 | R4 ) ) misses ( rng <* R12 *> )) by L683 , FINSEQ_3:93 , XBOOLE_0:3;
L690: ( ( R13 | R4 ) ^ <* R12 *> ) is  one-to-one by L689 , L670 , FINSEQ_3:91;
thus L691: thesis by L690 , L670 , L682 , FINSEQ_3:91;
end;
begin
theorem
L692: (for R11 being non  empty set holds (for R13 being (FinSequence of R11) holds (for B71 , B72 being Nat holds (B71 <= B72 implies (( ( R13 | B71 ) | B72 ) = ( R13 | B71 ) & ( ( R13 | B72 ) | B71 ) = ( R13 | B71 ))))))
proof
let R11 being non  empty set;
let R13 being (FinSequence of R11);
let C110 , C111 being Nat;
assume L693: C110 <= C111;
L694: ( len ( R13 | C110 ) ) <= C110 by L111;
thus L695: ( ( R13 | C110 ) | C111 ) = ( R13 | C110 ) by L694 , L693 , FINSEQ_1:58 , XXREAL_0:2;
L696: ( Seg C110 ) c= ( Seg C111 ) by L693 , FINSEQ_1:5;
thus L697: thesis by L696 , FUNCT_1:51;
end;
theorem
L698: (for R11 being non  empty set holds (for B73 being Nat holds ( ( <*> R11 ) | B73 ) = ( <*> R11 )));
theorem
L699: (for R11 being non  empty set holds ( Rev ( <*> R11 ) ) = ( <*> R11 ));
registration
cluster non  trivial for FinSequence;
existence
proof
take <* ( 0 ) , ( 0 ) *>;
thus L700: thesis;
end;
end;
theorem
L702: (for R11 being non  empty set holds (for B74 being (FinSequence of R11) holds (for B75 , B76 being Nat holds ( ( B74 /^ B75 ) | ( B76 -' B75 ) ) = ( ( B74 | B76 ) /^ B75 ))))
proof
let R11 being non  empty set;
let C112 being (FinSequence of R11);
let C113 , C114 being Nat;
per cases ;
suppose L703: C113 <= C114;

per cases ;
suppose L704: C114 <= ( len C112 );

L705: ( C114 - C113 ) <= ( ( len C112 ) - C113 ) by L704 , XREAL_1:9;
L706: C113 <= ( len ( C112 | C114 ) ) by L703 , L704 , FINSEQ_1:59;
L707: ( len ( ( C112 | C114 ) /^ C113 ) ) = ( ( len ( C112 | C114 ) ) - C113 ) by L706 , RFINSEQ:def 1
.= ( C114 - C113 ) by L704 , FINSEQ_1:59
.= ( C114 -' C113 ) by L703 , XREAL_1:233;
L708: C113 <= ( len C112 ) by L703 , L704 , XXREAL_0:2;
L709: ( len ( C112 /^ C113 ) ) = ( ( len C112 ) - C113 ) by L708 , RFINSEQ:def 1;
L710: ( C114 -' C113 ) <= ( len ( C112 /^ C113 ) ) by L709 , L703 , L705 , XREAL_1:233;
L711: (for B77 being Nat holds ((1 <= B77 & B77 <= ( len ( ( C112 | C114 ) /^ C113 ) )) implies ( ( ( C112 /^ C113 ) | ( C114 -' C113 ) ) . B77 ) = ( ( ( C112 | C114 ) /^ C113 ) . B77 )))
proof
let C115 being Nat;
assume that
L712: 1 <= C115
and
L713: C115 <= ( len ( ( C112 | C114 ) /^ C113 ) );
L714: C115 in ( dom ( ( C112 | C114 ) /^ C113 ) ) by L712 , L713 , FINSEQ_3:25;
L715: C115 <= ( C114 - C113 ) by L703 , L707 , L713 , XREAL_1:233;
L716: ( C115 + C113 ) <= ( ( C114 - C113 ) + C113 ) by L715 , XREAL_1:6;
L717: C115 <= ( len ( C112 /^ C113 ) ) by L710 , L707 , L713 , XXREAL_0:2;
L718: C115 in ( dom ( C112 /^ C113 ) ) by L717 , L712 , FINSEQ_3:25;
L719: C115 in ( NAT ) by ORDINAL1:def 12;
L720: C115 in ( Seg ( C114 -' C113 ) ) by L719 , L707 , L712 , L713;
L721: ( ( ( C112 /^ C113 ) | ( C114 -' C113 ) ) . C115 ) = ( ( C112 /^ C113 ) . C115 ) by L720 , FUNCT_1:49
.= ( C112 . ( C115 + C113 ) ) by L708 , L718 , RFINSEQ:def 1
.= ( ( C112 | C114 ) . ( C115 + C113 ) ) by L716 , FINSEQ_3:112
.= ( ( ( C112 | C114 ) /^ C113 ) . C115 ) by L706 , L714 , RFINSEQ:def 1;
thus L722: thesis by L721;
end;
L723: ( len ( ( C112 /^ C113 ) | ( C114 -' C113 ) ) ) = ( C114 -' C113 ) by L710 , FINSEQ_1:59;
thus L724: thesis by L723 , L707 , L711 , FINSEQ_1:14;
end;
suppose L725: C114 > ( len C112 );

L726: ( len ( C112 /^ C113 ) ) = ( ( len C112 ) -' C113 ) by RFINSEQ:29;
L727: ( C112 | C114 ) = C112 by L725 , FINSEQ_1:58;
thus L728: thesis by L727 , L725 , L726 , FINSEQ_1:58 , NAT_D:42;
end;
end;
suppose L730: C113 > C114;

reconsider D36 = C113 , D37 = C114 as (Element of ( NAT )) by ORDINAL1:def 12;
L731: ( C113 - C113 ) > ( C114 - C113 ) by L730 , XREAL_1:9;
L732: ( C114 -' C113 ) = ( 0 ) by L731 , XREAL_0:def 2;
L733: ( dom ( ( C112 /^ C113 ) | ( C114 -' C113 ) ) ) = ( ( dom ( C112 /^ C113 ) ) /\ ( {} ( NAT ) ) ) by L732
.= ( {} ( NAT ) );
L734: ( ( C112 /^ C113 ) | ( C114 -' C113 ) ) = ( <*> R11 ) by L733;
per cases ;
suppose L735: C113 <= ( len C112 );

L736: D36 > ( len ( C112 | D37 ) ) by L735 , L730 , FINSEQ_1:59 , XXREAL_0:2;
thus L737: thesis by L736 , L734 , L242;
end;
suppose L738: C113 > ( len C112 );

L739: ( len ( C112 | D37 ) ) <= ( len C112 ) by L108;
thus L740: thesis by L739 , L734 , L738 , L242 , XXREAL_0:2;
end;
end;
end;
theorem
L743: (for R16 being set holds (for R17 being (FinSequence of R16) holds (( len R17 ) >= 2 implies ( R17 | 2 ) = <* ( R17 /. 1 ) , ( R17 /. 2 ) *>)))
proof
let R16 being set;
let R17 being (FinSequence of R16);
set D38 = ( R17 /. 1 );
set D39 = ( R17 /. 2 );
assume L744: ( len R17 ) >= 2;
L745: ( len ( R17 | 2 ) ) = 2 by L744 , FINSEQ_1:59;
L746: R16 is non  empty by L744;
reconsider D40 = R16 as non  empty set by L746;
reconsider D41 = R17 as (FinSequence of D40);
L747: 2 in ( dom ( D41 | 2 ) ) by L745 , FINSEQ_3:25;
L748: D39 = ( ( D41 | 2 ) /. 2 ) by L747 , FINSEQ_4:70
.= ( ( D41 | 2 ) . 2 ) by L745 , FINSEQ_4:15;
L749: 1 in ( dom ( D41 | 2 ) ) by L745 , FINSEQ_3:25;
L750: D38 = ( ( D41 | 2 ) /. 1 ) by L749 , FINSEQ_4:70
.= ( ( D41 | 2 ) . 1 ) by L745 , FINSEQ_4:15;
thus L751: thesis by L750 , L745 , L748 , FINSEQ_1:44;
end;
theorem
L752: (for R3 being Nat holds (for R16 being set holds (for R17 being (FinSequence of R16) holds (( R3 + 1 ) <= ( len R17 ) implies ( R17 | ( R3 + 1 ) ) = ( ( R17 | R3 ) ^ <* ( R17 /. ( R3 + 1 ) ) *> )))))
proof
let R3 being Nat;
let R16 being set;
let R17 being (FinSequence of R16);
L753: 1 <= ( R3 + 1 ) by NAT_1:12;
assume L754: ( R3 + 1 ) <= ( len R17 );
L755: ( R3 + 1 ) in ( dom R17 ) by L754 , L753 , FINSEQ_3:25;
L756: ( R17 | ( Seg ( R3 + 1 ) ) ) = ( ( R17 | R3 ) ^ <* ( R17 . ( R3 + 1 ) ) *> ) by L755 , L60;
thus L757: thesis by L756 , L755 , PARTFUN1:def 6;
end;
theorem
L758: (for B78 being set holds (for B79 being (FinSequence of B78) holds (for B80 being Nat holds (B80 < ( len B79 ) implies ( B79 | ( B80 + 1 ) ) = ( ( B79 | B80 ) ^ <* ( B79 . ( B80 + 1 ) ) *> )))))
proof
let C116 being set;
let C117 being (FinSequence of C116);
let C118 being Nat;
assume L759: C118 < ( len C117 );
L760: ( C118 + 1 ) <= ( len C117 ) by L759 , NAT_1:13;
L761: 1 <= ( C118 + 1 ) by NAT_1:11;
L762: ( C118 + 1 ) in ( dom C117 ) by L761 , L760 , FINSEQ_3:25;
L763: ( C117 | ( C118 + 1 ) ) = ( ( C117 | C118 ) ^ <* ( C117 /. ( C118 + 1 ) ) *> ) by L760 , L752;
thus L764: thesis by L763 , L762 , PARTFUN1:def 6;
end;
theorem
L765: (for B81 being non  empty set holds (for B82 being (FinSequence of B81) holds (for B83 being Nat holds ((1 <= B83 & B83 <= ( len B82 )) implies B82 = ( ( ( B82 | ( B83 -' 1 ) ) ^ <* ( B82 . B83 ) *> ) ^ ( B82 /^ B83 ) )))))
proof
let C119 being non  empty set;
let C120 being (FinSequence of C119);
let C121 being Nat;
assume that
L766: 1 <= C121
and
L767: C121 <= ( len C120 );
L768: ( len C120 ) >= ( ( C121 -' 1 ) + 1 ) by L766 , L767 , XREAL_1:235;
L769: ( len C120 ) > ( C121 -' 1 ) by L768 , NAT_1:13;
L770: ( C120 | C121 ) = ( C120 | ( ( C121 -' 1 ) + 1 ) ) by L766 , XREAL_1:235
.= ( ( C120 | ( C121 -' 1 ) ) ^ <* ( C120 . ( ( C121 -' 1 ) + 1 ) ) *> ) by L769 , L758
.= ( ( C120 | ( C121 -' 1 ) ) ^ <* ( C120 . C121 ) *> ) by L766 , XREAL_1:235;
thus L771: thesis by L770 , RFINSEQ:8;
end;
