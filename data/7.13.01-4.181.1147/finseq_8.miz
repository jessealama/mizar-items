:: Concatenation of Finite Sequences Reducing Overlapping Part and an
:: Argument of Separators of Sequential Files
::  by Hirofumi Fukura and Yatsuka Nakamura
::
:: Received March 18, 2004
:: Copyright (c) 2004-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FINSEQ_8, ARYTM_1, RELAT_1, FINSEQ_1, FUNCT_1, FINSEQ_5, RFINSEQ,
      JORDAN3, ARYTM_3, NUMBERS, ORDINAL4, TARSKI, XBOOLE_0, XXREAL_0, CARD_1,
      SUBSET_1, NAT_1;
 notations TARSKI, XBOOLE_0, SUBSET_1, NUMBERS, XCMPLX_0, XXREAL_0, ORDINAL1,
      NAT_1, NAT_D, RELAT_1, RFINSEQ, FINSEQ_1, FUNCT_1, FINSEQ_6, FINSEQ_5;
 constructors SQUARE_1, NAT_1, RFINSEQ, NAT_D, FINSEQ_5, FINSEQ_6, REAL_1;
 registrations RELSET_1, XXREAL_0, XREAL_0, NAT_1, FINSEQ_1, ORDINAL1,
      XBOOLE_0, CARD_1;
 requirements NUMERALS, REAL, BOOLE, SUBSET, ARITHM;
 definitions FINSEQ_1;
 theorems NAT_1, NAT_2, FINSEQ_1, FINSEQ_3, FINSEQ_5, FINSEQ_6, RFINSEQ,
      RELAT_1, XREAL_1, XBOOLE_1, XXREAL_0, ORDINAL1, XREAL_0, NAT_D;
 schemes NAT_1;

begin
definition
let C1 being set;
let C2 , C3 being (FinSequence of C1);
redefine func C2 ^ C3 -> (FinSequence of C1);

correctness
proof
L1: ( rng ( C2 ^ C3 ) ) c= ( ( rng C2 ) \/ ( rng C3 ) ) by FINSEQ_1:31;
thus L2: thesis by L1;
end;
end;
theorem
L4: (for B1 being non  empty set holds (for B2 , B3 being (FinSequence of B1) holds (( len B2 ) >= 1 implies ( mid (( B2 ^ B3 ) , 1 , ( len B2 )) ) = B2)))
proof
let C4 being non  empty set;
let C5 , C6 being (FinSequence of C4);
assume L5: ( len C5 ) >= 1;
L6: ( ( len C5 ) - 1 ) >= ( 0 ) by L5 , XREAL_1:48;
L7: ( ( len C5 ) - 1 ) = ( ( len C5 ) -' 1 ) by L6 , XREAL_0:def 2;
L8: ( ( ( len C5 ) -' 1 ) + 1 ) = ( len C5 ) by L7;
L9: ( 1 - 1 ) = ( 0 );
L10: ( 1 -' 1 ) = ( 0 ) by L9 , XREAL_0:def 2;
L11: ( ( C5 ^ C6 ) | ( len C5 ) ) = C5 by FINSEQ_5:23;
L12: ( ( ( C5 ^ C6 ) /^ ( 0 ) ) | ( len C5 ) ) = C5 by L11 , FINSEQ_5:28;
thus L13: thesis by L12 , L5 , L8 , L10 , FINSEQ_6:def 3;
end;
theorem
L14: (for B4 being set holds (for B5 being (FinSequence of B4) holds (for B6 being (Element of ( NAT )) holds (B6 >= ( len B5 ) implies ( B5 /^ B6 ) = ( <*> B4 )))))
proof
let C7 being set;
let C8 being (FinSequence of C7);
let C9 being (Element of ( NAT ));
assume L15: C9 >= ( len C8 );
per cases  by L15 , XXREAL_0:1;
suppose L16: C9 > ( len C8 );

thus L17: thesis by L16 , RFINSEQ:def 1;
end;
suppose L18: C9 = ( len C8 );

L19: ( len ( C8 /^ C9 ) ) = ( ( len C8 ) - C9 ) by L18 , RFINSEQ:def 1
.= ( 0 ) by L18;
thus L20: thesis by L19;
end;
end;
theorem
L22: (for B7 being non  empty set holds (for B8 , B9 being (Element of ( NAT )) holds ( mid (( <*> B7 ) , B8 , B9) ) = ( <*> B7 )))
proof
let C10 being non  empty set;
let C11 , C12 being (Element of ( NAT ));
per cases ;
suppose L23: C11 <= C12;

thus L24: ( mid (( <*> C10 ) , C11 , C12) ) = ( ( ( <*> C10 ) /^ ( C11 -' 1 ) ) | ( ( C12 -' C11 ) + 1 ) ) by L23 , FINSEQ_6:def 3
.= ( ( <*> C10 ) | ( ( C12 -' C11 ) + 1 ) ) by FINSEQ_6:80
.= ( <*> C10 ) by FINSEQ_5:78;
end;
suppose L25: C11 > C12;

thus L26: ( mid (( <*> C10 ) , C11 , C12) ) = ( Rev ( ( ( <*> C10 ) /^ ( C12 -' 1 ) ) | ( ( C11 -' C12 ) + 1 ) ) ) by L25 , FINSEQ_6:def 3
.= ( Rev ( ( <*> C10 ) | ( ( C11 -' C12 ) + 1 ) ) ) by FINSEQ_6:80
.= ( Rev ( <*> C10 ) ) by FINSEQ_5:78
.= ( <*> C10 ) by FINSEQ_5:79;
end;
end;
definition
let C13 being FinSequence;
let C14 , C15 being Nat;
func smid (C13 , C14 , C15) -> FinSequence equals 
( ( C13 /^ ( C14 -' 1 ) ) | ( ( C15 + 1 ) -' C14 ) );
correctness;
end;
definition
let C16 being set;
let C17 being (FinSequence of C16);
let C18 , C19 being Nat;
redefine func smid (C17 , C18 , C19) -> (FinSequence of C16);

correctness
proof
L29: ( smid (C17 , C18 , C19) ) = ( ( C17 /^ ( C18 -' 1 ) ) | ( ( C19 + 1 ) -' C18 ) );
thus L30: thesis by L29;
end;
end;
theorem
L32: (for B10 being FinSequence holds (for B11 , B12 being (Element of ( NAT )) holds (B11 <= B12 implies ( smid (B10 , B11 , B12) ) = ( mid (B10 , B11 , B12) ))))
proof
let C20 being FinSequence;
let C21 , C22 being (Element of ( NAT ));
assume L33: C21 <= C22;
L34: ( ( C22 -' C21 ) + 1 ) = ( ( C22 - C21 ) + 1 ) by L33 , XREAL_1:233
.= ( ( C22 + 1 ) - C21 )
.= ( ( C22 + 1 ) -' C21 ) by L33 , NAT_1:12 , XREAL_1:233;
thus L35: thesis by L34 , L33 , FINSEQ_6:def 3;
end;
theorem
L36: (for B13 being non  empty set holds (for B14 being (FinSequence of B13) holds (for B15 being (Element of ( NAT )) holds ( smid (B14 , 1 , B15) ) = ( B14 | B15 ))))
proof
let C23 being non  empty set;
let C24 being (FinSequence of C23);
let C25 being (Element of ( NAT ));
thus L37: ( smid (C24 , 1 , C25) ) = ( ( C24 /^ ( 0 ) ) | ( ( C25 + 1 ) -' 1 ) ) by NAT_2:8
.= ( C24 | ( ( C25 + 1 ) -' 1 ) ) by FINSEQ_5:28
.= ( C24 | C25 ) by NAT_D:34;
end;
theorem
L38: (for B16 being non  empty set holds (for B17 being (FinSequence of B16) holds (for B18 being (Element of ( NAT )) holds (( len B17 ) <= B18 implies ( smid (B17 , 1 , B18) ) = B17))))
proof
let C26 being non  empty set;
let C27 being (FinSequence of C26);
let C28 being (Element of ( NAT ));
assume L39: ( len C27 ) <= C28;
thus L40: ( smid (C27 , 1 , C28) ) = ( C27 | C28 ) by L36
.= C27 by L39 , FINSEQ_1:58;
end;
theorem
L41: (for B19 being set holds (for B20 being (FinSequence of B19) holds (for B21 , B22 being (Element of ( NAT )) holds (B21 > B22 implies ( smid (B20 , B21 , B22) ) = ( {} )))))
proof
let C29 being set;
let C30 being (FinSequence of C29);
let C31 , C32 being (Element of ( NAT ));
assume L42: C31 > C32;
reconsider D1 = ( C30 /^ ( C31 -' 1 ) ) as (FinSequence of C29);
L43: ( C32 + 1 ) <= C31 by L42 , NAT_1:13;
L44: ( smid (C30 , C31 , C32) ) = ( D1 | ( 0 ) ) by L43 , NAT_2:8;
thus L45: thesis by L44;
end;
theorem
L46: (for B23 being set holds (for B24 being (FinSequence of B23) holds (for B25 being (Element of ( NAT )) holds ( smid (B24 , ( 0 ) , B25) ) = ( smid (B24 , 1 , ( B25 + 1 )) ))))
proof
let C33 being set;
let C34 being (FinSequence of C33);
let C35 being (Element of ( NAT ));
thus L47: ( smid (C34 , ( 0 ) , C35) ) = ( ( C34 /^ ( 0 ) ) | ( ( C35 + 1 ) -' ( 0 ) ) ) by NAT_2:8
.= ( C34 | ( ( C35 + 1 ) -' ( 0 ) ) ) by FINSEQ_5:28
.= ( C34 | ( C35 + 1 ) ) by NAT_D:40
.= ( C34 | ( ( ( C35 + 1 ) + 1 ) -' 1 ) ) by NAT_D:34
.= ( ( C34 /^ ( 0 ) ) | ( ( ( C35 + 1 ) + 1 ) -' 1 ) ) by FINSEQ_5:28
.= ( smid (C34 , 1 , ( C35 + 1 )) ) by NAT_2:8;
end;
theorem
L48: (for B26 being non  empty set holds (for B27 , B28 being (FinSequence of B26) holds ( smid (( B27 ^ B28 ) , ( ( len B27 ) + 1 ) , ( ( len B27 ) + ( len B28 ) )) ) = B28))
proof
let C36 being non  empty set;
let C37 , C38 being (FinSequence of C36);
L49: ( ( ( ( len C38 ) + ( len C37 ) ) + 1 ) -' ( ( len C37 ) + 1 ) ) = ( ( ( len C38 ) + ( ( len C37 ) + 1 ) ) -' ( ( len C37 ) + 1 ) )
.= ( len C38 ) by NAT_D:34;
L50: ( C38 | ( ( ( ( len C38 ) + ( len C37 ) ) + 1 ) -' ( ( len C37 ) + 1 ) ) ) = C38 by L49 , FINSEQ_1:58;
L51: ( ( ( C37 ^ C38 ) /^ ( len C37 ) ) | ( ( ( ( len C37 ) + ( len C38 ) ) + 1 ) -' ( ( len C37 ) + 1 ) ) ) = C38 by L50 , FINSEQ_5:37;
thus L52: thesis by L51 , NAT_D:34;
end;
definition
let C39 being non  empty set;
let C40 , C41 being (FinSequence of C39);
func ovlpart (C40 , C41) -> (FinSequence of C39) means 
:L53: (( len it ) <= ( len C41 ) & it = ( smid (C41 , 1 , ( len it )) ) & it = ( smid (C40 , ( ( ( len C40 ) -' ( len it ) ) + 1 ) , ( len C40 )) ) & (for B29 being Nat holds ((B29 <= ( len C41 ) & ( smid (C41 , 1 , B29) ) = ( smid (C40 , ( ( ( len C40 ) -' B29 ) + 1 ) , ( len C40 )) )) implies B29 <= ( len it ))));
existence
proof
defpred S1[ Nat ] means ($1 <= ( len C41 ) & ( smid (C41 , 1 , $1) ) = ( smid (C40 , ( ( ( len C40 ) -' $1 ) + 1 ) , ( len C40 )) ));
L54: ( smid (C41 , 1 , ( 0 )) ) = ( {} ) by L41;
L55: ( ( ( len C40 ) -' ( 0 ) ) + 1 ) = ( ( ( len C40 ) - ( 0 ) ) + 1 ) by XREAL_1:233
.= ( ( len C40 ) + 1 );
L56: ( smid (C40 , ( ( ( len C40 ) -' ( 0 ) ) + 1 ) , ( len C40 )) ) = ( {} ) by L55 , L41 , XREAL_1:29;
L57: (ex B30 being Nat st S1[ B30 ]) by L56 , L54;
L58: (for B31 being Nat holds (S1[ B31 ] implies B31 <= ( len C41 )));
consider C42 being Nat such that L59: (S1[ C42 ] & (for B32 being Nat holds (S1[ B32 ] implies B32 <= C42))) from NAT_1:sch 6(L58 , L57);
reconsider D2 = C42 as (Element of ( NAT )) by ORDINAL1:def 12;
set D3 = ( smid (C41 , 1 , D2) );
L60:
now
per cases ;
case L61: D2 > ( 0 );
L62: ( ( 0 ) + 1 ) <= D2 by L61 , NAT_1:13;
L63: D3 = ( mid (C41 , 1 , D2) ) by L62 , L32;
L64:
now
per cases ;
case L65: ( len C41 ) > ( 0 );
L66: ( ( 0 ) + 1 ) <= ( len C41 ) by L65 , NAT_1:13;
thus L67: ( len D3 ) = ( ( D2 -' 1 ) + 1 ) by L66 , L59 , L62 , L63 , FINSEQ_6:118
.= ( ( D2 - 1 ) + 1 ) by L62 , XREAL_1:233
.= D2;
end;
case L68: ( len C41 ) <= ( 0 );
thus L69: contradiction by L68 , L59 , L61;
end;
end;
thus L71: ( len D3 ) = D2 by L64;
end;
case L72: D2 <= ( 0 );
L73: D2 = ( 0 ) by L72;
L74: D3 = ( {} ) by L72 , L41;
thus L75: ( len D3 ) = D2 by L74 , L73;
end;
end;
thus L77: thesis by L60 , L59;
end;
uniqueness
proof
let C43 , C44 being (FinSequence of C39);
assume that
L78: ( len C43 ) <= ( len C41 )
and
L79: C43 = ( smid (C41 , 1 , ( len C43 )) )
and
L80: C43 = ( smid (C40 , ( ( ( len C40 ) -' ( len C43 ) ) + 1 ) , ( len C40 )) )
and
L81: (for B33 being Nat holds ((B33 <= ( len C41 ) & ( smid (C41 , 1 , B33) ) = ( smid (C40 , ( ( ( len C40 ) -' B33 ) + 1 ) , ( len C40 )) )) implies B33 <= ( len C43 )))
and
L82: ( len C44 ) <= ( len C41 )
and
L83: C44 = ( smid (C41 , 1 , ( len C44 )) )
and
L84: C44 = ( smid (C40 , ( ( ( len C40 ) -' ( len C44 ) ) + 1 ) , ( len C40 )) )
and
L85: (for B34 being Nat holds ((B34 <= ( len C41 ) & ( smid (C41 , 1 , B34) ) = ( smid (C40 , ( ( ( len C40 ) -' B34 ) + 1 ) , ( len C40 )) )) implies B34 <= ( len C44 )));
L86: ( len C43 ) <= ( len C44 ) by L78 , L79 , L80 , L85;
L87: ( len C44 ) <= ( len C43 ) by L81 , L82 , L83 , L84;
thus L88: thesis by L87 , L79 , L83 , L86 , XXREAL_0:1;
end;
end;
theorem
L90: (for B35 being non  empty set holds (for B36 , B37 being (FinSequence of B35) holds ( len ( ovlpart (B36 , B37) ) ) <= ( len B36 )))
proof
let C45 being non  empty set;
let C46 , C47 being (FinSequence of C45);
L91:
now
assume L92: ( len ( ovlpart (C46 , C47) ) ) > ( len C46 );
L93: ( ( len C46 ) - ( len ( ovlpart (C46 , C47) ) ) ) < ( 0 ) by L92 , XREAL_1:49;
L94: ( ( len C46 ) -' ( len ( ovlpart (C46 , C47) ) ) ) = ( 0 ) by L93 , XREAL_0:def 2;
L95: ( smid (C46 , ( ( ( len C46 ) -' ( len ( ovlpart (C46 , C47) ) ) ) + 1 ) , ( len C46 )) ) = C46 by L94 , L38;
thus L96: contradiction by L95 , L92 , L53;
end;
thus L97: thesis by L91;
end;
definition
let C48 being non  empty set;
let C49 , C50 being (FinSequence of C48);
func ovlcon (C49 , C50) -> (FinSequence of C48) equals 
( C49 ^ ( C50 /^ ( len ( ovlpart (C49 , C50) ) ) ) );
correctness;
end;
theorem
L99: (for B38 being non  empty set holds (for B39 , B40 being (FinSequence of B38) holds ( ovlcon (B39 , B40) ) = ( ( B39 | ( ( len B39 ) -' ( len ( ovlpart (B39 , B40) ) ) ) ) ^ B40 )))
proof
let C51 being non  empty set;
let C52 , C53 being (FinSequence of C51);
L100: ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) = ( ( len C52 ) - ( len ( ovlpart (C52 , C53) ) ) ) by L90 , XREAL_1:233;
L101: ( ( len C52 ) + 1 ) <= ( ( ( len C52 ) + 1 ) + ( len ( ovlpart (C52 , C53) ) ) ) by NAT_1:12;
L102: ( ( ( len C52 ) + 1 ) - ( len ( ovlpart (C52 , C53) ) ) ) <= ( ( ( ( len C52 ) + 1 ) + ( len ( ovlpart (C52 , C53) ) ) ) - ( len ( ovlpart (C52 , C53) ) ) ) by L101 , XREAL_1:9;
L103: ( ( ( len C52 ) + 1 ) -' ( ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) + 1 ) ) = ( ( ( len C52 ) + 1 ) - ( ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) + 1 ) ) by L102 , L100 , XREAL_1:233
.= ( len ( ovlpart (C52 , C53) ) ) by L100;
L104: ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) <= ( len C52 ) by NAT_D:35;
L105: ( len ( C52 /^ ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) ) = ( ( len C52 ) - ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) by L104 , RFINSEQ:def 1
.= ( ( 0 ) + ( len ( ovlpart (C52 , C53) ) ) ) by L100;
L106: ( ovlpart (C52 , C53) ) = ( smid (C52 , ( ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) + 1 ) , ( len C52 )) ) by L53
.= ( ( C52 /^ ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) | ( len ( ovlpart (C52 , C53) ) ) ) by L103 , NAT_D:34
.= ( C52 /^ ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) by L105 , FINSEQ_1:58;
L107: ( ovlpart (C52 , C53) ) = ( smid (C53 , 1 , ( len ( ovlpart (C52 , C53) ) )) ) by L53
.= ( ( C53 /^ ( ( ( 0 ) + 1 ) -' 1 ) ) | ( len ( ovlpart (C52 , C53) ) ) ) by NAT_D:34
.= ( ( C53 /^ ( 0 ) ) | ( len ( ovlpart (C52 , C53) ) ) ) by NAT_D:34
.= ( C53 | ( len ( ovlpart (C52 , C53) ) ) ) by FINSEQ_5:28;
thus L108: ( ovlcon (C52 , C53) ) = ( ( ( C52 | ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) ^ ( C53 | ( len ( ovlpart (C52 , C53) ) ) ) ) ^ ( C53 /^ ( len ( ovlpart (C52 , C53) ) ) ) ) by L107 , L106 , RFINSEQ:8
.= ( ( C52 | ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) ^ ( ( C53 | ( len ( ovlpart (C52 , C53) ) ) ) ^ ( C53 /^ ( len ( ovlpart (C52 , C53) ) ) ) ) ) by FINSEQ_1:32
.= ( ( C52 | ( ( len C52 ) -' ( len ( ovlpart (C52 , C53) ) ) ) ) ^ C53 ) by RFINSEQ:8;
end;
definition
let C54 being non  empty set;
let C55 , C56 being (FinSequence of C54);
func ovlldiff (C55 , C56) -> (FinSequence of C54) equals 
( C55 | ( ( len C55 ) -' ( len ( ovlpart (C55 , C56) ) ) ) );
coherence;
end;
definition
let C57 being non  empty set;
let C58 , C59 being (FinSequence of C57);
func ovlrdiff (C58 , C59) -> (FinSequence of C57) equals 
( C59 /^ ( len ( ovlpart (C58 , C59) ) ) );
coherence;
end;
theorem
L111: (for B41 being non  empty set holds (for B42 , B43 being (FinSequence of B41) holds (( ovlcon (B42 , B43) ) = ( ( ( ovlldiff (B42 , B43) ) ^ ( ovlpart (B42 , B43) ) ) ^ ( ovlrdiff (B42 , B43) ) ) & ( ovlcon (B42 , B43) ) = ( ( ovlldiff (B42 , B43) ) ^ ( ( ovlpart (B42 , B43) ) ^ ( ovlrdiff (B42 , B43) ) ) ))))
proof
let C60 being non  empty set;
let C61 , C62 being (FinSequence of C60);
L112: ( ( ovlpart (C61 , C62) ) ^ ( C62 /^ ( len ( ovlpart (C61 , C62) ) ) ) ) = ( ( smid (C62 , 1 , ( len ( ovlpart (C61 , C62) ) )) ) ^ ( C62 /^ ( len ( ovlpart (C61 , C62) ) ) ) ) by L53
.= ( ( C62 | ( len ( ovlpart (C61 , C62) ) ) ) ^ ( C62 /^ ( len ( ovlpart (C61 , C62) ) ) ) ) by L36
.= C62 by RFINSEQ:8;
thus L113: ( ovlcon (C61 , C62) ) = ( ( C61 | ( ( len C61 ) -' ( len ( ovlpart (C61 , C62) ) ) ) ) ^ ( ( ovlpart (C61 , C62) ) ^ ( C62 /^ ( len ( ovlpart (C61 , C62) ) ) ) ) ) by L112 , L99
.= ( ( ( ovlldiff (C61 , C62) ) ^ ( ovlpart (C61 , C62) ) ) ^ ( ovlrdiff (C61 , C62) ) ) by FINSEQ_1:32;
thus L114: thesis by L113 , FINSEQ_1:32;
end;
theorem
L115: (for B44 being non  empty set holds (for B45 being (FinSequence of B44) holds (( ovlcon (B45 , B45) ) = B45 & ( ovlpart (B45 , B45) ) = B45 & ( ovlldiff (B45 , B45) ) = ( {} ) & ( ovlrdiff (B45 , B45) ) = ( {} ))))
proof
let C63 being non  empty set;
let C64 being (FinSequence of C63);
L116: ( ovlpart (C64 , C64) ) = ( smid (C64 , 1 , ( len ( ovlpart (C64 , C64) ) )) ) by L53;
L117: ( ( ( len C64 ) -' ( len C64 ) ) + 1 ) = ( ( ( len C64 ) - ( len C64 ) ) + 1 ) by XREAL_1:233
.= ( ( 0 ) + 1 );
L118: ( smid (C64 , 1 , ( len C64 )) ) = ( smid (C64 , ( ( ( len C64 ) -' ( len C64 ) ) + 1 ) , ( len C64 )) ) by L117;
L119: ( len C64 ) <= ( len ( ovlpart (C64 , C64) ) ) by L118 , L53;
L120: ( ovlcon (C64 , C64) ) = ( C64 ^ ( <*> C63 ) ) by L119 , L14
.= C64 by FINSEQ_1:34;
L121: ( ovlldiff (C64 , C64) ) = ( C64 | ( ( len C64 ) -' ( len C64 ) ) ) by L116 , L119 , L38
.= ( C64 | ( 0 ) ) by XREAL_1:232
.= ( {} );
L122: ( ovlrdiff (C64 , C64) ) = ( <*> C63 ) by L119 , L14
.= ( {} );
thus L123: thesis by L122 , L116 , L119 , L120 , L121 , L38;
end;
theorem
L124: (for B46 being non  empty set holds (for B47 , B48 being (FinSequence of B46) holds (( ovlpart (( B47 ^ B48 ) , B48) ) = B48 & ( ovlpart (B47 , ( B47 ^ B48 )) ) = B47)))
proof
let C65 being non  empty set;
let C66 , C67 being (FinSequence of C65);
L125: ( len ( ovlpart (( C66 ^ C67 ) , C67) ) ) <= ( len C67 ) by L53;
L126: ( smid (C67 , 1 , ( len C67 )) ) = ( C67 | ( len C67 ) ) by L36
.= C67 by FINSEQ_1:58;
L127: ( ( ( len ( C66 ^ C67 ) ) -' ( len C67 ) ) + 1 ) = ( ( ( ( len C66 ) + ( len C67 ) ) -' ( len C67 ) ) + 1 ) by FINSEQ_1:22
.= ( ( len C66 ) + 1 ) by NAT_D:34;
L128: ( smid (( C66 ^ C67 ) , ( ( ( len ( C66 ^ C67 ) ) -' ( len C67 ) ) + 1 ) , ( len ( C66 ^ C67 ) )) ) = ( smid (( C66 ^ C67 ) , ( ( len C66 ) + 1 ) , ( ( len C66 ) + ( len C67 ) )) ) by L127 , FINSEQ_1:22
.= C67 by L48;
L129: ( len C67 ) <= ( len ( ovlpart (( C66 ^ C67 ) , C67) ) ) by L128 , L126 , L53;
L130: ( len C67 ) = ( len ( ovlpart (( C66 ^ C67 ) , C67) ) ) by L129 , L125 , XXREAL_0:1;
L131: ( ovlpart (( C66 ^ C67 ) , C67) ) = ( smid (C67 , 1 , ( len ( ovlpart (( C66 ^ C67 ) , C67) ) )) ) by L53
.= ( C67 | ( len C67 ) ) by L130 , L36
.= C67 by FINSEQ_1:58;
L132: ( len ( ovlpart (C66 , ( C66 ^ C67 )) ) ) <= ( len C66 ) by L90;
L133: ( ( ( len C66 ) -' ( len C66 ) ) + 1 ) = ( ( 0 ) + 1 ) by XREAL_1:232
.= 1;
L134: ( smid (C66 , ( ( ( len C66 ) -' ( len C66 ) ) + 1 ) , ( len C66 )) ) = ( ( C66 /^ ( ( ( 0 ) + 1 ) -' 1 ) ) | ( len C66 ) ) by L133 , NAT_D:34
.= ( ( C66 /^ ( 0 ) ) | ( len C66 ) ) by NAT_D:34
.= ( C66 | ( len C66 ) ) by FINSEQ_5:28
.= C66 by FINSEQ_1:58;
L135: ( len C66 ) <= ( ( len C66 ) + ( len C67 ) ) by NAT_1:12;
L136: ( len C66 ) <= ( len ( C66 ^ C67 ) ) by L135 , FINSEQ_1:22;
L137: ( smid (( C66 ^ C67 ) , 1 , ( len C66 )) ) = ( ( C66 ^ C67 ) | ( len C66 ) ) by L36
.= C66 by FINSEQ_5:23;
L138: ( len C66 ) <= ( len ( ovlpart (C66 , ( C66 ^ C67 )) ) ) by L137 , L134 , L136 , L53;
L139: ( len C66 ) = ( len ( ovlpart (C66 , ( C66 ^ C67 )) ) ) by L138 , L132 , XXREAL_0:1;
L140: ( ovlpart (C66 , ( C66 ^ C67 )) ) = ( smid (( C66 ^ C67 ) , 1 , ( len ( ovlpart (C66 , ( C66 ^ C67 )) ) )) ) by L53
.= ( ( C66 ^ C67 ) | ( len C66 ) ) by L139 , L36
.= C66 by FINSEQ_5:23;
thus L141: thesis by L140 , L131;
end;
theorem
L142: (for B49 being non  empty set holds (for B50 , B51 being (FinSequence of B49) holds (( len ( ovlcon (B50 , B51) ) ) = ( ( ( len B50 ) + ( len B51 ) ) - ( len ( ovlpart (B50 , B51) ) ) ) & ( len ( ovlcon (B50 , B51) ) ) = ( ( ( len B50 ) + ( len B51 ) ) -' ( len ( ovlpart (B50 , B51) ) ) ) & ( len ( ovlcon (B50 , B51) ) ) = ( ( len B50 ) + ( ( len B51 ) -' ( len ( ovlpart (B50 , B51) ) ) ) ))))
proof
let C68 being non  empty set;
let C69 , C70 being (FinSequence of C68);
L143: ( len ( ovlpart (C69 , C70) ) ) <= ( len C70 ) by L53;
L144: ( len ( ovlcon (C69 , C70) ) ) = ( ( len C69 ) + ( len ( C70 /^ ( len ( ovlpart (C69 , C70) ) ) ) ) ) by FINSEQ_1:22
.= ( ( len C69 ) + ( ( len C70 ) -' ( len ( ovlpart (C69 , C70) ) ) ) ) by RFINSEQ:29
.= ( ( len C69 ) + ( ( len C70 ) - ( len ( ovlpart (C69 , C70) ) ) ) ) by L143 , XREAL_1:233;
thus L145: ( len ( ovlcon (C69 , C70) ) ) = ( ( ( len C69 ) + ( len C70 ) ) - ( len ( ovlpart (C69 , C70) ) ) ) by L144;
L146: ( len ( ovlpart (C69 , C70) ) ) <= ( len C70 ) by L53;
thus L147: ( len ( ovlcon (C69 , C70) ) ) = ( ( ( len C69 ) + ( len C70 ) ) -' ( len ( ovlpart (C69 , C70) ) ) ) by L146 , L145 , NAT_1:12 , XREAL_1:233;
thus L148: thesis by L144 , L146 , XREAL_1:233;
end;
theorem
L149: (for B52 being non  empty set holds (for B53 , B54 being (FinSequence of B52) holds (( len ( ovlpart (B53 , B54) ) ) <= ( len B53 ) & ( len ( ovlpart (B53 , B54) ) ) <= ( len B54 ))))
proof
let C71 being non  empty set;
let C72 , C73 being (FinSequence of C71);
L150:
now
assume L151: ( len ( ovlpart (C72 , C73) ) ) > ( len C72 );
L152: ( ovlpart (C72 , C73) ) = ( smid (C72 , ( ( ( len C72 ) -' ( len ( ovlpart (C72 , C73) ) ) ) + 1 ) , ( len C72 )) ) by L53
.= ( smid (C72 , ( ( 0 ) + 1 ) , ( len C72 )) ) by L151 , NAT_2:8
.= C72 by L38;
thus L153: contradiction by L152 , L151;
end;
thus L154: thesis by L150 , L53;
end;
definition
let C74 being non  empty set;
let C75 being (FinSequence of C74);
pred C75 separates_uniquely 
means
:L155: (for B55 being (FinSequence of C74) holds (for B56 , B57 being (Element of ( NAT )) holds ((1 <= B56 & B56 < B57 & ( ( B57 + ( len C75 ) ) -' 1 ) <= ( len B55 ) & ( smid (B55 , B56 , ( ( B56 + ( len C75 ) ) -' 1 )) ) = ( smid (B55 , B57 , ( ( B57 + ( len C75 ) ) -' 1 )) ) & ( smid (B55 , B56 , ( ( B56 + ( len C75 ) ) -' 1 )) ) = C75) implies ( B57 -' B56 ) >= ( len C75 ))))
;end;
theorem
L157: (for B58 being non  empty set holds (for B59 being (FinSequence of B58) holds (B59 separates_uniquely  iff ( len ( ovlpart (( B59 /^ 1 ) , B59) ) ) = ( 0 ))))
proof
let C76 being non  empty set;
let C77 being (FinSequence of C76);
set D4 = ( ovlpart (( C77 /^ 1 ) , C77) );
L158:
now
assume L159: C77 separates_uniquely ;
set D5 = ( ( C77 | 1 ) ^ ( ovlcon (( C77 /^ 1 ) , C77) ) );
L160: D5 = ( ( ( C77 | 1 ) ^ ( C77 /^ 1 ) ) ^ ( C77 /^ ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by FINSEQ_1:32
.= ( C77 ^ ( C77 /^ ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by RFINSEQ:8;
L161: D5 = ( ( C77 | 1 ) ^ ( ( ( C77 /^ 1 ) | ( ( len ( C77 /^ 1 ) ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) ^ C77 ) ) by L99
.= ( ( ( C77 | 1 ) ^ ( ( C77 /^ 1 ) | ( ( len ( C77 /^ 1 ) ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) ) ^ C77 ) by FINSEQ_1:32;
L162: ( len ( ( C77 | 1 ) ^ ( ( C77 /^ 1 ) | ( ( len ( C77 /^ 1 ) ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) ) ) = ( ( len ( C77 | 1 ) ) + ( len ( ( C77 /^ 1 ) | ( ( len ( C77 /^ 1 ) ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) ) ) by FINSEQ_1:22
.= ( ( len ( C77 | 1 ) ) + ( ( len ( C77 /^ 1 ) ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by FINSEQ_1:59 , NAT_D:35
.= ( ( len ( C77 | 1 ) ) + ( ( len ( C77 /^ 1 ) ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by L149 , XREAL_1:233
.= ( ( ( len ( C77 | 1 ) ) + ( len ( C77 /^ 1 ) ) ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) )
.= ( ( len ( ( C77 | 1 ) ^ ( C77 /^ 1 ) ) ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by FINSEQ_1:22
.= ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by RFINSEQ:8;
L163: ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) = ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L149 , XREAL_1:233;
L164: ( ( ( len C77 ) + 1 ) -' 1 ) = ( len C77 ) by NAT_D:34;
L165: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) <= ( len C77 ) by L53;
L166: ( len D5 ) = ( ( len ( C77 | 1 ) ) + ( len ( ovlcon (( C77 /^ 1 ) , C77) ) ) ) by FINSEQ_1:22
.= ( ( len ( C77 | 1 ) ) + ( ( ( len ( C77 /^ 1 ) ) + ( len C77 ) ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by L142
.= ( ( ( len ( C77 | 1 ) ) + ( len ( C77 /^ 1 ) ) ) + ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) )
.= ( ( len ( ( C77 | 1 ) ^ ( C77 /^ 1 ) ) ) + ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by FINSEQ_1:22
.= ( ( len C77 ) + ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by RFINSEQ:8;
set D6 = ( ( ( len C77 ) + 1 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) );
L167: ( len C77 ) < ( ( len C77 ) + 1 ) by XREAL_1:29;
L168: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) <= ( len C77 ) by L53;
L169: D6 = ( ( 1 + ( len C77 ) ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L168 , L167 , XREAL_1:233 , XXREAL_0:2
.= ( 1 + ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) )
.= ( 1 + ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by L168 , XREAL_1:233;
L170: 1 <= D6 by L169 , NAT_1:12;
L171: ( smid (D5 , 1 , ( ( 1 + ( len C77 ) ) -' 1 )) ) = ( ( D5 /^ ( ( ( 0 ) + 1 ) -' 1 ) ) | ( ( ( len C77 ) + 1 ) -' 1 ) ) by NAT_D:34
.= ( ( D5 /^ ( 0 ) ) | ( len C77 ) ) by L164 , NAT_D:34
.= ( D5 | ( len C77 ) ) by FINSEQ_5:28
.= C77 by L160 , FINSEQ_5:23;
L172: ( ( ( D6 + ( len C77 ) ) -' 1 ) + 1 ) = ( ( ( D6 + ( len C77 ) ) - 1 ) + 1 ) by L170 , NAT_1:12 , XREAL_1:233
.= ( D6 + ( len C77 ) );
L173: ( ( ( ( D6 + ( len C77 ) ) -' 1 ) + 1 ) -' D6 ) = ( ( D6 + ( len C77 ) ) - D6 ) by L172 , NAT_1:12 , XREAL_1:233
.= ( len C77 );
L174: 1 <= ( 1 + ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by NAT_1:12;
L175: 1 <= ( 1 + ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by L174 , L165 , XREAL_1:233;
L176: 1 <= ( ( 1 + ( len C77 ) ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L175;
L177: 1 <= ( ( ( len C77 ) + 1 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L176 , L165 , NAT_1:12 , XREAL_1:233;
L178: ( ( ( ( len C77 ) + 1 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) -' 1 ) = ( ( ( ( len C77 ) + 1 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) - 1 ) by L177 , XREAL_1:233;
L179: ( ( ( ( len C77 ) + 1 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) -' 1 ) = ( ( ( ( len C77 ) + 1 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) - 1 ) by L178 , L165 , NAT_1:12 , XREAL_1:233
.= ( ( ( ( len C77 ) + 1 ) - 1 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) )
.= ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L168 , XREAL_1:233;
L180: ( smid (D5 , D6 , ( ( D6 + ( len C77 ) ) -' 1 )) ) = ( C77 | ( len C77 ) ) by L179 , L161 , L162 , L163 , L173 , FINSEQ_5:37
.= ( smid (D5 , 1 , ( ( 1 + ( len C77 ) ) -' 1 )) ) by L171 , FINSEQ_1:58;
L181: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) <= ( len ( C77 /^ 1 ) ) by L90;
L182: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) <= ( ( len C77 ) -' 1 ) by L181 , RFINSEQ:29;
L183: ( ( ( len C77 ) + 1 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) >= ( ( 1 + ( len C77 ) ) - ( ( len C77 ) -' 1 ) ) by L182 , XREAL_1:10;
L184:
now
per cases ;
case L185: ( len C77 ) >= 1;
L186: ( ( 1 + ( len C77 ) ) - ( ( len C77 ) -' 1 ) ) = ( ( 1 + ( len C77 ) ) - ( ( len C77 ) - 1 ) ) by L185 , XREAL_1:233
.= ( 1 + 1 );
L187: 1 < ( ( ( len C77 ) + 1 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L186 , L183 , XXREAL_0:2;
L188: 1 < D6 by L187 , L167 , L168 , XREAL_1:233 , XXREAL_0:2;
L189: ( ( ( ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) + ( len C77 ) ) + 1 ) -' 1 ) <= ( ( len C77 ) + ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by NAT_D:34;
L190: ( ( ( 1 + ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) + ( len C77 ) ) -' 1 ) <= ( ( len C77 ) + ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) by L189 , L168 , XREAL_1:233;
L191: ( D6 -' 1 ) >= ( len C77 ) by L190 , L159 , L166 , L169 , L171 , L180 , L188 , L155;
L192: ( D6 -' 1 ) = ( ( 1 + ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) ) - 1 ) by L169 , NAT_1:12 , XREAL_1:233
.= ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) );
L193: ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) <= ( len C77 ) by NAT_D:35;
L194: ( ( len C77 ) -' ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) = ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) by L168 , XREAL_1:233;
L195: ( ( len C77 ) - ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) ) = ( len C77 ) by L194 , L191 , L192 , L193 , XXREAL_0:1;
thus L196: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) = ( 0 ) by L195;
end;
case L197: ( len C77 ) < 1;
L198: ( len C77 ) < ( ( 0 ) + 1 ) by L197;
L199: ( len C77 ) <= ( 0 ) by L198 , NAT_1:13;
thus L200: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) = ( 0 ) by L199 , L53;
end;
end;
thus L202: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) = ( 0 ) by L184;
end;
L203:
now
assume L204: ( len ( ovlpart (( C77 /^ 1 ) , C77) ) ) = ( 0 );
L205: (for B60 being (FinSequence of C76) holds (for B61 , B62 being (Element of ( NAT )) holds ((1 <= B61 & B61 < B62 & ( ( B62 + ( len C77 ) ) -' 1 ) <= ( len B60 ) & ( smid (B60 , B61 , ( ( B61 + ( len C77 ) ) -' 1 )) ) = ( smid (B60 , B62 , ( ( B62 + ( len C77 ) ) -' 1 )) ) & ( smid (B60 , B61 , ( ( B61 + ( len C77 ) ) -' 1 )) ) = C77) implies ( B62 -' B61 ) >= ( len C77 ))))
proof
let C78 being (FinSequence of C76);
let C79 , C80 being (Element of ( NAT ));
assume that
L206: 1 <= C79
and
L207: C79 < C80
and
L208: ( ( C80 + ( len C77 ) ) -' 1 ) <= ( len C78 )
and
L209: ( smid (C78 , C79 , ( ( C79 + ( len C77 ) ) -' 1 )) ) = ( smid (C78 , C80 , ( ( C80 + ( len C77 ) ) -' 1 )) )
and
L210: ( smid (C78 , C79 , ( ( C79 + ( len C77 ) ) -' 1 )) ) = C77;
L211: ( C80 - C79 ) > ( 0 ) by L207 , XREAL_1:50;
L212: ( C80 -' C79 ) = ( C80 - C79 ) by L211 , XREAL_0:def 2;
L213: ( C79 + ( C80 -' C79 ) ) = ( ( C80 - C79 ) + C79 ) by L211 , XREAL_0:def 2
.= C80;
L214:
now
per cases ;
case L215: ( len C77 ) <= ( 0 );
thus L216: thesis by L215;
end;
case L217: ( len C77 ) > ( 0 );
L218: ( ( 0 ) + 1 ) <= ( len C77 ) by L217 , NAT_1:13;
L219: ( ( len C77 ) -' 1 ) = ( ( len C77 ) - 1 ) by L218 , XREAL_1:233;
L220: ( ( C79 + ( len C77 ) ) -' 1 ) = ( ( C79 + ( len C77 ) ) - 1 ) by L218 , NAT_1:12 , XREAL_1:233;
L221: C79 <= ( C79 + ( ( len C77 ) -' 1 ) ) by NAT_1:12;
L222: 1 <= ( ( C79 + ( len C77 ) ) -' 1 ) by L221 , L206 , L219 , L220 , XXREAL_0:2;
set D7 = ( C80 -' C79 );
L223: ( ( 0 ) + 1 ) <= D7 by L211 , L212 , NAT_1:13;
L224: ( D7 - 1 ) = ( D7 -' 1 ) by L223 , XREAL_1:233;
L225: ( C79 + ( D7 -' 1 ) ) = ( C79 + ( D7 - 1 ) ) by L223 , XREAL_1:233
.= ( C79 + ( ( C80 - C79 ) - 1 ) ) by L211 , XREAL_0:def 2
.= ( C80 - 1 );
L226: ( C79 + 1 ) <= C80 by L207 , NAT_1:13;
L227: ( ( C79 + 1 ) - 1 ) <= ( C80 - 1 ) by L226 , XREAL_1:9;
L228: ( C80 -' 1 ) = ( C80 - 1 ) by L227 , XREAL_0:def 2;
L229: ( C80 - C79 ) > ( 0 ) by L207 , XREAL_1:50;
L230: ( C80 -' C79 ) > ( 0 ) by L229 , XREAL_0:def 2;
L231: ( C80 -' C79 ) >= ( ( 0 ) + 1 ) by L230 , NAT_1:13;
L232: ( C80 -' 1 ) <= ( ( C80 -' 1 ) + ( len C77 ) ) by NAT_1:12;
L233: C80 <= ( C80 + ( len C77 ) ) by NAT_1:12;
L234: C79 < ( C80 + ( len C77 ) ) by L233 , L207 , XXREAL_0:2;
L235: ( ( C80 -' 1 ) + ( len C77 ) ) = ( ( C80 - 1 ) + ( len C77 ) ) by L227 , XREAL_0:def 2
.= ( ( C80 + ( len C77 ) ) - 1 )
.= ( ( C80 + ( len C77 ) ) -' 1 ) by L206 , L234 , XREAL_1:233 , XXREAL_0:2;
L236: ( C79 + ( D7 -' 1 ) ) <= ( len C78 ) by L235 , L208 , L225 , L228 , L232 , XXREAL_0:2;
L237:
now
assume L238: ( C80 -' C79 ) < ( len C77 );
L239: ( D7 - 1 ) < ( ( len C77 ) - 1 ) by L238 , XREAL_1:9;
L240: ( D7 -' 1 ) < ( ( len C77 ) - 1 ) by L239 , L231 , XREAL_1:233;
L241: ( D7 -' 1 ) < ( ( len C77 ) -' 1 ) by L240 , L218 , XREAL_1:233;
L242: ( ( D7 -' 1 ) + 1 ) <= ( ( len C77 ) -' 1 ) by L241 , NAT_1:13;
L243: ( D7 - D7 ) < ( ( len C77 ) - D7 ) by L238 , XREAL_1:9;
L244: ( 0 ) < ( ( len C77 ) -' D7 ) by L243 , XREAL_0:def 2;
L245: ( ( 0 ) + 1 ) <= ( ( len C77 ) -' D7 ) by L244 , NAT_1:13;
L246: ( ( len C77 ) -' D7 ) = ( ( len C77 ) - D7 ) by L243 , XREAL_0:def 2;
L247: 1 < ( len C77 ) by L223 , L238 , XXREAL_0:2;
L248: ( 1 + 1 ) <= ( len C77 ) by L247 , NAT_1:13;
L249: ( ( 1 + 1 ) - 1 ) <= ( ( len C77 ) - 1 ) by L248 , XREAL_1:9;
L250: ( ( len C77 ) -' 1 ) = ( ( len C77 ) - 1 ) by L223 , L238 , XREAL_1:233 , XXREAL_0:2;
L251: ( ( len C77 ) -' D7 ) <= ( ( len C77 ) -' 1 ) by L250 , L223 , L246 , XREAL_1:10;
L252: C79 <= ( C79 + ( D7 -' 1 ) ) by NAT_1:12;
L253: C79 <= ( len C78 ) by L252 , L236 , XXREAL_0:2;
L254: ( ( C80 + ( len C77 ) ) -' 1 ) = ( ( C80 + ( len C77 ) ) - 1 ) by L206 , L234 , XREAL_1:233 , XXREAL_0:2
.= ( C80 + ( ( len C77 ) - 1 ) )
.= ( C80 + ( ( len C77 ) -' 1 ) ) by L218 , XREAL_1:233;
L255: C80 <= ( ( C80 + ( len C77 ) ) -' 1 ) by L254 , NAT_1:12;
L256: C80 <= ( len C78 ) by L255 , L208 , XXREAL_0:2;
L257: ( C79 + 1 ) <= C80 by L207 , NAT_1:13;
L258: ( ( C79 + 1 ) + ( len C77 ) ) <= ( C80 + ( len C77 ) ) by L257 , XREAL_1:7;
L259: ( ( ( C79 + 1 ) + ( len C77 ) ) - 1 ) <= ( ( C80 + ( len C77 ) ) - 1 ) by L258 , XREAL_1:9;
L260: 1 < C80 by L206 , L207 , XXREAL_0:2;
L261: C80 < ( C80 + ( len C77 ) ) by L217 , XREAL_1:29;
L262: 1 < ( C80 + ( len C77 ) ) by L261 , L260 , XXREAL_0:2;
L263: ( ( C80 + ( len C77 ) ) -' 1 ) = ( ( C80 + ( len C77 ) ) - 1 ) by L260 , L261 , XREAL_1:233 , XXREAL_0:2;
L264: ( ( ( C79 + 1 ) - 1 ) + ( len C77 ) ) <= ( len C78 ) by L263 , L208 , L259 , XXREAL_0:2;
L265: ( C79 + ( len C77 ) ) <= ( ( C79 + ( len C77 ) ) + 1 ) by NAT_1:12;
L266: ( ( C79 + ( len C77 ) ) -' 1 ) <= ( C79 + ( len C77 ) ) by L265 , L220 , XREAL_1:20;
L267: ( ( C79 + ( len C77 ) ) -' 1 ) <= ( len C78 ) by L266 , L264 , XXREAL_0:2;
L268: ( 0 ) < ( ( C80 + ( len C77 ) ) - 1 ) by L262 , XREAL_1:50;
L269: ( ( 0 ) + 1 ) <= ( ( C80 + ( len C77 ) ) -' 1 ) by L268 , L263 , NAT_1:13;
L270: ( C80 + 1 ) <= ( C80 + ( len C77 ) ) by L261 , NAT_1:13;
L271: ( ( C80 + 1 ) - 1 ) <= ( ( C80 + ( len C77 ) ) - 1 ) by L270 , XREAL_1:9;
L272: ( len C77 ) <= ( ( len C77 ) + D7 ) by NAT_1:12;
L273: ( ( len C77 ) - D7 ) <= ( len C77 ) by L272 , XREAL_1:20;
L274: ( ( len C77 ) -' D7 ) <= ( len C77 ) by L246 , L272 , XREAL_1:20;
L275: ( len ( smid (C77 , 1 , ( ( len C77 ) -' D7 )) ) ) = ( len ( mid (C77 , 1 , ( ( len C77 ) -' D7 )) ) ) by L245 , L32;
L276: ( len ( mid (C77 , 1 , ( ( len C77 ) -' D7 )) ) ) = ( ( ( ( len C77 ) -' D7 ) -' 1 ) + 1 ) by L218 , L245 , L246 , L273 , FINSEQ_6:118
.= ( ( ( ( len C77 ) -' D7 ) - 1 ) + 1 ) by L245 , XREAL_1:233
.= ( ( len C77 ) -' D7 );
L277: ( ( ( len ( C77 /^ 1 ) ) -' ( ( len C77 ) -' D7 ) ) + 1 ) = ( ( ( ( len C77 ) -' 1 ) -' ( ( len C77 ) -' D7 ) ) + 1 ) by RFINSEQ:29
.= ( ( ( ( len C77 ) -' 1 ) - ( ( len C77 ) -' D7 ) ) + 1 ) by L251 , XREAL_1:233
.= ( ( ( ( len C77 ) - 1 ) - ( ( len C77 ) - D7 ) ) + 1 ) by L223 , L238 , L246 , XREAL_1:233 , XXREAL_0:2
.= D7;
L278: ( len ( C77 /^ 1 ) ) = ( ( len C77 ) -' 1 ) by RFINSEQ:29;
L279: ( smid (( C77 /^ 1 ) , ( ( ( len ( C77 /^ 1 ) ) -' ( ( len C77 ) -' D7 ) ) + 1 ) , ( len ( C77 /^ 1 ) )) ) = ( mid (( C77 /^ 1 ) , D7 , ( ( len C77 ) -' 1 )) ) by L278 , L224 , L242 , L277 , L32;
L280: ( len ( mid (( C77 /^ 1 ) , D7 , ( ( len C77 ) -' 1 )) ) ) = ( ( ( ( len C77 ) -' 1 ) -' D7 ) + 1 ) by L223 , L224 , L242 , L249 , L250 , L278 , FINSEQ_6:118
.= ( ( ( ( len C77 ) -' 1 ) - D7 ) + 1 ) by L224 , L242 , XREAL_1:233
.= ( ( ( ( len C77 ) - 1 ) - D7 ) + 1 ) by L223 , L238 , XREAL_1:233 , XXREAL_0:2
.= ( ( len C77 ) -' D7 ) by L243 , XREAL_0:def 2;
L281: (for B63 being Nat holds ((1 <= B63 & B63 <= ( ( len C77 ) -' D7 )) implies ( ( smid (C77 , 1 , ( ( len C77 ) -' D7 )) ) . B63 ) = ( ( smid (( C77 /^ 1 ) , ( ( ( len ( C77 /^ 1 ) ) -' ( ( len C77 ) -' D7 ) ) + 1 ) , ( len ( C77 /^ 1 ) )) ) . B63 )))
proof
let C81 being Nat;
assume that
L282: 1 <= C81
and
L283: C81 <= ( ( len C77 ) -' D7 );
L284: ( C81 + D7 ) <= ( ( ( len C77 ) -' D7 ) + D7 ) by L283 , XREAL_1:7;
L285: ( ( C81 + D7 ) - 1 ) <= ( ( len C77 ) - 1 ) by L284 , L246 , XREAL_1:9;
reconsider D8 = C81 as (Element of ( NAT )) by ORDINAL1:def 12;
L286: ( len ( mid (C78 , C79 , ( ( C79 + ( len C77 ) ) -' 1 )) ) ) = ( ( ( ( C79 + ( len C77 ) ) -' 1 ) -' C79 ) + 1 ) by L206 , L219 , L220 , L221 , L222 , L253 , L267 , FINSEQ_6:118
.= ( ( ( ( C79 + ( len C77 ) ) - 1 ) - C79 ) + 1 ) by L219 , L220 , L221 , XREAL_1:233
.= ( len C77 );
L287: ( ( len C77 ) -' D7 ) <= ( len C77 ) by NAT_D:35;
L288: C81 <= ( len C77 ) by L287 , L283 , XXREAL_0:2;
L289: 1 <= ( C81 + ( D7 -' 1 ) ) by L282 , NAT_1:12;
L290: ( C81 + ( D7 -' 1 ) ) = ( C81 + ( D7 - 1 ) ) by L223 , XREAL_1:233
.= ( ( C81 + D7 ) - 1 )
.= ( ( C81 + D7 ) -' 1 ) by L282 , NAT_1:12 , XREAL_1:233;
L291: 1 <= ( C81 + D7 ) by L282 , NAT_1:12;
L292: ( ( C81 + D7 ) -' 1 ) <= ( ( len C77 ) - 1 ) by L282 , L285 , NAT_1:12 , XREAL_1:233;
L293: ( ( C81 + D7 ) -' 1 ) <= ( ( len C77 ) -' 1 ) by L292 , L218 , XREAL_1:233;
L294: ( ( C81 + D7 ) -' 1 ) in ( Seg ( len ( C77 /^ 1 ) ) ) by L293 , L278 , L289 , L290;
L295: ( ( C81 + D7 ) -' 1 ) in ( dom ( C77 /^ 1 ) ) by L294 , FINSEQ_1:def 3;
L296: ( smid (C78 , C80 , ( ( C80 + ( len C77 ) ) -' 1 )) ) = ( mid (C78 , C80 , ( ( C80 + ( len C77 ) ) -' 1 )) ) by L263 , L271 , L32;
thus L297: ( ( smid (( C77 /^ 1 ) , ( ( ( len ( C77 /^ 1 ) ) -' ( ( len C77 ) -' D7 ) ) + 1 ) , ( len ( C77 /^ 1 ) )) ) . C81 ) = ( ( C77 /^ 1 ) . ( ( D8 + D7 ) -' 1 ) ) by L223 , L224 , L242 , L249 , L250 , L278 , L279 , L280 , L282 , L283 , FINSEQ_6:118
.= ( ( smid (C78 , C79 , ( ( C79 + ( len C77 ) ) -' 1 )) ) . ( ( ( C81 + D7 ) -' 1 ) + 1 ) ) by L210 , L218 , L295 , RFINSEQ:def 1
.= ( ( mid (C78 , C79 , ( ( C79 + ( len C77 ) ) -' 1 )) ) . ( ( ( C81 + D7 ) -' 1 ) + 1 ) ) by L219 , L220 , L221 , L32
.= ( ( mid (C78 , C79 , ( ( C79 + ( len C77 ) ) -' 1 )) ) . ( ( ( C81 + D7 ) - 1 ) + 1 ) ) by L282 , NAT_1:12 , XREAL_1:233
.= ( C78 . ( ( C79 + ( D8 + D7 ) ) -' 1 ) ) by L206 , L219 , L220 , L221 , L222 , L246 , L253 , L267 , L284 , L286 , L291 , FINSEQ_6:118
.= ( C78 . ( ( ( C79 + D7 ) + D8 ) -' 1 ) )
.= ( C77 . C81 ) by L208 , L209 , L210 , L213 , L256 , L260 , L263 , L269 , L271 , L282 , L288 , L296 , FINSEQ_6:118
.= ( C77 . ( ( D8 + 1 ) -' 1 ) ) by NAT_D:34
.= ( ( mid (C77 , 1 , ( ( len C77 ) -' D7 )) ) . D8 ) by L218 , L245 , L246 , L273 , L276 , L282 , L283 , FINSEQ_6:118
.= ( ( smid (C77 , 1 , ( ( len C77 ) -' D7 )) ) . C81 ) by L245 , L32;
end;
L298: ( smid (C77 , 1 , ( ( len C77 ) -' D7 )) ) = ( smid (( C77 /^ 1 ) , ( ( ( len ( C77 /^ 1 ) ) -' ( ( len C77 ) -' D7 ) ) + 1 ) , ( len ( C77 /^ 1 ) )) ) by L281 , L275 , L276 , L279 , L280 , FINSEQ_1:14;
L299: ( ( len C77 ) -' D7 ) <= ( len D4 ) by L298 , L274 , L53;
thus L300: contradiction by L299 , L204 , L243 , XREAL_0:def 2;
end;
thus L301: thesis by L237;
end;
end;
thus L303: thesis by L214;
end;
thus L304: C77 separates_uniquely  by L205 , L155;
end;
thus L305: thesis by L203 , L158;
end;
definition
let C82 being non  empty set;
let C83 , C84 being (FinSequence of C82);
let C85 being (Element of ( NAT ));
pred C84 is_substring_of C83 , C85
means
:L306: (( len C84 ) > ( 0 ) implies (ex B64 being (Element of ( NAT )) st (C85 <= B64 & B64 <= ( len C83 ) & ( mid (C83 , B64 , ( ( B64 -' 1 ) + ( len C84 ) )) ) = C84)))
;correctness;
end;
theorem
L308: (for B65 being non  empty set holds (for B66 , B67 being (FinSequence of B65) holds (for B68 , B69 being (Element of ( NAT )) holds ((B69 >= B68 & B67 is_substring_of B66 , B69) implies B67 is_substring_of B66 , B68))))
proof
let C86 being non  empty set;
let C87 , C88 being (FinSequence of C86);
let C89 , C90 being (Element of ( NAT ));
assume that
L309: C90 >= C89
and
L310: C88 is_substring_of C87 , C90;
L311:
now
per cases ;
case L312: ( len C88 ) > ( 0 );
consider C91 being (Element of ( NAT )) such that L313: C90 <= C91 and L314: C91 <= ( len C87 ) and L315: ( mid (C87 , C91 , ( ( C91 -' 1 ) + ( len C88 ) )) ) = C88 by L312 , L310 , L306;
L316: C89 <= C91 by L309 , L313 , XXREAL_0:2;
thus L317: thesis by L316 , L314 , L315 , L306;
end;
case L318: ( len C88 ) <= ( 0 );
thus L319: thesis by L318 , L306;
end;
end;
thus L321: thesis by L311;
end;
theorem
L322: (for B70 being non  empty set holds (for B71 being (FinSequence of B70) holds (1 <= ( len B71 ) implies B71 is_substring_of B71 , 1)))
proof
let C92 being non  empty set;
let C93 being (FinSequence of C92);
assume L323: 1 <= ( len C93 );
L324: ( ( 1 -' 1 ) + ( len C93 ) ) = ( ( 0 ) + ( len C93 ) ) by NAT_2:8
.= ( len C93 );
L325: ( mid (C93 , 1 , ( ( 1 -' 1 ) + ( len C93 ) )) ) = C93 by L324 , L323 , FINSEQ_6:120;
thus L326: thesis by L325 , L323 , L306;
end;
theorem
L327: (for B72 being non  empty set holds (for B73 , B74 being (FinSequence of B72) holds (B74 is_substring_of B73 , ( 0 ) implies B74 is_substring_of B73 , 1)))
proof
let C94 being non  empty set;
let C95 , C96 being (FinSequence of C94);
assume L328: C96 is_substring_of C95 , ( 0 );
L329:
now
per cases ;
case L330: ( len C96 ) > ( 0 );
consider C97 being (Element of ( NAT )) such that L331: ( 0 ) <= C97 and L332: C97 <= ( len C95 ) and L333: ( mid (C95 , C97 , ( ( C97 -' 1 ) + ( len C96 ) )) ) = C96 by L330 , L328 , L306;
L334: ( len C96 ) >= ( ( 0 ) + 1 ) by L330 , NAT_1:13;
L335:
now
per cases ;
case L336: C97 = ( 0 );
L337: ( ( 0 ) - 1 ) < ( 0 );
L338: ( C97 -' 1 ) = ( 0 ) by L337 , L336 , XREAL_0:def 2;
L339: ( ( C95 /^ ( ( 0 ) -' 1 ) ) | ( ( ( len C96 ) -' ( 0 ) ) + 1 ) ) = C96 by L338 , L333 , L336 , FINSEQ_6:def 3;
L340: ( ( len C96 ) -' ( 0 ) ) = ( ( len C96 ) - ( 0 ) ) by XREAL_0:def 2
.= ( len C96 );
L341: ( C95 | ( ( len C96 ) + 1 ) ) = C96 by L340 , L336 , L338 , L339 , FINSEQ_5:28;
L342:
now
per cases ;
case L343: ( ( len C96 ) + 1 ) >= ( len C95 );
L344: C95 = C96 by L343 , L341 , FINSEQ_1:58;
thus L345: thesis by L344 , L334 , L322;
end;
case L346: ( ( len C96 ) + 1 ) < ( len C95 );
L347: ( dom ( C95 | ( Seg ( ( len C96 ) + 1 ) ) ) ) = ( ( dom C95 ) /\ ( Seg ( ( len C96 ) + 1 ) ) ) by RELAT_1:61
.= ( ( Seg ( len C95 ) ) /\ ( Seg ( ( len C96 ) + 1 ) ) ) by FINSEQ_1:def 3
.= ( Seg ( ( len C96 ) + 1 ) ) by L346 , FINSEQ_1:7;
L348: ( len C96 ) = ( ( len C96 ) + 1 ) by L347 , L341 , FINSEQ_1:def 3;
thus L349: contradiction by L348;
end;
end;
thus L351: thesis by L342;
end;
case L352: C97 <> ( 0 );
L353: C97 >= ( ( 0 ) + 1 ) by L352 , NAT_1:13;
thus L354: thesis by L353 , L332 , L333 , L306;
end;
end;
thus L356: thesis by L335;
end;
case L357: ( len C96 ) <= ( 0 );
thus L358: thesis by L357 , L306;
end;
end;
thus L360: thesis by L329;
end;
notation
let C98 being non  empty set;
let C99 , C100 being (FinSequence of C98);
synonym C99 is_preposition_of C100 for C99 c= C100;
end;
definition
let C101 being non  empty set;
let C102 , C103 being (FinSequence of C101);
redefine pred C102 c= C103
means
:L362: (( len C102 ) > ( 0 ) implies (1 <= ( len C103 ) & ( mid (C103 , 1 , ( len C102 )) ) = C102))
;compatibility
proof
thus L363: (C102 c= C103 implies (( len C102 ) > ( 0 ) implies (1 <= ( len C103 ) & ( mid (C103 , 1 , ( len C102 )) ) = C102)))
proof
assume that
L364: C102 c= C103
and
L365: ( len C102 ) > ( 0 );
L366: ( ( 0 ) + 1 ) <= ( len C102 ) by L365 , NAT_1:13;
L367: ( len C102 ) <= ( len C103 ) by L364 , FINSEQ_1:63;
thus L368: 1 <= ( len C103 ) by L367 , L366 , XXREAL_0:2;
thus L369: ( mid (C103 , 1 , ( len C102 )) ) = ( ( C103 /^ ( 1 -' 1 ) ) | ( ( ( len C102 ) -' 1 ) + 1 ) ) by L366 , FINSEQ_6:def 3
.= ( ( C103 /^ ( 1 -' 1 ) ) | ( len C102 ) ) by L366 , XREAL_1:235
.= ( ( C103 /^ ( 0 ) ) | ( len C102 ) ) by XREAL_1:232
.= ( C103 | ( len C102 ) ) by FINSEQ_5:28
.= C102 by L364 , FINSEQ_3:113;
end;

assume L370: (( len C102 ) > ( 0 ) implies (1 <= ( len C103 ) & ( mid (C103 , 1 , ( len C102 )) ) = C102));
per cases  by L370;
suppose L371: ( len C102 ) <= ( 0 );

L372: C102 = ( {} ) by L371;
thus L373: thesis by L372 , XBOOLE_1:2;
end;
suppose that L374: ( len C102 ) > ( 0 )
and
L375: ( mid (C103 , 1 , ( len C102 )) ) = C102;
L376: ( ( 0 ) + 1 ) <= ( len C102 ) by L374 , NAT_1:13;
L377: C102 = ( C103 | ( len C102 ) ) by L376 , L375 , FINSEQ_6:116;
thus L378: thesis by L377 , RELAT_1:59;
end;
end;
end;
theorem
L381: (for B75 being non  empty set holds (for B76 , B77 being (FinSequence of B75) holds ((( len B77 ) > ( 0 ) & B77 is_preposition_of B76) implies ( B77 . 1 ) = ( B76 . 1 ))))
proof
let C104 being non  empty set;
let C105 , C106 being (FinSequence of C104);
assume that
L382: ( len C106 ) > ( 0 )
and
L383: C106 is_preposition_of C105;
L384: ( mid (C105 , 1 , ( len C106 )) ) = C106 by L382 , L383 , L362;
L385: ( len C106 ) <= ( len C105 ) by L383 , FINSEQ_1:63;
L386: ( ( 0 ) + 1 ) <= ( len C106 ) by L382 , NAT_1:13;
thus L387: thesis by L386 , L384 , L385 , FINSEQ_6:123;
end;
definition
let C107 being non  empty set;
let C108 , C109 being (FinSequence of C107);
pred C109 is_postposition_of C108
means
:L388: ( Rev C109 ) is_preposition_of ( Rev C108 )
;correctness;
end;
theorem
L390: (for B78 being non  empty set holds (for B79 , B80 being (FinSequence of B78) holds (( len B80 ) = ( 0 ) implies B80 is_postposition_of B79)))
proof
let C110 being non  empty set;
let C111 , C112 being (FinSequence of C110);
assume L391: ( len C112 ) = ( 0 );
L392: ( len ( Rev C112 ) ) = ( len C112 ) by FINSEQ_5:def 3;
L393: ( Rev C112 ) is_preposition_of ( Rev C111 ) by L392 , L391 , L362;
thus L394: thesis by L393 , L388;
end;
theorem
L395: (for B81 being non  empty set holds (for B82 , B83 being (FinSequence of B81) holds (B83 is_postposition_of B82 implies ( len B83 ) <= ( len B82 ))))
proof
let C113 being non  empty set;
let C114 , C115 being (FinSequence of C113);
assume L396: C115 is_postposition_of C114;
L397: ( Rev C115 ) is_preposition_of ( Rev C114 ) by L396 , L388;
L398: ( len ( Rev C115 ) ) = ( len C115 ) by FINSEQ_5:def 3;
L399: ( len ( Rev C114 ) ) = ( len C114 ) by FINSEQ_5:def 3;
thus L400: thesis by L399 , L397 , L398 , FINSEQ_1:63;
end;
theorem
L401: (for B84 being non  empty set holds (for B85 , B86 being (FinSequence of B84) holds (B86 is_postposition_of B85 implies (( len B86 ) > ( 0 ) implies (( len B86 ) <= ( len B85 ) & ( mid (B85 , ( ( ( len B85 ) + 1 ) -' ( len B86 ) ) , ( len B85 )) ) = B86)))))
proof
let C116 being non  empty set;
let C117 , C118 being (FinSequence of C116);
assume L402: C118 is_postposition_of C117;
L403: ( Rev C118 ) is_preposition_of ( Rev C117 ) by L402 , L388;
L404: (( len ( Rev C118 ) ) > ( 0 ) implies (1 <= ( len ( Rev C117 ) ) & ( mid (( Rev C117 ) , 1 , ( len ( Rev C118 ) )) ) = ( Rev C118 ))) by L403 , L362;
L405: ( len ( Rev C118 ) ) = ( len C118 ) by FINSEQ_5:def 3;
L406: ( len ( Rev C117 ) ) = ( len C117 ) by FINSEQ_5:def 3;
L407:
now
assume L408: ( len C118 ) > ( 0 );
L409: 1 <= ( len C117 ) by L408 , L403 , L405 , L406 , L362;
L410: ( mid (( Rev C117 ) , 1 , ( len C118 )) ) = ( Rev C118 ) by L403 , L405 , L408 , L362;
L411: ( ( len C117 ) - 1 ) >= ( 0 ) by L404 , L406 , L408 , FINSEQ_5:def 3 , XREAL_1:48;
L412: ( len C118 ) <= ( len C117 ) by L402 , L395;
L413: ( ( len C117 ) - ( len C118 ) ) >= ( 0 ) by L402 , L395 , XREAL_1:48;
L414: ( len C117 ) < ( ( len C117 ) + 1 ) by XREAL_1:29;
L415: ( len C118 ) < ( ( len C117 ) + 1 ) by L414 , L412 , XXREAL_0:2;
L416: ( ( ( len C117 ) + 1 ) - ( len C118 ) ) > ( 0 ) by L415 , XREAL_1:50;
L417: ( ( 0 ) + 1 ) <= ( len C118 ) by L408 , NAT_1:13;
L418: C118 = ( Rev ( Rev C118 ) )
.= ( mid (( Rev ( Rev C117 ) ) , ( ( ( len C117 ) -' ( len C118 ) ) + 1 ) , ( ( ( len C117 ) -' 1 ) + 1 )) ) by L406 , L409 , L410 , L412 , L417 , FINSEQ_6:113
.= ( mid (C117 , ( ( ( len C117 ) -' ( len C118 ) ) + 1 ) , ( ( ( len C117 ) -' 1 ) + 1 )) );
L419: ( ( ( len C117 ) -' ( len C118 ) ) + 1 ) = ( ( ( len C117 ) - ( len C118 ) ) + 1 ) by L413 , XREAL_0:def 2
.= ( ( ( len C117 ) + 1 ) -' ( len C118 ) ) by L416 , XREAL_0:def 2;
L420: ( ( ( len C117 ) -' 1 ) + 1 ) = ( ( ( len C117 ) - 1 ) + 1 ) by L411 , XREAL_0:def 2
.= ( len C117 );
thus L421: (( len C118 ) <= ( len C117 ) & ( mid (C117 , ( ( ( len C117 ) + 1 ) -' ( len C118 ) ) , ( len C117 )) ) = C118) by L420 , L402 , L418 , L419 , L395;
end;
thus L422: thesis by L407;
end;
theorem
L423: (for B87 being non  empty set holds (for B88 , B89 being (FinSequence of B87) holds ((( len B89 ) > ( 0 ) implies (( len B89 ) <= ( len B88 ) & ( mid (B88 , ( ( ( len B88 ) + 1 ) -' ( len B89 ) ) , ( len B88 )) ) = B89)) implies B89 is_postposition_of B88)))
proof
let C119 being non  empty set;
let C120 , C121 being (FinSequence of C119);
assume L424: (( len C121 ) > ( 0 ) implies (( len C121 ) <= ( len C120 ) & ( mid (C120 , ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) , ( len C120 )) ) = C121));
L425: ( len ( Rev C120 ) ) = ( len C120 ) by FINSEQ_5:def 3;
L426:
now
per cases ;
case L427: ( len C121 ) > ( 0 );
L428: ( ( 0 ) + 1 ) <= ( len C121 ) by L427 , NAT_1:13;
L429: ( ( len C121 ) - 1 ) >= ( 0 ) by L428 , XREAL_1:48;
L430: ( len C120 ) < ( ( len C120 ) + 1 ) by XREAL_1:29;
L431: ( len C121 ) < ( ( len C120 ) + 1 ) by L430 , L424 , XXREAL_0:2;
L432: ( ( ( len C120 ) + 1 ) - ( len C121 ) ) > ( 0 ) by L431 , XREAL_1:50;
L433: ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) = ( ( ( len C120 ) + 1 ) - ( len C121 ) ) by L432 , XREAL_0:def 2;
L434: ( ( 0 ) + 1 ) <= ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) by L433 , L432 , NAT_1:13;
L435: ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) = ( ( len C120 ) - ( ( len C121 ) - 1 ) ) by L432 , XREAL_0:def 2;
L436: ( ( len C120 ) + ( 0 ) ) <= ( ( len C120 ) + ( ( len C121 ) - 1 ) ) by L429 , XREAL_1:7;
L437: ( ( len C120 ) - ( ( len C121 ) - 1 ) ) <= ( len C120 ) by L436 , XREAL_1:20;
L438: 1 <= ( len C120 ) by L424 , L428 , XXREAL_0:2;
L439: ( ( ( len C120 ) -' ( len C120 ) ) + 1 ) = ( ( ( len C120 ) - ( len C120 ) ) + 1 ) by XREAL_0:def 2
.= 1;
L440: ( len C120 ) < ( ( len C120 ) + 1 ) by XREAL_1:29;
L441: ( len C121 ) <= ( ( len C120 ) + 1 ) by L440 , L424 , XXREAL_0:2;
L442: ( ( ( len C120 ) + 1 ) - ( len C121 ) ) >= ( 0 ) by L441 , XREAL_1:48;
L443: ( ( len C120 ) - ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) ) = ( ( len C120 ) - ( ( ( len C120 ) + 1 ) - ( len C121 ) ) ) by L442 , XREAL_0:def 2
.= ( ( len C121 ) - 1 );
L444: ( ( ( len C120 ) -' ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) ) + 1 ) = ( ( ( len C120 ) - ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) ) + 1 ) by L443 , L429 , XREAL_0:def 2;
L445: ( Rev C121 ) = ( mid (( Rev C120 ) , ( ( ( len C120 ) -' ( len C120 ) ) + 1 ) , ( ( ( len C120 ) -' ( ( ( len C120 ) + 1 ) -' ( len C121 ) ) ) + 1 )) ) by L424 , L427 , L434 , L435 , L437 , L438 , FINSEQ_6:113
.= ( mid (( Rev C120 ) , 1 , ( len ( Rev C121 ) )) ) by L439 , L443 , L444 , FINSEQ_5:def 3;
L446: 1 <= ( len ( Rev C120 ) ) by L424 , L425 , L428 , XXREAL_0:2;
L447: ( Rev C121 ) is_preposition_of ( Rev C120 ) by L446 , L445 , L362;
thus L448: thesis by L447 , L388;
end;
case L449: ( len C121 ) <= ( 0 );
L450: ( len C121 ) = ( 0 ) by L449;
thus L451: thesis by L450 , L390;
end;
end;
thus L453: thesis by L426;
end;
theorem
L454: (for B90 being non  empty set holds (for B91 , B92 being (FinSequence of B90) holds ((1 <= ( len B91 ) & B92 is_preposition_of B91) implies B92 is_substring_of B91 , 1)))
proof
let C122 being non  empty set;
let C123 , C124 being (FinSequence of C122);
assume that
L455: 1 <= ( len C123 )
and
L456: C124 is_preposition_of C123;
L457:
now
per cases ;
case L458: ( len C124 ) > ( 0 );
L459: ( mid (C123 , 1 , ( ( 1 -' 1 ) + ( len C124 ) )) ) = ( mid (C123 , 1 , ( ( 0 ) + ( len C124 ) )) ) by NAT_2:8
.= C124 by L456 , L458 , L362;
thus L460: thesis by L459 , L455 , L306;
end;
case L461: ( len C124 ) <= ( 0 );
thus L462: thesis by L461 , L306;
end;
end;
thus L464: thesis by L457;
end;
theorem
L465: (for B93 being non  empty set holds (for B94 , B95 being (FinSequence of B93) holds (for B96 being (Element of ( NAT )) holds ((not B95 is_substring_of B94 , B96) implies (for B97 being (Element of ( NAT )) holds ((B96 <= B97 & ( 0 ) < B97) implies ( mid (B94 , B97 , ( ( B97 -' 1 ) + ( len B95 ) )) ) <> B95))))))
proof
let C125 being non  empty set;
let C126 , C127 being (FinSequence of C125);
let C128 being (Element of ( NAT ));
assume L466: (not C127 is_substring_of C126 , C128);
L467:
now
let C129 being (Element of ( NAT ));
assume that
L468: C128 <= C129
and
L469: ( 0 ) < C129;
L470:
now
per cases ;
case L471: C129 <= ( len C126 );
thus L472: ( mid (C126 , C129 , ( ( C129 -' 1 ) + ( len C127 ) )) ) <> C127 by L471 , L466 , L468 , L306;
end;
case L473: C129 > ( len C126 );
L474:
now
per cases ;
case L475: C129 <= ( ( C129 -' 1 ) + ( len C127 ) );
L476: ( mid (C126 , C129 , ( ( C129 -' 1 ) + ( len C127 ) )) ) = ( ( C126 /^ ( C129 -' 1 ) ) | ( ( ( ( C129 -' 1 ) + ( len C127 ) ) -' C129 ) + 1 ) ) by L475 , FINSEQ_6:def 3;
L477:
now
per cases ;
case L478: ( C129 -' 1 ) <= ( len C126 );
L479: C129 >= ( ( len C126 ) + 1 ) by L473 , NAT_1:13;
L480: ( C129 - 1 ) >= ( ( ( len C126 ) + 1 ) - 1 ) by L479 , XREAL_1:9;
L481: ( ( 0 ) + 1 ) <= C129 by L469 , NAT_1:13;
L482: ( 0 ) <= ( C129 - 1 ) by L481 , XREAL_1:48;
L483: ( C129 -' 1 ) = ( C129 - 1 ) by L482 , XREAL_0:def 2;
L484: ( C129 -' 1 ) = ( len C126 ) by L483 , L478 , L480 , XXREAL_0:1;
L485: ( len ( C126 /^ ( C129 -' 1 ) ) ) = ( ( len C126 ) - ( C129 -' 1 ) ) by L478 , RFINSEQ:def 1;
thus L486: ( len ( C126 /^ ( C129 -' 1 ) ) ) = ( 0 ) by L485 , L484;
end;
case L487: ( C129 -' 1 ) > ( len C126 );
L488: ( C126 /^ ( C129 -' 1 ) ) = ( <*> C125 ) by L487 , RFINSEQ:def 1;
thus L489: ( len ( C126 /^ ( C129 -' 1 ) ) ) = ( 0 ) by L488;
end;
end;
L491: ( C126 /^ ( C129 -' 1 ) ) = ( <*> C125 ) by L477;
L492: ( ( C126 /^ ( C129 -' 1 ) ) | ( ( ( ( C129 -' 1 ) + ( len C127 ) ) -' C129 ) + 1 ) ) = ( <*> C125 ) by L491 , L477 , FINSEQ_1:58;
L493:
now
assume L494: ( mid (C126 , C129 , ( ( C129 -' 1 ) + ( len C127 ) )) ) = C127;
L495: ( ( 0 ) + 1 ) <= C129 by L469 , NAT_1:13;
L496: ( 0 ) <= ( C129 - 1 ) by L495 , XREAL_1:48;
L497: C129 < ( C129 + 1 ) by XREAL_1:29;
L498: ( C129 - 1 ) < ( ( C129 + 1 ) - 1 ) by L497 , XREAL_1:9;
thus L499: contradiction by L498 , L475 , L476 , L477 , L492 , L494 , L496 , XREAL_0:def 2;
end;
thus L500: ( mid (C126 , C129 , ( ( C129 -' 1 ) + ( len C127 ) )) ) <> C127 by L493;
end;
case L501: C129 > ( ( C129 -' 1 ) + ( len C127 ) );
L502:
now
assume L503: ( len C127 ) > ( 0 );
L504: ( len C127 ) >= ( ( 0 ) + 1 ) by L503 , NAT_1:13;
L505: ( ( C129 -' 1 ) + ( len C127 ) ) >= ( ( C129 -' 1 ) + 1 ) by L504 , XREAL_1:7;
L506: ( ( 0 ) + 1 ) <= C129 by L469 , NAT_1:13;
L507: ( 0 ) <= ( C129 - 1 ) by L506 , XREAL_1:48;
L508: ( C129 -' 1 ) = ( C129 - 1 ) by L507 , XREAL_0:def 2;
thus L509: contradiction by L508 , L501 , L505;
end;
thus L510: contradiction by L502 , L466 , L306;
end;
end;
thus L512: ( mid (C126 , C129 , ( ( C129 -' 1 ) + ( len C127 ) )) ) <> C127 by L474;
end;
end;
thus L514: ( mid (C126 , C129 , ( ( C129 -' 1 ) + ( len C127 ) )) ) <> C127 by L470;
end;
thus L515: thesis by L467;
end;
definition
let C130 being non  empty set;
let C131 , C132 being (FinSequence of C130);
let C133 being (Element of ( NAT ));
func instr (C133 , C131 , C132) -> (Element of ( NAT )) means 
:L516: ((it <> ( 0 ) implies (C133 <= it & C132 is_preposition_of ( C131 /^ ( it -' 1 ) ) & (for B98 being (Element of ( NAT )) holds ((B98 >= C133 & B98 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B98 -' 1 ) )) implies B98 >= it)))) & (it = ( 0 ) implies (not C132 is_substring_of C131 , C133)));
existence
proof
L517: ( 1 -' 1 ) = ( 1 - 1 ) by XREAL_0:def 2;
L518:
now
per cases ;
case L519: C132 is_substring_of C131 , C133;
L520:
now
per cases ;
case L521: ( len C132 ) > ( 0 );
L522: (ex B99 being (Element of ( NAT )) st (C133 <= B99 & B99 <= ( len C131 ) & ( mid (C131 , B99 , ( ( B99 -' 1 ) + ( len C132 ) )) ) = C132)) by L521 , L519 , L306;
L523: ( ( 0 ) + 1 ) <= ( len C132 ) by L521 , NAT_1:13;
L524:
now
per cases ;
case L525: C133 > ( 0 );
defpred S2[ Nat ] means (C133 <= $1 & $1 <= ( len C131 ) & ( mid (C131 , $1 , ( ( $1 -' 1 ) + ( len C132 ) )) ) = C132);
L526: (ex B100 being Nat st S2[ B100 ]) by L522;
L527: (ex B101 being Nat st (S2[ B101 ] & (for B102 being Nat holds (S2[ B102 ] implies B102 >= B101)))) from NAT_1:sch 5(L526);
consider C134 being Nat such that L528: C133 <= C134 and L529: C134 <= ( len C131 ) and L530: ( mid (C131 , C134 , ( ( C134 -' 1 ) + ( len C132 ) )) ) = C132 and L531: (for B103 being Nat holds ((C133 <= B103 & B103 <= ( len C131 ) & ( mid (C131 , B103 , ( ( B103 -' 1 ) + ( len C132 ) )) ) = C132) implies B103 >= C134)) by L527;
reconsider D9 = C134 as (Element of ( NAT )) by ORDINAL1:def 12;
L532: ( ( 0 ) + 1 ) <= D9 by L525 , L528 , NAT_1:13;
L533: ( D9 - 1 ) >= ( 0 ) by L532 , XREAL_1:48;
L534: ( D9 -' 1 ) = ( D9 - 1 ) by L533 , XREAL_0:def 2;
L535: D9 < ( D9 + 1 ) by XREAL_1:29;
L536: ( D9 - 1 ) < ( ( D9 + 1 ) - 1 ) by L535 , XREAL_1:9;
L537: ( D9 -' 1 ) < ( len C131 ) by L536 , L529 , L534 , XXREAL_0:2;
L538: ( len ( C131 /^ ( D9 -' 1 ) ) ) = ( ( len C131 ) - ( D9 -' 1 ) ) by L537 , RFINSEQ:def 1;
L539: ( ( len C131 ) - D9 ) >= ( 0 ) by L529 , XREAL_1:48;
L540: ( ( ( len C131 ) - D9 ) + 1 ) >= ( ( 0 ) + 1 ) by L539 , XREAL_1:7;
L541: ( 1 -' 1 ) = ( 1 - 1 ) by XREAL_0:def 2;
L542: ( ( 0 ) + 1 ) <= ( len C132 ) by L521 , NAT_1:13;
L543: ( ( D9 -' 1 ) + 1 ) <= ( ( D9 -' 1 ) + ( len C132 ) ) by L542 , XREAL_1:7;
L544: ( ( len C132 ) - 1 ) >= ( 0 ) by L542 , XREAL_1:48;
L545: ( ( ( ( - 1 ) + ( len C132 ) ) + D9 ) - D9 ) >= ( 0 ) by L544;
L546: ( ( ( ( D9 -' 1 ) + ( len C132 ) ) -' D9 ) + 1 ) = ( ( ( len C132 ) - 1 ) + 1 ) by L545 , L534 , XREAL_0:def 2
.= ( ( ( len C132 ) -' 1 ) + 1 ) by L544 , XREAL_0:def 2;
L547: ( mid (( C131 /^ ( D9 -' 1 ) ) , 1 , ( len C132 )) ) = ( ( ( C131 /^ ( D9 -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C132 ) -' 1 ) + 1 ) ) by L523 , FINSEQ_6:def 3
.= ( ( C131 /^ ( D9 -' 1 ) ) | ( ( ( ( D9 -' 1 ) + ( len C132 ) ) -' D9 ) + 1 ) ) by L541 , L546 , FINSEQ_5:28
.= ( mid (C131 , D9 , ( ( D9 -' 1 ) + ( len C132 ) )) ) by L534 , L543 , FINSEQ_6:def 3;
L548: C132 is_preposition_of ( C131 /^ ( D9 -' 1 ) ) by L547 , L530 , L534 , L538 , L540 , L362;
L549: (for B104 being (Element of ( NAT )) holds ((B104 >= C133 & B104 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B104 -' 1 ) )) implies B104 >= D9))
proof
let C135 being (Element of ( NAT ));
assume that
L550: C135 >= C133
and
L551: C135 > ( 0 )
and
L552: C132 is_preposition_of ( C131 /^ ( C135 -' 1 ) );
L553: ( mid (( C131 /^ ( C135 -' 1 ) ) , 1 , ( len C132 )) ) = C132 by L521 , L552 , L362;
L554:
now
per cases ;
case L555: C135 <= ( len C131 );
L556: ( ( 0 ) + 1 ) <= C135 by L551 , NAT_1:13;
L557: ( C135 - 1 ) >= ( 0 ) by L556 , XREAL_1:48;
L558: ( C135 -' 1 ) = ( C135 - 1 ) by L557 , XREAL_0:def 2;
L559: ( ( ( ( - 1 ) + ( len C132 ) ) + C135 ) - C135 ) >= ( 0 ) by L544;
L560: ( ( ( ( C135 -' 1 ) + ( len C132 ) ) -' C135 ) + 1 ) = ( ( ( len C132 ) - 1 ) + 1 ) by L559 , L558 , XREAL_0:def 2
.= ( ( ( len C132 ) -' 1 ) + 1 ) by L544 , XREAL_0:def 2;
L561: ( ( C135 -' 1 ) + 1 ) <= ( ( C135 -' 1 ) + ( len C132 ) ) by L542 , XREAL_1:7;
L562: ( mid (( C131 /^ ( C135 -' 1 ) ) , 1 , ( len C132 )) ) = ( ( ( C131 /^ ( C135 -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C132 ) -' 1 ) + 1 ) ) by L523 , FINSEQ_6:def 3
.= ( ( C131 /^ ( C135 -' 1 ) ) | ( ( ( ( C135 -' 1 ) + ( len C132 ) ) -' C135 ) + 1 ) ) by L541 , L560 , FINSEQ_5:28
.= ( mid (C131 , C135 , ( ( C135 -' 1 ) + ( len C132 ) )) ) by L558 , L561 , FINSEQ_6:def 3;
thus L563: thesis by L562 , L531 , L550 , L553 , L555;
end;
case L564: C135 > ( len C131 );
thus L565: thesis by L564 , L529 , XXREAL_0:2;
end;
end;
thus L567: thesis by L554;
end;
thus L568: thesis by L549 , L525 , L528 , L548;
end;
case L569: C133 = ( 0 );
L570: C132 is_substring_of C131 , 1 by L569 , L519 , L327;
reconsider D10 = 1 as (Element of ( NAT ));
L571: (ex B105 being (Element of ( NAT )) st (D10 <= B105 & B105 <= ( len C131 ) & ( mid (C131 , B105 , ( ( B105 -' 1 ) + ( len C132 ) )) ) = C132)) by L521 , L570 , L306;
defpred S3[ Nat ] means (D10 <= $1 & $1 <= ( len C131 ) & ( mid (C131 , $1 , ( ( $1 -' 1 ) + ( len C132 ) )) ) = C132);
L572: (ex B106 being Nat st S3[ B106 ]) by L571;
L573: (ex B107 being Nat st (S3[ B107 ] & (for B108 being Nat holds (S3[ B108 ] implies B108 >= B107)))) from NAT_1:sch 5(L572);
consider C136 being Nat such that L574: D10 <= C136 and L575: C136 <= ( len C131 ) and L576: ( mid (C131 , C136 , ( ( C136 -' 1 ) + ( len C132 ) )) ) = C132 and L577: (for B109 being Nat holds ((D10 <= B109 & B109 <= ( len C131 ) & ( mid (C131 , B109 , ( ( B109 -' 1 ) + ( len C132 ) )) ) = C132) implies B109 >= C136)) by L573;
reconsider D11 = C136 as (Element of ( NAT )) by ORDINAL1:def 12;
L578: ( D11 - 1 ) >= ( 0 ) by L574 , XREAL_1:48;
L579: ( D11 -' 1 ) = ( D11 - 1 ) by L578 , XREAL_0:def 2;
L580: D11 < ( D11 + 1 ) by XREAL_1:29;
L581: ( D11 - 1 ) < ( ( D11 + 1 ) - 1 ) by L580 , XREAL_1:9;
L582: ( D11 -' 1 ) < ( len C131 ) by L581 , L575 , L579 , XXREAL_0:2;
L583: ( len ( C131 /^ ( D11 -' 1 ) ) ) = ( ( len C131 ) - ( D11 -' 1 ) ) by L582 , RFINSEQ:def 1;
L584: ( ( len C131 ) - D11 ) >= ( 0 ) by L575 , XREAL_1:48;
L585: ( ( ( len C131 ) - D11 ) + 1 ) >= ( ( 0 ) + 1 ) by L584 , XREAL_1:7;
L586: ( ( 0 ) + 1 ) <= ( len C132 ) by L521 , NAT_1:13;
L587: ( ( D11 -' 1 ) + 1 ) <= ( ( D11 -' 1 ) + ( len C132 ) ) by L586 , XREAL_1:7;
L588: ( ( len C132 ) - 1 ) >= ( 0 ) by L586 , XREAL_1:48;
L589: ( ( ( ( - 1 ) + ( len C132 ) ) + D11 ) - D11 ) >= ( 0 ) by L588;
L590: ( ( ( ( D11 -' 1 ) + ( len C132 ) ) -' D11 ) + 1 ) = ( ( ( len C132 ) - 1 ) + 1 ) by L589 , L579 , XREAL_0:def 2
.= ( ( ( len C132 ) -' 1 ) + 1 ) by L588 , XREAL_0:def 2;
L591: ( mid (( C131 /^ ( D11 -' 1 ) ) , 1 , ( len C132 )) ) = ( ( ( C131 /^ ( D11 -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C132 ) -' 1 ) + 1 ) ) by L523 , FINSEQ_6:def 3
.= ( ( C131 /^ ( D11 -' 1 ) ) | ( ( ( ( D11 -' 1 ) + ( len C132 ) ) -' D11 ) + 1 ) ) by L517 , L590 , FINSEQ_5:28
.= ( mid (C131 , D11 , ( ( D11 -' 1 ) + ( len C132 ) )) ) by L579 , L587 , FINSEQ_6:def 3;
L592: C132 is_preposition_of ( C131 /^ ( D11 -' 1 ) ) by L591 , L576 , L579 , L583 , L585 , L362;
L593: (for B110 being (Element of ( NAT )) holds ((B110 >= D10 & B110 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B110 -' 1 ) )) implies B110 >= D11))
proof
let C137 being (Element of ( NAT ));
assume that
L594: C137 >= D10
and
L595: C137 > ( 0 )
and
L596: C132 is_preposition_of ( C131 /^ ( C137 -' 1 ) );
L597: ( mid (( C131 /^ ( C137 -' 1 ) ) , 1 , ( len C132 )) ) = C132 by L521 , L596 , L362;
L598:
now
per cases ;
case L599: C137 <= ( len C131 );
L600: ( C137 - 1 ) >= ( 0 ) by L594 , XREAL_1:48;
L601: ( C137 -' 1 ) = ( C137 - 1 ) by L600 , XREAL_0:def 2;
L602: ( ( ( ( - 1 ) + ( len C132 ) ) + C137 ) - C137 ) >= ( 0 ) by L588;
L603: ( ( ( ( C137 -' 1 ) + ( len C132 ) ) -' C137 ) + 1 ) = ( ( ( len C132 ) - 1 ) + 1 ) by L602 , L601 , XREAL_0:def 2
.= ( ( ( len C132 ) -' 1 ) + 1 ) by L588 , XREAL_0:def 2;
L604: ( ( C137 -' 1 ) + 1 ) <= ( ( C137 -' 1 ) + ( len C132 ) ) by L586 , XREAL_1:7;
L605: ( mid (( C131 /^ ( C137 -' 1 ) ) , 1 , ( len C132 )) ) = ( ( ( C131 /^ ( C137 -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C132 ) -' 1 ) + 1 ) ) by L523 , FINSEQ_6:def 3
.= ( ( C131 /^ ( C137 -' 1 ) ) | ( ( ( ( C137 -' 1 ) + ( len C132 ) ) -' C137 ) + 1 ) ) by L517 , L603 , FINSEQ_5:28
.= ( mid (C131 , C137 , ( ( C137 -' 1 ) + ( len C132 ) )) ) by L601 , L604 , FINSEQ_6:def 3;
thus L606: thesis by L605 , L577 , L594 , L597 , L599;
end;
case L607: C137 > ( len C131 );
thus L608: thesis by L607 , L575 , XXREAL_0:2;
end;
end;
thus L610: thesis by L598;
end;
L611: (for B111 being (Element of ( NAT )) holds ((B111 >= C133 & B111 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B111 -' 1 ) )) implies B111 >= D11))
proof
let C138 being (Element of ( NAT ));
assume that
L612: C138 >= C133
and
L613: C138 > ( 0 )
and
L614: C132 is_preposition_of ( C131 /^ ( C138 -' 1 ) );
L615: C138 >= ( ( 0 ) + D10 ) by L613 , NAT_1:13;
thus L616: thesis by L615 , L593 , L614;
end;
thus L617: thesis by L611 , L569 , L574 , L592;
end;
end;
thus L619: thesis by L524;
end;
case L620: ( len C132 ) <= ( 0 );
reconsider D12 = ( max (C133 , 1) ) as (Element of ( NAT ));
L621: D12 >= C133 by XXREAL_0:25;
L622: D12 >= ( ( 0 ) + 1 ) by XXREAL_0:25;
L623: C132 is_preposition_of ( C131 /^ ( D12 -' 1 ) ) by L620 , L362;
L624: (for B112 being (Element of ( NAT )) holds ((B112 >= C133 & B112 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B112 -' 1 ) )) implies B112 >= D12))
proof
let C139 being (Element of ( NAT ));
assume that
L625: C139 >= C133
and
L626: C139 > ( 0 )
and
L627: C132 is_preposition_of ( C131 /^ ( C139 -' 1 ) );
L628: C139 >= ( ( 0 ) + 1 ) by L626 , NAT_1:13;
thus L629: thesis by L628 , L625 , XXREAL_0:28;
end;
thus L630: thesis by L624 , L621 , L622 , L623;
end;
end;
thus L632: thesis by L520;
end;
case L633: (not C132 is_substring_of C131 , C133);
thus L634: thesis by L633;
end;
end;
thus L636: thesis by L518;
end;
uniqueness
proof
L637: ( 1 -' 1 ) = ( 1 - 1 ) by XREAL_0:def 2;
thus L638: (for B113 , B114 being (Element of ( NAT )) holds (((B113 <> ( 0 ) implies (C133 <= B113 & C132 is_preposition_of ( C131 /^ ( B113 -' 1 ) ) & (for B115 being (Element of ( NAT )) holds ((B115 >= C133 & B115 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B115 -' 1 ) )) implies B115 >= B113)))) & (B113 = ( 0 ) implies (not C132 is_substring_of C131 , C133)) & (B114 <> ( 0 ) implies (C133 <= B114 & C132 is_preposition_of ( C131 /^ ( B114 -' 1 ) ) & (for B116 being (Element of ( NAT )) holds ((B116 >= C133 & B116 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B116 -' 1 ) )) implies B116 >= B114)))) & (B114 = ( 0 ) implies (not C132 is_substring_of C131 , C133))) implies B113 = B114))
proof
let C140 , C141 being (Element of ( NAT ));
assume that
L639: (C140 <> ( 0 ) implies (C133 <= C140 & C132 is_preposition_of ( C131 /^ ( C140 -' 1 ) ) & (for B117 being (Element of ( NAT )) holds ((B117 >= C133 & B117 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B117 -' 1 ) )) implies B117 >= C140))))
and
L640: (C140 = ( 0 ) implies (not C132 is_substring_of C131 , C133))
and
L641: (C141 <> ( 0 ) implies (C133 <= C141 & C132 is_preposition_of ( C131 /^ ( C141 -' 1 ) ) & (for B118 being (Element of ( NAT )) holds ((B118 >= C133 & B118 > ( 0 ) & C132 is_preposition_of ( C131 /^ ( B118 -' 1 ) )) implies B118 >= C141))))
and
L642: (C141 = ( 0 ) implies (not C132 is_substring_of C131 , C133));
L643:
now
per cases ;
case L644: ( len C132 ) > ( 0 );
L645: ( ( 0 ) + 1 ) <= ( len C132 ) by L644 , NAT_1:13;
L646: ( ( len C132 ) - 1 ) >= ( 0 ) by L645 , XREAL_1:48;
L647:
now
per cases ;
case L648: (C140 <> ( 0 ) & C141 <> ( 0 ));
L649: C141 >= C140 by L648 , L639 , L641;
L650: C140 >= C141 by L639 , L641 , L648;
thus L651: thesis by L650 , L649 , XXREAL_0:1;
end;
case L652: (C140 <> ( 0 ) & C141 = ( 0 ));
L653: ( len C132 ) > ( 0 ) by L652 , L642 , L306;
L654: (for B119 being (Element of ( NAT )) holds ((C133 <= B119 & ( 0 ) < B119) implies (not C132 is_preposition_of ( C131 /^ ( B119 -' 1 ) ))))
proof
let C142 being (Element of ( NAT ));
assume that
L655: C133 <= C142
and
L656: ( 0 ) < C142;
L657: ( ( 0 ) + 1 ) <= C142 by L656 , NAT_1:13;
L658: ( C142 - 1 ) >= ( 0 ) by L657 , XREAL_1:48;
L659: ( C142 -' 1 ) = ( C142 - 1 ) by L658 , XREAL_0:def 2;
L660: ( ( ( ( - 1 ) + ( len C132 ) ) + C142 ) - C142 ) >= ( 0 ) by L646;
L661: ( ( ( ( C142 -' 1 ) + ( len C132 ) ) -' C142 ) + 1 ) = ( ( ( len C132 ) - 1 ) + 1 ) by L660 , L659 , XREAL_0:def 2
.= ( ( ( len C132 ) -' 1 ) + 1 ) by L646 , XREAL_0:def 2;
L662: ( ( C142 -' 1 ) + 1 ) <= ( ( C142 -' 1 ) + ( len C132 ) ) by L645 , XREAL_1:7;
L663: ( mid (( C131 /^ ( C142 -' 1 ) ) , 1 , ( len C132 )) ) = ( ( ( C131 /^ ( C142 -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C132 ) -' 1 ) + 1 ) ) by L645 , FINSEQ_6:def 3
.= ( ( C131 /^ ( C142 -' 1 ) ) | ( ( ( ( C142 -' 1 ) + ( len C132 ) ) -' C142 ) + 1 ) ) by L637 , L661 , FINSEQ_5:28
.= ( mid (C131 , C142 , ( ( C142 -' 1 ) + ( len C132 ) )) ) by L659 , L662 , FINSEQ_6:def 3;
L664: (not (1 <= ( len ( C131 /^ ( C142 -' 1 ) ) ) & ( mid (( C131 /^ ( C142 -' 1 ) ) , 1 , ( len C132 )) ) = C132)) by L663 , L642 , L652 , L655 , L656 , L465;
thus L665: thesis by L664 , L653 , L362;
end;
thus L666: contradiction by L654 , L639 , L652;
end;
case L667: (C140 = ( 0 ) & C141 <> ( 0 ));
L668: ( len C132 ) > ( 0 ) by L667 , L640 , L306;
L669: (for B120 being (Element of ( NAT )) holds ((C133 <= B120 & ( 0 ) < B120) implies (not C132 is_preposition_of ( C131 /^ ( B120 -' 1 ) ))))
proof
let C143 being (Element of ( NAT ));
assume that
L670: C133 <= C143
and
L671: ( 0 ) < C143;
L672: ( ( 0 ) + 1 ) <= C143 by L671 , NAT_1:13;
L673: ( C143 - 1 ) >= ( 0 ) by L672 , XREAL_1:48;
L674: ( C143 -' 1 ) = ( C143 - 1 ) by L673 , XREAL_0:def 2;
L675: ( ( ( ( - 1 ) + ( len C132 ) ) + C143 ) - C143 ) >= ( 0 ) by L646;
L676: ( ( ( ( C143 -' 1 ) + ( len C132 ) ) -' C143 ) + 1 ) = ( ( ( len C132 ) - 1 ) + 1 ) by L675 , L674 , XREAL_0:def 2
.= ( ( ( len C132 ) -' 1 ) + 1 ) by L646 , XREAL_0:def 2;
L677: ( ( C143 -' 1 ) + 1 ) <= ( ( C143 -' 1 ) + ( len C132 ) ) by L645 , XREAL_1:7;
L678: ( mid (( C131 /^ ( C143 -' 1 ) ) , 1 , ( len C132 )) ) = ( ( ( C131 /^ ( C143 -' 1 ) ) /^ ( 1 -' 1 ) ) | ( ( ( len C132 ) -' 1 ) + 1 ) ) by L645 , FINSEQ_6:def 3
.= ( ( C131 /^ ( C143 -' 1 ) ) | ( ( ( ( C143 -' 1 ) + ( len C132 ) ) -' C143 ) + 1 ) ) by L637 , L676 , FINSEQ_5:28
.= ( mid (C131 , C143 , ( ( C143 -' 1 ) + ( len C132 ) )) ) by L674 , L677 , FINSEQ_6:def 3;
L679: (not (1 <= ( len ( C131 /^ ( C143 -' 1 ) ) ) & ( mid (( C131 /^ ( C143 -' 1 ) ) , 1 , ( len C132 )) ) = C132)) by L678 , L640 , L667 , L670 , L671 , L465;
thus L680: thesis by L679 , L668 , L362;
end;
thus L681: contradiction by L669 , L641 , L667;
end;
case L682: (C140 = ( 0 ) & C141 = ( 0 ));
thus L683: thesis by L682;
end;
end;
thus L685: thesis by L647;
end;
case L686: ( len C132 ) <= ( 0 );
L687:
now
per cases ;
case L688: (C140 <> ( 0 ) & C141 <> ( 0 ));
L689: C141 >= C140 by L688 , L639 , L641;
L690: C140 >= C141 by L639 , L641 , L688;
thus L691: thesis by L690 , L689 , XXREAL_0:1;
end;
case L692: (C140 <> ( 0 ) & C141 = ( 0 ));
thus L693: contradiction by L692 , L642 , L686 , L306;
end;
case L694: (C140 = ( 0 ) & C141 <> ( 0 ));
thus L695: contradiction by L694 , L640 , L686 , L306;
end;
case L696: (C140 = ( 0 ) & C141 = ( 0 ));
thus L697: contradiction by L696 , L640 , L686 , L306;
end;
end;
thus L699: thesis by L687;
end;
end;
thus L701: thesis by L643;
end;

end;
end;
definition
let C144 being non  empty set;
let C145 , C146 being (FinSequence of C144);
func addcr (C145 , C146) -> (FinSequence of C144) equals 
( ovlcon (C145 , C146) );
correctness;
end;
definition
let C147 being non  empty set;
let C148 , C149 being (FinSequence of C147);
pred C148 is_terminated_by C149
means
:L641: (( len C149 ) > ( 0 ) implies (( len C148 ) >= ( len C149 ) & ( instr (1 , C148 , C149) ) = ( ( ( len C148 ) + 1 ) -' ( len C149 ) )))
;correctness;
end;
theorem
L643: (for B121 being non  empty set holds (for B122 being (FinSequence of B121) holds B122 is_terminated_by B122))
proof
let C150 being non  empty set;
let C151 being (FinSequence of C150);
L644: ( ( ( len C151 ) + 1 ) -' ( len C151 ) ) = ( ( ( len C151 ) + 1 ) - ( len C151 ) ) by XREAL_0:def 2;
L645: ( 1 -' 1 ) = ( ( ( 0 ) + 1 ) -' 1 )
.= ( 0 ) by NAT_D:34;
L646: ( C151 /^ ( 1 -' 1 ) ) = C151 by L645 , FINSEQ_5:28;
L647: (for B123 being (Element of ( NAT )) holds ((B123 >= 1 & B123 > ( 0 ) & C151 is_preposition_of ( C151 /^ ( B123 -' 1 ) )) implies B123 >= 1));
L648: ( instr (1 , C151 , C151) ) = ( ( ( len C151 ) + 1 ) -' ( len C151 ) ) by L647 , L644 , L646 , L516;
thus L649: thesis by L648 , L641;
end;
