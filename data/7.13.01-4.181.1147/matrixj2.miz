:: Jordan Matrix Decomposition
::  by Karol P\c{a}k
::
:: Received July 11, 2008
:: Copyright (c) 2008-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, NAT_1, VECTSP_1, SUBSET_1, FUNCT_1, RELAT_1, FUNCT_4,
      XBOOLE_0, FUNCOP_1, MATRIX_1, FINSEQ_1, TREES_1, ARYTM_3, GROUP_1,
      SUPINF_2, ZFMISC_1, MATRIX_2, XXREAL_0, MATRIX_3, FINSEQ_2, ALGSTR_0,
      SETWISEO, CARD_3, CARD_1, INCSP_1, MESFUNC1, STRUCT_0, FVSUM_1, PARTFUN1,
      RVSUM_1, ARYTM_1, MATRIX_6, MATRIXJ1, MATHMORP, ORDINAL4, RFINSEQ,
      BCIALG_2, NEWTON, GRCAT_1, FUNCSDOM, VECTSP_2, RANKNULL, VECTSP10,
      HURWITZ, TARSKI, RLSUB_1, RLVECT_5, MATRLIN, MATRLIN2, MATRIXR1,
      FINSEQ_4, RLVECT_3, FINSET_1, RLVECT_2, POLYNOM5, VECTSP11, RLSUB_2,
      PRVECT_1, MATRIXJ2, UNIALG_1, MSSUBFAM;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, NUMBERS, CARD_1, XCMPLX_0,
      ALGSTR_0, XXREAL_0, ORDINAL1, NAT_1, FINSET_1, RELAT_1, FUNCT_1,
      PARTFUN1, FUNCT_2, SETWOP_2, FINSEQ_1, PRVECT_1, FUNCOP_1, STRUCT_0,
      RLVECT_1, GROUP_1, VECTSP_1, FINSEQ_2, MATRIX_1, MATRIX_2, FVSUM_1,
      NAT_D, GROUP_4, MATRIX_3, MATRIX_6, FUNCT_4, DOMAIN_1, VECTSP_4,
      VECTSP_6, VECTSP_7, VECTSP_9, MATRIX13, MATRLIN, FUNCT_7, LAPLACE, MOD_2,
      RFINSEQ, VECTSP_2, VECTSP_5, MATRIX15, RANKNULL, FUNCSDOM,
      POLYNOM5, WSIERP_1, MATRIXJ1, MATRLIN2, VECTSP11, GRCAT_1;
 constructors FINSOP_1, GROUP_4, WELLORD2, VECTSP_7, VECTSP_9, MATRIX_6,
      REALSET1, LAPLACE, VECTSP_5, RANKNULL, MATRIX15, POLYNOM5, MATRIXJ1,
      MATRLIN2, VECTSP11, REAL_1, BINARITH, RELSET_1, FUNCT_7, MATRIX13,
      FVSUM_1, GRCAT_1;
 registrations XBOOLE_0, FINSET_1, STRUCT_0, VECTSP_1, FUNCT_2, ORDINAL1,
      XXREAL_0, NAT_1, FINSEQ_1, RELAT_1, CARD_1, FINSEQ_2, XREAL_0, VECTSP_9,
      VALUED_0, MATRIXJ1, VECTSP11, POLYNOM5, FUNCOP_1, RELSET_1, MOD_2,
      GRCAT_1, PRVECT_1, MATRIX13, MATRLIN2;
 requirements ARITHM, NUMERALS, REAL, BOOLE, SUBSET;
 definitions STRUCT_0, TARSKI, RLVECT_1, FINSEQ_1, VECTSP_4, RELAT_1, GROUP_4,
      FVSUM_1, MATRIX_1, FUNCT_1, FUNCOP_1, MATRIXJ1, MATRLIN2;
 theorems ZFMISC_1, RLVECT_1, MATRIX_1, MATRIX_2, MATRIX_3, VECTSP_1, NAT_1,
      FINSEQ_2, CARD_1, CARD_2, FINSEQ_1, FINSEQ_3, FRECHET, FUNCT_1, FUNCT_2,
      FUNCT_7, FUNCOP_1, FVSUM_1, GROUP_1, LAPLACE, MATRIX_6, MATRIX13,
      MATRIXR1, MATRIXR2, MATRLIN, ORDINAL1, PARTFUN1, RELAT_1, STIRL2_1,
      STRUCT_0, TARSKI, WELLORD2, VECTSP_4, VECTSP_6, VECTSP_7, VECTSP_9,
      XBOOLE_0, XBOOLE_1, XREAL_1, XXREAL_0, MATRIX15, MOD_2, VECTSP10,
      RANKNULL, VECTSP_5, FINSEQ_4, FINSEQ_5, RFINSEQ, RVSUM_1, POLYNOM3,
      POLYNOM4, MATRIXJ1, MATRLIN2, VECTSP11, FUNCT_4, NAT_D, GRCAT_1;
 schemes NAT_1, MATRIX_1, FUNCT_2;

begin
L1: (for R6 being set holds (for R7 being set holds (for B1 being Function holds ((B1 is  one-to-one & R6 in ( dom B1 )) implies ( rng ( B1 +* (R6 , R7) ) ) = ( ( ( rng B1 ) \ { ( B1 . R6 ) } ) \/ { R7 } )))))
proof
let R6 being set;
let R7 being set;
let C1 being Function;
assume that
L2: C1 is  one-to-one
and
L3: R6 in ( dom C1 );
set D1 = ( R6 .--> R7 );
L4: (( dom D1 ) = { R6 } & ( rng D1 ) = { R7 }) by FUNCOP_1:8 , FUNCOP_1:13;
L5: ( rng ( C1 +* D1 ) ) = ( ( C1 .: ( ( dom C1 ) \ { R6 } ) ) \/ { R7 } ) by L4 , FRECHET:12
.= ( ( ( C1 .: ( dom C1 ) ) \ ( C1 .: { R6 } ) ) \/ { R7 } ) by L2 , FUNCT_1:64
.= ( ( ( rng C1 ) \ ( Im (C1 , R6) ) ) \/ { R7 } ) by RELAT_1:113
.= ( ( ( rng C1 ) \ { ( C1 . R6 ) } ) \/ { R7 } ) by L3 , FUNCT_1:59;
thus L6: thesis by L5 , L3 , FUNCT_7:def 3;
end;
definition
let R8 being Field;
let R10 being (Element of R8);
let R4 being Nat;
func Jordan_block (R10 , R4) -> (Matrix of R8) means 
:L7: (( len it ) = R4 & ( width it ) = R4 & (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in ( Indices it ) implies ((R1 = R2 implies ( it * (R1 , R2) ) = R10) & (( R1 + 1 ) = R2 implies ( it * (R1 , R2) ) = ( 1_ R8 )) & ((R1 <> R2 & ( R1 + 1 ) <> R2) implies ( it * (R1 , R2) ) = ( 0. R8 )))))));
existence
proof
defpred S1[ Nat , Nat , set ] means (($1 = $2 implies $3 = R10) & (( $1 + 1 ) = $2 implies $3 = ( 1_ R8 )) & (($1 <> $2 & ( $1 + 1 ) <> $2) implies $3 = ( 0. R8 )));
reconsider D2 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L8: (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in [: ( Seg D2 ) , ( Seg D2 ) :] implies (ex B2 being (Element of R8) st S1[ R1 , R2 , B2 ]))))
proof
let R1 being Nat;
let R2 being Nat;
assume that
L9: [ R1 , R2 ] in [: ( Seg D2 ) , ( Seg D2 ) :];
per cases ;
suppose L10: R1 = R2;

take R10;
thus L11: thesis by L10;
end;
suppose L12: ( R1 + 1 ) = R2;

take ( 1_ R8 );
thus L13: thesis by L12;
end;
suppose L14: (R1 <> R2 & ( R1 + 1 ) <> R2);

take ( 0. R8 );
thus L15: thesis by L14;
end;
end;
consider C2 being (Matrix of D2 , R8) such that L17: (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in ( Indices C2 ) implies S1[ R1 , R2 , ( C2 * (R1 , R2) ) ]))) from MATRIX_1:sch 2(L8);
take C2;
thus L18: thesis by L17 , MATRIX_1:24;
end;
uniqueness
proof
let C3 , C4 being (Matrix of R8);
assume that
L19: (( len C3 ) = R4 & ( width C3 ) = R4)
and
L20: (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in ( Indices C3 ) implies ((R1 = R2 implies ( C3 * (R1 , R2) ) = R10) & (( R1 + 1 ) = R2 implies ( C3 * (R1 , R2) ) = ( 1_ R8 )) & ((R1 <> R2 & ( R1 + 1 ) <> R2) implies ( C3 * (R1 , R2) ) = ( 0. R8 ))))))
and
L21: (( len C4 ) = R4 & ( width C4 ) = R4)
and
L22: (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in ( Indices C4 ) implies ((R1 = R2 implies ( C4 * (R1 , R2) ) = R10) & (( R1 + 1 ) = R2 implies ( C4 * (R1 , R2) ) = ( 1_ R8 )) & ((R1 <> R2 & ( R1 + 1 ) <> R2) implies ( C4 * (R1 , R2) ) = ( 0. R8 ))))));
L23:
now
let R1 being Nat;
let R2 being Nat;
assume that
L24: [ R1 , R2 ] in ( Indices C3 );
L25: ( Indices C3 ) = [: ( Seg R4 ) , ( Seg R4 ) :] by L19 , FINSEQ_1:def 3
.= ( Indices C4 ) by L21 , FINSEQ_1:def 3;
L26: (R1 = R2 or ( R1 + 1 ) = R2 or (R1 <> R2 & ( R1 + 1 ) <> R2));
L27: ((( C3 * (R1 , R2) ) = R10 & ( C4 * (R1 , R2) ) = R10) or (( C3 * (R1 , R2) ) = ( 1_ R8 ) & ( C4 * (R1 , R2) ) = ( 1_ R8 )) or (( C3 * (R1 , R2) ) = ( 0. R8 ) & ( C4 * (R1 , R2) ) = ( 0. R8 ))) by L26 , L20 , L22 , L24 , L25;
thus L28: ( C3 * (R1 , R2) ) = ( C4 * (R1 , R2) ) by L27;
end;
thus L29: thesis by L23 , L19 , L21 , MATRIX_1:21;
end;
end;
definition
let R8 being Field;
let R10 being (Element of R8);
let R4 being Nat;
redefine func Jordan_block (R10 , R4) -> (Upper_Triangular_Matrix of R4 , R8);

coherence
proof
L31: (( len ( Jordan_block (R10 , R4) ) ) = R4 & ( width ( Jordan_block (R10 , R4) ) ) = R4) by L7;
reconsider D3 = ( Jordan_block (R10 , R4) ) as (Matrix of R4 , R8) by L31 , MATRIX_2:7;
L32:
now
let R1 being Nat;
let R2 being Nat;
assume that
L33: [ R1 , R2 ] in ( Indices D3 );
assume L34: R1 > R2;
L35: ( R1 + 1 ) > R2 by L34 , NAT_1:13;
thus L36: ( D3 * (R1 , R2) ) = ( 0. R8 ) by L35 , L33 , L34 , L7;
end;
thus L37: thesis by L32 , MATRIX_2:def 3;
end;
end;
theorem
L39: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds ( diagonal_of_Matrix ( Jordan_block (R10 , R4) ) ) = ( R4 |-> R10 ))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
set D4 = ( Jordan_block (R10 , R4) );
L40:
now
L41: [: ( Seg R4 ) , ( Seg R4 ) :] = ( Indices D4 ) by MATRIX_1:24;
let R1 being Nat;
assume L42: (1 <= R1 & R1 <= R4);
L43: R1 in ( Seg R4 ) by L42 , FINSEQ_1:1;
L44: [ R1 , R1 ] in [: ( Seg R4 ) , ( Seg R4 ) :] by L43 , ZFMISC_1:87;
thus L45: ( ( diagonal_of_Matrix D4 ) . R1 ) = ( D4 * (R1 , R1) ) by L43 , MATRIX_3:def 10
.= R10 by L44 , L41 , L7
.= ( ( R4 |-> R10 ) . R1 ) by L43 , FINSEQ_2:57;
end;
L46: (( len ( diagonal_of_Matrix D4 ) ) = R4 & ( len ( R4 |-> R10 ) ) = R4) by CARD_1:def 7 , MATRIX_3:def 10;
thus L47: thesis by L46 , L40 , FINSEQ_1:14;
end;
theorem
L48: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds ( Det ( Jordan_block (R10 , R4) ) ) = ( ( power R8 ) . (R10 , R4) ))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
thus L49: ( Det ( Jordan_block (R10 , R4) ) ) = ( (the multF of R8) $$ ( diagonal_of_Matrix ( Jordan_block (R10 , R4) ) ) ) by MATRIX13:7
.= ( Product ( R4 |-> R10 ) ) by L39
.= ( ( power R8 ) . (R10 , R4) ) by MATRIXJ1:5;
end;
theorem
L50: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (( Jordan_block (R10 , R4) ) is  invertible iff (R4 = ( 0 ) or R10 <> ( 0. R8 ))))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
set D5 = ( Jordan_block (R10 , R4) );
L51: (D5 is  invertible implies (R10 <> ( 0. R8 ) or R4 = ( 0 )))
proof
assume L52: D5 is  invertible;
L53: ( Det D5 ) <> ( 0. R8 ) by L52 , LAPLACE:34;
assume L54: R10 = ( 0. R8 );
assume L55: R4 <> ( 0 );
L56: R4 in ( Seg R4 ) by L55 , FINSEQ_1:3;
L57: (( dom ( R4 |-> R10 ) ) = ( Seg R4 ) & ( ( R4 |-> R10 ) . R4 ) = R10) by L56 , FINSEQ_2:57 , FINSEQ_2:124;
L58: ( 0. R8 ) = ( Product ( R4 |-> R10 ) ) by L57 , L54 , L56 , FVSUM_1:82
.= ( ( power R8 ) . (R10 , R4) ) by MATRIXJ1:5;
thus L59: thesis by L58 , L53 , L48;
end;
L60: ((R4 = ( 0 ) or R10 <> ( 0. R8 )) implies D5 is  invertible)
proof
assume L61: (R4 = ( 0 ) or R10 <> ( 0. R8 ));
assume L62: (not D5 is  invertible);
L63: ( 0. R8 ) = ( Det D5 ) by L62 , LAPLACE:34
.= ( ( power R8 ) . (R10 , R4) ) by L48
.= ( Product ( R4 |-> R10 ) ) by MATRIXJ1:5;
L64: (ex B3 being (Element of ( NAT )) st (B3 in ( dom ( R4 |-> R10 ) ) & ( ( R4 |-> R10 ) . B3 ) = ( 0. R8 ))) by L63 , FVSUM_1:82;
L65: ( dom ( R4 |-> R10 ) ) = ( Seg R4 ) by FINSEQ_2:124;
thus L66: thesis by L65 , L61 , L64 , FINSEQ_2:57;
end;
thus L67: thesis by L60 , L51;
end;
theorem
L68: (for R1 being Nat holds (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds ((R1 in ( Seg R4 ) & R1 <> R4) implies ( Line (( Jordan_block (R10 , R4) ) , R1) ) = ( ( R10 * ( Line (( 1. (R8 , R4) ) , R1) ) ) + ( Line (( 1. (R8 , R4) ) , ( R1 + 1 )) ) ))))))
proof
let R1 being Nat;
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
assume that
L69: R1 in ( Seg R4 )
and
L70: R1 <> R4;
reconsider D6 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
set D7 = ( Jordan_block (R10 , R4) );
set D8 = ( R1 + 1 );
set D9 = ( 1. (R8 , R4) );
set D10 = ( Line (D9 , R1) );
set D11 = ( Line (D9 , D8) );
set D12 = ( Line (D7 , R1) );
L71: ( width D9 ) = R4 by MATRIX_1:24;
L72: ( Indices D9 ) = ( Indices D7 ) by MATRIX_1:26;
reconsider D13 = D10 , D14 = D11 , D15 = D12 as (Element of ( D6 -tuples_on (the carrier of R8) )) by MATRIX_1:24;
L73: ( Indices D9 ) = [: ( Seg R4 ) , ( Seg R4 ) :] by MATRIX_1:24;
L74: ( width D7 ) = R4 by MATRIX_1:24;
L75:
now
let R2 being Nat;
assume that
L76: R2 in ( Seg R4 );
L77: ( D13 . R2 ) = ( D9 * (R1 , R2) ) by L71 , L76 , MATRIX_1:def 7;
L78: ( ( R10 * D13 ) . R2 ) = ( R10 * ( D9 * (R1 , R2) ) ) by L77 , L76 , FVSUM_1:51;
L79: [ R1 , R2 ] in [: ( Seg R4 ) , ( Seg R4 ) :] by L69 , L76 , ZFMISC_1:87;
L80: R1 <= R4 by L69 , FINSEQ_1:1;
L81: R1 < R4 by L80 , L70 , XXREAL_0:1;
L82: (1 <= D8 & D8 <= R4) by L81 , NAT_1:11 , NAT_1:13;
L83: D8 in ( Seg R4 ) by L82;
L84: [ D8 , R2 ] in [: ( Seg R4 ) , ( Seg R4 ) :] by L83 , L76 , ZFMISC_1:87;
L85: ( D14 . R2 ) = ( D9 * (D8 , R2) ) by L71 , L76 , MATRIX_1:def 7;
L86: ( ( ( R10 * D13 ) + D14 ) . R2 ) = ( ( R10 * ( D9 * (R1 , R2) ) ) + ( D9 * (D8 , R2) ) ) by L85 , L76 , L78 , FVSUM_1:18;
L87: ( D15 . R2 ) = ( D7 * (R1 , R2) ) by L74 , L76 , MATRIX_1:def 7;
L88:
now
per cases ;
suppose L89: R1 = R2;

L90: D8 > R2 by L89 , NAT_1:13;
thus L91: ( D15 . R2 ) = R10 by L73 , L72 , L79 , L87 , L89 , L7
.= ( R10 + ( 0. R8 ) ) by RLVECT_1:def 4
.= ( ( R10 * ( 1_ R8 ) ) + ( 0. R8 ) ) by VECTSP_1:def 8
.= ( ( R10 * ( D9 * (R1 , R2) ) ) + ( 0. R8 ) ) by L73 , L79 , L89 , MATRIX_1:def 11
.= ( ( ( R10 * D13 ) + D14 ) . R2 ) by L73 , L84 , L86 , L90 , MATRIX_1:def 11;
end;
suppose L92: D8 = R2;

L93: R1 < R2 by L92 , NAT_1:13;
thus L94: ( D15 . R2 ) = ( 1_ R8 ) by L73 , L72 , L79 , L87 , L92 , L7
.= ( ( 0. R8 ) + ( 1_ R8 ) ) by RLVECT_1:def 4
.= ( ( R10 * ( 0. R8 ) ) + ( 1_ R8 ) ) by VECTSP_1:7
.= ( ( R10 * ( D9 * (R1 , R2) ) ) + ( 1_ R8 ) ) by L73 , L79 , L93 , MATRIX_1:def 11
.= ( ( ( R10 * D13 ) + D14 ) . R2 ) by L73 , L84 , L86 , L92 , MATRIX_1:def 11;
end;
suppose L95: (R1 <> R2 & D8 <> R2);

thus L96: ( D15 . R2 ) = ( 0. R8 ) by L95 , L73 , L72 , L79 , L87 , L7
.= ( ( 0. R8 ) + ( 0. R8 ) ) by RLVECT_1:def 4
.= ( ( R10 * ( 0. R8 ) ) + ( 0. R8 ) ) by VECTSP_1:7
.= ( ( R10 * ( D9 * (R1 , R2) ) ) + ( 0. R8 ) ) by L73 , L79 , L95 , MATRIX_1:def 11
.= ( ( ( R10 * D13 ) + D14 ) . R2 ) by L73 , L84 , L86 , L95 , MATRIX_1:def 11;
end;
end;
thus L98: ( ( ( R10 * D13 ) + D14 ) . R2 ) = ( D15 . R2 ) by L88;
end;
thus L99: thesis by L75 , FINSEQ_2:119;
end;
theorem
L100: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds ( Line (( Jordan_block (R10 , R4) ) , R4) ) = ( R10 * ( Line (( 1. (R8 , R4) ) , R4) ) ))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
set D16 = ( 1. (R8 , R4) );
set D17 = ( Line (D16 , R4) );
set D18 = ( Jordan_block (R10 , R4) );
set D19 = ( Line (D18 , R4) );
reconsider D20 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
L101: ( width D18 ) = R4 by MATRIX_1:24;
L102: ( Indices D16 ) = ( Indices D18 ) by MATRIX_1:26;
reconsider D21 = D17 , D22 = D19 as (Element of ( D20 -tuples_on (the carrier of R8) )) by MATRIX_1:24;
L103: ( Indices D16 ) = [: ( Seg R4 ) , ( Seg R4 ) :] by MATRIX_1:24;
L104: ( width D16 ) = R4 by MATRIX_1:24;
L105:
now
let R2 being Nat;
assume that
L106: R2 in ( Seg R4 );
L107: R4 <> ( 0 ) by L106;
L108: R4 in ( Seg R4 ) by L107 , FINSEQ_1:3;
L109: [ R4 , R2 ] in [: ( Seg R4 ) , ( Seg R4 ) :] by L108 , L106 , ZFMISC_1:87;
L110: ( D21 . R2 ) = ( D16 * (R4 , R2) ) by L104 , L106 , MATRIX_1:def 7;
L111: ( ( R10 * D21 ) . R2 ) = ( R10 * ( D16 * (R4 , R2) ) ) by L110 , L106 , FVSUM_1:51;
L112: ( D22 . R2 ) = ( D18 * (R4 , R2) ) by L101 , L106 , MATRIX_1:def 7;
L113:
now
per cases ;
suppose L114: R4 = R2;

thus L115: ( D22 . R2 ) = R10 by L114 , L103 , L102 , L109 , L112 , L7
.= ( R10 * ( 1_ R8 ) ) by VECTSP_1:def 8
.= ( ( R10 * D21 ) . R2 ) by L103 , L109 , L111 , L114 , MATRIX_1:def 11;
end;
suppose L116: ( R4 + 1 ) = R2;

L117: R2 > R4 by L116 , NAT_1:13;
thus L118: ( ( R10 * D21 ) . R2 ) = ( D22 . R2 ) by L117 , L106 , FINSEQ_1:1;
end;
suppose L119: (R4 <> R2 & ( R4 + 1 ) <> R2);

thus L120: ( D22 . R2 ) = ( 0. R8 ) by L119 , L103 , L102 , L109 , L112 , L7
.= ( R10 * ( 0. R8 ) ) by VECTSP_1:7
.= ( ( R10 * D21 ) . R2 ) by L103 , L109 , L111 , L119 , MATRIX_1:def 11;
end;
end;
thus L122: ( ( R10 * D21 ) . R2 ) = ( D22 . R2 ) by L113;
end;
thus L123: thesis by L105 , FINSEQ_2:119;
end;
theorem
L124: (for R1 being Nat holds (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (for B4 being (Element of ( R4 -tuples_on (the carrier of R8) )) holds (R1 in ( Seg R4 ) implies ((R1 <> R4 implies ( ( Line (( Jordan_block (R10 , R4) ) , R1) ) "*" B4 ) = ( ( R10 * ( B4 /. R1 ) ) + ( B4 /. ( R1 + 1 ) ) )) & (R1 = R4 implies ( ( Line (( Jordan_block (R10 , R4) ) , R1) ) "*" B4 ) = ( R10 * ( B4 /. R1 ) )))))))))
proof
let R1 being Nat;
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
let C5 being (Element of ( R4 -tuples_on (the carrier of R8) ));
assume that
L125: R1 in ( Seg R4 );
set D23 = ( Jordan_block (R10 , R4) );
L126: ( width D23 ) = R4 by MATRIX_1:24;
L127: ( ( Line (D23 , R1) ) . R1 ) = ( D23 * (R1 , R1) ) by L126 , L125 , MATRIX_1:def 7;
L128: ( Indices D23 ) = [: ( Seg R4 ) , ( Seg R4 ) :] by MATRIX_1:24;
L129: [ R1 , R1 ] in ( Indices D23 ) by L128 , L125 , ZFMISC_1:87;
reconsider D24 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
set D25 = ( Line (D23 , R1) );
reconsider D26 = D25 , D27 = C5 as (Element of ( D24 -tuples_on (the carrier of R8) )) by MATRIX_1:24;
L130: ( dom D27 ) = ( Seg R4 ) by FINSEQ_2:124;
L131: ( D27 . R1 ) = ( D27 /. R1 ) by L130 , L125 , PARTFUN1:def 6;
L132: ( dom ( mlt (D26 , D27) ) ) = ( Seg R4 ) by FINSEQ_2:124;
thus L133: (R1 <> R4 implies ( ( Line (D23 , R1) ) "*" C5 ) = ( ( R10 * ( C5 /. R1 ) ) + ( C5 /. ( R1 + 1 ) ) ))
proof
L134:
now
let R2 being Nat;
assume that
L135: R2 in ( Seg R4 )
and
L136: (R2 <> R1 & R2 <> ( R1 + 1 ));
L137: [ R1 , R2 ] in ( Indices D23 ) by L125 , L128 , L135 , ZFMISC_1:87;
L138: ( 0. R8 ) = ( D23 * (R1 , R2) ) by L137 , L136 , L7
.= ( D26 . R2 ) by L126 , L135 , MATRIX_1:def 7;
L139: ( D27 . R2 ) = ( D27 /. R2 ) by L130 , L135 , PARTFUN1:def 6;
thus L140: ( ( mlt (D26 , D27) ) . R2 ) = ( ( 0. R8 ) * ( D27 /. R2 ) ) by L139 , L135 , L138 , FVSUM_1:61
.= ( 0. R8 ) by VECTSP_1:6;
end;
L141: [ R1 , R1 ] in ( Indices D23 ) by L125 , L128 , ZFMISC_1:87;
assume L142: R1 <> R4;
L143: R1 <= R4 by L125 , FINSEQ_1:1;
L144: R1 < R4 by L143 , L142 , XXREAL_0:1;
L145: (1 <= ( R1 + 1 ) & ( R1 + 1 ) <= R4) by L144 , NAT_1:11 , NAT_1:13;
L146: ( R1 + 1 ) in ( Seg R4 ) by L145;
L147: [ R1 , ( R1 + 1 ) ] in ( Indices D23 ) by L146 , L125 , L128 , ZFMISC_1:87;
L148: (( D27 . R1 ) = ( D27 /. R1 ) & ( D23 * (R1 , R1) ) = ( D26 . R1 )) by L125 , L126 , L130 , MATRIX_1:def 7 , PARTFUN1:def 6;
L149: ( ( mlt (D26 , D27) ) /. R1 ) = ( ( mlt (D26 , D27) ) . R1 ) by L125 , L132 , PARTFUN1:def 6
.= ( ( D23 * (R1 , R1) ) * ( D27 /. R1 ) ) by L125 , L148 , FVSUM_1:61
.= ( R10 * ( D27 /. R1 ) ) by L141 , L7;
L150: ( R1 + 1 ) > R1 by NAT_1:13;
L151: (( D27 . ( R1 + 1 ) ) = ( D27 /. ( R1 + 1 ) ) & ( D23 * (R1 , ( R1 + 1 )) ) = ( D26 . ( R1 + 1 ) )) by L126 , L130 , L146 , MATRIX_1:def 7 , PARTFUN1:def 6;
L152: ( ( mlt (D26 , D27) ) /. ( R1 + 1 ) ) = ( ( mlt (D26 , D27) ) . ( R1 + 1 ) ) by L132 , L146 , PARTFUN1:def 6
.= ( ( D23 * (R1 , ( R1 + 1 )) ) * ( D27 /. ( R1 + 1 ) ) ) by L146 , L151 , FVSUM_1:61
.= ( ( 1_ R8 ) * ( D27 /. ( R1 + 1 ) ) ) by L147 , L7
.= ( D27 /. ( R1 + 1 ) ) by VECTSP_1:def 4;
thus L153: thesis by L152 , L125 , L132 , L146 , L150 , L149 , L134 , MATRIX15:7;
end;

assume L154: R1 = R4;
L155:
now
let R2 being Nat;
assume that
L156: R2 in ( Seg R4 )
and
L157: R2 <> R1;
L158: ( D27 . R2 ) = ( D27 /. R2 ) by L130 , L156 , PARTFUN1:def 6;
L159: R2 <= R4 by L156 , FINSEQ_1:1;
L160: R2 < ( R1 + 1 ) by L159 , L154 , NAT_1:13;
L161: [ R1 , R2 ] in ( Indices D23 ) by L125 , L128 , L156 , ZFMISC_1:87;
L162: ( ( Line (D23 , R1) ) . R2 ) = ( D23 * (R1 , R2) ) by L126 , L156 , MATRIX_1:def 7
.= ( 0. R8 ) by L157 , L160 , L161 , L7;
thus L163: ( ( mlt (( Line (D23 , R1) ) , D27) ) . R2 ) = ( ( 0. R8 ) * ( D27 /. R2 ) ) by L162 , L132 , L156 , L158 , FVSUM_1:61
.= ( 0. R8 ) by VECTSP_1:6;
end;
thus L164: ( ( Line (D23 , R1) ) "*" C5 ) = ( ( mlt (( Line (D23 , R1) ) , D27) ) . R1 ) by L155 , L125 , L132 , MATRIX_3:12
.= ( ( D23 * (R1 , R1) ) * ( D27 /. R1 ) ) by L125 , L132 , L127 , L131 , FVSUM_1:61
.= ( R10 * ( C5 /. R1 ) ) by L129 , L7;
end;
theorem
L165: (for R1 being Nat holds (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (for B5 being (Element of ( R4 -tuples_on (the carrier of R8) )) holds (R1 in ( Seg R4 ) implies ((R1 = 1 implies ( ( Col (( Jordan_block (R10 , R4) ) , R1) ) "*" B5 ) = ( R10 * ( B5 /. R1 ) )) & (R1 <> 1 implies ( ( Col (( Jordan_block (R10 , R4) ) , R1) ) "*" B5 ) = ( ( R10 * ( B5 /. R1 ) ) + ( B5 /. ( R1 - 1 ) ) )))))))))
proof
let R1 being Nat;
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
set D28 = ( Jordan_block (R10 , R4) );
set D29 = ( Col (D28 , R1) );
reconsider D30 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
let C6 being (Element of ( R4 -tuples_on (the carrier of R8) ));
assume that
L166: R1 in ( Seg R4 );
L167: R1 >= 1 by L166 , FINSEQ_1:1;
reconsider D31 = ( R1 - 1 ) as (Element of ( NAT )) by L167 , NAT_1:21;
L168: (( len D28 ) = R4 & ( dom D28 ) = ( Seg ( len D28 ) )) by FINSEQ_1:def 3 , MATRIX_1:24;
L169: ( ( Col (D28 , R1) ) . R1 ) = ( D28 * (R1 , R1) ) by L168 , L166 , MATRIX_1:def 8;
L170: ( D31 + 1 ) >= D31 by NAT_1:11;
L171: R4 >= R1 by L166 , FINSEQ_1:1;
L172: R4 >= D31 by L171 , L170 , XXREAL_0:2;
L173: ( Indices D28 ) = [: ( Seg R4 ) , ( Seg R4 ) :] by MATRIX_1:24;
L174: [ R1 , R1 ] in ( Indices D28 ) by L173 , L166 , ZFMISC_1:87;
reconsider D32 = D29 , D33 = C6 as (Element of ( D30 -tuples_on (the carrier of R8) )) by MATRIX_1:24;
L175: ( dom D33 ) = ( Seg R4 ) by FINSEQ_2:124;
L176: ( D33 . R1 ) = ( D33 /. R1 ) by L175 , L166 , PARTFUN1:def 6;
L177: ( dom ( mlt (D32 , D33) ) ) = ( Seg R4 ) by FINSEQ_2:124;
L178: ( ( mlt (D32 , D33) ) /. R1 ) = ( ( mlt (D32 , D33) ) . R1 ) by L177 , L166 , PARTFUN1:def 6
.= ( ( D28 * (R1 , R1) ) * ( D33 /. R1 ) ) by L166 , L169 , L176 , FVSUM_1:61
.= ( R10 * ( D33 /. R1 ) ) by L174 , L7;
thus L179: (R1 = 1 implies ( ( Col (D28 , R1) ) "*" C6 ) = ( R10 * ( C6 /. R1 ) ))
proof
L180: (( ( Col (D28 , R1) ) . R1 ) = ( D28 * (R1 , R1) ) & ( D33 . R1 ) = ( D33 /. R1 )) by L166 , L168 , L175 , MATRIX_1:def 8 , PARTFUN1:def 6;
L181: [ R1 , R1 ] in ( Indices D28 ) by L166 , L173 , ZFMISC_1:87;
assume L182: R1 = 1;
L183:
now
let R2 being Nat;
assume that
L184: R2 in ( Seg R4 )
and
L185: R2 <> R1;
L186: ( D33 . R2 ) = ( D33 /. R2 ) by L175 , L184 , PARTFUN1:def 6;
L187: 1 <= R2 by L184 , FINSEQ_1:1;
L188: R1 < ( R2 + 1 ) by L187 , L182 , NAT_1:13;
L189: [ R2 , R1 ] in ( Indices D28 ) by L166 , L173 , L184 , ZFMISC_1:87;
L190: ( ( Col (D28 , R1) ) . R2 ) = ( D28 * (R2 , R1) ) by L168 , L184 , MATRIX_1:def 8
.= ( 0. R8 ) by L185 , L188 , L189 , L7;
thus L191: ( ( mlt (( Col (D28 , R1) ) , D33) ) . R2 ) = ( ( 0. R8 ) * ( D33 /. R2 ) ) by L190 , L177 , L184 , L186 , FVSUM_1:61
.= ( 0. R8 ) by VECTSP_1:6;
end;
thus L192: ( ( Col (D28 , R1) ) "*" C6 ) = ( ( mlt (( Col (D28 , R1) ) , D33) ) . R1 ) by L183 , L166 , L177 , MATRIX_3:12
.= ( ( D28 * (R1 , R1) ) * ( D33 /. R1 ) ) by L166 , L177 , L180 , FVSUM_1:61
.= ( R10 * ( C6 /. R1 ) ) by L181 , L7;
end;

L193: D31 <> R1;
assume L194: R1 <> 1;
L195: ( D31 + 1 ) > ( ( 0 ) + 1 ) by L194 , L167 , XXREAL_0:1;
L196: D31 >= 1 by L195 , NAT_1:14;
L197: D31 in ( Seg R4 ) by L196 , L172;
L198: (( D31 + 1 ) = R1 & [ D31 , R1 ] in ( Indices D28 )) by L197 , L166 , L173 , ZFMISC_1:87;
L199:
now
let R2 being Nat;
assume that
L200: R2 in ( Seg R4 )
and
L201: R2 <> R1
and
L202: R2 <> D31;
L203: ([ R2 , R1 ] in ( Indices D28 ) & ( R2 + 1 ) <> R1) by L166 , L173 , L200 , L202 , ZFMISC_1:87;
L204: ( 0. R8 ) = ( D28 * (R2 , R1) ) by L203 , L201 , L7
.= ( D32 . R2 ) by L168 , L200 , MATRIX_1:def 8;
L205: ( D33 . R2 ) = ( D33 /. R2 ) by L175 , L200 , PARTFUN1:def 6;
thus L206: ( ( mlt (D32 , D33) ) . R2 ) = ( ( 0. R8 ) * ( D33 /. R2 ) ) by L205 , L200 , L204 , FVSUM_1:61
.= ( 0. R8 ) by VECTSP_1:6;
end;
L207: ( D33 . D31 ) = ( D33 /. D31 ) by L175 , L197 , PARTFUN1:def 6;
L208: ( ( Col (D28 , R1) ) . D31 ) = ( D28 * (D31 , R1) ) by L168 , L197 , MATRIX_1:def 8;
L209: ( ( mlt (D32 , D33) ) /. D31 ) = ( ( mlt (D32 , D33) ) . D31 ) by L177 , L197 , PARTFUN1:def 6
.= ( ( D28 * (D31 , R1) ) * ( D33 /. D31 ) ) by L197 , L208 , L207 , FVSUM_1:61
.= ( ( 1_ R8 ) * ( D33 /. D31 ) ) by L198 , L7
.= ( D33 /. D31 ) by VECTSP_1:def 4;
thus L210: thesis by L209 , L166 , L177 , L197 , L193 , L178 , L199 , MATRIX15:7;
end;
theorem
L211: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (R10 <> ( 0. R8 ) implies (ex B6 being (Matrix of R4 , R8) st (( ( Jordan_block (R10 , R4) ) ~ ) = B6 & (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in ( Indices B6 ) implies ((R1 > R2 implies ( B6 * (R1 , R2) ) = ( 0. R8 )) & (R1 <= R2 implies ( B6 * (R1 , R2) ) = ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R2 -' R1 ) + 1 )) ) ))))))))))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
reconsider D34 = R4 as (Element of ( NAT )) by ORDINAL1:def 12;
defpred S2[ Nat , Nat , set ] means (($1 > $2 implies $3 = ( 0. R8 )) & ($1 <= $2 implies $3 = ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( $2 -' $1 ) + 1 )) ) )));
L212: (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in [: ( Seg D34 ) , ( Seg D34 ) :] implies (ex B7 being (Element of R8) st S2[ R1 , R2 , B7 ]))))
proof
let R1 being Nat;
let R2 being Nat;
assume that
L213: [ R1 , R2 ] in [: ( Seg D34 ) , ( Seg D34 ) :];
per cases ;
suppose L214: R1 > R2;

take ( 0. R8 );
thus L215: thesis by L214;
end;
suppose L216: R1 <= R2;

take ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R2 -' R1 ) + 1 )) ) );
thus L217: thesis by L216;
end;
end;
consider C7 being (Matrix of D34 , R8) such that L219: (for R1 being Nat holds (for R2 being Nat holds ([ R1 , R2 ] in ( Indices C7 ) implies S2[ R1 , R2 , ( C7 * (R1 , R2) ) ]))) from MATRIX_1:sch 2(L212);
set D35 = ( 1. (R8 , R4) );
set D36 = ( Jordan_block (R10 , R4) );
L220: ( Indices D35 ) = [: ( Seg R4 ) , ( Seg R4 ) :] by MATRIX_1:24;
assume L221: R10 <> ( 0. R8 );
L222: D36 is  invertible by L221 , L50;
reconsider D37 = C7 as (Matrix of R4 , R8);
set D38 = ( D37 * D36 );
L223: (( Indices D37 ) = ( Indices D36 ) & ( Indices D36 ) = ( Indices D35 )) by MATRIX_1:26;
L224: ( width D37 ) = R4 by MATRIX_1:24;
L225: (( Indices D38 ) = ( Indices D35 ) & ( len D36 ) = R4) by MATRIX_1:24 , MATRIX_1:26;
L226:
now
let R1 being Nat;
let R2 being Nat;
assume that
L227: [ R1 , R2 ] in ( Indices D35 );
L228: R1 in ( Seg R4 ) by L220 , L227 , ZFMISC_1:87;
set D39 = ( Line (D37 , R1) );
L229: ( D38 * (R1 , R2) ) = ( D39 "*" ( Col (D36 , R2) ) ) by L224 , L225 , L227 , MATRIX_3:def 4
.= ( ( Col (D36 , R2) ) "*" D39 ) by FVSUM_1:90;
L230: R2 in ( Seg R4 ) by L220 , L227 , ZFMISC_1:87;
L231: ( D39 . R2 ) = ( D37 * (R1 , R2) ) by L230 , L224 , MATRIX_1:def 7;
L232: ( dom D39 ) = ( Seg R4 ) by L224 , FINSEQ_2:124;
L233: ( D39 /. R2 ) = ( D39 . R2 ) by L232 , L230 , PARTFUN1:def 6;
L234:
now
per cases ;
suppose L235: R2 = 1;

L236: ( D38 * (R1 , R2) ) = ( R10 * ( D37 * (R1 , R2) ) ) by L235 , L224 , L230 , L233 , L231 , L229 , L165;
L237:
now
per cases ;
suppose L238: R1 = R2;

thus L239: ( D38 * (R1 , R2) ) = ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R1 -' R1 ) + 1 )) ) ) ) by L238 , L219 , L223 , L227 , L236
.= ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( 0 ) + 1 )) ) ) ) by XREAL_1:232
.= ( R10 * ( - ( - ( R10 " ) ) ) ) by GROUP_1:50
.= ( R10 * ( R10 " ) ) by RLVECT_1:17
.= ( 1_ R8 ) by L221 , VECTSP_1:def 10
.= ( D35 * (R1 , R2) ) by L227 , L238 , MATRIX_1:def 11;
end;
suppose L240: R1 <> R2;

L241: 1 <= R1 by L228 , FINSEQ_1:1;
L242: R2 < R1 by L241 , L235 , L240 , XXREAL_0:1;
thus L243: ( D38 * (R1 , R2) ) = ( R10 * ( 0. R8 ) ) by L242 , L219 , L223 , L227 , L236
.= ( 0. R8 ) by VECTSP_1:6
.= ( D35 * (R1 , R2) ) by L227 , L240 , MATRIX_1:def 11;
end;
end;
thus L245: ( D35 * (R1 , R2) ) = ( D38 * (R1 , R2) ) by L237;
end;
suppose L246: R2 <> 1;

L247: R2 >= 1 by L230 , FINSEQ_1:1;
reconsider D40 = ( R2 - 1 ) as (Element of ( NAT )) by L247 , NAT_1:21;
L248: (D40 <= ( D40 + 1 ) & R2 <= R4) by L230 , FINSEQ_1:1 , NAT_1:11;
L249: R4 >= D40 by L248 , XXREAL_0:2;
L250: ( D40 + 1 ) > ( ( 0 ) + 1 ) by L246 , L247 , XXREAL_0:1;
L251: D40 >= 1 by L250 , NAT_1:14;
L252: D40 in ( Seg R4 ) by L251 , L249;
L253: [ R1 , D40 ] in ( Indices D35 ) by L252 , L220 , L228 , ZFMISC_1:87;
L254: (( D39 /. D40 ) = ( D39 . D40 ) & ( D39 . D40 ) = ( D37 * (R1 , D40) )) by L224 , L232 , L252 , MATRIX_1:def 7 , PARTFUN1:def 6;
L255: ( D38 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( D37 * (R1 , D40) ) ) by L254 , L224 , L230 , L233 , L231 , L229 , L246 , L165;
L256:
now
per cases  by XXREAL_0:1;
suppose L257: R1 < ( D40 + 1 );

set D41 = ( ( power R8 ) . (( - ( R10 " ) ) , ( ( D40 -' R1 ) + 1 )) );
L258: ( R2 -' R1 ) = ( R2 - R1 ) by L257 , XREAL_1:233;
L259: R1 <= D40 by L257 , NAT_1:13;
L260: ( D40 -' R1 ) = ( D40 - R1 ) by L259 , XREAL_1:233;
thus L261: ( D38 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( - D41 ) ) by L219 , L223 , L253 , L255 , L259
.= ( ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R2 -' R1 ) + 1 )) ) ) ) + ( - D41 ) ) by L219 , L223 , L227 , L257
.= ( ( R10 * ( - ( ( - ( R10 " ) ) * D41 ) ) ) + ( - D41 ) ) by L260 , L258 , GROUP_1:def 7
.= ( ( R10 * ( ( - ( - ( R10 " ) ) ) * D41 ) ) + ( - D41 ) ) by VECTSP_1:9
.= ( ( R10 * ( ( R10 " ) * D41 ) ) + ( - D41 ) ) by RLVECT_1:17
.= ( ( ( R10 * ( R10 " ) ) * D41 ) + ( - D41 ) ) by GROUP_1:def 3
.= ( ( ( 1_ R8 ) * D41 ) + ( - D41 ) ) by L221 , VECTSP_1:def 10
.= ( D41 + ( - D41 ) ) by VECTSP_1:def 6
.= ( 0. R8 ) by RLVECT_1:def 10
.= ( D35 * (R1 , R2) ) by L227 , L257 , MATRIX_1:def 11;
end;
suppose L262: R1 = ( D40 + 1 );

L263: R1 > D40 by L262 , NAT_1:13;
thus L264: ( D38 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( 0. R8 ) ) by L263 , L219 , L223 , L253 , L255
.= ( R10 * ( D37 * (R1 , R2) ) ) by RLVECT_1:def 4
.= ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R1 -' R1 ) + 1 )) ) ) ) by L219 , L223 , L227 , L262
.= ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( 0 ) + 1 )) ) ) ) by XREAL_1:232
.= ( R10 * ( - ( - ( R10 " ) ) ) ) by GROUP_1:50
.= ( R10 * ( R10 " ) ) by RLVECT_1:17
.= ( 1_ R8 ) by L221 , VECTSP_1:def 10
.= ( D35 * (R1 , R2) ) by L227 , L262 , MATRIX_1:def 11;
end;
suppose L265: R1 > ( D40 + 1 );

L266: R1 > D40 by L265 , NAT_1:13;
thus L267: ( D38 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( 0. R8 ) ) by L266 , L219 , L223 , L253 , L255
.= ( R10 * ( D37 * (R1 , R2) ) ) by RLVECT_1:def 4
.= ( R10 * ( 0. R8 ) ) by L219 , L223 , L227 , L265
.= ( 0. R8 ) by VECTSP_1:6
.= ( D35 * (R1 , R2) ) by L227 , L265 , MATRIX_1:def 11;
end;
end;
thus L269: ( D38 * (R1 , R2) ) = ( D35 * (R1 , R2) ) by L256;
end;
end;
thus L271: ( D35 * (R1 , R2) ) = ( D38 * (R1 , R2) ) by L234;
end;
L272: D35 = D38 by L226 , MATRIX_1:27;
set D42 = ( D36 * D37 );
L273: ( len D37 ) = R4 by MATRIX_1:24;
take D37;
L274: (( Indices D42 ) = ( Indices D35 ) & ( width D36 ) = R4) by MATRIX_1:24 , MATRIX_1:26;
L275:
now
let R1 being Nat;
let R2 being Nat;
assume that
L276: [ R1 , R2 ] in ( Indices D35 );
L277: R1 in ( Seg R4 ) by L220 , L276 , ZFMISC_1:87;
set D43 = ( R1 + 1 );
L278: R2 in ( Seg R4 ) by L220 , L276 , ZFMISC_1:87;
L279: ( D42 * (R1 , R2) ) = ( ( Line (D36 , R1) ) "*" ( Col (D37 , R2) ) ) by L273 , L274 , L276 , MATRIX_3:def 4;
set D44 = ( Col (D37 , R2) );
L280: ( dom D37 ) = ( Seg R4 ) by L273 , FINSEQ_1:def 3;
L281: ( D44 . R1 ) = ( D37 * (R1 , R2) ) by L280 , L277 , MATRIX_1:def 8;
L282: ( dom D44 ) = ( Seg R4 ) by L273 , FINSEQ_2:124;
L283: ( D44 /. R1 ) = ( D44 . R1 ) by L282 , L277 , PARTFUN1:def 6;
L284:
now
per cases ;
suppose L285: R1 = R4;

L286: ( D42 * (R1 , R2) ) = ( R10 * ( D37 * (R1 , R2) ) ) by L285 , L273 , L277 , L283 , L281 , L279 , L124;
L287:
now
per cases ;
suppose L288: R1 > R2;

thus L289: ( D42 * (R1 , R2) ) = ( R10 * ( 0. R8 ) ) by L288 , L219 , L223 , L276 , L286
.= ( 0. R8 ) by VECTSP_1:6
.= ( D35 * (R1 , R2) ) by L276 , L288 , MATRIX_1:def 11;
end;
suppose L290: R1 <= R2;

L291: R2 <= R4 by L278 , FINSEQ_1:1;
L292: R2 = R4 by L291 , L285 , L290 , XXREAL_0:1;
thus L293: ( D42 * (R1 , R2) ) = ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R4 -' R4 ) + 1 )) ) ) ) by L292 , L219 , L223 , L276 , L285 , L286
.= ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( 0 ) + 1 )) ) ) ) by XREAL_1:232
.= ( R10 * ( - ( - ( R10 " ) ) ) ) by GROUP_1:50
.= ( R10 * ( R10 " ) ) by RLVECT_1:17
.= ( 1_ R8 ) by L221 , VECTSP_1:def 10
.= ( D35 * (R1 , R2) ) by L276 , L285 , L292 , MATRIX_1:def 11;
end;
end;
thus L295: ( D42 * (R1 , R2) ) = ( D35 * (R1 , R2) ) by L287;
end;
suppose L296: R1 <> R4;

L297: R1 <= R4 by L277 , FINSEQ_1:1;
L298: R1 < R4 by L297 , L296 , XXREAL_0:1;
L299: (1 <= D43 & D43 <= R4) by L298 , NAT_1:11 , NAT_1:13;
L300: D43 in ( Seg R4 ) by L299;
L301: [ D43 , R2 ] in ( Indices D37 ) by L300 , L223 , L220 , L278 , ZFMISC_1:87;
L302: (( D44 /. D43 ) = ( D44 . D43 ) & ( D44 . D43 ) = ( D37 * (D43 , R2) )) by L280 , L282 , L300 , MATRIX_1:def 8 , PARTFUN1:def 6;
L303: ( D42 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( D37 * (D43 , R2) ) ) by L302 , L273 , L277 , L283 , L281 , L279 , L296 , L124;
L304:
now
per cases  by XXREAL_0:1;
suppose L305: R1 > R2;

L306: D43 > R2 by L305 , NAT_1:13;
thus L307: ( D42 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( 0. R8 ) ) by L306 , L219 , L301 , L303
.= ( R10 * ( D37 * (R1 , R2) ) ) by RLVECT_1:def 4
.= ( R10 * ( 0. R8 ) ) by L219 , L223 , L276 , L305
.= ( 0. R8 ) by VECTSP_1:6
.= ( D35 * (R1 , R2) ) by L276 , L305 , MATRIX_1:def 11;
end;
suppose L308: R1 = R2;

L309: D43 > R2 by L308 , NAT_1:13;
thus L310: ( D42 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( 0. R8 ) ) by L309 , L219 , L301 , L303
.= ( R10 * ( D37 * (R1 , R1) ) ) by L308 , RLVECT_1:def 4
.= ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R1 -' R1 ) + 1 )) ) ) ) by L219 , L223 , L276 , L308
.= ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( 0 ) + 1 )) ) ) ) by XREAL_1:232
.= ( R10 * ( - ( - ( R10 " ) ) ) ) by GROUP_1:50
.= ( R10 * ( R10 " ) ) by RLVECT_1:17
.= ( 1_ R8 ) by L221 , VECTSP_1:def 10
.= ( D35 * (R1 , R2) ) by L276 , L308 , MATRIX_1:def 11;
end;
suppose L311: R1 < R2;

set D45 = ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R2 -' D43 ) + 1 )) );
L312: ( R2 -' R1 ) = ( R2 - R1 ) by L311 , XREAL_1:233;
L313: D43 <= R2 by L311 , NAT_1:13;
L314: ( R2 -' D43 ) = ( R2 - D43 ) by L313 , XREAL_1:233;
thus L315: ( D42 * (R1 , R2) ) = ( ( R10 * ( D37 * (R1 , R2) ) ) + ( - D45 ) ) by L219 , L301 , L303 , L313
.= ( ( R10 * ( - ( ( power R8 ) . (( - ( R10 " ) ) , ( ( R2 -' R1 ) + 1 )) ) ) ) + ( - D45 ) ) by L219 , L223 , L276 , L311
.= ( ( R10 * ( - ( ( - ( R10 " ) ) * D45 ) ) ) + ( - D45 ) ) by L314 , L312 , GROUP_1:def 7
.= ( ( R10 * ( ( - ( - ( R10 " ) ) ) * D45 ) ) + ( - D45 ) ) by VECTSP_1:9
.= ( ( R10 * ( ( R10 " ) * D45 ) ) + ( - D45 ) ) by RLVECT_1:17
.= ( ( ( R10 * ( R10 " ) ) * D45 ) + ( - D45 ) ) by GROUP_1:def 3
.= ( ( ( 1_ R8 ) * D45 ) + ( - D45 ) ) by L221 , VECTSP_1:def 10
.= ( D45 + ( - D45 ) ) by VECTSP_1:def 6
.= ( 0. R8 ) by RLVECT_1:def 10
.= ( D35 * (R1 , R2) ) by L276 , L311 , MATRIX_1:def 11;
end;
end;
thus L317: ( D35 * (R1 , R2) ) = ( D42 * (R1 , R2) ) by L304;
end;
end;
thus L319: ( D35 * (R1 , R2) ) = ( D42 * (R1 , R2) ) by L284;
end;
L320: D35 = D42 by L275 , MATRIX_1:27;
L321: D37 is_reverse_of D36 by L320 , L272 , MATRIX_6:def 2;
thus L322: thesis by L321 , L219 , L222 , MATRIX_6:def 4;
end;
theorem
L323: (for R4 being Nat holds (for R8 being Field holds (for R9 being (Element of R8) holds (for R10 being (Element of R8) holds ( ( Jordan_block (R10 , R4) ) + ( R9 * ( 1. (R8 , R4) ) ) ) = ( Jordan_block (( R10 + R9 ) , R4) )))))
proof
let R4 being Nat;
let R8 being Field;
let R9 being (Element of R8);
let R10 being (Element of R8);
set D46 = ( Jordan_block (R10 , R4) );
set D47 = ( Jordan_block (( R10 + R9 ) , R4) );
set D48 = ( 1. (R8 , R4) );
L324:
now
L325: ( Indices D46 ) = ( Indices D47 ) by MATRIX_1:26;
let R1 being Nat;
let R2 being Nat;
assume that
L326: [ R1 , R2 ] in ( Indices D47 );
L327: ( Indices D46 ) = ( Indices D48 ) by MATRIX_1:26;
L328:
now
per cases ;
suppose L329: R1 = R2;

thus L330: ( D47 * (R1 , R2) ) = ( R10 + R9 ) by L329 , L326 , L7
.= ( ( D46 * (R1 , R2) ) + R9 ) by L326 , L325 , L329 , L7
.= ( ( D46 * (R1 , R2) ) + ( R9 * ( 1_ R8 ) ) ) by VECTSP_1:def 6
.= ( ( D46 * (R1 , R2) ) + ( R9 * ( D48 * (R1 , R2) ) ) ) by L326 , L325 , L327 , L329 , MATRIX_1:def 11
.= ( ( D46 * (R1 , R2) ) + ( ( R9 * D48 ) * (R1 , R2) ) ) by L326 , L325 , L327 , MATRIX_3:def 5
.= ( ( D46 + ( R9 * D48 ) ) * (R1 , R2) ) by L326 , L325 , MATRIX_3:def 3;
end;
suppose L331: ( R1 + 1 ) = R2;

L332: R1 <> R2 by L331;
thus L333: ( D47 * (R1 , R2) ) = ( 1_ R8 ) by L326 , L331 , L7
.= ( ( 1_ R8 ) + ( 0. R8 ) ) by RLVECT_1:def 4
.= ( ( D46 * (R1 , R2) ) + ( 0. R8 ) ) by L326 , L325 , L331 , L7
.= ( ( D46 * (R1 , R2) ) + ( R9 * ( 0. R8 ) ) ) by VECTSP_1:6
.= ( ( D46 * (R1 , R2) ) + ( R9 * ( D48 * (R1 , R2) ) ) ) by L326 , L325 , L327 , L332 , MATRIX_1:def 11
.= ( ( D46 * (R1 , R2) ) + ( ( R9 * D48 ) * (R1 , R2) ) ) by L326 , L325 , L327 , MATRIX_3:def 5
.= ( ( D46 + ( R9 * D48 ) ) * (R1 , R2) ) by L326 , L325 , MATRIX_3:def 3;
end;
suppose L334: (R1 <> R2 & ( R1 + 1 ) <> R2);

thus L335: ( D47 * (R1 , R2) ) = ( 0. R8 ) by L334 , L326 , L7
.= ( ( 0. R8 ) + ( 0. R8 ) ) by RLVECT_1:def 4
.= ( ( D46 * (R1 , R2) ) + ( 0. R8 ) ) by L326 , L325 , L334 , L7
.= ( ( D46 * (R1 , R2) ) + ( R9 * ( 0. R8 ) ) ) by VECTSP_1:6
.= ( ( D46 * (R1 , R2) ) + ( R9 * ( D48 * (R1 , R2) ) ) ) by L326 , L325 , L327 , L334 , MATRIX_1:def 11
.= ( ( D46 * (R1 , R2) ) + ( ( R9 * D48 ) * (R1 , R2) ) ) by L326 , L325 , L327 , MATRIX_3:def 5
.= ( ( D46 + ( R9 * D48 ) ) * (R1 , R2) ) by L326 , L325 , MATRIX_3:def 3;
end;
end;
thus L337: ( D47 * (R1 , R2) ) = ( ( D46 + ( R9 * D48 ) ) * (R1 , R2) ) by L328;
end;
thus L338: thesis by L324 , MATRIX_1:27;
end;
begin
definition
let R8 being Field;
let C8 being (FinSequence of ( ( (the carrier of R8) * ) * ));
attr C8 is  Jordan-block-yielding
means
:L339: (for R1 being Nat holds (R1 in ( dom C8 ) implies (ex R10 being (Element of R8) st (ex R4 being Nat st ( C8 . R1 ) = ( Jordan_block (R10 , R4) )))));
end;
registration
let R8 being Field;
cluster  Jordan-block-yielding for (FinSequence of ( ( (the carrier of R8) * ) * ));
existence
proof
reconsider D49 = ( <*> ( ( (the carrier of R8) * ) * ) ) as (FinSequence of ( ( (the carrier of R8) * ) * ));
take D49;
L341: (for R1 being Nat holds (R1 in ( dom D49 ) implies (ex R10 being (Element of R8) st (ex R4 being Nat st ( D49 . R1 ) = ( Jordan_block (R10 , R4) )))));
thus L342: thesis by L341 , L339;
end;
end;
registration
let R8 being Field;
cluster  Jordan-block-yielding ->  Square-Matrix-yielding for (FinSequence of ( ( (the carrier of R8) * ) * ));
coherence
proof
let C9 being (FinSequence of ( ( (the carrier of R8) * ) * ));
assume that
L344: C9 is  Jordan-block-yielding;
let R1 being Nat;
assume L345: R1 in ( dom C9 );
L346: (ex R10 being (Element of R8) st (ex R4 being Nat st ( C9 . R1 ) = ( Jordan_block (R10 , R4) ))) by L345 , L344 , L339;
thus L347: thesis by L346;
end;
end;
definition
let R8 being Field;
mode FinSequence_of_Jordan_block of R8
 is  Jordan-block-yielding (FinSequence of ( ( (the carrier of R8) * ) * ));
end;
L350: (for R8 being Field holds ( {} ) is (FinSequence_of_Jordan_block of R8))
proof
let R8 being Field;
reconsider D50 = ( <*> ( ( (the carrier of R8) * ) * ) ) as (FinSequence of ( ( (the carrier of R8) * ) * ));
L351: (for R1 being Nat holds (R1 in ( dom D50 ) implies (ex R10 being (Element of R8) st (ex R4 being Nat st ( D50 . R1 ) = ( Jordan_block (R10 , R4) )))));
thus L352: thesis by L351 , L339;
end;
definition
let R8 being Field;
let R10 being (Element of R8);
mode FinSequence_of_Jordan_block of R10 , R8
 -> (FinSequence_of_Jordan_block of R8)
means :L353: (for R1 being Nat holds (R1 in ( dom it ) implies (ex R4 being Nat st ( it . R1 ) = ( Jordan_block (R10 , R4) ))));
existence
proof
reconsider D51 = ( <*> ( {} ) ) as (FinSequence_of_Jordan_block of R8) by L350;
take D51;
thus L354: thesis;
end;
end;
theorem
L356: (for R8 being Field holds (for R10 being (Element of R8) holds ( {} ) is (FinSequence_of_Jordan_block of R10 , R8)))
proof
let R8 being Field;
let R10 being (Element of R8);
reconsider D52 = ( <*> ( {} ) ) as (FinSequence_of_Jordan_block of R8) by L350;
L357: (for R1 being Nat holds (R1 in ( dom D52 ) implies (ex R4 being Nat st ( D52 . R1 ) = ( Jordan_block (R10 , R4) ))));
thus L358: thesis by L357 , L353;
end;
theorem
L359: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds <* ( Jordan_block (R10 , R4) ) *> is (FinSequence_of_Jordan_block of R10 , R8))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
L360:
now
L361: ( dom <* ( Jordan_block (R10 , R4) ) *> ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:def 8;
let R1 being Nat;
assume L362: R1 in ( dom <* ( Jordan_block (R10 , R4) ) *> );
L363: (( <* ( Jordan_block (R10 , R4) ) *> . 1 ) = ( Jordan_block (R10 , R4) ) & R1 = 1) by L362 , L361 , FINSEQ_1:def 8 , TARSKI:def 1;
thus L364: (ex R9 being (Element of R8) st (ex R5 being Nat st ( <* ( Jordan_block (R10 , R4) ) *> . R1 ) = ( Jordan_block (R9 , R5) ))) by L363;
end;
reconsider D53 = <* ( Jordan_block (R10 , R4) ) *> as (FinSequence_of_Jordan_block of R8) by L360 , L339;
L365:
now
L366: ( dom D53 ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:def 8;
let R1 being Nat;
assume L367: R1 in ( dom D53 );
L368: (( D53 . 1 ) = ( Jordan_block (R10 , R4) ) & R1 = 1) by L367 , L366 , FINSEQ_1:def 8 , TARSKI:def 1;
thus L369: (ex R4 being Nat st ( D53 . R1 ) = ( Jordan_block (R10 , R4) )) by L368;
end;
thus L370: thesis by L365 , L353;
end;
registration
let R8 being Field;
let R10 being (Element of R8);
cluster  non-empty for (FinSequence_of_Jordan_block of R10 , R8);
existence
proof
reconsider D54 = <* ( Jordan_block (R10 , 1) ) *> as (FinSequence_of_Jordan_block of R10 , R8) by L359;
take D54;
L371:
now
L372: ( dom D54 ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:def 8;
let R6 being set;
assume L373: R6 in ( dom D54 );
L374: (( D54 . 1 ) = ( Jordan_block (R10 , 1) ) & R6 = 1) by L373 , L372 , FINSEQ_1:def 8 , TARSKI:def 1;
thus L375: ( D54 . R6 ) is non  empty by L374 , L7;
end;
thus L376: thesis by L371 , FUNCT_1:def 9;
end;
end;
registration
let R8 being Field;
cluster  non-empty for (FinSequence_of_Jordan_block of R8);
existence
proof
set D55 = the  non-empty (FinSequence_of_Jordan_block of ( 1_ R8 ) , R8);
take D55;
thus L378: thesis;
end;
end;
theorem
L380: (for R8 being Field holds (for R9 being (Element of R8) holds (for R10 being (Element of R8) holds (for B8 being (FinSequence_of_Jordan_block of R10 , R8) holds ( B8 (+) ( mlt (( ( len B8 ) |-> R9 ) , ( 1. (R8 , ( Len B8 )) )) ) ) is (FinSequence_of_Jordan_block of ( R10 + R9 ) , R8)))))
proof
let R8 being Field;
let R9 being (Element of R8);
let R10 being (Element of R8);
let C10 being (FinSequence_of_Jordan_block of R10 , R8);
set D56 = ( mlt (( ( len C10 ) |-> R9 ) , ( 1. (R8 , ( Len C10 )) )) );
L381: (for R1 being Nat holds (R1 in ( dom ( C10 (+) D56 ) ) implies (ex R4 being Nat st ( ( C10 (+) D56 ) . R1 ) = ( Jordan_block (( R10 + R9 ) , R4) ))))
proof
L382: ( dom D56 ) = ( dom ( 1. (R8 , ( Len C10 )) ) ) by MATRIXJ1:def 9;
L383: ( dom C10 ) = ( Seg ( len C10 ) ) by FINSEQ_1:def 3;
L384: ( dom ( 1. (R8 , ( Len C10 )) ) ) = ( dom ( Len C10 ) ) by MATRIXJ1:def 8;
let R1 being Nat;
assume that
L385: R1 in ( dom ( C10 (+) D56 ) );
L386: R1 in ( dom C10 ) by L385 , MATRIXJ1:def 10;
consider R4 being Nat such that L387: ( C10 . R1 ) = ( Jordan_block (R10 , R4) ) by L386 , L353;
take R4;
L388: ( len ( C10 . R1 ) ) = R4 by L387 , MATRIX_1:24;
L389: ( dom ( Len C10 ) ) = ( dom C10 ) by MATRIXJ1:def 3;
L390: ( ( Len C10 ) . R1 ) = ( len ( C10 . R1 ) ) by L389 , L386 , MATRIXJ1:def 3;
L391: ( len ( ( len C10 ) |-> R9 ) ) = ( len C10 ) by CARD_1:def 7;
L392: ( dom ( ( len C10 ) |-> R9 ) ) = ( dom C10 ) by L391 , FINSEQ_3:29;
L393: ( ( ( len C10 ) |-> R9 ) /. R1 ) = ( ( ( len C10 ) |-> R9 ) . R1 ) by L392 , L386 , PARTFUN1:def 6
.= R9 by L386 , L383 , FINSEQ_2:57;
L394: ( D56 . R1 ) = ( R9 * ( ( 1. (R8 , ( Len C10 )) ) . R1 ) ) by L393 , L386 , L382 , L384 , L389 , MATRIXJ1:def 9
.= ( R9 * ( 1. (R8 , R4) ) ) by L386 , L384 , L389 , L390 , L388 , MATRIXJ1:def 8;
thus L395: ( ( C10 (+) D56 ) . R1 ) = ( ( Jordan_block (R10 , R4) ) + ( R9 * ( 1. (R8 , R4) ) ) ) by L394 , L385 , L387 , MATRIXJ1:def 10
.= ( Jordan_block (( R10 + R9 ) , R4) ) by L323;
end;
L396: ( C10 (+) D56 ) is  Jordan-block-yielding
proof
let R1 being Nat;
assume L397: R1 in ( dom ( C10 (+) D56 ) );
L398: (ex R4 being Nat st ( ( C10 (+) D56 ) . R1 ) = ( Jordan_block (( R10 + R9 ) , R4) )) by L397 , L381;
thus L399: thesis by L398;
end;
reconsider D57 = ( C10 (+) D56 ) as (FinSequence_of_Jordan_block of R8) by L396;
L400: D57 is (FinSequence_of_Jordan_block of ( R10 + R9 ) , R8)
proof
let R1 being Nat;
assume L401: R1 in ( dom D57 );
thus L402: thesis by L401 , L381;
end;
thus L403: thesis by L400;
end;
definition
let R8 being Field;
let C11 , C12 being (FinSequence_of_Jordan_block of R8);
redefine func C11 ^ C12 -> (FinSequence_of_Jordan_block of R8);

coherence
proof
L404: ( C11 ^ C12 ) is  Jordan-block-yielding
proof
let R1 being Nat;
assume that
L405: R1 in ( dom ( C11 ^ C12 ) );
per cases  by L405 , FINSEQ_1:25;
suppose L406: R1 in ( dom C11 );

L407: ( ( C11 ^ C12 ) . R1 ) = ( C11 . R1 ) by L406 , FINSEQ_1:def 7;
thus L408: thesis by L407 , L406 , L339;
end;
suppose L409: (ex R4 being Nat st (R4 in ( dom C12 ) & R1 = ( ( len C11 ) + R4 )));

consider R5 being Nat such that L410: R5 in ( dom C12 ) and L411: R1 = ( ( len C11 ) + R5 ) by L409;
L412: ( ( C11 ^ C12 ) . R1 ) = ( C12 . R5 ) by L410 , L411 , FINSEQ_1:def 7;
thus L413: thesis by L412 , L410 , L339;
end;
end;
thus L415: thesis by L404;
end;
end;
definition
let R8 being Field;
let R4 being Nat;
let C13 being (FinSequence_of_Jordan_block of R8);
redefine func C13 | R4 -> (FinSequence_of_Jordan_block of R8);

coherence
proof
L417:
now
let R1 being Nat;
assume L418: R1 in ( dom ( C13 | R4 ) );
L419: (R1 in ( dom C13 ) & ( ( C13 | R4 ) . R1 ) = ( C13 . R1 )) by L418 , FUNCT_1:47 , RELAT_1:57;
thus L420: (ex R10 being (Element of R8) st (ex R5 being Nat st ( ( C13 | R4 ) . R1 ) = ( Jordan_block (R10 , R5) ))) by L419 , L339;
end;
thus L421: thesis by L417 , L339;
end;
redefine func C13 /^ R4 -> (FinSequence_of_Jordan_block of R8);

coherence
proof
L422:
now
let R1 being Nat;
assume that
L423: R1 in ( dom ( C13 /^ R4 ) );
L424: ( R1 + R4 ) in ( dom C13 ) by L423 , FINSEQ_5:26;
L425: (( C13 . ( R4 + R1 ) ) = ( C13 /. ( R4 + R1 ) ) & (ex R10 being (Element of R8) st (ex R5 being Nat st ( C13 . ( R4 + R1 ) ) = ( Jordan_block (R10 , R5) )))) by L424 , L339 , PARTFUN1:def 6;
L426: ( ( C13 /^ R4 ) . R1 ) = ( ( C13 /^ R4 ) /. R1 ) by L423 , PARTFUN1:def 6;
thus L427: (ex R10 being (Element of R8) st (ex R5 being Nat st ( ( C13 /^ R4 ) . R1 ) = ( Jordan_block (R10 , R5) ))) by L426 , L423 , L425 , FINSEQ_5:27;
end;
thus L428: thesis by L422 , L339;
end;
end;
definition
let R8 being Field;
let R10 being (Element of R8);
let C14 , C15 being (FinSequence_of_Jordan_block of R10 , R8);
redefine func C14 ^ C15 -> (FinSequence_of_Jordan_block of R10 , R8);

coherence
proof
L430: ( C14 ^ C15 ) is (FinSequence_of_Jordan_block of R10 , R8)
proof
let R1 being Nat;
assume that
L431: R1 in ( dom ( C14 ^ C15 ) );
per cases  by L431 , FINSEQ_1:25;
suppose L432: R1 in ( dom C14 );

L433: ( ( C14 ^ C15 ) . R1 ) = ( C14 . R1 ) by L432 , FINSEQ_1:def 7;
thus L434: thesis by L433 , L432 , L353;
end;
suppose L435: (ex R4 being Nat st (R4 in ( dom C15 ) & R1 = ( ( len C14 ) + R4 )));

consider R5 being Nat such that L436: R5 in ( dom C15 ) and L437: R1 = ( ( len C14 ) + R5 ) by L435;
L438: ( ( C14 ^ C15 ) . R1 ) = ( C15 . R5 ) by L436 , L437 , FINSEQ_1:def 7;
thus L439: thesis by L438 , L436 , L353;
end;
end;
thus L441: thesis by L430;
end;
end;
definition
let R8 being Field;
let R10 being (Element of R8);
let R4 being Nat;
let C16 being (FinSequence_of_Jordan_block of R10 , R8);
redefine func C16 | R4 -> (FinSequence_of_Jordan_block of R10 , R8);

coherence
proof
L443:
now
let R1 being Nat;
assume L444: R1 in ( dom ( C16 | R4 ) );
L445: (R1 in ( dom C16 ) & ( ( C16 | R4 ) . R1 ) = ( C16 . R1 )) by L444 , FUNCT_1:47 , RELAT_1:57;
thus L446: (ex R5 being Nat st ( ( C16 | R4 ) . R1 ) = ( Jordan_block (R10 , R5) )) by L445 , L353;
end;
thus L447: thesis by L443 , L353;
end;
redefine func C16 /^ R4 -> (FinSequence_of_Jordan_block of R10 , R8);

coherence
proof
L448:
now
let R1 being Nat;
assume that
L449: R1 in ( dom ( C16 /^ R4 ) );
L450: ( R1 + R4 ) in ( dom C16 ) by L449 , FINSEQ_5:26;
L451: (( C16 . ( R4 + R1 ) ) = ( C16 /. ( R4 + R1 ) ) & (ex R5 being Nat st ( C16 . ( R4 + R1 ) ) = ( Jordan_block (R10 , R5) ))) by L450 , L353 , PARTFUN1:def 6;
L452: ( ( C16 /^ R4 ) . R1 ) = ( ( C16 /^ R4 ) /. R1 ) by L449 , PARTFUN1:def 6;
thus L453: (ex R5 being Nat st ( ( C16 /^ R4 ) . R1 ) = ( Jordan_block (R10 , R5) )) by L452 , L449 , L451 , FINSEQ_5:27;
end;
thus L454: thesis by L448 , L353;
end;
end;
begin
definition
let C17 being doubleLoopStr;
let C18 being non  empty VectSpStr over C17;
let C19 being (Function of C18 , C18);
attr C19 is  nilpotent
means
:L456: (ex R4 being Nat st (for B9 being (Vector of C18) holds ( ( C19 |^ R4 ) . B9 ) = ( 0. C18 )));
end;
theorem
L458: (for B10 being doubleLoopStr holds (for B11 being non  empty VectSpStr over B10 holds (for B12 being (Function of B11 , B11) holds (B12 is  nilpotent iff (ex R4 being Nat st ( B12 |^ R4 ) = ( ZeroMap (B11 , B11) ))))))
proof
let C20 being doubleLoopStr;
let C21 being non  empty VectSpStr over C20;
let C22 being (Function of C21 , C21);
thus L459:now
assume L460: C22 is  nilpotent;
consider R4 being Nat such that L461: (for B13 being (Vector of C21) holds ( ( C22 |^ R4 ) . B13 ) = ( 0. C21 )) by L460 , L456;
L462:
now
let R6 being set;
assume L463: R6 in ( dom ( C22 |^ R4 ) );
reconsider D58 = R6 as (Vector of C21) by L463 , FUNCT_2:def 1;
thus L464: ( ( C22 |^ R4 ) . R6 ) = ( ( C22 |^ R4 ) . D58 )
.= ( 0. C21 ) by L461;
end;
L465: ( C22 |^ R4 ) = ( ( dom ( C22 |^ R4 ) ) --> ( 0. C21 ) ) by L462 , FUNCOP_1:11
.= ( (the carrier of C21) --> ( 0. C21 ) ) by FUNCT_2:def 1
.= ( ZeroMap (C21 , C21) ) by GRCAT_1:def 7;
thus L466: (ex R4 being Nat st ( C22 |^ R4 ) = ( ZeroMap (C21 , C21) )) by L465;
end;
given R4 being Nat such that
L467: ( C22 |^ R4 ) = ( ZeroMap (C21 , C21) );

take R4;
let C23 being (Vector of C21);
thus L468: ( ( C22 |^ R4 ) . C23 ) = ( ( (the carrier of C21) --> ( 0. C21 ) ) . C23 ) by L467 , GRCAT_1:def 7
.= ( 0. C21 ) by FUNCOP_1:7;
end;
registration
let C24 being doubleLoopStr;
let C25 being non  empty VectSpStr over C24;
cluster  nilpotent for (Function of C25 , C25);
existence
proof
take D59 = ( ZeroMap (C25 , C25) );
L469: ( D59 |^ 1 ) = D59 by VECTSP11:19;
thus L470: thesis by L469 , L458;
end;
end;
registration
let C26 being Ring;
let C27 being (LeftMod of C26);
cluster  nilpotent  additive  homogeneous for (Function of C27 , C27);
existence
proof
take D60 = ( ZeroMap (C27 , C27) );
L472: ( D60 |^ 1 ) = D60 by VECTSP11:19;
thus L473: thesis by L472 , L458;
end;
end;
theorem
L475: (for R4 being Nat holds (for R8 being Field holds (for B14 being (VectSp of R8) holds (for B15 being (linear-transformation of B14 , B14) holds ( B15 | ( ker ( B15 |^ R4 ) ) ) is  nilpotent  nilpotent  nilpotent  nilpotent (linear-transformation of ( ker ( B15 |^ R4 ) ) , ( ker ( B15 |^ R4 ) ))))))
proof
let R4 being Nat;
let R8 being Field;
let C28 being (VectSp of R8);
let C29 being (linear-transformation of C28 , C28);
set D61 = ( ker ( C29 |^ R4 ) );
reconsider D62 = ( C29 | D61 ) as (linear-transformation of D61 , D61) by VECTSP11:28;
L476:
now
let C30 being (Vector of D61);
reconsider D63 = C30 as (Vector of C28) by VECTSP_4:10;
L477: D63 in D61 by STRUCT_0:def 5;
thus L478: ( ( D62 |^ R4 ) . C30 ) = ( ( ( C29 |^ R4 ) | D61 ) . C30 ) by VECTSP11:22
.= ( ( C29 |^ R4 ) . D63 ) by FUNCT_1:49
.= ( 0. C28 ) by L477 , RANKNULL:10
.= ( 0. D61 ) by VECTSP_4:11;
end;
thus L479: thesis by L476 , L456;
end;
definition
let C31 being doubleLoopStr;
let C32 being non  empty VectSpStr over C31;
let C33 being  nilpotent (Function of C32 , C32);
func degree_of_nilpotent C33 -> Nat means 
:L480: (( C33 |^ it ) = ( ZeroMap (C32 , C32) ) & (for R5 being Nat holds (( C33 |^ R5 ) = ( ZeroMap (C32 , C32) ) implies it <= R5)));
existence
proof
defpred S3[ Nat ] means ( C33 |^ $1 ) = ( ZeroMap (C32 , C32) );
L481: (ex R4 being Nat st S3[ R4 ]) by L458;
consider R4 being Nat such that L482: (S3[ R4 ] & (for R5 being Nat holds (S3[ R5 ] implies R4 <= R5))) from NAT_1:sch 5(L481);
take R4;
thus L483: thesis by L482;
end;
uniqueness
proof
let R1 being Nat;
let R2 being Nat;
assume L484: (( C33 |^ R1 ) = ( ZeroMap (C32 , C32) ) & (for R5 being Nat holds (( C33 |^ R5 ) = ( ZeroMap (C32 , C32) ) implies R1 <= R5)) & ( C33 |^ R2 ) = ( ZeroMap (C32 , C32) ) & (for R5 being Nat holds (( C33 |^ R5 ) = ( ZeroMap (C32 , C32) ) implies R2 <= R5)));
L485: (R1 <= R2 & R2 <= R1) by L484;
thus L486: thesis by L485 , XXREAL_0:1;
end;
end;
notation
let C34 being doubleLoopStr;
let C35 being non  empty VectSpStr over C34;
let C36 being  nilpotent (Function of C35 , C35);
synonym deg C36 for degree_of_nilpotent C36;
end;
theorem
L489: (for B16 being doubleLoopStr holds (for B17 being non  empty VectSpStr over B16 holds (for B18 being  nilpotent (Function of B17 , B17) holds (( deg B18 ) = ( 0 ) iff ( [#] B17 ) = { ( 0. B17 ) }))))
proof
let C37 being doubleLoopStr;
let C38 being non  empty VectSpStr over C37;
let C39 being  nilpotent (Function of C38 , C38);
thus L490:now
assume L491: ( deg C39 ) = ( 0 );
L492: ( [#] C38 ) c= { ( 0. C38 ) }
proof
let R6 being set;
assume that
L493: R6 in ( [#] C38 );
L494: ( id C38 ) = ( C39 |^ ( 0 ) ) by VECTSP11:18
.= ( ZeroMap (C38 , C38) ) by L491 , L480
.= ( (the carrier of C38) --> ( 0. C38 ) ) by GRCAT_1:def 7;
L495: R6 = ( ( (the carrier of C38) --> ( 0. C38 ) ) . R6 ) by L494 , L493 , FUNCT_1:18
.= ( 0. C38 ) by L493 , FUNCOP_1:7;
thus L496: thesis by L495 , TARSKI:def 1;
end;
thus L497: ( [#] C38 ) = { ( 0. C38 ) } by L492 , ZFMISC_1:33;
end;
assume L498: ( [#] C38 ) = { ( 0. C38 ) };
L499:
now
let R6 being set;
assume L500: R6 in ( dom ( C39 |^ ( 0 ) ) );
reconsider D64 = R6 as (Vector of C38) by L500 , FUNCT_2:def 1;
thus L501: ( ( C39 |^ ( 0 ) ) . R6 ) = ( ( id C38 ) . D64 ) by VECTSP11:18
.= ( 0. C38 ) by L498 , TARSKI:def 1;
end;
L502: ( C39 |^ ( 0 ) ) = ( ( dom ( C39 |^ ( 0 ) ) ) --> ( 0. C38 ) ) by L499 , FUNCOP_1:11
.= ( (the carrier of C38) --> ( 0. C38 ) ) by FUNCT_2:def 1
.= ( ZeroMap (C38 , C38) ) by GRCAT_1:def 7;
thus L503: thesis by L502 , L480;
end;
theorem
L504: (for B19 being doubleLoopStr holds (for B20 being non  empty VectSpStr over B19 holds (for B21 being  nilpotent (Function of B20 , B20) holds (ex B22 being (Vector of B20) st (for R1 being Nat holds (R1 < ( deg B21 ) implies ( ( B21 |^ R1 ) . B22 ) <> ( 0. B20 )))))))
proof
let C40 being doubleLoopStr;
let C41 being non  empty VectSpStr over C40;
let C42 being  nilpotent (Function of C41 , C41);
set D65 = ( deg C42 );
defpred S4[ Nat ] means (( 0 ) < $1 & $1 < D65 & ( ( C42 |^ $1 ) . ( 0. C41 ) ) = ( 0. C41 ));
assume L505: (for B23 being (Vector of C41) holds (ex R1 being Nat st (R1 < D65 & ( ( C42 |^ R1 ) . B23 ) = ( 0. C41 ))));
L506: (ex R1 being Nat st (R1 < D65 & ( ( C42 |^ R1 ) . ( 0. C41 ) ) = ( 0. C41 ))) by L505;
L507: ( [#] C41 ) <> { ( 0. C41 ) } by L506 , L489;
consider C43 being set such that L508: C43 in ( [#] C41 ) and L509: C43 <> ( 0. C41 ) by L507 , ZFMISC_1:35;
reconsider D66 = C43 as (Vector of C41) by L508;
consider R2 being Nat such that L510: R2 < D65 and L511: ( ( C42 |^ R2 ) . D66 ) = ( 0. C41 ) by L505;
L512: ( R2 - R2 ) < ( D65 - R2 ) by L510 , XREAL_1:9;
L513: R2 > ( 0 )
proof
assume L514: R2 <= ( 0 );
L515: R2 = ( 0 ) by L514;
L516: ( 0. C41 ) = ( ( id C41 ) . D66 ) by L515 , L511 , VECTSP11:18
.= D66 by FUNCT_1:18;
thus L517: thesis by L516 , L509;
end;
L518: ( D65 - R2 ) < ( D65 - ( 0 ) ) by L513 , XREAL_1:10;
L519: ( dom ( C42 |^ R2 ) ) = ( [#] C41 ) by FUNCT_2:def 1;
L520: ( D65 - R2 ) = ( D65 -' R2 ) by L510 , XREAL_1:233;
L521: D65 = ( ( D65 -' R2 ) + R2 ) by L520;
L522: ( C42 |^ D65 ) = ( ZeroMap (C41 , C41) ) by L480
.= ( (the carrier of C41) --> ( 0. C41 ) ) by GRCAT_1:def 7;
L523: ( 0. C41 ) = ( ( C42 |^ D65 ) . D66 ) by L522 , FUNCOP_1:7
.= ( ( ( C42 |^ ( D65 -' R2 ) ) * ( C42 |^ R2 ) ) . D66 ) by L521 , VECTSP11:20
.= ( ( C42 |^ ( D65 -' R2 ) ) . ( 0. C41 ) ) by L511 , L519 , FUNCT_1:13;
L524: (ex R2 being Nat st S4[ R2 ]) by L523 , L520 , L512 , L518;
consider R3 being Nat such that L525: (S4[ R3 ] & (for B24 being Nat holds (S4[ B24 ] implies R3 <= B24))) from NAT_1:sch 5(L524);
L526: ( D65 -' R3 ) = ( D65 - R3 ) by L525 , XREAL_1:233;
L527:
now
let R6 being set;
assume L528: R6 in ( dom ( C42 |^ ( D65 -' R3 ) ) );
reconsider D67 = R6 as (Vector of C41) by L528 , FUNCT_2:def 1;
consider R5 being Nat such that L529: R5 < D65 and L530: ( ( C42 |^ R5 ) . D67 ) = ( 0. C41 ) by L505;
defpred S5[ Nat ] means ($1 <= D65 & (ex R1 being Nat st $1 = ( R5 + ( R1 * R3 ) )));
L531: R5 = ( R5 + ( ( 0 ) * R3 ) );
L532: (ex R5 being Nat st S5[ R5 ]) by L531 , L529;
L533: (for B25 being Nat holds (S5[ B25 ] implies B25 <= D65));
consider C44 being Nat such that L534: S5[ C44 ] and L535: (for B26 being Nat holds (S5[ B26 ] implies B26 <= C44)) from NAT_1:sch 6(L533 , L532);
consider C45 being Nat such that L536: C44 = ( R5 + ( C45 * R3 ) ) by L534;
L537:
now
per cases  by L534 , XXREAL_0:1;
suppose L538: C44 = D65;

L539: C45 <> ( 0 ) by L538 , L529 , L536;
reconsider D68 = ( C45 - 1 ) as Nat by L539 , NAT_1:20;
L540: ( D65 -' R3 ) = ( R5 + ( D68 * R3 ) ) by L526 , L536 , L538;
thus L541: ( ( C42 |^ ( D65 -' R3 ) ) . D67 ) = ( 0. C41 ) by L540 , L525 , L530 , VECTSP11:21;
end;
suppose L542: C44 < D65;

L543: C44 <> ( 0 )
proof
assume L544: C44 = ( 0 );
L545: R5 = ( 0 ) by L544 , L536;
L546: ( R5 + ( 1 * R3 ) ) < D65 by L545 , L525;
thus L547: thesis by L546 , L525 , L535 , L544;
end;
L548: ( D65 - C44 ) < ( D65 - ( 0 ) ) by L543 , XREAL_1:10;
L549: (( ( C42 |^ C44 ) . D67 ) = ( 0. C41 ) & ( dom ( C42 |^ C44 ) ) = (the carrier of C41)) by L525 , L530 , L536 , FUNCT_2:def 1 , VECTSP11:21;
L550: ( C44 - C44 ) < ( D65 - C44 ) by L542 , XREAL_1:9;
L551: ( D65 - C44 ) = ( D65 -' C44 ) by L542 , XREAL_1:233;
L552: D65 = ( ( D65 -' C44 ) + C44 ) by L551;
L553: ( 0. C41 ) = ( ( C42 |^ D65 ) . D67 ) by L522 , FUNCOP_1:7
.= ( ( ( C42 |^ ( D65 -' C44 ) ) * ( C42 |^ C44 ) ) . D67 ) by L552 , VECTSP11:20
.= ( ( C42 |^ ( D65 -' C44 ) ) . ( 0. C41 ) ) by L549 , FUNCT_1:13;
L554: R3 <= ( D65 -' C44 ) by L553 , L525 , L551 , L550 , L548;
L555: ( C44 + R3 ) <= ( C44 + ( D65 - C44 ) ) by L554 , L551 , XREAL_1:6;
L556: ( C44 + R3 ) = ( R5 + ( ( C45 + 1 ) * R3 ) ) by L536;
L557: ( C44 + R3 ) <= ( C44 + ( 0 ) ) by L556 , L535 , L555;
thus L558: ( ( C42 |^ ( D65 -' R3 ) ) . D67 ) = ( 0. C41 ) by L557 , L525 , XREAL_1:6;
end;
end;
thus L560: ( ( C42 |^ ( D65 -' R3 ) ) . R6 ) = ( 0. C41 ) by L537;
end;
L561: ( D65 - R3 ) < ( D65 - ( 0 ) ) by L525 , XREAL_1:10;
L562: ( dom ( C42 |^ ( D65 -' R3 ) ) ) = ( [#] C41 ) by FUNCT_2:def 1;
L563: ( C42 |^ ( D65 -' R3 ) ) = ( (the carrier of C41) --> ( 0. C41 ) ) by L562 , L527 , FUNCOP_1:11
.= ( ZeroMap (C41 , C41) ) by GRCAT_1:def 7;
thus L564: contradiction by L563 , L526 , L561 , L480;
end;
theorem
L565: (for B27 being Field holds (for B28 being (VectSp of B27) holds (for B29 being (Subspace of B28) holds (for B30 being  nilpotent (Function of B28 , B28) holds (( B30 | B29 ) is (Function of B29 , B29) implies ( B30 | B29 ) is  nilpotent  nilpotent  nilpotent  nilpotent (Function of B29 , B29))))))
proof
let C46 being Field;
let C47 being (VectSp of C46);
let C48 being (Subspace of C47);
let C49 being  nilpotent (Function of C47 , C47);
assume L566: ( C49 | C48 ) is (Function of C48 , C48);
reconsider D69 = ( C49 | C48 ) as (Function of C48 , C48) by L566;
consider R4 being Nat such that L567: ( C49 |^ R4 ) = ( ZeroMap (C47 , C47) ) by L458;
L568: ( [#] C48 ) c= ( [#] C47 ) by VECTSP_4:def 2;
L569: ( [#] C48 ) = ( ( [#] C47 ) /\ ( [#] C48 ) ) by L568 , XBOOLE_1:28;
L570: ( D69 |^ R4 ) = ( ( ZeroMap (C47 , C47) ) | C48 ) by L567 , VECTSP11:22
.= ( ( (the carrier of C47) --> ( 0. C47 ) ) | ( [#] C48 ) ) by GRCAT_1:def 7
.= ( ( (the carrier of C47) /\ ( [#] C48 ) ) --> ( 0. C47 ) ) by FUNCOP_1:12
.= ( (the carrier of C48) --> ( 0. C48 ) ) by L569 , VECTSP_4:11
.= ( ZeroMap (C48 , C48) ) by GRCAT_1:def 7;
thus L571: thesis by L570 , L458;
end;
theorem
L572: (for R4 being Nat holds (for B31 being Field holds (for B32 being (VectSp of B31) holds (for B33 being (Subspace of B32) holds (for B34 being  nilpotent (linear-transformation of B32 , B32) holds (for B35 being  nilpotent (Function of ( im ( B34 |^ R4 ) ) , ( im ( B34 |^ R4 ) )) holds ((B35 = ( B34 | ( im ( B34 |^ R4 ) ) ) & R4 <= ( deg B34 )) implies ( ( deg B35 ) + R4 ) = ( deg B34 ))))))))
proof
let R4 being Nat;
let C50 being Field;
let C51 being (VectSp of C50);
let C52 being (Subspace of C51);
let C53 being  nilpotent (linear-transformation of C51 , C51);
set D70 = ( im ( C53 |^ R4 ) );
let C54 being  nilpotent (Function of D70 , D70);
assume L573: C54 = ( C53 | D70 );
set D71 = ( deg C53 );
assume L574: R4 <= D71;
reconsider D72 = ( D71 - R4 ) as (Element of ( NAT )) by L574 , NAT_1:21;
L575:
now
let R6 being set;
assume L576: R6 in ( dom ( C54 |^ D72 ) );
reconsider D73 = R6 as (Vector of D70) by L576 , FUNCT_2:def 1;
reconsider D74 = D73 as (Vector of C51) by VECTSP_4:10;
L577: ( dom ( C53 |^ R4 ) ) = (the carrier of C51) by FUNCT_2:def 1;
L578: D73 in D70 by STRUCT_0:def 5;
consider C55 being (Element of C51) such that L579: D74 = ( ( C53 |^ R4 ) . C55 ) by L578 , RANKNULL:13;
L580: ( ( C53 |^ D71 ) . C55 ) = ( ( ZeroMap (C51 , C51) ) . C55 ) by L480
.= ( ( (the carrier of C51) --> ( 0. C51 ) ) . C55 ) by GRCAT_1:def 7
.= ( 0. C51 ) by FUNCOP_1:7;
thus L581: ( 0. D70 ) = ( ( C53 |^ ( D72 + R4 ) ) . C55 ) by L580 , VECTSP_4:11
.= ( ( ( C53 |^ D72 ) * ( C53 |^ R4 ) ) . C55 ) by VECTSP11:20
.= ( ( C53 |^ D72 ) . D74 ) by L579 , L577 , FUNCT_1:13
.= ( ( ( C53 |^ D72 ) | D70 ) . D73 ) by FUNCT_1:49
.= ( ( C54 |^ D72 ) . R6 ) by L573 , VECTSP11:22;
end;
L582: ( dom ( C54 |^ D72 ) ) = ( [#] D70 ) by FUNCT_2:def 1;
L583: ( C54 |^ D72 ) = ( (the carrier of D70) --> ( 0. D70 ) ) by L582 , L575 , FUNCOP_1:11
.= ( ZeroMap (D70 , D70) ) by GRCAT_1:def 7;
L584: ( deg C54 ) <= D72 by L583 , L480;
L585: ( deg C54 ) = D72
proof
set D75 = ( deg C54 );
L586: ( dom ( C53 |^ R4 ) ) = (the carrier of C51) by FUNCT_2:def 1;
assume L587: D75 <> D72;
L588: D75 < D72 by L587 , L584 , XXREAL_0:1;
L589: ( D75 + R4 ) < ( D72 + R4 ) by L588 , XREAL_1:6;
consider C56 being (Vector of C51) such that L590: (for R1 being Nat holds (R1 < D71 implies ( ( C53 |^ R1 ) . C56 ) <> ( 0. C51 ))) by L504;
L591: ( ( C53 |^ R4 ) . C56 ) in D70 by RANKNULL:13;
L592: ( ( C53 |^ R4 ) . C56 ) in (the carrier of D70) by L591 , STRUCT_0:def 5;
L593: ( C54 |^ D75 ) = ( ZeroMap (D70 , D70) ) by L480
.= ( (the carrier of D70) --> ( 0. D70 ) ) by GRCAT_1:def 7;
L594: ( 0. D70 ) = ( ( C54 |^ D75 ) . ( ( C53 |^ R4 ) . C56 ) ) by L593 , L592 , FUNCOP_1:7
.= ( ( ( C53 |^ D75 ) | D70 ) . ( ( C53 |^ R4 ) . C56 ) ) by L573 , VECTSP11:22
.= ( ( C53 |^ D75 ) . ( ( C53 |^ R4 ) . C56 ) ) by L592 , FUNCT_1:49
.= ( ( ( C53 |^ D75 ) * ( C53 |^ R4 ) ) . C56 ) by L586 , FUNCT_1:13
.= ( ( C53 |^ ( D75 + R4 ) ) . C56 ) by VECTSP11:20;
thus L595: thesis by L594 , L589 , L590 , VECTSP_4:11;
end;
thus L596: thesis by L585;
end;
theorem
L597: (for R1 being Nat holds (for R8 being Field holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R12 being  finite-dimensional (VectSp of R8) holds (for R13 being (Subspace of R11) holds (for R14 being (Subspace of R11) holds (for R15 being (Subspace of R12) holds (for R16 being (Subspace of R12) holds (for R17 being (OrdBasis of R11) holds (for R20 being (FinSequence of R12) holds (for R21 being (OrdBasis of R13) holds (for R22 being (OrdBasis of R14) holds (for R23 being (FinSequence of R15) holds (for R24 being (FinSequence of R16) holds (for B36 being (Matrix of ( len R17 ) , ( len R20 ) , R8) holds (for B37 being (Matrix of ( len R21 ) , ( len R23 ) , R8) holds (for B38 being (Matrix of ( len R22 ) , ( len R24 ) , R8) holds ((R17 = ( R21 ^ R22 ) & R20 = ( R23 ^ R24 ) & B36 = ( block_diagonal (<* B37 , B38 *> , ( 0. R8 )) ) & ( width B37 ) = ( len R23 ) & ( width B38 ) = ( len R24 )) implies ((R1 in ( dom R21 ) implies ( ( Mx2Tran (B36 , R17 , R20) ) . ( R17 /. R1 ) ) = ( ( Mx2Tran (B37 , R21 , R23) ) . ( R21 /. R1 ) )) & (R1 in ( dom R22 ) implies ( ( Mx2Tran (B36 , R17 , R20) ) . ( R17 /. ( R1 + ( len R21 ) ) ) ) = ( ( Mx2Tran (B38 , R22 , R24) ) . ( R22 /. R1 ) )))))))))))))))))))))
proof
let R1 being Nat;
let R8 being Field;
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R13 being (Subspace of R11);
let R14 being (Subspace of R11);
let R15 being (Subspace of R12);
let R16 being (Subspace of R12);
let R17 being (OrdBasis of R11);
let R20 being (FinSequence of R12);
let R21 being (OrdBasis of R13);
let R22 being (OrdBasis of R14);
let R23 being (FinSequence of R15);
let R24 being (FinSequence of R16);
let C57 being (Matrix of ( len R17 ) , ( len R20 ) , R8);
let C58 being (Matrix of ( len R21 ) , ( len R23 ) , R8);
let C59 being (Matrix of ( len R22 ) , ( len R24 ) , R8);
assume that
L598: R17 = ( R21 ^ R22 )
and
L599: R20 = ( R23 ^ R24 )
and
L600: C57 = ( block_diagonal (<* C58 , C59 *> , ( 0. R8 )) )
and
L601: ( width C58 ) = ( len R23 )
and
L602: ( width C59 ) = ( len R24 );
L603: ( dom R21 ) c= ( dom R17 ) by L598 , FINSEQ_1:26;
L604: (( rng R24 ) c= (the carrier of R16) & (the carrier of R16) c= (the carrier of R12)) by FINSEQ_1:def 4 , VECTSP_4:def 2;
L605: ( rng R24 ) c= (the carrier of R12) by L604 , XBOOLE_1:1;
L606: (( rng R23 ) c= (the carrier of R15) & (the carrier of R15) c= (the carrier of R12)) by FINSEQ_1:def 4 , VECTSP_4:def 2;
L607: ( rng R23 ) c= (the carrier of R12) by L606 , XBOOLE_1:1;
reconsider D76 = R23 , D77 = R24 as (FinSequence of R12) by L607 , L605 , FINSEQ_1:def 4;
set D78 = ( Mx2Tran (C58 , R21 , R23) );
set D79 = ( Mx2Tran (C57 , R17 , R20) );
L608: (( dom R17 ) = ( Seg ( len R17 ) ) & ( len ( 1. (R8 , ( len R17 )) ) ) = ( len R17 )) by FINSEQ_1:def 3 , MATRIX_1:24;
L609: ( dom ( 1. (R8 , ( len R21 )) ) ) = ( Seg ( len ( 1. (R8 , ( len R21 )) ) ) ) by FINSEQ_1:def 3;
L610: ( dom ( 1. (R8 , ( len R17 )) ) ) = ( Seg ( len ( 1. (R8 , ( len R17 )) ) ) ) by FINSEQ_1:def 3;
set D80 = ( ( len R21 ) + R1 );
L611: (( dom R22 ) = ( Seg ( len R22 ) ) & ( len ( 1. (R8 , ( len R22 )) ) ) = ( len R22 )) by FINSEQ_1:def 3 , MATRIX_1:24;
set D81 = ( Mx2Tran (C59 , R22 , R24) );
L612: ( width ( 1. (R8 , ( len R17 )) ) ) = ( len R17 ) by MATRIX_1:24;
L613: (( len ( Line (C59 , R1) ) ) = ( width C59 ) & ( len ( ( width C58 ) |-> ( 0. R8 ) ) ) = ( width C58 )) by CARD_1:def 7;
L614: (( dom R21 ) = ( Seg ( len R21 ) ) & ( len ( 1. (R8 , ( len R21 )) ) ) = ( len R21 )) by FINSEQ_1:def 3 , MATRIX_1:24;
L615: ( len C57 ) = ( len R17 ) by MATRIX_1:def 2;
L616: ( len C58 ) = ( len R21 ) by MATRIX_1:def 2;
L617: ( dom C58 ) = ( dom R21 ) by L616 , FINSEQ_3:29;
thus L618: (R1 in ( dom R21 ) implies ( D79 . ( R17 /. R1 ) ) = ( D78 . ( R21 /. R1 ) ))
proof
L619: (( len ( Line (C58 , R1) ) ) = ( width C58 ) & ( len ( ( width C59 ) |-> ( 0. R8 ) ) ) = ( width C59 )) by CARD_1:def 7;
assume L620: R1 in ( dom R21 );
L621: ( Line (C57 , R1) ) = ( ( Line (C58 , R1) ) ^ ( ( width C59 ) |-> ( 0. R8 ) ) ) by L620 , L600 , L617 , MATRIXJ1:23;
thus L622: ( D79 . ( R17 /. R1 ) ) = ( Sum ( lmlt (( Line (( ( LineVec2Mx ( ( R17 /. R1 ) |-- R17 ) ) * C57 ) , 1) ) , R20) ) ) by MATRLIN2:def 3
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( Line (( 1. (R8 , ( len R17 )) ) , R1) ) ) * C57 ) , 1) ) , R20) ) ) by L603 , L620 , MATRLIN2:19
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (( ( 1. (R8 , ( len R17 )) ) * C57 ) , R1) ) ) , 1) ) , R20) ) ) by L603 , L608 , L615 , L610 , L620 , MATRIX_1:24 , MATRLIN2:35
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (C57 , R1) ) ) , 1) ) , R20) ) ) by L615 , MATRIXR2:68
.= ( Sum ( lmlt (( Line (C57 , R1) ) , R20) ) ) by MATRIX15:25
.= ( Sum ( ( lmlt (( Line (C58 , R1) ) , D76) ) ^ ( lmlt (( ( width C59 ) |-> ( 0. R8 ) ) , D77) ) ) ) by L599 , L601 , L602 , L621 , L619 , MATRLIN2:9
.= ( ( Sum ( lmlt (( Line (C58 , R1) ) , D76) ) ) + ( Sum ( lmlt (( ( width C59 ) |-> ( 0. R8 ) ) , D77) ) ) ) by RLVECT_1:41
.= ( ( Sum ( lmlt (( Line (C58 , R1) ) , D76) ) ) + ( ( 0. R8 ) * ( Sum D77 ) ) ) by L602 , MATRLIN2:11
.= ( ( Sum ( lmlt (( Line (C58 , R1) ) , D76) ) ) + ( 0. R12 ) ) by VECTSP_1:14
.= ( Sum ( lmlt (( Line (C58 , R1) ) , D76) ) ) by RLVECT_1:def 4
.= ( Sum ( lmlt (( Line (C58 , R1) ) , R23) ) ) by MATRLIN2:14 , MATRLIN2:15
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (C58 , R1) ) ) , 1) ) , R23) ) ) by MATRIX15:25
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (( ( 1. (R8 , ( len R21 )) ) * C58 ) , R1) ) ) , 1) ) , R23) ) ) by L616 , MATRIXR2:68
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( Line (( 1. (R8 , ( len R21 )) ) , R1) ) ) * C58 ) , 1) ) , R23) ) ) by L614 , L609 , L616 , L620 , MATRIX_1:24 , MATRLIN2:35
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( ( R21 /. R1 ) |-- R21 ) ) * C58 ) , 1) ) , R23) ) ) by L620 , MATRLIN2:19
.= ( D78 . ( R21 /. R1 ) ) by MATRLIN2:def 3;
end;

L623: ( dom ( 1. (R8 , ( len R22 )) ) ) = ( Seg ( len ( 1. (R8 , ( len R22 )) ) ) ) by FINSEQ_1:def 3;
assume L624: R1 in ( dom R22 );
L625: D80 in ( dom R17 ) by L624 , L598 , FINSEQ_1:28;
L626: ( len C59 ) = ( len R22 ) by MATRIX_1:def 2;
L627: ( dom C59 ) = ( dom R22 ) by L626 , FINSEQ_3:29;
L628: ( Line (C57 , D80) ) = ( ( ( width C58 ) |-> ( 0. R8 ) ) ^ ( Line (C59 , R1) ) ) by L627 , L600 , L616 , L624 , MATRIXJ1:23;
thus L629: ( D79 . ( R17 /. ( R1 + ( len R21 ) ) ) ) = ( Sum ( lmlt (( Line (( ( LineVec2Mx ( ( R17 /. D80 ) |-- R17 ) ) * C57 ) , 1) ) , R20) ) ) by MATRLIN2:def 3
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( Line (( 1. (R8 , ( len R17 )) ) , D80) ) ) * C57 ) , 1) ) , R20) ) ) by L625 , MATRLIN2:19
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (( ( 1. (R8 , ( len R17 )) ) * C57 ) , D80) ) ) , 1) ) , R20) ) ) by L598 , L612 , L608 , L615 , L610 , L624 , FINSEQ_1:28 , MATRLIN2:35
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (C57 , D80) ) ) , 1) ) , R20) ) ) by L615 , MATRIXR2:68
.= ( Sum ( lmlt (( Line (C57 , D80) ) , R20) ) ) by MATRIX15:25
.= ( Sum ( ( lmlt (( ( width C58 ) |-> ( 0. R8 ) ) , D76) ) ^ ( lmlt (( Line (C59 , R1) ) , D77) ) ) ) by L599 , L601 , L602 , L628 , L613 , MATRLIN2:9
.= ( ( Sum ( lmlt (( ( width C58 ) |-> ( 0. R8 ) ) , D76) ) ) + ( Sum ( lmlt (( Line (C59 , R1) ) , D77) ) ) ) by RLVECT_1:41
.= ( ( ( 0. R8 ) * ( Sum D76 ) ) + ( Sum ( lmlt (( Line (C59 , R1) ) , D77) ) ) ) by L601 , MATRLIN2:11
.= ( ( 0. R12 ) + ( Sum ( lmlt (( Line (C59 , R1) ) , D77) ) ) ) by VECTSP_1:14
.= ( Sum ( lmlt (( Line (C59 , R1) ) , D77) ) ) by RLVECT_1:def 4
.= ( Sum ( lmlt (( Line (C59 , R1) ) , R24) ) ) by MATRLIN2:14 , MATRLIN2:15
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (C59 , R1) ) ) , 1) ) , R24) ) ) by MATRIX15:25
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (( ( 1. (R8 , ( len R22 )) ) * C59 ) , R1) ) ) , 1) ) , R24) ) ) by L626 , MATRIXR2:68
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( Line (( 1. (R8 , ( len R22 )) ) , R1) ) ) * C59 ) , 1) ) , R24) ) ) by L611 , L623 , L626 , L624 , MATRIX_1:24 , MATRLIN2:35
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( ( R22 /. R1 ) |-- R22 ) ) * C59 ) , 1) ) , R24) ) ) by L624 , MATRLIN2:19
.= ( D81 . ( R22 /. R1 ) ) by MATRLIN2:def 3;
end;
theorem
L630: (for R8 being Field holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R12 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for R20 being (FinSequence of R12) holds (for B39 being (Matrix of ( len R17 ) , ( len R20 ) , R8) holds (for B40 being (FinSequence_of_Matrix of R8) holds (B39 = ( block_diagonal (B40 , ( 0. R8 )) ) implies (for R1 being Nat holds (for R3 being Nat holds ((R1 in ( dom R17 ) & R3 = ( min (( Len B40 ) , R1) )) implies (( ( Mx2Tran (B39 , R17 , R20) ) . ( R17 /. R1 ) ) = ( Sum ( lmlt (( Line (( B40 . R3 ) , ( R1 -' ( Sum ( Len ( B40 | ( R3 -' 1 ) ) ) ) )) ) , ( ( R20 | ( Sum ( Width ( B40 | R3 ) ) ) ) /^ ( Sum ( Width ( B40 | ( R3 -' 1 ) ) ) ) )) ) ) & ( len ( ( R20 | ( Sum ( Width ( B40 | R3 ) ) ) ) /^ ( Sum ( Width ( B40 | ( R3 -' 1 ) ) ) ) ) ) = ( width ( B40 . R3 ) )))))))))))))
proof
let R8 being Field;
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let R20 being (FinSequence of R12);
set D82 = ( 1. (R8 , ( len R17 )) );
let C60 being (Matrix of ( len R17 ) , ( len R20 ) , R8);
let C61 being (FinSequence_of_Matrix of R8);
assume that
L631: C60 = ( block_diagonal (C61 , ( 0. R8 )) );
L632: ( width C60 ) = ( Sum ( Width C61 ) ) by L631 , MATRIXJ1:def 5;
L633: ( len D82 ) = ( len R17 ) by MATRIX_1:def 2;
L634: ( dom D82 ) = ( dom R17 ) by L633 , FINSEQ_3:29;
set D83 = ( Len C61 );
set D84 = ( Width C61 );
let R1 being Nat;
let R3 being Nat;
assume that
L635: R1 in ( dom R17 )
and
L636: R3 = ( min (( Len C61 ) , R1) );
L637: (1 <= R1 & R1 <= ( len R17 )) by L635 , FINSEQ_3:25;
L638: ( len C60 ) = ( len R17 ) by L637 , MATRIX_1:23;
set D85 = ( C61 . R3 );
set D86 = ( Sum ( D84 | ( R3 -' 1 ) ) );
L639: (( len ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ) = ( Sum ( D84 | ( R3 -' 1 ) ) ) & ( len ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) = ( width D85 )) by CARD_1:def 7;
set D87 = ( Sum ( D84 | R3 ) );
L640: D84 = ( ( D84 | R3 ) ^ ( D84 /^ R3 ) ) by RFINSEQ:8;
L641: ( Sum D84 ) = ( D87 + ( Sum ( D84 /^ R3 ) ) ) by L640 , RVSUM_1:75;
L642: ( ( Sum D84 ) -' D87 ) = ( ( Sum D84 ) - D87 ) by L641 , NAT_1:11 , XREAL_1:233
.= ( Sum ( D84 /^ R3 ) ) by L641;
L643: ( len ( ( ( Sum D84 ) -' ( Sum ( D84 | R3 ) ) ) |-> ( 0. R8 ) ) ) = ( Sum ( D84 /^ R3 ) ) by L642 , CARD_1:def 7;
L644: (( dom R17 ) = ( Seg ( len R17 ) ) & ( len C60 ) = ( Sum ( Len C61 ) )) by L631 , FINSEQ_1:def 3 , MATRIXJ1:def 5;
L645: R3 in ( dom ( Len C61 ) ) by L644 , L635 , L636 , L638 , MATRIXJ1:def 1;
L646: 1 <= R3 by L645 , FINSEQ_3:25;
L647: (( dom D83 ) = ( dom C61 ) & ( dom D84 ) = ( dom C61 )) by MATRIXJ1:def 3 , MATRIXJ1:def 4;
L648: (R3 <= ( len D84 ) & ( D84 . R3 ) = ( width D85 )) by L647 , L645 , FINSEQ_3:25 , MATRIXJ1:def 4;
L649: D84 = ( ( ( D84 | ( R3 -' 1 ) ) ^ <* ( width D85 ) *> ) ^ ( D84 /^ R3 ) ) by L648 , L636 , L646 , POLYNOM4:1;
L650: ( Sum D84 ) = ( ( Sum ( ( D84 | ( R3 -' 1 ) ) ^ <* ( width D85 ) *> ) ) + ( Sum ( D84 /^ R3 ) ) ) by L649 , RVSUM_1:75
.= ( ( D86 + ( width D85 ) ) + ( Sum ( D84 /^ R3 ) ) ) by RVSUM_1:74;
L651: ( len ( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) ) = D87 by L650 , L641 , CARD_1:def 7;
set D88 = ( R20 | D87 );
L652: ( D88 /^ D86 ) = ( ( R20 | ( Sum ( Width ( C61 | R3 ) ) ) ) /^ D86 ) by MATRIXJ1:21
.= ( ( R20 | ( Sum ( Width ( C61 | R3 ) ) ) ) /^ ( Sum ( Width ( C61 | ( R3 -' 1 ) ) ) ) ) by MATRIXJ1:21;
L653: ( width C60 ) = ( len R20 ) by L637 , MATRIX_1:23;
L654: ( len D88 ) = D87 by L653 , L632 , L641 , FINSEQ_1:59 , NAT_1:11;
L655: ( Sum D84 ) = ( D86 + ( ( width D85 ) + ( Sum ( D84 /^ R3 ) ) ) ) by L650;
L656: ( len ( R20 | D86 ) ) = D86 by L655 , L632 , L653 , FINSEQ_1:59 , NAT_1:11;
L657: D87 >= D86 by L641 , L650 , NAT_1:11;
L658: ( Seg D86 ) c= ( Seg D87 ) by L657 , FINSEQ_1:5;
L659: ( D88 | D86 ) = ( R20 | D86 ) by L658 , RELAT_1:74;
L660: D88 = ( ( R20 | D86 ) ^ ( D88 /^ D86 ) ) by L659 , RFINSEQ:8;
L661: ( len D88 ) = ( ( len ( R20 | D86 ) ) + ( len ( D88 /^ D86 ) ) ) by L660 , FINSEQ_1:22;
L662: R20 = ( D88 ^ ( R20 /^ D87 ) ) by RFINSEQ:8;
L663: ( len R20 ) = ( ( len D88 ) + ( len ( R20 /^ D87 ) ) ) by L662 , FINSEQ_1:22;
L664: ( ( Mx2Tran (C60 , R17 , R20) ) . ( R17 /. R1 ) ) = ( Sum ( lmlt (( Line (( ( LineVec2Mx ( ( R17 /. R1 ) |-- R17 ) ) * C60 ) , 1) ) , R20) ) ) by MATRLIN2:def 3
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( Line (D82 , R1) ) ) * C60 ) , 1) ) , R20) ) ) by L635 , MATRLIN2:19
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (( D82 * C60 ) , R1) ) ) , 1) ) , R20) ) ) by L635 , L637 , L634 , L638 , MATRIX_1:23 , MATRLIN2:35
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (C60 , R1) ) ) , 1) ) , R20) ) ) by L638 , MATRIXR2:68
.= ( Sum ( lmlt (( Line (C60 , R1) ) , R20) ) ) by MATRIX15:25
.= ( Sum ( lmlt (( ( ( ( Sum ( Width ( C61 | ( R3 -' 1 ) ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) ^ ( ( ( Sum D84 ) -' ( Sum ( Width ( C61 | R3 ) ) ) ) |-> ( 0. R8 ) ) ) , R20) ) ) by L631 , L635 , L636 , L638 , L644 , MATRIXJ1:37
.= ( Sum ( lmlt (( ( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) ^ ( ( ( Sum D84 ) -' ( Sum ( Width ( C61 | R3 ) ) ) ) |-> ( 0. R8 ) ) ) , R20) ) ) by MATRIXJ1:21
.= ( Sum ( lmlt (( ( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) ^ ( ( ( Sum D84 ) -' ( Sum ( D84 | R3 ) ) ) |-> ( 0. R8 ) ) ) , R20) ) ) by MATRIXJ1:21
.= ( Sum ( ( lmlt (( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) , D88) ) ^ ( lmlt (( ( ( Sum D84 ) -' ( Sum ( D84 | R3 ) ) ) |-> ( 0. R8 ) ) , ( R20 /^ D87 )) ) ) ) by L632 , L653 , L641 , L662 , L663 , L654 , L643 , L651 , MATRLIN2:9
.= ( ( Sum ( lmlt (( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) , D88) ) ) + ( Sum ( lmlt (( ( ( Sum D84 ) -' ( Sum ( D84 | R3 ) ) ) |-> ( 0. R8 ) ) , ( R20 /^ D87 )) ) ) ) by RLVECT_1:41
.= ( ( Sum ( lmlt (( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) , D88) ) ) + ( ( 0. R8 ) * ( Sum ( R20 /^ D87 ) ) ) ) by L632 , L653 , L641 , L642 , L663 , L654 , MATRLIN2:11
.= ( ( Sum ( lmlt (( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) , D88) ) ) + ( 0. R12 ) ) by VECTSP_1:14
.= ( Sum ( lmlt (( ( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) ^ ( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) ) , D88) ) ) by RLVECT_1:def 4
.= ( Sum ( ( lmlt (( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) , ( R20 | D86 )) ) ^ ( lmlt (( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) , ( D88 /^ D86 )) ) ) ) by L641 , L650 , L654 , L660 , L661 , L656 , L639 , MATRLIN2:9
.= ( ( Sum ( lmlt (( ( Sum ( D84 | ( R3 -' 1 ) ) ) |-> ( 0. R8 ) ) , ( R20 | D86 )) ) ) + ( Sum ( lmlt (( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) , ( D88 /^ D86 )) ) ) ) by RLVECT_1:41
.= ( ( ( 0. R8 ) * ( Sum ( R20 | D86 ) ) ) + ( Sum ( lmlt (( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) , ( D88 /^ D86 )) ) ) ) by L656 , MATRLIN2:11
.= ( ( 0. R12 ) + ( Sum ( lmlt (( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) , ( D88 /^ D86 )) ) ) ) by VECTSP_1:14
.= ( Sum ( lmlt (( Line (D85 , ( R1 -' ( Sum ( Len ( C61 | ( R3 -' 1 ) ) ) ) )) ) , ( D88 /^ D86 )) ) ) by RLVECT_1:def 4;
thus L665: thesis by L664 , L641 , L650 , L654 , L661 , L656 , L652;
end;
theorem
L666: (for R8 being Field holds (for R10 being (Element of R8) holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R18 being (FinSequence of R11) holds (( len R18 ) in ( dom R18 ) implies ( Sum ( lmlt (( Line (( Jordan_block (R10 , ( len R18 )) ) , ( len R18 )) ) , R18) ) ) = ( R10 * ( R18 /. ( len R18 ) ) ))))))
proof
let R8 being Field;
let R10 being (Element of R8);
let R11 being  finite-dimensional (VectSp of R8);
let R18 being (FinSequence of R11);
set D89 = ( len R18 );
assume L667: D89 in ( dom R18 );
set D90 = ( Jordan_block (R10 , D89) );
set D91 = ( 1. (R8 , D89) );
thus L668: ( Sum ( lmlt (( Line (D90 , D89) ) , R18) ) ) = ( Sum ( lmlt (( R10 * ( Line (D91 , D89) ) ) , R18) ) ) by L100
.= ( R10 * ( Sum ( lmlt (( Line (D91 , D89) ) , R18) ) ) ) by MATRLIN2:13
.= ( R10 * ( R18 /. D89 ) ) by L667 , MATRLIN2:16;
end;
theorem
L669: (for R1 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R18 being (FinSequence of R11) holds ((R1 in ( dom R18 ) & R1 <> ( len R18 )) implies ( Sum ( lmlt (( Line (( Jordan_block (R10 , ( len R18 )) ) , R1) ) , R18) ) ) = ( ( R10 * ( R18 /. R1 ) ) + ( R18 /. ( R1 + 1 ) ) )))))))
proof
let R1 being Nat;
let R8 being Field;
let R10 being (Element of R8);
let R11 being  finite-dimensional (VectSp of R8);
let R18 being (FinSequence of R11);
assume that
L670: R1 in ( dom R18 )
and
L671: R1 <> ( len R18 );
set D92 = ( len R18 );
L672: ( dom R18 ) = ( Seg D92 ) by FINSEQ_1:def 3;
L673: R1 <= D92 by L670 , FINSEQ_3:25;
L674: R1 < D92 by L673 , L671 , XXREAL_0:1;
L675: (1 <= ( R1 + 1 ) & ( R1 + 1 ) <= D92) by L674 , NAT_1:11 , NAT_1:13;
L676: ( R1 + 1 ) in ( dom R18 ) by L675 , L672;
set D93 = ( 1. (R8 , D92) );
L677: ( len ( Line (D93 , ( R1 + 1 )) ) ) = ( width D93 ) by CARD_1:def 7;
L678: ( width D93 ) = D92 by MATRIX_1:24;
L679: ( dom ( Line (D93 , ( R1 + 1 )) ) ) = ( dom R18 ) by L678 , L677 , FINSEQ_3:29;
L680: (( len ( R10 * ( Line (D93 , R1) ) ) ) = ( len ( Line (D93 , R1) ) ) & ( len ( Line (D93 , R1) ) ) = ( width D93 )) by CARD_1:def 7 , MATRIXR1:16;
L681: ( dom ( R10 * ( Line (D93 , R1) ) ) ) = ( dom ( Line (D93 , ( R1 + 1 )) ) ) by L680 , L677 , FINSEQ_3:29;
L682: ( dom ( lmlt (( R10 * ( Line (D93 , R1) ) ) , R18) ) ) = ( dom R18 ) by L681 , L679 , MATRLIN:12;
L683: ( dom ( lmlt (( Line (D93 , ( R1 + 1 )) ) , R18) ) ) = ( dom R18 ) by L679 , MATRLIN:12;
L684: ( len ( lmlt (( R10 * ( Line (D93 , R1) ) ) , R18) ) ) = ( len ( lmlt (( Line (D93 , ( R1 + 1 )) ) , R18) ) ) by L683 , L682 , FINSEQ_3:29;
thus L685: ( Sum ( lmlt (( Line (( Jordan_block (R10 , ( len R18 )) ) , R1) ) , R18) ) ) = ( Sum ( lmlt (( ( R10 * ( Line (D93 , R1) ) ) + ( Line (D93 , ( R1 + 1 )) ) ) , R18) ) ) by L670 , L671 , L672 , L68
.= ( Sum ( ( lmlt (( R10 * ( Line (D93 , R1) ) ) , R18) ) + ( lmlt (( Line (D93 , ( R1 + 1 )) ) , R18) ) ) ) by MATRLIN2:7
.= ( ( Sum ( lmlt (( R10 * ( Line (D93 , R1) ) ) , R18) ) ) + ( Sum ( lmlt (( Line (D93 , ( R1 + 1 )) ) , R18) ) ) ) by L684 , MATRLIN2:10
.= ( ( R10 * ( Sum ( lmlt (( Line (D93 , R1) ) , R18) ) ) ) + ( Sum ( lmlt (( Line (D93 , ( R1 + 1 )) ) , R18) ) ) ) by MATRLIN2:13
.= ( ( R10 * ( R18 /. R1 ) ) + ( Sum ( lmlt (( Line (D93 , ( R1 + 1 )) ) , R18) ) ) ) by L670 , MATRLIN2:16
.= ( ( R10 * ( R18 /. R1 ) ) + ( R18 /. ( R1 + 1 ) ) ) by L676 , MATRLIN2:16;
end;
theorem
L686: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R12 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for R20 being (FinSequence of R12) holds (for B41 being (Matrix of ( len R17 ) , ( len R20 ) , R8) holds (B41 = ( Jordan_block (R10 , R4) ) implies (for R1 being Nat holds (R1 in ( dom R17 ) implies ((R1 = ( len R17 ) implies ( ( Mx2Tran (B41 , R17 , R20) ) . ( R17 /. R1 ) ) = ( R10 * ( R20 /. R1 ) )) & (R1 <> ( len R17 ) implies ( ( Mx2Tran (B41 , R17 , R20) ) . ( R17 /. R1 ) ) = ( ( R10 * ( R20 /. R1 ) ) + ( R20 /. ( R1 + 1 ) ) ))))))))))))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let R20 being (FinSequence of R12);
set D94 = ( 1. (R8 , ( len R17 )) );
set D95 = ( Jordan_block (R10 , R4) );
let C62 being (Matrix of ( len R17 ) , ( len R20 ) , R8);
assume that
L687: C62 = ( Jordan_block (R10 , R4) );
L688: ( len C62 ) = R4 by L687 , MATRIX_1:24;
L689: ( len D94 ) = ( len R17 ) by MATRIX_1:def 2;
L690: ( dom D94 ) = ( dom R17 ) by L689 , FINSEQ_3:29;
let R1 being Nat;
assume that
L691: R1 in ( dom R17 );
L692: ( len C62 ) = ( len R17 ) by MATRIX_1:25;
L693: ( ( Mx2Tran (C62 , R17 , R20) ) . ( R17 /. R1 ) ) = ( Sum ( lmlt (( Line (( ( LineVec2Mx ( ( R17 /. R1 ) |-- R17 ) ) * C62 ) , 1) ) , R20) ) ) by MATRLIN2:def 3
.= ( Sum ( lmlt (( Line (( ( LineVec2Mx ( Line (D94 , R1) ) ) * C62 ) , 1) ) , R20) ) ) by L691 , MATRLIN2:19
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (( D94 * C62 ) , R1) ) ) , 1) ) , R20) ) ) by L691 , L690 , L692 , MATRIX_1:24 , MATRLIN2:35
.= ( Sum ( lmlt (( Line (( LineVec2Mx ( Line (C62 , R1) ) ) , 1) ) , R20) ) ) by L692 , MATRIXR2:68
.= ( Sum ( lmlt (( Line (C62 , R1) ) , R20) ) ) by MATRIX15:25;
L694: ( dom R17 ) = ( Seg ( len R17 ) ) by FINSEQ_1:def 3;
L695: R4 <> ( 0 ) by L694 , L691 , L692 , L688;
L696: (( width D95 ) = R4 & ( width D95 ) = ( len R20 )) by L695 , L687 , L692 , L688 , MATRIX_1:20;
L697: ( dom R20 ) = ( dom R17 ) by L696 , L692 , L688 , FINSEQ_3:29;
thus L698: thesis by L697 , L687 , L691 , L692 , L688 , L696 , L693 , L666 , L669;
end;
theorem
L699: (for R8 being Field holds (for R10 being (Element of R8) holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R12 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for R20 being (FinSequence of R12) holds (for B42 being (FinSequence_of_Jordan_block of R10 , R8) holds (for B43 being (Matrix of ( len R17 ) , ( len R20 ) , R8) holds (B43 = ( block_diagonal (B42 , ( 0. R8 )) ) implies (for R1 being Nat holds (for R3 being Nat holds ((R1 in ( dom R17 ) & R3 = ( min (( Len B42 ) , R1) )) implies ((R1 = ( Sum ( Len ( B42 | R3 ) ) ) implies ( ( Mx2Tran (B43 , R17 , R20) ) . ( R17 /. R1 ) ) = ( R10 * ( R20 /. R1 ) )) & (R1 <> ( Sum ( Len ( B42 | R3 ) ) ) implies ( ( Mx2Tran (B43 , R17 , R20) ) . ( R17 /. R1 ) ) = ( ( R10 * ( R20 /. R1 ) ) + ( R20 /. ( R1 + 1 ) ) )))))))))))))))
proof
let R8 being Field;
let R10 being (Element of R8);
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let R20 being (FinSequence of R12);
let C63 being (FinSequence_of_Jordan_block of R10 , R8);
let C64 being (Matrix of ( len R17 ) , ( len R20 ) , R8);
assume that
L700: C64 = ( block_diagonal (C63 , ( 0. R8 )) );
L701: (( dom R17 ) = ( Seg ( len R17 ) ) & ( len C64 ) = ( Sum ( Len C63 ) )) by L700 , FINSEQ_1:def 3 , MATRIXJ1:def 5;
let R1 being Nat;
let R3 being Nat;
assume that
L702: R1 in ( dom R17 )
and
L703: R3 = ( min (( Len C63 ) , R1) );
set D96 = ( Sum ( Len ( C63 | R3 ) ) );
L704: 1 <= R1 by L702 , FINSEQ_3:25;
L705: R1 <= ( len R17 ) by L702 , FINSEQ_3:25;
L706: ( len C64 ) = ( len R17 ) by L705 , L704 , MATRIX_1:23;
L707: R3 in ( dom ( Len C63 ) ) by L706 , L702 , L703 , L701 , MATRIXJ1:def 1;
L708: ( ( Len C63 ) . R3 ) = ( len ( C63 . R3 ) ) by L707 , MATRIXJ1:def 3;
set D97 = ( Sum ( Len ( C63 | ( R3 -' 1 ) ) ) );
set D98 = ( R1 -' D97 );
set D99 = ( ( R20 | ( Sum ( Width ( C63 | R3 ) ) ) ) /^ ( Sum ( Width ( C63 | ( R3 -' 1 ) ) ) ) );
L709: ( ( Mx2Tran (C64 , R17 , R20) ) . ( R17 /. R1 ) ) = ( Sum ( lmlt (( Line (( C63 . R3 ) , D98) ) , D99) ) ) by L700 , L702 , L703 , L630;
L710: ( width C64 ) = ( Sum ( Width C63 ) ) by L700 , MATRIXJ1:def 5;
L711: ( len D99 ) = ( width ( C63 . R3 ) ) by L700 , L702 , L703 , L630;
L712: ( ( Len C63 ) | R3 ) = ( Len ( C63 | R3 ) ) by MATRIXJ1:17;
L713: R1 <= D96 by L712 , L702 , L703 , L706 , L701 , MATRIXJ1:def 1;
L714: ( ( Len C63 ) | ( R3 -' 1 ) ) = ( Len ( C63 | ( R3 -' 1 ) ) ) by MATRIXJ1:17;
L715: D97 < R1 by L714 , L702 , L703 , L706 , L701 , MATRIXJ1:7;
L716: D98 = ( R1 - D97 ) by L715 , XREAL_1:233;
L717: ( R3 -' 1 ) = ( R3 - 1 ) by L702 , L703 , L706 , L701 , MATRIXJ1:7;
L718: ( ( Len C63 ) | ( ( R3 -' 1 ) + 1 ) ) = ( ( Len ( C63 | ( R3 -' 1 ) ) ) ^ <* ( ( Len C63 ) . R3 ) *> ) by L717 , L714 , L707 , FINSEQ_5:10;
L719: D96 = ( D97 + ( len ( C63 . R3 ) ) ) by L718 , L712 , L717 , L708 , RVSUM_1:74;
L720: ( D97 + D98 ) <= ( D97 + ( len ( C63 . R3 ) ) ) by L719 , L702 , L703 , L712 , L706 , L701 , L716 , MATRIXJ1:def 1;
L721: D98 <= ( len ( C63 . R3 ) ) by L720 , XREAL_1:6;
L722: ( dom ( Len C63 ) ) = ( dom C63 ) by MATRIXJ1:def 3;
consider R4 being Nat such that L723: ( C63 . R3 ) = ( Jordan_block (R10 , R4) ) by L722 , L707 , L353;
L724: (R3 in ( NAT ) & R3 <= ( len ( Len C63 ) )) by L707 , FINSEQ_3:25;
L725: D96 <= ( Sum ( ( Len C63 ) | ( len ( Len C63 ) ) ) ) by L724 , L712 , POLYNOM3:18;
L726: D96 <= ( Sum ( Len C63 ) ) by L725 , FINSEQ_1:58;
L727: ( Width C63 ) = ( Len C63 ) by MATRIXJ1:46;
L728: ( ( Len C63 ) . R3 ) = ( width ( C63 . R3 ) ) by L727 , L707 , MATRIXJ1:def 4;
L729: ( width C64 ) = ( len R20 ) by L704 , L705 , MATRIX_1:23;
L730: ( len ( R20 | D96 ) ) = D96 by L729 , L727 , L710 , L726 , FINSEQ_1:59;
L731: R1 in ( dom ( R20 | D96 ) ) by L730 , L704 , L713 , FINSEQ_3:25;
L732: ( len ( C63 . R3 ) ) = R4 by L723 , MATRIX_1:24;
L733: D98 <> ( 0 ) by L702 , L703 , L714 , L706 , L701 , L716 , MATRIXJ1:7;
L734: 1 <= D98 by L733 , NAT_1:14;
L735: D98 in ( dom D99 ) by L734 , L711 , L708 , L728 , L721 , FINSEQ_3:25;
L736: ( D99 /. D98 ) = ( ( R20 | ( Sum ( Width ( C63 | R3 ) ) ) ) /. ( ( Sum ( Width ( C63 | ( R3 -' 1 ) ) ) ) + D98 ) ) by L735 , FINSEQ_5:27
.= ( ( R20 | ( Sum ( Width ( C63 | R3 ) ) ) ) /. ( D97 + D98 ) ) by MATRIXJ1:46
.= ( ( R20 | ( Sum ( ( Len C63 ) | R3 ) ) ) /. R1 ) by L727 , L716 , MATRIXJ1:21
.= ( R20 /. R1 ) by L712 , L731 , FINSEQ_4:70;
thus L737: (R1 = D96 implies ( ( Mx2Tran (C64 , R17 , R20) ) . ( R17 /. R1 ) ) = ( R10 * ( R20 /. R1 ) )) by L736 , L709 , L711 , L708 , L716 , L728 , L719 , L735 , L723 , L732 , L666;
assume L738: R1 <> D96;
L739: R1 < D96 by L738 , L713 , XXREAL_0:1;
L740: (1 <= ( R1 + 1 ) & ( R1 + 1 ) <= D96) by L739 , NAT_1:11 , NAT_1:13;
L741: ( R1 + 1 ) in ( dom ( R20 | D96 ) ) by L740 , L730 , FINSEQ_3:25;
L742: D98 <> ( len ( C63 . R3 ) ) by L716 , L719 , L738;
L743: D98 < ( len ( C63 . R3 ) ) by L742 , L721 , XXREAL_0:1;
L744: (1 <= ( D98 + 1 ) & ( D98 + 1 ) <= ( len ( C63 . R3 ) )) by L743 , NAT_1:11 , NAT_1:13;
L745: ( D98 + 1 ) in ( dom D99 ) by L744 , L711 , L708 , L728 , FINSEQ_3:25;
L746: ( D99 /. ( D98 + 1 ) ) = ( ( R20 | ( Sum ( Width ( C63 | R3 ) ) ) ) /. ( ( Sum ( Width ( C63 | ( R3 -' 1 ) ) ) ) + ( D98 + 1 ) ) ) by L745 , FINSEQ_5:27
.= ( ( R20 | ( Sum ( Width ( C63 | R3 ) ) ) ) /. ( ( Sum ( ( Len C63 ) | ( R3 -' 1 ) ) ) + ( D98 + 1 ) ) ) by L727 , MATRIXJ1:21
.= ( ( R20 | ( Sum ( ( Len C63 ) | R3 ) ) ) /. ( R1 + 1 ) ) by L714 , L727 , L716 , MATRIXJ1:21
.= ( R20 /. ( R1 + 1 ) ) by L712 , L741 , FINSEQ_4:70;
thus L747: thesis by L746 , L709 , L711 , L708 , L728 , L735 , L723 , L732 , L736 , L742 , L669;
end;
theorem
L748: (for R8 being Field holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for B44 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8) holds (for B45 being (Matrix of ( len R17 ) , ( len R17 ) , R8) holds (B45 = ( block_diagonal (B44 , ( 0. R8 )) ) implies (for R3 being Nat holds ((for R1 being Nat holds (R1 in ( dom B44 ) implies ( len ( B44 . R1 ) ) <= R3)) implies ( ( Mx2Tran (B45 , R17 , R17) ) |^ R3 ) = ( ZeroMap (R11 , R11) )))))))))
proof
let R8 being Field;
let R11 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let C65 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8);
let C66 being (Matrix of ( len R17 ) , ( len R17 ) , R8);
assume that
L749: C66 = ( block_diagonal (C65 , ( 0. R8 )) );
reconsider D100 = ( ZeroMap (R11 , R11) ) as (linear-transformation of R11 , R11);
set D101 = ( Mx2Tran (C66 , R17 , R17) );
let R3 being Nat;
assume that
L750: (for R1 being Nat holds (R1 in ( dom C65 ) implies ( len ( C65 . R1 ) ) <= R3));
L751: (( dom D100 ) = (the carrier of R11) & ( rng R17 ) c= (the carrier of R11)) by FUNCT_2:def 1 , RELAT_1:def 19;
set D102 = ( D101 |^ R3 );
L752: ( dom D102 ) = (the carrier of R11) by FUNCT_2:def 1;
per cases ;
suppose L753: ( len R17 ) = ( 0 );

L754: ( dim R11 ) = ( 0 ) by L753 , MATRLIN2:21;
L755: ( (Omega). R11 ) = ( (0). R11 ) by L754 , VECTSP_9:29;
L756: (the carrier of R11) = { ( 0. R11 ) } by L755 , VECTSP_4:def 3;
L757: ( rng D102 ) c= (the carrier of R11) by RELAT_1:def 19;
L758: ( rng D102 ) = { ( 0. R11 ) } by L757 , L756 , ZFMISC_1:33;
L759: D102 = ( (the carrier of R11) --> ( 0. R11 ) ) by L758 , L752 , FUNCOP_1:9
.= D100 by GRCAT_1:def 7;
thus L760: thesis by L759;
end;
suppose L761: ( len R17 ) > ( 0 );

L762: ( dom C65 ) = ( dom ( Len C65 ) ) by MATRIXJ1:def 3;
L763: (( len C66 ) = ( len R17 ) & ( len C66 ) = ( Sum ( Len C65 ) )) by L749 , MATRIX_1:24;
L764:
now
let R6 being set;
assume that
L765: R6 in ( dom R17 );
reconsider D103 = R6 as (Element of ( NAT )) by L765;
set D104 = ( min (( Len C65 ) , D103) );
L766: D103 in ( Seg ( Sum ( Len C65 ) ) ) by L763 , L765 , FINSEQ_1:def 3;
L767: D104 in ( dom ( Len C65 ) ) by L766 , MATRIXJ1:def 1;
L768: ( ( Len C65 ) . D104 ) = ( len ( C65 . D104 ) ) by L767 , MATRIXJ1:def 3;
L769: ( ( Len C65 ) | D104 ) = ( Len ( C65 | D104 ) ) by MATRIXJ1:17;
L770:
now
L771: D104 <= ( len ( Len C65 ) ) by L767 , FINSEQ_3:25;
L772: ( Sum ( Len ( C65 | D104 ) ) ) <= ( Sum ( ( Len C65 ) | ( len ( Len C65 ) ) ) ) by L771 , L769 , POLYNOM3:18;
L773: ( Sum ( Len ( C65 | D104 ) ) ) <= ( len R17 ) by L772 , L763 , FINSEQ_1:58;
let R5 being Nat;
assume L774: ( D103 + R5 ) <= ( Sum ( Len ( C65 | D104 ) ) );
L775: ( D103 + R5 ) <= ( len R17 ) by L774 , L773 , XXREAL_0:2;
L776: (1 <= D103 & D103 <= ( D103 + R5 )) by L766 , FINSEQ_1:1 , NAT_1:11;
L777: 1 <= ( D103 + R5 ) by L776 , XXREAL_0:2;
thus L778: ( D103 + R5 ) in ( dom R17 ) by L777 , L775 , FINSEQ_3:25;
end;
defpred S6[ Nat ] means ( ( D101 |^ ( $1 + 1 ) ) . ( R17 /. D103 ) ) = ( 0. R11 );
defpred S7[ Nat ] means (( D103 + $1 ) < ( Sum ( Len ( C65 | D104 ) ) ) implies ( ( D101 |^ ( $1 + 1 ) ) . ( R17 /. D103 ) ) = ( R17 /. ( ( D103 + $1 ) + 1 ) ));
set D105 = ( Sum ( ( Len C65 ) | ( D104 -' 1 ) ) );
L779: ( ( Len C65 ) . D104 ) = ( ( Len C65 ) /. D104 ) by L767 , PARTFUN1:def 6;
L780: ( D104 -' 1 ) = ( D104 - 1 ) by L766 , MATRIXJ1:7;
L781: ( ( D104 -' 1 ) + 1 ) = D104 by L780;
L782: ( ( Len C65 ) | D104 ) = ( ( ( Len C65 ) | ( D104 -' 1 ) ) ^ <* ( ( Len C65 ) . D104 ) *> ) by L781 , L767 , FINSEQ_5:10;
L783: ( Sum ( Len ( C65 | D104 ) ) ) = ( D105 + ( len ( C65 . D104 ) ) ) by L782 , L769 , L768 , RVSUM_1:74;
L784: D105 < D103 by L766 , MATRIXJ1:7;
L785: ( D103 -' D105 ) = ( D103 - D105 ) by L784 , XREAL_1:233;
L786: ( D103 -' D105 ) <> ( 0 ) by L785 , L766 , MATRIXJ1:7;
L787:
now
let R5 being Nat;
assume L788: ( D103 + R5 ) <= ( Sum ( Len ( C65 | D104 ) ) );
L789: ( ( D103 + R5 ) - D105 ) <= ( ( D105 + ( len ( C65 . D104 ) ) ) - D105 ) by L788 , L783 , XREAL_1:9;
L790: 1 <= ( ( D103 -' D105 ) + R5 ) by L786 , NAT_1:14;
L791: ( ( D103 -' D105 ) + R5 ) in ( Seg ( ( Len C65 ) /. D104 ) ) by L790 , L779 , L785 , L768 , L789;
L792: ( min (( Len C65 ) , ( ( ( D103 -' D105 ) + R5 ) + ( Sum ( ( Len C65 ) | ( D104 -' 1 ) ) ) )) ) = D104 by L791 , L767 , MATRIXJ1:10;
thus L793: ( min (( Len C65 ) , ( D103 + R5 )) ) = D104 by L792 , L785;
end;
L794: (for R5 being Nat holds (S7[ R5 ] implies S7[ ( R5 + 1 ) ]))
proof
let R5 being Nat;
assume that
L795: S7[ R5 ];
set D106 = ( R5 + 1 );
L796: ((the carrier of R11) = ( dom ( D101 |^ D106 ) ) & ( D103 + D106 ) = ( ( D103 + R5 ) + 1 )) by FUNCT_2:def 1;
assume L797: ( D103 + D106 ) < ( Sum ( Len ( C65 | D104 ) ) );
L798: (( D103 + D106 ) < ( Sum ( Len ( C65 | ( min (( Len C65 ) , ( D103 + D106 )) ) ) ) ) & ( D103 + D106 ) in ( dom R17 )) by L797 , L770 , L787;
L799: ( D101 . ( R17 /. ( D103 + D106 ) ) ) = ( ( ( 0. R8 ) * ( R17 /. ( D103 + D106 ) ) ) + ( R17 /. ( ( D103 + D106 ) + 1 ) ) ) by L798 , L749 , L699
.= ( ( 0. R11 ) + ( R17 /. ( ( D103 + D106 ) + 1 ) ) ) by VECTSP_1:14
.= ( R17 /. ( ( D103 + D106 ) + 1 ) ) by RLVECT_1:def 4;
thus L800: ( ( D101 |^ ( D106 + 1 ) ) . ( R17 /. D103 ) ) = ( ( ( D101 |^ 1 ) * ( D101 |^ D106 ) ) . ( R17 /. D103 ) ) by VECTSP11:20
.= ( ( D101 |^ 1 ) . ( R17 /. ( D103 + D106 ) ) ) by L795 , L797 , L796 , FUNCT_1:13 , NAT_1:13
.= ( R17 /. ( ( D103 + D106 ) + 1 ) ) by L799 , VECTSP11:19;
end;
L801: D103 <= ( Sum ( ( Len C65 ) | D104 ) ) by L766 , MATRIXJ1:def 1;
L802: ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) = ( ( Sum ( Len ( C65 | D104 ) ) ) - D103 ) by L801 , L769 , XREAL_1:233;
L803: S7[ ( 0 ) ]
proof
assume L804: ( D103 + ( 0 ) ) < ( Sum ( Len ( C65 | D104 ) ) );
L805: ( D101 . ( R17 /. D103 ) ) = ( ( ( 0. R8 ) * ( R17 /. D103 ) ) + ( R17 /. ( D103 + 1 ) ) ) by L804 , L749 , L765 , L699
.= ( ( 0. R11 ) + ( R17 /. ( D103 + 1 ) ) ) by VECTSP_1:14
.= ( R17 /. ( D103 + 1 ) ) by RLVECT_1:def 4;
thus L806: thesis by L805 , VECTSP11:19;
end;
L807: (for R5 being Nat holds S7[ R5 ]) from NAT_1:sch 2(L803 , L794);
L808: S6[ ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) ]
proof
per cases ;
suppose L809: ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) = ( 0 );

L810: ( D101 . ( R17 /. D103 ) ) = ( ( 0. R8 ) * ( R17 /. D103 ) ) by L809 , L749 , L765 , L802 , L699
.= ( 0. R11 ) by VECTSP_1:14;
thus L811: thesis by L810 , L809 , VECTSP11:19;
end;
suppose L812: ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) > ( 0 );

reconsider D107 = ( ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) - 1 ) as (Element of ( NAT )) by L812 , NAT_1:20;
L813: (the carrier of R11) = ( dom ( D101 |^ ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) ) ) by FUNCT_2:def 1;
L814: ( ( Sum ( Len ( C65 | D104 ) ) ) - 1 ) < ( ( Sum ( Len ( C65 | D104 ) ) ) - ( 0 ) ) by XREAL_1:10;
L815: ( ( D101 |^ ( D107 + 1 ) ) . ( R17 /. D103 ) ) = ( R17 /. ( ( D103 + D107 ) + 1 ) ) by L814 , L802 , L807
.= ( R17 /. ( Sum ( Len ( C65 | D104 ) ) ) ) by L802;
L816: ( ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) + D103 ) = ( Sum ( Len ( C65 | D104 ) ) ) by L802;
L817: (( Sum ( Len ( C65 | D104 ) ) ) in ( dom R17 ) & ( min (( Len C65 ) , ( Sum ( Len ( C65 | D104 ) ) )) ) = D104) by L816 , L770 , L787;
L818: ( D101 . ( R17 /. ( Sum ( Len ( C65 | D104 ) ) ) ) ) = ( ( 0. R8 ) * ( R17 /. ( Sum ( Len ( C65 | D104 ) ) ) ) ) by L817 , L749 , L699
.= ( 0. R11 ) by VECTSP_1:14;
thus L819: ( ( D101 |^ ( ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) + 1 ) ) . ( R17 /. D103 ) ) = ( ( ( D101 |^ 1 ) * ( D101 |^ ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) ) ) . ( R17 /. D103 ) ) by VECTSP11:20
.= ( ( D101 |^ 1 ) . ( ( D101 |^ ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) ) . ( R17 /. D103 ) ) ) by L813 , FUNCT_1:13
.= ( 0. R11 ) by L815 , L818 , VECTSP11:19;
end;
end;
L821: ( D105 - D103 ) < ( D103 - D103 ) by L784 , XREAL_1:9;
L822: ( ( len ( C65 . D104 ) ) + ( D105 - D103 ) ) < ( ( len ( C65 . D104 ) ) + ( 0 ) ) by L821 , XREAL_1:6;
L823: ( 0 ) < R3 by L822 , L750 , L762 , L767 , L802 , L783;
reconsider D108 = ( R3 - 1 ) as (Element of ( NAT )) by L823 , NAT_1:20;
L824: ( len ( C65 . D104 ) ) <= R3 by L750 , L762 , L767;
L825: ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) < ( D108 + 1 ) by L824 , L802 , L783 , L822 , XXREAL_0:2;
L826: ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) <= D108 by L825 , NAT_1:13;
L827: (for R5 being Nat holds (( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) <= R5 implies (S6[ R5 ] implies S6[ ( R5 + 1 ) ])))
proof
let R5 being Nat;
assume that
L828: ( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) <= R5;
set D109 = ( R5 + 1 );
assume L829: S6[ R5 ];
L830: ( dom ( D101 |^ D109 ) ) = (the carrier of R11) by FUNCT_2:def 1;
thus L831: ( ( D101 |^ ( D109 + 1 ) ) . ( R17 /. D103 ) ) = ( ( ( D101 |^ 1 ) * ( D101 |^ D109 ) ) . ( R17 /. D103 ) ) by VECTSP11:20
.= ( ( D101 |^ 1 ) . ( ( D101 |^ D109 ) . ( R17 /. D103 ) ) ) by L830 , FUNCT_1:13
.= ( D101 . ( 0. R11 ) ) by L829 , VECTSP11:19
.= ( D101 . ( ( 0. R8 ) * ( 0. R11 ) ) ) by VECTSP_1:14
.= ( ( 0. R8 ) * ( D101 . ( 0. R11 ) ) ) by MOD_2:def 2
.= ( 0. R11 ) by VECTSP_1:14;
end;
L832: (for R5 being Nat holds (( ( Sum ( Len ( C65 | D104 ) ) ) -' D103 ) <= R5 implies S6[ R5 ])) from NAT_1:sch 8(L808 , L827);
L833: ( ( D101 |^ ( D108 + 1 ) ) . ( R17 /. D103 ) ) = ( 0. R11 ) by L832 , L826;
thus L834: ( ( D100 * R17 ) . R6 ) = ( D100 . ( R17 . R6 ) ) by L765 , FUNCT_1:13
.= ( D100 . ( R17 /. R6 ) ) by L765 , PARTFUN1:def 6
.= ( ( (the carrier of R11) --> ( 0. R11 ) ) . ( R17 /. R6 ) ) by GRCAT_1:def 7
.= ( 0. R11 ) by FUNCOP_1:7
.= ( D102 . ( R17 . D103 ) ) by L765 , L833 , PARTFUN1:def 6
.= ( ( D102 * R17 ) . R6 ) by L765 , FUNCT_1:13;
end;
L835: (( dom ( D100 * R17 ) ) = ( dom R17 ) & ( dom ( D102 * R17 ) ) = ( dom R17 )) by L752 , L751 , RELAT_1:27;
thus L836: thesis by L835 , L761 , L764 , FUNCT_1:2 , MATRLIN:22;
end;
end;
L838: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for B46 being (FinSequence_of_Jordan_block of R10 , R8) holds (for B47 being (Matrix of ( len R17 ) , ( len R17 ) , R8) holds ((B47 = ( block_diagonal (B46 , ( 0. R8 )) ) & ( len R17 ) <> ( 0 )) implies (( ( ( Mx2Tran (B47 , R17 , R17) ) |^ R4 ) . ( R17 /. ( Sum ( Len ( B46 | ( min (( Len B46 ) , ( len R17 )) ) ) ) ) ) ) = ( ( ( power R8 ) . (R10 , R4) ) * ( R17 /. ( Sum ( Len ( B46 | ( min (( Len B46 ) , ( len R17 )) ) ) ) ) ) ) & ( Sum ( Len ( B46 | ( min (( Len B46 ) , ( len R17 )) ) ) ) ) in ( dom R17 ))))))))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
let R11 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let C67 being (FinSequence_of_Jordan_block of R10 , R8);
set D110 = ( len R17 );
set D111 = ( min (( Len C67 ) , D110) );
set D112 = ( Sum ( Len ( C67 | D111 ) ) );
L839: ( Seg D110 ) = ( dom R17 ) by FINSEQ_1:def 3;
let C68 being (Matrix of ( len R17 ) , ( len R17 ) , R8);
assume that
L840: C68 = ( block_diagonal (C67 , ( 0. R8 )) );
L841: (( len R17 ) = ( len C68 ) & ( len C68 ) = ( Sum ( Len C67 ) )) by L840 , MATRIX_1:24;
set D113 = ( Mx2Tran (C68 , R17 , R17) );
defpred S8[ Nat ] means ( ( D113 |^ $1 ) . ( R17 /. D112 ) ) = ( ( ( power R8 ) . (R10 , $1) ) * ( R17 /. D112 ) );
L842: ( ( D113 |^ ( 0 ) ) . ( R17 /. D112 ) ) = ( ( id R11 ) . ( R17 /. D112 ) ) by VECTSP11:18
.= ( R17 /. D112 ) by FUNCT_1:18
.= ( ( 1_ R8 ) * ( R17 /. D112 ) ) by VECTSP_1:def 17
.= ( ( ( power R8 ) . (R10 , ( 0 )) ) * ( R17 /. D112 ) ) by GROUP_1:def 7;
L843: S8[ ( 0 ) ] by L842;
L844: (( Sum ( ( Len C67 ) | D111 ) ) = D112 & ( ( Len C67 ) | ( len ( Len C67 ) ) ) = ( Len C67 )) by FINSEQ_1:58 , MATRIXJ1:17;
assume L845: D110 <> ( 0 );
L846: D110 in ( Seg D110 ) by L845 , FINSEQ_1:3;
L847: D111 in ( dom ( Len C67 ) ) by L846 , L841 , MATRIXJ1:def 1;
L848: D111 <= ( len ( Len C67 ) ) by L847 , FINSEQ_3:25;
L849: ( Sum ( ( Len C67 ) | D111 ) ) <= ( Sum ( ( Len C67 ) | ( len ( Len C67 ) ) ) ) by L848 , POLYNOM3:18;
L850: D110 <= ( Sum ( ( Len C67 ) | D111 ) ) by L841 , L846 , MATRIXJ1:def 1;
L851: D110 = D112 by L850 , L841 , L849 , L844 , XXREAL_0:1;
L852: ( D113 . ( R17 /. D112 ) ) = ( R10 * ( R17 /. D112 ) ) by L851 , L840 , L846 , L839 , L699;
L853: (for R4 being Nat holds (S8[ R4 ] implies S8[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L854: S8[ R4 ];
L855: ( dom ( D113 |^ R4 ) ) = (the carrier of R11) by FUNCT_2:def 1;
L856: R4 in ( NAT ) by ORDINAL1:def 12;
thus L857: ( ( D113 |^ ( R4 + 1 ) ) . ( R17 /. D112 ) ) = ( ( ( D113 |^ 1 ) * ( D113 |^ R4 ) ) . ( R17 /. D112 ) ) by VECTSP11:20
.= ( ( D113 * ( D113 |^ R4 ) ) . ( R17 /. D112 ) ) by VECTSP11:19
.= ( D113 . ( ( ( power R8 ) . (R10 , R4) ) * ( R17 /. D112 ) ) ) by L854 , L855 , FUNCT_1:13
.= ( ( ( power R8 ) . (R10 , R4) ) * ( R10 * ( R17 /. D112 ) ) ) by L852 , MOD_2:def 2
.= ( ( ( ( power R8 ) . (R10 , R4) ) * R10 ) * ( R17 /. D112 ) ) by VECTSP_1:def 16
.= ( ( ( power R8 ) . (R10 , ( R4 + 1 )) ) * ( R17 /. D112 ) ) by L856 , GROUP_1:def 7;
end;
L858: (for R4 being Nat holds S8[ R4 ]) from NAT_1:sch 2(L843 , L853);
thus L859: thesis by L858 , L841 , L846 , L839 , L850 , L849 , L844 , XXREAL_0:1;
end;
theorem
L860: (for R8 being Field holds (for R10 being (Element of R8) holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for B48 being (FinSequence_of_Jordan_block of R10 , R8) holds (for B49 being (Matrix of ( len R17 ) , ( len R17 ) , R8) holds (B49 = ( block_diagonal (B48 , ( 0. R8 )) ) implies (( Mx2Tran (B49 , R17 , R17) ) is  nilpotent iff (( len R17 ) = ( 0 ) or R10 = ( 0. R8 ))))))))))
proof
let R8 being Field;
let R10 being (Element of R8);
let R11 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let C69 being (FinSequence_of_Jordan_block of R10 , R8);
let C70 being (Matrix of ( len R17 ) , ( len R17 ) , R8);
assume that
L861: C70 = ( block_diagonal (C69 , ( 0. R8 )) );
set D114 = ( Mx2Tran (C70 , R17 , R17) );
thus L862: (D114 is  nilpotent implies (( len R17 ) = ( 0 ) or R10 = ( 0. R8 )))
proof
set D115 = ( len R17 );
set D116 = ( min (( Len C69 ) , D115) );
set D117 = ( Sum ( Len ( C69 | D116 ) ) );
assume L863: D114 is  nilpotent;
reconsider D118 = D114 as  nilpotent (linear-transformation of R11 , R11) by L863;
L864: ( rng R17 ) is (Basis of R11) by MATRLIN:def 2;
L865: ( rng R17 ) is  linearly-independent  linearly-independent  linearly-independent  linearly-independent (Subset of R11) by L864 , VECTSP_7:def 3;
assume L866: D115 <> ( 0 );
L867: D117 in ( dom R17 ) by L866 , L861 , L838;
L868: (( R17 . D117 ) in ( rng R17 ) & ( R17 /. D117 ) = ( R17 . D117 )) by L867 , FUNCT_1:def 3 , PARTFUN1:def 6;
L869: ( R17 /. D117 ) <> ( 0. R11 ) by L868 , L865 , VECTSP_7:2;
L870: ( ( ( power R8 ) . (R10 , ( deg D118 )) ) * ( R17 /. D117 ) ) = ( ( D118 |^ ( deg D118 ) ) . ( R17 /. D117 ) ) by L861 , L866 , L838
.= ( ( ZeroMap (R11 , R11) ) . ( R17 /. D117 ) ) by L480
.= ( ( (the carrier of R11) --> ( 0. R11 ) ) . ( R17 /. D117 ) ) by GRCAT_1:def 7
.= ( 0. R11 ) by FUNCOP_1:7
.= ( ( 0. R8 ) * ( R17 /. D117 ) ) by VECTSP_1:14;
L871: ( 0. R8 ) = ( ( power R8 ) . (R10 , ( deg D118 )) ) by L870 , L869 , VECTSP10:4
.= ( Product ( ( deg D118 ) |-> R10 ) ) by MATRIXJ1:5;
L872: (ex B50 being (Element of ( NAT )) st (B50 in ( dom ( ( deg D118 ) |-> R10 ) ) & ( ( ( deg D118 ) |-> R10 ) . B50 ) = ( 0. R8 ))) by L871 , FVSUM_1:82;
L873: ( dom ( ( deg D118 ) |-> R10 ) ) = ( Seg ( deg D118 ) ) by FINSEQ_2:124;
thus L874: thesis by L873 , L872 , FINSEQ_2:57;
end;

assume L875: (( len R17 ) = ( 0 ) or R10 = ( 0. R8 ));
per cases  by L875;
suppose L876: ( len R17 ) = ( 0 );

L877: ( dim R11 ) = ( 0 ) by L876 , MATRLIN2:21;
L878: ( (Omega). R11 ) = ( (0). R11 ) by L877 , VECTSP_9:29;
L879: (the carrier of R11) = { ( 0. R11 ) } by L878 , VECTSP_4:def 3;
L880: ( rng ( D114 |^ 1 ) ) c= (the carrier of R11) by RELAT_1:def 19;
L881: ( rng ( D114 |^ 1 ) ) = { ( 0. R11 ) } by L880 , L879 , ZFMISC_1:33;
L882: ( D114 |^ 1 ) = ( ( dom ( D114 |^ 1 ) ) --> ( 0. R11 ) ) by L881 , FUNCOP_1:9
.= ( (the carrier of R11) --> ( 0. R11 ) ) by FUNCT_2:def 1
.= ( ZeroMap (R11 , R11) ) by GRCAT_1:def 7;
thus L883: thesis by L882 , L458;
end;
suppose L884: R10 = ( 0. R8 );

L885:
now
L886: ( dom C69 ) = ( dom ( Len C69 ) ) by MATRIXJ1:def 3;
let R1 being Nat;
assume that
L887: R1 in ( dom C69 );
L888: ( len ( C69 . R1 ) ) = ( ( Len C69 ) . R1 ) by L887 , L886 , MATRIXJ1:def 3;
thus L889: ( len ( C69 . R1 ) ) <= ( Sum ( Len C69 ) ) by L888 , L887 , L886 , POLYNOM3:4;
end;
L890: ( D114 |^ ( Sum ( Len C69 ) ) ) = ( ZeroMap (R11 , R11) ) by L885 , L861 , L884 , L748;
thus L891: thesis by L890 , L458;
end;
end;
theorem
L893: (for R8 being Field holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for B51 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8) holds (for B52 being (Matrix of ( len R17 ) , ( len R17 ) , R8) holds ((B52 = ( block_diagonal (B51 , ( 0. R8 )) ) & ( len R17 ) > ( 0 )) implies (for B53 being  nilpotent (Function of R11 , R11) holds (B53 = ( Mx2Tran (B52 , R17 , R17) ) implies ((ex R1 being Nat st (R1 in ( dom B51 ) & ( len ( B51 . R1 ) ) = ( deg B53 ))) & (for R1 being Nat holds (R1 in ( dom B51 ) implies ( len ( B51 . R1 ) ) <= ( deg B53 ))))))))))))
proof
let R8 being Field;
let R11 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let C71 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8);
let C72 being (Matrix of ( len R17 ) , ( len R17 ) , R8);
assume that
L894: C72 = ( block_diagonal (C71 , ( 0. R8 )) )
and
L895: ( len R17 ) > ( 0 );
L896: (( len C72 ) = ( len R17 ) & ( len C72 ) = ( Sum ( Len C71 ) )) by L894 , MATRIX_1:def 2;
defpred S9[ Nat ] means (for R1 being Nat holds (R1 in ( dom C71 ) implies ( len ( C71 . R1 ) ) <= $1));
set D119 = ( min (( Len C71 ) , ( len R17 )) );
L897: ( dom C71 ) = ( dom ( Len C71 ) ) by MATRIXJ1:def 3;
L898:
now
let R1 being Nat;
assume that
L899: R1 in ( dom C71 );
L900: ( len ( C71 . R1 ) ) = ( ( Len C71 ) . R1 ) by L897 , L899 , MATRIXJ1:def 3;
thus L901: ( len ( C71 . R1 ) ) <= ( Sum ( Len C71 ) ) by L900 , L897 , L899 , POLYNOM3:4;
end;
L902: (ex R5 being Nat st S9[ R5 ]) by L898;
consider C73 being Nat such that L903: S9[ C73 ] and L904: (for R3 being Nat holds (S9[ R3 ] implies C73 <= R3)) from NAT_1:sch 5(L902);
L905: ( len R17 ) in ( Seg ( len R17 ) ) by L895 , FINSEQ_1:3;
L906: ( min (( Len C71 ) , ( len R17 )) ) in ( dom ( Len C71 ) ) by L905 , L896 , MATRIXJ1:def 1;
L907: (ex R1 being Nat st (R1 in ( dom C71 ) & ( len ( C71 . R1 ) ) = C73))
proof
assume L908: (for R1 being Nat holds (R1 in ( dom C71 ) implies ( len ( C71 . R1 ) ) <> C73));
L909: ( len ( C71 . D119 ) ) <= C73 by L906 , L897 , L903;
L910: ( len ( C71 . D119 ) ) < C73 by L909 , L906 , L897 , L908 , XXREAL_0:1;
reconsider D120 = ( C73 - 1 ) as (Element of ( NAT )) by L910 , NAT_1:20;
L911:
now
let R1 being Nat;
assume that
L912: R1 in ( dom C71 );
L913: ( len ( C71 . R1 ) ) <= C73 by L903 , L912;
L914: ( len ( C71 . R1 ) ) < ( D120 + 1 ) by L913 , L908 , L912 , XXREAL_0:1;
thus L915: ( len ( C71 . R1 ) ) <= D120 by L914 , NAT_1:13;
end;
L916: ( D120 + 1 ) <= D120 by L911 , L904;
thus L917: thesis by L916 , NAT_1:13;
end;
L918: ( ( Len C71 ) | ( len ( Len C71 ) ) ) = ( Len C71 ) by FINSEQ_1:58;
let C74 being  nilpotent (Function of R11 , R11);
assume that
L919: C74 = ( Mx2Tran (C72 , R17 , R17) );
consider R1 being Nat such that L920: R1 in ( dom C71 ) and L921: ( len ( C71 . R1 ) ) = C73 by L907;
L922: ( ( Len C71 ) . R1 ) = ( ( Len C71 ) /. R1 ) by L897 , L920 , PARTFUN1:def 6;
set D121 = ( Sum ( ( Len C71 ) | ( R1 -' 1 ) ) );
defpred S10[ Nat ] means (($1 in ( Seg C73 ) & $1 <> C73) implies ( ( C74 |^ $1 ) . ( R17 /. ( D121 + 1 ) ) ) = ( R17 /. ( ( D121 + $1 ) + 1 ) ));
L923: ( len ( C71 . R1 ) ) = ( ( Len C71 ) . R1 ) by L897 , L920 , MATRIXJ1:def 3;
L924: R1 <= ( len ( Len C71 ) ) by L897 , L920 , FINSEQ_3:25;
L925: ( Sum ( ( Len C71 ) | R1 ) ) <= ( Sum ( ( Len C71 ) | ( len ( Len C71 ) ) ) ) by L924 , L920 , POLYNOM3:18;
L926: (( dom R17 ) = ( Seg ( len R17 ) ) & ( Seg ( Sum ( ( Len C71 ) | R1 ) ) ) c= ( Seg ( Sum ( Len C71 ) ) )) by L925 , L918 , FINSEQ_1:5 , FINSEQ_1:def 3;
L927: 1 <= R1 by L920 , FINSEQ_3:25;
L928: ( R1 -' 1 ) = ( R1 - 1 ) by L927 , XREAL_1:233;
L929: R1 = ( ( R1 -' 1 ) + 1 ) by L928;
L930: (for R4 being Nat holds (S10[ R4 ] implies S10[ ( R4 + 1 ) ]))
proof
L931: ( ( Len C71 ) | R1 ) = ( ( ( Len C71 ) | ( R1 -' 1 ) ) ^ <* C73 *> ) by L897 , L920 , L921 , L923 , L929 , FINSEQ_5:10;
L932: ( Sum ( ( Len C71 ) | R1 ) ) = ( D121 + C73 ) by L931 , RVSUM_1:74;
let R4 being Nat;
assume that
L933: S10[ R4 ];
L934: ( ( Len C71 ) | R1 ) = ( Len ( C71 | R1 ) ) by MATRIXJ1:17;
set D122 = ( R4 + 1 );
assume that
L935: D122 in ( Seg C73 )
and
L936: D122 <> C73;
L937: D122 <= C73 by L935 , FINSEQ_1:1;
L938: D122 < C73 by L937 , L936 , XXREAL_0:1;
L939: ( D121 + D122 ) < ( Sum ( ( Len C71 ) | R1 ) ) by L938 , L932 , XREAL_1:6;
L940: (( D121 + D122 ) in ( Seg ( Sum ( ( Len C71 ) | R1 ) ) ) & ( min (( Len C71 ) , ( D121 + D122 )) ) = R1) by L897 , L920 , L921 , L923 , L922 , L935 , MATRIXJ1:10;
L941: ( C74 . ( R17 /. ( D121 + D122 ) ) ) = ( ( ( 0. R8 ) * ( R17 /. ( D121 + D122 ) ) ) + ( R17 /. ( ( D121 + D122 ) + 1 ) ) ) by L940 , L894 , L896 , L919 , L926 , L939 , L934 , L699
.= ( ( 0. R11 ) + ( R17 /. ( ( D121 + D122 ) + 1 ) ) ) by VECTSP_1:14
.= ( R17 /. ( ( D121 + D122 ) + 1 ) ) by RLVECT_1:def 4;
L942: R4 < C73 by L937 , NAT_1:13;
L943:
now
per cases  by NAT_1:14;
suppose L944: R4 = ( 0 );

thus L945: thesis by L944 , L941 , VECTSP11:19;
end;
suppose L946: R4 >= 1;

L947: ( dom ( C74 |^ R4 ) ) = (the carrier of R11) by FUNCT_2:def 1;
thus L948: ( ( C74 |^ D122 ) . ( R17 /. ( D121 + 1 ) ) ) = ( ( ( C74 |^ 1 ) * ( C74 |^ R4 ) ) . ( R17 /. ( D121 + 1 ) ) ) by VECTSP11:20
.= ( ( C74 |^ 1 ) . ( ( C74 |^ R4 ) . ( R17 /. ( D121 + 1 ) ) ) ) by L947 , FUNCT_1:13
.= ( R17 /. ( ( D121 + D122 ) + 1 ) ) by L933 , L942 , L941 , L946 , FINSEQ_1:1 , VECTSP11:19;
end;
end;
thus L950: thesis by L943;
end;
L951: S10[ ( 0 ) ] by FINSEQ_1:1;
L952: (for R4 being Nat holds S10[ R4 ]) from NAT_1:sch 2(L951 , L930);
L953: ( deg C74 ) >= C73
proof
set D123 = ( deg C74 );
L954: ( rng R17 ) is (Basis of R11) by MATRLIN:def 2;
L955: ( rng R17 ) is  linearly-independent  linearly-independent  linearly-independent  linearly-independent (Subset of R11) by L954 , VECTSP_7:def 3;
assume L956: D123 < C73;
L957: (1 <= ( 1 + D123 ) & ( D123 + 1 ) <= C73) by L956 , NAT_1:11 , NAT_1:13;
L958: ( D123 + 1 ) in ( Seg C73 ) by L957;
L959: ( D121 + ( D123 + 1 ) ) in ( Seg ( Sum ( ( Len C71 ) | R1 ) ) ) by L958 , L897 , L920 , L921 , L923 , L922 , MATRIXJ1:10;
L960: (( R17 /. ( ( D121 + D123 ) + 1 ) ) = ( R17 . ( ( D121 + D123 ) + 1 ) ) & ( R17 . ( ( D121 + D123 ) + 1 ) ) in ( rng R17 )) by L959 , L896 , L926 , FUNCT_1:def 3 , PARTFUN1:def 6;
L961: D123 <> ( 0 )
proof
assume L962: D123 = ( 0 );
L963: ( [#] R11 ) = { ( 0. R11 ) } by L962 , L489;
L964: ( (Omega). R11 ) = ( (0). R11 ) by L963 , VECTSP_4:def 3;
L965: ( dim R11 ) = ( 0 ) by L964 , VECTSP_9:29;
thus L966: thesis by L965 , L895 , MATRLIN2:21;
end;
L967: D123 >= 1 by L961 , NAT_1:14;
L968: D123 in ( Seg C73 ) by L967 , L956 , FINSEQ_1:1;
L969: ( R17 /. ( ( D121 + D123 ) + 1 ) ) = ( ( C74 |^ D123 ) . ( R17 /. ( D121 + 1 ) ) ) by L968 , L952 , L956
.= ( ( ZeroMap (R11 , R11) ) . ( R17 /. ( D121 + 1 ) ) ) by L480
.= ( ( (the carrier of R11) --> ( 0. R11 ) ) . ( R17 /. ( D121 + 1 ) ) ) by GRCAT_1:def 7
.= ( 0. R11 ) by FUNCOP_1:7;
thus L970: thesis by L969 , L960 , L955 , VECTSP_7:2;
end;
L971: ( C74 |^ C73 ) = ( ZeroMap (R11 , R11) ) by L894 , L919 , L903 , L748;
L972: ( deg C74 ) <= C73 by L971 , L480;
L973: ( deg C74 ) = C73 by L972 , L953 , XXREAL_0:1;
thus L974: thesis by L973 , L903 , L907;
end;
L975: (for R8 being Field holds (for B54 , B55 being (VectSp of R8) holds (for B56 being (linear-transformation of B54 , B55) holds (for B57 being (Subspace of B54) holds (for B58 being (Subspace of B55) holds (for B59 being (Function of B57 , B58) holds (B59 = ( B56 | B57 ) implies B59 is (linear-transformation of B57 , B58))))))))
proof
let R8 being Field;
let C75 , C76 being (VectSp of R8);
let C77 being (linear-transformation of C75 , C76);
let C78 being (Subspace of C75);
let C79 being (Subspace of C76);
let C80 being (Function of C78 , C79);
assume that
L976: C80 = ( C77 | C78 );
L977:
now
let C81 being (Scalar of R8);
let C82 being (Vector of C78);
thus L978: ( C80 . ( C81 * C82 ) ) = ( C81 * ( ( C77 | C78 ) . C82 ) ) by L976 , MOD_2:def 2
.= ( C81 * ( C80 . C82 ) ) by L976 , VECTSP_4:14;
end;
L979:
now
let C83 , C84 being (Vector of C78);
thus L980: ( C80 . ( C83 + C84 ) ) = ( ( ( C77 | C78 ) . C83 ) + ( ( C77 | C78 ) . C84 ) ) by L976 , VECTSP_1:def 20
.= ( ( C80 . C83 ) + ( C80 . C84 ) ) by L976 , VECTSP_4:13;
end;
L981: C80 is  additive  homogeneous by L979 , L977 , VECTSP_1:def 20 , MOD_2:def 2;
thus L982: thesis by L981;
end;
theorem
L983: (for R8 being Field holds (for R11 being  finite-dimensional (VectSp of R8) holds (for R12 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for R19 being (OrdBasis of R12) holds (for R10 being (Element of R8) holds (( len R17 ) = ( len R19 ) implies (for B60 being (linear-transformation of R11 , R12) holds ((for R1 being Nat holds (R1 in ( dom R17 ) implies (( B60 . ( R17 /. R1 ) ) = ( R10 * ( R19 /. R1 ) ) or (( R1 + 1 ) in ( dom R17 ) & ( B60 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( R19 /. ( R1 + 1 ) ) ))))) implies (ex B61 being  non-empty (FinSequence_of_Jordan_block of R10 , R8) st ( AutMt (B60 , R17 , R19) ) = ( block_diagonal (B61 , ( 0. R8 )) )))))))))))
proof
let R8 being Field;
defpred S11[ Nat ] means (for R11 being  finite-dimensional (VectSp of R8) holds (for R12 being  finite-dimensional (VectSp of R8) holds (for R17 being (OrdBasis of R11) holds (for R19 being (OrdBasis of R12) holds (for R10 being (Element of R8) holds (( len R17 ) = ( len R19 ) implies (for B62 being (linear-transformation of R11 , R12) holds (($1 = ( card { B63 where B63 is (Element of ( NAT )) : (B63 in ( dom R17 ) & ( B62 . ( R17 /. B63 ) ) = ( R10 * ( R19 /. B63 ) )) } ) & (for R1 being Nat holds (R1 in ( dom R17 ) implies (( B62 . ( R17 /. R1 ) ) = ( R10 * ( R19 /. R1 ) ) or (( R1 + 1 ) in ( dom R17 ) & ( B62 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( R19 /. ( R1 + 1 ) ) )))))) implies (ex B64 being  non-empty (FinSequence_of_Jordan_block of R10 , R8) st ( AutMt (B62 , R17 , R19) ) = ( block_diagonal (B64 , ( 0. R8 )) ))))))))));
L984: S11[ ( 0 ) ]
proof
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let R19 being (OrdBasis of R12);
let R10 being (Element of R8);
assume that
L985: ( len R17 ) = ( len R19 );
set D124 = ( len R17 );
reconsider D125 = ( {} ) as (FinSequence_of_Jordan_block of R10 , R8) by L356;
let C85 being (linear-transformation of R11 , R12);
assume that
L986: ( 0 ) = ( card { B65 where B65 is (Element of ( NAT )) : (B65 in ( dom R17 ) & ( C85 . ( R17 /. B65 ) ) = ( R10 * ( R19 /. B65 ) )) } )
and
L987: (for R1 being Nat holds (R1 in ( dom R17 ) implies (( C85 . ( R17 /. R1 ) ) = ( R10 * ( R19 /. R1 ) ) or (( R1 + 1 ) in ( dom R17 ) & ( C85 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( R19 /. ( R1 + 1 ) ) )))));
reconsider D126 = D125 as  non-empty (FinSequence_of_Jordan_block of R10 , R8);
take D126;
L988: D124 = ( 0 )
proof
assume L989: D124 <> ( 0 );
L990: D124 in ( Seg D124 ) by L989 , FINSEQ_1:3;
L991: ( dom R17 ) = ( Seg D124 ) by FINSEQ_1:def 3;
per cases  by L987 , L990 , L991;
suppose L992: ( C85 . ( R17 /. D124 ) ) = ( R10 * ( R19 /. D124 ) );

L993: D124 in { B66 where B66 is (Element of ( NAT )) : (B66 in ( dom R17 ) & ( C85 . ( R17 /. B66 ) ) = ( R10 * ( R19 /. B66 ) )) } by L992 , L990 , L991;
thus L994: thesis by L993 , L986;
end;
suppose L995: (( D124 + 1 ) in ( dom R17 ) & ( C85 . ( R17 /. D124 ) ) = ( ( R10 * ( R19 /. D124 ) ) + ( R19 /. ( D124 + 1 ) ) ));

L996: ( D124 + 1 ) <= D124 by L995 , FINSEQ_3:25;
thus L997: thesis by L996 , NAT_1:13;
end;
end;
L999: ( len ( AutMt (C85 , R17 , R19) ) ) = ( 0 ) by L988 , MATRIX_1:def 2;
L1000: ( AutMt (C85 , R17 , R19) ) = ( {} ) by L999;
thus L1001: thesis by L1000 , MATRIXJ1:22;
end;
L1002: (for R4 being Nat holds (S11[ R4 ] implies S11[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L1003: S11[ R4 ];
set D127 = ( R4 + 1 );
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let R19 being (OrdBasis of R12);
let R10 being (Element of R8);
assume that
L1004: ( len R17 ) = ( len R19 );
L1005: ( dom R17 ) = ( dom R19 ) by L1004 , FINSEQ_3:29;
set D128 = ( len R17 );
let C86 being (linear-transformation of R11 , R12);
assume that
L1006: D127 = ( card { B67 where B67 is (Element of ( NAT )) : (B67 in ( dom R17 ) & ( C86 . ( R17 /. B67 ) ) = ( R10 * ( R19 /. B67 ) )) } )
and
L1007: (for R1 being Nat holds (R1 in ( dom R17 ) implies (( C86 . ( R17 /. R1 ) ) = ( R10 * ( R19 /. R1 ) ) or (( R1 + 1 ) in ( dom R17 ) & ( C86 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( R19 /. ( R1 + 1 ) ) )))));
set D129 = { B68 where B68 is (Element of ( NAT )) : (B68 in ( dom R17 ) & ( C86 . ( R17 /. B68 ) ) = ( R10 * ( R19 /. B68 ) )) };
reconsider D130 = D129 as  finite set by L1006;
consider R6 being set such that L1008: R6 in D130 by L1006 , CARD_1:27 , XBOOLE_0:def 1;
L1009: (ex B69 being (Element of ( NAT )) st (B69 = R6 & B69 in ( dom R17 ) & ( C86 . ( R17 /. B69 ) ) = ( R10 * ( R19 /. B69 ) ))) by L1008;
L1010: ( dom R17 ) <> ( {} ) by L1009;
L1011: ( Seg D128 ) <> ( {} ) by L1010 , FINSEQ_1:def 3;
L1012: D128 <> ( 0 ) by L1011;
L1013: ( dom R17 ) = ( Seg D128 ) by FINSEQ_1:def 3;
L1014: (not ( D128 + 1 ) in ( dom R17 )) by L1013 , FINSEQ_3:8;
L1015: D128 in ( dom R17 ) by L1013 , L1012 , FINSEQ_1:3;
L1016: ( C86 . ( R17 /. D128 ) ) = ( R10 * ( R19 /. D128 ) ) by L1015 , L1007 , L1014;
L1017: D128 in D130 by L1016 , L1015;
per cases ;
suppose L1018: R4 = ( 0 );

set D131 = ( Jordan_block (R10 , D128) );
reconsider D132 = <* D131 *> as (FinSequence_of_Jordan_block of R10 , R8) by L359;
L1019:
now
L1020: ( dom D132 ) = { 1 } by FINSEQ_1:2 , FINSEQ_1:def 8;
let R6 being set;
assume L1021: R6 in ( dom D132 );
L1022: (( D132 . 1 ) = D131 & R6 = 1) by L1021 , L1020 , FINSEQ_1:def 8 , TARSKI:def 1;
thus L1023: ( D132 . R6 ) is non  empty by L1022 , L1012 , L7;
end;
reconsider D133 = D132 as  non-empty (FinSequence_of_Jordan_block of R10 , R8) by L1019 , FUNCT_1:def 9;
reconsider D134 = C86 as (Function of R11 , R12);
reconsider D135 = ( block_diagonal (D133 , ( 0. R8 )) ) as (Matrix of ( len R17 ) , ( len R19 ) , R8) by L1004 , MATRIXJ1:34;
set D136 = ( Mx2Tran (D135 , R17 , R19) );
L1024: ( block_diagonal (D133 , ( 0. R8 )) ) = D131 by MATRIXJ1:34;
L1025:
now
let R7 being set;
assume that
L1026: R7 in ( dom R17 );
reconsider D137 = R7 as (Element of ( NAT )) by L1026;
L1027: ( ( D136 * R17 ) . R7 ) = ( D136 . ( R17 . R7 ) ) by L1026 , FUNCT_1:13;
L1028: ( R17 /. D137 ) = ( R17 . D137 ) by L1026 , PARTFUN1:def 6;
L1029: ( ( D134 * R17 ) . R7 ) = ( C86 . ( R17 . R7 ) ) by L1026 , FUNCT_1:13;
L1030:
now
per cases ;
suppose L1031: D137 = D128;

thus L1032: ( ( D136 * R17 ) . R7 ) = ( R10 * ( R19 /. D128 ) ) by L1031 , L1024 , L1026 , L1027 , L1028 , L686
.= ( ( D134 * R17 ) . R7 ) by L1007 , L1015 , L1014 , L1029 , L1028 , L1031;
end;
suppose L1033: D137 <> D128;

L1034: (ex B70 being set st D130 = { B70 }) by L1006 , L1018 , CARD_2:42;
L1035: D130 = { D128 } by L1034 , L1017 , TARSKI:def 1;
L1036: (not D137 in D130) by L1035 , L1033 , TARSKI:def 1;
L1037: ( C86 . ( R17 /. D137 ) ) <> ( R10 * ( R19 /. D137 ) ) by L1036 , L1026;
L1038: ( ( D136 * R17 ) . R7 ) = ( ( R10 * ( R19 /. D137 ) ) + ( R19 /. ( D137 + 1 ) ) ) by L1024 , L1026 , L1027 , L1028 , L1033 , L686;
thus L1039: ( ( D136 * R17 ) . R7 ) = ( ( D134 * R17 ) . R7 ) by L1038 , L1007 , L1026 , L1029 , L1028 , L1037;
end;
end;
thus L1041: ( ( D134 * R17 ) . R7 ) = ( ( D136 * R17 ) . R7 ) by L1030;
end;
take D133;
L1042: ( rng R17 ) c= ( [#] R11 ) by FINSEQ_1:def 4;
L1043: ( dom D136 ) = ( [#] R11 ) by FUNCT_2:def 1;
L1044: ( dom ( D136 * R17 ) ) = ( dom R17 ) by L1043 , L1042 , RELAT_1:27;
L1045: ( dom C86 ) = ( [#] R11 ) by FUNCT_2:def 1;
L1046: ( dom ( D134 * R17 ) ) = ( dom R17 ) by L1045 , L1042 , RELAT_1:27;
L1047: C86 = D136 by L1046 , L1012 , L1044 , L1025 , FUNCT_1:2 , MATRLIN:22;
thus L1048: thesis by L1047 , MATRLIN2:36;
end;
suppose L1049: R4 <> ( 0 );

defpred S12[ Nat ] means ($1 in D130 & $1 < D128);
L1050: (ex R5 being Nat st S12[ R5 ])
proof
L1051: ( card D130 ) <> 1 by L1006 , L1049;
L1052: D130 <> { D128 } by L1051 , CARD_2:42;
consider R7 being set such that L1053: R7 in D130 and L1054: R7 <> D128 by L1052 , L1017 , ZFMISC_1:35;
consider C87 being (Element of ( NAT )) such that L1055: C87 = R7 and L1056: C87 in ( dom R17 ) and L1057: ( C86 . ( R17 /. C87 ) ) = ( R10 * ( R19 /. C87 ) ) by L1053;
take C87;
L1058: C87 <= D128 by L1056 , FINSEQ_3:25;
thus L1059: thesis by L1058 , L1053 , L1054 , L1055 , XXREAL_0:1;
end;
L1060: (for R5 being Nat holds (S12[ R5 ] implies R5 <= D128));
consider R3 being Nat such that L1061: S12[ R3 ] and L1062: (for R5 being Nat holds (S12[ R5 ] implies R5 <= R3)) from NAT_1:sch 6(L1060 , L1050);
set D138 = ( R17 | R3 );
L1063: ( len D138 ) = R3 by L1061 , FINSEQ_1:59;
set D139 = ( Jordan_block (R10 , ( D128 -' R3 )) );
reconsider D140 = <* D139 *> as (FinSequence_of_Jordan_block of R10 , R8) by L359;
set D141 = ( R17 /^ R3 );
L1064: ( len D141 ) = ( D128 - R3 ) by L1061 , RFINSEQ:def 1;
set D142 = ( R19 /^ R3 );
L1065: ( len D142 ) = ( D128 - R3 ) by L1004 , L1061 , RFINSEQ:def 1;
set D143 = ( R19 | R3 );
L1066: ( len D143 ) = R3 by L1004 , L1061 , FINSEQ_1:59;
reconsider D144 = ( rng D143 ) , D145 = ( rng D142 ) as  linearly-independent (Subset of R12) by MATRLIN2:22 , MATRLIN2:23;
reconsider D146 = ( rng D138 ) , D147 = ( rng D141 ) as  linearly-independent (Subset of R11) by MATRLIN2:22 , MATRLIN2:23;
set D148 = ( Lin D146 );
set D149 = ( Lin D144 );
set D150 = ( Lin D147 );
set D151 = ( Lin D145 );
set D152 = ( C86 .: D146 );
L1067: ( rng ( C86 | D148 ) ) = ( C86 .: (the carrier of D148) ) by RELAT_1:115;
reconsider D153 = D143 as (OrdBasis of D149) by MATRLIN2:22;
reconsider D154 = D138 as (OrdBasis of D148) by MATRLIN2:22;
L1068: ( dom D154 ) = ( dom D153 ) by L1063 , L1066 , FINSEQ_3:29;
reconsider D155 = D141 as (OrdBasis of D150) by MATRLIN2:23;
reconsider D156 = D142 as (OrdBasis of D151) by MATRLIN2:23;
L1069: R19 = ( D153 ^ D156 ) by RFINSEQ:8;
L1070: R17 = ( D154 ^ D155 ) by RFINSEQ:8;
L1071: ( dom D154 ) c= ( dom R17 ) by L1070 , FINSEQ_1:26;
L1072: (for R1 being Nat holds (R1 in ( dom D154 ) implies (( ( C86 | D148 ) . ( D154 /. R1 ) ) = ( R10 * ( D153 /. R1 ) ) or (( R1 + 1 ) in ( dom D154 ) & ( ( C86 | D148 ) . ( D154 /. R1 ) ) = ( ( R10 * ( D153 /. R1 ) ) + ( D153 /. ( R1 + 1 ) ) )))))
proof
let R1 being Nat;
assume that
L1073: R1 in ( dom D154 );
L1074: ( D154 . R1 ) = ( D154 /. R1 ) by L1073 , PARTFUN1:def 6;
set D157 = ( R1 + 1 );
L1075: ( C86 . ( D154 /. R1 ) ) = ( ( C86 | D148 ) . ( D154 /. R1 ) ) by FUNCT_1:49;
L1076: (( R19 /. R1 ) = ( R19 . R1 ) & ( R19 . R1 ) = ( D153 . R1 )) by L1005 , L1069 , L1071 , L1068 , L1073 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1077: (( R17 /. R1 ) = ( R17 . R1 ) & ( R17 . R1 ) = ( D154 . R1 )) by L1070 , L1071 , L1073 , FINSEQ_1:def 7 , PARTFUN1:def 6;
per cases  by L1007 , L1071 , L1073;
suppose L1078: ( C86 . ( R17 /. R1 ) ) = ( R10 * ( R19 /. R1 ) );

thus L1079: thesis by L1078 , L1068 , L1073 , L1076 , L1077 , L1074 , L1075 , PARTFUN1:def 6 , VECTSP_4:14;
end;
suppose L1080: (D157 in ( dom R17 ) & ( C86 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( R19 /. D157 ) ));

reconsider D158 = ( rng R19 ) as (Basis of R12) by MATRLIN:def 2;
L1081: D157 <= R3
proof
assume L1082: D157 > R3;
L1083: R1 >= R3 by L1082 , NAT_1:13;
L1084: R1 <= R3 by L1063 , L1073 , FINSEQ_3:25;
L1085: R1 = R3 by L1084 , L1083 , XXREAL_0:1;
L1086: (ex B71 being (Element of ( NAT )) st (R3 = B71 & B71 in ( dom R17 ) & ( C86 . ( R17 /. B71 ) ) = ( R10 * ( R19 /. B71 ) ))) by L1061;
L1087: ( C86 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( 0. R12 ) ) by L1086 , L1085 , RLVECT_1:def 4;
L1088: ( R19 /. D157 ) = ( 0. R12 ) by L1087 , L1080 , RLVECT_1:8;
L1089: D158 is  linearly-independent by VECTSP_7:def 3;
L1090: (( R19 /. D157 ) = ( R19 . D157 ) & ( R19 . D157 ) in D158) by L1005 , L1080 , FUNCT_1:def 3 , PARTFUN1:def 6;
thus L1091: thesis by L1090 , L1088 , L1089 , VECTSP_7:2;
end;
L1092: 1 <= D157 by NAT_1:11;
L1093: D157 in ( dom D154 ) by L1092 , L1063 , L1081 , FINSEQ_3:25;
L1094: ( D153 . D157 ) = ( D153 /. D157 ) by L1093 , L1068 , PARTFUN1:def 6;
L1095: ( R10 * ( R19 /. R1 ) ) = ( R10 * ( D153 /. R1 ) ) by L1068 , L1073 , L1076 , PARTFUN1:def 6 , VECTSP_4:14;
L1096: (( R19 /. D157 ) = ( R19 . D157 ) & ( R19 . D157 ) = ( D153 . D157 )) by L1005 , L1069 , L1071 , L1068 , L1093 , FINSEQ_1:def 7 , PARTFUN1:def 6;
thus L1097: thesis by L1096 , L1063 , L1077 , L1074 , L1075 , L1080 , L1081 , L1092 , L1094 , L1095 , FINSEQ_3:25 , VECTSP_4:13;
end;
end;
L1099: D152 c= (the carrier of D149)
proof
let R7 being set;
assume L1100: R7 in D152;
consider R6 being set such that L1101: R6 in ( dom C86 ) and L1102: R6 in D146 and L1103: ( C86 . R6 ) = R7 by L1100 , FUNCT_1:def 6;
consider C88 being set such that L1104: C88 in ( dom D154 ) and L1105: ( D154 . C88 ) = R6 by L1102 , FUNCT_1:def 3;
reconsider D159 = C88 as (Element of ( NAT )) by L1104;
L1106: ( D154 /. D159 ) = ( D154 . D159 ) by L1104 , PARTFUN1:def 6;
L1107: ( ( C86 | D148 ) . ( D154 /. D159 ) ) = R7 by L1106 , L1103 , L1105 , FUNCT_1:49;
L1108: (R7 = ( R10 * ( D153 /. D159 ) ) or R7 = ( ( R10 * ( D153 /. D159 ) ) + ( D153 /. ( D159 + 1 ) ) )) by L1107 , L1072 , L1104;
thus L1109: thesis by L1108;
end;
L1110: ((the carrier of ( Lin D152 )) = ( C86 .: (the carrier of D148) ) & ( Lin D152 ) is (Subspace of D149)) by L1099 , VECTSP11:42 , VECTSP_9:16;
L1111: ( C86 .: (the carrier of D148) ) c= (the carrier of D149) by L1110 , VECTSP_4:def 2;
reconsider D160 = ( C86 | D148 ) as (linear-transformation of D148 , D149) by L1111 , L1067 , L975 , FUNCT_2:6;
L1112: (for R1 being Nat holds (R1 in ( dom D154 ) implies (( D160 . ( D154 /. R1 ) ) = ( R10 * ( D153 /. R1 ) ) or (( R1 + 1 ) in ( dom D154 ) & ( D160 . ( D154 /. R1 ) ) = ( ( R10 * ( D153 /. R1 ) ) + ( D153 /. ( R1 + 1 ) ) ))))) by L1072;
set D161 = { B72 where B72 is (Element of ( NAT )) : (B72 in ( dom D154 ) & ( D160 . ( D154 /. B72 ) ) = ( R10 * ( D153 /. B72 ) )) };
L1113: ( D130 \ { D128 } ) c= D161
proof
let R6 being set;
assume that
L1114: R6 in ( D130 \ { D128 } );
L1115: R6 <> D128 by L1114 , ZFMISC_1:56;
L1116: R6 in D130 by L1114;
consider C89 being (Element of ( NAT )) such that L1117: C89 = R6 and L1118: C89 in ( dom R17 ) and L1119: ( C86 . ( R17 /. C89 ) ) = ( R10 * ( R19 /. C89 ) ) by L1116;
L1120: C89 <= D128 by L1118 , FINSEQ_3:25;
L1121: C89 < D128 by L1120 , L1115 , L1117 , XXREAL_0:1;
L1122: C89 <= R3 by L1121 , L1062 , L1114 , L1117;
L1123: 1 <= C89 by L1118 , FINSEQ_3:25;
L1124: C89 in ( dom D154 ) by L1123 , L1063 , L1122 , FINSEQ_3:25;
L1125: (( D154 /. C89 ) = ( D154 . C89 ) & ( D154 . C89 ) = ( R17 . C89 )) by L1124 , L1070 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1126: (( D160 . ( D154 /. C89 ) ) = ( C86 . ( D154 /. C89 ) ) & ( R17 /. C89 ) = ( R17 . C89 )) by L1071 , L1124 , FUNCT_1:49 , PARTFUN1:def 6;
L1127: (( D153 . C89 ) = ( R19 . C89 ) & ( R19 /. C89 ) = ( R19 . C89 )) by L1005 , L1069 , L1071 , L1068 , L1124 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1128: ( D160 . ( D154 /. C89 ) ) = ( R10 * ( D153 /. C89 ) ) by L1127 , L1068 , L1119 , L1124 , L1125 , L1126 , PARTFUN1:def 6 , VECTSP_4:14;
thus L1129: thesis by L1128 , L1117 , L1124;
end;
L1130: D161 c= ( D130 \ { D128 } )
proof
let R6 being set;
assume L1131: R6 in D161;
consider C90 being (Element of ( NAT )) such that L1132: R6 = C90 and L1133: C90 in ( dom D154 ) and L1134: ( D160 . ( D154 /. C90 ) ) = ( R10 * ( D153 /. C90 ) ) by L1131;
L1135: (( D154 /. C90 ) = ( D154 . C90 ) & ( D154 . C90 ) = ( R17 . C90 )) by L1070 , L1133 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1136: (( D160 . ( D154 /. C90 ) ) = ( C86 . ( D154 /. C90 ) ) & ( R17 /. C90 ) = ( R17 . C90 )) by L1071 , L1133 , FUNCT_1:49 , PARTFUN1:def 6;
L1137: (( D153 . C90 ) = ( R19 . C90 ) & ( R19 /. C90 ) = ( R19 . C90 )) by L1005 , L1069 , L1071 , L1068 , L1133 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1138: ( C86 . ( R17 /. C90 ) ) = ( R10 * ( R19 /. C90 ) ) by L1137 , L1068 , L1133 , L1134 , L1135 , L1136 , PARTFUN1:def 6 , VECTSP_4:14;
L1139: C90 in D130 by L1138 , L1071 , L1133;
L1140: C90 <= R3 by L1063 , L1133 , FINSEQ_3:25;
thus L1141: thesis by L1140 , L1061 , L1132 , L1139 , ZFMISC_1:56;
end;
L1142: D161 = ( D130 \ { D128 } ) by L1130 , L1113 , XBOOLE_0:def 10;
L1143: ( card D161 ) = R4 by L1142 , L1006 , L1017 , STIRL2_1:55;
consider C91 being  non-empty (FinSequence_of_Jordan_block of R10 , R8) such that L1144: ( AutMt (D160 , D154 , D153) ) = ( block_diagonal (C91 , ( 0. R8 )) ) by L1143 , L1003 , L1063 , L1066 , L1112;
set D162 = ( C91 ^ D140 );
L1145: ( D128 - R3 ) = ( D128 -' R3 ) by L1061 , XREAL_1:233;
L1146:
now
let R6 being set;
assume that
L1147: R6 in ( dom D162 );
reconsider D163 = R6 as Nat by L1147;
per cases  by L1147 , FINSEQ_1:25;
suppose L1148: D163 in ( dom C91 );

L1149: ( C91 . D163 ) is non  empty by L1148 , FUNCT_1:def 9;
thus L1150: ( D162 . R6 ) is non  empty by L1149 , L1148 , FINSEQ_1:def 7;
end;
suppose L1151: (ex R2 being Nat st (R2 in ( dom D140 ) & D163 = ( ( len C91 ) + R2 )));

L1152: ( len D139 ) = ( D128 -' R3 ) by L7;
L1153: ( len D139 ) <> ( 0 ) by L1152 , L1061 , L1145;
consider R2 being Nat such that L1154: R2 in ( dom D140 ) and L1155: D163 = ( ( len C91 ) + R2 ) by L1151;
L1156: ( dom D140 ) = ( Seg 1 ) by FINSEQ_1:38;
L1157: R2 = 1 by L1156 , L1154 , FINSEQ_1:2 , TARSKI:def 1;
L1158: ( D162 . D163 ) = ( D140 . 1 ) by L1157 , L1154 , L1155 , FINSEQ_1:def 7;
thus L1159: ( D162 . R6 ) is non  empty by L1158 , L1153 , FINSEQ_1:40;
end;
end;
reconsider D164 = D139 as (Matrix of ( len D155 ) , ( len D156 ) , R8) by L1004 , L1061 , L1064 , L1145 , RFINSEQ:def 1;
L1161: ( width D164 ) = ( len D155 ) by L1064 , L1065 , MATRIX_1:24;
reconsider D165 = D162 as  non-empty (FinSequence_of_Jordan_block of R10 , R8) by L1146 , FUNCT_1:def 9;
take D165;
reconsider D166 = C86 as (Function of R11 , R12);
reconsider D167 = ( block_diagonal (C91 , ( 0. R8 )) ) as (Matrix of ( len D154 ) , ( len D153 ) , R8) by L1144;
L1162: ( width D167 ) = ( len D154 ) by L1063 , L1066 , MATRIX_1:24;
L1163: (( Sum ( Len <* D167 , D164 *> ) ) = ( ( len D167 ) + ( len D164 ) ) & ( Sum ( Width <* D167 , D164 *> ) ) = ( ( width D167 ) + ( width D164 ) )) by MATRIXJ1:16 , MATRIXJ1:20;
L1164: ( len D167 ) = ( len D154 ) by L1063 , L1066 , MATRIX_1:24;
reconsider D168 = ( block_diagonal (<* D167 , D164 *> , ( 0. R8 )) ) as (Matrix of ( len R17 ) , ( len R19 ) , R8) by L1164 , L1004 , L1063 , L1064 , L1065 , L1163 , L1162 , L1161 , MATRIX_1:24;
set D169 = ( Mx2Tran (D168 , R17 , R19) );
L1165: ( dom D155 ) = ( dom D156 ) by L1064 , L1065 , FINSEQ_3:29;
L1166:
now
let R6 being set;
assume that
L1167: R6 in ( dom R17 );
reconsider D170 = R6 as (Element of ( NAT )) by L1167;
L1168: ( ( D169 * R17 ) . R6 ) = ( D169 . ( R17 . D170 ) ) by L1167 , FUNCT_1:13;
L1169: ( R17 . D170 ) = ( R17 /. D170 ) by L1167 , PARTFUN1:def 6;
L1170: ( ( D166 * R17 ) . R6 ) = ( C86 . ( R17 . D170 ) ) by L1167 , FUNCT_1:13;
L1171:
now
per cases  by L1070 , L1167 , FINSEQ_1:25;
suppose L1172: D170 in ( dom D154 );

L1173: (( D154 /. D170 ) = ( D154 . D170 ) & ( R17 . D170 ) = ( D154 . D170 )) by L1172 , L1070 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1174: ( D160 . ( D154 /. D170 ) ) = ( C86 . ( D154 /. D170 ) ) by FUNCT_1:49;
thus L1175: ( ( D169 * R17 ) . R6 ) = ( ( Mx2Tran (D167 , D154 , D153) ) . ( D154 /. D170 ) ) by L1063 , L1066 , L1064 , L1065 , L1070 , L1069 , L1162 , L1161 , L1168 , L1169 , L1172 , L597
.= ( D160 . ( D154 /. D170 ) ) by L1144 , MATRLIN2:34
.= ( ( D166 * R17 ) . R6 ) by L1167 , L1174 , L1173 , FUNCT_1:13;
end;
suppose L1176: (ex R2 being Nat st (R2 in ( dom D155 ) & D170 = ( ( len D154 ) + R2 )));

consider R2 being Nat such that L1177: R2 in ( dom D155 ) and L1178: D170 = ( ( len D154 ) + R2 ) by L1176;
L1179:
now
per cases ;
suppose L1180: R2 = ( len D155 );

L1181: (( R19 . D170 ) = ( D156 . R2 ) & ( R19 /. D170 ) = ( R19 . D170 )) by L1005 , L1063 , L1066 , L1069 , L1165 , L1167 , L1177 , L1178 , FINSEQ_1:def 7 , PARTFUN1:def 6;
thus L1182: ( ( D166 * R17 ) . R6 ) = ( R10 * ( R19 /. D170 ) ) by L1007 , L1015 , L1014 , L1063 , L1064 , L1170 , L1169 , L1178 , L1180
.= ( R10 * ( D156 /. R2 ) ) by L1165 , L1177 , L1181 , PARTFUN1:def 6 , VECTSP_4:14
.= ( ( Mx2Tran (D164 , D155 , D156) ) . ( D155 /. R2 ) ) by L1177 , L1180 , L686;
end;
suppose L1183: R2 <> ( len D155 );

L1184: ( ( D166 * R17 ) . R6 ) = ( ( R10 * ( R19 /. D170 ) ) + ( R19 /. ( D170 + 1 ) ) )
proof
assume L1185: ( ( D166 * R17 ) . R6 ) <> ( ( R10 * ( R19 /. D170 ) ) + ( R19 /. ( D170 + 1 ) ) );
L1186: ( C86 . ( R17 /. D170 ) ) = ( R10 * ( R19 /. D170 ) ) by L1185 , L1007 , L1167 , L1170 , L1169;
L1187: D170 in D130 by L1186 , L1167;
L1188: (D170 <> D128 & D170 <= D128) by L1063 , L1064 , L1167 , L1178 , L1183 , FINSEQ_3:25;
L1189: D170 < D128 by L1188 , XXREAL_0:1;
L1190: ( ( len D154 ) + R2 ) <= ( ( len D154 ) + ( 0 ) ) by L1189 , L1062 , L1063 , L1178 , L1187;
L1191: R2 <= ( 0 ) by L1190 , XREAL_1:6;
thus L1192: thesis by L1191 , L1177 , FINSEQ_3:25;
end;
L1193: R2 <= ( len D155 ) by L1177 , FINSEQ_3:25;
L1194: R2 < ( len D155 ) by L1193 , L1183 , XXREAL_0:1;
L1195: (1 <= ( R2 + 1 ) & ( R2 + 1 ) <= ( len D155 )) by L1194 , NAT_1:11 , NAT_1:13;
L1196: ( R2 + 1 ) in ( dom D155 ) by L1195 , FINSEQ_3:25;
L1197: (( D156 /. ( R2 + 1 ) ) = ( D156 . ( R2 + 1 ) ) & ( R19 . ( ( len D154 ) + ( R2 + 1 ) ) ) = ( D156 . ( R2 + 1 ) )) by L1196 , L1063 , L1066 , L1069 , L1165 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1198: ( D156 /. ( R2 + 1 ) ) = ( R19 /. ( D170 + 1 ) ) by L1197 , L1005 , L1070 , L1178 , L1196 , FINSEQ_1:28 , PARTFUN1:def 6;
L1199: (( R19 . D170 ) = ( D156 . R2 ) & ( R19 /. D170 ) = ( R19 . D170 )) by L1005 , L1063 , L1066 , L1069 , L1165 , L1167 , L1177 , L1178 , FINSEQ_1:def 7 , PARTFUN1:def 6;
L1200: ( R10 * ( D156 /. R2 ) ) = ( R10 * ( R19 /. D170 ) ) by L1199 , L1165 , L1177 , PARTFUN1:def 6 , VECTSP_4:14;
L1201: ( ( R10 * ( R19 /. D170 ) ) + ( R19 /. ( D170 + 1 ) ) ) = ( ( R10 * ( D156 /. R2 ) ) + ( D156 /. ( R2 + 1 ) ) ) by L1200 , L1198 , VECTSP_4:13
.= ( ( Mx2Tran (D164 , D155 , D156) ) . ( D155 /. R2 ) ) by L1177 , L1183 , L686;
thus L1202: ( ( D166 * R17 ) . R6 ) = ( ( Mx2Tran (D164 , D155 , D156) ) . ( D155 /. R2 ) ) by L1201 , L1184;
end;
end;
thus L1204: ( ( D166 * R17 ) . R6 ) = ( ( D169 * R17 ) . R6 ) by L1179 , L1063 , L1066 , L1064 , L1065 , L1070 , L1069 , L1162 , L1161 , L1168 , L1169 , L1177 , L1178 , L597;
end;
end;
thus L1206: ( ( D166 * R17 ) . R6 ) = ( ( D169 * R17 ) . R6 ) by L1171;
end;
L1207: ( rng R17 ) c= ( [#] R11 ) by FINSEQ_1:def 4;
L1208: ( dom D169 ) = ( [#] R11 ) by FUNCT_2:def 1;
L1209: ( dom ( D169 * R17 ) ) = ( dom R17 ) by L1208 , L1207 , RELAT_1:27;
L1210: ( dom C86 ) = ( [#] R11 ) by FUNCT_2:def 1;
L1211: ( dom ( D166 * R17 ) ) = ( dom R17 ) by L1210 , L1207 , RELAT_1:27;
L1212: (( block_diagonal (D165 , ( 0. R8 )) ) = ( block_diagonal (<* D167 , D164 *> , ( 0. R8 )) ) & C86 = D169) by L1211 , L1012 , L1209 , L1166 , FUNCT_1:2 , MATRIXJ1:35 , MATRLIN:22;
thus L1213: thesis by L1212 , MATRLIN2:36;
end;
end;
let R11 being  finite-dimensional (VectSp of R8);
let R12 being  finite-dimensional (VectSp of R8);
let R17 being (OrdBasis of R11);
let R19 being (OrdBasis of R12);
let R10 being (Element of R8);
assume that
L1215: ( len R17 ) = ( len R19 );
let C92 being (linear-transformation of R11 , R12);
assume that
L1216: (for R1 being Nat holds (R1 in ( dom R17 ) implies (( C92 . ( R17 /. R1 ) ) = ( R10 * ( R19 /. R1 ) ) or (( R1 + 1 ) in ( dom R17 ) & ( C92 . ( R17 /. R1 ) ) = ( ( R10 * ( R19 /. R1 ) ) + ( R19 /. ( R1 + 1 ) ) )))));
set D171 = { B73 where B73 is (Element of ( NAT )) : (B73 in ( dom R17 ) & ( C92 . ( R17 /. B73 ) ) = ( R10 * ( R19 /. B73 ) )) };
L1217: D171 c= ( dom R17 )
proof
let R6 being set;
assume L1218: R6 in D171;
L1219: (ex B74 being (Element of ( NAT )) st (R6 = B74 & B74 in ( dom R17 ) & ( C92 . ( R17 /. B74 ) ) = ( R10 * ( R19 /. B74 ) ))) by L1218;
thus L1220: thesis by L1219;
end;
reconsider D172 = D171 as  finite set by L1217;
L1221: (for R4 being Nat holds S11[ R4 ]) from NAT_1:sch 2(L984 , L1002);
L1222: S11[ ( card D172 ) ] by L1221;
thus L1223: thesis by L1222 , L1215 , L1216;
end;
theorem
L1224: (for R8 being Field holds (for B75 being  finite-dimensional (VectSp of R8) holds (for B76 being  nilpotent (linear-transformation of B75 , B75) holds (ex B77 being  non-empty (FinSequence_of_Jordan_block of ( 0. R8 ) , R8) st (ex B78 being (OrdBasis of B75) st ( AutMt (B76 , B78 , B78) ) = ( block_diagonal (B77 , ( 0. R8 )) ))))))
proof
let R8 being Field;
defpred S13[ Nat ] means (for B79 being  finite-dimensional (VectSp of R8) holds (for B80 being  nilpotent (linear-transformation of B79 , B79) holds (( deg B80 ) = $1 implies (ex B81 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8) st (ex B82 being (OrdBasis of B79) st (( AutMt (B80 , B82 , B82) ) = ( block_diagonal (B81 , ( 0. R8 )) ) & (for R1 being Nat holds (R1 in ( dom B81 ) implies ( ( Len B81 ) . R1 ) <> ( 0 )))))))));
let C93 being  finite-dimensional (VectSp of R8);
let C94 being  nilpotent (linear-transformation of C93 , C93);
L1225: (for R4 being Nat holds (S13[ R4 ] implies S13[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L1226: S13[ R4 ];
let C95 being  finite-dimensional (VectSp of R8);
set D173 = ( R4 + 1 );
let C96 being  nilpotent (linear-transformation of C95 , C95);
assume that
L1227: ( deg C96 ) = D173;
set D174 = the (Basis of C95);
L1228: D174 is  linearly-independent by VECTSP_7:def 3;
L1229: ( Lin D174 ) = ( the VectSpStr of C95 ) by VECTSP_7:def 3;
set D175 = ( im ( C96 |^ 1 ) );
reconsider D176 = ( C96 | D175 ) as (linear-transformation of D175 , D175) by VECTSP11:32;
reconsider D177 = D176 as  nilpotent (linear-transformation of D175 , D175) by L565;
L1230: ( ( deg D177 ) + 1 ) = D173 by L1227 , L572 , NAT_1:11;
consider C97 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8), C98 being (OrdBasis of D175) such that L1231: ( AutMt (D177 , C98 , C98) ) = ( block_diagonal (C97 , ( 0. R8 )) ) and L1232: (for R1 being Nat holds (R1 in ( dom C97 ) implies ( ( Len C97 ) . R1 ) <> ( 0 ))) by L1230 , L1226;
L1233: ( len C98 ) = ( len ( AutMt (D177 , C98 , C98) ) ) by MATRIX_1:def 2
.= ( Sum ( Len C97 ) ) by L1231 , MATRIXJ1:def 5;
L1234: ( dom C98 ) = ( Seg ( Sum ( Len C97 ) ) ) by L1233 , FINSEQ_1:def 3;
set D178 = ( len C97 );
set D179 = ( Len C97 );
set D180 = ( Sum D179 );
defpred S14[ Nat , Nat ] means ($2 in ( dom D179 ) & $2 <= $1 & ( Sum ( D179 | ( $2 -' 1 ) ) ) <= ( $1 -' $2 ));
defpred S15[ set , set ] means (for R1 being Nat holds (for R5 being Nat holds ((R1 = $1 & R5 = $2) implies (S14[ R1 , R5 ] & ( R1 -' R5 ) <= ( Sum ( D179 | R5 ) ) & (for R4 being Nat holds (S14[ R1 , R4 ] implies R4 <= R5))))));
L1235: (for R6 being set holds (R6 in ( Seg ( D180 + D178 ) ) implies (ex R7 being set st (R7 in ( NAT ) & S15[ R6 , R7 ]))))
proof
let R6 being set;
assume that
L1236: R6 in ( Seg ( D180 + D178 ) );
reconsider D181 = R6 as Nat by L1236;
L1237: D178 <> ( 0 )
proof
assume L1238: D178 = ( 0 );
L1239: D179 = ( <*> ( NAT ) ) by L1238;
thus L1240: thesis by L1239 , L1236 , L1238 , RVSUM_1:72;
end;
L1241: 1 <= D178 by L1237 , NAT_1:14;
L1242: ( 1 -' 1 ) = ( 0 ) by XREAL_1:232;
L1243: ( Sum ( D179 | ( 1 -' 1 ) ) ) = ( 0 ) by L1242 , RVSUM_1:72;
defpred S16[ Nat ] means ($1 in ( dom D179 ) & $1 <= D181 & ( Sum ( D179 | ( $1 -' 1 ) ) ) <= ( D181 -' $1 ));
L1244: (for R5 being Nat holds (S16[ R5 ] implies R5 <= D178))
proof
let R5 being Nat;
assume L1245: S16[ R5 ];
L1246: R5 <= ( len D179 ) by L1245 , FINSEQ_3:25;
thus L1247: thesis by L1246 , CARD_1:def 7;
end;
L1248: ( len D179 ) = D178 by CARD_1:def 7;
L1249: (( 0 ) <= ( D181 -' 1 ) & 1 in ( dom D179 )) by L1248 , L1241 , FINSEQ_3:25;
L1250: 1 <= D181 by L1236 , FINSEQ_1:1;
L1251: (ex R5 being Nat st S16[ R5 ]) by L1250 , L1243 , L1249;
consider R5 being Nat such that L1252: S16[ R5 ] and L1253: (for R4 being Nat holds (S16[ R4 ] implies R4 <= R5)) from NAT_1:sch 6(L1244 , L1251);
L1254: ( D181 -' R5 ) <= ( Sum ( D179 | R5 ) )
proof
assume L1255: ( D181 -' R5 ) > ( Sum ( D179 | R5 ) );
L1256: ( D181 -' R5 ) >= ( ( Sum ( D179 | R5 ) ) + 1 ) by L1255 , NAT_1:13;
L1257: ( ( D181 -' R5 ) - 1 ) >= ( ( ( Sum ( D179 | R5 ) ) + 1 ) - 1 ) by L1256 , XREAL_1:9;
L1258: ( D181 -' R5 ) = ( D181 - R5 ) by L1252 , XREAL_1:233;
L1259: ( R5 + 1 ) <= ( len D179 )
proof
assume L1260: ( R5 + 1 ) > ( len D179 );
L1261: R5 >= ( len D179 ) by L1260 , NAT_1:13;
L1262: ( D181 - R5 ) > D180 by L1261 , L1255 , L1258 , FINSEQ_1:58;
L1263: ( ( D181 - R5 ) + R5 ) > ( D180 + R5 ) by L1262 , XREAL_1:6;
L1264: ( len D179 ) = D178 by CARD_1:def 7;
L1265: ( D180 + R5 ) >= ( D180 + D178 ) by L1264 , L1261 , XREAL_1:6;
L1266: D181 > ( D180 + D178 ) by L1265 , L1263 , XXREAL_0:2;
thus L1267: thesis by L1266 , L1236 , FINSEQ_1:1;
end;
L1268: 1 <= ( R5 + 1 ) by NAT_1:14;
L1269: ( R5 + 1 ) in ( dom D179 ) by L1268 , L1259 , FINSEQ_3:25;
L1270: ( D181 -' R5 ) >= 1 by L1255 , NAT_1:14;
L1271: ( ( D181 - R5 ) + R5 ) >= ( 1 + R5 ) by L1270 , L1258 , XREAL_1:6;
L1272: ( D181 -' ( R5 + 1 ) ) = ( D181 - ( R5 + 1 ) ) by L1271 , XREAL_1:233;
L1273: ( Sum ( D179 | ( ( R5 + 1 ) -' 1 ) ) ) <= ( D181 -' ( R5 + 1 ) ) by L1272 , L1257 , L1258 , NAT_D:34;
L1274: ( R5 + 1 ) <= R5 by L1273 , L1253 , L1271 , L1269;
thus L1275: thesis by L1274 , NAT_1:13;
end;
take R5;
thus L1276: R5 in ( NAT ) by ORDINAL1:def 12;
let C99 , C100 being Nat;
assume L1277: (C99 = R6 & C100 = R5);
thus L1278: thesis by L1277 , L1252 , L1253 , L1254;
end;
consider C101 being (Function of ( Seg ( D180 + D178 ) ) , ( NAT )) such that L1279: (for R6 being set holds (R6 in ( Seg ( D180 + D178 ) ) implies S15[ R6 , ( C101 . R6 ) ])) from FUNCT_2:sch 1(L1235);
defpred S17[ set , set ] means (for R1 being Nat holds (for R5 being Nat holds ((R1 = $1 & R5 = ( C101 . R1 )) implies ((( R1 -' R5 ) = ( Sum ( D179 | ( R5 -' 1 ) ) ) implies (( C96 . $2 ) = ( C98 . ( ( R1 -' R5 ) + 1 ) ) & ( ( R1 -' R5 ) + 1 ) in ( dom C98 ))) & (( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) ) implies ($2 = ( C98 . ( R1 -' R5 ) ) & ( R1 -' R5 ) in ( dom C98 ) & ( min (D179 , ( R1 -' R5 )) ) = R5 & (( R1 -' R5 ) < ( Sum ( D179 | R5 ) ) implies (( C96 . $2 ) = ( C98 . ( ( R1 -' R5 ) + 1 ) ) & ( ( R1 -' R5 ) + 1 ) in ( dom C98 ))) & (( R1 -' R5 ) = ( Sum ( D179 | R5 ) ) implies ( C96 . $2 ) = ( 0. C95 ))))))));
L1280: ( dom C101 ) = ( Seg ( D180 + D178 ) ) by FUNCT_2:def 1;
L1281: D177 = ( Mx2Tran (( AutMt (D177 , C98 , C98) ) , C98 , C98) ) by MATRLIN2:34;
L1282: (for R6 being set holds (R6 in ( Seg ( D180 + D178 ) ) implies (ex R7 being set st (R7 in (the carrier of C95) & S17[ R6 , R7 ]))))
proof
let R6 being set;
assume that
L1283: R6 in ( Seg ( D180 + D178 ) );
reconsider D182 = R6 as Nat by L1283;
L1284: ( C101 . D182 ) = ( C101 /. D182 ) by L1280 , L1283 , PARTFUN1:def 6;
reconsider D183 = ( C101 . D182 ) as (Element of ( NAT )) by L1284;
L1285: ( D182 -' D183 ) <= ( Sum ( D179 | D183 ) ) by L1279 , L1283;
L1286: S14[ D182 , D183 ] by L1279 , L1283;
L1287: ( D179 . D183 ) = ( len ( C97 . D183 ) ) by L1286 , MATRIXJ1:def 3;
L1288: D183 <= ( len D179 ) by L1286 , FINSEQ_3:25;
L1289: ( Sum ( D179 | D183 ) ) <= ( Sum ( D179 | ( len D179 ) ) ) by L1288 , POLYNOM3:18;
L1290: 1 <= D183 by L1286 , FINSEQ_3:25;
L1291: ( D183 -' 1 ) = ( D183 - 1 ) by L1290 , XREAL_1:233;
L1292: D183 = ( ( D183 -' 1 ) + 1 ) by L1291;
L1293: ( D179 | D183 ) = ( ( D179 | ( D183 -' 1 ) ) ^ <* ( D179 . D183 ) *> ) by L1292 , L1286 , FINSEQ_5:10;
L1294: (( dom D179 ) = ( dom C97 ) & ( Sum ( D179 | D183 ) ) = ( ( Sum ( D179 | ( D183 -' 1 ) ) ) + ( len ( C97 . D183 ) ) )) by L1293 , L1287 , MATRIXJ1:def 3 , RVSUM_1:74;
L1295: ( D179 | ( len D179 ) ) = D179 by FINSEQ_1:58;
per cases ;
suppose L1296: ( D182 -' D183 ) = ( Sum ( D179 | ( D183 -' 1 ) ) );

L1297: (( C98 /. ( ( D182 -' D183 ) + 1 ) ) in D175 & ( C98 /. ( ( D182 -' D183 ) + 1 ) ) is (Element of C95)) by STRUCT_0:def 5 , VECTSP_4:10;
consider C102 being (Element of C95) such that L1298: ( ( C96 |^ 1 ) . C102 ) = ( C98 /. ( ( D182 -' D183 ) + 1 ) ) by L1297 , RANKNULL:13;
take C102;
thus L1299: C102 in (the carrier of C95);
L1300: ( D182 -' D183 ) <> ( Sum ( D179 | D183 ) ) by L1232 , L1286 , L1287 , L1294 , L1296;
L1301: ( D182 -' D183 ) < ( Sum ( D179 | D183 ) ) by L1300 , L1285 , XXREAL_0:1;
L1302: ( ( D182 -' D183 ) + 1 ) <= ( Sum ( D179 | D183 ) ) by L1301 , NAT_1:13;
L1303: (1 <= ( ( D182 -' D183 ) + 1 ) & ( ( D182 -' D183 ) + 1 ) <= D180) by L1302 , L1289 , L1295 , NAT_1:11 , XXREAL_0:2;
L1304: ( ( D182 -' D183 ) + 1 ) in ( dom C98 ) by L1303 , L1234;
L1305: ( C98 /. ( ( D182 -' D183 ) + 1 ) ) = ( C98 . ( ( D182 -' D183 ) + 1 ) ) by L1304 , PARTFUN1:def 6;
thus L1306: thesis by L1305 , L1234 , L1296 , L1303 , L1298 , VECTSP11:19;
end;
suppose L1307: ( D182 -' D183 ) <> ( Sum ( D179 | ( D183 -' 1 ) ) );

take D184 = ( C98 /. ( D182 -' D183 ) );
L1308: D184 in D175 by STRUCT_0:def 5;
L1309: D184 in C95 by L1308 , VECTSP_4:9;
thus L1310: D184 in (the carrier of C95) by L1309 , STRUCT_0:def 5;
L1311: ( D182 -' D183 ) > ( Sum ( D179 | ( D183 -' 1 ) ) ) by L1286 , L1307 , XXREAL_0:1;
L1312: 1 <= ( D182 -' D183 ) by L1311 , NAT_1:14;
L1313: ( D182 -' D183 ) <= D180 by L1285 , L1289 , L1295 , XXREAL_0:2;
L1314: ( D182 -' D183 ) in ( dom C98 ) by L1313 , L1234 , L1312;
L1315: ( D182 -' D183 ) <= ( Sum ( D179 | D183 ) ) by L1279 , L1283;
L1316: ( min (D179 , ( D182 -' D183 )) ) <= D183 by L1315 , L1234 , L1314 , MATRIXJ1:def 1;
L1317: ( min (D179 , ( D182 -' D183 )) ) = D183
proof
assume L1318: ( min (D179 , ( D182 -' D183 )) ) <> D183;
L1319: ( min (D179 , ( D182 -' D183 )) ) < ( ( D183 -' 1 ) + 1 ) by L1318 , L1291 , L1316 , XXREAL_0:1;
L1320: ( min (D179 , ( D182 -' D183 )) ) <= ( D183 -' 1 ) by L1319 , NAT_1:13;
L1321: ( Sum ( D179 | ( min (D179 , ( D182 -' D183 )) ) ) ) <= ( Sum ( D179 | ( D183 -' 1 ) ) ) by L1320 , POLYNOM3:18;
L1322: ( D182 -' D183 ) <= ( Sum ( D179 | ( min (D179 , ( D182 -' D183 )) ) ) ) by L1234 , L1314 , MATRIXJ1:def 1;
L1323: ( D182 -' D183 ) <= ( Sum ( D179 | ( D183 -' 1 ) ) ) by L1322 , L1321 , XXREAL_0:2;
thus L1324: thesis by L1323 , L1286 , L1307 , XXREAL_0:1;
end;
L1325: ( Len ( C97 | D183 ) ) = ( D179 | D183 ) by MATRIXJ1:17;
L1326:
now
assume L1327: ( D182 -' D183 ) = ( Sum ( D179 | D183 ) );
L1328: ( C96 . ( C98 /. ( D182 -' D183 ) ) ) = ( D177 . ( C98 /. ( D182 -' D183 ) ) ) by FUNCT_1:49
.= ( ( 0. R8 ) * ( C98 /. ( D182 -' D183 ) ) ) by L1231 , L1281 , L1314 , L1317 , L1325 , L1327 , L699
.= ( 0. D175 ) by VECTSP_1:14
.= ( 0. C95 ) by VECTSP_4:11;
thus L1329: ( C96 . D184 ) = ( 0. C95 ) by L1328;
end;
L1330:
now
assume L1331: ( D182 -' D183 ) < ( Sum ( D179 | D183 ) );
L1332: ( ( D182 -' D183 ) + 1 ) <= ( Sum ( D179 | D183 ) ) by L1331 , NAT_1:13;
L1333: (1 <= ( ( D182 -' D183 ) + 1 ) & ( ( D182 -' D183 ) + 1 ) <= D180) by L1332 , L1289 , L1295 , NAT_1:11 , XXREAL_0:2;
L1334: ( ( D182 -' D183 ) + 1 ) in ( dom C98 ) by L1333 , L1234;
L1335: ( C96 . ( C98 /. ( D182 -' D183 ) ) ) = ( D177 . ( C98 /. ( D182 -' D183 ) ) ) by FUNCT_1:49
.= ( ( ( 0. R8 ) * ( C98 /. ( D182 -' D183 ) ) ) + ( C98 /. ( ( D182 -' D183 ) + 1 ) ) ) by L1231 , L1281 , L1314 , L1317 , L1325 , L1331 , L699
.= ( ( 0. D175 ) + ( C98 /. ( ( D182 -' D183 ) + 1 ) ) ) by VECTSP_1:14
.= ( C98 /. ( ( D182 -' D183 ) + 1 ) ) by RLVECT_1:def 4
.= ( C98 . ( ( D182 -' D183 ) + 1 ) ) by L1334 , PARTFUN1:def 6;
thus L1336: (( C96 . D184 ) = ( C98 . ( ( D182 -' D183 ) + 1 ) ) & ( ( D182 -' D183 ) + 1 ) in ( dom C98 )) by L1335 , L1234 , L1333;
end;
let C103 , C104 being Nat;
assume L1337: (R6 = C103 & C104 = ( C101 . C103 ));
thus L1338: thesis by L1337 , L1307 , L1314 , L1317 , L1330 , L1326 , PARTFUN1:def 6;
end;
end;
consider C105 being (Function of ( Seg ( D180 + D178 ) ) , (the carrier of C95)) such that L1340: (for R6 being set holds (R6 in ( Seg ( D180 + D178 ) ) implies S17[ R6 , ( C105 . R6 ) ])) from FUNCT_2:sch 1(L1282);
L1341: ( rng C105 ) c= (the carrier of C95) by RELAT_1:def 19;
L1342: ( dom C105 ) = ( Seg ( D180 + D178 ) ) by FUNCT_2:def 1;
reconsider D185 = C105 as FinSequence by L1342 , FINSEQ_1:def 2;
reconsider D186 = D185 as (FinSequence of C95) by L1341 , FINSEQ_1:def 4;
reconsider D187 = ( rng D186 ) as (Subset of C95) by FINSEQ_1:def 4;
L1343:
now
L1344: ( rng C98 ) is (Basis of D175) by MATRLIN:def 2;
L1345: ( rng C98 ) is  linearly-independent  linearly-independent  linearly-independent  linearly-independent (Subset of D175) by L1344 , VECTSP_7:def 3;
reconsider D188 = ( rng C98 ) as  linearly-independent (Subset of C95) by L1345 , VECTSP_9:11;
set D189 = { B83 where B83 is (Vector of C95) : (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & B83 = ( D186 . R1 ) & ( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) ) & ( R1 -' R5 ) = ( Sum ( D179 | R5 ) )))) };
set D190 = { B84 where B84 is (Vector of C95) : (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & B84 = ( D186 . R1 ) & ( R1 -' R5 ) < ( Sum ( D179 | R5 ) )))) };
L1346: D190 c= (the carrier of C95)
proof
let R6 being set;
assume L1347: R6 in D190;
L1348: (ex B85 being (Vector of C95) st (R6 = B85 & (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & B85 = ( D186 . R1 ) & ( R1 -' R5 ) < ( Sum ( D179 | R5 ) )))))) by L1347;
thus L1349: thesis by L1348;
end;
L1350: D189 c= (the carrier of C95)
proof
let R6 being set;
assume L1351: R6 in D189;
L1352: (ex B86 being (Vector of C95) st (R6 = B86 & (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & B86 = ( D186 . R1 ) & ( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) ) & ( R1 -' R5 ) = ( Sum ( D179 | R5 ) )))))) by L1351;
thus L1353: thesis by L1352;
end;
reconsider D191 = D190 , D192 = D189 as (Subset of C95) by L1350 , L1346;
let C106 being (Linear_Combination of D187);
assume that
L1354: ( Sum C106 ) = ( 0. C95 );
L1355: ( C96 | D191 ) is  one-to-one
proof
let C107 , C108 being set;
assume that
L1356: C107 in ( dom ( C96 | D191 ) )
and
L1357: C108 in ( dom ( C96 | D191 ) )
and
L1358: ( ( C96 | D191 ) . C107 ) = ( ( C96 | D191 ) . C108 );
L1359: (( ( C96 | D191 ) . C107 ) = ( C96 . C107 ) & ( ( C96 | D191 ) . C108 ) = ( C96 . C108 )) by L1356 , L1357 , FUNCT_1:47;
L1360: ( dom ( C96 | D191 ) ) = ( ( dom C96 ) /\ D191 ) by RELAT_1:61;
L1361: C107 in D191 by L1360 , L1356 , XBOOLE_0:def 4;
consider C109 being (Vector of C95) such that L1362: C107 = C109 and L1363: (ex B87 , B88 being Nat st (B87 in ( Seg ( D178 + D180 ) ) & B88 = ( C101 . B87 ) & C109 = ( D186 . B87 ) & ( B87 -' B88 ) < ( Sum ( D179 | B88 ) ))) by L1361;
consider C110 , C111 being Nat such that L1364: (C110 in ( Seg ( D178 + D180 ) ) & C111 = ( C101 . C110 )) and L1365: C109 = ( D186 . C110 ) and L1366: ( C110 -' C111 ) < ( Sum ( D179 | C111 ) ) by L1363;
L1367: C111 <= C110 by L1279 , L1364;
L1368: ( C110 -' C111 ) = ( C110 - C111 ) by L1367 , XREAL_1:233;
L1369: C111 in ( dom D179 ) by L1279 , L1364;
L1370: 1 <= C111 by L1369 , FINSEQ_3:25;
L1371: ( C111 -' 1 ) = ( C111 - 1 ) by L1370 , XREAL_1:233;
L1372: ( ( C111 -' 1 ) + 1 ) <= ( len D179 ) by L1371 , L1369 , FINSEQ_3:25;
L1373: ( C111 -' 1 ) <= ( len D179 ) by L1372 , NAT_1:13;
L1374: C98 is  one-to-one by MATRLIN:def 2;
L1375: ( dom D179 ) = ( dom C97 ) by MATRIXJ1:def 3;
L1376: (( C111 -' 1 ) in ( dom D179 ) implies ( D179 . ( C111 -' 1 ) ) <> ( 0 )) by L1375 , L1232;
L1377: C108 in D191 by L1357 , L1360 , XBOOLE_0:def 4;
consider C112 being (Vector of C95) such that L1378: C108 = C112 and L1379: (ex B89 , B90 being Nat st (B89 in ( Seg ( D178 + D180 ) ) & B90 = ( C101 . B89 ) & C112 = ( D186 . B89 ) & ( B89 -' B90 ) < ( Sum ( D179 | B90 ) ))) by L1377;
consider C113 , C114 being Nat such that L1380: (C113 in ( Seg ( D178 + D180 ) ) & C114 = ( C101 . C113 )) and L1381: C112 = ( D186 . C113 ) and L1382: ( C113 -' C114 ) < ( Sum ( D179 | C114 ) ) by L1379;
L1383: C114 <= C113 by L1279 , L1380;
L1384: ( C113 -' C114 ) = ( C113 - C114 ) by L1383 , XREAL_1:233;
L1385: C114 in ( dom D179 ) by L1279 , L1380;
L1386: 1 <= C114 by L1385 , FINSEQ_3:25;
L1387: ( C114 -' 1 ) = ( C114 - 1 ) by L1386 , XREAL_1:233;
L1388: ( ( C114 -' 1 ) + 1 ) <= ( len D179 ) by L1387 , L1385 , FINSEQ_3:25;
L1389: ( C114 -' 1 ) <= ( len D179 ) by L1388 , NAT_1:13;
L1390: (( C114 -' 1 ) in ( dom D179 ) implies ( D179 . ( C114 -' 1 ) ) <> ( 0 )) by L1232 , L1375;
per cases ;
suppose L1391: (( C110 -' C111 ) = ( Sum ( D179 | ( C111 -' 1 ) ) ) & ( C113 -' C114 ) = ( Sum ( D179 | ( C114 -' 1 ) ) ));

L1392: (( C96 . C112 ) = ( C98 . ( ( C113 -' C114 ) + 1 ) ) & ( ( C113 -' C114 ) + 1 ) in ( dom C98 )) by L1391 , L1340 , L1380 , L1381;
L1393: (( C96 . C109 ) = ( C98 . ( ( C110 -' C111 ) + 1 ) ) & ( ( C110 -' C111 ) + 1 ) in ( dom C98 )) by L1340 , L1364 , L1365 , L1391;
L1394: ( ( C110 -' C111 ) + 1 ) = ( ( C113 -' C114 ) + 1 ) by L1393 , L1358 , L1359 , L1362 , L1378 , L1374 , L1392 , FUNCT_1:def 4;
L1395: ( C111 -' 1 ) = ( C114 -' 1 ) by L1394 , L1373 , L1389 , L1376 , L1390 , L1391 , MATRIXJ1:11;
L1396: ( C110 - C111 ) = ( C113 - C111 ) by L1395 , L1383 , L1368 , L1371 , L1387 , L1391 , XREAL_1:233;
thus L1397: thesis by L1396 , L1362 , L1365 , L1378 , L1381;
end;
suppose L1398: (( C110 -' C111 ) = ( Sum ( D179 | ( C111 -' 1 ) ) ) & ( C113 -' C114 ) <> ( Sum ( D179 | ( C114 -' 1 ) ) ));

L1399: ( min (D179 , ( C113 -' C114 )) ) = C114 by L1398 , L1340 , L1380;
L1400: (( C96 . C109 ) = ( C98 . ( ( C110 -' C111 ) + 1 ) ) & ( ( C110 -' C111 ) + 1 ) in ( dom C98 )) by L1340 , L1364 , L1365 , L1398;
L1401: (( C96 . C112 ) = ( C98 . ( ( C113 -' C114 ) + 1 ) ) & ( ( C113 -' C114 ) + 1 ) in ( dom C98 )) by L1340 , L1380 , L1381 , L1382 , L1398;
L1402: ( ( C110 -' C111 ) + 1 ) = ( ( C113 -' C114 ) + 1 ) by L1401 , L1358 , L1359 , L1362 , L1378 , L1374 , L1400 , FUNCT_1:def 4;
L1403: ( C111 -' 1 ) <> ( 0 )
proof
assume L1404: ( C111 -' 1 ) = ( 0 );
L1405: ( D179 | ( C111 -' 1 ) ) = ( <*> ( REAL ) ) by L1404;
thus L1406: thesis by L1405 , L1279 , L1380 , L1398 , L1402 , RVSUM_1:72;
end;
L1407: ( C111 -' 1 ) >= 1 by L1403 , NAT_1:14;
L1408: ( C111 -' 1 ) in ( dom D179 ) by L1407 , L1373 , FINSEQ_3:25;
L1409: ( D179 . ( C111 -' 1 ) ) <> ( 0 ) by L1408 , L1232 , L1375;
thus L1410: thesis by L1409 , L1382 , L1398 , L1399 , L1402 , L1408 , MATRIXJ1:6;
end;
suppose L1411: (( C110 -' C111 ) <> ( Sum ( D179 | ( C111 -' 1 ) ) ) & ( C113 -' C114 ) = ( Sum ( D179 | ( C114 -' 1 ) ) ));

L1412: ( min (D179 , ( C110 -' C111 )) ) = C111 by L1411 , L1340 , L1364;
L1413: (( C96 . C112 ) = ( C98 . ( ( C113 -' C114 ) + 1 ) ) & ( ( C113 -' C114 ) + 1 ) in ( dom C98 )) by L1340 , L1380 , L1381 , L1411;
L1414: (( C96 . C109 ) = ( C98 . ( ( C110 -' C111 ) + 1 ) ) & ( ( C110 -' C111 ) + 1 ) in ( dom C98 )) by L1340 , L1364 , L1365 , L1366 , L1411;
L1415: ( ( C110 -' C111 ) + 1 ) = ( ( C113 -' C114 ) + 1 ) by L1414 , L1358 , L1359 , L1362 , L1378 , L1374 , L1413 , FUNCT_1:def 4;
L1416: ( C114 -' 1 ) <> ( 0 )
proof
assume L1417: ( C114 -' 1 ) = ( 0 );
L1418: ( C110 -' C111 ) = ( 0 ) by L1417 , L1411 , L1415 , RVSUM_1:72;
thus L1419: thesis by L1418 , L1279 , L1364 , L1411;
end;
L1420: ( C114 -' 1 ) >= 1 by L1416 , NAT_1:14;
L1421: ( C114 -' 1 ) in ( dom D179 ) by L1420 , L1389 , FINSEQ_3:25;
L1422: ( D179 . ( C114 -' 1 ) ) <> ( 0 ) by L1421 , L1232 , L1375;
thus L1423: thesis by L1422 , L1366 , L1411 , L1412 , L1415 , L1421 , MATRIXJ1:6;
end;
suppose L1424: (( C110 -' C111 ) <> ( Sum ( D179 | ( C111 -' 1 ) ) ) & ( C113 -' C114 ) <> ( Sum ( D179 | ( C114 -' 1 ) ) ));

L1425: ( min (D179 , ( C113 -' C114 )) ) = C114 by L1424 , L1340 , L1380;
L1426: (( C96 . C112 ) = ( C98 . ( ( C113 -' C114 ) + 1 ) ) & ( ( C113 -' C114 ) + 1 ) in ( dom C98 )) by L1340 , L1380 , L1381 , L1382 , L1424;
L1427: (( C96 . C109 ) = ( C98 . ( ( C110 -' C111 ) + 1 ) ) & ( ( C110 -' C111 ) + 1 ) in ( dom C98 )) by L1340 , L1364 , L1365 , L1366 , L1424;
L1428: ( ( C110 -' C111 ) + 1 ) = ( ( C113 -' C114 ) + 1 ) by L1427 , L1358 , L1359 , L1362 , L1378 , L1374 , L1426 , FUNCT_1:def 4;
L1429: ( C110 - C111 ) = ( C113 - C111 ) by L1428 , L1340 , L1364 , L1368 , L1384 , L1424 , L1425;
thus L1430: thesis by L1429 , L1362 , L1365 , L1378 , L1381;
end;
end;
L1432: D192 c= D188
proof
let R6 being set;
assume L1433: R6 in D192;
consider C115 being (Vector of C95) such that L1434: R6 = C115 and L1435: (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & C115 = ( D186 . R1 ) & ( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) ) & ( R1 -' R5 ) = ( Sum ( D179 | R5 ) )))) by L1433;
consider R1 being Nat, R5 being Nat such that L1436: (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & C115 = ( D186 . R1 ) & ( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) )) and L1437: ( R1 -' R5 ) = ( Sum ( D179 | R5 ) ) by L1435;
L1438: (C115 = ( C98 . ( R1 -' R5 ) ) & ( R1 -' R5 ) in ( dom C98 )) by L1340 , L1436;
thus L1439: thesis by L1438 , L1434 , FUNCT_1:def 3;
end;
L1440: ( Carrier C106 ) c= ( D192 \/ D191 )
proof
let R6 being set;
assume that
L1441: R6 in ( Carrier C106 );
reconsider D193 = R6 as (Vector of C95) by L1441;
L1442: ( Carrier C106 ) c= D187 by VECTSP_6:def 4;
consider C116 being set such that L1443: C116 in ( dom D186 ) and L1444: ( D186 . C116 ) = D193 by L1442 , L1441 , FUNCT_1:def 3;
reconsider D194 = C116 as Nat by L1443;
L1445: ( C101 . D194 ) = ( C101 /. D194 ) by L1280 , L1342 , L1443 , PARTFUN1:def 6;
reconsider D195 = ( C101 . D194 ) as (Element of ( NAT )) by L1445;
L1446: ( D194 -' D195 ) <= ( Sum ( D179 | D195 ) ) by L1279 , L1342 , L1443;
per cases  by L1446 , XXREAL_0:1;
suppose L1447: ( D194 -' D195 ) = ( Sum ( D179 | D195 ) );

L1448: S14[ D194 , D195 ] by L1279 , L1342 , L1443;
L1449: 1 <= D195 by L1448 , FINSEQ_3:25;
L1450: ( D195 -' 1 ) = ( D195 - 1 ) by L1449 , XREAL_1:233;
L1451: ( ( D195 -' 1 ) + 1 ) = D195 by L1450;
L1452: ( D179 | D195 ) = ( ( D179 | ( D195 -' 1 ) ) ^ <* ( D179 . D195 ) *> ) by L1451 , L1448 , FINSEQ_5:10;
L1453: (( dom D179 ) = ( dom C97 ) & ( D194 -' D195 ) = ( ( Sum ( D179 | ( D195 -' 1 ) ) ) + ( D179 . D195 ) )) by L1452 , L1447 , MATRIXJ1:def 3 , RVSUM_1:74;
L1454: ( D194 -' D195 ) <> ( Sum ( D179 | ( D195 -' 1 ) ) ) by L1453 , L1232 , L1448;
L1455: (D193 in D192 or D193 in D191) by L1454 , L1342 , L1443 , L1444 , L1447;
thus L1456: thesis by L1455 , XBOOLE_0:def 3;
end;
suppose L1457: ( D194 -' D195 ) < ( Sum ( D179 | D195 ) );

L1458: (D193 in D192 or D193 in D191) by L1457 , L1342 , L1443 , L1444;
thus L1459: thesis by L1458 , XBOOLE_0:def 3;
end;
end;
L1461: ( C96 .: D191 ) c= D188
proof
let R7 being set;
assume L1462: R7 in ( C96 .: D191 );
consider R6 being set such that L1463: R6 in ( dom C96 ) and L1464: R6 in D191 and L1465: R7 = ( C96 . R6 ) by L1462 , FUNCT_1:def 6;
consider C117 being (Vector of C95) such that L1466: R6 = C117 and L1467: (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & C117 = ( D186 . R1 ) & ( R1 -' R5 ) < ( Sum ( D179 | R5 ) )))) by L1464;
consider R1 being Nat, R5 being Nat such that L1468: (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & C117 = ( D186 . R1 ) & ( R1 -' R5 ) < ( Sum ( D179 | R5 ) )) by L1467;
L1469: (( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) ) or ( R1 -' R5 ) = ( Sum ( D179 | ( R5 -' 1 ) ) ));
L1470: (( C96 . C117 ) = ( C98 . ( ( R1 -' R5 ) + 1 ) ) & ( ( R1 -' R5 ) + 1 ) in ( dom C98 )) by L1469 , L1340 , L1468;
thus L1471: thesis by L1470 , L1465 , L1466 , FUNCT_1:def 3;
end;
L1472: ( C96 .: D191 ) is  linearly-independent  linearly-independent  linearly-independent  linearly-independent (Subset of C95) by L1461 , VECTSP_7:1;
L1473: ( C96 .: D192 ) c= { ( 0. C95 ) }
proof
let R7 being set;
assume L1474: R7 in ( C96 .: D192 );
consider R6 being set such that L1475: R6 in ( dom C96 ) and L1476: R6 in D192 and L1477: R7 = ( C96 . R6 ) by L1474 , FUNCT_1:def 6;
consider C118 being (Vector of C95) such that L1478: R6 = C118 and L1479: (ex R1 being Nat st (ex R5 being Nat st (R1 in ( Seg ( D178 + D180 ) ) & R5 = ( C101 . R1 ) & C118 = ( D186 . R1 ) & ( R1 -' R5 ) <> ( Sum ( D179 | ( R5 -' 1 ) ) ) & ( R1 -' R5 ) = ( Sum ( D179 | R5 ) )))) by L1476;
L1480: ( C96 . C118 ) = ( 0. C95 ) by L1340 , L1479;
thus L1481: thesis by L1480 , L1477 , L1478 , TARSKI:def 1;
end;
L1482: ( Carrier C106 ) c= D192 by L1473 , L1354 , L1440 , L1355 , L1472 , VECTSP11:44;
L1483: ( Carrier C106 ) c= D188 by L1482 , L1432 , XBOOLE_1:1;
L1484: C106 is (Linear_Combination of D188) by L1483 , VECTSP_6:def 4;
thus L1485: ( Carrier C106 ) = ( {} ) by L1484 , L1354 , VECTSP_7:def 1;
end;
L1486: D187 is  linearly-independent  linearly-independent  linearly-independent  linearly-independent (Subset of C95) by L1343 , VECTSP_7:def 1;
reconsider D196 = D174 , D197 = D187 as  finite (Subset of C95) by L1228 , VECTSP_9:21;
consider C119 being  finite (Subset of C95) such that L1487: C119 c= D196 and L1488: ( card C119 ) = ( ( card D196 ) - ( card D197 ) ) and L1489: ( the VectSpStr of C95 ) = ( Lin ( D197 \/ C119 ) ) by L1486 , L1229 , VECTSP_9:19;
L1490: ( (Omega). ( Lin D196 ) ) = ( (Omega). C95 ) by VECTSP_7:def 3;
L1491: ( dim C95 ) = ( dim ( Lin D196 ) ) by L1490 , VECTSP_9:28;
defpred S18[ Nat ] means ($1 <= ( card C119 ) implies (ex B91 being (FinSequence of C95) st (B91 is  one-to-one & ( len B91 ) = ( card C119 ) & D197 misses ( rng B91 ) & ( D197 \/ ( rng B91 ) ) is (Basis of C95) & (for R1 being Nat holds ((R1 in ( dom B91 ) & R1 <= $1) implies ( C96 . ( B91 . R1 ) ) = ( 0. C95 ))))));
L1492: (for R4 being Nat holds (S18[ R4 ] implies S18[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L1493: S18[ R4 ];
set D198 = ( R4 + 1 );
assume L1494: D198 <= ( card C119 );
consider C120 being (FinSequence of C95) such that L1495: C120 is  one-to-one and L1496: ( len C120 ) = ( card C119 ) and L1497: D197 misses ( rng C120 ) and L1498: ( D197 \/ ( rng C120 ) ) is (Basis of C95) and L1499: (for R1 being Nat holds ((R1 in ( dom C120 ) & R1 <= R4) implies ( C96 . ( C120 . R1 ) ) = ( 0. C95 ))) by L1494 , L1493 , NAT_1:13;
per cases ;
suppose L1500: ( C96 . ( C120 . D198 ) ) = ( 0. C95 );

L1501: (for R1 being Nat holds ((R1 in ( dom C120 ) & R1 <= D198) implies ( C96 . ( C120 . R1 ) ) = ( 0. C95 ))) by L1500 , L1499 , NAT_1:8;
thus L1502: thesis by L1501 , L1495 , L1496 , L1497 , L1498;
end;
suppose L1503: ( C96 . ( C120 . D198 ) ) <> ( 0. C95 );

reconsider D199 = ( D197 \/ ( rng C120 ) ) as  finite (Subset of C95) by L1498;
reconsider D200 = ( rng C98 ) as (Basis of D175) by MATRLIN:def 2;
set D201 = ( C120 /. D198 );
L1504: 1 <= D198 by NAT_1:14;
L1505: D198 in ( dom C120 ) by L1504 , L1494 , L1496 , FINSEQ_3:25;
L1506: ( C120 /. D198 ) = ( C120 . D198 ) by L1505 , PARTFUN1:def 6;
L1507: ( rng C98 ) c= ( C96 .: D197 )
proof
L1508: ( dom C96 ) = ( [#] C95 ) by FUNCT_2:def 1;
let R7 being set;
assume L1509: R7 in ( rng C98 );
consider R6 being set such that L1510: R6 in ( dom C98 ) and L1511: ( C98 . R6 ) = R7 by L1509 , FUNCT_1:def 3;
reconsider D202 = R6 as (Element of ( NAT )) by L1510;
L1512: (( len D179 ) = D178 & D202 <= D180) by L1233 , L1510 , CARD_1:def 7 , FINSEQ_3:25;
set D203 = ( min (D179 , D202) );
L1513: D202 <= ( Sum ( D179 | D203 ) ) by L1234 , L1510 , MATRIXJ1:def 1;
L1514: D203 in ( dom D179 ) by L1234 , L1510 , MATRIXJ1:def 1;
L1515: D203 <= ( len D179 ) by L1514 , FINSEQ_3:25;
L1516: ( D203 + D202 ) <= ( D178 + D180 ) by L1515 , L1512 , XREAL_1:7;
L1517: ( ( D203 + D202 ) - 1 ) <= ( ( D178 + D180 ) - 1 ) by L1516 , XREAL_1:9;
set D204 = ( D202 -' 1 );
L1518: 1 <= D202 by L1510 , FINSEQ_3:25;
L1519: D204 = ( D202 - 1 ) by L1518 , XREAL_1:233;
L1520: 1 <= D203 by L1514 , FINSEQ_3:25;
L1521: ( 1 + 1 ) <= ( D203 + D202 ) by L1520 , L1518 , XREAL_1:7;
L1522: ( 2 - 1 ) <= ( ( D203 + D202 ) - 1 ) by L1521 , XREAL_1:9;
set D205 = ( D203 + D204 );
L1523: ( D205 -' D203 ) = ( D205 - D203 ) by NAT_1:11 , XREAL_1:233;
L1524: ( ( D178 + D180 ) - 1 ) <= ( ( D178 + D180 ) - ( 0 ) ) by XREAL_1:10;
L1525: D205 <= ( D178 + D180 ) by L1524 , L1519 , L1517 , XXREAL_0:2;
L1526: D205 in ( Seg ( D180 + D178 ) ) by L1525 , L1519 , L1522;
L1527: ( C101 . D205 ) = ( C101 /. D205 ) by L1526 , L1280 , PARTFUN1:def 6;
reconsider D206 = ( C101 . D205 ) as (Element of ( NAT )) by L1527;
L1528: ( D186 . D205 ) in D197 by L1342 , L1526 , FUNCT_1:def 3;
L1529: ( Sum ( D179 | ( D203 -' 1 ) ) ) < ( D204 + 1 ) by L1234 , L1510 , L1519 , MATRIXJ1:7;
L1530: (D203 <= D205 & ( Sum ( D179 | ( D203 -' 1 ) ) ) <= ( D205 -' D203 )) by L1529 , L1523 , NAT_1:11 , NAT_1:13;
L1531: D203 <= D206 by L1530 , L1279 , L1514 , L1526;
L1532: D203 = D206
proof
assume L1533: D203 <> D206;
L1534: D203 < D206 by L1533 , L1531 , XXREAL_0:1;
reconsider D207 = ( D206 - 1 ) as (Element of ( NAT )) by L1534 , NAT_1:20;
L1535: D206 = ( D207 + 1 );
L1536: D203 <= D207 by L1535 , L1534 , NAT_1:13;
L1537: ( Sum ( D179 | D203 ) ) <= ( Sum ( D179 | D207 ) ) by L1536 , POLYNOM3:18;
L1538: ( D205 -' D206 ) <= ( D205 -' D203 ) by L1531 , NAT_D:41;
L1539: ( D206 -' 1 ) = D207 by L1535 , NAT_D:34;
L1540: ( Sum ( D179 | D207 ) ) <= ( D205 -' D206 ) by L1539 , L1279 , L1526;
L1541: ( Sum ( D179 | D203 ) ) <= ( D205 -' D206 ) by L1540 , L1537 , XXREAL_0:2;
L1542: ( Sum ( D179 | D203 ) ) <= D204 by L1541 , L1523 , L1538 , XXREAL_0:2;
thus L1543: thesis by L1542 , L1519 , L1529 , L1513 , NAT_1:13;
end;
L1544: (( D205 -' D203 ) = ( Sum ( D179 | ( D203 -' 1 ) ) ) or ( D205 -' D203 ) <> ( Sum ( D179 | ( D203 -' 1 ) ) ));
L1545: ( D205 -' D203 ) < ( Sum ( D179 | D203 ) ) by L1519 , L1523 , L1529 , L1513 , NAT_1:13;
L1546: ( C96 . ( D186 . D205 ) ) = ( C98 . ( ( D205 -' D203 ) + 1 ) ) by L1545 , L1340 , L1526 , L1532 , L1544;
thus L1547: thesis by L1546 , L1511 , L1519 , L1523 , L1528 , L1508 , FUNCT_1:def 6;
end;
L1548: (( C96 . ( C120 /. D198 ) ) in ( im C96 ) & ( C96 |^ 1 ) = C96) by RANKNULL:13 , VECTSP11:19;
L1549: ( C96 . ( C120 /. D198 ) ) in ( Lin D200 ) by L1548 , VECTSP_7:def 3;
consider C121 being (Linear_Combination of D200) such that L1550: ( C96 . ( C120 /. D198 ) ) = ( Sum C121 ) by L1549 , VECTSP_7:7;
consider C122 being (Linear_Combination of C95) such that L1551: ( Carrier C121 ) = ( Carrier C122 ) and L1552: ( Sum C121 ) = ( Sum C122 ) by VECTSP_9:8;
L1553: ( Carrier C121 ) c= D200 by VECTSP_6:def 4;
consider C123 being (Linear_Combination of D197) such that L1554: ( C96 . ( Sum C123 ) ) = ( Sum C122 ) by L1553 , L1507 , L1551 , VECTSP11:41 , XBOOLE_1:1;
L1555: ( C120 . D198 ) in ( rng C120 ) by L1505 , FUNCT_1:def 3;
L1556: D201 in D199 by L1555 , L1506 , XBOOLE_0:def 3;
L1557: (not D201 in D197) by L1497 , L1506 , L1555 , XBOOLE_0:3;
L1558: (not D201 in D197) by L1497 , L1506 , L1555 , XBOOLE_0:3;
L1559: D197 c= ( D199 \ { D201 } ) by L1558 , XBOOLE_1:7 , ZFMISC_1:34;
L1560: (( Carrier C123 ) c= D197 & ( Carrier C123 ) = ( Carrier ( - C123 ) )) by VECTSP_6:38 , VECTSP_6:def 4;
L1561: ( Carrier ( - C123 ) ) c= ( D199 \ { D201 } ) by L1560 , L1559 , XBOOLE_1:1;
reconsider D208 = ( - C123 ) as (Linear_Combination of ( D199 \ { D201 } )) by L1561 , VECTSP_6:def 4;
set D209 = ( D201 + ( Sum D208 ) );
L1562: D209 <> D201
proof
assume L1563: D209 = D201;
L1564: ( 0. C95 ) = ( D209 - D201 ) by L1563 , VECTSP_1:16
.= ( ( Sum D208 ) + ( D201 - D201 ) ) by RLVECT_1:def 3
.= ( ( Sum D208 ) + ( 0. C95 ) ) by RLVECT_1:def 10
.= ( Sum D208 ) by RLVECT_1:def 4
.= ( - ( Sum C123 ) ) by VECTSP_6:46;
L1565: ( 0. C95 ) = ( Sum C123 ) by L1564 , VECTSP_1:28;
thus L1566: thesis by L1565 , L1503 , L1506 , L1550 , L1552 , L1554 , RANKNULL:9;
end;
take D210 = ( C120 +* (D198 , D209) );
set D211 = ( D198 .--> D209 );
L1567: D199 is  linearly-independent by L1498 , VECTSP_7:def 3;
L1568: (not D209 in ( D199 \ { D201 } ))
proof
L1569: ( card D199 ) <> ( 0 ) by L1555;
reconsider D212 = ( ( card D199 ) - 1 ) as (Element of ( NAT )) by L1569 , NAT_1:20;
assume L1570: D209 in ( D199 \ { D201 } );
L1571: ( ( D199 \ { D201 } ) \/ { D209 } ) = ( D199 \ { D201 } ) by L1570 , ZFMISC_1:40;
L1572: ( D212 + 1 ) = ( card D199 );
L1573: ( card ( D199 \ { D201 } ) ) = D212 by L1572 , L1556 , STIRL2_1:55;
L1574: ( card ( ( D199 \ { D201 } ) \/ { D209 } ) ) = ( D212 + 1 ) by L1567 , L1556 , VECTSP11:40;
thus L1575: thesis by L1574 , L1573 , L1571;
end;
L1576: (not D209 in ( rng C120 ))
proof
assume L1577: D209 in ( rng C120 );
L1578: D209 in D199 by L1577 , XBOOLE_0:def 3;
thus L1579: thesis by L1578 , L1568 , L1562 , ZFMISC_1:56;
end;
L1580: ( rng C120 ) misses { D209 } by L1576 , ZFMISC_1:50;
L1581: ( rng D211 ) = { D209 } by FUNCOP_1:8;
L1582: ( C120 +* D211 ) is  one-to-one by L1581 , L1495 , L1580 , FUNCT_4:92;
thus L1583: D210 is  one-to-one by L1582 , L1505 , FUNCT_7:def 3;
L1584: ( dom D210 ) = ( dom C120 ) by FUNCT_7:30;
thus L1585: ( len D210 ) = ( card C119 ) by L1584 , L1496 , FINSEQ_3:29;
L1586: ( rng D210 ) = ( ( ( rng C120 ) \ { D201 } ) \/ { D209 } ) by L1495 , L1505 , L1506 , L1;
thus L1587: D197 misses ( rng D210 )
proof
assume L1588: D197 meets ( rng D210 );
consider R6 being set such that L1589: R6 in D197 and L1590: R6 in ( rng D210 ) by L1588 , XBOOLE_0:3;
L1591: (not R6 in ( ( rng C120 ) \ { D201 } )) by L1497 , L1589 , XBOOLE_0:3;
L1592: R6 in { D209 } by L1591 , L1586 , L1590 , XBOOLE_0:def 3;
L1593: R6 = D209 by L1592 , TARSKI:def 1;
L1594: (not D209 in D199) by L1568 , L1562 , ZFMISC_1:56;
thus L1595: thesis by L1594 , L1589 , L1593 , XBOOLE_0:def 3;
end;

L1596: ( ( D199 \ { D201 } ) \/ { D209 } ) = ( ( ( D197 \ { D201 } ) \/ ( ( rng C120 ) \ { D201 } ) ) \/ { D209 } ) by XBOOLE_1:42
.= ( ( D197 \/ ( ( rng C120 ) \ { D201 } ) ) \/ { D209 } ) by L1557 , ZFMISC_1:57
.= ( D197 \/ ( rng D210 ) ) by L1586 , XBOOLE_1:4;
reconsider D213 = ( D197 \/ ( rng D210 ) ) as  finite (Subset of C95) by L1596;
L1597: ( dim C95 ) = ( card D199 ) by L1498 , VECTSP_9:def 1
.= ( card ( D197 \/ ( rng D210 ) ) ) by L1567 , L1556 , L1596 , VECTSP11:40;
L1598: ( dim ( Lin D213 ) ) = ( dim C95 ) by L1597 , L1567 , L1556 , L1596 , VECTSP11:40 , VECTSP_9:26;
L1599: ( (Omega). C95 ) = ( (Omega). ( Lin D213 ) ) by L1598 , VECTSP_9:28;
L1600: ( ( D199 \ { D201 } ) \/ { D209 } ) is  linearly-independent by L1567 , L1556 , VECTSP11:40;
thus L1601: ( D197 \/ ( rng D210 ) ) is (Basis of C95) by L1600 , L1596 , L1599 , VECTSP_7:def 3;
let R1 being Nat;
assume that
L1602: R1 in ( dom D210 )
and
L1603: R1 <= D198;
per cases  by L1603 , XXREAL_0:1;
suppose L1604: R1 < D198;

L1605: (( D210 . R1 ) = ( C120 . R1 ) & R1 <= R4) by L1604 , FUNCT_7:32 , NAT_1:13;
thus L1606: thesis by L1605 , L1499 , L1584 , L1602;
end;
suppose L1607: R1 = D198;

L1608: ( D210 . R1 ) = D209 by L1607 , L1584 , L1602 , FUNCT_7:31;
thus L1609: ( C96 . ( D210 . R1 ) ) = ( C96 . ( D201 - ( Sum C123 ) ) ) by L1608 , VECTSP_6:46
.= ( ( C96 . D201 ) - ( C96 . ( Sum C123 ) ) ) by RANKNULL:8
.= ( 0. C95 ) by L1550 , L1552 , L1554 , RLVECT_1:def 10;
end;
end;
end;
L1612: ( card ( D197 \/ C119 ) ) = ( ( ( card D197 ) + ( card C119 ) ) - ( card ( D197 /\ C119 ) ) ) by CARD_2:45
.= ( ( card D196 ) - ( card ( D197 /\ C119 ) ) ) by L1488;
L1613: ( ( card ( D197 \/ C119 ) ) + ( card ( D197 /\ C119 ) ) ) = ( card D196 ) by L1612;
L1614: ( card ( D197 \/ C119 ) ) <= ( card D196 ) by L1613 , NAT_1:11;
L1615: ( dim ( Lin D196 ) ) = ( card D196 ) by L1228 , VECTSP_9:26;
L1616: ( card ( D197 \/ C119 ) ) >= ( card D196 ) by L1615 , L1490 , L1489 , MATRLIN2:6;
L1617: ( card ( D197 \/ C119 ) ) = ( card D196 ) by L1616 , L1614 , XXREAL_0:1;
L1618: ( dim C95 ) = ( dim ( Lin ( D197 \/ C119 ) ) ) by L1490 , L1489 , VECTSP_9:28;
L1619: ( D197 \/ C119 ) is  linearly-independent by L1618 , L1491 , L1615 , L1616 , L1614 , MATRLIN2:5 , XXREAL_0:1;
L1620: S18[ ( 0 ) ]
proof
assume L1621: ( 0 ) <= ( card C119 );
L1622: ( card C119 ) = ( card ( Seg ( card C119 ) ) ) by FINSEQ_1:57;
L1623: ( Seg ( card C119 ) ) , C119 are_equipotent  by L1622 , CARD_1:5;
consider C124 being Function such that L1624: C124 is  one-to-one and L1625: ( dom C124 ) = ( Seg ( card C119 ) ) and L1626: ( rng C124 ) = C119 by L1623 , WELLORD2:def 4;
reconsider D214 = C124 as FinSequence by L1625 , FINSEQ_1:def 2;
reconsider D215 = D214 as (FinSequence of C95) by L1626 , FINSEQ_1:def 4;
take D215;
thus L1627: (D215 is  one-to-one & ( len D215 ) = ( card C119 )) by L1624 , L1625 , FINSEQ_1:def 3;
L1628: ( D197 /\ C119 ) = ( {} ) by L1612 , L1617;
thus L1629: (D197 misses ( rng D215 ) & ( D197 \/ ( rng D215 ) ) is (Basis of C95)) by L1628 , L1489 , L1619 , L1626 , VECTSP_7:def 3 , XBOOLE_0:def 7;
let R1 being Nat;
assume L1630: (R1 in ( dom D215 ) & R1 <= ( 0 ));
thus L1631: thesis by L1630 , FINSEQ_3:25;
end;
L1632: (for R4 being Nat holds S18[ R4 ]) from NAT_1:sch 2(L1620 , L1492);
consider C125 being (FinSequence of C95) such that L1633: C125 is  one-to-one and L1634: ( len C125 ) = ( card C119 ) and L1635: D197 misses ( rng C125 ) and L1636: ( D197 \/ ( rng C125 ) ) is (Basis of C95) and L1637: (for R1 being Nat holds ((R1 in ( dom C125 ) & R1 <= ( card C119 )) implies ( C96 . ( C125 . R1 ) ) = ( 0. C95 ))) by L1632;
L1638: ( rng ( D186 ^ C125 ) ) = ( ( rng D186 ) \/ ( rng C125 ) ) by FINSEQ_1:31;
L1639:
now
let C126 , C127 being set;
assume that
L1640: C126 in ( dom D186 )
and
L1641: C127 in ( dom D186 )
and
L1642: ( D186 . C126 ) = ( D186 . C127 );
reconsider D216 = C126 , D217 = C127 as Nat by L1640 , L1641;
L1643: (( C101 /. D216 ) = ( C101 . D216 ) & ( C101 /. D217 ) = ( C101 . D217 )) by L1280 , L1342 , L1640 , L1641 , PARTFUN1:def 6;
reconsider D218 = ( C101 . D216 ) , D219 = ( C101 . D217 ) as (Element of ( NAT )) by L1643;
L1644: (( D216 -' D218 ) = ( Sum ( D179 | ( D218 -' 1 ) ) ) implies (( C96 . ( D186 . C126 ) ) = ( C98 . ( ( D216 -' D218 ) + 1 ) ) & ( ( D216 -' D218 ) + 1 ) in ( dom C98 ))) by L1340 , L1342 , L1640;
L1645: S14[ D216 , D218 ] by L1279 , L1342 , L1640;
L1646: ( D216 -' D218 ) = ( D216 - D218 ) by L1645 , XREAL_1:233;
L1647: S14[ D217 , D219 ] by L1279 , L1342 , L1641;
L1648: ( D217 -' D219 ) = ( D217 - D219 ) by L1647 , XREAL_1:233;
L1649: ( D219 -' 1 ) <= D219 by NAT_D:35;
L1650: (( D216 -' D218 ) <> ( Sum ( D179 | ( D218 -' 1 ) ) ) implies (( D186 . C126 ) = ( C98 . ( D216 -' D218 ) ) & ( D216 -' D218 ) in ( dom C98 ) & ( min (D179 , ( D216 -' D218 )) ) = D218 & (( D216 -' D218 ) < ( Sum ( D179 | D218 ) ) implies (( C96 . ( D186 . C126 ) ) = ( C98 . ( ( D216 -' D218 ) + 1 ) ) & ( ( D216 -' D218 ) + 1 ) in ( dom C98 ))) & (( D216 -' D218 ) = ( Sum ( D179 | D218 ) ) implies ( C96 . ( D186 . C126 ) ) = ( 0. C95 )))) by L1340 , L1342 , L1640;
L1651: D219 <= ( len D179 ) by L1647 , FINSEQ_3:25;
L1652: ( D219 -' 1 ) <= ( len D179 ) by L1651 , L1649 , XXREAL_0:2;
L1653: 1 <= D218 by L1645 , FINSEQ_3:25;
L1654: ( D218 -' 1 ) = ( D218 - 1 ) by L1653 , XREAL_1:233;
L1655: (( D217 -' D219 ) <> ( Sum ( D179 | ( D219 -' 1 ) ) ) implies (( D186 . C127 ) = ( C98 . ( D217 -' D219 ) ) & ( D217 -' D219 ) in ( dom C98 ) & ( min (D179 , ( D217 -' D219 )) ) = D219 & (( D217 -' D219 ) < ( Sum ( D179 | D219 ) ) implies (( C96 . ( D186 . C127 ) ) = ( C98 . ( ( D217 -' D219 ) + 1 ) ) & ( ( D217 -' D219 ) + 1 ) in ( dom C98 ))) & (( D217 -' D219 ) = ( Sum ( D179 | D219 ) ) implies ( C96 . ( D186 . C127 ) ) = ( 0. C95 )))) by L1340 , L1342 , L1641;
L1656: 1 <= D219 by L1647 , FINSEQ_3:25;
L1657: ( D219 -' 1 ) = ( D219 - 1 ) by L1656 , XREAL_1:233;
L1658: (( D217 -' D219 ) = ( Sum ( D179 | ( D219 -' 1 ) ) ) implies (( C96 . ( D186 . C127 ) ) = ( C98 . ( ( D217 -' D219 ) + 1 ) ) & ( ( D217 -' D219 ) + 1 ) in ( dom C98 ))) by L1340 , L1342 , L1641;
L1659: ( D218 -' 1 ) <= D218 by NAT_D:35;
L1660: D218 <= ( len D179 ) by L1645 , FINSEQ_3:25;
L1661: ( D218 -' 1 ) <= ( len D179 ) by L1660 , L1659 , XXREAL_0:2;
L1662: ( dom D179 ) = ( dom C97 ) by MATRIXJ1:def 3;
L1663: ( rng C98 ) is (Basis of D175) by MATRLIN:def 2;
L1664: ( rng C98 ) is  linearly-independent  linearly-independent  linearly-independent  linearly-independent (Subset of D175) by L1663 , VECTSP_7:def 3;
L1665: C98 is  one-to-one by MATRLIN:def 2;
L1666: (( D216 -' D218 ) <= ( Sum ( D179 | D218 ) ) & ( D217 -' D219 ) <= ( Sum ( D179 | D219 ) )) by L1279 , L1342 , L1640 , L1641;
L1667:
now
per cases  by L1666 , XXREAL_0:1;
suppose L1668: (( D216 -' D218 ) = ( Sum ( D179 | ( D218 -' 1 ) ) ) & ( D217 -' D219 ) = ( Sum ( D179 | ( D219 -' 1 ) ) ));

L1669: (( C96 . ( D186 . C127 ) ) = ( C98 . ( ( D217 -' D219 ) + 1 ) ) & ( ( D217 -' D219 ) + 1 ) in ( dom C98 )) by L1668 , L1340 , L1342 , L1641;
L1670: (( C96 . ( D186 . C126 ) ) = ( C98 . ( ( D216 -' D218 ) + 1 ) ) & ( ( D216 -' D218 ) + 1 ) in ( dom C98 )) by L1340 , L1342 , L1640 , L1668;
L1671: ( ( D216 -' D218 ) + 1 ) = ( ( D217 -' D219 ) + 1 ) by L1670 , L1642 , L1665 , L1669 , FUNCT_1:def 4;
L1672: (( D219 -' 1 ) in ( dom D179 ) implies ( D179 . ( D219 -' 1 ) ) <> ( 0 )) by L1232 , L1662;
L1673: (( D218 -' 1 ) in ( dom D179 ) implies ( D179 . ( D218 -' 1 ) ) <> ( 0 )) by L1232 , L1662;
L1674: ( D218 -' 1 ) = ( D219 -' 1 ) by L1673 , L1661 , L1652 , L1668 , L1671 , L1672 , MATRIXJ1:11;
thus L1675: D216 = D217 by L1674 , L1654 , L1657 , L1646 , L1648 , L1671;
end;
suppose L1676: (( D216 -' D218 ) = ( Sum ( D179 | ( D218 -' 1 ) ) ) & ( D217 -' D219 ) <> ( Sum ( D179 | ( D219 -' 1 ) ) ) & ( D217 -' D219 ) < ( Sum ( D179 | D219 ) ));

L1677: ( min (D179 , ( D217 -' D219 )) ) = D219 by L1676 , L1340 , L1342 , L1641;
L1678: (( C96 . ( D186 . C127 ) ) = ( C98 . ( ( D217 -' D219 ) + 1 ) ) & ( ( D217 -' D219 ) + 1 ) in ( dom C98 )) by L1340 , L1342 , L1641 , L1676;
L1679: (( C96 . ( D186 . C126 ) ) = ( C98 . ( ( D216 -' D218 ) + 1 ) ) & ( ( D216 -' D218 ) + 1 ) in ( dom C98 )) by L1340 , L1342 , L1640 , L1676;
L1680: ( ( D216 -' D218 ) + 1 ) = ( ( D217 -' D219 ) + 1 ) by L1679 , L1642 , L1665 , L1678 , FUNCT_1:def 4;
L1681: ( D218 -' 1 ) <> ( 0 )
proof
assume L1682: ( D218 -' 1 ) = ( 0 );
L1683: ( D179 | ( D218 -' 1 ) ) = ( <*> ( REAL ) ) by L1682;
thus L1684: thesis by L1683 , L1279 , L1342 , L1641 , L1676 , L1680 , RVSUM_1:72;
end;
L1685: ( D218 -' 1 ) >= 1 by L1681 , NAT_1:14;
L1686: ( D218 -' 1 ) in ( dom D179 ) by L1685 , L1661 , FINSEQ_3:25;
L1687: ( D179 . ( D218 -' 1 ) ) <> ( 0 ) by L1686 , L1232 , L1662;
thus L1688: D216 = D217 by L1687 , L1676 , L1677 , L1680 , L1686 , MATRIXJ1:6;
end;
suppose L1689: (( D216 -' D218 ) = ( Sum ( D179 | ( D218 -' 1 ) ) ) & ( D217 -' D219 ) <> ( Sum ( D179 | ( D219 -' 1 ) ) ) & ( D217 -' D219 ) = ( Sum ( D179 | D219 ) ));

L1690: (( C98 . ( ( D216 -' D218 ) + 1 ) ) = ( 0. D175 ) & ( C98 . ( ( D216 -' D218 ) + 1 ) ) in ( rng C98 )) by L1689 , L1642 , L1644 , L1655 , FUNCT_1:def 3 , VECTSP_4:11;
thus L1691: D216 = D217 by L1690 , L1664 , VECTSP_7:2;
end;
suppose L1692: (( D217 -' D219 ) = ( Sum ( D179 | ( D219 -' 1 ) ) ) & ( D216 -' D218 ) <> ( Sum ( D179 | ( D218 -' 1 ) ) ) & ( D216 -' D218 ) < ( Sum ( D179 | D218 ) ));

L1693: ( min (D179 , ( D216 -' D218 )) ) = D218 by L1692 , L1340 , L1342 , L1640;
L1694: (( C96 . ( D186 . C126 ) ) = ( C98 . ( ( D216 -' D218 ) + 1 ) ) & ( ( D216 -' D218 ) + 1 ) in ( dom C98 )) by L1340 , L1342 , L1640 , L1692;
L1695: (( C96 . ( D186 . C127 ) ) = ( C98 . ( ( D217 -' D219 ) + 1 ) ) & ( ( D217 -' D219 ) + 1 ) in ( dom C98 )) by L1340 , L1342 , L1641 , L1692;
L1696: ( ( D217 -' D219 ) + 1 ) = ( ( D216 -' D218 ) + 1 ) by L1695 , L1642 , L1665 , L1694 , FUNCT_1:def 4;
L1697: ( D219 -' 1 ) <> ( 0 )
proof
assume L1698: ( D219 -' 1 ) = ( 0 );
L1699: ( D216 -' D218 ) = ( 0 ) by L1698 , L1692 , L1696 , RVSUM_1:72;
thus L1700: thesis by L1699 , L1279 , L1342 , L1640 , L1692;
end;
L1701: ( D219 -' 1 ) >= 1 by L1697 , NAT_1:14;
L1702: ( D219 -' 1 ) in ( dom D179 ) by L1701 , L1652 , FINSEQ_3:25;
L1703: ( D179 . ( D219 -' 1 ) ) <> ( 0 ) by L1702 , L1232 , L1662;
thus L1704: D216 = D217 by L1703 , L1692 , L1693 , L1696 , L1702 , MATRIXJ1:6;
end;
suppose L1705: (( D217 -' D219 ) = ( Sum ( D179 | ( D219 -' 1 ) ) ) & ( D216 -' D218 ) <> ( Sum ( D179 | ( D218 -' 1 ) ) ) & ( D216 -' D218 ) = ( Sum ( D179 | D218 ) ));

L1706: (( C98 . ( ( D217 -' D219 ) + 1 ) ) = ( 0. D175 ) & ( C98 . ( ( D217 -' D219 ) + 1 ) ) in ( rng C98 )) by L1705 , L1642 , L1650 , L1658 , FUNCT_1:def 3 , VECTSP_4:11;
thus L1707: D216 = D217 by L1706 , L1664 , VECTSP_7:2;
end;
suppose L1708: (( D216 -' D218 ) <> ( Sum ( D179 | ( D218 -' 1 ) ) ) & ( D217 -' D219 ) <> ( Sum ( D179 | ( D219 -' 1 ) ) ));

L1709: ( D217 -' D219 ) = ( D216 -' D218 ) by L1708 , L1642 , L1650 , L1655 , L1665 , FUNCT_1:def 4;
L1710: ( D217 - D218 ) = ( D216 - D218 ) by L1709 , L1340 , L1342 , L1641 , L1650 , L1646 , L1648 , L1708;
thus L1711: D216 = D217 by L1710;
end;
end;
thus L1713: C126 = C127 by L1667;
end;
L1714: D186 is  one-to-one by L1639 , FUNCT_1:def 4;
L1715: ( D186 ^ C125 ) is  one-to-one by L1714 , L1633 , L1635 , FINSEQ_3:91;
reconsider D220 = ( D186 ^ C125 ) as (OrdBasis of C95) by L1715 , L1636 , L1638 , MATRLIN:def 2;
L1716: (for R1 being Nat holds (R1 in ( dom D220 ) implies (( C96 . ( D220 /. R1 ) ) = ( ( 0. R8 ) * ( D220 /. R1 ) ) or (( R1 + 1 ) in ( dom D220 ) & ( C96 . ( D220 /. R1 ) ) = ( ( ( 0. R8 ) * ( D220 /. R1 ) ) + ( D220 /. ( R1 + 1 ) ) )))))
proof
let R1 being Nat;
assume that
L1717: R1 in ( dom D220 );
L1718: ( D220 /. R1 ) = ( D220 . R1 ) by L1717 , PARTFUN1:def 6;
per cases  by L1717 , FINSEQ_1:25;
suppose L1719: R1 in ( dom D186 );

L1720: ( C101 /. R1 ) = ( C101 . R1 ) by L1719 , L1280 , L1342 , PARTFUN1:def 6;
reconsider D221 = ( C101 . R1 ) as (Element of ( NAT )) by L1720;
L1721: ( R1 -' D221 ) <= ( Sum ( D179 | D221 ) ) by L1279 , L1342 , L1719;
L1722: S14[ R1 , D221 ] by L1279 , L1342 , L1719;
L1723: 1 <= D221 by L1722 , FINSEQ_3:25;
L1724: ( D221 -' 1 ) = ( D221 - 1 ) by L1723 , XREAL_1:233;
L1725: ( ( D221 -' 1 ) + 1 ) = D221 by L1724;
L1726: ( D179 | D221 ) = ( ( D179 | ( D221 -' 1 ) ) ^ <* ( D179 . D221 ) *> ) by L1725 , L1722 , FINSEQ_5:10;
L1727: (( dom D179 ) = ( dom C97 ) & ( Sum ( D179 | D221 ) ) = ( ( Sum ( D179 | ( D221 -' 1 ) ) ) + ( D179 . D221 ) )) by L1726 , MATRIXJ1:def 3 , RVSUM_1:74;
per cases  by L1721 , XXREAL_0:1;
suppose L1728: ( R1 -' D221 ) = ( Sum ( D179 | D221 ) );

L1729: ( R1 -' D221 ) <> ( Sum ( D179 | ( D221 -' 1 ) ) ) by L1728 , L1232 , L1722 , L1727;
L1730: ( C96 . ( D220 /. R1 ) ) = ( C96 . ( D186 . R1 ) ) by L1718 , L1719 , FINSEQ_1:def 7
.= ( 0. C95 ) by L1340 , L1342 , L1719 , L1728 , L1729
.= ( ( 0. R8 ) * ( D220 /. R1 ) ) by VECTSP_1:14;
thus L1731: thesis by L1730;
end;
suppose L1732: ( R1 -' D221 ) < ( Sum ( D179 | D221 ) );

L1733: (( R1 -' D221 ) = ( Sum ( D179 | ( D221 -' 1 ) ) ) or ( R1 -' D221 ) <> ( Sum ( D179 | ( D221 -' 1 ) ) ));
L1734: ( C96 . ( D186 . R1 ) ) = ( C98 . ( ( R1 -' D221 ) + 1 ) ) by L1733 , L1340 , L1342 , L1719 , L1732;
L1735: ( dom C97 ) = ( dom D179 ) by MATRIXJ1:def 3;
L1736: D221 <= D178 by L1735 , L1722 , FINSEQ_3:25;
L1737: ( ( R1 -' D221 ) + 1 ) <= ( Sum ( D179 | D221 ) ) by L1732 , NAT_1:13;
L1738: ( R1 -' D221 ) = ( R1 - D221 ) by L1722 , XREAL_1:233;
L1739: ( ( R1 -' D221 ) + 1 ) in ( dom C98 ) by L1340 , L1342 , L1719 , L1732 , L1733;
L1740: 1 <= ( ( R1 -' D221 ) + 1 ) by L1739 , FINSEQ_3:25;
L1741: ( 1 + ( 0 ) ) <= ( ( ( R1 - D221 ) + 1 ) + D221 ) by L1740 , L1738 , XREAL_1:7;
L1742: ( ( R1 -' D221 ) + 1 ) <= D180 by L1233 , L1739 , FINSEQ_3:25;
L1743: ( ( ( R1 - D221 ) + 1 ) + D221 ) <= ( D180 + D178 ) by L1742 , L1736 , L1738 , XREAL_1:7;
L1744: ( R1 + 1 ) in ( Seg ( D180 + D178 ) ) by L1743 , L1741;
L1745: ( C101 /. ( R1 + 1 ) ) = ( C101 . ( R1 + 1 ) ) by L1744 , L1280 , PARTFUN1:def 6;
reconsider D222 = ( C101 . ( R1 + 1 ) ) as (Element of ( NAT )) by L1745;
set D223 = ( R1 + 1 );
L1746: ( dom D186 ) c= ( dom D220 ) by FINSEQ_1:26;
L1747: ( 1 + D221 ) <= ( ( ( R1 - D221 ) + 1 ) + D221 ) by L1740 , L1738 , XREAL_1:7;
L1748: D221 <= ( R1 + 1 ) by L1747 , NAT_1:13;
L1749: ( D223 -' D221 ) = ( D223 - D221 ) by L1748 , XREAL_1:233;
L1750: ( Sum ( D179 | ( D221 -' 1 ) ) ) <= ( ( R1 -' D221 ) + 1 ) by L1722 , NAT_1:12;
L1751: D221 <= D222 by L1750 , L1279 , L1722 , L1738 , L1744 , L1748 , L1749;
L1752: S14[ D223 , D222 ] by L1279 , L1744;
L1753: D221 = D222
proof
assume L1754: D221 <> D222;
L1755: D221 < D222 by L1754 , L1751 , XXREAL_0:1;
reconsider D224 = ( D222 - 1 ) as (Element of ( NAT )) by L1755 , NAT_1:20;
L1756: ( D223 -' D222 ) <= ( D223 -' D221 ) by L1751 , NAT_D:41;
L1757: ( D223 - D222 ) = ( D223 -' D222 ) by L1752 , XREAL_1:233;
L1758: ( D223 -' D222 ) <> ( D223 -' D221 ) by L1757 , L1749 , L1754;
L1759: ( D223 -' D222 ) < ( D223 -' D221 ) by L1758 , L1756 , XXREAL_0:1;
L1760: D222 = ( D224 + 1 );
L1761: D221 <= D224 by L1760 , L1755 , NAT_1:13;
L1762: ( Sum ( D179 | D221 ) ) <= ( Sum ( D179 | D224 ) ) by L1761 , POLYNOM3:18;
L1763: ( D222 -' 1 ) = D224 by L1760 , NAT_D:34;
L1764: ( Sum ( D179 | D224 ) ) <= ( D223 -' D222 ) by L1763 , L1279 , L1744;
L1765: ( Sum ( D179 | D221 ) ) <= ( D223 -' D222 ) by L1764 , L1762 , XXREAL_0:2;
thus L1766: thesis by L1765 , L1737 , L1738 , L1749 , L1759 , XXREAL_0:2;
end;
L1767: ( Sum ( D179 | ( D221 -' 1 ) ) ) < ( ( R1 -' D221 ) + 1 ) by L1722 , NAT_1:13;
L1768: ( D186 . D223 ) = ( C98 . ( ( R1 -' D221 ) + 1 ) ) by L1767 , L1340 , L1738 , L1744 , L1749 , L1753;
L1769: ( D220 . D223 ) = ( C98 . ( ( R1 -' D221 ) + 1 ) ) by L1768 , L1342 , L1744 , FINSEQ_1:def 7;
L1770: ( D220 /. D223 ) = ( C98 . ( ( R1 -' D221 ) + 1 ) ) by L1769 , L1342 , L1744 , L1746 , PARTFUN1:def 6;
L1771: ( C96 . ( D220 /. R1 ) ) = ( D220 /. D223 ) by L1770 , L1718 , L1719 , L1734 , FINSEQ_1:def 7
.= ( ( 0. C95 ) + ( D220 /. D223 ) ) by RLVECT_1:def 4
.= ( ( ( 0. R8 ) * ( D220 /. R1 ) ) + ( D220 /. D223 ) ) by VECTSP_1:14;
thus L1772: thesis by L1771 , L1342 , L1744 , L1746;
end;
end;
suppose L1774: (ex R2 being Nat st (R2 in ( dom C125 ) & R1 = ( ( len D186 ) + R2 )));

consider R2 being Nat such that L1775: R2 in ( dom C125 ) and L1776: R1 = ( ( len D186 ) + R2 ) by L1774;
L1777: R2 <= ( len C125 ) by L1775 , FINSEQ_3:25;
L1778: ( C96 . ( D220 /. R1 ) ) = ( C96 . ( C125 . R2 ) ) by L1718 , L1775 , L1776 , FINSEQ_1:def 7
.= ( 0. C95 ) by L1634 , L1637 , L1775 , L1777
.= ( ( 0. R8 ) * ( D220 /. R1 ) ) by VECTSP_1:14;
thus L1779: thesis by L1778;
end;
end;
consider C128 being  non-empty (FinSequence_of_Jordan_block of ( 0. R8 ) , R8) such that L1781: ( AutMt (C96 , D220 , D220) ) = ( block_diagonal (C128 , ( 0. R8 )) ) by L1716 , L983;
L1782:
now
L1783: ( dom ( Len C128 ) ) = ( dom C128 ) by MATRIXJ1:def 3;
let R1 being Nat;
assume that
L1784: R1 in ( dom C128 );
L1785: ( C128 . R1 ) <> ( {} ) by L1784 , FUNCT_1:def 9;
thus L1786: ( ( Len C128 ) . R1 ) <> ( 0 ) by L1785 , L1784 , L1783 , MATRIXJ1:def 3;
end;
thus L1787: thesis by L1782 , L1781;
end;
L1788: S13[ ( 0 ) ]
proof
reconsider D225 = ( {} ) as (FinSequence_of_Jordan_block of ( 0. R8 ) , R8) by L356;
let C129 being  finite-dimensional (VectSp of R8);
set D226 = the (OrdBasis of C129);
let C130 being  nilpotent (linear-transformation of C129 , C129);
assume L1789: ( deg C130 ) = ( 0 );
L1790: ( [#] C129 ) = { ( 0. C129 ) } by L1789 , L489
.= (the carrier of ( (0). C129 )) by VECTSP_4:def 3;
L1791: ( (0). C129 ) = ( (Omega). C129 ) by L1790 , VECTSP_4:29;
L1792: ( 0 ) = ( dim C129 ) by L1791 , VECTSP_9:29
.= ( len D226 ) by MATRLIN2:21
.= ( len ( AutMt (C130 , D226 , D226) ) ) by MATRIX_1:def 2;
take D225;
take D226;
thus L1793: ( AutMt (C130 , D226 , D226) ) = ( {} ) by L1792
.= ( block_diagonal (D225 , ( 0. R8 )) ) by MATRIXJ1:22;
thus L1794: thesis;
end;
L1795: (for R4 being Nat holds S13[ R4 ]) from NAT_1:sch 2(L1788 , L1225);
L1796: S13[ ( deg C94 ) ] by L1795;
consider C131 being (FinSequence_of_Jordan_block of ( 0. R8 ) , R8), C132 being (OrdBasis of C93) such that L1797: ( AutMt (C94 , C132 , C132) ) = ( block_diagonal (C131 , ( 0. R8 )) ) and L1798: (for R1 being Nat holds (R1 in ( dom C131 ) implies ( ( Len C131 ) . R1 ) <> ( 0 ))) by L1796;
L1799:
now
let R6 being set;
assume that
L1800: R6 in ( dom C131 );
reconsider D227 = R6 as (Element of ( NAT )) by L1800;
L1801: (( dom C131 ) = ( dom ( Len C131 ) ) & ( ( Len C131 ) . D227 ) <> ( 0 )) by L1798 , L1800 , MATRIXJ1:def 3;
thus L1802: ( C131 . R6 ) is non  empty by L1801 , L1800 , MATRIXJ1:def 3;
end;
L1803: C131 is  non-empty by L1799 , FUNCT_1:def 9;
thus L1804: thesis by L1803 , L1797;
end;
theorem
L1805: (for R4 being Nat holds (for R8 being Field holds (for R10 being (Element of R8) holds (for B92 being (VectSp of R8) holds (for B93 being (linear-transformation of B92 , B92) holds (for B94 being  finite-dimensional (Subspace of B92) holds (for B95 being (linear-transformation of B94 , B94) holds ((B94 = ( ker ( ( B93 + ( ( - R10 ) * ( id B92 ) ) ) |^ R4 ) ) & ( B93 | B94 ) = B95) implies (ex B96 being  non-empty (FinSequence_of_Jordan_block of R10 , R8) st (ex B97 being (OrdBasis of B94) st ( AutMt (B95 , B97 , B97) ) = ( block_diagonal (B96 , ( 0. R8 )) )))))))))))
proof
let R4 being Nat;
let R8 being Field;
let R10 being (Element of R8);
let C133 being (VectSp of R8);
let C134 being (linear-transformation of C133 , C133);
let C135 being  finite-dimensional (Subspace of C133);
let C136 being (linear-transformation of C135 , C135);
assume that
L1806: C135 = ( ker ( ( C134 + ( ( - R10 ) * ( id C133 ) ) ) |^ R4 ) )
and
L1807: ( C134 | C135 ) = C136;
set D228 = ( C134 + ( ( - R10 ) * ( id C133 ) ) );
reconsider D229 = ( D228 | C135 ) as  nilpotent (linear-transformation of C135 , C135) by L1806 , L475;
L1808:
now
let R6 being set;
assume L1809: R6 in ( dom D229 );
reconsider D230 = R6 as (Vector of C135) by L1809 , FUNCT_2:def 1;
reconsider D231 = D230 as (Vector of C133) by VECTSP_4:10;
L1810: ( ( id C133 ) . D231 ) = D231 by FUNCT_1:18;
L1811: ( ( - R10 ) * ( ( id C133 ) . D231 ) ) = ( ( - R10 ) * ( ( id C135 ) . D230 ) ) by L1810 , FUNCT_1:18 , VECTSP_4:14;
L1812: ( C134 . D230 ) = ( C136 . D230 ) by L1807 , FUNCT_1:49;
thus L1813: ( D229 . R6 ) = ( ( C134 + ( ( - R10 ) * ( id C133 ) ) ) . D231 ) by FUNCT_1:49
.= ( ( C134 . D231 ) + ( ( ( - R10 ) * ( id C133 ) ) . D231 ) ) by MATRLIN:def 3
.= ( ( C134 . D231 ) + ( ( - R10 ) * ( ( id C133 ) . D231 ) ) ) by MATRLIN:def 4
.= ( ( C136 . D230 ) + ( ( - R10 ) * ( ( id C135 ) . D230 ) ) ) by L1811 , L1812 , VECTSP_4:13
.= ( ( C136 . D230 ) + ( ( ( - R10 ) * ( id C135 ) ) . D230 ) ) by MATRLIN:def 4
.= ( ( C136 + ( ( - R10 ) * ( id C135 ) ) ) . R6 ) by MATRLIN:def 3;
end;
L1814: ( dom D229 ) = (the carrier of C135) by FUNCT_2:def 1
.= ( dom ( C136 + ( ( - R10 ) * ( id C135 ) ) ) ) by FUNCT_2:def 1;
L1815: D229 = ( C136 + ( ( - R10 ) * ( id C135 ) ) ) by L1814 , L1808 , FUNCT_1:2;
consider C137 being  non-empty (FinSequence_of_Jordan_block of ( 0. R8 ) , R8), C138 being (OrdBasis of C135) such that L1816: ( AutMt (D229 , C138 , C138) ) = ( block_diagonal (C137 , ( 0. R8 )) ) by L1224;
L1817: ( R10 + ( 0. R8 ) ) = R10 by RLVECT_1:def 4;
reconsider D232 = ( C137 (+) ( mlt (( ( len C137 ) |-> R10 ) , ( 1. (R8 , ( Len C137 )) )) ) ) as (FinSequence_of_Jordan_block of R10 , R8) by L1817 , L380;
L1818:
now
let R6 being set;
assume that
L1819: R6 in ( dom D232 );
reconsider D233 = R6 as Nat by L1819;
L1820: ( D232 . D233 ) = ( ( C137 . D233 ) + ( ( mlt (( ( len C137 ) |-> R10 ) , ( 1. (R8 , ( Len C137 )) )) ) . D233 ) ) by L1819 , MATRIXJ1:def 10;
L1821: ( dom D232 ) = ( dom C137 ) by MATRIXJ1:def 10;
L1822: ( C137 . D233 ) <> ( {} ) by L1821 , L1819 , FUNCT_1:def 9;
thus L1823: ( D232 . R6 ) is non  empty by L1822 , L1820 , MATRIX_3:def 3;
end;
reconsider D234 = D232 as  non-empty (FinSequence_of_Jordan_block of R10 , R8) by L1818 , FUNCT_1:def 9;
take D234;
take C138;
set D235 = ( AutMt (( id C135 ) , C138 , C138) );
set D236 = ( AutMt (C136 , C138 , C138) );
L1824:
now
L1825: ( Indices D235 ) = ( Indices D236 ) by MATRIX_1:26;
let R1 being Nat;
let R2 being Nat;
assume that
L1826: [ R1 , R2 ] in ( Indices D236 );
L1827: ( Indices ( D236 + ( ( - R10 ) * D235 ) ) ) = ( Indices D236 ) by MATRIX_1:26;
thus L1828: ( ( ( D236 + ( ( - R10 ) * D235 ) ) + ( R10 * D235 ) ) * (R1 , R2) ) = ( ( ( D236 + ( ( - R10 ) * D235 ) ) * (R1 , R2) ) + ( ( R10 * D235 ) * (R1 , R2) ) ) by L1827 , L1826 , MATRIX_3:def 3
.= ( ( ( D236 * (R1 , R2) ) + ( ( ( - R10 ) * D235 ) * (R1 , R2) ) ) + ( ( R10 * D235 ) * (R1 , R2) ) ) by L1826 , MATRIX_3:def 3
.= ( ( D236 * (R1 , R2) ) + ( ( ( ( - R10 ) * D235 ) * (R1 , R2) ) + ( ( R10 * D235 ) * (R1 , R2) ) ) ) by RLVECT_1:def 3
.= ( ( D236 * (R1 , R2) ) + ( ( ( - R10 ) * ( D235 * (R1 , R2) ) ) + ( ( R10 * D235 ) * (R1 , R2) ) ) ) by L1826 , L1825 , MATRIX_3:def 5
.= ( ( D236 * (R1 , R2) ) + ( ( ( - R10 ) * ( D235 * (R1 , R2) ) ) + ( R10 * ( D235 * (R1 , R2) ) ) ) ) by L1826 , L1825 , MATRIX_3:def 5
.= ( ( D236 * (R1 , R2) ) + ( ( ( - R10 ) + R10 ) * ( D235 * (R1 , R2) ) ) ) by VECTSP_1:def 3
.= ( ( D236 * (R1 , R2) ) + ( ( 0. R8 ) * ( D235 * (R1 , R2) ) ) ) by VECTSP_1:16
.= ( ( D236 * (R1 , R2) ) + ( 0. R8 ) ) by VECTSP_1:7
.= ( D236 * (R1 , R2) ) by RLVECT_1:def 4;
end;
L1829: ( Len ( mlt (( ( len C137 ) |-> R10 ) , ( 1. (R8 , ( Len C137 )) )) ) ) = ( Len ( 1. (R8 , ( Len C137 )) ) ) by MATRIXJ1:62
.= ( Len C137 ) by MATRIXJ1:56;
L1830: ( dom ( Len C137 ) ) = ( dom ( 1. (R8 , ( Len C137 )) ) ) by MATRIXJ1:def 8;
L1831: ( len ( 1. (R8 , ( Len C137 )) ) ) = ( len ( Len C137 ) ) by L1830 , FINSEQ_3:29
.= ( len C137 ) by CARD_1:def 7;
L1832: ( Sum ( Len C137 ) ) = ( len ( AutMt (D229 , C138 , C138) ) ) by L1816 , MATRIXJ1:def 5
.= ( len C138 ) by MATRIX_1:def 2;
L1833: ( Width ( mlt (( ( len C137 ) |-> R10 ) , ( 1. (R8 , ( Len C137 )) )) ) ) = ( Width ( 1. (R8 , ( Len C137 )) ) ) by MATRIXJ1:62
.= ( Len C137 ) by MATRIXJ1:56
.= ( Width C137 ) by MATRIXJ1:46;
L1834: ( Mx2Tran (( AutMt (( ( - R10 ) * ( id C135 ) ) , C138 , C138) ) , C138 , C138) ) = ( ( - R10 ) * ( id C135 ) ) by MATRLIN2:34
.= ( ( - R10 ) * ( Mx2Tran (D235 , C138 , C138) ) ) by MATRLIN2:34
.= ( Mx2Tran (( ( - R10 ) * D235 ) , C138 , C138) ) by MATRLIN2:38;
L1835: ( AutMt (( ( - R10 ) * ( id C135 ) ) , C138 , C138) ) = ( ( - R10 ) * D235 ) by L1834 , MATRLIN2:39;
L1836: ( ( AutMt (D229 , C138 , C138) ) + ( R10 * D235 ) ) = ( ( D236 + ( ( - R10 ) * D235 ) ) + ( R10 * D235 ) ) by L1835 , L1815 , MATRLIN:42
.= D236 by L1824 , MATRIX_1:27;
thus L1837: D236 = ( ( block_diagonal (C137 , ( 0. R8 )) ) + ( R10 * ( 1. (R8 , ( Sum ( Len C137 ) )) ) ) ) by L1836 , L1816 , L1832 , MATRLIN2:28
.= ( ( block_diagonal (C137 , ( 0. R8 )) ) + ( R10 * ( block_diagonal (( 1. (R8 , ( Len C137 )) ) , ( 0. R8 )) ) ) ) by MATRIXJ1:61
.= ( ( block_diagonal (C137 , ( 0. R8 )) ) + ( block_diagonal (( mlt (( ( len C137 ) |-> R10 ) , ( 1. (R8 , ( Len C137 )) )) ) , ( R10 * ( 0. R8 ) )) ) ) by L1831 , MATRIXJ1:65
.= ( ( block_diagonal (C137 , ( 0. R8 )) ) + ( block_diagonal (( mlt (( ( len C137 ) |-> R10 ) , ( 1. (R8 , ( Len C137 )) )) ) , ( 0. R8 )) ) ) by VECTSP_1:7
.= ( block_diagonal (D234 , ( ( 0. R8 ) + ( 0. R8 ) )) ) by L1829 , L1833 , MATRIXJ1:72
.= ( block_diagonal (D234 , ( 0. R8 )) ) by RLVECT_1:def 4;
end;
begin
theorem
L1838: (for B98 being  algebraic-closed Field holds (for B99 being non  trivial  finite-dimensional (VectSp of B98) holds (for B100 being (linear-transformation of B99 , B99) holds (ex B101 being  non-empty (FinSequence_of_Jordan_block of B98) st (ex B102 being (OrdBasis of B99) st (( AutMt (B100 , B102 , B102) ) = ( block_diagonal (B101 , ( 0. B98 )) ) & (for B103 being (Scalar of B98) holds (B103 is (eigenvalue of B100) iff (ex R1 being Nat st (R1 in ( dom B101 ) & ( B101 . R1 ) = ( Jordan_block (B103 , ( len ( B101 . R1 ) )) )))))))))))
proof
let C139 being  algebraic-closed Field;
defpred S19[ Nat ] means (for B104 being non  trivial  finite-dimensional (VectSp of C139) holds (( dim B104 ) <= $1 implies (for B105 being (linear-transformation of B104 , B104) holds (ex B106 being  non-empty (FinSequence_of_Jordan_block of C139) st (ex B107 being (OrdBasis of B104) st (( AutMt (B105 , B107 , B107) ) = ( block_diagonal (B106 , ( 0. C139 )) ) & (for B108 being (Scalar of C139) holds (B108 is (eigenvalue of B105) iff (ex R1 being Nat st (R1 in ( dom B106 ) & ( B106 . R1 ) = ( Jordan_block (B108 , ( len ( B106 . R1 ) )) )))))))))));
let C140 being non  trivial  finite-dimensional (VectSp of C139);
let C141 being (linear-transformation of C140 , C140);
L1839: (for R4 being Nat holds (S19[ R4 ] implies S19[ ( R4 + 1 ) ]))
proof
let R4 being Nat;
assume that
L1840: S19[ R4 ];
set D237 = ( R4 + 1 );
let C142 being non  trivial  finite-dimensional (VectSp of C139);
assume that
L1841: ( dim C142 ) <= D237;
per cases  by L1841 , NAT_1:8;
suppose L1842: ( dim C142 ) <= R4;

thus L1843: thesis by L1842 , L1840;
end;
suppose L1844: ( dim C142 ) = D237;

let C143 being (linear-transformation of C142 , C142);
L1845: C143 is  with_eigenvalues by VECTSP11:16;
consider C144 being (Vector of C142), C145 being (Scalar of C139) such that L1846: (C144 <> ( 0. C142 ) & ( C143 . C144 ) = ( C145 * C144 )) by L1845 , VECTSP11:def 1;
set D238 = ( C143 + ( ( - C145 ) * ( id C142 ) ) );
L1847: C145 is (eigenvalue of C143) by L1845 , L1846 , VECTSP11:def 2;
L1848: ( ker D238 ) is non  trivial by L1847 , L1845 , VECTSP11:14;
L1849: ( dim ( ker D238 ) ) <> ( 0 ) by L1848 , MATRLIN2:42;
consider R3 being Nat such that L1850: ( UnionKers D238 ) = ( ker ( D238 |^ R3 ) ) by VECTSP11:27;
set D239 = ( im ( D238 |^ R3 ) );
set D240 = ( ker ( D238 |^ R3 ) );
L1851: ( dim C142 ) = ( ( dim D240 ) + ( dim D239 ) ) by L1850 , VECTSP11:35 , VECTSP_9:34;
L1852: D239 is (Linear_Compl of D240) by L1850 , VECTSP11:35 , VECTSP_5:37;
reconsider D241 = ( C143 | D240 ) as (linear-transformation of D240 , D240) by VECTSP11:29;
consider C146 being  non-empty (FinSequence_of_Jordan_block of C145 , C139), C147 being (OrdBasis of D240) such that L1853: ( AutMt (D241 , C147 , C147) ) = ( block_diagonal (C146 , ( 0. C139 )) ) by L1805;
L1854: ( D238 |^ 1 ) = D238 by VECTSP11:19;
L1855: ( ker D238 ) is (Subspace of D240) by L1854 , L1850 , VECTSP11:25;
L1856: ( len C146 ) <> ( 0 )
proof
assume L1857: ( len C146 ) = ( 0 );
L1858: ( Len C146 ) = ( <*> ( NAT ) ) by L1857
.= ( <*> ( REAL ) );
L1859: ( 0 ) = ( len ( block_diagonal (C146 , ( 0. C139 )) ) ) by L1858 , MATRIXJ1:def 5 , RVSUM_1:72
.= ( len C147 ) by L1853 , MATRIX_1:def 2
.= ( dim D240 ) by MATRLIN2:21;
thus L1860: thesis by L1859 , L1855 , L1849 , VECTSP_9:25;
end;
reconsider D242 = ( C143 | D239 ) as (linear-transformation of D239 , D239) by VECTSP11:33;
L1861: ( D240 /\ D239 ) = ( (0). C142 ) by L1850 , VECTSP11:34;
L1862: C142 is_the_direct_sum_of D240 , D239 by L1850 , VECTSP11:35;
L1863: ( D240 + D239 ) = ( (Omega). C142 ) by L1862 , VECTSP_5:def 4;
per cases ;
suppose L1864: D239 is  trivial;

set D243 = the (OrdBasis of D239);
L1865: ( 0 ) = ( dim D239 ) by L1864 , MATRLIN2:42
.= ( len D243 ) by MATRLIN2:21
.= ( len ( AutMt (D242 , D243 , D243) ) ) by MATRIX_1:def 2;
L1866: ( AutMt (D242 , D243 , D243) ) = ( {} ) by L1865;
L1867: ( C147 ^ D243 ) is (OrdBasis of ( D240 + D239 )) by L1861 , MATRLIN2:26;
reconsider D244 = ( C147 ^ D243 ) as (OrdBasis of C142) by L1867 , L1863 , MATRLIN2:4;
take C146;
take D244;
L1868: (( dim D239 ) = ( 0 ) implies ( dim D239 ) = ( 0 ));
L1869: (( dim D240 ) = ( 0 ) implies ( dim D240 ) = ( 0 ));
thus L1870: ( AutMt (C143 , D244 , D244) ) = ( block_diagonal (<* ( AutMt (D241 , C147 , C147) ) , ( AutMt (D242 , D243 , D243) ) *> , ( 0. C139 )) ) by L1869 , L1862 , L1868 , MATRLIN2:27
.= ( block_diagonal (<* ( AutMt (D241 , C147 , C147) ) *> , ( 0. C139 )) ) by L1866 , MATRIXJ1:40
.= ( block_diagonal (C146 , ( 0. C139 )) ) by L1853 , MATRIXJ1:34;
let C148 being (Scalar of C139);
thus L1871: (C148 is (eigenvalue of C143) implies (ex R1 being Nat st (R1 in ( dom C146 ) & ( C146 . R1 ) = ( Jordan_block (C148 , ( len ( C146 . R1 ) )) ))))
proof
assume L1872: C148 is (eigenvalue of C143);
L1873: C148 = C145
proof
assume L1874: C145 <> C148;
L1875: (D242 is  with_eigenvalues & C148 is (eigenvalue of D242)) by L1874 , L1845 , L1850 , L1852 , L1872 , VECTSP11:39;
L1876: (ex B109 being (Vector of D239) st (B109 <> ( 0. D239 ) & ( D242 . B109 ) = ( C148 * B109 ))) by L1875 , VECTSP11:def 2;
thus L1877: thesis by L1876 , L1864 , STRUCT_0:def 18;
end;
take D245 = ( len C146 );
L1878: D245 in ( Seg ( len C146 ) ) by L1856 , FINSEQ_1:3;
thus L1879: D245 in ( dom C146 ) by L1878 , FINSEQ_1:def 3;
L1880: (ex R5 being Nat st ( C146 . D245 ) = ( Jordan_block (C145 , R5) )) by L1879 , L353;
thus L1881: thesis by L1880 , L1873 , L7;
end;

given R1 being Nat such that
L1882: R1 in ( dom C146 )
and
L1883: ( C146 . R1 ) = ( Jordan_block (C148 , ( len ( C146 . R1 ) )) );

L1884: ( C146 . R1 ) <> ( {} ) by L1882 , FUNCT_1:def 9;
L1885: ( len ( C146 . R1 ) ) in ( Seg ( len ( C146 . R1 ) ) ) by L1884 , FINSEQ_1:3;
L1886: [ ( len ( C146 . R1 ) ) , ( len ( C146 . R1 ) ) ] in [: ( Seg ( len ( C146 . R1 ) ) ) , ( Seg ( len ( C146 . R1 ) ) ) :] by L1885 , ZFMISC_1:87;
L1887: [ ( len ( C146 . R1 ) ) , ( len ( C146 . R1 ) ) ] in ( Indices ( C146 . R1 ) ) by L1886 , MATRIX_1:24;
L1888: (ex R5 being Nat st ( C146 . R1 ) = ( Jordan_block (C145 , R5) )) by L1882 , L353;
L1889: C145 = ( ( C146 . R1 ) * (( len ( C146 . R1 ) ) , ( len ( C146 . R1 ) )) ) by L1888 , L1887 , L7
.= C148 by L1883 , L1887 , L7;
thus L1890: thesis by L1889 , L1845 , L1846 , VECTSP11:def 2;
end;
suppose L1891: D239 is non  trivial;

L1892: (D237 <> ( dim D239 ) & ( dim D239 ) <= D237) by L1844 , L1855 , L1849 , L1851 , VECTSP_9:25;
L1893: ( dim D239 ) < D237 by L1892 , XXREAL_0:1;
L1894: ( dim D239 ) <= R4 by L1893 , NAT_1:13;
consider C149 being  non-empty (FinSequence_of_Jordan_block of C139), C150 being (OrdBasis of D239) such that L1895: ( AutMt (D242 , C150 , C150) ) = ( block_diagonal (C149 , ( 0. C139 )) ) and L1896: (for B110 being (Scalar of C139) holds (B110 is (eigenvalue of D242) iff (ex R1 being Nat st (R1 in ( dom C149 ) & ( C149 . R1 ) = ( Jordan_block (B110 , ( len ( C149 . R1 ) )) ))))) by L1894 , L1840 , L1891;
L1897: ( C147 ^ C150 ) is (OrdBasis of ( D240 + D239 )) by L1861 , MATRLIN2:26;
reconsider D246 = ( C147 ^ C150 ) as (OrdBasis of C142) by L1897 , L1863 , MATRLIN2:4;
set D247 = ( C146 ^ C149 );
L1898:
now
let R6 being set;
assume that
L1899: R6 in ( dom D247 );
reconsider D248 = R6 as Nat by L1899;
L1900:
now
per cases  by L1899 , FINSEQ_1:25;
suppose L1901: D248 in ( dom C146 );

L1902: ( D247 . D248 ) = ( C146 . D248 ) by L1901 , FINSEQ_1:def 7;
thus L1903: ( D247 . D248 ) is non  empty by L1902 , L1901 , FUNCT_1:def 9;
end;
suppose L1904: (ex R2 being Nat st (R2 in ( dom C149 ) & D248 = ( ( len C146 ) + R2 )));

consider R2 being Nat such that L1905: R2 in ( dom C149 ) and L1906: D248 = ( ( len C146 ) + R2 ) by L1904;
L1907: ( D247 . D248 ) = ( C149 . R2 ) by L1905 , L1906 , FINSEQ_1:def 7;
thus L1908: ( D247 . D248 ) is non  empty by L1907 , L1905 , FUNCT_1:def 9;
end;
end;
thus L1910: ( D247 . R6 ) is non  empty by L1900;
end;
L1911: D242 is  with_eigenvalues by L1891 , VECTSP11:16;
L1912: (( dim D239 ) = ( 0 ) implies ( dim D239 ) = ( 0 ));
reconsider D249 = D247 as  non-empty (FinSequence_of_Jordan_block of C139) by L1898 , FUNCT_1:def 9;
take D249;
take D246;
L1913: (( dim D240 ) = ( 0 ) implies ( dim D240 ) = ( 0 ));
thus L1914: ( AutMt (C143 , D246 , D246) ) = ( block_diagonal (<* ( block_diagonal (C146 , ( 0. C139 )) ) , ( block_diagonal (C149 , ( 0. C139 )) ) *> , ( 0. C139 )) ) by L1913 , L1853 , L1862 , L1895 , L1912 , MATRLIN2:27
.= ( block_diagonal (( <* ( block_diagonal (C146 , ( 0. C139 )) ) *> ^ C149 ) , ( 0. C139 )) ) by MATRIXJ1:36
.= ( block_diagonal (D249 , ( 0. C139 )) ) by MATRIXJ1:35;
let C151 being (Scalar of C139);
thus L1915: (C151 is (eigenvalue of C143) implies (ex R1 being Nat st (R1 in ( dom D249 ) & ( D249 . R1 ) = ( Jordan_block (C151 , ( len ( D249 . R1 ) )) ))))
proof
assume L1916: C151 is (eigenvalue of C143);
per cases ;
suppose L1917: C145 = C151;

take D250 = ( len C146 );
L1918: ( dom C146 ) c= ( dom D249 ) by FINSEQ_1:26;
L1919: D250 in ( Seg ( len C146 ) ) by L1856 , FINSEQ_1:3;
L1920: D250 in ( dom C146 ) by L1919 , FINSEQ_1:def 3;
L1921: ((ex R5 being Nat st ( C146 . D250 ) = ( Jordan_block (C145 , R5) )) & ( D249 . D250 ) = ( C146 . D250 )) by L1920 , L353 , FINSEQ_1:def 7;
thus L1922: thesis by L1921 , L1917 , L1920 , L1918 , L7;
end;
suppose L1923: C145 <> C151;

L1924: C151 is (eigenvalue of D242) by L1923 , L1845 , L1850 , L1852 , L1916 , VECTSP11:39;
consider R1 being Nat such that L1925: R1 in ( dom C149 ) and L1926: ( C149 . R1 ) = ( Jordan_block (C151 , ( len ( C149 . R1 ) )) ) by L1924 , L1896;
take D251 = ( ( len C146 ) + R1 );
L1927: ( D249 . D251 ) = ( C149 . R1 ) by L1925 , FINSEQ_1:def 7;
thus L1928: thesis by L1927 , L1925 , L1926 , FINSEQ_1:28;
end;
end;

given R1 being Nat such that
L1930: R1 in ( dom D249 )
and
L1931: ( D249 . R1 ) = ( Jordan_block (C151 , ( len ( D249 . R1 ) )) );

per cases  by L1930 , FINSEQ_1:25;
suppose L1932: R1 in ( dom C146 );

L1933: ( C146 . R1 ) <> ( {} ) by L1932 , FUNCT_1:def 9;
L1934: ( len ( C146 . R1 ) ) in ( Seg ( len ( C146 . R1 ) ) ) by L1933 , FINSEQ_1:3;
L1935: [ ( len ( C146 . R1 ) ) , ( len ( C146 . R1 ) ) ] in [: ( Seg ( len ( C146 . R1 ) ) ) , ( Seg ( len ( C146 . R1 ) ) ) :] by L1934 , ZFMISC_1:87;
L1936: [ ( len ( C146 . R1 ) ) , ( len ( C146 . R1 ) ) ] in ( Indices ( C146 . R1 ) ) by L1935 , MATRIX_1:24;
L1937: ( D249 . R1 ) = ( C146 . R1 ) by L1932 , FINSEQ_1:def 7;
L1938: (ex R5 being Nat st ( C146 . R1 ) = ( Jordan_block (C145 , R5) )) by L1932 , L353;
L1939: C145 = ( ( C146 . R1 ) * (( len ( C146 . R1 ) ) , ( len ( C146 . R1 ) )) ) by L1938 , L1936 , L7
.= C151 by L1931 , L1937 , L1936 , L7;
thus L1940: thesis by L1939 , L1845 , L1846 , VECTSP11:def 2;
end;
suppose L1941: (ex R2 being Nat st (R2 in ( dom C149 ) & R1 = ( ( len C146 ) + R2 )));

consider R2 being Nat such that L1942: R2 in ( dom C149 ) and L1943: R1 = ( ( len C146 ) + R2 ) by L1941;
L1944: ( D249 . R1 ) = ( C149 . R2 ) by L1942 , L1943 , FINSEQ_1:def 7;
L1945: C151 is (eigenvalue of D242) by L1944 , L1896 , L1931 , L1942;
consider C152 being (Vector of D239) such that L1946: C152 <> ( 0. D239 ) and L1947: ( D242 . C152 ) = ( C151 * C152 ) by L1945 , L1911 , VECTSP11:def 2;
L1948: ( 0. D239 ) = ( 0. C142 ) by VECTSP_4:11;
reconsider D252 = C152 as (Vector of C142) by VECTSP_4:10;
L1949: ( C151 * D252 ) = ( D242 . C152 ) by L1947 , VECTSP_4:14
.= ( C143 . D252 ) by FUNCT_1:49;
thus L1950: thesis by L1949 , L1845 , L1946 , L1948 , VECTSP11:def 2;
end;
end;
end;
end;
L1954: S19[ ( 0 ) ]
proof
let C153 being non  trivial  finite-dimensional (VectSp of C139);
assume L1955: ( dim C153 ) <= ( 0 );
L1956: ( dim C153 ) = ( 0 ) by L1955;
thus L1957: thesis by L1956 , MATRLIN2:42;
end;
L1958: (for R4 being Nat holds S19[ R4 ]) from NAT_1:sch 2(L1954 , L1839);
L1959: S19[ ( dim C140 ) ] by L1958;
thus L1960: thesis by L1959;
end;
::$N Jordan Matrix Decomposition Theorem
theorem
L1961: (for R4 being Nat holds (for B111 being  algebraic-closed Field holds (for B112 being (Matrix of R4 , B111) holds (ex B113 being  non-empty (FinSequence_of_Jordan_block of B111) st (ex B114 being (Matrix of R4 , B111) st (( Sum ( Len B113 ) ) = R4 & B114 is  invertible & B112 = ( ( B114 * ( block_diagonal (B113 , ( 0. B111 )) ) ) * ( B114 ~ ) )))))))
proof
let R4 being Nat;
let C154 being  algebraic-closed Field;
let C155 being (Matrix of R4 , C154);
per cases ;
suppose L1962: R4 = ( 0 );

reconsider D253 = ( {} ) as (Matrix of R4 , C154) by L1962 , MATRIX_1:13;
reconsider D254 = ( {} ) as (FinSequence_of_Jordan_block of C154) by L350;
reconsider D255 = D254 as  non-empty (FinSequence_of_Jordan_block of C154);
take D255;
take D253;
L1963: ( Len D255 ) = ( <*> ( NAT ) ) by CARD_1:27
.= ( <*> ( REAL ) );
thus L1964: ( Sum ( Len D255 ) ) = R4 by L1963 , L1962 , RVSUM_1:72;
L1965: ( 1_ C154 ) <> ( 0. C154 );
L1966: ( Det D253 ) = ( 1_ C154 ) by L1962 , MATRIXR2:41;
thus L1967: D253 is  invertible by L1966 , L1965 , LAPLACE:34;
reconsider D256 = ( block_diagonal (D255 , ( 0. C154 )) ) as (Matrix of R4 , C154) by L1962 , L1963 , RVSUM_1:72;
L1968: C155 = ( ( D253 * D256 ) * ( D253 ~ ) ) by L1962 , MATRIX_1:35;
thus L1969: thesis by L1968;
end;
suppose L1970: R4 > ( 0 );

set D257 = ( R4 -VectSp_over C154 );
set D258 = the (OrdBasis of D257);
L1971: ( len D258 ) = ( dim D257 ) by MATRLIN2:21
.= R4 by MATRIX13:112;
reconsider D259 = C155 as (Matrix of ( len D258 ) , C154) by L1971;
set D260 = ( Mx2Tran (D259 , D258 , D258) );
L1972: ( dim D257 ) = R4 by MATRIX13:112;
L1973: D257 is non  trivial by L1972 , L1970 , MATRLIN2:42;
consider C156 being  non-empty (FinSequence_of_Jordan_block of C154), C157 being (OrdBasis of D257) such that L1974: ( AutMt (D260 , C157 , C157) ) = ( block_diagonal (C156 , ( 0. C154 )) ) and L1975: (for B115 being (Scalar of C154) holds (B115 is (eigenvalue of D260) iff (ex R1 being Nat st (R1 in ( dom C156 ) & ( C156 . R1 ) = ( Jordan_block (B115 , ( len ( C156 . R1 ) )) ))))) by L1973 , L1838;
L1976: ( dom D260 ) = ( [#] D257 ) by FUNCT_2:def 1;
reconsider D261 = ( AutEqMt (( id D257 ) , D258 , C157) ) as (Matrix of R4 , C154) by L1971;
take C156;
take D261;
L1977: (( width D261 ) = R4 & ( len ( D261 ~ ) ) = R4) by L1970 , MATRIX_1:23;
L1978: ( rng D260 ) c= ( [#] D257 ) by RELAT_1:def 19;
L1979: ( len C157 ) = ( dim D257 ) by MATRLIN2:21
.= R4 by MATRIX13:112;
L1980: (( len ( AutMt (D260 , C157 , C157) ) ) = R4 & ( width ( AutMt (D260 , C157 , C157) ) ) = R4) by L1979 , L1970 , MATRIX_1:23;
thus L1981: ( Sum ( Len C156 ) ) = ( len ( AutMt (D260 , C157 , C157) ) ) by L1974 , MATRIXJ1:def 5
.= R4 by L1979 , MATRIX_1:def 2;
thus L1982: D261 is  invertible by L1971 , MATRLIN2:29;
thus L1983: C155 = ( AutMt (D260 , D258 , D258) ) by MATRLIN2:36
.= ( AutMt (( D260 * ( id D257 ) ) , D258 , D258) ) by L1976 , RELAT_1:52
.= ( ( AutMt (( id D257 ) , D258 , C157) ) * ( AutMt (D260 , C157 , D258) ) ) by L1970 , L1971 , L1979 , MATRLIN:41
.= ( D261 * ( AutMt (D260 , C157 , D258) ) ) by L1971 , L1979 , MATRLIN2:def 2
.= ( D261 * ( AutMt (( ( id D257 ) * D260 ) , C157 , D258) ) ) by L1978 , RELAT_1:53
.= ( D261 * ( ( AutMt (D260 , C157 , C157) ) * ( AutMt (( id D257 ) , C157 , D258) ) ) ) by L1970 , L1979 , MATRLIN:41
.= ( D261 * ( ( AutMt (D260 , C157 , C157) ) * ( AutEqMt (( id D257 ) , C157 , D258) ) ) ) by L1971 , L1979 , MATRLIN2:def 2
.= ( D261 * ( ( AutMt (D260 , C157 , C157) ) * ( D261 ~ ) ) ) by L1971 , MATRLIN2:29
.= ( ( D261 * ( block_diagonal (C156 , ( 0. C154 )) ) ) * ( D261 ~ ) ) by L1974 , L1977 , L1980 , MATRIX_3:33;
end;
end;
