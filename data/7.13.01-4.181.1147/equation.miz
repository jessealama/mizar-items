:: Equations in Many Sorted Algebras
::  by Artur Korni{\l}owicz
::
:: Received May 30, 1997
:: Copyright (c) 1997-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies XBOOLE_0, FUNCT_1, RELAT_1, TARSKI, PBOOLE, MEMBER_1, MSUALG_3,
      FUNCT_2, FUNCT_6, PZFMISC1, SUBSET_1, REALSET1, STRUCT_0, MSUALG_1,
      MSUALG_2, UNIALG_2, PARTFUN1, PRALG_2, CARD_3, RLVECT_2, PRELAMB,
      MSAFREE, FINSET_1, MSAFREE2, MSUALG_6, MARGREL1, NAT_1, GROUP_6,
      CLOSURE2, ZFMISC_1, FINSEQ_1, CARD_1, PRALG_3, FUNCT_4, FUNCOP_1,
      NUMBERS, ZF_LANG, MCART_1, ZF_MODEL, WELLORD1, MSUALG_4, EQUATION;
 notations TARSKI, XBOOLE_0, ZFMISC_1,
      XTUPLE_0, SUBSET_1, NUMBERS, RELAT_1, FUNCT_1,
      PBOOLE, RELSET_1, PARTFUN1, STRUCT_0, FUNCT_2, MCART_1, FINSET_1,
      ORDINAL1, FINSEQ_1, FINSEQ_2, FUNCT_4, FUNCT_6, PZFMISC1, CARD_3,
      MSUALG_1, PRALG_2, FUNCOP_1, MSUALG_2, PRALG_3, MSUALG_3, MSUALG_4,
      MSAFREE, MSAFREE2, CLOSURE2, MSUALG_6;
 constructors FUNCT_4, PZFMISC1, MSUALG_3, MSAFREE2, CLOSURE2, MSUALG_6,
      PRALG_3, RELSET_1, XTUPLE_0;
 registrations XBOOLE_0, SUBSET_1, ORDINAL1, RELSET_1, FUNCT_2, FUNCOP_1,
      FINSET_1, FINSEQ_1, STRUCT_0, MSUALG_1, MSUALG_2, RELAT_1, FUNCT_1,
      PRALG_2, MSUALG_3, MSAFREE, MSUALG_4, EXTENS_1, CLOSURE2, MSUALG_6,
      PRALG_3, MSUALG_9, MSSUBFAM, PBOOLE, AUTALG_1, XTUPLE_0;
 requirements SUBSET, BOOLE;
 definitions TARSKI, PBOOLE, PRALG_2, MSUALG_2, MSUALG_3, FINSET_1, MSAFREE,
      MSAFREE2, MSUALG_1, XBOOLE_0, PZFMISC1, XTUPLE_0;
 theorems MSUALG_1, EXTENS_1, MSAFREE2, MSSCYC_1, CARD_3, FUNCT_4, FUNCOP_1,
      FUNCT_1, FUNCT_2, MCART_1, MSAFREE, FINSEQ_1, CLOSURE2, FINSET_1,
      MSUALG_2, MSUALG_3, MSUALG_4, MSUALG_9, PBOOLE, PARTFUN1, MSUALG_6,
      MSSUBFAM, INSTALG1, PRALG_2, PRALG_3, RELAT_1, TARSKI, ZFMISC_1,
      RELSET_1, XBOOLE_0, XBOOLE_1, FUNCT_6, PZFMISC1, FINSEQ_2;
 schemes MSSUBFAM, PBOOLE, FUNCT_2, XBOOLE_0;

begin
theorem
L1: (for B1 being set holds (for B2 , B3 being non  empty set holds (for B4 being (Function of B1 , B2) holds (for B5 being (Function of B2 , B3) holds (( rng ( B5 * B4 ) ) = B3 implies ( rng B5 ) = B3)))))
proof
let C1 being set;
let C2 , C3 being non  empty set;
let C4 being (Function of C1 , C2);
let C5 being (Function of C2 , C3);
assume that
L2: ( rng ( C5 * C4 ) ) = C3;
thus L3: ( rng C5 ) c= C3;
let C6 being set;
assume L4: C6 in C3;
consider C7 being set such that L5: C7 in ( dom ( C5 * C4 ) ) and L6: C6 = ( ( C5 * C4 ) . C7 ) by L4 , L2 , FUNCT_1:def 3;
L7: ( dom C4 ) = C1 by FUNCT_2:def 1;
L8: ( C4 . C7 ) in ( rng C4 ) by L7 , L5 , FUNCT_1:def 3;
L9: ( dom ( C5 * C4 ) ) = C1 by FUNCT_2:def 1;
L10: ( rng C4 ) c= ( dom C5 ) by L9 , L7 , FUNCT_1:15;
L11: C6 = ( C5 . ( C4 . C7 ) ) by L5 , L6 , FUNCT_1:12;
thus L12: thesis by L11 , L10 , L8 , FUNCT_1:def 3;
end;
theorem
L13: (for R1 being set holds (for B6 being (ManySortedSet of R1) holds (for B7 , B8 being  non-empty (ManySortedSet of R1) holds (for B9 being (ManySortedFunction of B6 , B7) holds (for B10 being (ManySortedFunction of B7 , B8) holds (( B10 ** B9 ) is  "onto" implies B10 is  "onto"))))))
proof
let R1 being set;
let C8 being (ManySortedSet of R1);
let C9 , C10 being  non-empty (ManySortedSet of R1);
let C11 being (ManySortedFunction of C8 , C9);
let C12 being (ManySortedFunction of C9 , C10);
assume that
L14: ( C12 ** C11 ) is  "onto";
let C13 being set;
assume L15: C13 in R1;
L16: (( C11 . C13 ) is (Function of ( C8 . C13 ) , ( C9 . C13 )) & ( C12 . C13 ) is (Function of ( C9 . C13 ) , ( C10 . C13 ))) by L15 , PBOOLE:def 15;
L17: ( rng ( ( C12 . C13 ) * ( C11 . C13 ) ) ) = ( rng ( ( C12 ** C11 ) . C13 ) ) by L15 , MSUALG_3:2
.= ( C10 . C13 ) by L14 , L15 , MSUALG_3:def 3;
thus L18: thesis by L17 , L15 , L16 , L1;
end;
theorem
L19: (for B11 , B12 being non  empty set holds (for B13 , B14 being set holds (for B15 being Function holds ((B15 in ( Funcs (B11 , ( Funcs (B12 , B13) )) ) & B14 in B12) implies (( dom ( ( commute B15 ) . B14 ) ) = B11 & ( rng ( ( commute B15 ) . B14 ) ) c= B13)))))
proof
let C14 , C15 being non  empty set;
let C16 , C17 being set;
let C18 being Function;
assume that
L20: C18 in ( Funcs (C14 , ( Funcs (C15 , C16) )) )
and
L21: C17 in C15;
set D1 = ( commute C18 );
L22: D1 in ( Funcs (C15 , ( Funcs (C14 , C16) )) ) by L20 , FUNCT_6:55;
L23: (ex B16 being Function st (B16 = D1 & ( dom B16 ) = C15 & ( rng B16 ) c= ( Funcs (C14 , C16) ))) by L22 , FUNCT_2:def 2;
L24: ( D1 . C17 ) in ( rng D1 ) by L23 , L21 , FUNCT_1:def 3;
L25: (ex B17 being Function st (B17 = ( ( commute C18 ) . C17 ) & ( dom B17 ) = C14 & ( rng B17 ) c= C16)) by L24 , L23 , FUNCT_2:def 2;
thus L26: thesis by L25;
end;
theorem
L27: (for R1 being set holds (for B18 , B19 being (ManySortedSet of R1) holds (B18 is_transformable_to B19 implies (for B20 being (ManySortedFunction of R1) holds ((( doms B20 ) = B18 & ( rngs B20 ) c= B19) implies B20 is (ManySortedFunction of B18 , B19))))))
proof
let R1 being set;
let C19 , C20 being (ManySortedSet of R1);
assume that
L28: (for B21 being set holds (B21 in R1 implies (( C20 . B21 ) = ( {} ) implies ( C19 . B21 ) = ( {} ))));
let C21 being (ManySortedFunction of R1);
assume that
L29: ( doms C21 ) = C19
and
L30: ( rngs C21 ) c= C20;
let C22 being set;
assume L31: C22 in R1;
reconsider D2 = R1 as non  empty set by L31;
reconsider D3 = C22 as (Element of D2) by L31;
L32: ( dom ( C21 . D3 ) ) = ( C19 . D3 ) by L29 , MSSUBFAM:14;
L33: ( rng ( C21 . D3 ) ) = ( ( rngs C21 ) . D3 ) by MSSUBFAM:13;
L34: ( rng ( C21 . D3 ) ) c= ( C20 . D3 ) by L33 , L30 , PBOOLE:def 2;
thus L35: thesis by L34 , L32 , FUNCT_2:2;
end;
theorem
L36: (for R1 being set holds (for B22 , B23 being (ManySortedSet of R1) holds (for B24 being (ManySortedFunction of B22 , B23) holds (for B25 , B26 being (ManySortedSubset of B22) holds (for B27 being (ManySortedSubset of B25) holds (B26 = B27 implies ( ( B24 || B25 ) || B27 ) = ( B24 || B26 )))))))
proof
let R1 being set;
let C23 , C24 being (ManySortedSet of R1);
let C25 being (ManySortedFunction of C23 , C24);
let C26 , C27 being (ManySortedSubset of C23);
let C28 being (ManySortedSubset of C26);
assume that
L37: C27 = C28;
L38:
now
let C29 being set;
assume that
L39: C29 in R1;
L40: ( C25 . C29 ) is (Function of ( C23 . C29 ) , ( C24 . C29 )) by L39 , PBOOLE:def 15;
L41: C28 c= C26 by PBOOLE:def 18;
L42: ( C28 . C29 ) c= ( C26 . C29 ) by L41 , L39 , PBOOLE:def 2;
L43: ( ( C25 || C26 ) . C29 ) is (Function of ( C26 . C29 ) , ( C24 . C29 )) by L39 , PBOOLE:def 15;
reconsider D4 = ( ( C25 . C29 ) | ( C26 . C29 ) ) as (Function of ( C26 . C29 ) , ( C24 . C29 )) by L43 , L39 , L40 , MSAFREE:def 1;
thus L44: ( ( ( C25 || C26 ) || C28 ) . C29 ) = ( ( ( C25 || C26 ) . C29 ) | ( C28 . C29 ) ) by L39 , L43 , MSAFREE:def 1
.= ( D4 | ( C28 . C29 ) ) by L39 , L40 , MSAFREE:def 1
.= ( ( C25 . C29 ) | ( C28 . C29 ) ) by L42 , RELAT_1:74
.= ( ( C25 || C27 ) . C29 ) by L37 , L39 , L40 , MSAFREE:def 1;
end;
thus L45: thesis by L38 , PBOOLE:3;
end;
theorem
L46: (for R1 being set holds (for B28 being  non-empty (ManySortedSet of R1) holds (for B29 being (ManySortedSet of R1) holds (for B30 being (ManySortedSubset of B29) holds (for B31 being (ManySortedFunction of B30 , B28) holds (ex B32 being (ManySortedFunction of B29 , B28) st ( B32 || B30 ) = B31))))))
proof
let R1 being set;
let C30 being  non-empty (ManySortedSet of R1);
let C31 being (ManySortedSet of R1);
let C32 being (ManySortedSubset of C31);
let C33 being (ManySortedFunction of C32 , C30);
defpred S1[ set , set , set ] means (ex B33 being (Function of ( C32 . $3 ) , ( C30 . $3 )) st (B33 = ( C33 . $3 ) & ($2 in ( C32 . $3 ) implies $1 = ( B33 . $2 ))));
L47: (for B34 being set holds (B34 in R1 implies (for B35 being set holds (B35 in ( C31 . B34 ) implies (ex B36 being set st (B36 in ( C30 . B34 ) & S1[ B36 , B35 , B34 ]))))))
proof
let C34 being set;
assume L48: C34 in R1;
reconsider D5 = ( C33 . C34 ) as (Function of ( C32 . C34 ) , ( C30 . C34 )) by L48 , PBOOLE:def 15;
let C35 being set;
assume that
L49: C35 in ( C31 . C34 );
per cases ;
suppose L50: C35 in ( C32 . C34 );

take ( D5 . C35 );
thus L51: ( D5 . C35 ) in ( C30 . C34 ) by L48 , L50 , FUNCT_2:5;
take D5;
thus L52: thesis;
end;
suppose L53: (not C35 in ( C32 . C34 ));

consider C36 being set such that L54: C36 in ( C30 . C34 ) by L48 , XBOOLE_0:def 1;
take C36;
thus L55: C36 in ( C30 . C34 ) by L54;
take D5;
thus L56: thesis by L53;
end;
end;
consider C37 being (ManySortedFunction of C31 , C30) such that L58: (for B37 being set holds (B37 in R1 implies (ex B38 being (Function of ( C31 . B37 ) , ( C30 . B37 )) st (B38 = ( C37 . B37 ) & (for B39 being set holds (B39 in ( C31 . B37 ) implies S1[ ( B38 . B39 ) , B39 , B37 ])))))) from MSSUBFAM:sch 1(L47);
take C37;
L59:
now
let C38 being set;
assume L60: C38 in R1;
reconsider D6 = ( C33 . C38 ) as (Function of ( C32 . C38 ) , ( C30 . C38 )) by L60 , PBOOLE:def 15;
L61: ( dom D6 ) = ( C32 . C38 ) by L60 , FUNCT_2:def 1;
consider C39 being (Function of ( C31 . C38 ) , ( C30 . C38 )) such that L62: C39 = ( C37 . C38 ) and L63: (for B40 being set holds (B40 in ( C31 . C38 ) implies S1[ ( C39 . B40 ) , B40 , C38 ])) by L58 , L60;
L64: C32 c= C31 by PBOOLE:def 18;
L65: ( C32 . C38 ) c= ( C31 . C38 ) by L64 , L60 , PBOOLE:def 2;
L66: (for B41 being set holds (B41 in ( C32 . C38 ) implies ( D6 . B41 ) = ( ( C39 | ( C32 . C38 ) ) . B41 )))
proof
let C40 being set;
assume L67: C40 in ( C32 . C38 );
L68: (ex B42 being (Function of ( C32 . C38 ) , ( C30 . C38 )) st (B42 = ( C33 . C38 ) & (C40 in ( C32 . C38 ) implies ( C39 . C40 ) = ( B42 . C40 )))) by L67 , L63 , L65;
thus L69: thesis by L68 , L67 , FUNCT_1:49;
end;
L70: ( dom C39 ) = ( C31 . C38 ) by L60 , FUNCT_2:def 1;
L71: ( dom ( C39 | ( C32 . C38 ) ) ) = ( C32 . C38 ) by L70 , L65 , RELAT_1:62;
thus L72: ( ( C37 || C32 ) . C38 ) = ( C39 | ( C32 . C38 ) ) by L60 , L62 , MSAFREE:def 1
.= ( C33 . C38 ) by L61 , L71 , L66 , FUNCT_1:2;
end;
thus L73: thesis by L59 , PBOOLE:3;
end;
definition
let C41 being set;
let C42 being (ManySortedSet of C41);
let C43 being (ManySortedFunction of C41);
func C43 "" C42 -> (ManySortedSet of C41) means 
:L74: (for B43 being set holds (B43 in C41 implies ( it . B43 ) = ( ( C43 . B43 ) " ( C42 . B43 ) )));
existence
proof
deffunc H1(set) = ( ( C43 . $1 ) " ( C42 . $1 ) );
L75: (ex B44 being (ManySortedSet of C41) st (for B45 being set holds (B45 in C41 implies ( B44 . B45 ) = H1(B45)))) from PBOOLE:sch 4;
thus L76: thesis by L75;
end;
uniqueness
proof
let C44 , C45 being (ManySortedSet of C41);
assume that
L77: (for B46 being set holds (B46 in C41 implies ( C44 . B46 ) = ( ( C43 . B46 ) " ( C42 . B46 ) )))
and
L78: (for B47 being set holds (B47 in C41 implies ( C45 . B47 ) = ( ( C43 . B47 ) " ( C42 . B47 ) )));
L79:
now
let C46 being set;
assume L80: C46 in C41;
thus L81: ( C44 . C46 ) = ( ( C43 . C46 ) " ( C42 . C46 ) ) by L80 , L77
.= ( C45 . C46 ) by L78 , L80;
end;
thus L82: C44 = C45 by L79 , PBOOLE:3;
end;
end;
theorem
L84: (for R1 being set holds (for B48 , B49 , B50 being (ManySortedSet of R1) holds (for B51 being (ManySortedFunction of B48 , B49) holds ( B51 .:.: B50 ) is (ManySortedSubset of B49))))
proof
let R1 being set;
let C47 , C48 , C49 being (ManySortedSet of R1);
let C50 being (ManySortedFunction of C47 , C48);
let C51 being set;
assume L85: C51 in R1;
reconsider D7 = R1 as non  empty set by L85;
reconsider D8 = C51 as (Element of D7) by L85;
reconsider D9 = C47 , D10 = C48 as (ManySortedSet of D7);
reconsider D11 = C50 as (ManySortedFunction of D9 , D10);
L86: ( ( D11 . D8 ) .: ( C49 . D8 ) ) c= ( C48 . D8 );
thus L87: thesis by L86 , PBOOLE:def 20;
end;
theorem
L88: (for R1 being set holds (for B52 , B53 , B54 being (ManySortedSet of R1) holds (for B55 being (ManySortedFunction of B52 , B53) holds ( B55 "" B54 ) is (ManySortedSubset of B52))))
proof
let R1 being set;
let C52 , C53 , C54 being (ManySortedSet of R1);
let C55 being (ManySortedFunction of C52 , C53);
let C56 being set;
assume L89: C56 in R1;
reconsider D12 = R1 as non  empty set by L89;
reconsider D13 = C56 as (Element of D12) by L89;
reconsider D14 = C52 , D15 = C53 as (ManySortedSet of D12);
reconsider D16 = C55 as (ManySortedFunction of D14 , D15);
L90: ( ( D16 . D13 ) " ( C54 . D13 ) ) c= ( C52 . D13 );
thus L91: thesis by L90 , L74;
end;
theorem
L92: (for R1 being set holds (for B56 , B57 being (ManySortedSet of R1) holds (for B58 being (ManySortedFunction of B56 , B57) holds (B58 is  "onto" implies ( B58 .:.: B56 ) = B57))))
proof
let R1 being set;
let C57 , C58 being (ManySortedSet of R1);
let C59 being (ManySortedFunction of C57 , C58);
assume that
L93: C59 is  "onto";
L94:
now
let C60 being set;
assume L95: C60 in R1;
L96: ( C59 . C60 ) is (Function of ( C57 . C60 ) , ( C58 . C60 )) by L95 , PBOOLE:def 15;
per cases ;
suppose L97: (( C58 . C60 ) = ( {} ) implies ( C57 . C60 ) = ( {} ));

thus L98: ( ( C59 .:.: C57 ) . C60 ) = ( ( C59 . C60 ) .: ( C57 . C60 ) ) by L95 , PBOOLE:def 20
.= ( rng ( C59 . C60 ) ) by L96 , RELSET_1:22
.= ( C58 . C60 ) by L93 , L95 , MSUALG_3:def 3;
end;
suppose L99: (not (( C58 . C60 ) = ( {} ) implies ( C57 . C60 ) = ( {} )));

L100: ( C59 . C60 ) = ( {} ) by L99 , L96;
thus L101: ( ( C59 .:.: C57 ) . C60 ) = ( ( C59 . C60 ) .: ( C57 . C60 ) ) by L95 , PBOOLE:def 20
.= ( C58 . C60 ) by L99 , L100;
end;
end;
thus L103: thesis by L94 , PBOOLE:3;
end;
theorem
L104: (for R1 being set holds (for B59 , B60 being (ManySortedSet of R1) holds (for B61 being (ManySortedFunction of B59 , B60) holds (B59 is_transformable_to B60 implies ( B61 "" B60 ) = B59))))
proof
let R1 being set;
let C61 , C62 being (ManySortedSet of R1);
let C63 being (ManySortedFunction of C61 , C62);
assume that
L105: C61 is_transformable_to C62;
L106:
now
let C64 being set;
assume L107: C64 in R1;
L108: ( C63 . C64 ) is (Function of ( C61 . C64 ) , ( C62 . C64 )) by L107 , PBOOLE:def 15;
L109: (( C62 . C64 ) = ( {} ) implies ( C61 . C64 ) = ( {} )) by L105 , L107 , PZFMISC1:def 3;
thus L110: ( ( C63 "" C62 ) . C64 ) = ( ( C63 . C64 ) " ( C62 . C64 ) ) by L107 , L74
.= ( C61 . C64 ) by L109 , L108 , FUNCT_2:40;
end;
thus L111: thesis by L106 , PBOOLE:3;
end;
theorem
L112: (for R1 being set holds (for B62 being (ManySortedSet of R1) holds (for B63 being (ManySortedFunction of R1) holds (B62 c= ( rngs B63 ) implies ( B63 .:.: ( B63 "" B62 ) ) = B62))))
proof
let R1 being set;
let C65 being (ManySortedSet of R1);
let C66 being (ManySortedFunction of R1);
assume that
L113: C65 c= ( rngs C66 );
L114:
now
let C67 being set;
assume L115: C67 in R1;
L116: ( C65 . C67 ) c= ( ( rngs C66 ) . C67 ) by L115 , L113 , PBOOLE:def 2;
L117: ( C65 . C67 ) c= ( rng ( C66 . C67 ) ) by L116 , L115 , MSSUBFAM:13;
thus L118: ( ( C66 .:.: ( C66 "" C65 ) ) . C67 ) = ( ( C66 . C67 ) .: ( ( C66 "" C65 ) . C67 ) ) by L115 , PBOOLE:def 20
.= ( ( C66 . C67 ) .: ( ( C66 . C67 ) " ( C65 . C67 ) ) ) by L115 , L74
.= ( C65 . C67 ) by L117 , FUNCT_1:77;
end;
thus L119: thesis by L114 , PBOOLE:3;
end;
theorem
L120: (for R1 being set holds (for B64 being (ManySortedFunction of R1) holds (for B65 being (ManySortedSet of R1) holds ( B64 .:.: B65 ) c= ( rngs B64 ))))
proof
let R1 being set;
let C68 being (ManySortedFunction of R1);
let C69 being (ManySortedSet of R1);
let C70 being set;
assume L121: C70 in R1;
L122: ( ( C68 .:.: C69 ) . C70 ) = ( ( C68 . C70 ) .: ( C69 . C70 ) ) by L121 , PBOOLE:def 20;
L123: ( ( C68 .:.: C69 ) . C70 ) c= ( rng ( C68 . C70 ) ) by L122 , RELAT_1:111;
thus L124: thesis by L123 , L121 , MSSUBFAM:13;
end;
theorem
L125: (for R1 being set holds (for B66 being (ManySortedFunction of R1) holds ( B66 .:.: ( doms B66 ) ) = ( rngs B66 )))
proof
let R1 being set;
let C71 being (ManySortedFunction of R1);
L126:
now
let C72 being set;
assume L127: C72 in R1;
thus L128: ( ( C71 .:.: ( doms C71 ) ) . C72 ) = ( ( C71 . C72 ) .: ( ( doms C71 ) . C72 ) ) by L127 , PBOOLE:def 20
.= ( ( C71 . C72 ) .: ( dom ( C71 . C72 ) ) ) by L127 , MSSUBFAM:14
.= ( rng ( C71 . C72 ) ) by RELAT_1:113
.= ( ( rngs C71 ) . C72 ) by L127 , MSSUBFAM:13;
end;
thus L129: thesis by L126 , PBOOLE:3;
end;
theorem
L130: (for R1 being set holds (for B67 being (ManySortedFunction of R1) holds ( B67 "" ( rngs B67 ) ) = ( doms B67 )))
proof
let R1 being set;
let C73 being (ManySortedFunction of R1);
L131:
now
let C74 being set;
assume L132: C74 in R1;
thus L133: ( ( C73 "" ( rngs C73 ) ) . C74 ) = ( ( C73 . C74 ) " ( ( rngs C73 ) . C74 ) ) by L132 , L74
.= ( ( C73 . C74 ) " ( rng ( C73 . C74 ) ) ) by L132 , MSSUBFAM:13
.= ( dom ( C73 . C74 ) ) by RELAT_1:134
.= ( ( doms C73 ) . C74 ) by L132 , MSSUBFAM:14;
end;
thus L134: thesis by L131 , PBOOLE:3;
end;
theorem
L135: (for R1 being set holds (for B68 being (ManySortedSet of R1) holds ( ( id B68 ) .:.: B68 ) = B68))
proof
let R1 being set;
let C75 being (ManySortedSet of R1);
L136: ( rngs ( id C75 ) ) = C75 by EXTENS_1:9;
L137: ( doms ( id C75 ) ) = C75 by MSSUBFAM:17;
thus L138: thesis by L137 , L136 , L125;
end;
theorem
L139: (for R1 being set holds (for B69 being (ManySortedSet of R1) holds ( ( id B69 ) "" B69 ) = B69))
proof
let R1 being set;
let C76 being (ManySortedSet of R1);
L140: ( rngs ( id C76 ) ) = C76 by EXTENS_1:9;
L141: ( doms ( id C76 ) ) = C76 by MSSUBFAM:17;
thus L142: thesis by L141 , L140 , L130;
end;
begin
theorem
L143: (for R2 being non  empty non  void ManySortedSign holds (for B70 being MSAlgebra over R2 holds B70 is (MSSubAlgebra of ( the MSAlgebra of B70 ))))
proof
let R2 being non  empty non  void ManySortedSign;
let C77 being MSAlgebra over R2;
set D17 = ( the MSAlgebra of C77 );
L144: D17 is (MSSubAlgebra of D17) by MSUALG_2:5;
thus L145: (the Sorts of C77) is (MSSubset of D17) by L144 , MSUALG_2:def 9;
let C78 being (MSSubset of D17);
assume L146: C78 = (the Sorts of C77);
thus L147: C78 is  opers_closed by L146 , L144 , MSUALG_2:def 9;
thus L148: thesis by L144 , L146 , MSUALG_2:def 9;
end;
theorem
L149: (for R2 being non  empty non  void ManySortedSign holds (for B71 being MSAlgebra over R2 holds (for B72 being (MSSubAlgebra of B71) holds (for B73 being (OperSymbol of R2) holds (for B74 being set holds (B74 in ( Args (B73 , B72) ) implies B74 in ( Args (B73 , B71) )))))))
proof
let R2 being non  empty non  void ManySortedSign;
let C79 being MSAlgebra over R2;
let C80 being (MSSubAlgebra of C79);
let C81 being (OperSymbol of R2);
let C82 being set;
assume that
L150: C82 in ( Args (C81 , C80) );
reconsider D18 = (the Sorts of C80) as (MSSubset of C79) by MSUALG_2:def 9;
L151: ( the MSAlgebra of C79 ) = ( the MSAlgebra of C79 );
L152: C79 is (MSSubAlgebra of C79) by L151 , MSUALG_2:5;
reconsider D19 = (the Sorts of C79) as (MSSubset of C79) by L152 , MSUALG_2:def 9;
L153: D18 c= D19 by PBOOLE:def 18;
L154: ( ( ( D18 # ) * (the Arity of R2) ) . C81 ) c= ( ( ( D19 # ) * (the Arity of R2) ) . C81 ) by L153 , MSUALG_2:2;
thus L155: thesis by L154 , L150;
end;
theorem
L156: (for R2 being non  empty non  void ManySortedSign holds (for B75 being MSAlgebra over R2 holds (for B76 being (MSSubAlgebra of B75) holds (for B77 being (OperSymbol of R2) holds (for B78 being set holds (B78 in ( Args (B77 , B76) ) implies ( ( Den (B77 , B76) ) . B78 ) = ( ( Den (B77 , B75) ) . B78 )))))))
proof
let R2 being non  empty non  void ManySortedSign;
let C83 being MSAlgebra over R2;
let C84 being (MSSubAlgebra of C83);
let C85 being (OperSymbol of R2);
let C86 being set;
assume that
L157: C86 in ( Args (C85 , C84) );
reconsider D20 = (the Sorts of C84) as (MSSubset of C83) by MSUALG_2:def 9;
L158: D20 is  opers_closed by MSUALG_2:def 9;
L159: D20 is_closed_on C85 by L158 , MSUALG_2:def 6;
thus L160: ( ( Den (C85 , C84) ) . C86 ) = ( ( ( Opers (C83 , D20) ) . C85 ) . C86 ) by MSUALG_2:def 9
.= ( ( C85 /. D20 ) . C86 ) by MSUALG_2:def 8
.= ( ( ( Den (C85 , C83) ) | ( ( ( D20 # ) * (the Arity of R2) ) . C85 ) ) . C86 ) by L159 , MSUALG_2:def 7
.= ( ( Den (C85 , C83) ) . C86 ) by L157 , FUNCT_1:49;
end;
theorem
L161: (for R1 being set holds (for R2 being non  empty non  void ManySortedSign holds (for B79 being (MSAlgebra-Family of R1 , R2) holds (for B80 being (MSSubAlgebra of ( product B79 )) holds (for B81 being (OperSymbol of R2) holds (for B82 being set holds (B82 in ( Args (B81 , B80) ) implies (( ( Den (B81 , B80) ) . B82 ) is Function & ( ( Den (B81 , ( product B79 )) ) . B82 ) is Function))))))))
proof
let R1 being set;
let R2 being non  empty non  void ManySortedSign;
let C87 being (MSAlgebra-Family of R1 , R2);
let C88 being (MSSubAlgebra of ( product C87 ));
let C89 being (OperSymbol of R2);
let C90 being set;
set D21 = ( the_result_sort_of C89 );
assume L162: C90 in ( Args (C89 , C88) );
L163: C90 in ( Args (C89 , ( product C87 )) ) by L162 , L149;
L164: ( ( Den (C89 , ( product C87 )) ) . C90 ) in ( product ( Carrier (C87 , D21) ) ) by L163 , PRALG_3:19;
L165: ( ( Den (C89 , C88) ) . C90 ) in ( product ( Carrier (C87 , D21) ) ) by L164 , L162 , L156;
reconsider D22 = ( ( Den (C89 , C88) ) . C90 ) as (Element of ( ( SORTS C87 ) . D21 )) by L165 , PRALG_2:def 10;
L166: D22 is Function;
thus L167: ( ( Den (C89 , C88) ) . C90 ) is Function by L166;
thus L168: thesis by L162 , L166 , L156;
end;
definition
let C91 being non  void non  empty ManySortedSign;
let C92 being MSAlgebra over C91;
let C93 being (MSSubAlgebra of C92);
func SuperAlgebraSet C93 means 
:L169: (for B83 being set holds (B83 in it iff (ex B84 being  strict (MSSubAlgebra of C92) st (B83 = B84 & C93 is (MSSubAlgebra of B84)))));
existence
proof
defpred S2[ set ] means (ex B85 being  strict (MSSubAlgebra of C92) st ($1 = B85 & C93 is (MSSubAlgebra of B85)));
consider C94 being set such that L170: (for B86 being set holds (B86 in C94 iff (B86 in ( MSSub C92 ) & S2[ B86 ]))) from XBOOLE_0:sch 1;
take C94;
let C95 being set;
thus L171: (C95 in C94 implies (ex B87 being  strict (MSSubAlgebra of C92) st (C95 = B87 & C93 is (MSSubAlgebra of B87)))) by L170;
given C96 being  strict (MSSubAlgebra of C92) such that
L172: C95 = C96
and
L173: C93 is (MSSubAlgebra of C96);

L174: C95 in ( MSSub C92 ) by L172 , MSUALG_2:def 19;
thus L175: thesis by L174 , L170 , L172 , L173;
end;
uniqueness
proof
defpred S3[ set ] means (ex B88 being  strict (MSSubAlgebra of C92) st ($1 = B88 & C93 is (MSSubAlgebra of B88)));
L176: (for B89 , B90 being set holds (((for B91 being set holds (B91 in B89 iff S3[ B91 ])) & (for B92 being set holds (B92 in B90 iff S3[ B92 ]))) implies B89 = B90)) from XBOOLE_0:sch 3;
thus L177: thesis by L176;
end;
end;
registration
let C97 being non  void non  empty ManySortedSign;
let C98 being MSAlgebra over C97;
let C99 being (MSSubAlgebra of C98);
cluster ( SuperAlgebraSet C99 ) -> non  empty;
coherence
proof
L179: ( the MSAlgebra of C99 ) is (MSSubAlgebra of C99) by MSUALG_2:37;
L180: ( the MSAlgebra of C99 ) is (MSSubAlgebra of C98) by L179 , MSUALG_2:6;
L181: C99 is (MSSubAlgebra of ( the MSAlgebra of C99 )) by L143;
thus L182: thesis by L181 , L180 , L169;
end;
end;
registration
let C100 being non  empty non  void ManySortedSign;
cluster  strict  non-empty  free for MSAlgebra over C100;
existence
proof
set D23 = the  non-empty (ManySortedSet of (the carrier of C100));
take ( FreeMSA D23 );
thus L184: thesis;
end;
end;
registration
let C101 being non  empty non  void ManySortedSign;
let C102 being  non-empty MSAlgebra over C101;
let C103 being  non-empty  finite-yielding (MSSubset of C102);
cluster ( GenMSAlg C103 ) ->  finitely-generated;
coherence
proof
per cases ;
case L186: C101 is non  void;
let C104 being non  void non  empty ManySortedSign;
assume that
L187: C104 = C101;
let C105 being MSAlgebra over C104;
assume L188: C105 = ( GenMSAlg C103 );
reconsider D24 = C103 as (MSSubset of C105) by L188 , L187 , MSUALG_2:def 17;
L189: ( GenMSAlg D24 ) = C105 by L187 , L188 , EXTENS_1:18;
reconsider D25 = D24 as (GeneratorSet of C105) by L189 , L187 , L188 , MSAFREE:3;
take D25;
thus L190: thesis;
end;
case L191: C101 is  void;
thus L192: thesis by L191;
end;
end;
end;
registration
let C106 being non  empty non  void ManySortedSign;
let C107 being  non-empty MSAlgebra over C106;
cluster  strict  non-empty  finitely-generated for (MSSubAlgebra of C107);
existence
proof
set D26 = the  non-empty  finite-yielding (ManySortedSubset of (the Sorts of C107));
take ( GenMSAlg D26 );
thus L195: thesis;
end;
end;
registration
let C108 being non  empty non  void ManySortedSign;
let C109 being  feasible MSAlgebra over C108;
cluster  feasible for (MSSubAlgebra of C109);
existence
proof
L197: ( the MSAlgebra of C109 ) = ( the MSAlgebra of C109 );
reconsider D27 = C109 as (MSSubAlgebra of C109) by L197 , MSUALG_2:5;
take D27;
thus L198: thesis;
end;
end;
theorem
L200: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for B93 being MSAlgebra over R2 holds (for B94 being (MSSubAlgebra of B93) holds (for B95 being (ManySortedSubset of (the Sorts of B93)) holds (B95 = (the Sorts of B94) implies (for B96 being (ManySortedFunction of B93 , R3) holds (for B97 being (ManySortedFunction of B94 , R3) holds (B97 = ( B96 || B95 ) implies (for B98 being (OperSymbol of R2) holds (for B99 being (Element of ( Args (B98 , B93) )) holds (for B100 being (Element of ( Args (B98 , B94) )) holds ((( Args (B98 , B94) ) <> ( {} ) & B99 = B100) implies ( B96 # B99 ) = ( B97 # B100 ))))))))))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let C110 being MSAlgebra over R2;
let C111 being (MSSubAlgebra of C110);
let C112 being (ManySortedSubset of (the Sorts of C110));
assume that
L201: C112 = (the Sorts of C111);
let C113 being (ManySortedFunction of C110 , R3);
let C114 being (ManySortedFunction of C111 , R3);
assume that
L202: C114 = ( C113 || C112 );
let C115 being (OperSymbol of R2);
let C116 being (Element of ( Args (C115 , C110) ));
let C117 being (Element of ( Args (C115 , C111) ));
assume that
L203: ( Args (C115 , C111) ) <> ( {} )
and
L204: C116 = C117;
set D28 = ( C113 # C116 );
set D29 = ( C114 # C117 );
set D30 = ( the_arity_of C115 );
L205: C117 in ( Args (C115 , C110) ) by L203 , L149;
reconsider D31 = C116 , D32 = C117 as Function by L205 , MSUALG_6:1;
L206: ( dom D32 ) = ( dom D30 ) by L203 , MSUALG_3:6;
L207: ( dom D31 ) = ( dom D30 ) by L205 , MSUALG_3:6;
L208:
now
let C118 being set;
assume L209: C118 in ( dom D30 );
reconsider D33 = C118 as Nat by L209;
reconsider D34 = ( C113 . ( D30 . C118 ) ) as (Function of ( (the Sorts of C110) . ( D30 . C118 ) ) , ( (the Sorts of R3) . ( D30 . C118 ) )) by L209 , PARTFUN1:4 , PBOOLE:def 15;
L210: ( D30 . C118 ) in (the carrier of R2) by L209 , PARTFUN1:4;
L211: ( C114 . ( D30 . D33 ) ) = ( D34 | ( C112 . ( D30 . C118 ) ) ) by L210 , L202 , MSAFREE:def 1;
L212: ( dom ( (the Sorts of C111) * ( the_arity_of C115 ) ) ) = ( dom D30 ) by PARTFUN1:def 2;
L213: ( D31 . C118 ) in ( ( (the Sorts of C111) * D30 ) . C118 ) by L212 , L203 , L204 , L209 , MSUALG_3:6;
L214: ( D31 . C118 ) in ( C112 . ( D30 . C118 ) ) by L213 , L201 , L209 , FUNCT_1:13;
thus L215: ( D28 . C118 ) = ( D28 . D33 )
.= ( ( C113 . ( D30 /. C118 ) ) . ( D31 . C118 ) ) by L205 , L207 , L209 , MSUALG_3:24
.= ( ( C113 . ( D30 . C118 ) ) . ( D31 . C118 ) ) by L209 , PARTFUN1:def 6
.= ( ( C114 . ( D30 . C118 ) ) . ( D31 . C118 ) ) by L211 , L214 , FUNCT_1:49
.= ( ( C114 . ( D30 /. C118 ) ) . ( D32 . C118 ) ) by L204 , L209 , PARTFUN1:def 6
.= ( D29 . D33 ) by L203 , L206 , L209 , MSUALG_3:24
.= ( D29 . C118 );
end;
L216: (( dom D28 ) = ( dom D30 ) & ( dom D29 ) = ( dom D30 )) by MSUALG_3:6;
thus L217: thesis by L216 , L208 , FUNCT_1:2;
end;
theorem
L218: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for B101 being  feasible MSAlgebra over R2 holds (for B102 being  feasible (MSSubAlgebra of B101) holds (for B103 being (ManySortedSubset of (the Sorts of B101)) holds (B103 = (the Sorts of B102) implies (for B104 being (ManySortedFunction of B101 , R3) holds (B104 is_homomorphism B101 , R3 implies (for B105 being (ManySortedFunction of B102 , R3) holds (B105 = ( B104 || B103 ) implies B105 is_homomorphism B102 , R3))))))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let C119 being  feasible MSAlgebra over R2;
let C120 being  feasible (MSSubAlgebra of C119);
let C121 being (ManySortedSubset of (the Sorts of C119));
assume that
L219: C121 = (the Sorts of C120);
let C122 being (ManySortedFunction of C119 , R3);
assume that
L220: C122 is_homomorphism C119 , R3;
let C123 being (ManySortedFunction of C120 , R3);
assume that
L221: C123 = ( C122 || C121 );
let C124 being (OperSymbol of R2);
assume that
L222: ( Args (C124 , C120) ) <> ( {} );
let C125 being (Element of ( Args (C124 , C120) ));
reconsider D35 = C125 as (Element of ( Args (C124 , C119) )) by L222 , L149;
set D36 = ( the_result_sort_of C124 );
L223: C125 in ( Args (C124 , C119) ) by L222 , L149;
L224: ( Result (C124 , C120) ) <> ( {} ) by L222 , MSUALG_6:def 1;
L225: ( ( Den (C124 , C120) ) . C125 ) in ( Result (C124 , C120) ) by L224 , L222 , FUNCT_2:5;
L226: ( ( Den (C124 , C120) ) . C125 ) in ( (the Sorts of C120) . ( (the ResultSort of R2) . C124 ) ) by L225 , FUNCT_2:15;
L227: ( ( Den (C124 , C119) ) . C125 ) = ( ( Den (C124 , C120) ) . C125 ) by L222 , L156;
thus L228: ( ( C123 . ( the_result_sort_of C124 ) ) . ( ( Den (C124 , C120) ) . C125 ) ) = ( ( C122 . D36 ) . ( ( Den (C124 , C119) ) . C125 ) ) by L227 , L219 , L221 , L226 , INSTALG1:39
.= ( ( Den (C124 , R3) ) . ( C122 # D35 ) ) by L220 , L223 , MSUALG_3:def 7
.= ( ( Den (C124 , R3) ) . ( C123 # C125 ) ) by L219 , L221 , L222 , L200;
end;
theorem
L229: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for B106 being  strict  non-empty MSAlgebra over R2 holds (for B107 being (GeneratorSet of R3) holds (for B108 being  non-empty (GeneratorSet of B106) holds (for B109 being (ManySortedFunction of R3 , B106) holds ((B108 c= ( B109 .:.: B107 ) & B109 is_homomorphism R3 , B106) implies B109 is_epimorphism R3 , B106)))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let C126 being  strict  non-empty MSAlgebra over R2;
let C127 being (GeneratorSet of R3);
let C128 being  non-empty (GeneratorSet of C126);
let C129 being (ManySortedFunction of R3 , C126);
assume that
L230: C128 c= ( C129 .:.: C127 )
and
L231: C129 is_homomorphism R3 , C126;
reconsider D37 = (the Sorts of ( Image C129 )) as  non-empty (MSSubset of C126) by MSUALG_2:def 9;
L232: ( C129 .:.: C127 ) c= ( C129 .:.: (the Sorts of R3) ) by EXTENS_1:2;
L233: C128 c= ( C129 .:.: (the Sorts of R3) ) by L232 , L230 , PBOOLE:13;
L234: C128 c= (the Sorts of ( Image C129 )) by L233 , L231 , MSUALG_3:def 12;
L235: C128 is (ManySortedSubset of (the Sorts of ( Image C129 ))) by L234 , PBOOLE:def 18;
L236: ( GenMSAlg C128 ) is (MSSubAlgebra of ( GenMSAlg D37 )) by L235 , EXTENS_1:17;
reconsider D38 = (the Sorts of ( Image C129 )) as  non-empty (MSSubset of ( Image C129 )) by PBOOLE:def 18;
L237: (D37 is (GeneratorSet of ( Image C129 )) & ( GenMSAlg D37 ) = ( GenMSAlg D38 )) by EXTENS_1:18 , MSAFREE2:6;
L238: ( GenMSAlg D37 ) = ( Image C129 ) by L237 , MSAFREE:3;
L239: C126 is (MSSubAlgebra of ( Image C129 )) by L238 , L236 , MSAFREE:3;
L240: ( Image C129 ) = C126 by L239 , MSUALG_2:7;
thus L241: thesis by L240 , L231 , MSUALG_3:19;
end;
theorem
L242: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R4 being  non-empty MSAlgebra over R2 holds (for B110 being  strict  free  non-empty MSAlgebra over R2 holds (for B111 being (ManySortedFunction of R3 , R4) holds (B111 is_epimorphism R3 , R4 implies (for B112 being (ManySortedFunction of B110 , R4) holds (B112 is_homomorphism B110 , R4 implies (ex B113 being (ManySortedFunction of B110 , R3) st (B113 is_homomorphism B110 , R3 & B112 = ( B111 ** B113 )))))))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R4 being  non-empty MSAlgebra over R2;
let C130 being  strict  free  non-empty MSAlgebra over R2;
let C131 being (ManySortedFunction of R3 , R4);
assume that
L243: C131 is_epimorphism R3 , R4;
set D39 = (the Sorts of R3);
set D40 = (the Sorts of R4);
set D41 = (the carrier of R2);
let C132 being (ManySortedFunction of C130 , R4);
assume that
L244: C132 is_homomorphism C130 , R4;
consider C133 being (GeneratorSet of C130) such that L245: C133 is  free by MSAFREE:def 6;
defpred S4[ set , set , set ] means (ex B114 being (Function of ( D39 . $3 ) , ( D40 . $3 )) st (ex B115 being (Function of ( C133 . $3 ) , ( D40 . $3 )) st (B114 = ( C131 . $3 ) & B115 = ( ( C132 || C133 ) . $3 ) & $1 in ( B114 " { ( B115 . $2 ) } ))));
L246: (for B116 being set holds (B116 in D41 implies (for B117 being set holds (B117 in ( C133 . B116 ) implies (ex B118 being set st (B118 in ( D39 . B116 ) & S4[ B118 , B117 , B116 ]))))))
proof
let C134 being set;
assume that
L247: C134 in D41;
reconsider D42 = ( ( C132 || C133 ) . C134 ) as (Function of ( C133 . C134 ) , ( D40 . C134 )) by L247 , PBOOLE:def 15;
reconsider D43 = ( C131 . C134 ) as (Function of ( D39 . C134 ) , ( D40 . C134 )) by L247 , PBOOLE:def 15;
let C135 being set;
assume L248: C135 in ( C133 . C134 );
L249: ( D42 . C135 ) in ( D40 . C134 ) by L248 , L247 , FUNCT_2:5;
L250: C131 is  "onto" by L243 , MSUALG_3:def 8;
L251: ( rng ( C131 . C134 ) ) = ( D40 . C134 ) by L250 , L247 , MSUALG_3:def 3;
L252: ( D43 " { ( D42 . C135 ) } ) <> ( {} ) by L251 , L249 , FUNCT_2:41;
consider C136 being set such that L253: C136 in ( D43 " { ( D42 . C135 ) } ) by L252 , XBOOLE_0:def 1;
take C136;
thus L254: C136 in ( D39 . C134 ) by L253;
thus L255: thesis by L253;
end;
consider C137 being (ManySortedFunction of C133 , D39) such that L256: (for B119 being set holds (B119 in D41 implies (ex B120 being (Function of ( C133 . B119 ) , ( D39 . B119 )) st (B120 = ( C137 . B119 ) & (for B121 being set holds (B121 in ( C133 . B119 ) implies S4[ ( B120 . B121 ) , B121 , B119 ])))))) from MSSUBFAM:sch 1(L246);
consider C138 being (ManySortedFunction of C130 , R3) such that L257: C138 is_homomorphism C130 , R3 and L258: ( C138 || C133 ) = C137 by L245 , MSAFREE:def 5;
L259:
now
let C139 being set;
assume L260: C139 in D41;
reconsider D44 = ( C131 . C139 ) as (Function of ( D39 . C139 ) , ( D40 . C139 )) by L260 , PBOOLE:def 15;
reconsider D45 = ( ( C132 || C133 ) . C139 ) as (Function of ( C133 . C139 ) , ( D40 . C139 )) by L260 , PBOOLE:def 15;
consider C140 being (Function of ( C133 . C139 ) , ( D39 . C139 )) such that L261: C140 = ( C137 . C139 ) and L262: (for B122 being set holds (B122 in ( C133 . C139 ) implies (ex B123 being (Function of ( D39 . C139 ) , ( D40 . C139 )) st (ex B124 being (Function of ( C133 . C139 ) , ( D40 . C139 )) st (B123 = ( C131 . C139 ) & B124 = ( ( C132 || C133 ) . C139 ) & ( C140 . B122 ) in ( B123 " { ( B124 . B122 ) } )))))) by L256 , L260;
L263:
now
let C141 being set;
assume L264: C141 in ( C133 . C139 );
consider C142 being (Function of ( D39 . C139 ) , ( D40 . C139 )), C143 being (Function of ( C133 . C139 ) , ( D40 . C139 )) such that L265: (C142 = ( C131 . C139 ) & C143 = ( ( C132 || C133 ) . C139 )) and L266: ( C140 . C141 ) in ( C142 " { ( C143 . C141 ) } ) by L264 , L262;
L267: ( C142 . ( C140 . C141 ) ) in { ( C143 . C141 ) } by L260 , L266 , FUNCT_2:38;
L268: ( C142 . ( C140 . C141 ) ) = ( C143 . C141 ) by L267 , TARSKI:def 1;
thus L269: ( ( D44 * C140 ) . C141 ) = ( D45 . C141 ) by L268 , L264 , L265 , L266 , FUNCT_2:15;
end;
L270: (( C133 . C139 ) = ( dom D45 ) & ( C133 . C139 ) = ( dom ( D44 * C140 ) )) by L260 , FUNCT_2:def 1;
L271: D45 = ( D44 * C140 ) by L270 , L263 , FUNCT_1:2;
thus L272: ( ( C132 || C133 ) . C139 ) = ( ( C131 ** C137 ) . C139 ) by L271 , L260 , L261 , MSUALG_3:2;
end;
L273: ( C132 || C133 ) = ( C131 ** ( C138 || C133 ) ) by L259 , L258 , PBOOLE:3;
L274: ( C132 || C133 ) = ( ( C131 ** C138 ) || C133 ) by L273 , EXTENS_1:4;
take C138;
thus L275: C138 is_homomorphism C130 , R3 by L257;
L276: C131 is_homomorphism R3 , R4 by L243 , MSUALG_3:def 8;
L277: ( C131 ** C138 ) is_homomorphism C130 , R4 by L276 , L257 , MSUALG_3:10;
thus L278: thesis by L277 , L244 , L274 , EXTENS_1:19;
end;
theorem
L279: (for R2 being non  empty non  void ManySortedSign holds (for B125 being non  empty  finite set holds (for B126 being  non-empty MSAlgebra over R2 holds (for B127 being (MSAlgebra-Family of B125 , R2) holds ((for B128 being (Element of B125) holds (ex B129 being  strict  non-empty  finitely-generated (MSSubAlgebra of B126) st B129 = ( B127 . B128 ))) implies (ex B130 being  strict  non-empty  finitely-generated (MSSubAlgebra of B126) st (for B131 being (Element of B125) holds ( B127 . B131 ) is (MSSubAlgebra of B130))))))))
proof
let R2 being non  empty non  void ManySortedSign;
let C144 being non  empty  finite set;
let C145 being  non-empty MSAlgebra over R2;
let C146 being (MSAlgebra-Family of C144 , R2);
assume that
L280: (for B132 being (Element of C144) holds (ex B133 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) st B133 = ( C146 . B132 )));
set D46 = { B134 where B134 is (Element of ( MSSub C145 )) : (ex B135 being (Element of C144) st (ex B136 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) st (B134 = ( C146 . B135 ) & B134 = B136))) };
set D47 = (the carrier of R2);
set D48 = the (Element of C144);
consider C147 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) such that L281: C147 = ( C146 . D48 ) by L280;
L282: C147 is (Element of ( MSSub C145 )) by MSUALG_2:def 19;
L283: C147 in D46 by L282 , L281;
reconsider D49 = D46 as non  empty set by L283;
defpred S5[ set , set ] means (ex B137 being  strict  non-empty (MSSubAlgebra of C145) st (ex B138 being (GeneratorSet of B137) st ($1 = B137 & $2 = B138 & B138 is  non-empty  finite-yielding)));
L284: (for B139 being (Element of D49) holds (ex B140 being (Element of ( Bool (the Sorts of C145) )) st S5[ B139 , B140 ]))
proof
let C148 being (Element of D49);
L285: C148 in D49;
consider C149 being (Element of ( MSSub C145 )) such that L286: C148 = C149 and L287: (ex B141 being (Element of C144) st (ex B142 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) st (C149 = ( C146 . B141 ) & C149 = B142))) by L285;
consider C150 being (Element of C144), C151 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) such that L288: C149 = ( C146 . C150 ) and L289: C149 = C151 by L287;
consider C152 being (GeneratorSet of C151) such that L290: C152 is  finite-yielding by MSAFREE2:def 10;
consider C153 being  non-empty  finite-yielding (ManySortedSubset of (the Sorts of C151)) such that L291: C152 c= C153 by L290 , MSUALG_9:7;
L292: (the Sorts of C151) is (MSSubset of C145) by MSUALG_2:def 9;
L293: (C153 c= (the Sorts of C151) & (the Sorts of C151) c= (the Sorts of C145)) by L292 , PBOOLE:def 18;
L294: C153 c= (the Sorts of C145) by L293 , PBOOLE:13;
L295: C153 is (ManySortedSubset of (the Sorts of C145)) by L294 , PBOOLE:def 18;
reconsider D50 = C153 as (Element of ( Bool (the Sorts of C145) )) by L295 , CLOSURE2:def 1;
reconsider D51 = C153 as (GeneratorSet of C151) by L291 , MSSCYC_1:21;
take D50;
take C151;
take D51;
thus L296: C148 = C151 by L286 , L289;
thus L297: thesis;
end;
consider C154 being (Function of D49 , ( Bool (the Sorts of C145) )) such that L298: (for B143 being (Element of D49) holds S5[ B143 , ( C154 . B143 ) ]) from FUNCT_2:sch 3(L284);
deffunc H2(set) = ( union { B144 where B144 is (Element of ( bool ( (the Sorts of C145) . $1 ) )) : (ex B145 being (Element of C144) st (ex B146 being (ManySortedSet of D47) st (B146 = ( C154 . ( C146 . B145 ) ) & B144 = ( B146 . $1 )))) } );
consider C155 being (ManySortedSet of D47) such that L299: (for B147 being set holds (B147 in D47 implies ( C155 . B147 ) = H2(B147))) from PBOOLE:sch 4;
L300: C155 is (ManySortedSubset of (the Sorts of C145))
proof
let C156 being set;
assume that
L301: C156 in D47;
let C157 being set;
set D52 = { B148 where B148 is (Element of ( bool ( (the Sorts of C145) . C156 ) )) : (ex B149 being (Element of C144) st (ex B150 being (ManySortedSet of D47) st (B150 = ( C154 . ( C146 . B149 ) ) & B148 = ( B150 . C156 )))) };
assume L302: C157 in ( C155 . C156 );
L303: C157 in ( union D52 ) by L302 , L299 , L301;
consider C158 being set such that L304: C157 in C158 and L305: C158 in D52 by L303 , TARSKI:def 4;
consider C159 being (Element of ( bool ( (the Sorts of C145) . C156 ) )) such that L306: C158 = C159 and L307: (ex B151 being (Element of C144) st (ex B152 being (ManySortedSet of D47) st (B152 = ( C154 . ( C146 . B151 ) ) & C159 = ( B152 . C156 )))) by L305;
thus L308: thesis by L304 , L306;
end;
reconsider D53 = C155 as (MSSubset of C145) by L300;
L309: D53 is  non-empty
proof
set D54 = the (Element of C144);
consider C160 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) such that L310: C160 = ( C146 . D54 ) by L280;
L311: C160 is (Element of ( MSSub C145 )) by MSUALG_2:def 19;
L312: ( C146 . D54 ) in D49 by L311 , L310;
L313: (ex B153 being  strict  non-empty (MSSubAlgebra of C145) st (ex B154 being (GeneratorSet of B153) st (( C146 . D54 ) = B153 & ( C154 . ( C146 . D54 ) ) = B154 & B154 is  non-empty  finite-yielding))) by L312 , L298;
reconsider D55 = ( C154 . ( C146 . D54 ) ) as  finite-yielding (Element of ( Bool (the Sorts of C145) )) by L313 , L312 , FUNCT_2:5;
let C161 being set;
assume that
L314: C161 in D47;
consider C162 being set such that L315: C162 in ( D55 . C161 ) by L314 , L313 , XBOOLE_0:def 1;
set D56 = { B155 where B155 is (Element of ( bool ( (the Sorts of C145) . C161 ) )) : (ex B156 being (Element of C144) st (ex B157 being (ManySortedSet of D47) st (B157 = ( C154 . ( C146 . B156 ) ) & B155 = ( B157 . C161 )))) };
L316: D55 c= (the Sorts of C145) by PBOOLE:def 18;
L317: ( D55 . C161 ) c= ( (the Sorts of C145) . C161 ) by L316 , L314 , PBOOLE:def 2;
L318: ( D55 . C161 ) in D56 by L317;
L319: C162 in ( union D56 ) by L318 , L315 , TARSKI:def 4;
thus L320: thesis by L319 , L299 , L314;
end;
reconsider D57 = D53 as  non-empty (MSSubset of C145) by L309;
L321:
now
set D58 = the (Element of C144);
let C163 being set;
assume that
L322: C163 in D47;
set D59 = { B158 where B158 is (Element of ( bool ( (the Sorts of C145) . C163 ) )) : (ex B159 being (Element of C144) st (ex B160 being (ManySortedSet of D47) st (B160 = ( C154 . ( C146 . B159 ) ) & B158 = ( B160 . C163 )))) };
consider C164 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) such that L323: C164 = ( C146 . D58 ) by L280;
L324: C164 is (Element of ( MSSub C145 )) by MSUALG_2:def 19;
L325: ( C146 . D58 ) in D49 by L324 , L323;
L326: (ex B161 being  strict  non-empty (MSSubAlgebra of C145) st (ex B162 being (GeneratorSet of B161) st (( C146 . D58 ) = B161 & ( C154 . ( C146 . D58 ) ) = B162 & B162 is  non-empty  finite-yielding))) by L325 , L298;
reconsider D60 = ( C154 . ( C146 . D58 ) ) as  finite-yielding (Element of ( Bool (the Sorts of C145) )) by L326 , L325 , FUNCT_2:5;
L327: D60 c= (the Sorts of C145) by PBOOLE:def 18;
L328: ( D60 . C163 ) c= ( (the Sorts of C145) . C163 ) by L327 , L322 , PBOOLE:def 2;
L329: ( D60 . C163 ) in D59 by L328;
thus L330: D59 is non  empty by L329;
end;
L331: D57 is  finite-yielding
proof
let C165 being set;
assume that
L332: C165 in D47;
set D61 = { B163 where B163 is (Element of ( bool ( (the Sorts of C145) . C165 ) )) : (ex B164 being (Element of C144) st (ex B165 being (ManySortedSet of D47) st (B165 = ( C154 . ( C146 . B164 ) ) & B163 = ( B165 . C165 )))) };
reconsider D62 = D61 as non  empty set by L321 , L332;
L333:
now
defpred S6[ set , set ] means (ex B166 being (ManySortedSet of D47) st (( C154 . ( C146 . $1 ) ) = B166 & $2 = ( B166 . C165 )));
consider C166 being FinSequence such that L334: ( rng C166 ) = C144 by FINSEQ_1:52;
L335: (for B167 being (Element of C144) holds (ex B168 being (Element of D62) st S6[ B167 , B168 ]))
proof
let C167 being (Element of C144);
consider C168 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) such that L336: C168 = ( C146 . C167 ) by L280;
L337: C168 is (Element of ( MSSub C145 )) by MSUALG_2:def 19;
L338: C168 in D49 by L337 , L336;
L339: (ex B169 being  strict  non-empty (MSSubAlgebra of C145) st (ex B170 being (GeneratorSet of B169) st (C168 = B169 & ( C154 . C168 ) = B170 & B170 is  non-empty  finite-yielding))) by L338 , L298;
reconsider D63 = ( C154 . ( C146 . C167 ) ) as  finite-yielding (Element of ( Bool (the Sorts of C145) )) by L339 , L336 , L338 , FUNCT_2:5;
L340: D63 c= (the Sorts of C145) by PBOOLE:def 18;
L341: ( D63 . C165 ) c= ( (the Sorts of C145) . C165 ) by L340 , L332 , PBOOLE:def 2;
L342: ( D63 . C165 ) in D61 by L341;
reconsider D64 = ( D63 . C165 ) as (Element of D62) by L342;
take D64;
take D63;
thus L343: thesis;
end;
consider C169 being (Function of C144 , D62) such that L344: (for B171 being (Element of C144) holds S6[ B171 , ( C169 . B171 ) ]) from FUNCT_2:sch 3(L335);
L345: ( rng C166 ) = ( dom C169 ) by L334 , FUNCT_2:def 1;
reconsider D65 = ( C169 * C166 ) as FinSequence by L345 , FINSEQ_1:16;
L346: D62 c= ( rng D65 )
proof
let C170 being set;
assume L347: C170 in D62;
consider C171 being (Element of ( bool ( (the Sorts of C145) . C165 ) )) such that L348: C170 = C171 and L349: (ex B172 being (Element of C144) st (ex B173 being (ManySortedSet of D47) st (B173 = ( C154 . ( C146 . B172 ) ) & C171 = ( B173 . C165 )))) by L347;
consider C172 being (Element of C144), C173 being (ManySortedSet of D47) such that L350: (C173 = ( C154 . ( C146 . C172 ) ) & C171 = ( C173 . C165 )) by L349;
L351: (( rng D65 ) = ( rng C169 ) & ( dom C169 ) = C144) by L345 , FUNCT_2:def 1 , RELAT_1:28;
L352: (ex B174 being (ManySortedSet of D47) st (( C154 . ( C146 . C172 ) ) = B174 & ( C169 . C172 ) = ( B174 . C165 ))) by L344;
thus L353: thesis by L352 , L348 , L350 , L351 , FUNCT_1:def 3;
end;
take D66 = D65;
L354: ( rng D66 ) c= ( rng C169 )
proof
let C174 being set;
assume L355: C174 in ( rng D66 );
thus L356: thesis by L355 , FUNCT_1:14;
end;
L357: ( rng D66 ) c= D62 by L354 , XBOOLE_1:1;
thus L358: ( rng D66 ) = D62 by L357 , L346 , XBOOLE_0:def 10;
end;
L359: (for B175 being set holds (B175 in D61 implies B175 is  finite))
proof
let C175 being set;
assume L360: C175 in D61;
consider C176 being (Element of ( bool ( (the Sorts of C145) . C165 ) )) such that L361: C175 = C176 and L362: (ex B176 being (Element of C144) st (ex B177 being (ManySortedSet of D47) st (B177 = ( C154 . ( C146 . B176 ) ) & C176 = ( B177 . C165 )))) by L360;
consider C177 being (Element of C144), C178 being (ManySortedSet of D47) such that L363: (C178 = ( C154 . ( C146 . C177 ) ) & C176 = ( C178 . C165 )) by L362;
L364: (ex B178 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) st B178 = ( C146 . C177 )) by L280;
L365: ( C146 . C177 ) is (Element of ( MSSub C145 )) by L364 , MSUALG_2:def 19;
L366: ( C146 . C177 ) in D49 by L365 , L364;
L367: S5[ ( C146 . C177 ) , ( C154 . ( C146 . C177 ) ) ] by L366 , L298;
thus L368: thesis by L367 , L361 , L363;
end;
L369: ( union D61 ) is  finite by L359 , L333 , FINSET_1:7;
thus L370: thesis by L369 , L299 , L332;
end;
reconsider D67 = D57 as  non-empty  finite-yielding (MSSubset of C145) by L331;
take ( GenMSAlg D67 );
let C179 being (Element of C144);
consider C180 being  strict  non-empty  finitely-generated (MSSubAlgebra of C145) such that L371: C180 = ( C146 . C179 ) by L280;
L372: C180 is (Element of ( MSSub C145 )) by MSUALG_2:def 19;
L373: ( C146 . C179 ) in D49 by L372 , L371;
consider C181 being  strict  non-empty (MSSubAlgebra of C145), C182 being (GeneratorSet of C181) such that L374: ( C146 . C179 ) = C181 and L375: ( C154 . ( C146 . C179 ) ) = C182 and L376: C182 is  non-empty  finite-yielding by L373 , L298;
L377: (the Sorts of C181) is (MSSubset of C145) by MSUALG_2:def 9;
L378: (C182 c= (the Sorts of C181) & (the Sorts of C181) c= (the Sorts of C145)) by L377 , PBOOLE:def 18;
L379: C182 c= (the Sorts of C145) by L378 , PBOOLE:13;
reconsider D68 = C182 as  non-empty (MSSubset of C145) by L379 , L376 , PBOOLE:def 18;
L380: D68 is (ManySortedSubset of D67)
proof
let C183 being set;
assume that
L381: C183 in D47;
set D69 = { B179 where B179 is (Element of ( bool ( (the Sorts of C145) . C183 ) )) : (ex B180 being (Element of C144) st (ex B181 being (ManySortedSet of D47) st (B181 = ( C154 . ( C146 . B180 ) ) & B179 = ( B181 . C183 )))) };
L382: ( D68 . C183 ) c= ( (the Sorts of C145) . C183 ) by L379 , L381 , PBOOLE:def 2;
L383: ( D68 . C183 ) in D69 by L382 , L375;
let C184 being set;
assume L384: C184 in ( D68 . C183 );
L385: C184 in ( union D69 ) by L384 , L383 , TARSKI:def 4;
thus L386: thesis by L385 , L299 , L381;
end;
L387: C180 = ( GenMSAlg C182 ) by L371 , L374 , MSAFREE:3
.= ( GenMSAlg D68 ) by EXTENS_1:18;
thus L388: thesis by L387 , L371 , L380 , EXTENS_1:17;
end;
theorem
L389: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for B182 , B183 being  strict  non-empty  finitely-generated (MSSubAlgebra of R3) holds (ex B184 being  strict  non-empty  finitely-generated (MSSubAlgebra of R3) st (B182 is (MSSubAlgebra of B184) & B183 is (MSSubAlgebra of B184))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let C185 , C186 being  strict  non-empty  finitely-generated (MSSubAlgebra of R3);
defpred S7[ set , set ] means (($1 = ( 0 ) implies $2 = C185) & ($1 = 1 implies $2 = C186));
L390: (for B185 being set holds (B185 in { ( 0 ) , 1 } implies (ex B186 being set st S7[ B185 , B186 ])))
proof
let C187 being set;
assume that
L391: C187 in { ( 0 ) , 1 };
per cases  by L391 , TARSKI:def 2;
suppose L392: C187 = ( 0 );

take C185;
thus L393: thesis by L392;
end;
suppose L394: C187 = 1;

take C186;
thus L395: thesis by L394;
end;
end;
consider C188 being (ManySortedSet of { ( 0 ) , 1 }) such that L397: (for B187 being set holds (B187 in { ( 0 ) , 1 } implies S7[ B187 , ( C188 . B187 ) ])) from PBOOLE:sch 3(L390);
L398: C188 is (MSAlgebra-Family of { ( 0 ) , 1 } , R2)
proof
let C189 being set;
assume L399: C189 in { ( 0 ) , 1 };
L400: (C189 = 1 implies ( C188 . C189 ) = C186) by L399 , L397;
L401: (C189 = ( 0 ) implies ( C188 . C189 ) = C185) by L397 , L399;
thus L402: thesis by L401 , L399 , L400 , TARSKI:def 2;
end;
reconsider D70 = C188 as (MSAlgebra-Family of { ( 0 ) , 1 } , R2) by L398;
L403: (for B188 being (Element of { ( 0 ) , 1 }) holds (ex B189 being  strict  non-empty  finitely-generated (MSSubAlgebra of R3) st B189 = ( D70 . B188 )))
proof
let C190 being (Element of { ( 0 ) , 1 });
per cases  by TARSKI:def 2;
suppose L404: C190 = ( 0 );

take C185;
thus L405: thesis by L397 , L404;
end;
suppose L406: C190 = 1;

take C186;
thus L407: thesis by L397 , L406;
end;
end;
consider C191 being  strict  non-empty  finitely-generated (MSSubAlgebra of R3) such that L409: (for B190 being (Element of { ( 0 ) , 1 }) holds ( D70 . B190 ) is (MSSubAlgebra of C191)) by L403 , L279;
take C191;
L410: ( 0 ) in { ( 0 ) , 1 } by TARSKI:def 2;
L411: ( D70 . ( 0 ) ) = C185 by L410 , L397;
thus L412: C185 is (MSSubAlgebra of C191) by L411 , L409 , L410;
L413: 1 in { ( 0 ) , 1 } by TARSKI:def 2;
L414: ( D70 . 1 ) = C186 by L413 , L397;
thus L415: thesis by L414 , L409 , L413;
end;
theorem
L416: (for B191 being non  empty non  void ManySortedSign holds (for B192 being  non-empty MSAlgebra over B191 holds (for B193 being set holds (B193 = { B194 where B194 is (Element of ( MSSub B192 )) : (ex B195 being  strict  non-empty  finitely-generated (MSSubAlgebra of B192) st B195 = B194) } implies (for B196 being (MSAlgebra-Family of B193 , B191) holds ((for B197 being set holds (B197 in B193 implies B197 = ( B196 . B197 ))) implies (ex B198 being  strict  non-empty (MSSubAlgebra of ( product B196 )) st (ex B199 being (ManySortedFunction of B198 , B192) st B199 is_epimorphism B198 , B192))))))))
proof
let C192 being non  empty non  void ManySortedSign;
let C193 being  non-empty MSAlgebra over C192;
let C194 being set;
assume that
L417: C194 = { B200 where B200 is (Element of ( MSSub C193 )) : (ex B201 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st B201 = B200) };
L418:
now
let C195 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
L419: C195 in ( MSSub C193 ) by MSUALG_2:def 19;
thus L420: C195 in C194 by L419 , L417;
end;
reconsider D71 = C194 as non  empty set by L418;
set D72 = the  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
set D73 = (the carrier of C192);
let C196 being (MSAlgebra-Family of C194 , C192);
assume that
L421: (for B202 being set holds (B202 in C194 implies B202 = ( C196 . B202 )));
reconsider D74 = C196 as (MSAlgebra-Family of D71 , C192);
set D75 = ( product D74 );
defpred S8[ set , set ] means (ex B203 being (SortSymbol of C192) st (ex B204 being (Element of ( ( SORTS D74 ) . B203 )) st (ex B205 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B203 = $1 & B204 = $2 & (for B206 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B205 is (MSSubAlgebra of B206) implies ( B204 . B205 ) = ( B204 . B206 )))))));
consider C197 being (ManySortedSet of D73) such that L422: (for B207 being set holds (B207 in D73 implies (for B208 being set holds (B208 in ( C197 . B207 ) iff (B208 in ( ( SORTS D74 ) . B207 ) & S8[ B207 , B208 ]))))) from PBOOLE:sch 2;
L423: C197 is (MSSubset of D75)
proof
let C198 being set;
assume that
L424: C198 in D73;
let C199 being set;
assume L425: C199 in ( C197 . C198 );
thus L426: thesis by L425 , L422 , L424;
end;
reconsider D76 = C197 as (MSSubset of D75) by L423;
L427: D76 is  opers_closed
proof
let C200 being (OperSymbol of C192);
set D77 = ( the_result_sort_of C200 );
set D78 = ( the_arity_of C200 );
let C201 being set;
assume that
L428: C201 in ( rng ( ( Den (C200 , D75) ) | ( ( ( D76 # ) * (the Arity of C192) ) . C200 ) ) );
reconsider D79 = C201 as (Element of ( ( SORTS D74 ) . D77 )) by L428 , PRALG_2:3;
consider C202 being set such that L429: C202 in ( dom ( ( Den (C200 , D75) ) | ( ( ( D76 # ) * (the Arity of C192) ) . C200 ) ) ) and L430: C201 = ( ( ( Den (C200 , D75) ) | ( ( ( D76 # ) * (the Arity of C192) ) . C200 ) ) . C202 ) by L428 , FUNCT_1:def 3;
L431: C201 = ( ( Den (C200 , D75) ) . C202 ) by L429 , L430 , FUNCT_1:47;
L432: C202 in ( ( ( D76 # ) * (the Arity of C192) ) . C200 ) by L429;
L433: C202 in ( dom ( Den (C200 , D75) ) ) by L429 , RELAT_1:57;
reconsider D80 = C202 as (Element of ( Args (C200 , D75) )) by L433;
L434: S8[ D77 , C201 ]
proof
take D77;
take D79;
per cases ;
suppose L435: ( the_arity_of C200 ) = ( {} );

set D81 = the  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
L436: ( Args (C200 , D81) ) = { ( {} ) } by L435 , PRALG_2:4;
L437: ( {} ) in ( Args (C200 , D81) ) by L436 , TARSKI:def 1;
take D81;
thus L438: D77 = D77;
thus L439: D79 = C201;
let C203 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
assume that
L440: D81 is (MSSubAlgebra of C203);
L441: ( Args (C200 , C203) ) = { ( {} ) } by L435 , PRALG_2:4;
L442: ( {} ) in ( Args (C200 , C203) ) by L441 , TARSKI:def 1;
L443: C203 in ( MSSub C193 ) by MSUALG_2:def 19;
L444: C203 in D71 by L443 , L417;
L445: D81 in ( MSSub C193 ) by MSUALG_2:def 19;
L446: D81 in D71 by L445 , L417;
reconsider D82 = D81 , D83 = C203 as (Element of D71) by L446 , L444;
L447: D82 = ( D74 . D82 ) by L421;
L448: D83 = ( D74 . D83 ) by L421;
L449: ( Args (C200 , D75) ) = { ( {} ) } by L435 , PRALG_2:4;
L450: D80 = ( {} ) by L449 , TARSKI:def 1;
thus L451: ( D79 . D81 ) = ( ( const (C200 , D75) ) . D82 ) by L450 , L431 , PRALG_3:def 1
.= ( const (C200 , ( D74 . D82 )) ) by L435 , PRALG_3:9
.= ( ( Den (C200 , ( D74 . D82 )) ) . ( {} ) ) by PRALG_3:def 1
.= ( ( Den (C200 , C193) ) . ( {} ) ) by L447 , L437 , L156
.= ( ( Den (C200 , ( D74 . D83 )) ) . ( {} ) ) by L448 , L442 , L156
.= ( const (C200 , ( D74 . D83 )) ) by PRALG_3:def 1
.= ( ( const (C200 , D75) ) . D83 ) by L435 , PRALG_3:9
.= ( D79 . C203 ) by L431 , L450 , PRALG_3:def 1;
end;
suppose L452: ( the_arity_of C200 ) <> ( {} );

reconsider D84 = ( dom D78 ) as non  empty  finite set by L452;
defpred S9[ set , set ] means (ex B209 being Function st (ex B210 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B209 = ( D80 . $1 ) & (for B211 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B210 is (MSSubAlgebra of B211) implies ( B209 . B210 ) = ( B209 . B211 ))) & $2 = B210)));
L453: D80 in ( ( D76 # ) . ( (the Arity of C192) . C200 ) ) by L432 , FUNCT_2:15;
L454: D80 in ( product ( D76 * D78 ) ) by L453 , FINSEQ_2:def 5;
L455: ( dom ( D76 * D78 ) ) = ( dom D80 ) by L454 , CARD_3:9
.= D84 by MSUALG_3:6;
L456: (for B212 being (Element of D84) holds (ex B213 being (Element of ( MSSub C193 )) st S9[ B212 , B213 ]))
proof
let C204 being (Element of D84);
L457: ( D80 . C204 ) in ( ( D76 * D78 ) . C204 ) by L454 , L455 , CARD_3:9;
L458: (( D78 . C204 ) in D73 & ( D80 . C204 ) in ( D76 . ( D78 . C204 ) )) by L457 , FUNCT_1:13 , PARTFUN1:4;
consider C205 being (SortSymbol of C192), C206 being (Element of ( ( SORTS D74 ) . C205 )), C207 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L459: C205 = ( D78 . C204 ) and L460: C206 = ( D80 . C204 ) and L461: (for B214 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C207 is (MSSubAlgebra of B214) implies ( C206 . C207 ) = ( C206 . B214 ))) by L458 , L422;
reconsider D85 = C207 as (Element of ( MSSub C193 )) by MSUALG_2:def 19;
take D85;
take C206;
take C207;
thus L462: C206 = ( D80 . C204 ) by L460;
thus L463: (for B215 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C207 is (MSSubAlgebra of B215) implies ( C206 . C207 ) = ( C206 . B215 ))) by L461;
thus L464: thesis;
end;
consider C208 being (Function of D84 , ( MSSub C193 )) such that L465: (for B216 being (Element of D84) holds S9[ B216 , ( C208 . B216 ) ]) from FUNCT_2:sch 3(L456);
reconsider D86 = C208 as (ManySortedSet of D84);
L466: D86 is (MSAlgebra-Family of D84 , C192)
proof
let C209 being set;
assume L467: C209 in D84;
L468: (ex B217 being Function st (ex B218 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B217 = ( D80 . C209 ) & (for B219 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B218 is (MSSubAlgebra of B219) implies ( B217 . B218 ) = ( B217 . B219 ))) & ( D86 . C209 ) = B218))) by L467 , L465;
thus L469: thesis by L468;
end;
reconsider D87 = D86 as (MSAlgebra-Family of D84 , C192) by L466;
L470: (for B220 being (Element of D84) holds (ex B221 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st B221 = ( D87 . B220 )))
proof
let C210 being (Element of D84);
L471: (ex B222 being Function st (ex B223 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B222 = ( D80 . C210 ) & (for B224 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B223 is (MSSubAlgebra of B224) implies ( B222 . B223 ) = ( B222 . B224 ))) & ( D87 . C210 ) = B223))) by L465;
thus L472: thesis by L471;
end;
consider C211 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L473: (for B225 being (Element of D84) holds ( D87 . B225 ) is (MSSubAlgebra of C211)) by L470 , L279;
take C211;
thus L474: D77 = D77;
thus L475: D79 = C201;
let C212 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
assume that
L476: C211 is (MSSubAlgebra of C212);
L477: C211 in ( MSSub C193 ) by MSUALG_2:def 19;
L478: C211 in D71 by L477 , L417;
L479: C212 in ( MSSub C193 ) by MSUALG_2:def 19;
L480: C212 in D71 by L479 , L417;
reconsider D88 = C212 , D89 = C211 as (Element of D71) by L480 , L478;
L481: D80 in ( Funcs (( dom D78 ) , ( Funcs (D71 , ( union { ( (the Sorts of ( D74 . B226 )) . B227 ) where B226 is (Element of D71) , B227 is (Element of (the carrier of C192)) : (not contradiction) } )) )) ) by PRALG_3:14;
L482: ( dom ( ( commute D80 ) . D88 ) ) = D84 by L481 , L19;
L483: ( dom ( ( commute D80 ) . D89 ) ) = D84 by L481 , L19;
L484: (for B228 being set holds (B228 in ( dom ( ( commute D80 ) . D89 ) ) implies ( ( ( commute D80 ) . D88 ) . B228 ) = ( ( ( commute D80 ) . D89 ) . B228 )))
proof
let C213 being set;
assume L485: C213 in ( dom ( ( commute D80 ) . D89 ) );
consider C214 being Function, C215 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L486: C214 = ( D80 . C213 ) and L487: ((for B229 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C215 is (MSSubAlgebra of B229) implies ( C214 . C215 ) = ( C214 . B229 ))) & ( D87 . C213 ) = C215) by L485 , L465 , L483;
L488: ( D87 . C213 ) is (MSSubAlgebra of C211) by L473 , L483 , L485;
thus L489: ( ( ( commute D80 ) . D88 ) . C213 ) = ( C214 . D88 ) by L483 , L485 , L486 , PRALG_3:21
.= ( C214 . C215 ) by L476 , L487 , L488 , MSUALG_2:6
.= ( C214 . D89 ) by L473 , L483 , L485 , L487
.= ( ( ( commute D80 ) . D89 ) . C213 ) by L483 , L485 , L486 , PRALG_3:21;
end;
L490: D89 = ( D74 . D89 ) by L421;
L491: ( ( commute D80 ) . D89 ) is (Element of ( Args (C200 , ( D74 . D89 )) )) by L452 , PRALG_3:20;
L492: ( ( commute D80 ) . D88 ) is (Element of ( Args (C200 , ( D74 . D88 )) )) by L452 , PRALG_3:20;
L493: D88 = ( D74 . D88 ) by L421;
thus L494: ( D79 . C211 ) = ( ( Den (C200 , ( D74 . D89 )) ) . ( ( commute D80 ) . D89 ) ) by L431 , L452 , PRALG_3:22
.= ( ( Den (C200 , C193) ) . ( ( commute D80 ) . D89 ) ) by L490 , L491 , L156
.= ( ( Den (C200 , C193) ) . ( ( commute D80 ) . D88 ) ) by L481 , L482 , L484 , L19 , FUNCT_1:2
.= ( ( Den (C200 , ( D74 . D88 )) ) . ( ( commute D80 ) . D88 ) ) by L493 , L492 , L156
.= ( D79 . C212 ) by L431 , L452 , PRALG_3:22;
end;
end;
L496: C201 in ( D76 . D77 ) by L434 , L422;
thus L497: thesis by L496 , FUNCT_2:15;
end;
L498: ( D75 | D76 ) = MSAlgebra (# D76 , ( Opers (D75 , D76) ) #) by L427 , MSUALG_2:def 15;
defpred S10[ set , set , set ] means (ex B230 being (SortSymbol of C192) st (ex B231 being (Element of ( ( SORTS D74 ) . B230 )) st (ex B232 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B230 = $3 & B231 = $2 & (for B233 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B232 is (MSSubAlgebra of B233) implies ( B231 . B232 ) = ( B231 . B233 ))) & $1 = ( B231 . B232 )))));
L499: D76 is  non-empty
proof
defpred S11[ set ] means (ex B234 being  strict  non-empty (MSSubAlgebra of C193) st ($1 = B234 & B234 is  finitely-generated));
let C216 being set;
consider C217 being set such that L500: (for B235 being set holds (B235 in C217 iff (B235 in ( SuperAlgebraSet D72 ) & S11[ B235 ]))) from XBOOLE_0:sch 1;
L501: C217 c= D71
proof
let C218 being set;
assume L502: C218 in C217;
L503: (ex B236 being  strict  non-empty (MSSubAlgebra of C193) st (C218 = B236 & B236 is  finitely-generated)) by L502 , L500;
L504: C218 in ( MSSub C193 ) by L503 , MSUALG_2:def 19;
thus L505: thesis by L504 , L417 , L503;
end;
defpred S12[ set , set ] means (ex B237 being (MSSubAlgebra of C193) st (ex B238 being set st ($1 = B237 & B238 in ( (the Sorts of B237) . C216 ) & $2 = B238)));
assume L506: C216 in D73;
consider C219 being set such that L507: C219 in ( (the Sorts of D72) . C216 ) by L506 , XBOOLE_0:def 1;
reconsider D90 = C216 as (SortSymbol of C192) by L506;
L508: (for B239 being set holds (B239 in D71 implies (ex B240 being set st S12[ B239 , B240 ])))
proof
let C220 being set;
assume L509: C220 in D71;
consider C221 being (Element of ( MSSub C193 )) such that L510: C220 = C221 and L511: (ex B241 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st B241 = C221) by L509 , L417;
consider C222 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L512: C222 = C221 by L511;
consider C223 being set such that L513: C223 in ( (the Sorts of C222) . C216 ) by L506 , XBOOLE_0:def 1;
take C223;
take C222;
take C223;
thus L514: C220 = C222 by L510 , L512;
thus L515: thesis by L513;
end;
consider C224 being (ManySortedSet of D71) such that L516: (for B242 being set holds (B242 in D71 implies S12[ B242 , ( C224 . B242 ) ])) from PBOOLE:sch 3(L508);
set D91 = ( C224 +* ( C217 --> C219 ) );
L517: ( dom ( C217 --> C219 ) ) = C217 by FUNCOP_1:13;
L518: (for B243 being set holds (B243 in ( dom ( Carrier (D74 , D90) ) ) implies ( D91 . B243 ) in ( ( Carrier (D74 , D90) ) . B243 )))
proof
let C225 being set;
assume L519: C225 in ( dom ( Carrier (D74 , D90) ) );
L520: C225 in D71 by L519;
L521: (ex B244 being MSAlgebra over C192 st (B244 = ( D74 . C225 ) & ( ( Carrier (D74 , D90) ) . C225 ) = ( (the Sorts of B244) . D90 ))) by L520 , PRALG_2:def 9;
consider C226 being (MSSubAlgebra of C193), C227 being set such that L522: (C225 = C226 & C227 in ( (the Sorts of C226) . C216 )) and L523: ( C224 . C225 ) = C227 by L516 , L520;
per cases ;
suppose L524: C225 in C217;

L525: C225 in ( dom ( C217 --> C219 ) ) by L524 , FUNCOP_1:13;
L526: ( D91 . C225 ) = ( ( C217 --> C219 ) . C225 ) by L525 , FUNCT_4:13;
L527: ( D91 . C225 ) = C219 by L526 , L524 , FUNCOP_1:7;
L528: C225 in ( SuperAlgebraSet D72 ) by L500 , L524;
consider C228 being  strict (MSSubAlgebra of C193) such that L529: C225 = C228 and L530: D72 is (MSSubAlgebra of C228) by L528 , L169;
L531: (the Sorts of D72) is (ManySortedSubset of (the Sorts of C228)) by L530 , MSUALG_2:def 9;
L532: (the Sorts of D72) c= (the Sorts of C228) by L531 , PBOOLE:def 18;
L533: ( (the Sorts of D72) . C216 ) c= ( (the Sorts of C228) . C216 ) by L532 , L506 , PBOOLE:def 2;
L534: C219 in ( (the Sorts of C228) . C216 ) by L533 , L507;
thus L535: thesis by L534 , L421 , L520 , L521 , L527 , L529;
end;
suppose L536: (not C225 in C217);

L537: ( D91 . C225 ) = C227 by L536 , L517 , L523 , FUNCT_4:11;
thus L538: thesis by L537 , L421 , L520 , L521 , L522;
end;
end;
L540: ( dom D91 ) = ( ( dom C224 ) \/ ( dom ( C217 --> C219 ) ) ) by FUNCT_4:def 1
.= ( D71 \/ ( dom ( C217 --> C219 ) ) ) by PARTFUN1:def 2
.= ( D71 \/ C217 ) by FUNCOP_1:13
.= D71 by L501 , XBOOLE_1:12
.= ( dom ( Carrier (D74 , D90) ) ) by PARTFUN1:def 2;
L541: D91 in ( product ( Carrier (D74 , D90) ) ) by L540 , L518 , CARD_3:9;
L542: S8[ C216 , D91 ]
proof
reconsider D92 = D91 as (Element of ( ( SORTS D74 ) . D90 )) by L541 , PRALG_2:def 10;
take D90;
take D92;
take D72;
thus L543: D90 = C216;
thus L544: D92 = D91;
let C229 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
assume L545: D72 is (MSSubAlgebra of C229);
L546: C229 in ( SuperAlgebraSet D72 ) by L545 , L169;
L547: C229 in C217 by L546 , L500;
L548: D72 is (MSSubAlgebra of D72) by MSUALG_2:5;
L549: D72 in ( SuperAlgebraSet D72 ) by L548 , L169;
L550: D72 in C217 by L549 , L500;
thus L551: ( D92 . D72 ) = ( ( C217 --> C219 ) . D72 ) by L550 , L517 , FUNCT_4:13
.= C219 by L550 , FUNCOP_1:7
.= ( ( C217 --> C219 ) . C229 ) by L547 , FUNCOP_1:7
.= ( D92 . C229 ) by L517 , L547 , FUNCT_4:13;
end;
thus L552: thesis by L542 , L422;
end;
reconsider D93 = ( D75 | D76 ) as  strict  non-empty (MSSubAlgebra of ( product C196 )) by L499 , L498 , MSUALG_1:def 3;
L553:
now
let C230 being (SortSymbol of C192);
let C231 being (Element of ( ( SORTS D74 ) . C230 ));
let C232 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
L554: ( dom ( Carrier (D74 , C230) ) ) = D71 by PARTFUN1:def 2;
L555: C232 in ( MSSub C193 ) by MSUALG_2:def 19;
L556: C232 in ( dom ( Carrier (D74 , C230) ) ) by L555 , L417 , L554;
consider C233 being MSAlgebra over C192 such that L557: C233 = ( D74 . C232 ) and L558: ( ( Carrier (D74 , C230) ) . C232 ) = ( (the Sorts of C233) . C230 ) by L556 , PRALG_2:def 9;
L559: ( ( SORTS D74 ) . C230 ) = ( product ( Carrier (D74 , C230) ) ) by PRALG_2:def 10;
L560: ( C231 . C232 ) in ( ( Carrier (D74 , C230) ) . C232 ) by L559 , L556 , CARD_3:9;
L561: ( D74 . C232 ) = C232 by L421 , L556;
L562: (the Sorts of C233) is (ManySortedSubset of (the Sorts of C193)) by L561 , L557 , MSUALG_2:def 9;
L563: (the Sorts of C233) c= (the Sorts of C193) by L562 , PBOOLE:def 18;
L564: ( (the Sorts of C233) . C230 ) c= ( (the Sorts of C193) . C230 ) by L563 , PBOOLE:def 2;
thus L565: ( C231 . C232 ) in ( (the Sorts of C193) . C230 ) by L564 , L558 , L560;
end;
L566:
now
let C234 being set;
assume that
L567: C234 in D73;
let C235 being set;
assume L568: C235 in ( (the Sorts of D93) . C234 );
consider C236 being (SortSymbol of C192), C237 being (Element of ( ( SORTS D74 ) . C236 )), C238 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L569: C236 = C234 and L570: (C237 = C235 & (for B245 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C238 is (MSSubAlgebra of B245) implies ( C237 . C238 ) = ( C237 . B245 )))) by L568 , L422 , L498 , L567;
take D94 = ( C237 . C238 );
thus L571: D94 in ( (the Sorts of C193) . C234 ) by L553 , L569;
thus L572: S10[ D94 , C235 , C234 ] by L569 , L570;
end;
consider C239 being (ManySortedFunction of D93 , C193) such that L573: (for B246 being set holds (B246 in D73 implies (ex B247 being (Function of ( (the Sorts of D93) . B246 ) , ( (the Sorts of C193) . B246 )) st (B247 = ( C239 . B246 ) & (for B248 being set holds (B248 in ( (the Sorts of D93) . B246 ) implies S10[ ( B247 . B248 ) , B248 , B246 ])))))) from MSSUBFAM:sch 1(L566);
take D93;
take C239;
thus L574: C239 is_homomorphism D93 , C193
proof
let C240 being (OperSymbol of C192);
assume that
L575: ( Args (C240 , D93) ) <> ( {} );
let C241 being (Element of ( Args (C240 , D93) ));
set D95 = ( the_result_sort_of C240 );
set D96 = ( the_arity_of C240 );
consider C242 being (Function of ( (the Sorts of D93) . D95 ) , ( (the Sorts of C193) . D95 )) such that L576: C242 = ( C239 . D95 ) and L577: (for B249 being set holds (B249 in ( (the Sorts of D93) . D95 ) implies S10[ ( C242 . B249 ) , B249 , D95 ])) by L573;
consider C243 being (SortSymbol of C192), C244 being (Element of ( ( SORTS D74 ) . C243 )), C245 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L578: C243 = D95 and L579: C244 = ( ( Den (C240 , D93) ) . C241 ) and L580: (for B250 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C245 is (MSSubAlgebra of B250) implies ( C244 . C245 ) = ( C244 . B250 ))) and L581: ( C242 . ( ( Den (C240 , D93) ) . C241 ) ) = ( C244 . C245 ) by L577 , MSUALG_9:18;
per cases ;
suppose L582: ( the_arity_of C240 ) = ( {} );

L583: C245 in ( MSSub C193 ) by MSUALG_2:def 19;
L584: C245 in D71 by L583 , L417;
reconsider D97 = C245 as (Element of D71) by L584;
reconsider D98 = ( ( Den (C240 , D75) ) . C241 ) as Function by L161;
L585: ( ( Den (C240 , D75) ) . ( {} ) ) = ( const (C240 , D75) ) by PRALG_3:def 1;
L586: ( Args (C240 , C245) ) = { ( {} ) } by L582 , PRALG_2:4;
L587: ( {} ) in ( Args (C240 , C245) ) by L586 , TARSKI:def 1;
L588: ( Args (C240 , D93) ) = { ( {} ) } by L582 , PRALG_2:4;
L589: C241 = ( {} ) by L588 , TARSKI:def 1;
thus L590: ( ( C239 . ( the_result_sort_of C240 ) ) . ( ( Den (C240 , D93) ) . C241 ) ) = ( D98 . C245 ) by L576 , L579 , L581 , L156
.= ( ( const (C240 , D75) ) . D97 ) by L588 , L585 , TARSKI:def 1
.= ( const (C240 , ( D74 . D97 )) ) by L582 , PRALG_3:9
.= ( ( Den (C240 , ( D74 . D97 )) ) . ( {} ) ) by PRALG_3:def 1
.= ( ( Den (C240 , C245) ) . ( {} ) ) by L421
.= ( ( Den (C240 , C193) ) . ( {} ) ) by L587 , L156
.= ( ( Den (C240 , C193) ) . ( C239 # C241 ) ) by L582 , L589 , PRALG_3:11;
end;
suppose L591: ( the_arity_of C240 ) <> ( {} );

reconsider D99 = ( dom D96 ) as non  empty  finite set by L591;
defpred S13[ set , set ] means (ex B251 being Function st (ex B252 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B251 = ( C241 . $1 ) & (for B253 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B252 is (MSSubAlgebra of B253) implies ( B251 . B252 ) = ( B251 . B253 ))) & ( ( C239 . ( D96 . $1 ) ) . B251 ) = ( B251 . B252 ) & $2 = B252)));
L592: (for B254 being (Element of D99) holds (ex B255 being (Element of ( MSSub C193 )) st S13[ B254 , B255 ]))
proof
let C246 being (Element of D99);
consider C247 being (Function of ( (the Sorts of D93) . ( D96 . C246 ) ) , ( (the Sorts of C193) . ( D96 . C246 ) )) such that L593: C247 = ( C239 . ( D96 . C246 ) ) and L594: (for B256 being set holds (B256 in ( (the Sorts of D93) . ( D96 . C246 ) ) implies S10[ ( C247 . B256 ) , B256 , ( D96 . C246 ) ])) by L573 , PARTFUN1:4;
L595: ( C241 . C246 ) in ( (the Sorts of D93) . ( D96 /. C246 ) ) by MSUALG_6:2;
L596: ( C241 . C246 ) in ( (the Sorts of D93) . ( D96 . C246 ) ) by L595 , PARTFUN1:def 6;
consider C248 being (SortSymbol of C192), C249 being (Element of ( ( SORTS D74 ) . C248 )), C250 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L597: C248 = ( D96 . C246 ) and L598: C249 = ( C241 . C246 ) and L599: (for B257 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C250 is (MSSubAlgebra of B257) implies ( C249 . C250 ) = ( C249 . B257 ))) and L600: ( C247 . ( C241 . C246 ) ) = ( C249 . C250 ) by L596 , L594;
reconsider D100 = C250 as (Element of ( MSSub C193 )) by MSUALG_2:def 19;
take D100;
take C249;
take C250;
thus L601: C249 = ( C241 . C246 ) by L598;
thus L602: (for B258 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C250 is (MSSubAlgebra of B258) implies ( C249 . C250 ) = ( C249 . B258 ))) by L599;
thus L603: ( ( C239 . ( D96 . C246 ) ) . C249 ) = ( C249 . C250 ) by L593 , L598 , L600;
thus L604: thesis;
end;
consider C251 being (Function of D99 , ( MSSub C193 )) such that L605: (for B259 being (Element of D99) holds S13[ B259 , ( C251 . B259 ) ]) from FUNCT_2:sch 3(L592);
reconsider D101 = C251 as (ManySortedSet of D99);
L606: D101 is (MSAlgebra-Family of D99 , C192)
proof
let C252 being set;
assume L607: C252 in D99;
L608: (ex B260 being Function st (ex B261 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B260 = ( C241 . C252 ) & (for B262 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B261 is (MSSubAlgebra of B262) implies ( B260 . B261 ) = ( B260 . B262 ))) & ( ( C239 . ( D96 . C252 ) ) . B260 ) = ( B260 . B261 ) & ( D101 . C252 ) = B261))) by L607 , L605;
thus L609: thesis by L608;
end;
reconsider D102 = D101 as (MSAlgebra-Family of D99 , C192) by L606;
L610: (for B263 being (Element of D99) holds (ex B264 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st B264 = ( D102 . B263 )))
proof
let C253 being (Element of D99);
L611: (ex B265 being Function st (ex B266 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st (B265 = ( C241 . C253 ) & (for B267 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (B266 is (MSSubAlgebra of B267) implies ( B265 . B266 ) = ( B265 . B267 ))) & ( ( C239 . ( D96 . C253 ) ) . B265 ) = ( B265 . B266 ) & ( D102 . C253 ) = B266))) by L605;
thus L612: thesis by L611;
end;
consider C254 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L613: (for B268 being (Element of D99) holds ( D102 . B268 ) is (MSSubAlgebra of C254)) by L610 , L279;
consider C255 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L614: C245 is (MSSubAlgebra of C255) and L615: C254 is (MSSubAlgebra of C255) by L389;
L616: C255 in ( MSSub C193 ) by MSUALG_2:def 19;
L617: C255 in D71 by L616 , L417;
reconsider D103 = C255 as (Element of D71) by L617;
L618: C241 in ( Args (C240 , D75) ) by L149;
L619: ( ( commute C241 ) . D103 ) is (Element of ( Args (C240 , ( D74 . D103 )) )) by L618 , L591 , PRALG_3:20;
L620: ( ( commute C241 ) . D103 ) in ( Args (C240 , ( D74 . D103 )) ) by L619;
L621: ( ( commute C241 ) . D103 ) in ( Args (C240 , C255) ) by L620 , L421;
L622: C241 in ( Funcs (( dom D96 ) , ( Funcs (D71 , ( union { ( (the Sorts of ( D74 . B269 )) . B270 ) where B269 is (Element of D71) , B270 is (Element of (the carrier of C192)) : (not contradiction) } )) )) ) by L618 , PRALG_3:14;
L623: ( dom ( ( commute C241 ) . D103 ) ) = D99 by L622 , L19;
L624: (for B271 being set holds (B271 in ( dom ( ( commute C241 ) . D103 ) ) implies ( ( C239 # C241 ) . B271 ) = ( ( ( commute C241 ) . D103 ) . B271 )))
proof
set D104 = ( ( commute C241 ) . D103 );
reconsider D105 = D104 as (Element of ( Args (C240 , C255) )) by L421 , L619;
let C256 being set;
assume L625: C256 in ( dom ( ( commute C241 ) . D103 ) );
reconsider D106 = ( D96 . C256 ) as (SortSymbol of C192) by L625 , L623 , PARTFUN1:4;
L626: C256 in ( Seg ( len D105 ) ) by L625 , FINSEQ_1:def 3;
reconsider D107 = C256 as Nat by L626;
consider C257 being Function, C258 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L627: C257 = ( C241 . C256 ) and L628: (for B272 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C258 is (MSSubAlgebra of B272) implies ( C257 . C258 ) = ( C257 . B272 ))) and L629: ( ( C239 . D106 ) . C257 ) = ( C257 . C258 ) and L630: ( D102 . C256 ) = C258 by L605 , L623 , L625;
L631: C258 is (MSSubAlgebra of C254) by L613 , L623 , L625 , L630;
L632: ( dom C241 ) = D99 by L622 , FUNCT_2:92;
thus L633: ( ( C239 # C241 ) . C256 ) = ( ( C239 . ( D96 /. D107 ) ) . ( C241 . C256 ) ) by L632 , L623 , L625 , MSUALG_3:def 6
.= ( C257 . ( D102 . C256 ) ) by L623 , L625 , L627 , L629 , L630 , PARTFUN1:def 6
.= ( C257 . D103 ) by L615 , L628 , L630 , L631 , MSUALG_2:6
.= ( ( ( commute C241 ) . D103 ) . C256 ) by L618 , L623 , L625 , L627 , PRALG_3:21;
end;
reconsider D108 = ( ( Den (C240 , D75) ) . C241 ) as Function by L161;
L634: ( dom ( C239 # C241 ) ) = D99 by MSUALG_6:2;
thus L635: ( ( C239 . ( the_result_sort_of C240 ) ) . ( ( Den (C240 , D93) ) . C241 ) ) = ( C244 . C255 ) by L576 , L580 , L581 , L614
.= ( D108 . C255 ) by L579 , L156
.= ( ( Den (C240 , ( D74 . D103 )) ) . ( ( commute C241 ) . D103 ) ) by L591 , L618 , PRALG_3:22
.= ( ( Den (C240 , C255) ) . ( ( commute C241 ) . D103 ) ) by L421
.= ( ( Den (C240 , C193) ) . ( ( commute C241 ) . D103 ) ) by L621 , L156
.= ( ( Den (C240 , C193) ) . ( C239 # C241 ) ) by L622 , L634 , L624 , L19 , FUNCT_1:2;
end;
end;

let C259 being set;
assume L637: C259 in D73;
reconsider D109 = C259 as (SortSymbol of C192) by L637;
consider C260 being set such that L638: C260 in ( (the Sorts of D93) . D109 ) by XBOOLE_0:def 1;
L639: ( rng ( C239 . D109 ) ) c= ( (the Sorts of C193) . D109 );
thus L640: ( rng ( C239 . C259 ) ) c= ( (the Sorts of C193) . C259 ) by L639;
let C261 being set;
assume that
L641: C261 in ( (the Sorts of C193) . C259 );
L642: ( ( SORTS D74 ) . D109 ) = ( product ( Carrier (D74 , D109) ) ) by PRALG_2:def 10;
L643: C260 in ( product ( Carrier (D74 , D109) ) ) by L642 , L422 , L498 , L638;
consider C262 being Function such that L644: C260 = C262 and L645: ( dom C262 ) = ( dom ( Carrier (D74 , D109) ) ) and L646: (for B273 being set holds (B273 in ( dom ( Carrier (D74 , D109) ) ) implies ( C262 . B273 ) in ( ( Carrier (D74 , D109) ) . B273 ))) by L643 , CARD_3:def 5;
defpred S14[ set ] means (ex B274 being (MSSubAlgebra of C193) st (B274 = $1 & C261 in ( (the Sorts of B274) . D109 )));
consider C263 being set such that L647: (for B275 being set holds (B275 in C263 iff (B275 in D71 & S14[ B275 ]))) from XBOOLE_0:sch 1;
set D110 = ( C262 +* ( C263 --> C261 ) );
L648: ( dom ( C263 --> C261 ) ) = C263 by FUNCOP_1:13;
L649: (for B276 being (Element of D71) holds (S14[ B276 ] implies ( D110 . B276 ) = C261))
proof
let C264 being (Element of D71);
assume L650: S14[ C264 ];
L651: C264 in C263 by L650 , L647;
thus L652: ( D110 . C264 ) = ( ( C263 --> C261 ) . C264 ) by L651 , L648 , FUNCT_4:13
.= C261 by L651 , FUNCOP_1:7;
end;
L653: ( dom ( Carrier (D74 , D109) ) ) = D71 by PARTFUN1:def 2;
L654: (for B277 being set holds (B277 in ( dom ( Carrier (D74 , D109) ) ) implies ( D110 . B277 ) in ( ( Carrier (D74 , D109) ) . B277 )))
proof
let C265 being set;
assume L655: C265 in ( dom ( Carrier (D74 , D109) ) );
consider C266 being (Element of ( MSSub C193 )) such that L656: C265 = C266 and L657: (ex B278 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) st B278 = C266) by L655 , L417 , L653;
consider C267 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L658: C267 = C266 by L657;
L659: C267 in D71 by L417 , L658;
L660: ((ex B279 being MSAlgebra over C192 st (B279 = ( D74 . C267 ) & ( ( Carrier (D74 , D109) ) . C267 ) = ( (the Sorts of B279) . D109 ))) & ( D74 . C267 ) = C267) by L659 , L421 , PRALG_2:def 9;
per cases ;
suppose L661: S14[ C265 ];

thus L662: thesis by L661 , L649 , L656 , L658 , L659 , L660;
end;
suppose L663: (not S14[ C265 ]);

L664: (not C265 in C263) by L663 , L647;
L665: ( D110 . C265 ) = ( C262 . C265 ) by L664 , L648 , FUNCT_4:11;
thus L666: thesis by L665 , L646 , L655;
end;
end;
L668: C263 c= D71
proof
let C268 being set;
assume L669: C268 in C263;
thus L670: thesis by L669 , L647;
end;
set D111 = the  non-empty  finite-yielding (MSSubset of C193);
L671: ( dom ( C239 . D109 ) ) = ( (the Sorts of D93) . D109 ) by FUNCT_2:def 1;
set D112 = ( { D109 } --> { C261 } );
L672: ( dom ( D111 +* D112 ) ) = ( ( dom D111 ) \/ ( dom D112 ) ) by FUNCT_4:def 1
.= ( D73 \/ ( dom D112 ) ) by PARTFUN1:def 2
.= ( D73 \/ { D109 } ) by FUNCOP_1:13
.= D73 by ZFMISC_1:40;
reconsider D113 = ( D111 +* D112 ) as (ManySortedSet of D73) by L672 , PARTFUN1:def 2 , RELAT_1:def 18;
L673: D109 in { D109 } by TARSKI:def 1;
L674: ( dom D112 ) = { D109 } by FUNCOP_1:13;
L675: ( D113 . D109 ) = ( D112 . D109 ) by L674 , L673 , FUNCT_4:13
.= { C261 } by L673 , FUNCOP_1:7;
L676:
now
let C269 being set;
assume that
L677: C269 in D73
and
L678: C269 <> D109;
L679: (not C269 in ( dom D112 )) by L678 , TARSKI:def 1;
thus L680: ( D113 . C269 ) = ( D111 . C269 ) by L679 , FUNCT_4:11;
end;
L681: D113 is (ManySortedSubset of (the Sorts of C193))
proof
let C270 being set;
assume that
L682: C270 in D73;
let C271 being set;
assume that
L683: C271 in ( D113 . C270 );
per cases ;
suppose L684: C270 <> D109;

L685: D111 c= (the Sorts of C193) by PBOOLE:def 18;
L686: ( D111 . C270 ) c= ( (the Sorts of C193) . C270 ) by L685 , L682 , PBOOLE:def 2;
L687: C271 in ( D111 . C270 ) by L676 , L682 , L683 , L684;
thus L688: thesis by L687 , L686;
end;
suppose L689: C270 = D109;

thus L690: thesis by L689 , L641 , L675 , L683 , TARSKI:def 1;
end;
end;
reconsider D114 = D113 as (MSSubset of C193) by L681;
L692: D114 is  non-empty
proof
let C272 being set;
assume that
L693: C272 in D73;
per cases ;
suppose L694: C272 <> D109;

L695: ( D114 . C272 ) = ( D111 . C272 ) by L694 , L676 , L693;
thus L696: thesis by L695 , L693;
end;
suppose L697: C272 = D109;

thus L698: thesis by L697 , L675;
end;
end;
reconsider D115 = D114 as  non-empty (MSSubset of C193) by L692;
L700: D115 is  finite-yielding
proof
let C273 being set;
assume that
L701: C273 in D73;
per cases ;
suppose L702: C273 <> D109;

L703: ( D115 . C273 ) = ( D111 . C273 ) by L702 , L676 , L701;
thus L704: thesis by L703;
end;
suppose L705: C273 = D109;

thus L706: thesis by L705 , L675;
end;
end;
reconsider D116 = D115 as  non-empty  finite-yielding (MSSubset of C193) by L700;
L708: D116 is (MSSubset of ( GenMSAlg D116 )) by MSUALG_2:def 17;
L709: D116 c= (the Sorts of ( GenMSAlg D116 )) by L708 , PBOOLE:def 18;
L710: ( D116 . D109 ) c= ( (the Sorts of ( GenMSAlg D116 )) . D109 ) by L709 , PBOOLE:def 2;
L711: ( dom D110 ) = ( ( dom C262 ) \/ ( dom ( C263 --> C261 ) ) ) by FUNCT_4:def 1
.= ( D71 \/ ( dom ( C263 --> C261 ) ) ) by L645 , PARTFUN1:def 2
.= ( D71 \/ C263 ) by FUNCOP_1:13
.= D71 by L668 , XBOOLE_1:12;
reconsider D117 = D110 as (Element of ( ( SORTS D74 ) . D109 )) by L711 , L642 , L653 , L654 , CARD_3:9;
consider C274 being (Function of ( (the Sorts of D93) . D109 ) , ( (the Sorts of C193) . D109 )) such that L712: C274 = ( C239 . D109 ) and L713: (for B280 being set holds (B280 in ( (the Sorts of D93) . D109 ) implies S10[ ( C274 . B280 ) , B280 , D109 ])) by L573;
L714: C261 in ( D116 . D109 ) by L675 , TARSKI:def 1;
L715: C261 in ( (the Sorts of ( GenMSAlg D116 )) . D109 ) by L714 , L710;
L716: S8[ D109 , D117 ]
proof
take D109;
take D117;
take D118 = ( GenMSAlg D116 );
thus L717: D109 = D109;
thus L718: D117 = D117;
let C275 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193);
assume L719: D118 is (MSSubAlgebra of C275);
L720: (the Sorts of D118) is (ManySortedSubset of (the Sorts of C275)) by L719 , MSUALG_2:def 9;
L721: (the Sorts of D118) c= (the Sorts of C275) by L720 , PBOOLE:def 18;
L722: ( (the Sorts of D118) . D109 ) c= ( (the Sorts of C275) . D109 ) by L721 , PBOOLE:def 2;
L723: C275 in D71 by L418;
L724: D118 in D71 by L418;
thus L725: ( D117 . D118 ) = C261 by L724 , L710 , L714 , L649
.= ( D117 . C275 ) by L715 , L649 , L723 , L722;
end;
L726: D117 in ( D76 . D109 ) by L716 , L422;
L727: S10[ ( C274 . D117 ) , D117 , D109 ] by L726 , L498 , L713;
consider C276 being (SortSymbol of C192), C277 being (Element of ( ( SORTS D74 ) . D109 )), C278 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L728: D109 = C276 and L729: (C277 = D117 & (for B281 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) holds (C278 is (MSSubAlgebra of B281) implies ( C277 . C278 ) = ( C277 . B281 ))) & ( C274 . D117 ) = ( C277 . C278 )) by L727;
consider C279 being  strict  non-empty  finitely-generated (MSSubAlgebra of C193) such that L730: C278 is (MSSubAlgebra of C279) and L731: ( GenMSAlg D116 ) is (MSSubAlgebra of C279) by L389;
L732: C279 in D71 by L418;
L733: (the Sorts of ( GenMSAlg D116 )) is (ManySortedSubset of (the Sorts of C279)) by L731 , MSUALG_2:def 9;
L734: (the Sorts of ( GenMSAlg D116 )) c= (the Sorts of C279) by L733 , PBOOLE:def 18;
L735: ( (the Sorts of ( GenMSAlg D116 )) . D109 ) c= ( (the Sorts of C279) . D109 ) by L734 , PBOOLE:def 2;
L736: ( C274 . D117 ) = ( D117 . C279 ) by L729 , L730
.= C261 by L715 , L649 , L735 , L732;
thus L737: thesis by L736 , L498 , L671 , L712 , L726 , FUNCT_1:def 3;
end;
theorem
L738: (for R2 being non  empty non  void ManySortedSign holds (for B282 being  feasible  free MSAlgebra over R2 holds (for B283 being  free (GeneratorSet of B282) holds (for B284 being (MSSubset of B282) holds ((B284 c= B283 & ( GenMSAlg B284 ) is  feasible) implies ( GenMSAlg B284 ) is  free)))))
proof
let R2 being non  empty non  void ManySortedSign;
let C280 being  feasible  free MSAlgebra over R2;
let C281 being  free (GeneratorSet of C280);
let C282 being (MSSubset of C280);
assume that
L739: C282 c= C281
and
L740: ( GenMSAlg C282 ) is  feasible;
reconsider D119 = C282 as (MSSubset of ( GenMSAlg C282 )) by MSUALG_2:def 17;
L741: (the Sorts of ( GenMSAlg D119 )) = (the Sorts of ( GenMSAlg C282 )) by EXTENS_1:18;
reconsider D120 = C282 as (GeneratorSet of ( GenMSAlg C282 )) by L741 , MSAFREE:def 4;
reconsider D121 = D120 as (ManySortedSubset of C281) by L739 , PBOOLE:def 18;
take D120;
L742: D120 is  free
proof
reconsider D122 = (the Sorts of ( GenMSAlg C282 )) as (MSSubset of C280) by MSUALG_2:def 9;
let C283 being  non-empty MSAlgebra over R2;
let C284 being (ManySortedFunction of D120 , (the Sorts of C283));
consider C285 being (ManySortedFunction of C281 , (the Sorts of C283)) such that L743: ( C285 || D121 ) = C284 by L46;
consider C286 being (ManySortedFunction of C280 , C283) such that L744: C286 is_homomorphism C280 , C283 and L745: ( C286 || C281 ) = C285 by MSAFREE:def 5;
reconsider D123 = ( C286 || D122 ) as (ManySortedFunction of ( GenMSAlg C282 ) , C283);
take D123;
thus L746: D123 is_homomorphism ( GenMSAlg C282 ) , C283 by L740 , L744 , L218;
thus L747: C284 = ( C286 || C282 ) by L743 , L745 , L36
.= ( D123 || D120 ) by L36;
end;
thus L748: thesis by L742;
end;
begin
definition
let C287 being non  empty non  void ManySortedSign;
func TermAlg C287 -> MSAlgebra over C287 equals 
( FreeMSA ( (the carrier of C287) --> ( NAT ) ) );
correctness;
end;
registration
let C288 being non  empty non  void ManySortedSign;
cluster ( TermAlg C288 ) ->  strict  non-empty  free;
coherence;
end;
definition
let C289 being non  empty non  void ManySortedSign;
func Equations C289 -> (ManySortedSet of (the carrier of C289)) equals 
[| (the Sorts of ( TermAlg C289 )) , (the Sorts of ( TermAlg C289 )) |];
correctness;
end;
registration
let C290 being non  empty non  void ManySortedSign;
cluster ( Equations C290 ) ->  non-empty;
coherence;
end;
definition
let C291 being non  empty non  void ManySortedSign;
mode EqualSet of C291
 is (ManySortedSubset of ( Equations C291 ));
end;
notation
let C292 being non  empty non  void ManySortedSign;
let C293 being (SortSymbol of C292);
let C294 , C295 being (Element of ( (the Sorts of ( TermAlg C292 )) . C293 ));
synonym C294 '=' C295 for [C294 , C295 ];
end;
definition
let C296 being non  empty non  void ManySortedSign;
let C297 being (SortSymbol of C296);
let C298 , C299 being (Element of ( (the Sorts of ( TermAlg C296 )) . C297 ));
redefine func C298 '=' C299 -> (Element of ( ( Equations C296 ) . C297 ));

coherence
proof
L755: [ C298 , C299 ] in [: ( (the Sorts of ( TermAlg C296 )) . C297 ) , ( (the Sorts of ( TermAlg C296 )) . C297 ) :] by ZFMISC_1:87;
thus L756: thesis by L755 , PBOOLE:def 16;
end;
end;
theorem
L758: (for R2 being non  empty non  void ManySortedSign holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds ( R6 `1 ) in ( (the Sorts of ( TermAlg R2 )) . R5 ))))
proof
let R2 being non  empty non  void ManySortedSign;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
set D124 = (the Sorts of ( TermAlg R2 ));
L759: R6 is (Element of [: ( D124 . R5 ) , ( D124 . R5 ) :]) by PBOOLE:def 16;
thus L760: thesis by L759 , MCART_1:10;
end;
theorem
L761: (for R2 being non  empty non  void ManySortedSign holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds ( R6 `2 ) in ( (the Sorts of ( TermAlg R2 )) . R5 ))))
proof
let R2 being non  empty non  void ManySortedSign;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
set D125 = (the Sorts of ( TermAlg R2 ));
L762: R6 is (Element of [: ( D125 . R5 ) , ( D125 . R5 ) :]) by PBOOLE:def 16;
thus L763: thesis by L762 , MCART_1:10;
end;
definition
let C300 being non  empty non  void ManySortedSign;
let C301 being MSAlgebra over C300;
let C302 being (SortSymbol of C300);
let C303 being (Element of ( ( Equations C300 ) . C302 ));
pred C301 |= C303
means
:L764: (for B285 being (ManySortedFunction of ( TermAlg C300 ) , C301) holds (B285 is_homomorphism ( TermAlg C300 ) , C301 implies ( ( B285 . C302 ) . ( C303 `1 ) ) = ( ( B285 . C302 ) . ( C303 `2 ) )))
;end;
definition
let C304 being non  empty non  void ManySortedSign;
let C305 being MSAlgebra over C304;
let C306 being (EqualSet of C304);
pred C305 |= C306
means
:L766: (for B286 being (SortSymbol of C304) holds (for B287 being (Element of ( ( Equations C304 ) . B286 )) holds (B287 in ( C306 . B286 ) implies C305 |= B287)))
;end;
theorem
L768: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds (for B288 being  strict  non-empty (MSSubAlgebra of R3) holds (R3 |= R6 implies B288 |= R6))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
let C307 being  strict  non-empty (MSSubAlgebra of R3);
assume that
L769: R3 |= R6;
let C308 being (ManySortedFunction of ( TermAlg R2 ) , C307);
assume that
L770: C308 is_homomorphism ( TermAlg R2 ) , C307;
L771: (the Sorts of ( TermAlg R2 )) is_transformable_to (the Sorts of C307)
proof
let C309 being set;
assume L772: C309 in (the carrier of R2);
thus L773: thesis by L772;
end;
L774: (the Sorts of C307) is (MSSubset of R3) by MSUALG_2:def 9;
reconsider D126 = C308 as (ManySortedFunction of ( TermAlg R2 ) , R3) by L774 , L771 , EXTENS_1:5;
L775: D126 is_homomorphism ( TermAlg R2 ) , R3 by L770 , MSUALG_9:15;
thus L776: thesis by L775 , L769 , L764;
end;
theorem
L777: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R7 being (EqualSet of R2) holds (for B289 being  strict  non-empty (MSSubAlgebra of R3) holds (R3 |= R7 implies B289 |= R7)))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R7 being (EqualSet of R2);
let C310 being  strict  non-empty (MSSubAlgebra of R3);
assume that
L778: R3 |= R7;
let C311 being (SortSymbol of R2);
let C312 being (Element of ( ( Equations R2 ) . C311 ));
assume L779: C312 in ( R7 . C311 );
L780: R3 |= C312 by L779 , L778 , L766;
thus L781: thesis by L780 , L768;
end;
theorem
L782: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R4 being  non-empty MSAlgebra over R2 holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds ((R3 , R4 are_isomorphic  & R3 |= R6) implies R4 |= R6))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R4 being  non-empty MSAlgebra over R2;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
assume that
L783: R3 , R4 are_isomorphic 
and
L784: R3 |= R6;
consider C313 being (ManySortedFunction of R3 , R4) such that L785: C313 is_isomorphism R3 , R4 by L783 , MSUALG_3:def 11;
consider C314 being (ManySortedFunction of R4 , R3) such that L786: C314 = ( C313 "" );
L787: (C313 is  "1-1" & C313 is  "onto") by L785 , MSUALG_3:13;
L788: ( C314 . R5 ) = ( ( C313 . R5 ) " ) by L787 , L786 , MSUALG_3:def 4;
L789: C313 is  "onto" by L785 , MSUALG_3:13;
L790: ( rng ( C313 . R5 ) ) = ( (the Sorts of R4) . R5 ) by L789 , MSUALG_3:def 3;
let C315 being (ManySortedFunction of ( TermAlg R2 ) , R4);
assume that
L791: C315 is_homomorphism ( TermAlg R2 ) , R4;
set D127 = ( C314 ** C315 );
L792: C314 is_isomorphism R4 , R3 by L785 , L786 , MSUALG_3:14;
L793: C314 is_homomorphism R4 , R3 by L792 , MSUALG_3:13;
L794: D127 is_homomorphism ( TermAlg R2 ) , R3 by L793 , L791 , MSUALG_3:10;
L795: C313 is  "1-1" by L785 , MSUALG_3:13;
L796: ( C313 . R5 ) is  one-to-one by L795 , MSUALG_3:1;
L797: ( D127 . R5 ) = ( ( C314 . R5 ) * ( C315 . R5 ) ) by MSUALG_3:2;
L798: ( ( C313 . R5 ) * ( D127 . R5 ) ) = ( ( ( C313 . R5 ) * ( C314 . R5 ) ) * ( C315 . R5 ) ) by L797 , RELAT_1:36
.= ( ( id ( (the Sorts of R4) . R5 ) ) * ( C315 . R5 ) ) by L788 , L790 , L796 , FUNCT_2:29
.= ( C315 . R5 ) by FUNCT_2:17;
L799: ( dom ( D127 . R5 ) ) = ( (the Sorts of ( TermAlg R2 )) . R5 ) by FUNCT_2:def 1;
thus L800: ( ( C315 . R5 ) . ( R6 `1 ) ) = ( ( C313 . R5 ) . ( ( D127 . R5 ) . ( R6 `1 ) ) ) by L799 , L798 , L758 , FUNCT_1:13
.= ( ( C313 . R5 ) . ( ( D127 . R5 ) . ( R6 `2 ) ) ) by L784 , L794 , L764
.= ( ( C315 . R5 ) . ( R6 `2 ) ) by L798 , L799 , L761 , FUNCT_1:13;
end;
theorem
L801: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R4 being  non-empty MSAlgebra over R2 holds (for R7 being (EqualSet of R2) holds ((R3 , R4 are_isomorphic  & R3 |= R7) implies R4 |= R7)))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R4 being  non-empty MSAlgebra over R2;
let R7 being (EqualSet of R2);
assume that
L802: R3 , R4 are_isomorphic 
and
L803: R3 |= R7;
let C316 being (SortSymbol of R2);
let C317 being (Element of ( ( Equations R2 ) . C316 ));
assume L804: C317 in ( R7 . C316 );
L805: R3 |= C317 by L804 , L803 , L766;
thus L806: thesis by L805 , L802 , L782;
end;
theorem
L807: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds (for B290 being (MSCongruence of R3) holds (R3 |= R6 implies ( QuotMSAlg (R3 , B290) ) |= R6))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
let C318 being (MSCongruence of R3);
assume that
L808: R3 |= R6;
set D128 = ( ( MSNat_Hom (R3 , C318) ) . R5 );
let C319 being (ManySortedFunction of ( TermAlg R2 ) , ( QuotMSAlg (R3 , C318) ));
assume L809: C319 is_homomorphism ( TermAlg R2 ) , ( QuotMSAlg (R3 , C318) );
consider C320 being (ManySortedFunction of ( TermAlg R2 ) , R3) such that L810: C320 is_homomorphism ( TermAlg R2 ) , R3 and L811: C319 = ( ( MSNat_Hom (R3 , C318) ) ** C320 ) by L809 , L242 , MSUALG_4:3;
L812: ( dom ( C320 . R5 ) ) = ( (the Sorts of ( TermAlg R2 )) . R5 ) by FUNCT_2:def 1;
thus L813: ( ( C319 . R5 ) . ( R6 `1 ) ) = ( ( D128 * ( C320 . R5 ) ) . ( R6 `1 ) ) by L811 , MSUALG_3:2
.= ( D128 . ( ( C320 . R5 ) . ( R6 `1 ) ) ) by L812 , L758 , FUNCT_1:13
.= ( D128 . ( ( C320 . R5 ) . ( R6 `2 ) ) ) by L808 , L810 , L764
.= ( ( D128 * ( C320 . R5 ) ) . ( R6 `2 ) ) by L812 , L761 , FUNCT_1:13
.= ( ( C319 . R5 ) . ( R6 `2 ) ) by L811 , MSUALG_3:2;
end;
theorem
L814: (for R2 being non  empty non  void ManySortedSign holds (for R3 being  non-empty MSAlgebra over R2 holds (for R7 being (EqualSet of R2) holds (for B291 being (MSCongruence of R3) holds (R3 |= R7 implies ( QuotMSAlg (R3 , B291) ) |= R7)))))
proof
let R2 being non  empty non  void ManySortedSign;
let R3 being  non-empty MSAlgebra over R2;
let R7 being (EqualSet of R2);
let C321 being (MSCongruence of R3);
assume that
L815: R3 |= R7;
let C322 being (SortSymbol of R2);
let C323 being (Element of ( ( Equations R2 ) . C322 ));
assume L816: C323 in ( R7 . C322 );
L817: R3 |= C323 by L816 , L815 , L766;
thus L818: thesis by L817 , L807;
end;
L819: (for R2 being non  empty non  void ManySortedSign holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds (for B292 being non  empty set holds (for B293 being (MSAlgebra-Family of B292 , R2) holds ((for B294 being (Element of B292) holds ( B293 . B294 ) |= R6) implies ( product B293 ) |= R6))))))
proof
let R2 being non  empty non  void ManySortedSign;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
reconsider D129 = ( R6 `2 ) as (Element of ( (the Sorts of ( TermAlg R2 )) . R5 )) by L761;
reconsider D130 = ( R6 `1 ) as (Element of ( (the Sorts of ( TermAlg R2 )) . R5 )) by L758;
let C324 being non  empty set;
let C325 being (MSAlgebra-Family of C324 , R2);
assume that
L820: (for B295 being (Element of C324) holds ( C325 . B295 ) |= R6);
let C326 being (ManySortedFunction of ( TermAlg R2 ) , ( product C325 ));
assume that
L821: C326 is_homomorphism ( TermAlg R2 ) , ( product C325 );
L822: ( dom ( C326 . R5 ) ) = ( (the Sorts of ( TermAlg R2 )) . R5 ) by FUNCT_2:def 1;
L823:
now
let C327 being (Element of C324);
set D131 = ( ( proj (C325 , C327) ) ** C326 );
L824: ( C325 . C327 ) |= R6 by L820;
L825: ( proj (C325 , C327) ) is_homomorphism ( product C325 ) , ( C325 . C327 ) by PRALG_3:24;
L826: ( ( proj (C325 , C327) ) ** C326 ) is_homomorphism ( TermAlg R2 ) , ( C325 . C327 ) by L825 , L821 , MSUALG_3:10;
thus L827: ( ( proj (( Carrier (C325 , R5) ) , C327) ) . ( ( C326 . R5 ) . D130 ) ) = ( ( ( proj (C325 , C327) ) . R5 ) . ( ( C326 . R5 ) . D130 ) ) by PRALG_3:def 2
.= ( ( ( ( proj (C325 , C327) ) . R5 ) * ( C326 . R5 ) ) . D130 ) by L822 , FUNCT_1:13
.= ( ( D131 . R5 ) . D130 ) by MSUALG_3:2
.= ( ( D131 . R5 ) . D129 ) by L824 , L826 , L764
.= ( ( ( ( proj (C325 , C327) ) . R5 ) * ( C326 . R5 ) ) . D129 ) by MSUALG_3:2
.= ( ( ( proj (C325 , C327) ) . R5 ) . ( ( C326 . R5 ) . D129 ) ) by L822 , FUNCT_1:13
.= ( ( proj (( Carrier (C325 , R5) ) , C327) ) . ( ( C326 . R5 ) . D129 ) ) by PRALG_3:def 2;
end;
L828: ( (the Sorts of ( product C325 )) . R5 ) = ( product ( Carrier (C325 , R5) ) ) by PRALG_2:def 10;
thus L829: thesis by L828 , L823 , MSUALG_9:14;
end;
theorem
L830: (for R1 being set holds (for R2 being non  empty non  void ManySortedSign holds (for R5 being (SortSymbol of R2) holds (for R6 being (Element of ( ( Equations R2 ) . R5 )) holds (for B296 being (MSAlgebra-Family of R1 , R2) holds ((for B297 being set holds (B297 in R1 implies (ex B298 being MSAlgebra over R2 st (B298 = ( B296 . B297 ) & B298 |= R6)))) implies ( product B296 ) |= R6))))))
proof
let R1 being set;
let R2 being non  empty non  void ManySortedSign;
let R5 being (SortSymbol of R2);
let R6 being (Element of ( ( Equations R2 ) . R5 ));
let C328 being (MSAlgebra-Family of R1 , R2);
assume that
L831: (for B299 being set holds (B299 in R1 implies (ex B300 being MSAlgebra over R2 st (B300 = ( C328 . B299 ) & B300 |= R6))));
per cases ;
suppose L832: R1 = ( {} );

reconsider D132 = R1 as  empty set by L832;
reconsider D133 = C328 as (MSAlgebra-Family of D132 , R2);
thus L833: ( product C328 ) |= R6
proof
let C329 being (ManySortedFunction of ( TermAlg R2 ) , ( product C328 ));
assume that
L834: C329 is_homomorphism ( TermAlg R2 ) , ( product C328 );
L835: ( (the Sorts of ( product D133 )) . R5 ) = ( product ( Carrier (D133 , R5) ) ) by PRALG_2:def 10
.= { ( {} ) } by CARD_3:10;
L836: ( ( C329 . R5 ) . ( R6 `2 ) ) in ( (the Sorts of ( product D133 )) . R5 ) by L761 , FUNCT_2:5;
L837: ( ( C329 . R5 ) . ( R6 `1 ) ) in ( (the Sorts of ( product D133 )) . R5 ) by L758 , FUNCT_2:5;
thus L838: ( ( C329 . R5 ) . ( R6 `1 ) ) = ( {} ) by L837 , L835 , TARSKI:def 1
.= ( ( C329 . R5 ) . ( R6 `2 ) ) by L835 , L836 , TARSKI:def 1;
end;

end;
suppose L834: R1 <> ( {} );

reconsider D134 = R1 as non  empty set by L834;
reconsider D135 = C328 as (MSAlgebra-Family of D134 , R2);
L835:
now
let C330 being (Element of D134);
L836: (ex B301 being MSAlgebra over R2 st (B301 = ( D135 . C330 ) & B301 |= R6)) by L831;
thus L837: ( D135 . C330 ) |= R6 by L836;
end;
thus L838: thesis by L835 , L819;
end;
end;
theorem
L840: (for R1 being set holds (for R2 being non  empty non  void ManySortedSign holds (for R7 being (EqualSet of R2) holds (for B302 being (MSAlgebra-Family of R1 , R2) holds ((for B303 being set holds (B303 in R1 implies (ex B304 being MSAlgebra over R2 st (B304 = ( B302 . B303 ) & B304 |= R7)))) implies ( product B302 ) |= R7)))))
proof
let R1 being set;
let R2 being non  empty non  void ManySortedSign;
let R7 being (EqualSet of R2);
let C331 being (MSAlgebra-Family of R1 , R2);
assume that
L841: (for B305 being set holds (B305 in R1 implies (ex B306 being MSAlgebra over R2 st (B306 = ( C331 . B305 ) & B306 |= R7))));
let C332 being (SortSymbol of R2);
let C333 being (Element of ( ( Equations R2 ) . C332 ));
assume that
L842: C333 in ( R7 . C332 );
L843:
now
let C334 being set;
assume L844: C334 in R1;
consider C335 being MSAlgebra over R2 such that L845: (C335 = ( C331 . C334 ) & C335 |= R7) by L844 , L841;
take D136 = C335;
thus L846: (D136 = ( C331 . C334 ) & D136 |= C333) by L842 , L845 , L766;
end;
thus L847: thesis by L843 , L830;
end;
