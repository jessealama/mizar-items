:: Technical Preliminaries to Algebraic Specifications
::  by Grzegorz Bancerek
::
:: Received September 7, 1999
:: Copyright (c) 1999-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies FUNCT_1, RELAT_1, XBOOLE_0, TARSKI, FUNCT_4, PARTFUN1, SUBSET_1,
      PBOOLE, STRUCT_0, MSUALG_1, MARGREL1, CATALG_1, PUA2MSS1, TREES_1,
      FINSEQ_1, INSTALG1, FUNCSDOM, MSUALG_6, PROB_2, CARD_3, ALGSPEC1, NAT_1;
 notations TARSKI, XBOOLE_0, SUBSET_1, RELAT_1, FUNCT_1, MSAFREE1, FINSEQ_1,
      PBOOLE, RELSET_1, PARTFUN1, FINSEQ_2, FUNCT_4, LANG1, FUNCT_2, STRUCT_0,
      CARD_3, MSUALG_1, PROB_2, PUA2MSS1, CIRCCOMB, MSUALG_6, INSTALG1,
      CATALG_1;
 constructors MSAFREE1, CIRCCOMB, PUA2MSS1, MSUALG_6, CATALG_1, RELSET_1;
 registrations XBOOLE_0, RELAT_1, FUNCT_1, FUNCT_2, PBOOLE, STRUCT_0, MSUALG_1,
      MSUALG_2, CIRCCOMB, MSUALG_6, INSTALG1, CATALG_1, RELSET_1, FINSEQ_1,
      FUNCT_4;
 requirements SUBSET, BOOLE;
 definitions TARSKI, FUNCT_1, PARTFUN1, STRUCT_0, MSUALG_1, CIRCCOMB, PUA2MSS1,
      INSTALG1, XBOOLE_0, FUNCT_2;
 theorems RELAT_1, FUNCT_1, FUNCT_2, FUNCT_3, FUNCT_4, PARTFUN1, GRFUNC_1,
      FINSEQ_1, PBOOLE, LANG1, PUA2MSS1, FRECHET, INSTALG1, FUNCT_7, CIRCCOMB,
      RELSET_1, PROB_2, MSAFREE1, XBOOLE_0, XBOOLE_1, FINSEQ_2;
 schemes FUNCT_1;

begin
theorem
L1: (for B1 , B2 , B3 being Function holds (( ( dom B1 ) /\ ( dom B2 ) ) c= ( dom B3 ) implies ( ( B1 +* B2 ) +* B3 ) = ( ( B2 +* B1 ) +* B3 )))
proof
let C1 , C2 , C3 being Function;
L2: ( dom ( ( C2 +* C1 ) +* C3 ) ) = ( ( dom ( C2 +* C1 ) ) \/ ( dom C3 ) ) by FUNCT_4:def 1;
L3: ( dom ( C1 +* C2 ) ) = ( ( dom C1 ) \/ ( dom C2 ) ) by FUNCT_4:def 1;
assume L4: ( ( dom C1 ) /\ ( dom C2 ) ) c= ( dom C3 );
L5:
now
let C4 being set;
assume L6: C4 in ( ( ( dom C1 ) \/ ( dom C2 ) ) \/ ( dom C3 ) );
per cases ;
suppose L7: C4 in ( dom C3 );

L8: ( ( ( C1 +* C2 ) +* C3 ) . C4 ) = ( C3 . C4 ) by L7 , FUNCT_4:13;
thus L9: ( ( ( C1 +* C2 ) +* C3 ) . C4 ) = ( ( ( C2 +* C1 ) +* C3 ) . C4 ) by L8 , L7 , FUNCT_4:13;
end;
suppose L10: (not C4 in ( dom C3 ));

L11: (not C4 in ( ( dom C1 ) /\ ( dom C2 ) )) by L10 , L4;
L12: ((not C4 in ( dom C1 )) or (not C4 in ( dom C2 ))) by L11 , XBOOLE_0:def 4;
L13: ( ( ( C1 +* C2 ) +* C3 ) . C4 ) = ( ( C1 +* C2 ) . C4 ) by L10 , FUNCT_4:11;
L14: C4 in ( ( dom C2 ) \/ ( dom C1 ) ) by L6 , L10 , XBOOLE_0:def 3;
L15: (C4 in ( dom C1 ) or C4 in ( dom C2 )) by L14 , XBOOLE_0:def 3;
L16: ((( ( C1 +* C2 ) . C4 ) = ( C1 . C4 ) & ( ( C2 +* C1 ) . C4 ) = ( C1 . C4 )) or (( ( C1 +* C2 ) . C4 ) = ( C2 . C4 ) & ( ( C2 +* C1 ) . C4 ) = ( C2 . C4 ))) by L15 , L12 , FUNCT_4:11 , FUNCT_4:13;
thus L17: ( ( ( C1 +* C2 ) +* C3 ) . C4 ) = ( ( ( C2 +* C1 ) +* C3 ) . C4 ) by L16 , L10 , L13 , FUNCT_4:11;
end;
end;
L19: ( dom ( C2 +* C1 ) ) = ( ( dom C2 ) \/ ( dom C1 ) ) by FUNCT_4:def 1;
L20: ( dom ( ( C1 +* C2 ) +* C3 ) ) = ( ( dom ( C1 +* C2 ) ) \/ ( dom C3 ) ) by FUNCT_4:def 1;
thus L21: thesis by L20 , L2 , L3 , L19 , L5 , FUNCT_1:2;
end;
theorem
L22: (for B4 , B5 , B6 being Function holds ((B4 c= B5 & ( ( rng B6 ) /\ ( dom B5 ) ) c= ( dom B4 )) implies ( B5 * B6 ) = ( B4 * B6 )))
proof
let C5 , C6 , C7 being Function;
assume that
L23: C5 c= C6
and
L24: ( ( rng C7 ) /\ ( dom C6 ) ) c= ( dom C5 );
L25: ( dom ( C5 * C7 ) ) = ( dom ( C6 * C7 ) )
proof
L26: ( C5 * C7 ) c= ( C6 * C7 ) by L23 , RELAT_1:29;
thus L27: ( dom ( C5 * C7 ) ) c= ( dom ( C6 * C7 ) ) by L26 , RELAT_1:11;
let C8 being set;
assume L28: C8 in ( dom ( C6 * C7 ) );
L29: ( C7 . C8 ) in ( dom C6 ) by L28 , FUNCT_1:11;
L30: C8 in ( dom C7 ) by L28 , FUNCT_1:11;
L31: ( C7 . C8 ) in ( rng C7 ) by L30 , FUNCT_1:def 3;
L32: ( C7 . C8 ) in ( ( rng C7 ) /\ ( dom C6 ) ) by L31 , L29 , XBOOLE_0:def 4;
thus L33: thesis by L32 , L24 , L30 , FUNCT_1:11;
end;
L34:
now
let C9 being set;
assume L35: C9 in ( dom ( C5 * C7 ) );
L36: C9 in ( dom C7 ) by L35 , FUNCT_1:11;
L37: ( ( C6 * C7 ) . C9 ) = ( C6 . ( C7 . C9 ) ) by L36 , FUNCT_1:13;
L38: ( ( C5 * C7 ) . C9 ) = ( C5 . ( C7 . C9 ) ) by L36 , FUNCT_1:13;
L39: ( C7 . C9 ) in ( dom C5 ) by L35 , FUNCT_1:11;
thus L40: ( ( C6 * C7 ) . C9 ) = ( ( C5 * C7 ) . C9 ) by L39 , L23 , L37 , L38 , GRFUNC_1:2;
end;
thus L41: thesis by L34 , L25 , FUNCT_1:2;
end;
theorem
L42: (for B7 , B8 , B9 being Function holds ((( dom B7 ) misses ( rng B9 ) & ( B8 .: ( dom B9 ) ) misses ( dom B7 )) implies ( B7 * ( B8 +* B9 ) ) = ( B7 * B8 )))
proof
let C10 , C11 , C12 being Function;
assume that
L43: ( dom C10 ) misses ( rng C12 )
and
L44: ( C11 .: ( dom C12 ) ) misses ( dom C10 );
L45: ( dom ( C10 * C11 ) ) = ( dom ( C10 * ( C11 +* C12 ) ) )
proof
thus L46:now
let C13 being set;
assume L47: C13 in ( dom ( C10 * C11 ) );
L48: C13 in ( dom C11 ) by L47 , FUNCT_1:11;
L49: ( C11 . C13 ) in ( dom C10 ) by L47 , FUNCT_1:11;
L50:
now
assume L51: C13 in ( dom C12 );
L52: ( C11 . C13 ) in ( C11 .: ( dom C12 ) ) by L51 , L48 , FUNCT_1:def 6;
thus L53: contradiction by L52 , L44 , L49 , XBOOLE_0:3;
end;
L54: ( C11 . C13 ) = ( ( C11 +* C12 ) . C13 ) by L50 , FUNCT_4:11;
L55: C13 in ( dom ( C11 +* C12 ) ) by L48 , FUNCT_4:12;
thus L56: C13 in ( dom ( C10 * ( C11 +* C12 ) ) ) by L55 , L49 , L54 , FUNCT_1:11;
end;
let C14 being set;
assume L57: C14 in ( dom ( C10 * ( C11 +* C12 ) ) );
L58: C14 in ( dom ( C11 +* C12 ) ) by L57 , FUNCT_1:11;
L59: ((C14 in ( dom C11 ) & (not C14 in ( dom C12 ))) or C14 in ( dom C12 )) by L58 , FUNCT_4:12;
L60: ((C14 in ( dom C11 ) & ( ( C11 +* C12 ) . C14 ) = ( C11 . C14 )) or (( ( C11 +* C12 ) . C14 ) = ( C12 . C14 ) & ( C12 . C14 ) in ( rng C12 ))) by L59 , FUNCT_1:def 3 , FUNCT_4:11 , FUNCT_4:13;
L61: ( ( C11 +* C12 ) . C14 ) in ( dom C10 ) by L57 , FUNCT_1:11;
thus L62: thesis by L61 , L43 , L60 , FUNCT_1:11 , XBOOLE_0:3;
end;
L63:
now
let C15 being set;
assume L64: C15 in ( dom ( C10 * C11 ) );
L65: C15 in ( dom C11 ) by L64 , FUNCT_1:11;
L66: ( C11 . C15 ) in ( dom C10 ) by L64 , FUNCT_1:11;
L67:
now
assume L68: C15 in ( dom C12 );
L69: ( C11 . C15 ) in ( C11 .: ( dom C12 ) ) by L68 , L65 , FUNCT_1:def 6;
thus L70: contradiction by L69 , L44 , L66 , XBOOLE_0:3;
end;
L71: ( C11 . C15 ) = ( ( C11 +* C12 ) . C15 ) by L67 , FUNCT_4:11;
L72: C15 in ( dom ( C11 +* C12 ) ) by L65 , FUNCT_4:12;
thus L73: ( ( C10 * ( C11 +* C12 ) ) . C15 ) = ( C10 . ( C11 . C15 ) ) by L72 , L71 , FUNCT_1:13
.= ( ( C10 * C11 ) . C15 ) by L65 , FUNCT_1:13;
end;
thus L74: thesis by L63 , L45 , FUNCT_1:2;
end;
theorem
L75: (for B10 , B11 , B12 , B13 being Function holds ((B10 tolerates B11 & B12 tolerates B13) implies ( B10 * B12 ) tolerates ( B11 * B13 )))
proof
let C16 , C17 , C18 , C19 being Function;
assume that
L76: (for B14 being set holds (B14 in ( ( dom C16 ) /\ ( dom C17 ) ) implies ( C16 . B14 ) = ( C17 . B14 )))
and
L77: (for B15 being set holds (B15 in ( ( dom C18 ) /\ ( dom C19 ) ) implies ( C18 . B15 ) = ( C19 . B15 )));
let C20 being set;
assume L78: C20 in ( ( dom ( C16 * C18 ) ) /\ ( dom ( C17 * C19 ) ) );
L79: C20 in ( dom ( C16 * C18 ) ) by L78 , XBOOLE_0:def 4;
L80: C20 in ( dom C18 ) by L79 , FUNCT_1:11;
L81: ( ( C16 * C18 ) . C20 ) = ( C16 . ( C18 . C20 ) ) by L80 , FUNCT_1:13;
L82: C20 in ( dom ( C17 * C19 ) ) by L78 , XBOOLE_0:def 4;
L83: C20 in ( dom C19 ) by L82 , FUNCT_1:11;
L84: ( ( C17 * C19 ) . C20 ) = ( C17 . ( C19 . C20 ) ) by L83 , FUNCT_1:13;
L85: C20 in ( ( dom C18 ) /\ ( dom C19 ) ) by L80 , L83 , XBOOLE_0:def 4;
L86: ( C18 . C20 ) = ( C19 . C20 ) by L85 , L77;
L87: ( C19 . C20 ) in ( dom C17 ) by L82 , FUNCT_1:11;
L88: ( C18 . C20 ) in ( dom C16 ) by L79 , FUNCT_1:11;
L89: ( C18 . C20 ) in ( ( dom C16 ) /\ ( dom C17 ) ) by L88 , L87 , L86 , XBOOLE_0:def 4;
thus L90: thesis by L89 , L76 , L86 , L81 , L84;
end;
theorem
L91: (for B16 , B17 , B18 , B19 being non  empty set holds (for B20 being (Function of B16 , B18) holds (for B21 being (Function of B17 , B19) holds (B20 c= B21 implies ( B20 * ) c= ( B21 * )))))
proof
let C21 , C22 , C23 , C24 being non  empty set;
let C25 being (Function of C21 , C23);
let C26 being (Function of C22 , C24);
L92: ( dom C26 ) = C22 by FUNCT_2:def 1;
assume L93: C25 c= C26;
L94: ( dom C25 ) = C21 by FUNCT_2:def 1;
L95: ( C21 * ) c= ( C22 * ) by L94 , L92 , L93 , FINSEQ_1:62 , RELAT_1:11;
L96:
now
let C27 being set;
assume L97: C27 in ( C21 * );
reconsider D1 = C27 as (Element of ( C21 * )) by L97;
L98: ( ( C25 * ) . D1 ) = ( C25 * D1 ) by LANG1:def 13;
L99: ( ( rng D1 ) /\ C22 ) c= C21;
L100: ( C25 * D1 ) = ( C26 * D1 ) by L99 , L94 , L92 , L93 , L22;
L101: D1 in ( C21 * );
thus L102: ( ( C25 * ) . C27 ) = ( ( C26 * ) . C27 ) by L101 , L95 , L98 , L100 , LANG1:def 13;
end;
L103: ( dom ( C26 * ) ) = ( C22 * ) by FUNCT_2:def 1;
L104: ( dom ( C25 * ) ) = ( C21 * ) by FUNCT_2:def 1;
thus L105: thesis by L104 , L103 , L95 , L96 , GRFUNC_1:2;
end;
theorem
L106: (for B22 , B23 , B24 , B25 being non  empty set holds (for B26 being (Function of B22 , B24) holds (for B27 being (Function of B23 , B25) holds (B26 tolerates B27 implies ( B26 * ) tolerates ( B27 * )))))
proof
let C28 , C29 , C30 , C31 being non  empty set;
let C32 being (Function of C28 , C30);
let C33 being (Function of C29 , C31);
L107: ( dom C33 ) = C29 by FUNCT_2:def 1;
assume L108: (for B28 being set holds (B28 in ( ( dom C32 ) /\ ( dom C33 ) ) implies ( C32 . B28 ) = ( C33 . B28 )));
let C34 being set;
assume L109: C34 in ( ( dom ( C32 * ) ) /\ ( dom ( C33 * ) ) );
reconsider D2 = C34 as (Element of ( C29 * )) by L109;
L110: ( ( C33 * ) . C34 ) = ( C33 * D2 ) by LANG1:def 13;
L111: C34 in ( dom ( C32 * ) ) by L109 , XBOOLE_0:def 4;
reconsider D3 = C34 as (Element of ( C28 * )) by L111;
L112: ( dom C32 ) = C28 by FUNCT_2:def 1;
L113:
now
let C35 being set;
assume L114: C35 in ( dom D3 );
L115: ( D2 . C35 ) in ( rng D2 ) by L114 , FUNCT_1:def 3;
L116: ( D3 . C35 ) in ( rng D3 ) by L114 , FUNCT_1:def 3;
L117: ( D3 . C35 ) in ( ( dom C32 ) /\ ( dom C33 ) ) by L116 , L112 , L107 , L115 , XBOOLE_0:def 4;
L118: ( C32 . ( D3 . C35 ) ) = ( C33 . ( D2 . C35 ) ) by L117 , L108
.= ( ( C33 * D2 ) . C35 ) by L114 , FUNCT_1:13;
thus L119: ( ( C32 * D3 ) . C35 ) = ( ( C33 * D2 ) . C35 ) by L118 , L114 , FUNCT_1:13;
end;
L120: ( rng D2 ) c= C29;
L121: ( dom ( C33 * D2 ) ) = ( dom D2 ) by L120 , L107 , RELAT_1:27;
L122: ( rng D3 ) c= C28;
L123: ( dom ( C32 * D3 ) ) = ( dom D3 ) by L122 , L112 , RELAT_1:27;
L124: ( ( C32 * ) . C34 ) = ( C32 * D3 ) by LANG1:def 13;
thus L125: thesis by L124 , L110 , L123 , L121 , L113 , FUNCT_1:2;
end;
definition
let C36 being set;
let C37 being Function;
func C36 -indexing C37 -> (ManySortedSet of C36) equals 
( ( id C36 ) +* ( C37 | C36 ) );
coherence
proof
L126: ( dom ( id C36 ) ) = C36;
L127: ( dom ( ( id C36 ) +* ( C37 | C36 ) ) ) = ( C36 \/ ( dom ( C37 | C36 ) ) ) by L126 , FUNCT_4:def 1;
L128: ( dom ( ( id C36 ) +* ( C37 | C36 ) ) ) = C36 by L127 , RELAT_1:58 , XBOOLE_1:12;
thus L129: thesis by L128 , PARTFUN1:def 2 , RELAT_1:def 18;
end;
end;
theorem
L131: (for B29 being set holds (for B30 being Function holds ( rng ( B29 -indexing B30 ) ) = ( ( B29 \ ( dom B30 ) ) \/ ( B30 .: B29 ) )))
proof
let C38 being set;
let C39 being Function;
L132: ( dom ( id C38 ) ) = C38;
thus L133: ( rng ( C38 -indexing C39 ) ) = ( ( ( id C38 ) .: ( C38 \ ( dom ( C39 | C38 ) ) ) ) \/ ( rng ( C39 | C38 ) ) ) by L132 , FRECHET:12
.= ( ( ( id C38 ) .: ( C38 \ ( dom ( C39 | C38 ) ) ) ) \/ ( C39 .: C38 ) ) by RELAT_1:115
.= ( ( C38 \ ( dom ( C39 | C38 ) ) ) \/ ( C39 .: C38 ) ) by FUNCT_1:92
.= ( ( C38 \ ( ( dom C39 ) /\ C38 ) ) \/ ( C39 .: C38 ) ) by RELAT_1:61
.= ( ( C38 \ ( dom C39 ) ) \/ ( C39 .: C38 ) ) by XBOOLE_1:47;
end;
theorem
L134: (for B31 being non  empty set holds (for B32 being Function holds (for B33 being (Element of B31) holds ( ( B31 -indexing B32 ) . B33 ) = ( ( ( id B31 ) +* B32 ) . B33 ))))
proof
let C40 being non  empty set;
let C41 being Function;
let C42 being (Element of C40);
L135: ( ( ( id C40 ) +* C41 ) | C40 ) = ( ( ( id C40 ) | C40 ) +* ( C41 | C40 ) ) by FUNCT_4:71
.= ( ( ( id C40 ) | ( dom ( id C40 ) ) ) +* ( C41 | C40 ) )
.= ( C40 -indexing C41 );
thus L136: thesis by L135 , FUNCT_1:49;
end;
theorem
L137: (for B34 , B35 being set holds (for B36 being Function holds (B35 in B34 implies ((B35 in ( dom B36 ) implies ( ( B34 -indexing B36 ) . B35 ) = ( B36 . B35 )) & ((not B35 in ( dom B36 )) implies ( ( B34 -indexing B36 ) . B35 ) = B35)))))
proof
let C43 , C44 being set;
let C45 being Function;
assume L138: C44 in C43;
L139: ( ( id C43 ) . C44 ) = C44 by L138 , FUNCT_1:18;
L140: ( ( C43 -indexing C45 ) . C44 ) = ( ( ( id C43 ) +* C45 ) . C44 ) by L138 , L134;
thus L141: thesis by L140 , L139 , FUNCT_4:11 , FUNCT_4:13;
end;
theorem
L142: (for B37 being set holds (for B38 being Function holds (( dom B38 ) = B37 implies ( B37 -indexing B38 ) = B38)))
proof
let C46 being set;
let C47 being Function;
L143: ( dom ( id C46 ) ) = C46;
assume L144: ( dom C47 ) = C46;
L145: ( C47 | C46 ) = C47 by L144 , RELAT_1:68;
thus L146: thesis by L145 , L144 , L143 , FUNCT_4:19;
end;
theorem
L147: (for B39 being set holds (for B40 being Function holds ( B39 -indexing ( B39 -indexing B40 ) ) = ( B39 -indexing B40 )))
proof
let C48 being set;
let C49 being Function;
L148: ( dom ( C48 -indexing C49 ) ) = C48 by PARTFUN1:def 2;
L149: (for B41 being set holds (B41 in C48 implies ( ( C48 -indexing ( C48 -indexing C49 ) ) . B41 ) = ( ( C48 -indexing C49 ) . B41 ))) by L148 , L137;
thus L150: thesis by L149 , PBOOLE:3;
end;
theorem
L151: (for B42 being set holds (for B43 being Function holds ( B42 -indexing ( ( id B42 ) +* B43 ) ) = ( B42 -indexing B43 )))
proof
let C50 being set;
let C51 being Function;
thus L152: ( C50 -indexing ( ( id C50 ) +* C51 ) ) = ( ( id C50 ) +* ( ( ( id C50 ) | C50 ) +* ( C51 | C50 ) ) ) by FUNCT_4:71
.= ( ( id C50 ) +* ( ( id C50 ) +* ( C51 | C50 ) ) )
.= ( ( ( id C50 ) +* ( id C50 ) ) +* ( C51 | C50 ) ) by FUNCT_4:14
.= ( C50 -indexing C51 );
end;
theorem
L153: (for B44 being set holds (for B45 being Function holds (B45 c= ( id B44 ) implies ( B44 -indexing B45 ) = ( id B44 ))))
proof
let C52 being set;
let C53 being Function;
assume L154: C53 c= ( id C52 );
L155: ( ( id C52 ) +* C53 ) = ( id C52 ) by L154 , FUNCT_4:98;
thus L156: ( C52 -indexing C53 ) = ( C52 -indexing ( id C52 ) ) by L155 , L151
.= ( id C52 );
end;
theorem
L157: (for B46 being set holds ( B46 -indexing ( {} ) ) = ( id B46 ));
theorem
L158: (for B47 being set holds (for B48 being Function holds (B47 c= ( dom B48 ) implies ( B47 -indexing B48 ) = ( B48 | B47 ))))
proof
let C54 being set;
let C55 being Function;
assume L159: C54 c= ( dom C55 );
L160: ( dom ( C55 | C54 ) ) = C54 by L159 , RELAT_1:62;
thus L161: ( C54 -indexing C55 ) = ( C54 -indexing ( C55 | C54 ) )
.= ( C55 | C54 ) by L160 , L142;
end;
theorem
L162: (for B49 being Function holds ( ( {} ) -indexing B49 ) = ( {} ));
theorem
L163: (for B50 , B51 being set holds (for B52 being Function holds (B50 c= B51 implies ( ( B51 -indexing B52 ) | B50 ) = ( B50 -indexing B52 ))))
proof
let C56 , C57 being set;
let C58 being Function;
assume L164: C56 c= C57;
L165: ( ( C58 | C57 ) | C56 ) = ( C58 | C56 ) by L164 , RELAT_1:74;
L166: ( ( id C57 ) | C56 ) = ( id C56 ) by L164 , FUNCT_3:1;
thus L167: thesis by L166 , L165 , FUNCT_4:71;
end;
theorem
L168: (for B53 , B54 being set holds (for B55 being Function holds ( ( B53 \/ B54 ) -indexing B55 ) = ( ( B53 -indexing B55 ) +* ( B54 -indexing B55 ) )))
proof
let C59 , C60 being set;
let C61 being Function;
set D4 = ( C59 \/ C60 );
L169: ( C61 | C60 ) c= C61 by RELAT_1:59;
L170: ( C61 | C59 ) c= C61 by RELAT_1:59;
L171: ( C61 | C59 ) tolerates ( C61 | C60 ) by L170 , L169 , PARTFUN1:52;
L172: ( ( C61 | C59 ) \/ ( C61 | C60 ) ) = ( ( C61 | C59 ) +* ( C61 | C60 ) ) by L171 , FUNCT_4:30;
L173: ( dom ( C61 | C59 ) ) = ( ( dom C61 ) /\ C59 ) by RELAT_1:61;
L174: ( dom ( C61 | C59 ) ) c= ( dom C61 ) by L173 , XBOOLE_1:17;
L175: ( dom ( C61 | C60 ) ) = ( ( dom C61 ) /\ C60 ) by RELAT_1:61;
L176: ( ( dom ( C61 | C59 ) ) /\ ( dom ( id C60 ) ) ) c= ( dom ( C61 | C60 ) ) by L175 , L174 , XBOOLE_1:27;
thus L177: ( D4 -indexing C61 ) = ( ( ( id C59 ) +* ( id C60 ) ) +* ( C61 | D4 ) ) by FUNCT_4:22
.= ( ( ( id C59 ) +* ( id C60 ) ) +* ( ( C61 | C59 ) +* ( C61 | C60 ) ) ) by L172 , RELAT_1:78
.= ( ( id C59 ) +* ( ( id C60 ) +* ( ( C61 | C59 ) +* ( C61 | C60 ) ) ) ) by FUNCT_4:14
.= ( ( id C59 ) +* ( ( ( id C60 ) +* ( C61 | C59 ) ) +* ( C61 | C60 ) ) ) by FUNCT_4:14
.= ( ( id C59 ) +* ( ( ( C61 | C59 ) +* ( id C60 ) ) +* ( C61 | C60 ) ) ) by L176 , L1
.= ( ( id C59 ) +* ( ( C61 | C59 ) +* ( ( id C60 ) +* ( C61 | C60 ) ) ) ) by FUNCT_4:14
.= ( ( C59 -indexing C61 ) +* ( C60 -indexing C61 ) ) by FUNCT_4:14;
end;
theorem
L178: (for B56 , B57 being set holds (for B58 being Function holds ( B56 -indexing B58 ) tolerates ( B57 -indexing B58 )))
proof
let C62 , C63 being set;
let C64 being Function;
L179: ( C63 -indexing C64 ) = ( ( ( C62 \/ C63 ) -indexing C64 ) | C63 ) by L163 , XBOOLE_1:7;
L180: ( C63 -indexing C64 ) c= ( ( C62 \/ C63 ) -indexing C64 ) by L179 , RELAT_1:59;
L181: ( C62 -indexing C64 ) = ( ( ( C62 \/ C63 ) -indexing C64 ) | C62 ) by L163 , XBOOLE_1:7;
L182: ( C62 -indexing C64 ) c= ( ( C62 \/ C63 ) -indexing C64 ) by L181 , RELAT_1:59;
thus L183: thesis by L182 , L180 , PARTFUN1:52;
end;
theorem
L184: (for B59 , B60 being set holds (for B61 being Function holds ( ( B59 \/ B60 ) -indexing B61 ) = ( ( B59 -indexing B61 ) \/ ( B60 -indexing B61 ) )))
proof
let C65 , C66 being set;
let C67 being Function;
L185: ( C65 -indexing C67 ) tolerates ( C66 -indexing C67 ) by L178;
L186: ( ( C65 \/ C66 ) -indexing C67 ) = ( ( C65 -indexing C67 ) +* ( C66 -indexing C67 ) ) by L168;
thus L187: thesis by L186 , L185 , FUNCT_4:30;
end;
theorem
L188: (for B62 being non  empty set holds (for B63 , B64 being Function holds (( rng B64 ) c= B62 implies ( ( B62 -indexing B63 ) * B64 ) = ( ( ( id B62 ) +* B63 ) * B64 ))))
proof
let C68 being non  empty set;
let C69 , C70 being Function;
assume that
L189: ( rng C70 ) c= C68;
L190: ( rng C70 ) c= ( dom ( C68 -indexing C69 ) ) by L189 , PARTFUN1:def 2;
L191: ( dom ( ( C68 -indexing C69 ) * C70 ) ) = ( dom C70 ) by L190 , RELAT_1:27;
L192:
now
let C71 being set;
assume L193: C71 in ( dom C70 );
L194: ( ( ( ( id C68 ) +* C69 ) * C70 ) . C71 ) = ( ( ( id C68 ) +* C69 ) . ( C70 . C71 ) ) by L193 , FUNCT_1:13;
L195: ( C70 . C71 ) in ( rng C70 ) by L193 , FUNCT_1:def 3;
L196: ( ( ( C68 -indexing C69 ) * C70 ) . C71 ) = ( ( C68 -indexing C69 ) . ( C70 . C71 ) ) by L193 , FUNCT_1:13;
thus L197: ( ( ( C68 -indexing C69 ) * C70 ) . C71 ) = ( ( ( ( id C68 ) +* C69 ) * C70 ) . C71 ) by L196 , L189 , L194 , L195 , L134;
end;
L198: ( dom ( id C68 ) ) = C68;
L199: ( dom ( ( id C68 ) +* C69 ) ) = ( C68 \/ ( dom C69 ) ) by L198 , FUNCT_4:def 1;
L200: C68 c= ( C68 \/ ( dom C69 ) ) by XBOOLE_1:7;
L201: ( dom ( ( ( id C68 ) +* C69 ) * C70 ) ) = ( dom C70 ) by L200 , L189 , L199 , RELAT_1:27 , XBOOLE_1:1;
thus L202: thesis by L201 , L191 , L192 , FUNCT_1:2;
end;
theorem
L203: (for B65 , B66 being Function holds ((( dom B65 ) misses ( dom B66 ) & ( rng B66 ) misses ( dom B65 )) implies (for B67 being set holds ( B65 * ( B67 -indexing B66 ) ) = ( B65 | B67 ))))
proof
let C72 , C73 being Function;
assume that
L204: ( dom C72 ) misses ( dom C73 )
and
L205: ( rng C73 ) misses ( dom C72 );
let C74 being set;
L206: ( dom ( C72 | C74 ) ) c= ( dom C72 ) by RELAT_1:60;
L207: ( ( id C74 ) .: ( dom ( C73 | C74 ) ) ) c= ( dom ( C73 | C74 ) )
proof
let C75 being set;
assume L208: C75 in ( ( id C74 ) .: ( dom ( C73 | C74 ) ) );
L209: (ex B68 being set st (B68 in ( dom ( id C74 ) ) & B68 in ( dom ( C73 | C74 ) ) & C75 = ( ( id C74 ) . B68 ))) by L208 , FUNCT_1:def 6;
thus L210: thesis by L209 , FUNCT_1:18;
end;
L211: ( dom ( C73 | C74 ) ) c= ( dom C73 ) by RELAT_1:60;
L212: ( dom ( C72 | C74 ) ) misses ( dom ( C73 | C74 ) ) by L211 , L204 , L206 , XBOOLE_1:64;
L213: ( ( id C74 ) .: ( dom ( C73 | C74 ) ) ) misses ( dom ( C72 | C74 ) ) by L212 , L207 , XBOOLE_1:64;
L214: ( dom ( C72 | C74 ) ) c= C74 by RELAT_1:58;
L215: ( rng ( C73 | C74 ) ) c= ( rng C73 ) by RELAT_1:70;
L216: ( dom ( C72 | C74 ) ) misses ( rng ( C73 | C74 ) ) by L215 , L205 , L206 , XBOOLE_1:64;
L217: ( C73 .: C74 ) c= ( rng C73 ) by RELAT_1:111;
L218: ( C73 .: C74 ) misses ( dom C72 ) by L217 , L205 , XBOOLE_1:64;
L219: ( ( C73 .: C74 ) /\ ( dom C72 ) ) = ( {} ) by L218 , XBOOLE_0:def 7;
L220: ( rng ( C74 -indexing C73 ) ) = ( ( C74 \ ( dom C73 ) ) \/ ( C73 .: C74 ) ) by L131;
L221: ( ( rng ( C74 -indexing C73 ) ) /\ ( dom C72 ) ) = ( ( ( C74 \ ( dom C73 ) ) /\ ( dom C72 ) ) \/ ( ( C73 .: C74 ) /\ ( dom C72 ) ) ) by L220 , XBOOLE_1:23
.= ( ( C74 \ ( dom C73 ) ) /\ ( dom C72 ) ) by L219;
L222: ( ( rng ( C74 -indexing C73 ) ) /\ ( dom C72 ) ) c= ( C74 /\ ( dom C72 ) ) by L221 , XBOOLE_1:26;
L223: ( ( rng ( C74 -indexing C73 ) ) /\ ( dom C72 ) ) c= ( dom ( C72 | C74 ) ) by L222 , RELAT_1:61;
thus L224: ( C72 * ( C74 -indexing C73 ) ) = ( ( C72 | C74 ) * ( ( id C74 ) +* ( C73 | C74 ) ) ) by L223 , L22 , RELAT_1:59
.= ( ( C72 | C74 ) * ( id C74 ) ) by L216 , L213 , L42
.= ( C72 | C74 ) by L214 , RELAT_1:51;
end;
definition
let C76 being Function;
mode rng-retract of C76
 -> Function
means :L225: (( dom it ) = ( rng C76 ) & ( C76 * it ) = ( id ( rng C76 ) ));
existence
proof
defpred S1[ set , set ] means ( C76 . $2 ) = $1;
L226: ( dom ( id ( rng C76 ) ) ) = ( rng C76 );
L227: (for B69 being set holds (B69 in ( rng C76 ) implies (ex B70 being set st (B70 in ( dom C76 ) & S1[ B69 , B70 ])))) by FUNCT_1:def 3;
consider C77 being Function such that L228: (( dom C77 ) = ( rng C76 ) & ( rng C77 ) c= ( dom C76 )) and L229: (for B71 being set holds (B71 in ( rng C76 ) implies S1[ B71 , ( C77 . B71 ) ])) from FUNCT_1:sch 5(L227);
L230:
now
let C78 being set;
assume L231: C78 in ( rng C76 );
L232: ( ( C76 * C77 ) . C78 ) = ( C76 . ( C77 . C78 ) ) by L231 , L228 , FUNCT_1:13;
L233: ( C76 . ( C77 . C78 ) ) = C78 by L229 , L231;
thus L234: ( ( C76 * C77 ) . C78 ) = ( ( id ( rng C76 ) ) . C78 ) by L233 , L231 , L232 , FUNCT_1:18;
end;
take C77;
thus L235: ( dom C77 ) = ( rng C76 ) by L228;
L236: ( dom ( C76 * C77 ) ) = ( rng C76 ) by L228 , RELAT_1:27;
thus L237: thesis by L236 , L226 , L230 , FUNCT_1:2;
end;
end;
theorem
L239: (for B72 being Function holds (for B73 being (rng-retract of B72) holds ( rng B73 ) c= ( dom B72 )))
proof
let C79 , C80 being Function;
assume that
L240: ( dom C80 ) = ( rng C79 )
and
L241: ( C79 * C80 ) = ( id ( rng C79 ) );
L242: ( dom C80 ) = ( dom ( C79 * C80 ) ) by L240 , L241 , RELAT_1:45;
thus L243: thesis by L242 , FUNCT_1:15;
end;
theorem
L244: (for B74 being Function holds (for B75 being (rng-retract of B74) holds (for B76 being set holds (B76 in ( rng B74 ) implies (( B75 . B76 ) in ( dom B74 ) & ( B74 . ( B75 . B76 ) ) = B76)))))
proof
let C81 being Function;
let C82 being (rng-retract of C81);
let C83 being set;
assume that
L245: C83 in ( rng C81 );
L246: ( rng C82 ) c= ( dom C81 ) by L239;
L247: ( dom C82 ) = ( rng C81 ) by L225;
L248: ( C82 . C83 ) in ( rng C82 ) by L247 , L245 , FUNCT_1:def 3;
thus L249: ( C82 . C83 ) in ( dom C81 ) by L248 , L246;
thus L250: ( C81 . ( C82 . C83 ) ) = ( ( C81 * C82 ) . C83 ) by L245 , L247 , FUNCT_1:13
.= ( ( id ( rng C81 ) ) . C83 ) by L225
.= C83 by L245 , FUNCT_1:18;
end;
theorem
L251: (for B77 being Function holds (B77 is  one-to-one implies ( B77 " ) is (rng-retract of B77)))
proof
let C84 being Function;
assume L252: C84 is  one-to-one;
thus L253: (( dom ( C84 " ) ) = ( rng C84 ) & ( C84 * ( C84 " ) ) = ( id ( rng C84 ) )) by L252 , FUNCT_1:32 , FUNCT_1:39;
end;
theorem
L254: (for B78 being Function holds (B78 is  one-to-one implies (for B79 being (rng-retract of B78) holds B79 = ( B78 " ))))
proof
let C85 being Function;
assume that
L255: C85 is  one-to-one;
let C86 being (rng-retract of C85);
L256: ( rng C85 ) = ( dom C86 ) by L225;
L257: ( rng C86 ) = ( dom C85 )
proof
thus L258: ( rng C86 ) c= ( dom C85 ) by L239;
let C87 being set;
assume L259: C87 in ( dom C85 );
L260: ( C85 . C87 ) in ( rng C85 ) by L259 , FUNCT_1:def 3;
L261: ( C86 . ( C85 . C87 ) ) in ( dom C85 ) by L260 , L244;
L262: ( C85 . ( C86 . ( C85 . C87 ) ) ) = ( C85 . C87 ) by L260 , L244;
L263: C87 = ( C86 . ( C85 . C87 ) ) by L262 , L255 , L259 , L261 , FUNCT_1:def 4;
thus L264: thesis by L263 , L256 , L260 , FUNCT_1:def 3;
end;
L265:
now
let C88 , C89 being set;
assume that
L266: C88 in ( dom C85 )
and
L267: C89 in ( dom C86 );
L268: ( C86 . C89 ) in ( rng C86 ) by L267 , FUNCT_1:def 3;
L269: ( C85 . ( C86 . C89 ) ) = C89 by L256 , L267 , L244;
thus L270: (( C85 . C88 ) = C89 iff ( C86 . C89 ) = C88) by L269 , L255 , L257 , L266 , L268 , FUNCT_1:def 4;
end;
thus L271: thesis by L265 , L255 , L256 , L257 , FUNCT_1:38;
end;
theorem
L272: (for B80 , B81 being Function holds (B80 tolerates B81 implies (for B82 being (rng-retract of B80) holds (for B83 being (rng-retract of B81) holds ( B82 +* B83 ) is (rng-retract of ( B80 +* B81 ))))))
proof
let C90 , C91 being Function;
assume L273: C90 tolerates C91;
L274: ( C90 +* C91 ) = ( C90 \/ C91 ) by L273 , FUNCT_4:30;
let C92 being (rng-retract of C90);
let C93 being (rng-retract of C91);
L275: ( dom C92 ) = ( rng C90 ) by L225;
L276: ( dom C93 ) = ( rng C91 ) by L225;
thus L277: ( dom ( C92 +* C93 ) ) = ( ( dom C92 ) \/ ( dom C93 ) ) by FUNCT_4:def 1
.= ( rng ( C90 +* C91 ) ) by L274 , L275 , L276 , RELAT_1:12;
L278: ( rng C93 ) c= ( dom C91 ) by L239;
L279: ( rng C92 ) c= ( dom C90 ) by L239;
thus L280: ( ( C90 +* C91 ) * ( C92 +* C93 ) ) = ( ( C90 * C92 ) +* ( C91 * C93 ) ) by L279 , L273 , L278 , FUNCT_4:69
.= ( ( id ( rng C90 ) ) +* ( C91 * C93 ) ) by L225
.= ( ( id ( rng C90 ) ) +* ( id ( rng C91 ) ) ) by L225
.= ( id ( ( rng C90 ) \/ ( rng C91 ) ) ) by FUNCT_4:22
.= ( id ( rng ( C90 +* C91 ) ) ) by L274 , RELAT_1:12;
end;
theorem
L281: (for B84 , B85 being Function holds (B84 c= B85 implies (for B86 being (rng-retract of B84) holds (ex B87 being (rng-retract of B85) st B86 c= B87))))
proof
let C94 , C95 being Function;
assume that
L282: C94 c= C95;
L283: ( C95 +* C94 ) = C95 by L282 , FUNCT_4:98;
set D5 = the (rng-retract of C95);
let C96 being (rng-retract of C94);
L284: C94 tolerates C95 by L282 , PARTFUN1:52;
reconsider D6 = ( D5 +* C96 ) as (rng-retract of C95) by L284 , L283 , L272;
take D6;
thus L285: thesis by FUNCT_4:25;
end;
begin
definition
let C97 being non  empty non  void ManySortedSign;
let C98 , C99 being Function;
pred C98 , C99 form_a_replacement_in C97
means
:L286: (for B88 , B89 being (OperSymbol of C97) holds (( ( ( id (the carrier' of C97) ) +* C99 ) . B88 ) = ( ( ( id (the carrier' of C97) ) +* C99 ) . B89 ) implies (( ( ( id (the carrier of C97) ) +* C98 ) * ( the_arity_of B88 ) ) = ( ( ( id (the carrier of C97) ) +* C98 ) * ( the_arity_of B89 ) ) & ( ( ( id (the carrier of C97) ) +* C98 ) . ( the_result_sort_of B88 ) ) = ( ( ( id (the carrier of C97) ) +* C98 ) . ( the_result_sort_of B89 ) ))))
;end;
theorem
L288: (for B90 being non  empty non  void ManySortedSign holds (for B91 , B92 being Function holds (B91 , B92 form_a_replacement_in B90 iff (for B93 , B94 being (OperSymbol of B90) holds (( ( (the carrier' of B90) -indexing B92 ) . B93 ) = ( ( (the carrier' of B90) -indexing B92 ) . B94 ) implies (( ( (the carrier of B90) -indexing B91 ) * ( the_arity_of B93 ) ) = ( ( (the carrier of B90) -indexing B91 ) * ( the_arity_of B94 ) ) & ( ( (the carrier of B90) -indexing B91 ) . ( the_result_sort_of B93 ) ) = ( ( (the carrier of B90) -indexing B91 ) . ( the_result_sort_of B94 ) )))))))
proof
let C100 being non  empty non  void ManySortedSign;
let C101 , C102 being Function;
thus L289:now
assume L290: C101 , C102 form_a_replacement_in C100;
let C103 , C104 being (OperSymbol of C100);
L291: ( rng ( the_arity_of C103 ) ) c= (the carrier of C100);
L292: ( rng ( the_arity_of C104 ) ) c= (the carrier of C100);
assume L293: ( ( (the carrier' of C100) -indexing C102 ) . C103 ) = ( ( (the carrier' of C100) -indexing C102 ) . C104 );
L294: ( ( ( id (the carrier' of C100) ) +* C102 ) . C103 ) = ( ( (the carrier' of C100) -indexing C102 ) . C104 ) by L293 , L134
.= ( ( ( id (the carrier' of C100) ) +* C102 ) . C104 ) by L134;
L295: ( ( ( id (the carrier of C100) ) +* C101 ) * ( the_arity_of C103 ) ) = ( ( ( id (the carrier of C100) ) +* C101 ) * ( the_arity_of C104 ) ) by L294 , L290 , L286;
thus L296: ( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of C103 ) ) = ( ( ( id (the carrier of C100) ) +* C101 ) * ( the_arity_of C104 ) ) by L295 , L291 , L188
.= ( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of C104 ) ) by L292 , L188;
thus L297: ( ( (the carrier of C100) -indexing C101 ) . ( the_result_sort_of C103 ) ) = ( ( ( id (the carrier of C100) ) +* C101 ) . ( the_result_sort_of C103 ) ) by L134
.= ( ( ( id (the carrier of C100) ) +* C101 ) . ( the_result_sort_of C104 ) ) by L290 , L294 , L286
.= ( ( (the carrier of C100) -indexing C101 ) . ( the_result_sort_of C104 ) ) by L134;
end;
assume L298: (for B95 , B96 being (OperSymbol of C100) holds (( ( (the carrier' of C100) -indexing C102 ) . B95 ) = ( ( (the carrier' of C100) -indexing C102 ) . B96 ) implies (( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of B95 ) ) = ( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of B96 ) ) & ( ( (the carrier of C100) -indexing C101 ) . ( the_result_sort_of B95 ) ) = ( ( (the carrier of C100) -indexing C101 ) . ( the_result_sort_of B96 ) ))));
let C105 , C106 being (OperSymbol of C100);
L299: ( rng ( the_arity_of C105 ) ) c= (the carrier of C100);
L300: ( rng ( the_arity_of C106 ) ) c= (the carrier of C100);
assume L301: ( ( ( id (the carrier' of C100) ) +* C102 ) . C105 ) = ( ( ( id (the carrier' of C100) ) +* C102 ) . C106 );
L302: ( ( (the carrier' of C100) -indexing C102 ) . C105 ) = ( ( ( id (the carrier' of C100) ) +* C102 ) . C106 ) by L301 , L134
.= ( ( (the carrier' of C100) -indexing C102 ) . C106 ) by L134;
L303: ( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of C105 ) ) = ( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of C106 ) ) by L302 , L298;
thus L304: ( ( ( id (the carrier of C100) ) +* C101 ) * ( the_arity_of C105 ) ) = ( ( (the carrier of C100) -indexing C101 ) * ( the_arity_of C106 ) ) by L303 , L299 , L188
.= ( ( ( id (the carrier of C100) ) +* C101 ) * ( the_arity_of C106 ) ) by L300 , L188;
thus L305: ( ( ( id (the carrier of C100) ) +* C101 ) . ( the_result_sort_of C105 ) ) = ( ( (the carrier of C100) -indexing C101 ) . ( the_result_sort_of C105 ) ) by L134
.= ( ( (the carrier of C100) -indexing C101 ) . ( the_result_sort_of C106 ) ) by L298 , L302
.= ( ( ( id (the carrier of C100) ) +* C101 ) . ( the_result_sort_of C106 ) ) by L134;
end;
theorem
L306: (for B97 being non  empty non  void ManySortedSign holds (for B98 , B99 being Function holds (B98 , B99 form_a_replacement_in B97 iff ( (the carrier of B97) -indexing B98 ) , ( (the carrier' of B97) -indexing B99 ) form_a_replacement_in B97)))
proof
let C107 being non  empty non  void ManySortedSign;
let C108 , C109 being Function;
L307: ( ( id (the carrier' of C107) ) +* ( id (the carrier' of C107) ) ) = ( id (the carrier' of C107) );
L308: ( ( id (the carrier' of C107) ) +* ( ( id (the carrier' of C107) ) +* ( C109 | (the carrier' of C107) ) ) ) = ( ( id (the carrier' of C107) ) +* ( C109 | (the carrier' of C107) ) ) by L307 , FUNCT_4:14;
L309: ( ( id (the carrier of C107) ) +* ( id (the carrier of C107) ) ) = ( id (the carrier of C107) );
L310: ( ( id (the carrier of C107) ) +* ( ( id (the carrier of C107) ) +* ( C108 | (the carrier of C107) ) ) ) = ( ( id (the carrier of C107) ) +* ( C108 | (the carrier of C107) ) ) by L309 , FUNCT_4:14;
L311: (C108 , C109 form_a_replacement_in C107 iff (for B100 , B101 being (OperSymbol of C107) holds (( ( (the carrier' of C107) -indexing C109 ) . B100 ) = ( ( (the carrier' of C107) -indexing C109 ) . B101 ) implies (( ( (the carrier of C107) -indexing C108 ) * ( the_arity_of B100 ) ) = ( ( (the carrier of C107) -indexing C108 ) * ( the_arity_of B101 ) ) & ( ( (the carrier of C107) -indexing C108 ) . ( the_result_sort_of B100 ) ) = ( ( (the carrier of C107) -indexing C108 ) . ( the_result_sort_of B101 ) ))))) by L288;
thus L312: thesis by L311 , L308 , L310 , L286;
end;
theorem
L313: (for R1 being non  void Signature holds (for R2 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_morphism_between R1 , R2 implies R3 , R4 form_a_replacement_in R1)))))
proof
let R1 being non  void Signature;
let R2 being non  void Signature;
let R3 being Function;
let R4 being Function;
L314: ( dom ( id (the carrier of R1) ) ) = (the carrier of R1);
L315: ( dom ( id (the carrier' of R1) ) ) = (the carrier' of R1);
assume L316: R3 , R4 form_morphism_between R1 , R2;
L317: ( dom R4 ) = (the carrier' of R1) by L316 , PUA2MSS1:def 12;
L318: ( ( id (the carrier' of R1) ) +* R4 ) = R4 by L317 , L315 , FUNCT_4:19;
let C110 , C111 being (OperSymbol of R1);
assume L319: ( ( ( id (the carrier' of R1) ) +* R4 ) . C110 ) = ( ( ( id (the carrier' of R1) ) +* R4 ) . C111 );
L320: ( dom R3 ) = (the carrier of R1) by L316 , PUA2MSS1:def 12;
L321: ( ( id (the carrier of R1) ) +* R3 ) = R3 by L320 , L314 , FUNCT_4:19;
thus L322: ( ( ( id (the carrier of R1) ) +* R3 ) * ( the_arity_of C110 ) ) = ( (the Arity of R2) . ( R4 . C110 ) ) by L321 , L316 , PUA2MSS1:def 12
.= ( ( ( id (the carrier of R1) ) +* R3 ) * ( the_arity_of C111 ) ) by L316 , L321 , L318 , L319 , PUA2MSS1:def 12;
reconsider D7 = R4 as (Function of (the carrier' of R1) , (the carrier' of R2)) by L316 , INSTALG1:9;
thus L323: ( ( ( id (the carrier of R1) ) +* R3 ) . ( the_result_sort_of C110 ) ) = ( ( R3 * (the ResultSort of R1) ) . C110 ) by L321 , FUNCT_2:15
.= ( ( (the ResultSort of R2) * R4 ) . C110 ) by L316 , PUA2MSS1:def 12
.= ( (the ResultSort of R2) . ( D7 . C110 ) ) by FUNCT_2:15
.= ( ( (the ResultSort of R2) * D7 ) . C111 ) by L318 , L319 , FUNCT_2:15
.= ( ( R3 * (the ResultSort of R1) ) . C111 ) by L316 , PUA2MSS1:def 12
.= ( ( ( id (the carrier of R1) ) +* R3 ) . ( the_result_sort_of C111 ) ) by L321 , FUNCT_2:15;
end;
theorem
L324: (for R1 being non  void Signature holds (for R3 being Function holds R3 , ( {} ) form_a_replacement_in R1))
proof
let R1 being non  void Signature;
let R3 being Function;
let C112 , C113 being (OperSymbol of R1);
assume L325: ( ( ( id (the carrier' of R1) ) +* ( {} ) ) . C112 ) = ( ( ( id (the carrier' of R1) ) +* ( {} ) ) . C113 );
L326: C112 = ( ( id (the carrier' of R1) ) . C113 ) by L325 , FUNCT_1:17
.= C113 by FUNCT_1:17;
thus L327: thesis by L326;
end;
theorem
L328: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds ((R4 is  one-to-one & ( (the carrier' of R1) /\ ( rng R4 ) ) c= ( dom R4 )) implies R3 , R4 form_a_replacement_in R1))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
assume that
L329: R4 is  one-to-one
and
L330: ( (the carrier' of R1) /\ ( rng R4 ) ) c= ( dom R4 );
let C114 , C115 being (OperSymbol of R1);
assume L331: ( ( ( id (the carrier' of R1) ) +* R4 ) . C114 ) = ( ( ( id (the carrier' of R1) ) +* R4 ) . C115 );
L332: ( ( id (the carrier' of R1) ) . C114 ) = C114 by FUNCT_1:18;
L333: ( ( id (the carrier' of R1) ) . C115 ) = C115 by FUNCT_1:18;
per cases ;
suppose L334: C114 in ( dom R4 );

L335: ( R4 . C114 ) in ( rng R4 ) by L334 , FUNCT_1:def 3;
L336: ( ( ( id (the carrier' of R1) ) +* R4 ) . C114 ) = ( R4 . C114 ) by L334 , FUNCT_4:13;
L337: ((not C115 in ( dom R4 )) implies ( R4 . C114 ) = C115) by L336 , L331 , L333 , FUNCT_4:11;
L338: ((not C115 in ( dom R4 )) implies C115 in ( (the carrier' of R1) /\ ( rng R4 ) )) by L337 , L335 , XBOOLE_0:def 4;
L339: ( ( ( id (the carrier' of R1) ) +* R4 ) . C115 ) = ( R4 . C115 ) by L338 , L330 , FUNCT_4:13;
thus L340: thesis by L339 , L329 , L330 , L331 , L334 , L336 , L338 , FUNCT_1:def 4;
end;
suppose L341: (not C114 in ( dom R4 ));

L342: (not C114 in ( (the carrier' of R1) /\ ( rng R4 ) )) by L341 , L330;
L343: ( ( ( id (the carrier' of R1) ) +* R4 ) . C114 ) = C114 by L332 , L341 , FUNCT_4:11;
L344: (C115 in ( dom R4 ) implies (C114 = ( R4 . C115 ) & ( R4 . C115 ) in ( rng R4 ))) by L343 , L331 , FUNCT_1:def 3 , FUNCT_4:13;
thus L345: thesis by L344 , L331 , L333 , L343 , L342 , FUNCT_4:11 , XBOOLE_0:def 4;
end;
end;
theorem
L347: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds ((R4 is  one-to-one & ( rng R4 ) misses (the carrier' of R1)) implies R3 , R4 form_a_replacement_in R1))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
assume L348: R4 is  one-to-one;
assume L349: ( rng R4 ) misses (the carrier' of R1);
L350: ( (the carrier' of R1) /\ ( rng R4 ) ) = ( {} ) by L349 , XBOOLE_0:def 7;
L351: ( (the carrier' of R1) /\ ( rng R4 ) ) c= ( dom R4 ) by L350 , XBOOLE_1:2;
thus L352: thesis by L351 , L348 , L328;
end;
registration
let C116 being set;
let C117 being non  empty set;
let C118 being (Function of C117 , ( C116 * ));
let C119 being (Function of C117 , C116);
cluster ManySortedSign (# C116 , C117 , C118 , C119 #) -> non  void;
coherence;
end;
definition
let C120 being non  empty non  void ManySortedSign;
let C121 , C122 being Function;
assume that
L354: C121 , C122 form_a_replacement_in C120;
func C120 with-replacement (C121 , C122) ->  strict non  empty non  void ManySortedSign means 
:L355: (( (the carrier of C120) -indexing C121 ) , ( (the carrier' of C120) -indexing C122 ) form_morphism_between C120 , it & (the carrier of it) = ( rng ( (the carrier of C120) -indexing C121 ) ) & (the carrier' of it) = ( rng ( (the carrier' of C120) -indexing C122 ) ));
uniqueness
proof
set D8 = ( (the carrier' of C120) -indexing C122 );
set D9 = D8;
set D10 = ( (the carrier of C120) -indexing C121 );
set D11 = D10;
let C123 , C124 being  strict non  empty non  void ManySortedSign;
assume that
L356: D10 , D8 form_morphism_between C120 , C123
and
L357: (the carrier of C123) = ( rng D10 )
and
L358: (the carrier' of C123) = ( rng D8 )
and
L359: D11 , D9 form_morphism_between C120 , C124
and
L360: (the carrier of C124) = ( rng D11 )
and
L361: (the carrier' of C124) = ( rng D9 );
L362: (the ResultSort of C123) = (the ResultSort of C124)
proof
thus L363: (the carrier' of C123) = (the carrier' of C124) by L358 , L361;
let C125 being (OperSymbol of C123);
consider C126 being set such that L364: C126 in ( dom D8 ) and L365: C125 = ( D8 . C126 ) by L358 , FUNCT_1:def 3;
consider C127 being set such that L366: C127 in ( dom D9 ) and L367: C125 = ( D9 . C127 ) by L358 , FUNCT_1:def 3;
reconsider D12 = C126 , D13 = C127 as (OperSymbol of C120) by L364 , L366;
thus L368: ( (the ResultSort of C123) . C125 ) = ( ( (the ResultSort of C123) * D8 ) . D12 ) by L364 , L365 , FUNCT_1:13
.= ( ( D10 * (the ResultSort of C120) ) . D12 ) by L356 , PUA2MSS1:def 12
.= ( D10 . ( the_result_sort_of D12 ) ) by FUNCT_2:15
.= ( D11 . ( the_result_sort_of D13 ) ) by L354 , L365 , L367 , L288
.= ( ( D11 * (the ResultSort of C120) ) . D13 ) by FUNCT_2:15
.= ( ( (the ResultSort of C124) * D9 ) . D13 ) by L359 , PUA2MSS1:def 12
.= ( (the ResultSort of C124) . C125 ) by L366 , L367 , FUNCT_1:13;
end;
L369: (the Arity of C123) = (the Arity of C124)
proof
thus L370: (the carrier' of C123) = (the carrier' of C124) by L358 , L361;
let C128 being (OperSymbol of C123);
consider C129 being set such that L371: C129 in ( dom D9 ) and L372: C128 = ( D9 . C129 ) by L358 , FUNCT_1:def 3;
reconsider D14 = C129 as (OperSymbol of C120) by L371;
thus L373: ( (the Arity of C123) . C128 ) = ( D11 * ( the_arity_of D14 ) ) by L356 , L372 , PUA2MSS1:def 12
.= ( (the Arity of C124) . C128 ) by L359 , L372 , PUA2MSS1:def 12;
end;
thus L374: thesis by L369 , L357 , L358 , L360 , L361 , L362;
end;
existence
proof
set D15 = ( (the carrier' of C120) -indexing C122 );
set D16 = D15;
set D17 = ( (the carrier of C120) -indexing C121 );
set D18 = D17;
L375: ( dom D15 ) = (the carrier' of C120) by PARTFUN1:def 2;
reconsider D19 = ( rng D17 ) , D20 = ( rng D15 ) as non  empty set;
reconsider D21 = D15 as (Function of (the carrier' of C120) , D20) by L375 , FUNCT_2:1;
set D22 = the (rng-retract of D21);
L376: ( rng D22 ) c= (the carrier' of C120) by L375 , L239;
L377: ( dom D22 ) = ( rng D21 ) by L225;
reconsider D23 = D22 as (Function of D20 , (the carrier' of C120)) by L377 , L376 , FUNCT_2:def 1 , RELSET_1:4;
L378: ( dom D17 ) = (the carrier of C120) by PARTFUN1:def 2;
reconsider D24 = D17 as (Function of (the carrier of C120) , D19) by L378 , FUNCT_2:1;
set D25 = ( ( D24 * (the ResultSort of C120) ) * D23 );
take D26 = ManySortedSign (# D19 , D20 , ( ( ( D24 * ) * (the Arity of C120) ) * D23 ) , D25 #);
thus L379: D18 , D16 form_morphism_between C120 , D26
proof
thus L380: (( dom D18 ) = (the carrier of C120) & ( dom D16 ) = (the carrier' of C120)) by PARTFUN1:def 2;
thus L381: (( rng D18 ) c= (the carrier of D26) & ( rng D16 ) c= (the carrier' of D26));
L382:
now
let C130 being (OperSymbol of C120);
L383: ( D21 . ( D23 . ( D21 . C130 ) ) ) = ( D21 . C130 ) by L244;
thus L384: ( ( D25 * D21 ) . C130 ) = ( (the ResultSort of D26) . ( D21 . C130 ) ) by FUNCT_2:15
.= ( ( D24 * (the ResultSort of C120) ) . ( D23 . ( D21 . C130 ) ) ) by FUNCT_2:15
.= ( D24 . ( the_result_sort_of ( D23 . ( D21 . C130 ) ) ) ) by FUNCT_2:15
.= ( D24 . ( the_result_sort_of C130 ) ) by L354 , L383 , L288
.= ( ( D24 * (the ResultSort of C120) ) . C130 ) by FUNCT_2:15;
end;
thus L385: ( D18 * (the ResultSort of C120) ) = ( (the ResultSort of D26) * D16 ) by L382 , FUNCT_2:63;
let C131 being set;
let C132 being Function;
assume that
L386: C131 in (the carrier' of C120)
and
L387: C132 = ( (the Arity of C120) . C131 );
reconsider D27 = C131 as (OperSymbol of C120) by L386;
L388: ( D21 . ( D23 . ( D21 . D27 ) ) ) = ( D21 . D27 ) by L244;
L389: ( D24 * ( the_arity_of D27 ) ) = ( D24 * ( the_arity_of ( D23 . ( D21 . D27 ) ) ) ) by L388 , L354 , L288;
thus L390: ( D18 * C132 ) = ( ( D24 * ) . ( the_arity_of ( D23 . ( D21 . D27 ) ) ) ) by L389 , L387 , LANG1:def 13
.= ( ( ( D24 * ) * (the Arity of C120) ) . ( D23 . ( D21 . D27 ) ) ) by FUNCT_2:15
.= ( (the Arity of D26) . ( D16 . C131 ) ) by FUNCT_2:15;
end;

thus L391: thesis;
end;
end;
theorem
L393: (for B102 , B103 being non  void Signature holds (for B104 being (Function of (the carrier of B102) , (the carrier of B103)) holds (for B105 being Function holds (B104 , B105 form_morphism_between B102 , B103 implies ( ( B104 * ) * (the Arity of B102) ) = ( (the Arity of B103) * B105 )))))
proof
let C133 , C134 being non  void Signature;
let C135 being (Function of (the carrier of C133) , (the carrier of C134));
let C136 being Function;
L394: ( dom (the Arity of C134) ) = (the carrier' of C134) by FUNCT_2:def 1;
L395: ( dom ( ( C135 * ) * (the Arity of C133) ) ) = (the carrier' of C133) by FUNCT_2:def 1;
assume L396: C135 , C136 form_morphism_between C133 , C134;
L397: ( dom C136 ) = (the carrier' of C133) by L396 , PUA2MSS1:def 12;
L398: ( dom (the Arity of C133) ) = (the carrier' of C133) by FUNCT_2:def 1;
L399:
now
let C137 being set;
assume L400: C137 in (the carrier' of C133);
L401: ( (the Arity of C133) . C137 ) in ( rng (the Arity of C133) ) by L400 , L398 , FUNCT_1:def 3;
reconsider D28 = ( (the Arity of C133) . C137 ) as (FinSequence of (the carrier of C133)) by L401 , FINSEQ_1:def 11;
thus L402: ( ( ( C135 * ) * (the Arity of C133) ) . C137 ) = ( ( C135 * ) . D28 ) by L398 , L400 , FUNCT_1:13
.= ( C135 * D28 ) by L401 , LANG1:def 13
.= ( (the Arity of C134) . ( C136 . C137 ) ) by L396 , L400 , PUA2MSS1:def 12
.= ( ( (the Arity of C134) * C136 ) . C137 ) by L397 , L400 , FUNCT_1:13;
end;
L403: ( rng C136 ) c= (the carrier' of C134) by L396 , PUA2MSS1:def 12;
L404: ( dom ( (the Arity of C134) * C136 ) ) = (the carrier' of C133) by L403 , L397 , L394 , RELAT_1:27;
thus L405: thesis by L404 , L395 , L399 , FUNCT_1:2;
end;
theorem
L406: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_a_replacement_in R1 implies ( (the carrier of R1) -indexing R3 ) is (Function of (the carrier of R1) , (the carrier of ( R1 with-replacement (R3 , R4) )))))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
assume L407: R3 , R4 form_a_replacement_in R1;
L408: ( (the carrier of R1) -indexing R3 ) , ( (the carrier' of R1) -indexing R4 ) form_morphism_between R1 , ( R1 with-replacement (R3 , R4) ) by L407 , L355;
thus L409: thesis by L408 , INSTALG1:9;
end;
theorem
L410: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_a_replacement_in R1 implies (for B106 being (Function of (the carrier of R1) , (the carrier of ( R1 with-replacement (R3 , R4) ))) holds (B106 = ( (the carrier of R1) -indexing R3 ) implies (for B107 being (rng-retract of ( (the carrier' of R1) -indexing R4 )) holds (the Arity of ( R1 with-replacement (R3 , R4) )) = ( ( ( B106 * ) * (the Arity of R1) ) * B107 ))))))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
set D29 = ( (the carrier of R1) -indexing R3 );
set D30 = ( (the carrier' of R1) -indexing R4 );
set D31 = ( R1 with-replacement (R3 , R4) );
assume L411: R3 , R4 form_a_replacement_in R1;
L412: D29 , D30 form_morphism_between R1 , D31 by L411 , L355;
let C138 being (Function of (the carrier of R1) , (the carrier of ( R1 with-replacement (R3 , R4) )));
assume that
L413: C138 = ( (the carrier of R1) -indexing R3 );
let C139 being (rng-retract of D30);
L414: (the carrier' of D31) = ( rng D30 ) by L411 , L355;
thus L415: (the Arity of D31) = ( (the Arity of D31) * ( id ( rng D30 ) ) ) by L414 , FUNCT_2:17
.= ( (the Arity of D31) * ( D30 * C139 ) ) by L225
.= ( ( (the Arity of D31) * D30 ) * C139 ) by RELAT_1:36
.= ( ( ( C138 * ) * (the Arity of R1) ) * C139 ) by L412 , L413 , L393;
end;
theorem
L416: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_a_replacement_in R1 implies (for B108 being (rng-retract of ( (the carrier' of R1) -indexing R4 )) holds (the ResultSort of ( R1 with-replacement (R3 , R4) )) = ( ( ( (the carrier of R1) -indexing R3 ) * (the ResultSort of R1) ) * B108 ))))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
set D32 = ( (the carrier of R1) -indexing R3 );
set D33 = ( (the carrier' of R1) -indexing R4 );
set D34 = ( R1 with-replacement (R3 , R4) );
assume L417: R3 , R4 form_a_replacement_in R1;
L418: D32 , D33 form_morphism_between R1 , D34 by L417 , L355;
let C140 being (rng-retract of D33);
L419: (the carrier' of D34) = ( rng D33 ) by L417 , L355;
thus L420: (the ResultSort of D34) = ( (the ResultSort of D34) * ( id ( rng D33 ) ) ) by L419 , FUNCT_2:17
.= ( (the ResultSort of D34) * ( D33 * C140 ) ) by L225
.= ( ( (the ResultSort of D34) * D33 ) * C140 ) by RELAT_1:36
.= ( ( D32 * (the ResultSort of R1) ) * C140 ) by L418 , PUA2MSS1:def 12;
end;
theorem
L421: (for R1 being non  void Signature holds (for R2 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_morphism_between R1 , R2 implies ( R1 with-replacement (R3 , R4) ) is (Subsignature of R2))))))
proof
let R1 being non  void Signature;
let R2 being non  void Signature;
let R3 being Function;
let R4 being Function;
set D35 = ( R1 with-replacement (R3 , R4) );
set D36 = ( id (the carrier of D35) );
set D37 = ( id (the carrier' of D35) );
set D38 = ( (the carrier of R1) -indexing R3 );
set D39 = ( (the carrier' of R1) -indexing R4 );
L422: ( dom (the ResultSort of R2) ) = (the carrier' of R2) by FUNCT_2:def 1;
L423: ( dom (the ResultSort of D35) ) = (the carrier' of D35) by FUNCT_2:def 1;
assume L424: R3 , R4 form_morphism_between R1 , R2;
L425: ( dom R3 ) = (the carrier of R1) by L424 , PUA2MSS1:def 12;
L426: D38 = R3 by L425 , L142;
L427: R3 , R4 form_a_replacement_in R1 by L424 , L313;
L428: (the carrier' of D35) = ( rng D39 ) by L427 , L355;
thus L429: (( dom D36 ) = (the carrier of D35) & ( dom D37 ) = (the carrier' of D35));
L430: ( dom R4 ) = (the carrier' of R1) by L424 , PUA2MSS1:def 12;
L431: D39 = R4 by L430 , L142;
L432: D38 , D39 form_morphism_between R1 , D35 by L427 , L355;
L433:
now
let C141 being set;
assume L434: C141 in (the carrier' of D35);
consider C142 being set such that L435: C142 in ( dom R4 ) and L436: C141 = ( R4 . C142 ) by L434 , L428 , L431 , FUNCT_1:def 3;
reconsider D40 = C142 as (OperSymbol of R1) by L424 , L435 , PUA2MSS1:def 12;
L437: ( (the ResultSort of D35) * R4 ) = ( R3 * (the ResultSort of R1) ) by L432 , L426 , L431 , PUA2MSS1:def 12;
L438: ( (the ResultSort of D35) . C141 ) = ( ( R3 * (the ResultSort of R1) ) . D40 ) by L437 , L435 , L436 , FUNCT_1:13;
L439: ( (the ResultSort of R2) * R4 ) = ( R3 * (the ResultSort of R1) ) by L424 , PUA2MSS1:def 12;
L440: ( (the ResultSort of R2) . C141 ) = ( ( R3 * (the ResultSort of R1) ) . D40 ) by L439 , L435 , L436 , FUNCT_1:13;
thus L441: ( (the ResultSort of D35) . C141 ) = ( ( (the ResultSort of R2) | (the carrier' of D35) ) . C141 ) by L440 , L434 , L438 , FUNCT_1:49;
end;
L442: ( rng R4 ) c= (the carrier' of R2) by L424 , PUA2MSS1:def 12;
L443: ( dom ( (the ResultSort of R2) | (the carrier' of D35) ) ) = (the carrier' of D35) by L442 , L428 , L431 , L422 , RELAT_1:62;
L444: (the ResultSort of D35) = ( (the ResultSort of R2) | (the carrier' of D35) ) by L443 , L423 , L433 , FUNCT_1:2;
L445: (the carrier of D35) = ( rng D38 ) by L427 , L355;
thus L446: (( rng D36 ) c= (the carrier of R2) & ( rng D37 ) c= (the carrier' of R2)) by L445 , L424 , L428 , L426 , L431 , PUA2MSS1:def 12;
L447: ( rng (the ResultSort of D35) ) c= (the carrier of D35);
thus L448: ( D36 * (the ResultSort of D35) ) = (the ResultSort of D35) by L447 , RELAT_1:53
.= ( (the ResultSort of R2) * D37 ) by L444 , RELAT_1:65;
let C143 being set;
let C144 being Function;
assume that
L449: C143 in (the carrier' of D35)
and
L450: C144 = ( (the Arity of D35) . C143 );
consider C145 being set such that L451: C145 in ( dom R4 ) and L452: C143 = ( R4 . C145 ) by L428 , L431 , L449 , FUNCT_1:def 3;
reconsider D41 = C145 as (OperSymbol of R1) by L424 , L451 , PUA2MSS1:def 12;
L453: ( R3 * ( the_arity_of D41 ) ) = ( (the Arity of R2) . C143 ) by L424 , L452 , PUA2MSS1:def 12;
L454: C144 in ( (the carrier of D35) * ) by L449 , L450 , FUNCT_2:5;
L455: C144 is (FinSequence of (the carrier of D35)) by L454 , FINSEQ_1:def 11;
L456: ( rng C144 ) c= (the carrier of D35) by L455 , FINSEQ_1:def 4;
L457: ( R3 * ( the_arity_of D41 ) ) = C144 by L432 , L426 , L431 , L450 , L452 , PUA2MSS1:def 12;
thus L458: ( D36 * C144 ) = ( (the Arity of R2) . C143 ) by L457 , L456 , L453 , RELAT_1:53
.= ( (the Arity of R2) . ( D37 . C143 ) ) by L449 , FUNCT_1:18;
end;
theorem
L459: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_a_replacement_in R1 iff ( (the carrier of R1) -indexing R3 ) , ( (the carrier' of R1) -indexing R4 ) form_morphism_between R1 , ( R1 with-replacement (R3 , R4) )))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
set D42 = ( (the carrier of R1) -indexing R3 );
set D43 = ( (the carrier' of R1) -indexing R4 );
set D44 = ( R1 with-replacement (R3 , R4) );
thus L460: (R3 , R4 form_a_replacement_in R1 implies D42 , D43 form_morphism_between R1 , D44) by L355;
assume L461: D42 , D43 form_morphism_between R1 , D44;
L462: D42 , D43 form_a_replacement_in R1 by L461 , L313;
thus L463: thesis by L462 , L306;
end;
theorem
L464: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds ((( dom R3 ) c= (the carrier of R1) & ( dom R4 ) c= (the carrier' of R1) & R3 , R4 form_a_replacement_in R1) implies ( ( id (the carrier of R1) ) +* R3 ) , ( ( id (the carrier' of R1) ) +* R4 ) form_morphism_between R1 , ( R1 with-replacement (R3 , R4) )))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
assume that
L465: ( dom R3 ) c= (the carrier of R1)
and
L466: ( dom R4 ) c= (the carrier' of R1);
L467: ( (the carrier' of R1) -indexing R4 ) = ( ( id (the carrier' of R1) ) +* R4 ) by L466 , RELAT_1:68;
L468: ( (the carrier of R1) -indexing R3 ) = ( ( id (the carrier of R1) ) +* R3 ) by L465 , RELAT_1:68;
thus L469: thesis by L468 , L467 , L459;
end;
theorem
L470: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds ((( dom R3 ) = (the carrier of R1) & ( dom R4 ) = (the carrier' of R1) & R3 , R4 form_a_replacement_in R1) implies R3 , R4 form_morphism_between R1 , ( R1 with-replacement (R3 , R4) )))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
assume that
L471: ( dom R3 ) = (the carrier of R1)
and
L472: ( dom R4 ) = (the carrier' of R1);
L473: ( dom R4 ) = ( dom ( id (the carrier' of R1) ) ) by L472;
L474: ( ( id (the carrier' of R1) ) +* R4 ) = R4 by L473 , FUNCT_4:19;
L475: ( dom R3 ) = ( dom ( id (the carrier of R1) ) ) by L471;
L476: ( ( id (the carrier of R1) ) +* R3 ) = R3 by L475 , FUNCT_4:19;
thus L477: thesis by L476 , L471 , L472 , L474 , L464;
end;
theorem
L478: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_a_replacement_in R1 implies ( R1 with-replacement (( (the carrier of R1) -indexing R3 ) , R4) ) = ( R1 with-replacement (R3 , R4) )))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
set D45 = (the carrier of R1);
set D46 = (the carrier' of R1);
set D47 = ( R1 with-replacement (( D45 -indexing R3 ) , R4) );
L479: ( D45 -indexing ( D45 -indexing R3 ) ) = ( D45 -indexing R3 ) by L147;
assume L480: R3 , R4 form_a_replacement_in R1;
L481: ( D45 -indexing R3 ) , ( D46 -indexing R4 ) form_a_replacement_in R1 by L480 , L306;
L482: ( D45 -indexing R3 ) , R4 form_a_replacement_in R1 by L481 , L479 , L306;
L483: (the carrier of D47) = ( rng ( D45 -indexing R3 ) ) by L482 , L479 , L355;
L484: (the carrier' of D47) = ( rng ( D46 -indexing R4 ) ) by L482 , L355;
L485: ( D45 -indexing R3 ) , ( D46 -indexing R4 ) form_morphism_between R1 , D47 by L479 , L482 , L355;
thus L486: thesis by L485 , L480 , L483 , L484 , L355;
end;
theorem
L487: (for R1 being non  void Signature holds (for R3 being Function holds (for R4 being Function holds (R3 , R4 form_a_replacement_in R1 implies ( R1 with-replacement (R3 , ( (the carrier' of R1) -indexing R4 )) ) = ( R1 with-replacement (R3 , R4) )))))
proof
let R1 being non  void Signature;
let R3 being Function;
let R4 being Function;
set D48 = (the carrier of R1);
set D49 = (the carrier' of R1);
set D50 = ( R1 with-replacement (R3 , ( D49 -indexing R4 )) );
L488: ( D49 -indexing ( D49 -indexing R4 ) ) = ( D49 -indexing R4 ) by L147;
assume L489: R3 , R4 form_a_replacement_in R1;
L490: ( D48 -indexing R3 ) , ( D49 -indexing R4 ) form_a_replacement_in R1 by L489 , L306;
L491: R3 , ( D49 -indexing R4 ) form_a_replacement_in R1 by L490 , L488 , L306;
L492: (the carrier' of D50) = ( rng ( D49 -indexing R4 ) ) by L491 , L488 , L355;
L493: (the carrier of D50) = ( rng ( D48 -indexing R3 ) ) by L491 , L355;
L494: ( D48 -indexing R3 ) , ( D49 -indexing R4 ) form_morphism_between R1 , D50 by L488 , L491 , L355;
thus L495: thesis by L494 , L489 , L493 , L492 , L355;
end;
begin
definition
let C146 being Signature;
mode Extension of C146
 -> Signature
means :L496: C146 is (Subsignature of it);
existence
proof
take C146;
thus L497: thesis by INSTALG1:15;
end;
end;
theorem
L499: (for B109 being Signature holds B109 is (Extension of B109))
proof
let C147 being Signature;
thus L500: C147 is (Subsignature of C147) by INSTALG1:15;
end;
theorem
L501: (for B110 being Signature holds (for B111 being (Extension of B110) holds (for B112 being (Extension of B111) holds B112 is (Extension of B110))))
proof
let C148 being Signature;
let C149 being (Extension of C148);
let C150 being (Extension of C149);
L502: C149 is (Subsignature of C150) by L496;
L503: C148 is (Subsignature of C149) by L496;
L504: C148 is (Subsignature of C150) by L503 , L502 , INSTALG1:16;
thus L505: thesis by L504 , L496;
end;
theorem
L506: (for B113 , B114 being non  empty Signature holds (B113 tolerates B114 implies ( B113 +* B114 ) is (Extension of B113)))
proof
let C151 , C152 being non  empty Signature;
assume that
L507: (the Arity of C151) tolerates (the Arity of C152)
and
L508: (the ResultSort of C151) tolerates (the ResultSort of C152);
set D51 = ( C151 +* C152 );
L509: (the ResultSort of D51) = ( (the ResultSort of C151) +* (the ResultSort of C152) ) by CIRCCOMB:def 2;
L510: (the ResultSort of C151) c= (the ResultSort of D51) by L509 , L508 , FUNCT_4:28;
set D52 = ( id (the carrier of C151) );
set D53 = ( id (the carrier' of C151) );
thus L511: (( dom D52 ) = (the carrier of C151) & ( dom D53 ) = (the carrier' of C151));
L512: ( dom (the ResultSort of C151) ) = (the carrier' of C151) by FUNCT_2:def 1;
L513: (the ResultSort of C151) = ( (the ResultSort of D51) | (the carrier' of C151) ) by L512 , L510 , GRFUNC_1:23;
L514: (the ResultSort of C151) = ( (the ResultSort of D51) * D53 ) by L513 , RELAT_1:65;
L515: (the carrier' of D51) = ( (the carrier' of C151) \/ (the carrier' of C152) ) by CIRCCOMB:def 2;
L516: (the carrier of D51) = ( (the carrier of C151) \/ (the carrier of C152) ) by CIRCCOMB:def 2;
thus L517: (( rng D52 ) c= (the carrier of D51) & ( rng D53 ) c= (the carrier' of D51)) by L516 , L515 , XBOOLE_1:7;
L518: ( rng (the ResultSort of C151) ) c= (the carrier of C151);
thus L519: ( D52 * (the ResultSort of C151) ) = ( (the ResultSort of D51) * D53 ) by L518 , L514 , RELAT_1:53;
let C153 being set;
let C154 being Function;
assume that
L520: C153 in (the carrier' of C151)
and
L521: C154 = ( (the Arity of C151) . C153 );
L522: ( dom (the Arity of C151) ) = (the carrier' of C151) by FUNCT_2:def 1;
L523: C154 in ( rng (the Arity of C151) ) by L522 , L520 , L521 , FUNCT_1:def 3;
L524: C154 is (FinSequence of (the carrier of C151)) by L523 , FINSEQ_1:def 11;
L525: ( rng C154 ) c= (the carrier of C151) by L524 , FINSEQ_1:def 4;
thus L526: ( D52 * C154 ) = C154 by L525 , RELAT_1:53
.= ( ( (the Arity of C151) +* (the Arity of C152) ) . C153 ) by L507 , L520 , L521 , L522 , FUNCT_4:15
.= ( (the Arity of D51) . C153 ) by CIRCCOMB:def 2
.= ( (the Arity of D51) . ( D53 . C153 ) ) by L520 , FUNCT_1:18;
end;
theorem
L527: (for B115 , B116 being non  empty Signature holds ( B115 +* B116 ) is (Extension of B116))
proof
let C155 , C156 being non  empty Signature;
set D54 = ( C155 +* C156 );
set D55 = ( id (the carrier of C156) );
set D56 = ( id (the carrier' of C156) );
thus L528: (( dom D55 ) = (the carrier of C156) & ( dom D56 ) = (the carrier' of C156));
L529: (the carrier of D54) = ( (the carrier of C155) \/ (the carrier of C156) ) by CIRCCOMB:def 2;
L530: (the carrier' of D54) = ( (the carrier' of C155) \/ (the carrier' of C156) ) by CIRCCOMB:def 2;
thus L531: (( rng D55 ) c= (the carrier of D54) & ( rng D56 ) c= (the carrier' of D54)) by L529 , L530 , XBOOLE_1:7;
L532: (the ResultSort of D54) = ( (the ResultSort of C155) +* (the ResultSort of C156) ) by CIRCCOMB:def 2;
L533: ( dom (the ResultSort of C156) ) = (the carrier' of C156) by FUNCT_2:def 1;
L534: (the ResultSort of C156) = ( (the ResultSort of D54) | (the carrier' of C156) ) by L533 , L532 , FUNCT_4:25 , GRFUNC_1:23;
L535: (the ResultSort of C156) = ( (the ResultSort of D54) * D56 ) by L534 , RELAT_1:65;
L536: ( rng (the ResultSort of C156) ) c= (the carrier of C156);
thus L537: ( D55 * (the ResultSort of C156) ) = ( (the ResultSort of D54) * D56 ) by L536 , L535 , RELAT_1:53;
let C157 being set;
let C158 being Function;
assume that
L538: C157 in (the carrier' of C156)
and
L539: C158 = ( (the Arity of C156) . C157 );
L540: ( dom (the Arity of C156) ) = (the carrier' of C156) by FUNCT_2:def 1;
L541: C158 in ( rng (the Arity of C156) ) by L540 , L538 , L539 , FUNCT_1:def 3;
L542: C158 is (FinSequence of (the carrier of C156)) by L541 , FINSEQ_1:def 11;
L543: ( rng C158 ) c= (the carrier of C156) by L542 , FINSEQ_1:def 4;
thus L544: ( D55 * C158 ) = C158 by L543 , RELAT_1:53
.= ( ( (the Arity of C155) +* (the Arity of C156) ) . C157 ) by L538 , L539 , L540 , FUNCT_4:13
.= ( (the Arity of D54) . C157 ) by CIRCCOMB:def 2
.= ( (the Arity of D54) . ( D56 . C157 ) ) by L538 , FUNCT_1:18;
end;
theorem
L545: (for B117 , B118 , B119 being non  empty ManySortedSign holds (for B120 , B121 , B122 , B123 being Function holds ((B120 tolerates B122 & B120 , B121 form_morphism_between B117 , B119 & B122 , B123 form_morphism_between B118 , B119) implies ( B120 +* B122 ) , ( B121 +* B123 ) form_morphism_between ( B117 +* B118 ) , B119)))
proof
let C159 , C160 , C161 being non  empty ManySortedSign;
let C162 , C163 , C164 , C165 being Function;
assume that
L546: C162 tolerates C164
and
L547: ( dom C162 ) = (the carrier of C159)
and
L548: ( dom C163 ) = (the carrier' of C159)
and
L549: ( rng C162 ) c= (the carrier of C161)
and
L550: ( rng C163 ) c= (the carrier' of C161)
and
L551: ( C162 * (the ResultSort of C159) ) = ( (the ResultSort of C161) * C163 )
and
L552: (for B124 being set holds (for B125 being Function holds ((B124 in (the carrier' of C159) & B125 = ( (the Arity of C159) . B124 )) implies ( C162 * B125 ) = ( (the Arity of C161) . ( C163 . B124 ) ))))
and
L553: ( dom C164 ) = (the carrier of C160)
and
L554: ( dom C165 ) = (the carrier' of C160)
and
L555: ( rng C164 ) c= (the carrier of C161)
and
L556: ( rng C165 ) c= (the carrier' of C161)
and
L557: ( C164 * (the ResultSort of C160) ) = ( (the ResultSort of C161) * C165 )
and
L558: (for B126 being set holds (for B127 being Function holds ((B126 in (the carrier' of C160) & B127 = ( (the Arity of C160) . B126 )) implies ( C164 * B127 ) = ( (the Arity of C161) . ( C165 . B126 ) ))));
set D57 = ( C162 +* C164 );
set D58 = ( C163 +* C165 );
set D59 = ( C159 +* C160 );
L559: (the carrier of D59) = ( (the carrier of C159) \/ (the carrier of C160) ) by CIRCCOMB:def 2;
thus L560: ( dom D57 ) = (the carrier of D59) by L559 , L547 , L553 , FUNCT_4:def 1;
L561: (the carrier' of D59) = ( (the carrier' of C159) \/ (the carrier' of C160) ) by CIRCCOMB:def 2;
thus L562: ( dom D58 ) = (the carrier' of D59) by L561 , L548 , L554 , FUNCT_4:def 1;
L563: ( rng D57 ) c= ( ( rng C162 ) \/ ( rng C164 ) ) by FUNCT_4:17;
L564: ( ( rng C162 ) \/ ( rng C164 ) ) c= (the carrier of C161) by L549 , L555 , XBOOLE_1:8;
thus L565: ( rng D57 ) c= (the carrier of C161) by L564 , L563 , XBOOLE_1:1;
L566: ( rng D58 ) c= ( ( rng C163 ) \/ ( rng C165 ) ) by FUNCT_4:17;
L567: ( ( rng C163 ) \/ ( rng C165 ) ) c= (the carrier' of C161) by L550 , L556 , XBOOLE_1:8;
thus L568: ( rng D58 ) c= (the carrier' of C161) by L567 , L566 , XBOOLE_1:1;
L569: ( rng (the ResultSort of C159) ) c= (the carrier of C159);
L570: ( rng (the ResultSort of C160) ) c= (the carrier of C160);
L571: ( dom (the ResultSort of C161) ) = (the carrier' of C161) by FUNCT_2:def 1;
L572: ( (the ResultSort of C159) +* (the ResultSort of C160) ) = (the ResultSort of ( C159 +* C160 )) by CIRCCOMB:def 2;
thus L573: ( D57 * (the ResultSort of D59) ) = ( ( C162 * (the ResultSort of C159) ) +* ( C164 * (the ResultSort of C160) ) ) by L572 , L546 , L547 , L553 , L569 , L570 , FUNCT_4:69
.= ( (the ResultSort of C161) * D58 ) by L551 , L556 , L557 , L571 , FUNCT_7:9;
let C166 being set;
let C167 being Function;
assume that
L574: C166 in (the carrier' of D59)
and
L575: C167 = ( (the Arity of D59) . C166 );
L576: ( (the Arity of C159) +* (the Arity of C160) ) = (the Arity of ( C159 +* C160 )) by CIRCCOMB:def 2;
L577: ( dom (the Arity of C159) ) = (the carrier' of C159) by FUNCT_2:def 1;
L578: ( dom (the Arity of C160) ) = (the carrier' of C160) by FUNCT_2:def 1;
per cases ;
suppose L579: C166 in (the carrier' of C160);

L580: C167 = ( (the Arity of C160) . C166 ) by L579 , L575 , L576 , L578 , FUNCT_4:13;
L581: C167 in ( rng (the Arity of C160) ) by L580 , L578 , L579 , FUNCT_1:def 3;
L582: C167 is (FinSequence of (the carrier of C160)) by L581 , FINSEQ_1:def 11;
L583: ( rng C167 ) c= ( dom C164 ) by L582 , L553 , FINSEQ_1:def 4;
L584: ( dom ( C164 * C167 ) ) = ( dom C167 ) by L583 , RELAT_1:27;
L585: ( dom ( C162 * C167 ) ) c= ( dom C167 ) by RELAT_1:25;
thus L586: ( D57 * C167 ) = ( ( C162 * C167 ) +* ( C164 * C167 ) ) by FUNCT_7:10
.= ( C164 * C167 ) by L585 , L584 , FUNCT_4:19
.= ( (the Arity of C161) . ( C165 . C166 ) ) by L558 , L579 , L580
.= ( (the Arity of C161) . ( D58 . C166 ) ) by L554 , L579 , FUNCT_4:13;
end;
suppose L587: (not C166 in (the carrier' of C160));

L588: ( dom ( C164 * C167 ) ) c= ( dom C167 ) by RELAT_1:25;
L589: C166 in (the carrier' of C159) by L561 , L574 , L587 , XBOOLE_0:def 3;
L590: C167 = ( (the Arity of C159) . C166 ) by L575 , L576 , L578 , L587 , FUNCT_4:11;
L591: C167 in ( rng (the Arity of C159) ) by L590 , L577 , L589 , FUNCT_1:def 3;
L592: C167 is (FinSequence of (the carrier of C159)) by L591 , FINSEQ_1:def 11;
L593: ( rng C167 ) c= ( dom C162 ) by L592 , L547 , FINSEQ_1:def 4;
L594: ( dom ( C162 * C167 ) ) = ( dom C167 ) by L593 , RELAT_1:27;
thus L595: ( D57 * C167 ) = ( ( C164 +* C162 ) * C167 ) by L546 , FUNCT_4:34
.= ( ( C164 * C167 ) +* ( C162 * C167 ) ) by FUNCT_7:10
.= ( C162 * C167 ) by L594 , L588 , FUNCT_4:19
.= ( (the Arity of C161) . ( C163 . C166 ) ) by L552 , L589 , L590
.= ( (the Arity of C161) . ( D58 . C166 ) ) by L554 , L587 , FUNCT_4:11;
end;
end;
theorem
L597: (for B128 , B129 , B130 being non  empty Signature holds ((B130 is (Extension of B128) & B130 is (Extension of B129)) iff (B128 tolerates B129 & B130 is (Extension of ( B128 +* B129 )))))
proof
let C168 , C169 , C170 being non  empty Signature;
set D60 = ( id (the carrier of C168) );
set D61 = ( id (the carrier' of C168) );
set D62 = ( id (the carrier of C169) );
set D63 = ( id (the carrier' of C169) );
L598: ((C170 is (Extension of C168) & C170 is (Extension of C169)) implies C168 tolerates C169)
proof
assume that
L599: C168 is (Subsignature of C170)
and
L600: C169 is (Subsignature of C170);
L601: (the Arity of C169) c= (the Arity of C170) by L600 , INSTALG1:11;
L602: (the Arity of C168) c= (the Arity of C170) by L599 , INSTALG1:11;
thus L603: (the Arity of C168) tolerates (the Arity of C169) by L602 , L601 , PARTFUN1:52;
L604: (the ResultSort of C169) c= (the ResultSort of C170) by L600 , INSTALG1:11;
L605: (the ResultSort of C168) c= (the ResultSort of C170) by L599 , INSTALG1:11;
thus L606: thesis by L605 , L604 , PARTFUN1:52;
end;
L607: (the carrier of ( C168 +* C169 )) = ( (the carrier of C168) \/ (the carrier of C169) ) by CIRCCOMB:def 2;
L608: (the carrier of C169) c= ( (the carrier of C168) \/ (the carrier of C169) ) by XBOOLE_1:7;
L609: D62 c= ( id ( (the carrier of C168) \/ (the carrier of C169) ) ) by L608 , FUNCT_4:3;
L610: (the carrier' of ( C168 +* C169 )) = ( (the carrier' of C168) \/ (the carrier' of C169) ) by CIRCCOMB:def 2;
L611: (the carrier of C168) c= ( (the carrier of C168) \/ (the carrier of C169) ) by XBOOLE_1:7;
L612: D60 c= ( id ( (the carrier of C168) \/ (the carrier of C169) ) ) by L611 , FUNCT_4:3;
L613: D60 tolerates D62 by L612 , L609 , PARTFUN1:52;
L614: ((C170 is (Extension of C168) & C170 is (Extension of C169)) implies C170 is (Extension of ( C168 +* C169 )))
proof
assume that
L615: D60 , D61 form_morphism_between C168 , C170
and
L616: D62 , D63 form_morphism_between C169 , C170;
L617: ( D60 +* D62 ) , ( D61 +* D63 ) form_morphism_between ( C168 +* C169 ) , C170 by L613 , L615 , L616 , L545;
L618: ( id (the carrier of ( C168 +* C169 )) ) , ( D61 +* D63 ) form_morphism_between ( C168 +* C169 ) , C170 by L617 , L607 , FUNCT_4:22;
thus L619: ( id (the carrier of ( C168 +* C169 )) ) , ( id (the carrier' of ( C168 +* C169 )) ) form_morphism_between ( C168 +* C169 ) , C170 by L618 , L610 , FUNCT_4:22;
end;
thus L620: ((C170 is (Extension of C168) & C170 is (Extension of C169)) implies (C168 tolerates C169 & C170 is (Extension of ( C168 +* C169 )))) by L614 , L598;
assume L621: C168 tolerates C169;
L622: ( C168 +* C169 ) is (Extension of C168) by L621 , L506;
L623: ( C168 +* C169 ) is (Extension of C169) by L527;
thus L624: thesis by L623 , L622 , L501;
end;
registration
let C171 being non  empty Signature;
cluster  -> non  empty for (Extension of C171);
coherence
proof
set D64 = the (Element of C171);
let C172 being (Extension of C171);
L625: C171 is (Subsignature of C172) by L496;
L626: (the carrier of C171) c= (the carrier of C172) by L625 , INSTALG1:10;
L627: D64 in (the carrier of C171);
thus L628: (the carrier of C172) is non  empty by L627 , L626;
end;
end;
registration
let C173 being non  void Signature;
cluster  -> non  void for (Extension of C173);
coherence
proof
set D65 = the (OperSymbol of C173);
let C174 being (Extension of C173);
L630: C173 is (Subsignature of C174) by L496;
L631: (the carrier' of C173) c= (the carrier' of C174) by L630 , INSTALG1:10;
L632: D65 in (the carrier' of C173);
thus L633: (the carrier' of C174) is non  empty by L632 , L631;
end;
end;
theorem
L635: (for B131 , B132 being Signature holds (B131 is  empty implies B132 is (Extension of B131)))
proof
let C175 , C176 being Signature;
assume L636: (the carrier of C175) is  empty;
L637: (the carrier' of C175) = ( {} ) by L636 , INSTALG1:def 1;
L638: (the Arity of C175) = ( {} ) by L637;
L639: (the Arity of C175) c= (the Arity of C176) by L638 , XBOOLE_1:2;
L640: (the ResultSort of C175) = ( {} ) by L636;
L641: (the ResultSort of C175) c= (the ResultSort of C176) by L640 , XBOOLE_1:2;
thus L642: C175 is (Subsignature of C176) by L641 , L636 , L639 , INSTALG1:13 , XBOOLE_1:2;
end;
registration
let C177 being Signature;
cluster non  empty non  void  strict for (Extension of C177);
existence
proof
set D66 = the non  void  strict Signature;
per cases ;
suppose L643: C177 is  empty;

L644: D66 is (Extension of C177) by L643 , L635;
thus L645: thesis by L644;
end;
suppose L646: C177 is non  empty;

reconsider D67 = C177 as non  empty Signature by L646;
reconsider D68 = ( D66 +* D67 ) as (Extension of C177) by L527;
take D68;
thus L647: (the carrier of D68) is non  empty;
thus L648: (the carrier' of D68) is non  empty;
thus L649: thesis;
end;
end;
end;
theorem
L652: (for R3 being Function holds (for R4 being Function holds (for B133 being non  void Signature holds (for B134 being (Extension of B133) holds (R3 , R4 form_a_replacement_in B134 implies R3 , R4 form_a_replacement_in B133)))))
proof
let R3 being Function;
let R4 being Function;
let C178 being non  void Signature;
let C179 being (Extension of C178);
set D69 = ( (the carrier of C179) -indexing R3 );
set D70 = ( (the carrier' of C179) -indexing R4 );
set D71 = ( C179 with-replacement (R3 , R4) );
L653: C178 is (Subsignature of C179) by L496;
L654: ( D69 | (the carrier of C178) ) = ( (the carrier of C178) -indexing R3 ) by L653 , L163 , INSTALG1:10;
L655: ( D70 | (the carrier' of C178) ) = ( (the carrier' of C178) -indexing R4 ) by L653 , L163 , INSTALG1:10;
assume L656: R3 , R4 form_a_replacement_in C179;
L657: D69 , D70 form_morphism_between C179 , D71 by L656 , L459;
L658: ( D69 | (the carrier of C178) ) , ( D70 | (the carrier' of C178) ) form_a_replacement_in C178 by L657 , L653 , L313 , INSTALG1:18;
thus L659: thesis by L658 , L654 , L655 , L306;
end;
theorem
L660: (for R3 being Function holds (for R4 being Function holds (for B135 being non  void Signature holds (for B136 being (Extension of B135) holds (R3 , R4 form_a_replacement_in B136 implies ( B136 with-replacement (R3 , R4) ) is (Extension of ( B135 with-replacement (R3 , R4) )))))))
proof
let R3 being Function;
let R4 being Function;
let C180 being non  void Signature;
let C181 being (Extension of C180);
set D72 = ( (the carrier of C181) -indexing R3 );
set D73 = ( (the carrier' of C181) -indexing R4 );
set D74 = ( (the carrier' of C180) -indexing R4 );
set D75 = ( C181 with-replacement (R3 , R4) );
L661: ( (the carrier' of C180) -indexing D74 ) = D74 by L147;
assume L662: R3 , R4 form_a_replacement_in C181;
L663: R3 , R4 form_a_replacement_in C180 by L662 , L652;
L664: ( (the carrier of C180) -indexing R3 ) , D74 form_a_replacement_in C180 by L663 , L306;
L665: R3 , D74 form_a_replacement_in C180 by L664 , L661 , L306;
L666: C180 is (Subsignature of C181) by L496;
L667: ( D73 | (the carrier' of C180) ) = ( (the carrier' of C180) -indexing R4 ) by L666 , L163 , INSTALG1:10;
L668: D72 , D73 form_morphism_between C181 , D75 by L662 , L459;
L669: ( C180 with-replacement (( D72 | (the carrier of C180) ) , ( D73 | (the carrier' of C180) )) ) is (Subsignature of D75) by L668 , L666 , L421 , INSTALG1:18;
L670: ( D72 | (the carrier of C180) ) = ( (the carrier of C180) -indexing R3 ) by L666 , L163 , INSTALG1:10;
L671: ( C180 with-replacement (( D72 | (the carrier of C180) ) , ( D73 | (the carrier' of C180) )) ) = ( C180 with-replacement (R3 , ( (the carrier' of C180) -indexing R4 )) ) by L670 , L665 , L667 , L478;
thus L672: ( C180 with-replacement (R3 , R4) ) is (Subsignature of ( C181 with-replacement (R3 , R4) )) by L671 , L662 , L669 , L487 , L652;
end;
theorem
L673: (for B137 , B138 being non  void Signature holds (B137 tolerates B138 implies (for B139 , B140 being Function holds (B139 , B140 form_a_replacement_in ( B137 +* B138 ) implies ( ( B137 +* B138 ) with-replacement (B139 , B140) ) = ( ( B137 with-replacement (B139 , B140) ) +* ( B138 with-replacement (B139 , B140) ) )))))
proof
let C182 , C183 being non  void Signature;
assume that
L674: C182 tolerates C183;
L675: (the ResultSort of C182) tolerates (the ResultSort of C183) by L674 , CIRCCOMB:def 1;
L676: ( rng (the Arity of C183) ) c= ( (the carrier of C183) * );
L677: ( rng (the ResultSort of C183) ) c= (the carrier of C183);
L678: ( rng (the ResultSort of C182) ) c= (the carrier of C182);
set D76 = ( C182 +* C183 );
let C184 , C185 being Function;
assume that
L679: C184 , C185 form_a_replacement_in ( C182 +* C183 );
deffunc H1(non  void Signature) = ( (the carrier of $1) -indexing C184 );
deffunc H2(non  void Signature) = ( $1 with-replacement (C184 , C185) );
L680: ( dom H1(C183) ) = (the carrier of C183) by PARTFUN1:def 2;
L681: H1(C182) tolerates H1(C183) by L178;
L682: D76 is (Extension of C182) by L674 , L506;
reconsider D77 = H1(C182) as (Function of (the carrier of C182) , (the carrier of H2(C182))) by L682 , L679 , L406 , L652;
L683: ( dom ( H1(C182) * (the ResultSort of C182) ) ) = (the carrier' of C182) by PARTFUN1:def 2;
deffunc H3(non  void Signature) = ( (the carrier' of $1) -indexing C185 );
L684: ( dom H1(C182) ) = (the carrier of C182) by PARTFUN1:def 2;
L685: ( dom H3(C182) ) = (the carrier' of C182) by PARTFUN1:def 2;
set D78 = the (rng-retract of H3(C182));
set D79 = the (rng-retract of H3(C183));
L686: (the ResultSort of D76) = ( (the ResultSort of C182) +* (the ResultSort of C183) ) by CIRCCOMB:def 2;
L687: ( rng D79 ) c= ( dom H3(C183) ) by L239;
L688: (the carrier' of D76) = ( (the carrier' of C182) \/ (the carrier' of C183) ) by CIRCCOMB:def 2;
L689: H3(D76) = ( H3(C182) \/ H3(C183) ) by L688 , L184;
L690: ( rng H3(D76) ) = ( ( rng H3(C182) ) \/ ( rng H3(C183) ) ) by L689 , RELAT_1:12;
L691: ( dom H3(C183) ) = (the carrier' of C183) by PARTFUN1:def 2;
L692: D76 is (Extension of C183) by L527;
reconsider D80 = H1(C183) as (Function of (the carrier of C183) , (the carrier of H2(C183))) by L692 , L679 , L406 , L652;
L693: ( dom ( H1(C183) * (the ResultSort of C183) ) ) = (the carrier' of C183) by PARTFUN1:def 2;
L694: (the carrier of D76) = ( (the carrier of C182) \/ (the carrier of C183) ) by CIRCCOMB:def 2;
L695: H1(D76) = ( H1(C182) +* H1(C183) ) by L694 , L168;
L696: H1(D76) = ( H1(C182) \/ H1(C183) ) by L694 , L184;
L697: ( rng H1(D76) ) = ( ( rng H1(C182) ) \/ ( rng H1(C183) ) ) by L696 , RELAT_1:12;
L698: ( dom ( ( D80 * ) * (the Arity of C183) ) ) = (the carrier' of C183) by FUNCT_2:def 1;
L699: ( dom ( D80 * ) ) = ( (the carrier of C183) * ) by FUNCT_2:def 1;
L700: H3(D76) = ( H3(C182) +* H3(C183) ) by L688 , L168;
reconsider D81 = ( D78 +* D79 ) as (rng-retract of H3(D76)) by L700 , L178 , L272;
L701: ( rng D78 ) c= ( dom H3(C182) ) by L239;
L702: (the ResultSort of H2(D76)) = ( ( H1(D76) * (the ResultSort of D76) ) * D81 ) by L679 , L416
.= ( ( ( H1(C182) * (the ResultSort of C182) ) +* ( H1(C183) * (the ResultSort of C183) ) ) * D81 ) by L686 , L695 , L678 , L677 , L684 , L680 , L178 , FUNCT_4:69
.= ( ( ( H1(C182) * (the ResultSort of C182) ) * D78 ) +* ( ( H1(C183) * (the ResultSort of C183) ) * D79 ) ) by L681 , L701 , L687 , L685 , L691 , L683 , L693 , L675 , L75 , FUNCT_4:69
.= ( (the ResultSort of H2(C182)) +* ( ( H1(C183) * (the ResultSort of C183) ) * D79 ) ) by L679 , L682 , L416 , L652
.= ( (the ResultSort of H2(C182)) +* (the ResultSort of H2(C183)) ) by L679 , L692 , L416 , L652;
L703: (the carrier of H2(D76)) = ( rng H1(D76) ) by L679 , L355;
L704: ( dom ( ( D77 * ) * (the Arity of C182) ) ) = (the carrier' of C182) by FUNCT_2:def 1;
reconsider D82 = H1(D76) as (Function of (the carrier of D76) , (the carrier of H2(D76))) by L679 , L406;
L705: ( ( rng (the Arity of D76) ) /\ ( dom ( D82 * ) ) ) c= ( rng (the Arity of D76) ) by XBOOLE_1:17;
L706: (the Arity of D76) = ( (the Arity of C182) +* (the Arity of C183) ) by CIRCCOMB:def 2;
L707: C184 , C185 form_a_replacement_in C182 by L679 , L682 , L652;
L708: (the carrier of H2(C182)) = ( rng H1(C182) ) by L707 , L355;
L709: (the carrier' of H2(C182)) = ( rng H3(C182) ) by L707 , L355;
L710: (the carrier' of H2(D76)) = ( rng H3(D76) ) by L679 , L355;
L711: ( dom ( D77 * ) ) = ( (the carrier of C182) * ) by FUNCT_2:def 1;
L712: (the Arity of C182) tolerates (the Arity of C183) by L674 , CIRCCOMB:def 1;
L713: (the Arity of D76) = ( (the Arity of C182) \/ (the Arity of C183) ) by L712 , L706 , FUNCT_4:30;
L714: ( rng (the Arity of D76) ) = ( ( rng (the Arity of C182) ) \/ ( rng (the Arity of C183) ) ) by L713 , RELAT_1:12;
L715: ( rng (the Arity of D76) ) c= ( ( (the carrier of C182) * ) \/ ( (the carrier of C183) * ) ) by L714 , XBOOLE_1:13;
L716: ( rng (the Arity of D76) ) c= ( dom ( ( D77 * ) +* ( D80 * ) ) ) by L715 , L711 , L699 , FUNCT_4:def 1;
L717: ( ( rng (the Arity of D76) ) /\ ( dom ( D82 * ) ) ) c= ( dom ( ( D77 * ) +* ( D80 * ) ) ) by L716 , L705 , XBOOLE_1:1;
L718: C184 , C185 form_a_replacement_in C183 by L679 , L692 , L652;
L719: (the carrier of H2(C183)) = ( rng H1(C183) ) by L718 , L355;
L720: (the carrier' of H2(C183)) = ( rng H3(C183) ) by L718 , L355;
L721: ( D77 * ) tolerates ( D80 * ) by L106 , L178;
L722: ( ( D77 * ) +* ( D80 * ) ) c= ( ( D77 * ) \/ ( D80 * ) ) by FUNCT_4:29;
L723: D80 = ( D82 | (the carrier of C183) ) by L694 , L163 , XBOOLE_1:7;
L724: ( D80 * ) c= ( D82 * ) by L723 , L91 , RELAT_1:59;
L725: D77 = ( D82 | (the carrier of C182) ) by L694 , L163 , XBOOLE_1:7;
L726: ( D77 * ) c= ( D82 * ) by L725 , L91 , RELAT_1:59;
L727: ( ( D77 * ) \/ ( D80 * ) ) c= ( D82 * ) by L726 , L724 , XBOOLE_1:8;
L728: ( ( D77 * ) +* ( D80 * ) ) c= ( D82 * ) by L727 , L722 , XBOOLE_1:1;
L729: (the Arity of C182) tolerates (the Arity of C183) by L674 , CIRCCOMB:def 1;
L730: ( rng (the Arity of C182) ) c= ( (the carrier of C182) * );
L731: (the Arity of H2(D76)) = ( ( ( D82 * ) * (the Arity of D76) ) * D81 ) by L679 , L410
.= ( ( ( ( D77 * ) +* ( D80 * ) ) * (the Arity of D76) ) * D81 ) by L728 , L717 , L22
.= ( ( ( ( D77 * ) * (the Arity of C182) ) +* ( ( D80 * ) * (the Arity of C183) ) ) * D81 ) by L706 , L681 , L730 , L676 , L711 , L699 , L106 , FUNCT_4:69
.= ( ( ( ( D77 * ) * (the Arity of C182) ) * D78 ) +* ( ( ( D80 * ) * (the Arity of C183) ) * D79 ) ) by L701 , L687 , L685 , L691 , L721 , L729 , L704 , L698 , L75 , FUNCT_4:69
.= ( (the Arity of H2(C182)) +* ( ( ( D80 * ) * (the Arity of C183) ) * D79 ) ) by L679 , L682 , L410 , L652
.= ( (the Arity of H2(C182)) +* (the Arity of H2(C183)) ) by L679 , L692 , L410 , L652;
thus L732: thesis by L731 , L697 , L703 , L708 , L719 , L690 , L710 , L709 , L720 , L702 , CIRCCOMB:def 2;
end;
begin
definition
mode Algebra
means :L733: (ex B141 being non  void Signature st it is  feasible  feasible  feasible  feasible MSAlgebra over B141);
existence
proof
set D83 = the non  void Signature;
set D84 = the  feasible MSAlgebra over D83;
take D84;
take D83;
thus L734: thesis;
end;
end;
definition
let C186 being Signature;
mode Algebra of C186
 -> Algebra
means :L736: (ex B142 being non  void (Extension of C186) st it is  feasible  feasible  feasible  feasible MSAlgebra over B142);
existence
proof
set D85 = the non  void (Extension of C186);
set D86 = the  feasible MSAlgebra over D85;
L737: D86 is Algebra by L733;
thus L738: thesis by L737;
end;
end;
theorem
L740: (for B143 being non  void Signature holds (for B144 being  feasible MSAlgebra over B143 holds B144 is (Algebra of B143)))
proof
let C187 being non  void Signature;
let C188 being  feasible MSAlgebra over C187;
L741: C187 is (Extension of C187) by L499;
L742: C188 is Algebra by L733;
thus L743: thesis by L742 , L741 , L736;
end;
theorem
L744: (for B145 being Signature holds (for B146 being (Extension of B145) holds (for B147 being (Algebra of B146) holds B147 is (Algebra of B145))))
proof
let C189 being Signature;
let C190 being (Extension of C189);
let C191 being (Algebra of C190);
consider C192 being non  void (Extension of C190) such that L745: C191 is  feasible  feasible  feasible  feasible MSAlgebra over C192 by L736;
L746: C192 is (Extension of C189) by L501;
thus L747: thesis by L746 , L745 , L736;
end;
theorem
L748: (for B148 being Signature holds (for B149 being non  empty Signature holds (for B150 being MSAlgebra over B149 holds (B150 is (Algebra of B148) implies ((the carrier of B148) c= (the carrier of B149) & (the carrier' of B148) c= (the carrier' of B149))))))
proof
let C193 being Signature;
let C194 being non  empty Signature;
let C195 being MSAlgebra over C194;
L749: ( dom (the Charact of C195) ) = (the carrier' of C194) by PARTFUN1:def 2;
assume L750: C195 is (Algebra of C193);
consider C196 being non  void (Extension of C193) such that L751: C195 is  feasible  feasible  feasible  feasible MSAlgebra over C196 by L750 , L736;
reconsider D87 = C195 as MSAlgebra over C196 by L751;
L752: ( dom (the Sorts of C195) ) = (the carrier of C194) by PARTFUN1:def 2;
L753: C193 is (Subsignature of C196) by L496;
L754: ( dom (the Sorts of D87) ) = (the carrier of C196) by PARTFUN1:def 2;
thus L755: (the carrier of C193) c= (the carrier of C194) by L754 , L753 , L752 , INSTALG1:10;
L756: ( dom (the Charact of D87) ) = (the carrier' of C196) by PARTFUN1:def 2;
thus L757: thesis by L756 , L753 , L749 , INSTALG1:10;
end;
theorem
L758: (for B151 being non  void Signature holds (for B152 being non  empty Signature holds (for B153 being MSAlgebra over B152 holds (B153 is (Algebra of B151) implies (for B154 being (OperSymbol of B151) holds ( (the Charact of B153) . B154 ) is (Function of ( ( (the Sorts of B153) # ) . ( the_arity_of B154 ) ) , ( (the Sorts of B153) . ( the_result_sort_of B154 ) )))))))
proof
let C197 being non  void Signature;
let C198 being non  empty Signature;
let C199 being MSAlgebra over C198;
L759: ( dom (the Sorts of C199) ) = (the carrier of C198) by PARTFUN1:def 2;
assume L760: C199 is (Algebra of C197);
consider C200 being non  void (Extension of C197) such that L761: C199 is  feasible  feasible  feasible  feasible MSAlgebra over C200 by L760 , L736;
reconsider D88 = C199 as MSAlgebra over C200 by L761;
let C201 being (OperSymbol of C197);
L762: ( dom (the Sorts of D88) ) = (the carrier of C200) by PARTFUN1:def 2;
L763: C197 is (Subsignature of C200) by L496;
L764: (the carrier' of C197) c= (the carrier' of C200) by L763 , INSTALG1:10;
L765: (the ResultSort of C197) = ( (the ResultSort of C200) | (the carrier' of C197) ) by L763 , INSTALG1:12;
L766: ( the_result_sort_of C201 ) = ( (the ResultSort of C200) . C201 ) by L765 , FUNCT_1:49;
L767: (the Arity of C197) = ( (the Arity of C200) | (the carrier' of C197) ) by L763 , INSTALG1:12;
L768: ( the_arity_of C201 ) = ( (the Arity of C200) . C201 ) by L767 , FUNCT_1:49;
L769: C201 in (the carrier' of C197);
L770: ( (the Charact of D88) . C201 ) is (Function of ( ( ( (the Sorts of D88) # ) * (the Arity of C200) ) . C201 ) , ( ( (the Sorts of D88) * (the ResultSort of C200) ) . C201 )) by L769 , L764 , PBOOLE:def 15;
L771: (the carrier' of C200) = ( dom (the ResultSort of C200) ) by FUNCT_2:def 1;
L772: ( ( (the Sorts of D88) * (the ResultSort of C200) ) . C201 ) = ( (the Sorts of C199) . ( the_result_sort_of C201 ) ) by L771 , L769 , L764 , L766 , FUNCT_1:13;
L773: (the carrier' of C200) = ( dom (the Arity of C200) ) by FUNCT_2:def 1;
L774: ( ( ( (the Sorts of D88) # ) * (the Arity of C200) ) . C201 ) = ( ( (the Sorts of C199) # ) . ( the_arity_of C201 ) ) by L773 , L769 , L764 , L762 , L759 , L768 , FUNCT_1:13;
thus L775: thesis by L774 , L772 , L770;
end;
theorem
L776: (for B155 being non  empty Signature holds (for B156 being (Algebra of B155) holds (for B157 being non  empty ManySortedSign holds (B156 is MSAlgebra over B157 implies B156 is MSAlgebra over ( B157 +* B155 )))))
proof
let C202 being non  empty Signature;
let C203 being (Algebra of C202);
let C204 being non  empty ManySortedSign;
set D89 = ( C204 +* C202 );
L777: ( dom (the ResultSort of C202) ) = (the carrier' of C202) by FUNCT_2:def 1;
L778: (the ResultSort of D89) = ( (the ResultSort of C204) +* (the ResultSort of C202) ) by CIRCCOMB:def 2;
assume L779: C203 is MSAlgebra over C204;
reconsider D90 = C203 as MSAlgebra over C204 by L779;
L780: (the Arity of D89) = ( (the Arity of C204) +* (the Arity of C202) ) by CIRCCOMB:def 2;
L781: D90 is (Algebra of C202);
L782: (the carrier of C202) c= (the carrier of C204) by L781 , L748;
L783: (the carrier of D89) = ( (the carrier of C204) \/ (the carrier of C202) ) by CIRCCOMB:def 2;
L784: (the carrier of D89) = (the carrier of C204) by L783 , L782 , XBOOLE_1:12;
reconsider D91 = (the Sorts of D90) as (ManySortedSet of (the carrier of D89)) by L784;
L785: D90 is (Algebra of C202);
L786: (the carrier' of C202) c= (the carrier' of C204) by L785 , L748;
L787: (the carrier' of D89) = ( (the carrier' of C204) \/ (the carrier' of C202) ) by CIRCCOMB:def 2;
L788: (the carrier' of D89) = (the carrier' of C204) by L787 , L786 , XBOOLE_1:12;
L789: ( dom (the Arity of C202) ) = (the carrier' of C202) by FUNCT_2:def 1;
L790:
now
let C205 being set;
assume L791: C205 in (the carrier' of D89);
L792: ( ( D91 * (the ResultSort of D89) ) . C205 ) = ( D91 . ( (the ResultSort of D89) . C205 ) ) by L791 , FUNCT_2:15;
L793:
now
assume L794: C205 in (the carrier' of C202);
reconsider D92 = C202 as non  void Signature by L794;
reconsider D93 = C205 as (OperSymbol of D92) by L794;
L795: ( (the Arity of D89) . D93 ) = ( the_arity_of D93 ) by L789 , L780 , FUNCT_4:13;
L796: ( (the ResultSort of D89) . D93 ) = ( the_result_sort_of D93 ) by L777 , L778 , FUNCT_4:13;
thus L797: ( (the Charact of D90) . C205 ) is (Function of ( ( (the Sorts of D90) # ) . ( (the Arity of D89) . C205 ) ) , ( (the Sorts of D90) . ( (the ResultSort of D89) . C205 ) )) by L796 , L795 , L758;
end;
L798: ((not C205 in (the carrier' of C202)) implies (( (the Arity of D89) . C205 ) = ( (the Arity of C204) . C205 ) & ( (the ResultSort of D89) . C205 ) = ( (the ResultSort of C204) . C205 ))) by L789 , L777 , L780 , L778 , FUNCT_4:11;
L799: ( ( ( D91 # ) * (the Arity of C204) ) . C205 ) = ( ( D91 # ) . ( (the Arity of C204) . C205 ) ) by L788 , L791 , FUNCT_2:15;
L800: ( ( ( D91 # ) * (the Arity of D89) ) . C205 ) = ( ( D91 # ) . ( (the Arity of D89) . C205 ) ) by L791 , FUNCT_2:15;
L801: ( ( D91 * (the ResultSort of C204) ) . C205 ) = ( D91 . ( (the ResultSort of C204) . C205 ) ) by L788 , L791 , FUNCT_2:15;
thus L802: ( (the Charact of D90) . C205 ) is (Function of ( ( ( D91 # ) * (the Arity of D89) ) . C205 ) , ( ( D91 * (the ResultSort of D89) ) . C205 )) by L801 , L784 , L788 , L791 , L799 , L792 , L800 , L793 , L798 , PBOOLE:def 15;
end;
reconsider D94 = (the Charact of D90) as (ManySortedFunction of ( ( D91 # ) * (the Arity of D89) ) , ( D91 * (the ResultSort of D89) )) by L790 , L788 , PBOOLE:def 15;
set D95 = MSAlgebra (# D91 , D94 #);
L803: (the Sorts of D95) = (the Sorts of D90);
L804: D90 is MSAlgebra over D89 by L803;
thus L805: thesis by L804;
end;
theorem
L806: (for B158 , B159 being non  empty Signature holds (for B160 being MSAlgebra over B158 holds (B160 is MSAlgebra over B159 implies ((the carrier of B158) = (the carrier of B159) & (the carrier' of B158) = (the carrier' of B159)))))
proof
let C206 , C207 being non  empty Signature;
let C208 being MSAlgebra over C206;
assume L807: C208 is MSAlgebra over C207;
reconsider D96 = C208 as MSAlgebra over C207 by L807;
L808: (the Sorts of C208) = (the Sorts of D96);
L809: ( dom (the Sorts of C208) ) = (the carrier of C207) by L808 , PARTFUN1:def 2;
thus L810: (the carrier of C206) = (the carrier of C207) by L809 , PARTFUN1:def 2;
L811: (the Charact of C208) = (the Charact of D96);
L812: ( dom (the Charact of C208) ) = (the carrier' of C207) by L811 , PARTFUN1:def 2;
thus L813: thesis by L812 , PARTFUN1:def 2;
end;
registration
let C209 being non  void Signature;
let C210 being  non-empty  disjoint_valued MSAlgebra over C209;
cluster (the Sorts of C210) ->  one-to-one;
coherence
proof
let C211 , C212 being set;
assume that
L814: C211 in ( dom (the Sorts of C210) )
and
L815: C212 in ( dom (the Sorts of C210) );
reconsider D97 = C211 , D98 = C212 as (SortSymbol of C209) by L814 , L815;
assume that
L816: ( (the Sorts of C210) . C211 ) = ( (the Sorts of C210) . C212 )
and
L817: C211 <> C212;
L818: (the Sorts of C210) is  disjoint_valued by MSAFREE1:def 2;
L819: ( (the Sorts of C210) . D97 ) misses ( (the Sorts of C210) . D98 ) by L818 , L817 , PROB_2:def 2;
thus L820: thesis by L819 , L816;
end;
end;
theorem
L822: (for B161 being non  void Signature holds (for B162 being  disjoint_valued MSAlgebra over B161 holds (for B163 , B164 being (Component of (the Sorts of B162)) holds (B163 = B164 or B163 misses B164))))
proof
let C213 being non  void Signature;
let C214 being  disjoint_valued MSAlgebra over C213;
let C215 , C216 being (Component of (the Sorts of C214));
L823: (ex B165 being set st (B165 in ( dom (the Sorts of C214) ) & C216 = ( (the Sorts of C214) . B165 ))) by FUNCT_1:def 3;
L824: (the Sorts of C214) is  disjoint_valued by MSAFREE1:def 2;
L825: (ex B166 being set st (B166 in ( dom (the Sorts of C214) ) & C215 = ( (the Sorts of C214) . B166 ))) by FUNCT_1:def 3;
thus L826: thesis by L825 , L823 , L824 , PROB_2:def 2;
end;
theorem
L827: (for B167 , B168 being non  void Signature holds (for B169 being  non-empty  disjoint_valued MSAlgebra over B167 holds (B169 is MSAlgebra over B168 implies ( the ManySortedSign of B167 ) = ( the ManySortedSign of B168 ))))
proof
let C217 , C218 being non  void Signature;
let C219 being  non-empty  disjoint_valued MSAlgebra over C217;
L828: ( dom (the Sorts of C219) ) = (the carrier of C217) by PARTFUN1:def 2;
assume L829: C219 is MSAlgebra over C218;
reconsider D99 = C219 as MSAlgebra over C218 by L829;
L830: (the carrier of C217) = (the carrier of C218) by L829 , L806;
L831:
now
let C220 being set;
assume L832: C220 in (the carrier' of C217);
reconsider D100 = C220 as (OperSymbol of C217) by L832;
reconsider D101 = D100 as (OperSymbol of C218) by L829 , L806;
set D102 = the (Element of ( Args (D100 , C219) ));
L833: ( Den (D101 , D99) ) = ( (the Charact of D99) . D101 );
L834: ( rng ( Den (D100 , C219) ) ) c= ( Result (D101 , D99) ) by L833 , RELAT_1:def 19;
L835: ( ( Den (D100 , C219) ) . D102 ) in ( rng ( Den (D100 , C219) ) ) by FUNCT_2:4;
L836: ( Result (D100 , C219) ) meets ( Result (D101 , D99) ) by L835 , L834 , XBOOLE_0:3;
L837: ( Result (D100 , C219) ) = ( ( (the Sorts of D99) * (the ResultSort of C218) ) . C220 ) by L836 , L822
.= ( (the Sorts of D99) . ( (the ResultSort of C218) . D101 ) ) by FUNCT_2:15;
L838: ( (the Sorts of C219) . ( (the ResultSort of C218) . D101 ) ) = ( (the Sorts of C219) . ( (the ResultSort of C217) . D100 ) ) by L837 , FUNCT_2:15;
thus L839: ( (the ResultSort of C217) . C220 ) = ( (the ResultSort of C218) . C220 ) by L838 , L830 , L828 , FUNCT_1:def 4;
end;
L840:
now
let C221 being set;
assume L841: C221 in (the carrier' of C217);
reconsider D103 = C221 as (OperSymbol of C217) by L841;
reconsider D104 = D103 as (OperSymbol of C218) by L829 , L806;
reconsider D105 = ( (the Arity of C218) . D104 ) as (Element of ( (the carrier of C218) * ));
reconsider D106 = ( (the Arity of C217) . D103 ) as (Element of ( (the carrier of C217) * ));
L842: ( Den (D104 , D99) ) = ( (the Charact of D99) . D104 );
L843: ( dom ( Den (D103 , C219) ) ) = ( Args (D104 , D99) ) by L842 , FUNCT_2:def 1;
L844: ( dom ( Den (D103 , C219) ) ) = ( Args (D103 , C219) ) by FUNCT_2:def 1;
L845: ( Args (D103 , C219) ) = ( ( (the Sorts of D99) # ) . D105 ) by L844 , L843 , FUNCT_2:15
.= ( product ( (the Sorts of D99) * D105 ) ) by FINSEQ_2:def 5;
L846: ( product ( (the Sorts of C219) * D105 ) ) = ( ( (the Sorts of C219) # ) . D106 ) by L845 , FUNCT_2:15
.= ( product ( (the Sorts of C219) * D106 ) ) by FINSEQ_2:def 5;
L847: ( (the Sorts of D99) * D105 ) = ( (the Sorts of C219) * D106 ) by L846 , PUA2MSS1:2;
L848: ( rng D106 ) c= (the carrier of C217);
L849: ( dom ( (the Sorts of C219) * D106 ) ) = ( dom D106 ) by L848 , L828 , RELAT_1:27;
L850: ( rng D105 ) c= (the carrier of C218);
L851: ( dom ( (the Sorts of D99) * D105 ) ) = ( dom D105 ) by L850 , L830 , L828 , RELAT_1:27;
thus L852: ( (the Arity of C217) . C221 ) = ( (the Arity of C218) . C221 ) by L851 , L830 , L828 , L847 , L850 , L848 , L849 , FUNCT_1:27;
end;
L853: ( dom (the Arity of C218) ) = (the carrier' of C218) by FUNCT_2:def 1;
L854: ( dom (the Arity of C217) ) = (the carrier' of C217) by FUNCT_2:def 1;
L855: ( dom (the ResultSort of C218) ) = (the carrier' of C218) by FUNCT_2:def 1;
L856: (the carrier' of C217) = (the carrier' of C218) by L829 , L806;
L857: ( dom (the ResultSort of C217) ) = (the carrier' of C217) by FUNCT_2:def 1;
L858: (the ResultSort of C217) = (the ResultSort of C218) by L857 , L829 , L855 , L831 , L806 , FUNCT_1:2;
thus L859: thesis by L858 , L830 , L856 , L854 , L853 , L840 , FUNCT_1:2;
end;
theorem
L860: (for R1 being non  void Signature holds (for B170 being non  void Signature holds (for B171 being  non-empty  disjoint_valued MSAlgebra over R1 holds (B171 is (Algebra of B170) implies R1 is (Extension of B170)))))
proof
let R1 being non  void Signature;
let C222 being non  void Signature;
let C223 being  non-empty  disjoint_valued MSAlgebra over R1;
assume L861: C223 is (Algebra of C222);
consider C224 being non  void (Extension of C222) such that L862: C223 is  feasible  feasible  feasible  feasible MSAlgebra over C224 by L861 , L736;
L863: C222 is (Subsignature of C224) by L496;
L864: ( the ManySortedSign of R1 ) = ( the ManySortedSign of C224 ) by L862 , L827;
L865: (the ResultSort of C222) c= (the ResultSort of R1) by L864 , L863 , INSTALG1:11;
L866: (the Arity of C222) c= (the Arity of R1) by L863 , L864 , INSTALG1:11;
thus L867: C222 is (Subsignature of R1) by L866 , L863 , L864 , L865 , INSTALG1:10 , INSTALG1:13;
end;
