:: Free Order Sorted Universal Algebra
::  by Josef Urban
::
:: Received September 19, 2002
:: Copyright (c) 2002-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies OSALG_1, MSUALG_2, OSALG_2, MSUALG_1, TARSKI, STRUCT_0, RELAT_1,
      SEQM_3, PBOOLE, MSUALG_3, REALSET1, ZFMISC_1, XBOOLE_0, CARD_3, MSAFREE,
      SUBSET_1, FINSEQ_1, MARGREL1, FUNCT_1, XXREAL_0, PARTFUN1, LANG1,
      TDGROUP, DTCONSTR, TREES_3, TREES_4, NAT_1, TREES_2, OSALG_4, CARD_5,
      NATTRA_1, CARD_LAR, QC_LANG1, EQREL_1, RELAT_2, MSUALG_4, COH_SP,
      MCART_1, UNIALG_2, MEMBER_1, FUNCT_7, OSAFREE;
 notations TARSKI, XBOOLE_0, ZFMISC_1,
      XTUPLE_0, SUBSET_1, ORDINAL1, RELAT_1, RELSET_1,
      FUNCT_1, MCART_1, PARTFUN1, FUNCT_2, FINSEQ_1, FINSEQ_2, PBOOLE, RELAT_2,
      TREES_2, CARD_3, EQREL_1, STRUCT_0, LANG1, TREES_3, TREES_4, DTCONSTR,
      ORDERS_2, ORDERS_3, MSUALG_1, MSUALG_2, MSUALG_3, MSUALG_4, OSALG_1,
      OSALG_2, OSALG_3, OSALG_4, MSAFREE, FUNCT_7;
 constructors NAT_1, FINSEQOP, FUNCT_7, MSUALG_3, MSAFREE, ORDERS_3, OSALG_2,
      OSALG_3, OSALG_4, RELSET_1, XTUPLE_0;
 registrations XBOOLE_0, SUBSET_1, RELAT_1, ORDINAL1, PARTFUN1, FUNCOP_1,
      FUNCT_1, PBOOLE, TREES_2, TREES_3, STRUCT_0, DTCONSTR, MSUALG_1,
      MSUALG_3, MSAFREE, MSUALG_4, MSUALG_9, OSALG_1, OSALG_4, RELSET_1,
      FINSEQ_1, XTUPLE_0;
 requirements BOOLE, SUBSET;
 definitions TARSKI, XBOOLE_0, PBOOLE, MSUALG_3, OSALG_1, OSALG_3, OSALG_4,
      XTUPLE_0;
 theorems TARSKI, FUNCT_1, FUNCT_2, MCART_1, ZFMISC_1, PBOOLE, CARD_3,
      MSUALG_1, MSUALG_2, MSUALG_3, RELAT_1, LANG1, DTCONSTR, FINSEQ_1,
      TREES_4, TREES_1, DOMAIN_1, RELSET_1, XBOOLE_0, XBOOLE_1, OSALG_1,
      OSALG_2, OSALG_3, OSALG_4, MSAFREE, MSUALG_6, MSAFREE2, CARD_5, FINSEQ_2,
      FINSEQ_3, MSUALG_9, MSUALG_4, EQREL_1, FUNCT_5, ORDERS_2, RELAT_2,
      PARTFUN1, ORDERS_1, FUNCT_7, FUNCOP_1, TREES_3, XTUPLE_0;
 schemes CLASSES1, FUNCT_1, RELSET_1, DTCONSTR, XBOOLE_0, FUNCT_2, PBOOLE;

begin
definition
let C1 being OrderSortedSign;
let C2 being (OSAlgebra of C1);
mode OSGeneratorSet of C2
 -> (MSSubset of C2)
means :L1: (for B1 being (OSSubset of C2) holds (B1 = ( OSCl it ) implies (the Sorts of ( GenOSAlg B1 )) = (the Sorts of C2)));
existence
proof
set D1 = (the Sorts of C2);
reconsider D2 = D1 as (MSSubset of C2) by PBOOLE:def 18;
L2: D2 is (OrderSortedSet of C1) by OSALG_1:17;
reconsider D3 = D2 as (OSSubset of C2) by L2 , OSALG_2:def 2;
take D3;
set D4 = ( GenOSAlg D3 );
L3: D3 is (OSSubset of D4) by OSALG_2:def 12;
L4: D3 c= (the Sorts of D4) by L3 , PBOOLE:def 18;
L5: (the Sorts of D4) is (MSSubset of C2) by MSUALG_2:def 9;
L6: (the Sorts of D4) c= D3 by L5 , PBOOLE:def 18;
L7: D3 = ( OSCl D3 ) by L2 , OSALG_2:9;
thus L8: thesis by L7 , L4 , L6 , PBOOLE:146;
end;
end;
theorem
L10: (for B2 being OrderSortedSign holds (for B3 being  strict  non-empty (OSAlgebra of B2) holds (for B4 being (MSSubset of B3) holds (B4 is (OSGeneratorSet of B3) iff (for B5 being (OSSubset of B3) holds (B5 = ( OSCl B4 ) implies ( GenOSAlg B5 ) = B3))))))
proof
let C3 being OrderSortedSign;
let C4 being  strict  non-empty (OSAlgebra of C3);
let C5 being (MSSubset of C4);
thus L11: (C5 is (OSGeneratorSet of C4) implies (for B6 being (OSSubset of C4) holds (B6 = ( OSCl C5 ) implies ( GenOSAlg B6 ) = C4)))
proof
reconsider D5 = C4 as (MSSubAlgebra of C4) by MSUALG_2:5;
assume L12: C5 is (OSGeneratorSet of C4);
let C6 being (OSSubset of C4);
assume L13: C6 = ( OSCl C5 );
L14: (the Sorts of ( GenOSAlg C6 )) = (the Sorts of D5) by L13 , L12 , L1;
thus L15: thesis by L14 , MSUALG_2:9;
end;

assume L16: (for B7 being (OSSubset of C4) holds (B7 = ( OSCl C5 ) implies ( GenOSAlg B7 ) = C4));
let C7 being (OSSubset of C4);
assume L17: C7 = ( OSCl C5 );
thus L18: thesis by L17 , L16;
end;
definition
let R1 being OrderSortedSign;
let C8 being  monotone (OSAlgebra of R1);
let C9 being (OSGeneratorSet of C8);
attr C9 is  osfree
means
(for B8 being  monotone  non-empty (OSAlgebra of R1) holds (for B9 being (ManySortedFunction of C9 , (the Sorts of B8)) holds (ex B10 being (ManySortedFunction of C8 , B8) st (B10 is_homomorphism C8 , B8 & B10 is  order-sorted & ( B10 || C9 ) = B9))));
end;
definition
let C10 being OrderSortedSign;
let C11 being  monotone (OSAlgebra of C10);
attr C11 is  osfree
means
(ex B11 being (OSGeneratorSet of C11) st B11 is  osfree);
end;
begin
definition
let C12 being OrderSortedSign;
let C13 being (ManySortedSet of C12);
func OSREL C13 -> (Relation of ( [: (the carrier' of C12) , { (the carrier of C12) } :] \/ ( Union ( coprod C13 ) ) ) , ( ( [: (the carrier' of C12) , { (the carrier of C12) } :] \/ ( Union ( coprod C13 ) ) ) * )) means 
:L21: (for B12 being (Element of ( [: (the carrier' of C12) , { (the carrier of C12) } :] \/ ( Union ( coprod C13 ) ) )) holds (for B13 being (Element of ( ( [: (the carrier' of C12) , { (the carrier of C12) } :] \/ ( Union ( coprod C13 ) ) ) * )) holds ([ B12 , B13 ] in it iff (B12 in [: (the carrier' of C12) , { (the carrier of C12) } :] & (for B14 being (OperSymbol of C12) holds ([ B14 , (the carrier of C12) ] = B12 implies (( len B13 ) = ( len ( the_arity_of B14 ) ) & (for B15 being set holds (B15 in ( dom B13 ) implies ((( B13 . B15 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B16 being (OperSymbol of C12) holds ([ B16 , (the carrier of C12) ] = ( B13 . B15 ) implies ( the_result_sort_of B16 ) <= ( ( the_arity_of B14 ) /. B15 )))) & (( B13 . B15 ) in ( Union ( coprod C13 ) ) implies (ex B17 being (Element of C12) st (B17 <= ( ( the_arity_of B14 ) /. B15 ) & ( B13 . B15 ) in ( coprod (B17 , C13) ))))))))))))));
existence
proof
set D6 = ( [: (the carrier' of C12) , { (the carrier of C12) } :] \/ ( Union ( coprod C13 ) ) );
defpred S1[ (Element of D6) , (Element of ( D6 * )) ] means ($1 in [: (the carrier' of C12) , { (the carrier of C12) } :] & (for B18 being (OperSymbol of C12) holds ([ B18 , (the carrier of C12) ] = $1 implies (( len $2 ) = ( len ( the_arity_of B18 ) ) & (for B19 being set holds (B19 in ( dom $2 ) implies ((( $2 . B19 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B20 being (OperSymbol of C12) holds ([ B20 , (the carrier of C12) ] = ( $2 . B19 ) implies ( the_result_sort_of B20 ) <= ( ( the_arity_of B18 ) /. B19 )))) & (( $2 . B19 ) in ( Union ( coprod C13 ) ) implies (ex B21 being (Element of C12) st (B21 <= ( ( the_arity_of B18 ) /. B19 ) & ( $2 . B19 ) in ( coprod (B21 , C13) )))))))))));
consider C14 being (Relation of D6 , ( D6 * )) such that L22: (for B22 being (Element of D6) holds (for B23 being (Element of ( D6 * )) holds ([ B22 , B23 ] in C14 iff S1[ B22 , B23 ]))) from RELSET_1:sch 2;
take C14;
let C15 being (Element of D6);
let C16 being (Element of ( D6 * ));
thus L23: ([ C15 , C16 ] in C14 implies (C15 in [: (the carrier' of C12) , { (the carrier of C12) } :] & (for B24 being (OperSymbol of C12) holds ([ B24 , (the carrier of C12) ] = C15 implies (( len C16 ) = ( len ( the_arity_of B24 ) ) & (for B25 being set holds (B25 in ( dom C16 ) implies ((( C16 . B25 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B26 being (OperSymbol of C12) holds ([ B26 , (the carrier of C12) ] = ( C16 . B25 ) implies ( the_result_sort_of B26 ) <= ( ( the_arity_of B24 ) /. B25 )))) & (( C16 . B25 ) in ( Union ( coprod C13 ) ) implies (ex B27 being (Element of C12) st (B27 <= ( ( the_arity_of B24 ) /. B25 ) & ( C16 . B25 ) in ( coprod (B27 , C13) )))))))))))) by L22;
assume that
L24: C15 in [: (the carrier' of C12) , { (the carrier of C12) } :]
and
L25: (for B28 being (OperSymbol of C12) holds ([ B28 , (the carrier of C12) ] = C15 implies (( len C16 ) = ( len ( the_arity_of B28 ) ) & (for B29 being set holds (B29 in ( dom C16 ) implies ((( C16 . B29 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B30 being (OperSymbol of C12) holds ([ B30 , (the carrier of C12) ] = ( C16 . B29 ) implies ( the_result_sort_of B30 ) <= ( ( the_arity_of B28 ) /. B29 )))) & (( C16 . B29 ) in ( Union ( coprod C13 ) ) implies (ex B31 being (Element of C12) st (B31 <= ( ( the_arity_of B28 ) /. B29 ) & ( C16 . B29 ) in ( coprod (B31 , C13) ))))))))));
thus L26: thesis by L22 , L24 , L25;
end;
uniqueness
proof
set D7 = ( [: (the carrier' of C12) , { (the carrier of C12) } :] \/ ( Union ( coprod C13 ) ) );
let C17 , C18 being (Relation of D7 , ( D7 * ));
assume that
L27: (for B32 being (Element of D7) holds (for B33 being (Element of ( D7 * )) holds ([ B32 , B33 ] in C17 iff (B32 in [: (the carrier' of C12) , { (the carrier of C12) } :] & (for B34 being (OperSymbol of C12) holds ([ B34 , (the carrier of C12) ] = B32 implies (( len B33 ) = ( len ( the_arity_of B34 ) ) & (for B35 being set holds (B35 in ( dom B33 ) implies ((( B33 . B35 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B36 being (OperSymbol of C12) holds ([ B36 , (the carrier of C12) ] = ( B33 . B35 ) implies ( the_result_sort_of B36 ) <= ( ( the_arity_of B34 ) /. B35 )))) & (( B33 . B35 ) in ( Union ( coprod C13 ) ) implies (ex B37 being (Element of C12) st (B37 <= ( ( the_arity_of B34 ) /. B35 ) & ( B33 . B35 ) in ( coprod (B37 , C13) ))))))))))))))
and
L28: (for B38 being (Element of D7) holds (for B39 being (Element of ( D7 * )) holds ([ B38 , B39 ] in C18 iff (B38 in [: (the carrier' of C12) , { (the carrier of C12) } :] & (for B40 being (OperSymbol of C12) holds ([ B40 , (the carrier of C12) ] = B38 implies (( len B39 ) = ( len ( the_arity_of B40 ) ) & (for B41 being set holds (B41 in ( dom B39 ) implies ((( B39 . B41 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B42 being (OperSymbol of C12) holds ([ B42 , (the carrier of C12) ] = ( B39 . B41 ) implies ( the_result_sort_of B42 ) <= ( ( the_arity_of B40 ) /. B41 )))) & (( B39 . B41 ) in ( Union ( coprod C13 ) ) implies (ex B43 being (Element of C12) st (B43 <= ( ( the_arity_of B40 ) /. B41 ) & ( B39 . B41 ) in ( coprod (B43 , C13) ))))))))))))));
L29: (for B44 , B45 being set holds ([ B44 , B45 ] in C17 iff [ B44 , B45 ] in C18))
proof
let C19 , C20 being set;
thus L30: ([ C19 , C20 ] in C17 implies [ C19 , C20 ] in C18)
proof
assume L31: [ C19 , C20 ] in C17;
reconsider D8 = C19 as (Element of D7) by L31 , ZFMISC_1:87;
reconsider D9 = C20 as (Element of ( D7 * )) by L31 , ZFMISC_1:87;
L32: [ D8 , D9 ] in C17 by L31;
L33: D8 in [: (the carrier' of C12) , { (the carrier of C12) } :] by L32 , L27;
L34: (for B46 being (OperSymbol of C12) holds ([ B46 , (the carrier of C12) ] = D8 implies (( len D9 ) = ( len ( the_arity_of B46 ) ) & (for B47 being set holds (B47 in ( dom D9 ) implies ((( D9 . B47 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B48 being (OperSymbol of C12) holds ([ B48 , (the carrier of C12) ] = ( D9 . B47 ) implies ( the_result_sort_of B48 ) <= ( ( the_arity_of B46 ) /. B47 )))) & (( D9 . B47 ) in ( Union ( coprod C13 ) ) implies (ex B49 being (Element of C12) st (B49 <= ( ( the_arity_of B46 ) /. B47 ) & ( D9 . B47 ) in ( coprod (B49 , C13) )))))))))) by L27 , L31;
thus L35: thesis by L34 , L28 , L33;
end;

assume L36: [ C19 , C20 ] in C18;
reconsider D10 = C19 as (Element of D7) by L36 , ZFMISC_1:87;
reconsider D11 = C20 as (Element of ( D7 * )) by L36 , ZFMISC_1:87;
L37: [ D10 , D11 ] in C18 by L36;
L38: D10 in [: (the carrier' of C12) , { (the carrier of C12) } :] by L37 , L28;
L39: (for B50 being (OperSymbol of C12) holds ([ B50 , (the carrier of C12) ] = D10 implies (( len D11 ) = ( len ( the_arity_of B50 ) ) & (for B51 being set holds (B51 in ( dom D11 ) implies ((( D11 . B51 ) in [: (the carrier' of C12) , { (the carrier of C12) } :] implies (for B52 being (OperSymbol of C12) holds ([ B52 , (the carrier of C12) ] = ( D11 . B51 ) implies ( the_result_sort_of B52 ) <= ( ( the_arity_of B50 ) /. B51 )))) & (( D11 . B51 ) in ( Union ( coprod C13 ) ) implies (ex B53 being (Element of C12) st (B53 <= ( ( the_arity_of B50 ) /. B51 ) & ( D11 . B51 ) in ( coprod (B53 , C13) )))))))))) by L28 , L36;
thus L40: thesis by L39 , L27 , L38;
end;
thus L41: thesis by L29 , RELAT_1:def 2;
end;
end;
theorem
L43: (for R2 being OrderSortedSign holds (for R3 being (ManySortedSet of R2) holds (for R4 being (OperSymbol of R2) holds (for R5 being (Element of ( ( [: (the carrier' of R2) , { (the carrier of R2) } :] \/ ( Union ( coprod R3 ) ) ) * )) holds ([ [ R4 , (the carrier of R2) ] , R5 ] in ( OSREL R3 ) iff (( len R5 ) = ( len ( the_arity_of R4 ) ) & (for B54 being set holds (B54 in ( dom R5 ) implies ((( R5 . B54 ) in [: (the carrier' of R2) , { (the carrier of R2) } :] implies (for B55 being (OperSymbol of R2) holds ([ B55 , (the carrier of R2) ] = ( R5 . B54 ) implies ( the_result_sort_of B55 ) <= ( ( the_arity_of R4 ) /. B54 )))) & (( R5 . B54 ) in ( Union ( coprod R3 ) ) implies (ex B56 being (Element of R2) st (B56 <= ( ( the_arity_of R4 ) /. B54 ) & ( R5 . B54 ) in ( coprod (B56 , R3) )))))))))))))
proof
let R2 being OrderSortedSign;
let R3 being (ManySortedSet of R2);
let R4 being (OperSymbol of R2);
let R5 being (Element of ( ( [: (the carrier' of R2) , { (the carrier of R2) } :] \/ ( Union ( coprod R3 ) ) ) * ));
defpred S2[ (OperSymbol of R2) , (Element of ( ( [: (the carrier' of R2) , { (the carrier of R2) } :] \/ ( Union ( coprod R3 ) ) ) * )) ] means (( len $2 ) = ( len ( the_arity_of $1 ) ) & (for B57 being set holds (B57 in ( dom $2 ) implies ((( $2 . B57 ) in [: (the carrier' of R2) , { (the carrier of R2) } :] implies (for B58 being (OperSymbol of R2) holds ([ B58 , (the carrier of R2) ] = ( $2 . B57 ) implies ( the_result_sort_of B58 ) <= ( ( the_arity_of $1 ) /. B57 )))) & (( $2 . B57 ) in ( Union ( coprod R3 ) ) implies (ex B59 being (Element of R2) st (B59 <= ( ( the_arity_of $1 ) /. B57 ) & ( R5 . B57 ) in ( coprod (B59 , R3) ))))))));
set D12 = [ R4 , (the carrier of R2) ];
L44: (the carrier of R2) in { (the carrier of R2) } by TARSKI:def 1;
L45: D12 in [: (the carrier' of R2) , { (the carrier of R2) } :] by L44 , ZFMISC_1:87;
reconsider D13 = D12 as (Element of ( [: (the carrier' of R2) , { (the carrier of R2) } :] \/ ( Union ( coprod R3 ) ) )) by L45 , XBOOLE_0:def 3;
thus L46: ([ [ R4 , (the carrier of R2) ] , R5 ] in ( OSREL R3 ) implies S2[ R4 , R5 ])
proof
assume L47: [ [ R4 , (the carrier of R2) ] , R5 ] in ( OSREL R3 );
L48: (for B60 being (OperSymbol of R2) holds ([ B60 , (the carrier of R2) ] = D13 implies S2[ B60 , R5 ])) by L47 , L21;
thus L49: thesis by L48;
end;

assume L50: S2[ R4 , R5 ];
L51:
now
let C21 being (OperSymbol of R2);
assume L52: [ C21 , (the carrier of R2) ] = D13;
L53: C21 = R4 by L52 , XTUPLE_0:1;
thus L54: S2[ C21 , R5 ] by L53 , L50;
end;
thus L55: thesis by L51 , L45 , L21;
end;
definition
let C22 being OrderSortedSign;
let C23 being (ManySortedSet of C22);
func DTConOSA C23 -> DTConstrStr equals 
DTConstrStr (# ( [: (the carrier' of C22) , { (the carrier of C22) } :] \/ ( Union ( coprod C23 ) ) ) , ( OSREL C23 ) #);
correctness;
end;
registration
let C24 being OrderSortedSign;
let C25 being (ManySortedSet of C24);
cluster ( DTConOSA C25 ) ->  strict non  empty;
coherence;
end;
theorem
L58: (for B61 being OrderSortedSign holds (for B62 being  non-empty (ManySortedSet of B61) holds (( NonTerminals ( DTConOSA B62 ) ) = [: (the carrier' of B61) , { (the carrier of B61) } :] & ( Terminals ( DTConOSA B62 ) ) = ( Union ( coprod B62 ) ))))
proof
let C26 being OrderSortedSign;
let C27 being  non-empty (ManySortedSet of C26);
set D14 = ( DTConOSA C27 );
set D15 = ( [: (the carrier' of C26) , { (the carrier of C26) } :] \/ ( Union ( coprod (C27 qua (ManySortedSet of C26)) ) ) );
L59: (the carrier of D14) = ( ( Terminals D14 ) \/ ( NonTerminals D14 ) ) by LANG1:1;
thus L60: ( NonTerminals D14 ) c= [: (the carrier' of C26) , { (the carrier of C26) } :]
proof
let C28 being set;
assume L61: C28 in ( NonTerminals D14 );
L62: C28 in { B63 where B63 is (Symbol of D14) : (ex B64 being FinSequence st B63 ==> B64) } by L61 , LANG1:def 3;
consider C29 being (Symbol of D14) such that L63: C29 = C28 and L64: (ex B65 being FinSequence st C29 ==> B65) by L62;
consider C30 being FinSequence such that L65: C29 ==> C30 by L64;
L66: [ C29 , C30 ] in (the Rules of D14) by L65 , LANG1:def 1;
reconsider D16 = C30 as (Element of ( D15 * )) by L66 , ZFMISC_1:87;
reconsider D17 = C29 as (Element of D15);
L67: [ D17 , D16 ] in ( OSREL C27 ) by L65 , LANG1:def 1;
thus L68: thesis by L67 , L63 , L21;
end;

L69: ( Union ( coprod C27 ) ) misses [: (the carrier' of C26) , { (the carrier of C26) } :] by MSAFREE:4;
thus L70: [: (the carrier' of C26) , { (the carrier of C26) } :] c= ( NonTerminals D14 )
proof
let C31 being set;
assume L71: C31 in [: (the carrier' of C26) , { (the carrier of C26) } :];
consider C32 being (Element of (the carrier' of C26)), C33 being (Element of { (the carrier of C26) }) such that L72: C31 = [ C32 , C33 ] by L71 , DOMAIN_1:1;
set D18 = ( the_arity_of C32 );
defpred S3[ set , set ] means (ex B66 being (Element of C26) st (B66 <= ( D18 /. $1 ) & $2 in ( coprod (B66 , C27) )));
L73: (for B67 being set holds (B67 in ( Seg ( len D18 ) ) implies (ex B68 being set st S3[ B67 , B68 ])))
proof
let C34 being set;
assume L74: C34 in ( Seg ( len D18 ) );
L75: C34 in ( dom D18 ) by L74 , FINSEQ_1:def 3;
L76: ( D18 . C34 ) in ( rng D18 ) by L75 , FUNCT_1:def 3;
L77: ( rng D18 ) c= (the carrier of C26) by FINSEQ_1:def 4;
consider C35 being set such that L78: C35 in ( C27 . ( D18 . C34 ) ) by L77 , L76 , XBOOLE_0:def 1;
take D19 = [ C35 , ( D18 . C34 ) ];
take ( D18 /. C34 );
L79: D19 in ( coprod (( D18 . C34 ) , C27) ) by L76 , L77 , L78 , MSAFREE:def 2;
thus L80: thesis by L79 , L75 , PARTFUN1:def 6;
end;
consider C36 being Function such that L81: (( dom C36 ) = ( Seg ( len D18 ) ) & (for B69 being set holds (B69 in ( Seg ( len D18 ) ) implies S3[ B69 , ( C36 . B69 ) ]))) from CLASSES1:sch 1(L73);
reconsider D20 = C36 as FinSequence by L81 , FINSEQ_1:def 2;
L82: ( rng D20 ) c= D15
proof
let C37 being set;
assume L83: C37 in ( rng D20 );
consider C38 being set such that L84: C38 in ( dom D20 ) and L85: ( D20 . C38 ) = C37 by L83 , FUNCT_1:def 3;
consider C39 being (Element of C26) such that L86: C39 <= ( D18 /. C38 ) and L87: C37 in ( coprod (C39 , C27) ) by L81 , L84 , L85;
L88: ( dom ( coprod C27 ) ) = (the carrier of C26) by PARTFUN1:def 2;
L89: ( ( coprod C27 ) . C39 ) in ( rng ( coprod C27 ) ) by L88 , FUNCT_1:def 3;
L90: ( coprod (C39 , C27) ) in ( rng ( coprod C27 ) ) by L89 , MSAFREE:def 3;
L91: C37 in ( union ( rng ( coprod C27 ) ) ) by L90 , L87 , TARSKI:def 4;
L92: C37 in ( Union ( coprod C27 ) ) by L91 , CARD_3:def 4;
thus L93: thesis by L92 , XBOOLE_0:def 3;
end;
reconsider D21 = D20 as (FinSequence of D15) by L82 , FINSEQ_1:def 4;
reconsider D22 = D21 as (Element of ( D15 * )) by FINSEQ_1:def 11;
L94:
now
let C40 being set;
assume L95: C40 in ( dom D22 );
consider C41 being (Element of C26) such that L96: C41 <= ( D18 /. C40 ) and L97: ( D22 . C40 ) in ( coprod (C41 , C27) ) by L95 , L81;
L98: ( dom ( coprod C27 ) ) = (the carrier of C26) by PARTFUN1:def 2;
L99: ( ( coprod C27 ) . C41 ) in ( rng ( coprod C27 ) ) by L98 , FUNCT_1:def 3;
L100: ( coprod (C41 , C27) ) in ( rng ( coprod C27 ) ) by L99 , MSAFREE:def 3;
L101: ( D22 . C40 ) in ( union ( rng ( coprod C27 ) ) ) by L100 , L97 , TARSKI:def 4;
L102: ( D22 . C40 ) in ( Union ( coprod C27 ) ) by L101 , CARD_3:def 4;
thus L103: (( D22 . C40 ) in [: (the carrier' of C26) , { (the carrier of C26) } :] implies (for B70 being (OperSymbol of C26) holds ([ B70 , (the carrier of C26) ] = ( D22 . C40 ) implies ( the_result_sort_of B70 ) <= ( D18 /. C40 )))) by L102 , L69 , XBOOLE_0:3;
assume L104: ( D22 . C40 ) in ( Union ( coprod C27 ) );
thus L105: (ex B71 being (Element of C26) st (B71 <= ( D18 /. C40 ) & ( D22 . C40 ) in ( coprod (B71 , C27) ))) by L96 , L97;
end;
L106: (the carrier of C26) = C33 by TARSKI:def 1;
reconsider D23 = [ C32 , (the carrier of C26) ] as (Element of (the carrier of D14)) by L106 , L71 , L72 , XBOOLE_0:def 3;
L107: ( len D22 ) = ( len D18 ) by L81 , FINSEQ_1:def 3;
L108: [ D23 , D22 ] in ( OSREL C27 ) by L107 , L94 , L43;
L109: D23 ==> D22 by L108 , LANG1:def 1;
L110: D23 in { B72 where B72 is (Symbol of D14) : (ex B73 being FinSequence st B72 ==> B73) } by L109;
thus L111: thesis by L110 , L72 , L106 , LANG1:def 3;
end;

L112: ( Terminals D14 ) misses ( NonTerminals D14 ) by DTCONSTR:8;
thus L113: ( Terminals D14 ) c= ( Union ( coprod C27 ) )
proof
let C42 being set;
assume L114: C42 in ( Terminals D14 );
L115: C42 in D15 by L114 , L59 , XBOOLE_0:def 3;
L116: (not C42 in [: (the carrier' of C26) , { (the carrier of C26) } :]) by L112 , L70 , L114 , XBOOLE_0:3;
thus L117: thesis by L116 , L115 , XBOOLE_0:def 3;
end;

let C43 being set;
assume L118: C43 in ( Union ( coprod C27 ) );
L119: C43 in D15 by L118 , XBOOLE_0:def 3;
L120: (C43 in ( Terminals D14 ) or C43 in ( NonTerminals D14 )) by L119 , L59 , XBOOLE_0:def 3;
thus L121: thesis by L120 , L69 , L60 , L118 , XBOOLE_0:3;
end;
registration
let C44 being OrderSortedSign;
let C45 being  non-empty (ManySortedSet of C44);
cluster ( DTConOSA C45 ) ->  with_terminals  with_nonterminals  with_useful_nonterminals;
coherence
proof
set D24 = ( DTConOSA C45 );
set D25 = ( [: (the carrier' of C44) , { (the carrier of C44) } :] \/ ( Union ( coprod (C45 qua (ManySortedSet of C44)) ) ) );
L122: ( Terminals D24 ) = ( Union ( coprod C45 ) ) by L58;
L123: ( NonTerminals D24 ) = [: (the carrier' of C44) , { (the carrier of C44) } :] by L58;
L124: ( Union ( coprod C45 ) ) misses [: (the carrier' of C44) , { (the carrier of C44) } :] by MSAFREE:4;
L125: (for B74 being (Symbol of D24) holds (B74 in ( NonTerminals D24 ) implies (ex B75 being (FinSequence of ( TS D24 )) st B74 ==> ( roots B75 ))))
proof
let C46 being (Symbol of D24);
assume L126: C46 in ( NonTerminals D24 );
consider C47 being (Element of (the carrier' of C44)), C48 being (Element of { (the carrier of C44) }) such that L127: C46 = [ C47 , C48 ] by L126 , L123 , DOMAIN_1:1;
set D26 = ( the_arity_of C47 );
L128: (the carrier of C44) = C48 by TARSKI:def 1;
defpred S4[ set , set ] means (ex B76 being (Element of C44) st (B76 <= ( D26 /. $1 ) & $2 in ( coprod (B76 , C45) )));
L129: (for B77 being set holds (B77 in ( Seg ( len D26 ) ) implies (ex B78 being set st S4[ B77 , B78 ])))
proof
let C49 being set;
assume L130: C49 in ( Seg ( len D26 ) );
L131: C49 in ( dom D26 ) by L130 , FINSEQ_1:def 3;
L132: ( D26 . C49 ) in ( rng D26 ) by L131 , FUNCT_1:def 3;
L133: ( rng D26 ) c= (the carrier of C44) by FINSEQ_1:def 4;
consider C50 being set such that L134: C50 in ( C45 . ( D26 . C49 ) ) by L133 , L132 , XBOOLE_0:def 1;
take D27 = [ C50 , ( D26 . C49 ) ];
take ( D26 /. C49 );
L135: D27 in ( coprod (( D26 . C49 ) , C45) ) by L132 , L133 , L134 , MSAFREE:def 2;
thus L136: thesis by L135 , L131 , PARTFUN1:def 6;
end;
consider C51 being Function such that L137: (( dom C51 ) = ( Seg ( len D26 ) ) & (for B79 being set holds (B79 in ( Seg ( len D26 ) ) implies S4[ B79 , ( C51 . B79 ) ]))) from CLASSES1:sch 1(L129);
reconsider D28 = C51 as FinSequence by L137 , FINSEQ_1:def 2;
L138: ( rng D28 ) c= D25
proof
let C52 being set;
assume L139: C52 in ( rng D28 );
consider C53 being set such that L140: C53 in ( dom D28 ) and L141: ( D28 . C53 ) = C52 by L139 , FUNCT_1:def 3;
consider C54 being (Element of C44) such that L142: C54 <= ( D26 /. C53 ) and L143: C52 in ( coprod (C54 , C45) ) by L137 , L140 , L141;
L144: ( dom ( coprod C45 ) ) = (the carrier of C44) by PARTFUN1:def 2;
L145: ( ( coprod C45 ) . C54 ) in ( rng ( coprod C45 ) ) by L144 , FUNCT_1:def 3;
L146: ( coprod (C54 , C45) ) in ( rng ( coprod C45 ) ) by L145 , MSAFREE:def 3;
L147: C52 in ( union ( rng ( coprod C45 ) ) ) by L146 , L143 , TARSKI:def 4;
L148: C52 in ( Union ( coprod C45 ) ) by L147 , CARD_3:def 4;
thus L149: thesis by L148 , XBOOLE_0:def 3;
end;
reconsider D29 = D28 as (FinSequence of D25) by L138 , FINSEQ_1:def 4;
reconsider D30 = D29 as (Element of ( D25 * )) by FINSEQ_1:def 11;
deffunc H1(set) = ( root-tree ( D30 . $1 ) );
consider C55 being Function such that L150: (( dom C55 ) = ( dom D30 ) & (for R6 being set holds (R6 in ( dom D30 ) implies ( C55 . R6 ) = H1(R6)))) from FUNCT_1:sch 3;
reconsider D31 = C55 as FinSequence by L137 , L150 , FINSEQ_1:def 2;
L151: ( rng D31 ) c= ( TS D24 )
proof
let R6 being set;
assume L152: R6 in ( rng D31 );
consider C56 being set such that L153: C56 in ( dom D31 ) and L154: ( D31 . C56 ) = R6 by L152 , FUNCT_1:def 3;
L155: ( D30 . C56 ) in ( rng D30 ) by L150 , L153 , FUNCT_1:def 3;
reconsider D32 = ( D30 . C56 ) as (Symbol of D24) by L155 , L138;
consider C57 being (Element of C44) such that L156: C57 <= ( D26 /. C56 ) and L157: ( D30 . C56 ) in ( coprod (C57 , C45) ) by L137 , L150 , L153;
L158: ( dom ( coprod C45 ) ) = (the carrier of C44) by PARTFUN1:def 2;
L159: ( ( coprod C45 ) . C57 ) in ( rng ( coprod C45 ) ) by L158 , FUNCT_1:def 3;
L160: ( coprod (C57 , C45) ) in ( rng ( coprod C45 ) ) by L159 , MSAFREE:def 3;
L161: ( D30 . C56 ) in ( union ( rng ( coprod C45 ) ) ) by L160 , L157 , TARSKI:def 4;
L162: D32 in ( Terminals D24 ) by L161 , L122 , CARD_3:def 4;
L163: R6 = ( root-tree ( D30 . C56 ) ) by L150 , L153 , L154;
thus L164: thesis by L163 , L162 , DTCONSTR:def 1;
end;
reconsider D33 = D31 as (FinSequence of ( TS D24 )) by L151 , FINSEQ_1:def 4;
L165: (for R6 being set holds (R6 in ( dom D30 ) implies ( ( roots D33 ) . R6 ) = ( D30 . R6 )))
proof
let R6 being set;
assume L166: R6 in ( dom D30 );
reconsider D34 = R6 as Nat by L166;
L167: (ex B80 being DecoratedTree st (B80 = ( D33 . D34 ) & ( ( roots D33 ) . D34 ) = ( B80 . ( {} ) ))) by L150 , L166 , TREES_3:def 18;
L168: ( D33 . R6 ) = ( root-tree ( D30 . R6 ) ) by L150 , L166;
thus L169: thesis by L168 , L167 , TREES_4:3;
end;
L170:
now
let C58 being set;
assume L171: C58 in ( dom D30 );
consider C59 being (Element of C44) such that L172: C59 <= ( D26 /. C58 ) and L173: ( D30 . C58 ) in ( coprod (C59 , C45) ) by L171 , L137;
L174: ( dom ( coprod C45 ) ) = (the carrier of C44) by PARTFUN1:def 2;
L175: ( ( coprod C45 ) . C59 ) in ( rng ( coprod C45 ) ) by L174 , FUNCT_1:def 3;
L176: ( coprod (C59 , C45) ) in ( rng ( coprod C45 ) ) by L175 , MSAFREE:def 3;
L177: ( D30 . C58 ) in ( union ( rng ( coprod C45 ) ) ) by L176 , L173 , TARSKI:def 4;
L178: ( D30 . C58 ) in ( Union ( coprod C45 ) ) by L177 , CARD_3:def 4;
thus L179: (( D30 . C58 ) in [: (the carrier' of C44) , { (the carrier of C44) } :] implies (for B81 being (OperSymbol of C44) holds ([ B81 , (the carrier of C44) ] = ( D30 . C58 ) implies ( the_result_sort_of B81 ) <= ( D26 /. C58 )))) by L178 , L124 , XBOOLE_0:3;
assume L180: ( D30 . C58 ) in ( Union ( coprod C45 ) );
thus L181: (ex B82 being (Element of C44) st (B82 <= ( D26 /. C58 ) & ( D30 . C58 ) in ( coprod (B82 , C45) ))) by L172 , L173;
end;
L182: ( len D30 ) = ( len D26 ) by L137 , FINSEQ_1:def 3;
L183: [ C46 , D30 ] in ( OSREL C45 ) by L182 , L127 , L128 , L170 , L43;
L184: C46 ==> D30 by L183 , LANG1:def 1;
take D33;
L185: ( dom ( roots D33 ) ) = ( dom D33 ) by TREES_3:def 18;
thus L186: thesis by L185 , L184 , L150 , L165 , FUNCT_1:2;
end;
thus L187: thesis by L125 , L122 , L123 , DTCONSTR:def 3 , DTCONSTR:def 4 , DTCONSTR:def 5;
end;
end;
theorem
L189: (for B83 being OrderSortedSign holds (for B84 being  non-empty (ManySortedSet of B83) holds (for B85 being set holds (B85 in ( Terminals ( DTConOSA B84 ) ) iff (ex B86 being (Element of B83) st (ex B87 being set st (B87 in ( B84 . B86 ) & B85 = [ B87 , B86 ])))))))
proof
let C60 being OrderSortedSign;
let C61 being  non-empty (ManySortedSet of C60);
let C62 being set;
set D35 = ( DTConOSA C61 );
L190: ( Terminals D35 ) = ( Union ( coprod C61 ) ) by L58
.= ( union ( rng ( coprod C61 ) ) ) by CARD_3:def 4;
thus L191: (C62 in ( Terminals D35 ) implies (ex B88 being (Element of C60) st (ex B89 being set st (B89 in ( C61 . B88 ) & C62 = [ B89 , B88 ]))))
proof
assume L192: C62 in ( Terminals D35 );
consider C63 being set such that L193: C62 in C63 and L194: C63 in ( rng ( coprod C61 ) ) by L192 , L190 , TARSKI:def 4;
consider C64 being set such that L195: C64 in ( dom ( coprod C61 ) ) and L196: ( ( coprod C61 ) . C64 ) = C63 by L194 , FUNCT_1:def 3;
reconsider D36 = C64 as (Element of C60) by L195;
L197: ( ( coprod C61 ) . D36 ) = ( coprod (D36 , C61) ) by MSAFREE:def 3;
consider C65 being set such that L198: C65 in ( C61 . D36 ) and L199: C62 = [ C65 , D36 ] by L197 , L193 , L196 , MSAFREE:def 2;
take D36;
take C65;
thus L200: thesis by L198 , L199;
end;

given C66 being (Element of C60) , C67 being set such that
L201: C67 in ( C61 . C66 )
and
L202: C62 = [ C67 , C66 ];

L203: C62 in ( coprod (C66 , C61) ) by L201 , L202 , MSAFREE:def 2;
L204: C62 in ( ( coprod C61 ) . C66 ) by L203 , MSAFREE:def 3;
L205: ( dom ( coprod C61 ) ) = (the carrier of C60) by PARTFUN1:def 2;
L206: ( ( coprod C61 ) . C66 ) in ( rng ( coprod C61 ) ) by L205 , FUNCT_1:def 3;
thus L207: thesis by L206 , L190 , L204 , TARSKI:def 4;
end;
definition
let C68 being OrderSortedSign;
let C69 being  non-empty (ManySortedSet of C68);
let C70 being (OperSymbol of C68);
func OSSym (C70 , C69) -> (Symbol of ( DTConOSA C69 )) equals 
[ C70 , (the carrier of C68) ];
coherence
proof
L208: (the carrier of C68) in { (the carrier of C68) } by TARSKI:def 1;
L209: [ C70 , (the carrier of C68) ] in [: (the carrier' of C68) , { (the carrier of C68) } :] by L208 , ZFMISC_1:87;
L210: [ C70 , (the carrier of C68) ] in ( NonTerminals ( DTConOSA C69 ) ) by L209 , L58;
thus L211: thesis by L210;
end;
end;
definition
let C71 being OrderSortedSign;
let C72 being  non-empty (ManySortedSet of C71);
let C73 being (Element of C71);
func ParsedTerms (C72 , C73) -> (Subset of ( TS ( DTConOSA C72 ) )) equals 
{ B90 where B90 is (Element of ( TS ( DTConOSA C72 ) )) : ((ex B91 being (Element of C71) st (ex B92 being set st (B91 <= C73 & B92 in ( C72 . B91 ) & B90 = ( root-tree [ B92 , B91 ] )))) or (ex B93 being (OperSymbol of C71) st ([ B93 , (the carrier of C71) ] = ( B90 . ( {} ) ) & ( the_result_sort_of B93 ) <= C73))) };
coherence
proof
set D37 = { B94 where B94 is (Element of ( TS ( DTConOSA C72 ) )) : ((ex B95 being (Element of C71) st (ex B96 being set st (B95 <= C73 & B96 in ( C72 . B95 ) & B94 = ( root-tree [ B96 , B95 ] )))) or (ex B97 being (OperSymbol of C71) st ([ B97 , (the carrier of C71) ] = ( B94 . ( {} ) ) & ( the_result_sort_of B97 ) <= C73))) };
L213: D37 c= ( TS ( DTConOSA C72 ) )
proof
let C74 being set;
assume L214: C74 in D37;
L215: (ex B98 being (Element of ( TS ( DTConOSA C72 ) )) st (C74 = B98 & ((ex B99 being (Element of C71) st (ex B100 being set st (B99 <= C73 & B100 in ( C72 . B99 ) & B98 = ( root-tree [ B100 , B99 ] )))) or (ex B101 being (OperSymbol of C71) st ([ B101 , (the carrier of C71) ] = ( B98 . ( {} ) ) & ( the_result_sort_of B101 ) <= C73))))) by L214;
thus L216: thesis by L215;
end;
thus L217: thesis by L213;
end;
end;
registration
let C75 being OrderSortedSign;
let C76 being  non-empty (ManySortedSet of C75);
let C77 being (Element of C75);
cluster ( ParsedTerms (C76 , C77) ) -> non  empty;
coherence
proof
L219: ( dom ( coprod C76 ) ) = (the carrier of C75) by PARTFUN1:def 2;
L220: ( ( coprod C76 ) . C77 ) in ( rng ( coprod C76 ) ) by L219 , FUNCT_1:def 3;
L221: ( coprod (C77 , C76) ) in ( rng ( coprod C76 ) ) by L220 , MSAFREE:def 3;
set D38 = { B102 where B102 is (Element of ( TS ( DTConOSA C76 ) )) : ((ex B103 being (Element of C75) st (ex B104 being set st (B103 <= C77 & B104 in ( C76 . B103 ) & B102 = ( root-tree [ B104 , B103 ] )))) or (ex B105 being (OperSymbol of C75) st ([ B105 , (the carrier of C75) ] = ( B102 . ( {} ) ) & ( the_result_sort_of B105 ) <= C77))) };
consider C78 being set such that L222: C78 in ( C76 . C77 ) by XBOOLE_0:def 1;
set D39 = [ C78 , C77 ];
L223: ( Terminals ( DTConOSA C76 ) ) = ( Union ( coprod C76 ) ) by L58;
L224: D39 in ( coprod (C77 , C76) ) by L222 , MSAFREE:def 2;
L225: D39 in ( union ( rng ( coprod C76 ) ) ) by L224 , L221 , TARSKI:def 4;
L226: D39 in ( Terminals ( DTConOSA C76 ) ) by L225 , L223 , CARD_3:def 4;
reconsider D40 = D39 as (Symbol of ( DTConOSA C76 )) by L226;
reconsider D41 = ( root-tree D40 ) as (Element of ( TS ( DTConOSA C76 ) )) by L226 , DTCONSTR:def 1;
L227: D41 in D38 by L222;
thus L228: thesis by L227;
end;
end;
definition
let C79 being OrderSortedSign;
let C80 being  non-empty (ManySortedSet of C79);
func ParsedTerms C80 -> (OrderSortedSet of C79) means 
:L230: (for B106 being (Element of C79) holds ( it . B106 ) = ( ParsedTerms (C80 , B106) ));
existence
proof
deffunc H2((Element of C79)) = ( ParsedTerms (C80 , $1) );
consider C81 being Function such that L231: (( dom C81 ) = (the carrier of C79) & (for B107 being (Element of C79) holds ( C81 . B107 ) = H2(B107))) from FUNCT_1:sch 4;
reconsider D42 = C81 as (ManySortedSet of C79) by L231 , PARTFUN1:def 2 , RELAT_1:def 18;
L232: D42 is  order-sorted
proof
let C82 , C83 being (Element of C79);
assume that
L233: C82 <= C83;
thus L234: ( D42 . C82 ) c= ( D42 . C83 )
proof
let C84 being set;
assume L235: C84 in ( D42 . C82 );
L236: C84 in ( ParsedTerms (C80 , C82) ) by L235 , L231;
consider C85 being (Element of ( TS ( DTConOSA C80 ) )) such that L237: C84 = C85 and L238: ((ex B108 being (Element of C79) st (ex B109 being set st (B108 <= C82 & B109 in ( C80 . B108 ) & C85 = ( root-tree [ B109 , B108 ] )))) or (ex B110 being (OperSymbol of C79) st ([ B110 , (the carrier of C79) ] = ( C85 . ( {} ) ) & ( the_result_sort_of B110 ) <= C82))) by L236;
L239: ((ex B111 being (Element of C79) st (ex B112 being set st (B111 <= C83 & B112 in ( C80 . B111 ) & C85 = ( root-tree [ B112 , B111 ] )))) or (ex B113 being (OperSymbol of C79) st ([ B113 , (the carrier of C79) ] = ( C85 . ( {} ) ) & ( the_result_sort_of B113 ) <= C83)))
proof
per cases  by L238;
suppose L240: (ex B114 being (Element of C79) st (ex B115 being set st (B114 <= C82 & B115 in ( C80 . B114 ) & C85 = ( root-tree [ B115 , B114 ] ))));

consider C86 being (Element of C79), C87 being set such that L241: C86 <= C82 and L242: C87 in ( C80 . C86 ) and L243: C85 = ( root-tree [ C87 , C86 ] ) by L240;
thus L244: thesis by L233 , L241 , L242 , L243 , ORDERS_2:3;
end;
suppose L245: (ex B116 being (OperSymbol of C79) st ([ B116 , (the carrier of C79) ] = ( C85 . ( {} ) ) & ( the_result_sort_of B116 ) <= C82));

reconsider D43 = C83 as (Element of C79);
consider C88 being (OperSymbol of C79) such that L246: [ C88 , (the carrier of C79) ] = ( C85 . ( {} ) ) and L247: ( the_result_sort_of C88 ) <= C82 by L245;
L248: ( the_result_sort_of C88 ) <= D43 by L233 , L247 , ORDERS_2:3;
thus L249: thesis by L248 , L246;
end;
end;
L251: C84 in ( ParsedTerms (C80 , C83) ) by L239 , L237;
thus L252: thesis by L251 , L231;
end;

end;
reconsider D44 = D42 as (OrderSortedSet of C79) by L232;
take D44;
thus L235: thesis by L231;
end;
uniqueness
proof
let C89 , C90 being (OrderSortedSet of C79);
assume that
L236: (for B117 being (Element of C79) holds ( C89 . B117 ) = ( ParsedTerms (C80 , B117) ))
and
L237: (for B118 being (Element of C79) holds ( C90 . B118 ) = ( ParsedTerms (C80 , B118) ));
L238: (for B119 being set holds (B119 in (the carrier of C79) implies ( C89 . B119 ) = ( C90 . B119 )))
proof
let C91 being set;
assume L239: C91 in (the carrier of C79);
reconsider D45 = C91 as (Element of C79) by L239;
L240: ( C89 . D45 ) = ( ParsedTerms (C80 , D45) ) by L236;
thus L241: thesis by L240 , L237;
end;
thus L242: thesis by L238 , PBOOLE:3;
end;
end;
registration
let C92 being OrderSortedSign;
let C93 being  non-empty (ManySortedSet of C92);
cluster ( ParsedTerms C93 ) ->  non-empty;
coherence
proof
let C94 being set;
assume L244: C94 in (the carrier of C92);
reconsider D46 = C94 as (Element of C92) by L244;
L245: ( ( ParsedTerms C93 ) . D46 ) = ( ParsedTerms (C93 , D46) ) by L230;
thus L246: thesis by L245;
end;
end;
theorem
L248: (for B120 being OrderSortedSign holds (for B121 being  non-empty (ManySortedSet of B120) holds (for B122 being (OperSymbol of B120) holds (for B123 being set holds (B123 in ( ( ( ( ParsedTerms B121 ) # ) * (the Arity of B120) ) . B122 ) implies B123 is (FinSequence of ( TS ( DTConOSA B121 ) )))))))
proof
let C95 being OrderSortedSign;
let C96 being  non-empty (ManySortedSet of C95);
let C97 being (OperSymbol of C95);
let C98 being set;
set D47 = ( DTConOSA C96 );
set D48 = ( the_arity_of C97 );
L249: ( (the Arity of C95) . C97 ) = D48 by MSUALG_1:def 1;
assume L250: C98 in ( ( ( ( ParsedTerms C96 ) # ) * (the Arity of C95) ) . C97 );
L251: C98 in ( product ( ( ParsedTerms C96 ) * D48 ) ) by L250 , L249 , MSAFREE:1;
consider C99 being Function such that L252: C98 = C99 and L253: ( dom C99 ) = ( dom ( ( ParsedTerms C96 ) * D48 ) ) and L254: (for B124 being set holds (B124 in ( dom ( ( ParsedTerms C96 ) * D48 ) ) implies ( C99 . B124 ) in ( ( ( ParsedTerms C96 ) * D48 ) . B124 ))) by L251 , CARD_3:def 5;
L255: ( dom ( ( ParsedTerms C96 ) * D48 ) ) = ( dom D48 ) by PARTFUN1:def 2;
L256: ( dom D48 ) = ( Seg ( len D48 ) ) by FINSEQ_1:def 3;
reconsider D49 = C99 as FinSequence by L256 , L253 , L255 , FINSEQ_1:def 2;
L257: ( rng D49 ) c= ( TS D47 )
proof
let C100 being set;
assume L258: C100 in ( rng D49 );
consider C101 being set such that L259: C101 in ( dom D49 ) and L260: ( D49 . C101 ) = C100 by L258 , FUNCT_1:def 3;
L261: C100 in ( ( ( ParsedTerms C96 ) * D48 ) . C101 ) by L253 , L254 , L259 , L260;
reconsider D50 = C101 as Nat by L259;
L262: ( ( ( ParsedTerms C96 ) * D48 ) . D50 ) = ( ( ParsedTerms C96 ) . ( D48 . D50 ) ) by L253 , L259 , FUNCT_1:12
.= ( ( ParsedTerms C96 ) . ( D48 /. D50 ) ) by L253 , L255 , L259 , PARTFUN1:def 6
.= ( ParsedTerms (C96 , ( D48 /. D50 )) ) by L230
.= { B125 where B125 is (Element of ( TS D47 )) : ((ex B126 being (Element of C95) st (ex B127 being set st (B126 <= ( D48 /. D50 ) & B127 in ( C96 . B126 ) & B125 = ( root-tree [ B127 , B126 ] )))) or (ex B128 being (OperSymbol of C95) st ([ B128 , (the carrier of C95) ] = ( B125 . ( {} ) ) & ( the_result_sort_of B128 ) <= ( D48 /. D50 )))) };
L263: (ex B129 being (Element of ( TS D47 )) st (C100 = B129 & ((ex B130 being (Element of C95) st (ex B131 being set st (B130 <= ( D48 /. D50 ) & B131 in ( C96 . B130 ) & B129 = ( root-tree [ B131 , B130 ] )))) or (ex B132 being (OperSymbol of C95) st ([ B132 , (the carrier of C95) ] = ( B129 . ( {} ) ) & ( the_result_sort_of B132 ) <= ( D48 /. D50 )))))) by L262 , L261;
thus L264: thesis by L263;
end;
reconsider D51 = D49 as (FinSequence of ( TS D47 )) by L257 , FINSEQ_1:def 4;
L265: D51 = C98 by L252;
thus L266: thesis by L265;
end;
theorem
L267: (for B133 being OrderSortedSign holds (for B134 being  non-empty (ManySortedSet of B133) holds (for B135 being (OperSymbol of B133) holds (for B136 being (FinSequence of ( TS ( DTConOSA B134 ) )) holds (B136 in ( ( ( ( ParsedTerms B134 ) # ) * (the Arity of B133) ) . B135 ) iff (( dom B136 ) = ( dom ( the_arity_of B135 ) ) & (for B137 being Nat holds (B137 in ( dom B136 ) implies ( B136 . B137 ) in ( ParsedTerms (B134 , ( ( the_arity_of B135 ) /. B137 )) )))))))))
proof
let C102 being OrderSortedSign;
let C103 being  non-empty (ManySortedSet of C102);
let C104 being (OperSymbol of C102);
let C105 being (FinSequence of ( TS ( DTConOSA C103 ) ));
set D52 = (the Arity of C102);
set D53 = ( the_arity_of C104 );
thus L268: (C105 in ( ( ( ( ParsedTerms C103 ) # ) * D52 ) . C104 ) implies (( dom C105 ) = ( dom ( the_arity_of C104 ) ) & (for B138 being Nat holds (B138 in ( dom C105 ) implies ( C105 . B138 ) in ( ParsedTerms (C103 , ( ( the_arity_of C104 ) /. B138 )) )))))
proof
L269: ( D52 . C104 ) = D53 by MSUALG_1:def 1;
assume L270: C105 in ( ( ( ( ParsedTerms C103 ) # ) * (the Arity of C102) ) . C104 );
L271: C105 in ( product ( ( ParsedTerms C103 ) * D53 ) ) by L270 , L269 , MSAFREE:1;
L272: ( dom C105 ) = ( dom ( ( ParsedTerms C103 ) * D53 ) ) by L271 , CARD_3:9;
thus L273: ( dom C105 ) = ( dom D53 ) by L272 , PARTFUN1:def 2;
L274: ( dom ( ( ParsedTerms C103 ) * D53 ) ) = ( dom D53 ) by PARTFUN1:def 2;
let C106 being Nat;
assume L275: C106 in ( dom C105 );
L276: ( ( ( ParsedTerms C103 ) * D53 ) . C106 ) = ( ( ParsedTerms C103 ) . ( D53 . C106 ) ) by L275 , L272 , FUNCT_1:12
.= ( ( ParsedTerms C103 ) . ( D53 /. C106 ) ) by L272 , L274 , L275 , PARTFUN1:def 6
.= ( ParsedTerms (C103 , ( D53 /. C106 )) ) by L230;
thus L277: thesis by L276 , L271 , L272 , L275 , CARD_3:9;
end;

assume that
L278: ( dom C105 ) = ( dom ( the_arity_of C104 ) )
and
L279: (for B139 being Nat holds (B139 in ( dom C105 ) implies ( C105 . B139 ) in ( ParsedTerms (C103 , ( ( the_arity_of C104 ) /. B139 )) )));
L280: ( dom C105 ) = ( dom ( ( ParsedTerms C103 ) * D53 ) ) by L278 , PARTFUN1:def 2;
L281: (for B140 being set holds (B140 in ( dom ( ( ParsedTerms C103 ) * D53 ) ) implies ( C105 . B140 ) in ( ( ( ParsedTerms C103 ) * D53 ) . B140 )))
proof
let C107 being set;
assume L282: C107 in ( dom ( ( ParsedTerms C103 ) * D53 ) );
reconsider D54 = C107 as Nat by L282;
L283: ( ParsedTerms (C103 , ( D53 /. D54 )) ) = ( ( ParsedTerms C103 ) . ( D53 /. D54 ) ) by L230
.= ( ( ParsedTerms C103 ) . ( D53 . D54 ) ) by L278 , L280 , L282 , PARTFUN1:def 6
.= ( ( ( ParsedTerms C103 ) * D53 ) . C107 ) by L282 , FUNCT_1:12;
thus L284: thesis by L283 , L279 , L280 , L282;
end;
L285: ( D52 . C104 ) = D53 by MSUALG_1:def 1;
L286: ( ( ( ( ParsedTerms C103 ) # ) * D52 ) . C104 ) = ( product ( ( ParsedTerms C103 ) * D53 ) ) by L285 , MSAFREE:1;
thus L287: thesis by L286 , L280 , L281 , CARD_3:9;
end;
theorem
L288: (for B141 being OrderSortedSign holds (for B142 being  non-empty (ManySortedSet of B141) holds (for B143 being (OperSymbol of B141) holds (for B144 being (FinSequence of ( TS ( DTConOSA B142 ) )) holds (( OSSym (B143 , B142) ) ==> ( roots B144 ) iff B144 in ( ( ( ( ParsedTerms B142 ) # ) * (the Arity of B141) ) . B143 ))))))
proof
let C108 being OrderSortedSign;
let C109 being  non-empty (ManySortedSet of C108);
let C110 being (OperSymbol of C108);
let C111 being (FinSequence of ( TS ( DTConOSA C109 ) ));
set D55 = ( DTConOSA C109 );
set D56 = ( the_arity_of C110 );
set D57 = ( roots C111 );
set D58 = ( [: (the carrier' of C108) , { (the carrier of C108) } :] \/ ( Union ( coprod C109 ) ) );
L289: ( dom C111 ) = ( dom D57 ) by TREES_3:def 18;
thus L290: (( OSSym (C110 , C109) ) ==> ( roots C111 ) implies C111 in ( ( ( ( ParsedTerms C109 ) # ) * (the Arity of C108) ) . C110 ))
proof
assume L291: ( OSSym (C110 , C109) ) ==> ( roots C111 );
L292: [ [ C110 , (the carrier of C108) ] , ( roots C111 ) ] in ( OSREL C109 ) by L291 , LANG1:def 1;
reconsider D59 = ( roots C111 ) as (Element of ( ( [: (the carrier' of C108) , { (the carrier of C108) } :] \/ ( Union ( coprod C109 ) ) ) * )) by L292 , ZFMISC_1:87;
L293: ( dom C111 ) = ( dom D59 ) by TREES_3:def 18;
L294: (for B145 being Nat holds (B145 in ( dom C111 ) implies ( C111 . B145 ) in ( ParsedTerms (C109 , ( D56 /. B145 )) )))
proof
let C112 being Nat;
set D60 = ( D56 /. C112 );
L295: ( rng D59 ) c= ( [: (the carrier' of C108) , { (the carrier of C108) } :] \/ ( Union ( coprod C109 ) ) ) by FINSEQ_1:def 4;
L296: ( rng C111 ) c= ( TS D55 ) by FINSEQ_1:def 4;
assume L297: C112 in ( dom C111 );
consider C113 being DecoratedTree such that L298: C113 = ( C111 . C112 ) and L299: ( D59 . C112 ) = ( C113 . ( {} ) ) by L297 , TREES_3:def 18;
L300: ( C111 . C112 ) in ( rng C111 ) by L297 , FUNCT_1:def 3;
reconsider D61 = C113 as (Element of ( TS D55 )) by L300 , L298 , L296;
L301: ( D59 . C112 ) in ( rng D59 ) by L293 , L297 , FUNCT_1:def 3;
per cases  by L295 , L301 , XBOOLE_0:def 3;
suppose L302: ( D59 . C112 ) in [: (the carrier' of C108) , { (the carrier of C108) } :];

consider C114 being (Element of (the carrier' of C108)), C115 being (Element of { (the carrier of C108) }) such that L303: ( D59 . C112 ) = [ C114 , C115 ] by L302 , DOMAIN_1:1;
L304: C115 = (the carrier of C108) by TARSKI:def 1;
L305: ( the_result_sort_of C114 ) <= ( D56 /. C112 ) by L304 , L292 , L293 , L297 , L302 , L303 , L43;
L306: (ex B146 being (OperSymbol of C108) st ([ B146 , (the carrier of C108) ] = ( D61 . ( {} ) ) & ( the_result_sort_of B146 ) <= D60)) by L305 , L299 , L303 , L304;
thus L307: thesis by L306 , L298;
end;
suppose L308: ( D59 . C112 ) in ( Union ( coprod C109 ) );

reconsider D62 = ( D59 . C112 ) as (Terminal of D55) by L308 , L58;
L309: D61 = ( root-tree D62 ) by L299 , DTCONSTR:9;
consider C116 being (Element of C108) such that L310: C116 <= ( D56 /. C112 ) and L311: ( D59 . C112 ) in ( coprod (C116 , C109) ) by L292 , L293 , L297 , L308 , L43;
L312: (ex B147 being set st (B147 in ( C109 . C116 ) & ( D59 . C112 ) = [ B147 , C116 ])) by L311 , MSAFREE:def 2;
thus L313: thesis by L312 , L298 , L310 , L309;
end;
end;
L315: ( Seg ( len D56 ) ) = ( dom D56 ) by FINSEQ_1:def 3;
L316: ( dom D59 ) = ( Seg ( len D59 ) ) by FINSEQ_1:def 3;
L317: ( len D59 ) = ( len D56 ) by L292 , L43;
thus L318: thesis by L317 , L293 , L316 , L315 , L294 , L267;
end;

assume L319: C111 in ( ( ( ( ParsedTerms C109 ) # ) * (the Arity of C108) ) . C110 );
L320: ( dom D57 ) = ( Seg ( len D57 ) ) by FINSEQ_1:def 3;
reconsider D63 = D57 as (FinSequence of D58);
reconsider D64 = D63 as (Element of ( D58 * )) by FINSEQ_1:def 11;
L321: ( Union ( coprod C109 ) ) misses [: (the carrier' of C108) , { (the carrier of C108) } :] by MSAFREE:4;
L322: (for B148 being set holds (B148 in ( dom D64 ) implies ((( D64 . B148 ) in [: (the carrier' of C108) , { (the carrier of C108) } :] implies (for B149 being (OperSymbol of C108) holds ([ B149 , (the carrier of C108) ] = ( D64 . B148 ) implies ( the_result_sort_of B149 ) <= ( D56 /. B148 )))) & (( D64 . B148 ) in ( Union ( coprod C109 ) ) implies (ex B150 being (Element of C108) st (B150 <= ( D56 /. B148 ) & ( D64 . B148 ) in ( coprod (B150 , C109) )))))))
proof
let C117 being set;
assume L323: C117 in ( dom D64 );
reconsider D65 = C117 as Nat by L323;
set D66 = ( D56 /. D65 );
L324: ( C111 . D65 ) in ( ParsedTerms (C109 , D66) ) by L319 , L289 , L323 , L267;
consider C118 being (Element of ( TS D55 )) such that L325: C118 = ( C111 . D65 ) and L326: ((ex B151 being (Element of C108) st (ex B152 being set st (B151 <= D66 & B152 in ( C109 . B151 ) & C118 = ( root-tree [ B152 , B151 ] )))) or (ex B153 being (OperSymbol of C108) st ([ B153 , (the carrier of C108) ] = ( C118 . ( {} ) ) & ( the_result_sort_of B153 ) <= D66))) by L324;
L327: (ex B154 being DecoratedTree st (B154 = ( C111 . D65 ) & ( D64 . D65 ) = ( B154 . ( {} ) ))) by L289 , L323 , TREES_3:def 18;
thus L328: (( D64 . C117 ) in [: (the carrier' of C108) , { (the carrier of C108) } :] implies (for B155 being (OperSymbol of C108) holds ([ B155 , (the carrier of C108) ] = ( D64 . C117 ) implies ( the_result_sort_of B155 ) <= ( D56 /. C117 ))))
proof
assume L329: ( D64 . C117 ) in [: (the carrier' of C108) , { (the carrier of C108) } :];
L330:
now
given C119 being (Element of C108) , C120 being set such that
L331: C119 <= D66
and
L332: C120 in ( C109 . C119 )
and
L333: C118 = ( root-tree [ C120 , C119 ] );

L334: [ C120 , C119 ] in ( coprod (C119 , C109) ) by L332 , MSAFREE:def 2;
L335: ( dom ( coprod C109 ) ) = (the carrier of C108) by PARTFUN1:def 2;
L336: ( ( coprod C109 ) . C119 ) in ( rng ( coprod C109 ) ) by L335 , FUNCT_1:def 3;
L337: ( coprod (C119 , C109) ) in ( rng ( coprod C109 ) ) by L336 , MSAFREE:def 3;
L338: ( D64 . C117 ) = [ C120 , C119 ] by L325 , L327 , L333 , TREES_4:3;
L339: ( D64 . C117 ) in ( union ( rng ( coprod C109 ) ) ) by L338 , L334 , L337 , TARSKI:def 4;
L340: ( D64 . C117 ) in ( Union ( coprod C109 ) ) by L339 , CARD_3:def 4;
thus L341: contradiction by L340 , L321 , L329 , XBOOLE_0:3;
end;
let C121 being (OperSymbol of C108);
assume L342: [ C121 , (the carrier of C108) ] = ( D64 . C117 );
thus L343: thesis by L342 , L325 , L326 , L327 , L330 , XTUPLE_0:1;
end;

assume L344: ( D64 . C117 ) in ( Union ( coprod C109 ) );
L345:
now
given C122 being (OperSymbol of C108) such that
L346: [ C122 , (the carrier of C108) ] = ( C118 . ( {} ) )
and
L347: ( the_result_sort_of C122 ) <= D66;

L348: (the carrier of C108) in { (the carrier of C108) } by TARSKI:def 1;
L349: [ C122 , (the carrier of C108) ] in [: (the carrier' of C108) , { (the carrier of C108) } :] by L348 , ZFMISC_1:87;
thus L350: contradiction by L349 , L321 , L325 , L327 , L344 , L346 , XBOOLE_0:3;
end;
consider C123 being (Element of C108), C124 being set such that L351: C123 <= D66 and L352: C124 in ( C109 . C123 ) and L353: C118 = ( root-tree [ C124 , C123 ] ) by L345 , L326;
take C123;
L354: ( D64 . C117 ) = [ C124 , C123 ] by L325 , L327 , L353 , TREES_4:3;
thus L355: thesis by L354 , L351 , L352 , MSAFREE:def 2;
end;
L356: ( dom C111 ) = ( dom D56 ) by L319 , L267;
L357: ( len D64 ) = ( len D56 ) by L356 , L289 , L320 , FINSEQ_1:def 3;
L358: [ [ C110 , (the carrier of C108) ] , D64 ] in ( OSREL C109 ) by L357 , L322 , L43;
thus L359: thesis by L358 , LANG1:def 1;
end;
theorem
L360: (for B156 being OrderSortedSign holds (for B157 being  non-empty (ManySortedSet of B156) holds ( union ( rng ( ParsedTerms B157 ) ) ) = ( TS ( DTConOSA B157 ) )))
proof
let C125 being OrderSortedSign;
let C126 being  non-empty (ManySortedSet of C125);
set D67 = ( DTConOSA C126 );
L361: ( dom ( ParsedTerms C126 ) ) = (the carrier of C125) by PARTFUN1:def 2;
thus L362: ( union ( rng ( ParsedTerms C126 ) ) ) c= ( TS D67 )
proof
let R6 being set;
assume L363: R6 in ( union ( rng ( ParsedTerms C126 ) ) );
consider C127 being set such that L364: R6 in C127 and L365: C127 in ( rng ( ParsedTerms C126 ) ) by L363 , TARSKI:def 4;
consider C128 being set such that L366: C128 in ( dom ( ParsedTerms C126 ) ) and L367: ( ( ParsedTerms C126 ) . C128 ) = C127 by L365 , FUNCT_1:def 3;
reconsider D68 = C128 as (Element of C125) by L366;
L368: C127 = ( ParsedTerms (C126 , D68) ) by L367 , L230
.= { B158 where B158 is (Element of ( TS D67 )) : ((ex B159 being (Element of C125) st (ex B160 being set st (B159 <= D68 & B160 in ( C126 . B159 ) & B158 = ( root-tree [ B160 , B159 ] )))) or (ex B161 being (OperSymbol of C125) st ([ B161 , (the carrier of C125) ] = ( B158 . ( {} ) ) & ( the_result_sort_of B161 ) <= D68))) };
L369: (ex B162 being (Element of ( TS D67 )) st (B162 = R6 & ((ex B163 being (Element of C125) st (ex B164 being set st (B163 <= D68 & B164 in ( C126 . B163 ) & B162 = ( root-tree [ B164 , B163 ] )))) or (ex B165 being (OperSymbol of C125) st ([ B165 , (the carrier of C125) ] = ( B162 . ( {} ) ) & ( the_result_sort_of B165 ) <= D68))))) by L368 , L364;
thus L370: thesis by L369;
end;

let R6 being set;
L371: (the carrier of D67) = ( ( Terminals D67 ) \/ ( NonTerminals D67 ) ) by LANG1:1;
assume L372: R6 in ( TS D67 );
reconsider D69 = R6 as (Element of ( TS D67 )) by L372;
L373: ( rng D69 ) c= (the carrier of D67) by RELAT_1:def 19;
L374: ( NonTerminals D67 ) = [: (the carrier' of C125) , { (the carrier of C125) } :] by L58;
L375: ( Terminals D67 ) = ( Union ( coprod C126 ) ) by L58;
L376: ( {} ) in ( dom D69 ) by TREES_1:22;
L377: ( D69 . ( {} ) ) in ( rng D69 ) by L376 , FUNCT_1:def 3;
per cases  by L373 , L377 , L371 , XBOOLE_0:def 3;
suppose L378: ( D69 . ( {} ) ) in ( Terminals D67 );

reconsider D70 = ( D69 . ( {} ) ) as (Terminal of D67) by L378;
L379: D70 in ( union ( rng ( coprod C126 ) ) ) by L375 , L378 , CARD_3:def 4;
consider C129 being set such that L380: D70 in C129 and L381: C129 in ( rng ( coprod C126 ) ) by L379 , TARSKI:def 4;
consider C130 being set such that L382: C130 in ( dom ( coprod C126 ) ) and L383: ( ( coprod C126 ) . C130 ) = C129 by L381 , FUNCT_1:def 3;
reconsider D71 = C130 as (Element of C125) by L382;
L384: C129 = ( coprod (D71 , C126) ) by L383 , MSAFREE:def 3;
L385: (ex B166 being set st (B166 in ( C126 . D71 ) & D70 = [ B166 , D71 ])) by L384 , L380 , MSAFREE:def 2;
L386: D69 = ( root-tree D70 ) by DTCONSTR:9;
L387: D69 in ( ParsedTerms (C126 , D71) ) by L386 , L385;
L388: D69 in ( ( ParsedTerms C126 ) . D71 ) by L387 , L230;
L389: ( ( ParsedTerms C126 ) . D71 ) in ( rng ( ParsedTerms C126 ) ) by L361 , FUNCT_1:def 3;
thus L390: thesis by L389 , L388 , TARSKI:def 4;
end;
suppose L391: ( D69 . ( {} ) ) in ( NonTerminals D67 );

reconsider D72 = ( D69 . ( {} ) ) as (NonTerminal of D67) by L391;
consider C131 being (Element of (the carrier' of C125)), C132 being (Element of { (the carrier of C125) }) such that L392: D72 = [ C131 , C132 ] by L374 , DOMAIN_1:1;
set D73 = ( the_result_sort_of C131 );
L393: C132 = (the carrier of C125) by TARSKI:def 1;
L394: D69 in ( ParsedTerms (C126 , D73) ) by L393 , L392;
L395: D69 in ( ( ParsedTerms C126 ) . D73 ) by L394 , L230;
L396: ( ( ParsedTerms C126 ) . D73 ) in ( rng ( ParsedTerms C126 ) ) by L361 , FUNCT_1:def 3;
thus L397: thesis by L396 , L395 , TARSKI:def 4;
end;
end;
definition
let C133 being OrderSortedSign;
let C134 being  non-empty (ManySortedSet of C133);
let C135 being (OperSymbol of C133);
func PTDenOp (C135 , C134) -> (Function of ( ( ( ( ParsedTerms C134 ) # ) * (the Arity of C133) ) . C135 ) , ( ( ( ParsedTerms C134 ) * (the ResultSort of C133) ) . C135 )) means 
:L399: (for B167 being (FinSequence of ( TS ( DTConOSA C134 ) )) holds (( OSSym (C135 , C134) ) ==> ( roots B167 ) implies ( it . B167 ) = ( ( OSSym (C135 , C134) ) -tree B167 )));
existence
proof
set D74 = ( ( ( ( ParsedTerms C134 ) # ) * (the Arity of C133) ) . C135 );
set D75 = ( ( ( ParsedTerms C134 ) * (the ResultSort of C133) ) . C135 );
set D76 = ( DTConOSA C134 );
set D77 = (the carrier' of C133);
set D78 = ( the_result_sort_of C135 );
set D79 = (the ResultSort of C133);
defpred S5[ set , set ] means (for B168 being (FinSequence of ( TS D76 )) holds (B168 = $1 implies $2 = ( ( OSSym (C135 , C134) ) -tree B168 )));
L400: (for B169 being set holds (B169 in D74 implies (ex B170 being set st (B170 in D75 & S5[ B169 , B170 ]))))
proof
let C136 being set;
assume L401: C136 in D74;
reconsider D80 = C136 as (FinSequence of ( TS D76 )) by L401 , L248;
L402: ( OSSym (C135 , C134) ) ==> ( roots D80 ) by L401 , L288;
reconsider D81 = ( ( OSSym (C135 , C134) ) -tree D80 ) as (Element of ( TS D76 )) by L402 , DTCONSTR:def 1;
take D82 = ( ( OSSym (C135 , C134) ) -tree D80 );
L403: C135 in D77;
L404: C135 in ( dom ( ( ParsedTerms C134 ) * D79 ) ) by L403 , PARTFUN1:def 2;
L405: D75 = ( ( ParsedTerms C134 ) . ( D79 . C135 ) ) by L404 , FUNCT_1:12
.= ( ( ParsedTerms C134 ) . D78 ) by MSUALG_1:def 2
.= ( ParsedTerms (C134 , D78) ) by L230;
L406: ( D81 . ( {} ) ) = ( OSSym (C135 , C134) ) by TREES_4:def 4;
thus L407: D82 in D75 by L406 , L405;
thus L408: thesis;
end;
consider C137 being Function such that L409: (( dom C137 ) = D74 & ( rng C137 ) c= D75 & (for B171 being set holds (B171 in D74 implies S5[ B171 , ( C137 . B171 ) ]))) from FUNCT_1:sch 5(L400);
reconsider D83 = C137 as (Function of D74 , ( rng C137 )) by L409 , FUNCT_2:1;
reconsider D84 = D83 as (Function of D74 , D75) by L409 , FUNCT_2:2;
take D84;
let C138 being (FinSequence of ( TS D76 ));
assume L410: ( OSSym (C135 , C134) ) ==> ( roots C138 );
L411: C138 in D74 by L410 , L288;
thus L412: thesis by L411 , L409;
end;
uniqueness
proof
set D85 = ( ( ( ( ParsedTerms C134 ) # ) * (the Arity of C133) ) . C135 );
set D86 = ( ( ( ParsedTerms C134 ) * (the ResultSort of C133) ) . C135 );
set D87 = ( DTConOSA C134 );
let C139 , C140 being (Function of D85 , D86);
assume that
L413: (for B172 being (FinSequence of ( TS D87 )) holds (( OSSym (C135 , C134) ) ==> ( roots B172 ) implies ( C139 . B172 ) = ( ( OSSym (C135 , C134) ) -tree B172 )))
and
L414: (for B173 being (FinSequence of ( TS D87 )) holds (( OSSym (C135 , C134) ) ==> ( roots B173 ) implies ( C140 . B173 ) = ( ( OSSym (C135 , C134) ) -tree B173 )));
L415: (for B174 being set holds (B174 in D85 implies ( C139 . B174 ) = ( C140 . B174 )))
proof
let C141 being set;
assume L416: C141 in D85;
reconsider D88 = C141 as (FinSequence of ( TS D87 )) by L416 , L248;
L417: ( OSSym (C135 , C134) ) ==> ( roots D88 ) by L416 , L288;
L418: ( C139 . D88 ) = ( ( OSSym (C135 , C134) ) -tree D88 ) by L417 , L413;
thus L419: thesis by L418 , L414 , L417;
end;
L420: ( dom C140 ) = D85 by FUNCT_2:def 1;
L421: ( dom C139 ) = D85 by FUNCT_2:def 1;
thus L422: thesis by L421 , L420 , L415 , FUNCT_1:2;
end;
end;
definition
let C142 being OrderSortedSign;
let C143 being  non-empty (ManySortedSet of C142);
func PTOper C143 -> (ManySortedFunction of ( ( ( ParsedTerms C143 ) # ) * (the Arity of C142) ) , ( ( ParsedTerms C143 ) * (the ResultSort of C142) )) means 
:L424: (for B175 being (OperSymbol of C142) holds ( it . B175 ) = ( PTDenOp (B175 , C143) ));
existence
proof
defpred S6[ set , set ] means (for B176 being (OperSymbol of C142) holds ($1 = B176 implies $2 = ( PTDenOp (B176 , C143) )));
set D89 = (the carrier' of C142);
L425: (for B177 being set holds (B177 in D89 implies (ex B178 being set st S6[ B177 , B178 ])))
proof
let C144 being set;
assume L426: C144 in D89;
reconsider D90 = C144 as (OperSymbol of C142) by L426;
take ( PTDenOp (D90 , C143) );
thus L427: thesis;
end;
consider C145 being Function such that L428: (( dom C145 ) = D89 & (for B179 being set holds (B179 in D89 implies S6[ B179 , ( C145 . B179 ) ]))) from CLASSES1:sch 1(L425);
reconsider D91 = C145 as (ManySortedSet of D89) by L428 , PARTFUN1:def 2 , RELAT_1:def 18;
L429: (for B180 being set holds (B180 in ( dom D91 ) implies ( D91 . B180 ) is Function))
proof
let C146 being set;
assume L430: C146 in ( dom D91 );
reconsider D92 = C146 as (OperSymbol of C142) by L430;
L431: ( D91 . D92 ) = ( PTDenOp (D92 , C143) ) by L428;
thus L432: thesis by L431;
end;
reconsider D93 = D91 as (ManySortedFunction of D89) by L429 , FUNCOP_1:def 6;
L433: (for B181 being set holds (B181 in D89 implies ( D93 . B181 ) is (Function of ( ( ( ( ParsedTerms C143 ) # ) * (the Arity of C142) ) . B181 ) , ( ( ( ParsedTerms C143 ) * (the ResultSort of C142) ) . B181 ))))
proof
let C147 being set;
assume L434: C147 in D89;
reconsider D94 = C147 as (OperSymbol of C142) by L434;
L435: ( D93 . D94 ) = ( PTDenOp (D94 , C143) ) by L428;
thus L436: thesis by L435;
end;
reconsider D95 = D93 as (ManySortedFunction of ( ( ( ParsedTerms C143 ) # ) * (the Arity of C142) ) , ( ( ParsedTerms C143 ) * (the ResultSort of C142) )) by L433 , PBOOLE:def 15;
take D95;
let C148 being (OperSymbol of C142);
thus L437: thesis by L428;
end;
uniqueness
proof
let C149 , C150 being (ManySortedFunction of ( ( ( ParsedTerms C143 ) # ) * (the Arity of C142) ) , ( ( ParsedTerms C143 ) * (the ResultSort of C142) ));
assume that
L438: (for B182 being (OperSymbol of C142) holds ( C149 . B182 ) = ( PTDenOp (B182 , C143) ))
and
L439: (for B183 being (OperSymbol of C142) holds ( C150 . B183 ) = ( PTDenOp (B183 , C143) ));
L440: (for B184 being set holds (B184 in (the carrier' of C142) implies ( C149 . B184 ) = ( C150 . B184 )))
proof
let C151 being set;
assume L441: C151 in (the carrier' of C142);
reconsider D96 = C151 as (OperSymbol of C142) by L441;
L442: ( C149 . D96 ) = ( PTDenOp (D96 , C143) ) by L438;
thus L443: thesis by L442 , L439;
end;
thus L444: thesis by L440 , PBOOLE:3;
end;
end;
definition
let C152 being OrderSortedSign;
let C153 being  non-empty (ManySortedSet of C152);
func ParsedTermsOSA C153 -> (OSAlgebra of C152) equals 
MSAlgebra (# ( ParsedTerms C153 ) , ( PTOper C153 ) #);
coherence by OSALG_1:17;
end;
registration
let C154 being OrderSortedSign;
let C155 being  non-empty (ManySortedSet of C154);
cluster ( ParsedTermsOSA C155 ) ->  strict  non-empty;
coherence by MSUALG_1:def 3;
end;
definition
let C156 being OrderSortedSign;
let C157 being  non-empty (ManySortedSet of C156);
let C158 being (OperSymbol of C156);
redefine func OSSym (C158 , C157) -> (NonTerminal of ( DTConOSA C157 ));

coherence
proof
L448: (the carrier of C156) in { (the carrier of C156) } by TARSKI:def 1;
L449: ( NonTerminals ( DTConOSA C157 ) ) = [: (the carrier' of C156) , { (the carrier of C156) } :] by L58;
thus L450: thesis by L449 , L448 , ZFMISC_1:87;
end;
end;
theorem
L452: (for B185 being OrderSortedSign holds (for B186 being  non-empty (ManySortedSet of B185) holds (for B187 being (Element of B185) holds ( (the Sorts of ( ParsedTermsOSA B186 )) . B187 ) = { B188 where B188 is (Element of ( TS ( DTConOSA B186 ) )) : ((ex B189 being (Element of B185) st (ex B190 being set st (B189 <= B187 & B190 in ( B186 . B189 ) & B188 = ( root-tree [ B190 , B189 ] )))) or (ex B191 being (OperSymbol of B185) st ([ B191 , (the carrier of B185) ] = ( B188 . ( {} ) ) & ( the_result_sort_of B191 ) <= B187))) })))
proof
let C159 being OrderSortedSign;
let C160 being  non-empty (ManySortedSet of C159);
let C161 being (Element of C159);
set D97 = ( ParsedTermsOSA C160 );
L453: { B192 where B192 is (Element of ( TS ( DTConOSA C160 ) )) : ((ex B193 being (Element of C159) st (ex B194 being set st (B193 <= C161 & B194 in ( C160 . B193 ) & B192 = ( root-tree [ B194 , B193 ] )))) or (ex B195 being (OperSymbol of C159) st ([ B195 , (the carrier of C159) ] = ( B192 . ( {} ) ) & ( the_result_sort_of B195 ) <= C161))) } = ( ParsedTerms (C160 , C161) )
.= ( (the Sorts of D97) . C161 ) by L230;
thus L454: thesis by L453;
end;
theorem
L455: (for B196 being OrderSortedSign holds (for B197 being  non-empty (ManySortedSet of B196) holds (for B198 , B199 being (Element of B196) holds (for B200 being set holds (B200 in ( B197 . B198 ) implies (( root-tree [ B200 , B198 ] ) is (Element of ( TS ( DTConOSA B197 ) )) & (for B201 being set holds [ B201 , (the carrier of B196) ] <> ( ( root-tree [ B200 , B198 ] ) . ( {} ) )) & (( root-tree [ B200 , B198 ] ) in ( (the Sorts of ( ParsedTermsOSA B197 )) . B199 ) iff B198 <= B199)))))))
proof
let C162 being OrderSortedSign;
let C163 being  non-empty (ManySortedSet of C162);
let C164 , C165 being (Element of C162);
let C166 being set;
assume that
L456: C166 in ( C163 . C164 );
set D98 = ( ParsedTermsOSA C163 );
set D99 = ( DTConOSA C163 );
reconsider D100 = [ C166 , C164 ] as (Terminal of D99) by L456 , L189;
reconsider D101 = C164 , D102 = C165 as (Element of C162);
reconsider D103 = (the Sorts of D98) as (OrderSortedSet of C162);
L457: ( root-tree D100 ) is (Element of ( TS D99 ));
thus L458: ( root-tree [ C166 , C164 ] ) is (Element of ( TS D99 )) by L457;
thus L459: (for B202 being set holds [ B202 , (the carrier of C162) ] <> ( ( root-tree [ C166 , C164 ] ) . ( {} ) ))
proof
let C167 being set;
assume L460: [ C167 , (the carrier of C162) ] = ( ( root-tree [ C166 , C164 ] ) . ( {} ) );
L461: ( ( root-tree [ C166 , C164 ] ) . ( {} ) ) = [ C166 , C164 ] by TREES_4:3;
L462: C164 = (the carrier of C162) by L461 , L460 , XTUPLE_0:1;
L463: C164 in C164 by L462;
thus L464: contradiction by L463;
end;

thus L465:now
assume L466: ( root-tree [ C166 , C164 ] ) in ( (the Sorts of D98) . C165 );
L467: ( root-tree [ C166 , C164 ] ) in { B203 where B203 is (Element of ( TS ( DTConOSA C163 ) )) : ((ex B204 being (Element of C162) st (ex B205 being set st (B204 <= C165 & B205 in ( C163 . B204 ) & B203 = ( root-tree [ B205 , B204 ] )))) or (ex B206 being (OperSymbol of C162) st ([ B206 , (the carrier of C162) ] = ( B203 . ( {} ) ) & ( the_result_sort_of B206 ) <= C165))) } by L466 , L452;
consider C168 being (Element of ( TS D99 )) such that L468: C168 = ( root-tree [ C166 , C164 ] ) and L469: ((ex B207 being (Element of C162) st (ex B208 being set st (B207 <= C165 & B208 in ( C163 . B207 ) & C168 = ( root-tree [ B208 , B207 ] )))) or (ex B209 being (OperSymbol of C162) st ([ B209 , (the carrier of C162) ] = ( C168 . ( {} ) ) & ( the_result_sort_of B209 ) <= C165))) by L467;
consider C169 being (Element of C162), C170 being set such that L470: C169 <= C165 and L471: C170 in ( C163 . C169 ) and L472: C168 = ( root-tree [ C170 , C169 ] ) by L459 , L468 , L469;
L473: [ C170 , C169 ] = [ C166 , C164 ] by L468 , L472 , TREES_4:4;
thus L474: C164 <= C165 by L473 , L470 , XTUPLE_0:1;
end;
assume L475: C164 <= C165;
L476: ( D103 . D101 ) c= ( D103 . D102 ) by L475 , OSALG_1:def 16;
L477: ( root-tree D100 ) in { B210 where B210 is (Element of ( TS ( DTConOSA C163 ) )) : ((ex B211 being (Element of C162) st (ex B212 being set st (B211 <= C164 & B212 in ( C163 . B211 ) & B210 = ( root-tree [ B212 , B211 ] )))) or (ex B213 being (OperSymbol of C162) st ([ B213 , (the carrier of C162) ] = ( B210 . ( {} ) ) & ( the_result_sort_of B213 ) <= C164))) } by L456;
L478: ( root-tree [ C166 , C164 ] ) in ( D103 . D101 ) by L477 , L452;
thus L479: thesis by L478 , L476;
end;
theorem
L480: (for B214 being OrderSortedSign holds (for B215 being  non-empty (ManySortedSet of B214) holds (for B216 being (Element of ( TS ( DTConOSA B215 ) )) holds (for B217 being (OperSymbol of B214) holds (( B216 . ( {} ) ) = [ B217 , (the carrier of B214) ] implies ((ex B218 being (SubtreeSeq of ( OSSym (B217 , B215) )) st (B216 = ( ( OSSym (B217 , B215) ) -tree B218 ) & ( OSSym (B217 , B215) ) ==> ( roots B218 ) & B218 in ( Args (B217 , ( ParsedTermsOSA B215 )) ) & B216 = ( ( Den (B217 , ( ParsedTermsOSA B215 )) ) . B218 ))) & (for B219 being (Element of B214) holds (for B220 being set holds B216 <> ( root-tree [ B220 , B219 ] ))) & (for B221 being (Element of B214) holds (B216 in ( (the Sorts of ( ParsedTermsOSA B215 )) . B221 ) iff ( the_result_sort_of B217 ) <= B221))))))))
proof
let C171 being OrderSortedSign;
let C172 being  non-empty (ManySortedSet of C171);
let C173 being (Element of ( TS ( DTConOSA C172 ) ));
let C174 being (OperSymbol of C171);
assume that
L481: ( C173 . ( {} ) ) = [ C174 , (the carrier of C171) ];
set D104 = ( DTConOSA C172 );
set D105 = ( ParsedTermsOSA C172 );
consider C175 being (FinSequence of ( TS D104 )) such that L482: C173 = ( ( OSSym (C174 , C172) ) -tree C175 ) and L483: ( OSSym (C174 , C172) ) ==> ( roots C175 ) by L481 , DTCONSTR:10;
reconsider D106 = C175 as (SubtreeSeq of ( OSSym (C174 , C172) )) by L483 , DTCONSTR:def 6;
L484: D106 in ( ( ( ( ParsedTerms C172 ) # ) * (the Arity of C171) ) . C174 ) by L483 , L288;
L485: D106 in ( Args (C174 , ( ParsedTermsOSA C172 )) ) by L484 , MSUALG_1:def 4;
L486: ( ( Den (C174 , D105) ) . D106 ) = ( ( (the Charact of D105) . C174 ) . D106 ) by MSUALG_1:def 6
.= ( ( PTDenOp (C174 , C172) ) . D106 ) by L424
.= C173 by L482 , L483 , L399;
thus L487: (ex B222 being (SubtreeSeq of ( OSSym (C174 , C172) )) st (C173 = ( ( OSSym (C174 , C172) ) -tree B222 ) & ( OSSym (C174 , C172) ) ==> ( roots B222 ) & B222 in ( Args (C174 , ( ParsedTermsOSA C172 )) ) & C173 = ( ( Den (C174 , ( ParsedTermsOSA C172 )) ) . B222 ))) by L486 , L482 , L483 , L485;
thus L488: (for B223 being (Element of C171) holds (for B224 being set holds C173 <> ( root-tree [ B224 , B223 ] )))
proof
let C176 being (Element of C171);
let C177 being set;
assume L489: C173 = ( root-tree [ C177 , C176 ] );
L490: [ C177 , C176 ] = [ C174 , (the carrier of C171) ] by L489 , L481 , TREES_4:3;
L491: C176 = (the carrier of C171) by L490 , XTUPLE_0:1;
L492: C176 in C176 by L491;
thus L493: contradiction by L492;
end;

set D107 = ( the_result_sort_of C174 );
let C178 being (Element of C171);
thus L494:now
assume L495: C173 in ( (the Sorts of D105) . C178 );
L496: C173 in { B225 where B225 is (Element of ( TS ( DTConOSA C172 ) )) : ((ex B226 being (Element of C171) st (ex B227 being set st (B226 <= C178 & B227 in ( C172 . B226 ) & B225 = ( root-tree [ B227 , B226 ] )))) or (ex B228 being (OperSymbol of C171) st ([ B228 , (the carrier of C171) ] = ( B225 . ( {} ) ) & ( the_result_sort_of B228 ) <= C178))) } by L495 , L452;
consider C179 being (Element of ( TS ( DTConOSA C172 ) )) such that L497: C179 = C173 and L498: ((ex B229 being (Element of C171) st (ex B230 being set st (B229 <= C178 & B230 in ( C172 . B229 ) & C179 = ( root-tree [ B230 , B229 ] )))) or (ex B231 being (OperSymbol of C171) st ([ B231 , (the carrier of C171) ] = ( C179 . ( {} ) ) & ( the_result_sort_of B231 ) <= C178))) by L496;
thus L499: D107 <= C178 by L481 , L488 , L497 , L498 , XTUPLE_0:1;
end;
reconsider D108 = D107 , D109 = C178 as (Element of C171);
reconsider D110 = (the Sorts of D105) as (OrderSortedSet of C171);
assume L500: ( the_result_sort_of C174 ) <= C178;
L501: ( D110 . D108 ) c= ( D110 . D109 ) by L500 , OSALG_1:def 16;
L502: C173 in { B232 where B232 is (Element of ( TS ( DTConOSA C172 ) )) : ((ex B233 being (Element of C171) st (ex B234 being set st (B233 <= D107 & B234 in ( C172 . B233 ) & B232 = ( root-tree [ B234 , B233 ] )))) or (ex B235 being (OperSymbol of C171) st ([ B235 , (the carrier of C171) ] = ( B232 . ( {} ) ) & ( the_result_sort_of B235 ) <= D107))) } by L481;
L503: C173 in ( D110 . D107 ) by L502 , L452;
thus L504: thesis by L503 , L501;
end;
theorem
L505: (for B236 being OrderSortedSign holds (for B237 being  non-empty (ManySortedSet of B236) holds (for B238 being (Symbol of ( DTConOSA B237 )) holds (for B239 being (FinSequence of ( TS ( DTConOSA B237 ) )) holds (B238 ==> ( roots B239 ) implies (B238 in ( NonTerminals ( DTConOSA B237 ) ) & ( B238 -tree B239 ) in ( TS ( DTConOSA B237 ) ) & (ex B240 being (OperSymbol of B236) st (B238 = [ B240 , (the carrier of B236) ] & B239 in ( Args (B240 , ( ParsedTermsOSA B237 )) ) & ( B238 -tree B239 ) = ( ( Den (B240 , ( ParsedTermsOSA B237 )) ) . B239 ) & (for B241 being (Element of B236) holds (( B238 -tree B239 ) in ( (the Sorts of ( ParsedTermsOSA B237 )) . B241 ) iff ( the_result_sort_of B240 ) <= B241))))))))))
proof
let C180 being OrderSortedSign;
let C181 being  non-empty (ManySortedSet of C180);
let C182 being (Symbol of ( DTConOSA C181 ));
let C183 being (FinSequence of ( TS ( DTConOSA C181 ) ));
assume that
L506: C182 ==> ( roots C183 );
set D111 = ( DTConOSA C181 );
set D112 = ( ParsedTermsOSA C181 );
L507: C182 in { B242 where B242 is (Symbol of D111) : (ex B243 being FinSequence st B242 ==> B243) } by L506;
reconsider D113 = C182 as (NonTerminal of D111) by L507 , LANG1:def 3;
reconsider D114 = C183 as (SubtreeSeq of D113) by L506 , DTCONSTR:def 6;
thus L508: C182 in ( NonTerminals D111 ) by L507 , LANG1:def 3;
L509: C182 in [: (the carrier' of C180) , { (the carrier of C180) } :] by L508 , L58;
consider C184 , C185 being set such that L510: C184 in (the carrier' of C180) and L511: C185 in { (the carrier of C180) } and L512: C182 = [ C184 , C185 ] by L509 , ZFMISC_1:def 2;
L513: ( D113 -tree D114 ) in ( TS D111 );
thus L514: ( C182 -tree C183 ) in ( TS ( DTConOSA C181 ) ) by L513;
reconsider D115 = C184 as (OperSymbol of C180) by L510;
take D115;
thus L515: C182 = [ D115 , (the carrier of C180) ] by L511 , L512 , TARSKI:def 1;
L516: C185 = (the carrier of C180) by L511 , TARSKI:def 1;
L517: ( ( D113 -tree C183 ) . ( {} ) ) = [ D115 , (the carrier of C180) ] by L516 , L512 , TREES_4:def 4;
L518: (ex B244 being (SubtreeSeq of ( OSSym (D115 , C181) )) st (( D113 -tree D114 ) = ( ( OSSym (D115 , C181) ) -tree B244 ) & ( OSSym (D115 , C181) ) ==> ( roots B244 ) & B244 in ( Args (D115 , D112) ) & ( D113 -tree D114 ) = ( ( Den (D115 , D112) ) . B244 ))) by L517 , L480;
thus L519: thesis by L518 , L517 , L480 , TREES_4:15;
end;
theorem
L520: (for B245 being OrderSortedSign holds (for B246 being  non-empty (ManySortedSet of B245) holds (for B247 being (OperSymbol of B245) holds (for B248 being FinSequence holds (B248 in ( Args (B247 , ( ParsedTermsOSA B246 )) ) iff (B248 is (FinSequence of ( TS ( DTConOSA B246 ) )) & ( OSSym (B247 , B246) ) ==> ( roots B248 )))))))
proof
let C186 being OrderSortedSign;
let C187 being  non-empty (ManySortedSet of C186);
let C188 being (OperSymbol of C186);
let C189 being FinSequence;
set D116 = ( ParsedTermsOSA C187 );
thus L521:now
assume L522: C189 in ( Args (C188 , D116) );
L523: C189 in ( ( ( (the Sorts of D116) # ) * (the Arity of C186) ) . C188 ) by L522 , MSUALG_1:def 4;
thus L524: C189 is (FinSequence of ( TS ( DTConOSA C187 ) )) by L523 , L248;
L525: C189 in ( ( ( ( ParsedTerms C187 ) # ) * (the Arity of C186) ) . C188 ) by L522 , MSUALG_1:def 4;
reconsider D117 = C189 as (FinSequence of ( TS ( DTConOSA C187 ) )) by L525 , L248;
L526: ( OSSym (C188 , C187) ) ==> ( roots D117 ) by L523 , L288;
thus L527: ( OSSym (C188 , C187) ) ==> ( roots C189 ) by L526;
end;
assume that
L528: C189 is (FinSequence of ( TS ( DTConOSA C187 ) ))
and
L529: ( OSSym (C188 , C187) ) ==> ( roots C189 );
reconsider D118 = C189 as (FinSequence of ( TS ( DTConOSA C187 ) )) by L528;
L530: D118 in ( ( ( ( ParsedTerms C187 ) # ) * (the Arity of C186) ) . C188 ) by L529 , L288;
thus L531: thesis by L530 , MSUALG_1:def 4;
end;
definition
let C190 being OrderSortedSign;
let C191 being  non-empty (ManySortedSet of C190);
let C192 being (Element of ( TS ( DTConOSA C191 ) ));
func LeastSort C192 -> (SortSymbol of C190) means 
:L532: (C192 in ( (the Sorts of ( ParsedTermsOSA C191 )) . it ) & (for B249 being (Element of C190) holds (C192 in ( (the Sorts of ( ParsedTermsOSA C191 )) . B249 ) implies it <= B249)));
existence
proof
set D119 = ( DTConOSA C191 );
defpred S7[ set ] means (ex B250 being (SortSymbol of C190) st ($1 in ( (the Sorts of ( ParsedTermsOSA C191 )) . B250 ) & (for B251 being (Element of C190) holds ($1 in ( (the Sorts of ( ParsedTermsOSA C191 )) . B251 ) implies B250 <= B251))));
L533: (for B252 being (Symbol of D119) holds (for B253 being (FinSequence of ( TS D119 )) holds ((B252 ==> ( roots B253 ) & (for B254 being (DecoratedTree of (the carrier of D119)) holds (B254 in ( rng B253 ) implies S7[ B254 ]))) implies S7[ ( B252 -tree B253 ) ])))
proof
let C193 being (Symbol of D119);
let C194 being (FinSequence of ( TS D119 ));
assume that
L534: C193 ==> ( roots C194 )
and
L535: (for B255 being (DecoratedTree of (the carrier of D119)) holds (B255 in ( rng C194 ) implies S7[ B255 ]));
consider C195 being (OperSymbol of C190) such that L536: C193 = [ C195 , (the carrier of C190) ] and L537: C194 in ( Args (C195 , ( ParsedTermsOSA C191 )) ) and L538: ( C193 -tree C194 ) = ( ( Den (C195 , ( ParsedTermsOSA C191 )) ) . C194 ) and L539: (for B256 being (Element of C190) holds (( C193 -tree C194 ) in ( (the Sorts of ( ParsedTermsOSA C191 )) . B256 ) iff ( the_result_sort_of C195 ) <= B256)) by L534 , L505;
reconsider D120 = ( the_result_sort_of C195 ) as (SortSymbol of C190);
take D120;
thus L540: thesis by L539;
end;
L541: (for B257 being (Symbol of D119) holds (B257 in ( Terminals D119 ) implies S7[ ( root-tree B257 ) ]))
proof
let C196 being (Symbol of D119);
assume L542: C196 in ( Terminals D119 );
consider C197 being (Element of C190), C198 being set such that L543: C198 in ( C191 . C197 ) and L544: C196 = [ C198 , C197 ] by L542 , L189;
reconsider D121 = C197 as (SortSymbol of C190);
take D121;
thus L545: thesis by L543 , L544 , L455;
end;
L546: (for B258 being (DecoratedTree of (the carrier of D119)) holds (B258 in ( TS D119 ) implies S7[ B258 ])) from DTCONSTR:sch 7(L541 , L533);
thus L547: thesis by L546;
end;
uniqueness
proof
let C199 , C200 being (SortSymbol of C190);
assume that
L548: C192 in ( (the Sorts of ( ParsedTermsOSA C191 )) . C199 )
and
L549: (for B259 being (Element of C190) holds (C192 in ( (the Sorts of ( ParsedTermsOSA C191 )) . B259 ) implies C199 <= B259))
and
L550: C192 in ( (the Sorts of ( ParsedTermsOSA C191 )) . C200 )
and
L551: (for B260 being (Element of C190) holds (C192 in ( (the Sorts of ( ParsedTermsOSA C191 )) . B260 ) implies C200 <= B260));
L552: C199 <= C200 by L549 , L550;
L553: C200 <= C199 by L548 , L551;
thus L554: thesis by L553 , L552 , ORDERS_2:2;
end;
end;
definition
let C201 being non  empty non  void ManySortedSign;
let C202 being  non-empty MSAlgebra over C201;
mode Element of C202
 is (Element of ( Union (the Sorts of C202) ));
end;
theorem
L557: (for B261 being OrderSortedSign holds (for B262 being  non-empty (ManySortedSet of B261) holds (for B263 being set holds (B263 is (Element of ( ParsedTermsOSA B262 )) iff B263 is (Element of ( TS ( DTConOSA B262 ) ))))))
proof
let C203 being OrderSortedSign;
let C204 being  non-empty (ManySortedSet of C203);
let C205 being set;
L558: ( TS ( DTConOSA C204 ) ) = ( union ( rng ( ParsedTerms C204 ) ) ) by L360
.= ( Union (the Sorts of ( ParsedTermsOSA C204 )) ) by CARD_3:def 4;
thus L559: thesis by L558;
end;
theorem
L560: (for B264 being OrderSortedSign holds (for B265 being  non-empty (ManySortedSet of B264) holds (for B266 being (Element of B264) holds (for B267 being set holds (B267 in ( (the Sorts of ( ParsedTermsOSA B265 )) . B266 ) implies B267 is (Element of ( TS ( DTConOSA B265 ) )))))))
proof
let C206 being OrderSortedSign;
let C207 being  non-empty (ManySortedSet of C206);
let C208 being (Element of C206);
let C209 being set;
assume that
L561: C209 in ( (the Sorts of ( ParsedTermsOSA C207 )) . C208 );
set D122 = ( ParsedTermsOSA C207 );
set D123 = (the Sorts of D122);
L562: C208 in (the carrier of C206);
L563: C208 in ( dom D123 ) by L562 , PARTFUN1:def 2;
L564: ( D123 . C208 ) in ( rng D123 ) by L563 , FUNCT_1:def 3;
L565: C209 in ( union ( rng D123 ) ) by L564 , L561 , TARSKI:def 4;
reconsider D124 = C209 as (Element of ( Union D123 )) by L565 , CARD_3:def 4;
L566: D124 is (Element of D122);
thus L567: thesis by L566 , L557;
end;
theorem
L568: (for B268 being OrderSortedSign holds (for B269 being  non-empty (ManySortedSet of B268) holds (for B270 being (Element of B268) holds (for B271 being set holds (B271 in ( B269 . B270 ) implies (for B272 being (Element of ( TS ( DTConOSA B269 ) )) holds (B272 = ( root-tree [ B271 , B270 ] ) implies ( LeastSort B272 ) = B270)))))))
proof
let C210 being OrderSortedSign;
let C211 being  non-empty (ManySortedSet of C210);
let C212 being (Element of C210);
let C213 being set;
assume that
L569: C213 in ( C211 . C212 );
reconsider D125 = C212 as (Element of C210);
let C214 being (Element of ( TS ( DTConOSA C211 ) ));
assume that
L570: C214 = ( root-tree [ C213 , C212 ] );
L571: (for B273 being (Element of C210) holds (C214 in ( (the Sorts of ( ParsedTermsOSA C211 )) . B273 ) implies D125 <= B273)) by L569 , L570 , L455;
L572: C214 in ( (the Sorts of ( ParsedTermsOSA C211 )) . D125 ) by L569 , L570 , L455;
thus L573: thesis by L572 , L571 , L532;
end;
theorem
L574: (for B274 being OrderSortedSign holds (for B275 being  non-empty (ManySortedSet of B274) holds (for B276 being (OperSymbol of B274) holds (for B277 being (Element of ( Args (B276 , ( ParsedTermsOSA B275 )) )) holds (for B278 being (Element of ( TS ( DTConOSA B275 ) )) holds (B278 = ( ( Den (B276 , ( ParsedTermsOSA B275 )) ) . B277 ) implies ( LeastSort B278 ) = ( the_result_sort_of B276 )))))))
proof
let C215 being OrderSortedSign;
let C216 being  non-empty (ManySortedSet of C215);
let C217 being (OperSymbol of C215);
let C218 being (Element of ( Args (C217 , ( ParsedTermsOSA C216 )) ));
reconsider D126 = C218 as (FinSequence of ( TS ( DTConOSA C216 ) )) by L520;
set D127 = ( ParsedTermsOSA C216 );
let C219 being (Element of ( TS ( DTConOSA C216 ) ));
assume that
L575: C219 = ( ( Den (C217 , ( ParsedTermsOSA C216 )) ) . C218 );
L576: ( OSSym (C217 , C216) ) ==> ( roots C218 ) by L520;
consider C220 being (OperSymbol of C215) such that L577: ( OSSym (C217 , C216) ) = [ C220 , (the carrier of C215) ] and L578: D126 in ( Args (C220 , ( ParsedTermsOSA C216 )) ) and L579: ( ( OSSym (C217 , C216) ) -tree D126 ) = ( ( Den (C220 , ( ParsedTermsOSA C216 )) ) . D126 ) and L580: (for B279 being (Element of C215) holds (( ( OSSym (C217 , C216) ) -tree D126 ) in ( (the Sorts of ( ParsedTermsOSA C216 )) . B279 ) iff ( the_result_sort_of C220 ) <= B279)) by L576 , L505;
L581: C217 = C220 by L577 , XTUPLE_0:1;
L582: C219 in ( (the Sorts of D127) . ( the_result_sort_of C217 ) ) by L581 , L575 , L579 , L580;
thus L583: thesis by L582 , L575 , L579 , L580 , L581 , L532;
end;
registration
let C221 being OrderSortedSign;
let C222 being  non-empty (ManySortedSet of C221);
let C223 being (OperSymbol of C221);
cluster ( Args (C223 , ( ParsedTermsOSA C222 )) ) -> non  empty;
coherence;
end;
definition
let C224 being  locally_directed OrderSortedSign;
let C225 being  non-empty (ManySortedSet of C224);
let C226 being (FinSequence of ( TS ( DTConOSA C225 ) ));
func LeastSorts C226 -> (Element of ( (the carrier of C224) * )) means 
:L585: (( dom it ) = ( dom C226 ) & (for B280 being Nat holds (B280 in ( dom C226 ) implies (ex B281 being (Element of ( TS ( DTConOSA C225 ) )) st (B281 = ( C226 . B280 ) & ( it . B280 ) = ( LeastSort B281 ))))));
existence
proof
set D128 = ( DTConOSA C225 );
defpred S8[ set , set ] means (ex B282 being (Element of ( TS D128 )) st (B282 = $1 & ( LeastSort B282 ) = $2));
L586: ( rng C226 ) c= ( TS D128 ) by FINSEQ_1:def 4;
L587: (for B283 being set holds (B283 in ( TS D128 ) implies (ex B284 being set st (B284 in (the carrier of C224) & S8[ B283 , B284 ]))))
proof
let C227 being set;
assume L588: C227 in ( TS D128 );
reconsider D129 = C227 as (Element of ( TS D128 )) by L588;
take ( LeastSort D129 );
thus L589: ( LeastSort D129 ) in (the carrier of C224);
take D129;
thus L590: thesis;
end;
consider C228 being (Function of ( TS D128 ) , (the carrier of C224)) such that L591: (for B285 being set holds (B285 in ( TS D128 ) implies S8[ B285 , ( C228 . B285 ) ])) from FUNCT_2:sch 1(L587);
take ( C228 * C226 );
thus L592: ( dom ( C228 * C226 ) ) = ( dom C226 ) by FINSEQ_3:120;
let C229 being Nat;
assume that
L593: C229 in ( dom C226 );
L594: ( C226 . C229 ) in ( rng C226 ) by L593 , FUNCT_1:3;
reconsider D130 = ( C226 . C229 ) as (Element of ( TS D128 )) by L594 , L586;
take D130;
thus L595: D130 = ( C226 . C229 );
L596: (ex B286 being (Element of ( TS D128 )) st (B286 = D130 & ( LeastSort B286 ) = ( C228 . D130 ))) by L591;
L597: C229 in ( dom ( C228 * C226 ) ) by L593 , FINSEQ_3:120;
thus L598: thesis by L597 , L596 , FINSEQ_3:120;
end;
uniqueness
proof
set D131 = ( DTConOSA C225 );
let C230 , C231 being (Element of ( (the carrier of C224) * ));
assume that
L599: ( dom C230 ) = ( dom C226 )
and
L600: (for B287 being Nat holds (B287 in ( dom C226 ) implies (ex B288 being (Element of ( TS ( DTConOSA C225 ) )) st (B288 = ( C226 . B287 ) & ( C230 . B287 ) = ( LeastSort B288 )))))
and
L601: ( dom C231 ) = ( dom C226 )
and
L602: (for B289 being Nat holds (B289 in ( dom C226 ) implies (ex B290 being (Element of ( TS ( DTConOSA C225 ) )) st (B290 = ( C226 . B289 ) & ( C231 . B289 ) = ( LeastSort B290 )))));
L603: (for B291 being Nat holds (B291 in ( dom C230 ) implies ( C230 . B291 ) = ( C231 . B291 )))
proof
let C232 being Nat;
assume that
L604: C232 in ( dom C230 );
L605: (ex B292 being (Element of ( TS D131 )) st (B292 = ( C226 . C232 ) & ( C231 . C232 ) = ( LeastSort B292 ))) by L599 , L602 , L604;
L606: (ex B293 being (Element of ( TS D131 )) st (B293 = ( C226 . C232 ) & ( C230 . C232 ) = ( LeastSort B293 ))) by L599 , L600 , L604;
thus L607: thesis by L606 , L605;
end;
thus L608: thesis by L603 , L599 , L601 , FINSEQ_1:13;
end;
end;
theorem
L610: (for B294 being  locally_directed OrderSortedSign holds (for B295 being  non-empty (ManySortedSet of B294) holds (for B296 being (OperSymbol of B294) holds (for B297 being (FinSequence of ( TS ( DTConOSA B295 ) )) holds (( LeastSorts B297 ) <= ( the_arity_of B296 ) iff B297 in ( Args (B296 , ( ParsedTermsOSA B295 )) ))))))
proof
let C233 being  locally_directed OrderSortedSign;
let C234 being  non-empty (ManySortedSet of C233);
let C235 being (OperSymbol of C233);
let C236 being (FinSequence of ( TS ( DTConOSA C234 ) ));
set D132 = ( ParsedTermsOSA C234 );
set D133 = ( DTConOSA C234 );
set D134 = ( the_arity_of C235 );
set D135 = ( LeastSorts C236 );
reconsider D136 = (the Sorts of D132) as (OrderSortedSet of C233);
L611: ( dom D135 ) = ( dom C236 ) by L585;
thus L612:now
assume L613: ( LeastSorts C236 ) <= D134;
L614: ( len D135 ) = ( len D134 ) by L613 , OSALG_1:def 6;
L615: ( dom D135 ) = ( dom D134 ) by L614 , FINSEQ_3:29;
L616: (for B298 being Nat holds (B298 in ( dom C236 ) implies ( C236 . B298 ) in ( (the Sorts of D132) . ( D134 /. B298 ) )))
proof
let C237 being Nat;
assume that
L617: C237 in ( dom C236 );
consider C238 being (Element of ( TS ( DTConOSA C234 ) )) such that L618: C238 = ( C236 . C237 ) and L619: ( D135 . C237 ) = ( LeastSort C238 ) by L617 , L585;
reconsider D137 = ( D134 /. C237 ) as (Element of C233);
L620: ( D134 /. C237 ) = ( D134 . C237 ) by L611 , L615 , L617 , PARTFUN1:def 6;
L621: ( LeastSort C238 ) <= D137 by L620 , L611 , L613 , L617 , L619 , OSALG_1:def 6;
L622: ( D136 . ( LeastSort C238 ) ) c= ( D136 . D137 ) by L621 , OSALG_1:def 16;
L623: C238 in ( (the Sorts of D132) . ( LeastSort C238 ) ) by L532;
thus L624: thesis by L623 , L618 , L622;
end;
L625: ( len C236 ) = ( len D134 ) by L611 , L614 , FINSEQ_3:29;
thus L626: C236 in ( Args (C235 , D132) ) by L625 , L616 , MSAFREE2:5;
end;
assume L627: C236 in ( Args (C235 , D132) );
L628: ( dom C236 ) = ( dom D134 ) by L627 , MSUALG_6:2;
thus L629: ( len D135 ) = ( len D134 ) by L628 , L611 , FINSEQ_3:29;
let C239 being set;
assume that
L630: C239 in ( dom D135 );
reconsider D138 = C239 as Nat by L630;
L631: C239 in ( dom D134 ) by L628 , L630 , L585;
L632: ( C236 . D138 ) in ( (the Sorts of D132) . ( D134 /. D138 ) ) by L631 , L627 , MSUALG_6:2;
L633: C239 in ( dom C236 ) by L630 , L585;
L634: (ex B299 being (Element of ( TS D133 )) st (B299 = ( C236 . D138 ) & ( D135 . D138 ) = ( LeastSort B299 ))) by L633 , L585;
let C240 , C241 being (Element of C233);
assume that
L635: C240 = ( D135 . C239 )
and
L636: C241 = ( D134 . C239 );
L637: ( D134 /. D138 ) = ( D134 . D138 ) by L611 , L628 , L630 , PARTFUN1:def 6;
thus L638: thesis by L637 , L635 , L636 , L634 , L632 , L532;
end;
registration
cluster  locally_directed  regular for  monotone  monotone  monotone  monotone OrderSortedSign;
existence
proof
set D139 = the  discrete  op-discrete OrderSortedSign;
take D139;
thus L639: thesis;
end;
end;
definition
let C242 being  locally_directed  regular  monotone OrderSortedSign;
let C243 being  non-empty (ManySortedSet of C242);
let C244 being (OperSymbol of C242);
let C245 being (FinSequence of ( TS ( DTConOSA C243 ) ));
assume L641: ( OSSym (( LBound (C244 , ( LeastSorts C245 )) ) , C243) ) ==> ( roots C245 );
func pi (C244 , C245) -> (Element of ( TS ( DTConOSA C243 ) )) equals 
:L642: ( ( OSSym (( LBound (C244 , ( LeastSorts C245 )) ) , C243) ) -tree C245 );
correctness by L641 , L505;
end;
definition
let C246 being  locally_directed OrderSortedSign;
let C247 being  non-empty (ManySortedSet of C246);
let C248 being (Symbol of ( DTConOSA C247 ));
assume L644: (ex B300 being FinSequence st C248 ==> B300);
func @ (C247 , C248) -> (OperSymbol of C246) means 
:L645: [ it , (the carrier of C246) ] = C248;
existence
proof
set D140 = ( DTConOSA C247 );
set D141 = ( [: (the carrier' of C246) , { (the carrier of C246) } :] \/ ( Union ( coprod (C247 qua (ManySortedSet of C246)) ) ) );
reconsider D142 = C248 as (Element of D141);
consider C249 being FinSequence such that L646: C248 ==> C249 by L644;
L647: [ C248 , C249 ] in (the Rules of D140) by L646 , LANG1:def 1;
reconsider D143 = C249 as (Element of ( D141 * )) by L647 , ZFMISC_1:87;
L648: [ D142 , D143 ] in ( OSREL C247 ) by L646 , LANG1:def 1;
L649: D142 in [: (the carrier' of C246) , { (the carrier of C246) } :] by L648 , L21;
consider C250 being (Element of (the carrier' of C246)), C251 being (Element of { (the carrier of C246) }) such that L650: D142 = [ C250 , C251 ] by L649 , DOMAIN_1:1;
take C250;
thus L651: thesis by L650 , TARSKI:def 1;
end;
uniqueness by XTUPLE_0:1;
end;
definition
let C252 being OrderSortedSign;
let C253 being  non-empty (ManySortedSet of C252);
let C254 being (Symbol of ( DTConOSA C253 ));
assume L653: C254 in ( Terminals ( DTConOSA C253 ) );
func pi C254 -> (Element of ( TS ( DTConOSA C253 ) )) equals 
:L654: ( root-tree C254 );
correctness by L653 , DTCONSTR:def 1;
end;
definition
let C255 being  locally_directed OrderSortedSign;
let C256 being  non-empty (ManySortedSet of C255);
func LCongruence C256 ->  monotone (OSCongruence of ( ParsedTermsOSA C256 )) means 
:L656: (for B301 being  monotone (OSCongruence of ( ParsedTermsOSA C256 )) holds it c= B301);
existence
proof
set D144 = ( ParsedTermsOSA C256 );
set D145 = ( DTConOSA C256 );
set D146 = (the Sorts of D144);
defpred S9[ set , set , set ] means (for B302 being  monotone (OSCongruence of D144) holds [ $1 , $2 ] in ( B302 . $3 ));
deffunc H3(set) = { [ B303 , B304 ] where B303 , B304 is (Element of ( TS D145 )) : (B303 in ( D146 . $1 ) & B304 in ( D146 . $1 ) & (for B305 being  monotone (OSCongruence of D144) holds [ B303 , B304 ] in ( B305 . $1 ))) };
consider C257 being (ManySortedSet of (the carrier of C255)) such that L657: (for B306 being set holds (B306 in (the carrier of C255) implies ( C257 . B306 ) = H3(B306))) from PBOOLE:sch 4;
L658: (for B307 being set holds (B307 in (the carrier of C255) implies ( C257 . B307 ) is (Equivalence_Relation of ( D146 . B307 ))))
proof
let C258 being set;
assume that
L659: C258 in (the carrier of C255);
reconsider D147 = C258 as (Element of C255) by L659;
L660: ( C257 . C258 ) = { [ B308 , B309 ] where B308 , B309 is (Element of ( TS D145 )) : (B308 in ( D146 . C258 ) & B309 in ( D146 . C258 ) & (for B310 being  monotone (OSCongruence of D144) holds [ B308 , B309 ] in ( B310 . C258 ))) } by L657 , L659;
L661:
now
let C259 being set;
assume L662: C259 in ( C257 . C258 );
L663: (ex B311 , B312 being (Element of ( TS D145 )) st (C259 = [ B311 , B312 ] & B311 in ( D146 . C258 ) & B312 in ( D146 . C258 ) & S9[ B311 , B312 , C258 ])) by L662 , L660;
thus L664: C259 in [: ( D146 . C258 ) , ( D146 . C258 ) :] by L663 , ZFMISC_1:87;
end;
reconsider D148 = ( C257 . C258 ) as (Relation of ( D146 . C258 )) by L661 , TARSKI:def 3;
L665:
now
let C260 , C261 , C262 being set;
assume that
L666: C260 in ( D146 . D147 )
and
L667: C261 in ( D146 . D147 )
and
L668: C262 in ( D146 . D147 )
and
L669: [ C260 , C261 ] in D148
and
L670: [ C261 , C262 ] in D148;
thus L671: [ C260 , C262 ] in D148
proof
reconsider D149 = C260 , D150 = C261 , D151 = C262 as (Element of ( TS D145 )) by L666 , L667 , L668 , L560;
L672: (ex B313 , B314 being (Element of ( TS D145 )) st ([ D150 , D151 ] = [ B313 , B314 ] & B313 in ( D146 . C258 ) & B314 in ( D146 . C258 ) & S9[ B313 , B314 , C258 ])) by L660 , L670;
L673: (ex B315 , B316 being (Element of ( TS D145 )) st ([ D149 , D150 ] = [ B315 , B316 ] & B315 in ( D146 . C258 ) & B316 in ( D146 . C258 ) & S9[ B315 , B316 , C258 ])) by L660 , L669;
L674:
now
let C263 being  monotone (OSCongruence of D144);
L675: [ D150 , D151 ] in ( C263 . D147 ) by L672;
L676: ( field ( C263 . D147 ) ) = ( D146 . D147 ) by ORDERS_1:12;
L677: ( C263 . D147 ) is_transitive_in ( D146 . D147 ) by L676 , RELAT_2:def 16;
L678: [ D149 , D150 ] in ( C263 . D147 ) by L673;
thus L679: [ D149 , D151 ] in ( C263 . D147 ) by L678 , L666 , L667 , L668 , L675 , L677 , RELAT_2:def 8;
end;
thus L680: thesis by L674 , L660 , L666 , L668;
end;

end;
L672: D148 is_transitive_in ( D146 . D147 ) by L665 , RELAT_2:def 8;
L673:
now
let C264 , C265 being set;
assume that
L674: C264 in ( D146 . D147 )
and
L675: C265 in ( D146 . D147 )
and
L676: [ C264 , C265 ] in D148;
thus L677: [ C265 , C264 ] in D148
proof
reconsider D152 = C264 , D153 = C265 as (Element of ( TS D145 )) by L674 , L675 , L560;
L678: (ex B317 , B318 being (Element of ( TS D145 )) st ([ D152 , D153 ] = [ B317 , B318 ] & B317 in ( D146 . C258 ) & B318 in ( D146 . C258 ) & S9[ B317 , B318 , C258 ])) by L660 , L676;
L679:
now
let C266 being  monotone (OSCongruence of D144);
L680: ( field ( C266 . D147 ) ) = ( D146 . D147 ) by ORDERS_1:12;
L681: ( C266 . D147 ) is_symmetric_in ( D146 . D147 ) by L680 , RELAT_2:def 11;
L682: [ D152 , D153 ] in ( C266 . D147 ) by L678;
thus L683: [ D153 , D152 ] in ( C266 . D147 ) by L682 , L674 , L675 , L681 , RELAT_2:def 3;
end;
thus L684: thesis by L679 , L660 , L674 , L675;
end;

end;
L678: D148 is_symmetric_in ( D146 . D147 ) by L673 , RELAT_2:def 3;
L679:
now
let C267 being set;
assume that
L680: C267 in ( D146 . D147 );
thus L681: [ C267 , C267 ] in D148
proof
reconsider D154 = C267 as (Element of ( TS D145 )) by L680 , L560;
L682:
now
let C268 being  monotone (OSCongruence of D144);
L683: ( field ( C268 . D147 ) ) = ( D146 . D147 ) by ORDERS_1:12;
L684: ( C268 . D147 ) is_reflexive_in ( D146 . D147 ) by L683 , RELAT_2:def 9;
thus L685: [ D154 , D154 ] in ( C268 . D147 ) by L684 , L680 , RELAT_2:def 1;
end;
thus L686: thesis by L682 , L660 , L680;
end;

end;
L682: D148 is_reflexive_in ( D146 . D147 ) by L679 , RELAT_2:def 1;
L683: ( field D148 ) = ( D146 . D147 ) by L682 , ORDERS_1:13;
L684: ( dom D148 ) = ( D146 . D147 ) by L682 , ORDERS_1:13;
thus L685: thesis by L684 , L683 , L678 , L672 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
end;
L686: (for B319 being set holds (B319 in (the carrier of C255) implies ( C257 . B319 ) is (Relation of ( D146 . B319 ) , ( D146 . B319 )))) by L658;
reconsider D155 = C257 as (ManySortedRelation of (the Sorts of D144)) by L686 , MSUALG_4:def 1;
reconsider D156 = D155 as (ManySortedRelation of D144);
L687: (for B320 being set holds (for B321 being (Relation of ( D146 . B320 )) holds ((B320 in (the carrier of C255) & ( D156 . B320 ) = B321) implies B321 is (Equivalence_Relation of ( D146 . B320 ))))) by L658;
L688: D156 is  MSEquivalence_Relation-like by L687 , MSUALG_4:def 2;
reconsider D157 = D156 as  MSEquivalence-like (ManySortedRelation of D144) by L688 , MSUALG_4:def 3;
L689: D157 is  os-compatible
proof
let C269 , C270 being (Element of C255);
assume that
L690: C269 <= C270;
L691: ( D157 . C269 ) = { [ B322 , B323 ] where B322 , B323 is (Element of ( TS D145 )) : (B322 in ( D146 . C269 ) & B323 in ( D146 . C269 ) & S9[ B322 , B323 , C269 ]) } by L657;
L692: ( D157 . C270 ) = { [ B324 , B325 ] where B324 , B325 is (Element of ( TS D145 )) : (B324 in ( D146 . C270 ) & B325 in ( D146 . C270 ) & S9[ B324 , B325 , C270 ]) } by L657;
let C271 , C272 being set;
assume that
L693: C271 in ( D146 . C269 )
and
L694: C272 in ( D146 . C269 );
thus L695:now
assume L696: [ C271 , C272 ] in ( D157 . C269 );
consider C273 , C274 being (Element of ( TS D145 )) such that L697: [ C271 , C272 ] = [ C273 , C274 ] and L698: C273 in ( D146 . C269 ) and L699: C274 in ( D146 . C269 ) and L700: S9[ C273 , C274 , C269 ] by L696 , L691;
L701:
now
let C275 being  monotone (OSCongruence of D144);
L702: C275 is  os-compatible by OSALG_4:def 2;
L703: [ C273 , C274 ] in ( C275 . C269 ) by L700;
L704: [ C273 , C274 ] in ( C275 . C270 ) by L703 , L690 , L698 , L699 , L702 , OSALG_4:def 1;
thus L705: (C273 in ( D146 . C270 ) & C274 in ( D146 . C270 ) & [ C273 , C274 ] in ( C275 . C270 )) by L704 , ZFMISC_1:87;
end;
thus L706: [ C271 , C272 ] in ( D157 . C270 ) by L701 , L692 , L697;
end;
assume L707: [ C271 , C272 ] in ( D157 . C270 );
consider C276 , C277 being (Element of ( TS D145 )) such that L708: [ C271 , C272 ] = [ C276 , C277 ] and L709: C276 in ( D146 . C270 ) and L710: C277 in ( D146 . C270 ) and L711: S9[ C276 , C277 , C270 ] by L707 , L692;
L712: C272 = C277 by L708 , XTUPLE_0:1;
L713:
now
let C278 being  monotone (OSCongruence of D144);
L714: C278 is  os-compatible by OSALG_4:def 2;
L715: [ C276 , C277 ] in ( C278 . C270 ) by L711;
thus L716: [ C276 , C277 ] in ( C278 . C269 ) by L715 , L690 , L693 , L694 , L708 , L714 , OSALG_4:def 1;
end;
L717: C271 = C276 by L708 , XTUPLE_0:1;
thus L718: [ C271 , C272 ] in ( D157 . C269 ) by L717 , L691 , L693 , L694 , L712 , L713;
end;
reconsider D158 = D157 as  MSEquivalence-like (OrderSortedRelation of D144) by L689 , OSALG_4:def 2;
L719: D158 is  monotone
proof
let C279 , C280 being (OperSymbol of C255);
assume that
L720: C279 <= C280;
set D159 = ( the_arity_of C280 );
set D160 = ( the_result_sort_of C280 );
let C281 being (Element of ( Args (C279 , D144) ));
let C282 being (Element of ( Args (C280 , D144) ));
assume that
L721: (for B326 being Nat holds (B326 in ( dom C281 ) implies [ ( C281 . B326 ) , ( C282 . B326 ) ] in ( D158 . ( D159 /. B326 ) )));
set D161 = ( ( Den (C279 , D144) ) . C281 );
set D162 = ( ( Den (C280 , D144) ) . C282 );
L722:
now
let C283 being  monotone (OSCongruence of D144);
L723:
now
let C284 being Nat;
assume L724: C284 in ( dom C281 );
L725: [ ( C281 . C284 ) , ( C282 . C284 ) ] in ( D158 . ( D159 /. C284 ) ) by L724 , L721;
L726: ( D158 . ( D159 /. C284 ) ) = { [ B327 , B328 ] where B327 , B328 is (Element of ( TS D145 )) : (B327 in ( D146 . ( D159 /. C284 ) ) & B328 in ( D146 . ( D159 /. C284 ) ) & S9[ B327 , B328 , ( D159 /. C284 ) ]) } by L657;
L727: (ex B329 , B330 being (Element of ( TS D145 )) st ([ ( C281 . C284 ) , ( C282 . C284 ) ] = [ B329 , B330 ] & B329 in ( D146 . ( D159 /. C284 ) ) & B330 in ( D146 . ( D159 /. C284 ) ) & S9[ B329 , B330 , ( D159 /. C284 ) ])) by L726 , L725;
thus L728: [ ( C281 . C284 ) , ( C282 . C284 ) ] in ( C283 . ( D159 /. C284 ) ) by L727;
end;
L729: [ D161 , D162 ] in ( C283 . D160 ) by L723 , L720 , OSALG_4:def 26;
L730: D162 in ( D146 . D160 ) by L729 , ZFMISC_1:87;
L731: D161 in ( D146 . D160 ) by L729 , ZFMISC_1:87;
thus L732: (D161 in ( D146 . D160 ) & D162 in ( D146 . D160 ) & [ D161 , D162 ] in ( C283 . D160 ) & D161 is (Element of ( TS D145 )) & D162 is (Element of ( TS D145 ))) by L731 , L720 , L723 , L730 , L560 , OSALG_4:def 26;
end;
L733: ( D158 . D160 ) = { [ B331 , B332 ] where B331 , B332 is (Element of ( TS D145 )) : (B331 in ( D146 . D160 ) & B332 in ( D146 . D160 ) & S9[ B331 , B332 , D160 ]) } by L657;
thus L734: thesis by L733 , L722;
end;
reconsider D163 = D158 as  monotone  MSEquivalence-like (OrderSortedRelation of D144) by L719;
take D163;
let C285 being  monotone (OSCongruence of D144);
let C286 being set;
assume L735: C286 in (the carrier of C255);
reconsider D164 = C286 as (Element of C255) by L735;
L736: ( D163 . D164 ) = { [ B333 , B334 ] where B333 , B334 is (Element of ( TS D145 )) : (B333 in ( D146 . D164 ) & B334 in ( D146 . D164 ) & S9[ B333 , B334 , D164 ]) } by L657;
let C287 being set;
assume L737: C287 in ( D163 . C286 );
L738: (ex B335 , B336 being (Element of ( TS D145 )) st (C287 = [ B335 , B336 ] & B335 in ( D146 . D164 ) & B336 in ( D146 . D164 ) & S9[ B335 , B336 , D164 ])) by L737 , L736;
thus L739: thesis by L738;
end;
uniqueness
proof
set D165 = ( ParsedTermsOSA C256 );
let C288 , C289 being  monotone (OSCongruence of D165);
assume that
L740: (for B337 being  monotone (OSCongruence of ( ParsedTermsOSA C256 )) holds C288 c= B337)
and
L741: (for B338 being  monotone (OSCongruence of ( ParsedTermsOSA C256 )) holds C289 c= B338);
L742: C289 c= C288 by L741;
L743: C288 c= C289 by L740;
thus L744: thesis by L743 , L742 , PBOOLE:146;
end;
end;
definition
let C290 being  locally_directed OrderSortedSign;
let C291 being  non-empty (ManySortedSet of C290);
func FreeOSA C291 ->  strict  non-empty  monotone (OSAlgebra of C290) equals 
( QuotOSAlg (( ParsedTermsOSA C291 ) , ( LCongruence C291 )) );
correctness;
end;
definition
let C292 being OrderSortedSign;
let C293 being  non-empty (ManySortedSet of C292);
let C294 being (Symbol of ( DTConOSA C293 ));
func @ C294 -> (Subset of [: ( TS ( DTConOSA C293 ) ) , (the carrier of C292) :]) equals 
{ [ ( root-tree C294 ) , B339 ] where B339 is (Element of C292) : (ex B340 being (Element of C292) st (ex B341 being set st (B341 in ( C293 . B340 ) & C294 = [ B341 , B340 ] & B340 <= B339))) };
correctness
proof
set D166 = { [ ( root-tree C294 ) , B342 ] where B342 is (Element of C292) : (ex B343 being (Element of C292) st (ex B344 being set st (B344 in ( C293 . B343 ) & C294 = [ B344 , B343 ] & B343 <= B342))) };
L747: D166 c= [: ( TS ( DTConOSA C293 ) ) , (the carrier of C292) :]
proof
let C295 being set;
assume L748: C295 in D166;
consider C296 being (Element of C292) such that L749: C295 = [ ( root-tree C294 ) , C296 ] and L750: (ex B345 being (Element of C292) st (ex B346 being set st (B346 in ( C293 . B345 ) & C294 = [ B346 , B345 ] & B345 <= C296))) by L748;
consider C297 being (Element of C292), C298 being set such that L751: C298 in ( C293 . C297 ) and L752: C294 = [ C298 , C297 ] and L753: C297 <= C296 by L750;
L754: ( root-tree [ C298 , C297 ] ) is (Element of ( TS ( DTConOSA C293 ) )) by L751 , L455;
thus L755: thesis by L754 , L749 , L752 , ZFMISC_1:def 2;
end;
thus L756: thesis by L747;
end;
end;
definition
let C299 being OrderSortedSign;
let C300 being  non-empty (ManySortedSet of C299);
let C301 being (Symbol of ( DTConOSA C300 ));
let C302 being (FinSequence of ( bool [: ( TS ( DTConOSA C300 ) ) , (the carrier of C299) :] ));
func @ (C301 , C302) -> (Subset of [: ( TS ( DTConOSA C300 ) ) , (the carrier of C299) :]) equals 
{ [ ( ( Den (B347 , ( ParsedTermsOSA C300 )) ) . B348 ) , B349 ] where B347 is (OperSymbol of C299) , B348 is (Element of ( Args (B347 , ( ParsedTermsOSA C300 )) )) , B349 is (Element of C299) : ((ex B350 being (OperSymbol of C299) st (C301 = [ B350 , (the carrier of C299) ] & B350 ~= B347 & ( len ( the_arity_of B350 ) ) = ( len ( the_arity_of B347 ) ) & ( the_result_sort_of B350 ) <= B349 & ( the_result_sort_of B347 ) <= B349)) & (ex B351 being (Element of ( (the carrier of C299) * )) st (( dom B351 ) = ( dom C302 ) & (for B352 being Nat holds (B352 in ( dom C302 ) implies [ ( B348 . B352 ) , ( B351 /. B352 ) ] in ( C302 . B352 )))))) };
correctness
proof
set D167 = { [ ( ( Den (B353 , ( ParsedTermsOSA C300 )) ) . B354 ) , B355 ] where B353 is (OperSymbol of C299) , B354 is (Element of ( Args (B353 , ( ParsedTermsOSA C300 )) )) , B355 is (Element of C299) : ((ex B356 being (OperSymbol of C299) st (C301 = [ B356 , (the carrier of C299) ] & B356 ~= B353 & ( len ( the_arity_of B356 ) ) = ( len ( the_arity_of B353 ) ) & ( the_result_sort_of B356 ) <= B355 & ( the_result_sort_of B353 ) <= B355)) & (ex B357 being (Element of ( (the carrier of C299) * )) st (( dom B357 ) = ( dom C302 ) & (for B358 being Nat holds (B358 in ( dom C302 ) implies [ ( B354 . B358 ) , ( B357 /. B358 ) ] in ( C302 . B358 )))))) };
L758: D167 c= [: ( TS ( DTConOSA C300 ) ) , (the carrier of C299) :]
proof
let C303 being set;
assume L759: C303 in D167;
consider C304 being (OperSymbol of C299), C305 being (Element of ( Args (C304 , ( ParsedTermsOSA C300 )) )), C306 being (Element of C299) such that L760: C303 = [ ( ( Den (C304 , ( ParsedTermsOSA C300 )) ) . C305 ) , C306 ] and L761: (ex B359 being (OperSymbol of C299) st (C301 = [ B359 , (the carrier of C299) ] & B359 ~= C304 & ( len ( the_arity_of B359 ) ) = ( len ( the_arity_of C304 ) ) & ( the_result_sort_of B359 ) <= C306 & ( the_result_sort_of C304 ) <= C306)) and L762: (ex B360 being (Element of ( (the carrier of C299) * )) st (( dom B360 ) = ( dom C302 ) & (for B361 being Nat holds (B361 in ( dom C302 ) implies [ ( C305 . B361 ) , ( B360 /. B361 ) ] in ( C302 . B361 ))))) by L759;
L763: ( OSSym (C304 , C300) ) ==> ( roots C305 ) by L520;
L764: C305 is (FinSequence of ( TS ( DTConOSA C300 ) )) by L520;
L765: ( ( OSSym (C304 , C300) ) -tree C305 ) in ( TS ( DTConOSA C300 ) ) by L764 , L763 , L505;
consider C307 being (OperSymbol of C299) such that L766: ( OSSym (C304 , C300) ) = [ C307 , (the carrier of C299) ] and L767: C305 in ( Args (C307 , ( ParsedTermsOSA C300 )) ) and L768: ( ( OSSym (C304 , C300) ) -tree C305 ) = ( ( Den (C307 , ( ParsedTermsOSA C300 )) ) . C305 ) and L769: (for B362 being (Element of C299) holds (( ( OSSym (C304 , C300) ) -tree C305 ) in ( (the Sorts of ( ParsedTermsOSA C300 )) . B362 ) iff ( the_result_sort_of C307 ) <= B362)) by L764 , L763 , L505;
L770: C304 = C307 by L766 , XTUPLE_0:1;
thus L771: thesis by L770 , L760 , L765 , L768 , ZFMISC_1:def 2;
end;
thus L772: thesis by L758;
end;
end;
definition
let C308 being  locally_directed OrderSortedSign;
let C309 being  non-empty (ManySortedSet of C308);
func PTClasses C309 -> (Function of ( TS ( DTConOSA C309 ) ) , ( bool [: ( TS ( DTConOSA C309 ) ) , (the carrier of C308) :] )) means 
:L774: ((for B363 being (Symbol of ( DTConOSA C309 )) holds (B363 in ( Terminals ( DTConOSA C309 ) ) implies ( it . ( root-tree B363 ) ) = ( @ B363 ))) & (for B364 being (Symbol of ( DTConOSA C309 )) holds (for B365 being (FinSequence of ( TS ( DTConOSA C309 ) )) holds (B364 ==> ( roots B365 ) implies ( it . ( B364 -tree B365 ) ) = ( @ (B364 , ( it * B365 )) )))));
existence
proof
set D168 = ( DTConOSA C309 );
set D169 = ( bool [: ( TS ( DTConOSA C309 ) ) , (the carrier of C308) :] );
deffunc H4((Symbol of D168)) = ( @ $1 );
deffunc H5((Symbol of D168) , set , (FinSequence of D169)) = ( @ ($1 , $3) );
thus L775: (ex B366 being (Function of ( TS D168 ) , D169) st ((for B367 being (Symbol of D168) holds (B367 in ( Terminals D168 ) implies ( B366 . ( root-tree B367 ) ) = H4(B367))) & (for B368 being (Symbol of D168) holds (for B369 being (FinSequence of ( TS D168 )) holds (B368 ==> ( roots B369 ) implies ( B366 . ( B368 -tree B369 ) ) = H5(B368 , ( roots B369 ) , ( B366 * B369 ))))))) from DTCONSTR:sch 8;
end;
uniqueness
proof
set D170 = ( DTConOSA C309 );
set D171 = ( bool [: ( TS ( DTConOSA C309 ) ) , (the carrier of C308) :] );
deffunc H6((Symbol of D170)) = ( @ $1 );
deffunc H7((Symbol of D170) , set , (FinSequence of D171)) = ( @ ($1 , $3) );
let C310 , C311 being (Function of ( TS ( DTConOSA C309 ) ) , ( bool [: ( TS ( DTConOSA C309 ) ) , (the carrier of C308) :] ));
assume that
L776: ((for B370 being (Symbol of ( DTConOSA C309 )) holds (B370 in ( Terminals ( DTConOSA C309 ) ) implies ( C310 . ( root-tree B370 ) ) = H6(B370))) & (for B371 being (Symbol of ( DTConOSA C309 )) holds (for B372 being (FinSequence of ( TS ( DTConOSA C309 ) )) holds (B371 ==> ( roots B372 ) implies ( C310 . ( B371 -tree B372 ) ) = H7(B371 , ( roots B372 ) , ( C310 * B372 ))))))
and
L777: ((for B373 being (Symbol of ( DTConOSA C309 )) holds (B373 in ( Terminals ( DTConOSA C309 ) ) implies ( C311 . ( root-tree B373 ) ) = H6(B373))) & (for B374 being (Symbol of ( DTConOSA C309 )) holds (for B375 being (FinSequence of ( TS ( DTConOSA C309 ) )) holds (B374 ==> ( roots B375 ) implies ( C311 . ( B374 -tree B375 ) ) = H7(B374 , ( roots B375 ) , ( C311 * B375 ))))));
thus L778: C310 = C311 from DTCONSTR:sch 9(L776 , L777);
end;
end;
theorem
L780: (for B376 being  locally_directed OrderSortedSign holds (for B377 being  non-empty (ManySortedSet of B376) holds (for B378 being (Element of ( TS ( DTConOSA B377 ) )) holds ((for B379 being (Element of B376) holds (B378 in ( (the Sorts of ( ParsedTermsOSA B377 )) . B379 ) iff [ B378 , B379 ] in ( ( PTClasses B377 ) . B378 ))) & (for B380 being (Element of B376) holds (for B381 being (Element of ( TS ( DTConOSA B377 ) )) holds ([ B381 , B380 ] in ( ( PTClasses B377 ) . B378 ) implies [ B378 , B380 ] in ( ( PTClasses B377 ) . B381 ))))))))
proof
let C312 being  locally_directed OrderSortedSign;
let C313 being  non-empty (ManySortedSet of C312);
let C314 being (Element of ( TS ( DTConOSA C313 ) ));
set D172 = ( ParsedTermsOSA C313 );
set D173 = (the Sorts of D172);
set D174 = ( DTConOSA C313 );
set D175 = ( bool [: ( TS D174 ) , (the carrier of C312) :] );
set D176 = ( PTClasses C313 );
defpred S10[ set ] means (for B382 being (Element of C312) holds ($1 in ( D173 . B382 ) iff [ $1 , B382 ] in ( D176 . $1 )));
defpred S11[ set ] means (for B383 being (Element of C312) holds (for B384 being (Element of ( TS D174 )) holds ([ B384 , B383 ] in ( D176 . $1 ) implies [ $1 , B383 ] in ( D176 . B384 ))));
defpred S12[ (DecoratedTree of (the carrier of D174)) ] means (S10[ $1 ] & S11[ $1 ]);
L781: (for B385 being (Symbol of D174) holds (for B386 being (FinSequence of ( TS D174 )) holds ((B385 ==> ( roots B386 ) & (for B387 being (DecoratedTree of (the carrier of D174)) holds (B387 in ( rng B386 ) implies S12[ B387 ]))) implies S12[ ( B385 -tree B386 ) ])))
proof
let C315 being (Symbol of D174);
let C316 being (FinSequence of ( TS D174 ));
assume that
L782: C315 ==> ( roots C316 )
and
L783: (for B388 being (DecoratedTree of (the carrier of D174)) holds (B388 in ( rng C316 ) implies (S10[ B388 ] & S11[ B388 ])));
consider C317 being (OperSymbol of C312) such that L784: C315 = [ C317 , (the carrier of C312) ] and L785: C316 in ( Args (C317 , D172) ) and L786: ( C315 -tree C316 ) = ( ( Den (C317 , D172) ) . C316 ) and L787: (for B389 being (Element of C312) holds (( C315 -tree C316 ) in ( (the Sorts of D172) . B389 ) iff ( the_result_sort_of C317 ) <= B389)) by L782 , L505;
reconsider D177 = ( D176 * C316 ) as (FinSequence of D175);
L788: ( D176 . ( C315 -tree C316 ) ) = ( @ (C315 , D177) ) by L782 , L774
.= { [ ( ( Den (B390 , ( ParsedTermsOSA C313 )) ) . B391 ) , B392 ] where B390 is (OperSymbol of C312) , B391 is (Element of ( Args (B390 , ( ParsedTermsOSA C313 )) )) , B392 is (Element of C312) : ((ex B393 being (OperSymbol of C312) st (C315 = [ B393 , (the carrier of C312) ] & B393 ~= B390 & ( len ( the_arity_of B393 ) ) = ( len ( the_arity_of B390 ) ) & ( the_result_sort_of B393 ) <= B392 & ( the_result_sort_of B390 ) <= B392)) & (ex B394 being (Element of ( (the carrier of C312) * )) st (( dom B394 ) = ( dom D177 ) & (for B395 being Nat holds (B395 in ( dom D177 ) implies [ ( B391 . B395 ) , ( B394 /. B395 ) ] in ( D177 . B395 )))))) };
reconsider D178 = C316 as (Element of ( Args (C317 , D172) )) by L785;
set D179 = ( the_arity_of C317 );
L789: ( rng C316 ) c= ( TS D174 ) by FINSEQ_1:def 4;
L790: ( dom D176 ) = ( TS D174 ) by FUNCT_2:def 1;
L791: ( len D177 ) = ( len C316 ) by L790 , L789 , FINSEQ_2:29;
L792: ( dom D177 ) = ( dom C316 ) by L791 , FINSEQ_3:29;
L793: ( dom D179 ) = ( dom C316 ) by L785 , MSUALG_3:6;
L794: (for B396 being Nat holds (B396 in ( dom D177 ) implies [ ( D178 . B396 ) , ( D179 /. B396 ) ] in ( D177 . B396 )))
proof
let C318 being Nat;
assume that
L795: C318 in ( dom D177 );
L796: ( D178 . C318 ) in ( rng D178 ) by L792 , L795 , FUNCT_1:3;
reconsider D180 = ( D178 . C318 ) as (Element of ( TS D174 )) by L796 , L789;
L797: ( D178 . C318 ) in ( D173 . ( D179 /. C318 ) ) by L792 , L793 , L795 , MSUALG_6:2;
L798: [ D180 , ( D179 /. C318 ) ] in ( D176 . D180 ) by L797 , L783 , L796;
thus L799: thesis by L798 , L792 , L795 , FUNCT_1:13;
end;
thus L800: S10[ ( C315 -tree C316 ) ]
proof
let C319 being (Element of C312);
thus L801:now
assume L802: ( C315 -tree C316 ) in ( D173 . C319 );
L803: ( the_result_sort_of C317 ) <= C319 by L802 , L787;
L804: ( len ( the_arity_of C317 ) ) = ( len ( the_arity_of C317 ) );
thus L805: [ ( C315 -tree C316 ) , C319 ] in ( D176 . ( C315 -tree C316 ) ) by L804 , L784 , L786 , L792 , L793 , L794 , L788 , L803;
end;
assume L806: [ ( C315 -tree C316 ) , C319 ] in ( D176 . ( C315 -tree C316 ) );
consider C320 being (OperSymbol of C312), C321 being (Element of ( Args (C320 , D172) )), C322 being (Element of C312) such that L807: [ ( C315 -tree C316 ) , C319 ] = [ ( ( Den (C320 , D172) ) . C321 ) , C322 ] and L808: (ex B397 being (OperSymbol of C312) st (C315 = [ B397 , (the carrier of C312) ] & B397 ~= C320 & ( len ( the_arity_of B397 ) ) = ( len ( the_arity_of C320 ) ) & ( the_result_sort_of B397 ) <= C322 & ( the_result_sort_of C320 ) <= C322)) and L809: (ex B398 being (Element of ( (the carrier of C312) * )) st (( dom B398 ) = ( dom D177 ) & (for B399 being Nat holds (B399 in ( dom D177 ) implies [ ( C321 . B399 ) , ( B398 /. B399 ) ] in ( D177 . B399 ))))) by L806 , L788;
L810: C319 = C322 by L807 , XTUPLE_0:1;
L811: ( D173 . ( the_result_sort_of C320 ) ) c= ( D173 . C319 ) by L810 , L808 , OSALG_1:def 16;
L812: ( ( Den (C320 , D172) ) . C321 ) in ( D173 . ( the_result_sort_of C320 ) ) by MSUALG_9:18;
L813: ( C315 -tree C316 ) = ( ( Den (C320 , D172) ) . C321 ) by L807 , XTUPLE_0:1;
thus L814: thesis by L813 , L812 , L811;
end;

thus L815: S11[ ( C315 -tree C316 ) ]
proof
let C323 being (Element of C312);
let C324 being (Element of ( TS D174 ));
assume L816: [ C324 , C323 ] in ( D176 . ( C315 -tree C316 ) );
consider C325 being (OperSymbol of C312), C326 being (Element of ( Args (C325 , D172) )), C327 being (Element of C312) such that L817: [ C324 , C323 ] = [ ( ( Den (C325 , D172) ) . C326 ) , C327 ] and L818: (ex B400 being (OperSymbol of C312) st (C315 = [ B400 , (the carrier of C312) ] & B400 ~= C325 & ( len ( the_arity_of B400 ) ) = ( len ( the_arity_of C325 ) ) & ( the_result_sort_of B400 ) <= C327 & ( the_result_sort_of C325 ) <= C327)) and L819: (ex B401 being (Element of ( (the carrier of C312) * )) st (( dom B401 ) = ( dom D177 ) & (for B402 being Nat holds (B402 in ( dom D177 ) implies [ ( C326 . B402 ) , ( B401 /. B402 ) ] in ( D177 . B402 ))))) by L816 , L788;
consider C328 being (Element of ( (the carrier of C312) * )) such that L820: ( dom C328 ) = ( dom D177 ) and L821: (for B403 being Nat holds (B403 in ( dom D177 ) implies [ ( C326 . B403 ) , ( C328 /. B403 ) ] in ( D177 . B403 ))) by L819;
consider C329 being (OperSymbol of C312) such that L822: C315 = [ C329 , (the carrier of C312) ] and L823: C329 ~= C325 and L824: ( len ( the_arity_of C329 ) ) = ( len ( the_arity_of C325 ) ) and L825: ( the_result_sort_of C329 ) <= C327 and L826: ( the_result_sort_of C325 ) <= C327 by L818;
L827: C324 = ( ( Den (C325 , D172) ) . C326 ) by L817 , XTUPLE_0:1;
reconsider D181 = C326 as (FinSequence of ( TS D174 )) by L520;
reconsider D182 = ( D176 * D181 ) as (FinSequence of D175);
L828: ( OSSym (C325 , C313) ) ==> ( roots C326 ) by L520;
consider C330 being (OperSymbol of C312) such that L829: ( OSSym (C325 , C313) ) = [ C330 , (the carrier of C312) ] and L830: D181 in ( Args (C330 , D172) ) and L831: ( ( OSSym (C325 , C313) ) -tree D181 ) = ( ( Den (C330 , D172) ) . D181 ) and L832: (for B404 being (Element of C312) holds (( ( OSSym (C325 , C313) ) -tree D181 ) in ( (the Sorts of D172) . B404 ) iff ( the_result_sort_of C330 ) <= B404)) by L828 , L505;
L833: C325 = C330 by L829 , XTUPLE_0:1;
L834: ( D176 . C324 ) = ( @ (( OSSym (C325 , C313) ) , D182) ) by L833 , L827 , L828 , L831 , L774
.= { [ ( ( Den (B405 , D172) ) . B406 ) , B407 ] where B405 is (OperSymbol of C312) , B406 is (Element of ( Args (B405 , D172) )) , B407 is (Element of C312) : ((ex B408 being (OperSymbol of C312) st (( OSSym (C325 , C313) ) = [ B408 , (the carrier of C312) ] & B408 ~= B405 & ( len ( the_arity_of B408 ) ) = ( len ( the_arity_of B405 ) ) & ( the_result_sort_of B408 ) <= B407 & ( the_result_sort_of B405 ) <= B407)) & (ex B409 being (Element of ( (the carrier of C312) * )) st (( dom B409 ) = ( dom D182 ) & (for B410 being Nat holds (B410 in ( dom D182 ) implies [ ( B406 . B410 ) , ( B409 /. B410 ) ] in ( D182 . B410 )))))) };
L835: ( rng D181 ) c= ( TS D174 ) by FINSEQ_1:def 4;
L836: ( rng D181 ) c= ( dom D176 ) by L835 , FUNCT_2:def 1;
L837: ( len D182 ) = ( len D181 ) by L836 , FINSEQ_2:29;
L838: ( dom D181 ) = ( dom D182 ) by L837 , FINSEQ_3:29;
L839: C329 = C317 by L784 , L822 , XTUPLE_0:1;
L840: ( dom ( the_arity_of C325 ) ) = ( dom ( the_arity_of C317 ) ) by L839 , L824 , FINSEQ_3:29;
L841: ( dom C328 ) = ( dom D182 ) by L840 , L792 , L793 , L820 , L838 , MSUALG_3:6;
L842: ( dom C326 ) = ( dom D177 ) by L792 , L793 , L840 , MSUALG_3:6;
L843: (for B411 being Nat holds (B411 in ( dom D182 ) implies [ ( D178 . B411 ) , ( C328 /. B411 ) ] in ( D182 . B411 )))
proof
let C331 being Nat;
assume that
L844: C331 in ( dom D182 );
L845: ( D178 . C331 ) in ( rng D178 ) by L792 , L820 , L841 , L844 , FUNCT_1:3;
L846: ( C326 . C331 ) in ( rng D181 ) by L838 , L844 , FUNCT_1:3;
reconsider D183 = ( D178 . C331 ) , D184 = ( C326 . C331 ) as (Element of ( TS D174 )) by L846 , L789 , L835 , L845;
L847: [ ( C326 . C331 ) , ( C328 /. C331 ) ] in ( D177 . C331 ) by L821 , L838 , L842 , L844;
L848: [ ( C326 . C331 ) , ( C328 /. C331 ) ] in ( D176 . ( D178 . C331 ) ) by L847 , L792 , L820 , L841 , L844 , FUNCT_1:13;
L849: [ D183 , ( C328 /. C331 ) ] in ( D176 . D184 ) by L848 , L783 , L845;
thus L850: thesis by L849 , L844 , FUNCT_1:12;
end;
L851: ( the_result_sort_of C325 ) <= C323 by L817 , L826 , XTUPLE_0:1;
L852: ( the_result_sort_of C317 ) <= C323 by L817 , L825 , L839 , XTUPLE_0:1;
thus L853: thesis by L852 , L786 , L823 , L824 , L839 , L841 , L843 , L834 , L851;
end;

end;
L816: (for B412 being (Symbol of D174) holds (B412 in ( Terminals D174 ) implies S12[ ( root-tree B412 ) ]))
proof
let C332 being (Symbol of D174);
assume that
L817: C332 in ( Terminals D174 );
reconsider D185 = C332 as (Terminal of D174) by L817;
consider C333 being (Element of C312), C334 being set such that L818: C334 in ( C313 . C333 ) and L819: C332 = [ C334 , C333 ] by L817 , L189;
L820: ( D176 . ( root-tree C332 ) ) = ( @ C332 ) by L817 , L774
.= { [ ( root-tree C332 ) , B413 ] where B413 is (Element of C312) : (ex B414 being (Element of C312) st (ex B415 being set st (B415 in ( C313 . B414 ) & C332 = [ B415 , B414 ] & B414 <= B413))) };
L821: ( root-tree D185 ) in { B416 where B416 is (Element of ( TS ( DTConOSA C313 ) )) : ((ex B417 being (Element of C312) st (ex B418 being set st (B417 <= C333 & B418 in ( C313 . B417 ) & B416 = ( root-tree [ B418 , B417 ] )))) or (ex B419 being (OperSymbol of C312) st ([ B419 , (the carrier of C312) ] = ( B416 . ( {} ) ) & ( the_result_sort_of B419 ) <= C333))) } by L818 , L819;
L822: ( root-tree D185 ) in ( D173 . C333 ) by L821 , L452;
thus L823: S10[ ( root-tree C332 ) ]
proof
let C335 being (Element of C312);
thus L824:now
assume L825: ( root-tree C332 ) in ( D173 . C335 );
L826: C333 <= C335 by L825 , L818 , L819 , L455;
thus L827: [ ( root-tree C332 ) , C335 ] in ( D176 . ( root-tree C332 ) ) by L826 , L818 , L819 , L820;
end;
assume L828: [ ( root-tree C332 ) , C335 ] in ( D176 . ( root-tree C332 ) );
consider C336 being (Element of C312) such that L829: [ ( root-tree C332 ) , C335 ] = [ ( root-tree C332 ) , C336 ] and L830: (ex B420 being (Element of C312) st (ex B421 being set st (B421 in ( C313 . B420 ) & C332 = [ B421 , B420 ] & B420 <= C336))) by L828 , L820;
L831: C335 = C336 by L829 , XTUPLE_0:1;
consider C337 being (Element of C312), C338 being set such that L832: C338 in ( C313 . C337 ) and L833: C332 = [ C338 , C337 ] and L834: C337 <= C336 by L830;
L835: C337 = C333 by L819 , L833 , XTUPLE_0:1;
L836: ( D173 . C333 ) c= ( D173 . C335 ) by L835 , L831 , L834 , OSALG_1:def 16;
thus L837: thesis by L836 , L822;
end;

thus L838: S11[ ( root-tree C332 ) ]
proof
let C339 being (Element of C312);
let C340 being (Element of ( TS D174 ));
assume L839: [ C340 , C339 ] in ( D176 . ( root-tree C332 ) );
L840: (ex B422 being (Element of C312) st ([ C340 , C339 ] = [ ( root-tree C332 ) , B422 ] & (ex B423 being (Element of C312) st (ex B424 being set st (B424 in ( C313 . B423 ) & C332 = [ B424 , B423 ] & B423 <= B422))))) by L839 , L820;
L841: C340 = ( root-tree C332 ) by L840 , XTUPLE_0:1;
thus L842: thesis by L841 , L839;
end;

end;
L839: (for B425 being (DecoratedTree of (the carrier of D174)) holds (B425 in ( TS D174 ) implies S12[ B425 ])) from DTCONSTR:sch 7(L816 , L781);
thus L840: thesis by L839;
end;
theorem
L841: (for B426 being  locally_directed OrderSortedSign holds (for B427 being  non-empty (ManySortedSet of B426) holds (for B428 being (Element of ( TS ( DTConOSA B427 ) )) holds (for B429 being (Element of B426) holds ((ex B430 being (Element of ( TS ( DTConOSA B427 ) )) st [ B430 , B429 ] in ( ( PTClasses B427 ) . B428 )) implies [ B428 , B429 ] in ( ( PTClasses B427 ) . B428 ))))))
proof
let C341 being  locally_directed OrderSortedSign;
let C342 being  non-empty (ManySortedSet of C341);
set D186 = ( DTConOSA C342 );
set D187 = ( ParsedTermsOSA C342 );
set D188 = ( bool [: ( TS D186 ) , (the carrier of C341) :] );
set D189 = (the Sorts of D187);
set D190 = ( PTClasses C342 );
defpred S13[ set ] means (for B431 being (Element of C341) holds ((ex B432 being (Element of ( TS ( DTConOSA C342 ) )) st [ B432 , B431 ] in ( ( PTClasses C342 ) . $1 )) implies [ $1 , B431 ] in ( ( PTClasses C342 ) . $1 )));
L842: (for B433 being (Symbol of D186) holds (for B434 being (FinSequence of ( TS D186 )) holds ((B433 ==> ( roots B434 ) & (for B435 being (DecoratedTree of (the carrier of D186)) holds (B435 in ( rng B434 ) implies S13[ B435 ]))) implies S13[ ( B433 -tree B434 ) ])))
proof
let C343 being (Symbol of D186);
let C344 being (FinSequence of ( TS D186 ));
assume that
L843: C343 ==> ( roots C344 )
and
L844: (for B436 being (DecoratedTree of (the carrier of D186)) holds (B436 in ( rng C344 ) implies S13[ B436 ]));
consider C345 being (OperSymbol of C341) such that L845: C343 = [ C345 , (the carrier of C341) ] and L846: C344 in ( Args (C345 , D187) ) and L847: ( C343 -tree C344 ) = ( ( Den (C345 , D187) ) . C344 ) and L848: (for B437 being (Element of C341) holds (( C343 -tree C344 ) in ( (the Sorts of D187) . B437 ) iff ( the_result_sort_of C345 ) <= B437)) by L843 , L505;
reconsider D191 = ( D190 * C344 ) as (FinSequence of D188);
L849: ( D190 . ( C343 -tree C344 ) ) = ( @ (C343 , D191) ) by L843 , L774
.= { [ ( ( Den (B438 , ( ParsedTermsOSA C342 )) ) . B439 ) , B440 ] where B438 is (OperSymbol of C341) , B439 is (Element of ( Args (B438 , ( ParsedTermsOSA C342 )) )) , B440 is (Element of C341) : ((ex B441 being (OperSymbol of C341) st (C343 = [ B441 , (the carrier of C341) ] & B441 ~= B438 & ( len ( the_arity_of B441 ) ) = ( len ( the_arity_of B438 ) ) & ( the_result_sort_of B441 ) <= B440 & ( the_result_sort_of B438 ) <= B440)) & (ex B442 being (Element of ( (the carrier of C341) * )) st (( dom B442 ) = ( dom D191 ) & (for B443 being Nat holds (B443 in ( dom D191 ) implies [ ( B439 . B443 ) , ( B442 /. B443 ) ] in ( D191 . B443 )))))) };
reconsider D192 = C344 as (Element of ( Args (C345 , D187) )) by L846;
set D193 = ( the_arity_of C345 );
L850: ( len ( the_arity_of C345 ) ) = ( len ( the_arity_of C345 ) );
let C346 being (Element of C341);
L851: ( rng C344 ) c= ( TS D186 ) by FINSEQ_1:def 4;
L852: ( dom D190 ) = ( TS D186 ) by FUNCT_2:def 1;
L853: ( len D191 ) = ( len C344 ) by L852 , L851 , FINSEQ_2:29;
L854: ( dom D191 ) = ( dom C344 ) by L853 , FINSEQ_3:29;
L855: ( dom D193 ) = ( dom C344 ) by L846 , MSUALG_3:6;
L856: (for B444 being Nat holds (B444 in ( dom D191 ) implies [ ( D192 . B444 ) , ( D193 /. B444 ) ] in ( D191 . B444 )))
proof
let C347 being Nat;
assume that
L857: C347 in ( dom D191 );
L858: ( D192 . C347 ) in ( rng D192 ) by L854 , L857 , FUNCT_1:3;
reconsider D194 = ( D192 . C347 ) as (Element of ( TS D186 )) by L858 , L851;
L859: ( D192 . C347 ) in ( D189 . ( D193 /. C347 ) ) by L854 , L855 , L857 , MSUALG_6:2;
L860: [ D194 , ( D193 /. C347 ) ] in ( D190 . D194 ) by L859 , L780;
thus L861: thesis by L860 , L854 , L857 , FUNCT_1:13;
end;
assume L862: (ex B445 being (Element of ( TS ( DTConOSA C342 ) )) st [ B445 , C346 ] in ( D190 . ( C343 -tree C344 ) ));
consider C348 being (Element of ( TS ( DTConOSA C342 ) )) such that L863: [ C348 , C346 ] in ( D190 . ( C343 -tree C344 ) ) by L862;
consider C349 being (OperSymbol of C341), C350 being (Element of ( Args (C349 , D187) )), C351 being (Element of C341) such that L864: [ C348 , C346 ] = [ ( ( Den (C349 , D187) ) . C350 ) , C351 ] and L865: (ex B446 being (OperSymbol of C341) st (C343 = [ B446 , (the carrier of C341) ] & B446 ~= C349 & ( len ( the_arity_of B446 ) ) = ( len ( the_arity_of C349 ) ) & ( the_result_sort_of B446 ) <= C351 & ( the_result_sort_of C349 ) <= C351)) and L866: (ex B447 being (Element of ( (the carrier of C341) * )) st (( dom B447 ) = ( dom D191 ) & (for B448 being Nat holds (B448 in ( dom D191 ) implies [ ( C350 . B448 ) , ( B447 /. B448 ) ] in ( D191 . B448 ))))) by L849 , L863;
L867: C346 = C351 by L864 , XTUPLE_0:1;
L868: ( the_result_sort_of C345 ) <= C351 by L845 , L865 , XTUPLE_0:1;
thus L869: thesis by L868 , L845 , L847 , L854 , L855 , L856 , L849 , L867 , L850;
end;
L870: (for B449 being (Symbol of D186) holds (B449 in ( Terminals D186 ) implies S13[ ( root-tree B449 ) ]))
proof
let C352 being (Symbol of D186);
assume L871: C352 in ( Terminals D186 );
L872: ( D190 . ( root-tree C352 ) ) = ( @ C352 ) by L871 , L774
.= { [ ( root-tree C352 ) , B450 ] where B450 is (Element of C341) : (ex B451 being (Element of C341) st (ex B452 being set st (B452 in ( C342 . B451 ) & C352 = [ B452 , B451 ] & B451 <= B450))) };
let C353 being (Element of C341);
assume L873: (ex B453 being (Element of ( TS ( DTConOSA C342 ) )) st [ B453 , C353 ] in ( D190 . ( root-tree C352 ) ));
consider C354 being (Element of ( TS ( DTConOSA C342 ) )) such that L874: [ C354 , C353 ] in ( D190 . ( root-tree C352 ) ) by L873;
L875: (ex B454 being (Element of C341) st ([ C354 , C353 ] = [ ( root-tree C352 ) , B454 ] & (ex B455 being (Element of C341) st (ex B456 being set st (B456 in ( C342 . B455 ) & C352 = [ B456 , B455 ] & B455 <= B454))))) by L872 , L874;
thus L876: thesis by L875 , L874 , XTUPLE_0:1;
end;
L877: (for B457 being (DecoratedTree of (the carrier of D186)) holds (B457 in ( TS D186 ) implies S13[ B457 ])) from DTCONSTR:sch 7(L870 , L842);
thus L878: thesis by L877;
end;
theorem
L879: (for B458 being  locally_directed OrderSortedSign holds (for B459 being  non-empty (ManySortedSet of B458) holds (for B460 , B461 being (Element of ( TS ( DTConOSA B459 ) )) holds (for B462 , B463 being (Element of B458) holds ((B462 <= B463 & B460 in ( (the Sorts of ( ParsedTermsOSA B459 )) . B462 ) & B461 in ( (the Sorts of ( ParsedTermsOSA B459 )) . B462 )) implies ([ B461 , B462 ] in ( ( PTClasses B459 ) . B460 ) iff [ B461 , B463 ] in ( ( PTClasses B459 ) . B460 )))))))
proof
let C355 being  locally_directed OrderSortedSign;
let C356 being  non-empty (ManySortedSet of C355);
set D195 = ( DTConOSA C356 );
set D196 = ( ParsedTermsOSA C356 );
set D197 = ( bool [: ( TS D195 ) , (the carrier of C355) :] );
set D198 = (the Sorts of D196);
set D199 = ( PTClasses C356 );
defpred S14[ set ] means (for B464 , B465 being (Element of C355) holds (for B466 being (Element of ( TS ( DTConOSA C356 ) )) holds ((B464 <= B465 & $1 in ( D198 . B464 ) & B466 in ( D198 . B464 )) implies ([ B466 , B464 ] in ( ( PTClasses C356 ) . $1 ) iff [ B466 , B465 ] in ( ( PTClasses C356 ) . $1 )))));
L880: (for B467 being (Symbol of D195) holds (for B468 being (FinSequence of ( TS D195 )) holds ((B467 ==> ( roots B468 ) & (for B469 being (DecoratedTree of (the carrier of D195)) holds (B469 in ( rng B468 ) implies S14[ B469 ]))) implies S14[ ( B467 -tree B468 ) ])))
proof
let C357 being (Symbol of D195);
let C358 being (FinSequence of ( TS D195 ));
assume that
L881: C357 ==> ( roots C358 )
and
L882: (for B470 being (DecoratedTree of (the carrier of D195)) holds (B470 in ( rng C358 ) implies S14[ B470 ]));
consider C359 being (OperSymbol of C355) such that L883: C357 = [ C359 , (the carrier of C355) ] and L884: C358 in ( Args (C359 , D196) ) and L885: ( C357 -tree C358 ) = ( ( Den (C359 , D196) ) . C358 ) and L886: (for B471 being (Element of C355) holds (( C357 -tree C358 ) in ( (the Sorts of D196) . B471 ) iff ( the_result_sort_of C359 ) <= B471)) by L881 , L505;
reconsider D200 = ( D199 * C358 ) as (FinSequence of D197);
let C360 , C361 being (Element of C355);
let C362 being (Element of ( TS D195 ));
assume that
L887: C360 <= C361
and
L888: ( C357 -tree C358 ) in ( D198 . C360 )
and
L889: C362 in ( D198 . C360 );
L890: ( D199 . ( C357 -tree C358 ) ) = ( @ (C357 , D200) ) by L881 , L774
.= { [ ( ( Den (B472 , ( ParsedTermsOSA C356 )) ) . B473 ) , B474 ] where B472 is (OperSymbol of C355) , B473 is (Element of ( Args (B472 , ( ParsedTermsOSA C356 )) )) , B474 is (Element of C355) : ((ex B475 being (OperSymbol of C355) st (C357 = [ B475 , (the carrier of C355) ] & B475 ~= B472 & ( len ( the_arity_of B475 ) ) = ( len ( the_arity_of B472 ) ) & ( the_result_sort_of B475 ) <= B474 & ( the_result_sort_of B472 ) <= B474)) & (ex B476 being (Element of ( (the carrier of C355) * )) st (( dom B476 ) = ( dom D200 ) & (for B477 being Nat holds (B477 in ( dom D200 ) implies [ ( B473 . B477 ) , ( B476 /. B477 ) ] in ( D200 . B477 )))))) };
thus L891:now
reconsider D201 = C361 as (Element of C355);
assume L892: [ C362 , C360 ] in ( D199 . ( C357 -tree C358 ) );
consider C363 being (OperSymbol of C355), C364 being (Element of ( Args (C363 , D196) )), C365 being (Element of C355) such that L893: [ C362 , C360 ] = [ ( ( Den (C363 , D196) ) . C364 ) , C365 ] and L894: (ex B478 being (OperSymbol of C355) st (C357 = [ B478 , (the carrier of C355) ] & B478 ~= C363 & ( len ( the_arity_of B478 ) ) = ( len ( the_arity_of C363 ) ) & ( the_result_sort_of B478 ) <= C365 & ( the_result_sort_of C363 ) <= C365)) and L895: (ex B479 being (Element of ( (the carrier of C355) * )) st (( dom B479 ) = ( dom D200 ) & (for B480 being Nat holds (B480 in ( dom D200 ) implies [ ( C364 . B480 ) , ( B479 /. B480 ) ] in ( D200 . B480 ))))) by L892 , L890;
consider C366 being (OperSymbol of C355) such that L896: C357 = [ C366 , (the carrier of C355) ] and L897: C366 ~= C363 and L898: ( len ( the_arity_of C366 ) ) = ( len ( the_arity_of C363 ) ) and L899: ( the_result_sort_of C366 ) <= C365 and L900: ( the_result_sort_of C363 ) <= C365 by L894;
L901: C362 = ( ( Den (C363 , D196) ) . C364 ) by L893 , XTUPLE_0:1;
L902: C360 = C365 by L893 , XTUPLE_0:1;
L903: ( the_result_sort_of C363 ) <= D201 by L902 , L887 , L900 , ORDERS_2:3;
L904: ( the_result_sort_of C366 ) <= D201 by L887 , L902 , L899 , ORDERS_2:3;
thus L905: [ C362 , C361 ] in ( D199 . ( C357 -tree C358 ) ) by L904 , L890 , L895 , L901 , L896 , L897 , L898 , L903;
end;
assume L906: [ C362 , C361 ] in ( D199 . ( C357 -tree C358 ) );
consider C367 being (OperSymbol of C355), C368 being (Element of ( Args (C367 , D196) )), C369 being (Element of C355) such that L907: [ C362 , C361 ] = [ ( ( Den (C367 , D196) ) . C368 ) , C369 ] and L908: (ex B481 being (OperSymbol of C355) st (C357 = [ B481 , (the carrier of C355) ] & B481 ~= C367 & ( len ( the_arity_of B481 ) ) = ( len ( the_arity_of C367 ) ) & ( the_result_sort_of B481 ) <= C369 & ( the_result_sort_of C367 ) <= C369)) and L909: (ex B482 being (Element of ( (the carrier of C355) * )) st (( dom B482 ) = ( dom D200 ) & (for B483 being Nat holds (B483 in ( dom D200 ) implies [ ( C368 . B483 ) , ( B482 /. B483 ) ] in ( D200 . B483 ))))) by L906 , L890;
reconsider D202 = C368 as (FinSequence of ( TS D195 )) by L520;
L910: ( OSSym (C367 , C356) ) ==> ( roots C368 ) by L520;
consider C370 being (OperSymbol of C355) such that L911: ( OSSym (C367 , C356) ) = [ C370 , (the carrier of C355) ] and L912: D202 in ( Args (C370 , D196) ) and L913: ( ( OSSym (C367 , C356) ) -tree D202 ) = ( ( Den (C370 , D196) ) . D202 ) and L914: (for B484 being (Element of C355) holds (( ( OSSym (C367 , C356) ) -tree D202 ) in ( (the Sorts of D196) . B484 ) iff ( the_result_sort_of C370 ) <= B484)) by L910 , L505;
L915: C362 = ( ( Den (C367 , D196) ) . C368 ) by L907 , XTUPLE_0:1;
L916: C367 = C370 by L911 , XTUPLE_0:1;
L917: ( the_result_sort_of C367 ) <= C360 by L916 , L889 , L915 , L913 , L914;
consider C371 being (OperSymbol of C355) such that L918: C357 = [ C371 , (the carrier of C355) ] and L919: C371 ~= C367 and L920: ( len ( the_arity_of C371 ) ) = ( len ( the_arity_of C367 ) ) and L921: ( the_result_sort_of C371 ) <= C369 and L922: ( the_result_sort_of C367 ) <= C369 by L908;
L923: ( the_result_sort_of C359 ) <= C360 by L886 , L888;
L924: ( the_result_sort_of C371 ) <= C360 by L923 , L883 , L918 , XTUPLE_0:1;
thus L925: thesis by L924 , L890 , L909 , L915 , L918 , L919 , L920 , L917;
end;
L926: (for B485 being (Symbol of D195) holds (B485 in ( Terminals D195 ) implies S14[ ( root-tree B485 ) ]))
proof
let C372 being (Symbol of D195);
assume that
L927: C372 in ( Terminals D195 );
reconsider D203 = C372 as (Terminal of D195) by L927;
L928: ( D199 . ( root-tree C372 ) ) = ( @ C372 ) by L927 , L774
.= { [ ( root-tree C372 ) , B486 ] where B486 is (Element of C355) : (ex B487 being (Element of C355) st (ex B488 being set st (B488 in ( C356 . B487 ) & C372 = [ B488 , B487 ] & B487 <= B486))) };
let C373 , C374 being (Element of C355);
let C375 being (Element of ( TS D195 ));
assume that
L929: C373 <= C374
and
L930: ( root-tree C372 ) in ( D198 . C373 )
and
L931: C375 in ( D198 . C373 );
L932: ( D198 . C373 ) c= ( D198 . C374 ) by L929 , OSALG_1:def 16;
L933: [ ( root-tree D203 ) , C374 ] in ( D199 . ( root-tree C372 ) ) by L932 , L930 , L780;
thus L934:now
assume L935: [ C375 , C373 ] in ( D199 . ( root-tree C372 ) );
L936: (ex B489 being (Element of C355) st ([ C375 , C373 ] = [ ( root-tree C372 ) , B489 ] & (ex B490 being (Element of C355) st (ex B491 being set st (B491 in ( C356 . B490 ) & C372 = [ B491 , B490 ] & B490 <= B489))))) by L935 , L928;
thus L937: [ C375 , C374 ] in ( D199 . ( root-tree C372 ) ) by L936 , L933 , XTUPLE_0:1;
end;
assume L938: [ C375 , C374 ] in ( D199 . ( root-tree C372 ) );
L939: (ex B492 being (Element of C355) st ([ C375 , C374 ] = [ ( root-tree C372 ) , B492 ] & (ex B493 being (Element of C355) st (ex B494 being set st (B494 in ( C356 . B493 ) & C372 = [ B494 , B493 ] & B493 <= B492))))) by L938 , L928;
L940: [ ( root-tree D203 ) , C373 ] in ( D199 . ( root-tree C372 ) ) by L930 , L780;
thus L941: thesis by L940 , L939 , XTUPLE_0:1;
end;
L942: (for B495 being (DecoratedTree of (the carrier of D195)) holds (B495 in ( TS D195 ) implies S14[ B495 ])) from DTCONSTR:sch 7(L926 , L880);
thus L943: thesis by L942;
end;
theorem
L944: (for B496 being  locally_directed OrderSortedSign holds (for B497 being  non-empty (ManySortedSet of B496) holds (for B498 , B499 , B500 being (Element of ( TS ( DTConOSA B497 ) )) holds (for B501 being (Element of B496) holds (([ B499 , B501 ] in ( ( PTClasses B497 ) . B498 ) & [ B500 , B501 ] in ( ( PTClasses B497 ) . B499 )) implies [ B498 , B501 ] in ( ( PTClasses B497 ) . B500 ))))))
proof
let C376 being  locally_directed OrderSortedSign;
let C377 being  non-empty (ManySortedSet of C376);
set D204 = ( DTConOSA C377 );
set D205 = ( ParsedTermsOSA C377 );
set D206 = ( bool [: ( TS D204 ) , (the carrier of C376) :] );
set D207 = (the Sorts of D205);
set D208 = ( PTClasses C377 );
defpred S15[ set ] means (for B502 being (Element of C376) holds (for B503 , B504 being (Element of ( TS D204 )) holds (([ B503 , B502 ] in ( D208 . $1 ) & [ B504 , B502 ] in ( D208 . B503 )) implies [ $1 , B502 ] in ( D208 . B504 ))));
L945: (for B505 being (Symbol of D204) holds (for B506 being (FinSequence of ( TS D204 )) holds ((B505 ==> ( roots B506 ) & (for B507 being (DecoratedTree of (the carrier of D204)) holds (B507 in ( rng B506 ) implies S15[ B507 ]))) implies S15[ ( B505 -tree B506 ) ])))
proof
let C378 being (Symbol of D204);
let C379 being (FinSequence of ( TS D204 ));
assume that
L946: C378 ==> ( roots C379 )
and
L947: (for B508 being (DecoratedTree of (the carrier of D204)) holds (B508 in ( rng C379 ) implies S15[ B508 ]));
consider C380 being (OperSymbol of C376) such that L948: C378 = [ C380 , (the carrier of C376) ] and L949: C379 in ( Args (C380 , D205) ) and L950: ( C378 -tree C379 ) = ( ( Den (C380 , D205) ) . C379 ) and L951: (for B509 being (Element of C376) holds (( C378 -tree C379 ) in ( (the Sorts of D205) . B509 ) iff ( the_result_sort_of C380 ) <= B509)) by L946 , L505;
reconsider D209 = C379 as (Element of ( Args (C380 , D205) )) by L949;
set D210 = ( the_arity_of C380 );
L952: ( dom D210 ) = ( dom C379 ) by L949 , MSUALG_3:6;
reconsider D211 = ( D208 * C379 ) as (FinSequence of D206);
L953: ( rng C379 ) c= ( TS D204 ) by FINSEQ_1:def 4;
L954: ( dom D208 ) = ( TS D204 ) by FUNCT_2:def 1;
L955: ( len D211 ) = ( len C379 ) by L954 , L953 , FINSEQ_2:29;
L956: ( dom D211 ) = ( dom C379 ) by L955 , FINSEQ_3:29;
L957: ( D208 . ( C378 -tree C379 ) ) = ( @ (C378 , D211) ) by L946 , L774
.= { [ ( ( Den (B510 , ( ParsedTermsOSA C377 )) ) . B511 ) , B512 ] where B510 is (OperSymbol of C376) , B511 is (Element of ( Args (B510 , ( ParsedTermsOSA C377 )) )) , B512 is (Element of C376) : ((ex B513 being (OperSymbol of C376) st (C378 = [ B513 , (the carrier of C376) ] & B513 ~= B510 & ( len ( the_arity_of B513 ) ) = ( len ( the_arity_of B510 ) ) & ( the_result_sort_of B513 ) <= B512 & ( the_result_sort_of B510 ) <= B512)) & (ex B514 being (Element of ( (the carrier of C376) * )) st (( dom B514 ) = ( dom D211 ) & (for B515 being Nat holds (B515 in ( dom D211 ) implies [ ( B511 . B515 ) , ( B514 /. B515 ) ] in ( D211 . B515 )))))) };
thus L958: S15[ ( C378 -tree C379 ) ]
proof
let C381 being (Element of C376);
let C382 , C383 being (Element of ( TS D204 ));
assume that
L959: [ C382 , C381 ] in ( D208 . ( C378 -tree C379 ) )
and
L960: [ C383 , C381 ] in ( D208 . C382 );
consider C384 being (OperSymbol of C376), C385 being (Element of ( Args (C384 , D205) )), C386 being (Element of C376) such that L961: [ C382 , C381 ] = [ ( ( Den (C384 , D205) ) . C385 ) , C386 ] and L962: (ex B516 being (OperSymbol of C376) st (C378 = [ B516 , (the carrier of C376) ] & B516 ~= C384 & ( len ( the_arity_of B516 ) ) = ( len ( the_arity_of C384 ) ) & ( the_result_sort_of B516 ) <= C386 & ( the_result_sort_of C384 ) <= C386)) and L963: (ex B517 being (Element of ( (the carrier of C376) * )) st (( dom B517 ) = ( dom D211 ) & (for B518 being Nat holds (B518 in ( dom D211 ) implies [ ( C385 . B518 ) , ( B517 /. B518 ) ] in ( D211 . B518 ))))) by L957 , L959;
L964: C382 = ( ( Den (C384 , D205) ) . C385 ) by L961 , XTUPLE_0:1;
reconsider D212 = C385 as (FinSequence of ( TS D204 )) by L520;
reconsider D213 = ( D208 * D212 ) as (FinSequence of D206);
L965: ( OSSym (C384 , C377) ) ==> ( roots C385 ) by L520;
consider C387 being (OperSymbol of C376) such that L966: ( OSSym (C384 , C377) ) = [ C387 , (the carrier of C376) ] and L967: D212 in ( Args (C387 , D205) ) and L968: ( ( OSSym (C384 , C377) ) -tree D212 ) = ( ( Den (C387 , D205) ) . D212 ) and L969: (for B519 being (Element of C376) holds (( ( OSSym (C384 , C377) ) -tree D212 ) in ( (the Sorts of D205) . B519 ) iff ( the_result_sort_of C387 ) <= B519)) by L965 , L505;
L970: C384 = C387 by L966 , XTUPLE_0:1;
L971: ( D208 . C382 ) = ( @ (( OSSym (C384 , C377) ) , D213) ) by L970 , L964 , L965 , L968 , L774
.= { [ ( ( Den (B520 , D205) ) . B521 ) , B522 ] where B520 is (OperSymbol of C376) , B521 is (Element of ( Args (B520 , D205) )) , B522 is (Element of C376) : ((ex B523 being (OperSymbol of C376) st (( OSSym (C384 , C377) ) = [ B523 , (the carrier of C376) ] & B523 ~= B520 & ( len ( the_arity_of B523 ) ) = ( len ( the_arity_of B520 ) ) & ( the_result_sort_of B523 ) <= B522 & ( the_result_sort_of B520 ) <= B522)) & (ex B524 being (Element of ( (the carrier of C376) * )) st (( dom B524 ) = ( dom D213 ) & (for B525 being Nat holds (B525 in ( dom D213 ) implies [ ( B521 . B525 ) , ( B524 /. B525 ) ] in ( D213 . B525 )))))) };
consider C388 being (OperSymbol of C376), C389 being (Element of ( Args (C388 , D205) )), C390 being (Element of C376) such that L972: [ C383 , C381 ] = [ ( ( Den (C388 , D205) ) . C389 ) , C390 ] and L973: (ex B526 being (OperSymbol of C376) st (( OSSym (C384 , C377) ) = [ B526 , (the carrier of C376) ] & B526 ~= C388 & ( len ( the_arity_of B526 ) ) = ( len ( the_arity_of C388 ) ) & ( the_result_sort_of B526 ) <= C390 & ( the_result_sort_of C388 ) <= C390)) and L974: (ex B527 being (Element of ( (the carrier of C376) * )) st (( dom B527 ) = ( dom D213 ) & (for B528 being Nat holds (B528 in ( dom D213 ) implies [ ( C389 . B528 ) , ( B527 /. B528 ) ] in ( D213 . B528 ))))) by L971 , L960;
consider C391 being (OperSymbol of C376) such that L975: ( OSSym (C384 , C377) ) = [ C391 , (the carrier of C376) ] and L976: C391 ~= C388 and L977: ( len ( the_arity_of C391 ) ) = ( len ( the_arity_of C388 ) ) and L978: ( the_result_sort_of C391 ) <= C390 and L979: ( the_result_sort_of C388 ) <= C390 by L973;
L980: ( the_result_sort_of C388 ) <= C381 by L972 , L979 , XTUPLE_0:1;
reconsider D214 = C389 as (FinSequence of ( TS D204 )) by L520;
reconsider D215 = ( D208 * D214 ) as (FinSequence of D206);
defpred S16[ set , set ] means [ ( D209 . $1 ) , $2 ] in ( D215 . $1 );
L981: ( rng D212 ) c= ( TS D204 ) by FINSEQ_1:def 4;
L982: ( rng D212 ) c= ( dom D208 ) by L981 , FUNCT_2:def 1;
L983: ( len D213 ) = ( len D212 ) by L982 , FINSEQ_2:29;
L984: ( dom D212 ) = ( dom D213 ) by L983 , FINSEQ_3:29;
consider C392 being (Element of ( (the carrier of C376) * )) such that L985: ( dom C392 ) = ( dom D213 ) and L986: (for B529 being Nat holds (B529 in ( dom D213 ) implies [ ( C389 . B529 ) , ( C392 /. B529 ) ] in ( D213 . B529 ))) by L974;
consider C393 being (Element of ( (the carrier of C376) * )) such that L987: ( dom C393 ) = ( dom D211 ) and L988: (for B530 being Nat holds (B530 in ( dom D211 ) implies [ ( C385 . B530 ) , ( C393 /. B530 ) ] in ( D211 . B530 ))) by L963;
L989: C383 = ( ( Den (C388 , D205) ) . C389 ) by L972 , XTUPLE_0:1;
L990: ( OSSym (C388 , C377) ) ==> ( roots C389 ) by L520;
consider C394 being (OperSymbol of C376) such that L991: ( OSSym (C388 , C377) ) = [ C394 , (the carrier of C376) ] and L992: D214 in ( Args (C394 , D205) ) and L993: ( ( OSSym (C388 , C377) ) -tree D214 ) = ( ( Den (C394 , D205) ) . D214 ) and L994: (for B531 being (Element of C376) holds (( ( OSSym (C388 , C377) ) -tree D214 ) in ( (the Sorts of D205) . B531 ) iff ( the_result_sort_of C394 ) <= B531)) by L990 , L505;
L995: C388 = C394 by L991 , XTUPLE_0:1;
L996: ( D208 . C383 ) = ( @ (( OSSym (C388 , C377) ) , D215) ) by L995 , L989 , L990 , L993 , L774
.= { [ ( ( Den (B532 , D205) ) . B533 ) , B534 ] where B532 is (OperSymbol of C376) , B533 is (Element of ( Args (B532 , D205) )) , B534 is (Element of C376) : ((ex B535 being (OperSymbol of C376) st (( OSSym (C388 , C377) ) = [ B535 , (the carrier of C376) ] & B535 ~= B532 & ( len ( the_arity_of B535 ) ) = ( len ( the_arity_of B532 ) ) & ( the_result_sort_of B535 ) <= B534 & ( the_result_sort_of B532 ) <= B534)) & (ex B536 being (Element of ( (the carrier of C376) * )) st (( dom B536 ) = ( dom D215 ) & (for B537 being Nat holds (B537 in ( dom D215 ) implies [ ( B533 . B537 ) , ( B536 /. B537 ) ] in ( D215 . B537 )))))) };
consider C395 being (OperSymbol of C376) such that L997: C378 = [ C395 , (the carrier of C376) ] and L998: C395 ~= C384 and L999: ( len ( the_arity_of C395 ) ) = ( len ( the_arity_of C384 ) ) and L1000: ( the_result_sort_of C395 ) <= C386 and L1001: ( the_result_sort_of C384 ) <= C386 by L962;
L1002: C395 = C380 by L948 , L997 , XTUPLE_0:1;
L1003: ( the_result_sort_of C380 ) <= C381 by L1002 , L961 , L1000 , XTUPLE_0:1;
L1004: ( dom ( the_arity_of C384 ) ) = ( dom ( the_arity_of C380 ) ) by L999 , L1002 , FINSEQ_3:29;
L1005: ( dom C385 ) = ( dom D211 ) by L1004 , L956 , L952 , MSUALG_3:6;
L1006: ( rng D214 ) c= ( TS D204 ) by FINSEQ_1:def 4;
L1007: ( rng D214 ) c= ( dom D208 ) by L1006 , FUNCT_2:def 1;
L1008: ( len D215 ) = ( len D214 ) by L1007 , FINSEQ_2:29;
L1009: ( dom D214 ) = ( dom D215 ) by L1008 , FINSEQ_3:29;
L1010: C391 = C384 by L975 , XTUPLE_0:1;
L1011: ( dom ( the_arity_of C388 ) ) = ( dom ( the_arity_of C384 ) ) by L1010 , L977 , FINSEQ_3:29;
L1012: ( dom C389 ) = ( dom ( the_arity_of C384 ) ) by L1011 , MSUALG_3:6
.= ( dom D213 ) by L984 , MSUALG_3:6;
L1013: ( rng D212 ) c= ( TS D204 ) by FINSEQ_1:def 4;
L1014: (for B538 being set holds (B538 in ( dom D215 ) implies (ex B539 being set st (B539 in (the carrier of C376) & S16[ B538 , B539 ]))))
proof
let C396 being set;
assume that
L1015: C396 in ( dom D215 );
L1016: ( C389 . C396 ) in ( rng D214 ) by L1009 , L1015 , FUNCT_1:3;
L1017: ( C385 . C396 ) in ( rng D212 ) by L984 , L1009 , L1012 , L1015 , FUNCT_1:3;
L1018: ( D209 . C396 ) in ( rng D209 ) by L956 , L984 , L1005 , L1009 , L1012 , L1015 , FUNCT_1:3;
reconsider D216 = ( D209 . C396 ) , D217 = ( D212 . C396 ) , D218 = ( C389 . C396 ) as (Element of ( TS D204 )) by L1018 , L953 , L1006 , L1013 , L1016 , L1017;
L1019: [ ( C385 . C396 ) , ( C393 /. C396 ) ] in ( D211 . C396 ) by L988 , L984 , L1005 , L1009 , L1012 , L1015;
L1020: C396 in ( dom D209 ) by L952 , L1004 , L984 , L1009 , L1012 , L1015 , MSUALG_3:6;
L1021: [ D217 , ( C393 /. C396 ) ] in ( D208 . D216 ) by L1020 , L1019 , FUNCT_1:13;
L1022: [ D216 , ( C393 /. C396 ) ] in ( D208 . D216 ) by L1021 , L841;
L1023: D216 in ( D207 . ( C393 /. C396 ) ) by L1022 , L780;
L1024: [ D216 , ( C393 /. C396 ) ] in ( D208 . D217 ) by L1021 , L780;
L1025: [ D217 , ( C393 /. C396 ) ] in ( D208 . D217 ) by L1024 , L841;
L1026: D217 in ( D207 . ( C393 /. C396 ) ) by L1025 , L780;
L1027: ( LeastSort D217 ) <= ( C393 /. C396 ) by L1026 , L532;
L1028: [ ( C389 . C396 ) , ( C392 /. C396 ) ] in ( D213 . C396 ) by L986 , L1009 , L1012 , L1015;
L1029: [ D218 , ( C392 /. C396 ) ] in ( D208 . D217 ) by L1028 , L984 , L1009 , L1012 , L1015 , FUNCT_1:13;
L1030: [ D217 , ( C392 /. C396 ) ] in ( D208 . D217 ) by L1029 , L841;
L1031: D217 in ( D207 . ( C392 /. C396 ) ) by L1030 , L780;
L1032: ( LeastSort D217 ) <= ( C392 /. C396 ) by L1031 , L532;
consider C397 being (Element of C376) such that L1033: ( C392 /. C396 ) <= C397 and L1034: ( C393 /. C396 ) <= C397 by L1032 , L1027 , OSALG_4:11;
L1035: [ D217 , ( C392 /. C396 ) ] in ( D208 . D218 ) by L1029 , L780;
L1036: [ D218 , ( C392 /. C396 ) ] in ( D208 . D218 ) by L1035 , L841;
L1037: D218 in ( D207 . ( C392 /. C396 ) ) by L1036 , L780;
L1038: [ D218 , C397 ] in ( D208 . D217 ) by L1037 , L1029 , L1031 , L1033 , L879;
take C397;
thus L1039: C397 in (the carrier of C376);
L1040: [ ( C385 . C396 ) , ( C393 /. C396 ) ] in ( D208 . ( D209 . C396 ) ) by L956 , L984 , L1005 , L1009 , L1012 , L1015 , L1019 , FUNCT_1:13;
L1041: [ D217 , C397 ] in ( D208 . D216 ) by L1040 , L1026 , L1023 , L1034 , L879;
L1042: [ D216 , C397 ] in ( D208 . D218 ) by L1041 , L947 , L956 , L984 , L1005 , L1009 , L1012 , L1015 , L1038 , FUNCT_1:3;
thus L1043: thesis by L1042 , L1015 , FUNCT_1:12;
end;
consider C398 being (Function of ( dom D215 ) , (the carrier of C376)) such that L1044: (for B540 being set holds (B540 in ( dom D215 ) implies S16[ B540 , ( C398 . B540 ) ])) from FUNCT_2:sch 1(L1014);
L1045: ( dom C398 ) = ( dom D215 ) by FUNCT_2:def 1;
L1046: (ex B541 being Nat st ( dom C398 ) = ( Seg B541 )) by L1045 , FINSEQ_1:def 2;
reconsider D219 = C398 as FinSequence by L1046 , FINSEQ_1:def 2;
L1047: ( rng C398 ) c= (the carrier of C376) by RELAT_1:def 19;
L1048: D219 is (FinSequence of (the carrier of C376)) by L1047 , FINSEQ_1:def 4;
reconsider D220 = C398 as (Element of ( (the carrier of C376) * )) by L1048 , FINSEQ_1:def 11;
L1049: (( dom D220 ) = ( dom D215 ) & (for B542 being Nat holds (B542 in ( dom D215 ) implies [ ( D209 . B542 ) , ( D220 /. B542 ) ] in ( D215 . B542 ))))
proof
thus L1050: ( dom D220 ) = ( dom D215 ) by FUNCT_2:def 1;
let C399 being Nat;
assume that
L1051: C399 in ( dom D215 );
L1052: [ ( D209 . C399 ) , ( D220 . C399 ) ] in ( D215 . C399 ) by L1044 , L1051;
thus L1053: thesis by L1052 , L1045 , L1051 , PARTFUN1:def 6;
end;
L1054: C388 ~= C380 by L998 , L1002 , L976 , L1010 , OSALG_1:2;
thus L1055: thesis by L1054 , L950 , L999 , L1002 , L977 , L1010 , L1049 , L996 , L980 , L1003;
end;

end;
L959: (for B543 being (Symbol of D204) holds (B543 in ( Terminals D204 ) implies S15[ ( root-tree B543 ) ]))
proof
let C400 being (Symbol of D204);
assume L960: C400 in ( Terminals D204 );
L961: ( D208 . ( root-tree C400 ) ) = ( @ C400 ) by L960 , L774
.= { [ ( root-tree C400 ) , B544 ] where B544 is (Element of C376) : (ex B545 being (Element of C376) st (ex B546 being set st (B546 in ( C377 . B545 ) & C400 = [ B546 , B545 ] & B545 <= B544))) };
thus L962: S15[ ( root-tree C400 ) ]
proof
let C401 being (Element of C376);
let C402 , C403 being (Element of ( TS D204 ));
assume that
L963: [ C402 , C401 ] in ( D208 . ( root-tree C400 ) )
and
L964: [ C403 , C401 ] in ( D208 . C402 );
L965: (ex B547 being (Element of C376) st ([ C402 , C401 ] = [ ( root-tree C400 ) , B547 ] & (ex B548 being (Element of C376) st (ex B549 being set st (B549 in ( C377 . B548 ) & C400 = [ B549 , B548 ] & B548 <= B547))))) by L961 , L963;
L966: C402 = ( root-tree C400 ) by L965 , XTUPLE_0:1;
L967: (ex B550 being (Element of C376) st ([ C403 , C401 ] = [ ( root-tree C400 ) , B550 ] & (ex B551 being (Element of C376) st (ex B552 being set st (B552 in ( C377 . B551 ) & C400 = [ B552 , B551 ] & B551 <= B550))))) by L966 , L961 , L964;
thus L968: thesis by L967 , L963 , L966 , XTUPLE_0:1;
end;

end;
L963: (for B553 being (DecoratedTree of (the carrier of D204)) holds (B553 in ( TS D204 ) implies S15[ B553 ])) from DTCONSTR:sch 7(L959 , L945);
thus L964: thesis by L963;
end;
definition
let C404 being  locally_directed OrderSortedSign;
let C405 being  non-empty (ManySortedSet of C404);
func PTCongruence C405 ->  MSEquivalence-like (OrderSortedRelation of ( ParsedTermsOSA C405 )) means 
:L965: (for B554 being set holds (B554 in (the carrier of C404) implies ( it . B554 ) = { [ B555 , B556 ] where B555 , B556 is (Element of ( TS ( DTConOSA C405 ) )) : [ B555 , B554 ] in ( ( PTClasses C405 ) . B556 ) }));
existence
proof
set D221 = ( ParsedTermsOSA C405 );
set D222 = (the Sorts of D221);
set D223 = ( DTConOSA C405 );
set D224 = ( PTClasses C405 );
deffunc H8(set) = { [ B557 , B558 ] where B557 , B558 is (Element of ( TS D223 )) : [ B557 , $1 ] in ( D224 . B558 ) };
consider C406 being (ManySortedSet of (the carrier of C404)) such that L966: (for B559 being set holds (B559 in (the carrier of C404) implies ( C406 . B559 ) = H8(B559))) from PBOOLE:sch 4;
L967: (for B560 being set holds (B560 in (the carrier of C404) implies ( C406 . B560 ) is (Relation of ( D222 . B560 ))))
proof
let C407 being set;
assume that
L968: C407 in (the carrier of C404);
reconsider D225 = C407 as (Element of C404) by L968;
L969: ( C406 . C407 ) = { [ B561 , B562 ] where B561 , B562 is (Element of ( TS D223 )) : [ B561 , C407 ] in ( D224 . B562 ) } by L966 , L968;
L970: ( C406 . D225 ) c= [: ( D222 . D225 ) , ( D222 . D225 ) :]
proof
let C408 being set;
assume L971: C408 in ( C406 . D225 );
consider C409 , C410 being (Element of ( TS D223 )) such that L972: C408 = [ C409 , C410 ] and L973: [ C409 , D225 ] in ( D224 . C410 ) by L971 , L969;
L974: [ C410 , D225 ] in ( D224 . C409 ) by L973 , L780;
L975: [ C409 , D225 ] in ( D224 . C409 ) by L974 , L841;
L976: C409 in ( D222 . D225 ) by L975 , L780;
L977: [ C410 , D225 ] in ( D224 . C410 ) by L973 , L841;
L978: C410 in ( D222 . D225 ) by L977 , L780;
thus L979: thesis by L978 , L972 , L976 , ZFMISC_1:87;
end;
thus L980: thesis by L970;
end;
reconsider D226 = C406 as (ManySortedRelation of D221) by L967 , MSUALG_4:def 1;
L981: (for B563 , B564 being (Element of C404) holds (B563 <= B564 implies (for B565 , B566 being set holds ((B565 in ( D222 . B563 ) & B566 in ( D222 . B563 )) implies ([ B565 , B566 ] in ( D226 . B563 ) iff [ B565 , B566 ] in ( D226 . B564 ))))))
proof
let C411 , C412 being (Element of C404);
assume that
L982: C411 <= C412;
L983: ( D226 . C411 ) = { [ B567 , B568 ] where B567 , B568 is (Element of ( TS D223 )) : [ B567 , C411 ] in ( D224 . B568 ) } by L966;
L984: ( D226 . C412 ) = { [ B569 , B570 ] where B569 , B570 is (Element of ( TS D223 )) : [ B569 , C412 ] in ( D224 . B570 ) } by L966;
let C413 , C414 being set;
assume that
L985: C413 in ( D222 . C411 )
and
L986: C414 in ( D222 . C411 );
thus L987:now
assume L988: [ C413 , C414 ] in ( D226 . C411 );
consider C415 , C416 being (Element of ( TS D223 )) such that L989: [ C413 , C414 ] = [ C415 , C416 ] and L990: [ C415 , C411 ] in ( D224 . C416 ) by L988 , L983;
L991: C414 = C416 by L989 , XTUPLE_0:1;
L992: C413 = C415 by L989 , XTUPLE_0:1;
L993: [ C415 , C412 ] in ( D224 . C416 ) by L992 , L982 , L985 , L986 , L990 , L991 , L879;
thus L994: [ C413 , C414 ] in ( D226 . C412 ) by L993 , L984 , L989;
end;
assume L995: [ C413 , C414 ] in ( D226 . C412 );
consider C417 , C418 being (Element of ( TS D223 )) such that L996: [ C413 , C414 ] = [ C417 , C418 ] and L997: [ C417 , C412 ] in ( D224 . C418 ) by L995 , L984;
L998: C414 = C418 by L996 , XTUPLE_0:1;
L999: C413 = C417 by L996 , XTUPLE_0:1;
L1000: [ C417 , C411 ] in ( D224 . C418 ) by L999 , L982 , L985 , L986 , L997 , L998 , L879;
thus L1001: thesis by L1000 , L983 , L996;
end;
L1002: D226 is  os-compatible by L981 , OSALG_4:def 1;
defpred S17[ (Element of ( TS D223 )) , (Element of C404) ] means ((ex B571 being (Element of C404) st (ex B572 being set st (B571 <= $2 & B572 in ( C405 . B571 ) & $1 = ( root-tree [ B572 , B571 ] )))) or (ex B573 being (OperSymbol of C404) st ([ B573 , (the carrier of C404) ] = ( $1 . ( {} ) ) & ( the_result_sort_of B573 ) <= $2)));
reconsider D227 = D226 as (OrderSortedRelation of D221) by L1002 , OSALG_4:def 2;
L1003: (for B574 being set holds (for B575 being (Relation of ( D222 . B574 )) holds ((B574 in (the carrier of C404) & ( D227 . B574 ) = B575) implies B575 is  total  symmetric  transitive  total  symmetric  transitive  total  symmetric  transitive  total  symmetric  transitive (Relation of ( D222 . B574 )))))
proof
let C419 being set;
let C420 being (Relation of ( D222 . C419 ));
assume that
L1004: C419 in (the carrier of C404)
and
L1005: ( D227 . C419 ) = C420;
reconsider D228 = C419 as (Element of C404) by L1004;
L1006: C420 = { [ B576 , B577 ] where B576 , B577 is (Element of ( TS D223 )) : [ B576 , C419 ] in ( D224 . B577 ) } by L966 , L1004 , L1005;
L1007: (for B578 , B579 being set holds ((B578 in ( D222 . C419 ) & B579 in ( D222 . C419 ) & [ B578 , B579 ] in C420) implies [ B579 , B578 ] in C420))
proof
let C421 , C422 being set;
assume that
L1008: C421 in ( D222 . C419 )
and
L1009: C422 in ( D222 . C419 )
and
L1010: [ C421 , C422 ] in C420;
consider C423 , C424 being (Element of ( TS D223 )) such that L1011: [ C421 , C422 ] = [ C423 , C424 ] and L1012: [ C423 , D228 ] in ( D224 . C424 ) by L1006 , L1010;
L1013: C421 = C423 by L1011 , XTUPLE_0:1;
L1014: C422 = C424 by L1011 , XTUPLE_0:1;
L1015: [ C424 , D228 ] in ( D224 . C423 ) by L1012 , L780;
thus L1016: thesis by L1015 , L1006 , L1013 , L1014;
end;
L1017: C420 is_symmetric_in ( D222 . C419 ) by L1007 , RELAT_2:def 3;
L1018:
now
let C425 , C426 , C427 being set;
assume that
L1019: C425 in ( D222 . C419 )
and
L1020: C426 in ( D222 . C419 )
and
L1021: C427 in ( D222 . C419 )
and
L1022: [ C425 , C426 ] in C420
and
L1023: [ C426 , C427 ] in C420;
consider C428 , C429 being (Element of ( TS D223 )) such that L1024: [ C425 , C426 ] = [ C428 , C429 ] and L1025: [ C428 , D228 ] in ( D224 . C429 ) by L1006 , L1022;
L1026: [ C429 , D228 ] in ( D224 . C428 ) by L1025 , L780;
consider C430 , C431 being (Element of ( TS D223 )) such that L1027: [ C426 , C427 ] = [ C430 , C431 ] and L1028: [ C430 , D228 ] in ( D224 . C431 ) by L1006 , L1023;
L1029: C426 = C430 by L1027 , XTUPLE_0:1;
L1030: C426 = C429 by L1024 , XTUPLE_0:1;
L1031: [ C431 , D228 ] in ( D224 . C429 ) by L1030 , L1028 , L1029 , L780;
L1032: [ C428 , D228 ] in ( D224 . C431 ) by L1031 , L1026 , L944;
L1033: C427 = C431 by L1027 , XTUPLE_0:1;
L1034: C425 = C428 by L1024 , XTUPLE_0:1;
thus L1035: [ C425 , C427 ] in C420 by L1034 , L1006 , L1033 , L1032;
end;
L1036: C420 is_transitive_in ( D222 . C419 ) by L1018 , RELAT_2:def 8;
L1037: ( D222 . D228 ) = { B580 where B580 is (Element of ( TS ( DTConOSA C405 ) )) : S17[ B580 , D228 ] } by L452;
L1038:
now
let C432 being set;
assume that
L1039: C432 in ( D222 . C419 );
consider C433 being (Element of ( TS D223 )) such that L1040: C432 = C433 and L1041: S17[ C433 , D228 ] by L1037 , L1039;
L1042: [ C433 , D228 ] in ( D224 . C433 ) by L1039 , L1040 , L780;
thus L1043: [ C432 , C432 ] in C420 by L1042 , L1006 , L1040;
end;
L1044: C420 is_reflexive_in ( D222 . C419 ) by L1038 , RELAT_2:def 1;
L1045: ( field C420 ) = ( D222 . C419 ) by L1044 , ORDERS_1:13;
L1046: ( dom C420 ) = ( D222 . C419 ) by L1044 , ORDERS_1:13;
thus L1047: thesis by L1046 , L1045 , L1017 , L1036 , PARTFUN1:def 2 , RELAT_2:def 11 , RELAT_2:def 16;
end;
L1048: D227 is  MSEquivalence_Relation-like by L1003 , MSUALG_4:def 2;
reconsider D229 = D227 as  MSEquivalence-like (OrderSortedRelation of D221) by L1048 , MSUALG_4:def 3;
take D229;
thus L1049: thesis by L966;
end;
uniqueness
proof
set D230 = ( DTConOSA C405 );
set D231 = ( PTClasses C405 );
let C434 , C435 being  MSEquivalence-like (OrderSortedRelation of ( ParsedTermsOSA C405 ));
assume that
L1050: (for B581 being set holds (B581 in (the carrier of C404) implies ( C434 . B581 ) = { [ B582 , B583 ] where B582 , B583 is (Element of ( TS D230 )) : [ B582 , B581 ] in ( D231 . B583 ) }))
and
L1051: (for B584 being set holds (B584 in (the carrier of C404) implies ( C435 . B584 ) = { [ B585 , B586 ] where B585 , B586 is (Element of ( TS D230 )) : [ B585 , B584 ] in ( D231 . B586 ) }));
L1052:
now
let C436 being set;
assume that
L1053: C436 in (the carrier of C404);
L1054: ( C434 . C436 ) = { [ B587 , B588 ] where B587 , B588 is (Element of ( TS D230 )) : [ B587 , C436 ] in ( D231 . B588 ) } by L1050 , L1053;
thus L1055: ( C434 . C436 ) = ( C435 . C436 ) by L1054 , L1051 , L1053;
end;
thus L1056: C434 = C435 by L1052 , PBOOLE:3;
end;
end;
theorem
L1058: (for B589 being  locally_directed OrderSortedSign holds (for B590 being  non-empty (ManySortedSet of B589) holds (for B591 , B592 , B593 being set holds ([ B591 , B593 ] in ( ( PTClasses B590 ) . B592 ) implies (B591 in ( TS ( DTConOSA B590 ) ) & B592 in ( TS ( DTConOSA B590 ) ) & B593 in (the carrier of B589))))))
proof
let C437 being  locally_directed OrderSortedSign;
let C438 being  non-empty (ManySortedSet of C437);
set D232 = ( DTConOSA C438 );
set D233 = ( PTClasses C438 );
L1059: ( rng D233 ) c= ( bool [: ( TS D232 ) , (the carrier of C437) :] ) by RELAT_1:def 19;
let C439 , C440 , C441 being set;
assume that
L1060: [ C439 , C441 ] in ( ( PTClasses C438 ) . C440 );
L1061: C440 in ( TS D232 )
proof
assume L1062: (not C440 in ( TS D232 ));
L1063: (not C440 in ( dom D233 )) by L1062;
thus L1064: contradiction by L1063 , L1060 , FUNCT_1:def 2;
end;
L1065: ( dom D233 ) = ( TS D232 ) by FUNCT_2:def 1;
L1066: ( D233 . C440 ) in ( rng D233 ) by L1065 , L1061 , FUNCT_1:3;
thus L1067: thesis by L1066 , L1060 , L1059 , L1061 , ZFMISC_1:87;
end;
theorem
L1068: (for B594 being  locally_directed OrderSortedSign holds (for B595 being  non-empty (ManySortedSet of B594) holds (for B596 being (Component of B594) holds (for B597 , B598 being set holds ([ B597 , B598 ] in ( CompClass (( PTCongruence B595 ) , B596) ) iff (ex B599 being (Element of B594) st (B599 in B596 & [ B597 , B599 ] in ( ( PTClasses B595 ) . B598 ))))))))
proof
let C442 being  locally_directed OrderSortedSign;
let C443 being  non-empty (ManySortedSet of C442);
let C444 being (Component of C442);
let C445 , C446 being set;
thus L1069:now
assume L1070: [ C445 , C446 ] in ( CompClass (( PTCongruence C443 ) , C444) );
consider C447 being (Element of C442) such that L1071: C447 in C444 and L1072: [ C445 , C446 ] in ( ( PTCongruence C443 ) . C447 ) by L1070 , OSALG_4:def 9;
L1073: [ C445 , C446 ] in { [ B600 , B601 ] where B600 , B601 is (Element of ( TS ( DTConOSA C443 ) )) : [ B600 , C447 ] in ( ( PTClasses C443 ) . B601 ) } by L1072 , L965;
take D234 = C447;
consider C448 , C449 being (Element of ( TS ( DTConOSA C443 ) )) such that L1074: [ C445 , C446 ] = [ C448 , C449 ] and L1075: [ C448 , D234 ] in ( ( PTClasses C443 ) . C449 ) by L1073;
L1076: C445 = C448 by L1074 , XTUPLE_0:1;
thus L1077: (D234 in C444 & [ C445 , D234 ] in ( ( PTClasses C443 ) . C446 )) by L1076 , L1071 , L1074 , L1075 , XTUPLE_0:1;
end;
given C450 being (Element of C442) such that
L1078: C450 in C444
and
L1079: [ C445 , C450 ] in ( ( PTClasses C443 ) . C446 );

reconsider D235 = C445 , D236 = C446 as (Element of ( TS ( DTConOSA C443 ) )) by L1079 , L1058;
L1080: [ D235 , D236 ] in { [ B602 , B603 ] where B602 , B603 is (Element of ( TS ( DTConOSA C443 ) )) : [ B602 , C450 ] in ( ( PTClasses C443 ) . B603 ) } by L1079;
L1081: [ D235 , D236 ] in ( ( PTCongruence C443 ) . C450 ) by L1080 , L965;
thus L1082: thesis by L1081 , L1078 , OSALG_4:def 9;
end;
theorem
L1083: (for B604 being  locally_directed OrderSortedSign holds (for B605 being  non-empty (ManySortedSet of B604) holds (for B606 being (Element of B604) holds (for B607 being (Element of ( (the Sorts of ( ParsedTermsOSA B605 )) . B606 )) holds ( OSClass (( PTCongruence B605 ) , B607) ) = ( proj1 ( ( PTClasses B605 ) . B607 ) )))))
proof
let C451 being  locally_directed OrderSortedSign;
let C452 being  non-empty (ManySortedSet of C451);
let C453 being (Element of C451);
let C454 being (Element of ( (the Sorts of ( ParsedTermsOSA C452 )) . C453 ));
set D237 = ( PTCongruence C452 );
set D238 = ( ParsedTermsOSA C452 );
set D239 = ( DTConOSA C452 );
L1084: (for B608 being set holds (B608 in ( OSClass (D237 , C454) ) iff B608 in ( proj1 ( ( PTClasses C452 ) . C454 ) )))
proof
let C455 being set;
thus L1085:now
assume L1086: C455 in ( OSClass (D237 , C454) );
L1087: [ C455 , C454 ] in ( CompClass (D237 , ( CComp C453 )) ) by L1086 , EQREL_1:19;
L1088: (ex B609 being (Element of C451) st (B609 in ( CComp C453 ) & [ C455 , B609 ] in ( ( PTClasses C452 ) . C454 ))) by L1087 , L1068;
thus L1089: C455 in ( proj1 ( ( PTClasses C452 ) . C454 ) ) by L1088 , XTUPLE_0:def 12;
end;
assume L1090: C455 in ( proj1 ( ( PTClasses C452 ) . C454 ) );
consider C456 being set such that L1091: [ C455 , C456 ] in ( ( PTClasses C452 ) . C454 ) by L1090 , XTUPLE_0:def 12;
reconsider D240 = C456 as (Element of C451) by L1091 , L1058;
reconsider D241 = C454 , D242 = C455 as (Element of ( TS D239 )) by L1091 , L1058;
L1092: ( LeastSort D241 ) <= C453 by L532;
L1093: [ D242 , D240 ] in ( ( PTClasses C452 ) . D241 ) by L1091;
L1094: [ D241 , D240 ] in ( ( PTClasses C452 ) . D241 ) by L1093 , L841;
L1095: C454 in ( (the Sorts of D238) . C456 ) by L1094 , L780;
L1096: ( LeastSort D241 ) <= D240 by L1095 , L532;
L1097: ( CComp D240 ) = ( CComp ( LeastSort D241 ) ) by L1096 , OSALG_4:4
.= ( CComp C453 ) by L1092 , OSALG_4:4;
L1098: D240 in ( CComp C453 ) by L1097 , EQREL_1:20;
L1099: [ C455 , C454 ] in ( CompClass (D237 , ( CComp C453 )) ) by L1098 , L1091 , L1068;
thus L1100: thesis by L1099 , EQREL_1:19;
end;
thus L1101: thesis by L1084 , TARSKI:1;
end;
theorem
L1102: (for B610 being  locally_directed OrderSortedSign holds (for B611 being  non-empty (ManySortedSet of B610) holds (for B612 being (ManySortedRelation of ( ParsedTermsOSA B611 )) holds (B612 = ( PTCongruence B611 ) iff ((for B613 , B614 being (Element of B610) holds (for B615 being set holds (B615 in ( B611 . B613 ) implies ((B613 <= B614 implies [ ( root-tree [ B615 , B613 ] ) , ( root-tree [ B615 , B613 ] ) ] in ( B612 . B614 )) & (for B616 being set holds (([ ( root-tree [ B615 , B613 ] ) , B616 ] in ( B612 . B614 ) or [ B616 , ( root-tree [ B615 , B613 ] ) ] in ( B612 . B614 )) implies (B613 <= B614 & B616 = ( root-tree [ B615 , B613 ] )))))))) & (for B617 , B618 being (OperSymbol of B610) holds (for B619 being (Element of ( Args (B617 , ( ParsedTermsOSA B611 )) )) holds (for B620 being (Element of ( Args (B618 , ( ParsedTermsOSA B611 )) )) holds (for B621 being (Element of B610) holds ([ ( ( Den (B617 , ( ParsedTermsOSA B611 )) ) . B619 ) , ( ( Den (B618 , ( ParsedTermsOSA B611 )) ) . B620 ) ] in ( B612 . B621 ) iff (B617 ~= B618 & ( len ( the_arity_of B617 ) ) = ( len ( the_arity_of B618 ) ) & ( the_result_sort_of B617 ) <= B621 & ( the_result_sort_of B618 ) <= B621 & (ex B622 being (Element of ( (the carrier of B610) * )) st (( dom B622 ) = ( dom B619 ) & (for B623 being Nat holds (B623 in ( dom B622 ) implies [ ( B619 . B623 ) , ( B620 . B623 ) ] in ( B612 . ( B622 /. B623 ) ))))))))))))))))
proof
let C457 being  locally_directed OrderSortedSign;
let C458 being  non-empty (ManySortedSet of C457);
let C459 being (ManySortedRelation of ( ParsedTermsOSA C458 ));
set D243 = ( ParsedTermsOSA C458 );
set D244 = (the Sorts of D243);
set D245 = ( DTConOSA C458 );
set D246 = ( [: (the carrier' of C457) , { (the carrier of C457) } :] \/ ( Union ( coprod (C458 qua (ManySortedSet of C457)) ) ) );
set D247 = ( bool [: ( TS D245 ) , (the carrier of C457) :] );
set D248 = ( PTClasses C458 );
defpred S18[ (ManySortedSet of (the carrier of C457)) ] means (for B624 , B625 being (Element of C457) holds (for B626 being set holds (B626 in ( C458 . B624 ) implies ((B624 <= B625 implies [ ( root-tree [ B626 , B624 ] ) , ( root-tree [ B626 , B624 ] ) ] in ( $1 . B625 )) & (for B627 being set holds (([ ( root-tree [ B626 , B624 ] ) , B627 ] in ( $1 . B625 ) or [ B627 , ( root-tree [ B626 , B624 ] ) ] in ( $1 . B625 )) implies (B624 <= B625 & B627 = ( root-tree [ B626 , B624 ] ))))))));
defpred S19[ (ManySortedSet of (the carrier of C457)) ] means (for B628 , B629 being (OperSymbol of C457) holds (for B630 being (Element of ( Args (B628 , ( ParsedTermsOSA C458 )) )) holds (for B631 being (Element of ( Args (B629 , ( ParsedTermsOSA C458 )) )) holds (for B632 being (Element of C457) holds ([ ( ( Den (B628 , ( ParsedTermsOSA C458 )) ) . B630 ) , ( ( Den (B629 , ( ParsedTermsOSA C458 )) ) . B631 ) ] in ( $1 . B632 ) iff (B628 ~= B629 & ( len ( the_arity_of B628 ) ) = ( len ( the_arity_of B629 ) ) & ( the_result_sort_of B628 ) <= B632 & ( the_result_sort_of B629 ) <= B632 & (ex B633 being (Element of ( (the carrier of C457) * )) st (( dom B633 ) = ( dom B630 ) & (for B634 being Nat holds (B634 in ( dom B633 ) implies [ ( B630 . B634 ) , ( B631 . B634 ) ] in ( $1 . ( B633 /. B634 ) )))))))))));
set D249 = ( PTCongruence C458 );
L1103: (for B635 , B636 being (ManySortedRelation of D243) holds ((S18[ B635 ] & S19[ B635 ] & S18[ B636 ] & S19[ B636 ]) implies B635 = B636))
proof
let C460 , C461 being (ManySortedRelation of D243);
assume that
L1104: S18[ C460 ]
and
L1105: S19[ C460 ]
and
L1106: S18[ C461 ]
and
L1107: S19[ C461 ];
defpred S20[ set ] means (for B637 being set holds (for B638 being (Element of C457) holds ([ $1 , B637 ] in ( C460 . B638 ) iff [ $1 , B637 ] in ( C461 . B638 ))));
L1108: (for B639 being (Symbol of D245) holds (for B640 being (FinSequence of ( TS D245 )) holds ((B639 ==> ( roots B640 ) & (for B641 being (DecoratedTree of (the carrier of D245)) holds (B641 in ( rng B640 ) implies S20[ B641 ]))) implies S20[ ( B639 -tree B640 ) ])))
proof
let C462 being (Symbol of D245);
let C463 being (FinSequence of ( TS D245 ));
assume that
L1109: C462 ==> ( roots C463 )
and
L1110: (for B642 being (DecoratedTree of (the carrier of D245)) holds (B642 in ( rng C463 ) implies S20[ B642 ]));
L1111: C462 in { B643 where B643 is (Symbol of D245) : (ex B644 being FinSequence st B643 ==> B644) } by L1109;
reconsider D250 = C462 as (NonTerminal of D245) by L1111 , LANG1:def 3;
reconsider D251 = C463 as (SubtreeSeq of D250) by L1109 , DTCONSTR:def 6;
let C464 being set;
let C465 being (Element of C457);
L1112: ( rng C463 ) c= ( TS D245 ) by FINSEQ_1:def 4;
L1113: [ C462 , ( roots C463 ) ] in (the Rules of D245) by L1109 , LANG1:def 1;
reconsider D252 = ( roots C463 ) as (Element of ( D246 * )) by L1113 , ZFMISC_1:87;
reconsider D253 = C462 as (Element of D246);
L1114: [ D253 , D252 ] in ( OSREL C458 ) by L1109 , LANG1:def 1;
L1115: D253 in [: (the carrier' of C457) , { (the carrier of C457) } :] by L1114 , L21;
consider C466 being (Element of (the carrier' of C457)), C467 being (Element of { (the carrier of C457) }) such that L1116: D253 = [ C466 , C467 ] by L1115 , DOMAIN_1:1;
L1117: C467 = (the carrier of C457) by TARSKI:def 1;
L1118: ( ( C462 -tree D251 ) . ( {} ) ) = [ C466 , (the carrier of C457) ] by L1117 , L1116 , TREES_4:def 4;
consider C468 being (SubtreeSeq of ( OSSym (C466 , C458) )) such that L1119: ( D250 -tree D251 ) = ( ( OSSym (C466 , C458) ) -tree C468 ) and L1120: ( OSSym (C466 , C458) ) ==> ( roots C468 ) and L1121: C468 in ( Args (C466 , D243) ) and L1122: ( D250 -tree D251 ) = ( ( Den (C466 , D243) ) . C468 ) by L1118 , L480;
L1123: ( (the Sorts of D243) . C465 ) = ( ParsedTerms (C458 , C465) ) by L230
.= { B645 where B645 is (Element of ( TS ( DTConOSA C458 ) )) : ((ex B646 being (Element of C457) st (ex B647 being set st (B646 <= C465 & B647 in ( C458 . B646 ) & B645 = ( root-tree [ B647 , B646 ] )))) or (ex B648 being (OperSymbol of C457) st ([ B648 , (the carrier of C457) ] = ( B645 . ( {} ) ) & ( the_result_sort_of B648 ) <= C465))) };
thus L1124:now
assume L1125: [ ( C462 -tree C463 ) , C464 ] in ( C460 . C465 );
L1126: C464 in ( (the Sorts of D243) . C465 ) by L1125 , ZFMISC_1:87;
consider C469 being (Element of ( TS ( DTConOSA C458 ) )) such that L1127: C464 = C469 and L1128: ((ex B649 being (Element of C457) st (ex B650 being set st (B649 <= C465 & B650 in ( C458 . B649 ) & C469 = ( root-tree [ B650 , B649 ] )))) or (ex B651 being (OperSymbol of C457) st ([ B651 , (the carrier of C457) ] = ( C469 . ( {} ) ) & ( the_result_sort_of B651 ) <= C465))) by L1126 , L1123;
L1129: (not (ex B652 being (Element of C457) st (ex B653 being set st (B652 <= C465 & B653 in ( C458 . B652 ) & C469 = ( root-tree [ B653 , B652 ] )))))
proof
given C470 being (Element of C457) , C471 being set such that
L1130: C470 <= C465
and
L1131: C471 in ( C458 . C470 )
and
L1132: C469 = ( root-tree [ C471 , C470 ] );

L1133: ( C462 -tree C463 ) = ( root-tree [ C471 , C470 ] ) by L1104 , L1125 , L1127 , L1131 , L1132;
L1134: [ C471 , C470 ] = C462 by L1133 , TREES_4:17;
L1135: (the carrier of C457) = C470 by L1134 , L1116 , L1117 , XTUPLE_0:1;
L1136: C470 in C470 by L1135;
thus L1137: contradiction by L1136;
end;
consider C472 being (OperSymbol of C457) such that L1138: [ C472 , (the carrier of C457) ] = ( C469 . ( {} ) ) and L1139: ( the_result_sort_of C472 ) <= C465 by L1129 , L1128;
consider C473 being (SubtreeSeq of ( OSSym (C472 , C458) )) such that L1140: C469 = ( ( OSSym (C472 , C458) ) -tree C473 ) and L1141: ( OSSym (C472 , C458) ) ==> ( roots C473 ) and L1142: C473 in ( Args (C472 , D243) ) and L1143: C469 = ( ( Den (C472 , D243) ) . C473 ) by L1138 , L480;
consider C474 being (SubtreeSeq of ( OSSym (C466 , C458) )) such that L1144: ( D250 -tree D251 ) = ( ( OSSym (C466 , C458) ) -tree C474 ) and L1145: ( OSSym (C466 , C458) ) ==> ( roots C474 ) and L1146: C474 in ( Args (C466 , D243) ) and L1147: ( D250 -tree D251 ) = ( ( Den (C466 , D243) ) . C474 ) by L1118 , L480;
L1148: ( len ( the_arity_of C466 ) ) = ( len ( the_arity_of C472 ) ) by L1105 , L1125 , L1127 , L1142 , L1143 , L1146 , L1147;
reconsider D254 = C474 as (Element of ( Args (C466 , D243) )) by L1146;
reconsider D255 = C473 as (Element of ( Args (C472 , D243) )) by L1142;
consider C475 being (Element of ( (the carrier of C457) * )) such that L1149: ( dom C475 ) = ( dom D254 ) and L1150: (for B654 being Nat holds (B654 in ( dom C475 ) implies [ ( D254 . B654 ) , ( D255 . B654 ) ] in ( C460 . ( C475 /. B654 ) ))) by L1105 , L1125 , L1127 , L1143 , L1147;
L1151: C474 = D251 by L1144 , TREES_4:15;
L1152: (for B655 being Nat holds (B655 in ( dom C475 ) implies [ ( D254 . B655 ) , ( D255 . B655 ) ] in ( C461 . ( C475 /. B655 ) )))
proof
let C476 being Nat;
assume that
L1153: C476 in ( dom C475 );
L1154: ( D254 . C476 ) in ( rng C463 ) by L1151 , L1149 , L1153 , FUNCT_1:3;
reconsider D256 = ( D254 . C476 ) as (Element of ( TS D245 )) by L1154 , L1112;
L1155: [ D256 , ( D255 . C476 ) ] in ( C460 . ( C475 /. C476 ) ) by L1150 , L1153;
thus L1156: thesis by L1155 , L1110 , L1154;
end;
L1157: ( the_result_sort_of C472 ) <= C465 by L1105 , L1125 , L1127 , L1142 , L1143 , L1146 , L1147;
L1158: ( the_result_sort_of C466 ) <= C465 by L1105 , L1125 , L1127 , L1142 , L1143 , L1146 , L1147;
L1159: C466 ~= C472 by L1105 , L1125 , L1127 , L1142 , L1143 , L1146 , L1147;
thus L1160: [ ( C462 -tree C463 ) , C464 ] in ( C461 . C465 ) by L1159 , L1107 , L1127 , L1143 , L1147 , L1148 , L1158 , L1157 , L1149 , L1152;
end;
reconsider D257 = C468 as (Element of ( Args (C466 , D243) )) by L1121;
assume L1161: [ ( C462 -tree C463 ) , C464 ] in ( C461 . C465 );
L1162: C464 in ( (the Sorts of D243) . C465 ) by L1161 , ZFMISC_1:87;
consider C477 being (Element of ( TS ( DTConOSA C458 ) )) such that L1163: C464 = C477 and L1164: ((ex B656 being (Element of C457) st (ex B657 being set st (B656 <= C465 & B657 in ( C458 . B656 ) & C477 = ( root-tree [ B657 , B656 ] )))) or (ex B658 being (OperSymbol of C457) st ([ B658 , (the carrier of C457) ] = ( C477 . ( {} ) ) & ( the_result_sort_of B658 ) <= C465))) by L1162 , L1123;
L1165: (not (ex B659 being (Element of C457) st (ex B660 being set st (B659 <= C465 & B660 in ( C458 . B659 ) & C477 = ( root-tree [ B660 , B659 ] )))))
proof
given C478 being (Element of C457) , C479 being set such that
L1166: C478 <= C465
and
L1167: C479 in ( C458 . C478 )
and
L1168: C477 = ( root-tree [ C479 , C478 ] );

L1169: ( C462 -tree C463 ) = ( root-tree [ C479 , C478 ] ) by L1106 , L1161 , L1163 , L1167 , L1168;
L1170: [ C479 , C478 ] = C462 by L1169 , TREES_4:17;
L1171: (the carrier of C457) = C478 by L1170 , L1116 , L1117 , XTUPLE_0:1;
L1172: C478 in C478 by L1171;
thus L1173: contradiction by L1172;
end;
consider C480 being (OperSymbol of C457) such that L1174: [ C480 , (the carrier of C457) ] = ( C477 . ( {} ) ) and L1175: ( the_result_sort_of C480 ) <= C465 by L1165 , L1164;
consider C481 being (SubtreeSeq of ( OSSym (C480 , C458) )) such that L1176: C477 = ( ( OSSym (C480 , C458) ) -tree C481 ) and L1177: ( OSSym (C480 , C458) ) ==> ( roots C481 ) and L1178: C481 in ( Args (C480 , D243) ) and L1179: C477 = ( ( Den (C480 , D243) ) . C481 ) by L1174 , L480;
L1180: ( len ( the_arity_of C466 ) ) = ( len ( the_arity_of C480 ) ) by L1107 , L1161 , L1163 , L1178 , L1179 , L1121 , L1122;
reconsider D258 = C481 as (Element of ( Args (C480 , D243) )) by L1178;
consider C482 being (Element of ( (the carrier of C457) * )) such that L1181: ( dom C482 ) = ( dom D257 ) and L1182: (for B661 being Nat holds (B661 in ( dom C482 ) implies [ ( D257 . B661 ) , ( D258 . B661 ) ] in ( C461 . ( C482 /. B661 ) ))) by L1107 , L1161 , L1163 , L1179 , L1122;
L1183: C468 = D251 by L1119 , TREES_4:15;
L1184: (for B662 being Nat holds (B662 in ( dom C482 ) implies [ ( D257 . B662 ) , ( D258 . B662 ) ] in ( C460 . ( C482 /. B662 ) )))
proof
let C483 being Nat;
assume that
L1185: C483 in ( dom C482 );
L1186: ( D257 . C483 ) in ( rng C463 ) by L1183 , L1181 , L1185 , FUNCT_1:3;
reconsider D259 = ( D257 . C483 ) as (Element of ( TS D245 )) by L1186 , L1112;
L1187: [ D259 , ( D258 . C483 ) ] in ( C461 . ( C482 /. C483 ) ) by L1182 , L1185;
thus L1188: thesis by L1187 , L1110 , L1186;
end;
L1189: ( the_result_sort_of C480 ) <= C465 by L1107 , L1161 , L1163 , L1178 , L1179 , L1121 , L1122;
L1190: ( the_result_sort_of C466 ) <= C465 by L1107 , L1161 , L1163 , L1178 , L1179 , L1121 , L1122;
L1191: C466 ~= C480 by L1107 , L1161 , L1163 , L1178 , L1179 , L1121 , L1122;
thus L1192: thesis by L1191 , L1105 , L1163 , L1179 , L1122 , L1180 , L1190 , L1189 , L1181 , L1184;
end;
L1193: (for B663 being (Symbol of D245) holds (B663 in ( Terminals D245 ) implies S20[ ( root-tree B663 ) ]))
proof
let C484 being (Symbol of D245);
assume L1194: C484 in ( Terminals D245 );
consider C485 being (Element of C457), C486 being set such that L1195: C486 in ( C458 . C485 ) and L1196: C484 = [ C486 , C485 ] by L1194 , L189;
let C487 being set;
let C488 being (Element of C457);
thus L1197:now
assume L1198: [ ( root-tree C484 ) , C487 ] in ( C460 . C488 );
L1199: C487 = ( root-tree [ C486 , C485 ] ) by L1198 , L1104 , L1195 , L1196;
L1200: C485 <= C488 by L1104 , L1195 , L1196 , L1198;
thus L1201: [ ( root-tree C484 ) , C487 ] in ( C461 . C488 ) by L1200 , L1106 , L1195 , L1196 , L1199;
end;
assume L1202: [ ( root-tree C484 ) , C487 ] in ( C461 . C488 );
L1203: C487 = ( root-tree [ C486 , C485 ] ) by L1202 , L1106 , L1195 , L1196;
L1204: C485 <= C488 by L1106 , L1195 , L1196 , L1202;
thus L1205: thesis by L1204 , L1104 , L1195 , L1196 , L1203;
end;
L1206: (for B664 being (DecoratedTree of (the carrier of D245)) holds (B664 in ( TS D245 ) implies S20[ B664 ])) from DTCONSTR:sch 7(L1193 , L1108);
L1207: (for B665 being set holds (B665 in (the carrier of C457) implies ( C460 . B665 ) = ( C461 . B665 )))
proof
let C489 being set;
assume L1208: C489 in (the carrier of C457);
reconsider D260 = C489 as (Element of C457) by L1208;
L1209: (for B666 , B667 being set holds ([ B666 , B667 ] in ( C460 . D260 ) iff [ B666 , B667 ] in ( C461 . D260 )))
proof
let C490 , C491 being set;
L1210: ( (the Sorts of D243) . D260 ) = ( ParsedTerms (C458 , D260) ) by L230
.= { B668 where B668 is (Element of ( TS ( DTConOSA C458 ) )) : ((ex B669 being (Element of C457) st (ex B670 being set st (B669 <= D260 & B670 in ( C458 . B669 ) & B668 = ( root-tree [ B670 , B669 ] )))) or (ex B671 being (OperSymbol of C457) st ([ B671 , (the carrier of C457) ] = ( B668 . ( {} ) ) & ( the_result_sort_of B671 ) <= D260))) };
thus L1211:now
assume L1212: [ C490 , C491 ] in ( C460 . D260 );
L1213: C490 in ( (the Sorts of D243) . D260 ) by L1212 , ZFMISC_1:87;
L1214: (ex B672 being (Element of ( TS ( DTConOSA C458 ) )) st (C490 = B672 & ((ex B673 being (Element of C457) st (ex B674 being set st (B673 <= D260 & B674 in ( C458 . B673 ) & B672 = ( root-tree [ B674 , B673 ] )))) or (ex B675 being (OperSymbol of C457) st ([ B675 , (the carrier of C457) ] = ( B672 . ( {} ) ) & ( the_result_sort_of B675 ) <= D260))))) by L1213 , L1210;
thus L1215: [ C490 , C491 ] in ( C461 . D260 ) by L1214 , L1206 , L1212;
end;
assume L1216: [ C490 , C491 ] in ( C461 . D260 );
L1217: C490 in ( (the Sorts of D243) . D260 ) by L1216 , ZFMISC_1:87;
L1218: (ex B676 being (Element of ( TS ( DTConOSA C458 ) )) st (C490 = B676 & ((ex B677 being (Element of C457) st (ex B678 being set st (B677 <= D260 & B678 in ( C458 . B677 ) & B676 = ( root-tree [ B678 , B677 ] )))) or (ex B679 being (OperSymbol of C457) st ([ B679 , (the carrier of C457) ] = ( B676 . ( {} ) ) & ( the_result_sort_of B679 ) <= D260))))) by L1217 , L1210;
thus L1219: thesis by L1218 , L1206 , L1216;
end;
thus L1220: thesis by L1209 , RELAT_1:def 2;
end;
thus L1221: thesis by L1207 , PBOOLE:3;
end;
L1222: S19[ ( PTCongruence C458 ) ]
proof
let C492 , C493 being (OperSymbol of C457);
let C494 being (Element of ( Args (C492 , ( ParsedTermsOSA C458 )) ));
let C495 being (Element of ( Args (C493 , ( ParsedTermsOSA C458 )) ));
let C496 being (Element of C457);
L1223: ( dom ( the_arity_of C493 ) ) = ( dom C495 ) by MSUALG_3:6;
L1224: ( D249 . C496 ) = { [ B680 , B681 ] where B680 , B681 is (Element of ( TS ( DTConOSA C458 ) )) : [ B680 , C496 ] in ( D248 . B681 ) } by L965;
reconsider D261 = C495 as (FinSequence of ( TS D245 )) by L520;
L1225: ( dom ( the_arity_of C492 ) ) = ( dom C494 ) by MSUALG_3:6;
reconsider D262 = C494 as (FinSequence of ( TS D245 )) by L520;
L1226: ( rng D262 ) c= ( TS D245 ) by FINSEQ_1:def 4;
reconsider D263 = ( D248 * D262 ) as (FinSequence of D247);
L1227: ( dom D248 ) = ( TS D245 ) by FUNCT_2:def 1;
L1228: ( len D263 ) = ( len D262 ) by L1227 , L1226 , FINSEQ_2:29;
L1229: ( dom D263 ) = ( dom D262 ) by L1228 , FINSEQ_3:29;
L1230: ( OSSym (C492 , C458) ) ==> ( roots C494 ) by L520;
L1231: ( D248 . ( ( OSSym (C492 , C458) ) -tree D262 ) ) = ( @ (( OSSym (C492 , C458) ) , D263) ) by L1230 , L774
.= { [ ( ( Den (B682 , ( ParsedTermsOSA C458 )) ) . B683 ) , B684 ] where B682 is (OperSymbol of C457) , B683 is (Element of ( Args (B682 , ( ParsedTermsOSA C458 )) )) , B684 is (Element of C457) : ((ex B685 being (OperSymbol of C457) st (( OSSym (C492 , C458) ) = [ B685 , (the carrier of C457) ] & B685 ~= B682 & ( len ( the_arity_of B685 ) ) = ( len ( the_arity_of B682 ) ) & ( the_result_sort_of B685 ) <= B684 & ( the_result_sort_of B682 ) <= B684)) & (ex B686 being (Element of ( (the carrier of C457) * )) st (( dom B686 ) = ( dom D263 ) & (for B687 being Nat holds (B687 in ( dom D263 ) implies [ ( B683 . B687 ) , ( B686 /. B687 ) ] in ( D263 . B687 )))))) };
L1232: ( OSSym (C493 , C458) ) ==> ( roots C495 ) by L520;
reconsider D264 = ( ( OSSym (C492 , C458) ) -tree D262 ) , D265 = ( ( OSSym (C493 , C458) ) -tree D261 ) as (Element of ( TS D245 )) by L1232 , L1230 , L505;
L1233: ( ( Den (C493 , D243) ) . C495 ) = ( ( ( PTOper C458 ) . C493 ) . C495 ) by MSUALG_1:def 6
.= ( ( PTDenOp (C493 , C458) ) . D261 ) by L424
.= ( ( OSSym (C493 , C458) ) -tree D261 ) by L1232 , L399;
L1234: ( ( Den (C492 , D243) ) . C494 ) = ( ( ( PTOper C458 ) . C492 ) . C494 ) by MSUALG_1:def 6
.= ( ( PTDenOp (C492 , C458) ) . D262 ) by L424
.= ( ( OSSym (C492 , C458) ) -tree D262 ) by L1230 , L399;
L1235: ( rng D261 ) c= ( TS D245 ) by FINSEQ_1:def 4;
thus L1236:now
assume L1237: [ ( ( Den (C492 , D243) ) . C494 ) , ( ( Den (C493 , D243) ) . C495 ) ] in ( D249 . C496 );
consider C497 , C498 being (Element of ( TS D245 )) such that L1238: [ ( ( Den (C492 , D243) ) . C494 ) , ( ( Den (C493 , D243) ) . C495 ) ] = [ C497 , C498 ] and L1239: [ C497 , C496 ] in ( D248 . C498 ) by L1237 , L1224;
L1240: ( ( Den (C492 , D243) ) . C494 ) = C497 by L1238 , XTUPLE_0:1;
L1241: ( ( Den (C493 , D243) ) . C495 ) = C498 by L1238 , XTUPLE_0:1;
L1242: [ C498 , C496 ] in ( D248 . C497 ) by L1239 , L780;
consider C499 being (OperSymbol of C457), C500 being (Element of ( Args (C499 , ( ParsedTermsOSA C458 )) )), C501 being (Element of C457) such that L1243: [ C498 , C496 ] = [ ( ( Den (C499 , D243) ) . C500 ) , C501 ] and L1244: (ex B688 being (OperSymbol of C457) st (( OSSym (C492 , C458) ) = [ B688 , (the carrier of C457) ] & B688 ~= C499 & ( len ( the_arity_of B688 ) ) = ( len ( the_arity_of C499 ) ) & ( the_result_sort_of B688 ) <= C501 & ( the_result_sort_of C499 ) <= C501)) and L1245: (ex B689 being (Element of ( (the carrier of C457) * )) st (( dom B689 ) = ( dom D263 ) & (for B690 being Nat holds (B690 in ( dom D263 ) implies [ ( C500 . B690 ) , ( B689 /. B690 ) ] in ( D263 . B690 ))))) by L1242 , L1234 , L1231 , L1240;
consider C502 being (OperSymbol of C457) such that L1246: ( OSSym (C492 , C458) ) = [ C502 , (the carrier of C457) ] and L1247: C502 ~= C499 and L1248: ( len ( the_arity_of C502 ) ) = ( len ( the_arity_of C499 ) ) and L1249: ( the_result_sort_of C502 ) <= C501 and L1250: ( the_result_sort_of C499 ) <= C501 by L1244;
L1251: C492 = C502 by L1246 , XTUPLE_0:1;
reconsider D266 = C500 as (FinSequence of ( TS D245 )) by L520;
L1252: ( OSSym (C499 , C458) ) ==> ( roots C500 ) by L520;
L1253: C498 = ( ( Den (C499 , D243) ) . C500 ) by L1243 , XTUPLE_0:1;
L1254: ( ( Den (C499 , D243) ) . C500 ) = ( ( ( PTOper C458 ) . C499 ) . C500 ) by MSUALG_1:def 6
.= ( ( PTDenOp (C499 , C458) ) . D266 ) by L424
.= ( ( OSSym (C499 , C458) ) -tree D266 ) by L1252 , L399;
L1255: ( OSSym (C499 , C458) ) = ( OSSym (C493 , C458) ) by L1254 , L1233 , L1241 , L1253 , TREES_4:15;
L1256: C496 = C501 by L1243 , XTUPLE_0:1;
thus L1257: (C492 ~= C493 & ( len ( the_arity_of C492 ) ) = ( len ( the_arity_of C493 ) ) & ( the_result_sort_of C492 ) <= C496 & ( the_result_sort_of C493 ) <= C496) by L1256 , L1247 , L1248 , L1249 , L1250 , L1251 , L1255 , XTUPLE_0:1;
consider C503 being (Element of ( (the carrier of C457) * )) such that L1258: ( dom C503 ) = ( dom D263 ) and L1259: (for B691 being Nat holds (B691 in ( dom D263 ) implies [ ( C500 . B691 ) , ( C503 /. B691 ) ] in ( D263 . B691 ))) by L1245;
take D267 = C503;
thus L1260: ( dom D267 ) = ( dom C494 ) by L1228 , L1258 , FINSEQ_3:29;
let C504 being Nat;
assume that
L1261: C504 in ( dom D267 );
L1262: ( D262 . C504 ) in ( rng D262 ) by L1229 , L1258 , L1261 , FUNCT_1:3;
L1263: D266 = D261 by L1233 , L1241 , L1253 , L1254 , TREES_4:15;
L1264: C499 = C493 by L1255 , XTUPLE_0:1;
L1265: ( dom ( the_arity_of C492 ) ) = ( dom ( the_arity_of C493 ) ) by L1264 , L1248 , L1251 , FINSEQ_3:29;
L1266: ( D261 . C504 ) in ( rng D261 ) by L1265 , L1229 , L1225 , L1223 , L1258 , L1261 , FUNCT_1:3;
reconsider D268 = ( D261 . C504 ) , D269 = ( D262 . C504 ) as (Element of ( TS D245 )) by L1266 , L1226 , L1235 , L1262;
L1267: [ ( C500 . C504 ) , ( D267 /. C504 ) ] in ( D263 . C504 ) by L1258 , L1259 , L1261;
L1268: [ ( D261 . C504 ) , ( D267 /. C504 ) ] in ( D248 . ( D262 . C504 ) ) by L1267 , L1263 , L1258 , L1261 , FUNCT_1:12;
L1269: [ D269 , ( D267 /. C504 ) ] in ( D248 . D268 ) by L1268 , L780;
L1270: ( D249 . ( D267 /. C504 ) ) = { [ B692 , B693 ] where B692 , B693 is (Element of ( TS ( DTConOSA C458 ) )) : [ B692 , ( D267 /. C504 ) ] in ( D248 . B693 ) } by L965;
thus L1271: [ ( C494 . C504 ) , ( C495 . C504 ) ] in ( D249 . ( D267 /. C504 ) ) by L1270 , L1269;
end;
assume that
L1272: C492 ~= C493
and
L1273: ( len ( the_arity_of C492 ) ) = ( len ( the_arity_of C493 ) )
and
L1274: ( the_result_sort_of C492 ) <= C496
and
L1275: ( the_result_sort_of C493 ) <= C496
and
L1276: (ex B694 being (Element of ( (the carrier of C457) * )) st (( dom B694 ) = ( dom C494 ) & (for B695 being Nat holds (B695 in ( dom B694 ) implies [ ( C494 . B695 ) , ( C495 . B695 ) ] in ( D249 . ( B694 /. B695 ) )))));
consider C505 being (Element of ( (the carrier of C457) * )) such that L1277: ( dom C505 ) = ( dom C494 ) and L1278: (for B696 being Nat holds (B696 in ( dom C505 ) implies [ ( C494 . B696 ) , ( C495 . B696 ) ] in ( D249 . ( C505 /. B696 ) ))) by L1276;
L1279: (for B697 being Nat holds (B697 in ( dom D263 ) implies [ ( C495 . B697 ) , ( C505 /. B697 ) ] in ( D263 . B697 )))
proof
let C506 being Nat;
assume that
L1280: C506 in ( dom D263 );
L1281: ( D249 . ( C505 /. C506 ) ) = { [ B698 , B699 ] where B698 , B699 is (Element of ( TS ( DTConOSA C458 ) )) : [ B698 , ( C505 /. C506 ) ] in ( D248 . B699 ) } by L965;
L1282: [ ( C494 . C506 ) , ( C495 . C506 ) ] in ( D249 . ( C505 /. C506 ) ) by L1229 , L1277 , L1278 , L1280;
consider C507 , C508 being (Element of ( TS ( DTConOSA C458 ) )) such that L1283: [ ( C494 . C506 ) , ( C495 . C506 ) ] = [ C507 , C508 ] and L1284: [ C507 , ( C505 /. C506 ) ] in ( D248 . C508 ) by L1282 , L1281;
L1285: ( C494 . C506 ) = C507 by L1283 , XTUPLE_0:1;
L1286: ( C495 . C506 ) = C508 by L1283 , XTUPLE_0:1;
L1287: [ C508 , ( C505 /. C506 ) ] in ( D248 . C507 ) by L1284 , L780;
thus L1288: thesis by L1287 , L1280 , L1285 , L1286 , FUNCT_1:12;
end;
L1289: [ ( ( Den (C493 , D243) ) . C495 ) , C496 ] in ( D248 . ( ( OSSym (C492 , C458) ) -tree D262 ) ) by L1279 , L1229 , L1231 , L1272 , L1273 , L1274 , L1275 , L1277;
L1290: [ D264 , C496 ] in ( D248 . D265 ) by L1289 , L1233 , L780;
thus L1291: [ ( ( Den (C492 , D243) ) . C494 ) , ( ( Den (C493 , D243) ) . C495 ) ] in ( D249 . C496 ) by L1290 , L1224 , L1234 , L1233;
end;
L1292: S18[ D249 ]
proof
let C509 , C510 being (Element of C457);
let C511 being set;
assume that
L1293: C511 in ( C458 . C509 );
reconsider D270 = [ C511 , C509 ] as (Terminal of D245) by L1293 , L189;
L1294: ( D249 . C510 ) = { [ B700 , B701 ] where B700 , B701 is (Element of ( TS ( DTConOSA C458 ) )) : [ B700 , C510 ] in ( D248 . B701 ) } by L965;
L1295: ( root-tree [ C511 , C509 ] ) in ( D244 . C509 ) by L1293 , L455;
thus L1296:now
assume L1297: C509 <= C510;
L1298: [ ( root-tree D270 ) , C509 ] in ( D248 . ( root-tree D270 ) ) by L1295 , L780;
L1299: [ ( root-tree D270 ) , C510 ] in ( D248 . ( root-tree D270 ) ) by L1298 , L1295 , L1297 , L879;
thus L1300: [ ( root-tree [ C511 , C509 ] ) , ( root-tree [ C511 , C509 ] ) ] in ( D249 . C510 ) by L1299 , L1294;
end;
let C512 being set;
assume L1301: ([ ( root-tree [ C511 , C509 ] ) , C512 ] in ( D249 . C510 ) or [ C512 , ( root-tree [ C511 , C509 ] ) ] in ( D249 . C510 ));
L1302: ( root-tree [ C511 , C509 ] ) in ( D244 . C510 ) by L1301 , ZFMISC_1:87;
L1303: ( field ( D249 . C510 ) ) = ( D244 . C510 ) by ORDERS_1:12;
L1304: ( D249 . C510 ) is_symmetric_in ( D244 . C510 ) by L1303 , RELAT_2:def 11;
L1305: ( D248 . ( root-tree D270 ) ) = ( @ D270 ) by L774
.= { [ ( root-tree D270 ) , B702 ] where B702 is (Element of C457) : (ex B703 being (Element of C457) st (ex B704 being set st (B704 in ( C458 . B703 ) & D270 = [ B704 , B703 ] & B703 <= B702))) };
L1306: C512 in ( D244 . C510 ) by L1301 , ZFMISC_1:87;
L1307: [ C512 , ( root-tree D270 ) ] in ( D249 . C510 ) by L1306 , L1304 , L1301 , L1302 , RELAT_2:def 3;
consider C513 , C514 being (Element of ( TS D245 )) such that L1308: [ C512 , ( root-tree D270 ) ] = [ C513 , C514 ] and L1309: [ C513 , C510 ] in ( D248 . C514 ) by L1307 , L1294;
L1310: C512 = C513 by L1308 , XTUPLE_0:1;
L1311: ( root-tree D270 ) = C514 by L1308 , XTUPLE_0:1;
consider C515 being (Element of C457) such that L1312: [ C513 , C510 ] = [ ( root-tree D270 ) , C515 ] and L1313: (ex B705 being (Element of C457) st (ex B706 being set st (B706 in ( C458 . B705 ) & D270 = [ B706 , B705 ] & B705 <= C515))) by L1311 , L1305 , L1309;
L1314: C510 = C515 by L1312 , XTUPLE_0:1;
thus L1315: thesis by L1314 , L1310 , L1312 , L1313 , XTUPLE_0:1;
end;
thus L1316: thesis by L1292 , L1103 , L1222;
end;
theorem
L1317: (for B707 being  locally_directed OrderSortedSign holds (for B708 being  non-empty (ManySortedSet of B707) holds ( PTCongruence B708 ) is  monotone))
proof
let C516 being  locally_directed OrderSortedSign;
let C517 being  non-empty (ManySortedSet of C516);
set D271 = ( ParsedTermsOSA C517 );
set D272 = ( PTCongruence C517 );
thus L1318: D272 is  monotone
proof
let C518 , C519 being (OperSymbol of C516);
assume that
L1319: C518 <= C519;
L1320: C518 ~= C519 by L1319 , OSALG_1:def 20;
L1321: ( the_result_sort_of C518 ) <= ( the_result_sort_of C519 ) by L1319 , OSALG_1:def 20;
let C520 being (Element of ( Args (C518 , D271) ));
let C521 being (Element of ( Args (C519 , D271) ));
assume that
L1322: (for B709 being Nat holds (B709 in ( dom C520 ) implies [ ( C520 . B709 ) , ( C521 . B709 ) ] in ( D272 . ( ( the_arity_of C519 ) /. B709 ) )));
L1323: ( the_arity_of C518 ) <= ( the_arity_of C519 ) by L1319 , OSALG_1:def 20;
L1324: ( len ( the_arity_of C518 ) ) = ( len ( the_arity_of C519 ) ) by L1323 , OSALG_1:def 6;
L1325: ( dom ( the_arity_of C519 ) ) = ( dom ( the_arity_of C518 ) ) by L1324 , FINSEQ_3:29;
L1326: ( dom ( the_arity_of C519 ) ) = ( dom C520 ) by L1325 , MSUALG_3:6;
thus L1327: thesis by L1326 , L1322 , L1320 , L1321 , L1324 , L1102;
end;

end;
registration
let C522 being  locally_directed OrderSortedSign;
let C523 being  non-empty (ManySortedSet of C522);
cluster ( PTCongruence C523 ) ->  monotone;
coherence by L1317;
end;
definition
let C524 being  locally_directed OrderSortedSign;
let C525 being  non-empty (ManySortedSet of C524);
let C526 being (Element of C524);
func PTVars (C526 , C525) -> (Subset of ( (the Sorts of ( ParsedTermsOSA C525 )) . C526 )) means 
:L1320: (for B710 being set holds (B710 in it iff (ex B711 being set st (B711 in ( C525 . C526 ) & B710 = ( root-tree [ B711 , C526 ] )))));
existence
proof
defpred S21[ set ] means (ex B712 being set st (B712 in ( C525 . C526 ) & $1 = ( root-tree [ B712 , C526 ] )));
set D273 = ( DTConOSA C525 );
set D274 = ( ParsedTermsOSA C525 );
set D275 = (the Sorts of D274);
consider C527 being set such that L1321: (for R6 being set holds (R6 in C527 iff (R6 in ( D275 . C526 ) & S21[ R6 ]))) from XBOOLE_0:sch 1;
L1322: C527 c= ( D275 . C526 )
proof
let R6 being set;
assume L1323: R6 in C527;
thus L1324: thesis by L1323 , L1321;
end;
reconsider D276 = C527 as (Subset of ( D275 . C526 )) by L1322;
L1325: (for R6 being set holds (R6 in D276 iff S21[ R6 ]))
proof
L1326: ( dom ( coprod C525 ) ) = (the carrier of C524) by PARTFUN1:def 2;
L1327: ( ( coprod C525 ) . C526 ) in ( rng ( coprod C525 ) ) by L1326 , FUNCT_1:def 3;
L1328: ( coprod (C526 , C525) ) in ( rng ( coprod C525 ) ) by L1327 , MSAFREE:def 3;
L1329: ( Terminals D273 ) = ( Union ( coprod C525 ) ) by L58;
set D277 = { B713 where B713 is (Element of ( TS D273 )) : ((ex B714 being (Element of C524) st (ex B715 being set st (B714 <= C526 & B715 in ( C525 . B714 ) & B713 = ( root-tree [ B715 , B714 ] )))) or (ex B716 being (OperSymbol of C524) st ([ B716 , (the carrier of C524) ] = ( B713 . ( {} ) ) & ( the_result_sort_of B716 ) <= C526))) };
let R6 being set;
thus L1330: (R6 in D276 implies S21[ R6 ]) by L1321;
assume L1331: S21[ R6 ];
consider C528 being set such that L1332: C528 in ( C525 . C526 ) and L1333: R6 = ( root-tree [ C528 , C526 ] ) by L1331;
L1334: ( ( ParsedTerms C525 ) . C526 ) = ( ParsedTerms (C525 , C526) ) by L230;
set D278 = [ C528 , C526 ];
L1335: D278 in ( coprod (C526 , C525) ) by L1332 , MSAFREE:def 2;
L1336: D278 in ( union ( rng ( coprod C525 ) ) ) by L1335 , L1328 , TARSKI:def 4;
L1337: D278 in ( Terminals D273 ) by L1336 , L1329 , CARD_3:def 4;
reconsider D279 = D278 as (Symbol of D273) by L1337;
reconsider D280 = ( root-tree D279 ) as (Element of ( TS D273 )) by L1337 , DTCONSTR:def 1;
L1338: D280 in D277 by L1332;
thus L1339: thesis by L1338 , L1321 , L1331 , L1333 , L1334;
end;
thus L1340: thesis by L1325;
end;
uniqueness
proof
set D281 = ( ParsedTermsOSA C525 );
set D282 = (the Sorts of D281);
let C529 , C530 being (Subset of ( D282 . C526 ));
assume that
L1341: (for B717 being set holds (B717 in C529 iff (ex B718 being set st (B718 in ( C525 . C526 ) & B717 = ( root-tree [ B718 , C526 ] )))))
and
L1342: (for B719 being set holds (B719 in C530 iff (ex B720 being set st (B720 in ( C525 . C526 ) & B719 = ( root-tree [ B720 , C526 ] )))));
thus L1343: C529 c= C530
proof
let C531 being set;
assume L1344: C531 in C529;
L1345: (ex B721 being set st (B721 in ( C525 . C526 ) & C531 = ( root-tree [ B721 , C526 ] ))) by L1344 , L1341;
thus L1346: thesis by L1345 , L1342;
end;

let C532 being set;
assume L1347: C532 in C530;
L1348: (ex B722 being set st (B722 in ( C525 . C526 ) & C532 = ( root-tree [ B722 , C526 ] ))) by L1347 , L1342;
thus L1349: thesis by L1348 , L1341;
end;
end;
registration
let C533 being  locally_directed OrderSortedSign;
let C534 being  non-empty (ManySortedSet of C533);
let C535 being (Element of C533);
cluster ( PTVars (C535 , C534) ) -> non  empty;
coherence
proof
consider R6 being set such that L1351: R6 in ( C534 . C535 ) by XBOOLE_0:def 1;
L1352: (ex B723 being set st (B723 in ( C534 . C535 ) & ( root-tree [ R6 , C535 ] ) = ( root-tree [ B723 , C535 ] ))) by L1351;
thus L1353: thesis by L1352 , L1320;
end;
end;
theorem
L1355: (for B724 being  locally_directed OrderSortedSign holds (for B725 being  non-empty (ManySortedSet of B724) holds (for B726 being (Element of B724) holds ( PTVars (B726 , B725) ) = { ( root-tree B727 ) where B727 is (Symbol of ( DTConOSA B725 )) : (B727 in ( Terminals ( DTConOSA B725 ) ) & ( B727 `2 ) = B726) })))
proof
let C536 being  locally_directed OrderSortedSign;
let C537 being  non-empty (ManySortedSet of C536);
let C538 being (Element of C536);
set D283 = ( DTConOSA C537 );
set D284 = { ( root-tree B728 ) where B728 is (Symbol of D283) : (B728 in ( Terminals D283 ) & ( B728 `2 ) = C538) };
thus L1356: ( PTVars (C538 , C537) ) c= D284
proof
let C539 being set;
assume L1357: C539 in ( PTVars (C538 , C537) );
consider C540 being set such that L1358: C540 in ( C537 . C538 ) and L1359: C539 = ( root-tree [ C540 , C538 ] ) by L1357 , L1320;
L1360: [ C540 , C538 ] in ( Terminals D283 ) by L1358 , L189;
reconsider D285 = [ C540 , C538 ] as (Symbol of D283) by L1360;
L1361: ( D285 `2 ) = C538 by MCART_1:7;
thus L1362: thesis by L1361 , L1359 , L1360;
end;

let C541 being set;
assume L1363: C541 in D284;
consider C542 being (Symbol of D283) such that L1364: C541 = ( root-tree C542 ) and L1365: C542 in ( Terminals D283 ) and L1366: ( C542 `2 ) = C538 by L1363;
consider C543 being (Element of C536), C544 being set such that L1367: C544 in ( C537 . C543 ) and L1368: C542 = [ C544 , C543 ] by L1365 , L189;
L1369: C538 = C543 by L1366 , L1368 , MCART_1:7;
thus L1370: thesis by L1369 , L1364 , L1367 , L1368 , L1320;
end;
definition
let C545 being  locally_directed OrderSortedSign;
let C546 being  non-empty (ManySortedSet of C545);
func PTVars C546 -> (MSSubset of ( ParsedTermsOSA C546 )) means 
:L1371: (for B729 being (Element of C545) holds ( it . B729 ) = ( PTVars (B729 , C546) ));
existence
proof
deffunc H9((Element of C545)) = ( PTVars ($1 , C546) );
set D286 = ( ParsedTermsOSA C546 );
consider C547 being Function such that L1372: (( dom C547 ) = (the carrier of C545) & (for B730 being (Element of C545) holds ( C547 . B730 ) = H9(B730))) from FUNCT_1:sch 4;
reconsider D287 = C547 as (ManySortedSet of (the carrier of C545)) by L1372 , PARTFUN1:def 2 , RELAT_1:def 18;
L1373: D287 c= (the Sorts of D286)
proof
let R6 being set;
assume L1374: R6 in (the carrier of C545);
reconsider D288 = R6 as (Element of C545) by L1374;
L1375: ( D287 . D288 ) = ( PTVars (D288 , C546) ) by L1372;
thus L1376: thesis by L1375;
end;
reconsider D289 = D287 as (MSSubset of D286) by L1373 , PBOOLE:def 18;
take D289;
thus L1377: thesis by L1372;
end;
uniqueness
proof
let C548 , C549 being (MSSubset of ( ParsedTermsOSA C546 ));
assume that
L1378: (for B731 being (Element of C545) holds ( C548 . B731 ) = ( PTVars (B731 , C546) ))
and
L1379: (for B732 being (Element of C545) holds ( C549 . B732 ) = ( PTVars (B732 , C546) ));
L1380: (for B733 being set holds (B733 in (the carrier of C545) implies ( C548 . B733 ) = ( C549 . B733 )))
proof
let C550 being set;
assume L1381: C550 in (the carrier of C545);
reconsider D290 = C550 as (SortSymbol of C545) by L1381;
L1382: ( C548 . D290 ) = ( PTVars (D290 , C546) ) by L1378;
thus L1383: thesis by L1382 , L1379;
end;
thus L1384: thesis by L1380 , PBOOLE:3;
end;
end;
theorem
L1386: (for B734 being  locally_directed OrderSortedSign holds (for B735 being  non-empty (ManySortedSet of B734) holds ( PTVars B735 ) is  non-empty))
proof
let C551 being  locally_directed OrderSortedSign;
let C552 being  non-empty (ManySortedSet of C551);
let R6 being set;
assume L1387: R6 in (the carrier of C551);
reconsider D291 = R6 as (Element of C551) by L1387;
L1388: ( ( PTVars C552 ) . D291 ) = ( PTVars (D291 , C552) ) by L1371;
thus L1389: thesis by L1388;
end;
definition
let C553 being  locally_directed OrderSortedSign;
let C554 being  non-empty (ManySortedSet of C553);
let C555 being (Element of C553);
func OSFreeGen (C555 , C554) -> (Subset of ( (the Sorts of ( FreeOSA C554 )) . C555 )) means 
:L1390: (for B736 being set holds (B736 in it iff (ex B737 being set st (B737 in ( C554 . C555 ) & B736 = ( ( ( OSNat_Hom (( ParsedTermsOSA C554 ) , ( LCongruence C554 )) ) . C555 ) . ( root-tree [ B737 , C555 ] ) )))));
existence
proof
set D292 = ( DTConOSA C554 );
set D293 = ( ParsedTermsOSA C554 );
set D294 = ( LCongruence C554 );
set D295 = (the Sorts of ( FreeOSA C554 ));
set D296 = ( OSNat_Hom (( ParsedTermsOSA C554 ) , ( LCongruence C554 )) );
defpred S22[ set ] means (ex B738 being set st (B738 in ( C554 . C555 ) & $1 = ( ( D296 . C555 ) . ( root-tree [ B738 , C555 ] ) )));
consider C556 being set such that L1391: (for R6 being set holds (R6 in C556 iff (R6 in ( D295 . C555 ) & S22[ R6 ]))) from XBOOLE_0:sch 1;
L1392: C556 c= ( D295 . C555 )
proof
let R6 being set;
assume L1393: R6 in C556;
thus L1394: thesis by L1393 , L1391;
end;
reconsider D297 = C556 as (Subset of ( D295 . C555 )) by L1392;
L1395: (for R6 being set holds (R6 in D297 iff S22[ R6 ]))
proof
L1396: ( dom ( coprod C554 ) ) = (the carrier of C553) by PARTFUN1:def 2;
L1397: ( ( coprod C554 ) . C555 ) in ( rng ( coprod C554 ) ) by L1396 , FUNCT_1:def 3;
L1398: ( coprod (C555 , C554) ) in ( rng ( coprod C554 ) ) by L1397 , MSAFREE:def 3;
L1399: ( Terminals D292 ) = ( Union ( coprod C554 ) ) by L58;
set D298 = { B739 where B739 is (Element of ( TS D292 )) : ((ex B740 being (Element of C553) st (ex B741 being set st (B740 <= C555 & B741 in ( C554 . B740 ) & B739 = ( root-tree [ B741 , B740 ] )))) or (ex B742 being (OperSymbol of C553) st ([ B742 , (the carrier of C553) ] = ( B739 . ( {} ) ) & ( the_result_sort_of B742 ) <= C555))) };
let R6 being set;
thus L1400: (R6 in D297 implies S22[ R6 ]) by L1391;
assume L1401: S22[ R6 ];
consider C557 being set such that L1402: C557 in ( C554 . C555 ) and L1403: R6 = ( ( D296 . C555 ) . ( root-tree [ C557 , C555 ] ) ) by L1401;
L1404: ( ( ParsedTerms C554 ) . C555 ) = ( ParsedTerms (C554 , C555) ) by L230;
set D299 = [ C557 , C555 ];
L1405: D299 in ( coprod (C555 , C554) ) by L1402 , MSAFREE:def 2;
L1406: D299 in ( union ( rng ( coprod C554 ) ) ) by L1405 , L1398 , TARSKI:def 4;
L1407: D299 in ( Terminals D292 ) by L1406 , L1399 , CARD_3:def 4;
reconsider D300 = D299 as (Symbol of D292) by L1407;
reconsider D301 = ( root-tree D300 ) as (Element of ( TS D292 )) by L1407 , DTCONSTR:def 1;
L1408: D301 in D298 by L1402;
L1409: ( ( D296 . C555 ) . D301 ) in ( (the Sorts of ( QuotOSAlg (D293 , D294) )) . C555 ) by L1408 , L1404 , FUNCT_2:5;
thus L1410: thesis by L1409 , L1391 , L1402 , L1403;
end;
thus L1411: thesis by L1395;
end;
uniqueness
proof
set D302 = (the Sorts of ( FreeOSA C554 ));
set D303 = ( OSNat_Hom (( ParsedTermsOSA C554 ) , ( LCongruence C554 )) );
let C558 , C559 being (Subset of ( D302 . C555 ));
assume that
L1412: (for B743 being set holds (B743 in C558 iff (ex B744 being set st (B744 in ( C554 . C555 ) & B743 = ( ( D303 . C555 ) . ( root-tree [ B744 , C555 ] ) )))))
and
L1413: (for B745 being set holds (B745 in C559 iff (ex B746 being set st (B746 in ( C554 . C555 ) & B745 = ( ( D303 . C555 ) . ( root-tree [ B746 , C555 ] ) )))));
thus L1414: C558 c= C559
proof
let C560 being set;
assume L1415: C560 in C558;
L1416: (ex B747 being set st (B747 in ( C554 . C555 ) & C560 = ( ( D303 . C555 ) . ( root-tree [ B747 , C555 ] ) ))) by L1415 , L1412;
thus L1417: thesis by L1416 , L1413;
end;

let C561 being set;
assume L1418: C561 in C559;
L1419: (ex B748 being set st (B748 in ( C554 . C555 ) & C561 = ( ( D303 . C555 ) . ( root-tree [ B748 , C555 ] ) ))) by L1418 , L1413;
thus L1420: thesis by L1419 , L1412;
end;
end;
registration
let C562 being  locally_directed OrderSortedSign;
let C563 being  non-empty (ManySortedSet of C562);
let C564 being (Element of C562);
cluster ( OSFreeGen (C564 , C563) ) -> non  empty;
coherence
proof
set D304 = ( OSNat_Hom (( ParsedTermsOSA C563 ) , ( LCongruence C563 )) );
defpred S23[ set ] means (ex B749 being set st (B749 in ( C563 . C564 ) & $1 = ( ( D304 . C564 ) . ( root-tree [ B749 , C564 ] ) )));
consider R6 being set such that L1422: R6 in ( C563 . C564 ) by XBOOLE_0:def 1;
L1423: S23[ ( ( D304 . C564 ) . ( root-tree [ R6 , C564 ] ) ) ] by L1422;
thus L1424: thesis by L1423 , L1390;
end;
end;
theorem
L1426: (for B750 being  locally_directed OrderSortedSign holds (for B751 being  non-empty (ManySortedSet of B750) holds (for B752 being (Element of B750) holds ( OSFreeGen (B752 , B751) ) = { ( ( ( OSNat_Hom (( ParsedTermsOSA B751 ) , ( LCongruence B751 )) ) . B752 ) . ( root-tree B753 ) ) where B753 is (Symbol of ( DTConOSA B751 )) : (B753 in ( Terminals ( DTConOSA B751 ) ) & ( B753 `2 ) = B752) })))
proof
let C565 being  locally_directed OrderSortedSign;
let C566 being  non-empty (ManySortedSet of C565);
let C567 being (Element of C565);
set D305 = ( DTConOSA C566 );
set D306 = ( OSNat_Hom (( ParsedTermsOSA C566 ) , ( LCongruence C566 )) );
set D307 = { ( ( D306 . C567 ) . ( root-tree B754 ) ) where B754 is (Symbol of D305) : (B754 in ( Terminals D305 ) & ( B754 `2 ) = C567) };
thus L1427: ( OSFreeGen (C567 , C566) ) c= D307
proof
let C568 being set;
assume L1428: C568 in ( OSFreeGen (C567 , C566) );
consider C569 being set such that L1429: C569 in ( C566 . C567 ) and L1430: C568 = ( ( D306 . C567 ) . ( root-tree [ C569 , C567 ] ) ) by L1428 , L1390;
L1431: [ C569 , C567 ] in ( Terminals D305 ) by L1429 , L189;
reconsider D308 = [ C569 , C567 ] as (Symbol of D305) by L1431;
L1432: ( D308 `2 ) = C567 by MCART_1:7;
thus L1433: thesis by L1432 , L1430 , L1431;
end;

let C570 being set;
assume L1434: C570 in D307;
consider C571 being (Symbol of D305) such that L1435: C570 = ( ( D306 . C567 ) . ( root-tree C571 ) ) and L1436: C571 in ( Terminals D305 ) and L1437: ( C571 `2 ) = C567 by L1434;
consider C572 being (Element of C565), C573 being set such that L1438: C573 in ( C566 . C572 ) and L1439: C571 = [ C573 , C572 ] by L1436 , L189;
L1440: C567 = C572 by L1437 , L1439 , MCART_1:7;
thus L1441: thesis by L1440 , L1435 , L1438 , L1439 , L1390;
end;
definition
let C574 being  locally_directed OrderSortedSign;
let C575 being  non-empty (ManySortedSet of C574);
func OSFreeGen C575 -> (OSGeneratorSet of ( FreeOSA C575 )) means 
:L1442: (for B755 being (Element of C574) holds ( it . B755 ) = ( OSFreeGen (B755 , C575) ));
existence
proof
deffunc H10((Element of C574)) = ( OSFreeGen ($1 , C575) );
set D309 = ( FreeOSA C575 );
set D310 = ( DTConOSA C575 );
set D311 = ( ParsedTermsOSA C575 );
set D312 = (the Sorts of ( FreeOSA C575 ));
set D313 = ( OSNat_Hom (( ParsedTermsOSA C575 ) , ( LCongruence C575 )) );
reconsider D314 = D313 as (ManySortedFunction of D311 , D309);
L1443: D314 is  order-sorted by OSALG_4:15;
reconsider D315 = D312 as (OrderSortedSet of C574);
consider C576 being Function such that L1444: (( dom C576 ) = (the carrier of C574) & (for B756 being (Element of C574) holds ( C576 . B756 ) = H10(B756))) from FUNCT_1:sch 4;
reconsider D316 = C576 as (ManySortedSet of (the carrier of C574)) by L1444 , PARTFUN1:def 2 , RELAT_1:def 18;
L1445: D316 c= (the Sorts of D309)
proof
let R6 being set;
assume L1446: R6 in (the carrier of C574);
reconsider D317 = R6 as (SortSymbol of C574) by L1446;
L1447: ( D316 . D317 ) = ( OSFreeGen (D317 , C575) ) by L1444;
thus L1448: thesis by L1447;
end;
reconsider D318 = D316 as (MSSubset of D309) by L1445 , PBOOLE:def 18;
L1449: ( OSCl D318 ) c= D315 by L1445 , OSALG_2:8;
L1450: ( OSCl D318 ) is (ManySortedSubset of (the Sorts of D309)) by L1449 , PBOOLE:def 18;
reconsider D319 = ( OSCl D318 ) as (OSSubset of D309) by L1450 , OSALG_2:def 2;
L1451: D319 is (OSSubset of ( GenOSAlg D319 )) by OSALG_2:def 12;
L1452: D319 c= (the Sorts of ( GenOSAlg D319 )) by L1451 , PBOOLE:def 18;
L1453: D318 c= D319 by OSALG_2:7;
L1454: D318 c= (the Sorts of ( GenOSAlg D319 )) by L1453 , L1452 , PBOOLE:13;
L1455: D314 is_epimorphism D311 , D309 by OSALG_4:15;
L1456: D314 is  "onto" by L1455 , MSUALG_3:def 8;
L1457: D314 is_homomorphism D311 , D309 by L1455 , MSUALG_3:def 8;
L1458: (the Sorts of ( GenOSAlg D319 )) = (the Sorts of D309)
proof
defpred S24[ set ] means (for B757 being (Element of C574) holds ($1 in ( dom ( D314 . B757 ) ) implies ( ( D314 . B757 ) . $1 ) in ( (the Sorts of ( GenOSAlg D319 )) . B757 )));
reconsider D320 = (the Sorts of ( GenOSAlg D319 )) as (OrderSortedSet of C574) by OSALG_1:17;
L1459: (the Sorts of ( GenOSAlg D319 )) is (MSSubset of D309) by MSUALG_2:def 9;
L1460: (the Sorts of ( GenOSAlg D319 )) c= (the Sorts of D309) by L1459 , PBOOLE:def 18;
L1461: (for B758 being (Symbol of D310) holds (for B759 being (FinSequence of ( TS D310 )) holds ((B758 ==> ( roots B759 ) & (for B760 being (DecoratedTree of (the carrier of D310)) holds (B760 in ( rng B759 ) implies S24[ B760 ]))) implies S24[ ( B758 -tree B759 ) ])))
proof
set D321 = ( GenOSAlg D319 );
set D322 = ( [: (the carrier' of C574) , { (the carrier of C574) } :] \/ ( Union ( coprod (C575 qua (ManySortedSet of C574)) ) ) );
let C577 being (Symbol of D310);
let C578 being (FinSequence of ( TS D310 ));
assume that
L1462: C577 ==> ( roots C578 )
and
L1463: (for B761 being (DecoratedTree of (the carrier of D310)) holds (B761 in ( rng C578 ) implies S24[ B761 ]));
L1464: [ C577 , ( roots C578 ) ] in (the Rules of D310) by L1462 , LANG1:def 1;
reconsider D323 = ( roots C578 ) as (Element of ( D322 * )) by L1464 , ZFMISC_1:87;
reconsider D324 = C577 as (Element of D322);
L1465: [ D324 , D323 ] in ( OSREL C575 ) by L1462 , LANG1:def 1;
L1466: D324 in [: (the carrier' of C574) , { (the carrier of C574) } :] by L1465 , L21;
consider C579 being (Element of (the carrier' of C574)), C580 being (Element of { (the carrier of C574) }) such that L1467: D324 = [ C579 , C580 ] by L1466 , DOMAIN_1:1;
let C581 being (Element of C574);
assume L1468: ( C577 -tree C578 ) in ( dom ( D314 . C581 ) );
L1469: ( C577 -tree C578 ) in ( (the Sorts of D311) . C581 ) by L1468;
L1470: ( C577 -tree C578 ) in ( ParsedTerms (C575 , C581) ) by L1469 , L230;
consider C582 being (Element of ( TS D310 )) such that L1471: ( C577 -tree C578 ) = C582 and L1472: ((ex B762 being (Element of C574) st (ex B763 being set st (B762 <= C581 & B763 in ( C575 . B762 ) & C582 = ( root-tree [ B763 , B762 ] )))) or (ex B764 being (OperSymbol of C574) st ([ B764 , (the carrier of C574) ] = ( C582 . ( {} ) ) & ( the_result_sort_of B764 ) <= C581))) by L1470;
L1473: ( Seg ( len D323 ) ) = ( dom D323 ) by FINSEQ_1:def 3;
L1474: C580 = (the carrier of C574) by TARSKI:def 1;
L1475: (not (ex B765 being (Element of C574) st (ex B766 being set st (B765 <= C581 & B766 in ( C575 . B765 ) & C582 = ( root-tree [ B766 , B765 ] )))))
proof
given C583 being (Element of C574) , C584 being set such that
L1476: C583 <= C581
and
L1477: C584 in ( C575 . C583 )
and
L1478: C582 = ( root-tree [ C584 , C583 ] );

L1479: [ C584 , C583 ] = ( ( C577 -tree C578 ) . ( {} ) ) by L1471 , L1478 , TREES_4:3
.= [ C579 , C580 ] by L1467 , TREES_4:def 4;
L1480: C583 = (the carrier of C574) by L1479 , L1474 , XTUPLE_0:1;
L1481: C583 in C583 by L1480;
thus L1482: contradiction by L1481;
end;
consider C585 being (OperSymbol of C574) such that L1483: [ C585 , (the carrier of C574) ] = ( C582 . ( {} ) ) and L1484: ( the_result_sort_of C585 ) <= C581 by L1475 , L1472;
set D325 = ( the_arity_of C579 );
set D326 = ( the_result_sort_of C579 );
L1485: ( dom ( roots C578 ) ) = ( dom C578 ) by TREES_3:def 18;
L1486: [ C577 , ( roots C578 ) ] in ( OSREL C575 ) by L1462 , LANG1:def 1;
L1487: ( len D323 ) = ( len D325 ) by L1486 , L1467 , L1474 , L43;
L1488: ( Seg ( len D325 ) ) = ( dom D325 ) by FINSEQ_1:def 3;
reconsider D327 = (the Sorts of D321) as (MSSubset of D309) by MSUALG_2:def 9;
L1489: ( dom ( D327 * D325 ) ) = ( dom D325 ) by PARTFUN1:def 2;
set D328 = (the Arity of C574);
set D329 = (the ResultSort of C574);
set D330 = ( ( D327 # ) * (the Arity of C574) );
L1490: ( D328 . C579 ) = D325 by MSUALG_1:def 1;
L1491: ( D330 . C579 ) = ( product ( D327 * D325 ) ) by L1490 , MSAFREE:1;
reconsider D331 = D326 , D332 = C581 as (Element of C574);
reconsider D333 = D327 as (OrderSortedSet of C574) by OSALG_1:17;
L1492: ( D329 . C579 ) = D326 by MSUALG_1:def 2;
L1493: D327 is  opers_closed by MSUALG_2:def 9;
L1494: D327 is_closed_on C579 by L1493 , MSUALG_2:def 6;
L1495: ( rng ( ( Den (C579 , D309) ) | ( D330 . C579 ) ) ) c= ( ( D327 * D329 ) . C579 ) by L1494 , MSUALG_2:def 5;
L1496: ( OSSym (C579 , C575) ) = [ C579 , (the carrier of C574) ];
L1497: C577 = [ C579 , (the carrier of C574) ] by L1467 , TARSKI:def 1;
L1498: C578 in ( ( ( ( ParsedTerms C575 ) # ) * (the Arity of C574) ) . C579 ) by L1497 , L1462 , L1496 , L288;
reconsider D334 = C578 as (Element of ( Args (C579 , D311) )) by L1498 , MSUALG_1:def 4;
L1499: ( Den (C579 , D311) ) = ( ( PTOper C575 ) . C579 ) by MSUALG_1:def 6
.= ( PTDenOp (C579 , C575) ) by L424;
L1500: ( ( Den (C579 , D311) ) . C578 ) = ( C577 -tree C578 ) by L1499 , L1462 , L1496 , L1497 , L399;
L1501: ( dom ( (the Sorts of D311) * D325 ) ) = ( dom D325 ) by PARTFUN1:def 2;
L1502: (for R6 being set holds (R6 in ( dom ( D327 * D325 ) ) implies ( ( D314 # D334 ) . R6 ) in ( ( D327 * D325 ) . R6 )))
proof
let R6 being set;
assume that
L1503: R6 in ( dom ( D327 * D325 ) );
reconsider D335 = R6 as Nat by L1503;
L1504: ( C578 . D335 ) in ( rng C578 ) by L1489 , L1485 , L1487 , L1473 , L1488 , L1503 , FUNCT_1:def 3;
L1505: ( rng C578 ) c= ( TS D310 ) by FINSEQ_1:def 4;
reconsider D336 = ( C578 . R6 ) as (Element of ( TS D310 )) by L1505 , L1504;
L1506: ( D334 . R6 ) in ( ( (the Sorts of D311) * D325 ) . R6 ) by L1489 , L1501 , L1503 , MSUALG_3:6;
L1507: ( D334 . R6 ) in ( (the Sorts of D311) . ( D325 . R6 ) ) by L1506 , L1489 , L1501 , L1503 , FUNCT_1:12;
L1508: ( D334 . R6 ) in ( (the Sorts of D311) . ( D325 /. R6 ) ) by L1507 , L1489 , L1503 , PARTFUN1:def 6;
L1509: ( D334 . D335 ) in ( dom ( D314 . ( D325 /. D335 ) ) ) by L1508 , FUNCT_2:def 1;
L1510: ( ( D314 . ( D325 /. D335 ) ) . D336 ) in ( (the Sorts of ( GenOSAlg D319 )) . ( D325 /. D335 ) ) by L1509 , L1463 , L1504;
L1511: ( ( D314 . ( D325 /. D335 ) ) . ( D334 . D335 ) ) in ( D327 . ( D325 . R6 ) ) by L1510 , L1489 , L1503 , PARTFUN1:def 6;
L1512: ( ( D314 # D334 ) . D335 ) = ( ( D314 . ( D325 /. D335 ) ) . ( D334 . D335 ) ) by L1489 , L1485 , L1487 , L1473 , L1488 , L1503 , MSUALG_3:def 6;
thus L1513: thesis by L1512 , L1503 , L1511 , FUNCT_1:12;
end;
L1514: ( D314 # D334 ) in ( Args (C579 , D309) );
L1515: ( D314 # D334 ) in ( dom ( Den (C579 , D309) ) ) by L1514 , FUNCT_2:def 1;
L1516: [ C585 , (the carrier of C574) ] = [ C579 , C580 ] by L1467 , L1471 , L1483 , TREES_4:def 4;
L1517: C585 = C579 by L1516 , XTUPLE_0:1;
L1518: ( D333 . D331 ) c= ( D333 . D332 ) by L1517 , L1484 , OSALG_1:def 16;
L1519: ( dom ( D314 # D334 ) ) = ( dom D325 ) by MSUALG_3:6;
L1520: ( D314 # D334 ) in ( D330 . C579 ) by L1519 , L1491 , L1489 , L1502 , CARD_3:9;
L1521: ( ( Den (C579 , D309) ) . ( D314 # D334 ) ) in ( rng ( ( Den (C579 , D309) ) | ( D330 . C579 ) ) ) by L1520 , L1515 , FUNCT_1:50;
L1522: ( ( Den (C579 , D309) ) . ( D314 # D334 ) ) in ( ( D327 * D329 ) . C579 ) by L1521 , L1495;
L1523: C578 in ( Args (C579 , D311) ) by L1498 , MSUALG_1:def 4;
L1524: ( ( Den (C579 , D311) ) . C578 ) in ( Result (C579 , D311) ) by L1523 , FUNCT_2:5;
L1525: ( ( Den (C579 , D311) ) . C578 ) in ( ( (the Sorts of D311) * D329 ) . C579 ) by L1524 , MSUALG_1:def 5;
L1526: ( ( Den (C579 , D311) ) . C578 ) in ( (the Sorts of D311) . D326 ) by L1525 , L1492 , FUNCT_2:15;
L1527: ( C577 -tree C578 ) in ( dom ( D314 . D326 ) ) by L1526 , L1500 , FUNCT_2:def 1;
L1528: ( ( D314 . D332 ) . ( C577 -tree C578 ) ) = ( ( D314 . D331 ) . ( C577 -tree C578 ) ) by L1527 , L1443 , L1484 , L1517 , OSALG_3:def 1;
L1529: ( ( D314 . D326 ) . ( ( Den (C579 , D311) ) . D334 ) ) = ( ( Den (C579 , D309) ) . ( D314 # D334 ) ) by L1457 , MSUALG_3:def 7;
L1530: ( ( D314 . D326 ) . ( C577 -tree C578 ) ) in ( D327 . D326 ) by L1529 , L1492 , L1500 , L1522 , FUNCT_2:15;
thus L1531: thesis by L1530 , L1518 , L1528;
end;
let C586 being (Element of C574);
set D337 = C586;
L1532: (for B767 being (Symbol of D310) holds (B767 in ( Terminals D310 ) implies S24[ ( root-tree B767 ) ]))
proof
let C587 being (Symbol of D310);
assume L1533: C587 in ( Terminals D310 );
let C588 being (Element of C574);
assume L1534: ( root-tree C587 ) in ( dom ( D314 . C588 ) );
L1535: ( root-tree C587 ) in ( (the Sorts of D311) . C588 ) by L1534;
L1536: ( root-tree C587 ) in ( ParsedTerms (C575 , C588) ) by L1535 , L230;
consider C589 being (Element of ( TS D310 )) such that L1537: ( root-tree C587 ) = C589 and L1538: ((ex B768 being (Element of C574) st (ex B769 being set st (B768 <= C588 & B769 in ( C575 . B768 ) & C589 = ( root-tree [ B769 , B768 ] )))) or (ex B770 being (OperSymbol of C574) st ([ B770 , (the carrier of C574) ] = ( C589 . ( {} ) ) & ( the_result_sort_of B770 ) <= C588))) by L1536;
L1539: (not (ex B771 being (OperSymbol of C574) st ([ B771 , (the carrier of C574) ] = ( C589 . ( {} ) ) & ( the_result_sort_of B771 ) <= C588)))
proof
consider C590 being (Element of C574), C591 being set such that L1540: C591 in ( C575 . C590 ) and L1541: C587 = [ C591 , C590 ] by L1533 , L189;
given C592 being (OperSymbol of C574) such that
L1542: [ C592 , (the carrier of C574) ] = ( C589 . ( {} ) )
and
L1543: ( the_result_sort_of C592 ) <= C588;

L1544: [ C592 , (the carrier of C574) ] = C587 by L1537 , L1542 , TREES_4:3;
L1545: (the carrier of C574) = C590 by L1544 , L1541 , XTUPLE_0:1;
L1546: C590 in C590 by L1545;
thus L1547: contradiction by L1546;
end;
consider C593 being (Element of C574), C594 being set such that L1548: C593 <= C588 and L1549: C594 in ( C575 . C593 ) and L1550: C589 = ( root-tree [ C594 , C593 ] ) by L1539 , L1538;
reconsider D338 = C588 , D339 = C593 as (Element of C574);
L1551: C589 in ( ParsedTerms (C575 , C593) ) by L1549 , L1550;
L1552: C589 in ( ( ParsedTerms C575 ) . C593 ) by L1551 , L230;
L1553: ( root-tree [ C594 , C593 ] ) in ( dom ( D314 . C593 ) ) by L1552 , L1550 , FUNCT_2:def 1;
L1554: ( ( D314 . D339 ) . ( root-tree [ C594 , C593 ] ) ) = ( ( D314 . D338 ) . ( root-tree [ C594 , C593 ] ) ) by L1553 , L1443 , L1548 , OSALG_3:def 1;
L1555: ( D318 . C593 ) c= ( (the Sorts of ( GenOSAlg D319 )) . C593 ) by L1454 , PBOOLE:def 2;
L1556: ( OSFreeGen (C593 , C575) ) c= ( (the Sorts of ( GenOSAlg D319 )) . C593 ) by L1555 , L1444;
L1557: ( D320 . D339 ) c= ( D320 . D338 ) by L1548 , OSALG_1:def 16;
L1558: ( OSFreeGen (C593 , C575) ) c= ( (the Sorts of ( GenOSAlg D319 )) . C588 ) by L1557 , L1556 , XBOOLE_1:1;
L1559: ( ( D314 . C593 ) . ( root-tree [ C594 , C593 ] ) ) in ( OSFreeGen (C593 , C575) ) by L1549 , L1390;
thus L1560: thesis by L1559 , L1537 , L1550 , L1554 , L1558;
end;
L1561: (for B772 being (DecoratedTree of (the carrier of D310)) holds (B772 in ( TS D310 ) implies S24[ B772 ])) from DTCONSTR:sch 7(L1532 , L1461);
thus L1562: ( (the Sorts of ( GenOSAlg D319 )) . D337 ) c= ( (the Sorts of D309) . D337 ) by L1460 , PBOOLE:def 2;
let C595 being set;
assume L1563: C595 in ( (the Sorts of D309) . D337 );
L1564: ( (the Sorts of D311) . D337 ) = ( ParsedTerms (C575 , D337) ) by L230
.= { B773 where B773 is (Element of ( TS D310 )) : ((ex B774 being (Element of C574) st (ex B775 being set st (B774 <= D337 & B775 in ( C575 . B774 ) & B773 = ( root-tree [ B775 , B774 ] )))) or (ex B776 being (OperSymbol of C574) st ([ B776 , (the carrier of C574) ] = ( B773 . ( {} ) ) & ( the_result_sort_of B776 ) <= D337))) };
L1565: ( rng ( D314 . C586 ) ) = ( (the Sorts of D309) . C586 ) by L1456 , MSUALG_3:def 3;
consider C596 being set such that L1566: C596 in ( dom ( D314 . D337 ) ) and L1567: C595 = ( ( D314 . D337 ) . C596 ) by L1565 , L1563 , FUNCT_1:def 3;
L1568: C596 in ( (the Sorts of D311) . D337 ) by L1566;
L1569: (ex B777 being (Element of ( TS D310 )) st (B777 = C596 & ((ex B778 being (Element of C574) st (ex B779 being set st (B778 <= D337 & B779 in ( C575 . B778 ) & B777 = ( root-tree [ B779 , B778 ] )))) or (ex B780 being (OperSymbol of C574) st ([ B780 , (the carrier of C574) ] = ( B777 . ( {} ) ) & ( the_result_sort_of B780 ) <= D337))))) by L1568 , L1564;
thus L1570: thesis by L1569 , L1561 , L1566 , L1567;
end;
L1571: D318 is (OSGeneratorSet of D309)
proof
let C597 being (OSSubset of D309);
assume L1572: C597 = ( OSCl D318 );
thus L1573: thesis by L1572 , L1458;
end;
reconsider D340 = D318 as (OSGeneratorSet of D309) by L1571;
take D340;
thus L1574: thesis by L1444;
end;
uniqueness
proof
let C598 , C599 being (OSGeneratorSet of ( FreeOSA C575 ));
assume that
L1575: (for B781 being (Element of C574) holds ( C598 . B781 ) = ( OSFreeGen (B781 , C575) ))
and
L1576: (for B782 being (Element of C574) holds ( C599 . B782 ) = ( OSFreeGen (B782 , C575) ));
L1577: (for B783 being set holds (B783 in (the carrier of C574) implies ( C598 . B783 ) = ( C599 . B783 )))
proof
let C600 being set;
assume L1578: C600 in (the carrier of C574);
reconsider D341 = C600 as (SortSymbol of C574) by L1578;
L1579: ( C598 . D341 ) = ( OSFreeGen (D341 , C575) ) by L1575;
thus L1580: thesis by L1579 , L1576;
end;
thus L1581: thesis by L1577 , PBOOLE:3;
end;
end;
theorem
L1583: (for B784 being  locally_directed OrderSortedSign holds (for B785 being  non-empty (ManySortedSet of B784) holds ( OSFreeGen B785 ) is  non-empty))
proof
let C601 being  locally_directed OrderSortedSign;
let C602 being  non-empty (ManySortedSet of C601);
let R6 being set;
assume L1584: R6 in (the carrier of C601);
reconsider D342 = R6 as (Element of C601) by L1584;
L1585: ( ( OSFreeGen C602 ) . D342 ) = ( OSFreeGen (D342 , C602) ) by L1442;
thus L1586: thesis by L1585;
end;
registration
let C603 being  locally_directed OrderSortedSign;
let C604 being  non-empty (ManySortedSet of C603);
cluster ( OSFreeGen C604 ) ->  non-empty;
coherence by L1583;
end;
definition
let C605 being  locally_directed OrderSortedSign;
let C606 being  non-empty (ManySortedSet of C605);
let C607 being (OSCongruence of ( ParsedTermsOSA C606 ));
let C608 being (Element of ( TS ( DTConOSA C606 ) ));
func OSClass (C607 , C608) -> (Element of ( OSClass (C607 , ( LeastSort C608 )) )) means 
:L1588: (for B786 being (Element of C605) holds (for B787 being (Element of ( (the Sorts of ( ParsedTermsOSA C606 )) . B786 )) holds (C608 = B787 implies it = ( OSClass (C607 , B787) ))));
existence
proof
set D343 = ( LeastSort C608 );
set D344 = ( ParsedTermsOSA C606 );
reconsider D345 = C608 as (Element of ( (the Sorts of D344) . D343 )) by L532;
take ( OSClass (C607 , D345) );
let C609 being (Element of C605);
let C610 being (Element of ( (the Sorts of ( ParsedTermsOSA C606 )) . C609 ));
assume that
L1589: C608 = C610;
L1590: D343 <= C609 by L1589 , L532;
thus L1591: thesis by L1590 , L1589 , OSALG_4:13;
end;
uniqueness
proof
set D346 = ( LeastSort C608 );
set D347 = ( ParsedTermsOSA C606 );
reconsider D348 = C608 as (Element of ( (the Sorts of D347) . D346 )) by L532;
let C611 , C612 being (Element of ( OSClass (C607 , ( LeastSort C608 )) ));
assume that
L1592: (for B788 being (Element of C605) holds (for B789 being (Element of ( (the Sorts of ( ParsedTermsOSA C606 )) . B788 )) holds (C608 = B789 implies C611 = ( OSClass (C607 , B789) ))))
and
L1593: (for B790 being (Element of C605) holds (for B791 being (Element of ( (the Sorts of ( ParsedTermsOSA C606 )) . B790 )) holds (C608 = B791 implies C612 = ( OSClass (C607 , B791) ))));
thus L1594: C611 = ( OSClass (C607 , D348) ) by L1592
.= C612 by L1593;
end;
end;
theorem
L1596: (for B792 being  locally_directed OrderSortedSign holds (for B793 being  non-empty (ManySortedSet of B792) holds (for B794 being (OSCongruence of ( ParsedTermsOSA B793 )) holds (for B795 being (Element of ( TS ( DTConOSA B793 ) )) holds B795 in ( OSClass (B794 , B795) )))))
proof
let C613 being  locally_directed OrderSortedSign;
let C614 being  non-empty (ManySortedSet of C613);
let C615 being (OSCongruence of ( ParsedTermsOSA C614 ));
let C616 being (Element of ( TS ( DTConOSA C614 ) ));
set D349 = ( ParsedTermsOSA C614 );
reconsider D350 = C616 as (Element of ( (the Sorts of D349) . ( LeastSort C616 ) )) by L532;
L1597: ( OSClass (C615 , C616) ) = ( OSClass (C615 , D350) ) by L1588
.= ( Class (( CompClass (C615 , ( CComp ( LeastSort C616 ) )) ) , D350) );
thus L1598: thesis by L1597 , EQREL_1:20 , OSALG_4:5;
end;
theorem
L1599: (for B796 being  locally_directed OrderSortedSign holds (for B797 being  non-empty (ManySortedSet of B796) holds (for B798 being (Element of B796) holds (for B799 being (Element of ( TS ( DTConOSA B797 ) )) holds (for B800 , B801 being set holds ((B800 in ( B797 . B798 ) & B799 = ( root-tree [ B800 , B798 ] )) implies (B801 in ( OSClass (( PTCongruence B797 ) , B799) ) iff B801 = B799)))))))
proof
let C617 being  locally_directed OrderSortedSign;
let C618 being  non-empty (ManySortedSet of C617);
let C619 being (Element of C617);
let C620 being (Element of ( TS ( DTConOSA C618 ) ));
set D351 = ( ParsedTermsOSA C618 );
set D352 = ( DTConOSA C618 );
set D353 = ( PTCongruence C618 );
reconsider D354 = C620 as (Element of ( (the Sorts of D351) . ( LeastSort C620 ) )) by L532;
let C621 , C622 being set;
assume that
L1600: C621 in ( C618 . C619 )
and
L1601: C620 = ( root-tree [ C621 , C619 ] );
L1602: [ C621 , C619 ] in ( Terminals D352 ) by L1600 , L189;
reconsider D355 = [ C621 , C619 ] as (Symbol of D352) by L1602;
L1603: ( OSClass (D353 , C620) ) = ( OSClass (( PTCongruence C618 ) , D354) ) by L1588
.= ( proj1 ( ( PTClasses C618 ) . D354 ) ) by L1083;
L1604: ( ( PTClasses C618 ) . ( root-tree D355 ) ) = ( @ D355 ) by L1602 , L774
.= { [ ( root-tree D355 ) , B802 ] where B802 is (Element of C617) : (ex B803 being (Element of C617) st (ex B804 being set st (B804 in ( C618 . B803 ) & D355 = [ B804 , B803 ] & B803 <= B802))) };
thus L1605:now
assume L1606: C622 in ( OSClass (D353 , C620) );
consider C623 being set such that L1607: [ C622 , C623 ] in ( ( PTClasses C618 ) . D354 ) by L1606 , L1603 , XTUPLE_0:def 12;
L1608: (ex B805 being (Element of C617) st ([ C622 , C623 ] = [ ( root-tree D355 ) , B805 ] & (ex B806 being (Element of C617) st (ex B807 being set st (B807 in ( C618 . B806 ) & D355 = [ B807 , B806 ] & B806 <= B805))))) by L1601 , L1604 , L1607;
thus L1609: C622 = C620 by L1608 , L1601 , XTUPLE_0:1;
end;
assume L1610: C622 = C620;
L1611: [ C622 , C619 ] in ( ( PTClasses C618 ) . D354 ) by L1610 , L1600 , L1601 , L1604;
thus L1612: thesis by L1611 , L1603 , XTUPLE_0:def 12;
end;
theorem
L1613: (for B808 being  locally_directed OrderSortedSign holds (for B809 being  non-empty (ManySortedSet of B808) holds (for B810 being (OSCongruence of ( ParsedTermsOSA B809 )) holds (for B811 , B812 being (Element of ( TS ( DTConOSA B809 ) )) holds (B812 in ( OSClass (B810 , B811) ) iff ( OSClass (B810 , B811) ) = ( OSClass (B810 , B812) ))))))
proof
let C624 being  locally_directed OrderSortedSign;
let C625 being  non-empty (ManySortedSet of C624);
let C626 being (OSCongruence of ( ParsedTermsOSA C625 ));
let C627 , C628 being (Element of ( TS ( DTConOSA C625 ) ));
set D356 = ( ParsedTermsOSA C625 );
set D357 = (the Sorts of D356);
reconsider D358 = C627 as (Element of ( D357 . ( LeastSort C627 ) )) by L532;
set D359 = ( CComp ( LeastSort C627 ) );
set D360 = ( CompClass (C626 , D359) );
L1614: ( OSClass (C626 , C627) ) = ( OSClass (C626 , D358) ) by L1588
.= ( Class (( CompClass (C626 , ( CComp ( LeastSort C627 ) )) ) , D358) );
thus L1615:now
assume L1616: C628 in ( OSClass (C626 , C627) );
L1617: [ C628 , D358 ] in D360 by L1616 , L1614 , EQREL_1:19;
consider C629 being (Element of C624) such that L1618: C629 in D359 and L1619: [ C628 , D358 ] in ( C626 . C629 ) by L1617 , OSALG_4:def 9;
reconsider D361 = D358 , D362 = C628 as (Element of ( D357 . C629 )) by L1619 , ZFMISC_1:87;
thus L1620: ( OSClass (C626 , C627) ) = ( OSClass (C626 , D361) ) by L1588
.= ( OSClass (C626 , D362) ) by L1619 , OSALG_4:12
.= ( OSClass (C626 , C628) ) by L1588;
end;
assume L1621: ( OSClass (C626 , C627) ) = ( OSClass (C626 , C628) );
thus L1622: thesis by L1621 , L1596;
end;
theorem
L1623: (for B813 being  locally_directed OrderSortedSign holds (for B814 being  non-empty (ManySortedSet of B813) holds (for B815 , B816 being (OSCongruence of ( ParsedTermsOSA B814 )) holds (for B817 being (Element of ( TS ( DTConOSA B814 ) )) holds (B815 c= B816 implies ( OSClass (B815 , B817) ) c= ( OSClass (B816 , B817) ))))))
proof
let C630 being  locally_directed OrderSortedSign;
let C631 being  non-empty (ManySortedSet of C630);
let C632 , C633 being (OSCongruence of ( ParsedTermsOSA C631 ));
let C634 being (Element of ( TS ( DTConOSA C631 ) ));
set D363 = ( LeastSort C634 );
set D364 = ( ParsedTermsOSA C631 );
set D365 = (the Sorts of D364);
set D366 = ( DTConOSA C631 );
set D367 = ( CComp D363 );
set D368 = ( CompClass (C632 , D367) );
reconsider D369 = C634 as (Element of ( D365 . D363 )) by L532;
assume L1624: C632 c= C633;
L1625: ( OSClass (C632 , C634) ) = ( OSClass (C632 , D369) ) by L1588
.= ( Class (( CompClass (C632 , ( CComp D363 )) ) , D369) );
let C635 being set;
assume L1626: C635 in ( OSClass (C632 , C634) );
L1627: [ C635 , D369 ] in D368 by L1626 , L1625 , EQREL_1:19;
consider C636 being (Element of C630) such that L1628: C636 in D367 and L1629: [ C635 , D369 ] in ( C632 . C636 ) by L1627 , OSALG_4:def 9;
reconsider D370 = C634 , D371 = C635 as (Element of ( D365 . C636 )) by L1629 , ZFMISC_1:87;
L1630: ( C632 . C636 ) c= ( C633 . C636 ) by L1624 , PBOOLE:def 2;
L1631: C635 in ( D365 . C636 ) by L1629 , ZFMISC_1:87;
reconsider D372 = C635 as (Element of ( TS D366 )) by L1631 , L560;
L1632: ( OSClass (C633 , D372) ) = ( OSClass (C633 , D371) ) by L1588
.= ( OSClass (C633 , D370) ) by L1629 , L1630 , OSALG_4:12
.= ( OSClass (C633 , C634) ) by L1588;
thus L1633: thesis by L1632 , L1613;
end;
theorem
L1634: (for B818 being  locally_directed OrderSortedSign holds (for B819 being  non-empty (ManySortedSet of B818) holds (for B820 being (Element of B818) holds (for B821 being (Element of ( TS ( DTConOSA B819 ) )) holds (for B822 , B823 being set holds ((B822 in ( B819 . B820 ) & B821 = ( root-tree [ B822 , B820 ] )) implies (B823 in ( OSClass (( LCongruence B819 ) , B821) ) iff B823 = B821)))))))
proof
let C637 being  locally_directed OrderSortedSign;
let C638 being  non-empty (ManySortedSet of C637);
let C639 being (Element of C637);
let C640 being (Element of ( TS ( DTConOSA C638 ) ));
set D373 = ( LCongruence C638 );
set D374 = ( PTCongruence C638 );
let C641 , C642 being set;
assume that
L1635: C641 in ( C638 . C639 )
and
L1636: C640 = ( root-tree [ C641 , C639 ] );
L1637: D373 c= D374 by L656;
L1638: ( OSClass (D373 , C640) ) c= ( OSClass (D374 , C640) ) by L1637 , L1623;
thus L1639: (C642 in ( OSClass (D373 , C640) ) implies C642 = C640) by L1638 , L1635 , L1636 , L1599;
assume L1640: C642 = C640;
thus L1641: thesis by L1640 , L1596;
end;
definition
let C643 being  locally_directed OrderSortedSign;
let C644 being  non-empty (ManySortedSet of C643);
let C645 being  non-empty (ManySortedSet of (the carrier of C643));
let C646 being (ManySortedFunction of ( PTVars C644 ) , C645);
let C647 being (Symbol of ( DTConOSA C644 ));
assume L1642: C647 in ( Terminals ( DTConOSA C644 ) );
func pi (C646 , C645 , C647) -> (Element of ( Union C645 )) means 
:L1643: (for B824 being Function holds (B824 = ( C646 . ( C647 `2 ) ) implies it = ( B824 . ( root-tree C647 ) )));
existence
proof
set D375 = ( PTVars C644 );
set D376 = ( DTConOSA C644 );
consider C648 being (Element of C643), C649 being set such that L1644: C649 in ( C644 . C648 ) and L1645: C647 = [ C649 , C648 ] by L1642 , L189;
L1646: ( D375 . C648 ) = ( PTVars (C648 , C644) ) by L1371;
L1647: ( dom ( C646 . C648 ) ) = ( PTVars (C648 , C644) ) by L1646 , FUNCT_2:def 1
.= { ( root-tree B825 ) where B825 is (Symbol of D376) : (B825 in ( Terminals D376 ) & ( B825 `2 ) = C648) } by L1355;
L1648: ( C647 `2 ) = C648 by L1645 , MCART_1:7;
L1649: ( root-tree C647 ) in ( dom ( C646 . C648 ) ) by L1648 , L1642 , L1647;
L1650: ( ( C646 . C648 ) . ( root-tree C647 ) ) in ( rng ( C646 . C648 ) ) by L1649 , FUNCT_1:def 3;
L1651: ( dom C645 ) = (the carrier of C643) by PARTFUN1:def 2;
L1652: ( C645 . C648 ) in ( rng C645 ) by L1651 , FUNCT_1:def 3;
L1653: ( rng ( C646 . C648 ) ) c= ( C645 . C648 ) by RELAT_1:def 19;
L1654: ( ( C646 . C648 ) . ( root-tree C647 ) ) in ( union ( rng C645 ) ) by L1653 , L1650 , L1652 , TARSKI:def 4;
reconsider D377 = ( ( C646 . C648 ) . ( root-tree C647 ) ) as (Element of ( Union C645 )) by L1654 , CARD_3:def 4;
take D377;
let C650 being Function;
assume L1655: C650 = ( C646 . ( C647 `2 ) );
thus L1656: thesis by L1655 , L1645 , MCART_1:7;
end;
uniqueness
proof
consider C651 being (Element of C643), C652 being set such that L1657: C652 in ( C644 . C651 ) and L1658: C647 = [ C652 , C651 ] by L1642 , L189;
reconsider D378 = ( C646 . C651 ) as Function;
let C653 , C654 being (Element of ( Union C645 ));
assume that
L1659: (for B826 being Function holds (B826 = ( C646 . ( C647 `2 ) ) implies C653 = ( B826 . ( root-tree C647 ) )))
and
L1660: (for B827 being Function holds (B827 = ( C646 . ( C647 `2 ) ) implies C654 = ( B827 . ( root-tree C647 ) )));
L1661: D378 = ( C646 . ( C647 `2 ) ) by L1658 , MCART_1:7;
L1662: C653 = ( D378 . ( root-tree C647 ) ) by L1661 , L1659;
thus L1663: thesis by L1662 , L1660 , L1661;
end;
end;
theorem
L1665: (for B828 being  locally_directed OrderSortedSign holds (for B829 being  non-empty (ManySortedSet of B828) holds (for B830 being  monotone  non-empty (OSAlgebra of B828) holds (for B831 being (ManySortedFunction of ( PTVars B829 ) , (the Sorts of B830)) holds (ex B832 being (ManySortedFunction of ( ParsedTermsOSA B829 ) , B830) st (B832 is_homomorphism ( ParsedTermsOSA B829 ) , B830 & B832 is  order-sorted & ( B832 || ( PTVars B829 ) ) = B831))))))
proof
let C655 being  locally_directed OrderSortedSign;
let C656 being  non-empty (ManySortedSet of C655);
set D379 = ( DTConOSA C656 );
set D380 = ( ParsedTermsOSA C656 );
set D381 = ( PTVars C656 );
set D382 = (the Sorts of D380);
let C657 being  non-empty  monotone (OSAlgebra of C655);
let C658 being (ManySortedFunction of D381 , (the Sorts of C657));
set D383 = (the Sorts of D380);
set D384 = (the Arity of C655);
set D385 = (the Sorts of C657);
set D386 = (the carrier' of C655);
set D387 = (the ResultSort of C655);
reconsider D388 = D383 , D389 = D385 as (OrderSortedSet of C655) by OSALG_1:17;
deffunc H11((Symbol of D379)) = ( pi (C658 , (the Sorts of C657) , $1) );
deffunc H12((Symbol of D379) , set , FinSequence) = ( pi (( @ (C656 , $1) ) , C657 , $3) );
consider C659 being (Function of ( TS D379 ) , ( Union (the Sorts of C657) )) such that L1666: (for B833 being (Symbol of D379) holds (B833 in ( Terminals D379 ) implies ( C659 . ( root-tree B833 ) ) = H11(B833))) and L1667: (for B834 being (Symbol of D379) holds (for B835 being (FinSequence of ( TS D379 )) holds (B834 ==> ( roots B835 ) implies ( C659 . ( B834 -tree B835 ) ) = H12(B834 , ( roots B835 ) , ( C659 * B835 ))))) from DTCONSTR:sch 8;
deffunc H13(set) = ( C659 | ( (the Sorts of D380) . $1 ) );
consider C660 being Function such that L1668: (( dom C660 ) = (the carrier of C655) & (for B836 being set holds (B836 in (the carrier of C655) implies ( C660 . B836 ) = H13(B836)))) from FUNCT_1:sch 3;
reconsider D390 = C660 as (ManySortedSet of (the carrier of C655)) by L1668 , PARTFUN1:def 2 , RELAT_1:def 18;
L1669: (for B837 being set holds (B837 in ( dom D390 ) implies ( D390 . B837 ) is Function))
proof
let C661 being set;
assume L1670: C661 in ( dom D390 );
L1671: ( D390 . C661 ) = ( C659 | ( (the Sorts of D380) . C661 ) ) by L1670 , L1668;
thus L1672: thesis by L1671;
end;
reconsider D391 = D390 as (ManySortedFunction of (the carrier of C655)) by L1669 , FUNCOP_1:def 6;
defpred S25[ set ] means (for B838 being (Element of C655) holds ($1 in ( (the Sorts of D380) . B838 ) implies ( ( D391 . B838 ) . $1 ) in ( (the Sorts of C657) . B838 )));
L1673: (for B839 being (Symbol of D379) holds (for B840 being (FinSequence of ( TS D379 )) holds ((B839 ==> ( roots B840 ) & (for B841 being (DecoratedTree of (the carrier of D379)) holds (B841 in ( rng B840 ) implies S25[ B841 ]))) implies S25[ ( B839 -tree B840 ) ])))
proof
let C662 being (Symbol of D379);
let C663 being (FinSequence of ( TS D379 ));
assume that
L1674: C662 ==> ( roots C663 )
and
L1675: (for B842 being (DecoratedTree of (the carrier of D379)) holds (B842 in ( rng C663 ) implies S25[ B842 ]));
set D392 = ( C659 * C663 );
set D393 = ( @ (C656 , C662) );
set D394 = ( the_arity_of D393 );
set D395 = ( the_result_sort_of D393 );
set D396 = ( [: (the carrier' of C655) , { (the carrier of C655) } :] \/ ( Union ( coprod (C656 qua (ManySortedSet of C655)) ) ) );
set D397 = ( roots C663 );
L1676: [ D393 , (the carrier of C655) ] = C662 by L1674 , L645;
L1677: [ [ D393 , (the carrier of C655) ] , D397 ] in (the Rules of D379) by L1676 , L1674 , LANG1:def 1;
let C664 being (Element of C655);
reconsider D398 = C664 as (Element of C655);
assume L1678: ( C662 -tree C663 ) in ( D383 . C664 );
consider C665 being (OperSymbol of C655) such that L1679: C662 = [ C665 , (the carrier of C655) ] and L1680: C663 in ( Args (C665 , D380) ) and L1681: ( C662 -tree C663 ) = ( ( Den (C665 , D380) ) . C663 ) and L1682: (for B843 being (Element of C655) holds (( C662 -tree C663 ) in ( D383 . B843 ) iff ( the_result_sort_of C665 ) <= B843)) by L1674 , L505;
L1683: C665 = D393 by L1674 , L1679 , L645;
L1684: D395 <= C664 by L1683 , L1678 , L1682;
L1685: ( D389 . D395 ) c= ( D389 . D398 ) by L1684 , OSALG_1:def 16;
L1686: ( rng ( Den (D393 , C657) ) ) c= ( Result (D393 , C657) ) by RELAT_1:def 19;
L1687: ( dom ( D385 * D394 ) ) = ( dom D394 ) by PARTFUN1:def 2;
L1688: [ D393 , (the carrier of C655) ] = ( OSSym (D393 , C656) );
L1689: ( ( PTDenOp (D393 , C656) ) . C663 ) = ( C662 -tree C663 ) by L1688 , L1674 , L1676 , L399;
L1690: ( dom ( D383 * D394 ) ) = ( dom D394 ) by PARTFUN1:def 2;
L1691: ( dom ( PTDenOp (D393 , C656) ) ) = ( ( ( ( ParsedTerms C656 ) # ) * D384 ) . D393 ) by FUNCT_2:def 1;
L1692: C663 in ( dom ( PTDenOp (D393 , C656) ) ) by L1691 , L1674 , L1676 , L1688 , L288;
L1693: ( C662 -tree C663 ) in ( rng ( PTDenOp (D393 , C656) ) ) by L1692 , L1689 , FUNCT_1:def 3;
L1694: ( D391 . D395 ) = ( C659 | ( D383 . D395 ) ) by L1668;
L1695: ( Seg ( len D394 ) ) = ( dom D394 ) by FINSEQ_1:def 3;
L1696: ( rng D394 ) c= (the carrier of C655) by FINSEQ_1:def 4;
L1697: D394 = ( D384 . D393 ) by MSUALG_1:def 1;
L1698: ( dom D397 ) = ( dom C663 ) by TREES_3:def 18;
reconsider D399 = D397 as (Element of ( D396 * )) by L1677 , ZFMISC_1:87;
L1699: ( len D399 ) = ( len D394 ) by L1677 , L43;
L1700: ( dom D399 ) = ( Seg ( len D399 ) ) by FINSEQ_1:def 3;
L1701: ( dom D392 ) = ( dom C663 ) by FINSEQ_3:120;
L1702: ( dom D392 ) = ( dom ( D385 * D394 ) ) by L1701 , L1698 , L1687 , L1677 , L1700 , L1695 , L43;
L1703: (for R6 being set holds (R6 in ( dom ( D385 * D394 ) ) implies ( D392 . R6 ) in ( ( D385 * D394 ) . R6 )))
proof
let R6 being set;
assume L1704: R6 in ( dom ( D385 * D394 ) );
reconsider D400 = R6 as Nat by L1704;
L1705: ( C663 . D400 ) in ( rng C663 ) by L1698 , L1687 , L1699 , L1700 , L1695 , L1704 , FUNCT_1:def 3;
L1706: ( rng C663 ) c= ( TS D379 ) by FINSEQ_1:def 4;
reconsider D401 = ( C663 . D400 ) as (Element of ( TS D379 )) by L1706 , L1705;
L1707: ( D392 . D400 ) = ( C659 . ( C663 . D400 ) ) by L1702 , L1704 , FINSEQ_3:120;
L1708: ( D394 . R6 ) in ( rng D394 ) by L1687 , L1704 , FUNCT_1:def 3;
reconsider D402 = ( D394 . R6 ) as (Element of C655) by L1708 , L1696;
L1709: ( D391 . D402 ) = ( C659 | ( D383 . D402 ) ) by L1668;
L1710: ( dom D383 ) = (the carrier of C655) by PARTFUN1:def 2;
L1711: ( D383 . D402 ) in ( rng D383 ) by L1710 , FUNCT_1:def 3;
L1712: ( dom C659 ) = ( TS D379 ) by FUNCT_2:def 1
.= ( union ( rng D383 ) ) by L360;
L1713: ( dom ( D391 . D402 ) ) = ( D383 . D402 ) by L1712 , L1709 , L1711 , RELAT_1:62 , ZFMISC_1:74;
L1714: C663 in ( ( ( ( ParsedTerms C656 ) # ) * D384 ) . D393 ) by L1674 , L1676 , L1688 , L288;
L1715: C663 in ( product ( ( ParsedTerms C656 ) * D394 ) ) by L1714 , L1697 , MSAFREE:1;
L1716: ( C663 . R6 ) in ( ( ( ParsedTerms C656 ) * D394 ) . R6 ) by L1715 , L1687 , L1690 , L1704 , CARD_3:9;
L1717: ( C663 . R6 ) in ( ( ParsedTerms C656 ) . ( D394 . R6 ) ) by L1716 , L1687 , L1690 , L1704 , FUNCT_1:12;
L1718: ( ( D391 . D402 ) . D401 ) in ( D385 . D402 ) by L1717 , L1675 , L1705;
L1719: ( C659 . D401 ) in ( D385 . D402 ) by L1718 , L1717 , L1709 , L1713 , FUNCT_1:47;
thus L1720: thesis by L1719 , L1704 , L1707 , FUNCT_1:12;
end;
set D403 = ( pi (D393 , C657 , D392) );
L1721: ( dom ( Den (D393 , C657) ) ) = ( Args (D393 , C657) ) by FUNCT_2:def 1;
L1722: ( dom D387 ) = D386 by FUNCT_2:def 1;
L1723: ( Args (D393 , C657) ) = ( ( ( D385 # ) * D384 ) . D393 ) by MSUALG_1:def 4
.= ( product ( D385 * D394 ) ) by L1697 , MSAFREE:1;
L1724: D392 in ( Args (D393 , C657) ) by L1723 , L1701 , L1698 , L1687 , L1699 , L1700 , L1695 , L1703 , CARD_3:9;
L1725: ( pi (D393 , C657 , D392) ) = ( ( Den (D393 , C657) ) . D392 ) by L1724 , MSAFREE:def 21;
L1726: D403 in ( rng ( Den (D393 , C657) ) ) by L1725 , L1724 , L1721 , FUNCT_1:def 3;
L1727: D403 in ( Result (D393 , C657) ) by L1726 , L1686;
L1728: ( D391 . C664 ) = ( C659 | ( D383 . C664 ) ) by L1668;
L1729: ( ( D391 . C664 ) . ( C662 -tree C663 ) ) = ( C659 . ( C662 -tree C663 ) ) by L1728 , L1678 , FUNCT_1:49;
L1730: ( rng D387 ) c= (the carrier of C655) by RELAT_1:def 19;
L1731: ( dom D383 ) = (the carrier of C655) by PARTFUN1:def 2;
L1732: ( dom ( D383 * D387 ) ) = ( dom D387 ) by L1731 , L1730 , RELAT_1:27;
L1733: ( dom D385 ) = (the carrier of C655) by PARTFUN1:def 2;
L1734: ( dom ( D385 * D387 ) ) = ( dom D387 ) by L1733 , L1730 , RELAT_1:27;
L1735: ( rng ( PTDenOp (D393 , C656) ) ) c= ( ( ( ParsedTerms C656 ) * D387 ) . D393 ) by RELAT_1:def 19;
L1736: ( C662 -tree C663 ) in ( ( D383 * D387 ) . D393 ) by L1735 , L1693;
L1737: ( C662 -tree C663 ) in ( D383 . ( D387 . D393 ) ) by L1736 , L1722 , L1732 , FUNCT_1:12;
L1738: ( C662 -tree C663 ) in ( D383 . D395 ) by L1737 , MSUALG_1:def 2;
L1739: ( C659 . ( C662 -tree C663 ) ) = D403 by L1667 , L1674;
L1740: D403 = ( ( C659 | ( D383 . D395 ) ) . ( C662 -tree C663 ) ) by L1739 , L1738 , FUNCT_1:49;
L1741: ( Result (D393 , C657) ) = ( ( D385 * D387 ) . D393 ) by MSUALG_1:def 5
.= ( D385 . ( D387 . D393 ) ) by L1734 , L1722 , FUNCT_1:12
.= ( D385 . D395 ) by MSUALG_1:def 2;
L1742: ( ( D391 . D395 ) . ( C662 -tree C663 ) ) in ( D385 . C664 ) by L1741 , L1727 , L1740 , L1694 , L1685;
thus L1743: thesis by L1742 , L1738 , L1694 , L1729 , FUNCT_1:49;
end;
L1744: (for B844 being (Symbol of D379) holds (B844 in ( Terminals D379 ) implies S25[ ( root-tree B844 ) ]))
proof
let C666 being (Symbol of D379);
assume L1745: C666 in ( Terminals D379 );
consider C667 being (Element of C655), C668 being set such that L1746: C668 in ( C656 . C667 ) and L1747: C666 = [ C668 , C667 ] by L1745 , L189;
reconsider D404 = C667 as (SortSymbol of C655);
set D405 = { ( root-tree B845 ) where B845 is (Symbol of D379) : (B845 in ( Terminals D379 ) & ( B845 `2 ) = D404) };
set D406 = ( root-tree C666 );
L1748: ( C666 `2 ) = D404 by L1747 , MCART_1:7;
L1749: D406 in D405 by L1748 , L1745;
reconsider D407 = ( C658 . D404 ) as (Function of ( D381 . D404 ) , ( D385 . D404 ));
L1750: ( dom D407 ) = ( D381 . D404 ) by FUNCT_2:def 1;
L1751: ( rng D407 ) c= ( D385 . D404 ) by RELAT_1:def 19;
L1752: D405 = ( PTVars (D404 , C656) ) by L1355;
L1753: ( D381 . D404 ) = D405 by L1752 , L1371;
L1754: ( D407 . D406 ) in ( rng D407 ) by L1753 , L1749 , L1750 , FUNCT_1:def 3;
L1755: ( D407 . D406 ) in ( D385 . D404 ) by L1754 , L1751;
let C669 being (Element of C655);
reconsider D408 = D404 , D409 = C669 as (Element of C655);
assume L1756: D406 in ( D383 . C669 );
L1757: D404 <= C669 by L1756 , L1746 , L1747 , L455;
L1758: ( D389 . D408 ) c= ( D389 . D409 ) by L1757 , OSALG_1:def 16;
L1759: ( D391 . D404 ) = ( C659 | ( D383 . D404 ) ) by L1668;
L1760: ( ( D391 . D404 ) . D406 ) = ( C659 . D406 ) by L1759 , L1749 , L1752 , FUNCT_1:49
.= ( pi (C658 , D385 , C666) ) by L1666 , L1745
.= ( D407 . D406 ) by L1745 , L1748 , L1643;
L1761: ( D391 . C669 ) = ( C659 | ( D383 . C669 ) ) by L1668;
L1762: ( ( D391 . C669 ) . D406 ) = ( C659 . D406 ) by L1761 , L1756 , FUNCT_1:49
.= ( D407 . D406 ) by L1749 , L1752 , L1759 , L1760 , FUNCT_1:49;
thus L1763: thesis by L1762 , L1755 , L1758;
end;
L1764: (for B846 being (DecoratedTree of (the carrier of D379)) holds (B846 in ( TS D379 ) implies S25[ B846 ])) from DTCONSTR:sch 7(L1744 , L1673);
L1765: (for B847 being set holds (B847 in (the carrier of C655) implies ( D391 . B847 ) is (Function of ( (the Sorts of D380) . B847 ) , ( (the Sorts of C657) . B847 ))))
proof
let C670 being set;
assume L1766: C670 in (the carrier of C655);
reconsider D410 = C670 as (Element of C655) by L1766;
L1767: ( dom C659 ) = ( TS D379 ) by FUNCT_2:def 1
.= ( union ( rng D383 ) ) by L360;
L1768: ( dom D383 ) = (the carrier of C655) by PARTFUN1:def 2;
L1769: ( D383 . D410 ) in ( rng D383 ) by L1768 , FUNCT_1:def 3;
L1770: ( D391 . D410 ) = ( C659 | ( D383 . D410 ) ) by L1668;
L1771: ( dom ( D391 . D410 ) ) = ( D383 . D410 ) by L1770 , L1767 , L1769 , RELAT_1:62 , ZFMISC_1:74;
L1772: ( D383 . D410 ) c= ( dom C659 ) by L1767 , L1769 , ZFMISC_1:74;
L1773: ( rng ( D391 . D410 ) ) c= ( D385 . D410 )
proof
let C671 being set;
assume L1774: C671 in ( rng ( D391 . D410 ) );
consider C672 being set such that L1775: C672 in ( dom ( D391 . D410 ) ) and L1776: ( ( D391 . D410 ) . C672 ) = C671 by L1774 , FUNCT_1:def 3;
reconsider D411 = C672 as (Element of ( TS D379 )) by L1772 , L1771 , L1775 , FUNCT_2:def 1;
L1777: D411 in ( D383 . D410 ) by L1770 , L1767 , L1769 , L1775 , RELAT_1:62 , ZFMISC_1:74;
thus L1778: thesis by L1777 , L1764 , L1776;
end;
thus L1779: thesis by L1773 , L1771 , FUNCT_2:def 1 , RELSET_1:4;
end;
reconsider D412 = D391 as (ManySortedFunction of D380 , C657) by L1765 , PBOOLE:def 15;
take D412;
thus L1780: D412 is_homomorphism D380 , C657
proof
L1781: ( dom D383 ) = (the carrier of C655) by PARTFUN1:def 2;
L1782: ( rng D387 ) c= (the carrier of C655) by RELAT_1:def 19;
L1783: ( dom ( D383 * D387 ) ) = ( dom D387 ) by L1782 , L1781 , RELAT_1:27;
let C673 being (Element of (the carrier' of C655));
assume that
L1784: ( Args (C673 , D380) ) <> ( {} );
reconsider D413 = C673 as (OperSymbol of C655);
let C674 being (Element of ( Args (C673 , D380) ));
set D414 = ( the_result_sort_of D413 );
set D415 = ( Den (D413 , D380) );
set D416 = ( Den (D413 , C657) );
set D417 = ( [: (the carrier' of C655) , { (the carrier of C655) } :] \/ ( Union ( coprod (C656 qua (ManySortedSet of C655)) ) ) );
set D418 = ( the_arity_of D413 );
L1785: D418 = ( D384 . D413 ) by MSUALG_1:def 1;
L1786: ( Args (D413 , D380) ) = ( ( ( ( ParsedTerms C656 ) # ) * D384 ) . D413 ) by MSUALG_1:def 4;
reconsider D419 = C674 as (FinSequence of ( TS D379 )) by L1786 , L248;
L1787: ( OSSym (D413 , C656) ) ==> ( roots D419 ) by L1786 , L288;
L1788: ( @ (C656 , ( OSSym (D413 , C656) )) ) = D413 by L1787 , L645;
L1789: ( dom ( C659 * D419 ) ) = ( dom D419 ) by FINSEQ_3:120;
L1790: C674 in ( ( ( ( ParsedTerms C656 ) # ) * D384 ) . D413 ) by L1786;
L1791: (for B848 being set holds (B848 in ( dom D419 ) implies ( ( C659 * D419 ) . B848 ) = ( ( D412 # C674 ) . B848 )))
proof
set D420 = ( roots D419 );
let C675 being set;
L1792: ( dom ( D383 * D418 ) ) = ( dom D418 ) by PARTFUN1:def 2;
L1793: [ [ D413 , (the carrier of C655) ] , D420 ] in (the Rules of D379) by L1787 , LANG1:def 1;
assume L1794: C675 in ( dom D419 );
reconsider D421 = C675 as Nat by L1794;
L1795: ( ( D412 # C674 ) . D421 ) = ( ( D412 . ( D418 /. D421 ) ) . ( C674 . D421 ) ) by L1794 , MSUALG_3:def 6;
L1796: ( ( C659 * D419 ) . D421 ) = ( C659 . ( C674 . D421 ) ) by L1789 , L1794 , FINSEQ_3:120;
L1797: ( D412 . ( D418 /. D421 ) ) = ( C659 | ( D383 . ( D418 /. D421 ) ) ) by L1668;
L1798: ( dom D420 ) = ( dom D419 ) by TREES_3:def 18;
reconsider D422 = D420 as (Element of ( D417 * )) by L1793 , ZFMISC_1:87;
L1799: ( len D422 ) = ( len D418 ) by L1793 , L43;
L1800: ( Seg ( len D422 ) ) = ( dom D422 ) by FINSEQ_1:def 3;
L1801: ( Seg ( len D418 ) ) = ( dom D418 ) by FINSEQ_1:def 3;
L1802: D419 in ( product ( ( ParsedTerms C656 ) * D418 ) ) by L1790 , L1785 , MSAFREE:1;
L1803: ( D419 . D421 ) in ( ( ( ParsedTerms C656 ) * D418 ) . D421 ) by L1802 , L1794 , L1792 , L1798 , L1799 , L1800 , L1801 , CARD_3:9;
L1804: ( ( ( ParsedTerms C656 ) * D418 ) . D421 ) = ( D383 . ( D418 . D421 ) ) by L1794 , L1792 , L1798 , L1799 , L1800 , L1801 , FUNCT_1:12
.= ( D383 . ( D418 /. D421 ) ) by L1794 , L1798 , L1799 , L1800 , L1801 , PARTFUN1:def 6;
thus L1805: thesis by L1804 , L1796 , L1795 , L1797 , L1803 , FUNCT_1:49;
end;
L1806: ( dom ( D412 # C674 ) ) = ( dom D418 ) by MSUALG_3:6;
L1807: ( C659 * D419 ) = ( D412 # C674 ) by L1806 , L1789 , L1791 , FUNCT_1:2 , MSUALG_3:6;
L1808: ( D412 . D414 ) = ( C659 | ( D383 . D414 ) ) by L1668;
L1809: ( rng ( PTDenOp (D413 , C656) ) ) c= ( ( ( ParsedTerms C656 ) * D387 ) . D413 ) by RELAT_1:def 19;
L1810: ( dom ( PTDenOp (D413 , C656) ) ) = ( ( ( ( ParsedTerms C656 ) # ) * D384 ) . D413 ) by FUNCT_2:def 1;
L1811: ( ( PTDenOp (D413 , C656) ) . D419 ) = ( ( OSSym (D413 , C656) ) -tree D419 ) by L1787 , L399;
L1812: ( ( OSSym (D413 , C656) ) -tree D419 ) in ( rng ( PTDenOp (D413 , C656) ) ) by L1811 , L1786 , L1810 , FUNCT_1:def 3;
L1813: ( ( OSSym (D413 , C656) ) -tree D419 ) in ( ( D383 * D387 ) . D413 ) by L1812 , L1809;
L1814: ( dom D383 ) = (the carrier of C655) by PARTFUN1:def 2;
L1815: ( D383 . D414 ) in ( rng D383 ) by L1814 , FUNCT_1:def 3;
L1816: ( dom D387 ) = D386 by FUNCT_2:def 1;
L1817: ( ( OSSym (D413 , C656) ) -tree D419 ) in ( D383 . ( D387 . D413 ) ) by L1816 , L1783 , L1813 , FUNCT_1:12;
L1818: ( ( OSSym (D413 , C656) ) -tree D419 ) in ( D383 . D414 ) by L1817 , MSUALG_1:def 2;
L1819: ( dom C659 ) = ( TS D379 ) by FUNCT_2:def 1
.= ( union ( rng D383 ) ) by L360;
L1820: ( dom ( D412 . D414 ) ) = ( D383 . D414 ) by L1819 , L1808 , L1815 , RELAT_1:62 , ZFMISC_1:74;
L1821: D415 = ( ( PTOper C656 ) . D413 ) by MSUALG_1:def 6
.= ( PTDenOp (D413 , C656) ) by L424;
L1822: ( D415 . C674 ) = ( ( OSSym (D413 , C656) ) -tree D419 ) by L1821 , L1787 , L399;
L1823: ( ( D412 . D414 ) . ( D415 . C674 ) ) = ( C659 . ( ( OSSym (D413 , C656) ) -tree D419 ) ) by L1822 , L1818 , L1808 , L1820 , FUNCT_1:47
.= ( pi (( @ (C656 , ( OSSym (D413 , C656) )) ) , C657 , ( C659 * D419 )) ) by L1667 , L1787
.= ( D416 . ( D412 # C674 ) ) by L1788 , L1807 , MSAFREE:def 21;
thus L1824: thesis by L1823;
end;

thus L1825: D412 is  order-sorted
proof
let C676 , C677 being (Element of C655);
assume L1826: C676 <= C677;
L1827: ( D388 . C676 ) c= ( D388 . C677 ) by L1826 , OSALG_1:def 16;
let C678 being set;
assume that
L1828: C678 in ( dom ( D412 . C676 ) );
L1829: C678 in ( D388 . C676 ) by L1828;
L1830: C678 in ( D383 . C677 ) by L1829 , L1827;
thus L1831: C678 in ( dom ( D412 . C677 ) ) by L1830 , FUNCT_2:def 1;
L1832: ( D412 . C677 ) = ( C659 | ( D382 . C677 ) ) by L1668;
L1833: ( D412 . C676 ) = ( C659 | ( D382 . C676 ) ) by L1668;
thus L1834: ( ( D412 . C676 ) . C678 ) = ( C659 . C678 ) by L1833 , L1828 , FUNCT_1:49
.= ( ( D412 . C677 ) . C678 ) by L1827 , L1829 , L1832 , FUNCT_1:49;
end;

L1835: (for R6 being set holds (R6 in (the carrier of C655) implies ( ( D412 || D381 ) . R6 ) = ( C658 . R6 )))
proof
set D423 = ( D412 || D381 );
let R6 being set;
assume L1836: R6 in (the carrier of C655);
reconsider D424 = R6 as (Element of C655) by L1836;
L1837: ( dom ( D412 . D424 ) ) = ( D383 . D424 ) by FUNCT_2:def 1;
L1838: ( dom ( D423 . D424 ) ) = ( D381 . D424 ) by FUNCT_2:def 1;
L1839: ( D381 . D424 ) = ( PTVars (D424 , C656) ) by L1371;
L1840: ( D423 . D424 ) = ( ( D412 . D424 ) | ( D381 . D424 ) ) by MSAFREE:def 1;
L1841: (for B849 being set holds (B849 in ( D381 . D424 ) implies ( ( D423 . D424 ) . B849 ) = ( ( C658 . D424 ) . B849 )))
proof
let C679 being set;
L1842: ( D412 . D424 ) = ( C659 | ( D383 . D424 ) ) by L1668;
assume L1843: C679 in ( D381 . D424 );
L1844: C679 in { ( root-tree B850 ) where B850 is (Symbol of D379) : (B850 in ( Terminals D379 ) & ( B850 `2 ) = D424) } by L1843 , L1839 , L1355;
consider C680 being (Symbol of D379) such that L1845: C679 = ( root-tree C680 ) and L1846: C680 in ( Terminals D379 ) and L1847: ( C680 `2 ) = D424 by L1844;
thus L1848: ( ( D423 . D424 ) . C679 ) = ( ( D412 . D424 ) . C679 ) by L1840 , L1838 , L1843 , FUNCT_1:47
.= ( C659 . C679 ) by L1837 , L1839 , L1843 , L1842 , FUNCT_1:47
.= ( pi (C658 , D385 , C680) ) by L1666 , L1845 , L1846
.= ( ( C658 . D424 ) . C679 ) by L1845 , L1846 , L1847 , L1643;
end;
L1849: ( dom ( C658 . D424 ) ) = ( D381 . D424 ) by FUNCT_2:def 1;
thus L1850: thesis by L1849 , L1838 , L1841 , FUNCT_1:2;
end;
thus L1851: thesis by L1835 , PBOOLE:3;
end;
definition
let C681 being  locally_directed OrderSortedSign;
let C682 being  non-empty (ManySortedSet of C681);
let C683 being (Element of C681);
func NHReverse (C683 , C682) -> (Function of ( OSFreeGen (C683 , C682) ) , ( PTVars (C683 , C682) )) means 
(for B851 being (Symbol of ( DTConOSA C682 )) holds (( ( ( OSNat_Hom (( ParsedTermsOSA C682 ) , ( LCongruence C682 )) ) . C683 ) . ( root-tree B851 ) ) in ( OSFreeGen (C683 , C682) ) implies ( it . ( ( ( OSNat_Hom (( ParsedTermsOSA C682 ) , ( LCongruence C682 )) ) . C683 ) . ( root-tree B851 ) ) ) = ( root-tree B851 )));
existence
proof
set D425 = ( OSFreeGen (C683 , C682) );
set D426 = ( LCongruence C682 );
set D427 = ( ParsedTermsOSA C682 );
set D428 = (the Sorts of D427);
set D429 = ( OSNat_Hom (D427 , D426 , C683) );
set D430 = ( DTConOSA C682 );
set D431 = ( OSNat_Hom (( ParsedTermsOSA C682 ) , ( LCongruence C682 )) );
defpred S26[ set , set ] means (for B852 being (Symbol of D430) holds ($1 = ( ( D431 . C683 ) . ( root-tree B852 ) ) implies $2 = ( root-tree B852 )));
L1852: ( D431 . C683 ) = ( OSNat_Hom (D427 , D426 , C683) ) by OSALG_4:def 22;
L1853: (for B853 being set holds (B853 in D425 implies (ex B854 being set st (B854 in ( PTVars (C683 , C682) ) & S26[ B853 , B854 ]))))
proof
let C684 being set;
assume L1854: C684 in D425;
L1855: C684 in { ( ( D431 . C683 ) . ( root-tree B855 ) ) where B855 is (Symbol of D430) : (B855 in ( Terminals D430 ) & ( B855 `2 ) = C683) } by L1854 , L1426;
consider C685 being (Symbol of D430) such that L1856: C684 = ( ( D431 . C683 ) . ( root-tree C685 ) ) and L1857: C685 in ( Terminals D430 ) and L1858: ( C685 `2 ) = C683 by L1855;
L1859: C684 = ( D429 . ( root-tree C685 ) ) by L1856 , OSALG_4:def 22;
take ( root-tree C685 );
consider C686 being (Element of C681), C687 being set such that L1860: C687 in ( C682 . C686 ) and L1861: C685 = [ C687 , C686 ] by L1857 , L189;
L1862: C683 = C686 by L1858 , L1861 , MCART_1:7;
thus L1863: ( root-tree C685 ) in ( PTVars (C683 , C682) ) by L1862 , L1860 , L1861 , L1320;
reconsider D432 = ( root-tree C685 ) as (Element of ( D428 . C683 )) by L1860 , L1861 , L1862 , L455;
L1864: ( D429 . D432 ) = ( OSClass (D426 , D432) ) by OSALG_4:def 21;
reconsider D433 = ( root-tree C685 ) as (Element of ( TS D430 )) by L1860 , L1861 , L455;
let C688 being (Symbol of D430);
assume L1865: C684 = ( ( D431 . C683 ) . ( root-tree C688 ) );
L1866: ( OSClass (D426 , D433) ) = ( OSClass (D426 , D432) ) by L1588;
L1867: ( OSClass (D426 , D433) ) <> ( {} ) by L1596;
L1868: C684 <> ( {} ) by L1867 , L1866 , L1859 , OSALG_4:def 21;
L1869: ( root-tree C688 ) in ( dom D429 ) by L1868 , L1852 , L1865 , FUNCT_1:def 2;
reconsider D434 = ( root-tree C688 ) as (Element of ( D428 . C683 )) by L1869;
reconsider D435 = D434 as (Element of ( TS D430 )) by L560;
L1870: ( OSClass (D426 , D435) ) = ( OSClass (D426 , D434) ) by L1588;
L1871: C684 = ( D429 . ( root-tree C688 ) ) by L1865 , OSALG_4:def 22;
L1872: ( OSClass (D426 , D434) ) = ( OSClass (D426 , D432) ) by L1871 , L1859 , L1864 , OSALG_4:def 21;
L1873: D435 in ( OSClass (D426 , D433) ) by L1872 , L1866 , L1870 , L1613;
thus L1874: thesis by L1873 , L1860 , L1861 , L1634;
end;
consider C689 being Function such that L1875: (( dom C689 ) = D425 & ( rng C689 ) c= ( PTVars (C683 , C682) ) & (for B856 being set holds (B856 in D425 implies S26[ B856 , ( C689 . B856 ) ]))) from FUNCT_1:sch 5(L1853);
reconsider D436 = C689 as (Function of D425 , ( PTVars (C683 , C682) )) by L1875 , FUNCT_2:2;
take D436;
let C690 being (Symbol of D430);
assume L1876: ( ( D431 . C683 ) . ( root-tree C690 ) ) in D425;
thus L1877: thesis by L1876 , L1875;
end;
uniqueness
proof
let C691 , C692 being (Function of ( OSFreeGen (C683 , C682) ) , ( PTVars (C683 , C682) ));
set D437 = ( OSNat_Hom (( ParsedTermsOSA C682 ) , ( LCongruence C682 )) );
assume that
L1878: (for B857 being (Symbol of ( DTConOSA C682 )) holds (( ( D437 . C683 ) . ( root-tree B857 ) ) in ( OSFreeGen (C683 , C682) ) implies ( C691 . ( ( D437 . C683 ) . ( root-tree B857 ) ) ) = ( root-tree B857 )))
and
L1879: (for B858 being (Symbol of ( DTConOSA C682 )) holds (( ( D437 . C683 ) . ( root-tree B858 ) ) in ( OSFreeGen (C683 , C682) ) implies ( C692 . ( ( D437 . C683 ) . ( root-tree B858 ) ) ) = ( root-tree B858 )));
set D438 = ( DTConOSA C682 );
set D439 = { ( ( D437 . C683 ) . ( root-tree B859 ) ) where B859 is (Symbol of D438) : (B859 in ( Terminals D438 ) & ( B859 `2 ) = C683) };
L1880: ( OSFreeGen (C683 , C682) ) = D439 by L1426;
L1881: ( dom C692 ) = D439 by L1880 , FUNCT_2:def 1;
L1882: (for B860 being set holds (B860 in D439 implies ( C691 . B860 ) = ( C692 . B860 )))
proof
let C693 being set;
assume L1883: C693 in D439;
consider C694 being (Symbol of D438) such that L1884: C693 = ( ( D437 . C683 ) . ( root-tree C694 ) ) and L1885: C694 in ( Terminals D438 ) and L1886: ( C694 `2 ) = C683 by L1883;
L1887: ( C691 . ( ( D437 . C683 ) . ( root-tree C694 ) ) ) = ( root-tree C694 ) by L1878 , L1880 , L1883 , L1884;
thus L1888: thesis by L1887 , L1879 , L1880 , L1883 , L1884;
end;
L1889: ( dom C691 ) = D439 by L1880 , FUNCT_2:def 1;
thus L1890: thesis by L1889 , L1881 , L1882 , FUNCT_1:2;
end;
end;
definition
let C695 being  locally_directed OrderSortedSign;
let C696 being  non-empty (ManySortedSet of C695);
func NHReverse C696 -> (ManySortedFunction of ( OSFreeGen C696 ) , ( PTVars C696 )) means 
(for B861 being (Element of C695) holds ( it . B861 ) = ( NHReverse (B861 , C696) ));
existence
proof
defpred S27[ set , set ] means (for B862 being (Element of C695) holds (B862 = $1 implies $2 = ( NHReverse (B862 , C696) )));
set D440 = (the carrier of C695);
set D441 = ( OSFreeGen C696 );
L1892: (for B863 being set holds (B863 in D440 implies (ex B864 being set st S27[ B863 , B864 ])))
proof
let C697 being set;
assume L1893: C697 in D440;
reconsider D442 = C697 as (SortSymbol of C695) by L1893;
take ( NHReverse (D442 , C696) );
let C698 being (Element of C695);
assume L1894: C698 = C697;
thus L1895: thesis by L1894;
end;
consider C699 being Function such that L1896: (( dom C699 ) = D440 & (for B865 being set holds (B865 in D440 implies S27[ B865 , ( C699 . B865 ) ]))) from CLASSES1:sch 1(L1892);
reconsider D443 = C699 as (ManySortedSet of D440) by L1896 , PARTFUN1:def 2 , RELAT_1:def 18;
L1897: (for B866 being set holds (B866 in ( dom D443 ) implies ( D443 . B866 ) is Function))
proof
let C700 being set;
assume L1898: C700 in ( dom D443 );
reconsider D444 = C700 as (SortSymbol of C695) by L1898;
L1899: ( D443 . D444 ) = ( NHReverse (D444 , C696) ) by L1896;
thus L1900: thesis by L1899;
end;
reconsider D445 = D443 as (ManySortedFunction of D440) by L1897 , FUNCOP_1:def 6;
L1901: (for B867 being set holds (B867 in D440 implies ( D445 . B867 ) is (Function of ( D441 . B867 ) , ( ( PTVars C696 ) . B867 ))))
proof
let C701 being set;
assume L1902: C701 in D440;
reconsider D446 = C701 as (SortSymbol of C695) by L1902;
L1903: ( ( PTVars C696 ) . D446 ) = ( PTVars (D446 , C696) ) by L1371;
L1904: ( D445 . C701 ) = ( NHReverse (D446 , C696) ) by L1896;
L1905: ( ( OSFreeGen C696 ) . D446 ) = ( OSFreeGen (D446 , C696) ) by L1442;
thus L1906: thesis by L1905 , L1903 , L1904;
end;
reconsider D447 = D445 as (ManySortedFunction of D441 , ( PTVars C696 )) by L1901 , PBOOLE:def 15;
take D447;
let C702 being (Element of C695);
thus L1907: thesis by L1896;
end;
uniqueness
proof
let C703 , C704 being (ManySortedFunction of ( OSFreeGen C696 ) , ( PTVars C696 ));
assume that
L1908: (for B868 being (Element of C695) holds ( C703 . B868 ) = ( NHReverse (B868 , C696) ))
and
L1909: (for B869 being (Element of C695) holds ( C704 . B869 ) = ( NHReverse (B869 , C696) ));
L1910: (for B870 being set holds (B870 in (the carrier of C695) implies ( C703 . B870 ) = ( C704 . B870 )))
proof
let C705 being set;
assume L1911: C705 in (the carrier of C695);
reconsider D448 = C705 as (SortSymbol of C695) by L1911;
L1912: ( C703 . D448 ) = ( NHReverse (D448 , C696) ) by L1908;
thus L1913: thesis by L1912 , L1909;
end;
thus L1914: thesis by L1910 , PBOOLE:3;
end;
end;
theorem
L1916: (for B871 being  locally_directed OrderSortedSign holds (for B872 being  non-empty (ManySortedSet of B871) holds ( OSFreeGen B872 ) is  osfree))
proof
let C706 being  locally_directed OrderSortedSign;
let C707 being  non-empty (ManySortedSet of C706);
set D449 = ( FreeOSA C707 );
set D450 = ( ParsedTermsOSA C707 );
set D451 = (the Sorts of D450);
set D452 = ( OSFreeGen C707 );
let C708 being  non-empty  monotone (OSAlgebra of C706);
let C709 being (ManySortedFunction of D452 , (the Sorts of C708));
set D453 = (the Sorts of D449);
set D454 = (the Sorts of C708);
set D455 = ( LCongruence C707 );
set D456 = ( OSNat_Hom (D450 , D455) );
reconsider D457 = D456 as (ManySortedFunction of D450 , D449);
set D458 = ( D457 || ( PTVars C707 ) );
L1917:
now
let C710 being (Element of C706);
L1918: ( D458 . C710 ) = ( ( D457 . C710 ) | ( ( PTVars C707 ) . C710 ) ) by MSAFREE:def 1;
thus L1919: ( D458 . C710 ) = ( ( D457 . C710 ) | ( PTVars (C710 , C707) ) ) by L1918 , L1371;
thus L1920: ( PTVars (C710 , C707) ) c= ( D451 . C710 );
thus L1921: (( dom ( D457 . C710 ) ) = ( D451 . C710 ) & ( rng ( D457 . C710 ) ) c= ( D453 . C710 )) by FUNCT_2:def 1 , RELAT_1:def 19;
L1922: ( ( PTVars C707 ) . C710 ) = ( PTVars (C710 , C707) ) by L1371;
thus L1923: ( dom ( D458 . C710 ) ) = ( PTVars (C710 , C707) ) by L1922 , FUNCT_2:def 1;
L1924: (for B873 being set holds (B873 in ( D452 . C710 ) iff (ex B874 being set st (B874 in ( dom ( D458 . C710 ) ) & B873 = ( ( D458 . C710 ) . B874 )))))
proof
let C711 being set;
thus L1925: (C711 in ( D452 . C710 ) implies (ex B875 being set st (B875 in ( dom ( D458 . C710 ) ) & C711 = ( ( D458 . C710 ) . B875 ))))
proof
assume L1926: C711 in ( D452 . C710 );
L1927: C711 in ( OSFreeGen (C710 , C707) ) by L1926 , L1442;
consider C712 being set such that L1928: C712 in ( C707 . C710 ) and L1929: C711 = ( ( D456 . C710 ) . ( root-tree [ C712 , C710 ] ) ) by L1927 , L1390;
take D459 = ( root-tree [ C712 , C710 ] );
L1930: ( root-tree [ C712 , C710 ] ) in ( dom ( D458 . C710 ) ) by L1923 , L1928 , L1320;
thus L1931: thesis by L1930 , L1918 , L1929 , FUNCT_1:47;
end;

given C713 being set such that
L1932: C713 in ( dom ( D458 . C710 ) )
and
L1933: C711 = ( ( D458 . C710 ) . C713 );

consider C714 being set such that L1934: C714 in ( C707 . C710 ) and L1935: C713 = ( root-tree [ C714 , C710 ] ) by L1922 , L1932 , L1320;
L1936: C711 = ( ( D456 . C710 ) . ( root-tree [ C714 , C710 ] ) ) by L1918 , L1932 , L1933 , L1935 , FUNCT_1:47;
L1937: C711 in ( OSFreeGen (C710 , C707) ) by L1936 , L1934 , L1390;
thus L1938: thesis by L1937 , L1442;
end;
thus L1939: ( rng ( D458 . C710 ) ) = ( D452 . C710 ) by L1924 , FUNCT_1:def 3;
thus L1940: ( D458 . C710 ) is (Function of ( PTVars (C710 , C707) ) , ( D452 . C710 )) by L1939 , L1923 , FUNCT_2:1;
thus L1941: ( D458 . C710 ) is (Function of ( ( PTVars C707 ) . C710 ) , ( D452 . C710 )) by L1922 , L1923 , L1939 , FUNCT_2:1;
end;
L1942: (for B876 being set holds (B876 in (the carrier of C706) implies ( D458 . B876 ) is (Function of ( ( PTVars C707 ) . B876 ) , ( D452 . B876 )))) by L1917;
reconsider D460 = ( D457 || ( PTVars C707 ) ) as (ManySortedFunction of ( PTVars C707 ) , D452) by L1942 , PBOOLE:def 15;
consider C715 being (ManySortedFunction of D450 , C708) such that L1943: C715 is_homomorphism D450 , C708 and L1944: C715 is  order-sorted and L1945: ( C715 || ( PTVars C707 ) ) = ( C709 ** D460 ) by L1665;
reconsider D461 = ( OSCng C715 ) as  monotone (OSCongruence of D450) by L1943 , L1944 , OSALG_4:24;
reconsider D462 = ( OSHomQuot (C715 , D455) ) as (ManySortedFunction of D449 , C708);
take D462;
L1946: D455 c= D461 by L656;
thus L1947: (D462 is_homomorphism D449 , C708 & D462 is  order-sorted) by L1946 , L1943 , L1944 , OSALG_4:25;
L1948: (for B877 being (Element of C706) holds (for B878 being (Function of ( D453 . B877 ) , ( D454 . B877 )) holds (B878 = ( D462 . B877 ) implies ( C709 . B877 ) = ( B878 | ( D452 . B877 ) ))))
proof
let C716 being (Element of C706);
L1949: ( D452 . C716 ) = ( OSFreeGen (C716 , C707) ) by L1442;
L1950: ( D452 . C716 ) c= ( D453 . C716 ) by L1949;
L1951: ( D452 . C716 ) c= ( dom ( OSHomQuot (C715 , D455 , C716) ) ) by L1950 , FUNCT_2:def 1;
L1952: ( dom ( ( OSHomQuot (C715 , D455 , C716) ) | ( D452 . C716 ) ) ) = ( D452 . C716 ) by L1951 , RELAT_1:62;
L1953: ( rng ( ( OSHomQuot (C715 , D455 , C716) ) | ( D452 . C716 ) ) ) c= ( D454 . C716 ) by RELAT_1:def 19;
reconsider D463 = ( ( OSHomQuot (C715 , D455 , C716) ) | ( D452 . C716 ) ) as (Function of ( D452 . C716 ) , ( D454 . C716 )) by L1953 , L1952 , FUNCT_2:2;
L1954:
now
L1955: ( dom ( D460 . C716 ) ) = ( PTVars (C716 , C707) ) by L1917;
L1956: ( ( C715 . C716 ) | ( ( PTVars C707 ) . C716 ) ) = ( ( C709 ** D460 ) . C716 ) by L1945 , MSAFREE:def 1
.= ( ( C709 . C716 ) * ( D460 . C716 ) ) by MSUALG_3:2;
let C717 being set;
assume that
L1957: C717 in ( D452 . C716 );
consider C718 being set such that L1958: C718 in ( C707 . C716 ) and L1959: C717 = ( ( D456 . C716 ) . ( root-tree [ C718 , C716 ] ) ) by L1949 , L1957 , L1390;
reconsider D464 = ( root-tree [ C718 , C716 ] ) as (Element of ( D451 . C716 )) by L1958 , L455;
L1960: ( OSClass (D455 , D464) ) = ( ( OSNat_Hom (D450 , D455 , C716) ) . D464 ) by OSALG_4:def 21
.= C717 by L1959 , OSALG_4:def 22;
L1961: ( root-tree [ C718 , C716 ] ) in ( PTVars (C716 , C707) ) by L1958 , L1320;
L1962: D464 in ( ( PTVars C707 ) . C716 ) by L1961 , L1371;
L1963: ( ( C715 . C716 ) . D464 ) = ( ( ( C715 . C716 ) | ( ( PTVars C707 ) . C716 ) ) . D464 ) by L1962 , FUNCT_1:49;
L1964: ( ( OSHomQuot (C715 , D455 , C716) ) . ( OSClass (D455 , D464) ) ) = ( ( C715 . C716 ) . D464 ) by L1943 , L1944 , L1946 , OSALG_4:def 27;
L1965: ( ( D460 . C716 ) . D464 ) = ( ( ( D456 . C716 ) | ( PTVars (C716 , C707) ) ) . D464 ) by L1917
.= ( ( D456 . C716 ) . D464 ) by L1961 , FUNCT_1:49;
L1966: ( ( C715 . C716 ) . D464 ) = ( ( C709 . C716 ) . C717 ) by L1965 , L1959 , L1961 , L1956 , L1963 , L1955 , FUNCT_1:13;
thus L1967: ( ( C709 . C716 ) . C717 ) = ( ( ( OSHomQuot (C715 , D455 , C716) ) | ( D452 . C716 ) ) . C717 ) by L1966 , L1957 , L1960 , L1964 , FUNCT_1:49;
end;
L1968: ( C709 . C716 ) = D463 by L1954 , FUNCT_2:12;
let C719 being (Function of ( D453 . C716 ) , ( D454 . C716 ));
assume L1969: C719 = ( D462 . C716 );
thus L1970: thesis by L1969 , L1968 , OSALG_4:def 28;
end;
L1971: (for B879 being set holds (B879 in (the carrier of C706) implies (for B880 being (Function of ( D453 . B879 ) , ( D454 . B879 )) holds (B880 = ( D462 . B879 ) implies ( C709 . B879 ) = ( B880 | ( D452 . B879 ) ))))) by L1948;
thus L1972: thesis by L1971 , MSAFREE:def 1;
end;
theorem
L1973: (for B881 being  locally_directed OrderSortedSign holds (for B882 being  non-empty (ManySortedSet of B881) holds ( FreeOSA B882 ) is  osfree))
proof
let C720 being  locally_directed OrderSortedSign;
let C721 being  non-empty (ManySortedSet of C720);
take ( OSFreeGen C721 );
thus L1974: thesis by L1916;
end;
registration
let C722 being  locally_directed OrderSortedSign;
cluster  osfree  strict for  non-empty  monotone  non-empty  monotone  non-empty  monotone  non-empty  monotone (OSAlgebra of C722);
existence
proof
set D465 = the  non-empty (OSAlgebra of C722);
reconsider D466 = (the Sorts of D465) as  non-empty (ManySortedSet of C722);
take ( FreeOSA D466 );
thus L1975: thesis by L1973;
end;
end;
begin
definition
let C723 being  locally_directed  regular  monotone OrderSortedSign;
let C724 being  non-empty (ManySortedSet of C723);
func PTMin C724 -> (Function of ( TS ( DTConOSA C724 ) ) , ( TS ( DTConOSA C724 ) )) means 
:L1977: ((for B883 being (Symbol of ( DTConOSA C724 )) holds (B883 in ( Terminals ( DTConOSA C724 ) ) implies ( it . ( root-tree B883 ) ) = ( pi B883 ))) & (for B884 being (Symbol of ( DTConOSA C724 )) holds (for B885 being (FinSequence of ( TS ( DTConOSA C724 ) )) holds (B884 ==> ( roots B885 ) implies ( it . ( B884 -tree B885 ) ) = ( pi (( @ (C724 , B884) ) , ( it * B885 )) )))));
existence
proof
set D467 = ( DTConOSA C724 );
set D468 = ( TS D467 );
deffunc H14((Symbol of D467)) = ( pi $1 );
deffunc H15((Symbol of D467) , set , (FinSequence of D468)) = ( In (( pi (( @ (C724 , $1) ) , $3) ) , D468) );
consider C725 being (Function of ( TS D467 ) , D468) such that L1978: ((for B886 being (Symbol of D467) holds (B886 in ( Terminals D467 ) implies ( C725 . ( root-tree B886 ) ) = H14(B886))) & (for B887 being (Symbol of D467) holds (for B888 being (FinSequence of ( TS D467 )) holds (B887 ==> ( roots B888 ) implies ( C725 . ( B887 -tree B888 ) ) = H15(B887 , ( roots B888 ) , (( C725 * B888 ) qua (FinSequence of D468))))))) from DTCONSTR:sch 8;
take C725;
thus L1979: (for B889 being (Symbol of D467) holds (B889 in ( Terminals D467 ) implies ( C725 . ( root-tree B889 ) ) = H14(B889))) by L1978;
let C726 being (Symbol of D467);
let C727 being (FinSequence of ( TS D467 ));
reconsider D469 = ( C725 * C727 ) as (FinSequence of D468);
assume L1980: C726 ==> ( roots C727 );
L1981: ( C725 . ( C726 -tree C727 ) ) = ( In (( pi (( @ (C724 , C726) ) , D469) ) , D468) ) by L1980 , L1978;
thus L1982: thesis by L1981 , FUNCT_7:def 1;
end;
uniqueness
proof
set D470 = ( DTConOSA C724 );
set D471 = ( TS D470 );
deffunc H16((Symbol of D470)) = ( pi $1 );
deffunc H17((Symbol of D470) , set , (FinSequence of D471)) = ( pi (( @ (C724 , $1) ) , ($3 qua (FinSequence of D471))) );
let C728 , C729 being (Function of ( TS ( DTConOSA C724 ) ) , ( TS ( DTConOSA C724 ) ));
assume that
L1983: ((for B890 being (Symbol of ( DTConOSA C724 )) holds (B890 in ( Terminals ( DTConOSA C724 ) ) implies ( C728 . ( root-tree B890 ) ) = H16(B890))) & (for B891 being (Symbol of ( DTConOSA C724 )) holds (for B892 being (FinSequence of ( TS ( DTConOSA C724 ) )) holds (B891 ==> ( roots B892 ) implies ( C728 . ( B891 -tree B892 ) ) = H17(B891 , ( roots B892 ) , (( C728 * B892 ) qua (FinSequence of D471)))))))
and
L1984: ((for B893 being (Symbol of ( DTConOSA C724 )) holds (B893 in ( Terminals ( DTConOSA C724 ) ) implies ( C729 . ( root-tree B893 ) ) = H16(B893))) & (for B894 being (Symbol of ( DTConOSA C724 )) holds (for B895 being (FinSequence of ( TS ( DTConOSA C724 ) )) holds (B894 ==> ( roots B895 ) implies ( C729 . ( B894 -tree B895 ) ) = H17(B894 , ( roots B895 ) , (( C729 * B895 ) qua (FinSequence of D471)))))));
thus L1985: C728 = C729 from DTCONSTR:sch 9(L1983 , L1984);
end;
end;
theorem
L1987: (for B896 being  locally_directed  regular  monotone OrderSortedSign holds (for B897 being  non-empty (ManySortedSet of B896) holds (for B898 being (Element of ( TS ( DTConOSA B897 ) )) holds (( ( PTMin B897 ) . B898 ) in ( OSClass (( PTCongruence B897 ) , B898) ) & ( LeastSort ( ( PTMin B897 ) . B898 ) ) <= ( LeastSort B898 ) & (for B899 being (Element of B896) holds (for B900 being set holds ((B900 in ( B897 . B899 ) & B898 = ( root-tree [ B900 , B899 ] )) implies ( ( PTMin B897 ) . B898 ) = B898))) & (for B901 being (OperSymbol of B896) holds (for B902 being (FinSequence of ( TS ( DTConOSA B897 ) )) holds ((( OSSym (B901 , B897) ) ==> ( roots B902 ) & B898 = ( ( OSSym (B901 , B897) ) -tree B902 )) implies (( LeastSorts ( ( PTMin B897 ) * B902 ) ) <= ( the_arity_of B901 ) & ( OSSym (B901 , B897) ) ==> ( roots ( ( PTMin B897 ) * B902 ) ) & ( OSSym (( LBound (B901 , ( LeastSorts ( ( PTMin B897 ) * B902 ) )) ) , B897) ) ==> ( roots ( ( PTMin B897 ) * B902 ) ) & ( ( PTMin B897 ) . B898 ) = ( ( OSSym (( LBound (B901 , ( LeastSorts ( ( PTMin B897 ) * B902 ) )) ) , B897) ) -tree ( ( PTMin B897 ) * B902 ) )))))))))
proof
let C730 being  locally_directed  regular  monotone OrderSortedSign;
let C731 being  non-empty (ManySortedSet of C730);
let C732 being (Element of ( TS ( DTConOSA C731 ) ));
set D472 = ( ParsedTermsOSA C731 );
set D473 = ( DTConOSA C731 );
set D474 = ( PTCongruence C731 );
set D475 = (the Sorts of D472);
set D476 = ( PTMin C731 );
set D477 = ( PTClasses C731 );
defpred S28[ (Element of ( TS D473 )) ] means ( ( PTMin C731 ) . $1 ) in ( OSClass (D474 , $1) );
defpred S29[ (Element of ( TS D473 )) ] means ( LeastSort ( ( PTMin C731 ) . $1 ) ) <= ( LeastSort $1 );
defpred S30[ (Element of ( TS D473 )) ] means (for B903 being (Element of C730) holds (for B904 being set holds ((B904 in ( C731 . B903 ) & $1 = ( root-tree [ B904 , B903 ] )) implies ( ( PTMin C731 ) . $1 ) = $1)));
defpred S31[ (Element of ( TS D473 )) ] means (for B905 being (OperSymbol of C730) holds (for B906 being (FinSequence of ( TS ( DTConOSA C731 ) )) holds ((( OSSym (B905 , C731) ) ==> ( roots B906 ) & $1 = ( ( OSSym (B905 , C731) ) -tree B906 )) implies (( LeastSorts ( ( PTMin C731 ) * B906 ) ) <= ( the_arity_of B905 ) & ( OSSym (B905 , C731) ) ==> ( roots ( ( PTMin C731 ) * B906 ) ) & ( OSSym (( LBound (B905 , ( LeastSorts ( ( PTMin C731 ) * B906 ) )) ) , C731) ) ==> ( roots ( ( PTMin C731 ) * B906 ) ) & ( ( PTMin C731 ) . $1 ) = ( ( OSSym (( LBound (B905 , ( LeastSorts ( ( PTMin C731 ) * B906 ) )) ) , C731) ) -tree ( ( PTMin C731 ) * B906 ) )))));
defpred S32[ (DecoratedTree of (the carrier of D473)) ] means (ex B907 being (Element of ( TS D473 )) st (B907 = $1 & S28[ B907 ] & S29[ B907 ] & S30[ B907 ] & S31[ B907 ]));
L1988: (for B908 being (Symbol of D473) holds (for B909 being (FinSequence of ( TS D473 )) holds ((B908 ==> ( roots B909 ) & (for B910 being (DecoratedTree of (the carrier of D473)) holds (B910 in ( rng B909 ) implies S32[ B910 ]))) implies S32[ ( B908 -tree B909 ) ])))
proof
let C733 being (Symbol of D473);
let C734 being (FinSequence of ( TS D473 ));
assume that
L1989: C733 ==> ( roots C734 )
and
L1990: (for B911 being (DecoratedTree of (the carrier of D473)) holds (B911 in ( rng C734 ) implies (ex B912 being (Element of ( TS D473 )) st (B912 = B911 & S28[ B912 ] & S29[ B912 ] & S30[ B912 ] & S31[ B912 ]))));
reconsider D478 = ( C733 -tree C734 ) as (Element of ( TS D473 )) by L1989 , L505;
L1991: ( rng C734 ) c= ( TS D473 ) by FINSEQ_1:def 4;
consider C735 being (OperSymbol of C730) such that L1992: C733 = [ C735 , (the carrier of C730) ] and L1993: C734 in ( Args (C735 , D472) ) and L1994: ( C733 -tree C734 ) = ( ( Den (C735 , D472) ) . C734 ) and L1995: (for B913 being (Element of C730) holds (( C733 -tree C734 ) in ( D475 . B913 ) iff ( the_result_sort_of C735 ) <= B913)) by L1989 , L505;
set D479 = ( ( PTMin C731 ) * C734 );
set D480 = ( LeastSorts D479 );
set D481 = ( the_arity_of C735 );
set D482 = ( the_result_sort_of C735 );
set D483 = ( LBound (C735 , D480) );
L1996: ( dom C734 ) = ( dom D481 ) by L1993 , MSUALG_3:6;
L1997: ( dom ( ( PTMin C731 ) * C734 ) ) = ( dom C734 ) by FINSEQ_3:120;
L1998: ( dom D480 ) = ( dom C734 ) by L1997 , L585;
L1999: ( @ (C731 , C733) ) = C735 by L1989 , L1992 , L645;
L2000: ( D476 . ( C733 -tree C734 ) ) = ( pi (C735 , ( D476 * C734 )) ) by L1999 , L1989 , L1977;
L2001: S31[ D478 ]
proof
let C736 being (OperSymbol of C730);
let C737 being (FinSequence of ( TS ( DTConOSA C731 ) ));
assume that
L2002: ( OSSym (C736 , C731) ) ==> ( roots C737 )
and
L2003: D478 = ( ( OSSym (C736 , C731) ) -tree C737 );
set D484 = ( ( PTMin C731 ) * C737 );
set D485 = ( LeastSorts D484 );
set D486 = ( LBound (C736 , D485) );
L2004: C737 = C734 by L2003 , TREES_4:15;
L2005: ( OSSym (C736 , C731) ) = C733 by L2003 , TREES_4:15;
L2006: C736 = C735 by L2005 , L1992 , XTUPLE_0:1;
L2007: ( LeastSorts ( ( PTMin C731 ) * C734 ) ) <= ( the_arity_of C735 )
proof
thus L2008: ( len D480 ) = ( len D481 ) by L1996 , L1998 , FINSEQ_3:29;
let C738 being set;
assume that
L2009: C738 in ( dom D480 );
reconsider D487 = C738 as Nat by L2009;
L2010: ( C734 . D487 ) in ( rng C734 ) by L1998 , L2009 , FUNCT_1:3;
reconsider D488 = ( C734 . D487 ) as (Element of ( TS D473 )) by L2010 , L1991;
L2011: (ex B914 being (Element of ( TS D473 )) st (B914 = D488 & S28[ B914 ] & S29[ B914 ] & S30[ B914 ] & S31[ B914 ])) by L1990 , L1998 , L2009 , FUNCT_1:3;
L2012: ( D481 /. D487 ) = ( D481 . C738 ) by L1996 , L1998 , L2009 , PARTFUN1:def 6;
L2013: ( D479 . D487 ) = ( ( PTMin C731 ) . D488 ) by L1997 , L1998 , L2009 , FINSEQ_3:120;
L2014: ( C734 . D487 ) in ( D475 . ( D481 /. D487 ) ) by L1993 , L1996 , L1998 , L2009 , MSUALG_6:2;
L2015: ( LeastSort D488 ) <= ( D481 /. D487 ) by L2014 , L532;
let C739 , C740 being (Element of C730);
assume that
L2016: C739 = ( D480 . C738 )
and
L2017: C740 = ( D481 . C738 );
L2018: (ex B915 being (Element of ( TS D473 )) st (B915 = ( D479 . D487 ) & ( D480 . D487 ) = ( LeastSort B915 ))) by L1997 , L1998 , L2009 , L585;
thus L2019: thesis by L2018 , L2011 , L2016 , L2017 , L2013 , L2015 , L2012 , ORDERS_2:3;
end;
thus L2020: ( LeastSorts ( ( PTMin C731 ) * C737 ) ) <= ( the_arity_of C736 ) by L2007 , L1992 , L2005 , L2004 , XTUPLE_0:1;
L2021: ( LBound (C736 , D485) ) has_least_rank_for C736 , D485 by L2004 , L2006 , L2007 , OSALG_1:14;
L2022: ( LBound (C736 , D485) ) has_least_args_for C736 , D485 by L2021 , OSALG_1:def 11;
L2023: D485 <= ( the_arity_of D486 ) by L2022 , OSALG_1:def 9;
L2024: D484 in ( Args (D486 , D472) ) by L2023 , L610;
L2025: D484 in ( Args (C736 , D472) ) by L2004 , L2006 , L2007 , L610;
thus L2026: (( OSSym (C736 , C731) ) ==> ( roots D484 ) & ( OSSym (D486 , C731) ) ==> ( roots D484 )) by L2025 , L2024 , L520;
thus L2027: thesis by L2026 , L2000 , L2004 , L2006 , L642;
end;
L2028: (for B916 being (Element of C730) holds (for B917 being set holds ((B917 in ( C731 . B916 ) & D478 = ( root-tree [ B917 , B916 ] )) implies ( D476 . D478 ) = D478)))
proof
let C741 being (Element of C730);
let C742 being set;
assume that
L2029: C742 in ( C731 . C741 )
and
L2030: D478 = ( root-tree [ C742 , C741 ] );
L2031: ( D478 . ( {} ) ) = [ C735 , (the carrier of C730) ] by L1992 , TREES_4:def 4;
thus L2032: thesis by L2031 , L2029 , L2030 , L455;
end;
L2033: ( D477 . D478 ) = ( @ (C733 , ( D477 * C734 )) ) by L1989 , L774
.= { [ ( ( Den (B918 , ( ParsedTermsOSA C731 )) ) . B919 ) , B920 ] where B918 is (OperSymbol of C730) , B919 is (Element of ( Args (B918 , ( ParsedTermsOSA C731 )) )) , B920 is (Element of C730) : ((ex B921 being (OperSymbol of C730) st (C733 = [ B921 , (the carrier of C730) ] & B921 ~= B918 & ( len ( the_arity_of B921 ) ) = ( len ( the_arity_of B918 ) ) & ( the_result_sort_of B921 ) <= B920 & ( the_result_sort_of B918 ) <= B920)) & (ex B922 being (Element of ( (the carrier of C730) * )) st (( dom B922 ) = ( dom ( D477 * C734 ) ) & (for B923 being Nat holds (B923 in ( dom ( D477 * C734 ) ) implies [ ( B919 . B923 ) , ( B922 /. B923 ) ] in ( ( D477 * C734 ) . B923 )))))) };
take D478;
thus L2034: D478 = ( C733 -tree C734 );
L2035: (ex B924 being Nat st ( dom C734 ) = ( Seg B924 )) by FINSEQ_1:def 2;
reconsider D489 = D478 as (Element of ( D475 . ( LeastSort D478 ) )) by L532;
L2036: ( dom ( D477 * C734 ) ) = ( dom C734 ) by FINSEQ_3:120;
L2037: C733 = ( OSSym (C735 , C731) ) by L1992;
L2038: ( OSSym (( LBound (C735 , ( LeastSorts ( ( PTMin C731 ) * C734 ) )) ) , C731) ) ==> ( roots ( ( PTMin C731 ) * C734 ) ) by L2037 , L1989 , L2001;
consider C743 being (OperSymbol of C730) such that L2039: ( OSSym (D483 , C731) ) = [ C743 , (the carrier of C730) ] and L2040: D479 in ( Args (C743 , ( ParsedTermsOSA C731 )) ) and L2041: ( ( OSSym (D483 , C731) ) -tree D479 ) = ( ( Den (C743 , ( ParsedTermsOSA C731 )) ) . D479 ) and L2042: (for B925 being (Element of C730) holds (( ( OSSym (D483 , C731) ) -tree D479 ) in ( (the Sorts of D472) . B925 ) iff ( the_result_sort_of C743 ) <= B925)) by L2038 , L505;
reconsider D490 = D479 as (Element of ( Args (D483 , D472) )) by L2039 , L2040 , XTUPLE_0:1;
L2043: D483 = C743 by L2039 , XTUPLE_0:1;
L2044: ( D476 . D478 ) = ( ( Den (D483 , D472) ) . D490 ) by L2043 , L1989 , L2037 , L2001 , L2041;
L2045: ( LeastSorts ( ( PTMin C731 ) * C734 ) ) <= ( the_arity_of C735 ) by L1989 , L2037 , L2001;
L2046: D483 has_least_rank_for C735 , D480 by L2045 , OSALG_1:14;
L2047: D483 has_least_sort_for C735 , D480 by L2046 , OSALG_1:def 11;
L2048: C735 ~= D483 by L2047 , OSALG_1:def 10;
L2049: D483 has_least_args_for C735 , D480 by L2046 , OSALG_1:def 11;
L2050: ( the_arity_of D483 ) <= D481 by L2049 , L2045 , OSALG_1:def 9;
L2051: ( len ( the_arity_of D483 ) ) = ( len D481 ) by L2050 , OSALG_1:def 6;
L2052: ( OSClass (D474 , D478) ) = ( OSClass (D474 , D489) ) by L1588
.= ( proj1 ( D477 . D478 ) ) by L1083;
L2053: ( the_result_sort_of D483 ) <= D482 by L2045 , L2047 , OSALG_1:def 10;
L2054: ( D476 . D478 ) in ( OSClass (D474 , D478) )
proof
defpred S33[ set , set ] means [ ( D479 . $1 ) , $2 ] in ( ( D477 * C734 ) . $1 );
L2055: (for B926 being set holds (B926 in ( dom ( D477 * C734 ) ) implies (ex B927 being set st (B927 in (the carrier of C730) & S33[ B926 , B927 ]))))
proof
let C744 being set;
assume that
L2056: C744 in ( dom ( D477 * C734 ) );
L2057: ( ( D477 * C734 ) . C744 ) = ( D477 . ( C734 . C744 ) ) by L2056 , FINSEQ_3:120;
L2058: ( C734 . C744 ) in ( rng C734 ) by L2036 , L2056 , FUNCT_1:3;
reconsider D491 = ( C734 . C744 ) as (Element of ( TS D473 )) by L2058 , L1991;
L2059: (ex B928 being (Element of ( TS D473 )) st (B928 = D491 & ( D476 . B928 ) in ( OSClass (D474 , B928) ) & S29[ B928 ] & S30[ B928 ] & S31[ B928 ])) by L1990 , L2036 , L2056 , FUNCT_1:3;
L2060: ( D479 . C744 ) = ( D476 . ( C734 . C744 ) ) by L2036 , L2056 , FUNCT_1:13;
reconsider D492 = D491 as (Element of ( D475 . ( LeastSort D491 ) )) by L532;
L2061: ( OSClass (D474 , D491) ) = ( OSClass (D474 , D492) ) by L1588
.= ( proj1 ( ( D477 * C734 ) . C744 ) ) by L2057 , L1083;
L2062: (ex B929 being set st [ ( D479 . C744 ) , B929 ] in ( ( D477 * C734 ) . C744 )) by L2061 , L2060 , L2059 , XTUPLE_0:def 12;
thus L2063: thesis by L2062 , L2057 , L1058;
end;
consider C745 being Function such that L2064: (( dom C745 ) = ( dom ( D477 * C734 ) ) & ( rng C745 ) c= (the carrier of C730) & (for B930 being set holds (B930 in ( dom ( D477 * C734 ) ) implies S33[ B930 , ( C745 . B930 ) ]))) from FUNCT_1:sch 5(L2055);
reconsider D493 = C745 as FinSequence by L2036 , L2035 , L2064 , FINSEQ_1:def 2;
reconsider D494 = D493 as (FinSequence of (the carrier of C730)) by L2064 , FINSEQ_1:def 4;
reconsider D495 = D494 as (Element of ( (the carrier of C730) * )) by FINSEQ_1:def 11;
L2065: (for B931 being Nat holds (B931 in ( dom ( D477 * C734 ) ) implies [ ( D490 . B931 ) , ( D495 /. B931 ) ] in ( ( D477 * C734 ) . B931 )))
proof
let C746 being Nat;
assume that
L2066: C746 in ( dom ( D477 * C734 ) );
L2067: ( D495 /. C746 ) = ( D495 . C746 ) by L2064 , L2066 , PARTFUN1:def 6;
thus L2068: thesis by L2067 , L2064 , L2066;
end;
L2069: [ ( ( Den (D483 , D472) ) . D490 ) , D482 ] in ( D477 . D478 ) by L2065 , L1992 , L2033 , L2048 , L2053 , L2051 , L2064;
thus L2070: thesis by L2069 , L2052 , L2044 , XTUPLE_0:def 12;
end;
L2071: ( ( PTMin C731 ) . D478 ) = ( ( OSSym (( LBound (C735 , ( LeastSorts ( ( PTMin C731 ) * C734 ) )) ) , C731) ) -tree ( ( PTMin C731 ) * C734 ) ) by L1989 , L2037 , L2001;
L2072: ( LeastSort ( D476 . D478 ) ) = ( the_result_sort_of D483 ) by L2071 , L2040 , L2041 , L2043 , L574;
L2073: ( LeastSort D478 ) = D482 by L1993 , L1994 , L574;
thus L2074: thesis by L2073 , L2001 , L2045 , L2072 , L2047 , L2054 , L2028 , OSALG_1:def 10;
end;
L2075: (for B932 being (Symbol of D473) holds (B932 in ( Terminals D473 ) implies S32[ ( root-tree B932 ) ]))
proof
let C747 being (Symbol of D473);
assume that
L2076: C747 in ( Terminals D473 );
reconsider D496 = ( root-tree C747 ) as (Element of ( TS ( DTConOSA C731 ) )) by L2076 , DTCONSTR:def 1;
take D496;
thus L2077: D496 = ( root-tree C747 );
L2078: ( D476 . ( root-tree C747 ) ) = ( pi C747 ) by L2076 , L1977
.= ( root-tree C747 ) by L2076 , L654;
thus L2079: ( D476 . D496 ) in ( OSClass (D474 , D496) ) by L2078 , L1596;
thus L2080: ( LeastSort ( D476 . D496 ) ) <= ( LeastSort D496 ) by L2078;
thus L2081: (for B933 being (Element of C730) holds (for B934 being set holds ((B934 in ( C731 . B933 ) & D496 = ( root-tree [ B934 , B933 ] )) implies ( D476 . D496 ) = D496))) by L2078;
L2082: (ex B935 being (Element of C730) st (ex B936 being set st (B936 in ( C731 . B935 ) & C747 = [ B936 , B935 ]))) by L2076 , L189;
thus L2083:now
let C748 being (OperSymbol of C730);
let C749 being (FinSequence of ( TS ( DTConOSA C731 ) ));
assume that
L2084: ( OSSym (C748 , C731) ) ==> ( roots C749 )
and
L2085: D496 = ( ( OSSym (C748 , C731) ) -tree C749 );
L2086: ( D496 . ( {} ) ) = [ C748 , (the carrier of C730) ] by L2085 , TREES_4:def 4;
thus L2087: (( LeastSorts ( ( PTMin C731 ) * C749 ) ) <= ( the_arity_of C748 ) & ( OSSym (C748 , C731) ) ==> ( roots ( ( PTMin C731 ) * C749 ) ) & ( OSSym (( LBound (C748 , ( LeastSorts ( ( PTMin C731 ) * C749 ) )) ) , C731) ) ==> ( roots ( ( PTMin C731 ) * C749 ) ) & ( ( PTMin C731 ) . D496 ) = ( ( OSSym (( LBound (C748 , ( LeastSorts ( ( PTMin C731 ) * C749 ) )) ) , C731) ) -tree ( ( PTMin C731 ) * C749 ) )) by L2086 , L2082 , L455;
end;
end;
L2084: (for B937 being (DecoratedTree of (the carrier of D473)) holds (B937 in ( TS D473 ) implies S32[ B937 ])) from DTCONSTR:sch 7(L2075 , L1988);
L2085: (ex B938 being (Element of ( TS D473 )) st (B938 = C732 & S28[ B938 ] & S29[ B938 ] & S30[ B938 ] & S31[ B938 ])) by L2084;
thus L2086: thesis by L2085;
end;
theorem
L2087: (for B939 being  locally_directed  regular  monotone OrderSortedSign holds (for B940 being  non-empty (ManySortedSet of B939) holds (for B941 , B942 being (Element of ( TS ( DTConOSA B940 ) )) holds (B942 in ( OSClass (( PTCongruence B940 ) , B941) ) implies ( ( PTMin B940 ) . B942 ) = ( ( PTMin B940 ) . B941 )))))
proof
let C750 being  locally_directed  regular  monotone OrderSortedSign;
let C751 being  non-empty (ManySortedSet of C750);
let C752 being (Element of ( TS ( DTConOSA C751 ) ));
set D497 = ( ParsedTermsOSA C751 );
set D498 = ( DTConOSA C751 );
set D499 = ( PTCongruence C751 );
set D500 = (the Sorts of D497);
set D501 = ( PTMin C751 );
set D502 = ( PTClasses C751 );
defpred S34[ (Element of ( TS D498 )) ] means (for B943 being (Element of ( TS ( DTConOSA C751 ) )) holds (B943 in ( OSClass (D499 , $1) ) implies ( ( PTMin C751 ) . B943 ) = ( ( PTMin C751 ) . $1 )));
defpred S35[ (DecoratedTree of (the carrier of D498)) ] means (ex B944 being (Element of ( TS D498 )) st (B944 = $1 & S34[ B944 ]));
L2088: (for B945 being (Symbol of D498) holds (for B946 being (FinSequence of ( TS D498 )) holds ((B945 ==> ( roots B946 ) & (for B947 being (DecoratedTree of (the carrier of D498)) holds (B947 in ( rng B946 ) implies S35[ B947 ]))) implies S35[ ( B945 -tree B946 ) ])))
proof
let C753 being (Symbol of D498);
let C754 being (FinSequence of ( TS D498 ));
assume that
L2089: C753 ==> ( roots C754 )
and
L2090: (for B948 being (DecoratedTree of (the carrier of D498)) holds (B948 in ( rng C754 ) implies (ex B949 being (Element of ( TS D498 )) st (B949 = B948 & S34[ B949 ]))));
reconsider D503 = ( C753 -tree C754 ) as (Element of ( TS D498 )) by L2089 , L505;
L2091: ( D502 . D503 ) = ( @ (C753 , ( D502 * C754 )) ) by L2089 , L774
.= { [ ( ( Den (B950 , ( ParsedTermsOSA C751 )) ) . B951 ) , B952 ] where B950 is (OperSymbol of C750) , B951 is (Element of ( Args (B950 , ( ParsedTermsOSA C751 )) )) , B952 is (Element of C750) : ((ex B953 being (OperSymbol of C750) st (C753 = [ B953 , (the carrier of C750) ] & B953 ~= B950 & ( len ( the_arity_of B953 ) ) = ( len ( the_arity_of B950 ) ) & ( the_result_sort_of B953 ) <= B952 & ( the_result_sort_of B950 ) <= B952)) & (ex B954 being (Element of ( (the carrier of C750) * )) st (( dom B954 ) = ( dom ( D502 * C754 ) ) & (for B955 being Nat holds (B955 in ( dom ( D502 * C754 ) ) implies [ ( B951 . B955 ) , ( B954 /. B955 ) ] in ( ( D502 * C754 ) . B955 )))))) };
consider C755 being (OperSymbol of C750) such that L2092: C753 = [ C755 , (the carrier of C750) ] and L2093: C754 in ( Args (C755 , D497) ) and L2094: ( C753 -tree C754 ) = ( ( Den (C755 , D497) ) . C754 ) and L2095: (for B956 being (Element of C750) holds (( C753 -tree C754 ) in ( D500 . B956 ) iff ( the_result_sort_of C755 ) <= B956)) by L2089 , L505;
L2096: D503 = ( ( OSSym (C755 , C751) ) -tree C754 ) by L2092;
L2097: ( LeastSorts ( D501 * C754 ) ) <= ( the_arity_of C755 ) by L2096 , L2089 , L2092 , L1987;
set D504 = ( ( PTMin C751 ) * C754 );
set D505 = ( the_arity_of C755 );
L2098: ( dom C754 ) = ( dom D505 ) by L2093 , MSUALG_3:6;
reconsider D506 = D503 as (Element of ( D500 . ( LeastSort D503 ) )) by L532;
take D503;
thus L2099: D503 = ( C753 -tree C754 );
L2100: ( dom ( D502 * C754 ) ) = ( dom C754 ) by FINSEQ_3:120;
L2101: ( OSClass (D499 , D503) ) = ( OSClass (D499 , D506) ) by L1588
.= ( proj1 ( D502 . D503 ) ) by L1083;
L2102: ( rng C754 ) c= ( TS D498 ) by FINSEQ_1:def 4;
L2103: ( dom ( ( PTMin C751 ) * C754 ) ) = ( dom C754 ) by FINSEQ_3:120;
L2104: ( D501 . D503 ) = ( ( OSSym (( LBound (C755 , ( LeastSorts ( D501 * C754 ) )) ) , C751) ) -tree ( D501 * C754 ) ) by L2089 , L2092 , L2096 , L1987;
thus L2105: (for B957 being (Element of ( TS ( DTConOSA C751 ) )) holds (B957 in ( OSClass (D499 , D503) ) implies ( ( PTMin C751 ) . B957 ) = ( ( PTMin C751 ) . D503 )))
proof
let C756 being (Element of ( TS D498 ));
assume L2106: C756 in ( OSClass (D499 , D503) );
consider C757 being set such that L2107: [ C756 , C757 ] in ( D502 . D503 ) by L2106 , L2101 , XTUPLE_0:def 12;
consider C758 being (OperSymbol of C750), C759 being (Element of ( Args (C758 , ( ParsedTermsOSA C751 )) )), C760 being (Element of C750) such that L2108: [ C756 , C757 ] = [ ( ( Den (C758 , ( ParsedTermsOSA C751 )) ) . C759 ) , C760 ] and L2109: (ex B958 being (OperSymbol of C750) st (C753 = [ B958 , (the carrier of C750) ] & B958 ~= C758 & ( len ( the_arity_of B958 ) ) = ( len ( the_arity_of C758 ) ) & ( the_result_sort_of B958 ) <= C760 & ( the_result_sort_of C758 ) <= C760)) and L2110: (ex B959 being (Element of ( (the carrier of C750) * )) st (( dom B959 ) = ( dom ( D502 * C754 ) ) & (for B960 being Nat holds (B960 in ( dom ( D502 * C754 ) ) implies [ ( C759 . B960 ) , ( B959 /. B960 ) ] in ( ( D502 * C754 ) . B960 ))))) by L2091 , L2107;
consider C761 being (OperSymbol of C750) such that L2111: C753 = [ C761 , (the carrier of C750) ] and L2112: C761 ~= C758 and L2113: ( len ( the_arity_of C761 ) ) = ( len ( the_arity_of C758 ) ) and L2114: ( the_result_sort_of C761 ) <= C760 and L2115: ( the_result_sort_of C758 ) <= C760 by L2109;
L2116: C761 = C755 by L2092 , L2111 , XTUPLE_0:1;
L2117: ( dom D505 ) = ( dom ( the_arity_of C758 ) ) by L2116 , L2113 , FINSEQ_3:29;
reconsider D507 = C759 as (FinSequence of ( TS D498 )) by L520;
L2118: ( dom D507 ) = ( dom ( the_arity_of C758 ) ) by MSUALG_3:6;
L2119: ( dom ( D501 * D507 ) ) = ( dom D507 ) by FINSEQ_3:120;
L2120: ( rng D507 ) c= ( TS D498 ) by FINSEQ_1:def 4;
L2121: (for B961 being Nat holds (B961 in ( dom ( D501 * D507 ) ) implies ( ( D501 * D507 ) . B961 ) = ( D504 . B961 )))
proof
consider C762 being (Element of ( (the carrier of C750) * )) such that L2122: ( dom C762 ) = ( dom ( D502 * C754 ) ) and L2123: (for B962 being Nat holds (B962 in ( dom ( D502 * C754 ) ) implies [ ( C759 . B962 ) , ( C762 /. B962 ) ] in ( ( D502 * C754 ) . B962 ))) by L2110;
let C763 being Nat;
assume that
L2124: C763 in ( dom ( D501 * D507 ) );
L2125: ( D507 . C763 ) in ( rng D507 ) by L2119 , L2124 , FUNCT_1:3;
L2126: ( C754 . C763 ) in ( rng C754 ) by L2098 , L2117 , L2118 , L2119 , L2124 , FUNCT_1:3;
reconsider D508 = ( C754 . C763 ) , D509 = ( D507 . C763 ) as (Element of ( TS D498 )) by L2126 , L2102 , L2120 , L2125;
reconsider D510 = D508 as (Element of ( D500 . ( LeastSort D508 ) )) by L532;
consider C764 being (Element of ( TS D498 )) such that L2127: C764 = D508 and L2128: (for B963 being (Element of ( TS D498 )) holds (B963 in ( OSClass (D499 , C764) ) implies ( D501 . B963 ) = ( D501 . C764 ))) by L2090 , L2098 , L2117 , L2118 , L2119 , L2124 , FUNCT_1:3;
L2129: [ D509 , ( C762 /. C763 ) ] in ( ( D502 * C754 ) . C763 ) by L2100 , L2098 , L2117 , L2118 , L2119 , L2124 , L2123;
L2130: [ D509 , ( C762 /. C763 ) ] in ( D502 . D508 ) by L2129 , L2100 , L2098 , L2117 , L2118 , L2119 , L2124 , FINSEQ_3:120;
L2131: ( OSClass (D499 , D508) ) = ( OSClass (D499 , D510) ) by L1588
.= ( proj1 ( D502 . D508 ) ) by L1083;
L2132: D509 in ( OSClass (D499 , D508) ) by L2131 , L2130 , XTUPLE_0:def 12;
L2133: ( D501 . D509 ) = ( D501 . D508 ) by L2132 , L2127 , L2128;
L2134: ( D501 . D509 ) = ( D504 . C763 ) by L2133 , L2103 , L2098 , L2117 , L2118 , L2119 , L2124 , FINSEQ_3:120;
thus L2135: thesis by L2134 , L2124 , FINSEQ_3:120;
end;
L2136: ( D501 * D507 ) = ( D501 * C754 ) by L2121 , L2103 , L2098 , L2117 , L2119 , FINSEQ_1:13 , MSUALG_3:6;
L2137: ( OSSym (C758 , C751) ) ==> ( roots C759 ) by L520;
L2138: (ex B964 being (OperSymbol of C750) st (( OSSym (C758 , C751) ) = [ B964 , (the carrier of C750) ] & D507 in ( Args (B964 , D497) ) & ( ( OSSym (C758 , C751) ) -tree D507 ) = ( ( Den (B964 , D497) ) . D507 ) & (for B965 being (Element of C750) holds (( ( OSSym (C758 , C751) ) -tree D507 ) in ( D500 . B965 ) iff ( the_result_sort_of B964 ) <= B965)))) by L2137 , L505;
consider C765 being (OperSymbol of C750) such that L2139: ( OSSym (C758 , C751) ) = [ C765 , (the carrier of C750) ] and L2140: D507 in ( Args (C765 , D497) ) and L2141: ( ( OSSym (C758 , C751) ) -tree D507 ) = ( ( Den (C765 , D497) ) . D507 ) by L2138;
L2142: C758 = C765 by L2139 , XTUPLE_0:1;
L2143: C756 = ( ( OSSym (C758 , C751) ) -tree D507 ) by L2142 , L2108 , L2141 , XTUPLE_0:1;
L2144: ( LeastSorts ( D501 * D507 ) ) <= ( the_arity_of C758 ) by L2143 , L2137 , L1987;
L2145: ( D501 . C756 ) = ( ( OSSym (( LBound (C758 , ( LeastSorts ( D501 * D507 ) )) ) , C751) ) -tree ( D501 * D507 ) ) by L2137 , L2143 , L1987;
thus L2146: thesis by L2145 , L2104 , L2097 , L2112 , L2116 , L2136 , L2144 , OSALG_1:34;
end;

end;
L2106: (for B966 being (Symbol of D498) holds (B966 in ( Terminals D498 ) implies S35[ ( root-tree B966 ) ]))
proof
let C766 being (Symbol of D498);
assume that
L2107: C766 in ( Terminals D498 );
reconsider D511 = ( root-tree C766 ) as (Element of ( TS ( DTConOSA C751 ) )) by L2107 , DTCONSTR:def 1;
take D511;
thus L2108: D511 = ( root-tree C766 );
L2109: (ex B967 being (Element of C750) st (ex B968 being set st (B968 in ( C751 . B967 ) & C766 = [ B968 , B967 ]))) by L2107 , L189;
let C767 being (Element of ( TS ( DTConOSA C751 ) ));
assume L2110: C767 in ( OSClass (D499 , D511) );
thus L2111: thesis by L2110 , L2109 , L1599;
end;
L2112: (for B969 being (DecoratedTree of (the carrier of D498)) holds (B969 in ( TS D498 ) implies S35[ B969 ])) from DTCONSTR:sch 7(L2106 , L2088);
L2113: (ex B970 being (Element of ( TS D498 )) st (B970 = C752 & S34[ B970 ])) by L2112;
thus L2114: thesis by L2113;
end;
theorem
L2115: (for B971 being  locally_directed  regular  monotone OrderSortedSign holds (for B972 being  non-empty (ManySortedSet of B971) holds (for B973 , B974 being (Element of ( TS ( DTConOSA B972 ) )) holds (B974 in ( OSClass (( PTCongruence B972 ) , B973) ) iff ( ( PTMin B972 ) . B974 ) = ( ( PTMin B972 ) . B973 )))))
proof
let C768 being  locally_directed  regular  monotone OrderSortedSign;
let C769 being  non-empty (ManySortedSet of C768);
let C770 , C771 being (Element of ( TS ( DTConOSA C769 ) ));
set D512 = ( PTCongruence C769 );
set D513 = ( PTMin C769 );
thus L2116: (C771 in ( OSClass (D512 , C770) ) implies ( D513 . C771 ) = ( D513 . C770 )) by L2087;
L2117: ( D513 . C771 ) in ( OSClass (D512 , C771) ) by L1987;
L2118: ( OSClass (D512 , C771) ) = ( OSClass (D512 , ( D513 . C771 )) ) by L2117 , L1613;
L2119: ( D513 . C770 ) in ( OSClass (D512 , C770) ) by L1987;
L2120: ( OSClass (D512 , C770) ) = ( OSClass (D512 , ( D513 . C770 )) ) by L2119 , L1613;
assume L2121: ( D513 . C771 ) = ( D513 . C770 );
thus L2122: thesis by L2121 , L2120 , L2118 , L1596;
end;
theorem
L2123: (for B975 being  locally_directed  regular  monotone OrderSortedSign holds (for B976 being  non-empty (ManySortedSet of B975) holds (for B977 being (Element of ( TS ( DTConOSA B976 ) )) holds ( ( PTMin B976 ) . ( ( PTMin B976 ) . B977 ) ) = ( ( PTMin B976 ) . B977 ))))
proof
let C772 being  locally_directed  regular  monotone OrderSortedSign;
let C773 being  non-empty (ManySortedSet of C772);
let C774 being (Element of ( TS ( DTConOSA C773 ) ));
L2124: ( ( PTMin C773 ) . C774 ) in ( OSClass (( PTCongruence C773 ) , C774) ) by L1987;
thus L2125: thesis by L2124 , L2115;
end;
theorem
L2126: (for B978 being  locally_directed  regular  monotone OrderSortedSign holds (for B979 being  non-empty (ManySortedSet of B978) holds (for B980 being  monotone  MSEquivalence-like (OrderSortedRelation of ( ParsedTermsOSA B979 )) holds (for B981 being (Element of ( TS ( DTConOSA B979 ) )) holds [ B981 , ( ( PTMin B979 ) . B981 ) ] in ( B980 . ( LeastSort B981 ) )))))
proof
let C775 being  locally_directed  regular  monotone OrderSortedSign;
let C776 being  non-empty (ManySortedSet of C775);
set D514 = ( ParsedTermsOSA C776 );
set D515 = (the Sorts of D514);
set D516 = ( DTConOSA C776 );
set D517 = ( PTMin C776 );
let C777 being  monotone  MSEquivalence-like (OrderSortedRelation of D514);
defpred S36[ set ] means (ex B982 being (Element of ( TS D516 )) st (B982 = $1 & [ B982 , ( D517 . B982 ) ] in ( C777 . ( LeastSort B982 ) )));
let C778 being (Element of ( TS D516 ));
L2127: C777 is  os-compatible by OSALG_4:def 2;
L2128: (for B983 being (Symbol of D516) holds (for B984 being (FinSequence of ( TS D516 )) holds ((B983 ==> ( roots B984 ) & (for B985 being (DecoratedTree of (the carrier of D516)) holds (B985 in ( rng B984 ) implies S36[ B985 ]))) implies S36[ ( B983 -tree B984 ) ])))
proof
let C779 being (Symbol of D516);
let C780 being (FinSequence of ( TS D516 ));
assume that
L2129: C779 ==> ( roots C780 )
and
L2130: (for B986 being (DecoratedTree of (the carrier of D516)) holds (B986 in ( rng C780 ) implies S36[ B986 ]));
consider C781 being (OperSymbol of C775) such that L2131: C779 = [ C781 , (the carrier of C775) ] and L2132: C780 in ( Args (C781 , D514) ) and L2133: ( C779 -tree C780 ) = ( ( Den (C781 , D514) ) . C780 ) and L2134: (for B987 being (Element of C775) holds (( C779 -tree C780 ) in ( D515 . B987 ) iff ( the_result_sort_of C781 ) <= B987)) by L2129 , L505;
reconsider D518 = ( C779 -tree C780 ) as (Element of ( TS D516 )) by L2129 , L505;
L2135: ( dom ( ( PTMin C776 ) * C780 ) ) = ( dom C780 ) by FINSEQ_3:120;
reconsider D519 = C780 as (Element of ( Args (C781 , D514) )) by L2132;
set D520 = ( the_arity_of C781 );
L2136: ( rng C780 ) c= ( TS D516 ) by FINSEQ_1:def 4;
set D521 = ( LBound (C781 , ( LeastSorts ( D517 * C780 ) )) );
set D522 = ( the_result_sort_of C781 );
L2137: D518 = ( ( OSSym (C781 , C776) ) -tree C780 ) by L2131;
L2138: ( OSSym (( LBound (C781 , ( LeastSorts ( D517 * C780 ) )) ) , C776) ) ==> ( roots ( D517 * C780 ) ) by L2137 , L2129 , L2131 , L1987;
reconsider D523 = ( D517 * C780 ) as (Element of ( Args (D521 , D514) )) by L2138 , L520;
L2139: ( dom C780 ) = ( dom D520 ) by L2132 , MSUALG_3:6;
L2140: (for B988 being Nat holds (B988 in ( dom D523 ) implies [ ( D523 . B988 ) , ( D519 . B988 ) ] in ( C777 . ( ( the_arity_of C781 ) /. B988 ) )))
proof
let C782 being Nat;
assume that
L2141: C782 in ( dom D523 );
L2142: ( C780 . C782 ) in ( rng C780 ) by L2135 , L2141 , FUNCT_1:3;
reconsider D524 = ( C780 . C782 ) as (Element of ( TS D516 )) by L2142 , L2136;
consider C783 being (Element of ( TS D516 )) such that L2143: C783 = D524 and L2144: [ C783 , ( D517 . C783 ) ] in ( C777 . ( LeastSort C783 ) ) by L2130 , L2135 , L2141 , FUNCT_1:3;
L2145: ( D517 . C783 ) = ( D523 . C782 ) by L2141 , L2143 , FINSEQ_3:120;
L2146: ( D517 . C783 ) in ( D515 . ( LeastSort C783 ) ) by L2144 , ZFMISC_1:87;
L2147: ( D519 . C782 ) in ( D515 . ( D520 /. C782 ) ) by L2135 , L2139 , L2141 , MSUALG_6:2;
L2148: ( LeastSort C783 ) <= ( D520 /. C782 ) by L2147 , L2143 , L532;
L2149: C783 in ( D515 . ( LeastSort C783 ) ) by L2144 , ZFMISC_1:87;
L2150: ( field ( C777 . ( LeastSort C783 ) ) ) = ( D515 . ( LeastSort C783 ) ) by ORDERS_1:12;
L2151: ( C777 . ( LeastSort C783 ) ) is_symmetric_in ( D515 . ( LeastSort C783 ) ) by L2150 , RELAT_2:def 11;
L2152: [ ( D517 . C783 ) , C783 ] in ( C777 . ( LeastSort C783 ) ) by L2151 , L2144 , L2149 , L2146 , RELAT_2:def 3;
thus L2153: thesis by L2152 , L2127 , L2143 , L2149 , L2146 , L2145 , L2148 , OSALG_4:def 1;
end;
L2154: ( LeastSorts ( D517 * C780 ) ) <= ( the_arity_of C781 ) by L2129 , L2131 , L2137 , L1987;
L2155: D521 <= C781 by L2154 , OSALG_1:35;
L2156: [ ( ( Den (D521 , D514) ) . D523 ) , ( ( Den (C781 , D514) ) . D519 ) ] in ( C777 . ( the_result_sort_of C781 ) ) by L2155 , L2140 , OSALG_4:def 26;
L2157: ( ( Den (C781 , D514) ) . D519 ) in ( D515 . D522 ) by L2156 , ZFMISC_1:87;
L2158: ( LeastSort D518 ) = ( the_result_sort_of C781 ) by L2132 , L2133 , L574;
L2159: ( OSSym (C781 , C776) ) ==> ( roots C780 ) by L2129 , L2131;
take D518;
thus L2160: D518 = ( C779 -tree C780 );
L2161: ( field ( C777 . D522 ) ) = ( D515 . D522 ) by ORDERS_1:12;
L2162: ( C777 . D522 ) is_symmetric_in ( D515 . D522 ) by L2161 , RELAT_2:def 11;
L2163: ( ( Den (D521 , D514) ) . D523 ) in ( D515 . D522 ) by L2156 , ZFMISC_1:87;
L2164: [ ( ( Den (C781 , D514) ) . D519 ) , ( ( Den (D521 , D514) ) . D523 ) ] in ( C777 . D522 ) by L2163 , L2156 , L2157 , L2162 , RELAT_2:def 3;
consider C784 being (OperSymbol of C775) such that L2165: ( OSSym (D521 , C776) ) = [ C784 , (the carrier of C775) ] and L2166: ( D517 * C780 ) in ( Args (C784 , D514) ) and L2167: ( ( OSSym (D521 , C776) ) -tree ( D517 * C780 ) ) = ( ( Den (C784 , D514) ) . ( D517 * C780 ) ) and L2168: (for B989 being (Element of C775) holds (( ( OSSym (D521 , C776) ) -tree ( D517 * C780 ) ) in ( D515 . B989 ) iff ( the_result_sort_of C784 ) <= B989)) by L2138 , L505;
L2169: D521 = C784 by L2165 , XTUPLE_0:1;
thus L2170: thesis by L2169 , L2131 , L2133 , L2159 , L2164 , L2158 , L2167 , L1987;
end;
L2171: (for B990 being (Symbol of D516) holds (B990 in ( Terminals D516 ) implies S36[ ( root-tree B990 ) ]))
proof
let C785 being (Symbol of D516);
assume L2172: C785 in ( Terminals D516 );
L2173: (ex B991 being (Element of C775) st (ex B992 being set st (B992 in ( C776 . B991 ) & C785 = [ B992 , B991 ]))) by L2172 , L189;
reconsider D525 = ( root-tree C785 ) as (Element of ( TS D516 )) by L2173 , L455;
take D525;
L2174: D525 in ( D515 . ( LeastSort D525 ) ) by L532;
L2175: ( field ( C777 . ( LeastSort D525 ) ) ) = ( D515 . ( LeastSort D525 ) ) by ORDERS_1:12;
L2176: ( C777 . ( LeastSort D525 ) ) is_reflexive_in ( D515 . ( LeastSort D525 ) ) by L2175 , RELAT_2:def 9;
L2177: D525 = ( D517 . D525 ) by L2173 , L1987;
thus L2178: thesis by L2177 , L2174 , L2176 , RELAT_2:def 1;
end;
L2179: (for B993 being (DecoratedTree of (the carrier of D516)) holds (B993 in ( TS D516 ) implies S36[ B993 ])) from DTCONSTR:sch 7(L2171 , L2128);
L2180: (ex B994 being (Element of ( TS D516 )) st (C778 = B994 & [ B994 , ( D517 . B994 ) ] in ( C777 . ( LeastSort B994 ) ))) by L2179;
thus L2181: thesis by L2180;
end;
theorem
L2182: (for B995 being  locally_directed  regular  monotone OrderSortedSign holds (for B996 being  non-empty (ManySortedSet of B995) holds (for B997 being  monotone  MSEquivalence-like (OrderSortedRelation of ( ParsedTermsOSA B996 )) holds ( PTCongruence B996 ) c= B997)))
proof
let C786 being  locally_directed  regular  monotone OrderSortedSign;
let C787 being  non-empty (ManySortedSet of C786);
set D526 = ( ParsedTermsOSA C787 );
set D527 = (the Sorts of D526);
set D528 = ( DTConOSA C787 );
set D529 = ( PTMin C787 );
set D530 = ( PTCongruence C787 );
reconsider D531 = D527 as (OrderSortedSet of C786);
let C788 being  monotone  MSEquivalence-like (OrderSortedRelation of D526);
let C789 being set;
assume that
L2183: C789 in (the carrier of C786);
reconsider D532 = C789 as (Element of C786) by L2183;
L2184: C788 is  os-compatible by OSALG_4:def 2;
L2185: (for B998 , B999 being set holds ([ B998 , B999 ] in ( D530 . D532 ) implies [ B998 , B999 ] in ( C788 . D532 )))
proof
L2186: ( field ( C788 . D532 ) ) = ( D527 . D532 ) by ORDERS_1:12;
L2187: ( C788 . D532 ) is_transitive_in ( D527 . D532 ) by L2186 , RELAT_2:def 16;
L2188: ( C788 . D532 ) is_symmetric_in ( D527 . D532 ) by L2186 , RELAT_2:def 11;
let C790 , C791 being set;
assume that
L2189: [ C790 , C791 ] in ( D530 . D532 );
reconsider D533 = C790 , D534 = C791 as (Element of ( D527 . D532 )) by L2189 , ZFMISC_1:87;
L2190: C790 in ( D527 . C789 ) by L2189 , ZFMISC_1:87;
L2191: ( OSClass (D530 , D533) ) = ( OSClass (D530 , D534) ) by L2189 , OSALG_4:12;
L2192: C791 in ( D527 . C789 ) by L2189 , ZFMISC_1:87;
L2193: ( dom D527 ) = (the carrier of C786) by PARTFUN1:def 2;
reconsider D535 = C790 , D536 = C791 as (Element of D526) by L2193 , L2183 , L2190 , L2192 , CARD_5:2;
reconsider D537 = D535 , D538 = D536 as (Element of ( TS D528 )) by L557;
L2194: D538 in ( D527 . ( LeastSort D538 ) ) by L532;
L2195: ( D529 . D538 ) in ( D527 . ( LeastSort ( D529 . D538 ) ) ) by L532;
L2196: ( LeastSort ( D529 . D538 ) ) <= ( LeastSort D538 ) by L1987;
L2197: ( D531 . ( LeastSort ( D529 . D538 ) ) ) c= ( D531 . ( LeastSort D538 ) ) by L2196 , OSALG_1:def 16;
L2198: [ D538 , ( D529 . D538 ) ] in ( C788 . ( LeastSort D538 ) ) by L2126;
L2199: ( LeastSort D538 ) <= D532 by L2192 , L532;
L2200: [ D538 , ( D529 . D538 ) ] in ( C788 . D532 ) by L2199 , L2184 , L2194 , L2195 , L2197 , L2198 , OSALG_4:def 1;
L2201: ( D529 . D538 ) in ( D527 . D532 ) by L2200 , ZFMISC_1:87;
L2202: [ ( D529 . D538 ) , D538 ] in ( C788 . D532 ) by L2201 , L2192 , L2200 , L2188 , RELAT_2:def 3;
L2203: ( LeastSort ( D529 . D537 ) ) <= ( LeastSort D537 ) by L1987;
L2204: ( D531 . ( LeastSort ( D529 . D537 ) ) ) c= ( D531 . ( LeastSort D537 ) ) by L2203 , OSALG_1:def 16;
L2205: ( D529 . D537 ) in ( D527 . ( LeastSort ( D529 . D537 ) ) ) by L532;
L2206: [ D537 , ( D529 . D537 ) ] in ( C788 . ( LeastSort D537 ) ) by L2126;
L2207: ( OSClass (D530 , D538) ) = ( OSClass (D530 , D534) ) by L1588;
L2208: ( OSClass (D530 , D537) ) = ( OSClass (D530 , D533) ) by L1588;
L2209: D537 in ( OSClass (D530 , D538) ) by L2208 , L2191 , L2207 , L1613;
L2210: ( D529 . D537 ) = ( D529 . D538 ) by L2209 , L2115;
L2211: D537 in ( D527 . ( LeastSort D537 ) ) by L532;
L2212: ( LeastSort D537 ) <= D532 by L2190 , L532;
L2213: [ D537 , ( D529 . D537 ) ] in ( C788 . D532 ) by L2212 , L2184 , L2211 , L2205 , L2204 , L2206 , OSALG_4:def 1;
L2214: ( D529 . D537 ) in ( D527 . D532 ) by L2213 , ZFMISC_1:87;
thus L2215: thesis by L2214 , L2190 , L2192 , L2210 , L2213 , L2187 , L2202 , RELAT_2:def 8;
end;
thus L2216: thesis by L2185 , RELAT_1:def 3;
end;
theorem
L2217: (for B1000 being  locally_directed  regular  monotone OrderSortedSign holds (for B1001 being  non-empty (ManySortedSet of B1000) holds ( LCongruence B1001 ) = ( PTCongruence B1001 )))
proof
let C792 being  locally_directed  regular  monotone OrderSortedSign;
let C793 being  non-empty (ManySortedSet of C792);
L2218: ( PTCongruence C793 ) c= ( LCongruence C793 ) by L2182;
L2219: ( LCongruence C793 ) c= ( PTCongruence C793 ) by L656;
thus L2220: thesis by L2219 , L2218 , PBOOLE:146;
end;
definition
let C794 being  locally_directed  regular  monotone OrderSortedSign;
let C795 being  non-empty (ManySortedSet of C794);
mode MinTerm of C794 , C795
 -> (Element of ( TS ( DTConOSA C795 ) ))
means :L2221: ( ( PTMin C795 ) . it ) = it;
existence
proof
set D539 = the (Element of ( TS ( DTConOSA C795 ) ));
take ( ( PTMin C795 ) . D539 );
thus L2222: thesis by L2123;
end;
end;
definition
let C796 being  locally_directed  regular  monotone OrderSortedSign;
let C797 being  non-empty (ManySortedSet of C796);
func MinTerms C797 -> (Subset of ( TS ( DTConOSA C797 ) )) equals 
( rng ( PTMin C797 ) );
correctness by RELAT_1:def 19;
end;
theorem
L2225: (for B1002 being  locally_directed  regular  monotone OrderSortedSign holds (for B1003 being  non-empty (ManySortedSet of B1002) holds (for B1004 being set holds (B1004 is (MinTerm of B1002 , B1003) iff B1004 in ( MinTerms B1003 )))))
proof
let C798 being  locally_directed  regular  monotone OrderSortedSign;
let C799 being  non-empty (ManySortedSet of C798);
let C800 being set;
thus L2226:now
assume L2227: C800 is (MinTerm of C798 , C799);
reconsider D540 = C800 as (MinTerm of C798 , C799) by L2227;
L2228: ( ( PTMin C799 ) . D540 ) = D540 by L2221;
thus L2229: C800 in ( MinTerms C799 ) by L2228 , FUNCT_2:4;
end;
assume L2230: C800 in ( MinTerms C799 );
consider C801 being set such that L2231: C801 in ( dom ( PTMin C799 ) ) and L2232: C800 = ( ( PTMin C799 ) . C801 ) by L2230 , FUNCT_1:def 3;
reconsider D541 = C801 as (Element of ( TS ( DTConOSA C799 ) )) by L2231;
L2233: ( ( PTMin C799 ) . D541 ) is (Element of ( TS ( DTConOSA C799 ) ));
reconsider D542 = C800 as (Element of ( TS ( DTConOSA C799 ) )) by L2233 , L2232;
L2234: ( ( PTMin C799 ) . D542 ) = D542 by L2231 , L2232 , L2123;
thus L2235: thesis by L2234 , L2221;
end;
