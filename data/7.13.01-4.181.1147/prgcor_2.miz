:: Logical Correctness of Vector Calculation Programs
::  by Takaya Nishiyama , Hirofumi Fukura and Yatsuka Nakamura
::
:: Received July 13, 2004
:: Copyright (c) 2004-2012 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, NAT_1, XBOOLE_0, AFINSQ_1, SUBSET_1, TARSKI, CARD_1,
      FUNCT_1, RELAT_1, ORDINAL1, FINSEQ_1, XXREAL_0, ARYTM_3, ARYTM_1,
      FUNCOP_1, ORDINAL4, REAL_1, INT_1, CARD_3, PARTFUN1, RVSUM_1, FINSEQ_2,
      PRGCOR_2;
 notations TARSKI, XBOOLE_0, SUBSET_1, NUMBERS, RELAT_1, FUNCT_1, ORDINAL1,
      ORDINAL4, REAL_1, NAT_1, PARTFUN1, FINSEQ_1, FUNCOP_1, SEQ_1, AFINSQ_1,
      INT_1, RVSUM_1, NAT_D, FINSEQ_2, XXREAL_0;
 constructors XXREAL_0, REAL_1, NAT_1, PARTFUN1, NAT_D, AFINSQ_1, SEQ_1,
      BINOP_2, INT_1, VALUED_1, RVSUM_1, RELSET_1, ORDINAL4, FUNCOP_1, FUNCT_7;
 registrations ORDINAL1, RELSET_1, NUMBERS, XXREAL_0, XREAL_0, NAT_1, INT_1,
      MEMBERED, FINSEQ_1, AFINSQ_1, XBOOLE_0, VALUED_0, FINSEQ_2, CARD_1;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI;
 theorems FUNCT_1, NAT_1, RELAT_1, ORDINAL1, FINSEQ_1, FUNCOP_1, AFINSQ_1,
      RVSUM_1, FINSEQ_4, FINSEQ_2, XREAL_1, XXREAL_0, PARTFUN1, VALUED_1,
      XREAL_0, FINSEQ_5, CARD_1;
 schemes NAT_1, AFINSQ_1;

begin
definition
let R3 being non  empty set;
let C1 being (XFinSequence of R3);
let C2 being (FinSequence of R3);
pred C1 is_an_xrep_of C2
means
:L1: (( NAT ) c= R3 & ( C1 . ( 0 ) ) = ( len C2 ) & ( len C2 ) < ( len C1 ) & (for R2 being Nat holds ((1 <= R2 & R2 <= ( len C2 )) implies ( C1 . R2 ) = ( C2 . R2 ))))
;end;
theorem
L3: (for R3 being non  empty set holds (for B1 being (XFinSequence of R3) holds ((( NAT ) c= R3 & ( B1 . ( 0 ) ) is Nat & ( B1 . ( 0 ) ) in ( len B1 )) implies B1 is_an_xrep_of ( XFS2FS* B1 ))))
proof
let R3 being non  empty set;
let C3 being (XFinSequence of R3);
assume that
L4: ( NAT ) c= R3
and
L5: ( C3 . ( 0 ) ) is Nat
and
L6: ( C3 . ( 0 ) ) in ( len C3 );
reconsider D1 = ( C3 . ( 0 ) ) as Nat by L5;
L7: D1 < ( len C3 ) by L6 , NAT_1:44;
L8: (( len ( XFS2FS* C3 ) ) = D1 & (for R2 being Nat holds ((1 <= R2 & R2 <= D1) implies ( ( XFS2FS* C3 ) . R2 ) = ( C3 . R2 )))) by L6 , AFINSQ_1:def 11;
thus L9: thesis by L8 , L4 , L7 , L1;
end;
definition
let C4 , C5 , C6 , C7 , C8 being set;
func IFLGT (C4 , C5 , C6 , C7 , C8) -> set equals 
:L10: C6 if C4 in C5 , C7 if C4 = C5 otherwise C8;
correctness;
end;
theorem
L12: (for R3 being non  empty set holds (for B2 being (FinSequence of R3) holds (for B3 being Nat holds ((( NAT ) c= R3 & B3 > ( len B2 )) implies (ex B4 being (XFinSequence of R3) st (( len B4 ) = B3 & B4 is_an_xrep_of B2))))))
proof
let R3 being non  empty set;
let C9 being (FinSequence of R3);
let C10 being Nat;
assume that
L13: ( NAT ) c= R3
and
L14: C10 > ( len C9 );
reconsider D2 = C10 as (Element of ( NAT )) by ORDINAL1:def 12;
L15: ( len C9 ) in ( NAT );
consider C11 being set such that L16: C11 in R3 and L17: C11 = ( len C9 ) by L15 , L13;
reconsider D3 = C11 as (Element of R3) by L16;
deffunc H1(set) = ( IFEQ ($1 , ( 0 ) , D3 , ( IFLGT ($1 , ( len C9 ) , ( C9 . $1 ) , ( C9 . $1 ) , D3) )) );
L18: (ex B5 being XFinSequence st (( len B5 ) = D2 & (for B6 being Nat holds (B6 in D2 implies ( B5 . B6 ) = H1(B6))))) from AFINSQ_1:sch 2;
consider C12 being XFinSequence such that L19: ( len C12 ) = D2 and L20: (for B7 being Nat holds (B7 in D2 implies ( C12 . B7 ) = H1(B7))) by L18;
L21: ( rng C12 ) c= R3
proof
let C13 being set;
assume L22: C13 in ( rng C12 );
consider C14 being set such that L23: C14 in ( dom C12 ) and L24: C13 = ( C12 . C14 ) by L22 , FUNCT_1:def 3;
reconsider D4 = C14 as Ordinal by L23;
reconsider D5 = D4 as (Element of ( NAT )) by L23;
L25: ( C12 . D5 ) = H1(D5) by L19 , L20 , L23;
L26:
now
per cases ;
case L27: C14 = ( 0 );
L28: H1(C14) = D3 by L27 , FUNCOP_1:def 8;
thus L29: ( C12 . C14 ) in R3 by L28 , L25;
end;
case L30: C14 <> ( 0 );
L31: H1(C14) = ( IFLGT (C14 , ( len C9 ) , ( C9 . C14 ) , ( C9 . C14 ) , D3) ) by L30 , FUNCOP_1:def 8;
L32:
now
per cases ;
case L33: C14 in ( len C9 );
L34: D5 < ( len C9 ) by L33 , NAT_1:44;
L35: ( ( 0 ) + 1 ) <= D5 by L30 , NAT_1:13;
L36: D5 in ( Seg ( len C9 ) ) by L35 , L34 , FINSEQ_1:1;
L37: C14 in ( dom C9 ) by L36 , FINSEQ_1:def 3;
L38: ( C9 . C14 ) in ( rng C9 ) by L37 , FUNCT_1:def 3;
L39: ( rng C9 ) c= R3 by FINSEQ_1:def 4;
L40: H1(C14) = ( C9 . C14 ) by L31 , L33 , L10;
thus L41: ( C12 . C14 ) in R3 by L40 , L25 , L38 , L39;
end;
case L42: C14 = ( len C9 );
L43: ( ( 0 ) + 1 ) <= D5 by L30 , NAT_1:13;
L44: D5 in ( Seg ( len C9 ) ) by L43 , L42 , FINSEQ_1:1;
L45: C14 in ( dom C9 ) by L44 , FINSEQ_1:def 3;
L46: ( C9 . C14 ) in ( rng C9 ) by L45 , FUNCT_1:def 3;
L47: ( rng C9 ) c= R3 by FINSEQ_1:def 4;
L48: H1(C14) = ( C9 . C14 ) by L31 , L42 , L10;
thus L49: ( C12 . C14 ) in R3 by L48 , L25 , L46 , L47;
end;
case L50: (not (C14 in ( len C9 ) or C14 = ( len C9 )));
L51: H1(C14) = D3 by L50 , L31 , L10;
thus L52: ( C12 . C14 ) in R3 by L51 , L25;
end;
end;
thus L54: ( C12 . C14 ) in R3 by L32;
end;
end;
thus L56: thesis by L26 , L24;
end;
reconsider D6 = C12 as (XFinSequence of R3) by L21 , RELAT_1:def 19;
reconsider D7 = ( Replace (D6 , ( 0 ) , D3) ) as (XFinSequence of R3);
L57: (for R2 being Nat holds ((1 <= R2 & R2 <= ( len C9 )) implies ( D7 . R2 ) = ( C9 . R2 )))
proof
let R2 being Nat;
assume that
L58: 1 <= R2
and
L59: R2 <= ( len C9 );
L60: (R2 < ( len C9 ) or R2 = ( len C9 )) by L59 , XXREAL_0:1;
L61: (R2 in ( len C9 ) or R2 = ( len C9 )) by L60 , NAT_1:44;
L62: R2 < D2 by L14 , L59 , XXREAL_0:2;
L63: R2 in D2 by L62 , NAT_1:44;
L64: R2 in ( NAT ) by ORDINAL1:def 12;
thus L65: ( D7 . R2 ) = ( D6 . R2 ) by L64 , L58 , AFINSQ_1:44
.= H1(R2) by L20 , L63
.= ( IFLGT (R2 , ( len C9 ) , ( C9 . R2 ) , ( C9 . R2 ) , D3) ) by L58 , FUNCOP_1:def 8
.= ( C9 . R2 ) by L61 , L10;
end;
L66: ( len D7 ) = ( len D6 ) by AFINSQ_1:44;
L67: ( D7 . ( 0 ) ) = ( len C9 ) by L14 , L17 , L19 , AFINSQ_1:44;
L68: D7 is_an_xrep_of C9 by L67 , L13 , L14 , L19 , L66 , L57 , L1;
thus L69: thesis by L68 , L19 , L66;
end;
definition
let C15 , C16 being (XFinSequence of ( REAL ));
assume that
L70: ( C16 . ( 0 ) ) is Nat
and
L71: ( C16 . ( 0 ) ) < ( len C15 );
func inner_prd_prg (C15 , C16) -> Real means 
:L72: (ex B8 being (XFinSequence of ( REAL )) st (ex B9 being Integer st (( len B8 ) = ( len C15 ) & ( B8 . ( 0 ) ) = ( 0 ) & B9 = ( C16 . ( 0 ) ) & (B9 <> ( 0 ) implies (for B10 being Nat holds (B10 < B9 implies ( B8 . ( B10 + 1 ) ) = ( ( B8 . B10 ) + ( ( C15 . ( B10 + 1 ) ) * ( C16 . ( B10 + 1 ) ) ) )))) & it = ( B8 . B9 ))));
existence
proof
reconsider D8 = <% ( 0 ) %> as (XFinSequence of ( REAL ));
set D9 = ( len C15 );
reconsider D10 = ( C16 . ( 0 ) ) as Nat by L70;
reconsider D11 = D10 as Integer;
defpred S1[ Nat ] means (ex B11 being (XFinSequence of ( REAL )) st (( len B11 ) = ( $1 + 1 ) & ( B11 . ( 0 ) ) = ( 0 ) & (for R1 being Nat holds ((R1 < $1 & R1 < D10) implies ( B11 . ( R1 + 1 ) ) = ( ( B11 . R1 ) + ( ( C15 . ( R1 + 1 ) ) * ( C16 . ( R1 + 1 ) ) ) )))));
L73: (for R1 being Nat holds ((R1 < ( 0 ) & R1 < D10) implies ( D8 . ( R1 + 1 ) ) = ( ( D8 . R1 ) + ( ( C15 . ( R1 + 1 ) ) * ( C16 . ( R1 + 1 ) ) ) )));
L74: (for B12 being Nat holds (S1[ B12 ] implies S1[ ( B12 + 1 ) ]))
proof
let C17 being Nat;
reconsider D12 = C17 as Nat;
assume L75: S1[ C17 ];
consider C18 being (XFinSequence of ( REAL )) such that L76: ( len C18 ) = ( C17 + 1 ) and L77: ( C18 . ( 0 ) ) = ( 0 ) and L78: (for B13 being Nat holds ((B13 < C17 & B13 < D10) implies ( C18 . ( B13 + 1 ) ) = ( ( C18 . B13 ) + ( ( C15 . ( B13 + 1 ) ) * ( C16 . ( B13 + 1 ) ) ) ))) by L75;
reconsider D13 = ( ( C18 . D12 ) + ( ( C15 . ( D12 + 1 ) ) * ( C16 . ( D12 + 1 ) ) ) ) as Real;
set D14 = ( C18 ^ <% D13 %> );
L79: ( 0 ) in ( len C18 ) by L76 , NAT_1:44;
L80: ( D14 . ( 0 ) ) = ( 0 ) by L79 , L77 , AFINSQ_1:def 3;
L81: (for B14 being Nat holds ((B14 < ( C17 + 1 ) & B14 < D10) implies ( D14 . ( B14 + 1 ) ) = ( ( D14 . B14 ) + ( ( C15 . ( B14 + 1 ) ) * ( C16 . ( B14 + 1 ) ) ) )))
proof
let C19 being Nat;
assume that
L82: C19 < ( C17 + 1 )
and
L83: C19 < D10;
L84: C19 <= C17 by L82 , NAT_1:13;
L85:
now
per cases  by L84 , XXREAL_0:1;
case L86: C19 < C17;
L87: C19 < ( len C18 ) by L86 , L76 , NAT_1:13;
L88: C19 in ( dom C18 ) by L87 , NAT_1:44;
L89: ( D14 . C19 ) = ( C18 . C19 ) by L88 , AFINSQ_1:def 3;
L90: ( C19 + 1 ) < ( C17 + 1 ) by L86 , XREAL_1:6;
L91: ( C19 + 1 ) in ( len C18 ) by L90 , L76 , NAT_1:44;
L92: ( D14 . ( C19 + 1 ) ) = ( C18 . ( C19 + 1 ) ) by L91 , AFINSQ_1:def 3;
thus L93: thesis by L92 , L78 , L83 , L86 , L89;
end;
case L94: C19 = C17;
L95: ( 0 ) in 1 by NAT_1:44;
L96: (( <% ( ( C18 . D12 ) + ( ( C15 . ( D12 + 1 ) ) * ( C16 . ( D12 + 1 ) ) ) ) %> . ( 0 ) ) = ( ( C18 . D12 ) + ( ( C15 . ( D12 + 1 ) ) * ( C16 . ( D12 + 1 ) ) ) ) & ( 0 ) in ( dom <% ( ( C18 . D12 ) + ( ( C15 . ( D12 + 1 ) ) * ( C16 . ( D12 + 1 ) ) ) ) %> )) by L95 , AFINSQ_1:def 4;
L97: ( D14 . ( ( C19 + 1 ) + ( 0 ) ) ) = ( ( C18 . D12 ) + ( ( C15 . ( D12 + 1 ) ) * ( C16 . ( D12 + 1 ) ) ) ) by L96 , L76 , L94 , AFINSQ_1:def 3;
L98: C19 < ( C19 + 1 ) by NAT_1:13;
L99: C19 in ( dom C18 ) by L98 , L76 , L94 , NAT_1:44;
thus L100: thesis by L99 , L94 , L97 , AFINSQ_1:def 3;
end;
end;
thus L102: thesis by L85;
end;
L103: ( len D14 ) = ( ( len C18 ) + ( len <% ( ( C18 . D12 ) + ( ( C15 . ( D12 + 1 ) ) * ( C16 . ( D12 + 1 ) ) ) ) %> ) ) by AFINSQ_1:17
.= ( ( C17 + 1 ) + 1 ) by L76 , AFINSQ_1:33;
thus L104: thesis by L103 , L80 , L81;
end;
L105: (( len D8 ) = 1 & ( D8 . ( 0 ) ) = ( 0 )) by AFINSQ_1:def 4;
L106: S1[ ( 0 ) ] by L105 , L73;
L107: (for B15 being Nat holds S1[ B15 ]) from NAT_1:sch 2(L106 , L74);
consider C20 being (XFinSequence of ( REAL )) such that L108: (( len C20 ) = ( ( D9 -' 1 ) + 1 ) & ( C20 . ( 0 ) ) = ( 0 )) and L109: (for B16 being Nat holds ((B16 < ( D9 -' 1 ) & B16 < D10) implies ( C20 . ( B16 + 1 ) ) = ( ( C20 . B16 ) + ( ( C15 . ( B16 + 1 ) ) * ( C16 . ( B16 + 1 ) ) ) ))) by L107;
reconsider D15 = ( C20 . D10 ) as Real;
L110: D9 >= ( ( 0 ) + 1 ) by L70 , L71 , NAT_1:13;
L111: ( D9 - 1 ) >= ( 0 ) by L110 , XREAL_1:48;
L112: ( D9 -' 1 ) = ( D9 - 1 ) by L111 , XREAL_0:def 2;
L113: (D11 <> ( 0 ) implies (for B17 being Nat holds (B17 < D11 implies ( C20 . ( B17 + 1 ) ) = ( ( C20 . B17 ) + ( ( C15 . ( B17 + 1 ) ) * ( C16 . ( B17 + 1 ) ) ) ))))
proof
assume L114: D11 <> ( 0 );
thus L115: (for B18 being Nat holds (B18 < D11 implies ( C20 . ( B18 + 1 ) ) = ( ( C20 . B18 ) + ( ( C15 . ( B18 + 1 ) ) * ( C16 . ( B18 + 1 ) ) ) )))
proof
let C21 being Nat;
assume L116: C21 < D11;
L117: ( D11 + 1 ) <= D9 by L71 , NAT_1:13;
L118: ( ( D11 + 1 ) - 1 ) <= ( D9 - 1 ) by L117 , XREAL_1:9;
L119: C21 < ( D9 -' 1 ) by L118 , L112 , L116 , XXREAL_0:2;
thus L120: thesis by L119 , L109 , L116;
end;

end;
L116: (ex B19 being (XFinSequence of ( REAL )) st (ex B20 being Integer st (( len B19 ) = ( len C15 ) & ( B19 . ( 0 ) ) = ( 0 ) & B20 = ( C16 . ( 0 ) ) & (B20 <> ( 0 ) implies (for B21 being Nat holds (B21 < B20 implies ( B19 . ( B21 + 1 ) ) = ( ( B19 . B21 ) + ( ( C15 . ( B21 + 1 ) ) * ( C16 . ( B21 + 1 ) ) ) )))) & D15 = ( B19 . B20 )))) by L113 , L108 , L112;
thus L117: thesis by L116;
end;
uniqueness
proof
thus L118: (for B22 , B23 being Real holds (((ex B24 being (XFinSequence of ( REAL )) st (ex B25 being Integer st (( len B24 ) = ( len C15 ) & ( B24 . ( 0 ) ) = ( 0 ) & B25 = ( C16 . ( 0 ) ) & (B25 <> ( 0 ) implies (for B26 being Nat holds (B26 < B25 implies ( B24 . ( B26 + 1 ) ) = ( ( B24 . B26 ) + ( ( C15 . ( B26 + 1 ) ) * ( C16 . ( B26 + 1 ) ) ) )))) & B22 = ( B24 . B25 )))) & (ex B27 being (XFinSequence of ( REAL )) st (ex B28 being Integer st (( len B27 ) = ( len C15 ) & ( B27 . ( 0 ) ) = ( 0 ) & B28 = ( C16 . ( 0 ) ) & (B28 <> ( 0 ) implies (for B29 being Nat holds (B29 < B28 implies ( B27 . ( B29 + 1 ) ) = ( ( B27 . B29 ) + ( ( C15 . ( B29 + 1 ) ) * ( C16 . ( B29 + 1 ) ) ) )))) & B23 = ( B27 . B28 ))))) implies B22 = B23))
proof
let C22 , C23 being Real;
assume that
L119: (ex B30 being (XFinSequence of ( REAL )) st (ex B31 being Integer st (( len B30 ) = ( len C15 ) & ( B30 . ( 0 ) ) = ( 0 ) & B31 = ( C16 . ( 0 ) ) & (B31 <> ( 0 ) implies (for B32 being Nat holds (B32 < B31 implies ( B30 . ( B32 + 1 ) ) = ( ( B30 . B32 ) + ( ( C15 . ( B32 + 1 ) ) * ( C16 . ( B32 + 1 ) ) ) )))) & C22 = ( B30 . B31 ))))
and
L120: (ex B33 being (XFinSequence of ( REAL )) st (ex B34 being Integer st (( len B33 ) = ( len C15 ) & ( B33 . ( 0 ) ) = ( 0 ) & B34 = ( C16 . ( 0 ) ) & (B34 <> ( 0 ) implies (for B35 being Nat holds (B35 < B34 implies ( B33 . ( B35 + 1 ) ) = ( ( B33 . B35 ) + ( ( C15 . ( B35 + 1 ) ) * ( C16 . ( B35 + 1 ) ) ) )))) & C23 = ( B33 . B34 ))));
consider C24 being (XFinSequence of ( REAL )), C25 being Integer such that L121: ( len C24 ) = ( len C15 ) and L122: ( C24 . ( 0 ) ) = ( 0 ) and L123: C25 = ( C16 . ( 0 ) ) and L124: (C25 <> ( 0 ) implies (for B36 being Nat holds (B36 < C25 implies ( C24 . ( B36 + 1 ) ) = ( ( C24 . B36 ) + ( ( C15 . ( B36 + 1 ) ) * ( C16 . ( B36 + 1 ) ) ) )))) and L125: C22 = ( C24 . C25 ) by L119;
consider C26 being (XFinSequence of ( REAL )), C27 being Integer such that L126: ( len C26 ) = ( len C15 ) and L127: ( C26 . ( 0 ) ) = ( 0 ) and L128: C27 = ( C16 . ( 0 ) ) and L129: (C27 <> ( 0 ) implies (for B37 being Nat holds (B37 < C27 implies ( C26 . ( B37 + 1 ) ) = ( ( C26 . B37 ) + ( ( C15 . ( B37 + 1 ) ) * ( C16 . ( B37 + 1 ) ) ) )))) and L130: C23 = ( C26 . C27 ) by L120;
reconsider D16 = C25 as Nat by L70 , L123;
defpred S2[ Nat ] means ($1 <= D16 implies ( C24 . $1 ) = ( C26 . $1 ));
L131: (for B38 being Nat holds (S2[ B38 ] implies S2[ ( B38 + 1 ) ]))
proof
let C28 being Nat;
assume L132: S2[ C28 ];
L133:
now
assume L134: ( C28 + 1 ) <= D16;
L135: C28 < D16 by L134 , NAT_1:13;
L136: ( C24 . ( C28 + 1 ) ) = ( ( C24 . C28 ) + ( ( C15 . ( C28 + 1 ) ) * ( C16 . ( C28 + 1 ) ) ) ) by L135 , L124;
thus L137: ( C24 . ( C28 + 1 ) ) = ( C26 . ( C28 + 1 ) ) by L136 , L123 , L128 , L129 , L132 , L135;
end;
thus L138: thesis by L133;
end;
L139: S2[ ( 0 ) ] by L122 , L127;
L140: (for B39 being Nat holds S2[ B39 ]) from NAT_1:sch 2(L139 , L131);
thus L141: thesis by L140 , L123 , L125 , L128 , L130;
end;

end;
end;
theorem
L120: (for B40 being (FinSequence of ( REAL )) holds (for B41 being (XFinSequence of ( REAL )) holds ((( B41 . ( 0 ) ) = ( 0 ) & (for R2 being Nat holds (R2 < ( len B40 ) implies ( B41 . ( R2 + 1 ) ) = ( ( B41 . R2 ) + ( B40 . ( R2 + 1 ) ) )))) implies ( Sum B40 ) = ( B41 . ( len B40 ) ))))
proof
let C29 being (FinSequence of ( REAL ));
let C30 being (XFinSequence of ( REAL ));
assume that
L121: ( C30 . ( 0 ) ) = ( 0 )
and
L122: (for R2 being Nat holds (R2 < ( len C29 ) implies ( C30 . ( R2 + 1 ) ) = ( ( C30 . R2 ) + ( C29 . ( R2 + 1 ) ) )));
defpred S3[ Nat ] means ($1 <= ( len C29 ) implies ( Sum ( C29 | $1 ) ) = ( C30 . $1 ));
L123: (for R1 being Nat holds (S3[ R1 ] implies S3[ ( R1 + 1 ) ]))
proof
let R1 being Nat;
reconsider D17 = R1 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D18 = ( D17 + 1 ) as Nat;
assume L124: S3[ R1 ];
L125: (( R1 + 1 ) <= ( len C29 ) implies ( Sum ( C29 | D18 ) ) = ( C30 . ( R1 + 1 ) ))
proof
reconsider D19 = <* ( C29 /. D18 ) *> as (FinSequence of ( REAL ));
reconsider D20 = ( C29 /. D18 ) as (Element of ( REAL ));
reconsider D21 = ( C29 | R1 ) as (FinSequence of ( REAL ));
assume L126: ( R1 + 1 ) <= ( len C29 );
L127: ( C29 | D18 ) = ( ( C29 | R1 ) ^ <* ( C29 /. D18 ) *> ) by L126 , FINSEQ_5:82;
L128: 1 <= ( R1 + 1 ) by NAT_1:11;
L129: D18 in ( Seg ( len C29 ) ) by L128 , L126 , FINSEQ_1:1;
L130: D18 in ( dom C29 ) by L129 , FINSEQ_1:def 3;
L131: D18 in ( Seg D18 ) by L128 , FINSEQ_1:1;
L132: D18 in ( Seg ( len ( C29 | D18 ) ) ) by L131 , L126 , FINSEQ_1:59;
L133: D18 in ( dom ( C29 | D18 ) ) by L132 , FINSEQ_1:def 3;
L134: ( Sum D19 ) = D20 by RVSUM_1:73;
L135: ( Sum ( C29 | D18 ) ) = ( ( C30 . R1 ) + D20 ) by L134 , L124 , L126 , L127 , NAT_1:13 , RVSUM_1:75;
L136: ( len ( C29 | D18 ) ) = D18 by L126 , FINSEQ_1:59;
L137: R1 < ( len C29 ) by L126 , NAT_1:13;
L138: ( len ( C29 | D18 ) ) = ( ( len D21 ) + ( len <* D20 *> ) ) by L127 , FINSEQ_1:22
.= ( ( len D21 ) + 1 ) by FINSEQ_1:40;
L139: D20 = ( ( C29 | D18 ) . D18 ) by L138 , L127 , L136 , FINSEQ_1:42
.= ( ( C29 | D18 ) /. D18 ) by L133 , PARTFUN1:def 6
.= ( C29 /. D18 ) by L133 , FINSEQ_4:70
.= ( C29 . D18 ) by L130 , PARTFUN1:def 6;
thus L140: thesis by L139 , L122 , L137 , L135;
end;
thus L141: thesis by L125;
end;
L142: S3[ ( 0 ) ] by L121 , RVSUM_1:72;
L143: (for R1 being Nat holds S3[ R1 ]) from NAT_1:sch 2(L142 , L123);
L144: S3[ ( len C29 ) ] by L143;
thus L145: thesis by L144 , FINSEQ_1:58;
end;
theorem
L146: (for B42 being (FinSequence of ( REAL )) holds (ex B43 being (XFinSequence of ( REAL )) st (( len B43 ) = ( ( len B42 ) + 1 ) & ( B43 . ( 0 ) ) = ( 0 ) & (for R2 being Nat holds (R2 < ( len B42 ) implies ( B43 . ( R2 + 1 ) ) = ( ( B43 . R2 ) + ( B42 . ( R2 + 1 ) ) ))) & ( Sum B42 ) = ( B43 . ( len B42 ) ))))
proof
let C31 being (FinSequence of ( REAL ));
deffunc H2(Nat) = ( Sum ( C31 | $1 ) );
L147: (ex B44 being XFinSequence st (( len B44 ) = ( ( len C31 ) + 1 ) & (for B45 being Nat holds (B45 in ( ( len C31 ) + 1 ) implies ( B44 . B45 ) = H2(B45))))) from AFINSQ_1:sch 2;
consider C32 being XFinSequence such that L148: ( len C32 ) = ( ( len C31 ) + 1 ) and L149: (for B46 being Nat holds (B46 in ( ( len C31 ) + 1 ) implies ( C32 . B46 ) = H2(B46))) by L147;
L150: ( rng C32 ) c= ( REAL )
proof
let C33 being set;
assume L151: C33 in ( rng C32 );
consider C34 being set such that L152: C34 in ( dom C32 ) and L153: C33 = ( C32 . C34 ) by L151 , FUNCT_1:def 3;
reconsider D22 = C34 as (Element of ( NAT )) by L152;
L154: ( C32 . D22 ) = ( Sum ( C31 | D22 ) ) by L148 , L149 , L152;
thus L155: thesis by L154 , L153;
end;
reconsider D23 = C32 as (XFinSequence of ( REAL )) by L150 , RELAT_1:def 19;
L156: (for R2 being Nat holds (R2 < ( len C31 ) implies ( D23 . ( R2 + 1 ) ) = ( ( D23 . R2 ) + ( C31 . ( R2 + 1 ) ) )))
proof
let R2 being Nat;
assume L157: R2 < ( len C31 );
reconsider D24 = R2 as (Element of ( NAT )) by ORDINAL1:def 12;
reconsider D25 = ( D24 + 1 ) as Nat;
L158: ( D24 + 1 ) <= ( len C31 ) by L157 , NAT_1:13;
L159: 1 <= ( 1 + D24 ) by NAT_1:11;
L160: ( D24 + 1 ) in ( Seg ( len C31 ) ) by L159 , L158 , FINSEQ_1:1;
L161: ( D24 + 1 ) in ( dom C31 ) by L160 , FINSEQ_1:def 3;
L162: D24 < ( ( len C31 ) + 1 ) by L157 , NAT_1:13;
L163: D24 in ( ( len C31 ) + 1 ) by L162 , NAT_1:44;
L164: ( D23 . D24 ) = ( Sum ( C31 | D24 ) ) by L163 , L149;
L165: ( D24 + 1 ) < ( ( len C31 ) + 1 ) by L157 , XREAL_1:6;
L166: ( D24 + 1 ) in ( ( len C31 ) + 1 ) by L165 , NAT_1:44;
L167: ( C31 | D25 ) = ( ( C31 | D24 ) ^ <* ( C31 /. D25 ) *> ) by L158 , FINSEQ_5:82;
L168: ( Sum ( C31 | D25 ) ) = ( ( Sum ( C31 | D24 ) ) + ( Sum <* ( C31 /. D25 ) *> ) ) by L167 , RVSUM_1:75
.= ( ( D23 . D24 ) + ( C31 /. D25 ) ) by L164 , RVSUM_1:73
.= ( ( D23 . D24 ) + ( C31 . D25 ) ) by L161 , PARTFUN1:def 6;
thus L169: thesis by L168 , L149 , L166;
end;
L170: ( 0 ) in ( ( len C31 ) + 1 ) by NAT_1:44;
L171: ( D23 . ( 0 ) ) = H2(( 0 )) by L170 , L149
.= ( 0 ) by RVSUM_1:72;
L172: ( Sum C31 ) = ( D23 . ( len C31 ) ) by L171 , L156 , L120;
thus L173: thesis by L172 , L148 , L171 , L156;
end;
theorem
L174: (for B47 , B48 being (FinSequence of ( REAL )) holds (for B49 being Nat holds ((( len B47 ) = ( len B48 ) & B49 > ( len B47 )) implies |( B47 , B48 )| = ( inner_prd_prg (( FS2XFS* (B47 , B49) ) , ( FS2XFS* (B48 , B49) )) ))))
proof
let C35 , C36 being (FinSequence of ( REAL ));
let C37 being Nat;
assume that
L175: ( len C35 ) = ( len C36 )
and
L176: C37 > ( len C35 );
reconsider D26 = C36 as (Element of ( ( len C35 ) -tuples_on ( REAL ) )) by L175 , FINSEQ_2:92;
reconsider D27 = C35 as (Element of ( ( len C35 ) -tuples_on ( REAL ) )) by FINSEQ_2:92;
set D28 = ( inner_prd_prg (( FS2XFS* (C35 , C37) ) , ( FS2XFS* (C36 , C37) )) );
set D29 = ( FS2XFS* (C35 , C37) );
set D30 = ( FS2XFS* (C36 , C37) );
L177: ( len C36 ) = ( D30 . ( 0 ) ) by L175 , L176 , AFINSQ_1:def 10;
L178: ( len D29 ) = C37 by L176 , AFINSQ_1:def 10;
consider C38 being (XFinSequence of ( REAL )), C39 being Integer such that L179: ( len C38 ) = ( len D29 ) and L180: ( C38 . ( 0 ) ) = ( 0 ) and L181: C39 = ( D30 . ( 0 ) ) and L182: (C39 <> ( 0 ) implies (for B50 being Nat holds (B50 < C39 implies ( C38 . ( B50 + 1 ) ) = ( ( C38 . B50 ) + ( ( D29 . ( B50 + 1 ) ) * ( D30 . ( B50 + 1 ) ) ) )))) and L183: D28 = ( C38 . C39 ) by L178 , L175 , L176 , L177 , L72;
L184: ( len ( mlt (D27 , D26) ) ) = ( len C35 ) by CARD_1:def 7;
L185: (for R2 being Nat holds (R2 < ( len ( mlt (C35 , C36) ) ) implies ( C38 . ( R2 + 1 ) ) = ( ( C38 . R2 ) + ( ( mlt (C35 , C36) ) . ( R2 + 1 ) ) )))
proof
let R2 being Nat;
assume L186: R2 < ( len ( mlt (C35 , C36) ) );
L187: (1 <= ( R2 + 1 ) & ( R2 + 1 ) <= ( len C35 )) by L186 , L184 , NAT_1:11 , NAT_1:13;
L188: (( D29 . ( R2 + 1 ) ) = ( C35 . ( R2 + 1 ) ) & ( D30 . ( R2 + 1 ) ) = ( C36 . ( R2 + 1 ) )) by L187 , L175 , L176 , AFINSQ_1:def 10;
L189: R2 < C39 by L175 , L176 , L181 , L184 , L186 , AFINSQ_1:def 10;
L190:
now
per cases ;
case L191: C39 <> ( 0 );
L192: ( C38 . ( R2 + 1 ) ) = ( ( C38 . R2 ) + ( ( D29 . ( R2 + 1 ) ) * ( D30 . ( R2 + 1 ) ) ) ) by L182 , L189
.= ( ( C38 . R2 ) + ( ( mlt (C35 , C36) ) . ( R2 + 1 ) ) ) by L188 , RVSUM_1:59;
thus L193: thesis by L192;
end;
case L194: C39 = ( 0 );
thus L195: contradiction by L194 , L175 , L176 , L181 , L184 , L186 , AFINSQ_1:def 10;
end;
end;
thus L197: thesis by L190;
end;
L198: ( Sum ( mlt (C35 , C36) ) ) = ( C38 . C39 ) by L185 , L175 , L177 , L180 , L181 , L184 , L120;
thus L199: thesis by L198 , L183 , RVSUM_1:def 16;
end;
definition
let C40 , C41 being (XFinSequence of ( REAL ));
let C42 being Real;
let C43 being Integer;
pred C43 scalar_prd_prg C41 , C42 , C40
means
:L200: (( len C41 ) = C43 & ( len C40 ) = C43 & (ex B51 being Integer st (( C41 . ( 0 ) ) = ( C40 . ( 0 ) ) & B51 = ( C40 . ( 0 ) ) & (B51 <> ( 0 ) implies (for B52 being Nat holds ((1 <= B52 & B52 <= B51) implies ( C41 . B52 ) = ( C42 * ( C40 . B52 ) )))))))
;end;
theorem
L202: (for B53 being non  empty (XFinSequence of ( REAL )) holds (for B54 being Real holds (for B55 being Nat holds ((( B53 . ( 0 ) ) is Nat & ( len B53 ) = B55 & ( B53 . ( 0 ) ) < B55) implies ((ex B56 being (XFinSequence of ( REAL )) st B55 scalar_prd_prg B56 , B54 , B53) & (for B57 being non  empty (XFinSequence of ( REAL )) holds (B55 scalar_prd_prg B57 , B54 , B53 implies ( XFS2FS* B57 ) = ( B54 * ( XFS2FS* B53 ) ))))))))
proof
let C44 being non  empty (XFinSequence of ( REAL ));
let C45 being Real;
let C46 being Nat;
assume that
L203: ( C44 . ( 0 ) ) is Nat
and
L204: ( len C44 ) = C46
and
L205: ( C44 . ( 0 ) ) < C46;
reconsider D31 = ( C44 . ( 0 ) ) as Nat by L203;
reconsider D32 = ( C45 * ( XFS2FS* C44 ) ) as (FinSequence of ( REAL ));
L206: ( dom ( C45 * ( XFS2FS* C44 ) ) ) = ( dom ( XFS2FS* C44 ) ) by VALUED_1:def 5;
L207: ( Seg ( len ( C45 * ( XFS2FS* C44 ) ) ) ) = ( dom ( XFS2FS* C44 ) ) by L206 , FINSEQ_1:def 3;
L208: ( C44 . ( 0 ) ) in C46 by L203 , L205 , NAT_1:44;
L209: ( len ( XFS2FS* C44 ) ) = ( C44 . ( 0 ) ) by L208 , L204 , AFINSQ_1:def 11;
L210: ( len D32 ) = D31 by L209 , L207 , FINSEQ_1:def 3;
consider C47 being (XFinSequence of ( REAL )) such that L211: ( len C47 ) = C46 and L212: C47 is_an_xrep_of D32 by L210 , L205 , L12;
reconsider D33 = ( Replace (C47 , ( 0 ) , ( C44 . ( 0 ) )) ) as (XFinSequence of ( REAL ));
L213:
now
assume L214: D31 <> ( 0 );
thus L215: (for B58 being Nat holds ((1 <= B58 & B58 <= D31) implies ( D33 . B58 ) = ( C45 * ( C44 . B58 ) )))
proof
let C48 being Nat;
assume that
L216: 1 <= C48
and
L217: C48 <= D31;
L218: ( ( XFS2FS* C44 ) . C48 ) = ( C44 . C48 ) by L204 , L208 , L216 , L217 , AFINSQ_1:def 11;
L219: ( ( C45 * ( XFS2FS* C44 ) ) . C48 ) = ( C45 * ( C44 . C48 ) ) by L218 , RVSUM_1:44;
L220: (C48 in ( NAT ) & ( C47 . C48 ) = ( D32 . C48 )) by L210 , L212 , L216 , L217 , L1 , ORDINAL1:def 12;
thus L221: thesis by L220 , L216 , L219 , AFINSQ_1:44;
end;

end;
L216: (( len C47 ) = ( len D33 ) & ( D33 . ( 0 ) ) = ( C44 . ( 0 ) )) by L203 , L205 , L211 , AFINSQ_1:44;
L217: C46 scalar_prd_prg D33 , C45 , C44 by L216 , L204 , L211 , L213 , L200;
thus L218: (ex B59 being (XFinSequence of ( REAL )) st C46 scalar_prd_prg B59 , C45 , C44) by L217;
L219: ( 0 ) < ( len C44 );
thus L220: (for B60 being non  empty (XFinSequence of ( REAL )) holds (C46 scalar_prd_prg B60 , C45 , C44 implies ( XFS2FS* B60 ) = ( C45 * ( XFS2FS* C44 ) )))
proof
let C49 being non  empty (XFinSequence of ( REAL ));
assume L221: C46 scalar_prd_prg C49 , C45 , C44;
consider C50 being Integer such that L222: ( C49 . ( 0 ) ) = ( C44 . ( 0 ) ) and L223: C50 = ( C44 . ( 0 ) ) and L224: (C50 <> ( 0 ) implies (for B61 being Nat holds ((1 <= B61 & B61 <= C50) implies ( C49 . B61 ) = ( C45 * ( C44 . B61 ) )))) by L221 , L200;
L225: (( len C49 ) = C46 & (ex B62 being Integer st (( C49 . ( 0 ) ) = ( C44 . ( 0 ) ) & B62 = ( C44 . ( 0 ) ) & (B62 <> ( 0 ) implies (for B63 being Nat holds ((1 <= B63 & B63 <= B62) implies ( C49 . B63 ) = ( C45 * ( C44 . B63 ) ))))))) by L221 , L200;
L226: ( len ( XFS2FS* C49 ) ) = ( C49 . ( 0 ) ) by L225 , L208 , AFINSQ_1:def 11;
L227:
now
per cases ;
case L228: C50 = ( 0 );
L229: (( XFS2FS* C44 ) = ( <*> ( REAL ) ) & ( XFS2FS* C49 ) = ( <*> ( REAL ) )) by L228 , L219 , L225 , L223 , AFINSQ_1:64;
thus L230: thesis by L229 , RVSUM_1:46;
end;
case L231: C50 <> ( 0 );
set D34 = ( XFS2FS* C49 );
L232: (for B64 being Nat holds ((1 <= B64 & B64 <= ( len D34 )) implies ( D34 . B64 ) = ( D32 . B64 )))
proof
let C51 being Nat;
assume that
L233: 1 <= C51
and
L234: C51 <= ( len D34 );
L235: ( C49 . ( 0 ) ) in ( len C49 ) by L203 , L205 , L225 , NAT_1:44;
L236: C51 <= C50 by L235 , L222 , L223 , L234 , AFINSQ_1:def 11;
L237: ( C44 . C51 ) = ( ( XFS2FS* C44 ) . C51 ) by L236 , L204 , L208 , L223 , L233 , AFINSQ_1:def 11;
L238: ( len D34 ) = C50 by L222 , L223 , L235 , AFINSQ_1:def 11;
L239: ( D34 . C51 ) = ( C49 . C51 ) by L238 , L222 , L223 , L233 , L234 , L235 , AFINSQ_1:def 11
.= ( C45 * ( C44 . C51 ) ) by L224 , L233 , L236;
thus L240: thesis by L239 , L237 , RVSUM_1:44;
end;
thus L241: thesis by L232 , L210 , L222 , L226 , FINSEQ_1:14;
end;
end;
thus L243: thesis by L227;
end;

end;
definition
let C52 , C53 being (XFinSequence of ( REAL ));
let C54 being Integer;
pred C54 vector_minus_prg C53 , C52
means
:L221: (( len C53 ) = C54 & ( len C52 ) = C54 & (ex B65 being Integer st (( C53 . ( 0 ) ) = ( C52 . ( 0 ) ) & B65 = ( C52 . ( 0 ) ) & (B65 <> ( 0 ) implies (for B66 being Nat holds ((1 <= B66 & B66 <= B65) implies ( C53 . B66 ) = ( - ( C52 . B66 ) )))))))
;end;
theorem
L223: (for B67 being non  empty (XFinSequence of ( REAL )) holds (for B68 being Nat holds ((( B67 . ( 0 ) ) is Nat & ( len B67 ) = B68 & ( B67 . ( 0 ) ) < B68) implies ((ex B69 being (XFinSequence of ( REAL )) st B68 vector_minus_prg B69 , B67) & (for B70 being non  empty (XFinSequence of ( REAL )) holds (B68 vector_minus_prg B70 , B67 implies ( XFS2FS* B70 ) = ( - ( XFS2FS* B67 ) )))))))
proof
let C55 being non  empty (XFinSequence of ( REAL ));
let C56 being Nat;
assume that
L224: ( C55 . ( 0 ) ) is Nat
and
L225: ( len C55 ) = C56
and
L226: ( C55 . ( 0 ) ) < C56;
reconsider D35 = ( C55 . ( 0 ) ) as Nat by L224;
reconsider D36 = ( - ( XFS2FS* C55 ) ) as (FinSequence of ( REAL ));
L227: ( dom ( - ( XFS2FS* C55 ) ) ) = ( dom ( XFS2FS* C55 ) ) by VALUED_1:8;
L228: ( Seg ( len ( - ( XFS2FS* C55 ) ) ) ) = ( dom ( XFS2FS* C55 ) ) by L227 , FINSEQ_1:def 3;
L229: ( C55 . ( 0 ) ) in C56 by L224 , L226 , NAT_1:44;
L230: ( len ( XFS2FS* C55 ) ) = ( C55 . ( 0 ) ) by L229 , L225 , AFINSQ_1:def 11;
L231: ( len D36 ) = D35 by L230 , L228 , FINSEQ_1:def 3;
consider C57 being (XFinSequence of ( REAL )) such that L232: ( len C57 ) = C56 and L233: C57 is_an_xrep_of D36 by L231 , L226 , L12;
reconsider D37 = ( Replace (C57 , ( 0 ) , ( C55 . ( 0 ) )) ) as (XFinSequence of ( REAL ));
L234: (D35 <> ( 0 ) implies (for B71 being Nat holds ((1 <= B71 & B71 <= D35) implies ( D37 . B71 ) = ( - ( C55 . B71 ) ))))
proof
assume L235: D35 <> ( 0 );
let C58 being Nat;
assume that
L236: 1 <= C58
and
L237: C58 <= D35;
L238: ( ( XFS2FS* C55 ) . C58 ) = ( C55 . C58 ) by L225 , L229 , L236 , L237 , AFINSQ_1:def 11;
L239: ( ( - ( XFS2FS* C55 ) ) . C58 ) = ( - ( C55 . C58 ) ) by L238 , RVSUM_1:17;
L240: (C58 in ( NAT ) & ( C57 . C58 ) = ( D36 . C58 )) by L231 , L233 , L236 , L237 , L1 , ORDINAL1:def 12;
thus L241: thesis by L240 , L236 , L239 , AFINSQ_1:44;
end;
L242: (( len C57 ) = ( len D37 ) & ( D37 . ( 0 ) ) = ( C55 . ( 0 ) )) by L224 , L226 , L232 , AFINSQ_1:44;
L243: C56 vector_minus_prg D37 , C55 by L242 , L225 , L232 , L234 , L221;
thus L244: (ex B72 being (XFinSequence of ( REAL )) st C56 vector_minus_prg B72 , C55) by L243;
L245: ( 0 ) < ( len C55 );
thus L246: (for B73 being non  empty (XFinSequence of ( REAL )) holds (C56 vector_minus_prg B73 , C55 implies ( XFS2FS* B73 ) = ( - ( XFS2FS* C55 ) )))
proof
let C59 being non  empty (XFinSequence of ( REAL ));
assume L247: C56 vector_minus_prg C59 , C55;
consider C60 being Integer such that L248: ( C59 . ( 0 ) ) = ( C55 . ( 0 ) ) and L249: C60 = ( C55 . ( 0 ) ) and L250: (C60 <> ( 0 ) implies (for B74 being Nat holds ((1 <= B74 & B74 <= C60) implies ( C59 . B74 ) = ( - ( C55 . B74 ) )))) by L247 , L221;
L251: (( len C59 ) = C56 & (ex B75 being Integer st (( C59 . ( 0 ) ) = ( C55 . ( 0 ) ) & B75 = ( C55 . ( 0 ) ) & (B75 <> ( 0 ) implies (for B76 being Nat holds ((1 <= B76 & B76 <= B75) implies ( C59 . B76 ) = ( - ( C55 . B76 ) ))))))) by L247 , L221;
L252: ( len ( XFS2FS* C59 ) ) = ( C59 . ( 0 ) ) by L251 , L229 , AFINSQ_1:def 11;
L253:
now
per cases ;
case L254: C60 = ( 0 );
L255: ( XFS2FS* C55 ) = ( <*> ( REAL ) ) by L254 , L245 , L249 , AFINSQ_1:64;
thus L256: thesis by L255 , L251 , L249 , L254 , AFINSQ_1:64 , RVSUM_1:19;
end;
case L257: C60 <> ( 0 );
set D38 = ( XFS2FS* C59 );
L258: (for B77 being Nat holds ((1 <= B77 & B77 <= ( len D38 )) implies ( D38 . B77 ) = ( D36 . B77 )))
proof
let C61 being Nat;
L259: ( C59 . ( 0 ) ) in ( len C59 ) by L224 , L226 , L251 , NAT_1:44;
L260: ( len D38 ) = C60 by L259 , L248 , L249 , AFINSQ_1:def 11;
assume L261: (1 <= C61 & C61 <= ( len D38 ));
L262: ( C55 . C61 ) = ( ( XFS2FS* C55 ) . C61 ) by L261 , L225 , L229 , L249 , L260 , AFINSQ_1:def 11;
L263: ( D38 . C61 ) = ( C59 . C61 ) by L248 , L249 , L261 , L259 , L260 , AFINSQ_1:def 11
.= ( - ( C55 . C61 ) ) by L250 , L261 , L260;
thus L264: thesis by L263 , L262 , RVSUM_1:17;
end;
thus L265: thesis by L258 , L231 , L248 , L252 , FINSEQ_1:14;
end;
end;
thus L267: thesis by L253;
end;

end;
definition
let C62 , C63 , C64 being (XFinSequence of ( REAL ));
let C65 being Integer;
pred C65 vector_add_prg C64 , C62 , C63
means
:L247: (( len C64 ) = C65 & ( len C62 ) = C65 & ( len C63 ) = C65 & (ex B78 being Integer st (( C64 . ( 0 ) ) = ( C63 . ( 0 ) ) & B78 = ( C63 . ( 0 ) ) & (B78 <> ( 0 ) implies (for B79 being Nat holds ((1 <= B79 & B79 <= B78) implies ( C64 . B79 ) = ( ( C62 . B79 ) + ( C63 . B79 ) )))))))
;end;
theorem
L249: (for B80 , B81 being non  empty (XFinSequence of ( REAL )) holds (for B82 being Nat holds ((( B81 . ( 0 ) ) is Nat & ( len B80 ) = B82 & ( len B81 ) = B82 & ( B80 . ( 0 ) ) = ( B81 . ( 0 ) ) & ( B81 . ( 0 ) ) < B82) implies ((ex B83 being (XFinSequence of ( REAL )) st B82 vector_add_prg B83 , B80 , B81) & (for B84 being non  empty (XFinSequence of ( REAL )) holds (B82 vector_add_prg B84 , B80 , B81 implies ( XFS2FS* B84 ) = ( ( XFS2FS* B80 ) + ( XFS2FS* B81 ) )))))))
proof
let C66 , C67 being non  empty (XFinSequence of ( REAL ));
let C68 being Nat;
assume that
L250: ( C67 . ( 0 ) ) is Nat
and
L251: ( len C66 ) = C68
and
L252: ( len C67 ) = C68
and
L253: ( C66 . ( 0 ) ) = ( C67 . ( 0 ) )
and
L254: ( C67 . ( 0 ) ) < C68;
reconsider D39 = ( C67 . ( 0 ) ) as Nat by L250;
reconsider D40 = ( XFS2FS* C67 ) as (FinSequence of ( REAL ));
reconsider D41 = ( XFS2FS* C66 ) as (FinSequence of ( REAL ));
reconsider D42 = ( D41 + D40 ) as (FinSequence of ( REAL ));
L255: ( C67 . ( 0 ) ) in C68 by L250 , L254 , NAT_1:44;
L256: ( len ( XFS2FS* C66 ) ) = ( C67 . ( 0 ) ) by L255 , L251 , L253 , AFINSQ_1:def 11;
L257: ( len ( XFS2FS* C67 ) ) = ( C67 . ( 0 ) ) by L252 , L255 , AFINSQ_1:def 11;
L258: ( len D42 ) = ( len ( XFS2FS* C66 ) ) by L257 , L256 , RVSUM_1:115;
L259: ( dom D42 ) = ( Seg ( len ( XFS2FS* C67 ) ) ) by L258 , L257 , L256 , FINSEQ_1:def 3;
L260: ( dom ( ( XFS2FS* C66 ) + ( XFS2FS* C67 ) ) ) = ( dom ( XFS2FS* C67 ) ) by L259 , FINSEQ_1:def 3;
L261: ( Seg ( len D42 ) ) = ( dom ( XFS2FS* C67 ) ) by L260 , FINSEQ_1:def 3;
L262: ( len D42 ) = D39 by L261 , L257 , FINSEQ_1:def 3;
consider C69 being (XFinSequence of ( REAL )) such that L263: ( len C69 ) = C68 and L264: C69 is_an_xrep_of D42 by L262 , L254 , L12;
reconsider D43 = ( Replace (C69 , ( 0 ) , ( C67 . ( 0 ) )) ) as (XFinSequence of ( REAL ));
L265:
now
assume L266: D39 <> ( 0 );
thus L267: (for B85 being Nat holds ((1 <= B85 & B85 <= D39) implies ( D43 . B85 ) = ( ( C66 . B85 ) + ( C67 . B85 ) )))
proof
let C70 being Nat;
assume that
L268: 1 <= C70
and
L269: C70 <= D39;
L270: C70 in ( Seg ( len D42 ) ) by L256 , L258 , L268 , L269 , FINSEQ_1:1;
L271: C70 in ( dom D42 ) by L270 , FINSEQ_1:def 3;
L272: (( ( XFS2FS* C66 ) . C70 ) = ( C66 . C70 ) & ( ( XFS2FS* C67 ) . C70 ) = ( C67 . C70 )) by L251 , L252 , L253 , L255 , L268 , L269 , AFINSQ_1:def 11;
L273: ( ( ( XFS2FS* C66 ) + ( XFS2FS* C67 ) ) . C70 ) = ( ( C66 . C70 ) + ( C67 . C70 ) ) by L272 , L271 , VALUED_1:def 1;
L274: (C70 in ( NAT ) & ( C69 . C70 ) = ( D42 . C70 )) by L262 , L264 , L268 , L269 , L1 , ORDINAL1:def 12;
thus L275: thesis by L274 , L268 , L273 , AFINSQ_1:44;
end;

end;
L268: (( len C69 ) = ( len D43 ) & ( D43 . ( 0 ) ) = ( C67 . ( 0 ) )) by L250 , L254 , L263 , AFINSQ_1:44;
L269: C68 vector_add_prg D43 , C66 , C67 by L268 , L251 , L252 , L263 , L265 , L247;
thus L270: (ex B86 being (XFinSequence of ( REAL )) st C68 vector_add_prg B86 , C66 , C67) by L269;
L271: ( 0 ) < ( len C67 );
thus L272: (for B87 being non  empty (XFinSequence of ( REAL )) holds (C68 vector_add_prg B87 , C66 , C67 implies ( XFS2FS* B87 ) = ( ( XFS2FS* C66 ) + ( XFS2FS* C67 ) )))
proof
let C71 being non  empty (XFinSequence of ( REAL ));
assume L273: C68 vector_add_prg C71 , C66 , C67;
consider C72 being Integer such that L274: ( C71 . ( 0 ) ) = ( C67 . ( 0 ) ) and L275: C72 = ( C67 . ( 0 ) ) and L276: (C72 <> ( 0 ) implies (for B88 being Nat holds ((1 <= B88 & B88 <= C72) implies ( C71 . B88 ) = ( ( C66 . B88 ) + ( C67 . B88 ) )))) by L273 , L247;
L277: (( len C71 ) = C68 & (ex B89 being Integer st (( C71 . ( 0 ) ) = ( C67 . ( 0 ) ) & B89 = ( C67 . ( 0 ) ) & (B89 <> ( 0 ) implies (for B90 being Nat holds ((1 <= B90 & B90 <= B89) implies ( C71 . B90 ) = ( ( C66 . B90 ) + ( C67 . B90 ) ))))))) by L273 , L247;
L278: ( len ( XFS2FS* C71 ) ) = ( C71 . ( 0 ) ) by L277 , L255 , AFINSQ_1:def 11;
L279:
now
per cases ;
case L280: C72 = ( 0 );
L281: (( XFS2FS* C67 ) = ( <*> ( REAL ) ) & ( XFS2FS* C71 ) = ( <*> ( REAL ) )) by L280 , L271 , L277 , L275 , AFINSQ_1:64;
thus L282: thesis by L281 , RVSUM_1:12;
end;
case L283: C72 <> ( 0 );
set D44 = ( XFS2FS* C71 );
L284: (for B91 being Nat holds ((1 <= B91 & B91 <= ( len D44 )) implies ( D44 . B91 ) = ( D42 . B91 )))
proof
let C73 being Nat;
assume that
L285: 1 <= C73
and
L286: C73 <= ( len D44 );
L287: ( C71 . ( 0 ) ) in ( len C71 ) by L250 , L254 , L277 , NAT_1:44;
L288: C73 <= C72 by L287 , L274 , L275 , L286 , AFINSQ_1:def 11;
L289: (( C66 . C73 ) = ( ( XFS2FS* C66 ) . C73 ) & ( C67 . C73 ) = ( ( XFS2FS* C67 ) . C73 )) by L288 , L251 , L252 , L253 , L255 , L275 , L285 , AFINSQ_1:def 11;
L290: C73 in ( Seg ( len D42 ) ) by L262 , L275 , L285 , L288 , FINSEQ_1:1;
L291: C73 in ( dom D42 ) by L290 , FINSEQ_1:def 3;
L292: ( len D44 ) = C72 by L274 , L275 , L287 , AFINSQ_1:def 11;
L293: ( D44 . C73 ) = ( C71 . C73 ) by L292 , L274 , L275 , L285 , L286 , L287 , AFINSQ_1:def 11
.= ( ( C66 . C73 ) + ( C67 . C73 ) ) by L276 , L285 , L288;
thus L294: thesis by L293 , L291 , L289 , VALUED_1:def 1;
end;
thus L295: thesis by L284 , L262 , L274 , L278 , FINSEQ_1:14;
end;
end;
thus L297: thesis by L279;
end;

end;
definition
let C74 , C75 , C76 being (XFinSequence of ( REAL ));
let C77 being Integer;
pred C77 vector_sub_prg C76 , C74 , C75
means
:L273: (( len C76 ) = C77 & ( len C74 ) = C77 & ( len C75 ) = C77 & (ex B92 being Integer st (( C76 . ( 0 ) ) = ( C75 . ( 0 ) ) & B92 = ( C75 . ( 0 ) ) & (B92 <> ( 0 ) implies (for B93 being Nat holds ((1 <= B93 & B93 <= B92) implies ( C76 . B93 ) = ( ( C74 . B93 ) - ( C75 . B93 ) )))))))
;end;
theorem
L275: (for B94 , B95 being non  empty (XFinSequence of ( REAL )) holds (for B96 being Nat holds ((( B95 . ( 0 ) ) is Nat & ( len B94 ) = B96 & ( len B95 ) = B96 & ( B94 . ( 0 ) ) = ( B95 . ( 0 ) ) & ( B95 . ( 0 ) ) < B96) implies ((ex B97 being (XFinSequence of ( REAL )) st B96 vector_sub_prg B97 , B94 , B95) & (for B98 being non  empty (XFinSequence of ( REAL )) holds (B96 vector_sub_prg B98 , B94 , B95 implies ( XFS2FS* B98 ) = ( ( XFS2FS* B94 ) - ( XFS2FS* B95 ) )))))))
proof
let C78 , C79 being non  empty (XFinSequence of ( REAL ));
let C80 being Nat;
assume that
L276: ( C79 . ( 0 ) ) is Nat
and
L277: ( len C78 ) = C80
and
L278: ( len C79 ) = C80
and
L279: ( C78 . ( 0 ) ) = ( C79 . ( 0 ) )
and
L280: ( C79 . ( 0 ) ) < C80;
reconsider D45 = ( C79 . ( 0 ) ) as Nat by L276;
reconsider D46 = ( XFS2FS* C79 ) as (FinSequence of ( REAL ));
reconsider D47 = ( XFS2FS* C78 ) as (FinSequence of ( REAL ));
reconsider D48 = ( D47 - D46 ) as (FinSequence of ( REAL ));
L281: ( C79 . ( 0 ) ) in C80 by L276 , L280 , NAT_1:44;
L282: ( len ( XFS2FS* C78 ) ) = ( C79 . ( 0 ) ) by L281 , L277 , L279 , AFINSQ_1:def 11;
L283: ( len ( XFS2FS* C79 ) ) = ( C79 . ( 0 ) ) by L278 , L281 , AFINSQ_1:def 11;
L284: ( len D48 ) = ( len ( XFS2FS* C78 ) ) by L283 , L282 , RVSUM_1:116;
L285: ( dom D48 ) = ( Seg ( len ( XFS2FS* C79 ) ) ) by L284 , L283 , L282 , FINSEQ_1:def 3;
L286: ( dom ( ( XFS2FS* C78 ) - ( XFS2FS* C79 ) ) ) = ( dom ( XFS2FS* C79 ) ) by L285 , FINSEQ_1:def 3;
L287: ( Seg ( len D48 ) ) = ( dom ( XFS2FS* C79 ) ) by L286 , FINSEQ_1:def 3;
L288: ( len D48 ) = D45 by L287 , L283 , FINSEQ_1:def 3;
consider C81 being (XFinSequence of ( REAL )) such that L289: ( len C81 ) = C80 and L290: C81 is_an_xrep_of D48 by L288 , L280 , L12;
reconsider D49 = ( Replace (C81 , ( 0 ) , ( C79 . ( 0 ) )) ) as (XFinSequence of ( REAL ));
L291:
now
assume L292: D45 <> ( 0 );
thus L293: (for B99 being Nat holds ((1 <= B99 & B99 <= D45) implies ( D49 . B99 ) = ( ( C78 . B99 ) - ( C79 . B99 ) )))
proof
let C82 being Nat;
assume that
L294: 1 <= C82
and
L295: C82 <= D45;
L296: C82 in ( Seg ( len D48 ) ) by L282 , L284 , L294 , L295 , FINSEQ_1:1;
L297: C82 in ( dom D48 ) by L296 , FINSEQ_1:def 3;
L298: (( ( XFS2FS* C78 ) . C82 ) = ( C78 . C82 ) & ( ( XFS2FS* C79 ) . C82 ) = ( C79 . C82 )) by L277 , L278 , L279 , L281 , L294 , L295 , AFINSQ_1:def 11;
L299: ( ( ( XFS2FS* C78 ) - ( XFS2FS* C79 ) ) . C82 ) = ( ( C78 . C82 ) - ( C79 . C82 ) ) by L298 , L297 , VALUED_1:13;
L300: (C82 in ( NAT ) & ( C81 . C82 ) = ( D48 . C82 )) by L288 , L290 , L294 , L295 , L1 , ORDINAL1:def 12;
thus L301: thesis by L300 , L294 , L299 , AFINSQ_1:44;
end;

end;
L294: (( len C81 ) = ( len D49 ) & ( D49 . ( 0 ) ) = ( C79 . ( 0 ) )) by L276 , L280 , L289 , AFINSQ_1:44;
L295: C80 vector_sub_prg D49 , C78 , C79 by L294 , L277 , L278 , L289 , L291 , L273;
thus L296: (ex B100 being (XFinSequence of ( REAL )) st C80 vector_sub_prg B100 , C78 , C79) by L295;
L297: ( 0 ) < ( len C79 );
thus L298: (for B101 being non  empty (XFinSequence of ( REAL )) holds (C80 vector_sub_prg B101 , C78 , C79 implies ( XFS2FS* B101 ) = ( ( XFS2FS* C78 ) - ( XFS2FS* C79 ) )))
proof
let C83 being non  empty (XFinSequence of ( REAL ));
assume L299: C80 vector_sub_prg C83 , C78 , C79;
consider C84 being Integer such that L300: ( C83 . ( 0 ) ) = ( C79 . ( 0 ) ) and L301: C84 = ( C79 . ( 0 ) ) and L302: (C84 <> ( 0 ) implies (for B102 being Nat holds ((1 <= B102 & B102 <= C84) implies ( C83 . B102 ) = ( ( C78 . B102 ) - ( C79 . B102 ) )))) by L299 , L273;
L303: (( len C83 ) = C80 & (ex B103 being Integer st (( C83 . ( 0 ) ) = ( C79 . ( 0 ) ) & B103 = ( C79 . ( 0 ) ) & (B103 <> ( 0 ) implies (for B104 being Nat holds ((1 <= B104 & B104 <= B103) implies ( C83 . B104 ) = ( ( C78 . B104 ) - ( C79 . B104 ) ))))))) by L299 , L273;
L304: ( len ( XFS2FS* C83 ) ) = ( C83 . ( 0 ) ) by L303 , L281 , AFINSQ_1:def 11;
L305:
now
per cases ;
case L306: C84 = ( 0 );
L307: (( XFS2FS* C79 ) = ( <*> ( REAL ) ) & ( XFS2FS* C83 ) = ( <*> ( REAL ) )) by L306 , L297 , L303 , L301 , AFINSQ_1:64;
thus L308: thesis by L307 , RVSUM_1:28;
end;
case L309: C84 <> ( 0 );
set D50 = ( XFS2FS* C83 );
L310: (for B105 being Nat holds ((1 <= B105 & B105 <= ( len D50 )) implies ( D50 . B105 ) = ( D48 . B105 )))
proof
let C85 being Nat;
assume that
L311: 1 <= C85
and
L312: C85 <= ( len D50 );
L313: ( C83 . ( 0 ) ) in ( len C83 ) by L276 , L280 , L303 , NAT_1:44;
L314: C85 <= C84 by L313 , L300 , L301 , L312 , AFINSQ_1:def 11;
L315: (( C78 . C85 ) = ( ( XFS2FS* C78 ) . C85 ) & ( C79 . C85 ) = ( ( XFS2FS* C79 ) . C85 )) by L314 , L277 , L278 , L279 , L281 , L301 , L311 , AFINSQ_1:def 11;
L316: C85 in ( Seg ( len D48 ) ) by L288 , L301 , L311 , L314 , FINSEQ_1:1;
L317: C85 in ( dom D48 ) by L316 , FINSEQ_1:def 3;
L318: ( len D50 ) = C84 by L300 , L301 , L313 , AFINSQ_1:def 11;
L319: ( D50 . C85 ) = ( C83 . C85 ) by L318 , L300 , L301 , L311 , L312 , L313 , AFINSQ_1:def 11
.= ( ( C78 . C85 ) - ( C79 . C85 ) ) by L302 , L311 , L312 , L318;
thus L320: thesis by L319 , L317 , L315 , VALUED_1:13;
end;
thus L321: thesis by L310 , L288 , L300 , L304 , FINSEQ_1:14;
end;
end;
thus L323: thesis by L305;
end;

end;
